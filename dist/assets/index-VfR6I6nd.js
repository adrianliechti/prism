const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/angular-html-CU67Zn6k.js","assets/html-GMplVEZG.js","assets/javascript-wDzz0qaB.js","assets/css-DPfMkruS.js","assets/angular-ts-BwZT4LLn.js","assets/scss-OYdSNvt2.js","assets/apl-dKokRX4l.js","assets/xml-sdJ4AIDG.js","assets/java-CylS5w8V.js","assets/json-Cp-IABpG.js","assets/astro-CbQHKStN.js","assets/typescript-BPQ3VLAy.js","assets/postcss-CXtECtnM.js","assets/tsx-COt5Ahok.js","assets/blade-DVc8C-J4.js","assets/html-derivative-BFtXZ54Q.js","assets/sql-BLtJtn59.js","assets/bsl-BO_Y6i37.js","assets/sdbl-DVxCFoDh.js","assets/cairo-KRGpt6FW.js","assets/python-B6aJPvgy.js","assets/cobol-nwyudZeR.js","assets/coffee-Ch7k5sss.js","assets/cpp-CofmeUqb.js","assets/regexp-CDVJQ6XC.js","assets/glsl-DplSGwfg.js","assets/c-BIGW1oBm.js","assets/crystal-tKQVLTB8.js","assets/shellscript-Yzrsuije.js","assets/edge-BkV0erSs.js","assets/elixir-CDX3lj18.js","assets/elm-DbKCFpqz.js","assets/erb-BOJIQeun.js","assets/ruby-BvKwtOVI.js","assets/haml-B8DHNrY2.js","assets/graphql-ChdNCCLP.js","assets/jsx-g9-lgVsj.js","assets/lua-BbnMAYS6.js","assets/yaml-Buea-lGh.js","assets/erlang-DsQrWhSR.js","assets/markdown-Cvjx9yec.js","assets/fortran-fixed-form-BZjJHVRy.js","assets/fortran-free-form-D22FLkUw.js","assets/fsharp-CXgrBDvD.js","assets/gdresource-B7Tvp0Sc.js","assets/gdshader-DkwncUOv.js","assets/gdscript-DTMYz4Jt.js","assets/git-commit-F4YmCXRG.js","assets/diff-D97Zzqfu.js","assets/git-rebase-r7XF79zn.js","assets/glimmer-js-Rg0-pVw9.js","assets/glimmer-ts-U6CK756n.js","assets/hack-CaT9iCJl.js","assets/handlebars-BL8al0AC.js","assets/http-jrhK8wxY.js","assets/hurl-irOxFIW8.js","assets/csv-fuZLfV_i.js","assets/hxml-Bvhsp5Yf.js","assets/haxe-CzTSHFRz.js","assets/jinja-4LBKfQ-Z.js","assets/jison-wvAkD_A8.js","assets/julia-C8NyazO9.js","assets/r-DiinP2Uv.js","assets/latex-BdAV_C_H.js","assets/tex-CxkMU7Pf.js","assets/liquid-DYVedYrR.js","assets/marko-CPi9NSCl.js","assets/less-B1dDrJ26.js","assets/mdc-DUICxH0z.js","assets/nginx-DknmC5AR.js","assets/nim-CVrawwO9.js","assets/perl-C0TMdlhV.js","assets/php-CDn_0X-4.js","assets/pug-CGlum2m_.js","assets/qml-3beO22l8.js","assets/razor-CE9lU5zL.js","assets/csharp-K5feNrxe.js","assets/rst-B0xPkSld.js","assets/cmake-D1j8_8rp.js","assets/sas-cz2c8ADy.js","assets/shaderlab-Dg9Lc6iA.js","assets/hlsl-D3lLCCz7.js","assets/shellsession-BADoaaVG.js","assets/soy-Brmx7dQM.js","assets/sparql-rVzFXLq3.js","assets/turtle-BsS91CYL.js","assets/stata-BH5u7GGu.js","assets/svelte-3Dk4HxPD.js","assets/templ-W15q3VgB.js","assets/go-Dn2_MT6a.js","assets/ts-tags-zn1MmPIZ.js","assets/twig-CO9l9SDP.js","assets/vue-DnHKYNfI.js","assets/vue-html-CChd_i61.js","assets/vue-vine-8moa0y9V.js","assets/stylus-BEDo0Tqx.js","assets/xsl-CtQFsRM5.js"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();function US(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var zp={exports:{}},Ko={};var bx;function UO(){if(bx)return Ko;bx=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,s,a){var l=null;if(a!==void 0&&(l=""+a),s.key!==void 0&&(l=""+s.key),"key"in s){a={};for(var u in s)u!=="key"&&(a[u]=s[u])}else a=s;return s=a.ref,{$$typeof:t,type:r,key:l,ref:s!==void 0?s:null,props:a}}return Ko.Fragment=e,Ko.jsx=n,Ko.jsxs=n,Ko}var vx;function $O(){return vx||(vx=1,zp.exports=UO()),zp.exports}var E=$O(),jp={exports:{}},ze={};var xx;function qO(){if(xx)return ze;xx=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),p=Symbol.for("react.activity"),_=Symbol.iterator;function g(N){return N===null||typeof N!="object"?null:(N=_&&N[_]||N["@@iterator"],typeof N=="function"?N:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,k={};function S(N,F,R){this.props=N,this.context=F,this.refs=k,this.updater=R||v}S.prototype.isReactComponent={},S.prototype.setState=function(N,F){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,F,"setState")},S.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function T(){}T.prototype=S.prototype;function C(N,F,R){this.props=N,this.context=F,this.refs=k,this.updater=R||v}var L=C.prototype=new T;L.constructor=C,x(L,S.prototype),L.isPureReactComponent=!0;var D=Array.isArray;function I(){}var P={H:null,A:null,T:null,S:null},V=Object.prototype.hasOwnProperty;function H(N,F,R){var oe=R.ref;return{$$typeof:t,type:N,key:F,ref:oe!==void 0?oe:null,props:R}}function z(N,F){return H(N.type,F,N.props)}function Q(N){return typeof N=="object"&&N!==null&&N.$$typeof===t}function j(N){var F={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(R){return F[R]})}var se=/\/+/g;function Z(N,F){return typeof N=="object"&&N!==null&&N.key!=null?j(""+N.key):F.toString(36)}function $(N){switch(N.status){case"fulfilled":return N.value;case"rejected":throw N.reason;default:switch(typeof N.status=="string"?N.then(I,I):(N.status="pending",N.then(function(F){N.status==="pending"&&(N.status="fulfilled",N.value=F)},function(F){N.status==="pending"&&(N.status="rejected",N.reason=F)})),N.status){case"fulfilled":return N.value;case"rejected":throw N.reason}}throw N}function B(N,F,R,oe,pe){var me=typeof N;(me==="undefined"||me==="boolean")&&(N=null);var xe=!1;if(N===null)xe=!0;else switch(me){case"bigint":case"string":case"number":xe=!0;break;case"object":switch(N.$$typeof){case t:case e:xe=!0;break;case m:return xe=N._init,B(xe(N._payload),F,R,oe,pe)}}if(xe)return pe=pe(N),xe=oe===""?"."+Z(N,0):oe,D(pe)?(R="",xe!=null&&(R=xe.replace(se,"$&/")+"/"),B(pe,F,R,"",function(nt){return nt})):pe!=null&&(Q(pe)&&(pe=z(pe,R+(pe.key==null||N&&N.key===pe.key?"":(""+pe.key).replace(se,"$&/")+"/")+xe)),F.push(pe)),1;xe=0;var Me=oe===""?".":oe+":";if(D(N))for(var Ie=0;Ie<N.length;Ie++)oe=N[Ie],me=Me+Z(oe,Ie),xe+=B(oe,F,R,me,pe);else if(Ie=g(N),typeof Ie=="function")for(N=Ie.call(N),Ie=0;!(oe=N.next()).done;)oe=oe.value,me=Me+Z(oe,Ie++),xe+=B(oe,F,R,me,pe);else if(me==="object"){if(typeof N.then=="function")return B($(N),F,R,oe,pe);throw F=String(N),Error("Objects are not valid as a React child (found: "+(F==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":F)+"). If you meant to render a collection of children, use an array instead.")}return xe}function G(N,F,R){if(N==null)return N;var oe=[],pe=0;return B(N,oe,"","",function(me){return F.call(R,me,pe++)}),oe}function re(N){if(N._status===-1){var F=N._result;F=F(),F.then(function(R){(N._status===0||N._status===-1)&&(N._status=1,N._result=R)},function(R){(N._status===0||N._status===-1)&&(N._status=2,N._result=R)}),N._status===-1&&(N._status=0,N._result=F)}if(N._status===1)return N._result.default;throw N._result}var Y=typeof reportError=="function"?reportError:function(N){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var F=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof N=="object"&&N!==null&&typeof N.message=="string"?String(N.message):String(N),error:N});if(!window.dispatchEvent(F))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",N);return}console.error(N)},O={map:G,forEach:function(N,F,R){G(N,function(){F.apply(this,arguments)},R)},count:function(N){var F=0;return G(N,function(){F++}),F},toArray:function(N){return G(N,function(F){return F})||[]},only:function(N){if(!Q(N))throw Error("React.Children.only expected to receive a single React element child.");return N}};return ze.Activity=p,ze.Children=O,ze.Component=S,ze.Fragment=n,ze.Profiler=s,ze.PureComponent=C,ze.StrictMode=r,ze.Suspense=f,ze.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=P,ze.__COMPILER_RUNTIME={__proto__:null,c:function(N){return P.H.useMemoCache(N)}},ze.cache=function(N){return function(){return N.apply(null,arguments)}},ze.cacheSignal=function(){return null},ze.cloneElement=function(N,F,R){if(N==null)throw Error("The argument must be a React element, but you passed "+N+".");var oe=x({},N.props),pe=N.key;if(F!=null)for(me in F.key!==void 0&&(pe=""+F.key),F)!V.call(F,me)||me==="key"||me==="__self"||me==="__source"||me==="ref"&&F.ref===void 0||(oe[me]=F[me]);var me=arguments.length-2;if(me===1)oe.children=R;else if(1<me){for(var xe=Array(me),Me=0;Me<me;Me++)xe[Me]=arguments[Me+2];oe.children=xe}return H(N.type,pe,oe)},ze.createContext=function(N){return N={$$typeof:l,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null},N.Provider=N,N.Consumer={$$typeof:a,_context:N},N},ze.createElement=function(N,F,R){var oe,pe={},me=null;if(F!=null)for(oe in F.key!==void 0&&(me=""+F.key),F)V.call(F,oe)&&oe!=="key"&&oe!=="__self"&&oe!=="__source"&&(pe[oe]=F[oe]);var xe=arguments.length-2;if(xe===1)pe.children=R;else if(1<xe){for(var Me=Array(xe),Ie=0;Ie<xe;Ie++)Me[Ie]=arguments[Ie+2];pe.children=Me}if(N&&N.defaultProps)for(oe in xe=N.defaultProps,xe)pe[oe]===void 0&&(pe[oe]=xe[oe]);return H(N,me,pe)},ze.createRef=function(){return{current:null}},ze.forwardRef=function(N){return{$$typeof:u,render:N}},ze.isValidElement=Q,ze.lazy=function(N){return{$$typeof:m,_payload:{_status:-1,_result:N},_init:re}},ze.memo=function(N,F){return{$$typeof:h,type:N,compare:F===void 0?null:F}},ze.startTransition=function(N){var F=P.T,R={};P.T=R;try{var oe=N(),pe=P.S;pe!==null&&pe(R,oe),typeof oe=="object"&&oe!==null&&typeof oe.then=="function"&&oe.then(I,Y)}catch(me){Y(me)}finally{F!==null&&R.types!==null&&(F.types=R.types),P.T=F}},ze.unstable_useCacheRefresh=function(){return P.H.useCacheRefresh()},ze.use=function(N){return P.H.use(N)},ze.useActionState=function(N,F,R){return P.H.useActionState(N,F,R)},ze.useCallback=function(N,F){return P.H.useCallback(N,F)},ze.useContext=function(N){return P.H.useContext(N)},ze.useDebugValue=function(){},ze.useDeferredValue=function(N,F){return P.H.useDeferredValue(N,F)},ze.useEffect=function(N,F){return P.H.useEffect(N,F)},ze.useEffectEvent=function(N){return P.H.useEffectEvent(N)},ze.useId=function(){return P.H.useId()},ze.useImperativeHandle=function(N,F,R){return P.H.useImperativeHandle(N,F,R)},ze.useInsertionEffect=function(N,F){return P.H.useInsertionEffect(N,F)},ze.useLayoutEffect=function(N,F){return P.H.useLayoutEffect(N,F)},ze.useMemo=function(N,F){return P.H.useMemo(N,F)},ze.useOptimistic=function(N,F){return P.H.useOptimistic(N,F)},ze.useReducer=function(N,F,R){return P.H.useReducer(N,F,R)},ze.useRef=function(N){return P.H.useRef(N)},ze.useState=function(N){return P.H.useState(N)},ze.useSyncExternalStore=function(N,F,R){return P.H.useSyncExternalStore(N,F,R)},ze.useTransition=function(){return P.H.useTransition()},ze.version="19.2.3",ze}var wx;function Kf(){return wx||(wx=1,jp.exports=qO()),jp.exports}var J=Kf(),Pp={exports:{}},Zo={},Bp={exports:{}},Up={};var Sx;function FO(){return Sx||(Sx=1,(function(t){function e(B,G){var re=B.length;B.push(G);e:for(;0<re;){var Y=re-1>>>1,O=B[Y];if(0<s(O,G))B[Y]=G,B[re]=O,re=Y;else break e}}function n(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var G=B[0],re=B.pop();if(re!==G){B[0]=re;e:for(var Y=0,O=B.length,N=O>>>1;Y<N;){var F=2*(Y+1)-1,R=B[F],oe=F+1,pe=B[oe];if(0>s(R,re))oe<O&&0>s(pe,R)?(B[Y]=pe,B[oe]=re,Y=oe):(B[Y]=R,B[F]=re,Y=F);else if(oe<O&&0>s(pe,re))B[Y]=pe,B[oe]=re,Y=oe;else break e}}return G}function s(B,G){var re=B.sortIndex-G.sortIndex;return re!==0?re:B.id-G.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var l=Date,u=l.now();t.unstable_now=function(){return l.now()-u}}var f=[],h=[],m=1,p=null,_=3,g=!1,v=!1,x=!1,k=!1,S=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;function L(B){for(var G=n(h);G!==null;){if(G.callback===null)r(h);else if(G.startTime<=B)r(h),G.sortIndex=G.expirationTime,e(f,G);else break;G=n(h)}}function D(B){if(x=!1,L(B),!v)if(n(f)!==null)v=!0,I||(I=!0,j());else{var G=n(h);G!==null&&$(D,G.startTime-B)}}var I=!1,P=-1,V=5,H=-1;function z(){return k?!0:!(t.unstable_now()-H<V)}function Q(){if(k=!1,I){var B=t.unstable_now();H=B;var G=!0;try{e:{v=!1,x&&(x=!1,T(P),P=-1),g=!0;var re=_;try{t:{for(L(B),p=n(f);p!==null&&!(p.expirationTime>B&&z());){var Y=p.callback;if(typeof Y=="function"){p.callback=null,_=p.priorityLevel;var O=Y(p.expirationTime<=B);if(B=t.unstable_now(),typeof O=="function"){p.callback=O,L(B),G=!0;break t}p===n(f)&&r(f),L(B)}else r(f);p=n(f)}if(p!==null)G=!0;else{var N=n(h);N!==null&&$(D,N.startTime-B),G=!1}}break e}finally{p=null,_=re,g=!1}G=void 0}}finally{G?j():I=!1}}}var j;if(typeof C=="function")j=function(){C(Q)};else if(typeof MessageChannel<"u"){var se=new MessageChannel,Z=se.port2;se.port1.onmessage=Q,j=function(){Z.postMessage(null)}}else j=function(){S(Q,0)};function $(B,G){P=S(function(){B(t.unstable_now())},G)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):V=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return _},t.unstable_next=function(B){switch(_){case 1:case 2:case 3:var G=3;break;default:G=_}var re=_;_=G;try{return B()}finally{_=re}},t.unstable_requestPaint=function(){k=!0},t.unstable_runWithPriority=function(B,G){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var re=_;_=B;try{return G()}finally{_=re}},t.unstable_scheduleCallback=function(B,G,re){var Y=t.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?Y+re:Y):re=Y,B){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=re+O,B={id:m++,callback:G,priorityLevel:B,startTime:re,expirationTime:O,sortIndex:-1},re>Y?(B.sortIndex=re,e(h,B),n(f)===null&&B===n(h)&&(x?(T(P),P=-1):x=!0,$(D,re-Y))):(B.sortIndex=O,e(f,B),v||g||(v=!0,I||(I=!0,j()))),B},t.unstable_shouldYield=z,t.unstable_wrapCallback=function(B){var G=_;return function(){var re=_;_=G;try{return B.apply(this,arguments)}finally{_=re}}}})(Up)),Up}var kx;function VO(){return kx||(kx=1,Bp.exports=FO()),Bp.exports}var $p={exports:{}},pn={};var Ex;function HO(){if(Ex)return pn;Ex=1;var t=Kf();function e(f){var h="https://react.dev/errors/"+f;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)h+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+f+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},s=Symbol.for("react.portal");function a(f,h,m){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:p==null?null:""+p,children:f,containerInfo:h,implementation:m}}var l=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(f,h){if(f==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return pn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,pn.createPortal=function(f,h){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return a(f,h,null,m)},pn.flushSync=function(f){var h=l.T,m=r.p;try{if(l.T=null,r.p=2,f)return f()}finally{l.T=h,r.p=m,r.d.f()}},pn.preconnect=function(f,h){typeof f=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,r.d.C(f,h))},pn.prefetchDNS=function(f){typeof f=="string"&&r.d.D(f)},pn.preinit=function(f,h){if(typeof f=="string"&&h&&typeof h.as=="string"){var m=h.as,p=u(m,h.crossOrigin),_=typeof h.integrity=="string"?h.integrity:void 0,g=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;m==="style"?r.d.S(f,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:p,integrity:_,fetchPriority:g}):m==="script"&&r.d.X(f,{crossOrigin:p,integrity:_,fetchPriority:g,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},pn.preinitModule=function(f,h){if(typeof f=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var m=u(h.as,h.crossOrigin);r.d.M(f,{crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&r.d.M(f)},pn.preload=function(f,h){if(typeof f=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var m=h.as,p=u(m,h.crossOrigin);r.d.L(f,m,{crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},pn.preloadModule=function(f,h){if(typeof f=="string")if(h){var m=u(h.as,h.crossOrigin);r.d.m(f,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else r.d.m(f)},pn.requestFormReset=function(f){r.d.r(f)},pn.unstable_batchedUpdates=function(f,h){return f(h)},pn.useFormState=function(f,h,m){return l.H.useFormState(f,h,m)},pn.useFormStatus=function(){return l.H.useHostTransitionStatus()},pn.version="19.2.3",pn}var Cx;function $S(){if(Cx)return $p.exports;Cx=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),$p.exports=HO(),$p.exports}var Tx;function GO(){if(Tx)return Zo;Tx=1;var t=VO(),e=Kf(),n=$S();function r(i){var o="https://react.dev/errors/"+i;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)o+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function a(i){var o=i,c=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,(o.flags&4098)!==0&&(c=o.return),i=o.return;while(i)}return o.tag===3?c:null}function l(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function u(i){if(i.tag===31){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function f(i){if(a(i)!==i)throw Error(r(188))}function h(i){var o=i.alternate;if(!o){if(o=a(i),o===null)throw Error(r(188));return o!==i?null:i}for(var c=i,d=o;;){var y=c.return;if(y===null)break;var b=y.alternate;if(b===null){if(d=y.return,d!==null){c=d;continue}break}if(y.child===b.child){for(b=y.child;b;){if(b===c)return f(y),i;if(b===d)return f(y),o;b=b.sibling}throw Error(r(188))}if(c.return!==d.return)c=y,d=b;else{for(var w=!1,A=y.child;A;){if(A===c){w=!0,c=y,d=b;break}if(A===d){w=!0,d=y,c=b;break}A=A.sibling}if(!w){for(A=b.child;A;){if(A===c){w=!0,c=b,d=y;break}if(A===d){w=!0,d=b,c=y;break}A=A.sibling}if(!w)throw Error(r(189))}}if(c.alternate!==d)throw Error(r(190))}if(c.tag!==3)throw Error(r(188));return c.stateNode.current===c?i:o}function m(i){var o=i.tag;if(o===5||o===26||o===27||o===6)return i;for(i=i.child;i!==null;){if(o=m(i),o!==null)return o;i=i.sibling}return null}var p=Object.assign,_=Symbol.for("react.element"),g=Symbol.for("react.transitional.element"),v=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),T=Symbol.for("react.consumer"),C=Symbol.for("react.context"),L=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),V=Symbol.for("react.lazy"),H=Symbol.for("react.activity"),z=Symbol.for("react.memo_cache_sentinel"),Q=Symbol.iterator;function j(i){return i===null||typeof i!="object"?null:(i=Q&&i[Q]||i["@@iterator"],typeof i=="function"?i:null)}var se=Symbol.for("react.client.reference");function Z(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===se?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case x:return"Fragment";case S:return"Profiler";case k:return"StrictMode";case D:return"Suspense";case I:return"SuspenseList";case H:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case v:return"Portal";case C:return i.displayName||"Context";case T:return(i._context.displayName||"Context")+".Consumer";case L:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case P:return o=i.displayName||null,o!==null?o:Z(i.type)||"Memo";case V:o=i._payload,i=i._init;try{return Z(i(o))}catch{}}return null}var $=Array.isArray,B=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re={pending:!1,data:null,method:null,action:null},Y=[],O=-1;function N(i){return{current:i}}function F(i){0>O||(i.current=Y[O],Y[O]=null,O--)}function R(i,o){O++,Y[O]=i.current,i.current=o}var oe=N(null),pe=N(null),me=N(null),xe=N(null);function Me(i,o){switch(R(me,o),R(pe,i),R(oe,null),o.nodeType){case 9:case 11:i=(i=o.documentElement)&&(i=i.namespaceURI)?qv(i):0;break;default:if(i=o.tagName,o=o.namespaceURI)o=qv(o),i=Fv(o,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}F(oe),R(oe,i)}function Ie(){F(oe),F(pe),F(me)}function nt(i){i.memoizedState!==null&&R(xe,i);var o=oe.current,c=Fv(o,i.type);o!==c&&(R(pe,i),R(oe,c))}function at(i){pe.current===i&&(F(oe),F(pe)),xe.current===i&&(F(xe),Fo._currentValue=re)}var At,Ae;function Xe(i){if(At===void 0)try{throw Error()}catch(c){var o=c.stack.trim().match(/\n( *(at )?)/);At=o&&o[1]||"",Ae=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+At+i+Ae}var qe=!1;function Rt(i,o){if(!i||qe)return"";qe=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(o){var ue=function(){throw Error()};if(Object.defineProperty(ue.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ue,[])}catch(ie){var te=ie}Reflect.construct(i,[],ue)}else{try{ue.call()}catch(ie){te=ie}i.call(ue.prototype)}}else{try{throw Error()}catch(ie){te=ie}(ue=i())&&typeof ue.catch=="function"&&ue.catch(function(){})}}catch(ie){if(ie&&te&&typeof ie.stack=="string")return[ie.stack,te.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var b=d.DetermineComponentFrameRoot(),w=b[0],A=b[1];if(w&&A){var U=w.split(`
`),W=A.split(`
`);for(y=d=0;d<U.length&&!U[d].includes("DetermineComponentFrameRoot");)d++;for(;y<W.length&&!W[y].includes("DetermineComponentFrameRoot");)y++;if(d===U.length||y===W.length)for(d=U.length-1,y=W.length-1;1<=d&&0<=y&&U[d]!==W[y];)y--;for(;1<=d&&0<=y;d--,y--)if(U[d]!==W[y]){if(d!==1||y!==1)do if(d--,y--,0>y||U[d]!==W[y]){var ae=`
`+U[d].replace(" at new "," at ");return i.displayName&&ae.includes("<anonymous>")&&(ae=ae.replace("<anonymous>",i.displayName)),ae}while(1<=d&&0<=y);break}}}finally{qe=!1,Error.prepareStackTrace=c}return(c=i?i.displayName||i.name:"")?Xe(c):""}function Zt(i,o){switch(i.tag){case 26:case 27:case 5:return Xe(i.type);case 16:return Xe("Lazy");case 13:return i.child!==o&&o!==null?Xe("Suspense Fallback"):Xe("Suspense");case 19:return Xe("SuspenseList");case 0:case 15:return Rt(i.type,!1);case 11:return Rt(i.type.render,!1);case 1:return Rt(i.type,!0);case 31:return Xe("Activity");default:return""}}function Et(i){try{var o="",c=null;do o+=Zt(i,c),c=i,i=i.return;while(i);return o}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}var nn=Object.prototype.hasOwnProperty,xn=t.unstable_scheduleCallback,_e=t.unstable_cancelCallback,Pe=t.unstable_shouldYield,Le=t.unstable_requestPaint,ke=t.unstable_now,Fe=t.unstable_getCurrentPriorityLevel,ne=t.unstable_ImmediatePriority,le=t.unstable_UserBlockingPriority,ge=t.unstable_NormalPriority,ye=t.unstable_LowPriority,Ee=t.unstable_IdlePriority,Ke=t.log,Ot=t.unstable_setDisableYieldValue,Qt=null,xt=null;function Rn(i){if(typeof Ke=="function"&&Ot(i),xt&&typeof xt.setStrictMode=="function")try{xt.setStrictMode(Qt,i)}catch{}}var dt=Math.clz32?Math.clz32:CA,_s=Math.log,Sr=Math.LN2;function CA(i){return i>>>=0,i===0?32:31-(_s(i)/Sr|0)|0}var nc=256,rc=262144,sc=4194304;function ni(i){var o=i&42;if(o!==0)return o;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function ic(i,o,c){var d=i.pendingLanes;if(d===0)return 0;var y=0,b=i.suspendedLanes,w=i.pingedLanes;i=i.warmLanes;var A=d&134217727;return A!==0?(d=A&~b,d!==0?y=ni(d):(w&=A,w!==0?y=ni(w):c||(c=A&~i,c!==0&&(y=ni(c))))):(A=d&~b,A!==0?y=ni(A):w!==0?y=ni(w):c||(c=d&~i,c!==0&&(y=ni(c)))),y===0?0:o!==0&&o!==y&&(o&b)===0&&(b=y&-y,c=o&-o,b>=c||b===32&&(c&4194048)!==0)?o:y}function to(i,o){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&o)===0}function TA(i,o){switch(i){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function S0(){var i=sc;return sc<<=1,(sc&62914560)===0&&(sc=4194304),i}function kh(i){for(var o=[],c=0;31>c;c++)o.push(i);return o}function no(i,o){i.pendingLanes|=o,o!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function AA(i,o,c,d,y,b){var w=i.pendingLanes;i.pendingLanes=c,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=c,i.entangledLanes&=c,i.errorRecoveryDisabledLanes&=c,i.shellSuspendCounter=0;var A=i.entanglements,U=i.expirationTimes,W=i.hiddenUpdates;for(c=w&~c;0<c;){var ae=31-dt(c),ue=1<<ae;A[ae]=0,U[ae]=-1;var te=W[ae];if(te!==null)for(W[ae]=null,ae=0;ae<te.length;ae++){var ie=te[ae];ie!==null&&(ie.lane&=-536870913)}c&=~ue}d!==0&&k0(i,d,0),b!==0&&y===0&&i.tag!==0&&(i.suspendedLanes|=b&~(w&~o))}function k0(i,o,c){i.pendingLanes|=o,i.suspendedLanes&=~o;var d=31-dt(o);i.entangledLanes|=o,i.entanglements[d]=i.entanglements[d]|1073741824|c&261930}function E0(i,o){var c=i.entangledLanes|=o;for(i=i.entanglements;c;){var d=31-dt(c),y=1<<d;y&o|i[d]&o&&(i[d]|=o),c&=~y}}function C0(i,o){var c=o&-o;return c=(c&42)!==0?1:Eh(c),(c&(i.suspendedLanes|o))!==0?0:c}function Eh(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Ch(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function T0(){var i=G.p;return i!==0?i:(i=window.event,i===void 0?32:hx(i.type))}function A0(i,o){var c=G.p;try{return G.p=i,o()}finally{G.p=c}}var bs=Math.random().toString(36).slice(2),rn="__reactFiber$"+bs,On="__reactProps$"+bs,Pi="__reactContainer$"+bs,Th="__reactEvents$"+bs,RA="__reactListeners$"+bs,OA="__reactHandles$"+bs,R0="__reactResources$"+bs,ro="__reactMarker$"+bs;function Ah(i){delete i[rn],delete i[On],delete i[Th],delete i[RA],delete i[OA]}function Bi(i){var o=i[rn];if(o)return o;for(var c=i.parentNode;c;){if(o=c[Pi]||c[rn]){if(c=o.alternate,o.child!==null||c!==null&&c.child!==null)for(i=Jv(i);i!==null;){if(c=i[rn])return c;i=Jv(i)}return o}i=c,c=i.parentNode}return null}function Ui(i){if(i=i[rn]||i[Pi]){var o=i.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return i}return null}function so(i){var o=i.tag;if(o===5||o===26||o===27||o===6)return i.stateNode;throw Error(r(33))}function $i(i){var o=i[R0];return o||(o=i[R0]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function Jt(i){i[ro]=!0}var O0=new Set,I0={};function ri(i,o){qi(i,o),qi(i+"Capture",o)}function qi(i,o){for(I0[i]=o,i=0;i<o.length;i++)O0.add(o[i])}var IA=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),N0={},M0={};function NA(i){return nn.call(M0,i)?!0:nn.call(N0,i)?!1:IA.test(i)?M0[i]=!0:(N0[i]=!0,!1)}function ac(i,o,c){if(NA(o))if(c===null)i.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":i.removeAttribute(o);return;case"boolean":var d=o.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){i.removeAttribute(o);return}}i.setAttribute(o,""+c)}}function oc(i,o,c){if(c===null)i.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(o);return}i.setAttribute(o,""+c)}}function Zr(i,o,c,d){if(d===null)i.removeAttribute(c);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(c);return}i.setAttributeNS(o,c,""+d)}}function sr(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function D0(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function MA(i,o,c){var d=Object.getOwnPropertyDescriptor(i.constructor.prototype,o);if(!i.hasOwnProperty(o)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var y=d.get,b=d.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return y.call(this)},set:function(w){c=""+w,b.call(this,w)}}),Object.defineProperty(i,o,{enumerable:d.enumerable}),{getValue:function(){return c},setValue:function(w){c=""+w},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function Rh(i){if(!i._valueTracker){var o=D0(i)?"checked":"value";i._valueTracker=MA(i,o,""+i[o])}}function L0(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var c=o.getValue(),d="";return i&&(d=D0(i)?i.checked?"true":"false":i.value),i=d,i!==c?(o.setValue(i),!0):!1}function lc(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var DA=/[\n"\\]/g;function ir(i){return i.replace(DA,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function Oh(i,o,c,d,y,b,w,A){i.name="",w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?i.type=w:i.removeAttribute("type"),o!=null?w==="number"?(o===0&&i.value===""||i.value!=o)&&(i.value=""+sr(o)):i.value!==""+sr(o)&&(i.value=""+sr(o)):w!=="submit"&&w!=="reset"||i.removeAttribute("value"),o!=null?Ih(i,w,sr(o)):c!=null?Ih(i,w,sr(c)):d!=null&&i.removeAttribute("value"),y==null&&b!=null&&(i.defaultChecked=!!b),y!=null&&(i.checked=y&&typeof y!="function"&&typeof y!="symbol"),A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?i.name=""+sr(A):i.removeAttribute("name")}function z0(i,o,c,d,y,b,w,A){if(b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(i.type=b),o!=null||c!=null){if(!(b!=="submit"&&b!=="reset"||o!=null)){Rh(i);return}c=c!=null?""+sr(c):"",o=o!=null?""+sr(o):c,A||o===i.value||(i.value=o),i.defaultValue=o}d=d??y,d=typeof d!="function"&&typeof d!="symbol"&&!!d,i.checked=A?i.checked:!!d,i.defaultChecked=!!d,w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(i.name=w),Rh(i)}function Ih(i,o,c){o==="number"&&lc(i.ownerDocument)===i||i.defaultValue===""+c||(i.defaultValue=""+c)}function Fi(i,o,c,d){if(i=i.options,o){o={};for(var y=0;y<c.length;y++)o["$"+c[y]]=!0;for(c=0;c<i.length;c++)y=o.hasOwnProperty("$"+i[c].value),i[c].selected!==y&&(i[c].selected=y),y&&d&&(i[c].defaultSelected=!0)}else{for(c=""+sr(c),o=null,y=0;y<i.length;y++){if(i[y].value===c){i[y].selected=!0,d&&(i[y].defaultSelected=!0);return}o!==null||i[y].disabled||(o=i[y])}o!==null&&(o.selected=!0)}}function j0(i,o,c){if(o!=null&&(o=""+sr(o),o!==i.value&&(i.value=o),c==null)){i.defaultValue!==o&&(i.defaultValue=o);return}i.defaultValue=c!=null?""+sr(c):""}function P0(i,o,c,d){if(o==null){if(d!=null){if(c!=null)throw Error(r(92));if($(d)){if(1<d.length)throw Error(r(93));d=d[0]}c=d}c==null&&(c=""),o=c}c=sr(o),i.defaultValue=c,d=i.textContent,d===c&&d!==""&&d!==null&&(i.value=d),Rh(i)}function Vi(i,o){if(o){var c=i.firstChild;if(c&&c===i.lastChild&&c.nodeType===3){c.nodeValue=o;return}}i.textContent=o}var LA=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function B0(i,o,c){var d=o.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?d?i.setProperty(o,""):o==="float"?i.cssFloat="":i[o]="":d?i.setProperty(o,c):typeof c!="number"||c===0||LA.has(o)?o==="float"?i.cssFloat=c:i[o]=(""+c).trim():i[o]=c+"px"}function U0(i,o,c){if(o!=null&&typeof o!="object")throw Error(r(62));if(i=i.style,c!=null){for(var d in c)!c.hasOwnProperty(d)||o!=null&&o.hasOwnProperty(d)||(d.indexOf("--")===0?i.setProperty(d,""):d==="float"?i.cssFloat="":i[d]="");for(var y in o)d=o[y],o.hasOwnProperty(y)&&c[y]!==d&&B0(i,y,d)}else for(var b in o)o.hasOwnProperty(b)&&B0(i,b,o[b])}function Nh(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var zA=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),jA=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function cc(i){return jA.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function Qr(){}var Mh=null;function Dh(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Hi=null,Gi=null;function $0(i){var o=Ui(i);if(o&&(i=o.stateNode)){var c=i[On]||null;e:switch(i=o.stateNode,o.type){case"input":if(Oh(i,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),o=c.name,c.type==="radio"&&o!=null){for(c=i;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+ir(""+o)+'"][type="radio"]'),o=0;o<c.length;o++){var d=c[o];if(d!==i&&d.form===i.form){var y=d[On]||null;if(!y)throw Error(r(90));Oh(d,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(o=0;o<c.length;o++)d=c[o],d.form===i.form&&L0(d)}break e;case"textarea":j0(i,c.value,c.defaultValue);break e;case"select":o=c.value,o!=null&&Fi(i,!!c.multiple,o,!1)}}}var Lh=!1;function q0(i,o,c){if(Lh)return i(o,c);Lh=!0;try{var d=i(o);return d}finally{if(Lh=!1,(Hi!==null||Gi!==null)&&(Jc(),Hi&&(o=Hi,i=Gi,Gi=Hi=null,$0(o),i)))for(o=0;o<i.length;o++)$0(i[o])}}function io(i,o){var c=i.stateNode;if(c===null)return null;var d=c[On]||null;if(d===null)return null;c=d[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(i=i.type,d=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!d;break e;default:i=!1}if(i)return null;if(c&&typeof c!="function")throw Error(r(231,o,typeof c));return c}var Jr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),zh=!1;if(Jr)try{var ao={};Object.defineProperty(ao,"passive",{get:function(){zh=!0}}),window.addEventListener("test",ao,ao),window.removeEventListener("test",ao,ao)}catch{zh=!1}var vs=null,jh=null,uc=null;function F0(){if(uc)return uc;var i,o=jh,c=o.length,d,y="value"in vs?vs.value:vs.textContent,b=y.length;for(i=0;i<c&&o[i]===y[i];i++);var w=c-i;for(d=1;d<=w&&o[c-d]===y[b-d];d++);return uc=y.slice(i,1<d?1-d:void 0)}function fc(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function hc(){return!0}function V0(){return!1}function In(i){function o(c,d,y,b,w){this._reactName=c,this._targetInst=y,this.type=d,this.nativeEvent=b,this.target=w,this.currentTarget=null;for(var A in i)i.hasOwnProperty(A)&&(c=i[A],this[A]=c?c(b):b[A]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?hc:V0,this.isPropagationStopped=V0,this}return p(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=hc)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=hc)},persist:function(){},isPersistent:hc}),o}var si={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dc=In(si),oo=p({},si,{view:0,detail:0}),PA=In(oo),Ph,Bh,lo,pc=p({},oo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$h,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==lo&&(lo&&i.type==="mousemove"?(Ph=i.screenX-lo.screenX,Bh=i.screenY-lo.screenY):Bh=Ph=0,lo=i),Ph)},movementY:function(i){return"movementY"in i?i.movementY:Bh}}),H0=In(pc),BA=p({},pc,{dataTransfer:0}),UA=In(BA),$A=p({},oo,{relatedTarget:0}),Uh=In($A),qA=p({},si,{animationName:0,elapsedTime:0,pseudoElement:0}),FA=In(qA),VA=p({},si,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),HA=In(VA),GA=p({},si,{data:0}),G0=In(GA),KA={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ZA={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},QA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function JA(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=QA[i])?!!o[i]:!1}function $h(){return JA}var YA=p({},oo,{key:function(i){if(i.key){var o=KA[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=fc(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?ZA[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$h,charCode:function(i){return i.type==="keypress"?fc(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?fc(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),XA=In(YA),WA=p({},pc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),K0=In(WA),eR=p({},oo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$h}),tR=In(eR),nR=p({},si,{propertyName:0,elapsedTime:0,pseudoElement:0}),rR=In(nR),sR=p({},pc,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),iR=In(sR),aR=p({},si,{newState:0,oldState:0}),oR=In(aR),lR=[9,13,27,32],qh=Jr&&"CompositionEvent"in window,co=null;Jr&&"documentMode"in document&&(co=document.documentMode);var cR=Jr&&"TextEvent"in window&&!co,Z0=Jr&&(!qh||co&&8<co&&11>=co),Q0=" ",J0=!1;function Y0(i,o){switch(i){case"keyup":return lR.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function X0(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Ki=!1;function uR(i,o){switch(i){case"compositionend":return X0(o);case"keypress":return o.which!==32?null:(J0=!0,Q0);case"textInput":return i=o.data,i===Q0&&J0?null:i;default:return null}}function fR(i,o){if(Ki)return i==="compositionend"||!qh&&Y0(i,o)?(i=F0(),uc=jh=vs=null,Ki=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return Z0&&o.locale!=="ko"?null:o.data;default:return null}}var hR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function W0(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!hR[i.type]:o==="textarea"}function e_(i,o,c,d){Hi?Gi?Gi.push(d):Gi=[d]:Hi=d,o=ru(o,"onChange"),0<o.length&&(c=new dc("onChange","change",null,c,d),i.push({event:c,listeners:o}))}var uo=null,fo=null;function dR(i){zv(i,0)}function mc(i){var o=so(i);if(L0(o))return i}function t_(i,o){if(i==="change")return o}var n_=!1;if(Jr){var Fh;if(Jr){var Vh="oninput"in document;if(!Vh){var r_=document.createElement("div");r_.setAttribute("oninput","return;"),Vh=typeof r_.oninput=="function"}Fh=Vh}else Fh=!1;n_=Fh&&(!document.documentMode||9<document.documentMode)}function s_(){uo&&(uo.detachEvent("onpropertychange",i_),fo=uo=null)}function i_(i){if(i.propertyName==="value"&&mc(fo)){var o=[];e_(o,fo,i,Dh(i)),q0(dR,o)}}function pR(i,o,c){i==="focusin"?(s_(),uo=o,fo=c,uo.attachEvent("onpropertychange",i_)):i==="focusout"&&s_()}function mR(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return mc(fo)}function gR(i,o){if(i==="click")return mc(o)}function yR(i,o){if(i==="input"||i==="change")return mc(o)}function _R(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var Fn=typeof Object.is=="function"?Object.is:_R;function ho(i,o){if(Fn(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var c=Object.keys(i),d=Object.keys(o);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++){var y=c[d];if(!nn.call(o,y)||!Fn(i[y],o[y]))return!1}return!0}function a_(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function o_(i,o){var c=a_(i);i=0;for(var d;c;){if(c.nodeType===3){if(d=i+c.textContent.length,i<=o&&d>=o)return{node:c,offset:o-i};i=d}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=a_(c)}}function l_(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?l_(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function c_(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var o=lc(i.document);o instanceof i.HTMLIFrameElement;){try{var c=typeof o.contentWindow.location.href=="string"}catch{c=!1}if(c)i=o.contentWindow;else break;o=lc(i.document)}return o}function Hh(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}var bR=Jr&&"documentMode"in document&&11>=document.documentMode,Zi=null,Gh=null,po=null,Kh=!1;function u_(i,o,c){var d=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;Kh||Zi==null||Zi!==lc(d)||(d=Zi,"selectionStart"in d&&Hh(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),po&&ho(po,d)||(po=d,d=ru(Gh,"onSelect"),0<d.length&&(o=new dc("onSelect","select",null,o,c),i.push({event:o,listeners:d}),o.target=Zi)))}function ii(i,o){var c={};return c[i.toLowerCase()]=o.toLowerCase(),c["Webkit"+i]="webkit"+o,c["Moz"+i]="moz"+o,c}var Qi={animationend:ii("Animation","AnimationEnd"),animationiteration:ii("Animation","AnimationIteration"),animationstart:ii("Animation","AnimationStart"),transitionrun:ii("Transition","TransitionRun"),transitionstart:ii("Transition","TransitionStart"),transitioncancel:ii("Transition","TransitionCancel"),transitionend:ii("Transition","TransitionEnd")},Zh={},f_={};Jr&&(f_=document.createElement("div").style,"AnimationEvent"in window||(delete Qi.animationend.animation,delete Qi.animationiteration.animation,delete Qi.animationstart.animation),"TransitionEvent"in window||delete Qi.transitionend.transition);function ai(i){if(Zh[i])return Zh[i];if(!Qi[i])return i;var o=Qi[i],c;for(c in o)if(o.hasOwnProperty(c)&&c in f_)return Zh[i]=o[c];return i}var h_=ai("animationend"),d_=ai("animationiteration"),p_=ai("animationstart"),vR=ai("transitionrun"),xR=ai("transitionstart"),wR=ai("transitioncancel"),m_=ai("transitionend"),g_=new Map,Qh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Qh.push("scrollEnd");function kr(i,o){g_.set(i,o),ri(o,[i])}var gc=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},ar=[],Ji=0,Jh=0;function yc(){for(var i=Ji,o=Jh=Ji=0;o<i;){var c=ar[o];ar[o++]=null;var d=ar[o];ar[o++]=null;var y=ar[o];ar[o++]=null;var b=ar[o];if(ar[o++]=null,d!==null&&y!==null){var w=d.pending;w===null?y.next=y:(y.next=w.next,w.next=y),d.pending=y}b!==0&&y_(c,y,b)}}function _c(i,o,c,d){ar[Ji++]=i,ar[Ji++]=o,ar[Ji++]=c,ar[Ji++]=d,Jh|=d,i.lanes|=d,i=i.alternate,i!==null&&(i.lanes|=d)}function Yh(i,o,c,d){return _c(i,o,c,d),bc(i)}function oi(i,o){return _c(i,null,null,o),bc(i)}function y_(i,o,c){i.lanes|=c;var d=i.alternate;d!==null&&(d.lanes|=c);for(var y=!1,b=i.return;b!==null;)b.childLanes|=c,d=b.alternate,d!==null&&(d.childLanes|=c),b.tag===22&&(i=b.stateNode,i===null||i._visibility&1||(y=!0)),i=b,b=b.return;return i.tag===3?(b=i.stateNode,y&&o!==null&&(y=31-dt(c),i=b.hiddenUpdates,d=i[y],d===null?i[y]=[o]:d.push(o),o.lane=c|536870912),b):null}function bc(i){if(50<zo)throw zo=0,ap=null,Error(r(185));for(var o=i.return;o!==null;)i=o,o=i.return;return i.tag===3?i.stateNode:null}var Yi={};function SR(i,o,c,d){this.tag=i,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vn(i,o,c,d){return new SR(i,o,c,d)}function Xh(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Yr(i,o){var c=i.alternate;return c===null?(c=Vn(i.tag,o,i.key,i.mode),c.elementType=i.elementType,c.type=i.type,c.stateNode=i.stateNode,c.alternate=i,i.alternate=c):(c.pendingProps=o,c.type=i.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=i.flags&65011712,c.childLanes=i.childLanes,c.lanes=i.lanes,c.child=i.child,c.memoizedProps=i.memoizedProps,c.memoizedState=i.memoizedState,c.updateQueue=i.updateQueue,o=i.dependencies,c.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},c.sibling=i.sibling,c.index=i.index,c.ref=i.ref,c.refCleanup=i.refCleanup,c}function __(i,o){i.flags&=65011714;var c=i.alternate;return c===null?(i.childLanes=0,i.lanes=o,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=c.childLanes,i.lanes=c.lanes,i.child=c.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=c.memoizedProps,i.memoizedState=c.memoizedState,i.updateQueue=c.updateQueue,i.type=c.type,o=c.dependencies,i.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),i}function vc(i,o,c,d,y,b){var w=0;if(d=i,typeof i=="function")Xh(i)&&(w=1);else if(typeof i=="string")w=AO(i,c,oe.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case H:return i=Vn(31,c,o,y),i.elementType=H,i.lanes=b,i;case x:return li(c.children,y,b,o);case k:w=8,y|=24;break;case S:return i=Vn(12,c,o,y|2),i.elementType=S,i.lanes=b,i;case D:return i=Vn(13,c,o,y),i.elementType=D,i.lanes=b,i;case I:return i=Vn(19,c,o,y),i.elementType=I,i.lanes=b,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case C:w=10;break e;case T:w=9;break e;case L:w=11;break e;case P:w=14;break e;case V:w=16,d=null;break e}w=29,c=Error(r(130,i===null?"null":typeof i,"")),d=null}return o=Vn(w,c,o,y),o.elementType=i,o.type=d,o.lanes=b,o}function li(i,o,c,d){return i=Vn(7,i,d,o),i.lanes=c,i}function Wh(i,o,c){return i=Vn(6,i,null,o),i.lanes=c,i}function b_(i){var o=Vn(18,null,null,0);return o.stateNode=i,o}function ed(i,o,c){return o=Vn(4,i.children!==null?i.children:[],i.key,o),o.lanes=c,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}var v_=new WeakMap;function or(i,o){if(typeof i=="object"&&i!==null){var c=v_.get(i);return c!==void 0?c:(o={value:i,source:o,stack:Et(o)},v_.set(i,o),o)}return{value:i,source:o,stack:Et(o)}}var Xi=[],Wi=0,xc=null,mo=0,lr=[],cr=0,xs=null,Ir=1,Nr="";function Xr(i,o){Xi[Wi++]=mo,Xi[Wi++]=xc,xc=i,mo=o}function x_(i,o,c){lr[cr++]=Ir,lr[cr++]=Nr,lr[cr++]=xs,xs=i;var d=Ir;i=Nr;var y=32-dt(d)-1;d&=~(1<<y),c+=1;var b=32-dt(o)+y;if(30<b){var w=y-y%5;b=(d&(1<<w)-1).toString(32),d>>=w,y-=w,Ir=1<<32-dt(o)+y|c<<y|d,Nr=b+i}else Ir=1<<b|c<<y|d,Nr=i}function td(i){i.return!==null&&(Xr(i,1),x_(i,1,0))}function nd(i){for(;i===xc;)xc=Xi[--Wi],Xi[Wi]=null,mo=Xi[--Wi],Xi[Wi]=null;for(;i===xs;)xs=lr[--cr],lr[cr]=null,Nr=lr[--cr],lr[cr]=null,Ir=lr[--cr],lr[cr]=null}function w_(i,o){lr[cr++]=Ir,lr[cr++]=Nr,lr[cr++]=xs,Ir=o.id,Nr=o.overflow,xs=i}var sn=null,yt=null,Ye=!1,ws=null,ur=!1,rd=Error(r(519));function Ss(i){var o=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw go(or(o,i)),rd}function S_(i){var o=i.stateNode,c=i.type,d=i.memoizedProps;switch(o[rn]=i,o[On]=d,c){case"dialog":He("cancel",o),He("close",o);break;case"iframe":case"object":case"embed":He("load",o);break;case"video":case"audio":for(c=0;c<Po.length;c++)He(Po[c],o);break;case"source":He("error",o);break;case"img":case"image":case"link":He("error",o),He("load",o);break;case"details":He("toggle",o);break;case"input":He("invalid",o),z0(o,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0);break;case"select":He("invalid",o);break;case"textarea":He("invalid",o),P0(o,d.value,d.defaultValue,d.children)}c=d.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||o.textContent===""+c||d.suppressHydrationWarning===!0||Uv(o.textContent,c)?(d.popover!=null&&(He("beforetoggle",o),He("toggle",o)),d.onScroll!=null&&He("scroll",o),d.onScrollEnd!=null&&He("scrollend",o),d.onClick!=null&&(o.onclick=Qr),o=!0):o=!1,o||Ss(i,!0)}function k_(i){for(sn=i.return;sn;)switch(sn.tag){case 5:case 31:case 13:ur=!1;return;case 27:case 3:ur=!0;return;default:sn=sn.return}}function ea(i){if(i!==sn)return!1;if(!Ye)return k_(i),Ye=!0,!1;var o=i.tag,c;if((c=o!==3&&o!==27)&&((c=o===5)&&(c=i.type,c=!(c!=="form"&&c!=="button")||xp(i.type,i.memoizedProps)),c=!c),c&&yt&&Ss(i),k_(i),o===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));yt=Qv(i)}else if(o===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));yt=Qv(i)}else o===27?(o=yt,js(i.type)?(i=Cp,Cp=null,yt=i):yt=o):yt=sn?hr(i.stateNode.nextSibling):null;return!0}function ci(){yt=sn=null,Ye=!1}function sd(){var i=ws;return i!==null&&(Ln===null?Ln=i:Ln.push.apply(Ln,i),ws=null),i}function go(i){ws===null?ws=[i]:ws.push(i)}var id=N(null),ui=null,Wr=null;function ks(i,o,c){R(id,o._currentValue),o._currentValue=c}function es(i){i._currentValue=id.current,F(id)}function ad(i,o,c){for(;i!==null;){var d=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,d!==null&&(d.childLanes|=o)):d!==null&&(d.childLanes&o)!==o&&(d.childLanes|=o),i===c)break;i=i.return}}function od(i,o,c,d){var y=i.child;for(y!==null&&(y.return=i);y!==null;){var b=y.dependencies;if(b!==null){var w=y.child;b=b.firstContext;e:for(;b!==null;){var A=b;b=y;for(var U=0;U<o.length;U++)if(A.context===o[U]){b.lanes|=c,A=b.alternate,A!==null&&(A.lanes|=c),ad(b.return,c,i),d||(w=null);break e}b=A.next}}else if(y.tag===18){if(w=y.return,w===null)throw Error(r(341));w.lanes|=c,b=w.alternate,b!==null&&(b.lanes|=c),ad(w,c,i),w=null}else w=y.child;if(w!==null)w.return=y;else for(w=y;w!==null;){if(w===i){w=null;break}if(y=w.sibling,y!==null){y.return=w.return,w=y;break}w=w.return}y=w}}function ta(i,o,c,d){i=null;for(var y=o,b=!1;y!==null;){if(!b){if((y.flags&524288)!==0)b=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var w=y.alternate;if(w===null)throw Error(r(387));if(w=w.memoizedProps,w!==null){var A=y.type;Fn(y.pendingProps.value,w.value)||(i!==null?i.push(A):i=[A])}}else if(y===xe.current){if(w=y.alternate,w===null)throw Error(r(387));w.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(i!==null?i.push(Fo):i=[Fo])}y=y.return}i!==null&&od(o,i,c,d),o.flags|=262144}function wc(i){for(i=i.firstContext;i!==null;){if(!Fn(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function fi(i){ui=i,Wr=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function an(i){return E_(ui,i)}function Sc(i,o){return ui===null&&fi(i),E_(i,o)}function E_(i,o){var c=o._currentValue;if(o={context:o,memoizedValue:c,next:null},Wr===null){if(i===null)throw Error(r(308));Wr=o,i.dependencies={lanes:0,firstContext:o},i.flags|=524288}else Wr=Wr.next=o;return c}var kR=typeof AbortController<"u"?AbortController:function(){var i=[],o=this.signal={aborted:!1,addEventListener:function(c,d){i.push(d)}};this.abort=function(){o.aborted=!0,i.forEach(function(c){return c()})}},ER=t.unstable_scheduleCallback,CR=t.unstable_NormalPriority,It={$$typeof:C,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ld(){return{controller:new kR,data:new Map,refCount:0}}function yo(i){i.refCount--,i.refCount===0&&ER(CR,function(){i.controller.abort()})}var _o=null,cd=0,na=0,ra=null;function TR(i,o){if(_o===null){var c=_o=[];cd=0,na=hp(),ra={status:"pending",value:void 0,then:function(d){c.push(d)}}}return cd++,o.then(C_,C_),o}function C_(){if(--cd===0&&_o!==null){ra!==null&&(ra.status="fulfilled");var i=_o;_o=null,na=0,ra=null;for(var o=0;o<i.length;o++)(0,i[o])()}}function AR(i,o){var c=[],d={status:"pending",value:null,reason:null,then:function(y){c.push(y)}};return i.then(function(){d.status="fulfilled",d.value=o;for(var y=0;y<c.length;y++)(0,c[y])(o)},function(y){for(d.status="rejected",d.reason=y,y=0;y<c.length;y++)(0,c[y])(void 0)}),d}var T_=B.S;B.S=function(i,o){uv=ke(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&TR(i,o),T_!==null&&T_(i,o)};var hi=N(null);function ud(){var i=hi.current;return i!==null?i:pt.pooledCache}function kc(i,o){o===null?R(hi,hi.current):R(hi,o.pool)}function A_(){var i=ud();return i===null?null:{parent:It._currentValue,pool:i}}var sa=Error(r(460)),fd=Error(r(474)),Ec=Error(r(542)),Cc={then:function(){}};function R_(i){return i=i.status,i==="fulfilled"||i==="rejected"}function O_(i,o,c){switch(c=i[c],c===void 0?i.push(o):c!==o&&(o.then(Qr,Qr),o=c),o.status){case"fulfilled":return o.value;case"rejected":throw i=o.reason,N_(i),i;default:if(typeof o.status=="string")o.then(Qr,Qr);else{if(i=pt,i!==null&&100<i.shellSuspendCounter)throw Error(r(482));i=o,i.status="pending",i.then(function(d){if(o.status==="pending"){var y=o;y.status="fulfilled",y.value=d}},function(d){if(o.status==="pending"){var y=o;y.status="rejected",y.reason=d}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw i=o.reason,N_(i),i}throw pi=o,sa}}function di(i){try{var o=i._init;return o(i._payload)}catch(c){throw c!==null&&typeof c=="object"&&typeof c.then=="function"?(pi=c,sa):c}}var pi=null;function I_(){if(pi===null)throw Error(r(459));var i=pi;return pi=null,i}function N_(i){if(i===sa||i===Ec)throw Error(r(483))}var ia=null,bo=0;function Tc(i){var o=bo;return bo+=1,ia===null&&(ia=[]),O_(ia,i,o)}function vo(i,o){o=o.props.ref,i.ref=o!==void 0?o:null}function Ac(i,o){throw o.$$typeof===_?Error(r(525)):(i=Object.prototype.toString.call(o),Error(r(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i)))}function M_(i){function o(K,q){if(i){var X=K.deletions;X===null?(K.deletions=[q],K.flags|=16):X.push(q)}}function c(K,q){if(!i)return null;for(;q!==null;)o(K,q),q=q.sibling;return null}function d(K){for(var q=new Map;K!==null;)K.key!==null?q.set(K.key,K):q.set(K.index,K),K=K.sibling;return q}function y(K,q){return K=Yr(K,q),K.index=0,K.sibling=null,K}function b(K,q,X){return K.index=X,i?(X=K.alternate,X!==null?(X=X.index,X<q?(K.flags|=67108866,q):X):(K.flags|=67108866,q)):(K.flags|=1048576,q)}function w(K){return i&&K.alternate===null&&(K.flags|=67108866),K}function A(K,q,X,ce){return q===null||q.tag!==6?(q=Wh(X,K.mode,ce),q.return=K,q):(q=y(q,X),q.return=K,q)}function U(K,q,X,ce){var Ce=X.type;return Ce===x?ae(K,q,X.props.children,ce,X.key):q!==null&&(q.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===V&&di(Ce)===q.type)?(q=y(q,X.props),vo(q,X),q.return=K,q):(q=vc(X.type,X.key,X.props,null,K.mode,ce),vo(q,X),q.return=K,q)}function W(K,q,X,ce){return q===null||q.tag!==4||q.stateNode.containerInfo!==X.containerInfo||q.stateNode.implementation!==X.implementation?(q=ed(X,K.mode,ce),q.return=K,q):(q=y(q,X.children||[]),q.return=K,q)}function ae(K,q,X,ce,Ce){return q===null||q.tag!==7?(q=li(X,K.mode,ce,Ce),q.return=K,q):(q=y(q,X),q.return=K,q)}function ue(K,q,X){if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return q=Wh(""+q,K.mode,X),q.return=K,q;if(typeof q=="object"&&q!==null){switch(q.$$typeof){case g:return X=vc(q.type,q.key,q.props,null,K.mode,X),vo(X,q),X.return=K,X;case v:return q=ed(q,K.mode,X),q.return=K,q;case V:return q=di(q),ue(K,q,X)}if($(q)||j(q))return q=li(q,K.mode,X,null),q.return=K,q;if(typeof q.then=="function")return ue(K,Tc(q),X);if(q.$$typeof===C)return ue(K,Sc(K,q),X);Ac(K,q)}return null}function te(K,q,X,ce){var Ce=q!==null?q.key:null;if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return Ce!==null?null:A(K,q,""+X,ce);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case g:return X.key===Ce?U(K,q,X,ce):null;case v:return X.key===Ce?W(K,q,X,ce):null;case V:return X=di(X),te(K,q,X,ce)}if($(X)||j(X))return Ce!==null?null:ae(K,q,X,ce,null);if(typeof X.then=="function")return te(K,q,Tc(X),ce);if(X.$$typeof===C)return te(K,q,Sc(K,X),ce);Ac(K,X)}return null}function ie(K,q,X,ce,Ce){if(typeof ce=="string"&&ce!==""||typeof ce=="number"||typeof ce=="bigint")return K=K.get(X)||null,A(q,K,""+ce,Ce);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case g:return K=K.get(ce.key===null?X:ce.key)||null,U(q,K,ce,Ce);case v:return K=K.get(ce.key===null?X:ce.key)||null,W(q,K,ce,Ce);case V:return ce=di(ce),ie(K,q,X,ce,Ce)}if($(ce)||j(ce))return K=K.get(X)||null,ae(q,K,ce,Ce,null);if(typeof ce.then=="function")return ie(K,q,X,Tc(ce),Ce);if(ce.$$typeof===C)return ie(K,q,X,Sc(q,ce),Ce);Ac(q,ce)}return null}function be(K,q,X,ce){for(var Ce=null,et=null,we=q,Be=q=0,Qe=null;we!==null&&Be<X.length;Be++){we.index>Be?(Qe=we,we=null):Qe=we.sibling;var tt=te(K,we,X[Be],ce);if(tt===null){we===null&&(we=Qe);break}i&&we&&tt.alternate===null&&o(K,we),q=b(tt,q,Be),et===null?Ce=tt:et.sibling=tt,et=tt,we=Qe}if(Be===X.length)return c(K,we),Ye&&Xr(K,Be),Ce;if(we===null){for(;Be<X.length;Be++)we=ue(K,X[Be],ce),we!==null&&(q=b(we,q,Be),et===null?Ce=we:et.sibling=we,et=we);return Ye&&Xr(K,Be),Ce}for(we=d(we);Be<X.length;Be++)Qe=ie(we,K,Be,X[Be],ce),Qe!==null&&(i&&Qe.alternate!==null&&we.delete(Qe.key===null?Be:Qe.key),q=b(Qe,q,Be),et===null?Ce=Qe:et.sibling=Qe,et=Qe);return i&&we.forEach(function(qs){return o(K,qs)}),Ye&&Xr(K,Be),Ce}function Oe(K,q,X,ce){if(X==null)throw Error(r(151));for(var Ce=null,et=null,we=q,Be=q=0,Qe=null,tt=X.next();we!==null&&!tt.done;Be++,tt=X.next()){we.index>Be?(Qe=we,we=null):Qe=we.sibling;var qs=te(K,we,tt.value,ce);if(qs===null){we===null&&(we=Qe);break}i&&we&&qs.alternate===null&&o(K,we),q=b(qs,q,Be),et===null?Ce=qs:et.sibling=qs,et=qs,we=Qe}if(tt.done)return c(K,we),Ye&&Xr(K,Be),Ce;if(we===null){for(;!tt.done;Be++,tt=X.next())tt=ue(K,tt.value,ce),tt!==null&&(q=b(tt,q,Be),et===null?Ce=tt:et.sibling=tt,et=tt);return Ye&&Xr(K,Be),Ce}for(we=d(we);!tt.done;Be++,tt=X.next())tt=ie(we,K,Be,tt.value,ce),tt!==null&&(i&&tt.alternate!==null&&we.delete(tt.key===null?Be:tt.key),q=b(tt,q,Be),et===null?Ce=tt:et.sibling=tt,et=tt);return i&&we.forEach(function(BO){return o(K,BO)}),Ye&&Xr(K,Be),Ce}function ht(K,q,X,ce){if(typeof X=="object"&&X!==null&&X.type===x&&X.key===null&&(X=X.props.children),typeof X=="object"&&X!==null){switch(X.$$typeof){case g:e:{for(var Ce=X.key;q!==null;){if(q.key===Ce){if(Ce=X.type,Ce===x){if(q.tag===7){c(K,q.sibling),ce=y(q,X.props.children),ce.return=K,K=ce;break e}}else if(q.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===V&&di(Ce)===q.type){c(K,q.sibling),ce=y(q,X.props),vo(ce,X),ce.return=K,K=ce;break e}c(K,q);break}else o(K,q);q=q.sibling}X.type===x?(ce=li(X.props.children,K.mode,ce,X.key),ce.return=K,K=ce):(ce=vc(X.type,X.key,X.props,null,K.mode,ce),vo(ce,X),ce.return=K,K=ce)}return w(K);case v:e:{for(Ce=X.key;q!==null;){if(q.key===Ce)if(q.tag===4&&q.stateNode.containerInfo===X.containerInfo&&q.stateNode.implementation===X.implementation){c(K,q.sibling),ce=y(q,X.children||[]),ce.return=K,K=ce;break e}else{c(K,q);break}else o(K,q);q=q.sibling}ce=ed(X,K.mode,ce),ce.return=K,K=ce}return w(K);case V:return X=di(X),ht(K,q,X,ce)}if($(X))return be(K,q,X,ce);if(j(X)){if(Ce=j(X),typeof Ce!="function")throw Error(r(150));return X=Ce.call(X),Oe(K,q,X,ce)}if(typeof X.then=="function")return ht(K,q,Tc(X),ce);if(X.$$typeof===C)return ht(K,q,Sc(K,X),ce);Ac(K,X)}return typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint"?(X=""+X,q!==null&&q.tag===6?(c(K,q.sibling),ce=y(q,X),ce.return=K,K=ce):(c(K,q),ce=Wh(X,K.mode,ce),ce.return=K,K=ce),w(K)):c(K,q)}return function(K,q,X,ce){try{bo=0;var Ce=ht(K,q,X,ce);return ia=null,Ce}catch(we){if(we===sa||we===Ec)throw we;var et=Vn(29,we,null,K.mode);return et.lanes=ce,et.return=K,et}}}var mi=M_(!0),D_=M_(!1),Es=!1;function hd(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function dd(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Cs(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Ts(i,o,c){var d=i.updateQueue;if(d===null)return null;if(d=d.shared,(rt&2)!==0){var y=d.pending;return y===null?o.next=o:(o.next=y.next,y.next=o),d.pending=o,o=bc(i),y_(i,null,c),o}return _c(i,d,o,c),bc(i)}function xo(i,o,c){if(o=o.updateQueue,o!==null&&(o=o.shared,(c&4194048)!==0)){var d=o.lanes;d&=i.pendingLanes,c|=d,o.lanes=c,E0(i,c)}}function pd(i,o){var c=i.updateQueue,d=i.alternate;if(d!==null&&(d=d.updateQueue,c===d)){var y=null,b=null;if(c=c.firstBaseUpdate,c!==null){do{var w={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};b===null?y=b=w:b=b.next=w,c=c.next}while(c!==null);b===null?y=b=o:b=b.next=o}else y=b=o;c={baseState:d.baseState,firstBaseUpdate:y,lastBaseUpdate:b,shared:d.shared,callbacks:d.callbacks},i.updateQueue=c;return}i=c.lastBaseUpdate,i===null?c.firstBaseUpdate=o:i.next=o,c.lastBaseUpdate=o}var md=!1;function wo(){if(md){var i=ra;if(i!==null)throw i}}function So(i,o,c,d){md=!1;var y=i.updateQueue;Es=!1;var b=y.firstBaseUpdate,w=y.lastBaseUpdate,A=y.shared.pending;if(A!==null){y.shared.pending=null;var U=A,W=U.next;U.next=null,w===null?b=W:w.next=W,w=U;var ae=i.alternate;ae!==null&&(ae=ae.updateQueue,A=ae.lastBaseUpdate,A!==w&&(A===null?ae.firstBaseUpdate=W:A.next=W,ae.lastBaseUpdate=U))}if(b!==null){var ue=y.baseState;w=0,ae=W=U=null,A=b;do{var te=A.lane&-536870913,ie=te!==A.lane;if(ie?(Ze&te)===te:(d&te)===te){te!==0&&te===na&&(md=!0),ae!==null&&(ae=ae.next={lane:0,tag:A.tag,payload:A.payload,callback:null,next:null});e:{var be=i,Oe=A;te=o;var ht=c;switch(Oe.tag){case 1:if(be=Oe.payload,typeof be=="function"){ue=be.call(ht,ue,te);break e}ue=be;break e;case 3:be.flags=be.flags&-65537|128;case 0:if(be=Oe.payload,te=typeof be=="function"?be.call(ht,ue,te):be,te==null)break e;ue=p({},ue,te);break e;case 2:Es=!0}}te=A.callback,te!==null&&(i.flags|=64,ie&&(i.flags|=8192),ie=y.callbacks,ie===null?y.callbacks=[te]:ie.push(te))}else ie={lane:te,tag:A.tag,payload:A.payload,callback:A.callback,next:null},ae===null?(W=ae=ie,U=ue):ae=ae.next=ie,w|=te;if(A=A.next,A===null){if(A=y.shared.pending,A===null)break;ie=A,A=ie.next,ie.next=null,y.lastBaseUpdate=ie,y.shared.pending=null}}while(!0);ae===null&&(U=ue),y.baseState=U,y.firstBaseUpdate=W,y.lastBaseUpdate=ae,b===null&&(y.shared.lanes=0),Ns|=w,i.lanes=w,i.memoizedState=ue}}function L_(i,o){if(typeof i!="function")throw Error(r(191,i));i.call(o)}function z_(i,o){var c=i.callbacks;if(c!==null)for(i.callbacks=null,i=0;i<c.length;i++)L_(c[i],o)}var aa=N(null),Rc=N(0);function j_(i,o){i=cs,R(Rc,i),R(aa,o),cs=i|o.baseLanes}function gd(){R(Rc,cs),R(aa,aa.current)}function yd(){cs=Rc.current,F(aa),F(Rc)}var Hn=N(null),fr=null;function As(i){var o=i.alternate;R(Ct,Ct.current&1),R(Hn,i),fr===null&&(o===null||aa.current!==null||o.memoizedState!==null)&&(fr=i)}function _d(i){R(Ct,Ct.current),R(Hn,i),fr===null&&(fr=i)}function P_(i){i.tag===22?(R(Ct,Ct.current),R(Hn,i),fr===null&&(fr=i)):Rs()}function Rs(){R(Ct,Ct.current),R(Hn,Hn.current)}function Gn(i){F(Hn),fr===i&&(fr=null),F(Ct)}var Ct=N(0);function Oc(i){for(var o=i;o!==null;){if(o.tag===13){var c=o.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||kp(c)||Ep(c)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var ts=0,je=null,ut=null,Nt=null,Ic=!1,oa=!1,gi=!1,Nc=0,ko=0,la=null,RR=0;function St(){throw Error(r(321))}function bd(i,o){if(o===null)return!1;for(var c=0;c<o.length&&c<i.length;c++)if(!Fn(i[c],o[c]))return!1;return!0}function vd(i,o,c,d,y,b){return ts=b,je=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,B.H=i===null||i.memoizedState===null?xb:Ld,gi=!1,b=c(d,y),gi=!1,oa&&(b=U_(o,c,d,y)),B_(i),b}function B_(i){B.H=To;var o=ut!==null&&ut.next!==null;if(ts=0,Nt=ut=je=null,Ic=!1,ko=0,la=null,o)throw Error(r(300));i===null||Mt||(i=i.dependencies,i!==null&&wc(i)&&(Mt=!0))}function U_(i,o,c,d){je=i;var y=0;do{if(oa&&(la=null),ko=0,oa=!1,25<=y)throw Error(r(301));if(y+=1,Nt=ut=null,i.updateQueue!=null){var b=i.updateQueue;b.lastEffect=null,b.events=null,b.stores=null,b.memoCache!=null&&(b.memoCache.index=0)}B.H=wb,b=o(c,d)}while(oa);return b}function OR(){var i=B.H,o=i.useState()[0];return o=typeof o.then=="function"?Eo(o):o,i=i.useState()[0],(ut!==null?ut.memoizedState:null)!==i&&(je.flags|=1024),o}function xd(){var i=Nc!==0;return Nc=0,i}function wd(i,o,c){o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~c}function Sd(i){if(Ic){for(i=i.memoizedState;i!==null;){var o=i.queue;o!==null&&(o.pending=null),i=i.next}Ic=!1}ts=0,Nt=ut=je=null,oa=!1,ko=Nc=0,la=null}function wn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Nt===null?je.memoizedState=Nt=i:Nt=Nt.next=i,Nt}function Tt(){if(ut===null){var i=je.alternate;i=i!==null?i.memoizedState:null}else i=ut.next;var o=Nt===null?je.memoizedState:Nt.next;if(o!==null)Nt=o,ut=i;else{if(i===null)throw je.alternate===null?Error(r(467)):Error(r(310));ut=i,i={memoizedState:ut.memoizedState,baseState:ut.baseState,baseQueue:ut.baseQueue,queue:ut.queue,next:null},Nt===null?je.memoizedState=Nt=i:Nt=Nt.next=i}return Nt}function Mc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Eo(i){var o=ko;return ko+=1,la===null&&(la=[]),i=O_(la,i,o),o=je,(Nt===null?o.memoizedState:Nt.next)===null&&(o=o.alternate,B.H=o===null||o.memoizedState===null?xb:Ld),i}function Dc(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Eo(i);if(i.$$typeof===C)return an(i)}throw Error(r(438,String(i)))}function kd(i){var o=null,c=je.updateQueue;if(c!==null&&(o=c.memoCache),o==null){var d=je.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(o={data:d.data.map(function(y){return y.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),c===null&&(c=Mc(),je.updateQueue=c),c.memoCache=o,c=o.data[o.index],c===void 0)for(c=o.data[o.index]=Array(i),d=0;d<i;d++)c[d]=z;return o.index++,c}function ns(i,o){return typeof o=="function"?o(i):o}function Lc(i){var o=Tt();return Ed(o,ut,i)}function Ed(i,o,c){var d=i.queue;if(d===null)throw Error(r(311));d.lastRenderedReducer=c;var y=i.baseQueue,b=d.pending;if(b!==null){if(y!==null){var w=y.next;y.next=b.next,b.next=w}o.baseQueue=y=b,d.pending=null}if(b=i.baseState,y===null)i.memoizedState=b;else{o=y.next;var A=w=null,U=null,W=o,ae=!1;do{var ue=W.lane&-536870913;if(ue!==W.lane?(Ze&ue)===ue:(ts&ue)===ue){var te=W.revertLane;if(te===0)U!==null&&(U=U.next={lane:0,revertLane:0,gesture:null,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null}),ue===na&&(ae=!0);else if((ts&te)===te){W=W.next,te===na&&(ae=!0);continue}else ue={lane:0,revertLane:W.revertLane,gesture:null,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null},U===null?(A=U=ue,w=b):U=U.next=ue,je.lanes|=te,Ns|=te;ue=W.action,gi&&c(b,ue),b=W.hasEagerState?W.eagerState:c(b,ue)}else te={lane:ue,revertLane:W.revertLane,gesture:W.gesture,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null},U===null?(A=U=te,w=b):U=U.next=te,je.lanes|=ue,Ns|=ue;W=W.next}while(W!==null&&W!==o);if(U===null?w=b:U.next=A,!Fn(b,i.memoizedState)&&(Mt=!0,ae&&(c=ra,c!==null)))throw c;i.memoizedState=b,i.baseState=w,i.baseQueue=U,d.lastRenderedState=b}return y===null&&(d.lanes=0),[i.memoizedState,d.dispatch]}function Cd(i){var o=Tt(),c=o.queue;if(c===null)throw Error(r(311));c.lastRenderedReducer=i;var d=c.dispatch,y=c.pending,b=o.memoizedState;if(y!==null){c.pending=null;var w=y=y.next;do b=i(b,w.action),w=w.next;while(w!==y);Fn(b,o.memoizedState)||(Mt=!0),o.memoizedState=b,o.baseQueue===null&&(o.baseState=b),c.lastRenderedState=b}return[b,d]}function $_(i,o,c){var d=je,y=Tt(),b=Ye;if(b){if(c===void 0)throw Error(r(407));c=c()}else c=o();var w=!Fn((ut||y).memoizedState,c);if(w&&(y.memoizedState=c,Mt=!0),y=y.queue,Rd(V_.bind(null,d,y,i),[i]),y.getSnapshot!==o||w||Nt!==null&&Nt.memoizedState.tag&1){if(d.flags|=2048,ca(9,{destroy:void 0},F_.bind(null,d,y,c,o),null),pt===null)throw Error(r(349));b||(ts&127)!==0||q_(d,o,c)}return c}function q_(i,o,c){i.flags|=16384,i={getSnapshot:o,value:c},o=je.updateQueue,o===null?(o=Mc(),je.updateQueue=o,o.stores=[i]):(c=o.stores,c===null?o.stores=[i]:c.push(i))}function F_(i,o,c,d){o.value=c,o.getSnapshot=d,H_(o)&&G_(i)}function V_(i,o,c){return c(function(){H_(o)&&G_(i)})}function H_(i){var o=i.getSnapshot;i=i.value;try{var c=o();return!Fn(i,c)}catch{return!0}}function G_(i){var o=oi(i,2);o!==null&&zn(o,i,2)}function Td(i){var o=wn();if(typeof i=="function"){var c=i;if(i=c(),gi){Rn(!0);try{c()}finally{Rn(!1)}}}return o.memoizedState=o.baseState=i,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ns,lastRenderedState:i},o}function K_(i,o,c,d){return i.baseState=c,Ed(i,ut,typeof d=="function"?d:ns)}function IR(i,o,c,d,y){if(Pc(i))throw Error(r(485));if(i=o.action,i!==null){var b={payload:y,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(w){b.listeners.push(w)}};B.T!==null?c(!0):b.isTransition=!1,d(b),c=o.pending,c===null?(b.next=o.pending=b,Z_(o,b)):(b.next=c.next,o.pending=c.next=b)}}function Z_(i,o){var c=o.action,d=o.payload,y=i.state;if(o.isTransition){var b=B.T,w={};B.T=w;try{var A=c(y,d),U=B.S;U!==null&&U(w,A),Q_(i,o,A)}catch(W){Ad(i,o,W)}finally{b!==null&&w.types!==null&&(b.types=w.types),B.T=b}}else try{b=c(y,d),Q_(i,o,b)}catch(W){Ad(i,o,W)}}function Q_(i,o,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(d){J_(i,o,d)},function(d){return Ad(i,o,d)}):J_(i,o,c)}function J_(i,o,c){o.status="fulfilled",o.value=c,Y_(o),i.state=c,o=i.pending,o!==null&&(c=o.next,c===o?i.pending=null:(c=c.next,o.next=c,Z_(i,c)))}function Ad(i,o,c){var d=i.pending;if(i.pending=null,d!==null){d=d.next;do o.status="rejected",o.reason=c,Y_(o),o=o.next;while(o!==d)}i.action=null}function Y_(i){i=i.listeners;for(var o=0;o<i.length;o++)(0,i[o])()}function X_(i,o){return o}function W_(i,o){if(Ye){var c=pt.formState;if(c!==null){e:{var d=je;if(Ye){if(yt){t:{for(var y=yt,b=ur;y.nodeType!==8;){if(!b){y=null;break t}if(y=hr(y.nextSibling),y===null){y=null;break t}}b=y.data,y=b==="F!"||b==="F"?y:null}if(y){yt=hr(y.nextSibling),d=y.data==="F!";break e}}Ss(d)}d=!1}d&&(o=c[0])}}return c=wn(),c.memoizedState=c.baseState=o,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:X_,lastRenderedState:o},c.queue=d,c=_b.bind(null,je,d),d.dispatch=c,d=Td(!1),b=Dd.bind(null,je,!1,d.queue),d=wn(),y={state:o,dispatch:null,action:i,pending:null},d.queue=y,c=IR.bind(null,je,y,b,c),y.dispatch=c,d.memoizedState=i,[o,c,!1]}function eb(i){var o=Tt();return tb(o,ut,i)}function tb(i,o,c){if(o=Ed(i,o,X_)[0],i=Lc(ns)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var d=Eo(o)}catch(w){throw w===sa?Ec:w}else d=o;o=Tt();var y=o.queue,b=y.dispatch;return c!==o.memoizedState&&(je.flags|=2048,ca(9,{destroy:void 0},NR.bind(null,y,c),null)),[d,b,i]}function NR(i,o){i.action=o}function nb(i){var o=Tt(),c=ut;if(c!==null)return tb(o,c,i);Tt(),o=o.memoizedState,c=Tt();var d=c.queue.dispatch;return c.memoizedState=i,[o,d,!1]}function ca(i,o,c,d){return i={tag:i,create:c,deps:d,inst:o,next:null},o=je.updateQueue,o===null&&(o=Mc(),je.updateQueue=o),c=o.lastEffect,c===null?o.lastEffect=i.next=i:(d=c.next,c.next=i,i.next=d,o.lastEffect=i),i}function rb(){return Tt().memoizedState}function zc(i,o,c,d){var y=wn();je.flags|=i,y.memoizedState=ca(1|o,{destroy:void 0},c,d===void 0?null:d)}function jc(i,o,c,d){var y=Tt();d=d===void 0?null:d;var b=y.memoizedState.inst;ut!==null&&d!==null&&bd(d,ut.memoizedState.deps)?y.memoizedState=ca(o,b,c,d):(je.flags|=i,y.memoizedState=ca(1|o,b,c,d))}function sb(i,o){zc(8390656,8,i,o)}function Rd(i,o){jc(2048,8,i,o)}function MR(i){je.flags|=4;var o=je.updateQueue;if(o===null)o=Mc(),je.updateQueue=o,o.events=[i];else{var c=o.events;c===null?o.events=[i]:c.push(i)}}function ib(i){var o=Tt().memoizedState;return MR({ref:o,nextImpl:i}),function(){if((rt&2)!==0)throw Error(r(440));return o.impl.apply(void 0,arguments)}}function ab(i,o){return jc(4,2,i,o)}function ob(i,o){return jc(4,4,i,o)}function lb(i,o){if(typeof o=="function"){i=i();var c=o(i);return function(){typeof c=="function"?c():o(null)}}if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function cb(i,o,c){c=c!=null?c.concat([i]):null,jc(4,4,lb.bind(null,o,i),c)}function Od(){}function ub(i,o){var c=Tt();o=o===void 0?null:o;var d=c.memoizedState;return o!==null&&bd(o,d[1])?d[0]:(c.memoizedState=[i,o],i)}function fb(i,o){var c=Tt();o=o===void 0?null:o;var d=c.memoizedState;if(o!==null&&bd(o,d[1]))return d[0];if(d=i(),gi){Rn(!0);try{i()}finally{Rn(!1)}}return c.memoizedState=[d,o],d}function Id(i,o,c){return c===void 0||(ts&1073741824)!==0&&(Ze&261930)===0?i.memoizedState=o:(i.memoizedState=c,i=hv(),je.lanes|=i,Ns|=i,c)}function hb(i,o,c,d){return Fn(c,o)?c:aa.current!==null?(i=Id(i,c,d),Fn(i,o)||(Mt=!0),i):(ts&42)===0||(ts&1073741824)!==0&&(Ze&261930)===0?(Mt=!0,i.memoizedState=c):(i=hv(),je.lanes|=i,Ns|=i,o)}function db(i,o,c,d,y){var b=G.p;G.p=b!==0&&8>b?b:8;var w=B.T,A={};B.T=A,Dd(i,!1,o,c);try{var U=y(),W=B.S;if(W!==null&&W(A,U),U!==null&&typeof U=="object"&&typeof U.then=="function"){var ae=AR(U,d);Co(i,o,ae,Qn(i))}else Co(i,o,d,Qn(i))}catch(ue){Co(i,o,{then:function(){},status:"rejected",reason:ue},Qn())}finally{G.p=b,w!==null&&A.types!==null&&(w.types=A.types),B.T=w}}function DR(){}function Nd(i,o,c,d){if(i.tag!==5)throw Error(r(476));var y=pb(i).queue;db(i,y,o,re,c===null?DR:function(){return mb(i),c(d)})}function pb(i){var o=i.memoizedState;if(o!==null)return o;o={memoizedState:re,baseState:re,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ns,lastRenderedState:re},next:null};var c={};return o.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ns,lastRenderedState:c},next:null},i.memoizedState=o,i=i.alternate,i!==null&&(i.memoizedState=o),o}function mb(i){var o=pb(i);o.next===null&&(o=i.alternate.memoizedState),Co(i,o.next.queue,{},Qn())}function Md(){return an(Fo)}function gb(){return Tt().memoizedState}function yb(){return Tt().memoizedState}function LR(i){for(var o=i.return;o!==null;){switch(o.tag){case 24:case 3:var c=Qn();i=Cs(c);var d=Ts(o,i,c);d!==null&&(zn(d,o,c),xo(d,o,c)),o={cache:ld()},i.payload=o;return}o=o.return}}function zR(i,o,c){var d=Qn();c={lane:d,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Pc(i)?bb(o,c):(c=Yh(i,o,c,d),c!==null&&(zn(c,i,d),vb(c,o,d)))}function _b(i,o,c){var d=Qn();Co(i,o,c,d)}function Co(i,o,c,d){var y={lane:d,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null};if(Pc(i))bb(o,y);else{var b=i.alternate;if(i.lanes===0&&(b===null||b.lanes===0)&&(b=o.lastRenderedReducer,b!==null))try{var w=o.lastRenderedState,A=b(w,c);if(y.hasEagerState=!0,y.eagerState=A,Fn(A,w))return _c(i,o,y,0),pt===null&&yc(),!1}catch{}if(c=Yh(i,o,y,d),c!==null)return zn(c,i,d),vb(c,o,d),!0}return!1}function Dd(i,o,c,d){if(d={lane:2,revertLane:hp(),gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},Pc(i)){if(o)throw Error(r(479))}else o=Yh(i,c,d,2),o!==null&&zn(o,i,2)}function Pc(i){var o=i.alternate;return i===je||o!==null&&o===je}function bb(i,o){oa=Ic=!0;var c=i.pending;c===null?o.next=o:(o.next=c.next,c.next=o),i.pending=o}function vb(i,o,c){if((c&4194048)!==0){var d=o.lanes;d&=i.pendingLanes,c|=d,o.lanes=c,E0(i,c)}}var To={readContext:an,use:Dc,useCallback:St,useContext:St,useEffect:St,useImperativeHandle:St,useLayoutEffect:St,useInsertionEffect:St,useMemo:St,useReducer:St,useRef:St,useState:St,useDebugValue:St,useDeferredValue:St,useTransition:St,useSyncExternalStore:St,useId:St,useHostTransitionStatus:St,useFormState:St,useActionState:St,useOptimistic:St,useMemoCache:St,useCacheRefresh:St};To.useEffectEvent=St;var xb={readContext:an,use:Dc,useCallback:function(i,o){return wn().memoizedState=[i,o===void 0?null:o],i},useContext:an,useEffect:sb,useImperativeHandle:function(i,o,c){c=c!=null?c.concat([i]):null,zc(4194308,4,lb.bind(null,o,i),c)},useLayoutEffect:function(i,o){return zc(4194308,4,i,o)},useInsertionEffect:function(i,o){zc(4,2,i,o)},useMemo:function(i,o){var c=wn();o=o===void 0?null:o;var d=i();if(gi){Rn(!0);try{i()}finally{Rn(!1)}}return c.memoizedState=[d,o],d},useReducer:function(i,o,c){var d=wn();if(c!==void 0){var y=c(o);if(gi){Rn(!0);try{c(o)}finally{Rn(!1)}}}else y=o;return d.memoizedState=d.baseState=y,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:y},d.queue=i,i=i.dispatch=zR.bind(null,je,i),[d.memoizedState,i]},useRef:function(i){var o=wn();return i={current:i},o.memoizedState=i},useState:function(i){i=Td(i);var o=i.queue,c=_b.bind(null,je,o);return o.dispatch=c,[i.memoizedState,c]},useDebugValue:Od,useDeferredValue:function(i,o){var c=wn();return Id(c,i,o)},useTransition:function(){var i=Td(!1);return i=db.bind(null,je,i.queue,!0,!1),wn().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,o,c){var d=je,y=wn();if(Ye){if(c===void 0)throw Error(r(407));c=c()}else{if(c=o(),pt===null)throw Error(r(349));(Ze&127)!==0||q_(d,o,c)}y.memoizedState=c;var b={value:c,getSnapshot:o};return y.queue=b,sb(V_.bind(null,d,b,i),[i]),d.flags|=2048,ca(9,{destroy:void 0},F_.bind(null,d,b,c,o),null),c},useId:function(){var i=wn(),o=pt.identifierPrefix;if(Ye){var c=Nr,d=Ir;c=(d&~(1<<32-dt(d)-1)).toString(32)+c,o="_"+o+"R_"+c,c=Nc++,0<c&&(o+="H"+c.toString(32)),o+="_"}else c=RR++,o="_"+o+"r_"+c.toString(32)+"_";return i.memoizedState=o},useHostTransitionStatus:Md,useFormState:W_,useActionState:W_,useOptimistic:function(i){var o=wn();o.memoizedState=o.baseState=i;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=c,o=Dd.bind(null,je,!0,c),c.dispatch=o,[i,o]},useMemoCache:kd,useCacheRefresh:function(){return wn().memoizedState=LR.bind(null,je)},useEffectEvent:function(i){var o=wn(),c={impl:i};return o.memoizedState=c,function(){if((rt&2)!==0)throw Error(r(440));return c.impl.apply(void 0,arguments)}}},Ld={readContext:an,use:Dc,useCallback:ub,useContext:an,useEffect:Rd,useImperativeHandle:cb,useInsertionEffect:ab,useLayoutEffect:ob,useMemo:fb,useReducer:Lc,useRef:rb,useState:function(){return Lc(ns)},useDebugValue:Od,useDeferredValue:function(i,o){var c=Tt();return hb(c,ut.memoizedState,i,o)},useTransition:function(){var i=Lc(ns)[0],o=Tt().memoizedState;return[typeof i=="boolean"?i:Eo(i),o]},useSyncExternalStore:$_,useId:gb,useHostTransitionStatus:Md,useFormState:eb,useActionState:eb,useOptimistic:function(i,o){var c=Tt();return K_(c,ut,i,o)},useMemoCache:kd,useCacheRefresh:yb};Ld.useEffectEvent=ib;var wb={readContext:an,use:Dc,useCallback:ub,useContext:an,useEffect:Rd,useImperativeHandle:cb,useInsertionEffect:ab,useLayoutEffect:ob,useMemo:fb,useReducer:Cd,useRef:rb,useState:function(){return Cd(ns)},useDebugValue:Od,useDeferredValue:function(i,o){var c=Tt();return ut===null?Id(c,i,o):hb(c,ut.memoizedState,i,o)},useTransition:function(){var i=Cd(ns)[0],o=Tt().memoizedState;return[typeof i=="boolean"?i:Eo(i),o]},useSyncExternalStore:$_,useId:gb,useHostTransitionStatus:Md,useFormState:nb,useActionState:nb,useOptimistic:function(i,o){var c=Tt();return ut!==null?K_(c,ut,i,o):(c.baseState=i,[i,c.queue.dispatch])},useMemoCache:kd,useCacheRefresh:yb};wb.useEffectEvent=ib;function zd(i,o,c,d){o=i.memoizedState,c=c(d,o),c=c==null?o:p({},o,c),i.memoizedState=c,i.lanes===0&&(i.updateQueue.baseState=c)}var jd={enqueueSetState:function(i,o,c){i=i._reactInternals;var d=Qn(),y=Cs(d);y.payload=o,c!=null&&(y.callback=c),o=Ts(i,y,d),o!==null&&(zn(o,i,d),xo(o,i,d))},enqueueReplaceState:function(i,o,c){i=i._reactInternals;var d=Qn(),y=Cs(d);y.tag=1,y.payload=o,c!=null&&(y.callback=c),o=Ts(i,y,d),o!==null&&(zn(o,i,d),xo(o,i,d))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var c=Qn(),d=Cs(c);d.tag=2,o!=null&&(d.callback=o),o=Ts(i,d,c),o!==null&&(zn(o,i,c),xo(o,i,c))}};function Sb(i,o,c,d,y,b,w){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(d,b,w):o.prototype&&o.prototype.isPureReactComponent?!ho(c,d)||!ho(y,b):!0}function kb(i,o,c,d){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(c,d),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(c,d),o.state!==i&&jd.enqueueReplaceState(o,o.state,null)}function yi(i,o){var c=o;if("ref"in o){c={};for(var d in o)d!=="ref"&&(c[d]=o[d])}if(i=i.defaultProps){c===o&&(c=p({},c));for(var y in i)c[y]===void 0&&(c[y]=i[y])}return c}function Eb(i){gc(i)}function Cb(i){console.error(i)}function Tb(i){gc(i)}function Bc(i,o){try{var c=i.onUncaughtError;c(o.value,{componentStack:o.stack})}catch(d){setTimeout(function(){throw d})}}function Ab(i,o,c){try{var d=i.onCaughtError;d(c.value,{componentStack:c.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function Pd(i,o,c){return c=Cs(c),c.tag=3,c.payload={element:null},c.callback=function(){Bc(i,o)},c}function Rb(i){return i=Cs(i),i.tag=3,i}function Ob(i,o,c,d){var y=c.type.getDerivedStateFromError;if(typeof y=="function"){var b=d.value;i.payload=function(){return y(b)},i.callback=function(){Ab(o,c,d)}}var w=c.stateNode;w!==null&&typeof w.componentDidCatch=="function"&&(i.callback=function(){Ab(o,c,d),typeof y!="function"&&(Ms===null?Ms=new Set([this]):Ms.add(this));var A=d.stack;this.componentDidCatch(d.value,{componentStack:A!==null?A:""})})}function jR(i,o,c,d,y){if(c.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(o=c.alternate,o!==null&&ta(o,c,y,!0),c=Hn.current,c!==null){switch(c.tag){case 31:case 13:return fr===null?Yc():c.alternate===null&&kt===0&&(kt=3),c.flags&=-257,c.flags|=65536,c.lanes=y,d===Cc?c.flags|=16384:(o=c.updateQueue,o===null?c.updateQueue=new Set([d]):o.add(d),cp(i,d,y)),!1;case 22:return c.flags|=65536,d===Cc?c.flags|=16384:(o=c.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([d])},c.updateQueue=o):(c=o.retryQueue,c===null?o.retryQueue=new Set([d]):c.add(d)),cp(i,d,y)),!1}throw Error(r(435,c.tag))}return cp(i,d,y),Yc(),!1}if(Ye)return o=Hn.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=y,d!==rd&&(i=Error(r(422),{cause:d}),go(or(i,c)))):(d!==rd&&(o=Error(r(423),{cause:d}),go(or(o,c))),i=i.current.alternate,i.flags|=65536,y&=-y,i.lanes|=y,d=or(d,c),y=Pd(i.stateNode,d,y),pd(i,y),kt!==4&&(kt=2)),!1;var b=Error(r(520),{cause:d});if(b=or(b,c),Lo===null?Lo=[b]:Lo.push(b),kt!==4&&(kt=2),o===null)return!0;d=or(d,c),c=o;do{switch(c.tag){case 3:return c.flags|=65536,i=y&-y,c.lanes|=i,i=Pd(c.stateNode,d,i),pd(c,i),!1;case 1:if(o=c.type,b=c.stateNode,(c.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Ms===null||!Ms.has(b))))return c.flags|=65536,y&=-y,c.lanes|=y,y=Rb(y),Ob(y,i,c,d),pd(c,y),!1}c=c.return}while(c!==null);return!1}var Bd=Error(r(461)),Mt=!1;function on(i,o,c,d){o.child=i===null?D_(o,null,c,d):mi(o,i.child,c,d)}function Ib(i,o,c,d,y){c=c.render;var b=o.ref;if("ref"in d){var w={};for(var A in d)A!=="ref"&&(w[A]=d[A])}else w=d;return fi(o),d=vd(i,o,c,w,b,y),A=xd(),i!==null&&!Mt?(wd(i,o,y),rs(i,o,y)):(Ye&&A&&td(o),o.flags|=1,on(i,o,d,y),o.child)}function Nb(i,o,c,d,y){if(i===null){var b=c.type;return typeof b=="function"&&!Xh(b)&&b.defaultProps===void 0&&c.compare===null?(o.tag=15,o.type=b,Mb(i,o,b,d,y)):(i=vc(c.type,null,d,o,o.mode,y),i.ref=o.ref,i.return=o,o.child=i)}if(b=i.child,!Kd(i,y)){var w=b.memoizedProps;if(c=c.compare,c=c!==null?c:ho,c(w,d)&&i.ref===o.ref)return rs(i,o,y)}return o.flags|=1,i=Yr(b,d),i.ref=o.ref,i.return=o,o.child=i}function Mb(i,o,c,d,y){if(i!==null){var b=i.memoizedProps;if(ho(b,d)&&i.ref===o.ref)if(Mt=!1,o.pendingProps=d=b,Kd(i,y))(i.flags&131072)!==0&&(Mt=!0);else return o.lanes=i.lanes,rs(i,o,y)}return Ud(i,o,c,d,y)}function Db(i,o,c,d){var y=d.children,b=i!==null?i.memoizedState:null;if(i===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.mode==="hidden"){if((o.flags&128)!==0){if(b=b!==null?b.baseLanes|c:c,i!==null){for(d=o.child=i.child,y=0;d!==null;)y=y|d.lanes|d.childLanes,d=d.sibling;d=y&~b}else d=0,o.child=null;return Lb(i,o,b,c,d)}if((c&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},i!==null&&kc(o,b!==null?b.cachePool:null),b!==null?j_(o,b):gd(),P_(o);else return d=o.lanes=536870912,Lb(i,o,b!==null?b.baseLanes|c:c,c,d)}else b!==null?(kc(o,b.cachePool),j_(o,b),Rs(),o.memoizedState=null):(i!==null&&kc(o,null),gd(),Rs());return on(i,o,y,c),o.child}function Ao(i,o){return i!==null&&i.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function Lb(i,o,c,d,y){var b=ud();return b=b===null?null:{parent:It._currentValue,pool:b},o.memoizedState={baseLanes:c,cachePool:b},i!==null&&kc(o,null),gd(),P_(o),i!==null&&ta(i,o,d,!0),o.childLanes=y,null}function Uc(i,o){return o=qc({mode:o.mode,children:o.children},i.mode),o.ref=i.ref,i.child=o,o.return=i,o}function zb(i,o,c){return mi(o,i.child,null,c),i=Uc(o,o.pendingProps),i.flags|=2,Gn(o),o.memoizedState=null,i}function PR(i,o,c){var d=o.pendingProps,y=(o.flags&128)!==0;if(o.flags&=-129,i===null){if(Ye){if(d.mode==="hidden")return i=Uc(o,d),o.lanes=536870912,Ao(null,i);if(_d(o),(i=yt)?(i=Zv(i,ur),i=i!==null&&i.data==="&"?i:null,i!==null&&(o.memoizedState={dehydrated:i,treeContext:xs!==null?{id:Ir,overflow:Nr}:null,retryLane:536870912,hydrationErrors:null},c=b_(i),c.return=o,o.child=c,sn=o,yt=null)):i=null,i===null)throw Ss(o);return o.lanes=536870912,null}return Uc(o,d)}var b=i.memoizedState;if(b!==null){var w=b.dehydrated;if(_d(o),y)if(o.flags&256)o.flags&=-257,o=zb(i,o,c);else if(o.memoizedState!==null)o.child=i.child,o.flags|=128,o=null;else throw Error(r(558));else if(Mt||ta(i,o,c,!1),y=(c&i.childLanes)!==0,Mt||y){if(d=pt,d!==null&&(w=C0(d,c),w!==0&&w!==b.retryLane))throw b.retryLane=w,oi(i,w),zn(d,i,w),Bd;Yc(),o=zb(i,o,c)}else i=b.treeContext,yt=hr(w.nextSibling),sn=o,Ye=!0,ws=null,ur=!1,i!==null&&w_(o,i),o=Uc(o,d),o.flags|=4096;return o}return i=Yr(i.child,{mode:d.mode,children:d.children}),i.ref=o.ref,o.child=i,i.return=o,i}function $c(i,o){var c=o.ref;if(c===null)i!==null&&i.ref!==null&&(o.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(r(284));(i===null||i.ref!==c)&&(o.flags|=4194816)}}function Ud(i,o,c,d,y){return fi(o),c=vd(i,o,c,d,void 0,y),d=xd(),i!==null&&!Mt?(wd(i,o,y),rs(i,o,y)):(Ye&&d&&td(o),o.flags|=1,on(i,o,c,y),o.child)}function jb(i,o,c,d,y,b){return fi(o),o.updateQueue=null,c=U_(o,d,c,y),B_(i),d=xd(),i!==null&&!Mt?(wd(i,o,b),rs(i,o,b)):(Ye&&d&&td(o),o.flags|=1,on(i,o,c,b),o.child)}function Pb(i,o,c,d,y){if(fi(o),o.stateNode===null){var b=Yi,w=c.contextType;typeof w=="object"&&w!==null&&(b=an(w)),b=new c(d,b),o.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,b.updater=jd,o.stateNode=b,b._reactInternals=o,b=o.stateNode,b.props=d,b.state=o.memoizedState,b.refs={},hd(o),w=c.contextType,b.context=typeof w=="object"&&w!==null?an(w):Yi,b.state=o.memoizedState,w=c.getDerivedStateFromProps,typeof w=="function"&&(zd(o,c,w,d),b.state=o.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(w=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),w!==b.state&&jd.enqueueReplaceState(b,b.state,null),So(o,d,b,y),wo(),b.state=o.memoizedState),typeof b.componentDidMount=="function"&&(o.flags|=4194308),d=!0}else if(i===null){b=o.stateNode;var A=o.memoizedProps,U=yi(c,A);b.props=U;var W=b.context,ae=c.contextType;w=Yi,typeof ae=="object"&&ae!==null&&(w=an(ae));var ue=c.getDerivedStateFromProps;ae=typeof ue=="function"||typeof b.getSnapshotBeforeUpdate=="function",A=o.pendingProps!==A,ae||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(A||W!==w)&&kb(o,b,d,w),Es=!1;var te=o.memoizedState;b.state=te,So(o,d,b,y),wo(),W=o.memoizedState,A||te!==W||Es?(typeof ue=="function"&&(zd(o,c,ue,d),W=o.memoizedState),(U=Es||Sb(o,c,U,d,te,W,w))?(ae||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(o.flags|=4194308)):(typeof b.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=d,o.memoizedState=W),b.props=d,b.state=W,b.context=w,d=U):(typeof b.componentDidMount=="function"&&(o.flags|=4194308),d=!1)}else{b=o.stateNode,dd(i,o),w=o.memoizedProps,ae=yi(c,w),b.props=ae,ue=o.pendingProps,te=b.context,W=c.contextType,U=Yi,typeof W=="object"&&W!==null&&(U=an(W)),A=c.getDerivedStateFromProps,(W=typeof A=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(w!==ue||te!==U)&&kb(o,b,d,U),Es=!1,te=o.memoizedState,b.state=te,So(o,d,b,y),wo();var ie=o.memoizedState;w!==ue||te!==ie||Es||i!==null&&i.dependencies!==null&&wc(i.dependencies)?(typeof A=="function"&&(zd(o,c,A,d),ie=o.memoizedState),(ae=Es||Sb(o,c,ae,d,te,ie,U)||i!==null&&i.dependencies!==null&&wc(i.dependencies))?(W||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(d,ie,U),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(d,ie,U)),typeof b.componentDidUpdate=="function"&&(o.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof b.componentDidUpdate!="function"||w===i.memoizedProps&&te===i.memoizedState||(o.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||w===i.memoizedProps&&te===i.memoizedState||(o.flags|=1024),o.memoizedProps=d,o.memoizedState=ie),b.props=d,b.state=ie,b.context=U,d=ae):(typeof b.componentDidUpdate!="function"||w===i.memoizedProps&&te===i.memoizedState||(o.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||w===i.memoizedProps&&te===i.memoizedState||(o.flags|=1024),d=!1)}return b=d,$c(i,o),d=(o.flags&128)!==0,b||d?(b=o.stateNode,c=d&&typeof c.getDerivedStateFromError!="function"?null:b.render(),o.flags|=1,i!==null&&d?(o.child=mi(o,i.child,null,y),o.child=mi(o,null,c,y)):on(i,o,c,y),o.memoizedState=b.state,i=o.child):i=rs(i,o,y),i}function Bb(i,o,c,d){return ci(),o.flags|=256,on(i,o,c,d),o.child}var $d={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function qd(i){return{baseLanes:i,cachePool:A_()}}function Fd(i,o,c){return i=i!==null?i.childLanes&~c:0,o&&(i|=Zn),i}function Ub(i,o,c){var d=o.pendingProps,y=!1,b=(o.flags&128)!==0,w;if((w=b)||(w=i!==null&&i.memoizedState===null?!1:(Ct.current&2)!==0),w&&(y=!0,o.flags&=-129),w=(o.flags&32)!==0,o.flags&=-33,i===null){if(Ye){if(y?As(o):Rs(),(i=yt)?(i=Zv(i,ur),i=i!==null&&i.data!=="&"?i:null,i!==null&&(o.memoizedState={dehydrated:i,treeContext:xs!==null?{id:Ir,overflow:Nr}:null,retryLane:536870912,hydrationErrors:null},c=b_(i),c.return=o,o.child=c,sn=o,yt=null)):i=null,i===null)throw Ss(o);return Ep(i)?o.lanes=32:o.lanes=536870912,null}var A=d.children;return d=d.fallback,y?(Rs(),y=o.mode,A=qc({mode:"hidden",children:A},y),d=li(d,y,c,null),A.return=o,d.return=o,A.sibling=d,o.child=A,d=o.child,d.memoizedState=qd(c),d.childLanes=Fd(i,w,c),o.memoizedState=$d,Ao(null,d)):(As(o),Vd(o,A))}var U=i.memoizedState;if(U!==null&&(A=U.dehydrated,A!==null)){if(b)o.flags&256?(As(o),o.flags&=-257,o=Hd(i,o,c)):o.memoizedState!==null?(Rs(),o.child=i.child,o.flags|=128,o=null):(Rs(),A=d.fallback,y=o.mode,d=qc({mode:"visible",children:d.children},y),A=li(A,y,c,null),A.flags|=2,d.return=o,A.return=o,d.sibling=A,o.child=d,mi(o,i.child,null,c),d=o.child,d.memoizedState=qd(c),d.childLanes=Fd(i,w,c),o.memoizedState=$d,o=Ao(null,d));else if(As(o),Ep(A)){if(w=A.nextSibling&&A.nextSibling.dataset,w)var W=w.dgst;w=W,d=Error(r(419)),d.stack="",d.digest=w,go({value:d,source:null,stack:null}),o=Hd(i,o,c)}else if(Mt||ta(i,o,c,!1),w=(c&i.childLanes)!==0,Mt||w){if(w=pt,w!==null&&(d=C0(w,c),d!==0&&d!==U.retryLane))throw U.retryLane=d,oi(i,d),zn(w,i,d),Bd;kp(A)||Yc(),o=Hd(i,o,c)}else kp(A)?(o.flags|=192,o.child=i.child,o=null):(i=U.treeContext,yt=hr(A.nextSibling),sn=o,Ye=!0,ws=null,ur=!1,i!==null&&w_(o,i),o=Vd(o,d.children),o.flags|=4096);return o}return y?(Rs(),A=d.fallback,y=o.mode,U=i.child,W=U.sibling,d=Yr(U,{mode:"hidden",children:d.children}),d.subtreeFlags=U.subtreeFlags&65011712,W!==null?A=Yr(W,A):(A=li(A,y,c,null),A.flags|=2),A.return=o,d.return=o,d.sibling=A,o.child=d,Ao(null,d),d=o.child,A=i.child.memoizedState,A===null?A=qd(c):(y=A.cachePool,y!==null?(U=It._currentValue,y=y.parent!==U?{parent:U,pool:U}:y):y=A_(),A={baseLanes:A.baseLanes|c,cachePool:y}),d.memoizedState=A,d.childLanes=Fd(i,w,c),o.memoizedState=$d,Ao(i.child,d)):(As(o),c=i.child,i=c.sibling,c=Yr(c,{mode:"visible",children:d.children}),c.return=o,c.sibling=null,i!==null&&(w=o.deletions,w===null?(o.deletions=[i],o.flags|=16):w.push(i)),o.child=c,o.memoizedState=null,c)}function Vd(i,o){return o=qc({mode:"visible",children:o},i.mode),o.return=i,i.child=o}function qc(i,o){return i=Vn(22,i,null,o),i.lanes=0,i}function Hd(i,o,c){return mi(o,i.child,null,c),i=Vd(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function $b(i,o,c){i.lanes|=o;var d=i.alternate;d!==null&&(d.lanes|=o),ad(i.return,o,c)}function Gd(i,o,c,d,y,b){var w=i.memoizedState;w===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:d,tail:c,tailMode:y,treeForkCount:b}:(w.isBackwards=o,w.rendering=null,w.renderingStartTime=0,w.last=d,w.tail=c,w.tailMode=y,w.treeForkCount=b)}function qb(i,o,c){var d=o.pendingProps,y=d.revealOrder,b=d.tail;d=d.children;var w=Ct.current,A=(w&2)!==0;if(A?(w=w&1|2,o.flags|=128):w&=1,R(Ct,w),on(i,o,d,c),d=Ye?mo:0,!A&&i!==null&&(i.flags&128)!==0)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&$b(i,c,o);else if(i.tag===19)$b(i,c,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(y){case"forwards":for(c=o.child,y=null;c!==null;)i=c.alternate,i!==null&&Oc(i)===null&&(y=c),c=c.sibling;c=y,c===null?(y=o.child,o.child=null):(y=c.sibling,c.sibling=null),Gd(o,!1,y,c,b,d);break;case"backwards":case"unstable_legacy-backwards":for(c=null,y=o.child,o.child=null;y!==null;){if(i=y.alternate,i!==null&&Oc(i)===null){o.child=y;break}i=y.sibling,y.sibling=c,c=y,y=i}Gd(o,!0,c,null,b,d);break;case"together":Gd(o,!1,null,null,void 0,d);break;default:o.memoizedState=null}return o.child}function rs(i,o,c){if(i!==null&&(o.dependencies=i.dependencies),Ns|=o.lanes,(c&o.childLanes)===0)if(i!==null){if(ta(i,o,c,!1),(c&o.childLanes)===0)return null}else return null;if(i!==null&&o.child!==i.child)throw Error(r(153));if(o.child!==null){for(i=o.child,c=Yr(i,i.pendingProps),o.child=c,c.return=o;i.sibling!==null;)i=i.sibling,c=c.sibling=Yr(i,i.pendingProps),c.return=o;c.sibling=null}return o.child}function Kd(i,o){return(i.lanes&o)!==0?!0:(i=i.dependencies,!!(i!==null&&wc(i)))}function BR(i,o,c){switch(o.tag){case 3:Me(o,o.stateNode.containerInfo),ks(o,It,i.memoizedState.cache),ci();break;case 27:case 5:nt(o);break;case 4:Me(o,o.stateNode.containerInfo);break;case 10:ks(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,_d(o),null;break;case 13:var d=o.memoizedState;if(d!==null)return d.dehydrated!==null?(As(o),o.flags|=128,null):(c&o.child.childLanes)!==0?Ub(i,o,c):(As(o),i=rs(i,o,c),i!==null?i.sibling:null);As(o);break;case 19:var y=(i.flags&128)!==0;if(d=(c&o.childLanes)!==0,d||(ta(i,o,c,!1),d=(c&o.childLanes)!==0),y){if(d)return qb(i,o,c);o.flags|=128}if(y=o.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),R(Ct,Ct.current),d)break;return null;case 22:return o.lanes=0,Db(i,o,c,o.pendingProps);case 24:ks(o,It,i.memoizedState.cache)}return rs(i,o,c)}function Fb(i,o,c){if(i!==null)if(i.memoizedProps!==o.pendingProps)Mt=!0;else{if(!Kd(i,c)&&(o.flags&128)===0)return Mt=!1,BR(i,o,c);Mt=(i.flags&131072)!==0}else Mt=!1,Ye&&(o.flags&1048576)!==0&&x_(o,mo,o.index);switch(o.lanes=0,o.tag){case 16:e:{var d=o.pendingProps;if(i=di(o.elementType),o.type=i,typeof i=="function")Xh(i)?(d=yi(i,d),o.tag=1,o=Pb(null,o,i,d,c)):(o.tag=0,o=Ud(null,o,i,d,c));else{if(i!=null){var y=i.$$typeof;if(y===L){o.tag=11,o=Ib(null,o,i,d,c);break e}else if(y===P){o.tag=14,o=Nb(null,o,i,d,c);break e}}throw o=Z(i)||i,Error(r(306,o,""))}}return o;case 0:return Ud(i,o,o.type,o.pendingProps,c);case 1:return d=o.type,y=yi(d,o.pendingProps),Pb(i,o,d,y,c);case 3:e:{if(Me(o,o.stateNode.containerInfo),i===null)throw Error(r(387));d=o.pendingProps;var b=o.memoizedState;y=b.element,dd(i,o),So(o,d,null,c);var w=o.memoizedState;if(d=w.cache,ks(o,It,d),d!==b.cache&&od(o,[It],c,!0),wo(),d=w.element,b.isDehydrated)if(b={element:d,isDehydrated:!1,cache:w.cache},o.updateQueue.baseState=b,o.memoizedState=b,o.flags&256){o=Bb(i,o,d,c);break e}else if(d!==y){y=or(Error(r(424)),o),go(y),o=Bb(i,o,d,c);break e}else for(i=o.stateNode.containerInfo,i.nodeType===9?i=i.body:i=i.nodeName==="HTML"?i.ownerDocument.body:i,yt=hr(i.firstChild),sn=o,Ye=!0,ws=null,ur=!0,c=D_(o,null,d,c),o.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(ci(),d===y){o=rs(i,o,c);break e}on(i,o,d,c)}o=o.child}return o;case 26:return $c(i,o),i===null?(c=ex(o.type,null,o.pendingProps,null))?o.memoizedState=c:Ye||(c=o.type,i=o.pendingProps,d=su(me.current).createElement(c),d[rn]=o,d[On]=i,ln(d,c,i),Jt(d),o.stateNode=d):o.memoizedState=ex(o.type,i.memoizedProps,o.pendingProps,i.memoizedState),null;case 27:return nt(o),i===null&&Ye&&(d=o.stateNode=Yv(o.type,o.pendingProps,me.current),sn=o,ur=!0,y=yt,js(o.type)?(Cp=y,yt=hr(d.firstChild)):yt=y),on(i,o,o.pendingProps.children,c),$c(i,o),i===null&&(o.flags|=4194304),o.child;case 5:return i===null&&Ye&&((y=d=yt)&&(d=mO(d,o.type,o.pendingProps,ur),d!==null?(o.stateNode=d,sn=o,yt=hr(d.firstChild),ur=!1,y=!0):y=!1),y||Ss(o)),nt(o),y=o.type,b=o.pendingProps,w=i!==null?i.memoizedProps:null,d=b.children,xp(y,b)?d=null:w!==null&&xp(y,w)&&(o.flags|=32),o.memoizedState!==null&&(y=vd(i,o,OR,null,null,c),Fo._currentValue=y),$c(i,o),on(i,o,d,c),o.child;case 6:return i===null&&Ye&&((i=c=yt)&&(c=gO(c,o.pendingProps,ur),c!==null?(o.stateNode=c,sn=o,yt=null,i=!0):i=!1),i||Ss(o)),null;case 13:return Ub(i,o,c);case 4:return Me(o,o.stateNode.containerInfo),d=o.pendingProps,i===null?o.child=mi(o,null,d,c):on(i,o,d,c),o.child;case 11:return Ib(i,o,o.type,o.pendingProps,c);case 7:return on(i,o,o.pendingProps,c),o.child;case 8:return on(i,o,o.pendingProps.children,c),o.child;case 12:return on(i,o,o.pendingProps.children,c),o.child;case 10:return d=o.pendingProps,ks(o,o.type,d.value),on(i,o,d.children,c),o.child;case 9:return y=o.type._context,d=o.pendingProps.children,fi(o),y=an(y),d=d(y),o.flags|=1,on(i,o,d,c),o.child;case 14:return Nb(i,o,o.type,o.pendingProps,c);case 15:return Mb(i,o,o.type,o.pendingProps,c);case 19:return qb(i,o,c);case 31:return PR(i,o,c);case 22:return Db(i,o,c,o.pendingProps);case 24:return fi(o),d=an(It),i===null?(y=ud(),y===null&&(y=pt,b=ld(),y.pooledCache=b,b.refCount++,b!==null&&(y.pooledCacheLanes|=c),y=b),o.memoizedState={parent:d,cache:y},hd(o),ks(o,It,y)):((i.lanes&c)!==0&&(dd(i,o),So(o,null,null,c),wo()),y=i.memoizedState,b=o.memoizedState,y.parent!==d?(y={parent:d,cache:d},o.memoizedState=y,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=y),ks(o,It,d)):(d=b.cache,ks(o,It,d),d!==y.cache&&od(o,[It],c,!0))),on(i,o,o.pendingProps.children,c),o.child;case 29:throw o.pendingProps}throw Error(r(156,o.tag))}function ss(i){i.flags|=4}function Zd(i,o,c,d,y){if((o=(i.mode&32)!==0)&&(o=!1),o){if(i.flags|=16777216,(y&335544128)===y)if(i.stateNode.complete)i.flags|=8192;else if(gv())i.flags|=8192;else throw pi=Cc,fd}else i.flags&=-16777217}function Vb(i,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!ix(o))if(gv())i.flags|=8192;else throw pi=Cc,fd}function Fc(i,o){o!==null&&(i.flags|=4),i.flags&16384&&(o=i.tag!==22?S0():536870912,i.lanes|=o,da|=o)}function Ro(i,o){if(!Ye)switch(i.tailMode){case"hidden":o=i.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?i.tail=null:c.sibling=null;break;case"collapsed":c=i.tail;for(var d=null;c!==null;)c.alternate!==null&&(d=c),c=c.sibling;d===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:d.sibling=null}}function _t(i){var o=i.alternate!==null&&i.alternate.child===i.child,c=0,d=0;if(o)for(var y=i.child;y!==null;)c|=y.lanes|y.childLanes,d|=y.subtreeFlags&65011712,d|=y.flags&65011712,y.return=i,y=y.sibling;else for(y=i.child;y!==null;)c|=y.lanes|y.childLanes,d|=y.subtreeFlags,d|=y.flags,y.return=i,y=y.sibling;return i.subtreeFlags|=d,i.childLanes=c,o}function UR(i,o,c){var d=o.pendingProps;switch(nd(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _t(o),null;case 1:return _t(o),null;case 3:return c=o.stateNode,d=null,i!==null&&(d=i.memoizedState.cache),o.memoizedState.cache!==d&&(o.flags|=2048),es(It),Ie(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(i===null||i.child===null)&&(ea(o)?ss(o):i===null||i.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,sd())),_t(o),null;case 26:var y=o.type,b=o.memoizedState;return i===null?(ss(o),b!==null?(_t(o),Vb(o,b)):(_t(o),Zd(o,y,null,d,c))):b?b!==i.memoizedState?(ss(o),_t(o),Vb(o,b)):(_t(o),o.flags&=-16777217):(i=i.memoizedProps,i!==d&&ss(o),_t(o),Zd(o,y,i,d,c)),null;case 27:if(at(o),c=me.current,y=o.type,i!==null&&o.stateNode!=null)i.memoizedProps!==d&&ss(o);else{if(!d){if(o.stateNode===null)throw Error(r(166));return _t(o),null}i=oe.current,ea(o)?S_(o):(i=Yv(y,d,c),o.stateNode=i,ss(o))}return _t(o),null;case 5:if(at(o),y=o.type,i!==null&&o.stateNode!=null)i.memoizedProps!==d&&ss(o);else{if(!d){if(o.stateNode===null)throw Error(r(166));return _t(o),null}if(b=oe.current,ea(o))S_(o);else{var w=su(me.current);switch(b){case 1:b=w.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:b=w.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":b=w.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":b=w.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":b=w.createElement("div"),b.innerHTML="<script><\/script>",b=b.removeChild(b.firstChild);break;case"select":b=typeof d.is=="string"?w.createElement("select",{is:d.is}):w.createElement("select"),d.multiple?b.multiple=!0:d.size&&(b.size=d.size);break;default:b=typeof d.is=="string"?w.createElement(y,{is:d.is}):w.createElement(y)}}b[rn]=o,b[On]=d;e:for(w=o.child;w!==null;){if(w.tag===5||w.tag===6)b.appendChild(w.stateNode);else if(w.tag!==4&&w.tag!==27&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===o)break e;for(;w.sibling===null;){if(w.return===null||w.return===o)break e;w=w.return}w.sibling.return=w.return,w=w.sibling}o.stateNode=b;e:switch(ln(b,y,d),y){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}d&&ss(o)}}return _t(o),Zd(o,o.type,i===null?null:i.memoizedProps,o.pendingProps,c),null;case 6:if(i&&o.stateNode!=null)i.memoizedProps!==d&&ss(o);else{if(typeof d!="string"&&o.stateNode===null)throw Error(r(166));if(i=me.current,ea(o)){if(i=o.stateNode,c=o.memoizedProps,d=null,y=sn,y!==null)switch(y.tag){case 27:case 5:d=y.memoizedProps}i[rn]=o,i=!!(i.nodeValue===c||d!==null&&d.suppressHydrationWarning===!0||Uv(i.nodeValue,c)),i||Ss(o,!0)}else i=su(i).createTextNode(d),i[rn]=o,o.stateNode=i}return _t(o),null;case 31:if(c=o.memoizedState,i===null||i.memoizedState!==null){if(d=ea(o),c!==null){if(i===null){if(!d)throw Error(r(318));if(i=o.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(557));i[rn]=o}else ci(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;_t(o),i=!1}else c=sd(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=c),i=!0;if(!i)return o.flags&256?(Gn(o),o):(Gn(o),null);if((o.flags&128)!==0)throw Error(r(558))}return _t(o),null;case 13:if(d=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(y=ea(o),d!==null&&d.dehydrated!==null){if(i===null){if(!y)throw Error(r(318));if(y=o.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(r(317));y[rn]=o}else ci(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;_t(o),y=!1}else y=sd(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=y),y=!0;if(!y)return o.flags&256?(Gn(o),o):(Gn(o),null)}return Gn(o),(o.flags&128)!==0?(o.lanes=c,o):(c=d!==null,i=i!==null&&i.memoizedState!==null,c&&(d=o.child,y=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(y=d.alternate.memoizedState.cachePool.pool),b=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(b=d.memoizedState.cachePool.pool),b!==y&&(d.flags|=2048)),c!==i&&c&&(o.child.flags|=8192),Fc(o,o.updateQueue),_t(o),null);case 4:return Ie(),i===null&&gp(o.stateNode.containerInfo),_t(o),null;case 10:return es(o.type),_t(o),null;case 19:if(F(Ct),d=o.memoizedState,d===null)return _t(o),null;if(y=(o.flags&128)!==0,b=d.rendering,b===null)if(y)Ro(d,!1);else{if(kt!==0||i!==null&&(i.flags&128)!==0)for(i=o.child;i!==null;){if(b=Oc(i),b!==null){for(o.flags|=128,Ro(d,!1),i=b.updateQueue,o.updateQueue=i,Fc(o,i),o.subtreeFlags=0,i=c,c=o.child;c!==null;)__(c,i),c=c.sibling;return R(Ct,Ct.current&1|2),Ye&&Xr(o,d.treeForkCount),o.child}i=i.sibling}d.tail!==null&&ke()>Zc&&(o.flags|=128,y=!0,Ro(d,!1),o.lanes=4194304)}else{if(!y)if(i=Oc(b),i!==null){if(o.flags|=128,y=!0,i=i.updateQueue,o.updateQueue=i,Fc(o,i),Ro(d,!0),d.tail===null&&d.tailMode==="hidden"&&!b.alternate&&!Ye)return _t(o),null}else 2*ke()-d.renderingStartTime>Zc&&c!==536870912&&(o.flags|=128,y=!0,Ro(d,!1),o.lanes=4194304);d.isBackwards?(b.sibling=o.child,o.child=b):(i=d.last,i!==null?i.sibling=b:o.child=b,d.last=b)}return d.tail!==null?(i=d.tail,d.rendering=i,d.tail=i.sibling,d.renderingStartTime=ke(),i.sibling=null,c=Ct.current,R(Ct,y?c&1|2:c&1),Ye&&Xr(o,d.treeForkCount),i):(_t(o),null);case 22:case 23:return Gn(o),yd(),d=o.memoizedState!==null,i!==null?i.memoizedState!==null!==d&&(o.flags|=8192):d&&(o.flags|=8192),d?(c&536870912)!==0&&(o.flags&128)===0&&(_t(o),o.subtreeFlags&6&&(o.flags|=8192)):_t(o),c=o.updateQueue,c!==null&&Fc(o,c.retryQueue),c=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),d=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(d=o.memoizedState.cachePool.pool),d!==c&&(o.flags|=2048),i!==null&&F(hi),null;case 24:return c=null,i!==null&&(c=i.memoizedState.cache),o.memoizedState.cache!==c&&(o.flags|=2048),es(It),_t(o),null;case 25:return null;case 30:return null}throw Error(r(156,o.tag))}function $R(i,o){switch(nd(o),o.tag){case 1:return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return es(It),Ie(),i=o.flags,(i&65536)!==0&&(i&128)===0?(o.flags=i&-65537|128,o):null;case 26:case 27:case 5:return at(o),null;case 31:if(o.memoizedState!==null){if(Gn(o),o.alternate===null)throw Error(r(340));ci()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 13:if(Gn(o),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(r(340));ci()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return F(Ct),null;case 4:return Ie(),null;case 10:return es(o.type),null;case 22:case 23:return Gn(o),yd(),i!==null&&F(hi),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 24:return es(It),null;case 25:return null;default:return null}}function Hb(i,o){switch(nd(o),o.tag){case 3:es(It),Ie();break;case 26:case 27:case 5:at(o);break;case 4:Ie();break;case 31:o.memoizedState!==null&&Gn(o);break;case 13:Gn(o);break;case 19:F(Ct);break;case 10:es(o.type);break;case 22:case 23:Gn(o),yd(),i!==null&&F(hi);break;case 24:es(It)}}function Oo(i,o){try{var c=o.updateQueue,d=c!==null?c.lastEffect:null;if(d!==null){var y=d.next;c=y;do{if((c.tag&i)===i){d=void 0;var b=c.create,w=c.inst;d=b(),w.destroy=d}c=c.next}while(c!==y)}}catch(A){lt(o,o.return,A)}}function Os(i,o,c){try{var d=o.updateQueue,y=d!==null?d.lastEffect:null;if(y!==null){var b=y.next;d=b;do{if((d.tag&i)===i){var w=d.inst,A=w.destroy;if(A!==void 0){w.destroy=void 0,y=o;var U=c,W=A;try{W()}catch(ae){lt(y,U,ae)}}}d=d.next}while(d!==b)}}catch(ae){lt(o,o.return,ae)}}function Gb(i){var o=i.updateQueue;if(o!==null){var c=i.stateNode;try{z_(o,c)}catch(d){lt(i,i.return,d)}}}function Kb(i,o,c){c.props=yi(i.type,i.memoizedProps),c.state=i.memoizedState;try{c.componentWillUnmount()}catch(d){lt(i,o,d)}}function Io(i,o){try{var c=i.ref;if(c!==null){switch(i.tag){case 26:case 27:case 5:var d=i.stateNode;break;case 30:d=i.stateNode;break;default:d=i.stateNode}typeof c=="function"?i.refCleanup=c(d):c.current=d}}catch(y){lt(i,o,y)}}function Mr(i,o){var c=i.ref,d=i.refCleanup;if(c!==null)if(typeof d=="function")try{d()}catch(y){lt(i,o,y)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(y){lt(i,o,y)}else c.current=null}function Zb(i){var o=i.type,c=i.memoizedProps,d=i.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":c.autoFocus&&d.focus();break e;case"img":c.src?d.src=c.src:c.srcSet&&(d.srcset=c.srcSet)}}catch(y){lt(i,i.return,y)}}function Qd(i,o,c){try{var d=i.stateNode;cO(d,i.type,c,o),d[On]=o}catch(y){lt(i,i.return,y)}}function Qb(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&js(i.type)||i.tag===4}function Jd(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Qb(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&js(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Yd(i,o,c){var d=i.tag;if(d===5||d===6)i=i.stateNode,o?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(i,o):(o=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,o.appendChild(i),c=c._reactRootContainer,c!=null||o.onclick!==null||(o.onclick=Qr));else if(d!==4&&(d===27&&js(i.type)&&(c=i.stateNode,o=null),i=i.child,i!==null))for(Yd(i,o,c),i=i.sibling;i!==null;)Yd(i,o,c),i=i.sibling}function Vc(i,o,c){var d=i.tag;if(d===5||d===6)i=i.stateNode,o?c.insertBefore(i,o):c.appendChild(i);else if(d!==4&&(d===27&&js(i.type)&&(c=i.stateNode),i=i.child,i!==null))for(Vc(i,o,c),i=i.sibling;i!==null;)Vc(i,o,c),i=i.sibling}function Jb(i){var o=i.stateNode,c=i.memoizedProps;try{for(var d=i.type,y=o.attributes;y.length;)o.removeAttributeNode(y[0]);ln(o,d,c),o[rn]=i,o[On]=c}catch(b){lt(i,i.return,b)}}var is=!1,Dt=!1,Xd=!1,Yb=typeof WeakSet=="function"?WeakSet:Set,Yt=null;function qR(i,o){if(i=i.containerInfo,bp=fu,i=c_(i),Hh(i)){if("selectionStart"in i)var c={start:i.selectionStart,end:i.selectionEnd};else e:{c=(c=i.ownerDocument)&&c.defaultView||window;var d=c.getSelection&&c.getSelection();if(d&&d.rangeCount!==0){c=d.anchorNode;var y=d.anchorOffset,b=d.focusNode;d=d.focusOffset;try{c.nodeType,b.nodeType}catch{c=null;break e}var w=0,A=-1,U=-1,W=0,ae=0,ue=i,te=null;t:for(;;){for(var ie;ue!==c||y!==0&&ue.nodeType!==3||(A=w+y),ue!==b||d!==0&&ue.nodeType!==3||(U=w+d),ue.nodeType===3&&(w+=ue.nodeValue.length),(ie=ue.firstChild)!==null;)te=ue,ue=ie;for(;;){if(ue===i)break t;if(te===c&&++W===y&&(A=w),te===b&&++ae===d&&(U=w),(ie=ue.nextSibling)!==null)break;ue=te,te=ue.parentNode}ue=ie}c=A===-1||U===-1?null:{start:A,end:U}}else c=null}c=c||{start:0,end:0}}else c=null;for(vp={focusedElem:i,selectionRange:c},fu=!1,Yt=o;Yt!==null;)if(o=Yt,i=o.child,(o.subtreeFlags&1028)!==0&&i!==null)i.return=o,Yt=i;else for(;Yt!==null;){switch(o=Yt,b=o.alternate,i=o.flags,o.tag){case 0:if((i&4)!==0&&(i=o.updateQueue,i=i!==null?i.events:null,i!==null))for(c=0;c<i.length;c++)y=i[c],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&b!==null){i=void 0,c=o,y=b.memoizedProps,b=b.memoizedState,d=c.stateNode;try{var be=yi(c.type,y);i=d.getSnapshotBeforeUpdate(be,b),d.__reactInternalSnapshotBeforeUpdate=i}catch(Oe){lt(c,c.return,Oe)}}break;case 3:if((i&1024)!==0){if(i=o.stateNode.containerInfo,c=i.nodeType,c===9)Sp(i);else if(c===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":Sp(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(r(163))}if(i=o.sibling,i!==null){i.return=o.return,Yt=i;break}Yt=o.return}}function Xb(i,o,c){var d=c.flags;switch(c.tag){case 0:case 11:case 15:os(i,c),d&4&&Oo(5,c);break;case 1:if(os(i,c),d&4)if(i=c.stateNode,o===null)try{i.componentDidMount()}catch(w){lt(c,c.return,w)}else{var y=yi(c.type,o.memoizedProps);o=o.memoizedState;try{i.componentDidUpdate(y,o,i.__reactInternalSnapshotBeforeUpdate)}catch(w){lt(c,c.return,w)}}d&64&&Gb(c),d&512&&Io(c,c.return);break;case 3:if(os(i,c),d&64&&(i=c.updateQueue,i!==null)){if(o=null,c.child!==null)switch(c.child.tag){case 27:case 5:o=c.child.stateNode;break;case 1:o=c.child.stateNode}try{z_(i,o)}catch(w){lt(c,c.return,w)}}break;case 27:o===null&&d&4&&Jb(c);case 26:case 5:os(i,c),o===null&&d&4&&Zb(c),d&512&&Io(c,c.return);break;case 12:os(i,c);break;case 31:os(i,c),d&4&&tv(i,c);break;case 13:os(i,c),d&4&&nv(i,c),d&64&&(i=c.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(c=YR.bind(null,c),yO(i,c))));break;case 22:if(d=c.memoizedState!==null||is,!d){o=o!==null&&o.memoizedState!==null||Dt,y=is;var b=Dt;is=d,(Dt=o)&&!b?ls(i,c,(c.subtreeFlags&8772)!==0):os(i,c),is=y,Dt=b}break;case 30:break;default:os(i,c)}}function Wb(i){var o=i.alternate;o!==null&&(i.alternate=null,Wb(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&Ah(o)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var bt=null,Nn=!1;function as(i,o,c){for(c=c.child;c!==null;)ev(i,o,c),c=c.sibling}function ev(i,o,c){if(xt&&typeof xt.onCommitFiberUnmount=="function")try{xt.onCommitFiberUnmount(Qt,c)}catch{}switch(c.tag){case 26:Dt||Mr(c,o),as(i,o,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:Dt||Mr(c,o);var d=bt,y=Nn;js(c.type)&&(bt=c.stateNode,Nn=!1),as(i,o,c),Uo(c.stateNode),bt=d,Nn=y;break;case 5:Dt||Mr(c,o);case 6:if(d=bt,y=Nn,bt=null,as(i,o,c),bt=d,Nn=y,bt!==null)if(Nn)try{(bt.nodeType===9?bt.body:bt.nodeName==="HTML"?bt.ownerDocument.body:bt).removeChild(c.stateNode)}catch(b){lt(c,o,b)}else try{bt.removeChild(c.stateNode)}catch(b){lt(c,o,b)}break;case 18:bt!==null&&(Nn?(i=bt,Gv(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,c.stateNode),xa(i)):Gv(bt,c.stateNode));break;case 4:d=bt,y=Nn,bt=c.stateNode.containerInfo,Nn=!0,as(i,o,c),bt=d,Nn=y;break;case 0:case 11:case 14:case 15:Os(2,c,o),Dt||Os(4,c,o),as(i,o,c);break;case 1:Dt||(Mr(c,o),d=c.stateNode,typeof d.componentWillUnmount=="function"&&Kb(c,o,d)),as(i,o,c);break;case 21:as(i,o,c);break;case 22:Dt=(d=Dt)||c.memoizedState!==null,as(i,o,c),Dt=d;break;default:as(i,o,c)}}function tv(i,o){if(o.memoizedState===null&&(i=o.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{xa(i)}catch(c){lt(o,o.return,c)}}}function nv(i,o){if(o.memoizedState===null&&(i=o.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{xa(i)}catch(c){lt(o,o.return,c)}}function FR(i){switch(i.tag){case 31:case 13:case 19:var o=i.stateNode;return o===null&&(o=i.stateNode=new Yb),o;case 22:return i=i.stateNode,o=i._retryCache,o===null&&(o=i._retryCache=new Yb),o;default:throw Error(r(435,i.tag))}}function Hc(i,o){var c=FR(i);o.forEach(function(d){if(!c.has(d)){c.add(d);var y=XR.bind(null,i,d);d.then(y,y)}})}function Mn(i,o){var c=o.deletions;if(c!==null)for(var d=0;d<c.length;d++){var y=c[d],b=i,w=o,A=w;e:for(;A!==null;){switch(A.tag){case 27:if(js(A.type)){bt=A.stateNode,Nn=!1;break e}break;case 5:bt=A.stateNode,Nn=!1;break e;case 3:case 4:bt=A.stateNode.containerInfo,Nn=!0;break e}A=A.return}if(bt===null)throw Error(r(160));ev(b,w,y),bt=null,Nn=!1,b=y.alternate,b!==null&&(b.return=null),y.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)rv(o,i),o=o.sibling}var Er=null;function rv(i,o){var c=i.alternate,d=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:Mn(o,i),Dn(i),d&4&&(Os(3,i,i.return),Oo(3,i),Os(5,i,i.return));break;case 1:Mn(o,i),Dn(i),d&512&&(Dt||c===null||Mr(c,c.return)),d&64&&is&&(i=i.updateQueue,i!==null&&(d=i.callbacks,d!==null&&(c=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=c===null?d:c.concat(d))));break;case 26:var y=Er;if(Mn(o,i),Dn(i),d&512&&(Dt||c===null||Mr(c,c.return)),d&4){var b=c!==null?c.memoizedState:null;if(d=i.memoizedState,c===null)if(d===null)if(i.stateNode===null){e:{d=i.type,c=i.memoizedProps,y=y.ownerDocument||y;t:switch(d){case"title":b=y.getElementsByTagName("title")[0],(!b||b[ro]||b[rn]||b.namespaceURI==="http://www.w3.org/2000/svg"||b.hasAttribute("itemprop"))&&(b=y.createElement(d),y.head.insertBefore(b,y.querySelector("head > title"))),ln(b,d,c),b[rn]=i,Jt(b),d=b;break e;case"link":var w=rx("link","href",y).get(d+(c.href||""));if(w){for(var A=0;A<w.length;A++)if(b=w[A],b.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&b.getAttribute("rel")===(c.rel==null?null:c.rel)&&b.getAttribute("title")===(c.title==null?null:c.title)&&b.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){w.splice(A,1);break t}}b=y.createElement(d),ln(b,d,c),y.head.appendChild(b);break;case"meta":if(w=rx("meta","content",y).get(d+(c.content||""))){for(A=0;A<w.length;A++)if(b=w[A],b.getAttribute("content")===(c.content==null?null:""+c.content)&&b.getAttribute("name")===(c.name==null?null:c.name)&&b.getAttribute("property")===(c.property==null?null:c.property)&&b.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&b.getAttribute("charset")===(c.charSet==null?null:c.charSet)){w.splice(A,1);break t}}b=y.createElement(d),ln(b,d,c),y.head.appendChild(b);break;default:throw Error(r(468,d))}b[rn]=i,Jt(b),d=b}i.stateNode=d}else sx(y,i.type,i.stateNode);else i.stateNode=nx(y,d,i.memoizedProps);else b!==d?(b===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):b.count--,d===null?sx(y,i.type,i.stateNode):nx(y,d,i.memoizedProps)):d===null&&i.stateNode!==null&&Qd(i,i.memoizedProps,c.memoizedProps)}break;case 27:Mn(o,i),Dn(i),d&512&&(Dt||c===null||Mr(c,c.return)),c!==null&&d&4&&Qd(i,i.memoizedProps,c.memoizedProps);break;case 5:if(Mn(o,i),Dn(i),d&512&&(Dt||c===null||Mr(c,c.return)),i.flags&32){y=i.stateNode;try{Vi(y,"")}catch(be){lt(i,i.return,be)}}d&4&&i.stateNode!=null&&(y=i.memoizedProps,Qd(i,y,c!==null?c.memoizedProps:y)),d&1024&&(Xd=!0);break;case 6:if(Mn(o,i),Dn(i),d&4){if(i.stateNode===null)throw Error(r(162));d=i.memoizedProps,c=i.stateNode;try{c.nodeValue=d}catch(be){lt(i,i.return,be)}}break;case 3:if(ou=null,y=Er,Er=iu(o.containerInfo),Mn(o,i),Er=y,Dn(i),d&4&&c!==null&&c.memoizedState.isDehydrated)try{xa(o.containerInfo)}catch(be){lt(i,i.return,be)}Xd&&(Xd=!1,sv(i));break;case 4:d=Er,Er=iu(i.stateNode.containerInfo),Mn(o,i),Dn(i),Er=d;break;case 12:Mn(o,i),Dn(i);break;case 31:Mn(o,i),Dn(i),d&4&&(d=i.updateQueue,d!==null&&(i.updateQueue=null,Hc(i,d)));break;case 13:Mn(o,i),Dn(i),i.child.flags&8192&&i.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(Kc=ke()),d&4&&(d=i.updateQueue,d!==null&&(i.updateQueue=null,Hc(i,d)));break;case 22:y=i.memoizedState!==null;var U=c!==null&&c.memoizedState!==null,W=is,ae=Dt;if(is=W||y,Dt=ae||U,Mn(o,i),Dt=ae,is=W,Dn(i),d&8192)e:for(o=i.stateNode,o._visibility=y?o._visibility&-2:o._visibility|1,y&&(c===null||U||is||Dt||_i(i)),c=null,o=i;;){if(o.tag===5||o.tag===26){if(c===null){U=c=o;try{if(b=U.stateNode,y)w=b.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none";else{A=U.stateNode;var ue=U.memoizedProps.style,te=ue!=null&&ue.hasOwnProperty("display")?ue.display:null;A.style.display=te==null||typeof te=="boolean"?"":(""+te).trim()}}catch(be){lt(U,U.return,be)}}}else if(o.tag===6){if(c===null){U=o;try{U.stateNode.nodeValue=y?"":U.memoizedProps}catch(be){lt(U,U.return,be)}}}else if(o.tag===18){if(c===null){U=o;try{var ie=U.stateNode;y?Kv(ie,!0):Kv(U.stateNode,!1)}catch(be){lt(U,U.return,be)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===i)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break e;for(;o.sibling===null;){if(o.return===null||o.return===i)break e;c===o&&(c=null),o=o.return}c===o&&(c=null),o.sibling.return=o.return,o=o.sibling}d&4&&(d=i.updateQueue,d!==null&&(c=d.retryQueue,c!==null&&(d.retryQueue=null,Hc(i,c))));break;case 19:Mn(o,i),Dn(i),d&4&&(d=i.updateQueue,d!==null&&(i.updateQueue=null,Hc(i,d)));break;case 30:break;case 21:break;default:Mn(o,i),Dn(i)}}function Dn(i){var o=i.flags;if(o&2){try{for(var c,d=i.return;d!==null;){if(Qb(d)){c=d;break}d=d.return}if(c==null)throw Error(r(160));switch(c.tag){case 27:var y=c.stateNode,b=Jd(i);Vc(i,b,y);break;case 5:var w=c.stateNode;c.flags&32&&(Vi(w,""),c.flags&=-33);var A=Jd(i);Vc(i,A,w);break;case 3:case 4:var U=c.stateNode.containerInfo,W=Jd(i);Yd(i,W,U);break;default:throw Error(r(161))}}catch(ae){lt(i,i.return,ae)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function sv(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var o=i;sv(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),i=i.sibling}}function os(i,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)Xb(i,o.alternate,o),o=o.sibling}function _i(i){for(i=i.child;i!==null;){var o=i;switch(o.tag){case 0:case 11:case 14:case 15:Os(4,o,o.return),_i(o);break;case 1:Mr(o,o.return);var c=o.stateNode;typeof c.componentWillUnmount=="function"&&Kb(o,o.return,c),_i(o);break;case 27:Uo(o.stateNode);case 26:case 5:Mr(o,o.return),_i(o);break;case 22:o.memoizedState===null&&_i(o);break;case 30:_i(o);break;default:_i(o)}i=i.sibling}}function ls(i,o,c){for(c=c&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var d=o.alternate,y=i,b=o,w=b.flags;switch(b.tag){case 0:case 11:case 15:ls(y,b,c),Oo(4,b);break;case 1:if(ls(y,b,c),d=b,y=d.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(W){lt(d,d.return,W)}if(d=b,y=d.updateQueue,y!==null){var A=d.stateNode;try{var U=y.shared.hiddenCallbacks;if(U!==null)for(y.shared.hiddenCallbacks=null,y=0;y<U.length;y++)L_(U[y],A)}catch(W){lt(d,d.return,W)}}c&&w&64&&Gb(b),Io(b,b.return);break;case 27:Jb(b);case 26:case 5:ls(y,b,c),c&&d===null&&w&4&&Zb(b),Io(b,b.return);break;case 12:ls(y,b,c);break;case 31:ls(y,b,c),c&&w&4&&tv(y,b);break;case 13:ls(y,b,c),c&&w&4&&nv(y,b);break;case 22:b.memoizedState===null&&ls(y,b,c),Io(b,b.return);break;case 30:break;default:ls(y,b,c)}o=o.sibling}}function Wd(i,o){var c=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),i=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(i=o.memoizedState.cachePool.pool),i!==c&&(i!=null&&i.refCount++,c!=null&&yo(c))}function ep(i,o){i=null,o.alternate!==null&&(i=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==i&&(o.refCount++,i!=null&&yo(i))}function Cr(i,o,c,d){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)iv(i,o,c,d),o=o.sibling}function iv(i,o,c,d){var y=o.flags;switch(o.tag){case 0:case 11:case 15:Cr(i,o,c,d),y&2048&&Oo(9,o);break;case 1:Cr(i,o,c,d);break;case 3:Cr(i,o,c,d),y&2048&&(i=null,o.alternate!==null&&(i=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==i&&(o.refCount++,i!=null&&yo(i)));break;case 12:if(y&2048){Cr(i,o,c,d),i=o.stateNode;try{var b=o.memoizedProps,w=b.id,A=b.onPostCommit;typeof A=="function"&&A(w,o.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(U){lt(o,o.return,U)}}else Cr(i,o,c,d);break;case 31:Cr(i,o,c,d);break;case 13:Cr(i,o,c,d);break;case 23:break;case 22:b=o.stateNode,w=o.alternate,o.memoizedState!==null?b._visibility&2?Cr(i,o,c,d):No(i,o):b._visibility&2?Cr(i,o,c,d):(b._visibility|=2,ua(i,o,c,d,(o.subtreeFlags&10256)!==0||!1)),y&2048&&Wd(w,o);break;case 24:Cr(i,o,c,d),y&2048&&ep(o.alternate,o);break;default:Cr(i,o,c,d)}}function ua(i,o,c,d,y){for(y=y&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var b=i,w=o,A=c,U=d,W=w.flags;switch(w.tag){case 0:case 11:case 15:ua(b,w,A,U,y),Oo(8,w);break;case 23:break;case 22:var ae=w.stateNode;w.memoizedState!==null?ae._visibility&2?ua(b,w,A,U,y):No(b,w):(ae._visibility|=2,ua(b,w,A,U,y)),y&&W&2048&&Wd(w.alternate,w);break;case 24:ua(b,w,A,U,y),y&&W&2048&&ep(w.alternate,w);break;default:ua(b,w,A,U,y)}o=o.sibling}}function No(i,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var c=i,d=o,y=d.flags;switch(d.tag){case 22:No(c,d),y&2048&&Wd(d.alternate,d);break;case 24:No(c,d),y&2048&&ep(d.alternate,d);break;default:No(c,d)}o=o.sibling}}var Mo=8192;function fa(i,o,c){if(i.subtreeFlags&Mo)for(i=i.child;i!==null;)av(i,o,c),i=i.sibling}function av(i,o,c){switch(i.tag){case 26:fa(i,o,c),i.flags&Mo&&i.memoizedState!==null&&RO(c,Er,i.memoizedState,i.memoizedProps);break;case 5:fa(i,o,c);break;case 3:case 4:var d=Er;Er=iu(i.stateNode.containerInfo),fa(i,o,c),Er=d;break;case 22:i.memoizedState===null&&(d=i.alternate,d!==null&&d.memoizedState!==null?(d=Mo,Mo=16777216,fa(i,o,c),Mo=d):fa(i,o,c));break;default:fa(i,o,c)}}function ov(i){var o=i.alternate;if(o!==null&&(i=o.child,i!==null)){o.child=null;do o=i.sibling,i.sibling=null,i=o;while(i!==null)}}function Do(i){var o=i.deletions;if((i.flags&16)!==0){if(o!==null)for(var c=0;c<o.length;c++){var d=o[c];Yt=d,cv(d,i)}ov(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)lv(i),i=i.sibling}function lv(i){switch(i.tag){case 0:case 11:case 15:Do(i),i.flags&2048&&Os(9,i,i.return);break;case 3:Do(i);break;case 12:Do(i);break;case 22:var o=i.stateNode;i.memoizedState!==null&&o._visibility&2&&(i.return===null||i.return.tag!==13)?(o._visibility&=-3,Gc(i)):Do(i);break;default:Do(i)}}function Gc(i){var o=i.deletions;if((i.flags&16)!==0){if(o!==null)for(var c=0;c<o.length;c++){var d=o[c];Yt=d,cv(d,i)}ov(i)}for(i=i.child;i!==null;){switch(o=i,o.tag){case 0:case 11:case 15:Os(8,o,o.return),Gc(o);break;case 22:c=o.stateNode,c._visibility&2&&(c._visibility&=-3,Gc(o));break;default:Gc(o)}i=i.sibling}}function cv(i,o){for(;Yt!==null;){var c=Yt;switch(c.tag){case 0:case 11:case 15:Os(8,c,o);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var d=c.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:yo(c.memoizedState.cache)}if(d=c.child,d!==null)d.return=c,Yt=d;else e:for(c=i;Yt!==null;){d=Yt;var y=d.sibling,b=d.return;if(Wb(d),d===c){Yt=null;break e}if(y!==null){y.return=b,Yt=y;break e}Yt=b}}}var VR={getCacheForType:function(i){var o=an(It),c=o.data.get(i);return c===void 0&&(c=i(),o.data.set(i,c)),c},cacheSignal:function(){return an(It).controller.signal}},HR=typeof WeakMap=="function"?WeakMap:Map,rt=0,pt=null,Ve=null,Ze=0,ot=0,Kn=null,Is=!1,ha=!1,tp=!1,cs=0,kt=0,Ns=0,bi=0,np=0,Zn=0,da=0,Lo=null,Ln=null,rp=!1,Kc=0,uv=0,Zc=1/0,Qc=null,Ms=null,Bt=0,Ds=null,pa=null,us=0,sp=0,ip=null,fv=null,zo=0,ap=null;function Qn(){return(rt&2)!==0&&Ze!==0?Ze&-Ze:B.T!==null?hp():T0()}function hv(){if(Zn===0)if((Ze&536870912)===0||Ye){var i=rc;rc<<=1,(rc&3932160)===0&&(rc=262144),Zn=i}else Zn=536870912;return i=Hn.current,i!==null&&(i.flags|=32),Zn}function zn(i,o,c){(i===pt&&(ot===2||ot===9)||i.cancelPendingCommit!==null)&&(ma(i,0),Ls(i,Ze,Zn,!1)),no(i,c),((rt&2)===0||i!==pt)&&(i===pt&&((rt&2)===0&&(bi|=c),kt===4&&Ls(i,Ze,Zn,!1)),Dr(i))}function dv(i,o,c){if((rt&6)!==0)throw Error(r(327));var d=!c&&(o&127)===0&&(o&i.expiredLanes)===0||to(i,o),y=d?ZR(i,o):lp(i,o,!0),b=d;do{if(y===0){ha&&!d&&Ls(i,o,0,!1);break}else{if(c=i.current.alternate,b&&!GR(c)){y=lp(i,o,!1),b=!1;continue}if(y===2){if(b=o,i.errorRecoveryDisabledLanes&b)var w=0;else w=i.pendingLanes&-536870913,w=w!==0?w:w&536870912?536870912:0;if(w!==0){o=w;e:{var A=i;y=Lo;var U=A.current.memoizedState.isDehydrated;if(U&&(ma(A,w).flags|=256),w=lp(A,w,!1),w!==2){if(tp&&!U){A.errorRecoveryDisabledLanes|=b,bi|=b,y=4;break e}b=Ln,Ln=y,b!==null&&(Ln===null?Ln=b:Ln.push.apply(Ln,b))}y=w}if(b=!1,y!==2)continue}}if(y===1){ma(i,0),Ls(i,o,0,!0);break}e:{switch(d=i,b=y,b){case 0:case 1:throw Error(r(345));case 4:if((o&4194048)!==o)break;case 6:Ls(d,o,Zn,!Is);break e;case 2:Ln=null;break;case 3:case 5:break;default:throw Error(r(329))}if((o&62914560)===o&&(y=Kc+300-ke(),10<y)){if(Ls(d,o,Zn,!Is),ic(d,0,!0)!==0)break e;us=o,d.timeoutHandle=Vv(pv.bind(null,d,c,Ln,Qc,rp,o,Zn,bi,da,Is,b,"Throttled",-0,0),y);break e}pv(d,c,Ln,Qc,rp,o,Zn,bi,da,Is,b,null,-0,0)}}break}while(!0);Dr(i)}function pv(i,o,c,d,y,b,w,A,U,W,ae,ue,te,ie){if(i.timeoutHandle=-1,ue=o.subtreeFlags,ue&8192||(ue&16785408)===16785408){ue={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Qr},av(o,b,ue);var be=(b&62914560)===b?Kc-ke():(b&4194048)===b?uv-ke():0;if(be=OO(ue,be),be!==null){us=b,i.cancelPendingCommit=be(wv.bind(null,i,o,b,c,d,y,w,A,U,ae,ue,null,te,ie)),Ls(i,b,w,!W);return}}wv(i,o,b,c,d,y,w,A,U)}function GR(i){for(var o=i;;){var c=o.tag;if((c===0||c===11||c===15)&&o.flags&16384&&(c=o.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var d=0;d<c.length;d++){var y=c[d],b=y.getSnapshot;y=y.value;try{if(!Fn(b(),y))return!1}catch{return!1}}if(c=o.child,o.subtreeFlags&16384&&c!==null)c.return=o,o=c;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Ls(i,o,c,d){o&=~np,o&=~bi,i.suspendedLanes|=o,i.pingedLanes&=~o,d&&(i.warmLanes|=o),d=i.expirationTimes;for(var y=o;0<y;){var b=31-dt(y),w=1<<b;d[b]=-1,y&=~w}c!==0&&k0(i,c,o)}function Jc(){return(rt&6)===0?(jo(0),!1):!0}function op(){if(Ve!==null){if(ot===0)var i=Ve.return;else i=Ve,Wr=ui=null,Sd(i),ia=null,bo=0,i=Ve;for(;i!==null;)Hb(i.alternate,i),i=i.return;Ve=null}}function ma(i,o){var c=i.timeoutHandle;c!==-1&&(i.timeoutHandle=-1,hO(c)),c=i.cancelPendingCommit,c!==null&&(i.cancelPendingCommit=null,c()),us=0,op(),pt=i,Ve=c=Yr(i.current,null),Ze=o,ot=0,Kn=null,Is=!1,ha=to(i,o),tp=!1,da=Zn=np=bi=Ns=kt=0,Ln=Lo=null,rp=!1,(o&8)!==0&&(o|=o&32);var d=i.entangledLanes;if(d!==0)for(i=i.entanglements,d&=o;0<d;){var y=31-dt(d),b=1<<y;o|=i[y],d&=~b}return cs=o,yc(),c}function mv(i,o){je=null,B.H=To,o===sa||o===Ec?(o=I_(),ot=3):o===fd?(o=I_(),ot=4):ot=o===Bd?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,Kn=o,Ve===null&&(kt=1,Bc(i,or(o,i.current)))}function gv(){var i=Hn.current;return i===null?!0:(Ze&4194048)===Ze?fr===null:(Ze&62914560)===Ze||(Ze&536870912)!==0?i===fr:!1}function yv(){var i=B.H;return B.H=To,i===null?To:i}function _v(){var i=B.A;return B.A=VR,i}function Yc(){kt=4,Is||(Ze&4194048)!==Ze&&Hn.current!==null||(ha=!0),(Ns&134217727)===0&&(bi&134217727)===0||pt===null||Ls(pt,Ze,Zn,!1)}function lp(i,o,c){var d=rt;rt|=2;var y=yv(),b=_v();(pt!==i||Ze!==o)&&(Qc=null,ma(i,o)),o=!1;var w=kt;e:do try{if(ot!==0&&Ve!==null){var A=Ve,U=Kn;switch(ot){case 8:op(),w=6;break e;case 3:case 2:case 9:case 6:Hn.current===null&&(o=!0);var W=ot;if(ot=0,Kn=null,ga(i,A,U,W),c&&ha){w=0;break e}break;default:W=ot,ot=0,Kn=null,ga(i,A,U,W)}}KR(),w=kt;break}catch(ae){mv(i,ae)}while(!0);return o&&i.shellSuspendCounter++,Wr=ui=null,rt=d,B.H=y,B.A=b,Ve===null&&(pt=null,Ze=0,yc()),w}function KR(){for(;Ve!==null;)bv(Ve)}function ZR(i,o){var c=rt;rt|=2;var d=yv(),y=_v();pt!==i||Ze!==o?(Qc=null,Zc=ke()+500,ma(i,o)):ha=to(i,o);e:do try{if(ot!==0&&Ve!==null){o=Ve;var b=Kn;t:switch(ot){case 1:ot=0,Kn=null,ga(i,o,b,1);break;case 2:case 9:if(R_(b)){ot=0,Kn=null,vv(o);break}o=function(){ot!==2&&ot!==9||pt!==i||(ot=7),Dr(i)},b.then(o,o);break e;case 3:ot=7;break e;case 4:ot=5;break e;case 7:R_(b)?(ot=0,Kn=null,vv(o)):(ot=0,Kn=null,ga(i,o,b,7));break;case 5:var w=null;switch(Ve.tag){case 26:w=Ve.memoizedState;case 5:case 27:var A=Ve;if(w?ix(w):A.stateNode.complete){ot=0,Kn=null;var U=A.sibling;if(U!==null)Ve=U;else{var W=A.return;W!==null?(Ve=W,Xc(W)):Ve=null}break t}}ot=0,Kn=null,ga(i,o,b,5);break;case 6:ot=0,Kn=null,ga(i,o,b,6);break;case 8:op(),kt=6;break e;default:throw Error(r(462))}}QR();break}catch(ae){mv(i,ae)}while(!0);return Wr=ui=null,B.H=d,B.A=y,rt=c,Ve!==null?0:(pt=null,Ze=0,yc(),kt)}function QR(){for(;Ve!==null&&!Pe();)bv(Ve)}function bv(i){var o=Fb(i.alternate,i,cs);i.memoizedProps=i.pendingProps,o===null?Xc(i):Ve=o}function vv(i){var o=i,c=o.alternate;switch(o.tag){case 15:case 0:o=jb(c,o,o.pendingProps,o.type,void 0,Ze);break;case 11:o=jb(c,o,o.pendingProps,o.type.render,o.ref,Ze);break;case 5:Sd(o);default:Hb(c,o),o=Ve=__(o,cs),o=Fb(c,o,cs)}i.memoizedProps=i.pendingProps,o===null?Xc(i):Ve=o}function ga(i,o,c,d){Wr=ui=null,Sd(o),ia=null,bo=0;var y=o.return;try{if(jR(i,y,o,c,Ze)){kt=1,Bc(i,or(c,i.current)),Ve=null;return}}catch(b){if(y!==null)throw Ve=y,b;kt=1,Bc(i,or(c,i.current)),Ve=null;return}o.flags&32768?(Ye||d===1?i=!0:ha||(Ze&536870912)!==0?i=!1:(Is=i=!0,(d===2||d===9||d===3||d===6)&&(d=Hn.current,d!==null&&d.tag===13&&(d.flags|=16384))),xv(o,i)):Xc(o)}function Xc(i){var o=i;do{if((o.flags&32768)!==0){xv(o,Is);return}i=o.return;var c=UR(o.alternate,o,cs);if(c!==null){Ve=c;return}if(o=o.sibling,o!==null){Ve=o;return}Ve=o=i}while(o!==null);kt===0&&(kt=5)}function xv(i,o){do{var c=$R(i.alternate,i);if(c!==null){c.flags&=32767,Ve=c;return}if(c=i.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!o&&(i=i.sibling,i!==null)){Ve=i;return}Ve=i=c}while(i!==null);kt=6,Ve=null}function wv(i,o,c,d,y,b,w,A,U){i.cancelPendingCommit=null;do Wc();while(Bt!==0);if((rt&6)!==0)throw Error(r(327));if(o!==null){if(o===i.current)throw Error(r(177));if(b=o.lanes|o.childLanes,b|=Jh,AA(i,c,b,w,A,U),i===pt&&(Ve=pt=null,Ze=0),pa=o,Ds=i,us=c,sp=b,ip=y,fv=d,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,WR(ge,function(){return Tv(),null})):(i.callbackNode=null,i.callbackPriority=0),d=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||d){d=B.T,B.T=null,y=G.p,G.p=2,w=rt,rt|=4;try{qR(i,o,c)}finally{rt=w,G.p=y,B.T=d}}Bt=1,Sv(),kv(),Ev()}}function Sv(){if(Bt===1){Bt=0;var i=Ds,o=pa,c=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||c){c=B.T,B.T=null;var d=G.p;G.p=2;var y=rt;rt|=4;try{rv(o,i);var b=vp,w=c_(i.containerInfo),A=b.focusedElem,U=b.selectionRange;if(w!==A&&A&&A.ownerDocument&&l_(A.ownerDocument.documentElement,A)){if(U!==null&&Hh(A)){var W=U.start,ae=U.end;if(ae===void 0&&(ae=W),"selectionStart"in A)A.selectionStart=W,A.selectionEnd=Math.min(ae,A.value.length);else{var ue=A.ownerDocument||document,te=ue&&ue.defaultView||window;if(te.getSelection){var ie=te.getSelection(),be=A.textContent.length,Oe=Math.min(U.start,be),ht=U.end===void 0?Oe:Math.min(U.end,be);!ie.extend&&Oe>ht&&(w=ht,ht=Oe,Oe=w);var K=o_(A,Oe),q=o_(A,ht);if(K&&q&&(ie.rangeCount!==1||ie.anchorNode!==K.node||ie.anchorOffset!==K.offset||ie.focusNode!==q.node||ie.focusOffset!==q.offset)){var X=ue.createRange();X.setStart(K.node,K.offset),ie.removeAllRanges(),Oe>ht?(ie.addRange(X),ie.extend(q.node,q.offset)):(X.setEnd(q.node,q.offset),ie.addRange(X))}}}}for(ue=[],ie=A;ie=ie.parentNode;)ie.nodeType===1&&ue.push({element:ie,left:ie.scrollLeft,top:ie.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<ue.length;A++){var ce=ue[A];ce.element.scrollLeft=ce.left,ce.element.scrollTop=ce.top}}fu=!!bp,vp=bp=null}finally{rt=y,G.p=d,B.T=c}}i.current=o,Bt=2}}function kv(){if(Bt===2){Bt=0;var i=Ds,o=pa,c=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||c){c=B.T,B.T=null;var d=G.p;G.p=2;var y=rt;rt|=4;try{Xb(i,o.alternate,o)}finally{rt=y,G.p=d,B.T=c}}Bt=3}}function Ev(){if(Bt===4||Bt===3){Bt=0,Le();var i=Ds,o=pa,c=us,d=fv;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?Bt=5:(Bt=0,pa=Ds=null,Cv(i,i.pendingLanes));var y=i.pendingLanes;if(y===0&&(Ms=null),Ch(c),o=o.stateNode,xt&&typeof xt.onCommitFiberRoot=="function")try{xt.onCommitFiberRoot(Qt,o,void 0,(o.current.flags&128)===128)}catch{}if(d!==null){o=B.T,y=G.p,G.p=2,B.T=null;try{for(var b=i.onRecoverableError,w=0;w<d.length;w++){var A=d[w];b(A.value,{componentStack:A.stack})}}finally{B.T=o,G.p=y}}(us&3)!==0&&Wc(),Dr(i),y=i.pendingLanes,(c&261930)!==0&&(y&42)!==0?i===ap?zo++:(zo=0,ap=i):zo=0,jo(0)}}function Cv(i,o){(i.pooledCacheLanes&=o)===0&&(o=i.pooledCache,o!=null&&(i.pooledCache=null,yo(o)))}function Wc(){return Sv(),kv(),Ev(),Tv()}function Tv(){if(Bt!==5)return!1;var i=Ds,o=sp;sp=0;var c=Ch(us),d=B.T,y=G.p;try{G.p=32>c?32:c,B.T=null,c=ip,ip=null;var b=Ds,w=us;if(Bt=0,pa=Ds=null,us=0,(rt&6)!==0)throw Error(r(331));var A=rt;if(rt|=4,lv(b.current),iv(b,b.current,w,c),rt=A,jo(0,!1),xt&&typeof xt.onPostCommitFiberRoot=="function")try{xt.onPostCommitFiberRoot(Qt,b)}catch{}return!0}finally{G.p=y,B.T=d,Cv(i,o)}}function Av(i,o,c){o=or(c,o),o=Pd(i.stateNode,o,2),i=Ts(i,o,2),i!==null&&(no(i,2),Dr(i))}function lt(i,o,c){if(i.tag===3)Av(i,i,c);else for(;o!==null;){if(o.tag===3){Av(o,i,c);break}else if(o.tag===1){var d=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(Ms===null||!Ms.has(d))){i=or(c,i),c=Rb(2),d=Ts(o,c,2),d!==null&&(Ob(c,d,o,i),no(d,2),Dr(d));break}}o=o.return}}function cp(i,o,c){var d=i.pingCache;if(d===null){d=i.pingCache=new HR;var y=new Set;d.set(o,y)}else y=d.get(o),y===void 0&&(y=new Set,d.set(o,y));y.has(c)||(tp=!0,y.add(c),i=JR.bind(null,i,o,c),o.then(i,i))}function JR(i,o,c){var d=i.pingCache;d!==null&&d.delete(o),i.pingedLanes|=i.suspendedLanes&c,i.warmLanes&=~c,pt===i&&(Ze&c)===c&&(kt===4||kt===3&&(Ze&62914560)===Ze&&300>ke()-Kc?(rt&2)===0&&ma(i,0):np|=c,da===Ze&&(da=0)),Dr(i)}function Rv(i,o){o===0&&(o=S0()),i=oi(i,o),i!==null&&(no(i,o),Dr(i))}function YR(i){var o=i.memoizedState,c=0;o!==null&&(c=o.retryLane),Rv(i,c)}function XR(i,o){var c=0;switch(i.tag){case 31:case 13:var d=i.stateNode,y=i.memoizedState;y!==null&&(c=y.retryLane);break;case 19:d=i.stateNode;break;case 22:d=i.stateNode._retryCache;break;default:throw Error(r(314))}d!==null&&d.delete(o),Rv(i,c)}function WR(i,o){return xn(i,o)}var eu=null,ya=null,up=!1,tu=!1,fp=!1,zs=0;function Dr(i){i!==ya&&i.next===null&&(ya===null?eu=ya=i:ya=ya.next=i),tu=!0,up||(up=!0,tO())}function jo(i,o){if(!fp&&tu){fp=!0;do for(var c=!1,d=eu;d!==null;){if(i!==0){var y=d.pendingLanes;if(y===0)var b=0;else{var w=d.suspendedLanes,A=d.pingedLanes;b=(1<<31-dt(42|i)+1)-1,b&=y&~(w&~A),b=b&201326741?b&201326741|1:b?b|2:0}b!==0&&(c=!0,Mv(d,b))}else b=Ze,b=ic(d,d===pt?b:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(b&3)===0||to(d,b)||(c=!0,Mv(d,b));d=d.next}while(c);fp=!1}}function eO(){Ov()}function Ov(){tu=up=!1;var i=0;zs!==0&&fO()&&(i=zs);for(var o=ke(),c=null,d=eu;d!==null;){var y=d.next,b=Iv(d,o);b===0?(d.next=null,c===null?eu=y:c.next=y,y===null&&(ya=c)):(c=d,(i!==0||(b&3)!==0)&&(tu=!0)),d=y}Bt!==0&&Bt!==5||jo(i),zs!==0&&(zs=0)}function Iv(i,o){for(var c=i.suspendedLanes,d=i.pingedLanes,y=i.expirationTimes,b=i.pendingLanes&-62914561;0<b;){var w=31-dt(b),A=1<<w,U=y[w];U===-1?((A&c)===0||(A&d)!==0)&&(y[w]=TA(A,o)):U<=o&&(i.expiredLanes|=A),b&=~A}if(o=pt,c=Ze,c=ic(i,i===o?c:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),d=i.callbackNode,c===0||i===o&&(ot===2||ot===9)||i.cancelPendingCommit!==null)return d!==null&&d!==null&&_e(d),i.callbackNode=null,i.callbackPriority=0;if((c&3)===0||to(i,c)){if(o=c&-c,o===i.callbackPriority)return o;switch(d!==null&&_e(d),Ch(c)){case 2:case 8:c=le;break;case 32:c=ge;break;case 268435456:c=Ee;break;default:c=ge}return d=Nv.bind(null,i),c=xn(c,d),i.callbackPriority=o,i.callbackNode=c,o}return d!==null&&d!==null&&_e(d),i.callbackPriority=2,i.callbackNode=null,2}function Nv(i,o){if(Bt!==0&&Bt!==5)return i.callbackNode=null,i.callbackPriority=0,null;var c=i.callbackNode;if(Wc()&&i.callbackNode!==c)return null;var d=Ze;return d=ic(i,i===pt?d:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),d===0?null:(dv(i,d,o),Iv(i,ke()),i.callbackNode!=null&&i.callbackNode===c?Nv.bind(null,i):null)}function Mv(i,o){if(Wc())return null;dv(i,o,!0)}function tO(){dO(function(){(rt&6)!==0?xn(ne,eO):Ov()})}function hp(){if(zs===0){var i=na;i===0&&(i=nc,nc<<=1,(nc&261888)===0&&(nc=256)),zs=i}return zs}function Dv(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:cc(""+i)}function Lv(i,o){var c=o.ownerDocument.createElement("input");return c.name=o.name,c.value=o.value,i.id&&c.setAttribute("form",i.id),o.parentNode.insertBefore(c,o),i=new FormData(i),c.parentNode.removeChild(c),i}function nO(i,o,c,d,y){if(o==="submit"&&c&&c.stateNode===y){var b=Dv((y[On]||null).action),w=d.submitter;w&&(o=(o=w[On]||null)?Dv(o.formAction):w.getAttribute("formAction"),o!==null&&(b=o,w=null));var A=new dc("action","action",null,d,y);i.push({event:A,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(zs!==0){var U=w?Lv(y,w):new FormData(y);Nd(c,{pending:!0,data:U,method:y.method,action:b},null,U)}}else typeof b=="function"&&(A.preventDefault(),U=w?Lv(y,w):new FormData(y),Nd(c,{pending:!0,data:U,method:y.method,action:b},b,U))},currentTarget:y}]})}}for(var dp=0;dp<Qh.length;dp++){var pp=Qh[dp],rO=pp.toLowerCase(),sO=pp[0].toUpperCase()+pp.slice(1);kr(rO,"on"+sO)}kr(h_,"onAnimationEnd"),kr(d_,"onAnimationIteration"),kr(p_,"onAnimationStart"),kr("dblclick","onDoubleClick"),kr("focusin","onFocus"),kr("focusout","onBlur"),kr(vR,"onTransitionRun"),kr(xR,"onTransitionStart"),kr(wR,"onTransitionCancel"),kr(m_,"onTransitionEnd"),qi("onMouseEnter",["mouseout","mouseover"]),qi("onMouseLeave",["mouseout","mouseover"]),qi("onPointerEnter",["pointerout","pointerover"]),qi("onPointerLeave",["pointerout","pointerover"]),ri("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ri("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ri("onBeforeInput",["compositionend","keypress","textInput","paste"]),ri("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ri("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ri("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Po="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),iO=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Po));function zv(i,o){o=(o&4)!==0;for(var c=0;c<i.length;c++){var d=i[c],y=d.event;d=d.listeners;e:{var b=void 0;if(o)for(var w=d.length-1;0<=w;w--){var A=d[w],U=A.instance,W=A.currentTarget;if(A=A.listener,U!==b&&y.isPropagationStopped())break e;b=A,y.currentTarget=W;try{b(y)}catch(ae){gc(ae)}y.currentTarget=null,b=U}else for(w=0;w<d.length;w++){if(A=d[w],U=A.instance,W=A.currentTarget,A=A.listener,U!==b&&y.isPropagationStopped())break e;b=A,y.currentTarget=W;try{b(y)}catch(ae){gc(ae)}y.currentTarget=null,b=U}}}}function He(i,o){var c=o[Th];c===void 0&&(c=o[Th]=new Set);var d=i+"__bubble";c.has(d)||(jv(o,i,2,!1),c.add(d))}function mp(i,o,c){var d=0;o&&(d|=4),jv(c,i,d,o)}var nu="_reactListening"+Math.random().toString(36).slice(2);function gp(i){if(!i[nu]){i[nu]=!0,O0.forEach(function(c){c!=="selectionchange"&&(iO.has(c)||mp(c,!1,i),mp(c,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[nu]||(o[nu]=!0,mp("selectionchange",!1,o))}}function jv(i,o,c,d){switch(hx(o)){case 2:var y=MO;break;case 8:y=DO;break;default:y=Ip}c=y.bind(null,o,c,i),y=void 0,!zh||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(y=!0),d?y!==void 0?i.addEventListener(o,c,{capture:!0,passive:y}):i.addEventListener(o,c,!0):y!==void 0?i.addEventListener(o,c,{passive:y}):i.addEventListener(o,c,!1)}function yp(i,o,c,d,y){var b=d;if((o&1)===0&&(o&2)===0&&d!==null)e:for(;;){if(d===null)return;var w=d.tag;if(w===3||w===4){var A=d.stateNode.containerInfo;if(A===y)break;if(w===4)for(w=d.return;w!==null;){var U=w.tag;if((U===3||U===4)&&w.stateNode.containerInfo===y)return;w=w.return}for(;A!==null;){if(w=Bi(A),w===null)return;if(U=w.tag,U===5||U===6||U===26||U===27){d=b=w;continue e}A=A.parentNode}}d=d.return}q0(function(){var W=b,ae=Dh(c),ue=[];e:{var te=g_.get(i);if(te!==void 0){var ie=dc,be=i;switch(i){case"keypress":if(fc(c)===0)break e;case"keydown":case"keyup":ie=XA;break;case"focusin":be="focus",ie=Uh;break;case"focusout":be="blur",ie=Uh;break;case"beforeblur":case"afterblur":ie=Uh;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ie=H0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ie=UA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ie=tR;break;case h_:case d_:case p_:ie=FA;break;case m_:ie=rR;break;case"scroll":case"scrollend":ie=PA;break;case"wheel":ie=iR;break;case"copy":case"cut":case"paste":ie=HA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ie=K0;break;case"toggle":case"beforetoggle":ie=oR}var Oe=(o&4)!==0,ht=!Oe&&(i==="scroll"||i==="scrollend"),K=Oe?te!==null?te+"Capture":null:te;Oe=[];for(var q=W,X;q!==null;){var ce=q;if(X=ce.stateNode,ce=ce.tag,ce!==5&&ce!==26&&ce!==27||X===null||K===null||(ce=io(q,K),ce!=null&&Oe.push(Bo(q,ce,X))),ht)break;q=q.return}0<Oe.length&&(te=new ie(te,be,null,c,ae),ue.push({event:te,listeners:Oe}))}}if((o&7)===0){e:{if(te=i==="mouseover"||i==="pointerover",ie=i==="mouseout"||i==="pointerout",te&&c!==Mh&&(be=c.relatedTarget||c.fromElement)&&(Bi(be)||be[Pi]))break e;if((ie||te)&&(te=ae.window===ae?ae:(te=ae.ownerDocument)?te.defaultView||te.parentWindow:window,ie?(be=c.relatedTarget||c.toElement,ie=W,be=be?Bi(be):null,be!==null&&(ht=a(be),Oe=be.tag,be!==ht||Oe!==5&&Oe!==27&&Oe!==6)&&(be=null)):(ie=null,be=W),ie!==be)){if(Oe=H0,ce="onMouseLeave",K="onMouseEnter",q="mouse",(i==="pointerout"||i==="pointerover")&&(Oe=K0,ce="onPointerLeave",K="onPointerEnter",q="pointer"),ht=ie==null?te:so(ie),X=be==null?te:so(be),te=new Oe(ce,q+"leave",ie,c,ae),te.target=ht,te.relatedTarget=X,ce=null,Bi(ae)===W&&(Oe=new Oe(K,q+"enter",be,c,ae),Oe.target=X,Oe.relatedTarget=ht,ce=Oe),ht=ce,ie&&be)t:{for(Oe=aO,K=ie,q=be,X=0,ce=K;ce;ce=Oe(ce))X++;ce=0;for(var Ce=q;Ce;Ce=Oe(Ce))ce++;for(;0<X-ce;)K=Oe(K),X--;for(;0<ce-X;)q=Oe(q),ce--;for(;X--;){if(K===q||q!==null&&K===q.alternate){Oe=K;break t}K=Oe(K),q=Oe(q)}Oe=null}else Oe=null;ie!==null&&Pv(ue,te,ie,Oe,!1),be!==null&&ht!==null&&Pv(ue,ht,be,Oe,!0)}}e:{if(te=W?so(W):window,ie=te.nodeName&&te.nodeName.toLowerCase(),ie==="select"||ie==="input"&&te.type==="file")var et=t_;else if(W0(te))if(n_)et=yR;else{et=mR;var we=pR}else ie=te.nodeName,!ie||ie.toLowerCase()!=="input"||te.type!=="checkbox"&&te.type!=="radio"?W&&Nh(W.elementType)&&(et=t_):et=gR;if(et&&(et=et(i,W))){e_(ue,et,c,ae);break e}we&&we(i,te,W),i==="focusout"&&W&&te.type==="number"&&W.memoizedProps.value!=null&&Ih(te,"number",te.value)}switch(we=W?so(W):window,i){case"focusin":(W0(we)||we.contentEditable==="true")&&(Zi=we,Gh=W,po=null);break;case"focusout":po=Gh=Zi=null;break;case"mousedown":Kh=!0;break;case"contextmenu":case"mouseup":case"dragend":Kh=!1,u_(ue,c,ae);break;case"selectionchange":if(bR)break;case"keydown":case"keyup":u_(ue,c,ae)}var Be;if(qh)e:{switch(i){case"compositionstart":var Qe="onCompositionStart";break e;case"compositionend":Qe="onCompositionEnd";break e;case"compositionupdate":Qe="onCompositionUpdate";break e}Qe=void 0}else Ki?Y0(i,c)&&(Qe="onCompositionEnd"):i==="keydown"&&c.keyCode===229&&(Qe="onCompositionStart");Qe&&(Z0&&c.locale!=="ko"&&(Ki||Qe!=="onCompositionStart"?Qe==="onCompositionEnd"&&Ki&&(Be=F0()):(vs=ae,jh="value"in vs?vs.value:vs.textContent,Ki=!0)),we=ru(W,Qe),0<we.length&&(Qe=new G0(Qe,i,null,c,ae),ue.push({event:Qe,listeners:we}),Be?Qe.data=Be:(Be=X0(c),Be!==null&&(Qe.data=Be)))),(Be=cR?uR(i,c):fR(i,c))&&(Qe=ru(W,"onBeforeInput"),0<Qe.length&&(we=new G0("onBeforeInput","beforeinput",null,c,ae),ue.push({event:we,listeners:Qe}),we.data=Be)),nO(ue,i,W,c,ae)}zv(ue,o)})}function Bo(i,o,c){return{instance:i,listener:o,currentTarget:c}}function ru(i,o){for(var c=o+"Capture",d=[];i!==null;){var y=i,b=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||b===null||(y=io(i,c),y!=null&&d.unshift(Bo(i,y,b)),y=io(i,o),y!=null&&d.push(Bo(i,y,b))),i.tag===3)return d;i=i.return}return[]}function aO(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function Pv(i,o,c,d,y){for(var b=o._reactName,w=[];c!==null&&c!==d;){var A=c,U=A.alternate,W=A.stateNode;if(A=A.tag,U!==null&&U===d)break;A!==5&&A!==26&&A!==27||W===null||(U=W,y?(W=io(c,b),W!=null&&w.unshift(Bo(c,W,U))):y||(W=io(c,b),W!=null&&w.push(Bo(c,W,U)))),c=c.return}w.length!==0&&i.push({event:o,listeners:w})}var oO=/\r\n?/g,lO=/\u0000|\uFFFD/g;function Bv(i){return(typeof i=="string"?i:""+i).replace(oO,`
`).replace(lO,"")}function Uv(i,o){return o=Bv(o),Bv(i)===o}function ft(i,o,c,d,y,b){switch(c){case"children":typeof d=="string"?o==="body"||o==="textarea"&&d===""||Vi(i,d):(typeof d=="number"||typeof d=="bigint")&&o!=="body"&&Vi(i,""+d);break;case"className":oc(i,"class",d);break;case"tabIndex":oc(i,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":oc(i,c,d);break;case"style":U0(i,d,b);break;case"data":if(o!=="object"){oc(i,"data",d);break}case"src":case"href":if(d===""&&(o!=="a"||c!=="href")){i.removeAttribute(c);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){i.removeAttribute(c);break}d=cc(""+d),i.setAttribute(c,d);break;case"action":case"formAction":if(typeof d=="function"){i.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof b=="function"&&(c==="formAction"?(o!=="input"&&ft(i,o,"name",y.name,y,null),ft(i,o,"formEncType",y.formEncType,y,null),ft(i,o,"formMethod",y.formMethod,y,null),ft(i,o,"formTarget",y.formTarget,y,null)):(ft(i,o,"encType",y.encType,y,null),ft(i,o,"method",y.method,y,null),ft(i,o,"target",y.target,y,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){i.removeAttribute(c);break}d=cc(""+d),i.setAttribute(c,d);break;case"onClick":d!=null&&(i.onclick=Qr);break;case"onScroll":d!=null&&He("scroll",i);break;case"onScrollEnd":d!=null&&He("scrollend",i);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(r(61));if(c=d.__html,c!=null){if(y.children!=null)throw Error(r(60));i.innerHTML=c}}break;case"multiple":i.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":i.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){i.removeAttribute("xlink:href");break}c=cc(""+d),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?i.setAttribute(c,""+d):i.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?i.setAttribute(c,""):i.removeAttribute(c);break;case"capture":case"download":d===!0?i.setAttribute(c,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?i.setAttribute(c,d):i.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?i.setAttribute(c,d):i.removeAttribute(c);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?i.removeAttribute(c):i.setAttribute(c,d);break;case"popover":He("beforetoggle",i),He("toggle",i),ac(i,"popover",d);break;case"xlinkActuate":Zr(i,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":Zr(i,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":Zr(i,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":Zr(i,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":Zr(i,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":Zr(i,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":Zr(i,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":Zr(i,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":Zr(i,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":ac(i,"is",d);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=zA.get(c)||c,ac(i,c,d))}}function _p(i,o,c,d,y,b){switch(c){case"style":U0(i,d,b);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(r(61));if(c=d.__html,c!=null){if(y.children!=null)throw Error(r(60));i.innerHTML=c}}break;case"children":typeof d=="string"?Vi(i,d):(typeof d=="number"||typeof d=="bigint")&&Vi(i,""+d);break;case"onScroll":d!=null&&He("scroll",i);break;case"onScrollEnd":d!=null&&He("scrollend",i);break;case"onClick":d!=null&&(i.onclick=Qr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!I0.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(y=c.endsWith("Capture"),o=c.slice(2,y?c.length-7:void 0),b=i[On]||null,b=b!=null?b[c]:null,typeof b=="function"&&i.removeEventListener(o,b,y),typeof d=="function")){typeof b!="function"&&b!==null&&(c in i?i[c]=null:i.hasAttribute(c)&&i.removeAttribute(c)),i.addEventListener(o,d,y);break e}c in i?i[c]=d:d===!0?i.setAttribute(c,""):ac(i,c,d)}}}function ln(i,o,c){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":He("error",i),He("load",i);var d=!1,y=!1,b;for(b in c)if(c.hasOwnProperty(b)){var w=c[b];if(w!=null)switch(b){case"src":d=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,o));default:ft(i,o,b,w,c,null)}}y&&ft(i,o,"srcSet",c.srcSet,c,null),d&&ft(i,o,"src",c.src,c,null);return;case"input":He("invalid",i);var A=b=w=y=null,U=null,W=null;for(d in c)if(c.hasOwnProperty(d)){var ae=c[d];if(ae!=null)switch(d){case"name":y=ae;break;case"type":w=ae;break;case"checked":U=ae;break;case"defaultChecked":W=ae;break;case"value":b=ae;break;case"defaultValue":A=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(r(137,o));break;default:ft(i,o,d,ae,c,null)}}z0(i,b,A,U,W,w,y,!1);return;case"select":He("invalid",i),d=w=b=null;for(y in c)if(c.hasOwnProperty(y)&&(A=c[y],A!=null))switch(y){case"value":b=A;break;case"defaultValue":w=A;break;case"multiple":d=A;default:ft(i,o,y,A,c,null)}o=b,c=w,i.multiple=!!d,o!=null?Fi(i,!!d,o,!1):c!=null&&Fi(i,!!d,c,!0);return;case"textarea":He("invalid",i),b=y=d=null;for(w in c)if(c.hasOwnProperty(w)&&(A=c[w],A!=null))switch(w){case"value":d=A;break;case"defaultValue":y=A;break;case"children":b=A;break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(r(91));break;default:ft(i,o,w,A,c,null)}P0(i,d,y,b);return;case"option":for(U in c)c.hasOwnProperty(U)&&(d=c[U],d!=null)&&(U==="selected"?i.selected=d&&typeof d!="function"&&typeof d!="symbol":ft(i,o,U,d,c,null));return;case"dialog":He("beforetoggle",i),He("toggle",i),He("cancel",i),He("close",i);break;case"iframe":case"object":He("load",i);break;case"video":case"audio":for(d=0;d<Po.length;d++)He(Po[d],i);break;case"image":He("error",i),He("load",i);break;case"details":He("toggle",i);break;case"embed":case"source":case"link":He("error",i),He("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(W in c)if(c.hasOwnProperty(W)&&(d=c[W],d!=null))switch(W){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,o));default:ft(i,o,W,d,c,null)}return;default:if(Nh(o)){for(ae in c)c.hasOwnProperty(ae)&&(d=c[ae],d!==void 0&&_p(i,o,ae,d,c,void 0));return}}for(A in c)c.hasOwnProperty(A)&&(d=c[A],d!=null&&ft(i,o,A,d,c,null))}function cO(i,o,c,d){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,b=null,w=null,A=null,U=null,W=null,ae=null;for(ie in c){var ue=c[ie];if(c.hasOwnProperty(ie)&&ue!=null)switch(ie){case"checked":break;case"value":break;case"defaultValue":U=ue;default:d.hasOwnProperty(ie)||ft(i,o,ie,null,d,ue)}}for(var te in d){var ie=d[te];if(ue=c[te],d.hasOwnProperty(te)&&(ie!=null||ue!=null))switch(te){case"type":b=ie;break;case"name":y=ie;break;case"checked":W=ie;break;case"defaultChecked":ae=ie;break;case"value":w=ie;break;case"defaultValue":A=ie;break;case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(r(137,o));break;default:ie!==ue&&ft(i,o,te,ie,d,ue)}}Oh(i,w,A,U,W,ae,b,y);return;case"select":ie=w=A=te=null;for(b in c)if(U=c[b],c.hasOwnProperty(b)&&U!=null)switch(b){case"value":break;case"multiple":ie=U;default:d.hasOwnProperty(b)||ft(i,o,b,null,d,U)}for(y in d)if(b=d[y],U=c[y],d.hasOwnProperty(y)&&(b!=null||U!=null))switch(y){case"value":te=b;break;case"defaultValue":A=b;break;case"multiple":w=b;default:b!==U&&ft(i,o,y,b,d,U)}o=A,c=w,d=ie,te!=null?Fi(i,!!c,te,!1):!!d!=!!c&&(o!=null?Fi(i,!!c,o,!0):Fi(i,!!c,c?[]:"",!1));return;case"textarea":ie=te=null;for(A in c)if(y=c[A],c.hasOwnProperty(A)&&y!=null&&!d.hasOwnProperty(A))switch(A){case"value":break;case"children":break;default:ft(i,o,A,null,d,y)}for(w in d)if(y=d[w],b=c[w],d.hasOwnProperty(w)&&(y!=null||b!=null))switch(w){case"value":te=y;break;case"defaultValue":ie=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(r(91));break;default:y!==b&&ft(i,o,w,y,d,b)}j0(i,te,ie);return;case"option":for(var be in c)te=c[be],c.hasOwnProperty(be)&&te!=null&&!d.hasOwnProperty(be)&&(be==="selected"?i.selected=!1:ft(i,o,be,null,d,te));for(U in d)te=d[U],ie=c[U],d.hasOwnProperty(U)&&te!==ie&&(te!=null||ie!=null)&&(U==="selected"?i.selected=te&&typeof te!="function"&&typeof te!="symbol":ft(i,o,U,te,d,ie));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Oe in c)te=c[Oe],c.hasOwnProperty(Oe)&&te!=null&&!d.hasOwnProperty(Oe)&&ft(i,o,Oe,null,d,te);for(W in d)if(te=d[W],ie=c[W],d.hasOwnProperty(W)&&te!==ie&&(te!=null||ie!=null))switch(W){case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(r(137,o));break;default:ft(i,o,W,te,d,ie)}return;default:if(Nh(o)){for(var ht in c)te=c[ht],c.hasOwnProperty(ht)&&te!==void 0&&!d.hasOwnProperty(ht)&&_p(i,o,ht,void 0,d,te);for(ae in d)te=d[ae],ie=c[ae],!d.hasOwnProperty(ae)||te===ie||te===void 0&&ie===void 0||_p(i,o,ae,te,d,ie);return}}for(var K in c)te=c[K],c.hasOwnProperty(K)&&te!=null&&!d.hasOwnProperty(K)&&ft(i,o,K,null,d,te);for(ue in d)te=d[ue],ie=c[ue],!d.hasOwnProperty(ue)||te===ie||te==null&&ie==null||ft(i,o,ue,te,d,ie)}function $v(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function uO(){if(typeof performance.getEntriesByType=="function"){for(var i=0,o=0,c=performance.getEntriesByType("resource"),d=0;d<c.length;d++){var y=c[d],b=y.transferSize,w=y.initiatorType,A=y.duration;if(b&&A&&$v(w)){for(w=0,A=y.responseEnd,d+=1;d<c.length;d++){var U=c[d],W=U.startTime;if(W>A)break;var ae=U.transferSize,ue=U.initiatorType;ae&&$v(ue)&&(U=U.responseEnd,w+=ae*(U<A?1:(A-W)/(U-W)))}if(--d,o+=8*(b+w)/(y.duration/1e3),i++,10<i)break}}if(0<i)return o/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var bp=null,vp=null;function su(i){return i.nodeType===9?i:i.ownerDocument}function qv(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Fv(i,o){if(i===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&o==="foreignObject"?0:i}function xp(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var wp=null;function fO(){var i=window.event;return i&&i.type==="popstate"?i===wp?!1:(wp=i,!0):(wp=null,!1)}var Vv=typeof setTimeout=="function"?setTimeout:void 0,hO=typeof clearTimeout=="function"?clearTimeout:void 0,Hv=typeof Promise=="function"?Promise:void 0,dO=typeof queueMicrotask=="function"?queueMicrotask:typeof Hv<"u"?function(i){return Hv.resolve(null).then(i).catch(pO)}:Vv;function pO(i){setTimeout(function(){throw i})}function js(i){return i==="head"}function Gv(i,o){var c=o,d=0;do{var y=c.nextSibling;if(i.removeChild(c),y&&y.nodeType===8)if(c=y.data,c==="/$"||c==="/&"){if(d===0){i.removeChild(y),xa(o);return}d--}else if(c==="$"||c==="$?"||c==="$~"||c==="$!"||c==="&")d++;else if(c==="html")Uo(i.ownerDocument.documentElement);else if(c==="head"){c=i.ownerDocument.head,Uo(c);for(var b=c.firstChild;b;){var w=b.nextSibling,A=b.nodeName;b[ro]||A==="SCRIPT"||A==="STYLE"||A==="LINK"&&b.rel.toLowerCase()==="stylesheet"||c.removeChild(b),b=w}}else c==="body"&&Uo(i.ownerDocument.body);c=y}while(c);xa(o)}function Kv(i,o){var c=i;i=0;do{var d=c.nextSibling;if(c.nodeType===1?o?(c._stashedDisplay=c.style.display,c.style.display="none"):(c.style.display=c._stashedDisplay||"",c.getAttribute("style")===""&&c.removeAttribute("style")):c.nodeType===3&&(o?(c._stashedText=c.nodeValue,c.nodeValue=""):c.nodeValue=c._stashedText||""),d&&d.nodeType===8)if(c=d.data,c==="/$"){if(i===0)break;i--}else c!=="$"&&c!=="$?"&&c!=="$~"&&c!=="$!"||i++;c=d}while(c)}function Sp(i){var o=i.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var c=o;switch(o=o.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":Sp(c),Ah(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}i.removeChild(c)}}function mO(i,o,c,d){for(;i.nodeType===1;){var y=c;if(i.nodeName.toLowerCase()!==o.toLowerCase()){if(!d&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(d){if(!i[ro])switch(o){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(b=i.getAttribute("rel"),b==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(b!==y.rel||i.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||i.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||i.getAttribute("title")!==(y.title==null?null:y.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(b=i.getAttribute("src"),(b!==(y.src==null?null:y.src)||i.getAttribute("type")!==(y.type==null?null:y.type)||i.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&b&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(o==="input"&&i.type==="hidden"){var b=y.name==null?null:""+y.name;if(y.type==="hidden"&&i.getAttribute("name")===b)return i}else return i;if(i=hr(i.nextSibling),i===null)break}return null}function gO(i,o,c){if(o==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!c||(i=hr(i.nextSibling),i===null))return null;return i}function Zv(i,o){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!o||(i=hr(i.nextSibling),i===null))return null;return i}function kp(i){return i.data==="$?"||i.data==="$~"}function Ep(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function yO(i,o){var c=i.ownerDocument;if(i.data==="$~")i._reactRetry=o;else if(i.data!=="$?"||c.readyState!=="loading")o();else{var d=function(){o(),c.removeEventListener("DOMContentLoaded",d)};c.addEventListener("DOMContentLoaded",d),i._reactRetry=d}}function hr(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return i}var Cp=null;function Qv(i){i=i.nextSibling;for(var o=0;i;){if(i.nodeType===8){var c=i.data;if(c==="/$"||c==="/&"){if(o===0)return hr(i.nextSibling);o--}else c!=="$"&&c!=="$!"&&c!=="$?"&&c!=="$~"&&c!=="&"||o++}i=i.nextSibling}return null}function Jv(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var c=i.data;if(c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"){if(o===0)return i;o--}else c!=="/$"&&c!=="/&"||o++}i=i.previousSibling}return null}function Yv(i,o,c){switch(o=su(c),i){case"html":if(i=o.documentElement,!i)throw Error(r(452));return i;case"head":if(i=o.head,!i)throw Error(r(453));return i;case"body":if(i=o.body,!i)throw Error(r(454));return i;default:throw Error(r(451))}}function Uo(i){for(var o=i.attributes;o.length;)i.removeAttributeNode(o[0]);Ah(i)}var dr=new Map,Xv=new Set;function iu(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var fs=G.d;G.d={f:_O,r:bO,D:vO,C:xO,L:wO,m:SO,X:EO,S:kO,M:CO};function _O(){var i=fs.f(),o=Jc();return i||o}function bO(i){var o=Ui(i);o!==null&&o.tag===5&&o.type==="form"?mb(o):fs.r(i)}var _a=typeof document>"u"?null:document;function Wv(i,o,c){var d=_a;if(d&&typeof o=="string"&&o){var y=ir(o);y='link[rel="'+i+'"][href="'+y+'"]',typeof c=="string"&&(y+='[crossorigin="'+c+'"]'),Xv.has(y)||(Xv.add(y),i={rel:i,crossOrigin:c,href:o},d.querySelector(y)===null&&(o=d.createElement("link"),ln(o,"link",i),Jt(o),d.head.appendChild(o)))}}function vO(i){fs.D(i),Wv("dns-prefetch",i,null)}function xO(i,o){fs.C(i,o),Wv("preconnect",i,o)}function wO(i,o,c){fs.L(i,o,c);var d=_a;if(d&&i&&o){var y='link[rel="preload"][as="'+ir(o)+'"]';o==="image"&&c&&c.imageSrcSet?(y+='[imagesrcset="'+ir(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(y+='[imagesizes="'+ir(c.imageSizes)+'"]')):y+='[href="'+ir(i)+'"]';var b=y;switch(o){case"style":b=ba(i);break;case"script":b=va(i)}dr.has(b)||(i=p({rel:"preload",href:o==="image"&&c&&c.imageSrcSet?void 0:i,as:o},c),dr.set(b,i),d.querySelector(y)!==null||o==="style"&&d.querySelector($o(b))||o==="script"&&d.querySelector(qo(b))||(o=d.createElement("link"),ln(o,"link",i),Jt(o),d.head.appendChild(o)))}}function SO(i,o){fs.m(i,o);var c=_a;if(c&&i){var d=o&&typeof o.as=="string"?o.as:"script",y='link[rel="modulepreload"][as="'+ir(d)+'"][href="'+ir(i)+'"]',b=y;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":b=va(i)}if(!dr.has(b)&&(i=p({rel:"modulepreload",href:i},o),dr.set(b,i),c.querySelector(y)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(qo(b)))return}d=c.createElement("link"),ln(d,"link",i),Jt(d),c.head.appendChild(d)}}}function kO(i,o,c){fs.S(i,o,c);var d=_a;if(d&&i){var y=$i(d).hoistableStyles,b=ba(i);o=o||"default";var w=y.get(b);if(!w){var A={loading:0,preload:null};if(w=d.querySelector($o(b)))A.loading=5;else{i=p({rel:"stylesheet",href:i,"data-precedence":o},c),(c=dr.get(b))&&Tp(i,c);var U=w=d.createElement("link");Jt(U),ln(U,"link",i),U._p=new Promise(function(W,ae){U.onload=W,U.onerror=ae}),U.addEventListener("load",function(){A.loading|=1}),U.addEventListener("error",function(){A.loading|=2}),A.loading|=4,au(w,o,d)}w={type:"stylesheet",instance:w,count:1,state:A},y.set(b,w)}}}function EO(i,o){fs.X(i,o);var c=_a;if(c&&i){var d=$i(c).hoistableScripts,y=va(i),b=d.get(y);b||(b=c.querySelector(qo(y)),b||(i=p({src:i,async:!0},o),(o=dr.get(y))&&Ap(i,o),b=c.createElement("script"),Jt(b),ln(b,"link",i),c.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},d.set(y,b))}}function CO(i,o){fs.M(i,o);var c=_a;if(c&&i){var d=$i(c).hoistableScripts,y=va(i),b=d.get(y);b||(b=c.querySelector(qo(y)),b||(i=p({src:i,async:!0,type:"module"},o),(o=dr.get(y))&&Ap(i,o),b=c.createElement("script"),Jt(b),ln(b,"link",i),c.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},d.set(y,b))}}function ex(i,o,c,d){var y=(y=me.current)?iu(y):null;if(!y)throw Error(r(446));switch(i){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(o=ba(c.href),c=$i(y).hoistableStyles,d=c.get(o),d||(d={type:"style",instance:null,count:0,state:null},c.set(o,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){i=ba(c.href);var b=$i(y).hoistableStyles,w=b.get(i);if(w||(y=y.ownerDocument||y,w={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},b.set(i,w),(b=y.querySelector($o(i)))&&!b._p&&(w.instance=b,w.state.loading=5),dr.has(i)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},dr.set(i,c),b||TO(y,i,c,w.state))),o&&d===null)throw Error(r(528,""));return w}if(o&&d!==null)throw Error(r(529,""));return null;case"script":return o=c.async,c=c.src,typeof c=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=va(c),c=$i(y).hoistableScripts,d=c.get(o),d||(d={type:"script",instance:null,count:0,state:null},c.set(o,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,i))}}function ba(i){return'href="'+ir(i)+'"'}function $o(i){return'link[rel="stylesheet"]['+i+"]"}function tx(i){return p({},i,{"data-precedence":i.precedence,precedence:null})}function TO(i,o,c,d){i.querySelector('link[rel="preload"][as="style"]['+o+"]")?d.loading=1:(o=i.createElement("link"),d.preload=o,o.addEventListener("load",function(){return d.loading|=1}),o.addEventListener("error",function(){return d.loading|=2}),ln(o,"link",c),Jt(o),i.head.appendChild(o))}function va(i){return'[src="'+ir(i)+'"]'}function qo(i){return"script[async]"+i}function nx(i,o,c){if(o.count++,o.instance===null)switch(o.type){case"style":var d=i.querySelector('style[data-href~="'+ir(c.href)+'"]');if(d)return o.instance=d,Jt(d),d;var y=p({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return d=(i.ownerDocument||i).createElement("style"),Jt(d),ln(d,"style",y),au(d,c.precedence,i),o.instance=d;case"stylesheet":y=ba(c.href);var b=i.querySelector($o(y));if(b)return o.state.loading|=4,o.instance=b,Jt(b),b;d=tx(c),(y=dr.get(y))&&Tp(d,y),b=(i.ownerDocument||i).createElement("link"),Jt(b);var w=b;return w._p=new Promise(function(A,U){w.onload=A,w.onerror=U}),ln(b,"link",d),o.state.loading|=4,au(b,c.precedence,i),o.instance=b;case"script":return b=va(c.src),(y=i.querySelector(qo(b)))?(o.instance=y,Jt(y),y):(d=c,(y=dr.get(b))&&(d=p({},c),Ap(d,y)),i=i.ownerDocument||i,y=i.createElement("script"),Jt(y),ln(y,"link",d),i.head.appendChild(y),o.instance=y);case"void":return null;default:throw Error(r(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(d=o.instance,o.state.loading|=4,au(d,c.precedence,i));return o.instance}function au(i,o,c){for(var d=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=d.length?d[d.length-1]:null,b=y,w=0;w<d.length;w++){var A=d[w];if(A.dataset.precedence===o)b=A;else if(b!==y)break}b?b.parentNode.insertBefore(i,b.nextSibling):(o=c.nodeType===9?c.head:c,o.insertBefore(i,o.firstChild))}function Tp(i,o){i.crossOrigin==null&&(i.crossOrigin=o.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=o.referrerPolicy),i.title==null&&(i.title=o.title)}function Ap(i,o){i.crossOrigin==null&&(i.crossOrigin=o.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=o.referrerPolicy),i.integrity==null&&(i.integrity=o.integrity)}var ou=null;function rx(i,o,c){if(ou===null){var d=new Map,y=ou=new Map;y.set(c,d)}else y=ou,d=y.get(c),d||(d=new Map,y.set(c,d));if(d.has(i))return d;for(d.set(i,null),c=c.getElementsByTagName(i),y=0;y<c.length;y++){var b=c[y];if(!(b[ro]||b[rn]||i==="link"&&b.getAttribute("rel")==="stylesheet")&&b.namespaceURI!=="http://www.w3.org/2000/svg"){var w=b.getAttribute(o)||"";w=i+w;var A=d.get(w);A?A.push(b):d.set(w,[b])}}return d}function sx(i,o,c){i=i.ownerDocument||i,i.head.insertBefore(c,o==="title"?i.querySelector("head > title"):null)}function AO(i,o,c){if(c===1||o.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;return o.rel==="stylesheet"?(i=o.disabled,typeof o.precedence=="string"&&i==null):!0;case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function ix(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function RO(i,o,c,d){if(c.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var y=ba(d.href),b=o.querySelector($o(y));if(b){o=b._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(i.count++,i=lu.bind(i),o.then(i,i)),c.state.loading|=4,c.instance=b,Jt(b);return}b=o.ownerDocument||o,d=tx(d),(y=dr.get(y))&&Tp(d,y),b=b.createElement("link"),Jt(b);var w=b;w._p=new Promise(function(A,U){w.onload=A,w.onerror=U}),ln(b,"link",d),c.instance=b}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(c,o),(o=c.state.preload)&&(c.state.loading&3)===0&&(i.count++,c=lu.bind(i),o.addEventListener("load",c),o.addEventListener("error",c))}}var Rp=0;function OO(i,o){return i.stylesheets&&i.count===0&&uu(i,i.stylesheets),0<i.count||0<i.imgCount?function(c){var d=setTimeout(function(){if(i.stylesheets&&uu(i,i.stylesheets),i.unsuspend){var b=i.unsuspend;i.unsuspend=null,b()}},6e4+o);0<i.imgBytes&&Rp===0&&(Rp=62500*uO());var y=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&uu(i,i.stylesheets),i.unsuspend)){var b=i.unsuspend;i.unsuspend=null,b()}},(i.imgBytes>Rp?50:800)+o);return i.unsuspend=c,function(){i.unsuspend=null,clearTimeout(d),clearTimeout(y)}}:null}function lu(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)uu(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var cu=null;function uu(i,o){i.stylesheets=null,i.unsuspend!==null&&(i.count++,cu=new Map,o.forEach(IO,i),cu=null,lu.call(i))}function IO(i,o){if(!(o.state.loading&4)){var c=cu.get(i);if(c)var d=c.get(null);else{c=new Map,cu.set(i,c);for(var y=i.querySelectorAll("link[data-precedence],style[data-precedence]"),b=0;b<y.length;b++){var w=y[b];(w.nodeName==="LINK"||w.getAttribute("media")!=="not all")&&(c.set(w.dataset.precedence,w),d=w)}d&&c.set(null,d)}y=o.instance,w=y.getAttribute("data-precedence"),b=c.get(w)||d,b===d&&c.set(null,y),c.set(w,y),this.count++,d=lu.bind(this),y.addEventListener("load",d),y.addEventListener("error",d),b?b.parentNode.insertBefore(y,b.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(y,i.firstChild)),o.state.loading|=4}}var Fo={$$typeof:C,Provider:null,Consumer:null,_currentValue:re,_currentValue2:re,_threadCount:0};function NO(i,o,c,d,y,b,w,A,U){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=kh(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=kh(0),this.hiddenUpdates=kh(null),this.identifierPrefix=d,this.onUncaughtError=y,this.onCaughtError=b,this.onRecoverableError=w,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=U,this.incompleteTransitions=new Map}function ax(i,o,c,d,y,b,w,A,U,W,ae,ue){return i=new NO(i,o,c,w,U,W,ae,ue,A),o=1,b===!0&&(o|=24),b=Vn(3,null,null,o),i.current=b,b.stateNode=i,o=ld(),o.refCount++,i.pooledCache=o,o.refCount++,b.memoizedState={element:d,isDehydrated:c,cache:o},hd(b),i}function ox(i){return i?(i=Yi,i):Yi}function lx(i,o,c,d,y,b){y=ox(y),d.context===null?d.context=y:d.pendingContext=y,d=Cs(o),d.payload={element:c},b=b===void 0?null:b,b!==null&&(d.callback=b),c=Ts(i,d,o),c!==null&&(zn(c,i,o),xo(c,i,o))}function cx(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var c=i.retryLane;i.retryLane=c!==0&&c<o?c:o}}function Op(i,o){cx(i,o),(i=i.alternate)&&cx(i,o)}function ux(i){if(i.tag===13||i.tag===31){var o=oi(i,67108864);o!==null&&zn(o,i,67108864),Op(i,67108864)}}function fx(i){if(i.tag===13||i.tag===31){var o=Qn();o=Eh(o);var c=oi(i,o);c!==null&&zn(c,i,o),Op(i,o)}}var fu=!0;function MO(i,o,c,d){var y=B.T;B.T=null;var b=G.p;try{G.p=2,Ip(i,o,c,d)}finally{G.p=b,B.T=y}}function DO(i,o,c,d){var y=B.T;B.T=null;var b=G.p;try{G.p=8,Ip(i,o,c,d)}finally{G.p=b,B.T=y}}function Ip(i,o,c,d){if(fu){var y=Np(d);if(y===null)yp(i,o,d,hu,c),dx(i,d);else if(zO(y,i,o,c,d))d.stopPropagation();else if(dx(i,d),o&4&&-1<LO.indexOf(i)){for(;y!==null;){var b=Ui(y);if(b!==null)switch(b.tag){case 3:if(b=b.stateNode,b.current.memoizedState.isDehydrated){var w=ni(b.pendingLanes);if(w!==0){var A=b;for(A.pendingLanes|=2,A.entangledLanes|=2;w;){var U=1<<31-dt(w);A.entanglements[1]|=U,w&=~U}Dr(b),(rt&6)===0&&(Zc=ke()+500,jo(0))}}break;case 31:case 13:A=oi(b,2),A!==null&&zn(A,b,2),Jc(),Op(b,2)}if(b=Np(d),b===null&&yp(i,o,d,hu,c),b===y)break;y=b}y!==null&&d.stopPropagation()}else yp(i,o,d,null,c)}}function Np(i){return i=Dh(i),Mp(i)}var hu=null;function Mp(i){if(hu=null,i=Bi(i),i!==null){var o=a(i);if(o===null)i=null;else{var c=o.tag;if(c===13){if(i=l(o),i!==null)return i;i=null}else if(c===31){if(i=u(o),i!==null)return i;i=null}else if(c===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null)}}return hu=i,null}function hx(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Fe()){case ne:return 2;case le:return 8;case ge:case ye:return 32;case Ee:return 268435456;default:return 32}default:return 32}}var Dp=!1,Ps=null,Bs=null,Us=null,Vo=new Map,Ho=new Map,$s=[],LO="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function dx(i,o){switch(i){case"focusin":case"focusout":Ps=null;break;case"dragenter":case"dragleave":Bs=null;break;case"mouseover":case"mouseout":Us=null;break;case"pointerover":case"pointerout":Vo.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ho.delete(o.pointerId)}}function Go(i,o,c,d,y,b){return i===null||i.nativeEvent!==b?(i={blockedOn:o,domEventName:c,eventSystemFlags:d,nativeEvent:b,targetContainers:[y]},o!==null&&(o=Ui(o),o!==null&&ux(o)),i):(i.eventSystemFlags|=d,o=i.targetContainers,y!==null&&o.indexOf(y)===-1&&o.push(y),i)}function zO(i,o,c,d,y){switch(o){case"focusin":return Ps=Go(Ps,i,o,c,d,y),!0;case"dragenter":return Bs=Go(Bs,i,o,c,d,y),!0;case"mouseover":return Us=Go(Us,i,o,c,d,y),!0;case"pointerover":var b=y.pointerId;return Vo.set(b,Go(Vo.get(b)||null,i,o,c,d,y)),!0;case"gotpointercapture":return b=y.pointerId,Ho.set(b,Go(Ho.get(b)||null,i,o,c,d,y)),!0}return!1}function px(i){var o=Bi(i.target);if(o!==null){var c=a(o);if(c!==null){if(o=c.tag,o===13){if(o=l(c),o!==null){i.blockedOn=o,A0(i.priority,function(){fx(c)});return}}else if(o===31){if(o=u(c),o!==null){i.blockedOn=o,A0(i.priority,function(){fx(c)});return}}else if(o===3&&c.stateNode.current.memoizedState.isDehydrated){i.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}i.blockedOn=null}function du(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var c=Np(i.nativeEvent);if(c===null){c=i.nativeEvent;var d=new c.constructor(c.type,c);Mh=d,c.target.dispatchEvent(d),Mh=null}else return o=Ui(c),o!==null&&ux(o),i.blockedOn=c,!1;o.shift()}return!0}function mx(i,o,c){du(i)&&c.delete(o)}function jO(){Dp=!1,Ps!==null&&du(Ps)&&(Ps=null),Bs!==null&&du(Bs)&&(Bs=null),Us!==null&&du(Us)&&(Us=null),Vo.forEach(mx),Ho.forEach(mx)}function pu(i,o){i.blockedOn===o&&(i.blockedOn=null,Dp||(Dp=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,jO)))}var mu=null;function gx(i){mu!==i&&(mu=i,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){mu===i&&(mu=null);for(var o=0;o<i.length;o+=3){var c=i[o],d=i[o+1],y=i[o+2];if(typeof d!="function"){if(Mp(d||c)===null)continue;break}var b=Ui(c);b!==null&&(i.splice(o,3),o-=3,Nd(b,{pending:!0,data:y,method:c.method,action:d},d,y))}}))}function xa(i){function o(U){return pu(U,i)}Ps!==null&&pu(Ps,i),Bs!==null&&pu(Bs,i),Us!==null&&pu(Us,i),Vo.forEach(o),Ho.forEach(o);for(var c=0;c<$s.length;c++){var d=$s[c];d.blockedOn===i&&(d.blockedOn=null)}for(;0<$s.length&&(c=$s[0],c.blockedOn===null);)px(c),c.blockedOn===null&&$s.shift();if(c=(i.ownerDocument||i).$$reactFormReplay,c!=null)for(d=0;d<c.length;d+=3){var y=c[d],b=c[d+1],w=y[On]||null;if(typeof b=="function")w||gx(c);else if(w){var A=null;if(b&&b.hasAttribute("formAction")){if(y=b,w=b[On]||null)A=w.formAction;else if(Mp(y)!==null)continue}else A=w.action;typeof A=="function"?c[d+1]=A:(c.splice(d,3),d-=3),gx(c)}}}function yx(){function i(b){b.canIntercept&&b.info==="react-transition"&&b.intercept({handler:function(){return new Promise(function(w){return y=w})},focusReset:"manual",scroll:"manual"})}function o(){y!==null&&(y(),y=null),d||setTimeout(c,20)}function c(){if(!d&&!navigation.transition){var b=navigation.currentEntry;b&&b.url!=null&&navigation.navigate(b.url,{state:b.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var d=!1,y=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(c,100),function(){d=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),y!==null&&(y(),y=null)}}}function Lp(i){this._internalRoot=i}gu.prototype.render=Lp.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(r(409));var c=o.current,d=Qn();lx(c,d,i,o,null,null)},gu.prototype.unmount=Lp.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;lx(i.current,2,null,i,null,null),Jc(),o[Pi]=null}};function gu(i){this._internalRoot=i}gu.prototype.unstable_scheduleHydration=function(i){if(i){var o=T0();i={blockedOn:null,target:i,priority:o};for(var c=0;c<$s.length&&o!==0&&o<$s[c].priority;c++);$s.splice(c,0,i),c===0&&px(i)}};var _x=e.version;if(_x!=="19.2.3")throw Error(r(527,_x,"19.2.3"));G.findDOMNode=function(i){var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(r(188)):(i=Object.keys(i).join(","),Error(r(268,i)));return i=h(o),i=i!==null?m(i):null,i=i===null?null:i.stateNode,i};var PO={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:B,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var yu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yu.isDisabled&&yu.supportsFiber)try{Qt=yu.inject(PO),xt=yu}catch{}}return Zo.createRoot=function(i,o){if(!s(i))throw Error(r(299));var c=!1,d="",y=Eb,b=Cb,w=Tb;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(d=o.identifierPrefix),o.onUncaughtError!==void 0&&(y=o.onUncaughtError),o.onCaughtError!==void 0&&(b=o.onCaughtError),o.onRecoverableError!==void 0&&(w=o.onRecoverableError)),o=ax(i,1,!1,null,null,c,d,null,y,b,w,yx),i[Pi]=o.current,gp(i),new Lp(o)},Zo.hydrateRoot=function(i,o,c){if(!s(i))throw Error(r(299));var d=!1,y="",b=Eb,w=Cb,A=Tb,U=null;return c!=null&&(c.unstable_strictMode===!0&&(d=!0),c.identifierPrefix!==void 0&&(y=c.identifierPrefix),c.onUncaughtError!==void 0&&(b=c.onUncaughtError),c.onCaughtError!==void 0&&(w=c.onCaughtError),c.onRecoverableError!==void 0&&(A=c.onRecoverableError),c.formState!==void 0&&(U=c.formState)),o=ax(i,1,!0,o,c??null,d,y,U,b,w,A,yx),o.context=ox(null),c=o.current,d=Qn(),d=Eh(d),y=Cs(d),y.callback=null,Ts(c,y,d),c=d,o.current.lanes=c,no(o,c),Dr(o),i[Pi]=o.current,gp(i),new gu(o)},Zo.version="19.2.3",Zo}var Ax;function KO(){if(Ax)return Pp.exports;Ax=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Pp.exports=GO(),Pp.exports}var ZO=KO(),Fl=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},QO={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},JO=class{#e=QO;#t=!1;setTimeoutProvider(t){this.#e=t}setTimeout(t,e){return this.#e.setTimeout(t,e)}clearTimeout(t){this.#e.clearTimeout(t)}setInterval(t,e){return this.#e.setInterval(t,e)}clearInterval(t){this.#e.clearInterval(t)}},Ci=new JO;function YO(t){setTimeout(t,0)}var qa=typeof window>"u"||"Deno"in globalThis;function gr(){}function XO(t,e){return typeof t=="function"?t(e):t}function Lm(t){return typeof t=="number"&&t>=0&&t!==1/0}function qS(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Qs(t,e){return typeof t=="function"?t(e):t}function yr(t,e){return typeof t=="function"?t(e):t}function Rx(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:a,queryKey:l,stale:u}=t;if(l){if(r){if(e.queryHash!==Zg(l,e.options))return!1}else if(!Al(e.queryKey,l))return!1}if(n!=="all"){const f=e.isActive();if(n==="active"&&!f||n==="inactive"&&f)return!1}return!(typeof u=="boolean"&&e.isStale()!==u||s&&s!==e.state.fetchStatus||a&&!a(e))}function Ox(t,e){const{exact:n,status:r,predicate:s,mutationKey:a}=t;if(a){if(!e.options.mutationKey)return!1;if(n){if(gs(e.options.mutationKey)!==gs(a))return!1}else if(!Al(e.options.mutationKey,a))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function Zg(t,e){return(e?.queryKeyHashFn||gs)(t)}function gs(t){return JSON.stringify(t,(e,n)=>jm(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function Al(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>Al(t[n],e[n])):!1}var WO=Object.prototype.hasOwnProperty;function FS(t,e){if(t===e)return t;const n=Ix(t)&&Ix(e);if(!n&&!(jm(t)&&jm(e)))return e;const s=(n?t:Object.keys(t)).length,a=n?e:Object.keys(e),l=a.length,u=n?new Array(l):{};let f=0;for(let h=0;h<l;h++){const m=n?h:a[h],p=t[m],_=e[m];if(p===_){u[m]=p,(n?h<s:WO.call(t,m))&&f++;continue}if(p===null||_===null||typeof p!="object"||typeof _!="object"){u[m]=_;continue}const g=FS(p,_);u[m]=g,g===p&&f++}return s===l&&f===s?t:u}function zm(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function Ix(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function jm(t){if(!Nx(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!Nx(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function Nx(t){return Object.prototype.toString.call(t)==="[object Object]"}function e2(t){return new Promise(e=>{Ci.setTimeout(e,t)})}function Pm(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?FS(t,e):e}function t2(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function n2(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var Qg=Symbol();function VS(t,e){return!t.queryFn&&e?.initialPromise?()=>e.initialPromise:!t.queryFn||t.queryFn===Qg?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function r2(t,e,n){let r=!1,s;return Object.defineProperty(t,"signal",{enumerable:!0,get:()=>(s??=e(),r||(r=!0,s.aborted?n():s.addEventListener("abort",n,{once:!0})),s)}),t}var s2=class extends Fl{#e;#t;#n;constructor(){super(),this.#n=t=>{if(!qa&&window.addEventListener){const e=()=>t();return window.addEventListener("visibilitychange",e,!1),()=>{window.removeEventListener("visibilitychange",e)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#n=t,this.#t?.(),this.#t=t(e=>{typeof e=="boolean"?this.setFocused(e):this.onFocus()})}setFocused(t){this.#e!==t&&(this.#e=t,this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(e=>{e(t)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},Jg=new s2;function Bm(){let t,e;const n=new Promise((s,a)=>{t=s,e=a});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}var i2=YO;function a2(){let t=[],e=0,n=u=>{u()},r=u=>{u()},s=i2;const a=u=>{e?t.push(u):s(()=>{n(u)})},l=()=>{const u=t;t=[],u.length&&s(()=>{r(()=>{u.forEach(f=>{n(f)})})})};return{batch:u=>{let f;e++;try{f=u()}finally{e--,e||l()}return f},batchCalls:u=>(...f)=>{a(()=>{u(...f)})},schedule:a,setNotifyFunction:u=>{n=u},setBatchNotifyFunction:u=>{r=u},setScheduler:u=>{s=u}}}var yn=a2(),o2=class extends Fl{#e=!0;#t;#n;constructor(){super(),this.#n=t=>{if(!qa&&window.addEventListener){const e=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",e,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",n)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#n=t,this.#t?.(),this.#t=t(this.setOnline.bind(this))}setOnline(t){this.#e!==t&&(this.#e=t,this.listeners.forEach(n=>{n(t)}))}isOnline(){return this.#e}},rf=new o2;function l2(t){return Math.min(1e3*2**t,3e4)}function HS(t){return(t??"online")==="online"?rf.isOnline():!0}var Um=class extends Error{constructor(t){super("CancelledError"),this.revert=t?.revert,this.silent=t?.silent}};function GS(t){let e=!1,n=0,r;const s=Bm(),a=()=>s.status!=="pending",l=x=>{if(!a()){const k=new Um(x);_(k),t.onCancel?.(k)}},u=()=>{e=!0},f=()=>{e=!1},h=()=>Jg.isFocused()&&(t.networkMode==="always"||rf.isOnline())&&t.canRun(),m=()=>HS(t.networkMode)&&t.canRun(),p=x=>{a()||(r?.(),s.resolve(x))},_=x=>{a()||(r?.(),s.reject(x))},g=()=>new Promise(x=>{r=k=>{(a()||h())&&x(k)},t.onPause?.()}).then(()=>{r=void 0,a()||t.onContinue?.()}),v=()=>{if(a())return;let x;const k=n===0?t.initialPromise:void 0;try{x=k??t.fn()}catch(S){x=Promise.reject(S)}Promise.resolve(x).then(p).catch(S=>{if(a())return;const T=t.retry??(qa?0:3),C=t.retryDelay??l2,L=typeof C=="function"?C(n,S):C,D=T===!0||typeof T=="number"&&n<T||typeof T=="function"&&T(n,S);if(e||!D){_(S);return}n++,t.onFail?.(n,S),e2(L).then(()=>h()?void 0:g()).then(()=>{e?_(S):v()})})};return{promise:s,status:()=>s.status,cancel:l,continue:()=>(r?.(),s),cancelRetry:u,continueRetry:f,canStart:m,start:()=>(m()?v():g().then(v),s)}}var KS=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Lm(this.gcTime)&&(this.#e=Ci.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(qa?1/0:300*1e3))}clearGcTimeout(){this.#e&&(Ci.clearTimeout(this.#e),this.#e=void 0)}},c2=class extends KS{#e;#t;#n;#r;#s;#o;#i;constructor(t){super(),this.#i=!1,this.#o=t.defaultOptions,this.setOptions(t.options),this.observers=[],this.#r=t.client,this.#n=this.#r.getQueryCache(),this.queryKey=t.queryKey,this.queryHash=t.queryHash,this.#e=Dx(this.options),this.state=t.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#s?.promise}setOptions(t){if(this.options={...this.#o,...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const e=Dx(this.options);e.data!==void 0&&(this.setState(Mx(e.data,e.dataUpdatedAt)),this.#e=e)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#n.remove(this)}setData(t,e){const n=Pm(this.state.data,t,this.options);return this.#a({data:n,type:"success",dataUpdatedAt:e?.updatedAt,manual:e?.manual}),n}setState(t,e){this.#a({type:"setState",state:t,setStateOptions:e})}cancel(t){const e=this.#s?.promise;return this.#s?.cancel(t),e?e.then(gr).catch(gr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(t=>yr(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Qg||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>Qs(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!qS(this.state.dataUpdatedAt,t)}onFocus(){this.observers.find(e=>e.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#s?.continue()}onOnline(){this.observers.find(e=>e.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#s?.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(e=>e!==t),this.observers.length||(this.#s&&(this.#i?this.#s.cancel({revert:!0}):this.#s.cancelRetry()),this.scheduleGc()),this.#n.notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#a({type:"invalidate"})}async fetch(t,e){if(this.state.fetchStatus!=="idle"&&this.#s?.status()!=="rejected"){if(this.state.data!==void 0&&e?.cancelRefetch)this.cancel({silent:!0});else if(this.#s)return this.#s.continueRetry(),this.#s.promise}if(t&&this.setOptions(t),!this.options.queryFn){const u=this.observers.find(f=>f.options.queryFn);u&&this.setOptions(u.options)}const n=new AbortController,r=u=>{Object.defineProperty(u,"signal",{enumerable:!0,get:()=>(this.#i=!0,n.signal)})},s=()=>{const u=VS(this.options,e),h=(()=>{const m={client:this.#r,queryKey:this.queryKey,meta:this.meta};return r(m),m})();return this.#i=!1,this.options.persister?this.options.persister(u,h,this):u(h)},l=(()=>{const u={fetchOptions:e,options:this.options,queryKey:this.queryKey,client:this.#r,state:this.state,fetchFn:s};return r(u),u})();this.options.behavior?.onFetch(l,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==l.fetchOptions?.meta)&&this.#a({type:"fetch",meta:l.fetchOptions?.meta}),this.#s=GS({initialPromise:e?.initialPromise,fn:l.fetchFn,onCancel:u=>{u instanceof Um&&u.revert&&this.setState({...this.#t,fetchStatus:"idle"}),n.abort()},onFail:(u,f)=>{this.#a({type:"failed",failureCount:u,error:f})},onPause:()=>{this.#a({type:"pause"})},onContinue:()=>{this.#a({type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0});try{const u=await this.#s.start();if(u===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(u),this.#n.config.onSuccess?.(u,this),this.#n.config.onSettled?.(u,this.state.error,this),u}catch(u){if(u instanceof Um){if(u.silent)return this.#s.promise;if(u.revert){if(this.state.data===void 0)throw u;return this.state.data}}throw this.#a({type:"error",error:u}),this.#n.config.onError?.(u,this),this.#n.config.onSettled?.(this.state.data,u,this),u}finally{this.scheduleGc()}}#a(t){const e=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...ZS(n.data,this.options),fetchMeta:t.meta??null};case"success":const r={...n,...Mx(t.data,t.dataUpdatedAt),dataUpdateCount:n.dataUpdateCount+1,...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=t.manual?r:void 0,r;case"error":const s=t.error;return{...n,error:s,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=e(this.state),yn.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),this.#n.notify({query:this,type:"updated",action:t})})}};function ZS(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:HS(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function Mx(t,e){return{data:t,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function Dx(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var u2=class extends Fl{constructor(t,e){super(),this.options=e,this.#e=t,this.#a=null,this.#i=Bm(),this.bindMethods(),this.setOptions(e)}#e;#t=void 0;#n=void 0;#r=void 0;#s;#o;#i;#a;#p;#m;#c;#u;#l;#f;#h=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),Lx(this.#t,this.options)?this.#d():this.updateResult(),this.#b())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return $m(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return $m(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#v(),this.#x(),this.#t.removeObserver(this)}setOptions(t){const e=this.options,n=this.#t;if(this.options=this.#e.defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof yr(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#w(),this.#t.setOptions(this.options),e._defaulted&&!zm(this.options,e)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const r=this.hasListeners();r&&zx(this.#t,n,this.options,e)&&this.#d(),this.updateResult(),r&&(this.#t!==n||yr(this.options.enabled,this.#t)!==yr(e.enabled,this.#t)||Qs(this.options.staleTime,this.#t)!==Qs(e.staleTime,this.#t))&&this.#g();const s=this.#y();r&&(this.#t!==n||yr(this.options.enabled,this.#t)!==yr(e.enabled,this.#t)||s!==this.#f)&&this.#_(s)}getOptimisticResult(t){const e=this.#e.getQueryCache().build(this.#e,t),n=this.createResult(e,t);return h2(this,n)&&(this.#r=n,this.#o=this.options,this.#s=this.#t.state),n}getCurrentResult(){return this.#r}trackResult(t,e){return new Proxy(t,{get:(n,r)=>(this.trackProp(r),e?.(r),r==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&this.#i.status==="pending"&&this.#i.reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(n,r))})}trackProp(t){this.#h.add(t)}getCurrentQuery(){return this.#t}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const e=this.#e.defaultQueryOptions(t),n=this.#e.getQueryCache().build(this.#e,e);return n.fetch().then(()=>this.createResult(n,e))}fetch(t){return this.#d({...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#r))}#d(t){this.#w();let e=this.#t.fetch(this.options,t);return t?.throwOnError||(e=e.catch(gr)),e}#g(){this.#v();const t=Qs(this.options.staleTime,this.#t);if(qa||this.#r.isStale||!Lm(t))return;const n=qS(this.#r.dataUpdatedAt,t)+1;this.#u=Ci.setTimeout(()=>{this.#r.isStale||this.updateResult()},n)}#y(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#_(t){this.#x(),this.#f=t,!(qa||yr(this.options.enabled,this.#t)===!1||!Lm(this.#f)||this.#f===0)&&(this.#l=Ci.setInterval(()=>{(this.options.refetchIntervalInBackground||Jg.isFocused())&&this.#d()},this.#f))}#b(){this.#g(),this.#_(this.#y())}#v(){this.#u&&(Ci.clearTimeout(this.#u),this.#u=void 0)}#x(){this.#l&&(Ci.clearInterval(this.#l),this.#l=void 0)}createResult(t,e){const n=this.#t,r=this.options,s=this.#r,a=this.#s,l=this.#o,f=t!==n?t.state:this.#n,{state:h}=t;let m={...h},p=!1,_;if(e._optimisticResults){const V=this.hasListeners(),H=!V&&Lx(t,e),z=V&&zx(t,n,e,r);(H||z)&&(m={...m,...ZS(h.data,t.options)}),e._optimisticResults==="isRestoring"&&(m.fetchStatus="idle")}let{error:g,errorUpdatedAt:v,status:x}=m;_=m.data;let k=!1;if(e.placeholderData!==void 0&&_===void 0&&x==="pending"){let V;s?.isPlaceholderData&&e.placeholderData===l?.placeholderData?(V=s.data,k=!0):V=typeof e.placeholderData=="function"?e.placeholderData(this.#c?.state.data,this.#c):e.placeholderData,V!==void 0&&(x="success",_=Pm(s?.data,V,e),p=!0)}if(e.select&&_!==void 0&&!k)if(s&&_===a?.data&&e.select===this.#p)_=this.#m;else try{this.#p=e.select,_=e.select(_),_=Pm(s?.data,_,e),this.#m=_,this.#a=null}catch(V){this.#a=V}this.#a&&(g=this.#a,_=this.#m,v=Date.now(),x="error");const S=m.fetchStatus==="fetching",T=x==="pending",C=x==="error",L=T&&S,D=_!==void 0,P={status:x,fetchStatus:m.fetchStatus,isPending:T,isSuccess:x==="success",isError:C,isInitialLoading:L,isLoading:L,data:_,dataUpdatedAt:m.dataUpdatedAt,error:g,errorUpdatedAt:v,failureCount:m.fetchFailureCount,failureReason:m.fetchFailureReason,errorUpdateCount:m.errorUpdateCount,isFetched:m.dataUpdateCount>0||m.errorUpdateCount>0,isFetchedAfterMount:m.dataUpdateCount>f.dataUpdateCount||m.errorUpdateCount>f.errorUpdateCount,isFetching:S,isRefetching:S&&!T,isLoadingError:C&&!D,isPaused:m.fetchStatus==="paused",isPlaceholderData:p,isRefetchError:C&&D,isStale:Yg(t,e),refetch:this.refetch,promise:this.#i,isEnabled:yr(e.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const V=Q=>{P.status==="error"?Q.reject(P.error):P.data!==void 0&&Q.resolve(P.data)},H=()=>{const Q=this.#i=P.promise=Bm();V(Q)},z=this.#i;switch(z.status){case"pending":t.queryHash===n.queryHash&&V(z);break;case"fulfilled":(P.status==="error"||P.data!==z.value)&&H();break;case"rejected":(P.status!=="error"||P.error!==z.reason)&&H();break}}return P}updateResult(){const t=this.#r,e=this.createResult(this.#t,this.options);if(this.#s=this.#t.state,this.#o=this.options,this.#s.data!==void 0&&(this.#c=this.#t),zm(e,t))return;this.#r=e;const n=()=>{if(!t)return!0;const{notifyOnChangeProps:r}=this.options,s=typeof r=="function"?r():r;if(s==="all"||!s&&!this.#h.size)return!0;const a=new Set(s??this.#h);return this.options.throwOnError&&a.add("error"),Object.keys(this.#r).some(l=>{const u=l;return this.#r[u]!==t[u]&&a.has(u)})};this.#S({listeners:n()})}#w(){const t=this.#e.getQueryCache().build(this.#e,this.options);if(t===this.#t)return;const e=this.#t;this.#t=t,this.#n=t.state,this.hasListeners()&&(e?.removeObserver(this),t.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#b()}#S(t){yn.batch(()=>{t.listeners&&this.listeners.forEach(e=>{e(this.#r)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function f2(t,e){return yr(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function Lx(t,e){return f2(t,e)||t.state.data!==void 0&&$m(t,e,e.refetchOnMount)}function $m(t,e,n){if(yr(e.enabled,t)!==!1&&Qs(e.staleTime,t)!=="static"){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&Yg(t,e)}return!1}function zx(t,e,n,r){return(t!==e||yr(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&Yg(t,n)}function Yg(t,e){return yr(e.enabled,t)!==!1&&t.isStaleByTime(Qs(e.staleTime,t))}function h2(t,e){return!zm(t.getCurrentResult(),e)}function jx(t){return{onFetch:(e,n)=>{const r=e.options,s=e.fetchOptions?.meta?.fetchMore?.direction,a=e.state.data?.pages||[],l=e.state.data?.pageParams||[];let u={pages:[],pageParams:[]},f=0;const h=async()=>{let m=!1;const p=v=>{r2(v,()=>e.signal,()=>m=!0)},_=VS(e.options,e.fetchOptions),g=async(v,x,k)=>{if(m)return Promise.reject();if(x==null&&v.pages.length)return Promise.resolve(v);const T=(()=>{const I={client:e.client,queryKey:e.queryKey,pageParam:x,direction:k?"backward":"forward",meta:e.options.meta};return p(I),I})(),C=await _(T),{maxPages:L}=e.options,D=k?n2:t2;return{pages:D(v.pages,C,L),pageParams:D(v.pageParams,x,L)}};if(s&&a.length){const v=s==="backward",x=v?d2:Px,k={pages:a,pageParams:l},S=x(r,k);u=await g(k,S,v)}else{const v=t??a.length;do{const x=f===0?l[0]??r.initialPageParam:Px(r,u);if(f>0&&x==null)break;u=await g(u,x),f++}while(f<v)}return u};e.options.persister?e.fetchFn=()=>e.options.persister?.(h,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n):e.fetchFn=h}}}function Px(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function d2(t,{pages:e,pageParams:n}){return e.length>0?t.getPreviousPageParam?.(e[0],e,n[0],n):void 0}var p2=class extends KS{#e;#t;#n;#r;constructor(t){super(),this.#e=t.client,this.mutationId=t.mutationId,this.#n=t.mutationCache,this.#t=[],this.state=t.state||m2(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){this.#t.includes(t)||(this.#t.push(t),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){this.#t=this.#t.filter(e=>e!==t),this.scheduleGc(),this.#n.notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#n.remove(this))}continue(){return this.#r?.continue()??this.execute(this.state.variables)}async execute(t){const e=()=>{this.#s({type:"continue"})},n={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#r=GS({fn:()=>this.options.mutationFn?this.options.mutationFn(t,n):Promise.reject(new Error("No mutationFn found")),onFail:(a,l)=>{this.#s({type:"failed",failureCount:a,error:l})},onPause:()=>{this.#s({type:"pause"})},onContinue:e,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#n.canRun(this)});const r=this.state.status==="pending",s=!this.#r.canStart();try{if(r)e();else{this.#s({type:"pending",variables:t,isPaused:s}),await this.#n.config.onMutate?.(t,this,n);const l=await this.options.onMutate?.(t,n);l!==this.state.context&&this.#s({type:"pending",context:l,variables:t,isPaused:s})}const a=await this.#r.start();return await this.#n.config.onSuccess?.(a,t,this.state.context,this,n),await this.options.onSuccess?.(a,t,this.state.context,n),await this.#n.config.onSettled?.(a,null,this.state.variables,this.state.context,this,n),await this.options.onSettled?.(a,null,t,this.state.context,n),this.#s({type:"success",data:a}),a}catch(a){try{await this.#n.config.onError?.(a,t,this.state.context,this,n)}catch(l){Promise.reject(l)}try{await this.options.onError?.(a,t,this.state.context,n)}catch(l){Promise.reject(l)}try{await this.#n.config.onSettled?.(void 0,a,this.state.variables,this.state.context,this,n)}catch(l){Promise.reject(l)}try{await this.options.onSettled?.(void 0,a,t,this.state.context,n)}catch(l){Promise.reject(l)}throw this.#s({type:"error",error:a}),a}finally{this.#n.runNext(this)}}#s(t){const e=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=e(this.state),yn.batch(()=>{this.#t.forEach(n=>{n.onMutationUpdate(t)}),this.#n.notify({mutation:this,type:"updated",action:t})})}};function m2(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var g2=class extends Fl{constructor(t={}){super(),this.config=t,this.#e=new Set,this.#t=new Map,this.#n=0}#e;#t;#n;build(t,e,n){const r=new p2({client:t,mutationCache:this,mutationId:++this.#n,options:t.defaultMutationOptions(e),state:n});return this.add(r),r}add(t){this.#e.add(t);const e=_u(t);if(typeof e=="string"){const n=this.#t.get(e);n?n.push(t):this.#t.set(e,[t])}this.notify({type:"added",mutation:t})}remove(t){if(this.#e.delete(t)){const e=_u(t);if(typeof e=="string"){const n=this.#t.get(e);if(n)if(n.length>1){const r=n.indexOf(t);r!==-1&&n.splice(r,1)}else n[0]===t&&this.#t.delete(e)}}this.notify({type:"removed",mutation:t})}canRun(t){const e=_u(t);if(typeof e=="string"){const r=this.#t.get(e)?.find(s=>s.state.status==="pending");return!r||r===t}else return!0}runNext(t){const e=_u(t);return typeof e=="string"?this.#t.get(e)?.find(r=>r!==t&&r.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){yn.batch(()=>{this.#e.forEach(t=>{this.notify({type:"removed",mutation:t})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(t){const e={exact:!0,...t};return this.getAll().find(n=>Ox(e,n))}findAll(t={}){return this.getAll().filter(e=>Ox(t,e))}notify(t){yn.batch(()=>{this.listeners.forEach(e=>{e(t)})})}resumePausedMutations(){const t=this.getAll().filter(e=>e.state.isPaused);return yn.batch(()=>Promise.all(t.map(e=>e.continue().catch(gr))))}};function _u(t){return t.options.scope?.id}var y2=class extends Fl{constructor(t={}){super(),this.config=t,this.#e=new Map}#e;build(t,e,n){const r=e.queryKey,s=e.queryHash??Zg(r,e);let a=this.get(s);return a||(a=new c2({client:t,queryKey:r,queryHash:s,options:t.defaultQueryOptions(e),state:n,defaultOptions:t.getQueryDefaults(r)}),this.add(a)),a}add(t){this.#e.has(t.queryHash)||(this.#e.set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const e=this.#e.get(t.queryHash);e&&(t.destroy(),e===t&&this.#e.delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){yn.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return this.#e.get(t)}getAll(){return[...this.#e.values()]}find(t){const e={exact:!0,...t};return this.getAll().find(n=>Rx(e,n))}findAll(t={}){const e=this.getAll();return Object.keys(t).length>0?e.filter(n=>Rx(t,n)):e}notify(t){yn.batch(()=>{this.listeners.forEach(e=>{e(t)})})}onFocus(){yn.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){yn.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},_2=class{#e;#t;#n;#r;#s;#o;#i;#a;constructor(t={}){this.#e=t.queryCache||new y2,this.#t=t.mutationCache||new g2,this.#n=t.defaultOptions||{},this.#r=new Map,this.#s=new Map,this.#o=0}mount(){this.#o++,this.#o===1&&(this.#i=Jg.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#a=rf.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#o--,this.#o===0&&(this.#i?.(),this.#i=void 0,this.#a?.(),this.#a=void 0)}isFetching(t){return this.#e.findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return this.#t.findAll({...t,status:"pending"}).length}getQueryData(t){const e=this.defaultQueryOptions({queryKey:t});return this.#e.get(e.queryHash)?.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=this.#e.build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(Qs(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return this.#e.findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),a=this.#e.get(r.queryHash)?.state.data,l=XO(e,a);if(l!==void 0)return this.#e.build(this,r).setData(l,{...n,manual:!0})}setQueriesData(t,e,n){return yn.batch(()=>this.#e.findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){const e=this.defaultQueryOptions({queryKey:t});return this.#e.get(e.queryHash)?.state}removeQueries(t){const e=this.#e;yn.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=this.#e;return yn.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=yn.batch(()=>this.#e.findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(gr).catch(gr)}invalidateQueries(t,e={}){return yn.batch(()=>(this.#e.findAll(t).forEach(n=>{n.invalidate()}),t?.refetchType==="none"?Promise.resolve():this.refetchQueries({...t,type:t?.refetchType??t?.type??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=yn.batch(()=>this.#e.findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let a=s.fetch(void 0,n);return n.throwOnError||(a=a.catch(gr)),s.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(r).then(gr)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=this.#e.build(this,e);return n.isStaleByTime(Qs(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(gr).catch(gr)}fetchInfiniteQuery(t){return t.behavior=jx(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(gr).catch(gr)}ensureInfiniteQueryData(t){return t.behavior=jx(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return rf.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#n}setDefaultOptions(t){this.#n=t}setQueryDefaults(t,e){this.#r.set(gs(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...this.#r.values()],n={};return e.forEach(r=>{Al(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){this.#s.set(gs(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...this.#s.values()],n={};return e.forEach(r=>{Al(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...this.#n.queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=Zg(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===Qg&&(e.enabled=!1),e}defaultMutationOptions(t){return t?._defaulted?t:{...this.#n.mutations,...t?.mutationKey&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},b2=J.createContext(void 0),v2=({client:t,children:e})=>(J.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),E.jsx(b2.Provider,{value:t,children:e})),qp={exports:{}},Fp={};var Bx;function x2(){if(Bx)return Fp;Bx=1;var t=Kf().__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;return Fp.c=function(e){return t.H.useMemoCache(e)},Fp}var Ux;function w2(){return Ux||(Ux=1,qp.exports=x2()),qp.exports}var it=w2();class Ga{}class Fa extends Ga{constructor(e,n){super(),this.collection=e,this.alias=n,this.type="collectionRef"}}class br extends Ga{constructor(e,n){super(),this.query=e,this.alias=n,this.type="queryRef"}}class An extends Ga{constructor(e){super(),this.path=e,this.type="ref"}}class Bn extends Ga{constructor(e){super(),this.value=e,this.type="val"}}class xr extends Ga{constructor(e,n){super(),this.name=e,this.args=n,this.type="func"}}class QS extends Ga{constructor(e,n){super(),this.name=e,this.args=n,this.type="agg"}}function Xg(t){return t instanceof QS||t instanceof xr||t instanceof An||t instanceof Bn}function Wg(t){return typeof t=="object"&&"expression"in t?t.expression:t}function $x(t){return typeof t=="object"&&"expression"in t?t.expression:t}function qx(t){return typeof t=="object"&&"expression"in t&&t.residual===!0}function S2(t){return{expression:t,residual:!0}}function k2(t,e){if(t.from.alias===e)return t.from;for(const n of t.join||[])if(n.from.alias===e)return n.from}function Rl(t,e,n){if(e.path.length!==0){if(e.path.length===1){const r=e.path[0];if(t.select){const s=t.select[r];if(s&&s.type==="ref")return Rl(t,s,n)}return{collection:n,path:[r]}}if(e.path.length>1){const[r,...s]=e.path,a=k2(t,r);return a?a.type==="queryRef"?Rl(a.query,new An(s),n):{collection:a.collection,path:s}:void 0}}}class nr extends Error{constructor(e){super(e),this.name="TanStackDBError"}}class Fx extends nr{constructor(e,n,r){const s=`${e==="insert"?"Insert":"Update"} validation failed: ${n.map(a=>`
- ${a.message} - path: ${a.path}`).join("")}`;super(r||s),this.name="SchemaValidationError",this.type=e,this.issues=n}}class Vl extends nr{constructor(e){super(e),this.name="CollectionConfigurationError"}}class E2 extends Vl{constructor(){super("Collection requires a config")}}class C2 extends Vl{constructor(){super("Collection requires a sync config")}}class T2 extends Vl{constructor(){super("Schema must implement the standard-schema interface")}}class Vx extends Vl{constructor(){super("Schema validation must be synchronous")}}class Hl extends nr{constructor(e){super(e),this.name="CollectionStateError"}}class A2 extends Hl{constructor(e,n){super(`Cannot perform ${e} on collection "${n}" - collection is in error state. Try calling cleanup() and restarting the collection.`)}}class R2 extends Hl{constructor(e,n,r){super(`Invalid collection status transition from "${e}" to "${n}" for collection "${r}"`)}}class O2 extends Hl{constructor(){super("Collection is in error state")}}class I2 extends Hl{constructor(){super("Active subscribers count is negative - this should never happen")}}class qr extends nr{constructor(e){super(e),this.name="CollectionOperationError"}}class N2 extends qr{constructor(e){super(`An object was created without a defined key: ${JSON.stringify(e)}`)}}class M2 extends qr{constructor(e,n){const r=e===null?"null":typeof e;super(`getKey returned an invalid key type. Expected string or number, but got ${r}: ${JSON.stringify(e)}. Item: ${JSON.stringify(n)}`)}}class D2 extends qr{constructor(e){super(`Cannot insert document with ID "${e}" because it already exists in the collection`)}}class L2 extends qr{constructor(e,n,r){const s=`Cannot insert document with key "${e}" from sync because it already exists in the collection "${n}"`;r?.hasCustomGetKey&&r.hasJoins?super(`${s}. This collection uses a custom getKey with joined queries. Joined queries can produce multiple rows with the same key when relationships are not 1:1. Consider: (1) using a composite key in your getKey function (e.g., \`\${item.key1}-\${item.key2}\`), (2) ensuring your join produces unique rows per key, or (3) removing the custom getKey to use the default composite key behavior.`):super(s)}}class z2 extends qr{constructor(){super("The first argument to update is missing")}}class j2 extends qr{constructor(){super("No keys were passed to update")}}class P2 extends qr{constructor(e){super(`The key "${e}" was passed to update but an object for this key was not found in the collection`)}}class B2 extends qr{constructor(e,n){super(`Updating the key of an item is not allowed. Original key: "${e}", Attempted new key: "${n}". Please delete the old item and create a new one if a key change is necessary.`)}}class U2 extends qr{constructor(){super("No keys were passed to delete")}}class $2 extends qr{constructor(e){super(`Collection.delete was called with key '${e}' but there is no item in the collection with this key`)}}class ey extends nr{constructor(e){super(e),this.name="MissingHandlerError"}}class q2 extends ey{constructor(){super("Collection.insert called directly (not within an explicit transaction) but no 'onInsert' handler is configured.")}}class F2 extends ey{constructor(){super("Collection.update called directly (not within an explicit transaction) but no 'onUpdate' handler is configured.")}}class V2 extends ey{constructor(){super("Collection.delete called directly (not within an explicit transaction) but no 'onDelete' handler is configured.")}}class Ys extends nr{constructor(e){super(e),this.name="TransactionError"}}class H2 extends Ys{constructor(){super("mutationFn is required when creating a transaction")}}class G2 extends Ys{constructor(){super("You can no longer call .mutate() as the transaction is no longer pending")}}class K2 extends Ys{constructor(){super("You can no longer call .rollback() as the transaction is already completed")}}class Z2 extends Ys{constructor(){super("You can no longer call .commit() as the transaction is no longer pending")}}class Hx extends Ys{constructor(){super("No pending sync transaction to write to")}}class Gx extends Ys{constructor(){super("The pending sync transaction is already committed, you can't still write to it.")}}class Q2 extends Ys{constructor(){super("No pending sync transaction to commit")}}class J2 extends Ys{constructor(){super("The pending sync transaction is already committed, you can't commit it again.")}}class Ka extends nr{constructor(e){super(e),this.name="QueryBuilderError"}}class Y2 extends Ka{constructor(e){super(`Only one source is allowed in the ${e}`)}}class X2 extends Ka{constructor(e){super(`A sub query passed to a ${e} must have a from clause itself`)}}class W2 extends Ka{constructor(e){super(`Invalid source for live query: The value provided for alias "${e}" is not a Collection or subquery. Live queries only accept Collection instances or subqueries. Please ensure you're passing a valid Collection or QueryBuilder, not a plain array or other data type.`)}}class bu extends Ka{constructor(e,n){super(`Invalid source for ${e}: Expected an object with a single key-value pair like { alias: collection }. For example: .from({ todos: todosCollection }). Got: ${n}`)}}class eI extends Ka{constructor(){super("Join condition must be an equality expression")}}class tI extends Ka{constructor(){super("Query must have a from clause")}}class rr extends nr{constructor(e){super(e),this.name="QueryCompilationError"}}class nI extends rr{constructor(){super("DISTINCT requires a SELECT clause.")}}class rI extends rr{constructor(){super("HAVING clause requires GROUP BY clause")}}class sI extends rr{constructor(){super("LIMIT and OFFSET require an ORDER BY clause to ensure deterministic results")}}class JS extends rr{constructor(e,n,r){const s=n?`alias "${e}" (collection "${n}")`:`collection "${e}"`,a=r?.length?`. Available keys: ${r.join(", ")}`:"";super(`Input for ${s} not found in inputs map${a}`)}}class iI extends rr{constructor(e,n){super(`Subquery uses alias "${e}" which is already used in the parent query. Each alias must be unique across parent and subquery contexts. Parent query aliases: ${n.join(", ")}. Please rename "${e}" in either the parent query or subquery to avoid conflicts.`)}}class aI extends rr{constructor(e){super(`Unsupported FROM type: ${e}`)}}class oI extends rr{constructor(e){super(`Unknown expression type: ${e}`)}}class lI extends rr{constructor(){super("Reference path cannot be empty")}}class cI extends rr{constructor(e){super(`Unknown function: ${e}`)}}class Kx extends rr{constructor(e){super(`Collection "${e}" not found during compilation of join`)}}class Li extends nr{constructor(e){super(e),this.name="JoinError"}}class uI extends Li{constructor(e){super(`Unsupported join type: ${e}`)}}class fI extends Li{constructor(e){super(`Invalid join condition: both expressions refer to the same source "${e}"`)}}class hI extends Li{constructor(){super("Invalid join condition: expressions must reference source aliases")}}class dI extends Li{constructor(e){super(`Invalid join condition: left expression refers to an unavailable source "${e}"`)}}class pI extends Li{constructor(e){super(`Invalid join condition: right expression does not refer to the joined source "${e}"`)}}class mI extends Li{constructor(){super("Invalid join condition")}}class gI extends Li{constructor(e){super(`Unsupported join source type: ${e}`)}}class Zf extends nr{constructor(e){super(e),this.name="GroupByError"}}class yI extends Zf{constructor(e){super(`Non-aggregate expression '${e}' in SELECT must also appear in GROUP BY clause`)}}class _I extends Zf{constructor(e){super(`Unsupported aggregate function: ${e}`)}}class bI extends Zf{constructor(e){super(`Aggregate function in HAVING clause must also be in SELECT clause: ${e}`)}}class vI extends Zf{constructor(e){super(`Unknown expression type in HAVING clause: ${e}`)}}class Zx extends nr{constructor(e,n){const r=n instanceof Error?n.message:String(n);super(`Collection "${e}" sync cleanup function threw an error: ${r}`),this.name="SyncCleanupError"}}class xI extends nr{constructor(e){super(e),this.name="QueryOptimizerError"}}class wI extends xI{constructor(){super("Cannot combine empty expression list")}}class SI extends rr{constructor(e,n,r,s){super(`Internal error: subscription for alias '${e}' (remapped from '${n}', collection '${r}') is missing in join pipeline. Available aliases: ${s.join(", ")}. This indicates a bug in alias tracking.`)}}class kI extends rr{constructor(e){super(`Internal error: compiler returned aliases without inputs: ${e.join(", ")}. This indicates a bug in query compilation. Please report this issue.`)}}class EI extends rr{constructor(){super("setWindow() can only be called on collections with an ORDER BY clause. Add .orderBy() to your query to enable window movement.")}}const Vp=new WeakMap;let CI=1;function Qx(t){if(Vp.has(t))return Vp.get(t);const e=CI++;return Vp.set(t,e),e}const ty=(t,e,n)=>{const{nulls:r}=n;if(t==null&&e==null)return 0;if(t==null)return r==="first"?-1:1;if(e==null)return r==="first"?1:-1;if(typeof t=="string"&&typeof e=="string"&&n.stringSort==="locale")return t.localeCompare(e,n.locale,n.localeOptions);if(Array.isArray(t)&&Array.isArray(e)){for(let l=0;l<Math.min(t.length,e.length);l++){const u=ty(t[l],e[l],n);if(u!==0)return u}return t.length-e.length}if(t instanceof Date&&e instanceof Date)return t.getTime()-e.getTime();const s=typeof t=="object",a=typeof e=="object";if(s||a){if(s&&a){const l=Qx(t),u=Qx(e);return l-u}if(s)return 1;if(a)return-1}return t<e?-1:t>e?1:0},TI=(t,e,n)=>ty(e,t,{...n,nulls:n.nulls==="first"?"last":"first"});function sf(t){return(e,n)=>t.direction==="asc"?ty(e,n,t):TI(e,n,t)}const qm=sf({direction:"asc",nulls:"first",stringSort:"locale"});function AI(t,e){if(t.byteLength!==e.byteLength)return!1;for(let n=0;n<t.byteLength;n++)if(t[n]!==e[n])return!1;return!0}const RI=128;function ps(t){return t instanceof Date?t.getTime():(typeof Buffer<"u"&&t instanceof Buffer||t instanceof Uint8Array)&&t.byteLength<=RI?`__u8__${Array.from(t).join(",")}`:t}function OI(t,e){if(t===e)return!0;const n=typeof Buffer<"u"&&t instanceof Buffer||t instanceof Uint8Array,r=typeof Buffer<"u"&&e instanceof Buffer||e instanceof Uint8Array;return n&&r?AI(t,e):!1}function Xt(t){return t==null}function ja(t){return t===!0}function Un(t,e=!1){return ry(t,e)}function ny(t){return ry(t,!0)}function ry(t,e){switch(t.type){case"val":{const n=t.value;return()=>n}case"ref":return e?NI(t):II(t);case"func":return MI(t,e);default:throw new oI(t.type)}}function II(t){const[e,...n]=t.path;if(!e)throw new lI;if(n.length===0)return r=>r[e];if(n.length===1){const r=n[0];return s=>s[e]?.[r]}else return r=>{const s=r[e];if(s===void 0)return;let a=s;for(const l of n){if(a==null)return a;a=a[l]}return a}}function NI(t){const e=t.path;return n=>{let r=n;for(const s of e){if(r==null)return r;r=r[s]}return r}}function MI(t,e){const n=t.args.map(r=>ry(r,e));switch(t.name){case"eq":{const r=n[0],s=n[1];return a=>{const l=ps(r(a)),u=ps(s(a));return Xt(l)||Xt(u)?null:OI(l,u)}}case"gt":{const r=n[0],s=n[1];return a=>{const l=r(a),u=s(a);return Xt(l)||Xt(u)?null:l>u}}case"gte":{const r=n[0],s=n[1];return a=>{const l=r(a),u=s(a);return Xt(l)||Xt(u)?null:l>=u}}case"lt":{const r=n[0],s=n[1];return a=>{const l=r(a),u=s(a);return Xt(l)||Xt(u)?null:l<u}}case"lte":{const r=n[0],s=n[1];return a=>{const l=r(a),u=s(a);return Xt(l)||Xt(u)?null:l<=u}}case"and":return r=>{let s=!1;for(const a of n){const l=a(r);if(l===!1)return!1;Xt(l)&&(s=!0)}return s?null:!0};case"or":return r=>{let s=!1;for(const a of n){const l=a(r);if(l===!0)return!0;Xt(l)&&(s=!0)}return s?null:!1};case"not":{const r=n[0];return s=>{const a=r(s);return Xt(a)?null:!a}}case"in":{const r=n[0],s=n[1];return a=>{const l=r(a),u=s(a);return Xt(l)?null:Array.isArray(u)?u.includes(l):!1}}case"like":{const r=n[0],s=n[1];return a=>{const l=r(a),u=s(a);return Xt(l)||Xt(u)?null:Jx(l,u,!1)}}case"ilike":{const r=n[0],s=n[1];return a=>{const l=r(a),u=s(a);return Xt(l)||Xt(u)?null:Jx(l,u,!0)}}case"upper":{const r=n[0];return s=>{const a=r(s);return typeof a=="string"?a.toUpperCase():a}}case"lower":{const r=n[0];return s=>{const a=r(s);return typeof a=="string"?a.toLowerCase():a}}case"length":{const r=n[0];return s=>{const a=r(s);return typeof a=="string"||Array.isArray(a)?a.length:0}}case"concat":return r=>n.map(s=>{const a=s(r);try{return String(a??"")}catch{try{return JSON.stringify(a)||""}catch{return"[object]"}}}).join("");case"coalesce":return r=>{for(const s of n){const a=s(r);if(a!=null)return a}return null};case"add":{const r=n[0],s=n[1];return a=>{const l=r(a),u=s(a);return(l??0)+(u??0)}}case"subtract":{const r=n[0],s=n[1];return a=>{const l=r(a),u=s(a);return(l??0)-(u??0)}}case"multiply":{const r=n[0],s=n[1];return a=>{const l=r(a),u=s(a);return(l??0)*(u??0)}}case"divide":{const r=n[0],s=n[1];return a=>{const l=r(a),f=s(a)??0;return f!==0?(l??0)/f:null}}case"isUndefined":{const r=n[0];return s=>r(s)===void 0}case"isNull":{const r=n[0];return s=>r(s)===null}default:throw new cI(t.name)}}function Jx(t,e,n){if(typeof t!="string"||typeof e!="string")return!1;const r=n?t.toLowerCase():t;let a=(n?e.toLowerCase():e).replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return a=a.replace(/%/g,".*"),a=a.replace(/_/g,"."),new RegExp(`^${a}$`).test(r)}function Ar(t,e){return Uu(t,e,new Map)}function Uu(t,e,n){if(t===e)return!0;if(t==null||e==null||typeof t!=typeof e)return!1;if(t instanceof Date)return e instanceof Date?t.getTime()===e.getTime():!1;if(t instanceof RegExp)return e instanceof RegExp?t.source===e.source&&t.flags===e.flags:!1;if(t instanceof Map){if(!(e instanceof Map)||t.size!==e.size)return!1;if(n.has(t))return n.get(t)===e;n.set(t,e);const s=Array.from(t.entries()).every(([a,l])=>e.has(a)&&Uu(l,e.get(a),n));return n.delete(t),s}if(t instanceof Set){if(!(e instanceof Set)||t.size!==e.size)return!1;if(n.has(t))return n.get(t)===e;n.set(t,e);const r=Array.from(t),s=Array.from(e);if(r.every(l=>typeof l!="object"))return n.delete(t),r.every(l=>e.has(l));const a=r.length===s.length;return n.delete(t),a}if(ArrayBuffer.isView(t)&&ArrayBuffer.isView(e)&&!(t instanceof DataView)&&!(e instanceof DataView)){const r=t,s=e;if(r.length!==s.length)return!1;for(let a=0;a<r.length;a++)if(r[a]!==s[a])return!1;return!0}if(af(t)&&af(e)){const r=Fm(t),s=Fm(e);return r!==s?!1:typeof t.equals=="function"?t.equals(e):t.toString()===e.toString()}if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;if(n.has(t))return n.get(t)===e;n.set(t,e);const r=t.every((s,a)=>Uu(s,e[a],n));return n.delete(t),r}if(typeof t=="object"){if(n.has(t))return n.get(t)===e;n.set(t,e);const r=Object.keys(t),s=Object.keys(e);if(r.length!==s.length)return n.delete(t),!1;const a=r.every(l=>l in e&&Uu(t[l],e[l],n));return n.delete(t),a}return!1}const DI=["Temporal.Duration","Temporal.Instant","Temporal.PlainDate","Temporal.PlainDateTime","Temporal.PlainMonthDay","Temporal.PlainTime","Temporal.PlainYearMonth","Temporal.ZonedDateTime"];function Fm(t){return t[Symbol.toStringTag]}function af(t){const e=Fm(t);return typeof e=="string"&&DI.includes(e)}const sy={direction:"asc",nulls:"first",stringSort:"locale"};class LI{constructor(e){this.originalIndex=e}lookup(e,n){const r=e==="gt"?"lt":e==="gte"?"lte":e==="lt"?"gt":e==="lte"?"gte":e;return this.originalIndex.lookup(r,n)}rangeQuery(e={}){return this.originalIndex.rangeQueryReversed(e)}rangeQueryReversed(e={}){return this.originalIndex.rangeQuery(e)}take(e,n,r){return this.originalIndex.takeReversed(e,n,r)}takeReversed(e,n,r){return this.originalIndex.take(e,n,r)}get orderedEntriesArray(){return this.originalIndex.orderedEntriesArrayReversed}get orderedEntriesArrayReversed(){return this.originalIndex.orderedEntriesArray}supports(e){return this.originalIndex.supports(e)}matchesField(e){return this.originalIndex.matchesField(e)}matchesCompareOptions(e){return this.originalIndex.matchesCompareOptions(e)}matchesDirection(e){return this.originalIndex.matchesDirection(e)}getStats(){return this.originalIndex.getStats()}add(e,n){this.originalIndex.add(e,n)}remove(e,n){this.originalIndex.remove(e,n)}update(e,n,r){this.originalIndex.update(e,n,r)}build(e){this.originalIndex.build(e)}clear(){this.originalIndex.clear()}get keyCount(){return this.originalIndex.keyCount}equalityLookup(e){return this.originalIndex.equalityLookup(e)}inArrayLookup(e){return this.originalIndex.inArrayLookup(e)}get indexedKeysSet(){return this.originalIndex.indexedKeysSet}get valueMapData(){return this.originalIndex.valueMapData}}function Gl(t,e,n){const r=n??{...sy,...t.compareOptions};for(const s of t.indexes.values())if(s.matchesField(e)&&s.matchesCompareOptions(r))return s.matchesDirection(r.direction)?s:new LI(s)}function zI(t){if(t.length===0)return new Set;if(t.length===1)return new Set(t[0]);let e=new Set(t[0]);for(let n=1;n<t.length;n++){const r=new Set;for(const s of e)t[n].has(s)&&r.add(s);e=r}return e}function jI(t){const e=new Set;for(const n of t)for(const r of n)e.add(r);return e}function PI(t,e){return iy(t,e)}function iy(t,e){if(t.type==="func")switch(t.name){case"eq":case"gt":case"gte":case"lt":case"lte":return UI(t,e);case"and":return $I(t,e);case"or":return qI(t,e);case"in":return FI(t,e)}return{canOptimize:!1,matchingKeys:new Set}}function BI(t,e){if(t.type!=="func"||t.args.length<2)return{canOptimize:!1,matchingKeys:new Set};const n=new Map;for(const r of t.args)if(r.type==="func"&&["gt","gte","lt","lte"].includes(r.name)){const s=r;if(s.args.length===2){const a=s.args[0],l=s.args[1];let u=null,f=null,h=s.name;if(a.type==="ref"&&l.type==="val")u=a,f=l;else if(a.type==="val"&&l.type==="ref")switch(u=l,f=a,h){case"gt":h="lt";break;case"gte":h="lte";break;case"lt":h="gt";break;case"lte":h="gte";break}if(u&&f){const p=u.path.join("."),_=f.value;n.has(p)||n.set(p,[]),n.get(p).push({operation:h,value:_})}}}for(const[r,s]of n)if(s.length>=2){const a=r.split("."),l=Gl(e,a);if(l&&l.supports("gt")&&l.supports("lt")){let u,f,h=!0,m=!0;for(const{operation:_,value:g}of s)switch(_){case"gt":(u===void 0||g>u)&&(u=g,h=!1);break;case"gte":(u===void 0||g>u)&&(u=g,h=!0);break;case"lt":(f===void 0||g<f)&&(f=g,m=!1);break;case"lte":(f===void 0||g<f)&&(f=g,m=!0);break}return{canOptimize:!0,matchingKeys:l.rangeQuery({from:u,to:f,fromInclusive:h,toInclusive:m})}}}return{canOptimize:!1,matchingKeys:new Set}}function UI(t,e){if(t.type!=="func"||t.args.length!==2)return{canOptimize:!1,matchingKeys:new Set};const n=t.args[0],r=t.args[1];let s=null,a=null,l=t.name;if(n.type==="ref"&&r.type==="val")s=n,a=r;else if(n.type==="val"&&r.type==="ref")switch(s=r,a=n,l){case"gt":l="lt";break;case"gte":l="lte";break;case"lt":l="gt";break;case"lte":l="gte";break}if(s&&a){const u=s.path,f=Gl(e,u);if(f){const h=a.value,m=l;return f.supports(m)?{canOptimize:!0,matchingKeys:f.lookup(m,h)}:{canOptimize:!1,matchingKeys:new Set}}}return{canOptimize:!1,matchingKeys:new Set}}function $I(t,e){if(t.type!=="func"||t.args.length<2)return{canOptimize:!1,matchingKeys:new Set};const n=BI(t,e);if(n.canOptimize)return n;const r=[];for(const s of t.args){const a=iy(s,e);a.canOptimize&&r.push(a)}if(r.length>0){const s=r.map(l=>l.matchingKeys);return{canOptimize:!0,matchingKeys:zI(s)}}return{canOptimize:!1,matchingKeys:new Set}}function qI(t,e){if(t.type!=="func"||t.args.length<2)return{canOptimize:!1,matchingKeys:new Set};const n=[];for(const r of t.args){const s=iy(r,e);s.canOptimize&&n.push(s)}if(n.length>0){const r=n.map(a=>a.matchingKeys);return{canOptimize:!0,matchingKeys:jI(r)}}return{canOptimize:!1,matchingKeys:new Set}}function FI(t,e){if(t.type!=="func"||t.args.length!==2)return{canOptimize:!1,matchingKeys:new Set};const n=t.args[0],r=t.args[1];if(n.type==="ref"&&r.type==="val"&&Array.isArray(r.value)){const s=n.path,a=r.value,l=Gl(e,s);if(l){if(l.supports("in"))return{canOptimize:!0,matchingKeys:l.lookup("in",a)};if(l.supports("eq")){const u=new Set;for(const f of a){const h=l.lookup("eq",f);for(const m of h)u.add(m)}return{canOptimize:!0,matchingKeys:u}}}}return{canOptimize:!1,matchingKeys:new Set}}class VI extends Map{constructor(e,n){super(n),this.defaultValue=e}get(e){return this.has(e)?super.get(e):this.defaultValue()}update(e,n){const r=this.get(e),s=n(r);return this.set(e,s),s}}const Hp=3e4;function Gp(t,e){if(e.length<=Hp)t.push(...e);else for(let n=0;n<e.length;n+=Hp){const r=e.slice(n,n+Hp);t.push(...r)}}function HI(t,e,n){let r=0,s=t.length;for(;r<s;){const a=Math.floor((r+s)/2),l=n(t[a],e);if(l<0)r=a+1;else if(l>0)s=a;else return a}return r}class GI{constructor(){this.objectIds=new WeakMap,this.nextId=0}getId(e){if(typeof e!="object"||e===null){const n=String(e);let r=0;for(let s=0;s<n.length;s++){const a=n.charCodeAt(s);r=(r<<5)-r+a,r=r&r}return r}return this.objectIds.has(e)||this.objectIds.set(e,this.nextId++),this.objectIds.get(e)}getStringId(e){return e===null?"null":e===void 0?"undefined":typeof e!="object"?`str_${String(e)}`:`obj_${this.getId(e)}`}}const Kp=new GI;function KI(t,e){const[n,r]=t,[s,a]=e,l=[...vu(n,Math.min(r,s)),...vu(Math.max(n,a),r)],u=[...vu(s,Math.min(a,n)),...vu(Math.max(s,r),a)];return{onlyInA:l,onlyInB:u}}function vu(t,e){const n=[];for(let r=t;r<e;r++)n.push(r);return n}function of(t,e){return typeof t==typeof e?t<e?-1:t>e?1:0:typeof t=="string"?-1:1}const ZI=dn(),QI=dn(),JI=dn(),YI=dn(),XI=dn();function dn(){return Math.random()*(2**31-1)>>>0}const YS=new ArrayBuffer(8),WI=new DataView(YS),Fs=new Uint8Array(YS);class Qf{constructor(){this.hash=ZI,this.length=0,this.carry=0,this.carryBytes=0}_mix(e){e=Math.imul(e,3432918353),e=e<<15|e>>>17,e=Math.imul(e,461845907),this.hash^=e,this.hash=this.hash<<13|this.hash>>>19,this.hash=Math.imul(this.hash,5)+3864292196}writeByte(e){this.carry|=(e&255)<<8*this.carryBytes,this.carryBytes++,this.length++,this.carryBytes===4&&(this._mix(this.carry>>>0),this.carry=0,this.carryBytes=0)}update(e){switch(typeof e){case"symbol":{this.update(XI);const n=e.description;if(!n)return;for(let r=0;r<n.length;r++){const s=n.charCodeAt(r);this.writeByte(s&255),this.writeByte(s>>>8&255)}return}case"string":this.update(QI);for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);this.writeByte(r&255),this.writeByte(r>>>8&255)}return;case"number":WI.setFloat64(0,e,!0),this.writeByte(Fs[0]),this.writeByte(Fs[1]),this.writeByte(Fs[2]),this.writeByte(Fs[3]),this.writeByte(Fs[4]),this.writeByte(Fs[5]),this.writeByte(Fs[6]),this.writeByte(Fs[7]);return;case"bigint":{let n=e;for(n<0n?(n=-n,this.update(YI)):this.update(JI);n>0n;)this.writeByte(Number(n&0xffn)),n>>=8n;e===0n&&this.writeByte(0);return}default:throw new TypeError(`Unsupported input type: ${typeof e}`)}}digest(){if(this.carryBytes>0){let e=this.carry>>>0;e=Math.imul(e,3432918353),e=e<<15|e>>>17,e=Math.imul(e,461845907),this.hash^=e}return this.hash^=this.length,this.hash^=this.hash>>>16,this.hash=Math.imul(this.hash,2246822507),this.hash^=this.hash>>>13,this.hash=Math.imul(this.hash,3266489909),this.hash^=this.hash>>>16,this.hash>>>0}}const eN=dn(),tN=dn(),nN=dn(),rN=dn(),sN=dn(),iN=dn(),aN=dn(),oN=dn(),lN=dn(),cN=dn(),uN=dn(),fN=dn(),hN=128,Ol=new WeakMap;function En(t){const e=new Qf;return XS(e,t),e.digest()}function dN(t){const e=Ol.get(t);if(e!==void 0)return e;let n;if(t instanceof Date)n=pN(t);else if(typeof Buffer<"u"&&t instanceof Buffer||t instanceof Uint8Array)if(t.byteLength<=hN)n=mN(t);else return Vm(t);else{if(t instanceof File)return Vm(t);{let r=t,s=oN;t instanceof Array&&(s=lN),t instanceof Map&&(s=cN,r=[...t.entries()]),t instanceof Set&&(s=uN,r=[...t.entries()]),n=gN(r,s)}}return Ol.set(t,n),n}function pN(t){const e=new Qf;return e.update(aN),e.update(t.getTime()),e.digest()}function mN(t){const e=new Qf;e.update(fN),e.update(t.byteLength);for(let n=0;n<t.byteLength;n++)e.writeByte(t[n]);return e.digest()}function gN(t,e){const n=new Qf;n.update(e);const r=Object.keys(t);r.sort(_N);for(const s of r)n.update(sN),n.update(s),XS(n,t[s]);return n.digest()}function XS(t,e){if(e===null){t.update(nN);return}switch(typeof e){case"undefined":t.update(rN);return;case"boolean":t.update(e?eN:tN);return;case"number":t.update(isNaN(e)?NaN:e===0?0:e);return;case"bigint":case"string":case"symbol":t.update(e);return;case"object":t.update(yN(e));return;case"function":t.update(Vm(e));return;default:console.warn(`Ignored input during hashing because it is of type ${typeof e} which is not supported`)}}function yN(t){let e=Ol.get(t);return e===void 0&&(e=dN(t)),e}let Yx=1;function Vm(t){let e=Ol.get(t);return e===void 0&&(e=Yx^iN,Yx++,Ol.set(t,e)),e}function _N(t,e){return t.localeCompare(e)}class Ft{#e;constructor(e=[]){this.#e=e}toString(e=!1){return`MultiSet(${JSON.stringify(this.#e,null,e?2:void 0)})`}toJSON(){return JSON.stringify(Array.from(this.getInner()))}static fromJSON(e){return new Ft(JSON.parse(e))}map(e){return new Ft(this.#e.map(([n,r])=>[e(n),r]))}filter(e){return new Ft(this.#e.filter(([n,r])=>e(n)))}negate(){return new Ft(this.#e.map(([e,n])=>[e,-n]))}concat(e){const n=[];return Gp(n,this.#e),Gp(n,e.getInner()),new Ft(n)}consolidate(){if(this.#e.length>0){const e=this.#e[0]?.[0];if(Array.isArray(e)&&e.length===2)return this.#t()}return this.#n()}#t(){const e=new Map,n=new Map,r=a=>{if(a.length!==2)throw new Error("Expected tuple of length 2");const[l,u]=a;return`${Kp.getStringId(l)}|${Kp.getStringId(u)}`};for(const[a,l]of this.#e){if(!Array.isArray(a)||a.length!==2)return this.#n();const[u,f]=a;if(typeof u!="string"&&typeof u!="number")return this.#n();let h;Array.isArray(f)&&f.length===2?h=r(f):h=Kp.getStringId(f);const m=u+"|"+h;e.set(m,(e.get(m)||0)+l),n.has(m)||n.set(m,a)}const s=[];for(const[a,l]of e)l!==0&&s.push([n.get(a),l]);return new Ft(s)}#n(){const e=new VI(()=>0),n=new Map;let r=!1,s=!1,a=!1;for(const[f,h]of this.#e)if(typeof f=="string")r=!0;else if(typeof f=="number")s=!0;else{a=!0;break}const l=a||r&&s;for(const[f,h]of this.#e){const m=l?En(f):f;l&&!n.has(m)&&n.set(m,f),e.update(m,p=>p+h)}const u=[];for(const[f,h]of e.entries())if(h!==0){const m=l?n.get(f):f;u.push([m,h])}return new Ft(u)}extend(e){const n=e instanceof Ft?e.getInner():e;Gp(this.#e,n)}add(e,n){n!==0&&this.#e.push([e,n])}getInner(){return this.#e}}class bN{#e;constructor(e){this.#e=e}drain(){const e=[...this.#e].reverse();return this.#e.length=0,e}isEmpty(){return this.#e.length===0}}class Fr{#e=[];sendData(e){e instanceof Ft||(e=new Ft(e));for(const n of this.#e)n.unshift(e)}newReader(){const e=[];return this.#e.push(e),new bN(e)}}class WS{constructor(e,n,r){this.id=e,this.inputs=n,this.output=r}hasPendingWork(){return this.inputs.some(e=>!e.isEmpty())}}class Za extends WS{constructor(e,n,r){super(e,[n],r),this.id=e}inputMessages(){return this.inputs[0].drain()}}class vN extends WS{constructor(e,n,r,s){super(e,[n,r],s),this.id=e}inputAMessages(){return this.inputs[0].drain()}inputBMessages(){return this.inputs[1].drain()}}class ay extends Za{run(){for(const e of this.inputMessages())this.output.sendData(this.inner(e))}}class xN{#e=[];#t=0;#n=!1;constructor(){}#r(){if(this.#n)throw new Error("Graph already finalized")}getNextOperatorId(){return this.#r(),this.#t++}newInput(){this.#r();const e=new Fr;return new wN(this,e)}addOperator(e){this.#r(),this.#e.push(e)}finalize(){this.#r(),this.#n=!0}step(){if(!this.#n)throw new Error("Graph not finalized");for(const e of this.#e)e.run()}pendingWork(){return this.#e.some(e=>e.hasPendingWork())}run(){for(;this.pendingWork();)this.step()}}class Vr{#e;#t;constructor(e,n){this.#e=e,this.#t=n}connectReader(){return this.#t.newReader()}get writer(){return this.#t}get graph(){return this.#e}pipe(...e){return e.reduce((n,r)=>r(n),this)}}class wN extends Vr{sendData(e){this.writer.sendData(e)}}class SN extends ay{#e;constructor(e,n,r,s){super(e,n,r),this.#e=s}inner(e){return e.map(this.#e)}}function Cn(t){return e=>{const n=new Vr(e.graph,new Fr),r=new SN(e.graph.getNextOperatorId(),e.connectReader(),n.writer,t);return e.graph.addOperator(r),n}}const nl=Symbol("NO_PREFIX");class Xx extends Map{addValue(e,n){if(n===0)return this.size===0;const r=yl(e),s=this.get(r);if($u(s)){const[a,l]=s;if(yl(a)!==r)throw new Error("Mismatching prefixes, this should never happen");if(a===e||En(a)===En(e)){const f=l+n;f===0?this.delete(r):this.set(r,[e,f])}else{const f=new rl;f.set(En(a),s),f.set(En(e),[e,n]),this.set(r,f)}}else s===void 0?this.set(r,[e,n]):s.addValue(e,n)&&this.delete(r);return this.size===0}}class rl extends Map{addValue(e,n){if(n===0)return this.size===0;const r=En(e),s=this.get(r);if(s){const[,a]=s,l=a+n;l===0?this.delete(r):this.set(r,[e,l])}else this.set(r,[e,n]);return this.size===0}}class Ks{#e;#t=new Map;constructor(){this.#e=new Map}static fromMultiSets(e){const n=new Ks;for(const r of e)for(const[s,a]of r.getInner()){const[l,u]=s;n.addValue(l,[u,a])}return n}toString(e=!1){return`Index(${JSON.stringify([...this.entries()],void 0,e?2:void 0)})`}get size(){return this.#e.size}has(e){return this.#e.has(e)}hasPresence(e){return(this.#t.get(e)||0)!==0}getConsolidatedMultiplicity(e){return this.#t.get(e)||0}getPresenceKeys(){return this.#t.keys()}get(e){return[...this.getIterator(e)]}*getIterator(e){const n=this.#e.get(e);if($u(n))yield n;else{if(n===void 0)return;if(n instanceof rl)for(const r of n.values())yield r;else for(const r of n.values())if($u(r))yield r;else for(const s of r.values())yield s}}*entries(){for(const e of this.#e.keys())for(const n of this.getIterator(e))yield[e,n]}*entriesIterators(){for(const e of this.#e.keys())yield[e,this.getIterator(e)]}addValue(e,n){const[r,s]=n;if(s===0)return;const a=(this.#t.get(e)||0)+s;a===0?this.#t.delete(e):this.#t.set(e,a);const l=this.#e.get(e);if(l===void 0){this.#e.set(e,n);return}if($u(l)){this.#n(e,l,r,s);return}if(l instanceof rl){const u=yl(r);if(u!==nl){const f=new Xx;f.set(nl,l),f.set(u,n),this.#e.set(e,f)}else l.addValue(r,s)&&this.#e.delete(e)}else l.addValue(r,s)&&this.#e.delete(e)}#n(e,n,r,s){const[a,l]=n;if(a===r){const h=l+s;h===0?this.#e.delete(e):this.#e.set(e,[r,h]);return}const u=yl(r),f=yl(a);if(f===u&&(a===r||En(a)===En(r))){const h=l+s;h===0?this.#e.delete(e):this.#e.set(e,[r,h]);return}if(f===nl&&u===nl){const h=new rl;h.set(En(a),n),h.set(En(r),[r,s]),this.#e.set(e,h)}else{const h=new Xx;if(f===u){const m=new rl;m.set(En(a),n),m.set(En(r),[r,s]),h.set(f,m)}else h.set(f,n),h.set(u,[r,s]);this.#e.set(e,h)}}append(e){for(const[n,r]of e.entries())this.addValue(n,r)}join(e){const n=[];if(this.size<=e.size)for(const[r,s]of this.entriesIterators()){if(!e.has(r))continue;const a=e.get(r);for(const[l,u]of s)for(const[f,h]of a)u!==0&&h!==0&&n.push([[r,[l,f]],u*h])}else for(const[r,s]of e.entriesIterators()){if(!this.has(r))continue;const a=this.get(r);for(const[l,u]of s)for(const[f,h]of a)h!==0&&u!==0&&n.push([[r,[f,l]],h*u])}return new Ft(n)}}function yl(t){return Array.isArray(t)&&(typeof t[0]=="string"||typeof t[0]=="number"||typeof t[0]=="bigint")?t[0]:nl}function $u(t){return Array.isArray(t)}class kN extends Za{#e=new Ks;#t=new Ks;#n;constructor(e,n,r,s){super(e,n,r),this.#n=s}run(){const e=new Set;for(const r of this.inputMessages())for(const[s,a]of r.getInner()){const[l,u]=s;this.#e.addValue(l,[u,a]),e.add(l)}const n=[];for(const r of e){const s=this.#e.get(r),a=this.#t.get(r),l=this.#n(s),u=new Map,f=new Map;for(const[h,m]of l){const p=u.get(h)??0;u.set(h,p+m)}for(const[h,m]of a){const p=f.get(h)??0;f.set(h,p+m)}for(const[h,m]of f)u.has(h)||(n.push([[r,h],-m]),this.#t.addValue(r,[h,-m]));for(const[h,m]of u)f.has(h)||m!==0&&(n.push([[r,h],m]),this.#t.addValue(r,[h,m]));for(const[h,m]of u){const p=f.get(h);if(p!==void 0){const _=m-p;_!==0&&(n.push([[r,h],_]),this.#t.addValue(r,[h,_]))}}}n.length>0&&this.output.sendData(new Ft(n))}}function EN(t){return e=>{const n=new Vr(e.graph,new Fr),r=new kN(e.graph.getNextOperatorId(),e.connectReader(),n.writer,t);return e.graph.addOperator(r),n}}function Wx(t){return"pipe"in t}function ew(t,e={}){const n=Object.fromEntries(Object.entries(e).filter(([r,s])=>!Wx(s)));return Object.fromEntries(Object.entries(e).filter(([r,s])=>Wx(s))),r=>{const s="__original_key__";return r.pipe(Cn(u=>{const f=t(u),h=JSON.stringify(f),m={};m[s]=f;for(const[p,_]of Object.entries(n))m[p]=_.preMap(u);return[h,m]})).pipe(EN(u=>{let f=0;for(const[p,_]of u)f+=_;if(f<=0)return[];const h={},m=u[0]?.[0]?.[s];h[s]=m;for(const[p,_]of Object.entries(n)){const g=u.map(([v,x])=>[v[p],x]);h[p]=_.reduce(g)}return[[h,1]]})).pipe(Cn(([u,f])=>{const h=f[s],m={};Object.assign(m,h);for(const[p,_]of Object.entries(n))_.postMap?m[p]=_.postMap(f[p]):m[p]=f[p];return[u,m]}))}}function CN(t=e=>e){return{preMap:e=>t(e),reduce:e=>{let n=0;for(const[r,s]of e)n+=r*s;return n}}}function TN(t=e=>e){return{preMap:e=>t(e)==null?0:1,reduce:e=>{let n=0;for(const[r,s]of e)n+=r*s;return n}}}function AN(t=e=>e){return{preMap:e=>({sum:t(e),count:0}),reduce:e=>{let n=0,r=0;for(const[s,a]of e)n+=s.sum*a,r+=a;return{sum:n,count:r}},postMap:e=>e.sum/e.count}}function RN(t){const e=t??(n=>n);return{preMap:n=>e(n),reduce:n=>{let r;for(const[s,a]of n)(!r||s&&s<r)&&(r=s);return r}}}function ON(t){const e=t??(n=>n);return{preMap:n=>e(n),reduce:n=>{let r;for(const[s,a]of n)(!r||s&&s>r)&&(r=s);return r}}}const IN={sum:CN,count:TN,avg:AN,min:RN,max:ON};class NN extends ay{#e;constructor(e,n,r,s){super(e,n,r),this.#e=s}inner(e){return this.#e(e),e}}function MN(t){return e=>{const n=new Vr(e.graph,new Fr),r=new NN(e.graph.getNextOperatorId(),e.connectReader(),n.writer,t);return e.graph.addOperator(r),n}}class DN extends ay{#e;constructor(e,n,r,s){super(e,n,r),this.#e=s}inner(e){return e.filter(this.#e)}}function Zs(t){return e=>{const n=new Vr(e.graph,new Fr),r=new DN(e.graph.getNextOperatorId(),e.connectReader(),n.writer,t);return e.graph.addOperator(r),n}}class LN extends Za{#e;constructor(e,n,r,s){super(e,n,r),this.#e=s}run(){for(const e of this.inputMessages())this.#e(e),this.output.sendData(e)}}function zN(t){return e=>{const n=new Vr(e.graph,new Fr),r=new LN(e.graph.getNextOperatorId(),e.connectReader(),n.writer,t);return e.graph.addOperator(r),n}}class jN extends Za{run(){const e=this.inputMessages();if(e.length===0)return;const n=new Ft;for(const s of e)n.extend(s);const r=n.consolidate();r.getInner().length>0&&this.output.sendData(r)}}function PN(){return t=>{const e=new Vr(t.graph,new Fr),n=new jN(t.graph.getNextOperatorId(),t.connectReader(),e.writer);return t.graph.addOperator(n),e}}class BN extends vN{#e=new Ks;#t=new Ks;#n;constructor(e,n,r,s,a="inner"){super(e,n,r,s),this.#n=a}run(){const e=Ks.fromMultiSets(this.inputAMessages()),n=Ks.fromMultiSets(this.inputBMessages());if(e.size===0&&n.size===0)return;const r=new Ft;this.#n!=="anti"&&this.emitInnerResults(e,n,r),(this.#n==="left"||this.#n==="full"||this.#n==="anti")&&this.emitLeftOuterResults(e,n,r),(this.#n==="right"||this.#n==="full")&&this.emitRightOuterResults(e,n,r),this.#e.append(e),this.#t.append(n),r.getInner().length>0&&this.output.sendData(r)}emitInnerResults(e,n,r){e.size>0&&r.extend(e.join(this.#t)),n.size>0&&r.extend(this.#e.join(n)),e.size>0&&n.size>0&&r.extend(e.join(n))}emitLeftOuterResults(e,n,r){if(e.size>0)for(const[s,a]of e.entriesIterators()){const l=this.#t.getConsolidatedMultiplicity(s),u=n.getConsolidatedMultiplicity(s);if(l+u===0)for(const[h,m]of a)m!==0&&r.add([s,[h,null]],m)}if(n.size>0)for(const s of n.getPresenceKeys()){const a=this.#t.getConsolidatedMultiplicity(s),l=n.getConsolidatedMultiplicity(s);if(l===0)continue;const u=a+l;if(a===0==(u===0))continue;const f=a===0;for(const[h,m]of this.#e.getIterator(s))m!==0&&r.add([s,[h,null]],f?-m:+m)}}emitRightOuterResults(e,n,r){if(n.size>0)for(const[s,a]of n.entriesIterators()){const l=this.#e.getConsolidatedMultiplicity(s),u=e.getConsolidatedMultiplicity(s);if(l+u===0)for(const[h,m]of a)m!==0&&r.add([s,[null,h]],m)}if(e.size>0)for(const s of e.getPresenceKeys()){const a=this.#e.getConsolidatedMultiplicity(s),l=e.getConsolidatedMultiplicity(s);if(l===0)continue;const u=a+l;if(a===0==(u===0))continue;const f=a===0;for(const[h,m]of this.#t.getIterator(s))m!==0&&r.add([s,[null,h]],f?-m:+m)}}}function UN(t,e="inner"){return n=>{if(n.graph!==t.graph)throw new Error("Cannot join streams from different graphs");const r=new Vr(n.graph,new Fr),s=new BN(n.graph.getNextOperatorId(),n.connectReader(),t.connectReader(),r.writer,e);return n.graph.addOperator(s),r}}class $N extends Za{#e;#t;constructor(e,n,r,s=a=>a){super(e,n,r),this.#e=s,this.#t=new Map}run(){const e=new Map;for(const r of this.inputMessages())for(const[s,a]of r.getInner()){const l=En(this.#e(s)),f=(e.get(l)?.[0]??this.#t.get(l)??0)+a;e.set(l,[f,s])}const n=[];for(const[r,[s,a]]of e.entries()){const l=this.#t.get(r)??0;s===0?this.#t.delete(r):this.#t.set(r,s),l<=0&&s>0?n.push([[En(this.#e(a)),a[1]],1]):l>0&&s<=0&&n.push([[En(this.#e(a)),a[1]],-1])}n.length>0&&this.output.sendData(new Ft(n))}}function qN(t=e=>e){return e=>{const n=new Vr(e.graph,new Fr),r=new $N(e.graph.getNextOperatorId(),e.connectReader(),n.writer,t);return e.graph.addOperator(r),n}}const FN="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function Na(t,e,n){const r=n[0];if(e!=null&&t>=e)throw new Error(t+" >= "+e);if(t.slice(-1)===r||e&&e.slice(-1)===r)throw new Error("trailing zero");if(e){let l=0;for(;(t[l]||r)===e[l];)l++;if(l>0)return e.slice(0,l)+Na(t.slice(l),e.slice(l),n)}const s=t?n.indexOf(t[0]):0,a=e!=null?n.indexOf(e[0]):n.length;if(a-s>1){const l=Math.round(.5*(s+a));return n[l]}else return e&&e.length>1?e.slice(0,1):n[s]+Na(t.slice(1),null,n)}function ek(t){if(t.length!==tk(t[0]))throw new Error("invalid integer part of order key: "+t)}function tk(t){if(t>="a"&&t<="z")return t.charCodeAt(0)-97+2;if(t>="A"&&t<="Z")return 90-t.charCodeAt(0)+2;throw new Error("invalid order key head: "+t)}function sl(t){const e=tk(t[0]);if(e>t.length)throw new Error("invalid order key: "+t);return t.slice(0,e)}function tw(t,e){if(t==="A"+e[0].repeat(26))throw new Error("invalid order key: "+t);const n=sl(t);if(t.slice(n.length).slice(-1)===e[0])throw new Error("invalid order key: "+t)}function nw(t,e){ek(t);const[n,...r]=t.split("");let s=!0;for(let a=r.length-1;s&&a>=0;a--){const l=e.indexOf(r[a])+1;l===e.length?r[a]=e[0]:(r[a]=e[l],s=!1)}if(s){if(n==="Z")return"a"+e[0];if(n==="z")return null;const a=String.fromCharCode(n.charCodeAt(0)+1);return a>"a"?r.push(e[0]):r.pop(),a+r.join("")}else return n+r.join("")}function VN(t,e){ek(t);const[n,...r]=t.split("");let s=!0;for(let a=r.length-1;s&&a>=0;a--){const l=e.indexOf(r[a])-1;l===-1?r[a]=e.slice(-1):(r[a]=e[l],s=!1)}if(s){if(n==="a")return"Z"+e.slice(-1);if(n==="A")return null;const a=String.fromCharCode(n.charCodeAt(0)-1);return a<"Z"?r.push(e.slice(-1)):r.pop(),a+r.join("")}else return n+r.join("")}function HN(t,e,n=FN){if(t!=null&&tw(t,n),e!=null&&tw(e,n),t!=null&&e!=null&&t>=e)throw new Error(t+" >= "+e);if(t==null){if(e==null)return"a"+n[0];const f=sl(e),h=e.slice(f.length);if(f==="A"+n[0].repeat(26))return f+Na("",h,n);if(f<e)return f;const m=VN(f,n);if(m==null)throw new Error("cannot decrement any more");return m}if(e==null){const f=sl(t),h=t.slice(f.length),m=nw(f,n);return m??f+Na(h,null,n)}const r=sl(t),s=t.slice(r.length),a=sl(e),l=e.slice(a.length);if(r===a)return r+Na(s,l,n);const u=nw(r,n);if(u==null)throw new Error("cannot increment any more");return u<e?u:r+Na(s,null,n)}class rw{#e=[];#t;#n;#r;constructor(e,n,r){this.#n=e,this.#r=e+n,this.#t=r}get size(){const e=this.#n,n=this.#r-this.#n,r=this.#e.length-e;return Math.max(0,Math.min(n,r))}move({offset:e,limit:n}){const r=this.#n,s=this.#r-this.#n,a=[this.#n,this.#r===1/0?this.#n+this.size:this.#r];this.#n=e??r,this.#r=this.#n+(n??s);const l=[this.#n,this.#r===1/0?Math.max(this.#n+this.size,a[1]):this.#r],{onlyInA:u,onlyInB:f}=KI(a,l),h=[];f.forEach(p=>{const _=this.#e[p];_&&h.push(_)});const m=[];return u.forEach(p=>{const _=this.#e[p];_&&m.push(_)}),{moveIns:h,moveOuts:m,changes:u.length+f.length>0}}insert(e){const n={moveIn:null,moveOut:null},r=this.#s(e),s=r===0?null:aw(this.#e[r-1]),a=r===this.#e.length?null:aw(this.#e[r]),l=HN(s,a),u=sw(e,l);if(this.#e.splice(r,0,u),r<this.#r){const f=Math.max(r,this.#n);f<this.#e.length&&(n.moveIn=this.#e[f],this.#r<this.#e.length&&(n.moveOut=this.#e[this.#r]))}return n}delete(e){const n={moveIn:null,moveOut:null},r=this.#s(e),[s]=this.#e.splice(r,1);if(r<this.#r){if(n.moveOut=s,r<this.#n){const l=this.#n-1;l<this.#e.length?n.moveOut=this.#e[l]:n.moveOut=null}const a=this.#r-1;a<this.#e.length&&(n.moveIn=this.#e[a])}return n}#s(e){return HI(this.#e,sw(e,""),(n,r)=>this.#t(iw(n),iw(r)))}}class GN extends Za{#e=new Map;#t;constructor(e,n,r,s,a){super(e,n,r);const l=a.limit??1/0,u=a.offset??0;this.#t=this.createTopK(u,l,ZN(s)),a.setSizeCallback?.(()=>this.#t.size),a.setWindowFn?.(this.moveTopK.bind(this))}createTopK(e,n,r){return new rw(e,n,r)}moveTopK({offset:e,limit:n}){if(!(this.#t instanceof rw))throw new Error("Cannot move B+-tree implementation of TopK with fractional index");const r=[],s=this.#t.move({offset:e,limit:n});s.moveIns.forEach(a=>this.handleMoveIn(a,r)),s.moveOuts.forEach(a=>this.handleMoveOut(a,r)),s.changes&&this.output.sendData(new Ft(r))}run(){const e=[];for(const n of this.inputMessages())for(const[r,s]of n.getInner()){const[a,l]=r;this.processElement(a,l,s,e)}e.length>0&&this.output.sendData(new Ft(e))}processElement(e,n,r,s){const{oldMultiplicity:a,newMultiplicity:l}=this.addKey(e,r);let u={moveIn:null,moveOut:null};a<=0&&l>0?u=this.#t.insert([e,n]):a>0&&l<=0&&(u=this.#t.delete([e,n])),this.handleMoveIn(u.moveIn,s),this.handleMoveOut(u.moveOut,s)}handleMoveIn(e,n){if(e){const[[r,s],a]=e;n.push([[r,[s,a]],1])}}handleMoveOut(e,n){if(e){const[[r,s],a]=e;n.push([[r,[s,a]],-1])}}getMultiplicity(e){return this.#e.get(e)??0}addKey(e,n){const r=this.getMultiplicity(e),s=r+n;return s===0?this.#e.delete(e):this.#e.set(e,s),{oldMultiplicity:r,newMultiplicity:s}}}function KN(t,e){const n=e||{};return r=>{const s=new Vr(r.graph,new Fr),a=new GN(r.graph.getNextOperatorId(),r.connectReader(),s.writer,t,n);return r.graph.addOperator(a),s}}function sw(t,e){return[t,e]}function iw(t){return t[0]}function aw(t){return t[1]}function ZN(t){return([e,n],[r,s])=>{const a=t(n,s);return a!==0?a:of(e,r)}}function QN(t,e,n){const r=n?.limit??1/0,s=n?.offset??0,a=n?.setSizeCallback,l=n?.setWindowFn,u=n?.comparator??((f,h)=>f===h?0:f<h?-1:1);return f=>f.pipe(t((h,m)=>u(e(h),e(m)),{limit:r,offset:s,setSizeCallback:a,setWindowFn:l}),PN())}function JN(t,e){return QN(KN,t,e)}class YN{constructor(e,n,r){this._root=Zp,this._size=0,this._maxNodeSize=r>=4?Math.min(r,256):32,this._compare=e,n&&this.setPairs(n)}get size(){return this._size}get length(){return this._size}get isEmpty(){return this._size===0}clear(){this._root=Zp,this._size=0}get(e,n){return this._root.get(e,n,this)}set(e,n,r){this._root.isShared&&(this._root=this._root.clone());const s=this._root.set(e,n,r,this);return s===!0||s===!1?s:(this._root=new oy([this._root,s]),!0)}has(e){return this.forRange(e,e,!0,void 0)!==0}delete(e){return this.editRange(e,e,!0,WN)!==0}get maxNodeSize(){return this._maxNodeSize}minKey(){return this._root.minKey()}maxKey(){return this._root.maxKey()}keysArray(){const e=[];return this._root.forRange(this.minKey(),this.maxKey(),!0,!1,this,0,(n,r)=>{e.push(n)}),e}nextHigherPair(e,n){return n=n||[],e===void 0?this._root.minPair(n):this._root.getPairOrNextHigher(e,this._compare,!1,n)}nextHigherKey(e){const n=this.nextHigherPair(e,ow);return n&&n[0]}nextLowerPair(e,n){return n=n||[],e===void 0?this._root.maxPair(n):this._root.getPairOrNextLower(e,this._compare,!1,n)}nextLowerKey(e){const n=this.nextLowerPair(e,ow);return n&&n[0]}setPairs(e,n){let r=0;for(const s of e)this.set(s[0],s[1],n)&&r++;return r}forRange(e,n,r,s,a){const l=this._root.forRange(e,n,r,!1,this,a||0,s);return typeof l=="number"?l:l.break}editRange(e,n,r,s,a){let l=this._root;l.isShared&&(this._root=l=l.clone());try{const u=l.forRange(e,n,r,!0,this,a||0,s);return typeof u=="number"?u:u.break}finally{let u;for(;l.keys.length<=1&&!l.isLeaf;)u||=l.isShared,this._root=l=l.keys.length===0?Zp:l.children[0];u&&(l.isShared=!0)}}}class Il{get isLeaf(){return this.children===void 0}constructor(e=[],n){this.keys=e,this.values=n||mn,this.isShared=void 0}maxKey(){return this.keys[this.keys.length-1]}indexOf(e,n,r){const s=this.keys;let a=0,l=s.length,u=l>>1;for(;a<l;){const f=r(s[u],e);if(f<0)a=u+1;else if(f>0)l=u;else{if(f===0)return u;if(e===e)return s.length;throw new Error("BTree: NaN was used as a key")}u=a+l>>1}return u^n}minKey(){return this.keys[0]}minPair(e){if(this.keys.length!==0)return e[0]=this.keys[0],e[1]=this.values[0],e}maxPair(e){if(this.keys.length===0)return;const n=this.keys.length-1;return e[0]=this.keys[n],e[1]=this.values[n],e}clone(){const e=this.values;return new Il(this.keys.slice(0),e===mn?e:e.slice(0))}get(e,n,r){const s=this.indexOf(e,-1,r._compare);return s<0?n:this.values[s]}getPairOrNextLower(e,n,r,s){const a=this.indexOf(e,-1,n),l=a<0?~a-1:r?a:a-1;if(l>=0)return s[0]=this.keys[l],s[1]=this.values[l],s}getPairOrNextHigher(e,n,r,s){const a=this.indexOf(e,-1,n),l=a<0?~a:r?a:a+1,u=this.keys;if(l<u.length)return s[0]=u[l],s[1]=this.values[l],s}set(e,n,r,s){let a=this.indexOf(e,-1,s._compare);if(a<0){if(a=~a,s._size++,this.keys.length<s._maxNodeSize)return this.insertInLeaf(a,e,n,s);{const l=this.splitOffRightSide();let u=this;return a>this.keys.length&&(a-=this.keys.length,u=l),u.insertInLeaf(a,e,n,s),l}}else return r!==!1&&(n!==void 0&&this.reifyValues(),this.keys[a]=e,this.values[a]=n),!1}reifyValues(){return this.values===mn?this.values=this.values.slice(0,this.keys.length):this.values}insertInLeaf(e,n,r,s){if(this.keys.splice(e,0,n),this.values===mn){for(;mn.length<s._maxNodeSize;)mn.push(void 0);if(r===void 0)return!0;this.values=mn.slice(0,this.keys.length-1)}return this.values.splice(e,0,r),!0}takeFromRight(e){let n=this.values;e.values===mn?n!==mn&&n.push(void 0):(n=this.reifyValues(),n.push(e.values.shift())),this.keys.push(e.keys.shift())}takeFromLeft(e){let n=this.values;e.values===mn?n!==mn&&n.unshift(void 0):(n=this.reifyValues(),n.unshift(e.values.pop())),this.keys.unshift(e.keys.pop())}splitOffRightSide(){const e=this.keys.length>>1,n=this.keys.splice(e),r=this.values===mn?mn:this.values.splice(e);return new Il(n,r)}forRange(e,n,r,s,a,l,u){const f=a._compare;let h,m;if(n===e){if(!r||(m=(h=this.indexOf(e,-1,f))+1,h<0))return l}else h=this.indexOf(e,0,f),m=this.indexOf(n,-1,f),m<0?m=~m:r===!0&&m++;const p=this.keys,_=this.values;if(u!==void 0)for(let g=h;g<m;g++){const v=p[g],x=u(v,_[g],l++);if(x!==void 0){if(s===!0){if(v!==p[g]||this.isShared===!0)throw new Error("BTree illegally changed or cloned in editRange");x.delete?(this.keys.splice(g,1),this.values!==mn&&this.values.splice(g,1),a._size--,g--,m--):x.hasOwnProperty("value")&&(_[g]=x.value)}if(x.break!==void 0)return x}}else l+=m-h;return l}mergeSibling(e,n){if(this.keys.push.apply(this.keys,e.keys),this.values===mn){if(e.values===mn)return;this.values=this.values.slice(0,this.keys.length)}this.values.push.apply(this.values,e.reifyValues())}}class oy extends Il{constructor(e,n){if(!n){n=[];for(let r=0;r<e.length;r++)n[r]=e[r].maxKey()}super(n),this.children=e}minKey(){return this.children[0].minKey()}minPair(e){return this.children[0].minPair(e)}maxPair(e){return this.children[this.children.length-1].maxPair(e)}get(e,n,r){const s=this.indexOf(e,0,r._compare),a=this.children;return s<a.length?a[s].get(e,n,r):void 0}getPairOrNextLower(e,n,r,s){const a=this.indexOf(e,0,n),l=this.children;if(a>=l.length)return this.maxPair(s);const u=l[a].getPairOrNextLower(e,n,r,s);return u===void 0&&a>0?l[a-1].maxPair(s):u}getPairOrNextHigher(e,n,r,s){const a=this.indexOf(e,0,n),l=this.children,u=l.length;if(a>=u)return;const f=l[a].getPairOrNextHigher(e,n,r,s);return f===void 0&&a<u-1?l[a+1].minPair(s):f}set(e,n,r,s){const a=this.children,l=s._maxNodeSize,u=s._compare;let f=Math.min(this.indexOf(e,0,u),a.length-1),h=a[f];if(h.isShared&&(a[f]=h=h.clone()),h.keys.length>=l){let p;f>0&&(p=a[f-1]).keys.length<l&&u(h.keys[0],e)<0?(p.isShared&&(a[f-1]=p=p.clone()),p.takeFromRight(h),this.keys[f-1]=p.maxKey()):(p=a[f+1])!==void 0&&p.keys.length<l&&u(h.maxKey(),e)<0&&(p.isShared&&(a[f+1]=p=p.clone()),p.takeFromLeft(h),this.keys[f]=a[f].maxKey())}const m=h.set(e,n,r,s);if(m===!1)return!1;if(this.keys[f]=h.maxKey(),m===!0)return!0;if(this.keys.length<l)return this.insert(f+1,m),!0;{const p=this.splitOffRightSide();let _=this;return u(m.maxKey(),this.maxKey())>0&&(_=p,f-=this.keys.length),_.insert(f+1,m),p}}insert(e,n){this.children.splice(e,0,n),this.keys.splice(e,0,n.maxKey())}splitOffRightSide(){const e=this.children.length>>1;return new oy(this.children.splice(e),this.keys.splice(e))}takeFromRight(e){this.keys.push(e.keys.shift()),this.children.push(e.children.shift())}takeFromLeft(e){this.keys.unshift(e.keys.pop()),this.children.unshift(e.children.pop())}forRange(e,n,r,s,a,l,u){const f=a._compare,h=this.keys,m=this.children;let p=this.indexOf(e,0,f),_=p;const g=Math.min(n===e?p:this.indexOf(n,0,f),h.length-1);if(s){if(_<=g)try{for(;_<=g;_++){m[_].isShared&&(m[_]=m[_].clone());const v=m[_].forRange(e,n,r,s,a,l,u);if(h[_]=m[_].maxKey(),typeof v!="number")return v;l=v}}finally{const v=a._maxNodeSize>>1;for(p>0&&p--,_=g;_>=p;_--)m[_].keys.length<=v&&(m[_].keys.length!==0?this.tryMerge(_,a._maxNodeSize):(h.splice(_,1),m.splice(_,1)));m.length!==0&&m[0].keys.length===0&&eM(!1,"emptiness bug")}}else for(;_<=g;_++){const v=m[_].forRange(e,n,r,s,a,l,u);if(typeof v!="number")return v;l=v}return l}tryMerge(e,n){const r=this.children;return e>=0&&e+1<r.length&&r[e].keys.length+r[e+1].keys.length<=n?(r[e].isShared&&(r[e]=r[e].clone()),r[e].mergeSibling(r[e+1],n),r.splice(e+1,1),this.keys.splice(e+1,1),this.keys[e]=r[e].maxKey(),!0):!1}mergeSibling(e,n){const r=this.keys.length;this.keys.push.apply(this.keys,e.keys);const s=e.children;if(this.children.push.apply(this.children,s),e.isShared&&!this.isShared)for(const a of s)a.isShared=!0;this.tryMerge(r-1,n)}}const mn=[],XN={delete:!0},WN=()=>XN,Zp=(function(){const t=new Il;return t.isShared=!0,t})(),ow=[];function eM(t,...e){throw e.unshift("B+ tree"),new Error(e.join(" "))}function tM(){const t=new Map;function e(n){const r=n.join(".");if(t.has(r))return t.get(r);const s=new Proxy({},{get(a,l,u){if(l==="__refProxy")return!0;if(l==="__path")return n;if(l==="__type")return;if(typeof l=="symbol")return Reflect.get(a,l,u);const f=[...n,String(l)];return e(f)},has(a,l){return l==="__refProxy"||l==="__path"||l==="__type"?!0:Reflect.has(a,l)},ownKeys(a){return Reflect.ownKeys(a)},getOwnPropertyDescriptor(a,l){return l==="__refProxy"||l==="__path"||l==="__type"?{enumerable:!1,configurable:!0}:Reflect.getOwnPropertyDescriptor(a,l)}});return t.set(r,s),s}return e([])}function wa(t){const e=new Map;let n=0;function r(a){const l=a.join(".");if(e.has(l))return e.get(l);const u=new Proxy({},{get(f,h,m){if(h==="__refProxy")return!0;if(h==="__path")return a;if(h==="__type")return;if(typeof h=="symbol")return Reflect.get(f,h,m);const p=[...a,String(h)];return r(p)},has(f,h){return h==="__refProxy"||h==="__path"||h==="__type"?!0:Reflect.has(f,h)},ownKeys(f){const h=++n,m=`__SPREAD_SENTINEL__${a.join(".")}__${h}`;return Object.prototype.hasOwnProperty.call(f,m)||Object.defineProperty(f,m,{enumerable:!0,configurable:!0,value:!0}),Reflect.ownKeys(f)},getOwnPropertyDescriptor(f,h){return h==="__refProxy"||h==="__path"||h==="__type"?{enumerable:!1,configurable:!0}:Reflect.getOwnPropertyDescriptor(f,h)}});return e.set(l,u),u}return new Proxy({},{get(a,l,u){if(l==="__refProxy")return!0;if(l==="__path")return[];if(l==="__type")return;if(typeof l=="symbol")return Reflect.get(a,l,u);const f=String(l);if(t.includes(f))return r([f])},has(a,l){return l==="__refProxy"||l==="__path"||l==="__type"||typeof l=="string"&&t.includes(l)?!0:Reflect.has(a,l)},ownKeys(a){return[...t,"__refProxy","__path","__type"]},getOwnPropertyDescriptor(a,l){if(l==="__refProxy"||l==="__path"||l==="__type")return{enumerable:!1,configurable:!0};if(typeof l=="string"&&t.includes(l))return{enumerable:!0,configurable:!0}}})}function tn(t){return nM(t)?new An(t.__path):t&&typeof t=="object"&&"type"in t&&(t.type==="func"||t.type==="ref"||t.type==="val"||t.type==="agg")?t:new Bn(t)}function nM(t){return t&&typeof t=="object"&&t.__refProxy===!0}function Hm(t,e){return new xr("eq",[tn(t),tn(e)])}function lw(t,e){return new xr("gt",[tn(t),tn(e)])}function rM(t,e){return new xr("gte",[tn(t),tn(e)])}function Gm(t,e){return new xr("lt",[tn(t),tn(e)])}function Km(t,e,...n){const r=[t,e,...n];return new xr("and",r.map(s=>tn(s)))}function sM(t,e,...n){const r=[t,e,...n];return new xr("or",r.map(s=>tn(s)))}function iM(t,e){return new xr("in",[tn(t),tn(e)])}class aM{constructor(e,n,r,s){this.lookupCount=0,this.totalLookupTime=0,this.lastUpdated=new Date,this.id=e,this.expression=n,this.compareOptions=sy,this.name=r,this.initialize(s)}supports(e){return this.supportedOperations.has(e)}matchesField(e){return this.expression.type==="ref"&&this.expression.path.length===e.length&&this.expression.path.every((n,r)=>n===e[r])}matchesCompareOptions(e){const n={...this.compareOptions,direction:void 0},r={...e,direction:void 0};return Ar(n,r)}matchesDirection(e){return this.compareOptions.direction===e}getStats(){return{entryCount:this.keyCount,lookupCount:this.lookupCount,averageLookupTime:this.lookupCount>0?this.totalLookupTime/this.lookupCount:0,lastUpdated:this.lastUpdated}}evaluateIndexExpression(e){return ny(this.expression)(e)}trackLookup(e){const n=performance.now()-e;this.lookupCount++,this.totalLookupTime+=n}updateTimestamp(){this.lastUpdated=new Date}}class Zm extends aM{constructor(e,n,r,s){super(e,n,r,s),this.supportedOperations=new Set(["eq","gt","gte","lt","lte","in"]),this.valueMap=new Map,this.indexedKeys=new Set,this.compareFn=qm,this.compareFn=s?.compareFn??qm,s?.compareOptions&&(this.compareOptions=s.compareOptions),this.orderedEntries=new YN(this.compareFn)}initialize(e){}add(e,n){let r;try{r=this.evaluateIndexExpression(n)}catch(a){throw new Error(`Failed to evaluate index expression for key ${e}: ${a}`)}const s=ps(r);if(this.valueMap.has(s))this.valueMap.get(s).add(e);else{const a=new Set([e]);this.valueMap.set(s,a),this.orderedEntries.set(s,void 0)}this.indexedKeys.add(e),this.updateTimestamp()}remove(e,n){let r;try{r=this.evaluateIndexExpression(n)}catch(a){console.warn(`Failed to evaluate index expression for key ${e} during removal:`,a);return}const s=ps(r);if(this.valueMap.has(s)){const a=this.valueMap.get(s);a.delete(e),a.size===0&&(this.valueMap.delete(s),this.orderedEntries.delete(s))}this.indexedKeys.delete(e),this.updateTimestamp()}update(e,n,r){this.remove(e,n),this.add(e,r)}build(e){this.clear();for(const[n,r]of e)this.add(n,r)}clear(){this.orderedEntries.clear(),this.valueMap.clear(),this.indexedKeys.clear(),this.updateTimestamp()}lookup(e,n){const r=performance.now();let s;switch(e){case"eq":s=this.equalityLookup(n);break;case"gt":s=this.rangeQuery({from:n,fromInclusive:!1});break;case"gte":s=this.rangeQuery({from:n,fromInclusive:!0});break;case"lt":s=this.rangeQuery({to:n,toInclusive:!1});break;case"lte":s=this.rangeQuery({to:n,toInclusive:!0});break;case"in":s=this.inArrayLookup(n);break;default:throw new Error(`Operation ${e} not supported by BTreeIndex`)}return this.trackLookup(r),s}get keyCount(){return this.indexedKeys.size}equalityLookup(e){const n=ps(e);return new Set(this.valueMap.get(n)??[])}rangeQuery(e={}){const{from:n,to:r,fromInclusive:s=!0,toInclusive:a=!0}=e,l=new Set,u=ps(n),f=ps(r),h=u??this.orderedEntries.minKey(),m=f??this.orderedEntries.maxKey();return this.orderedEntries.forRange(h,m,a,(p,_)=>{if(!s&&this.compareFn(p,n)===0)return;const g=this.valueMap.get(p);g&&g.forEach(v=>l.add(v))}),l}rangeQueryReversed(e={}){const{from:n,to:r,fromInclusive:s=!0,toInclusive:a=!0}=e;return this.rangeQuery({from:r??this.orderedEntries.maxKey(),to:n??this.orderedEntries.minKey(),fromInclusive:a,toInclusive:s})}takeInternal(e,n,r,s,a=!1){const l=new Set,u=[];let f,h=ps(r);for(;(f=n(h))!==void 0&&u.length<e;){h=f[0];const m=this.valueMap.get(h);if(m&&m.size>0){const p=Array.from(m).sort(of);a&&p.reverse();for(const _ of p){if(u.length>=e)break;!l.has(_)&&(s?.(_)??!0)&&(u.push(_),l.add(_))}}}return u}take(e,n,r){const s=a=>this.orderedEntries.nextHigherPair(a);return this.takeInternal(e,s,n,r)}takeReversed(e,n,r){const s=a=>this.orderedEntries.nextLowerPair(a);return this.takeInternal(e,s,n,r,!0)}inArrayLookup(e){const n=new Set;for(const r of e){const s=ps(r),a=this.valueMap.get(s);a&&a.forEach(l=>n.add(l))}return n}get indexedKeysSet(){return this.indexedKeys}get orderedEntriesArray(){return this.orderedEntries.keysArray().map(e=>[e,this.valueMap.get(e)??new Set])}get orderedEntriesArrayReversed(){return this.takeReversed(this.orderedEntries.size).map(e=>[e,this.valueMap.get(e)??new Set])}get valueMapData(){return this.valueMap}}function nk(t){return t.config.autoIndex==="eager"}function Jf(t,e,n,r,s){if(!nk(n))return;const a=r??{...sy,...n.compareOptions};if(!Array.from(n.indexes.values()).find(u=>u.matchesField(e)&&u.matchesCompareOptions(a)))try{n.createIndex(u=>{let f=u;for(const h of e)f=f[h];return f},{name:`auto:${e.join(".")}`,indexType:Zm,options:s?{compareFn:s,compareOptions:a}:{}})}catch(u){console.warn(`${n.id?`[${n.id}] `:""}Failed to create auto-index for field path "${e.join(".")}":`,u)}}function oM(t,e){if(!nk(e))return;const n=lM(t);for(const{fieldName:r,fieldPath:s}of n)Jf(r,s,e)}function lM(t){const e=[];function n(r){if(r.type!=="func")return;const s=r;if(s.name==="and"){for(const h of s.args)n(h);return}if(!["eq","gt","gte","lt","lte","in"].includes(s.name)||s.args.length<1||s.args[0].type!=="ref")return;const u=s.args[0].path;if(u.length===0)return;const f=u.join("_");e.push({fieldName:f,fieldPath:u})}return n(t),e}const{sum:cM,count:uM,avg:fM,min:hM,max:dM}=IN;function pM(t,e){const n=new Map,r=[...t];if(!e)return{selectToGroupByIndex:n,groupByExpressions:r};for(const[s,a]of Object.entries(e)){if(a.type==="agg")continue;const l=r.findIndex(u=>lf(a,u));if(l===-1)throw new yI(s);n.set(s,l)}return{selectToGroupByIndex:n,groupByExpressions:r}}function cw(t,e,n,r,s){if(e.length===0){const h={};if(r){for(const[p,_]of Object.entries(r))if(_.type==="agg"){const g=_;h[p]=uw(g)}}const m=()=>({__singleGroup:!0});if(t=t.pipe(ew(m,h)),t=t.pipe(Cn(([,p])=>{const g={...p.__select_results||{}};if(r)for(const[v,x]of Object.entries(r))x.type==="agg"&&(g[v]=p[v]);return["single_group",{...p,__select_results:g}]})),n&&n.length>0)for(const p of n){const _=$x(p),g=cf(_,r||{}),v=Un(g);t=t.pipe(Zs(([,x])=>{const k={result:x.__select_results};return ja(v(k))}))}if(s&&s.length>0)for(const p of s)t=t.pipe(Zs(([,_])=>{const g={result:_.__select_results};return ja(p(g))}));return t}const a=pM(e,r),l=e.map(h=>Un(h)),u=([,h])=>{const m={...h};delete m.__select_results;const p={};for(let _=0;_<e.length;_++){const g=l[_],v=g(m);p[`__key_${_}`]=v}return p},f={};if(r){for(const[h,m]of Object.entries(r))if(m.type==="agg"){const p=m;f[h]=uw(p)}}if(t=t.pipe(ew(u,f)),t=t.pipe(Cn(([,h])=>{const m=h.__select_results||{},p={};if(r)for(const[g,v]of Object.entries(r))if(v.type!=="agg"){const x=a.selectToGroupByIndex.get(g);x!==void 0?p[g]=h[`__key_${x}`]:p[g]=m[g]}else p[g]=h[g];else for(let g=0;g<e.length;g++)p[`__key_${g}`]=h[`__key_${g}`];let _;if(e.length===1)_=h.__key_0;else{const g=[];for(let v=0;v<e.length;v++)g.push(h[`__key_${v}`]);_=JSON.stringify(g)}return[_,{...h,__select_results:p}]})),n&&n.length>0)for(const h of n){const m=$x(h),p=cf(m,r||{}),_=Un(p);t=t.pipe(Zs(([,g])=>{const v={result:g.__select_results};return _(v)}))}if(s&&s.length>0)for(const h of s)t=t.pipe(Zs(([,m])=>{const p={result:m.__select_results};return ja(h(p))}));return t}function lf(t,e){if(!t||!e||t.type!==e.type)return!1;switch(t.type){case"ref":return!t.path||!e.path||t.path.length!==e.path.length?!1:t.path.every((n,r)=>n===e.path[r]);case"val":return t.value===e.value;case"func":return t.name===e.name&&t.args?.length===e.args?.length&&(t.args||[]).every((n,r)=>lf(n,e.args[r]));case"agg":return t.name===e.name&&t.args?.length===e.args?.length&&(t.args||[]).every((n,r)=>lf(n,e.args[r]));default:return!1}}function uw(t){const e=Un(t.args[0]),n=([,a])=>{const l=e(a);return typeof l=="number"?l:l!=null?Number(l):0},r=([,a])=>{const l=e(a);return typeof l=="number"||l instanceof Date?l:l!=null?Number(l):0},s=([,a])=>e(a);switch(t.name.toLowerCase()){case"sum":return cM(n);case"count":return uM(s);case"avg":return fM(n);case"min":return hM(r);case"max":return dM(r);default:throw new _I(t.name)}}function cf(t,e,n="result"){switch(t.type){case"agg":{const r=t;for(const[s,a]of Object.entries(e))if(a.type==="agg"&&mM(r,a))return new An([n,s]);throw new bI(r.name)}case"func":{const r=t,s=r.args.map(a=>cf(a,e));return new xr(r.name,s)}case"ref":return t;case"val":return t;default:throw new vI(t.type)}}function mM(t,e){return t.name===e.name&&t.args.length===e.args.length&&t.args.every((n,r)=>lf(n,e.args[r]))}function gM(t,e,n,r,s,a,l,u,f){const h=n.map(v=>{const x=cf(v.expression,r,"__select_results");return{compiledExpression:Un(x),compareOptions:Qm(v,s)}}),m=v=>{const x=v;return n.length>1?h.map(k=>k.compiledExpression(x)):n.length===1?h[0].compiledExpression(x):null},p=(v,x)=>{if(n.length>1){const k=v,S=x;for(let T=0;T<n.length;T++){const C=h[T],D=sf(C.compareOptions)(k[T],S[T]);if(D!==0)return D}return k.length-S.length}if(n.length===1){const k=h[0];return sf(k.compareOptions)(v,x)}return qm(v,x)};let _,g;if(u){let v,x,k,S=t.from.alias;const T=n[0],C=T.expression;if(C.type==="ref"){const L=Rl(t,C,s);if(L){x=L.collection;const D=L.path[0],I=Qm(T,x);D&&Jf(D,L.path,x,I,p),k=Un(new An(L.path),!0),v=Gl(x,L.path,I),v?.supports("gt")||(v=void 0),S=C.path.length>1?String(C.path[0]):t.from.alias}}if(k){const D=n.every(H=>H.expression.type==="ref")?n.map(H=>{const z=H.expression,Q=Rl(t,z,s);return Un(Q?new An(Q.path):H.expression,!0)}):void 0;g={alias:S,offset:f??0,limit:u,comparator:(H,z)=>{if(n.length===1){const Q=H&&k(H),j=z&&k(z);return p(Q,j)}if(D){const Q=j=>j&&D.map(se=>se(j));return p(Q(H),Q(z))}return 0},valueExtractorForRawRow:H=>{if(n.length===1)return k(H);if(D)return D.map(z=>z(H))},firstColumnValueExtractor:k,index:v,orderBy:n};const V=x?.id??s.id;a[V]=g,v&&(_=H=>{a[V].dataNeeded=()=>{const z=H();return Math.max(0,g.limit-z)}})}}return e.pipe(JN(m,{limit:u,offset:f,comparator:p,setSizeCallback:_,setWindowFn:v=>{l(x=>{v(x),g&&(g.offset=x.offset??g.offset,g.limit=x.limit??g.limit)})}}))}function Qm(t,e){return t.compareOptions.stringSort!==void 0?t.compareOptions:{...e.compareOptions,direction:t.compareOptions.direction,nulls:t.compareOptions.nulls}}function yM(t,e={}){const n=r=>{const s=[];for(const[a,l]of t.entries())(r?.(l)??!0)&&s.push({type:"insert",key:a,value:l});return s};if(e.limit!==void 0&&!e.orderBy)throw new Error("limit cannot be used without orderBy");if(e.orderBy){const r=e.where?_l(e.where):void 0,s=bM(t,e.orderBy,e.limit,r,e.optimizedOnly);if(s===void 0)return;const a=[];for(const l of s){const u=t.get(l);u!==void 0&&a.push({type:"insert",key:l,value:u})}return a}if(!e.where)return n();try{const r=e.where,s=PI(r,t);if(s.canOptimize){const a=[];for(const l of s.matchingKeys){const u=t.get(l);u!==void 0&&a.push({type:"insert",key:l,value:u})}return a}else{if(e.optimizedOnly)return;const a=_l(r);return n(a)}}catch(r){console.warn(`${t.id?`[${t.id}] `:""}Error processing where clause, falling back to full scan:`,r);const s=_l(e.where);return e.optimizedOnly?void 0:n(s)}}function _l(t){const e=ny(t);return n=>{try{const r=e(n);return ja(r)}catch{return!1}}}function _M(t,e){const n=_l(e.whereExpression);return r=>{const s=[];for(const a of r)if(a.type==="insert")n(a.value)&&s.push(a);else if(a.type==="update"){const l=n(a.value),u=a.previousValue?n(a.previousValue):!1;l&&u?s.push(a):l&&!u?s.push({...a,type:"insert"}):!l&&u&&s.push({...a,type:"delete",value:a.previousValue})}else n(a.value)&&s.push(a);(s.length>0||r.length===0)&&t(s)}}function bM(t,e,n,r,s){if(e.length===1){const f=e[0],h=f.expression;if(h.type==="ref"){const p=h.path,_=Qm(f,t);Jf(p[0],p,t,_);const g=Gl(t,p,_);if(g&&g.supports("gt")){const v=x=>{const k=t.get(x);return k===void 0?!1:r?.(k)??!0};return g.take(n??g.keyCount,void 0,v)}}}if(s)return;const a=[];for(const[f,h]of t.entries())(r?.(h)??!0)&&a.push({key:f,value:h});const l=(f,h)=>{for(const m of e){const p=sf(m.compareOptions),_=fw(f.value,m.expression),g=fw(h.value,m.expression),v=p(_,g);if(v!==0)return v}return 0};a.sort(l);const u=a.map(f=>f.key);return n!==void 0?u.slice(0,n):u}function fw(t,e){if(e.type==="ref"){const n=e;let r=t;for(const s of n.path)r=r?.[s];return r}else return e.type==="val"?e.value:ny(e)(t)}class hw{constructor(e){this.map=new Map,this.sortedKeys=[],this.comparator=e}indexOf(e,n){let r=0,s=this.sortedKeys.length;if(!this.comparator){for(;r<s;){const a=Math.floor((r+s)/2),l=this.sortedKeys[a],u=of(e,l);if(u<0)s=a;else if(u>0)r=a+1;else return a}return r}for(;r<s;){const a=Math.floor((r+s)/2),l=this.sortedKeys[a],u=this.map.get(l),f=this.comparator(n,u);if(f<0)s=a;else if(f>0)r=a+1;else{const h=of(e,l);if(h<0)s=a;else if(h>0)r=a+1;else return a}}return r}set(e,n){if(this.map.has(e)){const s=this.map.get(e),a=this.indexOf(e,s);this.sortedKeys.splice(a,1)}const r=this.indexOf(e,n);return this.sortedKeys.splice(r,0,e),this.map.set(e,n),this}get(e){return this.map.get(e)}delete(e){if(this.map.has(e)){const n=this.map.get(e),r=this.indexOf(e,n);return this.sortedKeys.splice(r,1),this.map.delete(e)}return!1}has(e){return this.map.has(e)}clear(){this.map.clear(),this.sortedKeys=[]}get size(){return this.map.size}*[Symbol.iterator](){for(const e of this.sortedKeys)yield[e,this.map.get(e)]}entries(){return this[Symbol.iterator]()}keys(){return this.sortedKeys[Symbol.iterator]()}values(){return(function*(){for(const e of this.sortedKeys)yield this.map.get(e)}).call(this)}forEach(e){for(const n of this.sortedKeys)e(this.map.get(n),n,this.map)}}class vM{constructor(e){this.pendingSyncedTransactions=[],this.syncedMetadata=new Map,this.optimisticUpserts=new Map,this.optimisticDeletes=new Set,this.size=0,this.syncedKeys=new Set,this.preSyncVisibleState=new Map,this.recentlySyncedKeys=new Set,this.hasReceivedFirstCommit=!1,this.isCommittingSyncTransactions=!1,this.commitPendingTransactions=()=>{let n=!1;for(const l of this.transactions.values())if(l.state==="persisting"){n=!0;break}const{committedSyncedTransactions:r,uncommittedSyncedTransactions:s,hasTruncateSync:a}=this.pendingSyncedTransactions.reduce((l,u)=>(u.committed?(l.committedSyncedTransactions.push(u),u.truncate===!0&&(l.hasTruncateSync=!0)):l.uncommittedSyncedTransactions.push(u),l),{committedSyncedTransactions:[],uncommittedSyncedTransactions:[],hasTruncateSync:!1});if(!n||a){this.isCommittingSyncTransactions=!0;const l=a?r.find(_=>_.truncate)?.optimisticSnapshot:null,u=new Set;for(const _ of r)for(const g of _.operations)u.add(g.key);let f=this.preSyncVisibleState;if(f.size===0){f=new Map;for(const _ of u){const g=this.get(_);g!==void 0&&f.set(_,g)}}const h=[],m=this.config.sync.rowUpdateMode||"partial";for(const _ of r){if(_.truncate){const g=new Set([...this.syncedData.keys(),...l?.upserts.keys()||[]]);for(const v of g){if(l?.deletes.has(v))continue;const x=l?.upserts.get(v)||this.syncedData.get(v);x!==void 0&&h.push({type:"delete",key:v,value:x})}this.syncedData.clear(),this.syncedMetadata.clear(),this.syncedKeys.clear();for(const v of u)f.delete(v);this._events.emit("truncate",{type:"truncate",collection:this.collection})}for(const g of _.operations){const v=g.key;switch(this.syncedKeys.add(v),g.type){case"insert":this.syncedMetadata.set(v,g.metadata);break;case"update":this.syncedMetadata.set(v,Object.assign({},this.syncedMetadata.get(v),g.metadata));break;case"delete":this.syncedMetadata.delete(v);break}switch(g.type){case"insert":this.syncedData.set(v,g.value);break;case"update":{if(m==="partial"){const x=Object.assign({},this.syncedData.get(v),g.value);this.syncedData.set(v,x)}else this.syncedData.set(v,g.value);break}case"delete":this.syncedData.delete(v);break}}}if(a){const _=new Set;for(const x of r)for(const k of x.operations)(k.type==="insert"||k.type==="update")&&_.add(k.key);const g=new Map(l.upserts),v=new Set(l.deletes);for(const[x,k]of g)if(!v.has(x))if(_.has(x)){let S=!1;for(let T=h.length-1;T>=0;T--){const C=h[T];if(C.key===x&&C.type==="insert"){C.value=k,S=!0;break}}S||h.push({type:"insert",key:x,value:k})}else h.push({type:"insert",key:x,value:k});if(h.length>0&&v.size>0){const x=[];for(const k of h)k.type==="insert"&&v.has(k.key)||x.push(k);h.length=0,h.push(...x)}this.lifecycle.status!=="ready"&&this.lifecycle.markReady()}if(this.optimisticUpserts.clear(),this.optimisticDeletes.clear(),this.isCommittingSyncTransactions=!1,a&&l){for(const[_,g]of l.upserts)this.optimisticUpserts.set(_,g);for(const _ of l.deletes)this.optimisticDeletes.add(_)}for(const _ of this.transactions.values())if(!["completed","failed"].includes(_.state)){for(const g of _.mutations)if(this.isThisCollection(g.collection)&&g.optimistic)switch(g.type){case"insert":case"update":this.optimisticUpserts.set(g.key,g.modified),this.optimisticDeletes.delete(g.key);break;case"delete":this.optimisticUpserts.delete(g.key),this.optimisticDeletes.add(g.key);break}}const p=new Map;for(const _ of this.transactions.values())if(_.state==="completed")for(const g of _.mutations)g.optimistic&&this.isThisCollection(g.collection)&&u.has(g.key)&&p.set(g.key,{type:g.type,value:g.modified});for(const _ of u){const g=f.get(_),v=this.get(_),x=p.get(_);let k=!1;x&&(x.type==="delete"&&g!==void 0&&v===void 0&&Ar(x.value,g)||v!==void 0&&Ar(x.value,v))&&(k=!0),k||(g===void 0&&v!==void 0?h.push({type:"insert",key:_,value:v}):g!==void 0&&v===void 0?h.push({type:"delete",key:_,value:g}):g!==void 0&&v!==void 0&&!Ar(g,v)&&h.push({type:"update",key:_,value:v,previousValue:g}))}this.size=this.calculateSize(),h.length>0&&this.indexes.updateIndexes(h),this.changes.emitEvents(h,!0),this.pendingSyncedTransactions=s,this.preSyncVisibleState.clear(),Promise.resolve().then(()=>{this.recentlySyncedKeys.clear()}),this.hasReceivedFirstCommit||(this.hasReceivedFirstCommit=!0)}},this.config=e,this.transactions=new hw((n,r)=>n.compareCreatedAt(r)),this.syncedData=new hw(e.compare)}setDeps(e){this.collection=e.collection,this.lifecycle=e.lifecycle,this.changes=e.changes,this.indexes=e.indexes,this._events=e.events}get(e){const{optimisticDeletes:n,optimisticUpserts:r,syncedData:s}=this;if(!n.has(e))return r.has(e)?r.get(e):s.get(e)}has(e){const{optimisticDeletes:n,optimisticUpserts:r,syncedData:s}=this;return n.has(e)?!1:r.has(e)?!0:s.has(e)}*keys(){const{syncedData:e,optimisticDeletes:n,optimisticUpserts:r}=this;for(const s of e.keys())n.has(s)||(yield s);for(const s of r.keys())!e.has(s)&&!n.has(s)&&(yield s)}*values(){for(const e of this.keys()){const n=this.get(e);n!==void 0&&(yield n)}}*entries(){for(const e of this.keys()){const n=this.get(e);n!==void 0&&(yield[e,n])}}*[Symbol.iterator](){for(const[e,n]of this.entries())yield[e,n]}forEach(e){let n=0;for(const[r,s]of this.entries())e(s,r,n++)}map(e){const n=[];let r=0;for(const[s,a]of this.entries())n.push(e(a,s,r++));return n}isThisCollection(e){return e===this.collection}recomputeOptimisticState(e=!1){if(this.isCommittingSyncTransactions&&!e)return;const n=new Map(this.optimisticUpserts),r=new Set(this.optimisticDeletes);this.optimisticUpserts.clear(),this.optimisticDeletes.clear();const s=[];for(const u of this.transactions.values())["completed","failed"].includes(u.state)||s.push(u);for(const u of s)for(const f of u.mutations)if(this.isThisCollection(f.collection)&&f.optimistic)switch(f.type){case"insert":case"update":this.optimisticUpserts.set(f.key,f.modified),this.optimisticDeletes.delete(f.key);break;case"delete":this.optimisticUpserts.delete(f.key),this.optimisticDeletes.add(f.key);break}this.size=this.calculateSize();const a=[];this.collectOptimisticChanges(n,r,a);const l=a.filter(u=>!!(!this.recentlySyncedKeys.has(u.key)||e));if(this.pendingSyncedTransactions.length>0&&!e){const u=new Set;for(const h of this.pendingSyncedTransactions)for(const m of h.operations)u.add(m.key);const f=l.filter(h=>!(h.type==="delete"&&u.has(h.key)&&!s.some(p=>p.mutations.some(_=>this.isThisCollection(_.collection)&&_.key===h.key))));f.length>0&&this.indexes.updateIndexes(f),this.changes.emitEvents(f,e)}else l.length>0&&this.indexes.updateIndexes(l),this.changes.emitEvents(l,e)}calculateSize(){const e=this.syncedData.size,n=Array.from(this.optimisticDeletes).filter(s=>this.syncedData.has(s)&&!this.optimisticUpserts.has(s)).length,r=Array.from(this.optimisticUpserts.keys()).filter(s=>!this.syncedData.has(s)).length;return e-n+r}collectOptimisticChanges(e,n,r){const s=new Set([...e.keys(),...this.optimisticUpserts.keys(),...n,...this.optimisticDeletes]);for(const a of s){const l=this.get(a),u=this.getPreviousValue(a,e,n);u!==void 0&&l===void 0?r.push({type:"delete",key:a,value:u}):u===void 0&&l!==void 0?r.push({type:"insert",key:a,value:l}):u!==void 0&&l!==void 0&&u!==l&&r.push({type:"update",key:a,value:l,previousValue:u})}}getPreviousValue(e,n,r){if(!r.has(e))return n.has(e)?n.get(e):this.syncedData.get(e)}scheduleTransactionCleanup(e){if(e.state==="completed"){this.transactions.delete(e.id);return}e.isPersisted.promise.then(()=>{this.transactions.delete(e.id)}).catch(()=>{})}capturePreSyncVisibleState(){if(this.pendingSyncedTransactions.length===0)return;const e=new Set;for(const n of this.pendingSyncedTransactions)for(const r of n.operations)e.add(r.key);for(const n of e)this.recentlySyncedKeys.add(n);for(const n of e)if(!this.preSyncVisibleState.has(n)){const r=this.get(n);r!==void 0&&this.preSyncVisibleState.set(n,r)}}onTransactionStateChange(){this.changes.shouldBatchEvents=this.pendingSyncedTransactions.length>0,this.capturePreSyncVisibleState(),this.recomputeOptimisticState(!1)}cleanup(){this.syncedData.clear(),this.syncedMetadata.clear(),this.optimisticUpserts.clear(),this.optimisticDeletes.clear(),this.size=0,this.pendingSyncedTransactions=[],this.syncedKeys.clear(),this.hasReceivedFirstCommit=!1}}class rk{constructor(){this.listeners=new Map}on(e,n){return this.listeners.has(e)||this.listeners.set(e,new Set),this.listeners.get(e).add(n),()=>{this.listeners.get(e)?.delete(n)}}once(e,n){const r=this.on(e,s=>{n(s),r()});return r}off(e,n){this.listeners.get(e)?.delete(n)}waitFor(e,n){return new Promise((r,s)=>{let a;const l=this.on(e,u=>{a&&(clearTimeout(a),a=void 0),r(u),l()});n&&(a=setTimeout(()=>{a=void 0,l(),s(new Error(`Timeout waiting for event ${String(e)}`))},n))})}emitInner(e,n){this.listeners.get(e)?.forEach(r=>{try{r(n)}catch(s){queueMicrotask(()=>{throw s})}})}clearListeners(){this.listeners.clear()}}function xM(t,e){if(e.length===0||t.length===0)return;if(t.length===1){const{expression:r,compareOptions:s}=t[0];return(s.direction==="asc"?lw:Gm)(r,new Bn(e[0]))}const n=[];for(let r=0;r<t.length&&r<e.length;r++){const s=t[r],a=e[r],l=[];for(let h=0;h<r;h++){const m=t[h],p=e[h];l.push(Hm(m.expression,new Bn(p)))}const f=(s.compareOptions.direction==="asc"?lw:Gm)(s.expression,new Bn(a));if(l.length===0)n.push(f);else{const h=[...l,f];n.push(h.reduce((m,p)=>Km(m,p)))}}return n.length===1?n[0]:n.reduce((r,s)=>sM(r,s))}class wM extends rk{constructor(e,n,r){super(),this.collection=e,this.callback=n,this.options=r,this.loadedInitialState=!1,this.skipFiltering=!1,this.snapshotSent=!1,this.loadedSubsets=[],this.sentKeys=new Set,this.limitedSnapshotRowCount=0,this._status="ready",this.pendingLoadSubsetPromises=new Set,this.isBufferingForTruncate=!1,this.truncateBuffer=[],this.pendingTruncateRefetches=new Set,r.onUnsubscribe&&this.on("unsubscribed",a=>r.onUnsubscribe(a)),r.whereExpression&&oM(r.whereExpression,this.collection);const s=a=>{n(a),this.trackSentKeys(a)};this.callback=s,this.filteredCallback=r.whereExpression?_M(this.callback,r):this.callback,this.truncateCleanup=this.collection.on("truncate",()=>{this.handleTruncate()})}get status(){return this._status}handleTruncate(){const e=[...this.loadedSubsets],n=this.collection._sync.syncLoadSubsetFn!==null;if(e.length===0||!n){this.snapshotSent=!1,this.loadedInitialState=!1,this.limitedSnapshotRowCount=0,this.lastSentKey=void 0,this.loadedSubsets=[];return}this.isBufferingForTruncate=!0,this.truncateBuffer=[],this.pendingTruncateRefetches.clear(),this.snapshotSent=!1,this.loadedInitialState=!1,this.limitedSnapshotRowCount=0,this.lastSentKey=void 0,this.loadedSubsets=[],queueMicrotask(()=>{if(this.isBufferingForTruncate){for(const r of e){const s=this.collection._sync.loadSubset(r);this.loadedSubsets.push(r),this.trackLoadSubsetPromise(s),s instanceof Promise&&(this.pendingTruncateRefetches.add(s),s.catch(()=>{}).finally(()=>{this.pendingTruncateRefetches.delete(s),this.checkTruncateRefetchComplete()}))}this.pendingTruncateRefetches.size===0&&this.flushTruncateBuffer()}})}checkTruncateRefetchComplete(){this.pendingTruncateRefetches.size===0&&this.isBufferingForTruncate&&this.flushTruncateBuffer()}flushTruncateBuffer(){this.isBufferingForTruncate=!1;const e=this.truncateBuffer.flat();e.length>0&&this.filteredCallback(e),this.truncateBuffer=[]}setOrderByIndex(e){this.orderByIndex=e}setStatus(e){if(this._status===e)return;const n=this._status;this._status=e,this.emitInner("status:change",{type:"status:change",subscription:this,previousStatus:n,status:e});const r=`status:${e}`;this.emitInner(r,{type:r,subscription:this,previousStatus:n,status:e})}trackLoadSubsetPromise(e){e instanceof Promise&&(this.pendingLoadSubsetPromises.add(e),this.setStatus("loadingSubset"),e.finally(()=>{this.pendingLoadSubsetPromises.delete(e),this.pendingLoadSubsetPromises.size===0&&this.setStatus("ready")}))}hasLoadedInitialState(){return this.loadedInitialState}hasSentAtLeastOneSnapshot(){return this.snapshotSent}emitEvents(e){const n=this.filterAndFlipChanges(e);this.isBufferingForTruncate?n.length>0&&this.truncateBuffer.push(n):this.filteredCallback(n)}requestSnapshot(e){if(this.loadedInitialState)return!1;const n={where:this.options.whereExpression,optimizedOnly:e?.optimizedOnly??!1};if(e){if("where"in e){const f=e.where;if(n.where){const h=n.where,m=Km(h,f);n.where=m}else n.where=f}}else this.loadedInitialState=!0;const r={where:n.where,subscription:this,orderBy:e?.orderBy,limit:e?.limit},s=this.collection._sync.loadSubset(r);this.loadedSubsets.push(r),(e?.trackLoadSubsetPromise??!0)&&this.trackLoadSubsetPromise(s);const l=this.collection.currentStateAsChanges(n);if(l===void 0)return!1;const u=l.filter(f=>!this.sentKeys.has(f.key));for(const f of u)this.sentKeys.add(f.key);return this.snapshotSent=!0,this.callback(u),!0}requestLimitedSnapshot({orderBy:e,limit:n,minValues:r,offset:s}){if(!n)throw new Error("limit is required");if(!this.orderByIndex)throw new Error("Ordered snapshot was requested but no index was found. You have to call setOrderByIndex before requesting an ordered snapshot.");const l=r?.[0],u=this.orderByIndex,f=this.options.whereExpression,h=f?_l(f):void 0,m=I=>{if(this.sentKeys.has(I))return!1;const P=this.collection.get(I);return P===void 0?!1:h?.(P)??!0};let p=l;const _=[];let g=[];if(l!==void 0){const{expression:I}=e[0],P=this.collection.currentStateAsChanges({where:Hm(I,new Bn(l))});if(P){const V=P.map(z=>z.key).filter(z=>!this.sentKeys.has(z)&&m(z));g.push(...V);const H=u.take(n-g.length,l,m);g.push(...H)}else g=u.take(n,l,m)}else g=u.take(n,l,m);const v=()=>Math.max(n-_.length,0),x=()=>g.length===0,k=e[0].expression,S=k.type==="ref"?Un(new An(k.path),!0):null;for(;v()>0&&!x();){const I=new Set;for(const P of g){const V=this.collection.get(P);_.push({type:"insert",key:P,value:V}),p=S?S(V):V,I.add(P)}g=u.take(v(),p,m)}const T=this.limitedSnapshotRowCount;for(const I of _)this.sentKeys.add(I.key);this.callback(_),this.limitedSnapshotRowCount+=_.length,_.length>0&&(this.lastSentKey=_[_.length-1].key);let C;if(r!==void 0&&r.length>0){const I=xM(e,r);if(I){const{expression:P}=e[0],V=r[0];let H;if(V instanceof Date){const z=new Date(V.getTime()+1);H=Km(rM(P,new Bn(V)),Gm(P,new Bn(z)))}else H=Hm(P,new Bn(V));C={whereFrom:I,whereCurrent:H,lastKey:this.lastSentKey}}}const L={where:f,limit:n,orderBy:e,cursor:C,offset:s??T,subscription:this},D=this.collection._sync.loadSubset(L);this.loadedSubsets.push(L),this.trackLoadSubsetPromise(D)}filterAndFlipChanges(e){if(this.loadedInitialState||this.skipFiltering)return e;const n=this.isBufferingForTruncate,r=[];for(const s of e){let a=s;if(this.sentKeys.has(s.key)){if(s.type==="insert")continue;s.type==="delete"&&this.sentKeys.delete(s.key)}else{if(s.type==="update")a={...s,type:"insert",previousValue:void 0};else if(s.type==="delete"&&!n)continue;this.sentKeys.add(s.key)}r.push(a)}return r}trackSentKeys(e){if(!(this.loadedInitialState||this.skipFiltering))for(const n of e)n.type==="delete"?this.sentKeys.delete(n.key):this.sentKeys.add(n.key)}markAllStateAsSeen(){this.skipFiltering=!0}unsubscribe(){this.truncateCleanup?.(),this.truncateCleanup=void 0,this.isBufferingForTruncate=!1,this.truncateBuffer=[],this.pendingTruncateRefetches.clear();for(const e of this.loadedSubsets)this.collection._sync.unloadSubset(e);this.loadedSubsets=[],this.emitInner("unsubscribed",{type:"unsubscribed",subscription:this}),this.clearListeners()}}class SM{constructor(){this.activeSubscribersCount=0,this.changeSubscriptions=new Set,this.batchedEvents=[],this.shouldBatchEvents=!1}setDeps(e){this.lifecycle=e.lifecycle,this.sync=e.sync,this.events=e.events,this.collection=e.collection}emitEmptyReadyEvent(){for(const e of this.changeSubscriptions)e.emitEvents([])}emitEvents(e,n=!1){if(this.shouldBatchEvents&&!n){this.batchedEvents.push(...e);return}let r=e;if(n&&(this.batchedEvents.length>0&&(r=[...this.batchedEvents,...e]),this.batchedEvents=[],this.shouldBatchEvents=!1),r.length!==0)for(const s of this.changeSubscriptions)s.emitEvents(r)}subscribeChanges(e,n={}){this.addSubscriber();const r=new wM(this.collection,e,{...n,onUnsubscribe:()=>{this.removeSubscriber(),this.changeSubscriptions.delete(r)}});return n.includeInitialState?r.requestSnapshot({trackLoadSubsetPromise:!1}):n.includeInitialState===!1&&r.markAllStateAsSeen(),this.changeSubscriptions.add(r),r}addSubscriber(){const e=this.activeSubscribersCount;this.activeSubscribersCount++,this.lifecycle.cancelGCTimer(),(this.lifecycle.status==="cleaned-up"||this.lifecycle.status==="idle")&&this.sync.startSync(),this.events.emitSubscribersChange(this.activeSubscribersCount,e)}removeSubscriber(){const e=this.activeSubscribersCount;if(this.activeSubscribersCount--,this.activeSubscribersCount===0)this.lifecycle.startGCTimer();else if(this.activeSubscribersCount<0)throw new I2;this.events.emitSubscribersChange(this.activeSubscribersCount,e)}cleanup(){this.batchedEvents=[],this.shouldBatchEvents=!1}}const kM=t=>setTimeout(()=>{t({didTimeout:!0,timeRemaining:()=>50})},0),EM=t=>{clearTimeout(t)},CM=typeof window<"u"&&"requestIdleCallback"in window?(t,e)=>window.requestIdleCallback(t,e):(t,e)=>kM(t),Qp=typeof window<"u"&&"cancelIdleCallback"in window?t=>window.cancelIdleCallback(t):EM;class TM{constructor(e,n){this.status="idle",this.hasBeenReady=!1,this.hasReceivedFirstCommit=!1,this.onFirstReadyCallbacks=[],this.gcTimeoutId=null,this.idleCallbackId=null,this.config=e,this.id=n}setDeps(e){this.indexes=e.indexes,this.events=e.events,this.changes=e.changes,this.sync=e.sync,this.state=e.state}validateStatusTransition(e,n){if(e===n)return;if(!{idle:["loading","error","cleaned-up"],loading:["ready","error","cleaned-up"],ready:["cleaned-up","error"],error:["cleaned-up","idle"],"cleaned-up":["loading","error"]}[e].includes(n))throw new R2(e,n,this.id)}setStatus(e,n=!1){if(e==="ready"&&!n)throw new Hl(`You can't directly call "setStatus('ready'). You must use markReady instead.`);this.validateStatusTransition(this.status,e);const r=this.status;this.status=e,e==="ready"&&!this.indexes.isIndexesResolved&&this.indexes.resolveAllIndexes().catch(s=>{console.warn(`${this.config.id?`[${this.config.id}] `:""}Failed to resolve indexes:`,s)}),this.events.emitStatusChange(e,r)}validateCollectionUsable(e){switch(this.status){case"error":throw new A2(e,this.id);case"cleaned-up":this.sync.startSync();break}}markReady(){if(this.validateStatusTransition(this.status,"ready"),this.status==="loading"){if(this.setStatus("ready",!0),!this.hasBeenReady){this.hasBeenReady=!0,this.hasReceivedFirstCommit||(this.hasReceivedFirstCommit=!0);const e=[...this.onFirstReadyCallbacks];this.onFirstReadyCallbacks=[],e.forEach(n=>n())}this.changes.changeSubscriptions.size>0&&this.changes.emitEmptyReadyEvent()}}startGCTimer(){this.gcTimeoutId&&clearTimeout(this.gcTimeoutId);const e=this.config.gcTime??3e5;e!==0&&(this.gcTimeoutId=setTimeout(()=>{this.changes.activeSubscribersCount===0&&this.scheduleIdleCleanup()},e))}cancelGCTimer(){this.gcTimeoutId&&(clearTimeout(this.gcTimeoutId),this.gcTimeoutId=null),this.idleCallbackId!==null&&(Qp(this.idleCallbackId),this.idleCallbackId=null)}scheduleIdleCleanup(){this.idleCallbackId!==null&&Qp(this.idleCallbackId),this.idleCallbackId=CM(e=>{this.changes.activeSubscribersCount===0?this.performCleanup(e)&&(this.idleCallbackId=null):this.idleCallbackId=null},{timeout:1e3})}performCleanup(e){return!e||e.timeRemaining()>0||e.didTimeout?(this.sync.cleanup(),this.state.cleanup(),this.changes.cleanup(),this.indexes.cleanup(),this.gcTimeoutId&&(clearTimeout(this.gcTimeoutId),this.gcTimeoutId=null),this.hasBeenReady=!1,this.onFirstReadyCallbacks=[],this.setStatus("cleaned-up"),this.events.cleanup(),!0):(this.scheduleIdleCleanup(),!1)}onFirstReady(e){if(this.hasBeenReady){e();return}this.onFirstReadyCallbacks.push(e)}cleanup(){this.idleCallbackId!==null&&(Qp(this.idleCallbackId),this.idleCallbackId=null),this.performCleanup()}}const ly=Symbol("liveQueryInternal");class AM{constructor(e,n){this.preloadPromise=null,this.syncCleanupFn=null,this.syncLoadSubsetFn=null,this.syncUnloadSubsetFn=null,this.pendingLoadSubsetPromises=new Set,this.config=e,this.id=n,this.syncMode=e.syncMode??"eager"}setDeps(e){this.collection=e.collection,this.state=e.state,this.lifecycle=e.lifecycle,this._events=e.events}startSync(){if(!(this.lifecycle.status!=="idle"&&this.lifecycle.status!=="cleaned-up")){this.lifecycle.setStatus("loading");try{const e=RM(this.config.sync.sync({collection:this.collection,begin:()=>{this.state.pendingSyncedTransactions.push({committed:!1,operations:[],deletedKeys:new Set})},write:n=>{const r=this.state.pendingSyncedTransactions[this.state.pendingSyncedTransactions.length-1];if(!r)throw new Hx;if(r.committed)throw new Gx;let s;"key"in n?s=n.key:s=this.config.getKey(n.value);let a=n.type;if(n.type==="insert"){const u=this.state.syncedData.has(s),f=r.deletedKeys.has(s),h=r.truncate===!0;if(u&&!f&&!h){const m=this.state.syncedData.get(s);if(m!==void 0&&Ar(m,n.value))a="update";else{const _=this.config.utils[ly];throw new L2(s,this.id,{hasCustomGetKey:_?.hasCustomGetKey??!1,hasJoins:_?.hasJoins??!1})}}}const l={...n,type:a,key:s};r.operations.push(l),a==="delete"&&r.deletedKeys.add(s)},commit:()=>{const n=this.state.pendingSyncedTransactions[this.state.pendingSyncedTransactions.length-1];if(!n)throw new Q2;if(n.committed)throw new J2;n.committed=!0,this.state.commitPendingTransactions()},markReady:()=>{this.lifecycle.markReady()},truncate:()=>{const n=this.state.pendingSyncedTransactions[this.state.pendingSyncedTransactions.length-1];if(!n)throw new Hx;if(n.committed)throw new Gx;n.operations=[],n.deletedKeys.clear(),n.truncate=!0,n.optimisticSnapshot={upserts:new Map(this.state.optimisticUpserts),deletes:new Set(this.state.optimisticDeletes)}}}));if(this.syncCleanupFn=e?.cleanup??null,this.syncLoadSubsetFn=e?.loadSubset??null,this.syncUnloadSubsetFn=e?.unloadSubset??null,this.syncMode==="on-demand"&&!this.syncLoadSubsetFn)throw new Vl(`Collection "${this.id}" is configured with syncMode "on-demand" but the sync function did not return a loadSubset handler. Either provide a loadSubset handler or use syncMode "eager".`)}catch(e){throw this.lifecycle.setStatus("error"),e}}}preload(){return this.preloadPromise?this.preloadPromise:(this.syncMode==="on-demand"&&console.warn(`${this.id?`[${this.id}] `:""}Calling .preload() on a collection with syncMode "on-demand" is a no-op. In on-demand mode, data is only loaded when queries request it. Instead, create a live query and call .preload() on that to load the specific data you need. See https://tanstack.com/blog/tanstack-db-0.5-query-driven-sync for more details.`),this.preloadPromise=new Promise((e,n)=>{if(this.lifecycle.status==="ready"){e();return}if(this.lifecycle.status==="error"){n(new O2);return}if(this.lifecycle.onFirstReady(()=>{e()}),this.lifecycle.status==="idle"||this.lifecycle.status==="cleaned-up")try{this.startSync()}catch(r){n(r);return}}),this.preloadPromise)}get isLoadingSubset(){return this.pendingLoadSubsetPromises.size>0}trackLoadPromise(e){const n=!this.isLoadingSubset;this.pendingLoadSubsetPromises.add(e),n&&this._events.emit("loadingSubset:change",{type:"loadingSubset:change",collection:this.collection,isLoadingSubset:!0,previousIsLoadingSubset:!1,loadingSubsetTransition:"start"}),e.finally(()=>{const r=this.pendingLoadSubsetPromises.size===1&&this.pendingLoadSubsetPromises.has(e);this.pendingLoadSubsetPromises.delete(e),r&&this._events.emit("loadingSubset:change",{type:"loadingSubset:change",collection:this.collection,isLoadingSubset:!1,previousIsLoadingSubset:!0,loadingSubsetTransition:"end"})})}loadSubset(e){if(this.syncMode==="eager")return!0;if(this.syncLoadSubsetFn){const n=this.syncLoadSubsetFn(e);if(n instanceof Promise)return this.trackLoadPromise(n),n}return!0}unloadSubset(e){this.syncUnloadSubsetFn&&this.syncUnloadSubsetFn(e)}cleanup(){try{this.syncCleanupFn&&(this.syncCleanupFn(),this.syncCleanupFn=null)}catch(e){queueMicrotask(()=>{if(e instanceof Error){const n=new Zx(this.id,e);throw n.cause=e,n.stack=e.stack,n}else throw new Zx(this.id,e)})}this.preloadPromise=null}}function RM(t){if(typeof t=="function")return{cleanup:t};if(typeof t=="object")return t}function sk(t){return typeof t=="function"&&t.prototype!==void 0&&t.prototype.constructor===t}async function OM(t){return sk(t)?t:await t()}class IM{constructor(e,n,r,s,a,l){this.id=e,this.expression=n,this.name=r,this.resolver=s,this.options=a,this.collectionEntries=l,this.indexPromise=null,this.resolvedIndex=null,sk(this.resolver)&&(this.resolvedIndex=new this.resolver(this.id,this.expression,this.name,this.options),this.collectionEntries&&this.resolvedIndex.build(this.collectionEntries))}async resolve(){return this.resolvedIndex?this.resolvedIndex:(this.indexPromise||(this.indexPromise=this.createIndex()),this.resolvedIndex=await this.indexPromise,this.resolvedIndex)}isResolved(){return this.resolvedIndex!==null}getResolved(){if(!this.resolvedIndex)throw new Error(`Index ${this.id} has not been resolved yet. Ensure collection is synced.`);return this.resolvedIndex}getId(){return this.id}getName(){return this.name}getExpression(){return this.expression}async createIndex(){const e=await OM(this.resolver);return new e(this.id,this.expression,this.name,this.options)}}class NM{constructor(e,n){this.indexId=e,this.lazyIndex=n}get index(){return this.lazyIndex.getResolved()}get isReady(){return this.lazyIndex.isResolved()}async whenReady(){return await this.lazyIndex.resolve()}get id(){return this.indexId}get name(){return this.isReady?this.index.name:this.lazyIndex.getName()}get expression(){return this.lazyIndex.getExpression()}supports(e){return this.index.supports(e)}getStats(){return this.index.getStats()}matchesField(e){const n=this.expression;return n.type==="ref"&&n.path.length===e.length&&n.path.every((r,s)=>r===e[s])}get keyCount(){return this.index.keyCount}get indexedKeysSet(){return this.index.indexedKeysSet}get orderedEntriesArray(){return this.index.orderedEntriesArray}get valueMapData(){return this.index.valueMapData}equalityLookup(e){return this.index.equalityLookup?.(e)??new Set}rangeQuery(e){return this.index.rangeQuery?.(e)??new Set}inArrayLookup(e){return this.index.inArrayLookup?.(e)??new Set}_getLazyWrapper(){return this.lazyIndex}}class MM{constructor(){this.lazyIndexes=new Map,this.resolvedIndexes=new Map,this.isIndexesResolved=!1,this.indexCounter=0}setDeps(e){this.state=e.state,this.lifecycle=e.lifecycle}createIndex(e,n={}){this.lifecycle.validateCollectionUsable("createIndex");const r=++this.indexCounter,s=tM(),a=e(s),l=tn(a),u=n.indexType??Zm,f=new IM(r,l,n.name,u,n.options,this.state.entries());if(this.lazyIndexes.set(r,f),u===Zm)try{const h=f.getResolved();this.resolvedIndexes.set(r,h)}catch(h){console.warn("Failed to resolve BTreeIndex:",h)}else if(typeof u=="function"&&u.prototype)try{const h=f.getResolved();this.resolvedIndexes.set(r,h)}catch{this.resolveSingleIndex(r,f).catch(h=>{console.warn("Failed to resolve single index:",h)})}else this.isIndexesResolved&&this.resolveSingleIndex(r,f).catch(h=>{console.warn("Failed to resolve single index:",h)});return new NM(r,f)}async resolveAllIndexes(){if(this.isIndexesResolved)return;const e=Array.from(this.lazyIndexes.entries()).map(async([n,r])=>{const s=await r.resolve();return s.build(this.state.entries()),this.resolvedIndexes.set(n,s),{indexId:n,resolvedIndex:s}});await Promise.all(e),this.isIndexesResolved=!0}async resolveSingleIndex(e,n){const r=await n.resolve();return r.build(this.state.entries()),this.resolvedIndexes.set(e,r),r}get indexes(){return this.resolvedIndexes}updateIndexes(e){for(const n of this.resolvedIndexes.values())for(const r of e)switch(r.type){case"insert":n.add(r.key,r.value);break;case"update":r.previousValue?n.update(r.key,r.previousValue,r.value):n.add(r.key,r.value);break;case"delete":n.remove(r.key,r.value);break}}cleanup(){this.lazyIndexes.clear(),this.resolvedIndexes.clear()}}var DM={};const LM=new Set(["find","findLast","findIndex","findLastIndex","filter","map","flatMap","forEach","some","every","reduce","reduceRight"]),zM=new Set(["pop","push","shift","unshift","splice","sort","reverse","fill","copyWithin"]),jM=new Set(["set","delete","clear","add"]),PM=new Set(["entries","keys","values","forEach"]);function cy(t){return t!==null&&typeof t=="object"&&!(t instanceof Date)&&!(t instanceof RegExp)&&!af(t)}function BM(t,e,n,r){if(LM.has(t))return function(...s){const a=s[0];if(typeof a!="function")return e.apply(n.copy_,s);const l=(h,m)=>{if(cy(h)){const p={tracker:n,prop:String(m)},{proxy:_}=r(h,p);return _}return h},u=function(h,m,p){const _=l(h,m);return a.call(this,_,m,p)};if(t==="reduce"||t==="reduceRight"){const h=function(m,p,_,g){const v=l(p,_);return a.call(this,m,v,_,g)};return e.apply(n.copy_,[h,...s.slice(1)])}const f=e.apply(n.copy_,[u,...s.slice(1)]);if((t==="find"||t==="findLast")&&f&&typeof f=="object"){const h=n.copy_.indexOf(f);if(h!==-1)return l(f,h)}return t==="filter"&&Array.isArray(f)?f.map(h=>{const m=n.copy_.indexOf(h);return m!==-1?l(h,m):h}):f}}function UM(t,e){return function(){const n=t.copy_;let r=0;return{next(){if(r>=n.length)return{done:!0,value:void 0};const s=n[r];let a=s;if(cy(s)){const l={tracker:t,prop:String(r)},{proxy:u}=e(s,l);a=u}return r++,{done:!1,value:a}},[Symbol.iterator](){return this}}}}function dw(t,e,n){return function(...r){const s=t.apply(e.copy_,r);return n(e),s}}function $M(t,e,n,r,s,a,l){if(PM.has(t)||e===Symbol.iterator)return function(...f){const h=n.apply(s.copy_,f);if(t==="forEach"){const p=f[0];if(typeof p=="function"){const _=function(g,v,x){const k=p.call(this,g,v,x);return l(s),k};return n.apply(r,[_,...f.slice(1)])}}if(t==="entries"||t==="values"||t===Symbol.iterator.toString()||e===Symbol.iterator){const p=h,_=new Map;if(t==="values"&&r instanceof Map)for(const[v,x]of s.copy_.entries())_.set(x,v);const g=new Map;if(r instanceof Set)for(const v of s.copy_.values())g.set(v,v);return{next(){const v=p.next();if(!v.done&&v.value&&typeof v.value=="object"){if(t==="entries"&&Array.isArray(v.value)&&v.value.length===2){if(v.value[1]&&typeof v.value[1]=="object"){const x=v.value[0],k={tracker:s,prop:x,updateMap:T=>{s.copy_ instanceof Map&&s.copy_.set(x,T)}},{proxy:S}=a(v.value[1],k);v.value[1]=S}}else if(t==="values"||t===Symbol.iterator.toString()||e===Symbol.iterator)if(t==="values"&&r instanceof Map){const x=_.get(v.value);if(x!==void 0){const k={tracker:s,prop:x,updateMap:T=>{s.copy_ instanceof Map&&s.copy_.set(x,T)}},{proxy:S}=a(v.value,k);v.value=S}}else if(r instanceof Set){const x=v.value,k={tracker:s,prop:x,updateSet:T=>{s.copy_ instanceof Set&&(s.copy_.delete(x),s.copy_.add(T),g.set(x,T))}},{proxy:S}=a(v.value,k);v.value=S}else{const x=Symbol("iterator-value"),{proxy:k}=a(v.value,{tracker:s,prop:x});v.value=k}}return v},[Symbol.iterator](){return this}}}return h}}function Je(...t){const e=typeof window<"u"&&typeof localStorage<"u";e&&localStorage.getItem("DEBUG")==="true"?console.log("[proxy]",...t):!e&&typeof process<"u"&&DM.DEBUG==="true"&&console.log("[proxy]",...t)}function ms(t,e=new WeakMap){if(t==null||typeof t!="object")return t;if(e.has(t))return e.get(t);if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp)return new RegExp(t.source,t.flags);if(Array.isArray(t)){const s=[];return e.set(t,s),t.forEach((a,l)=>{s[l]=ms(a,e)}),s}if(ArrayBuffer.isView(t)&&!(t instanceof DataView)){const s=Object.getPrototypeOf(t).constructor,a=new s(t.length);e.set(t,a);for(let l=0;l<t.length;l++)a[l]=t[l];return a}if(t instanceof Map){const s=new Map;return e.set(t,s),t.forEach((a,l)=>{s.set(l,ms(a,e))}),s}if(t instanceof Set){const s=new Set;return e.set(t,s),t.forEach(a=>{s.add(ms(a,e))}),s}if(af(t))return t;const n={};e.set(t,n);for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(n[s]=ms(t[s],e));const r=Object.getOwnPropertySymbols(t);for(const s of r)n[s]=ms(t[s],e);return n}let pw=0;function qM(){return pw+=1,pw}function uy(t,e){const n=new Map;function r(p,_){if(Je("Object ID:",p.constructor.name),n.has(p))return n.get(p);{const g=uy(p,_);return n.set(p,g),g}}const s=new Map,a={copy_:ms(t),originalObject:ms(t),proxyCount:qM(),modified:!1,assigned_:{},parent:e,target:t};Je("createChangeProxy called for target",t,a.proxyCount);function l(p){p.modified||(p.modified=!0),p.parent&&(Je("propagating change to parent"),"updateMap"in p.parent?p.parent.updateMap(p.copy_):"updateSet"in p.parent?p.parent.updateSet(p.copy_):(p.parent.tracker.copy_[p.parent.prop]=p.copy_,p.parent.tracker.assigned_[p.parent.prop]=!0),l(p.parent.tracker))}function u(p){if(Je("checkIfReverted called with assigned keys:",Object.keys(p.assigned_)),Object.keys(p.assigned_).length===0&&Object.getOwnPropertySymbols(p.assigned_).length===0)return Je("No assigned properties, returning true"),!0;for(const g in p.assigned_)if(p.assigned_[g]===!0){const v=p.copy_[g],x=p.originalObject[g];if(Je(`Checking property ${String(g)}, current:`,v,"original:",x),!Ar(v,x))return Je(`Property ${String(g)} is different, returning false`),!1}else if(p.assigned_[g]===!1)return Je(`Property ${String(g)} was deleted, returning false`),!1;const _=Object.getOwnPropertySymbols(p.assigned_);for(const g of _)if(p.assigned_[g]===!0){const v=p.copy_[g],x=p.originalObject[g];if(!Ar(v,x))return Je("Symbol property is different, returning false"),!1}else if(p.assigned_[g]===!1)return Je("Symbol property was deleted, returning false"),!1;return Je("All properties match original values, returning true"),!0}function f(p,_){Je("checkParentStatus called for child prop:",_);const g=u(p);Je("Parent checkIfReverted returned:",g),g&&(Je("Parent is fully reverted, clearing tracking"),p.modified=!1,p.assigned_={},p.parent&&(Je("Continuing up the parent chain"),f(p.parent.tracker,p.parent.prop)))}function h(p){if(Je("createObjectProxy",p),s.has(p))return Je("proxyCache found match"),s.get(p);const _=new Proxy(p,{get(g,v){Je("get",g,v);const x=a.copy_[v]??a.originalObject[v],k=a.originalObject[v];if(Je("value (at top of proxy get)",x),Object.getOwnPropertyDescriptor(g,v)?.get)return x;if(typeof x=="function"){if(Array.isArray(g)){const T=v.toString();if(zM.has(T))return dw(x,a,l);const C=BM(T,x,a,r);if(C)return C;if(v===Symbol.iterator)return UM(a,r)}if(g instanceof Map||g instanceof Set){const T=v.toString();if(jM.has(T))return dw(x,a,l);const C=$M(T,v,x,g,a,r,l);if(C)return C}return x.bind(g)}if(cy(x)){const T={tracker:a,prop:String(v)},{proxy:C}=r(k,T);return s.set(x,C),C}return x},set(g,v,x){const k=a.copy_[v];if(Je(`set called for property ${String(v)}, current:`,k,"new:",x),Ar(k,x))Je("Value unchanged, not tracking");else{const S=a.originalObject[v],T=Ar(x,S);if(Je("value:",x,"original:",S,"isRevertToOriginal:",T),T){Je(`Reverting property ${String(v)} to original value`),delete a.assigned_[v.toString()],Je(`Updating copy with original value for ${String(v)}`),a.copy_[v]=ms(S),Je("Checking if all properties reverted");const C=u(a);Je("All reverted:",C),C?(Je("All properties reverted, clearing tracking"),a.modified=!1,a.assigned_={},e&&(Je("Updating parent for property:",e.prop),f(e.tracker,e.prop))):(Je("Some properties still changed, keeping modified flag"),a.modified=!0)}else Je(`Setting new value for property ${String(v)}`),a.copy_[v]=x,a.assigned_[v.toString()]=!0,Je("Marking object and ancestors as modified",a),l(a)}return!0},defineProperty(g,v,x){const k=Reflect.defineProperty(g,v,x);return k&&"value"in x&&(a.copy_[v]=ms(x.value),a.assigned_[v.toString()]=!0,l(a)),k},getOwnPropertyDescriptor(g,v){return Reflect.getOwnPropertyDescriptor(g,v)},preventExtensions(g){return Reflect.preventExtensions(g)},isExtensible(g){return Reflect.isExtensible(g)},deleteProperty(g,v){Je("deleteProperty",g,v);const x=typeof v=="symbol"?v.toString():v;if(x in g){const k=x in a.originalObject,S=Reflect.deleteProperty(g,v);return S&&(k?(a.assigned_[x]=!1,l(a)):(delete a.assigned_[x],Object.keys(a.assigned_).length===0&&Object.getOwnPropertySymbols(a.assigned_).length===0?a.modified=!1:a.modified=!0)),S}return!0}});return s.set(p,_),_}return{proxy:h(a.copy_),getChanges:()=>{if(Je("getChanges called, modified:",a.modified),Je(a),!a.modified)return Je("Object not modified, returning empty object"),{};if(typeof a.copy_!="object"||Array.isArray(a.copy_)||Object.keys(a.assigned_).length===0)return a.copy_;const p={};for(const _ in a.copy_)a.assigned_[_]===!0&&_ in a.copy_&&(p[_]=a.copy_[_]);return Je("Returning copy:",p),p}}}function FM(t){const e=t.map(n=>uy(n));return{proxies:e.map(n=>n.proxy),getChanges:()=>e.map(n=>n.getChanges())}}function VM(t,e){const{proxy:n,getChanges:r}=uy(t);return e(n),r()}function HM(t,e){const{proxies:n,getChanges:r}=FM(t);return e(n),r()}function GM(){let t,e,n=!0;return{promise:new Promise((s,a)=>{t=l=>{n=!1,s(l)},e=l=>{n=!1,a(l)}}),resolve:t,reject:e,isPending:()=>n}}function KM(t){return typeof t=="object"&&t!==null&&typeof t.hasPendingGraphRun=="function"}class ZM{constructor(){this.contexts=new Map,this.clearListeners=new Set}getOrCreateContext(e){let n=this.contexts.get(e);return n||(n={queue:[],jobs:new Map,dependencies:new Map,completed:new Set},this.contexts.set(e,n)),n}schedule({contextId:e,jobId:n,dependencies:r,run:s}){if(typeof e>"u"){s();return}const a=this.getOrCreateContext(e);if(a.jobs.has(n)||a.queue.push(n),a.jobs.set(n,s),r){const l=new Set(r);l.delete(n),a.dependencies.set(n,l)}else a.dependencies.has(n)||a.dependencies.set(n,new Set);a.completed.delete(n)}flush(e){const n=this.contexts.get(e);if(!n)return;const{queue:r,jobs:s,dependencies:a,completed:l}=n;for(;r.length>0;){let u=!1;const f=r.length;for(let h=0;h<f;h++){const m=r.shift(),p=s.get(m);if(!p){a.delete(m),l.delete(m);continue}const _=a.get(m);let g=!_;if(_){g=!0;for(const v of _){if(v===m)continue;const x=KM(v)&&v.hasPendingGraphRun(e);if(s.has(v)&&!l.has(v)||!s.has(v)&&x){g=!1;break}}}g?(s.delete(m),a.delete(m),p(),l.add(m),u=!0):r.push(m)}if(!u)throw new Error(`Scheduler detected unresolved dependencies for context ${String(e)}.`)}this.contexts.delete(e)}flushAll(){for(const e of Array.from(this.contexts.keys()))this.flush(e)}clear(e){this.contexts.delete(e),this.clearListeners.forEach(n=>n(e))}onClear(e){return this.clearListeners.add(e),()=>this.clearListeners.delete(e)}hasPendingJobs(e){const n=this.contexts.get(e);return!!n&&n.jobs.size>0}clearJob(e,n){const r=this.contexts.get(e);r&&(r.jobs.delete(n),r.dependencies.delete(n),r.completed.delete(n),r.queue=r.queue.filter(s=>s!==n),r.jobs.size===0&&this.contexts.delete(e))}}const uf=new ZM,ff=[];let Nl=[],QM=0;function JM(t,e){switch(`${t.type}-${e.type}`){case"insert-update":return{...t,type:"insert",original:{},modified:e.modified,changes:{...t.changes,...e.changes},key:t.key,globalKey:t.globalKey,metadata:e.metadata??t.metadata,syncMetadata:{...t.syncMetadata,...e.syncMetadata},mutationId:e.mutationId,updatedAt:e.updatedAt};case"insert-delete":return null;case"update-delete":return e;case"update-update":return{...e,original:t.original,changes:{...t.changes,...e.changes},metadata:e.metadata??t.metadata,syncMetadata:{...t.syncMetadata,...e.syncMetadata}};case"delete-delete":case"insert-insert":return e;default:{const n=`${t.type}-${e.type}`;throw new Error(`Unhandled mutation combination: ${n}`)}}}function xu(t){const e=new eD(t);return ff.push(e),e}function qu(){if(Nl.length>0)return Nl.slice(-1)[0]}function YM(t){uf.clear(t.id),Nl.push(t)}function XM(t){try{uf.flush(t.id)}finally{Nl=Nl.filter(e=>e.id!==t.id)}}function WM(t){const e=ff.findIndex(n=>n.id===t.id);e!==-1&&ff.splice(e,1)}class eD{constructor(e){if(typeof e.mutationFn>"u")throw new H2;this.id=e.id??crypto.randomUUID(),this.mutationFn=e.mutationFn,this.state="pending",this.mutations=[],this.isPersisted=GM(),this.autoCommit=e.autoCommit??!0,this.createdAt=new Date,this.sequenceNumber=QM++,this.metadata=e.metadata??{}}setState(e){this.state=e,(e==="completed"||e==="failed")&&WM(this)}mutate(e){if(this.state!=="pending")throw new G2;YM(this);try{e()}finally{XM(this)}return this.autoCommit&&this.commit().catch(()=>{}),this}applyMutations(e){for(const n of e){const r=this.mutations.findIndex(s=>s.globalKey===n.globalKey);if(r>=0){const s=this.mutations[r],a=JM(s,n);a===null?this.mutations.splice(r,1):this.mutations[r]=a}else this.mutations.push(n)}}rollback(e){const n=e?.isSecondaryRollback??!1;if(this.state==="completed")throw new K2;if(this.setState("failed"),!n){const r=new Set;this.mutations.forEach(s=>r.add(s.globalKey));for(const s of ff)s.state==="pending"&&s.mutations.some(a=>r.has(a.globalKey))&&s.rollback({isSecondaryRollback:!0})}return this.isPersisted.reject(this.error?.error),this.touchCollection(),this}touchCollection(){const e=new Set;for(const n of this.mutations)e.has(n.collection.id)||(n.collection._state.onTransactionStateChange(),n.collection._state.pendingSyncedTransactions.length>0&&n.collection._state.commitPendingTransactions(),e.add(n.collection.id))}async commit(){if(this.state!=="pending")throw new Z2;if(this.setState("persisting"),this.mutations.length===0)return this.setState("completed"),this.isPersisted.resolve(this),this;try{await this.mutationFn({transaction:this}),this.setState("completed"),this.touchCollection(),this.isPersisted.resolve(this)}catch(e){const n=e instanceof Error?e:new Error(String(e));throw this.error={message:n.message,error:n},this.rollback(),n}return this}compareCreatedAt(e){const n=this.createdAt.getTime()-e.createdAt.getTime();return n!==0?n:this.sequenceNumber-e.sequenceNumber}}class tD{constructor(e,n){this.insert=(r,s)=>{this.lifecycle.validateCollectionUsable("insert");const a=this.state,l=qu();if(!l&&!this.config.onInsert)throw new q2;const u=Array.isArray(r)?r:[r],f=[],h=new Set;if(u.forEach(m=>{const p=this.validateData(m,"insert"),_=this.config.getKey(p);if(this.state.has(_)||h.has(_))throw new D2(_);h.add(_);const g=this.generateGlobalKey(_,m),v={mutationId:crypto.randomUUID(),original:{},modified:p,changes:Object.fromEntries(Object.keys(m).map(x=>[x,p[x]])),globalKey:g,key:_,metadata:s?.metadata,syncMetadata:this.config.sync.getSyncMetadata?.()||{},optimistic:s?.optimistic??!0,type:"insert",createdAt:new Date,updatedAt:new Date,collection:this.collection};f.push(v)}),l)return l.applyMutations(f),a.transactions.set(l.id,l),a.scheduleTransactionCleanup(l),a.recomputeOptimisticState(!0),l;{const m=xu({mutationFn:async p=>await this.config.onInsert({transaction:p.transaction,collection:this.collection})});return m.applyMutations(f),m.commit().catch(()=>{}),a.transactions.set(m.id,m),a.scheduleTransactionCleanup(m),a.recomputeOptimisticState(!0),m}},this.delete=(r,s)=>{const a=this.state;this.lifecycle.validateCollectionUsable("delete");const l=qu();if(!l&&!this.config.onDelete)throw new V2;if(Array.isArray(r)&&r.length===0)throw new U2;const u=Array.isArray(r)?r:[r],f=[];for(const m of u){if(!this.state.has(m))throw new $2(m);const p=this.generateGlobalKey(m,this.state.get(m)),_={mutationId:crypto.randomUUID(),original:this.state.get(m),modified:this.state.get(m),changes:this.state.get(m),globalKey:p,key:m,metadata:s?.metadata,syncMetadata:a.syncedMetadata.get(m)||{},optimistic:s?.optimistic??!0,type:"delete",createdAt:new Date,updatedAt:new Date,collection:this.collection};f.push(_)}if(l)return l.applyMutations(f),a.transactions.set(l.id,l),a.scheduleTransactionCleanup(l),a.recomputeOptimisticState(!0),l;const h=xu({autoCommit:!0,mutationFn:async m=>this.config.onDelete({transaction:m.transaction,collection:this.collection})});return h.applyMutations(f),h.commit().catch(()=>{}),a.transactions.set(h.id,h),a.scheduleTransactionCleanup(h),a.recomputeOptimisticState(!0),h},this.id=n,this.config=e}setDeps(e){this.lifecycle=e.lifecycle,this.state=e.state,this.collection=e.collection}ensureStandardSchema(e){if(e&&"~standard"in e)return e;throw new T2}validateData(e,n,r){if(!this.config.schema)return e;const s=this.ensureStandardSchema(this.config.schema);if(n==="update"&&r){const l=this.state.get(r);if(l&&e&&typeof e=="object"&&typeof l=="object"){const u=Object.assign({},l,e),f=s["~standard"].validate(u);if(f instanceof Promise)throw new Vx;if("issues"in f&&f.issues){const _=f.issues.map(g=>({message:g.message,path:g.path?.map(v=>String(v))}));throw new Fx(n,_)}const h=f.value,m=Object.keys(e);return Object.fromEntries(m.map(_=>[_,h[_]]))}}const a=s["~standard"].validate(e);if(a instanceof Promise)throw new Vx;if("issues"in a&&a.issues){const l=a.issues.map(u=>({message:u.message,path:u.path?.map(f=>String(f))}));throw new Fx(n,l)}return a.value}generateGlobalKey(e,n){if(typeof e!="string"&&typeof e!="number")throw typeof e>"u"?new N2(n):new M2(e,n);return`KEY::${this.id}/${e}`}update(e,n,r){if(typeof e>"u")throw new z2;const s=this.state;this.lifecycle.validateCollectionUsable("update");const a=qu();if(!a&&!this.config.onUpdate)throw new F2;const l=Array.isArray(e),u=l?e:[e];if(l&&u.length===0)throw new j2;const f=typeof n=="function"?n:r,h=typeof n=="function"?{}:n,m=u.map(v=>{const x=this.state.get(v);if(!x)throw new P2(v);return x});let p;l?p=HM(m,f):p=[VM(m[0],f)];const _=u.map((v,x)=>{const k=p[x];if(!k||Object.keys(k).length===0)return null;const S=m[x],T=this.validateData(k,"update",v),C=Object.assign({},S,T),L=this.config.getKey(S),D=this.config.getKey(C);if(L!==D)throw new B2(L,D);const I=this.generateGlobalKey(D,C);return{mutationId:crypto.randomUUID(),original:S,modified:C,changes:Object.fromEntries(Object.keys(k).map(P=>[P,C[P]])),globalKey:I,key:v,metadata:h.metadata,syncMetadata:s.syncedMetadata.get(v)||{},optimistic:h.optimistic??!0,type:"update",createdAt:new Date,updatedAt:new Date,collection:this.collection}}).filter(Boolean);if(_.length===0){const v=xu({mutationFn:async()=>{}});return v.commit().catch(()=>{}),s.scheduleTransactionCleanup(v),v}if(a)return a.applyMutations(_),s.transactions.set(a.id,a),s.scheduleTransactionCleanup(a),s.recomputeOptimisticState(!0),a;const g=xu({mutationFn:async v=>this.config.onUpdate({transaction:v.transaction,collection:this.collection})});return g.applyMutations(_),g.commit().catch(()=>{}),s.transactions.set(g.id,g),s.scheduleTransactionCleanup(g),s.recomputeOptimisticState(!0),g}}class nD extends rk{constructor(){super()}setDeps(e){this.collection=e.collection}emit(e,n){this.emitInner(e,n)}emitStatusChange(e,n){this.emit("status:change",{type:"status:change",collection:this.collection,previousStatus:n,status:e});const r=`status:${e}`;this.emit(r,{type:r,collection:this.collection,previousStatus:n,status:e})}emitSubscribersChange(e,n){this.emit("subscribers:change",{type:"subscribers:change",collection:this.collection,previousSubscriberCount:n,subscriberCount:e})}cleanup(){this.clearListeners()}}function ik(t){const e=new fy(t);return t.utils?e.utils=t.utils:e.utils={},e}class fy{constructor(e){if(this.utils={},this.insert=(n,r)=>this._mutations.insert(n,r),this.delete=(n,r)=>this._mutations.delete(n,r),!e)throw new E2;if(!e.sync)throw new C2;e.id?this.id=e.id:this.id=crypto.randomUUID(),this.config={...e,autoIndex:e.autoIndex??"eager"},this._changes=new SM,this._events=new nD,this._indexes=new MM,this._lifecycle=new TM(e,this.id),this._mutations=new tD(e,this.id),this._state=new vM(e),this._sync=new AM(e,this.id),this.comparisonOpts=rD(e),this._changes.setDeps({collection:this,lifecycle:this._lifecycle,sync:this._sync,events:this._events}),this._events.setDeps({collection:this}),this._indexes.setDeps({state:this._state,lifecycle:this._lifecycle}),this._lifecycle.setDeps({changes:this._changes,events:this._events,indexes:this._indexes,state:this._state,sync:this._sync}),this._mutations.setDeps({collection:this,lifecycle:this._lifecycle,state:this._state}),this._state.setDeps({collection:this,lifecycle:this._lifecycle,changes:this._changes,indexes:this._indexes,events:this._events}),this._sync.setDeps({collection:this,state:this._state,lifecycle:this._lifecycle,events:this._events}),e.startSync===!0&&this._sync.startSync()}get status(){return this._lifecycle.status}get subscriberCount(){return this._changes.activeSubscribersCount}onFirstReady(e){return this._lifecycle.onFirstReady(e)}isReady(){return this._lifecycle.status==="ready"}get isLoadingSubset(){return this._sync.isLoadingSubset}startSyncImmediate(){this._sync.startSync()}preload(){return this._sync.preload()}get(e){return this._state.get(e)}has(e){return this._state.has(e)}get size(){return this._state.size}*keys(){yield*this._state.keys()}*values(){yield*this._state.values()}*entries(){yield*this._state.entries()}*[Symbol.iterator](){yield*this._state[Symbol.iterator]()}forEach(e){return this._state.forEach(e)}map(e){return this._state.map(e)}getKeyFromItem(e){return this.config.getKey(e)}createIndex(e,n={}){return this._indexes.createIndex(e,n)}get indexes(){return this._indexes.indexes}validateData(e,n,r){return this._mutations.validateData(e,n,r)}get compareOptions(){return{...this.comparisonOpts}}update(e,n,r){return this._mutations.update(e,n,r)}get state(){const e=new Map;for(const[n,r]of this.entries())e.set(n,r);return e}stateWhenReady(){return this.size>0||this.isReady()?Promise.resolve(this.state):this.preload().then(()=>this.state)}get toArray(){return Array.from(this.values())}toArrayWhenReady(){return this.size>0||this.isReady()?Promise.resolve(this.toArray):this.preload().then(()=>this.toArray)}currentStateAsChanges(e={}){return yM(this,e)}subscribeChanges(e,n={}){return this._changes.subscribeChanges(e,n)}on(e,n){return this._events.on(e,n)}once(e,n){return this._events.once(e,n)}off(e,n){this._events.off(e,n)}waitFor(e,n){return this._events.waitFor(e,n)}async cleanup(){return this._lifecycle.cleanup(),Promise.resolve()}}function rD(t){if(t.defaultStringCollation){const e=t.defaultStringCollation;return{stringSort:e.stringSort??"locale",locale:e.stringSort==="locale"?e.locale:void 0,localeOptions:e.stringSort==="locale"?e.localeOptions:void 0}}else return{stringSort:"locale"}}class qt{constructor(e={}){this.query={},this.query={...e}}_createRefForSource(e,n){let r;try{r=Object.keys(e)}catch{const u=e===null?"null":"undefined";throw new bu(n,u)}if(Array.isArray(e))throw new bu(n,"array");if(r.length!==1)throw r.length===0?new bu(n,"empty object"):r.every(u=>!isNaN(Number(u)))?new bu(n,"string"):new Y2(n);const s=r[0],a=e[s];let l;if(a instanceof fy)l=new Fa(a,s);else if(a instanceof qt){const u=a._getQuery();if(!u.from)throw new X2(n);l=new br(u,s)}else throw new W2(s);return[s,l]}from(e){const[,n]=this._createRefForSource(e,"from clause");return new qt({...this.query,from:n})}join(e,n,r="left"){const[s,a]=this._createRefForSource(e,"join clause"),u=[...this._getCurrentAliases(),s],f=wa(u),h=n(f);let m,p;if(h.type==="func"&&h.name==="eq"&&h.args.length===2)m=h.args[0],p=h.args[1];else throw new eI;const _={from:a,type:r,left:m,right:p},g=this.query.join||[];return new qt({...this.query,join:[...g,_]})}leftJoin(e,n){return this.join(e,n,"left")}rightJoin(e,n){return this.join(e,n,"right")}innerJoin(e,n){return this.join(e,n,"inner")}fullJoin(e,n){return this.join(e,n,"full")}where(e){const n=this._getCurrentAliases(),r=wa(n),s=e(r),a=this.query.where||[];return new qt({...this.query,where:[...a,s]})}having(e){const n=this._getCurrentAliases(),r=wa(n),s=e(r),a=this.query.having||[];return new qt({...this.query,having:[...a,s]})}select(e){const n=this._getCurrentAliases(),r=wa(n),s=e(r),a=ak(s);return new qt({...this.query,select:a,fnSelect:void 0})}orderBy(e,n="asc"){const r=this._getCurrentAliases(),s=wa(r),a=e(s),l=typeof n=="string"?{direction:n,nulls:"first"}:{direction:n.direction??"asc",nulls:n.nulls??"first",stringSort:n.stringSort,locale:n.stringSort==="locale"?n.locale:void 0,localeOptions:n.stringSort==="locale"?n.localeOptions:void 0},u=m=>({expression:tn(m),compareOptions:l}),f=Array.isArray(a)?a.map(m=>u(m)):[u(a)],h=this.query.orderBy||[];return new qt({...this.query,orderBy:[...h,...f]})}groupBy(e){const n=this._getCurrentAliases(),r=wa(n),s=e(r),a=Array.isArray(s)?s.map(u=>tn(u)):[tn(s)],l=this.query.groupBy||[];return new qt({...this.query,groupBy:[...l,...a]})}limit(e){return new qt({...this.query,limit:e})}offset(e){return new qt({...this.query,offset:e})}distinct(){return new qt({...this.query,distinct:!0})}findOne(){return new qt({...this.query,singleResult:!0})}_getCurrentAliases(){const e=[];if(this.query.from&&e.push(this.query.from.alias),this.query.join)for(const n of this.query.join)e.push(n.from.alias);return e}get fn(){const e=this;return{select(n){return new qt({...e.query,select:void 0,fnSelect:n})},where(n){return new qt({...e.query,fnWhere:[...e.query.fnWhere||[],n]})},having(n){return new qt({...e.query,fnHaving:[...e.query.fnHaving||[],n]})}}}_getQuery(){if(!this.query.from)throw new tI;return this.query}}function sD(t){return t===void 0?tn(null):t instanceof QS||t instanceof xr||t instanceof An||t instanceof Bn?t:tn(t)}function iD(t){return t!==null&&typeof t=="object"&&!Xg(t)&&!t.__refProxy}function ak(t){if(!iD(t))return sD(t);const e={};for(const[n,r]of Object.entries(t)){if(typeof n=="string"&&n.startsWith("__SPREAD_SENTINEL__")){e[n]=r;continue}e[n]=ak(r)}return e}function aD(t){const e=t(new qt);return ok(e)}function ok(t){return t._getQuery()}function oD(t){const e=lD(t);let n=t,r,s=0;const a=10;for(;s<a&&!Ar(n,r);)r=n,n=Jm(n),s++;return{optimizedQuery:lk(n),sourceWhereClauses:e}}function lD(t){const e=new Map;if(!t.where||t.where.length===0)return e;const r=Xm(t.where).map(a=>ck(a)),s=uk(r);for(const[a,l]of s.singleSource)cD(t,a)&&e.set(a,l);return e}function cD(t,e){if(t.from.alias===e)return t.from.type==="collectionRef";if(t.join){for(const n of t.join)if(n.from.alias===e)return n.from.type==="collectionRef"}return!1}function Jm(t){const e={...t,from:t.from.type==="queryRef"?new br(Jm(t.from.query),t.from.alias):t.from,join:t.join?.map(n=>({...n,from:n.from.type==="queryRef"?new br(Jm(n.from.query),n.from.alias):n.from}))};return uD(e)}function uD(t){if(!t.where||t.where.length===0)return t;if(!t.join||t.join.length===0){if(t.where.length>1){const u=Xm(t.where),f=hf(u);return{...t,where:[f]}}return t}const e=t.where.filter(u=>!qx(u)),r=Xm(e).map(u=>ck(u)),s=uk(r),a=hD(t,s),l=t.where.filter(u=>qx(u));return l.length>0&&(a.where=[...a.where||[],...l]),a}function lk(t){return{...t,from:Ym(t.from),join:t.join?.map(e=>({...e,from:Ym(e.from)}))}}function Ym(t){if(t.type==="collectionRef")return t;const e=lk(t.query);if(fD(e)){const n=Ym(e.from);return n.type==="collectionRef"?new Fa(n.collection,t.alias):new br(n.query,t.alias)}return new br(e,t.alias)}function fD(t){return(!t.where||t.where.length===0)&&!t.select&&(!t.groupBy||t.groupBy.length===0)&&(!t.having||t.having.length===0)&&(!t.orderBy||t.orderBy.length===0)&&(!t.join||t.join.length===0)&&t.limit===void 0&&t.offset===void 0&&!t.fnSelect&&(!t.fnWhere||t.fnWhere.length===0)&&(!t.fnHaving||t.fnHaving.length===0)}function Xm(t){const e=[];for(const n of t){const r=Wg(n);e.push(...hy(r))}return e}function hy(t){if(t.type==="func"&&t.name==="and"){const e=[];for(const n of t.args)e.push(...hy(n));return e}else return[t]}function ck(t){const e=new Set;let n=!1;function r(s){switch(s.type){case"ref":if(s.path&&s.path.length>0){const a=s.path[0];a&&(e.add(a),s.path.length===1&&(n=!0))}break;case"func":s.args&&s.args.forEach(r);break;case"val":break;case"agg":s.args&&s.args.forEach(r);break}}return r(t),{expression:t,touchedSources:e,hasNamespaceOnlyRef:n}}function uk(t){const e=new Map,n=[];for(const a of t)if(a.touchedSources.size===1&&!a.hasNamespaceOnlyRef){const l=Array.from(a.touchedSources)[0];e.has(l)||e.set(l,[]),e.get(l).push(a.expression)}else(a.touchedSources.size>1||a.hasNamespaceOnlyRef)&&n.push(a.expression);const r=new Map;for(const[a,l]of e)r.set(a,hf(l));const s=n.length>0?hf(n):void 0;return{singleSource:r,multiSource:s}}function hD(t,e){const n=new Set,r=mw(t.from,e.singleSource,n),s=t.join?t.join.map(h=>({...h,from:mw(h.from,e.singleSource,n)})):void 0,a=[];e.multiSource&&a.push(e.multiSource);const l=t.join&&t.join.some(h=>h.type==="left"||h.type==="right"||h.type==="full");for(const[h,m]of e.singleSource)n.has(h)?l&&a.push(S2(m)):a.push(m);const u=a.length>1?[hf(a.flatMap(h=>hy(Wg(h))))]:a;return{select:t.select,groupBy:t.groupBy?[...t.groupBy]:void 0,having:t.having?[...t.having]:void 0,orderBy:t.orderBy?[...t.orderBy]:void 0,limit:t.limit,offset:t.offset,distinct:t.distinct,fnSelect:t.fnSelect,fnWhere:t.fnWhere?[...t.fnWhere]:void 0,fnHaving:t.fnHaving?[...t.fnHaving]:void 0,from:r,join:s,where:u.length>0?u:[]}}function Ma(t){return{from:t.from.type==="collectionRef"?new Fa(t.from.collection,t.from.alias):new br(Ma(t.from.query),t.from.alias),select:t.select,join:t.join?t.join.map(e=>({type:e.type,left:e.left,right:e.right,from:e.from.type==="collectionRef"?new Fa(e.from.collection,e.from.alias):new br(Ma(e.from.query),e.from.alias)})):void 0,where:t.where?[...t.where]:void 0,groupBy:t.groupBy?[...t.groupBy]:void 0,having:t.having?[...t.having]:void 0,orderBy:t.orderBy?[...t.orderBy]:void 0,limit:t.limit,offset:t.offset,fnSelect:t.fnSelect,fnWhere:t.fnWhere?[...t.fnWhere]:void 0,fnHaving:t.fnHaving?[...t.fnHaving]:void 0}}function mw(t,e,n){const r=e.get(t.alias);if(!r)return t.type==="collectionRef"?new Fa(t.collection,t.alias):new br(Ma(t.query),t.alias);if(t.type==="collectionRef"){const l={from:new Fa(t.collection,t.alias),where:[r]};return n.add(t.alias),new br(l,t.alias)}if(!_D(t.query,r,t.alias))return new br(Ma(t.query),t.alias);if(vD(t.query,r,t.alias))return new br(Ma(t.query),t.alias);const s=t.query.where||[],a={...Ma(t.query),where:[...s,r]};return n.add(t.alias),new br(a,t.alias)}function dD(t,e,n){return t.select?fk(t.select)||bD(t.select,e,n):!1}function pD(t){return t.groupBy&&t.groupBy.length>0}function mD(t){return t.having&&t.having.length>0}function gD(t){return t.orderBy&&t.orderBy.length>0&&(t.limit!==void 0||t.offset!==void 0)}function yD(t){return t.fnSelect||t.fnWhere&&t.fnWhere.length>0||t.fnHaving&&t.fnHaving.length>0}function _D(t,e,n){return!(dD(t,e,n)||pD(t)||mD(t)||gD(t)||yD(t))}function fk(t){for(const e of Object.values(t))if(typeof e=="object"){const n=e;if(n.type==="agg"||!("type"in n)&&fk(n))return!0}return!1}function dy(t){const e=[];if(t==null||typeof t!="object")return e;switch(t.type){case"ref":e.push(t);break;case"func":case"agg":for(const n of t.args??[])e.push(...dy(n));break}return e}function bD(t,e,n){const r=new Set;for(const[a,l]of Object.entries(t))a.startsWith("__SPREAD_SENTINEL__")||l instanceof An||r.add(a);const s=dy(e);for(const a of s){const l=a.path;if(!Array.isArray(l)||l.length<2)continue;const u=l[0],f=l[1];if(u===n&&r.has(f))return!0}return!1}function vD(t,e,n){const r=dy(e);if(r.every(a=>a.path[0]!==n))return!1;if(t.fnSelect)return!0;const s=t.select;if(!s)return!1;for(const a of r){const l=a.path;if(l.length<2||l[0]!==n)continue;const u=s[l[1]];if(!u)continue;if(!(u instanceof An)||u.path.length<2)return!0;const[f,h]=u.path;if(f!==n&&f!==t.from.alias||h!==l[1])return!0}return!1}function hf(t){if(t.length===0)throw new wI;return t.length===1?t[0]:new xr("and",t)}function xD(t,e,n,r,s,a,l,u,f,h,m,p,_,g,v,x,k,S){let T=t;for(const C of e)T=wD(T,C,n,r,s,a,l,u,f,h,m,p,_,g,v,x,k,S);return T}function wD(t,e,n,r,s,a,l,u,f,h,m,p,_,g,v,x,k,S){const T=e.from.type==="collectionRef",{alias:C,input:L,collectionId:D}=kD(e.from,a,f,h,m,p,_,g,l,u,x,k,S);n[C]=L,T&&(k[C]=D);const I=f[r],P=f[D];if(!I)throw new Kx(r);if(!P)throw new Kx(D);const{activeSource:V,lazySource:H}=CD(e.type,I,P),z=Object.keys(n),{mainExpr:Q,joinedExpr:j}=SD(e.left,e.right,z,C),se=Un(Q),Z=Un(j);let $=t.pipe(Cn(([G,re])=>[se(re),[G,re]])),B=L.pipe(Cn(([G,re])=>{const Y={[C]:re};return[Z(Y),[G,Y]]}));if(!["inner","left","right","full"].includes(e.type))throw new uI(e.type);if(V){const G=V==="main"?e.from:v.from,re=G.type==="queryRef"&&(G.query.limit||G.query.offset),Y=Q.type==="func"||j.type==="func";if(!re&&!Y){const O=V==="main"?C:s;p.add(O);const N=V==="main"?$:B,R=Rl(v,V==="main"?j:Q,H),oe=R.collection,pe=R.path[0];pe&&Jf(pe,R.path,oe);const me=N.pipe(MN(xe=>{const Me=S[O]||O,Ie=h[Me];if(!Ie)throw new SI(Me,O,H.id,Object.keys(h));if(Ie.hasLoadedInitialState())return;const nt=xe.getInner().map(([[Ae]])=>Ae),at=new An(R.path);Ie.requestSnapshot({where:iM(at,nt),optimizedOnly:!0})||Ie.requestSnapshot()}));V==="main"?$=me:B=me}}return $.pipe(UN(B,e.type),ED(e.type))}function SD(t,e,n,r){const s=n.filter(u=>u!==r),a=Wm(t),l=Wm(e);if(a&&s.includes(a)&&l===r)return{mainExpr:t,joinedExpr:e};if(a===r&&l&&s.includes(l))return{mainExpr:e,joinedExpr:t};throw!a||!l?new hI:a===l?new fI(a):s.includes(a)?l!==r?new pI(r):new mI:new dI(a)}function Wm(t){switch(t.type){case"ref":return t.path[0]||null;case"func":{const e=new Set;for(const n of t.args){const r=Wm(n);r&&e.add(r)}return e.size===1?Array.from(e)[0]:null}default:return null}}function kD(t,e,n,r,s,a,l,u,f,h,m,p,_){switch(t.type){case"collectionRef":{const g=e[t.alias];if(!g)throw new JS(t.alias,t.collection.id,Object.keys(e));return p[t.alias]=t.collection.id,{alias:t.alias,input:g,collectionId:t.collection.id}}case"queryRef":{const g=h.get(t.query)||t.query,v=m(g,e,n,r,s,a,l,u,f,h);Object.assign(p,v.aliasToCollectionId),Object.assign(_,v.aliasRemapping);const x=Object.keys(v.aliasToCollectionId).find(T=>v.aliasToCollectionId[T]===v.collectionId);x&&x!==t.alias&&(_[t.alias]=x);const S=v.pipeline.pipe(Cn(T=>{const[C,[L,D]]=T;return[C,L]}));return{alias:t.alias,input:S,collectionId:v.collectionId}}default:throw new gI(t.type)}}function ED(t){return function(e){return e.pipe(Zs(n=>{const[r,[s,a]]=n,l=s?.[1],u=a?.[1];return t==="inner"?!!(l&&u):t==="left"?!!l:t==="right"?!!u:!0}),Cn(n=>{const[r,[s,a]]=n,l=s?.[0],u=s?.[1],f=a?.[0],h=a?.[1],m={};return u&&Object.assign(m,u),h&&Object.assign(m,h),[`[${l},${f}]`,m]}))}}function CD(t,e,n){switch(t){case"left":return{activeSource:"main",lazySource:n};case"right":return{activeSource:"joined",lazySource:e};case"inner":return e.size<n.size?{activeSource:"main",lazySource:n}:{activeSource:"joined",lazySource:e};default:return{activeSource:void 0,lazySource:void 0}}}function eg(t){return t instanceof Bn?t.value:t}function TD(t,e,n){const r=t.source(e);if(r&&typeof r=="object"){let s=n;const a=t.targetPath;if(a.length===0)for(const[l,u]of Object.entries(r))n[l]=eg(u);else for(let l=0;l<a.length;l++){const u=a[l];if(l===a.length-1){const f=s[u]??={};if(typeof f=="object")for(const[h,m]of Object.entries(r))f[h]=eg(m)}else{const f=s[u];(f==null||typeof f!="object")&&(s[u]={}),s=s[u]}}}}function AD(t,e,n){const r=t.alias.split(".");if(r.length===1)n[t.alias]=t.compiled(e);else{let s=n;for(let a=0;a<r.length-1;a++){const l=r[a],u=s[l];(u==null||typeof u!="object")&&(s[l]={}),s=s[l]}s[r[r.length-1]]=eg(t.compiled(e))}}function RD([t,e],n){const r={};for(const s of n)s.kind==="merge"?TD(s,e,r):AD(s,e,r);return[t,{...e,__select_results:r}]}function OD(t,e,n){const r=[];return hk([],e,r),t.pipe(Cn(s=>RD(s,r)))}function ID(t){return t.type==="agg"}function ND(t){return t&&typeof t=="object"&&!Xg(t)}function hk(t,e,n){for(const[r,s]of Object.entries(e)){if(r.startsWith("__SPREAD_SENTINEL__")){const l=r.slice(19),u=l.lastIndexOf("__"),f=u>=0?l.slice(0,u):l,h=s&&typeof s=="object"&&"type"in s&&s.type==="ref";if(f.includes(".")||h){const m=[...t],p=h?s:new An(f.split(".")),_=Un(p);n.push({kind:"merge",targetPath:m,source:_})}else{const m=f,p=[...t];n.push({kind:"merge",targetPath:p,source:_=>_[m]})}continue}const a=s;if(ND(a)){hk([...t,r],a,n);continue}if(ID(a))n.push({kind:"field",alias:[...t,r].join("."),compiled:()=>null});else{if(a===void 0||!Xg(a)){n.push({kind:"field",alias:[...t,r].join("."),compiled:()=>a});continue}if(a instanceof Bn){const l=a.value;n.push({kind:"field",alias:[...t,r].join("."),compiled:()=>l})}else n.push({kind:"field",alias:[...t,r].join("."),compiled:Un(a)})}}}function py(t,e,n,r,s,a,l,u,f=new WeakMap,h=new WeakMap){const m=f.get(t);if(m)return m;tg(t);const{optimizedQuery:p,sourceWhereClauses:_}=oD(t);h.set(p,t),rg(p,t,h);const g={...e},v={},x={},k={},{alias:S,input:T,collectionId:C}=DD(p.from,g,n,r,s,a,l,u,f,h,v,x);k[S]=T;let L=T.pipe(Cn(([V,H])=>[V,{[S]:H}]));if(p.join&&p.join.length>0&&(L=xD(L,p.join,k,C,S,g,f,h,n,r,s,a,l,u,t,py,v,x)),p.where&&p.where.length>0)for(const V of p.where){const H=Wg(V),z=Un(H);L=L.pipe(Zs(([Q,j])=>ja(z(j))))}if(p.fnWhere&&p.fnWhere.length>0)for(const V of p.fnWhere)L=L.pipe(Zs(([H,z])=>ja(V(z))));if(p.distinct&&!p.fnSelect&&!p.select)throw new nI;if(p.fnSelect?L=L.pipe(Cn(([V,H])=>{const z=p.fnSelect(H);return[V,{...H,__select_results:z}]})):p.select?L=OD(L,p.select):L=L.pipe(Cn(([V,H])=>{const z=!p.join&&!p.groupBy?H[S]:H;return[V,{...H,__select_results:z}]})),p.groupBy&&p.groupBy.length>0?L=cw(L,p.groupBy,p.having,p.select,p.fnHaving):p.select&&Object.values(p.select).some(H=>H.type==="agg")&&(L=cw(L,[],p.having,p.select,p.fnHaving)),p.having&&(!p.groupBy||p.groupBy.length===0)&&!(p.select?Object.values(p.select).some(H=>H.type==="agg"):!1))throw new rI;if(p.fnHaving&&p.fnHaving.length>0&&(!p.groupBy||p.groupBy.length===0))for(const V of p.fnHaving)L=L.pipe(Zs(([H,z])=>V(z)));if(p.distinct&&(L=L.pipe(qN(([V,H])=>H.__select_results))),p.orderBy&&p.orderBy.length>0){const z=gM(t,L,p.orderBy,p.select||{},n[C],l,u,p.limit,p.offset).pipe(Cn(([j,[se,Z]])=>{const $=se.__select_results,B=ng($);return[j,[B,Z]]})),Q={collectionId:C,pipeline:z,sourceWhereClauses:_,aliasToCollectionId:v,aliasRemapping:x};return f.set(t,Q),Q}else if(p.limit!==void 0||p.offset!==void 0)throw new sI;const I=L.pipe(Cn(([V,H])=>{const z=H.__select_results,Q=ng(z);return[V,[Q,void 0]]})),P={collectionId:C,pipeline:I,sourceWhereClauses:_,aliasToCollectionId:v,aliasRemapping:x};return f.set(t,P),P}function MD(t){const e=new Set;if(t.from.type==="collectionRef"&&e.add(t.from.alias),t.join)for(const n of t.join)n.from.type==="collectionRef"&&e.add(n.from.alias);return e}function tg(t,e=new Set){const n=MD(t);for(const s of n)if(e.has(s))throw new iI(s,Array.from(e));const r=new Set([...e,...n]);if(t.from.type==="queryRef"&&tg(t.from.query,r),t.join)for(const s of t.join)s.from.type==="queryRef"&&tg(s.from.query,r)}function DD(t,e,n,r,s,a,l,u,f,h,m,p){switch(t.type){case"collectionRef":{const _=e[t.alias];if(!_)throw new JS(t.alias,t.collection.id,Object.keys(e));return m[t.alias]=t.collection.id,{alias:t.alias,input:_,collectionId:t.collection.id}}case"queryRef":{const _=h.get(t.query)||t.query,g=py(_,e,n,r,s,a,l,u,f,h);Object.assign(m,g.aliasToCollectionId),Object.assign(p,g.aliasRemapping);const v=Object.keys(g.aliasToCollectionId).find(S=>g.aliasToCollectionId[S]===g.collectionId);v&&v!==t.alias&&(p[t.alias]=v);const k=g.pipeline.pipe(Cn(S=>{const[T,[C,L]]=S,D=ng(C);return[T,D]}));return{alias:t.alias,input:k,collectionId:g.collectionId}}default:throw new aI(t.type)}}function LD(t){return t instanceof Bn||t&&typeof t=="object"&&"type"in t&&t.type==="val"}function ng(t){return LD(t)?t.value:t}function rg(t,e,n){if(t.from.type==="queryRef"&&e.from.type==="queryRef"&&(n.set(t.from.query,e.from.query),rg(t.from.query,e.from.query,n)),t.join&&e.join)for(let r=0;r<t.join.length&&r<e.join.length;r++){const s=t.join[r],a=e.join[r];s.from.type==="queryRef"&&a.from.type==="queryRef"&&(n.set(s.from.query,a.from.query),rg(s.from.query,a.from.query,n))}}function my(t,e){const n=t.type;if(n==="val")return new Bn(t.value);if(n==="ref"){const r=t.path;if(Array.isArray(r)){if(r[0]===e&&r.length>1)return new An(r.slice(1));if(r.length===1&&r[0]!==void 0)return new An([r[0]])}return new An(Array.isArray(r)?r:[String(r)])}else{const r=[];for(const s of t.args){const a=my(s,e);r.push(a)}return new xr(t.name,r)}}function gw(t,e){return t.map(r=>{const s=my(r.expression,e);return{...r,expression:s}})}const yw=Symbol.for("@tanstack/db.collection-config-builder");class zD{constructor(e,n,r,s){this.alias=e,this.collectionId=n,this.collection=r,this.collectionConfigBuilder=s,this.biggest=void 0,this.subscriptionLoadingPromises=new Map,this.sentToD2Keys=new Set}subscribe(){const e=this.getWhereClauseForAlias();if(e){const n=my(e,this.alias);return this.subscribeToChanges(n)}return this.subscribeToChanges()}subscribeToChanges(e){let n;const r=this.getOrderByInfo();if(r)n=this.subscribeToOrderedChanges(e,r);else{const u=!this.collectionConfigBuilder.isLazyAlias(this.alias);n=this.subscribeToMatchingChanges(e,u)}const s=()=>{if(!this.subscriptionLoadingPromises.has(n)){let u;const f=new Promise(h=>{u=h});this.subscriptionLoadingPromises.set(n,{resolve:u}),this.collectionConfigBuilder.liveQueryCollection._sync.trackLoadPromise(f)}};n.status==="loadingSubset"&&s();const a=n.on("status:change",u=>{if(u.status==="loadingSubset")s();else{const f=this.subscriptionLoadingPromises.get(n);f&&(this.subscriptionLoadingPromises.delete(n),f.resolve())}}),l=()=>{const u=this.subscriptionLoadingPromises.get(n);u&&(this.subscriptionLoadingPromises.delete(n),u.resolve()),a(),n.unsubscribe()};return this.collectionConfigBuilder.currentSyncState.unsubscribeCallbacks.add(l),n}sendChangesToPipeline(e,n){const r=Array.isArray(e)?e:[...e],s=[];for(const f of r){if(f.type==="insert"){if(this.sentToD2Keys.has(f.key))continue;this.sentToD2Keys.add(f.key)}else f.type==="delete"&&this.sentToD2Keys.delete(f.key);s.push(f)}const a=this.collectionConfigBuilder.currentSyncState.inputs[this.alias],u=jD(a,s,this.collection.config.getKey)>0?n:void 0;this.collectionConfigBuilder.scheduleGraphRun(u,{alias:this.alias})}subscribeToMatchingChanges(e,n=!1){const r=a=>{this.sendChangesToPipeline(a)};return this.collection.subscribeChanges(r,{...n&&{includeInitialState:n},whereExpression:e})}subscribeToOrderedChanges(e,n){const{orderBy:r,offset:s,limit:a,index:l}=n,u=p=>{const _=PD(p);this.sendChangesToPipelineWithTracking(_,f)},f=this.collection.subscribeChanges(u,{whereExpression:e}),h=this.collection.on("truncate",()=>{this.biggest=void 0,this.sentToD2Keys.clear()});f.on("unsubscribed",()=>{h()});const m=gw(r,this.alias);return l?(f.setOrderByIndex(l),f.requestLimitedSnapshot({limit:s+a,orderBy:m})):f.requestSnapshot({orderBy:m,limit:s+a}),f}loadMoreIfNeeded(e){const n=this.getOrderByInfo();if(!n)return!0;const{dataNeeded:r}=n;if(!r)return!0;const s=r();return s>0&&this.loadNextItems(s,e),!0}sendChangesToPipelineWithTracking(e,n){const r=this.getOrderByInfo();if(!r){this.sendChangesToPipeline(e);return}const s=this.trackSentValues(e,r.comparator),a=n;a[yw]??=this.loadMoreIfNeeded.bind(this,n),this.sendChangesToPipeline(s,a[yw])}loadNextItems(e,n){const r=this.getOrderByInfo();if(!r)return;const{orderBy:s,valueExtractorForRawRow:a,offset:l}=r,u=this.biggest,f=u?a(u):void 0,h=f!==void 0?Array.isArray(f)?f:[f]:void 0,m=gw(s,this.alias);n.requestLimitedSnapshot({orderBy:m,limit:e,minValues:h,offset:l})}getWhereClauseForAlias(){const e=this.collectionConfigBuilder.sourceWhereClausesCache;if(e)return e.get(this.alias)}getOrderByInfo(){const e=this.collectionConfigBuilder.optimizableOrderByCollections[this.collectionId];if(e&&e.alias===this.alias)return e}*trackSentValues(e,n){for(const r of e)r.type!=="delete"&&(this.biggest?n(this.biggest,r.value)<0&&(this.biggest=r.value):this.biggest=r.value),yield r}}function jD(t,e,n){const r=[];for(const s of e){const a=n(s.value);s.type==="insert"?r.push([[a,s.value],1]):s.type==="update"?(r.push([[a,s.previousValue],-1]),r.push([[a,s.value],1])):r.push([[a,s.value],-1])}return r.length!==0&&t.sendData(new Ft(r)),r.length}function*PD(t){for(const e of t)e.type==="update"?(yield{type:"delete",key:e.key,value:e.previousValue},yield{type:"insert",key:e.key,value:e.value}):yield e}const dk=new WeakMap;function BD(t){return t.utils?.[ly]?.getBuilder?.()}function UD(t,e){dk.set(t,e)}function $D(t){return dk.get(t)}let qD=0;class FD{constructor(e){this.config=e,this.compiledAliasToCollectionId={},this.resultKeys=new WeakMap,this.orderByIndices=new WeakMap,this.isGraphRunning=!1,this.runCount=0,this.isInErrorState=!1,this.aliasDependencies={},this.builderDependencies=new Set,this.pendingGraphRuns=new Map,this.subscriptions={},this.lazySourcesCallbacks={},this.lazySources=new Set,this.optimizableOrderByCollections={},this.id=e.id||`live-query-${++qD}`,this.query=VD(e),this.collections=GD(this.query);const n=KD(this.query);this.collectionByAlias={};for(const[r,s]of n.entries()){const a=this.collections[r];if(a)for(const l of s)this.collectionByAlias[l]=a}this.query.orderBy&&this.query.orderBy.length>0&&(this.compare=HD(this.orderByIndices)),this.compareOptions=this.config.defaultStringCollation??pk(this.query).compareOptions,this.compileBasePipeline()}hasJoins(e){return!!(e.join&&e.join.length>0||e.from.type==="queryRef"&&this.hasJoins(e.from.query))}getConfig(){return{id:this.id,getKey:this.config.getKey||(e=>this.resultKeys.get(e)),sync:this.getSyncConfig(),compare:this.compare,defaultStringCollation:this.compareOptions,gcTime:this.config.gcTime||5e3,schema:this.config.schema,onInsert:this.config.onInsert,onUpdate:this.config.onUpdate,onDelete:this.config.onDelete,startSync:this.config.startSync,singleResult:this.query.singleResult,utils:{getRunCount:this.getRunCount.bind(this),setWindow:this.setWindow.bind(this),getWindow:this.getWindow.bind(this),[ly]:{getBuilder:()=>this,hasCustomGetKey:!!this.config.getKey,hasJoins:this.hasJoins(this.query)}}}}setWindow(e){if(!this.windowFn)throw new EI;return this.currentWindow=e,this.windowFn(e),this.maybeRunGraphFn?.(),this.liveQueryCollection?.isLoadingSubset?new Promise(n=>{const r=this.liveQueryCollection.on("loadingSubset:change",s=>{s.isLoadingSubset||(r(),n())})}):!0}getWindow(){if(!(!this.windowFn||!this.currentWindow))return{offset:this.currentWindow.offset??0,limit:this.currentWindow.limit??0}}getCollectionIdForAlias(e){const n=this.compiledAliasToCollectionId[e];if(n)return n;const r=this.collectionByAlias[e];if(r)return r.id;throw new Error(`Unknown source alias "${e}"`)}isLazyAlias(e){return this.lazySources.has(e)}maybeRunGraph(e){if(!this.isGraphRunning){if(!this.currentSyncConfig||!this.currentSyncState)throw new Error("maybeRunGraph called without active sync session. This should not happen.");this.isGraphRunning=!0;try{const{begin:n,commit:r}=this.currentSyncConfig,s=this.currentSyncState;if(this.isInErrorState)return;if(s.subscribedToAllCollections){for(;s.graph.pendingWork();)s.graph.run(),e?.();s.messagesCount===0&&(n(),r(),this.updateLiveQueryStatus(this.currentSyncConfig))}}finally{this.isGraphRunning=!1}}}scheduleGraphRun(e,n){const r=n?.contextId??qu()?.id,s=n?.jobId??this,a=(()=>{if(n?.dependencies)return n.dependencies;const f=new Set(this.builderDependencies);if(n?.alias){const h=this.aliasDependencies[n.alias];if(h)for(const m of h)f.add(m)}return f.delete(this),Array.from(f)})();if(r)for(const f of a)typeof f.scheduleGraphRun=="function"&&f.scheduleGraphRun(void 0,{contextId:r});if(!this.currentSyncConfig||!this.currentSyncState)throw new Error("scheduleGraphRun called without active sync session. This should not happen.");let l=r?this.pendingGraphRuns.get(r):void 0;l||(l={loadCallbacks:new Set},r&&this.pendingGraphRuns.set(r,l)),e&&l.loadCallbacks.add(e);const u=r?void 0:l;uf.schedule({contextId:r,jobId:s,dependencies:a,run:()=>this.executeGraphRun(r,u)})}clearPendingGraphRun(e){this.pendingGraphRuns.delete(e)}hasPendingGraphRun(e){return this.pendingGraphRuns.has(e)}executeGraphRun(e,n){const r=n??(e?this.pendingGraphRuns.get(e):void 0);if(e&&this.pendingGraphRuns.delete(e),!r||!this.currentSyncConfig||!this.currentSyncState)return;this.incrementRunCount();const s=()=>{let a=!0,l;if(r.loadCallbacks.forEach(u=>{try{a=u()&&a}catch(f){a=!1,l??=f}}),l)throw l;return a};this.maybeRunGraph(s)}getSyncConfig(){return{rowUpdateMode:"full",sync:this.syncFn.bind(this)}}incrementRunCount(){this.runCount++}getRunCount(){return this.runCount}syncFn(e){this.liveQueryCollection=e.collection,this.currentSyncConfig=e;const n={messagesCount:0,subscribedToAllCollections:!1,unsubscribeCallbacks:new Set},r=this.extendPipelineWithChangeProcessing(e,n);this.currentSyncState=r,this.unsubscribeFromSchedulerClears=uf.onClear(a=>{this.clearPendingGraphRun(a)});const s=this.subscribeToAllCollections(e,r);return this.maybeRunGraphFn=()=>this.scheduleGraphRun(s),this.scheduleGraphRun(s),()=>{n.unsubscribeCallbacks.forEach(a=>a()),this.currentSyncConfig=void 0,this.currentSyncState=void 0,this.pendingGraphRuns.clear(),this.graphCache=void 0,this.inputsCache=void 0,this.pipelineCache=void 0,this.sourceWhereClausesCache=void 0,this.lazySources.clear(),this.optimizableOrderByCollections={},this.lazySourcesCallbacks={},Object.keys(this.subscriptions).forEach(a=>delete this.subscriptions[a]),this.compiledAliasToCollectionId={},this.unsubscribeFromSchedulerClears?.(),this.unsubscribeFromSchedulerClears=void 0}}compileBasePipeline(){this.graphCache=new xN,this.inputsCache=Object.fromEntries(Object.keys(this.collectionByAlias).map(r=>[r,this.graphCache.newInput()]));const e=py(this.query,this.inputsCache,this.collections,this.subscriptions,this.lazySourcesCallbacks,this.lazySources,this.optimizableOrderByCollections,r=>{this.windowFn=r});this.pipelineCache=e.pipeline,this.sourceWhereClausesCache=e.sourceWhereClauses,this.compiledAliasToCollectionId=e.aliasToCollectionId;const n=Object.keys(this.compiledAliasToCollectionId).filter(r=>!Object.hasOwn(this.inputsCache,r));if(n.length>0)throw new kI(n)}maybeCompileBasePipeline(){return(!this.graphCache||!this.inputsCache||!this.pipelineCache)&&this.compileBasePipeline(),{graph:this.graphCache,inputs:this.inputsCache,pipeline:this.pipelineCache}}extendPipelineWithChangeProcessing(e,n){const{begin:r,commit:s}=e,{graph:a,inputs:l,pipeline:u}=this.maybeCompileBasePipeline();return u.pipe(zN(f=>{const h=f.getInner();n.messagesCount+=h.length,r(),h.reduce(ZD,new Map).forEach(this.applyChanges.bind(this,e)),s()})),a.finalize(),n.graph=a,n.inputs=l,n.pipeline=u,n}applyChanges(e,n,r){const{write:s,collection:a}=e,{deletes:l,inserts:u,value:f,orderByIndex:h}=n;if(this.resultKeys.set(f,r),h!==void 0&&this.orderByIndices.set(f,h),u&&l===0)s({value:f,type:"insert"});else if(u>l||u===l&&a.has(a.getKeyFromItem(f)))s({value:f,type:"update"});else if(l>0)s({value:f,type:"delete"});else throw new Error(`Could not apply changes: ${JSON.stringify(n)}. This should never happen.`)}handleSourceStatusChange(e,n,r){const{status:s}=r;if(s==="error"){this.transitionToError(`Source collection '${n}' entered error state`);return}if(s==="cleaned-up"){this.transitionToError(`Source collection '${n}' was manually cleaned up while live query '${this.id}' depends on it. Live queries prevent automatic GC, so this was likely a manual cleanup() call.`);return}this.updateLiveQueryStatus(e)}updateLiveQueryStatus(e){const{markReady:n}=e;this.isInErrorState||this.allCollectionsReady()&&n()}transitionToError(e){this.isInErrorState=!0,console.error(`[Live Query Error] ${e}`),this.liveQueryCollection?._lifecycle.setStatus("error")}allCollectionsReady(){return Object.values(this.collections).every(e=>e.isReady())}subscribeToAllCollections(e,n){const r=Object.entries(this.compiledAliasToCollectionId);if(r.length===0)throw new Error(`Compiler returned no alias metadata for query '${this.id}'. This should not happen; please report.`);const s=r.map(([l,u])=>{const f=this.collectionByAlias[l]??this.collections[u],h=$D(f);h&&h!==this?(this.aliasDependencies[l]=[h],this.builderDependencies.add(h)):this.aliasDependencies[l]=[];const m=new zD(l,u,f,this),p=f.on("status:change",v=>{this.handleSourceStatusChange(e,u,v)});n.unsubscribeCallbacks.add(p);const _=m.subscribe();return this.subscriptions[l]=_,m.loadMoreIfNeeded.bind(m,_)}),a=()=>(s.map(l=>l()),!0);return n.subscribedToAllCollections=!0,this.updateLiveQueryStatus(e),a}}function VD(t){return typeof t.query=="function"?aD(t.query):ok(t.query)}function HD(t){return(e,n)=>{const r=t.get(e),s=t.get(n);return r&&s?r<s?-1:r>s?1:0:0}}function GD(t){const e={};function n(s){s.type==="collectionRef"?e[s.collection.id]=s.collection:s.type==="queryRef"&&r(s.query)}function r(s){if(s.from&&n(s.from),s.join&&Array.isArray(s.join))for(const a of s.join)a.from&&n(a.from)}return r(t),e}function pk(t){const e=t.from;if(e.type==="collectionRef")return e.collection;if(e.type==="queryRef")return pk(e.query);throw new Error(`Failed to extract collection. Invalid FROM clause: ${JSON.stringify(t)}`)}function KD(t){const e=new Map;function n(s){if(s)if(s.type==="collectionRef"){const{id:a}=s.collection,l=e.get(a);l?l.add(s.alias):e.set(a,new Set([s.alias]))}else s.type==="queryRef"&&r(s.query)}function r(s){if(s&&(n(s.from),s.join))for(const a of s.join)n(a.from)}return r(t),e}function ZD(t,[[e,n],r]){const[s,a]=n,l=t.get(e)||{deletes:0,inserts:0,value:s,orderByIndex:a};return r<0?l.deletes+=Math.abs(r):r>0&&(l.inserts+=r,l.value=s,l.orderByIndex=a),t.set(e,l),t}function _w(t){return new FD(t).getConfig()}function Jp(t){if(typeof t=="function"){const n=_w({query:t});return bw(n)}else{const e=t,n=_w(e);return e.utils&&(n.utils={...n.utils,...e.utils}),bw(n)}}function bw(t){const e=ik(t),n=BD(t);return n&&UD(e,n),e}const Yp=1;function QD(t,e=[]){const n=t&&typeof t=="object"&&typeof t.subscribeChanges=="function"&&typeof t.startSyncImmediate=="function"&&typeof t.id=="string",r=J.useRef(null),s=J.useRef(null),a=J.useRef(null),l=J.useRef(0),u=J.useRef(null),f=!r.current||n&&a.current!==t||!n&&(s.current===null||s.current.length!==e.length||s.current.some((v,x)=>v!==e[x]));if(f)if(n)t.startSyncImmediate(),r.current=t,a.current=t;else if(typeof t=="function"){const v=new qt,x=t(v);if(x==null)r.current=null;else if(x instanceof fy)x.startSyncImmediate(),r.current=x;else if(x instanceof qt)r.current=Jp({query:t,startSync:!0,gcTime:Yp});else if(x&&typeof x=="object")r.current=Jp({startSync:!0,gcTime:Yp,...x});else throw new Error(`useLiveQuery callback must return a QueryBuilder, LiveQueryCollectionConfig, Collection, undefined, or null. Got: ${typeof x}`);s.current=[...e]}else r.current=Jp({startSync:!0,gcTime:Yp,...t}),s.current=[...e];f&&(l.current=0,u.current=null);const h=J.useRef(null);(!h.current||f)&&(h.current=v=>{if(!r.current)return()=>{};const x=r.current.subscribeChanges(()=>{l.current+=1,v()});return r.current.status==="ready"&&(l.current+=1,v()),()=>{x.unsubscribe()}});const m=J.useRef(null);(!m.current||f)&&(m.current=()=>{const v=l.current,x=r.current;return(!u.current||u.current.version!==v||u.current.collection!==x)&&(u.current={collection:x,version:v}),u.current});const p=J.useSyncExternalStore(h.current,m.current),_=J.useRef(null),g=J.useRef(null);if(!_.current||_.current.version!==p.version||_.current.collection!==p.collection){if(!p.collection)g.current={state:void 0,data:void 0,collection:void 0,status:"disabled",isLoading:!1,isReady:!0,isIdle:!1,isError:!1,isCleanedUp:!1,isEnabled:!1};else{const v=Array.from(p.collection.entries()),k=p.collection.config.singleResult;let S=null,T=null;g.current={get state(){return S||(S=new Map(v)),S},get data(){return T||(T=v.map(([,C])=>C)),k?T[0]:T},collection:p.collection,status:p.collection.status,isLoading:p.collection.status==="loading",isReady:p.collection.status==="ready",isIdle:p.collection.status==="idle",isError:p.collection.status==="error",isCleanedUp:p.collection.status==="cleaned-up",isEnabled:!0}}_.current=p}return g.current}class Xs extends nr{constructor(e){super(e),this.name="QueryCollectionError"}}class JD extends Xs{constructor(){super("[QueryCollection] queryKey must be provided."),this.name="QueryKeyRequiredError"}}class YD extends Xs{constructor(){super("[QueryCollection] queryFn must be provided."),this.name="QueryFnRequiredError"}}class XD extends Xs{constructor(){super("[QueryCollection] queryClient must be provided."),this.name="QueryClientRequiredError"}}class WD extends Xs{constructor(){super("[QueryCollection] getKey must be provided."),this.name="GetKeyRequiredError"}}class e4 extends Xs{constructor(){super("Collection must be in 'ready' state for manual sync operations. Sync not initialized yet."),this.name="SyncNotInitializedError"}}class t4 extends Xs{constructor(e){super(`Duplicate key '${e}' found within batch operations`),this.name="DuplicateKeyInBatchError"}}class n4 extends Xs{constructor(e){super(`Update operation: Item with key '${e}' does not exist`),this.name="UpdateOperationItemNotFoundError"}}class r4 extends Xs{constructor(e){super(`Delete operation: Item with key '${e}' does not exist`),this.name="DeleteOperationItemNotFoundError"}}const vi=new WeakMap;function s4(t,e){const n=Array.isArray(t)?t:[t],r=[];for(const s of n)if(s.type==="delete"){const a=Array.isArray(s.key)?s.key:[s.key];for(const l of a)r.push({type:"delete",key:l})}else{const a=Array.isArray(s.data)?s.data:[s.data];for(const l of a){let u;if(s.type==="update")u=e.getKey(l);else{const f=e.collection.validateData(l,s.type==="upsert"?"insert":s.type);u=e.getKey(f)}r.push({type:s.type,key:u,data:l})}}return r}function i4(t,e){const n=new Set;for(const r of t){if(n.has(r.key))throw new t4(r.key);if(n.add(r.key),r.type==="update"){if(!e.collection._state.syncedData.has(r.key))throw new n4(r.key)}else if(r.type==="delete"&&!e.collection._state.syncedData.has(r.key))throw new r4(r.key)}}function Qo(t,e){const n=s4(t,e);i4(n,e),e.begin();for(const s of n)switch(s.type){case"insert":{const a=e.collection.validateData(s.data,"insert");e.write({type:"insert",value:a});break}case"update":{const l={...e.collection._state.syncedData.get(s.key),...s.data},u=e.collection.validateData(l,"update",s.key);e.write({type:"update",value:u});break}case"delete":{const a=e.collection._state.syncedData.get(s.key);e.write({type:"delete",value:a});break}case"upsert":{const a=e.collection._state.syncedData.has(s.key),l=e.collection.validateData(s.data,a?"update":"insert",s.key);a?e.write({type:"update",value:l}):e.write({type:"insert",value:l});break}}e.commit();const r=Array.from(e.collection._state.syncedData.values());e.updateCacheData?e.updateCacheData(r):e.queryClient.setQueryData(e.queryKey,r)}function a4(t){function e(){const n=t();if(!n)throw new e4;return n}return{writeInsert(n){const r={type:"insert",data:n},s=e(),a=vi.get(s);if(a?.isActive){a.operations.push(r);return}Qo(r,s)},writeUpdate(n){const r={type:"update",data:n},s=e(),a=vi.get(s);if(a?.isActive){a.operations.push(r);return}Qo(r,s)},writeDelete(n){const r={type:"delete",key:n},s=e(),a=vi.get(s);if(a?.isActive){a.operations.push(r);return}Qo(r,s)},writeUpsert(n){const r={type:"upsert",data:n},s=e(),a=vi.get(s);if(a?.isActive){a.operations.push(r);return}Qo(r,s)},writeBatch(n){const r=e();if(vi.get(r)?.isActive)throw new Error("Cannot nest writeBatch calls. Complete the current batch before starting a new one.");const a={operations:[],isActive:!0};vi.set(r,a);try{const l=n();if(l&&typeof l=="object"&&"then"in l&&typeof l.then=="function")throw new Error("writeBatch does not support async callbacks. The callback must be synchronous.");a.operations.length>0&&Qo(a.operations,r)}finally{a.isActive=!1,vi.delete(r)}}}}function o4(t){if(!t)return;const e={};return t.where&&(e.where=sg(t.where)),t.orderBy?.length&&(e.orderBy=t.orderBy.map(n=>{const r={expression:sg(n.expression),direction:n.compareOptions.direction,nulls:n.compareOptions.nulls,stringSort:n.compareOptions.stringSort};return n.compareOptions.stringSort==="locale"?{...r,locale:n.compareOptions.locale,localeOptions:n.compareOptions.localeOptions}:r})),t.limit!==void 0&&(e.limit=t.limit),t.offset!==void 0&&(e.offset=t.offset),Object.keys(e).length===0?void 0:JSON.stringify(e)}function sg(t){if(!t)return null;switch(t.type){case"val":return{type:"val",value:ig(t.value)};case"ref":return{type:"ref",path:[...t.path]};case"func":return{type:"func",name:t.name,args:t.args.map(e=>sg(e))};default:return null}}function ig(t){if(t===void 0)return{__type:"undefined"};if(typeof t=="number"){if(Number.isNaN(t))return{__type:"nan"};if(t===Number.POSITIVE_INFINITY)return{__type:"infinity",sign:1};if(t===Number.NEGATIVE_INFINITY)return{__type:"infinity",sign:-1}}return t===null||typeof t=="string"||typeof t=="number"||typeof t=="boolean"?t:t instanceof Date?{__type:"date",value:t.toJSON()}:Array.isArray(t)?t.map(e=>ig(e)):typeof t=="object"?Object.fromEntries(Object.entries(t).map(([e,n])=>[e,ig(n)])):t}class l4{constructor(e,n,r){this.state=e,this.refetchFn=n,this.refetch=n,this.writeInsert=r.writeInsert,this.writeUpdate=r.writeUpdate,this.writeDelete=r.writeDelete,this.writeUpsert=r.writeUpsert,this.writeBatch=r.writeBatch}async clearError(){this.state.lastError=void 0,this.state.errorCount=0,this.state.lastErrorUpdatedAt=0,await this.refetchFn({throwOnError:!0})}get lastError(){return this.state.lastError}get isError(){return!!this.state.lastError}get errorCount(){return this.state.errorCount}get isFetching(){return Array.from(this.state.observers.values()).some(e=>e.getCurrentResult().isFetching)}get isRefetching(){return Array.from(this.state.observers.values()).some(e=>e.getCurrentResult().isRefetching)}get isLoading(){return Array.from(this.state.observers.values()).some(e=>e.getCurrentResult().isLoading)}get dataUpdatedAt(){return Math.max(0,...Array.from(this.state.observers.values()).map(e=>e.getCurrentResult().dataUpdatedAt))}get fetchStatus(){return Array.from(this.state.observers.values()).map(e=>e.getCurrentResult().fetchStatus)}}function c4(t){const{queryKey:e,queryFn:n,select:r,queryClient:s,enabled:a,refetchInterval:l,retry:u,retryDelay:f,staleTime:h,getKey:m,onInsert:p,onUpdate:_,onDelete:g,meta:v,...x}=t,k=x.syncMode??"eager";if(!e)throw new JD;if(!n)throw new YD;if(!s)throw new XD;if(!m)throw new WD;const S={lastError:void 0,errorCount:0,lastErrorUpdatedAt:0,observers:new Map},T=new Map,C=new Map,L=new Map,D=new Map,I=new Map,P=(Y,O)=>{const N=L.get(Y)||new Set;N.add(O),L.set(Y,N);const F=C.get(O)||new Set;F.add(Y),C.set(O,F)},V=(Y,O)=>{const N=L.get(Y)||new Set;N.delete(O),L.set(Y,N);const F=C.get(O)||new Set;return F.delete(Y),C.set(O,F),N.size===0},H=Y=>{const{begin:O,write:N,commit:F,markReady:R,collection:oe}=Y;let pe=!1;const me=_e=>{if(typeof e=="function")return e(_e);if(k==="on-demand"){const Pe=o4(_e);return Pe!==void 0?[...e,Pe]:e}else return e},xe=(_e={},Pe=n)=>{const Le=me(_e),ke=gs(Le),Fe={...v,loadSubsetOptions:_e};if(S.observers.has(ke)){I.set(ke,(I.get(ke)||0)+1);const ye=S.observers.get(ke),Ee=ye.getCurrentResult();return Ee.isSuccess?!0:Ee.isError?Promise.reject(Ee.error):new Promise((Ke,Ot)=>{const Qt=ye.subscribe(xt=>{xt.isSuccess?(Qt(),Ke()):xt.isError&&(Qt(),Ot(xt.error))})})}const ne={queryKey:Le,queryFn:Pe,meta:Fe,structuralSharing:!0,notifyOnChangeProps:"all",...a!==void 0&&{enabled:a},...l!==void 0&&{refetchInterval:l},...u!==void 0&&{retry:u},...f!==void 0&&{retryDelay:f},...h!==void 0&&{staleTime:h}},le=new u2(s,ne);T.set(ke,Le),S.observers.set(ke,le),I.set(ke,(I.get(ke)||0)+1);const ge=new Promise((ye,Ee)=>{const Ke=le.subscribe(Ot=>{Ot.isSuccess?(Ke(),ye()):Ot.isError&&(Ke(),Ee(Ot.error))})});return(pe||oe.subscriberCount>0)&&nt(le,ke),ge},Me=_e=>{const Pe=gs(_e);return ke=>{if(ke.isSuccess){S.lastError=void 0,S.errorCount=0;const Fe=ke.data,ne=r?r(Fe):Fe;if(!Array.isArray(ne)||ne.some(ye=>typeof ye!="object")){const ye=r?`@tanstack/query-db-collection: select() must return an array of objects. Got: ${typeof ne} for queryKey ${JSON.stringify(_e)}`:`@tanstack/query-db-collection: queryFn must return an array of objects. Got: ${typeof ne} for queryKey ${JSON.stringify(_e)}`;console.error(ye);return}const le=new Map(oe._state.syncedData.entries()),ge=new Map;ne.forEach(ye=>{const Ee=m(ye);ge.set(Ee,ye)}),O(),le.forEach((ye,Ee)=>{const Ke=ge.get(Ee);Ke?Ar(ye,Ke)||N({type:"update",value:Ke}):V(Ee,Pe)&&N({type:"delete",value:ye})}),ge.forEach((ye,Ee)=>{P(Ee,Pe),le.has(Ee)||N({type:"insert",value:ye})}),F(),R()}else ke.isError&&(ke.errorUpdatedAt!==S.lastErrorUpdatedAt&&(S.lastError=ke.error,S.errorCount++,S.lastErrorUpdatedAt=ke.errorUpdatedAt),console.error(`[QueryCollection] Error observing query ${String(_e)}:`,ke.error),R())}},Ie=_e=>D.has(_e),nt=(_e,Pe)=>{if(!Ie(Pe)){const Le=T.get(Pe),ke=Me(Le),Fe=_e.subscribe(ke);D.set(Pe,Fe);const ne=_e.getCurrentResult();(ne.isSuccess||ne.isError)&&ke(ne)}},at=()=>{S.observers.forEach(nt)},At=()=>{D.forEach(_e=>{_e()}),D.clear()};pe=!0;const Ae=oe.on("subscribers:change",({subscriberCount:_e})=>{_e>0?at():_e===0&&At()});if(k==="eager"){const _e=xe({});_e instanceof Promise&&_e.catch(()=>{})}else R();at(),S.observers.forEach((_e,Pe)=>{const Le=T.get(Pe);Me(Le)(_e.getCurrentResult())});const Xe=_e=>{D.get(_e)?.(),D.delete(_e);const Pe=C.get(_e)??new Set,Le=[];Pe.forEach(ke=>{const Fe=L.get(ke);Fe&&(Fe.delete(_e),Fe.size===0&&(L.delete(ke),oe.has(ke)&&Le.push(oe.get(ke))))}),Le.length>0&&(O(),Le.forEach(ke=>{N({type:"delete",value:ke})}),F()),S.observers.delete(_e),C.delete(_e),T.delete(_e),I.delete(_e)},qe=_e=>{const Pe=I.get(_e)||0,Le=S.observers.get(_e);if(Pe<=0&&(D.get(_e)?.(),D.delete(_e)),Le?.hasListeners()??!1){I.set(_e,0);return}Pe>0&&console.warn(`[cleanupQueryIfIdle] Invariant violation: refcount=${Pe} but no listeners. Cleaning up to prevent leak.`,{hashedQueryKey:_e}),Xe(_e)},Rt=_e=>{Xe(_e)},Zt=s.getQueryCache().subscribe(_e=>{const Pe=_e.query.queryHash;_e.type==="removed"&&T.has(Pe)&&qe(Pe)});return{loadSubset:k==="eager"?void 0:xe,unloadSubset:k==="eager"?void 0:_e=>{const Pe=me(_e),Le=gs(Pe),Fe=(I.get(Le)||0)-1;Fe<=0?(I.set(Le,0),qe(Le)):I.set(Le,Fe)},cleanup:async()=>{Ae(),At();const _e=[...T.values()],Pe=[...S.observers.keys()];for(const Le of Pe)Rt(Le);Zt(),await Promise.all(_e.map(async Le=>{await s.cancelQueries({queryKey:Le,exact:!0}),s.removeQueries({queryKey:Le,exact:!0})}))}}},z=async Y=>{const N=[...T.values()].map(F=>S.observers.get(gs(F)).refetch({throwOnError:Y?.throwOnError}));await Promise.all(N)},Q=Y=>{const O=typeof e=="function"?e({}):e;r?s.setQueryData(O,N=>{if(!N||typeof N!="object")return N;if(Array.isArray(N))return Y;const F=r(N);if(Array.isArray(F)){for(const R of Object.keys(N))if(N[R]===F)return{...N,[R]:Y}}if(Array.isArray(N.data))return{...N,data:Y};if(Array.isArray(N.items))return{...N,items:Y};if(Array.isArray(N.results))return{...N,results:Y};for(const R of Object.keys(N))if(Array.isArray(N[R]))return{...N,[R]:Y};return N}):s.setQueryData(O,Y)};let j=null;const se=Y=>{const{begin:O,write:N,commit:F,collection:R}=Y,oe=typeof e=="function"?e({}):e;return j={collection:R,queryClient:s,queryKey:oe,getKey:m,begin:O,write:N,commit:F,updateCacheData:Q},H(Y)},Z=a4(()=>j),$=p?async Y=>{const O=await p(Y)??{};return O.refetch!==!1&&await z(),O}:void 0,B=_?async Y=>{const O=await _(Y)??{};return O.refetch!==!1&&await z(),O}:void 0,G=g?async Y=>{const O=await g(Y)??{};return O.refetch!==!1&&await z(),O}:void 0,re=new l4(S,z,Z);return{...x,getKey:m,syncMode:k,sync:{sync:se},onInsert:$,onUpdate:B,onDelete:G,utils:re}}function er(){return Math.random().toString(36).substring(2,9)}async function u4(t){return new Promise((e,n)=>{const r=new FileReader;r.onloadend=()=>{const a=r.result.split(",")[1]||"";e(a)},r.onerror=n,r.readAsDataURL(t)})}function f4(t,e){const n=atob(t),r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return new Blob([r],{type:e})}async function vw(t){let e=t.body;t.body.type==="form-data"?e={...t.body,data:t.body.data.map(r=>({...r,file:null}))}:t.body.type==="binary"&&(e={...t.body,file:null});let n=null;if(t.httpResponse){const r=t.httpResponse.body instanceof Blob?await u4(t.httpResponse.body):"",s=t.httpResponse.body instanceof Blob?t.httpResponse.body.type:"application/octet-stream";n={status:t.httpResponse.status,statusCode:t.httpResponse.statusCode,headers:t.httpResponse.headers,content:r,contentType:s,duration:t.httpResponse.duration,error:t.httpResponse.error}}return{id:t.id,name:t.name,protocol:t.protocol,method:t.method,url:t.url,query:t.query,headers:t.headers,body:e,variables:t.variables,creationTime:t.creationTime,executionTime:t.executionTime,httpRequest:t.httpRequest,httpResponse:n,executing:!1}}function h4(t){let e=null;if(t.httpResponse){const n=t.httpResponse.content?f4(t.httpResponse.content,t.httpResponse.contentType):new Blob([]);e={status:t.httpResponse.status,statusCode:t.httpResponse.statusCode,headers:t.httpResponse.headers,body:n,duration:t.httpResponse.duration,error:t.httpResponse.error}}return{id:t.id,name:t.name,protocol:t.protocol??"rest",method:t.method,url:t.url,query:t.query,headers:t.headers,body:t.body,variables:t.variables??[],creationTime:t.creationTime,executionTime:t.executionTime,httpRequest:t.httpRequest,httpResponse:e,executing:!1}}const df="requests";async function d4(){const t=await fetch(`/data/${df}`);if(!t.ok)throw new Error(`Failed to list entries: ${t.statusText}`);const e=await t.json();return(await Promise.all(e.map(async r=>{const s=await fetch(`/data/${df}/${encodeURIComponent(r.id)}`);return s.ok?await s.json():null}))).filter(r=>r!==null)}async function xw(t){const e=await fetch(`/data/${df}/${encodeURIComponent(t.id)}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!e.ok)throw new Error(`Failed to save request: ${e.statusText}`)}async function p4(t){const e=await fetch(`/data/${df}/${encodeURIComponent(t)}`,{method:"DELETE"});if(!e.ok&&e.status!==404)throw new Error(`Failed to delete request: ${e.statusText}`)}const mk=new _2({defaultOptions:{queries:{staleTime:1/0,refetchOnWindowFocus:!1}}}),mr=ik(c4({queryKey:["requests"],queryFn:async()=>(await d4()).map(h4),getKey:t=>t.id,queryClient:mk,onInsert:async({transaction:t})=>{await Promise.all(t.mutations.map(async e=>{const n=e.modified,r=await vw(n);await xw(r)}))},onUpdate:async({transaction:t})=>{await Promise.all(t.mutations.map(async e=>{const n=e.modified,r=await vw(n);await xw(r)}))},onDelete:async({transaction:t})=>{await Promise.all(t.mutations.map(async e=>{const n=e.original;await p4(n.id)}))}}));async function m4(){Array.from(mr.state.keys()).forEach(e=>mr.delete(e))}function pf(t,e,n={}){const{missingDataPlaceholder:r=""}=n;let s=t;const a=/\{\{(\w+):([^}]+)\}\}/g;let l;for(;(l=a.exec(t))!==null;){const[u,f,h]=l,m=e.find(_=>_.type===f&&_.id===h);let p="";switch(f){case"file_base64":case"base64":p=m?.data||r;break;case"file_dataurl":m?.data&&m?.mimeType?p=`data:${m.mimeType};base64,${m.data}`:m?.data?p=`data:application/octet-stream;base64,${m.data}`:p=r;break;case"timestamp":p=String(Date.now());break;case"uuid":typeof crypto<"u"&&crypto.randomUUID?p=crypto.randomUUID():p="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,_=>{const g=Math.random()*16|0;return(_==="x"?g:g&3|8).toString(16)});break;case"random_string":p=Math.random().toString(36).substring(2,18);break;default:p=u}s=s.replace(u,p)}return s}function ww(){return{id:er(),enabled:!0,key:"",value:""}}function ag(t){return{id:er(),name:"New Request",protocol:"rest",method:"GET",url:"",headers:[ww()],query:[ww()],body:{type:"none"},variables:[],creationTime:Date.now(),executionTime:null,httpRequest:null,httpResponse:null,executing:!1}}const gk=J.createContext(null),g4={request:ag(),sidebarCollapsed:!1,aiPanelOpen:!1};function y4({children:t}){const[e,n]=J.useState(g4),{data:r=[]}=QD(j=>j.from({req:mr}).orderBy(({req:se})=>se.executionTime??se.creationTime,"desc")),s=J.useCallback(j=>{n(se=>({...se,request:{...se.request,...j}}))},[]),a=J.useCallback((j,se)=>{try{const Z=new URL(j),$=Z.protocol.replace(/:$/,""),B=Z.host,G=Z.pathname.replace(/^\//,""),re=se.replace(/^\//,""),Y=`/proxy/mcp/${$}/${B}/${re}`;return G?`${Y}?path=${encodeURIComponent(G)}`:Y}catch{return""}},[]),l=J.useCallback(j=>{s({protocol:j})},[s]),u=J.useCallback(j=>{s({method:j})},[s]),f=J.useCallback(j=>{s({url:j})},[s]),h=J.useCallback(j=>{s({headers:j})},[s]),m=J.useCallback(j=>{s({query:j})},[s]),p=J.useCallback(j=>{s({body:j})},[s]),_=J.useCallback(j=>{s({variables:j})},[s]),g=J.useCallback(j=>{n(se=>{const $={...se.request.httpRequest?.options??{insecure:!1,redirect:!0},...j};return{...se,request:{...se.request,httpRequest:se.request.httpRequest?{...se.request.httpRequest,options:$}:null}}})},[]),v=J.useCallback(j=>{s({grpcMethodSchema:j})},[s]),x=J.useCallback(j=>{s({mcpOperation:j})},[s]),k=J.useCallback(j=>{s({mcpSelectedTool:j,mcpSelectedResource:void 0})},[s]),S=J.useCallback(j=>{s({mcpSelectedResource:j,mcpSelectedTool:void 0})},[s]),T=J.useCallback(async()=>{const j=e.request;if(j.url){s({executing:!0});try{const se=a(j.url,"features");if(!se)throw new Error("Invalid MCP server URL");const Z=await fetch(se);if(!Z.ok){const B=await Z.text();throw new Error(B||`HTTP ${Z.status}`)}const $=await Z.json();s({mcpFeatures:$,executing:!1,mcpOperation:"discover"})}catch(se){const Z=se instanceof Error?se.message:"Unknown error";s({executing:!1,mcpFeatures:{tools:[],resources:[],error:Z}})}}},[e.request,s]),C=J.useCallback(()=>{s({httpResponse:null})},[s]),L=J.useCallback(async()=>{const j=e.request;s({executing:!0});try{const se={};if(j.headers.filter(Ae=>Ae.enabled&&Ae.key).forEach(Ae=>{se[Ae.key]=Ae.value}),j.protocol==="grpc"){const Ae=j.url,Xe=Ae.match(/^grpc:\/\/([^/]+)\/(.+)\/([^/]+)$/);if(!Xe)throw new Error("Invalid gRPC URL format. Expected: grpc://host:port/service/method");const[,qe,Rt,Zt]=Xe;let Et="",nn="";j.body.type==="json"?(Et=pf(j.body.content,j.variables),nn=j.body.content):(Et="{}",nn="{}"),se["Content-Type"]||(se["Content-Type"]="application/json");const xn=`/proxy/grpc/${qe}/${Rt}/${Zt}`,_e={method:"POST",url:Ae,headers:se,query:{},body:nn,options:{insecure:!1,redirect:!1}},Pe=performance.now(),Le=await fetch(xn,{method:"POST",headers:se,body:Et}),ke=Math.round(performance.now()-Pe),Fe=await Le.blob(),ne={};Le.headers.forEach((Ke,Ot)=>{ne[Ot]=Ke});const le={status:Le.statusText||String(Le.status),statusCode:Le.status,headers:ne,body:Fe,duration:ke},ge=Date.now(),ye={...j,executionTime:ge,httpRequest:_e,httpResponse:le,executing:!1};r.find(Ke=>Ke.id===j.id)?mr.update(j.id,Ke=>{Object.assign(Ke,ye)}):mr.insert(ye),n(Ke=>({...Ke,request:ye}));return}if(j.protocol==="mcp"){const Ae=j.url;if(!Ae)throw new Error("MCP server URL is required");const Xe=performance.now();let qe,Rt={},Zt=200,Et="OK";if(j.mcpSelectedTool){let Fe={};if(j.body.type==="json"&&j.body.content)try{Fe=JSON.parse(j.body.content)}catch{}const ne=a(Ae,"tool/call");if(!ne)throw new Error("Invalid MCP server URL");const le=await fetch(ne,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:j.mcpSelectedTool,arguments:Fe})});Zt=le.status,Et=le.statusText||String(le.status),le.headers.forEach((Ee,Ke)=>{Rt[Ke.toLowerCase()]=Ee});const ge=await le.json(),ye={mcpToolResponse:ge};qe=new Blob([JSON.stringify(ge,null,2)],{type:"application/json"}),s(ye)}else if(j.mcpSelectedResource){const ne=j.mcpFeatures?.resources.find(Ke=>Ke.name===j.mcpSelectedResource)?.schema?.uri||j.mcpSelectedResource,le=a(Ae,"resource/call");if(!le)throw new Error("Invalid MCP server URL");const ge=await fetch(le,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({uri:ne})});Zt=ge.status,Et=ge.statusText||String(ge.status),ge.headers.forEach((Ke,Ot)=>{Rt[Ot.toLowerCase()]=Ke});const ye=await ge.json(),Ee={mcpResourceResponse:ye};qe=new Blob([JSON.stringify(ye,null,2)],{type:"application/json"}),s(Ee)}else{const Fe=a(Ae,"features");if(!Fe)throw new Error("Invalid MCP server URL");const ne=await fetch(Fe);Zt=ne.status,Et=ne.statusText||String(ne.status),ne.headers.forEach((ge,ye)=>{Rt[ye.toLowerCase()]=ge});const le=await ne.json();s({mcpFeatures:le,mcpOperation:"discover"}),qe=new Blob([JSON.stringify(le,null,2)],{type:"application/json"})}const nn=Math.round(performance.now()-Xe),xn={method:"POST",url:Ae,headers:{},query:{},body:j.mcpSelectedTool?JSON.stringify({name:j.mcpSelectedTool}):"",options:{insecure:!1,redirect:!1}},_e={status:Et,statusCode:Zt,headers:Rt,body:qe,duration:nn},Pe=Date.now(),Le={...j,...e.request,executionTime:Pe,httpRequest:xn,httpResponse:_e,executing:!1};r.find(Fe=>Fe.id===j.id)?mr.update(j.id,Fe=>{Object.assign(Fe,Le)}):mr.insert(Le),n(Fe=>({...Fe,request:Le}));return}const Z=new URLSearchParams;j.query.filter(Ae=>Ae.enabled&&Ae.key).forEach(Ae=>{Z.append(Ae.key,Ae.value)});let $,B="",G=!1;switch(j.body.type){case"json":{$=pf(j.body.content,j.variables),B=j.body.content,se["Content-Type"]||(se["Content-Type"]="application/json");break}case"form-urlencoded":{const Ae=new URLSearchParams;j.body.data.filter(Xe=>Xe.enabled&&Xe.key).forEach(Xe=>{Ae.append(Xe.key,Xe.value)}),$=Ae.toString(),B=Ae.toString(),se["Content-Type"]||(se["Content-Type"]="application/x-www-form-urlencoded");break}case"form-data":{const Ae=new FormData,Xe=[];j.body.data.filter(qe=>qe.enabled&&qe.key).forEach(qe=>{qe.type==="file"&&qe.file?(Ae.append(qe.key,qe.file,qe.fileName),Xe.push(`${qe.key}: [File: ${qe.fileName}]`)):qe.type==="text"&&(Ae.append(qe.key,qe.value),Xe.push(`${qe.key}: ${qe.value}`))}),$=Ae,B=Xe.join(`
`),G=!0;break}case"binary":{j.body.file&&($=j.body.file,B=`[Binary file: ${j.body.fileName}]`,se["Content-Type"]||(se["Content-Type"]=j.body.file.type||"application/octet-stream"));break}case"raw":$=j.body.content,B=j.body.content,se["Content-Type"]||(se["Content-Type"]="text/plain");break}const re=j.httpRequest?.options??{insecure:!1,redirect:!0};re.insecure&&(se["X-Prism-Insecure"]="true"),re.redirect&&(se["X-Prism-Redirect"]="true");const Y=new URL(j.url);let O="/proxy/"+Y.protocol.slice(0,-1)+"/"+Y.host+Y.pathname;const N=Z.toString();N&&(O+="?"+N);const F={method:j.method,url:j.url,headers:se,query:Object.fromEntries(Z),body:B,options:re},R={...se};G&&delete R["Content-Type"];const oe=performance.now(),pe=await fetch(O,{method:j.method,headers:R,body:$&&j.method!=="GET"&&j.method!=="HEAD"?$:void 0}),me=Math.round(performance.now()-oe),xe=await pe.blob(),Me={};pe.headers.forEach((Ae,Xe)=>{Me[Xe]=Ae});const Ie={status:pe.statusText||String(pe.status),statusCode:pe.status,headers:Me,body:xe,duration:me},nt=Date.now(),at={...j,executionTime:nt,httpRequest:F,httpResponse:Ie,executing:!1};r.find(Ae=>Ae.id===j.id)?mr.update(j.id,Ae=>{Object.assign(Ae,at)}):mr.insert(at),n(Ae=>({...Ae,request:at}))}catch(se){const Z=Date.now(),$=se instanceof Error?se.message:"Unknown error",B={status:"",statusCode:0,headers:{},body:new Blob,duration:0,error:$},G={...j,executionTime:Z,httpResponse:B,executing:!1};r.find(Y=>Y.id===j.id)?mr.update(j.id,Y=>{Object.assign(Y,G)}):mr.insert(G),n(Y=>({...Y,request:G}))}},[e.request,s,r]),D=J.useCallback(j=>{const se=ag();se.id=j.id,se.name=j.name,se.protocol=j.protocol??"rest",se.method=j.method,se.url=j.url,se.headers=j.headers.map(Z=>({...Z,id:er()})),se.query=j.query.map(Z=>({...Z,id:er()})),se.variables=(j.variables??[]).map(Z=>({...Z,id:er()})),j.body.type==="form-urlencoded"?se.body={type:"form-urlencoded",data:j.body.data.map(Z=>({...Z,id:er()}))}:j.body.type==="form-data"?se.body={type:"form-data",data:j.body.data.map(Z=>({...Z,id:er(),file:null}))}:j.body.type==="binary"?se.body={type:"binary",file:null,fileName:j.body.fileName}:se.body=j.body,j.httpRequest&&(se.httpRequest={...j.httpRequest}),j.httpResponse&&(se.httpResponse=j.httpResponse),n(Z=>({...Z,request:se}))},[]),I=J.useCallback(async()=>{await m4()},[]),P=J.useCallback(async j=>{mr.delete(j)},[]),V=J.useCallback(()=>{n(j=>({...j,sidebarCollapsed:!j.sidebarCollapsed}))},[]),H=J.useCallback(()=>{n(j=>({...j,aiPanelOpen:!j.aiPanelOpen}))},[]),z=J.useCallback(()=>{n(j=>({...j,request:ag()}))},[]),Q={request:e.request,history:r,sidebarCollapsed:e.sidebarCollapsed,aiPanelOpen:e.aiPanelOpen,setProtocol:l,setMethod:u,setUrl:f,setHeaders:h,setQuery:m,setBody:p,setVariables:_,setOptions:g,executeRequest:L,clearResponse:C,newRequest:z,setGrpcMethodSchema:v,setMcpOperation:x,setMcpSelectedTool:k,setMcpSelectedResource:S,discoverMcpFeatures:T,loadFromHistory:D,clearHistory:I,deleteHistoryEntry:P,toggleSidebar:V,toggleAiPanel:H};return E.jsx(gk.Provider,{value:Q,children:t})}var _4=$S();const yk=J.createContext(null);function b4(t){const e=it.c(6),{children:n}=t,[r,s]=J.useState(null);let a;e[0]===Symbol.for("react.memo_cache_sentinel")?(a=h=>{s(h)},e[0]=a):a=e[0];const l=a;let u;e[1]!==r?(u={portalTarget:r,setPortalTarget:l},e[1]=r,e[2]=u):u=e[2];let f;return e[3]!==n||e[4]!==u?(f=E.jsx(yk.Provider,{value:u,children:n}),e[3]=n,e[4]=u,e[5]=f):f=e[5],f}function _k(){const t=J.useContext(yk);if(!t)throw new Error("useRequestBarPortal must be used within RequestBarPortalProvider");return t}function v4(t){const e=it.c(3),{children:n}=t,{portalTarget:r}=_k();if(!r)return null;let s;return e[0]!==n||e[1]!==r?(s=_4.createPortal(n,r),e[0]=n,e[1]=r,e[2]=s):s=e[2],s}function $n(){const t=J.useContext(gk);if(!t)throw new Error("useClient must be used within a ClientProvider");return t}const x4=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),w4=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),Sw=t=>{const e=w4(t);return e.charAt(0).toUpperCase()+e.slice(1)},bk=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),S4=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var k4={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const E4=J.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:a,iconNode:l,...u},f)=>J.createElement("svg",{ref:f,...k4,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:bk("lucide",s),...!a&&!S4(u)&&{"aria-hidden":"true"},...u},[...l.map(([h,m])=>J.createElement(h,m)),...Array.isArray(a)?a:[a]]));const st=(t,e)=>{const n=J.forwardRef(({className:r,...s},a)=>J.createElement(E4,{ref:a,iconNode:e,className:bk(`lucide-${x4(Sw(t))}`,`lucide-${t}`,r),...s}));return n.displayName=Sw(t),n};const C4=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],T4=st("box",C4);const A4=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],vk=st("check",A4);const R4=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Kl=st("chevron-down",R4);const O4=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],xk=st("chevron-right",O4);const I4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],N4=st("circle-alert",I4);const M4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],wk=st("circle-check",M4);const D4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Sk=st("circle",D4);const L4=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],kk=st("clock",L4);const z4=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Ek=st("eye",z4);const j4=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Yf=st("file-text",j4);const P4=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}]],mf=st("file",P4);const B4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],U4=st("globe",B4);const $4=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],Ck=st("hash",$4);const q4=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],gf=st("loader-circle",q4);const F4=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}],["path",{d:"m8 9 3 3-3 3",key:"12hl5m"}]],V4=st("panel-right-close",F4);const H4=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}],["path",{d:"m10 15-3-3 3-3",key:"1pgupc"}]],G4=st("panel-right-open",H4);const K4=[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]],kw=st("paperclip",K4);const Z4=[["path",{d:"M12 22v-5",key:"1ega77"}],["path",{d:"M15 8V2",key:"18g5xt"}],["path",{d:"M17 8a1 1 0 0 1 1 1v4a4 4 0 0 1-4 4h-4a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1z",key:"1xoxul"}],["path",{d:"M9 8V2",key:"14iosj"}]],Q4=st("plug",Z4);const J4=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Ew=st("refresh-cw",J4);const Y4=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],X4=st("search",Y4);const W4=[["path",{d:"M3.714 3.048a.498.498 0 0 0-.683.627l2.843 7.627a2 2 0 0 1 0 1.396l-2.842 7.627a.498.498 0 0 0 .682.627l18-8.5a.5.5 0 0 0 0-.904z",key:"117uat"}],["path",{d:"M6 12h16",key:"s4cdu5"}]],eL=st("send-horizontal",W4);const tL=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],nL=st("send",tL);const rL=[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]],sL=st("server",rL);const iL=[["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 18h1.973a4 4 0 0 0 3.3-1.7l5.454-8.6a4 4 0 0 1 3.3-1.7H22",key:"1ailkh"}],["path",{d:"M2 6h1.972a4 4 0 0 1 3.6 2.2",key:"km57vx"}],["path",{d:"M22 18h-6.041a4 4 0 0 1-3.3-1.8l-.359-.45",key:"os18l9"}]],Tk=st("shuffle",iL);const aL=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Ml=st("sparkles",aL);const oL=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],lL=st("square",oL);const cL=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Xf=st("trash-2",cL);const uL=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],fL=st("upload",uL);const hL=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],yf=st("wrench",hL);const dL=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],gy=st("x",dL);const pL=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],mL=st("zap",pL),gL={GET:"text-green-600 dark:text-green-400",POST:"text-yellow-600 dark:text-yellow-400",PUT:"text-blue-600 dark:text-blue-400",PATCH:"text-purple-600 dark:text-purple-400",DELETE:"text-red-600 dark:text-red-400",OPTIONS:"text-neutral-500 dark:text-neutral-400",HEAD:"text-neutral-500 dark:text-neutral-400"};function yL(t){const e=new Date(t),n=new Date;return e.toDateString()===n.toDateString()?e.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):e.toLocaleDateString([],{month:"short",day:"numeric"})}function _L(t){return t?t>=200&&t<300?"bg-green-500":t>=300&&t<400?"bg-yellow-500":t>=400&&t<500?"bg-orange-500":"bg-red-500":"bg-neutral-500"}function bL(t){try{return new URL(t.url).hostname}catch{return"Other"}}function vL(t){try{const e=new URL(t.url);return e.pathname+e.search}catch{return t.url}}function xL(t){return t.protocol==="grpc"?"gRPC":t.method}function wL(t){return t.protocol==="grpc"?"text-cyan-600 dark:text-cyan-400":gL[t.method]}function SL(t){const e=new Map;for(const n of t){const r=bL(n),s=e.get(r)||[];s.push(n),e.set(r,s)}return Array.from(e.entries()).map(([n,r])=>({hostname:n,entries:r,latestTimestamp:Math.max(...r.map(s=>s.executionTime??0))})).sort((n,r)=>r.latestTimestamp-n.latestTimestamp)}function kL(){const t=it.c(20),{history:e,sidebarCollapsed:n,loadFromHistory:r,deleteHistoryEntry:s,clearHistory:a,toggleSidebar:l}=$n();let u;t[0]!==e?(u=SL(e),t[0]=e,t[1]=u):u=t[1];const f=u;if(e.length===0||n)return null;let h;t[2]===Symbol.for("react.memo_cache_sentinel")?(h=E.jsx("h1",{className:"text-sm font-semibold text-neutral-700 dark:text-neutral-200 pl-0.5",children:"Prism"}),t[2]=h):h=t[2];let m;t[3]!==a||t[4]!==e.length?(m=e.length>0&&E.jsx("button",{onClick:a,className:"p-1.5 rounded-lg hover:bg-neutral-100 dark:hover:bg-white/5 transition-colors",title:"Clear history",children:E.jsx(Xf,{className:"w-4 h-4 text-neutral-500 dark:text-neutral-400"})}),t[3]=a,t[4]=e.length,t[5]=m):m=t[5];let p;t[6]===Symbol.for("react.memo_cache_sentinel")?(p=E.jsx(G4,{className:"w-4 h-4 text-neutral-500 dark:text-neutral-400"}),t[6]=p):p=t[6];let _;t[7]!==l?(_=E.jsx("button",{onClick:l,className:"p-1.5 rounded-lg hover:bg-neutral-100 dark:hover:bg-white/5 transition-colors",title:"Hide sidebar",children:p}),t[7]=l,t[8]=_):_=t[8];let g;t[9]!==m||t[10]!==_?(g=E.jsxs("div",{className:"px-3 py-2.5 flex items-center justify-between gap-2",children:[h,E.jsxs("div",{className:"flex items-center gap-1",children:[m,_]})]}),t[9]=m,t[10]=_,t[11]=g):g=t[11];let v;t[12]!==s||t[13]!==f||t[14]!==e.length||t[15]!==r?(v=E.jsx("div",{className:"flex-1 overflow-y-auto px-2",children:e.length===0?E.jsx("div",{className:"px-2 py-8 text-center text-neutral-400 dark:text-neutral-600 text-xs",children:"No history yet"}):E.jsx("div",{className:"space-y-3 pb-2",children:f.map(k=>E.jsxs("div",{children:[E.jsx("div",{className:"px-2 py-1 text-[10px] font-medium text-neutral-400 dark:text-neutral-500 uppercase tracking-wider truncate",title:k.hostname,children:k.hostname}),E.jsx("div",{className:"space-y-0.5",children:k.entries.map(S=>E.jsxs("div",{className:"group flex items-center gap-2 px-3 py-1.5 rounded-lg hover:bg-neutral-100 dark:hover:bg-white/5 cursor-pointer transition-colors",onClick:()=>r(S),children:[E.jsx("span",{className:`w-1.5 h-1.5 rounded-full shrink-0 ${_L(S.httpResponse?.statusCode??null)}`}),E.jsx("span",{className:`text-[10px] font-semibold shrink-0 ${wL(S)}`,children:xL(S)}),E.jsx("span",{className:"text-xs text-neutral-500 dark:text-neutral-400 truncate flex-1",title:S.url,children:vL(S)}),E.jsxs("div",{className:"flex items-center justify-end text-[10px] text-neutral-400 dark:text-neutral-600 shrink-0 w-12 h-5",children:[E.jsx("span",{className:"group-hover:hidden",children:yL(S.executionTime??S.creationTime)}),E.jsx("button",{onClick:T=>{T.stopPropagation(),s(S.id)},className:"hidden group-hover:inline-flex items-center justify-center w-5 h-5 hover:bg-neutral-200 dark:hover:bg-white/8 rounded transition-colors",title:"Delete",children:E.jsx("svg",{className:"w-3 h-3 text-neutral-400 dark:text-neutral-500 hover:text-rose-500 dark:hover:text-rose-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]},S.id))})]},k.hostname))})}),t[12]=s,t[13]=f,t[14]=e.length,t[15]=r,t[16]=v):v=t[16];let x;return t[17]!==g||t[18]!==v?(x=E.jsxs("aside",{className:"w-64 bg-white dark:bg-[#1a1a1a]/60 dark:backdrop-blur-xl border border-neutral-200 dark:border-white/8 rounded-xl flex flex-col overflow-hidden dark:shadow-2xl",children:[g,v]}),t[17]=g,t[18]=v,t[19]=x):x=t[19],x}const Xp=[{value:"rest",label:"HTTP",icon:U4},{value:"grpc",label:"gRPC",icon:sL},{value:"mcp",label:"MCP",icon:Q4}];function EL(){const t=it.c(23),{request:e,setProtocol:n}=$n(),r=e?.protocol??"rest",[s,a]=J.useState(!1),l=J.useRef(null);let u;t[0]!==r?(u=Xp.find(C=>C.value===r)??Xp[0],t[0]=r,t[1]=u):u=t[1];const f=u,h=f.icon;let m,p;t[2]===Symbol.for("react.memo_cache_sentinel")?(m=()=>{const C=L=>{l.current&&!l.current.contains(L.target)&&a(!1)};return document.addEventListener("mousedown",C),()=>document.removeEventListener("mousedown",C)},p=[],t[2]=m,t[3]=p):(m=t[2],p=t[3]),J.useEffect(m,p);let _;t[4]!==s?(_=()=>a(!s),t[4]=s,t[5]=_):_=t[5];let g;t[6]!==h?(g=E.jsx(h,{className:"w-4 h-4"}),t[6]=h,t[7]=g):g=t[7];let v;t[8]!==f.label?(v=E.jsx("span",{className:"text-xs font-medium",children:f.label}),t[8]=f.label,t[9]=v):v=t[9];let x;t[10]===Symbol.for("react.memo_cache_sentinel")?(x=E.jsx(Kl,{className:"w-3 h-3"}),t[10]=x):x=t[10];let k;t[11]!==f.label||t[12]!==_||t[13]!==g||t[14]!==v?(k=E.jsxs("button",{type:"button",onClick:_,className:"flex items-center gap-1 px-2 py-1.5 rounded-md hover:bg-neutral-100 dark:hover:bg-white/10 transition-colors text-neutral-600 dark:text-neutral-400",title:f.label,children:[g,v,x]}),t[11]=f.label,t[12]=_,t[13]=g,t[14]=v,t[15]=k):k=t[15];let S;t[16]!==s||t[17]!==r||t[18]!==n?(S=s&&E.jsx("div",{className:"absolute top-full left-0 mt-1 bg-white dark:bg-[#1a1a1a] border border-neutral-200 dark:border-white/10 rounded-md shadow-lg z-50 min-w-28",children:Xp.map(C=>{const L=C.icon;return E.jsxs("button",{type:"button",onClick:()=>{n(C.value),a(!1)},className:`w-full flex items-center gap-2 px-3 py-1.5 text-sm transition-colors ${r===C.value?"bg-neutral-100 dark:bg-white/10 text-neutral-900 dark:text-neutral-100":"text-neutral-600 dark:text-neutral-400 hover:bg-neutral-50 dark:hover:bg-white/5"}`,children:[E.jsx(L,{className:"w-4 h-4"}),C.label]},C.value)})}),t[16]=s,t[17]=r,t[18]=n,t[19]=S):S=t[19];let T;return t[20]!==k||t[21]!==S?(T=E.jsxs("div",{ref:l,className:"relative",children:[k,S]}),t[20]=k,t[21]=S,t[22]=T):T=t[22],T}let il={};async function CL(){try{const t=await fetch("/config.json");if(t.ok){const e=await t.json();il={...il,...e}}else console.warn("Failed to load config.json, using defaults");return il}catch(t){return console.warn("Error loading config:",t),il}}function yy(){return il}function TL(){const t=it.c(17),{request:e,executeRequest:n,aiPanelOpen:r,toggleAiPanel:s}=$n();let a;t[0]===Symbol.for("react.memo_cache_sentinel")?(a=yy().ai?.model,t[0]=a):a=t[0];const l=!!a,u=e?.executing??!1,f=e?.protocol??"rest",h=e?.url??"",m=AL;let p;t[1]!==h?(p=m(h),t[1]=h,t[2]=p):p=t[2];const{host:_,service:g,method:v}=p,x=e?.mcpSelectedTool,k=e?.mcpSelectedResource,S=f==="rest"?h.length>0:f==="mcp"?h.length>0&&(x||k):_.length>0&&g.length>0&&v.length>0;let T;t[3]!==n?(T=()=>{n()},t[3]=n,t[4]=T):T=t[4];const C=T,L=u||!S;let D;t[5]!==u?(D=u?E.jsxs("svg",{className:"w-4 h-4 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[E.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"3"}),E.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):E.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14 5l7 7m0 0l-7 7m7-7H3"})}),t[5]=u,t[6]=D):D=t[6];let I;t[7]!==C||t[8]!==L||t[9]!==D?(I=E.jsx("button",{type:"button",onClick:C,disabled:L,className:"p-1.5 hover:bg-neutral-100 dark:hover:bg-white/10 disabled:opacity-30 disabled:cursor-not-allowed rounded-md transition-colors text-neutral-500 dark:text-neutral-400 hover:text-neutral-700 dark:hover:text-neutral-200",title:"Send request",children:D}),t[7]=C,t[8]=L,t[9]=D,t[10]=I):I=t[10];let P;t[11]!==r||t[12]!==s?(P=l&&E.jsx("button",{type:"button",onClick:s,className:`p-1.5 hover:bg-neutral-100 dark:hover:bg-white/10 rounded-md transition-colors ${r?"text-amber-500 hover:text-amber-600":"text-neutral-500 dark:text-neutral-400 hover:text-neutral-700 dark:hover:text-neutral-200"}`,title:"AI Assistant",children:E.jsx(Ml,{className:"w-4 h-4"})}),t[11]=r,t[12]=s,t[13]=P):P=t[13];let V;return t[14]!==I||t[15]!==P?(V=E.jsxs(v4,{children:[I,P]}),t[14]=I,t[15]=P,t[16]=V):V=t[16],V}function AL(t){const e=t.match(/^grpc:\/\/([^/]*)(?:\/([^/]*)(?:\/([^/]*))?)?$/);return e?{host:e[1]||"",service:e[2]||"",method:e[3]||""}:{host:"",service:"",method:""}}const RL=["GET","POST","PUT","PATCH","DELETE","OPTIONS","HEAD"],OL={GET:"text-emerald-600 dark:text-emerald-400",POST:"text-amber-600 dark:text-amber-400",PUT:"text-blue-600 dark:text-blue-400",PATCH:"text-purple-600 dark:text-purple-400",DELETE:"text-rose-600 dark:text-rose-400",OPTIONS:"text-neutral-500 dark:text-neutral-400",HEAD:"text-neutral-500 dark:text-neutral-400"};function IL(){const t=it.c(15),{request:e,setUrl:n,setMethod:r}=$n(),s=e?.method??"GET",a=e?.url??"";let l;t[0]!==r?(l=g=>r(g.target.value),t[0]=r,t[1]=l):l=t[1];const u=`px-2 py-1 bg-transparent font-semibold text-xs focus:outline-none cursor-pointer ${OL[s]}`;let f;t[2]===Symbol.for("react.memo_cache_sentinel")?(f=RL.map(NL),t[2]=f):f=t[2];let h;t[3]!==s||t[4]!==l||t[5]!==u?(h=E.jsx("select",{value:s,onChange:l,className:u,children:f}),t[3]=s,t[4]=l,t[5]=u,t[6]=h):h=t[6];let m;t[7]!==n?(m=g=>n(g.target.value),t[7]=n,t[8]=m):m=t[8];let p;t[9]!==m||t[10]!==a?(p=E.jsx("input",{type:"text",value:a,onChange:m,placeholder:"Enter request URL",className:"flex-1 px-3 py-1.5 bg-transparent text-neutral-800 dark:text-neutral-100 text-sm placeholder-neutral-400 dark:placeholder-neutral-600 focus:outline-none"}),t[9]=m,t[10]=a,t[11]=p):p=t[11];let _;return t[12]!==h||t[13]!==p?(_=E.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[h,p]}),t[12]=h,t[13]=p,t[14]=_):_=t[14],_}function NL(t){return E.jsx("option",{value:t,className:"bg-white dark:bg-[#1a1a1a]",children:t},t)}function Cw(){return Math.random().toString(36).substring(2,9)}function Fu(t){const e=it.c(32),{items:n,onChange:r,keyPlaceholder:s,valuePlaceholder:a,keySuggestions:l}=t,u=s===void 0?"Key":s,f=a===void 0?"Value":a;let h;e[0]!==l?(h=l===void 0?[]:l,e[0]=l,e[1]=h):h=e[1];const m=h,[p,_]=J.useState(null),[g,v]=J.useState("");let x;e[2]!==n||e[3]!==r?(x=(P,V,H)=>{const z=n.map(j=>j.id===P?{...j,[V]:H}:j),Q=z[z.length-1];Q&&(Q.key||Q.value)&&z.push({id:Cw(),enabled:!0,key:"",value:""}),r(z)},e[2]=n,e[3]=r,e[4]=x):x=e[4];const k=x;let S;e[5]!==n||e[6]!==r?(S=P=>{if(n.length===1){r([{id:Cw(),enabled:!0,key:"",value:""}]);return}r(n.filter(V=>V.id!==P))},e[5]=n,e[6]=r,e[7]=S):S=e[7];const T=S;let C;e[8]!==n||e[9]!==m?(C=P=>{const V=n.map(ML);return m.filter(H=>H.toLowerCase().includes(P.toLowerCase())&&!V.includes(H.toLowerCase()))},e[8]=n,e[9]=m,e[10]=C):C=e[10];const L=C;let D;if(e[11]!==p||e[12]!==g||e[13]!==L||e[14]!==n||e[15]!==u||e[16]!==m||e[17]!==T||e[18]!==k||e[19]!==f){let P;e[21]!==p||e[22]!==g||e[23]!==L||e[24]!==u||e[25]!==m||e[26]!==T||e[27]!==k||e[28]!==f?(P=V=>E.jsxs("tr",{className:`border-b border-neutral-100 dark:border-white/5 last:border-0 ${V.enabled?"":"opacity-40"}`,children:[E.jsx("td",{className:"w-8 pl-2.5 py-1.5",children:E.jsx("button",{type:"button",onClick:()=>k(V.id,"enabled",!V.enabled),className:"p-0.5 rounded transition-colors",children:V.enabled?E.jsx(wk,{className:"w-3.5 h-3.5 text-neutral-700 dark:text-neutral-300"}):E.jsx(Sk,{className:"w-3.5 h-3.5 text-neutral-300 dark:text-neutral-600"})})}),E.jsx("td",{className:"px-1.5 py-1.5",children:E.jsxs("div",{className:"relative",children:[E.jsx("input",{type:"text",value:V.key,onChange:H=>{k(V.id,"key",H.target.value),v(H.target.value)},onFocus:()=>{_(V.id),v(V.key)},onBlur:()=>{setTimeout(()=>_(null),150)},placeholder:u,className:"w-full px-2 py-1 bg-white dark:bg-white/5 border border-neutral-300 dark:border-white/10 rounded text-xs text-neutral-800 dark:text-neutral-100 placeholder-neutral-400 dark:placeholder-neutral-500 focus:outline-none focus:border-neutral-400 dark:focus:border-white/20 transition-colors"}),m.length>0&&p===V.id&&(()=>{const H=L(g);return H.length===0?null:E.jsx("div",{className:"absolute z-50 left-0 right-0 top-full mt-1 bg-white dark:bg-[#1a1a1a] border border-neutral-200 dark:border-white/10 rounded-md shadow-lg max-h-48 overflow-y-auto",children:H.map(z=>E.jsx("button",{type:"button",onMouseDown:Q=>{Q.preventDefault(),k(V.id,"key",z),_(null)},className:"w-full px-2 py-1.5 text-left text-xs text-neutral-600 dark:text-neutral-300 hover:bg-neutral-100 dark:hover:bg-white/10 transition-colors",children:z},z))})})()]})}),E.jsx("td",{className:"px-1.5 py-1.5",children:E.jsx("input",{type:"text",value:V.value,onChange:H=>k(V.id,"value",H.target.value),placeholder:f,className:"w-full px-2 py-1 bg-white dark:bg-white/5 border border-neutral-300 dark:border-white/10 rounded text-xs text-neutral-800 dark:text-neutral-100 placeholder-neutral-400 dark:placeholder-neutral-500 focus:outline-none focus:border-neutral-400 dark:focus:border-white/20 transition-colors"})}),E.jsx("td",{className:"w-8 pr-1.5 py-1.5",children:E.jsx("button",{type:"button",onClick:()=>T(V.id),className:"p-1 text-neutral-400 dark:text-neutral-500 hover:text-rose-500 dark:hover:text-rose-400 hover:bg-neutral-100 dark:hover:bg-white/5 rounded transition-colors",children:E.jsx(Xf,{className:"w-3.5 h-3.5"})})})]},V.id),e[21]=p,e[22]=g,e[23]=L,e[24]=u,e[25]=m,e[26]=T,e[27]=k,e[28]=f,e[29]=P):P=e[29],D=n.map(P),e[11]=p,e[12]=g,e[13]=L,e[14]=n,e[15]=u,e[16]=m,e[17]=T,e[18]=k,e[19]=f,e[20]=D}else D=e[20];let I;return e[30]!==D?(I=E.jsx("div",{children:E.jsx("table",{className:"w-full",children:E.jsx("tbody",{children:D})})}),e[30]=D,e[31]=I):I=e[31],I}function ML(t){return t.key.toLowerCase()}function DL(){return Math.random().toString(36).substring(2,9)}function Tw(){return{id:DL(),enabled:!0,key:"",type:"text",value:"",file:null,fileName:""}}function LL(t){const e=it.c(21),{items:n,onChange:r,keyPlaceholder:s,valuePlaceholder:a}=t,l=s===void 0?"Field":s,u=a===void 0?"Value":a;let f;e[0]===Symbol.for("react.memo_cache_sentinel")?(f={},e[0]=f):f=e[0];const h=J.useRef(f);let m;e[1]!==n||e[2]!==r?(m=(D,I)=>{const P=n.map(H=>H.id===D?{...H,...I}:H),V=P[P.length-1];V&&(V.key||V.value||V.file)&&P.push(Tw()),r(P)},e[1]=n,e[2]=r,e[3]=m):m=e[3];const p=m;let _;e[4]!==n||e[5]!==r?(_=D=>{if(n.length===1){r([Tw()]);return}r(n.filter(I=>I.id!==D))},e[4]=n,e[5]=r,e[6]=_):_=e[6];const g=_;let v;e[7]!==p?(v=(D,I)=>{const P=I.target.files?.[0]??null;I.target.value="",P&&p(D,{type:"file",file:P,fileName:P.name,value:""})},e[7]=p,e[8]=v):v=e[8];const x=v;let k;e[9]!==p?(k=D=>{p(D,{type:"text",file:null,fileName:""})},e[9]=p,e[10]=k):k=e[10];const S=k,T=zL;let C;e[11]!==S||e[12]!==x||e[13]!==n||e[14]!==l||e[15]!==g||e[16]!==p||e[17]!==u?(C=n.map(D=>E.jsxs("tr",{className:`border-b border-neutral-100 dark:border-white/5 last:border-0 ${D.enabled?"":"opacity-40"}`,children:[E.jsx("td",{className:"w-8 pl-2.5 py-1.5",children:E.jsx("button",{type:"button",onClick:()=>p(D.id,{enabled:!D.enabled}),className:"p-0.5 rounded transition-colors",children:D.enabled?E.jsx(wk,{className:"w-3.5 h-3.5 text-neutral-700 dark:text-neutral-300"}):E.jsx(Sk,{className:"w-3.5 h-3.5 text-neutral-300 dark:text-neutral-600"})})}),E.jsx("td",{className:"px-1.5 py-1.5 w-36",children:E.jsx("input",{type:"text",value:D.key,onChange:I=>p(D.id,{key:I.target.value}),placeholder:l,className:"w-full px-2 py-1 bg-white dark:bg-white/5 border border-neutral-300 dark:border-white/10 rounded text-xs text-neutral-800 dark:text-neutral-100 placeholder-neutral-400 dark:placeholder-neutral-500 focus:outline-none focus:border-neutral-400 dark:focus:border-white/20 transition-colors"})}),E.jsxs("td",{className:"px-1.5 py-1.5",children:[E.jsx("input",{type:"file",ref:I=>{h.current[D.id]=I},onChange:I=>x(D.id,I),className:"hidden"}),D.type==="file"&&D.file?E.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 bg-neutral-100 dark:bg-white/10 rounded text-xs text-neutral-600 dark:text-neutral-300",children:[E.jsx(kw,{className:"w-3 h-3 shrink-0"}),E.jsx("span",{className:"truncate max-w-xs",children:D.fileName}),E.jsxs("span",{className:"text-neutral-400 shrink-0",children:["(",T(D.file.size),")"]}),E.jsx("button",{type:"button",onClick:()=>S(D.id),className:"p-0.5 ml-1 text-neutral-400 hover:text-neutral-600 dark:hover:text-neutral-200 transition-colors shrink-0",children:E.jsx(gy,{className:"w-3 h-3"})})]}):E.jsx("input",{type:"text",value:D.value,onChange:I=>p(D.id,{value:I.target.value}),placeholder:u,className:"w-full px-2 py-1 bg-white dark:bg-white/5 border border-neutral-300 dark:border-white/10 rounded text-xs text-neutral-800 dark:text-neutral-100 placeholder-neutral-400 dark:placeholder-neutral-500 focus:outline-none focus:border-neutral-400 dark:focus:border-white/20 transition-colors"})]}),E.jsx("td",{className:"w-16 pr-1.5 py-1.5",children:E.jsxs("div",{className:"flex items-center gap-0.5",children:[E.jsx("button",{type:"button",onClick:()=>h.current[D.id]?.click(),className:`p-1 rounded transition-colors ${D.type==="file"?"text-blue-500 dark:text-blue-400 bg-blue-50 dark:bg-blue-500/10":"text-neutral-400 dark:text-neutral-500 hover:text-neutral-600 dark:hover:text-neutral-300 hover:bg-neutral-100 dark:hover:bg-white/5"}`,title:"Attach file",children:E.jsx(kw,{className:"w-3.5 h-3.5"})}),E.jsx("button",{type:"button",onClick:()=>g(D.id),className:"p-1 text-neutral-400 dark:text-neutral-500 hover:text-rose-500 dark:hover:text-rose-400 hover:bg-neutral-100 dark:hover:bg-white/5 rounded transition-colors",children:E.jsx(Xf,{className:"w-3.5 h-3.5"})})]})})]},D.id)),e[11]=S,e[12]=x,e[13]=n,e[14]=l,e[15]=g,e[16]=p,e[17]=u,e[18]=C):C=e[18];let L;return e[19]!==C?(L=E.jsx("div",{children:E.jsx("table",{className:"w-full",children:E.jsx("tbody",{children:C})})}),e[19]=C,e[20]=L):L=e[20],L}function zL(t){return t<1024?`${t} B`:t<1048576?`${(t/1024).toFixed(1)} KB`:`${(t/1048576).toFixed(1)} MB`}function jL(t){const e=it.c(12),{file:n,fileName:r,onFileChange:s}=t,a=J.useRef(null);let l;e[0]!==s?(l=v=>{s(v,v?.name??"")},e[0]=s,e[1]=l):l=e[1];const u=l,f=BL,h=PL;let m;e[2]!==u?(m=E.jsx("input",{type:"file",ref:a,onChange:v=>u(v.target.files?.[0]??null),className:"hidden"}),e[2]=u,e[3]=m):m=e[3];let p;e[4]!==n||e[5]!==r||e[6]!==s?(p=n?E.jsxs("div",{className:"flex items-center gap-3 p-3 bg-neutral-100 dark:bg-white/5 rounded-lg border border-neutral-200 dark:border-white/10",children:[E.jsx("div",{className:"flex items-center justify-center w-10 h-10 bg-white dark:bg-white/10 rounded-lg text-xl",children:h(n.type)}),E.jsxs("div",{className:"flex-1 min-w-0",children:[E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx(Yf,{className:"w-4 h-4 text-neutral-500 dark:text-neutral-400 shrink-0"}),E.jsx("p",{className:"text-sm font-medium text-neutral-800 dark:text-neutral-100 truncate",children:r})]}),E.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[E.jsx("span",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:f(n.size)}),E.jsx("span",{className:"text-xs text-neutral-400 dark:text-neutral-500",children:""}),E.jsx("span",{className:"text-xs text-neutral-500 dark:text-neutral-400 truncate",children:n.type||"application/octet-stream"})]})]}),E.jsxs("div",{className:"flex items-center gap-1",children:[E.jsx("button",{type:"button",onClick:()=>a.current?.click(),className:"px-2 py-1 text-xs text-neutral-600 dark:text-neutral-300 hover:bg-neutral-200 dark:hover:bg-white/10 rounded transition-colors",children:"Change"}),E.jsx("button",{type:"button",onClick:()=>s(null,""),className:"p-1 text-neutral-400 dark:text-neutral-500 hover:text-rose-500 dark:hover:text-rose-400 hover:bg-neutral-200 dark:hover:bg-white/10 rounded transition-colors",children:E.jsx(gy,{className:"w-4 h-4"})})]})]}):E.jsxs("div",{onClick:()=>a.current?.click(),className:"flex flex-col items-center justify-center p-8 border-2 border-dashed border-neutral-300 dark:border-white/20 rounded-lg cursor-pointer hover:border-neutral-400 dark:hover:border-white/30 hover:bg-neutral-50 dark:hover:bg-white/5 transition-colors",children:[E.jsx(fL,{className:"w-8 h-8 text-neutral-400 dark:text-neutral-500 mb-2"}),E.jsx("p",{className:"text-sm text-neutral-600 dark:text-neutral-300 mb-1",children:"Click to select a file"}),E.jsx("p",{className:"text-xs text-neutral-400 dark:text-neutral-500",children:"or drag and drop"})]}),e[4]=n,e[5]=r,e[6]=s,e[7]=p):p=e[7];let _;e[8]===Symbol.for("react.memo_cache_sentinel")?(_=E.jsx("p",{className:"text-xs text-neutral-400 dark:text-neutral-500",children:"The file will be sent as the raw request body. Content-Type will be set automatically based on the file type."}),e[8]=_):_=e[8];let g;return e[9]!==m||e[10]!==p?(g=E.jsxs("div",{className:"space-y-3",children:[m,p,_]}),e[9]=m,e[10]=p,e[11]=g):g=e[11],g}function PL(t){return t.startsWith("image/")?"":t.startsWith("video/")?"":t.startsWith("audio/")?"":t.includes("pdf")?"":t.includes("zip")||t.includes("tar")||t.includes("gzip")?"":t.includes("json")||t.includes("xml")||t.includes("text")?"":""}function BL(t){return t<1024?`${t} B`:t<1048576?`${(t/1024).toFixed(1)} KB`:t<1073741824?`${(t/1048576).toFixed(1)} MB`:`${(t/1073741824).toFixed(2)} GB`}function UL(t){const e=it.c(9),{value:n,onChange:r,placeholder:s}=t,a=J.useRef(null);let l;e[0]===Symbol.for("react.memo_cache_sentinel")?(l=()=>{const m=a.current;if(!m)return;m.style.height="auto";const p=Math.min(m.scrollHeight,160);m.style.height=`${p}px`},e[0]=l):l=e[0];let u;e[1]!==n?(u=[n],e[1]=n,e[2]=u):u=e[2],J.useEffect(l,u);let f;e[3]!==r?(f=m=>r(m.target.value),e[3]=r,e[4]=f):f=e[4];let h;return e[5]!==s||e[6]!==f||e[7]!==n?(h=E.jsx("textarea",{ref:a,value:n,onChange:f,placeholder:s,spellCheck:!1,rows:3,className:"w-full font-mono text-xs text-neutral-800 dark:text-neutral-100 bg-transparent focus:outline-none placeholder-neutral-400 dark:placeholder-neutral-600 resize-none overflow-auto"}),e[5]=s,e[6]=f,e[7]=n,e[8]=h):h=e[8],h}function Aw(t){const e=[],n=/\{\{(\w+):([^{}]+)\}\}/g;let r;for(;(r=n.exec(t))!==null;)e.push({start:r.index,end:r.index+r[0].length,type:r[1],id:r[2],full:r[0]});return e}function Vu(t){if(t.nodeType===Node.TEXT_NODE)return(t.textContent||"").replace(/\u200B/g,"");if(t.classList?.contains("variable-chip"))return t.dataset.marker||"";if(t.tagName==="BR")return`
`;let e="";const n=t.tagName==="DIV"||t.tagName==="P";for(const r of t.childNodes)e+=Vu(r);return n&&e&&!e.endsWith(`
`)&&(e+=`
`),e}function Ak(t,e){if(e.rangeCount===0)return"";const n=e.getRangeAt(0),r=n.startContainer,s=n.startOffset;let a="",l=!1;function u(f){if(!l){if(f===r)if(f.nodeType===Node.TEXT_NODE){a+=(f.textContent||"").slice(0,s).replace(/\u200B/g,""),l=!0;return}else{const h=f.childNodes;for(let m=0;m<s;m++)if(u(h[m]),l)return;l=!0;return}if(f.nodeType===Node.TEXT_NODE)a+=(f.textContent||"").replace(/\u200B/g,"");else if(f.nodeType===Node.ELEMENT_NODE){const h=f;if(h.classList.contains("variable-chip")){if(h.contains(r)){l=!0;return}a+=h.dataset.marker||""}else if(h.tagName==="BR")a+=`
`;else if(h.tagName==="DIV"||h.tagName==="P"){for(const m of Array.from(h.childNodes))if(u(m),l)return;a&&!a.endsWith(`
`)&&(a+=`
`)}else for(const m of Array.from(h.childNodes))if(u(m),l)return}}}return u(t),a}function $L(t){const e=window.getSelection();return!e||e.rangeCount===0||!t.contains(e.anchorNode)?null:Ak(t,e).length}function qL(t,e){let n=0,r=!1;function s(a){if(!r){if(a.nodeType===Node.TEXT_NODE){const l=a.textContent||"",f=l.replace(/\u200B/g,"").length;if(n+f>=e){const h=e-n;let m=0,p=0;for(;p<h&&m<l.length;)l[m]!==""&&p++,m++;const _=document.createRange();_.setStart(a,m),_.setEnd(a,m);const g=window.getSelection();g?.removeAllRanges(),g?.addRange(_),r=!0;return}n+=f}else if(a.nodeType===Node.ELEMENT_NODE){const l=a;if(l.classList.contains("variable-chip")){const u=(l.dataset.marker||"").length;n+=u}else if(l.tagName==="BR")n+=1;else{const u=l.tagName==="DIV"||l.tagName==="P";for(const f of Array.from(a.childNodes))if(s(f),r)return;u&&n<e&&(n+=1)}}}}s(t)}function FL(t,e,n){switch(t){case"file_base64":case"file_dataurl":return n?.data?n.name||"file":"Select file...";default:return n?.name||t}}function VL(t){const e="w-3 h-3";switch(t){case"file_base64":case"file_dataurl":return`<svg class="${e}" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/></svg>`;case"base64":return`<svg class="${e}" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="4" y1="9" x2="20" y2="9"/><line x1="4" y1="15" x2="20" y2="15"/><line x1="10" y1="3" x2="8" y2="21"/><line x1="16" y1="3" x2="14" y2="21"/></svg>`;case"timestamp":return`<svg class="${e}" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>`;case"uuid":return`<svg class="${e}" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"/><path d="M5 3v4"/><path d="M9 5H1"/></svg>`;case"random_string":return`<svg class="${e}" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M2 18h1.4c1.3 0 2.5-.6 3.3-1.7l14.2-12.6c.8-1.1 2-1.7 3.3-1.7H22"/><path d="M2 6h1.4c1.3 0 2.5.6 3.3 1.7l14.2 12.6c.8 1.1 2 1.7 3.3 1.7H22"/></svg>`;default:return""}}function Rw(t,e,n,r){const s=r.find(m=>m.type===t&&m.id===e),a=t==="file_base64"||t==="file_dataurl"||t==="base64",l=s&&s.data,u=document.createElement("span");u.contentEditable="false",u.className=`variable-chip inline-flex items-center gap-1 px-1.5 py-0.5 mx-0.5 rounded text-xs font-medium align-baseline select-none ${a&&!l?"bg-amber-500/20 text-amber-300 border border-amber-500/30":"bg-blue-500/20 text-blue-300 border border-blue-500/30"} ${a?"cursor-pointer hover:bg-blue-500/30":""}`,u.dataset.marker=n,u.dataset.variableType=t,u.dataset.variableId=e;const f=document.createElement("span");f.className="chip-icon",f.innerHTML=VL(t),u.appendChild(f);const h=document.createElement("span");return h.className="chip-label",h.textContent=FL(t,e,s),u.appendChild(h),u}function Rk(t){const e=it.c(40),{editorRef:n,value:r,onChange:s,variables:a,onVariablesChange:l,indentTriggers:u}=t;let f;e[0]!==u?(f=u===void 0?["{","["]:u,e[0]=u,e[1]=f):f=e[1];const h=f,m=J.useRef(""),p=J.useRef(!1),_=J.useRef(!1);let g;e[2]!==s||e[3]!==l||e[4]!==a?(g=Y=>{const O=Vu(Y);m.current=O,p.current=!0,s(O);const N=new Set(Aw(O).map(KL)),F=a.filter(R=>N.has(R.id));F.length!==a.length&&(_.current=!0,l(F))},e[2]=s,e[3]=l,e[4]=a,e[5]=g):g=e[5];const v=g,[x,k]=J.useState(!1);let S;e[6]===Symbol.for("react.memo_cache_sentinel")?(S={top:0,left:0},e[6]=S):S=e[6];const[T,C]=J.useState(S),L=GL;let D;e[7]!==n||e[8]!==r||e[9]!==a?(D=()=>{const Y=n.current;if(!Y)return;const O=$L(Y),N=Aw(r);Y.innerHTML="";let F=0;for(const oe of N){const pe=r.slice(F,oe.start);pe&&L(Y,pe);const me=Rw(oe.type,oe.id,oe.full,a);Y.appendChild(me),Y.appendChild(document.createTextNode("")),F=oe.end}const R=r.slice(F);R&&L(Y,R),Y.childNodes.length===0&&Y.appendChild(document.createElement("br")),m.current=r,O!==null&&qL(Y,O)},e[7]=n,e[8]=r,e[9]=a,e[10]=D):D=e[10];const I=D;let P,V;e[11]!==I||e[12]!==r?(P=()=>{!p.current&&r!==m.current&&I(),p.current=!1},V=[r,I],e[11]=I,e[12]=r,e[13]=P,e[14]=V):(P=e[13],V=e[14]),J.useEffect(P,V);let H;e[15]!==I?(H=()=>{_.current?_.current=!1:I()},e[15]=I,e[16]=H):H=e[16];let z;e[17]!==I||e[18]!==a?(z=[a,I],e[17]=I,e[18]=a,e[19]=z):z=e[19],J.useEffect(H,z);let Q;e[20]!==n||e[21]!==v?(Q=()=>{const Y=n.current;if(!Y)return;const O=Vu(Y),N=window.getSelection();if(N&&N.rangeCount>0){const F=N.getRangeAt(0);if(F.startContainer.nodeType===Node.TEXT_NODE){const R=F.startContainer.textContent||"",oe=F.startOffset;if(oe>=2&&R.slice(oe-2,oe)==="{{"){const pe=F.getBoundingClientRect();C({top:pe.bottom+4,left:pe.left}),k(!0)}else k(!1)}}O!==m.current&&v(Y)},e[20]=n,e[21]=v,e[22]=Q):Q=e[22];const j=Q,se=HL;let Z;e[23]!==n||e[24]!==h||e[25]!==x||e[26]!==v?(Z=Y=>{if(x){Y.key==="Escape"&&(k(!1),Y.preventDefault());return}if(Y.key==="Backspace"){const O=window.getSelection();if(O&&O.rangeCount>0&&O.isCollapsed){const N=O.getRangeAt(0),F=N.startContainer,R=N.startOffset;if(F.nodeType===Node.TEXT_NODE&&R===1&&F.textContent?.charAt(0)===""){const oe=F.previousSibling;if(oe&&oe.classList?.contains("variable-chip")){Y.preventDefault();const pe=oe,me=pe.parentNode;me?.removeChild(pe),me?.removeChild(F);const xe=n.current;xe&&v(xe);return}}if(R===0){let oe=F.previousSibling;if(oe?.nodeType===Node.TEXT_NODE&&oe.textContent===""&&(oe=oe.previousSibling),oe&&oe.classList?.contains("variable-chip")){Y.preventDefault();const pe=oe,me=pe.nextSibling,xe=pe.parentNode;xe?.removeChild(pe),me?.nodeType===Node.TEXT_NODE&&me.textContent===""&&xe?.removeChild(me);const Me=n.current;Me&&v(Me);return}}}}if(Y.key==="Tab"&&(Y.preventDefault(),document.execCommand("insertText",!1,"  ")),Y.key==="Enter"){Y.preventDefault();const O=n.current,N=window.getSelection();let F="";if(O&&N&&N.rangeCount>0){const pe=Ak(O,N),me=pe.lastIndexOf(`
`),xe=pe.slice(me+1),Me=xe.match(/^(\s*)/);F=Me?Me[1]:"";const nt=xe.trimEnd().slice(-1);h.includes(nt)&&(F=F+"  ")}const R=document.createElement("br"),oe=N?.getRangeAt(0);oe&&(oe.deleteContents(),oe.insertNode(R),oe.setStartAfter(R),oe.setEndAfter(R),N?.removeAllRanges(),N?.addRange(oe),F&&document.execCommand("insertText",!1,F))}},e[23]=n,e[24]=h,e[25]=x,e[26]=v,e[27]=Z):Z=e[27];const $=Z;let B;e[28]!==n||e[29]!==s||e[30]!==l||e[31]!==a?(B=Y=>{k(!1);const O=n.current;if(!O)return;const N=window.getSelection();if(!N||N.rangeCount===0)return;const F=N.getRangeAt(0);if(F.startContainer.nodeType!==Node.TEXT_NODE)return;const R=F.startContainer,oe=F.startOffset,pe=R.textContent||"";R.textContent=pe.slice(0,oe-2)+pe.slice(oe);const me=Math.random().toString(36).substring(2,9),xe=Y==="file_base64"||Y==="file_dataurl"?"file":Y,Me=`{{${Y}:${me}}}`,Ie=Rw(Y,me,Me,a),nt=oe-2;F.setStart(R,nt),F.setEnd(R,nt),F.insertNode(Ie);const at=document.createTextNode("");Ie.after(at),F.setStart(at,1),F.setEnd(at,1),N.removeAllRanges(),N.addRange(F),_.current=!0,l([...a,{id:me,type:Y,name:xe}]);const At=Vu(O);return m.current=At,p.current=!0,s(At),me},e[28]=n,e[29]=s,e[30]=l,e[31]=a,e[32]=B):B=e[32];const G=B;let re;return e[33]!==I||e[34]!==j||e[35]!==$||e[36]!==G||e[37]!==x||e[38]!==T?(re={handleInput:j,handlePaste:se,handleKeyDown:$,insertVariable:G,showTypeMenu:x,setShowTypeMenu:k,typeMenuPosition:T,buildDOM:I},e[33]=I,e[34]=j,e[35]=$,e[36]=G,e[37]=x,e[38]=T,e[39]=re):re=e[39],re}function HL(t){t.preventDefault();const e=t.clipboardData.getData("text/plain");document.execCommand("insertText",!1,e)}function GL(t,e){e.split(`
`).forEach((r,s)=>{s>0&&t.appendChild(document.createElement("br")),r&&t.appendChild(document.createTextNode(r))})}function KL(t){return t.id}const ZL=[{type:"file_base64",label:"File (Base64)",description:"Select a file to encode",icon:E.jsx(mf,{className:"w-3.5 h-3.5"})},{type:"file_dataurl",label:"File (Data URL)",description:"File as data:... URL",icon:E.jsx(mf,{className:"w-3.5 h-3.5"})},{type:"base64",label:"Text (Base64)",description:"Text to encode",icon:E.jsx(Ck,{className:"w-3.5 h-3.5"})},{type:"timestamp",label:"Timestamp",description:"Unix timestamp",icon:E.jsx(kk,{className:"w-3.5 h-3.5"})},{type:"uuid",label:"UUID",description:"Random UUID",icon:E.jsx(Ml,{className:"w-3.5 h-3.5"})},{type:"random_string",label:"Random String",description:"16-char random",icon:E.jsx(Tk,{className:"w-3.5 h-3.5"})}];function _y({value:t,onChange:e,variables:n,onVariablesChange:r,placeholder:s,action:a}){const l=J.useRef(null),u=J.useRef(null),{handleInput:f,handlePaste:h,handleKeyDown:m,insertVariable:p,showTypeMenu:_,setShowTypeMenu:g,typeMenuPosition:v,buildDOM:x}=Rk({editorRef:l,value:t,onChange:e,variables:n,onVariablesChange:r,indentTriggers:["{","["]}),[k,S]=J.useState(null),[T,C]=J.useState(""),L=J.useRef(!1),D=J.useRef(null),I=J.useMemo(()=>{if(!t.trim())return{valid:!0,empty:!0};try{let $=t;return $=$.replace(/"\{\{[^{}]+\}\}"/g,'"__var__"'),$=$.replace(/\{\{[^{}]+\}\}/g,"null"),JSON.parse($),{valid:!0,empty:!1}}catch($){return{valid:!1,empty:!1,error:$ instanceof Error?$.message:"Invalid JSON"}}},[t]),[P,V]=J.useState(!1),H=J.useMemo(()=>pf(t,n,{missingDataPlaceholder:"[no data]"}),[t,n]);J.useEffect(()=>(D.current&&(clearTimeout(D.current),D.current=null),I.valid&&!I.empty&&L.current&&(D.current=setTimeout(()=>{try{let $=t;$=$.replace(/"\{\{[^{}]+\}\}"/g,'"__var__"'),$=$.replace(/\{\{[^{}]+\}\}/g,"null"),JSON.parse($);const B=new Map;let G=t,re=0;G=G.replace(/"\{\{[^{}]+\}\}"/g,N=>{const F=`"__VAR_${re++}__"`;return B.set(F,N),F}),G=G.replace(/\{\{[^{}]+\}\}/g,N=>{const F=`"__VAR_${re++}__"`;return B.set(F,N),F});const Y=JSON.parse(G);let O=JSON.stringify(Y,null,2);O=O.replace(/\{\}/g,`{
}`),O=O.replace(/\[\]/g,`[
]`),B.forEach((N,F)=>{O=O.replace(F,N)}),O!==t&&e(O)}catch{}},500)),L.current=!I.valid,()=>{D.current&&clearTimeout(D.current)}),[I.valid,I.empty,t,e]),J.useEffect(()=>{P||x()},[P,x]);const z=J.useCallback(($,B)=>{const G=document.createElement("input");G.type="file",G.onchange=re=>{const Y=re.target.files?.[0];if(!Y)return;const O=new FileReader;O.onload=()=>{const N=O.result.split(",")[1],F=n.find(R=>R.id===B);r(F?n.map(R=>R.id===F.id?{...R,data:N,mimeType:Y.type,name:Y.name}:R):[...n,{id:B,type:$,name:Y.name,data:N,mimeType:Y.type}])},O.readAsDataURL(Y)},G.click()},[n,r]),Q=J.useCallback($=>{const G=$.target.closest(".variable-chip");if(G){const re=G.dataset.variableType,Y=G.dataset.variableId;if(re==="file_base64"||re==="file_dataurl")z(re,Y),$.preventDefault(),$.stopPropagation();else if(re==="base64"){const O=G.getBoundingClientRect(),N=n.find(F=>F.id===Y);C(N?.data||""),S({variableKey:`${re}:${Y}`,rect:O}),$.preventDefault(),$.stopPropagation()}}else S(null)},[n,z]),j=J.useCallback($=>{const B=p($);B&&($==="file_base64"||$==="file_dataurl")&&setTimeout(()=>z($,B),0)},[p,z]),se=J.useCallback(()=>{if(!k)return;const[$,B]=k.variableKey.split(":"),G=n.find(re=>re.id===B);r(G?n.map(re=>re.id===G.id?{...re,data:T}:re):[...n,{id:B,type:$,name:$,data:T}]),S(null),l.current?.focus()},[k,T,n,r]);J.useEffect(()=>{const $=G=>{G.key==="Escape"&&(g(!1),S(null))},B=G=>{u.current&&!u.current.contains(G.target)&&(g(!1),S(null))};return document.addEventListener("keydown",$),document.addEventListener("mousedown",B),()=>{document.removeEventListener("keydown",$),document.removeEventListener("mousedown",B)}},[g]);const Z=J.useMemo(()=>{if(!k||!u.current)return{top:0,left:0};const $=u.current.getBoundingClientRect();return{top:k.rect.bottom-$.top+4,left:Math.max(0,k.rect.left-$.left)}},[k]);return E.jsxs("div",{ref:u,className:"flex flex-col h-full min-h-50 max-h-[60vh] relative overflow-hidden",children:[P?E.jsx("pre",{className:"flex-1 min-h-0 p-3 font-mono text-sm text-zinc-100 overflow-y-auto whitespace-pre-wrap wrap-break-word",children:H}):E.jsxs("div",{className:"flex-1 min-h-0 relative",children:[E.jsx("div",{ref:l,contentEditable:!0,suppressContentEditableWarning:!0,onInput:f,onPaste:h,onKeyDown:m,onClick:Q,className:"h-full p-3 font-mono text-sm text-zinc-100 outline-none overflow-y-auto whitespace-pre-wrap wrap-break-word"}),!t&&s&&E.jsx("div",{className:"absolute top-3 left-3 font-mono text-sm text-zinc-500 pointer-events-none whitespace-pre-wrap",children:s})]}),E.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 text-xs shrink-0",children:[a&&E.jsx("button",{type:"button",onClick:a.onClick,className:"text-[11px] px-2 py-0.5 rounded bg-zinc-700 hover:bg-zinc-600 text-zinc-200 transition-colors",children:a.label}),E.jsx("div",{className:"flex-1"}),E.jsx("button",{onClick:()=>V(!P),className:`transition-colors flex items-center gap-1 ${P?"text-blue-400 hover:text-blue-300":"text-zinc-500 hover:text-zinc-300"}`,title:P?"Show editor":"Show resolved JSON",children:E.jsx(Ek,{className:"w-3.5 h-3.5"})}),I.valid?E.jsx("span",{className:"text-emerald-500",children:"Valid JSON"}):E.jsx("span",{className:"text-red-400",title:I.error,children:"Invalid JSON"})]}),_&&E.jsx("div",{className:"fixed z-50 w-56 bg-zinc-800 border border-zinc-600 rounded-lg shadow-xl py-1",style:{top:v.top,left:v.left},children:ZL.map($=>E.jsxs("button",{onClick:()=>j($.type),className:"w-full flex items-center gap-2 px-3 py-2 text-left hover:bg-zinc-700 transition-colors",children:[E.jsx("span",{className:"text-zinc-400",children:$.icon}),E.jsxs("div",{className:"flex-1 min-w-0",children:[E.jsx("div",{className:"text-sm text-zinc-200",children:$.label}),E.jsx("div",{className:"text-xs text-zinc-500",children:$.description})]})]},$.type))}),k&&(()=>{const[$]=k.variableKey.split(":");return E.jsx("div",{className:"absolute z-50 bg-zinc-800/95 border border-zinc-700/50 rounded shadow-lg p-1.5 w-44",style:Z,children:$==="base64"?E.jsxs("div",{className:"flex gap-1",children:[E.jsx("input",{type:"text",value:T,onChange:B=>C(B.target.value),onKeyDown:B=>B.key==="Enter"&&se(),placeholder:"Text to encode...",className:"flex-1 min-w-0 px-1.5 py-0.5 text-xs bg-transparent text-zinc-200 rounded border-none focus:outline-none placeholder:text-zinc-500",autoFocus:!0}),E.jsx("button",{onClick:se,className:"p-1 text-zinc-400 hover:text-zinc-200 transition-colors",children:E.jsx(vk,{className:"w-3 h-3"})})]}):null})})()]})}const QL=[{type:"file_base64",label:"File (Base64)",description:"Select a file to encode",icon:E.jsx(mf,{className:"w-3.5 h-3.5"})},{type:"file_dataurl",label:"File (Data URL)",description:"File as data:... URL",icon:E.jsx(mf,{className:"w-3.5 h-3.5"})},{type:"base64",label:"Text (Base64)",description:"Text to encode",icon:E.jsx(Ck,{className:"w-3.5 h-3.5"})},{type:"timestamp",label:"Timestamp",description:"Unix timestamp",icon:E.jsx(kk,{className:"w-3.5 h-3.5"})},{type:"uuid",label:"UUID",description:"Random UUID",icon:E.jsx(Ml,{className:"w-3.5 h-3.5"})},{type:"random_string",label:"Random String",description:"16-char random",icon:E.jsx(Tk,{className:"w-3.5 h-3.5"})}];function JL(t){if(!t.trim())return{valid:!0};try{const r=new DOMParser().parseFromString(t,"application/xml").querySelector("parsererror");if(r){const s=r.textContent||"Invalid XML",a=s.match(/error[^:]*:\s*(.+)/i);return{valid:!1,error:a?a[1].trim():s.split(`
`)[0]}}return{valid:!0}}catch(e){return{valid:!1,error:e instanceof Error?e.message:"Invalid XML"}}}function YL(t){try{const n=new DOMParser().parseFromString(t,"application/xml");if(n.querySelector("parsererror"))return t;const s=new XMLSerializer().serializeToString(n);let a="",l=0;const u=s.replace(/></g,`>
<`).split(`
`);for(const f of u){const h=f.trim();h&&(h.startsWith("</")&&(l=Math.max(0,l-1)),a+="  ".repeat(l)+h+`
`,h.startsWith("<")&&!h.startsWith("</")&&!h.startsWith("<?")&&!h.endsWith("/>")&&l++)}return a.trim()}catch{return t}}function XL({value:t,onChange:e,variables:n,onVariablesChange:r,placeholder:s}){const a=J.useRef(null),l=J.useRef(null),{handleInput:u,handlePaste:f,handleKeyDown:h,insertVariable:m,showTypeMenu:p,setShowTypeMenu:_,typeMenuPosition:g,buildDOM:v}=Rk({editorRef:a,value:t,onChange:e,variables:n,onVariablesChange:r,indentTriggers:[">","{","["]}),[x,k]=J.useState(null),[S,T]=J.useState(""),C=J.useRef(!1),L=J.useRef(null),D=J.useMemo(()=>{if(!t.trim())return{valid:!0,empty:!0};let Z=t;return Z=Z.replace(/\{\{[^{}]+\}\}/g,"PLACEHOLDER"),{...JL(Z),empty:!1}},[t]),[I,P]=J.useState(!1),V=J.useMemo(()=>pf(t,n,{missingDataPlaceholder:"[no data]"}),[t,n]);J.useEffect(()=>(L.current&&(clearTimeout(L.current),L.current=null),D.valid&&!D.empty&&C.current&&(L.current=setTimeout(()=>{const Z=new Map;let $=t,B=0;$=$.replace(/\{\{[^{}]+\}\}/g,re=>{const Y=`__VAR_${B++}__`;return Z.set(Y,re),Y});let G=YL($);Z.forEach((re,Y)=>{G=G.replace(Y,re)}),G!==t&&e(G)},500)),C.current=!D.valid,()=>{L.current&&clearTimeout(L.current)}),[D.valid,D.empty,t,e]),J.useEffect(()=>{I||v()},[I,v]);const H=J.useCallback((Z,$)=>{const B=document.createElement("input");B.type="file",B.onchange=G=>{const re=G.target.files?.[0];if(!re)return;const Y=new FileReader;Y.onload=()=>{const O=Y.result.split(",")[1],N=n.find(F=>F.id===$);r(N?n.map(F=>F.id===N.id?{...F,data:O,mimeType:re.type,name:re.name}:F):[...n,{id:$,type:Z,name:re.name,data:O,mimeType:re.type}])},Y.readAsDataURL(re)},B.click()},[n,r]),z=J.useCallback(Z=>{const B=Z.target.closest(".variable-chip");if(B){const G=B.dataset.variableType,re=B.dataset.variableId;if(G==="file_base64"||G==="file_dataurl")H(G,re),Z.preventDefault(),Z.stopPropagation();else if(G==="base64"){const Y=B.getBoundingClientRect(),O=n.find(N=>N.id===re);T(O?.data||""),k({variableKey:`${G}:${re}`,rect:Y}),Z.preventDefault(),Z.stopPropagation()}}else k(null)},[n,H]),Q=J.useCallback(Z=>{const $=m(Z);$&&(Z==="file_base64"||Z==="file_dataurl")&&setTimeout(()=>H(Z,$),0)},[m,H]),j=J.useCallback(()=>{if(!x)return;const[Z,$]=x.variableKey.split(":"),B=n.find(G=>G.id===$);r(B?n.map(G=>G.id===B.id?{...G,data:S}:G):[...n,{id:$,type:Z,name:Z,data:S}]),k(null),a.current?.focus()},[x,S,n,r]);J.useEffect(()=>{const Z=B=>{B.key==="Escape"&&(_(!1),k(null))},$=B=>{l.current&&!l.current.contains(B.target)&&(_(!1),k(null))};return document.addEventListener("keydown",Z),document.addEventListener("mousedown",$),()=>{document.removeEventListener("keydown",Z),document.removeEventListener("mousedown",$)}},[_]);const se=J.useMemo(()=>{if(!x||!l.current)return{top:0,left:0};const Z=l.current.getBoundingClientRect();return{top:x.rect.bottom-Z.top+4,left:Math.max(0,x.rect.left-Z.left)}},[x]);return E.jsxs("div",{ref:l,className:"flex flex-col h-full min-h-50 max-h-[60vh] relative overflow-hidden",children:[I?E.jsx("pre",{className:"flex-1 min-h-0 p-3 font-mono text-sm text-zinc-100 overflow-y-auto whitespace-pre-wrap wrap-break-word",children:V}):E.jsxs("div",{className:"flex-1 min-h-0 relative",children:[E.jsx("div",{ref:a,contentEditable:!0,suppressContentEditableWarning:!0,onInput:u,onPaste:f,onKeyDown:h,onClick:z,className:"h-full p-3 font-mono text-sm text-zinc-100 outline-none overflow-y-auto whitespace-pre-wrap wrap-break-word"}),!t&&s&&E.jsx("div",{className:"absolute top-3 left-3 font-mono text-sm text-zinc-500 pointer-events-none whitespace-pre-wrap",children:s})]}),E.jsxs("div",{className:"flex items-center justify-end gap-2 px-3 py-1.5 text-xs shrink-0",children:[E.jsx("button",{onClick:()=>P(!I),className:`transition-colors flex items-center gap-1 ${I?"text-blue-400 hover:text-blue-300":"text-zinc-500 hover:text-zinc-300"}`,title:I?"Show editor":"Show resolved XML",children:E.jsx(Ek,{className:"w-3.5 h-3.5"})}),D.valid?E.jsx("span",{className:"text-emerald-500",children:"Valid XML"}):E.jsx("span",{className:"text-red-400",title:D.error,children:"Invalid XML"})]}),p&&E.jsx("div",{className:"fixed z-50 w-56 bg-zinc-800 border border-zinc-600 rounded-lg shadow-xl py-1",style:{top:g.top,left:g.left},children:QL.map(Z=>E.jsxs("button",{onClick:()=>Q(Z.type),className:"w-full flex items-center gap-2 px-3 py-2 text-left hover:bg-zinc-700 transition-colors",children:[E.jsx("span",{className:"text-zinc-400",children:Z.icon}),E.jsxs("div",{className:"flex-1 min-w-0",children:[E.jsx("div",{className:"text-sm text-zinc-200",children:Z.label}),E.jsx("div",{className:"text-xs text-zinc-500",children:Z.description})]})]},Z.type))}),x&&(()=>{const[Z]=x.variableKey.split(":");return E.jsx("div",{className:"absolute z-50 bg-zinc-800/95 border border-zinc-700/50 rounded shadow-lg p-1.5 w-44",style:se,children:Z==="base64"?E.jsxs("div",{className:"flex gap-1",children:[E.jsx("input",{type:"text",value:S,onChange:$=>T($.target.value),onKeyDown:$=>$.key==="Enter"&&j(),placeholder:"Text to encode...",className:"flex-1 min-w-0 px-1.5 py-0.5 text-xs bg-transparent text-zinc-200 rounded border-none focus:outline-none placeholder:text-zinc-500",autoFocus:!0}),E.jsx("button",{onClick:j,className:"p-1 text-zinc-400 hover:text-zinc-200 transition-colors",children:E.jsx(vk,{className:"w-3 h-3"})})]}):null})})()]})}const WL=[{value:"none",label:"None"},{value:"json",label:"JSON"},{value:"xml",label:"XML"},{value:"form-urlencoded",label:"Form"},{value:"form-data",label:"Form Data"},{value:"binary",label:"Binary"},{value:"raw",label:"Raw"}];function Ok(){return Math.random().toString(36).substring(2,9)}function e3(){return{id:Ok(),enabled:!0,key:"",type:"text",value:"",file:null,fileName:""}}const t3=["Accept","Accept-Charset","Accept-Encoding","Accept-Language","Authorization","Cache-Control","Connection","Content-Disposition","Content-Encoding","Content-Length","Content-Type","Cookie","Date","ETag","Expect","Forwarded","From","Host","If-Match","If-Modified-Since","If-None-Match","If-Range","If-Unmodified-Since","Max-Forwards","Origin","Pragma","Proxy-Authorization","Range","Referer","TE","Trailer","Transfer-Encoding","Upgrade","User-Agent","Via","Warning","X-Api-Key","X-Correlation-ID","X-Forwarded-For","X-Forwarded-Host","X-Forwarded-Proto","X-Request-ID","X-Requested-With"];function n3(){const t=it.c(54),[e,n]=J.useState("body"),{request:r,setHeaders:s,setQuery:a,setBody:l,setVariables:u}=$n();let f;t[0]!==r?.headers?(f=r?.headers??[],t[0]=r?.headers,t[1]=f):f=t[1];const h=f;let m;t[2]!==r?.query?(m=r?.query??[],t[2]=r?.query,t[3]=m):m=t[3];const p=m;let _;t[4]!==r?.body?(_=r?.body??{type:"none"},t[4]=r?.body,t[5]=_):_=t[5];const g=_;let v;t[6]!==r?.variables?(v=r?.variables??[],t[6]=r?.variables,t[7]=v):v=t[7];const x=v;let k;t[8]!==g||t[9]!==l?(k=G=>{e:switch(G){case"none":{l({type:"none"});break e}case"json":{l({type:"json",content:g.type==="json"?g.content:""});break e}case"xml":{l({type:"xml",content:g.type==="xml"?g.content:""});break e}case"raw":{l({type:"raw",content:g.type==="raw"?g.content:""});break e}case"form-urlencoded":{l({type:"form-urlencoded",data:g.type==="form-urlencoded"?g.data:[{id:Ok(),enabled:!0,key:"",value:""}]});break e}case"form-data":{l({type:"form-data",data:g.type==="form-data"?g.data:[e3()]});break e}case"binary":l({type:"binary",file:g.type==="binary"?g.file:null,fileName:g.type==="binary"?g.fileName:""})}},t[8]=g,t[9]=l,t[10]=k):k=t[10];const S=k;let T;t[11]!==p?(T=p.filter(i3),t[11]=p,t[12]=T):T=t[12];let C;t[13]!==T.length?(C={id:"params",label:"Params",count:T.length},t[13]=T.length,t[14]=C):C=t[14];let L;t[15]!==h?(L=h.filter(s3),t[15]=h,t[16]=L):L=t[16];let D;t[17]!==L.length?(D={id:"headers",label:"Headers",count:L.length},t[17]=L.length,t[18]=D):D=t[18];let I;t[19]===Symbol.for("react.memo_cache_sentinel")?(I={id:"body",label:"Body"},t[19]=I):I=t[19];let P;t[20]!==C||t[21]!==D?(P=[C,D,I],t[20]=C,t[21]=D,t[22]=P):P=t[22];const V=P;let H;t[23]!==e||t[24]!==V?(H=E.jsx("div",{role:"tablist",className:"inline-flex gap-1",children:V.map(G=>E.jsxs("button",{role:"tab",onClick:()=>n(G.id),className:`px-2 py-1 text-[11px] font-medium rounded-md transition-all ${e===G.id?"bg-white dark:bg-white/10 text-neutral-800 dark:text-neutral-100 shadow-sm":"text-neutral-500 dark:text-neutral-400 hover:text-neutral-700 dark:hover:text-neutral-200 hover:bg-neutral-100 dark:hover:bg-white/5"}`,children:[G.label,G.count!==void 0&&G.count>0&&E.jsx("span",{className:"ml-1.5 px-1.5 py-0.5 text-[9px] bg-neutral-200 dark:bg-white/10 text-neutral-600 dark:text-neutral-300 rounded-full",children:G.count})]},G.id))}),t[23]=e,t[24]=V,t[25]=H):H=t[25];let z;t[26]!==e||t[27]!==g||t[28]!==S?(z=e==="body"&&E.jsx("select",{value:g.type,onChange:G=>S(G.target.value),className:"h-6 px-2 text-[11px] font-medium bg-white dark:bg-white/10 text-neutral-800 dark:text-neutral-100 rounded-md shadow-sm border-0 focus:outline-none focus:ring-2 focus:ring-neutral-300 dark:focus:ring-white/20 cursor-pointer transition-all min-w-30",children:WL.map(r3)}),t[26]=e,t[27]=g,t[28]=S,t[29]=z):z=t[29];let Q;t[30]!==H||t[31]!==z?(Q=E.jsxs("div",{className:"flex items-center gap-2",children:[H,z]}),t[30]=H,t[31]=z,t[32]=Q):Q=t[32];let j;t[33]!==e||t[34]!==p||t[35]!==a?(j=e==="params"&&E.jsx(Fu,{items:p,onChange:a,keyPlaceholder:"Parameter",valuePlaceholder:"Value"}),t[33]=e,t[34]=p,t[35]=a,t[36]=j):j=t[36];let se;t[37]!==e||t[38]!==h||t[39]!==s?(se=e==="headers"&&E.jsx(Fu,{items:h,onChange:s,keyPlaceholder:"Header",valuePlaceholder:"Value",keySuggestions:t3}),t[37]=e,t[38]=h,t[39]=s,t[40]=se):se=t[40];let Z;t[41]!==e||t[42]!==g||t[43]!==l||t[44]!==u||t[45]!==x?(Z=e==="body"&&E.jsxs("div",{className:"space-y-3",children:[g.type==="json"&&E.jsx(_y,{value:g.content,onChange:G=>l({...g,content:G}),variables:x,onVariablesChange:u,placeholder:`{
  "key": "value"
}`}),g.type==="xml"&&E.jsx(XL,{value:g.content,onChange:G=>l({...g,content:G}),variables:x,onVariablesChange:u,placeholder:"<xml></xml>"}),g.type==="raw"&&E.jsx(UL,{value:g.content,onChange:G=>l({...g,content:G}),language:"text",placeholder:"Plain text payload"}),g.type==="form-urlencoded"&&E.jsx(Fu,{items:g.data,onChange:G=>l({...g,data:G}),keyPlaceholder:"Key",valuePlaceholder:"Value"}),g.type==="form-data"&&E.jsx(LL,{items:g.data,onChange:G=>l({...g,data:G})}),g.type==="binary"&&E.jsx(jL,{file:g.file,fileName:g.fileName,onFileChange:(G,re)=>l({...g,file:G,fileName:re})}),g.type==="none"&&E.jsx("div",{className:"py-8 text-center text-sm text-neutral-400 dark:text-neutral-500",children:"No request body"})]}),t[41]=e,t[42]=g,t[43]=l,t[44]=u,t[45]=x,t[46]=Z):Z=t[46];let $;t[47]!==j||t[48]!==se||t[49]!==Z?($=E.jsxs("div",{children:[j,se,Z]}),t[47]=j,t[48]=se,t[49]=Z,t[50]=$):$=t[50];let B;return t[51]!==Q||t[52]!==$?(B=E.jsxs("div",{className:"space-y-3",children:[Q,$]}),t[51]=Q,t[52]=$,t[53]=B):B=t[53],B}function r3(t){return E.jsx("option",{value:t.value,className:"bg-white dark:bg-[#1a1a1a]",children:t.label},t.value)}function s3(t){return t.key}function i3(t){return t.key}let Wp=null;async function em(t){if(Wp?.host===t)return Wp.data;const e=await fetch(`/proxy/grpc/${t}`);if(!e.ok)throw new Error("Failed to fetch services");const n=await e.json();return Wp={host:t,data:n},n}function Ow({value:t,onChange:e,placeholder:n,label:r,fetchOptions:s,disabled:a,icon:l}){const[u,f]=J.useState(!1),[h,m]=J.useState([]),[p,_]=J.useState(null),[g,v]=J.useState(!1),x=J.useRef(null);J.useEffect(()=>{const S=T=>{x.current&&!x.current.contains(T.target)&&f(!1)};return document.addEventListener("mousedown",S),()=>document.removeEventListener("mousedown",S)},[]);const k=async()=>{if(!a){f(!0),v(!0),_(null);try{const S=await s();m(S)}catch(S){_(S instanceof Error?S.message:"Failed to fetch"),m([])}finally{v(!1)}}};return E.jsxs("div",{ref:x,className:"relative shrink-0",children:[E.jsxs("button",{type:"button",onClick:k,disabled:a,className:"h-8 px-2 flex items-center gap-2 text-sm transition hover:bg-neutral-50 dark:hover:bg-white/5 disabled:opacity-50 disabled:cursor-not-allowed rounded",children:[l,E.jsx("span",{className:`text-sm whitespace-nowrap ${t?"text-neutral-800 dark:text-neutral-100":"text-neutral-400 dark:text-neutral-500"}`,children:t||n}),g?E.jsx(gf,{className:"w-3.5 h-3.5 animate-spin text-neutral-400 shrink-0"}):E.jsx(Kl,{className:`w-3.5 h-3.5 text-neutral-400 shrink-0 transition-transform ${u?"rotate-180":""}`})]}),u&&E.jsx("div",{className:"absolute top-full left-0 mt-1 w-full min-w-48 max-w-md bg-white dark:bg-[#0f0f0f] border border-neutral-200 dark:border-white/10 rounded-lg shadow-xl z-50 overflow-hidden",children:E.jsxs("div",{className:"max-h-64 overflow-y-auto p-1",children:[g&&E.jsxs("div",{className:"px-3 py-4 text-center text-sm text-neutral-500",children:[E.jsx(gf,{className:"w-4 h-4 animate-spin mx-auto mb-1"}),"Loading..."]}),p&&E.jsx("div",{className:"px-3 py-3 text-sm text-red-500",children:p}),!g&&!p&&h.length===0&&E.jsxs("div",{className:"px-3 py-4 text-center text-sm text-neutral-500",children:["No ",r.toLowerCase()," available"]}),!g&&!p&&h.map(S=>E.jsx("button",{type:"button",onClick:()=>{e(S),f(!1)},className:`w-full px-3 py-2 text-left text-sm rounded-md transition-colors ${S===t?"bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-400":"text-neutral-700 dark:text-neutral-300 hover:bg-neutral-50 dark:hover:bg-white/5"}`,children:S},S))]})})]})}function a3(){const{request:t,setUrl:e,setGrpcMethodSchema:n}=$n(),r=t?.url??"",s=x=>{const k=x.match(/^grpc:\/\/([^/]*)(?:\/([^/]*)(?:\/([^/]*))?)?$/);return k?{host:k[1]||"",service:k[2]||"",method:k[3]||""}:{host:"",service:"",method:""}},a=(x,k,S)=>x?k?S?`grpc://${x}/${k}/${S}`:`grpc://${x}/${k}`:`grpc://${x}`:"grpc://",{host:l,service:u,method:f}=s(r),h=x=>{e(a(x,"","")),n(void 0)},m=x=>{e(a(l,x,"")),n(void 0)},p=async x=>{e(a(l,u,x));try{const T=(await em(l)).services.find(C=>C.name===u)?.methods.find(C=>C.name===x);T?.schema?n(T.schema):n(void 0)}catch{n(void 0)}},_=async()=>l?(await em(l)).services.map(k=>k.name):[],g=async()=>!l||!u?[]:(await em(l)).services.find(S=>S.name===u)?.methods.map(S=>S.name)??[],v=Math.max(8,l.length||9);return E.jsxs("div",{className:"flex items-center flex-1 min-w-0",children:[E.jsx("input",{type:"text",value:l,onChange:x=>h(x.target.value),placeholder:"host:port",size:v,className:"min-w-20 max-w-full px-2 py-1.5 text-sm bg-transparent text-neutral-800 dark:text-neutral-100 placeholder-neutral-400 dark:placeholder-neutral-600 focus:outline-none"}),E.jsx("span",{className:"text-neutral-300 dark:text-neutral-600 shrink-0",children:"/"}),E.jsx(Ow,{value:u,onChange:m,placeholder:"Select service",label:"Service",fetchOptions:_,disabled:!l,icon:E.jsx(T4,{className:`w-4 h-4 shrink-0 ${u?"text-purple-500":"text-neutral-400"}`})}),E.jsx("span",{className:"text-neutral-300 dark:text-neutral-600",children:"/"}),E.jsx(Ow,{value:f,onChange:p,placeholder:"Select method",label:"Method",fetchOptions:g,disabled:!l||!u,icon:E.jsx(mL,{className:`w-4 h-4 shrink-0 ${f?"text-amber-500":"text-neutral-400"}`})})]})}const o3=["grpc-timeout","authorization","x-request-id","x-correlation-id"];function og(t){if(!t||typeof t!="object")return{};const e=t,r=(Array.isArray(e.type)?e.type[0]:e.type)||(e.properties?"object":e.items?"array":void 0);if(r==="object"){const a={},l=e.properties||{};return Object.keys(l).forEach(u=>{a[u]=og(l[u])}),a}if(r==="array"){const a=e.items||{type:"string"};return[og(a)]}const s=e.enum;if(s&&s.length>0)return s[0];switch(r){case"integer":case"number":return 0;case"boolean":return!0;case"string":return e.format==="byte"?"":"string";default:return{}}}function l3(){const[t,e]=J.useState("body"),{request:n,setHeaders:r,setBody:s,setVariables:a}=$n(),l=n?.headers??[],u=n?.body??{type:"json",content:""},f=n?.variables??[],h=n?.grpcMethodSchema,m=J.useMemo(()=>{try{return h?og(h):void 0}catch{return}},[h]);J.useEffect(()=>{u.type!=="json"&&s({type:"json",content:""})},[u.type,s]);const p=[{id:"body",label:"Message"},{id:"headers",label:"Metadata",count:l.filter(_=>_.key).length}];return E.jsxs("div",{className:"space-y-3",children:[E.jsx("div",{className:"flex items-center gap-2",children:E.jsx("div",{role:"tablist",className:"inline-flex gap-1",children:p.map(_=>E.jsxs("button",{role:"tab",onClick:()=>e(_.id),className:`px-2 py-1 text-[11px] font-medium rounded-md transition-all ${t===_.id?"bg-white dark:bg-white/10 text-neutral-800 dark:text-neutral-100 shadow-sm":"text-neutral-500 dark:text-neutral-400 hover:text-neutral-700 dark:hover:text-neutral-200 hover:bg-neutral-100 dark:hover:bg-white/5"}`,children:[_.label,_.count!==void 0&&_.count>0&&E.jsx("span",{className:"ml-1.5 px-1.5 py-0.5 text-[9px] bg-neutral-200 dark:bg-white/10 text-neutral-600 dark:text-neutral-300 rounded-full",children:_.count})]},_.id))})}),E.jsxs("div",{children:[t==="body"&&u.type==="json"&&E.jsx(_y,{value:u.content,onChange:_=>s({type:"json",content:_}),variables:f,onVariablesChange:a,placeholder:m?JSON.stringify(m,null,2):`{
  "field": "value"
}`,action:m!==void 0?{label:"Insert schema",onClick:()=>s({type:"json",content:JSON.stringify(m,null,2)})}:void 0}),t==="headers"&&E.jsxs("div",{className:"space-y-2",children:[E.jsx("p",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:"gRPC metadata (sent as headers)"}),E.jsx(Fu,{items:l,onChange:r,keyPlaceholder:"Key",valuePlaceholder:"Value",keySuggestions:o3})]})]})]})}function Iw(t){const e=it.c(27),{feature:n,type:r,isSelected:s,onSelect:a}=t,[l,u]=J.useState(!1);let f;e[0]!==n.schema?(f=n.schema&&Object.keys(n.schema).length>0,e[0]=n.schema,e[1]=f):f=e[1];const h=f,m=`border rounded-md ${s?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-neutral-200 dark:border-white/10"}`;let p;e[2]!==r?(p=r==="tool"?E.jsx(yf,{className:"w-4 h-4 text-amber-500 shrink-0"}):E.jsx(Yf,{className:"w-4 h-4 text-blue-500 shrink-0"}),e[2]=r,e[3]=p):p=e[3];let _;e[4]!==n.name?(_=E.jsx("div",{className:"font-medium text-sm truncate",children:n.name}),e[4]=n.name,e[5]=_):_=e[5];let g;e[6]!==n.description?(g=n.description&&E.jsx("div",{className:"text-xs text-neutral-500 dark:text-neutral-400 truncate",children:n.description}),e[6]=n.description,e[7]=g):g=e[7];let v;e[8]!==_||e[9]!==g?(v=E.jsxs("div",{className:"flex-1 min-w-0",children:[_,g]}),e[8]=_,e[9]=g,e[10]=v):v=e[10];let x;e[11]!==l||e[12]!==h?(x=h&&E.jsx("button",{onClick:C=>{C.stopPropagation(),u(!l)},className:"p-1 hover:bg-neutral-200 dark:hover:bg-white/10 rounded",children:l?E.jsx(Kl,{className:"w-4 h-4"}):E.jsx(xk,{className:"w-4 h-4"})}),e[11]=l,e[12]=h,e[13]=x):x=e[13];let k;e[14]!==a||e[15]!==p||e[16]!==v||e[17]!==x?(k=E.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 cursor-pointer hover:bg-neutral-50 dark:hover:bg-white/5",onClick:a,children:[p,v,x]}),e[14]=a,e[15]=p,e[16]=v,e[17]=x,e[18]=k):k=e[18];let S;e[19]!==l||e[20]!==n.schema||e[21]!==h?(S=l&&h&&E.jsx("div",{className:"px-3 pb-2 border-t border-neutral-200 dark:border-white/10",children:E.jsx("pre",{className:"text-xs bg-neutral-100 dark:bg-black/20 p-2 rounded mt-2 overflow-auto max-h-48",children:JSON.stringify(n.schema,null,2)})}),e[19]=l,e[20]=n.schema,e[21]=h,e[22]=S):S=e[22];let T;return e[23]!==m||e[24]!==k||e[25]!==S?(T=E.jsxs("div",{className:m,children:[k,S]}),e[23]=m,e[24]=k,e[25]=S,e[26]=T):T=e[26],T}function c3(t){const e=it.c(61),{onSelected:n}=t,{request:r,discoverMcpFeatures:s,setMcpSelectedTool:a,setMcpSelectedResource:l}=$n(),[u,f]=J.useState("tools"),h=r.mcpFeatures;let m;e[0]!==h?.tools?(m=h?.tools||[],e[0]=h?.tools,e[1]=m):m=e[1];const p=m;let _;e[2]!==h?.resources?(_=h?.resources||[],e[2]=h?.resources,e[3]=_):_=e[3];const g=_,v=h?.error;let x;e[4]!==s?(x=()=>{s()},e[4]=s,e[5]=x):x=e[5];const k=x;if(!h){let re;e[6]===Symbol.for("react.memo_cache_sentinel")?(re=E.jsx("p",{className:"text-sm text-neutral-500 dark:text-neutral-400 mb-4",children:"Enter an MCP server URL and discover its features"}),e[6]=re):re=e[6];const Y=!r.url||r.executing;let O;e[7]===Symbol.for("react.memo_cache_sentinel")?(O=E.jsx(X4,{className:"w-4 h-4"}),e[7]=O):O=e[7];let N;return e[8]!==k||e[9]!==Y?(N=E.jsxs("div",{className:"p-4 text-center",children:[re,E.jsxs("button",{onClick:k,disabled:Y,className:"inline-flex items-center gap-2 px-3 py-1.5 text-sm rounded-md border border-neutral-200 dark:border-white/10 text-neutral-700 dark:text-neutral-100 hover:bg-neutral-50 dark:hover:bg-white/10 disabled:opacity-50 disabled:cursor-not-allowed",children:[O,"Discover"]})]}),e[8]=k,e[9]=Y,e[10]=N):N=e[10],N}if(v){let re;e[11]!==v?(re=E.jsx("p",{className:"text-sm text-red-500 dark:text-red-400 mb-4",children:v}),e[11]=v,e[12]=re):re=e[12];const Y=!r.url||r.executing;let O;e[13]===Symbol.for("react.memo_cache_sentinel")?(O=E.jsx(Ew,{className:"w-4 h-4"}),e[13]=O):O=e[13];let N;e[14]!==k||e[15]!==Y?(N=E.jsxs("button",{onClick:k,disabled:Y,className:"inline-flex items-center gap-2 px-3 py-1.5 text-sm rounded-md border border-neutral-200 dark:border-white/10 text-neutral-700 dark:text-neutral-100 hover:bg-neutral-50 dark:hover:bg-white/10 disabled:opacity-50 disabled:cursor-not-allowed",children:[O,"Retry"]}),e[14]=k,e[15]=Y,e[16]=N):N=e[16];let F;return e[17]!==re||e[18]!==N?(F=E.jsxs("div",{className:"p-4 text-center",children:[re,N]}),e[17]=re,e[18]=N,e[19]=F):F=e[19],F}let S;e[20]===Symbol.for("react.memo_cache_sentinel")?(S=()=>f("tools"),e[20]=S):S=e[20];const T=`flex items-center gap-1.5 px-4 py-2 text-sm font-medium border-b-2 transition-colors ${u==="tools"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-neutral-500 hover:text-neutral-700 dark:text-neutral-400 dark:hover:text-neutral-200"}`;let C;e[21]===Symbol.for("react.memo_cache_sentinel")?(C=E.jsx(yf,{className:"w-4 h-4"}),e[21]=C):C=e[21];let L;e[22]!==T||e[23]!==p.length?(L=E.jsxs("button",{onClick:S,className:T,children:[C,"Tools (",p.length,")"]}),e[22]=T,e[23]=p.length,e[24]=L):L=e[24];let D;e[25]===Symbol.for("react.memo_cache_sentinel")?(D=()=>f("resources"),e[25]=D):D=e[25];const I=`flex items-center gap-1.5 px-4 py-2 text-sm font-medium border-b-2 transition-colors ${u==="resources"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-neutral-500 hover:text-neutral-700 dark:text-neutral-400 dark:hover:text-neutral-200"}`;let P;e[26]===Symbol.for("react.memo_cache_sentinel")?(P=E.jsx(Yf,{className:"w-4 h-4"}),e[26]=P):P=e[26];let V;e[27]!==g.length||e[28]!==I?(V=E.jsxs("button",{onClick:D,className:I,children:[P,"Resources (",g.length,")"]}),e[27]=g.length,e[28]=I,e[29]=V):V=e[29];let H;e[30]===Symbol.for("react.memo_cache_sentinel")?(H=E.jsx("div",{className:"flex-1"}),e[30]=H):H=e[30];let z;e[31]===Symbol.for("react.memo_cache_sentinel")?(z=E.jsx(Ew,{className:"w-4 h-4"}),e[31]=z):z=e[31];let Q;e[32]!==k||e[33]!==r.executing?(Q=E.jsx("button",{onClick:k,disabled:r.executing,className:"p-2 text-neutral-500 hover:text-neutral-700 dark:text-neutral-400 dark:hover:text-neutral-200 disabled:opacity-40",title:"Refresh features",children:z}),e[32]=k,e[33]=r.executing,e[34]=Q):Q=e[34];let j;e[35]!==V||e[36]!==Q||e[37]!==L?(j=E.jsxs("div",{className:"flex border-b border-neutral-200 dark:border-white/10 shrink-0",children:[L,V,H,Q]}),e[35]=V,e[36]=Q,e[37]=L,e[38]=j):j=e[38];let se;e[39]!==u||e[40]!==n||e[41]!==r.mcpSelectedTool||e[42]!==a||e[43]!==p?(se=u==="tools"&&E.jsx(E.Fragment,{children:p.length===0?E.jsx("p",{className:"text-sm text-neutral-500 dark:text-neutral-400 text-center py-4",children:"No tools available"}):p.map(re=>E.jsx(Iw,{feature:re,type:"tool",isSelected:r.mcpSelectedTool===re.name,onSelect:()=>{a(re.name),n?.()}},re.name))}),e[39]=u,e[40]=n,e[41]=r.mcpSelectedTool,e[42]=a,e[43]=p,e[44]=se):se=e[44];let Z;e[45]!==u||e[46]!==n||e[47]!==r.mcpSelectedResource||e[48]!==g||e[49]!==l?(Z=u==="resources"&&E.jsx(E.Fragment,{children:g.length===0?E.jsx("p",{className:"text-sm text-neutral-500 dark:text-neutral-400 text-center py-4",children:"No resources available"}):g.map(re=>E.jsx(Iw,{feature:re,type:"resource",isSelected:r.mcpSelectedResource===re.name,onSelect:()=>{l(re.name),n?.()}},re.name))}),e[45]=u,e[46]=n,e[47]=r.mcpSelectedResource,e[48]=g,e[49]=l,e[50]=Z):Z=e[50];let $;e[51]!==se||e[52]!==Z?($=E.jsxs("div",{className:"flex-1 overflow-auto p-2 space-y-2",children:[se,Z]}),e[51]=se,e[52]=Z,e[53]=$):$=e[53];let B;e[54]!==r.mcpSelectedResource||e[55]!==r.mcpSelectedTool?(B=(r.mcpSelectedTool||r.mcpSelectedResource)&&E.jsx("div",{className:"border-t border-neutral-200 dark:border-white/10 p-2 shrink-0",children:E.jsxs("div",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:["Selected: ",r.mcpSelectedTool?`Tool: ${r.mcpSelectedTool}`:`Resource: ${r.mcpSelectedResource}`]})}),e[54]=r.mcpSelectedResource,e[55]=r.mcpSelectedTool,e[56]=B):B=e[56];let G;return e[57]!==j||e[58]!==$||e[59]!==B?(G=E.jsxs("div",{className:"flex flex-col h-full",children:[j,$,B]}),e[57]=j,e[58]=$,e[59]=B,e[60]=G):G=e[60],G}function u3(){const t=it.c(35),{request:e,setUrl:n,discoverMcpFeatures:r}=$n(),s=e?.url??"",a=e?.mcpSelectedTool,l=e?.mcpSelectedResource,[u,f]=J.useState(!1),h=J.useRef(null);let m,p;t[0]!==u?(m=()=>{if(!u)return;const se=Z=>{h.current&&!h.current.contains(Z.target)&&f(!1)};return document.addEventListener("mousedown",se),()=>document.removeEventListener("mousedown",se)},p=[u],t[0]=u,t[1]=m,t[2]=p):(m=t[1],p=t[2]),J.useEffect(m,p);let _;t[3]!==r||t[4]!==s?(_=()=>{s&&r(),f(!0)},t[3]=r,t[4]=s,t[5]=_):_=t[5];const g=_,v=a||l||"Select feature",x=Math.max(12,s.length||14);let k;t[6]!==n?(k=se=>n(se.target.value),t[6]=n,t[7]=k):k=t[7];let S;t[8]!==k||t[9]!==s||t[10]!==x?(S=E.jsx("input",{type:"text",value:s,onChange:k,placeholder:"MCP server URL",size:x,className:"min-w-24 max-w-full px-2 py-1.5 bg-transparent text-neutral-800 dark:text-neutral-100 text-sm placeholder-neutral-400 dark:placeholder-neutral-600 focus:outline-none"}),t[8]=k,t[9]=s,t[10]=x,t[11]=S):S=t[11];let T;t[12]===Symbol.for("react.memo_cache_sentinel")?(T=E.jsx("span",{className:"text-neutral-300 dark:text-neutral-600 shrink-0",children:"/"}),t[12]=T):T=t[12];const C=!s;let L;t[13]!==l||t[14]!==a?(L=a?E.jsx(yf,{className:"w-4 h-4 text-amber-500 shrink-0"}):l?E.jsx(Yf,{className:"w-4 h-4 text-blue-500 shrink-0"}):E.jsx(yf,{className:"w-4 h-4 text-neutral-400 shrink-0"}),t[13]=l,t[14]=a,t[15]=L):L=t[15];const D=`text-sm whitespace-nowrap ${a||l?"text-neutral-800 dark:text-neutral-100":"text-neutral-400 dark:text-neutral-500"}`;let I;t[16]!==v||t[17]!==D?(I=E.jsx("span",{className:D,children:v}),t[16]=v,t[17]=D,t[18]=I):I=t[18];const P=`w-3.5 h-3.5 text-neutral-400 shrink-0 transition-transform ${u?"rotate-180":""}`;let V;t[19]!==P?(V=E.jsx(Kl,{className:P}),t[19]=P,t[20]=V):V=t[20];let H;t[21]!==g||t[22]!==V||t[23]!==C||t[24]!==L||t[25]!==I?(H=E.jsxs("button",{type:"button",onClick:g,disabled:C,className:"h-8 px-2 flex items-center gap-2 text-sm transition hover:bg-neutral-50 dark:hover:bg-white/5 disabled:opacity-50 disabled:cursor-not-allowed rounded",children:[L,I,V]}),t[21]=g,t[22]=V,t[23]=C,t[24]=L,t[25]=I,t[26]=H):H=t[26];let z;t[27]!==u?(z=u&&E.jsx("div",{className:"absolute left-0 z-50 mt-2 w-[min(640px,calc(100vw-4rem))] max-h-[70vh] bg-white dark:bg-[#0f0f0f] border border-neutral-200 dark:border-white/10 rounded-lg shadow-xl overflow-hidden",children:E.jsx("div",{className:"h-105",children:E.jsx(c3,{onSelected:()=>f(!1)})})}),t[27]=u,t[28]=z):z=t[28];let Q;t[29]!==H||t[30]!==z?(Q=E.jsxs("div",{className:"relative shrink-0",ref:h,children:[H,z]}),t[29]=H,t[30]=z,t[31]=Q):Q=t[31];let j;return t[32]!==Q||t[33]!==S?(j=E.jsxs("div",{className:"flex items-center flex-1 min-w-0",children:[S,T,Q]}),t[32]=Q,t[33]=S,t[34]=j):j=t[34],j}function lg(t){if(!t||typeof t!="object")return{};const e=t,r=(Array.isArray(e.type)?e.type[0]:e.type)||(e.properties?"object":e.items?"array":void 0);if(r==="object"){const a={},l=e.properties||{};return Object.keys(l).forEach(u=>{a[u]=lg(l[u])}),a}if(r==="array"){const a=e.items||{type:"string"};return[lg(a)]}const s=e.enum;if(s&&s.length>0)return s[0];switch(r){case"integer":case"number":return 0;case"boolean":return!0;case"string":{const a=e.format;return a==="date-time"?new Date().toISOString():a==="date"?new Date().toISOString().slice(0,10):a==="email"?"user@example.com":a==="uuid"?"00000000-0000-4000-8000-000000000000":"string"}default:return{}}}function f3(){const{request:t,setBody:e,setVariables:n}=$n(),r=t?.body??{type:"json",content:""},s=t?.variables??[],a=t?.mcpFeatures,l=t?.mcpSelectedTool,u=t?.mcpSelectedResource;J.useEffect(()=>{r.type!=="json"&&e({type:"json",content:""})},[r.type,e]);const f=J.useMemo(()=>{if(l)return a?.tools.find(m=>m.name===l)?.schema},[a?.tools,l]),h=J.useMemo(()=>{try{return f?lg(f):void 0}catch{return}},[f]);return E.jsx("div",{className:"border border-neutral-200 dark:border-white/10 rounded-md bg-white/60 dark:bg-white/5 h-80",children:E.jsx("div",{className:"h-full p-3",children:l&&r.type==="json"?E.jsx("div",{className:"h-full",children:E.jsx(_y,{value:r.content,onChange:m=>e({type:"json",content:m}),variables:s,onVariablesChange:n,placeholder:h?JSON.stringify(h,null,2):`{
  "key": "value"
}`,action:h!==void 0?{label:"Insert schema",onClick:()=>e({type:"json",content:JSON.stringify(h,null,2)})}:void 0})}):u?E.jsx("div",{className:"h-full flex items-center justify-center text-sm text-neutral-500 dark:text-neutral-300 text-center px-4",children:"Resources are read-only; no arguments required."}):E.jsx("div",{className:"h-full flex items-center justify-center text-sm text-neutral-500 dark:text-neutral-400 text-center px-4",children:"Select a tool or resource from the URL bar."})})})}const h3="modulepreload",d3=function(t){return"/"+t},Nw={},M=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){let h=function(m){return Promise.all(m.map(p=>Promise.resolve(p).then(_=>({status:"fulfilled",value:_}),_=>({status:"rejected",reason:_}))))};var l=h;document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),f=u?.nonce||u?.getAttribute("nonce");s=h(n.map(m=>{if(m=d3(m),m in Nw)return;Nw[m]=!0;const p=m.endsWith(".css"),_=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${_}`))return;const g=document.createElement("link");if(g.rel=p?"stylesheet":h3,p||(g.as="script"),g.crossOrigin="",g.href=m,f&&g.setAttribute("nonce",f),document.head.appendChild(g),p)return new Promise((v,x)=>{g.addEventListener("load",v),g.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${m}`)))})}))}function a(u){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=u,window.dispatchEvent(f),!f.defaultPrevented)throw u}return s.then(u=>{for(const f of u||[])f.status==="rejected"&&a(f.reason);return e().catch(a)})};let jt=class extends Error{constructor(e){super(e),this.name="ShikiError"}};function p3(t){return by(t)}function by(t){return Array.isArray(t)?m3(t):t instanceof RegExp?t:typeof t=="object"?g3(t):t}function m3(t){let e=[];for(let n=0,r=t.length;n<r;n++)e[n]=by(t[n]);return e}function g3(t){let e={};for(let n in t)e[n]=by(t[n]);return e}function Ik(t,...e){return e.forEach(n=>{for(let r in n)t[r]=n[r]}),t}function Nk(t){const e=~t.lastIndexOf("/")||~t.lastIndexOf("\\");return e===0?t:~e===t.length-1?Nk(t.substring(0,t.length-1)):t.substr(~e+1)}var tm=/\$(\d+)|\${(\d+):\/(downcase|upcase)}/g,wu=class{static hasCaptures(t){return t===null?!1:(tm.lastIndex=0,tm.test(t))}static replaceCaptures(t,e,n){return t.replace(tm,(r,s,a,l)=>{let u=n[parseInt(s||a,10)];if(u){let f=e.substring(u.start,u.end);for(;f[0]===".";)f=f.substring(1);switch(l){case"downcase":return f.toLowerCase();case"upcase":return f.toUpperCase();default:return f}}else return r})}};function Mk(t,e){return t<e?-1:t>e?1:0}function Dk(t,e){if(t===null&&e===null)return 0;if(!t)return-1;if(!e)return 1;let n=t.length,r=e.length;if(n===r){for(let s=0;s<n;s++){let a=Mk(t[s],e[s]);if(a!==0)return a}return 0}return n-r}function Mw(t){return!!(/^#[0-9a-f]{6}$/i.test(t)||/^#[0-9a-f]{8}$/i.test(t)||/^#[0-9a-f]{3}$/i.test(t)||/^#[0-9a-f]{4}$/i.test(t))}function Lk(t){return t.replace(/[\-\\\{\}\*\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&")}var zk=class{constructor(t){this.fn=t}cache=new Map;get(t){if(this.cache.has(t))return this.cache.get(t);const e=this.fn(t);return this.cache.set(t,e),e}},_f=class{constructor(t,e,n){this._colorMap=t,this._defaults=e,this._root=n}static createFromRawTheme(t,e){return this.createFromParsedTheme(b3(t),e)}static createFromParsedTheme(t,e){return x3(t,e)}_cachedMatchRoot=new zk(t=>this._root.match(t));getColorMap(){return this._colorMap.getColorMap()}getDefaults(){return this._defaults}match(t){if(t===null)return this._defaults;const e=t.scopeName,r=this._cachedMatchRoot.get(e).find(s=>y3(t.parent,s.parentScopes));return r?new jk(r.fontStyle,r.foreground,r.background):null}},nm=class Hu{constructor(e,n){this.parent=e,this.scopeName=n}static push(e,n){for(const r of n)e=new Hu(e,r);return e}static from(...e){let n=null;for(let r=0;r<e.length;r++)n=new Hu(n,e[r]);return n}push(e){return new Hu(this,e)}getSegments(){let e=this;const n=[];for(;e;)n.push(e.scopeName),e=e.parent;return n.reverse(),n}toString(){return this.getSegments().join(" ")}extends(e){return this===e?!0:this.parent===null?!1:this.parent.extends(e)}getExtensionIfDefined(e){const n=[];let r=this;for(;r&&r!==e;)n.push(r.scopeName),r=r.parent;return r===e?n.reverse():void 0}};function y3(t,e){if(e.length===0)return!0;for(let n=0;n<e.length;n++){let r=e[n],s=!1;if(r===">"){if(n===e.length-1)return!1;r=e[++n],s=!0}for(;t&&!_3(t.scopeName,r);){if(s)return!1;t=t.parent}if(!t)return!1;t=t.parent}return!0}function _3(t,e){return e===t||t.startsWith(e)&&t[e.length]==="."}var jk=class{constructor(t,e,n){this.fontStyle=t,this.foregroundId=e,this.backgroundId=n}};function b3(t){if(!t)return[];if(!t.settings||!Array.isArray(t.settings))return[];let e=t.settings,n=[],r=0;for(let s=0,a=e.length;s<a;s++){let l=e[s];if(!l.settings)continue;let u;if(typeof l.scope=="string"){let p=l.scope;p=p.replace(/^[,]+/,""),p=p.replace(/[,]+$/,""),u=p.split(",")}else Array.isArray(l.scope)?u=l.scope:u=[""];let f=-1;if(typeof l.settings.fontStyle=="string"){f=0;let p=l.settings.fontStyle.split(" ");for(let _=0,g=p.length;_<g;_++)switch(p[_]){case"italic":f=f|1;break;case"bold":f=f|2;break;case"underline":f=f|4;break;case"strikethrough":f=f|8;break}}let h=null;typeof l.settings.foreground=="string"&&Mw(l.settings.foreground)&&(h=l.settings.foreground);let m=null;typeof l.settings.background=="string"&&Mw(l.settings.background)&&(m=l.settings.background);for(let p=0,_=u.length;p<_;p++){let v=u[p].trim().split(" "),x=v[v.length-1],k=null;v.length>1&&(k=v.slice(0,v.length-1),k.reverse()),n[r++]=new v3(x,k,s,f,h,m)}}return n}var v3=class{constructor(t,e,n,r,s,a){this.scope=t,this.parentScopes=e,this.index=n,this.fontStyle=r,this.foreground=s,this.background=a}},_n=(t=>(t[t.NotSet=-1]="NotSet",t[t.None=0]="None",t[t.Italic=1]="Italic",t[t.Bold=2]="Bold",t[t.Underline=4]="Underline",t[t.Strikethrough=8]="Strikethrough",t))(_n||{});function x3(t,e){t.sort((f,h)=>{let m=Mk(f.scope,h.scope);return m!==0||(m=Dk(f.parentScopes,h.parentScopes),m!==0)?m:f.index-h.index});let n=0,r="#000000",s="#ffffff";for(;t.length>=1&&t[0].scope==="";){let f=t.shift();f.fontStyle!==-1&&(n=f.fontStyle),f.foreground!==null&&(r=f.foreground),f.background!==null&&(s=f.background)}let a=new w3(e),l=new jk(n,a.getId(r),a.getId(s)),u=new k3(new cg(0,null,-1,0,0),[]);for(let f=0,h=t.length;f<h;f++){let m=t[f];u.insert(0,m.scope,m.parentScopes,m.fontStyle,a.getId(m.foreground),a.getId(m.background))}return new _f(a,l,u)}var w3=class{_isFrozen;_lastColorId;_id2color;_color2id;constructor(t){if(this._lastColorId=0,this._id2color=[],this._color2id=Object.create(null),Array.isArray(t)){this._isFrozen=!0;for(let e=0,n=t.length;e<n;e++)this._color2id[t[e]]=e,this._id2color[e]=t[e]}else this._isFrozen=!1}getId(t){if(t===null)return 0;t=t.toUpperCase();let e=this._color2id[t];if(e)return e;if(this._isFrozen)throw new Error(`Missing color in color map - ${t}`);return e=++this._lastColorId,this._color2id[t]=e,this._id2color[e]=t,e}getColorMap(){return this._id2color.slice(0)}},S3=Object.freeze([]),cg=class Pk{scopeDepth;parentScopes;fontStyle;foreground;background;constructor(e,n,r,s,a){this.scopeDepth=e,this.parentScopes=n||S3,this.fontStyle=r,this.foreground=s,this.background=a}clone(){return new Pk(this.scopeDepth,this.parentScopes,this.fontStyle,this.foreground,this.background)}static cloneArr(e){let n=[];for(let r=0,s=e.length;r<s;r++)n[r]=e[r].clone();return n}acceptOverwrite(e,n,r,s){this.scopeDepth>e?console.log("how did this happen?"):this.scopeDepth=e,n!==-1&&(this.fontStyle=n),r!==0&&(this.foreground=r),s!==0&&(this.background=s)}},k3=class ug{constructor(e,n=[],r={}){this._mainRule=e,this._children=r,this._rulesWithParentScopes=n}_rulesWithParentScopes;static _cmpBySpecificity(e,n){if(e.scopeDepth!==n.scopeDepth)return n.scopeDepth-e.scopeDepth;let r=0,s=0;for(;e.parentScopes[r]===">"&&r++,n.parentScopes[s]===">"&&s++,!(r>=e.parentScopes.length||s>=n.parentScopes.length);){const a=n.parentScopes[s].length-e.parentScopes[r].length;if(a!==0)return a;r++,s++}return n.parentScopes.length-e.parentScopes.length}match(e){if(e!==""){let r=e.indexOf("."),s,a;if(r===-1?(s=e,a=""):(s=e.substring(0,r),a=e.substring(r+1)),this._children.hasOwnProperty(s))return this._children[s].match(a)}const n=this._rulesWithParentScopes.concat(this._mainRule);return n.sort(ug._cmpBySpecificity),n}insert(e,n,r,s,a,l){if(n===""){this._doInsertHere(e,r,s,a,l);return}let u=n.indexOf("."),f,h;u===-1?(f=n,h=""):(f=n.substring(0,u),h=n.substring(u+1));let m;this._children.hasOwnProperty(f)?m=this._children[f]:(m=new ug(this._mainRule.clone(),cg.cloneArr(this._rulesWithParentScopes)),this._children[f]=m),m.insert(e+1,h,r,s,a,l)}_doInsertHere(e,n,r,s,a){if(n===null){this._mainRule.acceptOverwrite(e,r,s,a);return}for(let l=0,u=this._rulesWithParentScopes.length;l<u;l++){let f=this._rulesWithParentScopes[l];if(Dk(f.parentScopes,n)===0){f.acceptOverwrite(e,r,s,a);return}}r===-1&&(r=this._mainRule.fontStyle),s===0&&(s=this._mainRule.foreground),a===0&&(a=this._mainRule.background),this._rulesWithParentScopes.push(new cg(e,n,r,s,a))}},Va=class pr{static toBinaryStr(e){return e.toString(2).padStart(32,"0")}static print(e){const n=pr.getLanguageId(e),r=pr.getTokenType(e),s=pr.getFontStyle(e),a=pr.getForeground(e),l=pr.getBackground(e);console.log({languageId:n,tokenType:r,fontStyle:s,foreground:a,background:l})}static getLanguageId(e){return(e&255)>>>0}static getTokenType(e){return(e&768)>>>8}static containsBalancedBrackets(e){return(e&1024)!==0}static getFontStyle(e){return(e&30720)>>>11}static getForeground(e){return(e&16744448)>>>15}static getBackground(e){return(e&4278190080)>>>24}static set(e,n,r,s,a,l,u){let f=pr.getLanguageId(e),h=pr.getTokenType(e),m=pr.containsBalancedBrackets(e)?1:0,p=pr.getFontStyle(e),_=pr.getForeground(e),g=pr.getBackground(e);return n!==0&&(f=n),r!==8&&(h=r),s!==null&&(m=s?1:0),a!==-1&&(p=a),l!==0&&(_=l),u!==0&&(g=u),(f<<0|h<<8|m<<10|p<<11|_<<15|g<<24)>>>0}};function bf(t,e){const n=[],r=E3(t);let s=r.next();for(;s!==null;){let f=0;if(s.length===2&&s.charAt(1)===":"){switch(s.charAt(0)){case"R":f=1;break;case"L":f=-1;break;default:console.log(`Unknown priority ${s} in scope selector`)}s=r.next()}let h=l();if(n.push({matcher:h,priority:f}),s!==",")break;s=r.next()}return n;function a(){if(s==="-"){s=r.next();const f=a();return h=>!!f&&!f(h)}if(s==="("){s=r.next();const f=u();return s===")"&&(s=r.next()),f}if(Dw(s)){const f=[];do f.push(s),s=r.next();while(Dw(s));return h=>e(f,h)}return null}function l(){const f=[];let h=a();for(;h;)f.push(h),h=a();return m=>f.every(p=>p(m))}function u(){const f=[];let h=l();for(;h&&(f.push(h),s==="|"||s===",");){do s=r.next();while(s==="|"||s===",");h=l()}return m=>f.some(p=>p(m))}}function Dw(t){return!!t&&!!t.match(/[\w\.:]+/)}function E3(t){let e=/([LR]:|[\w\.:][\w\.:\-]*|[\,\|\-\(\)])/g,n=e.exec(t);return{next:()=>{if(!n)return null;const r=n[0];return n=e.exec(t),r}}}function Bk(t){typeof t.dispose=="function"&&t.dispose()}var Dl=class{constructor(t){this.scopeName=t}toKey(){return this.scopeName}},C3=class{constructor(t,e){this.scopeName=t,this.ruleName=e}toKey(){return`${this.scopeName}#${this.ruleName}`}},T3=class{_references=[];_seenReferenceKeys=new Set;get references(){return this._references}visitedRule=new Set;add(t){const e=t.toKey();this._seenReferenceKeys.has(e)||(this._seenReferenceKeys.add(e),this._references.push(t))}},A3=class{constructor(t,e){this.repo=t,this.initialScopeName=e,this.seenFullScopeRequests.add(this.initialScopeName),this.Q=[new Dl(this.initialScopeName)]}seenFullScopeRequests=new Set;seenPartialScopeRequests=new Set;Q;processQueue(){const t=this.Q;this.Q=[];const e=new T3;for(const n of t)R3(n,this.initialScopeName,this.repo,e);for(const n of e.references)if(n instanceof Dl){if(this.seenFullScopeRequests.has(n.scopeName))continue;this.seenFullScopeRequests.add(n.scopeName),this.Q.push(n)}else{if(this.seenFullScopeRequests.has(n.scopeName)||this.seenPartialScopeRequests.has(n.toKey()))continue;this.seenPartialScopeRequests.add(n.toKey()),this.Q.push(n)}}};function R3(t,e,n,r){const s=n.lookup(t.scopeName);if(!s){if(t.scopeName===e)throw new Error(`No grammar provided for <${e}>`);return}const a=n.lookup(e);t instanceof Dl?Gu({baseGrammar:a,selfGrammar:s},r):fg(t.ruleName,{baseGrammar:a,selfGrammar:s,repository:s.repository},r);const l=n.injections(t.scopeName);if(l)for(const u of l)r.add(new Dl(u))}function fg(t,e,n){if(e.repository&&e.repository[t]){const r=e.repository[t];vf([r],e,n)}}function Gu(t,e){t.selfGrammar.patterns&&Array.isArray(t.selfGrammar.patterns)&&vf(t.selfGrammar.patterns,{...t,repository:t.selfGrammar.repository},e),t.selfGrammar.injections&&vf(Object.values(t.selfGrammar.injections),{...t,repository:t.selfGrammar.repository},e)}function vf(t,e,n){for(const r of t){if(n.visitedRule.has(r))continue;n.visitedRule.add(r);const s=r.repository?Ik({},e.repository,r.repository):e.repository;Array.isArray(r.patterns)&&vf(r.patterns,{...e,repository:s},n);const a=r.include;if(!a)continue;const l=Uk(a);switch(l.kind){case 0:Gu({...e,selfGrammar:e.baseGrammar},n);break;case 1:Gu(e,n);break;case 2:fg(l.ruleName,{...e,repository:s},n);break;case 3:case 4:const u=l.scopeName===e.selfGrammar.scopeName?e.selfGrammar:l.scopeName===e.baseGrammar.scopeName?e.baseGrammar:void 0;if(u){const f={baseGrammar:e.baseGrammar,selfGrammar:u,repository:s};l.kind===4?fg(l.ruleName,f,n):Gu(f,n)}else l.kind===4?n.add(new C3(l.scopeName,l.ruleName)):n.add(new Dl(l.scopeName));break}}}var O3=class{kind=0},I3=class{kind=1},N3=class{constructor(t){this.ruleName=t}kind=2},M3=class{constructor(t){this.scopeName=t}kind=3},D3=class{constructor(t,e){this.scopeName=t,this.ruleName=e}kind=4};function Uk(t){if(t==="$base")return new O3;if(t==="$self")return new I3;const e=t.indexOf("#");if(e===-1)return new M3(t);if(e===0)return new N3(t.substring(1));{const n=t.substring(0,e),r=t.substring(e+1);return new D3(n,r)}}var L3=/\\(\d+)/,Lw=/\\(\d+)/g,z3=-1,$k=-2;var Zl=class{$location;id;_nameIsCapturing;_name;_contentNameIsCapturing;_contentName;constructor(t,e,n,r){this.$location=t,this.id=e,this._name=n||null,this._nameIsCapturing=wu.hasCaptures(this._name),this._contentName=r||null,this._contentNameIsCapturing=wu.hasCaptures(this._contentName)}get debugName(){const t=this.$location?`${Nk(this.$location.filename)}:${this.$location.line}`:"unknown";return`${this.constructor.name}#${this.id} @ ${t}`}getName(t,e){return!this._nameIsCapturing||this._name===null||t===null||e===null?this._name:wu.replaceCaptures(this._name,t,e)}getContentName(t,e){return!this._contentNameIsCapturing||this._contentName===null?this._contentName:wu.replaceCaptures(this._contentName,t,e)}},j3=class extends Zl{retokenizeCapturedWithRuleId;constructor(t,e,n,r,s){super(t,e,n,r),this.retokenizeCapturedWithRuleId=s}dispose(){}collectPatterns(t,e){throw new Error("Not supported!")}compile(t,e){throw new Error("Not supported!")}compileAG(t,e,n,r){throw new Error("Not supported!")}},P3=class extends Zl{_match;captures;_cachedCompiledPatterns;constructor(t,e,n,r,s){super(t,e,n,null),this._match=new Ll(r,this.id),this.captures=s,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}get debugMatchRegExp(){return`${this._match.source}`}collectPatterns(t,e){e.push(this._match)}compile(t,e){return this._getCachedCompiledPatterns(t).compile(t)}compileAG(t,e,n,r){return this._getCachedCompiledPatterns(t).compileAG(t,n,r)}_getCachedCompiledPatterns(t){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new zl,this.collectPatterns(t,this._cachedCompiledPatterns)),this._cachedCompiledPatterns}},zw=class extends Zl{hasMissingPatterns;patterns;_cachedCompiledPatterns;constructor(t,e,n,r,s){super(t,e,n,r),this.patterns=s.patterns,this.hasMissingPatterns=s.hasMissingPatterns,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}collectPatterns(t,e){for(const n of this.patterns)t.getRule(n).collectPatterns(t,e)}compile(t,e){return this._getCachedCompiledPatterns(t).compile(t)}compileAG(t,e,n,r){return this._getCachedCompiledPatterns(t).compileAG(t,n,r)}_getCachedCompiledPatterns(t){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new zl,this.collectPatterns(t,this._cachedCompiledPatterns)),this._cachedCompiledPatterns}},hg=class extends Zl{_begin;beginCaptures;_end;endHasBackReferences;endCaptures;applyEndPatternLast;hasMissingPatterns;patterns;_cachedCompiledPatterns;constructor(t,e,n,r,s,a,l,u,f,h){super(t,e,n,r),this._begin=new Ll(s,this.id),this.beginCaptures=a,this._end=new Ll(l||"",-1),this.endHasBackReferences=this._end.hasBackReferences,this.endCaptures=u,this.applyEndPatternLast=f||!1,this.patterns=h.patterns,this.hasMissingPatterns=h.hasMissingPatterns,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}get debugBeginRegExp(){return`${this._begin.source}`}get debugEndRegExp(){return`${this._end.source}`}getEndWithResolvedBackReferences(t,e){return this._end.resolveBackReferences(t,e)}collectPatterns(t,e){e.push(this._begin)}compile(t,e){return this._getCachedCompiledPatterns(t,e).compile(t)}compileAG(t,e,n,r){return this._getCachedCompiledPatterns(t,e).compileAG(t,n,r)}_getCachedCompiledPatterns(t,e){if(!this._cachedCompiledPatterns){this._cachedCompiledPatterns=new zl;for(const n of this.patterns)t.getRule(n).collectPatterns(t,this._cachedCompiledPatterns);this.applyEndPatternLast?this._cachedCompiledPatterns.push(this._end.hasBackReferences?this._end.clone():this._end):this._cachedCompiledPatterns.unshift(this._end.hasBackReferences?this._end.clone():this._end)}return this._end.hasBackReferences&&(this.applyEndPatternLast?this._cachedCompiledPatterns.setSource(this._cachedCompiledPatterns.length()-1,e):this._cachedCompiledPatterns.setSource(0,e)),this._cachedCompiledPatterns}},xf=class extends Zl{_begin;beginCaptures;whileCaptures;_while;whileHasBackReferences;hasMissingPatterns;patterns;_cachedCompiledPatterns;_cachedCompiledWhilePatterns;constructor(t,e,n,r,s,a,l,u,f){super(t,e,n,r),this._begin=new Ll(s,this.id),this.beginCaptures=a,this.whileCaptures=u,this._while=new Ll(l,$k),this.whileHasBackReferences=this._while.hasBackReferences,this.patterns=f.patterns,this.hasMissingPatterns=f.hasMissingPatterns,this._cachedCompiledPatterns=null,this._cachedCompiledWhilePatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null),this._cachedCompiledWhilePatterns&&(this._cachedCompiledWhilePatterns.dispose(),this._cachedCompiledWhilePatterns=null)}get debugBeginRegExp(){return`${this._begin.source}`}get debugWhileRegExp(){return`${this._while.source}`}getWhileWithResolvedBackReferences(t,e){return this._while.resolveBackReferences(t,e)}collectPatterns(t,e){e.push(this._begin)}compile(t,e){return this._getCachedCompiledPatterns(t).compile(t)}compileAG(t,e,n,r){return this._getCachedCompiledPatterns(t).compileAG(t,n,r)}_getCachedCompiledPatterns(t){if(!this._cachedCompiledPatterns){this._cachedCompiledPatterns=new zl;for(const e of this.patterns)t.getRule(e).collectPatterns(t,this._cachedCompiledPatterns)}return this._cachedCompiledPatterns}compileWhile(t,e){return this._getCachedCompiledWhilePatterns(t,e).compile(t)}compileWhileAG(t,e,n,r){return this._getCachedCompiledWhilePatterns(t,e).compileAG(t,n,r)}_getCachedCompiledWhilePatterns(t,e){return this._cachedCompiledWhilePatterns||(this._cachedCompiledWhilePatterns=new zl,this._cachedCompiledWhilePatterns.push(this._while.hasBackReferences?this._while.clone():this._while)),this._while.hasBackReferences&&this._cachedCompiledWhilePatterns.setSource(0,e||""),this._cachedCompiledWhilePatterns}},qk=class gn{static createCaptureRule(e,n,r,s,a){return e.registerRule(l=>new j3(n,l,r,s,a))}static getCompiledRuleId(e,n,r){return e.id||n.registerRule(s=>{if(e.id=s,e.match)return new P3(e.$vscodeTextmateLocation,e.id,e.name,e.match,gn._compileCaptures(e.captures,n,r));if(typeof e.begin>"u"){e.repository&&(r=Ik({},r,e.repository));let a=e.patterns;return typeof a>"u"&&e.include&&(a=[{include:e.include}]),new zw(e.$vscodeTextmateLocation,e.id,e.name,e.contentName,gn._compilePatterns(a,n,r))}return e.while?new xf(e.$vscodeTextmateLocation,e.id,e.name,e.contentName,e.begin,gn._compileCaptures(e.beginCaptures||e.captures,n,r),e.while,gn._compileCaptures(e.whileCaptures||e.captures,n,r),gn._compilePatterns(e.patterns,n,r)):new hg(e.$vscodeTextmateLocation,e.id,e.name,e.contentName,e.begin,gn._compileCaptures(e.beginCaptures||e.captures,n,r),e.end,gn._compileCaptures(e.endCaptures||e.captures,n,r),e.applyEndPatternLast,gn._compilePatterns(e.patterns,n,r))}),e.id}static _compileCaptures(e,n,r){let s=[];if(e){let a=0;for(const l in e){if(l==="$vscodeTextmateLocation")continue;const u=parseInt(l,10);u>a&&(a=u)}for(let l=0;l<=a;l++)s[l]=null;for(const l in e){if(l==="$vscodeTextmateLocation")continue;const u=parseInt(l,10);let f=0;e[l].patterns&&(f=gn.getCompiledRuleId(e[l],n,r)),s[u]=gn.createCaptureRule(n,e[l].$vscodeTextmateLocation,e[l].name,e[l].contentName,f)}}return s}static _compilePatterns(e,n,r){let s=[];if(e)for(let a=0,l=e.length;a<l;a++){const u=e[a];let f=-1;if(u.include){const h=Uk(u.include);switch(h.kind){case 0:case 1:f=gn.getCompiledRuleId(r[u.include],n,r);break;case 2:let m=r[h.ruleName];m&&(f=gn.getCompiledRuleId(m,n,r));break;case 3:case 4:const p=h.scopeName,_=h.kind===4?h.ruleName:null,g=n.getExternalGrammar(p,r);if(g)if(_){let v=g.repository[_];v&&(f=gn.getCompiledRuleId(v,n,g.repository))}else f=gn.getCompiledRuleId(g.repository.$self,n,g.repository);break}}else f=gn.getCompiledRuleId(u,n,r);if(f!==-1){const h=n.getRule(f);let m=!1;if((h instanceof zw||h instanceof hg||h instanceof xf)&&h.hasMissingPatterns&&h.patterns.length===0&&(m=!0),m)continue;s.push(f)}}return{patterns:s,hasMissingPatterns:(e?e.length:0)!==s.length}}},Ll=class Fk{source;ruleId;hasAnchor;hasBackReferences;_anchorCache;constructor(e,n){if(e&&typeof e=="string"){const r=e.length;let s=0,a=[],l=!1;for(let u=0;u<r;u++)if(e.charAt(u)==="\\"&&u+1<r){const h=e.charAt(u+1);h==="z"?(a.push(e.substring(s,u)),a.push("$(?!\\n)(?<!\\n)"),s=u+2):(h==="A"||h==="G")&&(l=!0),u++}this.hasAnchor=l,s===0?this.source=e:(a.push(e.substring(s,r)),this.source=a.join(""))}else this.hasAnchor=!1,this.source=e;this.hasAnchor?this._anchorCache=this._buildAnchorCache():this._anchorCache=null,this.ruleId=n,typeof this.source=="string"?this.hasBackReferences=L3.test(this.source):this.hasBackReferences=!1}clone(){return new Fk(this.source,this.ruleId)}setSource(e){this.source!==e&&(this.source=e,this.hasAnchor&&(this._anchorCache=this._buildAnchorCache()))}resolveBackReferences(e,n){if(typeof this.source!="string")throw new Error("This method should only be called if the source is a string");let r=n.map(s=>e.substring(s.start,s.end));return Lw.lastIndex=0,this.source.replace(Lw,(s,a)=>Lk(r[parseInt(a,10)]||""))}_buildAnchorCache(){if(typeof this.source!="string")throw new Error("This method should only be called if the source is a string");let e=[],n=[],r=[],s=[],a,l,u,f;for(a=0,l=this.source.length;a<l;a++)u=this.source.charAt(a),e[a]=u,n[a]=u,r[a]=u,s[a]=u,u==="\\"&&a+1<l&&(f=this.source.charAt(a+1),f==="A"?(e[a+1]="",n[a+1]="",r[a+1]="A",s[a+1]="A"):f==="G"?(e[a+1]="",n[a+1]="G",r[a+1]="",s[a+1]="G"):(e[a+1]=f,n[a+1]=f,r[a+1]=f,s[a+1]=f),a++);return{A0_G0:e.join(""),A0_G1:n.join(""),A1_G0:r.join(""),A1_G1:s.join("")}}resolveAnchors(e,n){return!this.hasAnchor||!this._anchorCache||typeof this.source!="string"?this.source:e?n?this._anchorCache.A1_G1:this._anchorCache.A1_G0:n?this._anchorCache.A0_G1:this._anchorCache.A0_G0}},zl=class{_items;_hasAnchors;_cached;_anchorCache;constructor(){this._items=[],this._hasAnchors=!1,this._cached=null,this._anchorCache={A0_G0:null,A0_G1:null,A1_G0:null,A1_G1:null}}dispose(){this._disposeCaches()}_disposeCaches(){this._cached&&(this._cached.dispose(),this._cached=null),this._anchorCache.A0_G0&&(this._anchorCache.A0_G0.dispose(),this._anchorCache.A0_G0=null),this._anchorCache.A0_G1&&(this._anchorCache.A0_G1.dispose(),this._anchorCache.A0_G1=null),this._anchorCache.A1_G0&&(this._anchorCache.A1_G0.dispose(),this._anchorCache.A1_G0=null),this._anchorCache.A1_G1&&(this._anchorCache.A1_G1.dispose(),this._anchorCache.A1_G1=null)}push(t){this._items.push(t),this._hasAnchors=this._hasAnchors||t.hasAnchor}unshift(t){this._items.unshift(t),this._hasAnchors=this._hasAnchors||t.hasAnchor}length(){return this._items.length}setSource(t,e){this._items[t].source!==e&&(this._disposeCaches(),this._items[t].setSource(e))}compile(t){if(!this._cached){let e=this._items.map(n=>n.source);this._cached=new jw(t,e,this._items.map(n=>n.ruleId))}return this._cached}compileAG(t,e,n){return this._hasAnchors?e?n?(this._anchorCache.A1_G1||(this._anchorCache.A1_G1=this._resolveAnchors(t,e,n)),this._anchorCache.A1_G1):(this._anchorCache.A1_G0||(this._anchorCache.A1_G0=this._resolveAnchors(t,e,n)),this._anchorCache.A1_G0):n?(this._anchorCache.A0_G1||(this._anchorCache.A0_G1=this._resolveAnchors(t,e,n)),this._anchorCache.A0_G1):(this._anchorCache.A0_G0||(this._anchorCache.A0_G0=this._resolveAnchors(t,e,n)),this._anchorCache.A0_G0):this.compile(t)}_resolveAnchors(t,e,n){let r=this._items.map(s=>s.resolveAnchors(e,n));return new jw(t,r,this._items.map(s=>s.ruleId))}},jw=class{constructor(t,e,n){this.regExps=e,this.rules=n,this.scanner=t.createOnigScanner(e)}scanner;dispose(){typeof this.scanner.dispose=="function"&&this.scanner.dispose()}toString(){const t=[];for(let e=0,n=this.rules.length;e<n;e++)t.push("   - "+this.rules[e]+": "+this.regExps[e]);return t.join(`
`)}findNextMatchSync(t,e,n){const r=this.scanner.findNextMatchSync(t,e,n);return r?{ruleId:this.rules[r.index],captureIndices:r.captureIndices}:null}},rm=class{constructor(t,e){this.languageId=t,this.tokenType=e}},B3=class dg{_defaultAttributes;_embeddedLanguagesMatcher;constructor(e,n){this._defaultAttributes=new rm(e,8),this._embeddedLanguagesMatcher=new U3(Object.entries(n||{}))}getDefaultAttributes(){return this._defaultAttributes}getBasicScopeAttributes(e){return e===null?dg._NULL_SCOPE_METADATA:this._getBasicScopeAttributes.get(e)}static _NULL_SCOPE_METADATA=new rm(0,0);_getBasicScopeAttributes=new zk(e=>{const n=this._scopeToLanguage(e),r=this._toStandardTokenType(e);return new rm(n,r)});_scopeToLanguage(e){return this._embeddedLanguagesMatcher.match(e)||0}_toStandardTokenType(e){const n=e.match(dg.STANDARD_TOKEN_TYPE_REGEXP);if(!n)return 8;switch(n[1]){case"comment":return 1;case"string":return 2;case"regex":return 3;case"meta.embedded":return 0}throw new Error("Unexpected match for standard token type!")}static STANDARD_TOKEN_TYPE_REGEXP=/\b(comment|string|regex|meta\.embedded)\b/},U3=class{values;scopesRegExp;constructor(t){if(t.length===0)this.values=null,this.scopesRegExp=null;else{this.values=new Map(t);const e=t.map(([n,r])=>Lk(n));e.sort(),e.reverse(),this.scopesRegExp=new RegExp(`^((${e.join(")|(")}))($|\\.)`,"")}}match(t){if(!this.scopesRegExp)return;const e=t.match(this.scopesRegExp);if(e)return this.values.get(e[1])}},Pw=class{constructor(t,e){this.stack=t,this.stoppedEarly=e}};function Vk(t,e,n,r,s,a,l,u){const f=e.content.length;let h=!1,m=-1;if(l){const g=$3(t,e,n,r,s,a);s=g.stack,r=g.linePos,n=g.isFirstLine,m=g.anchorPosition}const p=Date.now();for(;!h;){if(u!==0&&Date.now()-p>u)return new Pw(s,!0);_()}return new Pw(s,!1);function _(){const g=q3(t,e,n,r,s,m);if(!g){a.produce(s,f),h=!0;return}const v=g.captureIndices,x=g.matchedRuleId,k=v&&v.length>0?v[0].end>r:!1;if(x===z3){const S=s.getRule(t);a.produce(s,v[0].start),s=s.withContentNameScopesList(s.nameScopesList),al(t,e,n,s,a,S.endCaptures,v),a.produce(s,v[0].end);const T=s;if(s=s.parent,m=T.getAnchorPos(),!k&&T.getEnterPos()===r){s=T,a.produce(s,f),h=!0;return}}else{const S=t.getRule(x);a.produce(s,v[0].start);const T=s,C=S.getName(e.content,v),L=s.contentNameScopesList.pushAttributed(C,t);if(s=s.push(x,r,m,v[0].end===f,null,L,L),S instanceof hg){const D=S;al(t,e,n,s,a,D.beginCaptures,v),a.produce(s,v[0].end),m=v[0].end;const I=D.getContentName(e.content,v),P=L.pushAttributed(I,t);if(s=s.withContentNameScopesList(P),D.endHasBackReferences&&(s=s.withEndRule(D.getEndWithResolvedBackReferences(e.content,v))),!k&&T.hasSameRuleAs(s)){s=s.pop(),a.produce(s,f),h=!0;return}}else if(S instanceof xf){const D=S;al(t,e,n,s,a,D.beginCaptures,v),a.produce(s,v[0].end),m=v[0].end;const I=D.getContentName(e.content,v),P=L.pushAttributed(I,t);if(s=s.withContentNameScopesList(P),D.whileHasBackReferences&&(s=s.withEndRule(D.getWhileWithResolvedBackReferences(e.content,v))),!k&&T.hasSameRuleAs(s)){s=s.pop(),a.produce(s,f),h=!0;return}}else if(al(t,e,n,s,a,S.captures,v),a.produce(s,v[0].end),s=s.pop(),!k){s=s.safePop(),a.produce(s,f),h=!0;return}}v[0].end>r&&(r=v[0].end,n=!1)}}function $3(t,e,n,r,s,a){let l=s.beginRuleCapturedEOL?0:-1;const u=[];for(let f=s;f;f=f.pop()){const h=f.getRule(t);h instanceof xf&&u.push({rule:h,stack:f})}for(let f=u.pop();f;f=u.pop()){const{ruleScanner:h,findOptions:m}=H3(f.rule,t,f.stack.endRule,n,r===l),p=h.findNextMatchSync(e,r,m);if(p){if(p.ruleId!==$k){s=f.stack.pop();break}p.captureIndices&&p.captureIndices.length&&(a.produce(f.stack,p.captureIndices[0].start),al(t,e,n,f.stack,a,f.rule.whileCaptures,p.captureIndices),a.produce(f.stack,p.captureIndices[0].end),l=p.captureIndices[0].end,p.captureIndices[0].end>r&&(r=p.captureIndices[0].end,n=!1))}else{s=f.stack.pop();break}}return{stack:s,linePos:r,anchorPosition:l,isFirstLine:n}}function q3(t,e,n,r,s,a){const l=F3(t,e,n,r,s,a),u=t.getInjections();if(u.length===0)return l;const f=V3(u,t,e,n,r,s,a);if(!f)return l;if(!l)return f;const h=l.captureIndices[0].start,m=f.captureIndices[0].start;return m<h||f.priorityMatch&&m===h?f:l}function F3(t,e,n,r,s,a){const l=s.getRule(t),{ruleScanner:u,findOptions:f}=Hk(l,t,s.endRule,n,r===a),h=u.findNextMatchSync(e,r,f);return h?{captureIndices:h.captureIndices,matchedRuleId:h.ruleId}:null}function V3(t,e,n,r,s,a,l){let u=Number.MAX_VALUE,f=null,h,m=0;const p=a.contentNameScopesList.getScopeNames();for(let _=0,g=t.length;_<g;_++){const v=t[_];if(!v.matcher(p))continue;const x=e.getRule(v.ruleId),{ruleScanner:k,findOptions:S}=Hk(x,e,null,r,s===l),T=k.findNextMatchSync(n,s,S);if(!T)continue;const C=T.captureIndices[0].start;if(!(C>=u)&&(u=C,f=T.captureIndices,h=T.ruleId,m=v.priority,u===s))break}return f?{priorityMatch:m===-1,captureIndices:f,matchedRuleId:h}:null}function Hk(t,e,n,r,s){return{ruleScanner:t.compileAG(e,n,r,s),findOptions:0}}function H3(t,e,n,r,s){return{ruleScanner:t.compileWhileAG(e,n,r,s),findOptions:0}}function al(t,e,n,r,s,a,l){if(a.length===0)return;const u=e.content,f=Math.min(a.length,l.length),h=[],m=l[0].end;for(let p=0;p<f;p++){const _=a[p];if(_===null)continue;const g=l[p];if(g.length===0)continue;if(g.start>m)break;for(;h.length>0&&h[h.length-1].endPos<=g.start;)s.produceFromScopes(h[h.length-1].scopes,h[h.length-1].endPos),h.pop();if(h.length>0?s.produceFromScopes(h[h.length-1].scopes,g.start):s.produce(r,g.start),_.retokenizeCapturedWithRuleId){const x=_.getName(u,l),k=r.contentNameScopesList.pushAttributed(x,t),S=_.getContentName(u,l),T=k.pushAttributed(S,t),C=r.push(_.retokenizeCapturedWithRuleId,g.start,-1,!1,null,k,T),L=t.createOnigString(u.substring(0,g.end));Vk(t,L,n&&g.start===0,g.start,C,s,!1,0),Bk(L);continue}const v=_.getName(u,l);if(v!==null){const k=(h.length>0?h[h.length-1].scopes:r.contentNameScopesList).pushAttributed(v,t);h.push(new G3(k,g.end))}}for(;h.length>0;)s.produceFromScopes(h[h.length-1].scopes,h[h.length-1].endPos),h.pop()}var G3=class{scopes;endPos;constructor(t,e){this.scopes=t,this.endPos=e}};function K3(t,e,n,r,s,a,l,u){return new Q3(t,e,n,r,s,a,l,u)}function Bw(t,e,n,r,s){const a=bf(e,wf),l=qk.getCompiledRuleId(n,r,s.repository);for(const u of a)t.push({debugSelector:e,matcher:u.matcher,ruleId:l,grammar:s,priority:u.priority})}function wf(t,e){if(e.length<t.length)return!1;let n=0;return t.every(r=>{for(let s=n;s<e.length;s++)if(Z3(e[s],r))return n=s+1,!0;return!1})}function Z3(t,e){if(!t)return!1;if(t===e)return!0;const n=e.length;return t.length>n&&t.substr(0,n)===e&&t[n]==="."}var Q3=class{constructor(t,e,n,r,s,a,l,u){if(this._rootScopeName=t,this.balancedBracketSelectors=a,this._onigLib=u,this._basicScopeAttributesProvider=new B3(n,r),this._rootId=-1,this._lastRuleId=0,this._ruleId2desc=[null],this._includedGrammars={},this._grammarRepository=l,this._grammar=Uw(e,null),this._injections=null,this._tokenTypeMatchers=[],s)for(const f of Object.keys(s)){const h=bf(f,wf);for(const m of h)this._tokenTypeMatchers.push({matcher:m.matcher,type:s[f]})}}_rootId;_lastRuleId;_ruleId2desc;_includedGrammars;_grammarRepository;_grammar;_injections;_basicScopeAttributesProvider;_tokenTypeMatchers;get themeProvider(){return this._grammarRepository}dispose(){for(const t of this._ruleId2desc)t&&t.dispose()}createOnigScanner(t){return this._onigLib.createOnigScanner(t)}createOnigString(t){return this._onigLib.createOnigString(t)}getMetadataForScope(t){return this._basicScopeAttributesProvider.getBasicScopeAttributes(t)}_collectInjections(){const t={lookup:s=>s===this._rootScopeName?this._grammar:this.getExternalGrammar(s),injections:s=>this._grammarRepository.injections(s)},e=[],n=this._rootScopeName,r=t.lookup(n);if(r){const s=r.injections;if(s)for(let l in s)Bw(e,l,s[l],this,r);const a=this._grammarRepository.injections(n);a&&a.forEach(l=>{const u=this.getExternalGrammar(l);if(u){const f=u.injectionSelector;f&&Bw(e,f,u,this,u)}})}return e.sort((s,a)=>s.priority-a.priority),e}getInjections(){return this._injections===null&&(this._injections=this._collectInjections()),this._injections}registerRule(t){const e=++this._lastRuleId,n=t(e);return this._ruleId2desc[e]=n,n}getRule(t){return this._ruleId2desc[t]}getExternalGrammar(t,e){if(this._includedGrammars[t])return this._includedGrammars[t];if(this._grammarRepository){const n=this._grammarRepository.lookup(t);if(n)return this._includedGrammars[t]=Uw(n,e&&e.$base),this._includedGrammars[t]}}tokenizeLine(t,e,n=0){const r=this._tokenize(t,e,!1,n);return{tokens:r.lineTokens.getResult(r.ruleStack,r.lineLength),ruleStack:r.ruleStack,stoppedEarly:r.stoppedEarly}}tokenizeLine2(t,e,n=0){const r=this._tokenize(t,e,!0,n);return{tokens:r.lineTokens.getBinaryResult(r.ruleStack,r.lineLength),ruleStack:r.ruleStack,stoppedEarly:r.stoppedEarly}}_tokenize(t,e,n,r){this._rootId===-1&&(this._rootId=qk.getCompiledRuleId(this._grammar.repository.$self,this,this._grammar.repository),this.getInjections());let s;if(!e||e===pg.NULL){s=!0;const h=this._basicScopeAttributesProvider.getDefaultAttributes(),m=this.themeProvider.getDefaults(),p=Va.set(0,h.languageId,h.tokenType,null,m.fontStyle,m.foregroundId,m.backgroundId),_=this.getRule(this._rootId).getName(null,null);let g;_?g=bl.createRootAndLookUpScopeName(_,p,this):g=bl.createRoot("unknown",p),e=new pg(null,this._rootId,-1,-1,!1,null,g,g)}else s=!1,e.reset();t=t+`
`;const a=this.createOnigString(t),l=a.content.length,u=new Y3(n,t,this._tokenTypeMatchers,this.balancedBracketSelectors),f=Vk(this,a,s,0,e,u,!0,r);return Bk(a),{lineLength:l,lineTokens:u,ruleStack:f.stack,stoppedEarly:f.stoppedEarly}}};function Uw(t,e){return t=p3(t),t.repository=t.repository||{},t.repository.$self={$vscodeTextmateLocation:t.$vscodeTextmateLocation,patterns:t.patterns,name:t.scopeName},t.repository.$base=e||t.repository.$self,t}var bl=class zr{constructor(e,n,r){this.parent=e,this.scopePath=n,this.tokenAttributes=r}static fromExtension(e,n){let r=e,s=e?.scopePath??null;for(const a of n)s=nm.push(s,a.scopeNames),r=new zr(r,s,a.encodedTokenAttributes);return r}static createRoot(e,n){return new zr(null,new nm(null,e),n)}static createRootAndLookUpScopeName(e,n,r){const s=r.getMetadataForScope(e),a=new nm(null,e),l=r.themeProvider.themeMatch(a),u=zr.mergeAttributes(n,s,l);return new zr(null,a,u)}get scopeName(){return this.scopePath.scopeName}toString(){return this.getScopeNames().join(" ")}equals(e){return zr.equals(this,e)}static equals(e,n){do{if(e===n||!e&&!n)return!0;if(!e||!n||e.scopeName!==n.scopeName||e.tokenAttributes!==n.tokenAttributes)return!1;e=e.parent,n=n.parent}while(!0)}static mergeAttributes(e,n,r){let s=-1,a=0,l=0;return r!==null&&(s=r.fontStyle,a=r.foregroundId,l=r.backgroundId),Va.set(e,n.languageId,n.tokenType,null,s,a,l)}pushAttributed(e,n){if(e===null)return this;if(e.indexOf(" ")===-1)return zr._pushAttributed(this,e,n);const r=e.split(/ /g);let s=this;for(const a of r)s=zr._pushAttributed(s,a,n);return s}static _pushAttributed(e,n,r){const s=r.getMetadataForScope(n),a=e.scopePath.push(n),l=r.themeProvider.themeMatch(a),u=zr.mergeAttributes(e.tokenAttributes,s,l);return new zr(e,a,u)}getScopeNames(){return this.scopePath.getSegments()}getExtensionIfDefined(e){const n=[];let r=this;for(;r&&r!==e;)n.push({encodedTokenAttributes:r.tokenAttributes,scopeNames:r.scopePath.getExtensionIfDefined(r.parent?.scopePath??null)}),r=r.parent;return r===e?n.reverse():void 0}},pg=class Si{constructor(e,n,r,s,a,l,u,f){this.parent=e,this.ruleId=n,this.beginRuleCapturedEOL=a,this.endRule=l,this.nameScopesList=u,this.contentNameScopesList=f,this.depth=this.parent?this.parent.depth+1:1,this._enterPos=r,this._anchorPos=s}_stackElementBrand=void 0;static NULL=new Si(null,0,0,0,!1,null,null,null);_enterPos;_anchorPos;depth;equals(e){return e===null?!1:Si._equals(this,e)}static _equals(e,n){return e===n?!0:this._structuralEquals(e,n)?bl.equals(e.contentNameScopesList,n.contentNameScopesList):!1}static _structuralEquals(e,n){do{if(e===n||!e&&!n)return!0;if(!e||!n||e.depth!==n.depth||e.ruleId!==n.ruleId||e.endRule!==n.endRule)return!1;e=e.parent,n=n.parent}while(!0)}clone(){return this}static _reset(e){for(;e;)e._enterPos=-1,e._anchorPos=-1,e=e.parent}reset(){Si._reset(this)}pop(){return this.parent}safePop(){return this.parent?this.parent:this}push(e,n,r,s,a,l,u){return new Si(this,e,n,r,s,a,l,u)}getEnterPos(){return this._enterPos}getAnchorPos(){return this._anchorPos}getRule(e){return e.getRule(this.ruleId)}toString(){const e=[];return this._writeString(e,0),"["+e.join(",")+"]"}_writeString(e,n){return this.parent&&(n=this.parent._writeString(e,n)),e[n++]=`(${this.ruleId}, ${this.nameScopesList?.toString()}, ${this.contentNameScopesList?.toString()})`,n}withContentNameScopesList(e){return this.contentNameScopesList===e?this:this.parent.push(this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,this.endRule,this.nameScopesList,e)}withEndRule(e){return this.endRule===e?this:new Si(this.parent,this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,e,this.nameScopesList,this.contentNameScopesList)}hasSameRuleAs(e){let n=this;for(;n&&n._enterPos===e._enterPos;){if(n.ruleId===e.ruleId)return!0;n=n.parent}return!1}toStateStackFrame(){return{ruleId:this.ruleId,beginRuleCapturedEOL:this.beginRuleCapturedEOL,endRule:this.endRule,nameScopesList:this.nameScopesList?.getExtensionIfDefined(this.parent?.nameScopesList??null)??[],contentNameScopesList:this.contentNameScopesList?.getExtensionIfDefined(this.nameScopesList)??[]}}static pushFrame(e,n){const r=bl.fromExtension(e?.nameScopesList??null,n.nameScopesList);return new Si(e,n.ruleId,n.enterPos??-1,n.anchorPos??-1,n.beginRuleCapturedEOL,n.endRule,r,bl.fromExtension(r,n.contentNameScopesList))}},J3=class{balancedBracketScopes;unbalancedBracketScopes;allowAny=!1;constructor(t,e){this.balancedBracketScopes=t.flatMap(n=>n==="*"?(this.allowAny=!0,[]):bf(n,wf).map(r=>r.matcher)),this.unbalancedBracketScopes=e.flatMap(n=>bf(n,wf).map(r=>r.matcher))}get matchesAlways(){return this.allowAny&&this.unbalancedBracketScopes.length===0}get matchesNever(){return this.balancedBracketScopes.length===0&&!this.allowAny}match(t){for(const e of this.unbalancedBracketScopes)if(e(t))return!1;for(const e of this.balancedBracketScopes)if(e(t))return!0;return this.allowAny}},Y3=class{constructor(t,e,n,r){this.balancedBracketSelectors=r,this._emitBinaryTokens=t,this._tokenTypeOverrides=n,this._lineText=null,this._tokens=[],this._binaryTokens=[],this._lastTokenEndIndex=0}_emitBinaryTokens;_lineText;_tokens;_binaryTokens;_lastTokenEndIndex;_tokenTypeOverrides;produce(t,e){this.produceFromScopes(t.contentNameScopesList,e)}produceFromScopes(t,e){if(this._lastTokenEndIndex>=e)return;if(this._emitBinaryTokens){let r=t?.tokenAttributes??0,s=!1;if(this.balancedBracketSelectors?.matchesAlways&&(s=!0),this._tokenTypeOverrides.length>0||this.balancedBracketSelectors&&!this.balancedBracketSelectors.matchesAlways&&!this.balancedBracketSelectors.matchesNever){const a=t?.getScopeNames()??[];for(const l of this._tokenTypeOverrides)l.matcher(a)&&(r=Va.set(r,0,l.type,null,-1,0,0));this.balancedBracketSelectors&&(s=this.balancedBracketSelectors.match(a))}if(s&&(r=Va.set(r,0,8,s,-1,0,0)),this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-1]===r){this._lastTokenEndIndex=e;return}this._binaryTokens.push(this._lastTokenEndIndex),this._binaryTokens.push(r),this._lastTokenEndIndex=e;return}const n=t?.getScopeNames()??[];this._tokens.push({startIndex:this._lastTokenEndIndex,endIndex:e,scopes:n}),this._lastTokenEndIndex=e}getResult(t,e){return this._tokens.length>0&&this._tokens[this._tokens.length-1].startIndex===e-1&&this._tokens.pop(),this._tokens.length===0&&(this._lastTokenEndIndex=-1,this.produce(t,e),this._tokens[this._tokens.length-1].startIndex=0),this._tokens}getBinaryResult(t,e){this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-2]===e-1&&(this._binaryTokens.pop(),this._binaryTokens.pop()),this._binaryTokens.length===0&&(this._lastTokenEndIndex=-1,this.produce(t,e),this._binaryTokens[this._binaryTokens.length-2]=0);const n=new Uint32Array(this._binaryTokens.length);for(let r=0,s=this._binaryTokens.length;r<s;r++)n[r]=this._binaryTokens[r];return n}},X3=class{constructor(t,e){this._onigLib=e,this._theme=t}_grammars=new Map;_rawGrammars=new Map;_injectionGrammars=new Map;_theme;dispose(){for(const t of this._grammars.values())t.dispose()}setTheme(t){this._theme=t}getColorMap(){return this._theme.getColorMap()}addGrammar(t,e){this._rawGrammars.set(t.scopeName,t),e&&this._injectionGrammars.set(t.scopeName,e)}lookup(t){return this._rawGrammars.get(t)}injections(t){return this._injectionGrammars.get(t)}getDefaults(){return this._theme.getDefaults()}themeMatch(t){return this._theme.match(t)}grammarForScopeName(t,e,n,r,s){if(!this._grammars.has(t)){let a=this._rawGrammars.get(t);if(!a)return null;this._grammars.set(t,K3(t,a,e,n,r,s,this,this._onigLib))}return this._grammars.get(t)}},W3=class{_options;_syncRegistry;_ensureGrammarCache;constructor(e){this._options=e,this._syncRegistry=new X3(_f.createFromRawTheme(e.theme,e.colorMap),e.onigLib),this._ensureGrammarCache=new Map}dispose(){this._syncRegistry.dispose()}setTheme(e,n){this._syncRegistry.setTheme(_f.createFromRawTheme(e,n))}getColorMap(){return this._syncRegistry.getColorMap()}loadGrammarWithEmbeddedLanguages(e,n,r){return this.loadGrammarWithConfiguration(e,n,{embeddedLanguages:r})}loadGrammarWithConfiguration(e,n,r){return this._loadGrammar(e,n,r.embeddedLanguages,r.tokenTypes,new J3(r.balancedBracketSelectors||[],r.unbalancedBracketSelectors||[]))}loadGrammar(e){return this._loadGrammar(e,0,null,null,null)}_loadGrammar(e,n,r,s,a){const l=new A3(this._syncRegistry,e);for(;l.Q.length>0;)l.Q.map(u=>this._loadSingleGrammar(u.scopeName)),l.processQueue();return this._grammarForScopeName(e,n,r,s,a)}_loadSingleGrammar(e){this._ensureGrammarCache.has(e)||(this._doLoadSingleGrammar(e),this._ensureGrammarCache.set(e,!0))}_doLoadSingleGrammar(e){const n=this._options.loadGrammar(e);if(n){const r=typeof this._options.getInjections=="function"?this._options.getInjections(e):void 0;this._syncRegistry.addGrammar(n,r)}}addGrammar(e,n=[],r=0,s=null){return this._syncRegistry.addGrammar(e,n),this._grammarForScopeName(e.scopeName,r,s)}_grammarForScopeName(e,n=0,r=null,s=null,a=null){return this._syncRegistry.grammarForScopeName(e,n,r,s,a)}},mg=pg.NULL;const ez=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"];class Ql{constructor(e,n,r){this.normal=n,this.property=e,r&&(this.space=r)}}Ql.prototype.normal={};Ql.prototype.property={};Ql.prototype.space=void 0;function Gk(t,e){const n={},r={};for(const s of t)Object.assign(n,s.property),Object.assign(r,s.normal);return new Ql(n,r,e)}function gg(t){return t.toLowerCase()}class qn{constructor(e,n){this.attribute=n,this.property=e}}qn.prototype.attribute="";qn.prototype.booleanish=!1;qn.prototype.boolean=!1;qn.prototype.commaOrSpaceSeparated=!1;qn.prototype.commaSeparated=!1;qn.prototype.defined=!1;qn.prototype.mustUseProperty=!1;qn.prototype.number=!1;qn.prototype.overloadedBoolean=!1;qn.prototype.property="";qn.prototype.spaceSeparated=!1;qn.prototype.space=void 0;let tz=0;const Ue=zi(),zt=zi(),yg=zi(),de=zi(),gt=zi(),Pa=zi(),Jn=zi();function zi(){return 2**++tz}const _g=Object.freeze(Object.defineProperty({__proto__:null,boolean:Ue,booleanish:zt,commaOrSpaceSeparated:Jn,commaSeparated:Pa,number:de,overloadedBoolean:yg,spaceSeparated:gt},Symbol.toStringTag,{value:"Module"})),sm=Object.keys(_g);class vy extends qn{constructor(e,n,r,s){let a=-1;if(super(e,n),$w(this,"space",s),typeof r=="number")for(;++a<sm.length;){const l=sm[a];$w(this,sm[a],(r&_g[l])===_g[l])}}}vy.prototype.defined=!0;function $w(t,e,n){n&&(t[e]=n)}function Qa(t){const e={},n={};for(const[r,s]of Object.entries(t.properties)){const a=new vy(r,t.transform(t.attributes||{},r),s,t.space);t.mustUseProperty&&t.mustUseProperty.includes(r)&&(a.mustUseProperty=!0),e[r]=a,n[gg(r)]=r,n[gg(a.attribute)]=r}return new Ql(e,n,t.space)}const Kk=Qa({properties:{ariaActiveDescendant:null,ariaAtomic:zt,ariaAutoComplete:null,ariaBusy:zt,ariaChecked:zt,ariaColCount:de,ariaColIndex:de,ariaColSpan:de,ariaControls:gt,ariaCurrent:null,ariaDescribedBy:gt,ariaDetails:null,ariaDisabled:zt,ariaDropEffect:gt,ariaErrorMessage:null,ariaExpanded:zt,ariaFlowTo:gt,ariaGrabbed:zt,ariaHasPopup:null,ariaHidden:zt,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:gt,ariaLevel:de,ariaLive:null,ariaModal:zt,ariaMultiLine:zt,ariaMultiSelectable:zt,ariaOrientation:null,ariaOwns:gt,ariaPlaceholder:null,ariaPosInSet:de,ariaPressed:zt,ariaReadOnly:zt,ariaRelevant:null,ariaRequired:zt,ariaRoleDescription:gt,ariaRowCount:de,ariaRowIndex:de,ariaRowSpan:de,ariaSelected:zt,ariaSetSize:de,ariaSort:null,ariaValueMax:de,ariaValueMin:de,ariaValueNow:de,ariaValueText:null,role:null},transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function Zk(t,e){return e in t?t[e]:e}function Qk(t,e){return Zk(t,e.toLowerCase())}const nz=Qa({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Pa,acceptCharset:gt,accessKey:gt,action:null,allow:null,allowFullScreen:Ue,allowPaymentRequest:Ue,allowUserMedia:Ue,alt:null,as:null,async:Ue,autoCapitalize:null,autoComplete:gt,autoFocus:Ue,autoPlay:Ue,blocking:gt,capture:null,charSet:null,checked:Ue,cite:null,className:gt,cols:de,colSpan:null,content:null,contentEditable:zt,controls:Ue,controlsList:gt,coords:de|Pa,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Ue,defer:Ue,dir:null,dirName:null,disabled:Ue,download:yg,draggable:zt,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Ue,formTarget:null,headers:gt,height:de,hidden:yg,high:de,href:null,hrefLang:null,htmlFor:gt,httpEquiv:gt,id:null,imageSizes:null,imageSrcSet:null,inert:Ue,inputMode:null,integrity:null,is:null,isMap:Ue,itemId:null,itemProp:gt,itemRef:gt,itemScope:Ue,itemType:gt,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Ue,low:de,manifest:null,max:null,maxLength:de,media:null,method:null,min:null,minLength:de,multiple:Ue,muted:Ue,name:null,nonce:null,noModule:Ue,noValidate:Ue,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Ue,optimum:de,pattern:null,ping:gt,placeholder:null,playsInline:Ue,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Ue,referrerPolicy:null,rel:gt,required:Ue,reversed:Ue,rows:de,rowSpan:de,sandbox:gt,scope:null,scoped:Ue,seamless:Ue,selected:Ue,shadowRootClonable:Ue,shadowRootDelegatesFocus:Ue,shadowRootMode:null,shape:null,size:de,sizes:null,slot:null,span:de,spellCheck:zt,src:null,srcDoc:null,srcLang:null,srcSet:null,start:de,step:null,style:null,tabIndex:de,target:null,title:null,translate:null,type:null,typeMustMatch:Ue,useMap:null,value:zt,width:de,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:gt,axis:null,background:null,bgColor:null,border:de,borderColor:null,bottomMargin:de,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Ue,declare:Ue,event:null,face:null,frame:null,frameBorder:null,hSpace:de,leftMargin:de,link:null,longDesc:null,lowSrc:null,marginHeight:de,marginWidth:de,noResize:Ue,noHref:Ue,noShade:Ue,noWrap:Ue,object:null,profile:null,prompt:null,rev:null,rightMargin:de,rules:null,scheme:null,scrolling:zt,standby:null,summary:null,text:null,topMargin:de,valueType:null,version:null,vAlign:null,vLink:null,vSpace:de,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Ue,disableRemotePlayback:Ue,prefix:null,property:null,results:de,security:null,unselectable:null},space:"html",transform:Qk}),rz=Qa({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Jn,accentHeight:de,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:de,amplitude:de,arabicForm:null,ascent:de,attributeName:null,attributeType:null,azimuth:de,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:de,by:null,calcMode:null,capHeight:de,className:gt,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:de,diffuseConstant:de,direction:null,display:null,dur:null,divisor:de,dominantBaseline:null,download:Ue,dx:null,dy:null,edgeMode:null,editable:null,elevation:de,enableBackground:null,end:null,event:null,exponent:de,externalResourcesRequired:null,fill:null,fillOpacity:de,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Pa,g2:Pa,glyphName:Pa,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:de,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:de,horizOriginX:de,horizOriginY:de,id:null,ideographic:de,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:de,k:de,k1:de,k2:de,k3:de,k4:de,kernelMatrix:Jn,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:de,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:de,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:de,overlineThickness:de,paintOrder:null,panose1:null,path:null,pathLength:de,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:gt,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:de,pointsAtY:de,pointsAtZ:de,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Jn,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Jn,rev:Jn,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Jn,requiredFeatures:Jn,requiredFonts:Jn,requiredFormats:Jn,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:de,specularExponent:de,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:de,strikethroughThickness:de,string:null,stroke:null,strokeDashArray:Jn,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:de,strokeOpacity:de,strokeWidth:null,style:null,surfaceScale:de,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Jn,tabIndex:de,tableValues:null,target:null,targetX:de,targetY:de,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Jn,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:de,underlineThickness:de,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:de,values:null,vAlphabetic:de,vMathematical:de,vectorEffect:null,vHanging:de,vIdeographic:de,version:null,vertAdvY:de,vertOriginX:de,vertOriginY:de,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:de,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:Zk}),Jk=Qa({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()}}),Yk=Qa({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:Qk}),Xk=Qa({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()}}),sz={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},iz=/[A-Z]/g,qw=/-[a-z]/g,az=/^data[-\w.:]+$/i;function Wk(t,e){const n=gg(e);let r=e,s=qn;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&az.test(e)){if(e.charAt(4)==="-"){const a=e.slice(5).replace(qw,lz);r="data"+a.charAt(0).toUpperCase()+a.slice(1)}else{const a=e.slice(4);if(!qw.test(a)){let l=a.replace(iz,oz);l.charAt(0)!=="-"&&(l="-"+l),e="data"+l}}s=vy}return new s(r,e)}function oz(t){return"-"+t.toLowerCase()}function lz(t){return t.charAt(1).toUpperCase()}const eE=Gk([Kk,nz,Jk,Yk,Xk],"html"),Jl=Gk([Kk,rz,Jk,Yk,Xk],"svg"),Fw={}.hasOwnProperty;function cz(t,e){const n=e||{};function r(s,...a){let l=r.invalid;const u=r.handlers;if(s&&Fw.call(s,t)){const f=String(s[t]);l=Fw.call(u,f)?u[f]:r.unknown}if(l)return l.call(this,s,...a)}return r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}const uz=/["&'<>`]/g,fz=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,hz=/[\x01-\t\v\f\x0E-\x1F\x7F\x81\x8D\x8F\x90\x9D\xA0-\uFFFF]/g,dz=/[|\\{}()[\]^$+*?.]/g,Vw=new WeakMap;function pz(t,e){if(t=t.replace(e.subset?mz(e.subset):uz,r),e.subset||e.escapeOnly)return t;return t.replace(fz,n).replace(hz,r);function n(s,a,l){return e.format((s.charCodeAt(0)-55296)*1024+s.charCodeAt(1)-56320+65536,l.charCodeAt(a+2),e)}function r(s,a,l){return e.format(s.charCodeAt(0),l.charCodeAt(a+1),e)}}function mz(t){let e=Vw.get(t);return e||(e=gz(t),Vw.set(t,e)),e}function gz(t){const e=[];let n=-1;for(;++n<t.length;)e.push(t[n].replace(dz,"\\$&"));return new RegExp("(?:"+e.join("|")+")","g")}const yz=/[\dA-Fa-f]/;function _z(t,e,n){const r="&#x"+t.toString(16).toUpperCase();return n&&e&&!yz.test(String.fromCharCode(e))?r:r+";"}const bz=/\d/;function vz(t,e,n){const r="&#"+String(t);return n&&e&&!bz.test(String.fromCharCode(e))?r:r+";"}const xz=["AElig","AMP","Aacute","Acirc","Agrave","Aring","Atilde","Auml","COPY","Ccedil","ETH","Eacute","Ecirc","Egrave","Euml","GT","Iacute","Icirc","Igrave","Iuml","LT","Ntilde","Oacute","Ocirc","Ograve","Oslash","Otilde","Ouml","QUOT","REG","THORN","Uacute","Ucirc","Ugrave","Uuml","Yacute","aacute","acirc","acute","aelig","agrave","amp","aring","atilde","auml","brvbar","ccedil","cedil","cent","copy","curren","deg","divide","eacute","ecirc","egrave","eth","euml","frac12","frac14","frac34","gt","iacute","icirc","iexcl","igrave","iquest","iuml","laquo","lt","macr","micro","middot","nbsp","not","ntilde","oacute","ocirc","ograve","ordf","ordm","oslash","otilde","ouml","para","plusmn","pound","quot","raquo","reg","sect","shy","sup1","sup2","sup3","szlig","thorn","times","uacute","ucirc","ugrave","uml","uuml","yacute","yen","yuml"],im={nbsp:"",iexcl:"",cent:"",pound:"",curren:"",yen:"",brvbar:"",sect:"",uml:"",copy:"",ordf:"",laquo:"",not:"",shy:"",reg:"",macr:"",deg:"",plusmn:"",sup2:"",sup3:"",acute:"",micro:"",para:"",middot:"",cedil:"",sup1:"",ordm:"",raquo:"",frac14:"",frac12:"",frac34:"",iquest:"",Agrave:"",Aacute:"",Acirc:"",Atilde:"",Auml:"",Aring:"",AElig:"",Ccedil:"",Egrave:"",Eacute:"",Ecirc:"",Euml:"",Igrave:"",Iacute:"",Icirc:"",Iuml:"",ETH:"",Ntilde:"",Ograve:"",Oacute:"",Ocirc:"",Otilde:"",Ouml:"",times:"",Oslash:"",Ugrave:"",Uacute:"",Ucirc:"",Uuml:"",Yacute:"",THORN:"",szlig:"",agrave:"",aacute:"",acirc:"",atilde:"",auml:"",aring:"",aelig:"",ccedil:"",egrave:"",eacute:"",ecirc:"",euml:"",igrave:"",iacute:"",icirc:"",iuml:"",eth:"",ntilde:"",ograve:"",oacute:"",ocirc:"",otilde:"",ouml:"",divide:"",oslash:"",ugrave:"",uacute:"",ucirc:"",uuml:"",yacute:"",thorn:"",yuml:"",fnof:"",Alpha:"",Beta:"",Gamma:"",Delta:"",Epsilon:"",Zeta:"",Eta:"",Theta:"",Iota:"",Kappa:"",Lambda:"",Mu:"",Nu:"",Xi:"",Omicron:"",Pi:"",Rho:"",Sigma:"",Tau:"",Upsilon:"",Phi:"",Chi:"",Psi:"",Omega:"",alpha:"",beta:"",gamma:"",delta:"",epsilon:"",zeta:"",eta:"",theta:"",iota:"",kappa:"",lambda:"",mu:"",nu:"",xi:"",omicron:"",pi:"",rho:"",sigmaf:"",sigma:"",tau:"",upsilon:"",phi:"",chi:"",psi:"",omega:"",thetasym:"",upsih:"",piv:"",bull:"",hellip:"",prime:"",Prime:"",oline:"",frasl:"",weierp:"",image:"",real:"",trade:"",alefsym:"",larr:"",uarr:"",rarr:"",darr:"",harr:"",crarr:"",lArr:"",uArr:"",rArr:"",dArr:"",hArr:"",forall:"",part:"",exist:"",empty:"",nabla:"",isin:"",notin:"",ni:"",prod:"",sum:"",minus:"",lowast:"",radic:"",prop:"",infin:"",ang:"",and:"",or:"",cap:"",cup:"",int:"",there4:"",sim:"",cong:"",asymp:"",ne:"",equiv:"",le:"",ge:"",sub:"",sup:"",nsub:"",sube:"",supe:"",oplus:"",otimes:"",perp:"",sdot:"",lceil:"",rceil:"",lfloor:"",rfloor:"",lang:"",rang:"",loz:"",spades:"",clubs:"",hearts:"",diams:"",quot:'"',amp:"&",lt:"<",gt:">",OElig:"",oelig:"",Scaron:"",scaron:"",Yuml:"",circ:"",tilde:"",ensp:"",emsp:"",thinsp:"",zwnj:"",zwj:"",lrm:"",rlm:"",ndash:"",mdash:"",lsquo:"",rsquo:"",sbquo:"",ldquo:"",rdquo:"",bdquo:"",dagger:"",Dagger:"",permil:"",lsaquo:"",rsaquo:"",euro:""},wz=["cent","copy","divide","gt","lt","not","para","times"],tE={}.hasOwnProperty,bg={};let Su;for(Su in im)tE.call(im,Su)&&(bg[im[Su]]=Su);const Sz=/[^\dA-Za-z]/;function kz(t,e,n,r){const s=String.fromCharCode(t);if(tE.call(bg,s)){const a=bg[s],l="&"+a;return n&&xz.includes(a)&&!wz.includes(a)&&(!r||e&&e!==61&&Sz.test(String.fromCharCode(e)))?l:l+";"}return""}function Ez(t,e,n){let r=_z(t,e,n.omitOptionalSemicolons),s;if((n.useNamedReferences||n.useShortestReferences)&&(s=kz(t,e,n.omitOptionalSemicolons,n.attribute)),(n.useShortestReferences||!s)&&n.useShortestReferences){const a=vz(t,e,n.omitOptionalSemicolons);a.length<r.length&&(r=a)}return s&&(!n.useShortestReferences||s.length<r.length)?s:r}function Ba(t,e){return pz(t,Object.assign({format:Ez},e))}const Cz=/^>|^->|<!--|-->|--!>|<!-$/g,Tz=[">"],Az=["<",">"];function Rz(t,e,n,r){return r.settings.bogusComments?"<?"+Ba(t.value,Object.assign({},r.settings.characterReferences,{subset:Tz}))+">":"<!--"+t.value.replace(Cz,s)+"-->";function s(a){return Ba(a,Object.assign({},r.settings.characterReferences,{subset:Az}))}}function Oz(t,e,n,r){return"<!"+(r.settings.upperDoctype?"DOCTYPE":"doctype")+(r.settings.tightDoctype?"":" ")+"html>"}function Sf(t,e){const n=String(t);if(typeof e!="string")throw new TypeError("Expected character");let r=0,s=n.indexOf(e);for(;s!==-1;)r++,s=n.indexOf(e,s+e.length);return r}function nE(t,e){const n=e||{};return(t[t.length-1]===""?[...t,""]:t).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}function rE(t){return t.join(" ").trim()}const Iz=/[ \t\n\f\r]/g;function Wf(t){return typeof t=="object"?t.type==="text"?Hw(t.value):!1:Hw(t)}function Hw(t){return t.replace(Iz,"")===""}const Ht=iE(1),sE=iE(-1),Nz=[];function iE(t){return e;function e(n,r,s){const a=n?n.children:Nz;let l=(r||0)+t,u=a[l];if(!s)for(;u&&Wf(u);)l+=t,u=a[l];return u}}const Mz={}.hasOwnProperty;function aE(t){return e;function e(n,r,s){return Mz.call(t,n.tagName)&&t[n.tagName](n,r,s)}}const xy=aE({body:Lz,caption:am,colgroup:am,dd:Bz,dt:Pz,head:am,html:Dz,li:jz,optgroup:Uz,option:$z,p:zz,rp:Gw,rt:Gw,tbody:Fz,td:Kw,tfoot:Vz,th:Kw,thead:qz,tr:Hz});function am(t,e,n){const r=Ht(n,e,!0);return!r||r.type!=="comment"&&!(r.type==="text"&&Wf(r.value.charAt(0)))}function Dz(t,e,n){const r=Ht(n,e);return!r||r.type!=="comment"}function Lz(t,e,n){const r=Ht(n,e);return!r||r.type!=="comment"}function zz(t,e,n){const r=Ht(n,e);return r?r.type==="element"&&(r.tagName==="address"||r.tagName==="article"||r.tagName==="aside"||r.tagName==="blockquote"||r.tagName==="details"||r.tagName==="div"||r.tagName==="dl"||r.tagName==="fieldset"||r.tagName==="figcaption"||r.tagName==="figure"||r.tagName==="footer"||r.tagName==="form"||r.tagName==="h1"||r.tagName==="h2"||r.tagName==="h3"||r.tagName==="h4"||r.tagName==="h5"||r.tagName==="h6"||r.tagName==="header"||r.tagName==="hgroup"||r.tagName==="hr"||r.tagName==="main"||r.tagName==="menu"||r.tagName==="nav"||r.tagName==="ol"||r.tagName==="p"||r.tagName==="pre"||r.tagName==="section"||r.tagName==="table"||r.tagName==="ul"):!n||!(n.type==="element"&&(n.tagName==="a"||n.tagName==="audio"||n.tagName==="del"||n.tagName==="ins"||n.tagName==="map"||n.tagName==="noscript"||n.tagName==="video"))}function jz(t,e,n){const r=Ht(n,e);return!r||r.type==="element"&&r.tagName==="li"}function Pz(t,e,n){const r=Ht(n,e);return!!(r&&r.type==="element"&&(r.tagName==="dt"||r.tagName==="dd"))}function Bz(t,e,n){const r=Ht(n,e);return!r||r.type==="element"&&(r.tagName==="dt"||r.tagName==="dd")}function Gw(t,e,n){const r=Ht(n,e);return!r||r.type==="element"&&(r.tagName==="rp"||r.tagName==="rt")}function Uz(t,e,n){const r=Ht(n,e);return!r||r.type==="element"&&r.tagName==="optgroup"}function $z(t,e,n){const r=Ht(n,e);return!r||r.type==="element"&&(r.tagName==="option"||r.tagName==="optgroup")}function qz(t,e,n){const r=Ht(n,e);return!!(r&&r.type==="element"&&(r.tagName==="tbody"||r.tagName==="tfoot"))}function Fz(t,e,n){const r=Ht(n,e);return!r||r.type==="element"&&(r.tagName==="tbody"||r.tagName==="tfoot")}function Vz(t,e,n){return!Ht(n,e)}function Hz(t,e,n){const r=Ht(n,e);return!r||r.type==="element"&&r.tagName==="tr"}function Kw(t,e,n){const r=Ht(n,e);return!r||r.type==="element"&&(r.tagName==="td"||r.tagName==="th")}const Gz=aE({body:Qz,colgroup:Jz,head:Zz,html:Kz,tbody:Yz});function Kz(t){const e=Ht(t,-1);return!e||e.type!=="comment"}function Zz(t){const e=new Set;for(const r of t.children)if(r.type==="element"&&(r.tagName==="base"||r.tagName==="title")){if(e.has(r.tagName))return!1;e.add(r.tagName)}const n=t.children[0];return!n||n.type==="element"}function Qz(t){const e=Ht(t,-1,!0);return!e||e.type!=="comment"&&!(e.type==="text"&&Wf(e.value.charAt(0)))&&!(e.type==="element"&&(e.tagName==="meta"||e.tagName==="link"||e.tagName==="script"||e.tagName==="style"||e.tagName==="template"))}function Jz(t,e,n){const r=sE(n,e),s=Ht(t,-1,!0);return n&&r&&r.type==="element"&&r.tagName==="colgroup"&&xy(r,n.children.indexOf(r),n)?!1:!!(s&&s.type==="element"&&s.tagName==="col")}function Yz(t,e,n){const r=sE(n,e),s=Ht(t,-1);return n&&r&&r.type==="element"&&(r.tagName==="thead"||r.tagName==="tbody")&&xy(r,n.children.indexOf(r),n)?!1:!!(s&&s.type==="element"&&s.tagName==="tr")}const ku={name:[[`	
\f\r &/=>`.split(""),`	
\f\r "&'/=>\``.split("")],[`\0	
\f\r "&'/<=>`.split(""),`\0	
\f\r "&'/<=>\``.split("")]],unquoted:[[`	
\f\r &>`.split(""),`\0	
\f\r "&'<=>\``.split("")],[`\0	
\f\r "&'<=>\``.split(""),`\0	
\f\r "&'<=>\``.split("")]],single:[["&'".split(""),"\"&'`".split("")],["\0&'".split(""),"\0\"&'`".split("")]],double:[['"&'.split(""),"\"&'`".split("")],['\0"&'.split(""),"\0\"&'`".split("")]]};function Xz(t,e,n,r){const s=r.schema,a=s.space==="svg"?!1:r.settings.omitOptionalTags;let l=s.space==="svg"?r.settings.closeEmptyElements:r.settings.voids.includes(t.tagName.toLowerCase());const u=[];let f;s.space==="html"&&t.tagName==="svg"&&(r.schema=Jl);const h=Wz(r,t.properties),m=r.all(s.space==="html"&&t.tagName==="template"?t.content:t);return r.schema=s,m&&(l=!1),(h||!a||!Gz(t,e,n))&&(u.push("<",t.tagName,h?" "+h:""),l&&(s.space==="svg"||r.settings.closeSelfClosing)&&(f=h.charAt(h.length-1),(!r.settings.tightSelfClosing||f==="/"||f&&f!=='"'&&f!=="'")&&u.push(" "),u.push("/")),u.push(">")),u.push(m),!l&&(!a||!xy(t,e,n))&&u.push("</"+t.tagName+">"),u.join("")}function Wz(t,e){const n=[];let r=-1,s;if(e){for(s in e)if(e[s]!==null&&e[s]!==void 0){const a=ej(t,s,e[s]);a&&n.push(a)}}for(;++r<n.length;){const a=t.settings.tightAttributes?n[r].charAt(n[r].length-1):void 0;r!==n.length-1&&a!=='"'&&a!=="'"&&(n[r]+=" ")}return n.join("")}function ej(t,e,n){const r=Wk(t.schema,e),s=t.settings.allowParseErrors&&t.schema.space==="html"?0:1,a=t.settings.allowDangerousCharacters?0:1;let l=t.quote,u;if(r.overloadedBoolean&&(n===r.attribute||n==="")?n=!0:(r.boolean||r.overloadedBoolean)&&(typeof n!="string"||n===r.attribute||n==="")&&(n=!!n),n==null||n===!1||typeof n=="number"&&Number.isNaN(n))return"";const f=Ba(r.attribute,Object.assign({},t.settings.characterReferences,{subset:ku.name[s][a]}));return n===!0||(n=Array.isArray(n)?(r.commaSeparated?nE:rE)(n,{padLeft:!t.settings.tightCommaSeparatedLists}):String(n),t.settings.collapseEmptyAttributes&&!n)?f:(t.settings.preferUnquoted&&(u=Ba(n,Object.assign({},t.settings.characterReferences,{attribute:!0,subset:ku.unquoted[s][a]}))),u!==n&&(t.settings.quoteSmart&&Sf(n,l)>Sf(n,t.alternative)&&(l=t.alternative),u=l+Ba(n,Object.assign({},t.settings.characterReferences,{subset:(l==="'"?ku.single:ku.double)[s][a],attribute:!0}))+l),f+(u&&"="+u))}const tj=["<","&"];function oE(t,e,n,r){return n&&n.type==="element"&&(n.tagName==="script"||n.tagName==="style")?t.value:Ba(t.value,Object.assign({},r.settings.characterReferences,{subset:tj}))}function nj(t,e,n,r){return r.settings.allowDangerousHtml?t.value:oE(t,e,n,r)}function rj(t,e,n,r){return r.all(t)}const sj=cz("type",{invalid:ij,unknown:aj,handlers:{comment:Rz,doctype:Oz,element:Xz,raw:nj,root:rj,text:oE}});function ij(t){throw new Error("Expected node, not `"+t+"`")}function aj(t){const e=t;throw new Error("Cannot compile unknown node `"+e.type+"`")}const oj={},lj={},cj=[];function uj(t,e){const n=e||oj,r=n.quote||'"',s=r==='"'?"'":'"';if(r!=='"'&&r!=="'")throw new Error("Invalid quote `"+r+"`, expected `'` or `\"`");return{one:fj,all:hj,settings:{omitOptionalTags:n.omitOptionalTags||!1,allowParseErrors:n.allowParseErrors||!1,allowDangerousCharacters:n.allowDangerousCharacters||!1,quoteSmart:n.quoteSmart||!1,preferUnquoted:n.preferUnquoted||!1,tightAttributes:n.tightAttributes||!1,upperDoctype:n.upperDoctype||!1,tightDoctype:n.tightDoctype||!1,bogusComments:n.bogusComments||!1,tightCommaSeparatedLists:n.tightCommaSeparatedLists||!1,tightSelfClosing:n.tightSelfClosing||!1,collapseEmptyAttributes:n.collapseEmptyAttributes||!1,allowDangerousHtml:n.allowDangerousHtml||!1,voids:n.voids||ez,characterReferences:n.characterReferences||lj,closeSelfClosing:n.closeSelfClosing||!1,closeEmptyElements:n.closeEmptyElements||!1},schema:n.space==="svg"?Jl:eE,quote:r,alternative:s}.one(Array.isArray(t)?{type:"root",children:t}:t,void 0,void 0)}function fj(t,e,n){return sj(t,e,n,this)}function hj(t){const e=[],n=t&&t.children||cj;let r=-1;for(;++r<n.length;)e[r]=this.one(n[r],r,t);return e.join("")}function kf(t,e){const n=typeof t=="string"?{}:{...t.colorReplacements},r=typeof t=="string"?t:t.name;for(const[s,a]of Object.entries(e?.colorReplacements||{}))typeof a=="string"?n[s]=a:s===r&&Object.assign(n,a);return n}function Js(t,e){return t&&(e?.[t?.toLowerCase()]||t)}function dj(t){return Array.isArray(t)?t:[t]}async function lE(t){return Promise.resolve(typeof t=="function"?t():t).then(e=>e.default||e)}function wy(t){return!t||["plaintext","txt","text","plain"].includes(t)}function cE(t){return t==="ansi"||wy(t)}function Sy(t){return t==="none"}function uE(t){return Sy(t)}function fE(t,e){if(!e)return t;t.properties||={},t.properties.class||=[],typeof t.properties.class=="string"&&(t.properties.class=t.properties.class.split(/\s+/g)),Array.isArray(t.properties.class)||(t.properties.class=[]);const n=Array.isArray(e)?e:e.split(/\s+/g);for(const r of n)r&&!t.properties.class.includes(r)&&t.properties.class.push(r);return t}function eh(t,e=!1){if(t.length===0)return[["",0]];const n=t.split(/(\r?\n)/g);let r=0;const s=[];for(let a=0;a<n.length;a+=2){const l=e?n[a]+(n[a+1]||""):n[a];s.push([l,r]),r+=n[a].length,r+=n[a+1]?.length||0}return s}function pj(t){const e=eh(t,!0).map(([s])=>s);function n(s){if(s===t.length)return{line:e.length-1,character:e[e.length-1].length};let a=s,l=0;for(const u of e){if(a<u.length)break;a-=u.length,l++}return{line:l,character:a}}function r(s,a){let l=0;for(let u=0;u<s;u++)l+=e[u].length;return l+=a,l}return{lines:e,indexToPos:n,posToIndex:r}}function mj(t,e,n){const r=new Set;for(const a of t.matchAll(/:?lang=["']([^"']+)["']/g)){const l=a[1].toLowerCase().trim();l&&r.add(l)}for(const a of t.matchAll(/(?:```|~~~)([\w-]+)/g)){const l=a[1].toLowerCase().trim();l&&r.add(l)}for(const a of t.matchAll(/\\begin\{([\w-]+)\}/g)){const l=a[1].toLowerCase().trim();l&&r.add(l)}for(const a of t.matchAll(/<script\s+(?:type|lang)=["']([^"']+)["']/gi)){const l=a[1].toLowerCase().trim(),u=l.includes("/")?l.split("/").pop():l;u&&r.add(u)}if(!n)return Array.from(r);const s=n.getBundledLanguages();return Array.from(r).filter(a=>a&&s[a])}const ky="light-dark()",gj=["color","background-color"];function yj(t,e){let n=0;const r=[];for(const s of e)s>n&&r.push({...t,content:t.content.slice(n,s),offset:t.offset+n}),n=s;return n<t.content.length&&r.push({...t,content:t.content.slice(n),offset:t.offset+n}),r}function _j(t,e){const n=Array.from(e instanceof Set?e:new Set(e)).sort((r,s)=>r-s);return n.length?t.map(r=>r.flatMap(s=>{const a=n.filter(l=>s.offset<l&&l<s.offset+s.content.length).map(l=>l-s.offset).sort((l,u)=>l-u);return a.length?yj(s,a):s})):t}function bj(t,e,n,r,s="css-vars"){const a={content:t.content,explanation:t.explanation,offset:t.offset},l=e.map(m=>Ef(t.variants[m])),u=new Set(l.flatMap(m=>Object.keys(m))),f={},h=(m,p)=>{const _=p==="color"?"":p==="background-color"?"-bg":`-${p}`;return n+e[m]+(p==="color"?"":_)};return l.forEach((m,p)=>{for(const _ of u){const g=m[_]||"inherit";if(p===0&&r&&gj.includes(_))if(r===ky&&l.length>1){const v=e.findIndex(T=>T==="light"),x=e.findIndex(T=>T==="dark");if(v===-1||x===-1)throw new jt('When using `defaultColor: "light-dark()"`, you must provide both `light` and `dark` themes');const k=l[v][_]||"inherit",S=l[x][_]||"inherit";f[_]=`light-dark(${k}, ${S})`,s==="css-vars"&&(f[h(p,_)]=g)}else f[_]=g;else s==="css-vars"&&(f[h(p,_)]=g)}}),a.htmlStyle=f,a}function Ef(t){const e={};if(t.color&&(e.color=t.color),t.bgColor&&(e["background-color"]=t.bgColor),t.fontStyle){t.fontStyle&_n.Italic&&(e["font-style"]="italic"),t.fontStyle&_n.Bold&&(e["font-weight"]="bold");const n=[];t.fontStyle&_n.Underline&&n.push("underline"),t.fontStyle&_n.Strikethrough&&n.push("line-through"),n.length&&(e["text-decoration"]=n.join(" "))}return e}function vg(t){return typeof t=="string"?t:Object.entries(t).map(([e,n])=>`${e}:${n}`).join(";")}const hE=new WeakMap;function th(t,e){hE.set(t,e)}function jl(t){return hE.get(t)}class Ja{_stacks={};lang;get themes(){return Object.keys(this._stacks)}get theme(){return this.themes[0]}get _stack(){return this._stacks[this.theme]}static initial(e,n){return new Ja(Object.fromEntries(dj(n).map(r=>[r,mg])),e)}constructor(...e){if(e.length===2){const[n,r]=e;this.lang=r,this._stacks=n}else{const[n,r,s]=e;this.lang=r,this._stacks={[s]:n}}}getInternalStack(e=this.theme){return this._stacks[e]}getScopes(e=this.theme){return vj(this._stacks[e])}toJSON(){return{lang:this.lang,theme:this.theme,themes:this.themes,scopes:this.getScopes()}}}function vj(t){const e=[],n=new Set;function r(s){if(n.has(s))return;n.add(s);const a=s?.nameScopesList?.scopeName;a&&e.push(a),s.parent&&r(s.parent)}return r(t),e}function xj(t,e){if(!(t instanceof Ja))throw new jt("Invalid grammar state");return t.getInternalStack(e)}function wj(){const t=new WeakMap;function e(n){if(!t.has(n.meta)){let r=function(l){if(typeof l=="number"){if(l<0||l>n.source.length)throw new jt(`Invalid decoration offset: ${l}. Code length: ${n.source.length}`);return{...s.indexToPos(l),offset:l}}else{const u=s.lines[l.line];if(u===void 0)throw new jt(`Invalid decoration position ${JSON.stringify(l)}. Lines length: ${s.lines.length}`);let f=l.character;if(f<0&&(f=u.length+f),f<0||f>u.length)throw new jt(`Invalid decoration position ${JSON.stringify(l)}. Line ${l.line} length: ${u.length}`);return{...l,character:f,offset:s.posToIndex(l.line,f)}}};const s=pj(n.source),a=(n.options.decorations||[]).map(l=>({...l,start:r(l.start),end:r(l.end)}));Sj(a),t.set(n.meta,{decorations:a,converter:s,source:n.source})}return t.get(n.meta)}return{name:"shiki:decorations",tokens(n){if(!this.options.decorations?.length)return;const s=e(this).decorations.flatMap(l=>[l.start.offset,l.end.offset]);return _j(n,s)},code(n){if(!this.options.decorations?.length)return;const r=e(this),s=Array.from(n.children).filter(m=>m.type==="element"&&m.tagName==="span");if(s.length!==r.converter.lines.length)throw new jt(`Number of lines in code element (${s.length}) does not match the number of lines in the source (${r.converter.lines.length}). Failed to apply decorations.`);function a(m,p,_,g){const v=s[m];let x="",k=-1,S=-1;if(p===0&&(k=0),_===0&&(S=0),_===Number.POSITIVE_INFINITY&&(S=v.children.length),k===-1||S===-1)for(let C=0;C<v.children.length;C++)x+=dE(v.children[C]),k===-1&&x.length===p&&(k=C+1),S===-1&&x.length===_&&(S=C+1);if(k===-1)throw new jt(`Failed to find start index for decoration ${JSON.stringify(g.start)}`);if(S===-1)throw new jt(`Failed to find end index for decoration ${JSON.stringify(g.end)}`);const T=v.children.slice(k,S);if(!g.alwaysWrap&&T.length===v.children.length)u(v,g,"line");else if(!g.alwaysWrap&&T.length===1&&T[0].type==="element")u(T[0],g,"token");else{const C={type:"element",tagName:"span",properties:{},children:T};u(C,g,"wrapper"),v.children.splice(k,T.length,C)}}function l(m,p){s[m]=u(s[m],p,"line")}function u(m,p,_){const g=p.properties||{},v=p.transform||(x=>x);return m.tagName=p.tagName||"span",m.properties={...m.properties,...g,class:m.properties.class},p.properties?.class&&fE(m,p.properties.class),m=v(m,_)||m,m}const f=[],h=r.decorations.sort((m,p)=>p.start.offset-m.start.offset||m.end.offset-p.end.offset);for(const m of h){const{start:p,end:_}=m;if(p.line===_.line)a(p.line,p.character,_.character,m);else if(p.line<_.line){a(p.line,p.character,Number.POSITIVE_INFINITY,m);for(let g=p.line+1;g<_.line;g++)f.unshift(()=>l(g,m));a(_.line,0,_.character,m)}}f.forEach(m=>m())}}}function Sj(t){for(let e=0;e<t.length;e++){const n=t[e];if(n.start.offset>n.end.offset)throw new jt(`Invalid decoration range: ${JSON.stringify(n.start)} - ${JSON.stringify(n.end)}`);for(let r=e+1;r<t.length;r++){const s=t[r],a=n.start.offset<=s.start.offset&&s.start.offset<n.end.offset,l=n.start.offset<s.end.offset&&s.end.offset<=n.end.offset,u=s.start.offset<=n.start.offset&&n.start.offset<s.end.offset,f=s.start.offset<n.end.offset&&n.end.offset<=s.end.offset;if(a||l||u||f){if(a&&l||u&&f||u&&n.start.offset===n.end.offset||l&&s.start.offset===s.end.offset)continue;throw new jt(`Decorations ${JSON.stringify(n.start)} and ${JSON.stringify(s.start)} intersect.`)}}}}function dE(t){return t.type==="text"?t.value:t.type==="element"?t.children.map(dE).join(""):""}const kj=[wj()];function Cf(t){const e=Ej(t.transformers||[]);return[...e.pre,...e.normal,...e.post,...kj]}function Ej(t){const e=[],n=[],r=[];for(const s of t)switch(s.enforce){case"pre":e.push(s);break;case"post":n.push(s);break;default:r.push(s)}return{pre:e,post:n,normal:r}}var Ti=["black","red","green","yellow","blue","magenta","cyan","white","brightBlack","brightRed","brightGreen","brightYellow","brightBlue","brightMagenta","brightCyan","brightWhite"],om={1:"bold",2:"dim",3:"italic",4:"underline",7:"reverse",8:"hidden",9:"strikethrough"};function Cj(t,e){const n=t.indexOf("\x1B",e);if(n!==-1&&t[n+1]==="["){const r=t.indexOf("m",n);if(r!==-1)return{sequence:t.substring(n+2,r).split(";"),startPosition:n,position:r+1}}return{position:t.length}}function Zw(t){const e=t.shift();if(e==="2"){const n=t.splice(0,3).map(r=>Number.parseInt(r));return n.length!==3||n.some(r=>Number.isNaN(r))?void 0:{type:"rgb",rgb:n}}else if(e==="5"){const n=t.shift();if(n)return{type:"table",index:Number(n)}}}function Tj(t){const e=[];for(;t.length>0;){const n=t.shift();if(!n)continue;const r=Number.parseInt(n);if(!Number.isNaN(r))if(r===0)e.push({type:"resetAll"});else if(r<=9)om[r]&&e.push({type:"setDecoration",value:om[r]});else if(r<=29){const s=om[r-20];s&&(e.push({type:"resetDecoration",value:s}),s==="dim"&&e.push({type:"resetDecoration",value:"bold"}))}else if(r<=37)e.push({type:"setForegroundColor",value:{type:"named",name:Ti[r-30]}});else if(r===38){const s=Zw(t);s&&e.push({type:"setForegroundColor",value:s})}else if(r===39)e.push({type:"resetForegroundColor"});else if(r<=47)e.push({type:"setBackgroundColor",value:{type:"named",name:Ti[r-40]}});else if(r===48){const s=Zw(t);s&&e.push({type:"setBackgroundColor",value:s})}else r===49?e.push({type:"resetBackgroundColor"}):r===53?e.push({type:"setDecoration",value:"overline"}):r===55?e.push({type:"resetDecoration",value:"overline"}):r>=90&&r<=97?e.push({type:"setForegroundColor",value:{type:"named",name:Ti[r-90+8]}}):r>=100&&r<=107&&e.push({type:"setBackgroundColor",value:{type:"named",name:Ti[r-100+8]}})}return e}function Aj(){let t=null,e=null,n=new Set;return{parse(r){const s=[];let a=0;do{const l=Cj(r,a),u=l.sequence?r.substring(a,l.startPosition):r.substring(a);if(u.length>0&&s.push({value:u,foreground:t,background:e,decorations:new Set(n)}),l.sequence){const f=Tj(l.sequence);for(const h of f)h.type==="resetAll"?(t=null,e=null,n.clear()):h.type==="resetForegroundColor"?t=null:h.type==="resetBackgroundColor"?e=null:h.type==="resetDecoration"&&n.delete(h.value);for(const h of f)h.type==="setForegroundColor"?t=h.value:h.type==="setBackgroundColor"?e=h.value:h.type==="setDecoration"&&n.add(h.value)}a=l.position}while(a<r.length);return s}}}var Rj={black:"#000000",red:"#bb0000",green:"#00bb00",yellow:"#bbbb00",blue:"#0000bb",magenta:"#ff00ff",cyan:"#00bbbb",white:"#eeeeee",brightBlack:"#555555",brightRed:"#ff5555",brightGreen:"#00ff00",brightYellow:"#ffff55",brightBlue:"#5555ff",brightMagenta:"#ff55ff",brightCyan:"#55ffff",brightWhite:"#ffffff"};function Oj(t=Rj){function e(u){return t[u]}function n(u){return`#${u.map(f=>Math.max(0,Math.min(f,255)).toString(16).padStart(2,"0")).join("")}`}let r;function s(){if(r)return r;r=[];for(let h=0;h<Ti.length;h++)r.push(e(Ti[h]));let u=[0,95,135,175,215,255];for(let h=0;h<6;h++)for(let m=0;m<6;m++)for(let p=0;p<6;p++)r.push(n([u[h],u[m],u[p]]));let f=8;for(let h=0;h<24;h++,f+=10)r.push(n([f,f,f]));return r}function a(u){return s()[u]}function l(u){switch(u.type){case"named":return e(u.name);case"rgb":return n(u.rgb);case"table":return a(u.index)}}return{value:l}}const Ij={black:"#000000",red:"#cd3131",green:"#0DBC79",yellow:"#E5E510",blue:"#2472C8",magenta:"#BC3FBC",cyan:"#11A8CD",white:"#E5E5E5",brightBlack:"#666666",brightRed:"#F14C4C",brightGreen:"#23D18B",brightYellow:"#F5F543",brightBlue:"#3B8EEA",brightMagenta:"#D670D6",brightCyan:"#29B8DB",brightWhite:"#FFFFFF"};function Nj(t,e,n){const r=kf(t,n),s=eh(e),a=Object.fromEntries(Ti.map(f=>{const h=`terminal.ansi${f[0].toUpperCase()}${f.substring(1)}`,m=t.colors?.[h];return[f,m||Ij[f]]})),l=Oj(a),u=Aj();return s.map(f=>u.parse(f[0]).map(h=>{let m,p;h.decorations.has("reverse")?(m=h.background?l.value(h.background):t.bg,p=h.foreground?l.value(h.foreground):t.fg):(m=h.foreground?l.value(h.foreground):t.fg,p=h.background?l.value(h.background):void 0),m=Js(m,r),p=Js(p,r),h.decorations.has("dim")&&(m=Mj(m));let _=_n.None;return h.decorations.has("bold")&&(_|=_n.Bold),h.decorations.has("italic")&&(_|=_n.Italic),h.decorations.has("underline")&&(_|=_n.Underline),h.decorations.has("strikethrough")&&(_|=_n.Strikethrough),{content:h.value,offset:f[1],color:m,bgColor:p,fontStyle:_}}))}function Mj(t){const e=t.match(/#([0-9a-f]{3,8})/i);if(e){const r=e[1];if(r.length===8){const s=Math.round(Number.parseInt(r.slice(6,8),16)/2).toString(16).padStart(2,"0");return`#${r.slice(0,6)}${s}`}else{if(r.length===6)return`#${r}80`;if(r.length===4){const s=r[0],a=r[1],l=r[2],u=r[3],f=Math.round(Number.parseInt(`${u}${u}`,16)/2).toString(16).padStart(2,"0");return`#${s}${s}${a}${a}${l}${l}${f}`}else if(r.length===3){const s=r[0],a=r[1],l=r[2];return`#${s}${s}${a}${a}${l}${l}80`}}}const n=t.match(/var\((--[\w-]+-ansi-[\w-]+)\)/);return n?`var(${n[1]}-dim)`:t}function Ey(t,e,n={}){const{theme:r=t.getLoadedThemes()[0]}=n,s=t.resolveLangAlias(n.lang||"text");if(wy(s)||Sy(r))return eh(e).map(f=>[{content:f[0],offset:f[1]}]);const{theme:a,colorMap:l}=t.setTheme(r);if(s==="ansi")return Nj(a,e,n);const u=t.getLanguage(n.lang||"text");if(n.grammarState){if(n.grammarState.lang!==u.name)throw new jt(`Grammar state language "${n.grammarState.lang}" does not match highlight language "${u.name}"`);if(!n.grammarState.themes.includes(a.name))throw new jt(`Grammar state themes "${n.grammarState.themes}" do not contain highlight theme "${a.name}"`)}return Lj(e,u,a,l,n)}function Dj(...t){if(t.length===2)return jl(t[1]);const[e,n,r={}]=t,{lang:s="text",theme:a=e.getLoadedThemes()[0]}=r;if(wy(s)||Sy(a))throw new jt("Plain language does not have grammar state");if(s==="ansi")throw new jt("ANSI language does not have grammar state");const{theme:l,colorMap:u}=e.setTheme(a),f=e.getLanguage(s);return new Ja(Cy(n,f,l,u,r).stateStack,f.name,l.name)}function Lj(t,e,n,r,s){const a=Cy(t,e,n,r,s),l=new Ja(a.stateStack,e.name,n.name);return th(a.tokens,l),a.tokens}function Cy(t,e,n,r,s){const a=kf(n,s),{tokenizeMaxLineLength:l=0,tokenizeTimeLimit:u=500}=s,f=eh(t);let h=s.grammarState?xj(s.grammarState,n.name)??mg:s.grammarContextCode!=null?Cy(s.grammarContextCode,e,n,r,{...s,grammarState:void 0,grammarContextCode:void 0}).stateStack:mg,m=[];const p=[];for(let _=0,g=f.length;_<g;_++){const[v,x]=f[_];if(v===""){m=[],p.push([]);continue}if(l>0&&v.length>=l){m=[],p.push([{content:v,offset:x,color:"",fontStyle:0}]);continue}let k,S,T;s.includeExplanation&&(k=e.tokenizeLine(v,h,u),S=k.tokens,T=0);const C=e.tokenizeLine2(v,h,u),L=C.tokens.length/2;for(let D=0;D<L;D++){const I=C.tokens[2*D],P=D+1<L?C.tokens[2*D+2]:v.length;if(I===P)continue;const V=C.tokens[2*D+1],H=Js(r[Va.getForeground(V)],a),z=Va.getFontStyle(V),Q={content:v.substring(I,P),offset:x+I,color:H,fontStyle:z};if(s.includeExplanation){const j=[];if(s.includeExplanation!=="scopeName")for(const Z of n.settings){let $;switch(typeof Z.scope){case"string":$=Z.scope.split(/,/).map(B=>B.trim());break;case"object":$=Z.scope;break;default:continue}j.push({settings:Z,selectors:$.map(B=>B.split(/ /))})}Q.explanation=[];let se=0;for(;I+se<P;){const Z=S[T],$=v.substring(Z.startIndex,Z.endIndex);se+=$.length,Q.explanation.push({content:$,scopes:s.includeExplanation==="scopeName"?zj(Z.scopes):jj(j,Z.scopes)}),T+=1}}m.push(Q)}p.push(m),m=[],h=C.ruleStack}return{tokens:p,stateStack:h}}function zj(t){return t.map(e=>({scopeName:e}))}function jj(t,e){const n=[];for(let r=0,s=e.length;r<s;r++){const a=e[r];n[r]={scopeName:a,themeMatches:Bj(t,a,e.slice(0,r))}}return n}function Qw(t,e){return t===e||e.substring(0,t.length)===t&&e[t.length]==="."}function Pj(t,e,n){if(!Qw(t[t.length-1],e))return!1;let r=t.length-2,s=n.length-1;for(;r>=0&&s>=0;)Qw(t[r],n[s])&&(r-=1),s-=1;return r===-1}function Bj(t,e,n){const r=[];for(const{selectors:s,settings:a}of t)for(const l of s)if(Pj(l,e,n)){r.push(a);break}return r}function pE(t,e,n){const r=Object.entries(n.themes).filter(f=>f[1]).map(f=>({color:f[0],theme:f[1]})),s=r.map(f=>{const h=Ey(t,e,{...n,theme:f.theme}),m=jl(h),p=typeof f.theme=="string"?f.theme:f.theme.name;return{tokens:h,state:m,theme:p}}),a=Uj(...s.map(f=>f.tokens)),l=a[0].map((f,h)=>f.map((m,p)=>{const _={content:m.content,variants:{},offset:m.offset};return"includeExplanation"in n&&n.includeExplanation&&(_.explanation=m.explanation),a.forEach((g,v)=>{const{content:x,explanation:k,offset:S,...T}=g[h][p];_.variants[r[v].color]=T}),_})),u=s[0].state?new Ja(Object.fromEntries(s.map(f=>[f.theme,f.state?.getInternalStack(f.theme)])),s[0].state.lang):void 0;return u&&th(l,u),l}function Uj(...t){const e=t.map(()=>[]),n=t.length;for(let r=0;r<t[0].length;r++){const s=t.map(f=>f[r]),a=e.map(()=>[]);e.forEach((f,h)=>f.push(a[h]));const l=s.map(()=>0),u=s.map(f=>f[0]);for(;u.every(f=>f);){const f=Math.min(...u.map(h=>h.content.length));for(let h=0;h<n;h++){const m=u[h];m.content.length===f?(a[h].push(m),l[h]+=1,u[h]=s[h][l[h]]):(a[h].push({...m,content:m.content.slice(0,f)}),u[h]={...m,content:m.content.slice(f),offset:m.offset+f})}}}return e}function Tf(t,e,n){let r,s,a,l,u,f;if("themes"in n){const{defaultColor:h="light",cssVariablePrefix:m="--shiki-",colorsRendering:p="css-vars"}=n,_=Object.entries(n.themes).filter(S=>S[1]).map(S=>({color:S[0],theme:S[1]})).sort((S,T)=>S.color===h?-1:T.color===h?1:0);if(_.length===0)throw new jt("`themes` option must not be empty");const g=pE(t,e,n);if(f=jl(g),h&&ky!==h&&!_.find(S=>S.color===h))throw new jt(`\`themes\` option must contain the defaultColor key \`${h}\``);const v=_.map(S=>t.getTheme(S.theme)),x=_.map(S=>S.color);a=g.map(S=>S.map(T=>bj(T,x,m,h,p))),f&&th(a,f);const k=_.map(S=>kf(S.theme,n));s=Jw(_,v,k,m,h,"fg",p),r=Jw(_,v,k,m,h,"bg",p),l=`shiki-themes ${v.map(S=>S.name).join(" ")}`,u=h?void 0:[s,r].join(";")}else if("theme"in n){const h=kf(n.theme,n);a=Ey(t,e,n);const m=t.getTheme(n.theme);r=Js(m.bg,h),s=Js(m.fg,h),l=m.name,f=jl(a)}else throw new jt("Invalid options, either `theme` or `themes` must be provided");return{tokens:a,fg:s,bg:r,themeName:l,rootStyle:u,grammarState:f}}function Jw(t,e,n,r,s,a,l){return t.map((u,f)=>{const h=Js(e[f][a],n[f])||"inherit",m=`${r+u.color}${a==="bg"?"-bg":""}:${h}`;if(f===0&&s){if(s===ky&&t.length>1){const p=t.findIndex(x=>x.color==="light"),_=t.findIndex(x=>x.color==="dark");if(p===-1||_===-1)throw new jt('When using `defaultColor: "light-dark()"`, you must provide both `light` and `dark` themes');const g=Js(e[p][a],n[p])||"inherit",v=Js(e[_][a],n[_])||"inherit";return`light-dark(${g}, ${v});${m}`}return h}return l==="css-vars"?m:null}).filter(u=>!!u).join(";")}function Af(t,e,n,r={meta:{},options:n,codeToHast:(s,a)=>Af(t,s,a),codeToTokens:(s,a)=>Tf(t,s,a)}){let s=e;for(const v of Cf(n))s=v.preprocess?.call(r,s,n)||s;let{tokens:a,fg:l,bg:u,themeName:f,rootStyle:h,grammarState:m}=Tf(t,s,n);const{mergeWhitespaces:p=!0,mergeSameStyleTokens:_=!1}=n;p===!0?a=qj(a):p==="never"&&(a=Fj(a)),_&&(a=Vj(a));const g={...r,get source(){return s}};for(const v of Cf(n))a=v.tokens?.call(g,a)||a;return $j(a,{...n,fg:l,bg:u,themeName:f,rootStyle:n.rootStyle===!1?!1:n.rootStyle??h},g,m)}function $j(t,e,n,r=jl(t)){const s=Cf(e),a=[],l={type:"root",children:[]},{structure:u="classic",tabindex:f="0"}=e,h={class:`shiki ${e.themeName||""}`};e.rootStyle!==!1&&(e.rootStyle!=null?h.style=e.rootStyle:h.style=`background-color:${e.bg};color:${e.fg}`),f!==!1&&f!=null&&(h.tabindex=f.toString());for(const[x,k]of Object.entries(e.meta||{}))x.startsWith("_")||(h[x]=k);let m={type:"element",tagName:"pre",properties:h,children:[]},p={type:"element",tagName:"code",properties:{},children:a};const _=[],g={...n,structure:u,addClassToHast:fE,get source(){return n.source},get tokens(){return t},get options(){return e},get root(){return l},get pre(){return m},get code(){return p},get lines(){return _}};if(t.forEach((x,k)=>{k&&(u==="inline"?l.children.push({type:"element",tagName:"br",properties:{},children:[]}):u==="classic"&&a.push({type:"text",value:`
`}));let S={type:"element",tagName:"span",properties:{class:"line"},children:[]},T=0;for(const C of x){let L={type:"element",tagName:"span",properties:{...C.htmlAttrs},children:[{type:"text",value:C.content}]};const D=vg(C.htmlStyle||Ef(C));D&&(L.properties.style=D);for(const I of s)L=I?.span?.call(g,L,k+1,T,S,C)||L;u==="inline"?l.children.push(L):u==="classic"&&S.children.push(L),T+=C.content.length}if(u==="classic"){for(const C of s)S=C?.line?.call(g,S,k+1)||S;_.push(S),a.push(S)}else u==="inline"&&_.push(S)}),u==="classic"){for(const x of s)p=x?.code?.call(g,p)||p;m.children.push(p);for(const x of s)m=x?.pre?.call(g,m)||m;l.children.push(m)}else if(u==="inline"){const x=[];let k={type:"element",tagName:"span",properties:{class:"line"},children:[]};for(const C of l.children)C.type==="element"&&C.tagName==="br"?(x.push(k),k={type:"element",tagName:"span",properties:{class:"line"},children:[]}):(C.type==="element"||C.type==="text")&&k.children.push(C);x.push(k);let T={type:"element",tagName:"code",properties:{},children:x};for(const C of s)T=C?.code?.call(g,T)||T;l.children=[];for(let C=0;C<T.children.length;C++){C>0&&l.children.push({type:"element",tagName:"br",properties:{},children:[]});const L=T.children[C];L.type==="element"&&l.children.push(...L.children)}}let v=l;for(const x of s)v=x?.root?.call(g,v)||v;return r&&th(v,r),v}function qj(t){return t.map(e=>{const n=[];let r="",s;return e.forEach((a,l)=>{const f=!(a.fontStyle&&(a.fontStyle&_n.Underline||a.fontStyle&_n.Strikethrough));f&&a.content.match(/^\s+$/)&&e[l+1]?(s===void 0&&(s=a.offset),r+=a.content):r?(f?n.push({...a,offset:s,content:r+a.content}):n.push({content:r,offset:s},a),s=void 0,r=""):n.push(a)}),n})}function Fj(t){return t.map(e=>e.flatMap(n=>{if(n.content.match(/^\s+$/))return n;const r=n.content.match(/^(\s*)(.*?)(\s*)$/);if(!r)return n;const[,s,a,l]=r;if(!s&&!l)return n;const u=[{...n,offset:n.offset+s.length,content:a}];return s&&u.unshift({content:s,offset:n.offset}),l&&u.push({content:l,offset:n.offset+s.length+a.length}),u}))}function Vj(t){return t.map(e=>{const n=[];for(const r of e){if(n.length===0){n.push({...r});continue}const s=n[n.length-1],a=vg(s.htmlStyle||Ef(s)),l=vg(r.htmlStyle||Ef(r)),u=s.fontStyle&&(s.fontStyle&_n.Underline||s.fontStyle&_n.Strikethrough),f=r.fontStyle&&(r.fontStyle&_n.Underline||r.fontStyle&_n.Strikethrough);!u&&!f&&a===l?s.content+=r.content:n.push({...r})}return n})}const Hj=uj;function Gj(t,e,n){const r={meta:{},options:n,codeToHast:(a,l)=>Af(t,a,l),codeToTokens:(a,l)=>Tf(t,a,l)};let s=Hj(Af(t,e,n,r));for(const a of Cf(n))s=a.postprocess?.call(r,s,n)||s;return s}const Yw={light:"#333333",dark:"#bbbbbb"},Xw={light:"#fffffe",dark:"#1e1e1e"},Ww="__shiki_resolved";function Ty(t){if(t?.[Ww])return t;const e={...t};e.tokenColors&&!e.settings&&(e.settings=e.tokenColors,delete e.tokenColors),e.type||="dark",e.colorReplacements={...e.colorReplacements},e.settings||=[];let{bg:n,fg:r}=e;if(!n||!r){const u=e.settings?e.settings.find(f=>!f.name&&!f.scope):void 0;u?.settings?.foreground&&(r=u.settings.foreground),u?.settings?.background&&(n=u.settings.background),!r&&e?.colors?.["editor.foreground"]&&(r=e.colors["editor.foreground"]),!n&&e?.colors?.["editor.background"]&&(n=e.colors["editor.background"]),r||(r=e.type==="light"?Yw.light:Yw.dark),n||(n=e.type==="light"?Xw.light:Xw.dark),e.fg=r,e.bg=n}e.settings[0]&&e.settings[0].settings&&!e.settings[0].scope||e.settings.unshift({settings:{foreground:e.fg,background:e.bg}});let s=0;const a=new Map;function l(u){if(a.has(u))return a.get(u);s+=1;const f=`#${s.toString(16).padStart(8,"0").toLowerCase()}`;return e.colorReplacements?.[`#${f}`]?l(u):(a.set(u,f),f)}e.settings=e.settings.map(u=>{const f=u.settings?.foreground&&!u.settings.foreground.startsWith("#"),h=u.settings?.background&&!u.settings.background.startsWith("#");if(!f&&!h)return u;const m={...u,settings:{...u.settings}};if(f){const p=l(u.settings.foreground);e.colorReplacements[p]=u.settings.foreground,m.settings.foreground=p}if(h){const p=l(u.settings.background);e.colorReplacements[p]=u.settings.background,m.settings.background=p}return m});for(const u of Object.keys(e.colors||{}))if((u==="editor.foreground"||u==="editor.background"||u.startsWith("terminal.ansi"))&&!e.colors[u]?.startsWith("#")){const f=l(e.colors[u]);e.colorReplacements[f]=e.colors[u],e.colors[u]=f}return Object.defineProperty(e,Ww,{enumerable:!1,writable:!1,value:!0}),e}async function mE(t){return Array.from(new Set((await Promise.all(t.filter(e=>!cE(e)).map(async e=>await lE(e).then(n=>Array.isArray(n)?n:[n])))).flat()))}async function gE(t){return(await Promise.all(t.map(async n=>uE(n)?null:Ty(await lE(n))))).filter(n=>!!n)}let Kj=3;function Zj(t,e=3){e>Kj||console.trace(`[SHIKI DEPRECATE]: ${t}`)}let Da=class extends Error{constructor(e){super(e),this.name="ShikiError"}};function yE(t,e){if(!e)return t;if(e[t]){const n=new Set([t]);for(;e[t];){if(t=e[t],n.has(t))throw new Da(`Circular alias \`${Array.from(n).join(" -> ")} -> ${t}\``);n.add(t)}}return t}class Qj extends W3{constructor(e,n,r,s={}){super(e),this._resolver=e,this._themes=n,this._langs=r,this._alias=s,this._themes.map(a=>this.loadTheme(a)),this.loadLanguages(this._langs)}_resolvedThemes=new Map;_resolvedGrammars=new Map;_langMap=new Map;_langGraph=new Map;_textmateThemeCache=new WeakMap;_loadedThemesCache=null;_loadedLanguagesCache=null;getTheme(e){return typeof e=="string"?this._resolvedThemes.get(e):this.loadTheme(e)}loadTheme(e){const n=Ty(e);return n.name&&(this._resolvedThemes.set(n.name,n),this._loadedThemesCache=null),n}getLoadedThemes(){return this._loadedThemesCache||(this._loadedThemesCache=[...this._resolvedThemes.keys()]),this._loadedThemesCache}setTheme(e){let n=this._textmateThemeCache.get(e);n||(n=_f.createFromRawTheme(e),this._textmateThemeCache.set(e,n)),this._syncRegistry.setTheme(n)}getGrammar(e){return e=yE(e,this._alias),this._resolvedGrammars.get(e)}loadLanguage(e){if(this.getGrammar(e.name))return;const n=new Set([...this._langMap.values()].filter(a=>a.embeddedLangsLazy?.includes(e.name)));this._resolver.addLanguage(e);const r={balancedBracketSelectors:e.balancedBracketSelectors||["*"],unbalancedBracketSelectors:e.unbalancedBracketSelectors||[]};this._syncRegistry._rawGrammars.set(e.scopeName,e);const s=this.loadGrammarWithConfiguration(e.scopeName,1,r);if(s.name=e.name,this._resolvedGrammars.set(e.name,s),e.aliases&&e.aliases.forEach(a=>{this._alias[a]=e.name}),this._loadedLanguagesCache=null,n.size)for(const a of n)this._resolvedGrammars.delete(a.name),this._loadedLanguagesCache=null,this._syncRegistry?._injectionGrammars?.delete(a.scopeName),this._syncRegistry?._grammars?.delete(a.scopeName),this.loadLanguage(this._langMap.get(a.name))}dispose(){super.dispose(),this._resolvedThemes.clear(),this._resolvedGrammars.clear(),this._langMap.clear(),this._langGraph.clear(),this._loadedThemesCache=null}loadLanguages(e){for(const s of e)this.resolveEmbeddedLanguages(s);const n=Array.from(this._langGraph.entries()),r=n.filter(([s,a])=>!a);if(r.length){const s=n.filter(([a,l])=>l?(l.embeddedLanguages||l.embeddedLangs)?.some(f=>r.map(([h])=>h).includes(f)):!1).filter(a=>!r.includes(a));throw new Da(`Missing languages ${r.map(([a])=>`\`${a}\``).join(", ")}, required by ${s.map(([a])=>`\`${a}\``).join(", ")}`)}for(const[s,a]of n)this._resolver.addLanguage(a);for(const[s,a]of n)this.loadLanguage(a)}getLoadedLanguages(){return this._loadedLanguagesCache||(this._loadedLanguagesCache=[...new Set([...this._resolvedGrammars.keys(),...Object.keys(this._alias)])]),this._loadedLanguagesCache}resolveEmbeddedLanguages(e){this._langMap.set(e.name,e),this._langGraph.set(e.name,e);const n=e.embeddedLanguages??e.embeddedLangs;if(n)for(const r of n)this._langGraph.set(r,this._langMap.get(r))}}class Jj{_langs=new Map;_scopeToLang=new Map;_injections=new Map;_onigLib;constructor(e,n){this._onigLib={createOnigScanner:r=>e.createScanner(r),createOnigString:r=>e.createString(r)},n.forEach(r=>this.addLanguage(r))}get onigLib(){return this._onigLib}getLangRegistration(e){return this._langs.get(e)}loadGrammar(e){return this._scopeToLang.get(e)}addLanguage(e){this._langs.set(e.name,e),e.aliases&&e.aliases.forEach(n=>{this._langs.set(n,e)}),this._scopeToLang.set(e.scopeName,e),e.injectTo&&e.injectTo.forEach(n=>{this._injections.get(n)||this._injections.set(n,[]),this._injections.get(n).push(e.scopeName)})}getInjections(e){const n=e.split(".");let r=[];for(let s=1;s<=n.length;s++){const a=n.slice(0,s).join(".");r=[...r,...this._injections.get(a)||[]]}return r}}let Jo=0;function Yj(t){Jo+=1,t.warnings!==!1&&Jo>=10&&Jo%10===0&&console.warn(`[Shiki] ${Jo} instances have been created. Shiki is supposed to be used as a singleton, consider refactoring your code to cache your highlighter instance; Or call \`highlighter.dispose()\` to release unused instances.`);let e=!1;if(!t.engine)throw new Da("`engine` option is required for synchronous mode");const n=(t.langs||[]).flat(1),r=(t.themes||[]).flat(1).map(Ty),s=new Jj(t.engine,n),a=new Qj(s,r,n,t.langAlias);let l;function u(C){return yE(C,t.langAlias)}function f(C){S();const L=a.getGrammar(typeof C=="string"?C:C.name);if(!L)throw new Da(`Language \`${C}\` not found, you may need to load it first`);return L}function h(C){if(C==="none")return{bg:"",fg:"",name:"none",settings:[],type:"dark"};S();const L=a.getTheme(C);if(!L)throw new Da(`Theme \`${C}\` not found, you may need to load it first`);return L}function m(C){S();const L=h(C);l!==C&&(a.setTheme(L),l=C);const D=a.getColorMap();return{theme:L,colorMap:D}}function p(){return S(),a.getLoadedThemes()}function _(){return S(),a.getLoadedLanguages()}function g(...C){S(),a.loadLanguages(C.flat(1))}async function v(...C){return g(await mE(C))}function x(...C){S();for(const L of C.flat(1))a.loadTheme(L)}async function k(...C){return S(),x(await gE(C))}function S(){if(e)throw new Da("Shiki instance has been disposed")}function T(){e||(e=!0,a.dispose(),Jo-=1)}return{setTheme:m,getTheme:h,getLanguage:f,getLoadedThemes:p,getLoadedLanguages:_,resolveLangAlias:u,loadLanguage:v,loadLanguageSync:g,loadTheme:k,loadThemeSync:x,dispose:T,[Symbol.dispose]:T}}async function Xj(t){t.engine||Zj("`engine` option is required. Use `createOnigurumaEngine` or `createJavaScriptRegexEngine` to create an engine.");const[e,n,r]=await Promise.all([gE(t.themes||[]),mE(t.langs||[]),t.engine]);return Yj({...t,themes:e,langs:n,engine:r})}async function Wj(t){const e=await Xj(t);return{getLastGrammarState:(...n)=>Dj(e,...n),codeToTokensBase:(n,r)=>Ey(e,n,r),codeToTokensWithThemes:(n,r)=>pE(e,n,r),codeToTokens:(n,r)=>Tf(e,n,r),codeToHast:(n,r)=>Af(e,n,r),codeToHtml:(n,r)=>Gj(e,n,r),getBundledLanguages:()=>({}),getBundledThemes:()=>({}),...e,getInternalContext:()=>e}}function e5(t){const e=t.langs,n=t.themes,r=t.engine;async function s(a){function l(p){if(typeof p=="string"){if(p=a.langAlias?.[p]||p,cE(p))return[];const _=e[p];if(!_)throw new jt(`Language \`${p}\` is not included in this bundle. You may want to load it from external source.`);return _}return p}function u(p){if(uE(p))return"none";if(typeof p=="string"){const _=n[p];if(!_)throw new jt(`Theme \`${p}\` is not included in this bundle. You may want to load it from external source.`);return _}return p}const f=(a.themes??[]).map(p=>u(p)),h=(a.langs??[]).map(p=>l(p)),m=await Wj({engine:a.engine??r(),...a,themes:f,langs:h});return{...m,loadLanguage(...p){return m.loadLanguage(...p.map(l))},loadTheme(...p){return m.loadTheme(...p.map(u))},getBundledLanguages(){return e},getBundledThemes(){return n}}}return s}function t5(t){let e;async function n(r={}){if(e){const s=await e;return await Promise.all([s.loadTheme(...r.themes||[]),s.loadLanguage(...r.langs||[])]),s}else{e=t({...r,themes:[],langs:[]});const s=await e;return await Promise.all([s.loadTheme(...r.themes||[]),s.loadLanguage(...r.langs||[])]),s}}return n}function n5(t,e){const n=t5(t);async function r(s,a){const l=await n({langs:[a.lang],themes:"theme"in a?[a.theme]:Object.values(a.themes)}),u=await e?.guessEmbeddedLanguages?.(s,a.lang,l);return u&&await l.loadLanguage(...u),l}return{getSingletonHighlighter(s){return n(s)},async codeToHtml(s,a){return(await r(s,a)).codeToHtml(s,a)},async codeToHast(s,a){return(await r(s,a)).codeToHast(s,a)},async codeToTokens(s,a){return(await r(s,a)).codeToTokens(s,a)},async codeToTokensBase(s,a){return(await r(s,a)).codeToTokensBase(s,a)},async codeToTokensWithThemes(s,a){return(await r(s,a)).codeToTokensWithThemes(s,a)},async getLastGrammarState(s,a){return(await n({langs:[a.lang],themes:[a.theme]})).getLastGrammarState(s,a)}}}const _E=[{id:"abap",name:"ABAP",import:(()=>M(()=>import("./abap-BdImnpbu.js"),[]))},{id:"actionscript-3",name:"ActionScript",import:(()=>M(()=>import("./actionscript-3-CfeIJUat.js"),[]))},{id:"ada",name:"Ada",import:(()=>M(()=>import("./ada-bCR0ucgS.js"),[]))},{id:"angular-html",name:"Angular HTML",import:(()=>M(()=>import("./angular-html-CU67Zn6k.js").then(t=>t.f),__vite__mapDeps([0,1,2,3])))},{id:"angular-ts",name:"Angular TypeScript",import:(()=>M(()=>import("./angular-ts-BwZT4LLn.js"),__vite__mapDeps([4,0,1,2,3,5])))},{id:"apache",name:"Apache Conf",import:(()=>M(()=>import("./apache-Pmp26Uib.js"),[]))},{id:"apex",name:"Apex",import:(()=>M(()=>import("./apex-DDbsPZ6N.js"),[]))},{id:"apl",name:"APL",import:(()=>M(()=>import("./apl-dKokRX4l.js"),__vite__mapDeps([6,1,2,3,7,8,9])))},{id:"applescript",name:"AppleScript",import:(()=>M(()=>import("./applescript-Co6uUVPk.js"),[]))},{id:"ara",name:"Ara",import:(()=>M(()=>import("./ara-BRHolxvo.js"),[]))},{id:"asciidoc",name:"AsciiDoc",aliases:["adoc"],import:(()=>M(()=>import("./asciidoc-Dv7Oe6Be.js"),[]))},{id:"asm",name:"Assembly",import:(()=>M(()=>import("./asm-D_Q5rh1f.js"),[]))},{id:"astro",name:"Astro",import:(()=>M(()=>import("./astro-CbQHKStN.js"),__vite__mapDeps([10,9,2,11,3,12,13])))},{id:"awk",name:"AWK",import:(()=>M(()=>import("./awk-DMzUqQB5.js"),[]))},{id:"ballerina",name:"Ballerina",import:(()=>M(()=>import("./ballerina-BFfxhgS-.js"),[]))},{id:"bat",name:"Batch File",aliases:["batch"],import:(()=>M(()=>import("./bat-BkioyH1T.js"),[]))},{id:"beancount",name:"Beancount",import:(()=>M(()=>import("./beancount-k_qm7-4y.js"),[]))},{id:"berry",name:"Berry",aliases:["be"],import:(()=>M(()=>import("./berry-uYugtg8r.js"),[]))},{id:"bibtex",name:"BibTeX",import:(()=>M(()=>import("./bibtex-CHM0blh-.js"),[]))},{id:"bicep",name:"Bicep",import:(()=>M(()=>import("./bicep-Bmn6On1c.js"),[]))},{id:"blade",name:"Blade",import:(()=>M(()=>import("./blade-DVc8C-J4.js"),__vite__mapDeps([14,15,1,2,3,7,8,16,9])))},{id:"bsl",name:"1C (Enterprise)",aliases:["1c"],import:(()=>M(()=>import("./bsl-BO_Y6i37.js"),__vite__mapDeps([17,18])))},{id:"c",name:"C",import:(()=>M(()=>import("./c-BIGW1oBm.js"),[]))},{id:"cadence",name:"Cadence",aliases:["cdc"],import:(()=>M(()=>import("./cadence-Bv_4Rxtq.js"),[]))},{id:"cairo",name:"Cairo",import:(()=>M(()=>import("./cairo-KRGpt6FW.js"),__vite__mapDeps([19,20])))},{id:"clarity",name:"Clarity",import:(()=>M(()=>import("./clarity-D53aC0YG.js"),[]))},{id:"clojure",name:"Clojure",aliases:["clj"],import:(()=>M(()=>import("./clojure-P80f7IUj.js"),[]))},{id:"cmake",name:"CMake",import:(()=>M(()=>import("./cmake-D1j8_8rp.js"),[]))},{id:"cobol",name:"COBOL",import:(()=>M(()=>import("./cobol-nwyudZeR.js"),__vite__mapDeps([21,1,2,3,8])))},{id:"codeowners",name:"CODEOWNERS",import:(()=>M(()=>import("./codeowners-Bp6g37R7.js"),[]))},{id:"codeql",name:"CodeQL",aliases:["ql"],import:(()=>M(()=>import("./codeql-DsOJ9woJ.js"),[]))},{id:"coffee",name:"CoffeeScript",aliases:["coffeescript"],import:(()=>M(()=>import("./coffee-Ch7k5sss.js"),__vite__mapDeps([22,2])))},{id:"common-lisp",name:"Common Lisp",aliases:["lisp"],import:(()=>M(()=>import("./common-lisp-Cg-RD9OK.js"),[]))},{id:"coq",name:"Coq",import:(()=>M(()=>import("./coq-DkFqJrB1.js"),[]))},{id:"cpp",name:"C++",aliases:["c++"],import:(()=>M(()=>import("./cpp-CofmeUqb.js"),__vite__mapDeps([23,24,25,26,16])))},{id:"crystal",name:"Crystal",import:(()=>M(()=>import("./crystal-tKQVLTB8.js"),__vite__mapDeps([27,1,2,3,16,26,28])))},{id:"csharp",name:"C#",aliases:["c#","cs"],import:(()=>M(()=>import("./csharp-K5feNrxe.js"),[]))},{id:"css",name:"CSS",import:(()=>M(()=>import("./css-DPfMkruS.js"),[]))},{id:"csv",name:"CSV",import:(()=>M(()=>import("./csv-fuZLfV_i.js"),[]))},{id:"cue",name:"CUE",import:(()=>M(()=>import("./cue-D82EKSYY.js"),[]))},{id:"cypher",name:"Cypher",aliases:["cql"],import:(()=>M(()=>import("./cypher-COkxafJQ.js"),[]))},{id:"d",name:"D",import:(()=>M(()=>import("./d-85-TOEBH.js"),[]))},{id:"dart",name:"Dart",import:(()=>M(()=>import("./dart-CF10PKvl.js"),[]))},{id:"dax",name:"DAX",import:(()=>M(()=>import("./dax-CEL-wOlO.js"),[]))},{id:"desktop",name:"Desktop",import:(()=>M(()=>import("./desktop-BmXAJ9_W.js"),[]))},{id:"diff",name:"Diff",import:(()=>M(()=>import("./diff-D97Zzqfu.js"),[]))},{id:"docker",name:"Dockerfile",aliases:["dockerfile"],import:(()=>M(()=>import("./docker-BcOcwvcX.js"),[]))},{id:"dotenv",name:"dotEnv",import:(()=>M(()=>import("./dotenv-Da5cRb03.js"),[]))},{id:"dream-maker",name:"Dream Maker",import:(()=>M(()=>import("./dream-maker-BtqSS_iP.js"),[]))},{id:"edge",name:"Edge",import:(()=>M(()=>import("./edge-BkV0erSs.js"),__vite__mapDeps([29,11,1,2,3,15])))},{id:"elixir",name:"Elixir",import:(()=>M(()=>import("./elixir-CDX3lj18.js"),__vite__mapDeps([30,1,2,3])))},{id:"elm",name:"Elm",import:(()=>M(()=>import("./elm-DbKCFpqz.js"),__vite__mapDeps([31,25,26])))},{id:"emacs-lisp",name:"Emacs Lisp",aliases:["elisp"],import:(()=>M(()=>import("./emacs-lisp-C9XAeP06.js"),[]))},{id:"erb",name:"ERB",import:(()=>M(()=>import("./erb-BOJIQeun.js"),__vite__mapDeps([32,1,2,3,33,34,7,8,16,35,11,36,13,23,24,25,26,28,37,38])))},{id:"erlang",name:"Erlang",aliases:["erl"],import:(()=>M(()=>import("./erlang-DsQrWhSR.js"),__vite__mapDeps([39,40])))},{id:"fennel",name:"Fennel",import:(()=>M(()=>import("./fennel-BYunw83y.js"),[]))},{id:"fish",name:"Fish",import:(()=>M(()=>import("./fish-BvzEVeQv.js"),[]))},{id:"fluent",name:"Fluent",aliases:["ftl"],import:(()=>M(()=>import("./fluent-C4IJs8-o.js"),[]))},{id:"fortran-fixed-form",name:"Fortran (Fixed Form)",aliases:["f","for","f77"],import:(()=>M(()=>import("./fortran-fixed-form-BZjJHVRy.js"),__vite__mapDeps([41,42])))},{id:"fortran-free-form",name:"Fortran (Free Form)",aliases:["f90","f95","f03","f08","f18"],import:(()=>M(()=>import("./fortran-free-form-D22FLkUw.js"),[]))},{id:"fsharp",name:"F#",aliases:["f#","fs"],import:(()=>M(()=>import("./fsharp-CXgrBDvD.js"),__vite__mapDeps([43,40])))},{id:"gdresource",name:"GDResource",import:(()=>M(()=>import("./gdresource-B7Tvp0Sc.js"),__vite__mapDeps([44,45,46])))},{id:"gdscript",name:"GDScript",import:(()=>M(()=>import("./gdscript-DTMYz4Jt.js"),[]))},{id:"gdshader",name:"GDShader",import:(()=>M(()=>import("./gdshader-DkwncUOv.js"),[]))},{id:"genie",name:"Genie",import:(()=>M(()=>import("./genie-D0YGMca9.js"),[]))},{id:"gherkin",name:"Gherkin",import:(()=>M(()=>import("./gherkin-DyxjwDmM.js"),[]))},{id:"git-commit",name:"Git Commit Message",import:(()=>M(()=>import("./git-commit-F4YmCXRG.js"),__vite__mapDeps([47,48])))},{id:"git-rebase",name:"Git Rebase Message",import:(()=>M(()=>import("./git-rebase-r7XF79zn.js"),__vite__mapDeps([49,28])))},{id:"gleam",name:"Gleam",import:(()=>M(()=>import("./gleam-BspZqrRM.js"),[]))},{id:"glimmer-js",name:"Glimmer JS",aliases:["gjs"],import:(()=>M(()=>import("./glimmer-js-Rg0-pVw9.js"),__vite__mapDeps([50,2,11,3,1])))},{id:"glimmer-ts",name:"Glimmer TS",aliases:["gts"],import:(()=>M(()=>import("./glimmer-ts-U6CK756n.js"),__vite__mapDeps([51,11,3,2,1])))},{id:"glsl",name:"GLSL",import:(()=>M(()=>import("./glsl-DplSGwfg.js"),__vite__mapDeps([25,26])))},{id:"gnuplot",name:"Gnuplot",import:(()=>M(()=>import("./gnuplot-DdkO51Og.js"),[]))},{id:"go",name:"Go",import:(()=>M(()=>import("./go-Dn2_MT6a.js"),[]))},{id:"graphql",name:"GraphQL",aliases:["gql"],import:(()=>M(()=>import("./graphql-ChdNCCLP.js"),__vite__mapDeps([35,2,11,36,13])))},{id:"groovy",name:"Groovy",import:(()=>M(()=>import("./groovy-gcz8RCvz.js"),[]))},{id:"hack",name:"Hack",import:(()=>M(()=>import("./hack-CaT9iCJl.js"),__vite__mapDeps([52,1,2,3,16])))},{id:"haml",name:"Ruby Haml",import:(()=>M(()=>import("./haml-B8DHNrY2.js"),__vite__mapDeps([34,2,3])))},{id:"handlebars",name:"Handlebars",aliases:["hbs"],import:(()=>M(()=>import("./handlebars-BL8al0AC.js"),__vite__mapDeps([53,1,2,3,38])))},{id:"haskell",name:"Haskell",aliases:["hs"],import:(()=>M(()=>import("./haskell-Df6bDoY_.js"),[]))},{id:"haxe",name:"Haxe",import:(()=>M(()=>import("./haxe-CzTSHFRz.js"),[]))},{id:"hcl",name:"HashiCorp HCL",import:(()=>M(()=>import("./hcl-BWvSN4gD.js"),[]))},{id:"hjson",name:"Hjson",import:(()=>M(()=>import("./hjson-D5-asLiD.js"),[]))},{id:"hlsl",name:"HLSL",import:(()=>M(()=>import("./hlsl-D3lLCCz7.js"),[]))},{id:"html",name:"HTML",import:(()=>M(()=>import("./html-GMplVEZG.js"),__vite__mapDeps([1,2,3])))},{id:"html-derivative",name:"HTML (Derivative)",import:(()=>M(()=>import("./html-derivative-BFtXZ54Q.js"),__vite__mapDeps([15,1,2,3])))},{id:"http",name:"HTTP",import:(()=>M(()=>import("./http-jrhK8wxY.js"),__vite__mapDeps([54,28,9,7,8,35,2,11,36,13])))},{id:"hurl",name:"Hurl",import:(()=>M(()=>import("./hurl-irOxFIW8.js"),__vite__mapDeps([55,35,2,11,36,13,7,8,56])))},{id:"hxml",name:"HXML",import:(()=>M(()=>import("./hxml-Bvhsp5Yf.js"),__vite__mapDeps([57,58])))},{id:"hy",name:"Hy",import:(()=>M(()=>import("./hy-DFXneXwc.js"),[]))},{id:"imba",name:"Imba",import:(()=>M(()=>import("./imba-DGztddWO.js"),[]))},{id:"ini",name:"INI",aliases:["properties"],import:(()=>M(()=>import("./ini-BEwlwnbL.js"),[]))},{id:"java",name:"Java",import:(()=>M(()=>import("./java-CylS5w8V.js"),[]))},{id:"javascript",name:"JavaScript",aliases:["js","cjs","mjs"],import:(()=>M(()=>import("./javascript-wDzz0qaB.js"),[]))},{id:"jinja",name:"Jinja",import:(()=>M(()=>import("./jinja-4LBKfQ-Z.js"),__vite__mapDeps([59,1,2,3])))},{id:"jison",name:"Jison",import:(()=>M(()=>import("./jison-wvAkD_A8.js"),__vite__mapDeps([60,2])))},{id:"json",name:"JSON",import:(()=>M(()=>import("./json-Cp-IABpG.js"),[]))},{id:"json5",name:"JSON5",import:(()=>M(()=>import("./json5-C9tS-k6U.js"),[]))},{id:"jsonc",name:"JSON with Comments",import:(()=>M(()=>import("./jsonc-Des-eS-w.js"),[]))},{id:"jsonl",name:"JSON Lines",import:(()=>M(()=>import("./jsonl-DcaNXYhu.js"),[]))},{id:"jsonnet",name:"Jsonnet",import:(()=>M(()=>import("./jsonnet-DFQXde-d.js"),[]))},{id:"jssm",name:"JSSM",aliases:["fsl"],import:(()=>M(()=>import("./jssm-C2t-YnRu.js"),[]))},{id:"jsx",name:"JSX",import:(()=>M(()=>import("./jsx-g9-lgVsj.js"),[]))},{id:"julia",name:"Julia",aliases:["jl"],import:(()=>M(()=>import("./julia-C8NyazO9.js"),__vite__mapDeps([61,23,24,25,26,16,20,2,62])))},{id:"kdl",name:"KDL",import:(()=>M(()=>import("./kdl-DV7GczEv.js"),[]))},{id:"kotlin",name:"Kotlin",aliases:["kt","kts"],import:(()=>M(()=>import("./kotlin-BdnUsdx6.js"),[]))},{id:"kusto",name:"Kusto",aliases:["kql"],import:(()=>M(()=>import("./kusto-BvAqAH-y.js"),[]))},{id:"latex",name:"LaTeX",import:(()=>M(()=>import("./latex-BdAV_C_H.js"),__vite__mapDeps([63,64,62])))},{id:"lean",name:"Lean 4",aliases:["lean4"],import:(()=>M(()=>import("./lean-Bc6EcWN3.js"),[]))},{id:"less",name:"Less",import:(()=>M(()=>import("./less-B1dDrJ26.js"),[]))},{id:"liquid",name:"Liquid",import:(()=>M(()=>import("./liquid-DYVedYrR.js"),__vite__mapDeps([65,1,2,3,9])))},{id:"llvm",name:"LLVM IR",import:(()=>M(()=>import("./llvm-BtvRca6l.js"),[]))},{id:"log",name:"Log file",import:(()=>M(()=>import("./log-2UxHyX5q.js"),[]))},{id:"logo",name:"Logo",import:(()=>M(()=>import("./logo-BtOb2qkB.js"),[]))},{id:"lua",name:"Lua",import:(()=>M(()=>import("./lua-BbnMAYS6.js"),__vite__mapDeps([37,26])))},{id:"luau",name:"Luau",import:(()=>M(()=>import("./luau-CXu1NL6O.js"),[]))},{id:"make",name:"Makefile",aliases:["makefile"],import:(()=>M(()=>import("./make-CHLpvVh8.js"),[]))},{id:"markdown",name:"Markdown",aliases:["md"],import:(()=>M(()=>import("./markdown-Cvjx9yec.js"),[]))},{id:"marko",name:"Marko",import:(()=>M(()=>import("./marko-CPi9NSCl.js"),__vite__mapDeps([66,3,67,5,11])))},{id:"matlab",name:"MATLAB",import:(()=>M(()=>import("./matlab-D7o27uSR.js"),[]))},{id:"mdc",name:"MDC",import:(()=>M(()=>import("./mdc-DUICxH0z.js"),__vite__mapDeps([68,40,38,15,1,2,3])))},{id:"mdx",name:"MDX",import:(()=>M(()=>import("./mdx-Cmh6b_Ma.js"),[]))},{id:"mermaid",name:"Mermaid",aliases:["mmd"],import:(()=>M(()=>import("./mermaid-DKYwYmdq.js"),[]))},{id:"mipsasm",name:"MIPS Assembly",aliases:["mips"],import:(()=>M(()=>import("./mipsasm-CKIfxQSi.js"),[]))},{id:"mojo",name:"Mojo",import:(()=>M(()=>import("./mojo-1DNp92w6.js"),[]))},{id:"move",name:"Move",import:(()=>M(()=>import("./move-Bu9oaDYs.js"),[]))},{id:"narrat",name:"Narrat Language",aliases:["nar"],import:(()=>M(()=>import("./narrat-DRg8JJMk.js"),[]))},{id:"nextflow",name:"Nextflow",aliases:["nf"],import:(()=>M(()=>import("./nextflow-BrzmwbiE.js"),[]))},{id:"nginx",name:"Nginx",import:(()=>M(()=>import("./nginx-DknmC5AR.js"),__vite__mapDeps([69,37,26])))},{id:"nim",name:"Nim",import:(()=>M(()=>import("./nim-CVrawwO9.js"),__vite__mapDeps([70,26,1,2,3,7,8,25,40])))},{id:"nix",name:"Nix",import:(()=>M(()=>import("./nix-c8nO5XWb.js"),[]))},{id:"nushell",name:"nushell",aliases:["nu"],import:(()=>M(()=>import("./nushell-C-sUppwS.js"),[]))},{id:"objective-c",name:"Objective-C",aliases:["objc"],import:(()=>M(()=>import("./objective-c-DXmwc3jG.js"),[]))},{id:"objective-cpp",name:"Objective-C++",import:(()=>M(()=>import("./objective-cpp-CLxacb5B.js"),[]))},{id:"ocaml",name:"OCaml",import:(()=>M(()=>import("./ocaml-C0hk2d4L.js"),[]))},{id:"openscad",name:"OpenSCAD",aliases:["scad"],import:(()=>M(()=>import("./openscad-C4EeE6gA.js"),[]))},{id:"pascal",name:"Pascal",import:(()=>M(()=>import("./pascal-D93ZcfNL.js"),[]))},{id:"perl",name:"Perl",import:(()=>M(()=>import("./perl-C0TMdlhV.js"),__vite__mapDeps([71,1,2,3,7,8,16])))},{id:"php",name:"PHP",import:(()=>M(()=>import("./php-CDn_0X-4.js"),__vite__mapDeps([72,1,2,3,7,8,16,9])))},{id:"pkl",name:"Pkl",import:(()=>M(()=>import("./pkl-u5AG7uiY.js"),[]))},{id:"plsql",name:"PL/SQL",import:(()=>M(()=>import("./plsql-ChMvpjG-.js"),[]))},{id:"po",name:"Gettext PO",aliases:["pot","potx"],import:(()=>M(()=>import("./po-BTJTHyun.js"),[]))},{id:"polar",name:"Polar",import:(()=>M(()=>import("./polar-C0HS_06l.js"),[]))},{id:"postcss",name:"PostCSS",import:(()=>M(()=>import("./postcss-CXtECtnM.js"),[]))},{id:"powerquery",name:"PowerQuery",import:(()=>M(()=>import("./powerquery-CEu0bR-o.js"),[]))},{id:"powershell",name:"PowerShell",aliases:["ps","ps1"],import:(()=>M(()=>import("./powershell-Dpen1YoG.js"),[]))},{id:"prisma",name:"Prisma",import:(()=>M(()=>import("./prisma-Dd19v3D-.js"),[]))},{id:"prolog",name:"Prolog",import:(()=>M(()=>import("./prolog-CbFg5uaA.js"),[]))},{id:"proto",name:"Protocol Buffer 3",aliases:["protobuf"],import:(()=>M(()=>import("./proto-DyJlTyXw.js"),[]))},{id:"pug",name:"Pug",aliases:["jade"],import:(()=>M(()=>import("./pug-CGlum2m_.js"),__vite__mapDeps([73,2,3,1])))},{id:"puppet",name:"Puppet",import:(()=>M(()=>import("./puppet-BMWR74SV.js"),[]))},{id:"purescript",name:"PureScript",import:(()=>M(()=>import("./purescript-CklMAg4u.js"),[]))},{id:"python",name:"Python",aliases:["py"],import:(()=>M(()=>import("./python-B6aJPvgy.js"),[]))},{id:"qml",name:"QML",import:(()=>M(()=>import("./qml-3beO22l8.js"),__vite__mapDeps([74,2])))},{id:"qmldir",name:"QML Directory",import:(()=>M(()=>import("./qmldir-C8lEn-DE.js"),[]))},{id:"qss",name:"Qt Style Sheets",import:(()=>M(()=>import("./qss-IeuSbFQv.js"),[]))},{id:"r",name:"R",import:(()=>M(()=>import("./r-DiinP2Uv.js"),[]))},{id:"racket",name:"Racket",import:(()=>M(()=>import("./racket-BqYA7rlc.js"),[]))},{id:"raku",name:"Raku",aliases:["perl6"],import:(()=>M(()=>import("./raku-DXvB9xmW.js"),[]))},{id:"razor",name:"ASP.NET Razor",import:(()=>M(()=>import("./razor-CE9lU5zL.js"),__vite__mapDeps([75,1,2,3,76])))},{id:"reg",name:"Windows Registry Script",import:(()=>M(()=>import("./reg-C-SQnVFl.js"),[]))},{id:"regexp",name:"RegExp",aliases:["regex"],import:(()=>M(()=>import("./regexp-CDVJQ6XC.js"),[]))},{id:"rel",name:"Rel",import:(()=>M(()=>import("./rel-C3B-1QV4.js"),[]))},{id:"riscv",name:"RISC-V",import:(()=>M(()=>import("./riscv-BM1_JUlF.js"),[]))},{id:"rosmsg",name:"ROS Interface",import:(()=>M(()=>import("./rosmsg-BJDFO7_C.js"),[]))},{id:"rst",name:"reStructuredText",import:(()=>M(()=>import("./rst-B0xPkSld.js"),__vite__mapDeps([77,15,1,2,3,23,24,25,26,16,20,28,38,78,33,34,7,8,35,11,36,13,37])))},{id:"ruby",name:"Ruby",aliases:["rb"],import:(()=>M(()=>import("./ruby-BvKwtOVI.js"),__vite__mapDeps([33,1,2,3,34,7,8,16,35,11,36,13,23,24,25,26,28,37,38])))},{id:"rust",name:"Rust",aliases:["rs"],import:(()=>M(()=>import("./rust-B1yitclQ.js"),[]))},{id:"sas",name:"SAS",import:(()=>M(()=>import("./sas-cz2c8ADy.js"),__vite__mapDeps([79,16])))},{id:"sass",name:"Sass",import:(()=>M(()=>import("./sass-Cj5Yp3dK.js"),[]))},{id:"scala",name:"Scala",import:(()=>M(()=>import("./scala-C151Ov-r.js"),[]))},{id:"scheme",name:"Scheme",import:(()=>M(()=>import("./scheme-C98Dy4si.js"),[]))},{id:"scss",name:"SCSS",import:(()=>M(()=>import("./scss-OYdSNvt2.js"),__vite__mapDeps([5,3])))},{id:"sdbl",name:"1C (Query)",aliases:["1c-query"],import:(()=>M(()=>import("./sdbl-DVxCFoDh.js"),[]))},{id:"shaderlab",name:"ShaderLab",aliases:["shader"],import:(()=>M(()=>import("./shaderlab-Dg9Lc6iA.js"),__vite__mapDeps([80,81])))},{id:"shellscript",name:"Shell",aliases:["bash","sh","shell","zsh"],import:(()=>M(()=>import("./shellscript-Yzrsuije.js"),[]))},{id:"shellsession",name:"Shell Session",aliases:["console"],import:(()=>M(()=>import("./shellsession-BADoaaVG.js"),__vite__mapDeps([82,28])))},{id:"smalltalk",name:"Smalltalk",import:(()=>M(()=>import("./smalltalk-BERRCDM3.js"),[]))},{id:"solidity",name:"Solidity",import:(()=>M(()=>import("./solidity-rGO070M0.js"),[]))},{id:"soy",name:"Closure Templates",aliases:["closure-templates"],import:(()=>M(()=>import("./soy-Brmx7dQM.js"),__vite__mapDeps([83,1,2,3])))},{id:"sparql",name:"SPARQL",import:(()=>M(()=>import("./sparql-rVzFXLq3.js"),__vite__mapDeps([84,85])))},{id:"splunk",name:"Splunk Query Language",aliases:["spl"],import:(()=>M(()=>import("./splunk-BtCnVYZw.js"),[]))},{id:"sql",name:"SQL",import:(()=>M(()=>import("./sql-BLtJtn59.js"),[]))},{id:"ssh-config",name:"SSH Config",import:(()=>M(()=>import("./ssh-config-_ykCGR6B.js"),[]))},{id:"stata",name:"Stata",import:(()=>M(()=>import("./stata-BH5u7GGu.js"),__vite__mapDeps([86,16])))},{id:"stylus",name:"Stylus",aliases:["styl"],import:(()=>M(()=>import("./stylus-BEDo0Tqx.js"),[]))},{id:"svelte",name:"Svelte",import:(()=>M(()=>import("./svelte-3Dk4HxPD.js"),__vite__mapDeps([87,2,11,3,12])))},{id:"swift",name:"Swift",import:(()=>M(()=>import("./swift-Dg5xB15N.js"),[]))},{id:"system-verilog",name:"SystemVerilog",import:(()=>M(()=>import("./system-verilog-CnnmHF94.js"),[]))},{id:"systemd",name:"Systemd Units",import:(()=>M(()=>import("./systemd-4A_iFExJ.js"),[]))},{id:"talonscript",name:"TalonScript",aliases:["talon"],import:(()=>M(()=>import("./talonscript-CkByrt1z.js"),[]))},{id:"tasl",name:"Tasl",import:(()=>M(()=>import("./tasl-QIJgUcNo.js"),[]))},{id:"tcl",name:"Tcl",import:(()=>M(()=>import("./tcl-dwOrl1Do.js"),[]))},{id:"templ",name:"Templ",import:(()=>M(()=>import("./templ-W15q3VgB.js"),__vite__mapDeps([88,89,2,3])))},{id:"terraform",name:"Terraform",aliases:["tf","tfvars"],import:(()=>M(()=>import("./terraform-BETggiCN.js"),[]))},{id:"tex",name:"TeX",import:(()=>M(()=>import("./tex-CxkMU7Pf.js"),__vite__mapDeps([64,62])))},{id:"toml",name:"TOML",import:(()=>M(()=>import("./toml-vGWfd6FD.js"),[]))},{id:"ts-tags",name:"TypeScript with Tags",aliases:["lit"],import:(()=>M(()=>import("./ts-tags-zn1MmPIZ.js"),__vite__mapDeps([90,11,3,2,25,26,1,16,7,8])))},{id:"tsv",name:"TSV",import:(()=>M(()=>import("./tsv-B_m7g4N7.js"),[]))},{id:"tsx",name:"TSX",import:(()=>M(()=>import("./tsx-COt5Ahok.js"),[]))},{id:"turtle",name:"Turtle",import:(()=>M(()=>import("./turtle-BsS91CYL.js"),[]))},{id:"twig",name:"Twig",import:(()=>M(()=>import("./twig-CO9l9SDP.js"),__vite__mapDeps([91,3,2,5,72,1,7,8,16,9,20,33,34,35,11,36,13,23,24,25,26,28,37,38])))},{id:"typescript",name:"TypeScript",aliases:["ts","cts","mts"],import:(()=>M(()=>import("./typescript-BPQ3VLAy.js"),[]))},{id:"typespec",name:"TypeSpec",aliases:["tsp"],import:(()=>M(()=>import("./typespec-BGHnOYBU.js"),[]))},{id:"typst",name:"Typst",aliases:["typ"],import:(()=>M(()=>import("./typst-DHCkPAjA.js"),[]))},{id:"v",name:"V",import:(()=>M(()=>import("./v-BcVCzyr7.js"),[]))},{id:"vala",name:"Vala",import:(()=>M(()=>import("./vala-CsfeWuGM.js"),[]))},{id:"vb",name:"Visual Basic",aliases:["cmd"],import:(()=>M(()=>import("./vb-D17OF-Vu.js"),[]))},{id:"verilog",name:"Verilog",import:(()=>M(()=>import("./verilog-BQ8w6xss.js"),[]))},{id:"vhdl",name:"VHDL",import:(()=>M(()=>import("./vhdl-CeAyd5Ju.js"),[]))},{id:"viml",name:"Vim Script",aliases:["vim","vimscript"],import:(()=>M(()=>import("./viml-CJc9bBzg.js"),[]))},{id:"vue",name:"Vue",import:(()=>M(()=>import("./vue-DnHKYNfI.js"),__vite__mapDeps([92,3,2,11,9,15,1])))},{id:"vue-html",name:"Vue HTML",import:(()=>M(()=>import("./vue-html-CChd_i61.js"),__vite__mapDeps([93,92,3,2,11,9,15,1])))},{id:"vue-vine",name:"Vue Vine",import:(()=>M(()=>import("./vue-vine-8moa0y9V.js"),__vite__mapDeps([94,3,5,67,95,12,92,2,11,9,15,1])))},{id:"vyper",name:"Vyper",aliases:["vy"],import:(()=>M(()=>import("./vyper-CDx5xZoG.js"),[]))},{id:"wasm",name:"WebAssembly",import:(()=>M(()=>import("./wasm-MzD3tlZU.js"),[]))},{id:"wenyan",name:"Wenyan",aliases:[""],import:(()=>M(()=>import("./wenyan-BV7otONQ.js"),[]))},{id:"wgsl",name:"WGSL",import:(()=>M(()=>import("./wgsl-Dx-B1_4e.js"),[]))},{id:"wikitext",name:"Wikitext",aliases:["mediawiki","wiki"],import:(()=>M(()=>import("./wikitext-BhOHFoWU.js"),[]))},{id:"wit",name:"WebAssembly Interface Types",import:(()=>M(()=>import("./wit-5i3qLPDT.js"),[]))},{id:"wolfram",name:"Wolfram",aliases:["wl"],import:(()=>M(()=>import("./wolfram-lXgVvXCa.js"),[]))},{id:"xml",name:"XML",import:(()=>M(()=>import("./xml-sdJ4AIDG.js"),__vite__mapDeps([7,8])))},{id:"xsl",name:"XSL",import:(()=>M(()=>import("./xsl-CtQFsRM5.js"),__vite__mapDeps([96,7,8])))},{id:"yaml",name:"YAML",aliases:["yml"],import:(()=>M(()=>import("./yaml-Buea-lGh.js"),[]))},{id:"zenscript",name:"ZenScript",import:(()=>M(()=>import("./zenscript-DVFEvuxE.js"),[]))},{id:"zig",name:"Zig",import:(()=>M(()=>import("./zig-VOosw3JB.js"),[]))}],r5=Object.fromEntries(_E.map(t=>[t.id,t.import])),s5=Object.fromEntries(_E.flatMap(t=>t.aliases?.map(e=>[e,t.import])||[])),i5={...r5,...s5},a5=[{id:"andromeeda",displayName:"Andromeeda",type:"dark",import:(()=>M(()=>import("./andromeeda-C-Jbm3Hp.js"),[]))},{id:"aurora-x",displayName:"Aurora X",type:"dark",import:(()=>M(()=>import("./aurora-x-D-2ljcwZ.js"),[]))},{id:"ayu-dark",displayName:"Ayu Dark",type:"dark",import:(()=>M(()=>import("./ayu-dark-Cv9koXgw.js"),[]))},{id:"catppuccin-frappe",displayName:"Catppuccin Frapp",type:"dark",import:(()=>M(()=>import("./catppuccin-frappe-DFWUc33u.js"),[]))},{id:"catppuccin-latte",displayName:"Catppuccin Latte",type:"light",import:(()=>M(()=>import("./catppuccin-latte-C9dUb6Cb.js"),[]))},{id:"catppuccin-macchiato",displayName:"Catppuccin Macchiato",type:"dark",import:(()=>M(()=>import("./catppuccin-macchiato-DQyhUUbL.js"),[]))},{id:"catppuccin-mocha",displayName:"Catppuccin Mocha",type:"dark",import:(()=>M(()=>import("./catppuccin-mocha-D87Tk5Gz.js"),[]))},{id:"dark-plus",displayName:"Dark Plus",type:"dark",import:(()=>M(()=>import("./dark-plus-C3mMm8J8.js"),[]))},{id:"dracula",displayName:"Dracula Theme",type:"dark",import:(()=>M(()=>import("./dracula-BzJJZx-M.js"),[]))},{id:"dracula-soft",displayName:"Dracula Theme Soft",type:"dark",import:(()=>M(()=>import("./dracula-soft-BXkSAIEj.js"),[]))},{id:"everforest-dark",displayName:"Everforest Dark",type:"dark",import:(()=>M(()=>import("./everforest-dark-BgDCqdQA.js"),[]))},{id:"everforest-light",displayName:"Everforest Light",type:"light",import:(()=>M(()=>import("./everforest-light-C8M2exoo.js"),[]))},{id:"github-dark",displayName:"GitHub Dark",type:"dark",import:(()=>M(()=>import("./github-dark-DHJKELXO.js"),[]))},{id:"github-dark-default",displayName:"GitHub Dark Default",type:"dark",import:(()=>M(()=>import("./github-dark-default-Cuk6v7N8.js"),[]))},{id:"github-dark-dimmed",displayName:"GitHub Dark Dimmed",type:"dark",import:(()=>M(()=>import("./github-dark-dimmed-DH5Ifo-i.js"),[]))},{id:"github-dark-high-contrast",displayName:"GitHub Dark High Contrast",type:"dark",import:(()=>M(()=>import("./github-dark-high-contrast-E3gJ1_iC.js"),[]))},{id:"github-light",displayName:"GitHub Light",type:"light",import:(()=>M(()=>import("./github-light-DAi9KRSo.js"),[]))},{id:"github-light-default",displayName:"GitHub Light Default",type:"light",import:(()=>M(()=>import("./github-light-default-D7oLnXFd.js"),[]))},{id:"github-light-high-contrast",displayName:"GitHub Light High Contrast",type:"light",import:(()=>M(()=>import("./github-light-high-contrast-BfjtVDDH.js"),[]))},{id:"gruvbox-dark-hard",displayName:"Gruvbox Dark Hard",type:"dark",import:(()=>M(()=>import("./gruvbox-dark-hard-CFHQjOhq.js"),[]))},{id:"gruvbox-dark-medium",displayName:"Gruvbox Dark Medium",type:"dark",import:(()=>M(()=>import("./gruvbox-dark-medium-GsRaNv29.js"),[]))},{id:"gruvbox-dark-soft",displayName:"Gruvbox Dark Soft",type:"dark",import:(()=>M(()=>import("./gruvbox-dark-soft-CVdnzihN.js"),[]))},{id:"gruvbox-light-hard",displayName:"Gruvbox Light Hard",type:"light",import:(()=>M(()=>import("./gruvbox-light-hard-CH1njM8p.js"),[]))},{id:"gruvbox-light-medium",displayName:"Gruvbox Light Medium",type:"light",import:(()=>M(()=>import("./gruvbox-light-medium-DRw_LuNl.js"),[]))},{id:"gruvbox-light-soft",displayName:"Gruvbox Light Soft",type:"light",import:(()=>M(()=>import("./gruvbox-light-soft-hJgmCMqR.js"),[]))},{id:"houston",displayName:"Houston",type:"dark",import:(()=>M(()=>import("./houston-DnULxvSX.js"),[]))},{id:"kanagawa-dragon",displayName:"Kanagawa Dragon",type:"dark",import:(()=>M(()=>import("./kanagawa-dragon-CkXjmgJE.js"),[]))},{id:"kanagawa-lotus",displayName:"Kanagawa Lotus",type:"light",import:(()=>M(()=>import("./kanagawa-lotus-CfQXZHmo.js"),[]))},{id:"kanagawa-wave",displayName:"Kanagawa Wave",type:"dark",import:(()=>M(()=>import("./kanagawa-wave-DWedfzmr.js"),[]))},{id:"laserwave",displayName:"LaserWave",type:"dark",import:(()=>M(()=>import("./laserwave-DUszq2jm.js"),[]))},{id:"light-plus",displayName:"Light Plus",type:"light",import:(()=>M(()=>import("./light-plus-B7mTdjB0.js"),[]))},{id:"material-theme",displayName:"Material Theme",type:"dark",import:(()=>M(()=>import("./material-theme-D5KoaKCx.js"),[]))},{id:"material-theme-darker",displayName:"Material Theme Darker",type:"dark",import:(()=>M(()=>import("./material-theme-darker-BfHTSMKl.js"),[]))},{id:"material-theme-lighter",displayName:"Material Theme Lighter",type:"light",import:(()=>M(()=>import("./material-theme-lighter-B0m2ddpp.js"),[]))},{id:"material-theme-ocean",displayName:"Material Theme Ocean",type:"dark",import:(()=>M(()=>import("./material-theme-ocean-CyktbL80.js"),[]))},{id:"material-theme-palenight",displayName:"Material Theme Palenight",type:"dark",import:(()=>M(()=>import("./material-theme-palenight-Csfq5Kiy.js"),[]))},{id:"min-dark",displayName:"Min Dark",type:"dark",import:(()=>M(()=>import("./min-dark-CafNBF8u.js"),[]))},{id:"min-light",displayName:"Min Light",type:"light",import:(()=>M(()=>import("./min-light-CTRr51gU.js"),[]))},{id:"monokai",displayName:"Monokai",type:"dark",import:(()=>M(()=>import("./monokai-D4h5O-jR.js"),[]))},{id:"night-owl",displayName:"Night Owl",type:"dark",import:(()=>M(()=>import("./night-owl-C39BiMTA.js"),[]))},{id:"nord",displayName:"Nord",type:"dark",import:(()=>M(()=>import("./nord-Ddv68eIx.js"),[]))},{id:"one-dark-pro",displayName:"One Dark Pro",type:"dark",import:(()=>M(()=>import("./one-dark-pro-DVMEJ2y_.js"),[]))},{id:"one-light",displayName:"One Light",type:"light",import:(()=>M(()=>import("./one-light-PoHY5YXO.js"),[]))},{id:"plastic",displayName:"Plastic",type:"dark",import:(()=>M(()=>import("./plastic-3e1v2bzS.js"),[]))},{id:"poimandres",displayName:"Poimandres",type:"dark",import:(()=>M(()=>import("./poimandres-CS3Unz2-.js"),[]))},{id:"red",displayName:"Red",type:"dark",import:(()=>M(()=>import("./red-bN70gL4F.js"),[]))},{id:"rose-pine",displayName:"Ros Pine",type:"dark",import:(()=>M(()=>import("./rose-pine-qdsjHGoJ.js"),[]))},{id:"rose-pine-dawn",displayName:"Ros Pine Dawn",type:"light",import:(()=>M(()=>import("./rose-pine-dawn-DHQR4-dF.js"),[]))},{id:"rose-pine-moon",displayName:"Ros Pine Moon",type:"dark",import:(()=>M(()=>import("./rose-pine-moon-D4_iv3hh.js"),[]))},{id:"slack-dark",displayName:"Slack Dark",type:"dark",import:(()=>M(()=>import("./slack-dark-BthQWCQV.js"),[]))},{id:"slack-ochin",displayName:"Slack Ochin",type:"light",import:(()=>M(()=>import("./slack-ochin-DqwNpetd.js"),[]))},{id:"snazzy-light",displayName:"Snazzy Light",type:"light",import:(()=>M(()=>import("./snazzy-light-Bw305WKR.js"),[]))},{id:"solarized-dark",displayName:"Solarized Dark",type:"dark",import:(()=>M(()=>import("./solarized-dark-DXbdFlpD.js"),[]))},{id:"solarized-light",displayName:"Solarized Light",type:"light",import:(()=>M(()=>import("./solarized-light-L9t79GZl.js"),[]))},{id:"synthwave-84",displayName:"Synthwave '84",type:"dark",import:(()=>M(()=>import("./synthwave-84-CbfX1IO0.js"),[]))},{id:"tokyo-night",displayName:"Tokyo Night",type:"dark",import:(()=>M(()=>import("./tokyo-night-hegEt444.js"),[]))},{id:"vesper",displayName:"Vesper",type:"dark",import:(()=>M(()=>import("./vesper-DU1UobuO.js"),[]))},{id:"vitesse-black",displayName:"Vitesse Black",type:"dark",import:(()=>M(()=>import("./vitesse-black-Bkuqu6BP.js"),[]))},{id:"vitesse-dark",displayName:"Vitesse Dark",type:"dark",import:(()=>M(()=>import("./vitesse-dark-D0r3Knsf.js"),[]))},{id:"vitesse-light",displayName:"Vitesse Light",type:"light",import:(()=>M(()=>import("./vitesse-light-CVO1_9PV.js"),[]))}],o5=Object.fromEntries(a5.map(t=>[t.id,t.import]));class Ay extends Error{constructor(e){super(e),this.name="ShikiError"}}function l5(){return 2147483648}function c5(){return typeof performance<"u"?performance.now():Date.now()}const u5=(t,e)=>t+(e-t%e)%e;async function f5(t){let e,n;const r={};function s(g){n=g,r.HEAPU8=new Uint8Array(g),r.HEAPU32=new Uint32Array(g)}function a(g,v,x){r.HEAPU8.copyWithin(g,v,v+x)}function l(g){try{return e.grow(g-n.byteLength+65535>>>16),s(e.buffer),1}catch{}}function u(g){const v=r.HEAPU8.length;g=g>>>0;const x=l5();if(g>x)return!1;for(let k=1;k<=4;k*=2){let S=v*(1+.2/k);S=Math.min(S,g+100663296);const T=Math.min(x,u5(Math.max(g,S),65536));if(l(T))return!0}return!1}const f=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function h(g,v,x=1024){const k=v+x;let S=v;for(;g[S]&&!(S>=k);)++S;if(S-v>16&&g.buffer&&f)return f.decode(g.subarray(v,S));let T="";for(;v<S;){let C=g[v++];if(!(C&128)){T+=String.fromCharCode(C);continue}const L=g[v++]&63;if((C&224)===192){T+=String.fromCharCode((C&31)<<6|L);continue}const D=g[v++]&63;if((C&240)===224?C=(C&15)<<12|L<<6|D:C=(C&7)<<18|L<<12|D<<6|g[v++]&63,C<65536)T+=String.fromCharCode(C);else{const I=C-65536;T+=String.fromCharCode(55296|I>>10,56320|I&1023)}}return T}function m(g,v){return g?h(r.HEAPU8,g,v):""}const p={emscripten_get_now:c5,emscripten_memcpy_big:a,emscripten_resize_heap:u,fd_write:()=>0};async function _(){const v=await t({env:p,wasi_snapshot_preview1:p});e=v.memory,s(e.buffer),Object.assign(r,v),r.UTF8ToString=m}return await _(),r}var h5=Object.defineProperty,d5=(t,e,n)=>e in t?h5(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Vt=(t,e,n)=>d5(t,typeof e!="symbol"?e+"":e,n);let en=null;function p5(t){throw new Ay(t.UTF8ToString(t.getLastOnigError()))}class nh{constructor(e){Vt(this,"utf16Length"),Vt(this,"utf8Length"),Vt(this,"utf16Value"),Vt(this,"utf8Value"),Vt(this,"utf16OffsetToUtf8"),Vt(this,"utf8OffsetToUtf16");const n=e.length,r=nh._utf8ByteLength(e),s=r!==n,a=s?new Uint32Array(n+1):null;s&&(a[n]=r);const l=s?new Uint32Array(r+1):null;s&&(l[r]=n);const u=new Uint8Array(r);let f=0;for(let h=0;h<n;h++){const m=e.charCodeAt(h);let p=m,_=!1;if(m>=55296&&m<=56319&&h+1<n){const g=e.charCodeAt(h+1);g>=56320&&g<=57343&&(p=(m-55296<<10)+65536|g-56320,_=!0)}s&&(a[h]=f,_&&(a[h+1]=f),p<=127?l[f+0]=h:p<=2047?(l[f+0]=h,l[f+1]=h):p<=65535?(l[f+0]=h,l[f+1]=h,l[f+2]=h):(l[f+0]=h,l[f+1]=h,l[f+2]=h,l[f+3]=h)),p<=127?u[f++]=p:p<=2047?(u[f++]=192|(p&1984)>>>6,u[f++]=128|(p&63)>>>0):p<=65535?(u[f++]=224|(p&61440)>>>12,u[f++]=128|(p&4032)>>>6,u[f++]=128|(p&63)>>>0):(u[f++]=240|(p&1835008)>>>18,u[f++]=128|(p&258048)>>>12,u[f++]=128|(p&4032)>>>6,u[f++]=128|(p&63)>>>0),_&&h++}this.utf16Length=n,this.utf8Length=r,this.utf16Value=e,this.utf8Value=u,this.utf16OffsetToUtf8=a,this.utf8OffsetToUtf16=l}static _utf8ByteLength(e){let n=0;for(let r=0,s=e.length;r<s;r++){const a=e.charCodeAt(r);let l=a,u=!1;if(a>=55296&&a<=56319&&r+1<s){const f=e.charCodeAt(r+1);f>=56320&&f<=57343&&(l=(a-55296<<10)+65536|f-56320,u=!0)}l<=127?n+=1:l<=2047?n+=2:l<=65535?n+=3:n+=4,u&&r++}return n}createString(e){const n=e.omalloc(this.utf8Length);return e.HEAPU8.set(this.utf8Value,n),n}}const rh=class jr{constructor(e){if(Vt(this,"id",++jr.LAST_ID),Vt(this,"_onigBinding"),Vt(this,"content"),Vt(this,"utf16Length"),Vt(this,"utf8Length"),Vt(this,"utf16OffsetToUtf8"),Vt(this,"utf8OffsetToUtf16"),Vt(this,"ptr"),!en)throw new Ay("Must invoke loadWasm first.");this._onigBinding=en,this.content=e;const n=new nh(e);this.utf16Length=n.utf16Length,this.utf8Length=n.utf8Length,this.utf16OffsetToUtf8=n.utf16OffsetToUtf8,this.utf8OffsetToUtf16=n.utf8OffsetToUtf16,this.utf8Length<1e4&&!jr._sharedPtrInUse?(jr._sharedPtr||(jr._sharedPtr=en.omalloc(1e4)),jr._sharedPtrInUse=!0,en.HEAPU8.set(n.utf8Value,jr._sharedPtr),this.ptr=jr._sharedPtr):this.ptr=n.createString(en)}convertUtf8OffsetToUtf16(e){return this.utf8OffsetToUtf16?e<0?0:e>this.utf8Length?this.utf16Length:this.utf8OffsetToUtf16[e]:e}convertUtf16OffsetToUtf8(e){return this.utf16OffsetToUtf8?e<0?0:e>this.utf16Length?this.utf8Length:this.utf16OffsetToUtf8[e]:e}dispose(){this.ptr===jr._sharedPtr?jr._sharedPtrInUse=!1:this._onigBinding.ofree(this.ptr)}};Vt(rh,"LAST_ID",0);Vt(rh,"_sharedPtr",0);Vt(rh,"_sharedPtrInUse",!1);let bE=rh;class m5{constructor(e){if(Vt(this,"_onigBinding"),Vt(this,"_ptr"),!en)throw new Ay("Must invoke loadWasm first.");const n=[],r=[];for(let u=0,f=e.length;u<f;u++){const h=new nh(e[u]);n[u]=h.createString(en),r[u]=h.utf8Length}const s=en.omalloc(4*e.length);en.HEAPU32.set(n,s/4);const a=en.omalloc(4*e.length);en.HEAPU32.set(r,a/4);const l=en.createOnigScanner(s,a,e.length);for(let u=0,f=e.length;u<f;u++)en.ofree(n[u]);en.ofree(a),en.ofree(s),l===0&&p5(en),this._onigBinding=en,this._ptr=l}dispose(){this._onigBinding.freeOnigScanner(this._ptr)}findNextMatchSync(e,n,r){let s=0;if(typeof r=="number"&&(s=r),typeof e=="string"){e=new bE(e);const a=this._findNextMatchSync(e,n,!1,s);return e.dispose(),a}return this._findNextMatchSync(e,n,!1,s)}_findNextMatchSync(e,n,r,s){const a=this._onigBinding,l=a.findNextOnigScannerMatch(this._ptr,e.id,e.ptr,e.utf8Length,e.convertUtf16OffsetToUtf8(n),s);if(l===0)return null;const u=a.HEAPU32;let f=l/4;const h=u[f++],m=u[f++],p=[];for(let _=0;_<m;_++){const g=e.convertUtf8OffsetToUtf16(u[f++]),v=e.convertUtf8OffsetToUtf16(u[f++]);p[_]={start:g,end:v,length:v-g}}return{index:h,captureIndices:p}}}function g5(t){return typeof t.instantiator=="function"}function y5(t){return typeof t.default=="function"}function _5(t){return typeof t.data<"u"}function b5(t){return typeof Response<"u"&&t instanceof Response}function v5(t){return typeof ArrayBuffer<"u"&&(t instanceof ArrayBuffer||ArrayBuffer.isView(t))||typeof Buffer<"u"&&Buffer.isBuffer?.(t)||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer||typeof Uint32Array<"u"&&t instanceof Uint32Array}let Eu;function x5(t){if(Eu)return Eu;async function e(){en=await f5(async n=>{let r=t;return r=await r,typeof r=="function"&&(r=await r(n)),typeof r=="function"&&(r=await r(n)),g5(r)?r=await r.instantiator(n):y5(r)?r=await r.default(n):(_5(r)&&(r=r.data),b5(r)?typeof WebAssembly.instantiateStreaming=="function"?r=await w5(r)(n):r=await S5(r)(n):v5(r)?r=await lm(r)(n):r instanceof WebAssembly.Module?r=await lm(r)(n):"default"in r&&r.default instanceof WebAssembly.Module&&(r=await lm(r.default)(n))),"instance"in r&&(r=r.instance),"exports"in r&&(r=r.exports),r})}return Eu=e(),Eu}function lm(t){return e=>WebAssembly.instantiate(t,e)}function w5(t){return e=>WebAssembly.instantiateStreaming(t,e)}function S5(t){return async e=>{const n=await t.arrayBuffer();return WebAssembly.instantiate(n,e)}}async function k5(t){return t&&await x5(t),{createScanner(e){return new m5(e.map(n=>typeof n=="string"?n:n.source))},createString(e){return new bE(e)}}}const E5=e5({langs:i5,themes:o5,engine:()=>k5(M(()=>import("./wasm-CG6Dc4jp.js"),[]))}),{codeToHtml:sh}=n5(E5,{guessEmbeddedLanguages:mj});function C5(){const t=it.c(2),[e,n]=J.useState(T5);let r,s;return t[0]===Symbol.for("react.memo_cache_sentinel")?(r=()=>{const a=window.matchMedia("(prefers-color-scheme: dark)"),l=u=>n(u.matches);return a.addEventListener("change",l),()=>a.removeEventListener("change",l)},s=[],t[0]=r,t[1]=s):(r=t[0],s=t[1]),J.useEffect(r,s),e}function T5(){return window.matchMedia("(prefers-color-scheme: dark)").matches}function A5({content:t}){const[e,n]=J.useState(""),r=C5(),s=a=>{try{const l=JSON.parse(a);return JSON.stringify(l,null,2)}catch{return a}};return J.useEffect(()=>{(async()=>{try{const l=await t.text(),u=s(l),f=await sh(u,{lang:"json",theme:r?"github-dark":"github-light"});n(f)}catch{const l=await t.text();n(`<pre>${s(l)}</pre>`)}})()},[t,r]),E.jsx("div",{className:"text-xs [&_pre]:bg-transparent! [&_pre]:p-0! [&_pre]:m-0! [&_pre]:overflow-visible! [&_code]:bg-transparent! [&_code]:block!",dangerouslySetInnerHTML:{__html:e}})}function R5(){const t=it.c(2),[e,n]=J.useState(O5);let r,s;return t[0]===Symbol.for("react.memo_cache_sentinel")?(r=()=>{const a=window.matchMedia("(prefers-color-scheme: dark)"),l=u=>n(u.matches);return a.addEventListener("change",l),()=>a.removeEventListener("change",l)},s=[],t[0]=r,t[1]=s):(r=t[0],s=t[1]),J.useEffect(r,s),e}function O5(){return window.matchMedia("(prefers-color-scheme: dark)").matches}function I5({content:t}){const[e,n]=J.useState(""),r=R5(),s=a=>{try{const u=/(>)(<)(\/*)/g,f=a.replace(u,`$1
$2$3`);let h=0;return f.split(`
`).map(m=>{let p=0;m.match(/.+<\/\w[^>]*>$/)?p=0:m.match(/^<\/\w/)&&h>0?h-=1:m.match(/^<\w[^>]*[^/]>.*$/)?p=1:p=0;const _="  ".repeat(h);return h+=p,_+m}).join(`
`)}catch{return a}};return J.useEffect(()=>{(async()=>{try{const l=await t.text(),u=s(l),f=await sh(u,{lang:"xml",theme:r?"github-dark":"github-light"});n(f)}catch{const l=await t.text();n(`<pre>${s(l)}</pre>`)}})()},[t,r]),E.jsx("div",{className:"text-xs [&_pre]:bg-transparent! [&_pre]:p-0! [&_pre]:m-0! [&_pre]:overflow-visible! [&_code]:bg-transparent! [&_code]:block!",dangerouslySetInnerHTML:{__html:e}})}function N5(){const t=it.c(2),[e,n]=J.useState(M5);let r,s;return t[0]===Symbol.for("react.memo_cache_sentinel")?(r=()=>{const a=window.matchMedia("(prefers-color-scheme: dark)"),l=u=>n(u.matches);return a.addEventListener("change",l),()=>a.removeEventListener("change",l)},s=[],t[0]=r,t[1]=s):(r=t[0],s=t[1]),J.useEffect(r,s),e}function M5(){return window.matchMedia("(prefers-color-scheme: dark)").matches}function D5({content:t}){const[e,n]=J.useState(""),r=N5();return J.useEffect(()=>{(async()=>{try{const a=await t.text(),l=await sh(a,{lang:"yaml",theme:r?"github-dark":"github-light"});n(l)}catch{const a=await t.text();n(`<pre>${a}</pre>`)}})()},[t,r]),E.jsx("div",{className:"text-xs [&_pre]:bg-transparent! [&_pre]:p-0! [&_pre]:m-0! [&_pre]:overflow-visible! [&_code]:bg-transparent! [&_code]:block!",dangerouslySetInnerHTML:{__html:e}})}function e1(t){const e=it.c(5),{content:n}=t,[r,s]=J.useState("");let a,l;e[0]!==n?(a=()=>{n.text().then(s)},l=[n],e[0]=n,e[1]=a,e[2]=l):(a=e[1],l=e[2]),J.useEffect(a,l);let u;return e[3]!==r?(u=E.jsx("pre",{className:"text-xs font-mono text-neutral-700 dark:text-neutral-200 whitespace-pre-wrap",children:r}),e[3]=r,e[4]=u):u=e[4],u}function L5(t){const e=it.c(6),{content:n}=t,r=z5;let s;e[0]===Symbol.for("react.memo_cache_sentinel")?(s=E.jsx("div",{className:"text-neutral-500 dark:text-neutral-400 text-sm",children:"Binary content"}),e[0]=s):s=e[0];const a=r(n.size);let l;e[1]!==a?(l=E.jsx("div",{className:"text-2xl font-semibold text-neutral-700 dark:text-neutral-200",children:a}),e[1]=a,e[2]=l):l=e[2];let u;e[3]===Symbol.for("react.memo_cache_sentinel")?(u=E.jsx("div",{className:"text-xs text-neutral-400 dark:text-neutral-500",children:"Cannot preview binary data"}),e[3]=u):u=e[3];let f;return e[4]!==l?(f=E.jsx("div",{className:"flex flex-col items-center justify-center p-12 bg-neutral-100 dark:bg-white/5 rounded-lg border border-neutral-200 dark:border-white/10",children:E.jsxs("div",{className:"text-center space-y-2",children:[s,l,u]})}),e[4]=l,e[5]=f):f=e[5],f}function z5(t){return t<1024?`${t} B`:t<1048576?`${(t/1024).toFixed(2)} KB`:`${(t/1048576).toFixed(2)} MB`}function j5(t){const e=it.c(4),{content:n}=t;let r;e[0]!==n?(r=URL.createObjectURL(n),e[0]=n,e[1]=r):r=e[1];const s=r;let a;return e[2]!==s?(a=E.jsx("div",{className:"h-full",children:E.jsx("img",{src:s,alt:"Response",className:"max-w-full max-h-full object-contain"})}),e[2]=s,e[3]=a):a=e[3],a}function P5(){const t=it.c(2),[e,n]=J.useState(B5);let r,s;return t[0]===Symbol.for("react.memo_cache_sentinel")?(r=()=>{const a=window.matchMedia("(prefers-color-scheme: dark)"),l=u=>n(u.matches);return a.addEventListener("change",l),()=>a.removeEventListener("change",l)},s=[],t[0]=r,t[1]=s):(r=t[0],s=t[1]),J.useEffect(r,s),e}function B5(){return window.matchMedia("(prefers-color-scheme: dark)").matches}function U5(t){const e=[],n=t.split(/\n\n+/);for(const r of n){if(!r.trim())continue;const s={data:"",raw:r},a=r.split(`
`);for(const l of a)l.startsWith("id:")?s.id=l.slice(3).trim():l.startsWith("event:")?s.event=l.slice(6).trim():l.startsWith("data:")?s.data+=(s.data?`
`:"")+l.slice(5).trim():l.startsWith("retry:")&&(s.retry=parseInt(l.slice(6).trim(),10));(s.data||s.event||s.id)&&e.push(s)}return e}function $5(t){try{return JSON.parse(t)}catch{return null}}function q5({event:t,index:e,prefersDark:n}){const[r,s]=J.useState(!0),[a,l]=J.useState(""),u=J.useMemo(()=>$5(t.data),[t.data]);return J.useEffect(()=>{(async()=>{if(u)try{const h=JSON.stringify(u,null,2),m=await sh(h,{lang:"json",theme:n?"github-dark":"github-light"});l(m)}catch{l(`<pre>${JSON.stringify(u,null,2)}</pre>`)}})()},[u,n]),E.jsxs("div",{className:"border border-neutral-200 dark:border-white/10 rounded-lg overflow-hidden",children:[E.jsxs("button",{onClick:()=>s(!r),className:"w-full flex items-center gap-2 px-3 py-2 bg-neutral-50 dark:bg-white/5 hover:bg-neutral-100 dark:hover:bg-white/10 transition-colors",children:[r?E.jsx(Kl,{className:"w-4 h-4 text-neutral-400"}):E.jsx(xk,{className:"w-4 h-4 text-neutral-400"}),E.jsxs("span",{className:"text-xs font-mono text-neutral-500 dark:text-neutral-400",children:["#",e+1]}),t.event&&E.jsx("span",{className:"px-2 py-0.5 text-xs font-medium bg-blue-100 dark:bg-blue-500/20 text-blue-700 dark:text-blue-300 rounded",children:t.event}),t.id&&E.jsxs("span",{className:"text-xs text-neutral-400 dark:text-neutral-500",children:["id: ",t.id]}),u&&E.jsx("span",{className:"px-1.5 py-0.5 text-[10px] font-medium bg-emerald-100 dark:bg-emerald-500/20 text-emerald-700 dark:text-emerald-300 rounded",children:"JSON"})]}),r&&E.jsx("div",{className:"p-3 bg-white dark:bg-transparent",children:u&&a?E.jsx("div",{className:"text-xs [&_pre]:bg-transparent! [&_pre]:p-0! [&_pre]:m-0! [&_pre]:overflow-visible! [&_code]:bg-transparent! [&_code]:block!",dangerouslySetInnerHTML:{__html:a}}):E.jsx("pre",{className:"text-xs font-mono text-neutral-700 dark:text-neutral-200 whitespace-pre-wrap",children:t.data})})]})}function F5(t){const e=it.c(17),{content:n}=t;let r;e[0]===Symbol.for("react.memo_cache_sentinel")?(r=[],e[0]=r):r=e[0];const[s,a]=J.useState(r),[l,u]=J.useState(""),f=P5();let h,m;if(e[1]!==n?(h=()=>{n.text().then(x=>{u(x),a(U5(x))})},m=[n],e[1]=n,e[2]=h,e[3]=m):(h=e[2],m=e[3]),J.useEffect(h,m),s.length===0){let x;return e[4]!==l?(x=E.jsx("pre",{className:"text-xs font-mono text-neutral-700 dark:text-neutral-200 whitespace-pre-wrap",children:l}),e[4]=l,e[5]=x):x=e[5],x}const p=s.length!==1?"s":"";let _;e[6]!==s.length||e[7]!==p?(_=E.jsx("div",{className:"flex items-center gap-2 mb-3",children:E.jsxs("span",{className:"text-xs font-medium text-neutral-500 dark:text-neutral-400",children:[s.length," event",p]})}),e[6]=s.length,e[7]=p,e[8]=_):_=e[8];let g;if(e[9]!==s||e[10]!==f){let x;e[12]!==f?(x=(k,S)=>E.jsx(q5,{event:k,index:S,prefersDark:f},S),e[12]=f,e[13]=x):x=e[13],g=s.map(x),e[9]=s,e[10]=f,e[11]=g}else g=e[11];let v;return e[14]!==_||e[15]!==g?(v=E.jsxs("div",{className:"space-y-2",children:[_,g]}),e[14]=_,e[15]=g,e[16]=v):v=e[16],v}const V5=["video/","audio/","application/pdf","application/octet-stream","application/zip","application/gzip","application/x-tar","application/x-rar","application/x-7z","application/vnd.ms-","application/vnd.openxmlformats","application/x-executable","application/x-sharedlib","application/x-mach-binary","application/wasm","font/"],H5=["image/png","image/jpeg","image/gif","image/webp","image/svg+xml","image/bmp","image/x-icon","image/ico","image/avif","image/apng"],G5=["text/","application/json","application/xml","application/javascript","application/ecmascript","application/x-javascript","application/ld+json","application/manifest+json","application/schema+json","application/x-www-form-urlencoded","application/xhtml+xml","application/rss+xml","application/atom+xml","application/soap+xml","application/x-yaml","application/yaml","+json","+xml"];function K5(t){const e=t["content-type"]?.toLowerCase()||"";return e.includes("text/event-stream")?"sse":H5.some(n=>e.includes(n))?"image":V5.some(n=>e.includes(n))?"binary":e.includes("json")||e.endsWith("+json")?"json":e.includes("xml")||e.endsWith("+xml")?"xml":e.includes("yaml")||e.includes("yml")?"yaml":(G5.some(n=>e.includes(n)),"text")}function Z5(){const t=it.c(35),{request:e}=$n(),[n,r]=J.useState("pretty"),[s,a]=J.useState(!1),l=e?.httpResponse,u=e?.executing??!1,f=l?.error;if(u){let I;return t[0]===Symbol.for("react.memo_cache_sentinel")?(I=E.jsxs("div",{className:"flex flex-col items-center justify-center h-full min-h-50",children:[E.jsxs("div",{className:"relative mb-4",children:[E.jsx("div",{className:"w-12 h-12 rounded-full border-2 border-zinc-100 dark:border-zinc-800"}),E.jsx("div",{className:"absolute inset-0 w-12 h-12 rounded-full border-2 border-zinc-400 border-t-transparent animate-spin"})]}),E.jsx("span",{className:"text-xs font-medium text-zinc-400 uppercase tracking-widest animate-pulse",children:"Sending Request"})]}),t[0]=I):I=t[0],I}if(f){let I,P;t[1]===Symbol.for("react.memo_cache_sentinel")?(I=E.jsx(N4,{className:"w-5 h-5 text-rose-500 dark:text-rose-400"}),P=E.jsx("h3",{className:"font-semibold text-rose-500 dark:text-rose-400",children:"Error"}),t[1]=I,t[2]=P):(I=t[1],P=t[2]);let V;return t[3]!==f?(V=E.jsx("div",{className:"bg-rose-500/10 border border-rose-500/20 rounded-xl p-4",children:E.jsxs("div",{className:"flex items-center gap-3",children:[I,E.jsxs("div",{children:[P,E.jsx("p",{className:"text-sm text-neutral-600 dark:text-neutral-300 mt-1",children:f})]})]})}),t[3]=f,t[4]=V):V=t[4],V}if(!l){let I;return t[5]===Symbol.for("react.memo_cache_sentinel")?(I=E.jsxs("div",{className:"h-full flex flex-col items-center justify-center",children:[E.jsx(eL,{className:"w-12 h-12 text-neutral-300 dark:text-neutral-600 mb-4"}),E.jsx("p",{className:"text-sm text-neutral-400 dark:text-neutral-500",children:"Hit Send to see what happens"})]}),t[5]=I):I=t[5],I}let h;t[6]!==l.headers?(h=K5(l.headers),t[6]=l.headers,t[7]=h):h=t[7];const m=h;let p;t[8]!==m||t[9]!==l.body||t[10]!==n?(p=()=>{if(n==="raw"&&m!=="image"&&m!=="binary")return E.jsx(e1,{content:l.body});switch(m){case"json":return E.jsx(A5,{content:l.body});case"xml":return E.jsx(I5,{content:l.body});case"yaml":return E.jsx(D5,{content:l.body});case"sse":return E.jsx(F5,{content:l.body});case"image":return E.jsx(j5,{content:l.body});case"binary":return E.jsx(L5,{content:l.body});default:return E.jsx(e1,{content:l.body})}},t[8]=m,t[9]=l.body,t[10]=n,t[11]=p):p=t[11];const _=p;let g;t[12]!==m||t[13]!==n?(g=m!=="binary"&&m!=="image"&&E.jsxs("div",{className:"flex gap-1 p-1 bg-neutral-100 dark:bg-white/5 rounded-lg",children:[E.jsx("button",{onClick:()=>r("pretty"),className:`px-3 py-1.5 text-xs font-medium rounded-md transition-all ${n==="pretty"?"bg-white dark:bg-white/10 text-neutral-800 dark:text-neutral-100 shadow-sm":"text-neutral-500 dark:text-neutral-400 hover:text-neutral-700 dark:hover:text-neutral-200"}`,children:"Pretty"}),E.jsx("button",{onClick:()=>r("raw"),className:`px-3 py-1.5 text-xs font-medium rounded-md transition-all ${n==="raw"?"bg-white dark:bg-white/10 text-neutral-800 dark:text-neutral-100 shadow-sm":"text-neutral-500 dark:text-neutral-400 hover:text-neutral-700 dark:hover:text-neutral-200"}`,children:"Raw"})]}),t[12]=m,t[13]=n,t[14]=g):g=t[14];let v;t[15]!==s?(v=()=>a(!s),t[15]=s,t[16]=v):v=t[16];const x=`px-3 py-1.5 text-xs font-medium rounded-lg transition-all ${s?"bg-white dark:bg-white/10 text-neutral-800 dark:text-neutral-100 shadow-sm":"bg-neutral-100 dark:bg-white/5 text-neutral-500 dark:text-neutral-400 hover:text-neutral-700 dark:hover:text-neutral-200"}`;let k;t[17]!==l.headers?(k=Object.keys(l.headers),t[17]=l.headers,t[18]=k):k=t[18];let S;t[19]!==v||t[20]!==x||t[21]!==k.length?(S=E.jsxs("button",{onClick:v,className:x,children:["Headers (",k.length,")"]}),t[19]=v,t[20]=x,t[21]=k.length,t[22]=S):S=t[22];let T;t[23]!==g||t[24]!==S?(T=E.jsxs("div",{className:"flex gap-2 shrink-0 mb-4",children:[g,S]}),t[23]=g,t[24]=S,t[25]=T):T=t[25];let C;t[26]!==l.headers||t[27]!==s?(C=s&&E.jsx("div",{className:"bg-neutral-100 dark:bg-white/5 rounded-xl border border-neutral-200 dark:border-white/10 overflow-hidden shrink-0 mb-4",children:E.jsxs("table",{className:"w-full",children:[E.jsx("thead",{children:E.jsxs("tr",{className:"border-b border-neutral-200 dark:border-white/10",children:[E.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-neutral-500 dark:text-neutral-400",children:"Header"}),E.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-neutral-500 dark:text-neutral-400",children:"Value"})]})}),E.jsx("tbody",{children:Object.entries(l.headers).map(Q5)})]})}),t[26]=l.headers,t[27]=s,t[28]=C):C=t[28];let L;t[29]!==_?(L=E.jsx("div",{className:"flex-1 min-h-0 overflow-auto",children:_()}),t[29]=_,t[30]=L):L=t[30];let D;return t[31]!==T||t[32]!==C||t[33]!==L?(D=E.jsxs("div",{className:"h-full flex flex-col overflow-hidden",children:[T,C,L]}),t[31]=T,t[32]=C,t[33]=L,t[34]=D):D=t[34],D}function Q5(t){const[e,n]=t;return E.jsxs("tr",{className:"border-b border-neutral-100 dark:border-white/5 last:border-0",children:[E.jsx("td",{className:"px-4 py-2 font-mono text-xs text-neutral-600 dark:text-neutral-300",children:e}),E.jsx("td",{className:"px-4 py-2 font-mono text-xs text-neutral-500 dark:text-neutral-400",children:n})]},e)}function J5(){const t=it.c(46),{request:e,newRequest:n,sidebarCollapsed:r,toggleSidebar:s,history:a}=$n(),{setPortalTarget:l}=_k();if(!e){let Q;return t[0]===Symbol.for("react.memo_cache_sentinel")?(Q=E.jsx("div",{className:"flex-1 flex items-center justify-center text-neutral-400 dark:text-neutral-500",children:"No active request"}),t[0]=Q):Q=t[0],Q}const u=e.protocol??"rest";let f;t[1]!==a||t[2]!==r||t[3]!==s?(f=r&&a.length>0&&E.jsx("button",{type:"button",onClick:s,className:"p-1.5 hover:bg-neutral-100 dark:hover:bg-white/10 rounded-md transition-colors text-neutral-500 dark:text-neutral-400 hover:text-neutral-700 dark:hover:text-neutral-200",title:"Show sidebar",children:E.jsx(V4,{className:"w-4 h-4"})}),t[1]=a,t[2]=r,t[3]=s,t[4]=f):f=t[4];let h;t[5]===Symbol.for("react.memo_cache_sentinel")?(h=E.jsx(EL,{}),t[5]=h):h=t[5];let m;t[6]!==u?(m=u==="rest"&&E.jsx(IL,{}),t[6]=u,t[7]=m):m=t[7];let p;t[8]!==u?(p=u==="grpc"&&E.jsx(a3,{}),t[8]=u,t[9]=p):p=t[9];let _;t[10]!==u?(_=u==="mcp"&&E.jsx(u3,{}),t[10]=u,t[11]=_):_=t[11];let g;t[12]!==m||t[13]!==p||t[14]!==_?(g=E.jsxs("div",{className:"flex-1 flex items-center",children:[m,p,_]}),t[12]=m,t[13]=p,t[14]=_,t[15]=g):g=t[15];let v;t[16]!==l?(v=E.jsx("div",{ref:l,className:"flex items-center gap-1"}),t[16]=l,t[17]=v):v=t[17];let x;t[18]===Symbol.for("react.memo_cache_sentinel")?(x=E.jsx(TL,{}),t[18]=x):x=t[18];let k;t[19]===Symbol.for("react.memo_cache_sentinel")?(k=E.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),t[19]=k):k=t[19];let S;t[20]!==n?(S=E.jsx("button",{onClick:n,className:"p-1.5 hover:bg-neutral-100 dark:hover:bg-white/10 rounded-md transition-colors text-neutral-500 dark:text-neutral-400 hover:text-neutral-700 dark:hover:text-neutral-200",title:"New request",children:k}),t[20]=n,t[21]=S):S=t[21];let T;t[22]!==f||t[23]!==g||t[24]!==v||t[25]!==S?(T=E.jsxs("div",{className:"pl-2 pr-3 py-2 border-b border-neutral-200 dark:border-white/5 flex items-center gap-2 shrink-0",children:[f,h,g,v,x,S]}),t[22]=f,t[23]=g,t[24]=v,t[25]=S,t[26]=T):T=t[26];let C;t[27]!==u?(C=u==="rest"&&E.jsx(n3,{}),t[27]=u,t[28]=C):C=t[28];let L;t[29]!==u?(L=u==="grpc"&&E.jsx(l3,{}),t[29]=u,t[30]=L):L=t[30];let D;t[31]!==u?(D=u==="mcp"&&E.jsx(f3,{}),t[31]=u,t[32]=D):D=t[32];let I;t[33]!==C||t[34]!==L||t[35]!==D?(I=E.jsxs("div",{className:"pl-2 pr-3 py-2 border-b border-neutral-200 dark:border-white/5 overflow-visible shrink-0",children:[C,L,D]}),t[33]=C,t[34]=L,t[35]=D,t[36]=I):I=t[36];let P;t[37]!==e.httpResponse?(P=e.httpResponse&&E.jsx("h2",{className:"text-[10px] font-medium text-neutral-500 dark:text-neutral-300 uppercase tracking-wider mb-2 shrink-0",children:"Response"}),t[37]=e.httpResponse,t[38]=P):P=t[38];let V;t[39]===Symbol.for("react.memo_cache_sentinel")?(V=E.jsx("div",{className:"flex-1 min-h-0 overflow-hidden",children:E.jsx(Z5,{})}),t[39]=V):V=t[39];let H;t[40]!==P?(H=E.jsxs("div",{className:"flex-1 pl-2 pr-3 py-2 flex flex-col min-h-0 overflow-hidden",children:[P,V]}),t[40]=P,t[41]=H):H=t[41];let z;return t[42]!==T||t[43]!==I||t[44]!==H?(z=E.jsxs("div",{className:"h-full flex flex-col overflow-hidden",children:[T,I,H]}),t[42]=T,t[43]=I,t[44]=H,t[45]=z):z=t[45],z}class Y5{#e=!0;#t;#n;#r;#s;#o;#i;#a;#p=0;#m=5;#c=!1;#u=!1;#l=null;#f=()=>{this.debugLog("Connected to event bus"),this.#o=!0,this.#c=!1,this.debugLog("Emitting queued events",this.#s),this.#s.forEach(e=>this.emitEventToBus(e)),this.#s=[],this.stopConnectLoop(),this.#n().removeEventListener("tanstack-connect-success",this.#f)};#h=()=>{if(this.#p<this.#m){this.#p++,this.dispatchCustomEvent("tanstack-connect",{});return}this.#n().removeEventListener("tanstack-connect",this.#h),this.#u=!0,this.debugLog("Max retries reached, giving up on connection"),this.stopConnectLoop()};#d=()=>{this.#c||(this.#c=!0,this.#n().addEventListener("tanstack-connect-success",this.#f),this.#h())};constructor({pluginId:e,debug:n=!1,enabled:r=!0,reconnectEveryMs:s=300}){this.#t=e,this.#e=r,this.#n=this.getGlobalTarget,this.#r=n,this.debugLog(" Initializing event subscription for plugin",this.#t),this.#s=[],this.#o=!1,this.#u=!1,this.#i=null,this.#a=s}startConnectLoop(){this.#i!==null||this.#o||(this.debugLog(`Starting connect loop (every ${this.#a}ms)`),this.#i=setInterval(this.#h,this.#a))}stopConnectLoop(){this.#c=!1,this.#i!==null&&(clearInterval(this.#i),this.#i=null,this.#s=[],this.debugLog("Stopped connect loop"))}debugLog(...e){this.#r&&console.log(` [tanstack-devtools:${this.#t}-plugin]`,...e)}getGlobalTarget(){if(typeof globalThis<"u"&&globalThis.__TANSTACK_EVENT_TARGET__)return this.debugLog("Using global event target"),globalThis.__TANSTACK_EVENT_TARGET__;if(typeof window<"u"&&typeof window.addEventListener<"u")return this.debugLog("Using window as event target"),window;const e=typeof EventTarget<"u"?new EventTarget:void 0;return typeof e>"u"||typeof e.addEventListener>"u"?(this.debugLog("No event mechanism available, running in non-web environment"),{addEventListener:()=>{},removeEventListener:()=>{},dispatchEvent:()=>!1}):(this.debugLog("Using new EventTarget as fallback"),e)}getPluginId(){return this.#t}dispatchCustomEventShim(e,n){try{const r=new Event(e,{detail:n});this.#n().dispatchEvent(r)}catch{this.debugLog("Failed to dispatch shim event")}}dispatchCustomEvent(e,n){try{this.#n().dispatchEvent(new CustomEvent(e,{detail:n}))}catch{this.dispatchCustomEventShim(e,n)}}emitEventToBus(e){this.debugLog("Emitting event to client bus",e),this.dispatchCustomEvent("tanstack-dispatch-event",e)}createEventPayload(e,n){return{type:`${this.#t}:${e}`,payload:n,pluginId:this.#t}}emit(e,n){if(!this.#e){this.debugLog("Event bus client is disabled, not emitting event",e,n);return}if(this.#l&&(this.debugLog("Emitting event to internal event target",e,n),this.#l.dispatchEvent(new CustomEvent(`${this.#t}:${e}`,{detail:this.createEventPayload(e,n)}))),this.#u){this.debugLog("Previously failed to connect, not emitting to bus");return}if(!this.#o){this.debugLog("Bus not available, will be pushed as soon as connected"),this.#s.push(this.createEventPayload(e,n)),typeof CustomEvent<"u"&&!this.#c&&(this.#d(),this.startConnectLoop());return}return this.emitEventToBus(this.createEventPayload(e,n))}on(e,n,r){const s=r?.withEventTarget??!1,a=`${this.#t}:${e}`;if(s&&(this.#l||(this.#l=new EventTarget),this.#l.addEventListener(a,u=>{n(u.detail)})),!this.#e)return this.debugLog("Event bus client is disabled, not registering event",a),()=>{};const l=u=>{this.debugLog("Received event from bus",u.detail),n(u.detail)};return this.#n().addEventListener(a,l),this.debugLog("Registered event to bus",a),()=>{s&&this.#l?.removeEventListener(a,l),this.#n().removeEventListener(a,l)}}onAll(e){if(!this.#e)return this.debugLog("Event bus client is disabled, not registering event"),()=>{};const n=r=>{const s=r.detail;e(s)};return this.#n().addEventListener("tanstack-devtools-global",n),()=>this.#n().removeEventListener("tanstack-devtools-global",n)}onAllPluginEvents(e){if(!this.#e)return this.debugLog("Event bus client is disabled, not registering event"),()=>{};const n=r=>{const s=r.detail;this.#t&&s.pluginId!==this.#t||e(s)};return this.#n().addEventListener("tanstack-devtools-global",n),()=>this.#n().removeEventListener("tanstack-devtools-global",n)}}class X5 extends Y5{constructor(){super({pluginId:"tanstack-ai-devtools"})}}const Lt=new X5;async function W5(t){let e="";for await(const n of t)n.type==="content"&&n.delta&&(e+=n.delta);return e}function eP(t){return typeof t=="object"&&t!==null&&"~standard"in t&&typeof t["~standard"]=="object"&&t["~standard"].version===1&&typeof t["~standard"].jsonSchema=="object"&&typeof t["~standard"].jsonSchema.input=="function"}function Oi(t){return typeof t=="object"&&t!==null&&"~standard"in t&&typeof t["~standard"]=="object"&&t!==null&&t["~standard"]!==null&&"version"in t["~standard"]&&t["~standard"].version===1&&"validate"in t["~standard"]&&typeof t["~standard"].validate=="function"}function vl(t,e=[]){const n={...t};if(n.type==="object"&&n.properties){const r={...n.properties},s=Object.keys(r);for(const a of s){const l=r[a],u=!e.includes(a);l.type==="object"&&l.properties?r[a]=vl(l,l.required||[]):l.type==="array"&&l.items?r[a]={...l,items:vl(l.items,l.items.required||[])}:u&&(l.type&&!Array.isArray(l.type)?r[a]={...l,type:[l.type,"null"]}:Array.isArray(l.type)&&!l.type.includes("null")&&(r[a]={...l,type:[...l.type,"null"]}))}n.properties=r,n.required=s,n.additionalProperties=!1}return n.type==="array"&&n.items&&(n.items=vl(n.items,n.items.required||[])),n}function xg(t,e={}){if(!t)return;const{forStructuredOutput:n=!1}=e;if(eP(t)){let s=t["~standard"].jsonSchema.input({target:"draft-07"});if(typeof s=="object"&&"$schema"in s){const{$schema:a,...l}=s;s=l}return typeof s=="object"&&("properties"in s&&!s.type&&(s.type="object"),s.type==="object"&&!("properties"in s)&&(s.properties={}),s.type==="object"&&!("required"in s)&&(s.required=[]),n&&(s=vl(s,s.required||[]))),s}return n&&typeof t=="object"?vl(t,t.required||[]):t}function Ua(t,e){if(!Oi(t))return e;const n=t["~standard"].validate(e);if(n instanceof Promise)throw new Error("Schema validation returned a Promise. Use validateWithStandardSchema for async validation.");if(!n.issues)return n.value;const r=n.issues.map(s=>s.message||"Validation failed").join(", ");throw new Error(`Validation failed: ${r}`)}class tP{constructor(e){this.toolCallsMap=new Map,this.tools=e}addToolCallChunk(e){const n=e.index,r=this.toolCallsMap.get(n);r?(e.toolCall.function.name&&!r.function.name&&(r.function.name=e.toolCall.function.name),e.toolCall.function.arguments&&(r.function.arguments+=e.toolCall.function.arguments)):e.toolCall.id&&e.toolCall.function.name&&this.toolCallsMap.set(n,{id:e.toolCall.id,type:"function",function:{name:e.toolCall.function.name,arguments:e.toolCall.function.arguments||""}})}hasToolCalls(){return this.getToolCalls().length>0}getToolCalls(){return Array.from(this.toolCallsMap.values()).filter(e=>e.id&&e.function.name&&e.function.name.trim().length>0)}async*executeTools(e){const n=this.getToolCalls(),r=[];for(const s of n){const a=this.tools.find(u=>u.name===s.function.name);let l;if(a?.execute)try{let u;try{u=JSON.parse(s.function.arguments)}catch{throw new Error(`Failed to parse tool arguments as JSON: ${s.function.arguments}`)}if(a.inputSchema&&Oi(a.inputSchema))try{u=Ua(a.inputSchema,u)}catch(h){const m=h instanceof Error?h.message:"Validation failed";throw new Error(`Input validation failed for tool ${a.name}: ${m}`)}let f=await a.execute(u);if(a.outputSchema&&Oi(a.outputSchema)&&f!==void 0&&f!==null)try{f=Ua(a.outputSchema,f)}catch(h){const m=h instanceof Error?h.message:"Validation failed";throw new Error(`Output validation failed for tool ${a.name}: ${m}`)}l=typeof f=="string"?f:JSON.stringify(f)}catch(u){l=`Error executing tool: ${u instanceof Error?u.message:"Unknown error"}`}else l=`Tool ${s.function.name} does not have an execute function`;yield{type:"tool_result",id:e.id,model:e.model,timestamp:Date.now(),toolCallId:s.id,content:l},r.push({role:"tool",content:l,toolCallId:s.id})}return r}clear(){this.toolCallsMap.clear()}}async function t1(t,e,n=new Map,r=new Map){const s=[],a=[],l=[],u=new Map;for(const f of e)u.set(f.name,f);for(const f of t){const h=u.get(f.function.name),m=f.function.name;if(!h){s.push({toolCallId:f.id,toolName:m,result:{error:`Unknown tool: ${m}`},state:"output-error"});continue}let p={};const _=f.function.arguments.trim()||"{}";try{p=JSON.parse(_)}catch{throw new Error(`Failed to parse tool arguments as JSON: ${_}`)}if(h.inputSchema&&Oi(h.inputSchema))try{p=Ua(h.inputSchema,p)}catch(v){const x=v instanceof Error?v.message:"Validation failed";s.push({toolCallId:f.id,toolName:m,result:{error:`Input validation failed for tool ${h.name}: ${x}`},state:"output-error"});continue}if(!h.execute){if(h.needsApproval){const v=`approval_${f.id}`;n.has(v)?n.get(v)?r.has(f.id)?s.push({toolCallId:f.id,toolName:m,result:r.get(f.id)}):l.push({toolCallId:f.id,toolName:m,input:p}):s.push({toolCallId:f.id,toolName:m,result:{error:"User declined tool execution"},state:"output-error"}):a.push({toolCallId:f.id,toolName:f.function.name,input:p,approvalId:v})}else r.has(f.id)?s.push({toolCallId:f.id,toolName:m,result:r.get(f.id)}):l.push({toolCallId:f.id,toolName:m,input:p});continue}if(h.needsApproval){const v=`approval_${f.id}`;if(n.has(v))if(n.get(v)){const k=Date.now();try{let S=await h.execute(p);const T=Date.now()-k;h.outputSchema&&Oi(h.outputSchema)&&S!==void 0&&S!==null&&(S=Ua(h.outputSchema,S)),s.push({toolCallId:f.id,toolName:m,result:typeof S=="string"?JSON.parse(S):S||null,duration:T})}catch(S){const T=Date.now()-k,C=S instanceof Error?S.message:"Unknown error";s.push({toolCallId:f.id,toolName:m,result:{error:C},state:"output-error",duration:T})}}else s.push({toolCallId:f.id,toolName:m,result:{error:"User declined tool execution"},state:"output-error"});else a.push({toolCallId:f.id,toolName:m,input:p,approvalId:v});continue}const g=Date.now();try{let v=await h.execute(p);const x=Date.now()-g;h.outputSchema&&Oi(h.outputSchema)&&v!==void 0&&v!==null&&(v=Ua(h.outputSchema,v)),s.push({toolCallId:f.id,toolName:m,result:typeof v=="string"?JSON.parse(v):v||null,duration:x})}catch(v){const x=Date.now()-g,k=v instanceof Error?v.message:"Unknown error";s.push({toolCallId:f.id,toolName:m,result:{error:k},state:"output-error",duration:x})}}return{results:s,needsApproval:a,needsClientExecution:l}}function vE(t){return({iterationCount:e})=>e<t}class xE{constructor(e){this.iterationCount=0,this.lastFinishReason=null,this.streamStartTime=0,this.totalChunkCount=0,this.currentMessageId=null,this.accumulatedContent="",this.doneChunk=null,this.shouldEmitStreamEnd=!0,this.earlyTermination=!1,this.toolPhase="continue",this.cyclePhase="processText",this.adapter=e.adapter,this.params=e.params,this.systemPrompts=e.params.systemPrompts||[],this.tools=e.params.tools||[],this.loopStrategy=e.params.agentLoopStrategy||vE(5),this.toolCallManager=new tP(this.tools),this.initialMessageCount=e.params.messages.length,this.messages=e.params.messages,this.requestId=this.createId("chat"),this.streamId=this.createId("stream"),this.effectiveRequest=e.params.abortController?{signal:e.params.abortController.signal}:void 0,this.effectiveSignal=e.params.abortController?.signal}getAccumulatedContent(){return this.accumulatedContent}getMessages(){return this.messages}async*run(){this.beforeRun();try{if((yield*this.checkForPendingToolCalls())==="wait")return;do{if(this.earlyTermination||this.isAborted())return;this.beginCycle(),this.cyclePhase==="processText"?yield*this.streamModelResponse():yield*this.processToolCalls(),this.endCycle()}while(this.shouldContinue())}finally{this.afterRun()}}beforeRun(){this.streamStartTime=Date.now();const{model:e,tools:n,temperature:r,topP:s,maxTokens:a,metadata:l,modelOptions:u,conversationId:f}=this.params,h={};r!==void 0&&(h.temperature=r),s!==void 0&&(h.topP=s),a!==void 0&&(h.maxTokens=a),l!==void 0&&(h.metadata=l),Lt.emit("text:started",{requestId:this.requestId,streamId:this.streamId,model:e,provider:this.adapter.name,messageCount:this.initialMessageCount,hasTools:!!n&&n.length>0,streaming:!0,timestamp:Date.now(),clientId:f,toolNames:n?.map(m=>m.name),options:Object.keys(h).length>0?h:void 0,modelOptions:u}),Lt.emit("stream:started",{streamId:this.streamId,model:e,provider:this.adapter.name,timestamp:Date.now()})}afterRun(){if(!this.shouldEmitStreamEnd)return;const e=Date.now();Lt.emit("text:completed",{requestId:this.requestId,streamId:this.streamId,model:this.params.model,content:this.accumulatedContent,messageId:this.currentMessageId||void 0,finishReason:this.lastFinishReason||void 0,usage:this.doneChunk?.usage,timestamp:e}),Lt.emit("stream:ended",{requestId:this.requestId,streamId:this.streamId,totalChunks:this.totalChunkCount,duration:e-this.streamStartTime,timestamp:e})}beginCycle(){this.cyclePhase==="processText"&&this.beginIteration()}endCycle(){if(this.cyclePhase==="processText"){this.cyclePhase="executeToolCalls";return}this.cyclePhase="processText",this.iterationCount++}beginIteration(){this.currentMessageId=this.createId("msg"),this.accumulatedContent="",this.doneChunk=null}async*streamModelResponse(){const{temperature:e,topP:n,maxTokens:r,metadata:s,modelOptions:a}=this.params,u=this.params.tools?.map(f=>({...f,inputSchema:f.inputSchema?xg(f.inputSchema):void 0,outputSchema:f.outputSchema?xg(f.outputSchema):void 0}));for await(const f of this.adapter.chatStream({model:this.params.model,messages:this.messages,tools:u,temperature:e,topP:n,maxTokens:r,metadata:s,request:this.effectiveRequest,modelOptions:a,systemPrompts:this.systemPrompts}))if(this.isAborted()||(this.totalChunkCount++,yield f,this.handleStreamChunk(f),this.earlyTermination))break}handleStreamChunk(e){switch(e.type){case"content":this.handleContentChunk(e);break;case"tool_call":this.handleToolCallChunk(e);break;case"tool_result":this.handleToolResultChunk(e);break;case"done":this.handleDoneChunk(e);break;case"error":this.handleErrorChunk(e);break;case"thinking":this.handleThinkingChunk(e);break}}handleContentChunk(e){this.accumulatedContent=e.content,Lt.emit("stream:chunk:content",{streamId:this.streamId,messageId:this.currentMessageId||void 0,content:e.content,delta:e.delta,timestamp:Date.now()})}handleToolCallChunk(e){this.toolCallManager.addToolCallChunk(e),Lt.emit("stream:chunk:tool-call",{streamId:this.streamId,messageId:this.currentMessageId||void 0,toolCallId:e.toolCall.id,toolName:e.toolCall.function.name,index:e.index,arguments:e.toolCall.function.arguments,timestamp:Date.now()})}handleToolResultChunk(e){Lt.emit("stream:chunk:tool-result",{streamId:this.streamId,messageId:this.currentMessageId||void 0,toolCallId:e.toolCallId,result:e.content,timestamp:Date.now()})}handleDoneChunk(e){if(this.doneChunk?.finishReason==="tool_calls"&&e.finishReason==="stop"){this.lastFinishReason=e.finishReason,Lt.emit("stream:chunk:done",{streamId:this.streamId,messageId:this.currentMessageId||void 0,finishReason:e.finishReason,usage:e.usage,timestamp:Date.now()}),e.usage&&Lt.emit("usage:tokens",{requestId:this.requestId,streamId:this.streamId,messageId:this.currentMessageId||void 0,model:this.params.model,usage:e.usage,timestamp:Date.now()});return}this.doneChunk=e,this.lastFinishReason=e.finishReason,Lt.emit("stream:chunk:done",{streamId:this.streamId,messageId:this.currentMessageId||void 0,finishReason:e.finishReason,usage:e.usage,timestamp:Date.now()}),e.usage&&Lt.emit("usage:tokens",{requestId:this.requestId,streamId:this.streamId,messageId:this.currentMessageId||void 0,model:this.params.model,usage:e.usage,timestamp:Date.now()})}handleErrorChunk(e){Lt.emit("stream:chunk:error",{streamId:this.streamId,messageId:this.currentMessageId||void 0,error:e.error.message,timestamp:Date.now()}),this.earlyTermination=!0,this.shouldEmitStreamEnd=!1}handleThinkingChunk(e){Lt.emit("stream:chunk:thinking",{streamId:this.streamId,messageId:this.currentMessageId||void 0,content:e.content,delta:e.delta,timestamp:Date.now()})}async*checkForPendingToolCalls(){const e=this.getPendingToolCallsFromMessages();if(e.length===0)return"continue";const n=this.createSyntheticDoneChunk();Lt.emit("text:iteration",{requestId:this.requestId,streamId:this.streamId,iterationNumber:this.iterationCount+1,messageCount:this.messages.length,toolCallCount:e.length,timestamp:Date.now()});const{approvals:r,clientToolResults:s}=this.collectClientState(),a=await t1(e,this.tools,r,s);if(a.needsApproval.length>0||a.needsClientExecution.length>0){for(const u of this.emitApprovalRequests(a.needsApproval,n))yield u;for(const u of this.emitClientToolInputs(a.needsClientExecution,n))yield u;return this.shouldEmitStreamEnd=!1,"wait"}const l=this.emitToolResults(a.results,n);for(const u of l)yield u;return"continue"}async*processToolCalls(){if(!this.shouldExecuteToolPhase()){this.setToolPhase("stop");return}const e=this.toolCallManager.getToolCalls(),n=this.doneChunk;if(!n||e.length===0){this.setToolPhase("stop");return}Lt.emit("text:iteration",{requestId:this.requestId,streamId:this.streamId,iterationNumber:this.iterationCount+1,messageCount:this.messages.length,toolCallCount:e.length,timestamp:Date.now()}),this.addAssistantToolCallMessage(e);const{approvals:r,clientToolResults:s}=this.collectClientState(),a=await t1(e,this.tools,r,s);if(a.needsApproval.length>0||a.needsClientExecution.length>0){for(const u of this.emitApprovalRequests(a.needsApproval,n))yield u;for(const u of this.emitClientToolInputs(a.needsClientExecution,n))yield u;this.setToolPhase("wait");return}const l=this.emitToolResults(a.results,n);for(const u of l)yield u;this.toolCallManager.clear(),this.setToolPhase("continue")}shouldExecuteToolPhase(){return this.doneChunk?.finishReason==="tool_calls"&&this.tools.length>0&&this.toolCallManager.hasToolCalls()}addAssistantToolCallMessage(e){this.messages=[...this.messages,{role:"assistant",content:this.accumulatedContent||null,toolCalls:e}]}collectClientState(){const e=new Map,n=new Map;for(const r of this.messages)if(r.role==="assistant"&&r.parts){const s=r.parts;for(const a of s)a.type==="tool-call"&&a.state==="approval-responded"&&a.approval&&e.set(a.approval.id,a.approval.approved),a.type==="tool-call"&&a.output!==void 0&&!a.approval&&n.set(a.id,a.output)}return{approvals:e,clientToolResults:n}}emitApprovalRequests(e,n){const r=[];for(const s of e)Lt.emit("stream:approval-requested",{streamId:this.streamId,messageId:this.currentMessageId||void 0,toolCallId:s.toolCallId,toolName:s.toolName,input:s.input,approvalId:s.approvalId,timestamp:Date.now()}),r.push({type:"approval-requested",id:n.id,model:n.model,timestamp:Date.now(),toolCallId:s.toolCallId,toolName:s.toolName,input:s.input,approval:{id:s.approvalId,needsApproval:!0}});return r}emitClientToolInputs(e,n){const r=[];for(const s of e)Lt.emit("stream:tool-input-available",{streamId:this.streamId,messageId:this.currentMessageId||void 0,toolCallId:s.toolCallId,toolName:s.toolName,input:s.input,timestamp:Date.now()}),r.push({type:"tool-input-available",id:n.id,model:n.model,timestamp:Date.now(),toolCallId:s.toolCallId,toolName:s.toolName,input:s.input});return r}emitToolResults(e,n){const r=[];for(const s of e){Lt.emit("tool:call-completed",{requestId:this.requestId,streamId:this.streamId,messageId:this.currentMessageId||void 0,toolCallId:s.toolCallId,toolName:s.toolName,result:s.result,duration:s.duration??0,timestamp:Date.now()});const a=JSON.stringify(s.result),l={type:"tool_result",id:n.id,model:n.model,timestamp:Date.now(),toolCallId:s.toolCallId,content:a};r.push(l),this.messages=[...this.messages,{role:"tool",content:a,toolCallId:s.toolCallId}]}return r}getPendingToolCallsFromMessages(){const e=new Set(this.messages.filter(r=>r.role==="tool"&&r.toolCallId).map(r=>r.toolCallId)),n=[];for(const r of this.messages)if(r.role==="assistant"&&r.toolCalls)for(const s of r.toolCalls)e.has(s.id)||n.push(s);return n}createSyntheticDoneChunk(){return{type:"done",id:this.createId("pending"),model:this.params.model,timestamp:Date.now(),finishReason:"tool_calls"}}shouldContinue(){return this.cyclePhase==="executeToolCalls"?!0:this.loopStrategy({iterationCount:this.iterationCount,messages:this.messages,finishReason:this.lastFinishReason})&&this.toolPhase==="continue"}isAborted(){return!!this.effectiveSignal?.aborted}setToolPhase(e){this.toolPhase=e,e==="wait"&&(this.shouldEmitStreamEnd=!1)}createId(e){return`${e}-${Date.now()}-${Math.random().toString(36).slice(2,9)}`}}function nP(t){const{outputSchema:e,stream:n}=t;return e?sP(t):n===!1?rP(t):wE(t)}async function*wE(t){const{adapter:e,...n}=t,r=e.model,s=new xE({adapter:e,params:{...n,model:r}});for await(const a of s.run())yield a}function rP(t){const e=wE(t);return W5(e)}async function sP(t){const{adapter:e,outputSchema:n,...r}=t,s=e.model;if(!n)throw new Error("outputSchema is required for structured output");const a=new xE({adapter:e,params:{...r,model:s}});for await(const _ of a.run());const l=a.getMessages(),{tools:u,agentLoopStrategy:f,...h}=r,m=xg(n);if(!m)throw new Error("Failed to convert output schema to JSON Schema");const p=await e.structuredOutput({chatOptions:{...h,model:s,messages:l},outputSchema:m});return Oi(n)?Ua(n,p.data):p.data}function Or(t){return{__toolSide:"definition",...t,server(n){return{__toolSide:"server",...t,execute:n}},client(n){return{__toolSide:"client",...t,execute:n}}}}function n1(t){return t===null?"":typeof t=="string"?t:t.filter(e=>e.type==="text").map(e=>e.content).join("")}function iP(t){const e=[];for(const n of t)"parts"in n?e.push(...SE(n)):e.push(n);return e}function SE(t){const e=[];if(t.role==="system")return e;const n=[],r=[],s=[];for(const u of t.parts)u.type==="text"?n.push(u):u.type==="tool-call"?r.push(u):u.type==="tool-result"&&s.push(u);const a=n.map(u=>u.content).join("")||null,l=r.length>0?r.filter(u=>u.state==="input-complete"||u.state==="approval-responded"||u.output!==void 0).map(u=>({id:u.id,type:"function",function:{name:u.name,arguments:u.arguments}})):void 0;t.role!=="assistant"||a||!l?e.push({role:t.role,content:a,...l&&l.length>0&&{toolCalls:l}}):l.length>0&&e.push({role:"assistant",content:a,toolCalls:l});for(const u of s)(u.state==="complete"||u.state==="error")&&e.push({role:"tool",content:u.content,toolCallId:u.toolCallId});return e}function aP(t,e){const n=[],r=n1(t.content);if(r&&n.push({type:"text",content:r}),t.toolCalls&&t.toolCalls.length>0)for(const s of t.toolCalls)n.push({type:"tool-call",id:s.id,name:s.function.name,arguments:s.function.arguments,state:"input-complete"});return t.role==="tool"&&t.toolCallId&&n.push({type:"tool-result",toolCallId:t.toolCallId,content:n1(t.content),state:"complete"}),{id:e||Rf(),role:t.role==="tool"?"assistant":t.role,parts:n}}function oP(t,e){return"parts"in t?{...t,id:t.id||e(),createdAt:t.createdAt||new Date}:{...aP(t,e()),createdAt:new Date}}function Rf(){return`msg-${Date.now()}-${Math.random().toString(36).substring(7)}`}var xi={},cm={},r1;function s1(){return r1||(r1=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Allow=t.ALL=t.COLLECTION=t.ATOM=t.SPECIAL=t.INF=t._INFINITY=t.INFINITY=t.NAN=t.BOOL=t.NULL=t.OBJ=t.ARR=t.NUM=t.STR=void 0,t.STR=1,t.NUM=2,t.ARR=4,t.OBJ=8,t.NULL=16,t.BOOL=32,t.NAN=64,t.INFINITY=128,t._INFINITY=256,t.INF=t.INFINITY|t._INFINITY,t.SPECIAL=t.NULL|t.BOOL|t.INF|t.NAN,t.ATOM=t.STR|t.NUM|t.SPECIAL,t.COLLECTION=t.ARR|t.OBJ,t.ALL=t.ATOM|t.COLLECTION,t.Allow={STR:t.STR,NUM:t.NUM,ARR:t.ARR,OBJ:t.OBJ,NULL:t.NULL,BOOL:t.BOOL,NAN:t.NAN,INFINITY:t.INFINITY,_INFINITY:t._INFINITY,INF:t.INF,SPECIAL:t.SPECIAL,ATOM:t.ATOM,COLLECTION:t.COLLECTION,ALL:t.ALL},t.default=t.Allow})(cm)),cm}var i1;function lP(){return i1||(i1=1,(function(t){var e=xi&&xi.__createBinding||(Object.create?(function(h,m,p,_){_===void 0&&(_=p);var g=Object.getOwnPropertyDescriptor(m,p);(!g||("get"in g?!m.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return m[p]}}),Object.defineProperty(h,_,g)}):(function(h,m,p,_){_===void 0&&(_=p),h[_]=m[p]})),n=xi&&xi.__exportStar||function(h,m){for(var p in h)p!=="default"&&!Object.prototype.hasOwnProperty.call(m,p)&&e(m,h,p)};Object.defineProperty(t,"__esModule",{value:!0}),t.Allow=t.MalformedJSON=t.PartialJSON=t.parseJSON=t.parse=void 0;const r=s1();Object.defineProperty(t,"Allow",{enumerable:!0,get:function(){return r.Allow}}),n(s1(),t);class s extends Error{}t.PartialJSON=s;class a extends Error{}t.MalformedJSON=a;function l(h,m=r.Allow.ALL){if(typeof h!="string")throw new TypeError(`expecting str, got ${typeof h}`);if(!h.trim())throw new Error(`${h} is empty`);return u(h.trim(),m)}t.parseJSON=l;const u=(h,m)=>{const p=h.length;let _=0;const g=D=>{throw new s(`${D} at position ${_}`)},v=D=>{throw new a(`${D} at position ${_}`)},x=()=>(L(),_>=p&&g("Unexpected end of input"),h[_]==='"'?k():h[_]==="{"?S():h[_]==="["?T():h.substring(_,_+4)==="null"||r.Allow.NULL&m&&p-_<4&&"null".startsWith(h.substring(_))?(_+=4,null):h.substring(_,_+4)==="true"||r.Allow.BOOL&m&&p-_<4&&"true".startsWith(h.substring(_))?(_+=4,!0):h.substring(_,_+5)==="false"||r.Allow.BOOL&m&&p-_<5&&"false".startsWith(h.substring(_))?(_+=5,!1):h.substring(_,_+8)==="Infinity"||r.Allow.INFINITY&m&&p-_<8&&"Infinity".startsWith(h.substring(_))?(_+=8,1/0):h.substring(_,_+9)==="-Infinity"||r.Allow._INFINITY&m&&1<p-_&&p-_<9&&"-Infinity".startsWith(h.substring(_))?(_+=9,-1/0):h.substring(_,_+3)==="NaN"||r.Allow.NAN&m&&p-_<3&&"NaN".startsWith(h.substring(_))?(_+=3,NaN):C()),k=()=>{const D=_;let I=!1;for(_++;_<p&&(h[_]!=='"'||I&&h[_-1]==="\\");)I=h[_]==="\\"?!I:!1,_++;if(h.charAt(_)=='"')try{return JSON.parse(h.substring(D,++_-Number(I)))}catch(P){v(String(P))}else if(r.Allow.STR&m)try{return JSON.parse(h.substring(D,_-Number(I))+'"')}catch{return JSON.parse(h.substring(D,h.lastIndexOf("\\"))+'"')}g("Unterminated string literal")},S=()=>{_++,L();const D={};try{for(;h[_]!=="}";){if(L(),_>=p&&r.Allow.OBJ&m)return D;const I=k();L(),_++;try{const P=x();D[I]=P}catch(P){if(r.Allow.OBJ&m)return D;throw P}L(),h[_]===","&&_++}}catch{if(r.Allow.OBJ&m)return D;g("Expected '}' at end of object")}return _++,D},T=()=>{_++;const D=[];try{for(;h[_]!=="]";)D.push(x()),L(),h[_]===","&&_++}catch{if(r.Allow.ARR&m)return D;g("Expected ']' at end of array")}return _++,D},C=()=>{if(_===0){h==="-"&&v("Not sure what '-' is");try{return JSON.parse(h)}catch(I){if(r.Allow.NUM&m)try{return JSON.parse(h.substring(0,h.lastIndexOf("e")))}catch{}v(String(I))}}const D=_;for(h[_]==="-"&&_++;h[_]&&",]}".indexOf(h[_])===-1;)_++;_==p&&!(r.Allow.NUM&m)&&g("Unterminated number literal");try{return JSON.parse(h.substring(D,_))}catch{h.substring(D,_)==="-"&&g("Not sure what '-' is");try{return JSON.parse(h.substring(D,h.lastIndexOf("e")))}catch(P){v(String(P))}}},L=()=>{for(;_<p&&` 
\r	`.includes(h[_]);)_++};return x()},f=l;t.parse=f})(xi)),xi}var cP=lP();class uP{parse(e){if(!(!e||e.trim()===""))try{return cP.parse(e)}catch{return}}}const fP=new uP;function hP(t,e,n){return t.map(r=>{if(r.id!==e)return r;const s=[...r.parts],a=s.length>0?s[s.length-1]:null;return a&&a.type==="text"?s[s.length-1]={type:"text",content:n}:s.push({type:"text",content:n}),{...r,parts:s}})}function um(t,e,n){return t.map(r=>{if(r.id!==e)return r;const s=[...r.parts],a=s.findIndex(u=>u.type==="tool-call"&&u.id===n.id),l={type:"tool-call",id:n.id,name:n.name,arguments:n.arguments,state:n.state};return a>=0?s[a]=l:s.push(l),{...r,parts:s}})}function a1(t,e,n,r,s,a){return t.map(l=>{if(l.id!==e)return l;const u=[...l.parts],f=u.findIndex(m=>m.type==="tool-result"&&m.toolCallId===n),h={type:"tool-result",toolCallId:n,content:r,state:s,...a&&{error:a}};return f>=0?u[f]=h:u.push(h),{...l,parts:u}})}function dP(t,e,n,r){return t.map(s=>{if(s.id!==e)return s;const a=[...s.parts],l=a.find(u=>u.type==="tool-call"&&u.id===n);return l&&(l.state="approval-requested",l.approval={id:r,needsApproval:!0}),{...s,parts:a}})}function pP(t,e,n,r,s){return t.map(a=>{const l=[...a.parts],u=l.find(f=>f.type==="tool-call"&&f.id===e);return u&&(u.output=s?{error:s}:n,r?u.state=r:u.state="input-complete"),{...a,parts:l}})}function mP(t,e,n){return t.map(r=>{const s=[...r.parts],a=s.find(l=>l.type==="tool-call"&&l.approval?.id===e);return a&&a.approval&&(a.approval.approved=n,a.state="approval-responded"),{...r,parts:s}})}function gP(t,e,n){return t.map(r=>{if(r.id!==e)return r;const s=[...r.parts],a=s.findIndex(u=>u.type==="thinking"),l={type:"thinking",content:n};return a>=0?s[a]=l:s.push(l),{...r,parts:s}})}class yP{shouldEmit(e,n){return!0}}class Ry{constructor(e={}){this.messages=[],this.currentAssistantMessageId=null,this.totalTextContent="",this.currentSegmentText="",this.lastEmittedText="",this.thinkingContent="",this.toolCalls=new Map,this.toolCallOrder=[],this.finishReason=null,this.isDone=!1,this.hasToolCallsSinceTextStart=!1,this.recording=null,this.recordingStartTime=0,this.chunkStrategy=e.chunkStrategy||new yP,this.events=e.events||{},this.handlers=e.handlers||{},this.jsonParser=e.jsonParser||fP,this.recordingEnabled=e.recording??!1,e.initialMessages&&(this.messages=[...e.initialMessages])}setMessages(e){this.messages=[...e],this.emitMessagesChange()}addUserMessage(e){const n={id:Rf(),role:"user",parts:[{type:"text",content:e}],createdAt:new Date};return this.messages=[...this.messages,n],this.emitMessagesChange(),n}startAssistantMessage(){this.resetStreamState();const e={id:Rf(),role:"assistant",parts:[],createdAt:new Date};return this.currentAssistantMessageId=e.id,this.messages=[...this.messages,e],this.events.onStreamStart?.(),this.emitMessagesChange(),e.id}addToolResult(e,n,r){const s=this.messages.find(f=>f.parts.some(h=>h.type==="tool-call"&&h.id===e));if(!s){console.warn(`[StreamProcessor] Could not find message with tool call ${e}`);return}let a=pP(this.messages,e,n,r?"input-complete":void 0,r);const l=typeof n=="string"?n:JSON.stringify(n),u=r?"error":"complete";a=a1(a,s.id,e,l,u,r),this.messages=a,this.emitMessagesChange()}addToolApprovalResponse(e,n){this.messages=mP(this.messages,e,n),this.emitMessagesChange()}toModelMessages(){const e=[];for(const n of this.messages)e.push(...SE(n));return e}getMessages(){return this.messages}areAllToolsComplete(){const e=this.messages.findLast(r=>r.role==="assistant");if(!e)return!0;const n=e.parts.filter(r=>r.type==="tool-call");return n.length===0?!0:n.every(r=>r.state==="approval-responded"||r.output!==void 0&&!r.approval)}removeMessagesAfter(e){this.messages=this.messages.slice(0,e+1),this.emitMessagesChange()}clearMessages(){this.messages=[],this.currentAssistantMessageId=null,this.emitMessagesChange()}async process(e){this.resetStreamState(),this.recordingEnabled&&this.startRecording();for await(const n of e)this.processChunk(n);return this.finalizeStream(),this.recording&&(this.recording.result=this.getResult()),this.getResult()}processChunk(e){switch(this.recording&&this.recording.chunks.push({chunk:e,timestamp:Date.now(),index:this.recording.chunks.length}),e.type){case"content":this.handleContentChunk(e);break;case"tool_call":this.handleToolCallChunk(e);break;case"tool_result":this.handleToolResultChunk(e);break;case"done":this.handleDoneChunk(e);break;case"error":this.handleErrorChunk(e);break;case"thinking":this.handleThinkingChunk(e);break;case"approval-requested":this.handleApprovalRequestedChunk(e);break;case"tool-input-available":this.handleToolInputAvailableChunk(e);break}}handleContentChunk(e){this.completeAllToolCalls();const n=this.currentSegmentText;this.hasToolCallsSinceTextStart&&n.length>0&&this.isNewTextSegment(e,n)&&(n!==this.lastEmittedText&&this.emitTextUpdate(),this.currentSegmentText="",this.lastEmittedText="",this.hasToolCallsSinceTextStart=!1);const s=this.currentSegmentText;let a=s;e.delta!==""?a=s+e.delta:e.content!==""&&(e.content.startsWith(s)?a=e.content:s.startsWith(e.content)?a=s:a=s+e.content);const l=a.slice(s.length);this.currentSegmentText=a,this.totalTextContent+=l;const u=e.delta??e.content??"";this.chunkStrategy.shouldEmit(u,this.currentSegmentText)&&this.currentSegmentText!==this.lastEmittedText&&this.emitTextUpdate()}handleToolCallChunk(e){this.hasToolCallsSinceTextStart=!0;const n=e.toolCall.id,r=this.toolCalls.get(n);if(r){const s=r.state==="awaiting-input";r.arguments+=e.toolCall.function.arguments||"",s&&e.toolCall.function.arguments&&(r.state="input-streaming"),r.parsedArguments=this.jsonParser.parse(r.arguments);const a=this.toolCallOrder.indexOf(n);this.handlers.onToolCallStateChange?.(a,r.id,r.name,r.state,r.arguments,r.parsedArguments),e.toolCall.function.arguments&&this.handlers.onToolCallDelta?.(a,e.toolCall.function.arguments),this.currentAssistantMessageId&&(this.messages=um(this.messages,this.currentAssistantMessageId,{id:r.id,name:r.name,arguments:r.arguments,state:r.state}),this.emitMessagesChange(),this.events.onToolCallStateChange?.(this.currentAssistantMessageId,r.id,r.state,r.arguments))}else{const s=e.toolCall.function.arguments?"input-streaming":"awaiting-input",a={id:e.toolCall.id,name:e.toolCall.function.name,arguments:e.toolCall.function.arguments||"",state:s,parsedArguments:void 0,index:e.index};e.toolCall.function.arguments&&(a.parsedArguments=this.jsonParser.parse(e.toolCall.function.arguments)),this.toolCalls.set(n,a),this.toolCallOrder.push(n);const l=this.toolCallOrder.indexOf(n);this.handlers.onToolCallStart?.(l,e.toolCall.id,e.toolCall.function.name),this.handlers.onToolCallStateChange?.(l,e.toolCall.id,e.toolCall.function.name,s,e.toolCall.function.arguments||"",a.parsedArguments),e.toolCall.function.arguments&&this.handlers.onToolCallDelta?.(l,e.toolCall.function.arguments),this.currentAssistantMessageId&&(this.messages=um(this.messages,this.currentAssistantMessageId,{id:e.toolCall.id,name:e.toolCall.function.name,arguments:e.toolCall.function.arguments||"",state:s}),this.emitMessagesChange(),this.events.onToolCallStateChange?.(this.currentAssistantMessageId,e.toolCall.id,s,e.toolCall.function.arguments||""))}}handleToolResultChunk(e){const n="complete";this.handlers.onToolResultStateChange?.(e.toolCallId,e.content,n),this.currentAssistantMessageId&&(this.messages=a1(this.messages,this.currentAssistantMessageId,e.toolCallId,e.content,n),this.emitMessagesChange())}handleDoneChunk(e){this.finishReason=e.finishReason,this.isDone=!0,this.completeAllToolCalls()}handleErrorChunk(e){this.handlers.onError?.(e.error),this.events.onError?.(new Error(e.error.message))}handleThinkingChunk(e){const n=this.thinkingContent;let r=n;e.delta!==""?r=n+e.delta:e.content!==""&&(e.content.startsWith(n)?r=e.content:n.startsWith(e.content)?r=n:r=n+e.content),this.thinkingContent=r,this.handlers.onThinkingUpdate?.(this.thinkingContent),this.currentAssistantMessageId&&(this.messages=gP(this.messages,this.currentAssistantMessageId,this.thinkingContent),this.emitMessagesChange(),this.events.onThinkingUpdate?.(this.currentAssistantMessageId,this.thinkingContent))}handleApprovalRequestedChunk(e){this.handlers.onApprovalRequested?.(e.toolCallId,e.toolName,e.input,e.approval.id),this.currentAssistantMessageId&&(this.messages=dP(this.messages,this.currentAssistantMessageId,e.toolCallId,e.approval.id),this.emitMessagesChange()),this.events.onApprovalRequest?.({toolCallId:e.toolCallId,toolName:e.toolName,input:e.input,approvalId:e.approval.id})}handleToolInputAvailableChunk(e){this.handlers.onToolInputAvailable?.(e.toolCallId,e.toolName,e.input),this.events.onToolCall?.({toolCallId:e.toolCallId,toolName:e.toolName,input:e.input})}isNewTextSegment(e,n){return e.delta!==void 0&&e.content!==void 0&&(e.content.length<n.length||!e.content.startsWith(n)&&!n.startsWith(e.content))}completeAllToolCalls(){this.toolCalls.forEach((e,n)=>{if(e.state!=="input-complete"){const r=this.toolCallOrder.indexOf(n);this.completeToolCall(r,e)}})}completeToolCall(e,n){n.state="input-complete",n.parsedArguments=this.jsonParser.parse(n.arguments),this.handlers.onToolCallStateChange?.(e,n.id,n.name,"input-complete",n.arguments,n.parsedArguments),this.handlers.onToolCallComplete?.(e,n.id,n.name,n.arguments),this.currentAssistantMessageId&&(this.messages=um(this.messages,this.currentAssistantMessageId,{id:n.id,name:n.name,arguments:n.arguments,state:"input-complete"}),this.emitMessagesChange(),this.events.onToolCallStateChange?.(this.currentAssistantMessageId,n.id,"input-complete",n.arguments))}emitTextUpdate(){this.lastEmittedText=this.currentSegmentText,this.handlers.onTextUpdate?.(this.currentSegmentText),this.currentAssistantMessageId&&(this.messages=hP(this.messages,this.currentAssistantMessageId,this.currentSegmentText),this.emitMessagesChange(),this.events.onTextUpdate?.(this.currentAssistantMessageId,this.currentSegmentText))}emitMessagesChange(){this.events.onMessagesChange?.([...this.messages])}finalizeStream(){this.completeAllToolCalls(),this.currentSegmentText!==this.lastEmittedText&&this.emitTextUpdate();const e=this.getCompletedToolCalls();if(this.handlers.onStreamEnd?.(this.totalTextContent,e.length>0?e:void 0),this.currentAssistantMessageId){const n=this.messages.find(r=>r.id===this.currentAssistantMessageId);n&&this.events.onStreamEnd?.(n)}}getCompletedToolCalls(){return Array.from(this.toolCalls.values()).filter(e=>e.state==="input-complete").map(e=>({id:e.id,type:"function",function:{name:e.name,arguments:e.arguments}}))}getResult(){const e=this.getCompletedToolCalls();return{content:this.totalTextContent,thinking:this.thinkingContent||void 0,toolCalls:e.length>0?e:void 0,finishReason:this.finishReason}}getState(){return{content:this.totalTextContent,thinking:this.thinkingContent,toolCalls:new Map(this.toolCalls),toolCallOrder:[...this.toolCallOrder],finishReason:this.finishReason,done:this.isDone}}startRecording(){this.recordingEnabled=!0,this.recordingStartTime=Date.now(),this.recording={version:"1.0",timestamp:this.recordingStartTime,chunks:[]}}getRecording(){return this.recording}resetStreamState(){this.totalTextContent="",this.currentSegmentText="",this.lastEmittedText="",this.thinkingContent="",this.toolCalls.clear(),this.toolCallOrder=[],this.finishReason=null,this.isDone=!1,this.hasToolCallsSinceTextStart=!1,this.chunkStrategy.reset?.()}reset(){this.resetStreamState(),this.messages=[],this.currentAssistantMessageId=null}static async replay(e,n){return new Ry(n).process(_P(e))}}function _P(t){return{async*[Symbol.asyncIterator](){for(const{chunk:e}of t.chunks)yield e}}}class bP{constructor(e){this.clientId=e}clientCreated(e){this.emitEvent("client:created",{initialMessageCount:e})}loadingChanged(e){this.emitEvent("client:loading-changed",{isLoading:e})}errorChanged(e){this.emitEvent("client:error-changed",{error:e})}textUpdated(e,n,r){this.emitEvent("processor:text-updated",{streamId:e,content:r}),this.emitEvent("client:assistant-message-updated",{messageId:n,content:r})}toolCallStateChanged(e,n,r,s,a,l){this.emitEvent("processor:tool-call-state-changed",{streamId:e,toolCallId:r,toolName:s,state:a,arguments:l}),this.emitEvent("client:tool-call-updated",{messageId:n,toolCallId:r,toolName:s,state:a,arguments:l})}toolResultStateChanged(e,n,r,s,a){this.emitEvent("processor:tool-result-state-changed",{streamId:e,toolCallId:n,content:r,state:s,error:a})}thinkingUpdated(e,n,r,s){this.emitEvent("stream:chunk:thinking",{streamId:e,messageId:n,content:r,delta:s})}approvalRequested(e,n,r,s,a){this.emitEvent("client:approval-requested",{messageId:e,toolCallId:n,toolName:r,input:s,approvalId:a})}messageAppended(e){const n=e.parts.filter(r=>r.type==="text").map(r=>r.content).join(" ").substring(0,100);this.emitEvent("client:message-appended",{messageId:e.id,role:e.role,contentPreview:n})}messageSent(e,n){this.emitEvent("client:message-sent",{messageId:e,content:n})}reloaded(e){this.emitEvent("client:reloaded",{fromMessageIndex:e})}stopped(){this.emitEvent("client:stopped")}messagesCleared(){this.emitEvent("client:messages-cleared")}toolResultAdded(e,n,r,s){this.emitEvent("tool:result-added",{toolCallId:e,toolName:n,output:r,state:s})}toolApprovalResponded(e,n,r){this.emitEvent("tool:approval-responded",{approvalId:e,toolCallId:n,approved:r})}}class vP extends bP{emitEvent(e,n){e.startsWith("client:")||e.startsWith("tool:")?Lt.emit(e,{...n,clientId:this.clientId,timestamp:Date.now()}):Lt.emit(e,{...n,timestamp:Date.now()})}}class xP{constructor(e){if(this.body={},this.isLoading=!1,this.error=void 0,this.abortController=null,this.currentStreamId=null,this.currentMessageId=null,this.postStreamActions=[],this.uniqueId=e.id||this.generateUniqueId("chat"),this.body=e.body||{},this.connection=e.connection,this.events=new vP(this.uniqueId),this.clientToolsRef={current:new Map},e.tools)for(const n of e.tools)this.clientToolsRef.current.set(n.name,n);this.callbacksRef={current:{onResponse:e.onResponse||(()=>{}),onChunk:e.onChunk||(()=>{}),onFinish:e.onFinish||(()=>{}),onError:e.onError||(()=>{}),onMessagesChange:e.onMessagesChange||(()=>{}),onLoadingChange:e.onLoadingChange||(()=>{}),onErrorChange:e.onErrorChange||(()=>{})}},this.processor=new Ry({chunkStrategy:e.streamProcessor?.chunkStrategy,initialMessages:e.initialMessages,events:{onMessagesChange:n=>{this.callbacksRef.current.onMessagesChange(n)},onStreamStart:()=>{},onStreamEnd:n=>{this.callbacksRef.current.onFinish(n)},onError:n=>{this.setError(n),this.callbacksRef.current.onError(n)},onTextUpdate:(n,r)=>{this.currentStreamId&&this.events.textUpdated(this.currentStreamId,n,r)},onThinkingUpdate:(n,r)=>{this.currentStreamId&&this.events.thinkingUpdated(this.currentStreamId,n,r)},onToolCallStateChange:(n,r,s,a)=>{const h=this.processor.getMessages().find(m=>m.id===n)?.parts.find(m=>m.type==="tool-call"&&m.id===r)?.name||"unknown";this.currentStreamId&&this.events.toolCallStateChanged(this.currentStreamId,n,r,h,s,a)},onToolCall:async n=>{const r=this.clientToolsRef.current.get(n.toolName);if(r?.execute)try{const s=await r.execute(n.input);await this.addToolResult({toolCallId:n.toolCallId,tool:n.toolName,output:s,state:"output-available"})}catch(s){await this.addToolResult({toolCallId:n.toolCallId,tool:n.toolName,output:null,state:"output-error",errorText:s.message})}},onApprovalRequest:n=>{this.events.approvalRequested(this.currentMessageId||"",n.toolCallId,n.toolName,n.input,n.approvalId)}}}),this.events.clientCreated(this.processor.getMessages().length)}generateUniqueId(e){return`${e}-${Date.now()}-${Math.random().toString(36).substring(7)}`}setIsLoading(e){this.isLoading=e,this.callbacksRef.current.onLoadingChange(e),this.events.loadingChanged(e)}setError(e){this.error=e,this.callbacksRef.current.onErrorChange(e),this.events.errorChanged(e?.message||null)}async processStream(e){this.currentStreamId=this.generateUniqueId("stream");const n=this.processor.startAssistantMessage();this.currentMessageId=n;const r={id:n,role:"assistant",parts:[],createdAt:new Date};this.events.messageAppended(r);for await(const l of e)this.callbacksRef.current.onChunk(l),this.processor.processChunk(l),await new Promise(u=>setTimeout(u,0));return this.processor.finalizeStream(),this.currentStreamId=null,this.currentMessageId=null,this.processor.getMessages().find(l=>l.id===n)||{id:n,role:"assistant",parts:[],createdAt:new Date}}async sendMessage(e){if(!e.trim()||this.isLoading)return;const n=this.processor.addUserMessage(e.trim());this.events.messageSent(n.id,e.trim()),await this.streamResponse()}async append(e){const n=oP(e,Rf);if(n.role==="system")return;const r=n;this.events.messageAppended(r);const s=this.processor.getMessages();this.processor.setMessages([...s,r]),await this.streamResponse()}async streamResponse(){this.setIsLoading(!0),this.setError(void 0),this.abortController=new AbortController;try{const e=this.processor.toModelMessages();await this.callbacksRef.current.onResponse();const n={...this.body,conversationId:this.uniqueId},r=this.connection.connect(e,n,this.abortController.signal);await this.processStream(r)}catch(e){if(e instanceof Error){if(e.name==="AbortError")return;this.setError(e),this.callbacksRef.current.onError(e)}}finally{this.abortController=null,this.setIsLoading(!1),await this.drainPostStreamActions()}}async reload(){const e=this.processor.getMessages();if(e.length===0)return;const n=e.findLastIndex(r=>r.role==="user");n!==-1&&(this.events.reloaded(n),this.processor.removeMessagesAfter(n),await this.streamResponse())}stop(){this.abortController&&(this.abortController.abort(),this.abortController=null),this.setIsLoading(!1),this.events.stopped()}clear(){this.processor.clearMessages(),this.setError(void 0),this.events.messagesCleared()}async addToolResult(e){if(this.events.toolResultAdded(e.toolCallId,e.tool,e.output,e.state||"output-available"),this.processor.addToolResult(e.toolCallId,e.output,e.errorText),this.isLoading){this.queuePostStreamAction(()=>this.checkForContinuation());return}await this.checkForContinuation()}async addToolApprovalResponse(e){const n=this.processor.getMessages();let r;for(const s of n){const a=s.parts.find(l=>l.type==="tool-call"&&l.approval?.id===e.id);if(a){r=a.id;break}}if(r&&this.events.toolApprovalResponded(e.id,r,e.approved),this.processor.addToolApprovalResponse(e.id,e.approved),this.isLoading){this.queuePostStreamAction(()=>this.checkForContinuation());return}await this.checkForContinuation()}queuePostStreamAction(e){this.postStreamActions.push(e)}async drainPostStreamActions(){for(;this.postStreamActions.length>0;)await this.postStreamActions.shift()()}async checkForContinuation(){this.shouldAutoSend()&&await this.streamResponse()}shouldAutoSend(){return this.processor.areAllToolsComplete()}getMessages(){return this.processor.getMessages()}getIsLoading(){return this.isLoading}getError(){return this.error}setMessagesManually(e){this.processor.setMessages(e)}updateOptions(e){if(e.connection!==void 0&&(this.connection=e.connection),e.body!==void 0&&(this.body=e.body),e.tools!==void 0){this.clientToolsRef.current=new Map;for(const n of e.tools)this.clientToolsRef.current.set(n.name,n)}e.onResponse!==void 0&&(this.callbacksRef.current.onResponse=e.onResponse),e.onChunk!==void 0&&(this.callbacksRef.current.onChunk=e.onChunk),e.onFinish!==void 0&&(this.callbacksRef.current.onFinish=e.onFinish),e.onError!==void 0&&(this.callbacksRef.current.onError=e.onError)}}function wP(...t){return t}function SP(t){return{async*connect(e,n){const r=iP(e);yield*t(r,n)}}}function kP(t){const e=J.useId(),n=t.id||e,[r,s]=J.useState(t.initialMessages||[]),[a,l]=J.useState(!1),[u,f]=J.useState(void 0),h=J.useRef(t.initialMessages||[]),m=J.useRef(!0);J.useEffect(()=>{h.current=r},[r]);const p=J.useRef(t);p.current=t;const _=J.useMemo(()=>{const D=m.current?t.initialMessages||[]:h.current;return m.current=!1,new xP({connection:p.current.connection,id:n,initialMessages:D,body:p.current.body,onResponse:p.current.onResponse,onChunk:p.current.onChunk,onFinish:p.current.onFinish,onError:p.current.onError,tools:p.current.tools,streamProcessor:t.streamProcessor,onMessagesChange:I=>{s(I)},onLoadingChange:I=>{l(I)},onErrorChange:I=>{f(I)}})},[n]);J.useEffect(()=>{t.initialMessages&&t.initialMessages.length>0&&r.length===0&&_.setMessagesManually(t.initialMessages)},[]),J.useEffect(()=>()=>{_.stop()},[_]);const g=J.useCallback(async D=>{await _.sendMessage(D)},[_]),v=J.useCallback(async D=>{await _.append(D)},[_]),x=J.useCallback(async()=>{await _.reload()},[_]),k=J.useCallback(()=>{_.stop()},[_]),S=J.useCallback(()=>{_.clear()},[_]),T=J.useCallback(D=>{_.setMessagesManually(D)},[_]),C=J.useCallback(async D=>{await _.addToolResult(D)},[_]),L=J.useCallback(async D=>{await _.addToolApprovalResponse(D)},[_]);return{messages:r,sendMessage:g,append:v,reload:x,stop:k,isLoading:a,error:u,setMessages:T,clear:S,addToolResult:C,addToolApprovalResponse:L}}class EP{constructor(e={},n){this.kind="text",this.config=e,this.model=n}generateId(){return`${this.name}-${Date.now()}-${Math.random().toString(36).substring(7)}`}}const CP=t=>{if(t.conversation&&t.previous_response_id)throw new Error("Cannot use both 'conversation' and 'previous_response_id' in the same request.")},TP=t=>{AP(t),CP(t)},AP=t=>{const e=t.metadata;if(e&&Object.keys(e).length>16)throw new Error("Metadata cannot have more than 16 key-value pairs.");if(e&&Object.keys(e).some(a=>a.length>64))throw new Error("Metadata keys cannot be longer than 64 characters.");if(e&&Object.values(e).some(a=>a.length>512))throw new Error("Metadata values cannot be longer than 512 characters.")};function wg(t){if(t!==null){if(Array.isArray(t))return t.map(e=>wg(e));if(typeof t=="object"){const e={};for(const[n,r]of Object.entries(t)){const s=wg(r);s!==void 0&&(e[n]=s)}return e}return t}}function xl(t,e=[]){const n={...t};if(n.type==="object"&&n.properties){const r={...n.properties},s=Object.keys(r);for(const a of s){const l=r[a],u=!e.includes(a);l.type==="object"&&l.properties?r[a]=xl(l,l.required||[]):l.type==="array"&&l.items?r[a]={...l,items:xl(l.items,l.items.required||[])}:u&&(l.type&&!Array.isArray(l.type)?r[a]={...l,type:[l.type,"null"]}:Array.isArray(l.type)&&!l.type.includes("null")&&(r[a]={...l,type:[...l.type,"null"]}))}n.properties=r,n.required=s,n.additionalProperties=!1}return n.type==="array"&&n.items&&(n.items=xl(n.items,n.items.required||[])),n}function RP(t){return{type:"apply_patch"}}function OP(t){return{type:"code_interpreter",container:t.metadata.container}}function IP(t){const e=t.metadata;return{type:"computer_use_preview",display_height:e.display_height,display_width:e.display_width,environment:e.environment}}function NP(t){const e=t.metadata;return{type:"custom",name:e.name,description:e.description,format:e.format}}function MP(t){const e=t.metadata;return{type:"file_search",vector_store_ids:e.vector_store_ids,max_num_results:e.max_num_results,ranking_options:e.ranking_options,filters:e.filters}}function DP(t){const e=t.inputSchema??{type:"object",properties:{},required:[]},n=xl(e,e.required||[]);return n.additionalProperties=!1,{type:"function",name:t.name,description:t.description,parameters:n,strict:!0}}function LP(t){return{type:"image_generation",...t.metadata}}function zP(t){return{type:"local_shell"}}function jP(t){if(!t.server_url&&!t.connector_id)throw new Error("Either server_url or connector_id must be provided.");if(t.connector_id&&t.server_url)throw new Error("Only one of server_url or connector_id can be provided.")}function PP(t){const n={type:"mcp",...t.metadata};return jP(n),n}function BP(t){return{type:"shell"}}function UP(t){const e=t.metadata;return{type:e.type,search_context_size:e.search_context_size,user_location:e.user_location}}function $P(t){return t.metadata}function qP(t){return t.map(e=>{const n=new Set(["apply_patch","code_interpreter","computer_use_preview","file_search","image_generation","local_shell","mcp","shell","web_search_preview","web_search","custom"]),r=e.name;if(n.has(r))switch(r){case"apply_patch":return RP();case"code_interpreter":return OP(e);case"computer_use_preview":return IP(e);case"file_search":return MP(e);case"image_generation":return LP(e);case"local_shell":return zP();case"mcp":return PP(e);case"shell":return BP();case"web_search_preview":return UP(e);case"web_search":return $P(e);case"custom":return NP(e)}return DP(e)})}function Ne(t,e,n,r,s){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n}function ee(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)}let kE=function(){const{crypto:t}=globalThis;if(t?.randomUUID)return kE=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,r=>(+r^n()&15>>+r/4).toString(16))};function Sg(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const kg=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};class Te extends Error{}class fn extends Te{constructor(e,n,r,s){super(`${fn.makeMessage(e,n,r)}`),this.status=e,this.headers=s,this.requestID=s?.get("x-request-id"),this.error=n;const a=n;this.code=a?.code,this.param=a?.param,this.type=a?.type}static makeMessage(e,n,r){const s=n?.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return e&&s?`${e} ${s}`:e?`${e} status code (no body)`:s||"(no status code or body)"}static generate(e,n,r,s){if(!e||!s)return new ih({message:r,cause:kg(n)});const a=n?.error;return e===400?new EE(e,a,r,s):e===401?new CE(e,a,r,s):e===403?new TE(e,a,r,s):e===404?new AE(e,a,r,s):e===409?new RE(e,a,r,s):e===422?new OE(e,a,r,s):e===429?new IE(e,a,r,s):e>=500?new NE(e,a,r,s):new fn(e,a,r,s)}}class vr extends fn{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class ih extends fn{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class Oy extends ih{constructor({message:e}={}){super({message:e??"Request timed out."})}}class EE extends fn{}class CE extends fn{}class TE extends fn{}class AE extends fn{}class RE extends fn{}class OE extends fn{}class IE extends fn{}class NE extends fn{}class ME extends Te{constructor(){super("Could not parse response content as the length limit was reached")}}class DE extends Te{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}class ol extends Error{constructor(e){super(e)}}const FP=/^[a-z][a-z0-9+.-]*:/i,VP=t=>FP.test(t);let Pn=t=>(Pn=Array.isArray,Pn(t)),o1=Pn;function LE(t){return typeof t!="object"?{}:t??{}}function HP(t){if(!t)return!0;for(const e in t)return!1;return!0}function GP(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function fm(t){return t!=null&&typeof t=="object"&&!Array.isArray(t)}const KP=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Te(`${t} must be an integer`);if(e<0)throw new Te(`${t} must be a positive integer`);return e},ZP=t=>{try{return JSON.parse(t)}catch{return}},Yl=t=>new Promise(e=>setTimeout(e,t)),Aa="6.15.0",QP=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u";function JP(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const YP=()=>{const t=JP();if(t==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Aa,"X-Stainless-OS":c1(Deno.build.os),"X-Stainless-Arch":l1(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:Deno.version?.deno??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Aa,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(t==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Aa,"X-Stainless-OS":c1(globalThis.process.platform??"unknown"),"X-Stainless-Arch":l1(globalThis.process.arch??"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":globalThis.process.version??"unknown"};const e=XP();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Aa,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Aa,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function XP(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const r=n.exec(navigator.userAgent);if(r){const s=r[1]||0,a=r[2]||0,l=r[3]||0;return{browser:e,version:`${s}.${a}.${l}`}}}return null}const l1=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",c1=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let u1;const WP=()=>u1??(u1=YP());function e6(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new OpenAI({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function zE(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function jE(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return zE({start(){},async pull(n){const{done:r,value:s}=await e.next();r?n.close():n.enqueue(s)},async cancel(){await e.return?.()}})}function PE(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n?.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function t6(t){if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await t[Symbol.asyncIterator]().return?.();return}const e=t.getReader(),n=e.cancel();e.releaseLock(),await n}const n6=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)}),BE="RFC3986",UE=t=>String(t),f1={RFC1738:t=>String(t).replace(/%20/g,"+"),RFC3986:UE},r6="RFC1738";let Eg=(t,e)=>(Eg=Object.hasOwn??Function.prototype.call.bind(Object.prototype.hasOwnProperty),Eg(t,e));const Lr=(()=>{const t=[];for(let e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t})(),hm=1024,s6=(t,e,n,r,s)=>{if(t.length===0)return t;let a=t;if(typeof t=="symbol"?a=Symbol.prototype.toString.call(t):typeof t!="string"&&(a=String(t)),n==="iso-8859-1")return escape(a).replace(/%u[0-9a-f]{4}/gi,function(u){return"%26%23"+parseInt(u.slice(2),16)+"%3B"});let l="";for(let u=0;u<a.length;u+=hm){const f=a.length>=hm?a.slice(u,u+hm):a,h=[];for(let m=0;m<f.length;++m){let p=f.charCodeAt(m);if(p===45||p===46||p===95||p===126||p>=48&&p<=57||p>=65&&p<=90||p>=97&&p<=122||s===r6&&(p===40||p===41)){h[h.length]=f.charAt(m);continue}if(p<128){h[h.length]=Lr[p];continue}if(p<2048){h[h.length]=Lr[192|p>>6]+Lr[128|p&63];continue}if(p<55296||p>=57344){h[h.length]=Lr[224|p>>12]+Lr[128|p>>6&63]+Lr[128|p&63];continue}m+=1,p=65536+((p&1023)<<10|f.charCodeAt(m)&1023),h[h.length]=Lr[240|p>>18]+Lr[128|p>>12&63]+Lr[128|p>>6&63]+Lr[128|p&63]}l+=h.join("")}return l};function i6(t){return!t||typeof t!="object"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))}function h1(t,e){if(Pn(t)){const n=[];for(let r=0;r<t.length;r+=1)n.push(e(t[r]));return n}return e(t)}const $E={brackets(t){return String(t)+"[]"},comma:"comma",indices(t,e){return String(t)+"["+e+"]"},repeat(t){return String(t)}},qE=function(t,e){Array.prototype.push.apply(t,Pn(e)?e:[e])};let d1;const $t={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:s6,encodeValuesOnly:!1,format:BE,formatter:UE,indices:!1,serializeDate(t){return(d1??(d1=Function.prototype.call.bind(Date.prototype.toISOString)))(t)},skipNulls:!1,strictNullHandling:!1};function a6(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="symbol"||typeof t=="bigint"}const dm={};function FE(t,e,n,r,s,a,l,u,f,h,m,p,_,g,v,x,k,S){let T=t,C=S,L=0,D=!1;for(;(C=C.get(dm))!==void 0&&!D;){const z=C.get(t);if(L+=1,typeof z<"u"){if(z===L)throw new RangeError("Cyclic object value");D=!0}typeof C.get(dm)>"u"&&(L=0)}if(typeof h=="function"?T=h(e,T):T instanceof Date?T=_?.(T):n==="comma"&&Pn(T)&&(T=h1(T,function(z){return z instanceof Date?_?.(z):z})),T===null){if(a)return f&&!x?f(e,$t.encoder,k,"key",g):e;T=""}if(a6(T)||i6(T)){if(f){const z=x?e:f(e,$t.encoder,k,"key",g);return[v?.(z)+"="+v?.(f(T,$t.encoder,k,"value",g))]}return[v?.(e)+"="+v?.(String(T))]}const I=[];if(typeof T>"u")return I;let P;if(n==="comma"&&Pn(T))x&&f&&(T=h1(T,f)),P=[{value:T.length>0?T.join(",")||null:void 0}];else if(Pn(h))P=h;else{const z=Object.keys(T);P=m?z.sort(m):z}const V=u?String(e).replace(/\./g,"%2E"):String(e),H=r&&Pn(T)&&T.length===1?V+"[]":V;if(s&&Pn(T)&&T.length===0)return H+"[]";for(let z=0;z<P.length;++z){const Q=P[z],j=typeof Q=="object"&&typeof Q.value<"u"?Q.value:T[Q];if(l&&j===null)continue;const se=p&&u?Q.replace(/\./g,"%2E"):Q,Z=Pn(T)?typeof n=="function"?n(H,se):H:H+(p?"."+se:"["+se+"]");S.set(t,L);const $=new WeakMap;$.set(dm,S),qE(I,FE(j,Z,n,r,s,a,l,u,n==="comma"&&x&&Pn(T)?null:f,h,m,p,_,g,v,x,k,$))}return I}function o6(t=$t){if(typeof t.allowEmptyArrays<"u"&&typeof t.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof t.encodeDotInKeys<"u"&&typeof t.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(t.encoder!==null&&typeof t.encoder<"u"&&typeof t.encoder!="function")throw new TypeError("Encoder has to be a function.");const e=t.charset||$t.charset;if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let n=BE;if(typeof t.format<"u"){if(!Eg(f1,t.format))throw new TypeError("Unknown format option provided.");n=t.format}const r=f1[n];let s=$t.filter;(typeof t.filter=="function"||Pn(t.filter))&&(s=t.filter);let a;if(t.arrayFormat&&t.arrayFormat in $E?a=t.arrayFormat:"indices"in t?a=t.indices?"indices":"repeat":a=$t.arrayFormat,"commaRoundTrip"in t&&typeof t.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const l=typeof t.allowDots>"u"?t.encodeDotInKeys?!0:$t.allowDots:!!t.allowDots;return{addQueryPrefix:typeof t.addQueryPrefix=="boolean"?t.addQueryPrefix:$t.addQueryPrefix,allowDots:l,allowEmptyArrays:typeof t.allowEmptyArrays=="boolean"?!!t.allowEmptyArrays:$t.allowEmptyArrays,arrayFormat:a,charset:e,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:$t.charsetSentinel,commaRoundTrip:!!t.commaRoundTrip,delimiter:typeof t.delimiter>"u"?$t.delimiter:t.delimiter,encode:typeof t.encode=="boolean"?t.encode:$t.encode,encodeDotInKeys:typeof t.encodeDotInKeys=="boolean"?t.encodeDotInKeys:$t.encodeDotInKeys,encoder:typeof t.encoder=="function"?t.encoder:$t.encoder,encodeValuesOnly:typeof t.encodeValuesOnly=="boolean"?t.encodeValuesOnly:$t.encodeValuesOnly,filter:s,format:n,formatter:r,serializeDate:typeof t.serializeDate=="function"?t.serializeDate:$t.serializeDate,skipNulls:typeof t.skipNulls=="boolean"?t.skipNulls:$t.skipNulls,sort:typeof t.sort=="function"?t.sort:null,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:$t.strictNullHandling}}function l6(t,e={}){let n=t;const r=o6(e);let s,a;typeof r.filter=="function"?(a=r.filter,n=a("",n)):Pn(r.filter)&&(a=r.filter,s=a);const l=[];if(typeof n!="object"||n===null)return"";const u=$E[r.arrayFormat],f=u==="comma"&&r.commaRoundTrip;s||(s=Object.keys(n)),r.sort&&s.sort(r.sort);const h=new WeakMap;for(let _=0;_<s.length;++_){const g=s[_];r.skipNulls&&n[g]===null||qE(l,FE(n[g],g,u,f,r.allowEmptyArrays,r.strictNullHandling,r.skipNulls,r.encodeDotInKeys,r.encode?r.encoder:null,r.filter,r.sort,r.allowDots,r.serializeDate,r.format,r.formatter,r.encodeValuesOnly,r.charset,h))}const m=l.join(r.delimiter);let p=r.addQueryPrefix===!0?"?":"";return r.charsetSentinel&&(r.charset==="iso-8859-1"?p+="utf8=%26%2310003%3B&":p+="utf8=%E2%9C%93&"),m.length>0?p+m:""}function c6(t){let e=0;for(const s of t)e+=s.length;const n=new Uint8Array(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return n}let p1;function Iy(t){let e;return(p1??(e=new globalThis.TextEncoder,p1=e.encode.bind(e)))(t)}let m1;function g1(t){let e;return(m1??(e=new globalThis.TextDecoder,m1=e.decode.bind(e)))(t)}var Yn,Xn;class ah{constructor(){Yn.set(this,void 0),Xn.set(this,void 0),Ne(this,Yn,new Uint8Array),Ne(this,Xn,null)}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?Iy(e):e;Ne(this,Yn,c6([ee(this,Yn,"f"),n]));const r=[];let s;for(;(s=u6(ee(this,Yn,"f"),ee(this,Xn,"f")))!=null;){if(s.carriage&&ee(this,Xn,"f")==null){Ne(this,Xn,s.index);continue}if(ee(this,Xn,"f")!=null&&(s.index!==ee(this,Xn,"f")+1||s.carriage)){r.push(g1(ee(this,Yn,"f").subarray(0,ee(this,Xn,"f")-1))),Ne(this,Yn,ee(this,Yn,"f").subarray(ee(this,Xn,"f"))),Ne(this,Xn,null);continue}const a=ee(this,Xn,"f")!==null?s.preceding-1:s.preceding,l=g1(ee(this,Yn,"f").subarray(0,a));r.push(l),Ne(this,Yn,ee(this,Yn,"f").subarray(s.index)),Ne(this,Xn,null)}return r}flush(){return ee(this,Yn,"f").length?this.decode(`
`):[]}}Yn=new WeakMap,Xn=new WeakMap;ah.NEWLINE_CHARS=new Set([`
`,"\r"]);ah.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function u6(t,e){for(let s=e??0;s<t.length;s++){if(t[s]===10)return{preceding:s,index:s+1,carriage:!1};if(t[s]===13)return{preceding:s,index:s+1,carriage:!0}}return null}function f6(t){for(let r=0;r<t.length-1;r++){if(t[r]===10&&t[r+1]===10||t[r]===13&&t[r+1]===13)return r+2;if(t[r]===13&&t[r+1]===10&&r+3<t.length&&t[r+2]===13&&t[r+3]===10)return r+4}return-1}const Of={off:0,error:200,warn:300,info:400,debug:500},y1=(t,e,n)=>{if(t){if(GP(Of,t))return t;cn(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(Of))}`)}};function ll(){}function Cu(t,e,n){return!e||Of[t]>Of[n]?ll:e[t].bind(e)}const h6={error:ll,warn:ll,info:ll,debug:ll};let _1=new WeakMap;function cn(t){const e=t.logger,n=t.logLevel??"off";if(!e)return h6;const r=_1.get(e);if(r&&r[0]===n)return r[1];const s={error:Cu("error",e,n),warn:Cu("warn",e,n),info:Cu("info",e,n),debug:Cu("debug",e,n)};return _1.set(e,[n,s]),s}const ki=t=>(t.options&&(t.options={...t.options},delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);var Yo;class Ur{constructor(e,n,r){this.iterator=e,Yo.set(this,void 0),this.controller=n,Ne(this,Yo,r)}static fromSSEResponse(e,n,r){let s=!1;const a=r?cn(r):console;async function*l(){if(s)throw new Te("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let u=!1;try{for await(const f of d6(e,n))if(!u){if(f.data.startsWith("[DONE]")){u=!0;continue}if(f.event===null||!f.event.startsWith("thread.")){let h;try{h=JSON.parse(f.data)}catch(m){throw a.error("Could not parse message into JSON:",f.data),a.error("From chunk:",f.raw),m}if(h&&h.error)throw new fn(void 0,h.error,void 0,e.headers);yield h}else{let h;try{h=JSON.parse(f.data)}catch(m){throw console.error("Could not parse message into JSON:",f.data),console.error("From chunk:",f.raw),m}if(f.event=="error")throw new fn(void 0,h.error,h.message,void 0);yield{event:f.event,data:h}}}u=!0}catch(f){if(Sg(f))return;throw f}finally{u||n.abort()}}return new Ur(l,n,r)}static fromReadableStream(e,n,r){let s=!1;async function*a(){const u=new ah,f=PE(e);for await(const h of f)for(const m of u.decode(h))yield m;for(const h of u.flush())yield h}async function*l(){if(s)throw new Te("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let u=!1;try{for await(const f of a())u||f&&(yield JSON.parse(f));u=!0}catch(f){if(Sg(f))return;throw f}finally{u||n.abort()}}return new Ur(l,n,r)}[(Yo=new WeakMap,Symbol.asyncIterator)](){return this.iterator()}tee(){const e=[],n=[],r=this.iterator(),s=a=>({next:()=>{if(a.length===0){const l=r.next();e.push(l),n.push(l)}return a.shift()}});return[new Ur(()=>s(e),this.controller,ee(this,Yo,"f")),new Ur(()=>s(n),this.controller,ee(this,Yo,"f"))]}toReadableStream(){const e=this;let n;return zE({async start(){n=e[Symbol.asyncIterator]()},async pull(r){try{const{value:s,done:a}=await n.next();if(a)return r.close();const l=Iy(JSON.stringify(s)+`
`);r.enqueue(l)}catch(s){r.error(s)}},async cancel(){await n.return?.()}})}}async function*d6(t,e){if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Te("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Te("Attempted to iterate over a response with no body");const n=new m6,r=new ah,s=PE(t.body);for await(const a of p6(s))for(const l of r.decode(a)){const u=n.decode(l);u&&(yield u)}for(const a of r.flush()){const l=n.decode(a);l&&(yield l)}}async function*p6(t){let e=new Uint8Array;for await(const n of t){if(n==null)continue;const r=n instanceof ArrayBuffer?new Uint8Array(n):typeof n=="string"?Iy(n):n;let s=new Uint8Array(e.length+r.length);s.set(e),s.set(r,e.length),e=s;let a;for(;(a=f6(e))!==-1;)yield e.slice(0,a),e=e.slice(a)}e.length>0&&(yield e)}class m6{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const a={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],a}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,r,s]=g6(e,":");return s.startsWith(" ")&&(s=s.substring(1)),n==="event"?this.event=s:n==="data"&&this.data.push(s),null}}function g6(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}async function VE(t,e){const{response:n,requestLogID:r,retryOfRequestLogID:s,startTime:a}=e,l=await(async()=>{if(e.options.stream)return cn(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):Ur.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const f=n.headers.get("content-type")?.split(";")[0]?.trim();if(f?.includes("application/json")||f?.endsWith("+json")){const p=await n.json();return HE(p,n)}return await n.text()})();return cn(t).debug(`[${r}] response parsed`,ki({retryOfRequestLogID:s,url:n.url,status:n.status,body:l,durationMs:Date.now()-a})),l}function HE(t,e){return!t||typeof t!="object"||Array.isArray(t)?t:Object.defineProperty(t,"_request_id",{value:e.headers.get("x-request-id"),enumerable:!1})}var cl;class oh extends Promise{constructor(e,n,r=VE){super(s=>{s(null)}),this.responsePromise=n,this.parseResponse=r,cl.set(this,void 0),Ne(this,cl,e)}_thenUnwrap(e){return new oh(ee(this,cl,"f"),this.responsePromise,async(n,r)=>HE(e(await this.parseResponse(n,r),r),r.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n,request_id:n.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(ee(this,cl,"f"),e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}cl=new WeakMap;var Tu;class Ny{constructor(e,n,r,s){Tu.set(this,void 0),Ne(this,Tu,e),this.options=s,this.response=n,this.body=r}hasNextPage(){return this.getPaginatedItems().length?this.nextPageRequestOptions()!=null:!1}async getNextPage(){const e=this.nextPageRequestOptions();if(!e)throw new Te("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");return await ee(this,Tu,"f").requestAPIList(this.constructor,e)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(Tu=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const n of e.getPaginatedItems())yield n}}class y6 extends oh{constructor(e,n,r){super(e,n,async(s,a)=>new r(s,a.response,await VE(s,a),a.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const n of e)yield n}}class lh extends Ny{constructor(e,n,r,s){super(e,n,r,s),this.data=r.data||[],this.object=r.object}getPaginatedItems(){return this.data??[]}nextPageRequestOptions(){return null}}class Pt extends Ny{constructor(e,n,r,s){super(e,n,r,s),this.data=r.data||[],this.has_more=r.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){const e=this.getPaginatedItems(),n=e[e.length-1]?.id;return n?{...this.options,query:{...LE(this.options.query),after:n}}:null}}class If extends Ny{constructor(e,n,r,s){super(e,n,r,s),this.data=r.data||[],this.has_more=r.has_more||!1,this.last_id=r.last_id||""}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){const e=this.last_id;return e?{...this.options,query:{...LE(this.options.query),after:e}}:null}}const GE=()=>{if(typeof File>"u"){const{process:t}=globalThis,e=typeof t?.versions?.node=="string"&&parseInt(t.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(e?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function wl(t,e,n){return GE(),new File(t,e??"unknown_file",n)}function Ku(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const My=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function",b1=async(t,e)=>Cg(t.body)?{...t,body:await KE(t.body,e)}:t,Ii=async(t,e)=>({...t,body:await KE(t.body,e)}),v1=new WeakMap;function _6(t){const e=typeof t=="function"?t:t.fetch,n=v1.get(e);if(n)return n;const r=(async()=>{try{const s="Response"in e?e.Response:(await e("data:,")).constructor,a=new FormData;return a.toString()!==await new s(a).text()}catch{return!0}})();return v1.set(e,r),r}const KE=async(t,e)=>{if(!await _6(e))throw new TypeError("The provided fetch function does not support file uploads with the current global FormData class.");const n=new FormData;return await Promise.all(Object.entries(t||{}).map(([r,s])=>Tg(n,r,s))),n},ZE=t=>t instanceof Blob&&"name"in t,b6=t=>typeof t=="object"&&t!==null&&(t instanceof Response||My(t)||ZE(t)),Cg=t=>{if(b6(t))return!0;if(Array.isArray(t))return t.some(Cg);if(t&&typeof t=="object"){for(const e in t)if(Cg(t[e]))return!0}return!1},Tg=async(t,e,n)=>{if(n!==void 0){if(n==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")t.append(e,String(n));else if(n instanceof Response)t.append(e,wl([await n.blob()],Ku(n)));else if(My(n))t.append(e,wl([await new Response(jE(n)).blob()],Ku(n)));else if(ZE(n))t.append(e,n,Ku(n));else if(Array.isArray(n))await Promise.all(n.map(r=>Tg(t,e+"[]",r)));else if(typeof n=="object")await Promise.all(Object.entries(n).map(([r,s])=>Tg(t,`${e}[${r}]`,s)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${n} instead`)}},QE=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",v6=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&QE(t),x6=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function w6(t,e,n){if(GE(),t=await t,v6(t))return t instanceof File?t:wl([await t.arrayBuffer()],t.name);if(x6(t)){const s=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),wl(await Ag(s),e,n)}const r=await Ag(t);if(e||(e=Ku(t)),!n?.type){const s=r.find(a=>typeof a=="object"&&"type"in a&&a.type);typeof s=="string"&&(n={...n,type:s})}return wl(r,e,n)}async function Ag(t){let e=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)e.push(t);else if(QE(t))e.push(t instanceof Blob?t:await t.arrayBuffer());else if(My(t))for await(const n of t)e.push(...await Ag(n));else{const n=t?.constructor?.name;throw new Error(`Unexpected data type: ${typeof t}${n?`; constructor: ${n}`:""}${S6(t)}`)}return e}function S6(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}class Se{constructor(e){this._client=e}}function JE(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const x1=Object.freeze(Object.create(null)),k6=(t=JE)=>function(n,...r){if(n.length===1)return n[0];let s=!1;const a=[],l=n.reduce((m,p,_)=>{/[?#]/.test(p)&&(s=!0);const g=r[_];let v=(s?encodeURIComponent:t)(""+g);return _!==r.length&&(g==null||typeof g=="object"&&g.toString===Object.getPrototypeOf(Object.getPrototypeOf(g.hasOwnProperty??x1)??x1)?.toString)&&(v=g+"",a.push({start:m.length+p.length,length:v.length,error:`Value of type ${Object.prototype.toString.call(g).slice(8,-1)} is not a valid path parameter`})),m+p+(_===r.length?"":v)},""),u=l.split(/[?#]/,1)[0],f=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let h;for(;(h=f.exec(u))!==null;)a.push({start:h.index,length:h[0].length,error:`Value "${h[0]}" can't be safely passed as a path parameter`});if(a.sort((m,p)=>m.start-p.start),a.length>0){let m=0;const p=a.reduce((_,g)=>{const v=" ".repeat(g.start-m),x="^".repeat(g.length);return m=g.start+g.length,_+v+x},"");throw new Te(`Path parameters result in path with invalid segments:
${a.map(_=>_.error).join(`
`)}
${l}
${p}`)}return l},he=k6(JE);let YE=class extends Se{list(e,n={},r){return this._client.getAPIList(he`/chat/completions/${e}/messages`,Pt,{query:n,...r})}};function Nf(t){return t!==void 0&&"function"in t&&t.function!==void 0}function Dy(t){return t?.$brand==="auto-parseable-response-format"}function Xl(t){return t?.$brand==="auto-parseable-tool"}function E6(t,e){return!e||!XE(e)?{...t,choices:t.choices.map(n=>(WE(n.message.tool_calls),{...n,message:{...n.message,parsed:null,...n.message.tool_calls?{tool_calls:n.message.tool_calls}:void 0}}))}:Ly(t,e)}function Ly(t,e){const n=t.choices.map(r=>{if(r.finish_reason==="length")throw new ME;if(r.finish_reason==="content_filter")throw new DE;return WE(r.message.tool_calls),{...r,message:{...r.message,...r.message.tool_calls?{tool_calls:r.message.tool_calls?.map(s=>T6(e,s))??void 0}:void 0,parsed:r.message.content&&!r.message.refusal?C6(e,r.message.content):null}}});return{...t,choices:n}}function C6(t,e){return t.response_format?.type!=="json_schema"?null:t.response_format?.type==="json_schema"?"$parseRaw"in t.response_format?t.response_format.$parseRaw(e):JSON.parse(e):null}function T6(t,e){const n=t.tools?.find(r=>Nf(r)&&r.function?.name===e.function.name);return{...e,function:{...e.function,parsed_arguments:Xl(n)?n.$parseRaw(e.function.arguments):n?.function.strict?JSON.parse(e.function.arguments):null}}}function A6(t,e){if(!t||!("tools"in t)||!t.tools)return!1;const n=t.tools?.find(r=>Nf(r)&&r.function?.name===e.function.name);return Nf(n)&&(Xl(n)||n?.function.strict||!1)}function XE(t){return Dy(t.response_format)?!0:t.tools?.some(e=>Xl(e)||e.type==="function"&&e.function.strict===!0)??!1}function WE(t){for(const e of t||[])if(e.type!=="function")throw new Te(`Currently only \`function\` tool calls are supported; Received \`${e.type}\``)}function R6(t){for(const e of t??[]){if(e.type!=="function")throw new Te(`Currently only \`function\` tool types support auto-parsing; Received \`${e.type}\``);if(e.function.strict!==!0)throw new Te(`The \`${e.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}const Mf=t=>t?.role==="assistant",eC=t=>t?.role==="tool";var Rg,Zu,Qu,ul,fl,Ju,hl,ds,dl,Df,Lf,Ra,tC;class zy{constructor(){Rg.add(this),this.controller=new AbortController,Zu.set(this,void 0),Qu.set(this,()=>{}),ul.set(this,()=>{}),fl.set(this,void 0),Ju.set(this,()=>{}),hl.set(this,()=>{}),ds.set(this,{}),dl.set(this,!1),Df.set(this,!1),Lf.set(this,!1),Ra.set(this,!1),Ne(this,Zu,new Promise((e,n)=>{Ne(this,Qu,e,"f"),Ne(this,ul,n,"f")})),Ne(this,fl,new Promise((e,n)=>{Ne(this,Ju,e,"f"),Ne(this,hl,n,"f")})),ee(this,Zu,"f").catch(()=>{}),ee(this,fl,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},ee(this,Rg,"m",tC).bind(this))},0)}_connected(){this.ended||(ee(this,Qu,"f").call(this),this._emit("connect"))}get ended(){return ee(this,dl,"f")}get errored(){return ee(this,Df,"f")}get aborted(){return ee(this,Lf,"f")}abort(){this.controller.abort()}on(e,n){return(ee(this,ds,"f")[e]||(ee(this,ds,"f")[e]=[])).push({listener:n}),this}off(e,n){const r=ee(this,ds,"f")[e];if(!r)return this;const s=r.findIndex(a=>a.listener===n);return s>=0&&r.splice(s,1),this}once(e,n){return(ee(this,ds,"f")[e]||(ee(this,ds,"f")[e]=[])).push({listener:n,once:!0}),this}emitted(e){return new Promise((n,r)=>{Ne(this,Ra,!0),e!=="error"&&this.once("error",r),this.once(e,n)})}async done(){Ne(this,Ra,!0),await ee(this,fl,"f")}_emit(e,...n){if(ee(this,dl,"f"))return;e==="end"&&(Ne(this,dl,!0),ee(this,Ju,"f").call(this));const r=ee(this,ds,"f")[e];if(r&&(ee(this,ds,"f")[e]=r.filter(s=>!s.once),r.forEach(({listener:s})=>s(...n))),e==="abort"){const s=n[0];!ee(this,Ra,"f")&&!r?.length&&Promise.reject(s),ee(this,ul,"f").call(this,s),ee(this,hl,"f").call(this,s),this._emit("end");return}if(e==="error"){const s=n[0];!ee(this,Ra,"f")&&!r?.length&&Promise.reject(s),ee(this,ul,"f").call(this,s),ee(this,hl,"f").call(this,s),this._emit("end")}}_emitFinal(){}}Zu=new WeakMap,Qu=new WeakMap,ul=new WeakMap,fl=new WeakMap,Ju=new WeakMap,hl=new WeakMap,ds=new WeakMap,dl=new WeakMap,Df=new WeakMap,Lf=new WeakMap,Ra=new WeakMap,Rg=new WeakSet,tC=function(e){if(Ne(this,Df,!0),e instanceof Error&&e.name==="AbortError"&&(e=new vr),e instanceof vr)return Ne(this,Lf,!0),this._emit("abort",e);if(e instanceof Te)return this._emit("error",e);if(e instanceof Error){const n=new Te(e.message);return n.cause=e,this._emit("error",n)}return this._emit("error",new Te(String(e)))};function O6(t){return typeof t.parse=="function"}var kn,Og,zf,Ig,Ng,Mg,nC,rC;const I6=10;class sC extends zy{constructor(){super(...arguments),kn.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){this._chatCompletions.push(e),this._emit("chatCompletion",e);const n=e.choices[0]?.message;return n&&this._addMessage(n),e}_addMessage(e,n=!0){if("content"in e||(e.content=null),this.messages.push(e),n){if(this._emit("message",e),eC(e)&&e.content)this._emit("functionToolCallResult",e.content);else if(Mf(e)&&e.tool_calls)for(const r of e.tool_calls)r.type==="function"&&this._emit("functionToolCall",r.function)}}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new Te("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),ee(this,kn,"m",Og).call(this)}async finalMessage(){return await this.done(),ee(this,kn,"m",zf).call(this)}async finalFunctionToolCall(){return await this.done(),ee(this,kn,"m",Ig).call(this)}async finalFunctionToolCallResult(){return await this.done(),ee(this,kn,"m",Ng).call(this)}async totalUsage(){return await this.done(),ee(this,kn,"m",Mg).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const n=ee(this,kn,"m",zf).call(this);n&&this._emit("finalMessage",n);const r=ee(this,kn,"m",Og).call(this);r&&this._emit("finalContent",r);const s=ee(this,kn,"m",Ig).call(this);s&&this._emit("finalFunctionToolCall",s);const a=ee(this,kn,"m",Ng).call(this);a!=null&&this._emit("finalFunctionToolCallResult",a),this._chatCompletions.some(l=>l.usage)&&this._emit("totalUsage",ee(this,kn,"m",Mg).call(this))}async _createChatCompletion(e,n,r){const s=r?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),ee(this,kn,"m",nC).call(this,n);const a=await e.chat.completions.create({...n,stream:!1},{...r,signal:this.controller.signal});return this._connected(),this._addChatCompletion(Ly(a,n))}async _runChatCompletion(e,n,r){for(const s of n.messages)this._addMessage(s,!1);return await this._createChatCompletion(e,n,r)}async _runTools(e,n,r){const s="tool",{tool_choice:a="auto",stream:l,...u}=n,f=typeof a!="string"&&a.type==="function"&&a?.function?.name,{maxChatCompletions:h=I6}=r||{},m=n.tools.map(g=>{if(Xl(g)){if(!g.$callback)throw new Te("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:g.$callback,name:g.function.name,description:g.function.description||"",parameters:g.function.parameters,parse:g.$parseRaw,strict:!0}}}return g}),p={};for(const g of m)g.type==="function"&&(p[g.function.name||g.function.function.name]=g.function);const _="tools"in n?m.map(g=>g.type==="function"?{type:"function",function:{name:g.function.name||g.function.function.name,parameters:g.function.parameters,description:g.function.description,strict:g.function.strict}}:g):void 0;for(const g of n.messages)this._addMessage(g,!1);for(let g=0;g<h;++g){const x=(await this._createChatCompletion(e,{...u,tool_choice:a,tools:_,messages:[...this.messages]},r)).choices[0]?.message;if(!x)throw new Te("missing message in ChatCompletion response");if(!x.tool_calls?.length)return;for(const k of x.tool_calls){if(k.type!=="function")continue;const S=k.id,{name:T,arguments:C}=k.function,L=p[T];if(L){if(f&&f!==T){const V=`Invalid tool_call: ${JSON.stringify(T)}. ${JSON.stringify(f)} requested. Please try again`;this._addMessage({role:s,tool_call_id:S,content:V});continue}}else{const V=`Invalid tool_call: ${JSON.stringify(T)}. Available options are: ${Object.keys(p).map(H=>JSON.stringify(H)).join(", ")}. Please try again`;this._addMessage({role:s,tool_call_id:S,content:V});continue}let D;try{D=O6(L)?await L.parse(C):C}catch(V){const H=V instanceof Error?V.message:String(V);this._addMessage({role:s,tool_call_id:S,content:H});continue}const I=await L.function(D,this),P=ee(this,kn,"m",rC).call(this,I);if(this._addMessage({role:s,tool_call_id:S,content:P}),f)return}}}}kn=new WeakSet,Og=function(){return ee(this,kn,"m",zf).call(this).content??null},zf=function(){let e=this.messages.length;for(;e-- >0;){const n=this.messages[e];if(Mf(n))return{...n,content:n.content??null,refusal:n.refusal??null}}throw new Te("stream ended without producing a ChatCompletionMessage with role=assistant")},Ig=function(){for(let e=this.messages.length-1;e>=0;e--){const n=this.messages[e];if(Mf(n)&&n?.tool_calls?.length)return n.tool_calls.filter(r=>r.type==="function").at(-1)?.function}},Ng=function(){for(let e=this.messages.length-1;e>=0;e--){const n=this.messages[e];if(eC(n)&&n.content!=null&&typeof n.content=="string"&&this.messages.some(r=>r.role==="assistant"&&r.tool_calls?.some(s=>s.type==="function"&&s.id===n.tool_call_id)))return n.content}},Mg=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:n}of this._chatCompletions)n&&(e.completion_tokens+=n.completion_tokens,e.prompt_tokens+=n.prompt_tokens,e.total_tokens+=n.total_tokens);return e},nC=function(e){if(e.n!=null&&e.n>1)throw new Te("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},rC=function(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)};class jy extends sC{static runTools(e,n,r){const s=new jy,a={...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"runTools"}};return s._run(()=>s._runTools(e,n,a)),s}_addMessage(e,n=!0){super._addMessage(e,n),Mf(e)&&e.content&&this._emit("content",e.content)}}const iC=1,aC=2,oC=4,lC=8,cC=16,uC=32,fC=64,hC=128,dC=256,pC=hC|dC,mC=cC|uC|pC|fC,gC=iC|aC|mC,yC=oC|lC,N6=gC|yC,Wt={STR:iC,NUM:aC,ARR:oC,OBJ:lC,NULL:cC,BOOL:uC,NAN:fC,INFINITY:hC,MINUS_INFINITY:dC,INF:pC,SPECIAL:mC,ATOM:gC,COLLECTION:yC,ALL:N6};class M6 extends Error{}class D6 extends Error{}function L6(t,e=Wt.ALL){if(typeof t!="string")throw new TypeError(`expecting str, got ${typeof t}`);if(!t.trim())throw new Error(`${t} is empty`);return z6(t.trim(),e)}const z6=(t,e)=>{const n=t.length;let r=0;const s=_=>{throw new M6(`${_} at position ${r}`)},a=_=>{throw new D6(`${_} at position ${r}`)},l=()=>(p(),r>=n&&s("Unexpected end of input"),t[r]==='"'?u():t[r]==="{"?f():t[r]==="["?h():t.substring(r,r+4)==="null"||Wt.NULL&e&&n-r<4&&"null".startsWith(t.substring(r))?(r+=4,null):t.substring(r,r+4)==="true"||Wt.BOOL&e&&n-r<4&&"true".startsWith(t.substring(r))?(r+=4,!0):t.substring(r,r+5)==="false"||Wt.BOOL&e&&n-r<5&&"false".startsWith(t.substring(r))?(r+=5,!1):t.substring(r,r+8)==="Infinity"||Wt.INFINITY&e&&n-r<8&&"Infinity".startsWith(t.substring(r))?(r+=8,1/0):t.substring(r,r+9)==="-Infinity"||Wt.MINUS_INFINITY&e&&1<n-r&&n-r<9&&"-Infinity".startsWith(t.substring(r))?(r+=9,-1/0):t.substring(r,r+3)==="NaN"||Wt.NAN&e&&n-r<3&&"NaN".startsWith(t.substring(r))?(r+=3,NaN):m()),u=()=>{const _=r;let g=!1;for(r++;r<n&&(t[r]!=='"'||g&&t[r-1]==="\\");)g=t[r]==="\\"?!g:!1,r++;if(t.charAt(r)=='"')try{return JSON.parse(t.substring(_,++r-Number(g)))}catch(v){a(String(v))}else if(Wt.STR&e)try{return JSON.parse(t.substring(_,r-Number(g))+'"')}catch{return JSON.parse(t.substring(_,t.lastIndexOf("\\"))+'"')}s("Unterminated string literal")},f=()=>{r++,p();const _={};try{for(;t[r]!=="}";){if(p(),r>=n&&Wt.OBJ&e)return _;const g=u();p(),r++;try{const v=l();Object.defineProperty(_,g,{value:v,writable:!0,enumerable:!0,configurable:!0})}catch(v){if(Wt.OBJ&e)return _;throw v}p(),t[r]===","&&r++}}catch{if(Wt.OBJ&e)return _;s("Expected '}' at end of object")}return r++,_},h=()=>{r++;const _=[];try{for(;t[r]!=="]";)_.push(l()),p(),t[r]===","&&r++}catch{if(Wt.ARR&e)return _;s("Expected ']' at end of array")}return r++,_},m=()=>{if(r===0){t==="-"&&Wt.NUM&e&&s("Not sure what '-' is");try{return JSON.parse(t)}catch(g){if(Wt.NUM&e)try{return t[t.length-1]==="."?JSON.parse(t.substring(0,t.lastIndexOf("."))):JSON.parse(t.substring(0,t.lastIndexOf("e")))}catch{}a(String(g))}}const _=r;for(t[r]==="-"&&r++;t[r]&&!",]}".includes(t[r]);)r++;r==n&&!(Wt.NUM&e)&&s("Unterminated number literal");try{return JSON.parse(t.substring(_,r))}catch{t.substring(_,r)==="-"&&Wt.NUM&e&&s("Not sure what '-' is");try{return JSON.parse(t.substring(_,t.lastIndexOf("e")))}catch(v){a(String(v))}}},p=()=>{for(;r<n&&` 
\r	`.includes(t[r]);)r++};return l()},w1=t=>L6(t,Wt.ALL^Wt.NUM);var Ut,hs,Sa,Vs,pm,Au,mm,gm,ym,Ru,_m,S1;class Pl extends sC{constructor(e){super(),Ut.add(this),hs.set(this,void 0),Sa.set(this,void 0),Vs.set(this,void 0),Ne(this,hs,e),Ne(this,Sa,[])}get currentChatCompletionSnapshot(){return ee(this,Vs,"f")}static fromReadableStream(e){const n=new Pl(null);return n._run(()=>n._fromReadableStream(e)),n}static createChatCompletion(e,n,r){const s=new Pl(n);return s._run(()=>s._runChatCompletion(e,{...n,stream:!0},{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),s}async _createChatCompletion(e,n,r){super._createChatCompletion;const s=r?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),ee(this,Ut,"m",pm).call(this);const a=await e.chat.completions.create({...n,stream:!0},{...r,signal:this.controller.signal});this._connected();for await(const l of a)ee(this,Ut,"m",mm).call(this,l);if(a.controller.signal?.aborted)throw new vr;return this._addChatCompletion(ee(this,Ut,"m",Ru).call(this))}async _fromReadableStream(e,n){const r=n?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),ee(this,Ut,"m",pm).call(this),this._connected();const s=Ur.fromReadableStream(e,this.controller);let a;for await(const l of s)a&&a!==l.id&&this._addChatCompletion(ee(this,Ut,"m",Ru).call(this)),ee(this,Ut,"m",mm).call(this,l),a=l.id;if(s.controller.signal?.aborted)throw new vr;return this._addChatCompletion(ee(this,Ut,"m",Ru).call(this))}[(hs=new WeakMap,Sa=new WeakMap,Vs=new WeakMap,Ut=new WeakSet,pm=function(){this.ended||Ne(this,Vs,void 0)},Au=function(n){let r=ee(this,Sa,"f")[n.index];return r||(r={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},ee(this,Sa,"f")[n.index]=r,r)},mm=function(n){if(this.ended)return;const r=ee(this,Ut,"m",S1).call(this,n);this._emit("chunk",n,r);for(const s of n.choices){const a=r.choices[s.index];s.delta.content!=null&&a.message?.role==="assistant"&&a.message?.content&&(this._emit("content",s.delta.content,a.message.content),this._emit("content.delta",{delta:s.delta.content,snapshot:a.message.content,parsed:a.message.parsed})),s.delta.refusal!=null&&a.message?.role==="assistant"&&a.message?.refusal&&this._emit("refusal.delta",{delta:s.delta.refusal,snapshot:a.message.refusal}),s.logprobs?.content!=null&&a.message?.role==="assistant"&&this._emit("logprobs.content.delta",{content:s.logprobs?.content,snapshot:a.logprobs?.content??[]}),s.logprobs?.refusal!=null&&a.message?.role==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:s.logprobs?.refusal,snapshot:a.logprobs?.refusal??[]});const l=ee(this,Ut,"m",Au).call(this,a);a.finish_reason&&(ee(this,Ut,"m",ym).call(this,a),l.current_tool_call_index!=null&&ee(this,Ut,"m",gm).call(this,a,l.current_tool_call_index));for(const u of s.delta.tool_calls??[])l.current_tool_call_index!==u.index&&(ee(this,Ut,"m",ym).call(this,a),l.current_tool_call_index!=null&&ee(this,Ut,"m",gm).call(this,a,l.current_tool_call_index)),l.current_tool_call_index=u.index;for(const u of s.delta.tool_calls??[]){const f=a.message.tool_calls?.[u.index];f?.type&&(f?.type==="function"?this._emit("tool_calls.function.arguments.delta",{name:f.function?.name,index:u.index,arguments:f.function.arguments,parsed_arguments:f.function.parsed_arguments,arguments_delta:u.function?.arguments??""}):(f?.type,void 0))}}},gm=function(n,r){if(ee(this,Ut,"m",Au).call(this,n).done_tool_calls.has(r))return;const a=n.message.tool_calls?.[r];if(!a)throw new Error("no tool call snapshot");if(!a.type)throw new Error("tool call snapshot missing `type`");if(a.type==="function"){const l=ee(this,hs,"f")?.tools?.find(u=>Nf(u)&&u.function.name===a.function.name);this._emit("tool_calls.function.arguments.done",{name:a.function.name,index:r,arguments:a.function.arguments,parsed_arguments:Xl(l)?l.$parseRaw(a.function.arguments):l?.function.strict?JSON.parse(a.function.arguments):null})}else a.type},ym=function(n){const r=ee(this,Ut,"m",Au).call(this,n);if(n.message.content&&!r.content_done){r.content_done=!0;const s=ee(this,Ut,"m",_m).call(this);this._emit("content.done",{content:n.message.content,parsed:s?s.$parseRaw(n.message.content):null})}n.message.refusal&&!r.refusal_done&&(r.refusal_done=!0,this._emit("refusal.done",{refusal:n.message.refusal})),n.logprobs?.content&&!r.logprobs_content_done&&(r.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:n.logprobs.content})),n.logprobs?.refusal&&!r.logprobs_refusal_done&&(r.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:n.logprobs.refusal}))},Ru=function(){if(this.ended)throw new Te("stream has ended, this shouldn't happen");const n=ee(this,Vs,"f");if(!n)throw new Te("request ended without sending any chunks");return Ne(this,Vs,void 0),Ne(this,Sa,[]),j6(n,ee(this,hs,"f"))},_m=function(){const n=ee(this,hs,"f")?.response_format;return Dy(n)?n:null},S1=function(n){var r,s,a,l;let u=ee(this,Vs,"f");const{choices:f,...h}=n;u?Object.assign(u,h):u=Ne(this,Vs,{...h,choices:[]});for(const{delta:m,finish_reason:p,index:_,logprobs:g=null,...v}of n.choices){let x=u.choices[_];if(x||(x=u.choices[_]={finish_reason:p,index:_,message:{},logprobs:g,...v}),g)if(!x.logprobs)x.logprobs=Object.assign({},g);else{const{content:I,refusal:P,...V}=g;Object.assign(x.logprobs,V),I&&((r=x.logprobs).content??(r.content=[]),x.logprobs.content.push(...I)),P&&((s=x.logprobs).refusal??(s.refusal=[]),x.logprobs.refusal.push(...P))}if(p&&(x.finish_reason=p,ee(this,hs,"f")&&XE(ee(this,hs,"f")))){if(p==="length")throw new ME;if(p==="content_filter")throw new DE}if(Object.assign(x,v),!m)continue;const{content:k,refusal:S,function_call:T,role:C,tool_calls:L,...D}=m;if(Object.assign(x.message,D),S&&(x.message.refusal=(x.message.refusal||"")+S),C&&(x.message.role=C),T&&(x.message.function_call?(T.name&&(x.message.function_call.name=T.name),T.arguments&&((a=x.message.function_call).arguments??(a.arguments=""),x.message.function_call.arguments+=T.arguments)):x.message.function_call=T),k&&(x.message.content=(x.message.content||"")+k,!x.message.refusal&&ee(this,Ut,"m",_m).call(this)&&(x.message.parsed=w1(x.message.content))),L){x.message.tool_calls||(x.message.tool_calls=[]);for(const{index:I,id:P,type:V,function:H,...z}of L){const Q=(l=x.message.tool_calls)[I]??(l[I]={});Object.assign(Q,z),P&&(Q.id=P),V&&(Q.type=V),H&&(Q.function??(Q.function={name:H.name??"",arguments:""})),H?.name&&(Q.function.name=H.name),H?.arguments&&(Q.function.arguments+=H.arguments,A6(ee(this,hs,"f"),Q)&&(Q.function.parsed_arguments=w1(Q.function.arguments)))}}}return u},Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("chunk",s=>{const a=n.shift();a?a.resolve(s):e.push(s)}),this.on("end",()=>{r=!0;for(const s of n)s.resolve(void 0);n.length=0}),this.on("abort",s=>{r=!0;for(const a of n)a.reject(s);n.length=0}),this.on("error",s=>{r=!0;for(const a of n)a.reject(s);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((a,l)=>n.push({resolve:a,reject:l})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new Ur(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function j6(t,e){const{id:n,choices:r,created:s,model:a,system_fingerprint:l,...u}=t,f={...u,id:n,choices:r.map(({message:h,finish_reason:m,index:p,logprobs:_,...g})=>{if(!m)throw new Te(`missing finish_reason for choice ${p}`);const{content:v=null,function_call:x,tool_calls:k,...S}=h,T=h.role;if(!T)throw new Te(`missing role for choice ${p}`);if(x){const{arguments:C,name:L}=x;if(C==null)throw new Te(`missing function_call.arguments for choice ${p}`);if(!L)throw new Te(`missing function_call.name for choice ${p}`);return{...g,message:{content:v,function_call:{arguments:C,name:L},role:T,refusal:h.refusal??null},finish_reason:m,index:p,logprobs:_}}return k?{...g,index:p,finish_reason:m,logprobs:_,message:{...S,role:T,content:v,refusal:h.refusal??null,tool_calls:k.map((C,L)=>{const{function:D,type:I,id:P,...V}=C,{arguments:H,name:z,...Q}=D||{};if(P==null)throw new Te(`missing choices[${p}].tool_calls[${L}].id
${Ou(t)}`);if(I==null)throw new Te(`missing choices[${p}].tool_calls[${L}].type
${Ou(t)}`);if(z==null)throw new Te(`missing choices[${p}].tool_calls[${L}].function.name
${Ou(t)}`);if(H==null)throw new Te(`missing choices[${p}].tool_calls[${L}].function.arguments
${Ou(t)}`);return{...V,id:P,type:I,function:{...Q,name:z,arguments:H}}})}}:{...g,message:{...S,content:v,role:T,refusal:h.refusal??null},finish_reason:m,index:p,logprobs:_}}),created:s,model:a,object:"chat.completion",...l?{system_fingerprint:l}:{}};return E6(f,e)}function Ou(t){return JSON.stringify(t)}class jf extends Pl{static fromReadableStream(e){const n=new jf(null);return n._run(()=>n._fromReadableStream(e)),n}static runTools(e,n,r){const s=new jf(n),a={...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"runTools"}};return s._run(()=>s._runTools(e,n,a)),s}}let Py=class extends Se{constructor(){super(...arguments),this.messages=new YE(this._client)}create(e,n){return this._client.post("/chat/completions",{body:e,...n,stream:e.stream??!1})}retrieve(e,n){return this._client.get(he`/chat/completions/${e}`,n)}update(e,n,r){return this._client.post(he`/chat/completions/${e}`,{body:n,...r})}list(e={},n){return this._client.getAPIList("/chat/completions",Pt,{query:e,...n})}delete(e,n){return this._client.delete(he`/chat/completions/${e}`,n)}parse(e,n){return R6(e.tools),this._client.chat.completions.create(e,{...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"chat.completions.parse"}})._thenUnwrap(r=>Ly(r,e))}runTools(e,n){return e.stream?jf.runTools(this._client,e,n):jy.runTools(this._client,e,n)}stream(e,n){return Pl.createChatCompletion(this._client,e,n)}};Py.Messages=YE;class By extends Se{constructor(){super(...arguments),this.completions=new Py(this._client)}}By.Completions=Py;const _C=Symbol("brand.privateNullableHeaders");function*P6(t){if(!t)return;if(_C in t){const{values:r,nulls:s}=t;yield*r.entries();for(const a of s)yield[a,null];return}let e=!1,n;t instanceof Headers?n=t.entries():o1(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let r of n){const s=r[0];if(typeof s!="string")throw new TypeError("expected header name to be a string");const a=o1(r[1])?r[1]:[r[1]];let l=!1;for(const u of a)u!==void 0&&(e&&!l&&(l=!0,yield[s,null]),yield[s,u])}}const ve=t=>{const e=new Headers,n=new Set;for(const r of t){const s=new Set;for(const[a,l]of P6(r)){const u=a.toLowerCase();s.has(u)||(e.delete(a),s.add(u)),l===null?(e.delete(a),n.add(u)):(e.append(a,l),n.delete(u))}}return{[_C]:!0,values:e,nulls:n}};class bC extends Se{create(e,n){return this._client.post("/audio/speech",{body:e,...n,headers:ve([{Accept:"application/octet-stream"},n?.headers]),__binaryResponse:!0})}}class vC extends Se{create(e,n){return this._client.post("/audio/transcriptions",Ii({body:e,...n,stream:e.stream??!1,__metadata:{model:e.model}},this._client))}}class xC extends Se{create(e,n){return this._client.post("/audio/translations",Ii({body:e,...n,__metadata:{model:e.model}},this._client))}}class Wl extends Se{constructor(){super(...arguments),this.transcriptions=new vC(this._client),this.translations=new xC(this._client),this.speech=new bC(this._client)}}Wl.Transcriptions=vC;Wl.Translations=xC;Wl.Speech=bC;class wC extends Se{create(e,n){return this._client.post("/batches",{body:e,...n})}retrieve(e,n){return this._client.get(he`/batches/${e}`,n)}list(e={},n){return this._client.getAPIList("/batches",Pt,{query:e,...n})}cancel(e,n){return this._client.post(he`/batches/${e}/cancel`,n)}}class SC extends Se{create(e,n){return this._client.post("/assistants",{body:e,...n,headers:ve([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}retrieve(e,n){return this._client.get(he`/assistants/${e}`,{...n,headers:ve([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}update(e,n,r){return this._client.post(he`/assistants/${e}`,{body:n,...r,headers:ve([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(e={},n){return this._client.getAPIList("/assistants",Pt,{query:e,...n,headers:ve([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}delete(e,n){return this._client.delete(he`/assistants/${e}`,{...n,headers:ve([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}}let kC=class extends Se{create(e,n){return this._client.post("/realtime/sessions",{body:e,...n,headers:ve([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}};class EC extends Se{create(e,n){return this._client.post("/realtime/transcription_sessions",{body:e,...n,headers:ve([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}}let ch=class extends Se{constructor(){super(...arguments),this.sessions=new kC(this._client),this.transcriptionSessions=new EC(this._client)}};ch.Sessions=kC;ch.TranscriptionSessions=EC;class CC extends Se{create(e,n){return this._client.post("/chatkit/sessions",{body:e,...n,headers:ve([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}cancel(e,n){return this._client.post(he`/chatkit/sessions/${e}/cancel`,{...n,headers:ve([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}}let TC=class extends Se{retrieve(e,n){return this._client.get(he`/chatkit/threads/${e}`,{...n,headers:ve([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}list(e={},n){return this._client.getAPIList("/chatkit/threads",If,{query:e,...n,headers:ve([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}delete(e,n){return this._client.delete(he`/chatkit/threads/${e}`,{...n,headers:ve([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}listItems(e,n={},r){return this._client.getAPIList(he`/chatkit/threads/${e}/items`,If,{query:n,...r,headers:ve([{"OpenAI-Beta":"chatkit_beta=v1"},r?.headers])})}};class uh extends Se{constructor(){super(...arguments),this.sessions=new CC(this._client),this.threads=new TC(this._client)}}uh.Sessions=CC;uh.Threads=TC;class AC extends Se{create(e,n,r){return this._client.post(he`/threads/${e}/messages`,{body:n,...r,headers:ve([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}retrieve(e,n,r){const{thread_id:s}=n;return this._client.get(he`/threads/${s}/messages/${e}`,{...r,headers:ve([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}update(e,n,r){const{thread_id:s,...a}=n;return this._client.post(he`/threads/${s}/messages/${e}`,{body:a,...r,headers:ve([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(e,n={},r){return this._client.getAPIList(he`/threads/${e}/messages`,Pt,{query:n,...r,headers:ve([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}delete(e,n,r){const{thread_id:s}=n;return this._client.delete(he`/threads/${s}/messages/${e}`,{...r,headers:ve([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}}class RC extends Se{retrieve(e,n,r){const{thread_id:s,run_id:a,...l}=n;return this._client.get(he`/threads/${s}/runs/${a}/steps/${e}`,{query:l,...r,headers:ve([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(e,n,r){const{thread_id:s,...a}=n;return this._client.getAPIList(he`/threads/${s}/runs/${e}/steps`,Pt,{query:a,...r,headers:ve([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}}const B6=t=>{if(typeof Buffer<"u"){const e=Buffer.from(t,"base64");return Array.from(new Float32Array(e.buffer,e.byteOffset,e.length/Float32Array.BYTES_PER_ELEMENT))}else{const e=atob(t),n=e.length,r=new Uint8Array(n);for(let s=0;s<n;s++)r[s]=e.charCodeAt(s);return Array.from(new Float32Array(r.buffer))}};var U6={};const ka=t=>{if(typeof globalThis.process<"u")return U6?.[t]?.trim()??void 0;if(typeof globalThis.Deno<"u")return globalThis.Deno.env?.get?.(t)?.trim()};var un,Ai,Dg,Br,Yu,Tr,Ri,La,Ei,Pf,Wn,Xu,Wu,Sl,pl,ml,k1,E1,C1,T1,A1,R1,O1;class kl extends zy{constructor(){super(...arguments),un.add(this),Dg.set(this,[]),Br.set(this,{}),Yu.set(this,{}),Tr.set(this,void 0),Ri.set(this,void 0),La.set(this,void 0),Ei.set(this,void 0),Pf.set(this,void 0),Wn.set(this,void 0),Xu.set(this,void 0),Wu.set(this,void 0),Sl.set(this,void 0)}[(Dg=new WeakMap,Br=new WeakMap,Yu=new WeakMap,Tr=new WeakMap,Ri=new WeakMap,La=new WeakMap,Ei=new WeakMap,Pf=new WeakMap,Wn=new WeakMap,Xu=new WeakMap,Wu=new WeakMap,Sl=new WeakMap,un=new WeakSet,Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("event",s=>{const a=n.shift();a?a.resolve(s):e.push(s)}),this.on("end",()=>{r=!0;for(const s of n)s.resolve(void 0);n.length=0}),this.on("abort",s=>{r=!0;for(const a of n)a.reject(s);n.length=0}),this.on("error",s=>{r=!0;for(const a of n)a.reject(s);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((a,l)=>n.push({resolve:a,reject:l})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){const n=new Ai;return n._run(()=>n._fromReadableStream(e)),n}async _fromReadableStream(e,n){const r=n?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),this._connected();const s=Ur.fromReadableStream(e,this.controller);for await(const a of s)ee(this,un,"m",pl).call(this,a);if(s.controller.signal?.aborted)throw new vr;return this._addRun(ee(this,un,"m",ml).call(this))}toReadableStream(){return new Ur(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,n,r,s){const a=new Ai;return a._run(()=>a._runToolAssistantStream(e,n,r,{...s,headers:{...s?.headers,"X-Stainless-Helper-Method":"stream"}})),a}async _createToolAssistantStream(e,n,r,s){const a=s?.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort()));const l={...r,stream:!0},u=await e.submitToolOutputs(n,l,{...s,signal:this.controller.signal});this._connected();for await(const f of u)ee(this,un,"m",pl).call(this,f);if(u.controller.signal?.aborted)throw new vr;return this._addRun(ee(this,un,"m",ml).call(this))}static createThreadAssistantStream(e,n,r){const s=new Ai;return s._run(()=>s._threadAssistantStream(e,n,{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),s}static createAssistantStream(e,n,r,s){const a=new Ai;return a._run(()=>a._runAssistantStream(e,n,r,{...s,headers:{...s?.headers,"X-Stainless-Helper-Method":"stream"}})),a}currentEvent(){return ee(this,Xu,"f")}currentRun(){return ee(this,Wu,"f")}currentMessageSnapshot(){return ee(this,Tr,"f")}currentRunStepSnapshot(){return ee(this,Sl,"f")}async finalRunSteps(){return await this.done(),Object.values(ee(this,Br,"f"))}async finalMessages(){return await this.done(),Object.values(ee(this,Yu,"f"))}async finalRun(){if(await this.done(),!ee(this,Ri,"f"))throw Error("Final run was not received.");return ee(this,Ri,"f")}async _createThreadAssistantStream(e,n,r){const s=r?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort()));const a={...n,stream:!0},l=await e.createAndRun(a,{...r,signal:this.controller.signal});this._connected();for await(const u of l)ee(this,un,"m",pl).call(this,u);if(l.controller.signal?.aborted)throw new vr;return this._addRun(ee(this,un,"m",ml).call(this))}async _createAssistantStream(e,n,r,s){const a=s?.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort()));const l={...r,stream:!0},u=await e.create(n,l,{...s,signal:this.controller.signal});this._connected();for await(const f of u)ee(this,un,"m",pl).call(this,f);if(u.controller.signal?.aborted)throw new vr;return this._addRun(ee(this,un,"m",ml).call(this))}static accumulateDelta(e,n){for(const[r,s]of Object.entries(n)){if(!e.hasOwnProperty(r)){e[r]=s;continue}let a=e[r];if(a==null){e[r]=s;continue}if(r==="index"||r==="type"){e[r]=s;continue}if(typeof a=="string"&&typeof s=="string")a+=s;else if(typeof a=="number"&&typeof s=="number")a+=s;else if(fm(a)&&fm(s))a=this.accumulateDelta(a,s);else if(Array.isArray(a)&&Array.isArray(s)){if(a.every(l=>typeof l=="string"||typeof l=="number")){a.push(...s);continue}for(const l of s){if(!fm(l))throw new Error(`Expected array delta entry to be an object but got: ${l}`);const u=l.index;if(u==null)throw console.error(l),new Error("Expected array delta entry to have an `index` property");if(typeof u!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${u}`);const f=a[u];f==null?a.push(l):a[u]=this.accumulateDelta(f,l)}continue}else throw Error(`Unhandled record type: ${r}, deltaValue: ${s}, accValue: ${a}`);e[r]=a}return e}_addRun(e){return e}async _threadAssistantStream(e,n,r){return await this._createThreadAssistantStream(n,e,r)}async _runAssistantStream(e,n,r,s){return await this._createAssistantStream(n,e,r,s)}async _runToolAssistantStream(e,n,r,s){return await this._createToolAssistantStream(n,e,r,s)}}Ai=kl,pl=function(e){if(!this.ended)switch(Ne(this,Xu,e),ee(this,un,"m",C1).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":ee(this,un,"m",O1).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":ee(this,un,"m",E1).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":ee(this,un,"m",k1).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},ml=function(){if(this.ended)throw new Te("stream has ended, this shouldn't happen");if(!ee(this,Ri,"f"))throw Error("Final run has not been received");return ee(this,Ri,"f")},k1=function(e){const[n,r]=ee(this,un,"m",A1).call(this,e,ee(this,Tr,"f"));Ne(this,Tr,n),ee(this,Yu,"f")[n.id]=n;for(const s of r){const a=n.content[s.index];a?.type=="text"&&this._emit("textCreated",a.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,n),e.data.delta.content)for(const s of e.data.delta.content){if(s.type=="text"&&s.text){let a=s.text,l=n.content[s.index];if(l&&l.type=="text")this._emit("textDelta",a,l.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(s.index!=ee(this,La,"f")){if(ee(this,Ei,"f"))switch(ee(this,Ei,"f").type){case"text":this._emit("textDone",ee(this,Ei,"f").text,ee(this,Tr,"f"));break;case"image_file":this._emit("imageFileDone",ee(this,Ei,"f").image_file,ee(this,Tr,"f"));break}Ne(this,La,s.index)}Ne(this,Ei,n.content[s.index])}break;case"thread.message.completed":case"thread.message.incomplete":if(ee(this,La,"f")!==void 0){const s=e.data.content[ee(this,La,"f")];if(s)switch(s.type){case"image_file":this._emit("imageFileDone",s.image_file,ee(this,Tr,"f"));break;case"text":this._emit("textDone",s.text,ee(this,Tr,"f"));break}}ee(this,Tr,"f")&&this._emit("messageDone",e.data),Ne(this,Tr,void 0)}},E1=function(e){const n=ee(this,un,"m",T1).call(this,e);switch(Ne(this,Sl,n),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":const r=e.data.delta;if(r.step_details&&r.step_details.type=="tool_calls"&&r.step_details.tool_calls&&n.step_details.type=="tool_calls")for(const a of r.step_details.tool_calls)a.index==ee(this,Pf,"f")?this._emit("toolCallDelta",a,n.step_details.tool_calls[a.index]):(ee(this,Wn,"f")&&this._emit("toolCallDone",ee(this,Wn,"f")),Ne(this,Pf,a.index),Ne(this,Wn,n.step_details.tool_calls[a.index]),ee(this,Wn,"f")&&this._emit("toolCallCreated",ee(this,Wn,"f")));this._emit("runStepDelta",e.data.delta,n);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":Ne(this,Sl,void 0),e.data.step_details.type=="tool_calls"&&ee(this,Wn,"f")&&(this._emit("toolCallDone",ee(this,Wn,"f")),Ne(this,Wn,void 0)),this._emit("runStepDone",e.data,n);break}},C1=function(e){ee(this,Dg,"f").push(e),this._emit("event",e)},T1=function(e){switch(e.event){case"thread.run.step.created":return ee(this,Br,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let n=ee(this,Br,"f")[e.data.id];if(!n)throw Error("Received a RunStepDelta before creation of a snapshot");let r=e.data;if(r.delta){const s=Ai.accumulateDelta(n,r.delta);ee(this,Br,"f")[e.data.id]=s}return ee(this,Br,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":ee(this,Br,"f")[e.data.id]=e.data;break}if(ee(this,Br,"f")[e.data.id])return ee(this,Br,"f")[e.data.id];throw new Error("No snapshot available")},A1=function(e,n){let r=[];switch(e.event){case"thread.message.created":return[e.data,r];case"thread.message.delta":if(!n)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let s=e.data;if(s.delta.content)for(const a of s.delta.content)if(a.index in n.content){let l=n.content[a.index];n.content[a.index]=ee(this,un,"m",R1).call(this,a,l)}else n.content[a.index]=a,r.push(a);return[n,r];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(n)return[n,r];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},R1=function(e,n){return Ai.accumulateDelta(n,e)},O1=function(e){switch(Ne(this,Wu,e.data),e.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":case"thread.run.incomplete":Ne(this,Ri,e.data),ee(this,Wn,"f")&&(this._emit("toolCallDone",ee(this,Wn,"f")),Ne(this,Wn,void 0));break}};let Uy=class extends Se{constructor(){super(...arguments),this.steps=new RC(this._client)}create(e,n,r){const{include:s,...a}=n;return this._client.post(he`/threads/${e}/runs`,{query:{include:s},body:a,...r,headers:ve([{"OpenAI-Beta":"assistants=v2"},r?.headers]),stream:n.stream??!1})}retrieve(e,n,r){const{thread_id:s}=n;return this._client.get(he`/threads/${s}/runs/${e}`,{...r,headers:ve([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}update(e,n,r){const{thread_id:s,...a}=n;return this._client.post(he`/threads/${s}/runs/${e}`,{body:a,...r,headers:ve([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(e,n={},r){return this._client.getAPIList(he`/threads/${e}/runs`,Pt,{query:n,...r,headers:ve([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}cancel(e,n,r){const{thread_id:s}=n;return this._client.post(he`/threads/${s}/runs/${e}/cancel`,{...r,headers:ve([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}async createAndPoll(e,n,r){const s=await this.create(e,n,r);return await this.poll(s.id,{thread_id:e},r)}createAndStream(e,n,r){return kl.createAssistantStream(e,this._client.beta.threads.runs,n,r)}async poll(e,n,r){const s=ve([r?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":r?.pollIntervalMs?.toString()??void 0}]);for(;;){const{data:a,response:l}=await this.retrieve(e,n,{...r,headers:{...r?.headers,...s}}).withResponse();switch(a.status){case"queued":case"in_progress":case"cancelling":let u=5e3;if(r?.pollIntervalMs)u=r.pollIntervalMs;else{const f=l.headers.get("openai-poll-after-ms");if(f){const h=parseInt(f);isNaN(h)||(u=h)}}await Yl(u);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return a}}}stream(e,n,r){return kl.createAssistantStream(e,this._client.beta.threads.runs,n,r)}submitToolOutputs(e,n,r){const{thread_id:s,...a}=n;return this._client.post(he`/threads/${s}/runs/${e}/submit_tool_outputs`,{body:a,...r,headers:ve([{"OpenAI-Beta":"assistants=v2"},r?.headers]),stream:n.stream??!1})}async submitToolOutputsAndPoll(e,n,r){const s=await this.submitToolOutputs(e,n,r);return await this.poll(s.id,n,r)}submitToolOutputsStream(e,n,r){return kl.createToolAssistantStream(e,this._client.beta.threads.runs,n,r)}};Uy.Steps=RC;class fh extends Se{constructor(){super(...arguments),this.runs=new Uy(this._client),this.messages=new AC(this._client)}create(e={},n){return this._client.post("/threads",{body:e,...n,headers:ve([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}retrieve(e,n){return this._client.get(he`/threads/${e}`,{...n,headers:ve([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}update(e,n,r){return this._client.post(he`/threads/${e}`,{body:n,...r,headers:ve([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}delete(e,n){return this._client.delete(he`/threads/${e}`,{...n,headers:ve([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}createAndRun(e,n){return this._client.post("/threads/runs",{body:e,...n,headers:ve([{"OpenAI-Beta":"assistants=v2"},n?.headers]),stream:e.stream??!1})}async createAndRunPoll(e,n){const r=await this.createAndRun(e,n);return await this.runs.poll(r.id,{thread_id:r.thread_id},n)}createAndRunStream(e,n){return kl.createThreadAssistantStream(e,this._client.beta.threads,n)}}fh.Runs=Uy;fh.Messages=AC;class Ya extends Se{constructor(){super(...arguments),this.realtime=new ch(this._client),this.chatkit=new uh(this._client),this.assistants=new SC(this._client),this.threads=new fh(this._client)}}Ya.Realtime=ch;Ya.ChatKit=uh;Ya.Assistants=SC;Ya.Threads=fh;class OC extends Se{create(e,n){return this._client.post("/completions",{body:e,...n,stream:e.stream??!1})}}class IC extends Se{retrieve(e,n,r){const{container_id:s}=n;return this._client.get(he`/containers/${s}/files/${e}/content`,{...r,headers:ve([{Accept:"application/binary"},r?.headers]),__binaryResponse:!0})}}let $y=class extends Se{constructor(){super(...arguments),this.content=new IC(this._client)}create(e,n,r){return this._client.post(he`/containers/${e}/files`,Ii({body:n,...r},this._client))}retrieve(e,n,r){const{container_id:s}=n;return this._client.get(he`/containers/${s}/files/${e}`,r)}list(e,n={},r){return this._client.getAPIList(he`/containers/${e}/files`,Pt,{query:n,...r})}delete(e,n,r){const{container_id:s}=n;return this._client.delete(he`/containers/${s}/files/${e}`,{...r,headers:ve([{Accept:"*/*"},r?.headers])})}};$y.Content=IC;class qy extends Se{constructor(){super(...arguments),this.files=new $y(this._client)}create(e,n){return this._client.post("/containers",{body:e,...n})}retrieve(e,n){return this._client.get(he`/containers/${e}`,n)}list(e={},n){return this._client.getAPIList("/containers",Pt,{query:e,...n})}delete(e,n){return this._client.delete(he`/containers/${e}`,{...n,headers:ve([{Accept:"*/*"},n?.headers])})}}qy.Files=$y;class NC extends Se{create(e,n,r){const{include:s,...a}=n;return this._client.post(he`/conversations/${e}/items`,{query:{include:s},body:a,...r})}retrieve(e,n,r){const{conversation_id:s,...a}=n;return this._client.get(he`/conversations/${s}/items/${e}`,{query:a,...r})}list(e,n={},r){return this._client.getAPIList(he`/conversations/${e}/items`,If,{query:n,...r})}delete(e,n,r){const{conversation_id:s}=n;return this._client.delete(he`/conversations/${s}/items/${e}`,r)}}class Fy extends Se{constructor(){super(...arguments),this.items=new NC(this._client)}create(e={},n){return this._client.post("/conversations",{body:e,...n})}retrieve(e,n){return this._client.get(he`/conversations/${e}`,n)}update(e,n,r){return this._client.post(he`/conversations/${e}`,{body:n,...r})}delete(e,n){return this._client.delete(he`/conversations/${e}`,n)}}Fy.Items=NC;class MC extends Se{create(e,n){const r=!!e.encoding_format;let s=r?e.encoding_format:"base64";r&&cn(this._client).debug("embeddings/user defined encoding_format:",e.encoding_format);const a=this._client.post("/embeddings",{body:{...e,encoding_format:s},...n});return r?a:(cn(this._client).debug("embeddings/decoding base64 embeddings from base64"),a._thenUnwrap(l=>(l&&l.data&&l.data.forEach(u=>{const f=u.embedding;u.embedding=B6(f)}),l)))}}class DC extends Se{retrieve(e,n,r){const{eval_id:s,run_id:a}=n;return this._client.get(he`/evals/${s}/runs/${a}/output_items/${e}`,r)}list(e,n,r){const{eval_id:s,...a}=n;return this._client.getAPIList(he`/evals/${s}/runs/${e}/output_items`,Pt,{query:a,...r})}}class Vy extends Se{constructor(){super(...arguments),this.outputItems=new DC(this._client)}create(e,n,r){return this._client.post(he`/evals/${e}/runs`,{body:n,...r})}retrieve(e,n,r){const{eval_id:s}=n;return this._client.get(he`/evals/${s}/runs/${e}`,r)}list(e,n={},r){return this._client.getAPIList(he`/evals/${e}/runs`,Pt,{query:n,...r})}delete(e,n,r){const{eval_id:s}=n;return this._client.delete(he`/evals/${s}/runs/${e}`,r)}cancel(e,n,r){const{eval_id:s}=n;return this._client.post(he`/evals/${s}/runs/${e}`,r)}}Vy.OutputItems=DC;class Hy extends Se{constructor(){super(...arguments),this.runs=new Vy(this._client)}create(e,n){return this._client.post("/evals",{body:e,...n})}retrieve(e,n){return this._client.get(he`/evals/${e}`,n)}update(e,n,r){return this._client.post(he`/evals/${e}`,{body:n,...r})}list(e={},n){return this._client.getAPIList("/evals",Pt,{query:e,...n})}delete(e,n){return this._client.delete(he`/evals/${e}`,n)}}Hy.Runs=Vy;let LC=class extends Se{create(e,n){return this._client.post("/files",Ii({body:e,...n},this._client))}retrieve(e,n){return this._client.get(he`/files/${e}`,n)}list(e={},n){return this._client.getAPIList("/files",Pt,{query:e,...n})}delete(e,n){return this._client.delete(he`/files/${e}`,n)}content(e,n){return this._client.get(he`/files/${e}/content`,{...n,headers:ve([{Accept:"application/binary"},n?.headers]),__binaryResponse:!0})}async waitForProcessing(e,{pollInterval:n=5e3,maxWait:r=1800*1e3}={}){const s=new Set(["processed","error","deleted"]),a=Date.now();let l=await this.retrieve(e);for(;!l.status||!s.has(l.status);)if(await Yl(n),l=await this.retrieve(e),Date.now()-a>r)throw new Oy({message:`Giving up on waiting for file ${e} to finish processing after ${r} milliseconds.`});return l}};class zC extends Se{}let jC=class extends Se{run(e,n){return this._client.post("/fine_tuning/alpha/graders/run",{body:e,...n})}validate(e,n){return this._client.post("/fine_tuning/alpha/graders/validate",{body:e,...n})}};class Gy extends Se{constructor(){super(...arguments),this.graders=new jC(this._client)}}Gy.Graders=jC;class PC extends Se{create(e,n,r){return this._client.getAPIList(he`/fine_tuning/checkpoints/${e}/permissions`,lh,{body:n,method:"post",...r})}retrieve(e,n={},r){return this._client.get(he`/fine_tuning/checkpoints/${e}/permissions`,{query:n,...r})}delete(e,n,r){const{fine_tuned_model_checkpoint:s}=n;return this._client.delete(he`/fine_tuning/checkpoints/${s}/permissions/${e}`,r)}}let Ky=class extends Se{constructor(){super(...arguments),this.permissions=new PC(this._client)}};Ky.Permissions=PC;class BC extends Se{list(e,n={},r){return this._client.getAPIList(he`/fine_tuning/jobs/${e}/checkpoints`,Pt,{query:n,...r})}}class Zy extends Se{constructor(){super(...arguments),this.checkpoints=new BC(this._client)}create(e,n){return this._client.post("/fine_tuning/jobs",{body:e,...n})}retrieve(e,n){return this._client.get(he`/fine_tuning/jobs/${e}`,n)}list(e={},n){return this._client.getAPIList("/fine_tuning/jobs",Pt,{query:e,...n})}cancel(e,n){return this._client.post(he`/fine_tuning/jobs/${e}/cancel`,n)}listEvents(e,n={},r){return this._client.getAPIList(he`/fine_tuning/jobs/${e}/events`,Pt,{query:n,...r})}pause(e,n){return this._client.post(he`/fine_tuning/jobs/${e}/pause`,n)}resume(e,n){return this._client.post(he`/fine_tuning/jobs/${e}/resume`,n)}}Zy.Checkpoints=BC;class Xa extends Se{constructor(){super(...arguments),this.methods=new zC(this._client),this.jobs=new Zy(this._client),this.checkpoints=new Ky(this._client),this.alpha=new Gy(this._client)}}Xa.Methods=zC;Xa.Jobs=Zy;Xa.Checkpoints=Ky;Xa.Alpha=Gy;class UC extends Se{}class Qy extends Se{constructor(){super(...arguments),this.graderModels=new UC(this._client)}}Qy.GraderModels=UC;class $C extends Se{createVariation(e,n){return this._client.post("/images/variations",Ii({body:e,...n},this._client))}edit(e,n){return this._client.post("/images/edits",Ii({body:e,...n,stream:e.stream??!1},this._client))}generate(e,n){return this._client.post("/images/generations",{body:e,...n,stream:e.stream??!1})}}class qC extends Se{retrieve(e,n){return this._client.get(he`/models/${e}`,n)}list(e){return this._client.getAPIList("/models",lh,e)}delete(e,n){return this._client.delete(he`/models/${e}`,n)}}class FC extends Se{create(e,n){return this._client.post("/moderations",{body:e,...n})}}class VC extends Se{accept(e,n,r){return this._client.post(he`/realtime/calls/${e}/accept`,{body:n,...r,headers:ve([{Accept:"*/*"},r?.headers])})}hangup(e,n){return this._client.post(he`/realtime/calls/${e}/hangup`,{...n,headers:ve([{Accept:"*/*"},n?.headers])})}refer(e,n,r){return this._client.post(he`/realtime/calls/${e}/refer`,{body:n,...r,headers:ve([{Accept:"*/*"},r?.headers])})}reject(e,n={},r){return this._client.post(he`/realtime/calls/${e}/reject`,{body:n,...r,headers:ve([{Accept:"*/*"},r?.headers])})}}class HC extends Se{create(e,n){return this._client.post("/realtime/client_secrets",{body:e,...n})}}class hh extends Se{constructor(){super(...arguments),this.clientSecrets=new HC(this._client),this.calls=new VC(this._client)}}hh.ClientSecrets=HC;hh.Calls=VC;function $6(t,e){return!e||!F6(e)?{...t,output_parsed:null,output:t.output.map(n=>n.type==="function_call"?{...n,parsed_arguments:null}:n.type==="message"?{...n,content:n.content.map(r=>({...r,parsed:null}))}:n)}:GC(t,e)}function GC(t,e){const n=t.output.map(s=>{if(s.type==="function_call")return{...s,parsed_arguments:G6(e,s)};if(s.type==="message"){const a=s.content.map(l=>l.type==="output_text"?{...l,parsed:q6(e,l.text)}:l);return{...s,content:a}}return s}),r=Object.assign({},t,{output:n});return Object.getOwnPropertyDescriptor(t,"output_text")||Lg(r),Object.defineProperty(r,"output_parsed",{enumerable:!0,get(){for(const s of r.output)if(s.type==="message"){for(const a of s.content)if(a.type==="output_text"&&a.parsed!==null)return a.parsed}return null}}),r}function q6(t,e){return t.text?.format?.type!=="json_schema"?null:"$parseRaw"in t.text?.format?(t.text?.format).$parseRaw(e):JSON.parse(e)}function F6(t){return!!Dy(t.text?.format)}function V6(t){return t?.$brand==="auto-parseable-tool"}function H6(t,e){return t.find(n=>n.type==="function"&&n.name===e)}function G6(t,e){const n=H6(t.tools??[],e.name);return{...e,...e,parsed_arguments:V6(n)?n.$parseRaw(e.arguments):n?.strict?JSON.parse(e.arguments):null}}function Lg(t){const e=[];for(const n of t.output)if(n.type==="message")for(const r of n.content)r.type==="output_text"&&e.push(r.text);t.output_text=e.join("")}var Ea,Iu,Hs,Nu,I1,N1,M1,D1;class Jy extends zy{constructor(e){super(),Ea.add(this),Iu.set(this,void 0),Hs.set(this,void 0),Nu.set(this,void 0),Ne(this,Iu,e)}static createResponse(e,n,r){const s=new Jy(n);return s._run(()=>s._createOrRetrieveResponse(e,n,{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),s}async _createOrRetrieveResponse(e,n,r){const s=r?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),ee(this,Ea,"m",I1).call(this);let a,l=null;"response_id"in n?(a=await e.responses.retrieve(n.response_id,{stream:!0},{...r,signal:this.controller.signal,stream:!0}),l=n.starting_after??null):a=await e.responses.create({...n,stream:!0},{...r,signal:this.controller.signal}),this._connected();for await(const u of a)ee(this,Ea,"m",N1).call(this,u,l);if(a.controller.signal?.aborted)throw new vr;return ee(this,Ea,"m",M1).call(this)}[(Iu=new WeakMap,Hs=new WeakMap,Nu=new WeakMap,Ea=new WeakSet,I1=function(){this.ended||Ne(this,Hs,void 0)},N1=function(n,r){if(this.ended)return;const s=(l,u)=>{(r==null||u.sequence_number>r)&&this._emit(l,u)},a=ee(this,Ea,"m",D1).call(this,n);switch(s("event",n),n.type){case"response.output_text.delta":{const l=a.output[n.output_index];if(!l)throw new Te(`missing output at index ${n.output_index}`);if(l.type==="message"){const u=l.content[n.content_index];if(!u)throw new Te(`missing content at index ${n.content_index}`);if(u.type!=="output_text")throw new Te(`expected content to be 'output_text', got ${u.type}`);s("response.output_text.delta",{...n,snapshot:u.text})}break}case"response.function_call_arguments.delta":{const l=a.output[n.output_index];if(!l)throw new Te(`missing output at index ${n.output_index}`);l.type==="function_call"&&s("response.function_call_arguments.delta",{...n,snapshot:l.arguments});break}default:s(n.type,n);break}},M1=function(){if(this.ended)throw new Te("stream has ended, this shouldn't happen");const n=ee(this,Hs,"f");if(!n)throw new Te("request ended without sending any events");Ne(this,Hs,void 0);const r=K6(n,ee(this,Iu,"f"));return Ne(this,Nu,r),r},D1=function(n){let r=ee(this,Hs,"f");if(!r){if(n.type!=="response.created")throw new Te(`When snapshot hasn't been set yet, expected 'response.created' event, got ${n.type}`);return r=Ne(this,Hs,n.response),r}switch(n.type){case"response.output_item.added":{r.output.push(n.item);break}case"response.content_part.added":{const s=r.output[n.output_index];if(!s)throw new Te(`missing output at index ${n.output_index}`);const a=s.type,l=n.part;a==="message"&&l.type!=="reasoning_text"?s.content.push(l):a==="reasoning"&&l.type==="reasoning_text"&&(s.content||(s.content=[]),s.content.push(l));break}case"response.output_text.delta":{const s=r.output[n.output_index];if(!s)throw new Te(`missing output at index ${n.output_index}`);if(s.type==="message"){const a=s.content[n.content_index];if(!a)throw new Te(`missing content at index ${n.content_index}`);if(a.type!=="output_text")throw new Te(`expected content to be 'output_text', got ${a.type}`);a.text+=n.delta}break}case"response.function_call_arguments.delta":{const s=r.output[n.output_index];if(!s)throw new Te(`missing output at index ${n.output_index}`);s.type==="function_call"&&(s.arguments+=n.delta);break}case"response.reasoning_text.delta":{const s=r.output[n.output_index];if(!s)throw new Te(`missing output at index ${n.output_index}`);if(s.type==="reasoning"){const a=s.content?.[n.content_index];if(!a)throw new Te(`missing content at index ${n.content_index}`);if(a.type!=="reasoning_text")throw new Te(`expected content to be 'reasoning_text', got ${a.type}`);a.text+=n.delta}break}case"response.completed":{Ne(this,Hs,n.response);break}}return r},Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("event",s=>{const a=n.shift();a?a.resolve(s):e.push(s)}),this.on("end",()=>{r=!0;for(const s of n)s.resolve(void 0);n.length=0}),this.on("abort",s=>{r=!0;for(const a of n)a.reject(s);n.length=0}),this.on("error",s=>{r=!0;for(const a of n)a.reject(s);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((a,l)=>n.push({resolve:a,reject:l})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();const e=ee(this,Nu,"f");if(!e)throw new Te("stream ended without producing a ChatCompletion");return e}}function K6(t,e){return $6(t,e)}class KC extends Se{list(e,n={},r){return this._client.getAPIList(he`/responses/${e}/input_items`,Pt,{query:n,...r})}}class ZC extends Se{count(e={},n){return this._client.post("/responses/input_tokens",{body:e,...n})}}class dh extends Se{constructor(){super(...arguments),this.inputItems=new KC(this._client),this.inputTokens=new ZC(this._client)}create(e,n){return this._client.post("/responses",{body:e,...n,stream:e.stream??!1})._thenUnwrap(r=>("object"in r&&r.object==="response"&&Lg(r),r))}retrieve(e,n={},r){return this._client.get(he`/responses/${e}`,{query:n,...r,stream:n?.stream??!1})._thenUnwrap(s=>("object"in s&&s.object==="response"&&Lg(s),s))}delete(e,n){return this._client.delete(he`/responses/${e}`,{...n,headers:ve([{Accept:"*/*"},n?.headers])})}parse(e,n){return this._client.responses.create(e,n)._thenUnwrap(r=>GC(r,e))}stream(e,n){return Jy.createResponse(this._client,e,n)}cancel(e,n){return this._client.post(he`/responses/${e}/cancel`,n)}compact(e,n){return this._client.post("/responses/compact",{body:e,...n})}}dh.InputItems=KC;dh.InputTokens=ZC;class QC extends Se{create(e,n,r){return this._client.post(he`/uploads/${e}/parts`,Ii({body:n,...r},this._client))}}class Yy extends Se{constructor(){super(...arguments),this.parts=new QC(this._client)}create(e,n){return this._client.post("/uploads",{body:e,...n})}cancel(e,n){return this._client.post(he`/uploads/${e}/cancel`,n)}complete(e,n,r){return this._client.post(he`/uploads/${e}/complete`,{body:n,...r})}}Yy.Parts=QC;const Z6=async t=>{const e=await Promise.allSettled(t),n=e.filter(s=>s.status==="rejected");if(n.length){for(const s of n)console.error(s.reason);throw new Error(`${n.length} promise(s) failed - see the above errors`)}const r=[];for(const s of e)s.status==="fulfilled"&&r.push(s.value);return r};class JC extends Se{create(e,n,r){return this._client.post(he`/vector_stores/${e}/file_batches`,{body:n,...r,headers:ve([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}retrieve(e,n,r){const{vector_store_id:s}=n;return this._client.get(he`/vector_stores/${s}/file_batches/${e}`,{...r,headers:ve([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}cancel(e,n,r){const{vector_store_id:s}=n;return this._client.post(he`/vector_stores/${s}/file_batches/${e}/cancel`,{...r,headers:ve([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}async createAndPoll(e,n,r){const s=await this.create(e,n);return await this.poll(e,s.id,r)}listFiles(e,n,r){const{vector_store_id:s,...a}=n;return this._client.getAPIList(he`/vector_stores/${s}/file_batches/${e}/files`,Pt,{query:a,...r,headers:ve([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}async poll(e,n,r){const s=ve([r?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":r?.pollIntervalMs?.toString()??void 0}]);for(;;){const{data:a,response:l}=await this.retrieve(n,{vector_store_id:e},{...r,headers:s}).withResponse();switch(a.status){case"in_progress":let u=5e3;if(r?.pollIntervalMs)u=r.pollIntervalMs;else{const f=l.headers.get("openai-poll-after-ms");if(f){const h=parseInt(f);isNaN(h)||(u=h)}}await Yl(u);break;case"failed":case"cancelled":case"completed":return a}}}async uploadAndPoll(e,{files:n,fileIds:r=[]},s){if(n==null||n.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const a=s?.maxConcurrency??5,l=Math.min(a,n.length),u=this._client,f=n.values(),h=[...r];async function m(_){for(let g of _){const v=await u.files.create({file:g,purpose:"assistants"},s);h.push(v.id)}}const p=Array(l).fill(f).map(m);return await Z6(p),await this.createAndPoll(e,{file_ids:h})}}class YC extends Se{create(e,n,r){return this._client.post(he`/vector_stores/${e}/files`,{body:n,...r,headers:ve([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}retrieve(e,n,r){const{vector_store_id:s}=n;return this._client.get(he`/vector_stores/${s}/files/${e}`,{...r,headers:ve([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}update(e,n,r){const{vector_store_id:s,...a}=n;return this._client.post(he`/vector_stores/${s}/files/${e}`,{body:a,...r,headers:ve([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(e,n={},r){return this._client.getAPIList(he`/vector_stores/${e}/files`,Pt,{query:n,...r,headers:ve([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}delete(e,n,r){const{vector_store_id:s}=n;return this._client.delete(he`/vector_stores/${s}/files/${e}`,{...r,headers:ve([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}async createAndPoll(e,n,r){const s=await this.create(e,n,r);return await this.poll(e,s.id,r)}async poll(e,n,r){const s=ve([r?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":r?.pollIntervalMs?.toString()??void 0}]);for(;;){const a=await this.retrieve(n,{vector_store_id:e},{...r,headers:s}).withResponse(),l=a.data;switch(l.status){case"in_progress":let u=5e3;if(r?.pollIntervalMs)u=r.pollIntervalMs;else{const f=a.response.headers.get("openai-poll-after-ms");if(f){const h=parseInt(f);isNaN(h)||(u=h)}}await Yl(u);break;case"failed":case"completed":return l}}}async upload(e,n,r){const s=await this._client.files.create({file:n,purpose:"assistants"},r);return this.create(e,{file_id:s.id},r)}async uploadAndPoll(e,n,r){const s=await this.upload(e,n,r);return await this.poll(e,s.id,r)}content(e,n,r){const{vector_store_id:s}=n;return this._client.getAPIList(he`/vector_stores/${s}/files/${e}/content`,lh,{...r,headers:ve([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}}class ph extends Se{constructor(){super(...arguments),this.files=new YC(this._client),this.fileBatches=new JC(this._client)}create(e,n){return this._client.post("/vector_stores",{body:e,...n,headers:ve([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}retrieve(e,n){return this._client.get(he`/vector_stores/${e}`,{...n,headers:ve([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}update(e,n,r){return this._client.post(he`/vector_stores/${e}`,{body:n,...r,headers:ve([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(e={},n){return this._client.getAPIList("/vector_stores",Pt,{query:e,...n,headers:ve([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}delete(e,n){return this._client.delete(he`/vector_stores/${e}`,{...n,headers:ve([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}search(e,n,r){return this._client.getAPIList(he`/vector_stores/${e}/search`,lh,{body:n,method:"post",...r,headers:ve([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}}ph.Files=YC;ph.FileBatches=JC;class XC extends Se{create(e,n){return this._client.post("/videos",b1({body:e,...n},this._client))}retrieve(e,n){return this._client.get(he`/videos/${e}`,n)}list(e={},n){return this._client.getAPIList("/videos",If,{query:e,...n})}delete(e,n){return this._client.delete(he`/videos/${e}`,n)}downloadContent(e,n={},r){return this._client.get(he`/videos/${e}/content`,{query:n,...r,headers:ve([{Accept:"application/binary"},r?.headers]),__binaryResponse:!0})}remix(e,n,r){return this._client.post(he`/videos/${e}/remix`,b1({body:n,...r},this._client))}}var Oa,WC,ef;class eT extends Se{constructor(){super(...arguments),Oa.add(this)}async unwrap(e,n,r=this._client.webhookSecret,s=300){return await this.verifySignature(e,n,r,s),JSON.parse(e)}async verifySignature(e,n,r=this._client.webhookSecret,s=300){if(typeof crypto>"u"||typeof crypto.subtle.importKey!="function"||typeof crypto.subtle.verify!="function")throw new Error("Webhook signature verification is only supported when the `crypto` global is defined");ee(this,Oa,"m",WC).call(this,r);const a=ve([n]).values,l=ee(this,Oa,"m",ef).call(this,a,"webhook-signature"),u=ee(this,Oa,"m",ef).call(this,a,"webhook-timestamp"),f=ee(this,Oa,"m",ef).call(this,a,"webhook-id"),h=parseInt(u,10);if(isNaN(h))throw new ol("Invalid webhook timestamp format");const m=Math.floor(Date.now()/1e3);if(m-h>s)throw new ol("Webhook timestamp is too old");if(h>m+s)throw new ol("Webhook timestamp is too new");const p=l.split(" ").map(x=>x.startsWith("v1,")?x.substring(3):x),_=r.startsWith("whsec_")?Buffer.from(r.replace("whsec_",""),"base64"):Buffer.from(r,"utf-8"),g=f?`${f}.${u}.${e}`:`${u}.${e}`,v=await crypto.subtle.importKey("raw",_,{name:"HMAC",hash:"SHA-256"},!1,["verify"]);for(const x of p)try{const k=Buffer.from(x,"base64");if(await crypto.subtle.verify("HMAC",v,k,new TextEncoder().encode(g)))return}catch{continue}throw new ol("The given webhook signature does not match the expected signature")}}Oa=new WeakSet,WC=function(e){if(typeof e!="string"||e.length===0)throw new Error("The webhook secret must either be set using the env var, OPENAI_WEBHOOK_SECRET, on the client class, OpenAI({ webhookSecret: '123' }), or passed to this function")},ef=function(e,n){if(!e)throw new Error("Headers are required");const r=e.get(n);if(r==null)throw new Error(`Missing required header: ${n}`);return r};var zg,Xy,tf,tT;class $e{constructor({baseURL:e=ka("OPENAI_BASE_URL"),apiKey:n=ka("OPENAI_API_KEY"),organization:r=ka("OPENAI_ORG_ID")??null,project:s=ka("OPENAI_PROJECT_ID")??null,webhookSecret:a=ka("OPENAI_WEBHOOK_SECRET")??null,...l}={}){if(zg.add(this),tf.set(this,void 0),this.completions=new OC(this),this.chat=new By(this),this.embeddings=new MC(this),this.files=new LC(this),this.images=new $C(this),this.audio=new Wl(this),this.moderations=new FC(this),this.models=new qC(this),this.fineTuning=new Xa(this),this.graders=new Qy(this),this.vectorStores=new ph(this),this.webhooks=new eT(this),this.beta=new Ya(this),this.batches=new wC(this),this.uploads=new Yy(this),this.responses=new dh(this),this.realtime=new hh(this),this.conversations=new Fy(this),this.evals=new Hy(this),this.containers=new qy(this),this.videos=new XC(this),n===void 0)throw new Te("Missing credentials. Please pass an `apiKey`, or set the `OPENAI_API_KEY` environment variable.");const u={apiKey:n,organization:r,project:s,webhookSecret:a,...l,baseURL:e||"https://api.openai.com/v1"};if(!u.dangerouslyAllowBrowser&&QP())throw new Te(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);this.baseURL=u.baseURL,this.timeout=u.timeout??Xy.DEFAULT_TIMEOUT,this.logger=u.logger??console;const f="warn";this.logLevel=f,this.logLevel=y1(u.logLevel,"ClientOptions.logLevel",this)??y1(ka("OPENAI_LOG"),"process.env['OPENAI_LOG']",this)??f,this.fetchOptions=u.fetchOptions,this.maxRetries=u.maxRetries??2,this.fetch=u.fetch??e6(),Ne(this,tf,n6),this._options=u,this.apiKey=typeof n=="string"?n:"Missing Key",this.organization=r,this.project=s,this.webhookSecret=a}withOptions(e){return new this.constructor({...this._options,baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,organization:this.organization,project:this.project,webhookSecret:this.webhookSecret,...e})}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){}async authHeaders(e){return ve([{Authorization:`Bearer ${this.apiKey}`}])}stringifyQuery(e){return l6(e,{arrayFormat:"brackets"})}getUserAgent(){return`${this.constructor.name}/JS ${Aa}`}defaultIdempotencyKey(){return`stainless-node-retry-${kE()}`}makeStatusError(e,n,r,s){return fn.generate(e,n,r,s)}async _callApiKey(){const e=this._options.apiKey;if(typeof e!="function")return!1;let n;try{n=await e()}catch(r){throw r instanceof Te?r:new Te(`Failed to get token from 'apiKey' function: ${r.message}`,{cause:r})}if(typeof n!="string"||!n)throw new Te(`Expected 'apiKey' function argument to return a string but it returned ${n}`);return this.apiKey=n,!0}buildURL(e,n,r){const s=!ee(this,zg,"m",tT).call(this)&&r||this.baseURL,a=VP(e)?new URL(e):new URL(s+(s.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),l=this.defaultQuery();return HP(l)||(n={...l,...n}),typeof n=="object"&&n&&!Array.isArray(n)&&(a.search=this.stringifyQuery(n)),a.toString()}async prepareOptions(e){await this._callApiKey()}async prepareRequest(e,{url:n,options:r}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,r){return this.request(Promise.resolve(r).then(s=>({method:e,path:n,...s})))}request(e,n=null){return new oh(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,r){const s=await e,a=s.maxRetries??this.maxRetries;n==null&&(n=a),await this.prepareOptions(s);const{req:l,url:u,timeout:f}=await this.buildRequest(s,{retryCount:a-n});await this.prepareRequest(l,{url:u,options:s});const h="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),m=r===void 0?"":`, retryOf: ${r}`,p=Date.now();if(cn(this).debug(`[${h}] sending request`,ki({retryOfRequestLogID:r,method:s.method,url:u,options:s,headers:l.headers})),s.signal?.aborted)throw new vr;const _=new AbortController,g=await this.fetchWithTimeout(u,l,f,_).catch(kg),v=Date.now();if(g instanceof globalThis.Error){const S=`retrying, ${n} attempts remaining`;if(s.signal?.aborted)throw new vr;const T=Sg(g)||/timed? ?out/i.test(String(g)+("cause"in g?String(g.cause):""));if(n)return cn(this).info(`[${h}] connection ${T?"timed out":"failed"} - ${S}`),cn(this).debug(`[${h}] connection ${T?"timed out":"failed"} (${S})`,ki({retryOfRequestLogID:r,url:u,durationMs:v-p,message:g.message})),this.retryRequest(s,n,r??h);throw cn(this).info(`[${h}] connection ${T?"timed out":"failed"} - error; no more retries left`),cn(this).debug(`[${h}] connection ${T?"timed out":"failed"} (error; no more retries left)`,ki({retryOfRequestLogID:r,url:u,durationMs:v-p,message:g.message})),T?new Oy:new ih({cause:g})}const x=[...g.headers.entries()].filter(([S])=>S==="x-request-id").map(([S,T])=>", "+S+": "+JSON.stringify(T)).join(""),k=`[${h}${m}${x}] ${l.method} ${u} ${g.ok?"succeeded":"failed"} with status ${g.status} in ${v-p}ms`;if(!g.ok){const S=await this.shouldRetry(g);if(n&&S){const P=`retrying, ${n} attempts remaining`;return await t6(g.body),cn(this).info(`${k} - ${P}`),cn(this).debug(`[${h}] response error (${P})`,ki({retryOfRequestLogID:r,url:g.url,status:g.status,headers:g.headers,durationMs:v-p})),this.retryRequest(s,n,r??h,g.headers)}const T=S?"error; no more retries left":"error; not retryable";cn(this).info(`${k} - ${T}`);const C=await g.text().catch(P=>kg(P).message),L=ZP(C),D=L?void 0:C;throw cn(this).debug(`[${h}] response error (${T})`,ki({retryOfRequestLogID:r,url:g.url,status:g.status,headers:g.headers,message:D,durationMs:Date.now()-p})),this.makeStatusError(g.status,L,D,g.headers)}return cn(this).info(k),cn(this).debug(`[${h}] response start`,ki({retryOfRequestLogID:r,url:g.url,status:g.status,headers:g.headers,durationMs:v-p})),{response:g,options:s,controller:_,requestLogID:h,retryOfRequestLogID:r,startTime:p}}getAPIList(e,n,r){return this.requestAPIList(n,{method:"get",path:e,...r})}requestAPIList(e,n){const r=this.makeRequest(n,null,void 0);return new y6(this,r,e)}async fetchWithTimeout(e,n,r,s){const{signal:a,method:l,...u}=n||{};a&&a.addEventListener("abort",()=>s.abort());const f=setTimeout(()=>s.abort(),r),h=globalThis.ReadableStream&&u.body instanceof globalThis.ReadableStream||typeof u.body=="object"&&u.body!==null&&Symbol.asyncIterator in u.body,m={signal:s.signal,...h?{duplex:"half"}:{},method:"GET",...u};l&&(m.method=l.toUpperCase());try{return await this.fetch.call(void 0,e,m)}finally{clearTimeout(f)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,r,s){let a;const l=s?.get("retry-after-ms");if(l){const f=parseFloat(l);Number.isNaN(f)||(a=f)}const u=s?.get("retry-after");if(u&&!a){const f=parseFloat(u);Number.isNaN(f)?a=Date.parse(u)-Date.now():a=f*1e3}if(!(a&&0<=a&&a<60*1e3)){const f=e.maxRetries??this.maxRetries;a=this.calculateDefaultRetryTimeoutMillis(n,f)}return await Yl(a),this.makeRequest(e,n-1,r)}calculateDefaultRetryTimeoutMillis(e,n){const a=n-e,l=Math.min(.5*Math.pow(2,a),8),u=1-Math.random()*.25;return l*u*1e3}async buildRequest(e,{retryCount:n=0}={}){const r={...e},{method:s,path:a,query:l,defaultBaseURL:u}=r,f=this.buildURL(a,l,u);"timeout"in r&&KP("timeout",r.timeout),r.timeout=r.timeout??this.timeout;const{bodyHeaders:h,body:m}=this.buildBody({options:r}),p=await this.buildHeaders({options:e,method:s,bodyHeaders:h,retryCount:n});return{req:{method:s,headers:p,...r.signal&&{signal:r.signal},...globalThis.ReadableStream&&m instanceof globalThis.ReadableStream&&{duplex:"half"},...m&&{body:m},...this.fetchOptions??{},...r.fetchOptions??{}},url:f,timeout:r.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:r,retryCount:s}){let a={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),a[this.idempotencyHeader]=e.idempotencyKey);const l=ve([a,{Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(s),...e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{},...WP(),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project},await this.authHeaders(e),this._options.defaultHeaders,r,e.headers]);return this.validateHeaders(l),l.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const r=ve([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&r.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:jE(e)}:ee(this,tf,"f").call(this,{body:e,headers:r})}}Xy=$e,tf=new WeakMap,zg=new WeakSet,tT=function(){return this.baseURL!=="https://api.openai.com/v1"};$e.OpenAI=Xy;$e.DEFAULT_TIMEOUT=6e5;$e.OpenAIError=Te;$e.APIError=fn;$e.APIConnectionError=ih;$e.APIConnectionTimeoutError=Oy;$e.APIUserAbortError=vr;$e.NotFoundError=AE;$e.ConflictError=RE;$e.RateLimitError=IE;$e.BadRequestError=EE;$e.AuthenticationError=CE;$e.InternalServerError=NE;$e.PermissionDeniedError=TE;$e.UnprocessableEntityError=OE;$e.InvalidWebhookSignatureError=ol;$e.toFile=w6;$e.Completions=OC;$e.Chat=By;$e.Embeddings=MC;$e.Files=LC;$e.Images=$C;$e.Audio=Wl;$e.Moderations=FC;$e.Models=qC;$e.FineTuning=Xa;$e.Graders=Qy;$e.VectorStores=ph;$e.Webhooks=eT;$e.Beta=Ya;$e.Batches=wC;$e.Uploads=Yy;$e.Responses=dh;$e.Realtime=hh;$e.Conversations=Fy;$e.Evals=Hy;$e.Containers=qy;$e.Videos=XC;class Q6 extends $e{constructor(e){super({...e,dangerouslyAllowBrowser:!0})}}function J6(t){return new Q6({apiKey:t.apiKey,organization:t.organization,baseURL:t.baseURL})}function Y6(t){return`${t}-${Date.now()}-${Math.random().toString(36).substring(7)}`}class X6 extends EP{constructor(e,n){super({},n),this.kind="text",this.name="openai",this.client=J6(e)}async*chatStream(e){const n=new Map,r=this.mapTextOptionsToOpenAI(e);try{const s=await this.client.responses.create({...r,stream:!0},{headers:e.request?.headers,signal:e.request?.signal});yield*this.processOpenAIStreamChunks(s,n,e,()=>Y6(this.name))}catch(s){const a=s;throw console.error(">>> chatStream: Fatal error during response creation <<<"),console.error(">>> Error message:",a.message),console.error(">>> Error stack:",a.stack),console.error(">>> Full error:",a),s}}async structuredOutput(e){const{chatOptions:n,outputSchema:r}=e,s=this.mapTextOptionsToOpenAI(n),a=xl(r,r.required||[]);try{const l=await this.client.responses.create({...s,stream:!1,text:{format:{type:"json_schema",name:"structured_output",schema:a,strict:!0}}},{headers:n.request?.headers,signal:n.request?.signal}),u=this.extractTextFromResponse(l);let f;try{f=JSON.parse(u)}catch{throw new Error(`Failed to parse structured output as JSON. Content: ${u.slice(0,200)}${u.length>200?"...":""}`)}return{data:wg(f),rawText:u}}catch(l){const u=l;throw console.error(">>> structuredOutput: Error during response creation <<<"),console.error(">>> Error message:",u.message),l}}extractTextFromResponse(e){let n="";for(const r of e.output)if(r.type==="message")for(const s of r.content)s.type==="output_text"&&(n+=s.text);return n}async*processOpenAIStreamChunks(e,n,r,s){let a="",l="";const u=Date.now();let f=0,h=!1,m=!1,p=null,_=r.model;try{for await(const g of e){f++;const v=x=>x.type==="output_text"?(a+=x.text,{type:"content",id:p||s(),model:_||r.model,timestamp:u,delta:x.text,content:a,role:"assistant"}):x.type==="reasoning_text"?(l+=x.text,{type:"thinking",id:p||s(),model:_||r.model,timestamp:u,delta:x.text,content:l}):{type:"error",id:p||s(),model:_||r.model,timestamp:u,error:{message:x.refusal}};if((g.type==="response.created"||g.type==="response.incomplete"||g.type==="response.failed")&&(p=g.response.id,_=g.response.model,h=!1,m=!1,a="",l="",g.response.error&&(yield{type:"error",id:g.response.id,model:g.response.model,timestamp:u,error:g.response.error}),g.response.incomplete_details&&(yield{type:"error",id:g.response.id,model:g.response.model,timestamp:u,error:{message:g.response.incomplete_details.reason??""}})),g.type==="response.output_text.delta"&&g.delta){const x=Array.isArray(g.delta)?g.delta.join(""):typeof g.delta=="string"?g.delta:"";x&&(a+=x,h=!0,yield{type:"content",id:p||s(),model:_||r.model,timestamp:u,delta:x,content:a,role:"assistant"})}if(g.type==="response.reasoning_text.delta"&&g.delta){const x=Array.isArray(g.delta)?g.delta.join(""):typeof g.delta=="string"?g.delta:"";x&&(l+=x,m=!0,yield{type:"thinking",id:p||s(),model:_||r.model,timestamp:u,delta:x,content:l})}if(g.type==="response.reasoning_summary_text.delta"&&g.delta){const x=typeof g.delta=="string"?g.delta:"";x&&(l+=x,m=!0,yield{type:"thinking",id:p||s(),model:_||r.model,timestamp:u,delta:x,content:l})}if(g.type==="response.content_part.added"){const x=g.part;yield v(x)}if(g.type==="response.content_part.done"){const x=g.part;if(x.type==="output_text"&&h||x.type==="reasoning_text"&&m)continue;yield v(x)}if(g.type==="response.output_item.added"){const x=g.item;x.type==="function_call"&&x.id&&(n.has(x.id)||n.set(x.id,{index:g.output_index,name:x.name||""}))}if(g.type==="response.function_call_arguments.done"){const{item_id:x,output_index:k}=g,T=n.get(x)?.name||"";yield{type:"tool_call",id:p||s(),model:_||r.model,timestamp:u,index:k,toolCall:{id:x,type:"function",function:{name:T,arguments:g.arguments}}}}if(g.type==="response.completed"){const x=g.response.output.some(k=>k.type==="function_call");yield{type:"done",id:p||s(),model:_||r.model,timestamp:u,usage:{promptTokens:g.response.usage?.input_tokens||0,completionTokens:g.response.usage?.output_tokens||0,totalTokens:g.response.usage?.total_tokens||0},finishReason:x?"tool_calls":"stop"}}g.type==="error"&&(yield{type:"error",id:p||s(),model:_||r.model,timestamp:u,error:{message:g.message,code:g.code??void 0}})}}catch(g){const v=g;console.log("[OpenAI Adapter] Stream ended with error. Event type summary:",{totalChunks:f,error:v.message}),yield{type:"error",id:s(),model:r.model,timestamp:u,error:{message:v.message||"Unknown error occurred",code:v.code}}}}mapTextOptionsToOpenAI(e){const n=e.modelOptions,r=this.convertMessagesToInput(e.messages);n&&TP({...n,model:e.model});const s=e.tools?qP(e.tools):void 0;return{model:e.model,temperature:e.temperature,max_output_tokens:e.maxTokens,top_p:e.topP,metadata:e.metadata,instructions:e.systemPrompts?.join(`
`),...n,input:r,tools:s}}convertMessagesToInput(e){const n=[];for(const r of e){if(r.role==="tool"){n.push({type:"function_call_output",call_id:r.toolCallId||"",output:typeof r.content=="string"?r.content:JSON.stringify(r.content)});continue}if(r.role==="assistant"){if(r.toolCalls&&r.toolCalls.length>0)for(const l of r.toolCalls){const u=typeof l.function.arguments=="string"?l.function.arguments:JSON.stringify(l.function.arguments);n.push({type:"function_call",call_id:l.id,name:l.function.name,arguments:u})}if(r.content){const l=this.extractTextContent(r.content);l&&n.push({type:"message",role:"assistant",content:l})}continue}const s=this.normalizeContent(r.content),a=[];for(const l of s)a.push(this.convertContentPartToOpenAI(l));a.length===0&&a.push({type:"input_text",text:""}),n.push({type:"message",role:"user",content:a})}return n}convertContentPartToOpenAI(e){switch(e.type){case"text":return{type:"input_text",text:e.content};case"image":{const n=e.metadata;return e.source.type==="url"?{type:"input_image",image_url:e.source.value,detail:n?.detail||"auto"}:{type:"input_image",image_url:e.source.value,detail:n?.detail||"auto"}}case"audio":return e.source.type==="url"?{type:"input_file",file_url:e.source.value}:{type:"input_file",file_data:e.source.value};default:throw new Error(`Unsupported content part type: ${e.type}`)}}normalizeContent(e){return e===null?[]:typeof e=="string"?[{type:"text",content:e}]:e}extractTextContent(e){return e===null?"":typeof e=="string"?e:e.filter(n=>n.type==="text").map(n=>n.content).join("")}}function W6(t){const e=`${window.location.origin}/openai/v1`;return new X6({apiKey:"not-needed",baseURL:e},t)}function eB(){return yy().ai?.model||"gpt-5.1"}function fe(t,e,n){function r(u,f){if(u._zod||Object.defineProperty(u,"_zod",{value:{def:f,constr:l,traits:new Set},enumerable:!1}),u._zod.traits.has(t))return;u._zod.traits.add(t),e(u,f);const h=l.prototype,m=Object.keys(h);for(let p=0;p<m.length;p++){const _=m[p];_ in u||(u[_]=h[_].bind(u))}}const s=n?.Parent??Object;class a extends s{}Object.defineProperty(a,"name",{value:t});function l(u){var f;const h=n?.Parent?new a:this;r(h,u),(f=h._zod).deferred??(f.deferred=[]);for(const m of h._zod.deferred)m();return h}return Object.defineProperty(l,"init",{value:r}),Object.defineProperty(l,Symbol.hasInstance,{value:u=>n?.Parent&&u instanceof n.Parent?!0:u?._zod?.traits?.has(t)}),Object.defineProperty(l,"name",{value:t}),l}class $a extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class nT extends Error{constructor(e){super(`Encountered unidirectional transform during encode: ${e}`),this.name="ZodEncodeError"}}const rT={};function Ni(t){return rT}function sT(t){const e=Object.values(t).filter(r=>typeof r=="number");return Object.entries(t).filter(([r,s])=>e.indexOf(+r)===-1).map(([r,s])=>s)}function jg(t,e){return typeof e=="bigint"?e.toString():e}function Wy(t){return{get value(){{const e=t();return Object.defineProperty(this,"value",{value:e}),e}}}}function e0(t){return t==null}function t0(t){const e=t.startsWith("^")?1:0,n=t.endsWith("$")?t.length-1:t.length;return t.slice(e,n)}const L1=Symbol("evaluating");function ct(t,e,n){let r;Object.defineProperty(t,e,{get(){if(r!==L1)return r===void 0&&(r=L1,r=n()),r},set(s){Object.defineProperty(t,e,{value:s})},configurable:!0})}function ji(t,e,n){Object.defineProperty(t,e,{value:n,writable:!0,enumerable:!0,configurable:!0})}function Ws(...t){const e={};for(const n of t){const r=Object.getOwnPropertyDescriptors(n);Object.assign(e,r)}return Object.defineProperties({},e)}function z1(t){return JSON.stringify(t)}function tB(t){return t.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"")}const iT="captureStackTrace"in Error?Error.captureStackTrace:(...t)=>{};function Bf(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)}const nB=Wy(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{const t=Function;return new t(""),!0}catch{return!1}});function Bl(t){if(Bf(t)===!1)return!1;const e=t.constructor;if(e===void 0||typeof e!="function")return!0;const n=e.prototype;return!(Bf(n)===!1||Object.prototype.hasOwnProperty.call(n,"isPrototypeOf")===!1)}function aT(t){return Bl(t)?{...t}:Array.isArray(t)?[...t]:t}const rB=new Set(["string","number","symbol"]);function mh(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function ei(t,e,n){const r=new t._zod.constr(e??t._zod.def);return(!e||n?.parent)&&(r._zod.parent=t),r}function De(t){const e=t;if(!e)return{};if(typeof e=="string")return{error:()=>e};if(e?.message!==void 0){if(e?.error!==void 0)throw new Error("Cannot specify both `message` and `error` params");e.error=e.message}return delete e.message,typeof e.error=="string"?{...e,error:()=>e.error}:e}function sB(t){return Object.keys(t).filter(e=>t[e]._zod.optin==="optional"&&t[e]._zod.optout==="optional")}function iB(t,e){const n=t._zod.def,r=n.checks;if(r&&r.length>0)throw new Error(".pick() cannot be used on object schemas containing refinements");const a=Ws(t._zod.def,{get shape(){const l={};for(const u in e){if(!(u in n.shape))throw new Error(`Unrecognized key: "${u}"`);e[u]&&(l[u]=n.shape[u])}return ji(this,"shape",l),l},checks:[]});return ei(t,a)}function aB(t,e){const n=t._zod.def,r=n.checks;if(r&&r.length>0)throw new Error(".omit() cannot be used on object schemas containing refinements");const a=Ws(t._zod.def,{get shape(){const l={...t._zod.def.shape};for(const u in e){if(!(u in n.shape))throw new Error(`Unrecognized key: "${u}"`);e[u]&&delete l[u]}return ji(this,"shape",l),l},checks:[]});return ei(t,a)}function oB(t,e){if(!Bl(e))throw new Error("Invalid input to extend: expected a plain object");const n=t._zod.def.checks;if(n&&n.length>0){const a=t._zod.def.shape;for(const l in e)if(Object.getOwnPropertyDescriptor(a,l)!==void 0)throw new Error("Cannot overwrite keys on object schemas containing refinements. Use `.safeExtend()` instead.")}const s=Ws(t._zod.def,{get shape(){const a={...t._zod.def.shape,...e};return ji(this,"shape",a),a}});return ei(t,s)}function lB(t,e){if(!Bl(e))throw new Error("Invalid input to safeExtend: expected a plain object");const n=Ws(t._zod.def,{get shape(){const r={...t._zod.def.shape,...e};return ji(this,"shape",r),r}});return ei(t,n)}function cB(t,e){const n=Ws(t._zod.def,{get shape(){const r={...t._zod.def.shape,...e._zod.def.shape};return ji(this,"shape",r),r},get catchall(){return e._zod.def.catchall},checks:[]});return ei(t,n)}function uB(t,e,n){const s=e._zod.def.checks;if(s&&s.length>0)throw new Error(".partial() cannot be used on object schemas containing refinements");const l=Ws(e._zod.def,{get shape(){const u=e._zod.def.shape,f={...u};if(n)for(const h in n){if(!(h in u))throw new Error(`Unrecognized key: "${h}"`);n[h]&&(f[h]=t?new t({type:"optional",innerType:u[h]}):u[h])}else for(const h in u)f[h]=t?new t({type:"optional",innerType:u[h]}):u[h];return ji(this,"shape",f),f},checks:[]});return ei(e,l)}function fB(t,e,n){const r=Ws(e._zod.def,{get shape(){const s=e._zod.def.shape,a={...s};if(n)for(const l in n){if(!(l in a))throw new Error(`Unrecognized key: "${l}"`);n[l]&&(a[l]=new t({type:"nonoptional",innerType:s[l]}))}else for(const l in s)a[l]=new t({type:"nonoptional",innerType:s[l]});return ji(this,"shape",a),a}});return ei(e,r)}function za(t,e=0){if(t.aborted===!0)return!0;for(let n=e;n<t.issues.length;n++)if(t.issues[n]?.continue!==!0)return!0;return!1}function oT(t,e){return e.map(n=>{var r;return(r=n).path??(r.path=[]),n.path.unshift(t),n})}function Mu(t){return typeof t=="string"?t:t?.message}function Mi(t,e,n){const r={...t,path:t.path??[]};if(!t.message){const s=Mu(t.inst?._zod.def?.error?.(t))??Mu(e?.error?.(t))??Mu(n.customError?.(t))??Mu(n.localeError?.(t))??"Invalid input";r.message=s}return delete r.inst,delete r.continue,e?.reportInput||delete r.input,r}function n0(t){return Array.isArray(t)?"array":typeof t=="string"?"string":"unknown"}function Ul(...t){const[e,n,r]=t;return typeof e=="string"?{message:e,code:"custom",input:n,inst:r}:{...e}}const lT=(t,e)=>{t.name="$ZodError",Object.defineProperty(t,"_zod",{value:t._zod,enumerable:!1}),Object.defineProperty(t,"issues",{value:e,enumerable:!1}),t.message=JSON.stringify(e,jg,2),Object.defineProperty(t,"toString",{value:()=>t.message,enumerable:!1})},cT=fe("$ZodError",lT),uT=fe("$ZodError",lT,{Parent:Error});function hB(t,e=n=>n.message){const n={},r=[];for(const s of t.issues)s.path.length>0?(n[s.path[0]]=n[s.path[0]]||[],n[s.path[0]].push(e(s))):r.push(e(s));return{formErrors:r,fieldErrors:n}}function dB(t,e=n=>n.message){const n={_errors:[]},r=s=>{for(const a of s.issues)if(a.code==="invalid_union"&&a.errors.length)a.errors.map(l=>r({issues:l}));else if(a.code==="invalid_key")r({issues:a.issues});else if(a.code==="invalid_element")r({issues:a.issues});else if(a.path.length===0)n._errors.push(e(a));else{let l=n,u=0;for(;u<a.path.length;){const f=a.path[u];u===a.path.length-1?(l[f]=l[f]||{_errors:[]},l[f]._errors.push(e(a))):l[f]=l[f]||{_errors:[]},l=l[f],u++}}};return r(t),n}const r0=t=>(e,n,r,s)=>{const a=r?Object.assign(r,{async:!1}):{async:!1},l=e._zod.run({value:n,issues:[]},a);if(l instanceof Promise)throw new $a;if(l.issues.length){const u=new(s?.Err??t)(l.issues.map(f=>Mi(f,a,Ni())));throw iT(u,s?.callee),u}return l.value},s0=t=>async(e,n,r,s)=>{const a=r?Object.assign(r,{async:!0}):{async:!0};let l=e._zod.run({value:n,issues:[]},a);if(l instanceof Promise&&(l=await l),l.issues.length){const u=new(s?.Err??t)(l.issues.map(f=>Mi(f,a,Ni())));throw iT(u,s?.callee),u}return l.value},gh=t=>(e,n,r)=>{const s=r?{...r,async:!1}:{async:!1},a=e._zod.run({value:n,issues:[]},s);if(a instanceof Promise)throw new $a;return a.issues.length?{success:!1,error:new(t??cT)(a.issues.map(l=>Mi(l,s,Ni())))}:{success:!0,data:a.value}},pB=gh(uT),yh=t=>async(e,n,r)=>{const s=r?Object.assign(r,{async:!0}):{async:!0};let a=e._zod.run({value:n,issues:[]},s);return a instanceof Promise&&(a=await a),a.issues.length?{success:!1,error:new t(a.issues.map(l=>Mi(l,s,Ni())))}:{success:!0,data:a.value}},mB=yh(uT),gB=t=>(e,n,r)=>{const s=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return r0(t)(e,n,s)},yB=t=>(e,n,r)=>r0(t)(e,n,r),_B=t=>async(e,n,r)=>{const s=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return s0(t)(e,n,s)},bB=t=>async(e,n,r)=>s0(t)(e,n,r),vB=t=>(e,n,r)=>{const s=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return gh(t)(e,n,s)},xB=t=>(e,n,r)=>gh(t)(e,n,r),wB=t=>async(e,n,r)=>{const s=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return yh(t)(e,n,s)},SB=t=>async(e,n,r)=>yh(t)(e,n,r),kB=/^[cC][^\s-]{8,}$/,EB=/^[0-9a-z]+$/,CB=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,TB=/^[0-9a-vA-V]{20}$/,AB=/^[A-Za-z0-9]{27}$/,RB=/^[a-zA-Z0-9_-]{21}$/,OB=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,IB=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,j1=t=>t?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${t}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,NB=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,MB="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function DB(){return new RegExp(MB,"u")}const LB=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,zB=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,jB=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,PB=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,BB=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,fT=/^[A-Za-z0-9_-]*$/,UB=/^\+[1-9]\d{6,14}$/,hT="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",$B=new RegExp(`^${hT}$`);function dT(t){const e="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof t.precision=="number"?t.precision===-1?`${e}`:t.precision===0?`${e}:[0-5]\\d`:`${e}:[0-5]\\d\\.\\d{${t.precision}}`:`${e}(?::[0-5]\\d(?:\\.\\d+)?)?`}function qB(t){return new RegExp(`^${dT(t)}$`)}function FB(t){const e=dT({precision:t.precision}),n=["Z"];t.local&&n.push(""),t.offset&&n.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const r=`${e}(?:${n.join("|")})`;return new RegExp(`^${hT}T(?:${r})$`)}const VB=t=>{const e=t?`[\\s\\S]{${t?.minimum??0},${t?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${e}$`)},HB=/^[^A-Z]*$/,GB=/^[^a-z]*$/,Hr=fe("$ZodCheck",(t,e)=>{var n;t._zod??(t._zod={}),t._zod.def=e,(n=t._zod).onattach??(n.onattach=[])}),KB=fe("$ZodCheckMaxLength",(t,e)=>{var n;Hr.init(t,e),(n=t._zod.def).when??(n.when=r=>{const s=r.value;return!e0(s)&&s.length!==void 0}),t._zod.onattach.push(r=>{const s=r._zod.bag.maximum??Number.POSITIVE_INFINITY;e.maximum<s&&(r._zod.bag.maximum=e.maximum)}),t._zod.check=r=>{const s=r.value;if(s.length<=e.maximum)return;const l=n0(s);r.issues.push({origin:l,code:"too_big",maximum:e.maximum,inclusive:!0,input:s,inst:t,continue:!e.abort})}}),ZB=fe("$ZodCheckMinLength",(t,e)=>{var n;Hr.init(t,e),(n=t._zod.def).when??(n.when=r=>{const s=r.value;return!e0(s)&&s.length!==void 0}),t._zod.onattach.push(r=>{const s=r._zod.bag.minimum??Number.NEGATIVE_INFINITY;e.minimum>s&&(r._zod.bag.minimum=e.minimum)}),t._zod.check=r=>{const s=r.value;if(s.length>=e.minimum)return;const l=n0(s);r.issues.push({origin:l,code:"too_small",minimum:e.minimum,inclusive:!0,input:s,inst:t,continue:!e.abort})}}),QB=fe("$ZodCheckLengthEquals",(t,e)=>{var n;Hr.init(t,e),(n=t._zod.def).when??(n.when=r=>{const s=r.value;return!e0(s)&&s.length!==void 0}),t._zod.onattach.push(r=>{const s=r._zod.bag;s.minimum=e.length,s.maximum=e.length,s.length=e.length}),t._zod.check=r=>{const s=r.value,a=s.length;if(a===e.length)return;const l=n0(s),u=a>e.length;r.issues.push({origin:l,...u?{code:"too_big",maximum:e.length}:{code:"too_small",minimum:e.length},inclusive:!0,exact:!0,input:r.value,inst:t,continue:!e.abort})}}),_h=fe("$ZodCheckStringFormat",(t,e)=>{var n,r;Hr.init(t,e),t._zod.onattach.push(s=>{const a=s._zod.bag;a.format=e.format,e.pattern&&(a.patterns??(a.patterns=new Set),a.patterns.add(e.pattern))}),e.pattern?(n=t._zod).check??(n.check=s=>{e.pattern.lastIndex=0,!e.pattern.test(s.value)&&s.issues.push({origin:"string",code:"invalid_format",format:e.format,input:s.value,...e.pattern?{pattern:e.pattern.toString()}:{},inst:t,continue:!e.abort})}):(r=t._zod).check??(r.check=()=>{})}),JB=fe("$ZodCheckRegex",(t,e)=>{_h.init(t,e),t._zod.check=n=>{e.pattern.lastIndex=0,!e.pattern.test(n.value)&&n.issues.push({origin:"string",code:"invalid_format",format:"regex",input:n.value,pattern:e.pattern.toString(),inst:t,continue:!e.abort})}}),YB=fe("$ZodCheckLowerCase",(t,e)=>{e.pattern??(e.pattern=HB),_h.init(t,e)}),XB=fe("$ZodCheckUpperCase",(t,e)=>{e.pattern??(e.pattern=GB),_h.init(t,e)}),WB=fe("$ZodCheckIncludes",(t,e)=>{Hr.init(t,e);const n=mh(e.includes),r=new RegExp(typeof e.position=="number"?`^.{${e.position}}${n}`:n);e.pattern=r,t._zod.onattach.push(s=>{const a=s._zod.bag;a.patterns??(a.patterns=new Set),a.patterns.add(r)}),t._zod.check=s=>{s.value.includes(e.includes,e.position)||s.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:e.includes,input:s.value,inst:t,continue:!e.abort})}}),e8=fe("$ZodCheckStartsWith",(t,e)=>{Hr.init(t,e);const n=new RegExp(`^${mh(e.prefix)}.*`);e.pattern??(e.pattern=n),t._zod.onattach.push(r=>{const s=r._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(n)}),t._zod.check=r=>{r.value.startsWith(e.prefix)||r.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:e.prefix,input:r.value,inst:t,continue:!e.abort})}}),t8=fe("$ZodCheckEndsWith",(t,e)=>{Hr.init(t,e);const n=new RegExp(`.*${mh(e.suffix)}$`);e.pattern??(e.pattern=n),t._zod.onattach.push(r=>{const s=r._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(n)}),t._zod.check=r=>{r.value.endsWith(e.suffix)||r.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:e.suffix,input:r.value,inst:t,continue:!e.abort})}}),n8=fe("$ZodCheckOverwrite",(t,e)=>{Hr.init(t,e),t._zod.check=n=>{n.value=e.tx(n.value)}});class r8{constructor(e=[]){this.content=[],this.indent=0,this&&(this.args=e)}indented(e){this.indent+=1,e(this),this.indent-=1}write(e){if(typeof e=="function"){e(this,{execution:"sync"}),e(this,{execution:"async"});return}const r=e.split(`
`).filter(l=>l),s=Math.min(...r.map(l=>l.length-l.trimStart().length)),a=r.map(l=>l.slice(s)).map(l=>" ".repeat(this.indent*2)+l);for(const l of a)this.content.push(l)}compile(){const e=Function,n=this?.args,s=[...(this?.content??[""]).map(a=>`  ${a}`)];return new e(...n,s.join(`
`))}}const s8={major:4,minor:3,patch:4},Gt=fe("$ZodType",(t,e)=>{var n;t??(t={}),t._zod.def=e,t._zod.bag=t._zod.bag||{},t._zod.version=s8;const r=[...t._zod.def.checks??[]];t._zod.traits.has("$ZodCheck")&&r.unshift(t);for(const s of r)for(const a of s._zod.onattach)a(t);if(r.length===0)(n=t._zod).deferred??(n.deferred=[]),t._zod.deferred?.push(()=>{t._zod.run=t._zod.parse});else{const s=(l,u,f)=>{let h=za(l),m;for(const p of u){if(p._zod.def.when){if(!p._zod.def.when(l))continue}else if(h)continue;const _=l.issues.length,g=p._zod.check(l);if(g instanceof Promise&&f?.async===!1)throw new $a;if(m||g instanceof Promise)m=(m??Promise.resolve()).then(async()=>{await g,l.issues.length!==_&&(h||(h=za(l,_)))});else{if(l.issues.length===_)continue;h||(h=za(l,_))}}return m?m.then(()=>l):l},a=(l,u,f)=>{if(za(l))return l.aborted=!0,l;const h=s(u,r,f);if(h instanceof Promise){if(f.async===!1)throw new $a;return h.then(m=>t._zod.parse(m,f))}return t._zod.parse(h,f)};t._zod.run=(l,u)=>{if(u.skipChecks)return t._zod.parse(l,u);if(u.direction==="backward"){const h=t._zod.parse({value:l.value,issues:[]},{...u,skipChecks:!0});return h instanceof Promise?h.then(m=>a(m,l,u)):a(h,l,u)}const f=t._zod.parse(l,u);if(f instanceof Promise){if(u.async===!1)throw new $a;return f.then(h=>s(h,r,u))}return s(f,r,u)}}ct(t,"~standard",()=>({validate:s=>{try{const a=pB(t,s);return a.success?{value:a.data}:{issues:a.error?.issues}}catch{return mB(t,s).then(l=>l.success?{value:l.data}:{issues:l.error?.issues})}},vendor:"zod",version:1}))}),i0=fe("$ZodString",(t,e)=>{Gt.init(t,e),t._zod.pattern=[...t?._zod.bag?.patterns??[]].pop()??VB(t._zod.bag),t._zod.parse=(n,r)=>{if(e.coerce)try{n.value=String(n.value)}catch{}return typeof n.value=="string"||n.issues.push({expected:"string",code:"invalid_type",input:n.value,inst:t}),n}}),vt=fe("$ZodStringFormat",(t,e)=>{_h.init(t,e),i0.init(t,e)}),i8=fe("$ZodGUID",(t,e)=>{e.pattern??(e.pattern=IB),vt.init(t,e)}),a8=fe("$ZodUUID",(t,e)=>{if(e.version){const r={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[e.version];if(r===void 0)throw new Error(`Invalid UUID version: "${e.version}"`);e.pattern??(e.pattern=j1(r))}else e.pattern??(e.pattern=j1());vt.init(t,e)}),o8=fe("$ZodEmail",(t,e)=>{e.pattern??(e.pattern=NB),vt.init(t,e)}),l8=fe("$ZodURL",(t,e)=>{vt.init(t,e),t._zod.check=n=>{try{const r=n.value.trim(),s=new URL(r);e.hostname&&(e.hostname.lastIndex=0,e.hostname.test(s.hostname)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:e.hostname.source,input:n.value,inst:t,continue:!e.abort})),e.protocol&&(e.protocol.lastIndex=0,e.protocol.test(s.protocol.endsWith(":")?s.protocol.slice(0,-1):s.protocol)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:e.protocol.source,input:n.value,inst:t,continue:!e.abort})),e.normalize?n.value=s.href:n.value=r;return}catch{n.issues.push({code:"invalid_format",format:"url",input:n.value,inst:t,continue:!e.abort})}}}),c8=fe("$ZodEmoji",(t,e)=>{e.pattern??(e.pattern=DB()),vt.init(t,e)}),u8=fe("$ZodNanoID",(t,e)=>{e.pattern??(e.pattern=RB),vt.init(t,e)}),f8=fe("$ZodCUID",(t,e)=>{e.pattern??(e.pattern=kB),vt.init(t,e)}),h8=fe("$ZodCUID2",(t,e)=>{e.pattern??(e.pattern=EB),vt.init(t,e)}),d8=fe("$ZodULID",(t,e)=>{e.pattern??(e.pattern=CB),vt.init(t,e)}),p8=fe("$ZodXID",(t,e)=>{e.pattern??(e.pattern=TB),vt.init(t,e)}),m8=fe("$ZodKSUID",(t,e)=>{e.pattern??(e.pattern=AB),vt.init(t,e)}),g8=fe("$ZodISODateTime",(t,e)=>{e.pattern??(e.pattern=FB(e)),vt.init(t,e)}),y8=fe("$ZodISODate",(t,e)=>{e.pattern??(e.pattern=$B),vt.init(t,e)}),_8=fe("$ZodISOTime",(t,e)=>{e.pattern??(e.pattern=qB(e)),vt.init(t,e)}),b8=fe("$ZodISODuration",(t,e)=>{e.pattern??(e.pattern=OB),vt.init(t,e)}),v8=fe("$ZodIPv4",(t,e)=>{e.pattern??(e.pattern=LB),vt.init(t,e),t._zod.bag.format="ipv4"}),x8=fe("$ZodIPv6",(t,e)=>{e.pattern??(e.pattern=zB),vt.init(t,e),t._zod.bag.format="ipv6",t._zod.check=n=>{try{new URL(`http://[${n.value}]`)}catch{n.issues.push({code:"invalid_format",format:"ipv6",input:n.value,inst:t,continue:!e.abort})}}}),w8=fe("$ZodCIDRv4",(t,e)=>{e.pattern??(e.pattern=jB),vt.init(t,e)}),S8=fe("$ZodCIDRv6",(t,e)=>{e.pattern??(e.pattern=PB),vt.init(t,e),t._zod.check=n=>{const r=n.value.split("/");try{if(r.length!==2)throw new Error;const[s,a]=r;if(!a)throw new Error;const l=Number(a);if(`${l}`!==a)throw new Error;if(l<0||l>128)throw new Error;new URL(`http://[${s}]`)}catch{n.issues.push({code:"invalid_format",format:"cidrv6",input:n.value,inst:t,continue:!e.abort})}}});function pT(t){if(t==="")return!0;if(t.length%4!==0)return!1;try{return atob(t),!0}catch{return!1}}const k8=fe("$ZodBase64",(t,e)=>{e.pattern??(e.pattern=BB),vt.init(t,e),t._zod.bag.contentEncoding="base64",t._zod.check=n=>{pT(n.value)||n.issues.push({code:"invalid_format",format:"base64",input:n.value,inst:t,continue:!e.abort})}});function E8(t){if(!fT.test(t))return!1;const e=t.replace(/[-_]/g,r=>r==="-"?"+":"/"),n=e.padEnd(Math.ceil(e.length/4)*4,"=");return pT(n)}const C8=fe("$ZodBase64URL",(t,e)=>{e.pattern??(e.pattern=fT),vt.init(t,e),t._zod.bag.contentEncoding="base64url",t._zod.check=n=>{E8(n.value)||n.issues.push({code:"invalid_format",format:"base64url",input:n.value,inst:t,continue:!e.abort})}}),T8=fe("$ZodE164",(t,e)=>{e.pattern??(e.pattern=UB),vt.init(t,e)});function A8(t,e=null){try{const n=t.split(".");if(n.length!==3)return!1;const[r]=n;if(!r)return!1;const s=JSON.parse(atob(r));return!("typ"in s&&s?.typ!=="JWT"||!s.alg||e&&(!("alg"in s)||s.alg!==e))}catch{return!1}}const R8=fe("$ZodJWT",(t,e)=>{vt.init(t,e),t._zod.check=n=>{A8(n.value,e.alg)||n.issues.push({code:"invalid_format",format:"jwt",input:n.value,inst:t,continue:!e.abort})}}),O8=fe("$ZodUnknown",(t,e)=>{Gt.init(t,e),t._zod.parse=n=>n}),I8=fe("$ZodNever",(t,e)=>{Gt.init(t,e),t._zod.parse=(n,r)=>(n.issues.push({expected:"never",code:"invalid_type",input:n.value,inst:t}),n)});function P1(t,e,n){t.issues.length&&e.issues.push(...oT(n,t.issues)),e.value[n]=t.value}const N8=fe("$ZodArray",(t,e)=>{Gt.init(t,e),t._zod.parse=(n,r)=>{const s=n.value;if(!Array.isArray(s))return n.issues.push({expected:"array",code:"invalid_type",input:s,inst:t}),n;n.value=Array(s.length);const a=[];for(let l=0;l<s.length;l++){const u=s[l],f=e.element._zod.run({value:u,issues:[]},r);f instanceof Promise?a.push(f.then(h=>P1(h,n,l))):P1(f,n,l)}return a.length?Promise.all(a).then(()=>n):n}});function Uf(t,e,n,r,s){if(t.issues.length){if(s&&!(n in r))return;e.issues.push(...oT(n,t.issues))}t.value===void 0?n in r&&(e.value[n]=void 0):e.value[n]=t.value}function mT(t){const e=Object.keys(t.shape);for(const r of e)if(!t.shape?.[r]?._zod?.traits?.has("$ZodType"))throw new Error(`Invalid element at key "${r}": expected a Zod schema`);const n=sB(t.shape);return{...t,keys:e,keySet:new Set(e),numKeys:e.length,optionalKeys:new Set(n)}}function gT(t,e,n,r,s,a){const l=[],u=s.keySet,f=s.catchall._zod,h=f.def.type,m=f.optout==="optional";for(const p in e){if(u.has(p))continue;if(h==="never"){l.push(p);continue}const _=f.run({value:e[p],issues:[]},r);_ instanceof Promise?t.push(_.then(g=>Uf(g,n,p,e,m))):Uf(_,n,p,e,m)}return l.length&&n.issues.push({code:"unrecognized_keys",keys:l,input:e,inst:a}),t.length?Promise.all(t).then(()=>n):n}const M8=fe("$ZodObject",(t,e)=>{if(Gt.init(t,e),!Object.getOwnPropertyDescriptor(e,"shape")?.get){const u=e.shape;Object.defineProperty(e,"shape",{get:()=>{const f={...u};return Object.defineProperty(e,"shape",{value:f}),f}})}const r=Wy(()=>mT(e));ct(t._zod,"propValues",()=>{const u=e.shape,f={};for(const h in u){const m=u[h]._zod;if(m.values){f[h]??(f[h]=new Set);for(const p of m.values)f[h].add(p)}}return f});const s=Bf,a=e.catchall;let l;t._zod.parse=(u,f)=>{l??(l=r.value);const h=u.value;if(!s(h))return u.issues.push({expected:"object",code:"invalid_type",input:h,inst:t}),u;u.value={};const m=[],p=l.shape;for(const _ of l.keys){const g=p[_],v=g._zod.optout==="optional",x=g._zod.run({value:h[_],issues:[]},f);x instanceof Promise?m.push(x.then(k=>Uf(k,u,_,h,v))):Uf(x,u,_,h,v)}return a?gT(m,h,u,f,r.value,t):m.length?Promise.all(m).then(()=>u):u}}),D8=fe("$ZodObjectJIT",(t,e)=>{M8.init(t,e);const n=t._zod.parse,r=Wy(()=>mT(e)),s=_=>{const g=new r8(["shape","payload","ctx"]),v=r.value,x=C=>{const L=z1(C);return`shape[${L}]._zod.run({ value: input[${L}], issues: [] }, ctx)`};g.write("const input = payload.value;");const k=Object.create(null);let S=0;for(const C of v.keys)k[C]=`key_${S++}`;g.write("const newResult = {};");for(const C of v.keys){const L=k[C],D=z1(C),P=_[C]?._zod?.optout==="optional";g.write(`const ${L} = ${x(C)};`),P?g.write(`
        if (${L}.issues.length) {
          if (${D} in input) {
            payload.issues = payload.issues.concat(${L}.issues.map(iss => ({
              ...iss,
              path: iss.path ? [${D}, ...iss.path] : [${D}]
            })));
          }
        }
        
        if (${L}.value === undefined) {
          if (${D} in input) {
            newResult[${D}] = undefined;
          }
        } else {
          newResult[${D}] = ${L}.value;
        }
        
      `):g.write(`
        if (${L}.issues.length) {
          payload.issues = payload.issues.concat(${L}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${D}, ...iss.path] : [${D}]
          })));
        }
        
        if (${L}.value === undefined) {
          if (${D} in input) {
            newResult[${D}] = undefined;
          }
        } else {
          newResult[${D}] = ${L}.value;
        }
        
      `)}g.write("payload.value = newResult;"),g.write("return payload;");const T=g.compile();return(C,L)=>T(_,C,L)};let a;const l=Bf,u=!rT.jitless,h=u&&nB.value,m=e.catchall;let p;t._zod.parse=(_,g)=>{p??(p=r.value);const v=_.value;return l(v)?u&&h&&g?.async===!1&&g.jitless!==!0?(a||(a=s(e.shape)),_=a(_,g),m?gT([],v,_,g,p,t):_):n(_,g):(_.issues.push({expected:"object",code:"invalid_type",input:v,inst:t}),_)}});function B1(t,e,n,r){for(const a of t)if(a.issues.length===0)return e.value=a.value,e;const s=t.filter(a=>!za(a));return s.length===1?(e.value=s[0].value,s[0]):(e.issues.push({code:"invalid_union",input:e.value,inst:n,errors:t.map(a=>a.issues.map(l=>Mi(l,r,Ni())))}),e)}const L8=fe("$ZodUnion",(t,e)=>{Gt.init(t,e),ct(t._zod,"optin",()=>e.options.some(s=>s._zod.optin==="optional")?"optional":void 0),ct(t._zod,"optout",()=>e.options.some(s=>s._zod.optout==="optional")?"optional":void 0),ct(t._zod,"values",()=>{if(e.options.every(s=>s._zod.values))return new Set(e.options.flatMap(s=>Array.from(s._zod.values)))}),ct(t._zod,"pattern",()=>{if(e.options.every(s=>s._zod.pattern)){const s=e.options.map(a=>a._zod.pattern);return new RegExp(`^(${s.map(a=>t0(a.source)).join("|")})$`)}});const n=e.options.length===1,r=e.options[0]._zod.run;t._zod.parse=(s,a)=>{if(n)return r(s,a);let l=!1;const u=[];for(const f of e.options){const h=f._zod.run({value:s.value,issues:[]},a);if(h instanceof Promise)u.push(h),l=!0;else{if(h.issues.length===0)return h;u.push(h)}}return l?Promise.all(u).then(f=>B1(f,s,t,a)):B1(u,s,t,a)}}),z8=fe("$ZodIntersection",(t,e)=>{Gt.init(t,e),t._zod.parse=(n,r)=>{const s=n.value,a=e.left._zod.run({value:s,issues:[]},r),l=e.right._zod.run({value:s,issues:[]},r);return a instanceof Promise||l instanceof Promise?Promise.all([a,l]).then(([f,h])=>U1(n,f,h)):U1(n,a,l)}});function Pg(t,e){if(t===e)return{valid:!0,data:t};if(t instanceof Date&&e instanceof Date&&+t==+e)return{valid:!0,data:t};if(Bl(t)&&Bl(e)){const n=Object.keys(e),r=Object.keys(t).filter(a=>n.indexOf(a)!==-1),s={...t,...e};for(const a of r){const l=Pg(t[a],e[a]);if(!l.valid)return{valid:!1,mergeErrorPath:[a,...l.mergeErrorPath]};s[a]=l.data}return{valid:!0,data:s}}if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return{valid:!1,mergeErrorPath:[]};const n=[];for(let r=0;r<t.length;r++){const s=t[r],a=e[r],l=Pg(s,a);if(!l.valid)return{valid:!1,mergeErrorPath:[r,...l.mergeErrorPath]};n.push(l.data)}return{valid:!0,data:n}}return{valid:!1,mergeErrorPath:[]}}function U1(t,e,n){const r=new Map;let s;for(const u of e.issues)if(u.code==="unrecognized_keys"){s??(s=u);for(const f of u.keys)r.has(f)||r.set(f,{}),r.get(f).l=!0}else t.issues.push(u);for(const u of n.issues)if(u.code==="unrecognized_keys")for(const f of u.keys)r.has(f)||r.set(f,{}),r.get(f).r=!0;else t.issues.push(u);const a=[...r].filter(([,u])=>u.l&&u.r).map(([u])=>u);if(a.length&&s&&t.issues.push({...s,keys:a}),za(t))return t;const l=Pg(e.value,n.value);if(!l.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(l.mergeErrorPath)}`);return t.value=l.data,t}const j8=fe("$ZodEnum",(t,e)=>{Gt.init(t,e);const n=sT(e.entries),r=new Set(n);t._zod.values=r,t._zod.pattern=new RegExp(`^(${n.filter(s=>rB.has(typeof s)).map(s=>typeof s=="string"?mh(s):s.toString()).join("|")})$`),t._zod.parse=(s,a)=>{const l=s.value;return r.has(l)||s.issues.push({code:"invalid_value",values:n,input:l,inst:t}),s}}),P8=fe("$ZodTransform",(t,e)=>{Gt.init(t,e),t._zod.parse=(n,r)=>{if(r.direction==="backward")throw new nT(t.constructor.name);const s=e.transform(n.value,n);if(r.async)return(s instanceof Promise?s:Promise.resolve(s)).then(l=>(n.value=l,n));if(s instanceof Promise)throw new $a;return n.value=s,n}});function $1(t,e){return t.issues.length&&e===void 0?{issues:[],value:void 0}:t}const yT=fe("$ZodOptional",(t,e)=>{Gt.init(t,e),t._zod.optin="optional",t._zod.optout="optional",ct(t._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,void 0]):void 0),ct(t._zod,"pattern",()=>{const n=e.innerType._zod.pattern;return n?new RegExp(`^(${t0(n.source)})?$`):void 0}),t._zod.parse=(n,r)=>{if(e.innerType._zod.optin==="optional"){const s=e.innerType._zod.run(n,r);return s instanceof Promise?s.then(a=>$1(a,n.value)):$1(s,n.value)}return n.value===void 0?n:e.innerType._zod.run(n,r)}}),B8=fe("$ZodExactOptional",(t,e)=>{yT.init(t,e),ct(t._zod,"values",()=>e.innerType._zod.values),ct(t._zod,"pattern",()=>e.innerType._zod.pattern),t._zod.parse=(n,r)=>e.innerType._zod.run(n,r)}),U8=fe("$ZodNullable",(t,e)=>{Gt.init(t,e),ct(t._zod,"optin",()=>e.innerType._zod.optin),ct(t._zod,"optout",()=>e.innerType._zod.optout),ct(t._zod,"pattern",()=>{const n=e.innerType._zod.pattern;return n?new RegExp(`^(${t0(n.source)}|null)$`):void 0}),ct(t._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,null]):void 0),t._zod.parse=(n,r)=>n.value===null?n:e.innerType._zod.run(n,r)}),$8=fe("$ZodDefault",(t,e)=>{Gt.init(t,e),t._zod.optin="optional",ct(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(n,r)=>{if(r.direction==="backward")return e.innerType._zod.run(n,r);if(n.value===void 0)return n.value=e.defaultValue,n;const s=e.innerType._zod.run(n,r);return s instanceof Promise?s.then(a=>q1(a,e)):q1(s,e)}});function q1(t,e){return t.value===void 0&&(t.value=e.defaultValue),t}const q8=fe("$ZodPrefault",(t,e)=>{Gt.init(t,e),t._zod.optin="optional",ct(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(n,r)=>(r.direction==="backward"||n.value===void 0&&(n.value=e.defaultValue),e.innerType._zod.run(n,r))}),F8=fe("$ZodNonOptional",(t,e)=>{Gt.init(t,e),ct(t._zod,"values",()=>{const n=e.innerType._zod.values;return n?new Set([...n].filter(r=>r!==void 0)):void 0}),t._zod.parse=(n,r)=>{const s=e.innerType._zod.run(n,r);return s instanceof Promise?s.then(a=>F1(a,t)):F1(s,t)}});function F1(t,e){return!t.issues.length&&t.value===void 0&&t.issues.push({code:"invalid_type",expected:"nonoptional",input:t.value,inst:e}),t}const V8=fe("$ZodCatch",(t,e)=>{Gt.init(t,e),ct(t._zod,"optin",()=>e.innerType._zod.optin),ct(t._zod,"optout",()=>e.innerType._zod.optout),ct(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(n,r)=>{if(r.direction==="backward")return e.innerType._zod.run(n,r);const s=e.innerType._zod.run(n,r);return s instanceof Promise?s.then(a=>(n.value=a.value,a.issues.length&&(n.value=e.catchValue({...n,error:{issues:a.issues.map(l=>Mi(l,r,Ni()))},input:n.value}),n.issues=[]),n)):(n.value=s.value,s.issues.length&&(n.value=e.catchValue({...n,error:{issues:s.issues.map(a=>Mi(a,r,Ni()))},input:n.value}),n.issues=[]),n)}}),H8=fe("$ZodPipe",(t,e)=>{Gt.init(t,e),ct(t._zod,"values",()=>e.in._zod.values),ct(t._zod,"optin",()=>e.in._zod.optin),ct(t._zod,"optout",()=>e.out._zod.optout),ct(t._zod,"propValues",()=>e.in._zod.propValues),t._zod.parse=(n,r)=>{if(r.direction==="backward"){const a=e.out._zod.run(n,r);return a instanceof Promise?a.then(l=>Du(l,e.in,r)):Du(a,e.in,r)}const s=e.in._zod.run(n,r);return s instanceof Promise?s.then(a=>Du(a,e.out,r)):Du(s,e.out,r)}});function Du(t,e,n){return t.issues.length?(t.aborted=!0,t):e._zod.run({value:t.value,issues:t.issues},n)}const G8=fe("$ZodReadonly",(t,e)=>{Gt.init(t,e),ct(t._zod,"propValues",()=>e.innerType._zod.propValues),ct(t._zod,"values",()=>e.innerType._zod.values),ct(t._zod,"optin",()=>e.innerType?._zod?.optin),ct(t._zod,"optout",()=>e.innerType?._zod?.optout),t._zod.parse=(n,r)=>{if(r.direction==="backward")return e.innerType._zod.run(n,r);const s=e.innerType._zod.run(n,r);return s instanceof Promise?s.then(V1):V1(s)}});function V1(t){return t.value=Object.freeze(t.value),t}const K8=fe("$ZodCustom",(t,e)=>{Hr.init(t,e),Gt.init(t,e),t._zod.parse=(n,r)=>n,t._zod.check=n=>{const r=n.value,s=e.fn(r);if(s instanceof Promise)return s.then(a=>H1(a,n,r,t));H1(s,n,r,t)}});function H1(t,e,n,r){if(!t){const s={code:"custom",input:n,inst:r,path:[...r._zod.def.path??[]],continue:!r._zod.def.abort};r._zod.def.params&&(s.params=r._zod.def.params),e.issues.push(Ul(s))}}var G1;class Z8{constructor(){this._map=new WeakMap,this._idmap=new Map}add(e,...n){const r=n[0];return this._map.set(e,r),r&&typeof r=="object"&&"id"in r&&this._idmap.set(r.id,e),this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(e){const n=this._map.get(e);return n&&typeof n=="object"&&"id"in n&&this._idmap.delete(n.id),this._map.delete(e),this}get(e){const n=e._zod.parent;if(n){const r={...this.get(n)??{}};delete r.id;const s={...r,...this._map.get(e)};return Object.keys(s).length?s:void 0}return this._map.get(e)}has(e){return this._map.has(e)}}function Q8(){return new Z8}(G1=globalThis).__zod_globalRegistry??(G1.__zod_globalRegistry=Q8());const gl=globalThis.__zod_globalRegistry;function J8(t,e){return new t({type:"string",...De(e)})}function Y8(t,e){return new t({type:"string",format:"email",check:"string_format",abort:!1,...De(e)})}function K1(t,e){return new t({type:"string",format:"guid",check:"string_format",abort:!1,...De(e)})}function X8(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,...De(e)})}function W8(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...De(e)})}function eU(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...De(e)})}function tU(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...De(e)})}function nU(t,e){return new t({type:"string",format:"url",check:"string_format",abort:!1,...De(e)})}function rU(t,e){return new t({type:"string",format:"emoji",check:"string_format",abort:!1,...De(e)})}function sU(t,e){return new t({type:"string",format:"nanoid",check:"string_format",abort:!1,...De(e)})}function iU(t,e){return new t({type:"string",format:"cuid",check:"string_format",abort:!1,...De(e)})}function aU(t,e){return new t({type:"string",format:"cuid2",check:"string_format",abort:!1,...De(e)})}function oU(t,e){return new t({type:"string",format:"ulid",check:"string_format",abort:!1,...De(e)})}function lU(t,e){return new t({type:"string",format:"xid",check:"string_format",abort:!1,...De(e)})}function cU(t,e){return new t({type:"string",format:"ksuid",check:"string_format",abort:!1,...De(e)})}function uU(t,e){return new t({type:"string",format:"ipv4",check:"string_format",abort:!1,...De(e)})}function fU(t,e){return new t({type:"string",format:"ipv6",check:"string_format",abort:!1,...De(e)})}function hU(t,e){return new t({type:"string",format:"cidrv4",check:"string_format",abort:!1,...De(e)})}function dU(t,e){return new t({type:"string",format:"cidrv6",check:"string_format",abort:!1,...De(e)})}function pU(t,e){return new t({type:"string",format:"base64",check:"string_format",abort:!1,...De(e)})}function mU(t,e){return new t({type:"string",format:"base64url",check:"string_format",abort:!1,...De(e)})}function gU(t,e){return new t({type:"string",format:"e164",check:"string_format",abort:!1,...De(e)})}function yU(t,e){return new t({type:"string",format:"jwt",check:"string_format",abort:!1,...De(e)})}function _U(t,e){return new t({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...De(e)})}function bU(t,e){return new t({type:"string",format:"date",check:"string_format",...De(e)})}function vU(t,e){return new t({type:"string",format:"time",check:"string_format",precision:null,...De(e)})}function xU(t,e){return new t({type:"string",format:"duration",check:"string_format",...De(e)})}function wU(t){return new t({type:"unknown"})}function SU(t,e){return new t({type:"never",...De(e)})}function _T(t,e){return new KB({check:"max_length",...De(e),maximum:t})}function $f(t,e){return new ZB({check:"min_length",...De(e),minimum:t})}function bT(t,e){return new QB({check:"length_equals",...De(e),length:t})}function kU(t,e){return new JB({check:"string_format",format:"regex",...De(e),pattern:t})}function EU(t){return new YB({check:"string_format",format:"lowercase",...De(t)})}function CU(t){return new XB({check:"string_format",format:"uppercase",...De(t)})}function TU(t,e){return new WB({check:"string_format",format:"includes",...De(e),includes:t})}function AU(t,e){return new e8({check:"string_format",format:"starts_with",...De(e),prefix:t})}function RU(t,e){return new t8({check:"string_format",format:"ends_with",...De(e),suffix:t})}function Wa(t){return new n8({check:"overwrite",tx:t})}function OU(t){return Wa(e=>e.normalize(t))}function IU(){return Wa(t=>t.trim())}function NU(){return Wa(t=>t.toLowerCase())}function MU(){return Wa(t=>t.toUpperCase())}function DU(){return Wa(t=>tB(t))}function LU(t,e,n){return new t({type:"array",element:e,...De(n)})}function zU(t,e,n){return new t({type:"custom",check:"custom",fn:e,...De(n)})}function jU(t){const e=PU(n=>(n.addIssue=r=>{if(typeof r=="string")n.issues.push(Ul(r,n.value,e._zod.def));else{const s=r;s.fatal&&(s.continue=!1),s.code??(s.code="custom"),s.input??(s.input=n.value),s.inst??(s.inst=e),s.continue??(s.continue=!e._zod.def.abort),n.issues.push(Ul(s))}},t(n.value,n)));return e}function PU(t,e){const n=new Hr({check:"custom",...De(e)});return n._zod.check=t,n}function vT(t){let e=t?.target??"draft-2020-12";return e==="draft-4"&&(e="draft-04"),e==="draft-7"&&(e="draft-07"),{processors:t.processors??{},metadataRegistry:t?.metadata??gl,target:e,unrepresentable:t?.unrepresentable??"throw",override:t?.override??(()=>{}),io:t?.io??"output",counter:0,seen:new Map,cycles:t?.cycles??"ref",reused:t?.reused??"inline",external:t?.external??void 0}}function hn(t,e,n={path:[],schemaPath:[]}){var r;const s=t._zod.def,a=e.seen.get(t);if(a)return a.count++,n.schemaPath.includes(t)&&(a.cycle=n.path),a.schema;const l={schema:{},count:1,cycle:void 0,path:n.path};e.seen.set(t,l);const u=t._zod.toJSONSchema?.();if(u)l.schema=u;else{const m={...n,schemaPath:[...n.schemaPath,t],path:n.path};if(t._zod.processJSONSchema)t._zod.processJSONSchema(e,l.schema,m);else{const _=l.schema,g=e.processors[s.type];if(!g)throw new Error(`[toJSONSchema]: Non-representable type encountered: ${s.type}`);g(t,e,_,m)}const p=t._zod.parent;p&&(l.ref||(l.ref=p),hn(p,e,m),e.seen.get(p).isParent=!0)}const f=e.metadataRegistry.get(t);return f&&Object.assign(l.schema,f),e.io==="input"&&Sn(t)&&(delete l.schema.examples,delete l.schema.default),e.io==="input"&&l.schema._prefault&&((r=l.schema).default??(r.default=l.schema._prefault)),delete l.schema._prefault,e.seen.get(t).schema}function xT(t,e){const n=t.seen.get(e);if(!n)throw new Error("Unprocessed schema. This is a bug in Zod.");const r=new Map;for(const l of t.seen.entries()){const u=t.metadataRegistry.get(l[0])?.id;if(u){const f=r.get(u);if(f&&f!==l[0])throw new Error(`Duplicate schema id "${u}" detected during JSON Schema conversion. Two different schemas cannot share the same id when converted together.`);r.set(u,l[0])}}const s=l=>{const u=t.target==="draft-2020-12"?"$defs":"definitions";if(t.external){const p=t.external.registry.get(l[0])?.id,_=t.external.uri??(v=>v);if(p)return{ref:_(p)};const g=l[1].defId??l[1].schema.id??`schema${t.counter++}`;return l[1].defId=g,{defId:g,ref:`${_("__shared")}#/${u}/${g}`}}if(l[1]===n)return{ref:"#"};const h=`#/${u}/`,m=l[1].schema.id??`__schema${t.counter++}`;return{defId:m,ref:h+m}},a=l=>{if(l[1].schema.$ref)return;const u=l[1],{ref:f,defId:h}=s(l);u.def={...u.schema},h&&(u.defId=h);const m=u.schema;for(const p in m)delete m[p];m.$ref=f};if(t.cycles==="throw")for(const l of t.seen.entries()){const u=l[1];if(u.cycle)throw new Error(`Cycle detected: #/${u.cycle?.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(const l of t.seen.entries()){const u=l[1];if(e===l[0]){a(l);continue}if(t.external){const h=t.external.registry.get(l[0])?.id;if(e!==l[0]&&h){a(l);continue}}if(t.metadataRegistry.get(l[0])?.id){a(l);continue}if(u.cycle){a(l);continue}if(u.count>1&&t.reused==="ref"){a(l);continue}}}function wT(t,e){const n=t.seen.get(e);if(!n)throw new Error("Unprocessed schema. This is a bug in Zod.");const r=l=>{const u=t.seen.get(l);if(u.ref===null)return;const f=u.def??u.schema,h={...f},m=u.ref;if(u.ref=null,m){r(m);const _=t.seen.get(m),g=_.schema;if(g.$ref&&(t.target==="draft-07"||t.target==="draft-04"||t.target==="openapi-3.0")?(f.allOf=f.allOf??[],f.allOf.push(g)):Object.assign(f,g),Object.assign(f,h),l._zod.parent===m)for(const x in f)x==="$ref"||x==="allOf"||x in h||delete f[x];if(g.$ref)for(const x in f)x==="$ref"||x==="allOf"||x in _.def&&JSON.stringify(f[x])===JSON.stringify(_.def[x])&&delete f[x]}const p=l._zod.parent;if(p&&p!==m){r(p);const _=t.seen.get(p);if(_?.schema.$ref&&(f.$ref=_.schema.$ref,_.def))for(const g in f)g==="$ref"||g==="allOf"||g in _.def&&JSON.stringify(f[g])===JSON.stringify(_.def[g])&&delete f[g]}t.override({zodSchema:l,jsonSchema:f,path:u.path??[]})};for(const l of[...t.seen.entries()].reverse())r(l[0]);const s={};if(t.target==="draft-2020-12"?s.$schema="https://json-schema.org/draft/2020-12/schema":t.target==="draft-07"?s.$schema="http://json-schema.org/draft-07/schema#":t.target==="draft-04"?s.$schema="http://json-schema.org/draft-04/schema#":t.target,t.external?.uri){const l=t.external.registry.get(e)?.id;if(!l)throw new Error("Schema is missing an `id` property");s.$id=t.external.uri(l)}Object.assign(s,n.def??n.schema);const a=t.external?.defs??{};for(const l of t.seen.entries()){const u=l[1];u.def&&u.defId&&(a[u.defId]=u.def)}t.external||Object.keys(a).length>0&&(t.target==="draft-2020-12"?s.$defs=a:s.definitions=a);try{const l=JSON.parse(JSON.stringify(s));return Object.defineProperty(l,"~standard",{value:{...e["~standard"],jsonSchema:{input:qf(e,"input",t.processors),output:qf(e,"output",t.processors)}},enumerable:!1,writable:!1}),l}catch{throw new Error("Error converting schema to JSON.")}}function Sn(t,e){const n=e??{seen:new Set};if(n.seen.has(t))return!1;n.seen.add(t);const r=t._zod.def;if(r.type==="transform")return!0;if(r.type==="array")return Sn(r.element,n);if(r.type==="set")return Sn(r.valueType,n);if(r.type==="lazy")return Sn(r.getter(),n);if(r.type==="promise"||r.type==="optional"||r.type==="nonoptional"||r.type==="nullable"||r.type==="readonly"||r.type==="default"||r.type==="prefault")return Sn(r.innerType,n);if(r.type==="intersection")return Sn(r.left,n)||Sn(r.right,n);if(r.type==="record"||r.type==="map")return Sn(r.keyType,n)||Sn(r.valueType,n);if(r.type==="pipe")return Sn(r.in,n)||Sn(r.out,n);if(r.type==="object"){for(const s in r.shape)if(Sn(r.shape[s],n))return!0;return!1}if(r.type==="union"){for(const s of r.options)if(Sn(s,n))return!0;return!1}if(r.type==="tuple"){for(const s of r.items)if(Sn(s,n))return!0;return!!(r.rest&&Sn(r.rest,n))}return!1}const BU=(t,e={})=>n=>{const r=vT({...n,processors:e});return hn(t,r),xT(r,t),wT(r,t)},qf=(t,e,n={})=>r=>{const{libraryOptions:s,target:a}=r??{},l=vT({...s??{},target:a,io:e,processors:n});return hn(t,l),xT(l,t),wT(l,t)},UU={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},$U=(t,e,n,r)=>{const s=n;s.type="string";const{minimum:a,maximum:l,format:u,patterns:f,contentEncoding:h}=t._zod.bag;if(typeof a=="number"&&(s.minLength=a),typeof l=="number"&&(s.maxLength=l),u&&(s.format=UU[u]??u,s.format===""&&delete s.format,u==="time"&&delete s.format),h&&(s.contentEncoding=h),f&&f.size>0){const m=[...f];m.length===1?s.pattern=m[0].source:m.length>1&&(s.allOf=[...m.map(p=>({...e.target==="draft-07"||e.target==="draft-04"||e.target==="openapi-3.0"?{type:"string"}:{},pattern:p.source}))])}},qU=(t,e,n,r)=>{n.not={}},FU=(t,e,n,r)=>{},VU=(t,e,n,r)=>{const s=t._zod.def,a=sT(s.entries);a.every(l=>typeof l=="number")&&(n.type="number"),a.every(l=>typeof l=="string")&&(n.type="string"),n.enum=a},HU=(t,e,n,r)=>{if(e.unrepresentable==="throw")throw new Error("Custom types cannot be represented in JSON Schema")},GU=(t,e,n,r)=>{if(e.unrepresentable==="throw")throw new Error("Transforms cannot be represented in JSON Schema")},KU=(t,e,n,r)=>{const s=n,a=t._zod.def,{minimum:l,maximum:u}=t._zod.bag;typeof l=="number"&&(s.minItems=l),typeof u=="number"&&(s.maxItems=u),s.type="array",s.items=hn(a.element,e,{...r,path:[...r.path,"items"]})},ZU=(t,e,n,r)=>{const s=n,a=t._zod.def;s.type="object",s.properties={};const l=a.shape;for(const h in l)s.properties[h]=hn(l[h],e,{...r,path:[...r.path,"properties",h]});const u=new Set(Object.keys(l)),f=new Set([...u].filter(h=>{const m=a.shape[h]._zod;return e.io==="input"?m.optin===void 0:m.optout===void 0}));f.size>0&&(s.required=Array.from(f)),a.catchall?._zod.def.type==="never"?s.additionalProperties=!1:a.catchall?a.catchall&&(s.additionalProperties=hn(a.catchall,e,{...r,path:[...r.path,"additionalProperties"]})):e.io==="output"&&(s.additionalProperties=!1)},QU=(t,e,n,r)=>{const s=t._zod.def,a=s.inclusive===!1,l=s.options.map((u,f)=>hn(u,e,{...r,path:[...r.path,a?"oneOf":"anyOf",f]}));a?n.oneOf=l:n.anyOf=l},JU=(t,e,n,r)=>{const s=t._zod.def,a=hn(s.left,e,{...r,path:[...r.path,"allOf",0]}),l=hn(s.right,e,{...r,path:[...r.path,"allOf",1]}),u=h=>"allOf"in h&&Object.keys(h).length===1,f=[...u(a)?a.allOf:[a],...u(l)?l.allOf:[l]];n.allOf=f},YU=(t,e,n,r)=>{const s=t._zod.def,a=hn(s.innerType,e,r),l=e.seen.get(t);e.target==="openapi-3.0"?(l.ref=s.innerType,n.nullable=!0):n.anyOf=[a,{type:"null"}]},XU=(t,e,n,r)=>{const s=t._zod.def;hn(s.innerType,e,r);const a=e.seen.get(t);a.ref=s.innerType},WU=(t,e,n,r)=>{const s=t._zod.def;hn(s.innerType,e,r);const a=e.seen.get(t);a.ref=s.innerType,n.default=JSON.parse(JSON.stringify(s.defaultValue))},e$=(t,e,n,r)=>{const s=t._zod.def;hn(s.innerType,e,r);const a=e.seen.get(t);a.ref=s.innerType,e.io==="input"&&(n._prefault=JSON.parse(JSON.stringify(s.defaultValue)))},t$=(t,e,n,r)=>{const s=t._zod.def;hn(s.innerType,e,r);const a=e.seen.get(t);a.ref=s.innerType;let l;try{l=s.catchValue(void 0)}catch{throw new Error("Dynamic catch values are not supported in JSON Schema")}n.default=l},n$=(t,e,n,r)=>{const s=t._zod.def,a=e.io==="input"?s.in._zod.def.type==="transform"?s.out:s.in:s.out;hn(a,e,r);const l=e.seen.get(t);l.ref=a},r$=(t,e,n,r)=>{const s=t._zod.def;hn(s.innerType,e,r);const a=e.seen.get(t);a.ref=s.innerType,n.readOnly=!0},ST=(t,e,n,r)=>{const s=t._zod.def;hn(s.innerType,e,r);const a=e.seen.get(t);a.ref=s.innerType},s$=fe("ZodISODateTime",(t,e)=>{g8.init(t,e),wt.init(t,e)});function i$(t){return _U(s$,t)}const a$=fe("ZodISODate",(t,e)=>{y8.init(t,e),wt.init(t,e)});function o$(t){return bU(a$,t)}const l$=fe("ZodISOTime",(t,e)=>{_8.init(t,e),wt.init(t,e)});function c$(t){return vU(l$,t)}const u$=fe("ZodISODuration",(t,e)=>{b8.init(t,e),wt.init(t,e)});function f$(t){return xU(u$,t)}const h$=(t,e)=>{cT.init(t,e),t.name="ZodError",Object.defineProperties(t,{format:{value:n=>dB(t,n)},flatten:{value:n=>hB(t,n)},addIssue:{value:n=>{t.issues.push(n),t.message=JSON.stringify(t.issues,jg,2)}},addIssues:{value:n=>{t.issues.push(...n),t.message=JSON.stringify(t.issues,jg,2)}},isEmpty:{get(){return t.issues.length===0}}})},wr=fe("ZodError",h$,{Parent:Error}),d$=r0(wr),p$=s0(wr),m$=gh(wr),g$=yh(wr),y$=gB(wr),_$=yB(wr),b$=_B(wr),v$=bB(wr),x$=vB(wr),w$=xB(wr),S$=wB(wr),k$=SB(wr),Kt=fe("ZodType",(t,e)=>(Gt.init(t,e),Object.assign(t["~standard"],{jsonSchema:{input:qf(t,"input"),output:qf(t,"output")}}),t.toJSONSchema=BU(t,{}),t.def=e,t.type=e.type,Object.defineProperty(t,"_def",{value:e}),t.check=(...n)=>t.clone(Ws(e,{checks:[...e.checks??[],...n.map(r=>typeof r=="function"?{_zod:{check:r,def:{check:"custom"},onattach:[]}}:r)]}),{parent:!0}),t.with=t.check,t.clone=(n,r)=>ei(t,n,r),t.brand=()=>t,t.register=((n,r)=>(n.add(t,r),t)),t.parse=(n,r)=>d$(t,n,r,{callee:t.parse}),t.safeParse=(n,r)=>m$(t,n,r),t.parseAsync=async(n,r)=>p$(t,n,r,{callee:t.parseAsync}),t.safeParseAsync=async(n,r)=>g$(t,n,r),t.spa=t.safeParseAsync,t.encode=(n,r)=>y$(t,n,r),t.decode=(n,r)=>_$(t,n,r),t.encodeAsync=async(n,r)=>b$(t,n,r),t.decodeAsync=async(n,r)=>v$(t,n,r),t.safeEncode=(n,r)=>x$(t,n,r),t.safeDecode=(n,r)=>w$(t,n,r),t.safeEncodeAsync=async(n,r)=>S$(t,n,r),t.safeDecodeAsync=async(n,r)=>k$(t,n,r),t.refine=(n,r)=>t.check(m9(n,r)),t.superRefine=n=>t.check(g9(n)),t.overwrite=n=>t.check(Wa(n)),t.optional=()=>J1(t),t.exactOptional=()=>n9(t),t.nullable=()=>Y1(t),t.nullish=()=>J1(Y1(t)),t.nonoptional=n=>l9(t,n),t.array=()=>K$(t),t.or=n=>J$([t,n]),t.and=n=>X$(t,n),t.transform=n=>X1(t,e9(n)),t.default=n=>i9(t,n),t.prefault=n=>o9(t,n),t.catch=n=>u9(t,n),t.pipe=n=>X1(t,n),t.readonly=()=>d9(t),t.describe=n=>{const r=t.clone();return gl.add(r,{description:n}),r},Object.defineProperty(t,"description",{get(){return gl.get(t)?.description},configurable:!0}),t.meta=(...n)=>{if(n.length===0)return gl.get(t);const r=t.clone();return gl.add(r,n[0]),r},t.isOptional=()=>t.safeParse(void 0).success,t.isNullable=()=>t.safeParse(null).success,t.apply=n=>n(t),t)),kT=fe("_ZodString",(t,e)=>{i0.init(t,e),Kt.init(t,e),t._zod.processJSONSchema=(r,s,a)=>$U(t,r,s);const n=t._zod.bag;t.format=n.format??null,t.minLength=n.minimum??null,t.maxLength=n.maximum??null,t.regex=(...r)=>t.check(kU(...r)),t.includes=(...r)=>t.check(TU(...r)),t.startsWith=(...r)=>t.check(AU(...r)),t.endsWith=(...r)=>t.check(RU(...r)),t.min=(...r)=>t.check($f(...r)),t.max=(...r)=>t.check(_T(...r)),t.length=(...r)=>t.check(bT(...r)),t.nonempty=(...r)=>t.check($f(1,...r)),t.lowercase=r=>t.check(EU(r)),t.uppercase=r=>t.check(CU(r)),t.trim=()=>t.check(IU()),t.normalize=(...r)=>t.check(OU(...r)),t.toLowerCase=()=>t.check(NU()),t.toUpperCase=()=>t.check(MU()),t.slugify=()=>t.check(DU())}),E$=fe("ZodString",(t,e)=>{i0.init(t,e),kT.init(t,e),t.email=n=>t.check(Y8(C$,n)),t.url=n=>t.check(nU(T$,n)),t.jwt=n=>t.check(yU(q$,n)),t.emoji=n=>t.check(rU(A$,n)),t.guid=n=>t.check(K1(Z1,n)),t.uuid=n=>t.check(X8(Lu,n)),t.uuidv4=n=>t.check(W8(Lu,n)),t.uuidv6=n=>t.check(eU(Lu,n)),t.uuidv7=n=>t.check(tU(Lu,n)),t.nanoid=n=>t.check(sU(R$,n)),t.guid=n=>t.check(K1(Z1,n)),t.cuid=n=>t.check(iU(O$,n)),t.cuid2=n=>t.check(aU(I$,n)),t.ulid=n=>t.check(oU(N$,n)),t.base64=n=>t.check(pU(B$,n)),t.base64url=n=>t.check(mU(U$,n)),t.xid=n=>t.check(lU(M$,n)),t.ksuid=n=>t.check(cU(D$,n)),t.ipv4=n=>t.check(uU(L$,n)),t.ipv6=n=>t.check(fU(z$,n)),t.cidrv4=n=>t.check(hU(j$,n)),t.cidrv6=n=>t.check(dU(P$,n)),t.e164=n=>t.check(gU($$,n)),t.datetime=n=>t.check(i$(n)),t.date=n=>t.check(o$(n)),t.time=n=>t.check(c$(n)),t.duration=n=>t.check(f$(n))});function $r(t){return J8(E$,t)}const wt=fe("ZodStringFormat",(t,e)=>{vt.init(t,e),kT.init(t,e)}),C$=fe("ZodEmail",(t,e)=>{o8.init(t,e),wt.init(t,e)}),Z1=fe("ZodGUID",(t,e)=>{i8.init(t,e),wt.init(t,e)}),Lu=fe("ZodUUID",(t,e)=>{a8.init(t,e),wt.init(t,e)}),T$=fe("ZodURL",(t,e)=>{l8.init(t,e),wt.init(t,e)}),A$=fe("ZodEmoji",(t,e)=>{c8.init(t,e),wt.init(t,e)}),R$=fe("ZodNanoID",(t,e)=>{u8.init(t,e),wt.init(t,e)}),O$=fe("ZodCUID",(t,e)=>{f8.init(t,e),wt.init(t,e)}),I$=fe("ZodCUID2",(t,e)=>{h8.init(t,e),wt.init(t,e)}),N$=fe("ZodULID",(t,e)=>{d8.init(t,e),wt.init(t,e)}),M$=fe("ZodXID",(t,e)=>{p8.init(t,e),wt.init(t,e)}),D$=fe("ZodKSUID",(t,e)=>{m8.init(t,e),wt.init(t,e)}),L$=fe("ZodIPv4",(t,e)=>{v8.init(t,e),wt.init(t,e)}),z$=fe("ZodIPv6",(t,e)=>{x8.init(t,e),wt.init(t,e)}),j$=fe("ZodCIDRv4",(t,e)=>{w8.init(t,e),wt.init(t,e)}),P$=fe("ZodCIDRv6",(t,e)=>{S8.init(t,e),wt.init(t,e)}),B$=fe("ZodBase64",(t,e)=>{k8.init(t,e),wt.init(t,e)}),U$=fe("ZodBase64URL",(t,e)=>{C8.init(t,e),wt.init(t,e)}),$$=fe("ZodE164",(t,e)=>{T8.init(t,e),wt.init(t,e)}),q$=fe("ZodJWT",(t,e)=>{R8.init(t,e),wt.init(t,e)}),F$=fe("ZodUnknown",(t,e)=>{O8.init(t,e),Kt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>FU()});function Q1(){return wU(F$)}const V$=fe("ZodNever",(t,e)=>{I8.init(t,e),Kt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>qU(t,n,r)});function H$(t){return SU(V$,t)}const G$=fe("ZodArray",(t,e)=>{N8.init(t,e),Kt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>KU(t,n,r,s),t.element=e.element,t.min=(n,r)=>t.check($f(n,r)),t.nonempty=n=>t.check($f(1,n)),t.max=(n,r)=>t.check(_T(n,r)),t.length=(n,r)=>t.check(bT(n,r)),t.unwrap=()=>t.element});function K$(t,e){return LU(G$,t,e)}const Z$=fe("ZodObject",(t,e)=>{D8.init(t,e),Kt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>ZU(t,n,r,s),ct(t,"shape",()=>e.shape),t.keyof=()=>a0(Object.keys(t._zod.def.shape)),t.catchall=n=>t.clone({...t._zod.def,catchall:n}),t.passthrough=()=>t.clone({...t._zod.def,catchall:Q1()}),t.loose=()=>t.clone({...t._zod.def,catchall:Q1()}),t.strict=()=>t.clone({...t._zod.def,catchall:H$()}),t.strip=()=>t.clone({...t._zod.def,catchall:void 0}),t.extend=n=>oB(t,n),t.safeExtend=n=>lB(t,n),t.merge=n=>cB(t,n),t.pick=n=>iB(t,n),t.omit=n=>aB(t,n),t.partial=(...n)=>uB(ET,t,n[0]),t.required=(...n)=>fB(CT,t,n[0])});function Gr(t,e){const n={type:"object",shape:t??{},...De(e)};return new Z$(n)}const Q$=fe("ZodUnion",(t,e)=>{L8.init(t,e),Kt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>QU(t,n,r,s),t.options=e.options});function J$(t,e){return new Q$({type:"union",options:t,...De(e)})}const Y$=fe("ZodIntersection",(t,e)=>{z8.init(t,e),Kt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>JU(t,n,r,s)});function X$(t,e){return new Y$({type:"intersection",left:t,right:e})}const Bg=fe("ZodEnum",(t,e)=>{j8.init(t,e),Kt.init(t,e),t._zod.processJSONSchema=(r,s,a)=>VU(t,r,s),t.enum=e.entries,t.options=Object.values(e.entries);const n=new Set(Object.keys(e.entries));t.extract=(r,s)=>{const a={};for(const l of r)if(n.has(l))a[l]=e.entries[l];else throw new Error(`Key ${l} not found in enum`);return new Bg({...e,checks:[],...De(s),entries:a})},t.exclude=(r,s)=>{const a={...e.entries};for(const l of r)if(n.has(l))delete a[l];else throw new Error(`Key ${l} not found in enum`);return new Bg({...e,checks:[],...De(s),entries:a})}});function a0(t,e){const n=Array.isArray(t)?Object.fromEntries(t.map(r=>[r,r])):t;return new Bg({type:"enum",entries:n,...De(e)})}const W$=fe("ZodTransform",(t,e)=>{P8.init(t,e),Kt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>GU(t,n),t._zod.parse=(n,r)=>{if(r.direction==="backward")throw new nT(t.constructor.name);n.addIssue=a=>{if(typeof a=="string")n.issues.push(Ul(a,n.value,e));else{const l=a;l.fatal&&(l.continue=!1),l.code??(l.code="custom"),l.input??(l.input=n.value),l.inst??(l.inst=t),n.issues.push(Ul(l))}};const s=e.transform(n.value,n);return s instanceof Promise?s.then(a=>(n.value=a,n)):(n.value=s,n)}});function e9(t){return new W$({type:"transform",transform:t})}const ET=fe("ZodOptional",(t,e)=>{yT.init(t,e),Kt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>ST(t,n,r,s),t.unwrap=()=>t._zod.def.innerType});function J1(t){return new ET({type:"optional",innerType:t})}const t9=fe("ZodExactOptional",(t,e)=>{B8.init(t,e),Kt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>ST(t,n,r,s),t.unwrap=()=>t._zod.def.innerType});function n9(t){return new t9({type:"optional",innerType:t})}const r9=fe("ZodNullable",(t,e)=>{U8.init(t,e),Kt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>YU(t,n,r,s),t.unwrap=()=>t._zod.def.innerType});function Y1(t){return new r9({type:"nullable",innerType:t})}const s9=fe("ZodDefault",(t,e)=>{$8.init(t,e),Kt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>WU(t,n,r,s),t.unwrap=()=>t._zod.def.innerType,t.removeDefault=t.unwrap});function i9(t,e){return new s9({type:"default",innerType:t,get defaultValue(){return typeof e=="function"?e():aT(e)}})}const a9=fe("ZodPrefault",(t,e)=>{q8.init(t,e),Kt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>e$(t,n,r,s),t.unwrap=()=>t._zod.def.innerType});function o9(t,e){return new a9({type:"prefault",innerType:t,get defaultValue(){return typeof e=="function"?e():aT(e)}})}const CT=fe("ZodNonOptional",(t,e)=>{F8.init(t,e),Kt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>XU(t,n,r,s),t.unwrap=()=>t._zod.def.innerType});function l9(t,e){return new CT({type:"nonoptional",innerType:t,...De(e)})}const c9=fe("ZodCatch",(t,e)=>{V8.init(t,e),Kt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>t$(t,n,r,s),t.unwrap=()=>t._zod.def.innerType,t.removeCatch=t.unwrap});function u9(t,e){return new c9({type:"catch",innerType:t,catchValue:typeof e=="function"?e:()=>e})}const f9=fe("ZodPipe",(t,e)=>{H8.init(t,e),Kt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>n$(t,n,r,s),t.in=e.in,t.out=e.out});function X1(t,e){return new f9({type:"pipe",in:t,out:e})}const h9=fe("ZodReadonly",(t,e)=>{G8.init(t,e),Kt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>r$(t,n,r,s),t.unwrap=()=>t._zod.def.innerType});function d9(t){return new h9({type:"readonly",innerType:t})}const p9=fe("ZodCustom",(t,e)=>{K8.init(t,e),Kt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>HU(t,n)});function m9(t,e={}){return zU(p9,t,e)}function g9(t){return jU(t)}const W1=10*1024;function y9(t){try{const e=JSON.parse(t);return JSON.stringify(e,null,2)}catch{return t}}function _9(t){return t?t.length<=W1?t:t.slice(0,W1)+`
...[TRUNCATED]`:"(empty)"}function b9(t){const e=t.body.type==="json"||t.body.type==="raw"?t.body.content:t.body.type==="form-urlencoded"?t.body.data:t.body.type==="form-data"?t.body.data.map(n=>({key:n.key,type:n.type,value:n.type==="file"?n.file?.name:n.value})):null;return{method:t.method,url:t.url,headers:t.headers.filter(n=>n.enabled!==!1),queryParams:t.query.filter(n=>n.enabled!==!1),body:{type:t.body.type,content:e}}}function v9(t,e){const n=t.httpResponse;return n?{status:n.status,statusCode:n.statusCode,headers:n.headers,body:_9(e),duration:n.duration}:null}const TT=Gr({}),x9=Gr({method:a0(["GET","POST","PUT","PATCH","DELETE","OPTIONS","HEAD"]).describe("The HTTP method")}),w9=Gr({url:$r().describe("The full URL for the request")}),S9=Gr({headers:$r().describe('JSON array of header objects with "key", "value", and optional "enabled" (default true) properties. Example: [{"key": "Content-Type", "value": "application/json"}]')}),k9=Gr({key:$r().describe("The header name"),value:$r().describe("The header value")}),E9=Gr({params:$r().describe('JSON array of parameter objects with "key", "value", and optional "enabled" (default true) properties. Example: [{"key": "page", "value": "1"}]')}),C9=Gr({key:$r().describe("The parameter name"),value:$r().describe("The parameter value")}),T9=Gr({type:a0(["none","json","xml","form-urlencoded","form-data","raw"]).describe("The body type"),content:$r().optional().describe("The body content. For JSON/XML/raw, provide the content string. For form-urlencoded/form-data, provide JSON array like headers/params. Note: form-data only supports text fields (not file uploads) via this tool.")}),A9=Gr({key:$r().describe("The header name to remove (case-insensitive)")}),R9=Gr({key:$r().describe("The query parameter name to remove")}),O9=Or({name:"get_current_request",description:"Get the current HTTP request configuration including method, URL, headers, query params, and body",inputSchema:TT}),I9=Or({name:"get_response",description:"Get the response from the last executed request, including status, headers, and body",inputSchema:TT}),N9=Or({name:"set_method",description:"Set the HTTP method for the request",inputSchema:x9}),M9=Or({name:"set_url",description:"Set the URL for the request",inputSchema:w9}),D9=Or({name:"set_headers",description:"Set the headers for the request. This replaces all existing headers.",inputSchema:S9}),L9=Or({name:"add_header",description:"Add a single header to the request",inputSchema:k9}),z9=Or({name:"set_query_params",description:"Set the query parameters for the request. This replaces all existing query params.",inputSchema:E9}),j9=Or({name:"add_query_param",description:"Add a single query parameter to the request",inputSchema:C9}),P9=Or({name:"set_body",description:"Set the request body",inputSchema:T9}),B9=Or({name:"remove_header",description:"Remove a header from the request by name",inputSchema:A9}),U9=Or({name:"remove_query_param",description:"Remove a query parameter from the request by name",inputSchema:R9});function $9(t){const{request:e,setters:n,responseBodyText:r}=t,s=O9.client(async()=>b9(e)),a=I9.client(async()=>v9(e,r)||{error:"No response available. Execute the request first."}),l=N9.client(async x=>{const k=x;return n.setMethod(k.method),{success:!0,method:k.method}}),u=M9.client(async x=>{const k=x;return n.setUrl(k.url),{success:!0,url:k.url}}),f=D9.client(async x=>{const k=x;try{const S=JSON.parse(k.headers).map(T=>({id:er(),key:T.key,value:T.value,enabled:T.enabled!==!1}));return n.setHeaders(S),{success:!0,headerCount:S.length}}catch(S){return{success:!1,error:`Invalid JSON for headers: ${S instanceof Error?S.message:"parse error"}`}}}),h=L9.client(async x=>{const k=x,S=[...e.headers,{id:er(),key:k.key,value:k.value,enabled:!0}];return n.setHeaders(S),{success:!0,added:{key:k.key,value:k.value}}}),m=z9.client(async x=>{const k=x;try{const S=JSON.parse(k.params).map(T=>({id:er(),key:T.key,value:T.value,enabled:T.enabled!==!1}));return n.setQuery(S),{success:!0,paramCount:S.length}}catch(S){return{success:!1,error:`Invalid JSON for query params: ${S instanceof Error?S.message:"parse error"}`}}}),p=j9.client(async x=>{const k=x,S=[...e.query,{id:er(),key:k.key,value:k.value,enabled:!0}];return n.setQuery(S),{success:!0,added:{key:k.key,value:k.value}}}),_=P9.client(async x=>{const k=x;try{let S;switch(k.type){case"none":S={type:"none"};break;case"json":S={type:"json",content:y9(k.content||"")};break;case"xml":S={type:"xml",content:k.content||""};break;case"raw":S={type:"raw",content:k.content||""};break;case"form-urlencoded":{S={type:"form-urlencoded",data:k.content?JSON.parse(k.content).map(C=>({id:er(),key:C.key,value:C.value,enabled:C.enabled!==!1})):[]};break}case"form-data":{S={type:"form-data",data:k.content?JSON.parse(k.content).map(C=>({id:er(),key:C.key,type:"text",value:C.value||"",enabled:C.enabled!==!1,file:null,fileName:""})):[]};break}default:S={type:"none"}}return n.setBody(S),{success:!0,bodyType:k.type}}catch(S){return{success:!1,error:`Invalid body content: ${S instanceof Error?S.message:"parse error"}`}}}),g=B9.client(async x=>{const k=x,S=k.key.toLowerCase(),T=e.headers.filter(L=>L.key.toLowerCase()!==S),C=e.headers.length-T.length;return C===0?{success:!1,error:`Header '${k.key}' not found`}:(n.setHeaders(T),{success:!0,removed:k.key,removedCount:C})}),v=U9.client(async x=>{const k=x,S=e.query.filter(C=>C.key!==k.key),T=e.query.length-S.length;return T===0?{success:!1,error:`Query parameter '${k.key}' not found`}:(n.setQuery(S),{success:!0,removed:k.key,removedCount:T})});return wP(s,a,l,u,f,h,g,m,p,v,_)}function q9(){return`You are an AI assistant embedded in an HTTP client (similar to Postman or Insomnia). You have tools that directly modify the request form visible to the user in real-time.

IMPORTANT: When you use tools like set_url, set_headers, set_body, etc., the changes appear immediately in the user's request panel. You are actively editing their requestnot just describing what to do. The user sees updates live as you make them.

Your capabilities:
- View the current request configuration (method, URL, headers, query params, body)
- Directly modify any part of the requestchanges are applied instantly to the UI
- View and analyze responses after the user executes the request

Guidelines:
- When the user asks to create or modify a request, use the appropriate tools to make the changes directly
- After making changes, briefly confirm what you did (e.g., "I've set the URL to ... and added the Authorization header")
- You cannot execute/send requeststhe user must click Send. After they do, you can analyze the response using get_response
- When analyzing responses, look for errors, unexpected data, or issues
- Be concise but helpful in your explanations
- If the user's request is ambiguous, ask for clarification
- When adding headers or params, preserve existing ones unless the user asks to replace them
- Format your responses using Markdown: use **bold**, \`code\`, code blocks with language tags, lists, and headers when appropriate`}const eS={name:"Request Assistant",placeholder:"Ask about your request..."};const F9=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,V9=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,H9={};function tS(t,e){return(H9.jsx?V9:F9).test(t)}var Ca={},bm,nS;function G9(){if(nS)return bm;nS=1;var t=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,e=/\n/g,n=/^\s*/,r=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,s=/^:\s*/,a=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,l=/^[;\s]*/,u=/^\s+|\s+$/g,f=`
`,h="/",m="*",p="",_="comment",g="declaration";function v(k,S){if(typeof k!="string")throw new TypeError("First argument must be a string");if(!k)return[];S=S||{};var T=1,C=1;function L(Z){var $=Z.match(e);$&&(T+=$.length);var B=Z.lastIndexOf(f);C=~B?Z.length-B:C+Z.length}function D(){var Z={line:T,column:C};return function($){return $.position=new I(Z),H(),$}}function I(Z){this.start=Z,this.end={line:T,column:C},this.source=S.source}I.prototype.content=k;function P(Z){var $=new Error(S.source+":"+T+":"+C+": "+Z);if($.reason=Z,$.filename=S.source,$.line=T,$.column=C,$.source=k,!S.silent)throw $}function V(Z){var $=Z.exec(k);if($){var B=$[0];return L(B),k=k.slice(B.length),$}}function H(){V(n)}function z(Z){var $;for(Z=Z||[];$=Q();)$!==!1&&Z.push($);return Z}function Q(){var Z=D();if(!(h!=k.charAt(0)||m!=k.charAt(1))){for(var $=2;p!=k.charAt($)&&(m!=k.charAt($)||h!=k.charAt($+1));)++$;if($+=2,p===k.charAt($-1))return P("End of comment missing");var B=k.slice(2,$-2);return C+=2,L(B),k=k.slice($),C+=2,Z({type:_,comment:B})}}function j(){var Z=D(),$=V(r);if($){if(Q(),!V(s))return P("property missing ':'");var B=V(a),G=Z({type:g,property:x($[0].replace(t,p)),value:B?x(B[0].replace(t,p)):p});return V(l),G}}function se(){var Z=[];z(Z);for(var $;$=j();)$!==!1&&(Z.push($),z(Z));return Z}return H(),se()}function x(k){return k?k.replace(u,p):p}return bm=v,bm}var rS;function K9(){if(rS)return Ca;rS=1;var t=Ca&&Ca.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ca,"__esModule",{value:!0}),Ca.default=n;const e=t(G9());function n(r,s){let a=null;if(!r||typeof r!="string")return a;const l=(0,e.default)(r),u=typeof s=="function";return l.forEach(f=>{if(f.type!=="declaration")return;const{property:h,value:m}=f;u?s(h,m,f):m&&(a=a||{},a[h]=m)}),a}return Ca}var Xo={},sS;function Z9(){if(sS)return Xo;sS=1,Object.defineProperty(Xo,"__esModule",{value:!0}),Xo.camelCase=void 0;var t=/^--[a-zA-Z0-9_-]+$/,e=/-([a-z])/g,n=/^[^-]+$/,r=/^-(webkit|moz|ms|o|khtml)-/,s=/^-(ms)-/,a=function(h){return!h||n.test(h)||t.test(h)},l=function(h,m){return m.toUpperCase()},u=function(h,m){return"".concat(m,"-")},f=function(h,m){return m===void 0&&(m={}),a(h)?h:(h=h.toLowerCase(),m.reactCompat?h=h.replace(s,u):h=h.replace(r,u),h.replace(e,l))};return Xo.camelCase=f,Xo}var Wo,iS;function Q9(){if(iS)return Wo;iS=1;var t=Wo&&Wo.__importDefault||function(s){return s&&s.__esModule?s:{default:s}},e=t(K9()),n=Z9();function r(s,a){var l={};return!s||typeof s!="string"||(0,e.default)(s,function(u,f){u&&f&&(l[(0,n.camelCase)(u,a)]=f)}),l}return r.default=r,Wo=r,Wo}var J9=Q9();const Y9=US(J9),AT=RT("end"),o0=RT("start");function RT(t){return e;function e(n){const r=n&&n.position&&n.position[t]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function X9(t){const e=o0(t),n=AT(t);if(e&&n)return{start:e,end:n}}function El(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?aS(t.position):"start"in t||"end"in t?aS(t):"line"in t||"column"in t?Ug(t):""}function Ug(t){return oS(t&&t.line)+":"+oS(t&&t.column)}function aS(t){return Ug(t&&t.start)+"-"+Ug(t&&t.end)}function oS(t){return t&&typeof t=="number"?t:1}class vn extends Error{constructor(e,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let s="",a={},l=!1;if(n&&("line"in n&&"column"in n?a={place:n}:"start"in n&&"end"in n?a={place:n}:"type"in n?a={ancestors:[n],place:n.position}:a={...n}),typeof e=="string"?s=e:!a.cause&&e&&(l=!0,s=e.message,a.cause=e),!a.ruleId&&!a.source&&typeof r=="string"){const f=r.indexOf(":");f===-1?a.ruleId=r:(a.source=r.slice(0,f),a.ruleId=r.slice(f+1))}if(!a.place&&a.ancestors&&a.ancestors){const f=a.ancestors[a.ancestors.length-1];f&&(a.place=f.position)}const u=a.place&&"start"in a.place?a.place.start:a.place;this.ancestors=a.ancestors||void 0,this.cause=a.cause||void 0,this.column=u?u.column:void 0,this.fatal=void 0,this.file="",this.message=s,this.line=u?u.line:void 0,this.name=El(a.place)||"1:1",this.place=a.place||void 0,this.reason=this.message,this.ruleId=a.ruleId||void 0,this.source=a.source||void 0,this.stack=l&&a.cause&&typeof a.cause.stack=="string"?a.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}vn.prototype.file="";vn.prototype.name="";vn.prototype.reason="";vn.prototype.message="";vn.prototype.stack="";vn.prototype.column=void 0;vn.prototype.line=void 0;vn.prototype.ancestors=void 0;vn.prototype.cause=void 0;vn.prototype.fatal=void 0;vn.prototype.place=void 0;vn.prototype.ruleId=void 0;vn.prototype.source=void 0;const l0={}.hasOwnProperty,W9=new Map,eq=/[A-Z]/g,tq=new Set(["table","tbody","thead","tfoot","tr"]),nq=new Set(["td","th"]),OT="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function rq(t,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=e.filePath||void 0;let r;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=fq(n,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=uq(n,e.jsx,e.jsxs)}const s={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:r,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?Jl:eE,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},a=IT(s,t,void 0);return a&&typeof a!="string"?a:s.create(t,s.Fragment,{children:a||void 0},void 0)}function IT(t,e,n){if(e.type==="element")return sq(t,e,n);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return iq(t,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return oq(t,e,n);if(e.type==="mdxjsEsm")return aq(t,e);if(e.type==="root")return lq(t,e,n);if(e.type==="text")return cq(t,e)}function sq(t,e,n){const r=t.schema;let s=r;e.tagName.toLowerCase()==="svg"&&r.space==="html"&&(s=Jl,t.schema=s),t.ancestors.push(e);const a=MT(t,e.tagName,!1),l=hq(t,e);let u=u0(t,e);return tq.has(e.tagName)&&(u=u.filter(function(f){return typeof f=="string"?!Wf(f):!0})),NT(t,l,a,e),c0(l,u),t.ancestors.pop(),t.schema=r,t.create(e,a,l,n)}function iq(t,e){if(e.data&&e.data.estree&&t.evaluater){const r=e.data.estree.body[0];return r.type,t.evaluater.evaluateExpression(r.expression)}$l(t,e.position)}function aq(t,e){if(e.data&&e.data.estree&&t.evaluater)return t.evaluater.evaluateProgram(e.data.estree);$l(t,e.position)}function oq(t,e,n){const r=t.schema;let s=r;e.name==="svg"&&r.space==="html"&&(s=Jl,t.schema=s),t.ancestors.push(e);const a=e.name===null?t.Fragment:MT(t,e.name,!0),l=dq(t,e),u=u0(t,e);return NT(t,l,a,e),c0(l,u),t.ancestors.pop(),t.schema=r,t.create(e,a,l,n)}function lq(t,e,n){const r={};return c0(r,u0(t,e)),t.create(e,t.Fragment,r,n)}function cq(t,e){return e.value}function NT(t,e,n,r){typeof n!="string"&&n!==t.Fragment&&t.passNode&&(e.node=r)}function c0(t,e){if(e.length>0){const n=e.length>1?e:e[0];n&&(t.children=n)}}function uq(t,e,n){return r;function r(s,a,l,u){const h=Array.isArray(l.children)?n:e;return u?h(a,l,u):h(a,l)}}function fq(t,e){return n;function n(r,s,a,l){const u=Array.isArray(a.children),f=o0(r);return e(s,a,l,u,{columnNumber:f?f.column-1:void 0,fileName:t,lineNumber:f?f.line:void 0},void 0)}}function hq(t,e){const n={};let r,s;for(s in e.properties)if(s!=="children"&&l0.call(e.properties,s)){const a=pq(t,s,e.properties[s]);if(a){const[l,u]=a;t.tableCellAlignToStyle&&l==="align"&&typeof u=="string"&&nq.has(e.tagName)?r=u:n[l]=u}}if(r){const a=n.style||(n.style={});a[t.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function dq(t,e){const n={};for(const r of e.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&t.evaluater){const a=r.data.estree.body[0];a.type;const l=a.expression;l.type;const u=l.properties[0];u.type,Object.assign(n,t.evaluater.evaluateExpression(u.argument))}else $l(t,e.position);else{const s=r.name;let a;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&t.evaluater){const u=r.value.data.estree.body[0];u.type,a=t.evaluater.evaluateExpression(u.expression)}else $l(t,e.position);else a=r.value===null?!0:r.value;n[s]=a}return n}function u0(t,e){const n=[];let r=-1;const s=t.passKeys?new Map:W9;for(;++r<e.children.length;){const a=e.children[r];let l;if(t.passKeys){const f=a.type==="element"?a.tagName:a.type==="mdxJsxFlowElement"||a.type==="mdxJsxTextElement"?a.name:void 0;if(f){const h=s.get(f)||0;l=f+"-"+h,s.set(f,h+1)}}const u=IT(t,a,l);u!==void 0&&n.push(u)}return n}function pq(t,e,n){const r=Wk(t.schema,e);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?nE(n):rE(n)),r.property==="style"){let s=typeof n=="object"?n:mq(t,String(n));return t.stylePropertyNameCase==="css"&&(s=gq(s)),["style",s]}return[t.elementAttributeNameCase==="react"&&r.space?sz[r.property]||r.property:r.attribute,n]}}function mq(t,e){try{return Y9(e,{reactCompat:!0})}catch(n){if(t.ignoreInvalidStyle)return{};const r=n,s=new vn("Cannot parse `style` attribute",{ancestors:t.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw s.file=t.filePath||void 0,s.url=OT+"#cannot-parse-style-attribute",s}}function MT(t,e,n){let r;if(!n)r={type:"Literal",value:e};else if(e.includes(".")){const s=e.split(".");let a=-1,l;for(;++a<s.length;){const u=tS(s[a])?{type:"Identifier",name:s[a]}:{type:"Literal",value:s[a]};l=l?{type:"MemberExpression",object:l,property:u,computed:!!(a&&u.type==="Literal"),optional:!1}:u}r=l}else r=tS(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(r.type==="Literal"){const s=r.value;return l0.call(t.components,s)?t.components[s]:s}if(t.evaluater)return t.evaluater.evaluateExpression(r);$l(t)}function $l(t,e){const n=new vn("Cannot handle MDX estrees without `createEvaluater`",{ancestors:t.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=t.filePath||void 0,n.url=OT+"#cannot-handle-mdx-estrees-without-createevaluater",n}function gq(t){const e={};let n;for(n in t)l0.call(t,n)&&(e[yq(n)]=t[n]);return e}function yq(t){let e=t.replace(eq,_q);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function _q(t){return"-"+t.toLowerCase()}const vm={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},bq={};function f0(t,e){const n=bq,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,s=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return DT(t,r,s)}function DT(t,e,n){if(vq(t)){if("value"in t)return t.type==="html"&&!n?"":t.value;if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return lS(t.children,e,n)}return Array.isArray(t)?lS(t,e,n):""}function lS(t,e,n){const r=[];let s=-1;for(;++s<t.length;)r[s]=DT(t[s],e,n);return r.join("")}function vq(t){return!!(t&&typeof t=="object")}const cS=document.createElement("i");function h0(t){const e="&"+t+";";cS.innerHTML=e;const n=cS.textContent;return n.charCodeAt(n.length-1)===59&&t!=="semi"||n===e?!1:n}function tr(t,e,n,r){const s=t.length;let a=0,l;if(e<0?e=-e>s?0:s+e:e=e>s?s:e,n=n>0?n:0,r.length<1e4)l=Array.from(r),l.unshift(e,n),t.splice(...l);else for(n&&t.splice(e,n);a<r.length;)l=r.slice(a,a+1e4),l.unshift(e,0),t.splice(...l),a+=1e4,e+=1e4}function _r(t,e){return t.length>0?(tr(t,t.length,0,e),t):e}const uS={}.hasOwnProperty;function LT(t){const e={};let n=-1;for(;++n<t.length;)xq(e,t[n]);return e}function xq(t,e){let n;for(n in e){const s=(uS.call(t,n)?t[n]:void 0)||(t[n]={}),a=e[n];let l;if(a)for(l in a){uS.call(s,l)||(s[l]=[]);const u=a[l];wq(s[l],Array.isArray(u)?u:u?[u]:[])}}}function wq(t,e){let n=-1;const r=[];for(;++n<e.length;)(e[n].add==="after"?t:r).push(e[n]);tr(t,0,0,r)}function zT(t,e){const n=Number.parseInt(t,e);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function Rr(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Tn=ti(/[A-Za-z]/),bn=ti(/[\dA-Za-z]/),Sq=ti(/[#-'*+\--9=?A-Z^-~]/);function Ff(t){return t!==null&&(t<32||t===127)}const $g=ti(/\d/),kq=ti(/[\dA-Fa-f]/),Eq=ti(/[!-/:-@[-`{-~]/);function Re(t){return t!==null&&t<-2}function mt(t){return t!==null&&(t<0||t===32)}function Ge(t){return t===-2||t===-1||t===32}const bh=ti(new RegExp("\\p{P}|\\p{S}","u")),Di=ti(/\s/);function ti(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function eo(t){const e=[];let n=-1,r=0,s=0;for(;++n<t.length;){const a=t.charCodeAt(n);let l="";if(a===37&&bn(t.charCodeAt(n+1))&&bn(t.charCodeAt(n+2)))s=2;else if(a<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(a))||(l=String.fromCharCode(a));else if(a>55295&&a<57344){const u=t.charCodeAt(n+1);a<56320&&u>56319&&u<57344?(l=String.fromCharCode(a,u),s=1):l=""}else l=String.fromCharCode(a);l&&(e.push(t.slice(r,n),encodeURIComponent(l)),r=n+s+1,l=""),s&&(n+=s,s=0)}return e.join("")+t.slice(r)}function We(t,e,n,r){const s=r?r-1:Number.POSITIVE_INFINITY;let a=0;return l;function l(f){return Ge(f)?(t.enter(n),u(f)):e(f)}function u(f){return Ge(f)&&a++<s?(t.consume(f),u):(t.exit(n),e(f))}}const Cq={tokenize:Tq};function Tq(t){const e=t.attempt(this.parser.constructs.contentInitial,r,s);let n;return e;function r(u){if(u===null){t.consume(u);return}return t.enter("lineEnding"),t.consume(u),t.exit("lineEnding"),We(t,e,"linePrefix")}function s(u){return t.enter("paragraph"),a(u)}function a(u){const f=t.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=f),n=f,l(u)}function l(u){if(u===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(u);return}return Re(u)?(t.consume(u),t.exit("chunkText"),a):(t.consume(u),l)}}const Aq={tokenize:Rq},fS={tokenize:Oq};function Rq(t){const e=this,n=[];let r=0,s,a,l;return u;function u(C){if(r<n.length){const L=n[r];return e.containerState=L[1],t.attempt(L[0].continuation,f,h)(C)}return h(C)}function f(C){if(r++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,s&&T();const L=e.events.length;let D=L,I;for(;D--;)if(e.events[D][0]==="exit"&&e.events[D][1].type==="chunkFlow"){I=e.events[D][1].end;break}S(r);let P=L;for(;P<e.events.length;)e.events[P][1].end={...I},P++;return tr(e.events,D+1,0,e.events.slice(L)),e.events.length=P,h(C)}return u(C)}function h(C){if(r===n.length){if(!s)return _(C);if(s.currentConstruct&&s.currentConstruct.concrete)return v(C);e.interrupt=!!(s.currentConstruct&&!s._gfmTableDynamicInterruptHack)}return e.containerState={},t.check(fS,m,p)(C)}function m(C){return s&&T(),S(r),_(C)}function p(C){return e.parser.lazy[e.now().line]=r!==n.length,l=e.now().offset,v(C)}function _(C){return e.containerState={},t.attempt(fS,g,v)(C)}function g(C){return r++,n.push([e.currentConstruct,e.containerState]),_(C)}function v(C){if(C===null){s&&T(),S(0),t.consume(C);return}return s=s||e.parser.flow(e.now()),t.enter("chunkFlow",{_tokenizer:s,contentType:"flow",previous:a}),x(C)}function x(C){if(C===null){k(t.exit("chunkFlow"),!0),S(0),t.consume(C);return}return Re(C)?(t.consume(C),k(t.exit("chunkFlow")),r=0,e.interrupt=void 0,u):(t.consume(C),x)}function k(C,L){const D=e.sliceStream(C);if(L&&D.push(null),C.previous=a,a&&(a.next=C),a=C,s.defineSkip(C.start),s.write(D),e.parser.lazy[C.start.line]){let I=s.events.length;for(;I--;)if(s.events[I][1].start.offset<l&&(!s.events[I][1].end||s.events[I][1].end.offset>l))return;const P=e.events.length;let V=P,H,z;for(;V--;)if(e.events[V][0]==="exit"&&e.events[V][1].type==="chunkFlow"){if(H){z=e.events[V][1].end;break}H=!0}for(S(r),I=P;I<e.events.length;)e.events[I][1].end={...z},I++;tr(e.events,V+1,0,e.events.slice(P)),e.events.length=I}}function S(C){let L=n.length;for(;L-- >C;){const D=n[L];e.containerState=D[1],D[0].exit.call(e,t)}n.length=C}function T(){s.write([null]),a=void 0,s=void 0,e.containerState._closeFlow=void 0}}function Oq(t,e,n){return We(t,t.attempt(this.parser.constructs.document,e,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Ha(t){if(t===null||mt(t)||Di(t))return 1;if(bh(t))return 2}function vh(t,e,n){const r=[];let s=-1;for(;++s<t.length;){const a=t[s].resolveAll;a&&!r.includes(a)&&(e=a(e,n),r.push(a))}return e}const qg={name:"attention",resolveAll:Iq,tokenize:Nq};function Iq(t,e){let n=-1,r,s,a,l,u,f,h,m;for(;++n<t.length;)if(t[n][0]==="enter"&&t[n][1].type==="attentionSequence"&&t[n][1]._close){for(r=n;r--;)if(t[r][0]==="exit"&&t[r][1].type==="attentionSequence"&&t[r][1]._open&&e.sliceSerialize(t[r][1]).charCodeAt(0)===e.sliceSerialize(t[n][1]).charCodeAt(0)){if((t[r][1]._close||t[n][1]._open)&&(t[n][1].end.offset-t[n][1].start.offset)%3&&!((t[r][1].end.offset-t[r][1].start.offset+t[n][1].end.offset-t[n][1].start.offset)%3))continue;f=t[r][1].end.offset-t[r][1].start.offset>1&&t[n][1].end.offset-t[n][1].start.offset>1?2:1;const p={...t[r][1].end},_={...t[n][1].start};hS(p,-f),hS(_,f),l={type:f>1?"strongSequence":"emphasisSequence",start:p,end:{...t[r][1].end}},u={type:f>1?"strongSequence":"emphasisSequence",start:{...t[n][1].start},end:_},a={type:f>1?"strongText":"emphasisText",start:{...t[r][1].end},end:{...t[n][1].start}},s={type:f>1?"strong":"emphasis",start:{...l.start},end:{...u.end}},t[r][1].end={...l.start},t[n][1].start={...u.end},h=[],t[r][1].end.offset-t[r][1].start.offset&&(h=_r(h,[["enter",t[r][1],e],["exit",t[r][1],e]])),h=_r(h,[["enter",s,e],["enter",l,e],["exit",l,e],["enter",a,e]]),h=_r(h,vh(e.parser.constructs.insideSpan.null,t.slice(r+1,n),e)),h=_r(h,[["exit",a,e],["enter",u,e],["exit",u,e],["exit",s,e]]),t[n][1].end.offset-t[n][1].start.offset?(m=2,h=_r(h,[["enter",t[n][1],e],["exit",t[n][1],e]])):m=0,tr(t,r-1,n-r+3,h),n=r+h.length-m-2;break}}for(n=-1;++n<t.length;)t[n][1].type==="attentionSequence"&&(t[n][1].type="data");return t}function Nq(t,e){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,s=Ha(r);let a;return l;function l(f){return a=f,t.enter("attentionSequence"),u(f)}function u(f){if(f===a)return t.consume(f),u;const h=t.exit("attentionSequence"),m=Ha(f),p=!m||m===2&&s||n.includes(f),_=!s||s===2&&m||n.includes(r);return h._open=!!(a===42?p:p&&(s||!_)),h._close=!!(a===42?_:_&&(m||!p)),e(f)}}function hS(t,e){t.column+=e,t.offset+=e,t._bufferIndex+=e}const Mq={name:"autolink",tokenize:Dq};function Dq(t,e,n){let r=0;return s;function s(g){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(g),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),a}function a(g){return Tn(g)?(t.consume(g),l):g===64?n(g):h(g)}function l(g){return g===43||g===45||g===46||bn(g)?(r=1,u(g)):h(g)}function u(g){return g===58?(t.consume(g),r=0,f):(g===43||g===45||g===46||bn(g))&&r++<32?(t.consume(g),u):(r=0,h(g))}function f(g){return g===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(g),t.exit("autolinkMarker"),t.exit("autolink"),e):g===null||g===32||g===60||Ff(g)?n(g):(t.consume(g),f)}function h(g){return g===64?(t.consume(g),m):Sq(g)?(t.consume(g),h):n(g)}function m(g){return bn(g)?p(g):n(g)}function p(g){return g===46?(t.consume(g),r=0,m):g===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(g),t.exit("autolinkMarker"),t.exit("autolink"),e):_(g)}function _(g){if((g===45||bn(g))&&r++<63){const v=g===45?_:p;return t.consume(g),v}return n(g)}}const ec={partial:!0,tokenize:Lq};function Lq(t,e,n){return r;function r(a){return Ge(a)?We(t,s,"linePrefix")(a):s(a)}function s(a){return a===null||Re(a)?e(a):n(a)}}const jT={continuation:{tokenize:jq},exit:Pq,name:"blockQuote",tokenize:zq};function zq(t,e,n){const r=this;return s;function s(l){if(l===62){const u=r.containerState;return u.open||(t.enter("blockQuote",{_container:!0}),u.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(l),t.exit("blockQuoteMarker"),a}return n(l)}function a(l){return Ge(l)?(t.enter("blockQuotePrefixWhitespace"),t.consume(l),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),e):(t.exit("blockQuotePrefix"),e(l))}}function jq(t,e,n){const r=this;return s;function s(l){return Ge(l)?We(t,a,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l):a(l)}function a(l){return t.attempt(jT,e,n)(l)}}function Pq(t){t.exit("blockQuote")}const PT={name:"characterEscape",tokenize:Bq};function Bq(t,e,n){return r;function r(a){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(a),t.exit("escapeMarker"),s}function s(a){return Eq(a)?(t.enter("characterEscapeValue"),t.consume(a),t.exit("characterEscapeValue"),t.exit("characterEscape"),e):n(a)}}const BT={name:"characterReference",tokenize:Uq};function Uq(t,e,n){const r=this;let s=0,a,l;return u;function u(p){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(p),t.exit("characterReferenceMarker"),f}function f(p){return p===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(p),t.exit("characterReferenceMarkerNumeric"),h):(t.enter("characterReferenceValue"),a=31,l=bn,m(p))}function h(p){return p===88||p===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(p),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),a=6,l=kq,m):(t.enter("characterReferenceValue"),a=7,l=$g,m(p))}function m(p){if(p===59&&s){const _=t.exit("characterReferenceValue");return l===bn&&!h0(r.sliceSerialize(_))?n(p):(t.enter("characterReferenceMarker"),t.consume(p),t.exit("characterReferenceMarker"),t.exit("characterReference"),e)}return l(p)&&s++<a?(t.consume(p),m):n(p)}}const dS={partial:!0,tokenize:qq},pS={concrete:!0,name:"codeFenced",tokenize:$q};function $q(t,e,n){const r=this,s={partial:!0,tokenize:D};let a=0,l=0,u;return f;function f(I){return h(I)}function h(I){const P=r.events[r.events.length-1];return a=P&&P[1].type==="linePrefix"?P[2].sliceSerialize(P[1],!0).length:0,u=I,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),m(I)}function m(I){return I===u?(l++,t.consume(I),m):l<3?n(I):(t.exit("codeFencedFenceSequence"),Ge(I)?We(t,p,"whitespace")(I):p(I))}function p(I){return I===null||Re(I)?(t.exit("codeFencedFence"),r.interrupt?e(I):t.check(dS,x,L)(I)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),_(I))}function _(I){return I===null||Re(I)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),p(I)):Ge(I)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),We(t,g,"whitespace")(I)):I===96&&I===u?n(I):(t.consume(I),_)}function g(I){return I===null||Re(I)?p(I):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),v(I))}function v(I){return I===null||Re(I)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),p(I)):I===96&&I===u?n(I):(t.consume(I),v)}function x(I){return t.attempt(s,L,k)(I)}function k(I){return t.enter("lineEnding"),t.consume(I),t.exit("lineEnding"),S}function S(I){return a>0&&Ge(I)?We(t,T,"linePrefix",a+1)(I):T(I)}function T(I){return I===null||Re(I)?t.check(dS,x,L)(I):(t.enter("codeFlowValue"),C(I))}function C(I){return I===null||Re(I)?(t.exit("codeFlowValue"),T(I)):(t.consume(I),C)}function L(I){return t.exit("codeFenced"),e(I)}function D(I,P,V){let H=0;return z;function z($){return I.enter("lineEnding"),I.consume($),I.exit("lineEnding"),Q}function Q($){return I.enter("codeFencedFence"),Ge($)?We(I,j,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)($):j($)}function j($){return $===u?(I.enter("codeFencedFenceSequence"),se($)):V($)}function se($){return $===u?(H++,I.consume($),se):H>=l?(I.exit("codeFencedFenceSequence"),Ge($)?We(I,Z,"whitespace")($):Z($)):V($)}function Z($){return $===null||Re($)?(I.exit("codeFencedFence"),P($)):V($)}}}function qq(t,e,n){const r=this;return s;function s(l){return l===null?n(l):(t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),a)}function a(l){return r.parser.lazy[r.now().line]?n(l):e(l)}}const xm={name:"codeIndented",tokenize:Vq},Fq={partial:!0,tokenize:Hq};function Vq(t,e,n){const r=this;return s;function s(h){return t.enter("codeIndented"),We(t,a,"linePrefix",5)(h)}function a(h){const m=r.events[r.events.length-1];return m&&m[1].type==="linePrefix"&&m[2].sliceSerialize(m[1],!0).length>=4?l(h):n(h)}function l(h){return h===null?f(h):Re(h)?t.attempt(Fq,l,f)(h):(t.enter("codeFlowValue"),u(h))}function u(h){return h===null||Re(h)?(t.exit("codeFlowValue"),l(h)):(t.consume(h),u)}function f(h){return t.exit("codeIndented"),e(h)}}function Hq(t,e,n){const r=this;return s;function s(l){return r.parser.lazy[r.now().line]?n(l):Re(l)?(t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),s):We(t,a,"linePrefix",5)(l)}function a(l){const u=r.events[r.events.length-1];return u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?e(l):Re(l)?s(l):n(l)}}const Gq={name:"codeText",previous:Zq,resolve:Kq,tokenize:Qq};function Kq(t){let e=t.length-4,n=3,r,s;if((t[n][1].type==="lineEnding"||t[n][1].type==="space")&&(t[e][1].type==="lineEnding"||t[e][1].type==="space")){for(r=n;++r<e;)if(t[r][1].type==="codeTextData"){t[n][1].type="codeTextPadding",t[e][1].type="codeTextPadding",n+=2,e-=2;break}}for(r=n-1,e++;++r<=e;)s===void 0?r!==e&&t[r][1].type!=="lineEnding"&&(s=r):(r===e||t[r][1].type==="lineEnding")&&(t[s][1].type="codeTextData",r!==s+2&&(t[s][1].end=t[r-1][1].end,t.splice(s+2,r-s-2),e-=r-s-2,r=s+2),s=void 0);return t}function Zq(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function Qq(t,e,n){let r=0,s,a;return l;function l(p){return t.enter("codeText"),t.enter("codeTextSequence"),u(p)}function u(p){return p===96?(t.consume(p),r++,u):(t.exit("codeTextSequence"),f(p))}function f(p){return p===null?n(p):p===32?(t.enter("space"),t.consume(p),t.exit("space"),f):p===96?(a=t.enter("codeTextSequence"),s=0,m(p)):Re(p)?(t.enter("lineEnding"),t.consume(p),t.exit("lineEnding"),f):(t.enter("codeTextData"),h(p))}function h(p){return p===null||p===32||p===96||Re(p)?(t.exit("codeTextData"),f(p)):(t.consume(p),h)}function m(p){return p===96?(t.consume(p),s++,m):s===r?(t.exit("codeTextSequence"),t.exit("codeText"),e(p)):(a.type="codeTextData",h(p))}}class Jq{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(e,r):e>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(e,n,r){const s=n||0;this.setCursor(Math.trunc(e));const a=this.right.splice(this.right.length-s,Number.POSITIVE_INFINITY);return r&&el(this.left,r),a.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),el(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),el(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const n=this.left.splice(e,Number.POSITIVE_INFINITY);el(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);el(this.left,n.reverse())}}}function el(t,e){let n=0;if(e.length<1e4)t.push(...e);else for(;n<e.length;)t.push(...e.slice(n,n+1e4)),n+=1e4}function UT(t){const e={};let n=-1,r,s,a,l,u,f,h;const m=new Jq(t);for(;++n<m.length;){for(;n in e;)n=e[n];if(r=m.get(n),n&&r[1].type==="chunkFlow"&&m.get(n-1)[1].type==="listItemPrefix"&&(f=r[1]._tokenizer.events,a=0,a<f.length&&f[a][1].type==="lineEndingBlank"&&(a+=2),a<f.length&&f[a][1].type==="content"))for(;++a<f.length&&f[a][1].type!=="content";)f[a][1].type==="chunkText"&&(f[a][1]._isInFirstContentOfListItem=!0,a++);if(r[0]==="enter")r[1].contentType&&(Object.assign(e,Yq(m,n)),n=e[n],h=!0);else if(r[1]._container){for(a=n,s=void 0;a--;)if(l=m.get(a),l[1].type==="lineEnding"||l[1].type==="lineEndingBlank")l[0]==="enter"&&(s&&(m.get(s)[1].type="lineEndingBlank"),l[1].type="lineEnding",s=a);else if(!(l[1].type==="linePrefix"||l[1].type==="listItemIndent"))break;s&&(r[1].end={...m.get(s)[1].start},u=m.slice(s,n),u.unshift(r),m.splice(s,n-s+1,u))}}return tr(t,0,Number.POSITIVE_INFINITY,m.slice(0)),!h}function Yq(t,e){const n=t.get(e)[1],r=t.get(e)[2];let s=e-1;const a=[];let l=n._tokenizer;l||(l=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(l._contentTypeTextTrailing=!0));const u=l.events,f=[],h={};let m,p,_=-1,g=n,v=0,x=0;const k=[x];for(;g;){for(;t.get(++s)[1]!==g;);a.push(s),g._tokenizer||(m=r.sliceStream(g),g.next||m.push(null),p&&l.defineSkip(g.start),g._isInFirstContentOfListItem&&(l._gfmTasklistFirstContentOfListItem=!0),l.write(m),g._isInFirstContentOfListItem&&(l._gfmTasklistFirstContentOfListItem=void 0)),p=g,g=g.next}for(g=n;++_<u.length;)u[_][0]==="exit"&&u[_-1][0]==="enter"&&u[_][1].type===u[_-1][1].type&&u[_][1].start.line!==u[_][1].end.line&&(x=_+1,k.push(x),g._tokenizer=void 0,g.previous=void 0,g=g.next);for(l.events=[],g?(g._tokenizer=void 0,g.previous=void 0):k.pop(),_=k.length;_--;){const S=u.slice(k[_],k[_+1]),T=a.pop();f.push([T,T+S.length-1]),t.splice(T,2,S)}for(f.reverse(),_=-1;++_<f.length;)h[v+f[_][0]]=v+f[_][1],v+=f[_][1]-f[_][0]-1;return h}const Xq={resolve:eF,tokenize:tF},Wq={partial:!0,tokenize:nF};function eF(t){return UT(t),t}function tF(t,e){let n;return r;function r(u){return t.enter("content"),n=t.enter("chunkContent",{contentType:"content"}),s(u)}function s(u){return u===null?a(u):Re(u)?t.check(Wq,l,a)(u):(t.consume(u),s)}function a(u){return t.exit("chunkContent"),t.exit("content"),e(u)}function l(u){return t.consume(u),t.exit("chunkContent"),n.next=t.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,s}}function nF(t,e,n){const r=this;return s;function s(l){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),We(t,a,"linePrefix")}function a(l){if(l===null||Re(l))return n(l);const u=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?e(l):t.interrupt(r.parser.constructs.flow,n,e)(l)}}function $T(t,e,n,r,s,a,l,u,f){const h=f||Number.POSITIVE_INFINITY;let m=0;return p;function p(S){return S===60?(t.enter(r),t.enter(s),t.enter(a),t.consume(S),t.exit(a),_):S===null||S===32||S===41||Ff(S)?n(S):(t.enter(r),t.enter(l),t.enter(u),t.enter("chunkString",{contentType:"string"}),x(S))}function _(S){return S===62?(t.enter(a),t.consume(S),t.exit(a),t.exit(s),t.exit(r),e):(t.enter(u),t.enter("chunkString",{contentType:"string"}),g(S))}function g(S){return S===62?(t.exit("chunkString"),t.exit(u),_(S)):S===null||S===60||Re(S)?n(S):(t.consume(S),S===92?v:g)}function v(S){return S===60||S===62||S===92?(t.consume(S),g):g(S)}function x(S){return!m&&(S===null||S===41||mt(S))?(t.exit("chunkString"),t.exit(u),t.exit(l),t.exit(r),e(S)):m<h&&S===40?(t.consume(S),m++,x):S===41?(t.consume(S),m--,x):S===null||S===32||S===40||Ff(S)?n(S):(t.consume(S),S===92?k:x)}function k(S){return S===40||S===41||S===92?(t.consume(S),x):x(S)}}function qT(t,e,n,r,s,a){const l=this;let u=0,f;return h;function h(g){return t.enter(r),t.enter(s),t.consume(g),t.exit(s),t.enter(a),m}function m(g){return u>999||g===null||g===91||g===93&&!f||g===94&&!u&&"_hiddenFootnoteSupport"in l.parser.constructs?n(g):g===93?(t.exit(a),t.enter(s),t.consume(g),t.exit(s),t.exit(r),e):Re(g)?(t.enter("lineEnding"),t.consume(g),t.exit("lineEnding"),m):(t.enter("chunkString",{contentType:"string"}),p(g))}function p(g){return g===null||g===91||g===93||Re(g)||u++>999?(t.exit("chunkString"),m(g)):(t.consume(g),f||(f=!Ge(g)),g===92?_:p)}function _(g){return g===91||g===92||g===93?(t.consume(g),u++,p):p(g)}}function FT(t,e,n,r,s,a){let l;return u;function u(_){return _===34||_===39||_===40?(t.enter(r),t.enter(s),t.consume(_),t.exit(s),l=_===40?41:_,f):n(_)}function f(_){return _===l?(t.enter(s),t.consume(_),t.exit(s),t.exit(r),e):(t.enter(a),h(_))}function h(_){return _===l?(t.exit(a),f(l)):_===null?n(_):Re(_)?(t.enter("lineEnding"),t.consume(_),t.exit("lineEnding"),We(t,h,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),m(_))}function m(_){return _===l||_===null||Re(_)?(t.exit("chunkString"),h(_)):(t.consume(_),_===92?p:m)}function p(_){return _===l||_===92?(t.consume(_),m):m(_)}}function Cl(t,e){let n;return r;function r(s){return Re(s)?(t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),n=!0,r):Ge(s)?We(t,r,n?"linePrefix":"lineSuffix")(s):e(s)}}const rF={name:"definition",tokenize:iF},sF={partial:!0,tokenize:aF};function iF(t,e,n){const r=this;let s;return a;function a(g){return t.enter("definition"),l(g)}function l(g){return qT.call(r,t,u,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(g)}function u(g){return s=Rr(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),g===58?(t.enter("definitionMarker"),t.consume(g),t.exit("definitionMarker"),f):n(g)}function f(g){return mt(g)?Cl(t,h)(g):h(g)}function h(g){return $T(t,m,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(g)}function m(g){return t.attempt(sF,p,p)(g)}function p(g){return Ge(g)?We(t,_,"whitespace")(g):_(g)}function _(g){return g===null||Re(g)?(t.exit("definition"),r.parser.defined.push(s),e(g)):n(g)}}function aF(t,e,n){return r;function r(u){return mt(u)?Cl(t,s)(u):n(u)}function s(u){return FT(t,a,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(u)}function a(u){return Ge(u)?We(t,l,"whitespace")(u):l(u)}function l(u){return u===null||Re(u)?e(u):n(u)}}const oF={name:"hardBreakEscape",tokenize:lF};function lF(t,e,n){return r;function r(a){return t.enter("hardBreakEscape"),t.consume(a),s}function s(a){return Re(a)?(t.exit("hardBreakEscape"),e(a)):n(a)}}const cF={name:"headingAtx",resolve:uF,tokenize:fF};function uF(t,e){let n=t.length-2,r=3,s,a;return t[r][1].type==="whitespace"&&(r+=2),n-2>r&&t[n][1].type==="whitespace"&&(n-=2),t[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&t[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(s={type:"atxHeadingText",start:t[r][1].start,end:t[n][1].end},a={type:"chunkText",start:t[r][1].start,end:t[n][1].end,contentType:"text"},tr(t,r,n-r+1,[["enter",s,e],["enter",a,e],["exit",a,e],["exit",s,e]])),t}function fF(t,e,n){let r=0;return s;function s(m){return t.enter("atxHeading"),a(m)}function a(m){return t.enter("atxHeadingSequence"),l(m)}function l(m){return m===35&&r++<6?(t.consume(m),l):m===null||mt(m)?(t.exit("atxHeadingSequence"),u(m)):n(m)}function u(m){return m===35?(t.enter("atxHeadingSequence"),f(m)):m===null||Re(m)?(t.exit("atxHeading"),e(m)):Ge(m)?We(t,u,"whitespace")(m):(t.enter("atxHeadingText"),h(m))}function f(m){return m===35?(t.consume(m),f):(t.exit("atxHeadingSequence"),u(m))}function h(m){return m===null||m===35||mt(m)?(t.exit("atxHeadingText"),u(m)):(t.consume(m),h)}}const hF=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],mS=["pre","script","style","textarea"],dF={concrete:!0,name:"htmlFlow",resolveTo:gF,tokenize:yF},pF={partial:!0,tokenize:bF},mF={partial:!0,tokenize:_F};function gF(t){let e=t.length;for(;e--&&!(t[e][0]==="enter"&&t[e][1].type==="htmlFlow"););return e>1&&t[e-2][1].type==="linePrefix"&&(t[e][1].start=t[e-2][1].start,t[e+1][1].start=t[e-2][1].start,t.splice(e-2,2)),t}function yF(t,e,n){const r=this;let s,a,l,u,f;return h;function h(R){return m(R)}function m(R){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(R),p}function p(R){return R===33?(t.consume(R),_):R===47?(t.consume(R),a=!0,x):R===63?(t.consume(R),s=3,r.interrupt?e:O):Tn(R)?(t.consume(R),l=String.fromCharCode(R),k):n(R)}function _(R){return R===45?(t.consume(R),s=2,g):R===91?(t.consume(R),s=5,u=0,v):Tn(R)?(t.consume(R),s=4,r.interrupt?e:O):n(R)}function g(R){return R===45?(t.consume(R),r.interrupt?e:O):n(R)}function v(R){const oe="CDATA[";return R===oe.charCodeAt(u++)?(t.consume(R),u===oe.length?r.interrupt?e:j:v):n(R)}function x(R){return Tn(R)?(t.consume(R),l=String.fromCharCode(R),k):n(R)}function k(R){if(R===null||R===47||R===62||mt(R)){const oe=R===47,pe=l.toLowerCase();return!oe&&!a&&mS.includes(pe)?(s=1,r.interrupt?e(R):j(R)):hF.includes(l.toLowerCase())?(s=6,oe?(t.consume(R),S):r.interrupt?e(R):j(R)):(s=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(R):a?T(R):C(R))}return R===45||bn(R)?(t.consume(R),l+=String.fromCharCode(R),k):n(R)}function S(R){return R===62?(t.consume(R),r.interrupt?e:j):n(R)}function T(R){return Ge(R)?(t.consume(R),T):z(R)}function C(R){return R===47?(t.consume(R),z):R===58||R===95||Tn(R)?(t.consume(R),L):Ge(R)?(t.consume(R),C):z(R)}function L(R){return R===45||R===46||R===58||R===95||bn(R)?(t.consume(R),L):D(R)}function D(R){return R===61?(t.consume(R),I):Ge(R)?(t.consume(R),D):C(R)}function I(R){return R===null||R===60||R===61||R===62||R===96?n(R):R===34||R===39?(t.consume(R),f=R,P):Ge(R)?(t.consume(R),I):V(R)}function P(R){return R===f?(t.consume(R),f=null,H):R===null||Re(R)?n(R):(t.consume(R),P)}function V(R){return R===null||R===34||R===39||R===47||R===60||R===61||R===62||R===96||mt(R)?D(R):(t.consume(R),V)}function H(R){return R===47||R===62||Ge(R)?C(R):n(R)}function z(R){return R===62?(t.consume(R),Q):n(R)}function Q(R){return R===null||Re(R)?j(R):Ge(R)?(t.consume(R),Q):n(R)}function j(R){return R===45&&s===2?(t.consume(R),B):R===60&&s===1?(t.consume(R),G):R===62&&s===4?(t.consume(R),N):R===63&&s===3?(t.consume(R),O):R===93&&s===5?(t.consume(R),Y):Re(R)&&(s===6||s===7)?(t.exit("htmlFlowData"),t.check(pF,F,se)(R)):R===null||Re(R)?(t.exit("htmlFlowData"),se(R)):(t.consume(R),j)}function se(R){return t.check(mF,Z,F)(R)}function Z(R){return t.enter("lineEnding"),t.consume(R),t.exit("lineEnding"),$}function $(R){return R===null||Re(R)?se(R):(t.enter("htmlFlowData"),j(R))}function B(R){return R===45?(t.consume(R),O):j(R)}function G(R){return R===47?(t.consume(R),l="",re):j(R)}function re(R){if(R===62){const oe=l.toLowerCase();return mS.includes(oe)?(t.consume(R),N):j(R)}return Tn(R)&&l.length<8?(t.consume(R),l+=String.fromCharCode(R),re):j(R)}function Y(R){return R===93?(t.consume(R),O):j(R)}function O(R){return R===62?(t.consume(R),N):R===45&&s===2?(t.consume(R),O):j(R)}function N(R){return R===null||Re(R)?(t.exit("htmlFlowData"),F(R)):(t.consume(R),N)}function F(R){return t.exit("htmlFlow"),e(R)}}function _F(t,e,n){const r=this;return s;function s(l){return Re(l)?(t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),a):n(l)}function a(l){return r.parser.lazy[r.now().line]?n(l):e(l)}}function bF(t,e,n){return r;function r(s){return t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),t.attempt(ec,e,n)}}const vF={name:"htmlText",tokenize:xF};function xF(t,e,n){const r=this;let s,a,l;return u;function u(O){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(O),f}function f(O){return O===33?(t.consume(O),h):O===47?(t.consume(O),D):O===63?(t.consume(O),C):Tn(O)?(t.consume(O),V):n(O)}function h(O){return O===45?(t.consume(O),m):O===91?(t.consume(O),a=0,v):Tn(O)?(t.consume(O),T):n(O)}function m(O){return O===45?(t.consume(O),g):n(O)}function p(O){return O===null?n(O):O===45?(t.consume(O),_):Re(O)?(l=p,G(O)):(t.consume(O),p)}function _(O){return O===45?(t.consume(O),g):p(O)}function g(O){return O===62?B(O):O===45?_(O):p(O)}function v(O){const N="CDATA[";return O===N.charCodeAt(a++)?(t.consume(O),a===N.length?x:v):n(O)}function x(O){return O===null?n(O):O===93?(t.consume(O),k):Re(O)?(l=x,G(O)):(t.consume(O),x)}function k(O){return O===93?(t.consume(O),S):x(O)}function S(O){return O===62?B(O):O===93?(t.consume(O),S):x(O)}function T(O){return O===null||O===62?B(O):Re(O)?(l=T,G(O)):(t.consume(O),T)}function C(O){return O===null?n(O):O===63?(t.consume(O),L):Re(O)?(l=C,G(O)):(t.consume(O),C)}function L(O){return O===62?B(O):C(O)}function D(O){return Tn(O)?(t.consume(O),I):n(O)}function I(O){return O===45||bn(O)?(t.consume(O),I):P(O)}function P(O){return Re(O)?(l=P,G(O)):Ge(O)?(t.consume(O),P):B(O)}function V(O){return O===45||bn(O)?(t.consume(O),V):O===47||O===62||mt(O)?H(O):n(O)}function H(O){return O===47?(t.consume(O),B):O===58||O===95||Tn(O)?(t.consume(O),z):Re(O)?(l=H,G(O)):Ge(O)?(t.consume(O),H):B(O)}function z(O){return O===45||O===46||O===58||O===95||bn(O)?(t.consume(O),z):Q(O)}function Q(O){return O===61?(t.consume(O),j):Re(O)?(l=Q,G(O)):Ge(O)?(t.consume(O),Q):H(O)}function j(O){return O===null||O===60||O===61||O===62||O===96?n(O):O===34||O===39?(t.consume(O),s=O,se):Re(O)?(l=j,G(O)):Ge(O)?(t.consume(O),j):(t.consume(O),Z)}function se(O){return O===s?(t.consume(O),s=void 0,$):O===null?n(O):Re(O)?(l=se,G(O)):(t.consume(O),se)}function Z(O){return O===null||O===34||O===39||O===60||O===61||O===96?n(O):O===47||O===62||mt(O)?H(O):(t.consume(O),Z)}function $(O){return O===47||O===62||mt(O)?H(O):n(O)}function B(O){return O===62?(t.consume(O),t.exit("htmlTextData"),t.exit("htmlText"),e):n(O)}function G(O){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(O),t.exit("lineEnding"),re}function re(O){return Ge(O)?We(t,Y,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(O):Y(O)}function Y(O){return t.enter("htmlTextData"),l(O)}}const d0={name:"labelEnd",resolveAll:EF,resolveTo:CF,tokenize:TF},wF={tokenize:AF},SF={tokenize:RF},kF={tokenize:OF};function EF(t){let e=-1;const n=[];for(;++e<t.length;){const r=t[e][1];if(n.push(t[e]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const s=r.type==="labelImage"?4:2;r.type="data",e+=s}}return t.length!==n.length&&tr(t,0,t.length,n),t}function CF(t,e){let n=t.length,r=0,s,a,l,u;for(;n--;)if(s=t[n][1],a){if(s.type==="link"||s.type==="labelLink"&&s._inactive)break;t[n][0]==="enter"&&s.type==="labelLink"&&(s._inactive=!0)}else if(l){if(t[n][0]==="enter"&&(s.type==="labelImage"||s.type==="labelLink")&&!s._balanced&&(a=n,s.type!=="labelLink")){r=2;break}}else s.type==="labelEnd"&&(l=n);const f={type:t[a][1].type==="labelLink"?"link":"image",start:{...t[a][1].start},end:{...t[t.length-1][1].end}},h={type:"label",start:{...t[a][1].start},end:{...t[l][1].end}},m={type:"labelText",start:{...t[a+r+2][1].end},end:{...t[l-2][1].start}};return u=[["enter",f,e],["enter",h,e]],u=_r(u,t.slice(a+1,a+r+3)),u=_r(u,[["enter",m,e]]),u=_r(u,vh(e.parser.constructs.insideSpan.null,t.slice(a+r+4,l-3),e)),u=_r(u,[["exit",m,e],t[l-2],t[l-1],["exit",h,e]]),u=_r(u,t.slice(l+1)),u=_r(u,[["exit",f,e]]),tr(t,a,t.length,u),t}function TF(t,e,n){const r=this;let s=r.events.length,a,l;for(;s--;)if((r.events[s][1].type==="labelImage"||r.events[s][1].type==="labelLink")&&!r.events[s][1]._balanced){a=r.events[s][1];break}return u;function u(_){return a?a._inactive?p(_):(l=r.parser.defined.includes(Rr(r.sliceSerialize({start:a.end,end:r.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(_),t.exit("labelMarker"),t.exit("labelEnd"),f):n(_)}function f(_){return _===40?t.attempt(wF,m,l?m:p)(_):_===91?t.attempt(SF,m,l?h:p)(_):l?m(_):p(_)}function h(_){return t.attempt(kF,m,p)(_)}function m(_){return e(_)}function p(_){return a._balanced=!0,n(_)}}function AF(t,e,n){return r;function r(p){return t.enter("resource"),t.enter("resourceMarker"),t.consume(p),t.exit("resourceMarker"),s}function s(p){return mt(p)?Cl(t,a)(p):a(p)}function a(p){return p===41?m(p):$T(t,l,u,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(p)}function l(p){return mt(p)?Cl(t,f)(p):m(p)}function u(p){return n(p)}function f(p){return p===34||p===39||p===40?FT(t,h,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(p):m(p)}function h(p){return mt(p)?Cl(t,m)(p):m(p)}function m(p){return p===41?(t.enter("resourceMarker"),t.consume(p),t.exit("resourceMarker"),t.exit("resource"),e):n(p)}}function RF(t,e,n){const r=this;return s;function s(u){return qT.call(r,t,a,l,"reference","referenceMarker","referenceString")(u)}function a(u){return r.parser.defined.includes(Rr(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?e(u):n(u)}function l(u){return n(u)}}function OF(t,e,n){return r;function r(a){return t.enter("reference"),t.enter("referenceMarker"),t.consume(a),t.exit("referenceMarker"),s}function s(a){return a===93?(t.enter("referenceMarker"),t.consume(a),t.exit("referenceMarker"),t.exit("reference"),e):n(a)}}const IF={name:"labelStartImage",resolveAll:d0.resolveAll,tokenize:NF};function NF(t,e,n){const r=this;return s;function s(u){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(u),t.exit("labelImageMarker"),a}function a(u){return u===91?(t.enter("labelMarker"),t.consume(u),t.exit("labelMarker"),t.exit("labelImage"),l):n(u)}function l(u){return u===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(u):e(u)}}const MF={name:"labelStartLink",resolveAll:d0.resolveAll,tokenize:DF};function DF(t,e,n){const r=this;return s;function s(l){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(l),t.exit("labelMarker"),t.exit("labelLink"),a}function a(l){return l===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(l):e(l)}}const wm={name:"lineEnding",tokenize:LF};function LF(t,e){return n;function n(r){return t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),We(t,e,"linePrefix")}}const nf={name:"thematicBreak",tokenize:zF};function zF(t,e,n){let r=0,s;return a;function a(h){return t.enter("thematicBreak"),l(h)}function l(h){return s=h,u(h)}function u(h){return h===s?(t.enter("thematicBreakSequence"),f(h)):r>=3&&(h===null||Re(h))?(t.exit("thematicBreak"),e(h)):n(h)}function f(h){return h===s?(t.consume(h),r++,f):(t.exit("thematicBreakSequence"),Ge(h)?We(t,u,"whitespace")(h):u(h))}}const jn={continuation:{tokenize:UF},exit:qF,name:"list",tokenize:BF},jF={partial:!0,tokenize:FF},PF={partial:!0,tokenize:$F};function BF(t,e,n){const r=this,s=r.events[r.events.length-1];let a=s&&s[1].type==="linePrefix"?s[2].sliceSerialize(s[1],!0).length:0,l=0;return u;function u(g){const v=r.containerState.type||(g===42||g===43||g===45?"listUnordered":"listOrdered");if(v==="listUnordered"?!r.containerState.marker||g===r.containerState.marker:$g(g)){if(r.containerState.type||(r.containerState.type=v,t.enter(v,{_container:!0})),v==="listUnordered")return t.enter("listItemPrefix"),g===42||g===45?t.check(nf,n,h)(g):h(g);if(!r.interrupt||g===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),f(g)}return n(g)}function f(g){return $g(g)&&++l<10?(t.consume(g),f):(!r.interrupt||l<2)&&(r.containerState.marker?g===r.containerState.marker:g===41||g===46)?(t.exit("listItemValue"),h(g)):n(g)}function h(g){return t.enter("listItemMarker"),t.consume(g),t.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||g,t.check(ec,r.interrupt?n:m,t.attempt(jF,_,p))}function m(g){return r.containerState.initialBlankLine=!0,a++,_(g)}function p(g){return Ge(g)?(t.enter("listItemPrefixWhitespace"),t.consume(g),t.exit("listItemPrefixWhitespace"),_):n(g)}function _(g){return r.containerState.size=a+r.sliceSerialize(t.exit("listItemPrefix"),!0).length,e(g)}}function UF(t,e,n){const r=this;return r.containerState._closeFlow=void 0,t.check(ec,s,a);function s(u){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,We(t,e,"listItemIndent",r.containerState.size+1)(u)}function a(u){return r.containerState.furtherBlankLines||!Ge(u)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,l(u)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,t.attempt(PF,e,l)(u))}function l(u){return r.containerState._closeFlow=!0,r.interrupt=void 0,We(t,t.attempt(jn,e,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(u)}}function $F(t,e,n){const r=this;return We(t,s,"listItemIndent",r.containerState.size+1);function s(a){const l=r.events[r.events.length-1];return l&&l[1].type==="listItemIndent"&&l[2].sliceSerialize(l[1],!0).length===r.containerState.size?e(a):n(a)}}function qF(t){t.exit(this.containerState.type)}function FF(t,e,n){const r=this;return We(t,s,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function s(a){const l=r.events[r.events.length-1];return!Ge(a)&&l&&l[1].type==="listItemPrefixWhitespace"?e(a):n(a)}}const gS={name:"setextUnderline",resolveTo:VF,tokenize:HF};function VF(t,e){let n=t.length,r,s,a;for(;n--;)if(t[n][0]==="enter"){if(t[n][1].type==="content"){r=n;break}t[n][1].type==="paragraph"&&(s=n)}else t[n][1].type==="content"&&t.splice(n,1),!a&&t[n][1].type==="definition"&&(a=n);const l={type:"setextHeading",start:{...t[r][1].start},end:{...t[t.length-1][1].end}};return t[s][1].type="setextHeadingText",a?(t.splice(s,0,["enter",l,e]),t.splice(a+1,0,["exit",t[r][1],e]),t[r][1].end={...t[a][1].end}):t[r][1]=l,t.push(["exit",l,e]),t}function HF(t,e,n){const r=this;let s;return a;function a(h){let m=r.events.length,p;for(;m--;)if(r.events[m][1].type!=="lineEnding"&&r.events[m][1].type!=="linePrefix"&&r.events[m][1].type!=="content"){p=r.events[m][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||p)?(t.enter("setextHeadingLine"),s=h,l(h)):n(h)}function l(h){return t.enter("setextHeadingLineSequence"),u(h)}function u(h){return h===s?(t.consume(h),u):(t.exit("setextHeadingLineSequence"),Ge(h)?We(t,f,"lineSuffix")(h):f(h))}function f(h){return h===null||Re(h)?(t.exit("setextHeadingLine"),e(h)):n(h)}}const GF={tokenize:KF};function KF(t){const e=this,n=t.attempt(ec,r,t.attempt(this.parser.constructs.flowInitial,s,We(t,t.attempt(this.parser.constructs.flow,s,t.attempt(Xq,s)),"linePrefix")));return n;function r(a){if(a===null){t.consume(a);return}return t.enter("lineEndingBlank"),t.consume(a),t.exit("lineEndingBlank"),e.currentConstruct=void 0,n}function s(a){if(a===null){t.consume(a);return}return t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),e.currentConstruct=void 0,n}}const ZF={resolveAll:HT()},QF=VT("string"),JF=VT("text");function VT(t){return{resolveAll:HT(t==="text"?YF:void 0),tokenize:e};function e(n){const r=this,s=this.parser.constructs[t],a=n.attempt(s,l,u);return l;function l(m){return h(m)?a(m):u(m)}function u(m){if(m===null){n.consume(m);return}return n.enter("data"),n.consume(m),f}function f(m){return h(m)?(n.exit("data"),a(m)):(n.consume(m),f)}function h(m){if(m===null)return!0;const p=s[m];let _=-1;if(p)for(;++_<p.length;){const g=p[_];if(!g.previous||g.previous.call(r,r.previous))return!0}return!1}}}function HT(t){return e;function e(n,r){let s=-1,a;for(;++s<=n.length;)a===void 0?n[s]&&n[s][1].type==="data"&&(a=s,s++):(!n[s]||n[s][1].type!=="data")&&(s!==a+2&&(n[a][1].end=n[s-1][1].end,n.splice(a+2,s-a-2),s=a+2),a=void 0);return t?t(n,r):n}}function YF(t,e){let n=0;for(;++n<=t.length;)if((n===t.length||t[n][1].type==="lineEnding")&&t[n-1][1].type==="data"){const r=t[n-1][1],s=e.sliceStream(r);let a=s.length,l=-1,u=0,f;for(;a--;){const h=s[a];if(typeof h=="string"){for(l=h.length;h.charCodeAt(l-1)===32;)u++,l--;if(l)break;l=-1}else if(h===-2)f=!0,u++;else if(h!==-1){a++;break}}if(e._contentTypeTextTrailing&&n===t.length&&(u=0),u){const h={type:n===t.length||f||u<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:a?l:r.start._bufferIndex+l,_index:r.start._index+a,line:r.end.line,column:r.end.column-u,offset:r.end.offset-u},end:{...r.end}};r.end={...h.start},r.start.offset===r.end.offset?Object.assign(r,h):(t.splice(n,0,["enter",h,e],["exit",h,e]),n+=2)}n++}return t}const XF={42:jn,43:jn,45:jn,48:jn,49:jn,50:jn,51:jn,52:jn,53:jn,54:jn,55:jn,56:jn,57:jn,62:jT},WF={91:rF},eV={[-2]:xm,[-1]:xm,32:xm},tV={35:cF,42:nf,45:[gS,nf],60:dF,61:gS,95:nf,96:pS,126:pS},nV={38:BT,92:PT},rV={[-5]:wm,[-4]:wm,[-3]:wm,33:IF,38:BT,42:qg,60:[Mq,vF],91:MF,92:[oF,PT],93:d0,95:qg,96:Gq},sV={null:[qg,ZF]},iV={null:[42,95]},aV={null:[]},oV=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:iV,contentInitial:WF,disable:aV,document:XF,flow:tV,flowInitial:eV,insideSpan:sV,string:nV,text:rV},Symbol.toStringTag,{value:"Module"}));function lV(t,e,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const s={},a=[];let l=[],u=[];const f={attempt:P(D),check:P(I),consume:T,enter:C,exit:L,interrupt:P(I,{interrupt:!0})},h={code:null,containerState:{},defineSkip:x,events:[],now:v,parser:t,previous:null,sliceSerialize:_,sliceStream:g,write:p};let m=e.tokenize.call(h,f);return e.resolveAll&&a.push(e),h;function p(Q){return l=_r(l,Q),k(),l[l.length-1]!==null?[]:(V(e,0),h.events=vh(a,h.events,h),h.events)}function _(Q,j){return uV(g(Q),j)}function g(Q){return cV(l,Q)}function v(){const{_bufferIndex:Q,_index:j,line:se,column:Z,offset:$}=r;return{_bufferIndex:Q,_index:j,line:se,column:Z,offset:$}}function x(Q){s[Q.line]=Q.column,z()}function k(){let Q;for(;r._index<l.length;){const j=l[r._index];if(typeof j=="string")for(Q=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===Q&&r._bufferIndex<j.length;)S(j.charCodeAt(r._bufferIndex));else S(j)}}function S(Q){m=m(Q)}function T(Q){Re(Q)?(r.line++,r.column=1,r.offset+=Q===-3?2:1,z()):Q!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===l[r._index].length&&(r._bufferIndex=-1,r._index++)),h.previous=Q}function C(Q,j){const se=j||{};return se.type=Q,se.start=v(),h.events.push(["enter",se,h]),u.push(se),se}function L(Q){const j=u.pop();return j.end=v(),h.events.push(["exit",j,h]),j}function D(Q,j){V(Q,j.from)}function I(Q,j){j.restore()}function P(Q,j){return se;function se(Z,$,B){let G,re,Y,O;return Array.isArray(Z)?F(Z):"tokenize"in Z?F([Z]):N(Z);function N(me){return xe;function xe(Me){const Ie=Me!==null&&me[Me],nt=Me!==null&&me.null,at=[...Array.isArray(Ie)?Ie:Ie?[Ie]:[],...Array.isArray(nt)?nt:nt?[nt]:[]];return F(at)(Me)}}function F(me){return G=me,re=0,me.length===0?B:R(me[re])}function R(me){return xe;function xe(Me){return O=H(),Y=me,me.partial||(h.currentConstruct=me),me.name&&h.parser.constructs.disable.null.includes(me.name)?pe():me.tokenize.call(j?Object.assign(Object.create(h),j):h,f,oe,pe)(Me)}}function oe(me){return Q(Y,O),$}function pe(me){return O.restore(),++re<G.length?R(G[re]):B}}}function V(Q,j){Q.resolveAll&&!a.includes(Q)&&a.push(Q),Q.resolve&&tr(h.events,j,h.events.length-j,Q.resolve(h.events.slice(j),h)),Q.resolveTo&&(h.events=Q.resolveTo(h.events,h))}function H(){const Q=v(),j=h.previous,se=h.currentConstruct,Z=h.events.length,$=Array.from(u);return{from:Z,restore:B};function B(){r=Q,h.previous=j,h.currentConstruct=se,h.events.length=Z,u=$,z()}}function z(){r.line in s&&r.column<2&&(r.column=s[r.line],r.offset+=s[r.line]-1)}}function cV(t,e){const n=e.start._index,r=e.start._bufferIndex,s=e.end._index,a=e.end._bufferIndex;let l;if(n===s)l=[t[n].slice(r,a)];else{if(l=t.slice(n,s),r>-1){const u=l[0];typeof u=="string"?l[0]=u.slice(r):l.shift()}a>0&&l.push(t[s].slice(0,a))}return l}function uV(t,e){let n=-1;const r=[];let s;for(;++n<t.length;){const a=t[n];let l;if(typeof a=="string")l=a;else switch(a){case-5:{l="\r";break}case-4:{l=`
`;break}case-3:{l=`\r
`;break}case-2:{l=e?" ":"	";break}case-1:{if(!e&&s)continue;l=" ";break}default:l=String.fromCharCode(a)}s=a===-2,r.push(l)}return r.join("")}function fV(t){const r={constructs:LT([oV,...(t||{}).extensions||[]]),content:s(Cq),defined:[],document:s(Aq),flow:s(GF),lazy:{},string:s(QF),text:s(JF)};return r;function s(a){return l;function l(u){return lV(r,a,u)}}}function hV(t){for(;!UT(t););return t}const yS=/[\0\t\n\r]/g;function dV(){let t=1,e="",n=!0,r;return s;function s(a,l,u){const f=[];let h,m,p,_,g;for(a=e+(typeof a=="string"?a.toString():new TextDecoder(l||void 0).decode(a)),p=0,e="",n&&(a.charCodeAt(0)===65279&&p++,n=void 0);p<a.length;){if(yS.lastIndex=p,h=yS.exec(a),_=h&&h.index!==void 0?h.index:a.length,g=a.charCodeAt(_),!h){e=a.slice(p);break}if(g===10&&p===_&&r)f.push(-3),r=void 0;else switch(r&&(f.push(-5),r=void 0),p<_&&(f.push(a.slice(p,_)),t+=_-p),g){case 0:{f.push(65533),t++;break}case 9:{for(m=Math.ceil(t/4)*4,f.push(-2);t++<m;)f.push(-1);break}case 10:{f.push(-4),t=1;break}default:r=!0,t=1}p=_+1}return u&&(r&&f.push(-5),e&&f.push(e),f.push(null)),f}}const pV=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function mV(t){return t.replace(pV,gV)}function gV(t,e,n){if(e)return e;if(n.charCodeAt(0)===35){const s=n.charCodeAt(1),a=s===120||s===88;return zT(n.slice(a?2:1),a?16:10)}return h0(n)||t}const GT={}.hasOwnProperty;function yV(t,e,n){return typeof e!="string"&&(n=e,e=void 0),_V(n)(hV(fV(n).document().write(dV()(t,e,!0))))}function _V(t){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:a(nn),autolinkProtocol:H,autolinkEmail:H,atxHeading:a(qe),blockQuote:a(nt),characterEscape:H,characterReference:H,codeFenced:a(at),codeFencedFenceInfo:l,codeFencedFenceMeta:l,codeIndented:a(at,l),codeText:a(At,l),codeTextData:H,data:H,codeFlowValue:H,definition:a(Ae),definitionDestinationString:l,definitionLabelString:l,definitionTitleString:l,emphasis:a(Xe),hardBreakEscape:a(Rt),hardBreakTrailing:a(Rt),htmlFlow:a(Zt,l),htmlFlowData:H,htmlText:a(Zt,l),htmlTextData:H,image:a(Et),label:l,link:a(nn),listItem:a(_e),listItemValue:_,listOrdered:a(xn,p),listUnordered:a(xn),paragraph:a(Pe),reference:R,referenceString:l,resourceDestinationString:l,resourceTitleString:l,setextHeading:a(qe),strong:a(Le),thematicBreak:a(Fe)},exit:{atxHeading:f(),atxHeadingSequence:D,autolink:f(),autolinkEmail:Ie,autolinkProtocol:Me,blockQuote:f(),characterEscapeValue:z,characterReferenceMarkerHexadecimal:pe,characterReferenceMarkerNumeric:pe,characterReferenceValue:me,characterReference:xe,codeFenced:f(k),codeFencedFence:x,codeFencedFenceInfo:g,codeFencedFenceMeta:v,codeFlowValue:z,codeIndented:f(S),codeText:f($),codeTextData:z,data:z,definition:f(),definitionDestinationString:L,definitionLabelString:T,definitionTitleString:C,emphasis:f(),hardBreakEscape:f(j),hardBreakTrailing:f(j),htmlFlow:f(se),htmlFlowData:z,htmlText:f(Z),htmlTextData:z,image:f(G),label:Y,labelText:re,lineEnding:Q,link:f(B),listItem:f(),listOrdered:f(),listUnordered:f(),paragraph:f(),referenceString:oe,resourceDestinationString:O,resourceTitleString:N,resource:F,setextHeading:f(V),setextHeadingLineSequence:P,setextHeadingText:I,strong:f(),thematicBreak:f()}};KT(e,(t||{}).mdastExtensions||[]);const n={};return r;function r(ne){let le={type:"root",children:[]};const ge={stack:[le],tokenStack:[],config:e,enter:u,exit:h,buffer:l,resume:m,data:n},ye=[];let Ee=-1;for(;++Ee<ne.length;)if(ne[Ee][1].type==="listOrdered"||ne[Ee][1].type==="listUnordered")if(ne[Ee][0]==="enter")ye.push(Ee);else{const Ke=ye.pop();Ee=s(ne,Ke,Ee)}for(Ee=-1;++Ee<ne.length;){const Ke=e[ne[Ee][0]];GT.call(Ke,ne[Ee][1].type)&&Ke[ne[Ee][1].type].call(Object.assign({sliceSerialize:ne[Ee][2].sliceSerialize},ge),ne[Ee][1])}if(ge.tokenStack.length>0){const Ke=ge.tokenStack[ge.tokenStack.length-1];(Ke[1]||_S).call(ge,void 0,Ke[0])}for(le.position={start:Gs(ne.length>0?ne[0][1].start:{line:1,column:1,offset:0}),end:Gs(ne.length>0?ne[ne.length-2][1].end:{line:1,column:1,offset:0})},Ee=-1;++Ee<e.transforms.length;)le=e.transforms[Ee](le)||le;return le}function s(ne,le,ge){let ye=le-1,Ee=-1,Ke=!1,Ot,Qt,xt,Rn;for(;++ye<=ge;){const dt=ne[ye];switch(dt[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{dt[0]==="enter"?Ee++:Ee--,Rn=void 0;break}case"lineEndingBlank":{dt[0]==="enter"&&(Ot&&!Rn&&!Ee&&!xt&&(xt=ye),Rn=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Rn=void 0}if(!Ee&&dt[0]==="enter"&&dt[1].type==="listItemPrefix"||Ee===-1&&dt[0]==="exit"&&(dt[1].type==="listUnordered"||dt[1].type==="listOrdered")){if(Ot){let _s=ye;for(Qt=void 0;_s--;){const Sr=ne[_s];if(Sr[1].type==="lineEnding"||Sr[1].type==="lineEndingBlank"){if(Sr[0]==="exit")continue;Qt&&(ne[Qt][1].type="lineEndingBlank",Ke=!0),Sr[1].type="lineEnding",Qt=_s}else if(!(Sr[1].type==="linePrefix"||Sr[1].type==="blockQuotePrefix"||Sr[1].type==="blockQuotePrefixWhitespace"||Sr[1].type==="blockQuoteMarker"||Sr[1].type==="listItemIndent"))break}xt&&(!Qt||xt<Qt)&&(Ot._spread=!0),Ot.end=Object.assign({},Qt?ne[Qt][1].start:dt[1].end),ne.splice(Qt||ye,0,["exit",Ot,dt[2]]),ye++,ge++}if(dt[1].type==="listItemPrefix"){const _s={type:"listItem",_spread:!1,start:Object.assign({},dt[1].start),end:void 0};Ot=_s,ne.splice(ye,0,["enter",_s,dt[2]]),ye++,ge++,xt=void 0,Rn=!0}}}return ne[le][1]._spread=Ke,ge}function a(ne,le){return ge;function ge(ye){u.call(this,ne(ye),ye),le&&le.call(this,ye)}}function l(){this.stack.push({type:"fragment",children:[]})}function u(ne,le,ge){this.stack[this.stack.length-1].children.push(ne),this.stack.push(ne),this.tokenStack.push([le,ge||void 0]),ne.position={start:Gs(le.start),end:void 0}}function f(ne){return le;function le(ge){ne&&ne.call(this,ge),h.call(this,ge)}}function h(ne,le){const ge=this.stack.pop(),ye=this.tokenStack.pop();if(ye)ye[0].type!==ne.type&&(le?le.call(this,ne,ye[0]):(ye[1]||_S).call(this,ne,ye[0]));else throw new Error("Cannot close `"+ne.type+"` ("+El({start:ne.start,end:ne.end})+"): its not open");ge.position.end=Gs(ne.end)}function m(){return f0(this.stack.pop())}function p(){this.data.expectingFirstListItemValue=!0}function _(ne){if(this.data.expectingFirstListItemValue){const le=this.stack[this.stack.length-2];le.start=Number.parseInt(this.sliceSerialize(ne),10),this.data.expectingFirstListItemValue=void 0}}function g(){const ne=this.resume(),le=this.stack[this.stack.length-1];le.lang=ne}function v(){const ne=this.resume(),le=this.stack[this.stack.length-1];le.meta=ne}function x(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function k(){const ne=this.resume(),le=this.stack[this.stack.length-1];le.value=ne.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function S(){const ne=this.resume(),le=this.stack[this.stack.length-1];le.value=ne.replace(/(\r?\n|\r)$/g,"")}function T(ne){const le=this.resume(),ge=this.stack[this.stack.length-1];ge.label=le,ge.identifier=Rr(this.sliceSerialize(ne)).toLowerCase()}function C(){const ne=this.resume(),le=this.stack[this.stack.length-1];le.title=ne}function L(){const ne=this.resume(),le=this.stack[this.stack.length-1];le.url=ne}function D(ne){const le=this.stack[this.stack.length-1];if(!le.depth){const ge=this.sliceSerialize(ne).length;le.depth=ge}}function I(){this.data.setextHeadingSlurpLineEnding=!0}function P(ne){const le=this.stack[this.stack.length-1];le.depth=this.sliceSerialize(ne).codePointAt(0)===61?1:2}function V(){this.data.setextHeadingSlurpLineEnding=void 0}function H(ne){const ge=this.stack[this.stack.length-1].children;let ye=ge[ge.length-1];(!ye||ye.type!=="text")&&(ye=ke(),ye.position={start:Gs(ne.start),end:void 0},ge.push(ye)),this.stack.push(ye)}function z(ne){const le=this.stack.pop();le.value+=this.sliceSerialize(ne),le.position.end=Gs(ne.end)}function Q(ne){const le=this.stack[this.stack.length-1];if(this.data.atHardBreak){const ge=le.children[le.children.length-1];ge.position.end=Gs(ne.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(le.type)&&(H.call(this,ne),z.call(this,ne))}function j(){this.data.atHardBreak=!0}function se(){const ne=this.resume(),le=this.stack[this.stack.length-1];le.value=ne}function Z(){const ne=this.resume(),le=this.stack[this.stack.length-1];le.value=ne}function $(){const ne=this.resume(),le=this.stack[this.stack.length-1];le.value=ne}function B(){const ne=this.stack[this.stack.length-1];if(this.data.inReference){const le=this.data.referenceType||"shortcut";ne.type+="Reference",ne.referenceType=le,delete ne.url,delete ne.title}else delete ne.identifier,delete ne.label;this.data.referenceType=void 0}function G(){const ne=this.stack[this.stack.length-1];if(this.data.inReference){const le=this.data.referenceType||"shortcut";ne.type+="Reference",ne.referenceType=le,delete ne.url,delete ne.title}else delete ne.identifier,delete ne.label;this.data.referenceType=void 0}function re(ne){const le=this.sliceSerialize(ne),ge=this.stack[this.stack.length-2];ge.label=mV(le),ge.identifier=Rr(le).toLowerCase()}function Y(){const ne=this.stack[this.stack.length-1],le=this.resume(),ge=this.stack[this.stack.length-1];if(this.data.inReference=!0,ge.type==="link"){const ye=ne.children;ge.children=ye}else ge.alt=le}function O(){const ne=this.resume(),le=this.stack[this.stack.length-1];le.url=ne}function N(){const ne=this.resume(),le=this.stack[this.stack.length-1];le.title=ne}function F(){this.data.inReference=void 0}function R(){this.data.referenceType="collapsed"}function oe(ne){const le=this.resume(),ge=this.stack[this.stack.length-1];ge.label=le,ge.identifier=Rr(this.sliceSerialize(ne)).toLowerCase(),this.data.referenceType="full"}function pe(ne){this.data.characterReferenceType=ne.type}function me(ne){const le=this.sliceSerialize(ne),ge=this.data.characterReferenceType;let ye;ge?(ye=zT(le,ge==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):ye=h0(le);const Ee=this.stack[this.stack.length-1];Ee.value+=ye}function xe(ne){const le=this.stack.pop();le.position.end=Gs(ne.end)}function Me(ne){z.call(this,ne);const le=this.stack[this.stack.length-1];le.url=this.sliceSerialize(ne)}function Ie(ne){z.call(this,ne);const le=this.stack[this.stack.length-1];le.url="mailto:"+this.sliceSerialize(ne)}function nt(){return{type:"blockquote",children:[]}}function at(){return{type:"code",lang:null,meta:null,value:""}}function At(){return{type:"inlineCode",value:""}}function Ae(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Xe(){return{type:"emphasis",children:[]}}function qe(){return{type:"heading",depth:0,children:[]}}function Rt(){return{type:"break"}}function Zt(){return{type:"html",value:""}}function Et(){return{type:"image",title:null,url:"",alt:null}}function nn(){return{type:"link",title:null,url:"",children:[]}}function xn(ne){return{type:"list",ordered:ne.type==="listOrdered",start:null,spread:ne._spread,children:[]}}function _e(ne){return{type:"listItem",spread:ne._spread,checked:null,children:[]}}function Pe(){return{type:"paragraph",children:[]}}function Le(){return{type:"strong",children:[]}}function ke(){return{type:"text",value:""}}function Fe(){return{type:"thematicBreak"}}}function Gs(t){return{line:t.line,column:t.column,offset:t.offset}}function KT(t,e){let n=-1;for(;++n<e.length;){const r=e[n];Array.isArray(r)?KT(t,r):bV(t,r)}}function bV(t,e){let n;for(n in e)if(GT.call(e,n))switch(n){case"canContainEols":{const r=e[n];r&&t[n].push(...r);break}case"transforms":{const r=e[n];r&&t[n].push(...r);break}case"enter":case"exit":{const r=e[n];r&&Object.assign(t[n],r);break}}}function _S(t,e){throw t?new Error("Cannot close `"+t.type+"` ("+El({start:t.start,end:t.end})+"): a different token (`"+e.type+"`, "+El({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+El({start:e.start,end:e.end})+") is still open")}function vV(t){const e=this;e.parser=n;function n(r){return yV(r,{...e.data("settings"),...t,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function xV(t,e){const n={type:"element",tagName:"blockquote",properties:{},children:t.wrap(t.all(e),!0)};return t.patch(e,n),t.applyData(e,n)}function wV(t,e){const n={type:"element",tagName:"br",properties:{},children:[]};return t.patch(e,n),[t.applyData(e,n),{type:"text",value:`
`}]}function SV(t,e){const n=e.value?e.value+`
`:"",r={},s=e.lang?e.lang.split(/\s+/):[];s.length>0&&(r.className=["language-"+s[0]]);let a={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return e.meta&&(a.data={meta:e.meta}),t.patch(e,a),a=t.applyData(e,a),a={type:"element",tagName:"pre",properties:{},children:[a]},t.patch(e,a),a}function kV(t,e){const n={type:"element",tagName:"del",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function EV(t,e){const n={type:"element",tagName:"em",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function CV(t,e){const n=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",r=String(e.identifier).toUpperCase(),s=eo(r.toLowerCase()),a=t.footnoteOrder.indexOf(r);let l,u=t.footnoteCounts.get(r);u===void 0?(u=0,t.footnoteOrder.push(r),l=t.footnoteOrder.length):l=a+1,u+=1,t.footnoteCounts.set(r,u);const f={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+s,id:n+"fnref-"+s+(u>1?"-"+u:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(l)}]};t.patch(e,f);const h={type:"element",tagName:"sup",properties:{},children:[f]};return t.patch(e,h),t.applyData(e,h)}function TV(t,e){const n={type:"element",tagName:"h"+e.depth,properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function AV(t,e){if(t.options.allowDangerousHtml){const n={type:"raw",value:e.value};return t.patch(e,n),t.applyData(e,n)}}function ZT(t,e){const n=e.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+r}];const s=t.all(e),a=s[0];a&&a.type==="text"?a.value="["+a.value:s.unshift({type:"text",value:"["});const l=s[s.length-1];return l&&l.type==="text"?l.value+=r:s.push({type:"text",value:r}),s}function RV(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return ZT(t,e);const s={src:eo(r.url||""),alt:e.alt};r.title!==null&&r.title!==void 0&&(s.title=r.title);const a={type:"element",tagName:"img",properties:s,children:[]};return t.patch(e,a),t.applyData(e,a)}function OV(t,e){const n={src:eo(e.url)};e.alt!==null&&e.alt!==void 0&&(n.alt=e.alt),e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"img",properties:n,children:[]};return t.patch(e,r),t.applyData(e,r)}function IV(t,e){const n={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};t.patch(e,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return t.patch(e,r),t.applyData(e,r)}function NV(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return ZT(t,e);const s={href:eo(r.url||"")};r.title!==null&&r.title!==void 0&&(s.title=r.title);const a={type:"element",tagName:"a",properties:s,children:t.all(e)};return t.patch(e,a),t.applyData(e,a)}function MV(t,e){const n={href:eo(e.url)};e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"a",properties:n,children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function DV(t,e,n){const r=t.all(e),s=n?LV(n):QT(e),a={},l=[];if(typeof e.checked=="boolean"){const m=r[0];let p;m&&m.type==="element"&&m.tagName==="p"?p=m:(p={type:"element",tagName:"p",properties:{},children:[]},r.unshift(p)),p.children.length>0&&p.children.unshift({type:"text",value:" "}),p.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),a.className=["task-list-item"]}let u=-1;for(;++u<r.length;){const m=r[u];(s||u!==0||m.type!=="element"||m.tagName!=="p")&&l.push({type:"text",value:`
`}),m.type==="element"&&m.tagName==="p"&&!s?l.push(...m.children):l.push(m)}const f=r[r.length-1];f&&(s||f.type!=="element"||f.tagName!=="p")&&l.push({type:"text",value:`
`});const h={type:"element",tagName:"li",properties:a,children:l};return t.patch(e,h),t.applyData(e,h)}function LV(t){let e=!1;if(t.type==="list"){e=t.spread||!1;const n=t.children;let r=-1;for(;!e&&++r<n.length;)e=QT(n[r])}return e}function QT(t){const e=t.spread;return e??t.children.length>1}function zV(t,e){const n={},r=t.all(e);let s=-1;for(typeof e.start=="number"&&e.start!==1&&(n.start=e.start);++s<r.length;){const l=r[s];if(l.type==="element"&&l.tagName==="li"&&l.properties&&Array.isArray(l.properties.className)&&l.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const a={type:"element",tagName:e.ordered?"ol":"ul",properties:n,children:t.wrap(r,!0)};return t.patch(e,a),t.applyData(e,a)}function jV(t,e){const n={type:"element",tagName:"p",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function PV(t,e){const n={type:"root",children:t.wrap(t.all(e))};return t.patch(e,n),t.applyData(e,n)}function BV(t,e){const n={type:"element",tagName:"strong",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function UV(t,e){const n=t.all(e),r=n.shift(),s=[];if(r){const l={type:"element",tagName:"thead",properties:{},children:t.wrap([r],!0)};t.patch(e.children[0],l),s.push(l)}if(n.length>0){const l={type:"element",tagName:"tbody",properties:{},children:t.wrap(n,!0)},u=o0(e.children[1]),f=AT(e.children[e.children.length-1]);u&&f&&(l.position={start:u,end:f}),s.push(l)}const a={type:"element",tagName:"table",properties:{},children:t.wrap(s,!0)};return t.patch(e,a),t.applyData(e,a)}function $V(t,e,n){const r=n?n.children:void 0,a=(r?r.indexOf(e):1)===0?"th":"td",l=n&&n.type==="table"?n.align:void 0,u=l?l.length:e.children.length;let f=-1;const h=[];for(;++f<u;){const p=e.children[f],_={},g=l?l[f]:void 0;g&&(_.align=g);let v={type:"element",tagName:a,properties:_,children:[]};p&&(v.children=t.all(p),t.patch(p,v),v=t.applyData(p,v)),h.push(v)}const m={type:"element",tagName:"tr",properties:{},children:t.wrap(h,!0)};return t.patch(e,m),t.applyData(e,m)}function qV(t,e){const n={type:"element",tagName:"td",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}const bS=9,vS=32;function FV(t){const e=String(t),n=/\r?\n|\r/g;let r=n.exec(e),s=0;const a=[];for(;r;)a.push(xS(e.slice(s,r.index),s>0,!0),r[0]),s=r.index+r[0].length,r=n.exec(e);return a.push(xS(e.slice(s),s>0,!1)),a.join("")}function xS(t,e,n){let r=0,s=t.length;if(e){let a=t.codePointAt(r);for(;a===bS||a===vS;)r++,a=t.codePointAt(r)}if(n){let a=t.codePointAt(s-1);for(;a===bS||a===vS;)s--,a=t.codePointAt(s-1)}return s>r?t.slice(r,s):""}function VV(t,e){const n={type:"text",value:FV(String(e.value))};return t.patch(e,n),t.applyData(e,n)}function HV(t,e){const n={type:"element",tagName:"hr",properties:{},children:[]};return t.patch(e,n),t.applyData(e,n)}const GV={blockquote:xV,break:wV,code:SV,delete:kV,emphasis:EV,footnoteReference:CV,heading:TV,html:AV,imageReference:RV,image:OV,inlineCode:IV,linkReference:NV,link:MV,listItem:DV,list:zV,paragraph:jV,root:PV,strong:BV,table:UV,tableCell:qV,tableRow:$V,text:VV,thematicBreak:HV,toml:zu,yaml:zu,definition:zu,footnoteDefinition:zu};function zu(){}const JT=-1,xh=0,Tl=1,Vf=2,p0=3,m0=4,g0=5,y0=6,YT=7,XT=8,wS=typeof self=="object"?self:globalThis,KV=(t,e)=>{const n=(s,a)=>(t.set(a,s),s),r=s=>{if(t.has(s))return t.get(s);const[a,l]=e[s];switch(a){case xh:case JT:return n(l,s);case Tl:{const u=n([],s);for(const f of l)u.push(r(f));return u}case Vf:{const u=n({},s);for(const[f,h]of l)u[r(f)]=r(h);return u}case p0:return n(new Date(l),s);case m0:{const{source:u,flags:f}=l;return n(new RegExp(u,f),s)}case g0:{const u=n(new Map,s);for(const[f,h]of l)u.set(r(f),r(h));return u}case y0:{const u=n(new Set,s);for(const f of l)u.add(r(f));return u}case YT:{const{name:u,message:f}=l;return n(new wS[u](f),s)}case XT:return n(BigInt(l),s);case"BigInt":return n(Object(BigInt(l)),s);case"ArrayBuffer":return n(new Uint8Array(l).buffer,l);case"DataView":{const{buffer:u}=new Uint8Array(l);return n(new DataView(u),l)}}return n(new wS[a](l),s)};return r},SS=t=>KV(new Map,t)(0),Ta="",{toString:ZV}={},{keys:QV}=Object,tl=t=>{const e=typeof t;if(e!=="object"||!t)return[xh,e];const n=ZV.call(t).slice(8,-1);switch(n){case"Array":return[Tl,Ta];case"Object":return[Vf,Ta];case"Date":return[p0,Ta];case"RegExp":return[m0,Ta];case"Map":return[g0,Ta];case"Set":return[y0,Ta];case"DataView":return[Tl,n]}return n.includes("Array")?[Tl,n]:n.includes("Error")?[YT,n]:[Vf,n]},ju=([t,e])=>t===xh&&(e==="function"||e==="symbol"),JV=(t,e,n,r)=>{const s=(l,u)=>{const f=r.push(l)-1;return n.set(u,f),f},a=l=>{if(n.has(l))return n.get(l);let[u,f]=tl(l);switch(u){case xh:{let m=l;switch(f){case"bigint":u=XT,m=l.toString();break;case"function":case"symbol":if(t)throw new TypeError("unable to serialize "+f);m=null;break;case"undefined":return s([JT],l)}return s([u,m],l)}case Tl:{if(f){let _=l;return f==="DataView"?_=new Uint8Array(l.buffer):f==="ArrayBuffer"&&(_=new Uint8Array(l)),s([f,[..._]],l)}const m=[],p=s([u,m],l);for(const _ of l)m.push(a(_));return p}case Vf:{if(f)switch(f){case"BigInt":return s([f,l.toString()],l);case"Boolean":case"Number":case"String":return s([f,l.valueOf()],l)}if(e&&"toJSON"in l)return a(l.toJSON());const m=[],p=s([u,m],l);for(const _ of QV(l))(t||!ju(tl(l[_])))&&m.push([a(_),a(l[_])]);return p}case p0:return s([u,l.toISOString()],l);case m0:{const{source:m,flags:p}=l;return s([u,{source:m,flags:p}],l)}case g0:{const m=[],p=s([u,m],l);for(const[_,g]of l)(t||!(ju(tl(_))||ju(tl(g))))&&m.push([a(_),a(g)]);return p}case y0:{const m=[],p=s([u,m],l);for(const _ of l)(t||!ju(tl(_)))&&m.push(a(_));return p}}const{message:h}=l;return s([u,{name:f,message:h}],l)};return a},kS=(t,{json:e,lossy:n}={})=>{const r=[];return JV(!(e||n),!!e,new Map,r)(t),r},Hf=typeof structuredClone=="function"?(t,e)=>e&&("json"in e||"lossy"in e)?SS(kS(t,e)):structuredClone(t):(t,e)=>SS(kS(t,e));function YV(t,e){const n=[{type:"text",value:""}];return e>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),n}function XV(t,e){return"Back to reference "+(t+1)+(e>1?"-"+e:"")}function WV(t){const e=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",n=t.options.footnoteBackContent||YV,r=t.options.footnoteBackLabel||XV,s=t.options.footnoteLabel||"Footnotes",a=t.options.footnoteLabelTagName||"h2",l=t.options.footnoteLabelProperties||{className:["sr-only"]},u=[];let f=-1;for(;++f<t.footnoteOrder.length;){const h=t.footnoteById.get(t.footnoteOrder[f]);if(!h)continue;const m=t.all(h),p=String(h.identifier).toUpperCase(),_=eo(p.toLowerCase());let g=0;const v=[],x=t.footnoteCounts.get(p);for(;x!==void 0&&++g<=x;){v.length>0&&v.push({type:"text",value:" "});let T=typeof n=="string"?n:n(f,g);typeof T=="string"&&(T={type:"text",value:T}),v.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+_+(g>1?"-"+g:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(f,g),className:["data-footnote-backref"]},children:Array.isArray(T)?T:[T]})}const k=m[m.length-1];if(k&&k.type==="element"&&k.tagName==="p"){const T=k.children[k.children.length-1];T&&T.type==="text"?T.value+=" ":k.children.push({type:"text",value:" "}),k.children.push(...v)}else m.push(...v);const S={type:"element",tagName:"li",properties:{id:e+"fn-"+_},children:t.wrap(m,!0)};t.patch(h,S),u.push(S)}if(u.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:a,properties:{...Hf(l),id:"footnote-label"},children:[{type:"text",value:s}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:t.wrap(u,!0)},{type:"text",value:`
`}]}}const wh=(function(t){if(t==null)return r7;if(typeof t=="function")return Sh(t);if(typeof t=="object")return Array.isArray(t)?e7(t):t7(t);if(typeof t=="string")return n7(t);throw new Error("Expected function, string, or object as test")});function e7(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=wh(t[n]);return Sh(r);function r(...s){let a=-1;for(;++a<e.length;)if(e[a].apply(this,s))return!0;return!1}}function t7(t){const e=t;return Sh(n);function n(r){const s=r;let a;for(a in t)if(s[a]!==e[a])return!1;return!0}}function n7(t){return Sh(e);function e(n){return n&&n.type===t}}function Sh(t){return e;function e(n,r,s){return!!(s7(n)&&t.call(this,n,typeof r=="number"?r:void 0,s||void 0))}}function r7(){return!0}function s7(t){return t!==null&&typeof t=="object"&&"type"in t}const WT=[],i7=!0,Fg=!1,a7="skip";function eA(t,e,n,r){let s;typeof e=="function"&&typeof n!="function"?(r=n,n=e):s=e;const a=wh(s),l=r?-1:1;u(t,void 0,[])();function u(f,h,m){const p=f&&typeof f=="object"?f:{};if(typeof p.type=="string"){const g=typeof p.tagName=="string"?p.tagName:typeof p.name=="string"?p.name:void 0;Object.defineProperty(_,"name",{value:"node ("+(f.type+(g?"<"+g+">":""))+")"})}return _;function _(){let g=WT,v,x,k;if((!e||a(f,h,m[m.length-1]||void 0))&&(g=o7(n(f,m)),g[0]===Fg))return g;if("children"in f&&f.children){const S=f;if(S.children&&g[0]!==a7)for(x=(r?S.children.length:-1)+l,k=m.concat(S);x>-1&&x<S.children.length;){const T=S.children[x];if(v=u(T,x,k)(),v[0]===Fg)return v;x=typeof v[1]=="number"?v[1]:x+l}}return g}}}function o7(t){return Array.isArray(t)?t:typeof t=="number"?[i7,t]:t==null?WT:[t]}function _0(t,e,n,r){let s,a,l;typeof e=="function"&&typeof n!="function"?(a=void 0,l=e,s=n):(a=e,l=n,s=r),eA(t,a,u,s);function u(f,h){const m=h[h.length-1],p=m?m.children.indexOf(f):void 0;return l(f,p,m)}}const Vg={}.hasOwnProperty,l7={};function c7(t,e){const n=e||l7,r=new Map,s=new Map,a=new Map,l={...GV,...n.handlers},u={all:h,applyData:f7,definitionById:r,footnoteById:s,footnoteCounts:a,footnoteOrder:[],handlers:l,one:f,options:n,patch:u7,wrap:d7};return _0(t,function(m){if(m.type==="definition"||m.type==="footnoteDefinition"){const p=m.type==="definition"?r:s,_=String(m.identifier).toUpperCase();p.has(_)||p.set(_,m)}}),u;function f(m,p){const _=m.type,g=u.handlers[_];if(Vg.call(u.handlers,_)&&g)return g(u,m,p);if(u.options.passThrough&&u.options.passThrough.includes(_)){if("children"in m){const{children:x,...k}=m,S=Hf(k);return S.children=u.all(m),S}return Hf(m)}return(u.options.unknownHandler||h7)(u,m,p)}function h(m){const p=[];if("children"in m){const _=m.children;let g=-1;for(;++g<_.length;){const v=u.one(_[g],m);if(v){if(g&&_[g-1].type==="break"&&(!Array.isArray(v)&&v.type==="text"&&(v.value=ES(v.value)),!Array.isArray(v)&&v.type==="element")){const x=v.children[0];x&&x.type==="text"&&(x.value=ES(x.value))}Array.isArray(v)?p.push(...v):p.push(v)}}}return p}}function u7(t,e){t.position&&(e.position=X9(t))}function f7(t,e){let n=e;if(t&&t.data){const r=t.data.hName,s=t.data.hChildren,a=t.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const l="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:l}}n.type==="element"&&a&&Object.assign(n.properties,Hf(a)),"children"in n&&n.children&&s!==null&&s!==void 0&&(n.children=s)}return n}function h7(t,e){const n=e.data||{},r="value"in e&&!(Vg.call(n,"hProperties")||Vg.call(n,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function d7(t,e){const n=[];let r=-1;for(e&&n.push({type:"text",value:`
`});++r<t.length;)r&&n.push({type:"text",value:`
`}),n.push(t[r]);return e&&t.length>0&&n.push({type:"text",value:`
`}),n}function ES(t){let e=0,n=t.charCodeAt(e);for(;n===9||n===32;)e++,n=t.charCodeAt(e);return t.slice(e)}function CS(t,e){const n=c7(t,e),r=n.one(t,void 0),s=WV(n),a=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return s&&a.children.push({type:"text",value:`
`},s),a}function p7(t,e){return t&&"run"in t?async function(n,r){const s=CS(n,{file:r,...e});await t.run(s,r)}:function(n,r){return CS(n,{file:r,...t||e})}}function TS(t){if(t)throw t}var Sm,AS;function m7(){if(AS)return Sm;AS=1;var t=Object.prototype.hasOwnProperty,e=Object.prototype.toString,n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,s=function(h){return typeof Array.isArray=="function"?Array.isArray(h):e.call(h)==="[object Array]"},a=function(h){if(!h||e.call(h)!=="[object Object]")return!1;var m=t.call(h,"constructor"),p=h.constructor&&h.constructor.prototype&&t.call(h.constructor.prototype,"isPrototypeOf");if(h.constructor&&!m&&!p)return!1;var _;for(_ in h);return typeof _>"u"||t.call(h,_)},l=function(h,m){n&&m.name==="__proto__"?n(h,m.name,{enumerable:!0,configurable:!0,value:m.newValue,writable:!0}):h[m.name]=m.newValue},u=function(h,m){if(m==="__proto__")if(t.call(h,m)){if(r)return r(h,m).value}else return;return h[m]};return Sm=function f(){var h,m,p,_,g,v,x=arguments[0],k=1,S=arguments.length,T=!1;for(typeof x=="boolean"&&(T=x,x=arguments[1]||{},k=2),(x==null||typeof x!="object"&&typeof x!="function")&&(x={});k<S;++k)if(h=arguments[k],h!=null)for(m in h)p=u(x,m),_=u(h,m),x!==_&&(T&&_&&(a(_)||(g=s(_)))?(g?(g=!1,v=p&&s(p)?p:[]):v=p&&a(p)?p:{},l(x,{name:m,newValue:f(T,v,_)})):typeof _<"u"&&l(x,{name:m,newValue:_}));return x},Sm}var g7=m7();const km=US(g7);function Hg(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function y7(){const t=[],e={run:n,use:r};return e;function n(...s){let a=-1;const l=s.pop();if(typeof l!="function")throw new TypeError("Expected function as last argument, not "+l);u(null,...s);function u(f,...h){const m=t[++a];let p=-1;if(f){l(f);return}for(;++p<s.length;)(h[p]===null||h[p]===void 0)&&(h[p]=s[p]);s=h,m?_7(m,u)(...h):l(null,...h)}}function r(s){if(typeof s!="function")throw new TypeError("Expected `middelware` to be a function, not "+s);return t.push(s),e}}function _7(t,e){let n;return r;function r(...l){const u=t.length>l.length;let f;u&&l.push(s);try{f=t.apply(this,l)}catch(h){const m=h;if(u&&n)throw m;return s(m)}u||(f&&f.then&&typeof f.then=="function"?f.then(a,s):f instanceof Error?s(f):a(f))}function s(l,...u){n||(n=!0,e(l,...u))}function a(l){s(null,l)}}const Pr={basename:b7,dirname:v7,extname:x7,join:w7,sep:"/"};function b7(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');tc(t);let n=0,r=-1,s=t.length,a;if(e===void 0||e.length===0||e.length>t.length){for(;s--;)if(t.codePointAt(s)===47){if(a){n=s+1;break}}else r<0&&(a=!0,r=s+1);return r<0?"":t.slice(n,r)}if(e===t)return"";let l=-1,u=e.length-1;for(;s--;)if(t.codePointAt(s)===47){if(a){n=s+1;break}}else l<0&&(a=!0,l=s+1),u>-1&&(t.codePointAt(s)===e.codePointAt(u--)?u<0&&(r=s):(u=-1,r=l));return n===r?r=l:r<0&&(r=t.length),t.slice(n,r)}function v7(t){if(tc(t),t.length===0)return".";let e=-1,n=t.length,r;for(;--n;)if(t.codePointAt(n)===47){if(r){e=n;break}}else r||(r=!0);return e<0?t.codePointAt(0)===47?"/":".":e===1&&t.codePointAt(0)===47?"//":t.slice(0,e)}function x7(t){tc(t);let e=t.length,n=-1,r=0,s=-1,a=0,l;for(;e--;){const u=t.codePointAt(e);if(u===47){if(l){r=e+1;break}continue}n<0&&(l=!0,n=e+1),u===46?s<0?s=e:a!==1&&(a=1):s>-1&&(a=-1)}return s<0||n<0||a===0||a===1&&s===n-1&&s===r+1?"":t.slice(s,n)}function w7(...t){let e=-1,n;for(;++e<t.length;)tc(t[e]),t[e]&&(n=n===void 0?t[e]:n+"/"+t[e]);return n===void 0?".":S7(n)}function S7(t){tc(t);const e=t.codePointAt(0)===47;let n=k7(t,!e);return n.length===0&&!e&&(n="."),n.length>0&&t.codePointAt(t.length-1)===47&&(n+="/"),e?"/"+n:n}function k7(t,e){let n="",r=0,s=-1,a=0,l=-1,u,f;for(;++l<=t.length;){if(l<t.length)u=t.codePointAt(l);else{if(u===47)break;u=47}if(u===47){if(!(s===l-1||a===1))if(s!==l-1&&a===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(f=n.lastIndexOf("/"),f!==n.length-1){f<0?(n="",r=0):(n=n.slice(0,f),r=n.length-1-n.lastIndexOf("/")),s=l,a=0;continue}}else if(n.length>0){n="",r=0,s=l,a=0;continue}}e&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+t.slice(s+1,l):n=t.slice(s+1,l),r=l-s-1;s=l,a=0}else u===46&&a>-1?a++:a=-1}return n}function tc(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const E7={cwd:C7};function C7(){return"/"}function Gg(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function T7(t){if(typeof t=="string")t=new URL(t);else if(!Gg(t)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(t.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return A7(t)}function A7(t){if(t.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const e=t.pathname;let n=-1;for(;++n<e.length;)if(e.codePointAt(n)===37&&e.codePointAt(n+1)===50){const r=e.codePointAt(n+2);if(r===70||r===102){const s=new TypeError("File URL path must not include encoded / characters");throw s.code="ERR_INVALID_FILE_URL_PATH",s}}return decodeURIComponent(e)}const Em=["history","path","basename","stem","extname","dirname"];class tA{constructor(e){let n;e?Gg(e)?n={path:e}:typeof e=="string"||R7(e)?n={value:e}:n=e:n={},this.cwd="cwd"in n?"":E7.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<Em.length;){const a=Em[r];a in n&&n[a]!==void 0&&n[a]!==null&&(this[a]=a==="history"?[...n[a]]:n[a])}let s;for(s in n)Em.includes(s)||(this[s]=n[s])}get basename(){return typeof this.path=="string"?Pr.basename(this.path):void 0}set basename(e){Tm(e,"basename"),Cm(e,"basename"),this.path=Pr.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?Pr.dirname(this.path):void 0}set dirname(e){RS(this.basename,"dirname"),this.path=Pr.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?Pr.extname(this.path):void 0}set extname(e){if(Cm(e,"extname"),RS(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Pr.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){Gg(e)&&(e=T7(e)),Tm(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?Pr.basename(this.path,this.extname):void 0}set stem(e){Tm(e,"stem"),Cm(e,"stem"),this.path=Pr.join(this.dirname||"",e+(this.extname||""))}fail(e,n,r){const s=this.message(e,n,r);throw s.fatal=!0,s}info(e,n,r){const s=this.message(e,n,r);return s.fatal=void 0,s}message(e,n,r){const s=new vn(e,n,r);return this.path&&(s.name=this.path+":"+s.name,s.file=this.path),s.fatal=!1,this.messages.push(s),s}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function Cm(t,e){if(t&&t.includes(Pr.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+Pr.sep+"`")}function Tm(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}function RS(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}function R7(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const O7=(function(t){const r=this.constructor.prototype,s=r[t],a=function(){return s.apply(a,arguments)};return Object.setPrototypeOf(a,r),a}),I7={}.hasOwnProperty;class b0 extends O7{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=y7()}copy(){const e=new b0;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];e.use(...r)}return e.data(km(!0,{},this.namespace)),e}data(e,n){return typeof e=="string"?arguments.length===2?(Om("data",this.frozen),this.namespace[e]=n,this):I7.call(this.namespace,e)&&this.namespace[e]||void 0:e?(Om("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const s=n.call(e,...r);typeof s=="function"&&this.transformers.use(s)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const n=Pu(e),r=this.parser||this.Parser;return Am("parse",r),r(String(n),n)}process(e,n){const r=this;return this.freeze(),Am("process",this.parser||this.Parser),Rm("process",this.compiler||this.Compiler),n?s(void 0,n):new Promise(s);function s(a,l){const u=Pu(e),f=r.parse(u);r.run(f,u,function(m,p,_){if(m||!p||!_)return h(m);const g=p,v=r.stringify(g,_);D7(v)?_.value=v:_.result=v,h(m,_)});function h(m,p){m||!p?l(m):a?a(p):n(void 0,p)}}}processSync(e){let n=!1,r;return this.freeze(),Am("processSync",this.parser||this.Parser),Rm("processSync",this.compiler||this.Compiler),this.process(e,s),IS("processSync","process",n),r;function s(a,l){n=!0,TS(a),r=l}}run(e,n,r){OS(e),this.freeze();const s=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?a(void 0,r):new Promise(a);function a(l,u){const f=Pu(n);s.run(e,f,h);function h(m,p,_){const g=p||e;m?u(m):l?l(g):r(void 0,g,_)}}}runSync(e,n){let r=!1,s;return this.run(e,n,a),IS("runSync","run",r),s;function a(l,u){TS(l),s=u,r=!0}}stringify(e,n){this.freeze();const r=Pu(n),s=this.compiler||this.Compiler;return Rm("stringify",s),OS(e),s(e,r)}use(e,...n){const r=this.attachers,s=this.namespace;if(Om("use",this.frozen),e!=null)if(typeof e=="function")f(e,n);else if(typeof e=="object")Array.isArray(e)?u(e):l(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function a(h){if(typeof h=="function")f(h,[]);else if(typeof h=="object")if(Array.isArray(h)){const[m,...p]=h;f(m,p)}else l(h);else throw new TypeError("Expected usable value, not `"+h+"`")}function l(h){if(!("plugins"in h)&&!("settings"in h))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");u(h.plugins),h.settings&&(s.settings=km(!0,s.settings,h.settings))}function u(h){let m=-1;if(h!=null)if(Array.isArray(h))for(;++m<h.length;){const p=h[m];a(p)}else throw new TypeError("Expected a list of plugins, not `"+h+"`")}function f(h,m){let p=-1,_=-1;for(;++p<r.length;)if(r[p][0]===h){_=p;break}if(_===-1)r.push([h,...m]);else if(m.length>0){let[g,...v]=m;const x=r[_][1];Hg(x)&&Hg(g)&&(g=km(!0,x,g)),r[_]=[h,g,...v]}}}}const N7=new b0().freeze();function Am(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `parser`")}function Rm(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `compiler`")}function Om(t,e){if(e)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function OS(t){if(!Hg(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}function IS(t,e,n){if(!n)throw new Error("`"+t+"` finished async. Use `"+e+"` instead")}function Pu(t){return M7(t)?t:new tA(t)}function M7(t){return!!(t&&typeof t=="object"&&"message"in t&&"messages"in t)}function D7(t){return typeof t=="string"||L7(t)}function L7(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const z7="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",NS=[],MS={allowDangerousHtml:!0},j7=/^(https?|ircs?|mailto|xmpp)$/i,P7=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function B7(t){const e=U7(t),n=$7(t);return q7(e.runSync(e.parse(n),n),t)}function U7(t){const e=t.rehypePlugins||NS,n=t.remarkPlugins||NS,r=t.remarkRehypeOptions?{...t.remarkRehypeOptions,...MS}:MS;return N7().use(vV).use(n).use(p7,r).use(e)}function $7(t){const e=t.children||"",n=new tA;return typeof e=="string"&&(n.value=e),n}function q7(t,e){const n=e.allowedElements,r=e.allowElement,s=e.components,a=e.disallowedElements,l=e.skipHtml,u=e.unwrapDisallowed,f=e.urlTransform||F7;for(const m of P7)Object.hasOwn(e,m.from)&&(""+m.from+(m.to?"use `"+m.to+"` instead":"remove it")+z7+m.id,void 0);return _0(t,h),rq(t,{Fragment:E.Fragment,components:s,ignoreInvalidStyle:!0,jsx:E.jsx,jsxs:E.jsxs,passKeys:!0,passNode:!0});function h(m,p,_){if(m.type==="raw"&&_&&typeof p=="number")return l?_.children.splice(p,1):_.children[p]={type:"text",value:m.value},p;if(m.type==="element"){let g;for(g in vm)if(Object.hasOwn(vm,g)&&Object.hasOwn(m.properties,g)){const v=m.properties[g],x=vm[g];(x===null||x.includes(m.tagName))&&(m.properties[g]=f(String(v||""),g,m))}}if(m.type==="element"){let g=n?!n.includes(m.tagName):a?a.includes(m.tagName):!1;if(!g&&r&&typeof p=="number"&&(g=!r(m,p,_)),g&&_&&typeof p=="number")return u&&m.children?_.children.splice(p,1,...m.children):_.children.splice(p,1),p}}}function F7(t){const e=t.indexOf(":"),n=t.indexOf("?"),r=t.indexOf("#"),s=t.indexOf("/");return e===-1||s!==-1&&e>s||n!==-1&&e>n||r!==-1&&e>r||j7.test(t.slice(0,e))?t:""}function V7(t){if(typeof t!="string")throw new TypeError("Expected a string");return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function nA(t,e,n){const s=wh((n||{}).ignore||[]),a=H7(e);let l=-1;for(;++l<a.length;)eA(t,"text",u);function u(h,m){let p=-1,_;for(;++p<m.length;){const g=m[p],v=_?_.children:void 0;if(s(g,v?v.indexOf(g):void 0,_))return;_=g}if(_)return f(h,m)}function f(h,m){const p=m[m.length-1],_=a[l][0],g=a[l][1];let v=0;const k=p.children.indexOf(h);let S=!1,T=[];_.lastIndex=0;let C=_.exec(h.value);for(;C;){const L=C.index,D={index:C.index,input:C.input,stack:[...m,h]};let I=g(...C,D);if(typeof I=="string"&&(I=I.length>0?{type:"text",value:I}:void 0),I===!1?_.lastIndex=L+1:(v!==L&&T.push({type:"text",value:h.value.slice(v,L)}),Array.isArray(I)?T.push(...I):I&&T.push(I),v=L+C[0].length,S=!0),!_.global)break;C=_.exec(h.value)}return S?(v<h.value.length&&T.push({type:"text",value:h.value.slice(v)}),p.children.splice(k,1,...T)):T=[h],k+T.length}}function H7(t){const e=[];if(!Array.isArray(t))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!t[0]||Array.isArray(t[0])?t:[t];let r=-1;for(;++r<n.length;){const s=n[r];e.push([G7(s[0]),K7(s[1])])}return e}function G7(t){return typeof t=="string"?new RegExp(V7(t),"g"):t}function K7(t){return typeof t=="function"?t:function(){return t}}const Im="phrasing",Nm=["autolink","link","image","label"];function Z7(){return{transforms:[tH],enter:{literalAutolink:J7,literalAutolinkEmail:Mm,literalAutolinkHttp:Mm,literalAutolinkWww:Mm},exit:{literalAutolink:eH,literalAutolinkEmail:W7,literalAutolinkHttp:Y7,literalAutolinkWww:X7}}}function Q7(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:Im,notInConstruct:Nm},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:Im,notInConstruct:Nm},{character:":",before:"[ps]",after:"\\/",inConstruct:Im,notInConstruct:Nm}]}}function J7(t){this.enter({type:"link",title:null,url:"",children:[]},t)}function Mm(t){this.config.enter.autolinkProtocol.call(this,t)}function Y7(t){this.config.exit.autolinkProtocol.call(this,t)}function X7(t){this.config.exit.data.call(this,t);const e=this.stack[this.stack.length-1];e.type,e.url="http://"+this.sliceSerialize(t)}function W7(t){this.config.exit.autolinkEmail.call(this,t)}function eH(t){this.exit(t)}function tH(t){nA(t,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,nH],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),rH]],{ignore:["link","linkReference"]})}function nH(t,e,n,r,s){let a="";if(!rA(s)||(/^w/i.test(e)&&(n=e+n,e="",a="http://"),!sH(n)))return!1;const l=iH(n+r);if(!l[0])return!1;const u={type:"link",title:null,url:a+e+l[0],children:[{type:"text",value:e+l[0]}]};return l[1]?[u,{type:"text",value:l[1]}]:u}function rH(t,e,n,r){return!rA(r,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+e+"@"+n,children:[{type:"text",value:e+"@"+n}]}}function sH(t){const e=t.split(".");return!(e.length<2||e[e.length-1]&&(/_/.test(e[e.length-1])||!/[a-zA-Z\d]/.test(e[e.length-1]))||e[e.length-2]&&(/_/.test(e[e.length-2])||!/[a-zA-Z\d]/.test(e[e.length-2])))}function iH(t){const e=/[!"&'),.:;<>?\]}]+$/.exec(t);if(!e)return[t,void 0];t=t.slice(0,e.index);let n=e[0],r=n.indexOf(")");const s=Sf(t,"(");let a=Sf(t,")");for(;r!==-1&&s>a;)t+=n.slice(0,r+1),n=n.slice(r+1),r=n.indexOf(")"),a++;return[t,n]}function rA(t,e){const n=t.input.charCodeAt(t.index-1);return(t.index===0||Di(n)||bh(n))&&(!e||n!==47)}sA.peek=pH;function aH(){this.buffer()}function oH(t){this.enter({type:"footnoteReference",identifier:"",label:""},t)}function lH(){this.buffer()}function cH(t){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},t)}function uH(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Rr(this.sliceSerialize(t)).toLowerCase(),n.label=e}function fH(t){this.exit(t)}function hH(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Rr(this.sliceSerialize(t)).toLowerCase(),n.label=e}function dH(t){this.exit(t)}function pH(){return"["}function sA(t,e,n,r){const s=n.createTracker(r);let a=s.move("[^");const l=n.enter("footnoteReference"),u=n.enter("reference");return a+=s.move(n.safe(n.associationId(t),{after:"]",before:a})),u(),l(),a+=s.move("]"),a}function mH(){return{enter:{gfmFootnoteCallString:aH,gfmFootnoteCall:oH,gfmFootnoteDefinitionLabelString:lH,gfmFootnoteDefinition:cH},exit:{gfmFootnoteCallString:uH,gfmFootnoteCall:fH,gfmFootnoteDefinitionLabelString:hH,gfmFootnoteDefinition:dH}}}function gH(t){let e=!1;return t&&t.firstLineBlank&&(e=!0),{handlers:{footnoteDefinition:n,footnoteReference:sA},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(r,s,a,l){const u=a.createTracker(l);let f=u.move("[^");const h=a.enter("footnoteDefinition"),m=a.enter("label");return f+=u.move(a.safe(a.associationId(r),{before:f,after:"]"})),m(),f+=u.move("]:"),r.children&&r.children.length>0&&(u.shift(4),f+=u.move((e?`
`:" ")+a.indentLines(a.containerFlow(r,u.current()),e?iA:yH))),h(),f}}function yH(t,e,n){return e===0?t:iA(t,e,n)}function iA(t,e,n){return(n?"":"    ")+t}const _H=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];aA.peek=SH;function bH(){return{canContainEols:["delete"],enter:{strikethrough:xH},exit:{strikethrough:wH}}}function vH(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:_H}],handlers:{delete:aA}}}function xH(t){this.enter({type:"delete",children:[]},t)}function wH(t){this.exit(t)}function aA(t,e,n,r){const s=n.createTracker(r),a=n.enter("strikethrough");let l=s.move("~~");return l+=n.containerPhrasing(t,{...s.current(),before:l,after:"~"}),l+=s.move("~~"),a(),l}function SH(){return"~"}function kH(t){return t.length}function EH(t,e){const n=e||{},r=(n.align||[]).concat(),s=n.stringLength||kH,a=[],l=[],u=[],f=[];let h=0,m=-1;for(;++m<t.length;){const x=[],k=[];let S=-1;for(t[m].length>h&&(h=t[m].length);++S<t[m].length;){const T=CH(t[m][S]);if(n.alignDelimiters!==!1){const C=s(T);k[S]=C,(f[S]===void 0||C>f[S])&&(f[S]=C)}x.push(T)}l[m]=x,u[m]=k}let p=-1;if(typeof r=="object"&&"length"in r)for(;++p<h;)a[p]=DS(r[p]);else{const x=DS(r);for(;++p<h;)a[p]=x}p=-1;const _=[],g=[];for(;++p<h;){const x=a[p];let k="",S="";x===99?(k=":",S=":"):x===108?k=":":x===114&&(S=":");let T=n.alignDelimiters===!1?1:Math.max(1,f[p]-k.length-S.length);const C=k+"-".repeat(T)+S;n.alignDelimiters!==!1&&(T=k.length+T+S.length,T>f[p]&&(f[p]=T),g[p]=T),_[p]=C}l.splice(1,0,_),u.splice(1,0,g),m=-1;const v=[];for(;++m<l.length;){const x=l[m],k=u[m];p=-1;const S=[];for(;++p<h;){const T=x[p]||"";let C="",L="";if(n.alignDelimiters!==!1){const D=f[p]-(k[p]||0),I=a[p];I===114?C=" ".repeat(D):I===99?D%2?(C=" ".repeat(D/2+.5),L=" ".repeat(D/2-.5)):(C=" ".repeat(D/2),L=C):L=" ".repeat(D)}n.delimiterStart!==!1&&!p&&S.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&T==="")&&(n.delimiterStart!==!1||p)&&S.push(" "),n.alignDelimiters!==!1&&S.push(C),S.push(T),n.alignDelimiters!==!1&&S.push(L),n.padding!==!1&&S.push(" "),(n.delimiterEnd!==!1||p!==h-1)&&S.push("|")}v.push(n.delimiterEnd===!1?S.join("").replace(/ +$/,""):S.join(""))}return v.join(`
`)}function CH(t){return t==null?"":String(t)}function DS(t){const e=typeof t=="string"?t.codePointAt(0):0;return e===67||e===99?99:e===76||e===108?108:e===82||e===114?114:0}function TH(t,e,n,r){const s=n.enter("blockquote"),a=n.createTracker(r);a.move("> "),a.shift(2);const l=n.indentLines(n.containerFlow(t,a.current()),AH);return s(),l}function AH(t,e,n){return">"+(n?"":" ")+t}function RH(t,e){return LS(t,e.inConstruct,!0)&&!LS(t,e.notInConstruct,!1)}function LS(t,e,n){if(typeof e=="string"&&(e=[e]),!e||e.length===0)return n;let r=-1;for(;++r<e.length;)if(t.includes(e[r]))return!0;return!1}function zS(t,e,n,r){let s=-1;for(;++s<n.unsafe.length;)if(n.unsafe[s].character===`
`&&RH(n.stack,n.unsafe[s]))return/[ \t]/.test(r.before)?"":" ";return`\\
`}function OH(t,e){const n=String(t);let r=n.indexOf(e),s=r,a=0,l=0;if(typeof e!="string")throw new TypeError("Expected substring");for(;r!==-1;)r===s?++a>l&&(l=a):a=1,s=r+e.length,r=n.indexOf(e,s);return l}function IH(t,e){return!!(e.options.fences===!1&&t.value&&!t.lang&&/[^ \r\n]/.test(t.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(t.value))}function NH(t){const e=t.options.fence||"`";if(e!=="`"&&e!=="~")throw new Error("Cannot serialize code with `"+e+"` for `options.fence`, expected `` ` `` or `~`");return e}function MH(t,e,n,r){const s=NH(n),a=t.value||"",l=s==="`"?"GraveAccent":"Tilde";if(IH(t,n)){const p=n.enter("codeIndented"),_=n.indentLines(a,DH);return p(),_}const u=n.createTracker(r),f=s.repeat(Math.max(OH(a,s)+1,3)),h=n.enter("codeFenced");let m=u.move(f);if(t.lang){const p=n.enter(`codeFencedLang${l}`);m+=u.move(n.safe(t.lang,{before:m,after:" ",encode:["`"],...u.current()})),p()}if(t.lang&&t.meta){const p=n.enter(`codeFencedMeta${l}`);m+=u.move(" "),m+=u.move(n.safe(t.meta,{before:m,after:`
`,encode:["`"],...u.current()})),p()}return m+=u.move(`
`),a&&(m+=u.move(a+`
`)),m+=u.move(f),h(),m}function DH(t,e,n){return(n?"":"    ")+t}function v0(t){const e=t.options.quote||'"';if(e!=='"'&&e!=="'")throw new Error("Cannot serialize title with `"+e+"` for `options.quote`, expected `\"`, or `'`");return e}function LH(t,e,n,r){const s=v0(n),a=s==='"'?"Quote":"Apostrophe",l=n.enter("definition");let u=n.enter("label");const f=n.createTracker(r);let h=f.move("[");return h+=f.move(n.safe(n.associationId(t),{before:h,after:"]",...f.current()})),h+=f.move("]: "),u(),!t.url||/[\0- \u007F]/.test(t.url)?(u=n.enter("destinationLiteral"),h+=f.move("<"),h+=f.move(n.safe(t.url,{before:h,after:">",...f.current()})),h+=f.move(">")):(u=n.enter("destinationRaw"),h+=f.move(n.safe(t.url,{before:h,after:t.title?" ":`
`,...f.current()}))),u(),t.title&&(u=n.enter(`title${a}`),h+=f.move(" "+s),h+=f.move(n.safe(t.title,{before:h,after:s,...f.current()})),h+=f.move(s),u()),l(),h}function zH(t){const e=t.options.emphasis||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize emphasis with `"+e+"` for `options.emphasis`, expected `*`, or `_`");return e}function ql(t){return"&#x"+t.toString(16).toUpperCase()+";"}function Gf(t,e,n){const r=Ha(t),s=Ha(e);return r===void 0?s===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:s===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:r===1?s===void 0?{inside:!1,outside:!1}:s===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:s===void 0?{inside:!1,outside:!1}:s===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}oA.peek=jH;function oA(t,e,n,r){const s=zH(n),a=n.enter("emphasis"),l=n.createTracker(r),u=l.move(s);let f=l.move(n.containerPhrasing(t,{after:s,before:u,...l.current()}));const h=f.charCodeAt(0),m=Gf(r.before.charCodeAt(r.before.length-1),h,s);m.inside&&(f=ql(h)+f.slice(1));const p=f.charCodeAt(f.length-1),_=Gf(r.after.charCodeAt(0),p,s);_.inside&&(f=f.slice(0,-1)+ql(p));const g=l.move(s);return a(),n.attentionEncodeSurroundingInfo={after:_.outside,before:m.outside},u+f+g}function jH(t,e,n){return n.options.emphasis||"*"}function PH(t,e){let n=!1;return _0(t,function(r){if("value"in r&&/\r?\n|\r/.test(r.value)||r.type==="break")return n=!0,Fg}),!!((!t.depth||t.depth<3)&&f0(t)&&(e.options.setext||n))}function BH(t,e,n,r){const s=Math.max(Math.min(6,t.depth||1),1),a=n.createTracker(r);if(PH(t,n)){const m=n.enter("headingSetext"),p=n.enter("phrasing"),_=n.containerPhrasing(t,{...a.current(),before:`
`,after:`
`});return p(),m(),_+`
`+(s===1?"=":"-").repeat(_.length-(Math.max(_.lastIndexOf("\r"),_.lastIndexOf(`
`))+1))}const l="#".repeat(s),u=n.enter("headingAtx"),f=n.enter("phrasing");a.move(l+" ");let h=n.containerPhrasing(t,{before:"# ",after:`
`,...a.current()});return/^[\t ]/.test(h)&&(h=ql(h.charCodeAt(0))+h.slice(1)),h=h?l+" "+h:l,n.options.closeAtx&&(h+=" "+l),f(),u(),h}lA.peek=UH;function lA(t){return t.value||""}function UH(){return"<"}cA.peek=$H;function cA(t,e,n,r){const s=v0(n),a=s==='"'?"Quote":"Apostrophe",l=n.enter("image");let u=n.enter("label");const f=n.createTracker(r);let h=f.move("![");return h+=f.move(n.safe(t.alt,{before:h,after:"]",...f.current()})),h+=f.move("]("),u(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(u=n.enter("destinationLiteral"),h+=f.move("<"),h+=f.move(n.safe(t.url,{before:h,after:">",...f.current()})),h+=f.move(">")):(u=n.enter("destinationRaw"),h+=f.move(n.safe(t.url,{before:h,after:t.title?" ":")",...f.current()}))),u(),t.title&&(u=n.enter(`title${a}`),h+=f.move(" "+s),h+=f.move(n.safe(t.title,{before:h,after:s,...f.current()})),h+=f.move(s),u()),h+=f.move(")"),l(),h}function $H(){return"!"}uA.peek=qH;function uA(t,e,n,r){const s=t.referenceType,a=n.enter("imageReference");let l=n.enter("label");const u=n.createTracker(r);let f=u.move("![");const h=n.safe(t.alt,{before:f,after:"]",...u.current()});f+=u.move(h+"]["),l();const m=n.stack;n.stack=[],l=n.enter("reference");const p=n.safe(n.associationId(t),{before:f,after:"]",...u.current()});return l(),n.stack=m,a(),s==="full"||!h||h!==p?f+=u.move(p+"]"):s==="shortcut"?f=f.slice(0,-1):f+=u.move("]"),f}function qH(){return"!"}fA.peek=FH;function fA(t,e,n){let r=t.value||"",s="`",a=-1;for(;new RegExp("(^|[^`])"+s+"([^`]|$)").test(r);)s+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++a<n.unsafe.length;){const l=n.unsafe[a],u=n.compilePattern(l);let f;if(l.atBreak)for(;f=u.exec(r);){let h=f.index;r.charCodeAt(h)===10&&r.charCodeAt(h-1)===13&&h--,r=r.slice(0,h)+" "+r.slice(f.index+1)}}return s+r+s}function FH(){return"`"}function hA(t,e){const n=f0(t);return!!(!e.options.resourceLink&&t.url&&!t.title&&t.children&&t.children.length===1&&t.children[0].type==="text"&&(n===t.url||"mailto:"+n===t.url)&&/^[a-z][a-z+.-]+:/i.test(t.url)&&!/[\0- <>\u007F]/.test(t.url))}dA.peek=VH;function dA(t,e,n,r){const s=v0(n),a=s==='"'?"Quote":"Apostrophe",l=n.createTracker(r);let u,f;if(hA(t,n)){const m=n.stack;n.stack=[],u=n.enter("autolink");let p=l.move("<");return p+=l.move(n.containerPhrasing(t,{before:p,after:">",...l.current()})),p+=l.move(">"),u(),n.stack=m,p}u=n.enter("link"),f=n.enter("label");let h=l.move("[");return h+=l.move(n.containerPhrasing(t,{before:h,after:"](",...l.current()})),h+=l.move("]("),f(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(f=n.enter("destinationLiteral"),h+=l.move("<"),h+=l.move(n.safe(t.url,{before:h,after:">",...l.current()})),h+=l.move(">")):(f=n.enter("destinationRaw"),h+=l.move(n.safe(t.url,{before:h,after:t.title?" ":")",...l.current()}))),f(),t.title&&(f=n.enter(`title${a}`),h+=l.move(" "+s),h+=l.move(n.safe(t.title,{before:h,after:s,...l.current()})),h+=l.move(s),f()),h+=l.move(")"),u(),h}function VH(t,e,n){return hA(t,n)?"<":"["}pA.peek=HH;function pA(t,e,n,r){const s=t.referenceType,a=n.enter("linkReference");let l=n.enter("label");const u=n.createTracker(r);let f=u.move("[");const h=n.containerPhrasing(t,{before:f,after:"]",...u.current()});f+=u.move(h+"]["),l();const m=n.stack;n.stack=[],l=n.enter("reference");const p=n.safe(n.associationId(t),{before:f,after:"]",...u.current()});return l(),n.stack=m,a(),s==="full"||!h||h!==p?f+=u.move(p+"]"):s==="shortcut"?f=f.slice(0,-1):f+=u.move("]"),f}function HH(){return"["}function x0(t){const e=t.options.bullet||"*";if(e!=="*"&&e!=="+"&&e!=="-")throw new Error("Cannot serialize items with `"+e+"` for `options.bullet`, expected `*`, `+`, or `-`");return e}function GH(t){const e=x0(t),n=t.options.bulletOther;if(!n)return e==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===e)throw new Error("Expected `bullet` (`"+e+"`) and `bulletOther` (`"+n+"`) to be different");return n}function KH(t){const e=t.options.bulletOrdered||".";if(e!=="."&&e!==")")throw new Error("Cannot serialize items with `"+e+"` for `options.bulletOrdered`, expected `.` or `)`");return e}function mA(t){const e=t.options.rule||"*";if(e!=="*"&&e!=="-"&&e!=="_")throw new Error("Cannot serialize rules with `"+e+"` for `options.rule`, expected `*`, `-`, or `_`");return e}function ZH(t,e,n,r){const s=n.enter("list"),a=n.bulletCurrent;let l=t.ordered?KH(n):x0(n);const u=t.ordered?l==="."?")":".":GH(n);let f=e&&n.bulletLastUsed?l===n.bulletLastUsed:!1;if(!t.ordered){const m=t.children?t.children[0]:void 0;if((l==="*"||l==="-")&&m&&(!m.children||!m.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(f=!0),mA(n)===l&&m){let p=-1;for(;++p<t.children.length;){const _=t.children[p];if(_&&_.type==="listItem"&&_.children&&_.children[0]&&_.children[0].type==="thematicBreak"){f=!0;break}}}}f&&(l=u),n.bulletCurrent=l;const h=n.containerFlow(t,r);return n.bulletLastUsed=l,n.bulletCurrent=a,s(),h}function QH(t){const e=t.options.listItemIndent||"one";if(e!=="tab"&&e!=="one"&&e!=="mixed")throw new Error("Cannot serialize items with `"+e+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return e}function JH(t,e,n,r){const s=QH(n);let a=n.bulletCurrent||x0(n);e&&e.type==="list"&&e.ordered&&(a=(typeof e.start=="number"&&e.start>-1?e.start:1)+(n.options.incrementListMarker===!1?0:e.children.indexOf(t))+a);let l=a.length+1;(s==="tab"||s==="mixed"&&(e&&e.type==="list"&&e.spread||t.spread))&&(l=Math.ceil(l/4)*4);const u=n.createTracker(r);u.move(a+" ".repeat(l-a.length)),u.shift(l);const f=n.enter("listItem"),h=n.indentLines(n.containerFlow(t,u.current()),m);return f(),h;function m(p,_,g){return _?(g?"":" ".repeat(l))+p:(g?a:a+" ".repeat(l-a.length))+p}}function YH(t,e,n,r){const s=n.enter("paragraph"),a=n.enter("phrasing"),l=n.containerPhrasing(t,r);return a(),s(),l}const XH=wh(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function WH(t,e,n,r){return(t.children.some(function(l){return XH(l)})?n.containerPhrasing:n.containerFlow).call(n,t,r)}function eG(t){const e=t.options.strong||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize strong with `"+e+"` for `options.strong`, expected `*`, or `_`");return e}gA.peek=tG;function gA(t,e,n,r){const s=eG(n),a=n.enter("strong"),l=n.createTracker(r),u=l.move(s+s);let f=l.move(n.containerPhrasing(t,{after:s,before:u,...l.current()}));const h=f.charCodeAt(0),m=Gf(r.before.charCodeAt(r.before.length-1),h,s);m.inside&&(f=ql(h)+f.slice(1));const p=f.charCodeAt(f.length-1),_=Gf(r.after.charCodeAt(0),p,s);_.inside&&(f=f.slice(0,-1)+ql(p));const g=l.move(s+s);return a(),n.attentionEncodeSurroundingInfo={after:_.outside,before:m.outside},u+f+g}function tG(t,e,n){return n.options.strong||"*"}function nG(t,e,n,r){return n.safe(t.value,r)}function rG(t){const e=t.options.ruleRepetition||3;if(e<3)throw new Error("Cannot serialize rules with repetition `"+e+"` for `options.ruleRepetition`, expected `3` or more");return e}function sG(t,e,n){const r=(mA(n)+(n.options.ruleSpaces?" ":"")).repeat(rG(n));return n.options.ruleSpaces?r.slice(0,-1):r}const yA={blockquote:TH,break:zS,code:MH,definition:LH,emphasis:oA,hardBreak:zS,heading:BH,html:lA,image:cA,imageReference:uA,inlineCode:fA,link:dA,linkReference:pA,list:ZH,listItem:JH,paragraph:YH,root:WH,strong:gA,text:nG,thematicBreak:sG};function iG(){return{enter:{table:aG,tableData:jS,tableHeader:jS,tableRow:lG},exit:{codeText:cG,table:oG,tableData:Dm,tableHeader:Dm,tableRow:Dm}}}function aG(t){const e=t._align;this.enter({type:"table",align:e.map(function(n){return n==="none"?null:n}),children:[]},t),this.data.inTable=!0}function oG(t){this.exit(t),this.data.inTable=void 0}function lG(t){this.enter({type:"tableRow",children:[]},t)}function Dm(t){this.exit(t)}function jS(t){this.enter({type:"tableCell",children:[]},t)}function cG(t){let e=this.resume();this.data.inTable&&(e=e.replace(/\\([\\|])/g,uG));const n=this.stack[this.stack.length-1];n.type,n.value=e,this.exit(t)}function uG(t,e){return e==="|"?e:t}function fG(t){const e=t||{},n=e.tableCellPadding,r=e.tablePipeAlign,s=e.stringLength,a=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:_,table:l,tableCell:f,tableRow:u}};function l(g,v,x,k){return h(m(g,x,k),g.align)}function u(g,v,x,k){const S=p(g,x,k),T=h([S]);return T.slice(0,T.indexOf(`
`))}function f(g,v,x,k){const S=x.enter("tableCell"),T=x.enter("phrasing"),C=x.containerPhrasing(g,{...k,before:a,after:a});return T(),S(),C}function h(g,v){return EH(g,{align:v,alignDelimiters:r,padding:n,stringLength:s})}function m(g,v,x){const k=g.children;let S=-1;const T=[],C=v.enter("table");for(;++S<k.length;)T[S]=p(k[S],v,x);return C(),T}function p(g,v,x){const k=g.children;let S=-1;const T=[],C=v.enter("tableRow");for(;++S<k.length;)T[S]=f(k[S],g,v,x);return C(),T}function _(g,v,x){let k=yA.inlineCode(g,v,x);return x.stack.includes("tableCell")&&(k=k.replace(/\|/g,"\\$&")),k}}function hG(){return{exit:{taskListCheckValueChecked:PS,taskListCheckValueUnchecked:PS,paragraph:pG}}}function dG(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:mG}}}function PS(t){const e=this.stack[this.stack.length-2];e.type,e.checked=t.type==="taskListCheckValueChecked"}function pG(t){const e=this.stack[this.stack.length-2];if(e&&e.type==="listItem"&&typeof e.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const r=n.children[0];if(r&&r.type==="text"){const s=e.children;let a=-1,l;for(;++a<s.length;){const u=s[a];if(u.type==="paragraph"){l=u;break}}l===n&&(r.value=r.value.slice(1),r.value.length===0?n.children.shift():n.position&&r.position&&typeof r.position.start.offset=="number"&&(r.position.start.column++,r.position.start.offset++,n.position.start=Object.assign({},r.position.start)))}}this.exit(t)}function mG(t,e,n,r){const s=t.children[0],a=typeof t.checked=="boolean"&&s&&s.type==="paragraph",l="["+(t.checked?"x":" ")+"] ",u=n.createTracker(r);a&&u.move(l);let f=yA.listItem(t,e,n,{...r,...u.current()});return a&&(f=f.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,h)),f;function h(m){return m+l}}function gG(){return[Z7(),mH(),bH(),iG(),hG()]}function yG(t){return{extensions:[Q7(),gH(t),vH(),fG(t),dG()]}}const _G={tokenize:kG,partial:!0},_A={tokenize:EG,partial:!0},bA={tokenize:CG,partial:!0},vA={tokenize:TG,partial:!0},bG={tokenize:AG,partial:!0},xA={name:"wwwAutolink",tokenize:wG,previous:SA},wA={name:"protocolAutolink",tokenize:SG,previous:kA},ys={name:"emailAutolink",tokenize:xG,previous:EA},Kr={};function vG(){return{text:Kr}}let wi=48;for(;wi<123;)Kr[wi]=ys,wi++,wi===58?wi=65:wi===91&&(wi=97);Kr[43]=ys;Kr[45]=ys;Kr[46]=ys;Kr[95]=ys;Kr[72]=[ys,wA];Kr[104]=[ys,wA];Kr[87]=[ys,xA];Kr[119]=[ys,xA];function xG(t,e,n){const r=this;let s,a;return l;function l(p){return!Kg(p)||!EA.call(r,r.previous)||w0(r.events)?n(p):(t.enter("literalAutolink"),t.enter("literalAutolinkEmail"),u(p))}function u(p){return Kg(p)?(t.consume(p),u):p===64?(t.consume(p),f):n(p)}function f(p){return p===46?t.check(bG,m,h)(p):p===45||p===95||bn(p)?(a=!0,t.consume(p),f):m(p)}function h(p){return t.consume(p),s=!0,f}function m(p){return a&&s&&Tn(r.previous)?(t.exit("literalAutolinkEmail"),t.exit("literalAutolink"),e(p)):n(p)}}function wG(t,e,n){const r=this;return s;function s(l){return l!==87&&l!==119||!SA.call(r,r.previous)||w0(r.events)?n(l):(t.enter("literalAutolink"),t.enter("literalAutolinkWww"),t.check(_G,t.attempt(_A,t.attempt(bA,a),n),n)(l))}function a(l){return t.exit("literalAutolinkWww"),t.exit("literalAutolink"),e(l)}}function SG(t,e,n){const r=this;let s="",a=!1;return l;function l(p){return(p===72||p===104)&&kA.call(r,r.previous)&&!w0(r.events)?(t.enter("literalAutolink"),t.enter("literalAutolinkHttp"),s+=String.fromCodePoint(p),t.consume(p),u):n(p)}function u(p){if(Tn(p)&&s.length<5)return s+=String.fromCodePoint(p),t.consume(p),u;if(p===58){const _=s.toLowerCase();if(_==="http"||_==="https")return t.consume(p),f}return n(p)}function f(p){return p===47?(t.consume(p),a?h:(a=!0,f)):n(p)}function h(p){return p===null||Ff(p)||mt(p)||Di(p)||bh(p)?n(p):t.attempt(_A,t.attempt(bA,m),n)(p)}function m(p){return t.exit("literalAutolinkHttp"),t.exit("literalAutolink"),e(p)}}function kG(t,e,n){let r=0;return s;function s(l){return(l===87||l===119)&&r<3?(r++,t.consume(l),s):l===46&&r===3?(t.consume(l),a):n(l)}function a(l){return l===null?n(l):e(l)}}function EG(t,e,n){let r,s,a;return l;function l(h){return h===46||h===95?t.check(vA,f,u)(h):h===null||mt(h)||Di(h)||h!==45&&bh(h)?f(h):(a=!0,t.consume(h),l)}function u(h){return h===95?r=!0:(s=r,r=void 0),t.consume(h),l}function f(h){return s||r||!a?n(h):e(h)}}function CG(t,e){let n=0,r=0;return s;function s(l){return l===40?(n++,t.consume(l),s):l===41&&r<n?a(l):l===33||l===34||l===38||l===39||l===41||l===42||l===44||l===46||l===58||l===59||l===60||l===63||l===93||l===95||l===126?t.check(vA,e,a)(l):l===null||mt(l)||Di(l)?e(l):(t.consume(l),s)}function a(l){return l===41&&r++,t.consume(l),s}}function TG(t,e,n){return r;function r(u){return u===33||u===34||u===39||u===41||u===42||u===44||u===46||u===58||u===59||u===63||u===95||u===126?(t.consume(u),r):u===38?(t.consume(u),a):u===93?(t.consume(u),s):u===60||u===null||mt(u)||Di(u)?e(u):n(u)}function s(u){return u===null||u===40||u===91||mt(u)||Di(u)?e(u):r(u)}function a(u){return Tn(u)?l(u):n(u)}function l(u){return u===59?(t.consume(u),r):Tn(u)?(t.consume(u),l):n(u)}}function AG(t,e,n){return r;function r(a){return t.consume(a),s}function s(a){return bn(a)?n(a):e(a)}}function SA(t){return t===null||t===40||t===42||t===95||t===91||t===93||t===126||mt(t)}function kA(t){return!Tn(t)}function EA(t){return!(t===47||Kg(t))}function Kg(t){return t===43||t===45||t===46||t===95||bn(t)}function w0(t){let e=t.length,n=!1;for(;e--;){const r=t[e][1];if((r.type==="labelLink"||r.type==="labelImage")&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return t.length>0&&!n&&(t[t.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const RG={tokenize:jG,partial:!0};function OG(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:DG,continuation:{tokenize:LG},exit:zG}},text:{91:{name:"gfmFootnoteCall",tokenize:MG},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:IG,resolveTo:NG}}}}function IG(t,e,n){const r=this;let s=r.events.length;const a=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let l;for(;s--;){const f=r.events[s][1];if(f.type==="labelImage"){l=f;break}if(f.type==="gfmFootnoteCall"||f.type==="labelLink"||f.type==="label"||f.type==="image"||f.type==="link")break}return u;function u(f){if(!l||!l._balanced)return n(f);const h=Rr(r.sliceSerialize({start:l.end,end:r.now()}));return h.codePointAt(0)!==94||!a.includes(h.slice(1))?n(f):(t.enter("gfmFootnoteCallLabelMarker"),t.consume(f),t.exit("gfmFootnoteCallLabelMarker"),e(f))}}function NG(t,e){let n=t.length;for(;n--;)if(t[n][1].type==="labelImage"&&t[n][0]==="enter"){t[n][1];break}t[n+1][1].type="data",t[n+3][1].type="gfmFootnoteCallLabelMarker";const r={type:"gfmFootnoteCall",start:Object.assign({},t[n+3][1].start),end:Object.assign({},t[t.length-1][1].end)},s={type:"gfmFootnoteCallMarker",start:Object.assign({},t[n+3][1].end),end:Object.assign({},t[n+3][1].end)};s.end.column++,s.end.offset++,s.end._bufferIndex++;const a={type:"gfmFootnoteCallString",start:Object.assign({},s.end),end:Object.assign({},t[t.length-1][1].start)},l={type:"chunkString",contentType:"string",start:Object.assign({},a.start),end:Object.assign({},a.end)},u=[t[n+1],t[n+2],["enter",r,e],t[n+3],t[n+4],["enter",s,e],["exit",s,e],["enter",a,e],["enter",l,e],["exit",l,e],["exit",a,e],t[t.length-2],t[t.length-1],["exit",r,e]];return t.splice(n,t.length-n+1,...u),t}function MG(t,e,n){const r=this,s=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let a=0,l;return u;function u(p){return t.enter("gfmFootnoteCall"),t.enter("gfmFootnoteCallLabelMarker"),t.consume(p),t.exit("gfmFootnoteCallLabelMarker"),f}function f(p){return p!==94?n(p):(t.enter("gfmFootnoteCallMarker"),t.consume(p),t.exit("gfmFootnoteCallMarker"),t.enter("gfmFootnoteCallString"),t.enter("chunkString").contentType="string",h)}function h(p){if(a>999||p===93&&!l||p===null||p===91||mt(p))return n(p);if(p===93){t.exit("chunkString");const _=t.exit("gfmFootnoteCallString");return s.includes(Rr(r.sliceSerialize(_)))?(t.enter("gfmFootnoteCallLabelMarker"),t.consume(p),t.exit("gfmFootnoteCallLabelMarker"),t.exit("gfmFootnoteCall"),e):n(p)}return mt(p)||(l=!0),a++,t.consume(p),p===92?m:h}function m(p){return p===91||p===92||p===93?(t.consume(p),a++,h):h(p)}}function DG(t,e,n){const r=this,s=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let a,l=0,u;return f;function f(v){return t.enter("gfmFootnoteDefinition")._container=!0,t.enter("gfmFootnoteDefinitionLabel"),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(v),t.exit("gfmFootnoteDefinitionLabelMarker"),h}function h(v){return v===94?(t.enter("gfmFootnoteDefinitionMarker"),t.consume(v),t.exit("gfmFootnoteDefinitionMarker"),t.enter("gfmFootnoteDefinitionLabelString"),t.enter("chunkString").contentType="string",m):n(v)}function m(v){if(l>999||v===93&&!u||v===null||v===91||mt(v))return n(v);if(v===93){t.exit("chunkString");const x=t.exit("gfmFootnoteDefinitionLabelString");return a=Rr(r.sliceSerialize(x)),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(v),t.exit("gfmFootnoteDefinitionLabelMarker"),t.exit("gfmFootnoteDefinitionLabel"),_}return mt(v)||(u=!0),l++,t.consume(v),v===92?p:m}function p(v){return v===91||v===92||v===93?(t.consume(v),l++,m):m(v)}function _(v){return v===58?(t.enter("definitionMarker"),t.consume(v),t.exit("definitionMarker"),s.includes(a)||s.push(a),We(t,g,"gfmFootnoteDefinitionWhitespace")):n(v)}function g(v){return e(v)}}function LG(t,e,n){return t.check(ec,e,t.attempt(RG,e,n))}function zG(t){t.exit("gfmFootnoteDefinition")}function jG(t,e,n){const r=this;return We(t,s,"gfmFootnoteDefinitionIndent",5);function s(a){const l=r.events[r.events.length-1];return l&&l[1].type==="gfmFootnoteDefinitionIndent"&&l[2].sliceSerialize(l[1],!0).length===4?e(a):n(a)}}function PG(t){let n=(t||{}).singleTilde;const r={name:"strikethrough",tokenize:a,resolveAll:s};return n==null&&(n=!0),{text:{126:r},insideSpan:{null:[r]},attentionMarkers:{null:[126]}};function s(l,u){let f=-1;for(;++f<l.length;)if(l[f][0]==="enter"&&l[f][1].type==="strikethroughSequenceTemporary"&&l[f][1]._close){let h=f;for(;h--;)if(l[h][0]==="exit"&&l[h][1].type==="strikethroughSequenceTemporary"&&l[h][1]._open&&l[f][1].end.offset-l[f][1].start.offset===l[h][1].end.offset-l[h][1].start.offset){l[f][1].type="strikethroughSequence",l[h][1].type="strikethroughSequence";const m={type:"strikethrough",start:Object.assign({},l[h][1].start),end:Object.assign({},l[f][1].end)},p={type:"strikethroughText",start:Object.assign({},l[h][1].end),end:Object.assign({},l[f][1].start)},_=[["enter",m,u],["enter",l[h][1],u],["exit",l[h][1],u],["enter",p,u]],g=u.parser.constructs.insideSpan.null;g&&tr(_,_.length,0,vh(g,l.slice(h+1,f),u)),tr(_,_.length,0,[["exit",p,u],["enter",l[f][1],u],["exit",l[f][1],u],["exit",m,u]]),tr(l,h-1,f-h+3,_),f=h+_.length-2;break}}for(f=-1;++f<l.length;)l[f][1].type==="strikethroughSequenceTemporary"&&(l[f][1].type="data");return l}function a(l,u,f){const h=this.previous,m=this.events;let p=0;return _;function _(v){return h===126&&m[m.length-1][1].type!=="characterEscape"?f(v):(l.enter("strikethroughSequenceTemporary"),g(v))}function g(v){const x=Ha(h);if(v===126)return p>1?f(v):(l.consume(v),p++,g);if(p<2&&!n)return f(v);const k=l.exit("strikethroughSequenceTemporary"),S=Ha(v);return k._open=!S||S===2&&!!x,k._close=!x||x===2&&!!S,u(v)}}}class BG{constructor(){this.map=[]}add(e,n,r){UG(this,e,n,r)}consume(e){if(this.map.sort(function(a,l){return a[0]-l[0]}),this.map.length===0)return;let n=this.map.length;const r=[];for(;n>0;)n-=1,r.push(e.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),e.length=this.map[n][0];r.push(e.slice()),e.length=0;let s=r.pop();for(;s;){for(const a of s)e.push(a);s=r.pop()}this.map.length=0}}function UG(t,e,n,r){let s=0;if(!(n===0&&r.length===0)){for(;s<t.map.length;){if(t.map[s][0]===e){t.map[s][1]+=n,t.map[s][2].push(...r);return}s+=1}t.map.push([e,n,r])}}function $G(t,e){let n=!1;const r=[];for(;e<t.length;){const s=t[e];if(n){if(s[0]==="enter")s[1].type==="tableContent"&&r.push(t[e+1][1].type==="tableDelimiterMarker"?"left":"none");else if(s[1].type==="tableContent"){if(t[e-1][1].type==="tableDelimiterMarker"){const a=r.length-1;r[a]=r[a]==="left"?"center":"right"}}else if(s[1].type==="tableDelimiterRow")break}else s[0]==="enter"&&s[1].type==="tableDelimiterRow"&&(n=!0);e+=1}return r}function qG(){return{flow:{null:{name:"table",tokenize:FG,resolveAll:VG}}}}function FG(t,e,n){const r=this;let s=0,a=0,l;return u;function u(z){let Q=r.events.length-1;for(;Q>-1;){const Z=r.events[Q][1].type;if(Z==="lineEnding"||Z==="linePrefix")Q--;else break}const j=Q>-1?r.events[Q][1].type:null,se=j==="tableHead"||j==="tableRow"?I:f;return se===I&&r.parser.lazy[r.now().line]?n(z):se(z)}function f(z){return t.enter("tableHead"),t.enter("tableRow"),h(z)}function h(z){return z===124||(l=!0,a+=1),m(z)}function m(z){return z===null?n(z):Re(z)?a>1?(a=0,r.interrupt=!0,t.exit("tableRow"),t.enter("lineEnding"),t.consume(z),t.exit("lineEnding"),g):n(z):Ge(z)?We(t,m,"whitespace")(z):(a+=1,l&&(l=!1,s+=1),z===124?(t.enter("tableCellDivider"),t.consume(z),t.exit("tableCellDivider"),l=!0,m):(t.enter("data"),p(z)))}function p(z){return z===null||z===124||mt(z)?(t.exit("data"),m(z)):(t.consume(z),z===92?_:p)}function _(z){return z===92||z===124?(t.consume(z),p):p(z)}function g(z){return r.interrupt=!1,r.parser.lazy[r.now().line]?n(z):(t.enter("tableDelimiterRow"),l=!1,Ge(z)?We(t,v,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(z):v(z))}function v(z){return z===45||z===58?k(z):z===124?(l=!0,t.enter("tableCellDivider"),t.consume(z),t.exit("tableCellDivider"),x):D(z)}function x(z){return Ge(z)?We(t,k,"whitespace")(z):k(z)}function k(z){return z===58?(a+=1,l=!0,t.enter("tableDelimiterMarker"),t.consume(z),t.exit("tableDelimiterMarker"),S):z===45?(a+=1,S(z)):z===null||Re(z)?L(z):D(z)}function S(z){return z===45?(t.enter("tableDelimiterFiller"),T(z)):D(z)}function T(z){return z===45?(t.consume(z),T):z===58?(l=!0,t.exit("tableDelimiterFiller"),t.enter("tableDelimiterMarker"),t.consume(z),t.exit("tableDelimiterMarker"),C):(t.exit("tableDelimiterFiller"),C(z))}function C(z){return Ge(z)?We(t,L,"whitespace")(z):L(z)}function L(z){return z===124?v(z):z===null||Re(z)?!l||s!==a?D(z):(t.exit("tableDelimiterRow"),t.exit("tableHead"),e(z)):D(z)}function D(z){return n(z)}function I(z){return t.enter("tableRow"),P(z)}function P(z){return z===124?(t.enter("tableCellDivider"),t.consume(z),t.exit("tableCellDivider"),P):z===null||Re(z)?(t.exit("tableRow"),e(z)):Ge(z)?We(t,P,"whitespace")(z):(t.enter("data"),V(z))}function V(z){return z===null||z===124||mt(z)?(t.exit("data"),P(z)):(t.consume(z),z===92?H:V)}function H(z){return z===92||z===124?(t.consume(z),V):V(z)}}function VG(t,e){let n=-1,r=!0,s=0,a=[0,0,0,0],l=[0,0,0,0],u=!1,f=0,h,m,p;const _=new BG;for(;++n<t.length;){const g=t[n],v=g[1];g[0]==="enter"?v.type==="tableHead"?(u=!1,f!==0&&(BS(_,e,f,h,m),m=void 0,f=0),h={type:"table",start:Object.assign({},v.start),end:Object.assign({},v.end)},_.add(n,0,[["enter",h,e]])):v.type==="tableRow"||v.type==="tableDelimiterRow"?(r=!0,p=void 0,a=[0,0,0,0],l=[0,n+1,0,0],u&&(u=!1,m={type:"tableBody",start:Object.assign({},v.start),end:Object.assign({},v.end)},_.add(n,0,[["enter",m,e]])),s=v.type==="tableDelimiterRow"?2:m?3:1):s&&(v.type==="data"||v.type==="tableDelimiterMarker"||v.type==="tableDelimiterFiller")?(r=!1,l[2]===0&&(a[1]!==0&&(l[0]=l[1],p=Bu(_,e,a,s,void 0,p),a=[0,0,0,0]),l[2]=n)):v.type==="tableCellDivider"&&(r?r=!1:(a[1]!==0&&(l[0]=l[1],p=Bu(_,e,a,s,void 0,p)),a=l,l=[a[1],n,0,0])):v.type==="tableHead"?(u=!0,f=n):v.type==="tableRow"||v.type==="tableDelimiterRow"?(f=n,a[1]!==0?(l[0]=l[1],p=Bu(_,e,a,s,n,p)):l[1]!==0&&(p=Bu(_,e,l,s,n,p)),s=0):s&&(v.type==="data"||v.type==="tableDelimiterMarker"||v.type==="tableDelimiterFiller")&&(l[3]=n)}for(f!==0&&BS(_,e,f,h,m),_.consume(e.events),n=-1;++n<e.events.length;){const g=e.events[n];g[0]==="enter"&&g[1].type==="table"&&(g[1]._align=$G(e.events,n))}return t}function Bu(t,e,n,r,s,a){const l=r===1?"tableHeader":r===2?"tableDelimiter":"tableData",u="tableContent";n[0]!==0&&(a.end=Object.assign({},Ia(e.events,n[0])),t.add(n[0],0,[["exit",a,e]]));const f=Ia(e.events,n[1]);if(a={type:l,start:Object.assign({},f),end:Object.assign({},f)},t.add(n[1],0,[["enter",a,e]]),n[2]!==0){const h=Ia(e.events,n[2]),m=Ia(e.events,n[3]),p={type:u,start:Object.assign({},h),end:Object.assign({},m)};if(t.add(n[2],0,[["enter",p,e]]),r!==2){const _=e.events[n[2]],g=e.events[n[3]];if(_[1].end=Object.assign({},g[1].end),_[1].type="chunkText",_[1].contentType="text",n[3]>n[2]+1){const v=n[2]+1,x=n[3]-n[2]-1;t.add(v,x,[])}}t.add(n[3]+1,0,[["exit",p,e]])}return s!==void 0&&(a.end=Object.assign({},Ia(e.events,s)),t.add(s,0,[["exit",a,e]]),a=void 0),a}function BS(t,e,n,r,s){const a=[],l=Ia(e.events,n);s&&(s.end=Object.assign({},l),a.push(["exit",s,e])),r.end=Object.assign({},l),a.push(["exit",r,e]),t.add(n+1,0,a)}function Ia(t,e){const n=t[e],r=n[0]==="enter"?"start":"end";return n[1][r]}const HG={name:"tasklistCheck",tokenize:KG};function GG(){return{text:{91:HG}}}function KG(t,e,n){const r=this;return s;function s(f){return r.previous!==null||!r._gfmTasklistFirstContentOfListItem?n(f):(t.enter("taskListCheck"),t.enter("taskListCheckMarker"),t.consume(f),t.exit("taskListCheckMarker"),a)}function a(f){return mt(f)?(t.enter("taskListCheckValueUnchecked"),t.consume(f),t.exit("taskListCheckValueUnchecked"),l):f===88||f===120?(t.enter("taskListCheckValueChecked"),t.consume(f),t.exit("taskListCheckValueChecked"),l):n(f)}function l(f){return f===93?(t.enter("taskListCheckMarker"),t.consume(f),t.exit("taskListCheckMarker"),t.exit("taskListCheck"),u):n(f)}function u(f){return Re(f)?e(f):Ge(f)?t.check({tokenize:ZG},e,n)(f):n(f)}}function ZG(t,e,n){return We(t,r,"whitespace");function r(s){return s===null?n(s):e(s)}}function QG(t){return LT([vG(),OG(),PG(t),qG(),GG()])}const JG={};function YG(t){const e=this,n=t||JG,r=e.data(),s=r.micromarkExtensions||(r.micromarkExtensions=[]),a=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),l=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);s.push(QG(n)),a.push(gG()),l.push(yG(n))}function XG(t){nA(t,[/\r?\n|\r/g,WG])}function WG(){return{type:"break"}}function eK(){return function(t){XG(t)}}const tK={pre:({children:t})=>E.jsx(E.Fragment,{children:t}),li:({children:t,...e})=>E.jsx("li",{className:"py-0.5 ml-0",...e,children:t}),ul:({children:t,...e})=>E.jsx("ul",{className:"list-disc list-outside ml-5 pl-0 my-2",...e,children:t}),ol:({children:t,...e})=>E.jsx("ol",{className:"list-decimal list-outside ml-5 pl-0 my-2",...e,children:t}),strong:({children:t,...e})=>E.jsx("span",{className:"font-semibold",...e,children:t}),a:({children:t,href:e,...n})=>{let r=e||"";return r&&!r.startsWith("http")&&!r.startsWith("#")&&(r=`https://${r}`),E.jsx("a",{className:"text-sky-400 hover:underline",href:r,target:"_blank",rel:"noreferrer noopener",...n,children:t})},h1:({children:t,...e})=>E.jsx("h1",{className:"text-xl font-semibold mt-4 mb-2",...e,children:t}),h2:({children:t,...e})=>E.jsx("h2",{className:"text-lg font-semibold mt-4 mb-2",...e,children:t}),h3:({children:t,...e})=>E.jsx("h3",{className:"text-base font-semibold mt-3 mb-1",...e,children:t}),h4:({children:t,...e})=>E.jsx("h4",{className:"text-sm font-semibold mt-3 mb-1",...e,children:t}),h5:({children:t,...e})=>E.jsx("h5",{className:"text-sm font-semibold mt-2 mb-1",...e,children:t}),h6:({children:t,...e})=>E.jsx("h6",{className:"text-xs font-semibold mt-2 mb-1",...e,children:t}),p:({children:t,...e})=>E.jsx("p",{className:"my-2 leading-relaxed",...e,children:t}),table:({children:t,...e})=>E.jsx("div",{className:"overflow-x-auto my-3",children:E.jsx("table",{className:"w-full border-collapse border border-neutral-600 text-xs",...e,children:t})}),thead:({children:t,...e})=>E.jsx("thead",{className:"bg-neutral-700",...e,children:t}),tbody:({children:t,...e})=>E.jsx("tbody",{...e,children:t}),tr:({children:t,...e})=>E.jsx("tr",{className:"border-b border-neutral-600",...e,children:t}),th:({children:t,...e})=>E.jsx("th",{className:"p-2 text-left font-semibold border-r last:border-r-0 border-neutral-600",...e,children:t}),td:({children:t,...e})=>E.jsx("td",{className:"p-2 border-r last:border-r-0 border-neutral-600",...e,children:t}),blockquote:({children:t,...e})=>E.jsx("blockquote",{className:"border-l-4 border-neutral-500 pl-3 py-1 my-2 italic text-neutral-300",...e,children:t}),hr:({...t})=>E.jsx("hr",{className:"my-4 border-neutral-600",...t}),code({children:t,className:e,...n}){const r=/language-(\w+)/.exec(e||""),s=String(t).replace(/\n$/,""),a=s.includes(`
`);if(!r&&!a)return E.jsx("code",{...n,className:`${e||""} bg-neutral-700 px-1.5 py-0.5 rounded text-xs font-mono text-sky-300`,children:t});const l=r?.[1]||"text";return E.jsxs("div",{className:"my-3",children:[E.jsx("div",{className:"flex items-center justify-between bg-neutral-700 px-3 py-1 rounded-t text-xs text-neutral-400",children:E.jsx("span",{children:l})}),E.jsx("pre",{className:"bg-neutral-800 p-3 rounded-b overflow-x-auto",children:E.jsx("code",{className:"text-xs font-mono text-neutral-200",children:s})})]})}},nK=[YG,eK],rK=t=>{const e=it.c(6),{children:n}=t;if(!n)return null;let r=n,s;if(e[0]!==r){r=r.replace(/^(#{1,6}\s+.+)\n```/gm,"$1\n\n```");let l;e[3]===Symbol.for("react.memo_cache_sentinel")?(l=/```\n(#{1,6}\s+)/gm,e[3]=l):l=e[3],s=r.replace(l,"```\n\n$1"),e[0]=r,e[1]=s,e[2]=r}else s=e[1],r=e[2];r=s;let a;return e[4]!==r?(a=E.jsx(B7,{remarkPlugins:nK,components:tK,children:r}),e[4]=r,e[5]=a):a=e[5],a},sK=J.memo(rK,(t,e)=>t.children===e.children);function iK(t){const e=it.c(85),{isOpen:n,onClose:r,request:s,setters:a}=t,[l,u]=J.useState(""),[f,h]=J.useState(),m=J.useRef(null),p=J.useRef(null),_=J.useRef(s.id);let g;e[0]!==s.httpResponse?(g=()=>{(async function(){if(s.httpResponse?.body)try{const ye=await s.httpResponse.body.text();h(ye)}catch{h("(unable to read response body)")}else h(void 0)})()},e[0]=s.httpResponse,e[1]=g):g=e[1];const v=s.httpResponse?.body;let x;e[2]!==v?(x=[v],e[2]=v,e[3]=x):x=e[3],J.useEffect(g,x);let k;e[4]!==s||e[5]!==f||e[6]!==a?(k={request:s,setters:a,responseBodyText:f},e[4]=s,e[5]=f,e[6]=a,e[7]=k):k=e[7];const S=k;let T;e[8]!==S?(T=$9(S),e[8]=S,e[9]=T):T=e[9];const C=T;let L;if(e[10]!==C){const le=eB(),ge=W6(le),ye=q9();L=SP(Ee=>nP({adapter:ge,messages:Ee,tools:C,systemPrompts:[ye],agentLoopStrategy:vE(10)})),e[10]=C,e[11]=L}else L=e[11];const D=L;let I;e[12]!==D||e[13]!==C?(I={connection:D,tools:C},e[12]=D,e[13]=C,e[14]=I):I=e[14];const{messages:P,sendMessage:V,isLoading:H,stop:z,clear:Q}=kP(I);let j,se;e[15]!==Q||e[16]!==s.id?(j=()=>{_.current!==s.id&&(Q(),_.current=s.id)},se=[s.id,Q],e[15]=Q,e[16]=s.id,e[17]=j,e[18]=se):(j=e[17],se=e[18]),J.useEffect(j,se);let Z;e[19]===Symbol.for("react.memo_cache_sentinel")?(Z=()=>{m.current?.scrollIntoView({behavior:"smooth"})},e[19]=Z):Z=e[19];let $;e[20]!==P?($=[P],e[20]=P,e[21]=$):$=e[21],J.useEffect(Z,$);let B,G;e[22]!==n?(B=()=>{n&&p.current?.focus()},G=[n],e[22]=n,e[23]=B,e[24]=G):(B=e[23],G=e[24]),J.useEffect(B,G);let re;e[25]!==l||e[26]!==H||e[27]!==V?(re=le=>{le.preventDefault(),!(!l.trim()||H)&&(V(l.trim()),u(""))},e[25]=l,e[26]=H,e[27]=V,e[28]=re):re=e[28];const Y=re;let O;e[29]!==Y?(O=le=>{le.key==="Enter"&&!le.shiftKey&&(le.preventDefault(),Y(le))},e[29]=Y,e[30]=O):O=e[30];const N=O,F=aK;let R;e[31]!==H||e[32]!==P?(R=(le,ge)=>H&&le.role==="assistant"&&ge===P.length-1,e[31]=H,e[32]=P,e[33]=R):R=e[33];const oe=R;if(!n)return null;let pe;e[34]===Symbol.for("react.memo_cache_sentinel")?(pe=E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx(Ml,{size:16,className:"text-amber-500"}),E.jsx("h3",{className:"font-medium text-neutral-900 dark:text-neutral-100",children:eS.name})]}),e[34]=pe):pe=e[34];let me;e[35]===Symbol.for("react.memo_cache_sentinel")?(me=E.jsx(Xf,{size:16}),e[35]=me):me=e[35];let xe;e[36]!==Q?(xe=E.jsx("button",{onClick:Q,className:"p-1.5 text-neutral-500 hover:text-neutral-900 hover:bg-neutral-100 dark:hover:text-neutral-300 dark:hover:bg-neutral-800 rounded transition-colors",title:"Clear chat",children:me}),e[36]=Q,e[37]=xe):xe=e[37];let Me;e[38]===Symbol.for("react.memo_cache_sentinel")?(Me=E.jsx(gy,{size:16}),e[38]=Me):Me=e[38];let Ie;e[39]!==r?(Ie=E.jsx("button",{onClick:r,className:"p-1.5 text-neutral-500 hover:text-neutral-900 hover:bg-neutral-100 dark:hover:text-neutral-300 dark:hover:bg-neutral-800 rounded transition-colors",children:Me}),e[39]=r,e[40]=Ie):Ie=e[40];let nt;e[41]!==xe||e[42]!==Ie?(nt=E.jsxs("div",{className:"shrink-0 h-12 px-4 flex items-center justify-between border-b border-neutral-200 dark:border-neutral-800",children:[pe,E.jsxs("div",{className:"flex items-center gap-1",children:[xe,Ie]})]}),e[41]=xe,e[42]=Ie,e[43]=nt):nt=e[43];let at;e[44]!==P.length?(at=P.length===0&&E.jsxs("div",{className:"text-center text-neutral-500 dark:text-neutral-400 text-sm py-8",children:[E.jsx(Ml,{size:24,className:"mx-auto mb-3 text-amber-500/50"}),E.jsx("p",{className:"mb-2",children:"Ask me to help build your request"}),E.jsx("p",{className:"text-xs text-neutral-400 dark:text-neutral-500",children:'Examples: "Create a POST request to /api/users with a JSON body" or "Add an Authorization header"'})]}),e[44]=P.length,e[45]=at):at=e[45];let At;if(e[46]!==oe||e[47]!==P){let le;e[49]!==oe?(le=(ge,ye)=>{const Ee=F(ge);return E.jsx("div",{className:`text-sm ${ge.role==="user"?"bg-neutral-100 dark:bg-neutral-800 rounded-lg px-3 py-2":""}`,children:E.jsx("div",{className:ge.role==="user"?"text-neutral-900 dark:text-neutral-100":"text-neutral-700 dark:text-neutral-300",children:ge.role==="assistant"?Ee?E.jsx(sK,{children:Ee}):oe(ge,ye)?E.jsxs("span",{className:"flex items-center gap-2 text-neutral-400",children:[E.jsx(gf,{size:14,className:"animate-spin"}),"Thinking..."]}):null:E.jsx("span",{className:"whitespace-pre-wrap",children:Ee})})},ge.id)},e[49]=oe,e[50]=le):le=e[50],At=P.map(le),e[46]=oe,e[47]=P,e[48]=At}else At=e[48];let Ae;e[51]!==H||e[52]!==P?(Ae=H&&(P.length===0||P[P.length-1]?.role==="user")&&E.jsx("div",{className:"text-sm",children:E.jsx("div",{className:"text-neutral-800 dark:text-neutral-200",children:E.jsxs("span",{className:"flex items-center gap-2 text-neutral-400",children:[E.jsx(gf,{size:14,className:"animate-spin"}),"Thinking..."]})})}),e[51]=H,e[52]=P,e[53]=Ae):Ae=e[53];let Xe;e[54]===Symbol.for("react.memo_cache_sentinel")?(Xe=E.jsx("div",{ref:m}),e[54]=Xe):Xe=e[54];let qe;e[55]!==at||e[56]!==At||e[57]!==Ae?(qe=E.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 min-h-0",children:[at,At,Ae,Xe]}),e[55]=at,e[56]=At,e[57]=Ae,e[58]=qe):qe=e[58];let Rt;e[59]===Symbol.for("react.memo_cache_sentinel")?(Rt=le=>u(le.target.value),e[59]=Rt):Rt=e[59];let Zt;e[60]===Symbol.for("react.memo_cache_sentinel")?(Zt={maxHeight:"120px"},e[60]=Zt):Zt=e[60];let Et;e[61]!==N||e[62]!==l||e[63]!==H?(Et=E.jsx("textarea",{ref:p,value:l,onChange:Rt,onKeyDown:N,placeholder:eS.placeholder,rows:1,disabled:H,className:"flex-1 px-3 py-2 bg-neutral-50 border border-neutral-200 dark:bg-neutral-800 dark:border-neutral-700 rounded-lg text-neutral-900 dark:text-neutral-100 text-sm placeholder-neutral-400 resize-none focus:outline-none focus:ring-2 focus:ring-amber-500/50 focus:border-amber-500 disabled:opacity-50",style:Zt}),e[61]=N,e[62]=l,e[63]=H,e[64]=Et):Et=e[64];const nn=H?"button":"submit",xn=H?z:void 0;let _e;e[65]!==l||e[66]!==H?(_e=!H&&!l.trim(),e[65]=l,e[66]=H,e[67]=_e):_e=e[67];let Pe;e[68]!==H?(Pe=H?E.jsx(lL,{size:16}):E.jsx(nL,{size:16}),e[68]=H,e[69]=Pe):Pe=e[69];let Le;e[70]!==nn||e[71]!==xn||e[72]!==_e||e[73]!==Pe?(Le=E.jsx("button",{type:nn,onClick:xn,disabled:_e,className:"p-2 bg-amber-500 hover:bg-amber-400 disabled:bg-neutral-300 dark:disabled:bg-neutral-700 disabled:text-neutral-500 text-white rounded-lg transition-colors",children:Pe}),e[70]=nn,e[71]=xn,e[72]=_e,e[73]=Pe,e[74]=Le):Le=e[74];let ke;e[75]!==Et||e[76]!==Le?(ke=E.jsxs("div",{className:"flex items-end gap-2",children:[Et,Le]}),e[75]=Et,e[76]=Le,e[77]=ke):ke=e[77];let Fe;e[78]!==Y||e[79]!==ke?(Fe=E.jsx("form",{onSubmit:Y,className:"shrink-0 p-3 border-t border-neutral-200 dark:border-neutral-800",children:ke}),e[78]=Y,e[79]=ke,e[80]=Fe):Fe=e[80];let ne;return e[81]!==nt||e[82]!==qe||e[83]!==Fe?(ne=E.jsxs("div",{className:"w-96 shrink-0 bg-white border border-neutral-200 dark:bg-neutral-900 dark:border-neutral-800 flex flex-col rounded-xl overflow-hidden",children:[nt,qe,Fe]}),e[81]=nt,e[82]=qe,e[83]=Fe,e[84]=ne):ne=e[84],ne}function aK(t){return t.parts.filter(lK).map(oK).join("").replace(/^undefined/,"")}function oK(t){return t.content}function lK(t){return t.type==="text"&&!!t.content}function cK(t){return t>=200&&t<300?"bg-emerald-500/20 text-emerald-400 border-emerald-500/30":t>=300&&t<400?"bg-amber-500/20 text-amber-400 border-amber-500/30":t>=400&&t<500?"bg-orange-500/20 text-orange-400 border-orange-500/30":t>=500?"bg-rose-500/20 text-rose-400 border-rose-500/30":"bg-gray-500/20 text-gray-400 border-gray-500/30"}function uK(t){return t<1024?`${t} B`:t<1024*1024?`${(t/1024).toFixed(2)} KB`:`${(t/(1024*1024)).toFixed(2)} MB`}function fK(){const t=it.c(17),{request:e}=$n();if(!e?.httpResponse)return null;const n=e.httpResponse;let r;t[0]!==n.statusCode?(r=cK(n.statusCode),t[0]=n.statusCode,t[1]=r):r=t[1];const s=`inline-flex items-center px-2 py-0.5 rounded text-[10px] font-semibold border ${r}`,a=n.statusCode>0?n.status:"Error";let l;t[2]!==s||t[3]!==a?(l=E.jsx("span",{className:s,children:a}),t[2]=s,t[3]=a,t[4]=l):l=t[4];let u;t[5]===Symbol.for("react.memo_cache_sentinel")?(u=E.jsx("span",{className:"text-neutral-400 dark:text-neutral-500",children:"Time:"}),t[5]=u):u=t[5];let f;t[6]!==n.duration?(f=E.jsxs("div",{className:"flex items-center gap-2",children:[u,E.jsxs("span",{className:"text-neutral-700 dark:text-neutral-200 font-medium",children:[n.duration,"ms"]})]}),t[6]=n.duration,t[7]=f):f=t[7];let h;t[8]===Symbol.for("react.memo_cache_sentinel")?(h=E.jsx("span",{className:"text-neutral-400 dark:text-neutral-500",children:"Size:"}),t[8]=h):h=t[8];let m;t[9]!==n.body.size?(m=uK(n.body.size),t[9]=n.body.size,t[10]=m):m=t[10];let p;t[11]!==m?(p=E.jsxs("div",{className:"flex items-center gap-2",children:[h,E.jsx("span",{className:"text-neutral-700 dark:text-neutral-200 font-medium",children:m})]}),t[11]=m,t[12]=p):p=t[12];let _;return t[13]!==l||t[14]!==f||t[15]!==p?(_=E.jsxs("div",{className:"px-3 py-2 flex items-center gap-4 text-xs shrink-0",children:[l,f,p]}),t[13]=l,t[14]=f,t[15]=p,t[16]=_):_=t[16],_}function hK(){const t=it.c(13),{request:e,aiPanelOpen:n,toggleAiPanel:r,setMethod:s,setUrl:a,setHeaders:l,setQuery:u,setBody:f}=$n();let h;t[0]===Symbol.for("react.memo_cache_sentinel")?(h=E.jsx(kL,{}),t[0]=h):h=t[0];let m;t[1]===Symbol.for("react.memo_cache_sentinel")?(m=E.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden gap-2 min-w-0",children:[E.jsx("div",{className:"flex-1 overflow-hidden min-h-0",children:E.jsx(J5,{})}),E.jsx(fK,{})]}),t[1]=m):m=t[1];let p;t[2]!==n||t[3]!==e||t[4]!==f||t[5]!==l||t[6]!==s||t[7]!==u||t[8]!==a||t[9]!==r?(p=n&&yy().ai?.model&&E.jsx(iK,{isOpen:n,onClose:r,request:e,setters:{setMethod:s,setUrl:a,setHeaders:l,setQuery:u,setBody:f}}),t[2]=n,t[3]=e,t[4]=f,t[5]=l,t[6]=s,t[7]=u,t[8]=a,t[9]=r,t[10]=p):p=t[10];let _;return t[11]!==p?(_=E.jsxs("div",{className:"h-screen flex bg-neutral-50 dark:bg-[#0d0d0d] py-2 pr-2 pl-1 gap-2 text-neutral-900 dark:text-neutral-100",children:[h,m,p]}),t[11]=p,t[12]=_):_=t[12],_}function dK(){const t=it.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=E.jsx(y4,{children:E.jsx(b4,{children:E.jsx(hK,{})})}),t[0]=e):e=t[0],e}CL().then(()=>{ZO.createRoot(document.getElementById("root")).render(E.jsx(J.StrictMode,{children:E.jsx(v2,{client:mk,children:E.jsx(dK,{})})}))});
