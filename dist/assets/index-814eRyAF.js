const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/angular-html-CU67Zn6k.js","assets/html-GMplVEZG.js","assets/javascript-wDzz0qaB.js","assets/css-DPfMkruS.js","assets/angular-ts-BwZT4LLn.js","assets/scss-OYdSNvt2.js","assets/apl-dKokRX4l.js","assets/xml-sdJ4AIDG.js","assets/java-CylS5w8V.js","assets/json-Cp-IABpG.js","assets/astro-CbQHKStN.js","assets/typescript-BPQ3VLAy.js","assets/postcss-CXtECtnM.js","assets/tsx-COt5Ahok.js","assets/blade-DVc8C-J4.js","assets/html-derivative-BFtXZ54Q.js","assets/sql-BLtJtn59.js","assets/bsl-BO_Y6i37.js","assets/sdbl-DVxCFoDh.js","assets/cairo-KRGpt6FW.js","assets/python-B6aJPvgy.js","assets/cobol-nwyudZeR.js","assets/coffee-Ch7k5sss.js","assets/cpp-CofmeUqb.js","assets/regexp-CDVJQ6XC.js","assets/glsl-DplSGwfg.js","assets/c-BIGW1oBm.js","assets/crystal-tKQVLTB8.js","assets/shellscript-Yzrsuije.js","assets/edge-BkV0erSs.js","assets/elixir-CDX3lj18.js","assets/elm-DbKCFpqz.js","assets/erb-BOJIQeun.js","assets/ruby-BvKwtOVI.js","assets/haml-B8DHNrY2.js","assets/graphql-ChdNCCLP.js","assets/jsx-g9-lgVsj.js","assets/lua-BbnMAYS6.js","assets/yaml-Buea-lGh.js","assets/erlang-DsQrWhSR.js","assets/markdown-Cvjx9yec.js","assets/fortran-fixed-form-BZjJHVRy.js","assets/fortran-free-form-D22FLkUw.js","assets/fsharp-CXgrBDvD.js","assets/gdresource-B7Tvp0Sc.js","assets/gdshader-DkwncUOv.js","assets/gdscript-DTMYz4Jt.js","assets/git-commit-F4YmCXRG.js","assets/diff-D97Zzqfu.js","assets/git-rebase-r7XF79zn.js","assets/glimmer-js-Rg0-pVw9.js","assets/glimmer-ts-U6CK756n.js","assets/hack-CaT9iCJl.js","assets/handlebars-BL8al0AC.js","assets/http-jrhK8wxY.js","assets/hurl-irOxFIW8.js","assets/csv-fuZLfV_i.js","assets/hxml-Bvhsp5Yf.js","assets/haxe-CzTSHFRz.js","assets/jinja-4LBKfQ-Z.js","assets/jison-wvAkD_A8.js","assets/julia-C8NyazO9.js","assets/r-DiinP2Uv.js","assets/latex-BdAV_C_H.js","assets/tex-CxkMU7Pf.js","assets/liquid-DYVedYrR.js","assets/marko-CPi9NSCl.js","assets/less-B1dDrJ26.js","assets/mdc-DUICxH0z.js","assets/nginx-DknmC5AR.js","assets/nim-CVrawwO9.js","assets/perl-C0TMdlhV.js","assets/php-CDn_0X-4.js","assets/pug-CGlum2m_.js","assets/qml-3beO22l8.js","assets/razor-CE9lU5zL.js","assets/csharp-K5feNrxe.js","assets/rst-B0xPkSld.js","assets/cmake-D1j8_8rp.js","assets/sas-cz2c8ADy.js","assets/shaderlab-Dg9Lc6iA.js","assets/hlsl-D3lLCCz7.js","assets/shellsession-BADoaaVG.js","assets/soy-Brmx7dQM.js","assets/sparql-rVzFXLq3.js","assets/turtle-BsS91CYL.js","assets/stata-BH5u7GGu.js","assets/svelte-3Dk4HxPD.js","assets/templ-W15q3VgB.js","assets/go-Dn2_MT6a.js","assets/ts-tags-zn1MmPIZ.js","assets/twig-CO9l9SDP.js","assets/vue-DnHKYNfI.js","assets/vue-html-CChd_i61.js","assets/vue-vine-8moa0y9V.js","assets/stylus-BEDo0Tqx.js","assets/xsl-CtQFsRM5.js"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();function sk(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Jp={exports:{}},cl={};var Lx;function nO(){if(Lx)return cl;Lx=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,s,a){var l=null;if(a!==void 0&&(l=""+a),s.key!==void 0&&(l=""+s.key),"key"in s){a={};for(var u in s)u!=="key"&&(a[u]=s[u])}else a=s;return s=a.ref,{$$typeof:t,type:r,key:l,ref:s!==void 0?s:null,props:a}}return cl.Fragment=e,cl.jsx=n,cl.jsxs=n,cl}var zx;function rO(){return zx||(zx=1,Jp.exports=nO()),Jp.exports}var x=rO(),Yp={exports:{}},ze={};var Px;function sO(){if(Px)return ze;Px=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),p=Symbol.for("react.activity"),y=Symbol.iterator;function g(D){return D===null||typeof D!="object"?null:(D=y&&D[y]||D["@@iterator"],typeof D=="function"?D:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,E={};function S(D,H,O){this.props=D,this.context=H,this.refs=E,this.updater=O||v}S.prototype.isReactComponent={},S.prototype.setState=function(D,H){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,H,"setState")},S.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function C(){}C.prototype=S.prototype;function T(D,H,O){this.props=D,this.context=H,this.refs=E,this.updater=O||v}var M=T.prototype=new C;M.constructor=T,w(M,S.prototype),M.isPureReactComponent=!0;var I=Array.isArray;function R(){}var U={H:null,A:null,T:null,S:null},q=Object.prototype.hasOwnProperty;function K(D,H,O){var le=O.ref;return{$$typeof:t,type:D,key:H,ref:le!==void 0?le:null,props:O}}function j(D,H){return K(D.type,H,D.props)}function J(D){return typeof D=="object"&&D!==null&&D.$$typeof===t}function ne(D){var H={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(O){return H[O]})}var me=/\/+/g;function X(D,H){return typeof D=="object"&&D!==null&&D.key!=null?ne(""+D.key):H.toString(36)}function F(D){switch(D.status){case"fulfilled":return D.value;case"rejected":throw D.reason;default:switch(typeof D.status=="string"?D.then(R,R):(D.status="pending",D.then(function(H){D.status==="pending"&&(D.status="fulfilled",D.value=H)},function(H){D.status==="pending"&&(D.status="rejected",D.reason=H)})),D.status){case"fulfilled":return D.value;case"rejected":throw D.reason}}throw D}function B(D,H,O,le,L){var P=typeof D;(P==="undefined"||P==="boolean")&&(D=null);var he=!1;if(D===null)he=!0;else switch(P){case"bigint":case"string":case"number":he=!0;break;case"object":switch(D.$$typeof){case t:case e:he=!0;break;case m:return he=D._init,B(he(D._payload),H,O,le,L)}}if(he)return L=L(D),he=le===""?"."+X(D,0):le,I(L)?(O="",he!=null&&(O=he.replace(me,"$&/")+"/"),B(L,H,O,"",function(Ce){return Ce})):L!=null&&(J(L)&&(L=j(L,O+(L.key==null||D&&D.key===L.key?"":(""+L.key).replace(me,"$&/")+"/")+he)),H.push(L)),1;he=0;var xe=le===""?".":le+":";if(I(D))for(var _e=0;_e<D.length;_e++)le=D[_e],P=xe+X(le,_e),he+=B(le,H,O,P,L);else if(_e=g(D),typeof _e=="function")for(D=_e.call(D),_e=0;!(le=D.next()).done;)le=le.value,P=xe+X(le,_e++),he+=B(le,H,O,P,L);else if(P==="object"){if(typeof D.then=="function")return B(F(D),H,O,le,L);throw H=String(D),Error("Objects are not valid as a React child (found: "+(H==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":H)+"). If you meant to render a collection of children, use an array instead.")}return he}function G(D,H,O){if(D==null)return D;var le=[],L=0;return B(D,le,"","",function(P){return H.call(O,P,L++)}),le}function ie(D){if(D._status===-1){var H=D._result;H=H(),H.then(function(O){(D._status===0||D._status===-1)&&(D._status=1,D._result=O)},function(O){(D._status===0||D._status===-1)&&(D._status=2,D._result=O)}),D._status===-1&&(D._status=0,D._result=H)}if(D._status===1)return D._result.default;throw D._result}var re=typeof reportError=="function"?reportError:function(D){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var H=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof D=="object"&&D!==null&&typeof D.message=="string"?String(D.message):String(D),error:D});if(!window.dispatchEvent(H))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",D);return}console.error(D)},N={map:G,forEach:function(D,H,O){G(D,function(){H.apply(this,arguments)},O)},count:function(D){var H=0;return G(D,function(){H++}),H},toArray:function(D){return G(D,function(H){return H})||[]},only:function(D){if(!J(D))throw Error("React.Children.only expected to receive a single React element child.");return D}};return ze.Activity=p,ze.Children=N,ze.Component=S,ze.Fragment=n,ze.Profiler=s,ze.PureComponent=T,ze.StrictMode=r,ze.Suspense=f,ze.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=U,ze.__COMPILER_RUNTIME={__proto__:null,c:function(D){return U.H.useMemoCache(D)}},ze.cache=function(D){return function(){return D.apply(null,arguments)}},ze.cacheSignal=function(){return null},ze.cloneElement=function(D,H,O){if(D==null)throw Error("The argument must be a React element, but you passed "+D+".");var le=w({},D.props),L=D.key;if(H!=null)for(P in H.key!==void 0&&(L=""+H.key),H)!q.call(H,P)||P==="key"||P==="__self"||P==="__source"||P==="ref"&&H.ref===void 0||(le[P]=H[P]);var P=arguments.length-2;if(P===1)le.children=O;else if(1<P){for(var he=Array(P),xe=0;xe<P;xe++)he[xe]=arguments[xe+2];le.children=he}return K(D.type,L,le)},ze.createContext=function(D){return D={$$typeof:l,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null},D.Provider=D,D.Consumer={$$typeof:a,_context:D},D},ze.createElement=function(D,H,O){var le,L={},P=null;if(H!=null)for(le in H.key!==void 0&&(P=""+H.key),H)q.call(H,le)&&le!=="key"&&le!=="__self"&&le!=="__source"&&(L[le]=H[le]);var he=arguments.length-2;if(he===1)L.children=O;else if(1<he){for(var xe=Array(he),_e=0;_e<he;_e++)xe[_e]=arguments[_e+2];L.children=xe}if(D&&D.defaultProps)for(le in he=D.defaultProps,he)L[le]===void 0&&(L[le]=he[le]);return K(D,P,L)},ze.createRef=function(){return{current:null}},ze.forwardRef=function(D){return{$$typeof:u,render:D}},ze.isValidElement=J,ze.lazy=function(D){return{$$typeof:m,_payload:{_status:-1,_result:D},_init:ie}},ze.memo=function(D,H){return{$$typeof:d,type:D,compare:H===void 0?null:H}},ze.startTransition=function(D){var H=U.T,O={};U.T=O;try{var le=D(),L=U.S;L!==null&&L(O,le),typeof le=="object"&&le!==null&&typeof le.then=="function"&&le.then(R,re)}catch(P){re(P)}finally{H!==null&&O.types!==null&&(H.types=O.types),U.T=H}},ze.unstable_useCacheRefresh=function(){return U.H.useCacheRefresh()},ze.use=function(D){return U.H.use(D)},ze.useActionState=function(D,H,O){return U.H.useActionState(D,H,O)},ze.useCallback=function(D,H){return U.H.useCallback(D,H)},ze.useContext=function(D){return U.H.useContext(D)},ze.useDebugValue=function(){},ze.useDeferredValue=function(D,H){return U.H.useDeferredValue(D,H)},ze.useEffect=function(D,H){return U.H.useEffect(D,H)},ze.useEffectEvent=function(D){return U.H.useEffectEvent(D)},ze.useId=function(){return U.H.useId()},ze.useImperativeHandle=function(D,H,O){return U.H.useImperativeHandle(D,H,O)},ze.useInsertionEffect=function(D,H){return U.H.useInsertionEffect(D,H)},ze.useLayoutEffect=function(D,H){return U.H.useLayoutEffect(D,H)},ze.useMemo=function(D,H){return U.H.useMemo(D,H)},ze.useOptimistic=function(D,H){return U.H.useOptimistic(D,H)},ze.useReducer=function(D,H,O){return U.H.useReducer(D,H,O)},ze.useRef=function(D){return U.H.useRef(D)},ze.useState=function(D){return U.H.useState(D)},ze.useSyncExternalStore=function(D,H,O){return U.H.useSyncExternalStore(D,H,O)},ze.useTransition=function(){return U.H.useTransition()},ze.version="19.2.3",ze}var Bx;function od(){return Bx||(Bx=1,Yp.exports=sO()),Yp.exports}var Z=od(),Wp={exports:{}},ul={},Xp={exports:{}},em={};var Ux;function iO(){return Ux||(Ux=1,(function(t){function e(B,G){var ie=B.length;B.push(G);e:for(;0<ie;){var re=ie-1>>>1,N=B[re];if(0<s(N,G))B[re]=G,B[ie]=N,ie=re;else break e}}function n(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var G=B[0],ie=B.pop();if(ie!==G){B[0]=ie;e:for(var re=0,N=B.length,D=N>>>1;re<D;){var H=2*(re+1)-1,O=B[H],le=H+1,L=B[le];if(0>s(O,ie))le<N&&0>s(L,O)?(B[re]=L,B[le]=ie,re=le):(B[re]=O,B[H]=ie,re=H);else if(le<N&&0>s(L,ie))B[re]=L,B[le]=ie,re=le;else break e}}return G}function s(B,G){var ie=B.sortIndex-G.sortIndex;return ie!==0?ie:B.id-G.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var l=Date,u=l.now();t.unstable_now=function(){return l.now()-u}}var f=[],d=[],m=1,p=null,y=3,g=!1,v=!1,w=!1,E=!1,S=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;function M(B){for(var G=n(d);G!==null;){if(G.callback===null)r(d);else if(G.startTime<=B)r(d),G.sortIndex=G.expirationTime,e(f,G);else break;G=n(d)}}function I(B){if(w=!1,M(B),!v)if(n(f)!==null)v=!0,R||(R=!0,ne());else{var G=n(d);G!==null&&F(I,G.startTime-B)}}var R=!1,U=-1,q=5,K=-1;function j(){return E?!0:!(t.unstable_now()-K<q)}function J(){if(E=!1,R){var B=t.unstable_now();K=B;var G=!0;try{e:{v=!1,w&&(w=!1,C(U),U=-1),g=!0;var ie=y;try{t:{for(M(B),p=n(f);p!==null&&!(p.expirationTime>B&&j());){var re=p.callback;if(typeof re=="function"){p.callback=null,y=p.priorityLevel;var N=re(p.expirationTime<=B);if(B=t.unstable_now(),typeof N=="function"){p.callback=N,M(B),G=!0;break t}p===n(f)&&r(f),M(B)}else r(f);p=n(f)}if(p!==null)G=!0;else{var D=n(d);D!==null&&F(I,D.startTime-B),G=!1}}break e}finally{p=null,y=ie,g=!1}G=void 0}}finally{G?ne():R=!1}}}var ne;if(typeof T=="function")ne=function(){T(J)};else if(typeof MessageChannel<"u"){var me=new MessageChannel,X=me.port2;me.port1.onmessage=J,ne=function(){X.postMessage(null)}}else ne=function(){S(J,0)};function F(B,G){U=S(function(){B(t.unstable_now())},G)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):q=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_next=function(B){switch(y){case 1:case 2:case 3:var G=3;break;default:G=y}var ie=y;y=G;try{return B()}finally{y=ie}},t.unstable_requestPaint=function(){E=!0},t.unstable_runWithPriority=function(B,G){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var ie=y;y=B;try{return G()}finally{y=ie}},t.unstable_scheduleCallback=function(B,G,ie){var re=t.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?re+ie:re):ie=re,B){case 1:var N=-1;break;case 2:N=250;break;case 5:N=1073741823;break;case 4:N=1e4;break;default:N=5e3}return N=ie+N,B={id:m++,callback:G,priorityLevel:B,startTime:ie,expirationTime:N,sortIndex:-1},ie>re?(B.sortIndex=ie,e(d,B),n(f)===null&&B===n(d)&&(w?(C(U),U=-1):w=!0,F(I,ie-re))):(B.sortIndex=N,e(f,B),v||g||(v=!0,R||(R=!0,ne()))),B},t.unstable_shouldYield=j,t.unstable_wrapCallback=function(B){var G=y;return function(){var ie=y;y=G;try{return B.apply(this,arguments)}finally{y=ie}}}})(em)),em}var $x;function aO(){return $x||($x=1,Xp.exports=iO()),Xp.exports}var tm={exports:{}},kn={};var qx;function oO(){if(qx)return kn;qx=1;var t=od();function e(f){var d="https://react.dev/errors/"+f;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)d+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+f+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},s=Symbol.for("react.portal");function a(f,d,m){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:p==null?null:""+p,children:f,containerInfo:d,implementation:m}}var l=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(f,d){if(f==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return kn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,kn.createPortal=function(f,d){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(e(299));return a(f,d,null,m)},kn.flushSync=function(f){var d=l.T,m=r.p;try{if(l.T=null,r.p=2,f)return f()}finally{l.T=d,r.p=m,r.d.f()}},kn.preconnect=function(f,d){typeof f=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,r.d.C(f,d))},kn.prefetchDNS=function(f){typeof f=="string"&&r.d.D(f)},kn.preinit=function(f,d){if(typeof f=="string"&&d&&typeof d.as=="string"){var m=d.as,p=u(m,d.crossOrigin),y=typeof d.integrity=="string"?d.integrity:void 0,g=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;m==="style"?r.d.S(f,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:p,integrity:y,fetchPriority:g}):m==="script"&&r.d.X(f,{crossOrigin:p,integrity:y,fetchPriority:g,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},kn.preinitModule=function(f,d){if(typeof f=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var m=u(d.as,d.crossOrigin);r.d.M(f,{crossOrigin:m,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&r.d.M(f)},kn.preload=function(f,d){if(typeof f=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var m=d.as,p=u(m,d.crossOrigin);r.d.L(f,m,{crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},kn.preloadModule=function(f,d){if(typeof f=="string")if(d){var m=u(d.as,d.crossOrigin);r.d.m(f,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:m,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else r.d.m(f)},kn.requestFormReset=function(f){r.d.r(f)},kn.unstable_batchedUpdates=function(f,d){return f(d)},kn.useFormState=function(f,d,m){return l.H.useFormState(f,d,m)},kn.useFormStatus=function(){return l.H.useHostTransitionStatus()},kn.version="19.2.3",kn}var Fx;function ik(){if(Fx)return tm.exports;Fx=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),tm.exports=oO(),tm.exports}var Vx;function lO(){if(Vx)return ul;Vx=1;var t=aO(),e=od(),n=ik();function r(i){var o="https://react.dev/errors/"+i;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)o+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function a(i){var o=i,c=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,(o.flags&4098)!==0&&(c=o.return),i=o.return;while(i)}return o.tag===3?c:null}function l(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function u(i){if(i.tag===31){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function f(i){if(a(i)!==i)throw Error(r(188))}function d(i){var o=i.alternate;if(!o){if(o=a(i),o===null)throw Error(r(188));return o!==i?null:i}for(var c=i,h=o;;){var b=c.return;if(b===null)break;var _=b.alternate;if(_===null){if(h=b.return,h!==null){c=h;continue}break}if(b.child===_.child){for(_=b.child;_;){if(_===c)return f(b),i;if(_===h)return f(b),o;_=_.sibling}throw Error(r(188))}if(c.return!==h.return)c=b,h=_;else{for(var k=!1,A=b.child;A;){if(A===c){k=!0,c=b,h=_;break}if(A===h){k=!0,h=b,c=_;break}A=A.sibling}if(!k){for(A=_.child;A;){if(A===c){k=!0,c=_,h=b;break}if(A===h){k=!0,h=_,c=b;break}A=A.sibling}if(!k)throw Error(r(189))}}if(c.alternate!==h)throw Error(r(190))}if(c.tag!==3)throw Error(r(188));return c.stateNode.current===c?i:o}function m(i){var o=i.tag;if(o===5||o===26||o===27||o===6)return i;for(i=i.child;i!==null;){if(o=m(i),o!==null)return o;i=i.sibling}return null}var p=Object.assign,y=Symbol.for("react.element"),g=Symbol.for("react.transitional.element"),v=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),C=Symbol.for("react.consumer"),T=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),U=Symbol.for("react.memo"),q=Symbol.for("react.lazy"),K=Symbol.for("react.activity"),j=Symbol.for("react.memo_cache_sentinel"),J=Symbol.iterator;function ne(i){return i===null||typeof i!="object"?null:(i=J&&i[J]||i["@@iterator"],typeof i=="function"?i:null)}var me=Symbol.for("react.client.reference");function X(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===me?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case w:return"Fragment";case S:return"Profiler";case E:return"StrictMode";case I:return"Suspense";case R:return"SuspenseList";case K:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case v:return"Portal";case T:return i.displayName||"Context";case C:return(i._context.displayName||"Context")+".Consumer";case M:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case U:return o=i.displayName||null,o!==null?o:X(i.type)||"Memo";case q:o=i._payload,i=i._init;try{return X(i(o))}catch{}}return null}var F=Array.isArray,B=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ie={pending:!1,data:null,method:null,action:null},re=[],N=-1;function D(i){return{current:i}}function H(i){0>N||(i.current=re[N],re[N]=null,N--)}function O(i,o){N++,re[N]=i.current,i.current=o}var le=D(null),L=D(null),P=D(null),he=D(null);function xe(i,o){switch(O(P,o),O(L,i),O(le,null),o.nodeType){case 9:case 11:i=(i=o.documentElement)&&(i=i.namespaceURI)?ix(i):0;break;default:if(i=o.tagName,o=o.namespaceURI)o=ix(o),i=ax(o,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}H(le),O(le,i)}function _e(){H(le),H(L),H(P)}function Ce(i){i.memoizedState!==null&&O(he,i);var o=le.current,c=ax(o,i.type);o!==c&&(O(L,i),O(le,c))}function Me(i){L.current===i&&(H(le),H(L)),he.current===i&&(H(he),il._currentValue=ie)}var st,Et;function Nt(i){if(st===void 0)try{throw Error()}catch(c){var o=c.stack.trim().match(/\n( *(at )?)/);st=o&&o[1]||"",Et=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+st+i+Et}var fn=!1;function rn(i,o){if(!i||fn)return"";fn=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(o){var fe=function(){throw Error()};if(Object.defineProperty(fe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(fe,[])}catch(ae){var te=ae}Reflect.construct(i,[],fe)}else{try{fe.call()}catch(ae){te=ae}i.call(fe.prototype)}}else{try{throw Error()}catch(ae){te=ae}(fe=i())&&typeof fe.catch=="function"&&fe.catch(function(){})}}catch(ae){if(ae&&te&&typeof ae.stack=="string")return[ae.stack,te.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var b=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");b&&b.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=h.DetermineComponentFrameRoot(),k=_[0],A=_[1];if(k&&A){var $=k.split(`
`),W=A.split(`
`);for(b=h=0;h<$.length&&!$[h].includes("DetermineComponentFrameRoot");)h++;for(;b<W.length&&!W[b].includes("DetermineComponentFrameRoot");)b++;if(h===$.length||b===W.length)for(h=$.length-1,b=W.length-1;1<=h&&0<=b&&$[h]!==W[b];)b--;for(;1<=h&&0<=b;h--,b--)if($[h]!==W[b]){if(h!==1||b!==1)do if(h--,b--,0>b||$[h]!==W[b]){var oe=`
`+$[h].replace(" at new "," at ");return i.displayName&&oe.includes("<anonymous>")&&(oe=oe.replace("<anonymous>",i.displayName)),oe}while(1<=h&&0<=b);break}}}finally{fn=!1,Error.prepareStackTrace=c}return(c=i?i.displayName||i.name:"")?Nt(c):""}function Xn(i,o){switch(i.tag){case 26:case 27:case 5:return Nt(i.type);case 16:return Nt("Lazy");case 13:return i.child!==o&&o!==null?Nt("Suspense Fallback"):Nt("Suspense");case 19:return Nt("SuspenseList");case 0:case 15:return rn(i.type,!1);case 11:return rn(i.type.render,!1);case 1:return rn(i.type,!0);case 31:return Nt("Activity");default:return""}}function er(i){try{var o="",c=null;do o+=Xn(i,c),c=i,i=i.return;while(i);return o}catch(h){return`
Error generating stack: `+h.message+`
`+h.stack}}var Sn=Object.prototype.hasOwnProperty,dn=t.unstable_scheduleCallback,ke=t.unstable_cancelCallback,Ve=t.unstable_shouldYield,He=t.unstable_requestPaint,Ae=t.unstable_now,St=t.unstable_getCurrentPriorityLevel,se=t.unstable_ImmediatePriority,ge=t.unstable_UserBlockingPriority,ue=t.unstable_NormalPriority,ye=t.unstable_LowPriority,ve=t.unstable_IdlePriority,Ue=t.log,mt=t.unstable_setDisableYieldValue,vt=null,lt=null;function ct(i){if(typeof Ue=="function"&&mt(i),lt&&typeof lt.setStrictMode=="function")try{lt.setStrictMode(vt,i)}catch{}}var Ne=Math.clz32?Math.clz32:ut,gt=Math.log,Ge=Math.LN2;function ut(i){return i>>>=0,i===0?32:31-(gt(i)/Ge|0)|0}var ft=256,rt=262144,tt=4194304;function jt(i){var o=i&42;if(o!==0)return o;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function Nn(i,o,c){var h=i.pendingLanes;if(h===0)return 0;var b=0,_=i.suspendedLanes,k=i.pingedLanes;i=i.warmLanes;var A=h&134217727;return A!==0?(h=A&~_,h!==0?b=jt(h):(k&=A,k!==0?b=jt(k):c||(c=A&~i,c!==0&&(b=jt(c))))):(A=h&~_,A!==0?b=jt(A):k!==0?b=jt(k):c||(c=h&~i,c!==0&&(b=jt(c)))),b===0?0:o!==0&&o!==b&&(o&_)===0&&(_=b&-b,c=o&-o,_>=c||_===32&&(c&4194048)!==0)?o:b}function Ct(i,o){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&o)===0}function Bn(i,o){switch(i){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function di(){var i=tt;return tt<<=1,(tt&62914560)===0&&(tt=4194304),i}function Ji(i){for(var o=[],c=0;31>c;c++)o.push(i);return o}function Un(i,o){i.pendingLanes|=o,o!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function bo(i,o,c,h,b,_){var k=i.pendingLanes;i.pendingLanes=c,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=c,i.entangledLanes&=c,i.errorRecoveryDisabledLanes&=c,i.shellSuspendCounter=0;var A=i.entanglements,$=i.expirationTimes,W=i.hiddenUpdates;for(c=k&~c;0<c;){var oe=31-Ne(c),fe=1<<oe;A[oe]=0,$[oe]=-1;var te=W[oe];if(te!==null)for(W[oe]=null,oe=0;oe<te.length;oe++){var ae=te[oe];ae!==null&&(ae.lane&=-536870913)}c&=~fe}h!==0&&_o(i,h,0),_!==0&&b===0&&i.tag!==0&&(i.suspendedLanes|=_&~(k&~o))}function _o(i,o,c){i.pendingLanes|=o,i.suspendedLanes&=~o;var h=31-Ne(o);i.entangledLanes|=o,i.entanglements[h]=i.entanglements[h]|1073741824|c&261930}function bc(i,o){var c=i.entangledLanes|=o;for(i=i.entanglements;c;){var h=31-Ne(c),b=1<<h;b&o|i[h]&o&&(i[h]|=o),c&=~b}}function hi(i,o){var c=o&-o;return c=(c&42)!==0?1:Bd(c),(c&(i.suspendedLanes|o))!==0?0:c}function Bd(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Ud(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function V0(){var i=G.p;return i!==0?i:(i=window.event,i===void 0?32:Rx(i.type))}function H0(i,o){var c=G.p;try{return G.p=i,o()}finally{G.p=c}}var As=Math.random().toString(36).slice(2),hn="__reactFiber$"+As,$n="__reactProps$"+As,Yi="__reactContainer$"+As,$d="__reactEvents$"+As,HA="__reactListeners$"+As,GA="__reactHandles$"+As,G0="__reactResources$"+As,vo="__reactMarker$"+As;function qd(i){delete i[hn],delete i[$n],delete i[$d],delete i[HA],delete i[GA]}function Wi(i){var o=i[hn];if(o)return o;for(var c=i.parentNode;c;){if(o=c[Yi]||c[hn]){if(c=o.alternate,o.child!==null||c!==null&&c.child!==null)for(i=hx(i);i!==null;){if(c=i[hn])return c;i=hx(i)}return o}i=c,c=i.parentNode}return null}function Xi(i){if(i=i[hn]||i[Yi]){var o=i.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return i}return null}function xo(i){var o=i.tag;if(o===5||o===26||o===27||o===6)return i.stateNode;throw Error(r(33))}function ea(i){var o=i[G0];return o||(o=i[G0]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function sn(i){i[vo]=!0}var K0=new Set,Z0={};function pi(i,o){ta(i,o),ta(i+"Capture",o)}function ta(i,o){for(Z0[i]=o,i=0;i<o.length;i++)K0.add(o[i])}var KA=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Q0={},J0={};function ZA(i){return Sn.call(J0,i)?!0:Sn.call(Q0,i)?!1:KA.test(i)?J0[i]=!0:(Q0[i]=!0,!1)}function _c(i,o,c){if(ZA(o))if(c===null)i.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":i.removeAttribute(o);return;case"boolean":var h=o.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){i.removeAttribute(o);return}}i.setAttribute(o,""+c)}}function vc(i,o,c){if(c===null)i.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(o);return}i.setAttribute(o,""+c)}}function ss(i,o,c,h){if(h===null)i.removeAttribute(c);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(c);return}i.setAttributeNS(o,c,""+h)}}function mr(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Y0(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function QA(i,o,c){var h=Object.getOwnPropertyDescriptor(i.constructor.prototype,o);if(!i.hasOwnProperty(o)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var b=h.get,_=h.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return b.call(this)},set:function(k){c=""+k,_.call(this,k)}}),Object.defineProperty(i,o,{enumerable:h.enumerable}),{getValue:function(){return c},setValue:function(k){c=""+k},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function Fd(i){if(!i._valueTracker){var o=Y0(i)?"checked":"value";i._valueTracker=QA(i,o,""+i[o])}}function W0(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var c=o.getValue(),h="";return i&&(h=Y0(i)?i.checked?"true":"false":i.value),i=h,i!==c?(o.setValue(i),!0):!1}function xc(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var JA=/[\n"\\]/g;function gr(i){return i.replace(JA,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function Vd(i,o,c,h,b,_,k,A){i.name="",k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"?i.type=k:i.removeAttribute("type"),o!=null?k==="number"?(o===0&&i.value===""||i.value!=o)&&(i.value=""+mr(o)):i.value!==""+mr(o)&&(i.value=""+mr(o)):k!=="submit"&&k!=="reset"||i.removeAttribute("value"),o!=null?Hd(i,k,mr(o)):c!=null?Hd(i,k,mr(c)):h!=null&&i.removeAttribute("value"),b==null&&_!=null&&(i.defaultChecked=!!_),b!=null&&(i.checked=b&&typeof b!="function"&&typeof b!="symbol"),A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?i.name=""+mr(A):i.removeAttribute("name")}function X0(i,o,c,h,b,_,k,A){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(i.type=_),o!=null||c!=null){if(!(_!=="submit"&&_!=="reset"||o!=null)){Fd(i);return}c=c!=null?""+mr(c):"",o=o!=null?""+mr(o):c,A||o===i.value||(i.value=o),i.defaultValue=o}h=h??b,h=typeof h!="function"&&typeof h!="symbol"&&!!h,i.checked=A?i.checked:!!h,i.defaultChecked=!!h,k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"&&(i.name=k),Fd(i)}function Hd(i,o,c){o==="number"&&xc(i.ownerDocument)===i||i.defaultValue===""+c||(i.defaultValue=""+c)}function na(i,o,c,h){if(i=i.options,o){o={};for(var b=0;b<c.length;b++)o["$"+c[b]]=!0;for(c=0;c<i.length;c++)b=o.hasOwnProperty("$"+i[c].value),i[c].selected!==b&&(i[c].selected=b),b&&h&&(i[c].defaultSelected=!0)}else{for(c=""+mr(c),o=null,b=0;b<i.length;b++){if(i[b].value===c){i[b].selected=!0,h&&(i[b].defaultSelected=!0);return}o!==null||i[b].disabled||(o=i[b])}o!==null&&(o.selected=!0)}}function eb(i,o,c){if(o!=null&&(o=""+mr(o),o!==i.value&&(i.value=o),c==null)){i.defaultValue!==o&&(i.defaultValue=o);return}i.defaultValue=c!=null?""+mr(c):""}function tb(i,o,c,h){if(o==null){if(h!=null){if(c!=null)throw Error(r(92));if(F(h)){if(1<h.length)throw Error(r(93));h=h[0]}c=h}c==null&&(c=""),o=c}c=mr(o),i.defaultValue=c,h=i.textContent,h===c&&h!==""&&h!==null&&(i.value=h),Fd(i)}function ra(i,o){if(o){var c=i.firstChild;if(c&&c===i.lastChild&&c.nodeType===3){c.nodeValue=o;return}}i.textContent=o}var YA=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function nb(i,o,c){var h=o.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?h?i.setProperty(o,""):o==="float"?i.cssFloat="":i[o]="":h?i.setProperty(o,c):typeof c!="number"||c===0||YA.has(o)?o==="float"?i.cssFloat=c:i[o]=(""+c).trim():i[o]=c+"px"}function rb(i,o,c){if(o!=null&&typeof o!="object")throw Error(r(62));if(i=i.style,c!=null){for(var h in c)!c.hasOwnProperty(h)||o!=null&&o.hasOwnProperty(h)||(h.indexOf("--")===0?i.setProperty(h,""):h==="float"?i.cssFloat="":i[h]="");for(var b in o)h=o[b],o.hasOwnProperty(b)&&c[b]!==h&&nb(i,b,h)}else for(var _ in o)o.hasOwnProperty(_)&&nb(i,_,o[_])}function Gd(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var WA=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),XA=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function wc(i){return XA.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function is(){}var Kd=null;function Zd(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var sa=null,ia=null;function sb(i){var o=Xi(i);if(o&&(i=o.stateNode)){var c=i[$n]||null;e:switch(i=o.stateNode,o.type){case"input":if(Vd(i,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),o=c.name,c.type==="radio"&&o!=null){for(c=i;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+gr(""+o)+'"][type="radio"]'),o=0;o<c.length;o++){var h=c[o];if(h!==i&&h.form===i.form){var b=h[$n]||null;if(!b)throw Error(r(90));Vd(h,b.value,b.defaultValue,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name)}}for(o=0;o<c.length;o++)h=c[o],h.form===i.form&&W0(h)}break e;case"textarea":eb(i,c.value,c.defaultValue);break e;case"select":o=c.value,o!=null&&na(i,!!c.multiple,o,!1)}}}var Qd=!1;function ib(i,o,c){if(Qd)return i(o,c);Qd=!0;try{var h=i(o);return h}finally{if(Qd=!1,(sa!==null||ia!==null)&&(cu(),sa&&(o=sa,i=ia,ia=sa=null,sb(o),i)))for(o=0;o<i.length;o++)sb(i[o])}}function wo(i,o){var c=i.stateNode;if(c===null)return null;var h=c[$n]||null;if(h===null)return null;c=h[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(i=i.type,h=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!h;break e;default:i=!1}if(i)return null;if(c&&typeof c!="function")throw Error(r(231,o,typeof c));return c}var as=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Jd=!1;if(as)try{var So={};Object.defineProperty(So,"passive",{get:function(){Jd=!0}}),window.addEventListener("test",So,So),window.removeEventListener("test",So,So)}catch{Jd=!1}var Rs=null,Yd=null,Sc=null;function ab(){if(Sc)return Sc;var i,o=Yd,c=o.length,h,b="value"in Rs?Rs.value:Rs.textContent,_=b.length;for(i=0;i<c&&o[i]===b[i];i++);var k=c-i;for(h=1;h<=k&&o[c-h]===b[_-h];h++);return Sc=b.slice(i,1<h?1-h:void 0)}function kc(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function Ec(){return!0}function ob(){return!1}function qn(i){function o(c,h,b,_,k){this._reactName=c,this._targetInst=b,this.type=h,this.nativeEvent=_,this.target=k,this.currentTarget=null;for(var A in i)i.hasOwnProperty(A)&&(c=i[A],this[A]=c?c(_):_[A]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?Ec:ob,this.isPropagationStopped=ob,this}return p(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=Ec)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=Ec)},persist:function(){},isPersistent:Ec}),o}var mi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Cc=qn(mi),ko=p({},mi,{view:0,detail:0}),e2=qn(ko),Wd,Xd,Eo,Tc=p({},ko,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:th,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Eo&&(Eo&&i.type==="mousemove"?(Wd=i.screenX-Eo.screenX,Xd=i.screenY-Eo.screenY):Xd=Wd=0,Eo=i),Wd)},movementY:function(i){return"movementY"in i?i.movementY:Xd}}),lb=qn(Tc),t2=p({},Tc,{dataTransfer:0}),n2=qn(t2),r2=p({},ko,{relatedTarget:0}),eh=qn(r2),s2=p({},mi,{animationName:0,elapsedTime:0,pseudoElement:0}),i2=qn(s2),a2=p({},mi,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),o2=qn(a2),l2=p({},mi,{data:0}),cb=qn(l2),c2={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},u2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},f2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function d2(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=f2[i])?!!o[i]:!1}function th(){return d2}var h2=p({},ko,{key:function(i){if(i.key){var o=c2[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=kc(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?u2[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:th,charCode:function(i){return i.type==="keypress"?kc(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?kc(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),p2=qn(h2),m2=p({},Tc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ub=qn(m2),g2=p({},ko,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:th}),y2=qn(g2),b2=p({},mi,{propertyName:0,elapsedTime:0,pseudoElement:0}),_2=qn(b2),v2=p({},Tc,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),x2=qn(v2),w2=p({},mi,{newState:0,oldState:0}),S2=qn(w2),k2=[9,13,27,32],nh=as&&"CompositionEvent"in window,Co=null;as&&"documentMode"in document&&(Co=document.documentMode);var E2=as&&"TextEvent"in window&&!Co,fb=as&&(!nh||Co&&8<Co&&11>=Co),db=" ",hb=!1;function pb(i,o){switch(i){case"keyup":return k2.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function mb(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var aa=!1;function C2(i,o){switch(i){case"compositionend":return mb(o);case"keypress":return o.which!==32?null:(hb=!0,db);case"textInput":return i=o.data,i===db&&hb?null:i;default:return null}}function T2(i,o){if(aa)return i==="compositionend"||!nh&&pb(i,o)?(i=ab(),Sc=Yd=Rs=null,aa=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return fb&&o.locale!=="ko"?null:o.data;default:return null}}var A2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function gb(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!A2[i.type]:o==="textarea"}function yb(i,o,c,h){sa?ia?ia.push(h):ia=[h]:sa=h,o=gu(o,"onChange"),0<o.length&&(c=new Cc("onChange","change",null,c,h),i.push({event:c,listeners:o}))}var To=null,Ao=null;function R2(i){Xv(i,0)}function Ac(i){var o=xo(i);if(W0(o))return i}function bb(i,o){if(i==="change")return o}var _b=!1;if(as){var rh;if(as){var sh="oninput"in document;if(!sh){var vb=document.createElement("div");vb.setAttribute("oninput","return;"),sh=typeof vb.oninput=="function"}rh=sh}else rh=!1;_b=rh&&(!document.documentMode||9<document.documentMode)}function xb(){To&&(To.detachEvent("onpropertychange",wb),Ao=To=null)}function wb(i){if(i.propertyName==="value"&&Ac(Ao)){var o=[];yb(o,Ao,i,Zd(i)),ib(R2,o)}}function O2(i,o,c){i==="focusin"?(xb(),To=o,Ao=c,To.attachEvent("onpropertychange",wb)):i==="focusout"&&xb()}function N2(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Ac(Ao)}function I2(i,o){if(i==="click")return Ac(o)}function M2(i,o){if(i==="input"||i==="change")return Ac(o)}function D2(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var tr=typeof Object.is=="function"?Object.is:D2;function Ro(i,o){if(tr(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var c=Object.keys(i),h=Object.keys(o);if(c.length!==h.length)return!1;for(h=0;h<c.length;h++){var b=c[h];if(!Sn.call(o,b)||!tr(i[b],o[b]))return!1}return!0}function Sb(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function kb(i,o){var c=Sb(i);i=0;for(var h;c;){if(c.nodeType===3){if(h=i+c.textContent.length,i<=o&&h>=o)return{node:c,offset:o-i};i=h}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=Sb(c)}}function Eb(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?Eb(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function Cb(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var o=xc(i.document);o instanceof i.HTMLIFrameElement;){try{var c=typeof o.contentWindow.location.href=="string"}catch{c=!1}if(c)i=o.contentWindow;else break;o=xc(i.document)}return o}function ih(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}var j2=as&&"documentMode"in document&&11>=document.documentMode,oa=null,ah=null,Oo=null,oh=!1;function Tb(i,o,c){var h=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;oh||oa==null||oa!==xc(h)||(h=oa,"selectionStart"in h&&ih(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),Oo&&Ro(Oo,h)||(Oo=h,h=gu(ah,"onSelect"),0<h.length&&(o=new Cc("onSelect","select",null,o,c),i.push({event:o,listeners:h}),o.target=oa)))}function gi(i,o){var c={};return c[i.toLowerCase()]=o.toLowerCase(),c["Webkit"+i]="webkit"+o,c["Moz"+i]="moz"+o,c}var la={animationend:gi("Animation","AnimationEnd"),animationiteration:gi("Animation","AnimationIteration"),animationstart:gi("Animation","AnimationStart"),transitionrun:gi("Transition","TransitionRun"),transitionstart:gi("Transition","TransitionStart"),transitioncancel:gi("Transition","TransitionCancel"),transitionend:gi("Transition","TransitionEnd")},lh={},Ab={};as&&(Ab=document.createElement("div").style,"AnimationEvent"in window||(delete la.animationend.animation,delete la.animationiteration.animation,delete la.animationstart.animation),"TransitionEvent"in window||delete la.transitionend.transition);function yi(i){if(lh[i])return lh[i];if(!la[i])return i;var o=la[i],c;for(c in o)if(o.hasOwnProperty(c)&&c in Ab)return lh[i]=o[c];return i}var Rb=yi("animationend"),Ob=yi("animationiteration"),Nb=yi("animationstart"),L2=yi("transitionrun"),z2=yi("transitionstart"),P2=yi("transitioncancel"),Ib=yi("transitionend"),Mb=new Map,ch="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ch.push("scrollEnd");function Dr(i,o){Mb.set(i,o),pi(o,[i])}var Rc=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},yr=[],ca=0,uh=0;function Oc(){for(var i=ca,o=uh=ca=0;o<i;){var c=yr[o];yr[o++]=null;var h=yr[o];yr[o++]=null;var b=yr[o];yr[o++]=null;var _=yr[o];if(yr[o++]=null,h!==null&&b!==null){var k=h.pending;k===null?b.next=b:(b.next=k.next,k.next=b),h.pending=b}_!==0&&Db(c,b,_)}}function Nc(i,o,c,h){yr[ca++]=i,yr[ca++]=o,yr[ca++]=c,yr[ca++]=h,uh|=h,i.lanes|=h,i=i.alternate,i!==null&&(i.lanes|=h)}function fh(i,o,c,h){return Nc(i,o,c,h),Ic(i)}function bi(i,o){return Nc(i,null,null,o),Ic(i)}function Db(i,o,c){i.lanes|=c;var h=i.alternate;h!==null&&(h.lanes|=c);for(var b=!1,_=i.return;_!==null;)_.childLanes|=c,h=_.alternate,h!==null&&(h.childLanes|=c),_.tag===22&&(i=_.stateNode,i===null||i._visibility&1||(b=!0)),i=_,_=_.return;return i.tag===3?(_=i.stateNode,b&&o!==null&&(b=31-Ne(c),i=_.hiddenUpdates,h=i[b],h===null?i[b]=[o]:h.push(o),o.lane=c|536870912),_):null}function Ic(i){if(50<Wo)throw Wo=0,vp=null,Error(r(185));for(var o=i.return;o!==null;)i=o,o=i.return;return i.tag===3?i.stateNode:null}var ua={};function B2(i,o,c,h){this.tag=i,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function nr(i,o,c,h){return new B2(i,o,c,h)}function dh(i){return i=i.prototype,!(!i||!i.isReactComponent)}function os(i,o){var c=i.alternate;return c===null?(c=nr(i.tag,o,i.key,i.mode),c.elementType=i.elementType,c.type=i.type,c.stateNode=i.stateNode,c.alternate=i,i.alternate=c):(c.pendingProps=o,c.type=i.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=i.flags&65011712,c.childLanes=i.childLanes,c.lanes=i.lanes,c.child=i.child,c.memoizedProps=i.memoizedProps,c.memoizedState=i.memoizedState,c.updateQueue=i.updateQueue,o=i.dependencies,c.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},c.sibling=i.sibling,c.index=i.index,c.ref=i.ref,c.refCleanup=i.refCleanup,c}function jb(i,o){i.flags&=65011714;var c=i.alternate;return c===null?(i.childLanes=0,i.lanes=o,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=c.childLanes,i.lanes=c.lanes,i.child=c.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=c.memoizedProps,i.memoizedState=c.memoizedState,i.updateQueue=c.updateQueue,i.type=c.type,o=c.dependencies,i.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),i}function Mc(i,o,c,h,b,_){var k=0;if(h=i,typeof i=="function")dh(i)&&(k=1);else if(typeof i=="string")k=VR(i,c,le.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case K:return i=nr(31,c,o,b),i.elementType=K,i.lanes=_,i;case w:return _i(c.children,b,_,o);case E:k=8,b|=24;break;case S:return i=nr(12,c,o,b|2),i.elementType=S,i.lanes=_,i;case I:return i=nr(13,c,o,b),i.elementType=I,i.lanes=_,i;case R:return i=nr(19,c,o,b),i.elementType=R,i.lanes=_,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case T:k=10;break e;case C:k=9;break e;case M:k=11;break e;case U:k=14;break e;case q:k=16,h=null;break e}k=29,c=Error(r(130,i===null?"null":typeof i,"")),h=null}return o=nr(k,c,o,b),o.elementType=i,o.type=h,o.lanes=_,o}function _i(i,o,c,h){return i=nr(7,i,h,o),i.lanes=c,i}function hh(i,o,c){return i=nr(6,i,null,o),i.lanes=c,i}function Lb(i){var o=nr(18,null,null,0);return o.stateNode=i,o}function ph(i,o,c){return o=nr(4,i.children!==null?i.children:[],i.key,o),o.lanes=c,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}var zb=new WeakMap;function br(i,o){if(typeof i=="object"&&i!==null){var c=zb.get(i);return c!==void 0?c:(o={value:i,source:o,stack:er(o)},zb.set(i,o),o)}return{value:i,source:o,stack:er(o)}}var fa=[],da=0,Dc=null,No=0,_r=[],vr=0,Os=null,$r=1,qr="";function ls(i,o){fa[da++]=No,fa[da++]=Dc,Dc=i,No=o}function Pb(i,o,c){_r[vr++]=$r,_r[vr++]=qr,_r[vr++]=Os,Os=i;var h=$r;i=qr;var b=32-Ne(h)-1;h&=~(1<<b),c+=1;var _=32-Ne(o)+b;if(30<_){var k=b-b%5;_=(h&(1<<k)-1).toString(32),h>>=k,b-=k,$r=1<<32-Ne(o)+b|c<<b|h,qr=_+i}else $r=1<<_|c<<b|h,qr=i}function mh(i){i.return!==null&&(ls(i,1),Pb(i,1,0))}function gh(i){for(;i===Dc;)Dc=fa[--da],fa[da]=null,No=fa[--da],fa[da]=null;for(;i===Os;)Os=_r[--vr],_r[vr]=null,qr=_r[--vr],_r[vr]=null,$r=_r[--vr],_r[vr]=null}function Bb(i,o){_r[vr++]=$r,_r[vr++]=qr,_r[vr++]=Os,$r=o.id,qr=o.overflow,Os=i}var pn=null,Tt=null,et=!1,Ns=null,xr=!1,yh=Error(r(519));function Is(i){var o=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Io(br(o,i)),yh}function Ub(i){var o=i.stateNode,c=i.type,h=i.memoizedProps;switch(o[hn]=i,o[$n]=h,c){case"dialog":Ze("cancel",o),Ze("close",o);break;case"iframe":case"object":case"embed":Ze("load",o);break;case"video":case"audio":for(c=0;c<el.length;c++)Ze(el[c],o);break;case"source":Ze("error",o);break;case"img":case"image":case"link":Ze("error",o),Ze("load",o);break;case"details":Ze("toggle",o);break;case"input":Ze("invalid",o),X0(o,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0);break;case"select":Ze("invalid",o);break;case"textarea":Ze("invalid",o),tb(o,h.value,h.defaultValue,h.children)}c=h.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||o.textContent===""+c||h.suppressHydrationWarning===!0||rx(o.textContent,c)?(h.popover!=null&&(Ze("beforetoggle",o),Ze("toggle",o)),h.onScroll!=null&&Ze("scroll",o),h.onScrollEnd!=null&&Ze("scrollend",o),h.onClick!=null&&(o.onclick=is),o=!0):o=!1,o||Is(i,!0)}function $b(i){for(pn=i.return;pn;)switch(pn.tag){case 5:case 31:case 13:xr=!1;return;case 27:case 3:xr=!0;return;default:pn=pn.return}}function ha(i){if(i!==pn)return!1;if(!et)return $b(i),et=!0,!1;var o=i.tag,c;if((c=o!==3&&o!==27)&&((c=o===5)&&(c=i.type,c=!(c!=="form"&&c!=="button")||jp(i.type,i.memoizedProps)),c=!c),c&&Tt&&Is(i),$b(i),o===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));Tt=dx(i)}else if(o===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));Tt=dx(i)}else o===27?(o=Tt,Gs(i.type)?(i=Up,Up=null,Tt=i):Tt=o):Tt=pn?Sr(i.stateNode.nextSibling):null;return!0}function vi(){Tt=pn=null,et=!1}function bh(){var i=Ns;return i!==null&&(Gn===null?Gn=i:Gn.push.apply(Gn,i),Ns=null),i}function Io(i){Ns===null?Ns=[i]:Ns.push(i)}var _h=D(null),xi=null,cs=null;function Ms(i,o,c){O(_h,o._currentValue),o._currentValue=c}function us(i){i._currentValue=_h.current,H(_h)}function vh(i,o,c){for(;i!==null;){var h=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,h!==null&&(h.childLanes|=o)):h!==null&&(h.childLanes&o)!==o&&(h.childLanes|=o),i===c)break;i=i.return}}function xh(i,o,c,h){var b=i.child;for(b!==null&&(b.return=i);b!==null;){var _=b.dependencies;if(_!==null){var k=b.child;_=_.firstContext;e:for(;_!==null;){var A=_;_=b;for(var $=0;$<o.length;$++)if(A.context===o[$]){_.lanes|=c,A=_.alternate,A!==null&&(A.lanes|=c),vh(_.return,c,i),h||(k=null);break e}_=A.next}}else if(b.tag===18){if(k=b.return,k===null)throw Error(r(341));k.lanes|=c,_=k.alternate,_!==null&&(_.lanes|=c),vh(k,c,i),k=null}else k=b.child;if(k!==null)k.return=b;else for(k=b;k!==null;){if(k===i){k=null;break}if(b=k.sibling,b!==null){b.return=k.return,k=b;break}k=k.return}b=k}}function pa(i,o,c,h){i=null;for(var b=o,_=!1;b!==null;){if(!_){if((b.flags&524288)!==0)_=!0;else if((b.flags&262144)!==0)break}if(b.tag===10){var k=b.alternate;if(k===null)throw Error(r(387));if(k=k.memoizedProps,k!==null){var A=b.type;tr(b.pendingProps.value,k.value)||(i!==null?i.push(A):i=[A])}}else if(b===he.current){if(k=b.alternate,k===null)throw Error(r(387));k.memoizedState.memoizedState!==b.memoizedState.memoizedState&&(i!==null?i.push(il):i=[il])}b=b.return}i!==null&&xh(o,i,c,h),o.flags|=262144}function jc(i){for(i=i.firstContext;i!==null;){if(!tr(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function wi(i){xi=i,cs=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function mn(i){return qb(xi,i)}function Lc(i,o){return xi===null&&wi(i),qb(i,o)}function qb(i,o){var c=o._currentValue;if(o={context:o,memoizedValue:c,next:null},cs===null){if(i===null)throw Error(r(308));cs=o,i.dependencies={lanes:0,firstContext:o},i.flags|=524288}else cs=cs.next=o;return c}var U2=typeof AbortController<"u"?AbortController:function(){var i=[],o=this.signal={aborted:!1,addEventListener:function(c,h){i.push(h)}};this.abort=function(){o.aborted=!0,i.forEach(function(c){return c()})}},$2=t.unstable_scheduleCallback,q2=t.unstable_NormalPriority,Pt={$$typeof:T,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function wh(){return{controller:new U2,data:new Map,refCount:0}}function Mo(i){i.refCount--,i.refCount===0&&$2(q2,function(){i.controller.abort()})}var Do=null,Sh=0,ma=0,ga=null;function F2(i,o){if(Do===null){var c=Do=[];Sh=0,ma=Cp(),ga={status:"pending",value:void 0,then:function(h){c.push(h)}}}return Sh++,o.then(Fb,Fb),o}function Fb(){if(--Sh===0&&Do!==null){ga!==null&&(ga.status="fulfilled");var i=Do;Do=null,ma=0,ga=null;for(var o=0;o<i.length;o++)(0,i[o])()}}function V2(i,o){var c=[],h={status:"pending",value:null,reason:null,then:function(b){c.push(b)}};return i.then(function(){h.status="fulfilled",h.value=o;for(var b=0;b<c.length;b++)(0,c[b])(o)},function(b){for(h.status="rejected",h.reason=b,b=0;b<c.length;b++)(0,c[b])(void 0)}),h}var Vb=B.S;B.S=function(i,o){Tv=Ae(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&F2(i,o),Vb!==null&&Vb(i,o)};var Si=D(null);function kh(){var i=Si.current;return i!==null?i:xt.pooledCache}function zc(i,o){o===null?O(Si,Si.current):O(Si,o.pool)}function Hb(){var i=kh();return i===null?null:{parent:Pt._currentValue,pool:i}}var ya=Error(r(460)),Eh=Error(r(474)),Pc=Error(r(542)),Bc={then:function(){}};function Gb(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Kb(i,o,c){switch(c=i[c],c===void 0?i.push(o):c!==o&&(o.then(is,is),o=c),o.status){case"fulfilled":return o.value;case"rejected":throw i=o.reason,Qb(i),i;default:if(typeof o.status=="string")o.then(is,is);else{if(i=xt,i!==null&&100<i.shellSuspendCounter)throw Error(r(482));i=o,i.status="pending",i.then(function(h){if(o.status==="pending"){var b=o;b.status="fulfilled",b.value=h}},function(h){if(o.status==="pending"){var b=o;b.status="rejected",b.reason=h}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw i=o.reason,Qb(i),i}throw Ei=o,ya}}function ki(i){try{var o=i._init;return o(i._payload)}catch(c){throw c!==null&&typeof c=="object"&&typeof c.then=="function"?(Ei=c,ya):c}}var Ei=null;function Zb(){if(Ei===null)throw Error(r(459));var i=Ei;return Ei=null,i}function Qb(i){if(i===ya||i===Pc)throw Error(r(483))}var ba=null,jo=0;function Uc(i){var o=jo;return jo+=1,ba===null&&(ba=[]),Kb(ba,i,o)}function Lo(i,o){o=o.props.ref,i.ref=o!==void 0?o:null}function $c(i,o){throw o.$$typeof===y?Error(r(525)):(i=Object.prototype.toString.call(o),Error(r(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i)))}function Jb(i){function o(Q,V){if(i){var Y=Q.deletions;Y===null?(Q.deletions=[V],Q.flags|=16):Y.push(V)}}function c(Q,V){if(!i)return null;for(;V!==null;)o(Q,V),V=V.sibling;return null}function h(Q){for(var V=new Map;Q!==null;)Q.key!==null?V.set(Q.key,Q):V.set(Q.index,Q),Q=Q.sibling;return V}function b(Q,V){return Q=os(Q,V),Q.index=0,Q.sibling=null,Q}function _(Q,V,Y){return Q.index=Y,i?(Y=Q.alternate,Y!==null?(Y=Y.index,Y<V?(Q.flags|=67108866,V):Y):(Q.flags|=67108866,V)):(Q.flags|=1048576,V)}function k(Q){return i&&Q.alternate===null&&(Q.flags|=67108866),Q}function A(Q,V,Y,ce){return V===null||V.tag!==6?(V=hh(Y,Q.mode,ce),V.return=Q,V):(V=b(V,Y),V.return=Q,V)}function $(Q,V,Y,ce){var Re=Y.type;return Re===w?oe(Q,V,Y.props.children,ce,Y.key):V!==null&&(V.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===q&&ki(Re)===V.type)?(V=b(V,Y.props),Lo(V,Y),V.return=Q,V):(V=Mc(Y.type,Y.key,Y.props,null,Q.mode,ce),Lo(V,Y),V.return=Q,V)}function W(Q,V,Y,ce){return V===null||V.tag!==4||V.stateNode.containerInfo!==Y.containerInfo||V.stateNode.implementation!==Y.implementation?(V=ph(Y,Q.mode,ce),V.return=Q,V):(V=b(V,Y.children||[]),V.return=Q,V)}function oe(Q,V,Y,ce,Re){return V===null||V.tag!==7?(V=_i(Y,Q.mode,ce,Re),V.return=Q,V):(V=b(V,Y),V.return=Q,V)}function fe(Q,V,Y){if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return V=hh(""+V,Q.mode,Y),V.return=Q,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case g:return Y=Mc(V.type,V.key,V.props,null,Q.mode,Y),Lo(Y,V),Y.return=Q,Y;case v:return V=ph(V,Q.mode,Y),V.return=Q,V;case q:return V=ki(V),fe(Q,V,Y)}if(F(V)||ne(V))return V=_i(V,Q.mode,Y,null),V.return=Q,V;if(typeof V.then=="function")return fe(Q,Uc(V),Y);if(V.$$typeof===T)return fe(Q,Lc(Q,V),Y);$c(Q,V)}return null}function te(Q,V,Y,ce){var Re=V!==null?V.key:null;if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return Re!==null?null:A(Q,V,""+Y,ce);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case g:return Y.key===Re?$(Q,V,Y,ce):null;case v:return Y.key===Re?W(Q,V,Y,ce):null;case q:return Y=ki(Y),te(Q,V,Y,ce)}if(F(Y)||ne(Y))return Re!==null?null:oe(Q,V,Y,ce,null);if(typeof Y.then=="function")return te(Q,V,Uc(Y),ce);if(Y.$$typeof===T)return te(Q,V,Lc(Q,Y),ce);$c(Q,Y)}return null}function ae(Q,V,Y,ce,Re){if(typeof ce=="string"&&ce!==""||typeof ce=="number"||typeof ce=="bigint")return Q=Q.get(Y)||null,A(V,Q,""+ce,Re);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case g:return Q=Q.get(ce.key===null?Y:ce.key)||null,$(V,Q,ce,Re);case v:return Q=Q.get(ce.key===null?Y:ce.key)||null,W(V,Q,ce,Re);case q:return ce=ki(ce),ae(Q,V,Y,ce,Re)}if(F(ce)||ne(ce))return Q=Q.get(Y)||null,oe(V,Q,ce,Re,null);if(typeof ce.then=="function")return ae(Q,V,Y,Uc(ce),Re);if(ce.$$typeof===T)return ae(Q,V,Y,Lc(V,ce),Re);$c(V,ce)}return null}function we(Q,V,Y,ce){for(var Re=null,it=null,Ee=V,$e=V=0,We=null;Ee!==null&&$e<Y.length;$e++){Ee.index>$e?(We=Ee,Ee=null):We=Ee.sibling;var at=te(Q,Ee,Y[$e],ce);if(at===null){Ee===null&&(Ee=We);break}i&&Ee&&at.alternate===null&&o(Q,Ee),V=_(at,V,$e),it===null?Re=at:it.sibling=at,it=at,Ee=We}if($e===Y.length)return c(Q,Ee),et&&ls(Q,$e),Re;if(Ee===null){for(;$e<Y.length;$e++)Ee=fe(Q,Y[$e],ce),Ee!==null&&(V=_(Ee,V,$e),it===null?Re=Ee:it.sibling=Ee,it=Ee);return et&&ls(Q,$e),Re}for(Ee=h(Ee);$e<Y.length;$e++)We=ae(Ee,Q,$e,Y[$e],ce),We!==null&&(i&&We.alternate!==null&&Ee.delete(We.key===null?$e:We.key),V=_(We,V,$e),it===null?Re=We:it.sibling=We,it=We);return i&&Ee.forEach(function(Ys){return o(Q,Ys)}),et&&ls(Q,$e),Re}function De(Q,V,Y,ce){if(Y==null)throw Error(r(151));for(var Re=null,it=null,Ee=V,$e=V=0,We=null,at=Y.next();Ee!==null&&!at.done;$e++,at=Y.next()){Ee.index>$e?(We=Ee,Ee=null):We=Ee.sibling;var Ys=te(Q,Ee,at.value,ce);if(Ys===null){Ee===null&&(Ee=We);break}i&&Ee&&Ys.alternate===null&&o(Q,Ee),V=_(Ys,V,$e),it===null?Re=Ys:it.sibling=Ys,it=Ys,Ee=We}if(at.done)return c(Q,Ee),et&&ls(Q,$e),Re;if(Ee===null){for(;!at.done;$e++,at=Y.next())at=fe(Q,at.value,ce),at!==null&&(V=_(at,V,$e),it===null?Re=at:it.sibling=at,it=at);return et&&ls(Q,$e),Re}for(Ee=h(Ee);!at.done;$e++,at=Y.next())at=ae(Ee,Q,$e,at.value,ce),at!==null&&(i&&at.alternate!==null&&Ee.delete(at.key===null?$e:at.key),V=_(at,V,$e),it===null?Re=at:it.sibling=at,it=at);return i&&Ee.forEach(function(tO){return o(Q,tO)}),et&&ls(Q,$e),Re}function _t(Q,V,Y,ce){if(typeof Y=="object"&&Y!==null&&Y.type===w&&Y.key===null&&(Y=Y.props.children),typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case g:e:{for(var Re=Y.key;V!==null;){if(V.key===Re){if(Re=Y.type,Re===w){if(V.tag===7){c(Q,V.sibling),ce=b(V,Y.props.children),ce.return=Q,Q=ce;break e}}else if(V.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===q&&ki(Re)===V.type){c(Q,V.sibling),ce=b(V,Y.props),Lo(ce,Y),ce.return=Q,Q=ce;break e}c(Q,V);break}else o(Q,V);V=V.sibling}Y.type===w?(ce=_i(Y.props.children,Q.mode,ce,Y.key),ce.return=Q,Q=ce):(ce=Mc(Y.type,Y.key,Y.props,null,Q.mode,ce),Lo(ce,Y),ce.return=Q,Q=ce)}return k(Q);case v:e:{for(Re=Y.key;V!==null;){if(V.key===Re)if(V.tag===4&&V.stateNode.containerInfo===Y.containerInfo&&V.stateNode.implementation===Y.implementation){c(Q,V.sibling),ce=b(V,Y.children||[]),ce.return=Q,Q=ce;break e}else{c(Q,V);break}else o(Q,V);V=V.sibling}ce=ph(Y,Q.mode,ce),ce.return=Q,Q=ce}return k(Q);case q:return Y=ki(Y),_t(Q,V,Y,ce)}if(F(Y))return we(Q,V,Y,ce);if(ne(Y)){if(Re=ne(Y),typeof Re!="function")throw Error(r(150));return Y=Re.call(Y),De(Q,V,Y,ce)}if(typeof Y.then=="function")return _t(Q,V,Uc(Y),ce);if(Y.$$typeof===T)return _t(Q,V,Lc(Q,Y),ce);$c(Q,Y)}return typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint"?(Y=""+Y,V!==null&&V.tag===6?(c(Q,V.sibling),ce=b(V,Y),ce.return=Q,Q=ce):(c(Q,V),ce=hh(Y,Q.mode,ce),ce.return=Q,Q=ce),k(Q)):c(Q,V)}return function(Q,V,Y,ce){try{jo=0;var Re=_t(Q,V,Y,ce);return ba=null,Re}catch(Ee){if(Ee===ya||Ee===Pc)throw Ee;var it=nr(29,Ee,null,Q.mode);return it.lanes=ce,it.return=Q,it}}}var Ci=Jb(!0),Yb=Jb(!1),Ds=!1;function Ch(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Th(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function js(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Ls(i,o,c){var h=i.updateQueue;if(h===null)return null;if(h=h.shared,(ot&2)!==0){var b=h.pending;return b===null?o.next=o:(o.next=b.next,b.next=o),h.pending=o,o=Ic(i),Db(i,null,c),o}return Nc(i,h,o,c),Ic(i)}function zo(i,o,c){if(o=o.updateQueue,o!==null&&(o=o.shared,(c&4194048)!==0)){var h=o.lanes;h&=i.pendingLanes,c|=h,o.lanes=c,bc(i,c)}}function Ah(i,o){var c=i.updateQueue,h=i.alternate;if(h!==null&&(h=h.updateQueue,c===h)){var b=null,_=null;if(c=c.firstBaseUpdate,c!==null){do{var k={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};_===null?b=_=k:_=_.next=k,c=c.next}while(c!==null);_===null?b=_=o:_=_.next=o}else b=_=o;c={baseState:h.baseState,firstBaseUpdate:b,lastBaseUpdate:_,shared:h.shared,callbacks:h.callbacks},i.updateQueue=c;return}i=c.lastBaseUpdate,i===null?c.firstBaseUpdate=o:i.next=o,c.lastBaseUpdate=o}var Rh=!1;function Po(){if(Rh){var i=ga;if(i!==null)throw i}}function Bo(i,o,c,h){Rh=!1;var b=i.updateQueue;Ds=!1;var _=b.firstBaseUpdate,k=b.lastBaseUpdate,A=b.shared.pending;if(A!==null){b.shared.pending=null;var $=A,W=$.next;$.next=null,k===null?_=W:k.next=W,k=$;var oe=i.alternate;oe!==null&&(oe=oe.updateQueue,A=oe.lastBaseUpdate,A!==k&&(A===null?oe.firstBaseUpdate=W:A.next=W,oe.lastBaseUpdate=$))}if(_!==null){var fe=b.baseState;k=0,oe=W=$=null,A=_;do{var te=A.lane&-536870913,ae=te!==A.lane;if(ae?(Ye&te)===te:(h&te)===te){te!==0&&te===ma&&(Rh=!0),oe!==null&&(oe=oe.next={lane:0,tag:A.tag,payload:A.payload,callback:null,next:null});e:{var we=i,De=A;te=o;var _t=c;switch(De.tag){case 1:if(we=De.payload,typeof we=="function"){fe=we.call(_t,fe,te);break e}fe=we;break e;case 3:we.flags=we.flags&-65537|128;case 0:if(we=De.payload,te=typeof we=="function"?we.call(_t,fe,te):we,te==null)break e;fe=p({},fe,te);break e;case 2:Ds=!0}}te=A.callback,te!==null&&(i.flags|=64,ae&&(i.flags|=8192),ae=b.callbacks,ae===null?b.callbacks=[te]:ae.push(te))}else ae={lane:te,tag:A.tag,payload:A.payload,callback:A.callback,next:null},oe===null?(W=oe=ae,$=fe):oe=oe.next=ae,k|=te;if(A=A.next,A===null){if(A=b.shared.pending,A===null)break;ae=A,A=ae.next,ae.next=null,b.lastBaseUpdate=ae,b.shared.pending=null}}while(!0);oe===null&&($=fe),b.baseState=$,b.firstBaseUpdate=W,b.lastBaseUpdate=oe,_===null&&(b.shared.lanes=0),$s|=k,i.lanes=k,i.memoizedState=fe}}function Wb(i,o){if(typeof i!="function")throw Error(r(191,i));i.call(o)}function Xb(i,o){var c=i.callbacks;if(c!==null)for(i.callbacks=null,i=0;i<c.length;i++)Wb(c[i],o)}var _a=D(null),qc=D(0);function e_(i,o){i=_s,O(qc,i),O(_a,o),_s=i|o.baseLanes}function Oh(){O(qc,_s),O(_a,_a.current)}function Nh(){_s=qc.current,H(_a),H(qc)}var rr=D(null),wr=null;function zs(i){var o=i.alternate;O(Lt,Lt.current&1),O(rr,i),wr===null&&(o===null||_a.current!==null||o.memoizedState!==null)&&(wr=i)}function Ih(i){O(Lt,Lt.current),O(rr,i),wr===null&&(wr=i)}function t_(i){i.tag===22?(O(Lt,Lt.current),O(rr,i),wr===null&&(wr=i)):Ps()}function Ps(){O(Lt,Lt.current),O(rr,rr.current)}function sr(i){H(rr),wr===i&&(wr=null),H(Lt)}var Lt=D(0);function Fc(i){for(var o=i;o!==null;){if(o.tag===13){var c=o.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||Pp(c)||Bp(c)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var fs=0,Be=null,yt=null,Bt=null,Vc=!1,va=!1,Ti=!1,Hc=0,Uo=0,xa=null,H2=0;function Mt(){throw Error(r(321))}function Mh(i,o){if(o===null)return!1;for(var c=0;c<o.length&&c<i.length;c++)if(!tr(i[c],o[c]))return!1;return!0}function Dh(i,o,c,h,b,_){return fs=_,Be=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,B.H=i===null||i.memoizedState===null?P_:Qh,Ti=!1,_=c(h,b),Ti=!1,va&&(_=r_(o,c,h,b)),n_(i),_}function n_(i){B.H=Fo;var o=yt!==null&&yt.next!==null;if(fs=0,Bt=yt=Be=null,Vc=!1,Uo=0,xa=null,o)throw Error(r(300));i===null||Ut||(i=i.dependencies,i!==null&&jc(i)&&(Ut=!0))}function r_(i,o,c,h){Be=i;var b=0;do{if(va&&(xa=null),Uo=0,va=!1,25<=b)throw Error(r(301));if(b+=1,Bt=yt=null,i.updateQueue!=null){var _=i.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}B.H=B_,_=o(c,h)}while(va);return _}function G2(){var i=B.H,o=i.useState()[0];return o=typeof o.then=="function"?$o(o):o,i=i.useState()[0],(yt!==null?yt.memoizedState:null)!==i&&(Be.flags|=1024),o}function jh(){var i=Hc!==0;return Hc=0,i}function Lh(i,o,c){o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~c}function zh(i){if(Vc){for(i=i.memoizedState;i!==null;){var o=i.queue;o!==null&&(o.pending=null),i=i.next}Vc=!1}fs=0,Bt=yt=Be=null,va=!1,Uo=Hc=0,xa=null}function In(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Bt===null?Be.memoizedState=Bt=i:Bt=Bt.next=i,Bt}function zt(){if(yt===null){var i=Be.alternate;i=i!==null?i.memoizedState:null}else i=yt.next;var o=Bt===null?Be.memoizedState:Bt.next;if(o!==null)Bt=o,yt=i;else{if(i===null)throw Be.alternate===null?Error(r(467)):Error(r(310));yt=i,i={memoizedState:yt.memoizedState,baseState:yt.baseState,baseQueue:yt.baseQueue,queue:yt.queue,next:null},Bt===null?Be.memoizedState=Bt=i:Bt=Bt.next=i}return Bt}function Gc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function $o(i){var o=Uo;return Uo+=1,xa===null&&(xa=[]),i=Kb(xa,i,o),o=Be,(Bt===null?o.memoizedState:Bt.next)===null&&(o=o.alternate,B.H=o===null||o.memoizedState===null?P_:Qh),i}function Kc(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return $o(i);if(i.$$typeof===T)return mn(i)}throw Error(r(438,String(i)))}function Ph(i){var o=null,c=Be.updateQueue;if(c!==null&&(o=c.memoCache),o==null){var h=Be.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(o={data:h.data.map(function(b){return b.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),c===null&&(c=Gc(),Be.updateQueue=c),c.memoCache=o,c=o.data[o.index],c===void 0)for(c=o.data[o.index]=Array(i),h=0;h<i;h++)c[h]=j;return o.index++,c}function ds(i,o){return typeof o=="function"?o(i):o}function Zc(i){var o=zt();return Bh(o,yt,i)}function Bh(i,o,c){var h=i.queue;if(h===null)throw Error(r(311));h.lastRenderedReducer=c;var b=i.baseQueue,_=h.pending;if(_!==null){if(b!==null){var k=b.next;b.next=_.next,_.next=k}o.baseQueue=b=_,h.pending=null}if(_=i.baseState,b===null)i.memoizedState=_;else{o=b.next;var A=k=null,$=null,W=o,oe=!1;do{var fe=W.lane&-536870913;if(fe!==W.lane?(Ye&fe)===fe:(fs&fe)===fe){var te=W.revertLane;if(te===0)$!==null&&($=$.next={lane:0,revertLane:0,gesture:null,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null}),fe===ma&&(oe=!0);else if((fs&te)===te){W=W.next,te===ma&&(oe=!0);continue}else fe={lane:0,revertLane:W.revertLane,gesture:null,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null},$===null?(A=$=fe,k=_):$=$.next=fe,Be.lanes|=te,$s|=te;fe=W.action,Ti&&c(_,fe),_=W.hasEagerState?W.eagerState:c(_,fe)}else te={lane:fe,revertLane:W.revertLane,gesture:W.gesture,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null},$===null?(A=$=te,k=_):$=$.next=te,Be.lanes|=fe,$s|=fe;W=W.next}while(W!==null&&W!==o);if($===null?k=_:$.next=A,!tr(_,i.memoizedState)&&(Ut=!0,oe&&(c=ga,c!==null)))throw c;i.memoizedState=_,i.baseState=k,i.baseQueue=$,h.lastRenderedState=_}return b===null&&(h.lanes=0),[i.memoizedState,h.dispatch]}function Uh(i){var o=zt(),c=o.queue;if(c===null)throw Error(r(311));c.lastRenderedReducer=i;var h=c.dispatch,b=c.pending,_=o.memoizedState;if(b!==null){c.pending=null;var k=b=b.next;do _=i(_,k.action),k=k.next;while(k!==b);tr(_,o.memoizedState)||(Ut=!0),o.memoizedState=_,o.baseQueue===null&&(o.baseState=_),c.lastRenderedState=_}return[_,h]}function s_(i,o,c){var h=Be,b=zt(),_=et;if(_){if(c===void 0)throw Error(r(407));c=c()}else c=o();var k=!tr((yt||b).memoizedState,c);if(k&&(b.memoizedState=c,Ut=!0),b=b.queue,Fh(o_.bind(null,h,b,i),[i]),b.getSnapshot!==o||k||Bt!==null&&Bt.memoizedState.tag&1){if(h.flags|=2048,wa(9,{destroy:void 0},a_.bind(null,h,b,c,o),null),xt===null)throw Error(r(349));_||(fs&127)!==0||i_(h,o,c)}return c}function i_(i,o,c){i.flags|=16384,i={getSnapshot:o,value:c},o=Be.updateQueue,o===null?(o=Gc(),Be.updateQueue=o,o.stores=[i]):(c=o.stores,c===null?o.stores=[i]:c.push(i))}function a_(i,o,c,h){o.value=c,o.getSnapshot=h,l_(o)&&c_(i)}function o_(i,o,c){return c(function(){l_(o)&&c_(i)})}function l_(i){var o=i.getSnapshot;i=i.value;try{var c=o();return!tr(i,c)}catch{return!0}}function c_(i){var o=bi(i,2);o!==null&&Kn(o,i,2)}function $h(i){var o=In();if(typeof i=="function"){var c=i;if(i=c(),Ti){ct(!0);try{c()}finally{ct(!1)}}}return o.memoizedState=o.baseState=i,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ds,lastRenderedState:i},o}function u_(i,o,c,h){return i.baseState=c,Bh(i,yt,typeof h=="function"?h:ds)}function K2(i,o,c,h,b){if(Yc(i))throw Error(r(485));if(i=o.action,i!==null){var _={payload:b,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(k){_.listeners.push(k)}};B.T!==null?c(!0):_.isTransition=!1,h(_),c=o.pending,c===null?(_.next=o.pending=_,f_(o,_)):(_.next=c.next,o.pending=c.next=_)}}function f_(i,o){var c=o.action,h=o.payload,b=i.state;if(o.isTransition){var _=B.T,k={};B.T=k;try{var A=c(b,h),$=B.S;$!==null&&$(k,A),d_(i,o,A)}catch(W){qh(i,o,W)}finally{_!==null&&k.types!==null&&(_.types=k.types),B.T=_}}else try{_=c(b,h),d_(i,o,_)}catch(W){qh(i,o,W)}}function d_(i,o,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(h){h_(i,o,h)},function(h){return qh(i,o,h)}):h_(i,o,c)}function h_(i,o,c){o.status="fulfilled",o.value=c,p_(o),i.state=c,o=i.pending,o!==null&&(c=o.next,c===o?i.pending=null:(c=c.next,o.next=c,f_(i,c)))}function qh(i,o,c){var h=i.pending;if(i.pending=null,h!==null){h=h.next;do o.status="rejected",o.reason=c,p_(o),o=o.next;while(o!==h)}i.action=null}function p_(i){i=i.listeners;for(var o=0;o<i.length;o++)(0,i[o])()}function m_(i,o){return o}function g_(i,o){if(et){var c=xt.formState;if(c!==null){e:{var h=Be;if(et){if(Tt){t:{for(var b=Tt,_=xr;b.nodeType!==8;){if(!_){b=null;break t}if(b=Sr(b.nextSibling),b===null){b=null;break t}}_=b.data,b=_==="F!"||_==="F"?b:null}if(b){Tt=Sr(b.nextSibling),h=b.data==="F!";break e}}Is(h)}h=!1}h&&(o=c[0])}}return c=In(),c.memoizedState=c.baseState=o,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:m_,lastRenderedState:o},c.queue=h,c=j_.bind(null,Be,h),h.dispatch=c,h=$h(!1),_=Zh.bind(null,Be,!1,h.queue),h=In(),b={state:o,dispatch:null,action:i,pending:null},h.queue=b,c=K2.bind(null,Be,b,_,c),b.dispatch=c,h.memoizedState=i,[o,c,!1]}function y_(i){var o=zt();return b_(o,yt,i)}function b_(i,o,c){if(o=Bh(i,o,m_)[0],i=Zc(ds)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var h=$o(o)}catch(k){throw k===ya?Pc:k}else h=o;o=zt();var b=o.queue,_=b.dispatch;return c!==o.memoizedState&&(Be.flags|=2048,wa(9,{destroy:void 0},Z2.bind(null,b,c),null)),[h,_,i]}function Z2(i,o){i.action=o}function __(i){var o=zt(),c=yt;if(c!==null)return b_(o,c,i);zt(),o=o.memoizedState,c=zt();var h=c.queue.dispatch;return c.memoizedState=i,[o,h,!1]}function wa(i,o,c,h){return i={tag:i,create:c,deps:h,inst:o,next:null},o=Be.updateQueue,o===null&&(o=Gc(),Be.updateQueue=o),c=o.lastEffect,c===null?o.lastEffect=i.next=i:(h=c.next,c.next=i,i.next=h,o.lastEffect=i),i}function v_(){return zt().memoizedState}function Qc(i,o,c,h){var b=In();Be.flags|=i,b.memoizedState=wa(1|o,{destroy:void 0},c,h===void 0?null:h)}function Jc(i,o,c,h){var b=zt();h=h===void 0?null:h;var _=b.memoizedState.inst;yt!==null&&h!==null&&Mh(h,yt.memoizedState.deps)?b.memoizedState=wa(o,_,c,h):(Be.flags|=i,b.memoizedState=wa(1|o,_,c,h))}function x_(i,o){Qc(8390656,8,i,o)}function Fh(i,o){Jc(2048,8,i,o)}function Q2(i){Be.flags|=4;var o=Be.updateQueue;if(o===null)o=Gc(),Be.updateQueue=o,o.events=[i];else{var c=o.events;c===null?o.events=[i]:c.push(i)}}function w_(i){var o=zt().memoizedState;return Q2({ref:o,nextImpl:i}),function(){if((ot&2)!==0)throw Error(r(440));return o.impl.apply(void 0,arguments)}}function S_(i,o){return Jc(4,2,i,o)}function k_(i,o){return Jc(4,4,i,o)}function E_(i,o){if(typeof o=="function"){i=i();var c=o(i);return function(){typeof c=="function"?c():o(null)}}if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function C_(i,o,c){c=c!=null?c.concat([i]):null,Jc(4,4,E_.bind(null,o,i),c)}function Vh(){}function T_(i,o){var c=zt();o=o===void 0?null:o;var h=c.memoizedState;return o!==null&&Mh(o,h[1])?h[0]:(c.memoizedState=[i,o],i)}function A_(i,o){var c=zt();o=o===void 0?null:o;var h=c.memoizedState;if(o!==null&&Mh(o,h[1]))return h[0];if(h=i(),Ti){ct(!0);try{i()}finally{ct(!1)}}return c.memoizedState=[h,o],h}function Hh(i,o,c){return c===void 0||(fs&1073741824)!==0&&(Ye&261930)===0?i.memoizedState=o:(i.memoizedState=c,i=Rv(),Be.lanes|=i,$s|=i,c)}function R_(i,o,c,h){return tr(c,o)?c:_a.current!==null?(i=Hh(i,c,h),tr(i,o)||(Ut=!0),i):(fs&42)===0||(fs&1073741824)!==0&&(Ye&261930)===0?(Ut=!0,i.memoizedState=c):(i=Rv(),Be.lanes|=i,$s|=i,o)}function O_(i,o,c,h,b){var _=G.p;G.p=_!==0&&8>_?_:8;var k=B.T,A={};B.T=A,Zh(i,!1,o,c);try{var $=b(),W=B.S;if(W!==null&&W(A,$),$!==null&&typeof $=="object"&&typeof $.then=="function"){var oe=V2($,h);qo(i,o,oe,or(i))}else qo(i,o,h,or(i))}catch(fe){qo(i,o,{then:function(){},status:"rejected",reason:fe},or())}finally{G.p=_,k!==null&&A.types!==null&&(k.types=A.types),B.T=k}}function J2(){}function Gh(i,o,c,h){if(i.tag!==5)throw Error(r(476));var b=N_(i).queue;O_(i,b,o,ie,c===null?J2:function(){return I_(i),c(h)})}function N_(i){var o=i.memoizedState;if(o!==null)return o;o={memoizedState:ie,baseState:ie,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ds,lastRenderedState:ie},next:null};var c={};return o.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ds,lastRenderedState:c},next:null},i.memoizedState=o,i=i.alternate,i!==null&&(i.memoizedState=o),o}function I_(i){var o=N_(i);o.next===null&&(o=i.alternate.memoizedState),qo(i,o.next.queue,{},or())}function Kh(){return mn(il)}function M_(){return zt().memoizedState}function D_(){return zt().memoizedState}function Y2(i){for(var o=i.return;o!==null;){switch(o.tag){case 24:case 3:var c=or();i=js(c);var h=Ls(o,i,c);h!==null&&(Kn(h,o,c),zo(h,o,c)),o={cache:wh()},i.payload=o;return}o=o.return}}function W2(i,o,c){var h=or();c={lane:h,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Yc(i)?L_(o,c):(c=fh(i,o,c,h),c!==null&&(Kn(c,i,h),z_(c,o,h)))}function j_(i,o,c){var h=or();qo(i,o,c,h)}function qo(i,o,c,h){var b={lane:h,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null};if(Yc(i))L_(o,b);else{var _=i.alternate;if(i.lanes===0&&(_===null||_.lanes===0)&&(_=o.lastRenderedReducer,_!==null))try{var k=o.lastRenderedState,A=_(k,c);if(b.hasEagerState=!0,b.eagerState=A,tr(A,k))return Nc(i,o,b,0),xt===null&&Oc(),!1}catch{}if(c=fh(i,o,b,h),c!==null)return Kn(c,i,h),z_(c,o,h),!0}return!1}function Zh(i,o,c,h){if(h={lane:2,revertLane:Cp(),gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null},Yc(i)){if(o)throw Error(r(479))}else o=fh(i,c,h,2),o!==null&&Kn(o,i,2)}function Yc(i){var o=i.alternate;return i===Be||o!==null&&o===Be}function L_(i,o){va=Vc=!0;var c=i.pending;c===null?o.next=o:(o.next=c.next,c.next=o),i.pending=o}function z_(i,o,c){if((c&4194048)!==0){var h=o.lanes;h&=i.pendingLanes,c|=h,o.lanes=c,bc(i,c)}}var Fo={readContext:mn,use:Kc,useCallback:Mt,useContext:Mt,useEffect:Mt,useImperativeHandle:Mt,useLayoutEffect:Mt,useInsertionEffect:Mt,useMemo:Mt,useReducer:Mt,useRef:Mt,useState:Mt,useDebugValue:Mt,useDeferredValue:Mt,useTransition:Mt,useSyncExternalStore:Mt,useId:Mt,useHostTransitionStatus:Mt,useFormState:Mt,useActionState:Mt,useOptimistic:Mt,useMemoCache:Mt,useCacheRefresh:Mt};Fo.useEffectEvent=Mt;var P_={readContext:mn,use:Kc,useCallback:function(i,o){return In().memoizedState=[i,o===void 0?null:o],i},useContext:mn,useEffect:x_,useImperativeHandle:function(i,o,c){c=c!=null?c.concat([i]):null,Qc(4194308,4,E_.bind(null,o,i),c)},useLayoutEffect:function(i,o){return Qc(4194308,4,i,o)},useInsertionEffect:function(i,o){Qc(4,2,i,o)},useMemo:function(i,o){var c=In();o=o===void 0?null:o;var h=i();if(Ti){ct(!0);try{i()}finally{ct(!1)}}return c.memoizedState=[h,o],h},useReducer:function(i,o,c){var h=In();if(c!==void 0){var b=c(o);if(Ti){ct(!0);try{c(o)}finally{ct(!1)}}}else b=o;return h.memoizedState=h.baseState=b,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:b},h.queue=i,i=i.dispatch=W2.bind(null,Be,i),[h.memoizedState,i]},useRef:function(i){var o=In();return i={current:i},o.memoizedState=i},useState:function(i){i=$h(i);var o=i.queue,c=j_.bind(null,Be,o);return o.dispatch=c,[i.memoizedState,c]},useDebugValue:Vh,useDeferredValue:function(i,o){var c=In();return Hh(c,i,o)},useTransition:function(){var i=$h(!1);return i=O_.bind(null,Be,i.queue,!0,!1),In().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,o,c){var h=Be,b=In();if(et){if(c===void 0)throw Error(r(407));c=c()}else{if(c=o(),xt===null)throw Error(r(349));(Ye&127)!==0||i_(h,o,c)}b.memoizedState=c;var _={value:c,getSnapshot:o};return b.queue=_,x_(o_.bind(null,h,_,i),[i]),h.flags|=2048,wa(9,{destroy:void 0},a_.bind(null,h,_,c,o),null),c},useId:function(){var i=In(),o=xt.identifierPrefix;if(et){var c=qr,h=$r;c=(h&~(1<<32-Ne(h)-1)).toString(32)+c,o="_"+o+"R_"+c,c=Hc++,0<c&&(o+="H"+c.toString(32)),o+="_"}else c=H2++,o="_"+o+"r_"+c.toString(32)+"_";return i.memoizedState=o},useHostTransitionStatus:Kh,useFormState:g_,useActionState:g_,useOptimistic:function(i){var o=In();o.memoizedState=o.baseState=i;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=c,o=Zh.bind(null,Be,!0,c),c.dispatch=o,[i,o]},useMemoCache:Ph,useCacheRefresh:function(){return In().memoizedState=Y2.bind(null,Be)},useEffectEvent:function(i){var o=In(),c={impl:i};return o.memoizedState=c,function(){if((ot&2)!==0)throw Error(r(440));return c.impl.apply(void 0,arguments)}}},Qh={readContext:mn,use:Kc,useCallback:T_,useContext:mn,useEffect:Fh,useImperativeHandle:C_,useInsertionEffect:S_,useLayoutEffect:k_,useMemo:A_,useReducer:Zc,useRef:v_,useState:function(){return Zc(ds)},useDebugValue:Vh,useDeferredValue:function(i,o){var c=zt();return R_(c,yt.memoizedState,i,o)},useTransition:function(){var i=Zc(ds)[0],o=zt().memoizedState;return[typeof i=="boolean"?i:$o(i),o]},useSyncExternalStore:s_,useId:M_,useHostTransitionStatus:Kh,useFormState:y_,useActionState:y_,useOptimistic:function(i,o){var c=zt();return u_(c,yt,i,o)},useMemoCache:Ph,useCacheRefresh:D_};Qh.useEffectEvent=w_;var B_={readContext:mn,use:Kc,useCallback:T_,useContext:mn,useEffect:Fh,useImperativeHandle:C_,useInsertionEffect:S_,useLayoutEffect:k_,useMemo:A_,useReducer:Uh,useRef:v_,useState:function(){return Uh(ds)},useDebugValue:Vh,useDeferredValue:function(i,o){var c=zt();return yt===null?Hh(c,i,o):R_(c,yt.memoizedState,i,o)},useTransition:function(){var i=Uh(ds)[0],o=zt().memoizedState;return[typeof i=="boolean"?i:$o(i),o]},useSyncExternalStore:s_,useId:M_,useHostTransitionStatus:Kh,useFormState:__,useActionState:__,useOptimistic:function(i,o){var c=zt();return yt!==null?u_(c,yt,i,o):(c.baseState=i,[i,c.queue.dispatch])},useMemoCache:Ph,useCacheRefresh:D_};B_.useEffectEvent=w_;function Jh(i,o,c,h){o=i.memoizedState,c=c(h,o),c=c==null?o:p({},o,c),i.memoizedState=c,i.lanes===0&&(i.updateQueue.baseState=c)}var Yh={enqueueSetState:function(i,o,c){i=i._reactInternals;var h=or(),b=js(h);b.payload=o,c!=null&&(b.callback=c),o=Ls(i,b,h),o!==null&&(Kn(o,i,h),zo(o,i,h))},enqueueReplaceState:function(i,o,c){i=i._reactInternals;var h=or(),b=js(h);b.tag=1,b.payload=o,c!=null&&(b.callback=c),o=Ls(i,b,h),o!==null&&(Kn(o,i,h),zo(o,i,h))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var c=or(),h=js(c);h.tag=2,o!=null&&(h.callback=o),o=Ls(i,h,c),o!==null&&(Kn(o,i,c),zo(o,i,c))}};function U_(i,o,c,h,b,_,k){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(h,_,k):o.prototype&&o.prototype.isPureReactComponent?!Ro(c,h)||!Ro(b,_):!0}function $_(i,o,c,h){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(c,h),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(c,h),o.state!==i&&Yh.enqueueReplaceState(o,o.state,null)}function Ai(i,o){var c=o;if("ref"in o){c={};for(var h in o)h!=="ref"&&(c[h]=o[h])}if(i=i.defaultProps){c===o&&(c=p({},c));for(var b in i)c[b]===void 0&&(c[b]=i[b])}return c}function q_(i){Rc(i)}function F_(i){console.error(i)}function V_(i){Rc(i)}function Wc(i,o){try{var c=i.onUncaughtError;c(o.value,{componentStack:o.stack})}catch(h){setTimeout(function(){throw h})}}function H_(i,o,c){try{var h=i.onCaughtError;h(c.value,{componentStack:c.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(b){setTimeout(function(){throw b})}}function Wh(i,o,c){return c=js(c),c.tag=3,c.payload={element:null},c.callback=function(){Wc(i,o)},c}function G_(i){return i=js(i),i.tag=3,i}function K_(i,o,c,h){var b=c.type.getDerivedStateFromError;if(typeof b=="function"){var _=h.value;i.payload=function(){return b(_)},i.callback=function(){H_(o,c,h)}}var k=c.stateNode;k!==null&&typeof k.componentDidCatch=="function"&&(i.callback=function(){H_(o,c,h),typeof b!="function"&&(qs===null?qs=new Set([this]):qs.add(this));var A=h.stack;this.componentDidCatch(h.value,{componentStack:A!==null?A:""})})}function X2(i,o,c,h,b){if(c.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(o=c.alternate,o!==null&&pa(o,c,b,!0),c=rr.current,c!==null){switch(c.tag){case 31:case 13:return wr===null?uu():c.alternate===null&&Dt===0&&(Dt=3),c.flags&=-257,c.flags|=65536,c.lanes=b,h===Bc?c.flags|=16384:(o=c.updateQueue,o===null?c.updateQueue=new Set([h]):o.add(h),Sp(i,h,b)),!1;case 22:return c.flags|=65536,h===Bc?c.flags|=16384:(o=c.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([h])},c.updateQueue=o):(c=o.retryQueue,c===null?o.retryQueue=new Set([h]):c.add(h)),Sp(i,h,b)),!1}throw Error(r(435,c.tag))}return Sp(i,h,b),uu(),!1}if(et)return o=rr.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=b,h!==yh&&(i=Error(r(422),{cause:h}),Io(br(i,c)))):(h!==yh&&(o=Error(r(423),{cause:h}),Io(br(o,c))),i=i.current.alternate,i.flags|=65536,b&=-b,i.lanes|=b,h=br(h,c),b=Wh(i.stateNode,h,b),Ah(i,b),Dt!==4&&(Dt=2)),!1;var _=Error(r(520),{cause:h});if(_=br(_,c),Yo===null?Yo=[_]:Yo.push(_),Dt!==4&&(Dt=2),o===null)return!0;h=br(h,c),c=o;do{switch(c.tag){case 3:return c.flags|=65536,i=b&-b,c.lanes|=i,i=Wh(c.stateNode,h,i),Ah(c,i),!1;case 1:if(o=c.type,_=c.stateNode,(c.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(qs===null||!qs.has(_))))return c.flags|=65536,b&=-b,c.lanes|=b,b=G_(b),K_(b,i,c,h),Ah(c,b),!1}c=c.return}while(c!==null);return!1}var Xh=Error(r(461)),Ut=!1;function gn(i,o,c,h){o.child=i===null?Yb(o,null,c,h):Ci(o,i.child,c,h)}function Z_(i,o,c,h,b){c=c.render;var _=o.ref;if("ref"in h){var k={};for(var A in h)A!=="ref"&&(k[A]=h[A])}else k=h;return wi(o),h=Dh(i,o,c,k,_,b),A=jh(),i!==null&&!Ut?(Lh(i,o,b),hs(i,o,b)):(et&&A&&mh(o),o.flags|=1,gn(i,o,h,b),o.child)}function Q_(i,o,c,h,b){if(i===null){var _=c.type;return typeof _=="function"&&!dh(_)&&_.defaultProps===void 0&&c.compare===null?(o.tag=15,o.type=_,J_(i,o,_,h,b)):(i=Mc(c.type,null,h,o,o.mode,b),i.ref=o.ref,i.return=o,o.child=i)}if(_=i.child,!op(i,b)){var k=_.memoizedProps;if(c=c.compare,c=c!==null?c:Ro,c(k,h)&&i.ref===o.ref)return hs(i,o,b)}return o.flags|=1,i=os(_,h),i.ref=o.ref,i.return=o,o.child=i}function J_(i,o,c,h,b){if(i!==null){var _=i.memoizedProps;if(Ro(_,h)&&i.ref===o.ref)if(Ut=!1,o.pendingProps=h=_,op(i,b))(i.flags&131072)!==0&&(Ut=!0);else return o.lanes=i.lanes,hs(i,o,b)}return ep(i,o,c,h,b)}function Y_(i,o,c,h){var b=h.children,_=i!==null?i.memoizedState:null;if(i===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),h.mode==="hidden"){if((o.flags&128)!==0){if(_=_!==null?_.baseLanes|c:c,i!==null){for(h=o.child=i.child,b=0;h!==null;)b=b|h.lanes|h.childLanes,h=h.sibling;h=b&~_}else h=0,o.child=null;return W_(i,o,_,c,h)}if((c&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},i!==null&&zc(o,_!==null?_.cachePool:null),_!==null?e_(o,_):Oh(),t_(o);else return h=o.lanes=536870912,W_(i,o,_!==null?_.baseLanes|c:c,c,h)}else _!==null?(zc(o,_.cachePool),e_(o,_),Ps(),o.memoizedState=null):(i!==null&&zc(o,null),Oh(),Ps());return gn(i,o,b,c),o.child}function Vo(i,o){return i!==null&&i.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function W_(i,o,c,h,b){var _=kh();return _=_===null?null:{parent:Pt._currentValue,pool:_},o.memoizedState={baseLanes:c,cachePool:_},i!==null&&zc(o,null),Oh(),t_(o),i!==null&&pa(i,o,h,!0),o.childLanes=b,null}function Xc(i,o){return o=tu({mode:o.mode,children:o.children},i.mode),o.ref=i.ref,i.child=o,o.return=i,o}function X_(i,o,c){return Ci(o,i.child,null,c),i=Xc(o,o.pendingProps),i.flags|=2,sr(o),o.memoizedState=null,i}function eR(i,o,c){var h=o.pendingProps,b=(o.flags&128)!==0;if(o.flags&=-129,i===null){if(et){if(h.mode==="hidden")return i=Xc(o,h),o.lanes=536870912,Vo(null,i);if(Ih(o),(i=Tt)?(i=fx(i,xr),i=i!==null&&i.data==="&"?i:null,i!==null&&(o.memoizedState={dehydrated:i,treeContext:Os!==null?{id:$r,overflow:qr}:null,retryLane:536870912,hydrationErrors:null},c=Lb(i),c.return=o,o.child=c,pn=o,Tt=null)):i=null,i===null)throw Is(o);return o.lanes=536870912,null}return Xc(o,h)}var _=i.memoizedState;if(_!==null){var k=_.dehydrated;if(Ih(o),b)if(o.flags&256)o.flags&=-257,o=X_(i,o,c);else if(o.memoizedState!==null)o.child=i.child,o.flags|=128,o=null;else throw Error(r(558));else if(Ut||pa(i,o,c,!1),b=(c&i.childLanes)!==0,Ut||b){if(h=xt,h!==null&&(k=hi(h,c),k!==0&&k!==_.retryLane))throw _.retryLane=k,bi(i,k),Kn(h,i,k),Xh;uu(),o=X_(i,o,c)}else i=_.treeContext,Tt=Sr(k.nextSibling),pn=o,et=!0,Ns=null,xr=!1,i!==null&&Bb(o,i),o=Xc(o,h),o.flags|=4096;return o}return i=os(i.child,{mode:h.mode,children:h.children}),i.ref=o.ref,o.child=i,i.return=o,i}function eu(i,o){var c=o.ref;if(c===null)i!==null&&i.ref!==null&&(o.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(r(284));(i===null||i.ref!==c)&&(o.flags|=4194816)}}function ep(i,o,c,h,b){return wi(o),c=Dh(i,o,c,h,void 0,b),h=jh(),i!==null&&!Ut?(Lh(i,o,b),hs(i,o,b)):(et&&h&&mh(o),o.flags|=1,gn(i,o,c,b),o.child)}function ev(i,o,c,h,b,_){return wi(o),o.updateQueue=null,c=r_(o,h,c,b),n_(i),h=jh(),i!==null&&!Ut?(Lh(i,o,_),hs(i,o,_)):(et&&h&&mh(o),o.flags|=1,gn(i,o,c,_),o.child)}function tv(i,o,c,h,b){if(wi(o),o.stateNode===null){var _=ua,k=c.contextType;typeof k=="object"&&k!==null&&(_=mn(k)),_=new c(h,_),o.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=Yh,o.stateNode=_,_._reactInternals=o,_=o.stateNode,_.props=h,_.state=o.memoizedState,_.refs={},Ch(o),k=c.contextType,_.context=typeof k=="object"&&k!==null?mn(k):ua,_.state=o.memoizedState,k=c.getDerivedStateFromProps,typeof k=="function"&&(Jh(o,c,k,h),_.state=o.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(k=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),k!==_.state&&Yh.enqueueReplaceState(_,_.state,null),Bo(o,h,_,b),Po(),_.state=o.memoizedState),typeof _.componentDidMount=="function"&&(o.flags|=4194308),h=!0}else if(i===null){_=o.stateNode;var A=o.memoizedProps,$=Ai(c,A);_.props=$;var W=_.context,oe=c.contextType;k=ua,typeof oe=="object"&&oe!==null&&(k=mn(oe));var fe=c.getDerivedStateFromProps;oe=typeof fe=="function"||typeof _.getSnapshotBeforeUpdate=="function",A=o.pendingProps!==A,oe||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(A||W!==k)&&$_(o,_,h,k),Ds=!1;var te=o.memoizedState;_.state=te,Bo(o,h,_,b),Po(),W=o.memoizedState,A||te!==W||Ds?(typeof fe=="function"&&(Jh(o,c,fe,h),W=o.memoizedState),($=Ds||U_(o,c,$,h,te,W,k))?(oe||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(o.flags|=4194308)):(typeof _.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=h,o.memoizedState=W),_.props=h,_.state=W,_.context=k,h=$):(typeof _.componentDidMount=="function"&&(o.flags|=4194308),h=!1)}else{_=o.stateNode,Th(i,o),k=o.memoizedProps,oe=Ai(c,k),_.props=oe,fe=o.pendingProps,te=_.context,W=c.contextType,$=ua,typeof W=="object"&&W!==null&&($=mn(W)),A=c.getDerivedStateFromProps,(W=typeof A=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(k!==fe||te!==$)&&$_(o,_,h,$),Ds=!1,te=o.memoizedState,_.state=te,Bo(o,h,_,b),Po();var ae=o.memoizedState;k!==fe||te!==ae||Ds||i!==null&&i.dependencies!==null&&jc(i.dependencies)?(typeof A=="function"&&(Jh(o,c,A,h),ae=o.memoizedState),(oe=Ds||U_(o,c,oe,h,te,ae,$)||i!==null&&i.dependencies!==null&&jc(i.dependencies))?(W||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(h,ae,$),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(h,ae,$)),typeof _.componentDidUpdate=="function"&&(o.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof _.componentDidUpdate!="function"||k===i.memoizedProps&&te===i.memoizedState||(o.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||k===i.memoizedProps&&te===i.memoizedState||(o.flags|=1024),o.memoizedProps=h,o.memoizedState=ae),_.props=h,_.state=ae,_.context=$,h=oe):(typeof _.componentDidUpdate!="function"||k===i.memoizedProps&&te===i.memoizedState||(o.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||k===i.memoizedProps&&te===i.memoizedState||(o.flags|=1024),h=!1)}return _=h,eu(i,o),h=(o.flags&128)!==0,_||h?(_=o.stateNode,c=h&&typeof c.getDerivedStateFromError!="function"?null:_.render(),o.flags|=1,i!==null&&h?(o.child=Ci(o,i.child,null,b),o.child=Ci(o,null,c,b)):gn(i,o,c,b),o.memoizedState=_.state,i=o.child):i=hs(i,o,b),i}function nv(i,o,c,h){return vi(),o.flags|=256,gn(i,o,c,h),o.child}var tp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function np(i){return{baseLanes:i,cachePool:Hb()}}function rp(i,o,c){return i=i!==null?i.childLanes&~c:0,o&&(i|=ar),i}function rv(i,o,c){var h=o.pendingProps,b=!1,_=(o.flags&128)!==0,k;if((k=_)||(k=i!==null&&i.memoizedState===null?!1:(Lt.current&2)!==0),k&&(b=!0,o.flags&=-129),k=(o.flags&32)!==0,o.flags&=-33,i===null){if(et){if(b?zs(o):Ps(),(i=Tt)?(i=fx(i,xr),i=i!==null&&i.data!=="&"?i:null,i!==null&&(o.memoizedState={dehydrated:i,treeContext:Os!==null?{id:$r,overflow:qr}:null,retryLane:536870912,hydrationErrors:null},c=Lb(i),c.return=o,o.child=c,pn=o,Tt=null)):i=null,i===null)throw Is(o);return Bp(i)?o.lanes=32:o.lanes=536870912,null}var A=h.children;return h=h.fallback,b?(Ps(),b=o.mode,A=tu({mode:"hidden",children:A},b),h=_i(h,b,c,null),A.return=o,h.return=o,A.sibling=h,o.child=A,h=o.child,h.memoizedState=np(c),h.childLanes=rp(i,k,c),o.memoizedState=tp,Vo(null,h)):(zs(o),sp(o,A))}var $=i.memoizedState;if($!==null&&(A=$.dehydrated,A!==null)){if(_)o.flags&256?(zs(o),o.flags&=-257,o=ip(i,o,c)):o.memoizedState!==null?(Ps(),o.child=i.child,o.flags|=128,o=null):(Ps(),A=h.fallback,b=o.mode,h=tu({mode:"visible",children:h.children},b),A=_i(A,b,c,null),A.flags|=2,h.return=o,A.return=o,h.sibling=A,o.child=h,Ci(o,i.child,null,c),h=o.child,h.memoizedState=np(c),h.childLanes=rp(i,k,c),o.memoizedState=tp,o=Vo(null,h));else if(zs(o),Bp(A)){if(k=A.nextSibling&&A.nextSibling.dataset,k)var W=k.dgst;k=W,h=Error(r(419)),h.stack="",h.digest=k,Io({value:h,source:null,stack:null}),o=ip(i,o,c)}else if(Ut||pa(i,o,c,!1),k=(c&i.childLanes)!==0,Ut||k){if(k=xt,k!==null&&(h=hi(k,c),h!==0&&h!==$.retryLane))throw $.retryLane=h,bi(i,h),Kn(k,i,h),Xh;Pp(A)||uu(),o=ip(i,o,c)}else Pp(A)?(o.flags|=192,o.child=i.child,o=null):(i=$.treeContext,Tt=Sr(A.nextSibling),pn=o,et=!0,Ns=null,xr=!1,i!==null&&Bb(o,i),o=sp(o,h.children),o.flags|=4096);return o}return b?(Ps(),A=h.fallback,b=o.mode,$=i.child,W=$.sibling,h=os($,{mode:"hidden",children:h.children}),h.subtreeFlags=$.subtreeFlags&65011712,W!==null?A=os(W,A):(A=_i(A,b,c,null),A.flags|=2),A.return=o,h.return=o,h.sibling=A,o.child=h,Vo(null,h),h=o.child,A=i.child.memoizedState,A===null?A=np(c):(b=A.cachePool,b!==null?($=Pt._currentValue,b=b.parent!==$?{parent:$,pool:$}:b):b=Hb(),A={baseLanes:A.baseLanes|c,cachePool:b}),h.memoizedState=A,h.childLanes=rp(i,k,c),o.memoizedState=tp,Vo(i.child,h)):(zs(o),c=i.child,i=c.sibling,c=os(c,{mode:"visible",children:h.children}),c.return=o,c.sibling=null,i!==null&&(k=o.deletions,k===null?(o.deletions=[i],o.flags|=16):k.push(i)),o.child=c,o.memoizedState=null,c)}function sp(i,o){return o=tu({mode:"visible",children:o},i.mode),o.return=i,i.child=o}function tu(i,o){return i=nr(22,i,null,o),i.lanes=0,i}function ip(i,o,c){return Ci(o,i.child,null,c),i=sp(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function sv(i,o,c){i.lanes|=o;var h=i.alternate;h!==null&&(h.lanes|=o),vh(i.return,o,c)}function ap(i,o,c,h,b,_){var k=i.memoizedState;k===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:h,tail:c,tailMode:b,treeForkCount:_}:(k.isBackwards=o,k.rendering=null,k.renderingStartTime=0,k.last=h,k.tail=c,k.tailMode=b,k.treeForkCount=_)}function iv(i,o,c){var h=o.pendingProps,b=h.revealOrder,_=h.tail;h=h.children;var k=Lt.current,A=(k&2)!==0;if(A?(k=k&1|2,o.flags|=128):k&=1,O(Lt,k),gn(i,o,h,c),h=et?No:0,!A&&i!==null&&(i.flags&128)!==0)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&sv(i,c,o);else if(i.tag===19)sv(i,c,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(b){case"forwards":for(c=o.child,b=null;c!==null;)i=c.alternate,i!==null&&Fc(i)===null&&(b=c),c=c.sibling;c=b,c===null?(b=o.child,o.child=null):(b=c.sibling,c.sibling=null),ap(o,!1,b,c,_,h);break;case"backwards":case"unstable_legacy-backwards":for(c=null,b=o.child,o.child=null;b!==null;){if(i=b.alternate,i!==null&&Fc(i)===null){o.child=b;break}i=b.sibling,b.sibling=c,c=b,b=i}ap(o,!0,c,null,_,h);break;case"together":ap(o,!1,null,null,void 0,h);break;default:o.memoizedState=null}return o.child}function hs(i,o,c){if(i!==null&&(o.dependencies=i.dependencies),$s|=o.lanes,(c&o.childLanes)===0)if(i!==null){if(pa(i,o,c,!1),(c&o.childLanes)===0)return null}else return null;if(i!==null&&o.child!==i.child)throw Error(r(153));if(o.child!==null){for(i=o.child,c=os(i,i.pendingProps),o.child=c,c.return=o;i.sibling!==null;)i=i.sibling,c=c.sibling=os(i,i.pendingProps),c.return=o;c.sibling=null}return o.child}function op(i,o){return(i.lanes&o)!==0?!0:(i=i.dependencies,!!(i!==null&&jc(i)))}function tR(i,o,c){switch(o.tag){case 3:xe(o,o.stateNode.containerInfo),Ms(o,Pt,i.memoizedState.cache),vi();break;case 27:case 5:Ce(o);break;case 4:xe(o,o.stateNode.containerInfo);break;case 10:Ms(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,Ih(o),null;break;case 13:var h=o.memoizedState;if(h!==null)return h.dehydrated!==null?(zs(o),o.flags|=128,null):(c&o.child.childLanes)!==0?rv(i,o,c):(zs(o),i=hs(i,o,c),i!==null?i.sibling:null);zs(o);break;case 19:var b=(i.flags&128)!==0;if(h=(c&o.childLanes)!==0,h||(pa(i,o,c,!1),h=(c&o.childLanes)!==0),b){if(h)return iv(i,o,c);o.flags|=128}if(b=o.memoizedState,b!==null&&(b.rendering=null,b.tail=null,b.lastEffect=null),O(Lt,Lt.current),h)break;return null;case 22:return o.lanes=0,Y_(i,o,c,o.pendingProps);case 24:Ms(o,Pt,i.memoizedState.cache)}return hs(i,o,c)}function av(i,o,c){if(i!==null)if(i.memoizedProps!==o.pendingProps)Ut=!0;else{if(!op(i,c)&&(o.flags&128)===0)return Ut=!1,tR(i,o,c);Ut=(i.flags&131072)!==0}else Ut=!1,et&&(o.flags&1048576)!==0&&Pb(o,No,o.index);switch(o.lanes=0,o.tag){case 16:e:{var h=o.pendingProps;if(i=ki(o.elementType),o.type=i,typeof i=="function")dh(i)?(h=Ai(i,h),o.tag=1,o=tv(null,o,i,h,c)):(o.tag=0,o=ep(null,o,i,h,c));else{if(i!=null){var b=i.$$typeof;if(b===M){o.tag=11,o=Z_(null,o,i,h,c);break e}else if(b===U){o.tag=14,o=Q_(null,o,i,h,c);break e}}throw o=X(i)||i,Error(r(306,o,""))}}return o;case 0:return ep(i,o,o.type,o.pendingProps,c);case 1:return h=o.type,b=Ai(h,o.pendingProps),tv(i,o,h,b,c);case 3:e:{if(xe(o,o.stateNode.containerInfo),i===null)throw Error(r(387));h=o.pendingProps;var _=o.memoizedState;b=_.element,Th(i,o),Bo(o,h,null,c);var k=o.memoizedState;if(h=k.cache,Ms(o,Pt,h),h!==_.cache&&xh(o,[Pt],c,!0),Po(),h=k.element,_.isDehydrated)if(_={element:h,isDehydrated:!1,cache:k.cache},o.updateQueue.baseState=_,o.memoizedState=_,o.flags&256){o=nv(i,o,h,c);break e}else if(h!==b){b=br(Error(r(424)),o),Io(b),o=nv(i,o,h,c);break e}else for(i=o.stateNode.containerInfo,i.nodeType===9?i=i.body:i=i.nodeName==="HTML"?i.ownerDocument.body:i,Tt=Sr(i.firstChild),pn=o,et=!0,Ns=null,xr=!0,c=Yb(o,null,h,c),o.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(vi(),h===b){o=hs(i,o,c);break e}gn(i,o,h,c)}o=o.child}return o;case 26:return eu(i,o),i===null?(c=yx(o.type,null,o.pendingProps,null))?o.memoizedState=c:et||(c=o.type,i=o.pendingProps,h=yu(P.current).createElement(c),h[hn]=o,h[$n]=i,yn(h,c,i),sn(h),o.stateNode=h):o.memoizedState=yx(o.type,i.memoizedProps,o.pendingProps,i.memoizedState),null;case 27:return Ce(o),i===null&&et&&(h=o.stateNode=px(o.type,o.pendingProps,P.current),pn=o,xr=!0,b=Tt,Gs(o.type)?(Up=b,Tt=Sr(h.firstChild)):Tt=b),gn(i,o,o.pendingProps.children,c),eu(i,o),i===null&&(o.flags|=4194304),o.child;case 5:return i===null&&et&&((b=h=Tt)&&(h=NR(h,o.type,o.pendingProps,xr),h!==null?(o.stateNode=h,pn=o,Tt=Sr(h.firstChild),xr=!1,b=!0):b=!1),b||Is(o)),Ce(o),b=o.type,_=o.pendingProps,k=i!==null?i.memoizedProps:null,h=_.children,jp(b,_)?h=null:k!==null&&jp(b,k)&&(o.flags|=32),o.memoizedState!==null&&(b=Dh(i,o,G2,null,null,c),il._currentValue=b),eu(i,o),gn(i,o,h,c),o.child;case 6:return i===null&&et&&((i=c=Tt)&&(c=IR(c,o.pendingProps,xr),c!==null?(o.stateNode=c,pn=o,Tt=null,i=!0):i=!1),i||Is(o)),null;case 13:return rv(i,o,c);case 4:return xe(o,o.stateNode.containerInfo),h=o.pendingProps,i===null?o.child=Ci(o,null,h,c):gn(i,o,h,c),o.child;case 11:return Z_(i,o,o.type,o.pendingProps,c);case 7:return gn(i,o,o.pendingProps,c),o.child;case 8:return gn(i,o,o.pendingProps.children,c),o.child;case 12:return gn(i,o,o.pendingProps.children,c),o.child;case 10:return h=o.pendingProps,Ms(o,o.type,h.value),gn(i,o,h.children,c),o.child;case 9:return b=o.type._context,h=o.pendingProps.children,wi(o),b=mn(b),h=h(b),o.flags|=1,gn(i,o,h,c),o.child;case 14:return Q_(i,o,o.type,o.pendingProps,c);case 15:return J_(i,o,o.type,o.pendingProps,c);case 19:return iv(i,o,c);case 31:return eR(i,o,c);case 22:return Y_(i,o,c,o.pendingProps);case 24:return wi(o),h=mn(Pt),i===null?(b=kh(),b===null&&(b=xt,_=wh(),b.pooledCache=_,_.refCount++,_!==null&&(b.pooledCacheLanes|=c),b=_),o.memoizedState={parent:h,cache:b},Ch(o),Ms(o,Pt,b)):((i.lanes&c)!==0&&(Th(i,o),Bo(o,null,null,c),Po()),b=i.memoizedState,_=o.memoizedState,b.parent!==h?(b={parent:h,cache:h},o.memoizedState=b,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=b),Ms(o,Pt,h)):(h=_.cache,Ms(o,Pt,h),h!==b.cache&&xh(o,[Pt],c,!0))),gn(i,o,o.pendingProps.children,c),o.child;case 29:throw o.pendingProps}throw Error(r(156,o.tag))}function ps(i){i.flags|=4}function lp(i,o,c,h,b){if((o=(i.mode&32)!==0)&&(o=!1),o){if(i.flags|=16777216,(b&335544128)===b)if(i.stateNode.complete)i.flags|=8192;else if(Mv())i.flags|=8192;else throw Ei=Bc,Eh}else i.flags&=-16777217}function ov(i,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!wx(o))if(Mv())i.flags|=8192;else throw Ei=Bc,Eh}function nu(i,o){o!==null&&(i.flags|=4),i.flags&16384&&(o=i.tag!==22?di():536870912,i.lanes|=o,Ca|=o)}function Ho(i,o){if(!et)switch(i.tailMode){case"hidden":o=i.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?i.tail=null:c.sibling=null;break;case"collapsed":c=i.tail;for(var h=null;c!==null;)c.alternate!==null&&(h=c),c=c.sibling;h===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:h.sibling=null}}function At(i){var o=i.alternate!==null&&i.alternate.child===i.child,c=0,h=0;if(o)for(var b=i.child;b!==null;)c|=b.lanes|b.childLanes,h|=b.subtreeFlags&65011712,h|=b.flags&65011712,b.return=i,b=b.sibling;else for(b=i.child;b!==null;)c|=b.lanes|b.childLanes,h|=b.subtreeFlags,h|=b.flags,b.return=i,b=b.sibling;return i.subtreeFlags|=h,i.childLanes=c,o}function nR(i,o,c){var h=o.pendingProps;switch(gh(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return At(o),null;case 1:return At(o),null;case 3:return c=o.stateNode,h=null,i!==null&&(h=i.memoizedState.cache),o.memoizedState.cache!==h&&(o.flags|=2048),us(Pt),_e(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(i===null||i.child===null)&&(ha(o)?ps(o):i===null||i.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,bh())),At(o),null;case 26:var b=o.type,_=o.memoizedState;return i===null?(ps(o),_!==null?(At(o),ov(o,_)):(At(o),lp(o,b,null,h,c))):_?_!==i.memoizedState?(ps(o),At(o),ov(o,_)):(At(o),o.flags&=-16777217):(i=i.memoizedProps,i!==h&&ps(o),At(o),lp(o,b,i,h,c)),null;case 27:if(Me(o),c=P.current,b=o.type,i!==null&&o.stateNode!=null)i.memoizedProps!==h&&ps(o);else{if(!h){if(o.stateNode===null)throw Error(r(166));return At(o),null}i=le.current,ha(o)?Ub(o):(i=px(b,h,c),o.stateNode=i,ps(o))}return At(o),null;case 5:if(Me(o),b=o.type,i!==null&&o.stateNode!=null)i.memoizedProps!==h&&ps(o);else{if(!h){if(o.stateNode===null)throw Error(r(166));return At(o),null}if(_=le.current,ha(o))Ub(o);else{var k=yu(P.current);switch(_){case 1:_=k.createElementNS("http://www.w3.org/2000/svg",b);break;case 2:_=k.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;default:switch(b){case"svg":_=k.createElementNS("http://www.w3.org/2000/svg",b);break;case"math":_=k.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;case"script":_=k.createElement("div"),_.innerHTML="<script><\/script>",_=_.removeChild(_.firstChild);break;case"select":_=typeof h.is=="string"?k.createElement("select",{is:h.is}):k.createElement("select"),h.multiple?_.multiple=!0:h.size&&(_.size=h.size);break;default:_=typeof h.is=="string"?k.createElement(b,{is:h.is}):k.createElement(b)}}_[hn]=o,_[$n]=h;e:for(k=o.child;k!==null;){if(k.tag===5||k.tag===6)_.appendChild(k.stateNode);else if(k.tag!==4&&k.tag!==27&&k.child!==null){k.child.return=k,k=k.child;continue}if(k===o)break e;for(;k.sibling===null;){if(k.return===null||k.return===o)break e;k=k.return}k.sibling.return=k.return,k=k.sibling}o.stateNode=_;e:switch(yn(_,b,h),b){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}h&&ps(o)}}return At(o),lp(o,o.type,i===null?null:i.memoizedProps,o.pendingProps,c),null;case 6:if(i&&o.stateNode!=null)i.memoizedProps!==h&&ps(o);else{if(typeof h!="string"&&o.stateNode===null)throw Error(r(166));if(i=P.current,ha(o)){if(i=o.stateNode,c=o.memoizedProps,h=null,b=pn,b!==null)switch(b.tag){case 27:case 5:h=b.memoizedProps}i[hn]=o,i=!!(i.nodeValue===c||h!==null&&h.suppressHydrationWarning===!0||rx(i.nodeValue,c)),i||Is(o,!0)}else i=yu(i).createTextNode(h),i[hn]=o,o.stateNode=i}return At(o),null;case 31:if(c=o.memoizedState,i===null||i.memoizedState!==null){if(h=ha(o),c!==null){if(i===null){if(!h)throw Error(r(318));if(i=o.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(557));i[hn]=o}else vi(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;At(o),i=!1}else c=bh(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=c),i=!0;if(!i)return o.flags&256?(sr(o),o):(sr(o),null);if((o.flags&128)!==0)throw Error(r(558))}return At(o),null;case 13:if(h=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(b=ha(o),h!==null&&h.dehydrated!==null){if(i===null){if(!b)throw Error(r(318));if(b=o.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(r(317));b[hn]=o}else vi(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;At(o),b=!1}else b=bh(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=b),b=!0;if(!b)return o.flags&256?(sr(o),o):(sr(o),null)}return sr(o),(o.flags&128)!==0?(o.lanes=c,o):(c=h!==null,i=i!==null&&i.memoizedState!==null,c&&(h=o.child,b=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(b=h.alternate.memoizedState.cachePool.pool),_=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(_=h.memoizedState.cachePool.pool),_!==b&&(h.flags|=2048)),c!==i&&c&&(o.child.flags|=8192),nu(o,o.updateQueue),At(o),null);case 4:return _e(),i===null&&Op(o.stateNode.containerInfo),At(o),null;case 10:return us(o.type),At(o),null;case 19:if(H(Lt),h=o.memoizedState,h===null)return At(o),null;if(b=(o.flags&128)!==0,_=h.rendering,_===null)if(b)Ho(h,!1);else{if(Dt!==0||i!==null&&(i.flags&128)!==0)for(i=o.child;i!==null;){if(_=Fc(i),_!==null){for(o.flags|=128,Ho(h,!1),i=_.updateQueue,o.updateQueue=i,nu(o,i),o.subtreeFlags=0,i=c,c=o.child;c!==null;)jb(c,i),c=c.sibling;return O(Lt,Lt.current&1|2),et&&ls(o,h.treeForkCount),o.child}i=i.sibling}h.tail!==null&&Ae()>ou&&(o.flags|=128,b=!0,Ho(h,!1),o.lanes=4194304)}else{if(!b)if(i=Fc(_),i!==null){if(o.flags|=128,b=!0,i=i.updateQueue,o.updateQueue=i,nu(o,i),Ho(h,!0),h.tail===null&&h.tailMode==="hidden"&&!_.alternate&&!et)return At(o),null}else 2*Ae()-h.renderingStartTime>ou&&c!==536870912&&(o.flags|=128,b=!0,Ho(h,!1),o.lanes=4194304);h.isBackwards?(_.sibling=o.child,o.child=_):(i=h.last,i!==null?i.sibling=_:o.child=_,h.last=_)}return h.tail!==null?(i=h.tail,h.rendering=i,h.tail=i.sibling,h.renderingStartTime=Ae(),i.sibling=null,c=Lt.current,O(Lt,b?c&1|2:c&1),et&&ls(o,h.treeForkCount),i):(At(o),null);case 22:case 23:return sr(o),Nh(),h=o.memoizedState!==null,i!==null?i.memoizedState!==null!==h&&(o.flags|=8192):h&&(o.flags|=8192),h?(c&536870912)!==0&&(o.flags&128)===0&&(At(o),o.subtreeFlags&6&&(o.flags|=8192)):At(o),c=o.updateQueue,c!==null&&nu(o,c.retryQueue),c=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),h=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(h=o.memoizedState.cachePool.pool),h!==c&&(o.flags|=2048),i!==null&&H(Si),null;case 24:return c=null,i!==null&&(c=i.memoizedState.cache),o.memoizedState.cache!==c&&(o.flags|=2048),us(Pt),At(o),null;case 25:return null;case 30:return null}throw Error(r(156,o.tag))}function rR(i,o){switch(gh(o),o.tag){case 1:return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return us(Pt),_e(),i=o.flags,(i&65536)!==0&&(i&128)===0?(o.flags=i&-65537|128,o):null;case 26:case 27:case 5:return Me(o),null;case 31:if(o.memoizedState!==null){if(sr(o),o.alternate===null)throw Error(r(340));vi()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 13:if(sr(o),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(r(340));vi()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return H(Lt),null;case 4:return _e(),null;case 10:return us(o.type),null;case 22:case 23:return sr(o),Nh(),i!==null&&H(Si),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 24:return us(Pt),null;case 25:return null;default:return null}}function lv(i,o){switch(gh(o),o.tag){case 3:us(Pt),_e();break;case 26:case 27:case 5:Me(o);break;case 4:_e();break;case 31:o.memoizedState!==null&&sr(o);break;case 13:sr(o);break;case 19:H(Lt);break;case 10:us(o.type);break;case 22:case 23:sr(o),Nh(),i!==null&&H(Si);break;case 24:us(Pt)}}function Go(i,o){try{var c=o.updateQueue,h=c!==null?c.lastEffect:null;if(h!==null){var b=h.next;c=b;do{if((c.tag&i)===i){h=void 0;var _=c.create,k=c.inst;h=_(),k.destroy=h}c=c.next}while(c!==b)}}catch(A){ht(o,o.return,A)}}function Bs(i,o,c){try{var h=o.updateQueue,b=h!==null?h.lastEffect:null;if(b!==null){var _=b.next;h=_;do{if((h.tag&i)===i){var k=h.inst,A=k.destroy;if(A!==void 0){k.destroy=void 0,b=o;var $=c,W=A;try{W()}catch(oe){ht(b,$,oe)}}}h=h.next}while(h!==_)}}catch(oe){ht(o,o.return,oe)}}function cv(i){var o=i.updateQueue;if(o!==null){var c=i.stateNode;try{Xb(o,c)}catch(h){ht(i,i.return,h)}}}function uv(i,o,c){c.props=Ai(i.type,i.memoizedProps),c.state=i.memoizedState;try{c.componentWillUnmount()}catch(h){ht(i,o,h)}}function Ko(i,o){try{var c=i.ref;if(c!==null){switch(i.tag){case 26:case 27:case 5:var h=i.stateNode;break;case 30:h=i.stateNode;break;default:h=i.stateNode}typeof c=="function"?i.refCleanup=c(h):c.current=h}}catch(b){ht(i,o,b)}}function Fr(i,o){var c=i.ref,h=i.refCleanup;if(c!==null)if(typeof h=="function")try{h()}catch(b){ht(i,o,b)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(b){ht(i,o,b)}else c.current=null}function fv(i){var o=i.type,c=i.memoizedProps,h=i.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":c.autoFocus&&h.focus();break e;case"img":c.src?h.src=c.src:c.srcSet&&(h.srcset=c.srcSet)}}catch(b){ht(i,i.return,b)}}function cp(i,o,c){try{var h=i.stateNode;ER(h,i.type,c,o),h[$n]=o}catch(b){ht(i,i.return,b)}}function dv(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Gs(i.type)||i.tag===4}function up(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||dv(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Gs(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function fp(i,o,c){var h=i.tag;if(h===5||h===6)i=i.stateNode,o?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(i,o):(o=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,o.appendChild(i),c=c._reactRootContainer,c!=null||o.onclick!==null||(o.onclick=is));else if(h!==4&&(h===27&&Gs(i.type)&&(c=i.stateNode,o=null),i=i.child,i!==null))for(fp(i,o,c),i=i.sibling;i!==null;)fp(i,o,c),i=i.sibling}function ru(i,o,c){var h=i.tag;if(h===5||h===6)i=i.stateNode,o?c.insertBefore(i,o):c.appendChild(i);else if(h!==4&&(h===27&&Gs(i.type)&&(c=i.stateNode),i=i.child,i!==null))for(ru(i,o,c),i=i.sibling;i!==null;)ru(i,o,c),i=i.sibling}function hv(i){var o=i.stateNode,c=i.memoizedProps;try{for(var h=i.type,b=o.attributes;b.length;)o.removeAttributeNode(b[0]);yn(o,h,c),o[hn]=i,o[$n]=c}catch(_){ht(i,i.return,_)}}var ms=!1,$t=!1,dp=!1,pv=typeof WeakSet=="function"?WeakSet:Set,an=null;function sR(i,o){if(i=i.containerInfo,Mp=ku,i=Cb(i),ih(i)){if("selectionStart"in i)var c={start:i.selectionStart,end:i.selectionEnd};else e:{c=(c=i.ownerDocument)&&c.defaultView||window;var h=c.getSelection&&c.getSelection();if(h&&h.rangeCount!==0){c=h.anchorNode;var b=h.anchorOffset,_=h.focusNode;h=h.focusOffset;try{c.nodeType,_.nodeType}catch{c=null;break e}var k=0,A=-1,$=-1,W=0,oe=0,fe=i,te=null;t:for(;;){for(var ae;fe!==c||b!==0&&fe.nodeType!==3||(A=k+b),fe!==_||h!==0&&fe.nodeType!==3||($=k+h),fe.nodeType===3&&(k+=fe.nodeValue.length),(ae=fe.firstChild)!==null;)te=fe,fe=ae;for(;;){if(fe===i)break t;if(te===c&&++W===b&&(A=k),te===_&&++oe===h&&($=k),(ae=fe.nextSibling)!==null)break;fe=te,te=fe.parentNode}fe=ae}c=A===-1||$===-1?null:{start:A,end:$}}else c=null}c=c||{start:0,end:0}}else c=null;for(Dp={focusedElem:i,selectionRange:c},ku=!1,an=o;an!==null;)if(o=an,i=o.child,(o.subtreeFlags&1028)!==0&&i!==null)i.return=o,an=i;else for(;an!==null;){switch(o=an,_=o.alternate,i=o.flags,o.tag){case 0:if((i&4)!==0&&(i=o.updateQueue,i=i!==null?i.events:null,i!==null))for(c=0;c<i.length;c++)b=i[c],b.ref.impl=b.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&_!==null){i=void 0,c=o,b=_.memoizedProps,_=_.memoizedState,h=c.stateNode;try{var we=Ai(c.type,b);i=h.getSnapshotBeforeUpdate(we,_),h.__reactInternalSnapshotBeforeUpdate=i}catch(De){ht(c,c.return,De)}}break;case 3:if((i&1024)!==0){if(i=o.stateNode.containerInfo,c=i.nodeType,c===9)zp(i);else if(c===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":zp(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(r(163))}if(i=o.sibling,i!==null){i.return=o.return,an=i;break}an=o.return}}function mv(i,o,c){var h=c.flags;switch(c.tag){case 0:case 11:case 15:ys(i,c),h&4&&Go(5,c);break;case 1:if(ys(i,c),h&4)if(i=c.stateNode,o===null)try{i.componentDidMount()}catch(k){ht(c,c.return,k)}else{var b=Ai(c.type,o.memoizedProps);o=o.memoizedState;try{i.componentDidUpdate(b,o,i.__reactInternalSnapshotBeforeUpdate)}catch(k){ht(c,c.return,k)}}h&64&&cv(c),h&512&&Ko(c,c.return);break;case 3:if(ys(i,c),h&64&&(i=c.updateQueue,i!==null)){if(o=null,c.child!==null)switch(c.child.tag){case 27:case 5:o=c.child.stateNode;break;case 1:o=c.child.stateNode}try{Xb(i,o)}catch(k){ht(c,c.return,k)}}break;case 27:o===null&&h&4&&hv(c);case 26:case 5:ys(i,c),o===null&&h&4&&fv(c),h&512&&Ko(c,c.return);break;case 12:ys(i,c);break;case 31:ys(i,c),h&4&&bv(i,c);break;case 13:ys(i,c),h&4&&_v(i,c),h&64&&(i=c.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(c=hR.bind(null,c),MR(i,c))));break;case 22:if(h=c.memoizedState!==null||ms,!h){o=o!==null&&o.memoizedState!==null||$t,b=ms;var _=$t;ms=h,($t=o)&&!_?bs(i,c,(c.subtreeFlags&8772)!==0):ys(i,c),ms=b,$t=_}break;case 30:break;default:ys(i,c)}}function gv(i){var o=i.alternate;o!==null&&(i.alternate=null,gv(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&qd(o)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var Rt=null,Fn=!1;function gs(i,o,c){for(c=c.child;c!==null;)yv(i,o,c),c=c.sibling}function yv(i,o,c){if(lt&&typeof lt.onCommitFiberUnmount=="function")try{lt.onCommitFiberUnmount(vt,c)}catch{}switch(c.tag){case 26:$t||Fr(c,o),gs(i,o,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:$t||Fr(c,o);var h=Rt,b=Fn;Gs(c.type)&&(Rt=c.stateNode,Fn=!1),gs(i,o,c),nl(c.stateNode),Rt=h,Fn=b;break;case 5:$t||Fr(c,o);case 6:if(h=Rt,b=Fn,Rt=null,gs(i,o,c),Rt=h,Fn=b,Rt!==null)if(Fn)try{(Rt.nodeType===9?Rt.body:Rt.nodeName==="HTML"?Rt.ownerDocument.body:Rt).removeChild(c.stateNode)}catch(_){ht(c,o,_)}else try{Rt.removeChild(c.stateNode)}catch(_){ht(c,o,_)}break;case 18:Rt!==null&&(Fn?(i=Rt,cx(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,c.stateNode),Da(i)):cx(Rt,c.stateNode));break;case 4:h=Rt,b=Fn,Rt=c.stateNode.containerInfo,Fn=!0,gs(i,o,c),Rt=h,Fn=b;break;case 0:case 11:case 14:case 15:Bs(2,c,o),$t||Bs(4,c,o),gs(i,o,c);break;case 1:$t||(Fr(c,o),h=c.stateNode,typeof h.componentWillUnmount=="function"&&uv(c,o,h)),gs(i,o,c);break;case 21:gs(i,o,c);break;case 22:$t=(h=$t)||c.memoizedState!==null,gs(i,o,c),$t=h;break;default:gs(i,o,c)}}function bv(i,o){if(o.memoizedState===null&&(i=o.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{Da(i)}catch(c){ht(o,o.return,c)}}}function _v(i,o){if(o.memoizedState===null&&(i=o.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Da(i)}catch(c){ht(o,o.return,c)}}function iR(i){switch(i.tag){case 31:case 13:case 19:var o=i.stateNode;return o===null&&(o=i.stateNode=new pv),o;case 22:return i=i.stateNode,o=i._retryCache,o===null&&(o=i._retryCache=new pv),o;default:throw Error(r(435,i.tag))}}function su(i,o){var c=iR(i);o.forEach(function(h){if(!c.has(h)){c.add(h);var b=pR.bind(null,i,h);h.then(b,b)}})}function Vn(i,o){var c=o.deletions;if(c!==null)for(var h=0;h<c.length;h++){var b=c[h],_=i,k=o,A=k;e:for(;A!==null;){switch(A.tag){case 27:if(Gs(A.type)){Rt=A.stateNode,Fn=!1;break e}break;case 5:Rt=A.stateNode,Fn=!1;break e;case 3:case 4:Rt=A.stateNode.containerInfo,Fn=!0;break e}A=A.return}if(Rt===null)throw Error(r(160));yv(_,k,b),Rt=null,Fn=!1,_=b.alternate,_!==null&&(_.return=null),b.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)vv(o,i),o=o.sibling}var jr=null;function vv(i,o){var c=i.alternate,h=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:Vn(o,i),Hn(i),h&4&&(Bs(3,i,i.return),Go(3,i),Bs(5,i,i.return));break;case 1:Vn(o,i),Hn(i),h&512&&($t||c===null||Fr(c,c.return)),h&64&&ms&&(i=i.updateQueue,i!==null&&(h=i.callbacks,h!==null&&(c=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=c===null?h:c.concat(h))));break;case 26:var b=jr;if(Vn(o,i),Hn(i),h&512&&($t||c===null||Fr(c,c.return)),h&4){var _=c!==null?c.memoizedState:null;if(h=i.memoizedState,c===null)if(h===null)if(i.stateNode===null){e:{h=i.type,c=i.memoizedProps,b=b.ownerDocument||b;t:switch(h){case"title":_=b.getElementsByTagName("title")[0],(!_||_[vo]||_[hn]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=b.createElement(h),b.head.insertBefore(_,b.querySelector("head > title"))),yn(_,h,c),_[hn]=i,sn(_),h=_;break e;case"link":var k=vx("link","href",b).get(h+(c.href||""));if(k){for(var A=0;A<k.length;A++)if(_=k[A],_.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&_.getAttribute("rel")===(c.rel==null?null:c.rel)&&_.getAttribute("title")===(c.title==null?null:c.title)&&_.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){k.splice(A,1);break t}}_=b.createElement(h),yn(_,h,c),b.head.appendChild(_);break;case"meta":if(k=vx("meta","content",b).get(h+(c.content||""))){for(A=0;A<k.length;A++)if(_=k[A],_.getAttribute("content")===(c.content==null?null:""+c.content)&&_.getAttribute("name")===(c.name==null?null:c.name)&&_.getAttribute("property")===(c.property==null?null:c.property)&&_.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&_.getAttribute("charset")===(c.charSet==null?null:c.charSet)){k.splice(A,1);break t}}_=b.createElement(h),yn(_,h,c),b.head.appendChild(_);break;default:throw Error(r(468,h))}_[hn]=i,sn(_),h=_}i.stateNode=h}else xx(b,i.type,i.stateNode);else i.stateNode=_x(b,h,i.memoizedProps);else _!==h?(_===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):_.count--,h===null?xx(b,i.type,i.stateNode):_x(b,h,i.memoizedProps)):h===null&&i.stateNode!==null&&cp(i,i.memoizedProps,c.memoizedProps)}break;case 27:Vn(o,i),Hn(i),h&512&&($t||c===null||Fr(c,c.return)),c!==null&&h&4&&cp(i,i.memoizedProps,c.memoizedProps);break;case 5:if(Vn(o,i),Hn(i),h&512&&($t||c===null||Fr(c,c.return)),i.flags&32){b=i.stateNode;try{ra(b,"")}catch(we){ht(i,i.return,we)}}h&4&&i.stateNode!=null&&(b=i.memoizedProps,cp(i,b,c!==null?c.memoizedProps:b)),h&1024&&(dp=!0);break;case 6:if(Vn(o,i),Hn(i),h&4){if(i.stateNode===null)throw Error(r(162));h=i.memoizedProps,c=i.stateNode;try{c.nodeValue=h}catch(we){ht(i,i.return,we)}}break;case 3:if(vu=null,b=jr,jr=bu(o.containerInfo),Vn(o,i),jr=b,Hn(i),h&4&&c!==null&&c.memoizedState.isDehydrated)try{Da(o.containerInfo)}catch(we){ht(i,i.return,we)}dp&&(dp=!1,xv(i));break;case 4:h=jr,jr=bu(i.stateNode.containerInfo),Vn(o,i),Hn(i),jr=h;break;case 12:Vn(o,i),Hn(i);break;case 31:Vn(o,i),Hn(i),h&4&&(h=i.updateQueue,h!==null&&(i.updateQueue=null,su(i,h)));break;case 13:Vn(o,i),Hn(i),i.child.flags&8192&&i.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(au=Ae()),h&4&&(h=i.updateQueue,h!==null&&(i.updateQueue=null,su(i,h)));break;case 22:b=i.memoizedState!==null;var $=c!==null&&c.memoizedState!==null,W=ms,oe=$t;if(ms=W||b,$t=oe||$,Vn(o,i),$t=oe,ms=W,Hn(i),h&8192)e:for(o=i.stateNode,o._visibility=b?o._visibility&-2:o._visibility|1,b&&(c===null||$||ms||$t||Ri(i)),c=null,o=i;;){if(o.tag===5||o.tag===26){if(c===null){$=c=o;try{if(_=$.stateNode,b)k=_.style,typeof k.setProperty=="function"?k.setProperty("display","none","important"):k.display="none";else{A=$.stateNode;var fe=$.memoizedProps.style,te=fe!=null&&fe.hasOwnProperty("display")?fe.display:null;A.style.display=te==null||typeof te=="boolean"?"":(""+te).trim()}}catch(we){ht($,$.return,we)}}}else if(o.tag===6){if(c===null){$=o;try{$.stateNode.nodeValue=b?"":$.memoizedProps}catch(we){ht($,$.return,we)}}}else if(o.tag===18){if(c===null){$=o;try{var ae=$.stateNode;b?ux(ae,!0):ux($.stateNode,!1)}catch(we){ht($,$.return,we)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===i)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break e;for(;o.sibling===null;){if(o.return===null||o.return===i)break e;c===o&&(c=null),o=o.return}c===o&&(c=null),o.sibling.return=o.return,o=o.sibling}h&4&&(h=i.updateQueue,h!==null&&(c=h.retryQueue,c!==null&&(h.retryQueue=null,su(i,c))));break;case 19:Vn(o,i),Hn(i),h&4&&(h=i.updateQueue,h!==null&&(i.updateQueue=null,su(i,h)));break;case 30:break;case 21:break;default:Vn(o,i),Hn(i)}}function Hn(i){var o=i.flags;if(o&2){try{for(var c,h=i.return;h!==null;){if(dv(h)){c=h;break}h=h.return}if(c==null)throw Error(r(160));switch(c.tag){case 27:var b=c.stateNode,_=up(i);ru(i,_,b);break;case 5:var k=c.stateNode;c.flags&32&&(ra(k,""),c.flags&=-33);var A=up(i);ru(i,A,k);break;case 3:case 4:var $=c.stateNode.containerInfo,W=up(i);fp(i,W,$);break;default:throw Error(r(161))}}catch(oe){ht(i,i.return,oe)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function xv(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var o=i;xv(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),i=i.sibling}}function ys(i,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)mv(i,o.alternate,o),o=o.sibling}function Ri(i){for(i=i.child;i!==null;){var o=i;switch(o.tag){case 0:case 11:case 14:case 15:Bs(4,o,o.return),Ri(o);break;case 1:Fr(o,o.return);var c=o.stateNode;typeof c.componentWillUnmount=="function"&&uv(o,o.return,c),Ri(o);break;case 27:nl(o.stateNode);case 26:case 5:Fr(o,o.return),Ri(o);break;case 22:o.memoizedState===null&&Ri(o);break;case 30:Ri(o);break;default:Ri(o)}i=i.sibling}}function bs(i,o,c){for(c=c&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var h=o.alternate,b=i,_=o,k=_.flags;switch(_.tag){case 0:case 11:case 15:bs(b,_,c),Go(4,_);break;case 1:if(bs(b,_,c),h=_,b=h.stateNode,typeof b.componentDidMount=="function")try{b.componentDidMount()}catch(W){ht(h,h.return,W)}if(h=_,b=h.updateQueue,b!==null){var A=h.stateNode;try{var $=b.shared.hiddenCallbacks;if($!==null)for(b.shared.hiddenCallbacks=null,b=0;b<$.length;b++)Wb($[b],A)}catch(W){ht(h,h.return,W)}}c&&k&64&&cv(_),Ko(_,_.return);break;case 27:hv(_);case 26:case 5:bs(b,_,c),c&&h===null&&k&4&&fv(_),Ko(_,_.return);break;case 12:bs(b,_,c);break;case 31:bs(b,_,c),c&&k&4&&bv(b,_);break;case 13:bs(b,_,c),c&&k&4&&_v(b,_);break;case 22:_.memoizedState===null&&bs(b,_,c),Ko(_,_.return);break;case 30:break;default:bs(b,_,c)}o=o.sibling}}function hp(i,o){var c=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),i=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(i=o.memoizedState.cachePool.pool),i!==c&&(i!=null&&i.refCount++,c!=null&&Mo(c))}function pp(i,o){i=null,o.alternate!==null&&(i=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==i&&(o.refCount++,i!=null&&Mo(i))}function Lr(i,o,c,h){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)wv(i,o,c,h),o=o.sibling}function wv(i,o,c,h){var b=o.flags;switch(o.tag){case 0:case 11:case 15:Lr(i,o,c,h),b&2048&&Go(9,o);break;case 1:Lr(i,o,c,h);break;case 3:Lr(i,o,c,h),b&2048&&(i=null,o.alternate!==null&&(i=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==i&&(o.refCount++,i!=null&&Mo(i)));break;case 12:if(b&2048){Lr(i,o,c,h),i=o.stateNode;try{var _=o.memoizedProps,k=_.id,A=_.onPostCommit;typeof A=="function"&&A(k,o.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch($){ht(o,o.return,$)}}else Lr(i,o,c,h);break;case 31:Lr(i,o,c,h);break;case 13:Lr(i,o,c,h);break;case 23:break;case 22:_=o.stateNode,k=o.alternate,o.memoizedState!==null?_._visibility&2?Lr(i,o,c,h):Zo(i,o):_._visibility&2?Lr(i,o,c,h):(_._visibility|=2,Sa(i,o,c,h,(o.subtreeFlags&10256)!==0||!1)),b&2048&&hp(k,o);break;case 24:Lr(i,o,c,h),b&2048&&pp(o.alternate,o);break;default:Lr(i,o,c,h)}}function Sa(i,o,c,h,b){for(b=b&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var _=i,k=o,A=c,$=h,W=k.flags;switch(k.tag){case 0:case 11:case 15:Sa(_,k,A,$,b),Go(8,k);break;case 23:break;case 22:var oe=k.stateNode;k.memoizedState!==null?oe._visibility&2?Sa(_,k,A,$,b):Zo(_,k):(oe._visibility|=2,Sa(_,k,A,$,b)),b&&W&2048&&hp(k.alternate,k);break;case 24:Sa(_,k,A,$,b),b&&W&2048&&pp(k.alternate,k);break;default:Sa(_,k,A,$,b)}o=o.sibling}}function Zo(i,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var c=i,h=o,b=h.flags;switch(h.tag){case 22:Zo(c,h),b&2048&&hp(h.alternate,h);break;case 24:Zo(c,h),b&2048&&pp(h.alternate,h);break;default:Zo(c,h)}o=o.sibling}}var Qo=8192;function ka(i,o,c){if(i.subtreeFlags&Qo)for(i=i.child;i!==null;)Sv(i,o,c),i=i.sibling}function Sv(i,o,c){switch(i.tag){case 26:ka(i,o,c),i.flags&Qo&&i.memoizedState!==null&&HR(c,jr,i.memoizedState,i.memoizedProps);break;case 5:ka(i,o,c);break;case 3:case 4:var h=jr;jr=bu(i.stateNode.containerInfo),ka(i,o,c),jr=h;break;case 22:i.memoizedState===null&&(h=i.alternate,h!==null&&h.memoizedState!==null?(h=Qo,Qo=16777216,ka(i,o,c),Qo=h):ka(i,o,c));break;default:ka(i,o,c)}}function kv(i){var o=i.alternate;if(o!==null&&(i=o.child,i!==null)){o.child=null;do o=i.sibling,i.sibling=null,i=o;while(i!==null)}}function Jo(i){var o=i.deletions;if((i.flags&16)!==0){if(o!==null)for(var c=0;c<o.length;c++){var h=o[c];an=h,Cv(h,i)}kv(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Ev(i),i=i.sibling}function Ev(i){switch(i.tag){case 0:case 11:case 15:Jo(i),i.flags&2048&&Bs(9,i,i.return);break;case 3:Jo(i);break;case 12:Jo(i);break;case 22:var o=i.stateNode;i.memoizedState!==null&&o._visibility&2&&(i.return===null||i.return.tag!==13)?(o._visibility&=-3,iu(i)):Jo(i);break;default:Jo(i)}}function iu(i){var o=i.deletions;if((i.flags&16)!==0){if(o!==null)for(var c=0;c<o.length;c++){var h=o[c];an=h,Cv(h,i)}kv(i)}for(i=i.child;i!==null;){switch(o=i,o.tag){case 0:case 11:case 15:Bs(8,o,o.return),iu(o);break;case 22:c=o.stateNode,c._visibility&2&&(c._visibility&=-3,iu(o));break;default:iu(o)}i=i.sibling}}function Cv(i,o){for(;an!==null;){var c=an;switch(c.tag){case 0:case 11:case 15:Bs(8,c,o);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var h=c.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:Mo(c.memoizedState.cache)}if(h=c.child,h!==null)h.return=c,an=h;else e:for(c=i;an!==null;){h=an;var b=h.sibling,_=h.return;if(gv(h),h===c){an=null;break e}if(b!==null){b.return=_,an=b;break e}an=_}}}var aR={getCacheForType:function(i){var o=mn(Pt),c=o.data.get(i);return c===void 0&&(c=i(),o.data.set(i,c)),c},cacheSignal:function(){return mn(Pt).controller.signal}},oR=typeof WeakMap=="function"?WeakMap:Map,ot=0,xt=null,Ke=null,Ye=0,dt=0,ir=null,Us=!1,Ea=!1,mp=!1,_s=0,Dt=0,$s=0,Oi=0,gp=0,ar=0,Ca=0,Yo=null,Gn=null,yp=!1,au=0,Tv=0,ou=1/0,lu=null,qs=null,Kt=0,Fs=null,Ta=null,vs=0,bp=0,_p=null,Av=null,Wo=0,vp=null;function or(){return(ot&2)!==0&&Ye!==0?Ye&-Ye:B.T!==null?Cp():V0()}function Rv(){if(ar===0)if((Ye&536870912)===0||et){var i=rt;rt<<=1,(rt&3932160)===0&&(rt=262144),ar=i}else ar=536870912;return i=rr.current,i!==null&&(i.flags|=32),ar}function Kn(i,o,c){(i===xt&&(dt===2||dt===9)||i.cancelPendingCommit!==null)&&(Aa(i,0),Vs(i,Ye,ar,!1)),Un(i,c),((ot&2)===0||i!==xt)&&(i===xt&&((ot&2)===0&&(Oi|=c),Dt===4&&Vs(i,Ye,ar,!1)),Vr(i))}function Ov(i,o,c){if((ot&6)!==0)throw Error(r(327));var h=!c&&(o&127)===0&&(o&i.expiredLanes)===0||Ct(i,o),b=h?uR(i,o):wp(i,o,!0),_=h;do{if(b===0){Ea&&!h&&Vs(i,o,0,!1);break}else{if(c=i.current.alternate,_&&!lR(c)){b=wp(i,o,!1),_=!1;continue}if(b===2){if(_=o,i.errorRecoveryDisabledLanes&_)var k=0;else k=i.pendingLanes&-536870913,k=k!==0?k:k&536870912?536870912:0;if(k!==0){o=k;e:{var A=i;b=Yo;var $=A.current.memoizedState.isDehydrated;if($&&(Aa(A,k).flags|=256),k=wp(A,k,!1),k!==2){if(mp&&!$){A.errorRecoveryDisabledLanes|=_,Oi|=_,b=4;break e}_=Gn,Gn=b,_!==null&&(Gn===null?Gn=_:Gn.push.apply(Gn,_))}b=k}if(_=!1,b!==2)continue}}if(b===1){Aa(i,0),Vs(i,o,0,!0);break}e:{switch(h=i,_=b,_){case 0:case 1:throw Error(r(345));case 4:if((o&4194048)!==o)break;case 6:Vs(h,o,ar,!Us);break e;case 2:Gn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((o&62914560)===o&&(b=au+300-Ae(),10<b)){if(Vs(h,o,ar,!Us),Nn(h,0,!0)!==0)break e;vs=o,h.timeoutHandle=ox(Nv.bind(null,h,c,Gn,lu,yp,o,ar,Oi,Ca,Us,_,"Throttled",-0,0),b);break e}Nv(h,c,Gn,lu,yp,o,ar,Oi,Ca,Us,_,null,-0,0)}}break}while(!0);Vr(i)}function Nv(i,o,c,h,b,_,k,A,$,W,oe,fe,te,ae){if(i.timeoutHandle=-1,fe=o.subtreeFlags,fe&8192||(fe&16785408)===16785408){fe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:is},Sv(o,_,fe);var we=(_&62914560)===_?au-Ae():(_&4194048)===_?Tv-Ae():0;if(we=GR(fe,we),we!==null){vs=_,i.cancelPendingCommit=we(Bv.bind(null,i,o,_,c,h,b,k,A,$,oe,fe,null,te,ae)),Vs(i,_,k,!W);return}}Bv(i,o,_,c,h,b,k,A,$)}function lR(i){for(var o=i;;){var c=o.tag;if((c===0||c===11||c===15)&&o.flags&16384&&(c=o.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var h=0;h<c.length;h++){var b=c[h],_=b.getSnapshot;b=b.value;try{if(!tr(_(),b))return!1}catch{return!1}}if(c=o.child,o.subtreeFlags&16384&&c!==null)c.return=o,o=c;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Vs(i,o,c,h){o&=~gp,o&=~Oi,i.suspendedLanes|=o,i.pingedLanes&=~o,h&&(i.warmLanes|=o),h=i.expirationTimes;for(var b=o;0<b;){var _=31-Ne(b),k=1<<_;h[_]=-1,b&=~k}c!==0&&_o(i,c,o)}function cu(){return(ot&6)===0?(Xo(0),!1):!0}function xp(){if(Ke!==null){if(dt===0)var i=Ke.return;else i=Ke,cs=xi=null,zh(i),ba=null,jo=0,i=Ke;for(;i!==null;)lv(i.alternate,i),i=i.return;Ke=null}}function Aa(i,o){var c=i.timeoutHandle;c!==-1&&(i.timeoutHandle=-1,AR(c)),c=i.cancelPendingCommit,c!==null&&(i.cancelPendingCommit=null,c()),vs=0,xp(),xt=i,Ke=c=os(i.current,null),Ye=o,dt=0,ir=null,Us=!1,Ea=Ct(i,o),mp=!1,Ca=ar=gp=Oi=$s=Dt=0,Gn=Yo=null,yp=!1,(o&8)!==0&&(o|=o&32);var h=i.entangledLanes;if(h!==0)for(i=i.entanglements,h&=o;0<h;){var b=31-Ne(h),_=1<<b;o|=i[b],h&=~_}return _s=o,Oc(),c}function Iv(i,o){Be=null,B.H=Fo,o===ya||o===Pc?(o=Zb(),dt=3):o===Eh?(o=Zb(),dt=4):dt=o===Xh?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,ir=o,Ke===null&&(Dt=1,Wc(i,br(o,i.current)))}function Mv(){var i=rr.current;return i===null?!0:(Ye&4194048)===Ye?wr===null:(Ye&62914560)===Ye||(Ye&536870912)!==0?i===wr:!1}function Dv(){var i=B.H;return B.H=Fo,i===null?Fo:i}function jv(){var i=B.A;return B.A=aR,i}function uu(){Dt=4,Us||(Ye&4194048)!==Ye&&rr.current!==null||(Ea=!0),($s&134217727)===0&&(Oi&134217727)===0||xt===null||Vs(xt,Ye,ar,!1)}function wp(i,o,c){var h=ot;ot|=2;var b=Dv(),_=jv();(xt!==i||Ye!==o)&&(lu=null,Aa(i,o)),o=!1;var k=Dt;e:do try{if(dt!==0&&Ke!==null){var A=Ke,$=ir;switch(dt){case 8:xp(),k=6;break e;case 3:case 2:case 9:case 6:rr.current===null&&(o=!0);var W=dt;if(dt=0,ir=null,Ra(i,A,$,W),c&&Ea){k=0;break e}break;default:W=dt,dt=0,ir=null,Ra(i,A,$,W)}}cR(),k=Dt;break}catch(oe){Iv(i,oe)}while(!0);return o&&i.shellSuspendCounter++,cs=xi=null,ot=h,B.H=b,B.A=_,Ke===null&&(xt=null,Ye=0,Oc()),k}function cR(){for(;Ke!==null;)Lv(Ke)}function uR(i,o){var c=ot;ot|=2;var h=Dv(),b=jv();xt!==i||Ye!==o?(lu=null,ou=Ae()+500,Aa(i,o)):Ea=Ct(i,o);e:do try{if(dt!==0&&Ke!==null){o=Ke;var _=ir;t:switch(dt){case 1:dt=0,ir=null,Ra(i,o,_,1);break;case 2:case 9:if(Gb(_)){dt=0,ir=null,zv(o);break}o=function(){dt!==2&&dt!==9||xt!==i||(dt=7),Vr(i)},_.then(o,o);break e;case 3:dt=7;break e;case 4:dt=5;break e;case 7:Gb(_)?(dt=0,ir=null,zv(o)):(dt=0,ir=null,Ra(i,o,_,7));break;case 5:var k=null;switch(Ke.tag){case 26:k=Ke.memoizedState;case 5:case 27:var A=Ke;if(k?wx(k):A.stateNode.complete){dt=0,ir=null;var $=A.sibling;if($!==null)Ke=$;else{var W=A.return;W!==null?(Ke=W,fu(W)):Ke=null}break t}}dt=0,ir=null,Ra(i,o,_,5);break;case 6:dt=0,ir=null,Ra(i,o,_,6);break;case 8:xp(),Dt=6;break e;default:throw Error(r(462))}}fR();break}catch(oe){Iv(i,oe)}while(!0);return cs=xi=null,B.H=h,B.A=b,ot=c,Ke!==null?0:(xt=null,Ye=0,Oc(),Dt)}function fR(){for(;Ke!==null&&!Ve();)Lv(Ke)}function Lv(i){var o=av(i.alternate,i,_s);i.memoizedProps=i.pendingProps,o===null?fu(i):Ke=o}function zv(i){var o=i,c=o.alternate;switch(o.tag){case 15:case 0:o=ev(c,o,o.pendingProps,o.type,void 0,Ye);break;case 11:o=ev(c,o,o.pendingProps,o.type.render,o.ref,Ye);break;case 5:zh(o);default:lv(c,o),o=Ke=jb(o,_s),o=av(c,o,_s)}i.memoizedProps=i.pendingProps,o===null?fu(i):Ke=o}function Ra(i,o,c,h){cs=xi=null,zh(o),ba=null,jo=0;var b=o.return;try{if(X2(i,b,o,c,Ye)){Dt=1,Wc(i,br(c,i.current)),Ke=null;return}}catch(_){if(b!==null)throw Ke=b,_;Dt=1,Wc(i,br(c,i.current)),Ke=null;return}o.flags&32768?(et||h===1?i=!0:Ea||(Ye&536870912)!==0?i=!1:(Us=i=!0,(h===2||h===9||h===3||h===6)&&(h=rr.current,h!==null&&h.tag===13&&(h.flags|=16384))),Pv(o,i)):fu(o)}function fu(i){var o=i;do{if((o.flags&32768)!==0){Pv(o,Us);return}i=o.return;var c=nR(o.alternate,o,_s);if(c!==null){Ke=c;return}if(o=o.sibling,o!==null){Ke=o;return}Ke=o=i}while(o!==null);Dt===0&&(Dt=5)}function Pv(i,o){do{var c=rR(i.alternate,i);if(c!==null){c.flags&=32767,Ke=c;return}if(c=i.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!o&&(i=i.sibling,i!==null)){Ke=i;return}Ke=i=c}while(i!==null);Dt=6,Ke=null}function Bv(i,o,c,h,b,_,k,A,$){i.cancelPendingCommit=null;do du();while(Kt!==0);if((ot&6)!==0)throw Error(r(327));if(o!==null){if(o===i.current)throw Error(r(177));if(_=o.lanes|o.childLanes,_|=uh,bo(i,c,_,k,A,$),i===xt&&(Ke=xt=null,Ye=0),Ta=o,Fs=i,vs=c,bp=_,_p=b,Av=h,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,mR(ue,function(){return Vv(),null})):(i.callbackNode=null,i.callbackPriority=0),h=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||h){h=B.T,B.T=null,b=G.p,G.p=2,k=ot,ot|=4;try{sR(i,o,c)}finally{ot=k,G.p=b,B.T=h}}Kt=1,Uv(),$v(),qv()}}function Uv(){if(Kt===1){Kt=0;var i=Fs,o=Ta,c=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||c){c=B.T,B.T=null;var h=G.p;G.p=2;var b=ot;ot|=4;try{vv(o,i);var _=Dp,k=Cb(i.containerInfo),A=_.focusedElem,$=_.selectionRange;if(k!==A&&A&&A.ownerDocument&&Eb(A.ownerDocument.documentElement,A)){if($!==null&&ih(A)){var W=$.start,oe=$.end;if(oe===void 0&&(oe=W),"selectionStart"in A)A.selectionStart=W,A.selectionEnd=Math.min(oe,A.value.length);else{var fe=A.ownerDocument||document,te=fe&&fe.defaultView||window;if(te.getSelection){var ae=te.getSelection(),we=A.textContent.length,De=Math.min($.start,we),_t=$.end===void 0?De:Math.min($.end,we);!ae.extend&&De>_t&&(k=_t,_t=De,De=k);var Q=kb(A,De),V=kb(A,_t);if(Q&&V&&(ae.rangeCount!==1||ae.anchorNode!==Q.node||ae.anchorOffset!==Q.offset||ae.focusNode!==V.node||ae.focusOffset!==V.offset)){var Y=fe.createRange();Y.setStart(Q.node,Q.offset),ae.removeAllRanges(),De>_t?(ae.addRange(Y),ae.extend(V.node,V.offset)):(Y.setEnd(V.node,V.offset),ae.addRange(Y))}}}}for(fe=[],ae=A;ae=ae.parentNode;)ae.nodeType===1&&fe.push({element:ae,left:ae.scrollLeft,top:ae.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<fe.length;A++){var ce=fe[A];ce.element.scrollLeft=ce.left,ce.element.scrollTop=ce.top}}ku=!!Mp,Dp=Mp=null}finally{ot=b,G.p=h,B.T=c}}i.current=o,Kt=2}}function $v(){if(Kt===2){Kt=0;var i=Fs,o=Ta,c=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||c){c=B.T,B.T=null;var h=G.p;G.p=2;var b=ot;ot|=4;try{mv(i,o.alternate,o)}finally{ot=b,G.p=h,B.T=c}}Kt=3}}function qv(){if(Kt===4||Kt===3){Kt=0,He();var i=Fs,o=Ta,c=vs,h=Av;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?Kt=5:(Kt=0,Ta=Fs=null,Fv(i,i.pendingLanes));var b=i.pendingLanes;if(b===0&&(qs=null),Ud(c),o=o.stateNode,lt&&typeof lt.onCommitFiberRoot=="function")try{lt.onCommitFiberRoot(vt,o,void 0,(o.current.flags&128)===128)}catch{}if(h!==null){o=B.T,b=G.p,G.p=2,B.T=null;try{for(var _=i.onRecoverableError,k=0;k<h.length;k++){var A=h[k];_(A.value,{componentStack:A.stack})}}finally{B.T=o,G.p=b}}(vs&3)!==0&&du(),Vr(i),b=i.pendingLanes,(c&261930)!==0&&(b&42)!==0?i===vp?Wo++:(Wo=0,vp=i):Wo=0,Xo(0)}}function Fv(i,o){(i.pooledCacheLanes&=o)===0&&(o=i.pooledCache,o!=null&&(i.pooledCache=null,Mo(o)))}function du(){return Uv(),$v(),qv(),Vv()}function Vv(){if(Kt!==5)return!1;var i=Fs,o=bp;bp=0;var c=Ud(vs),h=B.T,b=G.p;try{G.p=32>c?32:c,B.T=null,c=_p,_p=null;var _=Fs,k=vs;if(Kt=0,Ta=Fs=null,vs=0,(ot&6)!==0)throw Error(r(331));var A=ot;if(ot|=4,Ev(_.current),wv(_,_.current,k,c),ot=A,Xo(0,!1),lt&&typeof lt.onPostCommitFiberRoot=="function")try{lt.onPostCommitFiberRoot(vt,_)}catch{}return!0}finally{G.p=b,B.T=h,Fv(i,o)}}function Hv(i,o,c){o=br(c,o),o=Wh(i.stateNode,o,2),i=Ls(i,o,2),i!==null&&(Un(i,2),Vr(i))}function ht(i,o,c){if(i.tag===3)Hv(i,i,c);else for(;o!==null;){if(o.tag===3){Hv(o,i,c);break}else if(o.tag===1){var h=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(qs===null||!qs.has(h))){i=br(c,i),c=G_(2),h=Ls(o,c,2),h!==null&&(K_(c,h,o,i),Un(h,2),Vr(h));break}}o=o.return}}function Sp(i,o,c){var h=i.pingCache;if(h===null){h=i.pingCache=new oR;var b=new Set;h.set(o,b)}else b=h.get(o),b===void 0&&(b=new Set,h.set(o,b));b.has(c)||(mp=!0,b.add(c),i=dR.bind(null,i,o,c),o.then(i,i))}function dR(i,o,c){var h=i.pingCache;h!==null&&h.delete(o),i.pingedLanes|=i.suspendedLanes&c,i.warmLanes&=~c,xt===i&&(Ye&c)===c&&(Dt===4||Dt===3&&(Ye&62914560)===Ye&&300>Ae()-au?(ot&2)===0&&Aa(i,0):gp|=c,Ca===Ye&&(Ca=0)),Vr(i)}function Gv(i,o){o===0&&(o=di()),i=bi(i,o),i!==null&&(Un(i,o),Vr(i))}function hR(i){var o=i.memoizedState,c=0;o!==null&&(c=o.retryLane),Gv(i,c)}function pR(i,o){var c=0;switch(i.tag){case 31:case 13:var h=i.stateNode,b=i.memoizedState;b!==null&&(c=b.retryLane);break;case 19:h=i.stateNode;break;case 22:h=i.stateNode._retryCache;break;default:throw Error(r(314))}h!==null&&h.delete(o),Gv(i,c)}function mR(i,o){return dn(i,o)}var hu=null,Oa=null,kp=!1,pu=!1,Ep=!1,Hs=0;function Vr(i){i!==Oa&&i.next===null&&(Oa===null?hu=Oa=i:Oa=Oa.next=i),pu=!0,kp||(kp=!0,yR())}function Xo(i,o){if(!Ep&&pu){Ep=!0;do for(var c=!1,h=hu;h!==null;){if(i!==0){var b=h.pendingLanes;if(b===0)var _=0;else{var k=h.suspendedLanes,A=h.pingedLanes;_=(1<<31-Ne(42|i)+1)-1,_&=b&~(k&~A),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(c=!0,Jv(h,_))}else _=Ye,_=Nn(h,h===xt?_:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(_&3)===0||Ct(h,_)||(c=!0,Jv(h,_));h=h.next}while(c);Ep=!1}}function gR(){Kv()}function Kv(){pu=kp=!1;var i=0;Hs!==0&&TR()&&(i=Hs);for(var o=Ae(),c=null,h=hu;h!==null;){var b=h.next,_=Zv(h,o);_===0?(h.next=null,c===null?hu=b:c.next=b,b===null&&(Oa=c)):(c=h,(i!==0||(_&3)!==0)&&(pu=!0)),h=b}Kt!==0&&Kt!==5||Xo(i),Hs!==0&&(Hs=0)}function Zv(i,o){for(var c=i.suspendedLanes,h=i.pingedLanes,b=i.expirationTimes,_=i.pendingLanes&-62914561;0<_;){var k=31-Ne(_),A=1<<k,$=b[k];$===-1?((A&c)===0||(A&h)!==0)&&(b[k]=Bn(A,o)):$<=o&&(i.expiredLanes|=A),_&=~A}if(o=xt,c=Ye,c=Nn(i,i===o?c:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),h=i.callbackNode,c===0||i===o&&(dt===2||dt===9)||i.cancelPendingCommit!==null)return h!==null&&h!==null&&ke(h),i.callbackNode=null,i.callbackPriority=0;if((c&3)===0||Ct(i,c)){if(o=c&-c,o===i.callbackPriority)return o;switch(h!==null&&ke(h),Ud(c)){case 2:case 8:c=ge;break;case 32:c=ue;break;case 268435456:c=ve;break;default:c=ue}return h=Qv.bind(null,i),c=dn(c,h),i.callbackPriority=o,i.callbackNode=c,o}return h!==null&&h!==null&&ke(h),i.callbackPriority=2,i.callbackNode=null,2}function Qv(i,o){if(Kt!==0&&Kt!==5)return i.callbackNode=null,i.callbackPriority=0,null;var c=i.callbackNode;if(du()&&i.callbackNode!==c)return null;var h=Ye;return h=Nn(i,i===xt?h:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),h===0?null:(Ov(i,h,o),Zv(i,Ae()),i.callbackNode!=null&&i.callbackNode===c?Qv.bind(null,i):null)}function Jv(i,o){if(du())return null;Ov(i,o,!0)}function yR(){RR(function(){(ot&6)!==0?dn(se,gR):Kv()})}function Cp(){if(Hs===0){var i=ma;i===0&&(i=ft,ft<<=1,(ft&261888)===0&&(ft=256)),Hs=i}return Hs}function Yv(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:wc(""+i)}function Wv(i,o){var c=o.ownerDocument.createElement("input");return c.name=o.name,c.value=o.value,i.id&&c.setAttribute("form",i.id),o.parentNode.insertBefore(c,o),i=new FormData(i),c.parentNode.removeChild(c),i}function bR(i,o,c,h,b){if(o==="submit"&&c&&c.stateNode===b){var _=Yv((b[$n]||null).action),k=h.submitter;k&&(o=(o=k[$n]||null)?Yv(o.formAction):k.getAttribute("formAction"),o!==null&&(_=o,k=null));var A=new Cc("action","action",null,h,b);i.push({event:A,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(Hs!==0){var $=k?Wv(b,k):new FormData(b);Gh(c,{pending:!0,data:$,method:b.method,action:_},null,$)}}else typeof _=="function"&&(A.preventDefault(),$=k?Wv(b,k):new FormData(b),Gh(c,{pending:!0,data:$,method:b.method,action:_},_,$))},currentTarget:b}]})}}for(var Tp=0;Tp<ch.length;Tp++){var Ap=ch[Tp],_R=Ap.toLowerCase(),vR=Ap[0].toUpperCase()+Ap.slice(1);Dr(_R,"on"+vR)}Dr(Rb,"onAnimationEnd"),Dr(Ob,"onAnimationIteration"),Dr(Nb,"onAnimationStart"),Dr("dblclick","onDoubleClick"),Dr("focusin","onFocus"),Dr("focusout","onBlur"),Dr(L2,"onTransitionRun"),Dr(z2,"onTransitionStart"),Dr(P2,"onTransitionCancel"),Dr(Ib,"onTransitionEnd"),ta("onMouseEnter",["mouseout","mouseover"]),ta("onMouseLeave",["mouseout","mouseover"]),ta("onPointerEnter",["pointerout","pointerover"]),ta("onPointerLeave",["pointerout","pointerover"]),pi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),pi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),pi("onBeforeInput",["compositionend","keypress","textInput","paste"]),pi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),pi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),pi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var el="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),xR=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(el));function Xv(i,o){o=(o&4)!==0;for(var c=0;c<i.length;c++){var h=i[c],b=h.event;h=h.listeners;e:{var _=void 0;if(o)for(var k=h.length-1;0<=k;k--){var A=h[k],$=A.instance,W=A.currentTarget;if(A=A.listener,$!==_&&b.isPropagationStopped())break e;_=A,b.currentTarget=W;try{_(b)}catch(oe){Rc(oe)}b.currentTarget=null,_=$}else for(k=0;k<h.length;k++){if(A=h[k],$=A.instance,W=A.currentTarget,A=A.listener,$!==_&&b.isPropagationStopped())break e;_=A,b.currentTarget=W;try{_(b)}catch(oe){Rc(oe)}b.currentTarget=null,_=$}}}}function Ze(i,o){var c=o[$d];c===void 0&&(c=o[$d]=new Set);var h=i+"__bubble";c.has(h)||(ex(o,i,2,!1),c.add(h))}function Rp(i,o,c){var h=0;o&&(h|=4),ex(c,i,h,o)}var mu="_reactListening"+Math.random().toString(36).slice(2);function Op(i){if(!i[mu]){i[mu]=!0,K0.forEach(function(c){c!=="selectionchange"&&(xR.has(c)||Rp(c,!1,i),Rp(c,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[mu]||(o[mu]=!0,Rp("selectionchange",!1,o))}}function ex(i,o,c,h){switch(Rx(o)){case 2:var b=QR;break;case 8:b=JR;break;default:b=Hp}c=b.bind(null,o,c,i),b=void 0,!Jd||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(b=!0),h?b!==void 0?i.addEventListener(o,c,{capture:!0,passive:b}):i.addEventListener(o,c,!0):b!==void 0?i.addEventListener(o,c,{passive:b}):i.addEventListener(o,c,!1)}function Np(i,o,c,h,b){var _=h;if((o&1)===0&&(o&2)===0&&h!==null)e:for(;;){if(h===null)return;var k=h.tag;if(k===3||k===4){var A=h.stateNode.containerInfo;if(A===b)break;if(k===4)for(k=h.return;k!==null;){var $=k.tag;if(($===3||$===4)&&k.stateNode.containerInfo===b)return;k=k.return}for(;A!==null;){if(k=Wi(A),k===null)return;if($=k.tag,$===5||$===6||$===26||$===27){h=_=k;continue e}A=A.parentNode}}h=h.return}ib(function(){var W=_,oe=Zd(c),fe=[];e:{var te=Mb.get(i);if(te!==void 0){var ae=Cc,we=i;switch(i){case"keypress":if(kc(c)===0)break e;case"keydown":case"keyup":ae=p2;break;case"focusin":we="focus",ae=eh;break;case"focusout":we="blur",ae=eh;break;case"beforeblur":case"afterblur":ae=eh;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ae=lb;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ae=n2;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ae=y2;break;case Rb:case Ob:case Nb:ae=i2;break;case Ib:ae=_2;break;case"scroll":case"scrollend":ae=e2;break;case"wheel":ae=x2;break;case"copy":case"cut":case"paste":ae=o2;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ae=ub;break;case"toggle":case"beforetoggle":ae=S2}var De=(o&4)!==0,_t=!De&&(i==="scroll"||i==="scrollend"),Q=De?te!==null?te+"Capture":null:te;De=[];for(var V=W,Y;V!==null;){var ce=V;if(Y=ce.stateNode,ce=ce.tag,ce!==5&&ce!==26&&ce!==27||Y===null||Q===null||(ce=wo(V,Q),ce!=null&&De.push(tl(V,ce,Y))),_t)break;V=V.return}0<De.length&&(te=new ae(te,we,null,c,oe),fe.push({event:te,listeners:De}))}}if((o&7)===0){e:{if(te=i==="mouseover"||i==="pointerover",ae=i==="mouseout"||i==="pointerout",te&&c!==Kd&&(we=c.relatedTarget||c.fromElement)&&(Wi(we)||we[Yi]))break e;if((ae||te)&&(te=oe.window===oe?oe:(te=oe.ownerDocument)?te.defaultView||te.parentWindow:window,ae?(we=c.relatedTarget||c.toElement,ae=W,we=we?Wi(we):null,we!==null&&(_t=a(we),De=we.tag,we!==_t||De!==5&&De!==27&&De!==6)&&(we=null)):(ae=null,we=W),ae!==we)){if(De=lb,ce="onMouseLeave",Q="onMouseEnter",V="mouse",(i==="pointerout"||i==="pointerover")&&(De=ub,ce="onPointerLeave",Q="onPointerEnter",V="pointer"),_t=ae==null?te:xo(ae),Y=we==null?te:xo(we),te=new De(ce,V+"leave",ae,c,oe),te.target=_t,te.relatedTarget=Y,ce=null,Wi(oe)===W&&(De=new De(Q,V+"enter",we,c,oe),De.target=Y,De.relatedTarget=_t,ce=De),_t=ce,ae&&we)t:{for(De=wR,Q=ae,V=we,Y=0,ce=Q;ce;ce=De(ce))Y++;ce=0;for(var Re=V;Re;Re=De(Re))ce++;for(;0<Y-ce;)Q=De(Q),Y--;for(;0<ce-Y;)V=De(V),ce--;for(;Y--;){if(Q===V||V!==null&&Q===V.alternate){De=Q;break t}Q=De(Q),V=De(V)}De=null}else De=null;ae!==null&&tx(fe,te,ae,De,!1),we!==null&&_t!==null&&tx(fe,_t,we,De,!0)}}e:{if(te=W?xo(W):window,ae=te.nodeName&&te.nodeName.toLowerCase(),ae==="select"||ae==="input"&&te.type==="file")var it=bb;else if(gb(te))if(_b)it=M2;else{it=N2;var Ee=O2}else ae=te.nodeName,!ae||ae.toLowerCase()!=="input"||te.type!=="checkbox"&&te.type!=="radio"?W&&Gd(W.elementType)&&(it=bb):it=I2;if(it&&(it=it(i,W))){yb(fe,it,c,oe);break e}Ee&&Ee(i,te,W),i==="focusout"&&W&&te.type==="number"&&W.memoizedProps.value!=null&&Hd(te,"number",te.value)}switch(Ee=W?xo(W):window,i){case"focusin":(gb(Ee)||Ee.contentEditable==="true")&&(oa=Ee,ah=W,Oo=null);break;case"focusout":Oo=ah=oa=null;break;case"mousedown":oh=!0;break;case"contextmenu":case"mouseup":case"dragend":oh=!1,Tb(fe,c,oe);break;case"selectionchange":if(j2)break;case"keydown":case"keyup":Tb(fe,c,oe)}var $e;if(nh)e:{switch(i){case"compositionstart":var We="onCompositionStart";break e;case"compositionend":We="onCompositionEnd";break e;case"compositionupdate":We="onCompositionUpdate";break e}We=void 0}else aa?pb(i,c)&&(We="onCompositionEnd"):i==="keydown"&&c.keyCode===229&&(We="onCompositionStart");We&&(fb&&c.locale!=="ko"&&(aa||We!=="onCompositionStart"?We==="onCompositionEnd"&&aa&&($e=ab()):(Rs=oe,Yd="value"in Rs?Rs.value:Rs.textContent,aa=!0)),Ee=gu(W,We),0<Ee.length&&(We=new cb(We,i,null,c,oe),fe.push({event:We,listeners:Ee}),$e?We.data=$e:($e=mb(c),$e!==null&&(We.data=$e)))),($e=E2?C2(i,c):T2(i,c))&&(We=gu(W,"onBeforeInput"),0<We.length&&(Ee=new cb("onBeforeInput","beforeinput",null,c,oe),fe.push({event:Ee,listeners:We}),Ee.data=$e)),bR(fe,i,W,c,oe)}Xv(fe,o)})}function tl(i,o,c){return{instance:i,listener:o,currentTarget:c}}function gu(i,o){for(var c=o+"Capture",h=[];i!==null;){var b=i,_=b.stateNode;if(b=b.tag,b!==5&&b!==26&&b!==27||_===null||(b=wo(i,c),b!=null&&h.unshift(tl(i,b,_)),b=wo(i,o),b!=null&&h.push(tl(i,b,_))),i.tag===3)return h;i=i.return}return[]}function wR(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function tx(i,o,c,h,b){for(var _=o._reactName,k=[];c!==null&&c!==h;){var A=c,$=A.alternate,W=A.stateNode;if(A=A.tag,$!==null&&$===h)break;A!==5&&A!==26&&A!==27||W===null||($=W,b?(W=wo(c,_),W!=null&&k.unshift(tl(c,W,$))):b||(W=wo(c,_),W!=null&&k.push(tl(c,W,$)))),c=c.return}k.length!==0&&i.push({event:o,listeners:k})}var SR=/\r\n?/g,kR=/\u0000|\uFFFD/g;function nx(i){return(typeof i=="string"?i:""+i).replace(SR,`
`).replace(kR,"")}function rx(i,o){return o=nx(o),nx(i)===o}function bt(i,o,c,h,b,_){switch(c){case"children":typeof h=="string"?o==="body"||o==="textarea"&&h===""||ra(i,h):(typeof h=="number"||typeof h=="bigint")&&o!=="body"&&ra(i,""+h);break;case"className":vc(i,"class",h);break;case"tabIndex":vc(i,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":vc(i,c,h);break;case"style":rb(i,h,_);break;case"data":if(o!=="object"){vc(i,"data",h);break}case"src":case"href":if(h===""&&(o!=="a"||c!=="href")){i.removeAttribute(c);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){i.removeAttribute(c);break}h=wc(""+h),i.setAttribute(c,h);break;case"action":case"formAction":if(typeof h=="function"){i.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(c==="formAction"?(o!=="input"&&bt(i,o,"name",b.name,b,null),bt(i,o,"formEncType",b.formEncType,b,null),bt(i,o,"formMethod",b.formMethod,b,null),bt(i,o,"formTarget",b.formTarget,b,null)):(bt(i,o,"encType",b.encType,b,null),bt(i,o,"method",b.method,b,null),bt(i,o,"target",b.target,b,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){i.removeAttribute(c);break}h=wc(""+h),i.setAttribute(c,h);break;case"onClick":h!=null&&(i.onclick=is);break;case"onScroll":h!=null&&Ze("scroll",i);break;case"onScrollEnd":h!=null&&Ze("scrollend",i);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(r(61));if(c=h.__html,c!=null){if(b.children!=null)throw Error(r(60));i.innerHTML=c}}break;case"multiple":i.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":i.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){i.removeAttribute("xlink:href");break}c=wc(""+h),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?i.setAttribute(c,""+h):i.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?i.setAttribute(c,""):i.removeAttribute(c);break;case"capture":case"download":h===!0?i.setAttribute(c,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?i.setAttribute(c,h):i.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?i.setAttribute(c,h):i.removeAttribute(c);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?i.removeAttribute(c):i.setAttribute(c,h);break;case"popover":Ze("beforetoggle",i),Ze("toggle",i),_c(i,"popover",h);break;case"xlinkActuate":ss(i,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":ss(i,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":ss(i,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":ss(i,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":ss(i,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":ss(i,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":ss(i,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":ss(i,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":ss(i,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":_c(i,"is",h);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=WA.get(c)||c,_c(i,c,h))}}function Ip(i,o,c,h,b,_){switch(c){case"style":rb(i,h,_);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(r(61));if(c=h.__html,c!=null){if(b.children!=null)throw Error(r(60));i.innerHTML=c}}break;case"children":typeof h=="string"?ra(i,h):(typeof h=="number"||typeof h=="bigint")&&ra(i,""+h);break;case"onScroll":h!=null&&Ze("scroll",i);break;case"onScrollEnd":h!=null&&Ze("scrollend",i);break;case"onClick":h!=null&&(i.onclick=is);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Z0.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(b=c.endsWith("Capture"),o=c.slice(2,b?c.length-7:void 0),_=i[$n]||null,_=_!=null?_[c]:null,typeof _=="function"&&i.removeEventListener(o,_,b),typeof h=="function")){typeof _!="function"&&_!==null&&(c in i?i[c]=null:i.hasAttribute(c)&&i.removeAttribute(c)),i.addEventListener(o,h,b);break e}c in i?i[c]=h:h===!0?i.setAttribute(c,""):_c(i,c,h)}}}function yn(i,o,c){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ze("error",i),Ze("load",i);var h=!1,b=!1,_;for(_ in c)if(c.hasOwnProperty(_)){var k=c[_];if(k!=null)switch(_){case"src":h=!0;break;case"srcSet":b=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,o));default:bt(i,o,_,k,c,null)}}b&&bt(i,o,"srcSet",c.srcSet,c,null),h&&bt(i,o,"src",c.src,c,null);return;case"input":Ze("invalid",i);var A=_=k=b=null,$=null,W=null;for(h in c)if(c.hasOwnProperty(h)){var oe=c[h];if(oe!=null)switch(h){case"name":b=oe;break;case"type":k=oe;break;case"checked":$=oe;break;case"defaultChecked":W=oe;break;case"value":_=oe;break;case"defaultValue":A=oe;break;case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(r(137,o));break;default:bt(i,o,h,oe,c,null)}}X0(i,_,A,$,W,k,b,!1);return;case"select":Ze("invalid",i),h=k=_=null;for(b in c)if(c.hasOwnProperty(b)&&(A=c[b],A!=null))switch(b){case"value":_=A;break;case"defaultValue":k=A;break;case"multiple":h=A;default:bt(i,o,b,A,c,null)}o=_,c=k,i.multiple=!!h,o!=null?na(i,!!h,o,!1):c!=null&&na(i,!!h,c,!0);return;case"textarea":Ze("invalid",i),_=b=h=null;for(k in c)if(c.hasOwnProperty(k)&&(A=c[k],A!=null))switch(k){case"value":h=A;break;case"defaultValue":b=A;break;case"children":_=A;break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(r(91));break;default:bt(i,o,k,A,c,null)}tb(i,h,b,_);return;case"option":for($ in c)c.hasOwnProperty($)&&(h=c[$],h!=null)&&($==="selected"?i.selected=h&&typeof h!="function"&&typeof h!="symbol":bt(i,o,$,h,c,null));return;case"dialog":Ze("beforetoggle",i),Ze("toggle",i),Ze("cancel",i),Ze("close",i);break;case"iframe":case"object":Ze("load",i);break;case"video":case"audio":for(h=0;h<el.length;h++)Ze(el[h],i);break;case"image":Ze("error",i),Ze("load",i);break;case"details":Ze("toggle",i);break;case"embed":case"source":case"link":Ze("error",i),Ze("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(W in c)if(c.hasOwnProperty(W)&&(h=c[W],h!=null))switch(W){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,o));default:bt(i,o,W,h,c,null)}return;default:if(Gd(o)){for(oe in c)c.hasOwnProperty(oe)&&(h=c[oe],h!==void 0&&Ip(i,o,oe,h,c,void 0));return}}for(A in c)c.hasOwnProperty(A)&&(h=c[A],h!=null&&bt(i,o,A,h,c,null))}function ER(i,o,c,h){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var b=null,_=null,k=null,A=null,$=null,W=null,oe=null;for(ae in c){var fe=c[ae];if(c.hasOwnProperty(ae)&&fe!=null)switch(ae){case"checked":break;case"value":break;case"defaultValue":$=fe;default:h.hasOwnProperty(ae)||bt(i,o,ae,null,h,fe)}}for(var te in h){var ae=h[te];if(fe=c[te],h.hasOwnProperty(te)&&(ae!=null||fe!=null))switch(te){case"type":_=ae;break;case"name":b=ae;break;case"checked":W=ae;break;case"defaultChecked":oe=ae;break;case"value":k=ae;break;case"defaultValue":A=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(r(137,o));break;default:ae!==fe&&bt(i,o,te,ae,h,fe)}}Vd(i,k,A,$,W,oe,_,b);return;case"select":ae=k=A=te=null;for(_ in c)if($=c[_],c.hasOwnProperty(_)&&$!=null)switch(_){case"value":break;case"multiple":ae=$;default:h.hasOwnProperty(_)||bt(i,o,_,null,h,$)}for(b in h)if(_=h[b],$=c[b],h.hasOwnProperty(b)&&(_!=null||$!=null))switch(b){case"value":te=_;break;case"defaultValue":A=_;break;case"multiple":k=_;default:_!==$&&bt(i,o,b,_,h,$)}o=A,c=k,h=ae,te!=null?na(i,!!c,te,!1):!!h!=!!c&&(o!=null?na(i,!!c,o,!0):na(i,!!c,c?[]:"",!1));return;case"textarea":ae=te=null;for(A in c)if(b=c[A],c.hasOwnProperty(A)&&b!=null&&!h.hasOwnProperty(A))switch(A){case"value":break;case"children":break;default:bt(i,o,A,null,h,b)}for(k in h)if(b=h[k],_=c[k],h.hasOwnProperty(k)&&(b!=null||_!=null))switch(k){case"value":te=b;break;case"defaultValue":ae=b;break;case"children":break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(r(91));break;default:b!==_&&bt(i,o,k,b,h,_)}eb(i,te,ae);return;case"option":for(var we in c)te=c[we],c.hasOwnProperty(we)&&te!=null&&!h.hasOwnProperty(we)&&(we==="selected"?i.selected=!1:bt(i,o,we,null,h,te));for($ in h)te=h[$],ae=c[$],h.hasOwnProperty($)&&te!==ae&&(te!=null||ae!=null)&&($==="selected"?i.selected=te&&typeof te!="function"&&typeof te!="symbol":bt(i,o,$,te,h,ae));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var De in c)te=c[De],c.hasOwnProperty(De)&&te!=null&&!h.hasOwnProperty(De)&&bt(i,o,De,null,h,te);for(W in h)if(te=h[W],ae=c[W],h.hasOwnProperty(W)&&te!==ae&&(te!=null||ae!=null))switch(W){case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(r(137,o));break;default:bt(i,o,W,te,h,ae)}return;default:if(Gd(o)){for(var _t in c)te=c[_t],c.hasOwnProperty(_t)&&te!==void 0&&!h.hasOwnProperty(_t)&&Ip(i,o,_t,void 0,h,te);for(oe in h)te=h[oe],ae=c[oe],!h.hasOwnProperty(oe)||te===ae||te===void 0&&ae===void 0||Ip(i,o,oe,te,h,ae);return}}for(var Q in c)te=c[Q],c.hasOwnProperty(Q)&&te!=null&&!h.hasOwnProperty(Q)&&bt(i,o,Q,null,h,te);for(fe in h)te=h[fe],ae=c[fe],!h.hasOwnProperty(fe)||te===ae||te==null&&ae==null||bt(i,o,fe,te,h,ae)}function sx(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function CR(){if(typeof performance.getEntriesByType=="function"){for(var i=0,o=0,c=performance.getEntriesByType("resource"),h=0;h<c.length;h++){var b=c[h],_=b.transferSize,k=b.initiatorType,A=b.duration;if(_&&A&&sx(k)){for(k=0,A=b.responseEnd,h+=1;h<c.length;h++){var $=c[h],W=$.startTime;if(W>A)break;var oe=$.transferSize,fe=$.initiatorType;oe&&sx(fe)&&($=$.responseEnd,k+=oe*($<A?1:(A-W)/($-W)))}if(--h,o+=8*(_+k)/(b.duration/1e3),i++,10<i)break}}if(0<i)return o/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var Mp=null,Dp=null;function yu(i){return i.nodeType===9?i:i.ownerDocument}function ix(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ax(i,o){if(i===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&o==="foreignObject"?0:i}function jp(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Lp=null;function TR(){var i=window.event;return i&&i.type==="popstate"?i===Lp?!1:(Lp=i,!0):(Lp=null,!1)}var ox=typeof setTimeout=="function"?setTimeout:void 0,AR=typeof clearTimeout=="function"?clearTimeout:void 0,lx=typeof Promise=="function"?Promise:void 0,RR=typeof queueMicrotask=="function"?queueMicrotask:typeof lx<"u"?function(i){return lx.resolve(null).then(i).catch(OR)}:ox;function OR(i){setTimeout(function(){throw i})}function Gs(i){return i==="head"}function cx(i,o){var c=o,h=0;do{var b=c.nextSibling;if(i.removeChild(c),b&&b.nodeType===8)if(c=b.data,c==="/$"||c==="/&"){if(h===0){i.removeChild(b),Da(o);return}h--}else if(c==="$"||c==="$?"||c==="$~"||c==="$!"||c==="&")h++;else if(c==="html")nl(i.ownerDocument.documentElement);else if(c==="head"){c=i.ownerDocument.head,nl(c);for(var _=c.firstChild;_;){var k=_.nextSibling,A=_.nodeName;_[vo]||A==="SCRIPT"||A==="STYLE"||A==="LINK"&&_.rel.toLowerCase()==="stylesheet"||c.removeChild(_),_=k}}else c==="body"&&nl(i.ownerDocument.body);c=b}while(c);Da(o)}function ux(i,o){var c=i;i=0;do{var h=c.nextSibling;if(c.nodeType===1?o?(c._stashedDisplay=c.style.display,c.style.display="none"):(c.style.display=c._stashedDisplay||"",c.getAttribute("style")===""&&c.removeAttribute("style")):c.nodeType===3&&(o?(c._stashedText=c.nodeValue,c.nodeValue=""):c.nodeValue=c._stashedText||""),h&&h.nodeType===8)if(c=h.data,c==="/$"){if(i===0)break;i--}else c!=="$"&&c!=="$?"&&c!=="$~"&&c!=="$!"||i++;c=h}while(c)}function zp(i){var o=i.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var c=o;switch(o=o.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":zp(c),qd(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}i.removeChild(c)}}function NR(i,o,c,h){for(;i.nodeType===1;){var b=c;if(i.nodeName.toLowerCase()!==o.toLowerCase()){if(!h&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(h){if(!i[vo])switch(o){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(_=i.getAttribute("rel"),_==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(_!==b.rel||i.getAttribute("href")!==(b.href==null||b.href===""?null:b.href)||i.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin)||i.getAttribute("title")!==(b.title==null?null:b.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(_=i.getAttribute("src"),(_!==(b.src==null?null:b.src)||i.getAttribute("type")!==(b.type==null?null:b.type)||i.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin))&&_&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(o==="input"&&i.type==="hidden"){var _=b.name==null?null:""+b.name;if(b.type==="hidden"&&i.getAttribute("name")===_)return i}else return i;if(i=Sr(i.nextSibling),i===null)break}return null}function IR(i,o,c){if(o==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!c||(i=Sr(i.nextSibling),i===null))return null;return i}function fx(i,o){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!o||(i=Sr(i.nextSibling),i===null))return null;return i}function Pp(i){return i.data==="$?"||i.data==="$~"}function Bp(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function MR(i,o){var c=i.ownerDocument;if(i.data==="$~")i._reactRetry=o;else if(i.data!=="$?"||c.readyState!=="loading")o();else{var h=function(){o(),c.removeEventListener("DOMContentLoaded",h)};c.addEventListener("DOMContentLoaded",h),i._reactRetry=h}}function Sr(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return i}var Up=null;function dx(i){i=i.nextSibling;for(var o=0;i;){if(i.nodeType===8){var c=i.data;if(c==="/$"||c==="/&"){if(o===0)return Sr(i.nextSibling);o--}else c!=="$"&&c!=="$!"&&c!=="$?"&&c!=="$~"&&c!=="&"||o++}i=i.nextSibling}return null}function hx(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var c=i.data;if(c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"){if(o===0)return i;o--}else c!=="/$"&&c!=="/&"||o++}i=i.previousSibling}return null}function px(i,o,c){switch(o=yu(c),i){case"html":if(i=o.documentElement,!i)throw Error(r(452));return i;case"head":if(i=o.head,!i)throw Error(r(453));return i;case"body":if(i=o.body,!i)throw Error(r(454));return i;default:throw Error(r(451))}}function nl(i){for(var o=i.attributes;o.length;)i.removeAttributeNode(o[0]);qd(i)}var kr=new Map,mx=new Set;function bu(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var xs=G.d;G.d={f:DR,r:jR,D:LR,C:zR,L:PR,m:BR,X:$R,S:UR,M:qR};function DR(){var i=xs.f(),o=cu();return i||o}function jR(i){var o=Xi(i);o!==null&&o.tag===5&&o.type==="form"?I_(o):xs.r(i)}var Na=typeof document>"u"?null:document;function gx(i,o,c){var h=Na;if(h&&typeof o=="string"&&o){var b=gr(o);b='link[rel="'+i+'"][href="'+b+'"]',typeof c=="string"&&(b+='[crossorigin="'+c+'"]'),mx.has(b)||(mx.add(b),i={rel:i,crossOrigin:c,href:o},h.querySelector(b)===null&&(o=h.createElement("link"),yn(o,"link",i),sn(o),h.head.appendChild(o)))}}function LR(i){xs.D(i),gx("dns-prefetch",i,null)}function zR(i,o){xs.C(i,o),gx("preconnect",i,o)}function PR(i,o,c){xs.L(i,o,c);var h=Na;if(h&&i&&o){var b='link[rel="preload"][as="'+gr(o)+'"]';o==="image"&&c&&c.imageSrcSet?(b+='[imagesrcset="'+gr(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(b+='[imagesizes="'+gr(c.imageSizes)+'"]')):b+='[href="'+gr(i)+'"]';var _=b;switch(o){case"style":_=Ia(i);break;case"script":_=Ma(i)}kr.has(_)||(i=p({rel:"preload",href:o==="image"&&c&&c.imageSrcSet?void 0:i,as:o},c),kr.set(_,i),h.querySelector(b)!==null||o==="style"&&h.querySelector(rl(_))||o==="script"&&h.querySelector(sl(_))||(o=h.createElement("link"),yn(o,"link",i),sn(o),h.head.appendChild(o)))}}function BR(i,o){xs.m(i,o);var c=Na;if(c&&i){var h=o&&typeof o.as=="string"?o.as:"script",b='link[rel="modulepreload"][as="'+gr(h)+'"][href="'+gr(i)+'"]',_=b;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=Ma(i)}if(!kr.has(_)&&(i=p({rel:"modulepreload",href:i},o),kr.set(_,i),c.querySelector(b)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(sl(_)))return}h=c.createElement("link"),yn(h,"link",i),sn(h),c.head.appendChild(h)}}}function UR(i,o,c){xs.S(i,o,c);var h=Na;if(h&&i){var b=ea(h).hoistableStyles,_=Ia(i);o=o||"default";var k=b.get(_);if(!k){var A={loading:0,preload:null};if(k=h.querySelector(rl(_)))A.loading=5;else{i=p({rel:"stylesheet",href:i,"data-precedence":o},c),(c=kr.get(_))&&$p(i,c);var $=k=h.createElement("link");sn($),yn($,"link",i),$._p=new Promise(function(W,oe){$.onload=W,$.onerror=oe}),$.addEventListener("load",function(){A.loading|=1}),$.addEventListener("error",function(){A.loading|=2}),A.loading|=4,_u(k,o,h)}k={type:"stylesheet",instance:k,count:1,state:A},b.set(_,k)}}}function $R(i,o){xs.X(i,o);var c=Na;if(c&&i){var h=ea(c).hoistableScripts,b=Ma(i),_=h.get(b);_||(_=c.querySelector(sl(b)),_||(i=p({src:i,async:!0},o),(o=kr.get(b))&&qp(i,o),_=c.createElement("script"),sn(_),yn(_,"link",i),c.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},h.set(b,_))}}function qR(i,o){xs.M(i,o);var c=Na;if(c&&i){var h=ea(c).hoistableScripts,b=Ma(i),_=h.get(b);_||(_=c.querySelector(sl(b)),_||(i=p({src:i,async:!0,type:"module"},o),(o=kr.get(b))&&qp(i,o),_=c.createElement("script"),sn(_),yn(_,"link",i),c.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},h.set(b,_))}}function yx(i,o,c,h){var b=(b=P.current)?bu(b):null;if(!b)throw Error(r(446));switch(i){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(o=Ia(c.href),c=ea(b).hoistableStyles,h=c.get(o),h||(h={type:"style",instance:null,count:0,state:null},c.set(o,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){i=Ia(c.href);var _=ea(b).hoistableStyles,k=_.get(i);if(k||(b=b.ownerDocument||b,k={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(i,k),(_=b.querySelector(rl(i)))&&!_._p&&(k.instance=_,k.state.loading=5),kr.has(i)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},kr.set(i,c),_||FR(b,i,c,k.state))),o&&h===null)throw Error(r(528,""));return k}if(o&&h!==null)throw Error(r(529,""));return null;case"script":return o=c.async,c=c.src,typeof c=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=Ma(c),c=ea(b).hoistableScripts,h=c.get(o),h||(h={type:"script",instance:null,count:0,state:null},c.set(o,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,i))}}function Ia(i){return'href="'+gr(i)+'"'}function rl(i){return'link[rel="stylesheet"]['+i+"]"}function bx(i){return p({},i,{"data-precedence":i.precedence,precedence:null})}function FR(i,o,c,h){i.querySelector('link[rel="preload"][as="style"]['+o+"]")?h.loading=1:(o=i.createElement("link"),h.preload=o,o.addEventListener("load",function(){return h.loading|=1}),o.addEventListener("error",function(){return h.loading|=2}),yn(o,"link",c),sn(o),i.head.appendChild(o))}function Ma(i){return'[src="'+gr(i)+'"]'}function sl(i){return"script[async]"+i}function _x(i,o,c){if(o.count++,o.instance===null)switch(o.type){case"style":var h=i.querySelector('style[data-href~="'+gr(c.href)+'"]');if(h)return o.instance=h,sn(h),h;var b=p({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return h=(i.ownerDocument||i).createElement("style"),sn(h),yn(h,"style",b),_u(h,c.precedence,i),o.instance=h;case"stylesheet":b=Ia(c.href);var _=i.querySelector(rl(b));if(_)return o.state.loading|=4,o.instance=_,sn(_),_;h=bx(c),(b=kr.get(b))&&$p(h,b),_=(i.ownerDocument||i).createElement("link"),sn(_);var k=_;return k._p=new Promise(function(A,$){k.onload=A,k.onerror=$}),yn(_,"link",h),o.state.loading|=4,_u(_,c.precedence,i),o.instance=_;case"script":return _=Ma(c.src),(b=i.querySelector(sl(_)))?(o.instance=b,sn(b),b):(h=c,(b=kr.get(_))&&(h=p({},c),qp(h,b)),i=i.ownerDocument||i,b=i.createElement("script"),sn(b),yn(b,"link",h),i.head.appendChild(b),o.instance=b);case"void":return null;default:throw Error(r(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(h=o.instance,o.state.loading|=4,_u(h,c.precedence,i));return o.instance}function _u(i,o,c){for(var h=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),b=h.length?h[h.length-1]:null,_=b,k=0;k<h.length;k++){var A=h[k];if(A.dataset.precedence===o)_=A;else if(_!==b)break}_?_.parentNode.insertBefore(i,_.nextSibling):(o=c.nodeType===9?c.head:c,o.insertBefore(i,o.firstChild))}function $p(i,o){i.crossOrigin==null&&(i.crossOrigin=o.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=o.referrerPolicy),i.title==null&&(i.title=o.title)}function qp(i,o){i.crossOrigin==null&&(i.crossOrigin=o.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=o.referrerPolicy),i.integrity==null&&(i.integrity=o.integrity)}var vu=null;function vx(i,o,c){if(vu===null){var h=new Map,b=vu=new Map;b.set(c,h)}else b=vu,h=b.get(c),h||(h=new Map,b.set(c,h));if(h.has(i))return h;for(h.set(i,null),c=c.getElementsByTagName(i),b=0;b<c.length;b++){var _=c[b];if(!(_[vo]||_[hn]||i==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var k=_.getAttribute(o)||"";k=i+k;var A=h.get(k);A?A.push(_):h.set(k,[_])}}return h}function xx(i,o,c){i=i.ownerDocument||i,i.head.insertBefore(c,o==="title"?i.querySelector("head > title"):null)}function VR(i,o,c){if(c===1||o.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;return o.rel==="stylesheet"?(i=o.disabled,typeof o.precedence=="string"&&i==null):!0;case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function wx(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function HR(i,o,c,h){if(c.type==="stylesheet"&&(typeof h.media!="string"||matchMedia(h.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var b=Ia(h.href),_=o.querySelector(rl(b));if(_){o=_._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(i.count++,i=xu.bind(i),o.then(i,i)),c.state.loading|=4,c.instance=_,sn(_);return}_=o.ownerDocument||o,h=bx(h),(b=kr.get(b))&&$p(h,b),_=_.createElement("link"),sn(_);var k=_;k._p=new Promise(function(A,$){k.onload=A,k.onerror=$}),yn(_,"link",h),c.instance=_}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(c,o),(o=c.state.preload)&&(c.state.loading&3)===0&&(i.count++,c=xu.bind(i),o.addEventListener("load",c),o.addEventListener("error",c))}}var Fp=0;function GR(i,o){return i.stylesheets&&i.count===0&&Su(i,i.stylesheets),0<i.count||0<i.imgCount?function(c){var h=setTimeout(function(){if(i.stylesheets&&Su(i,i.stylesheets),i.unsuspend){var _=i.unsuspend;i.unsuspend=null,_()}},6e4+o);0<i.imgBytes&&Fp===0&&(Fp=62500*CR());var b=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&Su(i,i.stylesheets),i.unsuspend)){var _=i.unsuspend;i.unsuspend=null,_()}},(i.imgBytes>Fp?50:800)+o);return i.unsuspend=c,function(){i.unsuspend=null,clearTimeout(h),clearTimeout(b)}}:null}function xu(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Su(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var wu=null;function Su(i,o){i.stylesheets=null,i.unsuspend!==null&&(i.count++,wu=new Map,o.forEach(KR,i),wu=null,xu.call(i))}function KR(i,o){if(!(o.state.loading&4)){var c=wu.get(i);if(c)var h=c.get(null);else{c=new Map,wu.set(i,c);for(var b=i.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<b.length;_++){var k=b[_];(k.nodeName==="LINK"||k.getAttribute("media")!=="not all")&&(c.set(k.dataset.precedence,k),h=k)}h&&c.set(null,h)}b=o.instance,k=b.getAttribute("data-precedence"),_=c.get(k)||h,_===h&&c.set(null,b),c.set(k,b),this.count++,h=xu.bind(this),b.addEventListener("load",h),b.addEventListener("error",h),_?_.parentNode.insertBefore(b,_.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(b,i.firstChild)),o.state.loading|=4}}var il={$$typeof:T,Provider:null,Consumer:null,_currentValue:ie,_currentValue2:ie,_threadCount:0};function ZR(i,o,c,h,b,_,k,A,$){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ji(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ji(0),this.hiddenUpdates=Ji(null),this.identifierPrefix=h,this.onUncaughtError=b,this.onCaughtError=_,this.onRecoverableError=k,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=$,this.incompleteTransitions=new Map}function Sx(i,o,c,h,b,_,k,A,$,W,oe,fe){return i=new ZR(i,o,c,k,$,W,oe,fe,A),o=1,_===!0&&(o|=24),_=nr(3,null,null,o),i.current=_,_.stateNode=i,o=wh(),o.refCount++,i.pooledCache=o,o.refCount++,_.memoizedState={element:h,isDehydrated:c,cache:o},Ch(_),i}function kx(i){return i?(i=ua,i):ua}function Ex(i,o,c,h,b,_){b=kx(b),h.context===null?h.context=b:h.pendingContext=b,h=js(o),h.payload={element:c},_=_===void 0?null:_,_!==null&&(h.callback=_),c=Ls(i,h,o),c!==null&&(Kn(c,i,o),zo(c,i,o))}function Cx(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var c=i.retryLane;i.retryLane=c!==0&&c<o?c:o}}function Vp(i,o){Cx(i,o),(i=i.alternate)&&Cx(i,o)}function Tx(i){if(i.tag===13||i.tag===31){var o=bi(i,67108864);o!==null&&Kn(o,i,67108864),Vp(i,67108864)}}function Ax(i){if(i.tag===13||i.tag===31){var o=or();o=Bd(o);var c=bi(i,o);c!==null&&Kn(c,i,o),Vp(i,o)}}var ku=!0;function QR(i,o,c,h){var b=B.T;B.T=null;var _=G.p;try{G.p=2,Hp(i,o,c,h)}finally{G.p=_,B.T=b}}function JR(i,o,c,h){var b=B.T;B.T=null;var _=G.p;try{G.p=8,Hp(i,o,c,h)}finally{G.p=_,B.T=b}}function Hp(i,o,c,h){if(ku){var b=Gp(h);if(b===null)Np(i,o,h,Eu,c),Ox(i,h);else if(WR(b,i,o,c,h))h.stopPropagation();else if(Ox(i,h),o&4&&-1<YR.indexOf(i)){for(;b!==null;){var _=Xi(b);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var k=jt(_.pendingLanes);if(k!==0){var A=_;for(A.pendingLanes|=2,A.entangledLanes|=2;k;){var $=1<<31-Ne(k);A.entanglements[1]|=$,k&=~$}Vr(_),(ot&6)===0&&(ou=Ae()+500,Xo(0))}}break;case 31:case 13:A=bi(_,2),A!==null&&Kn(A,_,2),cu(),Vp(_,2)}if(_=Gp(h),_===null&&Np(i,o,h,Eu,c),_===b)break;b=_}b!==null&&h.stopPropagation()}else Np(i,o,h,null,c)}}function Gp(i){return i=Zd(i),Kp(i)}var Eu=null;function Kp(i){if(Eu=null,i=Wi(i),i!==null){var o=a(i);if(o===null)i=null;else{var c=o.tag;if(c===13){if(i=l(o),i!==null)return i;i=null}else if(c===31){if(i=u(o),i!==null)return i;i=null}else if(c===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null)}}return Eu=i,null}function Rx(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(St()){case se:return 2;case ge:return 8;case ue:case ye:return 32;case ve:return 268435456;default:return 32}default:return 32}}var Zp=!1,Ks=null,Zs=null,Qs=null,al=new Map,ol=new Map,Js=[],YR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Ox(i,o){switch(i){case"focusin":case"focusout":Ks=null;break;case"dragenter":case"dragleave":Zs=null;break;case"mouseover":case"mouseout":Qs=null;break;case"pointerover":case"pointerout":al.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":ol.delete(o.pointerId)}}function ll(i,o,c,h,b,_){return i===null||i.nativeEvent!==_?(i={blockedOn:o,domEventName:c,eventSystemFlags:h,nativeEvent:_,targetContainers:[b]},o!==null&&(o=Xi(o),o!==null&&Tx(o)),i):(i.eventSystemFlags|=h,o=i.targetContainers,b!==null&&o.indexOf(b)===-1&&o.push(b),i)}function WR(i,o,c,h,b){switch(o){case"focusin":return Ks=ll(Ks,i,o,c,h,b),!0;case"dragenter":return Zs=ll(Zs,i,o,c,h,b),!0;case"mouseover":return Qs=ll(Qs,i,o,c,h,b),!0;case"pointerover":var _=b.pointerId;return al.set(_,ll(al.get(_)||null,i,o,c,h,b)),!0;case"gotpointercapture":return _=b.pointerId,ol.set(_,ll(ol.get(_)||null,i,o,c,h,b)),!0}return!1}function Nx(i){var o=Wi(i.target);if(o!==null){var c=a(o);if(c!==null){if(o=c.tag,o===13){if(o=l(c),o!==null){i.blockedOn=o,H0(i.priority,function(){Ax(c)});return}}else if(o===31){if(o=u(c),o!==null){i.blockedOn=o,H0(i.priority,function(){Ax(c)});return}}else if(o===3&&c.stateNode.current.memoizedState.isDehydrated){i.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Cu(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var c=Gp(i.nativeEvent);if(c===null){c=i.nativeEvent;var h=new c.constructor(c.type,c);Kd=h,c.target.dispatchEvent(h),Kd=null}else return o=Xi(c),o!==null&&Tx(o),i.blockedOn=c,!1;o.shift()}return!0}function Ix(i,o,c){Cu(i)&&c.delete(o)}function XR(){Zp=!1,Ks!==null&&Cu(Ks)&&(Ks=null),Zs!==null&&Cu(Zs)&&(Zs=null),Qs!==null&&Cu(Qs)&&(Qs=null),al.forEach(Ix),ol.forEach(Ix)}function Tu(i,o){i.blockedOn===o&&(i.blockedOn=null,Zp||(Zp=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,XR)))}var Au=null;function Mx(i){Au!==i&&(Au=i,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Au===i&&(Au=null);for(var o=0;o<i.length;o+=3){var c=i[o],h=i[o+1],b=i[o+2];if(typeof h!="function"){if(Kp(h||c)===null)continue;break}var _=Xi(c);_!==null&&(i.splice(o,3),o-=3,Gh(_,{pending:!0,data:b,method:c.method,action:h},h,b))}}))}function Da(i){function o($){return Tu($,i)}Ks!==null&&Tu(Ks,i),Zs!==null&&Tu(Zs,i),Qs!==null&&Tu(Qs,i),al.forEach(o),ol.forEach(o);for(var c=0;c<Js.length;c++){var h=Js[c];h.blockedOn===i&&(h.blockedOn=null)}for(;0<Js.length&&(c=Js[0],c.blockedOn===null);)Nx(c),c.blockedOn===null&&Js.shift();if(c=(i.ownerDocument||i).$$reactFormReplay,c!=null)for(h=0;h<c.length;h+=3){var b=c[h],_=c[h+1],k=b[$n]||null;if(typeof _=="function")k||Mx(c);else if(k){var A=null;if(_&&_.hasAttribute("formAction")){if(b=_,k=_[$n]||null)A=k.formAction;else if(Kp(b)!==null)continue}else A=k.action;typeof A=="function"?c[h+1]=A:(c.splice(h,3),h-=3),Mx(c)}}}function Dx(){function i(_){_.canIntercept&&_.info==="react-transition"&&_.intercept({handler:function(){return new Promise(function(k){return b=k})},focusReset:"manual",scroll:"manual"})}function o(){b!==null&&(b(),b=null),h||setTimeout(c,20)}function c(){if(!h&&!navigation.transition){var _=navigation.currentEntry;_&&_.url!=null&&navigation.navigate(_.url,{state:_.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var h=!1,b=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(c,100),function(){h=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),b!==null&&(b(),b=null)}}}function Qp(i){this._internalRoot=i}Ru.prototype.render=Qp.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(r(409));var c=o.current,h=or();Ex(c,h,i,o,null,null)},Ru.prototype.unmount=Qp.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;Ex(i.current,2,null,i,null,null),cu(),o[Yi]=null}};function Ru(i){this._internalRoot=i}Ru.prototype.unstable_scheduleHydration=function(i){if(i){var o=V0();i={blockedOn:null,target:i,priority:o};for(var c=0;c<Js.length&&o!==0&&o<Js[c].priority;c++);Js.splice(c,0,i),c===0&&Nx(i)}};var jx=e.version;if(jx!=="19.2.3")throw Error(r(527,jx,"19.2.3"));G.findDOMNode=function(i){var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(r(188)):(i=Object.keys(i).join(","),Error(r(268,i)));return i=d(o),i=i!==null?m(i):null,i=i===null?null:i.stateNode,i};var eO={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:B,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ou=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ou.isDisabled&&Ou.supportsFiber)try{vt=Ou.inject(eO),lt=Ou}catch{}}return ul.createRoot=function(i,o){if(!s(i))throw Error(r(299));var c=!1,h="",b=q_,_=F_,k=V_;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(h=o.identifierPrefix),o.onUncaughtError!==void 0&&(b=o.onUncaughtError),o.onCaughtError!==void 0&&(_=o.onCaughtError),o.onRecoverableError!==void 0&&(k=o.onRecoverableError)),o=Sx(i,1,!1,null,null,c,h,null,b,_,k,Dx),i[Yi]=o.current,Op(i),new Qp(o)},ul.hydrateRoot=function(i,o,c){if(!s(i))throw Error(r(299));var h=!1,b="",_=q_,k=F_,A=V_,$=null;return c!=null&&(c.unstable_strictMode===!0&&(h=!0),c.identifierPrefix!==void 0&&(b=c.identifierPrefix),c.onUncaughtError!==void 0&&(_=c.onUncaughtError),c.onCaughtError!==void 0&&(k=c.onCaughtError),c.onRecoverableError!==void 0&&(A=c.onRecoverableError),c.formState!==void 0&&($=c.formState)),o=Sx(i,1,!0,o,c??null,h,b,$,_,k,A,Dx),o.context=kx(null),c=o.current,h=or(),h=Bd(h),b=js(h),b.callback=null,Ls(c,b,h),c=h,o.current.lanes=c,Un(o,c),Vr(o),i[Yi]=o.current,Op(i),new Ru(o)},ul.version="19.2.3",ul}var Hx;function cO(){if(Hx)return Wp.exports;Hx=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Wp.exports=lO(),Wp.exports}var uO=cO(),ac=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},fO={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},dO=class{#e=fO;#t=!1;setTimeoutProvider(t){this.#e=t}setTimeout(t,e){return this.#e.setTimeout(t,e)}clearTimeout(t){this.#e.clearTimeout(t)}setInterval(t,e){return this.#e.setInterval(t,e)}clearInterval(t){this.#e.clearInterval(t)}},zi=new dO;function hO(t){setTimeout(t,0)}var no=typeof window>"u"||"Deno"in globalThis;function Cr(){}function pO(t,e){return typeof t=="function"?t(e):t}function Ym(t){return typeof t=="number"&&t>=0&&t!==1/0}function ak(t,e){return Math.max(t+(e||0)-Date.now(),0)}function si(t,e){return typeof t=="function"?t(e):t}function Tr(t,e){return typeof t=="function"?t(e):t}function Gx(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:a,queryKey:l,stale:u}=t;if(l){if(r){if(e.queryHash!==dy(l,e.options))return!1}else if(!Gl(e.queryKey,l))return!1}if(n!=="all"){const f=e.isActive();if(n==="active"&&!f||n==="inactive"&&f)return!1}return!(typeof u=="boolean"&&e.isStale()!==u||s&&s!==e.state.fetchStatus||a&&!a(e))}function Kx(t,e){const{exact:n,status:r,predicate:s,mutationKey:a}=t;if(a){if(!e.options.mutationKey)return!1;if(n){if(Cs(e.options.mutationKey)!==Cs(a))return!1}else if(!Gl(e.options.mutationKey,a))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function dy(t,e){return(e?.queryKeyHashFn||Cs)(t)}function Cs(t){return JSON.stringify(t,(e,n)=>Xm(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function Gl(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>Gl(t[n],e[n])):!1}var mO=Object.prototype.hasOwnProperty;function ok(t,e){if(t===e)return t;const n=Zx(t)&&Zx(e);if(!n&&!(Xm(t)&&Xm(e)))return e;const s=(n?t:Object.keys(t)).length,a=n?e:Object.keys(e),l=a.length,u=n?new Array(l):{};let f=0;for(let d=0;d<l;d++){const m=n?d:a[d],p=t[m],y=e[m];if(p===y){u[m]=p,(n?d<s:mO.call(t,m))&&f++;continue}if(p===null||y===null||typeof p!="object"||typeof y!="object"){u[m]=y;continue}const g=ok(p,y);u[m]=g,g===p&&f++}return s===l&&f===s?t:u}function Wm(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function Zx(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Xm(t){if(!Qx(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!Qx(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function Qx(t){return Object.prototype.toString.call(t)==="[object Object]"}function gO(t){return new Promise(e=>{zi.setTimeout(e,t)})}function eg(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?ok(t,e):e}function yO(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function bO(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var hy=Symbol();function lk(t,e){return!t.queryFn&&e?.initialPromise?()=>e.initialPromise:!t.queryFn||t.queryFn===hy?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function _O(t,e,n){let r=!1,s;return Object.defineProperty(t,"signal",{enumerable:!0,get:()=>(s??=e(),r||(r=!0,s.aborted?n():s.addEventListener("abort",n,{once:!0})),s)}),t}var vO=class extends ac{#e;#t;#n;constructor(){super(),this.#n=t=>{if(!no&&window.addEventListener){const e=()=>t();return window.addEventListener("visibilitychange",e,!1),()=>{window.removeEventListener("visibilitychange",e)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#n=t,this.#t?.(),this.#t=t(e=>{typeof e=="boolean"?this.setFocused(e):this.onFocus()})}setFocused(t){this.#e!==t&&(this.#e=t,this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(e=>{e(t)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},py=new vO;function tg(){let t,e;const n=new Promise((s,a)=>{t=s,e=a});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}var xO=hO;function wO(){let t=[],e=0,n=u=>{u()},r=u=>{u()},s=xO;const a=u=>{e?t.push(u):s(()=>{n(u)})},l=()=>{const u=t;t=[],u.length&&s(()=>{r(()=>{u.forEach(f=>{n(f)})})})};return{batch:u=>{let f;e++;try{f=u()}finally{e--,e||l()}return f},batchCalls:u=>(...f)=>{a(()=>{u(...f)})},schedule:a,setNotifyFunction:u=>{n=u},setBatchNotifyFunction:u=>{r=u},setScheduler:u=>{s=u}}}var Tn=wO(),SO=class extends ac{#e=!0;#t;#n;constructor(){super(),this.#n=t=>{if(!no&&window.addEventListener){const e=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",e,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",n)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#n=t,this.#t?.(),this.#t=t(this.setOnline.bind(this))}setOnline(t){this.#e!==t&&(this.#e=t,this.listeners.forEach(n=>{n(t)}))}isOnline(){return this.#e}},yf=new SO;function kO(t){return Math.min(1e3*2**t,3e4)}function ck(t){return(t??"online")==="online"?yf.isOnline():!0}var ng=class extends Error{constructor(t){super("CancelledError"),this.revert=t?.revert,this.silent=t?.silent}};function uk(t){let e=!1,n=0,r;const s=tg(),a=()=>s.status!=="pending",l=w=>{if(!a()){const E=new ng(w);y(E),t.onCancel?.(E)}},u=()=>{e=!0},f=()=>{e=!1},d=()=>py.isFocused()&&(t.networkMode==="always"||yf.isOnline())&&t.canRun(),m=()=>ck(t.networkMode)&&t.canRun(),p=w=>{a()||(r?.(),s.resolve(w))},y=w=>{a()||(r?.(),s.reject(w))},g=()=>new Promise(w=>{r=E=>{(a()||d())&&w(E)},t.onPause?.()}).then(()=>{r=void 0,a()||t.onContinue?.()}),v=()=>{if(a())return;let w;const E=n===0?t.initialPromise:void 0;try{w=E??t.fn()}catch(S){w=Promise.reject(S)}Promise.resolve(w).then(p).catch(S=>{if(a())return;const C=t.retry??(no?0:3),T=t.retryDelay??kO,M=typeof T=="function"?T(n,S):T,I=C===!0||typeof C=="number"&&n<C||typeof C=="function"&&C(n,S);if(e||!I){y(S);return}n++,t.onFail?.(n,S),gO(M).then(()=>d()?void 0:g()).then(()=>{e?y(S):v()})})};return{promise:s,status:()=>s.status,cancel:l,continue:()=>(r?.(),s),cancelRetry:u,continueRetry:f,canStart:m,start:()=>(m()?v():g().then(v),s)}}var fk=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Ym(this.gcTime)&&(this.#e=zi.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(no?1/0:300*1e3))}clearGcTimeout(){this.#e&&(zi.clearTimeout(this.#e),this.#e=void 0)}},EO=class extends fk{#e;#t;#n;#r;#s;#o;#i;constructor(t){super(),this.#i=!1,this.#o=t.defaultOptions,this.setOptions(t.options),this.observers=[],this.#r=t.client,this.#n=this.#r.getQueryCache(),this.queryKey=t.queryKey,this.queryHash=t.queryHash,this.#e=Yx(this.options),this.state=t.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#s?.promise}setOptions(t){if(this.options={...this.#o,...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const e=Yx(this.options);e.data!==void 0&&(this.setState(Jx(e.data,e.dataUpdatedAt)),this.#e=e)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#n.remove(this)}setData(t,e){const n=eg(this.state.data,t,this.options);return this.#a({data:n,type:"success",dataUpdatedAt:e?.updatedAt,manual:e?.manual}),n}setState(t,e){this.#a({type:"setState",state:t,setStateOptions:e})}cancel(t){const e=this.#s?.promise;return this.#s?.cancel(t),e?e.then(Cr).catch(Cr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(t=>Tr(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===hy||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>si(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!ak(this.state.dataUpdatedAt,t)}onFocus(){this.observers.find(e=>e.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#s?.continue()}onOnline(){this.observers.find(e=>e.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#s?.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(e=>e!==t),this.observers.length||(this.#s&&(this.#i?this.#s.cancel({revert:!0}):this.#s.cancelRetry()),this.scheduleGc()),this.#n.notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#a({type:"invalidate"})}async fetch(t,e){if(this.state.fetchStatus!=="idle"&&this.#s?.status()!=="rejected"){if(this.state.data!==void 0&&e?.cancelRefetch)this.cancel({silent:!0});else if(this.#s)return this.#s.continueRetry(),this.#s.promise}if(t&&this.setOptions(t),!this.options.queryFn){const u=this.observers.find(f=>f.options.queryFn);u&&this.setOptions(u.options)}const n=new AbortController,r=u=>{Object.defineProperty(u,"signal",{enumerable:!0,get:()=>(this.#i=!0,n.signal)})},s=()=>{const u=lk(this.options,e),d=(()=>{const m={client:this.#r,queryKey:this.queryKey,meta:this.meta};return r(m),m})();return this.#i=!1,this.options.persister?this.options.persister(u,d,this):u(d)},l=(()=>{const u={fetchOptions:e,options:this.options,queryKey:this.queryKey,client:this.#r,state:this.state,fetchFn:s};return r(u),u})();this.options.behavior?.onFetch(l,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==l.fetchOptions?.meta)&&this.#a({type:"fetch",meta:l.fetchOptions?.meta}),this.#s=uk({initialPromise:e?.initialPromise,fn:l.fetchFn,onCancel:u=>{u instanceof ng&&u.revert&&this.setState({...this.#t,fetchStatus:"idle"}),n.abort()},onFail:(u,f)=>{this.#a({type:"failed",failureCount:u,error:f})},onPause:()=>{this.#a({type:"pause"})},onContinue:()=>{this.#a({type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0});try{const u=await this.#s.start();if(u===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(u),this.#n.config.onSuccess?.(u,this),this.#n.config.onSettled?.(u,this.state.error,this),u}catch(u){if(u instanceof ng){if(u.silent)return this.#s.promise;if(u.revert){if(this.state.data===void 0)throw u;return this.state.data}}throw this.#a({type:"error",error:u}),this.#n.config.onError?.(u,this),this.#n.config.onSettled?.(this.state.data,u,this),u}finally{this.scheduleGc()}}#a(t){const e=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...dk(n.data,this.options),fetchMeta:t.meta??null};case"success":const r={...n,...Jx(t.data,t.dataUpdatedAt),dataUpdateCount:n.dataUpdateCount+1,...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=t.manual?r:void 0,r;case"error":const s=t.error;return{...n,error:s,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=e(this.state),Tn.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),this.#n.notify({query:this,type:"updated",action:t})})}};function dk(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:ck(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function Jx(t,e){return{data:t,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function Yx(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var CO=class extends ac{constructor(t,e){super(),this.options=e,this.#e=t,this.#a=null,this.#i=tg(),this.bindMethods(),this.setOptions(e)}#e;#t=void 0;#n=void 0;#r=void 0;#s;#o;#i;#a;#p;#m;#c;#u;#l;#f;#d=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),Wx(this.#t,this.options)?this.#h():this.updateResult(),this.#_())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return rg(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return rg(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#v(),this.#x(),this.#t.removeObserver(this)}setOptions(t){const e=this.options,n=this.#t;if(this.options=this.#e.defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Tr(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#w(),this.#t.setOptions(this.options),e._defaulted&&!Wm(this.options,e)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const r=this.hasListeners();r&&Xx(this.#t,n,this.options,e)&&this.#h(),this.updateResult(),r&&(this.#t!==n||Tr(this.options.enabled,this.#t)!==Tr(e.enabled,this.#t)||si(this.options.staleTime,this.#t)!==si(e.staleTime,this.#t))&&this.#g();const s=this.#y();r&&(this.#t!==n||Tr(this.options.enabled,this.#t)!==Tr(e.enabled,this.#t)||s!==this.#f)&&this.#b(s)}getOptimisticResult(t){const e=this.#e.getQueryCache().build(this.#e,t),n=this.createResult(e,t);return AO(this,n)&&(this.#r=n,this.#o=this.options,this.#s=this.#t.state),n}getCurrentResult(){return this.#r}trackResult(t,e){return new Proxy(t,{get:(n,r)=>(this.trackProp(r),e?.(r),r==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&this.#i.status==="pending"&&this.#i.reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(n,r))})}trackProp(t){this.#d.add(t)}getCurrentQuery(){return this.#t}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const e=this.#e.defaultQueryOptions(t),n=this.#e.getQueryCache().build(this.#e,e);return n.fetch().then(()=>this.createResult(n,e))}fetch(t){return this.#h({...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#r))}#h(t){this.#w();let e=this.#t.fetch(this.options,t);return t?.throwOnError||(e=e.catch(Cr)),e}#g(){this.#v();const t=si(this.options.staleTime,this.#t);if(no||this.#r.isStale||!Ym(t))return;const n=ak(this.#r.dataUpdatedAt,t)+1;this.#u=zi.setTimeout(()=>{this.#r.isStale||this.updateResult()},n)}#y(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#b(t){this.#x(),this.#f=t,!(no||Tr(this.options.enabled,this.#t)===!1||!Ym(this.#f)||this.#f===0)&&(this.#l=zi.setInterval(()=>{(this.options.refetchIntervalInBackground||py.isFocused())&&this.#h()},this.#f))}#_(){this.#g(),this.#b(this.#y())}#v(){this.#u&&(zi.clearTimeout(this.#u),this.#u=void 0)}#x(){this.#l&&(zi.clearInterval(this.#l),this.#l=void 0)}createResult(t,e){const n=this.#t,r=this.options,s=this.#r,a=this.#s,l=this.#o,f=t!==n?t.state:this.#n,{state:d}=t;let m={...d},p=!1,y;if(e._optimisticResults){const q=this.hasListeners(),K=!q&&Wx(t,e),j=q&&Xx(t,n,e,r);(K||j)&&(m={...m,...dk(d.data,t.options)}),e._optimisticResults==="isRestoring"&&(m.fetchStatus="idle")}let{error:g,errorUpdatedAt:v,status:w}=m;y=m.data;let E=!1;if(e.placeholderData!==void 0&&y===void 0&&w==="pending"){let q;s?.isPlaceholderData&&e.placeholderData===l?.placeholderData?(q=s.data,E=!0):q=typeof e.placeholderData=="function"?e.placeholderData(this.#c?.state.data,this.#c):e.placeholderData,q!==void 0&&(w="success",y=eg(s?.data,q,e),p=!0)}if(e.select&&y!==void 0&&!E)if(s&&y===a?.data&&e.select===this.#p)y=this.#m;else try{this.#p=e.select,y=e.select(y),y=eg(s?.data,y,e),this.#m=y,this.#a=null}catch(q){this.#a=q}this.#a&&(g=this.#a,y=this.#m,v=Date.now(),w="error");const S=m.fetchStatus==="fetching",C=w==="pending",T=w==="error",M=C&&S,I=y!==void 0,U={status:w,fetchStatus:m.fetchStatus,isPending:C,isSuccess:w==="success",isError:T,isInitialLoading:M,isLoading:M,data:y,dataUpdatedAt:m.dataUpdatedAt,error:g,errorUpdatedAt:v,failureCount:m.fetchFailureCount,failureReason:m.fetchFailureReason,errorUpdateCount:m.errorUpdateCount,isFetched:m.dataUpdateCount>0||m.errorUpdateCount>0,isFetchedAfterMount:m.dataUpdateCount>f.dataUpdateCount||m.errorUpdateCount>f.errorUpdateCount,isFetching:S,isRefetching:S&&!C,isLoadingError:T&&!I,isPaused:m.fetchStatus==="paused",isPlaceholderData:p,isRefetchError:T&&I,isStale:my(t,e),refetch:this.refetch,promise:this.#i,isEnabled:Tr(e.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const q=J=>{U.status==="error"?J.reject(U.error):U.data!==void 0&&J.resolve(U.data)},K=()=>{const J=this.#i=U.promise=tg();q(J)},j=this.#i;switch(j.status){case"pending":t.queryHash===n.queryHash&&q(j);break;case"fulfilled":(U.status==="error"||U.data!==j.value)&&K();break;case"rejected":(U.status!=="error"||U.error!==j.reason)&&K();break}}return U}updateResult(){const t=this.#r,e=this.createResult(this.#t,this.options);if(this.#s=this.#t.state,this.#o=this.options,this.#s.data!==void 0&&(this.#c=this.#t),Wm(e,t))return;this.#r=e;const n=()=>{if(!t)return!0;const{notifyOnChangeProps:r}=this.options,s=typeof r=="function"?r():r;if(s==="all"||!s&&!this.#d.size)return!0;const a=new Set(s??this.#d);return this.options.throwOnError&&a.add("error"),Object.keys(this.#r).some(l=>{const u=l;return this.#r[u]!==t[u]&&a.has(u)})};this.#S({listeners:n()})}#w(){const t=this.#e.getQueryCache().build(this.#e,this.options);if(t===this.#t)return;const e=this.#t;this.#t=t,this.#n=t.state,this.hasListeners()&&(e?.removeObserver(this),t.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#_()}#S(t){Tn.batch(()=>{t.listeners&&this.listeners.forEach(e=>{e(this.#r)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function TO(t,e){return Tr(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function Wx(t,e){return TO(t,e)||t.state.data!==void 0&&rg(t,e,e.refetchOnMount)}function rg(t,e,n){if(Tr(e.enabled,t)!==!1&&si(e.staleTime,t)!=="static"){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&my(t,e)}return!1}function Xx(t,e,n,r){return(t!==e||Tr(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&my(t,n)}function my(t,e){return Tr(e.enabled,t)!==!1&&t.isStaleByTime(si(e.staleTime,t))}function AO(t,e){return!Wm(t.getCurrentResult(),e)}function e1(t){return{onFetch:(e,n)=>{const r=e.options,s=e.fetchOptions?.meta?.fetchMore?.direction,a=e.state.data?.pages||[],l=e.state.data?.pageParams||[];let u={pages:[],pageParams:[]},f=0;const d=async()=>{let m=!1;const p=v=>{_O(v,()=>e.signal,()=>m=!0)},y=lk(e.options,e.fetchOptions),g=async(v,w,E)=>{if(m)return Promise.reject();if(w==null&&v.pages.length)return Promise.resolve(v);const C=(()=>{const R={client:e.client,queryKey:e.queryKey,pageParam:w,direction:E?"backward":"forward",meta:e.options.meta};return p(R),R})(),T=await y(C),{maxPages:M}=e.options,I=E?bO:yO;return{pages:I(v.pages,T,M),pageParams:I(v.pageParams,w,M)}};if(s&&a.length){const v=s==="backward",w=v?RO:t1,E={pages:a,pageParams:l},S=w(r,E);u=await g(E,S,v)}else{const v=t??a.length;do{const w=f===0?l[0]??r.initialPageParam:t1(r,u);if(f>0&&w==null)break;u=await g(u,w),f++}while(f<v)}return u};e.options.persister?e.fetchFn=()=>e.options.persister?.(d,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n):e.fetchFn=d}}}function t1(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function RO(t,{pages:e,pageParams:n}){return e.length>0?t.getPreviousPageParam?.(e[0],e,n[0],n):void 0}var OO=class extends fk{#e;#t;#n;#r;constructor(t){super(),this.#e=t.client,this.mutationId=t.mutationId,this.#n=t.mutationCache,this.#t=[],this.state=t.state||NO(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){this.#t.includes(t)||(this.#t.push(t),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){this.#t=this.#t.filter(e=>e!==t),this.scheduleGc(),this.#n.notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#n.remove(this))}continue(){return this.#r?.continue()??this.execute(this.state.variables)}async execute(t){const e=()=>{this.#s({type:"continue"})},n={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#r=uk({fn:()=>this.options.mutationFn?this.options.mutationFn(t,n):Promise.reject(new Error("No mutationFn found")),onFail:(a,l)=>{this.#s({type:"failed",failureCount:a,error:l})},onPause:()=>{this.#s({type:"pause"})},onContinue:e,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#n.canRun(this)});const r=this.state.status==="pending",s=!this.#r.canStart();try{if(r)e();else{this.#s({type:"pending",variables:t,isPaused:s}),await this.#n.config.onMutate?.(t,this,n);const l=await this.options.onMutate?.(t,n);l!==this.state.context&&this.#s({type:"pending",context:l,variables:t,isPaused:s})}const a=await this.#r.start();return await this.#n.config.onSuccess?.(a,t,this.state.context,this,n),await this.options.onSuccess?.(a,t,this.state.context,n),await this.#n.config.onSettled?.(a,null,this.state.variables,this.state.context,this,n),await this.options.onSettled?.(a,null,t,this.state.context,n),this.#s({type:"success",data:a}),a}catch(a){try{await this.#n.config.onError?.(a,t,this.state.context,this,n)}catch(l){Promise.reject(l)}try{await this.options.onError?.(a,t,this.state.context,n)}catch(l){Promise.reject(l)}try{await this.#n.config.onSettled?.(void 0,a,this.state.variables,this.state.context,this,n)}catch(l){Promise.reject(l)}try{await this.options.onSettled?.(void 0,a,t,this.state.context,n)}catch(l){Promise.reject(l)}throw this.#s({type:"error",error:a}),a}finally{this.#n.runNext(this)}}#s(t){const e=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=e(this.state),Tn.batch(()=>{this.#t.forEach(n=>{n.onMutationUpdate(t)}),this.#n.notify({mutation:this,type:"updated",action:t})})}};function NO(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var IO=class extends ac{constructor(t={}){super(),this.config=t,this.#e=new Set,this.#t=new Map,this.#n=0}#e;#t;#n;build(t,e,n){const r=new OO({client:t,mutationCache:this,mutationId:++this.#n,options:t.defaultMutationOptions(e),state:n});return this.add(r),r}add(t){this.#e.add(t);const e=Nu(t);if(typeof e=="string"){const n=this.#t.get(e);n?n.push(t):this.#t.set(e,[t])}this.notify({type:"added",mutation:t})}remove(t){if(this.#e.delete(t)){const e=Nu(t);if(typeof e=="string"){const n=this.#t.get(e);if(n)if(n.length>1){const r=n.indexOf(t);r!==-1&&n.splice(r,1)}else n[0]===t&&this.#t.delete(e)}}this.notify({type:"removed",mutation:t})}canRun(t){const e=Nu(t);if(typeof e=="string"){const r=this.#t.get(e)?.find(s=>s.state.status==="pending");return!r||r===t}else return!0}runNext(t){const e=Nu(t);return typeof e=="string"?this.#t.get(e)?.find(r=>r!==t&&r.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){Tn.batch(()=>{this.#e.forEach(t=>{this.notify({type:"removed",mutation:t})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(t){const e={exact:!0,...t};return this.getAll().find(n=>Kx(e,n))}findAll(t={}){return this.getAll().filter(e=>Kx(t,e))}notify(t){Tn.batch(()=>{this.listeners.forEach(e=>{e(t)})})}resumePausedMutations(){const t=this.getAll().filter(e=>e.state.isPaused);return Tn.batch(()=>Promise.all(t.map(e=>e.continue().catch(Cr))))}};function Nu(t){return t.options.scope?.id}var MO=class extends ac{constructor(t={}){super(),this.config=t,this.#e=new Map}#e;build(t,e,n){const r=e.queryKey,s=e.queryHash??dy(r,e);let a=this.get(s);return a||(a=new EO({client:t,queryKey:r,queryHash:s,options:t.defaultQueryOptions(e),state:n,defaultOptions:t.getQueryDefaults(r)}),this.add(a)),a}add(t){this.#e.has(t.queryHash)||(this.#e.set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const e=this.#e.get(t.queryHash);e&&(t.destroy(),e===t&&this.#e.delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Tn.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return this.#e.get(t)}getAll(){return[...this.#e.values()]}find(t){const e={exact:!0,...t};return this.getAll().find(n=>Gx(e,n))}findAll(t={}){const e=this.getAll();return Object.keys(t).length>0?e.filter(n=>Gx(t,n)):e}notify(t){Tn.batch(()=>{this.listeners.forEach(e=>{e(t)})})}onFocus(){Tn.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Tn.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},DO=class{#e;#t;#n;#r;#s;#o;#i;#a;constructor(t={}){this.#e=t.queryCache||new MO,this.#t=t.mutationCache||new IO,this.#n=t.defaultOptions||{},this.#r=new Map,this.#s=new Map,this.#o=0}mount(){this.#o++,this.#o===1&&(this.#i=py.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#a=yf.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#o--,this.#o===0&&(this.#i?.(),this.#i=void 0,this.#a?.(),this.#a=void 0)}isFetching(t){return this.#e.findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return this.#t.findAll({...t,status:"pending"}).length}getQueryData(t){const e=this.defaultQueryOptions({queryKey:t});return this.#e.get(e.queryHash)?.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=this.#e.build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(si(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return this.#e.findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),a=this.#e.get(r.queryHash)?.state.data,l=pO(e,a);if(l!==void 0)return this.#e.build(this,r).setData(l,{...n,manual:!0})}setQueriesData(t,e,n){return Tn.batch(()=>this.#e.findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){const e=this.defaultQueryOptions({queryKey:t});return this.#e.get(e.queryHash)?.state}removeQueries(t){const e=this.#e;Tn.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=this.#e;return Tn.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=Tn.batch(()=>this.#e.findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(Cr).catch(Cr)}invalidateQueries(t,e={}){return Tn.batch(()=>(this.#e.findAll(t).forEach(n=>{n.invalidate()}),t?.refetchType==="none"?Promise.resolve():this.refetchQueries({...t,type:t?.refetchType??t?.type??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=Tn.batch(()=>this.#e.findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let a=s.fetch(void 0,n);return n.throwOnError||(a=a.catch(Cr)),s.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(r).then(Cr)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=this.#e.build(this,e);return n.isStaleByTime(si(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Cr).catch(Cr)}fetchInfiniteQuery(t){return t.behavior=e1(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Cr).catch(Cr)}ensureInfiniteQueryData(t){return t.behavior=e1(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return yf.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#n}setDefaultOptions(t){this.#n=t}setQueryDefaults(t,e){this.#r.set(Cs(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...this.#r.values()],n={};return e.forEach(r=>{Gl(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){this.#s.set(Cs(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...this.#s.values()],n={};return e.forEach(r=>{Gl(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...this.#n.queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=dy(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===hy&&(e.enabled=!1),e}defaultMutationOptions(t){return t?._defaulted?t:{...this.#n.mutations,...t?.mutationKey&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},jO=Z.createContext(void 0),LO=({client:t,children:e})=>(Z.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),x.jsx(jO.Provider,{value:t,children:e})),nm={exports:{}},rm={};var n1;function zO(){if(n1)return rm;n1=1;var t=od().__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;return rm.c=function(e){return t.H.useMemoCache(e)},rm}var r1;function PO(){return r1||(r1=1,nm.exports=zO()),nm.exports}var Pe=PO();class oo{}class ro extends oo{constructor(e,n){super(),this.collection=e,this.alias=n,this.type="collectionRef"}}class Or extends oo{constructor(e,n){super(),this.query=e,this.alias=n,this.type="queryRef"}}class Pn extends oo{constructor(e){super(),this.path=e,this.type="ref"}}class Jn extends oo{constructor(e){super(),this.value=e,this.type="val"}}class Ir extends oo{constructor(e,n){super(),this.name=e,this.args=n,this.type="func"}}class hk extends oo{constructor(e,n){super(),this.name=e,this.args=n,this.type="agg"}}function gy(t){return t instanceof hk||t instanceof Ir||t instanceof Pn||t instanceof Jn}function yy(t){return typeof t=="object"&&"expression"in t?t.expression:t}function s1(t){return typeof t=="object"&&"expression"in t?t.expression:t}function i1(t){return typeof t=="object"&&"expression"in t&&t.residual===!0}function BO(t){return{expression:t,residual:!0}}function UO(t,e){if(t.from.alias===e)return t.from;for(const n of t.join||[])if(n.from.alias===e)return n.from}function Kl(t,e,n){if(e.path.length!==0){if(e.path.length===1){const r=e.path[0];if(t.select){const s=t.select[r];if(s&&s.type==="ref")return Kl(t,s,n)}return{collection:n,path:[r]}}if(e.path.length>1){const[r,...s]=e.path,a=UO(t,r);return a?a.type==="queryRef"?Kl(a.query,new Pn(s),n):{collection:a.collection,path:s}:void 0}}}class hr extends Error{constructor(e){super(e),this.name="TanStackDBError"}}class a1 extends hr{constructor(e,n,r){const s=`${e==="insert"?"Insert":"Update"} validation failed: ${n.map(a=>`
- ${a.message} - path: ${a.path}`).join("")}`;super(r||s),this.name="SchemaValidationError",this.type=e,this.issues=n}}class oc extends hr{constructor(e){super(e),this.name="CollectionConfigurationError"}}class $O extends oc{constructor(){super("Collection requires a config")}}class qO extends oc{constructor(){super("Collection requires a sync config")}}class FO extends oc{constructor(){super("Schema must implement the standard-schema interface")}}class o1 extends oc{constructor(){super("Schema validation must be synchronous")}}class lc extends hr{constructor(e){super(e),this.name="CollectionStateError"}}class VO extends lc{constructor(e,n){super(`Cannot perform ${e} on collection "${n}" - collection is in error state. Try calling cleanup() and restarting the collection.`)}}class HO extends lc{constructor(e,n,r){super(`Invalid collection status transition from "${e}" to "${n}" for collection "${r}"`)}}class GO extends lc{constructor(){super("Collection is in error state")}}class KO extends lc{constructor(){super("Active subscribers count is negative - this should never happen")}}class Wr extends hr{constructor(e){super(e),this.name="CollectionOperationError"}}class ZO extends Wr{constructor(e){super(`An object was created without a defined key: ${JSON.stringify(e)}`)}}class QO extends Wr{constructor(e,n){const r=e===null?"null":typeof e;super(`getKey returned an invalid key type. Expected string or number, but got ${r}: ${JSON.stringify(e)}. Item: ${JSON.stringify(n)}`)}}class JO extends Wr{constructor(e){super(`Cannot insert document with ID "${e}" because it already exists in the collection`)}}class YO extends Wr{constructor(e,n,r){const s=`Cannot insert document with key "${e}" from sync because it already exists in the collection "${n}"`;r?.hasCustomGetKey&&r.hasJoins?super(`${s}. This collection uses a custom getKey with joined queries. Joined queries can produce multiple rows with the same key when relationships are not 1:1. Consider: (1) using a composite key in your getKey function (e.g., \`\${item.key1}-\${item.key2}\`), (2) ensuring your join produces unique rows per key, or (3) removing the custom getKey to use the default composite key behavior.`):super(s)}}class WO extends Wr{constructor(){super("The first argument to update is missing")}}class XO extends Wr{constructor(){super("No keys were passed to update")}}class eN extends Wr{constructor(e){super(`The key "${e}" was passed to update but an object for this key was not found in the collection`)}}class tN extends Wr{constructor(e,n){super(`Updating the key of an item is not allowed. Original key: "${e}", Attempted new key: "${n}". Please delete the old item and create a new one if a key change is necessary.`)}}class nN extends Wr{constructor(){super("No keys were passed to delete")}}class rN extends Wr{constructor(e){super(`Collection.delete was called with key '${e}' but there is no item in the collection with this key`)}}class by extends hr{constructor(e){super(e),this.name="MissingHandlerError"}}class sN extends by{constructor(){super("Collection.insert called directly (not within an explicit transaction) but no 'onInsert' handler is configured.")}}class iN extends by{constructor(){super("Collection.update called directly (not within an explicit transaction) but no 'onUpdate' handler is configured.")}}class aN extends by{constructor(){super("Collection.delete called directly (not within an explicit transaction) but no 'onDelete' handler is configured.")}}class ai extends hr{constructor(e){super(e),this.name="TransactionError"}}class oN extends ai{constructor(){super("mutationFn is required when creating a transaction")}}class lN extends ai{constructor(){super("You can no longer call .mutate() as the transaction is no longer pending")}}class cN extends ai{constructor(){super("You can no longer call .rollback() as the transaction is already completed")}}class uN extends ai{constructor(){super("You can no longer call .commit() as the transaction is no longer pending")}}class l1 extends ai{constructor(){super("No pending sync transaction to write to")}}class c1 extends ai{constructor(){super("The pending sync transaction is already committed, you can't still write to it.")}}class fN extends ai{constructor(){super("No pending sync transaction to commit")}}class dN extends ai{constructor(){super("The pending sync transaction is already committed, you can't commit it again.")}}class lo extends hr{constructor(e){super(e),this.name="QueryBuilderError"}}class hN extends lo{constructor(e){super(`Only one source is allowed in the ${e}`)}}class pN extends lo{constructor(e){super(`A sub query passed to a ${e} must have a from clause itself`)}}class mN extends lo{constructor(e){super(`Invalid source for live query: The value provided for alias "${e}" is not a Collection or subquery. Live queries only accept Collection instances or subqueries. Please ensure you're passing a valid Collection or QueryBuilder, not a plain array or other data type.`)}}class Iu extends lo{constructor(e,n){super(`Invalid source for ${e}: Expected an object with a single key-value pair like { alias: collection }. For example: .from({ todos: todosCollection }). Got: ${n}`)}}class gN extends lo{constructor(){super("Join condition must be an equality expression")}}class yN extends lo{constructor(){super("Query must have a from clause")}}class pr extends hr{constructor(e){super(e),this.name="QueryCompilationError"}}class bN extends pr{constructor(){super("DISTINCT requires a SELECT clause.")}}class _N extends pr{constructor(){super("HAVING clause requires GROUP BY clause")}}class vN extends pr{constructor(){super("LIMIT and OFFSET require an ORDER BY clause to ensure deterministic results")}}class pk extends pr{constructor(e,n,r){const s=n?`alias "${e}" (collection "${n}")`:`collection "${e}"`,a=r?.length?`. Available keys: ${r.join(", ")}`:"";super(`Input for ${s} not found in inputs map${a}`)}}class xN extends pr{constructor(e,n){super(`Subquery uses alias "${e}" which is already used in the parent query. Each alias must be unique across parent and subquery contexts. Parent query aliases: ${n.join(", ")}. Please rename "${e}" in either the parent query or subquery to avoid conflicts.`)}}class wN extends pr{constructor(e){super(`Unsupported FROM type: ${e}`)}}class SN extends pr{constructor(e){super(`Unknown expression type: ${e}`)}}class kN extends pr{constructor(){super("Reference path cannot be empty")}}class EN extends pr{constructor(e){super(`Unknown function: ${e}`)}}class u1 extends pr{constructor(e){super(`Collection "${e}" not found during compilation of join`)}}class Gi extends hr{constructor(e){super(e),this.name="JoinError"}}class CN extends Gi{constructor(e){super(`Unsupported join type: ${e}`)}}class TN extends Gi{constructor(e){super(`Invalid join condition: both expressions refer to the same source "${e}"`)}}class AN extends Gi{constructor(){super("Invalid join condition: expressions must reference source aliases")}}class RN extends Gi{constructor(e){super(`Invalid join condition: left expression refers to an unavailable source "${e}"`)}}class ON extends Gi{constructor(e){super(`Invalid join condition: right expression does not refer to the joined source "${e}"`)}}class NN extends Gi{constructor(){super("Invalid join condition")}}class IN extends Gi{constructor(e){super(`Unsupported join source type: ${e}`)}}class ld extends hr{constructor(e){super(e),this.name="GroupByError"}}class MN extends ld{constructor(e){super(`Non-aggregate expression '${e}' in SELECT must also appear in GROUP BY clause`)}}class DN extends ld{constructor(e){super(`Unsupported aggregate function: ${e}`)}}class jN extends ld{constructor(e){super(`Aggregate function in HAVING clause must also be in SELECT clause: ${e}`)}}class LN extends ld{constructor(e){super(`Unknown expression type in HAVING clause: ${e}`)}}class f1 extends hr{constructor(e,n){const r=n instanceof Error?n.message:String(n);super(`Collection "${e}" sync cleanup function threw an error: ${r}`),this.name="SyncCleanupError"}}class zN extends hr{constructor(e){super(e),this.name="QueryOptimizerError"}}class PN extends zN{constructor(){super("Cannot combine empty expression list")}}class BN extends pr{constructor(e,n,r,s){super(`Internal error: subscription for alias '${e}' (remapped from '${n}', collection '${r}') is missing in join pipeline. Available aliases: ${s.join(", ")}. This indicates a bug in alias tracking.`)}}class UN extends pr{constructor(e){super(`Internal error: compiler returned aliases without inputs: ${e.join(", ")}. This indicates a bug in query compilation. Please report this issue.`)}}class $N extends pr{constructor(){super("setWindow() can only be called on collections with an ORDER BY clause. Add .orderBy() to your query to enable window movement.")}}const sm=new WeakMap;let qN=1;function d1(t){if(sm.has(t))return sm.get(t);const e=qN++;return sm.set(t,e),e}const _y=(t,e,n)=>{const{nulls:r}=n;if(t==null&&e==null)return 0;if(t==null)return r==="first"?-1:1;if(e==null)return r==="first"?1:-1;if(typeof t=="string"&&typeof e=="string"&&n.stringSort==="locale")return t.localeCompare(e,n.locale,n.localeOptions);if(Array.isArray(t)&&Array.isArray(e)){for(let l=0;l<Math.min(t.length,e.length);l++){const u=_y(t[l],e[l],n);if(u!==0)return u}return t.length-e.length}if(t instanceof Date&&e instanceof Date)return t.getTime()-e.getTime();const s=typeof t=="object",a=typeof e=="object";if(s||a){if(s&&a){const l=d1(t),u=d1(e);return l-u}if(s)return 1;if(a)return-1}return t<e?-1:t>e?1:0},FN=(t,e,n)=>_y(e,t,{...n,nulls:n.nulls==="first"?"last":"first"});function bf(t){return(e,n)=>t.direction==="asc"?_y(e,n,t):FN(e,n,t)}const sg=bf({direction:"asc",nulls:"first",stringSort:"locale"});function VN(t,e){if(t.byteLength!==e.byteLength)return!1;for(let n=0;n<t.byteLength;n++)if(t[n]!==e[n])return!1;return!0}const HN=128;function ks(t){return t instanceof Date?t.getTime():(typeof Buffer<"u"&&t instanceof Buffer||t instanceof Uint8Array)&&t.byteLength<=HN?`__u8__${Array.from(t).join(",")}`:t}function GN(t,e){if(t===e)return!0;const n=typeof Buffer<"u"&&t instanceof Buffer||t instanceof Uint8Array,r=typeof Buffer<"u"&&e instanceof Buffer||e instanceof Uint8Array;return n&&r?VN(t,e):!1}function on(t){return t==null}function Ya(t){return t===!0}function Yn(t,e=!1){return xy(t,e)}function vy(t){return xy(t,!0)}function xy(t,e){switch(t.type){case"val":{const n=t.value;return()=>n}case"ref":return e?ZN(t):KN(t);case"func":return QN(t,e);default:throw new SN(t.type)}}function KN(t){const[e,...n]=t.path;if(!e)throw new kN;if(n.length===0)return r=>r[e];if(n.length===1){const r=n[0];return s=>s[e]?.[r]}else return r=>{const s=r[e];if(s===void 0)return;let a=s;for(const l of n){if(a==null)return a;a=a[l]}return a}}function ZN(t){const e=t.path;return n=>{let r=n;for(const s of e){if(r==null)return r;r=r[s]}return r}}function QN(t,e){const n=t.args.map(r=>xy(r,e));switch(t.name){case"eq":{const r=n[0],s=n[1];return a=>{const l=ks(r(a)),u=ks(s(a));return on(l)||on(u)?null:GN(l,u)}}case"gt":{const r=n[0],s=n[1];return a=>{const l=r(a),u=s(a);return on(l)||on(u)?null:l>u}}case"gte":{const r=n[0],s=n[1];return a=>{const l=r(a),u=s(a);return on(l)||on(u)?null:l>=u}}case"lt":{const r=n[0],s=n[1];return a=>{const l=r(a),u=s(a);return on(l)||on(u)?null:l<u}}case"lte":{const r=n[0],s=n[1];return a=>{const l=r(a),u=s(a);return on(l)||on(u)?null:l<=u}}case"and":return r=>{let s=!1;for(const a of n){const l=a(r);if(l===!1)return!1;on(l)&&(s=!0)}return s?null:!0};case"or":return r=>{let s=!1;for(const a of n){const l=a(r);if(l===!0)return!0;on(l)&&(s=!0)}return s?null:!1};case"not":{const r=n[0];return s=>{const a=r(s);return on(a)?null:!a}}case"in":{const r=n[0],s=n[1];return a=>{const l=r(a),u=s(a);return on(l)?null:Array.isArray(u)?u.includes(l):!1}}case"like":{const r=n[0],s=n[1];return a=>{const l=r(a),u=s(a);return on(l)||on(u)?null:h1(l,u,!1)}}case"ilike":{const r=n[0],s=n[1];return a=>{const l=r(a),u=s(a);return on(l)||on(u)?null:h1(l,u,!0)}}case"upper":{const r=n[0];return s=>{const a=r(s);return typeof a=="string"?a.toUpperCase():a}}case"lower":{const r=n[0];return s=>{const a=r(s);return typeof a=="string"?a.toLowerCase():a}}case"length":{const r=n[0];return s=>{const a=r(s);return typeof a=="string"||Array.isArray(a)?a.length:0}}case"concat":return r=>n.map(s=>{const a=s(r);try{return String(a??"")}catch{try{return JSON.stringify(a)||""}catch{return"[object]"}}}).join("");case"coalesce":return r=>{for(const s of n){const a=s(r);if(a!=null)return a}return null};case"add":{const r=n[0],s=n[1];return a=>{const l=r(a),u=s(a);return(l??0)+(u??0)}}case"subtract":{const r=n[0],s=n[1];return a=>{const l=r(a),u=s(a);return(l??0)-(u??0)}}case"multiply":{const r=n[0],s=n[1];return a=>{const l=r(a),u=s(a);return(l??0)*(u??0)}}case"divide":{const r=n[0],s=n[1];return a=>{const l=r(a),f=s(a)??0;return f!==0?(l??0)/f:null}}case"isUndefined":{const r=n[0];return s=>r(s)===void 0}case"isNull":{const r=n[0];return s=>r(s)===null}default:throw new EN(t.name)}}function h1(t,e,n){if(typeof t!="string"||typeof e!="string")return!1;const r=n?t.toLowerCase():t;let a=(n?e.toLowerCase():e).replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return a=a.replace(/%/g,".*"),a=a.replace(/_/g,"."),new RegExp(`^${a}$`).test(r)}function Pr(t,e){return Xu(t,e,new Map)}function Xu(t,e,n){if(t===e)return!0;if(t==null||e==null||typeof t!=typeof e)return!1;if(t instanceof Date)return e instanceof Date?t.getTime()===e.getTime():!1;if(t instanceof RegExp)return e instanceof RegExp?t.source===e.source&&t.flags===e.flags:!1;if(t instanceof Map){if(!(e instanceof Map)||t.size!==e.size)return!1;if(n.has(t))return n.get(t)===e;n.set(t,e);const s=Array.from(t.entries()).every(([a,l])=>e.has(a)&&Xu(l,e.get(a),n));return n.delete(t),s}if(t instanceof Set){if(!(e instanceof Set)||t.size!==e.size)return!1;if(n.has(t))return n.get(t)===e;n.set(t,e);const r=Array.from(t),s=Array.from(e);if(r.every(l=>typeof l!="object"))return n.delete(t),r.every(l=>e.has(l));const a=r.length===s.length;return n.delete(t),a}if(ArrayBuffer.isView(t)&&ArrayBuffer.isView(e)&&!(t instanceof DataView)&&!(e instanceof DataView)){const r=t,s=e;if(r.length!==s.length)return!1;for(let a=0;a<r.length;a++)if(r[a]!==s[a])return!1;return!0}if(_f(t)&&_f(e)){const r=ig(t),s=ig(e);return r!==s?!1:typeof t.equals=="function"?t.equals(e):t.toString()===e.toString()}if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;if(n.has(t))return n.get(t)===e;n.set(t,e);const r=t.every((s,a)=>Xu(s,e[a],n));return n.delete(t),r}if(typeof t=="object"){if(n.has(t))return n.get(t)===e;n.set(t,e);const r=Object.keys(t),s=Object.keys(e);if(r.length!==s.length)return n.delete(t),!1;const a=r.every(l=>l in e&&Xu(t[l],e[l],n));return n.delete(t),a}return!1}const JN=["Temporal.Duration","Temporal.Instant","Temporal.PlainDate","Temporal.PlainDateTime","Temporal.PlainMonthDay","Temporal.PlainTime","Temporal.PlainYearMonth","Temporal.ZonedDateTime"];function ig(t){return t[Symbol.toStringTag]}function _f(t){const e=ig(t);return typeof e=="string"&&JN.includes(e)}const wy={direction:"asc",nulls:"first",stringSort:"locale"};class YN{constructor(e){this.originalIndex=e}lookup(e,n){const r=e==="gt"?"lt":e==="gte"?"lte":e==="lt"?"gt":e==="lte"?"gte":e;return this.originalIndex.lookup(r,n)}rangeQuery(e={}){return this.originalIndex.rangeQueryReversed(e)}rangeQueryReversed(e={}){return this.originalIndex.rangeQuery(e)}take(e,n,r){return this.originalIndex.takeReversed(e,n,r)}takeReversed(e,n,r){return this.originalIndex.take(e,n,r)}get orderedEntriesArray(){return this.originalIndex.orderedEntriesArrayReversed}get orderedEntriesArrayReversed(){return this.originalIndex.orderedEntriesArray}supports(e){return this.originalIndex.supports(e)}matchesField(e){return this.originalIndex.matchesField(e)}matchesCompareOptions(e){return this.originalIndex.matchesCompareOptions(e)}matchesDirection(e){return this.originalIndex.matchesDirection(e)}getStats(){return this.originalIndex.getStats()}add(e,n){this.originalIndex.add(e,n)}remove(e,n){this.originalIndex.remove(e,n)}update(e,n,r){this.originalIndex.update(e,n,r)}build(e){this.originalIndex.build(e)}clear(){this.originalIndex.clear()}get keyCount(){return this.originalIndex.keyCount}equalityLookup(e){return this.originalIndex.equalityLookup(e)}inArrayLookup(e){return this.originalIndex.inArrayLookup(e)}get indexedKeysSet(){return this.originalIndex.indexedKeysSet}get valueMapData(){return this.originalIndex.valueMapData}}function cc(t,e,n){const r=n??{...wy,...t.compareOptions};for(const s of t.indexes.values())if(s.matchesField(e)&&s.matchesCompareOptions(r))return s.matchesDirection(r.direction)?s:new YN(s)}function WN(t){if(t.length===0)return new Set;if(t.length===1)return new Set(t[0]);let e=new Set(t[0]);for(let n=1;n<t.length;n++){const r=new Set;for(const s of e)t[n].has(s)&&r.add(s);e=r}return e}function XN(t){const e=new Set;for(const n of t)for(const r of n)e.add(r);return e}function eI(t,e){return Sy(t,e)}function Sy(t,e){if(t.type==="func")switch(t.name){case"eq":case"gt":case"gte":case"lt":case"lte":return nI(t,e);case"and":return rI(t,e);case"or":return sI(t,e);case"in":return iI(t,e)}return{canOptimize:!1,matchingKeys:new Set}}function tI(t,e){if(t.type!=="func"||t.args.length<2)return{canOptimize:!1,matchingKeys:new Set};const n=new Map;for(const r of t.args)if(r.type==="func"&&["gt","gte","lt","lte"].includes(r.name)){const s=r;if(s.args.length===2){const a=s.args[0],l=s.args[1];let u=null,f=null,d=s.name;if(a.type==="ref"&&l.type==="val")u=a,f=l;else if(a.type==="val"&&l.type==="ref")switch(u=l,f=a,d){case"gt":d="lt";break;case"gte":d="lte";break;case"lt":d="gt";break;case"lte":d="gte";break}if(u&&f){const p=u.path.join("."),y=f.value;n.has(p)||n.set(p,[]),n.get(p).push({operation:d,value:y})}}}for(const[r,s]of n)if(s.length>=2){const a=r.split("."),l=cc(e,a);if(l&&l.supports("gt")&&l.supports("lt")){let u,f,d=!0,m=!0;for(const{operation:y,value:g}of s)switch(y){case"gt":(u===void 0||g>u)&&(u=g,d=!1);break;case"gte":(u===void 0||g>u)&&(u=g,d=!0);break;case"lt":(f===void 0||g<f)&&(f=g,m=!1);break;case"lte":(f===void 0||g<f)&&(f=g,m=!0);break}return{canOptimize:!0,matchingKeys:l.rangeQuery({from:u,to:f,fromInclusive:d,toInclusive:m})}}}return{canOptimize:!1,matchingKeys:new Set}}function nI(t,e){if(t.type!=="func"||t.args.length!==2)return{canOptimize:!1,matchingKeys:new Set};const n=t.args[0],r=t.args[1];let s=null,a=null,l=t.name;if(n.type==="ref"&&r.type==="val")s=n,a=r;else if(n.type==="val"&&r.type==="ref")switch(s=r,a=n,l){case"gt":l="lt";break;case"gte":l="lte";break;case"lt":l="gt";break;case"lte":l="gte";break}if(s&&a){const u=s.path,f=cc(e,u);if(f){const d=a.value,m=l;return f.supports(m)?{canOptimize:!0,matchingKeys:f.lookup(m,d)}:{canOptimize:!1,matchingKeys:new Set}}}return{canOptimize:!1,matchingKeys:new Set}}function rI(t,e){if(t.type!=="func"||t.args.length<2)return{canOptimize:!1,matchingKeys:new Set};const n=tI(t,e);if(n.canOptimize)return n;const r=[];for(const s of t.args){const a=Sy(s,e);a.canOptimize&&r.push(a)}if(r.length>0){const s=r.map(l=>l.matchingKeys);return{canOptimize:!0,matchingKeys:WN(s)}}return{canOptimize:!1,matchingKeys:new Set}}function sI(t,e){if(t.type!=="func"||t.args.length<2)return{canOptimize:!1,matchingKeys:new Set};const n=[];for(const r of t.args){const s=Sy(r,e);s.canOptimize&&n.push(s)}if(n.length>0){const r=n.map(a=>a.matchingKeys);return{canOptimize:!0,matchingKeys:XN(r)}}return{canOptimize:!1,matchingKeys:new Set}}function iI(t,e){if(t.type!=="func"||t.args.length!==2)return{canOptimize:!1,matchingKeys:new Set};const n=t.args[0],r=t.args[1];if(n.type==="ref"&&r.type==="val"&&Array.isArray(r.value)){const s=n.path,a=r.value,l=cc(e,s);if(l){if(l.supports("in"))return{canOptimize:!0,matchingKeys:l.lookup("in",a)};if(l.supports("eq")){const u=new Set;for(const f of a){const d=l.lookup("eq",f);for(const m of d)u.add(m)}return{canOptimize:!0,matchingKeys:u}}}}return{canOptimize:!1,matchingKeys:new Set}}class aI extends Map{constructor(e,n){super(n),this.defaultValue=e}get(e){return this.has(e)?super.get(e):this.defaultValue()}update(e,n){const r=this.get(e),s=n(r);return this.set(e,s),s}}const im=3e4;function am(t,e){if(e.length<=im)t.push(...e);else for(let n=0;n<e.length;n+=im){const r=e.slice(n,n+im);t.push(...r)}}function oI(t,e,n){let r=0,s=t.length;for(;r<s;){const a=Math.floor((r+s)/2),l=n(t[a],e);if(l<0)r=a+1;else if(l>0)s=a;else return a}return r}class lI{constructor(){this.objectIds=new WeakMap,this.nextId=0}getId(e){if(typeof e!="object"||e===null){const n=String(e);let r=0;for(let s=0;s<n.length;s++){const a=n.charCodeAt(s);r=(r<<5)-r+a,r=r&r}return r}return this.objectIds.has(e)||this.objectIds.set(e,this.nextId++),this.objectIds.get(e)}getStringId(e){return e===null?"null":e===void 0?"undefined":typeof e!="object"?`str_${String(e)}`:`obj_${this.getId(e)}`}}const om=new lI;function cI(t,e){const[n,r]=t,[s,a]=e,l=[...Mu(n,Math.min(r,s)),...Mu(Math.max(n,a),r)],u=[...Mu(s,Math.min(a,n)),...Mu(Math.max(s,r),a)];return{onlyInA:l,onlyInB:u}}function Mu(t,e){const n=[];for(let r=t;r<e;r++)n.push(r);return n}function vf(t,e){return typeof t==typeof e?t<e?-1:t>e?1:0:typeof t=="string"?-1:1}const uI=wn(),fI=wn(),dI=wn(),hI=wn(),pI=wn();function wn(){return Math.random()*(2**31-1)>>>0}const mk=new ArrayBuffer(8),mI=new DataView(mk),Ws=new Uint8Array(mk);class cd{constructor(){this.hash=uI,this.length=0,this.carry=0,this.carryBytes=0}_mix(e){e=Math.imul(e,3432918353),e=e<<15|e>>>17,e=Math.imul(e,461845907),this.hash^=e,this.hash=this.hash<<13|this.hash>>>19,this.hash=Math.imul(this.hash,5)+3864292196}writeByte(e){this.carry|=(e&255)<<8*this.carryBytes,this.carryBytes++,this.length++,this.carryBytes===4&&(this._mix(this.carry>>>0),this.carry=0,this.carryBytes=0)}update(e){switch(typeof e){case"symbol":{this.update(pI);const n=e.description;if(!n)return;for(let r=0;r<n.length;r++){const s=n.charCodeAt(r);this.writeByte(s&255),this.writeByte(s>>>8&255)}return}case"string":this.update(fI);for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);this.writeByte(r&255),this.writeByte(r>>>8&255)}return;case"number":mI.setFloat64(0,e,!0),this.writeByte(Ws[0]),this.writeByte(Ws[1]),this.writeByte(Ws[2]),this.writeByte(Ws[3]),this.writeByte(Ws[4]),this.writeByte(Ws[5]),this.writeByte(Ws[6]),this.writeByte(Ws[7]);return;case"bigint":{let n=e;for(n<0n?(n=-n,this.update(hI)):this.update(dI);n>0n;)this.writeByte(Number(n&0xffn)),n>>=8n;e===0n&&this.writeByte(0);return}default:throw new TypeError(`Unsupported input type: ${typeof e}`)}}digest(){if(this.carryBytes>0){let e=this.carry>>>0;e=Math.imul(e,3432918353),e=e<<15|e>>>17,e=Math.imul(e,461845907),this.hash^=e}return this.hash^=this.length,this.hash^=this.hash>>>16,this.hash=Math.imul(this.hash,2246822507),this.hash^=this.hash>>>13,this.hash=Math.imul(this.hash,3266489909),this.hash^=this.hash>>>16,this.hash>>>0}}const gI=wn(),yI=wn(),bI=wn(),_I=wn(),vI=wn(),xI=wn(),wI=wn(),SI=wn(),kI=wn(),EI=wn(),CI=wn(),TI=wn(),AI=128,Zl=new WeakMap;function jn(t){const e=new cd;return gk(e,t),e.digest()}function RI(t){const e=Zl.get(t);if(e!==void 0)return e;let n;if(t instanceof Date)n=OI(t);else if(typeof Buffer<"u"&&t instanceof Buffer||t instanceof Uint8Array)if(t.byteLength<=AI)n=NI(t);else return ag(t);else{if(t instanceof File)return ag(t);{let r=t,s=SI;t instanceof Array&&(s=kI),t instanceof Map&&(s=EI,r=[...t.entries()]),t instanceof Set&&(s=CI,r=[...t.entries()]),n=II(r,s)}}return Zl.set(t,n),n}function OI(t){const e=new cd;return e.update(wI),e.update(t.getTime()),e.digest()}function NI(t){const e=new cd;e.update(TI),e.update(t.byteLength);for(let n=0;n<t.byteLength;n++)e.writeByte(t[n]);return e.digest()}function II(t,e){const n=new cd;n.update(e);const r=Object.keys(t);r.sort(DI);for(const s of r)n.update(vI),n.update(s),gk(n,t[s]);return n.digest()}function gk(t,e){if(e===null){t.update(bI);return}switch(typeof e){case"undefined":t.update(_I);return;case"boolean":t.update(e?gI:yI);return;case"number":t.update(isNaN(e)?NaN:e===0?0:e);return;case"bigint":case"string":case"symbol":t.update(e);return;case"object":t.update(MI(e));return;case"function":t.update(ag(e));return;default:console.warn(`Ignored input during hashing because it is of type ${typeof e} which is not supported`)}}function MI(t){let e=Zl.get(t);return e===void 0&&(e=RI(t)),e}let p1=1;function ag(t){let e=Zl.get(t);return e===void 0&&(e=p1^xI,p1++,Zl.set(t,e)),e}function DI(t,e){return t.localeCompare(e)}class Yt{#e;constructor(e=[]){this.#e=e}toString(e=!1){return`MultiSet(${JSON.stringify(this.#e,null,e?2:void 0)})`}toJSON(){return JSON.stringify(Array.from(this.getInner()))}static fromJSON(e){return new Yt(JSON.parse(e))}map(e){return new Yt(this.#e.map(([n,r])=>[e(n),r]))}filter(e){return new Yt(this.#e.filter(([n,r])=>e(n)))}negate(){return new Yt(this.#e.map(([e,n])=>[e,-n]))}concat(e){const n=[];return am(n,this.#e),am(n,e.getInner()),new Yt(n)}consolidate(){if(this.#e.length>0){const e=this.#e[0]?.[0];if(Array.isArray(e)&&e.length===2)return this.#t()}return this.#n()}#t(){const e=new Map,n=new Map,r=a=>{if(a.length!==2)throw new Error("Expected tuple of length 2");const[l,u]=a;return`${om.getStringId(l)}|${om.getStringId(u)}`};for(const[a,l]of this.#e){if(!Array.isArray(a)||a.length!==2)return this.#n();const[u,f]=a;if(typeof u!="string"&&typeof u!="number")return this.#n();let d;Array.isArray(f)&&f.length===2?d=r(f):d=om.getStringId(f);const m=u+"|"+d;e.set(m,(e.get(m)||0)+l),n.has(m)||n.set(m,a)}const s=[];for(const[a,l]of e)l!==0&&s.push([n.get(a),l]);return new Yt(s)}#n(){const e=new aI(()=>0),n=new Map;let r=!1,s=!1,a=!1;for(const[f,d]of this.#e)if(typeof f=="string")r=!0;else if(typeof f=="number")s=!0;else{a=!0;break}const l=a||r&&s;for(const[f,d]of this.#e){const m=l?jn(f):f;l&&!n.has(m)&&n.set(m,f),e.update(m,p=>p+d)}const u=[];for(const[f,d]of e.entries())if(d!==0){const m=l?n.get(f):f;u.push([m,d])}return new Yt(u)}extend(e){const n=e instanceof Yt?e.getInner():e;am(this.#e,n)}add(e,n){n!==0&&this.#e.push([e,n])}getInner(){return this.#e}}class jI{#e;constructor(e){this.#e=e}drain(){const e=[...this.#e].reverse();return this.#e.length=0,e}isEmpty(){return this.#e.length===0}}class Xr{#e=[];sendData(e){e instanceof Yt||(e=new Yt(e));for(const n of this.#e)n.unshift(e)}newReader(){const e=[];return this.#e.push(e),new jI(e)}}class yk{constructor(e,n,r){this.id=e,this.inputs=n,this.output=r}hasPendingWork(){return this.inputs.some(e=>!e.isEmpty())}}class co extends yk{constructor(e,n,r){super(e,[n],r),this.id=e}inputMessages(){return this.inputs[0].drain()}}class LI extends yk{constructor(e,n,r,s){super(e,[n,r],s),this.id=e}inputAMessages(){return this.inputs[0].drain()}inputBMessages(){return this.inputs[1].drain()}}class ky extends co{run(){for(const e of this.inputMessages())this.output.sendData(this.inner(e))}}class zI{#e=[];#t=0;#n=!1;constructor(){}#r(){if(this.#n)throw new Error("Graph already finalized")}getNextOperatorId(){return this.#r(),this.#t++}newInput(){this.#r();const e=new Xr;return new PI(this,e)}addOperator(e){this.#r(),this.#e.push(e)}finalize(){this.#r(),this.#n=!0}step(){if(!this.#n)throw new Error("Graph not finalized");for(const e of this.#e)e.run()}pendingWork(){return this.#e.some(e=>e.hasPendingWork())}run(){for(;this.pendingWork();)this.step()}}class es{#e;#t;constructor(e,n){this.#e=e,this.#t=n}connectReader(){return this.#t.newReader()}get writer(){return this.#t}get graph(){return this.#e}pipe(...e){return e.reduce((n,r)=>r(n),this)}}class PI extends es{sendData(e){this.writer.sendData(e)}}class BI extends ky{#e;constructor(e,n,r,s){super(e,n,r),this.#e=s}inner(e){return e.map(this.#e)}}function Ln(t){return e=>{const n=new es(e.graph,new Xr),r=new BI(e.graph.getNextOperatorId(),e.connectReader(),n.writer,t);return e.graph.addOperator(r),n}}const bl=Symbol("NO_PREFIX");class m1 extends Map{addValue(e,n){if(n===0)return this.size===0;const r=Ml(e),s=this.get(r);if(ef(s)){const[a,l]=s;if(Ml(a)!==r)throw new Error("Mismatching prefixes, this should never happen");if(a===e||jn(a)===jn(e)){const f=l+n;f===0?this.delete(r):this.set(r,[e,f])}else{const f=new _l;f.set(jn(a),s),f.set(jn(e),[e,n]),this.set(r,f)}}else s===void 0?this.set(r,[e,n]):s.addValue(e,n)&&this.delete(r);return this.size===0}}class _l extends Map{addValue(e,n){if(n===0)return this.size===0;const r=jn(e),s=this.get(r);if(s){const[,a]=s,l=a+n;l===0?this.delete(r):this.set(r,[e,l])}else this.set(r,[e,n]);return this.size===0}}class ni{#e;#t=new Map;constructor(){this.#e=new Map}static fromMultiSets(e){const n=new ni;for(const r of e)for(const[s,a]of r.getInner()){const[l,u]=s;n.addValue(l,[u,a])}return n}toString(e=!1){return`Index(${JSON.stringify([...this.entries()],void 0,e?2:void 0)})`}get size(){return this.#e.size}has(e){return this.#e.has(e)}hasPresence(e){return(this.#t.get(e)||0)!==0}getConsolidatedMultiplicity(e){return this.#t.get(e)||0}getPresenceKeys(){return this.#t.keys()}get(e){return[...this.getIterator(e)]}*getIterator(e){const n=this.#e.get(e);if(ef(n))yield n;else{if(n===void 0)return;if(n instanceof _l)for(const r of n.values())yield r;else for(const r of n.values())if(ef(r))yield r;else for(const s of r.values())yield s}}*entries(){for(const e of this.#e.keys())for(const n of this.getIterator(e))yield[e,n]}*entriesIterators(){for(const e of this.#e.keys())yield[e,this.getIterator(e)]}addValue(e,n){const[r,s]=n;if(s===0)return;const a=(this.#t.get(e)||0)+s;a===0?this.#t.delete(e):this.#t.set(e,a);const l=this.#e.get(e);if(l===void 0){this.#e.set(e,n);return}if(ef(l)){this.#n(e,l,r,s);return}if(l instanceof _l){const u=Ml(r);if(u!==bl){const f=new m1;f.set(bl,l),f.set(u,n),this.#e.set(e,f)}else l.addValue(r,s)&&this.#e.delete(e)}else l.addValue(r,s)&&this.#e.delete(e)}#n(e,n,r,s){const[a,l]=n;if(a===r){const d=l+s;d===0?this.#e.delete(e):this.#e.set(e,[r,d]);return}const u=Ml(r),f=Ml(a);if(f===u&&(a===r||jn(a)===jn(r))){const d=l+s;d===0?this.#e.delete(e):this.#e.set(e,[r,d]);return}if(f===bl&&u===bl){const d=new _l;d.set(jn(a),n),d.set(jn(r),[r,s]),this.#e.set(e,d)}else{const d=new m1;if(f===u){const m=new _l;m.set(jn(a),n),m.set(jn(r),[r,s]),d.set(f,m)}else d.set(f,n),d.set(u,[r,s]);this.#e.set(e,d)}}append(e){for(const[n,r]of e.entries())this.addValue(n,r)}join(e){const n=[];if(this.size<=e.size)for(const[r,s]of this.entriesIterators()){if(!e.has(r))continue;const a=e.get(r);for(const[l,u]of s)for(const[f,d]of a)u!==0&&d!==0&&n.push([[r,[l,f]],u*d])}else for(const[r,s]of e.entriesIterators()){if(!this.has(r))continue;const a=this.get(r);for(const[l,u]of s)for(const[f,d]of a)d!==0&&u!==0&&n.push([[r,[f,l]],d*u])}return new Yt(n)}}function Ml(t){return Array.isArray(t)&&(typeof t[0]=="string"||typeof t[0]=="number"||typeof t[0]=="bigint")?t[0]:bl}function ef(t){return Array.isArray(t)}class UI extends co{#e=new ni;#t=new ni;#n;constructor(e,n,r,s){super(e,n,r),this.#n=s}run(){const e=new Set;for(const r of this.inputMessages())for(const[s,a]of r.getInner()){const[l,u]=s;this.#e.addValue(l,[u,a]),e.add(l)}const n=[];for(const r of e){const s=this.#e.get(r),a=this.#t.get(r),l=this.#n(s),u=new Map,f=new Map;for(const[d,m]of l){const p=u.get(d)??0;u.set(d,p+m)}for(const[d,m]of a){const p=f.get(d)??0;f.set(d,p+m)}for(const[d,m]of f)u.has(d)||(n.push([[r,d],-m]),this.#t.addValue(r,[d,-m]));for(const[d,m]of u)f.has(d)||m!==0&&(n.push([[r,d],m]),this.#t.addValue(r,[d,m]));for(const[d,m]of u){const p=f.get(d);if(p!==void 0){const y=m-p;y!==0&&(n.push([[r,d],y]),this.#t.addValue(r,[d,y]))}}}n.length>0&&this.output.sendData(new Yt(n))}}function $I(t){return e=>{const n=new es(e.graph,new Xr),r=new UI(e.graph.getNextOperatorId(),e.connectReader(),n.writer,t);return e.graph.addOperator(r),n}}function g1(t){return"pipe"in t}function y1(t,e={}){const n=Object.fromEntries(Object.entries(e).filter(([r,s])=>!g1(s)));return Object.fromEntries(Object.entries(e).filter(([r,s])=>g1(s))),r=>{const s="__original_key__";return r.pipe(Ln(u=>{const f=t(u),d=JSON.stringify(f),m={};m[s]=f;for(const[p,y]of Object.entries(n))m[p]=y.preMap(u);return[d,m]})).pipe($I(u=>{let f=0;for(const[p,y]of u)f+=y;if(f<=0)return[];const d={},m=u[0]?.[0]?.[s];d[s]=m;for(const[p,y]of Object.entries(n)){const g=u.map(([v,w])=>[v[p],w]);d[p]=y.reduce(g)}return[[d,1]]})).pipe(Ln(([u,f])=>{const d=f[s],m={};Object.assign(m,d);for(const[p,y]of Object.entries(n))y.postMap?m[p]=y.postMap(f[p]):m[p]=f[p];return[u,m]}))}}function qI(t=e=>e){return{preMap:e=>t(e),reduce:e=>{let n=0;for(const[r,s]of e)n+=r*s;return n}}}function FI(t=e=>e){return{preMap:e=>t(e)==null?0:1,reduce:e=>{let n=0;for(const[r,s]of e)n+=r*s;return n}}}function VI(t=e=>e){return{preMap:e=>({sum:t(e),count:0}),reduce:e=>{let n=0,r=0;for(const[s,a]of e)n+=s.sum*a,r+=a;return{sum:n,count:r}},postMap:e=>e.sum/e.count}}function HI(t){const e=t??(n=>n);return{preMap:n=>e(n),reduce:n=>{let r;for(const[s,a]of n)(!r||s&&s<r)&&(r=s);return r}}}function GI(t){const e=t??(n=>n);return{preMap:n=>e(n),reduce:n=>{let r;for(const[s,a]of n)(!r||s&&s>r)&&(r=s);return r}}}const KI={sum:qI,count:FI,avg:VI,min:HI,max:GI};class ZI extends ky{#e;constructor(e,n,r,s){super(e,n,r),this.#e=s}inner(e){return this.#e(e),e}}function QI(t){return e=>{const n=new es(e.graph,new Xr),r=new ZI(e.graph.getNextOperatorId(),e.connectReader(),n.writer,t);return e.graph.addOperator(r),n}}class JI extends ky{#e;constructor(e,n,r,s){super(e,n,r),this.#e=s}inner(e){return e.filter(this.#e)}}function ri(t){return e=>{const n=new es(e.graph,new Xr),r=new JI(e.graph.getNextOperatorId(),e.connectReader(),n.writer,t);return e.graph.addOperator(r),n}}class YI extends co{#e;constructor(e,n,r,s){super(e,n,r),this.#e=s}run(){for(const e of this.inputMessages())this.#e(e),this.output.sendData(e)}}function WI(t){return e=>{const n=new es(e.graph,new Xr),r=new YI(e.graph.getNextOperatorId(),e.connectReader(),n.writer,t);return e.graph.addOperator(r),n}}class XI extends co{run(){const e=this.inputMessages();if(e.length===0)return;const n=new Yt;for(const s of e)n.extend(s);const r=n.consolidate();r.getInner().length>0&&this.output.sendData(r)}}function e4(){return t=>{const e=new es(t.graph,new Xr),n=new XI(t.graph.getNextOperatorId(),t.connectReader(),e.writer);return t.graph.addOperator(n),e}}class t4 extends LI{#e=new ni;#t=new ni;#n;constructor(e,n,r,s,a="inner"){super(e,n,r,s),this.#n=a}run(){const e=ni.fromMultiSets(this.inputAMessages()),n=ni.fromMultiSets(this.inputBMessages());if(e.size===0&&n.size===0)return;const r=new Yt;this.#n!=="anti"&&this.emitInnerResults(e,n,r),(this.#n==="left"||this.#n==="full"||this.#n==="anti")&&this.emitLeftOuterResults(e,n,r),(this.#n==="right"||this.#n==="full")&&this.emitRightOuterResults(e,n,r),this.#e.append(e),this.#t.append(n),r.getInner().length>0&&this.output.sendData(r)}emitInnerResults(e,n,r){e.size>0&&r.extend(e.join(this.#t)),n.size>0&&r.extend(this.#e.join(n)),e.size>0&&n.size>0&&r.extend(e.join(n))}emitLeftOuterResults(e,n,r){if(e.size>0)for(const[s,a]of e.entriesIterators()){const l=this.#t.getConsolidatedMultiplicity(s),u=n.getConsolidatedMultiplicity(s);if(l+u===0)for(const[d,m]of a)m!==0&&r.add([s,[d,null]],m)}if(n.size>0)for(const s of n.getPresenceKeys()){const a=this.#t.getConsolidatedMultiplicity(s),l=n.getConsolidatedMultiplicity(s);if(l===0)continue;const u=a+l;if(a===0==(u===0))continue;const f=a===0;for(const[d,m]of this.#e.getIterator(s))m!==0&&r.add([s,[d,null]],f?-m:+m)}}emitRightOuterResults(e,n,r){if(n.size>0)for(const[s,a]of n.entriesIterators()){const l=this.#e.getConsolidatedMultiplicity(s),u=e.getConsolidatedMultiplicity(s);if(l+u===0)for(const[d,m]of a)m!==0&&r.add([s,[null,d]],m)}if(e.size>0)for(const s of e.getPresenceKeys()){const a=this.#e.getConsolidatedMultiplicity(s),l=e.getConsolidatedMultiplicity(s);if(l===0)continue;const u=a+l;if(a===0==(u===0))continue;const f=a===0;for(const[d,m]of this.#t.getIterator(s))m!==0&&r.add([s,[null,d]],f?-m:+m)}}}function n4(t,e="inner"){return n=>{if(n.graph!==t.graph)throw new Error("Cannot join streams from different graphs");const r=new es(n.graph,new Xr),s=new t4(n.graph.getNextOperatorId(),n.connectReader(),t.connectReader(),r.writer,e);return n.graph.addOperator(s),r}}class r4 extends co{#e;#t;constructor(e,n,r,s=a=>a){super(e,n,r),this.#e=s,this.#t=new Map}run(){const e=new Map;for(const r of this.inputMessages())for(const[s,a]of r.getInner()){const l=jn(this.#e(s)),f=(e.get(l)?.[0]??this.#t.get(l)??0)+a;e.set(l,[f,s])}const n=[];for(const[r,[s,a]]of e.entries()){const l=this.#t.get(r)??0;s===0?this.#t.delete(r):this.#t.set(r,s),l<=0&&s>0?n.push([[jn(this.#e(a)),a[1]],1]):l>0&&s<=0&&n.push([[jn(this.#e(a)),a[1]],-1])}n.length>0&&this.output.sendData(new Yt(n))}}function s4(t=e=>e){return e=>{const n=new es(e.graph,new Xr),r=new r4(e.graph.getNextOperatorId(),e.connectReader(),n.writer,t);return e.graph.addOperator(r),n}}const i4="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function Ha(t,e,n){const r=n[0];if(e!=null&&t>=e)throw new Error(t+" >= "+e);if(t.slice(-1)===r||e&&e.slice(-1)===r)throw new Error("trailing zero");if(e){let l=0;for(;(t[l]||r)===e[l];)l++;if(l>0)return e.slice(0,l)+Ha(t.slice(l),e.slice(l),n)}const s=t?n.indexOf(t[0]):0,a=e!=null?n.indexOf(e[0]):n.length;if(a-s>1){const l=Math.round(.5*(s+a));return n[l]}else return e&&e.length>1?e.slice(0,1):n[s]+Ha(t.slice(1),null,n)}function bk(t){if(t.length!==_k(t[0]))throw new Error("invalid integer part of order key: "+t)}function _k(t){if(t>="a"&&t<="z")return t.charCodeAt(0)-97+2;if(t>="A"&&t<="Z")return 90-t.charCodeAt(0)+2;throw new Error("invalid order key head: "+t)}function vl(t){const e=_k(t[0]);if(e>t.length)throw new Error("invalid order key: "+t);return t.slice(0,e)}function b1(t,e){if(t==="A"+e[0].repeat(26))throw new Error("invalid order key: "+t);const n=vl(t);if(t.slice(n.length).slice(-1)===e[0])throw new Error("invalid order key: "+t)}function _1(t,e){bk(t);const[n,...r]=t.split("");let s=!0;for(let a=r.length-1;s&&a>=0;a--){const l=e.indexOf(r[a])+1;l===e.length?r[a]=e[0]:(r[a]=e[l],s=!1)}if(s){if(n==="Z")return"a"+e[0];if(n==="z")return null;const a=String.fromCharCode(n.charCodeAt(0)+1);return a>"a"?r.push(e[0]):r.pop(),a+r.join("")}else return n+r.join("")}function a4(t,e){bk(t);const[n,...r]=t.split("");let s=!0;for(let a=r.length-1;s&&a>=0;a--){const l=e.indexOf(r[a])-1;l===-1?r[a]=e.slice(-1):(r[a]=e[l],s=!1)}if(s){if(n==="a")return"Z"+e.slice(-1);if(n==="A")return null;const a=String.fromCharCode(n.charCodeAt(0)-1);return a<"Z"?r.push(e.slice(-1)):r.pop(),a+r.join("")}else return n+r.join("")}function o4(t,e,n=i4){if(t!=null&&b1(t,n),e!=null&&b1(e,n),t!=null&&e!=null&&t>=e)throw new Error(t+" >= "+e);if(t==null){if(e==null)return"a"+n[0];const f=vl(e),d=e.slice(f.length);if(f==="A"+n[0].repeat(26))return f+Ha("",d,n);if(f<e)return f;const m=a4(f,n);if(m==null)throw new Error("cannot decrement any more");return m}if(e==null){const f=vl(t),d=t.slice(f.length),m=_1(f,n);return m??f+Ha(d,null,n)}const r=vl(t),s=t.slice(r.length),a=vl(e),l=e.slice(a.length);if(r===a)return r+Ha(s,l,n);const u=_1(r,n);if(u==null)throw new Error("cannot increment any more");return u<e?u:r+Ha(s,null,n)}class v1{#e=[];#t;#n;#r;constructor(e,n,r){this.#n=e,this.#r=e+n,this.#t=r}get size(){const e=this.#n,n=this.#r-this.#n,r=this.#e.length-e;return Math.max(0,Math.min(n,r))}move({offset:e,limit:n}){const r=this.#n,s=this.#r-this.#n,a=[this.#n,this.#r===1/0?this.#n+this.size:this.#r];this.#n=e??r,this.#r=this.#n+(n??s);const l=[this.#n,this.#r===1/0?Math.max(this.#n+this.size,a[1]):this.#r],{onlyInA:u,onlyInB:f}=cI(a,l),d=[];f.forEach(p=>{const y=this.#e[p];y&&d.push(y)});const m=[];return u.forEach(p=>{const y=this.#e[p];y&&m.push(y)}),{moveIns:d,moveOuts:m,changes:u.length+f.length>0}}insert(e){const n={moveIn:null,moveOut:null},r=this.#s(e),s=r===0?null:S1(this.#e[r-1]),a=r===this.#e.length?null:S1(this.#e[r]),l=o4(s,a),u=x1(e,l);if(this.#e.splice(r,0,u),r<this.#r){const f=Math.max(r,this.#n);f<this.#e.length&&(n.moveIn=this.#e[f],this.#r<this.#e.length&&(n.moveOut=this.#e[this.#r]))}return n}delete(e){const n={moveIn:null,moveOut:null},r=this.#s(e),[s]=this.#e.splice(r,1);if(r<this.#r){if(n.moveOut=s,r<this.#n){const l=this.#n-1;l<this.#e.length?n.moveOut=this.#e[l]:n.moveOut=null}const a=this.#r-1;a<this.#e.length&&(n.moveIn=this.#e[a])}return n}#s(e){return oI(this.#e,x1(e,""),(n,r)=>this.#t(w1(n),w1(r)))}}class l4 extends co{#e=new Map;#t;constructor(e,n,r,s,a){super(e,n,r);const l=a.limit??1/0,u=a.offset??0;this.#t=this.createTopK(u,l,u4(s)),a.setSizeCallback?.(()=>this.#t.size),a.setWindowFn?.(this.moveTopK.bind(this))}createTopK(e,n,r){return new v1(e,n,r)}moveTopK({offset:e,limit:n}){if(!(this.#t instanceof v1))throw new Error("Cannot move B+-tree implementation of TopK with fractional index");const r=[],s=this.#t.move({offset:e,limit:n});s.moveIns.forEach(a=>this.handleMoveIn(a,r)),s.moveOuts.forEach(a=>this.handleMoveOut(a,r)),s.changes&&this.output.sendData(new Yt(r))}run(){const e=[];for(const n of this.inputMessages())for(const[r,s]of n.getInner()){const[a,l]=r;this.processElement(a,l,s,e)}e.length>0&&this.output.sendData(new Yt(e))}processElement(e,n,r,s){const{oldMultiplicity:a,newMultiplicity:l}=this.addKey(e,r);let u={moveIn:null,moveOut:null};a<=0&&l>0?u=this.#t.insert([e,n]):a>0&&l<=0&&(u=this.#t.delete([e,n])),this.handleMoveIn(u.moveIn,s),this.handleMoveOut(u.moveOut,s)}handleMoveIn(e,n){if(e){const[[r,s],a]=e;n.push([[r,[s,a]],1])}}handleMoveOut(e,n){if(e){const[[r,s],a]=e;n.push([[r,[s,a]],-1])}}getMultiplicity(e){return this.#e.get(e)??0}addKey(e,n){const r=this.getMultiplicity(e),s=r+n;return s===0?this.#e.delete(e):this.#e.set(e,s),{oldMultiplicity:r,newMultiplicity:s}}}function c4(t,e){const n=e||{};return r=>{const s=new es(r.graph,new Xr),a=new l4(r.graph.getNextOperatorId(),r.connectReader(),s.writer,t,n);return r.graph.addOperator(a),s}}function x1(t,e){return[t,e]}function w1(t){return t[0]}function S1(t){return t[1]}function u4(t){return([e,n],[r,s])=>{const a=t(n,s);return a!==0?a:vf(e,r)}}function f4(t,e,n){const r=n?.limit??1/0,s=n?.offset??0,a=n?.setSizeCallback,l=n?.setWindowFn,u=n?.comparator??((f,d)=>f===d?0:f<d?-1:1);return f=>f.pipe(t((d,m)=>u(e(d),e(m)),{limit:r,offset:s,setSizeCallback:a,setWindowFn:l}),e4())}function d4(t,e){return f4(c4,t,e)}class h4{constructor(e,n,r){this._root=lm,this._size=0,this._maxNodeSize=r>=4?Math.min(r,256):32,this._compare=e,n&&this.setPairs(n)}get size(){return this._size}get length(){return this._size}get isEmpty(){return this._size===0}clear(){this._root=lm,this._size=0}get(e,n){return this._root.get(e,n,this)}set(e,n,r){this._root.isShared&&(this._root=this._root.clone());const s=this._root.set(e,n,r,this);return s===!0||s===!1?s:(this._root=new Ey([this._root,s]),!0)}has(e){return this.forRange(e,e,!0,void 0)!==0}delete(e){return this.editRange(e,e,!0,m4)!==0}get maxNodeSize(){return this._maxNodeSize}minKey(){return this._root.minKey()}maxKey(){return this._root.maxKey()}keysArray(){const e=[];return this._root.forRange(this.minKey(),this.maxKey(),!0,!1,this,0,(n,r)=>{e.push(n)}),e}nextHigherPair(e,n){return n=n||[],e===void 0?this._root.minPair(n):this._root.getPairOrNextHigher(e,this._compare,!1,n)}nextHigherKey(e){const n=this.nextHigherPair(e,k1);return n&&n[0]}nextLowerPair(e,n){return n=n||[],e===void 0?this._root.maxPair(n):this._root.getPairOrNextLower(e,this._compare,!1,n)}nextLowerKey(e){const n=this.nextLowerPair(e,k1);return n&&n[0]}setPairs(e,n){let r=0;for(const s of e)this.set(s[0],s[1],n)&&r++;return r}forRange(e,n,r,s,a){const l=this._root.forRange(e,n,r,!1,this,a||0,s);return typeof l=="number"?l:l.break}editRange(e,n,r,s,a){let l=this._root;l.isShared&&(this._root=l=l.clone());try{const u=l.forRange(e,n,r,!0,this,a||0,s);return typeof u=="number"?u:u.break}finally{let u;for(;l.keys.length<=1&&!l.isLeaf;)u||=l.isShared,this._root=l=l.keys.length===0?lm:l.children[0];u&&(l.isShared=!0)}}}class Ql{get isLeaf(){return this.children===void 0}constructor(e=[],n){this.keys=e,this.values=n||En,this.isShared=void 0}maxKey(){return this.keys[this.keys.length-1]}indexOf(e,n,r){const s=this.keys;let a=0,l=s.length,u=l>>1;for(;a<l;){const f=r(s[u],e);if(f<0)a=u+1;else if(f>0)l=u;else{if(f===0)return u;if(e===e)return s.length;throw new Error("BTree: NaN was used as a key")}u=a+l>>1}return u^n}minKey(){return this.keys[0]}minPair(e){if(this.keys.length!==0)return e[0]=this.keys[0],e[1]=this.values[0],e}maxPair(e){if(this.keys.length===0)return;const n=this.keys.length-1;return e[0]=this.keys[n],e[1]=this.values[n],e}clone(){const e=this.values;return new Ql(this.keys.slice(0),e===En?e:e.slice(0))}get(e,n,r){const s=this.indexOf(e,-1,r._compare);return s<0?n:this.values[s]}getPairOrNextLower(e,n,r,s){const a=this.indexOf(e,-1,n),l=a<0?~a-1:r?a:a-1;if(l>=0)return s[0]=this.keys[l],s[1]=this.values[l],s}getPairOrNextHigher(e,n,r,s){const a=this.indexOf(e,-1,n),l=a<0?~a:r?a:a+1,u=this.keys;if(l<u.length)return s[0]=u[l],s[1]=this.values[l],s}set(e,n,r,s){let a=this.indexOf(e,-1,s._compare);if(a<0){if(a=~a,s._size++,this.keys.length<s._maxNodeSize)return this.insertInLeaf(a,e,n,s);{const l=this.splitOffRightSide();let u=this;return a>this.keys.length&&(a-=this.keys.length,u=l),u.insertInLeaf(a,e,n,s),l}}else return r!==!1&&(n!==void 0&&this.reifyValues(),this.keys[a]=e,this.values[a]=n),!1}reifyValues(){return this.values===En?this.values=this.values.slice(0,this.keys.length):this.values}insertInLeaf(e,n,r,s){if(this.keys.splice(e,0,n),this.values===En){for(;En.length<s._maxNodeSize;)En.push(void 0);if(r===void 0)return!0;this.values=En.slice(0,this.keys.length-1)}return this.values.splice(e,0,r),!0}takeFromRight(e){let n=this.values;e.values===En?n!==En&&n.push(void 0):(n=this.reifyValues(),n.push(e.values.shift())),this.keys.push(e.keys.shift())}takeFromLeft(e){let n=this.values;e.values===En?n!==En&&n.unshift(void 0):(n=this.reifyValues(),n.unshift(e.values.pop())),this.keys.unshift(e.keys.pop())}splitOffRightSide(){const e=this.keys.length>>1,n=this.keys.splice(e),r=this.values===En?En:this.values.splice(e);return new Ql(n,r)}forRange(e,n,r,s,a,l,u){const f=a._compare;let d,m;if(n===e){if(!r||(m=(d=this.indexOf(e,-1,f))+1,d<0))return l}else d=this.indexOf(e,0,f),m=this.indexOf(n,-1,f),m<0?m=~m:r===!0&&m++;const p=this.keys,y=this.values;if(u!==void 0)for(let g=d;g<m;g++){const v=p[g],w=u(v,y[g],l++);if(w!==void 0){if(s===!0){if(v!==p[g]||this.isShared===!0)throw new Error("BTree illegally changed or cloned in editRange");w.delete?(this.keys.splice(g,1),this.values!==En&&this.values.splice(g,1),a._size--,g--,m--):w.hasOwnProperty("value")&&(y[g]=w.value)}if(w.break!==void 0)return w}}else l+=m-d;return l}mergeSibling(e,n){if(this.keys.push.apply(this.keys,e.keys),this.values===En){if(e.values===En)return;this.values=this.values.slice(0,this.keys.length)}this.values.push.apply(this.values,e.reifyValues())}}class Ey extends Ql{constructor(e,n){if(!n){n=[];for(let r=0;r<e.length;r++)n[r]=e[r].maxKey()}super(n),this.children=e}minKey(){return this.children[0].minKey()}minPair(e){return this.children[0].minPair(e)}maxPair(e){return this.children[this.children.length-1].maxPair(e)}get(e,n,r){const s=this.indexOf(e,0,r._compare),a=this.children;return s<a.length?a[s].get(e,n,r):void 0}getPairOrNextLower(e,n,r,s){const a=this.indexOf(e,0,n),l=this.children;if(a>=l.length)return this.maxPair(s);const u=l[a].getPairOrNextLower(e,n,r,s);return u===void 0&&a>0?l[a-1].maxPair(s):u}getPairOrNextHigher(e,n,r,s){const a=this.indexOf(e,0,n),l=this.children,u=l.length;if(a>=u)return;const f=l[a].getPairOrNextHigher(e,n,r,s);return f===void 0&&a<u-1?l[a+1].minPair(s):f}set(e,n,r,s){const a=this.children,l=s._maxNodeSize,u=s._compare;let f=Math.min(this.indexOf(e,0,u),a.length-1),d=a[f];if(d.isShared&&(a[f]=d=d.clone()),d.keys.length>=l){let p;f>0&&(p=a[f-1]).keys.length<l&&u(d.keys[0],e)<0?(p.isShared&&(a[f-1]=p=p.clone()),p.takeFromRight(d),this.keys[f-1]=p.maxKey()):(p=a[f+1])!==void 0&&p.keys.length<l&&u(d.maxKey(),e)<0&&(p.isShared&&(a[f+1]=p=p.clone()),p.takeFromLeft(d),this.keys[f]=a[f].maxKey())}const m=d.set(e,n,r,s);if(m===!1)return!1;if(this.keys[f]=d.maxKey(),m===!0)return!0;if(this.keys.length<l)return this.insert(f+1,m),!0;{const p=this.splitOffRightSide();let y=this;return u(m.maxKey(),this.maxKey())>0&&(y=p,f-=this.keys.length),y.insert(f+1,m),p}}insert(e,n){this.children.splice(e,0,n),this.keys.splice(e,0,n.maxKey())}splitOffRightSide(){const e=this.children.length>>1;return new Ey(this.children.splice(e),this.keys.splice(e))}takeFromRight(e){this.keys.push(e.keys.shift()),this.children.push(e.children.shift())}takeFromLeft(e){this.keys.unshift(e.keys.pop()),this.children.unshift(e.children.pop())}forRange(e,n,r,s,a,l,u){const f=a._compare,d=this.keys,m=this.children;let p=this.indexOf(e,0,f),y=p;const g=Math.min(n===e?p:this.indexOf(n,0,f),d.length-1);if(s){if(y<=g)try{for(;y<=g;y++){m[y].isShared&&(m[y]=m[y].clone());const v=m[y].forRange(e,n,r,s,a,l,u);if(d[y]=m[y].maxKey(),typeof v!="number")return v;l=v}}finally{const v=a._maxNodeSize>>1;for(p>0&&p--,y=g;y>=p;y--)m[y].keys.length<=v&&(m[y].keys.length!==0?this.tryMerge(y,a._maxNodeSize):(d.splice(y,1),m.splice(y,1)));m.length!==0&&m[0].keys.length===0&&g4(!1,"emptiness bug")}}else for(;y<=g;y++){const v=m[y].forRange(e,n,r,s,a,l,u);if(typeof v!="number")return v;l=v}return l}tryMerge(e,n){const r=this.children;return e>=0&&e+1<r.length&&r[e].keys.length+r[e+1].keys.length<=n?(r[e].isShared&&(r[e]=r[e].clone()),r[e].mergeSibling(r[e+1],n),r.splice(e+1,1),this.keys.splice(e+1,1),this.keys[e]=r[e].maxKey(),!0):!1}mergeSibling(e,n){const r=this.keys.length;this.keys.push.apply(this.keys,e.keys);const s=e.children;if(this.children.push.apply(this.children,s),e.isShared&&!this.isShared)for(const a of s)a.isShared=!0;this.tryMerge(r-1,n)}}const En=[],p4={delete:!0},m4=()=>p4,lm=(function(){const t=new Ql;return t.isShared=!0,t})(),k1=[];function g4(t,...e){throw e.unshift("B+ tree"),new Error(e.join(" "))}function y4(){const t=new Map;function e(n){const r=n.join(".");if(t.has(r))return t.get(r);const s=new Proxy({},{get(a,l,u){if(l==="__refProxy")return!0;if(l==="__path")return n;if(l==="__type")return;if(typeof l=="symbol")return Reflect.get(a,l,u);const f=[...n,String(l)];return e(f)},has(a,l){return l==="__refProxy"||l==="__path"||l==="__type"?!0:Reflect.has(a,l)},ownKeys(a){return Reflect.ownKeys(a)},getOwnPropertyDescriptor(a,l){return l==="__refProxy"||l==="__path"||l==="__type"?{enumerable:!1,configurable:!0}:Reflect.getOwnPropertyDescriptor(a,l)}});return t.set(r,s),s}return e([])}function ja(t){const e=new Map;let n=0;function r(a){const l=a.join(".");if(e.has(l))return e.get(l);const u=new Proxy({},{get(f,d,m){if(d==="__refProxy")return!0;if(d==="__path")return a;if(d==="__type")return;if(typeof d=="symbol")return Reflect.get(f,d,m);const p=[...a,String(d)];return r(p)},has(f,d){return d==="__refProxy"||d==="__path"||d==="__type"?!0:Reflect.has(f,d)},ownKeys(f){const d=++n,m=`__SPREAD_SENTINEL__${a.join(".")}__${d}`;return Object.prototype.hasOwnProperty.call(f,m)||Object.defineProperty(f,m,{enumerable:!0,configurable:!0,value:!0}),Reflect.ownKeys(f)},getOwnPropertyDescriptor(f,d){return d==="__refProxy"||d==="__path"||d==="__type"?{enumerable:!1,configurable:!0}:Reflect.getOwnPropertyDescriptor(f,d)}});return e.set(l,u),u}return new Proxy({},{get(a,l,u){if(l==="__refProxy")return!0;if(l==="__path")return[];if(l==="__type")return;if(typeof l=="symbol")return Reflect.get(a,l,u);const f=String(l);if(t.includes(f))return r([f])},has(a,l){return l==="__refProxy"||l==="__path"||l==="__type"||typeof l=="string"&&t.includes(l)?!0:Reflect.has(a,l)},ownKeys(a){return[...t,"__refProxy","__path","__type"]},getOwnPropertyDescriptor(a,l){if(l==="__refProxy"||l==="__path"||l==="__type")return{enumerable:!1,configurable:!0};if(typeof l=="string"&&t.includes(l))return{enumerable:!0,configurable:!0}}})}function un(t){return b4(t)?new Pn(t.__path):t&&typeof t=="object"&&"type"in t&&(t.type==="func"||t.type==="ref"||t.type==="val"||t.type==="agg")?t:new Jn(t)}function b4(t){return t&&typeof t=="object"&&t.__refProxy===!0}function og(t,e){return new Ir("eq",[un(t),un(e)])}function E1(t,e){return new Ir("gt",[un(t),un(e)])}function _4(t,e){return new Ir("gte",[un(t),un(e)])}function lg(t,e){return new Ir("lt",[un(t),un(e)])}function cg(t,e,...n){const r=[t,e,...n];return new Ir("and",r.map(s=>un(s)))}function v4(t,e,...n){const r=[t,e,...n];return new Ir("or",r.map(s=>un(s)))}function x4(t,e){return new Ir("in",[un(t),un(e)])}class w4{constructor(e,n,r,s){this.lookupCount=0,this.totalLookupTime=0,this.lastUpdated=new Date,this.id=e,this.expression=n,this.compareOptions=wy,this.name=r,this.initialize(s)}supports(e){return this.supportedOperations.has(e)}matchesField(e){return this.expression.type==="ref"&&this.expression.path.length===e.length&&this.expression.path.every((n,r)=>n===e[r])}matchesCompareOptions(e){const n={...this.compareOptions,direction:void 0},r={...e,direction:void 0};return Pr(n,r)}matchesDirection(e){return this.compareOptions.direction===e}getStats(){return{entryCount:this.keyCount,lookupCount:this.lookupCount,averageLookupTime:this.lookupCount>0?this.totalLookupTime/this.lookupCount:0,lastUpdated:this.lastUpdated}}evaluateIndexExpression(e){return vy(this.expression)(e)}trackLookup(e){const n=performance.now()-e;this.lookupCount++,this.totalLookupTime+=n}updateTimestamp(){this.lastUpdated=new Date}}class ug extends w4{constructor(e,n,r,s){super(e,n,r,s),this.supportedOperations=new Set(["eq","gt","gte","lt","lte","in"]),this.valueMap=new Map,this.indexedKeys=new Set,this.compareFn=sg,this.compareFn=s?.compareFn??sg,s?.compareOptions&&(this.compareOptions=s.compareOptions),this.orderedEntries=new h4(this.compareFn)}initialize(e){}add(e,n){let r;try{r=this.evaluateIndexExpression(n)}catch(a){throw new Error(`Failed to evaluate index expression for key ${e}: ${a}`)}const s=ks(r);if(this.valueMap.has(s))this.valueMap.get(s).add(e);else{const a=new Set([e]);this.valueMap.set(s,a),this.orderedEntries.set(s,void 0)}this.indexedKeys.add(e),this.updateTimestamp()}remove(e,n){let r;try{r=this.evaluateIndexExpression(n)}catch(a){console.warn(`Failed to evaluate index expression for key ${e} during removal:`,a);return}const s=ks(r);if(this.valueMap.has(s)){const a=this.valueMap.get(s);a.delete(e),a.size===0&&(this.valueMap.delete(s),this.orderedEntries.delete(s))}this.indexedKeys.delete(e),this.updateTimestamp()}update(e,n,r){this.remove(e,n),this.add(e,r)}build(e){this.clear();for(const[n,r]of e)this.add(n,r)}clear(){this.orderedEntries.clear(),this.valueMap.clear(),this.indexedKeys.clear(),this.updateTimestamp()}lookup(e,n){const r=performance.now();let s;switch(e){case"eq":s=this.equalityLookup(n);break;case"gt":s=this.rangeQuery({from:n,fromInclusive:!1});break;case"gte":s=this.rangeQuery({from:n,fromInclusive:!0});break;case"lt":s=this.rangeQuery({to:n,toInclusive:!1});break;case"lte":s=this.rangeQuery({to:n,toInclusive:!0});break;case"in":s=this.inArrayLookup(n);break;default:throw new Error(`Operation ${e} not supported by BTreeIndex`)}return this.trackLookup(r),s}get keyCount(){return this.indexedKeys.size}equalityLookup(e){const n=ks(e);return new Set(this.valueMap.get(n)??[])}rangeQuery(e={}){const{from:n,to:r,fromInclusive:s=!0,toInclusive:a=!0}=e,l=new Set,u=ks(n),f=ks(r),d=u??this.orderedEntries.minKey(),m=f??this.orderedEntries.maxKey();return this.orderedEntries.forRange(d,m,a,(p,y)=>{if(!s&&this.compareFn(p,n)===0)return;const g=this.valueMap.get(p);g&&g.forEach(v=>l.add(v))}),l}rangeQueryReversed(e={}){const{from:n,to:r,fromInclusive:s=!0,toInclusive:a=!0}=e;return this.rangeQuery({from:r??this.orderedEntries.maxKey(),to:n??this.orderedEntries.minKey(),fromInclusive:a,toInclusive:s})}takeInternal(e,n,r,s,a=!1){const l=new Set,u=[];let f,d=ks(r);for(;(f=n(d))!==void 0&&u.length<e;){d=f[0];const m=this.valueMap.get(d);if(m&&m.size>0){const p=Array.from(m).sort(vf);a&&p.reverse();for(const y of p){if(u.length>=e)break;!l.has(y)&&(s?.(y)??!0)&&(u.push(y),l.add(y))}}}return u}take(e,n,r){const s=a=>this.orderedEntries.nextHigherPair(a);return this.takeInternal(e,s,n,r)}takeReversed(e,n,r){const s=a=>this.orderedEntries.nextLowerPair(a);return this.takeInternal(e,s,n,r,!0)}inArrayLookup(e){const n=new Set;for(const r of e){const s=ks(r),a=this.valueMap.get(s);a&&a.forEach(l=>n.add(l))}return n}get indexedKeysSet(){return this.indexedKeys}get orderedEntriesArray(){return this.orderedEntries.keysArray().map(e=>[e,this.valueMap.get(e)??new Set])}get orderedEntriesArrayReversed(){return this.takeReversed(this.orderedEntries.size).map(e=>[e,this.valueMap.get(e)??new Set])}get valueMapData(){return this.valueMap}}function vk(t){return t.config.autoIndex==="eager"}function ud(t,e,n,r,s){if(!vk(n))return;const a=r??{...wy,...n.compareOptions};if(!Array.from(n.indexes.values()).find(u=>u.matchesField(e)&&u.matchesCompareOptions(a)))try{n.createIndex(u=>{let f=u;for(const d of e)f=f[d];return f},{name:`auto:${e.join(".")}`,indexType:ug,options:s?{compareFn:s,compareOptions:a}:{}})}catch(u){console.warn(`${n.id?`[${n.id}] `:""}Failed to create auto-index for field path "${e.join(".")}":`,u)}}function S4(t,e){if(!vk(e))return;const n=k4(t);for(const{fieldName:r,fieldPath:s}of n)ud(r,s,e)}function k4(t){const e=[];function n(r){if(r.type!=="func")return;const s=r;if(s.name==="and"){for(const d of s.args)n(d);return}if(!["eq","gt","gte","lt","lte","in"].includes(s.name)||s.args.length<1||s.args[0].type!=="ref")return;const u=s.args[0].path;if(u.length===0)return;const f=u.join("_");e.push({fieldName:f,fieldPath:u})}return n(t),e}const{sum:E4,count:C4,avg:T4,min:A4,max:R4}=KI;function O4(t,e){const n=new Map,r=[...t];if(!e)return{selectToGroupByIndex:n,groupByExpressions:r};for(const[s,a]of Object.entries(e)){if(a.type==="agg")continue;const l=r.findIndex(u=>xf(a,u));if(l===-1)throw new MN(s);n.set(s,l)}return{selectToGroupByIndex:n,groupByExpressions:r}}function C1(t,e,n,r,s){if(e.length===0){const d={};if(r){for(const[p,y]of Object.entries(r))if(y.type==="agg"){const g=y;d[p]=T1(g)}}const m=()=>({__singleGroup:!0});if(t=t.pipe(y1(m,d)),t=t.pipe(Ln(([,p])=>{const g={...p.__select_results||{}};if(r)for(const[v,w]of Object.entries(r))w.type==="agg"&&(g[v]=p[v]);return["single_group",{...p,__select_results:g}]})),n&&n.length>0)for(const p of n){const y=s1(p),g=wf(y,r||{}),v=Yn(g);t=t.pipe(ri(([,w])=>{const E={result:w.__select_results};return Ya(v(E))}))}if(s&&s.length>0)for(const p of s)t=t.pipe(ri(([,y])=>{const g={result:y.__select_results};return Ya(p(g))}));return t}const a=O4(e,r),l=e.map(d=>Yn(d)),u=([,d])=>{const m={...d};delete m.__select_results;const p={};for(let y=0;y<e.length;y++){const g=l[y],v=g(m);p[`__key_${y}`]=v}return p},f={};if(r){for(const[d,m]of Object.entries(r))if(m.type==="agg"){const p=m;f[d]=T1(p)}}if(t=t.pipe(y1(u,f)),t=t.pipe(Ln(([,d])=>{const m=d.__select_results||{},p={};if(r)for(const[g,v]of Object.entries(r))if(v.type!=="agg"){const w=a.selectToGroupByIndex.get(g);w!==void 0?p[g]=d[`__key_${w}`]:p[g]=m[g]}else p[g]=d[g];else for(let g=0;g<e.length;g++)p[`__key_${g}`]=d[`__key_${g}`];let y;if(e.length===1)y=d.__key_0;else{const g=[];for(let v=0;v<e.length;v++)g.push(d[`__key_${v}`]);y=JSON.stringify(g)}return[y,{...d,__select_results:p}]})),n&&n.length>0)for(const d of n){const m=s1(d),p=wf(m,r||{}),y=Yn(p);t=t.pipe(ri(([,g])=>{const v={result:g.__select_results};return y(v)}))}if(s&&s.length>0)for(const d of s)t=t.pipe(ri(([,m])=>{const p={result:m.__select_results};return Ya(d(p))}));return t}function xf(t,e){if(!t||!e||t.type!==e.type)return!1;switch(t.type){case"ref":return!t.path||!e.path||t.path.length!==e.path.length?!1:t.path.every((n,r)=>n===e.path[r]);case"val":return t.value===e.value;case"func":return t.name===e.name&&t.args?.length===e.args?.length&&(t.args||[]).every((n,r)=>xf(n,e.args[r]));case"agg":return t.name===e.name&&t.args?.length===e.args?.length&&(t.args||[]).every((n,r)=>xf(n,e.args[r]));default:return!1}}function T1(t){const e=Yn(t.args[0]),n=([,a])=>{const l=e(a);return typeof l=="number"?l:l!=null?Number(l):0},r=([,a])=>{const l=e(a);return typeof l=="number"||l instanceof Date?l:l!=null?Number(l):0},s=([,a])=>e(a);switch(t.name.toLowerCase()){case"sum":return E4(n);case"count":return C4(s);case"avg":return T4(n);case"min":return A4(r);case"max":return R4(r);default:throw new DN(t.name)}}function wf(t,e,n="result"){switch(t.type){case"agg":{const r=t;for(const[s,a]of Object.entries(e))if(a.type==="agg"&&N4(r,a))return new Pn([n,s]);throw new jN(r.name)}case"func":{const r=t,s=r.args.map(a=>wf(a,e));return new Ir(r.name,s)}case"ref":return t;case"val":return t;default:throw new LN(t.type)}}function N4(t,e){return t.name===e.name&&t.args.length===e.args.length&&t.args.every((n,r)=>xf(n,e.args[r]))}function I4(t,e,n,r,s,a,l,u,f){const d=n.map(v=>{const w=wf(v.expression,r,"__select_results");return{compiledExpression:Yn(w),compareOptions:fg(v,s)}}),m=v=>{const w=v;return n.length>1?d.map(E=>E.compiledExpression(w)):n.length===1?d[0].compiledExpression(w):null},p=(v,w)=>{if(n.length>1){const E=v,S=w;for(let C=0;C<n.length;C++){const T=d[C],I=bf(T.compareOptions)(E[C],S[C]);if(I!==0)return I}return E.length-S.length}if(n.length===1){const E=d[0];return bf(E.compareOptions)(v,w)}return sg(v,w)};let y,g;if(u){let v,w,E,S=t.from.alias;const C=n[0],T=C.expression;if(T.type==="ref"){const M=Kl(t,T,s);if(M){w=M.collection;const I=M.path[0],R=fg(C,w);I&&ud(I,M.path,w,R,p),E=Yn(new Pn(M.path),!0),v=cc(w,M.path,R),v?.supports("gt")||(v=void 0),S=T.path.length>1?String(T.path[0]):t.from.alias}}if(E){const I=n.every(K=>K.expression.type==="ref")?n.map(K=>{const j=K.expression,J=Kl(t,j,s);return Yn(J?new Pn(J.path):K.expression,!0)}):void 0;g={alias:S,offset:f??0,limit:u,comparator:(K,j)=>{if(n.length===1){const J=K&&E(K),ne=j&&E(j);return p(J,ne)}if(I){const J=ne=>ne&&I.map(me=>me(ne));return p(J(K),J(j))}return 0},valueExtractorForRawRow:K=>{if(n.length===1)return E(K);if(I)return I.map(j=>j(K))},firstColumnValueExtractor:E,index:v,orderBy:n};const q=w?.id??s.id;a[q]=g,v&&(y=K=>{a[q].dataNeeded=()=>{const j=K();return Math.max(0,g.limit-j)}})}}return e.pipe(d4(m,{limit:u,offset:f,comparator:p,setSizeCallback:y,setWindowFn:v=>{l(w=>{v(w),g&&(g.offset=w.offset??g.offset,g.limit=w.limit??g.limit)})}}))}function fg(t,e){return t.compareOptions.stringSort!==void 0?t.compareOptions:{...e.compareOptions,direction:t.compareOptions.direction,nulls:t.compareOptions.nulls}}function M4(t,e={}){const n=r=>{const s=[];for(const[a,l]of t.entries())(r?.(l)??!0)&&s.push({type:"insert",key:a,value:l});return s};if(e.limit!==void 0&&!e.orderBy)throw new Error("limit cannot be used without orderBy");if(e.orderBy){const r=e.where?Dl(e.where):void 0,s=j4(t,e.orderBy,e.limit,r,e.optimizedOnly);if(s===void 0)return;const a=[];for(const l of s){const u=t.get(l);u!==void 0&&a.push({type:"insert",key:l,value:u})}return a}if(!e.where)return n();try{const r=e.where,s=eI(r,t);if(s.canOptimize){const a=[];for(const l of s.matchingKeys){const u=t.get(l);u!==void 0&&a.push({type:"insert",key:l,value:u})}return a}else{if(e.optimizedOnly)return;const a=Dl(r);return n(a)}}catch(r){console.warn(`${t.id?`[${t.id}] `:""}Error processing where clause, falling back to full scan:`,r);const s=Dl(e.where);return e.optimizedOnly?void 0:n(s)}}function Dl(t){const e=vy(t);return n=>{try{const r=e(n);return Ya(r)}catch{return!1}}}function D4(t,e){const n=Dl(e.whereExpression);return r=>{const s=[];for(const a of r)if(a.type==="insert")n(a.value)&&s.push(a);else if(a.type==="update"){const l=n(a.value),u=a.previousValue?n(a.previousValue):!1;l&&u?s.push(a):l&&!u?s.push({...a,type:"insert"}):!l&&u&&s.push({...a,type:"delete",value:a.previousValue})}else n(a.value)&&s.push(a);(s.length>0||r.length===0)&&t(s)}}function j4(t,e,n,r,s){if(e.length===1){const f=e[0],d=f.expression;if(d.type==="ref"){const p=d.path,y=fg(f,t);ud(p[0],p,t,y);const g=cc(t,p,y);if(g&&g.supports("gt")){const v=w=>{const E=t.get(w);return E===void 0?!1:r?.(E)??!0};return g.take(n??g.keyCount,void 0,v)}}}if(s)return;const a=[];for(const[f,d]of t.entries())(r?.(d)??!0)&&a.push({key:f,value:d});const l=(f,d)=>{for(const m of e){const p=bf(m.compareOptions),y=A1(f.value,m.expression),g=A1(d.value,m.expression),v=p(y,g);if(v!==0)return v}return 0};a.sort(l);const u=a.map(f=>f.key);return n!==void 0?u.slice(0,n):u}function A1(t,e){if(e.type==="ref"){const n=e;let r=t;for(const s of n.path)r=r?.[s];return r}else return e.type==="val"?e.value:vy(e)(t)}class R1{constructor(e){this.map=new Map,this.sortedKeys=[],this.comparator=e}indexOf(e,n){let r=0,s=this.sortedKeys.length;if(!this.comparator){for(;r<s;){const a=Math.floor((r+s)/2),l=this.sortedKeys[a],u=vf(e,l);if(u<0)s=a;else if(u>0)r=a+1;else return a}return r}for(;r<s;){const a=Math.floor((r+s)/2),l=this.sortedKeys[a],u=this.map.get(l),f=this.comparator(n,u);if(f<0)s=a;else if(f>0)r=a+1;else{const d=vf(e,l);if(d<0)s=a;else if(d>0)r=a+1;else return a}}return r}set(e,n){if(this.map.has(e)){const s=this.map.get(e),a=this.indexOf(e,s);this.sortedKeys.splice(a,1)}const r=this.indexOf(e,n);return this.sortedKeys.splice(r,0,e),this.map.set(e,n),this}get(e){return this.map.get(e)}delete(e){if(this.map.has(e)){const n=this.map.get(e),r=this.indexOf(e,n);return this.sortedKeys.splice(r,1),this.map.delete(e)}return!1}has(e){return this.map.has(e)}clear(){this.map.clear(),this.sortedKeys=[]}get size(){return this.map.size}*[Symbol.iterator](){for(const e of this.sortedKeys)yield[e,this.map.get(e)]}entries(){return this[Symbol.iterator]()}keys(){return this.sortedKeys[Symbol.iterator]()}values(){return(function*(){for(const e of this.sortedKeys)yield this.map.get(e)}).call(this)}forEach(e){for(const n of this.sortedKeys)e(this.map.get(n),n,this.map)}}class L4{constructor(e){this.pendingSyncedTransactions=[],this.syncedMetadata=new Map,this.optimisticUpserts=new Map,this.optimisticDeletes=new Set,this.size=0,this.syncedKeys=new Set,this.preSyncVisibleState=new Map,this.recentlySyncedKeys=new Set,this.hasReceivedFirstCommit=!1,this.isCommittingSyncTransactions=!1,this.commitPendingTransactions=()=>{let n=!1;for(const l of this.transactions.values())if(l.state==="persisting"){n=!0;break}const{committedSyncedTransactions:r,uncommittedSyncedTransactions:s,hasTruncateSync:a}=this.pendingSyncedTransactions.reduce((l,u)=>(u.committed?(l.committedSyncedTransactions.push(u),u.truncate===!0&&(l.hasTruncateSync=!0)):l.uncommittedSyncedTransactions.push(u),l),{committedSyncedTransactions:[],uncommittedSyncedTransactions:[],hasTruncateSync:!1});if(!n||a){this.isCommittingSyncTransactions=!0;const l=a?r.find(y=>y.truncate)?.optimisticSnapshot:null,u=new Set;for(const y of r)for(const g of y.operations)u.add(g.key);let f=this.preSyncVisibleState;if(f.size===0){f=new Map;for(const y of u){const g=this.get(y);g!==void 0&&f.set(y,g)}}const d=[],m=this.config.sync.rowUpdateMode||"partial";for(const y of r){if(y.truncate){const g=new Set([...this.syncedData.keys(),...l?.upserts.keys()||[]]);for(const v of g){if(l?.deletes.has(v))continue;const w=l?.upserts.get(v)||this.syncedData.get(v);w!==void 0&&d.push({type:"delete",key:v,value:w})}this.syncedData.clear(),this.syncedMetadata.clear(),this.syncedKeys.clear();for(const v of u)f.delete(v);this._events.emit("truncate",{type:"truncate",collection:this.collection})}for(const g of y.operations){const v=g.key;switch(this.syncedKeys.add(v),g.type){case"insert":this.syncedMetadata.set(v,g.metadata);break;case"update":this.syncedMetadata.set(v,Object.assign({},this.syncedMetadata.get(v),g.metadata));break;case"delete":this.syncedMetadata.delete(v);break}switch(g.type){case"insert":this.syncedData.set(v,g.value);break;case"update":{if(m==="partial"){const w=Object.assign({},this.syncedData.get(v),g.value);this.syncedData.set(v,w)}else this.syncedData.set(v,g.value);break}case"delete":this.syncedData.delete(v);break}}}if(a){const y=new Set;for(const w of r)for(const E of w.operations)(E.type==="insert"||E.type==="update")&&y.add(E.key);const g=new Map(l.upserts),v=new Set(l.deletes);for(const[w,E]of g)if(!v.has(w))if(y.has(w)){let S=!1;for(let C=d.length-1;C>=0;C--){const T=d[C];if(T.key===w&&T.type==="insert"){T.value=E,S=!0;break}}S||d.push({type:"insert",key:w,value:E})}else d.push({type:"insert",key:w,value:E});if(d.length>0&&v.size>0){const w=[];for(const E of d)E.type==="insert"&&v.has(E.key)||w.push(E);d.length=0,d.push(...w)}this.lifecycle.status!=="ready"&&this.lifecycle.markReady()}if(this.optimisticUpserts.clear(),this.optimisticDeletes.clear(),this.isCommittingSyncTransactions=!1,a&&l){for(const[y,g]of l.upserts)this.optimisticUpserts.set(y,g);for(const y of l.deletes)this.optimisticDeletes.add(y)}for(const y of this.transactions.values())if(!["completed","failed"].includes(y.state)){for(const g of y.mutations)if(this.isThisCollection(g.collection)&&g.optimistic)switch(g.type){case"insert":case"update":this.optimisticUpserts.set(g.key,g.modified),this.optimisticDeletes.delete(g.key);break;case"delete":this.optimisticUpserts.delete(g.key),this.optimisticDeletes.add(g.key);break}}const p=new Map;for(const y of this.transactions.values())if(y.state==="completed")for(const g of y.mutations)g.optimistic&&this.isThisCollection(g.collection)&&u.has(g.key)&&p.set(g.key,{type:g.type,value:g.modified});for(const y of u){const g=f.get(y),v=this.get(y),w=p.get(y);let E=!1;w&&(w.type==="delete"&&g!==void 0&&v===void 0&&Pr(w.value,g)||v!==void 0&&Pr(w.value,v))&&(E=!0),E||(g===void 0&&v!==void 0?d.push({type:"insert",key:y,value:v}):g!==void 0&&v===void 0?d.push({type:"delete",key:y,value:g}):g!==void 0&&v!==void 0&&!Pr(g,v)&&d.push({type:"update",key:y,value:v,previousValue:g}))}this.size=this.calculateSize(),d.length>0&&this.indexes.updateIndexes(d),this.changes.emitEvents(d,!0),this.pendingSyncedTransactions=s,this.preSyncVisibleState.clear(),Promise.resolve().then(()=>{this.recentlySyncedKeys.clear()}),this.hasReceivedFirstCommit||(this.hasReceivedFirstCommit=!0)}},this.config=e,this.transactions=new R1((n,r)=>n.compareCreatedAt(r)),this.syncedData=new R1(e.compare)}setDeps(e){this.collection=e.collection,this.lifecycle=e.lifecycle,this.changes=e.changes,this.indexes=e.indexes,this._events=e.events}get(e){const{optimisticDeletes:n,optimisticUpserts:r,syncedData:s}=this;if(!n.has(e))return r.has(e)?r.get(e):s.get(e)}has(e){const{optimisticDeletes:n,optimisticUpserts:r,syncedData:s}=this;return n.has(e)?!1:r.has(e)?!0:s.has(e)}*keys(){const{syncedData:e,optimisticDeletes:n,optimisticUpserts:r}=this;for(const s of e.keys())n.has(s)||(yield s);for(const s of r.keys())!e.has(s)&&!n.has(s)&&(yield s)}*values(){for(const e of this.keys()){const n=this.get(e);n!==void 0&&(yield n)}}*entries(){for(const e of this.keys()){const n=this.get(e);n!==void 0&&(yield[e,n])}}*[Symbol.iterator](){for(const[e,n]of this.entries())yield[e,n]}forEach(e){let n=0;for(const[r,s]of this.entries())e(s,r,n++)}map(e){const n=[];let r=0;for(const[s,a]of this.entries())n.push(e(a,s,r++));return n}isThisCollection(e){return e===this.collection}recomputeOptimisticState(e=!1){if(this.isCommittingSyncTransactions&&!e)return;const n=new Map(this.optimisticUpserts),r=new Set(this.optimisticDeletes);this.optimisticUpserts.clear(),this.optimisticDeletes.clear();const s=[];for(const u of this.transactions.values())["completed","failed"].includes(u.state)||s.push(u);for(const u of s)for(const f of u.mutations)if(this.isThisCollection(f.collection)&&f.optimistic)switch(f.type){case"insert":case"update":this.optimisticUpserts.set(f.key,f.modified),this.optimisticDeletes.delete(f.key);break;case"delete":this.optimisticUpserts.delete(f.key),this.optimisticDeletes.add(f.key);break}this.size=this.calculateSize();const a=[];this.collectOptimisticChanges(n,r,a);const l=a.filter(u=>!!(!this.recentlySyncedKeys.has(u.key)||e));if(this.pendingSyncedTransactions.length>0&&!e){const u=new Set;for(const d of this.pendingSyncedTransactions)for(const m of d.operations)u.add(m.key);const f=l.filter(d=>!(d.type==="delete"&&u.has(d.key)&&!s.some(p=>p.mutations.some(y=>this.isThisCollection(y.collection)&&y.key===d.key))));f.length>0&&this.indexes.updateIndexes(f),this.changes.emitEvents(f,e)}else l.length>0&&this.indexes.updateIndexes(l),this.changes.emitEvents(l,e)}calculateSize(){const e=this.syncedData.size,n=Array.from(this.optimisticDeletes).filter(s=>this.syncedData.has(s)&&!this.optimisticUpserts.has(s)).length,r=Array.from(this.optimisticUpserts.keys()).filter(s=>!this.syncedData.has(s)).length;return e-n+r}collectOptimisticChanges(e,n,r){const s=new Set([...e.keys(),...this.optimisticUpserts.keys(),...n,...this.optimisticDeletes]);for(const a of s){const l=this.get(a),u=this.getPreviousValue(a,e,n);u!==void 0&&l===void 0?r.push({type:"delete",key:a,value:u}):u===void 0&&l!==void 0?r.push({type:"insert",key:a,value:l}):u!==void 0&&l!==void 0&&u!==l&&r.push({type:"update",key:a,value:l,previousValue:u})}}getPreviousValue(e,n,r){if(!r.has(e))return n.has(e)?n.get(e):this.syncedData.get(e)}scheduleTransactionCleanup(e){if(e.state==="completed"){this.transactions.delete(e.id);return}e.isPersisted.promise.then(()=>{this.transactions.delete(e.id)}).catch(()=>{})}capturePreSyncVisibleState(){if(this.pendingSyncedTransactions.length===0)return;const e=new Set;for(const n of this.pendingSyncedTransactions)for(const r of n.operations)e.add(r.key);for(const n of e)this.recentlySyncedKeys.add(n);for(const n of e)if(!this.preSyncVisibleState.has(n)){const r=this.get(n);r!==void 0&&this.preSyncVisibleState.set(n,r)}}onTransactionStateChange(){this.changes.shouldBatchEvents=this.pendingSyncedTransactions.length>0,this.capturePreSyncVisibleState(),this.recomputeOptimisticState(!1)}cleanup(){this.syncedData.clear(),this.syncedMetadata.clear(),this.optimisticUpserts.clear(),this.optimisticDeletes.clear(),this.size=0,this.pendingSyncedTransactions=[],this.syncedKeys.clear(),this.hasReceivedFirstCommit=!1}}class xk{constructor(){this.listeners=new Map}on(e,n){return this.listeners.has(e)||this.listeners.set(e,new Set),this.listeners.get(e).add(n),()=>{this.listeners.get(e)?.delete(n)}}once(e,n){const r=this.on(e,s=>{n(s),r()});return r}off(e,n){this.listeners.get(e)?.delete(n)}waitFor(e,n){return new Promise((r,s)=>{let a;const l=this.on(e,u=>{a&&(clearTimeout(a),a=void 0),r(u),l()});n&&(a=setTimeout(()=>{a=void 0,l(),s(new Error(`Timeout waiting for event ${String(e)}`))},n))})}emitInner(e,n){this.listeners.get(e)?.forEach(r=>{try{r(n)}catch(s){queueMicrotask(()=>{throw s})}})}clearListeners(){this.listeners.clear()}}function z4(t,e){if(e.length===0||t.length===0)return;if(t.length===1){const{expression:r,compareOptions:s}=t[0];return(s.direction==="asc"?E1:lg)(r,new Jn(e[0]))}const n=[];for(let r=0;r<t.length&&r<e.length;r++){const s=t[r],a=e[r],l=[];for(let d=0;d<r;d++){const m=t[d],p=e[d];l.push(og(m.expression,new Jn(p)))}const f=(s.compareOptions.direction==="asc"?E1:lg)(s.expression,new Jn(a));if(l.length===0)n.push(f);else{const d=[...l,f];n.push(d.reduce((m,p)=>cg(m,p)))}}return n.length===1?n[0]:n.reduce((r,s)=>v4(r,s))}class P4 extends xk{constructor(e,n,r){super(),this.collection=e,this.callback=n,this.options=r,this.loadedInitialState=!1,this.skipFiltering=!1,this.snapshotSent=!1,this.loadedSubsets=[],this.sentKeys=new Set,this.limitedSnapshotRowCount=0,this._status="ready",this.pendingLoadSubsetPromises=new Set,this.isBufferingForTruncate=!1,this.truncateBuffer=[],this.pendingTruncateRefetches=new Set,r.onUnsubscribe&&this.on("unsubscribed",a=>r.onUnsubscribe(a)),r.whereExpression&&S4(r.whereExpression,this.collection);const s=a=>{n(a),this.trackSentKeys(a)};this.callback=s,this.filteredCallback=r.whereExpression?D4(this.callback,r):this.callback,this.truncateCleanup=this.collection.on("truncate",()=>{this.handleTruncate()})}get status(){return this._status}handleTruncate(){const e=[...this.loadedSubsets],n=this.collection._sync.syncLoadSubsetFn!==null;if(e.length===0||!n){this.snapshotSent=!1,this.loadedInitialState=!1,this.limitedSnapshotRowCount=0,this.lastSentKey=void 0,this.loadedSubsets=[];return}this.isBufferingForTruncate=!0,this.truncateBuffer=[],this.pendingTruncateRefetches.clear(),this.snapshotSent=!1,this.loadedInitialState=!1,this.limitedSnapshotRowCount=0,this.lastSentKey=void 0,this.loadedSubsets=[],queueMicrotask(()=>{if(this.isBufferingForTruncate){for(const r of e){const s=this.collection._sync.loadSubset(r);this.loadedSubsets.push(r),this.trackLoadSubsetPromise(s),s instanceof Promise&&(this.pendingTruncateRefetches.add(s),s.catch(()=>{}).finally(()=>{this.pendingTruncateRefetches.delete(s),this.checkTruncateRefetchComplete()}))}this.pendingTruncateRefetches.size===0&&this.flushTruncateBuffer()}})}checkTruncateRefetchComplete(){this.pendingTruncateRefetches.size===0&&this.isBufferingForTruncate&&this.flushTruncateBuffer()}flushTruncateBuffer(){this.isBufferingForTruncate=!1;const e=this.truncateBuffer.flat();e.length>0&&this.filteredCallback(e),this.truncateBuffer=[]}setOrderByIndex(e){this.orderByIndex=e}setStatus(e){if(this._status===e)return;const n=this._status;this._status=e,this.emitInner("status:change",{type:"status:change",subscription:this,previousStatus:n,status:e});const r=`status:${e}`;this.emitInner(r,{type:r,subscription:this,previousStatus:n,status:e})}trackLoadSubsetPromise(e){e instanceof Promise&&(this.pendingLoadSubsetPromises.add(e),this.setStatus("loadingSubset"),e.finally(()=>{this.pendingLoadSubsetPromises.delete(e),this.pendingLoadSubsetPromises.size===0&&this.setStatus("ready")}))}hasLoadedInitialState(){return this.loadedInitialState}hasSentAtLeastOneSnapshot(){return this.snapshotSent}emitEvents(e){const n=this.filterAndFlipChanges(e);this.isBufferingForTruncate?n.length>0&&this.truncateBuffer.push(n):this.filteredCallback(n)}requestSnapshot(e){if(this.loadedInitialState)return!1;const n={where:this.options.whereExpression,optimizedOnly:e?.optimizedOnly??!1};if(e){if("where"in e){const f=e.where;if(n.where){const d=n.where,m=cg(d,f);n.where=m}else n.where=f}}else this.loadedInitialState=!0;const r={where:n.where,subscription:this,orderBy:e?.orderBy,limit:e?.limit},s=this.collection._sync.loadSubset(r);this.loadedSubsets.push(r),(e?.trackLoadSubsetPromise??!0)&&this.trackLoadSubsetPromise(s);const l=this.collection.currentStateAsChanges(n);if(l===void 0)return!1;const u=l.filter(f=>!this.sentKeys.has(f.key));for(const f of u)this.sentKeys.add(f.key);return this.snapshotSent=!0,this.callback(u),!0}requestLimitedSnapshot({orderBy:e,limit:n,minValues:r,offset:s}){if(!n)throw new Error("limit is required");if(!this.orderByIndex)throw new Error("Ordered snapshot was requested but no index was found. You have to call setOrderByIndex before requesting an ordered snapshot.");const l=r?.[0],u=this.orderByIndex,f=this.options.whereExpression,d=f?Dl(f):void 0,m=R=>{if(this.sentKeys.has(R))return!1;const U=this.collection.get(R);return U===void 0?!1:d?.(U)??!0};let p=l;const y=[];let g=[];if(l!==void 0){const{expression:R}=e[0],U=this.collection.currentStateAsChanges({where:og(R,new Jn(l))});if(U){const q=U.map(j=>j.key).filter(j=>!this.sentKeys.has(j)&&m(j));g.push(...q);const K=u.take(n-g.length,l,m);g.push(...K)}else g=u.take(n,l,m)}else g=u.take(n,l,m);const v=()=>Math.max(n-y.length,0),w=()=>g.length===0,E=e[0].expression,S=E.type==="ref"?Yn(new Pn(E.path),!0):null;for(;v()>0&&!w();){const R=new Set;for(const U of g){const q=this.collection.get(U);y.push({type:"insert",key:U,value:q}),p=S?S(q):q,R.add(U)}g=u.take(v(),p,m)}const C=this.limitedSnapshotRowCount;for(const R of y)this.sentKeys.add(R.key);this.callback(y),this.limitedSnapshotRowCount+=y.length,y.length>0&&(this.lastSentKey=y[y.length-1].key);let T;if(r!==void 0&&r.length>0){const R=z4(e,r);if(R){const{expression:U}=e[0],q=r[0];let K;if(q instanceof Date){const j=new Date(q.getTime()+1);K=cg(_4(U,new Jn(q)),lg(U,new Jn(j)))}else K=og(U,new Jn(q));T={whereFrom:R,whereCurrent:K,lastKey:this.lastSentKey}}}const M={where:f,limit:n,orderBy:e,cursor:T,offset:s??C,subscription:this},I=this.collection._sync.loadSubset(M);this.loadedSubsets.push(M),this.trackLoadSubsetPromise(I)}filterAndFlipChanges(e){if(this.loadedInitialState||this.skipFiltering)return e;const n=this.isBufferingForTruncate,r=[];for(const s of e){let a=s;if(this.sentKeys.has(s.key)){if(s.type==="insert")continue;s.type==="delete"&&this.sentKeys.delete(s.key)}else{if(s.type==="update")a={...s,type:"insert",previousValue:void 0};else if(s.type==="delete"&&!n)continue;this.sentKeys.add(s.key)}r.push(a)}return r}trackSentKeys(e){if(!(this.loadedInitialState||this.skipFiltering))for(const n of e)n.type==="delete"?this.sentKeys.delete(n.key):this.sentKeys.add(n.key)}markAllStateAsSeen(){this.skipFiltering=!0}unsubscribe(){this.truncateCleanup?.(),this.truncateCleanup=void 0,this.isBufferingForTruncate=!1,this.truncateBuffer=[],this.pendingTruncateRefetches.clear();for(const e of this.loadedSubsets)this.collection._sync.unloadSubset(e);this.loadedSubsets=[],this.emitInner("unsubscribed",{type:"unsubscribed",subscription:this}),this.clearListeners()}}class B4{constructor(){this.activeSubscribersCount=0,this.changeSubscriptions=new Set,this.batchedEvents=[],this.shouldBatchEvents=!1}setDeps(e){this.lifecycle=e.lifecycle,this.sync=e.sync,this.events=e.events,this.collection=e.collection}emitEmptyReadyEvent(){for(const e of this.changeSubscriptions)e.emitEvents([])}emitEvents(e,n=!1){if(this.shouldBatchEvents&&!n){this.batchedEvents.push(...e);return}let r=e;if(n&&(this.batchedEvents.length>0&&(r=[...this.batchedEvents,...e]),this.batchedEvents=[],this.shouldBatchEvents=!1),r.length!==0)for(const s of this.changeSubscriptions)s.emitEvents(r)}subscribeChanges(e,n={}){this.addSubscriber();const r=new P4(this.collection,e,{...n,onUnsubscribe:()=>{this.removeSubscriber(),this.changeSubscriptions.delete(r)}});return n.includeInitialState?r.requestSnapshot({trackLoadSubsetPromise:!1}):n.includeInitialState===!1&&r.markAllStateAsSeen(),this.changeSubscriptions.add(r),r}addSubscriber(){const e=this.activeSubscribersCount;this.activeSubscribersCount++,this.lifecycle.cancelGCTimer(),(this.lifecycle.status==="cleaned-up"||this.lifecycle.status==="idle")&&this.sync.startSync(),this.events.emitSubscribersChange(this.activeSubscribersCount,e)}removeSubscriber(){const e=this.activeSubscribersCount;if(this.activeSubscribersCount--,this.activeSubscribersCount===0)this.lifecycle.startGCTimer();else if(this.activeSubscribersCount<0)throw new KO;this.events.emitSubscribersChange(this.activeSubscribersCount,e)}cleanup(){this.batchedEvents=[],this.shouldBatchEvents=!1}}const U4=t=>setTimeout(()=>{t({didTimeout:!0,timeRemaining:()=>50})},0),$4=t=>{clearTimeout(t)},q4=typeof window<"u"&&"requestIdleCallback"in window?(t,e)=>window.requestIdleCallback(t,e):(t,e)=>U4(t),cm=typeof window<"u"&&"cancelIdleCallback"in window?t=>window.cancelIdleCallback(t):$4;class F4{constructor(e,n){this.status="idle",this.hasBeenReady=!1,this.hasReceivedFirstCommit=!1,this.onFirstReadyCallbacks=[],this.gcTimeoutId=null,this.idleCallbackId=null,this.config=e,this.id=n}setDeps(e){this.indexes=e.indexes,this.events=e.events,this.changes=e.changes,this.sync=e.sync,this.state=e.state}validateStatusTransition(e,n){if(e===n)return;if(!{idle:["loading","error","cleaned-up"],loading:["ready","error","cleaned-up"],ready:["cleaned-up","error"],error:["cleaned-up","idle"],"cleaned-up":["loading","error"]}[e].includes(n))throw new HO(e,n,this.id)}setStatus(e,n=!1){if(e==="ready"&&!n)throw new lc(`You can't directly call "setStatus('ready'). You must use markReady instead.`);this.validateStatusTransition(this.status,e);const r=this.status;this.status=e,e==="ready"&&!this.indexes.isIndexesResolved&&this.indexes.resolveAllIndexes().catch(s=>{console.warn(`${this.config.id?`[${this.config.id}] `:""}Failed to resolve indexes:`,s)}),this.events.emitStatusChange(e,r)}validateCollectionUsable(e){switch(this.status){case"error":throw new VO(e,this.id);case"cleaned-up":this.sync.startSync();break}}markReady(){if(this.validateStatusTransition(this.status,"ready"),this.status==="loading"){if(this.setStatus("ready",!0),!this.hasBeenReady){this.hasBeenReady=!0,this.hasReceivedFirstCommit||(this.hasReceivedFirstCommit=!0);const e=[...this.onFirstReadyCallbacks];this.onFirstReadyCallbacks=[],e.forEach(n=>n())}this.changes.changeSubscriptions.size>0&&this.changes.emitEmptyReadyEvent()}}startGCTimer(){this.gcTimeoutId&&clearTimeout(this.gcTimeoutId);const e=this.config.gcTime??3e5;e!==0&&(this.gcTimeoutId=setTimeout(()=>{this.changes.activeSubscribersCount===0&&this.scheduleIdleCleanup()},e))}cancelGCTimer(){this.gcTimeoutId&&(clearTimeout(this.gcTimeoutId),this.gcTimeoutId=null),this.idleCallbackId!==null&&(cm(this.idleCallbackId),this.idleCallbackId=null)}scheduleIdleCleanup(){this.idleCallbackId!==null&&cm(this.idleCallbackId),this.idleCallbackId=q4(e=>{this.changes.activeSubscribersCount===0?this.performCleanup(e)&&(this.idleCallbackId=null):this.idleCallbackId=null},{timeout:1e3})}performCleanup(e){return!e||e.timeRemaining()>0||e.didTimeout?(this.sync.cleanup(),this.state.cleanup(),this.changes.cleanup(),this.indexes.cleanup(),this.gcTimeoutId&&(clearTimeout(this.gcTimeoutId),this.gcTimeoutId=null),this.hasBeenReady=!1,this.onFirstReadyCallbacks=[],this.setStatus("cleaned-up"),this.events.cleanup(),!0):(this.scheduleIdleCleanup(),!1)}onFirstReady(e){if(this.hasBeenReady){e();return}this.onFirstReadyCallbacks.push(e)}cleanup(){this.idleCallbackId!==null&&(cm(this.idleCallbackId),this.idleCallbackId=null),this.performCleanup()}}const Cy=Symbol("liveQueryInternal");class V4{constructor(e,n){this.preloadPromise=null,this.syncCleanupFn=null,this.syncLoadSubsetFn=null,this.syncUnloadSubsetFn=null,this.pendingLoadSubsetPromises=new Set,this.config=e,this.id=n,this.syncMode=e.syncMode??"eager"}setDeps(e){this.collection=e.collection,this.state=e.state,this.lifecycle=e.lifecycle,this._events=e.events}startSync(){if(!(this.lifecycle.status!=="idle"&&this.lifecycle.status!=="cleaned-up")){this.lifecycle.setStatus("loading");try{const e=H4(this.config.sync.sync({collection:this.collection,begin:()=>{this.state.pendingSyncedTransactions.push({committed:!1,operations:[],deletedKeys:new Set})},write:n=>{const r=this.state.pendingSyncedTransactions[this.state.pendingSyncedTransactions.length-1];if(!r)throw new l1;if(r.committed)throw new c1;let s;"key"in n?s=n.key:s=this.config.getKey(n.value);let a=n.type;if(n.type==="insert"){const u=this.state.syncedData.has(s),f=r.deletedKeys.has(s),d=r.truncate===!0;if(u&&!f&&!d){const m=this.state.syncedData.get(s);if(m!==void 0&&Pr(m,n.value))a="update";else{const y=this.config.utils[Cy];throw new YO(s,this.id,{hasCustomGetKey:y?.hasCustomGetKey??!1,hasJoins:y?.hasJoins??!1})}}}const l={...n,type:a,key:s};r.operations.push(l),a==="delete"&&r.deletedKeys.add(s)},commit:()=>{const n=this.state.pendingSyncedTransactions[this.state.pendingSyncedTransactions.length-1];if(!n)throw new fN;if(n.committed)throw new dN;n.committed=!0,this.state.commitPendingTransactions()},markReady:()=>{this.lifecycle.markReady()},truncate:()=>{const n=this.state.pendingSyncedTransactions[this.state.pendingSyncedTransactions.length-1];if(!n)throw new l1;if(n.committed)throw new c1;n.operations=[],n.deletedKeys.clear(),n.truncate=!0,n.optimisticSnapshot={upserts:new Map(this.state.optimisticUpserts),deletes:new Set(this.state.optimisticDeletes)}}}));if(this.syncCleanupFn=e?.cleanup??null,this.syncLoadSubsetFn=e?.loadSubset??null,this.syncUnloadSubsetFn=e?.unloadSubset??null,this.syncMode==="on-demand"&&!this.syncLoadSubsetFn)throw new oc(`Collection "${this.id}" is configured with syncMode "on-demand" but the sync function did not return a loadSubset handler. Either provide a loadSubset handler or use syncMode "eager".`)}catch(e){throw this.lifecycle.setStatus("error"),e}}}preload(){return this.preloadPromise?this.preloadPromise:(this.syncMode==="on-demand"&&console.warn(`${this.id?`[${this.id}] `:""}Calling .preload() on a collection with syncMode "on-demand" is a no-op. In on-demand mode, data is only loaded when queries request it. Instead, create a live query and call .preload() on that to load the specific data you need. See https://tanstack.com/blog/tanstack-db-0.5-query-driven-sync for more details.`),this.preloadPromise=new Promise((e,n)=>{if(this.lifecycle.status==="ready"){e();return}if(this.lifecycle.status==="error"){n(new GO);return}if(this.lifecycle.onFirstReady(()=>{e()}),this.lifecycle.status==="idle"||this.lifecycle.status==="cleaned-up")try{this.startSync()}catch(r){n(r);return}}),this.preloadPromise)}get isLoadingSubset(){return this.pendingLoadSubsetPromises.size>0}trackLoadPromise(e){const n=!this.isLoadingSubset;this.pendingLoadSubsetPromises.add(e),n&&this._events.emit("loadingSubset:change",{type:"loadingSubset:change",collection:this.collection,isLoadingSubset:!0,previousIsLoadingSubset:!1,loadingSubsetTransition:"start"}),e.finally(()=>{const r=this.pendingLoadSubsetPromises.size===1&&this.pendingLoadSubsetPromises.has(e);this.pendingLoadSubsetPromises.delete(e),r&&this._events.emit("loadingSubset:change",{type:"loadingSubset:change",collection:this.collection,isLoadingSubset:!1,previousIsLoadingSubset:!0,loadingSubsetTransition:"end"})})}loadSubset(e){if(this.syncMode==="eager")return!0;if(this.syncLoadSubsetFn){const n=this.syncLoadSubsetFn(e);if(n instanceof Promise)return this.trackLoadPromise(n),n}return!0}unloadSubset(e){this.syncUnloadSubsetFn&&this.syncUnloadSubsetFn(e)}cleanup(){try{this.syncCleanupFn&&(this.syncCleanupFn(),this.syncCleanupFn=null)}catch(e){queueMicrotask(()=>{if(e instanceof Error){const n=new f1(this.id,e);throw n.cause=e,n.stack=e.stack,n}else throw new f1(this.id,e)})}this.preloadPromise=null}}function H4(t){if(typeof t=="function")return{cleanup:t};if(typeof t=="object")return t}function wk(t){return typeof t=="function"&&t.prototype!==void 0&&t.prototype.constructor===t}async function G4(t){return wk(t)?t:await t()}class K4{constructor(e,n,r,s,a,l){this.id=e,this.expression=n,this.name=r,this.resolver=s,this.options=a,this.collectionEntries=l,this.indexPromise=null,this.resolvedIndex=null,wk(this.resolver)&&(this.resolvedIndex=new this.resolver(this.id,this.expression,this.name,this.options),this.collectionEntries&&this.resolvedIndex.build(this.collectionEntries))}async resolve(){return this.resolvedIndex?this.resolvedIndex:(this.indexPromise||(this.indexPromise=this.createIndex()),this.resolvedIndex=await this.indexPromise,this.resolvedIndex)}isResolved(){return this.resolvedIndex!==null}getResolved(){if(!this.resolvedIndex)throw new Error(`Index ${this.id} has not been resolved yet. Ensure collection is synced.`);return this.resolvedIndex}getId(){return this.id}getName(){return this.name}getExpression(){return this.expression}async createIndex(){const e=await G4(this.resolver);return new e(this.id,this.expression,this.name,this.options)}}class Z4{constructor(e,n){this.indexId=e,this.lazyIndex=n}get index(){return this.lazyIndex.getResolved()}get isReady(){return this.lazyIndex.isResolved()}async whenReady(){return await this.lazyIndex.resolve()}get id(){return this.indexId}get name(){return this.isReady?this.index.name:this.lazyIndex.getName()}get expression(){return this.lazyIndex.getExpression()}supports(e){return this.index.supports(e)}getStats(){return this.index.getStats()}matchesField(e){const n=this.expression;return n.type==="ref"&&n.path.length===e.length&&n.path.every((r,s)=>r===e[s])}get keyCount(){return this.index.keyCount}get indexedKeysSet(){return this.index.indexedKeysSet}get orderedEntriesArray(){return this.index.orderedEntriesArray}get valueMapData(){return this.index.valueMapData}equalityLookup(e){return this.index.equalityLookup?.(e)??new Set}rangeQuery(e){return this.index.rangeQuery?.(e)??new Set}inArrayLookup(e){return this.index.inArrayLookup?.(e)??new Set}_getLazyWrapper(){return this.lazyIndex}}class Q4{constructor(){this.lazyIndexes=new Map,this.resolvedIndexes=new Map,this.isIndexesResolved=!1,this.indexCounter=0}setDeps(e){this.state=e.state,this.lifecycle=e.lifecycle}createIndex(e,n={}){this.lifecycle.validateCollectionUsable("createIndex");const r=++this.indexCounter,s=y4(),a=e(s),l=un(a),u=n.indexType??ug,f=new K4(r,l,n.name,u,n.options,this.state.entries());if(this.lazyIndexes.set(r,f),u===ug)try{const d=f.getResolved();this.resolvedIndexes.set(r,d)}catch(d){console.warn("Failed to resolve BTreeIndex:",d)}else if(typeof u=="function"&&u.prototype)try{const d=f.getResolved();this.resolvedIndexes.set(r,d)}catch{this.resolveSingleIndex(r,f).catch(d=>{console.warn("Failed to resolve single index:",d)})}else this.isIndexesResolved&&this.resolveSingleIndex(r,f).catch(d=>{console.warn("Failed to resolve single index:",d)});return new Z4(r,f)}async resolveAllIndexes(){if(this.isIndexesResolved)return;const e=Array.from(this.lazyIndexes.entries()).map(async([n,r])=>{const s=await r.resolve();return s.build(this.state.entries()),this.resolvedIndexes.set(n,s),{indexId:n,resolvedIndex:s}});await Promise.all(e),this.isIndexesResolved=!0}async resolveSingleIndex(e,n){const r=await n.resolve();return r.build(this.state.entries()),this.resolvedIndexes.set(e,r),r}get indexes(){return this.resolvedIndexes}updateIndexes(e){for(const n of this.resolvedIndexes.values())for(const r of e)switch(r.type){case"insert":n.add(r.key,r.value);break;case"update":r.previousValue?n.update(r.key,r.previousValue,r.value):n.add(r.key,r.value);break;case"delete":n.remove(r.key,r.value);break}}cleanup(){this.lazyIndexes.clear(),this.resolvedIndexes.clear()}}var J4={};const Y4=new Set(["find","findLast","findIndex","findLastIndex","filter","map","flatMap","forEach","some","every","reduce","reduceRight"]),W4=new Set(["pop","push","shift","unshift","splice","sort","reverse","fill","copyWithin"]),X4=new Set(["set","delete","clear","add"]),eM=new Set(["entries","keys","values","forEach"]);function Ty(t){return t!==null&&typeof t=="object"&&!(t instanceof Date)&&!(t instanceof RegExp)&&!_f(t)}function tM(t,e,n,r){if(Y4.has(t))return function(...s){const a=s[0];if(typeof a!="function")return e.apply(n.copy_,s);const l=(d,m)=>{if(Ty(d)){const p={tracker:n,prop:String(m)},{proxy:y}=r(d,p);return y}return d},u=function(d,m,p){const y=l(d,m);return a.call(this,y,m,p)};if(t==="reduce"||t==="reduceRight"){const d=function(m,p,y,g){const v=l(p,y);return a.call(this,m,v,y,g)};return e.apply(n.copy_,[d,...s.slice(1)])}const f=e.apply(n.copy_,[u,...s.slice(1)]);if((t==="find"||t==="findLast")&&f&&typeof f=="object"){const d=n.copy_.indexOf(f);if(d!==-1)return l(f,d)}return t==="filter"&&Array.isArray(f)?f.map(d=>{const m=n.copy_.indexOf(d);return m!==-1?l(d,m):d}):f}}function nM(t,e){return function(){const n=t.copy_;let r=0;return{next(){if(r>=n.length)return{done:!0,value:void 0};const s=n[r];let a=s;if(Ty(s)){const l={tracker:t,prop:String(r)},{proxy:u}=e(s,l);a=u}return r++,{done:!1,value:a}},[Symbol.iterator](){return this}}}}function O1(t,e,n){return function(...r){const s=t.apply(e.copy_,r);return n(e),s}}function rM(t,e,n,r,s,a,l){if(eM.has(t)||e===Symbol.iterator)return function(...f){const d=n.apply(s.copy_,f);if(t==="forEach"){const p=f[0];if(typeof p=="function"){const y=function(g,v,w){const E=p.call(this,g,v,w);return l(s),E};return n.apply(r,[y,...f.slice(1)])}}if(t==="entries"||t==="values"||t===Symbol.iterator.toString()||e===Symbol.iterator){const p=d,y=new Map;if(t==="values"&&r instanceof Map)for(const[v,w]of s.copy_.entries())y.set(w,v);const g=new Map;if(r instanceof Set)for(const v of s.copy_.values())g.set(v,v);return{next(){const v=p.next();if(!v.done&&v.value&&typeof v.value=="object"){if(t==="entries"&&Array.isArray(v.value)&&v.value.length===2){if(v.value[1]&&typeof v.value[1]=="object"){const w=v.value[0],E={tracker:s,prop:w,updateMap:C=>{s.copy_ instanceof Map&&s.copy_.set(w,C)}},{proxy:S}=a(v.value[1],E);v.value[1]=S}}else if(t==="values"||t===Symbol.iterator.toString()||e===Symbol.iterator)if(t==="values"&&r instanceof Map){const w=y.get(v.value);if(w!==void 0){const E={tracker:s,prop:w,updateMap:C=>{s.copy_ instanceof Map&&s.copy_.set(w,C)}},{proxy:S}=a(v.value,E);v.value=S}}else if(r instanceof Set){const w=v.value,E={tracker:s,prop:w,updateSet:C=>{s.copy_ instanceof Set&&(s.copy_.delete(w),s.copy_.add(C),g.set(w,C))}},{proxy:S}=a(v.value,E);v.value=S}else{const w=Symbol("iterator-value"),{proxy:E}=a(v.value,{tracker:s,prop:w});v.value=E}}return v},[Symbol.iterator](){return this}}}return d}}function Xe(...t){const e=typeof window<"u"&&typeof localStorage<"u";e&&localStorage.getItem("DEBUG")==="true"?console.log("[proxy]",...t):!e&&typeof process<"u"&&J4.DEBUG==="true"&&console.log("[proxy]",...t)}function Es(t,e=new WeakMap){if(t==null||typeof t!="object")return t;if(e.has(t))return e.get(t);if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp)return new RegExp(t.source,t.flags);if(Array.isArray(t)){const s=[];return e.set(t,s),t.forEach((a,l)=>{s[l]=Es(a,e)}),s}if(ArrayBuffer.isView(t)&&!(t instanceof DataView)){const s=Object.getPrototypeOf(t).constructor,a=new s(t.length);e.set(t,a);for(let l=0;l<t.length;l++)a[l]=t[l];return a}if(t instanceof Map){const s=new Map;return e.set(t,s),t.forEach((a,l)=>{s.set(l,Es(a,e))}),s}if(t instanceof Set){const s=new Set;return e.set(t,s),t.forEach(a=>{s.add(Es(a,e))}),s}if(_f(t))return t;const n={};e.set(t,n);for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(n[s]=Es(t[s],e));const r=Object.getOwnPropertySymbols(t);for(const s of r)n[s]=Es(t[s],e);return n}let N1=0;function sM(){return N1+=1,N1}function Ay(t,e){const n=new Map;function r(p,y){if(Xe("Object ID:",p.constructor.name),n.has(p))return n.get(p);{const g=Ay(p,y);return n.set(p,g),g}}const s=new Map,a={copy_:Es(t),originalObject:Es(t),proxyCount:sM(),modified:!1,assigned_:{},parent:e,target:t};Xe("createChangeProxy called for target",t,a.proxyCount);function l(p){p.modified||(p.modified=!0),p.parent&&(Xe("propagating change to parent"),"updateMap"in p.parent?p.parent.updateMap(p.copy_):"updateSet"in p.parent?p.parent.updateSet(p.copy_):(p.parent.tracker.copy_[p.parent.prop]=p.copy_,p.parent.tracker.assigned_[p.parent.prop]=!0),l(p.parent.tracker))}function u(p){if(Xe("checkIfReverted called with assigned keys:",Object.keys(p.assigned_)),Object.keys(p.assigned_).length===0&&Object.getOwnPropertySymbols(p.assigned_).length===0)return Xe("No assigned properties, returning true"),!0;for(const g in p.assigned_)if(p.assigned_[g]===!0){const v=p.copy_[g],w=p.originalObject[g];if(Xe(`Checking property ${String(g)}, current:`,v,"original:",w),!Pr(v,w))return Xe(`Property ${String(g)} is different, returning false`),!1}else if(p.assigned_[g]===!1)return Xe(`Property ${String(g)} was deleted, returning false`),!1;const y=Object.getOwnPropertySymbols(p.assigned_);for(const g of y)if(p.assigned_[g]===!0){const v=p.copy_[g],w=p.originalObject[g];if(!Pr(v,w))return Xe("Symbol property is different, returning false"),!1}else if(p.assigned_[g]===!1)return Xe("Symbol property was deleted, returning false"),!1;return Xe("All properties match original values, returning true"),!0}function f(p,y){Xe("checkParentStatus called for child prop:",y);const g=u(p);Xe("Parent checkIfReverted returned:",g),g&&(Xe("Parent is fully reverted, clearing tracking"),p.modified=!1,p.assigned_={},p.parent&&(Xe("Continuing up the parent chain"),f(p.parent.tracker,p.parent.prop)))}function d(p){if(Xe("createObjectProxy",p),s.has(p))return Xe("proxyCache found match"),s.get(p);const y=new Proxy(p,{get(g,v){Xe("get",g,v);const w=a.copy_[v]??a.originalObject[v],E=a.originalObject[v];if(Xe("value (at top of proxy get)",w),Object.getOwnPropertyDescriptor(g,v)?.get)return w;if(typeof w=="function"){if(Array.isArray(g)){const C=v.toString();if(W4.has(C))return O1(w,a,l);const T=tM(C,w,a,r);if(T)return T;if(v===Symbol.iterator)return nM(a,r)}if(g instanceof Map||g instanceof Set){const C=v.toString();if(X4.has(C))return O1(w,a,l);const T=rM(C,v,w,g,a,r,l);if(T)return T}return w.bind(g)}if(Ty(w)){const C={tracker:a,prop:String(v)},{proxy:T}=r(E,C);return s.set(w,T),T}return w},set(g,v,w){const E=a.copy_[v];if(Xe(`set called for property ${String(v)}, current:`,E,"new:",w),Pr(E,w))Xe("Value unchanged, not tracking");else{const S=a.originalObject[v],C=Pr(w,S);if(Xe("value:",w,"original:",S,"isRevertToOriginal:",C),C){Xe(`Reverting property ${String(v)} to original value`),delete a.assigned_[v.toString()],Xe(`Updating copy with original value for ${String(v)}`),a.copy_[v]=Es(S),Xe("Checking if all properties reverted");const T=u(a);Xe("All reverted:",T),T?(Xe("All properties reverted, clearing tracking"),a.modified=!1,a.assigned_={},e&&(Xe("Updating parent for property:",e.prop),f(e.tracker,e.prop))):(Xe("Some properties still changed, keeping modified flag"),a.modified=!0)}else Xe(`Setting new value for property ${String(v)}`),a.copy_[v]=w,a.assigned_[v.toString()]=!0,Xe("Marking object and ancestors as modified",a),l(a)}return!0},defineProperty(g,v,w){const E=Reflect.defineProperty(g,v,w);return E&&"value"in w&&(a.copy_[v]=Es(w.value),a.assigned_[v.toString()]=!0,l(a)),E},getOwnPropertyDescriptor(g,v){return Reflect.getOwnPropertyDescriptor(g,v)},preventExtensions(g){return Reflect.preventExtensions(g)},isExtensible(g){return Reflect.isExtensible(g)},deleteProperty(g,v){Xe("deleteProperty",g,v);const w=typeof v=="symbol"?v.toString():v;if(w in g){const E=w in a.originalObject,S=Reflect.deleteProperty(g,v);return S&&(E?(a.assigned_[w]=!1,l(a)):(delete a.assigned_[w],Object.keys(a.assigned_).length===0&&Object.getOwnPropertySymbols(a.assigned_).length===0?a.modified=!1:a.modified=!0)),S}return!0}});return s.set(p,y),y}return{proxy:d(a.copy_),getChanges:()=>{if(Xe("getChanges called, modified:",a.modified),Xe(a),!a.modified)return Xe("Object not modified, returning empty object"),{};if(typeof a.copy_!="object"||Array.isArray(a.copy_)||Object.keys(a.assigned_).length===0)return a.copy_;const p={};for(const y in a.copy_)a.assigned_[y]===!0&&y in a.copy_&&(p[y]=a.copy_[y]);return Xe("Returning copy:",p),p}}}function iM(t){const e=t.map(n=>Ay(n));return{proxies:e.map(n=>n.proxy),getChanges:()=>e.map(n=>n.getChanges())}}function aM(t,e){const{proxy:n,getChanges:r}=Ay(t);return e(n),r()}function oM(t,e){const{proxies:n,getChanges:r}=iM(t);return e(n),r()}function lM(){let t,e,n=!0;return{promise:new Promise((s,a)=>{t=l=>{n=!1,s(l)},e=l=>{n=!1,a(l)}}),resolve:t,reject:e,isPending:()=>n}}function cM(t){return typeof t=="object"&&t!==null&&typeof t.hasPendingGraphRun=="function"}class uM{constructor(){this.contexts=new Map,this.clearListeners=new Set}getOrCreateContext(e){let n=this.contexts.get(e);return n||(n={queue:[],jobs:new Map,dependencies:new Map,completed:new Set},this.contexts.set(e,n)),n}schedule({contextId:e,jobId:n,dependencies:r,run:s}){if(typeof e>"u"){s();return}const a=this.getOrCreateContext(e);if(a.jobs.has(n)||a.queue.push(n),a.jobs.set(n,s),r){const l=new Set(r);l.delete(n),a.dependencies.set(n,l)}else a.dependencies.has(n)||a.dependencies.set(n,new Set);a.completed.delete(n)}flush(e){const n=this.contexts.get(e);if(!n)return;const{queue:r,jobs:s,dependencies:a,completed:l}=n;for(;r.length>0;){let u=!1;const f=r.length;for(let d=0;d<f;d++){const m=r.shift(),p=s.get(m);if(!p){a.delete(m),l.delete(m);continue}const y=a.get(m);let g=!y;if(y){g=!0;for(const v of y){if(v===m)continue;const w=cM(v)&&v.hasPendingGraphRun(e);if(s.has(v)&&!l.has(v)||!s.has(v)&&w){g=!1;break}}}g?(s.delete(m),a.delete(m),p(),l.add(m),u=!0):r.push(m)}if(!u)throw new Error(`Scheduler detected unresolved dependencies for context ${String(e)}.`)}this.contexts.delete(e)}flushAll(){for(const e of Array.from(this.contexts.keys()))this.flush(e)}clear(e){this.contexts.delete(e),this.clearListeners.forEach(n=>n(e))}onClear(e){return this.clearListeners.add(e),()=>this.clearListeners.delete(e)}hasPendingJobs(e){const n=this.contexts.get(e);return!!n&&n.jobs.size>0}clearJob(e,n){const r=this.contexts.get(e);r&&(r.jobs.delete(n),r.dependencies.delete(n),r.completed.delete(n),r.queue=r.queue.filter(s=>s!==n),r.jobs.size===0&&this.contexts.delete(e))}}const Sf=new uM,kf=[];let Jl=[],fM=0;function dM(t,e){switch(`${t.type}-${e.type}`){case"insert-update":return{...t,type:"insert",original:{},modified:e.modified,changes:{...t.changes,...e.changes},key:t.key,globalKey:t.globalKey,metadata:e.metadata??t.metadata,syncMetadata:{...t.syncMetadata,...e.syncMetadata},mutationId:e.mutationId,updatedAt:e.updatedAt};case"insert-delete":return null;case"update-delete":return e;case"update-update":return{...e,original:t.original,changes:{...t.changes,...e.changes},metadata:e.metadata??t.metadata,syncMetadata:{...t.syncMetadata,...e.syncMetadata}};case"delete-delete":case"insert-insert":return e;default:{const n=`${t.type}-${e.type}`;throw new Error(`Unhandled mutation combination: ${n}`)}}}function Du(t){const e=new gM(t);return kf.push(e),e}function tf(){if(Jl.length>0)return Jl.slice(-1)[0]}function hM(t){Sf.clear(t.id),Jl.push(t)}function pM(t){try{Sf.flush(t.id)}finally{Jl=Jl.filter(e=>e.id!==t.id)}}function mM(t){const e=kf.findIndex(n=>n.id===t.id);e!==-1&&kf.splice(e,1)}class gM{constructor(e){if(typeof e.mutationFn>"u")throw new oN;this.id=e.id??crypto.randomUUID(),this.mutationFn=e.mutationFn,this.state="pending",this.mutations=[],this.isPersisted=lM(),this.autoCommit=e.autoCommit??!0,this.createdAt=new Date,this.sequenceNumber=fM++,this.metadata=e.metadata??{}}setState(e){this.state=e,(e==="completed"||e==="failed")&&mM(this)}mutate(e){if(this.state!=="pending")throw new lN;hM(this);try{e()}finally{pM(this)}return this.autoCommit&&this.commit().catch(()=>{}),this}applyMutations(e){for(const n of e){const r=this.mutations.findIndex(s=>s.globalKey===n.globalKey);if(r>=0){const s=this.mutations[r],a=dM(s,n);a===null?this.mutations.splice(r,1):this.mutations[r]=a}else this.mutations.push(n)}}rollback(e){const n=e?.isSecondaryRollback??!1;if(this.state==="completed")throw new cN;if(this.setState("failed"),!n){const r=new Set;this.mutations.forEach(s=>r.add(s.globalKey));for(const s of kf)s.state==="pending"&&s.mutations.some(a=>r.has(a.globalKey))&&s.rollback({isSecondaryRollback:!0})}return this.isPersisted.reject(this.error?.error),this.touchCollection(),this}touchCollection(){const e=new Set;for(const n of this.mutations)e.has(n.collection.id)||(n.collection._state.onTransactionStateChange(),n.collection._state.pendingSyncedTransactions.length>0&&n.collection._state.commitPendingTransactions(),e.add(n.collection.id))}async commit(){if(this.state!=="pending")throw new uN;if(this.setState("persisting"),this.mutations.length===0)return this.setState("completed"),this.isPersisted.resolve(this),this;try{await this.mutationFn({transaction:this}),this.setState("completed"),this.touchCollection(),this.isPersisted.resolve(this)}catch(e){const n=e instanceof Error?e:new Error(String(e));throw this.error={message:n.message,error:n},this.rollback(),n}return this}compareCreatedAt(e){const n=this.createdAt.getTime()-e.createdAt.getTime();return n!==0?n:this.sequenceNumber-e.sequenceNumber}}class yM{constructor(e,n){this.insert=(r,s)=>{this.lifecycle.validateCollectionUsable("insert");const a=this.state,l=tf();if(!l&&!this.config.onInsert)throw new sN;const u=Array.isArray(r)?r:[r],f=[],d=new Set;if(u.forEach(m=>{const p=this.validateData(m,"insert"),y=this.config.getKey(p);if(this.state.has(y)||d.has(y))throw new JO(y);d.add(y);const g=this.generateGlobalKey(y,m),v={mutationId:crypto.randomUUID(),original:{},modified:p,changes:Object.fromEntries(Object.keys(m).map(w=>[w,p[w]])),globalKey:g,key:y,metadata:s?.metadata,syncMetadata:this.config.sync.getSyncMetadata?.()||{},optimistic:s?.optimistic??!0,type:"insert",createdAt:new Date,updatedAt:new Date,collection:this.collection};f.push(v)}),l)return l.applyMutations(f),a.transactions.set(l.id,l),a.scheduleTransactionCleanup(l),a.recomputeOptimisticState(!0),l;{const m=Du({mutationFn:async p=>await this.config.onInsert({transaction:p.transaction,collection:this.collection})});return m.applyMutations(f),m.commit().catch(()=>{}),a.transactions.set(m.id,m),a.scheduleTransactionCleanup(m),a.recomputeOptimisticState(!0),m}},this.delete=(r,s)=>{const a=this.state;this.lifecycle.validateCollectionUsable("delete");const l=tf();if(!l&&!this.config.onDelete)throw new aN;if(Array.isArray(r)&&r.length===0)throw new nN;const u=Array.isArray(r)?r:[r],f=[];for(const m of u){if(!this.state.has(m))throw new rN(m);const p=this.generateGlobalKey(m,this.state.get(m)),y={mutationId:crypto.randomUUID(),original:this.state.get(m),modified:this.state.get(m),changes:this.state.get(m),globalKey:p,key:m,metadata:s?.metadata,syncMetadata:a.syncedMetadata.get(m)||{},optimistic:s?.optimistic??!0,type:"delete",createdAt:new Date,updatedAt:new Date,collection:this.collection};f.push(y)}if(l)return l.applyMutations(f),a.transactions.set(l.id,l),a.scheduleTransactionCleanup(l),a.recomputeOptimisticState(!0),l;const d=Du({autoCommit:!0,mutationFn:async m=>this.config.onDelete({transaction:m.transaction,collection:this.collection})});return d.applyMutations(f),d.commit().catch(()=>{}),a.transactions.set(d.id,d),a.scheduleTransactionCleanup(d),a.recomputeOptimisticState(!0),d},this.id=n,this.config=e}setDeps(e){this.lifecycle=e.lifecycle,this.state=e.state,this.collection=e.collection}ensureStandardSchema(e){if(e&&"~standard"in e)return e;throw new FO}validateData(e,n,r){if(!this.config.schema)return e;const s=this.ensureStandardSchema(this.config.schema);if(n==="update"&&r){const l=this.state.get(r);if(l&&e&&typeof e=="object"&&typeof l=="object"){const u=Object.assign({},l,e),f=s["~standard"].validate(u);if(f instanceof Promise)throw new o1;if("issues"in f&&f.issues){const y=f.issues.map(g=>({message:g.message,path:g.path?.map(v=>String(v))}));throw new a1(n,y)}const d=f.value,m=Object.keys(e);return Object.fromEntries(m.map(y=>[y,d[y]]))}}const a=s["~standard"].validate(e);if(a instanceof Promise)throw new o1;if("issues"in a&&a.issues){const l=a.issues.map(u=>({message:u.message,path:u.path?.map(f=>String(f))}));throw new a1(n,l)}return a.value}generateGlobalKey(e,n){if(typeof e!="string"&&typeof e!="number")throw typeof e>"u"?new ZO(n):new QO(e,n);return`KEY::${this.id}/${e}`}update(e,n,r){if(typeof e>"u")throw new WO;const s=this.state;this.lifecycle.validateCollectionUsable("update");const a=tf();if(!a&&!this.config.onUpdate)throw new iN;const l=Array.isArray(e),u=l?e:[e];if(l&&u.length===0)throw new XO;const f=typeof n=="function"?n:r,d=typeof n=="function"?{}:n,m=u.map(v=>{const w=this.state.get(v);if(!w)throw new eN(v);return w});let p;l?p=oM(m,f):p=[aM(m[0],f)];const y=u.map((v,w)=>{const E=p[w];if(!E||Object.keys(E).length===0)return null;const S=m[w],C=this.validateData(E,"update",v),T=Object.assign({},S,C),M=this.config.getKey(S),I=this.config.getKey(T);if(M!==I)throw new tN(M,I);const R=this.generateGlobalKey(I,T);return{mutationId:crypto.randomUUID(),original:S,modified:T,changes:Object.fromEntries(Object.keys(E).map(U=>[U,T[U]])),globalKey:R,key:v,metadata:d.metadata,syncMetadata:s.syncedMetadata.get(v)||{},optimistic:d.optimistic??!0,type:"update",createdAt:new Date,updatedAt:new Date,collection:this.collection}}).filter(Boolean);if(y.length===0){const v=Du({mutationFn:async()=>{}});return v.commit().catch(()=>{}),s.scheduleTransactionCleanup(v),v}if(a)return a.applyMutations(y),s.transactions.set(a.id,a),s.scheduleTransactionCleanup(a),s.recomputeOptimisticState(!0),a;const g=Du({mutationFn:async v=>this.config.onUpdate({transaction:v.transaction,collection:this.collection})});return g.applyMutations(y),g.commit().catch(()=>{}),s.transactions.set(g.id,g),s.scheduleTransactionCleanup(g),s.recomputeOptimisticState(!0),g}}class bM extends xk{constructor(){super()}setDeps(e){this.collection=e.collection}emit(e,n){this.emitInner(e,n)}emitStatusChange(e,n){this.emit("status:change",{type:"status:change",collection:this.collection,previousStatus:n,status:e});const r=`status:${e}`;this.emit(r,{type:r,collection:this.collection,previousStatus:n,status:e})}emitSubscribersChange(e,n){this.emit("subscribers:change",{type:"subscribers:change",collection:this.collection,previousSubscriberCount:n,subscriberCount:e})}cleanup(){this.clearListeners()}}function Sk(t){const e=new Ry(t);return t.utils?e.utils=t.utils:e.utils={},e}class Ry{constructor(e){if(this.utils={},this.insert=(n,r)=>this._mutations.insert(n,r),this.delete=(n,r)=>this._mutations.delete(n,r),!e)throw new $O;if(!e.sync)throw new qO;e.id?this.id=e.id:this.id=crypto.randomUUID(),this.config={...e,autoIndex:e.autoIndex??"eager"},this._changes=new B4,this._events=new bM,this._indexes=new Q4,this._lifecycle=new F4(e,this.id),this._mutations=new yM(e,this.id),this._state=new L4(e),this._sync=new V4(e,this.id),this.comparisonOpts=_M(e),this._changes.setDeps({collection:this,lifecycle:this._lifecycle,sync:this._sync,events:this._events}),this._events.setDeps({collection:this}),this._indexes.setDeps({state:this._state,lifecycle:this._lifecycle}),this._lifecycle.setDeps({changes:this._changes,events:this._events,indexes:this._indexes,state:this._state,sync:this._sync}),this._mutations.setDeps({collection:this,lifecycle:this._lifecycle,state:this._state}),this._state.setDeps({collection:this,lifecycle:this._lifecycle,changes:this._changes,indexes:this._indexes,events:this._events}),this._sync.setDeps({collection:this,state:this._state,lifecycle:this._lifecycle,events:this._events}),e.startSync===!0&&this._sync.startSync()}get status(){return this._lifecycle.status}get subscriberCount(){return this._changes.activeSubscribersCount}onFirstReady(e){return this._lifecycle.onFirstReady(e)}isReady(){return this._lifecycle.status==="ready"}get isLoadingSubset(){return this._sync.isLoadingSubset}startSyncImmediate(){this._sync.startSync()}preload(){return this._sync.preload()}get(e){return this._state.get(e)}has(e){return this._state.has(e)}get size(){return this._state.size}*keys(){yield*this._state.keys()}*values(){yield*this._state.values()}*entries(){yield*this._state.entries()}*[Symbol.iterator](){yield*this._state[Symbol.iterator]()}forEach(e){return this._state.forEach(e)}map(e){return this._state.map(e)}getKeyFromItem(e){return this.config.getKey(e)}createIndex(e,n={}){return this._indexes.createIndex(e,n)}get indexes(){return this._indexes.indexes}validateData(e,n,r){return this._mutations.validateData(e,n,r)}get compareOptions(){return{...this.comparisonOpts}}update(e,n,r){return this._mutations.update(e,n,r)}get state(){const e=new Map;for(const[n,r]of this.entries())e.set(n,r);return e}stateWhenReady(){return this.size>0||this.isReady()?Promise.resolve(this.state):this.preload().then(()=>this.state)}get toArray(){return Array.from(this.values())}toArrayWhenReady(){return this.size>0||this.isReady()?Promise.resolve(this.toArray):this.preload().then(()=>this.toArray)}currentStateAsChanges(e={}){return M4(this,e)}subscribeChanges(e,n={}){return this._changes.subscribeChanges(e,n)}on(e,n){return this._events.on(e,n)}once(e,n){return this._events.once(e,n)}off(e,n){this._events.off(e,n)}waitFor(e,n){return this._events.waitFor(e,n)}async cleanup(){return this._lifecycle.cleanup(),Promise.resolve()}}function _M(t){if(t.defaultStringCollation){const e=t.defaultStringCollation;return{stringSort:e.stringSort??"locale",locale:e.stringSort==="locale"?e.locale:void 0,localeOptions:e.stringSort==="locale"?e.localeOptions:void 0}}else return{stringSort:"locale"}}class Jt{constructor(e={}){this.query={},this.query={...e}}_createRefForSource(e,n){let r;try{r=Object.keys(e)}catch{const u=e===null?"null":"undefined";throw new Iu(n,u)}if(Array.isArray(e))throw new Iu(n,"array");if(r.length!==1)throw r.length===0?new Iu(n,"empty object"):r.every(u=>!isNaN(Number(u)))?new Iu(n,"string"):new hN(n);const s=r[0],a=e[s];let l;if(a instanceof Ry)l=new ro(a,s);else if(a instanceof Jt){const u=a._getQuery();if(!u.from)throw new pN(n);l=new Or(u,s)}else throw new mN(s);return[s,l]}from(e){const[,n]=this._createRefForSource(e,"from clause");return new Jt({...this.query,from:n})}join(e,n,r="left"){const[s,a]=this._createRefForSource(e,"join clause"),u=[...this._getCurrentAliases(),s],f=ja(u),d=n(f);let m,p;if(d.type==="func"&&d.name==="eq"&&d.args.length===2)m=d.args[0],p=d.args[1];else throw new gN;const y={from:a,type:r,left:m,right:p},g=this.query.join||[];return new Jt({...this.query,join:[...g,y]})}leftJoin(e,n){return this.join(e,n,"left")}rightJoin(e,n){return this.join(e,n,"right")}innerJoin(e,n){return this.join(e,n,"inner")}fullJoin(e,n){return this.join(e,n,"full")}where(e){const n=this._getCurrentAliases(),r=ja(n),s=e(r),a=this.query.where||[];return new Jt({...this.query,where:[...a,s]})}having(e){const n=this._getCurrentAliases(),r=ja(n),s=e(r),a=this.query.having||[];return new Jt({...this.query,having:[...a,s]})}select(e){const n=this._getCurrentAliases(),r=ja(n),s=e(r),a=kk(s);return new Jt({...this.query,select:a,fnSelect:void 0})}orderBy(e,n="asc"){const r=this._getCurrentAliases(),s=ja(r),a=e(s),l=typeof n=="string"?{direction:n,nulls:"first"}:{direction:n.direction??"asc",nulls:n.nulls??"first",stringSort:n.stringSort,locale:n.stringSort==="locale"?n.locale:void 0,localeOptions:n.stringSort==="locale"?n.localeOptions:void 0},u=m=>({expression:un(m),compareOptions:l}),f=Array.isArray(a)?a.map(m=>u(m)):[u(a)],d=this.query.orderBy||[];return new Jt({...this.query,orderBy:[...d,...f]})}groupBy(e){const n=this._getCurrentAliases(),r=ja(n),s=e(r),a=Array.isArray(s)?s.map(u=>un(u)):[un(s)],l=this.query.groupBy||[];return new Jt({...this.query,groupBy:[...l,...a]})}limit(e){return new Jt({...this.query,limit:e})}offset(e){return new Jt({...this.query,offset:e})}distinct(){return new Jt({...this.query,distinct:!0})}findOne(){return new Jt({...this.query,singleResult:!0})}_getCurrentAliases(){const e=[];if(this.query.from&&e.push(this.query.from.alias),this.query.join)for(const n of this.query.join)e.push(n.from.alias);return e}get fn(){const e=this;return{select(n){return new Jt({...e.query,select:void 0,fnSelect:n})},where(n){return new Jt({...e.query,fnWhere:[...e.query.fnWhere||[],n]})},having(n){return new Jt({...e.query,fnHaving:[...e.query.fnHaving||[],n]})}}}_getQuery(){if(!this.query.from)throw new yN;return this.query}}function vM(t){return t===void 0?un(null):t instanceof hk||t instanceof Ir||t instanceof Pn||t instanceof Jn?t:un(t)}function xM(t){return t!==null&&typeof t=="object"&&!gy(t)&&!t.__refProxy}function kk(t){if(!xM(t))return vM(t);const e={};for(const[n,r]of Object.entries(t)){if(typeof n=="string"&&n.startsWith("__SPREAD_SENTINEL__")){e[n]=r;continue}e[n]=kk(r)}return e}function wM(t){const e=t(new Jt);return Ek(e)}function Ek(t){return t._getQuery()}function SM(t){const e=kM(t);let n=t,r,s=0;const a=10;for(;s<a&&!Pr(n,r);)r=n,n=dg(n),s++;return{optimizedQuery:Ck(n),sourceWhereClauses:e}}function kM(t){const e=new Map;if(!t.where||t.where.length===0)return e;const r=pg(t.where).map(a=>Tk(a)),s=Ak(r);for(const[a,l]of s.singleSource)EM(t,a)&&e.set(a,l);return e}function EM(t,e){if(t.from.alias===e)return t.from.type==="collectionRef";if(t.join){for(const n of t.join)if(n.from.alias===e)return n.from.type==="collectionRef"}return!1}function dg(t){const e={...t,from:t.from.type==="queryRef"?new Or(dg(t.from.query),t.from.alias):t.from,join:t.join?.map(n=>({...n,from:n.from.type==="queryRef"?new Or(dg(n.from.query),n.from.alias):n.from}))};return CM(e)}function CM(t){if(!t.where||t.where.length===0)return t;if(!t.join||t.join.length===0){if(t.where.length>1){const u=pg(t.where),f=Ef(u);return{...t,where:[f]}}return t}const e=t.where.filter(u=>!i1(u)),r=pg(e).map(u=>Tk(u)),s=Ak(r),a=AM(t,s),l=t.where.filter(u=>i1(u));return l.length>0&&(a.where=[...a.where||[],...l]),a}function Ck(t){return{...t,from:hg(t.from),join:t.join?.map(e=>({...e,from:hg(e.from)}))}}function hg(t){if(t.type==="collectionRef")return t;const e=Ck(t.query);if(TM(e)){const n=hg(e.from);return n.type==="collectionRef"?new ro(n.collection,t.alias):new Or(n.query,t.alias)}return new Or(e,t.alias)}function TM(t){return(!t.where||t.where.length===0)&&!t.select&&(!t.groupBy||t.groupBy.length===0)&&(!t.having||t.having.length===0)&&(!t.orderBy||t.orderBy.length===0)&&(!t.join||t.join.length===0)&&t.limit===void 0&&t.offset===void 0&&!t.fnSelect&&(!t.fnWhere||t.fnWhere.length===0)&&(!t.fnHaving||t.fnHaving.length===0)}function pg(t){const e=[];for(const n of t){const r=yy(n);e.push(...Oy(r))}return e}function Oy(t){if(t.type==="func"&&t.name==="and"){const e=[];for(const n of t.args)e.push(...Oy(n));return e}else return[t]}function Tk(t){const e=new Set;let n=!1;function r(s){switch(s.type){case"ref":if(s.path&&s.path.length>0){const a=s.path[0];a&&(e.add(a),s.path.length===1&&(n=!0))}break;case"func":s.args&&s.args.forEach(r);break;case"val":break;case"agg":s.args&&s.args.forEach(r);break}}return r(t),{expression:t,touchedSources:e,hasNamespaceOnlyRef:n}}function Ak(t){const e=new Map,n=[];for(const a of t)if(a.touchedSources.size===1&&!a.hasNamespaceOnlyRef){const l=Array.from(a.touchedSources)[0];e.has(l)||e.set(l,[]),e.get(l).push(a.expression)}else(a.touchedSources.size>1||a.hasNamespaceOnlyRef)&&n.push(a.expression);const r=new Map;for(const[a,l]of e)r.set(a,Ef(l));const s=n.length>0?Ef(n):void 0;return{singleSource:r,multiSource:s}}function AM(t,e){const n=new Set,r=I1(t.from,e.singleSource,n),s=t.join?t.join.map(d=>({...d,from:I1(d.from,e.singleSource,n)})):void 0,a=[];e.multiSource&&a.push(e.multiSource);const l=t.join&&t.join.some(d=>d.type==="left"||d.type==="right"||d.type==="full");for(const[d,m]of e.singleSource)n.has(d)?l&&a.push(BO(m)):a.push(m);const u=a.length>1?[Ef(a.flatMap(d=>Oy(yy(d))))]:a;return{select:t.select,groupBy:t.groupBy?[...t.groupBy]:void 0,having:t.having?[...t.having]:void 0,orderBy:t.orderBy?[...t.orderBy]:void 0,limit:t.limit,offset:t.offset,distinct:t.distinct,fnSelect:t.fnSelect,fnWhere:t.fnWhere?[...t.fnWhere]:void 0,fnHaving:t.fnHaving?[...t.fnHaving]:void 0,from:r,join:s,where:u.length>0?u:[]}}function Ga(t){return{from:t.from.type==="collectionRef"?new ro(t.from.collection,t.from.alias):new Or(Ga(t.from.query),t.from.alias),select:t.select,join:t.join?t.join.map(e=>({type:e.type,left:e.left,right:e.right,from:e.from.type==="collectionRef"?new ro(e.from.collection,e.from.alias):new Or(Ga(e.from.query),e.from.alias)})):void 0,where:t.where?[...t.where]:void 0,groupBy:t.groupBy?[...t.groupBy]:void 0,having:t.having?[...t.having]:void 0,orderBy:t.orderBy?[...t.orderBy]:void 0,limit:t.limit,offset:t.offset,fnSelect:t.fnSelect,fnWhere:t.fnWhere?[...t.fnWhere]:void 0,fnHaving:t.fnHaving?[...t.fnHaving]:void 0}}function I1(t,e,n){const r=e.get(t.alias);if(!r)return t.type==="collectionRef"?new ro(t.collection,t.alias):new Or(Ga(t.query),t.alias);if(t.type==="collectionRef"){const l={from:new ro(t.collection,t.alias),where:[r]};return n.add(t.alias),new Or(l,t.alias)}if(!DM(t.query,r,t.alias))return new Or(Ga(t.query),t.alias);if(LM(t.query,r,t.alias))return new Or(Ga(t.query),t.alias);const s=t.query.where||[],a={...Ga(t.query),where:[...s,r]};return n.add(t.alias),new Or(a,t.alias)}function RM(t,e,n){return t.select?Rk(t.select)||jM(t.select,e,n):!1}function OM(t){return t.groupBy&&t.groupBy.length>0}function NM(t){return t.having&&t.having.length>0}function IM(t){return t.orderBy&&t.orderBy.length>0&&(t.limit!==void 0||t.offset!==void 0)}function MM(t){return t.fnSelect||t.fnWhere&&t.fnWhere.length>0||t.fnHaving&&t.fnHaving.length>0}function DM(t,e,n){return!(RM(t,e,n)||OM(t)||NM(t)||IM(t)||MM(t))}function Rk(t){for(const e of Object.values(t))if(typeof e=="object"){const n=e;if(n.type==="agg"||!("type"in n)&&Rk(n))return!0}return!1}function Ny(t){const e=[];if(t==null||typeof t!="object")return e;switch(t.type){case"ref":e.push(t);break;case"func":case"agg":for(const n of t.args??[])e.push(...Ny(n));break}return e}function jM(t,e,n){const r=new Set;for(const[a,l]of Object.entries(t))a.startsWith("__SPREAD_SENTINEL__")||l instanceof Pn||r.add(a);const s=Ny(e);for(const a of s){const l=a.path;if(!Array.isArray(l)||l.length<2)continue;const u=l[0],f=l[1];if(u===n&&r.has(f))return!0}return!1}function LM(t,e,n){const r=Ny(e);if(r.every(a=>a.path[0]!==n))return!1;if(t.fnSelect)return!0;const s=t.select;if(!s)return!1;for(const a of r){const l=a.path;if(l.length<2||l[0]!==n)continue;const u=s[l[1]];if(!u)continue;if(!(u instanceof Pn)||u.path.length<2)return!0;const[f,d]=u.path;if(f!==n&&f!==t.from.alias||d!==l[1])return!0}return!1}function Ef(t){if(t.length===0)throw new PN;return t.length===1?t[0]:new Ir("and",t)}function zM(t,e,n,r,s,a,l,u,f,d,m,p,y,g,v,w,E,S){let C=t;for(const T of e)C=PM(C,T,n,r,s,a,l,u,f,d,m,p,y,g,v,w,E,S);return C}function PM(t,e,n,r,s,a,l,u,f,d,m,p,y,g,v,w,E,S){const C=e.from.type==="collectionRef",{alias:T,input:M,collectionId:I}=UM(e.from,a,f,d,m,p,y,g,l,u,w,E,S);n[T]=M,C&&(E[T]=I);const R=f[r],U=f[I];if(!R)throw new u1(r);if(!U)throw new u1(I);const{activeSource:q,lazySource:K}=qM(e.type,R,U),j=Object.keys(n),{mainExpr:J,joinedExpr:ne}=BM(e.left,e.right,j,T),me=Yn(J),X=Yn(ne);let F=t.pipe(Ln(([G,ie])=>[me(ie),[G,ie]])),B=M.pipe(Ln(([G,ie])=>{const re={[T]:ie};return[X(re),[G,re]]}));if(!["inner","left","right","full"].includes(e.type))throw new CN(e.type);if(q){const G=q==="main"?e.from:v.from,ie=G.type==="queryRef"&&(G.query.limit||G.query.offset),re=J.type==="func"||ne.type==="func";if(!ie&&!re){const N=q==="main"?T:s;p.add(N);const D=q==="main"?F:B,O=Kl(v,q==="main"?ne:J,K),le=O.collection,L=O.path[0];L&&ud(L,O.path,le);const P=D.pipe(QI(he=>{const xe=S[N]||N,_e=d[xe];if(!_e)throw new BN(xe,N,K.id,Object.keys(d));if(_e.hasLoadedInitialState())return;const Ce=he.getInner().map(([[Et]])=>Et),Me=new Pn(O.path);_e.requestSnapshot({where:x4(Me,Ce),optimizedOnly:!0})||_e.requestSnapshot()}));q==="main"?F=P:B=P}}return F.pipe(n4(B,e.type),$M(e.type))}function BM(t,e,n,r){const s=n.filter(u=>u!==r),a=mg(t),l=mg(e);if(a&&s.includes(a)&&l===r)return{mainExpr:t,joinedExpr:e};if(a===r&&l&&s.includes(l))return{mainExpr:e,joinedExpr:t};throw!a||!l?new AN:a===l?new TN(a):s.includes(a)?l!==r?new ON(r):new NN:new RN(a)}function mg(t){switch(t.type){case"ref":return t.path[0]||null;case"func":{const e=new Set;for(const n of t.args){const r=mg(n);r&&e.add(r)}return e.size===1?Array.from(e)[0]:null}default:return null}}function UM(t,e,n,r,s,a,l,u,f,d,m,p,y){switch(t.type){case"collectionRef":{const g=e[t.alias];if(!g)throw new pk(t.alias,t.collection.id,Object.keys(e));return p[t.alias]=t.collection.id,{alias:t.alias,input:g,collectionId:t.collection.id}}case"queryRef":{const g=d.get(t.query)||t.query,v=m(g,e,n,r,s,a,l,u,f,d);Object.assign(p,v.aliasToCollectionId),Object.assign(y,v.aliasRemapping);const w=Object.keys(v.aliasToCollectionId).find(C=>v.aliasToCollectionId[C]===v.collectionId);w&&w!==t.alias&&(y[t.alias]=w);const S=v.pipeline.pipe(Ln(C=>{const[T,[M,I]]=C;return[T,M]}));return{alias:t.alias,input:S,collectionId:v.collectionId}}default:throw new IN(t.type)}}function $M(t){return function(e){return e.pipe(ri(n=>{const[r,[s,a]]=n,l=s?.[1],u=a?.[1];return t==="inner"?!!(l&&u):t==="left"?!!l:t==="right"?!!u:!0}),Ln(n=>{const[r,[s,a]]=n,l=s?.[0],u=s?.[1],f=a?.[0],d=a?.[1],m={};return u&&Object.assign(m,u),d&&Object.assign(m,d),[`[${l},${f}]`,m]}))}}function qM(t,e,n){switch(t){case"left":return{activeSource:"main",lazySource:n};case"right":return{activeSource:"joined",lazySource:e};case"inner":return e.size<n.size?{activeSource:"main",lazySource:n}:{activeSource:"joined",lazySource:e};default:return{activeSource:void 0,lazySource:void 0}}}function gg(t){return t instanceof Jn?t.value:t}function FM(t,e,n){const r=t.source(e);if(r&&typeof r=="object"){let s=n;const a=t.targetPath;if(a.length===0)for(const[l,u]of Object.entries(r))n[l]=gg(u);else for(let l=0;l<a.length;l++){const u=a[l];if(l===a.length-1){const f=s[u]??={};if(typeof f=="object")for(const[d,m]of Object.entries(r))f[d]=gg(m)}else{const f=s[u];(f==null||typeof f!="object")&&(s[u]={}),s=s[u]}}}}function VM(t,e,n){const r=t.alias.split(".");if(r.length===1)n[t.alias]=t.compiled(e);else{let s=n;for(let a=0;a<r.length-1;a++){const l=r[a],u=s[l];(u==null||typeof u!="object")&&(s[l]={}),s=s[l]}s[r[r.length-1]]=gg(t.compiled(e))}}function HM([t,e],n){const r={};for(const s of n)s.kind==="merge"?FM(s,e,r):VM(s,e,r);return[t,{...e,__select_results:r}]}function GM(t,e,n){const r=[];return Ok([],e,r),t.pipe(Ln(s=>HM(s,r)))}function KM(t){return t.type==="agg"}function ZM(t){return t&&typeof t=="object"&&!gy(t)}function Ok(t,e,n){for(const[r,s]of Object.entries(e)){if(r.startsWith("__SPREAD_SENTINEL__")){const l=r.slice(19),u=l.lastIndexOf("__"),f=u>=0?l.slice(0,u):l,d=s&&typeof s=="object"&&"type"in s&&s.type==="ref";if(f.includes(".")||d){const m=[...t],p=d?s:new Pn(f.split(".")),y=Yn(p);n.push({kind:"merge",targetPath:m,source:y})}else{const m=f,p=[...t];n.push({kind:"merge",targetPath:p,source:y=>y[m]})}continue}const a=s;if(ZM(a)){Ok([...t,r],a,n);continue}if(KM(a))n.push({kind:"field",alias:[...t,r].join("."),compiled:()=>null});else{if(a===void 0||!gy(a)){n.push({kind:"field",alias:[...t,r].join("."),compiled:()=>a});continue}if(a instanceof Jn){const l=a.value;n.push({kind:"field",alias:[...t,r].join("."),compiled:()=>l})}else n.push({kind:"field",alias:[...t,r].join("."),compiled:Yn(a)})}}}function Iy(t,e,n,r,s,a,l,u,f=new WeakMap,d=new WeakMap){const m=f.get(t);if(m)return m;yg(t);const{optimizedQuery:p,sourceWhereClauses:y}=SM(t);d.set(p,t),_g(p,t,d);const g={...e},v={},w={},E={},{alias:S,input:C,collectionId:T}=JM(p.from,g,n,r,s,a,l,u,f,d,v,w);E[S]=C;let M=C.pipe(Ln(([q,K])=>[q,{[S]:K}]));if(p.join&&p.join.length>0&&(M=zM(M,p.join,E,T,S,g,f,d,n,r,s,a,l,u,t,Iy,v,w)),p.where&&p.where.length>0)for(const q of p.where){const K=yy(q),j=Yn(K);M=M.pipe(ri(([J,ne])=>Ya(j(ne))))}if(p.fnWhere&&p.fnWhere.length>0)for(const q of p.fnWhere)M=M.pipe(ri(([K,j])=>Ya(q(j))));if(p.distinct&&!p.fnSelect&&!p.select)throw new bN;if(p.fnSelect?M=M.pipe(Ln(([q,K])=>{const j=p.fnSelect(K);return[q,{...K,__select_results:j}]})):p.select?M=GM(M,p.select):M=M.pipe(Ln(([q,K])=>{const j=!p.join&&!p.groupBy?K[S]:K;return[q,{...K,__select_results:j}]})),p.groupBy&&p.groupBy.length>0?M=C1(M,p.groupBy,p.having,p.select,p.fnHaving):p.select&&Object.values(p.select).some(K=>K.type==="agg")&&(M=C1(M,[],p.having,p.select,p.fnHaving)),p.having&&(!p.groupBy||p.groupBy.length===0)&&!(p.select?Object.values(p.select).some(K=>K.type==="agg"):!1))throw new _N;if(p.fnHaving&&p.fnHaving.length>0&&(!p.groupBy||p.groupBy.length===0))for(const q of p.fnHaving)M=M.pipe(ri(([K,j])=>q(j)));if(p.distinct&&(M=M.pipe(s4(([q,K])=>K.__select_results))),p.orderBy&&p.orderBy.length>0){const j=I4(t,M,p.orderBy,p.select||{},n[T],l,u,p.limit,p.offset).pipe(Ln(([ne,[me,X]])=>{const F=me.__select_results,B=bg(F);return[ne,[B,X]]})),J={collectionId:T,pipeline:j,sourceWhereClauses:y,aliasToCollectionId:v,aliasRemapping:w};return f.set(t,J),J}else if(p.limit!==void 0||p.offset!==void 0)throw new vN;const R=M.pipe(Ln(([q,K])=>{const j=K.__select_results,J=bg(j);return[q,[J,void 0]]})),U={collectionId:T,pipeline:R,sourceWhereClauses:y,aliasToCollectionId:v,aliasRemapping:w};return f.set(t,U),U}function QM(t){const e=new Set;if(t.from.type==="collectionRef"&&e.add(t.from.alias),t.join)for(const n of t.join)n.from.type==="collectionRef"&&e.add(n.from.alias);return e}function yg(t,e=new Set){const n=QM(t);for(const s of n)if(e.has(s))throw new xN(s,Array.from(e));const r=new Set([...e,...n]);if(t.from.type==="queryRef"&&yg(t.from.query,r),t.join)for(const s of t.join)s.from.type==="queryRef"&&yg(s.from.query,r)}function JM(t,e,n,r,s,a,l,u,f,d,m,p){switch(t.type){case"collectionRef":{const y=e[t.alias];if(!y)throw new pk(t.alias,t.collection.id,Object.keys(e));return m[t.alias]=t.collection.id,{alias:t.alias,input:y,collectionId:t.collection.id}}case"queryRef":{const y=d.get(t.query)||t.query,g=Iy(y,e,n,r,s,a,l,u,f,d);Object.assign(m,g.aliasToCollectionId),Object.assign(p,g.aliasRemapping);const v=Object.keys(g.aliasToCollectionId).find(S=>g.aliasToCollectionId[S]===g.collectionId);v&&v!==t.alias&&(p[t.alias]=v);const E=g.pipeline.pipe(Ln(S=>{const[C,[T,M]]=S,I=bg(T);return[C,I]}));return{alias:t.alias,input:E,collectionId:g.collectionId}}default:throw new wN(t.type)}}function YM(t){return t instanceof Jn||t&&typeof t=="object"&&"type"in t&&t.type==="val"}function bg(t){return YM(t)?t.value:t}function _g(t,e,n){if(t.from.type==="queryRef"&&e.from.type==="queryRef"&&(n.set(t.from.query,e.from.query),_g(t.from.query,e.from.query,n)),t.join&&e.join)for(let r=0;r<t.join.length&&r<e.join.length;r++){const s=t.join[r],a=e.join[r];s.from.type==="queryRef"&&a.from.type==="queryRef"&&(n.set(s.from.query,a.from.query),_g(s.from.query,a.from.query,n))}}function My(t,e){const n=t.type;if(n==="val")return new Jn(t.value);if(n==="ref"){const r=t.path;if(Array.isArray(r)){if(r[0]===e&&r.length>1)return new Pn(r.slice(1));if(r.length===1&&r[0]!==void 0)return new Pn([r[0]])}return new Pn(Array.isArray(r)?r:[String(r)])}else{const r=[];for(const s of t.args){const a=My(s,e);r.push(a)}return new Ir(t.name,r)}}function M1(t,e){return t.map(r=>{const s=My(r.expression,e);return{...r,expression:s}})}const D1=Symbol.for("@tanstack/db.collection-config-builder");class WM{constructor(e,n,r,s){this.alias=e,this.collectionId=n,this.collection=r,this.collectionConfigBuilder=s,this.biggest=void 0,this.subscriptionLoadingPromises=new Map,this.sentToD2Keys=new Set}subscribe(){const e=this.getWhereClauseForAlias();if(e){const n=My(e,this.alias);return this.subscribeToChanges(n)}return this.subscribeToChanges()}subscribeToChanges(e){let n;const r=this.getOrderByInfo();if(r)n=this.subscribeToOrderedChanges(e,r);else{const u=!this.collectionConfigBuilder.isLazyAlias(this.alias);n=this.subscribeToMatchingChanges(e,u)}const s=()=>{if(!this.subscriptionLoadingPromises.has(n)){let u;const f=new Promise(d=>{u=d});this.subscriptionLoadingPromises.set(n,{resolve:u}),this.collectionConfigBuilder.liveQueryCollection._sync.trackLoadPromise(f)}};n.status==="loadingSubset"&&s();const a=n.on("status:change",u=>{if(u.status==="loadingSubset")s();else{const f=this.subscriptionLoadingPromises.get(n);f&&(this.subscriptionLoadingPromises.delete(n),f.resolve())}}),l=()=>{const u=this.subscriptionLoadingPromises.get(n);u&&(this.subscriptionLoadingPromises.delete(n),u.resolve()),a(),n.unsubscribe()};return this.collectionConfigBuilder.currentSyncState.unsubscribeCallbacks.add(l),n}sendChangesToPipeline(e,n){const r=Array.isArray(e)?e:[...e],s=[];for(const f of r){if(f.type==="insert"){if(this.sentToD2Keys.has(f.key))continue;this.sentToD2Keys.add(f.key)}else f.type==="delete"&&this.sentToD2Keys.delete(f.key);s.push(f)}const a=this.collectionConfigBuilder.currentSyncState.inputs[this.alias],u=XM(a,s,this.collection.config.getKey)>0?n:void 0;this.collectionConfigBuilder.scheduleGraphRun(u,{alias:this.alias})}subscribeToMatchingChanges(e,n=!1){const r=a=>{this.sendChangesToPipeline(a)};return this.collection.subscribeChanges(r,{...n&&{includeInitialState:n},whereExpression:e})}subscribeToOrderedChanges(e,n){const{orderBy:r,offset:s,limit:a,index:l}=n,u=p=>{const y=e3(p);this.sendChangesToPipelineWithTracking(y,f)},f=this.collection.subscribeChanges(u,{whereExpression:e}),d=this.collection.on("truncate",()=>{this.biggest=void 0,this.sentToD2Keys.clear()});f.on("unsubscribed",()=>{d()});const m=M1(r,this.alias);return l?(f.setOrderByIndex(l),f.requestLimitedSnapshot({limit:s+a,orderBy:m})):f.requestSnapshot({orderBy:m,limit:s+a}),f}loadMoreIfNeeded(e){const n=this.getOrderByInfo();if(!n)return!0;const{dataNeeded:r}=n;if(!r)return!0;const s=r();return s>0&&this.loadNextItems(s,e),!0}sendChangesToPipelineWithTracking(e,n){const r=this.getOrderByInfo();if(!r){this.sendChangesToPipeline(e);return}const s=this.trackSentValues(e,r.comparator),a=n;a[D1]??=this.loadMoreIfNeeded.bind(this,n),this.sendChangesToPipeline(s,a[D1])}loadNextItems(e,n){const r=this.getOrderByInfo();if(!r)return;const{orderBy:s,valueExtractorForRawRow:a,offset:l}=r,u=this.biggest,f=u?a(u):void 0,d=f!==void 0?Array.isArray(f)?f:[f]:void 0,m=M1(s,this.alias);n.requestLimitedSnapshot({orderBy:m,limit:e,minValues:d,offset:l})}getWhereClauseForAlias(){const e=this.collectionConfigBuilder.sourceWhereClausesCache;if(e)return e.get(this.alias)}getOrderByInfo(){const e=this.collectionConfigBuilder.optimizableOrderByCollections[this.collectionId];if(e&&e.alias===this.alias)return e}*trackSentValues(e,n){for(const r of e)r.type!=="delete"&&(this.biggest?n(this.biggest,r.value)<0&&(this.biggest=r.value):this.biggest=r.value),yield r}}function XM(t,e,n){const r=[];for(const s of e){const a=n(s.value);s.type==="insert"?r.push([[a,s.value],1]):s.type==="update"?(r.push([[a,s.previousValue],-1]),r.push([[a,s.value],1])):r.push([[a,s.value],-1])}return r.length!==0&&t.sendData(new Yt(r)),r.length}function*e3(t){for(const e of t)e.type==="update"?(yield{type:"delete",key:e.key,value:e.previousValue},yield{type:"insert",key:e.key,value:e.value}):yield e}const Nk=new WeakMap;function t3(t){return t.utils?.[Cy]?.getBuilder?.()}function n3(t,e){Nk.set(t,e)}function r3(t){return Nk.get(t)}let s3=0;class i3{constructor(e){this.config=e,this.compiledAliasToCollectionId={},this.resultKeys=new WeakMap,this.orderByIndices=new WeakMap,this.isGraphRunning=!1,this.runCount=0,this.isInErrorState=!1,this.aliasDependencies={},this.builderDependencies=new Set,this.pendingGraphRuns=new Map,this.subscriptions={},this.lazySourcesCallbacks={},this.lazySources=new Set,this.optimizableOrderByCollections={},this.id=e.id||`live-query-${++s3}`,this.query=a3(e),this.collections=l3(this.query);const n=c3(this.query);this.collectionByAlias={};for(const[r,s]of n.entries()){const a=this.collections[r];if(a)for(const l of s)this.collectionByAlias[l]=a}this.query.orderBy&&this.query.orderBy.length>0&&(this.compare=o3(this.orderByIndices)),this.compareOptions=this.config.defaultStringCollation??Ik(this.query).compareOptions,this.compileBasePipeline()}hasJoins(e){return!!(e.join&&e.join.length>0||e.from.type==="queryRef"&&this.hasJoins(e.from.query))}getConfig(){return{id:this.id,getKey:this.config.getKey||(e=>this.resultKeys.get(e)),sync:this.getSyncConfig(),compare:this.compare,defaultStringCollation:this.compareOptions,gcTime:this.config.gcTime||5e3,schema:this.config.schema,onInsert:this.config.onInsert,onUpdate:this.config.onUpdate,onDelete:this.config.onDelete,startSync:this.config.startSync,singleResult:this.query.singleResult,utils:{getRunCount:this.getRunCount.bind(this),setWindow:this.setWindow.bind(this),getWindow:this.getWindow.bind(this),[Cy]:{getBuilder:()=>this,hasCustomGetKey:!!this.config.getKey,hasJoins:this.hasJoins(this.query)}}}}setWindow(e){if(!this.windowFn)throw new $N;return this.currentWindow=e,this.windowFn(e),this.maybeRunGraphFn?.(),this.liveQueryCollection?.isLoadingSubset?new Promise(n=>{const r=this.liveQueryCollection.on("loadingSubset:change",s=>{s.isLoadingSubset||(r(),n())})}):!0}getWindow(){if(!(!this.windowFn||!this.currentWindow))return{offset:this.currentWindow.offset??0,limit:this.currentWindow.limit??0}}getCollectionIdForAlias(e){const n=this.compiledAliasToCollectionId[e];if(n)return n;const r=this.collectionByAlias[e];if(r)return r.id;throw new Error(`Unknown source alias "${e}"`)}isLazyAlias(e){return this.lazySources.has(e)}maybeRunGraph(e){if(!this.isGraphRunning){if(!this.currentSyncConfig||!this.currentSyncState)throw new Error("maybeRunGraph called without active sync session. This should not happen.");this.isGraphRunning=!0;try{const{begin:n,commit:r}=this.currentSyncConfig,s=this.currentSyncState;if(this.isInErrorState)return;if(s.subscribedToAllCollections){for(;s.graph.pendingWork();)s.graph.run(),e?.();s.messagesCount===0&&(n(),r(),this.updateLiveQueryStatus(this.currentSyncConfig))}}finally{this.isGraphRunning=!1}}}scheduleGraphRun(e,n){const r=n?.contextId??tf()?.id,s=n?.jobId??this,a=(()=>{if(n?.dependencies)return n.dependencies;const f=new Set(this.builderDependencies);if(n?.alias){const d=this.aliasDependencies[n.alias];if(d)for(const m of d)f.add(m)}return f.delete(this),Array.from(f)})();if(r)for(const f of a)typeof f.scheduleGraphRun=="function"&&f.scheduleGraphRun(void 0,{contextId:r});if(!this.currentSyncConfig||!this.currentSyncState)throw new Error("scheduleGraphRun called without active sync session. This should not happen.");let l=r?this.pendingGraphRuns.get(r):void 0;l||(l={loadCallbacks:new Set},r&&this.pendingGraphRuns.set(r,l)),e&&l.loadCallbacks.add(e);const u=r?void 0:l;Sf.schedule({contextId:r,jobId:s,dependencies:a,run:()=>this.executeGraphRun(r,u)})}clearPendingGraphRun(e){this.pendingGraphRuns.delete(e)}hasPendingGraphRun(e){return this.pendingGraphRuns.has(e)}executeGraphRun(e,n){const r=n??(e?this.pendingGraphRuns.get(e):void 0);if(e&&this.pendingGraphRuns.delete(e),!r||!this.currentSyncConfig||!this.currentSyncState)return;this.incrementRunCount();const s=()=>{let a=!0,l;if(r.loadCallbacks.forEach(u=>{try{a=u()&&a}catch(f){a=!1,l??=f}}),l)throw l;return a};this.maybeRunGraph(s)}getSyncConfig(){return{rowUpdateMode:"full",sync:this.syncFn.bind(this)}}incrementRunCount(){this.runCount++}getRunCount(){return this.runCount}syncFn(e){this.liveQueryCollection=e.collection,this.currentSyncConfig=e;const n={messagesCount:0,subscribedToAllCollections:!1,unsubscribeCallbacks:new Set},r=this.extendPipelineWithChangeProcessing(e,n);this.currentSyncState=r,this.unsubscribeFromSchedulerClears=Sf.onClear(a=>{this.clearPendingGraphRun(a)});const s=this.subscribeToAllCollections(e,r);return this.maybeRunGraphFn=()=>this.scheduleGraphRun(s),this.scheduleGraphRun(s),()=>{n.unsubscribeCallbacks.forEach(a=>a()),this.currentSyncConfig=void 0,this.currentSyncState=void 0,this.pendingGraphRuns.clear(),this.graphCache=void 0,this.inputsCache=void 0,this.pipelineCache=void 0,this.sourceWhereClausesCache=void 0,this.lazySources.clear(),this.optimizableOrderByCollections={},this.lazySourcesCallbacks={},Object.keys(this.subscriptions).forEach(a=>delete this.subscriptions[a]),this.compiledAliasToCollectionId={},this.unsubscribeFromSchedulerClears?.(),this.unsubscribeFromSchedulerClears=void 0}}compileBasePipeline(){this.graphCache=new zI,this.inputsCache=Object.fromEntries(Object.keys(this.collectionByAlias).map(r=>[r,this.graphCache.newInput()]));const e=Iy(this.query,this.inputsCache,this.collections,this.subscriptions,this.lazySourcesCallbacks,this.lazySources,this.optimizableOrderByCollections,r=>{this.windowFn=r});this.pipelineCache=e.pipeline,this.sourceWhereClausesCache=e.sourceWhereClauses,this.compiledAliasToCollectionId=e.aliasToCollectionId;const n=Object.keys(this.compiledAliasToCollectionId).filter(r=>!Object.hasOwn(this.inputsCache,r));if(n.length>0)throw new UN(n)}maybeCompileBasePipeline(){return(!this.graphCache||!this.inputsCache||!this.pipelineCache)&&this.compileBasePipeline(),{graph:this.graphCache,inputs:this.inputsCache,pipeline:this.pipelineCache}}extendPipelineWithChangeProcessing(e,n){const{begin:r,commit:s}=e,{graph:a,inputs:l,pipeline:u}=this.maybeCompileBasePipeline();return u.pipe(WI(f=>{const d=f.getInner();n.messagesCount+=d.length,r(),d.reduce(u3,new Map).forEach(this.applyChanges.bind(this,e)),s()})),a.finalize(),n.graph=a,n.inputs=l,n.pipeline=u,n}applyChanges(e,n,r){const{write:s,collection:a}=e,{deletes:l,inserts:u,value:f,orderByIndex:d}=n;if(this.resultKeys.set(f,r),d!==void 0&&this.orderByIndices.set(f,d),u&&l===0)s({value:f,type:"insert"});else if(u>l||u===l&&a.has(a.getKeyFromItem(f)))s({value:f,type:"update"});else if(l>0)s({value:f,type:"delete"});else throw new Error(`Could not apply changes: ${JSON.stringify(n)}. This should never happen.`)}handleSourceStatusChange(e,n,r){const{status:s}=r;if(s==="error"){this.transitionToError(`Source collection '${n}' entered error state`);return}if(s==="cleaned-up"){this.transitionToError(`Source collection '${n}' was manually cleaned up while live query '${this.id}' depends on it. Live queries prevent automatic GC, so this was likely a manual cleanup() call.`);return}this.updateLiveQueryStatus(e)}updateLiveQueryStatus(e){const{markReady:n}=e;this.isInErrorState||this.allCollectionsReady()&&n()}transitionToError(e){this.isInErrorState=!0,console.error(`[Live Query Error] ${e}`),this.liveQueryCollection?._lifecycle.setStatus("error")}allCollectionsReady(){return Object.values(this.collections).every(e=>e.isReady())}subscribeToAllCollections(e,n){const r=Object.entries(this.compiledAliasToCollectionId);if(r.length===0)throw new Error(`Compiler returned no alias metadata for query '${this.id}'. This should not happen; please report.`);const s=r.map(([l,u])=>{const f=this.collectionByAlias[l]??this.collections[u],d=r3(f);d&&d!==this?(this.aliasDependencies[l]=[d],this.builderDependencies.add(d)):this.aliasDependencies[l]=[];const m=new WM(l,u,f,this),p=f.on("status:change",v=>{this.handleSourceStatusChange(e,u,v)});n.unsubscribeCallbacks.add(p);const y=m.subscribe();return this.subscriptions[l]=y,m.loadMoreIfNeeded.bind(m,y)}),a=()=>(s.map(l=>l()),!0);return n.subscribedToAllCollections=!0,this.updateLiveQueryStatus(e),a}}function a3(t){return typeof t.query=="function"?wM(t.query):Ek(t.query)}function o3(t){return(e,n)=>{const r=t.get(e),s=t.get(n);return r&&s?r<s?-1:r>s?1:0:0}}function l3(t){const e={};function n(s){s.type==="collectionRef"?e[s.collection.id]=s.collection:s.type==="queryRef"&&r(s.query)}function r(s){if(s.from&&n(s.from),s.join&&Array.isArray(s.join))for(const a of s.join)a.from&&n(a.from)}return r(t),e}function Ik(t){const e=t.from;if(e.type==="collectionRef")return e.collection;if(e.type==="queryRef")return Ik(e.query);throw new Error(`Failed to extract collection. Invalid FROM clause: ${JSON.stringify(t)}`)}function c3(t){const e=new Map;function n(s){if(s)if(s.type==="collectionRef"){const{id:a}=s.collection,l=e.get(a);l?l.add(s.alias):e.set(a,new Set([s.alias]))}else s.type==="queryRef"&&r(s.query)}function r(s){if(s&&(n(s.from),s.join))for(const a of s.join)n(a.from)}return r(t),e}function u3(t,[[e,n],r]){const[s,a]=n,l=t.get(e)||{deletes:0,inserts:0,value:s,orderByIndex:a};return r<0?l.deletes+=Math.abs(r):r>0&&(l.inserts+=r,l.value=s,l.orderByIndex=a),t.set(e,l),t}function j1(t){return new i3(t).getConfig()}function um(t){if(typeof t=="function"){const n=j1({query:t});return L1(n)}else{const e=t,n=j1(e);return e.utils&&(n.utils={...n.utils,...e.utils}),L1(n)}}function L1(t){const e=Sk(t),n=t3(t);return n&&n3(e,n),e}const fm=1;function f3(t,e=[]){const n=t&&typeof t=="object"&&typeof t.subscribeChanges=="function"&&typeof t.startSyncImmediate=="function"&&typeof t.id=="string",r=Z.useRef(null),s=Z.useRef(null),a=Z.useRef(null),l=Z.useRef(0),u=Z.useRef(null),f=!r.current||n&&a.current!==t||!n&&(s.current===null||s.current.length!==e.length||s.current.some((v,w)=>v!==e[w]));if(f)if(n)t.startSyncImmediate(),r.current=t,a.current=t;else if(typeof t=="function"){const v=new Jt,w=t(v);if(w==null)r.current=null;else if(w instanceof Ry)w.startSyncImmediate(),r.current=w;else if(w instanceof Jt)r.current=um({query:t,startSync:!0,gcTime:fm});else if(w&&typeof w=="object")r.current=um({startSync:!0,gcTime:fm,...w});else throw new Error(`useLiveQuery callback must return a QueryBuilder, LiveQueryCollectionConfig, Collection, undefined, or null. Got: ${typeof w}`);s.current=[...e]}else r.current=um({startSync:!0,gcTime:fm,...t}),s.current=[...e];f&&(l.current=0,u.current=null);const d=Z.useRef(null);(!d.current||f)&&(d.current=v=>{if(!r.current)return()=>{};const w=r.current.subscribeChanges(()=>{l.current+=1,v()});return r.current.status==="ready"&&(l.current+=1,v()),()=>{w.unsubscribe()}});const m=Z.useRef(null);(!m.current||f)&&(m.current=()=>{const v=l.current,w=r.current;return(!u.current||u.current.version!==v||u.current.collection!==w)&&(u.current={collection:w,version:v}),u.current});const p=Z.useSyncExternalStore(d.current,m.current),y=Z.useRef(null),g=Z.useRef(null);if(!y.current||y.current.version!==p.version||y.current.collection!==p.collection){if(!p.collection)g.current={state:void 0,data:void 0,collection:void 0,status:"disabled",isLoading:!1,isReady:!0,isIdle:!1,isError:!1,isCleanedUp:!1,isEnabled:!1};else{const v=Array.from(p.collection.entries()),E=p.collection.config.singleResult;let S=null,C=null;g.current={get state(){return S||(S=new Map(v)),S},get data(){return C||(C=v.map(([,T])=>T)),E?C[0]:C},collection:p.collection,status:p.collection.status,isLoading:p.collection.status==="loading",isReady:p.collection.status==="ready",isIdle:p.collection.status==="idle",isError:p.collection.status==="error",isCleanedUp:p.collection.status==="cleaned-up",isEnabled:!0}}y.current=p}return g.current}class oi extends hr{constructor(e){super(e),this.name="QueryCollectionError"}}class d3 extends oi{constructor(){super("[QueryCollection] queryKey must be provided."),this.name="QueryKeyRequiredError"}}class h3 extends oi{constructor(){super("[QueryCollection] queryFn must be provided."),this.name="QueryFnRequiredError"}}class p3 extends oi{constructor(){super("[QueryCollection] queryClient must be provided."),this.name="QueryClientRequiredError"}}class m3 extends oi{constructor(){super("[QueryCollection] getKey must be provided."),this.name="GetKeyRequiredError"}}class g3 extends oi{constructor(){super("Collection must be in 'ready' state for manual sync operations. Sync not initialized yet."),this.name="SyncNotInitializedError"}}class y3 extends oi{constructor(e){super(`Duplicate key '${e}' found within batch operations`),this.name="DuplicateKeyInBatchError"}}class b3 extends oi{constructor(e){super(`Update operation: Item with key '${e}' does not exist`),this.name="UpdateOperationItemNotFoundError"}}class _3 extends oi{constructor(e){super(`Delete operation: Item with key '${e}' does not exist`),this.name="DeleteOperationItemNotFoundError"}}const Ni=new WeakMap;function v3(t,e){const n=Array.isArray(t)?t:[t],r=[];for(const s of n)if(s.type==="delete"){const a=Array.isArray(s.key)?s.key:[s.key];for(const l of a)r.push({type:"delete",key:l})}else{const a=Array.isArray(s.data)?s.data:[s.data];for(const l of a){let u;if(s.type==="update")u=e.getKey(l);else{const f=e.collection.validateData(l,s.type==="upsert"?"insert":s.type);u=e.getKey(f)}r.push({type:s.type,key:u,data:l})}}return r}function x3(t,e){const n=new Set;for(const r of t){if(n.has(r.key))throw new y3(r.key);if(n.add(r.key),r.type==="update"){if(!e.collection._state.syncedData.has(r.key))throw new b3(r.key)}else if(r.type==="delete"&&!e.collection._state.syncedData.has(r.key))throw new _3(r.key)}}function fl(t,e){const n=v3(t,e);x3(n,e),e.begin();for(const s of n)switch(s.type){case"insert":{const a=e.collection.validateData(s.data,"insert");e.write({type:"insert",value:a});break}case"update":{const l={...e.collection._state.syncedData.get(s.key),...s.data},u=e.collection.validateData(l,"update",s.key);e.write({type:"update",value:u});break}case"delete":{const a=e.collection._state.syncedData.get(s.key);e.write({type:"delete",value:a});break}case"upsert":{const a=e.collection._state.syncedData.has(s.key),l=e.collection.validateData(s.data,a?"update":"insert",s.key);a?e.write({type:"update",value:l}):e.write({type:"insert",value:l});break}}e.commit();const r=Array.from(e.collection._state.syncedData.values());e.updateCacheData?e.updateCacheData(r):e.queryClient.setQueryData(e.queryKey,r)}function w3(t){function e(){const n=t();if(!n)throw new g3;return n}return{writeInsert(n){const r={type:"insert",data:n},s=e(),a=Ni.get(s);if(a?.isActive){a.operations.push(r);return}fl(r,s)},writeUpdate(n){const r={type:"update",data:n},s=e(),a=Ni.get(s);if(a?.isActive){a.operations.push(r);return}fl(r,s)},writeDelete(n){const r={type:"delete",key:n},s=e(),a=Ni.get(s);if(a?.isActive){a.operations.push(r);return}fl(r,s)},writeUpsert(n){const r={type:"upsert",data:n},s=e(),a=Ni.get(s);if(a?.isActive){a.operations.push(r);return}fl(r,s)},writeBatch(n){const r=e();if(Ni.get(r)?.isActive)throw new Error("Cannot nest writeBatch calls. Complete the current batch before starting a new one.");const a={operations:[],isActive:!0};Ni.set(r,a);try{const l=n();if(l&&typeof l=="object"&&"then"in l&&typeof l.then=="function")throw new Error("writeBatch does not support async callbacks. The callback must be synchronous.");a.operations.length>0&&fl(a.operations,r)}finally{a.isActive=!1,Ni.delete(r)}}}}function S3(t){if(!t)return;const e={};return t.where&&(e.where=vg(t.where)),t.orderBy?.length&&(e.orderBy=t.orderBy.map(n=>{const r={expression:vg(n.expression),direction:n.compareOptions.direction,nulls:n.compareOptions.nulls,stringSort:n.compareOptions.stringSort};return n.compareOptions.stringSort==="locale"?{...r,locale:n.compareOptions.locale,localeOptions:n.compareOptions.localeOptions}:r})),t.limit!==void 0&&(e.limit=t.limit),t.offset!==void 0&&(e.offset=t.offset),Object.keys(e).length===0?void 0:JSON.stringify(e)}function vg(t){if(!t)return null;switch(t.type){case"val":return{type:"val",value:xg(t.value)};case"ref":return{type:"ref",path:[...t.path]};case"func":return{type:"func",name:t.name,args:t.args.map(e=>vg(e))};default:return null}}function xg(t){if(t===void 0)return{__type:"undefined"};if(typeof t=="number"){if(Number.isNaN(t))return{__type:"nan"};if(t===Number.POSITIVE_INFINITY)return{__type:"infinity",sign:1};if(t===Number.NEGATIVE_INFINITY)return{__type:"infinity",sign:-1}}return t===null||typeof t=="string"||typeof t=="number"||typeof t=="boolean"?t:t instanceof Date?{__type:"date",value:t.toJSON()}:Array.isArray(t)?t.map(e=>xg(e)):typeof t=="object"?Object.fromEntries(Object.entries(t).map(([e,n])=>[e,xg(n)])):t}class k3{constructor(e,n,r){this.state=e,this.refetchFn=n,this.refetch=n,this.writeInsert=r.writeInsert,this.writeUpdate=r.writeUpdate,this.writeDelete=r.writeDelete,this.writeUpsert=r.writeUpsert,this.writeBatch=r.writeBatch}async clearError(){this.state.lastError=void 0,this.state.errorCount=0,this.state.lastErrorUpdatedAt=0,await this.refetchFn({throwOnError:!0})}get lastError(){return this.state.lastError}get isError(){return!!this.state.lastError}get errorCount(){return this.state.errorCount}get isFetching(){return Array.from(this.state.observers.values()).some(e=>e.getCurrentResult().isFetching)}get isRefetching(){return Array.from(this.state.observers.values()).some(e=>e.getCurrentResult().isRefetching)}get isLoading(){return Array.from(this.state.observers.values()).some(e=>e.getCurrentResult().isLoading)}get dataUpdatedAt(){return Math.max(0,...Array.from(this.state.observers.values()).map(e=>e.getCurrentResult().dataUpdatedAt))}get fetchStatus(){return Array.from(this.state.observers.values()).map(e=>e.getCurrentResult().fetchStatus)}}function E3(t){const{queryKey:e,queryFn:n,select:r,queryClient:s,enabled:a,refetchInterval:l,retry:u,retryDelay:f,staleTime:d,getKey:m,onInsert:p,onUpdate:y,onDelete:g,meta:v,...w}=t,E=w.syncMode??"eager";if(!e)throw new d3;if(!n)throw new h3;if(!s)throw new p3;if(!m)throw new m3;const S={lastError:void 0,errorCount:0,lastErrorUpdatedAt:0,observers:new Map},C=new Map,T=new Map,M=new Map,I=new Map,R=new Map,U=(re,N)=>{const D=M.get(re)||new Set;D.add(N),M.set(re,D);const H=T.get(N)||new Set;H.add(re),T.set(N,H)},q=(re,N)=>{const D=M.get(re)||new Set;D.delete(N),M.set(re,D);const H=T.get(N)||new Set;return H.delete(re),T.set(N,H),D.size===0},K=re=>{const{begin:N,write:D,commit:H,markReady:O,collection:le}=re;let L=!1;const P=ke=>{if(typeof e=="function")return e(ke);if(E==="on-demand"){const Ve=S3(ke);return Ve!==void 0?[...e,Ve]:e}else return e},he=(ke={},Ve=n)=>{const He=P(ke),Ae=Cs(He),St={...v,loadSubsetOptions:ke};if(S.observers.has(Ae)){R.set(Ae,(R.get(Ae)||0)+1);const ye=S.observers.get(Ae),ve=ye.getCurrentResult();return ve.isSuccess?!0:ve.isError?Promise.reject(ve.error):new Promise((Ue,mt)=>{const vt=ye.subscribe(lt=>{lt.isSuccess?(vt(),Ue()):lt.isError&&(vt(),mt(lt.error))})})}const se={queryKey:He,queryFn:Ve,meta:St,structuralSharing:!0,notifyOnChangeProps:"all",...a!==void 0&&{enabled:a},...l!==void 0&&{refetchInterval:l},...u!==void 0&&{retry:u},...f!==void 0&&{retryDelay:f},...d!==void 0&&{staleTime:d}},ge=new CO(s,se);C.set(Ae,He),S.observers.set(Ae,ge),R.set(Ae,(R.get(Ae)||0)+1);const ue=new Promise((ye,ve)=>{const Ue=ge.subscribe(mt=>{mt.isSuccess?(Ue(),ye()):mt.isError&&(Ue(),ve(mt.error))})});return(L||le.subscriberCount>0)&&Ce(ge,Ae),ue},xe=ke=>{const Ve=Cs(ke);return Ae=>{if(Ae.isSuccess){S.lastError=void 0,S.errorCount=0;const St=Ae.data,se=r?r(St):St;if(!Array.isArray(se)||se.some(ye=>typeof ye!="object")){const ye=r?`@tanstack/query-db-collection: select() must return an array of objects. Got: ${typeof se} for queryKey ${JSON.stringify(ke)}`:`@tanstack/query-db-collection: queryFn must return an array of objects. Got: ${typeof se} for queryKey ${JSON.stringify(ke)}`;console.error(ye);return}const ge=new Map(le._state.syncedData.entries()),ue=new Map;se.forEach(ye=>{const ve=m(ye);ue.set(ve,ye)}),N(),ge.forEach((ye,ve)=>{const Ue=ue.get(ve);Ue?Pr(ye,Ue)||D({type:"update",value:Ue}):q(ve,Ve)&&D({type:"delete",value:ye})}),ue.forEach((ye,ve)=>{U(ve,Ve),ge.has(ve)||D({type:"insert",value:ye})}),H(),O()}else Ae.isError&&(Ae.errorUpdatedAt!==S.lastErrorUpdatedAt&&(S.lastError=Ae.error,S.errorCount++,S.lastErrorUpdatedAt=Ae.errorUpdatedAt),console.error(`[QueryCollection] Error observing query ${String(ke)}:`,Ae.error),O())}},_e=ke=>I.has(ke),Ce=(ke,Ve)=>{if(!_e(Ve)){const He=C.get(Ve),Ae=xe(He),St=ke.subscribe(Ae);I.set(Ve,St);const se=ke.getCurrentResult();(se.isSuccess||se.isError)&&Ae(se)}},Me=()=>{S.observers.forEach(Ce)},st=()=>{I.forEach(ke=>{ke()}),I.clear()};L=!0;const Et=le.on("subscribers:change",({subscriberCount:ke})=>{ke>0?Me():ke===0&&st()});if(E==="eager"){const ke=he({});ke instanceof Promise&&ke.catch(()=>{})}else O();Me(),S.observers.forEach((ke,Ve)=>{const He=C.get(Ve);xe(He)(ke.getCurrentResult())});const Nt=ke=>{I.get(ke)?.(),I.delete(ke);const Ve=T.get(ke)??new Set,He=[];Ve.forEach(Ae=>{const St=M.get(Ae);St&&(St.delete(ke),St.size===0&&(M.delete(Ae),le.has(Ae)&&He.push(le.get(Ae))))}),He.length>0&&(N(),He.forEach(Ae=>{D({type:"delete",value:Ae})}),H()),S.observers.delete(ke),T.delete(ke),C.delete(ke),R.delete(ke)},fn=ke=>{const Ve=R.get(ke)||0,He=S.observers.get(ke);if(Ve<=0&&(I.get(ke)?.(),I.delete(ke)),He?.hasListeners()??!1){R.set(ke,0);return}Ve>0&&console.warn(`[cleanupQueryIfIdle] Invariant violation: refcount=${Ve} but no listeners. Cleaning up to prevent leak.`,{hashedQueryKey:ke}),Nt(ke)},rn=ke=>{Nt(ke)},Xn=s.getQueryCache().subscribe(ke=>{const Ve=ke.query.queryHash;ke.type==="removed"&&C.has(Ve)&&fn(Ve)});return{loadSubset:E==="eager"?void 0:he,unloadSubset:E==="eager"?void 0:ke=>{const Ve=P(ke),He=Cs(Ve),St=(R.get(He)||0)-1;St<=0?(R.set(He,0),fn(He)):R.set(He,St)},cleanup:async()=>{Et(),st();const ke=[...C.values()],Ve=[...S.observers.keys()];for(const He of Ve)rn(He);Xn(),await Promise.all(ke.map(async He=>{await s.cancelQueries({queryKey:He,exact:!0}),s.removeQueries({queryKey:He,exact:!0})}))}}},j=async re=>{const D=[...C.values()].map(H=>S.observers.get(Cs(H)).refetch({throwOnError:re?.throwOnError}));await Promise.all(D)},J=re=>{const N=typeof e=="function"?e({}):e;r?s.setQueryData(N,D=>{if(!D||typeof D!="object")return D;if(Array.isArray(D))return re;const H=r(D);if(Array.isArray(H)){for(const O of Object.keys(D))if(D[O]===H)return{...D,[O]:re}}if(Array.isArray(D.data))return{...D,data:re};if(Array.isArray(D.items))return{...D,items:re};if(Array.isArray(D.results))return{...D,results:re};for(const O of Object.keys(D))if(Array.isArray(D[O]))return{...D,[O]:re};return D}):s.setQueryData(N,re)};let ne=null;const me=re=>{const{begin:N,write:D,commit:H,collection:O}=re,le=typeof e=="function"?e({}):e;return ne={collection:O,queryClient:s,queryKey:le,getKey:m,begin:N,write:D,commit:H,updateCacheData:J},K(re)},X=w3(()=>ne),F=p?async re=>{const N=await p(re)??{};return N.refetch!==!1&&await j(),N}:void 0,B=y?async re=>{const N=await y(re)??{};return N.refetch!==!1&&await j(),N}:void 0,G=g?async re=>{const N=await g(re)??{};return N.refetch!==!1&&await j(),N}:void 0,ie=new k3(S,j,X);return{...w,getKey:m,syncMode:E,sync:{sync:me},onInsert:F,onUpdate:B,onDelete:G,utils:ie}}function Ar(){return Math.random().toString(36).substring(2,9)}async function C3(t){return new Promise((e,n)=>{const r=new FileReader;r.onloadend=()=>{const a=r.result.split(",")[1]||"";e(a)},r.onerror=n,r.readAsDataURL(t)})}function T3(t,e){const n=atob(t),r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return new Blob([r],{type:e})}function A3(t){const e=t.match(/^grpc:\/\/([^/]+)\/(.+)\/([^/]+)$/);return e?{server:e[1],service:e[2],method:e[3]}:{server:t.replace(/^grpc:\/\//,""),service:"",method:""}}function R3(t,e,n){return e&&n?`grpc://${t}/${e}/${n}`:`grpc://${t}`}async function z1(t){const e={id:t.id,name:t.name,variables:t.variables??[],creationTime:t.creationTime,executionTime:t.executionTime};switch(t.protocol){case"grpc":{const{server:n,service:r,method:s}=A3(t.url);e.grpc={server:n,service:r,method:s,schema:t.grpc?.schema,body:t.grpc?.body??"",response:t.grpc?.response};break}case"mcp":{e.mcp={url:t.url,headers:t.mcp?.headers,tool:t.mcp?.tool,resource:t.mcp?.resource,response:t.mcp?.response};break}case"openai":{e.openai={url:t.url,model:t.openai?.model??"",chat:t.openai?.chat,image:t.openai?.image,audio:t.openai?.audio,transcription:t.openai?.transcription,embeddings:t.openai?.embeddings,response:t.openai?.response};break}default:{let n=t.http?.body??{type:"none"};n.type==="form-data"?n={...n,data:n.data.map(s=>({...s,file:null}))}:n.type==="binary"&&(n={...n,file:null});let r;if(t.http?.response){const s=t.http.response.body instanceof Blob?await C3(t.http.response.body):"",a=t.http.response.body instanceof Blob?t.http.response.body.type:"application/octet-stream";r={status:t.http.response.status,statusCode:t.http.response.statusCode,headers:t.http.response.headers,body:s,bodyType:a,duration:t.http.response.duration,error:t.http.response.error}}e.http={method:t.http?.method??"GET",url:t.url,query:t.http?.query??[],headers:t.http?.headers??[],body:n,response:r};break}}return e}function O3(t){const e=t.grpc?"grpc":t.mcp?"mcp":t.openai?"openai":"rest",n={id:t.id,name:t.name,protocol:e,url:"",variables:t.variables??[],creationTime:t.creationTime,executionTime:t.executionTime};if(t.grpc){const r=t.grpc;n.url=R3(r.server,r.service,r.method),n.grpc={schema:r.schema,body:r.body||"",metadata:[],response:r.response}}else if(t.mcp){const r=t.mcp;n.url=r.url,n.mcp={headers:r.headers??[],tool:r.tool,resource:r.resource,response:r.response}}else if(t.openai){const r=t.openai;n.url=r.url,n.openai={model:r.model,chat:r.chat,image:r.image,audio:r.audio,transcription:r.transcription,embeddings:r.embeddings,response:r.response}}else if(t.http){const r=t.http;n.url=r.url,n.http={method:r.method,query:r.query,headers:r.headers,body:r.body,request:null,response:r.response?{status:r.response.status,statusCode:r.response.statusCode,headers:r.response.headers,body:r.response.body?T3(r.response.body,r.response.bodyType):new Blob([]),duration:r.response.duration,error:r.response.error}:null}}return n}const Cf="requests";async function N3(){const t=await fetch(`/data/${Cf}`);if(!t.ok)throw new Error(`Failed to list entries: ${t.statusText}`);const e=await t.json();return(await Promise.all(e.map(async r=>{const s=await fetch(`/data/${Cf}/${encodeURIComponent(r.id)}`);return s.ok?await s.json():null}))).filter(r=>r!==null)}async function P1(t){const e=await fetch(`/data/${Cf}/${encodeURIComponent(t.id)}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!e.ok)throw new Error(`Failed to save request: ${e.statusText}`)}async function I3(t){const e=await fetch(`/data/${Cf}/${encodeURIComponent(t)}`,{method:"DELETE"});if(!e.ok&&e.status!==404)throw new Error(`Failed to delete request: ${e.statusText}`)}const Mk=new DO({defaultOptions:{queries:{staleTime:1/0,refetchOnWindowFocus:!1}}}),qt=Sk(E3({queryKey:["requests"],queryFn:async()=>(await N3()).map(O3),getKey:t=>t.id,queryClient:Mk,onInsert:async({transaction:t})=>{await Promise.all(t.mutations.map(async e=>{const n=e.modified,r=await z1(n);await P1(r)}))},onUpdate:async({transaction:t})=>{await Promise.all(t.mutations.map(async e=>{const n=e.modified,r=await z1(n);await P1(r)}))},onDelete:async({transaction:t})=>{await Promise.all(t.mutations.map(async e=>{const n=e.original;await I3(n.id)}))}}));async function M3(){Array.from(qt.state.keys()).forEach(e=>qt.delete(e))}function Tf(t,e,n={}){const{missingDataPlaceholder:r=""}=n;let s=t;const a=/\{\{(\w+):([^}]+)\}\}/g;let l;for(;(l=a.exec(t))!==null;){const[u,f,d]=l,m=e.find(y=>y.type===f&&y.id===d);let p="";switch(f){case"file_base64":p=m?.data||r;break;case"base64":m?.data?p=btoa(m.data):p=r;break;case"file_dataurl":m?.data&&m?.mimeType?p=`data:${m.mimeType};base64,${m.data}`:m?.data?p=`data:application/octet-stream;base64,${m.data}`:p=r;break;case"timestamp":p=String(Date.now());break;case"uuid":typeof crypto<"u"&&crypto.randomUUID?p=crypto.randomUUID():p="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,y=>{const g=Math.random()*16|0;return(y==="x"?g:g&3|8).toString(16)});break;case"random_string":p=Math.random().toString(36).substring(2,18);break;default:p=u}s=s.replace(u,p)}return s}function Ka(){return{id:Ar(),enabled:!0,key:"",value:""}}function nf(t,e="rest"){const n={id:Ar(),name:t||"New Request",protocol:e,url:"",variables:[],creationTime:Date.now(),executionTime:null};switch(e){case"grpc":n.grpc={body:"",metadata:[Ka()]};break;case"mcp":n.mcp={headers:[Ka()]};break;case"openai":n.openai={model:"",chat:{input:[{id:Ar(),role:"user",content:[{type:"text",text:""}]}]}};break;default:n.http={method:"GET",headers:[Ka()],query:[Ka()],body:{type:"none"},request:null,response:null};break}return n}const Dk=Z.createContext(null),D3={request:nf(),isExecuting:!1,sidebarCollapsed:!1,aiPanelOpen:!1};function j3({children:t}){const[e,n]=Z.useState(D3),{data:r=[]}=f3(L=>L.from({req:qt}).orderBy(({req:P})=>P.executionTime??P.creationTime,"desc")),s=Z.useCallback(L=>{n(P=>({...P,request:{...P.request,...L}}))},[]),a=Z.useCallback((L,P)=>{try{const he=new URL(L),xe=he.protocol.replace(/:$/,""),_e=he.host,Ce=he.pathname.replace(/^\//,""),Me=P.replace(/^\//,""),st=`/proxy/mcp/${xe}/${_e}/${Me}`;return Ce?`${st}?path=${encodeURIComponent(Ce)}`:st}catch{return""}},[]),l=Z.useCallback((L,P)=>{try{const he=new URL(L),xe=he.protocol.replace(/:$/,""),_e=he.host,Ce=P.replace(/^\//,"");return`/proxy/${xe}/${_e}/${Ce}`}catch{return""}},[]),u=Z.useCallback(L=>{n(P=>{const he=nf(P.request.name,L);return he.id=P.request.id,he.url=P.request.url,{...P,request:he}})},[]),f=Z.useCallback(L=>{n(P=>({...P,request:{...P.request,http:{...P.request.http,method:L}}}))},[]),d=Z.useCallback(L=>{s({url:L})},[s]),m=Z.useCallback(L=>{n(P=>({...P,request:{...P.request,http:{...P.request.http,headers:L}}}))},[]),p=Z.useCallback(L=>{n(P=>({...P,request:{...P.request,http:{...P.request.http,query:L}}}))},[]),y=Z.useCallback(L=>{n(P=>({...P,request:{...P.request,http:P.request.http?{...P.request.http,body:L}:{method:"GET",headers:[],query:[],body:L,request:null,response:null}}}))},[]),g=Z.useCallback(L=>{s({variables:L})},[s]),v=Z.useCallback(L=>{n(P=>{const he=P.request.http?.request,_e={...he?.options??{insecure:!1,redirect:!0},...L};return{...P,request:{...P.request,http:P.request.http?{...P.request.http,request:he?{...he,options:_e}:null}:void 0}}})},[]),w=Z.useCallback(L=>{n(P=>({...P,request:{...P.request,grpc:P.request.grpc?{...P.request.grpc,body:L}:{body:L,metadata:[]}}}))},[]),E=Z.useCallback(L=>{n(P=>({...P,request:{...P.request,grpc:P.request.grpc?{...P.request.grpc,metadata:L}:{body:"",metadata:L}}}))},[]),S=Z.useCallback(L=>{n(P=>({...P,request:{...P.request,grpc:P.request.grpc?{...P.request.grpc,schema:L}:{body:"",metadata:[],schema:L}}}))},[]),C=Z.useCallback(L=>{n(P=>({...P,request:{...P.request,mcp:{headers:P.request.mcp?.headers??[Ka()],tool:L,resource:void 0}}}))},[]),T=Z.useCallback(L=>{n(P=>({...P,request:{...P.request,mcp:{headers:P.request.mcp?.headers??[Ka()],resource:L,tool:void 0}}}))},[]),M=Z.useCallback(L=>{n(P=>({...P,request:{...P.request,mcp:P.request.mcp?{...P.request.mcp,headers:L}:{headers:L}}}))},[]),I=Z.useCallback(L=>{n(P=>({...P,request:{...P.request,openai:P.request.openai?{...P.request.openai,model:L}:{model:L,chat:{input:[]}}}}))},[]),R=Z.useCallback(L=>{n(P=>({...P,request:{...P.request,openai:P.request.openai?{...P.request.openai,models:L}:{model:"",models:L,chat:{input:[]}}}}))},[]),U=Z.useCallback(L=>{n(P=>{const he=P.request.openai,xe={model:he?.model??"",...L==="chat"?{chat:he?.chat??{input:[{id:Ar(),role:"user",content:[{type:"text",text:""}]}]}}:L==="image"?{image:he?.image??{prompt:"",images:[{id:Ar(),data:""}]}}:L==="audio"?{audio:he?.audio??{text:"",voice:"alloy"}}:L==="transcription"?{transcription:he?.transcription??{file:""}}:{embeddings:he?.embeddings??{input:[{id:Ar(),text:""}]}}};return{...P,request:{...P.request,openai:xe}}})},[]),q=Z.useCallback(L=>{n(P=>({...P,request:{...P.request,openai:P.request.openai?{...P.request.openai,chat:{input:L}}:{model:"",chat:{input:L}}}}))},[]),K=Z.useCallback(L=>{n(P=>({...P,request:{...P.request,openai:P.request.openai?{...P.request.openai,image:{...P.request.openai.image,prompt:L}}:{model:"",image:{prompt:L}}}}))},[]),j=Z.useCallback(L=>{n(P=>({...P,request:{...P.request,openai:P.request.openai?{...P.request.openai,image:{prompt:P.request.openai.image?.prompt??"",images:L}}:{model:"",image:{prompt:"",images:L}}}}))},[]),J=Z.useCallback(L=>{n(P=>({...P,request:{...P.request,openai:P.request.openai?{...P.request.openai,audio:{...P.request.openai.audio,text:L}}:{model:"",audio:{text:L,voice:"alloy"}}}}))},[]),ne=Z.useCallback(L=>{n(P=>({...P,request:{...P.request,openai:P.request.openai?{...P.request.openai,audio:{text:P.request.openai.audio?.text??"",voice:L}}:{model:"",audio:{text:"",voice:L}}}}))},[]),me=Z.useCallback(L=>{n(P=>({...P,request:{...P.request,openai:P.request.openai?{...P.request.openai,transcription:{file:L}}:{model:"",transcription:{file:L}}}}))},[]),X=Z.useCallback(L=>{n(P=>({...P,request:{...P.request,openai:P.request.openai?{...P.request.openai,embeddings:{input:L}}:{model:"",embeddings:{input:L}}}}))},[]),F=Z.useCallback(async()=>{const L=e.request;if(!L.url)return null;n(P=>({...P,isExecuting:!0}));try{const P=a(L.url,"features");if(!P)throw new Error("Invalid MCP server URL");const he={};for(const Ce of L.mcp?.headers??[])Ce.enabled&&Ce.key&&(he[Ce.key]=Ce.value);const xe=await fetch(P,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({headers:he})});if(!xe.ok){const Ce=await xe.text();throw new Error(Ce||`HTTP ${xe.status}`)}const _e=await xe.json();return n(Ce=>({...Ce,isExecuting:!1})),_e}catch(P){const he=P instanceof Error?P.message:"Unknown error";return n(xe=>({...xe,isExecuting:!1})),{tools:[],resources:[],error:he}}},[e.request,s,a]),B=Z.useCallback(()=>{n(L=>{const{protocol:P}=L.request;return P==="grpc"&&L.request.grpc?{...L,request:{...L.request,grpc:{...L.request.grpc,response:void 0}}}:P==="mcp"&&L.request.mcp?{...L,request:{...L.request,mcp:{...L.request.mcp,response:void 0}}}:P==="openai"&&L.request.openai?{...L,request:{...L.request,openai:{...L.request.openai,response:void 0}}}:L.request.http?{...L,request:{...L.request,http:{...L.request.http,response:null}}}:L})},[]),G=Z.useCallback(async()=>{const L=e.request;n(P=>({...P,isExecuting:!0}));try{if(L.protocol==="grpc"){const ye=L.url.match(/^grpc:\/\/([^/]+)\/(.+)\/([^/]+)$/);if(!ye)throw new Error("Invalid gRPC URL format. Expected: grpc://host:port/service/method");const[,ve,Ue,mt]=ye,vt=L.grpc?.body??"{}",lt=Tf(vt,L.variables),ct={"Content-Type":"application/json"};(L.grpc?.metadata??[]).filter(Ct=>Ct.enabled&&Ct.key).forEach(Ct=>{ct[Ct.key]=Ct.value});const Ne=`/proxy/grpc/${ve}/${Ue}/${mt}`,gt=performance.now(),Ge=await fetch(Ne,{method:"POST",headers:ct,body:lt}),ut=Math.round(performance.now()-gt),ft=await Ge.text(),rt={};Ge.headers.forEach((Ct,Bn)=>{rt[Bn]=Ct});const tt=Date.now(),jt={...L,executionTime:tt,grpc:{...L.grpc,body:vt,metadata:L.grpc?.metadata??[],response:{body:ft,metadata:rt,duration:ut,error:Ge.ok?void 0:`HTTP ${Ge.status}`}}};r.find(Ct=>Ct.id===L.id)?qt.update(L.id,Ct=>{Object.assign(Ct,jt)}):qt.insert(jt),n(Ct=>({...Ct,request:jt,isExecuting:!1}));return}if(L.protocol==="mcp"){const ue=L.url;if(!ue)throw new Error("MCP server URL is required");const ye=performance.now();let ve;if(L.mcp?.tool){let ct={};if(L.mcp.tool.arguments)try{ct=JSON.parse(L.mcp.tool.arguments)}catch{}const Ne={};for(const ft of L.mcp?.headers??[])ft.enabled&&ft.key&&(Ne[ft.key]=ft.value);const gt=a(ue,"tool/call");if(!gt)throw new Error("Invalid MCP server URL");const Ge=await fetch(gt,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:L.mcp.tool.name,arguments:ct,headers:Ne})});if(!Ge.ok){const ft=await Ge.text();throw new Error(ft||`HTTP ${Ge.status}`)}ve=await Ge.json()}else if(L.mcp?.resource){const ct=a(ue,"resource/call");if(!ct)throw new Error("Invalid MCP server URL");const Ne={};for(const ut of L.mcp?.headers??[])ut.enabled&&ut.key&&(Ne[ut.key]=ut.value);const gt=await fetch(ct,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({uri:L.mcp.resource.uri,headers:Ne})});if(!gt.ok){const ut=await gt.text();throw new Error(ut||`HTTP ${gt.status}`)}ve=await gt.json()}else throw new Error("No tool or resource selected");const Ue=Math.round(performance.now()-ye),mt=Date.now(),vt={...L,executionTime:mt,mcp:{...L.mcp,response:{result:ve,duration:Ue}}};r.find(ct=>ct.id===L.id)?qt.update(L.id,ct=>{Object.assign(ct,vt)}):qt.insert(vt),n(ct=>({...ct,request:vt,isExecuting:!1}));return}if(L.protocol==="openai"){const ue=L.url.replace(/\/$/,""),ye=L.openai?.model,ve=!!L.openai?.chat;if(!ue)throw new Error("OpenAI API URL is required");if(!ye)throw new Error("Please select a model");const Ue=performance.now();let mt;if(ve){const Ne=(L.openai?.chat?.input??[]).map(rt=>({role:rt.role,content:rt.content.map(tt=>{switch(tt.type){case"text":return{type:"input_text",text:tt.text};case"file":return tt.data.startsWith("data:image/")?{type:"input_image",image_url:tt.data}:{type:"input_file",filename:tt.name||"file",file_data:tt.data}}})})),gt=l(ue,"/v1/responses"),Ge=await fetch(gt,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({model:ye,input:Ne})});if(!Ge.ok){const rt=await Ge.text();throw new Error(rt||`HTTP ${Ge.status}`)}const ut=await Ge.json();let ft="";if(ut.output&&Array.isArray(ut.output)){for(const rt of ut.output)if(rt.type==="message"&&rt.content)for(const tt of rt.content)tt.type==="output_text"&&(ft+=tt.text)}mt={result:{type:"text",text:ft},duration:Math.round(performance.now()-Ue)}}else if(L.openai?.image){const Ne=L.openai.image.prompt??"",Ge=(L.openai.image.images??[]).filter(ft=>ft.data.length>0),ut=Ge.length>0;if(!Ne)throw new Error("Please enter an image prompt");if(ut){if(Ge.length===0)throw new Error("Please upload at least one image");const ft=new FormData;ft.append("model",ye),ft.append("prompt",Ne);for(const Bn of Ge){const di=Bn.data.match(/^data:([^;]+);base64,(.+)$/);if(di){const Ji=di[1],Un=di[2],bo=atob(Un),_o=new Uint8Array(bo.length);for(let hi=0;hi<bo.length;hi++)_o[hi]=bo.charCodeAt(hi);const bc=new Blob([_o],{type:Ji});ft.append("image[]",bc,"image.png")}}const rt=l(ue,"/v1/images/edits"),tt=await fetch(rt,{method:"POST",body:ft});if(!tt.ok){const Bn=await tt.text();throw new Error(Bn||`HTTP ${tt.status}`)}const Nn=((await tt.json()).data||[])[0];mt={result:{type:"image",image:Nn?.b64_json||Nn?.url||""},duration:Math.round(performance.now()-Ue)}}else{const ft=l(ue,"/v1/images/generations"),rt=await fetch(ft,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({model:ye,prompt:Ne,response_format:"b64_json"})});if(!rt.ok){const Ct=await rt.text();throw new Error(Ct||`HTTP ${rt.status}`)}const jt=((await rt.json()).data||[])[0];mt={result:{type:"image",image:jt?.b64_json||jt?.url||""},duration:Math.round(performance.now()-Ue)}}}else if(L.openai?.audio){const Ne=L.openai?.audio?.text??"",gt=L.openai?.audio?.voice??"alloy";if(!Ne)throw new Error("Please enter text to convert to speech");const Ge=l(ue,"/v1/audio/speech"),ut=await fetch(Ge,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({model:ye,input:Ne,voice:gt})});if(!ut.ok){const jt=await ut.text();throw new Error(jt||`HTTP ${ut.status}`)}const ft=await ut.blob(),rt=new FileReader;mt={result:{type:"audio",audio:await new Promise((jt,Nn)=>{rt.onloadend=()=>{const Bn=rt.result.split(",")[1]||"";jt(Bn)},rt.onerror=Nn,rt.readAsDataURL(ft)})},duration:Math.round(performance.now()-Ue)}}else if(L.openai?.transcription){const Ne=L.openai?.transcription?.file??"";if(!Ne)throw new Error("Please select an audio file to transcribe");const[gt,Ge]=Ne.split(","),ut=gt?.split(":")[1]?.split(";")[0]||"audio/mpeg",ft=ut.split("/")[1]||"mp3",rt=atob(Ge||""),tt=new Uint8Array(rt.length);for(let Un=0;Un<rt.length;Un++)tt[Un]=rt.charCodeAt(Un);const jt=new Blob([tt],{type:ut}),Nn=new FormData;Nn.append("file",jt,`audio.${ft}`),Nn.append("model",ye);const Ct=l(ue,"/v1/audio/transcriptions"),Bn=await fetch(Ct,{method:"POST",body:Nn});if(!Bn.ok){const Un=await Bn.text();throw new Error(Un||`HTTP ${Bn.status}`)}mt={result:{type:"transcription",text:(await Bn.json()).text||""},duration:Math.round(performance.now()-Ue)}}else if(L.openai?.embeddings){const gt=(L.openai?.embeddings?.input??[]).filter(tt=>tt.text.trim()).map(tt=>tt.text);if(gt.length===0)throw new Error("Please enter at least one text to convert to embeddings");const Ge=l(ue,"/v1/embeddings"),ut=await fetch(Ge,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({model:ye,input:gt})});if(!ut.ok){const tt=await ut.text();throw new Error(tt||`HTTP ${ut.status}`)}mt={result:{type:"embeddings",embeddings:((await ut.json()).data||[]).map(tt=>tt.embedding)},duration:Math.round(performance.now()-Ue)}}else throw new Error("Invalid OpenAI request type");const vt=Date.now(),lt={...L,executionTime:vt,openai:{...L.openai,response:mt}};r.find(Ne=>Ne.id===L.id)?qt.update(L.id,Ne=>{Object.assign(Ne,lt)}):qt.insert(lt),n(Ne=>({...Ne,request:lt,isExecuting:!1}));return}const P={};(L.http?.headers??[]).filter(ue=>ue.enabled&&ue.key).forEach(ue=>{P[ue.key]=ue.value});const he=new URLSearchParams,xe=L.http?.method??"GET";(L.http?.query??[]).filter(ue=>ue.enabled&&ue.key).forEach(ue=>{he.append(ue.key,ue.value)});const _e=L.http?.body??{type:"none"};let Ce,Me="",st=!1;switch(_e.type){case"json":{Ce=Tf(_e.content,L.variables),Me=_e.content,P["Content-Type"]||(P["Content-Type"]="application/json");break}case"form-urlencoded":{const ue=new URLSearchParams;_e.data.filter(ye=>ye.enabled&&ye.key).forEach(ye=>{ue.append(ye.key,ye.value)}),Ce=ue.toString(),Me=ue.toString(),P["Content-Type"]||(P["Content-Type"]="application/x-www-form-urlencoded");break}case"form-data":{const ue=new FormData,ye=[];_e.data.filter(ve=>ve.enabled&&ve.key).forEach(ve=>{ve.type==="file"&&ve.file?(ue.append(ve.key,ve.file,ve.fileName),ye.push(`${ve.key}: [File: ${ve.fileName}]`)):ve.type==="text"&&(ue.append(ve.key,ve.value),ye.push(`${ve.key}: ${ve.value}`))}),Ce=ue,Me=ye.join(`
`),st=!0;break}case"binary":{_e.file&&(Ce=_e.file,Me=`[Binary file: ${_e.fileName}]`,P["Content-Type"]||(P["Content-Type"]=_e.file.type||"application/octet-stream"));break}case"raw":Ce=_e.content,Me=_e.content,P["Content-Type"]||(P["Content-Type"]="text/plain");break}const Et=L.http?.request?.options??{insecure:!1,redirect:!0};Et.insecure&&(P["X-Prism-Insecure"]="true"),Et.redirect&&(P["X-Prism-Redirect"]="true");const Nt=new URL(L.url);let fn="/proxy/"+Nt.protocol.slice(0,-1)+"/"+Nt.host+Nt.pathname;const rn=he.toString();rn&&(fn+="?"+rn);const Xn={method:xe,url:L.url,headers:P,query:Object.fromEntries(he),body:Me,options:Et},er={...P};st&&delete er["Content-Type"];const Sn=performance.now(),dn=await fetch(fn,{method:xe,headers:er,body:Ce&&xe!=="GET"&&xe!=="HEAD"?Ce:void 0}),ke=Math.round(performance.now()-Sn),Ve=await dn.blob(),He={};dn.headers.forEach((ue,ye)=>{He[ye]=ue});const Ae={status:dn.statusText||String(dn.status),statusCode:dn.status,headers:He,body:Ve,duration:ke},St=Date.now(),se={...L,executionTime:St,http:{...L.http,request:Xn,response:Ae}};r.find(ue=>ue.id===L.id)?qt.update(L.id,ue=>{Object.assign(ue,se)}):qt.insert(se),n(ue=>({...ue,request:se,isExecuting:!1}))}catch(P){const he=Date.now(),xe=P instanceof Error?P.message:"Unknown error";if(L.protocol==="grpc"){const _e={...L,executionTime:he,grpc:{...L.grpc,response:{body:"",duration:0,error:xe}}};r.find(Me=>Me.id===L.id)?qt.update(L.id,Me=>{Object.assign(Me,_e)}):qt.insert(_e),n(Me=>({...Me,request:_e,isExecuting:!1}))}else if(L.protocol==="mcp"){const _e={...L,executionTime:he,mcp:{headers:L.mcp?.headers??[],tool:L.mcp?.tool,resource:L.mcp?.resource,response:{result:void 0,duration:0,error:xe}}};r.find(Me=>Me.id===L.id)?qt.update(L.id,Me=>{Object.assign(Me,_e)}):qt.insert(_e),n(Me=>({...Me,request:_e,isExecuting:!1}))}else if(L.protocol==="openai"){const Ce=!!L.openai?.chat?{result:{type:"text",text:""},duration:0,error:xe}:{result:{type:"image",image:""},duration:0,error:xe},Me={...L,executionTime:he,openai:{...L.openai,response:Ce}};r.find(Et=>Et.id===L.id)?qt.update(L.id,Et=>{Object.assign(Et,Me)}):qt.insert(Me),n(Et=>({...Et,request:Me,isExecuting:!1}))}else{const _e={status:"",statusCode:0,headers:{},body:new Blob,duration:0,error:xe},Ce={...L,executionTime:he,http:{...L.http,response:_e}};r.find(st=>st.id===L.id)?qt.update(L.id,st=>{Object.assign(st,Ce)}):qt.insert(Ce),n(st=>({...st,request:Ce,isExecuting:!1}))}}},[e.request,r,a,l]),ie=Z.useCallback(L=>{const P=nf(L.name,L.protocol??"rest");P.id=L.id,P.url=L.url,P.executionTime=L.executionTime,P.variables=L.variables??[],L.http&&(P.http={method:L.http.method,headers:[...L.http.headers],query:[...L.http.query],body:L.http.body,request:L.http.request,response:L.http.response},L.http.body.type==="form-data"?P.http.body={type:"form-data",data:L.http.body.data.map(he=>({...he,file:null}))}:L.http.body.type==="binary"&&(P.http.body={type:"binary",file:null,fileName:L.http.body.fileName})),L.grpc&&(P.grpc={...L.grpc}),L.mcp&&(P.mcp={...L.mcp}),L.openai&&(P.openai={...L.openai}),n(he=>({...he,request:P}))},[]),re=Z.useCallback(async()=>{await M3()},[]),N=Z.useCallback(async L=>{qt.delete(L)},[]),D=Z.useCallback(()=>{n(L=>({...L,sidebarCollapsed:!L.sidebarCollapsed}))},[]),H=Z.useCallback(()=>{n(L=>({...L,aiPanelOpen:!L.aiPanelOpen}))},[]),O=Z.useCallback(()=>{n(L=>({...L,request:nf()}))},[]),le={request:e.request,isExecuting:e.isExecuting,history:r,sidebarCollapsed:e.sidebarCollapsed,aiPanelOpen:e.aiPanelOpen,setProtocol:u,setMethod:f,setUrl:d,setHeaders:m,setQuery:p,setBody:y,setVariables:g,setOptions:v,executeRequest:G,clearResponse:B,newRequest:O,setGrpcBody:w,setGrpcMetadata:E,setGrpcMethodSchema:S,setMcpTool:C,setMcpResource:T,setMcpHeaders:M,discoverMcpFeatures:F,setOpenAIModel:I,setOpenAIModels:R,setOpenAIBodyType:U,setOpenAIChatInput:q,setOpenAIImagePrompt:K,setOpenAIImageFiles:j,setOpenAIAudioText:J,setOpenAIAudioVoice:ne,setOpenAITranscriptionFile:me,setOpenAIEmbeddingsInput:X,loadFromHistory:ie,clearHistory:re,deleteHistoryEntry:N,toggleSidebar:D,toggleAiPanel:H};return x.jsx(Dk.Provider,{value:le,children:t})}var L3=ik();const jk=Z.createContext(null);function z3(t){const e=Pe.c(6),{children:n}=t,[r,s]=Z.useState(null);let a;e[0]===Symbol.for("react.memo_cache_sentinel")?(a=d=>{s(d)},e[0]=a):a=e[0];const l=a;let u;e[1]!==r?(u={portalTarget:r,setPortalTarget:l},e[1]=r,e[2]=u):u=e[2];let f;return e[3]!==n||e[4]!==u?(f=x.jsx(jk.Provider,{value:u,children:n}),e[3]=n,e[4]=u,e[5]=f):f=e[5],f}function Lk(){const t=Z.useContext(jk);if(!t)throw new Error("useRequestBarPortal must be used within RequestBarPortalProvider");return t}function P3(t){const e=Pe.c(3),{children:n}=t,{portalTarget:r}=Lk();if(!r)return null;let s;return e[0]!==n||e[1]!==r?(s=L3.createPortal(n,r),e[0]=n,e[1]=r,e[2]=s):s=e[2],s}function Xt(){const t=Z.useContext(Dk);if(!t)throw new Error("useClient must be used within a ClientProvider");return t}const B3=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),U3=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),B1=t=>{const e=U3(t);return e.charAt(0).toUpperCase()+e.slice(1)},zk=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),$3=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var q3={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const F3=Z.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:a,iconNode:l,...u},f)=>Z.createElement("svg",{ref:f,...q3,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:zk("lucide",s),...!a&&!$3(u)&&{"aria-hidden":"true"},...u},[...l.map(([d,m])=>Z.createElement(d,m)),...Array.isArray(a)?a:[a]]));const Je=(t,e)=>{const n=Z.forwardRef(({className:r,...s},a)=>Z.createElement(F3,{ref:a,iconNode:e,className:zk(`lucide-${B3(B1(t))}`,`lucide-${t}`,r),...s}));return n.displayName=B1(t),n};const V3=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],H3=Je("box",V3);const G3=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Pk=Je("check",G3);const K3=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],li=Je("chevron-down",K3);const Z3=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],fd=Je("chevron-right",Z3);const Q3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Bk=Je("circle-alert",Q3);const J3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Dy=Je("circle-check",J3);const Y3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],W3=Je("circle-x",Y3);const X3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Uk=Je("circle",X3);const eD=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],jl=Je("clock",eD);const tD=[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]],nD=Je("cpu",tD);const rD=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],$k=Je("eye",rD);const sD=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],uo=Je("file-text",sD);const iD=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}]],Af=Je("file",iD);const aD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],oD=Je("globe",aD);const lD=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],qk=Je("hash",lD);const cD=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],uD=Je("image",cD);const fD=[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]],wg=Je("link-2",fD);const dD=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Rf=Je("loader-circle",dD);const hD=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],pD=Je("music",hD);const mD=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}],["path",{d:"m8 9 3 3-3 3",key:"12hl5m"}]],gD=Je("panel-right-close",mD);const yD=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}],["path",{d:"m10 15-3-3 3-3",key:"1pgupc"}]],bD=Je("panel-right-open",yD);const _D=[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]],U1=Je("paperclip",_D);const vD=[["path",{d:"M12 22v-5",key:"1ega77"}],["path",{d:"M15 8V2",key:"18g5xt"}],["path",{d:"M17 8a1 1 0 0 1 1 1v4a4 4 0 0 1-4 4h-4a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1z",key:"1xoxul"}],["path",{d:"M9 8V2",key:"14iosj"}]],xD=Je("plug",vD);const wD=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Of=Je("refresh-cw",wD);const SD=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],kD=Je("search",SD);const ED=[["path",{d:"M3.714 3.048a.498.498 0 0 0-.683.627l2.843 7.627a2 2 0 0 1 0 1.396l-2.842 7.627a.498.498 0 0 0 .682.627l18-8.5a.5.5 0 0 0 0-.904z",key:"117uat"}],["path",{d:"M6 12h16",key:"s4cdu5"}]],CD=Je("send-horizontal",ED);const TD=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],AD=Je("send",TD);const RD=[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]],OD=Je("server",RD);const ND=[["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 18h1.973a4 4 0 0 0 3.3-1.7l5.454-8.6a4 4 0 0 1 3.3-1.7H22",key:"1ailkh"}],["path",{d:"M2 6h1.972a4 4 0 0 1 3.6 2.2",key:"km57vx"}],["path",{d:"M22 18h-6.041a4 4 0 0 1-3.3-1.8l-.359-.45",key:"os18l9"}]],Fk=Je("shuffle",ND);const ID=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],so=Je("sparkles",ID);const MD=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],DD=Je("square",MD);const jD=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Ki=Je("trash-2",jD);const LD=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],zD=Je("type",LD);const PD=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],jy=Je("upload",PD);const BD=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],Nf=Je("wrench",BD);const UD=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],dd=Je("x",UD);const $D=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],qD=Je("zap",$D),FD={GET:"text-green-600 dark:text-green-400",POST:"text-yellow-600 dark:text-yellow-400",PUT:"text-blue-600 dark:text-blue-400",PATCH:"text-purple-600 dark:text-purple-400",DELETE:"text-red-600 dark:text-red-400",OPTIONS:"text-neutral-500 dark:text-neutral-400",HEAD:"text-neutral-500 dark:text-neutral-400"};function VD(t){return t?t>=200&&t<300?"bg-green-500":t>=300&&t<400?"bg-yellow-500":t>=400&&t<500?"bg-orange-500":"bg-red-500":"bg-neutral-500"}function HD(t){try{return new URL(t.url).hostname}catch{return"Other"}}function GD(t){if(t.protocol==="mcp")return t.mcp?.tool?.name?t.mcp.tool.name:t.mcp?.resource?.uri?t.mcp.resource.uri:"MCP Request";if(t.protocol==="openai")return t.openai?.model||"No model";if(t.protocol==="grpc"){try{const n=new URL(t.url).pathname.split("/").filter(Boolean);if(n.length>0)return n[n.length-1]}catch{}return t.url}try{const e=new URL(t.url);return e.pathname+e.search}catch{return t.url}}function KD(t){return t.protocol==="grpc"?"gRPC":t.protocol==="mcp"?"MCP":t.protocol==="openai"?"OpenAI":t.http?.method??"GET"}function ZD(t){return t.protocol==="grpc"?"text-cyan-600 dark:text-cyan-400":t.protocol==="mcp"?"text-violet-600 dark:text-violet-400":t.protocol==="openai"?"text-purple-600 dark:text-purple-400":FD[t.http?.method??"GET"]}function QD(t){const e=new Map;for(const n of t){const r=HD(n),s=e.get(r)||[];s.push(n),e.set(r,s)}return Array.from(e.entries()).map(([n,r])=>({hostname:n,entries:r,latestTimestamp:Math.max(...r.map(s=>s.executionTime??0))})).sort((n,r)=>r.latestTimestamp-n.latestTimestamp)}function JD(){const t=Pe.c(20),{history:e,sidebarCollapsed:n,loadFromHistory:r,deleteHistoryEntry:s,clearHistory:a,toggleSidebar:l}=Xt();let u;t[0]!==e?(u=QD(e),t[0]=e,t[1]=u):u=t[1];const f=u;if(e.length===0||n)return null;let d;t[2]===Symbol.for("react.memo_cache_sentinel")?(d=x.jsx("h1",{className:"text-sm font-semibold text-neutral-700 dark:text-neutral-200 pl-0.5",children:"Prism"}),t[2]=d):d=t[2];let m;t[3]!==a||t[4]!==e.length?(m=e.length>0&&x.jsx("button",{onClick:a,className:"p-1.5 rounded-lg hover:bg-neutral-100 dark:hover:bg-white/5 transition-colors",title:"Clear history",children:x.jsx(Ki,{className:"w-4 h-4 text-neutral-500 dark:text-neutral-400"})}),t[3]=a,t[4]=e.length,t[5]=m):m=t[5];let p;t[6]===Symbol.for("react.memo_cache_sentinel")?(p=x.jsx(bD,{className:"w-4 h-4 text-neutral-500 dark:text-neutral-400"}),t[6]=p):p=t[6];let y;t[7]!==l?(y=x.jsx("button",{onClick:l,className:"p-1.5 rounded-lg hover:bg-neutral-100 dark:hover:bg-white/5 transition-colors",title:"Hide sidebar",children:p}),t[7]=l,t[8]=y):y=t[8];let g;t[9]!==m||t[10]!==y?(g=x.jsxs("div",{className:"px-3 py-2.5 flex items-center justify-between gap-2",children:[d,x.jsxs("div",{className:"flex items-center gap-1",children:[m,y]})]}),t[9]=m,t[10]=y,t[11]=g):g=t[11];let v;t[12]!==s||t[13]!==f||t[14]!==e.length||t[15]!==r?(v=x.jsx("div",{className:"flex-1 overflow-y-auto px-2",children:e.length===0?x.jsx("div",{className:"px-2 py-8 text-center text-neutral-400 dark:text-neutral-600 text-xs",children:"No history yet"}):x.jsx("div",{className:"space-y-3 pb-2",children:f.map(E=>x.jsxs("div",{children:[x.jsx("div",{className:"px-2 py-1 text-[10px] font-medium text-neutral-400 dark:text-neutral-500 uppercase tracking-wider truncate",title:E.hostname,children:E.hostname}),x.jsx("div",{className:"space-y-0.5",children:E.entries.map(S=>x.jsxs("div",{className:"group flex items-center gap-2 px-3 py-1.5 rounded-lg hover:bg-neutral-100 dark:hover:bg-white/5 cursor-pointer transition-colors",onClick:()=>r(S),children:[x.jsx("span",{className:`w-1.5 h-1.5 rounded-full shrink-0 ${VD(S.http?.response?.statusCode??(S.grpc?.response?.error?0:S.grpc?.response?200:null)??(S.mcp?.response?.error?0:S.mcp?.response?200:null)??(S.openai?.response?.error?0:S.openai?.response?200:null))}`}),x.jsx("span",{className:`text-[10px] font-semibold shrink-0 ${ZD(S)}`,children:KD(S)}),x.jsx("span",{className:"text-xs text-neutral-500 dark:text-neutral-400 truncate flex-1",title:S.url,children:GD(S)}),x.jsx("button",{onClick:C=>{C.stopPropagation(),s(S.id)},className:"opacity-0 group-hover:opacity-100 inline-flex items-center justify-center w-5 h-5 hover:bg-neutral-200 dark:hover:bg-white/8 rounded transition-all shrink-0",title:"Delete",children:x.jsx("svg",{className:"w-3 h-3 text-neutral-400 dark:text-neutral-500 hover:text-rose-500 dark:hover:text-rose-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},S.id))})]},E.hostname))})}),t[12]=s,t[13]=f,t[14]=e.length,t[15]=r,t[16]=v):v=t[16];let w;return t[17]!==g||t[18]!==v?(w=x.jsxs("aside",{className:"w-64 bg-white dark:bg-[#1a1a1a]/60 dark:backdrop-blur-xl border border-neutral-200 dark:border-white/8 rounded-xl flex flex-col overflow-hidden dark:shadow-2xl",children:[g,v]}),t[17]=g,t[18]=v,t[19]=w):w=t[19],w}const dm=[{value:"rest",label:"HTTP",icon:oD},{value:"grpc",label:"gRPC",icon:OD},{value:"mcp",label:"MCP",icon:xD},{value:"openai",label:"OpenAI",icon:so}];function YD(){const t=Pe.c(23),{request:e,setProtocol:n}=Xt(),r=e?.protocol??"rest",[s,a]=Z.useState(!1),l=Z.useRef(null);let u;t[0]!==r?(u=dm.find(T=>T.value===r)??dm[0],t[0]=r,t[1]=u):u=t[1];const f=u,d=f.icon;let m,p;t[2]===Symbol.for("react.memo_cache_sentinel")?(m=()=>{const T=M=>{l.current&&!l.current.contains(M.target)&&a(!1)};return document.addEventListener("mousedown",T),()=>document.removeEventListener("mousedown",T)},p=[],t[2]=m,t[3]=p):(m=t[2],p=t[3]),Z.useEffect(m,p);let y;t[4]!==s?(y=()=>a(!s),t[4]=s,t[5]=y):y=t[5];let g;t[6]!==d?(g=x.jsx(d,{className:"w-4 h-4"}),t[6]=d,t[7]=g):g=t[7];let v;t[8]!==f.label?(v=x.jsx("span",{className:"text-xs font-medium",children:f.label}),t[8]=f.label,t[9]=v):v=t[9];let w;t[10]===Symbol.for("react.memo_cache_sentinel")?(w=x.jsx(li,{className:"w-3 h-3"}),t[10]=w):w=t[10];let E;t[11]!==f.label||t[12]!==y||t[13]!==g||t[14]!==v?(E=x.jsxs("button",{type:"button",onClick:y,className:"flex items-center gap-1 px-2 py-1.5 rounded-md hover:bg-neutral-100 dark:hover:bg-white/10 transition-colors text-neutral-600 dark:text-neutral-400",title:f.label,children:[g,v,w]}),t[11]=f.label,t[12]=y,t[13]=g,t[14]=v,t[15]=E):E=t[15];let S;t[16]!==s||t[17]!==r||t[18]!==n?(S=s&&x.jsx("div",{className:"absolute top-full left-0 mt-1 bg-white dark:bg-[#1a1a1a] border border-neutral-200 dark:border-white/10 rounded-md shadow-lg z-50 min-w-28",children:dm.map(T=>{const M=T.icon;return x.jsxs("button",{type:"button",onClick:()=>{n(T.value),a(!1)},className:`w-full flex items-center gap-2 px-3 py-1.5 text-sm transition-colors ${r===T.value?"bg-neutral-100 dark:bg-white/10 text-neutral-900 dark:text-neutral-100":"text-neutral-600 dark:text-neutral-400 hover:bg-neutral-50 dark:hover:bg-white/5"}`,children:[x.jsx(M,{className:"w-4 h-4"}),T.label]},T.value)})}),t[16]=s,t[17]=r,t[18]=n,t[19]=S):S=t[19];let C;return t[20]!==E||t[21]!==S?(C=x.jsxs("div",{ref:l,className:"relative",children:[E,S]}),t[20]=E,t[21]=S,t[22]=C):C=t[22],C}let xl={};async function WD(){try{const t=await fetch("/config.json");if(t.ok){const e=await t.json();xl={...xl,...e}}else console.warn("Failed to load config.json, using defaults");return xl}catch(t){return console.warn("Error loading config:",t),xl}}function Ly(){return xl}function XD(){const t=Pe.c(31),{request:e,isExecuting:n,executeRequest:r,aiPanelOpen:s,toggleAiPanel:a}=Xt();let l;t[0]===Symbol.for("react.memo_cache_sentinel")?(l=Ly().ai?.model,t[0]=l):l=t[0];const u=!!l,f=n,d=e?.protocol??"rest",m=e?.url??"",p=nj;let y;t[1]!==m?(y=p(m),t[1]=m,t[2]=y):y=t[2];const{host:g,service:v,method:w}=y,E=!!e?.mcp?.tool||!!e?.mcp?.resource,S=e?.openai?.model??"";let C;t[3]!==e?.openai?.chat?.input?(C=e?.openai?.chat?.input??[],t[3]=e?.openai?.chat?.input,t[4]=C):C=t[4];const T=C,I=e?.openai?.image?.prompt??"",R=e?.openai?.audio?.text??"",U=e?.openai?.transcription?.file??"";let q;t[5]!==e?.openai?.embeddings?.input?(q=e?.openai?.embeddings?.input??[],t[5]=e?.openai?.embeddings?.input,t[6]=q):q=t[6];const K=q;let j;t[7]!==R||t[8]!==T||t[9]!==K||t[10]!==I||t[11]!==U||t[12]!==e?.openai?.chat||t[13]!==e?.openai?.embeddings||t[14]!==e?.openai?.image||t[15]!==e?.openai?.transcription?(j=e?.openai?.chat?T.length>0&&T.some(tj):e?.openai?.image?I.trim().length>0:e?.openai?.transcription?U.length>0:e?.openai?.embeddings?K.some(ej):R.trim().length>0,t[7]=R,t[8]=T,t[9]=K,t[10]=I,t[11]=U,t[12]=e?.openai?.chat,t[13]=e?.openai?.embeddings,t[14]=e?.openai?.image,t[15]=e?.openai?.transcription,t[16]=j):j=t[16];const J=j,ne=d==="rest"?m.length>0:d==="mcp"?m.length>0&&E:d==="openai"?m.length>0&&S.length>0&&J:g.length>0&&v.length>0&&w.length>0;let me;t[17]!==r?(me=()=>{r()},t[17]=r,t[18]=me):me=t[18];const X=me,F=f||!ne;let B;t[19]!==f?(B=f?x.jsxs("svg",{className:"w-4 h-4 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[x.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"3"}),x.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):x.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14 5l7 7m0 0l-7 7m7-7H3"})}),t[19]=f,t[20]=B):B=t[20];let G;t[21]!==X||t[22]!==F||t[23]!==B?(G=x.jsx("button",{type:"button",onClick:X,disabled:F,className:"p-1.5 hover:bg-neutral-100 dark:hover:bg-white/10 disabled:opacity-30 disabled:cursor-not-allowed rounded-md transition-colors text-neutral-500 dark:text-neutral-400 hover:text-neutral-700 dark:hover:text-neutral-200",title:"Send request",children:B}),t[21]=X,t[22]=F,t[23]=B,t[24]=G):G=t[24];let ie;t[25]!==s||t[26]!==a?(ie=u&&x.jsx("button",{type:"button",onClick:a,className:`p-1.5 hover:bg-neutral-100 dark:hover:bg-white/10 rounded-md transition-colors ${s?"text-amber-500 hover:text-amber-600":"text-neutral-500 dark:text-neutral-400 hover:text-neutral-700 dark:hover:text-neutral-200"}`,title:"AI Assistant",children:x.jsx(so,{className:"w-4 h-4"})}),t[25]=s,t[26]=a,t[27]=ie):ie=t[27];let re;return t[28]!==G||t[29]!==ie?(re=x.jsxs(P3,{children:[G,ie]}),t[28]=G,t[29]=ie,t[30]=re):re=t[30],re}function ej(t){return t.text.trim().length>0}function tj(t){return t.content.length>0}function nj(t){const e=t.match(/^grpc:\/\/([^/]*)(?:\/([^/]*)(?:\/([^/]*))?)?$/);return e?{host:e[1]||"",service:e[2]||"",method:e[3]||""}:{host:"",service:"",method:""}}const rj=["GET","POST","PUT","PATCH","DELETE","OPTIONS","HEAD"],sj={GET:"text-emerald-600 dark:text-emerald-400",POST:"text-amber-600 dark:text-amber-400",PUT:"text-blue-600 dark:text-blue-400",PATCH:"text-purple-600 dark:text-purple-400",DELETE:"text-rose-600 dark:text-rose-400",OPTIONS:"text-neutral-500 dark:text-neutral-400",HEAD:"text-neutral-500 dark:text-neutral-400"};function ij(){const t=Pe.c(15),{request:e,setUrl:n,setMethod:r}=Xt(),s=e?.http?.method??"GET",a=e?.url??"";let l;t[0]!==r?(l=g=>r(g.target.value),t[0]=r,t[1]=l):l=t[1];const u=`px-2 py-1 bg-transparent font-semibold text-xs focus:outline-none cursor-pointer ${sj[s]}`;let f;t[2]===Symbol.for("react.memo_cache_sentinel")?(f=rj.map(aj),t[2]=f):f=t[2];let d;t[3]!==s||t[4]!==l||t[5]!==u?(d=x.jsx("select",{value:s,onChange:l,className:u,children:f}),t[3]=s,t[4]=l,t[5]=u,t[6]=d):d=t[6];let m;t[7]!==n?(m=g=>n(g.target.value),t[7]=n,t[8]=m):m=t[8];let p;t[9]!==m||t[10]!==a?(p=x.jsx("input",{type:"text",value:a,onChange:m,placeholder:"Enter request URL",className:"flex-1 px-3 py-1.5 bg-transparent text-neutral-800 dark:text-neutral-100 text-sm placeholder-neutral-400 dark:placeholder-neutral-600 focus:outline-none"}),t[9]=m,t[10]=a,t[11]=p):p=t[11];let y;return t[12]!==d||t[13]!==p?(y=x.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[d,p]}),t[12]=d,t[13]=p,t[14]=y):y=t[14],y}function aj(t){return x.jsx("option",{value:t,className:"bg-white dark:bg-[#1a1a1a]",children:t},t)}function $1(t){const e=[],n=/\{\{(\w+):([^{}]+)\}\}/g;let r;for(;(r=n.exec(t))!==null;)e.push({start:r.index,end:r.index+r[0].length,type:r[1],id:r[2],full:r[0]});return e}function rf(t){if(t.nodeType===Node.TEXT_NODE)return(t.textContent||"").replace(/\u200B/g,"");if(t.classList?.contains("variable-chip"))return t.dataset.marker||"";if(t.tagName==="BR")return`
`;let e="";const n=t.tagName==="DIV"||t.tagName==="P";for(const r of t.childNodes)e+=rf(r);return n&&e&&!e.endsWith(`
`)&&(e+=`
`),e}function Vk(t,e){if(e.rangeCount===0)return"";const n=e.getRangeAt(0),r=n.startContainer,s=n.startOffset;let a="",l=!1;function u(f){if(!l){if(f===r)if(f.nodeType===Node.TEXT_NODE){a+=(f.textContent||"").slice(0,s).replace(/\u200B/g,""),l=!0;return}else{const d=f.childNodes;for(let m=0;m<s;m++)if(u(d[m]),l)return;l=!0;return}if(f.nodeType===Node.TEXT_NODE)a+=(f.textContent||"").replace(/\u200B/g,"");else if(f.nodeType===Node.ELEMENT_NODE){const d=f;if(d.classList.contains("variable-chip")){if(d.contains(r)){l=!0;return}a+=d.dataset.marker||""}else if(d.tagName==="BR")a+=`
`;else if(d.tagName==="DIV"||d.tagName==="P"){for(const m of Array.from(d.childNodes))if(u(m),l)return;a&&!a.endsWith(`
`)&&(a+=`
`)}else for(const m of Array.from(d.childNodes))if(u(m),l)return}}}return u(t),a}function oj(t){const e=window.getSelection();return!e||e.rangeCount===0||!t.contains(e.anchorNode)?null:Vk(t,e).length}function lj(t,e){let n=0,r=!1;function s(a){if(!r){if(a.nodeType===Node.TEXT_NODE){const l=a.textContent||"",f=l.replace(/\u200B/g,"").length;if(n+f>=e){const d=e-n;let m=0,p=0;for(;p<d&&m<l.length;)l[m]!==""&&p++,m++;const y=document.createRange();y.setStart(a,m),y.setEnd(a,m);const g=window.getSelection();g?.removeAllRanges(),g?.addRange(y),r=!0;return}n+=f}else if(a.nodeType===Node.ELEMENT_NODE){const l=a;if(l.classList.contains("variable-chip")){const u=(l.dataset.marker||"").length;n+=u}else if(l.tagName==="BR")n+=1;else{const u=l.tagName==="DIV"||l.tagName==="P";for(const f of Array.from(a.childNodes))if(s(f),r)return;u&&n<e&&(n+=1)}}}}s(t)}function cj(t,e,n){switch(t){case"file_base64":case"file_dataurl":return n?.data?n.name||"file":"Select file...";case"base64":if(n?.data){const r=n.data;return r.length>12?r.slice(0,12)+"":r}return"Enter text...";default:return n?.name||t}}function uj(t){const e="w-3 h-3";switch(t){case"file_base64":case"file_dataurl":return`<svg class="${e}" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/></svg>`;case"base64":return`<svg class="${e}" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="4" y1="9" x2="20" y2="9"/><line x1="4" y1="15" x2="20" y2="15"/><line x1="10" y1="3" x2="8" y2="21"/><line x1="16" y1="3" x2="14" y2="21"/></svg>`;case"timestamp":return`<svg class="${e}" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>`;case"uuid":return`<svg class="${e}" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"/><path d="M5 3v4"/><path d="M9 5H1"/></svg>`;case"random_string":return`<svg class="${e}" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M2 18h1.4c1.3 0 2.5-.6 3.3-1.7l14.2-12.6c.8-1.1 2-1.7 3.3-1.7H22"/><path d="M2 6h1.4c1.3 0 2.5.6 3.3 1.7l14.2 12.6c.8 1.1 2 1.7 3.3 1.7H22"/></svg>`;default:return""}}function q1(t,e,n,r){const s=r.find(m=>m.type===t&&m.id===e),a=t==="file_base64"||t==="file_dataurl"||t==="base64",l=s&&s.data,u=document.createElement("span");u.contentEditable="false",u.className=`variable-chip inline-flex items-center gap-1 px-1.5 py-0.5 mx-0.5 rounded text-xs font-medium align-baseline select-none ${a&&!l?"bg-amber-500/20 text-amber-300 border border-amber-500/30":"bg-blue-500/20 text-blue-300 border border-blue-500/30"} ${a?"cursor-pointer hover:bg-blue-500/30":""}`,u.dataset.marker=n,u.dataset.variableType=t,u.dataset.variableId=e;const f=document.createElement("span");f.className="chip-icon",f.innerHTML=uj(t),u.appendChild(f);const d=document.createElement("span");return d.className="chip-label",d.textContent=cj(t,e,s),u.appendChild(d),u}function Hk(t){const e=Pe.c(40),{editorRef:n,value:r,onChange:s,variables:a,onVariablesChange:l,indentTriggers:u}=t;let f;e[0]!==u?(f=u===void 0?["{","["]:u,e[0]=u,e[1]=f):f=e[1];const d=f,m=Z.useRef(""),p=Z.useRef(!1),y=Z.useRef(!1);let g;e[2]!==s||e[3]!==l||e[4]!==a?(g=re=>{const N=rf(re);m.current=N,p.current=!0,s(N);const D=new Set($1(N).map(hj)),H=a.filter(O=>D.has(O.id));H.length!==a.length&&(y.current=!0,l(H))},e[2]=s,e[3]=l,e[4]=a,e[5]=g):g=e[5];const v=g,[w,E]=Z.useState(!1);let S;e[6]===Symbol.for("react.memo_cache_sentinel")?(S={top:0,left:0},e[6]=S):S=e[6];const[C,T]=Z.useState(S),M=dj;let I;e[7]!==n||e[8]!==r||e[9]!==a?(I=()=>{const re=n.current;if(!re)return;const N=oj(re),D=$1(r);re.innerHTML="";let H=0;for(const le of D){const L=r.slice(H,le.start);L&&M(re,L);const P=q1(le.type,le.id,le.full,a);re.appendChild(P),re.appendChild(document.createTextNode("")),H=le.end}const O=r.slice(H);O&&M(re,O),re.childNodes.length===0&&re.appendChild(document.createElement("br")),m.current=r,N!==null&&lj(re,N)},e[7]=n,e[8]=r,e[9]=a,e[10]=I):I=e[10];const R=I;let U,q;e[11]!==R||e[12]!==r?(U=()=>{!p.current&&r!==m.current&&R(),p.current=!1},q=[r,R],e[11]=R,e[12]=r,e[13]=U,e[14]=q):(U=e[13],q=e[14]),Z.useEffect(U,q);let K;e[15]!==R?(K=()=>{y.current?y.current=!1:R()},e[15]=R,e[16]=K):K=e[16];let j;e[17]!==R||e[18]!==a?(j=[a,R],e[17]=R,e[18]=a,e[19]=j):j=e[19],Z.useEffect(K,j);let J;e[20]!==n||e[21]!==v?(J=()=>{const re=n.current;if(!re)return;const N=rf(re),D=window.getSelection();if(D&&D.rangeCount>0){const H=D.getRangeAt(0);if(H.startContainer.nodeType===Node.TEXT_NODE){const O=H.startContainer.textContent||"",le=H.startOffset;if(le>=2&&O.slice(le-2,le)==="{{"){const L=H.getBoundingClientRect();T({top:L.bottom+4,left:L.left}),E(!0)}else E(!1)}}N!==m.current&&v(re)},e[20]=n,e[21]=v,e[22]=J):J=e[22];const ne=J,me=fj;let X;e[23]!==n||e[24]!==d||e[25]!==w||e[26]!==v?(X=re=>{if(w){re.key==="Escape"&&(E(!1),re.preventDefault());return}if(re.key==="Backspace"){const N=window.getSelection();if(N&&N.rangeCount>0&&N.isCollapsed){const D=N.getRangeAt(0),H=D.startContainer,O=D.startOffset;if(H.nodeType===Node.TEXT_NODE&&O===1&&H.textContent?.charAt(0)===""){const le=H.previousSibling;if(le&&le.classList?.contains("variable-chip")){re.preventDefault();const L=le,P=L.parentNode;P?.removeChild(L),P?.removeChild(H);const he=n.current;he&&v(he);return}}if(O===0){let le=H.previousSibling;if(le?.nodeType===Node.TEXT_NODE&&le.textContent===""&&(le=le.previousSibling),le&&le.classList?.contains("variable-chip")){re.preventDefault();const L=le,P=L.nextSibling,he=L.parentNode;he?.removeChild(L),P?.nodeType===Node.TEXT_NODE&&P.textContent===""&&he?.removeChild(P);const xe=n.current;xe&&v(xe);return}}}}if(re.key==="Tab"&&(re.preventDefault(),document.execCommand("insertText",!1,"  ")),re.key==="Enter"){re.preventDefault();const N=n.current,D=window.getSelection();let H="";if(N&&D&&D.rangeCount>0){const L=Vk(N,D),P=L.lastIndexOf(`
`),he=L.slice(P+1),xe=he.match(/^(\s*)/);H=xe?xe[1]:"";const Ce=he.trimEnd().slice(-1);d.includes(Ce)&&(H=H+"  ")}const O=document.createElement("br"),le=D?.getRangeAt(0);le&&(le.deleteContents(),le.insertNode(O),le.setStartAfter(O),le.setEndAfter(O),D?.removeAllRanges(),D?.addRange(le),H&&document.execCommand("insertText",!1,H))}},e[23]=n,e[24]=d,e[25]=w,e[26]=v,e[27]=X):X=e[27];const F=X;let B;e[28]!==n||e[29]!==s||e[30]!==l||e[31]!==a?(B=re=>{E(!1);const N=n.current;if(!N)return;const D=window.getSelection();if(!D||D.rangeCount===0)return;const H=D.getRangeAt(0);if(H.startContainer.nodeType!==Node.TEXT_NODE)return;const O=H.startContainer,le=H.startOffset,L=O.textContent||"";O.textContent=L.slice(0,le-2)+L.slice(le);const P=Math.random().toString(36).substring(2,9),he=re==="file_base64"||re==="file_dataurl"?"file":re,xe=`{{${re}:${P}}}`,_e=q1(re,P,xe,a),Ce=le-2;H.setStart(O,Ce),H.setEnd(O,Ce),H.insertNode(_e);const Me=document.createTextNode("");_e.after(Me),H.setStart(Me,1),H.setEnd(Me,1),D.removeAllRanges(),D.addRange(H),y.current=!0,l([...a,{id:P,type:re,name:he}]);const st=rf(N);return m.current=st,p.current=!0,s(st),P},e[28]=n,e[29]=s,e[30]=l,e[31]=a,e[32]=B):B=e[32];const G=B;let ie;return e[33]!==R||e[34]!==ne||e[35]!==F||e[36]!==G||e[37]!==w||e[38]!==C?(ie={handleInput:ne,handlePaste:me,handleKeyDown:F,insertVariable:G,showTypeMenu:w,setShowTypeMenu:E,typeMenuPosition:C,buildDOM:R},e[33]=R,e[34]=ne,e[35]=F,e[36]=G,e[37]=w,e[38]=C,e[39]=ie):ie=e[39],ie}function fj(t){t.preventDefault();const e=t.clipboardData.getData("text/plain");document.execCommand("insertText",!1,e)}function dj(t,e){e.split(`
`).forEach((r,s)=>{s>0&&t.appendChild(document.createElement("br")),r&&t.appendChild(document.createTextNode(r))})}function hj(t){return t.id}const pj=[{type:"file_base64",label:"File (Base64)",description:"Select a file to encode",icon:x.jsx(Af,{className:"w-3.5 h-3.5"})},{type:"file_dataurl",label:"File (Data URL)",description:"File as data:... URL",icon:x.jsx(Af,{className:"w-3.5 h-3.5"})},{type:"base64",label:"Text (Base64)",description:"Text to encode",icon:x.jsx(qk,{className:"w-3.5 h-3.5"})},{type:"timestamp",label:"Timestamp",description:"Unix timestamp",icon:x.jsx(jl,{className:"w-3.5 h-3.5"})},{type:"uuid",label:"UUID",description:"Random UUID",icon:x.jsx(so,{className:"w-3.5 h-3.5"})},{type:"random_string",label:"Random String",description:"16-char random",icon:x.jsx(Fk,{className:"w-3.5 h-3.5"})}];function zy({value:t,onChange:e,variables:n,onVariablesChange:r,placeholder:s,action:a}){const l=Z.useRef(null),u=Z.useRef(null),{handleInput:f,handlePaste:d,handleKeyDown:m,insertVariable:p,showTypeMenu:y,setShowTypeMenu:g,typeMenuPosition:v,buildDOM:w}=Hk({editorRef:l,value:t,onChange:e,variables:n,onVariablesChange:r,indentTriggers:["{","["]}),[E,S]=Z.useState(null),[C,T]=Z.useState(""),M=Z.useRef(!1),I=Z.useRef(null),R=Z.useMemo(()=>{if(!t.trim())return{valid:!0,empty:!0};try{let F=t;return F=F.replace(/"\{\{[^{}]+\}\}"/g,'"__var__"'),F=F.replace(/\{\{[^{}]+\}\}/g,"null"),JSON.parse(F),{valid:!0,empty:!1}}catch(F){return{valid:!1,empty:!1,error:F instanceof Error?F.message:"Invalid JSON"}}},[t]),[U,q]=Z.useState(!1),K=Z.useMemo(()=>Tf(t,n,{missingDataPlaceholder:"[no data]"}),[t,n]);Z.useEffect(()=>(I.current&&(clearTimeout(I.current),I.current=null),R.valid&&!R.empty&&M.current&&(I.current=setTimeout(()=>{try{let F=t;F=F.replace(/"\{\{[^{}]+\}\}"/g,'"__var__"'),F=F.replace(/\{\{[^{}]+\}\}/g,"null"),JSON.parse(F);const B=new Map;let G=t,ie=0;G=G.replace(/"\{\{[^{}]+\}\}"/g,D=>{const H=`"__VAR_${ie++}__"`;return B.set(H,D),H}),G=G.replace(/\{\{[^{}]+\}\}/g,D=>{const H=`"__VAR_${ie++}__"`;return B.set(H,D),H});const re=JSON.parse(G);let N=JSON.stringify(re,null,2);N=N.replace(/\{\}/g,`{
}`),N=N.replace(/\[\]/g,`[
]`),B.forEach((D,H)=>{N=N.replace(H,D)}),N!==t&&e(N)}catch{}},500)),M.current=!R.valid,()=>{I.current&&clearTimeout(I.current)}),[R.valid,R.empty,t,e]),Z.useEffect(()=>{U||w()},[U,w]);const j=Z.useCallback((F,B)=>{const G=document.createElement("input");G.type="file",G.onchange=ie=>{const re=ie.target.files?.[0];if(!re)return;const N=new FileReader;N.onload=()=>{const D=N.result.split(",")[1],H=n.find(O=>O.id===B);r(H?n.map(O=>O.id===H.id?{...O,data:D,mimeType:re.type,name:re.name}:O):[...n,{id:B,type:F,name:re.name,data:D,mimeType:re.type}])},N.readAsDataURL(re)},G.click()},[n,r]),J=Z.useCallback(F=>{const G=F.target.closest(".variable-chip");if(G){const ie=G.dataset.variableType,re=G.dataset.variableId;if(ie==="file_base64"||ie==="file_dataurl")j(ie,re),F.preventDefault(),F.stopPropagation();else if(ie==="base64"){const N=G.getBoundingClientRect(),D=n.find(H=>H.id===re);T(D?.data||""),S({variableKey:`${ie}:${re}`,rect:N}),F.preventDefault(),F.stopPropagation()}}else S(null)},[n,j]),ne=Z.useCallback(F=>{const B=p(F);B&&(F==="file_base64"||F==="file_dataurl")&&setTimeout(()=>j(F,B),0)},[p,j]),me=Z.useCallback(()=>{if(!E)return;const[F,B]=E.variableKey.split(":"),G=n.find(ie=>ie.id===B);r(G?n.map(ie=>ie.id===G.id?{...ie,data:C}:ie):[...n,{id:B,type:F,name:F,data:C}]),S(null),l.current?.focus()},[E,C,n,r]);Z.useEffect(()=>{const F=G=>{G.key==="Escape"&&(g(!1),S(null))},B=G=>{u.current&&!u.current.contains(G.target)&&(g(!1),S(null))};return document.addEventListener("keydown",F),document.addEventListener("mousedown",B),()=>{document.removeEventListener("keydown",F),document.removeEventListener("mousedown",B)}},[g]);const X=Z.useMemo(()=>{if(!E||!u.current)return{top:0,left:0};const F=u.current.getBoundingClientRect();return{top:E.rect.bottom-F.top+4,left:Math.max(0,E.rect.left-F.left)}},[E]);return x.jsxs("div",{ref:u,className:"flex flex-col h-full min-h-50 max-h-[60vh] relative overflow-hidden",children:[U?x.jsx("pre",{className:"flex-1 min-h-0 p-3 font-mono text-sm text-zinc-100 overflow-y-auto whitespace-pre-wrap wrap-break-word",children:K}):x.jsxs("div",{className:"flex-1 min-h-0 relative",children:[x.jsx("div",{ref:l,contentEditable:!0,suppressContentEditableWarning:!0,onInput:f,onPaste:d,onKeyDown:m,onClick:J,className:"h-full p-3 font-mono text-sm text-zinc-100 outline-none overflow-y-auto whitespace-pre-wrap wrap-break-word"}),!t&&s&&x.jsx("div",{className:"absolute top-3 left-3 font-mono text-sm text-zinc-500 pointer-events-none whitespace-pre-wrap",children:s})]}),x.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 text-xs shrink-0",children:[a&&x.jsx("button",{type:"button",onClick:a.onClick,className:"text-[11px] px-2 py-0.5 rounded bg-zinc-700 hover:bg-zinc-600 text-zinc-200 transition-colors",children:a.label}),x.jsx("div",{className:"flex-1"}),x.jsx("button",{onClick:()=>q(!U),className:`transition-colors flex items-center gap-1 ${U?"text-blue-400 hover:text-blue-300":"text-zinc-500 hover:text-zinc-300"}`,title:U?"Show editor":"Show resolved JSON",children:x.jsx($k,{className:"w-3.5 h-3.5"})}),R.valid?x.jsx("span",{className:"text-emerald-500",children:"Valid JSON"}):x.jsx("span",{className:"text-red-400",title:R.error,children:"Invalid JSON"})]}),y&&x.jsx("div",{className:"fixed z-50 w-56 bg-zinc-800 border border-zinc-600 rounded-lg shadow-xl py-1",style:{top:v.top,left:v.left},children:pj.map(F=>x.jsxs("button",{onClick:()=>ne(F.type),className:"w-full flex items-center gap-2 px-3 py-2 text-left hover:bg-zinc-700 transition-colors",children:[x.jsx("span",{className:"text-zinc-400",children:F.icon}),x.jsxs("div",{className:"flex-1 min-w-0",children:[x.jsx("div",{className:"text-sm text-zinc-200",children:F.label}),x.jsx("div",{className:"text-xs text-zinc-500",children:F.description})]})]},F.type))}),E&&(()=>{const[F]=E.variableKey.split(":");return x.jsx("div",{className:"absolute z-50 bg-zinc-800/95 border border-zinc-700/50 rounded shadow-lg p-1.5 w-44",style:X,children:F==="base64"?x.jsxs("div",{className:"flex gap-1",children:[x.jsx("input",{type:"text",value:C,onChange:B=>T(B.target.value),onKeyDown:B=>B.key==="Enter"&&me(),placeholder:"Text to encode...",className:"flex-1 min-w-0 px-1.5 py-0.5 text-xs bg-transparent text-zinc-200 rounded border-none focus:outline-none placeholder:text-zinc-500",autoFocus:!0}),x.jsx("button",{onClick:me,className:"p-1 text-zinc-400 hover:text-zinc-200 transition-colors",children:x.jsx(Pk,{className:"w-3 h-3"})})]}):null})})()]})}const mj=[{type:"file_base64",label:"File (Base64)",description:"Select a file to encode",icon:x.jsx(Af,{className:"w-3.5 h-3.5"})},{type:"file_dataurl",label:"File (Data URL)",description:"File as data:... URL",icon:x.jsx(Af,{className:"w-3.5 h-3.5"})},{type:"base64",label:"Text (Base64)",description:"Text to encode",icon:x.jsx(qk,{className:"w-3.5 h-3.5"})},{type:"timestamp",label:"Timestamp",description:"Unix timestamp",icon:x.jsx(jl,{className:"w-3.5 h-3.5"})},{type:"uuid",label:"UUID",description:"Random UUID",icon:x.jsx(so,{className:"w-3.5 h-3.5"})},{type:"random_string",label:"Random String",description:"16-char random",icon:x.jsx(Fk,{className:"w-3.5 h-3.5"})}];function gj(t){if(!t.trim())return{valid:!0};try{const r=new DOMParser().parseFromString(t,"application/xml").querySelector("parsererror");if(r){const s=r.textContent||"Invalid XML",a=s.match(/error[^:]*:\s*(.+)/i);return{valid:!1,error:a?a[1].trim():s.split(`
`)[0]}}return{valid:!0}}catch(e){return{valid:!1,error:e instanceof Error?e.message:"Invalid XML"}}}function yj(t){try{const n=new DOMParser().parseFromString(t,"application/xml");if(n.querySelector("parsererror"))return t;const s=new XMLSerializer().serializeToString(n);let a="",l=0;const u=s.replace(/></g,`>
<`).split(`
`);for(const f of u){const d=f.trim();d&&(d.startsWith("</")&&(l=Math.max(0,l-1)),a+="  ".repeat(l)+d+`
`,d.startsWith("<")&&!d.startsWith("</")&&!d.startsWith("<?")&&!d.endsWith("/>")&&l++)}return a.trim()}catch{return t}}function bj({value:t,onChange:e,variables:n,onVariablesChange:r,placeholder:s}){const a=Z.useRef(null),l=Z.useRef(null),{handleInput:u,handlePaste:f,handleKeyDown:d,insertVariable:m,showTypeMenu:p,setShowTypeMenu:y,typeMenuPosition:g,buildDOM:v}=Hk({editorRef:a,value:t,onChange:e,variables:n,onVariablesChange:r,indentTriggers:[">","{","["]}),[w,E]=Z.useState(null),[S,C]=Z.useState(""),T=Z.useRef(!1),M=Z.useRef(null),I=Z.useMemo(()=>{if(!t.trim())return{valid:!0,empty:!0};let X=t;return X=X.replace(/\{\{[^{}]+\}\}/g,"PLACEHOLDER"),{...gj(X),empty:!1}},[t]),[R,U]=Z.useState(!1),q=Z.useMemo(()=>Tf(t,n,{missingDataPlaceholder:"[no data]"}),[t,n]);Z.useEffect(()=>(M.current&&(clearTimeout(M.current),M.current=null),I.valid&&!I.empty&&T.current&&(M.current=setTimeout(()=>{const X=new Map;let F=t,B=0;F=F.replace(/\{\{[^{}]+\}\}/g,ie=>{const re=`__VAR_${B++}__`;return X.set(re,ie),re});let G=yj(F);X.forEach((ie,re)=>{G=G.replace(re,ie)}),G!==t&&e(G)},500)),T.current=!I.valid,()=>{M.current&&clearTimeout(M.current)}),[I.valid,I.empty,t,e]),Z.useEffect(()=>{R||v()},[R,v]);const K=Z.useCallback((X,F)=>{const B=document.createElement("input");B.type="file",B.onchange=G=>{const ie=G.target.files?.[0];if(!ie)return;const re=new FileReader;re.onload=()=>{const N=re.result.split(",")[1],D=n.find(H=>H.id===F);r(D?n.map(H=>H.id===D.id?{...H,data:N,mimeType:ie.type,name:ie.name}:H):[...n,{id:F,type:X,name:ie.name,data:N,mimeType:ie.type}])},re.readAsDataURL(ie)},B.click()},[n,r]),j=Z.useCallback(X=>{const B=X.target.closest(".variable-chip");if(B){const G=B.dataset.variableType,ie=B.dataset.variableId;if(G==="file_base64"||G==="file_dataurl")K(G,ie),X.preventDefault(),X.stopPropagation();else if(G==="base64"){const re=B.getBoundingClientRect(),N=n.find(D=>D.id===ie);C(N?.data||""),E({variableKey:`${G}:${ie}`,rect:re}),X.preventDefault(),X.stopPropagation()}}else E(null)},[n,K]),J=Z.useCallback(X=>{const F=m(X);F&&(X==="file_base64"||X==="file_dataurl")&&setTimeout(()=>K(X,F),0)},[m,K]),ne=Z.useCallback(()=>{if(!w)return;const[X,F]=w.variableKey.split(":"),B=n.find(G=>G.id===F);r(B?n.map(G=>G.id===B.id?{...G,data:S}:G):[...n,{id:F,type:X,name:X,data:S}]),E(null),a.current?.focus()},[w,S,n,r]);Z.useEffect(()=>{const X=B=>{B.key==="Escape"&&(y(!1),E(null))},F=B=>{l.current&&!l.current.contains(B.target)&&(y(!1),E(null))};return document.addEventListener("keydown",X),document.addEventListener("mousedown",F),()=>{document.removeEventListener("keydown",X),document.removeEventListener("mousedown",F)}},[y]);const me=Z.useMemo(()=>{if(!w||!l.current)return{top:0,left:0};const X=l.current.getBoundingClientRect();return{top:w.rect.bottom-X.top+4,left:Math.max(0,w.rect.left-X.left)}},[w]);return x.jsxs("div",{ref:l,className:"flex flex-col h-full min-h-50 max-h-[60vh] relative overflow-hidden",children:[R?x.jsx("pre",{className:"flex-1 min-h-0 p-3 font-mono text-sm text-zinc-100 overflow-y-auto whitespace-pre-wrap wrap-break-word",children:q}):x.jsxs("div",{className:"flex-1 min-h-0 relative",children:[x.jsx("div",{ref:a,contentEditable:!0,suppressContentEditableWarning:!0,onInput:u,onPaste:f,onKeyDown:d,onClick:j,className:"h-full p-3 font-mono text-sm text-zinc-100 outline-none overflow-y-auto whitespace-pre-wrap wrap-break-word"}),!t&&s&&x.jsx("div",{className:"absolute top-3 left-3 font-mono text-sm text-zinc-500 pointer-events-none whitespace-pre-wrap",children:s})]}),x.jsxs("div",{className:"flex items-center justify-end gap-2 px-3 py-1.5 text-xs shrink-0",children:[x.jsx("button",{onClick:()=>U(!R),className:`transition-colors flex items-center gap-1 ${R?"text-blue-400 hover:text-blue-300":"text-zinc-500 hover:text-zinc-300"}`,title:R?"Show editor":"Show resolved XML",children:x.jsx($k,{className:"w-3.5 h-3.5"})}),I.valid?x.jsx("span",{className:"text-emerald-500",children:"Valid XML"}):x.jsx("span",{className:"text-red-400",title:I.error,children:"Invalid XML"})]}),p&&x.jsx("div",{className:"fixed z-50 w-56 bg-zinc-800 border border-zinc-600 rounded-lg shadow-xl py-1",style:{top:g.top,left:g.left},children:mj.map(X=>x.jsxs("button",{onClick:()=>J(X.type),className:"w-full flex items-center gap-2 px-3 py-2 text-left hover:bg-zinc-700 transition-colors",children:[x.jsx("span",{className:"text-zinc-400",children:X.icon}),x.jsxs("div",{className:"flex-1 min-w-0",children:[x.jsx("div",{className:"text-sm text-zinc-200",children:X.label}),x.jsx("div",{className:"text-xs text-zinc-500",children:X.description})]})]},X.type))}),w&&(()=>{const[X]=w.variableKey.split(":");return x.jsx("div",{className:"absolute z-50 bg-zinc-800/95 border border-zinc-700/50 rounded shadow-lg p-1.5 w-44",style:me,children:X==="base64"?x.jsxs("div",{className:"flex gap-1",children:[x.jsx("input",{type:"text",value:S,onChange:F=>C(F.target.value),onKeyDown:F=>F.key==="Enter"&&ne(),placeholder:"Text to encode...",className:"flex-1 min-w-0 px-1.5 py-0.5 text-xs bg-transparent text-zinc-200 rounded border-none focus:outline-none placeholder:text-zinc-500",autoFocus:!0}),x.jsx("button",{onClick:ne,className:"p-1 text-zinc-400 hover:text-zinc-200 transition-colors",children:x.jsx(Pk,{className:"w-3 h-3"})})]}):null})})()]})}function _j(t){const e=Pe.c(9),{value:n,onChange:r,placeholder:s}=t,a=Z.useRef(null);let l;e[0]===Symbol.for("react.memo_cache_sentinel")?(l=()=>{const m=a.current;if(!m)return;m.style.height="auto";const p=Math.min(m.scrollHeight,160);m.style.height=`${p}px`},e[0]=l):l=e[0];let u;e[1]!==n?(u=[n],e[1]=n,e[2]=u):u=e[2],Z.useEffect(l,u);let f;e[3]!==r?(f=m=>r(m.target.value),e[3]=r,e[4]=f):f=e[4];let d;return e[5]!==s||e[6]!==f||e[7]!==n?(d=x.jsx("textarea",{ref:a,value:n,onChange:f,placeholder:s,spellCheck:!1,rows:3,className:"w-full font-mono text-xs text-neutral-800 dark:text-neutral-100 bg-transparent focus:outline-none placeholder-neutral-400 dark:placeholder-neutral-600 resize-none overflow-auto"}),e[5]=s,e[6]=f,e[7]=n,e[8]=d):d=e[8],d}function F1(){return Math.random().toString(36).substring(2,9)}function Ll(t){const e=Pe.c(32),{items:n,onChange:r,keyPlaceholder:s,valuePlaceholder:a,keySuggestions:l}=t,u=s===void 0?"Key":s,f=a===void 0?"Value":a;let d;e[0]!==l?(d=l===void 0?[]:l,e[0]=l,e[1]=d):d=e[1];const m=d,[p,y]=Z.useState(null),[g,v]=Z.useState("");let w;e[2]!==n||e[3]!==r?(w=(U,q,K)=>{const j=n.map(ne=>ne.id===U?{...ne,[q]:K}:ne),J=j[j.length-1];J&&(J.key||J.value)&&j.push({id:F1(),enabled:!0,key:"",value:""}),r(j)},e[2]=n,e[3]=r,e[4]=w):w=e[4];const E=w;let S;e[5]!==n||e[6]!==r?(S=U=>{if(n.length===1){r([{id:F1(),enabled:!0,key:"",value:""}]);return}r(n.filter(q=>q.id!==U))},e[5]=n,e[6]=r,e[7]=S):S=e[7];const C=S;let T;e[8]!==n||e[9]!==m?(T=U=>{const q=n.map(vj);return m.filter(K=>K.toLowerCase().includes(U.toLowerCase())&&!q.includes(K.toLowerCase()))},e[8]=n,e[9]=m,e[10]=T):T=e[10];const M=T;let I;if(e[11]!==p||e[12]!==g||e[13]!==M||e[14]!==n||e[15]!==u||e[16]!==m||e[17]!==C||e[18]!==E||e[19]!==f){let U;e[21]!==p||e[22]!==g||e[23]!==M||e[24]!==u||e[25]!==m||e[26]!==C||e[27]!==E||e[28]!==f?(U=q=>x.jsxs("tr",{className:`border-b border-neutral-100 dark:border-white/5 last:border-0 ${q.enabled?"":"opacity-40"}`,children:[x.jsx("td",{className:"w-8 pl-2.5 py-1.5",children:x.jsx("button",{type:"button",onClick:()=>E(q.id,"enabled",!q.enabled),className:"p-0.5 rounded transition-colors",children:q.enabled?x.jsx(Dy,{className:"w-3.5 h-3.5 text-neutral-700 dark:text-neutral-300"}):x.jsx(Uk,{className:"w-3.5 h-3.5 text-neutral-300 dark:text-neutral-600"})})}),x.jsx("td",{className:"px-1.5 py-1.5",children:x.jsxs("div",{className:"relative",children:[x.jsx("input",{type:"text",value:q.key,onChange:K=>{E(q.id,"key",K.target.value),v(K.target.value)},onFocus:()=>{y(q.id),v(q.key)},onBlur:()=>{setTimeout(()=>y(null),150)},placeholder:u,className:"w-full px-2 py-1 bg-white dark:bg-white/5 border border-neutral-300 dark:border-white/10 rounded text-xs text-neutral-800 dark:text-neutral-100 placeholder-neutral-400 dark:placeholder-neutral-500 focus:outline-none focus:border-neutral-400 dark:focus:border-white/20 transition-colors"}),m.length>0&&p===q.id&&(()=>{const K=M(g);return K.length===0?null:x.jsx("div",{className:"absolute z-50 left-0 right-0 top-full mt-1 bg-white dark:bg-[#1a1a1a] border border-neutral-200 dark:border-white/10 rounded-md shadow-lg max-h-48 overflow-y-auto",children:K.map(j=>x.jsx("button",{type:"button",onMouseDown:J=>{J.preventDefault(),E(q.id,"key",j),y(null)},className:"w-full px-2 py-1.5 text-left text-xs text-neutral-600 dark:text-neutral-300 hover:bg-neutral-100 dark:hover:bg-white/10 transition-colors",children:j},j))})})()]})}),x.jsx("td",{className:"px-1.5 py-1.5",children:x.jsx("input",{type:"text",value:q.value,onChange:K=>E(q.id,"value",K.target.value),placeholder:f,className:"w-full px-2 py-1 bg-white dark:bg-white/5 border border-neutral-300 dark:border-white/10 rounded text-xs text-neutral-800 dark:text-neutral-100 placeholder-neutral-400 dark:placeholder-neutral-500 focus:outline-none focus:border-neutral-400 dark:focus:border-white/20 transition-colors"})}),x.jsx("td",{className:"w-8 pr-1.5 py-1.5",children:x.jsx("button",{type:"button",onClick:()=>C(q.id),className:"p-1 text-neutral-400 dark:text-neutral-500 hover:text-rose-500 dark:hover:text-rose-400 hover:bg-neutral-100 dark:hover:bg-white/5 rounded transition-colors",children:x.jsx(Ki,{className:"w-3.5 h-3.5"})})})]},q.id),e[21]=p,e[22]=g,e[23]=M,e[24]=u,e[25]=m,e[26]=C,e[27]=E,e[28]=f,e[29]=U):U=e[29],I=n.map(U),e[11]=p,e[12]=g,e[13]=M,e[14]=n,e[15]=u,e[16]=m,e[17]=C,e[18]=E,e[19]=f,e[20]=I}else I=e[20];let R;return e[30]!==I?(R=x.jsx("div",{children:x.jsx("table",{className:"w-full",children:x.jsx("tbody",{children:I})})}),e[30]=I,e[31]=R):R=e[31],R}function vj(t){return t.key.toLowerCase()}function xj(){return Math.random().toString(36).substring(2,9)}function V1(){return{id:xj(),enabled:!0,key:"",type:"text",value:"",file:null,fileName:""}}function wj(t){const e=Pe.c(21),{items:n,onChange:r,keyPlaceholder:s,valuePlaceholder:a}=t,l=s===void 0?"Field":s,u=a===void 0?"Value":a;let f;e[0]===Symbol.for("react.memo_cache_sentinel")?(f={},e[0]=f):f=e[0];const d=Z.useRef(f);let m;e[1]!==n||e[2]!==r?(m=(I,R)=>{const U=n.map(K=>K.id===I?{...K,...R}:K),q=U[U.length-1];q&&(q.key||q.value||q.file)&&U.push(V1()),r(U)},e[1]=n,e[2]=r,e[3]=m):m=e[3];const p=m;let y;e[4]!==n||e[5]!==r?(y=I=>{if(n.length===1){r([V1()]);return}r(n.filter(R=>R.id!==I))},e[4]=n,e[5]=r,e[6]=y):y=e[6];const g=y;let v;e[7]!==p?(v=(I,R)=>{const U=R.target.files?.[0]??null;R.target.value="",U&&p(I,{type:"file",file:U,fileName:U.name,value:""})},e[7]=p,e[8]=v):v=e[8];const w=v;let E;e[9]!==p?(E=I=>{p(I,{type:"text",file:null,fileName:""})},e[9]=p,e[10]=E):E=e[10];const S=E,C=Sj;let T;e[11]!==S||e[12]!==w||e[13]!==n||e[14]!==l||e[15]!==g||e[16]!==p||e[17]!==u?(T=n.map(I=>x.jsxs("tr",{className:`border-b border-neutral-100 dark:border-white/5 last:border-0 ${I.enabled?"":"opacity-40"}`,children:[x.jsx("td",{className:"w-8 pl-2.5 py-1.5",children:x.jsx("button",{type:"button",onClick:()=>p(I.id,{enabled:!I.enabled}),className:"p-0.5 rounded transition-colors",children:I.enabled?x.jsx(Dy,{className:"w-3.5 h-3.5 text-neutral-700 dark:text-neutral-300"}):x.jsx(Uk,{className:"w-3.5 h-3.5 text-neutral-300 dark:text-neutral-600"})})}),x.jsx("td",{className:"px-1.5 py-1.5 w-36",children:x.jsx("input",{type:"text",value:I.key,onChange:R=>p(I.id,{key:R.target.value}),placeholder:l,className:"w-full px-2 py-1 bg-white dark:bg-white/5 border border-neutral-300 dark:border-white/10 rounded text-xs text-neutral-800 dark:text-neutral-100 placeholder-neutral-400 dark:placeholder-neutral-500 focus:outline-none focus:border-neutral-400 dark:focus:border-white/20 transition-colors"})}),x.jsxs("td",{className:"px-1.5 py-1.5",children:[x.jsx("input",{type:"file",ref:R=>{d.current[I.id]=R},onChange:R=>w(I.id,R),className:"hidden"}),I.type==="file"&&I.file?x.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 bg-neutral-100 dark:bg-white/10 rounded text-xs text-neutral-600 dark:text-neutral-300",children:[x.jsx(U1,{className:"w-3 h-3 shrink-0"}),x.jsx("span",{className:"truncate max-w-xs",children:I.fileName}),x.jsxs("span",{className:"text-neutral-400 shrink-0",children:["(",C(I.file.size),")"]}),x.jsx("button",{type:"button",onClick:()=>S(I.id),className:"p-0.5 ml-1 text-neutral-400 hover:text-neutral-600 dark:hover:text-neutral-200 transition-colors shrink-0",children:x.jsx(dd,{className:"w-3 h-3"})})]}):x.jsx("input",{type:"text",value:I.value,onChange:R=>p(I.id,{value:R.target.value}),placeholder:u,className:"w-full px-2 py-1 bg-white dark:bg-white/5 border border-neutral-300 dark:border-white/10 rounded text-xs text-neutral-800 dark:text-neutral-100 placeholder-neutral-400 dark:placeholder-neutral-500 focus:outline-none focus:border-neutral-400 dark:focus:border-white/20 transition-colors"})]}),x.jsx("td",{className:"w-16 pr-1.5 py-1.5",children:x.jsxs("div",{className:"flex items-center gap-0.5",children:[x.jsx("button",{type:"button",onClick:()=>d.current[I.id]?.click(),className:`p-1 rounded transition-colors ${I.type==="file"?"text-blue-500 dark:text-blue-400 bg-blue-50 dark:bg-blue-500/10":"text-neutral-400 dark:text-neutral-500 hover:text-neutral-600 dark:hover:text-neutral-300 hover:bg-neutral-100 dark:hover:bg-white/5"}`,title:"Attach file",children:x.jsx(U1,{className:"w-3.5 h-3.5"})}),x.jsx("button",{type:"button",onClick:()=>g(I.id),className:"p-1 text-neutral-400 dark:text-neutral-500 hover:text-rose-500 dark:hover:text-rose-400 hover:bg-neutral-100 dark:hover:bg-white/5 rounded transition-colors",children:x.jsx(Ki,{className:"w-3.5 h-3.5"})})]})})]},I.id)),e[11]=S,e[12]=w,e[13]=n,e[14]=l,e[15]=g,e[16]=p,e[17]=u,e[18]=T):T=e[18];let M;return e[19]!==T?(M=x.jsx("div",{children:x.jsx("table",{className:"w-full",children:x.jsx("tbody",{children:T})})}),e[19]=T,e[20]=M):M=e[20],M}function Sj(t){return t<1024?`${t} B`:t<1048576?`${(t/1024).toFixed(1)} KB`:`${(t/1048576).toFixed(1)} MB`}function kj(t){const e=Pe.c(12),{file:n,fileName:r,onFileChange:s}=t,a=Z.useRef(null);let l;e[0]!==s?(l=v=>{s(v,v?.name??"")},e[0]=s,e[1]=l):l=e[1];const u=l,f=Cj,d=Ej;let m;e[2]!==u?(m=x.jsx("input",{type:"file",ref:a,onChange:v=>u(v.target.files?.[0]??null),className:"hidden"}),e[2]=u,e[3]=m):m=e[3];let p;e[4]!==n||e[5]!==r||e[6]!==s?(p=n?x.jsxs("div",{className:"flex items-center gap-3 p-3 bg-neutral-100 dark:bg-white/5 rounded-lg border border-neutral-200 dark:border-white/10",children:[x.jsx("div",{className:"flex items-center justify-center w-10 h-10 bg-white dark:bg-white/10 rounded-lg text-xl",children:d(n.type)}),x.jsxs("div",{className:"flex-1 min-w-0",children:[x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx(uo,{className:"w-4 h-4 text-neutral-500 dark:text-neutral-400 shrink-0"}),x.jsx("p",{className:"text-sm font-medium text-neutral-800 dark:text-neutral-100 truncate",children:r})]}),x.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[x.jsx("span",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:f(n.size)}),x.jsx("span",{className:"text-xs text-neutral-400 dark:text-neutral-500",children:""}),x.jsx("span",{className:"text-xs text-neutral-500 dark:text-neutral-400 truncate",children:n.type||"application/octet-stream"})]})]}),x.jsxs("div",{className:"flex items-center gap-1",children:[x.jsx("button",{type:"button",onClick:()=>a.current?.click(),className:"px-2 py-1 text-xs text-neutral-600 dark:text-neutral-300 hover:bg-neutral-200 dark:hover:bg-white/10 rounded transition-colors",children:"Change"}),x.jsx("button",{type:"button",onClick:()=>s(null,""),className:"p-1 text-neutral-400 dark:text-neutral-500 hover:text-rose-500 dark:hover:text-rose-400 hover:bg-neutral-200 dark:hover:bg-white/10 rounded transition-colors",children:x.jsx(dd,{className:"w-4 h-4"})})]})]}):x.jsxs("div",{onClick:()=>a.current?.click(),className:"flex flex-col items-center justify-center p-8 border-2 border-dashed border-neutral-300 dark:border-white/20 rounded-lg cursor-pointer hover:border-neutral-400 dark:hover:border-white/30 hover:bg-neutral-50 dark:hover:bg-white/5 transition-colors",children:[x.jsx(jy,{className:"w-8 h-8 text-neutral-400 dark:text-neutral-500 mb-2"}),x.jsx("p",{className:"text-sm text-neutral-600 dark:text-neutral-300 mb-1",children:"Click to select a file"}),x.jsx("p",{className:"text-xs text-neutral-400 dark:text-neutral-500",children:"or drag and drop"})]}),e[4]=n,e[5]=r,e[6]=s,e[7]=p):p=e[7];let y;e[8]===Symbol.for("react.memo_cache_sentinel")?(y=x.jsx("p",{className:"text-xs text-neutral-400 dark:text-neutral-500",children:"The file will be sent as the raw request body. Content-Type will be set automatically based on the file type."}),e[8]=y):y=e[8];let g;return e[9]!==m||e[10]!==p?(g=x.jsxs("div",{className:"space-y-3",children:[m,p,y]}),e[9]=m,e[10]=p,e[11]=g):g=e[11],g}function Ej(t){return t.startsWith("image/")?"":t.startsWith("video/")?"":t.startsWith("audio/")?"":t.includes("pdf")?"":t.includes("zip")||t.includes("tar")||t.includes("gzip")?"":t.includes("json")||t.includes("xml")||t.includes("text")?"":""}function Cj(t){return t<1024?`${t} B`:t<1048576?`${(t/1024).toFixed(1)} KB`:t<1073741824?`${(t/1048576).toFixed(1)} MB`:`${(t/1073741824).toFixed(2)} GB`}const Tj=[{value:"none",label:"None"},{value:"json",label:"JSON"},{value:"xml",label:"XML"},{value:"form-urlencoded",label:"Form"},{value:"form-data",label:"Form Data"},{value:"binary",label:"Binary"},{value:"raw",label:"Raw"}];function Gk(){return Math.random().toString(36).substring(2,9)}function Aj(){return{id:Gk(),enabled:!0,key:"",type:"text",value:"",file:null,fileName:""}}const Rj=["Accept","Accept-Charset","Accept-Encoding","Accept-Language","Authorization","Cache-Control","Connection","Content-Disposition","Content-Encoding","Content-Length","Content-Type","Cookie","Date","ETag","Expect","Forwarded","From","Host","If-Match","If-Modified-Since","If-None-Match","If-Range","If-Unmodified-Since","Max-Forwards","Origin","Pragma","Proxy-Authorization","Range","Referer","TE","Trailer","Transfer-Encoding","Upgrade","User-Agent","Via","Warning","X-Api-Key","X-Correlation-ID","X-Forwarded-For","X-Forwarded-Host","X-Forwarded-Proto","X-Request-ID","X-Requested-With"];function Oj(){const t=Pe.c(54),[e,n]=Z.useState("body"),{request:r,setHeaders:s,setQuery:a,setBody:l,setVariables:u}=Xt();let f;t[0]!==r?.http?.headers?(f=r?.http?.headers??[],t[0]=r?.http?.headers,t[1]=f):f=t[1];const d=f;let m;t[2]!==r?.http?.query?(m=r?.http?.query??[],t[2]=r?.http?.query,t[3]=m):m=t[3];const p=m;let y;t[4]!==r?.http?.body?(y=r?.http?.body??{type:"none"},t[4]=r?.http?.body,t[5]=y):y=t[5];const g=y;let v;t[6]!==r?.variables?(v=r?.variables??[],t[6]=r?.variables,t[7]=v):v=t[7];const w=v;let E;t[8]!==g||t[9]!==l?(E=G=>{e:switch(G){case"none":{l({type:"none"});break e}case"json":{l({type:"json",content:g.type==="json"?g.content:""});break e}case"xml":{l({type:"xml",content:g.type==="xml"?g.content:""});break e}case"raw":{l({type:"raw",content:g.type==="raw"?g.content:""});break e}case"form-urlencoded":{l({type:"form-urlencoded",data:g.type==="form-urlencoded"?g.data:[{id:Gk(),enabled:!0,key:"",value:""}]});break e}case"form-data":{l({type:"form-data",data:g.type==="form-data"?g.data:[Aj()]});break e}case"binary":l({type:"binary",file:g.type==="binary"?g.file:null,fileName:g.type==="binary"?g.fileName:""})}},t[8]=g,t[9]=l,t[10]=E):E=t[10];const S=E;let C;t[11]!==p?(C=p.filter(Mj),t[11]=p,t[12]=C):C=t[12];let T;t[13]!==C.length?(T={id:"params",label:"Params",count:C.length},t[13]=C.length,t[14]=T):T=t[14];let M;t[15]!==d?(M=d.filter(Ij),t[15]=d,t[16]=M):M=t[16];let I;t[17]!==M.length?(I={id:"headers",label:"Headers",count:M.length},t[17]=M.length,t[18]=I):I=t[18];let R;t[19]===Symbol.for("react.memo_cache_sentinel")?(R={id:"body",label:"Body"},t[19]=R):R=t[19];let U;t[20]!==T||t[21]!==I?(U=[T,I,R],t[20]=T,t[21]=I,t[22]=U):U=t[22];const q=U;let K;t[23]!==e||t[24]!==q?(K=x.jsx("div",{role:"tablist",className:"inline-flex gap-1",children:q.map(G=>x.jsxs("button",{role:"tab",onClick:()=>n(G.id),className:`px-2 py-1 text-[11px] font-medium rounded-md transition-all ${e===G.id?"bg-white dark:bg-white/10 text-neutral-800 dark:text-neutral-100 shadow-sm":"text-neutral-500 dark:text-neutral-400 hover:text-neutral-700 dark:hover:text-neutral-200 hover:bg-neutral-100 dark:hover:bg-white/5"}`,children:[G.label,G.count!==void 0&&G.count>0&&x.jsx("span",{className:"ml-1.5 px-1.5 py-0.5 text-[9px] bg-neutral-200 dark:bg-white/10 text-neutral-600 dark:text-neutral-300 rounded-full",children:G.count})]},G.id))}),t[23]=e,t[24]=q,t[25]=K):K=t[25];let j;t[26]!==e||t[27]!==g||t[28]!==S?(j=e==="body"&&x.jsx("select",{value:g.type,onChange:G=>S(G.target.value),className:"h-6 px-2 text-[11px] font-medium bg-white dark:bg-white/10 text-neutral-800 dark:text-neutral-100 rounded-md shadow-sm border-0 focus:outline-none focus:ring-2 focus:ring-neutral-300 dark:focus:ring-white/20 cursor-pointer transition-all min-w-30",children:Tj.map(Nj)}),t[26]=e,t[27]=g,t[28]=S,t[29]=j):j=t[29];let J;t[30]!==K||t[31]!==j?(J=x.jsxs("div",{className:"flex items-center gap-2",children:[K,j]}),t[30]=K,t[31]=j,t[32]=J):J=t[32];let ne;t[33]!==e||t[34]!==p||t[35]!==a?(ne=e==="params"&&x.jsx(Ll,{items:p,onChange:a,keyPlaceholder:"Parameter",valuePlaceholder:"Value"}),t[33]=e,t[34]=p,t[35]=a,t[36]=ne):ne=t[36];let me;t[37]!==e||t[38]!==d||t[39]!==s?(me=e==="headers"&&x.jsx(Ll,{items:d,onChange:s,keyPlaceholder:"Header",valuePlaceholder:"Value",keySuggestions:Rj}),t[37]=e,t[38]=d,t[39]=s,t[40]=me):me=t[40];let X;t[41]!==e||t[42]!==g||t[43]!==l||t[44]!==u||t[45]!==w?(X=e==="body"&&x.jsxs("div",{className:"space-y-3",children:[g.type==="json"&&x.jsx(zy,{value:g.content,onChange:G=>l({...g,content:G}),variables:w,onVariablesChange:u,placeholder:`{
  "key": "value"
}`}),g.type==="xml"&&x.jsx(bj,{value:g.content,onChange:G=>l({...g,content:G}),variables:w,onVariablesChange:u,placeholder:"<xml></xml>"}),g.type==="raw"&&x.jsx(_j,{value:g.content,onChange:G=>l({...g,content:G}),language:"text",placeholder:"Plain text payload"}),g.type==="form-urlencoded"&&x.jsx(Ll,{items:g.data,onChange:G=>l({...g,data:G}),keyPlaceholder:"Key",valuePlaceholder:"Value"}),g.type==="form-data"&&x.jsx(wj,{items:g.data,onChange:G=>l({...g,data:G})}),g.type==="binary"&&x.jsx(kj,{file:g.file,fileName:g.fileName,onFileChange:(G,ie)=>l({...g,file:G,fileName:ie})}),g.type==="none"&&x.jsx("div",{className:"py-8 text-center text-sm text-neutral-400 dark:text-neutral-500",children:"No request body"})]}),t[41]=e,t[42]=g,t[43]=l,t[44]=u,t[45]=w,t[46]=X):X=t[46];let F;t[47]!==ne||t[48]!==me||t[49]!==X?(F=x.jsxs("div",{children:[ne,me,X]}),t[47]=ne,t[48]=me,t[49]=X,t[50]=F):F=t[50];let B;return t[51]!==J||t[52]!==F?(B=x.jsxs("div",{className:"space-y-3",children:[J,F]}),t[51]=J,t[52]=F,t[53]=B):B=t[53],B}function Nj(t){return x.jsx("option",{value:t.value,className:"bg-white dark:bg-[#1a1a1a]",children:t.label},t.value)}function Ij(t){return t.key}function Mj(t){return t.key}const Dj="modulepreload",jj=function(t){return"/"+t},H1={},z=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){let d=function(m){return Promise.all(m.map(p=>Promise.resolve(p).then(y=>({status:"fulfilled",value:y}),y=>({status:"rejected",reason:y}))))};var l=d;document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),f=u?.nonce||u?.getAttribute("nonce");s=d(n.map(m=>{if(m=jj(m),m in H1)return;H1[m]=!0;const p=m.endsWith(".css"),y=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${y}`))return;const g=document.createElement("link");if(g.rel=p?"stylesheet":Dj,p||(g.as="script"),g.crossOrigin="",g.href=m,f&&g.setAttribute("nonce",f),document.head.appendChild(g),p)return new Promise((v,w)=>{g.addEventListener("load",v),g.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${m}`)))})}))}function a(u){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=u,window.dispatchEvent(f),!f.defaultPrevented)throw u}return s.then(u=>{for(const f of u||[])f.status==="rejected"&&a(f.reason);return e().catch(a)})};let Ht=class extends Error{constructor(e){super(e),this.name="ShikiError"}};function Lj(t){return Py(t)}function Py(t){return Array.isArray(t)?zj(t):t instanceof RegExp?t:typeof t=="object"?Pj(t):t}function zj(t){let e=[];for(let n=0,r=t.length;n<r;n++)e[n]=Py(t[n]);return e}function Pj(t){let e={};for(let n in t)e[n]=Py(t[n]);return e}function Kk(t,...e){return e.forEach(n=>{for(let r in n)t[r]=n[r]}),t}function Zk(t){const e=~t.lastIndexOf("/")||~t.lastIndexOf("\\");return e===0?t:~e===t.length-1?Zk(t.substring(0,t.length-1)):t.substr(~e+1)}var hm=/\$(\d+)|\${(\d+):\/(downcase|upcase)}/g,ju=class{static hasCaptures(t){return t===null?!1:(hm.lastIndex=0,hm.test(t))}static replaceCaptures(t,e,n){return t.replace(hm,(r,s,a,l)=>{let u=n[parseInt(s||a,10)];if(u){let f=e.substring(u.start,u.end);for(;f[0]===".";)f=f.substring(1);switch(l){case"downcase":return f.toLowerCase();case"upcase":return f.toUpperCase();default:return f}}else return r})}};function Qk(t,e){return t<e?-1:t>e?1:0}function Jk(t,e){if(t===null&&e===null)return 0;if(!t)return-1;if(!e)return 1;let n=t.length,r=e.length;if(n===r){for(let s=0;s<n;s++){let a=Qk(t[s],e[s]);if(a!==0)return a}return 0}return n-r}function G1(t){return!!(/^#[0-9a-f]{6}$/i.test(t)||/^#[0-9a-f]{8}$/i.test(t)||/^#[0-9a-f]{3}$/i.test(t)||/^#[0-9a-f]{4}$/i.test(t))}function Yk(t){return t.replace(/[\-\\\{\}\*\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&")}var Wk=class{constructor(t){this.fn=t}cache=new Map;get(t){if(this.cache.has(t))return this.cache.get(t);const e=this.fn(t);return this.cache.set(t,e),e}},If=class{constructor(t,e,n){this._colorMap=t,this._defaults=e,this._root=n}static createFromRawTheme(t,e){return this.createFromParsedTheme($j(t),e)}static createFromParsedTheme(t,e){return Fj(t,e)}_cachedMatchRoot=new Wk(t=>this._root.match(t));getColorMap(){return this._colorMap.getColorMap()}getDefaults(){return this._defaults}match(t){if(t===null)return this._defaults;const e=t.scopeName,r=this._cachedMatchRoot.get(e).find(s=>Bj(t.parent,s.parentScopes));return r?new Xk(r.fontStyle,r.foreground,r.background):null}},pm=class sf{constructor(e,n){this.parent=e,this.scopeName=n}static push(e,n){for(const r of n)e=new sf(e,r);return e}static from(...e){let n=null;for(let r=0;r<e.length;r++)n=new sf(n,e[r]);return n}push(e){return new sf(this,e)}getSegments(){let e=this;const n=[];for(;e;)n.push(e.scopeName),e=e.parent;return n.reverse(),n}toString(){return this.getSegments().join(" ")}extends(e){return this===e?!0:this.parent===null?!1:this.parent.extends(e)}getExtensionIfDefined(e){const n=[];let r=this;for(;r&&r!==e;)n.push(r.scopeName),r=r.parent;return r===e?n.reverse():void 0}};function Bj(t,e){if(e.length===0)return!0;for(let n=0;n<e.length;n++){let r=e[n],s=!1;if(r===">"){if(n===e.length-1)return!1;r=e[++n],s=!0}for(;t&&!Uj(t.scopeName,r);){if(s)return!1;t=t.parent}if(!t)return!1;t=t.parent}return!0}function Uj(t,e){return e===t||t.startsWith(e)&&t[e.length]==="."}var Xk=class{constructor(t,e,n){this.fontStyle=t,this.foregroundId=e,this.backgroundId=n}};function $j(t){if(!t)return[];if(!t.settings||!Array.isArray(t.settings))return[];let e=t.settings,n=[],r=0;for(let s=0,a=e.length;s<a;s++){let l=e[s];if(!l.settings)continue;let u;if(typeof l.scope=="string"){let p=l.scope;p=p.replace(/^[,]+/,""),p=p.replace(/[,]+$/,""),u=p.split(",")}else Array.isArray(l.scope)?u=l.scope:u=[""];let f=-1;if(typeof l.settings.fontStyle=="string"){f=0;let p=l.settings.fontStyle.split(" ");for(let y=0,g=p.length;y<g;y++)switch(p[y]){case"italic":f=f|1;break;case"bold":f=f|2;break;case"underline":f=f|4;break;case"strikethrough":f=f|8;break}}let d=null;typeof l.settings.foreground=="string"&&G1(l.settings.foreground)&&(d=l.settings.foreground);let m=null;typeof l.settings.background=="string"&&G1(l.settings.background)&&(m=l.settings.background);for(let p=0,y=u.length;p<y;p++){let v=u[p].trim().split(" "),w=v[v.length-1],E=null;v.length>1&&(E=v.slice(0,v.length-1),E.reverse()),n[r++]=new qj(w,E,s,f,d,m)}}return n}var qj=class{constructor(t,e,n,r,s,a){this.scope=t,this.parentScopes=e,this.index=n,this.fontStyle=r,this.foreground=s,this.background=a}},An=(t=>(t[t.NotSet=-1]="NotSet",t[t.None=0]="None",t[t.Italic=1]="Italic",t[t.Bold=2]="Bold",t[t.Underline=4]="Underline",t[t.Strikethrough=8]="Strikethrough",t))(An||{});function Fj(t,e){t.sort((f,d)=>{let m=Qk(f.scope,d.scope);return m!==0||(m=Jk(f.parentScopes,d.parentScopes),m!==0)?m:f.index-d.index});let n=0,r="#000000",s="#ffffff";for(;t.length>=1&&t[0].scope==="";){let f=t.shift();f.fontStyle!==-1&&(n=f.fontStyle),f.foreground!==null&&(r=f.foreground),f.background!==null&&(s=f.background)}let a=new Vj(e),l=new Xk(n,a.getId(r),a.getId(s)),u=new Gj(new Sg(0,null,-1,0,0),[]);for(let f=0,d=t.length;f<d;f++){let m=t[f];u.insert(0,m.scope,m.parentScopes,m.fontStyle,a.getId(m.foreground),a.getId(m.background))}return new If(a,l,u)}var Vj=class{_isFrozen;_lastColorId;_id2color;_color2id;constructor(t){if(this._lastColorId=0,this._id2color=[],this._color2id=Object.create(null),Array.isArray(t)){this._isFrozen=!0;for(let e=0,n=t.length;e<n;e++)this._color2id[t[e]]=e,this._id2color[e]=t[e]}else this._isFrozen=!1}getId(t){if(t===null)return 0;t=t.toUpperCase();let e=this._color2id[t];if(e)return e;if(this._isFrozen)throw new Error(`Missing color in color map - ${t}`);return e=++this._lastColorId,this._color2id[t]=e,this._id2color[e]=t,e}getColorMap(){return this._id2color.slice(0)}},Hj=Object.freeze([]),Sg=class eE{scopeDepth;parentScopes;fontStyle;foreground;background;constructor(e,n,r,s,a){this.scopeDepth=e,this.parentScopes=n||Hj,this.fontStyle=r,this.foreground=s,this.background=a}clone(){return new eE(this.scopeDepth,this.parentScopes,this.fontStyle,this.foreground,this.background)}static cloneArr(e){let n=[];for(let r=0,s=e.length;r<s;r++)n[r]=e[r].clone();return n}acceptOverwrite(e,n,r,s){this.scopeDepth>e?console.log("how did this happen?"):this.scopeDepth=e,n!==-1&&(this.fontStyle=n),r!==0&&(this.foreground=r),s!==0&&(this.background=s)}},Gj=class kg{constructor(e,n=[],r={}){this._mainRule=e,this._children=r,this._rulesWithParentScopes=n}_rulesWithParentScopes;static _cmpBySpecificity(e,n){if(e.scopeDepth!==n.scopeDepth)return n.scopeDepth-e.scopeDepth;let r=0,s=0;for(;e.parentScopes[r]===">"&&r++,n.parentScopes[s]===">"&&s++,!(r>=e.parentScopes.length||s>=n.parentScopes.length);){const a=n.parentScopes[s].length-e.parentScopes[r].length;if(a!==0)return a;r++,s++}return n.parentScopes.length-e.parentScopes.length}match(e){if(e!==""){let r=e.indexOf("."),s,a;if(r===-1?(s=e,a=""):(s=e.substring(0,r),a=e.substring(r+1)),this._children.hasOwnProperty(s))return this._children[s].match(a)}const n=this._rulesWithParentScopes.concat(this._mainRule);return n.sort(kg._cmpBySpecificity),n}insert(e,n,r,s,a,l){if(n===""){this._doInsertHere(e,r,s,a,l);return}let u=n.indexOf("."),f,d;u===-1?(f=n,d=""):(f=n.substring(0,u),d=n.substring(u+1));let m;this._children.hasOwnProperty(f)?m=this._children[f]:(m=new kg(this._mainRule.clone(),Sg.cloneArr(this._rulesWithParentScopes)),this._children[f]=m),m.insert(e+1,d,r,s,a,l)}_doInsertHere(e,n,r,s,a){if(n===null){this._mainRule.acceptOverwrite(e,r,s,a);return}for(let l=0,u=this._rulesWithParentScopes.length;l<u;l++){let f=this._rulesWithParentScopes[l];if(Jk(f.parentScopes,n)===0){f.acceptOverwrite(e,r,s,a);return}}r===-1&&(r=this._mainRule.fontStyle),s===0&&(s=this._mainRule.foreground),a===0&&(a=this._mainRule.background),this._rulesWithParentScopes.push(new Sg(e,n,r,s,a))}},io=class Er{static toBinaryStr(e){return e.toString(2).padStart(32,"0")}static print(e){const n=Er.getLanguageId(e),r=Er.getTokenType(e),s=Er.getFontStyle(e),a=Er.getForeground(e),l=Er.getBackground(e);console.log({languageId:n,tokenType:r,fontStyle:s,foreground:a,background:l})}static getLanguageId(e){return(e&255)>>>0}static getTokenType(e){return(e&768)>>>8}static containsBalancedBrackets(e){return(e&1024)!==0}static getFontStyle(e){return(e&30720)>>>11}static getForeground(e){return(e&16744448)>>>15}static getBackground(e){return(e&4278190080)>>>24}static set(e,n,r,s,a,l,u){let f=Er.getLanguageId(e),d=Er.getTokenType(e),m=Er.containsBalancedBrackets(e)?1:0,p=Er.getFontStyle(e),y=Er.getForeground(e),g=Er.getBackground(e);return n!==0&&(f=n),r!==8&&(d=r),s!==null&&(m=s?1:0),a!==-1&&(p=a),l!==0&&(y=l),u!==0&&(g=u),(f<<0|d<<8|m<<10|p<<11|y<<15|g<<24)>>>0}};function Mf(t,e){const n=[],r=Kj(t);let s=r.next();for(;s!==null;){let f=0;if(s.length===2&&s.charAt(1)===":"){switch(s.charAt(0)){case"R":f=1;break;case"L":f=-1;break;default:console.log(`Unknown priority ${s} in scope selector`)}s=r.next()}let d=l();if(n.push({matcher:d,priority:f}),s!==",")break;s=r.next()}return n;function a(){if(s==="-"){s=r.next();const f=a();return d=>!!f&&!f(d)}if(s==="("){s=r.next();const f=u();return s===")"&&(s=r.next()),f}if(K1(s)){const f=[];do f.push(s),s=r.next();while(K1(s));return d=>e(f,d)}return null}function l(){const f=[];let d=a();for(;d;)f.push(d),d=a();return m=>f.every(p=>p(m))}function u(){const f=[];let d=l();for(;d&&(f.push(d),s==="|"||s===",");){do s=r.next();while(s==="|"||s===",");d=l()}return m=>f.some(p=>p(m))}}function K1(t){return!!t&&!!t.match(/[\w\.:]+/)}function Kj(t){let e=/([LR]:|[\w\.:][\w\.:\-]*|[\,\|\-\(\)])/g,n=e.exec(t);return{next:()=>{if(!n)return null;const r=n[0];return n=e.exec(t),r}}}function tE(t){typeof t.dispose=="function"&&t.dispose()}var Yl=class{constructor(t){this.scopeName=t}toKey(){return this.scopeName}},Zj=class{constructor(t,e){this.scopeName=t,this.ruleName=e}toKey(){return`${this.scopeName}#${this.ruleName}`}},Qj=class{_references=[];_seenReferenceKeys=new Set;get references(){return this._references}visitedRule=new Set;add(t){const e=t.toKey();this._seenReferenceKeys.has(e)||(this._seenReferenceKeys.add(e),this._references.push(t))}},Jj=class{constructor(t,e){this.repo=t,this.initialScopeName=e,this.seenFullScopeRequests.add(this.initialScopeName),this.Q=[new Yl(this.initialScopeName)]}seenFullScopeRequests=new Set;seenPartialScopeRequests=new Set;Q;processQueue(){const t=this.Q;this.Q=[];const e=new Qj;for(const n of t)Yj(n,this.initialScopeName,this.repo,e);for(const n of e.references)if(n instanceof Yl){if(this.seenFullScopeRequests.has(n.scopeName))continue;this.seenFullScopeRequests.add(n.scopeName),this.Q.push(n)}else{if(this.seenFullScopeRequests.has(n.scopeName)||this.seenPartialScopeRequests.has(n.toKey()))continue;this.seenPartialScopeRequests.add(n.toKey()),this.Q.push(n)}}};function Yj(t,e,n,r){const s=n.lookup(t.scopeName);if(!s){if(t.scopeName===e)throw new Error(`No grammar provided for <${e}>`);return}const a=n.lookup(e);t instanceof Yl?af({baseGrammar:a,selfGrammar:s},r):Eg(t.ruleName,{baseGrammar:a,selfGrammar:s,repository:s.repository},r);const l=n.injections(t.scopeName);if(l)for(const u of l)r.add(new Yl(u))}function Eg(t,e,n){if(e.repository&&e.repository[t]){const r=e.repository[t];Df([r],e,n)}}function af(t,e){t.selfGrammar.patterns&&Array.isArray(t.selfGrammar.patterns)&&Df(t.selfGrammar.patterns,{...t,repository:t.selfGrammar.repository},e),t.selfGrammar.injections&&Df(Object.values(t.selfGrammar.injections),{...t,repository:t.selfGrammar.repository},e)}function Df(t,e,n){for(const r of t){if(n.visitedRule.has(r))continue;n.visitedRule.add(r);const s=r.repository?Kk({},e.repository,r.repository):e.repository;Array.isArray(r.patterns)&&Df(r.patterns,{...e,repository:s},n);const a=r.include;if(!a)continue;const l=nE(a);switch(l.kind){case 0:af({...e,selfGrammar:e.baseGrammar},n);break;case 1:af(e,n);break;case 2:Eg(l.ruleName,{...e,repository:s},n);break;case 3:case 4:const u=l.scopeName===e.selfGrammar.scopeName?e.selfGrammar:l.scopeName===e.baseGrammar.scopeName?e.baseGrammar:void 0;if(u){const f={baseGrammar:e.baseGrammar,selfGrammar:u,repository:s};l.kind===4?Eg(l.ruleName,f,n):af(f,n)}else l.kind===4?n.add(new Zj(l.scopeName,l.ruleName)):n.add(new Yl(l.scopeName));break}}}var Wj=class{kind=0},Xj=class{kind=1},eL=class{constructor(t){this.ruleName=t}kind=2},tL=class{constructor(t){this.scopeName=t}kind=3},nL=class{constructor(t,e){this.scopeName=t,this.ruleName=e}kind=4};function nE(t){if(t==="$base")return new Wj;if(t==="$self")return new Xj;const e=t.indexOf("#");if(e===-1)return new tL(t);if(e===0)return new eL(t.substring(1));{const n=t.substring(0,e),r=t.substring(e+1);return new nL(n,r)}}var rL=/\\(\d+)/,Z1=/\\(\d+)/g,sL=-1,rE=-2;var uc=class{$location;id;_nameIsCapturing;_name;_contentNameIsCapturing;_contentName;constructor(t,e,n,r){this.$location=t,this.id=e,this._name=n||null,this._nameIsCapturing=ju.hasCaptures(this._name),this._contentName=r||null,this._contentNameIsCapturing=ju.hasCaptures(this._contentName)}get debugName(){const t=this.$location?`${Zk(this.$location.filename)}:${this.$location.line}`:"unknown";return`${this.constructor.name}#${this.id} @ ${t}`}getName(t,e){return!this._nameIsCapturing||this._name===null||t===null||e===null?this._name:ju.replaceCaptures(this._name,t,e)}getContentName(t,e){return!this._contentNameIsCapturing||this._contentName===null?this._contentName:ju.replaceCaptures(this._contentName,t,e)}},iL=class extends uc{retokenizeCapturedWithRuleId;constructor(t,e,n,r,s){super(t,e,n,r),this.retokenizeCapturedWithRuleId=s}dispose(){}collectPatterns(t,e){throw new Error("Not supported!")}compile(t,e){throw new Error("Not supported!")}compileAG(t,e,n,r){throw new Error("Not supported!")}},aL=class extends uc{_match;captures;_cachedCompiledPatterns;constructor(t,e,n,r,s){super(t,e,n,null),this._match=new Wl(r,this.id),this.captures=s,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}get debugMatchRegExp(){return`${this._match.source}`}collectPatterns(t,e){e.push(this._match)}compile(t,e){return this._getCachedCompiledPatterns(t).compile(t)}compileAG(t,e,n,r){return this._getCachedCompiledPatterns(t).compileAG(t,n,r)}_getCachedCompiledPatterns(t){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new Xl,this.collectPatterns(t,this._cachedCompiledPatterns)),this._cachedCompiledPatterns}},Q1=class extends uc{hasMissingPatterns;patterns;_cachedCompiledPatterns;constructor(t,e,n,r,s){super(t,e,n,r),this.patterns=s.patterns,this.hasMissingPatterns=s.hasMissingPatterns,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}collectPatterns(t,e){for(const n of this.patterns)t.getRule(n).collectPatterns(t,e)}compile(t,e){return this._getCachedCompiledPatterns(t).compile(t)}compileAG(t,e,n,r){return this._getCachedCompiledPatterns(t).compileAG(t,n,r)}_getCachedCompiledPatterns(t){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new Xl,this.collectPatterns(t,this._cachedCompiledPatterns)),this._cachedCompiledPatterns}},Cg=class extends uc{_begin;beginCaptures;_end;endHasBackReferences;endCaptures;applyEndPatternLast;hasMissingPatterns;patterns;_cachedCompiledPatterns;constructor(t,e,n,r,s,a,l,u,f,d){super(t,e,n,r),this._begin=new Wl(s,this.id),this.beginCaptures=a,this._end=new Wl(l||"",-1),this.endHasBackReferences=this._end.hasBackReferences,this.endCaptures=u,this.applyEndPatternLast=f||!1,this.patterns=d.patterns,this.hasMissingPatterns=d.hasMissingPatterns,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}get debugBeginRegExp(){return`${this._begin.source}`}get debugEndRegExp(){return`${this._end.source}`}getEndWithResolvedBackReferences(t,e){return this._end.resolveBackReferences(t,e)}collectPatterns(t,e){e.push(this._begin)}compile(t,e){return this._getCachedCompiledPatterns(t,e).compile(t)}compileAG(t,e,n,r){return this._getCachedCompiledPatterns(t,e).compileAG(t,n,r)}_getCachedCompiledPatterns(t,e){if(!this._cachedCompiledPatterns){this._cachedCompiledPatterns=new Xl;for(const n of this.patterns)t.getRule(n).collectPatterns(t,this._cachedCompiledPatterns);this.applyEndPatternLast?this._cachedCompiledPatterns.push(this._end.hasBackReferences?this._end.clone():this._end):this._cachedCompiledPatterns.unshift(this._end.hasBackReferences?this._end.clone():this._end)}return this._end.hasBackReferences&&(this.applyEndPatternLast?this._cachedCompiledPatterns.setSource(this._cachedCompiledPatterns.length()-1,e):this._cachedCompiledPatterns.setSource(0,e)),this._cachedCompiledPatterns}},jf=class extends uc{_begin;beginCaptures;whileCaptures;_while;whileHasBackReferences;hasMissingPatterns;patterns;_cachedCompiledPatterns;_cachedCompiledWhilePatterns;constructor(t,e,n,r,s,a,l,u,f){super(t,e,n,r),this._begin=new Wl(s,this.id),this.beginCaptures=a,this.whileCaptures=u,this._while=new Wl(l,rE),this.whileHasBackReferences=this._while.hasBackReferences,this.patterns=f.patterns,this.hasMissingPatterns=f.hasMissingPatterns,this._cachedCompiledPatterns=null,this._cachedCompiledWhilePatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null),this._cachedCompiledWhilePatterns&&(this._cachedCompiledWhilePatterns.dispose(),this._cachedCompiledWhilePatterns=null)}get debugBeginRegExp(){return`${this._begin.source}`}get debugWhileRegExp(){return`${this._while.source}`}getWhileWithResolvedBackReferences(t,e){return this._while.resolveBackReferences(t,e)}collectPatterns(t,e){e.push(this._begin)}compile(t,e){return this._getCachedCompiledPatterns(t).compile(t)}compileAG(t,e,n,r){return this._getCachedCompiledPatterns(t).compileAG(t,n,r)}_getCachedCompiledPatterns(t){if(!this._cachedCompiledPatterns){this._cachedCompiledPatterns=new Xl;for(const e of this.patterns)t.getRule(e).collectPatterns(t,this._cachedCompiledPatterns)}return this._cachedCompiledPatterns}compileWhile(t,e){return this._getCachedCompiledWhilePatterns(t,e).compile(t)}compileWhileAG(t,e,n,r){return this._getCachedCompiledWhilePatterns(t,e).compileAG(t,n,r)}_getCachedCompiledWhilePatterns(t,e){return this._cachedCompiledWhilePatterns||(this._cachedCompiledWhilePatterns=new Xl,this._cachedCompiledWhilePatterns.push(this._while.hasBackReferences?this._while.clone():this._while)),this._while.hasBackReferences&&this._cachedCompiledWhilePatterns.setSource(0,e||""),this._cachedCompiledWhilePatterns}},sE=class Cn{static createCaptureRule(e,n,r,s,a){return e.registerRule(l=>new iL(n,l,r,s,a))}static getCompiledRuleId(e,n,r){return e.id||n.registerRule(s=>{if(e.id=s,e.match)return new aL(e.$vscodeTextmateLocation,e.id,e.name,e.match,Cn._compileCaptures(e.captures,n,r));if(typeof e.begin>"u"){e.repository&&(r=Kk({},r,e.repository));let a=e.patterns;return typeof a>"u"&&e.include&&(a=[{include:e.include}]),new Q1(e.$vscodeTextmateLocation,e.id,e.name,e.contentName,Cn._compilePatterns(a,n,r))}return e.while?new jf(e.$vscodeTextmateLocation,e.id,e.name,e.contentName,e.begin,Cn._compileCaptures(e.beginCaptures||e.captures,n,r),e.while,Cn._compileCaptures(e.whileCaptures||e.captures,n,r),Cn._compilePatterns(e.patterns,n,r)):new Cg(e.$vscodeTextmateLocation,e.id,e.name,e.contentName,e.begin,Cn._compileCaptures(e.beginCaptures||e.captures,n,r),e.end,Cn._compileCaptures(e.endCaptures||e.captures,n,r),e.applyEndPatternLast,Cn._compilePatterns(e.patterns,n,r))}),e.id}static _compileCaptures(e,n,r){let s=[];if(e){let a=0;for(const l in e){if(l==="$vscodeTextmateLocation")continue;const u=parseInt(l,10);u>a&&(a=u)}for(let l=0;l<=a;l++)s[l]=null;for(const l in e){if(l==="$vscodeTextmateLocation")continue;const u=parseInt(l,10);let f=0;e[l].patterns&&(f=Cn.getCompiledRuleId(e[l],n,r)),s[u]=Cn.createCaptureRule(n,e[l].$vscodeTextmateLocation,e[l].name,e[l].contentName,f)}}return s}static _compilePatterns(e,n,r){let s=[];if(e)for(let a=0,l=e.length;a<l;a++){const u=e[a];let f=-1;if(u.include){const d=nE(u.include);switch(d.kind){case 0:case 1:f=Cn.getCompiledRuleId(r[u.include],n,r);break;case 2:let m=r[d.ruleName];m&&(f=Cn.getCompiledRuleId(m,n,r));break;case 3:case 4:const p=d.scopeName,y=d.kind===4?d.ruleName:null,g=n.getExternalGrammar(p,r);if(g)if(y){let v=g.repository[y];v&&(f=Cn.getCompiledRuleId(v,n,g.repository))}else f=Cn.getCompiledRuleId(g.repository.$self,n,g.repository);break}}else f=Cn.getCompiledRuleId(u,n,r);if(f!==-1){const d=n.getRule(f);let m=!1;if((d instanceof Q1||d instanceof Cg||d instanceof jf)&&d.hasMissingPatterns&&d.patterns.length===0&&(m=!0),m)continue;s.push(f)}}return{patterns:s,hasMissingPatterns:(e?e.length:0)!==s.length}}},Wl=class iE{source;ruleId;hasAnchor;hasBackReferences;_anchorCache;constructor(e,n){if(e&&typeof e=="string"){const r=e.length;let s=0,a=[],l=!1;for(let u=0;u<r;u++)if(e.charAt(u)==="\\"&&u+1<r){const d=e.charAt(u+1);d==="z"?(a.push(e.substring(s,u)),a.push("$(?!\\n)(?<!\\n)"),s=u+2):(d==="A"||d==="G")&&(l=!0),u++}this.hasAnchor=l,s===0?this.source=e:(a.push(e.substring(s,r)),this.source=a.join(""))}else this.hasAnchor=!1,this.source=e;this.hasAnchor?this._anchorCache=this._buildAnchorCache():this._anchorCache=null,this.ruleId=n,typeof this.source=="string"?this.hasBackReferences=rL.test(this.source):this.hasBackReferences=!1}clone(){return new iE(this.source,this.ruleId)}setSource(e){this.source!==e&&(this.source=e,this.hasAnchor&&(this._anchorCache=this._buildAnchorCache()))}resolveBackReferences(e,n){if(typeof this.source!="string")throw new Error("This method should only be called if the source is a string");let r=n.map(s=>e.substring(s.start,s.end));return Z1.lastIndex=0,this.source.replace(Z1,(s,a)=>Yk(r[parseInt(a,10)]||""))}_buildAnchorCache(){if(typeof this.source!="string")throw new Error("This method should only be called if the source is a string");let e=[],n=[],r=[],s=[],a,l,u,f;for(a=0,l=this.source.length;a<l;a++)u=this.source.charAt(a),e[a]=u,n[a]=u,r[a]=u,s[a]=u,u==="\\"&&a+1<l&&(f=this.source.charAt(a+1),f==="A"?(e[a+1]="",n[a+1]="",r[a+1]="A",s[a+1]="A"):f==="G"?(e[a+1]="",n[a+1]="G",r[a+1]="",s[a+1]="G"):(e[a+1]=f,n[a+1]=f,r[a+1]=f,s[a+1]=f),a++);return{A0_G0:e.join(""),A0_G1:n.join(""),A1_G0:r.join(""),A1_G1:s.join("")}}resolveAnchors(e,n){return!this.hasAnchor||!this._anchorCache||typeof this.source!="string"?this.source:e?n?this._anchorCache.A1_G1:this._anchorCache.A1_G0:n?this._anchorCache.A0_G1:this._anchorCache.A0_G0}},Xl=class{_items;_hasAnchors;_cached;_anchorCache;constructor(){this._items=[],this._hasAnchors=!1,this._cached=null,this._anchorCache={A0_G0:null,A0_G1:null,A1_G0:null,A1_G1:null}}dispose(){this._disposeCaches()}_disposeCaches(){this._cached&&(this._cached.dispose(),this._cached=null),this._anchorCache.A0_G0&&(this._anchorCache.A0_G0.dispose(),this._anchorCache.A0_G0=null),this._anchorCache.A0_G1&&(this._anchorCache.A0_G1.dispose(),this._anchorCache.A0_G1=null),this._anchorCache.A1_G0&&(this._anchorCache.A1_G0.dispose(),this._anchorCache.A1_G0=null),this._anchorCache.A1_G1&&(this._anchorCache.A1_G1.dispose(),this._anchorCache.A1_G1=null)}push(t){this._items.push(t),this._hasAnchors=this._hasAnchors||t.hasAnchor}unshift(t){this._items.unshift(t),this._hasAnchors=this._hasAnchors||t.hasAnchor}length(){return this._items.length}setSource(t,e){this._items[t].source!==e&&(this._disposeCaches(),this._items[t].setSource(e))}compile(t){if(!this._cached){let e=this._items.map(n=>n.source);this._cached=new J1(t,e,this._items.map(n=>n.ruleId))}return this._cached}compileAG(t,e,n){return this._hasAnchors?e?n?(this._anchorCache.A1_G1||(this._anchorCache.A1_G1=this._resolveAnchors(t,e,n)),this._anchorCache.A1_G1):(this._anchorCache.A1_G0||(this._anchorCache.A1_G0=this._resolveAnchors(t,e,n)),this._anchorCache.A1_G0):n?(this._anchorCache.A0_G1||(this._anchorCache.A0_G1=this._resolveAnchors(t,e,n)),this._anchorCache.A0_G1):(this._anchorCache.A0_G0||(this._anchorCache.A0_G0=this._resolveAnchors(t,e,n)),this._anchorCache.A0_G0):this.compile(t)}_resolveAnchors(t,e,n){let r=this._items.map(s=>s.resolveAnchors(e,n));return new J1(t,r,this._items.map(s=>s.ruleId))}},J1=class{constructor(t,e,n){this.regExps=e,this.rules=n,this.scanner=t.createOnigScanner(e)}scanner;dispose(){typeof this.scanner.dispose=="function"&&this.scanner.dispose()}toString(){const t=[];for(let e=0,n=this.rules.length;e<n;e++)t.push("   - "+this.rules[e]+": "+this.regExps[e]);return t.join(`
`)}findNextMatchSync(t,e,n){const r=this.scanner.findNextMatchSync(t,e,n);return r?{ruleId:this.rules[r.index],captureIndices:r.captureIndices}:null}},mm=class{constructor(t,e){this.languageId=t,this.tokenType=e}},oL=class Tg{_defaultAttributes;_embeddedLanguagesMatcher;constructor(e,n){this._defaultAttributes=new mm(e,8),this._embeddedLanguagesMatcher=new lL(Object.entries(n||{}))}getDefaultAttributes(){return this._defaultAttributes}getBasicScopeAttributes(e){return e===null?Tg._NULL_SCOPE_METADATA:this._getBasicScopeAttributes.get(e)}static _NULL_SCOPE_METADATA=new mm(0,0);_getBasicScopeAttributes=new Wk(e=>{const n=this._scopeToLanguage(e),r=this._toStandardTokenType(e);return new mm(n,r)});_scopeToLanguage(e){return this._embeddedLanguagesMatcher.match(e)||0}_toStandardTokenType(e){const n=e.match(Tg.STANDARD_TOKEN_TYPE_REGEXP);if(!n)return 8;switch(n[1]){case"comment":return 1;case"string":return 2;case"regex":return 3;case"meta.embedded":return 0}throw new Error("Unexpected match for standard token type!")}static STANDARD_TOKEN_TYPE_REGEXP=/\b(comment|string|regex|meta\.embedded)\b/},lL=class{values;scopesRegExp;constructor(t){if(t.length===0)this.values=null,this.scopesRegExp=null;else{this.values=new Map(t);const e=t.map(([n,r])=>Yk(n));e.sort(),e.reverse(),this.scopesRegExp=new RegExp(`^((${e.join(")|(")}))($|\\.)`,"")}}match(t){if(!this.scopesRegExp)return;const e=t.match(this.scopesRegExp);if(e)return this.values.get(e[1])}},Y1=class{constructor(t,e){this.stack=t,this.stoppedEarly=e}};function aE(t,e,n,r,s,a,l,u){const f=e.content.length;let d=!1,m=-1;if(l){const g=cL(t,e,n,r,s,a);s=g.stack,r=g.linePos,n=g.isFirstLine,m=g.anchorPosition}const p=Date.now();for(;!d;){if(u!==0&&Date.now()-p>u)return new Y1(s,!0);y()}return new Y1(s,!1);function y(){const g=uL(t,e,n,r,s,m);if(!g){a.produce(s,f),d=!0;return}const v=g.captureIndices,w=g.matchedRuleId,E=v&&v.length>0?v[0].end>r:!1;if(w===sL){const S=s.getRule(t);a.produce(s,v[0].start),s=s.withContentNameScopesList(s.nameScopesList),wl(t,e,n,s,a,S.endCaptures,v),a.produce(s,v[0].end);const C=s;if(s=s.parent,m=C.getAnchorPos(),!E&&C.getEnterPos()===r){s=C,a.produce(s,f),d=!0;return}}else{const S=t.getRule(w);a.produce(s,v[0].start);const C=s,T=S.getName(e.content,v),M=s.contentNameScopesList.pushAttributed(T,t);if(s=s.push(w,r,m,v[0].end===f,null,M,M),S instanceof Cg){const I=S;wl(t,e,n,s,a,I.beginCaptures,v),a.produce(s,v[0].end),m=v[0].end;const R=I.getContentName(e.content,v),U=M.pushAttributed(R,t);if(s=s.withContentNameScopesList(U),I.endHasBackReferences&&(s=s.withEndRule(I.getEndWithResolvedBackReferences(e.content,v))),!E&&C.hasSameRuleAs(s)){s=s.pop(),a.produce(s,f),d=!0;return}}else if(S instanceof jf){const I=S;wl(t,e,n,s,a,I.beginCaptures,v),a.produce(s,v[0].end),m=v[0].end;const R=I.getContentName(e.content,v),U=M.pushAttributed(R,t);if(s=s.withContentNameScopesList(U),I.whileHasBackReferences&&(s=s.withEndRule(I.getWhileWithResolvedBackReferences(e.content,v))),!E&&C.hasSameRuleAs(s)){s=s.pop(),a.produce(s,f),d=!0;return}}else if(wl(t,e,n,s,a,S.captures,v),a.produce(s,v[0].end),s=s.pop(),!E){s=s.safePop(),a.produce(s,f),d=!0;return}}v[0].end>r&&(r=v[0].end,n=!1)}}function cL(t,e,n,r,s,a){let l=s.beginRuleCapturedEOL?0:-1;const u=[];for(let f=s;f;f=f.pop()){const d=f.getRule(t);d instanceof jf&&u.push({rule:d,stack:f})}for(let f=u.pop();f;f=u.pop()){const{ruleScanner:d,findOptions:m}=hL(f.rule,t,f.stack.endRule,n,r===l),p=d.findNextMatchSync(e,r,m);if(p){if(p.ruleId!==rE){s=f.stack.pop();break}p.captureIndices&&p.captureIndices.length&&(a.produce(f.stack,p.captureIndices[0].start),wl(t,e,n,f.stack,a,f.rule.whileCaptures,p.captureIndices),a.produce(f.stack,p.captureIndices[0].end),l=p.captureIndices[0].end,p.captureIndices[0].end>r&&(r=p.captureIndices[0].end,n=!1))}else{s=f.stack.pop();break}}return{stack:s,linePos:r,anchorPosition:l,isFirstLine:n}}function uL(t,e,n,r,s,a){const l=fL(t,e,n,r,s,a),u=t.getInjections();if(u.length===0)return l;const f=dL(u,t,e,n,r,s,a);if(!f)return l;if(!l)return f;const d=l.captureIndices[0].start,m=f.captureIndices[0].start;return m<d||f.priorityMatch&&m===d?f:l}function fL(t,e,n,r,s,a){const l=s.getRule(t),{ruleScanner:u,findOptions:f}=oE(l,t,s.endRule,n,r===a),d=u.findNextMatchSync(e,r,f);return d?{captureIndices:d.captureIndices,matchedRuleId:d.ruleId}:null}function dL(t,e,n,r,s,a,l){let u=Number.MAX_VALUE,f=null,d,m=0;const p=a.contentNameScopesList.getScopeNames();for(let y=0,g=t.length;y<g;y++){const v=t[y];if(!v.matcher(p))continue;const w=e.getRule(v.ruleId),{ruleScanner:E,findOptions:S}=oE(w,e,null,r,s===l),C=E.findNextMatchSync(n,s,S);if(!C)continue;const T=C.captureIndices[0].start;if(!(T>=u)&&(u=T,f=C.captureIndices,d=C.ruleId,m=v.priority,u===s))break}return f?{priorityMatch:m===-1,captureIndices:f,matchedRuleId:d}:null}function oE(t,e,n,r,s){return{ruleScanner:t.compileAG(e,n,r,s),findOptions:0}}function hL(t,e,n,r,s){return{ruleScanner:t.compileWhileAG(e,n,r,s),findOptions:0}}function wl(t,e,n,r,s,a,l){if(a.length===0)return;const u=e.content,f=Math.min(a.length,l.length),d=[],m=l[0].end;for(let p=0;p<f;p++){const y=a[p];if(y===null)continue;const g=l[p];if(g.length===0)continue;if(g.start>m)break;for(;d.length>0&&d[d.length-1].endPos<=g.start;)s.produceFromScopes(d[d.length-1].scopes,d[d.length-1].endPos),d.pop();if(d.length>0?s.produceFromScopes(d[d.length-1].scopes,g.start):s.produce(r,g.start),y.retokenizeCapturedWithRuleId){const w=y.getName(u,l),E=r.contentNameScopesList.pushAttributed(w,t),S=y.getContentName(u,l),C=E.pushAttributed(S,t),T=r.push(y.retokenizeCapturedWithRuleId,g.start,-1,!1,null,E,C),M=t.createOnigString(u.substring(0,g.end));aE(t,M,n&&g.start===0,g.start,T,s,!1,0),tE(M);continue}const v=y.getName(u,l);if(v!==null){const E=(d.length>0?d[d.length-1].scopes:r.contentNameScopesList).pushAttributed(v,t);d.push(new pL(E,g.end))}}for(;d.length>0;)s.produceFromScopes(d[d.length-1].scopes,d[d.length-1].endPos),d.pop()}var pL=class{scopes;endPos;constructor(t,e){this.scopes=t,this.endPos=e}};function mL(t,e,n,r,s,a,l,u){return new yL(t,e,n,r,s,a,l,u)}function W1(t,e,n,r,s){const a=Mf(e,Lf),l=sE.getCompiledRuleId(n,r,s.repository);for(const u of a)t.push({debugSelector:e,matcher:u.matcher,ruleId:l,grammar:s,priority:u.priority})}function Lf(t,e){if(e.length<t.length)return!1;let n=0;return t.every(r=>{for(let s=n;s<e.length;s++)if(gL(e[s],r))return n=s+1,!0;return!1})}function gL(t,e){if(!t)return!1;if(t===e)return!0;const n=e.length;return t.length>n&&t.substr(0,n)===e&&t[n]==="."}var yL=class{constructor(t,e,n,r,s,a,l,u){if(this._rootScopeName=t,this.balancedBracketSelectors=a,this._onigLib=u,this._basicScopeAttributesProvider=new oL(n,r),this._rootId=-1,this._lastRuleId=0,this._ruleId2desc=[null],this._includedGrammars={},this._grammarRepository=l,this._grammar=X1(e,null),this._injections=null,this._tokenTypeMatchers=[],s)for(const f of Object.keys(s)){const d=Mf(f,Lf);for(const m of d)this._tokenTypeMatchers.push({matcher:m.matcher,type:s[f]})}}_rootId;_lastRuleId;_ruleId2desc;_includedGrammars;_grammarRepository;_grammar;_injections;_basicScopeAttributesProvider;_tokenTypeMatchers;get themeProvider(){return this._grammarRepository}dispose(){for(const t of this._ruleId2desc)t&&t.dispose()}createOnigScanner(t){return this._onigLib.createOnigScanner(t)}createOnigString(t){return this._onigLib.createOnigString(t)}getMetadataForScope(t){return this._basicScopeAttributesProvider.getBasicScopeAttributes(t)}_collectInjections(){const t={lookup:s=>s===this._rootScopeName?this._grammar:this.getExternalGrammar(s),injections:s=>this._grammarRepository.injections(s)},e=[],n=this._rootScopeName,r=t.lookup(n);if(r){const s=r.injections;if(s)for(let l in s)W1(e,l,s[l],this,r);const a=this._grammarRepository.injections(n);a&&a.forEach(l=>{const u=this.getExternalGrammar(l);if(u){const f=u.injectionSelector;f&&W1(e,f,u,this,u)}})}return e.sort((s,a)=>s.priority-a.priority),e}getInjections(){return this._injections===null&&(this._injections=this._collectInjections()),this._injections}registerRule(t){const e=++this._lastRuleId,n=t(e);return this._ruleId2desc[e]=n,n}getRule(t){return this._ruleId2desc[t]}getExternalGrammar(t,e){if(this._includedGrammars[t])return this._includedGrammars[t];if(this._grammarRepository){const n=this._grammarRepository.lookup(t);if(n)return this._includedGrammars[t]=X1(n,e&&e.$base),this._includedGrammars[t]}}tokenizeLine(t,e,n=0){const r=this._tokenize(t,e,!1,n);return{tokens:r.lineTokens.getResult(r.ruleStack,r.lineLength),ruleStack:r.ruleStack,stoppedEarly:r.stoppedEarly}}tokenizeLine2(t,e,n=0){const r=this._tokenize(t,e,!0,n);return{tokens:r.lineTokens.getBinaryResult(r.ruleStack,r.lineLength),ruleStack:r.ruleStack,stoppedEarly:r.stoppedEarly}}_tokenize(t,e,n,r){this._rootId===-1&&(this._rootId=sE.getCompiledRuleId(this._grammar.repository.$self,this,this._grammar.repository),this.getInjections());let s;if(!e||e===Ag.NULL){s=!0;const d=this._basicScopeAttributesProvider.getDefaultAttributes(),m=this.themeProvider.getDefaults(),p=io.set(0,d.languageId,d.tokenType,null,m.fontStyle,m.foregroundId,m.backgroundId),y=this.getRule(this._rootId).getName(null,null);let g;y?g=zl.createRootAndLookUpScopeName(y,p,this):g=zl.createRoot("unknown",p),e=new Ag(null,this._rootId,-1,-1,!1,null,g,g)}else s=!1,e.reset();t=t+`
`;const a=this.createOnigString(t),l=a.content.length,u=new _L(n,t,this._tokenTypeMatchers,this.balancedBracketSelectors),f=aE(this,a,s,0,e,u,!0,r);return tE(a),{lineLength:l,lineTokens:u,ruleStack:f.stack,stoppedEarly:f.stoppedEarly}}};function X1(t,e){return t=Lj(t),t.repository=t.repository||{},t.repository.$self={$vscodeTextmateLocation:t.$vscodeTextmateLocation,patterns:t.patterns,name:t.scopeName},t.repository.$base=e||t.repository.$self,t}var zl=class Gr{constructor(e,n,r){this.parent=e,this.scopePath=n,this.tokenAttributes=r}static fromExtension(e,n){let r=e,s=e?.scopePath??null;for(const a of n)s=pm.push(s,a.scopeNames),r=new Gr(r,s,a.encodedTokenAttributes);return r}static createRoot(e,n){return new Gr(null,new pm(null,e),n)}static createRootAndLookUpScopeName(e,n,r){const s=r.getMetadataForScope(e),a=new pm(null,e),l=r.themeProvider.themeMatch(a),u=Gr.mergeAttributes(n,s,l);return new Gr(null,a,u)}get scopeName(){return this.scopePath.scopeName}toString(){return this.getScopeNames().join(" ")}equals(e){return Gr.equals(this,e)}static equals(e,n){do{if(e===n||!e&&!n)return!0;if(!e||!n||e.scopeName!==n.scopeName||e.tokenAttributes!==n.tokenAttributes)return!1;e=e.parent,n=n.parent}while(!0)}static mergeAttributes(e,n,r){let s=-1,a=0,l=0;return r!==null&&(s=r.fontStyle,a=r.foregroundId,l=r.backgroundId),io.set(e,n.languageId,n.tokenType,null,s,a,l)}pushAttributed(e,n){if(e===null)return this;if(e.indexOf(" ")===-1)return Gr._pushAttributed(this,e,n);const r=e.split(/ /g);let s=this;for(const a of r)s=Gr._pushAttributed(s,a,n);return s}static _pushAttributed(e,n,r){const s=r.getMetadataForScope(n),a=e.scopePath.push(n),l=r.themeProvider.themeMatch(a),u=Gr.mergeAttributes(e.tokenAttributes,s,l);return new Gr(e,a,u)}getScopeNames(){return this.scopePath.getSegments()}getExtensionIfDefined(e){const n=[];let r=this;for(;r&&r!==e;)n.push({encodedTokenAttributes:r.tokenAttributes,scopeNames:r.scopePath.getExtensionIfDefined(r.parent?.scopePath??null)}),r=r.parent;return r===e?n.reverse():void 0}},Ag=class Di{constructor(e,n,r,s,a,l,u,f){this.parent=e,this.ruleId=n,this.beginRuleCapturedEOL=a,this.endRule=l,this.nameScopesList=u,this.contentNameScopesList=f,this.depth=this.parent?this.parent.depth+1:1,this._enterPos=r,this._anchorPos=s}_stackElementBrand=void 0;static NULL=new Di(null,0,0,0,!1,null,null,null);_enterPos;_anchorPos;depth;equals(e){return e===null?!1:Di._equals(this,e)}static _equals(e,n){return e===n?!0:this._structuralEquals(e,n)?zl.equals(e.contentNameScopesList,n.contentNameScopesList):!1}static _structuralEquals(e,n){do{if(e===n||!e&&!n)return!0;if(!e||!n||e.depth!==n.depth||e.ruleId!==n.ruleId||e.endRule!==n.endRule)return!1;e=e.parent,n=n.parent}while(!0)}clone(){return this}static _reset(e){for(;e;)e._enterPos=-1,e._anchorPos=-1,e=e.parent}reset(){Di._reset(this)}pop(){return this.parent}safePop(){return this.parent?this.parent:this}push(e,n,r,s,a,l,u){return new Di(this,e,n,r,s,a,l,u)}getEnterPos(){return this._enterPos}getAnchorPos(){return this._anchorPos}getRule(e){return e.getRule(this.ruleId)}toString(){const e=[];return this._writeString(e,0),"["+e.join(",")+"]"}_writeString(e,n){return this.parent&&(n=this.parent._writeString(e,n)),e[n++]=`(${this.ruleId}, ${this.nameScopesList?.toString()}, ${this.contentNameScopesList?.toString()})`,n}withContentNameScopesList(e){return this.contentNameScopesList===e?this:this.parent.push(this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,this.endRule,this.nameScopesList,e)}withEndRule(e){return this.endRule===e?this:new Di(this.parent,this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,e,this.nameScopesList,this.contentNameScopesList)}hasSameRuleAs(e){let n=this;for(;n&&n._enterPos===e._enterPos;){if(n.ruleId===e.ruleId)return!0;n=n.parent}return!1}toStateStackFrame(){return{ruleId:this.ruleId,beginRuleCapturedEOL:this.beginRuleCapturedEOL,endRule:this.endRule,nameScopesList:this.nameScopesList?.getExtensionIfDefined(this.parent?.nameScopesList??null)??[],contentNameScopesList:this.contentNameScopesList?.getExtensionIfDefined(this.nameScopesList)??[]}}static pushFrame(e,n){const r=zl.fromExtension(e?.nameScopesList??null,n.nameScopesList);return new Di(e,n.ruleId,n.enterPos??-1,n.anchorPos??-1,n.beginRuleCapturedEOL,n.endRule,r,zl.fromExtension(r,n.contentNameScopesList))}},bL=class{balancedBracketScopes;unbalancedBracketScopes;allowAny=!1;constructor(t,e){this.balancedBracketScopes=t.flatMap(n=>n==="*"?(this.allowAny=!0,[]):Mf(n,Lf).map(r=>r.matcher)),this.unbalancedBracketScopes=e.flatMap(n=>Mf(n,Lf).map(r=>r.matcher))}get matchesAlways(){return this.allowAny&&this.unbalancedBracketScopes.length===0}get matchesNever(){return this.balancedBracketScopes.length===0&&!this.allowAny}match(t){for(const e of this.unbalancedBracketScopes)if(e(t))return!1;for(const e of this.balancedBracketScopes)if(e(t))return!0;return this.allowAny}},_L=class{constructor(t,e,n,r){this.balancedBracketSelectors=r,this._emitBinaryTokens=t,this._tokenTypeOverrides=n,this._lineText=null,this._tokens=[],this._binaryTokens=[],this._lastTokenEndIndex=0}_emitBinaryTokens;_lineText;_tokens;_binaryTokens;_lastTokenEndIndex;_tokenTypeOverrides;produce(t,e){this.produceFromScopes(t.contentNameScopesList,e)}produceFromScopes(t,e){if(this._lastTokenEndIndex>=e)return;if(this._emitBinaryTokens){let r=t?.tokenAttributes??0,s=!1;if(this.balancedBracketSelectors?.matchesAlways&&(s=!0),this._tokenTypeOverrides.length>0||this.balancedBracketSelectors&&!this.balancedBracketSelectors.matchesAlways&&!this.balancedBracketSelectors.matchesNever){const a=t?.getScopeNames()??[];for(const l of this._tokenTypeOverrides)l.matcher(a)&&(r=io.set(r,0,l.type,null,-1,0,0));this.balancedBracketSelectors&&(s=this.balancedBracketSelectors.match(a))}if(s&&(r=io.set(r,0,8,s,-1,0,0)),this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-1]===r){this._lastTokenEndIndex=e;return}this._binaryTokens.push(this._lastTokenEndIndex),this._binaryTokens.push(r),this._lastTokenEndIndex=e;return}const n=t?.getScopeNames()??[];this._tokens.push({startIndex:this._lastTokenEndIndex,endIndex:e,scopes:n}),this._lastTokenEndIndex=e}getResult(t,e){return this._tokens.length>0&&this._tokens[this._tokens.length-1].startIndex===e-1&&this._tokens.pop(),this._tokens.length===0&&(this._lastTokenEndIndex=-1,this.produce(t,e),this._tokens[this._tokens.length-1].startIndex=0),this._tokens}getBinaryResult(t,e){this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-2]===e-1&&(this._binaryTokens.pop(),this._binaryTokens.pop()),this._binaryTokens.length===0&&(this._lastTokenEndIndex=-1,this.produce(t,e),this._binaryTokens[this._binaryTokens.length-2]=0);const n=new Uint32Array(this._binaryTokens.length);for(let r=0,s=this._binaryTokens.length;r<s;r++)n[r]=this._binaryTokens[r];return n}},vL=class{constructor(t,e){this._onigLib=e,this._theme=t}_grammars=new Map;_rawGrammars=new Map;_injectionGrammars=new Map;_theme;dispose(){for(const t of this._grammars.values())t.dispose()}setTheme(t){this._theme=t}getColorMap(){return this._theme.getColorMap()}addGrammar(t,e){this._rawGrammars.set(t.scopeName,t),e&&this._injectionGrammars.set(t.scopeName,e)}lookup(t){return this._rawGrammars.get(t)}injections(t){return this._injectionGrammars.get(t)}getDefaults(){return this._theme.getDefaults()}themeMatch(t){return this._theme.match(t)}grammarForScopeName(t,e,n,r,s){if(!this._grammars.has(t)){let a=this._rawGrammars.get(t);if(!a)return null;this._grammars.set(t,mL(t,a,e,n,r,s,this,this._onigLib))}return this._grammars.get(t)}},xL=class{_options;_syncRegistry;_ensureGrammarCache;constructor(e){this._options=e,this._syncRegistry=new vL(If.createFromRawTheme(e.theme,e.colorMap),e.onigLib),this._ensureGrammarCache=new Map}dispose(){this._syncRegistry.dispose()}setTheme(e,n){this._syncRegistry.setTheme(If.createFromRawTheme(e,n))}getColorMap(){return this._syncRegistry.getColorMap()}loadGrammarWithEmbeddedLanguages(e,n,r){return this.loadGrammarWithConfiguration(e,n,{embeddedLanguages:r})}loadGrammarWithConfiguration(e,n,r){return this._loadGrammar(e,n,r.embeddedLanguages,r.tokenTypes,new bL(r.balancedBracketSelectors||[],r.unbalancedBracketSelectors||[]))}loadGrammar(e){return this._loadGrammar(e,0,null,null,null)}_loadGrammar(e,n,r,s,a){const l=new Jj(this._syncRegistry,e);for(;l.Q.length>0;)l.Q.map(u=>this._loadSingleGrammar(u.scopeName)),l.processQueue();return this._grammarForScopeName(e,n,r,s,a)}_loadSingleGrammar(e){this._ensureGrammarCache.has(e)||(this._doLoadSingleGrammar(e),this._ensureGrammarCache.set(e,!0))}_doLoadSingleGrammar(e){const n=this._options.loadGrammar(e);if(n){const r=typeof this._options.getInjections=="function"?this._options.getInjections(e):void 0;this._syncRegistry.addGrammar(n,r)}}addGrammar(e,n=[],r=0,s=null){return this._syncRegistry.addGrammar(e,n),this._grammarForScopeName(e.scopeName,r,s)}_grammarForScopeName(e,n=0,r=null,s=null,a=null){return this._syncRegistry.grammarForScopeName(e,n,r,s,a)}},Rg=Ag.NULL;const wL=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"];class fc{constructor(e,n,r){this.normal=n,this.property=e,r&&(this.space=r)}}fc.prototype.normal={};fc.prototype.property={};fc.prototype.space=void 0;function lE(t,e){const n={},r={};for(const s of t)Object.assign(n,s.property),Object.assign(r,s.normal);return new fc(n,r,e)}function Og(t){return t.toLowerCase()}class Wn{constructor(e,n){this.attribute=n,this.property=e}}Wn.prototype.attribute="";Wn.prototype.booleanish=!1;Wn.prototype.boolean=!1;Wn.prototype.commaOrSpaceSeparated=!1;Wn.prototype.commaSeparated=!1;Wn.prototype.defined=!1;Wn.prototype.mustUseProperty=!1;Wn.prototype.number=!1;Wn.prototype.overloadedBoolean=!1;Wn.prototype.property="";Wn.prototype.spaceSeparated=!1;Wn.prototype.space=void 0;let SL=0;const qe=Zi(),Vt=Zi(),Ng=Zi(),be=Zi(),kt=Zi(),Wa=Zi(),lr=Zi();function Zi(){return 2**++SL}const Ig=Object.freeze(Object.defineProperty({__proto__:null,boolean:qe,booleanish:Vt,commaOrSpaceSeparated:lr,commaSeparated:Wa,number:be,overloadedBoolean:Ng,spaceSeparated:kt},Symbol.toStringTag,{value:"Module"})),gm=Object.keys(Ig);class By extends Wn{constructor(e,n,r,s){let a=-1;if(super(e,n),ew(this,"space",s),typeof r=="number")for(;++a<gm.length;){const l=gm[a];ew(this,gm[a],(r&Ig[l])===Ig[l])}}}By.prototype.defined=!0;function ew(t,e,n){n&&(t[e]=n)}function fo(t){const e={},n={};for(const[r,s]of Object.entries(t.properties)){const a=new By(r,t.transform(t.attributes||{},r),s,t.space);t.mustUseProperty&&t.mustUseProperty.includes(r)&&(a.mustUseProperty=!0),e[r]=a,n[Og(r)]=r,n[Og(a.attribute)]=r}return new fc(e,n,t.space)}const cE=fo({properties:{ariaActiveDescendant:null,ariaAtomic:Vt,ariaAutoComplete:null,ariaBusy:Vt,ariaChecked:Vt,ariaColCount:be,ariaColIndex:be,ariaColSpan:be,ariaControls:kt,ariaCurrent:null,ariaDescribedBy:kt,ariaDetails:null,ariaDisabled:Vt,ariaDropEffect:kt,ariaErrorMessage:null,ariaExpanded:Vt,ariaFlowTo:kt,ariaGrabbed:Vt,ariaHasPopup:null,ariaHidden:Vt,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:kt,ariaLevel:be,ariaLive:null,ariaModal:Vt,ariaMultiLine:Vt,ariaMultiSelectable:Vt,ariaOrientation:null,ariaOwns:kt,ariaPlaceholder:null,ariaPosInSet:be,ariaPressed:Vt,ariaReadOnly:Vt,ariaRelevant:null,ariaRequired:Vt,ariaRoleDescription:kt,ariaRowCount:be,ariaRowIndex:be,ariaRowSpan:be,ariaSelected:Vt,ariaSetSize:be,ariaSort:null,ariaValueMax:be,ariaValueMin:be,ariaValueNow:be,ariaValueText:null,role:null},transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function uE(t,e){return e in t?t[e]:e}function fE(t,e){return uE(t,e.toLowerCase())}const kL=fo({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Wa,acceptCharset:kt,accessKey:kt,action:null,allow:null,allowFullScreen:qe,allowPaymentRequest:qe,allowUserMedia:qe,alt:null,as:null,async:qe,autoCapitalize:null,autoComplete:kt,autoFocus:qe,autoPlay:qe,blocking:kt,capture:null,charSet:null,checked:qe,cite:null,className:kt,cols:be,colSpan:null,content:null,contentEditable:Vt,controls:qe,controlsList:kt,coords:be|Wa,crossOrigin:null,data:null,dateTime:null,decoding:null,default:qe,defer:qe,dir:null,dirName:null,disabled:qe,download:Ng,draggable:Vt,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:qe,formTarget:null,headers:kt,height:be,hidden:Ng,high:be,href:null,hrefLang:null,htmlFor:kt,httpEquiv:kt,id:null,imageSizes:null,imageSrcSet:null,inert:qe,inputMode:null,integrity:null,is:null,isMap:qe,itemId:null,itemProp:kt,itemRef:kt,itemScope:qe,itemType:kt,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:qe,low:be,manifest:null,max:null,maxLength:be,media:null,method:null,min:null,minLength:be,multiple:qe,muted:qe,name:null,nonce:null,noModule:qe,noValidate:qe,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:qe,optimum:be,pattern:null,ping:kt,placeholder:null,playsInline:qe,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:qe,referrerPolicy:null,rel:kt,required:qe,reversed:qe,rows:be,rowSpan:be,sandbox:kt,scope:null,scoped:qe,seamless:qe,selected:qe,shadowRootClonable:qe,shadowRootDelegatesFocus:qe,shadowRootMode:null,shape:null,size:be,sizes:null,slot:null,span:be,spellCheck:Vt,src:null,srcDoc:null,srcLang:null,srcSet:null,start:be,step:null,style:null,tabIndex:be,target:null,title:null,translate:null,type:null,typeMustMatch:qe,useMap:null,value:Vt,width:be,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:kt,axis:null,background:null,bgColor:null,border:be,borderColor:null,bottomMargin:be,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:qe,declare:qe,event:null,face:null,frame:null,frameBorder:null,hSpace:be,leftMargin:be,link:null,longDesc:null,lowSrc:null,marginHeight:be,marginWidth:be,noResize:qe,noHref:qe,noShade:qe,noWrap:qe,object:null,profile:null,prompt:null,rev:null,rightMargin:be,rules:null,scheme:null,scrolling:Vt,standby:null,summary:null,text:null,topMargin:be,valueType:null,version:null,vAlign:null,vLink:null,vSpace:be,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:qe,disableRemotePlayback:qe,prefix:null,property:null,results:be,security:null,unselectable:null},space:"html",transform:fE}),EL=fo({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:lr,accentHeight:be,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:be,amplitude:be,arabicForm:null,ascent:be,attributeName:null,attributeType:null,azimuth:be,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:be,by:null,calcMode:null,capHeight:be,className:kt,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:be,diffuseConstant:be,direction:null,display:null,dur:null,divisor:be,dominantBaseline:null,download:qe,dx:null,dy:null,edgeMode:null,editable:null,elevation:be,enableBackground:null,end:null,event:null,exponent:be,externalResourcesRequired:null,fill:null,fillOpacity:be,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Wa,g2:Wa,glyphName:Wa,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:be,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:be,horizOriginX:be,horizOriginY:be,id:null,ideographic:be,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:be,k:be,k1:be,k2:be,k3:be,k4:be,kernelMatrix:lr,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:be,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:be,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:be,overlineThickness:be,paintOrder:null,panose1:null,path:null,pathLength:be,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:kt,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:be,pointsAtY:be,pointsAtZ:be,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:lr,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:lr,rev:lr,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:lr,requiredFeatures:lr,requiredFonts:lr,requiredFormats:lr,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:be,specularExponent:be,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:be,strikethroughThickness:be,string:null,stroke:null,strokeDashArray:lr,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:be,strokeOpacity:be,strokeWidth:null,style:null,surfaceScale:be,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:lr,tabIndex:be,tableValues:null,target:null,targetX:be,targetY:be,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:lr,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:be,underlineThickness:be,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:be,values:null,vAlphabetic:be,vMathematical:be,vectorEffect:null,vHanging:be,vIdeographic:be,version:null,vertAdvY:be,vertOriginX:be,vertOriginY:be,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:be,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:uE}),dE=fo({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()}}),hE=fo({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:fE}),pE=fo({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()}}),CL={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},TL=/[A-Z]/g,tw=/-[a-z]/g,AL=/^data[-\w.:]+$/i;function mE(t,e){const n=Og(e);let r=e,s=Wn;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&AL.test(e)){if(e.charAt(4)==="-"){const a=e.slice(5).replace(tw,OL);r="data"+a.charAt(0).toUpperCase()+a.slice(1)}else{const a=e.slice(4);if(!tw.test(a)){let l=a.replace(TL,RL);l.charAt(0)!=="-"&&(l="-"+l),e="data"+l}}s=By}return new s(r,e)}function RL(t){return"-"+t.toLowerCase()}function OL(t){return t.charAt(1).toUpperCase()}const gE=lE([cE,kL,dE,hE,pE],"html"),dc=lE([cE,EL,dE,hE,pE],"svg"),nw={}.hasOwnProperty;function NL(t,e){const n=e||{};function r(s,...a){let l=r.invalid;const u=r.handlers;if(s&&nw.call(s,t)){const f=String(s[t]);l=nw.call(u,f)?u[f]:r.unknown}if(l)return l.call(this,s,...a)}return r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}const IL=/["&'<>`]/g,ML=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,DL=/[\x01-\t\v\f\x0E-\x1F\x7F\x81\x8D\x8F\x90\x9D\xA0-\uFFFF]/g,jL=/[|\\{}()[\]^$+*?.]/g,rw=new WeakMap;function LL(t,e){if(t=t.replace(e.subset?zL(e.subset):IL,r),e.subset||e.escapeOnly)return t;return t.replace(ML,n).replace(DL,r);function n(s,a,l){return e.format((s.charCodeAt(0)-55296)*1024+s.charCodeAt(1)-56320+65536,l.charCodeAt(a+2),e)}function r(s,a,l){return e.format(s.charCodeAt(0),l.charCodeAt(a+1),e)}}function zL(t){let e=rw.get(t);return e||(e=PL(t),rw.set(t,e)),e}function PL(t){const e=[];let n=-1;for(;++n<t.length;)e.push(t[n].replace(jL,"\\$&"));return new RegExp("(?:"+e.join("|")+")","g")}const BL=/[\dA-Fa-f]/;function UL(t,e,n){const r="&#x"+t.toString(16).toUpperCase();return n&&e&&!BL.test(String.fromCharCode(e))?r:r+";"}const $L=/\d/;function qL(t,e,n){const r="&#"+String(t);return n&&e&&!$L.test(String.fromCharCode(e))?r:r+";"}const FL=["AElig","AMP","Aacute","Acirc","Agrave","Aring","Atilde","Auml","COPY","Ccedil","ETH","Eacute","Ecirc","Egrave","Euml","GT","Iacute","Icirc","Igrave","Iuml","LT","Ntilde","Oacute","Ocirc","Ograve","Oslash","Otilde","Ouml","QUOT","REG","THORN","Uacute","Ucirc","Ugrave","Uuml","Yacute","aacute","acirc","acute","aelig","agrave","amp","aring","atilde","auml","brvbar","ccedil","cedil","cent","copy","curren","deg","divide","eacute","ecirc","egrave","eth","euml","frac12","frac14","frac34","gt","iacute","icirc","iexcl","igrave","iquest","iuml","laquo","lt","macr","micro","middot","nbsp","not","ntilde","oacute","ocirc","ograve","ordf","ordm","oslash","otilde","ouml","para","plusmn","pound","quot","raquo","reg","sect","shy","sup1","sup2","sup3","szlig","thorn","times","uacute","ucirc","ugrave","uml","uuml","yacute","yen","yuml"],ym={nbsp:"",iexcl:"",cent:"",pound:"",curren:"",yen:"",brvbar:"",sect:"",uml:"",copy:"",ordf:"",laquo:"",not:"",shy:"",reg:"",macr:"",deg:"",plusmn:"",sup2:"",sup3:"",acute:"",micro:"",para:"",middot:"",cedil:"",sup1:"",ordm:"",raquo:"",frac14:"",frac12:"",frac34:"",iquest:"",Agrave:"",Aacute:"",Acirc:"",Atilde:"",Auml:"",Aring:"",AElig:"",Ccedil:"",Egrave:"",Eacute:"",Ecirc:"",Euml:"",Igrave:"",Iacute:"",Icirc:"",Iuml:"",ETH:"",Ntilde:"",Ograve:"",Oacute:"",Ocirc:"",Otilde:"",Ouml:"",times:"",Oslash:"",Ugrave:"",Uacute:"",Ucirc:"",Uuml:"",Yacute:"",THORN:"",szlig:"",agrave:"",aacute:"",acirc:"",atilde:"",auml:"",aring:"",aelig:"",ccedil:"",egrave:"",eacute:"",ecirc:"",euml:"",igrave:"",iacute:"",icirc:"",iuml:"",eth:"",ntilde:"",ograve:"",oacute:"",ocirc:"",otilde:"",ouml:"",divide:"",oslash:"",ugrave:"",uacute:"",ucirc:"",uuml:"",yacute:"",thorn:"",yuml:"",fnof:"",Alpha:"",Beta:"",Gamma:"",Delta:"",Epsilon:"",Zeta:"",Eta:"",Theta:"",Iota:"",Kappa:"",Lambda:"",Mu:"",Nu:"",Xi:"",Omicron:"",Pi:"",Rho:"",Sigma:"",Tau:"",Upsilon:"",Phi:"",Chi:"",Psi:"",Omega:"",alpha:"",beta:"",gamma:"",delta:"",epsilon:"",zeta:"",eta:"",theta:"",iota:"",kappa:"",lambda:"",mu:"",nu:"",xi:"",omicron:"",pi:"",rho:"",sigmaf:"",sigma:"",tau:"",upsilon:"",phi:"",chi:"",psi:"",omega:"",thetasym:"",upsih:"",piv:"",bull:"",hellip:"",prime:"",Prime:"",oline:"",frasl:"",weierp:"",image:"",real:"",trade:"",alefsym:"",larr:"",uarr:"",rarr:"",darr:"",harr:"",crarr:"",lArr:"",uArr:"",rArr:"",dArr:"",hArr:"",forall:"",part:"",exist:"",empty:"",nabla:"",isin:"",notin:"",ni:"",prod:"",sum:"",minus:"",lowast:"",radic:"",prop:"",infin:"",ang:"",and:"",or:"",cap:"",cup:"",int:"",there4:"",sim:"",cong:"",asymp:"",ne:"",equiv:"",le:"",ge:"",sub:"",sup:"",nsub:"",sube:"",supe:"",oplus:"",otimes:"",perp:"",sdot:"",lceil:"",rceil:"",lfloor:"",rfloor:"",lang:"",rang:"",loz:"",spades:"",clubs:"",hearts:"",diams:"",quot:'"',amp:"&",lt:"<",gt:">",OElig:"",oelig:"",Scaron:"",scaron:"",Yuml:"",circ:"",tilde:"",ensp:"",emsp:"",thinsp:"",zwnj:"",zwj:"",lrm:"",rlm:"",ndash:"",mdash:"",lsquo:"",rsquo:"",sbquo:"",ldquo:"",rdquo:"",bdquo:"",dagger:"",Dagger:"",permil:"",lsaquo:"",rsaquo:"",euro:""},VL=["cent","copy","divide","gt","lt","not","para","times"],yE={}.hasOwnProperty,Mg={};let Lu;for(Lu in ym)yE.call(ym,Lu)&&(Mg[ym[Lu]]=Lu);const HL=/[^\dA-Za-z]/;function GL(t,e,n,r){const s=String.fromCharCode(t);if(yE.call(Mg,s)){const a=Mg[s],l="&"+a;return n&&FL.includes(a)&&!VL.includes(a)&&(!r||e&&e!==61&&HL.test(String.fromCharCode(e)))?l:l+";"}return""}function KL(t,e,n){let r=UL(t,e,n.omitOptionalSemicolons),s;if((n.useNamedReferences||n.useShortestReferences)&&(s=GL(t,e,n.omitOptionalSemicolons,n.attribute)),(n.useShortestReferences||!s)&&n.useShortestReferences){const a=qL(t,e,n.omitOptionalSemicolons);a.length<r.length&&(r=a)}return s&&(!n.useShortestReferences||s.length<r.length)?s:r}function Xa(t,e){return LL(t,Object.assign({format:KL},e))}const ZL=/^>|^->|<!--|-->|--!>|<!-$/g,QL=[">"],JL=["<",">"];function YL(t,e,n,r){return r.settings.bogusComments?"<?"+Xa(t.value,Object.assign({},r.settings.characterReferences,{subset:QL}))+">":"<!--"+t.value.replace(ZL,s)+"-->";function s(a){return Xa(a,Object.assign({},r.settings.characterReferences,{subset:JL}))}}function WL(t,e,n,r){return"<!"+(r.settings.upperDoctype?"DOCTYPE":"doctype")+(r.settings.tightDoctype?"":" ")+"html>"}function zf(t,e){const n=String(t);if(typeof e!="string")throw new TypeError("Expected character");let r=0,s=n.indexOf(e);for(;s!==-1;)r++,s=n.indexOf(e,s+e.length);return r}function bE(t,e){const n=e||{};return(t[t.length-1]===""?[...t,""]:t).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}function _E(t){return t.join(" ").trim()}const XL=/[ \t\n\f\r]/g;function hd(t){return typeof t=="object"?t.type==="text"?sw(t.value):!1:sw(t)}function sw(t){return t.replace(XL,"")===""}const en=xE(1),vE=xE(-1),e5=[];function xE(t){return e;function e(n,r,s){const a=n?n.children:e5;let l=(r||0)+t,u=a[l];if(!s)for(;u&&hd(u);)l+=t,u=a[l];return u}}const t5={}.hasOwnProperty;function wE(t){return e;function e(n,r,s){return t5.call(t,n.tagName)&&t[n.tagName](n,r,s)}}const Uy=wE({body:r5,caption:bm,colgroup:bm,dd:o5,dt:a5,head:bm,html:n5,li:i5,optgroup:l5,option:c5,p:s5,rp:iw,rt:iw,tbody:f5,td:aw,tfoot:d5,th:aw,thead:u5,tr:h5});function bm(t,e,n){const r=en(n,e,!0);return!r||r.type!=="comment"&&!(r.type==="text"&&hd(r.value.charAt(0)))}function n5(t,e,n){const r=en(n,e);return!r||r.type!=="comment"}function r5(t,e,n){const r=en(n,e);return!r||r.type!=="comment"}function s5(t,e,n){const r=en(n,e);return r?r.type==="element"&&(r.tagName==="address"||r.tagName==="article"||r.tagName==="aside"||r.tagName==="blockquote"||r.tagName==="details"||r.tagName==="div"||r.tagName==="dl"||r.tagName==="fieldset"||r.tagName==="figcaption"||r.tagName==="figure"||r.tagName==="footer"||r.tagName==="form"||r.tagName==="h1"||r.tagName==="h2"||r.tagName==="h3"||r.tagName==="h4"||r.tagName==="h5"||r.tagName==="h6"||r.tagName==="header"||r.tagName==="hgroup"||r.tagName==="hr"||r.tagName==="main"||r.tagName==="menu"||r.tagName==="nav"||r.tagName==="ol"||r.tagName==="p"||r.tagName==="pre"||r.tagName==="section"||r.tagName==="table"||r.tagName==="ul"):!n||!(n.type==="element"&&(n.tagName==="a"||n.tagName==="audio"||n.tagName==="del"||n.tagName==="ins"||n.tagName==="map"||n.tagName==="noscript"||n.tagName==="video"))}function i5(t,e,n){const r=en(n,e);return!r||r.type==="element"&&r.tagName==="li"}function a5(t,e,n){const r=en(n,e);return!!(r&&r.type==="element"&&(r.tagName==="dt"||r.tagName==="dd"))}function o5(t,e,n){const r=en(n,e);return!r||r.type==="element"&&(r.tagName==="dt"||r.tagName==="dd")}function iw(t,e,n){const r=en(n,e);return!r||r.type==="element"&&(r.tagName==="rp"||r.tagName==="rt")}function l5(t,e,n){const r=en(n,e);return!r||r.type==="element"&&r.tagName==="optgroup"}function c5(t,e,n){const r=en(n,e);return!r||r.type==="element"&&(r.tagName==="option"||r.tagName==="optgroup")}function u5(t,e,n){const r=en(n,e);return!!(r&&r.type==="element"&&(r.tagName==="tbody"||r.tagName==="tfoot"))}function f5(t,e,n){const r=en(n,e);return!r||r.type==="element"&&(r.tagName==="tbody"||r.tagName==="tfoot")}function d5(t,e,n){return!en(n,e)}function h5(t,e,n){const r=en(n,e);return!r||r.type==="element"&&r.tagName==="tr"}function aw(t,e,n){const r=en(n,e);return!r||r.type==="element"&&(r.tagName==="td"||r.tagName==="th")}const p5=wE({body:y5,colgroup:b5,head:g5,html:m5,tbody:_5});function m5(t){const e=en(t,-1);return!e||e.type!=="comment"}function g5(t){const e=new Set;for(const r of t.children)if(r.type==="element"&&(r.tagName==="base"||r.tagName==="title")){if(e.has(r.tagName))return!1;e.add(r.tagName)}const n=t.children[0];return!n||n.type==="element"}function y5(t){const e=en(t,-1,!0);return!e||e.type!=="comment"&&!(e.type==="text"&&hd(e.value.charAt(0)))&&!(e.type==="element"&&(e.tagName==="meta"||e.tagName==="link"||e.tagName==="script"||e.tagName==="style"||e.tagName==="template"))}function b5(t,e,n){const r=vE(n,e),s=en(t,-1,!0);return n&&r&&r.type==="element"&&r.tagName==="colgroup"&&Uy(r,n.children.indexOf(r),n)?!1:!!(s&&s.type==="element"&&s.tagName==="col")}function _5(t,e,n){const r=vE(n,e),s=en(t,-1);return n&&r&&r.type==="element"&&(r.tagName==="thead"||r.tagName==="tbody")&&Uy(r,n.children.indexOf(r),n)?!1:!!(s&&s.type==="element"&&s.tagName==="tr")}const zu={name:[[`	
\f\r &/=>`.split(""),`	
\f\r "&'/=>\``.split("")],[`\0	
\f\r "&'/<=>`.split(""),`\0	
\f\r "&'/<=>\``.split("")]],unquoted:[[`	
\f\r &>`.split(""),`\0	
\f\r "&'<=>\``.split("")],[`\0	
\f\r "&'<=>\``.split(""),`\0	
\f\r "&'<=>\``.split("")]],single:[["&'".split(""),"\"&'`".split("")],["\0&'".split(""),"\0\"&'`".split("")]],double:[['"&'.split(""),"\"&'`".split("")],['\0"&'.split(""),"\0\"&'`".split("")]]};function v5(t,e,n,r){const s=r.schema,a=s.space==="svg"?!1:r.settings.omitOptionalTags;let l=s.space==="svg"?r.settings.closeEmptyElements:r.settings.voids.includes(t.tagName.toLowerCase());const u=[];let f;s.space==="html"&&t.tagName==="svg"&&(r.schema=dc);const d=x5(r,t.properties),m=r.all(s.space==="html"&&t.tagName==="template"?t.content:t);return r.schema=s,m&&(l=!1),(d||!a||!p5(t,e,n))&&(u.push("<",t.tagName,d?" "+d:""),l&&(s.space==="svg"||r.settings.closeSelfClosing)&&(f=d.charAt(d.length-1),(!r.settings.tightSelfClosing||f==="/"||f&&f!=='"'&&f!=="'")&&u.push(" "),u.push("/")),u.push(">")),u.push(m),!l&&(!a||!Uy(t,e,n))&&u.push("</"+t.tagName+">"),u.join("")}function x5(t,e){const n=[];let r=-1,s;if(e){for(s in e)if(e[s]!==null&&e[s]!==void 0){const a=w5(t,s,e[s]);a&&n.push(a)}}for(;++r<n.length;){const a=t.settings.tightAttributes?n[r].charAt(n[r].length-1):void 0;r!==n.length-1&&a!=='"'&&a!=="'"&&(n[r]+=" ")}return n.join("")}function w5(t,e,n){const r=mE(t.schema,e),s=t.settings.allowParseErrors&&t.schema.space==="html"?0:1,a=t.settings.allowDangerousCharacters?0:1;let l=t.quote,u;if(r.overloadedBoolean&&(n===r.attribute||n==="")?n=!0:(r.boolean||r.overloadedBoolean)&&(typeof n!="string"||n===r.attribute||n==="")&&(n=!!n),n==null||n===!1||typeof n=="number"&&Number.isNaN(n))return"";const f=Xa(r.attribute,Object.assign({},t.settings.characterReferences,{subset:zu.name[s][a]}));return n===!0||(n=Array.isArray(n)?(r.commaSeparated?bE:_E)(n,{padLeft:!t.settings.tightCommaSeparatedLists}):String(n),t.settings.collapseEmptyAttributes&&!n)?f:(t.settings.preferUnquoted&&(u=Xa(n,Object.assign({},t.settings.characterReferences,{attribute:!0,subset:zu.unquoted[s][a]}))),u!==n&&(t.settings.quoteSmart&&zf(n,l)>zf(n,t.alternative)&&(l=t.alternative),u=l+Xa(n,Object.assign({},t.settings.characterReferences,{subset:(l==="'"?zu.single:zu.double)[s][a],attribute:!0}))+l),f+(u&&"="+u))}const S5=["<","&"];function SE(t,e,n,r){return n&&n.type==="element"&&(n.tagName==="script"||n.tagName==="style")?t.value:Xa(t.value,Object.assign({},r.settings.characterReferences,{subset:S5}))}function k5(t,e,n,r){return r.settings.allowDangerousHtml?t.value:SE(t,e,n,r)}function E5(t,e,n,r){return r.all(t)}const C5=NL("type",{invalid:T5,unknown:A5,handlers:{comment:YL,doctype:WL,element:v5,raw:k5,root:E5,text:SE}});function T5(t){throw new Error("Expected node, not `"+t+"`")}function A5(t){const e=t;throw new Error("Cannot compile unknown node `"+e.type+"`")}const R5={},O5={},N5=[];function I5(t,e){const n=e||R5,r=n.quote||'"',s=r==='"'?"'":'"';if(r!=='"'&&r!=="'")throw new Error("Invalid quote `"+r+"`, expected `'` or `\"`");return{one:M5,all:D5,settings:{omitOptionalTags:n.omitOptionalTags||!1,allowParseErrors:n.allowParseErrors||!1,allowDangerousCharacters:n.allowDangerousCharacters||!1,quoteSmart:n.quoteSmart||!1,preferUnquoted:n.preferUnquoted||!1,tightAttributes:n.tightAttributes||!1,upperDoctype:n.upperDoctype||!1,tightDoctype:n.tightDoctype||!1,bogusComments:n.bogusComments||!1,tightCommaSeparatedLists:n.tightCommaSeparatedLists||!1,tightSelfClosing:n.tightSelfClosing||!1,collapseEmptyAttributes:n.collapseEmptyAttributes||!1,allowDangerousHtml:n.allowDangerousHtml||!1,voids:n.voids||wL,characterReferences:n.characterReferences||O5,closeSelfClosing:n.closeSelfClosing||!1,closeEmptyElements:n.closeEmptyElements||!1},schema:n.space==="svg"?dc:gE,quote:r,alternative:s}.one(Array.isArray(t)?{type:"root",children:t}:t,void 0,void 0)}function M5(t,e,n){return C5(t,e,n,this)}function D5(t){const e=[],n=t&&t.children||N5;let r=-1;for(;++r<n.length;)e[r]=this.one(n[r],r,t);return e.join("")}function Pf(t,e){const n=typeof t=="string"?{}:{...t.colorReplacements},r=typeof t=="string"?t:t.name;for(const[s,a]of Object.entries(e?.colorReplacements||{}))typeof a=="string"?n[s]=a:s===r&&Object.assign(n,a);return n}function ii(t,e){return t&&(e?.[t?.toLowerCase()]||t)}function j5(t){return Array.isArray(t)?t:[t]}async function kE(t){return Promise.resolve(typeof t=="function"?t():t).then(e=>e.default||e)}function $y(t){return!t||["plaintext","txt","text","plain"].includes(t)}function EE(t){return t==="ansi"||$y(t)}function qy(t){return t==="none"}function CE(t){return qy(t)}function TE(t,e){if(!e)return t;t.properties||={},t.properties.class||=[],typeof t.properties.class=="string"&&(t.properties.class=t.properties.class.split(/\s+/g)),Array.isArray(t.properties.class)||(t.properties.class=[]);const n=Array.isArray(e)?e:e.split(/\s+/g);for(const r of n)r&&!t.properties.class.includes(r)&&t.properties.class.push(r);return t}function pd(t,e=!1){if(t.length===0)return[["",0]];const n=t.split(/(\r?\n)/g);let r=0;const s=[];for(let a=0;a<n.length;a+=2){const l=e?n[a]+(n[a+1]||""):n[a];s.push([l,r]),r+=n[a].length,r+=n[a+1]?.length||0}return s}function L5(t){const e=pd(t,!0).map(([s])=>s);function n(s){if(s===t.length)return{line:e.length-1,character:e[e.length-1].length};let a=s,l=0;for(const u of e){if(a<u.length)break;a-=u.length,l++}return{line:l,character:a}}function r(s,a){let l=0;for(let u=0;u<s;u++)l+=e[u].length;return l+=a,l}return{lines:e,indexToPos:n,posToIndex:r}}function z5(t,e,n){const r=new Set;for(const a of t.matchAll(/:?lang=["']([^"']+)["']/g)){const l=a[1].toLowerCase().trim();l&&r.add(l)}for(const a of t.matchAll(/(?:```|~~~)([\w-]+)/g)){const l=a[1].toLowerCase().trim();l&&r.add(l)}for(const a of t.matchAll(/\\begin\{([\w-]+)\}/g)){const l=a[1].toLowerCase().trim();l&&r.add(l)}for(const a of t.matchAll(/<script\s+(?:type|lang)=["']([^"']+)["']/gi)){const l=a[1].toLowerCase().trim(),u=l.includes("/")?l.split("/").pop():l;u&&r.add(u)}if(!n)return Array.from(r);const s=n.getBundledLanguages();return Array.from(r).filter(a=>a&&s[a])}const Fy="light-dark()",P5=["color","background-color"];function B5(t,e){let n=0;const r=[];for(const s of e)s>n&&r.push({...t,content:t.content.slice(n,s),offset:t.offset+n}),n=s;return n<t.content.length&&r.push({...t,content:t.content.slice(n),offset:t.offset+n}),r}function U5(t,e){const n=Array.from(e instanceof Set?e:new Set(e)).sort((r,s)=>r-s);return n.length?t.map(r=>r.flatMap(s=>{const a=n.filter(l=>s.offset<l&&l<s.offset+s.content.length).map(l=>l-s.offset).sort((l,u)=>l-u);return a.length?B5(s,a):s})):t}function $5(t,e,n,r,s="css-vars"){const a={content:t.content,explanation:t.explanation,offset:t.offset},l=e.map(m=>Bf(t.variants[m])),u=new Set(l.flatMap(m=>Object.keys(m))),f={},d=(m,p)=>{const y=p==="color"?"":p==="background-color"?"-bg":`-${p}`;return n+e[m]+(p==="color"?"":y)};return l.forEach((m,p)=>{for(const y of u){const g=m[y]||"inherit";if(p===0&&r&&P5.includes(y))if(r===Fy&&l.length>1){const v=e.findIndex(C=>C==="light"),w=e.findIndex(C=>C==="dark");if(v===-1||w===-1)throw new Ht('When using `defaultColor: "light-dark()"`, you must provide both `light` and `dark` themes');const E=l[v][y]||"inherit",S=l[w][y]||"inherit";f[y]=`light-dark(${E}, ${S})`,s==="css-vars"&&(f[d(p,y)]=g)}else f[y]=g;else s==="css-vars"&&(f[d(p,y)]=g)}}),a.htmlStyle=f,a}function Bf(t){const e={};if(t.color&&(e.color=t.color),t.bgColor&&(e["background-color"]=t.bgColor),t.fontStyle){t.fontStyle&An.Italic&&(e["font-style"]="italic"),t.fontStyle&An.Bold&&(e["font-weight"]="bold");const n=[];t.fontStyle&An.Underline&&n.push("underline"),t.fontStyle&An.Strikethrough&&n.push("line-through"),n.length&&(e["text-decoration"]=n.join(" "))}return e}function Dg(t){return typeof t=="string"?t:Object.entries(t).map(([e,n])=>`${e}:${n}`).join(";")}const AE=new WeakMap;function md(t,e){AE.set(t,e)}function ec(t){return AE.get(t)}class ho{_stacks={};lang;get themes(){return Object.keys(this._stacks)}get theme(){return this.themes[0]}get _stack(){return this._stacks[this.theme]}static initial(e,n){return new ho(Object.fromEntries(j5(n).map(r=>[r,Rg])),e)}constructor(...e){if(e.length===2){const[n,r]=e;this.lang=r,this._stacks=n}else{const[n,r,s]=e;this.lang=r,this._stacks={[s]:n}}}getInternalStack(e=this.theme){return this._stacks[e]}getScopes(e=this.theme){return q5(this._stacks[e])}toJSON(){return{lang:this.lang,theme:this.theme,themes:this.themes,scopes:this.getScopes()}}}function q5(t){const e=[],n=new Set;function r(s){if(n.has(s))return;n.add(s);const a=s?.nameScopesList?.scopeName;a&&e.push(a),s.parent&&r(s.parent)}return r(t),e}function F5(t,e){if(!(t instanceof ho))throw new Ht("Invalid grammar state");return t.getInternalStack(e)}function V5(){const t=new WeakMap;function e(n){if(!t.has(n.meta)){let r=function(l){if(typeof l=="number"){if(l<0||l>n.source.length)throw new Ht(`Invalid decoration offset: ${l}. Code length: ${n.source.length}`);return{...s.indexToPos(l),offset:l}}else{const u=s.lines[l.line];if(u===void 0)throw new Ht(`Invalid decoration position ${JSON.stringify(l)}. Lines length: ${s.lines.length}`);let f=l.character;if(f<0&&(f=u.length+f),f<0||f>u.length)throw new Ht(`Invalid decoration position ${JSON.stringify(l)}. Line ${l.line} length: ${u.length}`);return{...l,character:f,offset:s.posToIndex(l.line,f)}}};const s=L5(n.source),a=(n.options.decorations||[]).map(l=>({...l,start:r(l.start),end:r(l.end)}));H5(a),t.set(n.meta,{decorations:a,converter:s,source:n.source})}return t.get(n.meta)}return{name:"shiki:decorations",tokens(n){if(!this.options.decorations?.length)return;const s=e(this).decorations.flatMap(l=>[l.start.offset,l.end.offset]);return U5(n,s)},code(n){if(!this.options.decorations?.length)return;const r=e(this),s=Array.from(n.children).filter(m=>m.type==="element"&&m.tagName==="span");if(s.length!==r.converter.lines.length)throw new Ht(`Number of lines in code element (${s.length}) does not match the number of lines in the source (${r.converter.lines.length}). Failed to apply decorations.`);function a(m,p,y,g){const v=s[m];let w="",E=-1,S=-1;if(p===0&&(E=0),y===0&&(S=0),y===Number.POSITIVE_INFINITY&&(S=v.children.length),E===-1||S===-1)for(let T=0;T<v.children.length;T++)w+=RE(v.children[T]),E===-1&&w.length===p&&(E=T+1),S===-1&&w.length===y&&(S=T+1);if(E===-1)throw new Ht(`Failed to find start index for decoration ${JSON.stringify(g.start)}`);if(S===-1)throw new Ht(`Failed to find end index for decoration ${JSON.stringify(g.end)}`);const C=v.children.slice(E,S);if(!g.alwaysWrap&&C.length===v.children.length)u(v,g,"line");else if(!g.alwaysWrap&&C.length===1&&C[0].type==="element")u(C[0],g,"token");else{const T={type:"element",tagName:"span",properties:{},children:C};u(T,g,"wrapper"),v.children.splice(E,C.length,T)}}function l(m,p){s[m]=u(s[m],p,"line")}function u(m,p,y){const g=p.properties||{},v=p.transform||(w=>w);return m.tagName=p.tagName||"span",m.properties={...m.properties,...g,class:m.properties.class},p.properties?.class&&TE(m,p.properties.class),m=v(m,y)||m,m}const f=[],d=r.decorations.sort((m,p)=>p.start.offset-m.start.offset||m.end.offset-p.end.offset);for(const m of d){const{start:p,end:y}=m;if(p.line===y.line)a(p.line,p.character,y.character,m);else if(p.line<y.line){a(p.line,p.character,Number.POSITIVE_INFINITY,m);for(let g=p.line+1;g<y.line;g++)f.unshift(()=>l(g,m));a(y.line,0,y.character,m)}}f.forEach(m=>m())}}}function H5(t){for(let e=0;e<t.length;e++){const n=t[e];if(n.start.offset>n.end.offset)throw new Ht(`Invalid decoration range: ${JSON.stringify(n.start)} - ${JSON.stringify(n.end)}`);for(let r=e+1;r<t.length;r++){const s=t[r],a=n.start.offset<=s.start.offset&&s.start.offset<n.end.offset,l=n.start.offset<s.end.offset&&s.end.offset<=n.end.offset,u=s.start.offset<=n.start.offset&&n.start.offset<s.end.offset,f=s.start.offset<n.end.offset&&n.end.offset<=s.end.offset;if(a||l||u||f){if(a&&l||u&&f||u&&n.start.offset===n.end.offset||l&&s.start.offset===s.end.offset)continue;throw new Ht(`Decorations ${JSON.stringify(n.start)} and ${JSON.stringify(s.start)} intersect.`)}}}}function RE(t){return t.type==="text"?t.value:t.type==="element"?t.children.map(RE).join(""):""}const G5=[V5()];function Uf(t){const e=K5(t.transformers||[]);return[...e.pre,...e.normal,...e.post,...G5]}function K5(t){const e=[],n=[],r=[];for(const s of t)switch(s.enforce){case"pre":e.push(s);break;case"post":n.push(s);break;default:r.push(s)}return{pre:e,post:n,normal:r}}var Pi=["black","red","green","yellow","blue","magenta","cyan","white","brightBlack","brightRed","brightGreen","brightYellow","brightBlue","brightMagenta","brightCyan","brightWhite"],_m={1:"bold",2:"dim",3:"italic",4:"underline",7:"reverse",8:"hidden",9:"strikethrough"};function Z5(t,e){const n=t.indexOf("\x1B",e);if(n!==-1&&t[n+1]==="["){const r=t.indexOf("m",n);if(r!==-1)return{sequence:t.substring(n+2,r).split(";"),startPosition:n,position:r+1}}return{position:t.length}}function ow(t){const e=t.shift();if(e==="2"){const n=t.splice(0,3).map(r=>Number.parseInt(r));return n.length!==3||n.some(r=>Number.isNaN(r))?void 0:{type:"rgb",rgb:n}}else if(e==="5"){const n=t.shift();if(n)return{type:"table",index:Number(n)}}}function Q5(t){const e=[];for(;t.length>0;){const n=t.shift();if(!n)continue;const r=Number.parseInt(n);if(!Number.isNaN(r))if(r===0)e.push({type:"resetAll"});else if(r<=9)_m[r]&&e.push({type:"setDecoration",value:_m[r]});else if(r<=29){const s=_m[r-20];s&&(e.push({type:"resetDecoration",value:s}),s==="dim"&&e.push({type:"resetDecoration",value:"bold"}))}else if(r<=37)e.push({type:"setForegroundColor",value:{type:"named",name:Pi[r-30]}});else if(r===38){const s=ow(t);s&&e.push({type:"setForegroundColor",value:s})}else if(r===39)e.push({type:"resetForegroundColor"});else if(r<=47)e.push({type:"setBackgroundColor",value:{type:"named",name:Pi[r-40]}});else if(r===48){const s=ow(t);s&&e.push({type:"setBackgroundColor",value:s})}else r===49?e.push({type:"resetBackgroundColor"}):r===53?e.push({type:"setDecoration",value:"overline"}):r===55?e.push({type:"resetDecoration",value:"overline"}):r>=90&&r<=97?e.push({type:"setForegroundColor",value:{type:"named",name:Pi[r-90+8]}}):r>=100&&r<=107&&e.push({type:"setBackgroundColor",value:{type:"named",name:Pi[r-100+8]}})}return e}function J5(){let t=null,e=null,n=new Set;return{parse(r){const s=[];let a=0;do{const l=Z5(r,a),u=l.sequence?r.substring(a,l.startPosition):r.substring(a);if(u.length>0&&s.push({value:u,foreground:t,background:e,decorations:new Set(n)}),l.sequence){const f=Q5(l.sequence);for(const d of f)d.type==="resetAll"?(t=null,e=null,n.clear()):d.type==="resetForegroundColor"?t=null:d.type==="resetBackgroundColor"?e=null:d.type==="resetDecoration"&&n.delete(d.value);for(const d of f)d.type==="setForegroundColor"?t=d.value:d.type==="setBackgroundColor"?e=d.value:d.type==="setDecoration"&&n.add(d.value)}a=l.position}while(a<r.length);return s}}}var Y5={black:"#000000",red:"#bb0000",green:"#00bb00",yellow:"#bbbb00",blue:"#0000bb",magenta:"#ff00ff",cyan:"#00bbbb",white:"#eeeeee",brightBlack:"#555555",brightRed:"#ff5555",brightGreen:"#00ff00",brightYellow:"#ffff55",brightBlue:"#5555ff",brightMagenta:"#ff55ff",brightCyan:"#55ffff",brightWhite:"#ffffff"};function W5(t=Y5){function e(u){return t[u]}function n(u){return`#${u.map(f=>Math.max(0,Math.min(f,255)).toString(16).padStart(2,"0")).join("")}`}let r;function s(){if(r)return r;r=[];for(let d=0;d<Pi.length;d++)r.push(e(Pi[d]));let u=[0,95,135,175,215,255];for(let d=0;d<6;d++)for(let m=0;m<6;m++)for(let p=0;p<6;p++)r.push(n([u[d],u[m],u[p]]));let f=8;for(let d=0;d<24;d++,f+=10)r.push(n([f,f,f]));return r}function a(u){return s()[u]}function l(u){switch(u.type){case"named":return e(u.name);case"rgb":return n(u.rgb);case"table":return a(u.index)}}return{value:l}}const X5={black:"#000000",red:"#cd3131",green:"#0DBC79",yellow:"#E5E510",blue:"#2472C8",magenta:"#BC3FBC",cyan:"#11A8CD",white:"#E5E5E5",brightBlack:"#666666",brightRed:"#F14C4C",brightGreen:"#23D18B",brightYellow:"#F5F543",brightBlue:"#3B8EEA",brightMagenta:"#D670D6",brightCyan:"#29B8DB",brightWhite:"#FFFFFF"};function ez(t,e,n){const r=Pf(t,n),s=pd(e),a=Object.fromEntries(Pi.map(f=>{const d=`terminal.ansi${f[0].toUpperCase()}${f.substring(1)}`,m=t.colors?.[d];return[f,m||X5[f]]})),l=W5(a),u=J5();return s.map(f=>u.parse(f[0]).map(d=>{let m,p;d.decorations.has("reverse")?(m=d.background?l.value(d.background):t.bg,p=d.foreground?l.value(d.foreground):t.fg):(m=d.foreground?l.value(d.foreground):t.fg,p=d.background?l.value(d.background):void 0),m=ii(m,r),p=ii(p,r),d.decorations.has("dim")&&(m=tz(m));let y=An.None;return d.decorations.has("bold")&&(y|=An.Bold),d.decorations.has("italic")&&(y|=An.Italic),d.decorations.has("underline")&&(y|=An.Underline),d.decorations.has("strikethrough")&&(y|=An.Strikethrough),{content:d.value,offset:f[1],color:m,bgColor:p,fontStyle:y}}))}function tz(t){const e=t.match(/#([0-9a-f]{3,8})/i);if(e){const r=e[1];if(r.length===8){const s=Math.round(Number.parseInt(r.slice(6,8),16)/2).toString(16).padStart(2,"0");return`#${r.slice(0,6)}${s}`}else{if(r.length===6)return`#${r}80`;if(r.length===4){const s=r[0],a=r[1],l=r[2],u=r[3],f=Math.round(Number.parseInt(`${u}${u}`,16)/2).toString(16).padStart(2,"0");return`#${s}${s}${a}${a}${l}${l}${f}`}else if(r.length===3){const s=r[0],a=r[1],l=r[2];return`#${s}${s}${a}${a}${l}${l}80`}}}const n=t.match(/var\((--[\w-]+-ansi-[\w-]+)\)/);return n?`var(${n[1]}-dim)`:t}function Vy(t,e,n={}){const{theme:r=t.getLoadedThemes()[0]}=n,s=t.resolveLangAlias(n.lang||"text");if($y(s)||qy(r))return pd(e).map(f=>[{content:f[0],offset:f[1]}]);const{theme:a,colorMap:l}=t.setTheme(r);if(s==="ansi")return ez(a,e,n);const u=t.getLanguage(n.lang||"text");if(n.grammarState){if(n.grammarState.lang!==u.name)throw new Ht(`Grammar state language "${n.grammarState.lang}" does not match highlight language "${u.name}"`);if(!n.grammarState.themes.includes(a.name))throw new Ht(`Grammar state themes "${n.grammarState.themes}" do not contain highlight theme "${a.name}"`)}return rz(e,u,a,l,n)}function nz(...t){if(t.length===2)return ec(t[1]);const[e,n,r={}]=t,{lang:s="text",theme:a=e.getLoadedThemes()[0]}=r;if($y(s)||qy(a))throw new Ht("Plain language does not have grammar state");if(s==="ansi")throw new Ht("ANSI language does not have grammar state");const{theme:l,colorMap:u}=e.setTheme(a),f=e.getLanguage(s);return new ho(Hy(n,f,l,u,r).stateStack,f.name,l.name)}function rz(t,e,n,r,s){const a=Hy(t,e,n,r,s),l=new ho(a.stateStack,e.name,n.name);return md(a.tokens,l),a.tokens}function Hy(t,e,n,r,s){const a=Pf(n,s),{tokenizeMaxLineLength:l=0,tokenizeTimeLimit:u=500}=s,f=pd(t);let d=s.grammarState?F5(s.grammarState,n.name)??Rg:s.grammarContextCode!=null?Hy(s.grammarContextCode,e,n,r,{...s,grammarState:void 0,grammarContextCode:void 0}).stateStack:Rg,m=[];const p=[];for(let y=0,g=f.length;y<g;y++){const[v,w]=f[y];if(v===""){m=[],p.push([]);continue}if(l>0&&v.length>=l){m=[],p.push([{content:v,offset:w,color:"",fontStyle:0}]);continue}let E,S,C;s.includeExplanation&&(E=e.tokenizeLine(v,d,u),S=E.tokens,C=0);const T=e.tokenizeLine2(v,d,u),M=T.tokens.length/2;for(let I=0;I<M;I++){const R=T.tokens[2*I],U=I+1<M?T.tokens[2*I+2]:v.length;if(R===U)continue;const q=T.tokens[2*I+1],K=ii(r[io.getForeground(q)],a),j=io.getFontStyle(q),J={content:v.substring(R,U),offset:w+R,color:K,fontStyle:j};if(s.includeExplanation){const ne=[];if(s.includeExplanation!=="scopeName")for(const X of n.settings){let F;switch(typeof X.scope){case"string":F=X.scope.split(/,/).map(B=>B.trim());break;case"object":F=X.scope;break;default:continue}ne.push({settings:X,selectors:F.map(B=>B.split(/ /))})}J.explanation=[];let me=0;for(;R+me<U;){const X=S[C],F=v.substring(X.startIndex,X.endIndex);me+=F.length,J.explanation.push({content:F,scopes:s.includeExplanation==="scopeName"?sz(X.scopes):iz(ne,X.scopes)}),C+=1}}m.push(J)}p.push(m),m=[],d=T.ruleStack}return{tokens:p,stateStack:d}}function sz(t){return t.map(e=>({scopeName:e}))}function iz(t,e){const n=[];for(let r=0,s=e.length;r<s;r++){const a=e[r];n[r]={scopeName:a,themeMatches:oz(t,a,e.slice(0,r))}}return n}function lw(t,e){return t===e||e.substring(0,t.length)===t&&e[t.length]==="."}function az(t,e,n){if(!lw(t[t.length-1],e))return!1;let r=t.length-2,s=n.length-1;for(;r>=0&&s>=0;)lw(t[r],n[s])&&(r-=1),s-=1;return r===-1}function oz(t,e,n){const r=[];for(const{selectors:s,settings:a}of t)for(const l of s)if(az(l,e,n)){r.push(a);break}return r}function OE(t,e,n){const r=Object.entries(n.themes).filter(f=>f[1]).map(f=>({color:f[0],theme:f[1]})),s=r.map(f=>{const d=Vy(t,e,{...n,theme:f.theme}),m=ec(d),p=typeof f.theme=="string"?f.theme:f.theme.name;return{tokens:d,state:m,theme:p}}),a=lz(...s.map(f=>f.tokens)),l=a[0].map((f,d)=>f.map((m,p)=>{const y={content:m.content,variants:{},offset:m.offset};return"includeExplanation"in n&&n.includeExplanation&&(y.explanation=m.explanation),a.forEach((g,v)=>{const{content:w,explanation:E,offset:S,...C}=g[d][p];y.variants[r[v].color]=C}),y})),u=s[0].state?new ho(Object.fromEntries(s.map(f=>[f.theme,f.state?.getInternalStack(f.theme)])),s[0].state.lang):void 0;return u&&md(l,u),l}function lz(...t){const e=t.map(()=>[]),n=t.length;for(let r=0;r<t[0].length;r++){const s=t.map(f=>f[r]),a=e.map(()=>[]);e.forEach((f,d)=>f.push(a[d]));const l=s.map(()=>0),u=s.map(f=>f[0]);for(;u.every(f=>f);){const f=Math.min(...u.map(d=>d.content.length));for(let d=0;d<n;d++){const m=u[d];m.content.length===f?(a[d].push(m),l[d]+=1,u[d]=s[d][l[d]]):(a[d].push({...m,content:m.content.slice(0,f)}),u[d]={...m,content:m.content.slice(f),offset:m.offset+f})}}}return e}function $f(t,e,n){let r,s,a,l,u,f;if("themes"in n){const{defaultColor:d="light",cssVariablePrefix:m="--shiki-",colorsRendering:p="css-vars"}=n,y=Object.entries(n.themes).filter(S=>S[1]).map(S=>({color:S[0],theme:S[1]})).sort((S,C)=>S.color===d?-1:C.color===d?1:0);if(y.length===0)throw new Ht("`themes` option must not be empty");const g=OE(t,e,n);if(f=ec(g),d&&Fy!==d&&!y.find(S=>S.color===d))throw new Ht(`\`themes\` option must contain the defaultColor key \`${d}\``);const v=y.map(S=>t.getTheme(S.theme)),w=y.map(S=>S.color);a=g.map(S=>S.map(C=>$5(C,w,m,d,p))),f&&md(a,f);const E=y.map(S=>Pf(S.theme,n));s=cw(y,v,E,m,d,"fg",p),r=cw(y,v,E,m,d,"bg",p),l=`shiki-themes ${v.map(S=>S.name).join(" ")}`,u=d?void 0:[s,r].join(";")}else if("theme"in n){const d=Pf(n.theme,n);a=Vy(t,e,n);const m=t.getTheme(n.theme);r=ii(m.bg,d),s=ii(m.fg,d),l=m.name,f=ec(a)}else throw new Ht("Invalid options, either `theme` or `themes` must be provided");return{tokens:a,fg:s,bg:r,themeName:l,rootStyle:u,grammarState:f}}function cw(t,e,n,r,s,a,l){return t.map((u,f)=>{const d=ii(e[f][a],n[f])||"inherit",m=`${r+u.color}${a==="bg"?"-bg":""}:${d}`;if(f===0&&s){if(s===Fy&&t.length>1){const p=t.findIndex(w=>w.color==="light"),y=t.findIndex(w=>w.color==="dark");if(p===-1||y===-1)throw new Ht('When using `defaultColor: "light-dark()"`, you must provide both `light` and `dark` themes');const g=ii(e[p][a],n[p])||"inherit",v=ii(e[y][a],n[y])||"inherit";return`light-dark(${g}, ${v});${m}`}return d}return l==="css-vars"?m:null}).filter(u=>!!u).join(";")}function qf(t,e,n,r={meta:{},options:n,codeToHast:(s,a)=>qf(t,s,a),codeToTokens:(s,a)=>$f(t,s,a)}){let s=e;for(const v of Uf(n))s=v.preprocess?.call(r,s,n)||s;let{tokens:a,fg:l,bg:u,themeName:f,rootStyle:d,grammarState:m}=$f(t,s,n);const{mergeWhitespaces:p=!0,mergeSameStyleTokens:y=!1}=n;p===!0?a=uz(a):p==="never"&&(a=fz(a)),y&&(a=dz(a));const g={...r,get source(){return s}};for(const v of Uf(n))a=v.tokens?.call(g,a)||a;return cz(a,{...n,fg:l,bg:u,themeName:f,rootStyle:n.rootStyle===!1?!1:n.rootStyle??d},g,m)}function cz(t,e,n,r=ec(t)){const s=Uf(e),a=[],l={type:"root",children:[]},{structure:u="classic",tabindex:f="0"}=e,d={class:`shiki ${e.themeName||""}`};e.rootStyle!==!1&&(e.rootStyle!=null?d.style=e.rootStyle:d.style=`background-color:${e.bg};color:${e.fg}`),f!==!1&&f!=null&&(d.tabindex=f.toString());for(const[w,E]of Object.entries(e.meta||{}))w.startsWith("_")||(d[w]=E);let m={type:"element",tagName:"pre",properties:d,children:[]},p={type:"element",tagName:"code",properties:{},children:a};const y=[],g={...n,structure:u,addClassToHast:TE,get source(){return n.source},get tokens(){return t},get options(){return e},get root(){return l},get pre(){return m},get code(){return p},get lines(){return y}};if(t.forEach((w,E)=>{E&&(u==="inline"?l.children.push({type:"element",tagName:"br",properties:{},children:[]}):u==="classic"&&a.push({type:"text",value:`
`}));let S={type:"element",tagName:"span",properties:{class:"line"},children:[]},C=0;for(const T of w){let M={type:"element",tagName:"span",properties:{...T.htmlAttrs},children:[{type:"text",value:T.content}]};const I=Dg(T.htmlStyle||Bf(T));I&&(M.properties.style=I);for(const R of s)M=R?.span?.call(g,M,E+1,C,S,T)||M;u==="inline"?l.children.push(M):u==="classic"&&S.children.push(M),C+=T.content.length}if(u==="classic"){for(const T of s)S=T?.line?.call(g,S,E+1)||S;y.push(S),a.push(S)}else u==="inline"&&y.push(S)}),u==="classic"){for(const w of s)p=w?.code?.call(g,p)||p;m.children.push(p);for(const w of s)m=w?.pre?.call(g,m)||m;l.children.push(m)}else if(u==="inline"){const w=[];let E={type:"element",tagName:"span",properties:{class:"line"},children:[]};for(const T of l.children)T.type==="element"&&T.tagName==="br"?(w.push(E),E={type:"element",tagName:"span",properties:{class:"line"},children:[]}):(T.type==="element"||T.type==="text")&&E.children.push(T);w.push(E);let C={type:"element",tagName:"code",properties:{},children:w};for(const T of s)C=T?.code?.call(g,C)||C;l.children=[];for(let T=0;T<C.children.length;T++){T>0&&l.children.push({type:"element",tagName:"br",properties:{},children:[]});const M=C.children[T];M.type==="element"&&l.children.push(...M.children)}}let v=l;for(const w of s)v=w?.root?.call(g,v)||v;return r&&md(v,r),v}function uz(t){return t.map(e=>{const n=[];let r="",s;return e.forEach((a,l)=>{const f=!(a.fontStyle&&(a.fontStyle&An.Underline||a.fontStyle&An.Strikethrough));f&&a.content.match(/^\s+$/)&&e[l+1]?(s===void 0&&(s=a.offset),r+=a.content):r?(f?n.push({...a,offset:s,content:r+a.content}):n.push({content:r,offset:s},a),s=void 0,r=""):n.push(a)}),n})}function fz(t){return t.map(e=>e.flatMap(n=>{if(n.content.match(/^\s+$/))return n;const r=n.content.match(/^(\s*)(.*?)(\s*)$/);if(!r)return n;const[,s,a,l]=r;if(!s&&!l)return n;const u=[{...n,offset:n.offset+s.length,content:a}];return s&&u.unshift({content:s,offset:n.offset}),l&&u.push({content:l,offset:n.offset+s.length+a.length}),u}))}function dz(t){return t.map(e=>{const n=[];for(const r of e){if(n.length===0){n.push({...r});continue}const s=n[n.length-1],a=Dg(s.htmlStyle||Bf(s)),l=Dg(r.htmlStyle||Bf(r)),u=s.fontStyle&&(s.fontStyle&An.Underline||s.fontStyle&An.Strikethrough),f=r.fontStyle&&(r.fontStyle&An.Underline||r.fontStyle&An.Strikethrough);!u&&!f&&a===l?s.content+=r.content:n.push({...r})}return n})}const hz=I5;function pz(t,e,n){const r={meta:{},options:n,codeToHast:(a,l)=>qf(t,a,l),codeToTokens:(a,l)=>$f(t,a,l)};let s=hz(qf(t,e,n,r));for(const a of Uf(n))s=a.postprocess?.call(r,s,n)||s;return s}const uw={light:"#333333",dark:"#bbbbbb"},fw={light:"#fffffe",dark:"#1e1e1e"},dw="__shiki_resolved";function Gy(t){if(t?.[dw])return t;const e={...t};e.tokenColors&&!e.settings&&(e.settings=e.tokenColors,delete e.tokenColors),e.type||="dark",e.colorReplacements={...e.colorReplacements},e.settings||=[];let{bg:n,fg:r}=e;if(!n||!r){const u=e.settings?e.settings.find(f=>!f.name&&!f.scope):void 0;u?.settings?.foreground&&(r=u.settings.foreground),u?.settings?.background&&(n=u.settings.background),!r&&e?.colors?.["editor.foreground"]&&(r=e.colors["editor.foreground"]),!n&&e?.colors?.["editor.background"]&&(n=e.colors["editor.background"]),r||(r=e.type==="light"?uw.light:uw.dark),n||(n=e.type==="light"?fw.light:fw.dark),e.fg=r,e.bg=n}e.settings[0]&&e.settings[0].settings&&!e.settings[0].scope||e.settings.unshift({settings:{foreground:e.fg,background:e.bg}});let s=0;const a=new Map;function l(u){if(a.has(u))return a.get(u);s+=1;const f=`#${s.toString(16).padStart(8,"0").toLowerCase()}`;return e.colorReplacements?.[`#${f}`]?l(u):(a.set(u,f),f)}e.settings=e.settings.map(u=>{const f=u.settings?.foreground&&!u.settings.foreground.startsWith("#"),d=u.settings?.background&&!u.settings.background.startsWith("#");if(!f&&!d)return u;const m={...u,settings:{...u.settings}};if(f){const p=l(u.settings.foreground);e.colorReplacements[p]=u.settings.foreground,m.settings.foreground=p}if(d){const p=l(u.settings.background);e.colorReplacements[p]=u.settings.background,m.settings.background=p}return m});for(const u of Object.keys(e.colors||{}))if((u==="editor.foreground"||u==="editor.background"||u.startsWith("terminal.ansi"))&&!e.colors[u]?.startsWith("#")){const f=l(e.colors[u]);e.colorReplacements[f]=e.colors[u],e.colors[u]=f}return Object.defineProperty(e,dw,{enumerable:!1,writable:!1,value:!0}),e}async function NE(t){return Array.from(new Set((await Promise.all(t.filter(e=>!EE(e)).map(async e=>await kE(e).then(n=>Array.isArray(n)?n:[n])))).flat()))}async function IE(t){return(await Promise.all(t.map(async n=>CE(n)?null:Gy(await kE(n))))).filter(n=>!!n)}let mz=3;function gz(t,e=3){e>mz||console.trace(`[SHIKI DEPRECATE]: ${t}`)}let Za=class extends Error{constructor(e){super(e),this.name="ShikiError"}};function ME(t,e){if(!e)return t;if(e[t]){const n=new Set([t]);for(;e[t];){if(t=e[t],n.has(t))throw new Za(`Circular alias \`${Array.from(n).join(" -> ")} -> ${t}\``);n.add(t)}}return t}class yz extends xL{constructor(e,n,r,s={}){super(e),this._resolver=e,this._themes=n,this._langs=r,this._alias=s,this._themes.map(a=>this.loadTheme(a)),this.loadLanguages(this._langs)}_resolvedThemes=new Map;_resolvedGrammars=new Map;_langMap=new Map;_langGraph=new Map;_textmateThemeCache=new WeakMap;_loadedThemesCache=null;_loadedLanguagesCache=null;getTheme(e){return typeof e=="string"?this._resolvedThemes.get(e):this.loadTheme(e)}loadTheme(e){const n=Gy(e);return n.name&&(this._resolvedThemes.set(n.name,n),this._loadedThemesCache=null),n}getLoadedThemes(){return this._loadedThemesCache||(this._loadedThemesCache=[...this._resolvedThemes.keys()]),this._loadedThemesCache}setTheme(e){let n=this._textmateThemeCache.get(e);n||(n=If.createFromRawTheme(e),this._textmateThemeCache.set(e,n)),this._syncRegistry.setTheme(n)}getGrammar(e){return e=ME(e,this._alias),this._resolvedGrammars.get(e)}loadLanguage(e){if(this.getGrammar(e.name))return;const n=new Set([...this._langMap.values()].filter(a=>a.embeddedLangsLazy?.includes(e.name)));this._resolver.addLanguage(e);const r={balancedBracketSelectors:e.balancedBracketSelectors||["*"],unbalancedBracketSelectors:e.unbalancedBracketSelectors||[]};this._syncRegistry._rawGrammars.set(e.scopeName,e);const s=this.loadGrammarWithConfiguration(e.scopeName,1,r);if(s.name=e.name,this._resolvedGrammars.set(e.name,s),e.aliases&&e.aliases.forEach(a=>{this._alias[a]=e.name}),this._loadedLanguagesCache=null,n.size)for(const a of n)this._resolvedGrammars.delete(a.name),this._loadedLanguagesCache=null,this._syncRegistry?._injectionGrammars?.delete(a.scopeName),this._syncRegistry?._grammars?.delete(a.scopeName),this.loadLanguage(this._langMap.get(a.name))}dispose(){super.dispose(),this._resolvedThemes.clear(),this._resolvedGrammars.clear(),this._langMap.clear(),this._langGraph.clear(),this._loadedThemesCache=null}loadLanguages(e){for(const s of e)this.resolveEmbeddedLanguages(s);const n=Array.from(this._langGraph.entries()),r=n.filter(([s,a])=>!a);if(r.length){const s=n.filter(([a,l])=>l?(l.embeddedLanguages||l.embeddedLangs)?.some(f=>r.map(([d])=>d).includes(f)):!1).filter(a=>!r.includes(a));throw new Za(`Missing languages ${r.map(([a])=>`\`${a}\``).join(", ")}, required by ${s.map(([a])=>`\`${a}\``).join(", ")}`)}for(const[s,a]of n)this._resolver.addLanguage(a);for(const[s,a]of n)this.loadLanguage(a)}getLoadedLanguages(){return this._loadedLanguagesCache||(this._loadedLanguagesCache=[...new Set([...this._resolvedGrammars.keys(),...Object.keys(this._alias)])]),this._loadedLanguagesCache}resolveEmbeddedLanguages(e){this._langMap.set(e.name,e),this._langGraph.set(e.name,e);const n=e.embeddedLanguages??e.embeddedLangs;if(n)for(const r of n)this._langGraph.set(r,this._langMap.get(r))}}class bz{_langs=new Map;_scopeToLang=new Map;_injections=new Map;_onigLib;constructor(e,n){this._onigLib={createOnigScanner:r=>e.createScanner(r),createOnigString:r=>e.createString(r)},n.forEach(r=>this.addLanguage(r))}get onigLib(){return this._onigLib}getLangRegistration(e){return this._langs.get(e)}loadGrammar(e){return this._scopeToLang.get(e)}addLanguage(e){this._langs.set(e.name,e),e.aliases&&e.aliases.forEach(n=>{this._langs.set(n,e)}),this._scopeToLang.set(e.scopeName,e),e.injectTo&&e.injectTo.forEach(n=>{this._injections.get(n)||this._injections.set(n,[]),this._injections.get(n).push(e.scopeName)})}getInjections(e){const n=e.split(".");let r=[];for(let s=1;s<=n.length;s++){const a=n.slice(0,s).join(".");r=[...r,...this._injections.get(a)||[]]}return r}}let dl=0;function _z(t){dl+=1,t.warnings!==!1&&dl>=10&&dl%10===0&&console.warn(`[Shiki] ${dl} instances have been created. Shiki is supposed to be used as a singleton, consider refactoring your code to cache your highlighter instance; Or call \`highlighter.dispose()\` to release unused instances.`);let e=!1;if(!t.engine)throw new Za("`engine` option is required for synchronous mode");const n=(t.langs||[]).flat(1),r=(t.themes||[]).flat(1).map(Gy),s=new bz(t.engine,n),a=new yz(s,r,n,t.langAlias);let l;function u(T){return ME(T,t.langAlias)}function f(T){S();const M=a.getGrammar(typeof T=="string"?T:T.name);if(!M)throw new Za(`Language \`${T}\` not found, you may need to load it first`);return M}function d(T){if(T==="none")return{bg:"",fg:"",name:"none",settings:[],type:"dark"};S();const M=a.getTheme(T);if(!M)throw new Za(`Theme \`${T}\` not found, you may need to load it first`);return M}function m(T){S();const M=d(T);l!==T&&(a.setTheme(M),l=T);const I=a.getColorMap();return{theme:M,colorMap:I}}function p(){return S(),a.getLoadedThemes()}function y(){return S(),a.getLoadedLanguages()}function g(...T){S(),a.loadLanguages(T.flat(1))}async function v(...T){return g(await NE(T))}function w(...T){S();for(const M of T.flat(1))a.loadTheme(M)}async function E(...T){return S(),w(await IE(T))}function S(){if(e)throw new Za("Shiki instance has been disposed")}function C(){e||(e=!0,a.dispose(),dl-=1)}return{setTheme:m,getTheme:d,getLanguage:f,getLoadedThemes:p,getLoadedLanguages:y,resolveLangAlias:u,loadLanguage:v,loadLanguageSync:g,loadTheme:E,loadThemeSync:w,dispose:C,[Symbol.dispose]:C}}async function vz(t){t.engine||gz("`engine` option is required. Use `createOnigurumaEngine` or `createJavaScriptRegexEngine` to create an engine.");const[e,n,r]=await Promise.all([IE(t.themes||[]),NE(t.langs||[]),t.engine]);return _z({...t,themes:e,langs:n,engine:r})}async function xz(t){const e=await vz(t);return{getLastGrammarState:(...n)=>nz(e,...n),codeToTokensBase:(n,r)=>Vy(e,n,r),codeToTokensWithThemes:(n,r)=>OE(e,n,r),codeToTokens:(n,r)=>$f(e,n,r),codeToHast:(n,r)=>qf(e,n,r),codeToHtml:(n,r)=>pz(e,n,r),getBundledLanguages:()=>({}),getBundledThemes:()=>({}),...e,getInternalContext:()=>e}}function wz(t){const e=t.langs,n=t.themes,r=t.engine;async function s(a){function l(p){if(typeof p=="string"){if(p=a.langAlias?.[p]||p,EE(p))return[];const y=e[p];if(!y)throw new Ht(`Language \`${p}\` is not included in this bundle. You may want to load it from external source.`);return y}return p}function u(p){if(CE(p))return"none";if(typeof p=="string"){const y=n[p];if(!y)throw new Ht(`Theme \`${p}\` is not included in this bundle. You may want to load it from external source.`);return y}return p}const f=(a.themes??[]).map(p=>u(p)),d=(a.langs??[]).map(p=>l(p)),m=await xz({engine:a.engine??r(),...a,themes:f,langs:d});return{...m,loadLanguage(...p){return m.loadLanguage(...p.map(l))},loadTheme(...p){return m.loadTheme(...p.map(u))},getBundledLanguages(){return e},getBundledThemes(){return n}}}return s}function Sz(t){let e;async function n(r={}){if(e){const s=await e;return await Promise.all([s.loadTheme(...r.themes||[]),s.loadLanguage(...r.langs||[])]),s}else{e=t({...r,themes:[],langs:[]});const s=await e;return await Promise.all([s.loadTheme(...r.themes||[]),s.loadLanguage(...r.langs||[])]),s}}return n}function kz(t,e){const n=Sz(t);async function r(s,a){const l=await n({langs:[a.lang],themes:"theme"in a?[a.theme]:Object.values(a.themes)}),u=await e?.guessEmbeddedLanguages?.(s,a.lang,l);return u&&await l.loadLanguage(...u),l}return{getSingletonHighlighter(s){return n(s)},async codeToHtml(s,a){return(await r(s,a)).codeToHtml(s,a)},async codeToHast(s,a){return(await r(s,a)).codeToHast(s,a)},async codeToTokens(s,a){return(await r(s,a)).codeToTokens(s,a)},async codeToTokensBase(s,a){return(await r(s,a)).codeToTokensBase(s,a)},async codeToTokensWithThemes(s,a){return(await r(s,a)).codeToTokensWithThemes(s,a)},async getLastGrammarState(s,a){return(await n({langs:[a.lang],themes:[a.theme]})).getLastGrammarState(s,a)}}}const DE=[{id:"abap",name:"ABAP",import:(()=>z(()=>import("./abap-BdImnpbu.js"),[]))},{id:"actionscript-3",name:"ActionScript",import:(()=>z(()=>import("./actionscript-3-CfeIJUat.js"),[]))},{id:"ada",name:"Ada",import:(()=>z(()=>import("./ada-bCR0ucgS.js"),[]))},{id:"angular-html",name:"Angular HTML",import:(()=>z(()=>import("./angular-html-CU67Zn6k.js").then(t=>t.f),__vite__mapDeps([0,1,2,3])))},{id:"angular-ts",name:"Angular TypeScript",import:(()=>z(()=>import("./angular-ts-BwZT4LLn.js"),__vite__mapDeps([4,0,1,2,3,5])))},{id:"apache",name:"Apache Conf",import:(()=>z(()=>import("./apache-Pmp26Uib.js"),[]))},{id:"apex",name:"Apex",import:(()=>z(()=>import("./apex-DDbsPZ6N.js"),[]))},{id:"apl",name:"APL",import:(()=>z(()=>import("./apl-dKokRX4l.js"),__vite__mapDeps([6,1,2,3,7,8,9])))},{id:"applescript",name:"AppleScript",import:(()=>z(()=>import("./applescript-Co6uUVPk.js"),[]))},{id:"ara",name:"Ara",import:(()=>z(()=>import("./ara-BRHolxvo.js"),[]))},{id:"asciidoc",name:"AsciiDoc",aliases:["adoc"],import:(()=>z(()=>import("./asciidoc-Dv7Oe6Be.js"),[]))},{id:"asm",name:"Assembly",import:(()=>z(()=>import("./asm-D_Q5rh1f.js"),[]))},{id:"astro",name:"Astro",import:(()=>z(()=>import("./astro-CbQHKStN.js"),__vite__mapDeps([10,9,2,11,3,12,13])))},{id:"awk",name:"AWK",import:(()=>z(()=>import("./awk-DMzUqQB5.js"),[]))},{id:"ballerina",name:"Ballerina",import:(()=>z(()=>import("./ballerina-BFfxhgS-.js"),[]))},{id:"bat",name:"Batch File",aliases:["batch"],import:(()=>z(()=>import("./bat-BkioyH1T.js"),[]))},{id:"beancount",name:"Beancount",import:(()=>z(()=>import("./beancount-k_qm7-4y.js"),[]))},{id:"berry",name:"Berry",aliases:["be"],import:(()=>z(()=>import("./berry-uYugtg8r.js"),[]))},{id:"bibtex",name:"BibTeX",import:(()=>z(()=>import("./bibtex-CHM0blh-.js"),[]))},{id:"bicep",name:"Bicep",import:(()=>z(()=>import("./bicep-Bmn6On1c.js"),[]))},{id:"blade",name:"Blade",import:(()=>z(()=>import("./blade-DVc8C-J4.js"),__vite__mapDeps([14,15,1,2,3,7,8,16,9])))},{id:"bsl",name:"1C (Enterprise)",aliases:["1c"],import:(()=>z(()=>import("./bsl-BO_Y6i37.js"),__vite__mapDeps([17,18])))},{id:"c",name:"C",import:(()=>z(()=>import("./c-BIGW1oBm.js"),[]))},{id:"cadence",name:"Cadence",aliases:["cdc"],import:(()=>z(()=>import("./cadence-Bv_4Rxtq.js"),[]))},{id:"cairo",name:"Cairo",import:(()=>z(()=>import("./cairo-KRGpt6FW.js"),__vite__mapDeps([19,20])))},{id:"clarity",name:"Clarity",import:(()=>z(()=>import("./clarity-D53aC0YG.js"),[]))},{id:"clojure",name:"Clojure",aliases:["clj"],import:(()=>z(()=>import("./clojure-P80f7IUj.js"),[]))},{id:"cmake",name:"CMake",import:(()=>z(()=>import("./cmake-D1j8_8rp.js"),[]))},{id:"cobol",name:"COBOL",import:(()=>z(()=>import("./cobol-nwyudZeR.js"),__vite__mapDeps([21,1,2,3,8])))},{id:"codeowners",name:"CODEOWNERS",import:(()=>z(()=>import("./codeowners-Bp6g37R7.js"),[]))},{id:"codeql",name:"CodeQL",aliases:["ql"],import:(()=>z(()=>import("./codeql-DsOJ9woJ.js"),[]))},{id:"coffee",name:"CoffeeScript",aliases:["coffeescript"],import:(()=>z(()=>import("./coffee-Ch7k5sss.js"),__vite__mapDeps([22,2])))},{id:"common-lisp",name:"Common Lisp",aliases:["lisp"],import:(()=>z(()=>import("./common-lisp-Cg-RD9OK.js"),[]))},{id:"coq",name:"Coq",import:(()=>z(()=>import("./coq-DkFqJrB1.js"),[]))},{id:"cpp",name:"C++",aliases:["c++"],import:(()=>z(()=>import("./cpp-CofmeUqb.js"),__vite__mapDeps([23,24,25,26,16])))},{id:"crystal",name:"Crystal",import:(()=>z(()=>import("./crystal-tKQVLTB8.js"),__vite__mapDeps([27,1,2,3,16,26,28])))},{id:"csharp",name:"C#",aliases:["c#","cs"],import:(()=>z(()=>import("./csharp-K5feNrxe.js"),[]))},{id:"css",name:"CSS",import:(()=>z(()=>import("./css-DPfMkruS.js"),[]))},{id:"csv",name:"CSV",import:(()=>z(()=>import("./csv-fuZLfV_i.js"),[]))},{id:"cue",name:"CUE",import:(()=>z(()=>import("./cue-D82EKSYY.js"),[]))},{id:"cypher",name:"Cypher",aliases:["cql"],import:(()=>z(()=>import("./cypher-COkxafJQ.js"),[]))},{id:"d",name:"D",import:(()=>z(()=>import("./d-85-TOEBH.js"),[]))},{id:"dart",name:"Dart",import:(()=>z(()=>import("./dart-CF10PKvl.js"),[]))},{id:"dax",name:"DAX",import:(()=>z(()=>import("./dax-CEL-wOlO.js"),[]))},{id:"desktop",name:"Desktop",import:(()=>z(()=>import("./desktop-BmXAJ9_W.js"),[]))},{id:"diff",name:"Diff",import:(()=>z(()=>import("./diff-D97Zzqfu.js"),[]))},{id:"docker",name:"Dockerfile",aliases:["dockerfile"],import:(()=>z(()=>import("./docker-BcOcwvcX.js"),[]))},{id:"dotenv",name:"dotEnv",import:(()=>z(()=>import("./dotenv-Da5cRb03.js"),[]))},{id:"dream-maker",name:"Dream Maker",import:(()=>z(()=>import("./dream-maker-BtqSS_iP.js"),[]))},{id:"edge",name:"Edge",import:(()=>z(()=>import("./edge-BkV0erSs.js"),__vite__mapDeps([29,11,1,2,3,15])))},{id:"elixir",name:"Elixir",import:(()=>z(()=>import("./elixir-CDX3lj18.js"),__vite__mapDeps([30,1,2,3])))},{id:"elm",name:"Elm",import:(()=>z(()=>import("./elm-DbKCFpqz.js"),__vite__mapDeps([31,25,26])))},{id:"emacs-lisp",name:"Emacs Lisp",aliases:["elisp"],import:(()=>z(()=>import("./emacs-lisp-C9XAeP06.js"),[]))},{id:"erb",name:"ERB",import:(()=>z(()=>import("./erb-BOJIQeun.js"),__vite__mapDeps([32,1,2,3,33,34,7,8,16,35,11,36,13,23,24,25,26,28,37,38])))},{id:"erlang",name:"Erlang",aliases:["erl"],import:(()=>z(()=>import("./erlang-DsQrWhSR.js"),__vite__mapDeps([39,40])))},{id:"fennel",name:"Fennel",import:(()=>z(()=>import("./fennel-BYunw83y.js"),[]))},{id:"fish",name:"Fish",import:(()=>z(()=>import("./fish-BvzEVeQv.js"),[]))},{id:"fluent",name:"Fluent",aliases:["ftl"],import:(()=>z(()=>import("./fluent-C4IJs8-o.js"),[]))},{id:"fortran-fixed-form",name:"Fortran (Fixed Form)",aliases:["f","for","f77"],import:(()=>z(()=>import("./fortran-fixed-form-BZjJHVRy.js"),__vite__mapDeps([41,42])))},{id:"fortran-free-form",name:"Fortran (Free Form)",aliases:["f90","f95","f03","f08","f18"],import:(()=>z(()=>import("./fortran-free-form-D22FLkUw.js"),[]))},{id:"fsharp",name:"F#",aliases:["f#","fs"],import:(()=>z(()=>import("./fsharp-CXgrBDvD.js"),__vite__mapDeps([43,40])))},{id:"gdresource",name:"GDResource",import:(()=>z(()=>import("./gdresource-B7Tvp0Sc.js"),__vite__mapDeps([44,45,46])))},{id:"gdscript",name:"GDScript",import:(()=>z(()=>import("./gdscript-DTMYz4Jt.js"),[]))},{id:"gdshader",name:"GDShader",import:(()=>z(()=>import("./gdshader-DkwncUOv.js"),[]))},{id:"genie",name:"Genie",import:(()=>z(()=>import("./genie-D0YGMca9.js"),[]))},{id:"gherkin",name:"Gherkin",import:(()=>z(()=>import("./gherkin-DyxjwDmM.js"),[]))},{id:"git-commit",name:"Git Commit Message",import:(()=>z(()=>import("./git-commit-F4YmCXRG.js"),__vite__mapDeps([47,48])))},{id:"git-rebase",name:"Git Rebase Message",import:(()=>z(()=>import("./git-rebase-r7XF79zn.js"),__vite__mapDeps([49,28])))},{id:"gleam",name:"Gleam",import:(()=>z(()=>import("./gleam-BspZqrRM.js"),[]))},{id:"glimmer-js",name:"Glimmer JS",aliases:["gjs"],import:(()=>z(()=>import("./glimmer-js-Rg0-pVw9.js"),__vite__mapDeps([50,2,11,3,1])))},{id:"glimmer-ts",name:"Glimmer TS",aliases:["gts"],import:(()=>z(()=>import("./glimmer-ts-U6CK756n.js"),__vite__mapDeps([51,11,3,2,1])))},{id:"glsl",name:"GLSL",import:(()=>z(()=>import("./glsl-DplSGwfg.js"),__vite__mapDeps([25,26])))},{id:"gnuplot",name:"Gnuplot",import:(()=>z(()=>import("./gnuplot-DdkO51Og.js"),[]))},{id:"go",name:"Go",import:(()=>z(()=>import("./go-Dn2_MT6a.js"),[]))},{id:"graphql",name:"GraphQL",aliases:["gql"],import:(()=>z(()=>import("./graphql-ChdNCCLP.js"),__vite__mapDeps([35,2,11,36,13])))},{id:"groovy",name:"Groovy",import:(()=>z(()=>import("./groovy-gcz8RCvz.js"),[]))},{id:"hack",name:"Hack",import:(()=>z(()=>import("./hack-CaT9iCJl.js"),__vite__mapDeps([52,1,2,3,16])))},{id:"haml",name:"Ruby Haml",import:(()=>z(()=>import("./haml-B8DHNrY2.js"),__vite__mapDeps([34,2,3])))},{id:"handlebars",name:"Handlebars",aliases:["hbs"],import:(()=>z(()=>import("./handlebars-BL8al0AC.js"),__vite__mapDeps([53,1,2,3,38])))},{id:"haskell",name:"Haskell",aliases:["hs"],import:(()=>z(()=>import("./haskell-Df6bDoY_.js"),[]))},{id:"haxe",name:"Haxe",import:(()=>z(()=>import("./haxe-CzTSHFRz.js"),[]))},{id:"hcl",name:"HashiCorp HCL",import:(()=>z(()=>import("./hcl-BWvSN4gD.js"),[]))},{id:"hjson",name:"Hjson",import:(()=>z(()=>import("./hjson-D5-asLiD.js"),[]))},{id:"hlsl",name:"HLSL",import:(()=>z(()=>import("./hlsl-D3lLCCz7.js"),[]))},{id:"html",name:"HTML",import:(()=>z(()=>import("./html-GMplVEZG.js"),__vite__mapDeps([1,2,3])))},{id:"html-derivative",name:"HTML (Derivative)",import:(()=>z(()=>import("./html-derivative-BFtXZ54Q.js"),__vite__mapDeps([15,1,2,3])))},{id:"http",name:"HTTP",import:(()=>z(()=>import("./http-jrhK8wxY.js"),__vite__mapDeps([54,28,9,7,8,35,2,11,36,13])))},{id:"hurl",name:"Hurl",import:(()=>z(()=>import("./hurl-irOxFIW8.js"),__vite__mapDeps([55,35,2,11,36,13,7,8,56])))},{id:"hxml",name:"HXML",import:(()=>z(()=>import("./hxml-Bvhsp5Yf.js"),__vite__mapDeps([57,58])))},{id:"hy",name:"Hy",import:(()=>z(()=>import("./hy-DFXneXwc.js"),[]))},{id:"imba",name:"Imba",import:(()=>z(()=>import("./imba-DGztddWO.js"),[]))},{id:"ini",name:"INI",aliases:["properties"],import:(()=>z(()=>import("./ini-BEwlwnbL.js"),[]))},{id:"java",name:"Java",import:(()=>z(()=>import("./java-CylS5w8V.js"),[]))},{id:"javascript",name:"JavaScript",aliases:["js","cjs","mjs"],import:(()=>z(()=>import("./javascript-wDzz0qaB.js"),[]))},{id:"jinja",name:"Jinja",import:(()=>z(()=>import("./jinja-4LBKfQ-Z.js"),__vite__mapDeps([59,1,2,3])))},{id:"jison",name:"Jison",import:(()=>z(()=>import("./jison-wvAkD_A8.js"),__vite__mapDeps([60,2])))},{id:"json",name:"JSON",import:(()=>z(()=>import("./json-Cp-IABpG.js"),[]))},{id:"json5",name:"JSON5",import:(()=>z(()=>import("./json5-C9tS-k6U.js"),[]))},{id:"jsonc",name:"JSON with Comments",import:(()=>z(()=>import("./jsonc-Des-eS-w.js"),[]))},{id:"jsonl",name:"JSON Lines",import:(()=>z(()=>import("./jsonl-DcaNXYhu.js"),[]))},{id:"jsonnet",name:"Jsonnet",import:(()=>z(()=>import("./jsonnet-DFQXde-d.js"),[]))},{id:"jssm",name:"JSSM",aliases:["fsl"],import:(()=>z(()=>import("./jssm-C2t-YnRu.js"),[]))},{id:"jsx",name:"JSX",import:(()=>z(()=>import("./jsx-g9-lgVsj.js"),[]))},{id:"julia",name:"Julia",aliases:["jl"],import:(()=>z(()=>import("./julia-C8NyazO9.js"),__vite__mapDeps([61,23,24,25,26,16,20,2,62])))},{id:"kdl",name:"KDL",import:(()=>z(()=>import("./kdl-DV7GczEv.js"),[]))},{id:"kotlin",name:"Kotlin",aliases:["kt","kts"],import:(()=>z(()=>import("./kotlin-BdnUsdx6.js"),[]))},{id:"kusto",name:"Kusto",aliases:["kql"],import:(()=>z(()=>import("./kusto-BvAqAH-y.js"),[]))},{id:"latex",name:"LaTeX",import:(()=>z(()=>import("./latex-BdAV_C_H.js"),__vite__mapDeps([63,64,62])))},{id:"lean",name:"Lean 4",aliases:["lean4"],import:(()=>z(()=>import("./lean-Bc6EcWN3.js"),[]))},{id:"less",name:"Less",import:(()=>z(()=>import("./less-B1dDrJ26.js"),[]))},{id:"liquid",name:"Liquid",import:(()=>z(()=>import("./liquid-DYVedYrR.js"),__vite__mapDeps([65,1,2,3,9])))},{id:"llvm",name:"LLVM IR",import:(()=>z(()=>import("./llvm-BtvRca6l.js"),[]))},{id:"log",name:"Log file",import:(()=>z(()=>import("./log-2UxHyX5q.js"),[]))},{id:"logo",name:"Logo",import:(()=>z(()=>import("./logo-BtOb2qkB.js"),[]))},{id:"lua",name:"Lua",import:(()=>z(()=>import("./lua-BbnMAYS6.js"),__vite__mapDeps([37,26])))},{id:"luau",name:"Luau",import:(()=>z(()=>import("./luau-CXu1NL6O.js"),[]))},{id:"make",name:"Makefile",aliases:["makefile"],import:(()=>z(()=>import("./make-CHLpvVh8.js"),[]))},{id:"markdown",name:"Markdown",aliases:["md"],import:(()=>z(()=>import("./markdown-Cvjx9yec.js"),[]))},{id:"marko",name:"Marko",import:(()=>z(()=>import("./marko-CPi9NSCl.js"),__vite__mapDeps([66,3,67,5,11])))},{id:"matlab",name:"MATLAB",import:(()=>z(()=>import("./matlab-D7o27uSR.js"),[]))},{id:"mdc",name:"MDC",import:(()=>z(()=>import("./mdc-DUICxH0z.js"),__vite__mapDeps([68,40,38,15,1,2,3])))},{id:"mdx",name:"MDX",import:(()=>z(()=>import("./mdx-Cmh6b_Ma.js"),[]))},{id:"mermaid",name:"Mermaid",aliases:["mmd"],import:(()=>z(()=>import("./mermaid-DKYwYmdq.js"),[]))},{id:"mipsasm",name:"MIPS Assembly",aliases:["mips"],import:(()=>z(()=>import("./mipsasm-CKIfxQSi.js"),[]))},{id:"mojo",name:"Mojo",import:(()=>z(()=>import("./mojo-1DNp92w6.js"),[]))},{id:"move",name:"Move",import:(()=>z(()=>import("./move-Bu9oaDYs.js"),[]))},{id:"narrat",name:"Narrat Language",aliases:["nar"],import:(()=>z(()=>import("./narrat-DRg8JJMk.js"),[]))},{id:"nextflow",name:"Nextflow",aliases:["nf"],import:(()=>z(()=>import("./nextflow-BrzmwbiE.js"),[]))},{id:"nginx",name:"Nginx",import:(()=>z(()=>import("./nginx-DknmC5AR.js"),__vite__mapDeps([69,37,26])))},{id:"nim",name:"Nim",import:(()=>z(()=>import("./nim-CVrawwO9.js"),__vite__mapDeps([70,26,1,2,3,7,8,25,40])))},{id:"nix",name:"Nix",import:(()=>z(()=>import("./nix-c8nO5XWb.js"),[]))},{id:"nushell",name:"nushell",aliases:["nu"],import:(()=>z(()=>import("./nushell-C-sUppwS.js"),[]))},{id:"objective-c",name:"Objective-C",aliases:["objc"],import:(()=>z(()=>import("./objective-c-DXmwc3jG.js"),[]))},{id:"objective-cpp",name:"Objective-C++",import:(()=>z(()=>import("./objective-cpp-CLxacb5B.js"),[]))},{id:"ocaml",name:"OCaml",import:(()=>z(()=>import("./ocaml-C0hk2d4L.js"),[]))},{id:"openscad",name:"OpenSCAD",aliases:["scad"],import:(()=>z(()=>import("./openscad-C4EeE6gA.js"),[]))},{id:"pascal",name:"Pascal",import:(()=>z(()=>import("./pascal-D93ZcfNL.js"),[]))},{id:"perl",name:"Perl",import:(()=>z(()=>import("./perl-C0TMdlhV.js"),__vite__mapDeps([71,1,2,3,7,8,16])))},{id:"php",name:"PHP",import:(()=>z(()=>import("./php-CDn_0X-4.js"),__vite__mapDeps([72,1,2,3,7,8,16,9])))},{id:"pkl",name:"Pkl",import:(()=>z(()=>import("./pkl-u5AG7uiY.js"),[]))},{id:"plsql",name:"PL/SQL",import:(()=>z(()=>import("./plsql-ChMvpjG-.js"),[]))},{id:"po",name:"Gettext PO",aliases:["pot","potx"],import:(()=>z(()=>import("./po-BTJTHyun.js"),[]))},{id:"polar",name:"Polar",import:(()=>z(()=>import("./polar-C0HS_06l.js"),[]))},{id:"postcss",name:"PostCSS",import:(()=>z(()=>import("./postcss-CXtECtnM.js"),[]))},{id:"powerquery",name:"PowerQuery",import:(()=>z(()=>import("./powerquery-CEu0bR-o.js"),[]))},{id:"powershell",name:"PowerShell",aliases:["ps","ps1"],import:(()=>z(()=>import("./powershell-Dpen1YoG.js"),[]))},{id:"prisma",name:"Prisma",import:(()=>z(()=>import("./prisma-Dd19v3D-.js"),[]))},{id:"prolog",name:"Prolog",import:(()=>z(()=>import("./prolog-CbFg5uaA.js"),[]))},{id:"proto",name:"Protocol Buffer 3",aliases:["protobuf"],import:(()=>z(()=>import("./proto-DyJlTyXw.js"),[]))},{id:"pug",name:"Pug",aliases:["jade"],import:(()=>z(()=>import("./pug-CGlum2m_.js"),__vite__mapDeps([73,2,3,1])))},{id:"puppet",name:"Puppet",import:(()=>z(()=>import("./puppet-BMWR74SV.js"),[]))},{id:"purescript",name:"PureScript",import:(()=>z(()=>import("./purescript-CklMAg4u.js"),[]))},{id:"python",name:"Python",aliases:["py"],import:(()=>z(()=>import("./python-B6aJPvgy.js"),[]))},{id:"qml",name:"QML",import:(()=>z(()=>import("./qml-3beO22l8.js"),__vite__mapDeps([74,2])))},{id:"qmldir",name:"QML Directory",import:(()=>z(()=>import("./qmldir-C8lEn-DE.js"),[]))},{id:"qss",name:"Qt Style Sheets",import:(()=>z(()=>import("./qss-IeuSbFQv.js"),[]))},{id:"r",name:"R",import:(()=>z(()=>import("./r-DiinP2Uv.js"),[]))},{id:"racket",name:"Racket",import:(()=>z(()=>import("./racket-BqYA7rlc.js"),[]))},{id:"raku",name:"Raku",aliases:["perl6"],import:(()=>z(()=>import("./raku-DXvB9xmW.js"),[]))},{id:"razor",name:"ASP.NET Razor",import:(()=>z(()=>import("./razor-CE9lU5zL.js"),__vite__mapDeps([75,1,2,3,76])))},{id:"reg",name:"Windows Registry Script",import:(()=>z(()=>import("./reg-C-SQnVFl.js"),[]))},{id:"regexp",name:"RegExp",aliases:["regex"],import:(()=>z(()=>import("./regexp-CDVJQ6XC.js"),[]))},{id:"rel",name:"Rel",import:(()=>z(()=>import("./rel-C3B-1QV4.js"),[]))},{id:"riscv",name:"RISC-V",import:(()=>z(()=>import("./riscv-BM1_JUlF.js"),[]))},{id:"rosmsg",name:"ROS Interface",import:(()=>z(()=>import("./rosmsg-BJDFO7_C.js"),[]))},{id:"rst",name:"reStructuredText",import:(()=>z(()=>import("./rst-B0xPkSld.js"),__vite__mapDeps([77,15,1,2,3,23,24,25,26,16,20,28,38,78,33,34,7,8,35,11,36,13,37])))},{id:"ruby",name:"Ruby",aliases:["rb"],import:(()=>z(()=>import("./ruby-BvKwtOVI.js"),__vite__mapDeps([33,1,2,3,34,7,8,16,35,11,36,13,23,24,25,26,28,37,38])))},{id:"rust",name:"Rust",aliases:["rs"],import:(()=>z(()=>import("./rust-B1yitclQ.js"),[]))},{id:"sas",name:"SAS",import:(()=>z(()=>import("./sas-cz2c8ADy.js"),__vite__mapDeps([79,16])))},{id:"sass",name:"Sass",import:(()=>z(()=>import("./sass-Cj5Yp3dK.js"),[]))},{id:"scala",name:"Scala",import:(()=>z(()=>import("./scala-C151Ov-r.js"),[]))},{id:"scheme",name:"Scheme",import:(()=>z(()=>import("./scheme-C98Dy4si.js"),[]))},{id:"scss",name:"SCSS",import:(()=>z(()=>import("./scss-OYdSNvt2.js"),__vite__mapDeps([5,3])))},{id:"sdbl",name:"1C (Query)",aliases:["1c-query"],import:(()=>z(()=>import("./sdbl-DVxCFoDh.js"),[]))},{id:"shaderlab",name:"ShaderLab",aliases:["shader"],import:(()=>z(()=>import("./shaderlab-Dg9Lc6iA.js"),__vite__mapDeps([80,81])))},{id:"shellscript",name:"Shell",aliases:["bash","sh","shell","zsh"],import:(()=>z(()=>import("./shellscript-Yzrsuije.js"),[]))},{id:"shellsession",name:"Shell Session",aliases:["console"],import:(()=>z(()=>import("./shellsession-BADoaaVG.js"),__vite__mapDeps([82,28])))},{id:"smalltalk",name:"Smalltalk",import:(()=>z(()=>import("./smalltalk-BERRCDM3.js"),[]))},{id:"solidity",name:"Solidity",import:(()=>z(()=>import("./solidity-rGO070M0.js"),[]))},{id:"soy",name:"Closure Templates",aliases:["closure-templates"],import:(()=>z(()=>import("./soy-Brmx7dQM.js"),__vite__mapDeps([83,1,2,3])))},{id:"sparql",name:"SPARQL",import:(()=>z(()=>import("./sparql-rVzFXLq3.js"),__vite__mapDeps([84,85])))},{id:"splunk",name:"Splunk Query Language",aliases:["spl"],import:(()=>z(()=>import("./splunk-BtCnVYZw.js"),[]))},{id:"sql",name:"SQL",import:(()=>z(()=>import("./sql-BLtJtn59.js"),[]))},{id:"ssh-config",name:"SSH Config",import:(()=>z(()=>import("./ssh-config-_ykCGR6B.js"),[]))},{id:"stata",name:"Stata",import:(()=>z(()=>import("./stata-BH5u7GGu.js"),__vite__mapDeps([86,16])))},{id:"stylus",name:"Stylus",aliases:["styl"],import:(()=>z(()=>import("./stylus-BEDo0Tqx.js"),[]))},{id:"svelte",name:"Svelte",import:(()=>z(()=>import("./svelte-3Dk4HxPD.js"),__vite__mapDeps([87,2,11,3,12])))},{id:"swift",name:"Swift",import:(()=>z(()=>import("./swift-Dg5xB15N.js"),[]))},{id:"system-verilog",name:"SystemVerilog",import:(()=>z(()=>import("./system-verilog-CnnmHF94.js"),[]))},{id:"systemd",name:"Systemd Units",import:(()=>z(()=>import("./systemd-4A_iFExJ.js"),[]))},{id:"talonscript",name:"TalonScript",aliases:["talon"],import:(()=>z(()=>import("./talonscript-CkByrt1z.js"),[]))},{id:"tasl",name:"Tasl",import:(()=>z(()=>import("./tasl-QIJgUcNo.js"),[]))},{id:"tcl",name:"Tcl",import:(()=>z(()=>import("./tcl-dwOrl1Do.js"),[]))},{id:"templ",name:"Templ",import:(()=>z(()=>import("./templ-W15q3VgB.js"),__vite__mapDeps([88,89,2,3])))},{id:"terraform",name:"Terraform",aliases:["tf","tfvars"],import:(()=>z(()=>import("./terraform-BETggiCN.js"),[]))},{id:"tex",name:"TeX",import:(()=>z(()=>import("./tex-CxkMU7Pf.js"),__vite__mapDeps([64,62])))},{id:"toml",name:"TOML",import:(()=>z(()=>import("./toml-vGWfd6FD.js"),[]))},{id:"ts-tags",name:"TypeScript with Tags",aliases:["lit"],import:(()=>z(()=>import("./ts-tags-zn1MmPIZ.js"),__vite__mapDeps([90,11,3,2,25,26,1,16,7,8])))},{id:"tsv",name:"TSV",import:(()=>z(()=>import("./tsv-B_m7g4N7.js"),[]))},{id:"tsx",name:"TSX",import:(()=>z(()=>import("./tsx-COt5Ahok.js"),[]))},{id:"turtle",name:"Turtle",import:(()=>z(()=>import("./turtle-BsS91CYL.js"),[]))},{id:"twig",name:"Twig",import:(()=>z(()=>import("./twig-CO9l9SDP.js"),__vite__mapDeps([91,3,2,5,72,1,7,8,16,9,20,33,34,35,11,36,13,23,24,25,26,28,37,38])))},{id:"typescript",name:"TypeScript",aliases:["ts","cts","mts"],import:(()=>z(()=>import("./typescript-BPQ3VLAy.js"),[]))},{id:"typespec",name:"TypeSpec",aliases:["tsp"],import:(()=>z(()=>import("./typespec-BGHnOYBU.js"),[]))},{id:"typst",name:"Typst",aliases:["typ"],import:(()=>z(()=>import("./typst-DHCkPAjA.js"),[]))},{id:"v",name:"V",import:(()=>z(()=>import("./v-BcVCzyr7.js"),[]))},{id:"vala",name:"Vala",import:(()=>z(()=>import("./vala-CsfeWuGM.js"),[]))},{id:"vb",name:"Visual Basic",aliases:["cmd"],import:(()=>z(()=>import("./vb-D17OF-Vu.js"),[]))},{id:"verilog",name:"Verilog",import:(()=>z(()=>import("./verilog-BQ8w6xss.js"),[]))},{id:"vhdl",name:"VHDL",import:(()=>z(()=>import("./vhdl-CeAyd5Ju.js"),[]))},{id:"viml",name:"Vim Script",aliases:["vim","vimscript"],import:(()=>z(()=>import("./viml-CJc9bBzg.js"),[]))},{id:"vue",name:"Vue",import:(()=>z(()=>import("./vue-DnHKYNfI.js"),__vite__mapDeps([92,3,2,11,9,15,1])))},{id:"vue-html",name:"Vue HTML",import:(()=>z(()=>import("./vue-html-CChd_i61.js"),__vite__mapDeps([93,92,3,2,11,9,15,1])))},{id:"vue-vine",name:"Vue Vine",import:(()=>z(()=>import("./vue-vine-8moa0y9V.js"),__vite__mapDeps([94,3,5,67,95,12,92,2,11,9,15,1])))},{id:"vyper",name:"Vyper",aliases:["vy"],import:(()=>z(()=>import("./vyper-CDx5xZoG.js"),[]))},{id:"wasm",name:"WebAssembly",import:(()=>z(()=>import("./wasm-MzD3tlZU.js"),[]))},{id:"wenyan",name:"Wenyan",aliases:[""],import:(()=>z(()=>import("./wenyan-BV7otONQ.js"),[]))},{id:"wgsl",name:"WGSL",import:(()=>z(()=>import("./wgsl-Dx-B1_4e.js"),[]))},{id:"wikitext",name:"Wikitext",aliases:["mediawiki","wiki"],import:(()=>z(()=>import("./wikitext-BhOHFoWU.js"),[]))},{id:"wit",name:"WebAssembly Interface Types",import:(()=>z(()=>import("./wit-5i3qLPDT.js"),[]))},{id:"wolfram",name:"Wolfram",aliases:["wl"],import:(()=>z(()=>import("./wolfram-lXgVvXCa.js"),[]))},{id:"xml",name:"XML",import:(()=>z(()=>import("./xml-sdJ4AIDG.js"),__vite__mapDeps([7,8])))},{id:"xsl",name:"XSL",import:(()=>z(()=>import("./xsl-CtQFsRM5.js"),__vite__mapDeps([96,7,8])))},{id:"yaml",name:"YAML",aliases:["yml"],import:(()=>z(()=>import("./yaml-Buea-lGh.js"),[]))},{id:"zenscript",name:"ZenScript",import:(()=>z(()=>import("./zenscript-DVFEvuxE.js"),[]))},{id:"zig",name:"Zig",import:(()=>z(()=>import("./zig-VOosw3JB.js"),[]))}],Ez=Object.fromEntries(DE.map(t=>[t.id,t.import])),Cz=Object.fromEntries(DE.flatMap(t=>t.aliases?.map(e=>[e,t.import])||[])),Tz={...Ez,...Cz},Az=[{id:"andromeeda",displayName:"Andromeeda",type:"dark",import:(()=>z(()=>import("./andromeeda-C-Jbm3Hp.js"),[]))},{id:"aurora-x",displayName:"Aurora X",type:"dark",import:(()=>z(()=>import("./aurora-x-D-2ljcwZ.js"),[]))},{id:"ayu-dark",displayName:"Ayu Dark",type:"dark",import:(()=>z(()=>import("./ayu-dark-Cv9koXgw.js"),[]))},{id:"catppuccin-frappe",displayName:"Catppuccin Frapp",type:"dark",import:(()=>z(()=>import("./catppuccin-frappe-DFWUc33u.js"),[]))},{id:"catppuccin-latte",displayName:"Catppuccin Latte",type:"light",import:(()=>z(()=>import("./catppuccin-latte-C9dUb6Cb.js"),[]))},{id:"catppuccin-macchiato",displayName:"Catppuccin Macchiato",type:"dark",import:(()=>z(()=>import("./catppuccin-macchiato-DQyhUUbL.js"),[]))},{id:"catppuccin-mocha",displayName:"Catppuccin Mocha",type:"dark",import:(()=>z(()=>import("./catppuccin-mocha-D87Tk5Gz.js"),[]))},{id:"dark-plus",displayName:"Dark Plus",type:"dark",import:(()=>z(()=>import("./dark-plus-C3mMm8J8.js"),[]))},{id:"dracula",displayName:"Dracula Theme",type:"dark",import:(()=>z(()=>import("./dracula-BzJJZx-M.js"),[]))},{id:"dracula-soft",displayName:"Dracula Theme Soft",type:"dark",import:(()=>z(()=>import("./dracula-soft-BXkSAIEj.js"),[]))},{id:"everforest-dark",displayName:"Everforest Dark",type:"dark",import:(()=>z(()=>import("./everforest-dark-BgDCqdQA.js"),[]))},{id:"everforest-light",displayName:"Everforest Light",type:"light",import:(()=>z(()=>import("./everforest-light-C8M2exoo.js"),[]))},{id:"github-dark",displayName:"GitHub Dark",type:"dark",import:(()=>z(()=>import("./github-dark-DHJKELXO.js"),[]))},{id:"github-dark-default",displayName:"GitHub Dark Default",type:"dark",import:(()=>z(()=>import("./github-dark-default-Cuk6v7N8.js"),[]))},{id:"github-dark-dimmed",displayName:"GitHub Dark Dimmed",type:"dark",import:(()=>z(()=>import("./github-dark-dimmed-DH5Ifo-i.js"),[]))},{id:"github-dark-high-contrast",displayName:"GitHub Dark High Contrast",type:"dark",import:(()=>z(()=>import("./github-dark-high-contrast-E3gJ1_iC.js"),[]))},{id:"github-light",displayName:"GitHub Light",type:"light",import:(()=>z(()=>import("./github-light-DAi9KRSo.js"),[]))},{id:"github-light-default",displayName:"GitHub Light Default",type:"light",import:(()=>z(()=>import("./github-light-default-D7oLnXFd.js"),[]))},{id:"github-light-high-contrast",displayName:"GitHub Light High Contrast",type:"light",import:(()=>z(()=>import("./github-light-high-contrast-BfjtVDDH.js"),[]))},{id:"gruvbox-dark-hard",displayName:"Gruvbox Dark Hard",type:"dark",import:(()=>z(()=>import("./gruvbox-dark-hard-CFHQjOhq.js"),[]))},{id:"gruvbox-dark-medium",displayName:"Gruvbox Dark Medium",type:"dark",import:(()=>z(()=>import("./gruvbox-dark-medium-GsRaNv29.js"),[]))},{id:"gruvbox-dark-soft",displayName:"Gruvbox Dark Soft",type:"dark",import:(()=>z(()=>import("./gruvbox-dark-soft-CVdnzihN.js"),[]))},{id:"gruvbox-light-hard",displayName:"Gruvbox Light Hard",type:"light",import:(()=>z(()=>import("./gruvbox-light-hard-CH1njM8p.js"),[]))},{id:"gruvbox-light-medium",displayName:"Gruvbox Light Medium",type:"light",import:(()=>z(()=>import("./gruvbox-light-medium-DRw_LuNl.js"),[]))},{id:"gruvbox-light-soft",displayName:"Gruvbox Light Soft",type:"light",import:(()=>z(()=>import("./gruvbox-light-soft-hJgmCMqR.js"),[]))},{id:"houston",displayName:"Houston",type:"dark",import:(()=>z(()=>import("./houston-DnULxvSX.js"),[]))},{id:"kanagawa-dragon",displayName:"Kanagawa Dragon",type:"dark",import:(()=>z(()=>import("./kanagawa-dragon-CkXjmgJE.js"),[]))},{id:"kanagawa-lotus",displayName:"Kanagawa Lotus",type:"light",import:(()=>z(()=>import("./kanagawa-lotus-CfQXZHmo.js"),[]))},{id:"kanagawa-wave",displayName:"Kanagawa Wave",type:"dark",import:(()=>z(()=>import("./kanagawa-wave-DWedfzmr.js"),[]))},{id:"laserwave",displayName:"LaserWave",type:"dark",import:(()=>z(()=>import("./laserwave-DUszq2jm.js"),[]))},{id:"light-plus",displayName:"Light Plus",type:"light",import:(()=>z(()=>import("./light-plus-B7mTdjB0.js"),[]))},{id:"material-theme",displayName:"Material Theme",type:"dark",import:(()=>z(()=>import("./material-theme-D5KoaKCx.js"),[]))},{id:"material-theme-darker",displayName:"Material Theme Darker",type:"dark",import:(()=>z(()=>import("./material-theme-darker-BfHTSMKl.js"),[]))},{id:"material-theme-lighter",displayName:"Material Theme Lighter",type:"light",import:(()=>z(()=>import("./material-theme-lighter-B0m2ddpp.js"),[]))},{id:"material-theme-ocean",displayName:"Material Theme Ocean",type:"dark",import:(()=>z(()=>import("./material-theme-ocean-CyktbL80.js"),[]))},{id:"material-theme-palenight",displayName:"Material Theme Palenight",type:"dark",import:(()=>z(()=>import("./material-theme-palenight-Csfq5Kiy.js"),[]))},{id:"min-dark",displayName:"Min Dark",type:"dark",import:(()=>z(()=>import("./min-dark-CafNBF8u.js"),[]))},{id:"min-light",displayName:"Min Light",type:"light",import:(()=>z(()=>import("./min-light-CTRr51gU.js"),[]))},{id:"monokai",displayName:"Monokai",type:"dark",import:(()=>z(()=>import("./monokai-D4h5O-jR.js"),[]))},{id:"night-owl",displayName:"Night Owl",type:"dark",import:(()=>z(()=>import("./night-owl-C39BiMTA.js"),[]))},{id:"nord",displayName:"Nord",type:"dark",import:(()=>z(()=>import("./nord-Ddv68eIx.js"),[]))},{id:"one-dark-pro",displayName:"One Dark Pro",type:"dark",import:(()=>z(()=>import("./one-dark-pro-DVMEJ2y_.js"),[]))},{id:"one-light",displayName:"One Light",type:"light",import:(()=>z(()=>import("./one-light-PoHY5YXO.js"),[]))},{id:"plastic",displayName:"Plastic",type:"dark",import:(()=>z(()=>import("./plastic-3e1v2bzS.js"),[]))},{id:"poimandres",displayName:"Poimandres",type:"dark",import:(()=>z(()=>import("./poimandres-CS3Unz2-.js"),[]))},{id:"red",displayName:"Red",type:"dark",import:(()=>z(()=>import("./red-bN70gL4F.js"),[]))},{id:"rose-pine",displayName:"Ros Pine",type:"dark",import:(()=>z(()=>import("./rose-pine-qdsjHGoJ.js"),[]))},{id:"rose-pine-dawn",displayName:"Ros Pine Dawn",type:"light",import:(()=>z(()=>import("./rose-pine-dawn-DHQR4-dF.js"),[]))},{id:"rose-pine-moon",displayName:"Ros Pine Moon",type:"dark",import:(()=>z(()=>import("./rose-pine-moon-D4_iv3hh.js"),[]))},{id:"slack-dark",displayName:"Slack Dark",type:"dark",import:(()=>z(()=>import("./slack-dark-BthQWCQV.js"),[]))},{id:"slack-ochin",displayName:"Slack Ochin",type:"light",import:(()=>z(()=>import("./slack-ochin-DqwNpetd.js"),[]))},{id:"snazzy-light",displayName:"Snazzy Light",type:"light",import:(()=>z(()=>import("./snazzy-light-Bw305WKR.js"),[]))},{id:"solarized-dark",displayName:"Solarized Dark",type:"dark",import:(()=>z(()=>import("./solarized-dark-DXbdFlpD.js"),[]))},{id:"solarized-light",displayName:"Solarized Light",type:"light",import:(()=>z(()=>import("./solarized-light-L9t79GZl.js"),[]))},{id:"synthwave-84",displayName:"Synthwave '84",type:"dark",import:(()=>z(()=>import("./synthwave-84-CbfX1IO0.js"),[]))},{id:"tokyo-night",displayName:"Tokyo Night",type:"dark",import:(()=>z(()=>import("./tokyo-night-hegEt444.js"),[]))},{id:"vesper",displayName:"Vesper",type:"dark",import:(()=>z(()=>import("./vesper-DU1UobuO.js"),[]))},{id:"vitesse-black",displayName:"Vitesse Black",type:"dark",import:(()=>z(()=>import("./vitesse-black-Bkuqu6BP.js"),[]))},{id:"vitesse-dark",displayName:"Vitesse Dark",type:"dark",import:(()=>z(()=>import("./vitesse-dark-D0r3Knsf.js"),[]))},{id:"vitesse-light",displayName:"Vitesse Light",type:"light",import:(()=>z(()=>import("./vitesse-light-CVO1_9PV.js"),[]))}],Rz=Object.fromEntries(Az.map(t=>[t.id,t.import]));class Ky extends Error{constructor(e){super(e),this.name="ShikiError"}}function Oz(){return 2147483648}function Nz(){return typeof performance<"u"?performance.now():Date.now()}const Iz=(t,e)=>t+(e-t%e)%e;async function Mz(t){let e,n;const r={};function s(g){n=g,r.HEAPU8=new Uint8Array(g),r.HEAPU32=new Uint32Array(g)}function a(g,v,w){r.HEAPU8.copyWithin(g,v,v+w)}function l(g){try{return e.grow(g-n.byteLength+65535>>>16),s(e.buffer),1}catch{}}function u(g){const v=r.HEAPU8.length;g=g>>>0;const w=Oz();if(g>w)return!1;for(let E=1;E<=4;E*=2){let S=v*(1+.2/E);S=Math.min(S,g+100663296);const C=Math.min(w,Iz(Math.max(g,S),65536));if(l(C))return!0}return!1}const f=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function d(g,v,w=1024){const E=v+w;let S=v;for(;g[S]&&!(S>=E);)++S;if(S-v>16&&g.buffer&&f)return f.decode(g.subarray(v,S));let C="";for(;v<S;){let T=g[v++];if(!(T&128)){C+=String.fromCharCode(T);continue}const M=g[v++]&63;if((T&224)===192){C+=String.fromCharCode((T&31)<<6|M);continue}const I=g[v++]&63;if((T&240)===224?T=(T&15)<<12|M<<6|I:T=(T&7)<<18|M<<12|I<<6|g[v++]&63,T<65536)C+=String.fromCharCode(T);else{const R=T-65536;C+=String.fromCharCode(55296|R>>10,56320|R&1023)}}return C}function m(g,v){return g?d(r.HEAPU8,g,v):""}const p={emscripten_get_now:Nz,emscripten_memcpy_big:a,emscripten_resize_heap:u,fd_write:()=>0};async function y(){const v=await t({env:p,wasi_snapshot_preview1:p});e=v.memory,s(e.buffer),Object.assign(r,v),r.UTF8ToString=m}return await y(),r}var Dz=Object.defineProperty,jz=(t,e,n)=>e in t?Dz(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Wt=(t,e,n)=>jz(t,typeof e!="symbol"?e+"":e,n);let cn=null;function Lz(t){throw new Ky(t.UTF8ToString(t.getLastOnigError()))}class gd{constructor(e){Wt(this,"utf16Length"),Wt(this,"utf8Length"),Wt(this,"utf16Value"),Wt(this,"utf8Value"),Wt(this,"utf16OffsetToUtf8"),Wt(this,"utf8OffsetToUtf16");const n=e.length,r=gd._utf8ByteLength(e),s=r!==n,a=s?new Uint32Array(n+1):null;s&&(a[n]=r);const l=s?new Uint32Array(r+1):null;s&&(l[r]=n);const u=new Uint8Array(r);let f=0;for(let d=0;d<n;d++){const m=e.charCodeAt(d);let p=m,y=!1;if(m>=55296&&m<=56319&&d+1<n){const g=e.charCodeAt(d+1);g>=56320&&g<=57343&&(p=(m-55296<<10)+65536|g-56320,y=!0)}s&&(a[d]=f,y&&(a[d+1]=f),p<=127?l[f+0]=d:p<=2047?(l[f+0]=d,l[f+1]=d):p<=65535?(l[f+0]=d,l[f+1]=d,l[f+2]=d):(l[f+0]=d,l[f+1]=d,l[f+2]=d,l[f+3]=d)),p<=127?u[f++]=p:p<=2047?(u[f++]=192|(p&1984)>>>6,u[f++]=128|(p&63)>>>0):p<=65535?(u[f++]=224|(p&61440)>>>12,u[f++]=128|(p&4032)>>>6,u[f++]=128|(p&63)>>>0):(u[f++]=240|(p&1835008)>>>18,u[f++]=128|(p&258048)>>>12,u[f++]=128|(p&4032)>>>6,u[f++]=128|(p&63)>>>0),y&&d++}this.utf16Length=n,this.utf8Length=r,this.utf16Value=e,this.utf8Value=u,this.utf16OffsetToUtf8=a,this.utf8OffsetToUtf16=l}static _utf8ByteLength(e){let n=0;for(let r=0,s=e.length;r<s;r++){const a=e.charCodeAt(r);let l=a,u=!1;if(a>=55296&&a<=56319&&r+1<s){const f=e.charCodeAt(r+1);f>=56320&&f<=57343&&(l=(a-55296<<10)+65536|f-56320,u=!0)}l<=127?n+=1:l<=2047?n+=2:l<=65535?n+=3:n+=4,u&&r++}return n}createString(e){const n=e.omalloc(this.utf8Length);return e.HEAPU8.set(this.utf8Value,n),n}}const yd=class Kr{constructor(e){if(Wt(this,"id",++Kr.LAST_ID),Wt(this,"_onigBinding"),Wt(this,"content"),Wt(this,"utf16Length"),Wt(this,"utf8Length"),Wt(this,"utf16OffsetToUtf8"),Wt(this,"utf8OffsetToUtf16"),Wt(this,"ptr"),!cn)throw new Ky("Must invoke loadWasm first.");this._onigBinding=cn,this.content=e;const n=new gd(e);this.utf16Length=n.utf16Length,this.utf8Length=n.utf8Length,this.utf16OffsetToUtf8=n.utf16OffsetToUtf8,this.utf8OffsetToUtf16=n.utf8OffsetToUtf16,this.utf8Length<1e4&&!Kr._sharedPtrInUse?(Kr._sharedPtr||(Kr._sharedPtr=cn.omalloc(1e4)),Kr._sharedPtrInUse=!0,cn.HEAPU8.set(n.utf8Value,Kr._sharedPtr),this.ptr=Kr._sharedPtr):this.ptr=n.createString(cn)}convertUtf8OffsetToUtf16(e){return this.utf8OffsetToUtf16?e<0?0:e>this.utf8Length?this.utf16Length:this.utf8OffsetToUtf16[e]:e}convertUtf16OffsetToUtf8(e){return this.utf16OffsetToUtf8?e<0?0:e>this.utf16Length?this.utf8Length:this.utf16OffsetToUtf8[e]:e}dispose(){this.ptr===Kr._sharedPtr?Kr._sharedPtrInUse=!1:this._onigBinding.ofree(this.ptr)}};Wt(yd,"LAST_ID",0);Wt(yd,"_sharedPtr",0);Wt(yd,"_sharedPtrInUse",!1);let jE=yd;class zz{constructor(e){if(Wt(this,"_onigBinding"),Wt(this,"_ptr"),!cn)throw new Ky("Must invoke loadWasm first.");const n=[],r=[];for(let u=0,f=e.length;u<f;u++){const d=new gd(e[u]);n[u]=d.createString(cn),r[u]=d.utf8Length}const s=cn.omalloc(4*e.length);cn.HEAPU32.set(n,s/4);const a=cn.omalloc(4*e.length);cn.HEAPU32.set(r,a/4);const l=cn.createOnigScanner(s,a,e.length);for(let u=0,f=e.length;u<f;u++)cn.ofree(n[u]);cn.ofree(a),cn.ofree(s),l===0&&Lz(cn),this._onigBinding=cn,this._ptr=l}dispose(){this._onigBinding.freeOnigScanner(this._ptr)}findNextMatchSync(e,n,r){let s=0;if(typeof r=="number"&&(s=r),typeof e=="string"){e=new jE(e);const a=this._findNextMatchSync(e,n,!1,s);return e.dispose(),a}return this._findNextMatchSync(e,n,!1,s)}_findNextMatchSync(e,n,r,s){const a=this._onigBinding,l=a.findNextOnigScannerMatch(this._ptr,e.id,e.ptr,e.utf8Length,e.convertUtf16OffsetToUtf8(n),s);if(l===0)return null;const u=a.HEAPU32;let f=l/4;const d=u[f++],m=u[f++],p=[];for(let y=0;y<m;y++){const g=e.convertUtf8OffsetToUtf16(u[f++]),v=e.convertUtf8OffsetToUtf16(u[f++]);p[y]={start:g,end:v,length:v-g}}return{index:d,captureIndices:p}}}function Pz(t){return typeof t.instantiator=="function"}function Bz(t){return typeof t.default=="function"}function Uz(t){return typeof t.data<"u"}function $z(t){return typeof Response<"u"&&t instanceof Response}function qz(t){return typeof ArrayBuffer<"u"&&(t instanceof ArrayBuffer||ArrayBuffer.isView(t))||typeof Buffer<"u"&&Buffer.isBuffer?.(t)||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer||typeof Uint32Array<"u"&&t instanceof Uint32Array}let Pu;function Fz(t){if(Pu)return Pu;async function e(){cn=await Mz(async n=>{let r=t;return r=await r,typeof r=="function"&&(r=await r(n)),typeof r=="function"&&(r=await r(n)),Pz(r)?r=await r.instantiator(n):Bz(r)?r=await r.default(n):(Uz(r)&&(r=r.data),$z(r)?typeof WebAssembly.instantiateStreaming=="function"?r=await Vz(r)(n):r=await Hz(r)(n):qz(r)?r=await vm(r)(n):r instanceof WebAssembly.Module?r=await vm(r)(n):"default"in r&&r.default instanceof WebAssembly.Module&&(r=await vm(r.default)(n))),"instance"in r&&(r=r.instance),"exports"in r&&(r=r.exports),r})}return Pu=e(),Pu}function vm(t){return e=>WebAssembly.instantiate(t,e)}function Vz(t){return e=>WebAssembly.instantiateStreaming(t,e)}function Hz(t){return async e=>{const n=await t.arrayBuffer();return WebAssembly.instantiate(n,e)}}async function Gz(t){return t&&await Fz(t),{createScanner(e){return new zz(e.map(n=>typeof n=="string"?n:n.source))},createString(e){return new jE(e)}}}const Kz=wz({langs:Tz,themes:Rz,engine:()=>Gz(z(()=>import("./wasm-CG6Dc4jp.js"),[]))}),{codeToHtml:LE}=kz(Kz,{guessEmbeddedLanguages:z5});function Zz(){const t=Pe.c(2),[e,n]=Z.useState(Qz);let r,s;return t[0]===Symbol.for("react.memo_cache_sentinel")?(r=()=>{const a=window.matchMedia("(prefers-color-scheme: dark)"),l=u=>n(u.matches);return a.addEventListener("change",l),()=>a.removeEventListener("change",l)},s=[],t[0]=r,t[1]=s):(r=t[0],s=t[1]),Z.useEffect(r,s),e}function Qz(){return window.matchMedia("(prefers-color-scheme: dark)").matches}function bd(t,e){const[n,r]=Z.useState(""),s=Zz();return Z.useEffect(()=>{let a=!1;return(async()=>{if(!t){a||r("");return}try{if(e==="text"){const f=t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");a||r(`<pre><code>${f}</code></pre>`);return}const u=await LE(t,{lang:e,theme:s?"github-dark":"github-light"});a||r(u)}catch{const u=t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");a||r(`<pre><code>${u}</code></pre>`)}})(),()=>{a=!0}},[t,e,s]),n}const _d="text-xs [&_pre]:bg-transparent! [&_pre]:p-0! [&_pre]:m-0! [&_pre]:overflow-visible! [&_code]:bg-transparent! [&_code]:block!";function Jz(t){try{const e=JSON.parse(t);return JSON.stringify(e,null,2)}catch{return t}}function Zy(t){const e=Pe.c(5),{content:n}=t,[r,s]=Z.useState("");let a,l;e[0]!==n?(a=()=>{let d=!1;return n.text().then(m=>{d||s(Jz(m))}),()=>{d=!0}},l=[n],e[0]=n,e[1]=a,e[2]=l):(a=e[1],l=e[2]),Z.useEffect(a,l);const u=bd(r,"json");let f;return e[3]!==u?(f=x.jsx("div",{className:_d,dangerouslySetInnerHTML:{__html:u}}),e[3]=u,e[4]=f):f=e[4],f}function Yz(t){try{const n=/(>)(<)(\/*)/g,r=t.replace(n,`$1
$2$3`);let s=0;return r.split(`
`).map(a=>{let l=0;a.match(/.+<\/\w[^>]*>$/)?l=0:a.match(/^<\/\w/)&&s>0?s-=1:a.match(/^<\w[^>]*[^/]>.*$/)?l=1:l=0;const u="  ".repeat(s);return s+=l,u+a}).join(`
`)}catch{return t}}function Wz(t){const e=Pe.c(5),{content:n}=t,[r,s]=Z.useState("");let a,l;e[0]!==n?(a=()=>{let d=!1;return n.text().then(m=>{d||s(Yz(m))}),()=>{d=!0}},l=[n],e[0]=n,e[1]=a,e[2]=l):(a=e[1],l=e[2]),Z.useEffect(a,l);const u=bd(r,"xml");let f;return e[3]!==u?(f=x.jsx("div",{className:_d,dangerouslySetInnerHTML:{__html:u}}),e[3]=u,e[4]=f):f=e[4],f}function Xz(t){const e=Pe.c(5),{content:n}=t,[r,s]=Z.useState("");let a,l;e[0]!==n?(a=()=>{let d=!1;return n.text().then(m=>{d||s(m)}),()=>{d=!0}},l=[n],e[0]=n,e[1]=a,e[2]=l):(a=e[1],l=e[2]),Z.useEffect(a,l);const u=bd(r,"yaml");let f;return e[3]!==u?(f=x.jsx("div",{className:_d,dangerouslySetInnerHTML:{__html:u}}),e[3]=u,e[4]=f):f=e[4],f}function jg(t){const e=Pe.c(5),{content:n}=t,[r,s]=Z.useState("");let a,l;e[0]!==n?(a=()=>{n.text().then(s)},l=[n],e[0]=n,e[1]=a,e[2]=l):(a=e[1],l=e[2]),Z.useEffect(a,l);let u;return e[3]!==r?(u=x.jsx("pre",{className:"text-xs font-mono text-neutral-700 dark:text-neutral-200 whitespace-pre-wrap",children:r}),e[3]=r,e[4]=u):u=e[4],u}function eP(t){const e=Pe.c(6),{content:n}=t,r=tP;let s;e[0]===Symbol.for("react.memo_cache_sentinel")?(s=x.jsx("div",{className:"text-neutral-500 dark:text-neutral-400 text-sm",children:"Binary content"}),e[0]=s):s=e[0];const a=r(n.size);let l;e[1]!==a?(l=x.jsx("div",{className:"text-2xl font-semibold text-neutral-700 dark:text-neutral-200",children:a}),e[1]=a,e[2]=l):l=e[2];let u;e[3]===Symbol.for("react.memo_cache_sentinel")?(u=x.jsx("div",{className:"text-xs text-neutral-400 dark:text-neutral-500",children:"Cannot preview binary data"}),e[3]=u):u=e[3];let f;return e[4]!==l?(f=x.jsx("div",{className:"flex flex-col items-center justify-center p-12 bg-neutral-100 dark:bg-white/5 rounded-lg border border-neutral-200 dark:border-white/10",children:x.jsxs("div",{className:"text-center space-y-2",children:[s,l,u]})}),e[4]=l,e[5]=f):f=e[5],f}function tP(t){return t<1024?`${t} B`:t<1048576?`${(t/1024).toFixed(2)} KB`:`${(t/1048576).toFixed(2)} MB`}function nP(t){const e=Pe.c(4),{content:n}=t;let r;e[0]!==n?(r=URL.createObjectURL(n),e[0]=n,e[1]=r):r=e[1];const s=r;let a;return e[2]!==s?(a=x.jsx("div",{className:"h-full",children:x.jsx("img",{src:s,alt:"Response",className:"max-w-full max-h-full object-contain"})}),e[2]=s,e[3]=a):a=e[3],a}function rP(){const t=Pe.c(2),[e,n]=Z.useState(sP);let r,s;return t[0]===Symbol.for("react.memo_cache_sentinel")?(r=()=>{const a=window.matchMedia("(prefers-color-scheme: dark)"),l=u=>n(u.matches);return a.addEventListener("change",l),()=>a.removeEventListener("change",l)},s=[],t[0]=r,t[1]=s):(r=t[0],s=t[1]),Z.useEffect(r,s),e}function sP(){return window.matchMedia("(prefers-color-scheme: dark)").matches}function iP(t){const e=[],n=t.split(/\n\n+/);for(const r of n){if(!r.trim())continue;const s={data:"",raw:r},a=r.split(`
`);for(const l of a)l.startsWith("id:")?s.id=l.slice(3).trim():l.startsWith("event:")?s.event=l.slice(6).trim():l.startsWith("data:")?s.data+=(s.data?`
`:"")+l.slice(5).trim():l.startsWith("retry:")&&(s.retry=parseInt(l.slice(6).trim(),10));(s.data||s.event||s.id)&&e.push(s)}return e}function aP(t){try{return JSON.parse(t)}catch{return null}}function oP({event:t,index:e,prefersDark:n}){const[r,s]=Z.useState(!0),[a,l]=Z.useState(""),u=Z.useMemo(()=>aP(t.data),[t.data]);return Z.useEffect(()=>{(async()=>{if(u)try{const d=JSON.stringify(u,null,2),m=await LE(d,{lang:"json",theme:n?"github-dark":"github-light"});l(m)}catch{l(`<pre>${JSON.stringify(u,null,2)}</pre>`)}})()},[u,n]),x.jsxs("div",{className:"border border-neutral-200 dark:border-white/10 rounded-lg overflow-hidden",children:[x.jsxs("button",{onClick:()=>s(!r),className:"w-full flex items-center gap-2 px-3 py-2 bg-neutral-50 dark:bg-white/5 hover:bg-neutral-100 dark:hover:bg-white/10 transition-colors",children:[r?x.jsx(li,{className:"w-4 h-4 text-neutral-400"}):x.jsx(fd,{className:"w-4 h-4 text-neutral-400"}),x.jsxs("span",{className:"text-xs font-mono text-neutral-500 dark:text-neutral-400",children:["#",e+1]}),t.event&&x.jsx("span",{className:"px-2 py-0.5 text-xs font-medium bg-blue-100 dark:bg-blue-500/20 text-blue-700 dark:text-blue-300 rounded",children:t.event}),t.id&&x.jsxs("span",{className:"text-xs text-neutral-400 dark:text-neutral-500",children:["id: ",t.id]}),u&&x.jsx("span",{className:"px-1.5 py-0.5 text-[10px] font-medium bg-emerald-100 dark:bg-emerald-500/20 text-emerald-700 dark:text-emerald-300 rounded",children:"JSON"})]}),r&&x.jsx("div",{className:"p-3 bg-white dark:bg-transparent",children:u&&a?x.jsx("div",{className:"text-xs [&_pre]:bg-transparent! [&_pre]:p-0! [&_pre]:m-0! [&_pre]:overflow-visible! [&_code]:bg-transparent! [&_code]:block!",dangerouslySetInnerHTML:{__html:a}}):x.jsx("pre",{className:"text-xs font-mono text-neutral-700 dark:text-neutral-200 whitespace-pre-wrap",children:t.data})})]})}function lP(t){const e=Pe.c(17),{content:n}=t;let r;e[0]===Symbol.for("react.memo_cache_sentinel")?(r=[],e[0]=r):r=e[0];const[s,a]=Z.useState(r),[l,u]=Z.useState(""),f=rP();let d,m;if(e[1]!==n?(d=()=>{n.text().then(w=>{u(w),a(iP(w))})},m=[n],e[1]=n,e[2]=d,e[3]=m):(d=e[2],m=e[3]),Z.useEffect(d,m),s.length===0){let w;return e[4]!==l?(w=x.jsx("pre",{className:"text-xs font-mono text-neutral-700 dark:text-neutral-200 whitespace-pre-wrap",children:l}),e[4]=l,e[5]=w):w=e[5],w}const p=s.length!==1?"s":"";let y;e[6]!==s.length||e[7]!==p?(y=x.jsx("div",{className:"flex items-center gap-2 mb-3",children:x.jsxs("span",{className:"text-xs font-medium text-neutral-500 dark:text-neutral-400",children:[s.length," event",p]})}),e[6]=s.length,e[7]=p,e[8]=y):y=e[8];let g;if(e[9]!==s||e[10]!==f){let w;e[12]!==f?(w=(E,S)=>x.jsx(oP,{event:E,index:S,prefersDark:f},S),e[12]=f,e[13]=w):w=e[13],g=s.map(w),e[9]=s,e[10]=f,e[11]=g}else g=e[11];let v;return e[14]!==y||e[15]!==g?(v=x.jsxs("div",{className:"space-y-2",children:[y,g]}),e[14]=y,e[15]=g,e[16]=v):v=e[16],v}const cP=["video/","audio/","application/pdf","application/octet-stream","application/zip","application/gzip","application/x-tar","application/x-rar","application/x-7z","application/vnd.ms-","application/vnd.openxmlformats","application/x-executable","application/x-sharedlib","application/x-mach-binary","application/wasm","font/"],uP=["image/png","image/jpeg","image/gif","image/webp","image/svg+xml","image/bmp","image/x-icon","image/ico","image/avif","image/apng"],fP=["text/","application/json","application/xml","application/javascript","application/ecmascript","application/x-javascript","application/ld+json","application/manifest+json","application/schema+json","application/x-www-form-urlencoded","application/xhtml+xml","application/rss+xml","application/atom+xml","application/soap+xml","application/x-yaml","application/yaml","+json","+xml"];function dP(t){const e=t["content-type"]?.toLowerCase()||"";return e.includes("text/event-stream")?"sse":uP.some(n=>e.includes(n))?"image":cP.some(n=>e.includes(n))?"binary":e.includes("json")||e.endsWith("+json")?"json":e.includes("xml")||e.endsWith("+xml")?"xml":e.includes("yaml")||e.includes("yml")?"yaml":(fP.some(n=>e.includes(n)),"text")}function hP(t){const e=Pe.c(8),{response:n,viewMode:r}=t,s=r===void 0?"pretty":r;let a;e[0]!==n.headers?(a=dP(n.headers),e[0]=n.headers,e[1]=a):a=e[1];const l=a;let u;e[2]!==l||e[3]!==n.body||e[4]!==s?(u=()=>{if(s==="raw"&&l!=="image"&&l!=="binary")return x.jsx(jg,{content:n.body});switch(l){case"json":return x.jsx(Zy,{content:n.body});case"xml":return x.jsx(Wz,{content:n.body});case"yaml":return x.jsx(Xz,{content:n.body});case"sse":return x.jsx(lP,{content:n.body});case"image":return x.jsx(nP,{content:n.body});case"binary":return x.jsx(eP,{content:n.body});default:return x.jsx(jg,{content:n.body})}},e[2]=l,e[3]=n.body,e[4]=s,e[5]=u):u=e[5];const f=u;let d;return e[6]!==f?(d=x.jsx("div",{className:"h-full flex flex-col overflow-hidden",children:x.jsx("div",{className:"flex-1 min-h-0 overflow-auto",children:f()})}),e[6]=f,e[7]=d):d=e[7],d}let xm=null;async function wm(t){if(xm?.host===t)return xm.data;const e=await fetch(`/proxy/grpc/${t}`);if(!e.ok)throw new Error("Failed to fetch services");const n=await e.json();return xm={host:t,data:n},n}function hw({value:t,onChange:e,placeholder:n,label:r,fetchOptions:s,disabled:a,icon:l}){const[u,f]=Z.useState(!1),[d,m]=Z.useState([]),[p,y]=Z.useState(null),[g,v]=Z.useState(!1),w=Z.useRef(null);Z.useEffect(()=>{const S=C=>{w.current&&!w.current.contains(C.target)&&f(!1)};return document.addEventListener("mousedown",S),()=>document.removeEventListener("mousedown",S)},[]);const E=async()=>{if(!a){f(!0),v(!0),y(null);try{const S=await s();m(S)}catch(S){y(S instanceof Error?S.message:"Failed to fetch"),m([])}finally{v(!1)}}};return x.jsxs("div",{ref:w,className:"relative shrink-0",children:[x.jsxs("button",{type:"button",onClick:E,disabled:a,className:"h-8 px-2 flex items-center gap-2 text-sm transition hover:bg-neutral-50 dark:hover:bg-white/5 disabled:opacity-50 disabled:cursor-not-allowed rounded",children:[l,x.jsx("span",{className:`text-sm whitespace-nowrap ${t?"text-neutral-800 dark:text-neutral-100":"text-neutral-400 dark:text-neutral-500"}`,children:t||n}),g?x.jsx(Rf,{className:"w-3.5 h-3.5 animate-spin text-neutral-400 shrink-0"}):x.jsx(li,{className:`w-3.5 h-3.5 text-neutral-400 shrink-0 transition-transform ${u?"rotate-180":""}`})]}),u&&x.jsx("div",{className:"absolute top-full left-0 mt-1 w-full min-w-48 max-w-md bg-white dark:bg-[#0f0f0f] border border-neutral-200 dark:border-white/10 rounded-lg shadow-xl z-50 overflow-hidden",children:x.jsxs("div",{className:"max-h-64 overflow-y-auto p-1",children:[g&&x.jsxs("div",{className:"px-3 py-4 text-center text-sm text-neutral-500",children:[x.jsx(Rf,{className:"w-4 h-4 animate-spin mx-auto mb-1"}),"Loading..."]}),p&&x.jsx("div",{className:"px-3 py-3 text-sm text-red-500",children:p}),!g&&!p&&d.length===0&&x.jsxs("div",{className:"px-3 py-4 text-center text-sm text-neutral-500",children:["No ",r.toLowerCase()," available"]}),!g&&!p&&d.map(S=>x.jsx("button",{type:"button",onClick:()=>{e(S),f(!1)},className:`w-full px-3 py-2 text-left text-sm rounded-md transition-colors ${S===t?"bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-400":"text-neutral-700 dark:text-neutral-300 hover:bg-neutral-50 dark:hover:bg-white/5"}`,children:S},S))]})})]})}function pP(){const{request:t,setUrl:e,setGrpcMethodSchema:n}=Xt(),r=t?.url??"",s=w=>{const E=w.match(/^grpc:\/\/([^/]*)(?:\/([^/]*)(?:\/([^/]*))?)?$/);return E?{host:E[1]||"",service:E[2]||"",method:E[3]||""}:{host:"",service:"",method:""}},a=(w,E,S)=>w?E?S?`grpc://${w}/${E}/${S}`:`grpc://${w}/${E}`:`grpc://${w}`:"grpc://",{host:l,service:u,method:f}=s(r),d=w=>{e(a(w,"","")),n(void 0)},m=w=>{e(a(l,w,"")),n(void 0)},p=async w=>{e(a(l,u,w));try{const C=(await wm(l)).services.find(T=>T.name===u)?.methods.find(T=>T.name===w);C?.schema?n(C.schema):n(void 0)}catch{n(void 0)}},y=async()=>l?(await wm(l)).services.map(E=>E.name):[],g=async()=>!l||!u?[]:(await wm(l)).services.find(S=>S.name===u)?.methods.map(S=>S.name)??[],v=Math.max(8,l.length||9);return x.jsxs("div",{className:"flex items-center flex-1 min-w-0",children:[x.jsx("input",{type:"text",value:l,onChange:w=>d(w.target.value),placeholder:"host:port",size:v,className:"min-w-20 max-w-full px-2 py-1.5 text-sm bg-transparent text-neutral-800 dark:text-neutral-100 placeholder-neutral-400 dark:placeholder-neutral-600 focus:outline-none"}),x.jsx("span",{className:"text-neutral-300 dark:text-neutral-600 shrink-0",children:"/"}),x.jsx(hw,{value:u,onChange:m,placeholder:"Select service",label:"Service",fetchOptions:y,disabled:!l,icon:x.jsx(H3,{className:`w-4 h-4 shrink-0 ${u?"text-purple-500":"text-neutral-400"}`})}),x.jsx("span",{className:"text-neutral-300 dark:text-neutral-600",children:"/"}),x.jsx(hw,{value:f,onChange:p,placeholder:"Select method",label:"Method",fetchOptions:g,disabled:!l||!u,icon:x.jsx(qD,{className:`w-4 h-4 shrink-0 ${f?"text-amber-500":"text-neutral-400"}`})})]})}const mP=["grpc-timeout","authorization","x-request-id","x-correlation-id"];function Lg(t){if(!t||typeof t!="object")return{};const e=t,r=(Array.isArray(e.type)?e.type[0]:e.type)||(e.properties?"object":e.items?"array":void 0);if(r==="object"){const a={},l=e.properties||{};return Object.keys(l).forEach(u=>{a[u]=Lg(l[u])}),a}if(r==="array"){const a=e.items||{type:"string"};return[Lg(a)]}const s=e.enum;if(s&&s.length>0)return s[0];switch(r){case"integer":case"number":return 0;case"boolean":return!0;case"string":return e.format==="byte"?"":"string";default:return{}}}function gP(){const[t,e]=Z.useState("body"),{request:n,setGrpcBody:r,setGrpcMetadata:s,setVariables:a}=Xt(),l=n?.grpc?.metadata??[],u=n?.grpc?.body??"",f=n?.variables??[],d=n?.grpc?.schema,m=Z.useMemo(()=>{try{return d?Lg(d):void 0}catch{return}},[d]),p=[{id:"body",label:"Message"},{id:"headers",label:"Metadata",count:l.filter(y=>y.key).length}];return x.jsxs("div",{className:"space-y-3",children:[x.jsx("div",{className:"flex items-center gap-2",children:x.jsx("div",{role:"tablist",className:"inline-flex gap-1",children:p.map(y=>x.jsxs("button",{role:"tab",onClick:()=>e(y.id),className:`px-2 py-1 text-[11px] font-medium rounded-md transition-all ${t===y.id?"bg-white dark:bg-white/10 text-neutral-800 dark:text-neutral-100 shadow-sm":"text-neutral-500 dark:text-neutral-400 hover:text-neutral-700 dark:hover:text-neutral-200 hover:bg-neutral-100 dark:hover:bg-white/5"}`,children:[y.label,y.count!==void 0&&y.count>0&&x.jsx("span",{className:"ml-1.5 px-1.5 py-0.5 text-[9px] bg-neutral-200 dark:bg-white/10 text-neutral-600 dark:text-neutral-300 rounded-full",children:y.count})]},y.id))})}),x.jsxs("div",{children:[t==="body"&&x.jsx(zy,{value:u,onChange:r,variables:f,onVariablesChange:a,placeholder:m?JSON.stringify(m,null,2):`{
  "field": "value"
}`,action:m!==void 0?{label:"Insert schema",onClick:()=>r(JSON.stringify(m,null,2))}:void 0}),t==="headers"&&x.jsxs("div",{className:"space-y-2",children:[x.jsx("p",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:"gRPC metadata (sent as headers)"}),x.jsx(Ll,{items:l,onChange:s,keyPlaceholder:"Key",valuePlaceholder:"Value",keySuggestions:mP})]})]})]})}function yP(t){const e=Pe.c(3),{response:n,viewMode:r}=t,s=r===void 0?"pretty":r;let a;return e[0]!==n.body||e[1]!==s?(a=x.jsx("div",{className:"h-full flex flex-col overflow-hidden",children:x.jsx("div",{className:"flex-1 min-h-0 overflow-auto",children:s==="pretty"?x.jsx(Zy,{content:n.body}):x.jsx(jg,{content:n.body})})}),e[0]=n.body,e[1]=s,e[2]=a):a=e[2],a}function pw(t){const e=Pe.c(27),{feature:n,type:r,isSelected:s,onSelect:a}=t,[l,u]=Z.useState(!1);let f;e[0]!==n.schema?(f=n.schema&&Object.keys(n.schema).length>0,e[0]=n.schema,e[1]=f):f=e[1];const d=f,m=`border rounded-md ${s?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-neutral-200 dark:border-white/10"}`;let p;e[2]!==r?(p=r==="tool"?x.jsx(Nf,{className:"w-4 h-4 text-amber-500 shrink-0"}):x.jsx(uo,{className:"w-4 h-4 text-blue-500 shrink-0"}),e[2]=r,e[3]=p):p=e[3];let y;e[4]!==n.name?(y=x.jsx("div",{className:"font-medium text-sm truncate",children:n.name}),e[4]=n.name,e[5]=y):y=e[5];let g;e[6]!==n.description?(g=n.description&&x.jsx("div",{className:"text-xs text-neutral-500 dark:text-neutral-400 truncate",children:n.description}),e[6]=n.description,e[7]=g):g=e[7];let v;e[8]!==y||e[9]!==g?(v=x.jsxs("div",{className:"flex-1 min-w-0",children:[y,g]}),e[8]=y,e[9]=g,e[10]=v):v=e[10];let w;e[11]!==l||e[12]!==d?(w=d&&x.jsx("button",{onClick:T=>{T.stopPropagation(),u(!l)},className:"p-1 hover:bg-neutral-200 dark:hover:bg-white/10 rounded",children:l?x.jsx(li,{className:"w-4 h-4"}):x.jsx(fd,{className:"w-4 h-4"})}),e[11]=l,e[12]=d,e[13]=w):w=e[13];let E;e[14]!==a||e[15]!==p||e[16]!==v||e[17]!==w?(E=x.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 cursor-pointer hover:bg-neutral-50 dark:hover:bg-white/5",onClick:a,children:[p,v,w]}),e[14]=a,e[15]=p,e[16]=v,e[17]=w,e[18]=E):E=e[18];let S;e[19]!==l||e[20]!==n.schema||e[21]!==d?(S=l&&d&&x.jsx("div",{className:"px-3 pb-2 border-t border-neutral-200 dark:border-white/10",children:x.jsx("pre",{className:"text-xs bg-neutral-100 dark:bg-black/20 p-2 rounded mt-2 overflow-auto max-h-48",children:JSON.stringify(n.schema,null,2)})}),e[19]=l,e[20]=n.schema,e[21]=d,e[22]=S):S=e[22];let C;return e[23]!==m||e[24]!==E||e[25]!==S?(C=x.jsxs("div",{className:m,children:[E,S]}),e[23]=m,e[24]=E,e[25]=S,e[26]=C):C=e[26],C}function bP({onSelected:t}){const{request:e,discoverMcpFeatures:n,setMcpTool:r,setMcpResource:s}=Xt(),[a,l]=Z.useState("tools"),[u,f]=Z.useState(null),[d,m]=Z.useState(!1),p=u?.tools||[],y=u?.resources||[],g=u?.error,v=async()=>{m(!0);try{const w=await n();w&&f(w)}finally{m(!1)}};return u?g?x.jsxs("div",{className:"p-4 text-center",children:[x.jsx("p",{className:"text-sm text-red-500 dark:text-red-400 mb-4",children:g}),x.jsxs("button",{onClick:v,disabled:!e.url||d,className:"inline-flex items-center gap-2 px-3 py-1.5 text-sm rounded-md border border-neutral-200 dark:border-white/10 text-neutral-700 dark:text-neutral-100 hover:bg-neutral-50 dark:hover:bg-white/10 disabled:opacity-50 disabled:cursor-not-allowed",children:[x.jsx(Of,{className:"w-4 h-4"}),"Retry"]})]}):x.jsxs("div",{className:"flex flex-col h-full",children:[x.jsxs("div",{className:"flex border-b border-neutral-200 dark:border-white/10 shrink-0",children:[x.jsxs("button",{onClick:()=>l("tools"),className:`flex items-center gap-1.5 px-4 py-2 text-sm font-medium border-b-2 transition-colors ${a==="tools"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-neutral-500 hover:text-neutral-700 dark:text-neutral-400 dark:hover:text-neutral-200"}`,children:[x.jsx(Nf,{className:"w-4 h-4"}),"Tools (",p.length,")"]}),x.jsxs("button",{onClick:()=>l("resources"),className:`flex items-center gap-1.5 px-4 py-2 text-sm font-medium border-b-2 transition-colors ${a==="resources"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-neutral-500 hover:text-neutral-700 dark:text-neutral-400 dark:hover:text-neutral-200"}`,children:[x.jsx(uo,{className:"w-4 h-4"}),"Resources (",y.length,")"]}),x.jsx("div",{className:"flex-1"}),x.jsx("button",{onClick:v,disabled:d,className:"p-2 text-neutral-500 hover:text-neutral-700 dark:text-neutral-400 dark:hover:text-neutral-200 disabled:opacity-40",title:"Refresh features",children:x.jsx(Of,{className:"w-4 h-4"})})]}),x.jsxs("div",{className:"flex-1 overflow-auto p-2 space-y-2",children:[a==="tools"&&x.jsx(x.Fragment,{children:p.length===0?x.jsx("p",{className:"text-sm text-neutral-500 dark:text-neutral-400 text-center py-4",children:"No tools available"}):p.map(w=>x.jsx(pw,{feature:w,type:"tool",isSelected:e.mcp?.tool?.name===w.name,onSelect:()=>{r({name:w.name,arguments:"{}",schema:w.schema}),t?.()}},w.name))}),a==="resources"&&x.jsx(x.Fragment,{children:y.length===0?x.jsx("p",{className:"text-sm text-neutral-500 dark:text-neutral-400 text-center py-4",children:"No resources available"}):y.map(w=>x.jsx(pw,{feature:w,type:"resource",isSelected:e.mcp?.resource?.uri===(w.schema?.uri||w.name),onSelect:()=>{const E=w.schema?.uri||w.name;s({uri:E}),t?.()}},w.name))})]}),(e.mcp?.tool||e.mcp?.resource)&&x.jsx("div",{className:"border-t border-neutral-200 dark:border-white/10 p-2 shrink-0",children:x.jsxs("div",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:["Selected: ",e.mcp?.tool?`Tool: ${e.mcp.tool.name}`:`Resource: ${e.mcp?.resource?.uri}`]})})]}):x.jsxs("div",{className:"p-4 text-center",children:[x.jsx("p",{className:"text-sm text-neutral-500 dark:text-neutral-400 mb-4",children:"Enter an MCP server URL and discover its features"}),x.jsxs("button",{onClick:v,disabled:!e.url||d,className:"inline-flex items-center gap-2 px-3 py-1.5 text-sm rounded-md border border-neutral-200 dark:border-white/10 text-neutral-700 dark:text-neutral-100 hover:bg-neutral-50 dark:hover:bg-white/10 disabled:opacity-50 disabled:cursor-not-allowed",children:[x.jsx(kD,{className:"w-4 h-4"}),"Discover"]})]})}function _P(){const t=Pe.c(32),{request:e,setUrl:n}=Xt(),r=e?.url??"",s=e?.mcp?.tool?.name,a=e?.mcp?.resource?.uri,[l,u]=Z.useState(!1),f=Z.useRef(null);let d,m;t[0]!==l?(d=()=>{if(!l)return;const ne=me=>{f.current&&!f.current.contains(me.target)&&u(!1)};return document.addEventListener("mousedown",ne),()=>document.removeEventListener("mousedown",ne)},m=[l],t[0]=l,t[1]=d,t[2]=m):(d=t[1],m=t[2]),Z.useEffect(d,m);let p;t[3]===Symbol.for("react.memo_cache_sentinel")?(p=()=>{u(!0)},t[3]=p):p=t[3];const y=p,g=s||a||"Select feature",v=Math.max(12,r.length||14);let w;t[4]!==n?(w=ne=>n(ne.target.value),t[4]=n,t[5]=w):w=t[5];let E;t[6]!==w||t[7]!==r||t[8]!==v?(E=x.jsx("input",{type:"text",value:r,onChange:w,placeholder:"MCP server URL",size:v,className:"min-w-24 max-w-full px-2 py-1.5 bg-transparent text-neutral-800 dark:text-neutral-100 text-sm placeholder-neutral-400 dark:placeholder-neutral-600 focus:outline-none"}),t[6]=w,t[7]=r,t[8]=v,t[9]=E):E=t[9];let S;t[10]===Symbol.for("react.memo_cache_sentinel")?(S=x.jsx("span",{className:"text-neutral-300 dark:text-neutral-600 shrink-0",children:"/"}),t[10]=S):S=t[10];const C=!r;let T;t[11]!==a||t[12]!==s?(T=s?x.jsx(Nf,{className:"w-4 h-4 text-amber-500 shrink-0"}):a?x.jsx(uo,{className:"w-4 h-4 text-blue-500 shrink-0"}):x.jsx(Nf,{className:"w-4 h-4 text-neutral-400 shrink-0"}),t[11]=a,t[12]=s,t[13]=T):T=t[13];const M=`text-sm whitespace-nowrap ${s||a?"text-neutral-800 dark:text-neutral-100":"text-neutral-400 dark:text-neutral-500"}`;let I;t[14]!==g||t[15]!==M?(I=x.jsx("span",{className:M,children:g}),t[14]=g,t[15]=M,t[16]=I):I=t[16];const R=`w-3.5 h-3.5 text-neutral-400 shrink-0 transition-transform ${l?"rotate-180":""}`;let U;t[17]!==R?(U=x.jsx(li,{className:R}),t[17]=R,t[18]=U):U=t[18];let q;t[19]!==U||t[20]!==C||t[21]!==T||t[22]!==I?(q=x.jsxs("button",{type:"button",onClick:y,disabled:C,className:"h-8 px-2 flex items-center gap-2 text-sm transition hover:bg-neutral-50 dark:hover:bg-white/5 disabled:opacity-50 disabled:cursor-not-allowed rounded",children:[T,I,U]}),t[19]=U,t[20]=C,t[21]=T,t[22]=I,t[23]=q):q=t[23];let K;t[24]!==l?(K=l&&x.jsx("div",{className:"absolute left-0 z-50 mt-2 w-[min(640px,calc(100vw-4rem))] max-h-[70vh] bg-white dark:bg-[#0f0f0f] border border-neutral-200 dark:border-white/10 rounded-lg shadow-xl overflow-hidden",children:x.jsx("div",{className:"h-105",children:x.jsx(bP,{onSelected:()=>u(!1)})})}),t[24]=l,t[25]=K):K=t[25];let j;t[26]!==q||t[27]!==K?(j=x.jsxs("div",{className:"relative shrink-0",ref:f,children:[q,K]}),t[26]=q,t[27]=K,t[28]=j):j=t[28];let J;return t[29]!==j||t[30]!==E?(J=x.jsxs("div",{className:"flex items-center flex-1 min-w-0",children:[E,S,j]}),t[29]=j,t[30]=E,t[31]=J):J=t[31],J}const vP=["Authorization","X-API-Key","X-Request-ID"];function zg(t){if(!t||typeof t!="object")return{};const e=t,r=(Array.isArray(e.type)?e.type[0]:e.type)||(e.properties?"object":e.items?"array":void 0);if(r==="object"){const a={},l=e.properties||{};return Object.keys(l).forEach(u=>{a[u]=zg(l[u])}),a}if(r==="array"){const a=e.items||{type:"string"};return[zg(a)]}const s=e.enum;if(s&&s.length>0)return s[0];switch(r){case"integer":case"number":return 0;case"boolean":return!0;case"string":return e.format==="byte"?"":"string";default:return{}}}function xP(){const[t,e]=Z.useState("body"),{request:n,setMcpTool:r,setMcpHeaders:s,setVariables:a}=Xt(),l=n?.variables??[],u=n?.mcp?.headers??[],f=n?.mcp?.tool?.arguments??"{}",d=n?.mcp?.tool,m=n?.mcp?.resource,p=d?.schema,y=Z.useMemo(()=>{try{return p?zg(p):void 0}catch{return}},[p]),g=[{id:"headers",label:"Headers",count:u.filter(v=>v.key).length},{id:"body",label:"Body"}];return x.jsxs("div",{className:"space-y-3",children:[x.jsx("div",{className:"flex items-center gap-2",children:x.jsx("div",{role:"tablist",className:"inline-flex gap-1",children:g.map(v=>x.jsxs("button",{role:"tab",onClick:()=>e(v.id),className:`px-2 py-1 text-[11px] font-medium rounded-md transition-all ${t===v.id?"bg-white dark:bg-white/10 text-neutral-800 dark:text-neutral-100 shadow-sm":"text-neutral-500 dark:text-neutral-400 hover:text-neutral-700 dark:hover:text-neutral-200 hover:bg-neutral-100 dark:hover:bg-white/5"}`,children:[v.label,v.count!==void 0&&v.count>0&&x.jsx("span",{className:"ml-1.5 px-1.5 py-0.5 text-[9px] bg-neutral-200 dark:bg-white/10 text-neutral-600 dark:text-neutral-300 rounded-full",children:v.count})]},v.id))})}),x.jsxs("div",{children:[t==="headers"&&x.jsx(Ll,{items:u,onChange:s,keyPlaceholder:"Header",valuePlaceholder:"Value",keySuggestions:vP}),t==="body"&&(d?x.jsx(zy,{value:f,onChange:v=>r({name:d.name,arguments:v,schema:d.schema}),variables:l,onVariablesChange:a,placeholder:y?JSON.stringify(y,null,2):`{
  "key": "value"
}`,action:y!==void 0?{label:"Fill with schema",onClick:()=>r({name:d.name,arguments:JSON.stringify(y,null,2),schema:d.schema})}:void 0}):m?x.jsx("div",{className:"py-8 text-center text-sm text-neutral-400 dark:text-neutral-500",children:"Resources are read-only; no arguments required."}):x.jsx("div",{className:"py-8 text-center text-sm text-neutral-400 dark:text-neutral-500",children:"Select a tool or resource from the URL bar."}))]})]})}function Qy(t){const e=t.trim();if(e.startsWith("{")&&e.endsWith("}")||e.startsWith("[")&&e.endsWith("]"))try{return JSON.parse(e),"json"}catch{}return e.startsWith("<")&&e.endsWith(">")&&(/<\w+[^>]*>[\s\S]*<\/\w+>/.test(e)||/<\w+[^>]*\/>/.test(e))?"xml":"text"}function wP(t){try{const e=JSON.parse(t);return JSON.stringify(e,null,2)}catch{return t}}function SP(t){try{const n=/(>)(<)(\/*)/g,r=t.replace(n,`$1
$2$3`);let s=0;return r.split(`
`).map(a=>{let l=0;a.match(/.+<\/\w[^>]*>$/)?l=0:a.match(/^<\/\w/)&&s>0?s-=1:a.match(/^<\w[^>]*[^/]>.*$/)?l=1:l=0;const u="  ".repeat(s);return s+=l,u+a}).join(`
`)}catch{return t}}function zE(t){const e=Pe.c(10),{type:n,language:r}=t;let s;e[0]!==n?(s=()=>{switch(n){case"text":return x.jsx(zD,{size:12});case"image":return x.jsx(uD,{size:12});case"audio":return x.jsx(pD,{size:12});case"resource":return x.jsx(wg,{size:12});case"resource_link":return x.jsx(wg,{size:12});default:return x.jsx(uo,{size:12})}},e[0]=n,e[1]=s):s=e[1];const a=s;let l;e[2]!==r||e[3]!==n?(l=r&&r!=="text"?r.toUpperCase():n.charAt(0).toUpperCase()+n.slice(1),e[2]=r,e[3]=n,e[4]=l):l=e[4];const u=l;let f;e[5]!==a?(f=a(),e[5]=a,e[6]=f):f=e[6];let d;return e[7]!==u||e[8]!==f?(d=x.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 text-xs font-medium rounded bg-blue-100 dark:bg-blue-500/20 text-blue-700 dark:text-blue-300",children:[f,u]}),e[7]=u,e[8]=f,e[9]=d):d=e[9],d}function Pg(t){const e=Pe.c(10),{text:n,className:r}=t,s=r===void 0?"":r;let a;e[0]!==n?(a=Qy(n),e[0]=n,e[1]=a):a=e[1];const l=a;let u;e[2]!==l||e[3]!==n?(u=l==="json"?wP(n):l==="xml"?SP(n):n,e[2]=l,e[3]=n,e[4]=u):u=e[4];const d=bd(u,l);let m;e[5]!==d?(m=x.jsx("div",{className:_d,dangerouslySetInnerHTML:{__html:d}}),e[5]=d,e[6]=m):m=e[6];let p;return e[7]!==s||e[8]!==m?(p=x.jsx("div",{className:s,children:m}),e[7]=s,e[8]=m,e[9]=p):p=e[9],p}function kP(t){const e=Pe.c(38),{content:n,index:r,isError:s}=t,[a,l]=Z.useState(!0);let u;e[0]!==n.mimeType||e[1]!==n.resource?.uri||e[2]!==n.text||e[3]!==n.type||e[4]!==n.uri?(u=(()=>{if(n.type==="text"){const I=Qy(n.text||"");return{type:"text",language:I,label:I!=="text"?I.toUpperCase():"Text"}}return n.type==="image"?{type:"image",label:"Image",detail:n.mimeType}:n.type==="audio"?{type:"audio",label:"Audio",detail:n.mimeType}:n.type==="resource"?{type:"resource",label:"Resource",detail:n.resource?.uri}:n.type==="resource_link"?{type:"resource_link",label:"Resource Link",detail:n.uri}:{type:"unknown",label:"Unknown"}})(),e[0]=n.mimeType,e[1]=n.resource?.uri,e[2]=n.text,e[3]=n.type,e[4]=n.uri,e[5]=u):u=e[5];const f=u,d=`border rounded-lg overflow-hidden ${s?"border-red-200 dark:border-red-800/50":"border-neutral-200 dark:border-white/10"}`;let m;e[6]!==a?(m=()=>l(!a),e[6]=a,e[7]=m):m=e[7];const p=`w-full flex items-center gap-2 px-3 py-2 transition-colors ${s?"bg-red-50/50 dark:bg-red-900/10 hover:bg-red-100/50 dark:hover:bg-red-900/20":"bg-neutral-50 dark:bg-white/5 hover:bg-neutral-100 dark:hover:bg-white/10"}`;let y;e[8]!==a?(y=a?x.jsx(li,{className:"w-4 h-4 text-neutral-400"}):x.jsx(fd,{className:"w-4 h-4 text-neutral-400"}),e[8]=a,e[9]=y):y=e[9];const g=r+1;let v;e[10]!==g?(v=x.jsxs("span",{className:"text-xs font-mono text-neutral-500 dark:text-neutral-400",children:["#",g]}),e[10]=g,e[11]=v):v=e[11];let w;e[12]!==f.language||e[13]!==f.type?(w=x.jsx(zE,{type:f.type,language:f.language}),e[12]=f.language,e[13]=f.type,e[14]=w):w=e[14];let E;e[15]!==f.detail?(E=f.detail&&x.jsx("span",{className:"text-xs text-neutral-500 dark:text-neutral-400 font-mono truncate",children:f.detail}),e[15]=f.detail,e[16]=E):E=e[16];let S;e[17]!==m||e[18]!==p||e[19]!==y||e[20]!==v||e[21]!==w||e[22]!==E?(S=x.jsxs("button",{onClick:m,className:p,children:[y,v,w,E]}),e[17]=m,e[18]=p,e[19]=y,e[20]=v,e[21]=w,e[22]=E,e[23]=S):S=e[23];let C;e[24]!==n.data||e[25]!==n.description||e[26]!==n.mimeType||e[27]!==n.name||e[28]!==n.resource||e[29]!==n.text||e[30]!==n.type||e[31]!==n.uri||e[32]!==a?(C=a&&x.jsxs("div",{className:"p-3 bg-white dark:bg-transparent",children:[n.type==="text"&&n.text&&x.jsx(Pg,{text:n.text}),n.type==="image"&&n.data&&x.jsx("img",{src:n.data.startsWith("data:")?n.data:`data:${n.mimeType||"image/png"};base64,${n.data}`,alt:"MCP Image Response",className:"max-w-full h-auto rounded"}),n.type==="audio"&&n.data&&x.jsx("audio",{controls:!0,className:"w-full",children:x.jsx("source",{src:n.data.startsWith("data:")?n.data:`data:${n.mimeType||"audio/wav"};base64,${n.data}`,type:n.mimeType||"audio/wav"})}),n.type==="resource"&&n.resource&&x.jsxs("div",{className:"space-y-2",children:[n.resource.text&&x.jsx(Pg,{text:n.resource.text}),n.resource.blob&&n.resource.mimeType?.startsWith("image/")&&x.jsx("img",{src:`data:${n.resource.mimeType};base64,${n.resource.blob}`,alt:n.resource.uri,className:"max-w-full h-auto rounded"}),n.resource.blob&&n.resource.mimeType?.startsWith("audio/")&&x.jsx("audio",{controls:!0,className:"w-full",children:x.jsx("source",{src:`data:${n.resource.mimeType};base64,${n.resource.blob}`,type:n.resource.mimeType})}),n.resource.blob&&!n.resource.mimeType?.startsWith("image/")&&!n.resource.mimeType?.startsWith("audio/")&&x.jsxs("div",{className:"text-sm text-neutral-600 dark:text-neutral-300",children:["Binary content (",Math.round(n.resource.blob.length*.75)," bytes)"]})]}),n.type==="resource_link"&&x.jsxs("div",{className:"space-y-2",children:[n.name&&x.jsx("div",{className:"font-medium text-neutral-900 dark:text-white",children:n.name}),n.description&&x.jsx("div",{className:"text-sm text-neutral-600 dark:text-neutral-300",children:n.description}),n.uri&&x.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[x.jsx(wg,{size:14,className:"text-neutral-400 shrink-0"}),x.jsx("a",{href:n.uri,target:"_blank",rel:"noopener noreferrer",className:"font-mono text-blue-600 dark:text-blue-400 hover:underline break-all",children:n.uri})]}),n.mimeType&&x.jsx("div",{className:"text-xs text-neutral-500 dark:text-neutral-400 font-mono",children:n.mimeType})]})]}),e[24]=n.data,e[25]=n.description,e[26]=n.mimeType,e[27]=n.name,e[28]=n.resource,e[29]=n.text,e[30]=n.type,e[31]=n.uri,e[32]=a,e[33]=C):C=e[33];let T;return e[34]!==S||e[35]!==C||e[36]!==d?(T=x.jsxs("div",{className:d,children:[S,C]}),e[34]=S,e[35]=C,e[36]=d,e[37]=T):T=e[37],T}function EP(t){const e=Pe.c(29),{content:n,index:r}=t,[s,a]=Z.useState(!0);let l;e[0]!==n.blob||e[1]!==n.mimeType||e[2]!==n.text?(l=(()=>{if(n.text){const C=Qy(n.text);return{label:C!=="text"?C.toUpperCase():"Text",language:C}}return n.blob&&n.mimeType?.startsWith("image/")?{label:"Image",detail:n.mimeType}:n.blob&&n.mimeType?.startsWith("audio/")?{label:"Audio",detail:n.mimeType}:{label:"Binary",detail:n.mimeType}})(),e[0]=n.blob,e[1]=n.mimeType,e[2]=n.text,e[3]=l):l=e[3];const u=l;let f;e[4]!==s?(f=()=>a(!s),e[4]=s,e[5]=f):f=e[5];let d;e[6]!==s?(d=s?x.jsx(li,{className:"w-4 h-4 text-neutral-400"}):x.jsx(fd,{className:"w-4 h-4 text-neutral-400"}),e[6]=s,e[7]=d):d=e[7];const m=r+1;let p;e[8]!==m?(p=x.jsxs("span",{className:"text-xs font-mono text-neutral-500 dark:text-neutral-400",children:["#",m]}),e[8]=m,e[9]=p):p=e[9];let y;e[10]!==u.language?(y=x.jsx(zE,{type:"resource",language:u.language}),e[10]=u.language,e[11]=y):y=e[11];let g;e[12]!==n.uri?(g=x.jsx("span",{className:"text-xs text-neutral-500 dark:text-neutral-400 font-mono truncate",title:n.uri,children:n.uri}),e[12]=n.uri,e[13]=g):g=e[13];let v;e[14]!==f||e[15]!==d||e[16]!==p||e[17]!==y||e[18]!==g?(v=x.jsxs("button",{onClick:f,className:"w-full flex items-center gap-2 px-3 py-2 bg-neutral-50 dark:bg-white/5 hover:bg-neutral-100 dark:hover:bg-white/10 transition-colors",children:[d,p,y,g]}),e[14]=f,e[15]=d,e[16]=p,e[17]=y,e[18]=g,e[19]=v):v=e[19];let w;e[20]!==n.blob||e[21]!==n.mimeType||e[22]!==n.text||e[23]!==n.uri||e[24]!==s?(w=s&&x.jsxs("div",{className:"p-3 bg-white dark:bg-transparent",children:[n.text&&x.jsx(Pg,{text:n.text}),n.blob&&n.mimeType?.startsWith("image/")&&x.jsx("img",{src:`data:${n.mimeType};base64,${n.blob}`,alt:n.uri,className:"max-w-full h-auto rounded"}),n.blob&&n.mimeType?.startsWith("audio/")&&x.jsx("audio",{controls:!0,className:"w-full",children:x.jsx("source",{src:`data:${n.mimeType};base64,${n.blob}`,type:n.mimeType})}),n.blob&&!n.mimeType?.startsWith("image/")&&!n.mimeType?.startsWith("audio/")&&x.jsxs("div",{className:"text-sm text-neutral-600 dark:text-neutral-300",children:["Binary content (",Math.round(n.blob.length*.75)," bytes)"]}),!n.text&&!n.blob&&x.jsx("div",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:"Empty resource"})]}),e[20]=n.blob,e[21]=n.mimeType,e[22]=n.text,e[23]=n.uri,e[24]=s,e[25]=w):w=e[25];let E;return e[26]!==v||e[27]!==w?(E=x.jsxs("div",{className:"border border-neutral-200 dark:border-white/10 rounded-lg overflow-hidden",children:[v,w]}),e[26]=v,e[27]=w,e[28]=E):E=e[28],E}function CP(t){const e=Pe.c(26),{toolResponse:n,resourceResponse:r}=t;if(n){const s=n.isError,a=n.content.length;let l;e[0]!==s?(l=s&&x.jsxs("div",{className:"flex items-center gap-2 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg px-4 py-3 mb-3",children:[x.jsx(Bk,{className:"text-red-500 dark:text-red-400 shrink-0",size:18}),x.jsx("span",{className:"text-red-700 dark:text-red-400 text-sm font-medium",children:"Tool returned an error"})]}),e[0]=s,e[1]=l):l=e[1];let u;e[2]!==a?(u=a>0&&x.jsx("div",{className:"flex items-center gap-2 mb-3",children:x.jsxs("span",{className:"text-xs font-medium text-neutral-500 dark:text-neutral-400",children:[a," item",a!==1?"s":""]})}),e[2]=a,e[3]=u):u=e[3];let f;if(e[4]!==s||e[5]!==n.content){let p;e[7]!==s?(p=(y,g)=>x.jsx(kP,{content:y,index:g,isError:s},g),e[7]=s,e[8]=p):p=e[8],f=n.content.map(p),e[4]=s,e[5]=n.content,e[6]=f}else f=e[6];let d;e[9]!==a?(d=a===0&&x.jsx("div",{className:"text-sm text-neutral-500 dark:text-neutral-400 text-center py-4",children:"No content returned"}),e[9]=a,e[10]=d):d=e[10];let m;return e[11]!==l||e[12]!==u||e[13]!==f||e[14]!==d?(m=x.jsxs("div",{className:"space-y-2",children:[l,u,f,d]}),e[11]=l,e[12]=u,e[13]=f,e[14]=d,e[15]=m):m=e[15],m}if(r){const s=r.contents.length;let a;e[16]!==s?(a=s>0&&x.jsx("div",{className:"flex items-center gap-2 mb-3",children:x.jsxs("span",{className:"text-xs font-medium text-neutral-500 dark:text-neutral-400",children:[s," resource",s!==1?"s":""]})}),e[16]=s,e[17]=a):a=e[17];let l;e[18]!==r.contents?(l=r.contents.map(TP),e[18]=r.contents,e[19]=l):l=e[19];let u;e[20]!==s?(u=s===0&&x.jsx("div",{className:"text-sm text-neutral-500 dark:text-neutral-400 text-center py-4",children:"No content returned"}),e[20]=s,e[21]=u):u=e[21];let f;return e[22]!==a||e[23]!==l||e[24]!==u?(f=x.jsxs("div",{className:"space-y-2",children:[a,l,u]}),e[22]=a,e[23]=l,e[24]=u,e[25]=f):f=e[25],f}return null}function TP(t,e){return x.jsx(EP,{content:t,index:e},e)}function AP(t){const e=Pe.c(9),{toolResponse:n,resourceResponse:r,viewMode:s}=t,a=s===void 0?"pretty":s,l=n||r;let u;e[0]!==l?(u=l?new Blob([JSON.stringify(l,null,2)],{type:"application/json"}):null,e[0]=l,e[1]=u):u=e[1];const f=u;let d;e[2]!==f||e[3]!==r||e[4]!==n||e[5]!==a?(d=a==="pretty"?x.jsx(CP,{toolResponse:n,resourceResponse:r}):f&&x.jsx(Zy,{content:f}),e[2]=f,e[3]=r,e[4]=n,e[5]=a,e[6]=d):d=e[6];let m;return e[7]!==d?(m=x.jsx("div",{className:"h-full flex flex-col overflow-hidden",children:x.jsx("div",{className:"flex-1 min-h-0 overflow-auto",children:d})}),e[7]=d,e[8]=m):m=e[8],m}function RP(){const{request:t,setUrl:e,setOpenAIModel:n}=Xt(),r=t?.url??"",s=t?.openai?.model??"",[a,l]=Z.useState([]),[u,f]=Z.useState(!1),[d,m]=Z.useState(!1),[p,y]=Z.useState(null),g=Z.useRef(null);Z.useEffect(()=>{if(!u)return;const C=T=>{g.current&&!g.current.contains(T.target)&&f(!1)};return document.addEventListener("mousedown",C),()=>document.removeEventListener("mousedown",C)},[u]);const v=Z.useCallback(async()=>{if(r){m(!0),y(null);try{const C=r.replace(/\/$/,""),T=await fetch(`${C}/v1/models`);if(!T.ok)throw new Error(`HTTP ${T.status}`);const I=((await T.json()).data||[]).map(R=>R.id).sort();l(I),!s&&I.length>0&&n(I[0])}catch(C){const T=C instanceof Error?C.message:"Failed to fetch models";y(T),l([])}finally{m(!1)}}},[r,s,n]);Z.useEffect(()=>{if(!r)return;const C=setTimeout(()=>{v()},500);return()=>clearTimeout(C)},[r]);const w=()=>{f(!0)},E=C=>{n(C),f(!1)},S=Math.max(12,r.length||20);return x.jsxs("div",{className:"flex items-center flex-1 min-w-0",children:[x.jsx("input",{type:"text",value:r,onChange:C=>e(C.target.value),placeholder:"OpenAI API URL (e.g., https://api.openai.com)",size:S,className:"min-w-24 max-w-full px-2 py-1.5 bg-transparent text-neutral-800 dark:text-neutral-100 text-sm placeholder-neutral-400 dark:placeholder-neutral-600 focus:outline-none"}),x.jsx("span",{className:"text-neutral-300 dark:text-neutral-600 shrink-0",children:"/"}),x.jsxs("div",{className:"relative shrink-0",ref:g,children:[x.jsxs("button",{type:"button",onClick:w,disabled:!r,className:"h-8 px-2 flex items-center gap-2 text-sm transition hover:bg-neutral-50 dark:hover:bg-white/5 disabled:opacity-50 disabled:cursor-not-allowed rounded",children:[x.jsx(nD,{className:`w-4 h-4 shrink-0 ${s?"text-violet-500":"text-neutral-400"}`}),x.jsx("span",{className:`text-sm whitespace-nowrap ${s?"text-neutral-800 dark:text-neutral-100":"text-neutral-400 dark:text-neutral-500"}`,children:s||"Select model"}),d?x.jsx(Of,{className:"w-3.5 h-3.5 text-neutral-400 shrink-0 animate-spin"}):x.jsx(li,{className:`w-3.5 h-3.5 text-neutral-400 shrink-0 transition-transform ${u?"rotate-180":""}`})]}),u&&x.jsxs("div",{className:"absolute left-0 z-50 mt-2 w-64 max-h-80 bg-white dark:bg-[#0f0f0f] border border-neutral-200 dark:border-white/10 rounded-lg shadow-xl overflow-hidden",children:[x.jsxs("div",{className:"p-2 border-b border-neutral-200 dark:border-white/10 flex items-center justify-between",children:[x.jsxs("span",{className:"text-xs font-medium text-neutral-500 dark:text-neutral-400",children:["Models (",a.length,")"]}),x.jsx("button",{type:"button",onClick:C=>{C.stopPropagation(),v()},disabled:d,className:"p-1 hover:bg-neutral-100 dark:hover:bg-white/10 rounded transition-colors disabled:opacity-50",title:"Refresh models",children:x.jsx(Of,{className:`w-3.5 h-3.5 text-neutral-400 ${d?"animate-spin":""}`})})]}),x.jsx("div",{className:"overflow-y-auto max-h-64",children:p?x.jsx("div",{className:"p-3 text-sm text-red-500 dark:text-red-400",children:p}):a.length===0?x.jsx("div",{className:"p-3 text-sm text-neutral-400 dark:text-neutral-500",children:d?"Loading models...":"No models available"}):a.map(C=>x.jsx("button",{type:"button",onClick:()=>E(C),className:`w-full px-3 py-2 text-left text-sm transition-colors ${s===C?"bg-violet-50 dark:bg-violet-500/10 text-violet-700 dark:text-violet-300":"text-neutral-700 dark:text-neutral-300 hover:bg-neutral-50 dark:hover:bg-white/5"}`,children:C},C))})]})]})]})}function OP(){return Math.random().toString(36).substring(2,9)}function mw(){return{id:OP(),role:"user",content:[{type:"text",text:""}]}}function NP(t){if(t.content.length===0)return!0;const e=t.content[0];switch(e.type){case"text":return!e.text;case"file":return!e.data}}function IP(){const t=Pe.c(16),{request:e,setOpenAIChatInput:n}=Xt();let r;t[0]===Symbol.for("react.memo_cache_sentinel")?(r={},t[0]=r):r=t[0];const s=Z.useRef(r);let a,l;if(t[1]!==e?.openai?.chat?.input||t[2]!==n){const d=e?.openai?.chat?.input??[],m=(M,I)=>{const R=d.map(q=>q.id===M?{...q,...I}:q),U=R[R.length-1];U&&!NP(U)&&R.push(mw()),n(R)};let p;t[5]!==m?(p=(M,I)=>{m(M,{content:[I]})},t[5]=m,t[6]=p):p=t[6];const y=p,g=M=>{if(d.length===1){n([mw()]);return}n(d.filter(I=>I.id!==M))};let v;t[7]!==y?(v=(M,I)=>{const R=I.target.files?.[0];if(I.target.value="",!R)return;const U=new FileReader;U.onload=()=>{const q=U.result,K=q.split(",")[1];R.type.startsWith("image/")?y(M,{type:"file",data:q}):y(M,{type:"file",name:R.name,data:K})},U.readAsDataURL(R)},t[7]=y,t[8]=v):v=t[8];const w=v;let E;t[9]!==y?(E=(M,I)=>{e:switch(I){case"text":{y(M,{type:"text",text:""});break e}case"file":y(M,{type:"file",data:""})}},t[9]=y,t[10]=E):E=t[10];const S=E,C=M=>{const I=d.find(U=>U.id===M);if(!I)return;I.content[0].type==="file"&&y(M,{type:"file",data:""})},T=M=>{const I=M.content[0];switch(I.type){case"text":return x.jsx("input",{type:"text",value:I.text,onChange:R=>y(M.id,{type:"text",text:R.target.value}),placeholder:"Message content...",className:"w-full px-2 py-1 bg-white dark:bg-white/5 border border-neutral-300 dark:border-white/10 rounded text-xs text-neutral-800 dark:text-neutral-100 placeholder-neutral-400 dark:placeholder-neutral-500 focus:outline-none focus:border-neutral-400 dark:focus:border-white/20 transition-colors"});case"file":return I.data?x.jsxs("div",{className:"flex items-center gap-2 px-2 py-1 bg-white dark:bg-white/5 border border-neutral-300 dark:border-white/10 rounded",children:[I.data.startsWith("data:image/")?x.jsx("img",{src:I.data,alt:"Uploaded",className:"w-5 h-5 object-cover rounded"}):x.jsx(uo,{className:"w-3.5 h-3.5 text-violet-500 shrink-0"}),x.jsx("span",{className:"text-xs text-neutral-600 dark:text-neutral-400 truncate flex-1",children:I.name||(I.data.startsWith("data:image/")?"Image":"File")}),!I.data.startsWith("data:image/")&&x.jsxs("span",{className:"text-[10px] text-neutral-400",children:["(",Math.round(I.data.length*.75/1024),"KB)"]}),x.jsx("button",{type:"button",onClick:()=>C(M.id),className:"p-0.5 hover:bg-neutral-100 dark:hover:bg-white/10 rounded transition-colors",children:x.jsx(dd,{className:"w-3 h-3 text-neutral-400"})})]}):x.jsxs("label",{className:"flex items-center gap-2 px-2 py-1 bg-white dark:bg-white/5 border border-dashed border-neutral-300 dark:border-white/20 rounded cursor-pointer hover:bg-neutral-50 dark:hover:bg-white/10 transition-colors",children:[x.jsx(jy,{className:"w-3.5 h-3.5 text-neutral-400"}),x.jsx("span",{className:"text-xs text-neutral-400",children:"Upload file..."}),x.jsx("input",{ref:R=>{s.current[M.id]=R},type:"file",accept:"image/*,.pdf,.doc,.docx,.txt",onChange:R=>w(M.id,R),className:"hidden"})]})}};l="w-full",a=d.map(M=>x.jsxs("tr",{className:"border-b border-neutral-100 dark:border-white/5 last:border-0",children:[x.jsx("td",{className:"w-24 px-1.5 py-1.5",children:x.jsxs("select",{value:M.role,onChange:I=>m(M.id,{role:I.target.value}),className:"w-full px-2 py-1 bg-white dark:bg-white/5 border border-neutral-300 dark:border-white/10 rounded text-xs text-neutral-700 dark:text-neutral-300 focus:outline-none focus:border-neutral-400 dark:focus:border-white/20 transition-colors",children:[x.jsx("option",{value:"system",children:"System"}),x.jsx("option",{value:"user",children:"User"}),x.jsx("option",{value:"assistant",children:"Assistant"})]})}),x.jsx("td",{className:"w-20 px-1.5 py-1.5",children:x.jsxs("select",{value:M.content[0]?.type??"text",onChange:I=>S(M.id,I.target.value),className:"w-full px-2 py-1 bg-white dark:bg-white/5 border border-neutral-300 dark:border-white/10 rounded text-xs text-neutral-700 dark:text-neutral-300 focus:outline-none focus:border-neutral-400 dark:focus:border-white/20 transition-colors",children:[x.jsx("option",{value:"text",children:"Text"}),x.jsx("option",{value:"file",children:"File"})]})}),x.jsx("td",{className:"px-1.5 py-1.5",children:T(M)}),x.jsx("td",{className:"w-8 pr-1.5 py-1.5",children:x.jsx("button",{type:"button",onClick:()=>g(M.id),className:"p-1 rounded hover:bg-red-50 dark:hover:bg-red-500/10 transition-colors text-neutral-300 dark:text-neutral-600 hover:text-red-500",title:"Remove message",children:x.jsx(Ki,{className:"w-3.5 h-3.5"})})})]},M.id)),t[1]=e?.openai?.chat?.input,t[2]=n,t[3]=a,t[4]=l}else a=t[3],l=t[4];let u;t[11]!==a?(u=x.jsx("tbody",{children:a}),t[11]=a,t[12]=u):u=t[12];let f;return t[13]!==l||t[14]!==u?(f=x.jsx("div",{children:x.jsx("table",{className:l,children:u})}),t[13]=l,t[14]=u,t[15]=f):f=t[15],f}function MP(){return Math.random().toString(36).substring(2,9)}function gw(){return{id:MP(),text:""}}function DP(t){return!t.text.trim()}function jP(){const t=Pe.c(17),{request:e,setOpenAIEmbeddingsInput:n}=Xt();let r;t[0]!==e?.openai?.embeddings?.input?(r=e?.openai?.embeddings?.input??[],t[0]=e?.openai?.embeddings?.input,t[1]=r):r=t[1];const s=r;let a;t[2]!==s||t[3]!==n?(a=(p,y)=>{const g=s.map(w=>w.id===p?{...w,text:y}:w),v=g[g.length-1];v&&!DP(v)&&g.push(gw()),n(g)},t[2]=s,t[3]=n,t[4]=a):a=t[4];const l=a;let u;t[5]!==s||t[6]!==n?(u=p=>{if(s.length===1){n([gw()]);return}n(s.filter(y=>y.id!==p))},t[5]=s,t[6]=n,t[7]=u):u=t[7];const f=u;let d;if(t[8]!==s||t[9]!==f||t[10]!==l){let p;t[12]!==f||t[13]!==l?(p=y=>x.jsxs("tr",{className:"border-b border-neutral-100 dark:border-white/5 last:border-0",children:[x.jsx("td",{className:"px-1.5 py-1.5",children:x.jsx("input",{type:"text",value:y.text,onChange:g=>l(y.id,g.target.value),placeholder:"Text to convert to embeddings...",className:"w-full px-2 py-1 bg-white dark:bg-white/5 border border-neutral-300 dark:border-white/10 rounded text-xs text-neutral-800 dark:text-neutral-100 placeholder-neutral-400 dark:placeholder-neutral-500 focus:outline-none focus:border-neutral-400 dark:focus:border-white/20 transition-colors"})}),x.jsx("td",{className:"w-8 pr-1.5 py-1.5",children:x.jsx("button",{type:"button",onClick:()=>f(y.id),className:"p-1 rounded hover:bg-red-50 dark:hover:bg-red-500/10 transition-colors text-neutral-300 dark:text-neutral-600 hover:text-red-500",title:"Remove input",children:x.jsx(Ki,{className:"w-3.5 h-3.5"})})})]},y.id),t[12]=f,t[13]=l,t[14]=p):p=t[14],d=s.map(p),t[8]=s,t[9]=f,t[10]=l,t[11]=d}else d=t[11];let m;return t[15]!==d?(m=x.jsx("div",{children:x.jsx("table",{className:"w-full",children:x.jsx("tbody",{children:d})})}),t[15]=d,t[16]=m):m=t[16],m}function LP(){return Math.random().toString(36).substring(2,9)}function yw(){return{id:LP(),data:""}}function zP(t){return!t.data}function PP(){const t=Pe.c(22),{request:e,setOpenAIImageFiles:n}=Xt();let r;t[0]!==e?.openai?.image?.images?(r=e?.openai?.image?.images??[],t[0]=e?.openai?.image?.images,t[1]=r):r=t[1];const s=r;let a;t[2]!==s||t[3]!==n?(a=(g,v)=>{if(!v)return;const w=new FileReader;w.onloadend=()=>{const E=w.result,S=s.map(T=>T.id===g?{...T,data:E}:T),C=S[S.length-1];C&&!zP(C)&&S.push(yw()),n(S)},w.readAsDataURL(v)},t[2]=s,t[3]=n,t[4]=a):a=t[4];const l=a;let u;t[5]!==s||t[6]!==n?(u=g=>{if(s.length===1){n([yw()]);return}n(s.filter(v=>v.id!==g))},t[5]=s,t[6]=n,t[7]=u):u=t[7];const f=u;let d;t[8]!==s||t[9]!==n?(d=g=>{const v=s.map(w=>w.id===g?{...w,data:""}:w);n(v)},t[8]=s,t[9]=n,t[10]=d):d=t[10];const m=d;let p;if(t[11]!==m||t[12]!==l||t[13]!==s||t[14]!==f){let g;t[16]!==m||t[17]!==l||t[18]!==f?(g=v=>x.jsxs("tr",{className:"border-b border-neutral-100 dark:border-white/5 last:border-0",children:[x.jsx("td",{className:"px-1.5 py-1.5",children:v.data?x.jsxs("div",{className:"flex items-center gap-2 px-2 py-1 bg-white dark:bg-white/5 border border-neutral-300 dark:border-white/10 rounded text-xs",children:[x.jsx("img",{src:v.data,alt:"Preview",className:"w-8 h-8 object-cover rounded"}),x.jsx("span",{className:"flex-1 text-neutral-700 dark:text-neutral-300",children:"Image uploaded"}),x.jsx("button",{type:"button",onClick:()=>m(v.id),className:"px-2 py-0.5 text-xs text-neutral-500 dark:text-neutral-400 hover:text-neutral-700 dark:hover:text-neutral-200 hover:bg-neutral-100 dark:hover:bg-white/10 rounded transition-colors",children:"Clear"})]}):x.jsxs("label",{className:"flex items-center gap-2 px-2 py-1 bg-white dark:bg-white/5 border border-neutral-300 dark:border-white/10 rounded text-xs cursor-pointer hover:border-neutral-400 dark:hover:border-white/20 transition-colors",children:[x.jsx(jy,{className:"w-3.5 h-3.5 text-neutral-400 dark:text-neutral-500"}),x.jsx("span",{className:"text-neutral-500 dark:text-neutral-400",children:"Select image file..."}),x.jsx("input",{type:"file",accept:"image/*",onChange:w=>l(v.id,w.target.files?.[0]||null),className:"hidden"})]})}),x.jsx("td",{className:"w-8 pr-1.5 py-1.5",children:x.jsx("button",{type:"button",onClick:()=>f(v.id),className:"p-1 rounded hover:bg-red-50 dark:hover:bg-red-500/10 transition-colors text-neutral-300 dark:text-neutral-600 hover:text-red-500",title:"Remove image",children:x.jsx(Ki,{className:"w-3.5 h-3.5"})})})]},v.id),t[16]=m,t[17]=l,t[18]=f,t[19]=g):g=t[19],p=s.map(g),t[11]=m,t[12]=l,t[13]=s,t[14]=f,t[15]=p}else p=t[15];let y;return t[20]!==p?(y=x.jsx("div",{children:x.jsx("table",{className:"w-full",children:x.jsx("tbody",{children:p})})}),t[20]=p,t[21]=y):y=t[21],y}function BP(){const t=Pe.c(42),{request:e,setOpenAIBodyType:n,setOpenAIImagePrompt:r,setOpenAIAudioText:s,setOpenAIAudioVoice:a,setOpenAITranscriptionFile:l}=Xt(),u=!!e?.openai?.chat,f=!!e?.openai?.image,d=!!e?.openai?.audio,m=!!e?.openai?.transcription,p=u?"chat":f?"image":d?"audio":m?"transcription":"embeddings",y=e?.openai?.image?.prompt??"",g=e?.openai?.audio?.text??"",v=e?.openai?.audio?.voice??"alloy",w=e?.openai?.transcription?.file??"";let E;t[0]===Symbol.for("react.memo_cache_sentinel")?(E={id:"chat",label:"Chat"},t[0]=E):E=t[0];let S;t[1]===Symbol.for("react.memo_cache_sentinel")?(S={id:"audio",label:"Audio"},t[1]=S):S=t[1];let C;t[2]===Symbol.for("react.memo_cache_sentinel")?(C={id:"image",label:"Image"},t[2]=C):C=t[2];let T;t[3]===Symbol.for("react.memo_cache_sentinel")?(T={id:"transcription",label:"Transcription"},t[3]=T):T=t[3];let M;t[4]===Symbol.for("react.memo_cache_sentinel")?(M=[E,S,C,T,{id:"embeddings",label:"Embeddings"}],t[4]=M):M=t[4];const I=M;let R;t[5]!==n?(R=ie=>{n(ie)},t[5]=n,t[6]=R):R=t[6];const U=R;let q;t[7]!==p||t[8]!==U?(q=x.jsx("div",{role:"tablist",className:"inline-flex gap-1",children:I.map(ie=>x.jsx("button",{role:"tab",onClick:()=>U(ie.id),className:`px-2 py-1 text-[11px] font-medium rounded-md transition-all ${p===ie.id?"bg-white dark:bg-white/10 text-neutral-800 dark:text-neutral-100 shadow-sm":"text-neutral-500 dark:text-neutral-400 hover:text-neutral-700 dark:hover:text-neutral-200 hover:bg-neutral-100 dark:hover:bg-white/5"}`,children:ie.label},ie.id))}),t[7]=p,t[8]=U,t[9]=q):q=t[9];let K;t[10]!==v||t[11]!==p||t[12]!==a?(K=p==="audio"&&x.jsxs("select",{value:v,onChange:ie=>a(ie.target.value),className:"h-6 px-2 text-[11px] font-medium bg-white dark:bg-white/10 text-neutral-800 dark:text-neutral-100 rounded-md shadow-sm border-0 focus:outline-none focus:ring-2 focus:ring-neutral-300 dark:focus:ring-white/20 cursor-pointer transition-all min-w-30",children:[x.jsx("option",{value:"alloy",children:"Alloy"}),x.jsx("option",{value:"ash",children:"Ash"}),x.jsx("option",{value:"ballad",children:"Ballad"}),x.jsx("option",{value:"coral",children:"Coral"}),x.jsx("option",{value:"echo",children:"Echo"}),x.jsx("option",{value:"fable",children:"Fable"}),x.jsx("option",{value:"onyx",children:"Onyx"}),x.jsx("option",{value:"nova",children:"Nova"}),x.jsx("option",{value:"sage",children:"Sage"}),x.jsx("option",{value:"shimmer",children:"Shimmer"}),x.jsx("option",{value:"verse",children:"Verse"}),x.jsx("option",{value:"marin",children:"Marin"}),x.jsx("option",{value:"cedar",children:"Cedar"})]}),t[10]=v,t[11]=p,t[12]=a,t[13]=K):K=t[13];let j;t[14]!==q||t[15]!==K?(j=x.jsxs("div",{className:"flex items-center gap-2",children:[q,K]}),t[14]=q,t[15]=K,t[16]=j):j=t[16];let J;t[17]!==p?(J=p==="chat"&&x.jsx(IP,{}),t[17]=p,t[18]=J):J=t[18];let ne;t[19]!==p||t[20]!==y||t[21]!==r?(ne=p==="image"&&x.jsxs("div",{className:"space-y-3",children:[x.jsx("textarea",{value:y,onChange:ie=>r(ie.target.value),placeholder:"Describe the image...",rows:4,className:"w-full px-3 py-2 text-sm bg-neutral-50 dark:bg-white/5 border border-neutral-200 dark:border-white/10 rounded-lg focus:outline-none focus:ring-2 focus:ring-violet-500/50 resize-none text-neutral-800 dark:text-neutral-100 placeholder-neutral-400 dark:placeholder-neutral-600"}),x.jsx(PP,{})]}),t[19]=p,t[20]=y,t[21]=r,t[22]=ne):ne=t[22];let me;t[23]!==g||t[24]!==p||t[25]!==s?(me=p==="audio"&&x.jsx("textarea",{value:g,onChange:ie=>s(ie.target.value),placeholder:"Enter text to convert to speech...",rows:4,className:"w-full px-3 py-2 text-sm bg-neutral-50 dark:bg-white/5 border border-neutral-200 dark:border-white/10 rounded-lg focus:outline-none focus:ring-2 focus:ring-violet-500/50 resize-none text-neutral-800 dark:text-neutral-100 placeholder-neutral-400 dark:placeholder-neutral-600"}),t[23]=g,t[24]=p,t[25]=s,t[26]=me):me=t[26];let X;t[27]!==p||t[28]!==l||t[29]!==w?(X=p==="transcription"&&x.jsx("div",{children:w?x.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 text-sm bg-neutral-50 dark:bg-white/5 border border-neutral-200 dark:border-white/10 rounded-lg",children:[x.jsxs("div",{className:"flex-1 text-neutral-700 dark:text-neutral-300",children:[x.jsx("svg",{className:"w-4 h-4 inline-block mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"})}),"Audio file uploaded"]}),x.jsx("button",{type:"button",onClick:()=>l(""),className:"px-2 py-1 text-xs text-neutral-500 dark:text-neutral-400 hover:text-neutral-700 dark:hover:text-neutral-200 hover:bg-neutral-100 dark:hover:bg-white/10 rounded transition-colors",children:"Clear"})]}):x.jsx("input",{type:"file",accept:"audio/*,.m4a,.mp3,.mp4,.mpeg,.mpga,.wav,.webm",onChange:ie=>{const re=ie.target.files?.[0];if(re){const N=new FileReader;N.onloadend=()=>{const D=N.result;l(D)},N.readAsDataURL(re)}},className:"w-full px-3 py-2 text-sm bg-neutral-50 dark:bg-white/5 border border-neutral-200 dark:border-white/10 rounded-lg focus:outline-none focus:ring-2 focus:ring-violet-500/50 text-neutral-800 dark:text-neutral-100 file:mr-4 file:py-1 file:px-2 file:rounded file:border-0 file:text-sm file:bg-violet-50 dark:file:bg-violet-500/10 file:text-violet-600 dark:file:text-violet-400 hover:file:bg-violet-100 dark:hover:file:bg-violet-500/20"})}),t[27]=p,t[28]=l,t[29]=w,t[30]=X):X=t[30];let F;t[31]!==p?(F=p==="embeddings"&&x.jsx(jP,{}),t[31]=p,t[32]=F):F=t[32];let B;t[33]!==ne||t[34]!==me||t[35]!==X||t[36]!==F||t[37]!==J?(B=x.jsxs("div",{children:[J,ne,me,X,F]}),t[33]=ne,t[34]=me,t[35]=X,t[36]=F,t[37]=J,t[38]=B):B=t[38];let G;return t[39]!==B||t[40]!==j?(G=x.jsxs("div",{className:"space-y-3",children:[j,B]}),t[39]=B,t[40]=j,t[41]=G):G=t[41],G}const UP=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,$P=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,qP={};function bw(t,e){return(qP.jsx?$P:UP).test(t)}var La={},Sm,_w;function FP(){if(_w)return Sm;_w=1;var t=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,e=/\n/g,n=/^\s*/,r=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,s=/^:\s*/,a=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,l=/^[;\s]*/,u=/^\s+|\s+$/g,f=`
`,d="/",m="*",p="",y="comment",g="declaration";function v(E,S){if(typeof E!="string")throw new TypeError("First argument must be a string");if(!E)return[];S=S||{};var C=1,T=1;function M(X){var F=X.match(e);F&&(C+=F.length);var B=X.lastIndexOf(f);T=~B?X.length-B:T+X.length}function I(){var X={line:C,column:T};return function(F){return F.position=new R(X),K(),F}}function R(X){this.start=X,this.end={line:C,column:T},this.source=S.source}R.prototype.content=E;function U(X){var F=new Error(S.source+":"+C+":"+T+": "+X);if(F.reason=X,F.filename=S.source,F.line=C,F.column=T,F.source=E,!S.silent)throw F}function q(X){var F=X.exec(E);if(F){var B=F[0];return M(B),E=E.slice(B.length),F}}function K(){q(n)}function j(X){var F;for(X=X||[];F=J();)F!==!1&&X.push(F);return X}function J(){var X=I();if(!(d!=E.charAt(0)||m!=E.charAt(1))){for(var F=2;p!=E.charAt(F)&&(m!=E.charAt(F)||d!=E.charAt(F+1));)++F;if(F+=2,p===E.charAt(F-1))return U("End of comment missing");var B=E.slice(2,F-2);return T+=2,M(B),E=E.slice(F),T+=2,X({type:y,comment:B})}}function ne(){var X=I(),F=q(r);if(F){if(J(),!q(s))return U("property missing ':'");var B=q(a),G=X({type:g,property:w(F[0].replace(t,p)),value:B?w(B[0].replace(t,p)):p});return q(l),G}}function me(){var X=[];j(X);for(var F;F=ne();)F!==!1&&(X.push(F),j(X));return X}return K(),me()}function w(E){return E?E.replace(u,p):p}return Sm=v,Sm}var vw;function VP(){if(vw)return La;vw=1;var t=La&&La.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(La,"__esModule",{value:!0}),La.default=n;const e=t(FP());function n(r,s){let a=null;if(!r||typeof r!="string")return a;const l=(0,e.default)(r),u=typeof s=="function";return l.forEach(f=>{if(f.type!=="declaration")return;const{property:d,value:m}=f;u?s(d,m,f):m&&(a=a||{},a[d]=m)}),a}return La}var hl={},xw;function HP(){if(xw)return hl;xw=1,Object.defineProperty(hl,"__esModule",{value:!0}),hl.camelCase=void 0;var t=/^--[a-zA-Z0-9_-]+$/,e=/-([a-z])/g,n=/^[^-]+$/,r=/^-(webkit|moz|ms|o|khtml)-/,s=/^-(ms)-/,a=function(d){return!d||n.test(d)||t.test(d)},l=function(d,m){return m.toUpperCase()},u=function(d,m){return"".concat(m,"-")},f=function(d,m){return m===void 0&&(m={}),a(d)?d:(d=d.toLowerCase(),m.reactCompat?d=d.replace(s,u):d=d.replace(r,u),d.replace(e,l))};return hl.camelCase=f,hl}var pl,ww;function GP(){if(ww)return pl;ww=1;var t=pl&&pl.__importDefault||function(s){return s&&s.__esModule?s:{default:s}},e=t(VP()),n=HP();function r(s,a){var l={};return!s||typeof s!="string"||(0,e.default)(s,function(u,f){u&&f&&(l[(0,n.camelCase)(u,a)]=f)}),l}return r.default=r,pl=r,pl}var KP=GP();const ZP=sk(KP),PE=BE("end"),Jy=BE("start");function BE(t){return e;function e(n){const r=n&&n.position&&n.position[t]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function QP(t){const e=Jy(t),n=PE(t);if(e&&n)return{start:e,end:n}}function Pl(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?Sw(t.position):"start"in t||"end"in t?Sw(t):"line"in t||"column"in t?Bg(t):""}function Bg(t){return kw(t&&t.line)+":"+kw(t&&t.column)}function Sw(t){return Bg(t&&t.start)+"-"+Bg(t&&t.end)}function kw(t){return t&&typeof t=="number"?t:1}class On extends Error{constructor(e,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let s="",a={},l=!1;if(n&&("line"in n&&"column"in n?a={place:n}:"start"in n&&"end"in n?a={place:n}:"type"in n?a={ancestors:[n],place:n.position}:a={...n}),typeof e=="string"?s=e:!a.cause&&e&&(l=!0,s=e.message,a.cause=e),!a.ruleId&&!a.source&&typeof r=="string"){const f=r.indexOf(":");f===-1?a.ruleId=r:(a.source=r.slice(0,f),a.ruleId=r.slice(f+1))}if(!a.place&&a.ancestors&&a.ancestors){const f=a.ancestors[a.ancestors.length-1];f&&(a.place=f.position)}const u=a.place&&"start"in a.place?a.place.start:a.place;this.ancestors=a.ancestors||void 0,this.cause=a.cause||void 0,this.column=u?u.column:void 0,this.fatal=void 0,this.file="",this.message=s,this.line=u?u.line:void 0,this.name=Pl(a.place)||"1:1",this.place=a.place||void 0,this.reason=this.message,this.ruleId=a.ruleId||void 0,this.source=a.source||void 0,this.stack=l&&a.cause&&typeof a.cause.stack=="string"?a.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}On.prototype.file="";On.prototype.name="";On.prototype.reason="";On.prototype.message="";On.prototype.stack="";On.prototype.column=void 0;On.prototype.line=void 0;On.prototype.ancestors=void 0;On.prototype.cause=void 0;On.prototype.fatal=void 0;On.prototype.place=void 0;On.prototype.ruleId=void 0;On.prototype.source=void 0;const Yy={}.hasOwnProperty,JP=new Map,YP=/[A-Z]/g,WP=new Set(["table","tbody","thead","tfoot","tr"]),XP=new Set(["td","th"]),UE="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function e6(t,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=e.filePath||void 0;let r;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=l6(n,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=o6(n,e.jsx,e.jsxs)}const s={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:r,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?dc:gE,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},a=$E(s,t,void 0);return a&&typeof a!="string"?a:s.create(t,s.Fragment,{children:a||void 0},void 0)}function $E(t,e,n){if(e.type==="element")return t6(t,e,n);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return n6(t,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return s6(t,e,n);if(e.type==="mdxjsEsm")return r6(t,e);if(e.type==="root")return i6(t,e,n);if(e.type==="text")return a6(t,e)}function t6(t,e,n){const r=t.schema;let s=r;e.tagName.toLowerCase()==="svg"&&r.space==="html"&&(s=dc,t.schema=s),t.ancestors.push(e);const a=FE(t,e.tagName,!1),l=c6(t,e);let u=Xy(t,e);return WP.has(e.tagName)&&(u=u.filter(function(f){return typeof f=="string"?!hd(f):!0})),qE(t,l,a,e),Wy(l,u),t.ancestors.pop(),t.schema=r,t.create(e,a,l,n)}function n6(t,e){if(e.data&&e.data.estree&&t.evaluater){const r=e.data.estree.body[0];return r.type,t.evaluater.evaluateExpression(r.expression)}tc(t,e.position)}function r6(t,e){if(e.data&&e.data.estree&&t.evaluater)return t.evaluater.evaluateProgram(e.data.estree);tc(t,e.position)}function s6(t,e,n){const r=t.schema;let s=r;e.name==="svg"&&r.space==="html"&&(s=dc,t.schema=s),t.ancestors.push(e);const a=e.name===null?t.Fragment:FE(t,e.name,!0),l=u6(t,e),u=Xy(t,e);return qE(t,l,a,e),Wy(l,u),t.ancestors.pop(),t.schema=r,t.create(e,a,l,n)}function i6(t,e,n){const r={};return Wy(r,Xy(t,e)),t.create(e,t.Fragment,r,n)}function a6(t,e){return e.value}function qE(t,e,n,r){typeof n!="string"&&n!==t.Fragment&&t.passNode&&(e.node=r)}function Wy(t,e){if(e.length>0){const n=e.length>1?e:e[0];n&&(t.children=n)}}function o6(t,e,n){return r;function r(s,a,l,u){const d=Array.isArray(l.children)?n:e;return u?d(a,l,u):d(a,l)}}function l6(t,e){return n;function n(r,s,a,l){const u=Array.isArray(a.children),f=Jy(r);return e(s,a,l,u,{columnNumber:f?f.column-1:void 0,fileName:t,lineNumber:f?f.line:void 0},void 0)}}function c6(t,e){const n={};let r,s;for(s in e.properties)if(s!=="children"&&Yy.call(e.properties,s)){const a=f6(t,s,e.properties[s]);if(a){const[l,u]=a;t.tableCellAlignToStyle&&l==="align"&&typeof u=="string"&&XP.has(e.tagName)?r=u:n[l]=u}}if(r){const a=n.style||(n.style={});a[t.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function u6(t,e){const n={};for(const r of e.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&t.evaluater){const a=r.data.estree.body[0];a.type;const l=a.expression;l.type;const u=l.properties[0];u.type,Object.assign(n,t.evaluater.evaluateExpression(u.argument))}else tc(t,e.position);else{const s=r.name;let a;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&t.evaluater){const u=r.value.data.estree.body[0];u.type,a=t.evaluater.evaluateExpression(u.expression)}else tc(t,e.position);else a=r.value===null?!0:r.value;n[s]=a}return n}function Xy(t,e){const n=[];let r=-1;const s=t.passKeys?new Map:JP;for(;++r<e.children.length;){const a=e.children[r];let l;if(t.passKeys){const f=a.type==="element"?a.tagName:a.type==="mdxJsxFlowElement"||a.type==="mdxJsxTextElement"?a.name:void 0;if(f){const d=s.get(f)||0;l=f+"-"+d,s.set(f,d+1)}}const u=$E(t,a,l);u!==void 0&&n.push(u)}return n}function f6(t,e,n){const r=mE(t.schema,e);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?bE(n):_E(n)),r.property==="style"){let s=typeof n=="object"?n:d6(t,String(n));return t.stylePropertyNameCase==="css"&&(s=h6(s)),["style",s]}return[t.elementAttributeNameCase==="react"&&r.space?CL[r.property]||r.property:r.attribute,n]}}function d6(t,e){try{return ZP(e,{reactCompat:!0})}catch(n){if(t.ignoreInvalidStyle)return{};const r=n,s=new On("Cannot parse `style` attribute",{ancestors:t.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw s.file=t.filePath||void 0,s.url=UE+"#cannot-parse-style-attribute",s}}function FE(t,e,n){let r;if(!n)r={type:"Literal",value:e};else if(e.includes(".")){const s=e.split(".");let a=-1,l;for(;++a<s.length;){const u=bw(s[a])?{type:"Identifier",name:s[a]}:{type:"Literal",value:s[a]};l=l?{type:"MemberExpression",object:l,property:u,computed:!!(a&&u.type==="Literal"),optional:!1}:u}r=l}else r=bw(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(r.type==="Literal"){const s=r.value;return Yy.call(t.components,s)?t.components[s]:s}if(t.evaluater)return t.evaluater.evaluateExpression(r);tc(t)}function tc(t,e){const n=new On("Cannot handle MDX estrees without `createEvaluater`",{ancestors:t.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=t.filePath||void 0,n.url=UE+"#cannot-handle-mdx-estrees-without-createevaluater",n}function h6(t){const e={};let n;for(n in t)Yy.call(t,n)&&(e[p6(n)]=t[n]);return e}function p6(t){let e=t.replace(YP,m6);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function m6(t){return"-"+t.toLowerCase()}const km={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},g6={};function e0(t,e){const n=g6,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,s=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return VE(t,r,s)}function VE(t,e,n){if(y6(t)){if("value"in t)return t.type==="html"&&!n?"":t.value;if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return Ew(t.children,e,n)}return Array.isArray(t)?Ew(t,e,n):""}function Ew(t,e,n){const r=[];let s=-1;for(;++s<t.length;)r[s]=VE(t[s],e,n);return r.join("")}function y6(t){return!!(t&&typeof t=="object")}const Cw=document.createElement("i");function t0(t){const e="&"+t+";";Cw.innerHTML=e;const n=Cw.textContent;return n.charCodeAt(n.length-1)===59&&t!=="semi"||n===e?!1:n}function dr(t,e,n,r){const s=t.length;let a=0,l;if(e<0?e=-e>s?0:s+e:e=e>s?s:e,n=n>0?n:0,r.length<1e4)l=Array.from(r),l.unshift(e,n),t.splice(...l);else for(n&&t.splice(e,n);a<r.length;)l=r.slice(a,a+1e4),l.unshift(e,0),t.splice(...l),a+=1e4,e+=1e4}function Rr(t,e){return t.length>0?(dr(t,t.length,0,e),t):e}const Tw={}.hasOwnProperty;function HE(t){const e={};let n=-1;for(;++n<t.length;)b6(e,t[n]);return e}function b6(t,e){let n;for(n in e){const s=(Tw.call(t,n)?t[n]:void 0)||(t[n]={}),a=e[n];let l;if(a)for(l in a){Tw.call(s,l)||(s[l]=[]);const u=a[l];_6(s[l],Array.isArray(u)?u:u?[u]:[])}}}function _6(t,e){let n=-1;const r=[];for(;++n<e.length;)(e[n].add==="after"?t:r).push(e[n]);dr(t,0,0,r)}function GE(t,e){const n=Number.parseInt(t,e);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function Br(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const zn=ci(/[A-Za-z]/),Rn=ci(/[\dA-Za-z]/),v6=ci(/[#-'*+\--9=?A-Z^-~]/);function Ff(t){return t!==null&&(t<32||t===127)}const Ug=ci(/\d/),x6=ci(/[\dA-Fa-f]/),w6=ci(/[!-/:-@[-`{-~]/);function Ie(t){return t!==null&&t<-2}function wt(t){return t!==null&&(t<0||t===32)}function Qe(t){return t===-2||t===-1||t===32}const vd=ci(new RegExp("\\p{P}|\\p{S}","u")),qi=ci(/\s/);function ci(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function po(t){const e=[];let n=-1,r=0,s=0;for(;++n<t.length;){const a=t.charCodeAt(n);let l="";if(a===37&&Rn(t.charCodeAt(n+1))&&Rn(t.charCodeAt(n+2)))s=2;else if(a<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(a))||(l=String.fromCharCode(a));else if(a>55295&&a<57344){const u=t.charCodeAt(n+1);a<56320&&u>56319&&u<57344?(l=String.fromCharCode(a,u),s=1):l=""}else l=String.fromCharCode(a);l&&(e.push(t.slice(r,n),encodeURIComponent(l)),r=n+s+1,l=""),s&&(n+=s,s=0)}return e.join("")+t.slice(r)}function nt(t,e,n,r){const s=r?r-1:Number.POSITIVE_INFINITY;let a=0;return l;function l(f){return Qe(f)?(t.enter(n),u(f)):e(f)}function u(f){return Qe(f)&&a++<s?(t.consume(f),u):(t.exit(n),e(f))}}const S6={tokenize:k6};function k6(t){const e=t.attempt(this.parser.constructs.contentInitial,r,s);let n;return e;function r(u){if(u===null){t.consume(u);return}return t.enter("lineEnding"),t.consume(u),t.exit("lineEnding"),nt(t,e,"linePrefix")}function s(u){return t.enter("paragraph"),a(u)}function a(u){const f=t.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=f),n=f,l(u)}function l(u){if(u===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(u);return}return Ie(u)?(t.consume(u),t.exit("chunkText"),a):(t.consume(u),l)}}const E6={tokenize:C6},Aw={tokenize:T6};function C6(t){const e=this,n=[];let r=0,s,a,l;return u;function u(T){if(r<n.length){const M=n[r];return e.containerState=M[1],t.attempt(M[0].continuation,f,d)(T)}return d(T)}function f(T){if(r++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,s&&C();const M=e.events.length;let I=M,R;for(;I--;)if(e.events[I][0]==="exit"&&e.events[I][1].type==="chunkFlow"){R=e.events[I][1].end;break}S(r);let U=M;for(;U<e.events.length;)e.events[U][1].end={...R},U++;return dr(e.events,I+1,0,e.events.slice(M)),e.events.length=U,d(T)}return u(T)}function d(T){if(r===n.length){if(!s)return y(T);if(s.currentConstruct&&s.currentConstruct.concrete)return v(T);e.interrupt=!!(s.currentConstruct&&!s._gfmTableDynamicInterruptHack)}return e.containerState={},t.check(Aw,m,p)(T)}function m(T){return s&&C(),S(r),y(T)}function p(T){return e.parser.lazy[e.now().line]=r!==n.length,l=e.now().offset,v(T)}function y(T){return e.containerState={},t.attempt(Aw,g,v)(T)}function g(T){return r++,n.push([e.currentConstruct,e.containerState]),y(T)}function v(T){if(T===null){s&&C(),S(0),t.consume(T);return}return s=s||e.parser.flow(e.now()),t.enter("chunkFlow",{_tokenizer:s,contentType:"flow",previous:a}),w(T)}function w(T){if(T===null){E(t.exit("chunkFlow"),!0),S(0),t.consume(T);return}return Ie(T)?(t.consume(T),E(t.exit("chunkFlow")),r=0,e.interrupt=void 0,u):(t.consume(T),w)}function E(T,M){const I=e.sliceStream(T);if(M&&I.push(null),T.previous=a,a&&(a.next=T),a=T,s.defineSkip(T.start),s.write(I),e.parser.lazy[T.start.line]){let R=s.events.length;for(;R--;)if(s.events[R][1].start.offset<l&&(!s.events[R][1].end||s.events[R][1].end.offset>l))return;const U=e.events.length;let q=U,K,j;for(;q--;)if(e.events[q][0]==="exit"&&e.events[q][1].type==="chunkFlow"){if(K){j=e.events[q][1].end;break}K=!0}for(S(r),R=U;R<e.events.length;)e.events[R][1].end={...j},R++;dr(e.events,q+1,0,e.events.slice(U)),e.events.length=R}}function S(T){let M=n.length;for(;M-- >T;){const I=n[M];e.containerState=I[1],I[0].exit.call(e,t)}n.length=T}function C(){s.write([null]),a=void 0,s=void 0,e.containerState._closeFlow=void 0}}function T6(t,e,n){return nt(t,t.attempt(this.parser.constructs.document,e,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function ao(t){if(t===null||wt(t)||qi(t))return 1;if(vd(t))return 2}function xd(t,e,n){const r=[];let s=-1;for(;++s<t.length;){const a=t[s].resolveAll;a&&!r.includes(a)&&(e=a(e,n),r.push(a))}return e}const $g={name:"attention",resolveAll:A6,tokenize:R6};function A6(t,e){let n=-1,r,s,a,l,u,f,d,m;for(;++n<t.length;)if(t[n][0]==="enter"&&t[n][1].type==="attentionSequence"&&t[n][1]._close){for(r=n;r--;)if(t[r][0]==="exit"&&t[r][1].type==="attentionSequence"&&t[r][1]._open&&e.sliceSerialize(t[r][1]).charCodeAt(0)===e.sliceSerialize(t[n][1]).charCodeAt(0)){if((t[r][1]._close||t[n][1]._open)&&(t[n][1].end.offset-t[n][1].start.offset)%3&&!((t[r][1].end.offset-t[r][1].start.offset+t[n][1].end.offset-t[n][1].start.offset)%3))continue;f=t[r][1].end.offset-t[r][1].start.offset>1&&t[n][1].end.offset-t[n][1].start.offset>1?2:1;const p={...t[r][1].end},y={...t[n][1].start};Rw(p,-f),Rw(y,f),l={type:f>1?"strongSequence":"emphasisSequence",start:p,end:{...t[r][1].end}},u={type:f>1?"strongSequence":"emphasisSequence",start:{...t[n][1].start},end:y},a={type:f>1?"strongText":"emphasisText",start:{...t[r][1].end},end:{...t[n][1].start}},s={type:f>1?"strong":"emphasis",start:{...l.start},end:{...u.end}},t[r][1].end={...l.start},t[n][1].start={...u.end},d=[],t[r][1].end.offset-t[r][1].start.offset&&(d=Rr(d,[["enter",t[r][1],e],["exit",t[r][1],e]])),d=Rr(d,[["enter",s,e],["enter",l,e],["exit",l,e],["enter",a,e]]),d=Rr(d,xd(e.parser.constructs.insideSpan.null,t.slice(r+1,n),e)),d=Rr(d,[["exit",a,e],["enter",u,e],["exit",u,e],["exit",s,e]]),t[n][1].end.offset-t[n][1].start.offset?(m=2,d=Rr(d,[["enter",t[n][1],e],["exit",t[n][1],e]])):m=0,dr(t,r-1,n-r+3,d),n=r+d.length-m-2;break}}for(n=-1;++n<t.length;)t[n][1].type==="attentionSequence"&&(t[n][1].type="data");return t}function R6(t,e){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,s=ao(r);let a;return l;function l(f){return a=f,t.enter("attentionSequence"),u(f)}function u(f){if(f===a)return t.consume(f),u;const d=t.exit("attentionSequence"),m=ao(f),p=!m||m===2&&s||n.includes(f),y=!s||s===2&&m||n.includes(r);return d._open=!!(a===42?p:p&&(s||!y)),d._close=!!(a===42?y:y&&(m||!p)),e(f)}}function Rw(t,e){t.column+=e,t.offset+=e,t._bufferIndex+=e}const O6={name:"autolink",tokenize:N6};function N6(t,e,n){let r=0;return s;function s(g){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(g),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),a}function a(g){return zn(g)?(t.consume(g),l):g===64?n(g):d(g)}function l(g){return g===43||g===45||g===46||Rn(g)?(r=1,u(g)):d(g)}function u(g){return g===58?(t.consume(g),r=0,f):(g===43||g===45||g===46||Rn(g))&&r++<32?(t.consume(g),u):(r=0,d(g))}function f(g){return g===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(g),t.exit("autolinkMarker"),t.exit("autolink"),e):g===null||g===32||g===60||Ff(g)?n(g):(t.consume(g),f)}function d(g){return g===64?(t.consume(g),m):v6(g)?(t.consume(g),d):n(g)}function m(g){return Rn(g)?p(g):n(g)}function p(g){return g===46?(t.consume(g),r=0,m):g===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(g),t.exit("autolinkMarker"),t.exit("autolink"),e):y(g)}function y(g){if((g===45||Rn(g))&&r++<63){const v=g===45?y:p;return t.consume(g),v}return n(g)}}const hc={partial:!0,tokenize:I6};function I6(t,e,n){return r;function r(a){return Qe(a)?nt(t,s,"linePrefix")(a):s(a)}function s(a){return a===null||Ie(a)?e(a):n(a)}}const KE={continuation:{tokenize:D6},exit:j6,name:"blockQuote",tokenize:M6};function M6(t,e,n){const r=this;return s;function s(l){if(l===62){const u=r.containerState;return u.open||(t.enter("blockQuote",{_container:!0}),u.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(l),t.exit("blockQuoteMarker"),a}return n(l)}function a(l){return Qe(l)?(t.enter("blockQuotePrefixWhitespace"),t.consume(l),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),e):(t.exit("blockQuotePrefix"),e(l))}}function D6(t,e,n){const r=this;return s;function s(l){return Qe(l)?nt(t,a,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l):a(l)}function a(l){return t.attempt(KE,e,n)(l)}}function j6(t){t.exit("blockQuote")}const ZE={name:"characterEscape",tokenize:L6};function L6(t,e,n){return r;function r(a){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(a),t.exit("escapeMarker"),s}function s(a){return w6(a)?(t.enter("characterEscapeValue"),t.consume(a),t.exit("characterEscapeValue"),t.exit("characterEscape"),e):n(a)}}const QE={name:"characterReference",tokenize:z6};function z6(t,e,n){const r=this;let s=0,a,l;return u;function u(p){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(p),t.exit("characterReferenceMarker"),f}function f(p){return p===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(p),t.exit("characterReferenceMarkerNumeric"),d):(t.enter("characterReferenceValue"),a=31,l=Rn,m(p))}function d(p){return p===88||p===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(p),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),a=6,l=x6,m):(t.enter("characterReferenceValue"),a=7,l=Ug,m(p))}function m(p){if(p===59&&s){const y=t.exit("characterReferenceValue");return l===Rn&&!t0(r.sliceSerialize(y))?n(p):(t.enter("characterReferenceMarker"),t.consume(p),t.exit("characterReferenceMarker"),t.exit("characterReference"),e)}return l(p)&&s++<a?(t.consume(p),m):n(p)}}const Ow={partial:!0,tokenize:B6},Nw={concrete:!0,name:"codeFenced",tokenize:P6};function P6(t,e,n){const r=this,s={partial:!0,tokenize:I};let a=0,l=0,u;return f;function f(R){return d(R)}function d(R){const U=r.events[r.events.length-1];return a=U&&U[1].type==="linePrefix"?U[2].sliceSerialize(U[1],!0).length:0,u=R,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),m(R)}function m(R){return R===u?(l++,t.consume(R),m):l<3?n(R):(t.exit("codeFencedFenceSequence"),Qe(R)?nt(t,p,"whitespace")(R):p(R))}function p(R){return R===null||Ie(R)?(t.exit("codeFencedFence"),r.interrupt?e(R):t.check(Ow,w,M)(R)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),y(R))}function y(R){return R===null||Ie(R)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),p(R)):Qe(R)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),nt(t,g,"whitespace")(R)):R===96&&R===u?n(R):(t.consume(R),y)}function g(R){return R===null||Ie(R)?p(R):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),v(R))}function v(R){return R===null||Ie(R)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),p(R)):R===96&&R===u?n(R):(t.consume(R),v)}function w(R){return t.attempt(s,M,E)(R)}function E(R){return t.enter("lineEnding"),t.consume(R),t.exit("lineEnding"),S}function S(R){return a>0&&Qe(R)?nt(t,C,"linePrefix",a+1)(R):C(R)}function C(R){return R===null||Ie(R)?t.check(Ow,w,M)(R):(t.enter("codeFlowValue"),T(R))}function T(R){return R===null||Ie(R)?(t.exit("codeFlowValue"),C(R)):(t.consume(R),T)}function M(R){return t.exit("codeFenced"),e(R)}function I(R,U,q){let K=0;return j;function j(F){return R.enter("lineEnding"),R.consume(F),R.exit("lineEnding"),J}function J(F){return R.enter("codeFencedFence"),Qe(F)?nt(R,ne,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(F):ne(F)}function ne(F){return F===u?(R.enter("codeFencedFenceSequence"),me(F)):q(F)}function me(F){return F===u?(K++,R.consume(F),me):K>=l?(R.exit("codeFencedFenceSequence"),Qe(F)?nt(R,X,"whitespace")(F):X(F)):q(F)}function X(F){return F===null||Ie(F)?(R.exit("codeFencedFence"),U(F)):q(F)}}}function B6(t,e,n){const r=this;return s;function s(l){return l===null?n(l):(t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),a)}function a(l){return r.parser.lazy[r.now().line]?n(l):e(l)}}const Em={name:"codeIndented",tokenize:$6},U6={partial:!0,tokenize:q6};function $6(t,e,n){const r=this;return s;function s(d){return t.enter("codeIndented"),nt(t,a,"linePrefix",5)(d)}function a(d){const m=r.events[r.events.length-1];return m&&m[1].type==="linePrefix"&&m[2].sliceSerialize(m[1],!0).length>=4?l(d):n(d)}function l(d){return d===null?f(d):Ie(d)?t.attempt(U6,l,f)(d):(t.enter("codeFlowValue"),u(d))}function u(d){return d===null||Ie(d)?(t.exit("codeFlowValue"),l(d)):(t.consume(d),u)}function f(d){return t.exit("codeIndented"),e(d)}}function q6(t,e,n){const r=this;return s;function s(l){return r.parser.lazy[r.now().line]?n(l):Ie(l)?(t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),s):nt(t,a,"linePrefix",5)(l)}function a(l){const u=r.events[r.events.length-1];return u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?e(l):Ie(l)?s(l):n(l)}}const F6={name:"codeText",previous:H6,resolve:V6,tokenize:G6};function V6(t){let e=t.length-4,n=3,r,s;if((t[n][1].type==="lineEnding"||t[n][1].type==="space")&&(t[e][1].type==="lineEnding"||t[e][1].type==="space")){for(r=n;++r<e;)if(t[r][1].type==="codeTextData"){t[n][1].type="codeTextPadding",t[e][1].type="codeTextPadding",n+=2,e-=2;break}}for(r=n-1,e++;++r<=e;)s===void 0?r!==e&&t[r][1].type!=="lineEnding"&&(s=r):(r===e||t[r][1].type==="lineEnding")&&(t[s][1].type="codeTextData",r!==s+2&&(t[s][1].end=t[r-1][1].end,t.splice(s+2,r-s-2),e-=r-s-2,r=s+2),s=void 0);return t}function H6(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function G6(t,e,n){let r=0,s,a;return l;function l(p){return t.enter("codeText"),t.enter("codeTextSequence"),u(p)}function u(p){return p===96?(t.consume(p),r++,u):(t.exit("codeTextSequence"),f(p))}function f(p){return p===null?n(p):p===32?(t.enter("space"),t.consume(p),t.exit("space"),f):p===96?(a=t.enter("codeTextSequence"),s=0,m(p)):Ie(p)?(t.enter("lineEnding"),t.consume(p),t.exit("lineEnding"),f):(t.enter("codeTextData"),d(p))}function d(p){return p===null||p===32||p===96||Ie(p)?(t.exit("codeTextData"),f(p)):(t.consume(p),d)}function m(p){return p===96?(t.consume(p),s++,m):s===r?(t.exit("codeTextSequence"),t.exit("codeText"),e(p)):(a.type="codeTextData",d(p))}}class K6{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(e,r):e>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(e,n,r){const s=n||0;this.setCursor(Math.trunc(e));const a=this.right.splice(this.right.length-s,Number.POSITIVE_INFINITY);return r&&ml(this.left,r),a.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),ml(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),ml(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const n=this.left.splice(e,Number.POSITIVE_INFINITY);ml(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);ml(this.left,n.reverse())}}}function ml(t,e){let n=0;if(e.length<1e4)t.push(...e);else for(;n<e.length;)t.push(...e.slice(n,n+1e4)),n+=1e4}function JE(t){const e={};let n=-1,r,s,a,l,u,f,d;const m=new K6(t);for(;++n<m.length;){for(;n in e;)n=e[n];if(r=m.get(n),n&&r[1].type==="chunkFlow"&&m.get(n-1)[1].type==="listItemPrefix"&&(f=r[1]._tokenizer.events,a=0,a<f.length&&f[a][1].type==="lineEndingBlank"&&(a+=2),a<f.length&&f[a][1].type==="content"))for(;++a<f.length&&f[a][1].type!=="content";)f[a][1].type==="chunkText"&&(f[a][1]._isInFirstContentOfListItem=!0,a++);if(r[0]==="enter")r[1].contentType&&(Object.assign(e,Z6(m,n)),n=e[n],d=!0);else if(r[1]._container){for(a=n,s=void 0;a--;)if(l=m.get(a),l[1].type==="lineEnding"||l[1].type==="lineEndingBlank")l[0]==="enter"&&(s&&(m.get(s)[1].type="lineEndingBlank"),l[1].type="lineEnding",s=a);else if(!(l[1].type==="linePrefix"||l[1].type==="listItemIndent"))break;s&&(r[1].end={...m.get(s)[1].start},u=m.slice(s,n),u.unshift(r),m.splice(s,n-s+1,u))}}return dr(t,0,Number.POSITIVE_INFINITY,m.slice(0)),!d}function Z6(t,e){const n=t.get(e)[1],r=t.get(e)[2];let s=e-1;const a=[];let l=n._tokenizer;l||(l=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(l._contentTypeTextTrailing=!0));const u=l.events,f=[],d={};let m,p,y=-1,g=n,v=0,w=0;const E=[w];for(;g;){for(;t.get(++s)[1]!==g;);a.push(s),g._tokenizer||(m=r.sliceStream(g),g.next||m.push(null),p&&l.defineSkip(g.start),g._isInFirstContentOfListItem&&(l._gfmTasklistFirstContentOfListItem=!0),l.write(m),g._isInFirstContentOfListItem&&(l._gfmTasklistFirstContentOfListItem=void 0)),p=g,g=g.next}for(g=n;++y<u.length;)u[y][0]==="exit"&&u[y-1][0]==="enter"&&u[y][1].type===u[y-1][1].type&&u[y][1].start.line!==u[y][1].end.line&&(w=y+1,E.push(w),g._tokenizer=void 0,g.previous=void 0,g=g.next);for(l.events=[],g?(g._tokenizer=void 0,g.previous=void 0):E.pop(),y=E.length;y--;){const S=u.slice(E[y],E[y+1]),C=a.pop();f.push([C,C+S.length-1]),t.splice(C,2,S)}for(f.reverse(),y=-1;++y<f.length;)d[v+f[y][0]]=v+f[y][1],v+=f[y][1]-f[y][0]-1;return d}const Q6={resolve:Y6,tokenize:W6},J6={partial:!0,tokenize:X6};function Y6(t){return JE(t),t}function W6(t,e){let n;return r;function r(u){return t.enter("content"),n=t.enter("chunkContent",{contentType:"content"}),s(u)}function s(u){return u===null?a(u):Ie(u)?t.check(J6,l,a)(u):(t.consume(u),s)}function a(u){return t.exit("chunkContent"),t.exit("content"),e(u)}function l(u){return t.consume(u),t.exit("chunkContent"),n.next=t.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,s}}function X6(t,e,n){const r=this;return s;function s(l){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),nt(t,a,"linePrefix")}function a(l){if(l===null||Ie(l))return n(l);const u=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?e(l):t.interrupt(r.parser.constructs.flow,n,e)(l)}}function YE(t,e,n,r,s,a,l,u,f){const d=f||Number.POSITIVE_INFINITY;let m=0;return p;function p(S){return S===60?(t.enter(r),t.enter(s),t.enter(a),t.consume(S),t.exit(a),y):S===null||S===32||S===41||Ff(S)?n(S):(t.enter(r),t.enter(l),t.enter(u),t.enter("chunkString",{contentType:"string"}),w(S))}function y(S){return S===62?(t.enter(a),t.consume(S),t.exit(a),t.exit(s),t.exit(r),e):(t.enter(u),t.enter("chunkString",{contentType:"string"}),g(S))}function g(S){return S===62?(t.exit("chunkString"),t.exit(u),y(S)):S===null||S===60||Ie(S)?n(S):(t.consume(S),S===92?v:g)}function v(S){return S===60||S===62||S===92?(t.consume(S),g):g(S)}function w(S){return!m&&(S===null||S===41||wt(S))?(t.exit("chunkString"),t.exit(u),t.exit(l),t.exit(r),e(S)):m<d&&S===40?(t.consume(S),m++,w):S===41?(t.consume(S),m--,w):S===null||S===32||S===40||Ff(S)?n(S):(t.consume(S),S===92?E:w)}function E(S){return S===40||S===41||S===92?(t.consume(S),w):w(S)}}function WE(t,e,n,r,s,a){const l=this;let u=0,f;return d;function d(g){return t.enter(r),t.enter(s),t.consume(g),t.exit(s),t.enter(a),m}function m(g){return u>999||g===null||g===91||g===93&&!f||g===94&&!u&&"_hiddenFootnoteSupport"in l.parser.constructs?n(g):g===93?(t.exit(a),t.enter(s),t.consume(g),t.exit(s),t.exit(r),e):Ie(g)?(t.enter("lineEnding"),t.consume(g),t.exit("lineEnding"),m):(t.enter("chunkString",{contentType:"string"}),p(g))}function p(g){return g===null||g===91||g===93||Ie(g)||u++>999?(t.exit("chunkString"),m(g)):(t.consume(g),f||(f=!Qe(g)),g===92?y:p)}function y(g){return g===91||g===92||g===93?(t.consume(g),u++,p):p(g)}}function XE(t,e,n,r,s,a){let l;return u;function u(y){return y===34||y===39||y===40?(t.enter(r),t.enter(s),t.consume(y),t.exit(s),l=y===40?41:y,f):n(y)}function f(y){return y===l?(t.enter(s),t.consume(y),t.exit(s),t.exit(r),e):(t.enter(a),d(y))}function d(y){return y===l?(t.exit(a),f(l)):y===null?n(y):Ie(y)?(t.enter("lineEnding"),t.consume(y),t.exit("lineEnding"),nt(t,d,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),m(y))}function m(y){return y===l||y===null||Ie(y)?(t.exit("chunkString"),d(y)):(t.consume(y),y===92?p:m)}function p(y){return y===l||y===92?(t.consume(y),m):m(y)}}function Bl(t,e){let n;return r;function r(s){return Ie(s)?(t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),n=!0,r):Qe(s)?nt(t,r,n?"linePrefix":"lineSuffix")(s):e(s)}}const e8={name:"definition",tokenize:n8},t8={partial:!0,tokenize:r8};function n8(t,e,n){const r=this;let s;return a;function a(g){return t.enter("definition"),l(g)}function l(g){return WE.call(r,t,u,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(g)}function u(g){return s=Br(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),g===58?(t.enter("definitionMarker"),t.consume(g),t.exit("definitionMarker"),f):n(g)}function f(g){return wt(g)?Bl(t,d)(g):d(g)}function d(g){return YE(t,m,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(g)}function m(g){return t.attempt(t8,p,p)(g)}function p(g){return Qe(g)?nt(t,y,"whitespace")(g):y(g)}function y(g){return g===null||Ie(g)?(t.exit("definition"),r.parser.defined.push(s),e(g)):n(g)}}function r8(t,e,n){return r;function r(u){return wt(u)?Bl(t,s)(u):n(u)}function s(u){return XE(t,a,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(u)}function a(u){return Qe(u)?nt(t,l,"whitespace")(u):l(u)}function l(u){return u===null||Ie(u)?e(u):n(u)}}const s8={name:"hardBreakEscape",tokenize:i8};function i8(t,e,n){return r;function r(a){return t.enter("hardBreakEscape"),t.consume(a),s}function s(a){return Ie(a)?(t.exit("hardBreakEscape"),e(a)):n(a)}}const a8={name:"headingAtx",resolve:o8,tokenize:l8};function o8(t,e){let n=t.length-2,r=3,s,a;return t[r][1].type==="whitespace"&&(r+=2),n-2>r&&t[n][1].type==="whitespace"&&(n-=2),t[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&t[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(s={type:"atxHeadingText",start:t[r][1].start,end:t[n][1].end},a={type:"chunkText",start:t[r][1].start,end:t[n][1].end,contentType:"text"},dr(t,r,n-r+1,[["enter",s,e],["enter",a,e],["exit",a,e],["exit",s,e]])),t}function l8(t,e,n){let r=0;return s;function s(m){return t.enter("atxHeading"),a(m)}function a(m){return t.enter("atxHeadingSequence"),l(m)}function l(m){return m===35&&r++<6?(t.consume(m),l):m===null||wt(m)?(t.exit("atxHeadingSequence"),u(m)):n(m)}function u(m){return m===35?(t.enter("atxHeadingSequence"),f(m)):m===null||Ie(m)?(t.exit("atxHeading"),e(m)):Qe(m)?nt(t,u,"whitespace")(m):(t.enter("atxHeadingText"),d(m))}function f(m){return m===35?(t.consume(m),f):(t.exit("atxHeadingSequence"),u(m))}function d(m){return m===null||m===35||wt(m)?(t.exit("atxHeadingText"),u(m)):(t.consume(m),d)}}const c8=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Iw=["pre","script","style","textarea"],u8={concrete:!0,name:"htmlFlow",resolveTo:h8,tokenize:p8},f8={partial:!0,tokenize:g8},d8={partial:!0,tokenize:m8};function h8(t){let e=t.length;for(;e--&&!(t[e][0]==="enter"&&t[e][1].type==="htmlFlow"););return e>1&&t[e-2][1].type==="linePrefix"&&(t[e][1].start=t[e-2][1].start,t[e+1][1].start=t[e-2][1].start,t.splice(e-2,2)),t}function p8(t,e,n){const r=this;let s,a,l,u,f;return d;function d(O){return m(O)}function m(O){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(O),p}function p(O){return O===33?(t.consume(O),y):O===47?(t.consume(O),a=!0,w):O===63?(t.consume(O),s=3,r.interrupt?e:N):zn(O)?(t.consume(O),l=String.fromCharCode(O),E):n(O)}function y(O){return O===45?(t.consume(O),s=2,g):O===91?(t.consume(O),s=5,u=0,v):zn(O)?(t.consume(O),s=4,r.interrupt?e:N):n(O)}function g(O){return O===45?(t.consume(O),r.interrupt?e:N):n(O)}function v(O){const le="CDATA[";return O===le.charCodeAt(u++)?(t.consume(O),u===le.length?r.interrupt?e:ne:v):n(O)}function w(O){return zn(O)?(t.consume(O),l=String.fromCharCode(O),E):n(O)}function E(O){if(O===null||O===47||O===62||wt(O)){const le=O===47,L=l.toLowerCase();return!le&&!a&&Iw.includes(L)?(s=1,r.interrupt?e(O):ne(O)):c8.includes(l.toLowerCase())?(s=6,le?(t.consume(O),S):r.interrupt?e(O):ne(O)):(s=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(O):a?C(O):T(O))}return O===45||Rn(O)?(t.consume(O),l+=String.fromCharCode(O),E):n(O)}function S(O){return O===62?(t.consume(O),r.interrupt?e:ne):n(O)}function C(O){return Qe(O)?(t.consume(O),C):j(O)}function T(O){return O===47?(t.consume(O),j):O===58||O===95||zn(O)?(t.consume(O),M):Qe(O)?(t.consume(O),T):j(O)}function M(O){return O===45||O===46||O===58||O===95||Rn(O)?(t.consume(O),M):I(O)}function I(O){return O===61?(t.consume(O),R):Qe(O)?(t.consume(O),I):T(O)}function R(O){return O===null||O===60||O===61||O===62||O===96?n(O):O===34||O===39?(t.consume(O),f=O,U):Qe(O)?(t.consume(O),R):q(O)}function U(O){return O===f?(t.consume(O),f=null,K):O===null||Ie(O)?n(O):(t.consume(O),U)}function q(O){return O===null||O===34||O===39||O===47||O===60||O===61||O===62||O===96||wt(O)?I(O):(t.consume(O),q)}function K(O){return O===47||O===62||Qe(O)?T(O):n(O)}function j(O){return O===62?(t.consume(O),J):n(O)}function J(O){return O===null||Ie(O)?ne(O):Qe(O)?(t.consume(O),J):n(O)}function ne(O){return O===45&&s===2?(t.consume(O),B):O===60&&s===1?(t.consume(O),G):O===62&&s===4?(t.consume(O),D):O===63&&s===3?(t.consume(O),N):O===93&&s===5?(t.consume(O),re):Ie(O)&&(s===6||s===7)?(t.exit("htmlFlowData"),t.check(f8,H,me)(O)):O===null||Ie(O)?(t.exit("htmlFlowData"),me(O)):(t.consume(O),ne)}function me(O){return t.check(d8,X,H)(O)}function X(O){return t.enter("lineEnding"),t.consume(O),t.exit("lineEnding"),F}function F(O){return O===null||Ie(O)?me(O):(t.enter("htmlFlowData"),ne(O))}function B(O){return O===45?(t.consume(O),N):ne(O)}function G(O){return O===47?(t.consume(O),l="",ie):ne(O)}function ie(O){if(O===62){const le=l.toLowerCase();return Iw.includes(le)?(t.consume(O),D):ne(O)}return zn(O)&&l.length<8?(t.consume(O),l+=String.fromCharCode(O),ie):ne(O)}function re(O){return O===93?(t.consume(O),N):ne(O)}function N(O){return O===62?(t.consume(O),D):O===45&&s===2?(t.consume(O),N):ne(O)}function D(O){return O===null||Ie(O)?(t.exit("htmlFlowData"),H(O)):(t.consume(O),D)}function H(O){return t.exit("htmlFlow"),e(O)}}function m8(t,e,n){const r=this;return s;function s(l){return Ie(l)?(t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),a):n(l)}function a(l){return r.parser.lazy[r.now().line]?n(l):e(l)}}function g8(t,e,n){return r;function r(s){return t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),t.attempt(hc,e,n)}}const y8={name:"htmlText",tokenize:b8};function b8(t,e,n){const r=this;let s,a,l;return u;function u(N){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(N),f}function f(N){return N===33?(t.consume(N),d):N===47?(t.consume(N),I):N===63?(t.consume(N),T):zn(N)?(t.consume(N),q):n(N)}function d(N){return N===45?(t.consume(N),m):N===91?(t.consume(N),a=0,v):zn(N)?(t.consume(N),C):n(N)}function m(N){return N===45?(t.consume(N),g):n(N)}function p(N){return N===null?n(N):N===45?(t.consume(N),y):Ie(N)?(l=p,G(N)):(t.consume(N),p)}function y(N){return N===45?(t.consume(N),g):p(N)}function g(N){return N===62?B(N):N===45?y(N):p(N)}function v(N){const D="CDATA[";return N===D.charCodeAt(a++)?(t.consume(N),a===D.length?w:v):n(N)}function w(N){return N===null?n(N):N===93?(t.consume(N),E):Ie(N)?(l=w,G(N)):(t.consume(N),w)}function E(N){return N===93?(t.consume(N),S):w(N)}function S(N){return N===62?B(N):N===93?(t.consume(N),S):w(N)}function C(N){return N===null||N===62?B(N):Ie(N)?(l=C,G(N)):(t.consume(N),C)}function T(N){return N===null?n(N):N===63?(t.consume(N),M):Ie(N)?(l=T,G(N)):(t.consume(N),T)}function M(N){return N===62?B(N):T(N)}function I(N){return zn(N)?(t.consume(N),R):n(N)}function R(N){return N===45||Rn(N)?(t.consume(N),R):U(N)}function U(N){return Ie(N)?(l=U,G(N)):Qe(N)?(t.consume(N),U):B(N)}function q(N){return N===45||Rn(N)?(t.consume(N),q):N===47||N===62||wt(N)?K(N):n(N)}function K(N){return N===47?(t.consume(N),B):N===58||N===95||zn(N)?(t.consume(N),j):Ie(N)?(l=K,G(N)):Qe(N)?(t.consume(N),K):B(N)}function j(N){return N===45||N===46||N===58||N===95||Rn(N)?(t.consume(N),j):J(N)}function J(N){return N===61?(t.consume(N),ne):Ie(N)?(l=J,G(N)):Qe(N)?(t.consume(N),J):K(N)}function ne(N){return N===null||N===60||N===61||N===62||N===96?n(N):N===34||N===39?(t.consume(N),s=N,me):Ie(N)?(l=ne,G(N)):Qe(N)?(t.consume(N),ne):(t.consume(N),X)}function me(N){return N===s?(t.consume(N),s=void 0,F):N===null?n(N):Ie(N)?(l=me,G(N)):(t.consume(N),me)}function X(N){return N===null||N===34||N===39||N===60||N===61||N===96?n(N):N===47||N===62||wt(N)?K(N):(t.consume(N),X)}function F(N){return N===47||N===62||wt(N)?K(N):n(N)}function B(N){return N===62?(t.consume(N),t.exit("htmlTextData"),t.exit("htmlText"),e):n(N)}function G(N){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(N),t.exit("lineEnding"),ie}function ie(N){return Qe(N)?nt(t,re,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(N):re(N)}function re(N){return t.enter("htmlTextData"),l(N)}}const n0={name:"labelEnd",resolveAll:w8,resolveTo:S8,tokenize:k8},_8={tokenize:E8},v8={tokenize:C8},x8={tokenize:T8};function w8(t){let e=-1;const n=[];for(;++e<t.length;){const r=t[e][1];if(n.push(t[e]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const s=r.type==="labelImage"?4:2;r.type="data",e+=s}}return t.length!==n.length&&dr(t,0,t.length,n),t}function S8(t,e){let n=t.length,r=0,s,a,l,u;for(;n--;)if(s=t[n][1],a){if(s.type==="link"||s.type==="labelLink"&&s._inactive)break;t[n][0]==="enter"&&s.type==="labelLink"&&(s._inactive=!0)}else if(l){if(t[n][0]==="enter"&&(s.type==="labelImage"||s.type==="labelLink")&&!s._balanced&&(a=n,s.type!=="labelLink")){r=2;break}}else s.type==="labelEnd"&&(l=n);const f={type:t[a][1].type==="labelLink"?"link":"image",start:{...t[a][1].start},end:{...t[t.length-1][1].end}},d={type:"label",start:{...t[a][1].start},end:{...t[l][1].end}},m={type:"labelText",start:{...t[a+r+2][1].end},end:{...t[l-2][1].start}};return u=[["enter",f,e],["enter",d,e]],u=Rr(u,t.slice(a+1,a+r+3)),u=Rr(u,[["enter",m,e]]),u=Rr(u,xd(e.parser.constructs.insideSpan.null,t.slice(a+r+4,l-3),e)),u=Rr(u,[["exit",m,e],t[l-2],t[l-1],["exit",d,e]]),u=Rr(u,t.slice(l+1)),u=Rr(u,[["exit",f,e]]),dr(t,a,t.length,u),t}function k8(t,e,n){const r=this;let s=r.events.length,a,l;for(;s--;)if((r.events[s][1].type==="labelImage"||r.events[s][1].type==="labelLink")&&!r.events[s][1]._balanced){a=r.events[s][1];break}return u;function u(y){return a?a._inactive?p(y):(l=r.parser.defined.includes(Br(r.sliceSerialize({start:a.end,end:r.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(y),t.exit("labelMarker"),t.exit("labelEnd"),f):n(y)}function f(y){return y===40?t.attempt(_8,m,l?m:p)(y):y===91?t.attempt(v8,m,l?d:p)(y):l?m(y):p(y)}function d(y){return t.attempt(x8,m,p)(y)}function m(y){return e(y)}function p(y){return a._balanced=!0,n(y)}}function E8(t,e,n){return r;function r(p){return t.enter("resource"),t.enter("resourceMarker"),t.consume(p),t.exit("resourceMarker"),s}function s(p){return wt(p)?Bl(t,a)(p):a(p)}function a(p){return p===41?m(p):YE(t,l,u,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(p)}function l(p){return wt(p)?Bl(t,f)(p):m(p)}function u(p){return n(p)}function f(p){return p===34||p===39||p===40?XE(t,d,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(p):m(p)}function d(p){return wt(p)?Bl(t,m)(p):m(p)}function m(p){return p===41?(t.enter("resourceMarker"),t.consume(p),t.exit("resourceMarker"),t.exit("resource"),e):n(p)}}function C8(t,e,n){const r=this;return s;function s(u){return WE.call(r,t,a,l,"reference","referenceMarker","referenceString")(u)}function a(u){return r.parser.defined.includes(Br(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?e(u):n(u)}function l(u){return n(u)}}function T8(t,e,n){return r;function r(a){return t.enter("reference"),t.enter("referenceMarker"),t.consume(a),t.exit("referenceMarker"),s}function s(a){return a===93?(t.enter("referenceMarker"),t.consume(a),t.exit("referenceMarker"),t.exit("reference"),e):n(a)}}const A8={name:"labelStartImage",resolveAll:n0.resolveAll,tokenize:R8};function R8(t,e,n){const r=this;return s;function s(u){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(u),t.exit("labelImageMarker"),a}function a(u){return u===91?(t.enter("labelMarker"),t.consume(u),t.exit("labelMarker"),t.exit("labelImage"),l):n(u)}function l(u){return u===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(u):e(u)}}const O8={name:"labelStartLink",resolveAll:n0.resolveAll,tokenize:N8};function N8(t,e,n){const r=this;return s;function s(l){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(l),t.exit("labelMarker"),t.exit("labelLink"),a}function a(l){return l===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(l):e(l)}}const Cm={name:"lineEnding",tokenize:I8};function I8(t,e){return n;function n(r){return t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),nt(t,e,"linePrefix")}}const of={name:"thematicBreak",tokenize:M8};function M8(t,e,n){let r=0,s;return a;function a(d){return t.enter("thematicBreak"),l(d)}function l(d){return s=d,u(d)}function u(d){return d===s?(t.enter("thematicBreakSequence"),f(d)):r>=3&&(d===null||Ie(d))?(t.exit("thematicBreak"),e(d)):n(d)}function f(d){return d===s?(t.consume(d),r++,f):(t.exit("thematicBreakSequence"),Qe(d)?nt(t,u,"whitespace")(d):u(d))}}const Zn={continuation:{tokenize:z8},exit:B8,name:"list",tokenize:L8},D8={partial:!0,tokenize:U8},j8={partial:!0,tokenize:P8};function L8(t,e,n){const r=this,s=r.events[r.events.length-1];let a=s&&s[1].type==="linePrefix"?s[2].sliceSerialize(s[1],!0).length:0,l=0;return u;function u(g){const v=r.containerState.type||(g===42||g===43||g===45?"listUnordered":"listOrdered");if(v==="listUnordered"?!r.containerState.marker||g===r.containerState.marker:Ug(g)){if(r.containerState.type||(r.containerState.type=v,t.enter(v,{_container:!0})),v==="listUnordered")return t.enter("listItemPrefix"),g===42||g===45?t.check(of,n,d)(g):d(g);if(!r.interrupt||g===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),f(g)}return n(g)}function f(g){return Ug(g)&&++l<10?(t.consume(g),f):(!r.interrupt||l<2)&&(r.containerState.marker?g===r.containerState.marker:g===41||g===46)?(t.exit("listItemValue"),d(g)):n(g)}function d(g){return t.enter("listItemMarker"),t.consume(g),t.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||g,t.check(hc,r.interrupt?n:m,t.attempt(D8,y,p))}function m(g){return r.containerState.initialBlankLine=!0,a++,y(g)}function p(g){return Qe(g)?(t.enter("listItemPrefixWhitespace"),t.consume(g),t.exit("listItemPrefixWhitespace"),y):n(g)}function y(g){return r.containerState.size=a+r.sliceSerialize(t.exit("listItemPrefix"),!0).length,e(g)}}function z8(t,e,n){const r=this;return r.containerState._closeFlow=void 0,t.check(hc,s,a);function s(u){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,nt(t,e,"listItemIndent",r.containerState.size+1)(u)}function a(u){return r.containerState.furtherBlankLines||!Qe(u)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,l(u)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,t.attempt(j8,e,l)(u))}function l(u){return r.containerState._closeFlow=!0,r.interrupt=void 0,nt(t,t.attempt(Zn,e,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(u)}}function P8(t,e,n){const r=this;return nt(t,s,"listItemIndent",r.containerState.size+1);function s(a){const l=r.events[r.events.length-1];return l&&l[1].type==="listItemIndent"&&l[2].sliceSerialize(l[1],!0).length===r.containerState.size?e(a):n(a)}}function B8(t){t.exit(this.containerState.type)}function U8(t,e,n){const r=this;return nt(t,s,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function s(a){const l=r.events[r.events.length-1];return!Qe(a)&&l&&l[1].type==="listItemPrefixWhitespace"?e(a):n(a)}}const Mw={name:"setextUnderline",resolveTo:$8,tokenize:q8};function $8(t,e){let n=t.length,r,s,a;for(;n--;)if(t[n][0]==="enter"){if(t[n][1].type==="content"){r=n;break}t[n][1].type==="paragraph"&&(s=n)}else t[n][1].type==="content"&&t.splice(n,1),!a&&t[n][1].type==="definition"&&(a=n);const l={type:"setextHeading",start:{...t[r][1].start},end:{...t[t.length-1][1].end}};return t[s][1].type="setextHeadingText",a?(t.splice(s,0,["enter",l,e]),t.splice(a+1,0,["exit",t[r][1],e]),t[r][1].end={...t[a][1].end}):t[r][1]=l,t.push(["exit",l,e]),t}function q8(t,e,n){const r=this;let s;return a;function a(d){let m=r.events.length,p;for(;m--;)if(r.events[m][1].type!=="lineEnding"&&r.events[m][1].type!=="linePrefix"&&r.events[m][1].type!=="content"){p=r.events[m][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||p)?(t.enter("setextHeadingLine"),s=d,l(d)):n(d)}function l(d){return t.enter("setextHeadingLineSequence"),u(d)}function u(d){return d===s?(t.consume(d),u):(t.exit("setextHeadingLineSequence"),Qe(d)?nt(t,f,"lineSuffix")(d):f(d))}function f(d){return d===null||Ie(d)?(t.exit("setextHeadingLine"),e(d)):n(d)}}const F8={tokenize:V8};function V8(t){const e=this,n=t.attempt(hc,r,t.attempt(this.parser.constructs.flowInitial,s,nt(t,t.attempt(this.parser.constructs.flow,s,t.attempt(Q6,s)),"linePrefix")));return n;function r(a){if(a===null){t.consume(a);return}return t.enter("lineEndingBlank"),t.consume(a),t.exit("lineEndingBlank"),e.currentConstruct=void 0,n}function s(a){if(a===null){t.consume(a);return}return t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),e.currentConstruct=void 0,n}}const H8={resolveAll:tC()},G8=eC("string"),K8=eC("text");function eC(t){return{resolveAll:tC(t==="text"?Z8:void 0),tokenize:e};function e(n){const r=this,s=this.parser.constructs[t],a=n.attempt(s,l,u);return l;function l(m){return d(m)?a(m):u(m)}function u(m){if(m===null){n.consume(m);return}return n.enter("data"),n.consume(m),f}function f(m){return d(m)?(n.exit("data"),a(m)):(n.consume(m),f)}function d(m){if(m===null)return!0;const p=s[m];let y=-1;if(p)for(;++y<p.length;){const g=p[y];if(!g.previous||g.previous.call(r,r.previous))return!0}return!1}}}function tC(t){return e;function e(n,r){let s=-1,a;for(;++s<=n.length;)a===void 0?n[s]&&n[s][1].type==="data"&&(a=s,s++):(!n[s]||n[s][1].type!=="data")&&(s!==a+2&&(n[a][1].end=n[s-1][1].end,n.splice(a+2,s-a-2),s=a+2),a=void 0);return t?t(n,r):n}}function Z8(t,e){let n=0;for(;++n<=t.length;)if((n===t.length||t[n][1].type==="lineEnding")&&t[n-1][1].type==="data"){const r=t[n-1][1],s=e.sliceStream(r);let a=s.length,l=-1,u=0,f;for(;a--;){const d=s[a];if(typeof d=="string"){for(l=d.length;d.charCodeAt(l-1)===32;)u++,l--;if(l)break;l=-1}else if(d===-2)f=!0,u++;else if(d!==-1){a++;break}}if(e._contentTypeTextTrailing&&n===t.length&&(u=0),u){const d={type:n===t.length||f||u<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:a?l:r.start._bufferIndex+l,_index:r.start._index+a,line:r.end.line,column:r.end.column-u,offset:r.end.offset-u},end:{...r.end}};r.end={...d.start},r.start.offset===r.end.offset?Object.assign(r,d):(t.splice(n,0,["enter",d,e],["exit",d,e]),n+=2)}n++}return t}const Q8={42:Zn,43:Zn,45:Zn,48:Zn,49:Zn,50:Zn,51:Zn,52:Zn,53:Zn,54:Zn,55:Zn,56:Zn,57:Zn,62:KE},J8={91:e8},Y8={[-2]:Em,[-1]:Em,32:Em},W8={35:a8,42:of,45:[Mw,of],60:u8,61:Mw,95:of,96:Nw,126:Nw},X8={38:QE,92:ZE},eB={[-5]:Cm,[-4]:Cm,[-3]:Cm,33:A8,38:QE,42:$g,60:[O6,y8],91:O8,92:[s8,ZE],93:n0,95:$g,96:F6},tB={null:[$g,H8]},nB={null:[42,95]},rB={null:[]},sB=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:nB,contentInitial:J8,disable:rB,document:Q8,flow:W8,flowInitial:Y8,insideSpan:tB,string:X8,text:eB},Symbol.toStringTag,{value:"Module"}));function iB(t,e,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const s={},a=[];let l=[],u=[];const f={attempt:U(I),check:U(R),consume:C,enter:T,exit:M,interrupt:U(R,{interrupt:!0})},d={code:null,containerState:{},defineSkip:w,events:[],now:v,parser:t,previous:null,sliceSerialize:y,sliceStream:g,write:p};let m=e.tokenize.call(d,f);return e.resolveAll&&a.push(e),d;function p(J){return l=Rr(l,J),E(),l[l.length-1]!==null?[]:(q(e,0),d.events=xd(a,d.events,d),d.events)}function y(J,ne){return oB(g(J),ne)}function g(J){return aB(l,J)}function v(){const{_bufferIndex:J,_index:ne,line:me,column:X,offset:F}=r;return{_bufferIndex:J,_index:ne,line:me,column:X,offset:F}}function w(J){s[J.line]=J.column,j()}function E(){let J;for(;r._index<l.length;){const ne=l[r._index];if(typeof ne=="string")for(J=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===J&&r._bufferIndex<ne.length;)S(ne.charCodeAt(r._bufferIndex));else S(ne)}}function S(J){m=m(J)}function C(J){Ie(J)?(r.line++,r.column=1,r.offset+=J===-3?2:1,j()):J!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===l[r._index].length&&(r._bufferIndex=-1,r._index++)),d.previous=J}function T(J,ne){const me=ne||{};return me.type=J,me.start=v(),d.events.push(["enter",me,d]),u.push(me),me}function M(J){const ne=u.pop();return ne.end=v(),d.events.push(["exit",ne,d]),ne}function I(J,ne){q(J,ne.from)}function R(J,ne){ne.restore()}function U(J,ne){return me;function me(X,F,B){let G,ie,re,N;return Array.isArray(X)?H(X):"tokenize"in X?H([X]):D(X);function D(P){return he;function he(xe){const _e=xe!==null&&P[xe],Ce=xe!==null&&P.null,Me=[...Array.isArray(_e)?_e:_e?[_e]:[],...Array.isArray(Ce)?Ce:Ce?[Ce]:[]];return H(Me)(xe)}}function H(P){return G=P,ie=0,P.length===0?B:O(P[ie])}function O(P){return he;function he(xe){return N=K(),re=P,P.partial||(d.currentConstruct=P),P.name&&d.parser.constructs.disable.null.includes(P.name)?L():P.tokenize.call(ne?Object.assign(Object.create(d),ne):d,f,le,L)(xe)}}function le(P){return J(re,N),F}function L(P){return N.restore(),++ie<G.length?O(G[ie]):B}}}function q(J,ne){J.resolveAll&&!a.includes(J)&&a.push(J),J.resolve&&dr(d.events,ne,d.events.length-ne,J.resolve(d.events.slice(ne),d)),J.resolveTo&&(d.events=J.resolveTo(d.events,d))}function K(){const J=v(),ne=d.previous,me=d.currentConstruct,X=d.events.length,F=Array.from(u);return{from:X,restore:B};function B(){r=J,d.previous=ne,d.currentConstruct=me,d.events.length=X,u=F,j()}}function j(){r.line in s&&r.column<2&&(r.column=s[r.line],r.offset+=s[r.line]-1)}}function aB(t,e){const n=e.start._index,r=e.start._bufferIndex,s=e.end._index,a=e.end._bufferIndex;let l;if(n===s)l=[t[n].slice(r,a)];else{if(l=t.slice(n,s),r>-1){const u=l[0];typeof u=="string"?l[0]=u.slice(r):l.shift()}a>0&&l.push(t[s].slice(0,a))}return l}function oB(t,e){let n=-1;const r=[];let s;for(;++n<t.length;){const a=t[n];let l;if(typeof a=="string")l=a;else switch(a){case-5:{l="\r";break}case-4:{l=`
`;break}case-3:{l=`\r
`;break}case-2:{l=e?" ":"	";break}case-1:{if(!e&&s)continue;l=" ";break}default:l=String.fromCharCode(a)}s=a===-2,r.push(l)}return r.join("")}function lB(t){const r={constructs:HE([sB,...(t||{}).extensions||[]]),content:s(S6),defined:[],document:s(E6),flow:s(F8),lazy:{},string:s(G8),text:s(K8)};return r;function s(a){return l;function l(u){return iB(r,a,u)}}}function cB(t){for(;!JE(t););return t}const Dw=/[\0\t\n\r]/g;function uB(){let t=1,e="",n=!0,r;return s;function s(a,l,u){const f=[];let d,m,p,y,g;for(a=e+(typeof a=="string"?a.toString():new TextDecoder(l||void 0).decode(a)),p=0,e="",n&&(a.charCodeAt(0)===65279&&p++,n=void 0);p<a.length;){if(Dw.lastIndex=p,d=Dw.exec(a),y=d&&d.index!==void 0?d.index:a.length,g=a.charCodeAt(y),!d){e=a.slice(p);break}if(g===10&&p===y&&r)f.push(-3),r=void 0;else switch(r&&(f.push(-5),r=void 0),p<y&&(f.push(a.slice(p,y)),t+=y-p),g){case 0:{f.push(65533),t++;break}case 9:{for(m=Math.ceil(t/4)*4,f.push(-2);t++<m;)f.push(-1);break}case 10:{f.push(-4),t=1;break}default:r=!0,t=1}p=y+1}return u&&(r&&f.push(-5),e&&f.push(e),f.push(null)),f}}const fB=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function dB(t){return t.replace(fB,hB)}function hB(t,e,n){if(e)return e;if(n.charCodeAt(0)===35){const s=n.charCodeAt(1),a=s===120||s===88;return GE(n.slice(a?2:1),a?16:10)}return t0(n)||t}const nC={}.hasOwnProperty;function pB(t,e,n){return typeof e!="string"&&(n=e,e=void 0),mB(n)(cB(lB(n).document().write(uB()(t,e,!0))))}function mB(t){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:a(Sn),autolinkProtocol:K,autolinkEmail:K,atxHeading:a(fn),blockQuote:a(Ce),characterEscape:K,characterReference:K,codeFenced:a(Me),codeFencedFenceInfo:l,codeFencedFenceMeta:l,codeIndented:a(Me,l),codeText:a(st,l),codeTextData:K,data:K,codeFlowValue:K,definition:a(Et),definitionDestinationString:l,definitionLabelString:l,definitionTitleString:l,emphasis:a(Nt),hardBreakEscape:a(rn),hardBreakTrailing:a(rn),htmlFlow:a(Xn,l),htmlFlowData:K,htmlText:a(Xn,l),htmlTextData:K,image:a(er),label:l,link:a(Sn),listItem:a(ke),listItemValue:y,listOrdered:a(dn,p),listUnordered:a(dn),paragraph:a(Ve),reference:O,referenceString:l,resourceDestinationString:l,resourceTitleString:l,setextHeading:a(fn),strong:a(He),thematicBreak:a(St)},exit:{atxHeading:f(),atxHeadingSequence:I,autolink:f(),autolinkEmail:_e,autolinkProtocol:xe,blockQuote:f(),characterEscapeValue:j,characterReferenceMarkerHexadecimal:L,characterReferenceMarkerNumeric:L,characterReferenceValue:P,characterReference:he,codeFenced:f(E),codeFencedFence:w,codeFencedFenceInfo:g,codeFencedFenceMeta:v,codeFlowValue:j,codeIndented:f(S),codeText:f(F),codeTextData:j,data:j,definition:f(),definitionDestinationString:M,definitionLabelString:C,definitionTitleString:T,emphasis:f(),hardBreakEscape:f(ne),hardBreakTrailing:f(ne),htmlFlow:f(me),htmlFlowData:j,htmlText:f(X),htmlTextData:j,image:f(G),label:re,labelText:ie,lineEnding:J,link:f(B),listItem:f(),listOrdered:f(),listUnordered:f(),paragraph:f(),referenceString:le,resourceDestinationString:N,resourceTitleString:D,resource:H,setextHeading:f(q),setextHeadingLineSequence:U,setextHeadingText:R,strong:f(),thematicBreak:f()}};rC(e,(t||{}).mdastExtensions||[]);const n={};return r;function r(se){let ge={type:"root",children:[]};const ue={stack:[ge],tokenStack:[],config:e,enter:u,exit:d,buffer:l,resume:m,data:n},ye=[];let ve=-1;for(;++ve<se.length;)if(se[ve][1].type==="listOrdered"||se[ve][1].type==="listUnordered")if(se[ve][0]==="enter")ye.push(ve);else{const Ue=ye.pop();ve=s(se,Ue,ve)}for(ve=-1;++ve<se.length;){const Ue=e[se[ve][0]];nC.call(Ue,se[ve][1].type)&&Ue[se[ve][1].type].call(Object.assign({sliceSerialize:se[ve][2].sliceSerialize},ue),se[ve][1])}if(ue.tokenStack.length>0){const Ue=ue.tokenStack[ue.tokenStack.length-1];(Ue[1]||jw).call(ue,void 0,Ue[0])}for(ge.position={start:Xs(se.length>0?se[0][1].start:{line:1,column:1,offset:0}),end:Xs(se.length>0?se[se.length-2][1].end:{line:1,column:1,offset:0})},ve=-1;++ve<e.transforms.length;)ge=e.transforms[ve](ge)||ge;return ge}function s(se,ge,ue){let ye=ge-1,ve=-1,Ue=!1,mt,vt,lt,ct;for(;++ye<=ue;){const Ne=se[ye];switch(Ne[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Ne[0]==="enter"?ve++:ve--,ct=void 0;break}case"lineEndingBlank":{Ne[0]==="enter"&&(mt&&!ct&&!ve&&!lt&&(lt=ye),ct=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:ct=void 0}if(!ve&&Ne[0]==="enter"&&Ne[1].type==="listItemPrefix"||ve===-1&&Ne[0]==="exit"&&(Ne[1].type==="listUnordered"||Ne[1].type==="listOrdered")){if(mt){let gt=ye;for(vt=void 0;gt--;){const Ge=se[gt];if(Ge[1].type==="lineEnding"||Ge[1].type==="lineEndingBlank"){if(Ge[0]==="exit")continue;vt&&(se[vt][1].type="lineEndingBlank",Ue=!0),Ge[1].type="lineEnding",vt=gt}else if(!(Ge[1].type==="linePrefix"||Ge[1].type==="blockQuotePrefix"||Ge[1].type==="blockQuotePrefixWhitespace"||Ge[1].type==="blockQuoteMarker"||Ge[1].type==="listItemIndent"))break}lt&&(!vt||lt<vt)&&(mt._spread=!0),mt.end=Object.assign({},vt?se[vt][1].start:Ne[1].end),se.splice(vt||ye,0,["exit",mt,Ne[2]]),ye++,ue++}if(Ne[1].type==="listItemPrefix"){const gt={type:"listItem",_spread:!1,start:Object.assign({},Ne[1].start),end:void 0};mt=gt,se.splice(ye,0,["enter",gt,Ne[2]]),ye++,ue++,lt=void 0,ct=!0}}}return se[ge][1]._spread=Ue,ue}function a(se,ge){return ue;function ue(ye){u.call(this,se(ye),ye),ge&&ge.call(this,ye)}}function l(){this.stack.push({type:"fragment",children:[]})}function u(se,ge,ue){this.stack[this.stack.length-1].children.push(se),this.stack.push(se),this.tokenStack.push([ge,ue||void 0]),se.position={start:Xs(ge.start),end:void 0}}function f(se){return ge;function ge(ue){se&&se.call(this,ue),d.call(this,ue)}}function d(se,ge){const ue=this.stack.pop(),ye=this.tokenStack.pop();if(ye)ye[0].type!==se.type&&(ge?ge.call(this,se,ye[0]):(ye[1]||jw).call(this,se,ye[0]));else throw new Error("Cannot close `"+se.type+"` ("+Pl({start:se.start,end:se.end})+"): its not open");ue.position.end=Xs(se.end)}function m(){return e0(this.stack.pop())}function p(){this.data.expectingFirstListItemValue=!0}function y(se){if(this.data.expectingFirstListItemValue){const ge=this.stack[this.stack.length-2];ge.start=Number.parseInt(this.sliceSerialize(se),10),this.data.expectingFirstListItemValue=void 0}}function g(){const se=this.resume(),ge=this.stack[this.stack.length-1];ge.lang=se}function v(){const se=this.resume(),ge=this.stack[this.stack.length-1];ge.meta=se}function w(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function E(){const se=this.resume(),ge=this.stack[this.stack.length-1];ge.value=se.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function S(){const se=this.resume(),ge=this.stack[this.stack.length-1];ge.value=se.replace(/(\r?\n|\r)$/g,"")}function C(se){const ge=this.resume(),ue=this.stack[this.stack.length-1];ue.label=ge,ue.identifier=Br(this.sliceSerialize(se)).toLowerCase()}function T(){const se=this.resume(),ge=this.stack[this.stack.length-1];ge.title=se}function M(){const se=this.resume(),ge=this.stack[this.stack.length-1];ge.url=se}function I(se){const ge=this.stack[this.stack.length-1];if(!ge.depth){const ue=this.sliceSerialize(se).length;ge.depth=ue}}function R(){this.data.setextHeadingSlurpLineEnding=!0}function U(se){const ge=this.stack[this.stack.length-1];ge.depth=this.sliceSerialize(se).codePointAt(0)===61?1:2}function q(){this.data.setextHeadingSlurpLineEnding=void 0}function K(se){const ue=this.stack[this.stack.length-1].children;let ye=ue[ue.length-1];(!ye||ye.type!=="text")&&(ye=Ae(),ye.position={start:Xs(se.start),end:void 0},ue.push(ye)),this.stack.push(ye)}function j(se){const ge=this.stack.pop();ge.value+=this.sliceSerialize(se),ge.position.end=Xs(se.end)}function J(se){const ge=this.stack[this.stack.length-1];if(this.data.atHardBreak){const ue=ge.children[ge.children.length-1];ue.position.end=Xs(se.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(ge.type)&&(K.call(this,se),j.call(this,se))}function ne(){this.data.atHardBreak=!0}function me(){const se=this.resume(),ge=this.stack[this.stack.length-1];ge.value=se}function X(){const se=this.resume(),ge=this.stack[this.stack.length-1];ge.value=se}function F(){const se=this.resume(),ge=this.stack[this.stack.length-1];ge.value=se}function B(){const se=this.stack[this.stack.length-1];if(this.data.inReference){const ge=this.data.referenceType||"shortcut";se.type+="Reference",se.referenceType=ge,delete se.url,delete se.title}else delete se.identifier,delete se.label;this.data.referenceType=void 0}function G(){const se=this.stack[this.stack.length-1];if(this.data.inReference){const ge=this.data.referenceType||"shortcut";se.type+="Reference",se.referenceType=ge,delete se.url,delete se.title}else delete se.identifier,delete se.label;this.data.referenceType=void 0}function ie(se){const ge=this.sliceSerialize(se),ue=this.stack[this.stack.length-2];ue.label=dB(ge),ue.identifier=Br(ge).toLowerCase()}function re(){const se=this.stack[this.stack.length-1],ge=this.resume(),ue=this.stack[this.stack.length-1];if(this.data.inReference=!0,ue.type==="link"){const ye=se.children;ue.children=ye}else ue.alt=ge}function N(){const se=this.resume(),ge=this.stack[this.stack.length-1];ge.url=se}function D(){const se=this.resume(),ge=this.stack[this.stack.length-1];ge.title=se}function H(){this.data.inReference=void 0}function O(){this.data.referenceType="collapsed"}function le(se){const ge=this.resume(),ue=this.stack[this.stack.length-1];ue.label=ge,ue.identifier=Br(this.sliceSerialize(se)).toLowerCase(),this.data.referenceType="full"}function L(se){this.data.characterReferenceType=se.type}function P(se){const ge=this.sliceSerialize(se),ue=this.data.characterReferenceType;let ye;ue?(ye=GE(ge,ue==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):ye=t0(ge);const ve=this.stack[this.stack.length-1];ve.value+=ye}function he(se){const ge=this.stack.pop();ge.position.end=Xs(se.end)}function xe(se){j.call(this,se);const ge=this.stack[this.stack.length-1];ge.url=this.sliceSerialize(se)}function _e(se){j.call(this,se);const ge=this.stack[this.stack.length-1];ge.url="mailto:"+this.sliceSerialize(se)}function Ce(){return{type:"blockquote",children:[]}}function Me(){return{type:"code",lang:null,meta:null,value:""}}function st(){return{type:"inlineCode",value:""}}function Et(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Nt(){return{type:"emphasis",children:[]}}function fn(){return{type:"heading",depth:0,children:[]}}function rn(){return{type:"break"}}function Xn(){return{type:"html",value:""}}function er(){return{type:"image",title:null,url:"",alt:null}}function Sn(){return{type:"link",title:null,url:"",children:[]}}function dn(se){return{type:"list",ordered:se.type==="listOrdered",start:null,spread:se._spread,children:[]}}function ke(se){return{type:"listItem",spread:se._spread,checked:null,children:[]}}function Ve(){return{type:"paragraph",children:[]}}function He(){return{type:"strong",children:[]}}function Ae(){return{type:"text",value:""}}function St(){return{type:"thematicBreak"}}}function Xs(t){return{line:t.line,column:t.column,offset:t.offset}}function rC(t,e){let n=-1;for(;++n<e.length;){const r=e[n];Array.isArray(r)?rC(t,r):gB(t,r)}}function gB(t,e){let n;for(n in e)if(nC.call(e,n))switch(n){case"canContainEols":{const r=e[n];r&&t[n].push(...r);break}case"transforms":{const r=e[n];r&&t[n].push(...r);break}case"enter":case"exit":{const r=e[n];r&&Object.assign(t[n],r);break}}}function jw(t,e){throw t?new Error("Cannot close `"+t.type+"` ("+Pl({start:t.start,end:t.end})+"): a different token (`"+e.type+"`, "+Pl({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+Pl({start:e.start,end:e.end})+") is still open")}function yB(t){const e=this;e.parser=n;function n(r){return pB(r,{...e.data("settings"),...t,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function bB(t,e){const n={type:"element",tagName:"blockquote",properties:{},children:t.wrap(t.all(e),!0)};return t.patch(e,n),t.applyData(e,n)}function _B(t,e){const n={type:"element",tagName:"br",properties:{},children:[]};return t.patch(e,n),[t.applyData(e,n),{type:"text",value:`
`}]}function vB(t,e){const n=e.value?e.value+`
`:"",r={},s=e.lang?e.lang.split(/\s+/):[];s.length>0&&(r.className=["language-"+s[0]]);let a={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return e.meta&&(a.data={meta:e.meta}),t.patch(e,a),a=t.applyData(e,a),a={type:"element",tagName:"pre",properties:{},children:[a]},t.patch(e,a),a}function xB(t,e){const n={type:"element",tagName:"del",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function wB(t,e){const n={type:"element",tagName:"em",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function SB(t,e){const n=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",r=String(e.identifier).toUpperCase(),s=po(r.toLowerCase()),a=t.footnoteOrder.indexOf(r);let l,u=t.footnoteCounts.get(r);u===void 0?(u=0,t.footnoteOrder.push(r),l=t.footnoteOrder.length):l=a+1,u+=1,t.footnoteCounts.set(r,u);const f={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+s,id:n+"fnref-"+s+(u>1?"-"+u:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(l)}]};t.patch(e,f);const d={type:"element",tagName:"sup",properties:{},children:[f]};return t.patch(e,d),t.applyData(e,d)}function kB(t,e){const n={type:"element",tagName:"h"+e.depth,properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function EB(t,e){if(t.options.allowDangerousHtml){const n={type:"raw",value:e.value};return t.patch(e,n),t.applyData(e,n)}}function sC(t,e){const n=e.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+r}];const s=t.all(e),a=s[0];a&&a.type==="text"?a.value="["+a.value:s.unshift({type:"text",value:"["});const l=s[s.length-1];return l&&l.type==="text"?l.value+=r:s.push({type:"text",value:r}),s}function CB(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return sC(t,e);const s={src:po(r.url||""),alt:e.alt};r.title!==null&&r.title!==void 0&&(s.title=r.title);const a={type:"element",tagName:"img",properties:s,children:[]};return t.patch(e,a),t.applyData(e,a)}function TB(t,e){const n={src:po(e.url)};e.alt!==null&&e.alt!==void 0&&(n.alt=e.alt),e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"img",properties:n,children:[]};return t.patch(e,r),t.applyData(e,r)}function AB(t,e){const n={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};t.patch(e,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return t.patch(e,r),t.applyData(e,r)}function RB(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return sC(t,e);const s={href:po(r.url||"")};r.title!==null&&r.title!==void 0&&(s.title=r.title);const a={type:"element",tagName:"a",properties:s,children:t.all(e)};return t.patch(e,a),t.applyData(e,a)}function OB(t,e){const n={href:po(e.url)};e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"a",properties:n,children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function NB(t,e,n){const r=t.all(e),s=n?IB(n):iC(e),a={},l=[];if(typeof e.checked=="boolean"){const m=r[0];let p;m&&m.type==="element"&&m.tagName==="p"?p=m:(p={type:"element",tagName:"p",properties:{},children:[]},r.unshift(p)),p.children.length>0&&p.children.unshift({type:"text",value:" "}),p.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),a.className=["task-list-item"]}let u=-1;for(;++u<r.length;){const m=r[u];(s||u!==0||m.type!=="element"||m.tagName!=="p")&&l.push({type:"text",value:`
`}),m.type==="element"&&m.tagName==="p"&&!s?l.push(...m.children):l.push(m)}const f=r[r.length-1];f&&(s||f.type!=="element"||f.tagName!=="p")&&l.push({type:"text",value:`
`});const d={type:"element",tagName:"li",properties:a,children:l};return t.patch(e,d),t.applyData(e,d)}function IB(t){let e=!1;if(t.type==="list"){e=t.spread||!1;const n=t.children;let r=-1;for(;!e&&++r<n.length;)e=iC(n[r])}return e}function iC(t){const e=t.spread;return e??t.children.length>1}function MB(t,e){const n={},r=t.all(e);let s=-1;for(typeof e.start=="number"&&e.start!==1&&(n.start=e.start);++s<r.length;){const l=r[s];if(l.type==="element"&&l.tagName==="li"&&l.properties&&Array.isArray(l.properties.className)&&l.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const a={type:"element",tagName:e.ordered?"ol":"ul",properties:n,children:t.wrap(r,!0)};return t.patch(e,a),t.applyData(e,a)}function DB(t,e){const n={type:"element",tagName:"p",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function jB(t,e){const n={type:"root",children:t.wrap(t.all(e))};return t.patch(e,n),t.applyData(e,n)}function LB(t,e){const n={type:"element",tagName:"strong",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function zB(t,e){const n=t.all(e),r=n.shift(),s=[];if(r){const l={type:"element",tagName:"thead",properties:{},children:t.wrap([r],!0)};t.patch(e.children[0],l),s.push(l)}if(n.length>0){const l={type:"element",tagName:"tbody",properties:{},children:t.wrap(n,!0)},u=Jy(e.children[1]),f=PE(e.children[e.children.length-1]);u&&f&&(l.position={start:u,end:f}),s.push(l)}const a={type:"element",tagName:"table",properties:{},children:t.wrap(s,!0)};return t.patch(e,a),t.applyData(e,a)}function PB(t,e,n){const r=n?n.children:void 0,a=(r?r.indexOf(e):1)===0?"th":"td",l=n&&n.type==="table"?n.align:void 0,u=l?l.length:e.children.length;let f=-1;const d=[];for(;++f<u;){const p=e.children[f],y={},g=l?l[f]:void 0;g&&(y.align=g);let v={type:"element",tagName:a,properties:y,children:[]};p&&(v.children=t.all(p),t.patch(p,v),v=t.applyData(p,v)),d.push(v)}const m={type:"element",tagName:"tr",properties:{},children:t.wrap(d,!0)};return t.patch(e,m),t.applyData(e,m)}function BB(t,e){const n={type:"element",tagName:"td",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}const Lw=9,zw=32;function UB(t){const e=String(t),n=/\r?\n|\r/g;let r=n.exec(e),s=0;const a=[];for(;r;)a.push(Pw(e.slice(s,r.index),s>0,!0),r[0]),s=r.index+r[0].length,r=n.exec(e);return a.push(Pw(e.slice(s),s>0,!1)),a.join("")}function Pw(t,e,n){let r=0,s=t.length;if(e){let a=t.codePointAt(r);for(;a===Lw||a===zw;)r++,a=t.codePointAt(r)}if(n){let a=t.codePointAt(s-1);for(;a===Lw||a===zw;)s--,a=t.codePointAt(s-1)}return s>r?t.slice(r,s):""}function $B(t,e){const n={type:"text",value:UB(String(e.value))};return t.patch(e,n),t.applyData(e,n)}function qB(t,e){const n={type:"element",tagName:"hr",properties:{},children:[]};return t.patch(e,n),t.applyData(e,n)}const FB={blockquote:bB,break:_B,code:vB,delete:xB,emphasis:wB,footnoteReference:SB,heading:kB,html:EB,imageReference:CB,image:TB,inlineCode:AB,linkReference:RB,link:OB,listItem:NB,list:MB,paragraph:DB,root:jB,strong:LB,table:zB,tableCell:BB,tableRow:PB,text:$B,thematicBreak:qB,toml:Bu,yaml:Bu,definition:Bu,footnoteDefinition:Bu};function Bu(){}const aC=-1,wd=0,Ul=1,Vf=2,r0=3,s0=4,i0=5,a0=6,oC=7,lC=8,Bw=typeof self=="object"?self:globalThis,VB=(t,e)=>{const n=(s,a)=>(t.set(a,s),s),r=s=>{if(t.has(s))return t.get(s);const[a,l]=e[s];switch(a){case wd:case aC:return n(l,s);case Ul:{const u=n([],s);for(const f of l)u.push(r(f));return u}case Vf:{const u=n({},s);for(const[f,d]of l)u[r(f)]=r(d);return u}case r0:return n(new Date(l),s);case s0:{const{source:u,flags:f}=l;return n(new RegExp(u,f),s)}case i0:{const u=n(new Map,s);for(const[f,d]of l)u.set(r(f),r(d));return u}case a0:{const u=n(new Set,s);for(const f of l)u.add(r(f));return u}case oC:{const{name:u,message:f}=l;return n(new Bw[u](f),s)}case lC:return n(BigInt(l),s);case"BigInt":return n(Object(BigInt(l)),s);case"ArrayBuffer":return n(new Uint8Array(l).buffer,l);case"DataView":{const{buffer:u}=new Uint8Array(l);return n(new DataView(u),l)}}return n(new Bw[a](l),s)};return r},Uw=t=>VB(new Map,t)(0),za="",{toString:HB}={},{keys:GB}=Object,gl=t=>{const e=typeof t;if(e!=="object"||!t)return[wd,e];const n=HB.call(t).slice(8,-1);switch(n){case"Array":return[Ul,za];case"Object":return[Vf,za];case"Date":return[r0,za];case"RegExp":return[s0,za];case"Map":return[i0,za];case"Set":return[a0,za];case"DataView":return[Ul,n]}return n.includes("Array")?[Ul,n]:n.includes("Error")?[oC,n]:[Vf,n]},Uu=([t,e])=>t===wd&&(e==="function"||e==="symbol"),KB=(t,e,n,r)=>{const s=(l,u)=>{const f=r.push(l)-1;return n.set(u,f),f},a=l=>{if(n.has(l))return n.get(l);let[u,f]=gl(l);switch(u){case wd:{let m=l;switch(f){case"bigint":u=lC,m=l.toString();break;case"function":case"symbol":if(t)throw new TypeError("unable to serialize "+f);m=null;break;case"undefined":return s([aC],l)}return s([u,m],l)}case Ul:{if(f){let y=l;return f==="DataView"?y=new Uint8Array(l.buffer):f==="ArrayBuffer"&&(y=new Uint8Array(l)),s([f,[...y]],l)}const m=[],p=s([u,m],l);for(const y of l)m.push(a(y));return p}case Vf:{if(f)switch(f){case"BigInt":return s([f,l.toString()],l);case"Boolean":case"Number":case"String":return s([f,l.valueOf()],l)}if(e&&"toJSON"in l)return a(l.toJSON());const m=[],p=s([u,m],l);for(const y of GB(l))(t||!Uu(gl(l[y])))&&m.push([a(y),a(l[y])]);return p}case r0:return s([u,l.toISOString()],l);case s0:{const{source:m,flags:p}=l;return s([u,{source:m,flags:p}],l)}case i0:{const m=[],p=s([u,m],l);for(const[y,g]of l)(t||!(Uu(gl(y))||Uu(gl(g))))&&m.push([a(y),a(g)]);return p}case a0:{const m=[],p=s([u,m],l);for(const y of l)(t||!Uu(gl(y)))&&m.push(a(y));return p}}const{message:d}=l;return s([u,{name:f,message:d}],l)};return a},$w=(t,{json:e,lossy:n}={})=>{const r=[];return KB(!(e||n),!!e,new Map,r)(t),r},Hf=typeof structuredClone=="function"?(t,e)=>e&&("json"in e||"lossy"in e)?Uw($w(t,e)):structuredClone(t):(t,e)=>Uw($w(t,e));function ZB(t,e){const n=[{type:"text",value:""}];return e>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),n}function QB(t,e){return"Back to reference "+(t+1)+(e>1?"-"+e:"")}function JB(t){const e=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",n=t.options.footnoteBackContent||ZB,r=t.options.footnoteBackLabel||QB,s=t.options.footnoteLabel||"Footnotes",a=t.options.footnoteLabelTagName||"h2",l=t.options.footnoteLabelProperties||{className:["sr-only"]},u=[];let f=-1;for(;++f<t.footnoteOrder.length;){const d=t.footnoteById.get(t.footnoteOrder[f]);if(!d)continue;const m=t.all(d),p=String(d.identifier).toUpperCase(),y=po(p.toLowerCase());let g=0;const v=[],w=t.footnoteCounts.get(p);for(;w!==void 0&&++g<=w;){v.length>0&&v.push({type:"text",value:" "});let C=typeof n=="string"?n:n(f,g);typeof C=="string"&&(C={type:"text",value:C}),v.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+y+(g>1?"-"+g:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(f,g),className:["data-footnote-backref"]},children:Array.isArray(C)?C:[C]})}const E=m[m.length-1];if(E&&E.type==="element"&&E.tagName==="p"){const C=E.children[E.children.length-1];C&&C.type==="text"?C.value+=" ":E.children.push({type:"text",value:" "}),E.children.push(...v)}else m.push(...v);const S={type:"element",tagName:"li",properties:{id:e+"fn-"+y},children:t.wrap(m,!0)};t.patch(d,S),u.push(S)}if(u.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:a,properties:{...Hf(l),id:"footnote-label"},children:[{type:"text",value:s}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:t.wrap(u,!0)},{type:"text",value:`
`}]}}const Sd=(function(t){if(t==null)return eU;if(typeof t=="function")return kd(t);if(typeof t=="object")return Array.isArray(t)?YB(t):WB(t);if(typeof t=="string")return XB(t);throw new Error("Expected function, string, or object as test")});function YB(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=Sd(t[n]);return kd(r);function r(...s){let a=-1;for(;++a<e.length;)if(e[a].apply(this,s))return!0;return!1}}function WB(t){const e=t;return kd(n);function n(r){const s=r;let a;for(a in t)if(s[a]!==e[a])return!1;return!0}}function XB(t){return kd(e);function e(n){return n&&n.type===t}}function kd(t){return e;function e(n,r,s){return!!(tU(n)&&t.call(this,n,typeof r=="number"?r:void 0,s||void 0))}}function eU(){return!0}function tU(t){return t!==null&&typeof t=="object"&&"type"in t}const cC=[],nU=!0,qg=!1,rU="skip";function uC(t,e,n,r){let s;typeof e=="function"&&typeof n!="function"?(r=n,n=e):s=e;const a=Sd(s),l=r?-1:1;u(t,void 0,[])();function u(f,d,m){const p=f&&typeof f=="object"?f:{};if(typeof p.type=="string"){const g=typeof p.tagName=="string"?p.tagName:typeof p.name=="string"?p.name:void 0;Object.defineProperty(y,"name",{value:"node ("+(f.type+(g?"<"+g+">":""))+")"})}return y;function y(){let g=cC,v,w,E;if((!e||a(f,d,m[m.length-1]||void 0))&&(g=sU(n(f,m)),g[0]===qg))return g;if("children"in f&&f.children){const S=f;if(S.children&&g[0]!==rU)for(w=(r?S.children.length:-1)+l,E=m.concat(S);w>-1&&w<S.children.length;){const C=S.children[w];if(v=u(C,w,E)(),v[0]===qg)return v;w=typeof v[1]=="number"?v[1]:w+l}}return g}}}function sU(t){return Array.isArray(t)?t:typeof t=="number"?[nU,t]:t==null?cC:[t]}function o0(t,e,n,r){let s,a,l;typeof e=="function"&&typeof n!="function"?(a=void 0,l=e,s=n):(a=e,l=n,s=r),uC(t,a,u,s);function u(f,d){const m=d[d.length-1],p=m?m.children.indexOf(f):void 0;return l(f,p,m)}}const Fg={}.hasOwnProperty,iU={};function aU(t,e){const n=e||iU,r=new Map,s=new Map,a=new Map,l={...FB,...n.handlers},u={all:d,applyData:lU,definitionById:r,footnoteById:s,footnoteCounts:a,footnoteOrder:[],handlers:l,one:f,options:n,patch:oU,wrap:uU};return o0(t,function(m){if(m.type==="definition"||m.type==="footnoteDefinition"){const p=m.type==="definition"?r:s,y=String(m.identifier).toUpperCase();p.has(y)||p.set(y,m)}}),u;function f(m,p){const y=m.type,g=u.handlers[y];if(Fg.call(u.handlers,y)&&g)return g(u,m,p);if(u.options.passThrough&&u.options.passThrough.includes(y)){if("children"in m){const{children:w,...E}=m,S=Hf(E);return S.children=u.all(m),S}return Hf(m)}return(u.options.unknownHandler||cU)(u,m,p)}function d(m){const p=[];if("children"in m){const y=m.children;let g=-1;for(;++g<y.length;){const v=u.one(y[g],m);if(v){if(g&&y[g-1].type==="break"&&(!Array.isArray(v)&&v.type==="text"&&(v.value=qw(v.value)),!Array.isArray(v)&&v.type==="element")){const w=v.children[0];w&&w.type==="text"&&(w.value=qw(w.value))}Array.isArray(v)?p.push(...v):p.push(v)}}}return p}}function oU(t,e){t.position&&(e.position=QP(t))}function lU(t,e){let n=e;if(t&&t.data){const r=t.data.hName,s=t.data.hChildren,a=t.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const l="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:l}}n.type==="element"&&a&&Object.assign(n.properties,Hf(a)),"children"in n&&n.children&&s!==null&&s!==void 0&&(n.children=s)}return n}function cU(t,e){const n=e.data||{},r="value"in e&&!(Fg.call(n,"hProperties")||Fg.call(n,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function uU(t,e){const n=[];let r=-1;for(e&&n.push({type:"text",value:`
`});++r<t.length;)r&&n.push({type:"text",value:`
`}),n.push(t[r]);return e&&t.length>0&&n.push({type:"text",value:`
`}),n}function qw(t){let e=0,n=t.charCodeAt(e);for(;n===9||n===32;)e++,n=t.charCodeAt(e);return t.slice(e)}function Fw(t,e){const n=aU(t,e),r=n.one(t,void 0),s=JB(n),a=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return s&&a.children.push({type:"text",value:`
`},s),a}function fU(t,e){return t&&"run"in t?async function(n,r){const s=Fw(n,{file:r,...e});await t.run(s,r)}:function(n,r){return Fw(n,{file:r,...t||e})}}function Vw(t){if(t)throw t}var Tm,Hw;function dU(){if(Hw)return Tm;Hw=1;var t=Object.prototype.hasOwnProperty,e=Object.prototype.toString,n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,s=function(d){return typeof Array.isArray=="function"?Array.isArray(d):e.call(d)==="[object Array]"},a=function(d){if(!d||e.call(d)!=="[object Object]")return!1;var m=t.call(d,"constructor"),p=d.constructor&&d.constructor.prototype&&t.call(d.constructor.prototype,"isPrototypeOf");if(d.constructor&&!m&&!p)return!1;var y;for(y in d);return typeof y>"u"||t.call(d,y)},l=function(d,m){n&&m.name==="__proto__"?n(d,m.name,{enumerable:!0,configurable:!0,value:m.newValue,writable:!0}):d[m.name]=m.newValue},u=function(d,m){if(m==="__proto__")if(t.call(d,m)){if(r)return r(d,m).value}else return;return d[m]};return Tm=function f(){var d,m,p,y,g,v,w=arguments[0],E=1,S=arguments.length,C=!1;for(typeof w=="boolean"&&(C=w,w=arguments[1]||{},E=2),(w==null||typeof w!="object"&&typeof w!="function")&&(w={});E<S;++E)if(d=arguments[E],d!=null)for(m in d)p=u(w,m),y=u(d,m),w!==y&&(C&&y&&(a(y)||(g=s(y)))?(g?(g=!1,v=p&&s(p)?p:[]):v=p&&a(p)?p:{},l(w,{name:m,newValue:f(C,v,y)})):typeof y<"u"&&l(w,{name:m,newValue:y}));return w},Tm}var hU=dU();const Am=sk(hU);function Vg(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function pU(){const t=[],e={run:n,use:r};return e;function n(...s){let a=-1;const l=s.pop();if(typeof l!="function")throw new TypeError("Expected function as last argument, not "+l);u(null,...s);function u(f,...d){const m=t[++a];let p=-1;if(f){l(f);return}for(;++p<s.length;)(d[p]===null||d[p]===void 0)&&(d[p]=s[p]);s=d,m?mU(m,u)(...d):l(null,...d)}}function r(s){if(typeof s!="function")throw new TypeError("Expected `middelware` to be a function, not "+s);return t.push(s),e}}function mU(t,e){let n;return r;function r(...l){const u=t.length>l.length;let f;u&&l.push(s);try{f=t.apply(this,l)}catch(d){const m=d;if(u&&n)throw m;return s(m)}u||(f&&f.then&&typeof f.then=="function"?f.then(a,s):f instanceof Error?s(f):a(f))}function s(l,...u){n||(n=!0,e(l,...u))}function a(l){s(null,l)}}const Zr={basename:gU,dirname:yU,extname:bU,join:_U,sep:"/"};function gU(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');pc(t);let n=0,r=-1,s=t.length,a;if(e===void 0||e.length===0||e.length>t.length){for(;s--;)if(t.codePointAt(s)===47){if(a){n=s+1;break}}else r<0&&(a=!0,r=s+1);return r<0?"":t.slice(n,r)}if(e===t)return"";let l=-1,u=e.length-1;for(;s--;)if(t.codePointAt(s)===47){if(a){n=s+1;break}}else l<0&&(a=!0,l=s+1),u>-1&&(t.codePointAt(s)===e.codePointAt(u--)?u<0&&(r=s):(u=-1,r=l));return n===r?r=l:r<0&&(r=t.length),t.slice(n,r)}function yU(t){if(pc(t),t.length===0)return".";let e=-1,n=t.length,r;for(;--n;)if(t.codePointAt(n)===47){if(r){e=n;break}}else r||(r=!0);return e<0?t.codePointAt(0)===47?"/":".":e===1&&t.codePointAt(0)===47?"//":t.slice(0,e)}function bU(t){pc(t);let e=t.length,n=-1,r=0,s=-1,a=0,l;for(;e--;){const u=t.codePointAt(e);if(u===47){if(l){r=e+1;break}continue}n<0&&(l=!0,n=e+1),u===46?s<0?s=e:a!==1&&(a=1):s>-1&&(a=-1)}return s<0||n<0||a===0||a===1&&s===n-1&&s===r+1?"":t.slice(s,n)}function _U(...t){let e=-1,n;for(;++e<t.length;)pc(t[e]),t[e]&&(n=n===void 0?t[e]:n+"/"+t[e]);return n===void 0?".":vU(n)}function vU(t){pc(t);const e=t.codePointAt(0)===47;let n=xU(t,!e);return n.length===0&&!e&&(n="."),n.length>0&&t.codePointAt(t.length-1)===47&&(n+="/"),e?"/"+n:n}function xU(t,e){let n="",r=0,s=-1,a=0,l=-1,u,f;for(;++l<=t.length;){if(l<t.length)u=t.codePointAt(l);else{if(u===47)break;u=47}if(u===47){if(!(s===l-1||a===1))if(s!==l-1&&a===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(f=n.lastIndexOf("/"),f!==n.length-1){f<0?(n="",r=0):(n=n.slice(0,f),r=n.length-1-n.lastIndexOf("/")),s=l,a=0;continue}}else if(n.length>0){n="",r=0,s=l,a=0;continue}}e&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+t.slice(s+1,l):n=t.slice(s+1,l),r=l-s-1;s=l,a=0}else u===46&&a>-1?a++:a=-1}return n}function pc(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const wU={cwd:SU};function SU(){return"/"}function Hg(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function kU(t){if(typeof t=="string")t=new URL(t);else if(!Hg(t)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(t.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return EU(t)}function EU(t){if(t.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const e=t.pathname;let n=-1;for(;++n<e.length;)if(e.codePointAt(n)===37&&e.codePointAt(n+1)===50){const r=e.codePointAt(n+2);if(r===70||r===102){const s=new TypeError("File URL path must not include encoded / characters");throw s.code="ERR_INVALID_FILE_URL_PATH",s}}return decodeURIComponent(e)}const Rm=["history","path","basename","stem","extname","dirname"];class fC{constructor(e){let n;e?Hg(e)?n={path:e}:typeof e=="string"||CU(e)?n={value:e}:n=e:n={},this.cwd="cwd"in n?"":wU.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<Rm.length;){const a=Rm[r];a in n&&n[a]!==void 0&&n[a]!==null&&(this[a]=a==="history"?[...n[a]]:n[a])}let s;for(s in n)Rm.includes(s)||(this[s]=n[s])}get basename(){return typeof this.path=="string"?Zr.basename(this.path):void 0}set basename(e){Nm(e,"basename"),Om(e,"basename"),this.path=Zr.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?Zr.dirname(this.path):void 0}set dirname(e){Gw(this.basename,"dirname"),this.path=Zr.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?Zr.extname(this.path):void 0}set extname(e){if(Om(e,"extname"),Gw(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Zr.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){Hg(e)&&(e=kU(e)),Nm(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?Zr.basename(this.path,this.extname):void 0}set stem(e){Nm(e,"stem"),Om(e,"stem"),this.path=Zr.join(this.dirname||"",e+(this.extname||""))}fail(e,n,r){const s=this.message(e,n,r);throw s.fatal=!0,s}info(e,n,r){const s=this.message(e,n,r);return s.fatal=void 0,s}message(e,n,r){const s=new On(e,n,r);return this.path&&(s.name=this.path+":"+s.name,s.file=this.path),s.fatal=!1,this.messages.push(s),s}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function Om(t,e){if(t&&t.includes(Zr.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+Zr.sep+"`")}function Nm(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}function Gw(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}function CU(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const TU=(function(t){const r=this.constructor.prototype,s=r[t],a=function(){return s.apply(a,arguments)};return Object.setPrototypeOf(a,r),a}),AU={}.hasOwnProperty;class l0 extends TU{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=pU()}copy(){const e=new l0;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];e.use(...r)}return e.data(Am(!0,{},this.namespace)),e}data(e,n){return typeof e=="string"?arguments.length===2?(Dm("data",this.frozen),this.namespace[e]=n,this):AU.call(this.namespace,e)&&this.namespace[e]||void 0:e?(Dm("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const s=n.call(e,...r);typeof s=="function"&&this.transformers.use(s)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const n=$u(e),r=this.parser||this.Parser;return Im("parse",r),r(String(n),n)}process(e,n){const r=this;return this.freeze(),Im("process",this.parser||this.Parser),Mm("process",this.compiler||this.Compiler),n?s(void 0,n):new Promise(s);function s(a,l){const u=$u(e),f=r.parse(u);r.run(f,u,function(m,p,y){if(m||!p||!y)return d(m);const g=p,v=r.stringify(g,y);NU(v)?y.value=v:y.result=v,d(m,y)});function d(m,p){m||!p?l(m):a?a(p):n(void 0,p)}}}processSync(e){let n=!1,r;return this.freeze(),Im("processSync",this.parser||this.Parser),Mm("processSync",this.compiler||this.Compiler),this.process(e,s),Zw("processSync","process",n),r;function s(a,l){n=!0,Vw(a),r=l}}run(e,n,r){Kw(e),this.freeze();const s=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?a(void 0,r):new Promise(a);function a(l,u){const f=$u(n);s.run(e,f,d);function d(m,p,y){const g=p||e;m?u(m):l?l(g):r(void 0,g,y)}}}runSync(e,n){let r=!1,s;return this.run(e,n,a),Zw("runSync","run",r),s;function a(l,u){Vw(l),s=u,r=!0}}stringify(e,n){this.freeze();const r=$u(n),s=this.compiler||this.Compiler;return Mm("stringify",s),Kw(e),s(e,r)}use(e,...n){const r=this.attachers,s=this.namespace;if(Dm("use",this.frozen),e!=null)if(typeof e=="function")f(e,n);else if(typeof e=="object")Array.isArray(e)?u(e):l(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function a(d){if(typeof d=="function")f(d,[]);else if(typeof d=="object")if(Array.isArray(d)){const[m,...p]=d;f(m,p)}else l(d);else throw new TypeError("Expected usable value, not `"+d+"`")}function l(d){if(!("plugins"in d)&&!("settings"in d))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");u(d.plugins),d.settings&&(s.settings=Am(!0,s.settings,d.settings))}function u(d){let m=-1;if(d!=null)if(Array.isArray(d))for(;++m<d.length;){const p=d[m];a(p)}else throw new TypeError("Expected a list of plugins, not `"+d+"`")}function f(d,m){let p=-1,y=-1;for(;++p<r.length;)if(r[p][0]===d){y=p;break}if(y===-1)r.push([d,...m]);else if(m.length>0){let[g,...v]=m;const w=r[y][1];Vg(w)&&Vg(g)&&(g=Am(!0,w,g)),r[y]=[d,g,...v]}}}}const RU=new l0().freeze();function Im(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `parser`")}function Mm(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `compiler`")}function Dm(t,e){if(e)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function Kw(t){if(!Vg(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}function Zw(t,e,n){if(!n)throw new Error("`"+t+"` finished async. Use `"+e+"` instead")}function $u(t){return OU(t)?t:new fC(t)}function OU(t){return!!(t&&typeof t=="object"&&"message"in t&&"messages"in t)}function NU(t){return typeof t=="string"||IU(t)}function IU(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const MU="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",Qw=[],Jw={allowDangerousHtml:!0},DU=/^(https?|ircs?|mailto|xmpp)$/i,jU=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function LU(t){const e=zU(t),n=PU(t);return BU(e.runSync(e.parse(n),n),t)}function zU(t){const e=t.rehypePlugins||Qw,n=t.remarkPlugins||Qw,r=t.remarkRehypeOptions?{...t.remarkRehypeOptions,...Jw}:Jw;return RU().use(yB).use(n).use(fU,r).use(e)}function PU(t){const e=t.children||"",n=new fC;return typeof e=="string"&&(n.value=e),n}function BU(t,e){const n=e.allowedElements,r=e.allowElement,s=e.components,a=e.disallowedElements,l=e.skipHtml,u=e.unwrapDisallowed,f=e.urlTransform||UU;for(const m of jU)Object.hasOwn(e,m.from)&&(""+m.from+(m.to?"use `"+m.to+"` instead":"remove it")+MU+m.id,void 0);return o0(t,d),e6(t,{Fragment:x.Fragment,components:s,ignoreInvalidStyle:!0,jsx:x.jsx,jsxs:x.jsxs,passKeys:!0,passNode:!0});function d(m,p,y){if(m.type==="raw"&&y&&typeof p=="number")return l?y.children.splice(p,1):y.children[p]={type:"text",value:m.value},p;if(m.type==="element"){let g;for(g in km)if(Object.hasOwn(km,g)&&Object.hasOwn(m.properties,g)){const v=m.properties[g],w=km[g];(w===null||w.includes(m.tagName))&&(m.properties[g]=f(String(v||""),g,m))}}if(m.type==="element"){let g=n?!n.includes(m.tagName):a?a.includes(m.tagName):!1;if(!g&&r&&typeof p=="number"&&(g=!r(m,p,y)),g&&y&&typeof p=="number")return u&&m.children?y.children.splice(p,1,...m.children):y.children.splice(p,1),p}}}function UU(t){const e=t.indexOf(":"),n=t.indexOf("?"),r=t.indexOf("#"),s=t.indexOf("/");return e===-1||s!==-1&&e>s||n!==-1&&e>n||r!==-1&&e>r||DU.test(t.slice(0,e))?t:""}function $U(t){if(typeof t!="string")throw new TypeError("Expected a string");return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function dC(t,e,n){const s=Sd((n||{}).ignore||[]),a=qU(e);let l=-1;for(;++l<a.length;)uC(t,"text",u);function u(d,m){let p=-1,y;for(;++p<m.length;){const g=m[p],v=y?y.children:void 0;if(s(g,v?v.indexOf(g):void 0,y))return;y=g}if(y)return f(d,m)}function f(d,m){const p=m[m.length-1],y=a[l][0],g=a[l][1];let v=0;const E=p.children.indexOf(d);let S=!1,C=[];y.lastIndex=0;let T=y.exec(d.value);for(;T;){const M=T.index,I={index:T.index,input:T.input,stack:[...m,d]};let R=g(...T,I);if(typeof R=="string"&&(R=R.length>0?{type:"text",value:R}:void 0),R===!1?y.lastIndex=M+1:(v!==M&&C.push({type:"text",value:d.value.slice(v,M)}),Array.isArray(R)?C.push(...R):R&&C.push(R),v=M+T[0].length,S=!0),!y.global)break;T=y.exec(d.value)}return S?(v<d.value.length&&C.push({type:"text",value:d.value.slice(v)}),p.children.splice(E,1,...C)):C=[d],E+C.length}}function qU(t){const e=[];if(!Array.isArray(t))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!t[0]||Array.isArray(t[0])?t:[t];let r=-1;for(;++r<n.length;){const s=n[r];e.push([FU(s[0]),VU(s[1])])}return e}function FU(t){return typeof t=="string"?new RegExp($U(t),"g"):t}function VU(t){return typeof t=="function"?t:function(){return t}}const jm="phrasing",Lm=["autolink","link","image","label"];function HU(){return{transforms:[WU],enter:{literalAutolink:KU,literalAutolinkEmail:zm,literalAutolinkHttp:zm,literalAutolinkWww:zm},exit:{literalAutolink:YU,literalAutolinkEmail:JU,literalAutolinkHttp:ZU,literalAutolinkWww:QU}}}function GU(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:jm,notInConstruct:Lm},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:jm,notInConstruct:Lm},{character:":",before:"[ps]",after:"\\/",inConstruct:jm,notInConstruct:Lm}]}}function KU(t){this.enter({type:"link",title:null,url:"",children:[]},t)}function zm(t){this.config.enter.autolinkProtocol.call(this,t)}function ZU(t){this.config.exit.autolinkProtocol.call(this,t)}function QU(t){this.config.exit.data.call(this,t);const e=this.stack[this.stack.length-1];e.type,e.url="http://"+this.sliceSerialize(t)}function JU(t){this.config.exit.autolinkEmail.call(this,t)}function YU(t){this.exit(t)}function WU(t){dC(t,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,XU],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),e$]],{ignore:["link","linkReference"]})}function XU(t,e,n,r,s){let a="";if(!hC(s)||(/^w/i.test(e)&&(n=e+n,e="",a="http://"),!t$(n)))return!1;const l=n$(n+r);if(!l[0])return!1;const u={type:"link",title:null,url:a+e+l[0],children:[{type:"text",value:e+l[0]}]};return l[1]?[u,{type:"text",value:l[1]}]:u}function e$(t,e,n,r){return!hC(r,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+e+"@"+n,children:[{type:"text",value:e+"@"+n}]}}function t$(t){const e=t.split(".");return!(e.length<2||e[e.length-1]&&(/_/.test(e[e.length-1])||!/[a-zA-Z\d]/.test(e[e.length-1]))||e[e.length-2]&&(/_/.test(e[e.length-2])||!/[a-zA-Z\d]/.test(e[e.length-2])))}function n$(t){const e=/[!"&'),.:;<>?\]}]+$/.exec(t);if(!e)return[t,void 0];t=t.slice(0,e.index);let n=e[0],r=n.indexOf(")");const s=zf(t,"(");let a=zf(t,")");for(;r!==-1&&s>a;)t+=n.slice(0,r+1),n=n.slice(r+1),r=n.indexOf(")"),a++;return[t,n]}function hC(t,e){const n=t.input.charCodeAt(t.index-1);return(t.index===0||qi(n)||vd(n))&&(!e||n!==47)}pC.peek=f$;function r$(){this.buffer()}function s$(t){this.enter({type:"footnoteReference",identifier:"",label:""},t)}function i$(){this.buffer()}function a$(t){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},t)}function o$(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Br(this.sliceSerialize(t)).toLowerCase(),n.label=e}function l$(t){this.exit(t)}function c$(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Br(this.sliceSerialize(t)).toLowerCase(),n.label=e}function u$(t){this.exit(t)}function f$(){return"["}function pC(t,e,n,r){const s=n.createTracker(r);let a=s.move("[^");const l=n.enter("footnoteReference"),u=n.enter("reference");return a+=s.move(n.safe(n.associationId(t),{after:"]",before:a})),u(),l(),a+=s.move("]"),a}function d$(){return{enter:{gfmFootnoteCallString:r$,gfmFootnoteCall:s$,gfmFootnoteDefinitionLabelString:i$,gfmFootnoteDefinition:a$},exit:{gfmFootnoteCallString:o$,gfmFootnoteCall:l$,gfmFootnoteDefinitionLabelString:c$,gfmFootnoteDefinition:u$}}}function h$(t){let e=!1;return t&&t.firstLineBlank&&(e=!0),{handlers:{footnoteDefinition:n,footnoteReference:pC},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(r,s,a,l){const u=a.createTracker(l);let f=u.move("[^");const d=a.enter("footnoteDefinition"),m=a.enter("label");return f+=u.move(a.safe(a.associationId(r),{before:f,after:"]"})),m(),f+=u.move("]:"),r.children&&r.children.length>0&&(u.shift(4),f+=u.move((e?`
`:" ")+a.indentLines(a.containerFlow(r,u.current()),e?mC:p$))),d(),f}}function p$(t,e,n){return e===0?t:mC(t,e,n)}function mC(t,e,n){return(n?"":"    ")+t}const m$=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];gC.peek=v$;function g$(){return{canContainEols:["delete"],enter:{strikethrough:b$},exit:{strikethrough:_$}}}function y$(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:m$}],handlers:{delete:gC}}}function b$(t){this.enter({type:"delete",children:[]},t)}function _$(t){this.exit(t)}function gC(t,e,n,r){const s=n.createTracker(r),a=n.enter("strikethrough");let l=s.move("~~");return l+=n.containerPhrasing(t,{...s.current(),before:l,after:"~"}),l+=s.move("~~"),a(),l}function v$(){return"~"}function x$(t){return t.length}function w$(t,e){const n=e||{},r=(n.align||[]).concat(),s=n.stringLength||x$,a=[],l=[],u=[],f=[];let d=0,m=-1;for(;++m<t.length;){const w=[],E=[];let S=-1;for(t[m].length>d&&(d=t[m].length);++S<t[m].length;){const C=S$(t[m][S]);if(n.alignDelimiters!==!1){const T=s(C);E[S]=T,(f[S]===void 0||T>f[S])&&(f[S]=T)}w.push(C)}l[m]=w,u[m]=E}let p=-1;if(typeof r=="object"&&"length"in r)for(;++p<d;)a[p]=Yw(r[p]);else{const w=Yw(r);for(;++p<d;)a[p]=w}p=-1;const y=[],g=[];for(;++p<d;){const w=a[p];let E="",S="";w===99?(E=":",S=":"):w===108?E=":":w===114&&(S=":");let C=n.alignDelimiters===!1?1:Math.max(1,f[p]-E.length-S.length);const T=E+"-".repeat(C)+S;n.alignDelimiters!==!1&&(C=E.length+C+S.length,C>f[p]&&(f[p]=C),g[p]=C),y[p]=T}l.splice(1,0,y),u.splice(1,0,g),m=-1;const v=[];for(;++m<l.length;){const w=l[m],E=u[m];p=-1;const S=[];for(;++p<d;){const C=w[p]||"";let T="",M="";if(n.alignDelimiters!==!1){const I=f[p]-(E[p]||0),R=a[p];R===114?T=" ".repeat(I):R===99?I%2?(T=" ".repeat(I/2+.5),M=" ".repeat(I/2-.5)):(T=" ".repeat(I/2),M=T):M=" ".repeat(I)}n.delimiterStart!==!1&&!p&&S.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&C==="")&&(n.delimiterStart!==!1||p)&&S.push(" "),n.alignDelimiters!==!1&&S.push(T),S.push(C),n.alignDelimiters!==!1&&S.push(M),n.padding!==!1&&S.push(" "),(n.delimiterEnd!==!1||p!==d-1)&&S.push("|")}v.push(n.delimiterEnd===!1?S.join("").replace(/ +$/,""):S.join(""))}return v.join(`
`)}function S$(t){return t==null?"":String(t)}function Yw(t){const e=typeof t=="string"?t.codePointAt(0):0;return e===67||e===99?99:e===76||e===108?108:e===82||e===114?114:0}function k$(t,e,n,r){const s=n.enter("blockquote"),a=n.createTracker(r);a.move("> "),a.shift(2);const l=n.indentLines(n.containerFlow(t,a.current()),E$);return s(),l}function E$(t,e,n){return">"+(n?"":" ")+t}function C$(t,e){return Ww(t,e.inConstruct,!0)&&!Ww(t,e.notInConstruct,!1)}function Ww(t,e,n){if(typeof e=="string"&&(e=[e]),!e||e.length===0)return n;let r=-1;for(;++r<e.length;)if(t.includes(e[r]))return!0;return!1}function Xw(t,e,n,r){let s=-1;for(;++s<n.unsafe.length;)if(n.unsafe[s].character===`
`&&C$(n.stack,n.unsafe[s]))return/[ \t]/.test(r.before)?"":" ";return`\\
`}function T$(t,e){const n=String(t);let r=n.indexOf(e),s=r,a=0,l=0;if(typeof e!="string")throw new TypeError("Expected substring");for(;r!==-1;)r===s?++a>l&&(l=a):a=1,s=r+e.length,r=n.indexOf(e,s);return l}function A$(t,e){return!!(e.options.fences===!1&&t.value&&!t.lang&&/[^ \r\n]/.test(t.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(t.value))}function R$(t){const e=t.options.fence||"`";if(e!=="`"&&e!=="~")throw new Error("Cannot serialize code with `"+e+"` for `options.fence`, expected `` ` `` or `~`");return e}function O$(t,e,n,r){const s=R$(n),a=t.value||"",l=s==="`"?"GraveAccent":"Tilde";if(A$(t,n)){const p=n.enter("codeIndented"),y=n.indentLines(a,N$);return p(),y}const u=n.createTracker(r),f=s.repeat(Math.max(T$(a,s)+1,3)),d=n.enter("codeFenced");let m=u.move(f);if(t.lang){const p=n.enter(`codeFencedLang${l}`);m+=u.move(n.safe(t.lang,{before:m,after:" ",encode:["`"],...u.current()})),p()}if(t.lang&&t.meta){const p=n.enter(`codeFencedMeta${l}`);m+=u.move(" "),m+=u.move(n.safe(t.meta,{before:m,after:`
`,encode:["`"],...u.current()})),p()}return m+=u.move(`
`),a&&(m+=u.move(a+`
`)),m+=u.move(f),d(),m}function N$(t,e,n){return(n?"":"    ")+t}function c0(t){const e=t.options.quote||'"';if(e!=='"'&&e!=="'")throw new Error("Cannot serialize title with `"+e+"` for `options.quote`, expected `\"`, or `'`");return e}function I$(t,e,n,r){const s=c0(n),a=s==='"'?"Quote":"Apostrophe",l=n.enter("definition");let u=n.enter("label");const f=n.createTracker(r);let d=f.move("[");return d+=f.move(n.safe(n.associationId(t),{before:d,after:"]",...f.current()})),d+=f.move("]: "),u(),!t.url||/[\0- \u007F]/.test(t.url)?(u=n.enter("destinationLiteral"),d+=f.move("<"),d+=f.move(n.safe(t.url,{before:d,after:">",...f.current()})),d+=f.move(">")):(u=n.enter("destinationRaw"),d+=f.move(n.safe(t.url,{before:d,after:t.title?" ":`
`,...f.current()}))),u(),t.title&&(u=n.enter(`title${a}`),d+=f.move(" "+s),d+=f.move(n.safe(t.title,{before:d,after:s,...f.current()})),d+=f.move(s),u()),l(),d}function M$(t){const e=t.options.emphasis||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize emphasis with `"+e+"` for `options.emphasis`, expected `*`, or `_`");return e}function nc(t){return"&#x"+t.toString(16).toUpperCase()+";"}function Gf(t,e,n){const r=ao(t),s=ao(e);return r===void 0?s===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:s===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:r===1?s===void 0?{inside:!1,outside:!1}:s===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:s===void 0?{inside:!1,outside:!1}:s===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}yC.peek=D$;function yC(t,e,n,r){const s=M$(n),a=n.enter("emphasis"),l=n.createTracker(r),u=l.move(s);let f=l.move(n.containerPhrasing(t,{after:s,before:u,...l.current()}));const d=f.charCodeAt(0),m=Gf(r.before.charCodeAt(r.before.length-1),d,s);m.inside&&(f=nc(d)+f.slice(1));const p=f.charCodeAt(f.length-1),y=Gf(r.after.charCodeAt(0),p,s);y.inside&&(f=f.slice(0,-1)+nc(p));const g=l.move(s);return a(),n.attentionEncodeSurroundingInfo={after:y.outside,before:m.outside},u+f+g}function D$(t,e,n){return n.options.emphasis||"*"}function j$(t,e){let n=!1;return o0(t,function(r){if("value"in r&&/\r?\n|\r/.test(r.value)||r.type==="break")return n=!0,qg}),!!((!t.depth||t.depth<3)&&e0(t)&&(e.options.setext||n))}function L$(t,e,n,r){const s=Math.max(Math.min(6,t.depth||1),1),a=n.createTracker(r);if(j$(t,n)){const m=n.enter("headingSetext"),p=n.enter("phrasing"),y=n.containerPhrasing(t,{...a.current(),before:`
`,after:`
`});return p(),m(),y+`
`+(s===1?"=":"-").repeat(y.length-(Math.max(y.lastIndexOf("\r"),y.lastIndexOf(`
`))+1))}const l="#".repeat(s),u=n.enter("headingAtx"),f=n.enter("phrasing");a.move(l+" ");let d=n.containerPhrasing(t,{before:"# ",after:`
`,...a.current()});return/^[\t ]/.test(d)&&(d=nc(d.charCodeAt(0))+d.slice(1)),d=d?l+" "+d:l,n.options.closeAtx&&(d+=" "+l),f(),u(),d}bC.peek=z$;function bC(t){return t.value||""}function z$(){return"<"}_C.peek=P$;function _C(t,e,n,r){const s=c0(n),a=s==='"'?"Quote":"Apostrophe",l=n.enter("image");let u=n.enter("label");const f=n.createTracker(r);let d=f.move("![");return d+=f.move(n.safe(t.alt,{before:d,after:"]",...f.current()})),d+=f.move("]("),u(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(u=n.enter("destinationLiteral"),d+=f.move("<"),d+=f.move(n.safe(t.url,{before:d,after:">",...f.current()})),d+=f.move(">")):(u=n.enter("destinationRaw"),d+=f.move(n.safe(t.url,{before:d,after:t.title?" ":")",...f.current()}))),u(),t.title&&(u=n.enter(`title${a}`),d+=f.move(" "+s),d+=f.move(n.safe(t.title,{before:d,after:s,...f.current()})),d+=f.move(s),u()),d+=f.move(")"),l(),d}function P$(){return"!"}vC.peek=B$;function vC(t,e,n,r){const s=t.referenceType,a=n.enter("imageReference");let l=n.enter("label");const u=n.createTracker(r);let f=u.move("![");const d=n.safe(t.alt,{before:f,after:"]",...u.current()});f+=u.move(d+"]["),l();const m=n.stack;n.stack=[],l=n.enter("reference");const p=n.safe(n.associationId(t),{before:f,after:"]",...u.current()});return l(),n.stack=m,a(),s==="full"||!d||d!==p?f+=u.move(p+"]"):s==="shortcut"?f=f.slice(0,-1):f+=u.move("]"),f}function B$(){return"!"}xC.peek=U$;function xC(t,e,n){let r=t.value||"",s="`",a=-1;for(;new RegExp("(^|[^`])"+s+"([^`]|$)").test(r);)s+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++a<n.unsafe.length;){const l=n.unsafe[a],u=n.compilePattern(l);let f;if(l.atBreak)for(;f=u.exec(r);){let d=f.index;r.charCodeAt(d)===10&&r.charCodeAt(d-1)===13&&d--,r=r.slice(0,d)+" "+r.slice(f.index+1)}}return s+r+s}function U$(){return"`"}function wC(t,e){const n=e0(t);return!!(!e.options.resourceLink&&t.url&&!t.title&&t.children&&t.children.length===1&&t.children[0].type==="text"&&(n===t.url||"mailto:"+n===t.url)&&/^[a-z][a-z+.-]+:/i.test(t.url)&&!/[\0- <>\u007F]/.test(t.url))}SC.peek=$$;function SC(t,e,n,r){const s=c0(n),a=s==='"'?"Quote":"Apostrophe",l=n.createTracker(r);let u,f;if(wC(t,n)){const m=n.stack;n.stack=[],u=n.enter("autolink");let p=l.move("<");return p+=l.move(n.containerPhrasing(t,{before:p,after:">",...l.current()})),p+=l.move(">"),u(),n.stack=m,p}u=n.enter("link"),f=n.enter("label");let d=l.move("[");return d+=l.move(n.containerPhrasing(t,{before:d,after:"](",...l.current()})),d+=l.move("]("),f(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(f=n.enter("destinationLiteral"),d+=l.move("<"),d+=l.move(n.safe(t.url,{before:d,after:">",...l.current()})),d+=l.move(">")):(f=n.enter("destinationRaw"),d+=l.move(n.safe(t.url,{before:d,after:t.title?" ":")",...l.current()}))),f(),t.title&&(f=n.enter(`title${a}`),d+=l.move(" "+s),d+=l.move(n.safe(t.title,{before:d,after:s,...l.current()})),d+=l.move(s),f()),d+=l.move(")"),u(),d}function $$(t,e,n){return wC(t,n)?"<":"["}kC.peek=q$;function kC(t,e,n,r){const s=t.referenceType,a=n.enter("linkReference");let l=n.enter("label");const u=n.createTracker(r);let f=u.move("[");const d=n.containerPhrasing(t,{before:f,after:"]",...u.current()});f+=u.move(d+"]["),l();const m=n.stack;n.stack=[],l=n.enter("reference");const p=n.safe(n.associationId(t),{before:f,after:"]",...u.current()});return l(),n.stack=m,a(),s==="full"||!d||d!==p?f+=u.move(p+"]"):s==="shortcut"?f=f.slice(0,-1):f+=u.move("]"),f}function q$(){return"["}function u0(t){const e=t.options.bullet||"*";if(e!=="*"&&e!=="+"&&e!=="-")throw new Error("Cannot serialize items with `"+e+"` for `options.bullet`, expected `*`, `+`, or `-`");return e}function F$(t){const e=u0(t),n=t.options.bulletOther;if(!n)return e==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===e)throw new Error("Expected `bullet` (`"+e+"`) and `bulletOther` (`"+n+"`) to be different");return n}function V$(t){const e=t.options.bulletOrdered||".";if(e!=="."&&e!==")")throw new Error("Cannot serialize items with `"+e+"` for `options.bulletOrdered`, expected `.` or `)`");return e}function EC(t){const e=t.options.rule||"*";if(e!=="*"&&e!=="-"&&e!=="_")throw new Error("Cannot serialize rules with `"+e+"` for `options.rule`, expected `*`, `-`, or `_`");return e}function H$(t,e,n,r){const s=n.enter("list"),a=n.bulletCurrent;let l=t.ordered?V$(n):u0(n);const u=t.ordered?l==="."?")":".":F$(n);let f=e&&n.bulletLastUsed?l===n.bulletLastUsed:!1;if(!t.ordered){const m=t.children?t.children[0]:void 0;if((l==="*"||l==="-")&&m&&(!m.children||!m.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(f=!0),EC(n)===l&&m){let p=-1;for(;++p<t.children.length;){const y=t.children[p];if(y&&y.type==="listItem"&&y.children&&y.children[0]&&y.children[0].type==="thematicBreak"){f=!0;break}}}}f&&(l=u),n.bulletCurrent=l;const d=n.containerFlow(t,r);return n.bulletLastUsed=l,n.bulletCurrent=a,s(),d}function G$(t){const e=t.options.listItemIndent||"one";if(e!=="tab"&&e!=="one"&&e!=="mixed")throw new Error("Cannot serialize items with `"+e+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return e}function K$(t,e,n,r){const s=G$(n);let a=n.bulletCurrent||u0(n);e&&e.type==="list"&&e.ordered&&(a=(typeof e.start=="number"&&e.start>-1?e.start:1)+(n.options.incrementListMarker===!1?0:e.children.indexOf(t))+a);let l=a.length+1;(s==="tab"||s==="mixed"&&(e&&e.type==="list"&&e.spread||t.spread))&&(l=Math.ceil(l/4)*4);const u=n.createTracker(r);u.move(a+" ".repeat(l-a.length)),u.shift(l);const f=n.enter("listItem"),d=n.indentLines(n.containerFlow(t,u.current()),m);return f(),d;function m(p,y,g){return y?(g?"":" ".repeat(l))+p:(g?a:a+" ".repeat(l-a.length))+p}}function Z$(t,e,n,r){const s=n.enter("paragraph"),a=n.enter("phrasing"),l=n.containerPhrasing(t,r);return a(),s(),l}const Q$=Sd(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function J$(t,e,n,r){return(t.children.some(function(l){return Q$(l)})?n.containerPhrasing:n.containerFlow).call(n,t,r)}function Y$(t){const e=t.options.strong||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize strong with `"+e+"` for `options.strong`, expected `*`, or `_`");return e}CC.peek=W$;function CC(t,e,n,r){const s=Y$(n),a=n.enter("strong"),l=n.createTracker(r),u=l.move(s+s);let f=l.move(n.containerPhrasing(t,{after:s,before:u,...l.current()}));const d=f.charCodeAt(0),m=Gf(r.before.charCodeAt(r.before.length-1),d,s);m.inside&&(f=nc(d)+f.slice(1));const p=f.charCodeAt(f.length-1),y=Gf(r.after.charCodeAt(0),p,s);y.inside&&(f=f.slice(0,-1)+nc(p));const g=l.move(s+s);return a(),n.attentionEncodeSurroundingInfo={after:y.outside,before:m.outside},u+f+g}function W$(t,e,n){return n.options.strong||"*"}function X$(t,e,n,r){return n.safe(t.value,r)}function eq(t){const e=t.options.ruleRepetition||3;if(e<3)throw new Error("Cannot serialize rules with repetition `"+e+"` for `options.ruleRepetition`, expected `3` or more");return e}function tq(t,e,n){const r=(EC(n)+(n.options.ruleSpaces?" ":"")).repeat(eq(n));return n.options.ruleSpaces?r.slice(0,-1):r}const TC={blockquote:k$,break:Xw,code:O$,definition:I$,emphasis:yC,hardBreak:Xw,heading:L$,html:bC,image:_C,imageReference:vC,inlineCode:xC,link:SC,linkReference:kC,list:H$,listItem:K$,paragraph:Z$,root:J$,strong:CC,text:X$,thematicBreak:tq};function nq(){return{enter:{table:rq,tableData:eS,tableHeader:eS,tableRow:iq},exit:{codeText:aq,table:sq,tableData:Pm,tableHeader:Pm,tableRow:Pm}}}function rq(t){const e=t._align;this.enter({type:"table",align:e.map(function(n){return n==="none"?null:n}),children:[]},t),this.data.inTable=!0}function sq(t){this.exit(t),this.data.inTable=void 0}function iq(t){this.enter({type:"tableRow",children:[]},t)}function Pm(t){this.exit(t)}function eS(t){this.enter({type:"tableCell",children:[]},t)}function aq(t){let e=this.resume();this.data.inTable&&(e=e.replace(/\\([\\|])/g,oq));const n=this.stack[this.stack.length-1];n.type,n.value=e,this.exit(t)}function oq(t,e){return e==="|"?e:t}function lq(t){const e=t||{},n=e.tableCellPadding,r=e.tablePipeAlign,s=e.stringLength,a=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:y,table:l,tableCell:f,tableRow:u}};function l(g,v,w,E){return d(m(g,w,E),g.align)}function u(g,v,w,E){const S=p(g,w,E),C=d([S]);return C.slice(0,C.indexOf(`
`))}function f(g,v,w,E){const S=w.enter("tableCell"),C=w.enter("phrasing"),T=w.containerPhrasing(g,{...E,before:a,after:a});return C(),S(),T}function d(g,v){return w$(g,{align:v,alignDelimiters:r,padding:n,stringLength:s})}function m(g,v,w){const E=g.children;let S=-1;const C=[],T=v.enter("table");for(;++S<E.length;)C[S]=p(E[S],v,w);return T(),C}function p(g,v,w){const E=g.children;let S=-1;const C=[],T=v.enter("tableRow");for(;++S<E.length;)C[S]=f(E[S],g,v,w);return T(),C}function y(g,v,w){let E=TC.inlineCode(g,v,w);return w.stack.includes("tableCell")&&(E=E.replace(/\|/g,"\\$&")),E}}function cq(){return{exit:{taskListCheckValueChecked:tS,taskListCheckValueUnchecked:tS,paragraph:fq}}}function uq(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:dq}}}function tS(t){const e=this.stack[this.stack.length-2];e.type,e.checked=t.type==="taskListCheckValueChecked"}function fq(t){const e=this.stack[this.stack.length-2];if(e&&e.type==="listItem"&&typeof e.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const r=n.children[0];if(r&&r.type==="text"){const s=e.children;let a=-1,l;for(;++a<s.length;){const u=s[a];if(u.type==="paragraph"){l=u;break}}l===n&&(r.value=r.value.slice(1),r.value.length===0?n.children.shift():n.position&&r.position&&typeof r.position.start.offset=="number"&&(r.position.start.column++,r.position.start.offset++,n.position.start=Object.assign({},r.position.start)))}}this.exit(t)}function dq(t,e,n,r){const s=t.children[0],a=typeof t.checked=="boolean"&&s&&s.type==="paragraph",l="["+(t.checked?"x":" ")+"] ",u=n.createTracker(r);a&&u.move(l);let f=TC.listItem(t,e,n,{...r,...u.current()});return a&&(f=f.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,d)),f;function d(m){return m+l}}function hq(){return[HU(),d$(),g$(),nq(),cq()]}function pq(t){return{extensions:[GU(),h$(t),y$(),lq(t),uq()]}}const mq={tokenize:xq,partial:!0},AC={tokenize:wq,partial:!0},RC={tokenize:Sq,partial:!0},OC={tokenize:kq,partial:!0},gq={tokenize:Eq,partial:!0},NC={name:"wwwAutolink",tokenize:_q,previous:MC},IC={name:"protocolAutolink",tokenize:vq,previous:DC},Ts={name:"emailAutolink",tokenize:bq,previous:jC},ts={};function yq(){return{text:ts}}let Ii=48;for(;Ii<123;)ts[Ii]=Ts,Ii++,Ii===58?Ii=65:Ii===91&&(Ii=97);ts[43]=Ts;ts[45]=Ts;ts[46]=Ts;ts[95]=Ts;ts[72]=[Ts,IC];ts[104]=[Ts,IC];ts[87]=[Ts,NC];ts[119]=[Ts,NC];function bq(t,e,n){const r=this;let s,a;return l;function l(p){return!Gg(p)||!jC.call(r,r.previous)||f0(r.events)?n(p):(t.enter("literalAutolink"),t.enter("literalAutolinkEmail"),u(p))}function u(p){return Gg(p)?(t.consume(p),u):p===64?(t.consume(p),f):n(p)}function f(p){return p===46?t.check(gq,m,d)(p):p===45||p===95||Rn(p)?(a=!0,t.consume(p),f):m(p)}function d(p){return t.consume(p),s=!0,f}function m(p){return a&&s&&zn(r.previous)?(t.exit("literalAutolinkEmail"),t.exit("literalAutolink"),e(p)):n(p)}}function _q(t,e,n){const r=this;return s;function s(l){return l!==87&&l!==119||!MC.call(r,r.previous)||f0(r.events)?n(l):(t.enter("literalAutolink"),t.enter("literalAutolinkWww"),t.check(mq,t.attempt(AC,t.attempt(RC,a),n),n)(l))}function a(l){return t.exit("literalAutolinkWww"),t.exit("literalAutolink"),e(l)}}function vq(t,e,n){const r=this;let s="",a=!1;return l;function l(p){return(p===72||p===104)&&DC.call(r,r.previous)&&!f0(r.events)?(t.enter("literalAutolink"),t.enter("literalAutolinkHttp"),s+=String.fromCodePoint(p),t.consume(p),u):n(p)}function u(p){if(zn(p)&&s.length<5)return s+=String.fromCodePoint(p),t.consume(p),u;if(p===58){const y=s.toLowerCase();if(y==="http"||y==="https")return t.consume(p),f}return n(p)}function f(p){return p===47?(t.consume(p),a?d:(a=!0,f)):n(p)}function d(p){return p===null||Ff(p)||wt(p)||qi(p)||vd(p)?n(p):t.attempt(AC,t.attempt(RC,m),n)(p)}function m(p){return t.exit("literalAutolinkHttp"),t.exit("literalAutolink"),e(p)}}function xq(t,e,n){let r=0;return s;function s(l){return(l===87||l===119)&&r<3?(r++,t.consume(l),s):l===46&&r===3?(t.consume(l),a):n(l)}function a(l){return l===null?n(l):e(l)}}function wq(t,e,n){let r,s,a;return l;function l(d){return d===46||d===95?t.check(OC,f,u)(d):d===null||wt(d)||qi(d)||d!==45&&vd(d)?f(d):(a=!0,t.consume(d),l)}function u(d){return d===95?r=!0:(s=r,r=void 0),t.consume(d),l}function f(d){return s||r||!a?n(d):e(d)}}function Sq(t,e){let n=0,r=0;return s;function s(l){return l===40?(n++,t.consume(l),s):l===41&&r<n?a(l):l===33||l===34||l===38||l===39||l===41||l===42||l===44||l===46||l===58||l===59||l===60||l===63||l===93||l===95||l===126?t.check(OC,e,a)(l):l===null||wt(l)||qi(l)?e(l):(t.consume(l),s)}function a(l){return l===41&&r++,t.consume(l),s}}function kq(t,e,n){return r;function r(u){return u===33||u===34||u===39||u===41||u===42||u===44||u===46||u===58||u===59||u===63||u===95||u===126?(t.consume(u),r):u===38?(t.consume(u),a):u===93?(t.consume(u),s):u===60||u===null||wt(u)||qi(u)?e(u):n(u)}function s(u){return u===null||u===40||u===91||wt(u)||qi(u)?e(u):r(u)}function a(u){return zn(u)?l(u):n(u)}function l(u){return u===59?(t.consume(u),r):zn(u)?(t.consume(u),l):n(u)}}function Eq(t,e,n){return r;function r(a){return t.consume(a),s}function s(a){return Rn(a)?n(a):e(a)}}function MC(t){return t===null||t===40||t===42||t===95||t===91||t===93||t===126||wt(t)}function DC(t){return!zn(t)}function jC(t){return!(t===47||Gg(t))}function Gg(t){return t===43||t===45||t===46||t===95||Rn(t)}function f0(t){let e=t.length,n=!1;for(;e--;){const r=t[e][1];if((r.type==="labelLink"||r.type==="labelImage")&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return t.length>0&&!n&&(t[t.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const Cq={tokenize:Dq,partial:!0};function Tq(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:Nq,continuation:{tokenize:Iq},exit:Mq}},text:{91:{name:"gfmFootnoteCall",tokenize:Oq},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:Aq,resolveTo:Rq}}}}function Aq(t,e,n){const r=this;let s=r.events.length;const a=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let l;for(;s--;){const f=r.events[s][1];if(f.type==="labelImage"){l=f;break}if(f.type==="gfmFootnoteCall"||f.type==="labelLink"||f.type==="label"||f.type==="image"||f.type==="link")break}return u;function u(f){if(!l||!l._balanced)return n(f);const d=Br(r.sliceSerialize({start:l.end,end:r.now()}));return d.codePointAt(0)!==94||!a.includes(d.slice(1))?n(f):(t.enter("gfmFootnoteCallLabelMarker"),t.consume(f),t.exit("gfmFootnoteCallLabelMarker"),e(f))}}function Rq(t,e){let n=t.length;for(;n--;)if(t[n][1].type==="labelImage"&&t[n][0]==="enter"){t[n][1];break}t[n+1][1].type="data",t[n+3][1].type="gfmFootnoteCallLabelMarker";const r={type:"gfmFootnoteCall",start:Object.assign({},t[n+3][1].start),end:Object.assign({},t[t.length-1][1].end)},s={type:"gfmFootnoteCallMarker",start:Object.assign({},t[n+3][1].end),end:Object.assign({},t[n+3][1].end)};s.end.column++,s.end.offset++,s.end._bufferIndex++;const a={type:"gfmFootnoteCallString",start:Object.assign({},s.end),end:Object.assign({},t[t.length-1][1].start)},l={type:"chunkString",contentType:"string",start:Object.assign({},a.start),end:Object.assign({},a.end)},u=[t[n+1],t[n+2],["enter",r,e],t[n+3],t[n+4],["enter",s,e],["exit",s,e],["enter",a,e],["enter",l,e],["exit",l,e],["exit",a,e],t[t.length-2],t[t.length-1],["exit",r,e]];return t.splice(n,t.length-n+1,...u),t}function Oq(t,e,n){const r=this,s=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let a=0,l;return u;function u(p){return t.enter("gfmFootnoteCall"),t.enter("gfmFootnoteCallLabelMarker"),t.consume(p),t.exit("gfmFootnoteCallLabelMarker"),f}function f(p){return p!==94?n(p):(t.enter("gfmFootnoteCallMarker"),t.consume(p),t.exit("gfmFootnoteCallMarker"),t.enter("gfmFootnoteCallString"),t.enter("chunkString").contentType="string",d)}function d(p){if(a>999||p===93&&!l||p===null||p===91||wt(p))return n(p);if(p===93){t.exit("chunkString");const y=t.exit("gfmFootnoteCallString");return s.includes(Br(r.sliceSerialize(y)))?(t.enter("gfmFootnoteCallLabelMarker"),t.consume(p),t.exit("gfmFootnoteCallLabelMarker"),t.exit("gfmFootnoteCall"),e):n(p)}return wt(p)||(l=!0),a++,t.consume(p),p===92?m:d}function m(p){return p===91||p===92||p===93?(t.consume(p),a++,d):d(p)}}function Nq(t,e,n){const r=this,s=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let a,l=0,u;return f;function f(v){return t.enter("gfmFootnoteDefinition")._container=!0,t.enter("gfmFootnoteDefinitionLabel"),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(v),t.exit("gfmFootnoteDefinitionLabelMarker"),d}function d(v){return v===94?(t.enter("gfmFootnoteDefinitionMarker"),t.consume(v),t.exit("gfmFootnoteDefinitionMarker"),t.enter("gfmFootnoteDefinitionLabelString"),t.enter("chunkString").contentType="string",m):n(v)}function m(v){if(l>999||v===93&&!u||v===null||v===91||wt(v))return n(v);if(v===93){t.exit("chunkString");const w=t.exit("gfmFootnoteDefinitionLabelString");return a=Br(r.sliceSerialize(w)),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(v),t.exit("gfmFootnoteDefinitionLabelMarker"),t.exit("gfmFootnoteDefinitionLabel"),y}return wt(v)||(u=!0),l++,t.consume(v),v===92?p:m}function p(v){return v===91||v===92||v===93?(t.consume(v),l++,m):m(v)}function y(v){return v===58?(t.enter("definitionMarker"),t.consume(v),t.exit("definitionMarker"),s.includes(a)||s.push(a),nt(t,g,"gfmFootnoteDefinitionWhitespace")):n(v)}function g(v){return e(v)}}function Iq(t,e,n){return t.check(hc,e,t.attempt(Cq,e,n))}function Mq(t){t.exit("gfmFootnoteDefinition")}function Dq(t,e,n){const r=this;return nt(t,s,"gfmFootnoteDefinitionIndent",5);function s(a){const l=r.events[r.events.length-1];return l&&l[1].type==="gfmFootnoteDefinitionIndent"&&l[2].sliceSerialize(l[1],!0).length===4?e(a):n(a)}}function jq(t){let n=(t||{}).singleTilde;const r={name:"strikethrough",tokenize:a,resolveAll:s};return n==null&&(n=!0),{text:{126:r},insideSpan:{null:[r]},attentionMarkers:{null:[126]}};function s(l,u){let f=-1;for(;++f<l.length;)if(l[f][0]==="enter"&&l[f][1].type==="strikethroughSequenceTemporary"&&l[f][1]._close){let d=f;for(;d--;)if(l[d][0]==="exit"&&l[d][1].type==="strikethroughSequenceTemporary"&&l[d][1]._open&&l[f][1].end.offset-l[f][1].start.offset===l[d][1].end.offset-l[d][1].start.offset){l[f][1].type="strikethroughSequence",l[d][1].type="strikethroughSequence";const m={type:"strikethrough",start:Object.assign({},l[d][1].start),end:Object.assign({},l[f][1].end)},p={type:"strikethroughText",start:Object.assign({},l[d][1].end),end:Object.assign({},l[f][1].start)},y=[["enter",m,u],["enter",l[d][1],u],["exit",l[d][1],u],["enter",p,u]],g=u.parser.constructs.insideSpan.null;g&&dr(y,y.length,0,xd(g,l.slice(d+1,f),u)),dr(y,y.length,0,[["exit",p,u],["enter",l[f][1],u],["exit",l[f][1],u],["exit",m,u]]),dr(l,d-1,f-d+3,y),f=d+y.length-2;break}}for(f=-1;++f<l.length;)l[f][1].type==="strikethroughSequenceTemporary"&&(l[f][1].type="data");return l}function a(l,u,f){const d=this.previous,m=this.events;let p=0;return y;function y(v){return d===126&&m[m.length-1][1].type!=="characterEscape"?f(v):(l.enter("strikethroughSequenceTemporary"),g(v))}function g(v){const w=ao(d);if(v===126)return p>1?f(v):(l.consume(v),p++,g);if(p<2&&!n)return f(v);const E=l.exit("strikethroughSequenceTemporary"),S=ao(v);return E._open=!S||S===2&&!!w,E._close=!w||w===2&&!!S,u(v)}}}class Lq{constructor(){this.map=[]}add(e,n,r){zq(this,e,n,r)}consume(e){if(this.map.sort(function(a,l){return a[0]-l[0]}),this.map.length===0)return;let n=this.map.length;const r=[];for(;n>0;)n-=1,r.push(e.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),e.length=this.map[n][0];r.push(e.slice()),e.length=0;let s=r.pop();for(;s;){for(const a of s)e.push(a);s=r.pop()}this.map.length=0}}function zq(t,e,n,r){let s=0;if(!(n===0&&r.length===0)){for(;s<t.map.length;){if(t.map[s][0]===e){t.map[s][1]+=n,t.map[s][2].push(...r);return}s+=1}t.map.push([e,n,r])}}function Pq(t,e){let n=!1;const r=[];for(;e<t.length;){const s=t[e];if(n){if(s[0]==="enter")s[1].type==="tableContent"&&r.push(t[e+1][1].type==="tableDelimiterMarker"?"left":"none");else if(s[1].type==="tableContent"){if(t[e-1][1].type==="tableDelimiterMarker"){const a=r.length-1;r[a]=r[a]==="left"?"center":"right"}}else if(s[1].type==="tableDelimiterRow")break}else s[0]==="enter"&&s[1].type==="tableDelimiterRow"&&(n=!0);e+=1}return r}function Bq(){return{flow:{null:{name:"table",tokenize:Uq,resolveAll:$q}}}}function Uq(t,e,n){const r=this;let s=0,a=0,l;return u;function u(j){let J=r.events.length-1;for(;J>-1;){const X=r.events[J][1].type;if(X==="lineEnding"||X==="linePrefix")J--;else break}const ne=J>-1?r.events[J][1].type:null,me=ne==="tableHead"||ne==="tableRow"?R:f;return me===R&&r.parser.lazy[r.now().line]?n(j):me(j)}function f(j){return t.enter("tableHead"),t.enter("tableRow"),d(j)}function d(j){return j===124||(l=!0,a+=1),m(j)}function m(j){return j===null?n(j):Ie(j)?a>1?(a=0,r.interrupt=!0,t.exit("tableRow"),t.enter("lineEnding"),t.consume(j),t.exit("lineEnding"),g):n(j):Qe(j)?nt(t,m,"whitespace")(j):(a+=1,l&&(l=!1,s+=1),j===124?(t.enter("tableCellDivider"),t.consume(j),t.exit("tableCellDivider"),l=!0,m):(t.enter("data"),p(j)))}function p(j){return j===null||j===124||wt(j)?(t.exit("data"),m(j)):(t.consume(j),j===92?y:p)}function y(j){return j===92||j===124?(t.consume(j),p):p(j)}function g(j){return r.interrupt=!1,r.parser.lazy[r.now().line]?n(j):(t.enter("tableDelimiterRow"),l=!1,Qe(j)?nt(t,v,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(j):v(j))}function v(j){return j===45||j===58?E(j):j===124?(l=!0,t.enter("tableCellDivider"),t.consume(j),t.exit("tableCellDivider"),w):I(j)}function w(j){return Qe(j)?nt(t,E,"whitespace")(j):E(j)}function E(j){return j===58?(a+=1,l=!0,t.enter("tableDelimiterMarker"),t.consume(j),t.exit("tableDelimiterMarker"),S):j===45?(a+=1,S(j)):j===null||Ie(j)?M(j):I(j)}function S(j){return j===45?(t.enter("tableDelimiterFiller"),C(j)):I(j)}function C(j){return j===45?(t.consume(j),C):j===58?(l=!0,t.exit("tableDelimiterFiller"),t.enter("tableDelimiterMarker"),t.consume(j),t.exit("tableDelimiterMarker"),T):(t.exit("tableDelimiterFiller"),T(j))}function T(j){return Qe(j)?nt(t,M,"whitespace")(j):M(j)}function M(j){return j===124?v(j):j===null||Ie(j)?!l||s!==a?I(j):(t.exit("tableDelimiterRow"),t.exit("tableHead"),e(j)):I(j)}function I(j){return n(j)}function R(j){return t.enter("tableRow"),U(j)}function U(j){return j===124?(t.enter("tableCellDivider"),t.consume(j),t.exit("tableCellDivider"),U):j===null||Ie(j)?(t.exit("tableRow"),e(j)):Qe(j)?nt(t,U,"whitespace")(j):(t.enter("data"),q(j))}function q(j){return j===null||j===124||wt(j)?(t.exit("data"),U(j)):(t.consume(j),j===92?K:q)}function K(j){return j===92||j===124?(t.consume(j),q):q(j)}}function $q(t,e){let n=-1,r=!0,s=0,a=[0,0,0,0],l=[0,0,0,0],u=!1,f=0,d,m,p;const y=new Lq;for(;++n<t.length;){const g=t[n],v=g[1];g[0]==="enter"?v.type==="tableHead"?(u=!1,f!==0&&(nS(y,e,f,d,m),m=void 0,f=0),d={type:"table",start:Object.assign({},v.start),end:Object.assign({},v.end)},y.add(n,0,[["enter",d,e]])):v.type==="tableRow"||v.type==="tableDelimiterRow"?(r=!0,p=void 0,a=[0,0,0,0],l=[0,n+1,0,0],u&&(u=!1,m={type:"tableBody",start:Object.assign({},v.start),end:Object.assign({},v.end)},y.add(n,0,[["enter",m,e]])),s=v.type==="tableDelimiterRow"?2:m?3:1):s&&(v.type==="data"||v.type==="tableDelimiterMarker"||v.type==="tableDelimiterFiller")?(r=!1,l[2]===0&&(a[1]!==0&&(l[0]=l[1],p=qu(y,e,a,s,void 0,p),a=[0,0,0,0]),l[2]=n)):v.type==="tableCellDivider"&&(r?r=!1:(a[1]!==0&&(l[0]=l[1],p=qu(y,e,a,s,void 0,p)),a=l,l=[a[1],n,0,0])):v.type==="tableHead"?(u=!0,f=n):v.type==="tableRow"||v.type==="tableDelimiterRow"?(f=n,a[1]!==0?(l[0]=l[1],p=qu(y,e,a,s,n,p)):l[1]!==0&&(p=qu(y,e,l,s,n,p)),s=0):s&&(v.type==="data"||v.type==="tableDelimiterMarker"||v.type==="tableDelimiterFiller")&&(l[3]=n)}for(f!==0&&nS(y,e,f,d,m),y.consume(e.events),n=-1;++n<e.events.length;){const g=e.events[n];g[0]==="enter"&&g[1].type==="table"&&(g[1]._align=Pq(e.events,n))}return t}function qu(t,e,n,r,s,a){const l=r===1?"tableHeader":r===2?"tableDelimiter":"tableData",u="tableContent";n[0]!==0&&(a.end=Object.assign({},$a(e.events,n[0])),t.add(n[0],0,[["exit",a,e]]));const f=$a(e.events,n[1]);if(a={type:l,start:Object.assign({},f),end:Object.assign({},f)},t.add(n[1],0,[["enter",a,e]]),n[2]!==0){const d=$a(e.events,n[2]),m=$a(e.events,n[3]),p={type:u,start:Object.assign({},d),end:Object.assign({},m)};if(t.add(n[2],0,[["enter",p,e]]),r!==2){const y=e.events[n[2]],g=e.events[n[3]];if(y[1].end=Object.assign({},g[1].end),y[1].type="chunkText",y[1].contentType="text",n[3]>n[2]+1){const v=n[2]+1,w=n[3]-n[2]-1;t.add(v,w,[])}}t.add(n[3]+1,0,[["exit",p,e]])}return s!==void 0&&(a.end=Object.assign({},$a(e.events,s)),t.add(s,0,[["exit",a,e]]),a=void 0),a}function nS(t,e,n,r,s){const a=[],l=$a(e.events,n);s&&(s.end=Object.assign({},l),a.push(["exit",s,e])),r.end=Object.assign({},l),a.push(["exit",r,e]),t.add(n+1,0,a)}function $a(t,e){const n=t[e],r=n[0]==="enter"?"start":"end";return n[1][r]}const qq={name:"tasklistCheck",tokenize:Vq};function Fq(){return{text:{91:qq}}}function Vq(t,e,n){const r=this;return s;function s(f){return r.previous!==null||!r._gfmTasklistFirstContentOfListItem?n(f):(t.enter("taskListCheck"),t.enter("taskListCheckMarker"),t.consume(f),t.exit("taskListCheckMarker"),a)}function a(f){return wt(f)?(t.enter("taskListCheckValueUnchecked"),t.consume(f),t.exit("taskListCheckValueUnchecked"),l):f===88||f===120?(t.enter("taskListCheckValueChecked"),t.consume(f),t.exit("taskListCheckValueChecked"),l):n(f)}function l(f){return f===93?(t.enter("taskListCheckMarker"),t.consume(f),t.exit("taskListCheckMarker"),t.exit("taskListCheck"),u):n(f)}function u(f){return Ie(f)?e(f):Qe(f)?t.check({tokenize:Hq},e,n)(f):n(f)}}function Hq(t,e,n){return nt(t,r,"whitespace");function r(s){return s===null?n(s):e(s)}}function Gq(t){return HE([yq(),Tq(),jq(t),Bq(),Fq()])}const Kq={};function Zq(t){const e=this,n=t||Kq,r=e.data(),s=r.micromarkExtensions||(r.micromarkExtensions=[]),a=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),l=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);s.push(Gq(n)),a.push(hq()),l.push(pq(n))}function Qq(t){dC(t,[/\r?\n|\r/g,Jq])}function Jq(){return{type:"break"}}function Yq(){return function(t){Qq(t)}}const Wq={pre:({children:t})=>x.jsx(x.Fragment,{children:t}),li:({children:t,...e})=>x.jsx("li",{className:"py-0.5 ml-0",...e,children:t}),ul:({children:t,...e})=>x.jsx("ul",{className:"list-disc list-outside ml-5 pl-0 my-2",...e,children:t}),ol:({children:t,...e})=>x.jsx("ol",{className:"list-decimal list-outside ml-5 pl-0 my-2",...e,children:t}),strong:({children:t,...e})=>x.jsx("span",{className:"font-semibold",...e,children:t}),a:({children:t,href:e,...n})=>{let r=e||"";return r&&!r.startsWith("http")&&!r.startsWith("#")&&(r=`https://${r}`),x.jsx("a",{className:"text-sky-400 hover:underline",href:r,target:"_blank",rel:"noreferrer noopener",...n,children:t})},h1:({children:t,...e})=>x.jsx("h1",{className:"text-xl font-semibold mt-4 mb-2",...e,children:t}),h2:({children:t,...e})=>x.jsx("h2",{className:"text-lg font-semibold mt-4 mb-2",...e,children:t}),h3:({children:t,...e})=>x.jsx("h3",{className:"text-base font-semibold mt-3 mb-1",...e,children:t}),h4:({children:t,...e})=>x.jsx("h4",{className:"text-sm font-semibold mt-3 mb-1",...e,children:t}),h5:({children:t,...e})=>x.jsx("h5",{className:"text-sm font-semibold mt-2 mb-1",...e,children:t}),h6:({children:t,...e})=>x.jsx("h6",{className:"text-xs font-semibold mt-2 mb-1",...e,children:t}),p:({children:t,...e})=>x.jsx("p",{className:"my-2 leading-relaxed",...e,children:t}),table:({children:t,...e})=>x.jsx("div",{className:"overflow-x-auto my-3",children:x.jsx("table",{className:"w-full border-collapse border border-neutral-600 text-xs",...e,children:t})}),thead:({children:t,...e})=>x.jsx("thead",{className:"bg-neutral-700",...e,children:t}),tbody:({children:t,...e})=>x.jsx("tbody",{...e,children:t}),tr:({children:t,...e})=>x.jsx("tr",{className:"border-b border-neutral-600",...e,children:t}),th:({children:t,...e})=>x.jsx("th",{className:"p-2 text-left font-semibold border-r last:border-r-0 border-neutral-600",...e,children:t}),td:({children:t,...e})=>x.jsx("td",{className:"p-2 border-r last:border-r-0 border-neutral-600",...e,children:t}),blockquote:({children:t,...e})=>x.jsx("blockquote",{className:"border-l-4 border-neutral-500 pl-3 py-1 my-2 italic text-neutral-300",...e,children:t}),hr:({...t})=>x.jsx("hr",{className:"my-4 border-neutral-600",...t}),code({children:t,className:e,...n}){const r=/language-(\w+)/.exec(e||""),s=String(t).replace(/\n$/,""),a=s.includes(`
`);if(!r&&!a)return x.jsx("code",{...n,className:`${e||""} bg-neutral-700 px-1.5 py-0.5 rounded text-xs font-mono text-sky-300`,children:t});const l=r?.[1]||"text";return x.jsxs("div",{className:"my-3",children:[x.jsx("div",{className:"flex items-center justify-between bg-neutral-700 px-3 py-1 rounded-t text-xs text-neutral-400",children:x.jsx("span",{children:l})}),x.jsx("pre",{className:"bg-neutral-800 p-3 rounded-b overflow-x-auto",children:x.jsx("code",{className:"text-xs font-mono text-neutral-200",children:s})})]})}},Xq=[Zq,Yq],e9=t=>{const e=Pe.c(6),{children:n}=t;if(!n)return null;let r=n,s;if(e[0]!==r){r=r.replace(/^(#{1,6}\s+.+)\n```/gm,"$1\n\n```");let l;e[3]===Symbol.for("react.memo_cache_sentinel")?(l=/```\n(#{1,6}\s+)/gm,e[3]=l):l=e[3],s=r.replace(l,"```\n\n$1"),e[0]=r,e[1]=s,e[2]=r}else s=e[1],r=e[2];r=s;let a;return e[4]!==r?(a=x.jsx(LU,{remarkPlugins:Xq,components:Wq,children:r}),e[4]=r,e[5]=a):a=e[5],a},LC=Z.memo(e9,(t,e)=>t.children===e.children);function rS(t,e="image/png"){const n=atob(t),r=new Array(n.length);for(let a=0;a<n.length;a++)r[a]=n.charCodeAt(a);const s=new Uint8Array(r);return new Blob([s],{type:e})}function t9(){const t=Pe.c(28),{request:e}=Xt(),n=e?.openai?.response,r=n?.result;let s;e:{if(!r||r.type!=="image"||!r.image){s=null;break e}if(!r.image.startsWith("http")){let d;if(t[0]!==r.image){const m=rS(r.image,"image/png");d=URL.createObjectURL(m),t[0]=r.image,t[1]=d}else d=t[1];s=d;break e}s=r.image}const a=s;let l;e:{if(!r||r.type!=="audio"||!r.audio){l=null;break e}let d;if(t[2]!==r.audio){const m=rS(r.audio,"audio/mpeg");d=URL.createObjectURL(m),t[2]=r.audio,t[3]=d}else d=t[3];l=d}const u=l;if(!n)return null;if(!r){let d;return t[4]===Symbol.for("react.memo_cache_sentinel")?(d=x.jsx("div",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:"No response data"}),t[4]=d):d=t[4],d}if(r.type==="text"){let d;return t[5]!==r.text?(d=x.jsx("div",{className:"h-full overflow-auto",children:x.jsx("div",{className:"prose prose-sm dark:prose-invert max-w-none prose-pre:bg-neutral-100 dark:prose-pre:bg-neutral-800 prose-pre:text-neutral-800 dark:prose-pre:text-neutral-200 prose-code:text-violet-600 dark:prose-code:text-violet-400 prose-code:before:content-none prose-code:after:content-none",children:x.jsx(LC,{children:r.text})})}),t[5]=r.text,t[6]=d):d=t[6],d}if(r.type==="image"){if(!r.image){let p;return t[7]===Symbol.for("react.memo_cache_sentinel")?(p=x.jsx("div",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:"No image data"}),t[7]=p):p=t[7],p}let d;t[8]!==a?(d=a&&x.jsx("img",{src:a,alt:"Generated image",className:"max-w-full h-auto object-contain rounded-lg shadow-lg"}),t[8]=a,t[9]=d):d=t[9];let m;return t[10]!==d?(m=x.jsx("div",{className:"h-full overflow-auto",children:x.jsx("div",{className:"flex items-center justify-center p-4",children:d})}),t[10]=d,t[11]=m):m=t[11],m}if(r.type==="audio"){if(!r.audio){let g;return t[12]===Symbol.for("react.memo_cache_sentinel")?(g=x.jsx("div",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:"No audio data"}),t[12]=g):g=t[12],g}let d;t[13]===Symbol.for("react.memo_cache_sentinel")?(d=x.jsx("div",{className:"text-sm font-medium text-neutral-700 dark:text-neutral-300",children:"Generated Audio"}),t[13]=d):d=t[13];let m;t[14]!==u?(m=u&&x.jsx("audio",{controls:!0,src:u,className:"w-full max-w-md",preload:"auto",children:"Your browser does not support the audio element."}),t[14]=u,t[15]=m):m=t[15];let p;t[16]!==u?(p=u&&x.jsx("a",{href:u,download:"generated-audio.mp3",className:"text-sm text-violet-600 dark:text-violet-400 hover:underline",children:"Download Audio"}),t[16]=u,t[17]=p):p=t[17];let y;return t[18]!==m||t[19]!==p?(y=x.jsx("div",{className:"h-full overflow-auto",children:x.jsxs("div",{className:"flex flex-col items-center justify-center p-4 space-y-4",children:[d,m,p]})}),t[18]=m,t[19]=p,t[20]=y):y=t[20],y}if(r.type==="transcription"){let d;return t[21]!==r.text?(d=x.jsx("div",{className:"h-full overflow-auto",children:x.jsx("div",{className:"prose prose-sm dark:prose-invert max-w-none prose-pre:bg-neutral-100 dark:prose-pre:bg-neutral-800 prose-pre:text-neutral-800 dark:prose-pre:text-neutral-200 prose-code:text-violet-600 dark:prose-code:text-violet-400 prose-code:before:content-none prose-code:after:content-none",children:x.jsx("div",{className:"p-4",children:x.jsx("div",{className:"text-sm text-neutral-800 dark:text-neutral-100 whitespace-pre-wrap",children:r.text})})})}),t[21]=r.text,t[22]=d):d=t[22],d}if(r.type==="embeddings"){let d;t[23]!==r.embeddings?(d=r.embeddings.map(n9),t[23]=r.embeddings,t[24]=d):d=t[24];let m;return t[25]!==d?(m=x.jsx("div",{className:"h-full overflow-auto",children:x.jsx("div",{className:"p-4 space-y-3",children:d})}),t[25]=d,t[26]=m):m=t[26],m}let f;return t[27]===Symbol.for("react.memo_cache_sentinel")?(f=x.jsx("div",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:"Unknown response type"}),t[27]=f):f=t[27],f}function n9(t,e){return x.jsxs("div",{className:"space-y-1",children:[x.jsxs("div",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:["Input ",e+1,": ",t.length," dimensions"]}),x.jsx("pre",{className:"text-xs overflow-auto text-neutral-800 dark:text-neutral-200",children:JSON.stringify(t,null,2)})]},e)}function Bm(t){return t<1e3?`${t}ms`:t<6e4?`${(t/1e3).toFixed(2)}s`:`${(t/6e4).toFixed(2)}m`}function r9(t){return t>=200&&t<300?"text-emerald-600 dark:text-emerald-400":t>=300&&t<400?"text-amber-600 dark:text-amber-400":t>=400&&t<500?"text-orange-600 dark:text-orange-400":t>=500?"text-red-600 dark:text-red-400":"text-neutral-600 dark:text-neutral-400"}function Um(t){const e=Pe.c(16),{statusCode:n,status:r}=t;let s;e[0]!==n?(s=r9(n),e[0]=n,e[1]=s):s=e[1];const a=s,l=n>=200&&n<300,u=n>=400,f=`flex items-center gap-1.5 px-2 py-1 rounded-md bg-neutral-100 dark:bg-white/5 ${a}`;let d;e[2]!==l?(d=l&&x.jsx(Dy,{size:14}),e[2]=l,e[3]=d):d=e[3];let m;e[4]!==u?(m=u&&x.jsx(W3,{size:14}),e[4]=u,e[5]=m):m=e[5];let p;e[6]!==n?(p=x.jsx("span",{className:"text-xs font-medium",children:n}),e[6]=n,e[7]=p):p=e[7];let y;e[8]!==r?(y=x.jsx("span",{className:"text-xs opacity-75",children:r}),e[8]=r,e[9]=y):y=e[9];let g;return e[10]!==f||e[11]!==d||e[12]!==m||e[13]!==p||e[14]!==y?(g=x.jsxs("div",{className:f,children:[d,m,p,y]}),e[10]=f,e[11]=d,e[12]=m,e[13]=p,e[14]=y,e[15]=g):g=e[15],g}function s9(){const t=Pe.c(43),{request:e,isExecuting:n}=Xt(),[r,s]=Z.useState("pretty"),[a,l]=Z.useState(!1),u=n,f=e?.protocol??"rest",d=e?.http?.response,m=e?.grpc?.response,p=e?.mcp?.response,y=e?.mcp?.response?.error,g=e?.openai?.response,v=e?.openai?.response?.error;let w,E,S,C;if(t[0]!==m||t[1]!==d||t[2]!==u||t[3]!==y||t[4]!==p||t[5]!==v||t[6]!==g||t[7]!==f||t[8]!==r){C=Symbol.for("react.early_return_sentinel");e:{E=d??(m?{status:m.error||"OK",statusCode:m.error?0:200,headers:m.metadata??{},body:new Blob([m.body],{type:"application/json"}),duration:m.duration}:void 0);const me=E?.error??y??v;if(u){let F;t[13]===Symbol.for("react.memo_cache_sentinel")?(F=x.jsxs("div",{className:"flex flex-col items-center justify-center h-full min-h-50",children:[x.jsxs("div",{className:"relative mb-4",children:[x.jsx("div",{className:"w-12 h-12 rounded-full border-2 border-zinc-100 dark:border-zinc-800"}),x.jsx("div",{className:"absolute inset-0 w-12 h-12 rounded-full border-2 border-zinc-400 border-t-transparent animate-spin"})]}),x.jsx("span",{className:"text-xs font-medium text-zinc-400 uppercase tracking-widest animate-pulse",children:"Sending Request"})]}),t[13]=F):F=t[13],C=F;break e}if(me){let F,B;t[14]===Symbol.for("react.memo_cache_sentinel")?(F=x.jsx(Bk,{className:"w-5 h-5 text-rose-500 dark:text-rose-400"}),B=x.jsx("h3",{className:"font-semibold text-rose-500 dark:text-rose-400",children:"Error"}),t[14]=F,t[15]=B):(F=t[14],B=t[15]);const G=x.jsxs("div",{children:[B,x.jsx("p",{className:"text-sm text-neutral-600 dark:text-neutral-300 mt-1",children:me})]});let ie;t[16]!==G?(ie=x.jsx("div",{className:"bg-rose-500/10 border border-rose-500/20 rounded-xl p-4",children:x.jsxs("div",{className:"flex items-center gap-3",children:[F,G]})}),t[16]=G,t[17]=ie):ie=t[17],C=ie;break e}if(!E&&!p&&!g){let F;t[18]===Symbol.for("react.memo_cache_sentinel")?(F=x.jsxs("div",{className:"h-full flex flex-col items-center justify-center",children:[x.jsx(CD,{className:"w-12 h-12 text-neutral-300 dark:text-neutral-600 mb-4"}),x.jsx("p",{className:"text-sm text-neutral-400 dark:text-neutral-500",children:"Hit Send to see what happens"})]}),t[18]=F):F=t[18],C=F;break e}w=()=>{t:switch(f){case"openai":{if(g)return x.jsx(t9,{});break t}case"mcp":{if(p?.result){const F="content"in p.result;return x.jsx(AP,{toolResponse:F?p.result:void 0,resourceResponse:F?void 0:p.result,viewMode:r})}break t}case"grpc":{if(E)return x.jsx(yP,{response:E,viewMode:r});break t}default:if(E)return x.jsx(hP,{response:E,viewMode:r})}return null};const X=E?.headers?.["content-type"]?.toLowerCase()||"";S=X.includes("image/")||X.includes("video/")||X.includes("audio/")||X.includes("application/pdf")||X.includes("application/octet-stream")}t[0]=m,t[1]=d,t[2]=u,t[3]=y,t[4]=p,t[5]=v,t[6]=g,t[7]=f,t[8]=r,t[9]=w,t[10]=E,t[11]=S,t[12]=C}else w=t[9],E=t[10],S=t[11],C=t[12];if(C!==Symbol.for("react.early_return_sentinel"))return C;const M=!S&&f!=="openai",I=f!=="mcp"&&f!=="openai"&&E;let R;t[19]!==p||t[20]!==g||t[21]!==f||t[22]!==E||t[23]!==a||t[24]!==I||t[25]!==M||t[26]!==r?(R=(E||p||g)&&x.jsxs("div",{className:"flex items-center gap-3 mb-3 shrink-0",children:[E&&x.jsxs(x.Fragment,{children:[x.jsx(Um,{statusCode:E.statusCode,status:E.status}),x.jsxs("div",{className:"flex items-center gap-1 text-xs text-neutral-500 dark:text-neutral-400",children:[x.jsx(jl,{size:12}),x.jsx("span",{children:Bm(E.duration)})]}),E.body&&x.jsxs("div",{className:"text-xs text-neutral-400 dark:text-neutral-500",children:[(E.body.size/1024).toFixed(2)," KB"]})]}),p&&!E&&x.jsxs(x.Fragment,{children:[x.jsx(Um,{statusCode:200,status:"OK"}),x.jsxs("div",{className:"flex items-center gap-1 text-xs text-neutral-500 dark:text-neutral-400",children:[x.jsx(jl,{size:12}),x.jsx("span",{children:Bm(p.duration)})]})]}),g&&!E&&!p&&x.jsxs(x.Fragment,{children:[x.jsx(Um,{statusCode:200,status:"OK"}),x.jsxs("div",{className:"flex items-center gap-1 text-xs text-neutral-500 dark:text-neutral-400",children:[x.jsx(jl,{size:12}),x.jsx("span",{children:Bm(g.duration)})]})]}),x.jsx("div",{className:"flex-1"}),M&&x.jsxs("div",{className:"flex items-center gap-0.5 text-xs",children:[x.jsx("button",{onClick:()=>s("pretty"),className:`px-2 py-0.5 rounded transition-colors ${r==="pretty"?"text-neutral-700 dark:text-neutral-200 font-medium":"text-neutral-400 dark:text-neutral-500 hover:text-neutral-600 dark:hover:text-neutral-300"}`,children:"Pretty"}),x.jsx("span",{className:"text-neutral-300 dark:text-neutral-600",children:"|"}),x.jsx("button",{onClick:()=>s("raw"),className:`px-2 py-0.5 rounded transition-colors ${r==="raw"?"text-neutral-700 dark:text-neutral-200 font-medium":"text-neutral-400 dark:text-neutral-500 hover:text-neutral-600 dark:hover:text-neutral-300"}`,children:"Raw"})]}),I&&x.jsxs("button",{onClick:()=>l(!a),className:`px-2 py-0.5 text-xs rounded transition-colors ${a?"text-neutral-700 dark:text-neutral-200 font-medium":"text-neutral-400 dark:text-neutral-500 hover:text-neutral-600 dark:hover:text-neutral-300"}`,children:[f==="grpc"?"Metadata":"Headers"," (",Object.keys(E.headers).length,")"]})]}),t[19]=p,t[20]=g,t[21]=f,t[22]=E,t[23]=a,t[24]=I,t[25]=M,t[26]=r,t[27]=R):R=t[27];const U=`min-h-0 overflow-hidden transition-all ${a?"flex-2":"flex-1"}`;let q;t[28]!==w?(q=w(),t[28]=w,t[29]=q):q=t[29];let K;t[30]!==U||t[31]!==q?(K=x.jsx("div",{className:U,children:q}),t[30]=U,t[31]=q,t[32]=K):K=t[32];let j;t[33]!==f||t[34]!==E||t[35]!==a?(j=a&&E&&x.jsxs("div",{className:"flex-1 min-w-75 max-w-125 flex flex-col border-l border-neutral-200 dark:border-white/10 pl-3",children:[x.jsxs("div",{className:"text-xs font-medium text-neutral-600 dark:text-neutral-400 mb-2",children:[f==="grpc"?"Metadata":"Headers"," (",Object.keys(E.headers).length,")"]}),x.jsx("div",{className:"flex-1 overflow-auto",children:x.jsx("div",{className:"space-y-2",children:Object.entries(E.headers).map(i9)})})]}),t[33]=f,t[34]=E,t[35]=a,t[36]=j):j=t[36];let J;t[37]!==K||t[38]!==j?(J=x.jsxs("div",{className:"flex-1 min-h-0 flex gap-3 overflow-hidden",children:[K,j]}),t[37]=K,t[38]=j,t[39]=J):J=t[39];let ne;return t[40]!==R||t[41]!==J?(ne=x.jsxs("div",{className:"h-full flex flex-col overflow-hidden",children:[R,J]}),t[40]=R,t[41]=J,t[42]=ne):ne=t[42],ne}function i9(t){const[e,n]=t;return x.jsxs("div",{className:"text-xs",children:[x.jsx("div",{className:"font-mono text-neutral-600 dark:text-neutral-400 mb-0.5",children:e}),x.jsx("div",{className:"font-mono text-neutral-700 dark:text-neutral-200 break-all",children:n})]},e)}function a9(){const t=Pe.c(55),{request:e,newRequest:n,sidebarCollapsed:r,toggleSidebar:s,history:a}=Xt(),{setPortalTarget:l}=Lk();if(!e){let me;return t[0]===Symbol.for("react.memo_cache_sentinel")?(me=x.jsx("div",{className:"flex-1 flex items-center justify-center text-neutral-400 dark:text-neutral-500",children:"No active request"}),t[0]=me):me=t[0],me}const u=e.protocol??"rest";let f;t[1]!==a||t[2]!==r||t[3]!==s?(f=r&&a.length>0&&x.jsx("button",{type:"button",onClick:s,className:"p-1.5 hover:bg-neutral-100 dark:hover:bg-white/10 rounded-md transition-colors text-neutral-500 dark:text-neutral-400 hover:text-neutral-700 dark:hover:text-neutral-200",title:"Show sidebar",children:x.jsx(gD,{className:"w-4 h-4"})}),t[1]=a,t[2]=r,t[3]=s,t[4]=f):f=t[4];let d;t[5]===Symbol.for("react.memo_cache_sentinel")?(d=x.jsx(YD,{}),t[5]=d):d=t[5];let m;t[6]!==u?(m=u==="rest"&&x.jsx(ij,{}),t[6]=u,t[7]=m):m=t[7];let p;t[8]!==u?(p=u==="grpc"&&x.jsx(pP,{}),t[8]=u,t[9]=p):p=t[9];let y;t[10]!==u?(y=u==="mcp"&&x.jsx(_P,{}),t[10]=u,t[11]=y):y=t[11];let g;t[12]!==u?(g=u==="openai"&&x.jsx(RP,{}),t[12]=u,t[13]=g):g=t[13];let v;t[14]!==m||t[15]!==p||t[16]!==y||t[17]!==g?(v=x.jsxs("div",{className:"flex-1 flex items-center",children:[m,p,y,g]}),t[14]=m,t[15]=p,t[16]=y,t[17]=g,t[18]=v):v=t[18];let w;t[19]!==l?(w=x.jsx("div",{ref:l,className:"flex items-center gap-1"}),t[19]=l,t[20]=w):w=t[20];let E;t[21]===Symbol.for("react.memo_cache_sentinel")?(E=x.jsx(XD,{}),t[21]=E):E=t[21];let S;t[22]===Symbol.for("react.memo_cache_sentinel")?(S=x.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),t[22]=S):S=t[22];let C;t[23]!==n?(C=x.jsx("button",{onClick:n,className:"p-1.5 hover:bg-neutral-100 dark:hover:bg-white/10 rounded-md transition-colors text-neutral-500 dark:text-neutral-400 hover:text-neutral-700 dark:hover:text-neutral-200",title:"New request",children:S}),t[23]=n,t[24]=C):C=t[24];let T;t[25]!==f||t[26]!==C||t[27]!==v||t[28]!==w?(T=x.jsxs("div",{className:"pl-2 pr-3 py-2 border-b border-neutral-200 dark:border-white/5 flex items-center gap-2 shrink-0",children:[f,d,v,w,E,C]}),t[25]=f,t[26]=C,t[27]=v,t[28]=w,t[29]=T):T=t[29];let M;t[30]!==u?(M=u==="rest"&&x.jsx(Oj,{}),t[30]=u,t[31]=M):M=t[31];let I;t[32]!==u?(I=u==="grpc"&&x.jsx(gP,{}),t[32]=u,t[33]=I):I=t[33];let R;t[34]!==u?(R=u==="mcp"&&x.jsx(xP,{}),t[34]=u,t[35]=R):R=t[35];let U;t[36]!==u?(U=u==="openai"&&x.jsx(BP,{}),t[36]=u,t[37]=U):U=t[37];let q;t[38]!==M||t[39]!==I||t[40]!==R||t[41]!==U?(q=x.jsxs("div",{className:"pl-2 pr-3 py-2 border-b border-neutral-200 dark:border-white/5 overflow-visible shrink-0",children:[M,I,R,U]}),t[38]=M,t[39]=I,t[40]=R,t[41]=U,t[42]=q):q=t[42];let K;t[43]!==e.grpc?.response||t[44]!==e.http?.response||t[45]!==e.mcp?.response||t[46]!==e.openai?.response?(K=(e.http?.response||e.grpc?.response||e.mcp?.response||e.openai?.response)&&x.jsx("h2",{className:"text-[10px] font-medium text-neutral-500 dark:text-neutral-300 uppercase tracking-wider mb-2 shrink-0",children:"Response"}),t[43]=e.grpc?.response,t[44]=e.http?.response,t[45]=e.mcp?.response,t[46]=e.openai?.response,t[47]=K):K=t[47];let j;t[48]===Symbol.for("react.memo_cache_sentinel")?(j=x.jsx("div",{className:"flex-1 min-h-0 overflow-hidden",children:x.jsx(s9,{})}),t[48]=j):j=t[48];let J;t[49]!==K?(J=x.jsxs("div",{className:"flex-1 pl-2 pr-3 py-2 flex flex-col min-h-0 overflow-hidden",children:[K,j]}),t[49]=K,t[50]=J):J=t[50];let ne;return t[51]!==T||t[52]!==q||t[53]!==J?(ne=x.jsxs("div",{className:"h-full flex flex-col overflow-hidden",children:[T,q,J]}),t[51]=T,t[52]=q,t[53]=J,t[54]=ne):ne=t[54],ne}class o9{#e=!0;#t;#n;#r;#s;#o;#i;#a;#p=0;#m=5;#c=!1;#u=!1;#l=null;#f=()=>{this.debugLog("Connected to event bus"),this.#o=!0,this.#c=!1,this.debugLog("Emitting queued events",this.#s),this.#s.forEach(e=>this.emitEventToBus(e)),this.#s=[],this.stopConnectLoop(),this.#n().removeEventListener("tanstack-connect-success",this.#f)};#d=()=>{if(this.#p<this.#m){this.#p++,this.dispatchCustomEvent("tanstack-connect",{});return}this.#n().removeEventListener("tanstack-connect",this.#d),this.#u=!0,this.debugLog("Max retries reached, giving up on connection"),this.stopConnectLoop()};#h=()=>{this.#c||(this.#c=!0,this.#n().addEventListener("tanstack-connect-success",this.#f),this.#d())};constructor({pluginId:e,debug:n=!1,enabled:r=!0,reconnectEveryMs:s=300}){this.#t=e,this.#e=r,this.#n=this.getGlobalTarget,this.#r=n,this.debugLog(" Initializing event subscription for plugin",this.#t),this.#s=[],this.#o=!1,this.#u=!1,this.#i=null,this.#a=s}startConnectLoop(){this.#i!==null||this.#o||(this.debugLog(`Starting connect loop (every ${this.#a}ms)`),this.#i=setInterval(this.#d,this.#a))}stopConnectLoop(){this.#c=!1,this.#i!==null&&(clearInterval(this.#i),this.#i=null,this.#s=[],this.debugLog("Stopped connect loop"))}debugLog(...e){this.#r&&console.log(` [tanstack-devtools:${this.#t}-plugin]`,...e)}getGlobalTarget(){if(typeof globalThis<"u"&&globalThis.__TANSTACK_EVENT_TARGET__)return this.debugLog("Using global event target"),globalThis.__TANSTACK_EVENT_TARGET__;if(typeof window<"u"&&typeof window.addEventListener<"u")return this.debugLog("Using window as event target"),window;const e=typeof EventTarget<"u"?new EventTarget:void 0;return typeof e>"u"||typeof e.addEventListener>"u"?(this.debugLog("No event mechanism available, running in non-web environment"),{addEventListener:()=>{},removeEventListener:()=>{},dispatchEvent:()=>!1}):(this.debugLog("Using new EventTarget as fallback"),e)}getPluginId(){return this.#t}dispatchCustomEventShim(e,n){try{const r=new Event(e,{detail:n});this.#n().dispatchEvent(r)}catch{this.debugLog("Failed to dispatch shim event")}}dispatchCustomEvent(e,n){try{this.#n().dispatchEvent(new CustomEvent(e,{detail:n}))}catch{this.dispatchCustomEventShim(e,n)}}emitEventToBus(e){this.debugLog("Emitting event to client bus",e),this.dispatchCustomEvent("tanstack-dispatch-event",e)}createEventPayload(e,n){return{type:`${this.#t}:${e}`,payload:n,pluginId:this.#t}}emit(e,n){if(!this.#e){this.debugLog("Event bus client is disabled, not emitting event",e,n);return}if(this.#l&&(this.debugLog("Emitting event to internal event target",e,n),this.#l.dispatchEvent(new CustomEvent(`${this.#t}:${e}`,{detail:this.createEventPayload(e,n)}))),this.#u){this.debugLog("Previously failed to connect, not emitting to bus");return}if(!this.#o){this.debugLog("Bus not available, will be pushed as soon as connected"),this.#s.push(this.createEventPayload(e,n)),typeof CustomEvent<"u"&&!this.#c&&(this.#h(),this.startConnectLoop());return}return this.emitEventToBus(this.createEventPayload(e,n))}on(e,n,r){const s=r?.withEventTarget??!1,a=`${this.#t}:${e}`;if(s&&(this.#l||(this.#l=new EventTarget),this.#l.addEventListener(a,u=>{n(u.detail)})),!this.#e)return this.debugLog("Event bus client is disabled, not registering event",a),()=>{};const l=u=>{this.debugLog("Received event from bus",u.detail),n(u.detail)};return this.#n().addEventListener(a,l),this.debugLog("Registered event to bus",a),()=>{s&&this.#l?.removeEventListener(a,l),this.#n().removeEventListener(a,l)}}onAll(e){if(!this.#e)return this.debugLog("Event bus client is disabled, not registering event"),()=>{};const n=r=>{const s=r.detail;e(s)};return this.#n().addEventListener("tanstack-devtools-global",n),()=>this.#n().removeEventListener("tanstack-devtools-global",n)}onAllPluginEvents(e){if(!this.#e)return this.debugLog("Event bus client is disabled, not registering event"),()=>{};const n=r=>{const s=r.detail;this.#t&&s.pluginId!==this.#t||e(s)};return this.#n().addEventListener("tanstack-devtools-global",n),()=>this.#n().removeEventListener("tanstack-devtools-global",n)}}class l9 extends o9{constructor(){super({pluginId:"tanstack-ai-devtools"})}}const Ft=new l9;async function c9(t){let e="";for await(const n of t)n.type==="content"&&n.delta&&(e+=n.delta);return e}function u9(t){return typeof t=="object"&&t!==null&&"~standard"in t&&typeof t["~standard"]=="object"&&t["~standard"].version===1&&typeof t["~standard"].jsonSchema=="object"&&typeof t["~standard"].jsonSchema.input=="function"}function $i(t){return typeof t=="object"&&t!==null&&"~standard"in t&&typeof t["~standard"]=="object"&&t!==null&&t["~standard"]!==null&&"version"in t["~standard"]&&t["~standard"].version===1&&"validate"in t["~standard"]&&typeof t["~standard"].validate=="function"}function $l(t,e=[]){const n={...t};if(n.type==="object"&&n.properties){const r={...n.properties},s=Object.keys(r);for(const a of s){const l=r[a],u=!e.includes(a);l.type==="object"&&l.properties?r[a]=$l(l,l.required||[]):l.type==="array"&&l.items?r[a]={...l,items:$l(l.items,l.items.required||[])}:u&&(l.type&&!Array.isArray(l.type)?r[a]={...l,type:[l.type,"null"]}:Array.isArray(l.type)&&!l.type.includes("null")&&(r[a]={...l,type:[...l.type,"null"]}))}n.properties=r,n.required=s,n.additionalProperties=!1}return n.type==="array"&&n.items&&(n.items=$l(n.items,n.items.required||[])),n}function Kg(t,e={}){if(!t)return;const{forStructuredOutput:n=!1}=e;if(u9(t)){let s=t["~standard"].jsonSchema.input({target:"draft-07"});if(typeof s=="object"&&"$schema"in s){const{$schema:a,...l}=s;s=l}return typeof s=="object"&&("properties"in s&&!s.type&&(s.type="object"),s.type==="object"&&!("properties"in s)&&(s.properties={}),s.type==="object"&&!("required"in s)&&(s.required=[]),n&&(s=$l(s,s.required||[]))),s}return n&&typeof t=="object"?$l(t,t.required||[]):t}function eo(t,e){if(!$i(t))return e;const n=t["~standard"].validate(e);if(n instanceof Promise)throw new Error("Schema validation returned a Promise. Use validateWithStandardSchema for async validation.");if(!n.issues)return n.value;const r=n.issues.map(s=>s.message||"Validation failed").join(", ");throw new Error(`Validation failed: ${r}`)}class f9{constructor(e){this.toolCallsMap=new Map,this.tools=e}addToolCallChunk(e){const n=e.index,r=this.toolCallsMap.get(n);r?(e.toolCall.function.name&&!r.function.name&&(r.function.name=e.toolCall.function.name),e.toolCall.function.arguments&&(r.function.arguments+=e.toolCall.function.arguments)):e.toolCall.id&&e.toolCall.function.name&&this.toolCallsMap.set(n,{id:e.toolCall.id,type:"function",function:{name:e.toolCall.function.name,arguments:e.toolCall.function.arguments||""}})}hasToolCalls(){return this.getToolCalls().length>0}getToolCalls(){return Array.from(this.toolCallsMap.values()).filter(e=>e.id&&e.function.name&&e.function.name.trim().length>0)}async*executeTools(e){const n=this.getToolCalls(),r=[];for(const s of n){const a=this.tools.find(u=>u.name===s.function.name);let l;if(a?.execute)try{let u;try{u=JSON.parse(s.function.arguments)}catch{throw new Error(`Failed to parse tool arguments as JSON: ${s.function.arguments}`)}if(a.inputSchema&&$i(a.inputSchema))try{u=eo(a.inputSchema,u)}catch(d){const m=d instanceof Error?d.message:"Validation failed";throw new Error(`Input validation failed for tool ${a.name}: ${m}`)}let f=await a.execute(u);if(a.outputSchema&&$i(a.outputSchema)&&f!==void 0&&f!==null)try{f=eo(a.outputSchema,f)}catch(d){const m=d instanceof Error?d.message:"Validation failed";throw new Error(`Output validation failed for tool ${a.name}: ${m}`)}l=typeof f=="string"?f:JSON.stringify(f)}catch(u){l=`Error executing tool: ${u instanceof Error?u.message:"Unknown error"}`}else l=`Tool ${s.function.name} does not have an execute function`;yield{type:"tool_result",id:e.id,model:e.model,timestamp:Date.now(),toolCallId:s.id,content:l},r.push({role:"tool",content:l,toolCallId:s.id})}return r}clear(){this.toolCallsMap.clear()}}async function sS(t,e,n=new Map,r=new Map){const s=[],a=[],l=[],u=new Map;for(const f of e)u.set(f.name,f);for(const f of t){const d=u.get(f.function.name),m=f.function.name;if(!d){s.push({toolCallId:f.id,toolName:m,result:{error:`Unknown tool: ${m}`},state:"output-error"});continue}let p={};const y=f.function.arguments.trim()||"{}";try{p=JSON.parse(y)}catch{throw new Error(`Failed to parse tool arguments as JSON: ${y}`)}if(d.inputSchema&&$i(d.inputSchema))try{p=eo(d.inputSchema,p)}catch(v){const w=v instanceof Error?v.message:"Validation failed";s.push({toolCallId:f.id,toolName:m,result:{error:`Input validation failed for tool ${d.name}: ${w}`},state:"output-error"});continue}if(!d.execute){if(d.needsApproval){const v=`approval_${f.id}`;n.has(v)?n.get(v)?r.has(f.id)?s.push({toolCallId:f.id,toolName:m,result:r.get(f.id)}):l.push({toolCallId:f.id,toolName:m,input:p}):s.push({toolCallId:f.id,toolName:m,result:{error:"User declined tool execution"},state:"output-error"}):a.push({toolCallId:f.id,toolName:f.function.name,input:p,approvalId:v})}else r.has(f.id)?s.push({toolCallId:f.id,toolName:m,result:r.get(f.id)}):l.push({toolCallId:f.id,toolName:m,input:p});continue}if(d.needsApproval){const v=`approval_${f.id}`;if(n.has(v))if(n.get(v)){const E=Date.now();try{let S=await d.execute(p);const C=Date.now()-E;d.outputSchema&&$i(d.outputSchema)&&S!==void 0&&S!==null&&(S=eo(d.outputSchema,S)),s.push({toolCallId:f.id,toolName:m,result:typeof S=="string"?JSON.parse(S):S||null,duration:C})}catch(S){const C=Date.now()-E,T=S instanceof Error?S.message:"Unknown error";s.push({toolCallId:f.id,toolName:m,result:{error:T},state:"output-error",duration:C})}}else s.push({toolCallId:f.id,toolName:m,result:{error:"User declined tool execution"},state:"output-error"});else a.push({toolCallId:f.id,toolName:m,input:p,approvalId:v});continue}const g=Date.now();try{let v=await d.execute(p);const w=Date.now()-g;d.outputSchema&&$i(d.outputSchema)&&v!==void 0&&v!==null&&(v=eo(d.outputSchema,v)),s.push({toolCallId:f.id,toolName:m,result:typeof v=="string"?JSON.parse(v):v||null,duration:w})}catch(v){const w=Date.now()-g,E=v instanceof Error?v.message:"Unknown error";s.push({toolCallId:f.id,toolName:m,result:{error:E},state:"output-error",duration:w})}}return{results:s,needsApproval:a,needsClientExecution:l}}function zC(t){return({iterationCount:e})=>e<t}class PC{constructor(e){this.iterationCount=0,this.lastFinishReason=null,this.streamStartTime=0,this.totalChunkCount=0,this.currentMessageId=null,this.accumulatedContent="",this.doneChunk=null,this.shouldEmitStreamEnd=!0,this.earlyTermination=!1,this.toolPhase="continue",this.cyclePhase="processText",this.adapter=e.adapter,this.params=e.params,this.systemPrompts=e.params.systemPrompts||[],this.tools=e.params.tools||[],this.loopStrategy=e.params.agentLoopStrategy||zC(5),this.toolCallManager=new f9(this.tools),this.initialMessageCount=e.params.messages.length,this.messages=e.params.messages,this.requestId=this.createId("chat"),this.streamId=this.createId("stream"),this.effectiveRequest=e.params.abortController?{signal:e.params.abortController.signal}:void 0,this.effectiveSignal=e.params.abortController?.signal}getAccumulatedContent(){return this.accumulatedContent}getMessages(){return this.messages}async*run(){this.beforeRun();try{if((yield*this.checkForPendingToolCalls())==="wait")return;do{if(this.earlyTermination||this.isAborted())return;this.beginCycle(),this.cyclePhase==="processText"?yield*this.streamModelResponse():yield*this.processToolCalls(),this.endCycle()}while(this.shouldContinue())}finally{this.afterRun()}}beforeRun(){this.streamStartTime=Date.now();const{model:e,tools:n,temperature:r,topP:s,maxTokens:a,metadata:l,modelOptions:u,conversationId:f}=this.params,d={};r!==void 0&&(d.temperature=r),s!==void 0&&(d.topP=s),a!==void 0&&(d.maxTokens=a),l!==void 0&&(d.metadata=l),Ft.emit("text:started",{requestId:this.requestId,streamId:this.streamId,model:e,provider:this.adapter.name,messageCount:this.initialMessageCount,hasTools:!!n&&n.length>0,streaming:!0,timestamp:Date.now(),clientId:f,toolNames:n?.map(m=>m.name),options:Object.keys(d).length>0?d:void 0,modelOptions:u}),Ft.emit("stream:started",{streamId:this.streamId,model:e,provider:this.adapter.name,timestamp:Date.now()})}afterRun(){if(!this.shouldEmitStreamEnd)return;const e=Date.now();Ft.emit("text:completed",{requestId:this.requestId,streamId:this.streamId,model:this.params.model,content:this.accumulatedContent,messageId:this.currentMessageId||void 0,finishReason:this.lastFinishReason||void 0,usage:this.doneChunk?.usage,timestamp:e}),Ft.emit("stream:ended",{requestId:this.requestId,streamId:this.streamId,totalChunks:this.totalChunkCount,duration:e-this.streamStartTime,timestamp:e})}beginCycle(){this.cyclePhase==="processText"&&this.beginIteration()}endCycle(){if(this.cyclePhase==="processText"){this.cyclePhase="executeToolCalls";return}this.cyclePhase="processText",this.iterationCount++}beginIteration(){this.currentMessageId=this.createId("msg"),this.accumulatedContent="",this.doneChunk=null}async*streamModelResponse(){const{temperature:e,topP:n,maxTokens:r,metadata:s,modelOptions:a}=this.params,u=this.params.tools?.map(f=>({...f,inputSchema:f.inputSchema?Kg(f.inputSchema):void 0,outputSchema:f.outputSchema?Kg(f.outputSchema):void 0}));for await(const f of this.adapter.chatStream({model:this.params.model,messages:this.messages,tools:u,temperature:e,topP:n,maxTokens:r,metadata:s,request:this.effectiveRequest,modelOptions:a,systemPrompts:this.systemPrompts}))if(this.isAborted()||(this.totalChunkCount++,yield f,this.handleStreamChunk(f),this.earlyTermination))break}handleStreamChunk(e){switch(e.type){case"content":this.handleContentChunk(e);break;case"tool_call":this.handleToolCallChunk(e);break;case"tool_result":this.handleToolResultChunk(e);break;case"done":this.handleDoneChunk(e);break;case"error":this.handleErrorChunk(e);break;case"thinking":this.handleThinkingChunk(e);break}}handleContentChunk(e){this.accumulatedContent=e.content,Ft.emit("stream:chunk:content",{streamId:this.streamId,messageId:this.currentMessageId||void 0,content:e.content,delta:e.delta,timestamp:Date.now()})}handleToolCallChunk(e){this.toolCallManager.addToolCallChunk(e),Ft.emit("stream:chunk:tool-call",{streamId:this.streamId,messageId:this.currentMessageId||void 0,toolCallId:e.toolCall.id,toolName:e.toolCall.function.name,index:e.index,arguments:e.toolCall.function.arguments,timestamp:Date.now()})}handleToolResultChunk(e){Ft.emit("stream:chunk:tool-result",{streamId:this.streamId,messageId:this.currentMessageId||void 0,toolCallId:e.toolCallId,result:e.content,timestamp:Date.now()})}handleDoneChunk(e){if(this.doneChunk?.finishReason==="tool_calls"&&e.finishReason==="stop"){this.lastFinishReason=e.finishReason,Ft.emit("stream:chunk:done",{streamId:this.streamId,messageId:this.currentMessageId||void 0,finishReason:e.finishReason,usage:e.usage,timestamp:Date.now()}),e.usage&&Ft.emit("usage:tokens",{requestId:this.requestId,streamId:this.streamId,messageId:this.currentMessageId||void 0,model:this.params.model,usage:e.usage,timestamp:Date.now()});return}this.doneChunk=e,this.lastFinishReason=e.finishReason,Ft.emit("stream:chunk:done",{streamId:this.streamId,messageId:this.currentMessageId||void 0,finishReason:e.finishReason,usage:e.usage,timestamp:Date.now()}),e.usage&&Ft.emit("usage:tokens",{requestId:this.requestId,streamId:this.streamId,messageId:this.currentMessageId||void 0,model:this.params.model,usage:e.usage,timestamp:Date.now()})}handleErrorChunk(e){Ft.emit("stream:chunk:error",{streamId:this.streamId,messageId:this.currentMessageId||void 0,error:e.error.message,timestamp:Date.now()}),this.earlyTermination=!0,this.shouldEmitStreamEnd=!1}handleThinkingChunk(e){Ft.emit("stream:chunk:thinking",{streamId:this.streamId,messageId:this.currentMessageId||void 0,content:e.content,delta:e.delta,timestamp:Date.now()})}async*checkForPendingToolCalls(){const e=this.getPendingToolCallsFromMessages();if(e.length===0)return"continue";const n=this.createSyntheticDoneChunk();Ft.emit("text:iteration",{requestId:this.requestId,streamId:this.streamId,iterationNumber:this.iterationCount+1,messageCount:this.messages.length,toolCallCount:e.length,timestamp:Date.now()});const{approvals:r,clientToolResults:s}=this.collectClientState(),a=await sS(e,this.tools,r,s);if(a.needsApproval.length>0||a.needsClientExecution.length>0){for(const u of this.emitApprovalRequests(a.needsApproval,n))yield u;for(const u of this.emitClientToolInputs(a.needsClientExecution,n))yield u;return this.shouldEmitStreamEnd=!1,"wait"}const l=this.emitToolResults(a.results,n);for(const u of l)yield u;return"continue"}async*processToolCalls(){if(!this.shouldExecuteToolPhase()){this.setToolPhase("stop");return}const e=this.toolCallManager.getToolCalls(),n=this.doneChunk;if(!n||e.length===0){this.setToolPhase("stop");return}Ft.emit("text:iteration",{requestId:this.requestId,streamId:this.streamId,iterationNumber:this.iterationCount+1,messageCount:this.messages.length,toolCallCount:e.length,timestamp:Date.now()}),this.addAssistantToolCallMessage(e);const{approvals:r,clientToolResults:s}=this.collectClientState(),a=await sS(e,this.tools,r,s);if(a.needsApproval.length>0||a.needsClientExecution.length>0){for(const u of this.emitApprovalRequests(a.needsApproval,n))yield u;for(const u of this.emitClientToolInputs(a.needsClientExecution,n))yield u;this.setToolPhase("wait");return}const l=this.emitToolResults(a.results,n);for(const u of l)yield u;this.toolCallManager.clear(),this.setToolPhase("continue")}shouldExecuteToolPhase(){return this.doneChunk?.finishReason==="tool_calls"&&this.tools.length>0&&this.toolCallManager.hasToolCalls()}addAssistantToolCallMessage(e){this.messages=[...this.messages,{role:"assistant",content:this.accumulatedContent||null,toolCalls:e}]}collectClientState(){const e=new Map,n=new Map;for(const r of this.messages)if(r.role==="assistant"&&r.parts){const s=r.parts;for(const a of s)a.type==="tool-call"&&a.state==="approval-responded"&&a.approval&&e.set(a.approval.id,a.approval.approved),a.type==="tool-call"&&a.output!==void 0&&!a.approval&&n.set(a.id,a.output)}return{approvals:e,clientToolResults:n}}emitApprovalRequests(e,n){const r=[];for(const s of e)Ft.emit("stream:approval-requested",{streamId:this.streamId,messageId:this.currentMessageId||void 0,toolCallId:s.toolCallId,toolName:s.toolName,input:s.input,approvalId:s.approvalId,timestamp:Date.now()}),r.push({type:"approval-requested",id:n.id,model:n.model,timestamp:Date.now(),toolCallId:s.toolCallId,toolName:s.toolName,input:s.input,approval:{id:s.approvalId,needsApproval:!0}});return r}emitClientToolInputs(e,n){const r=[];for(const s of e)Ft.emit("stream:tool-input-available",{streamId:this.streamId,messageId:this.currentMessageId||void 0,toolCallId:s.toolCallId,toolName:s.toolName,input:s.input,timestamp:Date.now()}),r.push({type:"tool-input-available",id:n.id,model:n.model,timestamp:Date.now(),toolCallId:s.toolCallId,toolName:s.toolName,input:s.input});return r}emitToolResults(e,n){const r=[];for(const s of e){Ft.emit("tool:call-completed",{requestId:this.requestId,streamId:this.streamId,messageId:this.currentMessageId||void 0,toolCallId:s.toolCallId,toolName:s.toolName,result:s.result,duration:s.duration??0,timestamp:Date.now()});const a=JSON.stringify(s.result),l={type:"tool_result",id:n.id,model:n.model,timestamp:Date.now(),toolCallId:s.toolCallId,content:a};r.push(l),this.messages=[...this.messages,{role:"tool",content:a,toolCallId:s.toolCallId}]}return r}getPendingToolCallsFromMessages(){const e=new Set(this.messages.filter(r=>r.role==="tool"&&r.toolCallId).map(r=>r.toolCallId)),n=[];for(const r of this.messages)if(r.role==="assistant"&&r.toolCalls)for(const s of r.toolCalls)e.has(s.id)||n.push(s);return n}createSyntheticDoneChunk(){return{type:"done",id:this.createId("pending"),model:this.params.model,timestamp:Date.now(),finishReason:"tool_calls"}}shouldContinue(){return this.cyclePhase==="executeToolCalls"?!0:this.loopStrategy({iterationCount:this.iterationCount,messages:this.messages,finishReason:this.lastFinishReason})&&this.toolPhase==="continue"}isAborted(){return!!this.effectiveSignal?.aborted}setToolPhase(e){this.toolPhase=e,e==="wait"&&(this.shouldEmitStreamEnd=!1)}createId(e){return`${e}-${Date.now()}-${Math.random().toString(36).slice(2,9)}`}}function d9(t){const{outputSchema:e,stream:n}=t;return e?p9(t):n===!1?h9(t):BC(t)}async function*BC(t){const{adapter:e,...n}=t,r=e.model,s=new PC({adapter:e,params:{...n,model:r}});for await(const a of s.run())yield a}function h9(t){const e=BC(t);return c9(e)}async function p9(t){const{adapter:e,outputSchema:n,...r}=t,s=e.model;if(!n)throw new Error("outputSchema is required for structured output");const a=new PC({adapter:e,params:{...r,model:s}});for await(const y of a.run());const l=a.getMessages(),{tools:u,agentLoopStrategy:f,...d}=r,m=Kg(n);if(!m)throw new Error("Failed to convert output schema to JSON Schema");const p=await e.structuredOutput({chatOptions:{...d,model:s,messages:l},outputSchema:m});return $i(n)?eo(n,p.data):p.data}function Ur(t){return{__toolSide:"definition",...t,server(n){return{__toolSide:"server",...t,execute:n}},client(n){return{__toolSide:"client",...t,execute:n}}}}function iS(t){return t===null?"":typeof t=="string"?t:t.filter(e=>e.type==="text").map(e=>e.content).join("")}function m9(t){const e=[];for(const n of t)"parts"in n?e.push(...UC(n)):e.push(n);return e}function UC(t){const e=[];if(t.role==="system")return e;const n=[],r=[],s=[];for(const u of t.parts)u.type==="text"?n.push(u):u.type==="tool-call"?r.push(u):u.type==="tool-result"&&s.push(u);const a=n.map(u=>u.content).join("")||null,l=r.length>0?r.filter(u=>u.state==="input-complete"||u.state==="approval-responded"||u.output!==void 0).map(u=>({id:u.id,type:"function",function:{name:u.name,arguments:u.arguments}})):void 0;t.role!=="assistant"||a||!l?e.push({role:t.role,content:a,...l&&l.length>0&&{toolCalls:l}}):l.length>0&&e.push({role:"assistant",content:a,toolCalls:l});for(const u of s)(u.state==="complete"||u.state==="error")&&e.push({role:"tool",content:u.content,toolCallId:u.toolCallId});return e}function g9(t,e){const n=[],r=iS(t.content);if(r&&n.push({type:"text",content:r}),t.toolCalls&&t.toolCalls.length>0)for(const s of t.toolCalls)n.push({type:"tool-call",id:s.id,name:s.function.name,arguments:s.function.arguments,state:"input-complete"});return t.role==="tool"&&t.toolCallId&&n.push({type:"tool-result",toolCallId:t.toolCallId,content:iS(t.content),state:"complete"}),{id:e||Kf(),role:t.role==="tool"?"assistant":t.role,parts:n}}function y9(t,e){return"parts"in t?{...t,id:t.id||e(),createdAt:t.createdAt||new Date}:{...g9(t,e()),createdAt:new Date}}function Kf(){return`msg-${Date.now()}-${Math.random().toString(36).substring(7)}`}var Mi={},$m={},aS;function oS(){return aS||(aS=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Allow=t.ALL=t.COLLECTION=t.ATOM=t.SPECIAL=t.INF=t._INFINITY=t.INFINITY=t.NAN=t.BOOL=t.NULL=t.OBJ=t.ARR=t.NUM=t.STR=void 0,t.STR=1,t.NUM=2,t.ARR=4,t.OBJ=8,t.NULL=16,t.BOOL=32,t.NAN=64,t.INFINITY=128,t._INFINITY=256,t.INF=t.INFINITY|t._INFINITY,t.SPECIAL=t.NULL|t.BOOL|t.INF|t.NAN,t.ATOM=t.STR|t.NUM|t.SPECIAL,t.COLLECTION=t.ARR|t.OBJ,t.ALL=t.ATOM|t.COLLECTION,t.Allow={STR:t.STR,NUM:t.NUM,ARR:t.ARR,OBJ:t.OBJ,NULL:t.NULL,BOOL:t.BOOL,NAN:t.NAN,INFINITY:t.INFINITY,_INFINITY:t._INFINITY,INF:t.INF,SPECIAL:t.SPECIAL,ATOM:t.ATOM,COLLECTION:t.COLLECTION,ALL:t.ALL},t.default=t.Allow})($m)),$m}var lS;function b9(){return lS||(lS=1,(function(t){var e=Mi&&Mi.__createBinding||(Object.create?(function(d,m,p,y){y===void 0&&(y=p);var g=Object.getOwnPropertyDescriptor(m,p);(!g||("get"in g?!m.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return m[p]}}),Object.defineProperty(d,y,g)}):(function(d,m,p,y){y===void 0&&(y=p),d[y]=m[p]})),n=Mi&&Mi.__exportStar||function(d,m){for(var p in d)p!=="default"&&!Object.prototype.hasOwnProperty.call(m,p)&&e(m,d,p)};Object.defineProperty(t,"__esModule",{value:!0}),t.Allow=t.MalformedJSON=t.PartialJSON=t.parseJSON=t.parse=void 0;const r=oS();Object.defineProperty(t,"Allow",{enumerable:!0,get:function(){return r.Allow}}),n(oS(),t);class s extends Error{}t.PartialJSON=s;class a extends Error{}t.MalformedJSON=a;function l(d,m=r.Allow.ALL){if(typeof d!="string")throw new TypeError(`expecting str, got ${typeof d}`);if(!d.trim())throw new Error(`${d} is empty`);return u(d.trim(),m)}t.parseJSON=l;const u=(d,m)=>{const p=d.length;let y=0;const g=I=>{throw new s(`${I} at position ${y}`)},v=I=>{throw new a(`${I} at position ${y}`)},w=()=>(M(),y>=p&&g("Unexpected end of input"),d[y]==='"'?E():d[y]==="{"?S():d[y]==="["?C():d.substring(y,y+4)==="null"||r.Allow.NULL&m&&p-y<4&&"null".startsWith(d.substring(y))?(y+=4,null):d.substring(y,y+4)==="true"||r.Allow.BOOL&m&&p-y<4&&"true".startsWith(d.substring(y))?(y+=4,!0):d.substring(y,y+5)==="false"||r.Allow.BOOL&m&&p-y<5&&"false".startsWith(d.substring(y))?(y+=5,!1):d.substring(y,y+8)==="Infinity"||r.Allow.INFINITY&m&&p-y<8&&"Infinity".startsWith(d.substring(y))?(y+=8,1/0):d.substring(y,y+9)==="-Infinity"||r.Allow._INFINITY&m&&1<p-y&&p-y<9&&"-Infinity".startsWith(d.substring(y))?(y+=9,-1/0):d.substring(y,y+3)==="NaN"||r.Allow.NAN&m&&p-y<3&&"NaN".startsWith(d.substring(y))?(y+=3,NaN):T()),E=()=>{const I=y;let R=!1;for(y++;y<p&&(d[y]!=='"'||R&&d[y-1]==="\\");)R=d[y]==="\\"?!R:!1,y++;if(d.charAt(y)=='"')try{return JSON.parse(d.substring(I,++y-Number(R)))}catch(U){v(String(U))}else if(r.Allow.STR&m)try{return JSON.parse(d.substring(I,y-Number(R))+'"')}catch{return JSON.parse(d.substring(I,d.lastIndexOf("\\"))+'"')}g("Unterminated string literal")},S=()=>{y++,M();const I={};try{for(;d[y]!=="}";){if(M(),y>=p&&r.Allow.OBJ&m)return I;const R=E();M(),y++;try{const U=w();I[R]=U}catch(U){if(r.Allow.OBJ&m)return I;throw U}M(),d[y]===","&&y++}}catch{if(r.Allow.OBJ&m)return I;g("Expected '}' at end of object")}return y++,I},C=()=>{y++;const I=[];try{for(;d[y]!=="]";)I.push(w()),M(),d[y]===","&&y++}catch{if(r.Allow.ARR&m)return I;g("Expected ']' at end of array")}return y++,I},T=()=>{if(y===0){d==="-"&&v("Not sure what '-' is");try{return JSON.parse(d)}catch(R){if(r.Allow.NUM&m)try{return JSON.parse(d.substring(0,d.lastIndexOf("e")))}catch{}v(String(R))}}const I=y;for(d[y]==="-"&&y++;d[y]&&",]}".indexOf(d[y])===-1;)y++;y==p&&!(r.Allow.NUM&m)&&g("Unterminated number literal");try{return JSON.parse(d.substring(I,y))}catch{d.substring(I,y)==="-"&&g("Not sure what '-' is");try{return JSON.parse(d.substring(I,d.lastIndexOf("e")))}catch(U){v(String(U))}}},M=()=>{for(;y<p&&` 
\r	`.includes(d[y]);)y++};return w()},f=l;t.parse=f})(Mi)),Mi}var _9=b9();class v9{parse(e){if(!(!e||e.trim()===""))try{return _9.parse(e)}catch{return}}}const x9=new v9;function w9(t,e,n){return t.map(r=>{if(r.id!==e)return r;const s=[...r.parts],a=s.length>0?s[s.length-1]:null;return a&&a.type==="text"?s[s.length-1]={type:"text",content:n}:s.push({type:"text",content:n}),{...r,parts:s}})}function qm(t,e,n){return t.map(r=>{if(r.id!==e)return r;const s=[...r.parts],a=s.findIndex(u=>u.type==="tool-call"&&u.id===n.id),l={type:"tool-call",id:n.id,name:n.name,arguments:n.arguments,state:n.state};return a>=0?s[a]=l:s.push(l),{...r,parts:s}})}function cS(t,e,n,r,s,a){return t.map(l=>{if(l.id!==e)return l;const u=[...l.parts],f=u.findIndex(m=>m.type==="tool-result"&&m.toolCallId===n),d={type:"tool-result",toolCallId:n,content:r,state:s,...a&&{error:a}};return f>=0?u[f]=d:u.push(d),{...l,parts:u}})}function S9(t,e,n,r){return t.map(s=>{if(s.id!==e)return s;const a=[...s.parts],l=a.find(u=>u.type==="tool-call"&&u.id===n);return l&&(l.state="approval-requested",l.approval={id:r,needsApproval:!0}),{...s,parts:a}})}function k9(t,e,n,r,s){return t.map(a=>{const l=[...a.parts],u=l.find(f=>f.type==="tool-call"&&f.id===e);return u&&(u.output=s?{error:s}:n,r?u.state=r:u.state="input-complete"),{...a,parts:l}})}function E9(t,e,n){return t.map(r=>{const s=[...r.parts],a=s.find(l=>l.type==="tool-call"&&l.approval?.id===e);return a&&a.approval&&(a.approval.approved=n,a.state="approval-responded"),{...r,parts:s}})}function C9(t,e,n){return t.map(r=>{if(r.id!==e)return r;const s=[...r.parts],a=s.findIndex(u=>u.type==="thinking"),l={type:"thinking",content:n};return a>=0?s[a]=l:s.push(l),{...r,parts:s}})}class T9{shouldEmit(e,n){return!0}}class d0{constructor(e={}){this.messages=[],this.currentAssistantMessageId=null,this.totalTextContent="",this.currentSegmentText="",this.lastEmittedText="",this.thinkingContent="",this.toolCalls=new Map,this.toolCallOrder=[],this.finishReason=null,this.isDone=!1,this.hasToolCallsSinceTextStart=!1,this.recording=null,this.recordingStartTime=0,this.chunkStrategy=e.chunkStrategy||new T9,this.events=e.events||{},this.handlers=e.handlers||{},this.jsonParser=e.jsonParser||x9,this.recordingEnabled=e.recording??!1,e.initialMessages&&(this.messages=[...e.initialMessages])}setMessages(e){this.messages=[...e],this.emitMessagesChange()}addUserMessage(e){const n={id:Kf(),role:"user",parts:[{type:"text",content:e}],createdAt:new Date};return this.messages=[...this.messages,n],this.emitMessagesChange(),n}startAssistantMessage(){this.resetStreamState();const e={id:Kf(),role:"assistant",parts:[],createdAt:new Date};return this.currentAssistantMessageId=e.id,this.messages=[...this.messages,e],this.events.onStreamStart?.(),this.emitMessagesChange(),e.id}addToolResult(e,n,r){const s=this.messages.find(f=>f.parts.some(d=>d.type==="tool-call"&&d.id===e));if(!s){console.warn(`[StreamProcessor] Could not find message with tool call ${e}`);return}let a=k9(this.messages,e,n,r?"input-complete":void 0,r);const l=typeof n=="string"?n:JSON.stringify(n),u=r?"error":"complete";a=cS(a,s.id,e,l,u,r),this.messages=a,this.emitMessagesChange()}addToolApprovalResponse(e,n){this.messages=E9(this.messages,e,n),this.emitMessagesChange()}toModelMessages(){const e=[];for(const n of this.messages)e.push(...UC(n));return e}getMessages(){return this.messages}areAllToolsComplete(){const e=this.messages.findLast(r=>r.role==="assistant");if(!e)return!0;const n=e.parts.filter(r=>r.type==="tool-call");return n.length===0?!0:n.every(r=>r.state==="approval-responded"||r.output!==void 0&&!r.approval)}removeMessagesAfter(e){this.messages=this.messages.slice(0,e+1),this.emitMessagesChange()}clearMessages(){this.messages=[],this.currentAssistantMessageId=null,this.emitMessagesChange()}async process(e){this.resetStreamState(),this.recordingEnabled&&this.startRecording();for await(const n of e)this.processChunk(n);return this.finalizeStream(),this.recording&&(this.recording.result=this.getResult()),this.getResult()}processChunk(e){switch(this.recording&&this.recording.chunks.push({chunk:e,timestamp:Date.now(),index:this.recording.chunks.length}),e.type){case"content":this.handleContentChunk(e);break;case"tool_call":this.handleToolCallChunk(e);break;case"tool_result":this.handleToolResultChunk(e);break;case"done":this.handleDoneChunk(e);break;case"error":this.handleErrorChunk(e);break;case"thinking":this.handleThinkingChunk(e);break;case"approval-requested":this.handleApprovalRequestedChunk(e);break;case"tool-input-available":this.handleToolInputAvailableChunk(e);break}}handleContentChunk(e){this.completeAllToolCalls();const n=this.currentSegmentText;this.hasToolCallsSinceTextStart&&n.length>0&&this.isNewTextSegment(e,n)&&(n!==this.lastEmittedText&&this.emitTextUpdate(),this.currentSegmentText="",this.lastEmittedText="",this.hasToolCallsSinceTextStart=!1);const s=this.currentSegmentText;let a=s;e.delta!==""?a=s+e.delta:e.content!==""&&(e.content.startsWith(s)?a=e.content:s.startsWith(e.content)?a=s:a=s+e.content);const l=a.slice(s.length);this.currentSegmentText=a,this.totalTextContent+=l;const u=e.delta??e.content??"";this.chunkStrategy.shouldEmit(u,this.currentSegmentText)&&this.currentSegmentText!==this.lastEmittedText&&this.emitTextUpdate()}handleToolCallChunk(e){this.hasToolCallsSinceTextStart=!0;const n=e.toolCall.id,r=this.toolCalls.get(n);if(r){const s=r.state==="awaiting-input";r.arguments+=e.toolCall.function.arguments||"",s&&e.toolCall.function.arguments&&(r.state="input-streaming"),r.parsedArguments=this.jsonParser.parse(r.arguments);const a=this.toolCallOrder.indexOf(n);this.handlers.onToolCallStateChange?.(a,r.id,r.name,r.state,r.arguments,r.parsedArguments),e.toolCall.function.arguments&&this.handlers.onToolCallDelta?.(a,e.toolCall.function.arguments),this.currentAssistantMessageId&&(this.messages=qm(this.messages,this.currentAssistantMessageId,{id:r.id,name:r.name,arguments:r.arguments,state:r.state}),this.emitMessagesChange(),this.events.onToolCallStateChange?.(this.currentAssistantMessageId,r.id,r.state,r.arguments))}else{const s=e.toolCall.function.arguments?"input-streaming":"awaiting-input",a={id:e.toolCall.id,name:e.toolCall.function.name,arguments:e.toolCall.function.arguments||"",state:s,parsedArguments:void 0,index:e.index};e.toolCall.function.arguments&&(a.parsedArguments=this.jsonParser.parse(e.toolCall.function.arguments)),this.toolCalls.set(n,a),this.toolCallOrder.push(n);const l=this.toolCallOrder.indexOf(n);this.handlers.onToolCallStart?.(l,e.toolCall.id,e.toolCall.function.name),this.handlers.onToolCallStateChange?.(l,e.toolCall.id,e.toolCall.function.name,s,e.toolCall.function.arguments||"",a.parsedArguments),e.toolCall.function.arguments&&this.handlers.onToolCallDelta?.(l,e.toolCall.function.arguments),this.currentAssistantMessageId&&(this.messages=qm(this.messages,this.currentAssistantMessageId,{id:e.toolCall.id,name:e.toolCall.function.name,arguments:e.toolCall.function.arguments||"",state:s}),this.emitMessagesChange(),this.events.onToolCallStateChange?.(this.currentAssistantMessageId,e.toolCall.id,s,e.toolCall.function.arguments||""))}}handleToolResultChunk(e){const n="complete";this.handlers.onToolResultStateChange?.(e.toolCallId,e.content,n),this.currentAssistantMessageId&&(this.messages=cS(this.messages,this.currentAssistantMessageId,e.toolCallId,e.content,n),this.emitMessagesChange())}handleDoneChunk(e){this.finishReason=e.finishReason,this.isDone=!0,this.completeAllToolCalls()}handleErrorChunk(e){this.handlers.onError?.(e.error),this.events.onError?.(new Error(e.error.message))}handleThinkingChunk(e){const n=this.thinkingContent;let r=n;e.delta!==""?r=n+e.delta:e.content!==""&&(e.content.startsWith(n)?r=e.content:n.startsWith(e.content)?r=n:r=n+e.content),this.thinkingContent=r,this.handlers.onThinkingUpdate?.(this.thinkingContent),this.currentAssistantMessageId&&(this.messages=C9(this.messages,this.currentAssistantMessageId,this.thinkingContent),this.emitMessagesChange(),this.events.onThinkingUpdate?.(this.currentAssistantMessageId,this.thinkingContent))}handleApprovalRequestedChunk(e){this.handlers.onApprovalRequested?.(e.toolCallId,e.toolName,e.input,e.approval.id),this.currentAssistantMessageId&&(this.messages=S9(this.messages,this.currentAssistantMessageId,e.toolCallId,e.approval.id),this.emitMessagesChange()),this.events.onApprovalRequest?.({toolCallId:e.toolCallId,toolName:e.toolName,input:e.input,approvalId:e.approval.id})}handleToolInputAvailableChunk(e){this.handlers.onToolInputAvailable?.(e.toolCallId,e.toolName,e.input),this.events.onToolCall?.({toolCallId:e.toolCallId,toolName:e.toolName,input:e.input})}isNewTextSegment(e,n){return e.delta!==void 0&&e.content!==void 0&&(e.content.length<n.length||!e.content.startsWith(n)&&!n.startsWith(e.content))}completeAllToolCalls(){this.toolCalls.forEach((e,n)=>{if(e.state!=="input-complete"){const r=this.toolCallOrder.indexOf(n);this.completeToolCall(r,e)}})}completeToolCall(e,n){n.state="input-complete",n.parsedArguments=this.jsonParser.parse(n.arguments),this.handlers.onToolCallStateChange?.(e,n.id,n.name,"input-complete",n.arguments,n.parsedArguments),this.handlers.onToolCallComplete?.(e,n.id,n.name,n.arguments),this.currentAssistantMessageId&&(this.messages=qm(this.messages,this.currentAssistantMessageId,{id:n.id,name:n.name,arguments:n.arguments,state:"input-complete"}),this.emitMessagesChange(),this.events.onToolCallStateChange?.(this.currentAssistantMessageId,n.id,"input-complete",n.arguments))}emitTextUpdate(){this.lastEmittedText=this.currentSegmentText,this.handlers.onTextUpdate?.(this.currentSegmentText),this.currentAssistantMessageId&&(this.messages=w9(this.messages,this.currentAssistantMessageId,this.currentSegmentText),this.emitMessagesChange(),this.events.onTextUpdate?.(this.currentAssistantMessageId,this.currentSegmentText))}emitMessagesChange(){this.events.onMessagesChange?.([...this.messages])}finalizeStream(){this.completeAllToolCalls(),this.currentSegmentText!==this.lastEmittedText&&this.emitTextUpdate();const e=this.getCompletedToolCalls();if(this.handlers.onStreamEnd?.(this.totalTextContent,e.length>0?e:void 0),this.currentAssistantMessageId){const n=this.messages.find(r=>r.id===this.currentAssistantMessageId);n&&this.events.onStreamEnd?.(n)}}getCompletedToolCalls(){return Array.from(this.toolCalls.values()).filter(e=>e.state==="input-complete").map(e=>({id:e.id,type:"function",function:{name:e.name,arguments:e.arguments}}))}getResult(){const e=this.getCompletedToolCalls();return{content:this.totalTextContent,thinking:this.thinkingContent||void 0,toolCalls:e.length>0?e:void 0,finishReason:this.finishReason}}getState(){return{content:this.totalTextContent,thinking:this.thinkingContent,toolCalls:new Map(this.toolCalls),toolCallOrder:[...this.toolCallOrder],finishReason:this.finishReason,done:this.isDone}}startRecording(){this.recordingEnabled=!0,this.recordingStartTime=Date.now(),this.recording={version:"1.0",timestamp:this.recordingStartTime,chunks:[]}}getRecording(){return this.recording}resetStreamState(){this.totalTextContent="",this.currentSegmentText="",this.lastEmittedText="",this.thinkingContent="",this.toolCalls.clear(),this.toolCallOrder=[],this.finishReason=null,this.isDone=!1,this.hasToolCallsSinceTextStart=!1,this.chunkStrategy.reset?.()}reset(){this.resetStreamState(),this.messages=[],this.currentAssistantMessageId=null}static async replay(e,n){return new d0(n).process(A9(e))}}function A9(t){return{async*[Symbol.asyncIterator](){for(const{chunk:e}of t.chunks)yield e}}}class R9{constructor(e){this.clientId=e}clientCreated(e){this.emitEvent("client:created",{initialMessageCount:e})}loadingChanged(e){this.emitEvent("client:loading-changed",{isLoading:e})}errorChanged(e){this.emitEvent("client:error-changed",{error:e})}textUpdated(e,n,r){this.emitEvent("processor:text-updated",{streamId:e,content:r}),this.emitEvent("client:assistant-message-updated",{messageId:n,content:r})}toolCallStateChanged(e,n,r,s,a,l){this.emitEvent("processor:tool-call-state-changed",{streamId:e,toolCallId:r,toolName:s,state:a,arguments:l}),this.emitEvent("client:tool-call-updated",{messageId:n,toolCallId:r,toolName:s,state:a,arguments:l})}toolResultStateChanged(e,n,r,s,a){this.emitEvent("processor:tool-result-state-changed",{streamId:e,toolCallId:n,content:r,state:s,error:a})}thinkingUpdated(e,n,r,s){this.emitEvent("stream:chunk:thinking",{streamId:e,messageId:n,content:r,delta:s})}approvalRequested(e,n,r,s,a){this.emitEvent("client:approval-requested",{messageId:e,toolCallId:n,toolName:r,input:s,approvalId:a})}messageAppended(e){const n=e.parts.filter(r=>r.type==="text").map(r=>r.content).join(" ").substring(0,100);this.emitEvent("client:message-appended",{messageId:e.id,role:e.role,contentPreview:n})}messageSent(e,n){this.emitEvent("client:message-sent",{messageId:e,content:n})}reloaded(e){this.emitEvent("client:reloaded",{fromMessageIndex:e})}stopped(){this.emitEvent("client:stopped")}messagesCleared(){this.emitEvent("client:messages-cleared")}toolResultAdded(e,n,r,s){this.emitEvent("tool:result-added",{toolCallId:e,toolName:n,output:r,state:s})}toolApprovalResponded(e,n,r){this.emitEvent("tool:approval-responded",{approvalId:e,toolCallId:n,approved:r})}}class O9 extends R9{emitEvent(e,n){e.startsWith("client:")||e.startsWith("tool:")?Ft.emit(e,{...n,clientId:this.clientId,timestamp:Date.now()}):Ft.emit(e,{...n,timestamp:Date.now()})}}class N9{constructor(e){if(this.body={},this.isLoading=!1,this.error=void 0,this.abortController=null,this.currentStreamId=null,this.currentMessageId=null,this.postStreamActions=[],this.uniqueId=e.id||this.generateUniqueId("chat"),this.body=e.body||{},this.connection=e.connection,this.events=new O9(this.uniqueId),this.clientToolsRef={current:new Map},e.tools)for(const n of e.tools)this.clientToolsRef.current.set(n.name,n);this.callbacksRef={current:{onResponse:e.onResponse||(()=>{}),onChunk:e.onChunk||(()=>{}),onFinish:e.onFinish||(()=>{}),onError:e.onError||(()=>{}),onMessagesChange:e.onMessagesChange||(()=>{}),onLoadingChange:e.onLoadingChange||(()=>{}),onErrorChange:e.onErrorChange||(()=>{})}},this.processor=new d0({chunkStrategy:e.streamProcessor?.chunkStrategy,initialMessages:e.initialMessages,events:{onMessagesChange:n=>{this.callbacksRef.current.onMessagesChange(n)},onStreamStart:()=>{},onStreamEnd:n=>{this.callbacksRef.current.onFinish(n)},onError:n=>{this.setError(n),this.callbacksRef.current.onError(n)},onTextUpdate:(n,r)=>{this.currentStreamId&&this.events.textUpdated(this.currentStreamId,n,r)},onThinkingUpdate:(n,r)=>{this.currentStreamId&&this.events.thinkingUpdated(this.currentStreamId,n,r)},onToolCallStateChange:(n,r,s,a)=>{const d=this.processor.getMessages().find(m=>m.id===n)?.parts.find(m=>m.type==="tool-call"&&m.id===r)?.name||"unknown";this.currentStreamId&&this.events.toolCallStateChanged(this.currentStreamId,n,r,d,s,a)},onToolCall:async n=>{const r=this.clientToolsRef.current.get(n.toolName);if(r?.execute)try{const s=await r.execute(n.input);await this.addToolResult({toolCallId:n.toolCallId,tool:n.toolName,output:s,state:"output-available"})}catch(s){await this.addToolResult({toolCallId:n.toolCallId,tool:n.toolName,output:null,state:"output-error",errorText:s.message})}},onApprovalRequest:n=>{this.events.approvalRequested(this.currentMessageId||"",n.toolCallId,n.toolName,n.input,n.approvalId)}}}),this.events.clientCreated(this.processor.getMessages().length)}generateUniqueId(e){return`${e}-${Date.now()}-${Math.random().toString(36).substring(7)}`}setIsLoading(e){this.isLoading=e,this.callbacksRef.current.onLoadingChange(e),this.events.loadingChanged(e)}setError(e){this.error=e,this.callbacksRef.current.onErrorChange(e),this.events.errorChanged(e?.message||null)}async processStream(e){this.currentStreamId=this.generateUniqueId("stream");const n=this.processor.startAssistantMessage();this.currentMessageId=n;const r={id:n,role:"assistant",parts:[],createdAt:new Date};this.events.messageAppended(r);for await(const l of e)this.callbacksRef.current.onChunk(l),this.processor.processChunk(l),await new Promise(u=>setTimeout(u,0));return this.processor.finalizeStream(),this.currentStreamId=null,this.currentMessageId=null,this.processor.getMessages().find(l=>l.id===n)||{id:n,role:"assistant",parts:[],createdAt:new Date}}async sendMessage(e){if(!e.trim()||this.isLoading)return;const n=this.processor.addUserMessage(e.trim());this.events.messageSent(n.id,e.trim()),await this.streamResponse()}async append(e){const n=y9(e,Kf);if(n.role==="system")return;const r=n;this.events.messageAppended(r);const s=this.processor.getMessages();this.processor.setMessages([...s,r]),await this.streamResponse()}async streamResponse(){this.setIsLoading(!0),this.setError(void 0),this.abortController=new AbortController;try{const e=this.processor.toModelMessages();await this.callbacksRef.current.onResponse();const n={...this.body,conversationId:this.uniqueId},r=this.connection.connect(e,n,this.abortController.signal);await this.processStream(r)}catch(e){if(e instanceof Error){if(e.name==="AbortError")return;this.setError(e),this.callbacksRef.current.onError(e)}}finally{this.abortController=null,this.setIsLoading(!1),await this.drainPostStreamActions()}}async reload(){const e=this.processor.getMessages();if(e.length===0)return;const n=e.findLastIndex(r=>r.role==="user");n!==-1&&(this.events.reloaded(n),this.processor.removeMessagesAfter(n),await this.streamResponse())}stop(){this.abortController&&(this.abortController.abort(),this.abortController=null),this.setIsLoading(!1),this.events.stopped()}clear(){this.processor.clearMessages(),this.setError(void 0),this.events.messagesCleared()}async addToolResult(e){if(this.events.toolResultAdded(e.toolCallId,e.tool,e.output,e.state||"output-available"),this.processor.addToolResult(e.toolCallId,e.output,e.errorText),this.isLoading){this.queuePostStreamAction(()=>this.checkForContinuation());return}await this.checkForContinuation()}async addToolApprovalResponse(e){const n=this.processor.getMessages();let r;for(const s of n){const a=s.parts.find(l=>l.type==="tool-call"&&l.approval?.id===e.id);if(a){r=a.id;break}}if(r&&this.events.toolApprovalResponded(e.id,r,e.approved),this.processor.addToolApprovalResponse(e.id,e.approved),this.isLoading){this.queuePostStreamAction(()=>this.checkForContinuation());return}await this.checkForContinuation()}queuePostStreamAction(e){this.postStreamActions.push(e)}async drainPostStreamActions(){for(;this.postStreamActions.length>0;)await this.postStreamActions.shift()()}async checkForContinuation(){this.shouldAutoSend()&&await this.streamResponse()}shouldAutoSend(){return this.processor.areAllToolsComplete()}getMessages(){return this.processor.getMessages()}getIsLoading(){return this.isLoading}getError(){return this.error}setMessagesManually(e){this.processor.setMessages(e)}updateOptions(e){if(e.connection!==void 0&&(this.connection=e.connection),e.body!==void 0&&(this.body=e.body),e.tools!==void 0){this.clientToolsRef.current=new Map;for(const n of e.tools)this.clientToolsRef.current.set(n.name,n)}e.onResponse!==void 0&&(this.callbacksRef.current.onResponse=e.onResponse),e.onChunk!==void 0&&(this.callbacksRef.current.onChunk=e.onChunk),e.onFinish!==void 0&&(this.callbacksRef.current.onFinish=e.onFinish),e.onError!==void 0&&(this.callbacksRef.current.onError=e.onError)}}function I9(...t){return t}function M9(t){return{async*connect(e,n){const r=m9(e);yield*t(r,n)}}}function D9(t){const e=Z.useId(),n=t.id||e,[r,s]=Z.useState(t.initialMessages||[]),[a,l]=Z.useState(!1),[u,f]=Z.useState(void 0),d=Z.useRef(t.initialMessages||[]),m=Z.useRef(!0);Z.useEffect(()=>{d.current=r},[r]);const p=Z.useRef(t);p.current=t;const y=Z.useMemo(()=>{const I=m.current?t.initialMessages||[]:d.current;return m.current=!1,new N9({connection:p.current.connection,id:n,initialMessages:I,body:p.current.body,onResponse:p.current.onResponse,onChunk:p.current.onChunk,onFinish:p.current.onFinish,onError:p.current.onError,tools:p.current.tools,streamProcessor:t.streamProcessor,onMessagesChange:R=>{s(R)},onLoadingChange:R=>{l(R)},onErrorChange:R=>{f(R)}})},[n]);Z.useEffect(()=>{t.initialMessages&&t.initialMessages.length>0&&r.length===0&&y.setMessagesManually(t.initialMessages)},[]),Z.useEffect(()=>()=>{y.stop()},[y]);const g=Z.useCallback(async I=>{await y.sendMessage(I)},[y]),v=Z.useCallback(async I=>{await y.append(I)},[y]),w=Z.useCallback(async()=>{await y.reload()},[y]),E=Z.useCallback(()=>{y.stop()},[y]),S=Z.useCallback(()=>{y.clear()},[y]),C=Z.useCallback(I=>{y.setMessagesManually(I)},[y]),T=Z.useCallback(async I=>{await y.addToolResult(I)},[y]),M=Z.useCallback(async I=>{await y.addToolApprovalResponse(I)},[y]);return{messages:r,sendMessage:g,append:v,reload:w,stop:E,isLoading:a,error:u,setMessages:C,clear:S,addToolResult:T,addToolApprovalResponse:M}}class j9{constructor(e={},n){this.kind="text",this.config=e,this.model=n}generateId(){return`${this.name}-${Date.now()}-${Math.random().toString(36).substring(7)}`}}const L9=t=>{if(t.conversation&&t.previous_response_id)throw new Error("Cannot use both 'conversation' and 'previous_response_id' in the same request.")},z9=t=>{P9(t),L9(t)},P9=t=>{const e=t.metadata;if(e&&Object.keys(e).length>16)throw new Error("Metadata cannot have more than 16 key-value pairs.");if(e&&Object.keys(e).some(a=>a.length>64))throw new Error("Metadata keys cannot be longer than 64 characters.");if(e&&Object.values(e).some(a=>a.length>512))throw new Error("Metadata values cannot be longer than 512 characters.")};function Zg(t){if(t!==null){if(Array.isArray(t))return t.map(e=>Zg(e));if(typeof t=="object"){const e={};for(const[n,r]of Object.entries(t)){const s=Zg(r);s!==void 0&&(e[n]=s)}return e}return t}}function ql(t,e=[]){const n={...t};if(n.type==="object"&&n.properties){const r={...n.properties},s=Object.keys(r);for(const a of s){const l=r[a],u=!e.includes(a);l.type==="object"&&l.properties?r[a]=ql(l,l.required||[]):l.type==="array"&&l.items?r[a]={...l,items:ql(l.items,l.items.required||[])}:u&&(l.type&&!Array.isArray(l.type)?r[a]={...l,type:[l.type,"null"]}:Array.isArray(l.type)&&!l.type.includes("null")&&(r[a]={...l,type:[...l.type,"null"]}))}n.properties=r,n.required=s,n.additionalProperties=!1}return n.type==="array"&&n.items&&(n.items=ql(n.items,n.items.required||[])),n}function B9(t){return{type:"apply_patch"}}function U9(t){return{type:"code_interpreter",container:t.metadata.container}}function $9(t){const e=t.metadata;return{type:"computer_use_preview",display_height:e.display_height,display_width:e.display_width,environment:e.environment}}function q9(t){const e=t.metadata;return{type:"custom",name:e.name,description:e.description,format:e.format}}function F9(t){const e=t.metadata;return{type:"file_search",vector_store_ids:e.vector_store_ids,max_num_results:e.max_num_results,ranking_options:e.ranking_options,filters:e.filters}}function V9(t){const e=t.inputSchema??{type:"object",properties:{},required:[]},n=ql(e,e.required||[]);return n.additionalProperties=!1,{type:"function",name:t.name,description:t.description,parameters:n,strict:!0}}function H9(t){return{type:"image_generation",...t.metadata}}function G9(t){return{type:"local_shell"}}function K9(t){if(!t.server_url&&!t.connector_id)throw new Error("Either server_url or connector_id must be provided.");if(t.connector_id&&t.server_url)throw new Error("Only one of server_url or connector_id can be provided.")}function Z9(t){const n={type:"mcp",...t.metadata};return K9(n),n}function Q9(t){return{type:"shell"}}function J9(t){const e=t.metadata;return{type:e.type,search_context_size:e.search_context_size,user_location:e.user_location}}function Y9(t){return t.metadata}function W9(t){return t.map(e=>{const n=new Set(["apply_patch","code_interpreter","computer_use_preview","file_search","image_generation","local_shell","mcp","shell","web_search_preview","web_search","custom"]),r=e.name;if(n.has(r))switch(r){case"apply_patch":return B9();case"code_interpreter":return U9(e);case"computer_use_preview":return $9(e);case"file_search":return F9(e);case"image_generation":return H9(e);case"local_shell":return G9();case"mcp":return Z9(e);case"shell":return Q9();case"web_search_preview":return J9(e);case"web_search":return Y9(e);case"custom":return q9(e)}return V9(e)})}function je(t,e,n,r,s){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n}function ee(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)}let $C=function(){const{crypto:t}=globalThis;if(t?.randomUUID)return $C=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,r=>(+r^n()&15>>+r/4).toString(16))};function Qg(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const Jg=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};class Oe extends Error{}class vn extends Oe{constructor(e,n,r,s){super(`${vn.makeMessage(e,n,r)}`),this.status=e,this.headers=s,this.requestID=s?.get("x-request-id"),this.error=n;const a=n;this.code=a?.code,this.param=a?.param,this.type=a?.type}static makeMessage(e,n,r){const s=n?.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return e&&s?`${e} ${s}`:e?`${e} status code (no body)`:s||"(no status code or body)"}static generate(e,n,r,s){if(!e||!s)return new Ed({message:r,cause:Jg(n)});const a=n?.error;return e===400?new qC(e,a,r,s):e===401?new FC(e,a,r,s):e===403?new VC(e,a,r,s):e===404?new HC(e,a,r,s):e===409?new GC(e,a,r,s):e===422?new KC(e,a,r,s):e===429?new ZC(e,a,r,s):e>=500?new QC(e,a,r,s):new vn(e,a,r,s)}}class Nr extends vn{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Ed extends vn{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class h0 extends Ed{constructor({message:e}={}){super({message:e??"Request timed out."})}}class qC extends vn{}class FC extends vn{}class VC extends vn{}class HC extends vn{}class GC extends vn{}class KC extends vn{}class ZC extends vn{}class QC extends vn{}class JC extends Oe{constructor(){super("Could not parse response content as the length limit was reached")}}class YC extends Oe{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}class Sl extends Error{constructor(e){super(e)}}const X9=/^[a-z][a-z0-9+.-]*:/i,e7=t=>X9.test(t);let Qn=t=>(Qn=Array.isArray,Qn(t)),uS=Qn;function WC(t){return typeof t!="object"?{}:t??{}}function t7(t){if(!t)return!0;for(const e in t)return!1;return!0}function n7(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Fm(t){return t!=null&&typeof t=="object"&&!Array.isArray(t)}const r7=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Oe(`${t} must be an integer`);if(e<0)throw new Oe(`${t} must be a positive integer`);return e},s7=t=>{try{return JSON.parse(t)}catch{return}},mc=t=>new Promise(e=>setTimeout(e,t)),qa="6.15.0",i7=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u";function a7(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const o7=()=>{const t=a7();if(t==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":qa,"X-Stainless-OS":dS(Deno.build.os),"X-Stainless-Arch":fS(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:Deno.version?.deno??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":qa,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(t==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":qa,"X-Stainless-OS":dS(globalThis.process.platform??"unknown"),"X-Stainless-Arch":fS(globalThis.process.arch??"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":globalThis.process.version??"unknown"};const e=l7();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":qa,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":qa,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function l7(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const r=n.exec(navigator.userAgent);if(r){const s=r[1]||0,a=r[2]||0,l=r[3]||0;return{browser:e,version:`${s}.${a}.${l}`}}}return null}const fS=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",dS=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let hS;const c7=()=>hS??(hS=o7());function u7(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new OpenAI({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function XC(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function eT(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return XC({start(){},async pull(n){const{done:r,value:s}=await e.next();r?n.close():n.enqueue(s)},async cancel(){await e.return?.()}})}function tT(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n?.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function f7(t){if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await t[Symbol.asyncIterator]().return?.();return}const e=t.getReader(),n=e.cancel();e.releaseLock(),await n}const d7=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)}),nT="RFC3986",rT=t=>String(t),pS={RFC1738:t=>String(t).replace(/%20/g,"+"),RFC3986:rT},h7="RFC1738";let Yg=(t,e)=>(Yg=Object.hasOwn??Function.prototype.call.bind(Object.prototype.hasOwnProperty),Yg(t,e));const Hr=(()=>{const t=[];for(let e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t})(),Vm=1024,p7=(t,e,n,r,s)=>{if(t.length===0)return t;let a=t;if(typeof t=="symbol"?a=Symbol.prototype.toString.call(t):typeof t!="string"&&(a=String(t)),n==="iso-8859-1")return escape(a).replace(/%u[0-9a-f]{4}/gi,function(u){return"%26%23"+parseInt(u.slice(2),16)+"%3B"});let l="";for(let u=0;u<a.length;u+=Vm){const f=a.length>=Vm?a.slice(u,u+Vm):a,d=[];for(let m=0;m<f.length;++m){let p=f.charCodeAt(m);if(p===45||p===46||p===95||p===126||p>=48&&p<=57||p>=65&&p<=90||p>=97&&p<=122||s===h7&&(p===40||p===41)){d[d.length]=f.charAt(m);continue}if(p<128){d[d.length]=Hr[p];continue}if(p<2048){d[d.length]=Hr[192|p>>6]+Hr[128|p&63];continue}if(p<55296||p>=57344){d[d.length]=Hr[224|p>>12]+Hr[128|p>>6&63]+Hr[128|p&63];continue}m+=1,p=65536+((p&1023)<<10|f.charCodeAt(m)&1023),d[d.length]=Hr[240|p>>18]+Hr[128|p>>12&63]+Hr[128|p>>6&63]+Hr[128|p&63]}l+=d.join("")}return l};function m7(t){return!t||typeof t!="object"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))}function mS(t,e){if(Qn(t)){const n=[];for(let r=0;r<t.length;r+=1)n.push(e(t[r]));return n}return e(t)}const sT={brackets(t){return String(t)+"[]"},comma:"comma",indices(t,e){return String(t)+"["+e+"]"},repeat(t){return String(t)}},iT=function(t,e){Array.prototype.push.apply(t,Qn(e)?e:[e])};let gS;const Qt={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:p7,encodeValuesOnly:!1,format:nT,formatter:rT,indices:!1,serializeDate(t){return(gS??(gS=Function.prototype.call.bind(Date.prototype.toISOString)))(t)},skipNulls:!1,strictNullHandling:!1};function g7(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="symbol"||typeof t=="bigint"}const Hm={};function aT(t,e,n,r,s,a,l,u,f,d,m,p,y,g,v,w,E,S){let C=t,T=S,M=0,I=!1;for(;(T=T.get(Hm))!==void 0&&!I;){const j=T.get(t);if(M+=1,typeof j<"u"){if(j===M)throw new RangeError("Cyclic object value");I=!0}typeof T.get(Hm)>"u"&&(M=0)}if(typeof d=="function"?C=d(e,C):C instanceof Date?C=y?.(C):n==="comma"&&Qn(C)&&(C=mS(C,function(j){return j instanceof Date?y?.(j):j})),C===null){if(a)return f&&!w?f(e,Qt.encoder,E,"key",g):e;C=""}if(g7(C)||m7(C)){if(f){const j=w?e:f(e,Qt.encoder,E,"key",g);return[v?.(j)+"="+v?.(f(C,Qt.encoder,E,"value",g))]}return[v?.(e)+"="+v?.(String(C))]}const R=[];if(typeof C>"u")return R;let U;if(n==="comma"&&Qn(C))w&&f&&(C=mS(C,f)),U=[{value:C.length>0?C.join(",")||null:void 0}];else if(Qn(d))U=d;else{const j=Object.keys(C);U=m?j.sort(m):j}const q=u?String(e).replace(/\./g,"%2E"):String(e),K=r&&Qn(C)&&C.length===1?q+"[]":q;if(s&&Qn(C)&&C.length===0)return K+"[]";for(let j=0;j<U.length;++j){const J=U[j],ne=typeof J=="object"&&typeof J.value<"u"?J.value:C[J];if(l&&ne===null)continue;const me=p&&u?J.replace(/\./g,"%2E"):J,X=Qn(C)?typeof n=="function"?n(K,me):K:K+(p?"."+me:"["+me+"]");S.set(t,M);const F=new WeakMap;F.set(Hm,S),iT(R,aT(ne,X,n,r,s,a,l,u,n==="comma"&&w&&Qn(C)?null:f,d,m,p,y,g,v,w,E,F))}return R}function y7(t=Qt){if(typeof t.allowEmptyArrays<"u"&&typeof t.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof t.encodeDotInKeys<"u"&&typeof t.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(t.encoder!==null&&typeof t.encoder<"u"&&typeof t.encoder!="function")throw new TypeError("Encoder has to be a function.");const e=t.charset||Qt.charset;if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let n=nT;if(typeof t.format<"u"){if(!Yg(pS,t.format))throw new TypeError("Unknown format option provided.");n=t.format}const r=pS[n];let s=Qt.filter;(typeof t.filter=="function"||Qn(t.filter))&&(s=t.filter);let a;if(t.arrayFormat&&t.arrayFormat in sT?a=t.arrayFormat:"indices"in t?a=t.indices?"indices":"repeat":a=Qt.arrayFormat,"commaRoundTrip"in t&&typeof t.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const l=typeof t.allowDots>"u"?t.encodeDotInKeys?!0:Qt.allowDots:!!t.allowDots;return{addQueryPrefix:typeof t.addQueryPrefix=="boolean"?t.addQueryPrefix:Qt.addQueryPrefix,allowDots:l,allowEmptyArrays:typeof t.allowEmptyArrays=="boolean"?!!t.allowEmptyArrays:Qt.allowEmptyArrays,arrayFormat:a,charset:e,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:Qt.charsetSentinel,commaRoundTrip:!!t.commaRoundTrip,delimiter:typeof t.delimiter>"u"?Qt.delimiter:t.delimiter,encode:typeof t.encode=="boolean"?t.encode:Qt.encode,encodeDotInKeys:typeof t.encodeDotInKeys=="boolean"?t.encodeDotInKeys:Qt.encodeDotInKeys,encoder:typeof t.encoder=="function"?t.encoder:Qt.encoder,encodeValuesOnly:typeof t.encodeValuesOnly=="boolean"?t.encodeValuesOnly:Qt.encodeValuesOnly,filter:s,format:n,formatter:r,serializeDate:typeof t.serializeDate=="function"?t.serializeDate:Qt.serializeDate,skipNulls:typeof t.skipNulls=="boolean"?t.skipNulls:Qt.skipNulls,sort:typeof t.sort=="function"?t.sort:null,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:Qt.strictNullHandling}}function b7(t,e={}){let n=t;const r=y7(e);let s,a;typeof r.filter=="function"?(a=r.filter,n=a("",n)):Qn(r.filter)&&(a=r.filter,s=a);const l=[];if(typeof n!="object"||n===null)return"";const u=sT[r.arrayFormat],f=u==="comma"&&r.commaRoundTrip;s||(s=Object.keys(n)),r.sort&&s.sort(r.sort);const d=new WeakMap;for(let y=0;y<s.length;++y){const g=s[y];r.skipNulls&&n[g]===null||iT(l,aT(n[g],g,u,f,r.allowEmptyArrays,r.strictNullHandling,r.skipNulls,r.encodeDotInKeys,r.encode?r.encoder:null,r.filter,r.sort,r.allowDots,r.serializeDate,r.format,r.formatter,r.encodeValuesOnly,r.charset,d))}const m=l.join(r.delimiter);let p=r.addQueryPrefix===!0?"?":"";return r.charsetSentinel&&(r.charset==="iso-8859-1"?p+="utf8=%26%2310003%3B&":p+="utf8=%E2%9C%93&"),m.length>0?p+m:""}function _7(t){let e=0;for(const s of t)e+=s.length;const n=new Uint8Array(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return n}let yS;function p0(t){let e;return(yS??(e=new globalThis.TextEncoder,yS=e.encode.bind(e)))(t)}let bS;function _S(t){let e;return(bS??(e=new globalThis.TextDecoder,bS=e.decode.bind(e)))(t)}var cr,ur;class Cd{constructor(){cr.set(this,void 0),ur.set(this,void 0),je(this,cr,new Uint8Array),je(this,ur,null)}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?p0(e):e;je(this,cr,_7([ee(this,cr,"f"),n]));const r=[];let s;for(;(s=v7(ee(this,cr,"f"),ee(this,ur,"f")))!=null;){if(s.carriage&&ee(this,ur,"f")==null){je(this,ur,s.index);continue}if(ee(this,ur,"f")!=null&&(s.index!==ee(this,ur,"f")+1||s.carriage)){r.push(_S(ee(this,cr,"f").subarray(0,ee(this,ur,"f")-1))),je(this,cr,ee(this,cr,"f").subarray(ee(this,ur,"f"))),je(this,ur,null);continue}const a=ee(this,ur,"f")!==null?s.preceding-1:s.preceding,l=_S(ee(this,cr,"f").subarray(0,a));r.push(l),je(this,cr,ee(this,cr,"f").subarray(s.index)),je(this,ur,null)}return r}flush(){return ee(this,cr,"f").length?this.decode(`
`):[]}}cr=new WeakMap,ur=new WeakMap;Cd.NEWLINE_CHARS=new Set([`
`,"\r"]);Cd.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function v7(t,e){for(let s=e??0;s<t.length;s++){if(t[s]===10)return{preceding:s,index:s+1,carriage:!1};if(t[s]===13)return{preceding:s,index:s+1,carriage:!0}}return null}function x7(t){for(let r=0;r<t.length-1;r++){if(t[r]===10&&t[r+1]===10||t[r]===13&&t[r+1]===13)return r+2;if(t[r]===13&&t[r+1]===10&&r+3<t.length&&t[r+2]===13&&t[r+3]===10)return r+4}return-1}const Zf={off:0,error:200,warn:300,info:400,debug:500},vS=(t,e,n)=>{if(t){if(n7(Zf,t))return t;bn(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(Zf))}`)}};function kl(){}function Fu(t,e,n){return!e||Zf[t]>Zf[n]?kl:e[t].bind(e)}const w7={error:kl,warn:kl,info:kl,debug:kl};let xS=new WeakMap;function bn(t){const e=t.logger,n=t.logLevel??"off";if(!e)return w7;const r=xS.get(e);if(r&&r[0]===n)return r[1];const s={error:Fu("error",e,n),warn:Fu("warn",e,n),info:Fu("info",e,n),debug:Fu("debug",e,n)};return xS.set(e,[n,s]),s}const ji=t=>(t.options&&(t.options={...t.options},delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);var yl;class Jr{constructor(e,n,r){this.iterator=e,yl.set(this,void 0),this.controller=n,je(this,yl,r)}static fromSSEResponse(e,n,r){let s=!1;const a=r?bn(r):console;async function*l(){if(s)throw new Oe("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let u=!1;try{for await(const f of S7(e,n))if(!u){if(f.data.startsWith("[DONE]")){u=!0;continue}if(f.event===null||!f.event.startsWith("thread.")){let d;try{d=JSON.parse(f.data)}catch(m){throw a.error("Could not parse message into JSON:",f.data),a.error("From chunk:",f.raw),m}if(d&&d.error)throw new vn(void 0,d.error,void 0,e.headers);yield d}else{let d;try{d=JSON.parse(f.data)}catch(m){throw console.error("Could not parse message into JSON:",f.data),console.error("From chunk:",f.raw),m}if(f.event=="error")throw new vn(void 0,d.error,d.message,void 0);yield{event:f.event,data:d}}}u=!0}catch(f){if(Qg(f))return;throw f}finally{u||n.abort()}}return new Jr(l,n,r)}static fromReadableStream(e,n,r){let s=!1;async function*a(){const u=new Cd,f=tT(e);for await(const d of f)for(const m of u.decode(d))yield m;for(const d of u.flush())yield d}async function*l(){if(s)throw new Oe("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let u=!1;try{for await(const f of a())u||f&&(yield JSON.parse(f));u=!0}catch(f){if(Qg(f))return;throw f}finally{u||n.abort()}}return new Jr(l,n,r)}[(yl=new WeakMap,Symbol.asyncIterator)](){return this.iterator()}tee(){const e=[],n=[],r=this.iterator(),s=a=>({next:()=>{if(a.length===0){const l=r.next();e.push(l),n.push(l)}return a.shift()}});return[new Jr(()=>s(e),this.controller,ee(this,yl,"f")),new Jr(()=>s(n),this.controller,ee(this,yl,"f"))]}toReadableStream(){const e=this;let n;return XC({async start(){n=e[Symbol.asyncIterator]()},async pull(r){try{const{value:s,done:a}=await n.next();if(a)return r.close();const l=p0(JSON.stringify(s)+`
`);r.enqueue(l)}catch(s){r.error(s)}},async cancel(){await n.return?.()}})}}async function*S7(t,e){if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Oe("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Oe("Attempted to iterate over a response with no body");const n=new E7,r=new Cd,s=tT(t.body);for await(const a of k7(s))for(const l of r.decode(a)){const u=n.decode(l);u&&(yield u)}for(const a of r.flush()){const l=n.decode(a);l&&(yield l)}}async function*k7(t){let e=new Uint8Array;for await(const n of t){if(n==null)continue;const r=n instanceof ArrayBuffer?new Uint8Array(n):typeof n=="string"?p0(n):n;let s=new Uint8Array(e.length+r.length);s.set(e),s.set(r,e.length),e=s;let a;for(;(a=x7(e))!==-1;)yield e.slice(0,a),e=e.slice(a)}e.length>0&&(yield e)}class E7{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const a={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],a}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,r,s]=C7(e,":");return s.startsWith(" ")&&(s=s.substring(1)),n==="event"?this.event=s:n==="data"&&this.data.push(s),null}}function C7(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}async function oT(t,e){const{response:n,requestLogID:r,retryOfRequestLogID:s,startTime:a}=e,l=await(async()=>{if(e.options.stream)return bn(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):Jr.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const f=n.headers.get("content-type")?.split(";")[0]?.trim();if(f?.includes("application/json")||f?.endsWith("+json")){const p=await n.json();return lT(p,n)}return await n.text()})();return bn(t).debug(`[${r}] response parsed`,ji({retryOfRequestLogID:s,url:n.url,status:n.status,body:l,durationMs:Date.now()-a})),l}function lT(t,e){return!t||typeof t!="object"||Array.isArray(t)?t:Object.defineProperty(t,"_request_id",{value:e.headers.get("x-request-id"),enumerable:!1})}var El;class Td extends Promise{constructor(e,n,r=oT){super(s=>{s(null)}),this.responsePromise=n,this.parseResponse=r,El.set(this,void 0),je(this,El,e)}_thenUnwrap(e){return new Td(ee(this,El,"f"),this.responsePromise,async(n,r)=>lT(e(await this.parseResponse(n,r),r),r.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n,request_id:n.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(ee(this,El,"f"),e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}El=new WeakMap;var Vu;class m0{constructor(e,n,r,s){Vu.set(this,void 0),je(this,Vu,e),this.options=s,this.response=n,this.body=r}hasNextPage(){return this.getPaginatedItems().length?this.nextPageRequestOptions()!=null:!1}async getNextPage(){const e=this.nextPageRequestOptions();if(!e)throw new Oe("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");return await ee(this,Vu,"f").requestAPIList(this.constructor,e)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(Vu=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const n of e.getPaginatedItems())yield n}}class T7 extends Td{constructor(e,n,r){super(e,n,async(s,a)=>new r(s,a.response,await oT(s,a),a.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const n of e)yield n}}class Ad extends m0{constructor(e,n,r,s){super(e,n,r,s),this.data=r.data||[],this.object=r.object}getPaginatedItems(){return this.data??[]}nextPageRequestOptions(){return null}}class Gt extends m0{constructor(e,n,r,s){super(e,n,r,s),this.data=r.data||[],this.has_more=r.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){const e=this.getPaginatedItems(),n=e[e.length-1]?.id;return n?{...this.options,query:{...WC(this.options.query),after:n}}:null}}class Qf extends m0{constructor(e,n,r,s){super(e,n,r,s),this.data=r.data||[],this.has_more=r.has_more||!1,this.last_id=r.last_id||""}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){const e=this.last_id;return e?{...this.options,query:{...WC(this.options.query),after:e}}:null}}const cT=()=>{if(typeof File>"u"){const{process:t}=globalThis,e=typeof t?.versions?.node=="string"&&parseInt(t.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(e?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Fl(t,e,n){return cT(),new File(t,e??"unknown_file",n)}function lf(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const g0=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function",wS=async(t,e)=>Wg(t.body)?{...t,body:await uT(t.body,e)}:t,Fi=async(t,e)=>({...t,body:await uT(t.body,e)}),SS=new WeakMap;function A7(t){const e=typeof t=="function"?t:t.fetch,n=SS.get(e);if(n)return n;const r=(async()=>{try{const s="Response"in e?e.Response:(await e("data:,")).constructor,a=new FormData;return a.toString()!==await new s(a).text()}catch{return!0}})();return SS.set(e,r),r}const uT=async(t,e)=>{if(!await A7(e))throw new TypeError("The provided fetch function does not support file uploads with the current global FormData class.");const n=new FormData;return await Promise.all(Object.entries(t||{}).map(([r,s])=>Xg(n,r,s))),n},fT=t=>t instanceof Blob&&"name"in t,R7=t=>typeof t=="object"&&t!==null&&(t instanceof Response||g0(t)||fT(t)),Wg=t=>{if(R7(t))return!0;if(Array.isArray(t))return t.some(Wg);if(t&&typeof t=="object"){for(const e in t)if(Wg(t[e]))return!0}return!1},Xg=async(t,e,n)=>{if(n!==void 0){if(n==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")t.append(e,String(n));else if(n instanceof Response)t.append(e,Fl([await n.blob()],lf(n)));else if(g0(n))t.append(e,Fl([await new Response(eT(n)).blob()],lf(n)));else if(fT(n))t.append(e,n,lf(n));else if(Array.isArray(n))await Promise.all(n.map(r=>Xg(t,e+"[]",r)));else if(typeof n=="object")await Promise.all(Object.entries(n).map(([r,s])=>Xg(t,`${e}[${r}]`,s)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${n} instead`)}},dT=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",O7=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&dT(t),N7=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function I7(t,e,n){if(cT(),t=await t,O7(t))return t instanceof File?t:Fl([await t.arrayBuffer()],t.name);if(N7(t)){const s=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),Fl(await ey(s),e,n)}const r=await ey(t);if(e||(e=lf(t)),!n?.type){const s=r.find(a=>typeof a=="object"&&"type"in a&&a.type);typeof s=="string"&&(n={...n,type:s})}return Fl(r,e,n)}async function ey(t){let e=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)e.push(t);else if(dT(t))e.push(t instanceof Blob?t:await t.arrayBuffer());else if(g0(t))for await(const n of t)e.push(...await ey(n));else{const n=t?.constructor?.name;throw new Error(`Unexpected data type: ${typeof t}${n?`; constructor: ${n}`:""}${M7(t)}`)}return e}function M7(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}class Te{constructor(e){this._client=e}}function hT(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const kS=Object.freeze(Object.create(null)),D7=(t=hT)=>function(n,...r){if(n.length===1)return n[0];let s=!1;const a=[],l=n.reduce((m,p,y)=>{/[?#]/.test(p)&&(s=!0);const g=r[y];let v=(s?encodeURIComponent:t)(""+g);return y!==r.length&&(g==null||typeof g=="object"&&g.toString===Object.getPrototypeOf(Object.getPrototypeOf(g.hasOwnProperty??kS)??kS)?.toString)&&(v=g+"",a.push({start:m.length+p.length,length:v.length,error:`Value of type ${Object.prototype.toString.call(g).slice(8,-1)} is not a valid path parameter`})),m+p+(y===r.length?"":v)},""),u=l.split(/[?#]/,1)[0],f=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let d;for(;(d=f.exec(u))!==null;)a.push({start:d.index,length:d[0].length,error:`Value "${d[0]}" can't be safely passed as a path parameter`});if(a.sort((m,p)=>m.start-p.start),a.length>0){let m=0;const p=a.reduce((y,g)=>{const v=" ".repeat(g.start-m),w="^".repeat(g.length);return m=g.start+g.length,y+v+w},"");throw new Oe(`Path parameters result in path with invalid segments:
${a.map(y=>y.error).join(`
`)}
${l}
${p}`)}return l},pe=D7(hT);let pT=class extends Te{list(e,n={},r){return this._client.getAPIList(pe`/chat/completions/${e}/messages`,Gt,{query:n,...r})}};function Jf(t){return t!==void 0&&"function"in t&&t.function!==void 0}function y0(t){return t?.$brand==="auto-parseable-response-format"}function gc(t){return t?.$brand==="auto-parseable-tool"}function j7(t,e){return!e||!mT(e)?{...t,choices:t.choices.map(n=>(gT(n.message.tool_calls),{...n,message:{...n.message,parsed:null,...n.message.tool_calls?{tool_calls:n.message.tool_calls}:void 0}}))}:b0(t,e)}function b0(t,e){const n=t.choices.map(r=>{if(r.finish_reason==="length")throw new JC;if(r.finish_reason==="content_filter")throw new YC;return gT(r.message.tool_calls),{...r,message:{...r.message,...r.message.tool_calls?{tool_calls:r.message.tool_calls?.map(s=>z7(e,s))??void 0}:void 0,parsed:r.message.content&&!r.message.refusal?L7(e,r.message.content):null}}});return{...t,choices:n}}function L7(t,e){return t.response_format?.type!=="json_schema"?null:t.response_format?.type==="json_schema"?"$parseRaw"in t.response_format?t.response_format.$parseRaw(e):JSON.parse(e):null}function z7(t,e){const n=t.tools?.find(r=>Jf(r)&&r.function?.name===e.function.name);return{...e,function:{...e.function,parsed_arguments:gc(n)?n.$parseRaw(e.function.arguments):n?.function.strict?JSON.parse(e.function.arguments):null}}}function P7(t,e){if(!t||!("tools"in t)||!t.tools)return!1;const n=t.tools?.find(r=>Jf(r)&&r.function?.name===e.function.name);return Jf(n)&&(gc(n)||n?.function.strict||!1)}function mT(t){return y0(t.response_format)?!0:t.tools?.some(e=>gc(e)||e.type==="function"&&e.function.strict===!0)??!1}function gT(t){for(const e of t||[])if(e.type!=="function")throw new Oe(`Currently only \`function\` tool calls are supported; Received \`${e.type}\``)}function B7(t){for(const e of t??[]){if(e.type!=="function")throw new Oe(`Currently only \`function\` tool types support auto-parsing; Received \`${e.type}\``);if(e.function.strict!==!0)throw new Oe(`The \`${e.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}const Yf=t=>t?.role==="assistant",yT=t=>t?.role==="tool";var ty,cf,uf,Cl,Tl,ff,Al,Ss,Rl,Wf,Xf,Fa,bT;class _0{constructor(){ty.add(this),this.controller=new AbortController,cf.set(this,void 0),uf.set(this,()=>{}),Cl.set(this,()=>{}),Tl.set(this,void 0),ff.set(this,()=>{}),Al.set(this,()=>{}),Ss.set(this,{}),Rl.set(this,!1),Wf.set(this,!1),Xf.set(this,!1),Fa.set(this,!1),je(this,cf,new Promise((e,n)=>{je(this,uf,e,"f"),je(this,Cl,n,"f")})),je(this,Tl,new Promise((e,n)=>{je(this,ff,e,"f"),je(this,Al,n,"f")})),ee(this,cf,"f").catch(()=>{}),ee(this,Tl,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},ee(this,ty,"m",bT).bind(this))},0)}_connected(){this.ended||(ee(this,uf,"f").call(this),this._emit("connect"))}get ended(){return ee(this,Rl,"f")}get errored(){return ee(this,Wf,"f")}get aborted(){return ee(this,Xf,"f")}abort(){this.controller.abort()}on(e,n){return(ee(this,Ss,"f")[e]||(ee(this,Ss,"f")[e]=[])).push({listener:n}),this}off(e,n){const r=ee(this,Ss,"f")[e];if(!r)return this;const s=r.findIndex(a=>a.listener===n);return s>=0&&r.splice(s,1),this}once(e,n){return(ee(this,Ss,"f")[e]||(ee(this,Ss,"f")[e]=[])).push({listener:n,once:!0}),this}emitted(e){return new Promise((n,r)=>{je(this,Fa,!0),e!=="error"&&this.once("error",r),this.once(e,n)})}async done(){je(this,Fa,!0),await ee(this,Tl,"f")}_emit(e,...n){if(ee(this,Rl,"f"))return;e==="end"&&(je(this,Rl,!0),ee(this,ff,"f").call(this));const r=ee(this,Ss,"f")[e];if(r&&(ee(this,Ss,"f")[e]=r.filter(s=>!s.once),r.forEach(({listener:s})=>s(...n))),e==="abort"){const s=n[0];!ee(this,Fa,"f")&&!r?.length&&Promise.reject(s),ee(this,Cl,"f").call(this,s),ee(this,Al,"f").call(this,s),this._emit("end");return}if(e==="error"){const s=n[0];!ee(this,Fa,"f")&&!r?.length&&Promise.reject(s),ee(this,Cl,"f").call(this,s),ee(this,Al,"f").call(this,s),this._emit("end")}}_emitFinal(){}}cf=new WeakMap,uf=new WeakMap,Cl=new WeakMap,Tl=new WeakMap,ff=new WeakMap,Al=new WeakMap,Ss=new WeakMap,Rl=new WeakMap,Wf=new WeakMap,Xf=new WeakMap,Fa=new WeakMap,ty=new WeakSet,bT=function(e){if(je(this,Wf,!0),e instanceof Error&&e.name==="AbortError"&&(e=new Nr),e instanceof Nr)return je(this,Xf,!0),this._emit("abort",e);if(e instanceof Oe)return this._emit("error",e);if(e instanceof Error){const n=new Oe(e.message);return n.cause=e,this._emit("error",n)}return this._emit("error",new Oe(String(e)))};function U7(t){return typeof t.parse=="function"}var Dn,ny,ed,ry,sy,iy,_T,vT;const $7=10;class xT extends _0{constructor(){super(...arguments),Dn.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){this._chatCompletions.push(e),this._emit("chatCompletion",e);const n=e.choices[0]?.message;return n&&this._addMessage(n),e}_addMessage(e,n=!0){if("content"in e||(e.content=null),this.messages.push(e),n){if(this._emit("message",e),yT(e)&&e.content)this._emit("functionToolCallResult",e.content);else if(Yf(e)&&e.tool_calls)for(const r of e.tool_calls)r.type==="function"&&this._emit("functionToolCall",r.function)}}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new Oe("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),ee(this,Dn,"m",ny).call(this)}async finalMessage(){return await this.done(),ee(this,Dn,"m",ed).call(this)}async finalFunctionToolCall(){return await this.done(),ee(this,Dn,"m",ry).call(this)}async finalFunctionToolCallResult(){return await this.done(),ee(this,Dn,"m",sy).call(this)}async totalUsage(){return await this.done(),ee(this,Dn,"m",iy).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const n=ee(this,Dn,"m",ed).call(this);n&&this._emit("finalMessage",n);const r=ee(this,Dn,"m",ny).call(this);r&&this._emit("finalContent",r);const s=ee(this,Dn,"m",ry).call(this);s&&this._emit("finalFunctionToolCall",s);const a=ee(this,Dn,"m",sy).call(this);a!=null&&this._emit("finalFunctionToolCallResult",a),this._chatCompletions.some(l=>l.usage)&&this._emit("totalUsage",ee(this,Dn,"m",iy).call(this))}async _createChatCompletion(e,n,r){const s=r?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),ee(this,Dn,"m",_T).call(this,n);const a=await e.chat.completions.create({...n,stream:!1},{...r,signal:this.controller.signal});return this._connected(),this._addChatCompletion(b0(a,n))}async _runChatCompletion(e,n,r){for(const s of n.messages)this._addMessage(s,!1);return await this._createChatCompletion(e,n,r)}async _runTools(e,n,r){const s="tool",{tool_choice:a="auto",stream:l,...u}=n,f=typeof a!="string"&&a.type==="function"&&a?.function?.name,{maxChatCompletions:d=$7}=r||{},m=n.tools.map(g=>{if(gc(g)){if(!g.$callback)throw new Oe("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:g.$callback,name:g.function.name,description:g.function.description||"",parameters:g.function.parameters,parse:g.$parseRaw,strict:!0}}}return g}),p={};for(const g of m)g.type==="function"&&(p[g.function.name||g.function.function.name]=g.function);const y="tools"in n?m.map(g=>g.type==="function"?{type:"function",function:{name:g.function.name||g.function.function.name,parameters:g.function.parameters,description:g.function.description,strict:g.function.strict}}:g):void 0;for(const g of n.messages)this._addMessage(g,!1);for(let g=0;g<d;++g){const w=(await this._createChatCompletion(e,{...u,tool_choice:a,tools:y,messages:[...this.messages]},r)).choices[0]?.message;if(!w)throw new Oe("missing message in ChatCompletion response");if(!w.tool_calls?.length)return;for(const E of w.tool_calls){if(E.type!=="function")continue;const S=E.id,{name:C,arguments:T}=E.function,M=p[C];if(M){if(f&&f!==C){const q=`Invalid tool_call: ${JSON.stringify(C)}. ${JSON.stringify(f)} requested. Please try again`;this._addMessage({role:s,tool_call_id:S,content:q});continue}}else{const q=`Invalid tool_call: ${JSON.stringify(C)}. Available options are: ${Object.keys(p).map(K=>JSON.stringify(K)).join(", ")}. Please try again`;this._addMessage({role:s,tool_call_id:S,content:q});continue}let I;try{I=U7(M)?await M.parse(T):T}catch(q){const K=q instanceof Error?q.message:String(q);this._addMessage({role:s,tool_call_id:S,content:K});continue}const R=await M.function(I,this),U=ee(this,Dn,"m",vT).call(this,R);if(this._addMessage({role:s,tool_call_id:S,content:U}),f)return}}}}Dn=new WeakSet,ny=function(){return ee(this,Dn,"m",ed).call(this).content??null},ed=function(){let e=this.messages.length;for(;e-- >0;){const n=this.messages[e];if(Yf(n))return{...n,content:n.content??null,refusal:n.refusal??null}}throw new Oe("stream ended without producing a ChatCompletionMessage with role=assistant")},ry=function(){for(let e=this.messages.length-1;e>=0;e--){const n=this.messages[e];if(Yf(n)&&n?.tool_calls?.length)return n.tool_calls.filter(r=>r.type==="function").at(-1)?.function}},sy=function(){for(let e=this.messages.length-1;e>=0;e--){const n=this.messages[e];if(yT(n)&&n.content!=null&&typeof n.content=="string"&&this.messages.some(r=>r.role==="assistant"&&r.tool_calls?.some(s=>s.type==="function"&&s.id===n.tool_call_id)))return n.content}},iy=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:n}of this._chatCompletions)n&&(e.completion_tokens+=n.completion_tokens,e.prompt_tokens+=n.prompt_tokens,e.total_tokens+=n.total_tokens);return e},_T=function(e){if(e.n!=null&&e.n>1)throw new Oe("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},vT=function(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)};class v0 extends xT{static runTools(e,n,r){const s=new v0,a={...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"runTools"}};return s._run(()=>s._runTools(e,n,a)),s}_addMessage(e,n=!0){super._addMessage(e,n),Yf(e)&&e.content&&this._emit("content",e.content)}}const wT=1,ST=2,kT=4,ET=8,CT=16,TT=32,AT=64,RT=128,OT=256,NT=RT|OT,IT=CT|TT|NT|AT,MT=wT|ST|IT,DT=kT|ET,q7=MT|DT,ln={STR:wT,NUM:ST,ARR:kT,OBJ:ET,NULL:CT,BOOL:TT,NAN:AT,INFINITY:RT,MINUS_INFINITY:OT,INF:NT,SPECIAL:IT,ATOM:MT,COLLECTION:DT,ALL:q7};class F7 extends Error{}class V7 extends Error{}function H7(t,e=ln.ALL){if(typeof t!="string")throw new TypeError(`expecting str, got ${typeof t}`);if(!t.trim())throw new Error(`${t} is empty`);return G7(t.trim(),e)}const G7=(t,e)=>{const n=t.length;let r=0;const s=y=>{throw new F7(`${y} at position ${r}`)},a=y=>{throw new V7(`${y} at position ${r}`)},l=()=>(p(),r>=n&&s("Unexpected end of input"),t[r]==='"'?u():t[r]==="{"?f():t[r]==="["?d():t.substring(r,r+4)==="null"||ln.NULL&e&&n-r<4&&"null".startsWith(t.substring(r))?(r+=4,null):t.substring(r,r+4)==="true"||ln.BOOL&e&&n-r<4&&"true".startsWith(t.substring(r))?(r+=4,!0):t.substring(r,r+5)==="false"||ln.BOOL&e&&n-r<5&&"false".startsWith(t.substring(r))?(r+=5,!1):t.substring(r,r+8)==="Infinity"||ln.INFINITY&e&&n-r<8&&"Infinity".startsWith(t.substring(r))?(r+=8,1/0):t.substring(r,r+9)==="-Infinity"||ln.MINUS_INFINITY&e&&1<n-r&&n-r<9&&"-Infinity".startsWith(t.substring(r))?(r+=9,-1/0):t.substring(r,r+3)==="NaN"||ln.NAN&e&&n-r<3&&"NaN".startsWith(t.substring(r))?(r+=3,NaN):m()),u=()=>{const y=r;let g=!1;for(r++;r<n&&(t[r]!=='"'||g&&t[r-1]==="\\");)g=t[r]==="\\"?!g:!1,r++;if(t.charAt(r)=='"')try{return JSON.parse(t.substring(y,++r-Number(g)))}catch(v){a(String(v))}else if(ln.STR&e)try{return JSON.parse(t.substring(y,r-Number(g))+'"')}catch{return JSON.parse(t.substring(y,t.lastIndexOf("\\"))+'"')}s("Unterminated string literal")},f=()=>{r++,p();const y={};try{for(;t[r]!=="}";){if(p(),r>=n&&ln.OBJ&e)return y;const g=u();p(),r++;try{const v=l();Object.defineProperty(y,g,{value:v,writable:!0,enumerable:!0,configurable:!0})}catch(v){if(ln.OBJ&e)return y;throw v}p(),t[r]===","&&r++}}catch{if(ln.OBJ&e)return y;s("Expected '}' at end of object")}return r++,y},d=()=>{r++;const y=[];try{for(;t[r]!=="]";)y.push(l()),p(),t[r]===","&&r++}catch{if(ln.ARR&e)return y;s("Expected ']' at end of array")}return r++,y},m=()=>{if(r===0){t==="-"&&ln.NUM&e&&s("Not sure what '-' is");try{return JSON.parse(t)}catch(g){if(ln.NUM&e)try{return t[t.length-1]==="."?JSON.parse(t.substring(0,t.lastIndexOf("."))):JSON.parse(t.substring(0,t.lastIndexOf("e")))}catch{}a(String(g))}}const y=r;for(t[r]==="-"&&r++;t[r]&&!",]}".includes(t[r]);)r++;r==n&&!(ln.NUM&e)&&s("Unterminated number literal");try{return JSON.parse(t.substring(y,r))}catch{t.substring(y,r)==="-"&&ln.NUM&e&&s("Not sure what '-' is");try{return JSON.parse(t.substring(y,t.lastIndexOf("e")))}catch(v){a(String(v))}}},p=()=>{for(;r<n&&` 
\r	`.includes(t[r]);)r++};return l()},ES=t=>H7(t,ln.ALL^ln.NUM);var Zt,ws,Pa,ei,Gm,Hu,Km,Zm,Qm,Gu,Jm,CS;class rc extends xT{constructor(e){super(),Zt.add(this),ws.set(this,void 0),Pa.set(this,void 0),ei.set(this,void 0),je(this,ws,e),je(this,Pa,[])}get currentChatCompletionSnapshot(){return ee(this,ei,"f")}static fromReadableStream(e){const n=new rc(null);return n._run(()=>n._fromReadableStream(e)),n}static createChatCompletion(e,n,r){const s=new rc(n);return s._run(()=>s._runChatCompletion(e,{...n,stream:!0},{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),s}async _createChatCompletion(e,n,r){super._createChatCompletion;const s=r?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),ee(this,Zt,"m",Gm).call(this);const a=await e.chat.completions.create({...n,stream:!0},{...r,signal:this.controller.signal});this._connected();for await(const l of a)ee(this,Zt,"m",Km).call(this,l);if(a.controller.signal?.aborted)throw new Nr;return this._addChatCompletion(ee(this,Zt,"m",Gu).call(this))}async _fromReadableStream(e,n){const r=n?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),ee(this,Zt,"m",Gm).call(this),this._connected();const s=Jr.fromReadableStream(e,this.controller);let a;for await(const l of s)a&&a!==l.id&&this._addChatCompletion(ee(this,Zt,"m",Gu).call(this)),ee(this,Zt,"m",Km).call(this,l),a=l.id;if(s.controller.signal?.aborted)throw new Nr;return this._addChatCompletion(ee(this,Zt,"m",Gu).call(this))}[(ws=new WeakMap,Pa=new WeakMap,ei=new WeakMap,Zt=new WeakSet,Gm=function(){this.ended||je(this,ei,void 0)},Hu=function(n){let r=ee(this,Pa,"f")[n.index];return r||(r={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},ee(this,Pa,"f")[n.index]=r,r)},Km=function(n){if(this.ended)return;const r=ee(this,Zt,"m",CS).call(this,n);this._emit("chunk",n,r);for(const s of n.choices){const a=r.choices[s.index];s.delta.content!=null&&a.message?.role==="assistant"&&a.message?.content&&(this._emit("content",s.delta.content,a.message.content),this._emit("content.delta",{delta:s.delta.content,snapshot:a.message.content,parsed:a.message.parsed})),s.delta.refusal!=null&&a.message?.role==="assistant"&&a.message?.refusal&&this._emit("refusal.delta",{delta:s.delta.refusal,snapshot:a.message.refusal}),s.logprobs?.content!=null&&a.message?.role==="assistant"&&this._emit("logprobs.content.delta",{content:s.logprobs?.content,snapshot:a.logprobs?.content??[]}),s.logprobs?.refusal!=null&&a.message?.role==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:s.logprobs?.refusal,snapshot:a.logprobs?.refusal??[]});const l=ee(this,Zt,"m",Hu).call(this,a);a.finish_reason&&(ee(this,Zt,"m",Qm).call(this,a),l.current_tool_call_index!=null&&ee(this,Zt,"m",Zm).call(this,a,l.current_tool_call_index));for(const u of s.delta.tool_calls??[])l.current_tool_call_index!==u.index&&(ee(this,Zt,"m",Qm).call(this,a),l.current_tool_call_index!=null&&ee(this,Zt,"m",Zm).call(this,a,l.current_tool_call_index)),l.current_tool_call_index=u.index;for(const u of s.delta.tool_calls??[]){const f=a.message.tool_calls?.[u.index];f?.type&&(f?.type==="function"?this._emit("tool_calls.function.arguments.delta",{name:f.function?.name,index:u.index,arguments:f.function.arguments,parsed_arguments:f.function.parsed_arguments,arguments_delta:u.function?.arguments??""}):(f?.type,void 0))}}},Zm=function(n,r){if(ee(this,Zt,"m",Hu).call(this,n).done_tool_calls.has(r))return;const a=n.message.tool_calls?.[r];if(!a)throw new Error("no tool call snapshot");if(!a.type)throw new Error("tool call snapshot missing `type`");if(a.type==="function"){const l=ee(this,ws,"f")?.tools?.find(u=>Jf(u)&&u.function.name===a.function.name);this._emit("tool_calls.function.arguments.done",{name:a.function.name,index:r,arguments:a.function.arguments,parsed_arguments:gc(l)?l.$parseRaw(a.function.arguments):l?.function.strict?JSON.parse(a.function.arguments):null})}else a.type},Qm=function(n){const r=ee(this,Zt,"m",Hu).call(this,n);if(n.message.content&&!r.content_done){r.content_done=!0;const s=ee(this,Zt,"m",Jm).call(this);this._emit("content.done",{content:n.message.content,parsed:s?s.$parseRaw(n.message.content):null})}n.message.refusal&&!r.refusal_done&&(r.refusal_done=!0,this._emit("refusal.done",{refusal:n.message.refusal})),n.logprobs?.content&&!r.logprobs_content_done&&(r.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:n.logprobs.content})),n.logprobs?.refusal&&!r.logprobs_refusal_done&&(r.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:n.logprobs.refusal}))},Gu=function(){if(this.ended)throw new Oe("stream has ended, this shouldn't happen");const n=ee(this,ei,"f");if(!n)throw new Oe("request ended without sending any chunks");return je(this,ei,void 0),je(this,Pa,[]),K7(n,ee(this,ws,"f"))},Jm=function(){const n=ee(this,ws,"f")?.response_format;return y0(n)?n:null},CS=function(n){var r,s,a,l;let u=ee(this,ei,"f");const{choices:f,...d}=n;u?Object.assign(u,d):u=je(this,ei,{...d,choices:[]});for(const{delta:m,finish_reason:p,index:y,logprobs:g=null,...v}of n.choices){let w=u.choices[y];if(w||(w=u.choices[y]={finish_reason:p,index:y,message:{},logprobs:g,...v}),g)if(!w.logprobs)w.logprobs=Object.assign({},g);else{const{content:R,refusal:U,...q}=g;Object.assign(w.logprobs,q),R&&((r=w.logprobs).content??(r.content=[]),w.logprobs.content.push(...R)),U&&((s=w.logprobs).refusal??(s.refusal=[]),w.logprobs.refusal.push(...U))}if(p&&(w.finish_reason=p,ee(this,ws,"f")&&mT(ee(this,ws,"f")))){if(p==="length")throw new JC;if(p==="content_filter")throw new YC}if(Object.assign(w,v),!m)continue;const{content:E,refusal:S,function_call:C,role:T,tool_calls:M,...I}=m;if(Object.assign(w.message,I),S&&(w.message.refusal=(w.message.refusal||"")+S),T&&(w.message.role=T),C&&(w.message.function_call?(C.name&&(w.message.function_call.name=C.name),C.arguments&&((a=w.message.function_call).arguments??(a.arguments=""),w.message.function_call.arguments+=C.arguments)):w.message.function_call=C),E&&(w.message.content=(w.message.content||"")+E,!w.message.refusal&&ee(this,Zt,"m",Jm).call(this)&&(w.message.parsed=ES(w.message.content))),M){w.message.tool_calls||(w.message.tool_calls=[]);for(const{index:R,id:U,type:q,function:K,...j}of M){const J=(l=w.message.tool_calls)[R]??(l[R]={});Object.assign(J,j),U&&(J.id=U),q&&(J.type=q),K&&(J.function??(J.function={name:K.name??"",arguments:""})),K?.name&&(J.function.name=K.name),K?.arguments&&(J.function.arguments+=K.arguments,P7(ee(this,ws,"f"),J)&&(J.function.parsed_arguments=ES(J.function.arguments)))}}}return u},Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("chunk",s=>{const a=n.shift();a?a.resolve(s):e.push(s)}),this.on("end",()=>{r=!0;for(const s of n)s.resolve(void 0);n.length=0}),this.on("abort",s=>{r=!0;for(const a of n)a.reject(s);n.length=0}),this.on("error",s=>{r=!0;for(const a of n)a.reject(s);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((a,l)=>n.push({resolve:a,reject:l})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new Jr(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function K7(t,e){const{id:n,choices:r,created:s,model:a,system_fingerprint:l,...u}=t,f={...u,id:n,choices:r.map(({message:d,finish_reason:m,index:p,logprobs:y,...g})=>{if(!m)throw new Oe(`missing finish_reason for choice ${p}`);const{content:v=null,function_call:w,tool_calls:E,...S}=d,C=d.role;if(!C)throw new Oe(`missing role for choice ${p}`);if(w){const{arguments:T,name:M}=w;if(T==null)throw new Oe(`missing function_call.arguments for choice ${p}`);if(!M)throw new Oe(`missing function_call.name for choice ${p}`);return{...g,message:{content:v,function_call:{arguments:T,name:M},role:C,refusal:d.refusal??null},finish_reason:m,index:p,logprobs:y}}return E?{...g,index:p,finish_reason:m,logprobs:y,message:{...S,role:C,content:v,refusal:d.refusal??null,tool_calls:E.map((T,M)=>{const{function:I,type:R,id:U,...q}=T,{arguments:K,name:j,...J}=I||{};if(U==null)throw new Oe(`missing choices[${p}].tool_calls[${M}].id
${Ku(t)}`);if(R==null)throw new Oe(`missing choices[${p}].tool_calls[${M}].type
${Ku(t)}`);if(j==null)throw new Oe(`missing choices[${p}].tool_calls[${M}].function.name
${Ku(t)}`);if(K==null)throw new Oe(`missing choices[${p}].tool_calls[${M}].function.arguments
${Ku(t)}`);return{...q,id:U,type:R,function:{...J,name:j,arguments:K}}})}}:{...g,message:{...S,content:v,role:C,refusal:d.refusal??null},finish_reason:m,index:p,logprobs:y}}),created:s,model:a,object:"chat.completion",...l?{system_fingerprint:l}:{}};return j7(f,e)}function Ku(t){return JSON.stringify(t)}class td extends rc{static fromReadableStream(e){const n=new td(null);return n._run(()=>n._fromReadableStream(e)),n}static runTools(e,n,r){const s=new td(n),a={...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"runTools"}};return s._run(()=>s._runTools(e,n,a)),s}}let x0=class extends Te{constructor(){super(...arguments),this.messages=new pT(this._client)}create(e,n){return this._client.post("/chat/completions",{body:e,...n,stream:e.stream??!1})}retrieve(e,n){return this._client.get(pe`/chat/completions/${e}`,n)}update(e,n,r){return this._client.post(pe`/chat/completions/${e}`,{body:n,...r})}list(e={},n){return this._client.getAPIList("/chat/completions",Gt,{query:e,...n})}delete(e,n){return this._client.delete(pe`/chat/completions/${e}`,n)}parse(e,n){return B7(e.tools),this._client.chat.completions.create(e,{...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"chat.completions.parse"}})._thenUnwrap(r=>b0(r,e))}runTools(e,n){return e.stream?td.runTools(this._client,e,n):v0.runTools(this._client,e,n)}stream(e,n){return rc.createChatCompletion(this._client,e,n)}};x0.Messages=pT;class w0 extends Te{constructor(){super(...arguments),this.completions=new x0(this._client)}}w0.Completions=x0;const jT=Symbol("brand.privateNullableHeaders");function*Z7(t){if(!t)return;if(jT in t){const{values:r,nulls:s}=t;yield*r.entries();for(const a of s)yield[a,null];return}let e=!1,n;t instanceof Headers?n=t.entries():uS(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let r of n){const s=r[0];if(typeof s!="string")throw new TypeError("expected header name to be a string");const a=uS(r[1])?r[1]:[r[1]];let l=!1;for(const u of a)u!==void 0&&(e&&!l&&(l=!0,yield[s,null]),yield[s,u])}}const Se=t=>{const e=new Headers,n=new Set;for(const r of t){const s=new Set;for(const[a,l]of Z7(r)){const u=a.toLowerCase();s.has(u)||(e.delete(a),s.add(u)),l===null?(e.delete(a),n.add(u)):(e.append(a,l),n.delete(u))}}return{[jT]:!0,values:e,nulls:n}};class LT extends Te{create(e,n){return this._client.post("/audio/speech",{body:e,...n,headers:Se([{Accept:"application/octet-stream"},n?.headers]),__binaryResponse:!0})}}class zT extends Te{create(e,n){return this._client.post("/audio/transcriptions",Fi({body:e,...n,stream:e.stream??!1,__metadata:{model:e.model}},this._client))}}class PT extends Te{create(e,n){return this._client.post("/audio/translations",Fi({body:e,...n,__metadata:{model:e.model}},this._client))}}class yc extends Te{constructor(){super(...arguments),this.transcriptions=new zT(this._client),this.translations=new PT(this._client),this.speech=new LT(this._client)}}yc.Transcriptions=zT;yc.Translations=PT;yc.Speech=LT;class BT extends Te{create(e,n){return this._client.post("/batches",{body:e,...n})}retrieve(e,n){return this._client.get(pe`/batches/${e}`,n)}list(e={},n){return this._client.getAPIList("/batches",Gt,{query:e,...n})}cancel(e,n){return this._client.post(pe`/batches/${e}/cancel`,n)}}class UT extends Te{create(e,n){return this._client.post("/assistants",{body:e,...n,headers:Se([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}retrieve(e,n){return this._client.get(pe`/assistants/${e}`,{...n,headers:Se([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}update(e,n,r){return this._client.post(pe`/assistants/${e}`,{body:n,...r,headers:Se([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(e={},n){return this._client.getAPIList("/assistants",Gt,{query:e,...n,headers:Se([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}delete(e,n){return this._client.delete(pe`/assistants/${e}`,{...n,headers:Se([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}}let $T=class extends Te{create(e,n){return this._client.post("/realtime/sessions",{body:e,...n,headers:Se([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}};class qT extends Te{create(e,n){return this._client.post("/realtime/transcription_sessions",{body:e,...n,headers:Se([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}}let Rd=class extends Te{constructor(){super(...arguments),this.sessions=new $T(this._client),this.transcriptionSessions=new qT(this._client)}};Rd.Sessions=$T;Rd.TranscriptionSessions=qT;class FT extends Te{create(e,n){return this._client.post("/chatkit/sessions",{body:e,...n,headers:Se([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}cancel(e,n){return this._client.post(pe`/chatkit/sessions/${e}/cancel`,{...n,headers:Se([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}}let VT=class extends Te{retrieve(e,n){return this._client.get(pe`/chatkit/threads/${e}`,{...n,headers:Se([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}list(e={},n){return this._client.getAPIList("/chatkit/threads",Qf,{query:e,...n,headers:Se([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}delete(e,n){return this._client.delete(pe`/chatkit/threads/${e}`,{...n,headers:Se([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}listItems(e,n={},r){return this._client.getAPIList(pe`/chatkit/threads/${e}/items`,Qf,{query:n,...r,headers:Se([{"OpenAI-Beta":"chatkit_beta=v1"},r?.headers])})}};class Od extends Te{constructor(){super(...arguments),this.sessions=new FT(this._client),this.threads=new VT(this._client)}}Od.Sessions=FT;Od.Threads=VT;class HT extends Te{create(e,n,r){return this._client.post(pe`/threads/${e}/messages`,{body:n,...r,headers:Se([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}retrieve(e,n,r){const{thread_id:s}=n;return this._client.get(pe`/threads/${s}/messages/${e}`,{...r,headers:Se([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}update(e,n,r){const{thread_id:s,...a}=n;return this._client.post(pe`/threads/${s}/messages/${e}`,{body:a,...r,headers:Se([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(e,n={},r){return this._client.getAPIList(pe`/threads/${e}/messages`,Gt,{query:n,...r,headers:Se([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}delete(e,n,r){const{thread_id:s}=n;return this._client.delete(pe`/threads/${s}/messages/${e}`,{...r,headers:Se([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}}class GT extends Te{retrieve(e,n,r){const{thread_id:s,run_id:a,...l}=n;return this._client.get(pe`/threads/${s}/runs/${a}/steps/${e}`,{query:l,...r,headers:Se([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(e,n,r){const{thread_id:s,...a}=n;return this._client.getAPIList(pe`/threads/${s}/runs/${e}/steps`,Gt,{query:a,...r,headers:Se([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}}const Q7=t=>{if(typeof Buffer<"u"){const e=Buffer.from(t,"base64");return Array.from(new Float32Array(e.buffer,e.byteOffset,e.length/Float32Array.BYTES_PER_ELEMENT))}else{const e=atob(t),n=e.length,r=new Uint8Array(n);for(let s=0;s<n;s++)r[s]=e.charCodeAt(s);return Array.from(new Float32Array(r.buffer))}};var J7={};const Ba=t=>{if(typeof globalThis.process<"u")return J7?.[t]?.trim()??void 0;if(typeof globalThis.Deno<"u")return globalThis.Deno.env?.get?.(t)?.trim()};var _n,Bi,ay,Qr,df,zr,Ui,Qa,Li,nd,fr,hf,pf,Vl,Ol,Nl,TS,AS,RS,OS,NS,IS,MS;class Hl extends _0{constructor(){super(...arguments),_n.add(this),ay.set(this,[]),Qr.set(this,{}),df.set(this,{}),zr.set(this,void 0),Ui.set(this,void 0),Qa.set(this,void 0),Li.set(this,void 0),nd.set(this,void 0),fr.set(this,void 0),hf.set(this,void 0),pf.set(this,void 0),Vl.set(this,void 0)}[(ay=new WeakMap,Qr=new WeakMap,df=new WeakMap,zr=new WeakMap,Ui=new WeakMap,Qa=new WeakMap,Li=new WeakMap,nd=new WeakMap,fr=new WeakMap,hf=new WeakMap,pf=new WeakMap,Vl=new WeakMap,_n=new WeakSet,Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("event",s=>{const a=n.shift();a?a.resolve(s):e.push(s)}),this.on("end",()=>{r=!0;for(const s of n)s.resolve(void 0);n.length=0}),this.on("abort",s=>{r=!0;for(const a of n)a.reject(s);n.length=0}),this.on("error",s=>{r=!0;for(const a of n)a.reject(s);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((a,l)=>n.push({resolve:a,reject:l})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){const n=new Bi;return n._run(()=>n._fromReadableStream(e)),n}async _fromReadableStream(e,n){const r=n?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),this._connected();const s=Jr.fromReadableStream(e,this.controller);for await(const a of s)ee(this,_n,"m",Ol).call(this,a);if(s.controller.signal?.aborted)throw new Nr;return this._addRun(ee(this,_n,"m",Nl).call(this))}toReadableStream(){return new Jr(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,n,r,s){const a=new Bi;return a._run(()=>a._runToolAssistantStream(e,n,r,{...s,headers:{...s?.headers,"X-Stainless-Helper-Method":"stream"}})),a}async _createToolAssistantStream(e,n,r,s){const a=s?.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort()));const l={...r,stream:!0},u=await e.submitToolOutputs(n,l,{...s,signal:this.controller.signal});this._connected();for await(const f of u)ee(this,_n,"m",Ol).call(this,f);if(u.controller.signal?.aborted)throw new Nr;return this._addRun(ee(this,_n,"m",Nl).call(this))}static createThreadAssistantStream(e,n,r){const s=new Bi;return s._run(()=>s._threadAssistantStream(e,n,{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),s}static createAssistantStream(e,n,r,s){const a=new Bi;return a._run(()=>a._runAssistantStream(e,n,r,{...s,headers:{...s?.headers,"X-Stainless-Helper-Method":"stream"}})),a}currentEvent(){return ee(this,hf,"f")}currentRun(){return ee(this,pf,"f")}currentMessageSnapshot(){return ee(this,zr,"f")}currentRunStepSnapshot(){return ee(this,Vl,"f")}async finalRunSteps(){return await this.done(),Object.values(ee(this,Qr,"f"))}async finalMessages(){return await this.done(),Object.values(ee(this,df,"f"))}async finalRun(){if(await this.done(),!ee(this,Ui,"f"))throw Error("Final run was not received.");return ee(this,Ui,"f")}async _createThreadAssistantStream(e,n,r){const s=r?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort()));const a={...n,stream:!0},l=await e.createAndRun(a,{...r,signal:this.controller.signal});this._connected();for await(const u of l)ee(this,_n,"m",Ol).call(this,u);if(l.controller.signal?.aborted)throw new Nr;return this._addRun(ee(this,_n,"m",Nl).call(this))}async _createAssistantStream(e,n,r,s){const a=s?.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort()));const l={...r,stream:!0},u=await e.create(n,l,{...s,signal:this.controller.signal});this._connected();for await(const f of u)ee(this,_n,"m",Ol).call(this,f);if(u.controller.signal?.aborted)throw new Nr;return this._addRun(ee(this,_n,"m",Nl).call(this))}static accumulateDelta(e,n){for(const[r,s]of Object.entries(n)){if(!e.hasOwnProperty(r)){e[r]=s;continue}let a=e[r];if(a==null){e[r]=s;continue}if(r==="index"||r==="type"){e[r]=s;continue}if(typeof a=="string"&&typeof s=="string")a+=s;else if(typeof a=="number"&&typeof s=="number")a+=s;else if(Fm(a)&&Fm(s))a=this.accumulateDelta(a,s);else if(Array.isArray(a)&&Array.isArray(s)){if(a.every(l=>typeof l=="string"||typeof l=="number")){a.push(...s);continue}for(const l of s){if(!Fm(l))throw new Error(`Expected array delta entry to be an object but got: ${l}`);const u=l.index;if(u==null)throw console.error(l),new Error("Expected array delta entry to have an `index` property");if(typeof u!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${u}`);const f=a[u];f==null?a.push(l):a[u]=this.accumulateDelta(f,l)}continue}else throw Error(`Unhandled record type: ${r}, deltaValue: ${s}, accValue: ${a}`);e[r]=a}return e}_addRun(e){return e}async _threadAssistantStream(e,n,r){return await this._createThreadAssistantStream(n,e,r)}async _runAssistantStream(e,n,r,s){return await this._createAssistantStream(n,e,r,s)}async _runToolAssistantStream(e,n,r,s){return await this._createToolAssistantStream(n,e,r,s)}}Bi=Hl,Ol=function(e){if(!this.ended)switch(je(this,hf,e),ee(this,_n,"m",RS).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":ee(this,_n,"m",MS).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":ee(this,_n,"m",AS).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":ee(this,_n,"m",TS).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},Nl=function(){if(this.ended)throw new Oe("stream has ended, this shouldn't happen");if(!ee(this,Ui,"f"))throw Error("Final run has not been received");return ee(this,Ui,"f")},TS=function(e){const[n,r]=ee(this,_n,"m",NS).call(this,e,ee(this,zr,"f"));je(this,zr,n),ee(this,df,"f")[n.id]=n;for(const s of r){const a=n.content[s.index];a?.type=="text"&&this._emit("textCreated",a.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,n),e.data.delta.content)for(const s of e.data.delta.content){if(s.type=="text"&&s.text){let a=s.text,l=n.content[s.index];if(l&&l.type=="text")this._emit("textDelta",a,l.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(s.index!=ee(this,Qa,"f")){if(ee(this,Li,"f"))switch(ee(this,Li,"f").type){case"text":this._emit("textDone",ee(this,Li,"f").text,ee(this,zr,"f"));break;case"image_file":this._emit("imageFileDone",ee(this,Li,"f").image_file,ee(this,zr,"f"));break}je(this,Qa,s.index)}je(this,Li,n.content[s.index])}break;case"thread.message.completed":case"thread.message.incomplete":if(ee(this,Qa,"f")!==void 0){const s=e.data.content[ee(this,Qa,"f")];if(s)switch(s.type){case"image_file":this._emit("imageFileDone",s.image_file,ee(this,zr,"f"));break;case"text":this._emit("textDone",s.text,ee(this,zr,"f"));break}}ee(this,zr,"f")&&this._emit("messageDone",e.data),je(this,zr,void 0)}},AS=function(e){const n=ee(this,_n,"m",OS).call(this,e);switch(je(this,Vl,n),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":const r=e.data.delta;if(r.step_details&&r.step_details.type=="tool_calls"&&r.step_details.tool_calls&&n.step_details.type=="tool_calls")for(const a of r.step_details.tool_calls)a.index==ee(this,nd,"f")?this._emit("toolCallDelta",a,n.step_details.tool_calls[a.index]):(ee(this,fr,"f")&&this._emit("toolCallDone",ee(this,fr,"f")),je(this,nd,a.index),je(this,fr,n.step_details.tool_calls[a.index]),ee(this,fr,"f")&&this._emit("toolCallCreated",ee(this,fr,"f")));this._emit("runStepDelta",e.data.delta,n);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":je(this,Vl,void 0),e.data.step_details.type=="tool_calls"&&ee(this,fr,"f")&&(this._emit("toolCallDone",ee(this,fr,"f")),je(this,fr,void 0)),this._emit("runStepDone",e.data,n);break}},RS=function(e){ee(this,ay,"f").push(e),this._emit("event",e)},OS=function(e){switch(e.event){case"thread.run.step.created":return ee(this,Qr,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let n=ee(this,Qr,"f")[e.data.id];if(!n)throw Error("Received a RunStepDelta before creation of a snapshot");let r=e.data;if(r.delta){const s=Bi.accumulateDelta(n,r.delta);ee(this,Qr,"f")[e.data.id]=s}return ee(this,Qr,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":ee(this,Qr,"f")[e.data.id]=e.data;break}if(ee(this,Qr,"f")[e.data.id])return ee(this,Qr,"f")[e.data.id];throw new Error("No snapshot available")},NS=function(e,n){let r=[];switch(e.event){case"thread.message.created":return[e.data,r];case"thread.message.delta":if(!n)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let s=e.data;if(s.delta.content)for(const a of s.delta.content)if(a.index in n.content){let l=n.content[a.index];n.content[a.index]=ee(this,_n,"m",IS).call(this,a,l)}else n.content[a.index]=a,r.push(a);return[n,r];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(n)return[n,r];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},IS=function(e,n){return Bi.accumulateDelta(n,e)},MS=function(e){switch(je(this,pf,e.data),e.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":case"thread.run.incomplete":je(this,Ui,e.data),ee(this,fr,"f")&&(this._emit("toolCallDone",ee(this,fr,"f")),je(this,fr,void 0));break}};let S0=class extends Te{constructor(){super(...arguments),this.steps=new GT(this._client)}create(e,n,r){const{include:s,...a}=n;return this._client.post(pe`/threads/${e}/runs`,{query:{include:s},body:a,...r,headers:Se([{"OpenAI-Beta":"assistants=v2"},r?.headers]),stream:n.stream??!1})}retrieve(e,n,r){const{thread_id:s}=n;return this._client.get(pe`/threads/${s}/runs/${e}`,{...r,headers:Se([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}update(e,n,r){const{thread_id:s,...a}=n;return this._client.post(pe`/threads/${s}/runs/${e}`,{body:a,...r,headers:Se([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(e,n={},r){return this._client.getAPIList(pe`/threads/${e}/runs`,Gt,{query:n,...r,headers:Se([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}cancel(e,n,r){const{thread_id:s}=n;return this._client.post(pe`/threads/${s}/runs/${e}/cancel`,{...r,headers:Se([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}async createAndPoll(e,n,r){const s=await this.create(e,n,r);return await this.poll(s.id,{thread_id:e},r)}createAndStream(e,n,r){return Hl.createAssistantStream(e,this._client.beta.threads.runs,n,r)}async poll(e,n,r){const s=Se([r?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":r?.pollIntervalMs?.toString()??void 0}]);for(;;){const{data:a,response:l}=await this.retrieve(e,n,{...r,headers:{...r?.headers,...s}}).withResponse();switch(a.status){case"queued":case"in_progress":case"cancelling":let u=5e3;if(r?.pollIntervalMs)u=r.pollIntervalMs;else{const f=l.headers.get("openai-poll-after-ms");if(f){const d=parseInt(f);isNaN(d)||(u=d)}}await mc(u);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return a}}}stream(e,n,r){return Hl.createAssistantStream(e,this._client.beta.threads.runs,n,r)}submitToolOutputs(e,n,r){const{thread_id:s,...a}=n;return this._client.post(pe`/threads/${s}/runs/${e}/submit_tool_outputs`,{body:a,...r,headers:Se([{"OpenAI-Beta":"assistants=v2"},r?.headers]),stream:n.stream??!1})}async submitToolOutputsAndPoll(e,n,r){const s=await this.submitToolOutputs(e,n,r);return await this.poll(s.id,n,r)}submitToolOutputsStream(e,n,r){return Hl.createToolAssistantStream(e,this._client.beta.threads.runs,n,r)}};S0.Steps=GT;class Nd extends Te{constructor(){super(...arguments),this.runs=new S0(this._client),this.messages=new HT(this._client)}create(e={},n){return this._client.post("/threads",{body:e,...n,headers:Se([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}retrieve(e,n){return this._client.get(pe`/threads/${e}`,{...n,headers:Se([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}update(e,n,r){return this._client.post(pe`/threads/${e}`,{body:n,...r,headers:Se([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}delete(e,n){return this._client.delete(pe`/threads/${e}`,{...n,headers:Se([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}createAndRun(e,n){return this._client.post("/threads/runs",{body:e,...n,headers:Se([{"OpenAI-Beta":"assistants=v2"},n?.headers]),stream:e.stream??!1})}async createAndRunPoll(e,n){const r=await this.createAndRun(e,n);return await this.runs.poll(r.id,{thread_id:r.thread_id},n)}createAndRunStream(e,n){return Hl.createThreadAssistantStream(e,this._client.beta.threads,n)}}Nd.Runs=S0;Nd.Messages=HT;class mo extends Te{constructor(){super(...arguments),this.realtime=new Rd(this._client),this.chatkit=new Od(this._client),this.assistants=new UT(this._client),this.threads=new Nd(this._client)}}mo.Realtime=Rd;mo.ChatKit=Od;mo.Assistants=UT;mo.Threads=Nd;class KT extends Te{create(e,n){return this._client.post("/completions",{body:e,...n,stream:e.stream??!1})}}class ZT extends Te{retrieve(e,n,r){const{container_id:s}=n;return this._client.get(pe`/containers/${s}/files/${e}/content`,{...r,headers:Se([{Accept:"application/binary"},r?.headers]),__binaryResponse:!0})}}let k0=class extends Te{constructor(){super(...arguments),this.content=new ZT(this._client)}create(e,n,r){return this._client.post(pe`/containers/${e}/files`,Fi({body:n,...r},this._client))}retrieve(e,n,r){const{container_id:s}=n;return this._client.get(pe`/containers/${s}/files/${e}`,r)}list(e,n={},r){return this._client.getAPIList(pe`/containers/${e}/files`,Gt,{query:n,...r})}delete(e,n,r){const{container_id:s}=n;return this._client.delete(pe`/containers/${s}/files/${e}`,{...r,headers:Se([{Accept:"*/*"},r?.headers])})}};k0.Content=ZT;class E0 extends Te{constructor(){super(...arguments),this.files=new k0(this._client)}create(e,n){return this._client.post("/containers",{body:e,...n})}retrieve(e,n){return this._client.get(pe`/containers/${e}`,n)}list(e={},n){return this._client.getAPIList("/containers",Gt,{query:e,...n})}delete(e,n){return this._client.delete(pe`/containers/${e}`,{...n,headers:Se([{Accept:"*/*"},n?.headers])})}}E0.Files=k0;class QT extends Te{create(e,n,r){const{include:s,...a}=n;return this._client.post(pe`/conversations/${e}/items`,{query:{include:s},body:a,...r})}retrieve(e,n,r){const{conversation_id:s,...a}=n;return this._client.get(pe`/conversations/${s}/items/${e}`,{query:a,...r})}list(e,n={},r){return this._client.getAPIList(pe`/conversations/${e}/items`,Qf,{query:n,...r})}delete(e,n,r){const{conversation_id:s}=n;return this._client.delete(pe`/conversations/${s}/items/${e}`,r)}}class C0 extends Te{constructor(){super(...arguments),this.items=new QT(this._client)}create(e={},n){return this._client.post("/conversations",{body:e,...n})}retrieve(e,n){return this._client.get(pe`/conversations/${e}`,n)}update(e,n,r){return this._client.post(pe`/conversations/${e}`,{body:n,...r})}delete(e,n){return this._client.delete(pe`/conversations/${e}`,n)}}C0.Items=QT;class JT extends Te{create(e,n){const r=!!e.encoding_format;let s=r?e.encoding_format:"base64";r&&bn(this._client).debug("embeddings/user defined encoding_format:",e.encoding_format);const a=this._client.post("/embeddings",{body:{...e,encoding_format:s},...n});return r?a:(bn(this._client).debug("embeddings/decoding base64 embeddings from base64"),a._thenUnwrap(l=>(l&&l.data&&l.data.forEach(u=>{const f=u.embedding;u.embedding=Q7(f)}),l)))}}class YT extends Te{retrieve(e,n,r){const{eval_id:s,run_id:a}=n;return this._client.get(pe`/evals/${s}/runs/${a}/output_items/${e}`,r)}list(e,n,r){const{eval_id:s,...a}=n;return this._client.getAPIList(pe`/evals/${s}/runs/${e}/output_items`,Gt,{query:a,...r})}}class T0 extends Te{constructor(){super(...arguments),this.outputItems=new YT(this._client)}create(e,n,r){return this._client.post(pe`/evals/${e}/runs`,{body:n,...r})}retrieve(e,n,r){const{eval_id:s}=n;return this._client.get(pe`/evals/${s}/runs/${e}`,r)}list(e,n={},r){return this._client.getAPIList(pe`/evals/${e}/runs`,Gt,{query:n,...r})}delete(e,n,r){const{eval_id:s}=n;return this._client.delete(pe`/evals/${s}/runs/${e}`,r)}cancel(e,n,r){const{eval_id:s}=n;return this._client.post(pe`/evals/${s}/runs/${e}`,r)}}T0.OutputItems=YT;class A0 extends Te{constructor(){super(...arguments),this.runs=new T0(this._client)}create(e,n){return this._client.post("/evals",{body:e,...n})}retrieve(e,n){return this._client.get(pe`/evals/${e}`,n)}update(e,n,r){return this._client.post(pe`/evals/${e}`,{body:n,...r})}list(e={},n){return this._client.getAPIList("/evals",Gt,{query:e,...n})}delete(e,n){return this._client.delete(pe`/evals/${e}`,n)}}A0.Runs=T0;let WT=class extends Te{create(e,n){return this._client.post("/files",Fi({body:e,...n},this._client))}retrieve(e,n){return this._client.get(pe`/files/${e}`,n)}list(e={},n){return this._client.getAPIList("/files",Gt,{query:e,...n})}delete(e,n){return this._client.delete(pe`/files/${e}`,n)}content(e,n){return this._client.get(pe`/files/${e}/content`,{...n,headers:Se([{Accept:"application/binary"},n?.headers]),__binaryResponse:!0})}async waitForProcessing(e,{pollInterval:n=5e3,maxWait:r=1800*1e3}={}){const s=new Set(["processed","error","deleted"]),a=Date.now();let l=await this.retrieve(e);for(;!l.status||!s.has(l.status);)if(await mc(n),l=await this.retrieve(e),Date.now()-a>r)throw new h0({message:`Giving up on waiting for file ${e} to finish processing after ${r} milliseconds.`});return l}};class XT extends Te{}let eA=class extends Te{run(e,n){return this._client.post("/fine_tuning/alpha/graders/run",{body:e,...n})}validate(e,n){return this._client.post("/fine_tuning/alpha/graders/validate",{body:e,...n})}};class R0 extends Te{constructor(){super(...arguments),this.graders=new eA(this._client)}}R0.Graders=eA;class tA extends Te{create(e,n,r){return this._client.getAPIList(pe`/fine_tuning/checkpoints/${e}/permissions`,Ad,{body:n,method:"post",...r})}retrieve(e,n={},r){return this._client.get(pe`/fine_tuning/checkpoints/${e}/permissions`,{query:n,...r})}delete(e,n,r){const{fine_tuned_model_checkpoint:s}=n;return this._client.delete(pe`/fine_tuning/checkpoints/${s}/permissions/${e}`,r)}}let O0=class extends Te{constructor(){super(...arguments),this.permissions=new tA(this._client)}};O0.Permissions=tA;class nA extends Te{list(e,n={},r){return this._client.getAPIList(pe`/fine_tuning/jobs/${e}/checkpoints`,Gt,{query:n,...r})}}class N0 extends Te{constructor(){super(...arguments),this.checkpoints=new nA(this._client)}create(e,n){return this._client.post("/fine_tuning/jobs",{body:e,...n})}retrieve(e,n){return this._client.get(pe`/fine_tuning/jobs/${e}`,n)}list(e={},n){return this._client.getAPIList("/fine_tuning/jobs",Gt,{query:e,...n})}cancel(e,n){return this._client.post(pe`/fine_tuning/jobs/${e}/cancel`,n)}listEvents(e,n={},r){return this._client.getAPIList(pe`/fine_tuning/jobs/${e}/events`,Gt,{query:n,...r})}pause(e,n){return this._client.post(pe`/fine_tuning/jobs/${e}/pause`,n)}resume(e,n){return this._client.post(pe`/fine_tuning/jobs/${e}/resume`,n)}}N0.Checkpoints=nA;class go extends Te{constructor(){super(...arguments),this.methods=new XT(this._client),this.jobs=new N0(this._client),this.checkpoints=new O0(this._client),this.alpha=new R0(this._client)}}go.Methods=XT;go.Jobs=N0;go.Checkpoints=O0;go.Alpha=R0;class rA extends Te{}class I0 extends Te{constructor(){super(...arguments),this.graderModels=new rA(this._client)}}I0.GraderModels=rA;class sA extends Te{createVariation(e,n){return this._client.post("/images/variations",Fi({body:e,...n},this._client))}edit(e,n){return this._client.post("/images/edits",Fi({body:e,...n,stream:e.stream??!1},this._client))}generate(e,n){return this._client.post("/images/generations",{body:e,...n,stream:e.stream??!1})}}class iA extends Te{retrieve(e,n){return this._client.get(pe`/models/${e}`,n)}list(e){return this._client.getAPIList("/models",Ad,e)}delete(e,n){return this._client.delete(pe`/models/${e}`,n)}}class aA extends Te{create(e,n){return this._client.post("/moderations",{body:e,...n})}}class oA extends Te{accept(e,n,r){return this._client.post(pe`/realtime/calls/${e}/accept`,{body:n,...r,headers:Se([{Accept:"*/*"},r?.headers])})}hangup(e,n){return this._client.post(pe`/realtime/calls/${e}/hangup`,{...n,headers:Se([{Accept:"*/*"},n?.headers])})}refer(e,n,r){return this._client.post(pe`/realtime/calls/${e}/refer`,{body:n,...r,headers:Se([{Accept:"*/*"},r?.headers])})}reject(e,n={},r){return this._client.post(pe`/realtime/calls/${e}/reject`,{body:n,...r,headers:Se([{Accept:"*/*"},r?.headers])})}}class lA extends Te{create(e,n){return this._client.post("/realtime/client_secrets",{body:e,...n})}}class Id extends Te{constructor(){super(...arguments),this.clientSecrets=new lA(this._client),this.calls=new oA(this._client)}}Id.ClientSecrets=lA;Id.Calls=oA;function Y7(t,e){return!e||!X7(e)?{...t,output_parsed:null,output:t.output.map(n=>n.type==="function_call"?{...n,parsed_arguments:null}:n.type==="message"?{...n,content:n.content.map(r=>({...r,parsed:null}))}:n)}:cA(t,e)}function cA(t,e){const n=t.output.map(s=>{if(s.type==="function_call")return{...s,parsed_arguments:nF(e,s)};if(s.type==="message"){const a=s.content.map(l=>l.type==="output_text"?{...l,parsed:W7(e,l.text)}:l);return{...s,content:a}}return s}),r=Object.assign({},t,{output:n});return Object.getOwnPropertyDescriptor(t,"output_text")||oy(r),Object.defineProperty(r,"output_parsed",{enumerable:!0,get(){for(const s of r.output)if(s.type==="message"){for(const a of s.content)if(a.type==="output_text"&&a.parsed!==null)return a.parsed}return null}}),r}function W7(t,e){return t.text?.format?.type!=="json_schema"?null:"$parseRaw"in t.text?.format?(t.text?.format).$parseRaw(e):JSON.parse(e)}function X7(t){return!!y0(t.text?.format)}function eF(t){return t?.$brand==="auto-parseable-tool"}function tF(t,e){return t.find(n=>n.type==="function"&&n.name===e)}function nF(t,e){const n=tF(t.tools??[],e.name);return{...e,...e,parsed_arguments:eF(n)?n.$parseRaw(e.arguments):n?.strict?JSON.parse(e.arguments):null}}function oy(t){const e=[];for(const n of t.output)if(n.type==="message")for(const r of n.content)r.type==="output_text"&&e.push(r.text);t.output_text=e.join("")}var Ua,Zu,ti,Qu,DS,jS,LS,zS;class M0 extends _0{constructor(e){super(),Ua.add(this),Zu.set(this,void 0),ti.set(this,void 0),Qu.set(this,void 0),je(this,Zu,e)}static createResponse(e,n,r){const s=new M0(n);return s._run(()=>s._createOrRetrieveResponse(e,n,{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),s}async _createOrRetrieveResponse(e,n,r){const s=r?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),ee(this,Ua,"m",DS).call(this);let a,l=null;"response_id"in n?(a=await e.responses.retrieve(n.response_id,{stream:!0},{...r,signal:this.controller.signal,stream:!0}),l=n.starting_after??null):a=await e.responses.create({...n,stream:!0},{...r,signal:this.controller.signal}),this._connected();for await(const u of a)ee(this,Ua,"m",jS).call(this,u,l);if(a.controller.signal?.aborted)throw new Nr;return ee(this,Ua,"m",LS).call(this)}[(Zu=new WeakMap,ti=new WeakMap,Qu=new WeakMap,Ua=new WeakSet,DS=function(){this.ended||je(this,ti,void 0)},jS=function(n,r){if(this.ended)return;const s=(l,u)=>{(r==null||u.sequence_number>r)&&this._emit(l,u)},a=ee(this,Ua,"m",zS).call(this,n);switch(s("event",n),n.type){case"response.output_text.delta":{const l=a.output[n.output_index];if(!l)throw new Oe(`missing output at index ${n.output_index}`);if(l.type==="message"){const u=l.content[n.content_index];if(!u)throw new Oe(`missing content at index ${n.content_index}`);if(u.type!=="output_text")throw new Oe(`expected content to be 'output_text', got ${u.type}`);s("response.output_text.delta",{...n,snapshot:u.text})}break}case"response.function_call_arguments.delta":{const l=a.output[n.output_index];if(!l)throw new Oe(`missing output at index ${n.output_index}`);l.type==="function_call"&&s("response.function_call_arguments.delta",{...n,snapshot:l.arguments});break}default:s(n.type,n);break}},LS=function(){if(this.ended)throw new Oe("stream has ended, this shouldn't happen");const n=ee(this,ti,"f");if(!n)throw new Oe("request ended without sending any events");je(this,ti,void 0);const r=rF(n,ee(this,Zu,"f"));return je(this,Qu,r),r},zS=function(n){let r=ee(this,ti,"f");if(!r){if(n.type!=="response.created")throw new Oe(`When snapshot hasn't been set yet, expected 'response.created' event, got ${n.type}`);return r=je(this,ti,n.response),r}switch(n.type){case"response.output_item.added":{r.output.push(n.item);break}case"response.content_part.added":{const s=r.output[n.output_index];if(!s)throw new Oe(`missing output at index ${n.output_index}`);const a=s.type,l=n.part;a==="message"&&l.type!=="reasoning_text"?s.content.push(l):a==="reasoning"&&l.type==="reasoning_text"&&(s.content||(s.content=[]),s.content.push(l));break}case"response.output_text.delta":{const s=r.output[n.output_index];if(!s)throw new Oe(`missing output at index ${n.output_index}`);if(s.type==="message"){const a=s.content[n.content_index];if(!a)throw new Oe(`missing content at index ${n.content_index}`);if(a.type!=="output_text")throw new Oe(`expected content to be 'output_text', got ${a.type}`);a.text+=n.delta}break}case"response.function_call_arguments.delta":{const s=r.output[n.output_index];if(!s)throw new Oe(`missing output at index ${n.output_index}`);s.type==="function_call"&&(s.arguments+=n.delta);break}case"response.reasoning_text.delta":{const s=r.output[n.output_index];if(!s)throw new Oe(`missing output at index ${n.output_index}`);if(s.type==="reasoning"){const a=s.content?.[n.content_index];if(!a)throw new Oe(`missing content at index ${n.content_index}`);if(a.type!=="reasoning_text")throw new Oe(`expected content to be 'reasoning_text', got ${a.type}`);a.text+=n.delta}break}case"response.completed":{je(this,ti,n.response);break}}return r},Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("event",s=>{const a=n.shift();a?a.resolve(s):e.push(s)}),this.on("end",()=>{r=!0;for(const s of n)s.resolve(void 0);n.length=0}),this.on("abort",s=>{r=!0;for(const a of n)a.reject(s);n.length=0}),this.on("error",s=>{r=!0;for(const a of n)a.reject(s);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((a,l)=>n.push({resolve:a,reject:l})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();const e=ee(this,Qu,"f");if(!e)throw new Oe("stream ended without producing a ChatCompletion");return e}}function rF(t,e){return Y7(t,e)}class uA extends Te{list(e,n={},r){return this._client.getAPIList(pe`/responses/${e}/input_items`,Gt,{query:n,...r})}}class fA extends Te{count(e={},n){return this._client.post("/responses/input_tokens",{body:e,...n})}}class Md extends Te{constructor(){super(...arguments),this.inputItems=new uA(this._client),this.inputTokens=new fA(this._client)}create(e,n){return this._client.post("/responses",{body:e,...n,stream:e.stream??!1})._thenUnwrap(r=>("object"in r&&r.object==="response"&&oy(r),r))}retrieve(e,n={},r){return this._client.get(pe`/responses/${e}`,{query:n,...r,stream:n?.stream??!1})._thenUnwrap(s=>("object"in s&&s.object==="response"&&oy(s),s))}delete(e,n){return this._client.delete(pe`/responses/${e}`,{...n,headers:Se([{Accept:"*/*"},n?.headers])})}parse(e,n){return this._client.responses.create(e,n)._thenUnwrap(r=>cA(r,e))}stream(e,n){return M0.createResponse(this._client,e,n)}cancel(e,n){return this._client.post(pe`/responses/${e}/cancel`,n)}compact(e,n){return this._client.post("/responses/compact",{body:e,...n})}}Md.InputItems=uA;Md.InputTokens=fA;class dA extends Te{create(e,n,r){return this._client.post(pe`/uploads/${e}/parts`,Fi({body:n,...r},this._client))}}class D0 extends Te{constructor(){super(...arguments),this.parts=new dA(this._client)}create(e,n){return this._client.post("/uploads",{body:e,...n})}cancel(e,n){return this._client.post(pe`/uploads/${e}/cancel`,n)}complete(e,n,r){return this._client.post(pe`/uploads/${e}/complete`,{body:n,...r})}}D0.Parts=dA;const sF=async t=>{const e=await Promise.allSettled(t),n=e.filter(s=>s.status==="rejected");if(n.length){for(const s of n)console.error(s.reason);throw new Error(`${n.length} promise(s) failed - see the above errors`)}const r=[];for(const s of e)s.status==="fulfilled"&&r.push(s.value);return r};class hA extends Te{create(e,n,r){return this._client.post(pe`/vector_stores/${e}/file_batches`,{body:n,...r,headers:Se([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}retrieve(e,n,r){const{vector_store_id:s}=n;return this._client.get(pe`/vector_stores/${s}/file_batches/${e}`,{...r,headers:Se([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}cancel(e,n,r){const{vector_store_id:s}=n;return this._client.post(pe`/vector_stores/${s}/file_batches/${e}/cancel`,{...r,headers:Se([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}async createAndPoll(e,n,r){const s=await this.create(e,n);return await this.poll(e,s.id,r)}listFiles(e,n,r){const{vector_store_id:s,...a}=n;return this._client.getAPIList(pe`/vector_stores/${s}/file_batches/${e}/files`,Gt,{query:a,...r,headers:Se([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}async poll(e,n,r){const s=Se([r?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":r?.pollIntervalMs?.toString()??void 0}]);for(;;){const{data:a,response:l}=await this.retrieve(n,{vector_store_id:e},{...r,headers:s}).withResponse();switch(a.status){case"in_progress":let u=5e3;if(r?.pollIntervalMs)u=r.pollIntervalMs;else{const f=l.headers.get("openai-poll-after-ms");if(f){const d=parseInt(f);isNaN(d)||(u=d)}}await mc(u);break;case"failed":case"cancelled":case"completed":return a}}}async uploadAndPoll(e,{files:n,fileIds:r=[]},s){if(n==null||n.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const a=s?.maxConcurrency??5,l=Math.min(a,n.length),u=this._client,f=n.values(),d=[...r];async function m(y){for(let g of y){const v=await u.files.create({file:g,purpose:"assistants"},s);d.push(v.id)}}const p=Array(l).fill(f).map(m);return await sF(p),await this.createAndPoll(e,{file_ids:d})}}class pA extends Te{create(e,n,r){return this._client.post(pe`/vector_stores/${e}/files`,{body:n,...r,headers:Se([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}retrieve(e,n,r){const{vector_store_id:s}=n;return this._client.get(pe`/vector_stores/${s}/files/${e}`,{...r,headers:Se([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}update(e,n,r){const{vector_store_id:s,...a}=n;return this._client.post(pe`/vector_stores/${s}/files/${e}`,{body:a,...r,headers:Se([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(e,n={},r){return this._client.getAPIList(pe`/vector_stores/${e}/files`,Gt,{query:n,...r,headers:Se([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}delete(e,n,r){const{vector_store_id:s}=n;return this._client.delete(pe`/vector_stores/${s}/files/${e}`,{...r,headers:Se([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}async createAndPoll(e,n,r){const s=await this.create(e,n,r);return await this.poll(e,s.id,r)}async poll(e,n,r){const s=Se([r?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":r?.pollIntervalMs?.toString()??void 0}]);for(;;){const a=await this.retrieve(n,{vector_store_id:e},{...r,headers:s}).withResponse(),l=a.data;switch(l.status){case"in_progress":let u=5e3;if(r?.pollIntervalMs)u=r.pollIntervalMs;else{const f=a.response.headers.get("openai-poll-after-ms");if(f){const d=parseInt(f);isNaN(d)||(u=d)}}await mc(u);break;case"failed":case"completed":return l}}}async upload(e,n,r){const s=await this._client.files.create({file:n,purpose:"assistants"},r);return this.create(e,{file_id:s.id},r)}async uploadAndPoll(e,n,r){const s=await this.upload(e,n,r);return await this.poll(e,s.id,r)}content(e,n,r){const{vector_store_id:s}=n;return this._client.getAPIList(pe`/vector_stores/${s}/files/${e}/content`,Ad,{...r,headers:Se([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}}class Dd extends Te{constructor(){super(...arguments),this.files=new pA(this._client),this.fileBatches=new hA(this._client)}create(e,n){return this._client.post("/vector_stores",{body:e,...n,headers:Se([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}retrieve(e,n){return this._client.get(pe`/vector_stores/${e}`,{...n,headers:Se([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}update(e,n,r){return this._client.post(pe`/vector_stores/${e}`,{body:n,...r,headers:Se([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(e={},n){return this._client.getAPIList("/vector_stores",Gt,{query:e,...n,headers:Se([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}delete(e,n){return this._client.delete(pe`/vector_stores/${e}`,{...n,headers:Se([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}search(e,n,r){return this._client.getAPIList(pe`/vector_stores/${e}/search`,Ad,{body:n,method:"post",...r,headers:Se([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}}Dd.Files=pA;Dd.FileBatches=hA;class mA extends Te{create(e,n){return this._client.post("/videos",wS({body:e,...n},this._client))}retrieve(e,n){return this._client.get(pe`/videos/${e}`,n)}list(e={},n){return this._client.getAPIList("/videos",Qf,{query:e,...n})}delete(e,n){return this._client.delete(pe`/videos/${e}`,n)}downloadContent(e,n={},r){return this._client.get(pe`/videos/${e}/content`,{query:n,...r,headers:Se([{Accept:"application/binary"},r?.headers]),__binaryResponse:!0})}remix(e,n,r){return this._client.post(pe`/videos/${e}/remix`,wS({body:n,...r},this._client))}}var Va,gA,mf;class yA extends Te{constructor(){super(...arguments),Va.add(this)}async unwrap(e,n,r=this._client.webhookSecret,s=300){return await this.verifySignature(e,n,r,s),JSON.parse(e)}async verifySignature(e,n,r=this._client.webhookSecret,s=300){if(typeof crypto>"u"||typeof crypto.subtle.importKey!="function"||typeof crypto.subtle.verify!="function")throw new Error("Webhook signature verification is only supported when the `crypto` global is defined");ee(this,Va,"m",gA).call(this,r);const a=Se([n]).values,l=ee(this,Va,"m",mf).call(this,a,"webhook-signature"),u=ee(this,Va,"m",mf).call(this,a,"webhook-timestamp"),f=ee(this,Va,"m",mf).call(this,a,"webhook-id"),d=parseInt(u,10);if(isNaN(d))throw new Sl("Invalid webhook timestamp format");const m=Math.floor(Date.now()/1e3);if(m-d>s)throw new Sl("Webhook timestamp is too old");if(d>m+s)throw new Sl("Webhook timestamp is too new");const p=l.split(" ").map(w=>w.startsWith("v1,")?w.substring(3):w),y=r.startsWith("whsec_")?Buffer.from(r.replace("whsec_",""),"base64"):Buffer.from(r,"utf-8"),g=f?`${f}.${u}.${e}`:`${u}.${e}`,v=await crypto.subtle.importKey("raw",y,{name:"HMAC",hash:"SHA-256"},!1,["verify"]);for(const w of p)try{const E=Buffer.from(w,"base64");if(await crypto.subtle.verify("HMAC",v,E,new TextEncoder().encode(g)))return}catch{continue}throw new Sl("The given webhook signature does not match the expected signature")}}Va=new WeakSet,gA=function(e){if(typeof e!="string"||e.length===0)throw new Error("The webhook secret must either be set using the env var, OPENAI_WEBHOOK_SECRET, on the client class, OpenAI({ webhookSecret: '123' }), or passed to this function")},mf=function(e,n){if(!e)throw new Error("Headers are required");const r=e.get(n);if(r==null)throw new Error(`Missing required header: ${n}`);return r};var ly,j0,gf,bA;class Fe{constructor({baseURL:e=Ba("OPENAI_BASE_URL"),apiKey:n=Ba("OPENAI_API_KEY"),organization:r=Ba("OPENAI_ORG_ID")??null,project:s=Ba("OPENAI_PROJECT_ID")??null,webhookSecret:a=Ba("OPENAI_WEBHOOK_SECRET")??null,...l}={}){if(ly.add(this),gf.set(this,void 0),this.completions=new KT(this),this.chat=new w0(this),this.embeddings=new JT(this),this.files=new WT(this),this.images=new sA(this),this.audio=new yc(this),this.moderations=new aA(this),this.models=new iA(this),this.fineTuning=new go(this),this.graders=new I0(this),this.vectorStores=new Dd(this),this.webhooks=new yA(this),this.beta=new mo(this),this.batches=new BT(this),this.uploads=new D0(this),this.responses=new Md(this),this.realtime=new Id(this),this.conversations=new C0(this),this.evals=new A0(this),this.containers=new E0(this),this.videos=new mA(this),n===void 0)throw new Oe("Missing credentials. Please pass an `apiKey`, or set the `OPENAI_API_KEY` environment variable.");const u={apiKey:n,organization:r,project:s,webhookSecret:a,...l,baseURL:e||"https://api.openai.com/v1"};if(!u.dangerouslyAllowBrowser&&i7())throw new Oe(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);this.baseURL=u.baseURL,this.timeout=u.timeout??j0.DEFAULT_TIMEOUT,this.logger=u.logger??console;const f="warn";this.logLevel=f,this.logLevel=vS(u.logLevel,"ClientOptions.logLevel",this)??vS(Ba("OPENAI_LOG"),"process.env['OPENAI_LOG']",this)??f,this.fetchOptions=u.fetchOptions,this.maxRetries=u.maxRetries??2,this.fetch=u.fetch??u7(),je(this,gf,d7),this._options=u,this.apiKey=typeof n=="string"?n:"Missing Key",this.organization=r,this.project=s,this.webhookSecret=a}withOptions(e){return new this.constructor({...this._options,baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,organization:this.organization,project:this.project,webhookSecret:this.webhookSecret,...e})}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){}async authHeaders(e){return Se([{Authorization:`Bearer ${this.apiKey}`}])}stringifyQuery(e){return b7(e,{arrayFormat:"brackets"})}getUserAgent(){return`${this.constructor.name}/JS ${qa}`}defaultIdempotencyKey(){return`stainless-node-retry-${$C()}`}makeStatusError(e,n,r,s){return vn.generate(e,n,r,s)}async _callApiKey(){const e=this._options.apiKey;if(typeof e!="function")return!1;let n;try{n=await e()}catch(r){throw r instanceof Oe?r:new Oe(`Failed to get token from 'apiKey' function: ${r.message}`,{cause:r})}if(typeof n!="string"||!n)throw new Oe(`Expected 'apiKey' function argument to return a string but it returned ${n}`);return this.apiKey=n,!0}buildURL(e,n,r){const s=!ee(this,ly,"m",bA).call(this)&&r||this.baseURL,a=e7(e)?new URL(e):new URL(s+(s.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),l=this.defaultQuery();return t7(l)||(n={...l,...n}),typeof n=="object"&&n&&!Array.isArray(n)&&(a.search=this.stringifyQuery(n)),a.toString()}async prepareOptions(e){await this._callApiKey()}async prepareRequest(e,{url:n,options:r}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,r){return this.request(Promise.resolve(r).then(s=>({method:e,path:n,...s})))}request(e,n=null){return new Td(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,r){const s=await e,a=s.maxRetries??this.maxRetries;n==null&&(n=a),await this.prepareOptions(s);const{req:l,url:u,timeout:f}=await this.buildRequest(s,{retryCount:a-n});await this.prepareRequest(l,{url:u,options:s});const d="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),m=r===void 0?"":`, retryOf: ${r}`,p=Date.now();if(bn(this).debug(`[${d}] sending request`,ji({retryOfRequestLogID:r,method:s.method,url:u,options:s,headers:l.headers})),s.signal?.aborted)throw new Nr;const y=new AbortController,g=await this.fetchWithTimeout(u,l,f,y).catch(Jg),v=Date.now();if(g instanceof globalThis.Error){const S=`retrying, ${n} attempts remaining`;if(s.signal?.aborted)throw new Nr;const C=Qg(g)||/timed? ?out/i.test(String(g)+("cause"in g?String(g.cause):""));if(n)return bn(this).info(`[${d}] connection ${C?"timed out":"failed"} - ${S}`),bn(this).debug(`[${d}] connection ${C?"timed out":"failed"} (${S})`,ji({retryOfRequestLogID:r,url:u,durationMs:v-p,message:g.message})),this.retryRequest(s,n,r??d);throw bn(this).info(`[${d}] connection ${C?"timed out":"failed"} - error; no more retries left`),bn(this).debug(`[${d}] connection ${C?"timed out":"failed"} (error; no more retries left)`,ji({retryOfRequestLogID:r,url:u,durationMs:v-p,message:g.message})),C?new h0:new Ed({cause:g})}const w=[...g.headers.entries()].filter(([S])=>S==="x-request-id").map(([S,C])=>", "+S+": "+JSON.stringify(C)).join(""),E=`[${d}${m}${w}] ${l.method} ${u} ${g.ok?"succeeded":"failed"} with status ${g.status} in ${v-p}ms`;if(!g.ok){const S=await this.shouldRetry(g);if(n&&S){const U=`retrying, ${n} attempts remaining`;return await f7(g.body),bn(this).info(`${E} - ${U}`),bn(this).debug(`[${d}] response error (${U})`,ji({retryOfRequestLogID:r,url:g.url,status:g.status,headers:g.headers,durationMs:v-p})),this.retryRequest(s,n,r??d,g.headers)}const C=S?"error; no more retries left":"error; not retryable";bn(this).info(`${E} - ${C}`);const T=await g.text().catch(U=>Jg(U).message),M=s7(T),I=M?void 0:T;throw bn(this).debug(`[${d}] response error (${C})`,ji({retryOfRequestLogID:r,url:g.url,status:g.status,headers:g.headers,message:I,durationMs:Date.now()-p})),this.makeStatusError(g.status,M,I,g.headers)}return bn(this).info(E),bn(this).debug(`[${d}] response start`,ji({retryOfRequestLogID:r,url:g.url,status:g.status,headers:g.headers,durationMs:v-p})),{response:g,options:s,controller:y,requestLogID:d,retryOfRequestLogID:r,startTime:p}}getAPIList(e,n,r){return this.requestAPIList(n,{method:"get",path:e,...r})}requestAPIList(e,n){const r=this.makeRequest(n,null,void 0);return new T7(this,r,e)}async fetchWithTimeout(e,n,r,s){const{signal:a,method:l,...u}=n||{};a&&a.addEventListener("abort",()=>s.abort());const f=setTimeout(()=>s.abort(),r),d=globalThis.ReadableStream&&u.body instanceof globalThis.ReadableStream||typeof u.body=="object"&&u.body!==null&&Symbol.asyncIterator in u.body,m={signal:s.signal,...d?{duplex:"half"}:{},method:"GET",...u};l&&(m.method=l.toUpperCase());try{return await this.fetch.call(void 0,e,m)}finally{clearTimeout(f)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,r,s){let a;const l=s?.get("retry-after-ms");if(l){const f=parseFloat(l);Number.isNaN(f)||(a=f)}const u=s?.get("retry-after");if(u&&!a){const f=parseFloat(u);Number.isNaN(f)?a=Date.parse(u)-Date.now():a=f*1e3}if(!(a&&0<=a&&a<60*1e3)){const f=e.maxRetries??this.maxRetries;a=this.calculateDefaultRetryTimeoutMillis(n,f)}return await mc(a),this.makeRequest(e,n-1,r)}calculateDefaultRetryTimeoutMillis(e,n){const a=n-e,l=Math.min(.5*Math.pow(2,a),8),u=1-Math.random()*.25;return l*u*1e3}async buildRequest(e,{retryCount:n=0}={}){const r={...e},{method:s,path:a,query:l,defaultBaseURL:u}=r,f=this.buildURL(a,l,u);"timeout"in r&&r7("timeout",r.timeout),r.timeout=r.timeout??this.timeout;const{bodyHeaders:d,body:m}=this.buildBody({options:r}),p=await this.buildHeaders({options:e,method:s,bodyHeaders:d,retryCount:n});return{req:{method:s,headers:p,...r.signal&&{signal:r.signal},...globalThis.ReadableStream&&m instanceof globalThis.ReadableStream&&{duplex:"half"},...m&&{body:m},...this.fetchOptions??{},...r.fetchOptions??{}},url:f,timeout:r.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:r,retryCount:s}){let a={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),a[this.idempotencyHeader]=e.idempotencyKey);const l=Se([a,{Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(s),...e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{},...c7(),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project},await this.authHeaders(e),this._options.defaultHeaders,r,e.headers]);return this.validateHeaders(l),l.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const r=Se([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&r.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:eT(e)}:ee(this,gf,"f").call(this,{body:e,headers:r})}}j0=Fe,gf=new WeakMap,ly=new WeakSet,bA=function(){return this.baseURL!=="https://api.openai.com/v1"};Fe.OpenAI=j0;Fe.DEFAULT_TIMEOUT=6e5;Fe.OpenAIError=Oe;Fe.APIError=vn;Fe.APIConnectionError=Ed;Fe.APIConnectionTimeoutError=h0;Fe.APIUserAbortError=Nr;Fe.NotFoundError=HC;Fe.ConflictError=GC;Fe.RateLimitError=ZC;Fe.BadRequestError=qC;Fe.AuthenticationError=FC;Fe.InternalServerError=QC;Fe.PermissionDeniedError=VC;Fe.UnprocessableEntityError=KC;Fe.InvalidWebhookSignatureError=Sl;Fe.toFile=I7;Fe.Completions=KT;Fe.Chat=w0;Fe.Embeddings=JT;Fe.Files=WT;Fe.Images=sA;Fe.Audio=yc;Fe.Moderations=aA;Fe.Models=iA;Fe.FineTuning=go;Fe.Graders=I0;Fe.VectorStores=Dd;Fe.Webhooks=yA;Fe.Beta=mo;Fe.Batches=BT;Fe.Uploads=D0;Fe.Responses=Md;Fe.Realtime=Id;Fe.Conversations=C0;Fe.Evals=A0;Fe.Containers=E0;Fe.Videos=mA;class iF extends Fe{constructor(e){super({...e,dangerouslyAllowBrowser:!0})}}function aF(t){return new iF({apiKey:t.apiKey,organization:t.organization,baseURL:t.baseURL})}function oF(t){return`${t}-${Date.now()}-${Math.random().toString(36).substring(7)}`}class lF extends j9{constructor(e,n){super({},n),this.kind="text",this.name="openai",this.client=aF(e)}async*chatStream(e){const n=new Map,r=this.mapTextOptionsToOpenAI(e);try{const s=await this.client.responses.create({...r,stream:!0},{headers:e.request?.headers,signal:e.request?.signal});yield*this.processOpenAIStreamChunks(s,n,e,()=>oF(this.name))}catch(s){const a=s;throw console.error(">>> chatStream: Fatal error during response creation <<<"),console.error(">>> Error message:",a.message),console.error(">>> Error stack:",a.stack),console.error(">>> Full error:",a),s}}async structuredOutput(e){const{chatOptions:n,outputSchema:r}=e,s=this.mapTextOptionsToOpenAI(n),a=ql(r,r.required||[]);try{const l=await this.client.responses.create({...s,stream:!1,text:{format:{type:"json_schema",name:"structured_output",schema:a,strict:!0}}},{headers:n.request?.headers,signal:n.request?.signal}),u=this.extractTextFromResponse(l);let f;try{f=JSON.parse(u)}catch{throw new Error(`Failed to parse structured output as JSON. Content: ${u.slice(0,200)}${u.length>200?"...":""}`)}return{data:Zg(f),rawText:u}}catch(l){const u=l;throw console.error(">>> structuredOutput: Error during response creation <<<"),console.error(">>> Error message:",u.message),l}}extractTextFromResponse(e){let n="";for(const r of e.output)if(r.type==="message")for(const s of r.content)s.type==="output_text"&&(n+=s.text);return n}async*processOpenAIStreamChunks(e,n,r,s){let a="",l="";const u=Date.now();let f=0,d=!1,m=!1,p=null,y=r.model;try{for await(const g of e){f++;const v=w=>w.type==="output_text"?(a+=w.text,{type:"content",id:p||s(),model:y||r.model,timestamp:u,delta:w.text,content:a,role:"assistant"}):w.type==="reasoning_text"?(l+=w.text,{type:"thinking",id:p||s(),model:y||r.model,timestamp:u,delta:w.text,content:l}):{type:"error",id:p||s(),model:y||r.model,timestamp:u,error:{message:w.refusal}};if((g.type==="response.created"||g.type==="response.incomplete"||g.type==="response.failed")&&(p=g.response.id,y=g.response.model,d=!1,m=!1,a="",l="",g.response.error&&(yield{type:"error",id:g.response.id,model:g.response.model,timestamp:u,error:g.response.error}),g.response.incomplete_details&&(yield{type:"error",id:g.response.id,model:g.response.model,timestamp:u,error:{message:g.response.incomplete_details.reason??""}})),g.type==="response.output_text.delta"&&g.delta){const w=Array.isArray(g.delta)?g.delta.join(""):typeof g.delta=="string"?g.delta:"";w&&(a+=w,d=!0,yield{type:"content",id:p||s(),model:y||r.model,timestamp:u,delta:w,content:a,role:"assistant"})}if(g.type==="response.reasoning_text.delta"&&g.delta){const w=Array.isArray(g.delta)?g.delta.join(""):typeof g.delta=="string"?g.delta:"";w&&(l+=w,m=!0,yield{type:"thinking",id:p||s(),model:y||r.model,timestamp:u,delta:w,content:l})}if(g.type==="response.reasoning_summary_text.delta"&&g.delta){const w=typeof g.delta=="string"?g.delta:"";w&&(l+=w,m=!0,yield{type:"thinking",id:p||s(),model:y||r.model,timestamp:u,delta:w,content:l})}if(g.type==="response.content_part.added"){const w=g.part;yield v(w)}if(g.type==="response.content_part.done"){const w=g.part;if(w.type==="output_text"&&d||w.type==="reasoning_text"&&m)continue;yield v(w)}if(g.type==="response.output_item.added"){const w=g.item;w.type==="function_call"&&w.id&&(n.has(w.id)||n.set(w.id,{index:g.output_index,name:w.name||""}))}if(g.type==="response.function_call_arguments.done"){const{item_id:w,output_index:E}=g,C=n.get(w)?.name||"";yield{type:"tool_call",id:p||s(),model:y||r.model,timestamp:u,index:E,toolCall:{id:w,type:"function",function:{name:C,arguments:g.arguments}}}}if(g.type==="response.completed"){const w=g.response.output.some(E=>E.type==="function_call");yield{type:"done",id:p||s(),model:y||r.model,timestamp:u,usage:{promptTokens:g.response.usage?.input_tokens||0,completionTokens:g.response.usage?.output_tokens||0,totalTokens:g.response.usage?.total_tokens||0},finishReason:w?"tool_calls":"stop"}}g.type==="error"&&(yield{type:"error",id:p||s(),model:y||r.model,timestamp:u,error:{message:g.message,code:g.code??void 0}})}}catch(g){const v=g;console.log("[OpenAI Adapter] Stream ended with error. Event type summary:",{totalChunks:f,error:v.message}),yield{type:"error",id:s(),model:r.model,timestamp:u,error:{message:v.message||"Unknown error occurred",code:v.code}}}}mapTextOptionsToOpenAI(e){const n=e.modelOptions,r=this.convertMessagesToInput(e.messages);n&&z9({...n,model:e.model});const s=e.tools?W9(e.tools):void 0;return{model:e.model,temperature:e.temperature,max_output_tokens:e.maxTokens,top_p:e.topP,metadata:e.metadata,instructions:e.systemPrompts?.join(`
`),...n,input:r,tools:s}}convertMessagesToInput(e){const n=[];for(const r of e){if(r.role==="tool"){n.push({type:"function_call_output",call_id:r.toolCallId||"",output:typeof r.content=="string"?r.content:JSON.stringify(r.content)});continue}if(r.role==="assistant"){if(r.toolCalls&&r.toolCalls.length>0)for(const l of r.toolCalls){const u=typeof l.function.arguments=="string"?l.function.arguments:JSON.stringify(l.function.arguments);n.push({type:"function_call",call_id:l.id,name:l.function.name,arguments:u})}if(r.content){const l=this.extractTextContent(r.content);l&&n.push({type:"message",role:"assistant",content:l})}continue}const s=this.normalizeContent(r.content),a=[];for(const l of s)a.push(this.convertContentPartToOpenAI(l));a.length===0&&a.push({type:"input_text",text:""}),n.push({type:"message",role:"user",content:a})}return n}convertContentPartToOpenAI(e){switch(e.type){case"text":return{type:"input_text",text:e.content};case"image":{const n=e.metadata;return e.source.type==="url"?{type:"input_image",image_url:e.source.value,detail:n?.detail||"auto"}:{type:"input_image",image_url:e.source.value,detail:n?.detail||"auto"}}case"audio":return e.source.type==="url"?{type:"input_file",file_url:e.source.value}:{type:"input_file",file_data:e.source.value};default:throw new Error(`Unsupported content part type: ${e.type}`)}}normalizeContent(e){return e===null?[]:typeof e=="string"?[{type:"text",content:e}]:e}extractTextContent(e){return e===null?"":typeof e=="string"?e:e.filter(n=>n.type==="text").map(n=>n.content).join("")}}function cF(t){const e=`${window.location.origin}/openai/v1`;return new lF({apiKey:"not-needed",baseURL:e},t)}function uF(){return Ly().ai?.model||"gpt-5.1"}function de(t,e,n){function r(u,f){if(u._zod||Object.defineProperty(u,"_zod",{value:{def:f,constr:l,traits:new Set},enumerable:!1}),u._zod.traits.has(t))return;u._zod.traits.add(t),e(u,f);const d=l.prototype,m=Object.keys(d);for(let p=0;p<m.length;p++){const y=m[p];y in u||(u[y]=d[y].bind(u))}}const s=n?.Parent??Object;class a extends s{}Object.defineProperty(a,"name",{value:t});function l(u){var f;const d=n?.Parent?new a:this;r(d,u),(f=d._zod).deferred??(f.deferred=[]);for(const m of d._zod.deferred)m();return d}return Object.defineProperty(l,"init",{value:r}),Object.defineProperty(l,Symbol.hasInstance,{value:u=>n?.Parent&&u instanceof n.Parent?!0:u?._zod?.traits?.has(t)}),Object.defineProperty(l,"name",{value:t}),l}class to extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class _A extends Error{constructor(e){super(`Encountered unidirectional transform during encode: ${e}`),this.name="ZodEncodeError"}}const vA={};function Vi(t){return vA}function xA(t){const e=Object.values(t).filter(r=>typeof r=="number");return Object.entries(t).filter(([r,s])=>e.indexOf(+r)===-1).map(([r,s])=>s)}function cy(t,e){return typeof e=="bigint"?e.toString():e}function L0(t){return{get value(){{const e=t();return Object.defineProperty(this,"value",{value:e}),e}}}}function z0(t){return t==null}function P0(t){const e=t.startsWith("^")?1:0,n=t.endsWith("$")?t.length-1:t.length;return t.slice(e,n)}const PS=Symbol("evaluating");function pt(t,e,n){let r;Object.defineProperty(t,e,{get(){if(r!==PS)return r===void 0&&(r=PS,r=n()),r},set(s){Object.defineProperty(t,e,{value:s})},configurable:!0})}function Qi(t,e,n){Object.defineProperty(t,e,{value:n,writable:!0,enumerable:!0,configurable:!0})}function ui(...t){const e={};for(const n of t){const r=Object.getOwnPropertyDescriptors(n);Object.assign(e,r)}return Object.defineProperties({},e)}function BS(t){return JSON.stringify(t)}function fF(t){return t.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"")}const wA="captureStackTrace"in Error?Error.captureStackTrace:(...t)=>{};function rd(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)}const dF=L0(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{const t=Function;return new t(""),!0}catch{return!1}});function sc(t){if(rd(t)===!1)return!1;const e=t.constructor;if(e===void 0||typeof e!="function")return!0;const n=e.prototype;return!(rd(n)===!1||Object.prototype.hasOwnProperty.call(n,"isPrototypeOf")===!1)}function SA(t){return sc(t)?{...t}:Array.isArray(t)?[...t]:t}const hF=new Set(["string","number","symbol"]);function jd(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function fi(t,e,n){const r=new t._zod.constr(e??t._zod.def);return(!e||n?.parent)&&(r._zod.parent=t),r}function Le(t){const e=t;if(!e)return{};if(typeof e=="string")return{error:()=>e};if(e?.message!==void 0){if(e?.error!==void 0)throw new Error("Cannot specify both `message` and `error` params");e.error=e.message}return delete e.message,typeof e.error=="string"?{...e,error:()=>e.error}:e}function pF(t){return Object.keys(t).filter(e=>t[e]._zod.optin==="optional"&&t[e]._zod.optout==="optional")}function mF(t,e){const n=t._zod.def,r=n.checks;if(r&&r.length>0)throw new Error(".pick() cannot be used on object schemas containing refinements");const a=ui(t._zod.def,{get shape(){const l={};for(const u in e){if(!(u in n.shape))throw new Error(`Unrecognized key: "${u}"`);e[u]&&(l[u]=n.shape[u])}return Qi(this,"shape",l),l},checks:[]});return fi(t,a)}function gF(t,e){const n=t._zod.def,r=n.checks;if(r&&r.length>0)throw new Error(".omit() cannot be used on object schemas containing refinements");const a=ui(t._zod.def,{get shape(){const l={...t._zod.def.shape};for(const u in e){if(!(u in n.shape))throw new Error(`Unrecognized key: "${u}"`);e[u]&&delete l[u]}return Qi(this,"shape",l),l},checks:[]});return fi(t,a)}function yF(t,e){if(!sc(e))throw new Error("Invalid input to extend: expected a plain object");const n=t._zod.def.checks;if(n&&n.length>0){const a=t._zod.def.shape;for(const l in e)if(Object.getOwnPropertyDescriptor(a,l)!==void 0)throw new Error("Cannot overwrite keys on object schemas containing refinements. Use `.safeExtend()` instead.")}const s=ui(t._zod.def,{get shape(){const a={...t._zod.def.shape,...e};return Qi(this,"shape",a),a}});return fi(t,s)}function bF(t,e){if(!sc(e))throw new Error("Invalid input to safeExtend: expected a plain object");const n=ui(t._zod.def,{get shape(){const r={...t._zod.def.shape,...e};return Qi(this,"shape",r),r}});return fi(t,n)}function _F(t,e){const n=ui(t._zod.def,{get shape(){const r={...t._zod.def.shape,...e._zod.def.shape};return Qi(this,"shape",r),r},get catchall(){return e._zod.def.catchall},checks:[]});return fi(t,n)}function vF(t,e,n){const s=e._zod.def.checks;if(s&&s.length>0)throw new Error(".partial() cannot be used on object schemas containing refinements");const l=ui(e._zod.def,{get shape(){const u=e._zod.def.shape,f={...u};if(n)for(const d in n){if(!(d in u))throw new Error(`Unrecognized key: "${d}"`);n[d]&&(f[d]=t?new t({type:"optional",innerType:u[d]}):u[d])}else for(const d in u)f[d]=t?new t({type:"optional",innerType:u[d]}):u[d];return Qi(this,"shape",f),f},checks:[]});return fi(e,l)}function xF(t,e,n){const r=ui(e._zod.def,{get shape(){const s=e._zod.def.shape,a={...s};if(n)for(const l in n){if(!(l in a))throw new Error(`Unrecognized key: "${l}"`);n[l]&&(a[l]=new t({type:"nonoptional",innerType:s[l]}))}else for(const l in s)a[l]=new t({type:"nonoptional",innerType:s[l]});return Qi(this,"shape",a),a}});return fi(e,r)}function Ja(t,e=0){if(t.aborted===!0)return!0;for(let n=e;n<t.issues.length;n++)if(t.issues[n]?.continue!==!0)return!0;return!1}function kA(t,e){return e.map(n=>{var r;return(r=n).path??(r.path=[]),n.path.unshift(t),n})}function Ju(t){return typeof t=="string"?t:t?.message}function Hi(t,e,n){const r={...t,path:t.path??[]};if(!t.message){const s=Ju(t.inst?._zod.def?.error?.(t))??Ju(e?.error?.(t))??Ju(n.customError?.(t))??Ju(n.localeError?.(t))??"Invalid input";r.message=s}return delete r.inst,delete r.continue,e?.reportInput||delete r.input,r}function B0(t){return Array.isArray(t)?"array":typeof t=="string"?"string":"unknown"}function ic(...t){const[e,n,r]=t;return typeof e=="string"?{message:e,code:"custom",input:n,inst:r}:{...e}}const EA=(t,e)=>{t.name="$ZodError",Object.defineProperty(t,"_zod",{value:t._zod,enumerable:!1}),Object.defineProperty(t,"issues",{value:e,enumerable:!1}),t.message=JSON.stringify(e,cy,2),Object.defineProperty(t,"toString",{value:()=>t.message,enumerable:!1})},CA=de("$ZodError",EA),TA=de("$ZodError",EA,{Parent:Error});function wF(t,e=n=>n.message){const n={},r=[];for(const s of t.issues)s.path.length>0?(n[s.path[0]]=n[s.path[0]]||[],n[s.path[0]].push(e(s))):r.push(e(s));return{formErrors:r,fieldErrors:n}}function SF(t,e=n=>n.message){const n={_errors:[]},r=s=>{for(const a of s.issues)if(a.code==="invalid_union"&&a.errors.length)a.errors.map(l=>r({issues:l}));else if(a.code==="invalid_key")r({issues:a.issues});else if(a.code==="invalid_element")r({issues:a.issues});else if(a.path.length===0)n._errors.push(e(a));else{let l=n,u=0;for(;u<a.path.length;){const f=a.path[u];u===a.path.length-1?(l[f]=l[f]||{_errors:[]},l[f]._errors.push(e(a))):l[f]=l[f]||{_errors:[]},l=l[f],u++}}};return r(t),n}const U0=t=>(e,n,r,s)=>{const a=r?Object.assign(r,{async:!1}):{async:!1},l=e._zod.run({value:n,issues:[]},a);if(l instanceof Promise)throw new to;if(l.issues.length){const u=new(s?.Err??t)(l.issues.map(f=>Hi(f,a,Vi())));throw wA(u,s?.callee),u}return l.value},$0=t=>async(e,n,r,s)=>{const a=r?Object.assign(r,{async:!0}):{async:!0};let l=e._zod.run({value:n,issues:[]},a);if(l instanceof Promise&&(l=await l),l.issues.length){const u=new(s?.Err??t)(l.issues.map(f=>Hi(f,a,Vi())));throw wA(u,s?.callee),u}return l.value},Ld=t=>(e,n,r)=>{const s=r?{...r,async:!1}:{async:!1},a=e._zod.run({value:n,issues:[]},s);if(a instanceof Promise)throw new to;return a.issues.length?{success:!1,error:new(t??CA)(a.issues.map(l=>Hi(l,s,Vi())))}:{success:!0,data:a.value}},kF=Ld(TA),zd=t=>async(e,n,r)=>{const s=r?Object.assign(r,{async:!0}):{async:!0};let a=e._zod.run({value:n,issues:[]},s);return a instanceof Promise&&(a=await a),a.issues.length?{success:!1,error:new t(a.issues.map(l=>Hi(l,s,Vi())))}:{success:!0,data:a.value}},EF=zd(TA),CF=t=>(e,n,r)=>{const s=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return U0(t)(e,n,s)},TF=t=>(e,n,r)=>U0(t)(e,n,r),AF=t=>async(e,n,r)=>{const s=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return $0(t)(e,n,s)},RF=t=>async(e,n,r)=>$0(t)(e,n,r),OF=t=>(e,n,r)=>{const s=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return Ld(t)(e,n,s)},NF=t=>(e,n,r)=>Ld(t)(e,n,r),IF=t=>async(e,n,r)=>{const s=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return zd(t)(e,n,s)},MF=t=>async(e,n,r)=>zd(t)(e,n,r),DF=/^[cC][^\s-]{8,}$/,jF=/^[0-9a-z]+$/,LF=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,zF=/^[0-9a-vA-V]{20}$/,PF=/^[A-Za-z0-9]{27}$/,BF=/^[a-zA-Z0-9_-]{21}$/,UF=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,$F=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,US=t=>t?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${t}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,qF=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,FF="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function VF(){return new RegExp(FF,"u")}const HF=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,GF=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,KF=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,ZF=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,QF=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,AA=/^[A-Za-z0-9_-]*$/,JF=/^\+[1-9]\d{6,14}$/,RA="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",YF=new RegExp(`^${RA}$`);function OA(t){const e="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof t.precision=="number"?t.precision===-1?`${e}`:t.precision===0?`${e}:[0-5]\\d`:`${e}:[0-5]\\d\\.\\d{${t.precision}}`:`${e}(?::[0-5]\\d(?:\\.\\d+)?)?`}function WF(t){return new RegExp(`^${OA(t)}$`)}function XF(t){const e=OA({precision:t.precision}),n=["Z"];t.local&&n.push(""),t.offset&&n.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const r=`${e}(?:${n.join("|")})`;return new RegExp(`^${RA}T(?:${r})$`)}const eV=t=>{const e=t?`[\\s\\S]{${t?.minimum??0},${t?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${e}$`)},tV=/^[^A-Z]*$/,nV=/^[^a-z]*$/,ns=de("$ZodCheck",(t,e)=>{var n;t._zod??(t._zod={}),t._zod.def=e,(n=t._zod).onattach??(n.onattach=[])}),rV=de("$ZodCheckMaxLength",(t,e)=>{var n;ns.init(t,e),(n=t._zod.def).when??(n.when=r=>{const s=r.value;return!z0(s)&&s.length!==void 0}),t._zod.onattach.push(r=>{const s=r._zod.bag.maximum??Number.POSITIVE_INFINITY;e.maximum<s&&(r._zod.bag.maximum=e.maximum)}),t._zod.check=r=>{const s=r.value;if(s.length<=e.maximum)return;const l=B0(s);r.issues.push({origin:l,code:"too_big",maximum:e.maximum,inclusive:!0,input:s,inst:t,continue:!e.abort})}}),sV=de("$ZodCheckMinLength",(t,e)=>{var n;ns.init(t,e),(n=t._zod.def).when??(n.when=r=>{const s=r.value;return!z0(s)&&s.length!==void 0}),t._zod.onattach.push(r=>{const s=r._zod.bag.minimum??Number.NEGATIVE_INFINITY;e.minimum>s&&(r._zod.bag.minimum=e.minimum)}),t._zod.check=r=>{const s=r.value;if(s.length>=e.minimum)return;const l=B0(s);r.issues.push({origin:l,code:"too_small",minimum:e.minimum,inclusive:!0,input:s,inst:t,continue:!e.abort})}}),iV=de("$ZodCheckLengthEquals",(t,e)=>{var n;ns.init(t,e),(n=t._zod.def).when??(n.when=r=>{const s=r.value;return!z0(s)&&s.length!==void 0}),t._zod.onattach.push(r=>{const s=r._zod.bag;s.minimum=e.length,s.maximum=e.length,s.length=e.length}),t._zod.check=r=>{const s=r.value,a=s.length;if(a===e.length)return;const l=B0(s),u=a>e.length;r.issues.push({origin:l,...u?{code:"too_big",maximum:e.length}:{code:"too_small",minimum:e.length},inclusive:!0,exact:!0,input:r.value,inst:t,continue:!e.abort})}}),Pd=de("$ZodCheckStringFormat",(t,e)=>{var n,r;ns.init(t,e),t._zod.onattach.push(s=>{const a=s._zod.bag;a.format=e.format,e.pattern&&(a.patterns??(a.patterns=new Set),a.patterns.add(e.pattern))}),e.pattern?(n=t._zod).check??(n.check=s=>{e.pattern.lastIndex=0,!e.pattern.test(s.value)&&s.issues.push({origin:"string",code:"invalid_format",format:e.format,input:s.value,...e.pattern?{pattern:e.pattern.toString()}:{},inst:t,continue:!e.abort})}):(r=t._zod).check??(r.check=()=>{})}),aV=de("$ZodCheckRegex",(t,e)=>{Pd.init(t,e),t._zod.check=n=>{e.pattern.lastIndex=0,!e.pattern.test(n.value)&&n.issues.push({origin:"string",code:"invalid_format",format:"regex",input:n.value,pattern:e.pattern.toString(),inst:t,continue:!e.abort})}}),oV=de("$ZodCheckLowerCase",(t,e)=>{e.pattern??(e.pattern=tV),Pd.init(t,e)}),lV=de("$ZodCheckUpperCase",(t,e)=>{e.pattern??(e.pattern=nV),Pd.init(t,e)}),cV=de("$ZodCheckIncludes",(t,e)=>{ns.init(t,e);const n=jd(e.includes),r=new RegExp(typeof e.position=="number"?`^.{${e.position}}${n}`:n);e.pattern=r,t._zod.onattach.push(s=>{const a=s._zod.bag;a.patterns??(a.patterns=new Set),a.patterns.add(r)}),t._zod.check=s=>{s.value.includes(e.includes,e.position)||s.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:e.includes,input:s.value,inst:t,continue:!e.abort})}}),uV=de("$ZodCheckStartsWith",(t,e)=>{ns.init(t,e);const n=new RegExp(`^${jd(e.prefix)}.*`);e.pattern??(e.pattern=n),t._zod.onattach.push(r=>{const s=r._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(n)}),t._zod.check=r=>{r.value.startsWith(e.prefix)||r.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:e.prefix,input:r.value,inst:t,continue:!e.abort})}}),fV=de("$ZodCheckEndsWith",(t,e)=>{ns.init(t,e);const n=new RegExp(`.*${jd(e.suffix)}$`);e.pattern??(e.pattern=n),t._zod.onattach.push(r=>{const s=r._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(n)}),t._zod.check=r=>{r.value.endsWith(e.suffix)||r.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:e.suffix,input:r.value,inst:t,continue:!e.abort})}}),dV=de("$ZodCheckOverwrite",(t,e)=>{ns.init(t,e),t._zod.check=n=>{n.value=e.tx(n.value)}});class hV{constructor(e=[]){this.content=[],this.indent=0,this&&(this.args=e)}indented(e){this.indent+=1,e(this),this.indent-=1}write(e){if(typeof e=="function"){e(this,{execution:"sync"}),e(this,{execution:"async"});return}const r=e.split(`
`).filter(l=>l),s=Math.min(...r.map(l=>l.length-l.trimStart().length)),a=r.map(l=>l.slice(s)).map(l=>" ".repeat(this.indent*2)+l);for(const l of a)this.content.push(l)}compile(){const e=Function,n=this?.args,s=[...(this?.content??[""]).map(a=>`  ${a}`)];return new e(...n,s.join(`
`))}}const pV={major:4,minor:3,patch:4},tn=de("$ZodType",(t,e)=>{var n;t??(t={}),t._zod.def=e,t._zod.bag=t._zod.bag||{},t._zod.version=pV;const r=[...t._zod.def.checks??[]];t._zod.traits.has("$ZodCheck")&&r.unshift(t);for(const s of r)for(const a of s._zod.onattach)a(t);if(r.length===0)(n=t._zod).deferred??(n.deferred=[]),t._zod.deferred?.push(()=>{t._zod.run=t._zod.parse});else{const s=(l,u,f)=>{let d=Ja(l),m;for(const p of u){if(p._zod.def.when){if(!p._zod.def.when(l))continue}else if(d)continue;const y=l.issues.length,g=p._zod.check(l);if(g instanceof Promise&&f?.async===!1)throw new to;if(m||g instanceof Promise)m=(m??Promise.resolve()).then(async()=>{await g,l.issues.length!==y&&(d||(d=Ja(l,y)))});else{if(l.issues.length===y)continue;d||(d=Ja(l,y))}}return m?m.then(()=>l):l},a=(l,u,f)=>{if(Ja(l))return l.aborted=!0,l;const d=s(u,r,f);if(d instanceof Promise){if(f.async===!1)throw new to;return d.then(m=>t._zod.parse(m,f))}return t._zod.parse(d,f)};t._zod.run=(l,u)=>{if(u.skipChecks)return t._zod.parse(l,u);if(u.direction==="backward"){const d=t._zod.parse({value:l.value,issues:[]},{...u,skipChecks:!0});return d instanceof Promise?d.then(m=>a(m,l,u)):a(d,l,u)}const f=t._zod.parse(l,u);if(f instanceof Promise){if(u.async===!1)throw new to;return f.then(d=>s(d,r,u))}return s(f,r,u)}}pt(t,"~standard",()=>({validate:s=>{try{const a=kF(t,s);return a.success?{value:a.data}:{issues:a.error?.issues}}catch{return EF(t,s).then(l=>l.success?{value:l.data}:{issues:l.error?.issues})}},vendor:"zod",version:1}))}),q0=de("$ZodString",(t,e)=>{tn.init(t,e),t._zod.pattern=[...t?._zod.bag?.patterns??[]].pop()??eV(t._zod.bag),t._zod.parse=(n,r)=>{if(e.coerce)try{n.value=String(n.value)}catch{}return typeof n.value=="string"||n.issues.push({expected:"string",code:"invalid_type",input:n.value,inst:t}),n}}),Ot=de("$ZodStringFormat",(t,e)=>{Pd.init(t,e),q0.init(t,e)}),mV=de("$ZodGUID",(t,e)=>{e.pattern??(e.pattern=$F),Ot.init(t,e)}),gV=de("$ZodUUID",(t,e)=>{if(e.version){const r={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[e.version];if(r===void 0)throw new Error(`Invalid UUID version: "${e.version}"`);e.pattern??(e.pattern=US(r))}else e.pattern??(e.pattern=US());Ot.init(t,e)}),yV=de("$ZodEmail",(t,e)=>{e.pattern??(e.pattern=qF),Ot.init(t,e)}),bV=de("$ZodURL",(t,e)=>{Ot.init(t,e),t._zod.check=n=>{try{const r=n.value.trim(),s=new URL(r);e.hostname&&(e.hostname.lastIndex=0,e.hostname.test(s.hostname)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:e.hostname.source,input:n.value,inst:t,continue:!e.abort})),e.protocol&&(e.protocol.lastIndex=0,e.protocol.test(s.protocol.endsWith(":")?s.protocol.slice(0,-1):s.protocol)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:e.protocol.source,input:n.value,inst:t,continue:!e.abort})),e.normalize?n.value=s.href:n.value=r;return}catch{n.issues.push({code:"invalid_format",format:"url",input:n.value,inst:t,continue:!e.abort})}}}),_V=de("$ZodEmoji",(t,e)=>{e.pattern??(e.pattern=VF()),Ot.init(t,e)}),vV=de("$ZodNanoID",(t,e)=>{e.pattern??(e.pattern=BF),Ot.init(t,e)}),xV=de("$ZodCUID",(t,e)=>{e.pattern??(e.pattern=DF),Ot.init(t,e)}),wV=de("$ZodCUID2",(t,e)=>{e.pattern??(e.pattern=jF),Ot.init(t,e)}),SV=de("$ZodULID",(t,e)=>{e.pattern??(e.pattern=LF),Ot.init(t,e)}),kV=de("$ZodXID",(t,e)=>{e.pattern??(e.pattern=zF),Ot.init(t,e)}),EV=de("$ZodKSUID",(t,e)=>{e.pattern??(e.pattern=PF),Ot.init(t,e)}),CV=de("$ZodISODateTime",(t,e)=>{e.pattern??(e.pattern=XF(e)),Ot.init(t,e)}),TV=de("$ZodISODate",(t,e)=>{e.pattern??(e.pattern=YF),Ot.init(t,e)}),AV=de("$ZodISOTime",(t,e)=>{e.pattern??(e.pattern=WF(e)),Ot.init(t,e)}),RV=de("$ZodISODuration",(t,e)=>{e.pattern??(e.pattern=UF),Ot.init(t,e)}),OV=de("$ZodIPv4",(t,e)=>{e.pattern??(e.pattern=HF),Ot.init(t,e),t._zod.bag.format="ipv4"}),NV=de("$ZodIPv6",(t,e)=>{e.pattern??(e.pattern=GF),Ot.init(t,e),t._zod.bag.format="ipv6",t._zod.check=n=>{try{new URL(`http://[${n.value}]`)}catch{n.issues.push({code:"invalid_format",format:"ipv6",input:n.value,inst:t,continue:!e.abort})}}}),IV=de("$ZodCIDRv4",(t,e)=>{e.pattern??(e.pattern=KF),Ot.init(t,e)}),MV=de("$ZodCIDRv6",(t,e)=>{e.pattern??(e.pattern=ZF),Ot.init(t,e),t._zod.check=n=>{const r=n.value.split("/");try{if(r.length!==2)throw new Error;const[s,a]=r;if(!a)throw new Error;const l=Number(a);if(`${l}`!==a)throw new Error;if(l<0||l>128)throw new Error;new URL(`http://[${s}]`)}catch{n.issues.push({code:"invalid_format",format:"cidrv6",input:n.value,inst:t,continue:!e.abort})}}});function NA(t){if(t==="")return!0;if(t.length%4!==0)return!1;try{return atob(t),!0}catch{return!1}}const DV=de("$ZodBase64",(t,e)=>{e.pattern??(e.pattern=QF),Ot.init(t,e),t._zod.bag.contentEncoding="base64",t._zod.check=n=>{NA(n.value)||n.issues.push({code:"invalid_format",format:"base64",input:n.value,inst:t,continue:!e.abort})}});function jV(t){if(!AA.test(t))return!1;const e=t.replace(/[-_]/g,r=>r==="-"?"+":"/"),n=e.padEnd(Math.ceil(e.length/4)*4,"=");return NA(n)}const LV=de("$ZodBase64URL",(t,e)=>{e.pattern??(e.pattern=AA),Ot.init(t,e),t._zod.bag.contentEncoding="base64url",t._zod.check=n=>{jV(n.value)||n.issues.push({code:"invalid_format",format:"base64url",input:n.value,inst:t,continue:!e.abort})}}),zV=de("$ZodE164",(t,e)=>{e.pattern??(e.pattern=JF),Ot.init(t,e)});function PV(t,e=null){try{const n=t.split(".");if(n.length!==3)return!1;const[r]=n;if(!r)return!1;const s=JSON.parse(atob(r));return!("typ"in s&&s?.typ!=="JWT"||!s.alg||e&&(!("alg"in s)||s.alg!==e))}catch{return!1}}const BV=de("$ZodJWT",(t,e)=>{Ot.init(t,e),t._zod.check=n=>{PV(n.value,e.alg)||n.issues.push({code:"invalid_format",format:"jwt",input:n.value,inst:t,continue:!e.abort})}}),UV=de("$ZodUnknown",(t,e)=>{tn.init(t,e),t._zod.parse=n=>n}),$V=de("$ZodNever",(t,e)=>{tn.init(t,e),t._zod.parse=(n,r)=>(n.issues.push({expected:"never",code:"invalid_type",input:n.value,inst:t}),n)});function $S(t,e,n){t.issues.length&&e.issues.push(...kA(n,t.issues)),e.value[n]=t.value}const qV=de("$ZodArray",(t,e)=>{tn.init(t,e),t._zod.parse=(n,r)=>{const s=n.value;if(!Array.isArray(s))return n.issues.push({expected:"array",code:"invalid_type",input:s,inst:t}),n;n.value=Array(s.length);const a=[];for(let l=0;l<s.length;l++){const u=s[l],f=e.element._zod.run({value:u,issues:[]},r);f instanceof Promise?a.push(f.then(d=>$S(d,n,l))):$S(f,n,l)}return a.length?Promise.all(a).then(()=>n):n}});function sd(t,e,n,r,s){if(t.issues.length){if(s&&!(n in r))return;e.issues.push(...kA(n,t.issues))}t.value===void 0?n in r&&(e.value[n]=void 0):e.value[n]=t.value}function IA(t){const e=Object.keys(t.shape);for(const r of e)if(!t.shape?.[r]?._zod?.traits?.has("$ZodType"))throw new Error(`Invalid element at key "${r}": expected a Zod schema`);const n=pF(t.shape);return{...t,keys:e,keySet:new Set(e),numKeys:e.length,optionalKeys:new Set(n)}}function MA(t,e,n,r,s,a){const l=[],u=s.keySet,f=s.catchall._zod,d=f.def.type,m=f.optout==="optional";for(const p in e){if(u.has(p))continue;if(d==="never"){l.push(p);continue}const y=f.run({value:e[p],issues:[]},r);y instanceof Promise?t.push(y.then(g=>sd(g,n,p,e,m))):sd(y,n,p,e,m)}return l.length&&n.issues.push({code:"unrecognized_keys",keys:l,input:e,inst:a}),t.length?Promise.all(t).then(()=>n):n}const FV=de("$ZodObject",(t,e)=>{if(tn.init(t,e),!Object.getOwnPropertyDescriptor(e,"shape")?.get){const u=e.shape;Object.defineProperty(e,"shape",{get:()=>{const f={...u};return Object.defineProperty(e,"shape",{value:f}),f}})}const r=L0(()=>IA(e));pt(t._zod,"propValues",()=>{const u=e.shape,f={};for(const d in u){const m=u[d]._zod;if(m.values){f[d]??(f[d]=new Set);for(const p of m.values)f[d].add(p)}}return f});const s=rd,a=e.catchall;let l;t._zod.parse=(u,f)=>{l??(l=r.value);const d=u.value;if(!s(d))return u.issues.push({expected:"object",code:"invalid_type",input:d,inst:t}),u;u.value={};const m=[],p=l.shape;for(const y of l.keys){const g=p[y],v=g._zod.optout==="optional",w=g._zod.run({value:d[y],issues:[]},f);w instanceof Promise?m.push(w.then(E=>sd(E,u,y,d,v))):sd(w,u,y,d,v)}return a?MA(m,d,u,f,r.value,t):m.length?Promise.all(m).then(()=>u):u}}),VV=de("$ZodObjectJIT",(t,e)=>{FV.init(t,e);const n=t._zod.parse,r=L0(()=>IA(e)),s=y=>{const g=new hV(["shape","payload","ctx"]),v=r.value,w=T=>{const M=BS(T);return`shape[${M}]._zod.run({ value: input[${M}], issues: [] }, ctx)`};g.write("const input = payload.value;");const E=Object.create(null);let S=0;for(const T of v.keys)E[T]=`key_${S++}`;g.write("const newResult = {};");for(const T of v.keys){const M=E[T],I=BS(T),U=y[T]?._zod?.optout==="optional";g.write(`const ${M} = ${w(T)};`),U?g.write(`
        if (${M}.issues.length) {
          if (${I} in input) {
            payload.issues = payload.issues.concat(${M}.issues.map(iss => ({
              ...iss,
              path: iss.path ? [${I}, ...iss.path] : [${I}]
            })));
          }
        }
        
        if (${M}.value === undefined) {
          if (${I} in input) {
            newResult[${I}] = undefined;
          }
        } else {
          newResult[${I}] = ${M}.value;
        }
        
      `):g.write(`
        if (${M}.issues.length) {
          payload.issues = payload.issues.concat(${M}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${I}, ...iss.path] : [${I}]
          })));
        }
        
        if (${M}.value === undefined) {
          if (${I} in input) {
            newResult[${I}] = undefined;
          }
        } else {
          newResult[${I}] = ${M}.value;
        }
        
      `)}g.write("payload.value = newResult;"),g.write("return payload;");const C=g.compile();return(T,M)=>C(y,T,M)};let a;const l=rd,u=!vA.jitless,d=u&&dF.value,m=e.catchall;let p;t._zod.parse=(y,g)=>{p??(p=r.value);const v=y.value;return l(v)?u&&d&&g?.async===!1&&g.jitless!==!0?(a||(a=s(e.shape)),y=a(y,g),m?MA([],v,y,g,p,t):y):n(y,g):(y.issues.push({expected:"object",code:"invalid_type",input:v,inst:t}),y)}});function qS(t,e,n,r){for(const a of t)if(a.issues.length===0)return e.value=a.value,e;const s=t.filter(a=>!Ja(a));return s.length===1?(e.value=s[0].value,s[0]):(e.issues.push({code:"invalid_union",input:e.value,inst:n,errors:t.map(a=>a.issues.map(l=>Hi(l,r,Vi())))}),e)}const HV=de("$ZodUnion",(t,e)=>{tn.init(t,e),pt(t._zod,"optin",()=>e.options.some(s=>s._zod.optin==="optional")?"optional":void 0),pt(t._zod,"optout",()=>e.options.some(s=>s._zod.optout==="optional")?"optional":void 0),pt(t._zod,"values",()=>{if(e.options.every(s=>s._zod.values))return new Set(e.options.flatMap(s=>Array.from(s._zod.values)))}),pt(t._zod,"pattern",()=>{if(e.options.every(s=>s._zod.pattern)){const s=e.options.map(a=>a._zod.pattern);return new RegExp(`^(${s.map(a=>P0(a.source)).join("|")})$`)}});const n=e.options.length===1,r=e.options[0]._zod.run;t._zod.parse=(s,a)=>{if(n)return r(s,a);let l=!1;const u=[];for(const f of e.options){const d=f._zod.run({value:s.value,issues:[]},a);if(d instanceof Promise)u.push(d),l=!0;else{if(d.issues.length===0)return d;u.push(d)}}return l?Promise.all(u).then(f=>qS(f,s,t,a)):qS(u,s,t,a)}}),GV=de("$ZodIntersection",(t,e)=>{tn.init(t,e),t._zod.parse=(n,r)=>{const s=n.value,a=e.left._zod.run({value:s,issues:[]},r),l=e.right._zod.run({value:s,issues:[]},r);return a instanceof Promise||l instanceof Promise?Promise.all([a,l]).then(([f,d])=>FS(n,f,d)):FS(n,a,l)}});function uy(t,e){if(t===e)return{valid:!0,data:t};if(t instanceof Date&&e instanceof Date&&+t==+e)return{valid:!0,data:t};if(sc(t)&&sc(e)){const n=Object.keys(e),r=Object.keys(t).filter(a=>n.indexOf(a)!==-1),s={...t,...e};for(const a of r){const l=uy(t[a],e[a]);if(!l.valid)return{valid:!1,mergeErrorPath:[a,...l.mergeErrorPath]};s[a]=l.data}return{valid:!0,data:s}}if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return{valid:!1,mergeErrorPath:[]};const n=[];for(let r=0;r<t.length;r++){const s=t[r],a=e[r],l=uy(s,a);if(!l.valid)return{valid:!1,mergeErrorPath:[r,...l.mergeErrorPath]};n.push(l.data)}return{valid:!0,data:n}}return{valid:!1,mergeErrorPath:[]}}function FS(t,e,n){const r=new Map;let s;for(const u of e.issues)if(u.code==="unrecognized_keys"){s??(s=u);for(const f of u.keys)r.has(f)||r.set(f,{}),r.get(f).l=!0}else t.issues.push(u);for(const u of n.issues)if(u.code==="unrecognized_keys")for(const f of u.keys)r.has(f)||r.set(f,{}),r.get(f).r=!0;else t.issues.push(u);const a=[...r].filter(([,u])=>u.l&&u.r).map(([u])=>u);if(a.length&&s&&t.issues.push({...s,keys:a}),Ja(t))return t;const l=uy(e.value,n.value);if(!l.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(l.mergeErrorPath)}`);return t.value=l.data,t}const KV=de("$ZodEnum",(t,e)=>{tn.init(t,e);const n=xA(e.entries),r=new Set(n);t._zod.values=r,t._zod.pattern=new RegExp(`^(${n.filter(s=>hF.has(typeof s)).map(s=>typeof s=="string"?jd(s):s.toString()).join("|")})$`),t._zod.parse=(s,a)=>{const l=s.value;return r.has(l)||s.issues.push({code:"invalid_value",values:n,input:l,inst:t}),s}}),ZV=de("$ZodTransform",(t,e)=>{tn.init(t,e),t._zod.parse=(n,r)=>{if(r.direction==="backward")throw new _A(t.constructor.name);const s=e.transform(n.value,n);if(r.async)return(s instanceof Promise?s:Promise.resolve(s)).then(l=>(n.value=l,n));if(s instanceof Promise)throw new to;return n.value=s,n}});function VS(t,e){return t.issues.length&&e===void 0?{issues:[],value:void 0}:t}const DA=de("$ZodOptional",(t,e)=>{tn.init(t,e),t._zod.optin="optional",t._zod.optout="optional",pt(t._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,void 0]):void 0),pt(t._zod,"pattern",()=>{const n=e.innerType._zod.pattern;return n?new RegExp(`^(${P0(n.source)})?$`):void 0}),t._zod.parse=(n,r)=>{if(e.innerType._zod.optin==="optional"){const s=e.innerType._zod.run(n,r);return s instanceof Promise?s.then(a=>VS(a,n.value)):VS(s,n.value)}return n.value===void 0?n:e.innerType._zod.run(n,r)}}),QV=de("$ZodExactOptional",(t,e)=>{DA.init(t,e),pt(t._zod,"values",()=>e.innerType._zod.values),pt(t._zod,"pattern",()=>e.innerType._zod.pattern),t._zod.parse=(n,r)=>e.innerType._zod.run(n,r)}),JV=de("$ZodNullable",(t,e)=>{tn.init(t,e),pt(t._zod,"optin",()=>e.innerType._zod.optin),pt(t._zod,"optout",()=>e.innerType._zod.optout),pt(t._zod,"pattern",()=>{const n=e.innerType._zod.pattern;return n?new RegExp(`^(${P0(n.source)}|null)$`):void 0}),pt(t._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,null]):void 0),t._zod.parse=(n,r)=>n.value===null?n:e.innerType._zod.run(n,r)}),YV=de("$ZodDefault",(t,e)=>{tn.init(t,e),t._zod.optin="optional",pt(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(n,r)=>{if(r.direction==="backward")return e.innerType._zod.run(n,r);if(n.value===void 0)return n.value=e.defaultValue,n;const s=e.innerType._zod.run(n,r);return s instanceof Promise?s.then(a=>HS(a,e)):HS(s,e)}});function HS(t,e){return t.value===void 0&&(t.value=e.defaultValue),t}const WV=de("$ZodPrefault",(t,e)=>{tn.init(t,e),t._zod.optin="optional",pt(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(n,r)=>(r.direction==="backward"||n.value===void 0&&(n.value=e.defaultValue),e.innerType._zod.run(n,r))}),XV=de("$ZodNonOptional",(t,e)=>{tn.init(t,e),pt(t._zod,"values",()=>{const n=e.innerType._zod.values;return n?new Set([...n].filter(r=>r!==void 0)):void 0}),t._zod.parse=(n,r)=>{const s=e.innerType._zod.run(n,r);return s instanceof Promise?s.then(a=>GS(a,t)):GS(s,t)}});function GS(t,e){return!t.issues.length&&t.value===void 0&&t.issues.push({code:"invalid_type",expected:"nonoptional",input:t.value,inst:e}),t}const eH=de("$ZodCatch",(t,e)=>{tn.init(t,e),pt(t._zod,"optin",()=>e.innerType._zod.optin),pt(t._zod,"optout",()=>e.innerType._zod.optout),pt(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(n,r)=>{if(r.direction==="backward")return e.innerType._zod.run(n,r);const s=e.innerType._zod.run(n,r);return s instanceof Promise?s.then(a=>(n.value=a.value,a.issues.length&&(n.value=e.catchValue({...n,error:{issues:a.issues.map(l=>Hi(l,r,Vi()))},input:n.value}),n.issues=[]),n)):(n.value=s.value,s.issues.length&&(n.value=e.catchValue({...n,error:{issues:s.issues.map(a=>Hi(a,r,Vi()))},input:n.value}),n.issues=[]),n)}}),tH=de("$ZodPipe",(t,e)=>{tn.init(t,e),pt(t._zod,"values",()=>e.in._zod.values),pt(t._zod,"optin",()=>e.in._zod.optin),pt(t._zod,"optout",()=>e.out._zod.optout),pt(t._zod,"propValues",()=>e.in._zod.propValues),t._zod.parse=(n,r)=>{if(r.direction==="backward"){const a=e.out._zod.run(n,r);return a instanceof Promise?a.then(l=>Yu(l,e.in,r)):Yu(a,e.in,r)}const s=e.in._zod.run(n,r);return s instanceof Promise?s.then(a=>Yu(a,e.out,r)):Yu(s,e.out,r)}});function Yu(t,e,n){return t.issues.length?(t.aborted=!0,t):e._zod.run({value:t.value,issues:t.issues},n)}const nH=de("$ZodReadonly",(t,e)=>{tn.init(t,e),pt(t._zod,"propValues",()=>e.innerType._zod.propValues),pt(t._zod,"values",()=>e.innerType._zod.values),pt(t._zod,"optin",()=>e.innerType?._zod?.optin),pt(t._zod,"optout",()=>e.innerType?._zod?.optout),t._zod.parse=(n,r)=>{if(r.direction==="backward")return e.innerType._zod.run(n,r);const s=e.innerType._zod.run(n,r);return s instanceof Promise?s.then(KS):KS(s)}});function KS(t){return t.value=Object.freeze(t.value),t}const rH=de("$ZodCustom",(t,e)=>{ns.init(t,e),tn.init(t,e),t._zod.parse=(n,r)=>n,t._zod.check=n=>{const r=n.value,s=e.fn(r);if(s instanceof Promise)return s.then(a=>ZS(a,n,r,t));ZS(s,n,r,t)}});function ZS(t,e,n,r){if(!t){const s={code:"custom",input:n,inst:r,path:[...r._zod.def.path??[]],continue:!r._zod.def.abort};r._zod.def.params&&(s.params=r._zod.def.params),e.issues.push(ic(s))}}var QS;class sH{constructor(){this._map=new WeakMap,this._idmap=new Map}add(e,...n){const r=n[0];return this._map.set(e,r),r&&typeof r=="object"&&"id"in r&&this._idmap.set(r.id,e),this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(e){const n=this._map.get(e);return n&&typeof n=="object"&&"id"in n&&this._idmap.delete(n.id),this._map.delete(e),this}get(e){const n=e._zod.parent;if(n){const r={...this.get(n)??{}};delete r.id;const s={...r,...this._map.get(e)};return Object.keys(s).length?s:void 0}return this._map.get(e)}has(e){return this._map.has(e)}}function iH(){return new sH}(QS=globalThis).__zod_globalRegistry??(QS.__zod_globalRegistry=iH());const Il=globalThis.__zod_globalRegistry;function aH(t,e){return new t({type:"string",...Le(e)})}function oH(t,e){return new t({type:"string",format:"email",check:"string_format",abort:!1,...Le(e)})}function JS(t,e){return new t({type:"string",format:"guid",check:"string_format",abort:!1,...Le(e)})}function lH(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,...Le(e)})}function cH(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...Le(e)})}function uH(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...Le(e)})}function fH(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...Le(e)})}function dH(t,e){return new t({type:"string",format:"url",check:"string_format",abort:!1,...Le(e)})}function hH(t,e){return new t({type:"string",format:"emoji",check:"string_format",abort:!1,...Le(e)})}function pH(t,e){return new t({type:"string",format:"nanoid",check:"string_format",abort:!1,...Le(e)})}function mH(t,e){return new t({type:"string",format:"cuid",check:"string_format",abort:!1,...Le(e)})}function gH(t,e){return new t({type:"string",format:"cuid2",check:"string_format",abort:!1,...Le(e)})}function yH(t,e){return new t({type:"string",format:"ulid",check:"string_format",abort:!1,...Le(e)})}function bH(t,e){return new t({type:"string",format:"xid",check:"string_format",abort:!1,...Le(e)})}function _H(t,e){return new t({type:"string",format:"ksuid",check:"string_format",abort:!1,...Le(e)})}function vH(t,e){return new t({type:"string",format:"ipv4",check:"string_format",abort:!1,...Le(e)})}function xH(t,e){return new t({type:"string",format:"ipv6",check:"string_format",abort:!1,...Le(e)})}function wH(t,e){return new t({type:"string",format:"cidrv4",check:"string_format",abort:!1,...Le(e)})}function SH(t,e){return new t({type:"string",format:"cidrv6",check:"string_format",abort:!1,...Le(e)})}function kH(t,e){return new t({type:"string",format:"base64",check:"string_format",abort:!1,...Le(e)})}function EH(t,e){return new t({type:"string",format:"base64url",check:"string_format",abort:!1,...Le(e)})}function CH(t,e){return new t({type:"string",format:"e164",check:"string_format",abort:!1,...Le(e)})}function TH(t,e){return new t({type:"string",format:"jwt",check:"string_format",abort:!1,...Le(e)})}function AH(t,e){return new t({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...Le(e)})}function RH(t,e){return new t({type:"string",format:"date",check:"string_format",...Le(e)})}function OH(t,e){return new t({type:"string",format:"time",check:"string_format",precision:null,...Le(e)})}function NH(t,e){return new t({type:"string",format:"duration",check:"string_format",...Le(e)})}function IH(t){return new t({type:"unknown"})}function MH(t,e){return new t({type:"never",...Le(e)})}function jA(t,e){return new rV({check:"max_length",...Le(e),maximum:t})}function id(t,e){return new sV({check:"min_length",...Le(e),minimum:t})}function LA(t,e){return new iV({check:"length_equals",...Le(e),length:t})}function DH(t,e){return new aV({check:"string_format",format:"regex",...Le(e),pattern:t})}function jH(t){return new oV({check:"string_format",format:"lowercase",...Le(t)})}function LH(t){return new lV({check:"string_format",format:"uppercase",...Le(t)})}function zH(t,e){return new cV({check:"string_format",format:"includes",...Le(e),includes:t})}function PH(t,e){return new uV({check:"string_format",format:"starts_with",...Le(e),prefix:t})}function BH(t,e){return new fV({check:"string_format",format:"ends_with",...Le(e),suffix:t})}function yo(t){return new dV({check:"overwrite",tx:t})}function UH(t){return yo(e=>e.normalize(t))}function $H(){return yo(t=>t.trim())}function qH(){return yo(t=>t.toLowerCase())}function FH(){return yo(t=>t.toUpperCase())}function VH(){return yo(t=>fF(t))}function HH(t,e,n){return new t({type:"array",element:e,...Le(n)})}function GH(t,e,n){return new t({type:"custom",check:"custom",fn:e,...Le(n)})}function KH(t){const e=ZH(n=>(n.addIssue=r=>{if(typeof r=="string")n.issues.push(ic(r,n.value,e._zod.def));else{const s=r;s.fatal&&(s.continue=!1),s.code??(s.code="custom"),s.input??(s.input=n.value),s.inst??(s.inst=e),s.continue??(s.continue=!e._zod.def.abort),n.issues.push(ic(s))}},t(n.value,n)));return e}function ZH(t,e){const n=new ns({check:"custom",...Le(e)});return n._zod.check=t,n}function zA(t){let e=t?.target??"draft-2020-12";return e==="draft-4"&&(e="draft-04"),e==="draft-7"&&(e="draft-07"),{processors:t.processors??{},metadataRegistry:t?.metadata??Il,target:e,unrepresentable:t?.unrepresentable??"throw",override:t?.override??(()=>{}),io:t?.io??"output",counter:0,seen:new Map,cycles:t?.cycles??"ref",reused:t?.reused??"inline",external:t?.external??void 0}}function xn(t,e,n={path:[],schemaPath:[]}){var r;const s=t._zod.def,a=e.seen.get(t);if(a)return a.count++,n.schemaPath.includes(t)&&(a.cycle=n.path),a.schema;const l={schema:{},count:1,cycle:void 0,path:n.path};e.seen.set(t,l);const u=t._zod.toJSONSchema?.();if(u)l.schema=u;else{const m={...n,schemaPath:[...n.schemaPath,t],path:n.path};if(t._zod.processJSONSchema)t._zod.processJSONSchema(e,l.schema,m);else{const y=l.schema,g=e.processors[s.type];if(!g)throw new Error(`[toJSONSchema]: Non-representable type encountered: ${s.type}`);g(t,e,y,m)}const p=t._zod.parent;p&&(l.ref||(l.ref=p),xn(p,e,m),e.seen.get(p).isParent=!0)}const f=e.metadataRegistry.get(t);return f&&Object.assign(l.schema,f),e.io==="input"&&Mn(t)&&(delete l.schema.examples,delete l.schema.default),e.io==="input"&&l.schema._prefault&&((r=l.schema).default??(r.default=l.schema._prefault)),delete l.schema._prefault,e.seen.get(t).schema}function PA(t,e){const n=t.seen.get(e);if(!n)throw new Error("Unprocessed schema. This is a bug in Zod.");const r=new Map;for(const l of t.seen.entries()){const u=t.metadataRegistry.get(l[0])?.id;if(u){const f=r.get(u);if(f&&f!==l[0])throw new Error(`Duplicate schema id "${u}" detected during JSON Schema conversion. Two different schemas cannot share the same id when converted together.`);r.set(u,l[0])}}const s=l=>{const u=t.target==="draft-2020-12"?"$defs":"definitions";if(t.external){const p=t.external.registry.get(l[0])?.id,y=t.external.uri??(v=>v);if(p)return{ref:y(p)};const g=l[1].defId??l[1].schema.id??`schema${t.counter++}`;return l[1].defId=g,{defId:g,ref:`${y("__shared")}#/${u}/${g}`}}if(l[1]===n)return{ref:"#"};const d=`#/${u}/`,m=l[1].schema.id??`__schema${t.counter++}`;return{defId:m,ref:d+m}},a=l=>{if(l[1].schema.$ref)return;const u=l[1],{ref:f,defId:d}=s(l);u.def={...u.schema},d&&(u.defId=d);const m=u.schema;for(const p in m)delete m[p];m.$ref=f};if(t.cycles==="throw")for(const l of t.seen.entries()){const u=l[1];if(u.cycle)throw new Error(`Cycle detected: #/${u.cycle?.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(const l of t.seen.entries()){const u=l[1];if(e===l[0]){a(l);continue}if(t.external){const d=t.external.registry.get(l[0])?.id;if(e!==l[0]&&d){a(l);continue}}if(t.metadataRegistry.get(l[0])?.id){a(l);continue}if(u.cycle){a(l);continue}if(u.count>1&&t.reused==="ref"){a(l);continue}}}function BA(t,e){const n=t.seen.get(e);if(!n)throw new Error("Unprocessed schema. This is a bug in Zod.");const r=l=>{const u=t.seen.get(l);if(u.ref===null)return;const f=u.def??u.schema,d={...f},m=u.ref;if(u.ref=null,m){r(m);const y=t.seen.get(m),g=y.schema;if(g.$ref&&(t.target==="draft-07"||t.target==="draft-04"||t.target==="openapi-3.0")?(f.allOf=f.allOf??[],f.allOf.push(g)):Object.assign(f,g),Object.assign(f,d),l._zod.parent===m)for(const w in f)w==="$ref"||w==="allOf"||w in d||delete f[w];if(g.$ref)for(const w in f)w==="$ref"||w==="allOf"||w in y.def&&JSON.stringify(f[w])===JSON.stringify(y.def[w])&&delete f[w]}const p=l._zod.parent;if(p&&p!==m){r(p);const y=t.seen.get(p);if(y?.schema.$ref&&(f.$ref=y.schema.$ref,y.def))for(const g in f)g==="$ref"||g==="allOf"||g in y.def&&JSON.stringify(f[g])===JSON.stringify(y.def[g])&&delete f[g]}t.override({zodSchema:l,jsonSchema:f,path:u.path??[]})};for(const l of[...t.seen.entries()].reverse())r(l[0]);const s={};if(t.target==="draft-2020-12"?s.$schema="https://json-schema.org/draft/2020-12/schema":t.target==="draft-07"?s.$schema="http://json-schema.org/draft-07/schema#":t.target==="draft-04"?s.$schema="http://json-schema.org/draft-04/schema#":t.target,t.external?.uri){const l=t.external.registry.get(e)?.id;if(!l)throw new Error("Schema is missing an `id` property");s.$id=t.external.uri(l)}Object.assign(s,n.def??n.schema);const a=t.external?.defs??{};for(const l of t.seen.entries()){const u=l[1];u.def&&u.defId&&(a[u.defId]=u.def)}t.external||Object.keys(a).length>0&&(t.target==="draft-2020-12"?s.$defs=a:s.definitions=a);try{const l=JSON.parse(JSON.stringify(s));return Object.defineProperty(l,"~standard",{value:{...e["~standard"],jsonSchema:{input:ad(e,"input",t.processors),output:ad(e,"output",t.processors)}},enumerable:!1,writable:!1}),l}catch{throw new Error("Error converting schema to JSON.")}}function Mn(t,e){const n=e??{seen:new Set};if(n.seen.has(t))return!1;n.seen.add(t);const r=t._zod.def;if(r.type==="transform")return!0;if(r.type==="array")return Mn(r.element,n);if(r.type==="set")return Mn(r.valueType,n);if(r.type==="lazy")return Mn(r.getter(),n);if(r.type==="promise"||r.type==="optional"||r.type==="nonoptional"||r.type==="nullable"||r.type==="readonly"||r.type==="default"||r.type==="prefault")return Mn(r.innerType,n);if(r.type==="intersection")return Mn(r.left,n)||Mn(r.right,n);if(r.type==="record"||r.type==="map")return Mn(r.keyType,n)||Mn(r.valueType,n);if(r.type==="pipe")return Mn(r.in,n)||Mn(r.out,n);if(r.type==="object"){for(const s in r.shape)if(Mn(r.shape[s],n))return!0;return!1}if(r.type==="union"){for(const s of r.options)if(Mn(s,n))return!0;return!1}if(r.type==="tuple"){for(const s of r.items)if(Mn(s,n))return!0;return!!(r.rest&&Mn(r.rest,n))}return!1}const QH=(t,e={})=>n=>{const r=zA({...n,processors:e});return xn(t,r),PA(r,t),BA(r,t)},ad=(t,e,n={})=>r=>{const{libraryOptions:s,target:a}=r??{},l=zA({...s??{},target:a,io:e,processors:n});return xn(t,l),PA(l,t),BA(l,t)},JH={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},YH=(t,e,n,r)=>{const s=n;s.type="string";const{minimum:a,maximum:l,format:u,patterns:f,contentEncoding:d}=t._zod.bag;if(typeof a=="number"&&(s.minLength=a),typeof l=="number"&&(s.maxLength=l),u&&(s.format=JH[u]??u,s.format===""&&delete s.format,u==="time"&&delete s.format),d&&(s.contentEncoding=d),f&&f.size>0){const m=[...f];m.length===1?s.pattern=m[0].source:m.length>1&&(s.allOf=[...m.map(p=>({...e.target==="draft-07"||e.target==="draft-04"||e.target==="openapi-3.0"?{type:"string"}:{},pattern:p.source}))])}},WH=(t,e,n,r)=>{n.not={}},XH=(t,e,n,r)=>{},eG=(t,e,n,r)=>{const s=t._zod.def,a=xA(s.entries);a.every(l=>typeof l=="number")&&(n.type="number"),a.every(l=>typeof l=="string")&&(n.type="string"),n.enum=a},tG=(t,e,n,r)=>{if(e.unrepresentable==="throw")throw new Error("Custom types cannot be represented in JSON Schema")},nG=(t,e,n,r)=>{if(e.unrepresentable==="throw")throw new Error("Transforms cannot be represented in JSON Schema")},rG=(t,e,n,r)=>{const s=n,a=t._zod.def,{minimum:l,maximum:u}=t._zod.bag;typeof l=="number"&&(s.minItems=l),typeof u=="number"&&(s.maxItems=u),s.type="array",s.items=xn(a.element,e,{...r,path:[...r.path,"items"]})},sG=(t,e,n,r)=>{const s=n,a=t._zod.def;s.type="object",s.properties={};const l=a.shape;for(const d in l)s.properties[d]=xn(l[d],e,{...r,path:[...r.path,"properties",d]});const u=new Set(Object.keys(l)),f=new Set([...u].filter(d=>{const m=a.shape[d]._zod;return e.io==="input"?m.optin===void 0:m.optout===void 0}));f.size>0&&(s.required=Array.from(f)),a.catchall?._zod.def.type==="never"?s.additionalProperties=!1:a.catchall?a.catchall&&(s.additionalProperties=xn(a.catchall,e,{...r,path:[...r.path,"additionalProperties"]})):e.io==="output"&&(s.additionalProperties=!1)},iG=(t,e,n,r)=>{const s=t._zod.def,a=s.inclusive===!1,l=s.options.map((u,f)=>xn(u,e,{...r,path:[...r.path,a?"oneOf":"anyOf",f]}));a?n.oneOf=l:n.anyOf=l},aG=(t,e,n,r)=>{const s=t._zod.def,a=xn(s.left,e,{...r,path:[...r.path,"allOf",0]}),l=xn(s.right,e,{...r,path:[...r.path,"allOf",1]}),u=d=>"allOf"in d&&Object.keys(d).length===1,f=[...u(a)?a.allOf:[a],...u(l)?l.allOf:[l]];n.allOf=f},oG=(t,e,n,r)=>{const s=t._zod.def,a=xn(s.innerType,e,r),l=e.seen.get(t);e.target==="openapi-3.0"?(l.ref=s.innerType,n.nullable=!0):n.anyOf=[a,{type:"null"}]},lG=(t,e,n,r)=>{const s=t._zod.def;xn(s.innerType,e,r);const a=e.seen.get(t);a.ref=s.innerType},cG=(t,e,n,r)=>{const s=t._zod.def;xn(s.innerType,e,r);const a=e.seen.get(t);a.ref=s.innerType,n.default=JSON.parse(JSON.stringify(s.defaultValue))},uG=(t,e,n,r)=>{const s=t._zod.def;xn(s.innerType,e,r);const a=e.seen.get(t);a.ref=s.innerType,e.io==="input"&&(n._prefault=JSON.parse(JSON.stringify(s.defaultValue)))},fG=(t,e,n,r)=>{const s=t._zod.def;xn(s.innerType,e,r);const a=e.seen.get(t);a.ref=s.innerType;let l;try{l=s.catchValue(void 0)}catch{throw new Error("Dynamic catch values are not supported in JSON Schema")}n.default=l},dG=(t,e,n,r)=>{const s=t._zod.def,a=e.io==="input"?s.in._zod.def.type==="transform"?s.out:s.in:s.out;xn(a,e,r);const l=e.seen.get(t);l.ref=a},hG=(t,e,n,r)=>{const s=t._zod.def;xn(s.innerType,e,r);const a=e.seen.get(t);a.ref=s.innerType,n.readOnly=!0},UA=(t,e,n,r)=>{const s=t._zod.def;xn(s.innerType,e,r);const a=e.seen.get(t);a.ref=s.innerType},pG=de("ZodISODateTime",(t,e)=>{CV.init(t,e),It.init(t,e)});function mG(t){return AH(pG,t)}const gG=de("ZodISODate",(t,e)=>{TV.init(t,e),It.init(t,e)});function yG(t){return RH(gG,t)}const bG=de("ZodISOTime",(t,e)=>{AV.init(t,e),It.init(t,e)});function _G(t){return OH(bG,t)}const vG=de("ZodISODuration",(t,e)=>{RV.init(t,e),It.init(t,e)});function xG(t){return NH(vG,t)}const wG=(t,e)=>{CA.init(t,e),t.name="ZodError",Object.defineProperties(t,{format:{value:n=>SF(t,n)},flatten:{value:n=>wF(t,n)},addIssue:{value:n=>{t.issues.push(n),t.message=JSON.stringify(t.issues,cy,2)}},addIssues:{value:n=>{t.issues.push(...n),t.message=JSON.stringify(t.issues,cy,2)}},isEmpty:{get(){return t.issues.length===0}}})},Mr=de("ZodError",wG,{Parent:Error}),SG=U0(Mr),kG=$0(Mr),EG=Ld(Mr),CG=zd(Mr),TG=CF(Mr),AG=TF(Mr),RG=AF(Mr),OG=RF(Mr),NG=OF(Mr),IG=NF(Mr),MG=IF(Mr),DG=MF(Mr),nn=de("ZodType",(t,e)=>(tn.init(t,e),Object.assign(t["~standard"],{jsonSchema:{input:ad(t,"input"),output:ad(t,"output")}}),t.toJSONSchema=QH(t,{}),t.def=e,t.type=e.type,Object.defineProperty(t,"_def",{value:e}),t.check=(...n)=>t.clone(ui(e,{checks:[...e.checks??[],...n.map(r=>typeof r=="function"?{_zod:{check:r,def:{check:"custom"},onattach:[]}}:r)]}),{parent:!0}),t.with=t.check,t.clone=(n,r)=>fi(t,n,r),t.brand=()=>t,t.register=((n,r)=>(n.add(t,r),t)),t.parse=(n,r)=>SG(t,n,r,{callee:t.parse}),t.safeParse=(n,r)=>EG(t,n,r),t.parseAsync=async(n,r)=>kG(t,n,r,{callee:t.parseAsync}),t.safeParseAsync=async(n,r)=>CG(t,n,r),t.spa=t.safeParseAsync,t.encode=(n,r)=>TG(t,n,r),t.decode=(n,r)=>AG(t,n,r),t.encodeAsync=async(n,r)=>RG(t,n,r),t.decodeAsync=async(n,r)=>OG(t,n,r),t.safeEncode=(n,r)=>NG(t,n,r),t.safeDecode=(n,r)=>IG(t,n,r),t.safeEncodeAsync=async(n,r)=>MG(t,n,r),t.safeDecodeAsync=async(n,r)=>DG(t,n,r),t.refine=(n,r)=>t.check(EK(n,r)),t.superRefine=n=>t.check(CK(n)),t.overwrite=n=>t.check(yo(n)),t.optional=()=>XS(t),t.exactOptional=()=>dK(t),t.nullable=()=>ek(t),t.nullish=()=>XS(ek(t)),t.nonoptional=n=>bK(t,n),t.array=()=>rK(t),t.or=n=>aK([t,n]),t.and=n=>lK(t,n),t.transform=n=>tk(t,uK(n)),t.default=n=>mK(t,n),t.prefault=n=>yK(t,n),t.catch=n=>vK(t,n),t.pipe=n=>tk(t,n),t.readonly=()=>SK(t),t.describe=n=>{const r=t.clone();return Il.add(r,{description:n}),r},Object.defineProperty(t,"description",{get(){return Il.get(t)?.description},configurable:!0}),t.meta=(...n)=>{if(n.length===0)return Il.get(t);const r=t.clone();return Il.add(r,n[0]),r},t.isOptional=()=>t.safeParse(void 0).success,t.isNullable=()=>t.safeParse(null).success,t.apply=n=>n(t),t)),$A=de("_ZodString",(t,e)=>{q0.init(t,e),nn.init(t,e),t._zod.processJSONSchema=(r,s,a)=>YH(t,r,s);const n=t._zod.bag;t.format=n.format??null,t.minLength=n.minimum??null,t.maxLength=n.maximum??null,t.regex=(...r)=>t.check(DH(...r)),t.includes=(...r)=>t.check(zH(...r)),t.startsWith=(...r)=>t.check(PH(...r)),t.endsWith=(...r)=>t.check(BH(...r)),t.min=(...r)=>t.check(id(...r)),t.max=(...r)=>t.check(jA(...r)),t.length=(...r)=>t.check(LA(...r)),t.nonempty=(...r)=>t.check(id(1,...r)),t.lowercase=r=>t.check(jH(r)),t.uppercase=r=>t.check(LH(r)),t.trim=()=>t.check($H()),t.normalize=(...r)=>t.check(UH(...r)),t.toLowerCase=()=>t.check(qH()),t.toUpperCase=()=>t.check(FH()),t.slugify=()=>t.check(VH())}),jG=de("ZodString",(t,e)=>{q0.init(t,e),$A.init(t,e),t.email=n=>t.check(oH(LG,n)),t.url=n=>t.check(dH(zG,n)),t.jwt=n=>t.check(TH(WG,n)),t.emoji=n=>t.check(hH(PG,n)),t.guid=n=>t.check(JS(YS,n)),t.uuid=n=>t.check(lH(Wu,n)),t.uuidv4=n=>t.check(cH(Wu,n)),t.uuidv6=n=>t.check(uH(Wu,n)),t.uuidv7=n=>t.check(fH(Wu,n)),t.nanoid=n=>t.check(pH(BG,n)),t.guid=n=>t.check(JS(YS,n)),t.cuid=n=>t.check(mH(UG,n)),t.cuid2=n=>t.check(gH($G,n)),t.ulid=n=>t.check(yH(qG,n)),t.base64=n=>t.check(kH(QG,n)),t.base64url=n=>t.check(EH(JG,n)),t.xid=n=>t.check(bH(FG,n)),t.ksuid=n=>t.check(_H(VG,n)),t.ipv4=n=>t.check(vH(HG,n)),t.ipv6=n=>t.check(xH(GG,n)),t.cidrv4=n=>t.check(wH(KG,n)),t.cidrv6=n=>t.check(SH(ZG,n)),t.e164=n=>t.check(CH(YG,n)),t.datetime=n=>t.check(mG(n)),t.date=n=>t.check(yG(n)),t.time=n=>t.check(_G(n)),t.duration=n=>t.check(xG(n))});function Yr(t){return aH(jG,t)}const It=de("ZodStringFormat",(t,e)=>{Ot.init(t,e),$A.init(t,e)}),LG=de("ZodEmail",(t,e)=>{yV.init(t,e),It.init(t,e)}),YS=de("ZodGUID",(t,e)=>{mV.init(t,e),It.init(t,e)}),Wu=de("ZodUUID",(t,e)=>{gV.init(t,e),It.init(t,e)}),zG=de("ZodURL",(t,e)=>{bV.init(t,e),It.init(t,e)}),PG=de("ZodEmoji",(t,e)=>{_V.init(t,e),It.init(t,e)}),BG=de("ZodNanoID",(t,e)=>{vV.init(t,e),It.init(t,e)}),UG=de("ZodCUID",(t,e)=>{xV.init(t,e),It.init(t,e)}),$G=de("ZodCUID2",(t,e)=>{wV.init(t,e),It.init(t,e)}),qG=de("ZodULID",(t,e)=>{SV.init(t,e),It.init(t,e)}),FG=de("ZodXID",(t,e)=>{kV.init(t,e),It.init(t,e)}),VG=de("ZodKSUID",(t,e)=>{EV.init(t,e),It.init(t,e)}),HG=de("ZodIPv4",(t,e)=>{OV.init(t,e),It.init(t,e)}),GG=de("ZodIPv6",(t,e)=>{NV.init(t,e),It.init(t,e)}),KG=de("ZodCIDRv4",(t,e)=>{IV.init(t,e),It.init(t,e)}),ZG=de("ZodCIDRv6",(t,e)=>{MV.init(t,e),It.init(t,e)}),QG=de("ZodBase64",(t,e)=>{DV.init(t,e),It.init(t,e)}),JG=de("ZodBase64URL",(t,e)=>{LV.init(t,e),It.init(t,e)}),YG=de("ZodE164",(t,e)=>{zV.init(t,e),It.init(t,e)}),WG=de("ZodJWT",(t,e)=>{BV.init(t,e),It.init(t,e)}),XG=de("ZodUnknown",(t,e)=>{UV.init(t,e),nn.init(t,e),t._zod.processJSONSchema=(n,r,s)=>XH()});function WS(){return IH(XG)}const eK=de("ZodNever",(t,e)=>{$V.init(t,e),nn.init(t,e),t._zod.processJSONSchema=(n,r,s)=>WH(t,n,r)});function tK(t){return MH(eK,t)}const nK=de("ZodArray",(t,e)=>{qV.init(t,e),nn.init(t,e),t._zod.processJSONSchema=(n,r,s)=>rG(t,n,r,s),t.element=e.element,t.min=(n,r)=>t.check(id(n,r)),t.nonempty=n=>t.check(id(1,n)),t.max=(n,r)=>t.check(jA(n,r)),t.length=(n,r)=>t.check(LA(n,r)),t.unwrap=()=>t.element});function rK(t,e){return HH(nK,t,e)}const sK=de("ZodObject",(t,e)=>{VV.init(t,e),nn.init(t,e),t._zod.processJSONSchema=(n,r,s)=>sG(t,n,r,s),pt(t,"shape",()=>e.shape),t.keyof=()=>F0(Object.keys(t._zod.def.shape)),t.catchall=n=>t.clone({...t._zod.def,catchall:n}),t.passthrough=()=>t.clone({...t._zod.def,catchall:WS()}),t.loose=()=>t.clone({...t._zod.def,catchall:WS()}),t.strict=()=>t.clone({...t._zod.def,catchall:tK()}),t.strip=()=>t.clone({...t._zod.def,catchall:void 0}),t.extend=n=>yF(t,n),t.safeExtend=n=>bF(t,n),t.merge=n=>_F(t,n),t.pick=n=>mF(t,n),t.omit=n=>gF(t,n),t.partial=(...n)=>vF(qA,t,n[0]),t.required=(...n)=>xF(FA,t,n[0])});function rs(t,e){const n={type:"object",shape:t??{},...Le(e)};return new sK(n)}const iK=de("ZodUnion",(t,e)=>{HV.init(t,e),nn.init(t,e),t._zod.processJSONSchema=(n,r,s)=>iG(t,n,r,s),t.options=e.options});function aK(t,e){return new iK({type:"union",options:t,...Le(e)})}const oK=de("ZodIntersection",(t,e)=>{GV.init(t,e),nn.init(t,e),t._zod.processJSONSchema=(n,r,s)=>aG(t,n,r,s)});function lK(t,e){return new oK({type:"intersection",left:t,right:e})}const fy=de("ZodEnum",(t,e)=>{KV.init(t,e),nn.init(t,e),t._zod.processJSONSchema=(r,s,a)=>eG(t,r,s),t.enum=e.entries,t.options=Object.values(e.entries);const n=new Set(Object.keys(e.entries));t.extract=(r,s)=>{const a={};for(const l of r)if(n.has(l))a[l]=e.entries[l];else throw new Error(`Key ${l} not found in enum`);return new fy({...e,checks:[],...Le(s),entries:a})},t.exclude=(r,s)=>{const a={...e.entries};for(const l of r)if(n.has(l))delete a[l];else throw new Error(`Key ${l} not found in enum`);return new fy({...e,checks:[],...Le(s),entries:a})}});function F0(t,e){const n=Array.isArray(t)?Object.fromEntries(t.map(r=>[r,r])):t;return new fy({type:"enum",entries:n,...Le(e)})}const cK=de("ZodTransform",(t,e)=>{ZV.init(t,e),nn.init(t,e),t._zod.processJSONSchema=(n,r,s)=>nG(t,n),t._zod.parse=(n,r)=>{if(r.direction==="backward")throw new _A(t.constructor.name);n.addIssue=a=>{if(typeof a=="string")n.issues.push(ic(a,n.value,e));else{const l=a;l.fatal&&(l.continue=!1),l.code??(l.code="custom"),l.input??(l.input=n.value),l.inst??(l.inst=t),n.issues.push(ic(l))}};const s=e.transform(n.value,n);return s instanceof Promise?s.then(a=>(n.value=a,n)):(n.value=s,n)}});function uK(t){return new cK({type:"transform",transform:t})}const qA=de("ZodOptional",(t,e)=>{DA.init(t,e),nn.init(t,e),t._zod.processJSONSchema=(n,r,s)=>UA(t,n,r,s),t.unwrap=()=>t._zod.def.innerType});function XS(t){return new qA({type:"optional",innerType:t})}const fK=de("ZodExactOptional",(t,e)=>{QV.init(t,e),nn.init(t,e),t._zod.processJSONSchema=(n,r,s)=>UA(t,n,r,s),t.unwrap=()=>t._zod.def.innerType});function dK(t){return new fK({type:"optional",innerType:t})}const hK=de("ZodNullable",(t,e)=>{JV.init(t,e),nn.init(t,e),t._zod.processJSONSchema=(n,r,s)=>oG(t,n,r,s),t.unwrap=()=>t._zod.def.innerType});function ek(t){return new hK({type:"nullable",innerType:t})}const pK=de("ZodDefault",(t,e)=>{YV.init(t,e),nn.init(t,e),t._zod.processJSONSchema=(n,r,s)=>cG(t,n,r,s),t.unwrap=()=>t._zod.def.innerType,t.removeDefault=t.unwrap});function mK(t,e){return new pK({type:"default",innerType:t,get defaultValue(){return typeof e=="function"?e():SA(e)}})}const gK=de("ZodPrefault",(t,e)=>{WV.init(t,e),nn.init(t,e),t._zod.processJSONSchema=(n,r,s)=>uG(t,n,r,s),t.unwrap=()=>t._zod.def.innerType});function yK(t,e){return new gK({type:"prefault",innerType:t,get defaultValue(){return typeof e=="function"?e():SA(e)}})}const FA=de("ZodNonOptional",(t,e)=>{XV.init(t,e),nn.init(t,e),t._zod.processJSONSchema=(n,r,s)=>lG(t,n,r,s),t.unwrap=()=>t._zod.def.innerType});function bK(t,e){return new FA({type:"nonoptional",innerType:t,...Le(e)})}const _K=de("ZodCatch",(t,e)=>{eH.init(t,e),nn.init(t,e),t._zod.processJSONSchema=(n,r,s)=>fG(t,n,r,s),t.unwrap=()=>t._zod.def.innerType,t.removeCatch=t.unwrap});function vK(t,e){return new _K({type:"catch",innerType:t,catchValue:typeof e=="function"?e:()=>e})}const xK=de("ZodPipe",(t,e)=>{tH.init(t,e),nn.init(t,e),t._zod.processJSONSchema=(n,r,s)=>dG(t,n,r,s),t.in=e.in,t.out=e.out});function tk(t,e){return new xK({type:"pipe",in:t,out:e})}const wK=de("ZodReadonly",(t,e)=>{nH.init(t,e),nn.init(t,e),t._zod.processJSONSchema=(n,r,s)=>hG(t,n,r,s),t.unwrap=()=>t._zod.def.innerType});function SK(t){return new wK({type:"readonly",innerType:t})}const kK=de("ZodCustom",(t,e)=>{rH.init(t,e),nn.init(t,e),t._zod.processJSONSchema=(n,r,s)=>tG(t,n)});function EK(t,e={}){return GH(kK,t,e)}function CK(t){return KH(t)}const nk=10*1024;function TK(t){try{const e=JSON.parse(t);return JSON.stringify(e,null,2)}catch{return t}}function AK(t){return t?t.length<=nk?t:t.slice(0,nk)+`
...[TRUNCATED]`:"(empty)"}function RK(t){const e=t.http?.body??{type:"none"},n=e.type==="json"||e.type==="raw"?e.content:e.type==="form-urlencoded"?e.data:e.type==="form-data"?e.data.map(r=>({key:r.key,type:r.type,value:r.type==="file"?r.file?.name:r.value})):null;return{method:t.http?.method??"GET",url:t.url,headers:(t.http?.headers??[]).filter(r=>r.enabled!==!1),queryParams:(t.http?.query??[]).filter(r=>r.enabled!==!1),body:{type:e.type,content:n}}}function OK(t,e){const n=t.http?.response;return n?{status:n.status,statusCode:n.statusCode,headers:n.headers,body:AK(e),duration:n.duration}:null}const VA=rs({}),NK=rs({method:F0(["GET","POST","PUT","PATCH","DELETE","OPTIONS","HEAD"]).describe("The HTTP method")}),IK=rs({url:Yr().describe("The full URL for the request")}),MK=rs({headers:Yr().describe('JSON array of header objects with "key", "value", and optional "enabled" (default true) properties. Example: [{"key": "Content-Type", "value": "application/json"}]')}),DK=rs({key:Yr().describe("The header name"),value:Yr().describe("The header value")}),jK=rs({params:Yr().describe('JSON array of parameter objects with "key", "value", and optional "enabled" (default true) properties. Example: [{"key": "page", "value": "1"}]')}),LK=rs({key:Yr().describe("The parameter name"),value:Yr().describe("The parameter value")}),zK=rs({type:F0(["none","json","xml","form-urlencoded","form-data","raw"]).describe("The body type"),content:Yr().optional().describe("The body content. For JSON/XML/raw, provide the content string. For form-urlencoded/form-data, provide JSON array like headers/params. Note: form-data only supports text fields (not file uploads) via this tool.")}),PK=rs({key:Yr().describe("The header name to remove (case-insensitive)")}),BK=rs({key:Yr().describe("The query parameter name to remove")}),UK=Ur({name:"get_current_request",description:"Get the current HTTP request configuration including method, URL, headers, query params, and body",inputSchema:VA}),$K=Ur({name:"get_response",description:"Get the response from the last executed request, including status, headers, and body",inputSchema:VA}),qK=Ur({name:"set_method",description:"Set the HTTP method for the request",inputSchema:NK}),FK=Ur({name:"set_url",description:"Set the URL for the request",inputSchema:IK}),VK=Ur({name:"set_headers",description:"Set the headers for the request. This replaces all existing headers.",inputSchema:MK}),HK=Ur({name:"add_header",description:"Add a single header to the request",inputSchema:DK}),GK=Ur({name:"set_query_params",description:"Set the query parameters for the request. This replaces all existing query params.",inputSchema:jK}),KK=Ur({name:"add_query_param",description:"Add a single query parameter to the request",inputSchema:LK}),ZK=Ur({name:"set_body",description:"Set the request body",inputSchema:zK}),QK=Ur({name:"remove_header",description:"Remove a header from the request by name",inputSchema:PK}),JK=Ur({name:"remove_query_param",description:"Remove a query parameter from the request by name",inputSchema:BK});function YK(t){const{request:e,setters:n,responseBodyText:r}=t,s=UK.client(async()=>RK(e)),a=$K.client(async()=>OK(e,r)||{error:"No response available. Execute the request first."}),l=qK.client(async w=>{const E=w;return n.setMethod(E.method),{success:!0,method:E.method}}),u=FK.client(async w=>{const E=w;return n.setUrl(E.url),{success:!0,url:E.url}}),f=VK.client(async w=>{const E=w;try{const S=JSON.parse(E.headers).map(C=>({id:Ar(),key:C.key,value:C.value,enabled:C.enabled!==!1}));return n.setHeaders(S),{success:!0,headerCount:S.length}}catch(S){return{success:!1,error:`Invalid JSON for headers: ${S instanceof Error?S.message:"parse error"}`}}}),d=HK.client(async w=>{const E=w,C=[...e.http?.headers??[],{id:Ar(),key:E.key,value:E.value,enabled:!0}];return n.setHeaders(C),{success:!0,added:{key:E.key,value:E.value}}}),m=GK.client(async w=>{const E=w;try{const S=JSON.parse(E.params).map(C=>({id:Ar(),key:C.key,value:C.value,enabled:C.enabled!==!1}));return n.setQuery(S),{success:!0,paramCount:S.length}}catch(S){return{success:!1,error:`Invalid JSON for query params: ${S instanceof Error?S.message:"parse error"}`}}}),p=KK.client(async w=>{const E=w,C=[...e.http?.query??[],{id:Ar(),key:E.key,value:E.value,enabled:!0}];return n.setQuery(C),{success:!0,added:{key:E.key,value:E.value}}}),y=ZK.client(async w=>{const E=w;try{let S;switch(E.type){case"none":S={type:"none"};break;case"json":S={type:"json",content:TK(E.content||"")};break;case"xml":S={type:"xml",content:E.content||""};break;case"raw":S={type:"raw",content:E.content||""};break;case"form-urlencoded":{S={type:"form-urlencoded",data:E.content?JSON.parse(E.content).map(T=>({id:Ar(),key:T.key,value:T.value,enabled:T.enabled!==!1})):[]};break}case"form-data":{S={type:"form-data",data:E.content?JSON.parse(E.content).map(T=>({id:Ar(),key:T.key,type:"text",value:T.value||"",enabled:T.enabled!==!1,file:null,fileName:""})):[]};break}default:S={type:"none"}}return n.setBody(S),{success:!0,bodyType:E.type}}catch(S){return{success:!1,error:`Invalid body content: ${S instanceof Error?S.message:"parse error"}`}}}),g=QK.client(async w=>{const E=w,S=E.key.toLowerCase(),C=e.http?.headers??[],T=C.filter(I=>I.key.toLowerCase()!==S),M=C.length-T.length;return M===0?{success:!1,error:`Header '${E.key}' not found`}:(n.setHeaders(T),{success:!0,removed:E.key,removedCount:M})}),v=JK.client(async w=>{const E=w,S=e.http?.query??[],C=S.filter(M=>M.key!==E.key),T=S.length-C.length;return T===0?{success:!1,error:`Query parameter '${E.key}' not found`}:(n.setQuery(C),{success:!0,removed:E.key,removedCount:T})});return I9(s,a,l,u,f,d,g,m,p,v,y)}function WK(){return`You are an AI assistant embedded in an HTTP client (similar to Postman or Insomnia). You have tools that directly modify the request form visible to the user in real-time.

IMPORTANT: When you use tools like set_url, set_headers, set_body, etc., the changes appear immediately in the user's request panel. You are actively editing their requestnot just describing what to do. The user sees updates live as you make them.

Your capabilities:
- View the current request configuration (method, URL, headers, query params, body)
- Directly modify any part of the requestchanges are applied instantly to the UI
- View and analyze responses after the user executes the request

Guidelines:
- When the user asks to create or modify a request, use the appropriate tools to make the changes directly
- After making changes, briefly confirm what you did (e.g., "I've set the URL to ... and added the Authorization header")
- You cannot execute/send requeststhe user must click Send. After they do, you can analyze the response using get_response
- When analyzing responses, look for errors, unexpected data, or issues
- Be concise but helpful in your explanations
- If the user's request is ambiguous, ask for clarification
- When adding headers or params, preserve existing ones unless the user asks to replace them
- Format your responses using Markdown: use **bold**, \`code\`, code blocks with language tags, lists, and headers when appropriate`}const rk={name:"Request Assistant",placeholder:"Ask about your request..."};function XK(t){const e=Pe.c(86),{isOpen:n,onClose:r,request:s,setters:a}=t,[l,u]=Z.useState(""),[f,d]=Z.useState(),m=Z.useRef(null),p=Z.useRef(null),y=Z.useRef(s.id);let g;e[0]!==s.http?.response?(g=()=>{(async function(){const ve=s.http?.response;if(ve?.body)try{const Ue=await ve.body.text();d(Ue)}catch{d("(unable to read response body)")}else d(void 0)})()},e[0]=s.http?.response,e[1]=g):g=e[1];const v=s.http?.response,w=s.http?.response?.body;let E;e[2]!==v||e[3]!==w?(E=[v,w],e[2]=v,e[3]=w,e[4]=E):E=e[4],Z.useEffect(g,E);let S;e[5]!==s||e[6]!==f||e[7]!==a?(S={request:s,setters:a,responseBodyText:f},e[5]=s,e[6]=f,e[7]=a,e[8]=S):S=e[8];const C=S;let T;e[9]!==C?(T=YK(C),e[9]=C,e[10]=T):T=e[10];const M=T;let I;if(e[11]!==M){const ue=uF(),ye=cF(ue),ve=WK();I=M9(Ue=>d9({adapter:ye,messages:Ue,tools:M,systemPrompts:[ve],agentLoopStrategy:zC(10)})),e[11]=M,e[12]=I}else I=e[12];const R=I;let U;e[13]!==R||e[14]!==M?(U={connection:R,tools:M},e[13]=R,e[14]=M,e[15]=U):U=e[15];const{messages:q,sendMessage:K,isLoading:j,stop:J,clear:ne}=D9(U);let me,X;e[16]!==ne||e[17]!==s.id?(X=()=>{y.current!==s.id&&(ne(),y.current=s.id)},me=[s.id,ne],e[16]=ne,e[17]=s.id,e[18]=me,e[19]=X):(me=e[18],X=e[19]),Z.useEffect(X,me);let F;e[20]===Symbol.for("react.memo_cache_sentinel")?(F=()=>{m.current?.scrollIntoView({behavior:"smooth"})},e[20]=F):F=e[20];let B;e[21]!==q?(B=[q],e[21]=q,e[22]=B):B=e[22],Z.useEffect(F,B);let G,ie;e[23]!==n?(G=()=>{n&&p.current?.focus()},ie=[n],e[23]=n,e[24]=G,e[25]=ie):(G=e[24],ie=e[25]),Z.useEffect(G,ie);let re;e[26]!==l||e[27]!==j||e[28]!==K?(re=ue=>{ue.preventDefault(),!(!l.trim()||j)&&(K(l.trim()),u(""))},e[26]=l,e[27]=j,e[28]=K,e[29]=re):re=e[29];const N=re;let D;e[30]!==N?(D=ue=>{ue.key==="Enter"&&!ue.shiftKey&&(ue.preventDefault(),N(ue))},e[30]=N,e[31]=D):D=e[31];const H=D,O=eZ;let le;e[32]!==j||e[33]!==q?(le=(ue,ye)=>j&&ue.role==="assistant"&&ye===q.length-1,e[32]=j,e[33]=q,e[34]=le):le=e[34];const L=le;if(!n)return null;let P;e[35]===Symbol.for("react.memo_cache_sentinel")?(P=x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx(so,{size:16,className:"text-amber-500"}),x.jsx("h3",{className:"font-medium text-neutral-900 dark:text-neutral-100",children:rk.name})]}),e[35]=P):P=e[35];let he;e[36]===Symbol.for("react.memo_cache_sentinel")?(he=x.jsx(Ki,{size:16}),e[36]=he):he=e[36];let xe;e[37]!==ne?(xe=x.jsx("button",{onClick:ne,className:"p-1.5 text-neutral-500 hover:text-neutral-900 hover:bg-neutral-100 dark:hover:text-neutral-300 dark:hover:bg-neutral-800 rounded transition-colors",title:"Clear chat",children:he}),e[37]=ne,e[38]=xe):xe=e[38];let _e;e[39]===Symbol.for("react.memo_cache_sentinel")?(_e=x.jsx(dd,{size:16}),e[39]=_e):_e=e[39];let Ce;e[40]!==r?(Ce=x.jsx("button",{onClick:r,className:"p-1.5 text-neutral-500 hover:text-neutral-900 hover:bg-neutral-100 dark:hover:text-neutral-300 dark:hover:bg-neutral-800 rounded transition-colors",children:_e}),e[40]=r,e[41]=Ce):Ce=e[41];let Me;e[42]!==xe||e[43]!==Ce?(Me=x.jsxs("div",{className:"shrink-0 h-12 px-4 flex items-center justify-between border-b border-neutral-200 dark:border-neutral-800",children:[P,x.jsxs("div",{className:"flex items-center gap-1",children:[xe,Ce]})]}),e[42]=xe,e[43]=Ce,e[44]=Me):Me=e[44];let st;e[45]!==q.length?(st=q.length===0&&x.jsxs("div",{className:"text-center text-neutral-500 dark:text-neutral-400 text-sm py-8",children:[x.jsx(so,{size:24,className:"mx-auto mb-3 text-amber-500/50"}),x.jsx("p",{className:"mb-2",children:"Ask me to help build your request"}),x.jsx("p",{className:"text-xs text-neutral-400 dark:text-neutral-500",children:'Examples: "Create a POST request to /api/users with a JSON body" or "Add an Authorization header"'})]}),e[45]=q.length,e[46]=st):st=e[46];let Et;if(e[47]!==L||e[48]!==q){let ue;e[50]!==L?(ue=(ye,ve)=>{const Ue=O(ye);return x.jsx("div",{className:`text-sm ${ye.role==="user"?"bg-neutral-100 dark:bg-neutral-800 rounded-lg px-3 py-2":""}`,children:x.jsx("div",{className:ye.role==="user"?"text-neutral-900 dark:text-neutral-100":"text-neutral-700 dark:text-neutral-300",children:ye.role==="assistant"?Ue?x.jsx(LC,{children:Ue}):L(ye,ve)?x.jsxs("span",{className:"flex items-center gap-2 text-neutral-400",children:[x.jsx(Rf,{size:14,className:"animate-spin"}),"Thinking..."]}):null:x.jsx("span",{className:"whitespace-pre-wrap",children:Ue})})},ye.id)},e[50]=L,e[51]=ue):ue=e[51],Et=q.map(ue),e[47]=L,e[48]=q,e[49]=Et}else Et=e[49];let Nt;e[52]!==j||e[53]!==q?(Nt=j&&(q.length===0||q[q.length-1]?.role==="user")&&x.jsx("div",{className:"text-sm",children:x.jsx("div",{className:"text-neutral-800 dark:text-neutral-200",children:x.jsxs("span",{className:"flex items-center gap-2 text-neutral-400",children:[x.jsx(Rf,{size:14,className:"animate-spin"}),"Thinking..."]})})}),e[52]=j,e[53]=q,e[54]=Nt):Nt=e[54];let fn;e[55]===Symbol.for("react.memo_cache_sentinel")?(fn=x.jsx("div",{ref:m}),e[55]=fn):fn=e[55];let rn;e[56]!==st||e[57]!==Et||e[58]!==Nt?(rn=x.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 min-h-0",children:[st,Et,Nt,fn]}),e[56]=st,e[57]=Et,e[58]=Nt,e[59]=rn):rn=e[59];let Xn;e[60]===Symbol.for("react.memo_cache_sentinel")?(Xn=ue=>u(ue.target.value),e[60]=Xn):Xn=e[60];let er;e[61]===Symbol.for("react.memo_cache_sentinel")?(er={maxHeight:"120px"},e[61]=er):er=e[61];let Sn;e[62]!==H||e[63]!==l||e[64]!==j?(Sn=x.jsx("textarea",{ref:p,value:l,onChange:Xn,onKeyDown:H,placeholder:rk.placeholder,rows:1,disabled:j,className:"flex-1 px-3 py-2 bg-neutral-50 border border-neutral-200 dark:bg-neutral-800 dark:border-neutral-700 rounded-lg text-neutral-900 dark:text-neutral-100 text-sm placeholder-neutral-400 resize-none focus:outline-none focus:ring-2 focus:ring-amber-500/50 focus:border-amber-500 disabled:opacity-50",style:er}),e[62]=H,e[63]=l,e[64]=j,e[65]=Sn):Sn=e[65];const dn=j?"button":"submit",ke=j?J:void 0;let Ve;e[66]!==l||e[67]!==j?(Ve=!j&&!l.trim(),e[66]=l,e[67]=j,e[68]=Ve):Ve=e[68];let He;e[69]!==j?(He=j?x.jsx(DD,{size:16}):x.jsx(AD,{size:16}),e[69]=j,e[70]=He):He=e[70];let Ae;e[71]!==dn||e[72]!==ke||e[73]!==Ve||e[74]!==He?(Ae=x.jsx("button",{type:dn,onClick:ke,disabled:Ve,className:"p-2 bg-amber-500 hover:bg-amber-400 disabled:bg-neutral-300 dark:disabled:bg-neutral-700 disabled:text-neutral-500 text-white rounded-lg transition-colors",children:He}),e[71]=dn,e[72]=ke,e[73]=Ve,e[74]=He,e[75]=Ae):Ae=e[75];let St;e[76]!==Sn||e[77]!==Ae?(St=x.jsxs("div",{className:"flex items-end gap-2",children:[Sn,Ae]}),e[76]=Sn,e[77]=Ae,e[78]=St):St=e[78];let se;e[79]!==N||e[80]!==St?(se=x.jsx("form",{onSubmit:N,className:"shrink-0 p-3 border-t border-neutral-200 dark:border-neutral-800",children:St}),e[79]=N,e[80]=St,e[81]=se):se=e[81];let ge;return e[82]!==Me||e[83]!==rn||e[84]!==se?(ge=x.jsxs("div",{className:"w-96 shrink-0 bg-white border border-neutral-200 dark:bg-neutral-900 dark:border-neutral-800 flex flex-col rounded-xl overflow-hidden",children:[Me,rn,se]}),e[82]=Me,e[83]=rn,e[84]=se,e[85]=ge):ge=e[85],ge}function eZ(t){return t.parts.filter(nZ).map(tZ).join("").replace(/^undefined/,"")}function tZ(t){return t.content}function nZ(t){return t.type==="text"&&!!t.content}function rZ(){const t=Pe.c(13),{request:e,aiPanelOpen:n,toggleAiPanel:r,setMethod:s,setUrl:a,setHeaders:l,setQuery:u,setBody:f}=Xt();let d;t[0]===Symbol.for("react.memo_cache_sentinel")?(d=x.jsx(JD,{}),t[0]=d):d=t[0];let m;t[1]===Symbol.for("react.memo_cache_sentinel")?(m=x.jsx("div",{className:"flex-1 flex flex-col overflow-hidden gap-2 min-w-0",children:x.jsx("div",{className:"flex-1 overflow-hidden min-h-0",children:x.jsx(a9,{})})}),t[1]=m):m=t[1];let p;t[2]!==n||t[3]!==e||t[4]!==f||t[5]!==l||t[6]!==s||t[7]!==u||t[8]!==a||t[9]!==r?(p=n&&Ly().ai?.model&&x.jsx(XK,{isOpen:n,onClose:r,request:e,setters:{setMethod:s,setUrl:a,setHeaders:l,setQuery:u,setBody:f}}),t[2]=n,t[3]=e,t[4]=f,t[5]=l,t[6]=s,t[7]=u,t[8]=a,t[9]=r,t[10]=p):p=t[10];let y;return t[11]!==p?(y=x.jsxs("div",{className:"h-screen flex bg-neutral-50 dark:bg-[#0d0d0d] py-2 pr-2 pl-1 gap-2 text-neutral-900 dark:text-neutral-100",children:[d,m,p]}),t[11]=p,t[12]=y):y=t[12],y}function sZ(){const t=Pe.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=x.jsx(j3,{children:x.jsx(z3,{children:x.jsx(rZ,{})})}),t[0]=e):e=t[0],e}WD().then(()=>{uO.createRoot(document.getElementById("root")).render(x.jsx(Z.StrictMode,{children:x.jsx(LO,{client:Mk,children:x.jsx(sZ,{})})}))});
