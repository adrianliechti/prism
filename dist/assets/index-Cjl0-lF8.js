const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/angular-html-CU67Zn6k.js","assets/html-GMplVEZG.js","assets/javascript-wDzz0qaB.js","assets/css-DPfMkruS.js","assets/angular-ts-BwZT4LLn.js","assets/scss-OYdSNvt2.js","assets/apl-dKokRX4l.js","assets/xml-sdJ4AIDG.js","assets/java-CylS5w8V.js","assets/json-Cp-IABpG.js","assets/astro-CbQHKStN.js","assets/typescript-BPQ3VLAy.js","assets/postcss-CXtECtnM.js","assets/tsx-COt5Ahok.js","assets/blade-DVc8C-J4.js","assets/html-derivative-BFtXZ54Q.js","assets/sql-BLtJtn59.js","assets/bsl-BO_Y6i37.js","assets/sdbl-DVxCFoDh.js","assets/cairo-KRGpt6FW.js","assets/python-B6aJPvgy.js","assets/cobol-nwyudZeR.js","assets/coffee-Ch7k5sss.js","assets/cpp-CofmeUqb.js","assets/regexp-CDVJQ6XC.js","assets/glsl-DplSGwfg.js","assets/c-BIGW1oBm.js","assets/crystal-tKQVLTB8.js","assets/shellscript-Yzrsuije.js","assets/edge-BkV0erSs.js","assets/elixir-CDX3lj18.js","assets/elm-DbKCFpqz.js","assets/erb-BOJIQeun.js","assets/ruby-BvKwtOVI.js","assets/haml-B8DHNrY2.js","assets/graphql-ChdNCCLP.js","assets/jsx-g9-lgVsj.js","assets/lua-BbnMAYS6.js","assets/yaml-Buea-lGh.js","assets/erlang-DsQrWhSR.js","assets/markdown-Cvjx9yec.js","assets/fortran-fixed-form-BZjJHVRy.js","assets/fortran-free-form-D22FLkUw.js","assets/fsharp-CXgrBDvD.js","assets/gdresource-B7Tvp0Sc.js","assets/gdshader-DkwncUOv.js","assets/gdscript-DTMYz4Jt.js","assets/git-commit-F4YmCXRG.js","assets/diff-D97Zzqfu.js","assets/git-rebase-r7XF79zn.js","assets/glimmer-js-Rg0-pVw9.js","assets/glimmer-ts-U6CK756n.js","assets/hack-CaT9iCJl.js","assets/handlebars-BL8al0AC.js","assets/http-jrhK8wxY.js","assets/hurl-irOxFIW8.js","assets/csv-fuZLfV_i.js","assets/hxml-Bvhsp5Yf.js","assets/haxe-CzTSHFRz.js","assets/jinja-4LBKfQ-Z.js","assets/jison-wvAkD_A8.js","assets/julia-C8NyazO9.js","assets/r-DiinP2Uv.js","assets/latex-BdAV_C_H.js","assets/tex-CxkMU7Pf.js","assets/liquid-DYVedYrR.js","assets/marko-CPi9NSCl.js","assets/less-B1dDrJ26.js","assets/mdc-DUICxH0z.js","assets/nginx-DknmC5AR.js","assets/nim-CVrawwO9.js","assets/perl-C0TMdlhV.js","assets/php-CDn_0X-4.js","assets/pug-CGlum2m_.js","assets/qml-3beO22l8.js","assets/razor-CE9lU5zL.js","assets/csharp-K5feNrxe.js","assets/rst-B0xPkSld.js","assets/cmake-D1j8_8rp.js","assets/sas-cz2c8ADy.js","assets/shaderlab-Dg9Lc6iA.js","assets/hlsl-D3lLCCz7.js","assets/shellsession-BADoaaVG.js","assets/soy-Brmx7dQM.js","assets/sparql-rVzFXLq3.js","assets/turtle-BsS91CYL.js","assets/stata-BH5u7GGu.js","assets/svelte-3Dk4HxPD.js","assets/templ-W15q3VgB.js","assets/go-Dn2_MT6a.js","assets/ts-tags-zn1MmPIZ.js","assets/twig-CO9l9SDP.js","assets/vue-DnHKYNfI.js","assets/vue-html-CChd_i61.js","assets/vue-vine-8moa0y9V.js","assets/stylus-BEDo0Tqx.js","assets/xsl-CtQFsRM5.js"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();function WS(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Vp={exports:{}},Wo={};var Dx;function WR(){if(Dx)return Wo;Dx=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,s,a){var l=null;if(a!==void 0&&(l=""+a),s.key!==void 0&&(l=""+s.key),"key"in s){a={};for(var u in s)u!=="key"&&(a[u]=s[u])}else a=s;return s=a.ref,{$$typeof:t,type:r,key:l,ref:s!==void 0?s:null,props:a}}return Wo.Fragment=e,Wo.jsx=n,Wo.jsxs=n,Wo}var jx;function eO(){return jx||(jx=1,Vp.exports=WR()),Vp.exports}var w=eO(),Hp={exports:{}},ze={};var Lx;function tO(){if(Lx)return ze;Lx=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),p=Symbol.for("react.activity"),y=Symbol.iterator;function g(N){return N===null||typeof N!="object"?null:(N=y&&N[y]||N["@@iterator"],typeof N=="function"?N:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,E={};function S(N,U,R){this.props=N,this.context=U,this.refs=E,this.updater=R||v}S.prototype.isReactComponent={},S.prototype.setState=function(N,U){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,U,"setState")},S.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function T(){}T.prototype=S.prototype;function A(N,U,R){this.props=N,this.context=U,this.refs=E,this.updater=R||v}var j=A.prototype=new T;j.constructor=A,x(j,S.prototype),j.isPureReactComponent=!0;var D=Array.isArray;function I(){}var P={H:null,A:null,T:null,S:null},q=Object.prototype.hasOwnProperty;function H(N,U,R){var te=R.ref;return{$$typeof:t,type:N,key:U,ref:te!==void 0?te:null,props:R}}function z(N,U){return H(N.type,U,N.props)}function Q(N){return typeof N=="object"&&N!==null&&N.$$typeof===t}function re(N){var U={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(R){return U[R]})}var pe=/\/+/g;function X(N,U){return typeof N=="object"&&N!==null&&N.key!=null?re(""+N.key):U.toString(36)}function V(N){switch(N.status){case"fulfilled":return N.value;case"rejected":throw N.reason;default:switch(typeof N.status=="string"?N.then(I,I):(N.status="pending",N.then(function(U){N.status==="pending"&&(N.status="fulfilled",N.value=U)},function(U){N.status==="pending"&&(N.status="rejected",N.reason=U)})),N.status){case"fulfilled":return N.value;case"rejected":throw N.reason}}throw N}function $(N,U,R,te,ce){var he=typeof N;(he==="undefined"||he==="boolean")&&(N=null);var xe=!1;if(N===null)xe=!0;else switch(he){case"bigint":case"string":case"number":xe=!0;break;case"object":switch(N.$$typeof){case t:case e:xe=!0;break;case m:return xe=N._init,$(xe(N._payload),U,R,te,ce)}}if(xe)return ce=ce(N),xe=te===""?"."+X(N,0):te,D(ce)?(R="",xe!=null&&(R=xe.replace(pe,"$&/")+"/"),$(ce,U,R,"",function(et){return et})):ce!=null&&(Q(ce)&&(ce=z(ce,R+(ce.key==null||N&&N.key===ce.key?"":(""+ce.key).replace(pe,"$&/")+"/")+xe)),U.push(ce)),1;xe=0;var Me=te===""?".":te+":";if(D(N))for(var je=0;je<N.length;je++)te=N[je],he=Me+X(te,je),xe+=$(te,U,R,he,ce);else if(je=g(N),typeof je=="function")for(N=je.call(N),je=0;!(te=N.next()).done;)te=te.value,he=Me+X(te,je++),xe+=$(te,U,R,he,ce);else if(he==="object"){if(typeof N.then=="function")return $(V(N),U,R,te,ce);throw U=String(N),Error("Objects are not valid as a React child (found: "+(U==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":U)+"). If you meant to render a collection of children, use an array instead.")}return xe}function G(N,U,R){if(N==null)return N;var te=[],ce=0;return $(N,te,"","",function(he){return U.call(R,he,ce++)}),te}function oe(N){if(N._status===-1){var U=N._result;U=U(),U.then(function(R){(N._status===0||N._status===-1)&&(N._status=1,N._result=R)},function(R){(N._status===0||N._status===-1)&&(N._status=2,N._result=R)}),N._status===-1&&(N._status=0,N._result=U)}if(N._status===1)return N._result.default;throw N._result}var M=typeof reportError=="function"?reportError:function(N){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var U=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof N=="object"&&N!==null&&typeof N.message=="string"?String(N.message):String(N),error:N});if(!window.dispatchEvent(U))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",N);return}console.error(N)},C={map:G,forEach:function(N,U,R){G(N,function(){U.apply(this,arguments)},R)},count:function(N){var U=0;return G(N,function(){U++}),U},toArray:function(N){return G(N,function(U){return U})||[]},only:function(N){if(!Q(N))throw Error("React.Children.only expected to receive a single React element child.");return N}};return ze.Activity=p,ze.Children=C,ze.Component=S,ze.Fragment=n,ze.Profiler=s,ze.PureComponent=A,ze.StrictMode=r,ze.Suspense=f,ze.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=P,ze.__COMPILER_RUNTIME={__proto__:null,c:function(N){return P.H.useMemoCache(N)}},ze.cache=function(N){return function(){return N.apply(null,arguments)}},ze.cacheSignal=function(){return null},ze.cloneElement=function(N,U,R){if(N==null)throw Error("The argument must be a React element, but you passed "+N+".");var te=x({},N.props),ce=N.key;if(U!=null)for(he in U.key!==void 0&&(ce=""+U.key),U)!q.call(U,he)||he==="key"||he==="__self"||he==="__source"||he==="ref"&&U.ref===void 0||(te[he]=U[he]);var he=arguments.length-2;if(he===1)te.children=R;else if(1<he){for(var xe=Array(he),Me=0;Me<he;Me++)xe[Me]=arguments[Me+2];te.children=xe}return H(N.type,ce,te)},ze.createContext=function(N){return N={$$typeof:l,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null},N.Provider=N,N.Consumer={$$typeof:a,_context:N},N},ze.createElement=function(N,U,R){var te,ce={},he=null;if(U!=null)for(te in U.key!==void 0&&(he=""+U.key),U)q.call(U,te)&&te!=="key"&&te!=="__self"&&te!=="__source"&&(ce[te]=U[te]);var xe=arguments.length-2;if(xe===1)ce.children=R;else if(1<xe){for(var Me=Array(xe),je=0;je<xe;je++)Me[je]=arguments[je+2];ce.children=Me}if(N&&N.defaultProps)for(te in xe=N.defaultProps,xe)ce[te]===void 0&&(ce[te]=xe[te]);return H(N,he,ce)},ze.createRef=function(){return{current:null}},ze.forwardRef=function(N){return{$$typeof:u,render:N}},ze.isValidElement=Q,ze.lazy=function(N){return{$$typeof:m,_payload:{_status:-1,_result:N},_init:oe}},ze.memo=function(N,U){return{$$typeof:d,type:N,compare:U===void 0?null:U}},ze.startTransition=function(N){var U=P.T,R={};P.T=R;try{var te=N(),ce=P.S;ce!==null&&ce(R,te),typeof te=="object"&&te!==null&&typeof te.then=="function"&&te.then(I,M)}catch(he){M(he)}finally{U!==null&&R.types!==null&&(U.types=R.types),P.T=U}},ze.unstable_useCacheRefresh=function(){return P.H.useCacheRefresh()},ze.use=function(N){return P.H.use(N)},ze.useActionState=function(N,U,R){return P.H.useActionState(N,U,R)},ze.useCallback=function(N,U){return P.H.useCallback(N,U)},ze.useContext=function(N){return P.H.useContext(N)},ze.useDebugValue=function(){},ze.useDeferredValue=function(N,U){return P.H.useDeferredValue(N,U)},ze.useEffect=function(N,U){return P.H.useEffect(N,U)},ze.useEffectEvent=function(N){return P.H.useEffectEvent(N)},ze.useId=function(){return P.H.useId()},ze.useImperativeHandle=function(N,U,R){return P.H.useImperativeHandle(N,U,R)},ze.useInsertionEffect=function(N,U){return P.H.useInsertionEffect(N,U)},ze.useLayoutEffect=function(N,U){return P.H.useLayoutEffect(N,U)},ze.useMemo=function(N,U){return P.H.useMemo(N,U)},ze.useOptimistic=function(N,U){return P.H.useOptimistic(N,U)},ze.useReducer=function(N,U,R){return P.H.useReducer(N,U,R)},ze.useRef=function(N){return P.H.useRef(N)},ze.useState=function(N){return P.H.useState(N)},ze.useSyncExternalStore=function(N,U,R){return P.H.useSyncExternalStore(N,U,R)},ze.useTransition=function(){return P.H.useTransition()},ze.version="19.2.3",ze}var zx;function td(){return zx||(zx=1,Hp.exports=tO()),Hp.exports}var K=td(),Gp={exports:{}},el={},Kp={exports:{}},Zp={};var Px;function nO(){return Px||(Px=1,(function(t){function e($,G){var oe=$.length;$.push(G);e:for(;0<oe;){var M=oe-1>>>1,C=$[M];if(0<s(C,G))$[M]=G,$[oe]=C,oe=M;else break e}}function n($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var G=$[0],oe=$.pop();if(oe!==G){$[0]=oe;e:for(var M=0,C=$.length,N=C>>>1;M<N;){var U=2*(M+1)-1,R=$[U],te=U+1,ce=$[te];if(0>s(R,oe))te<C&&0>s(ce,R)?($[M]=ce,$[te]=oe,M=te):($[M]=R,$[U]=oe,M=U);else if(te<C&&0>s(ce,oe))$[M]=ce,$[te]=oe,M=te;else break e}}return G}function s($,G){var oe=$.sortIndex-G.sortIndex;return oe!==0?oe:$.id-G.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var l=Date,u=l.now();t.unstable_now=function(){return l.now()-u}}var f=[],d=[],m=1,p=null,y=3,g=!1,v=!1,x=!1,E=!1,S=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;function j($){for(var G=n(d);G!==null;){if(G.callback===null)r(d);else if(G.startTime<=$)r(d),G.sortIndex=G.expirationTime,e(f,G);else break;G=n(d)}}function D($){if(x=!1,j($),!v)if(n(f)!==null)v=!0,I||(I=!0,re());else{var G=n(d);G!==null&&V(D,G.startTime-$)}}var I=!1,P=-1,q=5,H=-1;function z(){return E?!0:!(t.unstable_now()-H<q)}function Q(){if(E=!1,I){var $=t.unstable_now();H=$;var G=!0;try{e:{v=!1,x&&(x=!1,T(P),P=-1),g=!0;var oe=y;try{t:{for(j($),p=n(f);p!==null&&!(p.expirationTime>$&&z());){var M=p.callback;if(typeof M=="function"){p.callback=null,y=p.priorityLevel;var C=M(p.expirationTime<=$);if($=t.unstable_now(),typeof C=="function"){p.callback=C,j($),G=!0;break t}p===n(f)&&r(f),j($)}else r(f);p=n(f)}if(p!==null)G=!0;else{var N=n(d);N!==null&&V(D,N.startTime-$),G=!1}}break e}finally{p=null,y=oe,g=!1}G=void 0}}finally{G?re():I=!1}}}var re;if(typeof A=="function")re=function(){A(Q)};else if(typeof MessageChannel<"u"){var pe=new MessageChannel,X=pe.port2;pe.port1.onmessage=Q,re=function(){X.postMessage(null)}}else re=function(){S(Q,0)};function V($,G){P=S(function(){$(t.unstable_now())},G)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):q=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_next=function($){switch(y){case 1:case 2:case 3:var G=3;break;default:G=y}var oe=y;y=G;try{return $()}finally{y=oe}},t.unstable_requestPaint=function(){E=!0},t.unstable_runWithPriority=function($,G){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var oe=y;y=$;try{return G()}finally{y=oe}},t.unstable_scheduleCallback=function($,G,oe){var M=t.unstable_now();switch(typeof oe=="object"&&oe!==null?(oe=oe.delay,oe=typeof oe=="number"&&0<oe?M+oe:M):oe=M,$){case 1:var C=-1;break;case 2:C=250;break;case 5:C=1073741823;break;case 4:C=1e4;break;default:C=5e3}return C=oe+C,$={id:m++,callback:G,priorityLevel:$,startTime:oe,expirationTime:C,sortIndex:-1},oe>M?($.sortIndex=oe,e(d,$),n(f)===null&&$===n(d)&&(x?(T(P),P=-1):x=!0,V(D,oe-M))):($.sortIndex=C,e(f,$),v||g||(v=!0,I||(I=!0,re()))),$},t.unstable_shouldYield=z,t.unstable_wrapCallback=function($){var G=y;return function(){var oe=y;y=G;try{return $.apply(this,arguments)}finally{y=oe}}}})(Zp)),Zp}var Bx;function rO(){return Bx||(Bx=1,Kp.exports=nO()),Kp.exports}var Qp={exports:{}},mn={};var $x;function sO(){if($x)return mn;$x=1;var t=td();function e(f){var d="https://react.dev/errors/"+f;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)d+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+f+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},s=Symbol.for("react.portal");function a(f,d,m){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:p==null?null:""+p,children:f,containerInfo:d,implementation:m}}var l=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(f,d){if(f==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return mn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,mn.createPortal=function(f,d){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(e(299));return a(f,d,null,m)},mn.flushSync=function(f){var d=l.T,m=r.p;try{if(l.T=null,r.p=2,f)return f()}finally{l.T=d,r.p=m,r.d.f()}},mn.preconnect=function(f,d){typeof f=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,r.d.C(f,d))},mn.prefetchDNS=function(f){typeof f=="string"&&r.d.D(f)},mn.preinit=function(f,d){if(typeof f=="string"&&d&&typeof d.as=="string"){var m=d.as,p=u(m,d.crossOrigin),y=typeof d.integrity=="string"?d.integrity:void 0,g=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;m==="style"?r.d.S(f,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:p,integrity:y,fetchPriority:g}):m==="script"&&r.d.X(f,{crossOrigin:p,integrity:y,fetchPriority:g,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},mn.preinitModule=function(f,d){if(typeof f=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var m=u(d.as,d.crossOrigin);r.d.M(f,{crossOrigin:m,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&r.d.M(f)},mn.preload=function(f,d){if(typeof f=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var m=d.as,p=u(m,d.crossOrigin);r.d.L(f,m,{crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},mn.preloadModule=function(f,d){if(typeof f=="string")if(d){var m=u(d.as,d.crossOrigin);r.d.m(f,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:m,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else r.d.m(f)},mn.requestFormReset=function(f){r.d.r(f)},mn.unstable_batchedUpdates=function(f,d){return f(d)},mn.useFormState=function(f,d,m){return l.H.useFormState(f,d,m)},mn.useFormStatus=function(){return l.H.useHostTransitionStatus()},mn.version="19.2.3",mn}var Ux;function ek(){if(Ux)return Qp.exports;Ux=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Qp.exports=sO(),Qp.exports}var qx;function iO(){if(qx)return el;qx=1;var t=rO(),e=td(),n=ek();function r(i){var o="https://react.dev/errors/"+i;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)o+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function a(i){var o=i,c=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,(o.flags&4098)!==0&&(c=o.return),i=o.return;while(i)}return o.tag===3?c:null}function l(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function u(i){if(i.tag===31){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function f(i){if(a(i)!==i)throw Error(r(188))}function d(i){var o=i.alternate;if(!o){if(o=a(i),o===null)throw Error(r(188));return o!==i?null:i}for(var c=i,h=o;;){var b=c.return;if(b===null)break;var _=b.alternate;if(_===null){if(h=b.return,h!==null){c=h;continue}break}if(b.child===_.child){for(_=b.child;_;){if(_===c)return f(b),i;if(_===h)return f(b),o;_=_.sibling}throw Error(r(188))}if(c.return!==h.return)c=b,h=_;else{for(var k=!1,O=b.child;O;){if(O===c){k=!0,c=b,h=_;break}if(O===h){k=!0,h=b,c=_;break}O=O.sibling}if(!k){for(O=_.child;O;){if(O===c){k=!0,c=_,h=b;break}if(O===h){k=!0,h=_,c=b;break}O=O.sibling}if(!k)throw Error(r(189))}}if(c.alternate!==h)throw Error(r(190))}if(c.tag!==3)throw Error(r(188));return c.stateNode.current===c?i:o}function m(i){var o=i.tag;if(o===5||o===26||o===27||o===6)return i;for(i=i.child;i!==null;){if(o=m(i),o!==null)return o;i=i.sibling}return null}var p=Object.assign,y=Symbol.for("react.element"),g=Symbol.for("react.transitional.element"),v=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),T=Symbol.for("react.consumer"),A=Symbol.for("react.context"),j=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),q=Symbol.for("react.lazy"),H=Symbol.for("react.activity"),z=Symbol.for("react.memo_cache_sentinel"),Q=Symbol.iterator;function re(i){return i===null||typeof i!="object"?null:(i=Q&&i[Q]||i["@@iterator"],typeof i=="function"?i:null)}var pe=Symbol.for("react.client.reference");function X(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===pe?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case x:return"Fragment";case S:return"Profiler";case E:return"StrictMode";case D:return"Suspense";case I:return"SuspenseList";case H:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case v:return"Portal";case A:return i.displayName||"Context";case T:return(i._context.displayName||"Context")+".Consumer";case j:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case P:return o=i.displayName||null,o!==null?o:X(i.type)||"Memo";case q:o=i._payload,i=i._init;try{return X(i(o))}catch{}}return null}var V=Array.isArray,$=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,oe={pending:!1,data:null,method:null,action:null},M=[],C=-1;function N(i){return{current:i}}function U(i){0>C||(i.current=M[C],M[C]=null,C--)}function R(i,o){C++,M[C]=i.current,i.current=o}var te=N(null),ce=N(null),he=N(null),xe=N(null);function Me(i,o){switch(R(he,o),R(ce,i),R(te,null),o.nodeType){case 9:case 11:i=(i=o.documentElement)&&(i=i.namespaceURI)?rx(i):0;break;default:if(i=o.tagName,o=o.namespaceURI)o=rx(o),i=sx(o,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}U(te),R(te,i)}function je(){U(te),U(ce),U(he)}function et(i){i.memoizedState!==null&&R(xe,i);var o=te.current,c=sx(o,i.type);o!==c&&(R(ce,i),R(te,c))}function pt(i){ce.current===i&&(U(te),U(ce)),xe.current===i&&(U(xe),Qo._currentValue=oe)}var kt,Wt;function bt(i){if(kt===void 0)try{throw Error()}catch(c){var o=c.stack.trim().match(/\n( *(at )?)/);kt=o&&o[1]||"",Wt=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+kt+i+Wt}var hn=!1;function en(i,o){if(!i||hn)return"";hn=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(o){var le=function(){throw Error()};if(Object.defineProperty(le.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(le,[])}catch(se){var ee=se}Reflect.construct(i,[],le)}else{try{le.call()}catch(se){ee=se}i.call(le.prototype)}}else{try{throw Error()}catch(se){ee=se}(le=i())&&typeof le.catch=="function"&&le.catch(function(){})}}catch(se){if(se&&ee&&typeof se.stack=="string")return[se.stack,ee.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var b=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");b&&b.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=h.DetermineComponentFrameRoot(),k=_[0],O=_[1];if(k&&O){var B=k.split(`
`),Y=O.split(`
`);for(b=h=0;h<B.length&&!B[h].includes("DetermineComponentFrameRoot");)h++;for(;b<Y.length&&!Y[b].includes("DetermineComponentFrameRoot");)b++;if(h===B.length||b===Y.length)for(h=B.length-1,b=Y.length-1;1<=h&&0<=b&&B[h]!==Y[b];)b--;for(;1<=h&&0<=b;h--,b--)if(B[h]!==Y[b]){if(h!==1||b!==1)do if(h--,b--,0>b||B[h]!==Y[b]){var ie=`
`+B[h].replace(" at new "," at ");return i.displayName&&ie.includes("<anonymous>")&&(ie=ie.replace("<anonymous>",i.displayName)),ie}while(1<=h&&0<=b);break}}}finally{hn=!1,Error.prepareStackTrace=c}return(c=i?i.displayName||i.name:"")?bt(c):""}function Nn(i,o){switch(i.tag){case 26:case 27:case 5:return bt(i.type);case 16:return bt("Lazy");case 13:return i.child!==o&&o!==null?bt("Suspense Fallback"):bt("Suspense");case 19:return bt("SuspenseList");case 0:case 15:return en(i.type,!1);case 11:return en(i.type.render,!1);case 1:return en(i.type,!0);case 31:return bt("Activity");default:return""}}function sr(i){try{var o="",c=null;do o+=Nn(i,c),c=i,i=i.return;while(i);return o}catch(h){return`
Error generating stack: `+h.message+`
`+h.stack}}var pn=Object.prototype.hasOwnProperty,wn=t.unstable_scheduleCallback,ke=t.unstable_cancelCallback,_e=t.unstable_shouldYield,Te=t.unstable_requestPaint,be=t.unstable_now,st=t.unstable_getCurrentPriorityLevel,ne=t.unstable_ImmediatePriority,fe=t.unstable_UserBlockingPriority,ye=t.unstable_NormalPriority,ge=t.unstable_LowPriority,ve=t.unstable_IdlePriority,Ie=t.log,tt=t.unstable_setDisableYieldValue,Xe=null,Pe=null;function ut(i){if(typeof Ie=="function"&&tt(i),Pe&&typeof Pe.setStrictMode=="function")try{Pe.setStrictMode(Xe,i)}catch{}}var at=Math.clz32?Math.clz32:Sn,ir=Math.log,ar=Math.LN2;function Sn(i){return i>>>=0,i===0?32:31-(ir(i)/ar|0)|0}var $i=256,uc=262144,fc=4194304;function si(i){var o=i&42;if(o!==0)return o;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function dc(i,o,c){var h=i.pendingLanes;if(h===0)return 0;var b=0,_=i.suspendedLanes,k=i.pingedLanes;i=i.warmLanes;var O=h&134217727;return O!==0?(h=O&~_,h!==0?b=si(h):(k&=O,k!==0?b=si(k):c||(c=O&~i,c!==0&&(b=si(c))))):(O=h&~_,O!==0?b=si(O):k!==0?b=si(k):c||(c=h&~i,c!==0&&(b=si(c)))),b===0?0:o!==0&&o!==b&&(o&_)===0&&(_=b&-b,c=o&-o,_>=c||_===32&&(c&4194048)!==0)?o:b}function oo(i,o){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&o)===0}function $A(i,o){switch(i){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function P0(){var i=fc;return fc<<=1,(fc&62914560)===0&&(fc=4194304),i}function Id(i){for(var o=[],c=0;31>c;c++)o.push(i);return o}function lo(i,o){i.pendingLanes|=o,o!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function UA(i,o,c,h,b,_){var k=i.pendingLanes;i.pendingLanes=c,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=c,i.entangledLanes&=c,i.errorRecoveryDisabledLanes&=c,i.shellSuspendCounter=0;var O=i.entanglements,B=i.expirationTimes,Y=i.hiddenUpdates;for(c=k&~c;0<c;){var ie=31-at(c),le=1<<ie;O[ie]=0,B[ie]=-1;var ee=Y[ie];if(ee!==null)for(Y[ie]=null,ie=0;ie<ee.length;ie++){var se=ee[ie];se!==null&&(se.lane&=-536870913)}c&=~le}h!==0&&B0(i,h,0),_!==0&&b===0&&i.tag!==0&&(i.suspendedLanes|=_&~(k&~o))}function B0(i,o,c){i.pendingLanes|=o,i.suspendedLanes&=~o;var h=31-at(o);i.entangledLanes|=o,i.entanglements[h]=i.entanglements[h]|1073741824|c&261930}function $0(i,o){var c=i.entangledLanes|=o;for(i=i.entanglements;c;){var h=31-at(c),b=1<<h;b&o|i[h]&o&&(i[h]|=o),c&=~b}}function U0(i,o){var c=o&-o;return c=(c&42)!==0?1:Md(c),(c&(i.suspendedLanes|o))!==0?0:c}function Md(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Dd(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function q0(){var i=G.p;return i!==0?i:(i=window.event,i===void 0?32:Tx(i.type))}function F0(i,o){var c=G.p;try{return G.p=i,o()}finally{G.p=c}}var vs=Math.random().toString(36).slice(2),tn="__reactFiber$"+vs,In="__reactProps$"+vs,Ui="__reactContainer$"+vs,jd="__reactEvents$"+vs,qA="__reactListeners$"+vs,FA="__reactHandles$"+vs,V0="__reactResources$"+vs,co="__reactMarker$"+vs;function Ld(i){delete i[tn],delete i[In],delete i[jd],delete i[qA],delete i[FA]}function qi(i){var o=i[tn];if(o)return o;for(var c=i.parentNode;c;){if(o=c[Ui]||c[tn]){if(c=o.alternate,o.child!==null||c!==null&&c.child!==null)for(i=fx(i);i!==null;){if(c=i[tn])return c;i=fx(i)}return o}i=c,c=i.parentNode}return null}function Fi(i){if(i=i[tn]||i[Ui]){var o=i.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return i}return null}function uo(i){var o=i.tag;if(o===5||o===26||o===27||o===6)return i.stateNode;throw Error(r(33))}function Vi(i){var o=i[V0];return o||(o=i[V0]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function Kt(i){i[co]=!0}var H0=new Set,G0={};function ii(i,o){Hi(i,o),Hi(i+"Capture",o)}function Hi(i,o){for(G0[i]=o,i=0;i<o.length;i++)H0.add(o[i])}var VA=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),K0={},Z0={};function HA(i){return pn.call(Z0,i)?!0:pn.call(K0,i)?!1:VA.test(i)?Z0[i]=!0:(K0[i]=!0,!1)}function hc(i,o,c){if(HA(o))if(c===null)i.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":i.removeAttribute(o);return;case"boolean":var h=o.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){i.removeAttribute(o);return}}i.setAttribute(o,""+c)}}function pc(i,o,c){if(c===null)i.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(o);return}i.setAttribute(o,""+c)}}function Jr(i,o,c,h){if(h===null)i.removeAttribute(c);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(c);return}i.setAttributeNS(o,c,""+h)}}function or(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Q0(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function GA(i,o,c){var h=Object.getOwnPropertyDescriptor(i.constructor.prototype,o);if(!i.hasOwnProperty(o)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var b=h.get,_=h.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return b.call(this)},set:function(k){c=""+k,_.call(this,k)}}),Object.defineProperty(i,o,{enumerable:h.enumerable}),{getValue:function(){return c},setValue:function(k){c=""+k},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function zd(i){if(!i._valueTracker){var o=Q0(i)?"checked":"value";i._valueTracker=GA(i,o,""+i[o])}}function J0(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var c=o.getValue(),h="";return i&&(h=Q0(i)?i.checked?"true":"false":i.value),i=h,i!==c?(o.setValue(i),!0):!1}function mc(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var KA=/[\n"\\]/g;function lr(i){return i.replace(KA,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function Pd(i,o,c,h,b,_,k,O){i.name="",k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"?i.type=k:i.removeAttribute("type"),o!=null?k==="number"?(o===0&&i.value===""||i.value!=o)&&(i.value=""+or(o)):i.value!==""+or(o)&&(i.value=""+or(o)):k!=="submit"&&k!=="reset"||i.removeAttribute("value"),o!=null?Bd(i,k,or(o)):c!=null?Bd(i,k,or(c)):h!=null&&i.removeAttribute("value"),b==null&&_!=null&&(i.defaultChecked=!!_),b!=null&&(i.checked=b&&typeof b!="function"&&typeof b!="symbol"),O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"?i.name=""+or(O):i.removeAttribute("name")}function Y0(i,o,c,h,b,_,k,O){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(i.type=_),o!=null||c!=null){if(!(_!=="submit"&&_!=="reset"||o!=null)){zd(i);return}c=c!=null?""+or(c):"",o=o!=null?""+or(o):c,O||o===i.value||(i.value=o),i.defaultValue=o}h=h??b,h=typeof h!="function"&&typeof h!="symbol"&&!!h,i.checked=O?i.checked:!!h,i.defaultChecked=!!h,k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"&&(i.name=k),zd(i)}function Bd(i,o,c){o==="number"&&mc(i.ownerDocument)===i||i.defaultValue===""+c||(i.defaultValue=""+c)}function Gi(i,o,c,h){if(i=i.options,o){o={};for(var b=0;b<c.length;b++)o["$"+c[b]]=!0;for(c=0;c<i.length;c++)b=o.hasOwnProperty("$"+i[c].value),i[c].selected!==b&&(i[c].selected=b),b&&h&&(i[c].defaultSelected=!0)}else{for(c=""+or(c),o=null,b=0;b<i.length;b++){if(i[b].value===c){i[b].selected=!0,h&&(i[b].defaultSelected=!0);return}o!==null||i[b].disabled||(o=i[b])}o!==null&&(o.selected=!0)}}function X0(i,o,c){if(o!=null&&(o=""+or(o),o!==i.value&&(i.value=o),c==null)){i.defaultValue!==o&&(i.defaultValue=o);return}i.defaultValue=c!=null?""+or(c):""}function W0(i,o,c,h){if(o==null){if(h!=null){if(c!=null)throw Error(r(92));if(V(h)){if(1<h.length)throw Error(r(93));h=h[0]}c=h}c==null&&(c=""),o=c}c=or(o),i.defaultValue=c,h=i.textContent,h===c&&h!==""&&h!==null&&(i.value=h),zd(i)}function Ki(i,o){if(o){var c=i.firstChild;if(c&&c===i.lastChild&&c.nodeType===3){c.nodeValue=o;return}}i.textContent=o}var ZA=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function eb(i,o,c){var h=o.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?h?i.setProperty(o,""):o==="float"?i.cssFloat="":i[o]="":h?i.setProperty(o,c):typeof c!="number"||c===0||ZA.has(o)?o==="float"?i.cssFloat=c:i[o]=(""+c).trim():i[o]=c+"px"}function tb(i,o,c){if(o!=null&&typeof o!="object")throw Error(r(62));if(i=i.style,c!=null){for(var h in c)!c.hasOwnProperty(h)||o!=null&&o.hasOwnProperty(h)||(h.indexOf("--")===0?i.setProperty(h,""):h==="float"?i.cssFloat="":i[h]="");for(var b in o)h=o[b],o.hasOwnProperty(b)&&c[b]!==h&&eb(i,b,h)}else for(var _ in o)o.hasOwnProperty(_)&&eb(i,_,o[_])}function $d(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var QA=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),JA=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function gc(i){return JA.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function Yr(){}var Ud=null;function qd(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Zi=null,Qi=null;function nb(i){var o=Fi(i);if(o&&(i=o.stateNode)){var c=i[In]||null;e:switch(i=o.stateNode,o.type){case"input":if(Pd(i,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),o=c.name,c.type==="radio"&&o!=null){for(c=i;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+lr(""+o)+'"][type="radio"]'),o=0;o<c.length;o++){var h=c[o];if(h!==i&&h.form===i.form){var b=h[In]||null;if(!b)throw Error(r(90));Pd(h,b.value,b.defaultValue,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name)}}for(o=0;o<c.length;o++)h=c[o],h.form===i.form&&J0(h)}break e;case"textarea":X0(i,c.value,c.defaultValue);break e;case"select":o=c.value,o!=null&&Gi(i,!!c.multiple,o,!1)}}}var Fd=!1;function rb(i,o,c){if(Fd)return i(o,c);Fd=!0;try{var h=i(o);return h}finally{if(Fd=!1,(Zi!==null||Qi!==null)&&(ru(),Zi&&(o=Zi,i=Qi,Qi=Zi=null,nb(o),i)))for(o=0;o<i.length;o++)nb(i[o])}}function fo(i,o){var c=i.stateNode;if(c===null)return null;var h=c[In]||null;if(h===null)return null;c=h[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(i=i.type,h=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!h;break e;default:i=!1}if(i)return null;if(c&&typeof c!="function")throw Error(r(231,o,typeof c));return c}var Xr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Vd=!1;if(Xr)try{var ho={};Object.defineProperty(ho,"passive",{get:function(){Vd=!0}}),window.addEventListener("test",ho,ho),window.removeEventListener("test",ho,ho)}catch{Vd=!1}var xs=null,Hd=null,yc=null;function sb(){if(yc)return yc;var i,o=Hd,c=o.length,h,b="value"in xs?xs.value:xs.textContent,_=b.length;for(i=0;i<c&&o[i]===b[i];i++);var k=c-i;for(h=1;h<=k&&o[c-h]===b[_-h];h++);return yc=b.slice(i,1<h?1-h:void 0)}function bc(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function _c(){return!0}function ib(){return!1}function Mn(i){function o(c,h,b,_,k){this._reactName=c,this._targetInst=b,this.type=h,this.nativeEvent=_,this.target=k,this.currentTarget=null;for(var O in i)i.hasOwnProperty(O)&&(c=i[O],this[O]=c?c(_):_[O]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?_c:ib,this.isPropagationStopped=ib,this}return p(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=_c)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=_c)},persist:function(){},isPersistent:_c}),o}var ai={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},vc=Mn(ai),po=p({},ai,{view:0,detail:0}),YA=Mn(po),Gd,Kd,mo,xc=p({},po,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Qd,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==mo&&(mo&&i.type==="mousemove"?(Gd=i.screenX-mo.screenX,Kd=i.screenY-mo.screenY):Kd=Gd=0,mo=i),Gd)},movementY:function(i){return"movementY"in i?i.movementY:Kd}}),ab=Mn(xc),XA=p({},xc,{dataTransfer:0}),WA=Mn(XA),e2=p({},po,{relatedTarget:0}),Zd=Mn(e2),t2=p({},ai,{animationName:0,elapsedTime:0,pseudoElement:0}),n2=Mn(t2),r2=p({},ai,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),s2=Mn(r2),i2=p({},ai,{data:0}),ob=Mn(i2),a2={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},o2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},l2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function c2(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=l2[i])?!!o[i]:!1}function Qd(){return c2}var u2=p({},po,{key:function(i){if(i.key){var o=a2[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=bc(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?o2[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Qd,charCode:function(i){return i.type==="keypress"?bc(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?bc(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),f2=Mn(u2),d2=p({},xc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),lb=Mn(d2),h2=p({},po,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Qd}),p2=Mn(h2),m2=p({},ai,{propertyName:0,elapsedTime:0,pseudoElement:0}),g2=Mn(m2),y2=p({},xc,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),b2=Mn(y2),_2=p({},ai,{newState:0,oldState:0}),v2=Mn(_2),x2=[9,13,27,32],Jd=Xr&&"CompositionEvent"in window,go=null;Xr&&"documentMode"in document&&(go=document.documentMode);var w2=Xr&&"TextEvent"in window&&!go,cb=Xr&&(!Jd||go&&8<go&&11>=go),ub=" ",fb=!1;function db(i,o){switch(i){case"keyup":return x2.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function hb(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Ji=!1;function S2(i,o){switch(i){case"compositionend":return hb(o);case"keypress":return o.which!==32?null:(fb=!0,ub);case"textInput":return i=o.data,i===ub&&fb?null:i;default:return null}}function k2(i,o){if(Ji)return i==="compositionend"||!Jd&&db(i,o)?(i=sb(),yc=Hd=xs=null,Ji=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return cb&&o.locale!=="ko"?null:o.data;default:return null}}var E2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function pb(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!E2[i.type]:o==="textarea"}function mb(i,o,c,h){Zi?Qi?Qi.push(h):Qi=[h]:Zi=h,o=uu(o,"onChange"),0<o.length&&(c=new vc("onChange","change",null,c,h),i.push({event:c,listeners:o}))}var yo=null,bo=null;function C2(i){Yv(i,0)}function wc(i){var o=uo(i);if(J0(o))return i}function gb(i,o){if(i==="change")return o}var yb=!1;if(Xr){var Yd;if(Xr){var Xd="oninput"in document;if(!Xd){var bb=document.createElement("div");bb.setAttribute("oninput","return;"),Xd=typeof bb.oninput=="function"}Yd=Xd}else Yd=!1;yb=Yd&&(!document.documentMode||9<document.documentMode)}function _b(){yo&&(yo.detachEvent("onpropertychange",vb),bo=yo=null)}function vb(i){if(i.propertyName==="value"&&wc(bo)){var o=[];mb(o,bo,i,qd(i)),rb(C2,o)}}function T2(i,o,c){i==="focusin"?(_b(),yo=o,bo=c,yo.attachEvent("onpropertychange",vb)):i==="focusout"&&_b()}function A2(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return wc(bo)}function R2(i,o){if(i==="click")return wc(o)}function O2(i,o){if(i==="input"||i==="change")return wc(o)}function N2(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var Vn=typeof Object.is=="function"?Object.is:N2;function _o(i,o){if(Vn(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var c=Object.keys(i),h=Object.keys(o);if(c.length!==h.length)return!1;for(h=0;h<c.length;h++){var b=c[h];if(!pn.call(o,b)||!Vn(i[b],o[b]))return!1}return!0}function xb(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function wb(i,o){var c=xb(i);i=0;for(var h;c;){if(c.nodeType===3){if(h=i+c.textContent.length,i<=o&&h>=o)return{node:c,offset:o-i};i=h}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=xb(c)}}function Sb(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?Sb(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function kb(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var o=mc(i.document);o instanceof i.HTMLIFrameElement;){try{var c=typeof o.contentWindow.location.href=="string"}catch{c=!1}if(c)i=o.contentWindow;else break;o=mc(i.document)}return o}function Wd(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}var I2=Xr&&"documentMode"in document&&11>=document.documentMode,Yi=null,eh=null,vo=null,th=!1;function Eb(i,o,c){var h=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;th||Yi==null||Yi!==mc(h)||(h=Yi,"selectionStart"in h&&Wd(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),vo&&_o(vo,h)||(vo=h,h=uu(eh,"onSelect"),0<h.length&&(o=new vc("onSelect","select",null,o,c),i.push({event:o,listeners:h}),o.target=Yi)))}function oi(i,o){var c={};return c[i.toLowerCase()]=o.toLowerCase(),c["Webkit"+i]="webkit"+o,c["Moz"+i]="moz"+o,c}var Xi={animationend:oi("Animation","AnimationEnd"),animationiteration:oi("Animation","AnimationIteration"),animationstart:oi("Animation","AnimationStart"),transitionrun:oi("Transition","TransitionRun"),transitionstart:oi("Transition","TransitionStart"),transitioncancel:oi("Transition","TransitionCancel"),transitionend:oi("Transition","TransitionEnd")},nh={},Cb={};Xr&&(Cb=document.createElement("div").style,"AnimationEvent"in window||(delete Xi.animationend.animation,delete Xi.animationiteration.animation,delete Xi.animationstart.animation),"TransitionEvent"in window||delete Xi.transitionend.transition);function li(i){if(nh[i])return nh[i];if(!Xi[i])return i;var o=Xi[i],c;for(c in o)if(o.hasOwnProperty(c)&&c in Cb)return nh[i]=o[c];return i}var Tb=li("animationend"),Ab=li("animationiteration"),Rb=li("animationstart"),M2=li("transitionrun"),D2=li("transitionstart"),j2=li("transitioncancel"),Ob=li("transitionend"),Nb=new Map,rh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");rh.push("scrollEnd");function Er(i,o){Nb.set(i,o),ii(o,[i])}var Sc=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},cr=[],Wi=0,sh=0;function kc(){for(var i=Wi,o=sh=Wi=0;o<i;){var c=cr[o];cr[o++]=null;var h=cr[o];cr[o++]=null;var b=cr[o];cr[o++]=null;var _=cr[o];if(cr[o++]=null,h!==null&&b!==null){var k=h.pending;k===null?b.next=b:(b.next=k.next,k.next=b),h.pending=b}_!==0&&Ib(c,b,_)}}function Ec(i,o,c,h){cr[Wi++]=i,cr[Wi++]=o,cr[Wi++]=c,cr[Wi++]=h,sh|=h,i.lanes|=h,i=i.alternate,i!==null&&(i.lanes|=h)}function ih(i,o,c,h){return Ec(i,o,c,h),Cc(i)}function ci(i,o){return Ec(i,null,null,o),Cc(i)}function Ib(i,o,c){i.lanes|=c;var h=i.alternate;h!==null&&(h.lanes|=c);for(var b=!1,_=i.return;_!==null;)_.childLanes|=c,h=_.alternate,h!==null&&(h.childLanes|=c),_.tag===22&&(i=_.stateNode,i===null||i._visibility&1||(b=!0)),i=_,_=_.return;return i.tag===3?(_=i.stateNode,b&&o!==null&&(b=31-at(c),i=_.hiddenUpdates,h=i[b],h===null?i[b]=[o]:h.push(o),o.lane=c|536870912),_):null}function Cc(i){if(50<qo)throw qo=0,pp=null,Error(r(185));for(var o=i.return;o!==null;)i=o,o=i.return;return i.tag===3?i.stateNode:null}var ea={};function L2(i,o,c,h){this.tag=i,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Hn(i,o,c,h){return new L2(i,o,c,h)}function ah(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Wr(i,o){var c=i.alternate;return c===null?(c=Hn(i.tag,o,i.key,i.mode),c.elementType=i.elementType,c.type=i.type,c.stateNode=i.stateNode,c.alternate=i,i.alternate=c):(c.pendingProps=o,c.type=i.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=i.flags&65011712,c.childLanes=i.childLanes,c.lanes=i.lanes,c.child=i.child,c.memoizedProps=i.memoizedProps,c.memoizedState=i.memoizedState,c.updateQueue=i.updateQueue,o=i.dependencies,c.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},c.sibling=i.sibling,c.index=i.index,c.ref=i.ref,c.refCleanup=i.refCleanup,c}function Mb(i,o){i.flags&=65011714;var c=i.alternate;return c===null?(i.childLanes=0,i.lanes=o,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=c.childLanes,i.lanes=c.lanes,i.child=c.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=c.memoizedProps,i.memoizedState=c.memoizedState,i.updateQueue=c.updateQueue,i.type=c.type,o=c.dependencies,i.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),i}function Tc(i,o,c,h,b,_){var k=0;if(h=i,typeof i=="function")ah(i)&&(k=1);else if(typeof i=="string")k=UR(i,c,te.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case H:return i=Hn(31,c,o,b),i.elementType=H,i.lanes=_,i;case x:return ui(c.children,b,_,o);case E:k=8,b|=24;break;case S:return i=Hn(12,c,o,b|2),i.elementType=S,i.lanes=_,i;case D:return i=Hn(13,c,o,b),i.elementType=D,i.lanes=_,i;case I:return i=Hn(19,c,o,b),i.elementType=I,i.lanes=_,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case A:k=10;break e;case T:k=9;break e;case j:k=11;break e;case P:k=14;break e;case q:k=16,h=null;break e}k=29,c=Error(r(130,i===null?"null":typeof i,"")),h=null}return o=Hn(k,c,o,b),o.elementType=i,o.type=h,o.lanes=_,o}function ui(i,o,c,h){return i=Hn(7,i,h,o),i.lanes=c,i}function oh(i,o,c){return i=Hn(6,i,null,o),i.lanes=c,i}function Db(i){var o=Hn(18,null,null,0);return o.stateNode=i,o}function lh(i,o,c){return o=Hn(4,i.children!==null?i.children:[],i.key,o),o.lanes=c,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}var jb=new WeakMap;function ur(i,o){if(typeof i=="object"&&i!==null){var c=jb.get(i);return c!==void 0?c:(o={value:i,source:o,stack:sr(o)},jb.set(i,o),o)}return{value:i,source:o,stack:sr(o)}}var ta=[],na=0,Ac=null,xo=0,fr=[],dr=0,ws=null,Ir=1,Mr="";function es(i,o){ta[na++]=xo,ta[na++]=Ac,Ac=i,xo=o}function Lb(i,o,c){fr[dr++]=Ir,fr[dr++]=Mr,fr[dr++]=ws,ws=i;var h=Ir;i=Mr;var b=32-at(h)-1;h&=~(1<<b),c+=1;var _=32-at(o)+b;if(30<_){var k=b-b%5;_=(h&(1<<k)-1).toString(32),h>>=k,b-=k,Ir=1<<32-at(o)+b|c<<b|h,Mr=_+i}else Ir=1<<_|c<<b|h,Mr=i}function ch(i){i.return!==null&&(es(i,1),Lb(i,1,0))}function uh(i){for(;i===Ac;)Ac=ta[--na],ta[na]=null,xo=ta[--na],ta[na]=null;for(;i===ws;)ws=fr[--dr],fr[dr]=null,Mr=fr[--dr],fr[dr]=null,Ir=fr[--dr],fr[dr]=null}function zb(i,o){fr[dr++]=Ir,fr[dr++]=Mr,fr[dr++]=ws,Ir=o.id,Mr=o.overflow,ws=i}var nn=null,_t=null,Ye=!1,Ss=null,hr=!1,fh=Error(r(519));function ks(i){var o=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw wo(ur(o,i)),fh}function Pb(i){var o=i.stateNode,c=i.type,h=i.memoizedProps;switch(o[tn]=i,o[In]=h,c){case"dialog":He("cancel",o),He("close",o);break;case"iframe":case"object":case"embed":He("load",o);break;case"video":case"audio":for(c=0;c<Vo.length;c++)He(Vo[c],o);break;case"source":He("error",o);break;case"img":case"image":case"link":He("error",o),He("load",o);break;case"details":He("toggle",o);break;case"input":He("invalid",o),Y0(o,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0);break;case"select":He("invalid",o);break;case"textarea":He("invalid",o),W0(o,h.value,h.defaultValue,h.children)}c=h.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||o.textContent===""+c||h.suppressHydrationWarning===!0||tx(o.textContent,c)?(h.popover!=null&&(He("beforetoggle",o),He("toggle",o)),h.onScroll!=null&&He("scroll",o),h.onScrollEnd!=null&&He("scrollend",o),h.onClick!=null&&(o.onclick=Yr),o=!0):o=!1,o||ks(i,!0)}function Bb(i){for(nn=i.return;nn;)switch(nn.tag){case 5:case 31:case 13:hr=!1;return;case 27:case 3:hr=!0;return;default:nn=nn.return}}function ra(i){if(i!==nn)return!1;if(!Ye)return Bb(i),Ye=!0,!1;var o=i.tag,c;if((c=o!==3&&o!==27)&&((c=o===5)&&(c=i.type,c=!(c!=="form"&&c!=="button")||Rp(i.type,i.memoizedProps)),c=!c),c&&_t&&ks(i),Bb(i),o===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));_t=ux(i)}else if(o===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));_t=ux(i)}else o===27?(o=_t,Ps(i.type)?(i=Dp,Dp=null,_t=i):_t=o):_t=nn?mr(i.stateNode.nextSibling):null;return!0}function fi(){_t=nn=null,Ye=!1}function dh(){var i=Ss;return i!==null&&(zn===null?zn=i:zn.push.apply(zn,i),Ss=null),i}function wo(i){Ss===null?Ss=[i]:Ss.push(i)}var hh=N(null),di=null,ts=null;function Es(i,o,c){R(hh,o._currentValue),o._currentValue=c}function ns(i){i._currentValue=hh.current,U(hh)}function ph(i,o,c){for(;i!==null;){var h=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,h!==null&&(h.childLanes|=o)):h!==null&&(h.childLanes&o)!==o&&(h.childLanes|=o),i===c)break;i=i.return}}function mh(i,o,c,h){var b=i.child;for(b!==null&&(b.return=i);b!==null;){var _=b.dependencies;if(_!==null){var k=b.child;_=_.firstContext;e:for(;_!==null;){var O=_;_=b;for(var B=0;B<o.length;B++)if(O.context===o[B]){_.lanes|=c,O=_.alternate,O!==null&&(O.lanes|=c),ph(_.return,c,i),h||(k=null);break e}_=O.next}}else if(b.tag===18){if(k=b.return,k===null)throw Error(r(341));k.lanes|=c,_=k.alternate,_!==null&&(_.lanes|=c),ph(k,c,i),k=null}else k=b.child;if(k!==null)k.return=b;else for(k=b;k!==null;){if(k===i){k=null;break}if(b=k.sibling,b!==null){b.return=k.return,k=b;break}k=k.return}b=k}}function sa(i,o,c,h){i=null;for(var b=o,_=!1;b!==null;){if(!_){if((b.flags&524288)!==0)_=!0;else if((b.flags&262144)!==0)break}if(b.tag===10){var k=b.alternate;if(k===null)throw Error(r(387));if(k=k.memoizedProps,k!==null){var O=b.type;Vn(b.pendingProps.value,k.value)||(i!==null?i.push(O):i=[O])}}else if(b===xe.current){if(k=b.alternate,k===null)throw Error(r(387));k.memoizedState.memoizedState!==b.memoizedState.memoizedState&&(i!==null?i.push(Qo):i=[Qo])}b=b.return}i!==null&&mh(o,i,c,h),o.flags|=262144}function Rc(i){for(i=i.firstContext;i!==null;){if(!Vn(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function hi(i){di=i,ts=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function rn(i){return $b(di,i)}function Oc(i,o){return di===null&&hi(i),$b(i,o)}function $b(i,o){var c=o._currentValue;if(o={context:o,memoizedValue:c,next:null},ts===null){if(i===null)throw Error(r(308));ts=o,i.dependencies={lanes:0,firstContext:o},i.flags|=524288}else ts=ts.next=o;return c}var z2=typeof AbortController<"u"?AbortController:function(){var i=[],o=this.signal={aborted:!1,addEventListener:function(c,h){i.push(h)}};this.abort=function(){o.aborted=!0,i.forEach(function(c){return c()})}},P2=t.unstable_scheduleCallback,B2=t.unstable_NormalPriority,Rt={$$typeof:A,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function gh(){return{controller:new z2,data:new Map,refCount:0}}function So(i){i.refCount--,i.refCount===0&&P2(B2,function(){i.controller.abort()})}var ko=null,yh=0,ia=0,aa=null;function $2(i,o){if(ko===null){var c=ko=[];yh=0,ia=vp(),aa={status:"pending",value:void 0,then:function(h){c.push(h)}}}return yh++,o.then(Ub,Ub),o}function Ub(){if(--yh===0&&ko!==null){aa!==null&&(aa.status="fulfilled");var i=ko;ko=null,ia=0,aa=null;for(var o=0;o<i.length;o++)(0,i[o])()}}function U2(i,o){var c=[],h={status:"pending",value:null,reason:null,then:function(b){c.push(b)}};return i.then(function(){h.status="fulfilled",h.value=o;for(var b=0;b<c.length;b++)(0,c[b])(o)},function(b){for(h.status="rejected",h.reason=b,b=0;b<c.length;b++)(0,c[b])(void 0)}),h}var qb=$.S;$.S=function(i,o){Ev=be(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&$2(i,o),qb!==null&&qb(i,o)};var pi=N(null);function bh(){var i=pi.current;return i!==null?i:mt.pooledCache}function Nc(i,o){o===null?R(pi,pi.current):R(pi,o.pool)}function Fb(){var i=bh();return i===null?null:{parent:Rt._currentValue,pool:i}}var oa=Error(r(460)),_h=Error(r(474)),Ic=Error(r(542)),Mc={then:function(){}};function Vb(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Hb(i,o,c){switch(c=i[c],c===void 0?i.push(o):c!==o&&(o.then(Yr,Yr),o=c),o.status){case"fulfilled":return o.value;case"rejected":throw i=o.reason,Kb(i),i;default:if(typeof o.status=="string")o.then(Yr,Yr);else{if(i=mt,i!==null&&100<i.shellSuspendCounter)throw Error(r(482));i=o,i.status="pending",i.then(function(h){if(o.status==="pending"){var b=o;b.status="fulfilled",b.value=h}},function(h){if(o.status==="pending"){var b=o;b.status="rejected",b.reason=h}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw i=o.reason,Kb(i),i}throw gi=o,oa}}function mi(i){try{var o=i._init;return o(i._payload)}catch(c){throw c!==null&&typeof c=="object"&&typeof c.then=="function"?(gi=c,oa):c}}var gi=null;function Gb(){if(gi===null)throw Error(r(459));var i=gi;return gi=null,i}function Kb(i){if(i===oa||i===Ic)throw Error(r(483))}var la=null,Eo=0;function Dc(i){var o=Eo;return Eo+=1,la===null&&(la=[]),Hb(la,i,o)}function Co(i,o){o=o.props.ref,i.ref=o!==void 0?o:null}function jc(i,o){throw o.$$typeof===y?Error(r(525)):(i=Object.prototype.toString.call(o),Error(r(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i)))}function Zb(i){function o(Z,F){if(i){var J=Z.deletions;J===null?(Z.deletions=[F],Z.flags|=16):J.push(F)}}function c(Z,F){if(!i)return null;for(;F!==null;)o(Z,F),F=F.sibling;return null}function h(Z){for(var F=new Map;Z!==null;)Z.key!==null?F.set(Z.key,Z):F.set(Z.index,Z),Z=Z.sibling;return F}function b(Z,F){return Z=Wr(Z,F),Z.index=0,Z.sibling=null,Z}function _(Z,F,J){return Z.index=J,i?(J=Z.alternate,J!==null?(J=J.index,J<F?(Z.flags|=67108866,F):J):(Z.flags|=67108866,F)):(Z.flags|=1048576,F)}function k(Z){return i&&Z.alternate===null&&(Z.flags|=67108866),Z}function O(Z,F,J,ae){return F===null||F.tag!==6?(F=oh(J,Z.mode,ae),F.return=Z,F):(F=b(F,J),F.return=Z,F)}function B(Z,F,J,ae){var Ae=J.type;return Ae===x?ie(Z,F,J.props.children,ae,J.key):F!==null&&(F.elementType===Ae||typeof Ae=="object"&&Ae!==null&&Ae.$$typeof===q&&mi(Ae)===F.type)?(F=b(F,J.props),Co(F,J),F.return=Z,F):(F=Tc(J.type,J.key,J.props,null,Z.mode,ae),Co(F,J),F.return=Z,F)}function Y(Z,F,J,ae){return F===null||F.tag!==4||F.stateNode.containerInfo!==J.containerInfo||F.stateNode.implementation!==J.implementation?(F=lh(J,Z.mode,ae),F.return=Z,F):(F=b(F,J.children||[]),F.return=Z,F)}function ie(Z,F,J,ae,Ae){return F===null||F.tag!==7?(F=ui(J,Z.mode,ae,Ae),F.return=Z,F):(F=b(F,J),F.return=Z,F)}function le(Z,F,J){if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return F=oh(""+F,Z.mode,J),F.return=Z,F;if(typeof F=="object"&&F!==null){switch(F.$$typeof){case g:return J=Tc(F.type,F.key,F.props,null,Z.mode,J),Co(J,F),J.return=Z,J;case v:return F=lh(F,Z.mode,J),F.return=Z,F;case q:return F=mi(F),le(Z,F,J)}if(V(F)||re(F))return F=ui(F,Z.mode,J,null),F.return=Z,F;if(typeof F.then=="function")return le(Z,Dc(F),J);if(F.$$typeof===A)return le(Z,Oc(Z,F),J);jc(Z,F)}return null}function ee(Z,F,J,ae){var Ae=F!==null?F.key:null;if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return Ae!==null?null:O(Z,F,""+J,ae);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case g:return J.key===Ae?B(Z,F,J,ae):null;case v:return J.key===Ae?Y(Z,F,J,ae):null;case q:return J=mi(J),ee(Z,F,J,ae)}if(V(J)||re(J))return Ae!==null?null:ie(Z,F,J,ae,null);if(typeof J.then=="function")return ee(Z,F,Dc(J),ae);if(J.$$typeof===A)return ee(Z,F,Oc(Z,J),ae);jc(Z,J)}return null}function se(Z,F,J,ae,Ae){if(typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint")return Z=Z.get(J)||null,O(F,Z,""+ae,Ae);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case g:return Z=Z.get(ae.key===null?J:ae.key)||null,B(F,Z,ae,Ae);case v:return Z=Z.get(ae.key===null?J:ae.key)||null,Y(F,Z,ae,Ae);case q:return ae=mi(ae),se(Z,F,J,ae,Ae)}if(V(ae)||re(ae))return Z=Z.get(J)||null,ie(F,Z,ae,Ae,null);if(typeof ae.then=="function")return se(Z,F,J,Dc(ae),Ae);if(ae.$$typeof===A)return se(Z,F,J,Oc(F,ae),Ae);jc(F,ae)}return null}function we(Z,F,J,ae){for(var Ae=null,nt=null,Ee=F,$e=F=0,Qe=null;Ee!==null&&$e<J.length;$e++){Ee.index>$e?(Qe=Ee,Ee=null):Qe=Ee.sibling;var rt=ee(Z,Ee,J[$e],ae);if(rt===null){Ee===null&&(Ee=Qe);break}i&&Ee&&rt.alternate===null&&o(Z,Ee),F=_(rt,F,$e),nt===null?Ae=rt:nt.sibling=rt,nt=rt,Ee=Qe}if($e===J.length)return c(Z,Ee),Ye&&es(Z,$e),Ae;if(Ee===null){for(;$e<J.length;$e++)Ee=le(Z,J[$e],ae),Ee!==null&&(F=_(Ee,F,$e),nt===null?Ae=Ee:nt.sibling=Ee,nt=Ee);return Ye&&es(Z,$e),Ae}for(Ee=h(Ee);$e<J.length;$e++)Qe=se(Ee,Z,$e,J[$e],ae),Qe!==null&&(i&&Qe.alternate!==null&&Ee.delete(Qe.key===null?$e:Qe.key),F=_(Qe,F,$e),nt===null?Ae=Qe:nt.sibling=Qe,nt=Qe);return i&&Ee.forEach(function(Fs){return o(Z,Fs)}),Ye&&es(Z,$e),Ae}function Ne(Z,F,J,ae){if(J==null)throw Error(r(151));for(var Ae=null,nt=null,Ee=F,$e=F=0,Qe=null,rt=J.next();Ee!==null&&!rt.done;$e++,rt=J.next()){Ee.index>$e?(Qe=Ee,Ee=null):Qe=Ee.sibling;var Fs=ee(Z,Ee,rt.value,ae);if(Fs===null){Ee===null&&(Ee=Qe);break}i&&Ee&&Fs.alternate===null&&o(Z,Ee),F=_(Fs,F,$e),nt===null?Ae=Fs:nt.sibling=Fs,nt=Fs,Ee=Qe}if(rt.done)return c(Z,Ee),Ye&&es(Z,$e),Ae;if(Ee===null){for(;!rt.done;$e++,rt=J.next())rt=le(Z,rt.value,ae),rt!==null&&(F=_(rt,F,$e),nt===null?Ae=rt:nt.sibling=rt,nt=rt);return Ye&&es(Z,$e),Ae}for(Ee=h(Ee);!rt.done;$e++,rt=J.next())rt=se(Ee,Z,$e,rt.value,ae),rt!==null&&(i&&rt.alternate!==null&&Ee.delete(rt.key===null?$e:rt.key),F=_(rt,F,$e),nt===null?Ae=rt:nt.sibling=rt,nt=rt);return i&&Ee.forEach(function(XR){return o(Z,XR)}),Ye&&es(Z,$e),Ae}function ht(Z,F,J,ae){if(typeof J=="object"&&J!==null&&J.type===x&&J.key===null&&(J=J.props.children),typeof J=="object"&&J!==null){switch(J.$$typeof){case g:e:{for(var Ae=J.key;F!==null;){if(F.key===Ae){if(Ae=J.type,Ae===x){if(F.tag===7){c(Z,F.sibling),ae=b(F,J.props.children),ae.return=Z,Z=ae;break e}}else if(F.elementType===Ae||typeof Ae=="object"&&Ae!==null&&Ae.$$typeof===q&&mi(Ae)===F.type){c(Z,F.sibling),ae=b(F,J.props),Co(ae,J),ae.return=Z,Z=ae;break e}c(Z,F);break}else o(Z,F);F=F.sibling}J.type===x?(ae=ui(J.props.children,Z.mode,ae,J.key),ae.return=Z,Z=ae):(ae=Tc(J.type,J.key,J.props,null,Z.mode,ae),Co(ae,J),ae.return=Z,Z=ae)}return k(Z);case v:e:{for(Ae=J.key;F!==null;){if(F.key===Ae)if(F.tag===4&&F.stateNode.containerInfo===J.containerInfo&&F.stateNode.implementation===J.implementation){c(Z,F.sibling),ae=b(F,J.children||[]),ae.return=Z,Z=ae;break e}else{c(Z,F);break}else o(Z,F);F=F.sibling}ae=lh(J,Z.mode,ae),ae.return=Z,Z=ae}return k(Z);case q:return J=mi(J),ht(Z,F,J,ae)}if(V(J))return we(Z,F,J,ae);if(re(J)){if(Ae=re(J),typeof Ae!="function")throw Error(r(150));return J=Ae.call(J),Ne(Z,F,J,ae)}if(typeof J.then=="function")return ht(Z,F,Dc(J),ae);if(J.$$typeof===A)return ht(Z,F,Oc(Z,J),ae);jc(Z,J)}return typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint"?(J=""+J,F!==null&&F.tag===6?(c(Z,F.sibling),ae=b(F,J),ae.return=Z,Z=ae):(c(Z,F),ae=oh(J,Z.mode,ae),ae.return=Z,Z=ae),k(Z)):c(Z,F)}return function(Z,F,J,ae){try{Eo=0;var Ae=ht(Z,F,J,ae);return la=null,Ae}catch(Ee){if(Ee===oa||Ee===Ic)throw Ee;var nt=Hn(29,Ee,null,Z.mode);return nt.lanes=ae,nt.return=Z,nt}}}var yi=Zb(!0),Qb=Zb(!1),Cs=!1;function vh(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function xh(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Ts(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function As(i,o,c){var h=i.updateQueue;if(h===null)return null;if(h=h.shared,(it&2)!==0){var b=h.pending;return b===null?o.next=o:(o.next=b.next,b.next=o),h.pending=o,o=Cc(i),Ib(i,null,c),o}return Ec(i,h,o,c),Cc(i)}function To(i,o,c){if(o=o.updateQueue,o!==null&&(o=o.shared,(c&4194048)!==0)){var h=o.lanes;h&=i.pendingLanes,c|=h,o.lanes=c,$0(i,c)}}function wh(i,o){var c=i.updateQueue,h=i.alternate;if(h!==null&&(h=h.updateQueue,c===h)){var b=null,_=null;if(c=c.firstBaseUpdate,c!==null){do{var k={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};_===null?b=_=k:_=_.next=k,c=c.next}while(c!==null);_===null?b=_=o:_=_.next=o}else b=_=o;c={baseState:h.baseState,firstBaseUpdate:b,lastBaseUpdate:_,shared:h.shared,callbacks:h.callbacks},i.updateQueue=c;return}i=c.lastBaseUpdate,i===null?c.firstBaseUpdate=o:i.next=o,c.lastBaseUpdate=o}var Sh=!1;function Ao(){if(Sh){var i=aa;if(i!==null)throw i}}function Ro(i,o,c,h){Sh=!1;var b=i.updateQueue;Cs=!1;var _=b.firstBaseUpdate,k=b.lastBaseUpdate,O=b.shared.pending;if(O!==null){b.shared.pending=null;var B=O,Y=B.next;B.next=null,k===null?_=Y:k.next=Y,k=B;var ie=i.alternate;ie!==null&&(ie=ie.updateQueue,O=ie.lastBaseUpdate,O!==k&&(O===null?ie.firstBaseUpdate=Y:O.next=Y,ie.lastBaseUpdate=B))}if(_!==null){var le=b.baseState;k=0,ie=Y=B=null,O=_;do{var ee=O.lane&-536870913,se=ee!==O.lane;if(se?(Ze&ee)===ee:(h&ee)===ee){ee!==0&&ee===ia&&(Sh=!0),ie!==null&&(ie=ie.next={lane:0,tag:O.tag,payload:O.payload,callback:null,next:null});e:{var we=i,Ne=O;ee=o;var ht=c;switch(Ne.tag){case 1:if(we=Ne.payload,typeof we=="function"){le=we.call(ht,le,ee);break e}le=we;break e;case 3:we.flags=we.flags&-65537|128;case 0:if(we=Ne.payload,ee=typeof we=="function"?we.call(ht,le,ee):we,ee==null)break e;le=p({},le,ee);break e;case 2:Cs=!0}}ee=O.callback,ee!==null&&(i.flags|=64,se&&(i.flags|=8192),se=b.callbacks,se===null?b.callbacks=[ee]:se.push(ee))}else se={lane:ee,tag:O.tag,payload:O.payload,callback:O.callback,next:null},ie===null?(Y=ie=se,B=le):ie=ie.next=se,k|=ee;if(O=O.next,O===null){if(O=b.shared.pending,O===null)break;se=O,O=se.next,se.next=null,b.lastBaseUpdate=se,b.shared.pending=null}}while(!0);ie===null&&(B=le),b.baseState=B,b.firstBaseUpdate=Y,b.lastBaseUpdate=ie,_===null&&(b.shared.lanes=0),Ms|=k,i.lanes=k,i.memoizedState=le}}function Jb(i,o){if(typeof i!="function")throw Error(r(191,i));i.call(o)}function Yb(i,o){var c=i.callbacks;if(c!==null)for(i.callbacks=null,i=0;i<c.length;i++)Jb(c[i],o)}var ca=N(null),Lc=N(0);function Xb(i,o){i=fs,R(Lc,i),R(ca,o),fs=i|o.baseLanes}function kh(){R(Lc,fs),R(ca,ca.current)}function Eh(){fs=Lc.current,U(ca),U(Lc)}var Gn=N(null),pr=null;function Rs(i){var o=i.alternate;R(Tt,Tt.current&1),R(Gn,i),pr===null&&(o===null||ca.current!==null||o.memoizedState!==null)&&(pr=i)}function Ch(i){R(Tt,Tt.current),R(Gn,i),pr===null&&(pr=i)}function Wb(i){i.tag===22?(R(Tt,Tt.current),R(Gn,i),pr===null&&(pr=i)):Os()}function Os(){R(Tt,Tt.current),R(Gn,Gn.current)}function Kn(i){U(Gn),pr===i&&(pr=null),U(Tt)}var Tt=N(0);function zc(i){for(var o=i;o!==null;){if(o.tag===13){var c=o.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||Ip(c)||Mp(c)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var rs=0,Be=null,ft=null,Ot=null,Pc=!1,ua=!1,bi=!1,Bc=0,Oo=0,fa=null,q2=0;function Et(){throw Error(r(321))}function Th(i,o){if(o===null)return!1;for(var c=0;c<o.length&&c<i.length;c++)if(!Vn(i[c],o[c]))return!1;return!0}function Ah(i,o,c,h,b,_){return rs=_,Be=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,$.H=i===null||i.memoizedState===null?L_:Fh,bi=!1,_=c(h,b),bi=!1,ua&&(_=t_(o,c,h,b)),e_(i),_}function e_(i){$.H=Mo;var o=ft!==null&&ft.next!==null;if(rs=0,Ot=ft=Be=null,Pc=!1,Oo=0,fa=null,o)throw Error(r(300));i===null||Nt||(i=i.dependencies,i!==null&&Rc(i)&&(Nt=!0))}function t_(i,o,c,h){Be=i;var b=0;do{if(ua&&(fa=null),Oo=0,ua=!1,25<=b)throw Error(r(301));if(b+=1,Ot=ft=null,i.updateQueue!=null){var _=i.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}$.H=z_,_=o(c,h)}while(ua);return _}function F2(){var i=$.H,o=i.useState()[0];return o=typeof o.then=="function"?No(o):o,i=i.useState()[0],(ft!==null?ft.memoizedState:null)!==i&&(Be.flags|=1024),o}function Rh(){var i=Bc!==0;return Bc=0,i}function Oh(i,o,c){o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~c}function Nh(i){if(Pc){for(i=i.memoizedState;i!==null;){var o=i.queue;o!==null&&(o.pending=null),i=i.next}Pc=!1}rs=0,Ot=ft=Be=null,ua=!1,Oo=Bc=0,fa=null}function kn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ot===null?Be.memoizedState=Ot=i:Ot=Ot.next=i,Ot}function At(){if(ft===null){var i=Be.alternate;i=i!==null?i.memoizedState:null}else i=ft.next;var o=Ot===null?Be.memoizedState:Ot.next;if(o!==null)Ot=o,ft=i;else{if(i===null)throw Be.alternate===null?Error(r(467)):Error(r(310));ft=i,i={memoizedState:ft.memoizedState,baseState:ft.baseState,baseQueue:ft.baseQueue,queue:ft.queue,next:null},Ot===null?Be.memoizedState=Ot=i:Ot=Ot.next=i}return Ot}function $c(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function No(i){var o=Oo;return Oo+=1,fa===null&&(fa=[]),i=Hb(fa,i,o),o=Be,(Ot===null?o.memoizedState:Ot.next)===null&&(o=o.alternate,$.H=o===null||o.memoizedState===null?L_:Fh),i}function Uc(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return No(i);if(i.$$typeof===A)return rn(i)}throw Error(r(438,String(i)))}function Ih(i){var o=null,c=Be.updateQueue;if(c!==null&&(o=c.memoCache),o==null){var h=Be.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(o={data:h.data.map(function(b){return b.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),c===null&&(c=$c(),Be.updateQueue=c),c.memoCache=o,c=o.data[o.index],c===void 0)for(c=o.data[o.index]=Array(i),h=0;h<i;h++)c[h]=z;return o.index++,c}function ss(i,o){return typeof o=="function"?o(i):o}function qc(i){var o=At();return Mh(o,ft,i)}function Mh(i,o,c){var h=i.queue;if(h===null)throw Error(r(311));h.lastRenderedReducer=c;var b=i.baseQueue,_=h.pending;if(_!==null){if(b!==null){var k=b.next;b.next=_.next,_.next=k}o.baseQueue=b=_,h.pending=null}if(_=i.baseState,b===null)i.memoizedState=_;else{o=b.next;var O=k=null,B=null,Y=o,ie=!1;do{var le=Y.lane&-536870913;if(le!==Y.lane?(Ze&le)===le:(rs&le)===le){var ee=Y.revertLane;if(ee===0)B!==null&&(B=B.next={lane:0,revertLane:0,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),le===ia&&(ie=!0);else if((rs&ee)===ee){Y=Y.next,ee===ia&&(ie=!0);continue}else le={lane:0,revertLane:Y.revertLane,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},B===null?(O=B=le,k=_):B=B.next=le,Be.lanes|=ee,Ms|=ee;le=Y.action,bi&&c(_,le),_=Y.hasEagerState?Y.eagerState:c(_,le)}else ee={lane:le,revertLane:Y.revertLane,gesture:Y.gesture,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},B===null?(O=B=ee,k=_):B=B.next=ee,Be.lanes|=le,Ms|=le;Y=Y.next}while(Y!==null&&Y!==o);if(B===null?k=_:B.next=O,!Vn(_,i.memoizedState)&&(Nt=!0,ie&&(c=aa,c!==null)))throw c;i.memoizedState=_,i.baseState=k,i.baseQueue=B,h.lastRenderedState=_}return b===null&&(h.lanes=0),[i.memoizedState,h.dispatch]}function Dh(i){var o=At(),c=o.queue;if(c===null)throw Error(r(311));c.lastRenderedReducer=i;var h=c.dispatch,b=c.pending,_=o.memoizedState;if(b!==null){c.pending=null;var k=b=b.next;do _=i(_,k.action),k=k.next;while(k!==b);Vn(_,o.memoizedState)||(Nt=!0),o.memoizedState=_,o.baseQueue===null&&(o.baseState=_),c.lastRenderedState=_}return[_,h]}function n_(i,o,c){var h=Be,b=At(),_=Ye;if(_){if(c===void 0)throw Error(r(407));c=c()}else c=o();var k=!Vn((ft||b).memoizedState,c);if(k&&(b.memoizedState=c,Nt=!0),b=b.queue,zh(i_.bind(null,h,b,i),[i]),b.getSnapshot!==o||k||Ot!==null&&Ot.memoizedState.tag&1){if(h.flags|=2048,da(9,{destroy:void 0},s_.bind(null,h,b,c,o),null),mt===null)throw Error(r(349));_||(rs&127)!==0||r_(h,o,c)}return c}function r_(i,o,c){i.flags|=16384,i={getSnapshot:o,value:c},o=Be.updateQueue,o===null?(o=$c(),Be.updateQueue=o,o.stores=[i]):(c=o.stores,c===null?o.stores=[i]:c.push(i))}function s_(i,o,c,h){o.value=c,o.getSnapshot=h,a_(o)&&o_(i)}function i_(i,o,c){return c(function(){a_(o)&&o_(i)})}function a_(i){var o=i.getSnapshot;i=i.value;try{var c=o();return!Vn(i,c)}catch{return!0}}function o_(i){var o=ci(i,2);o!==null&&Pn(o,i,2)}function jh(i){var o=kn();if(typeof i=="function"){var c=i;if(i=c(),bi){ut(!0);try{c()}finally{ut(!1)}}}return o.memoizedState=o.baseState=i,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ss,lastRenderedState:i},o}function l_(i,o,c,h){return i.baseState=c,Mh(i,ft,typeof h=="function"?h:ss)}function V2(i,o,c,h,b){if(Hc(i))throw Error(r(485));if(i=o.action,i!==null){var _={payload:b,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(k){_.listeners.push(k)}};$.T!==null?c(!0):_.isTransition=!1,h(_),c=o.pending,c===null?(_.next=o.pending=_,c_(o,_)):(_.next=c.next,o.pending=c.next=_)}}function c_(i,o){var c=o.action,h=o.payload,b=i.state;if(o.isTransition){var _=$.T,k={};$.T=k;try{var O=c(b,h),B=$.S;B!==null&&B(k,O),u_(i,o,O)}catch(Y){Lh(i,o,Y)}finally{_!==null&&k.types!==null&&(_.types=k.types),$.T=_}}else try{_=c(b,h),u_(i,o,_)}catch(Y){Lh(i,o,Y)}}function u_(i,o,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(h){f_(i,o,h)},function(h){return Lh(i,o,h)}):f_(i,o,c)}function f_(i,o,c){o.status="fulfilled",o.value=c,d_(o),i.state=c,o=i.pending,o!==null&&(c=o.next,c===o?i.pending=null:(c=c.next,o.next=c,c_(i,c)))}function Lh(i,o,c){var h=i.pending;if(i.pending=null,h!==null){h=h.next;do o.status="rejected",o.reason=c,d_(o),o=o.next;while(o!==h)}i.action=null}function d_(i){i=i.listeners;for(var o=0;o<i.length;o++)(0,i[o])()}function h_(i,o){return o}function p_(i,o){if(Ye){var c=mt.formState;if(c!==null){e:{var h=Be;if(Ye){if(_t){t:{for(var b=_t,_=hr;b.nodeType!==8;){if(!_){b=null;break t}if(b=mr(b.nextSibling),b===null){b=null;break t}}_=b.data,b=_==="F!"||_==="F"?b:null}if(b){_t=mr(b.nextSibling),h=b.data==="F!";break e}}ks(h)}h=!1}h&&(o=c[0])}}return c=kn(),c.memoizedState=c.baseState=o,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:h_,lastRenderedState:o},c.queue=h,c=M_.bind(null,Be,h),h.dispatch=c,h=jh(!1),_=qh.bind(null,Be,!1,h.queue),h=kn(),b={state:o,dispatch:null,action:i,pending:null},h.queue=b,c=V2.bind(null,Be,b,_,c),b.dispatch=c,h.memoizedState=i,[o,c,!1]}function m_(i){var o=At();return g_(o,ft,i)}function g_(i,o,c){if(o=Mh(i,o,h_)[0],i=qc(ss)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var h=No(o)}catch(k){throw k===oa?Ic:k}else h=o;o=At();var b=o.queue,_=b.dispatch;return c!==o.memoizedState&&(Be.flags|=2048,da(9,{destroy:void 0},H2.bind(null,b,c),null)),[h,_,i]}function H2(i,o){i.action=o}function y_(i){var o=At(),c=ft;if(c!==null)return g_(o,c,i);At(),o=o.memoizedState,c=At();var h=c.queue.dispatch;return c.memoizedState=i,[o,h,!1]}function da(i,o,c,h){return i={tag:i,create:c,deps:h,inst:o,next:null},o=Be.updateQueue,o===null&&(o=$c(),Be.updateQueue=o),c=o.lastEffect,c===null?o.lastEffect=i.next=i:(h=c.next,c.next=i,i.next=h,o.lastEffect=i),i}function b_(){return At().memoizedState}function Fc(i,o,c,h){var b=kn();Be.flags|=i,b.memoizedState=da(1|o,{destroy:void 0},c,h===void 0?null:h)}function Vc(i,o,c,h){var b=At();h=h===void 0?null:h;var _=b.memoizedState.inst;ft!==null&&h!==null&&Th(h,ft.memoizedState.deps)?b.memoizedState=da(o,_,c,h):(Be.flags|=i,b.memoizedState=da(1|o,_,c,h))}function __(i,o){Fc(8390656,8,i,o)}function zh(i,o){Vc(2048,8,i,o)}function G2(i){Be.flags|=4;var o=Be.updateQueue;if(o===null)o=$c(),Be.updateQueue=o,o.events=[i];else{var c=o.events;c===null?o.events=[i]:c.push(i)}}function v_(i){var o=At().memoizedState;return G2({ref:o,nextImpl:i}),function(){if((it&2)!==0)throw Error(r(440));return o.impl.apply(void 0,arguments)}}function x_(i,o){return Vc(4,2,i,o)}function w_(i,o){return Vc(4,4,i,o)}function S_(i,o){if(typeof o=="function"){i=i();var c=o(i);return function(){typeof c=="function"?c():o(null)}}if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function k_(i,o,c){c=c!=null?c.concat([i]):null,Vc(4,4,S_.bind(null,o,i),c)}function Ph(){}function E_(i,o){var c=At();o=o===void 0?null:o;var h=c.memoizedState;return o!==null&&Th(o,h[1])?h[0]:(c.memoizedState=[i,o],i)}function C_(i,o){var c=At();o=o===void 0?null:o;var h=c.memoizedState;if(o!==null&&Th(o,h[1]))return h[0];if(h=i(),bi){ut(!0);try{i()}finally{ut(!1)}}return c.memoizedState=[h,o],h}function Bh(i,o,c){return c===void 0||(rs&1073741824)!==0&&(Ze&261930)===0?i.memoizedState=o:(i.memoizedState=c,i=Tv(),Be.lanes|=i,Ms|=i,c)}function T_(i,o,c,h){return Vn(c,o)?c:ca.current!==null?(i=Bh(i,c,h),Vn(i,o)||(Nt=!0),i):(rs&42)===0||(rs&1073741824)!==0&&(Ze&261930)===0?(Nt=!0,i.memoizedState=c):(i=Tv(),Be.lanes|=i,Ms|=i,o)}function A_(i,o,c,h,b){var _=G.p;G.p=_!==0&&8>_?_:8;var k=$.T,O={};$.T=O,qh(i,!1,o,c);try{var B=b(),Y=$.S;if(Y!==null&&Y(O,B),B!==null&&typeof B=="object"&&typeof B.then=="function"){var ie=U2(B,h);Io(i,o,ie,Jn(i))}else Io(i,o,h,Jn(i))}catch(le){Io(i,o,{then:function(){},status:"rejected",reason:le},Jn())}finally{G.p=_,k!==null&&O.types!==null&&(k.types=O.types),$.T=k}}function K2(){}function $h(i,o,c,h){if(i.tag!==5)throw Error(r(476));var b=R_(i).queue;A_(i,b,o,oe,c===null?K2:function(){return O_(i),c(h)})}function R_(i){var o=i.memoizedState;if(o!==null)return o;o={memoizedState:oe,baseState:oe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ss,lastRenderedState:oe},next:null};var c={};return o.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ss,lastRenderedState:c},next:null},i.memoizedState=o,i=i.alternate,i!==null&&(i.memoizedState=o),o}function O_(i){var o=R_(i);o.next===null&&(o=i.alternate.memoizedState),Io(i,o.next.queue,{},Jn())}function Uh(){return rn(Qo)}function N_(){return At().memoizedState}function I_(){return At().memoizedState}function Z2(i){for(var o=i.return;o!==null;){switch(o.tag){case 24:case 3:var c=Jn();i=Ts(c);var h=As(o,i,c);h!==null&&(Pn(h,o,c),To(h,o,c)),o={cache:gh()},i.payload=o;return}o=o.return}}function Q2(i,o,c){var h=Jn();c={lane:h,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Hc(i)?D_(o,c):(c=ih(i,o,c,h),c!==null&&(Pn(c,i,h),j_(c,o,h)))}function M_(i,o,c){var h=Jn();Io(i,o,c,h)}function Io(i,o,c,h){var b={lane:h,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null};if(Hc(i))D_(o,b);else{var _=i.alternate;if(i.lanes===0&&(_===null||_.lanes===0)&&(_=o.lastRenderedReducer,_!==null))try{var k=o.lastRenderedState,O=_(k,c);if(b.hasEagerState=!0,b.eagerState=O,Vn(O,k))return Ec(i,o,b,0),mt===null&&kc(),!1}catch{}if(c=ih(i,o,b,h),c!==null)return Pn(c,i,h),j_(c,o,h),!0}return!1}function qh(i,o,c,h){if(h={lane:2,revertLane:vp(),gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null},Hc(i)){if(o)throw Error(r(479))}else o=ih(i,c,h,2),o!==null&&Pn(o,i,2)}function Hc(i){var o=i.alternate;return i===Be||o!==null&&o===Be}function D_(i,o){ua=Pc=!0;var c=i.pending;c===null?o.next=o:(o.next=c.next,c.next=o),i.pending=o}function j_(i,o,c){if((c&4194048)!==0){var h=o.lanes;h&=i.pendingLanes,c|=h,o.lanes=c,$0(i,c)}}var Mo={readContext:rn,use:Uc,useCallback:Et,useContext:Et,useEffect:Et,useImperativeHandle:Et,useLayoutEffect:Et,useInsertionEffect:Et,useMemo:Et,useReducer:Et,useRef:Et,useState:Et,useDebugValue:Et,useDeferredValue:Et,useTransition:Et,useSyncExternalStore:Et,useId:Et,useHostTransitionStatus:Et,useFormState:Et,useActionState:Et,useOptimistic:Et,useMemoCache:Et,useCacheRefresh:Et};Mo.useEffectEvent=Et;var L_={readContext:rn,use:Uc,useCallback:function(i,o){return kn().memoizedState=[i,o===void 0?null:o],i},useContext:rn,useEffect:__,useImperativeHandle:function(i,o,c){c=c!=null?c.concat([i]):null,Fc(4194308,4,S_.bind(null,o,i),c)},useLayoutEffect:function(i,o){return Fc(4194308,4,i,o)},useInsertionEffect:function(i,o){Fc(4,2,i,o)},useMemo:function(i,o){var c=kn();o=o===void 0?null:o;var h=i();if(bi){ut(!0);try{i()}finally{ut(!1)}}return c.memoizedState=[h,o],h},useReducer:function(i,o,c){var h=kn();if(c!==void 0){var b=c(o);if(bi){ut(!0);try{c(o)}finally{ut(!1)}}}else b=o;return h.memoizedState=h.baseState=b,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:b},h.queue=i,i=i.dispatch=Q2.bind(null,Be,i),[h.memoizedState,i]},useRef:function(i){var o=kn();return i={current:i},o.memoizedState=i},useState:function(i){i=jh(i);var o=i.queue,c=M_.bind(null,Be,o);return o.dispatch=c,[i.memoizedState,c]},useDebugValue:Ph,useDeferredValue:function(i,o){var c=kn();return Bh(c,i,o)},useTransition:function(){var i=jh(!1);return i=A_.bind(null,Be,i.queue,!0,!1),kn().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,o,c){var h=Be,b=kn();if(Ye){if(c===void 0)throw Error(r(407));c=c()}else{if(c=o(),mt===null)throw Error(r(349));(Ze&127)!==0||r_(h,o,c)}b.memoizedState=c;var _={value:c,getSnapshot:o};return b.queue=_,__(i_.bind(null,h,_,i),[i]),h.flags|=2048,da(9,{destroy:void 0},s_.bind(null,h,_,c,o),null),c},useId:function(){var i=kn(),o=mt.identifierPrefix;if(Ye){var c=Mr,h=Ir;c=(h&~(1<<32-at(h)-1)).toString(32)+c,o="_"+o+"R_"+c,c=Bc++,0<c&&(o+="H"+c.toString(32)),o+="_"}else c=q2++,o="_"+o+"r_"+c.toString(32)+"_";return i.memoizedState=o},useHostTransitionStatus:Uh,useFormState:p_,useActionState:p_,useOptimistic:function(i){var o=kn();o.memoizedState=o.baseState=i;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=c,o=qh.bind(null,Be,!0,c),c.dispatch=o,[i,o]},useMemoCache:Ih,useCacheRefresh:function(){return kn().memoizedState=Z2.bind(null,Be)},useEffectEvent:function(i){var o=kn(),c={impl:i};return o.memoizedState=c,function(){if((it&2)!==0)throw Error(r(440));return c.impl.apply(void 0,arguments)}}},Fh={readContext:rn,use:Uc,useCallback:E_,useContext:rn,useEffect:zh,useImperativeHandle:k_,useInsertionEffect:x_,useLayoutEffect:w_,useMemo:C_,useReducer:qc,useRef:b_,useState:function(){return qc(ss)},useDebugValue:Ph,useDeferredValue:function(i,o){var c=At();return T_(c,ft.memoizedState,i,o)},useTransition:function(){var i=qc(ss)[0],o=At().memoizedState;return[typeof i=="boolean"?i:No(i),o]},useSyncExternalStore:n_,useId:N_,useHostTransitionStatus:Uh,useFormState:m_,useActionState:m_,useOptimistic:function(i,o){var c=At();return l_(c,ft,i,o)},useMemoCache:Ih,useCacheRefresh:I_};Fh.useEffectEvent=v_;var z_={readContext:rn,use:Uc,useCallback:E_,useContext:rn,useEffect:zh,useImperativeHandle:k_,useInsertionEffect:x_,useLayoutEffect:w_,useMemo:C_,useReducer:Dh,useRef:b_,useState:function(){return Dh(ss)},useDebugValue:Ph,useDeferredValue:function(i,o){var c=At();return ft===null?Bh(c,i,o):T_(c,ft.memoizedState,i,o)},useTransition:function(){var i=Dh(ss)[0],o=At().memoizedState;return[typeof i=="boolean"?i:No(i),o]},useSyncExternalStore:n_,useId:N_,useHostTransitionStatus:Uh,useFormState:y_,useActionState:y_,useOptimistic:function(i,o){var c=At();return ft!==null?l_(c,ft,i,o):(c.baseState=i,[i,c.queue.dispatch])},useMemoCache:Ih,useCacheRefresh:I_};z_.useEffectEvent=v_;function Vh(i,o,c,h){o=i.memoizedState,c=c(h,o),c=c==null?o:p({},o,c),i.memoizedState=c,i.lanes===0&&(i.updateQueue.baseState=c)}var Hh={enqueueSetState:function(i,o,c){i=i._reactInternals;var h=Jn(),b=Ts(h);b.payload=o,c!=null&&(b.callback=c),o=As(i,b,h),o!==null&&(Pn(o,i,h),To(o,i,h))},enqueueReplaceState:function(i,o,c){i=i._reactInternals;var h=Jn(),b=Ts(h);b.tag=1,b.payload=o,c!=null&&(b.callback=c),o=As(i,b,h),o!==null&&(Pn(o,i,h),To(o,i,h))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var c=Jn(),h=Ts(c);h.tag=2,o!=null&&(h.callback=o),o=As(i,h,c),o!==null&&(Pn(o,i,c),To(o,i,c))}};function P_(i,o,c,h,b,_,k){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(h,_,k):o.prototype&&o.prototype.isPureReactComponent?!_o(c,h)||!_o(b,_):!0}function B_(i,o,c,h){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(c,h),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(c,h),o.state!==i&&Hh.enqueueReplaceState(o,o.state,null)}function _i(i,o){var c=o;if("ref"in o){c={};for(var h in o)h!=="ref"&&(c[h]=o[h])}if(i=i.defaultProps){c===o&&(c=p({},c));for(var b in i)c[b]===void 0&&(c[b]=i[b])}return c}function $_(i){Sc(i)}function U_(i){console.error(i)}function q_(i){Sc(i)}function Gc(i,o){try{var c=i.onUncaughtError;c(o.value,{componentStack:o.stack})}catch(h){setTimeout(function(){throw h})}}function F_(i,o,c){try{var h=i.onCaughtError;h(c.value,{componentStack:c.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(b){setTimeout(function(){throw b})}}function Gh(i,o,c){return c=Ts(c),c.tag=3,c.payload={element:null},c.callback=function(){Gc(i,o)},c}function V_(i){return i=Ts(i),i.tag=3,i}function H_(i,o,c,h){var b=c.type.getDerivedStateFromError;if(typeof b=="function"){var _=h.value;i.payload=function(){return b(_)},i.callback=function(){F_(o,c,h)}}var k=c.stateNode;k!==null&&typeof k.componentDidCatch=="function"&&(i.callback=function(){F_(o,c,h),typeof b!="function"&&(Ds===null?Ds=new Set([this]):Ds.add(this));var O=h.stack;this.componentDidCatch(h.value,{componentStack:O!==null?O:""})})}function J2(i,o,c,h,b){if(c.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(o=c.alternate,o!==null&&sa(o,c,b,!0),c=Gn.current,c!==null){switch(c.tag){case 31:case 13:return pr===null?su():c.alternate===null&&Ct===0&&(Ct=3),c.flags&=-257,c.flags|=65536,c.lanes=b,h===Mc?c.flags|=16384:(o=c.updateQueue,o===null?c.updateQueue=new Set([h]):o.add(h),yp(i,h,b)),!1;case 22:return c.flags|=65536,h===Mc?c.flags|=16384:(o=c.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([h])},c.updateQueue=o):(c=o.retryQueue,c===null?o.retryQueue=new Set([h]):c.add(h)),yp(i,h,b)),!1}throw Error(r(435,c.tag))}return yp(i,h,b),su(),!1}if(Ye)return o=Gn.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=b,h!==fh&&(i=Error(r(422),{cause:h}),wo(ur(i,c)))):(h!==fh&&(o=Error(r(423),{cause:h}),wo(ur(o,c))),i=i.current.alternate,i.flags|=65536,b&=-b,i.lanes|=b,h=ur(h,c),b=Gh(i.stateNode,h,b),wh(i,b),Ct!==4&&(Ct=2)),!1;var _=Error(r(520),{cause:h});if(_=ur(_,c),Uo===null?Uo=[_]:Uo.push(_),Ct!==4&&(Ct=2),o===null)return!0;h=ur(h,c),c=o;do{switch(c.tag){case 3:return c.flags|=65536,i=b&-b,c.lanes|=i,i=Gh(c.stateNode,h,i),wh(c,i),!1;case 1:if(o=c.type,_=c.stateNode,(c.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Ds===null||!Ds.has(_))))return c.flags|=65536,b&=-b,c.lanes|=b,b=V_(b),H_(b,i,c,h),wh(c,b),!1}c=c.return}while(c!==null);return!1}var Kh=Error(r(461)),Nt=!1;function sn(i,o,c,h){o.child=i===null?Qb(o,null,c,h):yi(o,i.child,c,h)}function G_(i,o,c,h,b){c=c.render;var _=o.ref;if("ref"in h){var k={};for(var O in h)O!=="ref"&&(k[O]=h[O])}else k=h;return hi(o),h=Ah(i,o,c,k,_,b),O=Rh(),i!==null&&!Nt?(Oh(i,o,b),is(i,o,b)):(Ye&&O&&ch(o),o.flags|=1,sn(i,o,h,b),o.child)}function K_(i,o,c,h,b){if(i===null){var _=c.type;return typeof _=="function"&&!ah(_)&&_.defaultProps===void 0&&c.compare===null?(o.tag=15,o.type=_,Z_(i,o,_,h,b)):(i=Tc(c.type,null,h,o,o.mode,b),i.ref=o.ref,i.return=o,o.child=i)}if(_=i.child,!tp(i,b)){var k=_.memoizedProps;if(c=c.compare,c=c!==null?c:_o,c(k,h)&&i.ref===o.ref)return is(i,o,b)}return o.flags|=1,i=Wr(_,h),i.ref=o.ref,i.return=o,o.child=i}function Z_(i,o,c,h,b){if(i!==null){var _=i.memoizedProps;if(_o(_,h)&&i.ref===o.ref)if(Nt=!1,o.pendingProps=h=_,tp(i,b))(i.flags&131072)!==0&&(Nt=!0);else return o.lanes=i.lanes,is(i,o,b)}return Zh(i,o,c,h,b)}function Q_(i,o,c,h){var b=h.children,_=i!==null?i.memoizedState:null;if(i===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),h.mode==="hidden"){if((o.flags&128)!==0){if(_=_!==null?_.baseLanes|c:c,i!==null){for(h=o.child=i.child,b=0;h!==null;)b=b|h.lanes|h.childLanes,h=h.sibling;h=b&~_}else h=0,o.child=null;return J_(i,o,_,c,h)}if((c&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},i!==null&&Nc(o,_!==null?_.cachePool:null),_!==null?Xb(o,_):kh(),Wb(o);else return h=o.lanes=536870912,J_(i,o,_!==null?_.baseLanes|c:c,c,h)}else _!==null?(Nc(o,_.cachePool),Xb(o,_),Os(),o.memoizedState=null):(i!==null&&Nc(o,null),kh(),Os());return sn(i,o,b,c),o.child}function Do(i,o){return i!==null&&i.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function J_(i,o,c,h,b){var _=bh();return _=_===null?null:{parent:Rt._currentValue,pool:_},o.memoizedState={baseLanes:c,cachePool:_},i!==null&&Nc(o,null),kh(),Wb(o),i!==null&&sa(i,o,h,!0),o.childLanes=b,null}function Kc(i,o){return o=Qc({mode:o.mode,children:o.children},i.mode),o.ref=i.ref,i.child=o,o.return=i,o}function Y_(i,o,c){return yi(o,i.child,null,c),i=Kc(o,o.pendingProps),i.flags|=2,Kn(o),o.memoizedState=null,i}function Y2(i,o,c){var h=o.pendingProps,b=(o.flags&128)!==0;if(o.flags&=-129,i===null){if(Ye){if(h.mode==="hidden")return i=Kc(o,h),o.lanes=536870912,Do(null,i);if(Ch(o),(i=_t)?(i=cx(i,hr),i=i!==null&&i.data==="&"?i:null,i!==null&&(o.memoizedState={dehydrated:i,treeContext:ws!==null?{id:Ir,overflow:Mr}:null,retryLane:536870912,hydrationErrors:null},c=Db(i),c.return=o,o.child=c,nn=o,_t=null)):i=null,i===null)throw ks(o);return o.lanes=536870912,null}return Kc(o,h)}var _=i.memoizedState;if(_!==null){var k=_.dehydrated;if(Ch(o),b)if(o.flags&256)o.flags&=-257,o=Y_(i,o,c);else if(o.memoizedState!==null)o.child=i.child,o.flags|=128,o=null;else throw Error(r(558));else if(Nt||sa(i,o,c,!1),b=(c&i.childLanes)!==0,Nt||b){if(h=mt,h!==null&&(k=U0(h,c),k!==0&&k!==_.retryLane))throw _.retryLane=k,ci(i,k),Pn(h,i,k),Kh;su(),o=Y_(i,o,c)}else i=_.treeContext,_t=mr(k.nextSibling),nn=o,Ye=!0,Ss=null,hr=!1,i!==null&&zb(o,i),o=Kc(o,h),o.flags|=4096;return o}return i=Wr(i.child,{mode:h.mode,children:h.children}),i.ref=o.ref,o.child=i,i.return=o,i}function Zc(i,o){var c=o.ref;if(c===null)i!==null&&i.ref!==null&&(o.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(r(284));(i===null||i.ref!==c)&&(o.flags|=4194816)}}function Zh(i,o,c,h,b){return hi(o),c=Ah(i,o,c,h,void 0,b),h=Rh(),i!==null&&!Nt?(Oh(i,o,b),is(i,o,b)):(Ye&&h&&ch(o),o.flags|=1,sn(i,o,c,b),o.child)}function X_(i,o,c,h,b,_){return hi(o),o.updateQueue=null,c=t_(o,h,c,b),e_(i),h=Rh(),i!==null&&!Nt?(Oh(i,o,_),is(i,o,_)):(Ye&&h&&ch(o),o.flags|=1,sn(i,o,c,_),o.child)}function W_(i,o,c,h,b){if(hi(o),o.stateNode===null){var _=ea,k=c.contextType;typeof k=="object"&&k!==null&&(_=rn(k)),_=new c(h,_),o.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=Hh,o.stateNode=_,_._reactInternals=o,_=o.stateNode,_.props=h,_.state=o.memoizedState,_.refs={},vh(o),k=c.contextType,_.context=typeof k=="object"&&k!==null?rn(k):ea,_.state=o.memoizedState,k=c.getDerivedStateFromProps,typeof k=="function"&&(Vh(o,c,k,h),_.state=o.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(k=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),k!==_.state&&Hh.enqueueReplaceState(_,_.state,null),Ro(o,h,_,b),Ao(),_.state=o.memoizedState),typeof _.componentDidMount=="function"&&(o.flags|=4194308),h=!0}else if(i===null){_=o.stateNode;var O=o.memoizedProps,B=_i(c,O);_.props=B;var Y=_.context,ie=c.contextType;k=ea,typeof ie=="object"&&ie!==null&&(k=rn(ie));var le=c.getDerivedStateFromProps;ie=typeof le=="function"||typeof _.getSnapshotBeforeUpdate=="function",O=o.pendingProps!==O,ie||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(O||Y!==k)&&B_(o,_,h,k),Cs=!1;var ee=o.memoizedState;_.state=ee,Ro(o,h,_,b),Ao(),Y=o.memoizedState,O||ee!==Y||Cs?(typeof le=="function"&&(Vh(o,c,le,h),Y=o.memoizedState),(B=Cs||P_(o,c,B,h,ee,Y,k))?(ie||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(o.flags|=4194308)):(typeof _.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=h,o.memoizedState=Y),_.props=h,_.state=Y,_.context=k,h=B):(typeof _.componentDidMount=="function"&&(o.flags|=4194308),h=!1)}else{_=o.stateNode,xh(i,o),k=o.memoizedProps,ie=_i(c,k),_.props=ie,le=o.pendingProps,ee=_.context,Y=c.contextType,B=ea,typeof Y=="object"&&Y!==null&&(B=rn(Y)),O=c.getDerivedStateFromProps,(Y=typeof O=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(k!==le||ee!==B)&&B_(o,_,h,B),Cs=!1,ee=o.memoizedState,_.state=ee,Ro(o,h,_,b),Ao();var se=o.memoizedState;k!==le||ee!==se||Cs||i!==null&&i.dependencies!==null&&Rc(i.dependencies)?(typeof O=="function"&&(Vh(o,c,O,h),se=o.memoizedState),(ie=Cs||P_(o,c,ie,h,ee,se,B)||i!==null&&i.dependencies!==null&&Rc(i.dependencies))?(Y||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(h,se,B),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(h,se,B)),typeof _.componentDidUpdate=="function"&&(o.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof _.componentDidUpdate!="function"||k===i.memoizedProps&&ee===i.memoizedState||(o.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||k===i.memoizedProps&&ee===i.memoizedState||(o.flags|=1024),o.memoizedProps=h,o.memoizedState=se),_.props=h,_.state=se,_.context=B,h=ie):(typeof _.componentDidUpdate!="function"||k===i.memoizedProps&&ee===i.memoizedState||(o.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||k===i.memoizedProps&&ee===i.memoizedState||(o.flags|=1024),h=!1)}return _=h,Zc(i,o),h=(o.flags&128)!==0,_||h?(_=o.stateNode,c=h&&typeof c.getDerivedStateFromError!="function"?null:_.render(),o.flags|=1,i!==null&&h?(o.child=yi(o,i.child,null,b),o.child=yi(o,null,c,b)):sn(i,o,c,b),o.memoizedState=_.state,i=o.child):i=is(i,o,b),i}function ev(i,o,c,h){return fi(),o.flags|=256,sn(i,o,c,h),o.child}var Qh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Jh(i){return{baseLanes:i,cachePool:Fb()}}function Yh(i,o,c){return i=i!==null?i.childLanes&~c:0,o&&(i|=Qn),i}function tv(i,o,c){var h=o.pendingProps,b=!1,_=(o.flags&128)!==0,k;if((k=_)||(k=i!==null&&i.memoizedState===null?!1:(Tt.current&2)!==0),k&&(b=!0,o.flags&=-129),k=(o.flags&32)!==0,o.flags&=-33,i===null){if(Ye){if(b?Rs(o):Os(),(i=_t)?(i=cx(i,hr),i=i!==null&&i.data!=="&"?i:null,i!==null&&(o.memoizedState={dehydrated:i,treeContext:ws!==null?{id:Ir,overflow:Mr}:null,retryLane:536870912,hydrationErrors:null},c=Db(i),c.return=o,o.child=c,nn=o,_t=null)):i=null,i===null)throw ks(o);return Mp(i)?o.lanes=32:o.lanes=536870912,null}var O=h.children;return h=h.fallback,b?(Os(),b=o.mode,O=Qc({mode:"hidden",children:O},b),h=ui(h,b,c,null),O.return=o,h.return=o,O.sibling=h,o.child=O,h=o.child,h.memoizedState=Jh(c),h.childLanes=Yh(i,k,c),o.memoizedState=Qh,Do(null,h)):(Rs(o),Xh(o,O))}var B=i.memoizedState;if(B!==null&&(O=B.dehydrated,O!==null)){if(_)o.flags&256?(Rs(o),o.flags&=-257,o=Wh(i,o,c)):o.memoizedState!==null?(Os(),o.child=i.child,o.flags|=128,o=null):(Os(),O=h.fallback,b=o.mode,h=Qc({mode:"visible",children:h.children},b),O=ui(O,b,c,null),O.flags|=2,h.return=o,O.return=o,h.sibling=O,o.child=h,yi(o,i.child,null,c),h=o.child,h.memoizedState=Jh(c),h.childLanes=Yh(i,k,c),o.memoizedState=Qh,o=Do(null,h));else if(Rs(o),Mp(O)){if(k=O.nextSibling&&O.nextSibling.dataset,k)var Y=k.dgst;k=Y,h=Error(r(419)),h.stack="",h.digest=k,wo({value:h,source:null,stack:null}),o=Wh(i,o,c)}else if(Nt||sa(i,o,c,!1),k=(c&i.childLanes)!==0,Nt||k){if(k=mt,k!==null&&(h=U0(k,c),h!==0&&h!==B.retryLane))throw B.retryLane=h,ci(i,h),Pn(k,i,h),Kh;Ip(O)||su(),o=Wh(i,o,c)}else Ip(O)?(o.flags|=192,o.child=i.child,o=null):(i=B.treeContext,_t=mr(O.nextSibling),nn=o,Ye=!0,Ss=null,hr=!1,i!==null&&zb(o,i),o=Xh(o,h.children),o.flags|=4096);return o}return b?(Os(),O=h.fallback,b=o.mode,B=i.child,Y=B.sibling,h=Wr(B,{mode:"hidden",children:h.children}),h.subtreeFlags=B.subtreeFlags&65011712,Y!==null?O=Wr(Y,O):(O=ui(O,b,c,null),O.flags|=2),O.return=o,h.return=o,h.sibling=O,o.child=h,Do(null,h),h=o.child,O=i.child.memoizedState,O===null?O=Jh(c):(b=O.cachePool,b!==null?(B=Rt._currentValue,b=b.parent!==B?{parent:B,pool:B}:b):b=Fb(),O={baseLanes:O.baseLanes|c,cachePool:b}),h.memoizedState=O,h.childLanes=Yh(i,k,c),o.memoizedState=Qh,Do(i.child,h)):(Rs(o),c=i.child,i=c.sibling,c=Wr(c,{mode:"visible",children:h.children}),c.return=o,c.sibling=null,i!==null&&(k=o.deletions,k===null?(o.deletions=[i],o.flags|=16):k.push(i)),o.child=c,o.memoizedState=null,c)}function Xh(i,o){return o=Qc({mode:"visible",children:o},i.mode),o.return=i,i.child=o}function Qc(i,o){return i=Hn(22,i,null,o),i.lanes=0,i}function Wh(i,o,c){return yi(o,i.child,null,c),i=Xh(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function nv(i,o,c){i.lanes|=o;var h=i.alternate;h!==null&&(h.lanes|=o),ph(i.return,o,c)}function ep(i,o,c,h,b,_){var k=i.memoizedState;k===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:h,tail:c,tailMode:b,treeForkCount:_}:(k.isBackwards=o,k.rendering=null,k.renderingStartTime=0,k.last=h,k.tail=c,k.tailMode=b,k.treeForkCount=_)}function rv(i,o,c){var h=o.pendingProps,b=h.revealOrder,_=h.tail;h=h.children;var k=Tt.current,O=(k&2)!==0;if(O?(k=k&1|2,o.flags|=128):k&=1,R(Tt,k),sn(i,o,h,c),h=Ye?xo:0,!O&&i!==null&&(i.flags&128)!==0)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&nv(i,c,o);else if(i.tag===19)nv(i,c,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(b){case"forwards":for(c=o.child,b=null;c!==null;)i=c.alternate,i!==null&&zc(i)===null&&(b=c),c=c.sibling;c=b,c===null?(b=o.child,o.child=null):(b=c.sibling,c.sibling=null),ep(o,!1,b,c,_,h);break;case"backwards":case"unstable_legacy-backwards":for(c=null,b=o.child,o.child=null;b!==null;){if(i=b.alternate,i!==null&&zc(i)===null){o.child=b;break}i=b.sibling,b.sibling=c,c=b,b=i}ep(o,!0,c,null,_,h);break;case"together":ep(o,!1,null,null,void 0,h);break;default:o.memoizedState=null}return o.child}function is(i,o,c){if(i!==null&&(o.dependencies=i.dependencies),Ms|=o.lanes,(c&o.childLanes)===0)if(i!==null){if(sa(i,o,c,!1),(c&o.childLanes)===0)return null}else return null;if(i!==null&&o.child!==i.child)throw Error(r(153));if(o.child!==null){for(i=o.child,c=Wr(i,i.pendingProps),o.child=c,c.return=o;i.sibling!==null;)i=i.sibling,c=c.sibling=Wr(i,i.pendingProps),c.return=o;c.sibling=null}return o.child}function tp(i,o){return(i.lanes&o)!==0?!0:(i=i.dependencies,!!(i!==null&&Rc(i)))}function X2(i,o,c){switch(o.tag){case 3:Me(o,o.stateNode.containerInfo),Es(o,Rt,i.memoizedState.cache),fi();break;case 27:case 5:et(o);break;case 4:Me(o,o.stateNode.containerInfo);break;case 10:Es(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,Ch(o),null;break;case 13:var h=o.memoizedState;if(h!==null)return h.dehydrated!==null?(Rs(o),o.flags|=128,null):(c&o.child.childLanes)!==0?tv(i,o,c):(Rs(o),i=is(i,o,c),i!==null?i.sibling:null);Rs(o);break;case 19:var b=(i.flags&128)!==0;if(h=(c&o.childLanes)!==0,h||(sa(i,o,c,!1),h=(c&o.childLanes)!==0),b){if(h)return rv(i,o,c);o.flags|=128}if(b=o.memoizedState,b!==null&&(b.rendering=null,b.tail=null,b.lastEffect=null),R(Tt,Tt.current),h)break;return null;case 22:return o.lanes=0,Q_(i,o,c,o.pendingProps);case 24:Es(o,Rt,i.memoizedState.cache)}return is(i,o,c)}function sv(i,o,c){if(i!==null)if(i.memoizedProps!==o.pendingProps)Nt=!0;else{if(!tp(i,c)&&(o.flags&128)===0)return Nt=!1,X2(i,o,c);Nt=(i.flags&131072)!==0}else Nt=!1,Ye&&(o.flags&1048576)!==0&&Lb(o,xo,o.index);switch(o.lanes=0,o.tag){case 16:e:{var h=o.pendingProps;if(i=mi(o.elementType),o.type=i,typeof i=="function")ah(i)?(h=_i(i,h),o.tag=1,o=W_(null,o,i,h,c)):(o.tag=0,o=Zh(null,o,i,h,c));else{if(i!=null){var b=i.$$typeof;if(b===j){o.tag=11,o=G_(null,o,i,h,c);break e}else if(b===P){o.tag=14,o=K_(null,o,i,h,c);break e}}throw o=X(i)||i,Error(r(306,o,""))}}return o;case 0:return Zh(i,o,o.type,o.pendingProps,c);case 1:return h=o.type,b=_i(h,o.pendingProps),W_(i,o,h,b,c);case 3:e:{if(Me(o,o.stateNode.containerInfo),i===null)throw Error(r(387));h=o.pendingProps;var _=o.memoizedState;b=_.element,xh(i,o),Ro(o,h,null,c);var k=o.memoizedState;if(h=k.cache,Es(o,Rt,h),h!==_.cache&&mh(o,[Rt],c,!0),Ao(),h=k.element,_.isDehydrated)if(_={element:h,isDehydrated:!1,cache:k.cache},o.updateQueue.baseState=_,o.memoizedState=_,o.flags&256){o=ev(i,o,h,c);break e}else if(h!==b){b=ur(Error(r(424)),o),wo(b),o=ev(i,o,h,c);break e}else for(i=o.stateNode.containerInfo,i.nodeType===9?i=i.body:i=i.nodeName==="HTML"?i.ownerDocument.body:i,_t=mr(i.firstChild),nn=o,Ye=!0,Ss=null,hr=!0,c=Qb(o,null,h,c),o.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(fi(),h===b){o=is(i,o,c);break e}sn(i,o,h,c)}o=o.child}return o;case 26:return Zc(i,o),i===null?(c=mx(o.type,null,o.pendingProps,null))?o.memoizedState=c:Ye||(c=o.type,i=o.pendingProps,h=fu(he.current).createElement(c),h[tn]=o,h[In]=i,an(h,c,i),Kt(h),o.stateNode=h):o.memoizedState=mx(o.type,i.memoizedProps,o.pendingProps,i.memoizedState),null;case 27:return et(o),i===null&&Ye&&(h=o.stateNode=dx(o.type,o.pendingProps,he.current),nn=o,hr=!0,b=_t,Ps(o.type)?(Dp=b,_t=mr(h.firstChild)):_t=b),sn(i,o,o.pendingProps.children,c),Zc(i,o),i===null&&(o.flags|=4194304),o.child;case 5:return i===null&&Ye&&((b=h=_t)&&(h=AR(h,o.type,o.pendingProps,hr),h!==null?(o.stateNode=h,nn=o,_t=mr(h.firstChild),hr=!1,b=!0):b=!1),b||ks(o)),et(o),b=o.type,_=o.pendingProps,k=i!==null?i.memoizedProps:null,h=_.children,Rp(b,_)?h=null:k!==null&&Rp(b,k)&&(o.flags|=32),o.memoizedState!==null&&(b=Ah(i,o,F2,null,null,c),Qo._currentValue=b),Zc(i,o),sn(i,o,h,c),o.child;case 6:return i===null&&Ye&&((i=c=_t)&&(c=RR(c,o.pendingProps,hr),c!==null?(o.stateNode=c,nn=o,_t=null,i=!0):i=!1),i||ks(o)),null;case 13:return tv(i,o,c);case 4:return Me(o,o.stateNode.containerInfo),h=o.pendingProps,i===null?o.child=yi(o,null,h,c):sn(i,o,h,c),o.child;case 11:return G_(i,o,o.type,o.pendingProps,c);case 7:return sn(i,o,o.pendingProps,c),o.child;case 8:return sn(i,o,o.pendingProps.children,c),o.child;case 12:return sn(i,o,o.pendingProps.children,c),o.child;case 10:return h=o.pendingProps,Es(o,o.type,h.value),sn(i,o,h.children,c),o.child;case 9:return b=o.type._context,h=o.pendingProps.children,hi(o),b=rn(b),h=h(b),o.flags|=1,sn(i,o,h,c),o.child;case 14:return K_(i,o,o.type,o.pendingProps,c);case 15:return Z_(i,o,o.type,o.pendingProps,c);case 19:return rv(i,o,c);case 31:return Y2(i,o,c);case 22:return Q_(i,o,c,o.pendingProps);case 24:return hi(o),h=rn(Rt),i===null?(b=bh(),b===null&&(b=mt,_=gh(),b.pooledCache=_,_.refCount++,_!==null&&(b.pooledCacheLanes|=c),b=_),o.memoizedState={parent:h,cache:b},vh(o),Es(o,Rt,b)):((i.lanes&c)!==0&&(xh(i,o),Ro(o,null,null,c),Ao()),b=i.memoizedState,_=o.memoizedState,b.parent!==h?(b={parent:h,cache:h},o.memoizedState=b,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=b),Es(o,Rt,h)):(h=_.cache,Es(o,Rt,h),h!==b.cache&&mh(o,[Rt],c,!0))),sn(i,o,o.pendingProps.children,c),o.child;case 29:throw o.pendingProps}throw Error(r(156,o.tag))}function as(i){i.flags|=4}function np(i,o,c,h,b){if((o=(i.mode&32)!==0)&&(o=!1),o){if(i.flags|=16777216,(b&335544128)===b)if(i.stateNode.complete)i.flags|=8192;else if(Nv())i.flags|=8192;else throw gi=Mc,_h}else i.flags&=-16777217}function iv(i,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!vx(o))if(Nv())i.flags|=8192;else throw gi=Mc,_h}function Jc(i,o){o!==null&&(i.flags|=4),i.flags&16384&&(o=i.tag!==22?P0():536870912,i.lanes|=o,ga|=o)}function jo(i,o){if(!Ye)switch(i.tailMode){case"hidden":o=i.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?i.tail=null:c.sibling=null;break;case"collapsed":c=i.tail;for(var h=null;c!==null;)c.alternate!==null&&(h=c),c=c.sibling;h===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:h.sibling=null}}function vt(i){var o=i.alternate!==null&&i.alternate.child===i.child,c=0,h=0;if(o)for(var b=i.child;b!==null;)c|=b.lanes|b.childLanes,h|=b.subtreeFlags&65011712,h|=b.flags&65011712,b.return=i,b=b.sibling;else for(b=i.child;b!==null;)c|=b.lanes|b.childLanes,h|=b.subtreeFlags,h|=b.flags,b.return=i,b=b.sibling;return i.subtreeFlags|=h,i.childLanes=c,o}function W2(i,o,c){var h=o.pendingProps;switch(uh(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vt(o),null;case 1:return vt(o),null;case 3:return c=o.stateNode,h=null,i!==null&&(h=i.memoizedState.cache),o.memoizedState.cache!==h&&(o.flags|=2048),ns(Rt),je(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(i===null||i.child===null)&&(ra(o)?as(o):i===null||i.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,dh())),vt(o),null;case 26:var b=o.type,_=o.memoizedState;return i===null?(as(o),_!==null?(vt(o),iv(o,_)):(vt(o),np(o,b,null,h,c))):_?_!==i.memoizedState?(as(o),vt(o),iv(o,_)):(vt(o),o.flags&=-16777217):(i=i.memoizedProps,i!==h&&as(o),vt(o),np(o,b,i,h,c)),null;case 27:if(pt(o),c=he.current,b=o.type,i!==null&&o.stateNode!=null)i.memoizedProps!==h&&as(o);else{if(!h){if(o.stateNode===null)throw Error(r(166));return vt(o),null}i=te.current,ra(o)?Pb(o):(i=dx(b,h,c),o.stateNode=i,as(o))}return vt(o),null;case 5:if(pt(o),b=o.type,i!==null&&o.stateNode!=null)i.memoizedProps!==h&&as(o);else{if(!h){if(o.stateNode===null)throw Error(r(166));return vt(o),null}if(_=te.current,ra(o))Pb(o);else{var k=fu(he.current);switch(_){case 1:_=k.createElementNS("http://www.w3.org/2000/svg",b);break;case 2:_=k.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;default:switch(b){case"svg":_=k.createElementNS("http://www.w3.org/2000/svg",b);break;case"math":_=k.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;case"script":_=k.createElement("div"),_.innerHTML="<script><\/script>",_=_.removeChild(_.firstChild);break;case"select":_=typeof h.is=="string"?k.createElement("select",{is:h.is}):k.createElement("select"),h.multiple?_.multiple=!0:h.size&&(_.size=h.size);break;default:_=typeof h.is=="string"?k.createElement(b,{is:h.is}):k.createElement(b)}}_[tn]=o,_[In]=h;e:for(k=o.child;k!==null;){if(k.tag===5||k.tag===6)_.appendChild(k.stateNode);else if(k.tag!==4&&k.tag!==27&&k.child!==null){k.child.return=k,k=k.child;continue}if(k===o)break e;for(;k.sibling===null;){if(k.return===null||k.return===o)break e;k=k.return}k.sibling.return=k.return,k=k.sibling}o.stateNode=_;e:switch(an(_,b,h),b){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}h&&as(o)}}return vt(o),np(o,o.type,i===null?null:i.memoizedProps,o.pendingProps,c),null;case 6:if(i&&o.stateNode!=null)i.memoizedProps!==h&&as(o);else{if(typeof h!="string"&&o.stateNode===null)throw Error(r(166));if(i=he.current,ra(o)){if(i=o.stateNode,c=o.memoizedProps,h=null,b=nn,b!==null)switch(b.tag){case 27:case 5:h=b.memoizedProps}i[tn]=o,i=!!(i.nodeValue===c||h!==null&&h.suppressHydrationWarning===!0||tx(i.nodeValue,c)),i||ks(o,!0)}else i=fu(i).createTextNode(h),i[tn]=o,o.stateNode=i}return vt(o),null;case 31:if(c=o.memoizedState,i===null||i.memoizedState!==null){if(h=ra(o),c!==null){if(i===null){if(!h)throw Error(r(318));if(i=o.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(557));i[tn]=o}else fi(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;vt(o),i=!1}else c=dh(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=c),i=!0;if(!i)return o.flags&256?(Kn(o),o):(Kn(o),null);if((o.flags&128)!==0)throw Error(r(558))}return vt(o),null;case 13:if(h=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(b=ra(o),h!==null&&h.dehydrated!==null){if(i===null){if(!b)throw Error(r(318));if(b=o.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(r(317));b[tn]=o}else fi(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;vt(o),b=!1}else b=dh(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=b),b=!0;if(!b)return o.flags&256?(Kn(o),o):(Kn(o),null)}return Kn(o),(o.flags&128)!==0?(o.lanes=c,o):(c=h!==null,i=i!==null&&i.memoizedState!==null,c&&(h=o.child,b=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(b=h.alternate.memoizedState.cachePool.pool),_=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(_=h.memoizedState.cachePool.pool),_!==b&&(h.flags|=2048)),c!==i&&c&&(o.child.flags|=8192),Jc(o,o.updateQueue),vt(o),null);case 4:return je(),i===null&&kp(o.stateNode.containerInfo),vt(o),null;case 10:return ns(o.type),vt(o),null;case 19:if(U(Tt),h=o.memoizedState,h===null)return vt(o),null;if(b=(o.flags&128)!==0,_=h.rendering,_===null)if(b)jo(h,!1);else{if(Ct!==0||i!==null&&(i.flags&128)!==0)for(i=o.child;i!==null;){if(_=zc(i),_!==null){for(o.flags|=128,jo(h,!1),i=_.updateQueue,o.updateQueue=i,Jc(o,i),o.subtreeFlags=0,i=c,c=o.child;c!==null;)Mb(c,i),c=c.sibling;return R(Tt,Tt.current&1|2),Ye&&es(o,h.treeForkCount),o.child}i=i.sibling}h.tail!==null&&be()>tu&&(o.flags|=128,b=!0,jo(h,!1),o.lanes=4194304)}else{if(!b)if(i=zc(_),i!==null){if(o.flags|=128,b=!0,i=i.updateQueue,o.updateQueue=i,Jc(o,i),jo(h,!0),h.tail===null&&h.tailMode==="hidden"&&!_.alternate&&!Ye)return vt(o),null}else 2*be()-h.renderingStartTime>tu&&c!==536870912&&(o.flags|=128,b=!0,jo(h,!1),o.lanes=4194304);h.isBackwards?(_.sibling=o.child,o.child=_):(i=h.last,i!==null?i.sibling=_:o.child=_,h.last=_)}return h.tail!==null?(i=h.tail,h.rendering=i,h.tail=i.sibling,h.renderingStartTime=be(),i.sibling=null,c=Tt.current,R(Tt,b?c&1|2:c&1),Ye&&es(o,h.treeForkCount),i):(vt(o),null);case 22:case 23:return Kn(o),Eh(),h=o.memoizedState!==null,i!==null?i.memoizedState!==null!==h&&(o.flags|=8192):h&&(o.flags|=8192),h?(c&536870912)!==0&&(o.flags&128)===0&&(vt(o),o.subtreeFlags&6&&(o.flags|=8192)):vt(o),c=o.updateQueue,c!==null&&Jc(o,c.retryQueue),c=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),h=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(h=o.memoizedState.cachePool.pool),h!==c&&(o.flags|=2048),i!==null&&U(pi),null;case 24:return c=null,i!==null&&(c=i.memoizedState.cache),o.memoizedState.cache!==c&&(o.flags|=2048),ns(Rt),vt(o),null;case 25:return null;case 30:return null}throw Error(r(156,o.tag))}function eR(i,o){switch(uh(o),o.tag){case 1:return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return ns(Rt),je(),i=o.flags,(i&65536)!==0&&(i&128)===0?(o.flags=i&-65537|128,o):null;case 26:case 27:case 5:return pt(o),null;case 31:if(o.memoizedState!==null){if(Kn(o),o.alternate===null)throw Error(r(340));fi()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 13:if(Kn(o),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(r(340));fi()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return U(Tt),null;case 4:return je(),null;case 10:return ns(o.type),null;case 22:case 23:return Kn(o),Eh(),i!==null&&U(pi),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 24:return ns(Rt),null;case 25:return null;default:return null}}function av(i,o){switch(uh(o),o.tag){case 3:ns(Rt),je();break;case 26:case 27:case 5:pt(o);break;case 4:je();break;case 31:o.memoizedState!==null&&Kn(o);break;case 13:Kn(o);break;case 19:U(Tt);break;case 10:ns(o.type);break;case 22:case 23:Kn(o),Eh(),i!==null&&U(pi);break;case 24:ns(Rt)}}function Lo(i,o){try{var c=o.updateQueue,h=c!==null?c.lastEffect:null;if(h!==null){var b=h.next;c=b;do{if((c.tag&i)===i){h=void 0;var _=c.create,k=c.inst;h=_(),k.destroy=h}c=c.next}while(c!==b)}}catch(O){lt(o,o.return,O)}}function Ns(i,o,c){try{var h=o.updateQueue,b=h!==null?h.lastEffect:null;if(b!==null){var _=b.next;h=_;do{if((h.tag&i)===i){var k=h.inst,O=k.destroy;if(O!==void 0){k.destroy=void 0,b=o;var B=c,Y=O;try{Y()}catch(ie){lt(b,B,ie)}}}h=h.next}while(h!==_)}}catch(ie){lt(o,o.return,ie)}}function ov(i){var o=i.updateQueue;if(o!==null){var c=i.stateNode;try{Yb(o,c)}catch(h){lt(i,i.return,h)}}}function lv(i,o,c){c.props=_i(i.type,i.memoizedProps),c.state=i.memoizedState;try{c.componentWillUnmount()}catch(h){lt(i,o,h)}}function zo(i,o){try{var c=i.ref;if(c!==null){switch(i.tag){case 26:case 27:case 5:var h=i.stateNode;break;case 30:h=i.stateNode;break;default:h=i.stateNode}typeof c=="function"?i.refCleanup=c(h):c.current=h}}catch(b){lt(i,o,b)}}function Dr(i,o){var c=i.ref,h=i.refCleanup;if(c!==null)if(typeof h=="function")try{h()}catch(b){lt(i,o,b)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(b){lt(i,o,b)}else c.current=null}function cv(i){var o=i.type,c=i.memoizedProps,h=i.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":c.autoFocus&&h.focus();break e;case"img":c.src?h.src=c.src:c.srcSet&&(h.srcset=c.srcSet)}}catch(b){lt(i,i.return,b)}}function rp(i,o,c){try{var h=i.stateNode;wR(h,i.type,c,o),h[In]=o}catch(b){lt(i,i.return,b)}}function uv(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Ps(i.type)||i.tag===4}function sp(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||uv(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Ps(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function ip(i,o,c){var h=i.tag;if(h===5||h===6)i=i.stateNode,o?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(i,o):(o=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,o.appendChild(i),c=c._reactRootContainer,c!=null||o.onclick!==null||(o.onclick=Yr));else if(h!==4&&(h===27&&Ps(i.type)&&(c=i.stateNode,o=null),i=i.child,i!==null))for(ip(i,o,c),i=i.sibling;i!==null;)ip(i,o,c),i=i.sibling}function Yc(i,o,c){var h=i.tag;if(h===5||h===6)i=i.stateNode,o?c.insertBefore(i,o):c.appendChild(i);else if(h!==4&&(h===27&&Ps(i.type)&&(c=i.stateNode),i=i.child,i!==null))for(Yc(i,o,c),i=i.sibling;i!==null;)Yc(i,o,c),i=i.sibling}function fv(i){var o=i.stateNode,c=i.memoizedProps;try{for(var h=i.type,b=o.attributes;b.length;)o.removeAttributeNode(b[0]);an(o,h,c),o[tn]=i,o[In]=c}catch(_){lt(i,i.return,_)}}var os=!1,It=!1,ap=!1,dv=typeof WeakSet=="function"?WeakSet:Set,Zt=null;function tR(i,o){if(i=i.containerInfo,Tp=bu,i=kb(i),Wd(i)){if("selectionStart"in i)var c={start:i.selectionStart,end:i.selectionEnd};else e:{c=(c=i.ownerDocument)&&c.defaultView||window;var h=c.getSelection&&c.getSelection();if(h&&h.rangeCount!==0){c=h.anchorNode;var b=h.anchorOffset,_=h.focusNode;h=h.focusOffset;try{c.nodeType,_.nodeType}catch{c=null;break e}var k=0,O=-1,B=-1,Y=0,ie=0,le=i,ee=null;t:for(;;){for(var se;le!==c||b!==0&&le.nodeType!==3||(O=k+b),le!==_||h!==0&&le.nodeType!==3||(B=k+h),le.nodeType===3&&(k+=le.nodeValue.length),(se=le.firstChild)!==null;)ee=le,le=se;for(;;){if(le===i)break t;if(ee===c&&++Y===b&&(O=k),ee===_&&++ie===h&&(B=k),(se=le.nextSibling)!==null)break;le=ee,ee=le.parentNode}le=se}c=O===-1||B===-1?null:{start:O,end:B}}else c=null}c=c||{start:0,end:0}}else c=null;for(Ap={focusedElem:i,selectionRange:c},bu=!1,Zt=o;Zt!==null;)if(o=Zt,i=o.child,(o.subtreeFlags&1028)!==0&&i!==null)i.return=o,Zt=i;else for(;Zt!==null;){switch(o=Zt,_=o.alternate,i=o.flags,o.tag){case 0:if((i&4)!==0&&(i=o.updateQueue,i=i!==null?i.events:null,i!==null))for(c=0;c<i.length;c++)b=i[c],b.ref.impl=b.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&_!==null){i=void 0,c=o,b=_.memoizedProps,_=_.memoizedState,h=c.stateNode;try{var we=_i(c.type,b);i=h.getSnapshotBeforeUpdate(we,_),h.__reactInternalSnapshotBeforeUpdate=i}catch(Ne){lt(c,c.return,Ne)}}break;case 3:if((i&1024)!==0){if(i=o.stateNode.containerInfo,c=i.nodeType,c===9)Np(i);else if(c===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":Np(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(r(163))}if(i=o.sibling,i!==null){i.return=o.return,Zt=i;break}Zt=o.return}}function hv(i,o,c){var h=c.flags;switch(c.tag){case 0:case 11:case 15:cs(i,c),h&4&&Lo(5,c);break;case 1:if(cs(i,c),h&4)if(i=c.stateNode,o===null)try{i.componentDidMount()}catch(k){lt(c,c.return,k)}else{var b=_i(c.type,o.memoizedProps);o=o.memoizedState;try{i.componentDidUpdate(b,o,i.__reactInternalSnapshotBeforeUpdate)}catch(k){lt(c,c.return,k)}}h&64&&ov(c),h&512&&zo(c,c.return);break;case 3:if(cs(i,c),h&64&&(i=c.updateQueue,i!==null)){if(o=null,c.child!==null)switch(c.child.tag){case 27:case 5:o=c.child.stateNode;break;case 1:o=c.child.stateNode}try{Yb(i,o)}catch(k){lt(c,c.return,k)}}break;case 27:o===null&&h&4&&fv(c);case 26:case 5:cs(i,c),o===null&&h&4&&cv(c),h&512&&zo(c,c.return);break;case 12:cs(i,c);break;case 31:cs(i,c),h&4&&gv(i,c);break;case 13:cs(i,c),h&4&&yv(i,c),h&64&&(i=c.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(c=uR.bind(null,c),OR(i,c))));break;case 22:if(h=c.memoizedState!==null||os,!h){o=o!==null&&o.memoizedState!==null||It,b=os;var _=It;os=h,(It=o)&&!_?us(i,c,(c.subtreeFlags&8772)!==0):cs(i,c),os=b,It=_}break;case 30:break;default:cs(i,c)}}function pv(i){var o=i.alternate;o!==null&&(i.alternate=null,pv(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&Ld(o)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var xt=null,Dn=!1;function ls(i,o,c){for(c=c.child;c!==null;)mv(i,o,c),c=c.sibling}function mv(i,o,c){if(Pe&&typeof Pe.onCommitFiberUnmount=="function")try{Pe.onCommitFiberUnmount(Xe,c)}catch{}switch(c.tag){case 26:It||Dr(c,o),ls(i,o,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:It||Dr(c,o);var h=xt,b=Dn;Ps(c.type)&&(xt=c.stateNode,Dn=!1),ls(i,o,c),Go(c.stateNode),xt=h,Dn=b;break;case 5:It||Dr(c,o);case 6:if(h=xt,b=Dn,xt=null,ls(i,o,c),xt=h,Dn=b,xt!==null)if(Dn)try{(xt.nodeType===9?xt.body:xt.nodeName==="HTML"?xt.ownerDocument.body:xt).removeChild(c.stateNode)}catch(_){lt(c,o,_)}else try{xt.removeChild(c.stateNode)}catch(_){lt(c,o,_)}break;case 18:xt!==null&&(Dn?(i=xt,ox(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,c.stateNode),ka(i)):ox(xt,c.stateNode));break;case 4:h=xt,b=Dn,xt=c.stateNode.containerInfo,Dn=!0,ls(i,o,c),xt=h,Dn=b;break;case 0:case 11:case 14:case 15:Ns(2,c,o),It||Ns(4,c,o),ls(i,o,c);break;case 1:It||(Dr(c,o),h=c.stateNode,typeof h.componentWillUnmount=="function"&&lv(c,o,h)),ls(i,o,c);break;case 21:ls(i,o,c);break;case 22:It=(h=It)||c.memoizedState!==null,ls(i,o,c),It=h;break;default:ls(i,o,c)}}function gv(i,o){if(o.memoizedState===null&&(i=o.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{ka(i)}catch(c){lt(o,o.return,c)}}}function yv(i,o){if(o.memoizedState===null&&(i=o.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{ka(i)}catch(c){lt(o,o.return,c)}}function nR(i){switch(i.tag){case 31:case 13:case 19:var o=i.stateNode;return o===null&&(o=i.stateNode=new dv),o;case 22:return i=i.stateNode,o=i._retryCache,o===null&&(o=i._retryCache=new dv),o;default:throw Error(r(435,i.tag))}}function Xc(i,o){var c=nR(i);o.forEach(function(h){if(!c.has(h)){c.add(h);var b=fR.bind(null,i,h);h.then(b,b)}})}function jn(i,o){var c=o.deletions;if(c!==null)for(var h=0;h<c.length;h++){var b=c[h],_=i,k=o,O=k;e:for(;O!==null;){switch(O.tag){case 27:if(Ps(O.type)){xt=O.stateNode,Dn=!1;break e}break;case 5:xt=O.stateNode,Dn=!1;break e;case 3:case 4:xt=O.stateNode.containerInfo,Dn=!0;break e}O=O.return}if(xt===null)throw Error(r(160));mv(_,k,b),xt=null,Dn=!1,_=b.alternate,_!==null&&(_.return=null),b.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)bv(o,i),o=o.sibling}var Cr=null;function bv(i,o){var c=i.alternate,h=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:jn(o,i),Ln(i),h&4&&(Ns(3,i,i.return),Lo(3,i),Ns(5,i,i.return));break;case 1:jn(o,i),Ln(i),h&512&&(It||c===null||Dr(c,c.return)),h&64&&os&&(i=i.updateQueue,i!==null&&(h=i.callbacks,h!==null&&(c=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=c===null?h:c.concat(h))));break;case 26:var b=Cr;if(jn(o,i),Ln(i),h&512&&(It||c===null||Dr(c,c.return)),h&4){var _=c!==null?c.memoizedState:null;if(h=i.memoizedState,c===null)if(h===null)if(i.stateNode===null){e:{h=i.type,c=i.memoizedProps,b=b.ownerDocument||b;t:switch(h){case"title":_=b.getElementsByTagName("title")[0],(!_||_[co]||_[tn]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=b.createElement(h),b.head.insertBefore(_,b.querySelector("head > title"))),an(_,h,c),_[tn]=i,Kt(_),h=_;break e;case"link":var k=bx("link","href",b).get(h+(c.href||""));if(k){for(var O=0;O<k.length;O++)if(_=k[O],_.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&_.getAttribute("rel")===(c.rel==null?null:c.rel)&&_.getAttribute("title")===(c.title==null?null:c.title)&&_.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){k.splice(O,1);break t}}_=b.createElement(h),an(_,h,c),b.head.appendChild(_);break;case"meta":if(k=bx("meta","content",b).get(h+(c.content||""))){for(O=0;O<k.length;O++)if(_=k[O],_.getAttribute("content")===(c.content==null?null:""+c.content)&&_.getAttribute("name")===(c.name==null?null:c.name)&&_.getAttribute("property")===(c.property==null?null:c.property)&&_.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&_.getAttribute("charset")===(c.charSet==null?null:c.charSet)){k.splice(O,1);break t}}_=b.createElement(h),an(_,h,c),b.head.appendChild(_);break;default:throw Error(r(468,h))}_[tn]=i,Kt(_),h=_}i.stateNode=h}else _x(b,i.type,i.stateNode);else i.stateNode=yx(b,h,i.memoizedProps);else _!==h?(_===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):_.count--,h===null?_x(b,i.type,i.stateNode):yx(b,h,i.memoizedProps)):h===null&&i.stateNode!==null&&rp(i,i.memoizedProps,c.memoizedProps)}break;case 27:jn(o,i),Ln(i),h&512&&(It||c===null||Dr(c,c.return)),c!==null&&h&4&&rp(i,i.memoizedProps,c.memoizedProps);break;case 5:if(jn(o,i),Ln(i),h&512&&(It||c===null||Dr(c,c.return)),i.flags&32){b=i.stateNode;try{Ki(b,"")}catch(we){lt(i,i.return,we)}}h&4&&i.stateNode!=null&&(b=i.memoizedProps,rp(i,b,c!==null?c.memoizedProps:b)),h&1024&&(ap=!0);break;case 6:if(jn(o,i),Ln(i),h&4){if(i.stateNode===null)throw Error(r(162));h=i.memoizedProps,c=i.stateNode;try{c.nodeValue=h}catch(we){lt(i,i.return,we)}}break;case 3:if(pu=null,b=Cr,Cr=du(o.containerInfo),jn(o,i),Cr=b,Ln(i),h&4&&c!==null&&c.memoizedState.isDehydrated)try{ka(o.containerInfo)}catch(we){lt(i,i.return,we)}ap&&(ap=!1,_v(i));break;case 4:h=Cr,Cr=du(i.stateNode.containerInfo),jn(o,i),Ln(i),Cr=h;break;case 12:jn(o,i),Ln(i);break;case 31:jn(o,i),Ln(i),h&4&&(h=i.updateQueue,h!==null&&(i.updateQueue=null,Xc(i,h)));break;case 13:jn(o,i),Ln(i),i.child.flags&8192&&i.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(eu=be()),h&4&&(h=i.updateQueue,h!==null&&(i.updateQueue=null,Xc(i,h)));break;case 22:b=i.memoizedState!==null;var B=c!==null&&c.memoizedState!==null,Y=os,ie=It;if(os=Y||b,It=ie||B,jn(o,i),It=ie,os=Y,Ln(i),h&8192)e:for(o=i.stateNode,o._visibility=b?o._visibility&-2:o._visibility|1,b&&(c===null||B||os||It||vi(i)),c=null,o=i;;){if(o.tag===5||o.tag===26){if(c===null){B=c=o;try{if(_=B.stateNode,b)k=_.style,typeof k.setProperty=="function"?k.setProperty("display","none","important"):k.display="none";else{O=B.stateNode;var le=B.memoizedProps.style,ee=le!=null&&le.hasOwnProperty("display")?le.display:null;O.style.display=ee==null||typeof ee=="boolean"?"":(""+ee).trim()}}catch(we){lt(B,B.return,we)}}}else if(o.tag===6){if(c===null){B=o;try{B.stateNode.nodeValue=b?"":B.memoizedProps}catch(we){lt(B,B.return,we)}}}else if(o.tag===18){if(c===null){B=o;try{var se=B.stateNode;b?lx(se,!0):lx(B.stateNode,!1)}catch(we){lt(B,B.return,we)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===i)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break e;for(;o.sibling===null;){if(o.return===null||o.return===i)break e;c===o&&(c=null),o=o.return}c===o&&(c=null),o.sibling.return=o.return,o=o.sibling}h&4&&(h=i.updateQueue,h!==null&&(c=h.retryQueue,c!==null&&(h.retryQueue=null,Xc(i,c))));break;case 19:jn(o,i),Ln(i),h&4&&(h=i.updateQueue,h!==null&&(i.updateQueue=null,Xc(i,h)));break;case 30:break;case 21:break;default:jn(o,i),Ln(i)}}function Ln(i){var o=i.flags;if(o&2){try{for(var c,h=i.return;h!==null;){if(uv(h)){c=h;break}h=h.return}if(c==null)throw Error(r(160));switch(c.tag){case 27:var b=c.stateNode,_=sp(i);Yc(i,_,b);break;case 5:var k=c.stateNode;c.flags&32&&(Ki(k,""),c.flags&=-33);var O=sp(i);Yc(i,O,k);break;case 3:case 4:var B=c.stateNode.containerInfo,Y=sp(i);ip(i,Y,B);break;default:throw Error(r(161))}}catch(ie){lt(i,i.return,ie)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function _v(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var o=i;_v(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),i=i.sibling}}function cs(i,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)hv(i,o.alternate,o),o=o.sibling}function vi(i){for(i=i.child;i!==null;){var o=i;switch(o.tag){case 0:case 11:case 14:case 15:Ns(4,o,o.return),vi(o);break;case 1:Dr(o,o.return);var c=o.stateNode;typeof c.componentWillUnmount=="function"&&lv(o,o.return,c),vi(o);break;case 27:Go(o.stateNode);case 26:case 5:Dr(o,o.return),vi(o);break;case 22:o.memoizedState===null&&vi(o);break;case 30:vi(o);break;default:vi(o)}i=i.sibling}}function us(i,o,c){for(c=c&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var h=o.alternate,b=i,_=o,k=_.flags;switch(_.tag){case 0:case 11:case 15:us(b,_,c),Lo(4,_);break;case 1:if(us(b,_,c),h=_,b=h.stateNode,typeof b.componentDidMount=="function")try{b.componentDidMount()}catch(Y){lt(h,h.return,Y)}if(h=_,b=h.updateQueue,b!==null){var O=h.stateNode;try{var B=b.shared.hiddenCallbacks;if(B!==null)for(b.shared.hiddenCallbacks=null,b=0;b<B.length;b++)Jb(B[b],O)}catch(Y){lt(h,h.return,Y)}}c&&k&64&&ov(_),zo(_,_.return);break;case 27:fv(_);case 26:case 5:us(b,_,c),c&&h===null&&k&4&&cv(_),zo(_,_.return);break;case 12:us(b,_,c);break;case 31:us(b,_,c),c&&k&4&&gv(b,_);break;case 13:us(b,_,c),c&&k&4&&yv(b,_);break;case 22:_.memoizedState===null&&us(b,_,c),zo(_,_.return);break;case 30:break;default:us(b,_,c)}o=o.sibling}}function op(i,o){var c=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),i=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(i=o.memoizedState.cachePool.pool),i!==c&&(i!=null&&i.refCount++,c!=null&&So(c))}function lp(i,o){i=null,o.alternate!==null&&(i=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==i&&(o.refCount++,i!=null&&So(i))}function Tr(i,o,c,h){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)vv(i,o,c,h),o=o.sibling}function vv(i,o,c,h){var b=o.flags;switch(o.tag){case 0:case 11:case 15:Tr(i,o,c,h),b&2048&&Lo(9,o);break;case 1:Tr(i,o,c,h);break;case 3:Tr(i,o,c,h),b&2048&&(i=null,o.alternate!==null&&(i=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==i&&(o.refCount++,i!=null&&So(i)));break;case 12:if(b&2048){Tr(i,o,c,h),i=o.stateNode;try{var _=o.memoizedProps,k=_.id,O=_.onPostCommit;typeof O=="function"&&O(k,o.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(B){lt(o,o.return,B)}}else Tr(i,o,c,h);break;case 31:Tr(i,o,c,h);break;case 13:Tr(i,o,c,h);break;case 23:break;case 22:_=o.stateNode,k=o.alternate,o.memoizedState!==null?_._visibility&2?Tr(i,o,c,h):Po(i,o):_._visibility&2?Tr(i,o,c,h):(_._visibility|=2,ha(i,o,c,h,(o.subtreeFlags&10256)!==0||!1)),b&2048&&op(k,o);break;case 24:Tr(i,o,c,h),b&2048&&lp(o.alternate,o);break;default:Tr(i,o,c,h)}}function ha(i,o,c,h,b){for(b=b&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var _=i,k=o,O=c,B=h,Y=k.flags;switch(k.tag){case 0:case 11:case 15:ha(_,k,O,B,b),Lo(8,k);break;case 23:break;case 22:var ie=k.stateNode;k.memoizedState!==null?ie._visibility&2?ha(_,k,O,B,b):Po(_,k):(ie._visibility|=2,ha(_,k,O,B,b)),b&&Y&2048&&op(k.alternate,k);break;case 24:ha(_,k,O,B,b),b&&Y&2048&&lp(k.alternate,k);break;default:ha(_,k,O,B,b)}o=o.sibling}}function Po(i,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var c=i,h=o,b=h.flags;switch(h.tag){case 22:Po(c,h),b&2048&&op(h.alternate,h);break;case 24:Po(c,h),b&2048&&lp(h.alternate,h);break;default:Po(c,h)}o=o.sibling}}var Bo=8192;function pa(i,o,c){if(i.subtreeFlags&Bo)for(i=i.child;i!==null;)xv(i,o,c),i=i.sibling}function xv(i,o,c){switch(i.tag){case 26:pa(i,o,c),i.flags&Bo&&i.memoizedState!==null&&qR(c,Cr,i.memoizedState,i.memoizedProps);break;case 5:pa(i,o,c);break;case 3:case 4:var h=Cr;Cr=du(i.stateNode.containerInfo),pa(i,o,c),Cr=h;break;case 22:i.memoizedState===null&&(h=i.alternate,h!==null&&h.memoizedState!==null?(h=Bo,Bo=16777216,pa(i,o,c),Bo=h):pa(i,o,c));break;default:pa(i,o,c)}}function wv(i){var o=i.alternate;if(o!==null&&(i=o.child,i!==null)){o.child=null;do o=i.sibling,i.sibling=null,i=o;while(i!==null)}}function $o(i){var o=i.deletions;if((i.flags&16)!==0){if(o!==null)for(var c=0;c<o.length;c++){var h=o[c];Zt=h,kv(h,i)}wv(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Sv(i),i=i.sibling}function Sv(i){switch(i.tag){case 0:case 11:case 15:$o(i),i.flags&2048&&Ns(9,i,i.return);break;case 3:$o(i);break;case 12:$o(i);break;case 22:var o=i.stateNode;i.memoizedState!==null&&o._visibility&2&&(i.return===null||i.return.tag!==13)?(o._visibility&=-3,Wc(i)):$o(i);break;default:$o(i)}}function Wc(i){var o=i.deletions;if((i.flags&16)!==0){if(o!==null)for(var c=0;c<o.length;c++){var h=o[c];Zt=h,kv(h,i)}wv(i)}for(i=i.child;i!==null;){switch(o=i,o.tag){case 0:case 11:case 15:Ns(8,o,o.return),Wc(o);break;case 22:c=o.stateNode,c._visibility&2&&(c._visibility&=-3,Wc(o));break;default:Wc(o)}i=i.sibling}}function kv(i,o){for(;Zt!==null;){var c=Zt;switch(c.tag){case 0:case 11:case 15:Ns(8,c,o);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var h=c.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:So(c.memoizedState.cache)}if(h=c.child,h!==null)h.return=c,Zt=h;else e:for(c=i;Zt!==null;){h=Zt;var b=h.sibling,_=h.return;if(pv(h),h===c){Zt=null;break e}if(b!==null){b.return=_,Zt=b;break e}Zt=_}}}var rR={getCacheForType:function(i){var o=rn(Rt),c=o.data.get(i);return c===void 0&&(c=i(),o.data.set(i,c)),c},cacheSignal:function(){return rn(Rt).controller.signal}},sR=typeof WeakMap=="function"?WeakMap:Map,it=0,mt=null,Ve=null,Ze=0,ot=0,Zn=null,Is=!1,ma=!1,cp=!1,fs=0,Ct=0,Ms=0,xi=0,up=0,Qn=0,ga=0,Uo=null,zn=null,fp=!1,eu=0,Ev=0,tu=1/0,nu=null,Ds=null,Pt=0,js=null,ya=null,ds=0,dp=0,hp=null,Cv=null,qo=0,pp=null;function Jn(){return(it&2)!==0&&Ze!==0?Ze&-Ze:$.T!==null?vp():q0()}function Tv(){if(Qn===0)if((Ze&536870912)===0||Ye){var i=uc;uc<<=1,(uc&3932160)===0&&(uc=262144),Qn=i}else Qn=536870912;return i=Gn.current,i!==null&&(i.flags|=32),Qn}function Pn(i,o,c){(i===mt&&(ot===2||ot===9)||i.cancelPendingCommit!==null)&&(ba(i,0),Ls(i,Ze,Qn,!1)),lo(i,c),((it&2)===0||i!==mt)&&(i===mt&&((it&2)===0&&(xi|=c),Ct===4&&Ls(i,Ze,Qn,!1)),jr(i))}function Av(i,o,c){if((it&6)!==0)throw Error(r(327));var h=!c&&(o&127)===0&&(o&i.expiredLanes)===0||oo(i,o),b=h?oR(i,o):gp(i,o,!0),_=h;do{if(b===0){ma&&!h&&Ls(i,o,0,!1);break}else{if(c=i.current.alternate,_&&!iR(c)){b=gp(i,o,!1),_=!1;continue}if(b===2){if(_=o,i.errorRecoveryDisabledLanes&_)var k=0;else k=i.pendingLanes&-536870913,k=k!==0?k:k&536870912?536870912:0;if(k!==0){o=k;e:{var O=i;b=Uo;var B=O.current.memoizedState.isDehydrated;if(B&&(ba(O,k).flags|=256),k=gp(O,k,!1),k!==2){if(cp&&!B){O.errorRecoveryDisabledLanes|=_,xi|=_,b=4;break e}_=zn,zn=b,_!==null&&(zn===null?zn=_:zn.push.apply(zn,_))}b=k}if(_=!1,b!==2)continue}}if(b===1){ba(i,0),Ls(i,o,0,!0);break}e:{switch(h=i,_=b,_){case 0:case 1:throw Error(r(345));case 4:if((o&4194048)!==o)break;case 6:Ls(h,o,Qn,!Is);break e;case 2:zn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((o&62914560)===o&&(b=eu+300-be(),10<b)){if(Ls(h,o,Qn,!Is),dc(h,0,!0)!==0)break e;ds=o,h.timeoutHandle=ix(Rv.bind(null,h,c,zn,nu,fp,o,Qn,xi,ga,Is,_,"Throttled",-0,0),b);break e}Rv(h,c,zn,nu,fp,o,Qn,xi,ga,Is,_,null,-0,0)}}break}while(!0);jr(i)}function Rv(i,o,c,h,b,_,k,O,B,Y,ie,le,ee,se){if(i.timeoutHandle=-1,le=o.subtreeFlags,le&8192||(le&16785408)===16785408){le={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Yr},xv(o,_,le);var we=(_&62914560)===_?eu-be():(_&4194048)===_?Ev-be():0;if(we=FR(le,we),we!==null){ds=_,i.cancelPendingCommit=we(zv.bind(null,i,o,_,c,h,b,k,O,B,ie,le,null,ee,se)),Ls(i,_,k,!Y);return}}zv(i,o,_,c,h,b,k,O,B)}function iR(i){for(var o=i;;){var c=o.tag;if((c===0||c===11||c===15)&&o.flags&16384&&(c=o.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var h=0;h<c.length;h++){var b=c[h],_=b.getSnapshot;b=b.value;try{if(!Vn(_(),b))return!1}catch{return!1}}if(c=o.child,o.subtreeFlags&16384&&c!==null)c.return=o,o=c;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Ls(i,o,c,h){o&=~up,o&=~xi,i.suspendedLanes|=o,i.pingedLanes&=~o,h&&(i.warmLanes|=o),h=i.expirationTimes;for(var b=o;0<b;){var _=31-at(b),k=1<<_;h[_]=-1,b&=~k}c!==0&&B0(i,c,o)}function ru(){return(it&6)===0?(Fo(0),!1):!0}function mp(){if(Ve!==null){if(ot===0)var i=Ve.return;else i=Ve,ts=di=null,Nh(i),la=null,Eo=0,i=Ve;for(;i!==null;)av(i.alternate,i),i=i.return;Ve=null}}function ba(i,o){var c=i.timeoutHandle;c!==-1&&(i.timeoutHandle=-1,ER(c)),c=i.cancelPendingCommit,c!==null&&(i.cancelPendingCommit=null,c()),ds=0,mp(),mt=i,Ve=c=Wr(i.current,null),Ze=o,ot=0,Zn=null,Is=!1,ma=oo(i,o),cp=!1,ga=Qn=up=xi=Ms=Ct=0,zn=Uo=null,fp=!1,(o&8)!==0&&(o|=o&32);var h=i.entangledLanes;if(h!==0)for(i=i.entanglements,h&=o;0<h;){var b=31-at(h),_=1<<b;o|=i[b],h&=~_}return fs=o,kc(),c}function Ov(i,o){Be=null,$.H=Mo,o===oa||o===Ic?(o=Gb(),ot=3):o===_h?(o=Gb(),ot=4):ot=o===Kh?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,Zn=o,Ve===null&&(Ct=1,Gc(i,ur(o,i.current)))}function Nv(){var i=Gn.current;return i===null?!0:(Ze&4194048)===Ze?pr===null:(Ze&62914560)===Ze||(Ze&536870912)!==0?i===pr:!1}function Iv(){var i=$.H;return $.H=Mo,i===null?Mo:i}function Mv(){var i=$.A;return $.A=rR,i}function su(){Ct=4,Is||(Ze&4194048)!==Ze&&Gn.current!==null||(ma=!0),(Ms&134217727)===0&&(xi&134217727)===0||mt===null||Ls(mt,Ze,Qn,!1)}function gp(i,o,c){var h=it;it|=2;var b=Iv(),_=Mv();(mt!==i||Ze!==o)&&(nu=null,ba(i,o)),o=!1;var k=Ct;e:do try{if(ot!==0&&Ve!==null){var O=Ve,B=Zn;switch(ot){case 8:mp(),k=6;break e;case 3:case 2:case 9:case 6:Gn.current===null&&(o=!0);var Y=ot;if(ot=0,Zn=null,_a(i,O,B,Y),c&&ma){k=0;break e}break;default:Y=ot,ot=0,Zn=null,_a(i,O,B,Y)}}aR(),k=Ct;break}catch(ie){Ov(i,ie)}while(!0);return o&&i.shellSuspendCounter++,ts=di=null,it=h,$.H=b,$.A=_,Ve===null&&(mt=null,Ze=0,kc()),k}function aR(){for(;Ve!==null;)Dv(Ve)}function oR(i,o){var c=it;it|=2;var h=Iv(),b=Mv();mt!==i||Ze!==o?(nu=null,tu=be()+500,ba(i,o)):ma=oo(i,o);e:do try{if(ot!==0&&Ve!==null){o=Ve;var _=Zn;t:switch(ot){case 1:ot=0,Zn=null,_a(i,o,_,1);break;case 2:case 9:if(Vb(_)){ot=0,Zn=null,jv(o);break}o=function(){ot!==2&&ot!==9||mt!==i||(ot=7),jr(i)},_.then(o,o);break e;case 3:ot=7;break e;case 4:ot=5;break e;case 7:Vb(_)?(ot=0,Zn=null,jv(o)):(ot=0,Zn=null,_a(i,o,_,7));break;case 5:var k=null;switch(Ve.tag){case 26:k=Ve.memoizedState;case 5:case 27:var O=Ve;if(k?vx(k):O.stateNode.complete){ot=0,Zn=null;var B=O.sibling;if(B!==null)Ve=B;else{var Y=O.return;Y!==null?(Ve=Y,iu(Y)):Ve=null}break t}}ot=0,Zn=null,_a(i,o,_,5);break;case 6:ot=0,Zn=null,_a(i,o,_,6);break;case 8:mp(),Ct=6;break e;default:throw Error(r(462))}}lR();break}catch(ie){Ov(i,ie)}while(!0);return ts=di=null,$.H=h,$.A=b,it=c,Ve!==null?0:(mt=null,Ze=0,kc(),Ct)}function lR(){for(;Ve!==null&&!_e();)Dv(Ve)}function Dv(i){var o=sv(i.alternate,i,fs);i.memoizedProps=i.pendingProps,o===null?iu(i):Ve=o}function jv(i){var o=i,c=o.alternate;switch(o.tag){case 15:case 0:o=X_(c,o,o.pendingProps,o.type,void 0,Ze);break;case 11:o=X_(c,o,o.pendingProps,o.type.render,o.ref,Ze);break;case 5:Nh(o);default:av(c,o),o=Ve=Mb(o,fs),o=sv(c,o,fs)}i.memoizedProps=i.pendingProps,o===null?iu(i):Ve=o}function _a(i,o,c,h){ts=di=null,Nh(o),la=null,Eo=0;var b=o.return;try{if(J2(i,b,o,c,Ze)){Ct=1,Gc(i,ur(c,i.current)),Ve=null;return}}catch(_){if(b!==null)throw Ve=b,_;Ct=1,Gc(i,ur(c,i.current)),Ve=null;return}o.flags&32768?(Ye||h===1?i=!0:ma||(Ze&536870912)!==0?i=!1:(Is=i=!0,(h===2||h===9||h===3||h===6)&&(h=Gn.current,h!==null&&h.tag===13&&(h.flags|=16384))),Lv(o,i)):iu(o)}function iu(i){var o=i;do{if((o.flags&32768)!==0){Lv(o,Is);return}i=o.return;var c=W2(o.alternate,o,fs);if(c!==null){Ve=c;return}if(o=o.sibling,o!==null){Ve=o;return}Ve=o=i}while(o!==null);Ct===0&&(Ct=5)}function Lv(i,o){do{var c=eR(i.alternate,i);if(c!==null){c.flags&=32767,Ve=c;return}if(c=i.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!o&&(i=i.sibling,i!==null)){Ve=i;return}Ve=i=c}while(i!==null);Ct=6,Ve=null}function zv(i,o,c,h,b,_,k,O,B){i.cancelPendingCommit=null;do au();while(Pt!==0);if((it&6)!==0)throw Error(r(327));if(o!==null){if(o===i.current)throw Error(r(177));if(_=o.lanes|o.childLanes,_|=sh,UA(i,c,_,k,O,B),i===mt&&(Ve=mt=null,Ze=0),ya=o,js=i,ds=c,dp=_,hp=b,Cv=h,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,dR(ye,function(){return qv(),null})):(i.callbackNode=null,i.callbackPriority=0),h=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||h){h=$.T,$.T=null,b=G.p,G.p=2,k=it,it|=4;try{tR(i,o,c)}finally{it=k,G.p=b,$.T=h}}Pt=1,Pv(),Bv(),$v()}}function Pv(){if(Pt===1){Pt=0;var i=js,o=ya,c=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||c){c=$.T,$.T=null;var h=G.p;G.p=2;var b=it;it|=4;try{bv(o,i);var _=Ap,k=kb(i.containerInfo),O=_.focusedElem,B=_.selectionRange;if(k!==O&&O&&O.ownerDocument&&Sb(O.ownerDocument.documentElement,O)){if(B!==null&&Wd(O)){var Y=B.start,ie=B.end;if(ie===void 0&&(ie=Y),"selectionStart"in O)O.selectionStart=Y,O.selectionEnd=Math.min(ie,O.value.length);else{var le=O.ownerDocument||document,ee=le&&le.defaultView||window;if(ee.getSelection){var se=ee.getSelection(),we=O.textContent.length,Ne=Math.min(B.start,we),ht=B.end===void 0?Ne:Math.min(B.end,we);!se.extend&&Ne>ht&&(k=ht,ht=Ne,Ne=k);var Z=wb(O,Ne),F=wb(O,ht);if(Z&&F&&(se.rangeCount!==1||se.anchorNode!==Z.node||se.anchorOffset!==Z.offset||se.focusNode!==F.node||se.focusOffset!==F.offset)){var J=le.createRange();J.setStart(Z.node,Z.offset),se.removeAllRanges(),Ne>ht?(se.addRange(J),se.extend(F.node,F.offset)):(J.setEnd(F.node,F.offset),se.addRange(J))}}}}for(le=[],se=O;se=se.parentNode;)se.nodeType===1&&le.push({element:se,left:se.scrollLeft,top:se.scrollTop});for(typeof O.focus=="function"&&O.focus(),O=0;O<le.length;O++){var ae=le[O];ae.element.scrollLeft=ae.left,ae.element.scrollTop=ae.top}}bu=!!Tp,Ap=Tp=null}finally{it=b,G.p=h,$.T=c}}i.current=o,Pt=2}}function Bv(){if(Pt===2){Pt=0;var i=js,o=ya,c=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||c){c=$.T,$.T=null;var h=G.p;G.p=2;var b=it;it|=4;try{hv(i,o.alternate,o)}finally{it=b,G.p=h,$.T=c}}Pt=3}}function $v(){if(Pt===4||Pt===3){Pt=0,Te();var i=js,o=ya,c=ds,h=Cv;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?Pt=5:(Pt=0,ya=js=null,Uv(i,i.pendingLanes));var b=i.pendingLanes;if(b===0&&(Ds=null),Dd(c),o=o.stateNode,Pe&&typeof Pe.onCommitFiberRoot=="function")try{Pe.onCommitFiberRoot(Xe,o,void 0,(o.current.flags&128)===128)}catch{}if(h!==null){o=$.T,b=G.p,G.p=2,$.T=null;try{for(var _=i.onRecoverableError,k=0;k<h.length;k++){var O=h[k];_(O.value,{componentStack:O.stack})}}finally{$.T=o,G.p=b}}(ds&3)!==0&&au(),jr(i),b=i.pendingLanes,(c&261930)!==0&&(b&42)!==0?i===pp?qo++:(qo=0,pp=i):qo=0,Fo(0)}}function Uv(i,o){(i.pooledCacheLanes&=o)===0&&(o=i.pooledCache,o!=null&&(i.pooledCache=null,So(o)))}function au(){return Pv(),Bv(),$v(),qv()}function qv(){if(Pt!==5)return!1;var i=js,o=dp;dp=0;var c=Dd(ds),h=$.T,b=G.p;try{G.p=32>c?32:c,$.T=null,c=hp,hp=null;var _=js,k=ds;if(Pt=0,ya=js=null,ds=0,(it&6)!==0)throw Error(r(331));var O=it;if(it|=4,Sv(_.current),vv(_,_.current,k,c),it=O,Fo(0,!1),Pe&&typeof Pe.onPostCommitFiberRoot=="function")try{Pe.onPostCommitFiberRoot(Xe,_)}catch{}return!0}finally{G.p=b,$.T=h,Uv(i,o)}}function Fv(i,o,c){o=ur(c,o),o=Gh(i.stateNode,o,2),i=As(i,o,2),i!==null&&(lo(i,2),jr(i))}function lt(i,o,c){if(i.tag===3)Fv(i,i,c);else for(;o!==null;){if(o.tag===3){Fv(o,i,c);break}else if(o.tag===1){var h=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(Ds===null||!Ds.has(h))){i=ur(c,i),c=V_(2),h=As(o,c,2),h!==null&&(H_(c,h,o,i),lo(h,2),jr(h));break}}o=o.return}}function yp(i,o,c){var h=i.pingCache;if(h===null){h=i.pingCache=new sR;var b=new Set;h.set(o,b)}else b=h.get(o),b===void 0&&(b=new Set,h.set(o,b));b.has(c)||(cp=!0,b.add(c),i=cR.bind(null,i,o,c),o.then(i,i))}function cR(i,o,c){var h=i.pingCache;h!==null&&h.delete(o),i.pingedLanes|=i.suspendedLanes&c,i.warmLanes&=~c,mt===i&&(Ze&c)===c&&(Ct===4||Ct===3&&(Ze&62914560)===Ze&&300>be()-eu?(it&2)===0&&ba(i,0):up|=c,ga===Ze&&(ga=0)),jr(i)}function Vv(i,o){o===0&&(o=P0()),i=ci(i,o),i!==null&&(lo(i,o),jr(i))}function uR(i){var o=i.memoizedState,c=0;o!==null&&(c=o.retryLane),Vv(i,c)}function fR(i,o){var c=0;switch(i.tag){case 31:case 13:var h=i.stateNode,b=i.memoizedState;b!==null&&(c=b.retryLane);break;case 19:h=i.stateNode;break;case 22:h=i.stateNode._retryCache;break;default:throw Error(r(314))}h!==null&&h.delete(o),Vv(i,c)}function dR(i,o){return wn(i,o)}var ou=null,va=null,bp=!1,lu=!1,_p=!1,zs=0;function jr(i){i!==va&&i.next===null&&(va===null?ou=va=i:va=va.next=i),lu=!0,bp||(bp=!0,pR())}function Fo(i,o){if(!_p&&lu){_p=!0;do for(var c=!1,h=ou;h!==null;){if(i!==0){var b=h.pendingLanes;if(b===0)var _=0;else{var k=h.suspendedLanes,O=h.pingedLanes;_=(1<<31-at(42|i)+1)-1,_&=b&~(k&~O),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(c=!0,Zv(h,_))}else _=Ze,_=dc(h,h===mt?_:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(_&3)===0||oo(h,_)||(c=!0,Zv(h,_));h=h.next}while(c);_p=!1}}function hR(){Hv()}function Hv(){lu=bp=!1;var i=0;zs!==0&&kR()&&(i=zs);for(var o=be(),c=null,h=ou;h!==null;){var b=h.next,_=Gv(h,o);_===0?(h.next=null,c===null?ou=b:c.next=b,b===null&&(va=c)):(c=h,(i!==0||(_&3)!==0)&&(lu=!0)),h=b}Pt!==0&&Pt!==5||Fo(i),zs!==0&&(zs=0)}function Gv(i,o){for(var c=i.suspendedLanes,h=i.pingedLanes,b=i.expirationTimes,_=i.pendingLanes&-62914561;0<_;){var k=31-at(_),O=1<<k,B=b[k];B===-1?((O&c)===0||(O&h)!==0)&&(b[k]=$A(O,o)):B<=o&&(i.expiredLanes|=O),_&=~O}if(o=mt,c=Ze,c=dc(i,i===o?c:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),h=i.callbackNode,c===0||i===o&&(ot===2||ot===9)||i.cancelPendingCommit!==null)return h!==null&&h!==null&&ke(h),i.callbackNode=null,i.callbackPriority=0;if((c&3)===0||oo(i,c)){if(o=c&-c,o===i.callbackPriority)return o;switch(h!==null&&ke(h),Dd(c)){case 2:case 8:c=fe;break;case 32:c=ye;break;case 268435456:c=ve;break;default:c=ye}return h=Kv.bind(null,i),c=wn(c,h),i.callbackPriority=o,i.callbackNode=c,o}return h!==null&&h!==null&&ke(h),i.callbackPriority=2,i.callbackNode=null,2}function Kv(i,o){if(Pt!==0&&Pt!==5)return i.callbackNode=null,i.callbackPriority=0,null;var c=i.callbackNode;if(au()&&i.callbackNode!==c)return null;var h=Ze;return h=dc(i,i===mt?h:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),h===0?null:(Av(i,h,o),Gv(i,be()),i.callbackNode!=null&&i.callbackNode===c?Kv.bind(null,i):null)}function Zv(i,o){if(au())return null;Av(i,o,!0)}function pR(){CR(function(){(it&6)!==0?wn(ne,hR):Hv()})}function vp(){if(zs===0){var i=ia;i===0&&(i=$i,$i<<=1,($i&261888)===0&&($i=256)),zs=i}return zs}function Qv(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:gc(""+i)}function Jv(i,o){var c=o.ownerDocument.createElement("input");return c.name=o.name,c.value=o.value,i.id&&c.setAttribute("form",i.id),o.parentNode.insertBefore(c,o),i=new FormData(i),c.parentNode.removeChild(c),i}function mR(i,o,c,h,b){if(o==="submit"&&c&&c.stateNode===b){var _=Qv((b[In]||null).action),k=h.submitter;k&&(o=(o=k[In]||null)?Qv(o.formAction):k.getAttribute("formAction"),o!==null&&(_=o,k=null));var O=new vc("action","action",null,h,b);i.push({event:O,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(zs!==0){var B=k?Jv(b,k):new FormData(b);$h(c,{pending:!0,data:B,method:b.method,action:_},null,B)}}else typeof _=="function"&&(O.preventDefault(),B=k?Jv(b,k):new FormData(b),$h(c,{pending:!0,data:B,method:b.method,action:_},_,B))},currentTarget:b}]})}}for(var xp=0;xp<rh.length;xp++){var wp=rh[xp],gR=wp.toLowerCase(),yR=wp[0].toUpperCase()+wp.slice(1);Er(gR,"on"+yR)}Er(Tb,"onAnimationEnd"),Er(Ab,"onAnimationIteration"),Er(Rb,"onAnimationStart"),Er("dblclick","onDoubleClick"),Er("focusin","onFocus"),Er("focusout","onBlur"),Er(M2,"onTransitionRun"),Er(D2,"onTransitionStart"),Er(j2,"onTransitionCancel"),Er(Ob,"onTransitionEnd"),Hi("onMouseEnter",["mouseout","mouseover"]),Hi("onMouseLeave",["mouseout","mouseover"]),Hi("onPointerEnter",["pointerout","pointerover"]),Hi("onPointerLeave",["pointerout","pointerover"]),ii("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ii("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ii("onBeforeInput",["compositionend","keypress","textInput","paste"]),ii("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ii("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ii("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Vo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),bR=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Vo));function Yv(i,o){o=(o&4)!==0;for(var c=0;c<i.length;c++){var h=i[c],b=h.event;h=h.listeners;e:{var _=void 0;if(o)for(var k=h.length-1;0<=k;k--){var O=h[k],B=O.instance,Y=O.currentTarget;if(O=O.listener,B!==_&&b.isPropagationStopped())break e;_=O,b.currentTarget=Y;try{_(b)}catch(ie){Sc(ie)}b.currentTarget=null,_=B}else for(k=0;k<h.length;k++){if(O=h[k],B=O.instance,Y=O.currentTarget,O=O.listener,B!==_&&b.isPropagationStopped())break e;_=O,b.currentTarget=Y;try{_(b)}catch(ie){Sc(ie)}b.currentTarget=null,_=B}}}}function He(i,o){var c=o[jd];c===void 0&&(c=o[jd]=new Set);var h=i+"__bubble";c.has(h)||(Xv(o,i,2,!1),c.add(h))}function Sp(i,o,c){var h=0;o&&(h|=4),Xv(c,i,h,o)}var cu="_reactListening"+Math.random().toString(36).slice(2);function kp(i){if(!i[cu]){i[cu]=!0,H0.forEach(function(c){c!=="selectionchange"&&(bR.has(c)||Sp(c,!1,i),Sp(c,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[cu]||(o[cu]=!0,Sp("selectionchange",!1,o))}}function Xv(i,o,c,h){switch(Tx(o)){case 2:var b=GR;break;case 8:b=KR;break;default:b=Bp}c=b.bind(null,o,c,i),b=void 0,!Vd||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(b=!0),h?b!==void 0?i.addEventListener(o,c,{capture:!0,passive:b}):i.addEventListener(o,c,!0):b!==void 0?i.addEventListener(o,c,{passive:b}):i.addEventListener(o,c,!1)}function Ep(i,o,c,h,b){var _=h;if((o&1)===0&&(o&2)===0&&h!==null)e:for(;;){if(h===null)return;var k=h.tag;if(k===3||k===4){var O=h.stateNode.containerInfo;if(O===b)break;if(k===4)for(k=h.return;k!==null;){var B=k.tag;if((B===3||B===4)&&k.stateNode.containerInfo===b)return;k=k.return}for(;O!==null;){if(k=qi(O),k===null)return;if(B=k.tag,B===5||B===6||B===26||B===27){h=_=k;continue e}O=O.parentNode}}h=h.return}rb(function(){var Y=_,ie=qd(c),le=[];e:{var ee=Nb.get(i);if(ee!==void 0){var se=vc,we=i;switch(i){case"keypress":if(bc(c)===0)break e;case"keydown":case"keyup":se=f2;break;case"focusin":we="focus",se=Zd;break;case"focusout":we="blur",se=Zd;break;case"beforeblur":case"afterblur":se=Zd;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":se=ab;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":se=WA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":se=p2;break;case Tb:case Ab:case Rb:se=n2;break;case Ob:se=g2;break;case"scroll":case"scrollend":se=YA;break;case"wheel":se=b2;break;case"copy":case"cut":case"paste":se=s2;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":se=lb;break;case"toggle":case"beforetoggle":se=v2}var Ne=(o&4)!==0,ht=!Ne&&(i==="scroll"||i==="scrollend"),Z=Ne?ee!==null?ee+"Capture":null:ee;Ne=[];for(var F=Y,J;F!==null;){var ae=F;if(J=ae.stateNode,ae=ae.tag,ae!==5&&ae!==26&&ae!==27||J===null||Z===null||(ae=fo(F,Z),ae!=null&&Ne.push(Ho(F,ae,J))),ht)break;F=F.return}0<Ne.length&&(ee=new se(ee,we,null,c,ie),le.push({event:ee,listeners:Ne}))}}if((o&7)===0){e:{if(ee=i==="mouseover"||i==="pointerover",se=i==="mouseout"||i==="pointerout",ee&&c!==Ud&&(we=c.relatedTarget||c.fromElement)&&(qi(we)||we[Ui]))break e;if((se||ee)&&(ee=ie.window===ie?ie:(ee=ie.ownerDocument)?ee.defaultView||ee.parentWindow:window,se?(we=c.relatedTarget||c.toElement,se=Y,we=we?qi(we):null,we!==null&&(ht=a(we),Ne=we.tag,we!==ht||Ne!==5&&Ne!==27&&Ne!==6)&&(we=null)):(se=null,we=Y),se!==we)){if(Ne=ab,ae="onMouseLeave",Z="onMouseEnter",F="mouse",(i==="pointerout"||i==="pointerover")&&(Ne=lb,ae="onPointerLeave",Z="onPointerEnter",F="pointer"),ht=se==null?ee:uo(se),J=we==null?ee:uo(we),ee=new Ne(ae,F+"leave",se,c,ie),ee.target=ht,ee.relatedTarget=J,ae=null,qi(ie)===Y&&(Ne=new Ne(Z,F+"enter",we,c,ie),Ne.target=J,Ne.relatedTarget=ht,ae=Ne),ht=ae,se&&we)t:{for(Ne=_R,Z=se,F=we,J=0,ae=Z;ae;ae=Ne(ae))J++;ae=0;for(var Ae=F;Ae;Ae=Ne(Ae))ae++;for(;0<J-ae;)Z=Ne(Z),J--;for(;0<ae-J;)F=Ne(F),ae--;for(;J--;){if(Z===F||F!==null&&Z===F.alternate){Ne=Z;break t}Z=Ne(Z),F=Ne(F)}Ne=null}else Ne=null;se!==null&&Wv(le,ee,se,Ne,!1),we!==null&&ht!==null&&Wv(le,ht,we,Ne,!0)}}e:{if(ee=Y?uo(Y):window,se=ee.nodeName&&ee.nodeName.toLowerCase(),se==="select"||se==="input"&&ee.type==="file")var nt=gb;else if(pb(ee))if(yb)nt=O2;else{nt=A2;var Ee=T2}else se=ee.nodeName,!se||se.toLowerCase()!=="input"||ee.type!=="checkbox"&&ee.type!=="radio"?Y&&$d(Y.elementType)&&(nt=gb):nt=R2;if(nt&&(nt=nt(i,Y))){mb(le,nt,c,ie);break e}Ee&&Ee(i,ee,Y),i==="focusout"&&Y&&ee.type==="number"&&Y.memoizedProps.value!=null&&Bd(ee,"number",ee.value)}switch(Ee=Y?uo(Y):window,i){case"focusin":(pb(Ee)||Ee.contentEditable==="true")&&(Yi=Ee,eh=Y,vo=null);break;case"focusout":vo=eh=Yi=null;break;case"mousedown":th=!0;break;case"contextmenu":case"mouseup":case"dragend":th=!1,Eb(le,c,ie);break;case"selectionchange":if(I2)break;case"keydown":case"keyup":Eb(le,c,ie)}var $e;if(Jd)e:{switch(i){case"compositionstart":var Qe="onCompositionStart";break e;case"compositionend":Qe="onCompositionEnd";break e;case"compositionupdate":Qe="onCompositionUpdate";break e}Qe=void 0}else Ji?db(i,c)&&(Qe="onCompositionEnd"):i==="keydown"&&c.keyCode===229&&(Qe="onCompositionStart");Qe&&(cb&&c.locale!=="ko"&&(Ji||Qe!=="onCompositionStart"?Qe==="onCompositionEnd"&&Ji&&($e=sb()):(xs=ie,Hd="value"in xs?xs.value:xs.textContent,Ji=!0)),Ee=uu(Y,Qe),0<Ee.length&&(Qe=new ob(Qe,i,null,c,ie),le.push({event:Qe,listeners:Ee}),$e?Qe.data=$e:($e=hb(c),$e!==null&&(Qe.data=$e)))),($e=w2?S2(i,c):k2(i,c))&&(Qe=uu(Y,"onBeforeInput"),0<Qe.length&&(Ee=new ob("onBeforeInput","beforeinput",null,c,ie),le.push({event:Ee,listeners:Qe}),Ee.data=$e)),mR(le,i,Y,c,ie)}Yv(le,o)})}function Ho(i,o,c){return{instance:i,listener:o,currentTarget:c}}function uu(i,o){for(var c=o+"Capture",h=[];i!==null;){var b=i,_=b.stateNode;if(b=b.tag,b!==5&&b!==26&&b!==27||_===null||(b=fo(i,c),b!=null&&h.unshift(Ho(i,b,_)),b=fo(i,o),b!=null&&h.push(Ho(i,b,_))),i.tag===3)return h;i=i.return}return[]}function _R(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function Wv(i,o,c,h,b){for(var _=o._reactName,k=[];c!==null&&c!==h;){var O=c,B=O.alternate,Y=O.stateNode;if(O=O.tag,B!==null&&B===h)break;O!==5&&O!==26&&O!==27||Y===null||(B=Y,b?(Y=fo(c,_),Y!=null&&k.unshift(Ho(c,Y,B))):b||(Y=fo(c,_),Y!=null&&k.push(Ho(c,Y,B)))),c=c.return}k.length!==0&&i.push({event:o,listeners:k})}var vR=/\r\n?/g,xR=/\u0000|\uFFFD/g;function ex(i){return(typeof i=="string"?i:""+i).replace(vR,`
`).replace(xR,"")}function tx(i,o){return o=ex(o),ex(i)===o}function dt(i,o,c,h,b,_){switch(c){case"children":typeof h=="string"?o==="body"||o==="textarea"&&h===""||Ki(i,h):(typeof h=="number"||typeof h=="bigint")&&o!=="body"&&Ki(i,""+h);break;case"className":pc(i,"class",h);break;case"tabIndex":pc(i,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":pc(i,c,h);break;case"style":tb(i,h,_);break;case"data":if(o!=="object"){pc(i,"data",h);break}case"src":case"href":if(h===""&&(o!=="a"||c!=="href")){i.removeAttribute(c);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){i.removeAttribute(c);break}h=gc(""+h),i.setAttribute(c,h);break;case"action":case"formAction":if(typeof h=="function"){i.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(c==="formAction"?(o!=="input"&&dt(i,o,"name",b.name,b,null),dt(i,o,"formEncType",b.formEncType,b,null),dt(i,o,"formMethod",b.formMethod,b,null),dt(i,o,"formTarget",b.formTarget,b,null)):(dt(i,o,"encType",b.encType,b,null),dt(i,o,"method",b.method,b,null),dt(i,o,"target",b.target,b,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){i.removeAttribute(c);break}h=gc(""+h),i.setAttribute(c,h);break;case"onClick":h!=null&&(i.onclick=Yr);break;case"onScroll":h!=null&&He("scroll",i);break;case"onScrollEnd":h!=null&&He("scrollend",i);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(r(61));if(c=h.__html,c!=null){if(b.children!=null)throw Error(r(60));i.innerHTML=c}}break;case"multiple":i.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":i.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){i.removeAttribute("xlink:href");break}c=gc(""+h),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?i.setAttribute(c,""+h):i.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?i.setAttribute(c,""):i.removeAttribute(c);break;case"capture":case"download":h===!0?i.setAttribute(c,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?i.setAttribute(c,h):i.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?i.setAttribute(c,h):i.removeAttribute(c);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?i.removeAttribute(c):i.setAttribute(c,h);break;case"popover":He("beforetoggle",i),He("toggle",i),hc(i,"popover",h);break;case"xlinkActuate":Jr(i,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":Jr(i,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":Jr(i,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":Jr(i,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":Jr(i,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":Jr(i,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":Jr(i,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":Jr(i,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":Jr(i,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":hc(i,"is",h);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=QA.get(c)||c,hc(i,c,h))}}function Cp(i,o,c,h,b,_){switch(c){case"style":tb(i,h,_);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(r(61));if(c=h.__html,c!=null){if(b.children!=null)throw Error(r(60));i.innerHTML=c}}break;case"children":typeof h=="string"?Ki(i,h):(typeof h=="number"||typeof h=="bigint")&&Ki(i,""+h);break;case"onScroll":h!=null&&He("scroll",i);break;case"onScrollEnd":h!=null&&He("scrollend",i);break;case"onClick":h!=null&&(i.onclick=Yr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!G0.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(b=c.endsWith("Capture"),o=c.slice(2,b?c.length-7:void 0),_=i[In]||null,_=_!=null?_[c]:null,typeof _=="function"&&i.removeEventListener(o,_,b),typeof h=="function")){typeof _!="function"&&_!==null&&(c in i?i[c]=null:i.hasAttribute(c)&&i.removeAttribute(c)),i.addEventListener(o,h,b);break e}c in i?i[c]=h:h===!0?i.setAttribute(c,""):hc(i,c,h)}}}function an(i,o,c){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":He("error",i),He("load",i);var h=!1,b=!1,_;for(_ in c)if(c.hasOwnProperty(_)){var k=c[_];if(k!=null)switch(_){case"src":h=!0;break;case"srcSet":b=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,o));default:dt(i,o,_,k,c,null)}}b&&dt(i,o,"srcSet",c.srcSet,c,null),h&&dt(i,o,"src",c.src,c,null);return;case"input":He("invalid",i);var O=_=k=b=null,B=null,Y=null;for(h in c)if(c.hasOwnProperty(h)){var ie=c[h];if(ie!=null)switch(h){case"name":b=ie;break;case"type":k=ie;break;case"checked":B=ie;break;case"defaultChecked":Y=ie;break;case"value":_=ie;break;case"defaultValue":O=ie;break;case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(r(137,o));break;default:dt(i,o,h,ie,c,null)}}Y0(i,_,O,B,Y,k,b,!1);return;case"select":He("invalid",i),h=k=_=null;for(b in c)if(c.hasOwnProperty(b)&&(O=c[b],O!=null))switch(b){case"value":_=O;break;case"defaultValue":k=O;break;case"multiple":h=O;default:dt(i,o,b,O,c,null)}o=_,c=k,i.multiple=!!h,o!=null?Gi(i,!!h,o,!1):c!=null&&Gi(i,!!h,c,!0);return;case"textarea":He("invalid",i),_=b=h=null;for(k in c)if(c.hasOwnProperty(k)&&(O=c[k],O!=null))switch(k){case"value":h=O;break;case"defaultValue":b=O;break;case"children":_=O;break;case"dangerouslySetInnerHTML":if(O!=null)throw Error(r(91));break;default:dt(i,o,k,O,c,null)}W0(i,h,b,_);return;case"option":for(B in c)c.hasOwnProperty(B)&&(h=c[B],h!=null)&&(B==="selected"?i.selected=h&&typeof h!="function"&&typeof h!="symbol":dt(i,o,B,h,c,null));return;case"dialog":He("beforetoggle",i),He("toggle",i),He("cancel",i),He("close",i);break;case"iframe":case"object":He("load",i);break;case"video":case"audio":for(h=0;h<Vo.length;h++)He(Vo[h],i);break;case"image":He("error",i),He("load",i);break;case"details":He("toggle",i);break;case"embed":case"source":case"link":He("error",i),He("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Y in c)if(c.hasOwnProperty(Y)&&(h=c[Y],h!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,o));default:dt(i,o,Y,h,c,null)}return;default:if($d(o)){for(ie in c)c.hasOwnProperty(ie)&&(h=c[ie],h!==void 0&&Cp(i,o,ie,h,c,void 0));return}}for(O in c)c.hasOwnProperty(O)&&(h=c[O],h!=null&&dt(i,o,O,h,c,null))}function wR(i,o,c,h){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var b=null,_=null,k=null,O=null,B=null,Y=null,ie=null;for(se in c){var le=c[se];if(c.hasOwnProperty(se)&&le!=null)switch(se){case"checked":break;case"value":break;case"defaultValue":B=le;default:h.hasOwnProperty(se)||dt(i,o,se,null,h,le)}}for(var ee in h){var se=h[ee];if(le=c[ee],h.hasOwnProperty(ee)&&(se!=null||le!=null))switch(ee){case"type":_=se;break;case"name":b=se;break;case"checked":Y=se;break;case"defaultChecked":ie=se;break;case"value":k=se;break;case"defaultValue":O=se;break;case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(r(137,o));break;default:se!==le&&dt(i,o,ee,se,h,le)}}Pd(i,k,O,B,Y,ie,_,b);return;case"select":se=k=O=ee=null;for(_ in c)if(B=c[_],c.hasOwnProperty(_)&&B!=null)switch(_){case"value":break;case"multiple":se=B;default:h.hasOwnProperty(_)||dt(i,o,_,null,h,B)}for(b in h)if(_=h[b],B=c[b],h.hasOwnProperty(b)&&(_!=null||B!=null))switch(b){case"value":ee=_;break;case"defaultValue":O=_;break;case"multiple":k=_;default:_!==B&&dt(i,o,b,_,h,B)}o=O,c=k,h=se,ee!=null?Gi(i,!!c,ee,!1):!!h!=!!c&&(o!=null?Gi(i,!!c,o,!0):Gi(i,!!c,c?[]:"",!1));return;case"textarea":se=ee=null;for(O in c)if(b=c[O],c.hasOwnProperty(O)&&b!=null&&!h.hasOwnProperty(O))switch(O){case"value":break;case"children":break;default:dt(i,o,O,null,h,b)}for(k in h)if(b=h[k],_=c[k],h.hasOwnProperty(k)&&(b!=null||_!=null))switch(k){case"value":ee=b;break;case"defaultValue":se=b;break;case"children":break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(r(91));break;default:b!==_&&dt(i,o,k,b,h,_)}X0(i,ee,se);return;case"option":for(var we in c)ee=c[we],c.hasOwnProperty(we)&&ee!=null&&!h.hasOwnProperty(we)&&(we==="selected"?i.selected=!1:dt(i,o,we,null,h,ee));for(B in h)ee=h[B],se=c[B],h.hasOwnProperty(B)&&ee!==se&&(ee!=null||se!=null)&&(B==="selected"?i.selected=ee&&typeof ee!="function"&&typeof ee!="symbol":dt(i,o,B,ee,h,se));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ne in c)ee=c[Ne],c.hasOwnProperty(Ne)&&ee!=null&&!h.hasOwnProperty(Ne)&&dt(i,o,Ne,null,h,ee);for(Y in h)if(ee=h[Y],se=c[Y],h.hasOwnProperty(Y)&&ee!==se&&(ee!=null||se!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(r(137,o));break;default:dt(i,o,Y,ee,h,se)}return;default:if($d(o)){for(var ht in c)ee=c[ht],c.hasOwnProperty(ht)&&ee!==void 0&&!h.hasOwnProperty(ht)&&Cp(i,o,ht,void 0,h,ee);for(ie in h)ee=h[ie],se=c[ie],!h.hasOwnProperty(ie)||ee===se||ee===void 0&&se===void 0||Cp(i,o,ie,ee,h,se);return}}for(var Z in c)ee=c[Z],c.hasOwnProperty(Z)&&ee!=null&&!h.hasOwnProperty(Z)&&dt(i,o,Z,null,h,ee);for(le in h)ee=h[le],se=c[le],!h.hasOwnProperty(le)||ee===se||ee==null&&se==null||dt(i,o,le,ee,h,se)}function nx(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function SR(){if(typeof performance.getEntriesByType=="function"){for(var i=0,o=0,c=performance.getEntriesByType("resource"),h=0;h<c.length;h++){var b=c[h],_=b.transferSize,k=b.initiatorType,O=b.duration;if(_&&O&&nx(k)){for(k=0,O=b.responseEnd,h+=1;h<c.length;h++){var B=c[h],Y=B.startTime;if(Y>O)break;var ie=B.transferSize,le=B.initiatorType;ie&&nx(le)&&(B=B.responseEnd,k+=ie*(B<O?1:(O-Y)/(B-Y)))}if(--h,o+=8*(_+k)/(b.duration/1e3),i++,10<i)break}}if(0<i)return o/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var Tp=null,Ap=null;function fu(i){return i.nodeType===9?i:i.ownerDocument}function rx(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function sx(i,o){if(i===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&o==="foreignObject"?0:i}function Rp(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Op=null;function kR(){var i=window.event;return i&&i.type==="popstate"?i===Op?!1:(Op=i,!0):(Op=null,!1)}var ix=typeof setTimeout=="function"?setTimeout:void 0,ER=typeof clearTimeout=="function"?clearTimeout:void 0,ax=typeof Promise=="function"?Promise:void 0,CR=typeof queueMicrotask=="function"?queueMicrotask:typeof ax<"u"?function(i){return ax.resolve(null).then(i).catch(TR)}:ix;function TR(i){setTimeout(function(){throw i})}function Ps(i){return i==="head"}function ox(i,o){var c=o,h=0;do{var b=c.nextSibling;if(i.removeChild(c),b&&b.nodeType===8)if(c=b.data,c==="/$"||c==="/&"){if(h===0){i.removeChild(b),ka(o);return}h--}else if(c==="$"||c==="$?"||c==="$~"||c==="$!"||c==="&")h++;else if(c==="html")Go(i.ownerDocument.documentElement);else if(c==="head"){c=i.ownerDocument.head,Go(c);for(var _=c.firstChild;_;){var k=_.nextSibling,O=_.nodeName;_[co]||O==="SCRIPT"||O==="STYLE"||O==="LINK"&&_.rel.toLowerCase()==="stylesheet"||c.removeChild(_),_=k}}else c==="body"&&Go(i.ownerDocument.body);c=b}while(c);ka(o)}function lx(i,o){var c=i;i=0;do{var h=c.nextSibling;if(c.nodeType===1?o?(c._stashedDisplay=c.style.display,c.style.display="none"):(c.style.display=c._stashedDisplay||"",c.getAttribute("style")===""&&c.removeAttribute("style")):c.nodeType===3&&(o?(c._stashedText=c.nodeValue,c.nodeValue=""):c.nodeValue=c._stashedText||""),h&&h.nodeType===8)if(c=h.data,c==="/$"){if(i===0)break;i--}else c!=="$"&&c!=="$?"&&c!=="$~"&&c!=="$!"||i++;c=h}while(c)}function Np(i){var o=i.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var c=o;switch(o=o.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":Np(c),Ld(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}i.removeChild(c)}}function AR(i,o,c,h){for(;i.nodeType===1;){var b=c;if(i.nodeName.toLowerCase()!==o.toLowerCase()){if(!h&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(h){if(!i[co])switch(o){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(_=i.getAttribute("rel"),_==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(_!==b.rel||i.getAttribute("href")!==(b.href==null||b.href===""?null:b.href)||i.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin)||i.getAttribute("title")!==(b.title==null?null:b.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(_=i.getAttribute("src"),(_!==(b.src==null?null:b.src)||i.getAttribute("type")!==(b.type==null?null:b.type)||i.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin))&&_&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(o==="input"&&i.type==="hidden"){var _=b.name==null?null:""+b.name;if(b.type==="hidden"&&i.getAttribute("name")===_)return i}else return i;if(i=mr(i.nextSibling),i===null)break}return null}function RR(i,o,c){if(o==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!c||(i=mr(i.nextSibling),i===null))return null;return i}function cx(i,o){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!o||(i=mr(i.nextSibling),i===null))return null;return i}function Ip(i){return i.data==="$?"||i.data==="$~"}function Mp(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function OR(i,o){var c=i.ownerDocument;if(i.data==="$~")i._reactRetry=o;else if(i.data!=="$?"||c.readyState!=="loading")o();else{var h=function(){o(),c.removeEventListener("DOMContentLoaded",h)};c.addEventListener("DOMContentLoaded",h),i._reactRetry=h}}function mr(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return i}var Dp=null;function ux(i){i=i.nextSibling;for(var o=0;i;){if(i.nodeType===8){var c=i.data;if(c==="/$"||c==="/&"){if(o===0)return mr(i.nextSibling);o--}else c!=="$"&&c!=="$!"&&c!=="$?"&&c!=="$~"&&c!=="&"||o++}i=i.nextSibling}return null}function fx(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var c=i.data;if(c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"){if(o===0)return i;o--}else c!=="/$"&&c!=="/&"||o++}i=i.previousSibling}return null}function dx(i,o,c){switch(o=fu(c),i){case"html":if(i=o.documentElement,!i)throw Error(r(452));return i;case"head":if(i=o.head,!i)throw Error(r(453));return i;case"body":if(i=o.body,!i)throw Error(r(454));return i;default:throw Error(r(451))}}function Go(i){for(var o=i.attributes;o.length;)i.removeAttributeNode(o[0]);Ld(i)}var gr=new Map,hx=new Set;function du(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var hs=G.d;G.d={f:NR,r:IR,D:MR,C:DR,L:jR,m:LR,X:PR,S:zR,M:BR};function NR(){var i=hs.f(),o=ru();return i||o}function IR(i){var o=Fi(i);o!==null&&o.tag===5&&o.type==="form"?O_(o):hs.r(i)}var xa=typeof document>"u"?null:document;function px(i,o,c){var h=xa;if(h&&typeof o=="string"&&o){var b=lr(o);b='link[rel="'+i+'"][href="'+b+'"]',typeof c=="string"&&(b+='[crossorigin="'+c+'"]'),hx.has(b)||(hx.add(b),i={rel:i,crossOrigin:c,href:o},h.querySelector(b)===null&&(o=h.createElement("link"),an(o,"link",i),Kt(o),h.head.appendChild(o)))}}function MR(i){hs.D(i),px("dns-prefetch",i,null)}function DR(i,o){hs.C(i,o),px("preconnect",i,o)}function jR(i,o,c){hs.L(i,o,c);var h=xa;if(h&&i&&o){var b='link[rel="preload"][as="'+lr(o)+'"]';o==="image"&&c&&c.imageSrcSet?(b+='[imagesrcset="'+lr(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(b+='[imagesizes="'+lr(c.imageSizes)+'"]')):b+='[href="'+lr(i)+'"]';var _=b;switch(o){case"style":_=wa(i);break;case"script":_=Sa(i)}gr.has(_)||(i=p({rel:"preload",href:o==="image"&&c&&c.imageSrcSet?void 0:i,as:o},c),gr.set(_,i),h.querySelector(b)!==null||o==="style"&&h.querySelector(Ko(_))||o==="script"&&h.querySelector(Zo(_))||(o=h.createElement("link"),an(o,"link",i),Kt(o),h.head.appendChild(o)))}}function LR(i,o){hs.m(i,o);var c=xa;if(c&&i){var h=o&&typeof o.as=="string"?o.as:"script",b='link[rel="modulepreload"][as="'+lr(h)+'"][href="'+lr(i)+'"]',_=b;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=Sa(i)}if(!gr.has(_)&&(i=p({rel:"modulepreload",href:i},o),gr.set(_,i),c.querySelector(b)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(Zo(_)))return}h=c.createElement("link"),an(h,"link",i),Kt(h),c.head.appendChild(h)}}}function zR(i,o,c){hs.S(i,o,c);var h=xa;if(h&&i){var b=Vi(h).hoistableStyles,_=wa(i);o=o||"default";var k=b.get(_);if(!k){var O={loading:0,preload:null};if(k=h.querySelector(Ko(_)))O.loading=5;else{i=p({rel:"stylesheet",href:i,"data-precedence":o},c),(c=gr.get(_))&&jp(i,c);var B=k=h.createElement("link");Kt(B),an(B,"link",i),B._p=new Promise(function(Y,ie){B.onload=Y,B.onerror=ie}),B.addEventListener("load",function(){O.loading|=1}),B.addEventListener("error",function(){O.loading|=2}),O.loading|=4,hu(k,o,h)}k={type:"stylesheet",instance:k,count:1,state:O},b.set(_,k)}}}function PR(i,o){hs.X(i,o);var c=xa;if(c&&i){var h=Vi(c).hoistableScripts,b=Sa(i),_=h.get(b);_||(_=c.querySelector(Zo(b)),_||(i=p({src:i,async:!0},o),(o=gr.get(b))&&Lp(i,o),_=c.createElement("script"),Kt(_),an(_,"link",i),c.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},h.set(b,_))}}function BR(i,o){hs.M(i,o);var c=xa;if(c&&i){var h=Vi(c).hoistableScripts,b=Sa(i),_=h.get(b);_||(_=c.querySelector(Zo(b)),_||(i=p({src:i,async:!0,type:"module"},o),(o=gr.get(b))&&Lp(i,o),_=c.createElement("script"),Kt(_),an(_,"link",i),c.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},h.set(b,_))}}function mx(i,o,c,h){var b=(b=he.current)?du(b):null;if(!b)throw Error(r(446));switch(i){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(o=wa(c.href),c=Vi(b).hoistableStyles,h=c.get(o),h||(h={type:"style",instance:null,count:0,state:null},c.set(o,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){i=wa(c.href);var _=Vi(b).hoistableStyles,k=_.get(i);if(k||(b=b.ownerDocument||b,k={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(i,k),(_=b.querySelector(Ko(i)))&&!_._p&&(k.instance=_,k.state.loading=5),gr.has(i)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},gr.set(i,c),_||$R(b,i,c,k.state))),o&&h===null)throw Error(r(528,""));return k}if(o&&h!==null)throw Error(r(529,""));return null;case"script":return o=c.async,c=c.src,typeof c=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=Sa(c),c=Vi(b).hoistableScripts,h=c.get(o),h||(h={type:"script",instance:null,count:0,state:null},c.set(o,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,i))}}function wa(i){return'href="'+lr(i)+'"'}function Ko(i){return'link[rel="stylesheet"]['+i+"]"}function gx(i){return p({},i,{"data-precedence":i.precedence,precedence:null})}function $R(i,o,c,h){i.querySelector('link[rel="preload"][as="style"]['+o+"]")?h.loading=1:(o=i.createElement("link"),h.preload=o,o.addEventListener("load",function(){return h.loading|=1}),o.addEventListener("error",function(){return h.loading|=2}),an(o,"link",c),Kt(o),i.head.appendChild(o))}function Sa(i){return'[src="'+lr(i)+'"]'}function Zo(i){return"script[async]"+i}function yx(i,o,c){if(o.count++,o.instance===null)switch(o.type){case"style":var h=i.querySelector('style[data-href~="'+lr(c.href)+'"]');if(h)return o.instance=h,Kt(h),h;var b=p({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return h=(i.ownerDocument||i).createElement("style"),Kt(h),an(h,"style",b),hu(h,c.precedence,i),o.instance=h;case"stylesheet":b=wa(c.href);var _=i.querySelector(Ko(b));if(_)return o.state.loading|=4,o.instance=_,Kt(_),_;h=gx(c),(b=gr.get(b))&&jp(h,b),_=(i.ownerDocument||i).createElement("link"),Kt(_);var k=_;return k._p=new Promise(function(O,B){k.onload=O,k.onerror=B}),an(_,"link",h),o.state.loading|=4,hu(_,c.precedence,i),o.instance=_;case"script":return _=Sa(c.src),(b=i.querySelector(Zo(_)))?(o.instance=b,Kt(b),b):(h=c,(b=gr.get(_))&&(h=p({},c),Lp(h,b)),i=i.ownerDocument||i,b=i.createElement("script"),Kt(b),an(b,"link",h),i.head.appendChild(b),o.instance=b);case"void":return null;default:throw Error(r(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(h=o.instance,o.state.loading|=4,hu(h,c.precedence,i));return o.instance}function hu(i,o,c){for(var h=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),b=h.length?h[h.length-1]:null,_=b,k=0;k<h.length;k++){var O=h[k];if(O.dataset.precedence===o)_=O;else if(_!==b)break}_?_.parentNode.insertBefore(i,_.nextSibling):(o=c.nodeType===9?c.head:c,o.insertBefore(i,o.firstChild))}function jp(i,o){i.crossOrigin==null&&(i.crossOrigin=o.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=o.referrerPolicy),i.title==null&&(i.title=o.title)}function Lp(i,o){i.crossOrigin==null&&(i.crossOrigin=o.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=o.referrerPolicy),i.integrity==null&&(i.integrity=o.integrity)}var pu=null;function bx(i,o,c){if(pu===null){var h=new Map,b=pu=new Map;b.set(c,h)}else b=pu,h=b.get(c),h||(h=new Map,b.set(c,h));if(h.has(i))return h;for(h.set(i,null),c=c.getElementsByTagName(i),b=0;b<c.length;b++){var _=c[b];if(!(_[co]||_[tn]||i==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var k=_.getAttribute(o)||"";k=i+k;var O=h.get(k);O?O.push(_):h.set(k,[_])}}return h}function _x(i,o,c){i=i.ownerDocument||i,i.head.insertBefore(c,o==="title"?i.querySelector("head > title"):null)}function UR(i,o,c){if(c===1||o.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;return o.rel==="stylesheet"?(i=o.disabled,typeof o.precedence=="string"&&i==null):!0;case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function vx(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function qR(i,o,c,h){if(c.type==="stylesheet"&&(typeof h.media!="string"||matchMedia(h.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var b=wa(h.href),_=o.querySelector(Ko(b));if(_){o=_._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(i.count++,i=mu.bind(i),o.then(i,i)),c.state.loading|=4,c.instance=_,Kt(_);return}_=o.ownerDocument||o,h=gx(h),(b=gr.get(b))&&jp(h,b),_=_.createElement("link"),Kt(_);var k=_;k._p=new Promise(function(O,B){k.onload=O,k.onerror=B}),an(_,"link",h),c.instance=_}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(c,o),(o=c.state.preload)&&(c.state.loading&3)===0&&(i.count++,c=mu.bind(i),o.addEventListener("load",c),o.addEventListener("error",c))}}var zp=0;function FR(i,o){return i.stylesheets&&i.count===0&&yu(i,i.stylesheets),0<i.count||0<i.imgCount?function(c){var h=setTimeout(function(){if(i.stylesheets&&yu(i,i.stylesheets),i.unsuspend){var _=i.unsuspend;i.unsuspend=null,_()}},6e4+o);0<i.imgBytes&&zp===0&&(zp=62500*SR());var b=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&yu(i,i.stylesheets),i.unsuspend)){var _=i.unsuspend;i.unsuspend=null,_()}},(i.imgBytes>zp?50:800)+o);return i.unsuspend=c,function(){i.unsuspend=null,clearTimeout(h),clearTimeout(b)}}:null}function mu(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)yu(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var gu=null;function yu(i,o){i.stylesheets=null,i.unsuspend!==null&&(i.count++,gu=new Map,o.forEach(VR,i),gu=null,mu.call(i))}function VR(i,o){if(!(o.state.loading&4)){var c=gu.get(i);if(c)var h=c.get(null);else{c=new Map,gu.set(i,c);for(var b=i.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<b.length;_++){var k=b[_];(k.nodeName==="LINK"||k.getAttribute("media")!=="not all")&&(c.set(k.dataset.precedence,k),h=k)}h&&c.set(null,h)}b=o.instance,k=b.getAttribute("data-precedence"),_=c.get(k)||h,_===h&&c.set(null,b),c.set(k,b),this.count++,h=mu.bind(this),b.addEventListener("load",h),b.addEventListener("error",h),_?_.parentNode.insertBefore(b,_.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(b,i.firstChild)),o.state.loading|=4}}var Qo={$$typeof:A,Provider:null,Consumer:null,_currentValue:oe,_currentValue2:oe,_threadCount:0};function HR(i,o,c,h,b,_,k,O,B){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Id(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Id(0),this.hiddenUpdates=Id(null),this.identifierPrefix=h,this.onUncaughtError=b,this.onCaughtError=_,this.onRecoverableError=k,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=B,this.incompleteTransitions=new Map}function xx(i,o,c,h,b,_,k,O,B,Y,ie,le){return i=new HR(i,o,c,k,B,Y,ie,le,O),o=1,_===!0&&(o|=24),_=Hn(3,null,null,o),i.current=_,_.stateNode=i,o=gh(),o.refCount++,i.pooledCache=o,o.refCount++,_.memoizedState={element:h,isDehydrated:c,cache:o},vh(_),i}function wx(i){return i?(i=ea,i):ea}function Sx(i,o,c,h,b,_){b=wx(b),h.context===null?h.context=b:h.pendingContext=b,h=Ts(o),h.payload={element:c},_=_===void 0?null:_,_!==null&&(h.callback=_),c=As(i,h,o),c!==null&&(Pn(c,i,o),To(c,i,o))}function kx(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var c=i.retryLane;i.retryLane=c!==0&&c<o?c:o}}function Pp(i,o){kx(i,o),(i=i.alternate)&&kx(i,o)}function Ex(i){if(i.tag===13||i.tag===31){var o=ci(i,67108864);o!==null&&Pn(o,i,67108864),Pp(i,67108864)}}function Cx(i){if(i.tag===13||i.tag===31){var o=Jn();o=Md(o);var c=ci(i,o);c!==null&&Pn(c,i,o),Pp(i,o)}}var bu=!0;function GR(i,o,c,h){var b=$.T;$.T=null;var _=G.p;try{G.p=2,Bp(i,o,c,h)}finally{G.p=_,$.T=b}}function KR(i,o,c,h){var b=$.T;$.T=null;var _=G.p;try{G.p=8,Bp(i,o,c,h)}finally{G.p=_,$.T=b}}function Bp(i,o,c,h){if(bu){var b=$p(h);if(b===null)Ep(i,o,h,_u,c),Ax(i,h);else if(QR(b,i,o,c,h))h.stopPropagation();else if(Ax(i,h),o&4&&-1<ZR.indexOf(i)){for(;b!==null;){var _=Fi(b);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var k=si(_.pendingLanes);if(k!==0){var O=_;for(O.pendingLanes|=2,O.entangledLanes|=2;k;){var B=1<<31-at(k);O.entanglements[1]|=B,k&=~B}jr(_),(it&6)===0&&(tu=be()+500,Fo(0))}}break;case 31:case 13:O=ci(_,2),O!==null&&Pn(O,_,2),ru(),Pp(_,2)}if(_=$p(h),_===null&&Ep(i,o,h,_u,c),_===b)break;b=_}b!==null&&h.stopPropagation()}else Ep(i,o,h,null,c)}}function $p(i){return i=qd(i),Up(i)}var _u=null;function Up(i){if(_u=null,i=qi(i),i!==null){var o=a(i);if(o===null)i=null;else{var c=o.tag;if(c===13){if(i=l(o),i!==null)return i;i=null}else if(c===31){if(i=u(o),i!==null)return i;i=null}else if(c===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null)}}return _u=i,null}function Tx(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(st()){case ne:return 2;case fe:return 8;case ye:case ge:return 32;case ve:return 268435456;default:return 32}default:return 32}}var qp=!1,Bs=null,$s=null,Us=null,Jo=new Map,Yo=new Map,qs=[],ZR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Ax(i,o){switch(i){case"focusin":case"focusout":Bs=null;break;case"dragenter":case"dragleave":$s=null;break;case"mouseover":case"mouseout":Us=null;break;case"pointerover":case"pointerout":Jo.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Yo.delete(o.pointerId)}}function Xo(i,o,c,h,b,_){return i===null||i.nativeEvent!==_?(i={blockedOn:o,domEventName:c,eventSystemFlags:h,nativeEvent:_,targetContainers:[b]},o!==null&&(o=Fi(o),o!==null&&Ex(o)),i):(i.eventSystemFlags|=h,o=i.targetContainers,b!==null&&o.indexOf(b)===-1&&o.push(b),i)}function QR(i,o,c,h,b){switch(o){case"focusin":return Bs=Xo(Bs,i,o,c,h,b),!0;case"dragenter":return $s=Xo($s,i,o,c,h,b),!0;case"mouseover":return Us=Xo(Us,i,o,c,h,b),!0;case"pointerover":var _=b.pointerId;return Jo.set(_,Xo(Jo.get(_)||null,i,o,c,h,b)),!0;case"gotpointercapture":return _=b.pointerId,Yo.set(_,Xo(Yo.get(_)||null,i,o,c,h,b)),!0}return!1}function Rx(i){var o=qi(i.target);if(o!==null){var c=a(o);if(c!==null){if(o=c.tag,o===13){if(o=l(c),o!==null){i.blockedOn=o,F0(i.priority,function(){Cx(c)});return}}else if(o===31){if(o=u(c),o!==null){i.blockedOn=o,F0(i.priority,function(){Cx(c)});return}}else if(o===3&&c.stateNode.current.memoizedState.isDehydrated){i.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}i.blockedOn=null}function vu(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var c=$p(i.nativeEvent);if(c===null){c=i.nativeEvent;var h=new c.constructor(c.type,c);Ud=h,c.target.dispatchEvent(h),Ud=null}else return o=Fi(c),o!==null&&Ex(o),i.blockedOn=c,!1;o.shift()}return!0}function Ox(i,o,c){vu(i)&&c.delete(o)}function JR(){qp=!1,Bs!==null&&vu(Bs)&&(Bs=null),$s!==null&&vu($s)&&($s=null),Us!==null&&vu(Us)&&(Us=null),Jo.forEach(Ox),Yo.forEach(Ox)}function xu(i,o){i.blockedOn===o&&(i.blockedOn=null,qp||(qp=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,JR)))}var wu=null;function Nx(i){wu!==i&&(wu=i,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){wu===i&&(wu=null);for(var o=0;o<i.length;o+=3){var c=i[o],h=i[o+1],b=i[o+2];if(typeof h!="function"){if(Up(h||c)===null)continue;break}var _=Fi(c);_!==null&&(i.splice(o,3),o-=3,$h(_,{pending:!0,data:b,method:c.method,action:h},h,b))}}))}function ka(i){function o(B){return xu(B,i)}Bs!==null&&xu(Bs,i),$s!==null&&xu($s,i),Us!==null&&xu(Us,i),Jo.forEach(o),Yo.forEach(o);for(var c=0;c<qs.length;c++){var h=qs[c];h.blockedOn===i&&(h.blockedOn=null)}for(;0<qs.length&&(c=qs[0],c.blockedOn===null);)Rx(c),c.blockedOn===null&&qs.shift();if(c=(i.ownerDocument||i).$$reactFormReplay,c!=null)for(h=0;h<c.length;h+=3){var b=c[h],_=c[h+1],k=b[In]||null;if(typeof _=="function")k||Nx(c);else if(k){var O=null;if(_&&_.hasAttribute("formAction")){if(b=_,k=_[In]||null)O=k.formAction;else if(Up(b)!==null)continue}else O=k.action;typeof O=="function"?c[h+1]=O:(c.splice(h,3),h-=3),Nx(c)}}}function Ix(){function i(_){_.canIntercept&&_.info==="react-transition"&&_.intercept({handler:function(){return new Promise(function(k){return b=k})},focusReset:"manual",scroll:"manual"})}function o(){b!==null&&(b(),b=null),h||setTimeout(c,20)}function c(){if(!h&&!navigation.transition){var _=navigation.currentEntry;_&&_.url!=null&&navigation.navigate(_.url,{state:_.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var h=!1,b=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(c,100),function(){h=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),b!==null&&(b(),b=null)}}}function Fp(i){this._internalRoot=i}Su.prototype.render=Fp.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(r(409));var c=o.current,h=Jn();Sx(c,h,i,o,null,null)},Su.prototype.unmount=Fp.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;Sx(i.current,2,null,i,null,null),ru(),o[Ui]=null}};function Su(i){this._internalRoot=i}Su.prototype.unstable_scheduleHydration=function(i){if(i){var o=q0();i={blockedOn:null,target:i,priority:o};for(var c=0;c<qs.length&&o!==0&&o<qs[c].priority;c++);qs.splice(c,0,i),c===0&&Rx(i)}};var Mx=e.version;if(Mx!=="19.2.3")throw Error(r(527,Mx,"19.2.3"));G.findDOMNode=function(i){var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(r(188)):(i=Object.keys(i).join(","),Error(r(268,i)));return i=d(o),i=i!==null?m(i):null,i=i===null?null:i.stateNode,i};var YR={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:$,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ku=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ku.isDisabled&&ku.supportsFiber)try{Xe=ku.inject(YR),Pe=ku}catch{}}return el.createRoot=function(i,o){if(!s(i))throw Error(r(299));var c=!1,h="",b=$_,_=U_,k=q_;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(h=o.identifierPrefix),o.onUncaughtError!==void 0&&(b=o.onUncaughtError),o.onCaughtError!==void 0&&(_=o.onCaughtError),o.onRecoverableError!==void 0&&(k=o.onRecoverableError)),o=xx(i,1,!1,null,null,c,h,null,b,_,k,Ix),i[Ui]=o.current,kp(i),new Fp(o)},el.hydrateRoot=function(i,o,c){if(!s(i))throw Error(r(299));var h=!1,b="",_=$_,k=U_,O=q_,B=null;return c!=null&&(c.unstable_strictMode===!0&&(h=!0),c.identifierPrefix!==void 0&&(b=c.identifierPrefix),c.onUncaughtError!==void 0&&(_=c.onUncaughtError),c.onCaughtError!==void 0&&(k=c.onCaughtError),c.onRecoverableError!==void 0&&(O=c.onRecoverableError),c.formState!==void 0&&(B=c.formState)),o=xx(i,1,!0,o,c??null,h,b,B,_,k,O,Ix),o.context=wx(null),c=o.current,h=Jn(),h=Md(h),b=Ts(h),b.callback=null,As(c,b,h),c=h,o.current.lanes=c,lo(o,c),jr(o),i[Ui]=o.current,kp(i),new Su(o)},el.version="19.2.3",el}var Fx;function aO(){if(Fx)return Gp.exports;Fx=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Gp.exports=iO(),Gp.exports}var oO=aO(),Yl=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},lO={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},cO=class{#e=lO;#t=!1;setTimeoutProvider(t){this.#e=t}setTimeout(t,e){return this.#e.setTimeout(t,e)}clearTimeout(t){this.#e.clearTimeout(t)}setInterval(t,e){return this.#e.setInterval(t,e)}clearInterval(t){this.#e.clearInterval(t)}},Ai=new cO;function uO(t){setTimeout(t,0)}var Ga=typeof window>"u"||"Deno"in globalThis;function br(){}function fO(t,e){return typeof t=="function"?t(e):t}function Hm(t){return typeof t=="number"&&t>=0&&t!==1/0}function tk(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Js(t,e){return typeof t=="function"?t(e):t}function _r(t,e){return typeof t=="function"?t(e):t}function Vx(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:a,queryKey:l,stale:u}=t;if(l){if(r){if(e.queryHash!==oy(l,e.options))return!1}else if(!Ll(e.queryKey,l))return!1}if(n!=="all"){const f=e.isActive();if(n==="active"&&!f||n==="inactive"&&f)return!1}return!(typeof u=="boolean"&&e.isStale()!==u||s&&s!==e.state.fetchStatus||a&&!a(e))}function Hx(t,e){const{exact:n,status:r,predicate:s,mutationKey:a}=t;if(a){if(!e.options.mutationKey)return!1;if(n){if(bs(e.options.mutationKey)!==bs(a))return!1}else if(!Ll(e.options.mutationKey,a))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function oy(t,e){return(e?.queryKeyHashFn||bs)(t)}function bs(t){return JSON.stringify(t,(e,n)=>Km(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function Ll(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>Ll(t[n],e[n])):!1}var dO=Object.prototype.hasOwnProperty;function nk(t,e){if(t===e)return t;const n=Gx(t)&&Gx(e);if(!n&&!(Km(t)&&Km(e)))return e;const s=(n?t:Object.keys(t)).length,a=n?e:Object.keys(e),l=a.length,u=n?new Array(l):{};let f=0;for(let d=0;d<l;d++){const m=n?d:a[d],p=t[m],y=e[m];if(p===y){u[m]=p,(n?d<s:dO.call(t,m))&&f++;continue}if(p===null||y===null||typeof p!="object"||typeof y!="object"){u[m]=y;continue}const g=nk(p,y);u[m]=g,g===p&&f++}return s===l&&f===s?t:u}function Gm(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function Gx(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Km(t){if(!Kx(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!Kx(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function Kx(t){return Object.prototype.toString.call(t)==="[object Object]"}function hO(t){return new Promise(e=>{Ai.setTimeout(e,t)})}function Zm(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?nk(t,e):e}function pO(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function mO(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var ly=Symbol();function rk(t,e){return!t.queryFn&&e?.initialPromise?()=>e.initialPromise:!t.queryFn||t.queryFn===ly?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function gO(t,e,n){let r=!1,s;return Object.defineProperty(t,"signal",{enumerable:!0,get:()=>(s??=e(),r||(r=!0,s.aborted?n():s.addEventListener("abort",n,{once:!0})),s)}),t}var yO=class extends Yl{#e;#t;#n;constructor(){super(),this.#n=t=>{if(!Ga&&window.addEventListener){const e=()=>t();return window.addEventListener("visibilitychange",e,!1),()=>{window.removeEventListener("visibilitychange",e)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#n=t,this.#t?.(),this.#t=t(e=>{typeof e=="boolean"?this.setFocused(e):this.onFocus()})}setFocused(t){this.#e!==t&&(this.#e=t,this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(e=>{e(t)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},cy=new yO;function Qm(){let t,e;const n=new Promise((s,a)=>{t=s,e=a});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}var bO=uO;function _O(){let t=[],e=0,n=u=>{u()},r=u=>{u()},s=bO;const a=u=>{e?t.push(u):s(()=>{n(u)})},l=()=>{const u=t;t=[],u.length&&s(()=>{r(()=>{u.forEach(f=>{n(f)})})})};return{batch:u=>{let f;e++;try{f=u()}finally{e--,e||l()}return f},batchCalls:u=>(...f)=>{a(()=>{u(...f)})},schedule:a,setNotifyFunction:u=>{n=u},setBatchNotifyFunction:u=>{r=u},setScheduler:u=>{s=u}}}var bn=_O(),vO=class extends Yl{#e=!0;#t;#n;constructor(){super(),this.#n=t=>{if(!Ga&&window.addEventListener){const e=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",e,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",n)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#n=t,this.#t?.(),this.#t=t(this.setOnline.bind(this))}setOnline(t){this.#e!==t&&(this.#e=t,this.listeners.forEach(n=>{n(t)}))}isOnline(){return this.#e}},ff=new vO;function xO(t){return Math.min(1e3*2**t,3e4)}function sk(t){return(t??"online")==="online"?ff.isOnline():!0}var Jm=class extends Error{constructor(t){super("CancelledError"),this.revert=t?.revert,this.silent=t?.silent}};function ik(t){let e=!1,n=0,r;const s=Qm(),a=()=>s.status!=="pending",l=x=>{if(!a()){const E=new Jm(x);y(E),t.onCancel?.(E)}},u=()=>{e=!0},f=()=>{e=!1},d=()=>cy.isFocused()&&(t.networkMode==="always"||ff.isOnline())&&t.canRun(),m=()=>sk(t.networkMode)&&t.canRun(),p=x=>{a()||(r?.(),s.resolve(x))},y=x=>{a()||(r?.(),s.reject(x))},g=()=>new Promise(x=>{r=E=>{(a()||d())&&x(E)},t.onPause?.()}).then(()=>{r=void 0,a()||t.onContinue?.()}),v=()=>{if(a())return;let x;const E=n===0?t.initialPromise:void 0;try{x=E??t.fn()}catch(S){x=Promise.reject(S)}Promise.resolve(x).then(p).catch(S=>{if(a())return;const T=t.retry??(Ga?0:3),A=t.retryDelay??xO,j=typeof A=="function"?A(n,S):A,D=T===!0||typeof T=="number"&&n<T||typeof T=="function"&&T(n,S);if(e||!D){y(S);return}n++,t.onFail?.(n,S),hO(j).then(()=>d()?void 0:g()).then(()=>{e?y(S):v()})})};return{promise:s,status:()=>s.status,cancel:l,continue:()=>(r?.(),s),cancelRetry:u,continueRetry:f,canStart:m,start:()=>(m()?v():g().then(v),s)}}var ak=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Hm(this.gcTime)&&(this.#e=Ai.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Ga?1/0:300*1e3))}clearGcTimeout(){this.#e&&(Ai.clearTimeout(this.#e),this.#e=void 0)}},wO=class extends ak{#e;#t;#n;#r;#s;#o;#i;constructor(t){super(),this.#i=!1,this.#o=t.defaultOptions,this.setOptions(t.options),this.observers=[],this.#r=t.client,this.#n=this.#r.getQueryCache(),this.queryKey=t.queryKey,this.queryHash=t.queryHash,this.#e=Qx(this.options),this.state=t.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#s?.promise}setOptions(t){if(this.options={...this.#o,...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const e=Qx(this.options);e.data!==void 0&&(this.setState(Zx(e.data,e.dataUpdatedAt)),this.#e=e)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#n.remove(this)}setData(t,e){const n=Zm(this.state.data,t,this.options);return this.#a({data:n,type:"success",dataUpdatedAt:e?.updatedAt,manual:e?.manual}),n}setState(t,e){this.#a({type:"setState",state:t,setStateOptions:e})}cancel(t){const e=this.#s?.promise;return this.#s?.cancel(t),e?e.then(br).catch(br):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(t=>_r(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===ly||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>Js(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!tk(this.state.dataUpdatedAt,t)}onFocus(){this.observers.find(e=>e.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#s?.continue()}onOnline(){this.observers.find(e=>e.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#s?.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(e=>e!==t),this.observers.length||(this.#s&&(this.#i?this.#s.cancel({revert:!0}):this.#s.cancelRetry()),this.scheduleGc()),this.#n.notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#a({type:"invalidate"})}async fetch(t,e){if(this.state.fetchStatus!=="idle"&&this.#s?.status()!=="rejected"){if(this.state.data!==void 0&&e?.cancelRefetch)this.cancel({silent:!0});else if(this.#s)return this.#s.continueRetry(),this.#s.promise}if(t&&this.setOptions(t),!this.options.queryFn){const u=this.observers.find(f=>f.options.queryFn);u&&this.setOptions(u.options)}const n=new AbortController,r=u=>{Object.defineProperty(u,"signal",{enumerable:!0,get:()=>(this.#i=!0,n.signal)})},s=()=>{const u=rk(this.options,e),d=(()=>{const m={client:this.#r,queryKey:this.queryKey,meta:this.meta};return r(m),m})();return this.#i=!1,this.options.persister?this.options.persister(u,d,this):u(d)},l=(()=>{const u={fetchOptions:e,options:this.options,queryKey:this.queryKey,client:this.#r,state:this.state,fetchFn:s};return r(u),u})();this.options.behavior?.onFetch(l,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==l.fetchOptions?.meta)&&this.#a({type:"fetch",meta:l.fetchOptions?.meta}),this.#s=ik({initialPromise:e?.initialPromise,fn:l.fetchFn,onCancel:u=>{u instanceof Jm&&u.revert&&this.setState({...this.#t,fetchStatus:"idle"}),n.abort()},onFail:(u,f)=>{this.#a({type:"failed",failureCount:u,error:f})},onPause:()=>{this.#a({type:"pause"})},onContinue:()=>{this.#a({type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0});try{const u=await this.#s.start();if(u===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(u),this.#n.config.onSuccess?.(u,this),this.#n.config.onSettled?.(u,this.state.error,this),u}catch(u){if(u instanceof Jm){if(u.silent)return this.#s.promise;if(u.revert){if(this.state.data===void 0)throw u;return this.state.data}}throw this.#a({type:"error",error:u}),this.#n.config.onError?.(u,this),this.#n.config.onSettled?.(this.state.data,u,this),u}finally{this.scheduleGc()}}#a(t){const e=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...ok(n.data,this.options),fetchMeta:t.meta??null};case"success":const r={...n,...Zx(t.data,t.dataUpdatedAt),dataUpdateCount:n.dataUpdateCount+1,...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=t.manual?r:void 0,r;case"error":const s=t.error;return{...n,error:s,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=e(this.state),bn.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),this.#n.notify({query:this,type:"updated",action:t})})}};function ok(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:sk(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function Zx(t,e){return{data:t,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function Qx(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var SO=class extends Yl{constructor(t,e){super(),this.options=e,this.#e=t,this.#a=null,this.#i=Qm(),this.bindMethods(),this.setOptions(e)}#e;#t=void 0;#n=void 0;#r=void 0;#s;#o;#i;#a;#p;#m;#c;#u;#l;#f;#d=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),Jx(this.#t,this.options)?this.#h():this.updateResult(),this.#_())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Ym(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Ym(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#v(),this.#x(),this.#t.removeObserver(this)}setOptions(t){const e=this.options,n=this.#t;if(this.options=this.#e.defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof _r(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#w(),this.#t.setOptions(this.options),e._defaulted&&!Gm(this.options,e)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const r=this.hasListeners();r&&Yx(this.#t,n,this.options,e)&&this.#h(),this.updateResult(),r&&(this.#t!==n||_r(this.options.enabled,this.#t)!==_r(e.enabled,this.#t)||Js(this.options.staleTime,this.#t)!==Js(e.staleTime,this.#t))&&this.#g();const s=this.#y();r&&(this.#t!==n||_r(this.options.enabled,this.#t)!==_r(e.enabled,this.#t)||s!==this.#f)&&this.#b(s)}getOptimisticResult(t){const e=this.#e.getQueryCache().build(this.#e,t),n=this.createResult(e,t);return EO(this,n)&&(this.#r=n,this.#o=this.options,this.#s=this.#t.state),n}getCurrentResult(){return this.#r}trackResult(t,e){return new Proxy(t,{get:(n,r)=>(this.trackProp(r),e?.(r),r==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&this.#i.status==="pending"&&this.#i.reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(n,r))})}trackProp(t){this.#d.add(t)}getCurrentQuery(){return this.#t}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const e=this.#e.defaultQueryOptions(t),n=this.#e.getQueryCache().build(this.#e,e);return n.fetch().then(()=>this.createResult(n,e))}fetch(t){return this.#h({...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#r))}#h(t){this.#w();let e=this.#t.fetch(this.options,t);return t?.throwOnError||(e=e.catch(br)),e}#g(){this.#v();const t=Js(this.options.staleTime,this.#t);if(Ga||this.#r.isStale||!Hm(t))return;const n=tk(this.#r.dataUpdatedAt,t)+1;this.#u=Ai.setTimeout(()=>{this.#r.isStale||this.updateResult()},n)}#y(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#b(t){this.#x(),this.#f=t,!(Ga||_r(this.options.enabled,this.#t)===!1||!Hm(this.#f)||this.#f===0)&&(this.#l=Ai.setInterval(()=>{(this.options.refetchIntervalInBackground||cy.isFocused())&&this.#h()},this.#f))}#_(){this.#g(),this.#b(this.#y())}#v(){this.#u&&(Ai.clearTimeout(this.#u),this.#u=void 0)}#x(){this.#l&&(Ai.clearInterval(this.#l),this.#l=void 0)}createResult(t,e){const n=this.#t,r=this.options,s=this.#r,a=this.#s,l=this.#o,f=t!==n?t.state:this.#n,{state:d}=t;let m={...d},p=!1,y;if(e._optimisticResults){const q=this.hasListeners(),H=!q&&Jx(t,e),z=q&&Yx(t,n,e,r);(H||z)&&(m={...m,...ok(d.data,t.options)}),e._optimisticResults==="isRestoring"&&(m.fetchStatus="idle")}let{error:g,errorUpdatedAt:v,status:x}=m;y=m.data;let E=!1;if(e.placeholderData!==void 0&&y===void 0&&x==="pending"){let q;s?.isPlaceholderData&&e.placeholderData===l?.placeholderData?(q=s.data,E=!0):q=typeof e.placeholderData=="function"?e.placeholderData(this.#c?.state.data,this.#c):e.placeholderData,q!==void 0&&(x="success",y=Zm(s?.data,q,e),p=!0)}if(e.select&&y!==void 0&&!E)if(s&&y===a?.data&&e.select===this.#p)y=this.#m;else try{this.#p=e.select,y=e.select(y),y=Zm(s?.data,y,e),this.#m=y,this.#a=null}catch(q){this.#a=q}this.#a&&(g=this.#a,y=this.#m,v=Date.now(),x="error");const S=m.fetchStatus==="fetching",T=x==="pending",A=x==="error",j=T&&S,D=y!==void 0,P={status:x,fetchStatus:m.fetchStatus,isPending:T,isSuccess:x==="success",isError:A,isInitialLoading:j,isLoading:j,data:y,dataUpdatedAt:m.dataUpdatedAt,error:g,errorUpdatedAt:v,failureCount:m.fetchFailureCount,failureReason:m.fetchFailureReason,errorUpdateCount:m.errorUpdateCount,isFetched:m.dataUpdateCount>0||m.errorUpdateCount>0,isFetchedAfterMount:m.dataUpdateCount>f.dataUpdateCount||m.errorUpdateCount>f.errorUpdateCount,isFetching:S,isRefetching:S&&!T,isLoadingError:A&&!D,isPaused:m.fetchStatus==="paused",isPlaceholderData:p,isRefetchError:A&&D,isStale:uy(t,e),refetch:this.refetch,promise:this.#i,isEnabled:_r(e.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const q=Q=>{P.status==="error"?Q.reject(P.error):P.data!==void 0&&Q.resolve(P.data)},H=()=>{const Q=this.#i=P.promise=Qm();q(Q)},z=this.#i;switch(z.status){case"pending":t.queryHash===n.queryHash&&q(z);break;case"fulfilled":(P.status==="error"||P.data!==z.value)&&H();break;case"rejected":(P.status!=="error"||P.error!==z.reason)&&H();break}}return P}updateResult(){const t=this.#r,e=this.createResult(this.#t,this.options);if(this.#s=this.#t.state,this.#o=this.options,this.#s.data!==void 0&&(this.#c=this.#t),Gm(e,t))return;this.#r=e;const n=()=>{if(!t)return!0;const{notifyOnChangeProps:r}=this.options,s=typeof r=="function"?r():r;if(s==="all"||!s&&!this.#d.size)return!0;const a=new Set(s??this.#d);return this.options.throwOnError&&a.add("error"),Object.keys(this.#r).some(l=>{const u=l;return this.#r[u]!==t[u]&&a.has(u)})};this.#S({listeners:n()})}#w(){const t=this.#e.getQueryCache().build(this.#e,this.options);if(t===this.#t)return;const e=this.#t;this.#t=t,this.#n=t.state,this.hasListeners()&&(e?.removeObserver(this),t.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#_()}#S(t){bn.batch(()=>{t.listeners&&this.listeners.forEach(e=>{e(this.#r)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function kO(t,e){return _r(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function Jx(t,e){return kO(t,e)||t.state.data!==void 0&&Ym(t,e,e.refetchOnMount)}function Ym(t,e,n){if(_r(e.enabled,t)!==!1&&Js(e.staleTime,t)!=="static"){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&uy(t,e)}return!1}function Yx(t,e,n,r){return(t!==e||_r(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&uy(t,n)}function uy(t,e){return _r(e.enabled,t)!==!1&&t.isStaleByTime(Js(e.staleTime,t))}function EO(t,e){return!Gm(t.getCurrentResult(),e)}function Xx(t){return{onFetch:(e,n)=>{const r=e.options,s=e.fetchOptions?.meta?.fetchMore?.direction,a=e.state.data?.pages||[],l=e.state.data?.pageParams||[];let u={pages:[],pageParams:[]},f=0;const d=async()=>{let m=!1;const p=v=>{gO(v,()=>e.signal,()=>m=!0)},y=rk(e.options,e.fetchOptions),g=async(v,x,E)=>{if(m)return Promise.reject();if(x==null&&v.pages.length)return Promise.resolve(v);const T=(()=>{const I={client:e.client,queryKey:e.queryKey,pageParam:x,direction:E?"backward":"forward",meta:e.options.meta};return p(I),I})(),A=await y(T),{maxPages:j}=e.options,D=E?mO:pO;return{pages:D(v.pages,A,j),pageParams:D(v.pageParams,x,j)}};if(s&&a.length){const v=s==="backward",x=v?CO:Wx,E={pages:a,pageParams:l},S=x(r,E);u=await g(E,S,v)}else{const v=t??a.length;do{const x=f===0?l[0]??r.initialPageParam:Wx(r,u);if(f>0&&x==null)break;u=await g(u,x),f++}while(f<v)}return u};e.options.persister?e.fetchFn=()=>e.options.persister?.(d,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n):e.fetchFn=d}}}function Wx(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function CO(t,{pages:e,pageParams:n}){return e.length>0?t.getPreviousPageParam?.(e[0],e,n[0],n):void 0}var TO=class extends ak{#e;#t;#n;#r;constructor(t){super(),this.#e=t.client,this.mutationId=t.mutationId,this.#n=t.mutationCache,this.#t=[],this.state=t.state||AO(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){this.#t.includes(t)||(this.#t.push(t),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){this.#t=this.#t.filter(e=>e!==t),this.scheduleGc(),this.#n.notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#n.remove(this))}continue(){return this.#r?.continue()??this.execute(this.state.variables)}async execute(t){const e=()=>{this.#s({type:"continue"})},n={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#r=ik({fn:()=>this.options.mutationFn?this.options.mutationFn(t,n):Promise.reject(new Error("No mutationFn found")),onFail:(a,l)=>{this.#s({type:"failed",failureCount:a,error:l})},onPause:()=>{this.#s({type:"pause"})},onContinue:e,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#n.canRun(this)});const r=this.state.status==="pending",s=!this.#r.canStart();try{if(r)e();else{this.#s({type:"pending",variables:t,isPaused:s}),await this.#n.config.onMutate?.(t,this,n);const l=await this.options.onMutate?.(t,n);l!==this.state.context&&this.#s({type:"pending",context:l,variables:t,isPaused:s})}const a=await this.#r.start();return await this.#n.config.onSuccess?.(a,t,this.state.context,this,n),await this.options.onSuccess?.(a,t,this.state.context,n),await this.#n.config.onSettled?.(a,null,this.state.variables,this.state.context,this,n),await this.options.onSettled?.(a,null,t,this.state.context,n),this.#s({type:"success",data:a}),a}catch(a){try{await this.#n.config.onError?.(a,t,this.state.context,this,n)}catch(l){Promise.reject(l)}try{await this.options.onError?.(a,t,this.state.context,n)}catch(l){Promise.reject(l)}try{await this.#n.config.onSettled?.(void 0,a,this.state.variables,this.state.context,this,n)}catch(l){Promise.reject(l)}try{await this.options.onSettled?.(void 0,a,t,this.state.context,n)}catch(l){Promise.reject(l)}throw this.#s({type:"error",error:a}),a}finally{this.#n.runNext(this)}}#s(t){const e=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=e(this.state),bn.batch(()=>{this.#t.forEach(n=>{n.onMutationUpdate(t)}),this.#n.notify({mutation:this,type:"updated",action:t})})}};function AO(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var RO=class extends Yl{constructor(t={}){super(),this.config=t,this.#e=new Set,this.#t=new Map,this.#n=0}#e;#t;#n;build(t,e,n){const r=new TO({client:t,mutationCache:this,mutationId:++this.#n,options:t.defaultMutationOptions(e),state:n});return this.add(r),r}add(t){this.#e.add(t);const e=Eu(t);if(typeof e=="string"){const n=this.#t.get(e);n?n.push(t):this.#t.set(e,[t])}this.notify({type:"added",mutation:t})}remove(t){if(this.#e.delete(t)){const e=Eu(t);if(typeof e=="string"){const n=this.#t.get(e);if(n)if(n.length>1){const r=n.indexOf(t);r!==-1&&n.splice(r,1)}else n[0]===t&&this.#t.delete(e)}}this.notify({type:"removed",mutation:t})}canRun(t){const e=Eu(t);if(typeof e=="string"){const r=this.#t.get(e)?.find(s=>s.state.status==="pending");return!r||r===t}else return!0}runNext(t){const e=Eu(t);return typeof e=="string"?this.#t.get(e)?.find(r=>r!==t&&r.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){bn.batch(()=>{this.#e.forEach(t=>{this.notify({type:"removed",mutation:t})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(t){const e={exact:!0,...t};return this.getAll().find(n=>Hx(e,n))}findAll(t={}){return this.getAll().filter(e=>Hx(t,e))}notify(t){bn.batch(()=>{this.listeners.forEach(e=>{e(t)})})}resumePausedMutations(){const t=this.getAll().filter(e=>e.state.isPaused);return bn.batch(()=>Promise.all(t.map(e=>e.continue().catch(br))))}};function Eu(t){return t.options.scope?.id}var OO=class extends Yl{constructor(t={}){super(),this.config=t,this.#e=new Map}#e;build(t,e,n){const r=e.queryKey,s=e.queryHash??oy(r,e);let a=this.get(s);return a||(a=new wO({client:t,queryKey:r,queryHash:s,options:t.defaultQueryOptions(e),state:n,defaultOptions:t.getQueryDefaults(r)}),this.add(a)),a}add(t){this.#e.has(t.queryHash)||(this.#e.set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const e=this.#e.get(t.queryHash);e&&(t.destroy(),e===t&&this.#e.delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){bn.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return this.#e.get(t)}getAll(){return[...this.#e.values()]}find(t){const e={exact:!0,...t};return this.getAll().find(n=>Vx(e,n))}findAll(t={}){const e=this.getAll();return Object.keys(t).length>0?e.filter(n=>Vx(t,n)):e}notify(t){bn.batch(()=>{this.listeners.forEach(e=>{e(t)})})}onFocus(){bn.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){bn.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},NO=class{#e;#t;#n;#r;#s;#o;#i;#a;constructor(t={}){this.#e=t.queryCache||new OO,this.#t=t.mutationCache||new RO,this.#n=t.defaultOptions||{},this.#r=new Map,this.#s=new Map,this.#o=0}mount(){this.#o++,this.#o===1&&(this.#i=cy.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#a=ff.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#o--,this.#o===0&&(this.#i?.(),this.#i=void 0,this.#a?.(),this.#a=void 0)}isFetching(t){return this.#e.findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return this.#t.findAll({...t,status:"pending"}).length}getQueryData(t){const e=this.defaultQueryOptions({queryKey:t});return this.#e.get(e.queryHash)?.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=this.#e.build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(Js(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return this.#e.findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),a=this.#e.get(r.queryHash)?.state.data,l=fO(e,a);if(l!==void 0)return this.#e.build(this,r).setData(l,{...n,manual:!0})}setQueriesData(t,e,n){return bn.batch(()=>this.#e.findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){const e=this.defaultQueryOptions({queryKey:t});return this.#e.get(e.queryHash)?.state}removeQueries(t){const e=this.#e;bn.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=this.#e;return bn.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=bn.batch(()=>this.#e.findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(br).catch(br)}invalidateQueries(t,e={}){return bn.batch(()=>(this.#e.findAll(t).forEach(n=>{n.invalidate()}),t?.refetchType==="none"?Promise.resolve():this.refetchQueries({...t,type:t?.refetchType??t?.type??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=bn.batch(()=>this.#e.findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let a=s.fetch(void 0,n);return n.throwOnError||(a=a.catch(br)),s.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(r).then(br)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=this.#e.build(this,e);return n.isStaleByTime(Js(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(br).catch(br)}fetchInfiniteQuery(t){return t.behavior=Xx(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(br).catch(br)}ensureInfiniteQueryData(t){return t.behavior=Xx(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return ff.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#n}setDefaultOptions(t){this.#n=t}setQueryDefaults(t,e){this.#r.set(bs(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...this.#r.values()],n={};return e.forEach(r=>{Ll(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){this.#s.set(bs(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...this.#s.values()],n={};return e.forEach(r=>{Ll(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...this.#n.queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=oy(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===ly&&(e.enabled=!1),e}defaultMutationOptions(t){return t?._defaulted?t:{...this.#n.mutations,...t?.mutationKey&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},IO=K.createContext(void 0),MO=({client:t,children:e})=>(K.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),w.jsx(IO.Provider,{value:t,children:e})),Jp={exports:{}},Yp={};var ew;function DO(){if(ew)return Yp;ew=1;var t=td().__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;return Yp.c=function(e){return t.H.useMemoCache(e)},Yp}var tw;function jO(){return tw||(tw=1,Jp.exports=DO()),Jp.exports}var qe=jO();class Ya{}class Ka extends Ya{constructor(e,n){super(),this.collection=e,this.alias=n,this.type="collectionRef"}}class xr extends Ya{constructor(e,n){super(),this.query=e,this.alias=n,this.type="queryRef"}}class On extends Ya{constructor(e){super(),this.path=e,this.type="ref"}}class Un extends Ya{constructor(e){super(),this.value=e,this.type="val"}}class Sr extends Ya{constructor(e,n){super(),this.name=e,this.args=n,this.type="func"}}class lk extends Ya{constructor(e,n){super(),this.name=e,this.args=n,this.type="agg"}}function fy(t){return t instanceof lk||t instanceof Sr||t instanceof On||t instanceof Un}function dy(t){return typeof t=="object"&&"expression"in t?t.expression:t}function nw(t){return typeof t=="object"&&"expression"in t?t.expression:t}function rw(t){return typeof t=="object"&&"expression"in t&&t.residual===!0}function LO(t){return{expression:t,residual:!0}}function zO(t,e){if(t.from.alias===e)return t.from;for(const n of t.join||[])if(n.from.alias===e)return n.from}function zl(t,e,n){if(e.path.length!==0){if(e.path.length===1){const r=e.path[0];if(t.select){const s=t.select[r];if(s&&s.type==="ref")return zl(t,s,n)}return{collection:n,path:[r]}}if(e.path.length>1){const[r,...s]=e.path,a=zO(t,r);return a?a.type==="queryRef"?zl(a.query,new On(s),n):{collection:a.collection,path:s}:void 0}}}class nr extends Error{constructor(e){super(e),this.name="TanStackDBError"}}class sw extends nr{constructor(e,n,r){const s=`${e==="insert"?"Insert":"Update"} validation failed: ${n.map(a=>`
- ${a.message} - path: ${a.path}`).join("")}`;super(r||s),this.name="SchemaValidationError",this.type=e,this.issues=n}}class Xl extends nr{constructor(e){super(e),this.name="CollectionConfigurationError"}}class PO extends Xl{constructor(){super("Collection requires a config")}}class BO extends Xl{constructor(){super("Collection requires a sync config")}}class $O extends Xl{constructor(){super("Schema must implement the standard-schema interface")}}class iw extends Xl{constructor(){super("Schema validation must be synchronous")}}class Wl extends nr{constructor(e){super(e),this.name="CollectionStateError"}}class UO extends Wl{constructor(e,n){super(`Cannot perform ${e} on collection "${n}" - collection is in error state. Try calling cleanup() and restarting the collection.`)}}class qO extends Wl{constructor(e,n,r){super(`Invalid collection status transition from "${e}" to "${n}" for collection "${r}"`)}}class FO extends Wl{constructor(){super("Collection is in error state")}}class VO extends Wl{constructor(){super("Active subscribers count is negative - this should never happen")}}class Vr extends nr{constructor(e){super(e),this.name="CollectionOperationError"}}class HO extends Vr{constructor(e){super(`An object was created without a defined key: ${JSON.stringify(e)}`)}}class GO extends Vr{constructor(e,n){const r=e===null?"null":typeof e;super(`getKey returned an invalid key type. Expected string or number, but got ${r}: ${JSON.stringify(e)}. Item: ${JSON.stringify(n)}`)}}class KO extends Vr{constructor(e){super(`Cannot insert document with ID "${e}" because it already exists in the collection`)}}class ZO extends Vr{constructor(e,n,r){const s=`Cannot insert document with key "${e}" from sync because it already exists in the collection "${n}"`;r?.hasCustomGetKey&&r.hasJoins?super(`${s}. This collection uses a custom getKey with joined queries. Joined queries can produce multiple rows with the same key when relationships are not 1:1. Consider: (1) using a composite key in your getKey function (e.g., \`\${item.key1}-\${item.key2}\`), (2) ensuring your join produces unique rows per key, or (3) removing the custom getKey to use the default composite key behavior.`):super(s)}}class QO extends Vr{constructor(){super("The first argument to update is missing")}}class JO extends Vr{constructor(){super("No keys were passed to update")}}class YO extends Vr{constructor(e){super(`The key "${e}" was passed to update but an object for this key was not found in the collection`)}}class XO extends Vr{constructor(e,n){super(`Updating the key of an item is not allowed. Original key: "${e}", Attempted new key: "${n}". Please delete the old item and create a new one if a key change is necessary.`)}}class WO extends Vr{constructor(){super("No keys were passed to delete")}}class eN extends Vr{constructor(e){super(`Collection.delete was called with key '${e}' but there is no item in the collection with this key`)}}class hy extends nr{constructor(e){super(e),this.name="MissingHandlerError"}}class tN extends hy{constructor(){super("Collection.insert called directly (not within an explicit transaction) but no 'onInsert' handler is configured.")}}class nN extends hy{constructor(){super("Collection.update called directly (not within an explicit transaction) but no 'onUpdate' handler is configured.")}}class rN extends hy{constructor(){super("Collection.delete called directly (not within an explicit transaction) but no 'onDelete' handler is configured.")}}class Xs extends nr{constructor(e){super(e),this.name="TransactionError"}}class sN extends Xs{constructor(){super("mutationFn is required when creating a transaction")}}class iN extends Xs{constructor(){super("You can no longer call .mutate() as the transaction is no longer pending")}}class aN extends Xs{constructor(){super("You can no longer call .rollback() as the transaction is already completed")}}class oN extends Xs{constructor(){super("You can no longer call .commit() as the transaction is no longer pending")}}class aw extends Xs{constructor(){super("No pending sync transaction to write to")}}class ow extends Xs{constructor(){super("The pending sync transaction is already committed, you can't still write to it.")}}class lN extends Xs{constructor(){super("No pending sync transaction to commit")}}class cN extends Xs{constructor(){super("The pending sync transaction is already committed, you can't commit it again.")}}class Xa extends nr{constructor(e){super(e),this.name="QueryBuilderError"}}class uN extends Xa{constructor(e){super(`Only one source is allowed in the ${e}`)}}class fN extends Xa{constructor(e){super(`A sub query passed to a ${e} must have a from clause itself`)}}class dN extends Xa{constructor(e){super(`Invalid source for live query: The value provided for alias "${e}" is not a Collection or subquery. Live queries only accept Collection instances or subqueries. Please ensure you're passing a valid Collection or QueryBuilder, not a plain array or other data type.`)}}class Cu extends Xa{constructor(e,n){super(`Invalid source for ${e}: Expected an object with a single key-value pair like { alias: collection }. For example: .from({ todos: todosCollection }). Got: ${n}`)}}class hN extends Xa{constructor(){super("Join condition must be an equality expression")}}class pN extends Xa{constructor(){super("Query must have a from clause")}}class rr extends nr{constructor(e){super(e),this.name="QueryCompilationError"}}class mN extends rr{constructor(){super("DISTINCT requires a SELECT clause.")}}class gN extends rr{constructor(){super("HAVING clause requires GROUP BY clause")}}class yN extends rr{constructor(){super("LIMIT and OFFSET require an ORDER BY clause to ensure deterministic results")}}class ck extends rr{constructor(e,n,r){const s=n?`alias "${e}" (collection "${n}")`:`collection "${e}"`,a=r?.length?`. Available keys: ${r.join(", ")}`:"";super(`Input for ${s} not found in inputs map${a}`)}}class bN extends rr{constructor(e,n){super(`Subquery uses alias "${e}" which is already used in the parent query. Each alias must be unique across parent and subquery contexts. Parent query aliases: ${n.join(", ")}. Please rename "${e}" in either the parent query or subquery to avoid conflicts.`)}}class _N extends rr{constructor(e){super(`Unsupported FROM type: ${e}`)}}class vN extends rr{constructor(e){super(`Unknown expression type: ${e}`)}}class xN extends rr{constructor(){super("Reference path cannot be empty")}}class wN extends rr{constructor(e){super(`Unknown function: ${e}`)}}class lw extends rr{constructor(e){super(`Collection "${e}" not found during compilation of join`)}}class zi extends nr{constructor(e){super(e),this.name="JoinError"}}class SN extends zi{constructor(e){super(`Unsupported join type: ${e}`)}}class kN extends zi{constructor(e){super(`Invalid join condition: both expressions refer to the same source "${e}"`)}}class EN extends zi{constructor(){super("Invalid join condition: expressions must reference source aliases")}}class CN extends zi{constructor(e){super(`Invalid join condition: left expression refers to an unavailable source "${e}"`)}}class TN extends zi{constructor(e){super(`Invalid join condition: right expression does not refer to the joined source "${e}"`)}}class AN extends zi{constructor(){super("Invalid join condition")}}class RN extends zi{constructor(e){super(`Unsupported join source type: ${e}`)}}class nd extends nr{constructor(e){super(e),this.name="GroupByError"}}class ON extends nd{constructor(e){super(`Non-aggregate expression '${e}' in SELECT must also appear in GROUP BY clause`)}}class NN extends nd{constructor(e){super(`Unsupported aggregate function: ${e}`)}}class IN extends nd{constructor(e){super(`Aggregate function in HAVING clause must also be in SELECT clause: ${e}`)}}class MN extends nd{constructor(e){super(`Unknown expression type in HAVING clause: ${e}`)}}class cw extends nr{constructor(e,n){const r=n instanceof Error?n.message:String(n);super(`Collection "${e}" sync cleanup function threw an error: ${r}`),this.name="SyncCleanupError"}}class DN extends nr{constructor(e){super(e),this.name="QueryOptimizerError"}}class jN extends DN{constructor(){super("Cannot combine empty expression list")}}class LN extends rr{constructor(e,n,r,s){super(`Internal error: subscription for alias '${e}' (remapped from '${n}', collection '${r}') is missing in join pipeline. Available aliases: ${s.join(", ")}. This indicates a bug in alias tracking.`)}}class zN extends rr{constructor(e){super(`Internal error: compiler returned aliases without inputs: ${e.join(", ")}. This indicates a bug in query compilation. Please report this issue.`)}}class PN extends rr{constructor(){super("setWindow() can only be called on collections with an ORDER BY clause. Add .orderBy() to your query to enable window movement.")}}const Xp=new WeakMap;let BN=1;function uw(t){if(Xp.has(t))return Xp.get(t);const e=BN++;return Xp.set(t,e),e}const py=(t,e,n)=>{const{nulls:r}=n;if(t==null&&e==null)return 0;if(t==null)return r==="first"?-1:1;if(e==null)return r==="first"?1:-1;if(typeof t=="string"&&typeof e=="string"&&n.stringSort==="locale")return t.localeCompare(e,n.locale,n.localeOptions);if(Array.isArray(t)&&Array.isArray(e)){for(let l=0;l<Math.min(t.length,e.length);l++){const u=py(t[l],e[l],n);if(u!==0)return u}return t.length-e.length}if(t instanceof Date&&e instanceof Date)return t.getTime()-e.getTime();const s=typeof t=="object",a=typeof e=="object";if(s||a){if(s&&a){const l=uw(t),u=uw(e);return l-u}if(s)return 1;if(a)return-1}return t<e?-1:t>e?1:0},$N=(t,e,n)=>py(e,t,{...n,nulls:n.nulls==="first"?"last":"first"});function df(t){return(e,n)=>t.direction==="asc"?py(e,n,t):$N(e,n,t)}const Xm=df({direction:"asc",nulls:"first",stringSort:"locale"});function UN(t,e){if(t.byteLength!==e.byteLength)return!1;for(let n=0;n<t.byteLength;n++)if(t[n]!==e[n])return!1;return!0}const qN=128;function gs(t){return t instanceof Date?t.getTime():(typeof Buffer<"u"&&t instanceof Buffer||t instanceof Uint8Array)&&t.byteLength<=qN?`__u8__${Array.from(t).join(",")}`:t}function FN(t,e){if(t===e)return!0;const n=typeof Buffer<"u"&&t instanceof Buffer||t instanceof Uint8Array,r=typeof Buffer<"u"&&e instanceof Buffer||e instanceof Uint8Array;return n&&r?UN(t,e):!1}function Qt(t){return t==null}function Ua(t){return t===!0}function qn(t,e=!1){return gy(t,e)}function my(t){return gy(t,!0)}function gy(t,e){switch(t.type){case"val":{const n=t.value;return()=>n}case"ref":return e?HN(t):VN(t);case"func":return GN(t,e);default:throw new vN(t.type)}}function VN(t){const[e,...n]=t.path;if(!e)throw new xN;if(n.length===0)return r=>r[e];if(n.length===1){const r=n[0];return s=>s[e]?.[r]}else return r=>{const s=r[e];if(s===void 0)return;let a=s;for(const l of n){if(a==null)return a;a=a[l]}return a}}function HN(t){const e=t.path;return n=>{let r=n;for(const s of e){if(r==null)return r;r=r[s]}return r}}function GN(t,e){const n=t.args.map(r=>gy(r,e));switch(t.name){case"eq":{const r=n[0],s=n[1];return a=>{const l=gs(r(a)),u=gs(s(a));return Qt(l)||Qt(u)?null:FN(l,u)}}case"gt":{const r=n[0],s=n[1];return a=>{const l=r(a),u=s(a);return Qt(l)||Qt(u)?null:l>u}}case"gte":{const r=n[0],s=n[1];return a=>{const l=r(a),u=s(a);return Qt(l)||Qt(u)?null:l>=u}}case"lt":{const r=n[0],s=n[1];return a=>{const l=r(a),u=s(a);return Qt(l)||Qt(u)?null:l<u}}case"lte":{const r=n[0],s=n[1];return a=>{const l=r(a),u=s(a);return Qt(l)||Qt(u)?null:l<=u}}case"and":return r=>{let s=!1;for(const a of n){const l=a(r);if(l===!1)return!1;Qt(l)&&(s=!0)}return s?null:!0};case"or":return r=>{let s=!1;for(const a of n){const l=a(r);if(l===!0)return!0;Qt(l)&&(s=!0)}return s?null:!1};case"not":{const r=n[0];return s=>{const a=r(s);return Qt(a)?null:!a}}case"in":{const r=n[0],s=n[1];return a=>{const l=r(a),u=s(a);return Qt(l)?null:Array.isArray(u)?u.includes(l):!1}}case"like":{const r=n[0],s=n[1];return a=>{const l=r(a),u=s(a);return Qt(l)||Qt(u)?null:fw(l,u,!1)}}case"ilike":{const r=n[0],s=n[1];return a=>{const l=r(a),u=s(a);return Qt(l)||Qt(u)?null:fw(l,u,!0)}}case"upper":{const r=n[0];return s=>{const a=r(s);return typeof a=="string"?a.toUpperCase():a}}case"lower":{const r=n[0];return s=>{const a=r(s);return typeof a=="string"?a.toLowerCase():a}}case"length":{const r=n[0];return s=>{const a=r(s);return typeof a=="string"||Array.isArray(a)?a.length:0}}case"concat":return r=>n.map(s=>{const a=s(r);try{return String(a??"")}catch{try{return JSON.stringify(a)||""}catch{return"[object]"}}}).join("");case"coalesce":return r=>{for(const s of n){const a=s(r);if(a!=null)return a}return null};case"add":{const r=n[0],s=n[1];return a=>{const l=r(a),u=s(a);return(l??0)+(u??0)}}case"subtract":{const r=n[0],s=n[1];return a=>{const l=r(a),u=s(a);return(l??0)-(u??0)}}case"multiply":{const r=n[0],s=n[1];return a=>{const l=r(a),u=s(a);return(l??0)*(u??0)}}case"divide":{const r=n[0],s=n[1];return a=>{const l=r(a),f=s(a)??0;return f!==0?(l??0)/f:null}}case"isUndefined":{const r=n[0];return s=>r(s)===void 0}case"isNull":{const r=n[0];return s=>r(s)===null}default:throw new wN(t.name)}}function fw(t,e,n){if(typeof t!="string"||typeof e!="string")return!1;const r=n?t.toLowerCase():t;let a=(n?e.toLowerCase():e).replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return a=a.replace(/%/g,".*"),a=a.replace(/_/g,"."),new RegExp(`^${a}$`).test(r)}function Rr(t,e){return Ku(t,e,new Map)}function Ku(t,e,n){if(t===e)return!0;if(t==null||e==null||typeof t!=typeof e)return!1;if(t instanceof Date)return e instanceof Date?t.getTime()===e.getTime():!1;if(t instanceof RegExp)return e instanceof RegExp?t.source===e.source&&t.flags===e.flags:!1;if(t instanceof Map){if(!(e instanceof Map)||t.size!==e.size)return!1;if(n.has(t))return n.get(t)===e;n.set(t,e);const s=Array.from(t.entries()).every(([a,l])=>e.has(a)&&Ku(l,e.get(a),n));return n.delete(t),s}if(t instanceof Set){if(!(e instanceof Set)||t.size!==e.size)return!1;if(n.has(t))return n.get(t)===e;n.set(t,e);const r=Array.from(t),s=Array.from(e);if(r.every(l=>typeof l!="object"))return n.delete(t),r.every(l=>e.has(l));const a=r.length===s.length;return n.delete(t),a}if(ArrayBuffer.isView(t)&&ArrayBuffer.isView(e)&&!(t instanceof DataView)&&!(e instanceof DataView)){const r=t,s=e;if(r.length!==s.length)return!1;for(let a=0;a<r.length;a++)if(r[a]!==s[a])return!1;return!0}if(hf(t)&&hf(e)){const r=Wm(t),s=Wm(e);return r!==s?!1:typeof t.equals=="function"?t.equals(e):t.toString()===e.toString()}if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;if(n.has(t))return n.get(t)===e;n.set(t,e);const r=t.every((s,a)=>Ku(s,e[a],n));return n.delete(t),r}if(typeof t=="object"){if(n.has(t))return n.get(t)===e;n.set(t,e);const r=Object.keys(t),s=Object.keys(e);if(r.length!==s.length)return n.delete(t),!1;const a=r.every(l=>l in e&&Ku(t[l],e[l],n));return n.delete(t),a}return!1}const KN=["Temporal.Duration","Temporal.Instant","Temporal.PlainDate","Temporal.PlainDateTime","Temporal.PlainMonthDay","Temporal.PlainTime","Temporal.PlainYearMonth","Temporal.ZonedDateTime"];function Wm(t){return t[Symbol.toStringTag]}function hf(t){const e=Wm(t);return typeof e=="string"&&KN.includes(e)}const yy={direction:"asc",nulls:"first",stringSort:"locale"};class ZN{constructor(e){this.originalIndex=e}lookup(e,n){const r=e==="gt"?"lt":e==="gte"?"lte":e==="lt"?"gt":e==="lte"?"gte":e;return this.originalIndex.lookup(r,n)}rangeQuery(e={}){return this.originalIndex.rangeQueryReversed(e)}rangeQueryReversed(e={}){return this.originalIndex.rangeQuery(e)}take(e,n,r){return this.originalIndex.takeReversed(e,n,r)}takeReversed(e,n,r){return this.originalIndex.take(e,n,r)}get orderedEntriesArray(){return this.originalIndex.orderedEntriesArrayReversed}get orderedEntriesArrayReversed(){return this.originalIndex.orderedEntriesArray}supports(e){return this.originalIndex.supports(e)}matchesField(e){return this.originalIndex.matchesField(e)}matchesCompareOptions(e){return this.originalIndex.matchesCompareOptions(e)}matchesDirection(e){return this.originalIndex.matchesDirection(e)}getStats(){return this.originalIndex.getStats()}add(e,n){this.originalIndex.add(e,n)}remove(e,n){this.originalIndex.remove(e,n)}update(e,n,r){this.originalIndex.update(e,n,r)}build(e){this.originalIndex.build(e)}clear(){this.originalIndex.clear()}get keyCount(){return this.originalIndex.keyCount}equalityLookup(e){return this.originalIndex.equalityLookup(e)}inArrayLookup(e){return this.originalIndex.inArrayLookup(e)}get indexedKeysSet(){return this.originalIndex.indexedKeysSet}get valueMapData(){return this.originalIndex.valueMapData}}function ec(t,e,n){const r=n??{...yy,...t.compareOptions};for(const s of t.indexes.values())if(s.matchesField(e)&&s.matchesCompareOptions(r))return s.matchesDirection(r.direction)?s:new ZN(s)}function QN(t){if(t.length===0)return new Set;if(t.length===1)return new Set(t[0]);let e=new Set(t[0]);for(let n=1;n<t.length;n++){const r=new Set;for(const s of e)t[n].has(s)&&r.add(s);e=r}return e}function JN(t){const e=new Set;for(const n of t)for(const r of n)e.add(r);return e}function YN(t,e){return by(t,e)}function by(t,e){if(t.type==="func")switch(t.name){case"eq":case"gt":case"gte":case"lt":case"lte":return WN(t,e);case"and":return eI(t,e);case"or":return tI(t,e);case"in":return nI(t,e)}return{canOptimize:!1,matchingKeys:new Set}}function XN(t,e){if(t.type!=="func"||t.args.length<2)return{canOptimize:!1,matchingKeys:new Set};const n=new Map;for(const r of t.args)if(r.type==="func"&&["gt","gte","lt","lte"].includes(r.name)){const s=r;if(s.args.length===2){const a=s.args[0],l=s.args[1];let u=null,f=null,d=s.name;if(a.type==="ref"&&l.type==="val")u=a,f=l;else if(a.type==="val"&&l.type==="ref")switch(u=l,f=a,d){case"gt":d="lt";break;case"gte":d="lte";break;case"lt":d="gt";break;case"lte":d="gte";break}if(u&&f){const p=u.path.join("."),y=f.value;n.has(p)||n.set(p,[]),n.get(p).push({operation:d,value:y})}}}for(const[r,s]of n)if(s.length>=2){const a=r.split("."),l=ec(e,a);if(l&&l.supports("gt")&&l.supports("lt")){let u,f,d=!0,m=!0;for(const{operation:y,value:g}of s)switch(y){case"gt":(u===void 0||g>u)&&(u=g,d=!1);break;case"gte":(u===void 0||g>u)&&(u=g,d=!0);break;case"lt":(f===void 0||g<f)&&(f=g,m=!1);break;case"lte":(f===void 0||g<f)&&(f=g,m=!0);break}return{canOptimize:!0,matchingKeys:l.rangeQuery({from:u,to:f,fromInclusive:d,toInclusive:m})}}}return{canOptimize:!1,matchingKeys:new Set}}function WN(t,e){if(t.type!=="func"||t.args.length!==2)return{canOptimize:!1,matchingKeys:new Set};const n=t.args[0],r=t.args[1];let s=null,a=null,l=t.name;if(n.type==="ref"&&r.type==="val")s=n,a=r;else if(n.type==="val"&&r.type==="ref")switch(s=r,a=n,l){case"gt":l="lt";break;case"gte":l="lte";break;case"lt":l="gt";break;case"lte":l="gte";break}if(s&&a){const u=s.path,f=ec(e,u);if(f){const d=a.value,m=l;return f.supports(m)?{canOptimize:!0,matchingKeys:f.lookup(m,d)}:{canOptimize:!1,matchingKeys:new Set}}}return{canOptimize:!1,matchingKeys:new Set}}function eI(t,e){if(t.type!=="func"||t.args.length<2)return{canOptimize:!1,matchingKeys:new Set};const n=XN(t,e);if(n.canOptimize)return n;const r=[];for(const s of t.args){const a=by(s,e);a.canOptimize&&r.push(a)}if(r.length>0){const s=r.map(l=>l.matchingKeys);return{canOptimize:!0,matchingKeys:QN(s)}}return{canOptimize:!1,matchingKeys:new Set}}function tI(t,e){if(t.type!=="func"||t.args.length<2)return{canOptimize:!1,matchingKeys:new Set};const n=[];for(const r of t.args){const s=by(r,e);s.canOptimize&&n.push(s)}if(n.length>0){const r=n.map(a=>a.matchingKeys);return{canOptimize:!0,matchingKeys:JN(r)}}return{canOptimize:!1,matchingKeys:new Set}}function nI(t,e){if(t.type!=="func"||t.args.length!==2)return{canOptimize:!1,matchingKeys:new Set};const n=t.args[0],r=t.args[1];if(n.type==="ref"&&r.type==="val"&&Array.isArray(r.value)){const s=n.path,a=r.value,l=ec(e,s);if(l){if(l.supports("in"))return{canOptimize:!0,matchingKeys:l.lookup("in",a)};if(l.supports("eq")){const u=new Set;for(const f of a){const d=l.lookup("eq",f);for(const m of d)u.add(m)}return{canOptimize:!0,matchingKeys:u}}}}return{canOptimize:!1,matchingKeys:new Set}}class rI extends Map{constructor(e,n){super(n),this.defaultValue=e}get(e){return this.has(e)?super.get(e):this.defaultValue()}update(e,n){const r=this.get(e),s=n(r);return this.set(e,s),s}}const Wp=3e4;function em(t,e){if(e.length<=Wp)t.push(...e);else for(let n=0;n<e.length;n+=Wp){const r=e.slice(n,n+Wp);t.push(...r)}}function sI(t,e,n){let r=0,s=t.length;for(;r<s;){const a=Math.floor((r+s)/2),l=n(t[a],e);if(l<0)r=a+1;else if(l>0)s=a;else return a}return r}class iI{constructor(){this.objectIds=new WeakMap,this.nextId=0}getId(e){if(typeof e!="object"||e===null){const n=String(e);let r=0;for(let s=0;s<n.length;s++){const a=n.charCodeAt(s);r=(r<<5)-r+a,r=r&r}return r}return this.objectIds.has(e)||this.objectIds.set(e,this.nextId++),this.objectIds.get(e)}getStringId(e){return e===null?"null":e===void 0?"undefined":typeof e!="object"?`str_${String(e)}`:`obj_${this.getId(e)}`}}const tm=new iI;function aI(t,e){const[n,r]=t,[s,a]=e,l=[...Tu(n,Math.min(r,s)),...Tu(Math.max(n,a),r)],u=[...Tu(s,Math.min(a,n)),...Tu(Math.max(s,r),a)];return{onlyInA:l,onlyInB:u}}function Tu(t,e){const n=[];for(let r=t;r<e;r++)n.push(r);return n}function pf(t,e){return typeof t==typeof e?t<e?-1:t>e?1:0:typeof t=="string"?-1:1}const oI=fn(),lI=fn(),cI=fn(),uI=fn(),fI=fn();function fn(){return Math.random()*(2**31-1)>>>0}const uk=new ArrayBuffer(8),dI=new DataView(uk),Vs=new Uint8Array(uk);class rd{constructor(){this.hash=oI,this.length=0,this.carry=0,this.carryBytes=0}_mix(e){e=Math.imul(e,3432918353),e=e<<15|e>>>17,e=Math.imul(e,461845907),this.hash^=e,this.hash=this.hash<<13|this.hash>>>19,this.hash=Math.imul(this.hash,5)+3864292196}writeByte(e){this.carry|=(e&255)<<8*this.carryBytes,this.carryBytes++,this.length++,this.carryBytes===4&&(this._mix(this.carry>>>0),this.carry=0,this.carryBytes=0)}update(e){switch(typeof e){case"symbol":{this.update(fI);const n=e.description;if(!n)return;for(let r=0;r<n.length;r++){const s=n.charCodeAt(r);this.writeByte(s&255),this.writeByte(s>>>8&255)}return}case"string":this.update(lI);for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);this.writeByte(r&255),this.writeByte(r>>>8&255)}return;case"number":dI.setFloat64(0,e,!0),this.writeByte(Vs[0]),this.writeByte(Vs[1]),this.writeByte(Vs[2]),this.writeByte(Vs[3]),this.writeByte(Vs[4]),this.writeByte(Vs[5]),this.writeByte(Vs[6]),this.writeByte(Vs[7]);return;case"bigint":{let n=e;for(n<0n?(n=-n,this.update(uI)):this.update(cI);n>0n;)this.writeByte(Number(n&0xffn)),n>>=8n;e===0n&&this.writeByte(0);return}default:throw new TypeError(`Unsupported input type: ${typeof e}`)}}digest(){if(this.carryBytes>0){let e=this.carry>>>0;e=Math.imul(e,3432918353),e=e<<15|e>>>17,e=Math.imul(e,461845907),this.hash^=e}return this.hash^=this.length,this.hash^=this.hash>>>16,this.hash=Math.imul(this.hash,2246822507),this.hash^=this.hash>>>13,this.hash=Math.imul(this.hash,3266489909),this.hash^=this.hash>>>16,this.hash>>>0}}const hI=fn(),pI=fn(),mI=fn(),gI=fn(),yI=fn(),bI=fn(),_I=fn(),vI=fn(),xI=fn(),wI=fn(),SI=fn(),kI=fn(),EI=128,Pl=new WeakMap;function Tn(t){const e=new rd;return fk(e,t),e.digest()}function CI(t){const e=Pl.get(t);if(e!==void 0)return e;let n;if(t instanceof Date)n=TI(t);else if(typeof Buffer<"u"&&t instanceof Buffer||t instanceof Uint8Array)if(t.byteLength<=EI)n=AI(t);else return eg(t);else{if(t instanceof File)return eg(t);{let r=t,s=vI;t instanceof Array&&(s=xI),t instanceof Map&&(s=wI,r=[...t.entries()]),t instanceof Set&&(s=SI,r=[...t.entries()]),n=RI(r,s)}}return Pl.set(t,n),n}function TI(t){const e=new rd;return e.update(_I),e.update(t.getTime()),e.digest()}function AI(t){const e=new rd;e.update(kI),e.update(t.byteLength);for(let n=0;n<t.byteLength;n++)e.writeByte(t[n]);return e.digest()}function RI(t,e){const n=new rd;n.update(e);const r=Object.keys(t);r.sort(NI);for(const s of r)n.update(yI),n.update(s),fk(n,t[s]);return n.digest()}function fk(t,e){if(e===null){t.update(mI);return}switch(typeof e){case"undefined":t.update(gI);return;case"boolean":t.update(e?hI:pI);return;case"number":t.update(isNaN(e)?NaN:e===0?0:e);return;case"bigint":case"string":case"symbol":t.update(e);return;case"object":t.update(OI(e));return;case"function":t.update(eg(e));return;default:console.warn(`Ignored input during hashing because it is of type ${typeof e} which is not supported`)}}function OI(t){let e=Pl.get(t);return e===void 0&&(e=CI(t)),e}let dw=1;function eg(t){let e=Pl.get(t);return e===void 0&&(e=dw^bI,dw++,Pl.set(t,e)),e}function NI(t,e){return t.localeCompare(e)}class qt{#e;constructor(e=[]){this.#e=e}toString(e=!1){return`MultiSet(${JSON.stringify(this.#e,null,e?2:void 0)})`}toJSON(){return JSON.stringify(Array.from(this.getInner()))}static fromJSON(e){return new qt(JSON.parse(e))}map(e){return new qt(this.#e.map(([n,r])=>[e(n),r]))}filter(e){return new qt(this.#e.filter(([n,r])=>e(n)))}negate(){return new qt(this.#e.map(([e,n])=>[e,-n]))}concat(e){const n=[];return em(n,this.#e),em(n,e.getInner()),new qt(n)}consolidate(){if(this.#e.length>0){const e=this.#e[0]?.[0];if(Array.isArray(e)&&e.length===2)return this.#t()}return this.#n()}#t(){const e=new Map,n=new Map,r=a=>{if(a.length!==2)throw new Error("Expected tuple of length 2");const[l,u]=a;return`${tm.getStringId(l)}|${tm.getStringId(u)}`};for(const[a,l]of this.#e){if(!Array.isArray(a)||a.length!==2)return this.#n();const[u,f]=a;if(typeof u!="string"&&typeof u!="number")return this.#n();let d;Array.isArray(f)&&f.length===2?d=r(f):d=tm.getStringId(f);const m=u+"|"+d;e.set(m,(e.get(m)||0)+l),n.has(m)||n.set(m,a)}const s=[];for(const[a,l]of e)l!==0&&s.push([n.get(a),l]);return new qt(s)}#n(){const e=new rI(()=>0),n=new Map;let r=!1,s=!1,a=!1;for(const[f,d]of this.#e)if(typeof f=="string")r=!0;else if(typeof f=="number")s=!0;else{a=!0;break}const l=a||r&&s;for(const[f,d]of this.#e){const m=l?Tn(f):f;l&&!n.has(m)&&n.set(m,f),e.update(m,p=>p+d)}const u=[];for(const[f,d]of e.entries())if(d!==0){const m=l?n.get(f):f;u.push([m,d])}return new qt(u)}extend(e){const n=e instanceof qt?e.getInner():e;em(this.#e,n)}add(e,n){n!==0&&this.#e.push([e,n])}getInner(){return this.#e}}class II{#e;constructor(e){this.#e=e}drain(){const e=[...this.#e].reverse();return this.#e.length=0,e}isEmpty(){return this.#e.length===0}}class Hr{#e=[];sendData(e){e instanceof qt||(e=new qt(e));for(const n of this.#e)n.unshift(e)}newReader(){const e=[];return this.#e.push(e),new II(e)}}class dk{constructor(e,n,r){this.id=e,this.inputs=n,this.output=r}hasPendingWork(){return this.inputs.some(e=>!e.isEmpty())}}class Wa extends dk{constructor(e,n,r){super(e,[n],r),this.id=e}inputMessages(){return this.inputs[0].drain()}}class MI extends dk{constructor(e,n,r,s){super(e,[n,r],s),this.id=e}inputAMessages(){return this.inputs[0].drain()}inputBMessages(){return this.inputs[1].drain()}}class _y extends Wa{run(){for(const e of this.inputMessages())this.output.sendData(this.inner(e))}}class DI{#e=[];#t=0;#n=!1;constructor(){}#r(){if(this.#n)throw new Error("Graph already finalized")}getNextOperatorId(){return this.#r(),this.#t++}newInput(){this.#r();const e=new Hr;return new jI(this,e)}addOperator(e){this.#r(),this.#e.push(e)}finalize(){this.#r(),this.#n=!0}step(){if(!this.#n)throw new Error("Graph not finalized");for(const e of this.#e)e.run()}pendingWork(){return this.#e.some(e=>e.hasPendingWork())}run(){for(;this.pendingWork();)this.step()}}class Gr{#e;#t;constructor(e,n){this.#e=e,this.#t=n}connectReader(){return this.#t.newReader()}get writer(){return this.#t}get graph(){return this.#e}pipe(...e){return e.reduce((n,r)=>r(n),this)}}class jI extends Gr{sendData(e){this.writer.sendData(e)}}class LI extends _y{#e;constructor(e,n,r,s){super(e,n,r),this.#e=s}inner(e){return e.map(this.#e)}}function An(t){return e=>{const n=new Gr(e.graph,new Hr),r=new LI(e.graph.getNextOperatorId(),e.connectReader(),n.writer,t);return e.graph.addOperator(r),n}}const ll=Symbol("NO_PREFIX");class hw extends Map{addValue(e,n){if(n===0)return this.size===0;const r=Sl(e),s=this.get(r);if(Zu(s)){const[a,l]=s;if(Sl(a)!==r)throw new Error("Mismatching prefixes, this should never happen");if(a===e||Tn(a)===Tn(e)){const f=l+n;f===0?this.delete(r):this.set(r,[e,f])}else{const f=new cl;f.set(Tn(a),s),f.set(Tn(e),[e,n]),this.set(r,f)}}else s===void 0?this.set(r,[e,n]):s.addValue(e,n)&&this.delete(r);return this.size===0}}class cl extends Map{addValue(e,n){if(n===0)return this.size===0;const r=Tn(e),s=this.get(r);if(s){const[,a]=s,l=a+n;l===0?this.delete(r):this.set(r,[e,l])}else this.set(r,[e,n]);return this.size===0}}class Zs{#e;#t=new Map;constructor(){this.#e=new Map}static fromMultiSets(e){const n=new Zs;for(const r of e)for(const[s,a]of r.getInner()){const[l,u]=s;n.addValue(l,[u,a])}return n}toString(e=!1){return`Index(${JSON.stringify([...this.entries()],void 0,e?2:void 0)})`}get size(){return this.#e.size}has(e){return this.#e.has(e)}hasPresence(e){return(this.#t.get(e)||0)!==0}getConsolidatedMultiplicity(e){return this.#t.get(e)||0}getPresenceKeys(){return this.#t.keys()}get(e){return[...this.getIterator(e)]}*getIterator(e){const n=this.#e.get(e);if(Zu(n))yield n;else{if(n===void 0)return;if(n instanceof cl)for(const r of n.values())yield r;else for(const r of n.values())if(Zu(r))yield r;else for(const s of r.values())yield s}}*entries(){for(const e of this.#e.keys())for(const n of this.getIterator(e))yield[e,n]}*entriesIterators(){for(const e of this.#e.keys())yield[e,this.getIterator(e)]}addValue(e,n){const[r,s]=n;if(s===0)return;const a=(this.#t.get(e)||0)+s;a===0?this.#t.delete(e):this.#t.set(e,a);const l=this.#e.get(e);if(l===void 0){this.#e.set(e,n);return}if(Zu(l)){this.#n(e,l,r,s);return}if(l instanceof cl){const u=Sl(r);if(u!==ll){const f=new hw;f.set(ll,l),f.set(u,n),this.#e.set(e,f)}else l.addValue(r,s)&&this.#e.delete(e)}else l.addValue(r,s)&&this.#e.delete(e)}#n(e,n,r,s){const[a,l]=n;if(a===r){const d=l+s;d===0?this.#e.delete(e):this.#e.set(e,[r,d]);return}const u=Sl(r),f=Sl(a);if(f===u&&(a===r||Tn(a)===Tn(r))){const d=l+s;d===0?this.#e.delete(e):this.#e.set(e,[r,d]);return}if(f===ll&&u===ll){const d=new cl;d.set(Tn(a),n),d.set(Tn(r),[r,s]),this.#e.set(e,d)}else{const d=new hw;if(f===u){const m=new cl;m.set(Tn(a),n),m.set(Tn(r),[r,s]),d.set(f,m)}else d.set(f,n),d.set(u,[r,s]);this.#e.set(e,d)}}append(e){for(const[n,r]of e.entries())this.addValue(n,r)}join(e){const n=[];if(this.size<=e.size)for(const[r,s]of this.entriesIterators()){if(!e.has(r))continue;const a=e.get(r);for(const[l,u]of s)for(const[f,d]of a)u!==0&&d!==0&&n.push([[r,[l,f]],u*d])}else for(const[r,s]of e.entriesIterators()){if(!this.has(r))continue;const a=this.get(r);for(const[l,u]of s)for(const[f,d]of a)d!==0&&u!==0&&n.push([[r,[f,l]],d*u])}return new qt(n)}}function Sl(t){return Array.isArray(t)&&(typeof t[0]=="string"||typeof t[0]=="number"||typeof t[0]=="bigint")?t[0]:ll}function Zu(t){return Array.isArray(t)}class zI extends Wa{#e=new Zs;#t=new Zs;#n;constructor(e,n,r,s){super(e,n,r),this.#n=s}run(){const e=new Set;for(const r of this.inputMessages())for(const[s,a]of r.getInner()){const[l,u]=s;this.#e.addValue(l,[u,a]),e.add(l)}const n=[];for(const r of e){const s=this.#e.get(r),a=this.#t.get(r),l=this.#n(s),u=new Map,f=new Map;for(const[d,m]of l){const p=u.get(d)??0;u.set(d,p+m)}for(const[d,m]of a){const p=f.get(d)??0;f.set(d,p+m)}for(const[d,m]of f)u.has(d)||(n.push([[r,d],-m]),this.#t.addValue(r,[d,-m]));for(const[d,m]of u)f.has(d)||m!==0&&(n.push([[r,d],m]),this.#t.addValue(r,[d,m]));for(const[d,m]of u){const p=f.get(d);if(p!==void 0){const y=m-p;y!==0&&(n.push([[r,d],y]),this.#t.addValue(r,[d,y]))}}}n.length>0&&this.output.sendData(new qt(n))}}function PI(t){return e=>{const n=new Gr(e.graph,new Hr),r=new zI(e.graph.getNextOperatorId(),e.connectReader(),n.writer,t);return e.graph.addOperator(r),n}}function pw(t){return"pipe"in t}function mw(t,e={}){const n=Object.fromEntries(Object.entries(e).filter(([r,s])=>!pw(s)));return Object.fromEntries(Object.entries(e).filter(([r,s])=>pw(s))),r=>{const s="__original_key__";return r.pipe(An(u=>{const f=t(u),d=JSON.stringify(f),m={};m[s]=f;for(const[p,y]of Object.entries(n))m[p]=y.preMap(u);return[d,m]})).pipe(PI(u=>{let f=0;for(const[p,y]of u)f+=y;if(f<=0)return[];const d={},m=u[0]?.[0]?.[s];d[s]=m;for(const[p,y]of Object.entries(n)){const g=u.map(([v,x])=>[v[p],x]);d[p]=y.reduce(g)}return[[d,1]]})).pipe(An(([u,f])=>{const d=f[s],m={};Object.assign(m,d);for(const[p,y]of Object.entries(n))y.postMap?m[p]=y.postMap(f[p]):m[p]=f[p];return[u,m]}))}}function BI(t=e=>e){return{preMap:e=>t(e),reduce:e=>{let n=0;for(const[r,s]of e)n+=r*s;return n}}}function $I(t=e=>e){return{preMap:e=>t(e)==null?0:1,reduce:e=>{let n=0;for(const[r,s]of e)n+=r*s;return n}}}function UI(t=e=>e){return{preMap:e=>({sum:t(e),count:0}),reduce:e=>{let n=0,r=0;for(const[s,a]of e)n+=s.sum*a,r+=a;return{sum:n,count:r}},postMap:e=>e.sum/e.count}}function qI(t){const e=t??(n=>n);return{preMap:n=>e(n),reduce:n=>{let r;for(const[s,a]of n)(!r||s&&s<r)&&(r=s);return r}}}function FI(t){const e=t??(n=>n);return{preMap:n=>e(n),reduce:n=>{let r;for(const[s,a]of n)(!r||s&&s>r)&&(r=s);return r}}}const VI={sum:BI,count:$I,avg:UI,min:qI,max:FI};class HI extends _y{#e;constructor(e,n,r,s){super(e,n,r),this.#e=s}inner(e){return this.#e(e),e}}function GI(t){return e=>{const n=new Gr(e.graph,new Hr),r=new HI(e.graph.getNextOperatorId(),e.connectReader(),n.writer,t);return e.graph.addOperator(r),n}}class KI extends _y{#e;constructor(e,n,r,s){super(e,n,r),this.#e=s}inner(e){return e.filter(this.#e)}}function Qs(t){return e=>{const n=new Gr(e.graph,new Hr),r=new KI(e.graph.getNextOperatorId(),e.connectReader(),n.writer,t);return e.graph.addOperator(r),n}}class ZI extends Wa{#e;constructor(e,n,r,s){super(e,n,r),this.#e=s}run(){for(const e of this.inputMessages())this.#e(e),this.output.sendData(e)}}function QI(t){return e=>{const n=new Gr(e.graph,new Hr),r=new ZI(e.graph.getNextOperatorId(),e.connectReader(),n.writer,t);return e.graph.addOperator(r),n}}class JI extends Wa{run(){const e=this.inputMessages();if(e.length===0)return;const n=new qt;for(const s of e)n.extend(s);const r=n.consolidate();r.getInner().length>0&&this.output.sendData(r)}}function YI(){return t=>{const e=new Gr(t.graph,new Hr),n=new JI(t.graph.getNextOperatorId(),t.connectReader(),e.writer);return t.graph.addOperator(n),e}}class XI extends MI{#e=new Zs;#t=new Zs;#n;constructor(e,n,r,s,a="inner"){super(e,n,r,s),this.#n=a}run(){const e=Zs.fromMultiSets(this.inputAMessages()),n=Zs.fromMultiSets(this.inputBMessages());if(e.size===0&&n.size===0)return;const r=new qt;this.#n!=="anti"&&this.emitInnerResults(e,n,r),(this.#n==="left"||this.#n==="full"||this.#n==="anti")&&this.emitLeftOuterResults(e,n,r),(this.#n==="right"||this.#n==="full")&&this.emitRightOuterResults(e,n,r),this.#e.append(e),this.#t.append(n),r.getInner().length>0&&this.output.sendData(r)}emitInnerResults(e,n,r){e.size>0&&r.extend(e.join(this.#t)),n.size>0&&r.extend(this.#e.join(n)),e.size>0&&n.size>0&&r.extend(e.join(n))}emitLeftOuterResults(e,n,r){if(e.size>0)for(const[s,a]of e.entriesIterators()){const l=this.#t.getConsolidatedMultiplicity(s),u=n.getConsolidatedMultiplicity(s);if(l+u===0)for(const[d,m]of a)m!==0&&r.add([s,[d,null]],m)}if(n.size>0)for(const s of n.getPresenceKeys()){const a=this.#t.getConsolidatedMultiplicity(s),l=n.getConsolidatedMultiplicity(s);if(l===0)continue;const u=a+l;if(a===0==(u===0))continue;const f=a===0;for(const[d,m]of this.#e.getIterator(s))m!==0&&r.add([s,[d,null]],f?-m:+m)}}emitRightOuterResults(e,n,r){if(n.size>0)for(const[s,a]of n.entriesIterators()){const l=this.#e.getConsolidatedMultiplicity(s),u=e.getConsolidatedMultiplicity(s);if(l+u===0)for(const[d,m]of a)m!==0&&r.add([s,[null,d]],m)}if(e.size>0)for(const s of e.getPresenceKeys()){const a=this.#e.getConsolidatedMultiplicity(s),l=e.getConsolidatedMultiplicity(s);if(l===0)continue;const u=a+l;if(a===0==(u===0))continue;const f=a===0;for(const[d,m]of this.#t.getIterator(s))m!==0&&r.add([s,[null,d]],f?-m:+m)}}}function WI(t,e="inner"){return n=>{if(n.graph!==t.graph)throw new Error("Cannot join streams from different graphs");const r=new Gr(n.graph,new Hr),s=new XI(n.graph.getNextOperatorId(),n.connectReader(),t.connectReader(),r.writer,e);return n.graph.addOperator(s),r}}class eM extends Wa{#e;#t;constructor(e,n,r,s=a=>a){super(e,n,r),this.#e=s,this.#t=new Map}run(){const e=new Map;for(const r of this.inputMessages())for(const[s,a]of r.getInner()){const l=Tn(this.#e(s)),f=(e.get(l)?.[0]??this.#t.get(l)??0)+a;e.set(l,[f,s])}const n=[];for(const[r,[s,a]]of e.entries()){const l=this.#t.get(r)??0;s===0?this.#t.delete(r):this.#t.set(r,s),l<=0&&s>0?n.push([[Tn(this.#e(a)),a[1]],1]):l>0&&s<=0&&n.push([[Tn(this.#e(a)),a[1]],-1])}n.length>0&&this.output.sendData(new qt(n))}}function tM(t=e=>e){return e=>{const n=new Gr(e.graph,new Hr),r=new eM(e.graph.getNextOperatorId(),e.connectReader(),n.writer,t);return e.graph.addOperator(r),n}}const nM="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function ja(t,e,n){const r=n[0];if(e!=null&&t>=e)throw new Error(t+" >= "+e);if(t.slice(-1)===r||e&&e.slice(-1)===r)throw new Error("trailing zero");if(e){let l=0;for(;(t[l]||r)===e[l];)l++;if(l>0)return e.slice(0,l)+ja(t.slice(l),e.slice(l),n)}const s=t?n.indexOf(t[0]):0,a=e!=null?n.indexOf(e[0]):n.length;if(a-s>1){const l=Math.round(.5*(s+a));return n[l]}else return e&&e.length>1?e.slice(0,1):n[s]+ja(t.slice(1),null,n)}function hk(t){if(t.length!==pk(t[0]))throw new Error("invalid integer part of order key: "+t)}function pk(t){if(t>="a"&&t<="z")return t.charCodeAt(0)-97+2;if(t>="A"&&t<="Z")return 90-t.charCodeAt(0)+2;throw new Error("invalid order key head: "+t)}function ul(t){const e=pk(t[0]);if(e>t.length)throw new Error("invalid order key: "+t);return t.slice(0,e)}function gw(t,e){if(t==="A"+e[0].repeat(26))throw new Error("invalid order key: "+t);const n=ul(t);if(t.slice(n.length).slice(-1)===e[0])throw new Error("invalid order key: "+t)}function yw(t,e){hk(t);const[n,...r]=t.split("");let s=!0;for(let a=r.length-1;s&&a>=0;a--){const l=e.indexOf(r[a])+1;l===e.length?r[a]=e[0]:(r[a]=e[l],s=!1)}if(s){if(n==="Z")return"a"+e[0];if(n==="z")return null;const a=String.fromCharCode(n.charCodeAt(0)+1);return a>"a"?r.push(e[0]):r.pop(),a+r.join("")}else return n+r.join("")}function rM(t,e){hk(t);const[n,...r]=t.split("");let s=!0;for(let a=r.length-1;s&&a>=0;a--){const l=e.indexOf(r[a])-1;l===-1?r[a]=e.slice(-1):(r[a]=e[l],s=!1)}if(s){if(n==="a")return"Z"+e.slice(-1);if(n==="A")return null;const a=String.fromCharCode(n.charCodeAt(0)-1);return a<"Z"?r.push(e.slice(-1)):r.pop(),a+r.join("")}else return n+r.join("")}function sM(t,e,n=nM){if(t!=null&&gw(t,n),e!=null&&gw(e,n),t!=null&&e!=null&&t>=e)throw new Error(t+" >= "+e);if(t==null){if(e==null)return"a"+n[0];const f=ul(e),d=e.slice(f.length);if(f==="A"+n[0].repeat(26))return f+ja("",d,n);if(f<e)return f;const m=rM(f,n);if(m==null)throw new Error("cannot decrement any more");return m}if(e==null){const f=ul(t),d=t.slice(f.length),m=yw(f,n);return m??f+ja(d,null,n)}const r=ul(t),s=t.slice(r.length),a=ul(e),l=e.slice(a.length);if(r===a)return r+ja(s,l,n);const u=yw(r,n);if(u==null)throw new Error("cannot increment any more");return u<e?u:r+ja(s,null,n)}class bw{#e=[];#t;#n;#r;constructor(e,n,r){this.#n=e,this.#r=e+n,this.#t=r}get size(){const e=this.#n,n=this.#r-this.#n,r=this.#e.length-e;return Math.max(0,Math.min(n,r))}move({offset:e,limit:n}){const r=this.#n,s=this.#r-this.#n,a=[this.#n,this.#r===1/0?this.#n+this.size:this.#r];this.#n=e??r,this.#r=this.#n+(n??s);const l=[this.#n,this.#r===1/0?Math.max(this.#n+this.size,a[1]):this.#r],{onlyInA:u,onlyInB:f}=aI(a,l),d=[];f.forEach(p=>{const y=this.#e[p];y&&d.push(y)});const m=[];return u.forEach(p=>{const y=this.#e[p];y&&m.push(y)}),{moveIns:d,moveOuts:m,changes:u.length+f.length>0}}insert(e){const n={moveIn:null,moveOut:null},r=this.#s(e),s=r===0?null:xw(this.#e[r-1]),a=r===this.#e.length?null:xw(this.#e[r]),l=sM(s,a),u=_w(e,l);if(this.#e.splice(r,0,u),r<this.#r){const f=Math.max(r,this.#n);f<this.#e.length&&(n.moveIn=this.#e[f],this.#r<this.#e.length&&(n.moveOut=this.#e[this.#r]))}return n}delete(e){const n={moveIn:null,moveOut:null},r=this.#s(e),[s]=this.#e.splice(r,1);if(r<this.#r){if(n.moveOut=s,r<this.#n){const l=this.#n-1;l<this.#e.length?n.moveOut=this.#e[l]:n.moveOut=null}const a=this.#r-1;a<this.#e.length&&(n.moveIn=this.#e[a])}return n}#s(e){return sI(this.#e,_w(e,""),(n,r)=>this.#t(vw(n),vw(r)))}}class iM extends Wa{#e=new Map;#t;constructor(e,n,r,s,a){super(e,n,r);const l=a.limit??1/0,u=a.offset??0;this.#t=this.createTopK(u,l,oM(s)),a.setSizeCallback?.(()=>this.#t.size),a.setWindowFn?.(this.moveTopK.bind(this))}createTopK(e,n,r){return new bw(e,n,r)}moveTopK({offset:e,limit:n}){if(!(this.#t instanceof bw))throw new Error("Cannot move B+-tree implementation of TopK with fractional index");const r=[],s=this.#t.move({offset:e,limit:n});s.moveIns.forEach(a=>this.handleMoveIn(a,r)),s.moveOuts.forEach(a=>this.handleMoveOut(a,r)),s.changes&&this.output.sendData(new qt(r))}run(){const e=[];for(const n of this.inputMessages())for(const[r,s]of n.getInner()){const[a,l]=r;this.processElement(a,l,s,e)}e.length>0&&this.output.sendData(new qt(e))}processElement(e,n,r,s){const{oldMultiplicity:a,newMultiplicity:l}=this.addKey(e,r);let u={moveIn:null,moveOut:null};a<=0&&l>0?u=this.#t.insert([e,n]):a>0&&l<=0&&(u=this.#t.delete([e,n])),this.handleMoveIn(u.moveIn,s),this.handleMoveOut(u.moveOut,s)}handleMoveIn(e,n){if(e){const[[r,s],a]=e;n.push([[r,[s,a]],1])}}handleMoveOut(e,n){if(e){const[[r,s],a]=e;n.push([[r,[s,a]],-1])}}getMultiplicity(e){return this.#e.get(e)??0}addKey(e,n){const r=this.getMultiplicity(e),s=r+n;return s===0?this.#e.delete(e):this.#e.set(e,s),{oldMultiplicity:r,newMultiplicity:s}}}function aM(t,e){const n=e||{};return r=>{const s=new Gr(r.graph,new Hr),a=new iM(r.graph.getNextOperatorId(),r.connectReader(),s.writer,t,n);return r.graph.addOperator(a),s}}function _w(t,e){return[t,e]}function vw(t){return t[0]}function xw(t){return t[1]}function oM(t){return([e,n],[r,s])=>{const a=t(n,s);return a!==0?a:pf(e,r)}}function lM(t,e,n){const r=n?.limit??1/0,s=n?.offset??0,a=n?.setSizeCallback,l=n?.setWindowFn,u=n?.comparator??((f,d)=>f===d?0:f<d?-1:1);return f=>f.pipe(t((d,m)=>u(e(d),e(m)),{limit:r,offset:s,setSizeCallback:a,setWindowFn:l}),YI())}function cM(t,e){return lM(aM,t,e)}class uM{constructor(e,n,r){this._root=nm,this._size=0,this._maxNodeSize=r>=4?Math.min(r,256):32,this._compare=e,n&&this.setPairs(n)}get size(){return this._size}get length(){return this._size}get isEmpty(){return this._size===0}clear(){this._root=nm,this._size=0}get(e,n){return this._root.get(e,n,this)}set(e,n,r){this._root.isShared&&(this._root=this._root.clone());const s=this._root.set(e,n,r,this);return s===!0||s===!1?s:(this._root=new vy([this._root,s]),!0)}has(e){return this.forRange(e,e,!0,void 0)!==0}delete(e){return this.editRange(e,e,!0,dM)!==0}get maxNodeSize(){return this._maxNodeSize}minKey(){return this._root.minKey()}maxKey(){return this._root.maxKey()}keysArray(){const e=[];return this._root.forRange(this.minKey(),this.maxKey(),!0,!1,this,0,(n,r)=>{e.push(n)}),e}nextHigherPair(e,n){return n=n||[],e===void 0?this._root.minPair(n):this._root.getPairOrNextHigher(e,this._compare,!1,n)}nextHigherKey(e){const n=this.nextHigherPair(e,ww);return n&&n[0]}nextLowerPair(e,n){return n=n||[],e===void 0?this._root.maxPair(n):this._root.getPairOrNextLower(e,this._compare,!1,n)}nextLowerKey(e){const n=this.nextLowerPair(e,ww);return n&&n[0]}setPairs(e,n){let r=0;for(const s of e)this.set(s[0],s[1],n)&&r++;return r}forRange(e,n,r,s,a){const l=this._root.forRange(e,n,r,!1,this,a||0,s);return typeof l=="number"?l:l.break}editRange(e,n,r,s,a){let l=this._root;l.isShared&&(this._root=l=l.clone());try{const u=l.forRange(e,n,r,!0,this,a||0,s);return typeof u=="number"?u:u.break}finally{let u;for(;l.keys.length<=1&&!l.isLeaf;)u||=l.isShared,this._root=l=l.keys.length===0?nm:l.children[0];u&&(l.isShared=!0)}}}class Bl{get isLeaf(){return this.children===void 0}constructor(e=[],n){this.keys=e,this.values=n||gn,this.isShared=void 0}maxKey(){return this.keys[this.keys.length-1]}indexOf(e,n,r){const s=this.keys;let a=0,l=s.length,u=l>>1;for(;a<l;){const f=r(s[u],e);if(f<0)a=u+1;else if(f>0)l=u;else{if(f===0)return u;if(e===e)return s.length;throw new Error("BTree: NaN was used as a key")}u=a+l>>1}return u^n}minKey(){return this.keys[0]}minPair(e){if(this.keys.length!==0)return e[0]=this.keys[0],e[1]=this.values[0],e}maxPair(e){if(this.keys.length===0)return;const n=this.keys.length-1;return e[0]=this.keys[n],e[1]=this.values[n],e}clone(){const e=this.values;return new Bl(this.keys.slice(0),e===gn?e:e.slice(0))}get(e,n,r){const s=this.indexOf(e,-1,r._compare);return s<0?n:this.values[s]}getPairOrNextLower(e,n,r,s){const a=this.indexOf(e,-1,n),l=a<0?~a-1:r?a:a-1;if(l>=0)return s[0]=this.keys[l],s[1]=this.values[l],s}getPairOrNextHigher(e,n,r,s){const a=this.indexOf(e,-1,n),l=a<0?~a:r?a:a+1,u=this.keys;if(l<u.length)return s[0]=u[l],s[1]=this.values[l],s}set(e,n,r,s){let a=this.indexOf(e,-1,s._compare);if(a<0){if(a=~a,s._size++,this.keys.length<s._maxNodeSize)return this.insertInLeaf(a,e,n,s);{const l=this.splitOffRightSide();let u=this;return a>this.keys.length&&(a-=this.keys.length,u=l),u.insertInLeaf(a,e,n,s),l}}else return r!==!1&&(n!==void 0&&this.reifyValues(),this.keys[a]=e,this.values[a]=n),!1}reifyValues(){return this.values===gn?this.values=this.values.slice(0,this.keys.length):this.values}insertInLeaf(e,n,r,s){if(this.keys.splice(e,0,n),this.values===gn){for(;gn.length<s._maxNodeSize;)gn.push(void 0);if(r===void 0)return!0;this.values=gn.slice(0,this.keys.length-1)}return this.values.splice(e,0,r),!0}takeFromRight(e){let n=this.values;e.values===gn?n!==gn&&n.push(void 0):(n=this.reifyValues(),n.push(e.values.shift())),this.keys.push(e.keys.shift())}takeFromLeft(e){let n=this.values;e.values===gn?n!==gn&&n.unshift(void 0):(n=this.reifyValues(),n.unshift(e.values.pop())),this.keys.unshift(e.keys.pop())}splitOffRightSide(){const e=this.keys.length>>1,n=this.keys.splice(e),r=this.values===gn?gn:this.values.splice(e);return new Bl(n,r)}forRange(e,n,r,s,a,l,u){const f=a._compare;let d,m;if(n===e){if(!r||(m=(d=this.indexOf(e,-1,f))+1,d<0))return l}else d=this.indexOf(e,0,f),m=this.indexOf(n,-1,f),m<0?m=~m:r===!0&&m++;const p=this.keys,y=this.values;if(u!==void 0)for(let g=d;g<m;g++){const v=p[g],x=u(v,y[g],l++);if(x!==void 0){if(s===!0){if(v!==p[g]||this.isShared===!0)throw new Error("BTree illegally changed or cloned in editRange");x.delete?(this.keys.splice(g,1),this.values!==gn&&this.values.splice(g,1),a._size--,g--,m--):x.hasOwnProperty("value")&&(y[g]=x.value)}if(x.break!==void 0)return x}}else l+=m-d;return l}mergeSibling(e,n){if(this.keys.push.apply(this.keys,e.keys),this.values===gn){if(e.values===gn)return;this.values=this.values.slice(0,this.keys.length)}this.values.push.apply(this.values,e.reifyValues())}}class vy extends Bl{constructor(e,n){if(!n){n=[];for(let r=0;r<e.length;r++)n[r]=e[r].maxKey()}super(n),this.children=e}minKey(){return this.children[0].minKey()}minPair(e){return this.children[0].minPair(e)}maxPair(e){return this.children[this.children.length-1].maxPair(e)}get(e,n,r){const s=this.indexOf(e,0,r._compare),a=this.children;return s<a.length?a[s].get(e,n,r):void 0}getPairOrNextLower(e,n,r,s){const a=this.indexOf(e,0,n),l=this.children;if(a>=l.length)return this.maxPair(s);const u=l[a].getPairOrNextLower(e,n,r,s);return u===void 0&&a>0?l[a-1].maxPair(s):u}getPairOrNextHigher(e,n,r,s){const a=this.indexOf(e,0,n),l=this.children,u=l.length;if(a>=u)return;const f=l[a].getPairOrNextHigher(e,n,r,s);return f===void 0&&a<u-1?l[a+1].minPair(s):f}set(e,n,r,s){const a=this.children,l=s._maxNodeSize,u=s._compare;let f=Math.min(this.indexOf(e,0,u),a.length-1),d=a[f];if(d.isShared&&(a[f]=d=d.clone()),d.keys.length>=l){let p;f>0&&(p=a[f-1]).keys.length<l&&u(d.keys[0],e)<0?(p.isShared&&(a[f-1]=p=p.clone()),p.takeFromRight(d),this.keys[f-1]=p.maxKey()):(p=a[f+1])!==void 0&&p.keys.length<l&&u(d.maxKey(),e)<0&&(p.isShared&&(a[f+1]=p=p.clone()),p.takeFromLeft(d),this.keys[f]=a[f].maxKey())}const m=d.set(e,n,r,s);if(m===!1)return!1;if(this.keys[f]=d.maxKey(),m===!0)return!0;if(this.keys.length<l)return this.insert(f+1,m),!0;{const p=this.splitOffRightSide();let y=this;return u(m.maxKey(),this.maxKey())>0&&(y=p,f-=this.keys.length),y.insert(f+1,m),p}}insert(e,n){this.children.splice(e,0,n),this.keys.splice(e,0,n.maxKey())}splitOffRightSide(){const e=this.children.length>>1;return new vy(this.children.splice(e),this.keys.splice(e))}takeFromRight(e){this.keys.push(e.keys.shift()),this.children.push(e.children.shift())}takeFromLeft(e){this.keys.unshift(e.keys.pop()),this.children.unshift(e.children.pop())}forRange(e,n,r,s,a,l,u){const f=a._compare,d=this.keys,m=this.children;let p=this.indexOf(e,0,f),y=p;const g=Math.min(n===e?p:this.indexOf(n,0,f),d.length-1);if(s){if(y<=g)try{for(;y<=g;y++){m[y].isShared&&(m[y]=m[y].clone());const v=m[y].forRange(e,n,r,s,a,l,u);if(d[y]=m[y].maxKey(),typeof v!="number")return v;l=v}}finally{const v=a._maxNodeSize>>1;for(p>0&&p--,y=g;y>=p;y--)m[y].keys.length<=v&&(m[y].keys.length!==0?this.tryMerge(y,a._maxNodeSize):(d.splice(y,1),m.splice(y,1)));m.length!==0&&m[0].keys.length===0&&hM(!1,"emptiness bug")}}else for(;y<=g;y++){const v=m[y].forRange(e,n,r,s,a,l,u);if(typeof v!="number")return v;l=v}return l}tryMerge(e,n){const r=this.children;return e>=0&&e+1<r.length&&r[e].keys.length+r[e+1].keys.length<=n?(r[e].isShared&&(r[e]=r[e].clone()),r[e].mergeSibling(r[e+1],n),r.splice(e+1,1),this.keys.splice(e+1,1),this.keys[e]=r[e].maxKey(),!0):!1}mergeSibling(e,n){const r=this.keys.length;this.keys.push.apply(this.keys,e.keys);const s=e.children;if(this.children.push.apply(this.children,s),e.isShared&&!this.isShared)for(const a of s)a.isShared=!0;this.tryMerge(r-1,n)}}const gn=[],fM={delete:!0},dM=()=>fM,nm=(function(){const t=new Bl;return t.isShared=!0,t})(),ww=[];function hM(t,...e){throw e.unshift("B+ tree"),new Error(e.join(" "))}function pM(){const t=new Map;function e(n){const r=n.join(".");if(t.has(r))return t.get(r);const s=new Proxy({},{get(a,l,u){if(l==="__refProxy")return!0;if(l==="__path")return n;if(l==="__type")return;if(typeof l=="symbol")return Reflect.get(a,l,u);const f=[...n,String(l)];return e(f)},has(a,l){return l==="__refProxy"||l==="__path"||l==="__type"?!0:Reflect.has(a,l)},ownKeys(a){return Reflect.ownKeys(a)},getOwnPropertyDescriptor(a,l){return l==="__refProxy"||l==="__path"||l==="__type"?{enumerable:!1,configurable:!0}:Reflect.getOwnPropertyDescriptor(a,l)}});return t.set(r,s),s}return e([])}function Ea(t){const e=new Map;let n=0;function r(a){const l=a.join(".");if(e.has(l))return e.get(l);const u=new Proxy({},{get(f,d,m){if(d==="__refProxy")return!0;if(d==="__path")return a;if(d==="__type")return;if(typeof d=="symbol")return Reflect.get(f,d,m);const p=[...a,String(d)];return r(p)},has(f,d){return d==="__refProxy"||d==="__path"||d==="__type"?!0:Reflect.has(f,d)},ownKeys(f){const d=++n,m=`__SPREAD_SENTINEL__${a.join(".")}__${d}`;return Object.prototype.hasOwnProperty.call(f,m)||Object.defineProperty(f,m,{enumerable:!0,configurable:!0,value:!0}),Reflect.ownKeys(f)},getOwnPropertyDescriptor(f,d){return d==="__refProxy"||d==="__path"||d==="__type"?{enumerable:!1,configurable:!0}:Reflect.getOwnPropertyDescriptor(f,d)}});return e.set(l,u),u}return new Proxy({},{get(a,l,u){if(l==="__refProxy")return!0;if(l==="__path")return[];if(l==="__type")return;if(typeof l=="symbol")return Reflect.get(a,l,u);const f=String(l);if(t.includes(f))return r([f])},has(a,l){return l==="__refProxy"||l==="__path"||l==="__type"||typeof l=="string"&&t.includes(l)?!0:Reflect.has(a,l)},ownKeys(a){return[...t,"__refProxy","__path","__type"]},getOwnPropertyDescriptor(a,l){if(l==="__refProxy"||l==="__path"||l==="__type")return{enumerable:!1,configurable:!0};if(typeof l=="string"&&t.includes(l))return{enumerable:!0,configurable:!0}}})}function Xt(t){return mM(t)?new On(t.__path):t&&typeof t=="object"&&"type"in t&&(t.type==="func"||t.type==="ref"||t.type==="val"||t.type==="agg")?t:new Un(t)}function mM(t){return t&&typeof t=="object"&&t.__refProxy===!0}function tg(t,e){return new Sr("eq",[Xt(t),Xt(e)])}function Sw(t,e){return new Sr("gt",[Xt(t),Xt(e)])}function gM(t,e){return new Sr("gte",[Xt(t),Xt(e)])}function ng(t,e){return new Sr("lt",[Xt(t),Xt(e)])}function rg(t,e,...n){const r=[t,e,...n];return new Sr("and",r.map(s=>Xt(s)))}function yM(t,e,...n){const r=[t,e,...n];return new Sr("or",r.map(s=>Xt(s)))}function bM(t,e){return new Sr("in",[Xt(t),Xt(e)])}class _M{constructor(e,n,r,s){this.lookupCount=0,this.totalLookupTime=0,this.lastUpdated=new Date,this.id=e,this.expression=n,this.compareOptions=yy,this.name=r,this.initialize(s)}supports(e){return this.supportedOperations.has(e)}matchesField(e){return this.expression.type==="ref"&&this.expression.path.length===e.length&&this.expression.path.every((n,r)=>n===e[r])}matchesCompareOptions(e){const n={...this.compareOptions,direction:void 0},r={...e,direction:void 0};return Rr(n,r)}matchesDirection(e){return this.compareOptions.direction===e}getStats(){return{entryCount:this.keyCount,lookupCount:this.lookupCount,averageLookupTime:this.lookupCount>0?this.totalLookupTime/this.lookupCount:0,lastUpdated:this.lastUpdated}}evaluateIndexExpression(e){return my(this.expression)(e)}trackLookup(e){const n=performance.now()-e;this.lookupCount++,this.totalLookupTime+=n}updateTimestamp(){this.lastUpdated=new Date}}class sg extends _M{constructor(e,n,r,s){super(e,n,r,s),this.supportedOperations=new Set(["eq","gt","gte","lt","lte","in"]),this.valueMap=new Map,this.indexedKeys=new Set,this.compareFn=Xm,this.compareFn=s?.compareFn??Xm,s?.compareOptions&&(this.compareOptions=s.compareOptions),this.orderedEntries=new uM(this.compareFn)}initialize(e){}add(e,n){let r;try{r=this.evaluateIndexExpression(n)}catch(a){throw new Error(`Failed to evaluate index expression for key ${e}: ${a}`)}const s=gs(r);if(this.valueMap.has(s))this.valueMap.get(s).add(e);else{const a=new Set([e]);this.valueMap.set(s,a),this.orderedEntries.set(s,void 0)}this.indexedKeys.add(e),this.updateTimestamp()}remove(e,n){let r;try{r=this.evaluateIndexExpression(n)}catch(a){console.warn(`Failed to evaluate index expression for key ${e} during removal:`,a);return}const s=gs(r);if(this.valueMap.has(s)){const a=this.valueMap.get(s);a.delete(e),a.size===0&&(this.valueMap.delete(s),this.orderedEntries.delete(s))}this.indexedKeys.delete(e),this.updateTimestamp()}update(e,n,r){this.remove(e,n),this.add(e,r)}build(e){this.clear();for(const[n,r]of e)this.add(n,r)}clear(){this.orderedEntries.clear(),this.valueMap.clear(),this.indexedKeys.clear(),this.updateTimestamp()}lookup(e,n){const r=performance.now();let s;switch(e){case"eq":s=this.equalityLookup(n);break;case"gt":s=this.rangeQuery({from:n,fromInclusive:!1});break;case"gte":s=this.rangeQuery({from:n,fromInclusive:!0});break;case"lt":s=this.rangeQuery({to:n,toInclusive:!1});break;case"lte":s=this.rangeQuery({to:n,toInclusive:!0});break;case"in":s=this.inArrayLookup(n);break;default:throw new Error(`Operation ${e} not supported by BTreeIndex`)}return this.trackLookup(r),s}get keyCount(){return this.indexedKeys.size}equalityLookup(e){const n=gs(e);return new Set(this.valueMap.get(n)??[])}rangeQuery(e={}){const{from:n,to:r,fromInclusive:s=!0,toInclusive:a=!0}=e,l=new Set,u=gs(n),f=gs(r),d=u??this.orderedEntries.minKey(),m=f??this.orderedEntries.maxKey();return this.orderedEntries.forRange(d,m,a,(p,y)=>{if(!s&&this.compareFn(p,n)===0)return;const g=this.valueMap.get(p);g&&g.forEach(v=>l.add(v))}),l}rangeQueryReversed(e={}){const{from:n,to:r,fromInclusive:s=!0,toInclusive:a=!0}=e;return this.rangeQuery({from:r??this.orderedEntries.maxKey(),to:n??this.orderedEntries.minKey(),fromInclusive:a,toInclusive:s})}takeInternal(e,n,r,s,a=!1){const l=new Set,u=[];let f,d=gs(r);for(;(f=n(d))!==void 0&&u.length<e;){d=f[0];const m=this.valueMap.get(d);if(m&&m.size>0){const p=Array.from(m).sort(pf);a&&p.reverse();for(const y of p){if(u.length>=e)break;!l.has(y)&&(s?.(y)??!0)&&(u.push(y),l.add(y))}}}return u}take(e,n,r){const s=a=>this.orderedEntries.nextHigherPair(a);return this.takeInternal(e,s,n,r)}takeReversed(e,n,r){const s=a=>this.orderedEntries.nextLowerPair(a);return this.takeInternal(e,s,n,r,!0)}inArrayLookup(e){const n=new Set;for(const r of e){const s=gs(r),a=this.valueMap.get(s);a&&a.forEach(l=>n.add(l))}return n}get indexedKeysSet(){return this.indexedKeys}get orderedEntriesArray(){return this.orderedEntries.keysArray().map(e=>[e,this.valueMap.get(e)??new Set])}get orderedEntriesArrayReversed(){return this.takeReversed(this.orderedEntries.size).map(e=>[e,this.valueMap.get(e)??new Set])}get valueMapData(){return this.valueMap}}function mk(t){return t.config.autoIndex==="eager"}function sd(t,e,n,r,s){if(!mk(n))return;const a=r??{...yy,...n.compareOptions};if(!Array.from(n.indexes.values()).find(u=>u.matchesField(e)&&u.matchesCompareOptions(a)))try{n.createIndex(u=>{let f=u;for(const d of e)f=f[d];return f},{name:`auto:${e.join(".")}`,indexType:sg,options:s?{compareFn:s,compareOptions:a}:{}})}catch(u){console.warn(`${n.id?`[${n.id}] `:""}Failed to create auto-index for field path "${e.join(".")}":`,u)}}function vM(t,e){if(!mk(e))return;const n=xM(t);for(const{fieldName:r,fieldPath:s}of n)sd(r,s,e)}function xM(t){const e=[];function n(r){if(r.type!=="func")return;const s=r;if(s.name==="and"){for(const d of s.args)n(d);return}if(!["eq","gt","gte","lt","lte","in"].includes(s.name)||s.args.length<1||s.args[0].type!=="ref")return;const u=s.args[0].path;if(u.length===0)return;const f=u.join("_");e.push({fieldName:f,fieldPath:u})}return n(t),e}const{sum:wM,count:SM,avg:kM,min:EM,max:CM}=VI;function TM(t,e){const n=new Map,r=[...t];if(!e)return{selectToGroupByIndex:n,groupByExpressions:r};for(const[s,a]of Object.entries(e)){if(a.type==="agg")continue;const l=r.findIndex(u=>mf(a,u));if(l===-1)throw new ON(s);n.set(s,l)}return{selectToGroupByIndex:n,groupByExpressions:r}}function kw(t,e,n,r,s){if(e.length===0){const d={};if(r){for(const[p,y]of Object.entries(r))if(y.type==="agg"){const g=y;d[p]=Ew(g)}}const m=()=>({__singleGroup:!0});if(t=t.pipe(mw(m,d)),t=t.pipe(An(([,p])=>{const g={...p.__select_results||{}};if(r)for(const[v,x]of Object.entries(r))x.type==="agg"&&(g[v]=p[v]);return["single_group",{...p,__select_results:g}]})),n&&n.length>0)for(const p of n){const y=nw(p),g=gf(y,r||{}),v=qn(g);t=t.pipe(Qs(([,x])=>{const E={result:x.__select_results};return Ua(v(E))}))}if(s&&s.length>0)for(const p of s)t=t.pipe(Qs(([,y])=>{const g={result:y.__select_results};return Ua(p(g))}));return t}const a=TM(e,r),l=e.map(d=>qn(d)),u=([,d])=>{const m={...d};delete m.__select_results;const p={};for(let y=0;y<e.length;y++){const g=l[y],v=g(m);p[`__key_${y}`]=v}return p},f={};if(r){for(const[d,m]of Object.entries(r))if(m.type==="agg"){const p=m;f[d]=Ew(p)}}if(t=t.pipe(mw(u,f)),t=t.pipe(An(([,d])=>{const m=d.__select_results||{},p={};if(r)for(const[g,v]of Object.entries(r))if(v.type!=="agg"){const x=a.selectToGroupByIndex.get(g);x!==void 0?p[g]=d[`__key_${x}`]:p[g]=m[g]}else p[g]=d[g];else for(let g=0;g<e.length;g++)p[`__key_${g}`]=d[`__key_${g}`];let y;if(e.length===1)y=d.__key_0;else{const g=[];for(let v=0;v<e.length;v++)g.push(d[`__key_${v}`]);y=JSON.stringify(g)}return[y,{...d,__select_results:p}]})),n&&n.length>0)for(const d of n){const m=nw(d),p=gf(m,r||{}),y=qn(p);t=t.pipe(Qs(([,g])=>{const v={result:g.__select_results};return y(v)}))}if(s&&s.length>0)for(const d of s)t=t.pipe(Qs(([,m])=>{const p={result:m.__select_results};return Ua(d(p))}));return t}function mf(t,e){if(!t||!e||t.type!==e.type)return!1;switch(t.type){case"ref":return!t.path||!e.path||t.path.length!==e.path.length?!1:t.path.every((n,r)=>n===e.path[r]);case"val":return t.value===e.value;case"func":return t.name===e.name&&t.args?.length===e.args?.length&&(t.args||[]).every((n,r)=>mf(n,e.args[r]));case"agg":return t.name===e.name&&t.args?.length===e.args?.length&&(t.args||[]).every((n,r)=>mf(n,e.args[r]));default:return!1}}function Ew(t){const e=qn(t.args[0]),n=([,a])=>{const l=e(a);return typeof l=="number"?l:l!=null?Number(l):0},r=([,a])=>{const l=e(a);return typeof l=="number"||l instanceof Date?l:l!=null?Number(l):0},s=([,a])=>e(a);switch(t.name.toLowerCase()){case"sum":return wM(n);case"count":return SM(s);case"avg":return kM(n);case"min":return EM(r);case"max":return CM(r);default:throw new NN(t.name)}}function gf(t,e,n="result"){switch(t.type){case"agg":{const r=t;for(const[s,a]of Object.entries(e))if(a.type==="agg"&&AM(r,a))return new On([n,s]);throw new IN(r.name)}case"func":{const r=t,s=r.args.map(a=>gf(a,e));return new Sr(r.name,s)}case"ref":return t;case"val":return t;default:throw new MN(t.type)}}function AM(t,e){return t.name===e.name&&t.args.length===e.args.length&&t.args.every((n,r)=>mf(n,e.args[r]))}function RM(t,e,n,r,s,a,l,u,f){const d=n.map(v=>{const x=gf(v.expression,r,"__select_results");return{compiledExpression:qn(x),compareOptions:ig(v,s)}}),m=v=>{const x=v;return n.length>1?d.map(E=>E.compiledExpression(x)):n.length===1?d[0].compiledExpression(x):null},p=(v,x)=>{if(n.length>1){const E=v,S=x;for(let T=0;T<n.length;T++){const A=d[T],D=df(A.compareOptions)(E[T],S[T]);if(D!==0)return D}return E.length-S.length}if(n.length===1){const E=d[0];return df(E.compareOptions)(v,x)}return Xm(v,x)};let y,g;if(u){let v,x,E,S=t.from.alias;const T=n[0],A=T.expression;if(A.type==="ref"){const j=zl(t,A,s);if(j){x=j.collection;const D=j.path[0],I=ig(T,x);D&&sd(D,j.path,x,I,p),E=qn(new On(j.path),!0),v=ec(x,j.path,I),v?.supports("gt")||(v=void 0),S=A.path.length>1?String(A.path[0]):t.from.alias}}if(E){const D=n.every(H=>H.expression.type==="ref")?n.map(H=>{const z=H.expression,Q=zl(t,z,s);return qn(Q?new On(Q.path):H.expression,!0)}):void 0;g={alias:S,offset:f??0,limit:u,comparator:(H,z)=>{if(n.length===1){const Q=H&&E(H),re=z&&E(z);return p(Q,re)}if(D){const Q=re=>re&&D.map(pe=>pe(re));return p(Q(H),Q(z))}return 0},valueExtractorForRawRow:H=>{if(n.length===1)return E(H);if(D)return D.map(z=>z(H))},firstColumnValueExtractor:E,index:v,orderBy:n};const q=x?.id??s.id;a[q]=g,v&&(y=H=>{a[q].dataNeeded=()=>{const z=H();return Math.max(0,g.limit-z)}})}}return e.pipe(cM(m,{limit:u,offset:f,comparator:p,setSizeCallback:y,setWindowFn:v=>{l(x=>{v(x),g&&(g.offset=x.offset??g.offset,g.limit=x.limit??g.limit)})}}))}function ig(t,e){return t.compareOptions.stringSort!==void 0?t.compareOptions:{...e.compareOptions,direction:t.compareOptions.direction,nulls:t.compareOptions.nulls}}function OM(t,e={}){const n=r=>{const s=[];for(const[a,l]of t.entries())(r?.(l)??!0)&&s.push({type:"insert",key:a,value:l});return s};if(e.limit!==void 0&&!e.orderBy)throw new Error("limit cannot be used without orderBy");if(e.orderBy){const r=e.where?kl(e.where):void 0,s=IM(t,e.orderBy,e.limit,r,e.optimizedOnly);if(s===void 0)return;const a=[];for(const l of s){const u=t.get(l);u!==void 0&&a.push({type:"insert",key:l,value:u})}return a}if(!e.where)return n();try{const r=e.where,s=YN(r,t);if(s.canOptimize){const a=[];for(const l of s.matchingKeys){const u=t.get(l);u!==void 0&&a.push({type:"insert",key:l,value:u})}return a}else{if(e.optimizedOnly)return;const a=kl(r);return n(a)}}catch(r){console.warn(`${t.id?`[${t.id}] `:""}Error processing where clause, falling back to full scan:`,r);const s=kl(e.where);return e.optimizedOnly?void 0:n(s)}}function kl(t){const e=my(t);return n=>{try{const r=e(n);return Ua(r)}catch{return!1}}}function NM(t,e){const n=kl(e.whereExpression);return r=>{const s=[];for(const a of r)if(a.type==="insert")n(a.value)&&s.push(a);else if(a.type==="update"){const l=n(a.value),u=a.previousValue?n(a.previousValue):!1;l&&u?s.push(a):l&&!u?s.push({...a,type:"insert"}):!l&&u&&s.push({...a,type:"delete",value:a.previousValue})}else n(a.value)&&s.push(a);(s.length>0||r.length===0)&&t(s)}}function IM(t,e,n,r,s){if(e.length===1){const f=e[0],d=f.expression;if(d.type==="ref"){const p=d.path,y=ig(f,t);sd(p[0],p,t,y);const g=ec(t,p,y);if(g&&g.supports("gt")){const v=x=>{const E=t.get(x);return E===void 0?!1:r?.(E)??!0};return g.take(n??g.keyCount,void 0,v)}}}if(s)return;const a=[];for(const[f,d]of t.entries())(r?.(d)??!0)&&a.push({key:f,value:d});const l=(f,d)=>{for(const m of e){const p=df(m.compareOptions),y=Cw(f.value,m.expression),g=Cw(d.value,m.expression),v=p(y,g);if(v!==0)return v}return 0};a.sort(l);const u=a.map(f=>f.key);return n!==void 0?u.slice(0,n):u}function Cw(t,e){if(e.type==="ref"){const n=e;let r=t;for(const s of n.path)r=r?.[s];return r}else return e.type==="val"?e.value:my(e)(t)}class Tw{constructor(e){this.map=new Map,this.sortedKeys=[],this.comparator=e}indexOf(e,n){let r=0,s=this.sortedKeys.length;if(!this.comparator){for(;r<s;){const a=Math.floor((r+s)/2),l=this.sortedKeys[a],u=pf(e,l);if(u<0)s=a;else if(u>0)r=a+1;else return a}return r}for(;r<s;){const a=Math.floor((r+s)/2),l=this.sortedKeys[a],u=this.map.get(l),f=this.comparator(n,u);if(f<0)s=a;else if(f>0)r=a+1;else{const d=pf(e,l);if(d<0)s=a;else if(d>0)r=a+1;else return a}}return r}set(e,n){if(this.map.has(e)){const s=this.map.get(e),a=this.indexOf(e,s);this.sortedKeys.splice(a,1)}const r=this.indexOf(e,n);return this.sortedKeys.splice(r,0,e),this.map.set(e,n),this}get(e){return this.map.get(e)}delete(e){if(this.map.has(e)){const n=this.map.get(e),r=this.indexOf(e,n);return this.sortedKeys.splice(r,1),this.map.delete(e)}return!1}has(e){return this.map.has(e)}clear(){this.map.clear(),this.sortedKeys=[]}get size(){return this.map.size}*[Symbol.iterator](){for(const e of this.sortedKeys)yield[e,this.map.get(e)]}entries(){return this[Symbol.iterator]()}keys(){return this.sortedKeys[Symbol.iterator]()}values(){return(function*(){for(const e of this.sortedKeys)yield this.map.get(e)}).call(this)}forEach(e){for(const n of this.sortedKeys)e(this.map.get(n),n,this.map)}}class MM{constructor(e){this.pendingSyncedTransactions=[],this.syncedMetadata=new Map,this.optimisticUpserts=new Map,this.optimisticDeletes=new Set,this.size=0,this.syncedKeys=new Set,this.preSyncVisibleState=new Map,this.recentlySyncedKeys=new Set,this.hasReceivedFirstCommit=!1,this.isCommittingSyncTransactions=!1,this.commitPendingTransactions=()=>{let n=!1;for(const l of this.transactions.values())if(l.state==="persisting"){n=!0;break}const{committedSyncedTransactions:r,uncommittedSyncedTransactions:s,hasTruncateSync:a}=this.pendingSyncedTransactions.reduce((l,u)=>(u.committed?(l.committedSyncedTransactions.push(u),u.truncate===!0&&(l.hasTruncateSync=!0)):l.uncommittedSyncedTransactions.push(u),l),{committedSyncedTransactions:[],uncommittedSyncedTransactions:[],hasTruncateSync:!1});if(!n||a){this.isCommittingSyncTransactions=!0;const l=a?r.find(y=>y.truncate)?.optimisticSnapshot:null,u=new Set;for(const y of r)for(const g of y.operations)u.add(g.key);let f=this.preSyncVisibleState;if(f.size===0){f=new Map;for(const y of u){const g=this.get(y);g!==void 0&&f.set(y,g)}}const d=[],m=this.config.sync.rowUpdateMode||"partial";for(const y of r){if(y.truncate){const g=new Set([...this.syncedData.keys(),...l?.upserts.keys()||[]]);for(const v of g){if(l?.deletes.has(v))continue;const x=l?.upserts.get(v)||this.syncedData.get(v);x!==void 0&&d.push({type:"delete",key:v,value:x})}this.syncedData.clear(),this.syncedMetadata.clear(),this.syncedKeys.clear();for(const v of u)f.delete(v);this._events.emit("truncate",{type:"truncate",collection:this.collection})}for(const g of y.operations){const v=g.key;switch(this.syncedKeys.add(v),g.type){case"insert":this.syncedMetadata.set(v,g.metadata);break;case"update":this.syncedMetadata.set(v,Object.assign({},this.syncedMetadata.get(v),g.metadata));break;case"delete":this.syncedMetadata.delete(v);break}switch(g.type){case"insert":this.syncedData.set(v,g.value);break;case"update":{if(m==="partial"){const x=Object.assign({},this.syncedData.get(v),g.value);this.syncedData.set(v,x)}else this.syncedData.set(v,g.value);break}case"delete":this.syncedData.delete(v);break}}}if(a){const y=new Set;for(const x of r)for(const E of x.operations)(E.type==="insert"||E.type==="update")&&y.add(E.key);const g=new Map(l.upserts),v=new Set(l.deletes);for(const[x,E]of g)if(!v.has(x))if(y.has(x)){let S=!1;for(let T=d.length-1;T>=0;T--){const A=d[T];if(A.key===x&&A.type==="insert"){A.value=E,S=!0;break}}S||d.push({type:"insert",key:x,value:E})}else d.push({type:"insert",key:x,value:E});if(d.length>0&&v.size>0){const x=[];for(const E of d)E.type==="insert"&&v.has(E.key)||x.push(E);d.length=0,d.push(...x)}this.lifecycle.status!=="ready"&&this.lifecycle.markReady()}if(this.optimisticUpserts.clear(),this.optimisticDeletes.clear(),this.isCommittingSyncTransactions=!1,a&&l){for(const[y,g]of l.upserts)this.optimisticUpserts.set(y,g);for(const y of l.deletes)this.optimisticDeletes.add(y)}for(const y of this.transactions.values())if(!["completed","failed"].includes(y.state)){for(const g of y.mutations)if(this.isThisCollection(g.collection)&&g.optimistic)switch(g.type){case"insert":case"update":this.optimisticUpserts.set(g.key,g.modified),this.optimisticDeletes.delete(g.key);break;case"delete":this.optimisticUpserts.delete(g.key),this.optimisticDeletes.add(g.key);break}}const p=new Map;for(const y of this.transactions.values())if(y.state==="completed")for(const g of y.mutations)g.optimistic&&this.isThisCollection(g.collection)&&u.has(g.key)&&p.set(g.key,{type:g.type,value:g.modified});for(const y of u){const g=f.get(y),v=this.get(y),x=p.get(y);let E=!1;x&&(x.type==="delete"&&g!==void 0&&v===void 0&&Rr(x.value,g)||v!==void 0&&Rr(x.value,v))&&(E=!0),E||(g===void 0&&v!==void 0?d.push({type:"insert",key:y,value:v}):g!==void 0&&v===void 0?d.push({type:"delete",key:y,value:g}):g!==void 0&&v!==void 0&&!Rr(g,v)&&d.push({type:"update",key:y,value:v,previousValue:g}))}this.size=this.calculateSize(),d.length>0&&this.indexes.updateIndexes(d),this.changes.emitEvents(d,!0),this.pendingSyncedTransactions=s,this.preSyncVisibleState.clear(),Promise.resolve().then(()=>{this.recentlySyncedKeys.clear()}),this.hasReceivedFirstCommit||(this.hasReceivedFirstCommit=!0)}},this.config=e,this.transactions=new Tw((n,r)=>n.compareCreatedAt(r)),this.syncedData=new Tw(e.compare)}setDeps(e){this.collection=e.collection,this.lifecycle=e.lifecycle,this.changes=e.changes,this.indexes=e.indexes,this._events=e.events}get(e){const{optimisticDeletes:n,optimisticUpserts:r,syncedData:s}=this;if(!n.has(e))return r.has(e)?r.get(e):s.get(e)}has(e){const{optimisticDeletes:n,optimisticUpserts:r,syncedData:s}=this;return n.has(e)?!1:r.has(e)?!0:s.has(e)}*keys(){const{syncedData:e,optimisticDeletes:n,optimisticUpserts:r}=this;for(const s of e.keys())n.has(s)||(yield s);for(const s of r.keys())!e.has(s)&&!n.has(s)&&(yield s)}*values(){for(const e of this.keys()){const n=this.get(e);n!==void 0&&(yield n)}}*entries(){for(const e of this.keys()){const n=this.get(e);n!==void 0&&(yield[e,n])}}*[Symbol.iterator](){for(const[e,n]of this.entries())yield[e,n]}forEach(e){let n=0;for(const[r,s]of this.entries())e(s,r,n++)}map(e){const n=[];let r=0;for(const[s,a]of this.entries())n.push(e(a,s,r++));return n}isThisCollection(e){return e===this.collection}recomputeOptimisticState(e=!1){if(this.isCommittingSyncTransactions&&!e)return;const n=new Map(this.optimisticUpserts),r=new Set(this.optimisticDeletes);this.optimisticUpserts.clear(),this.optimisticDeletes.clear();const s=[];for(const u of this.transactions.values())["completed","failed"].includes(u.state)||s.push(u);for(const u of s)for(const f of u.mutations)if(this.isThisCollection(f.collection)&&f.optimistic)switch(f.type){case"insert":case"update":this.optimisticUpserts.set(f.key,f.modified),this.optimisticDeletes.delete(f.key);break;case"delete":this.optimisticUpserts.delete(f.key),this.optimisticDeletes.add(f.key);break}this.size=this.calculateSize();const a=[];this.collectOptimisticChanges(n,r,a);const l=a.filter(u=>!!(!this.recentlySyncedKeys.has(u.key)||e));if(this.pendingSyncedTransactions.length>0&&!e){const u=new Set;for(const d of this.pendingSyncedTransactions)for(const m of d.operations)u.add(m.key);const f=l.filter(d=>!(d.type==="delete"&&u.has(d.key)&&!s.some(p=>p.mutations.some(y=>this.isThisCollection(y.collection)&&y.key===d.key))));f.length>0&&this.indexes.updateIndexes(f),this.changes.emitEvents(f,e)}else l.length>0&&this.indexes.updateIndexes(l),this.changes.emitEvents(l,e)}calculateSize(){const e=this.syncedData.size,n=Array.from(this.optimisticDeletes).filter(s=>this.syncedData.has(s)&&!this.optimisticUpserts.has(s)).length,r=Array.from(this.optimisticUpserts.keys()).filter(s=>!this.syncedData.has(s)).length;return e-n+r}collectOptimisticChanges(e,n,r){const s=new Set([...e.keys(),...this.optimisticUpserts.keys(),...n,...this.optimisticDeletes]);for(const a of s){const l=this.get(a),u=this.getPreviousValue(a,e,n);u!==void 0&&l===void 0?r.push({type:"delete",key:a,value:u}):u===void 0&&l!==void 0?r.push({type:"insert",key:a,value:l}):u!==void 0&&l!==void 0&&u!==l&&r.push({type:"update",key:a,value:l,previousValue:u})}}getPreviousValue(e,n,r){if(!r.has(e))return n.has(e)?n.get(e):this.syncedData.get(e)}scheduleTransactionCleanup(e){if(e.state==="completed"){this.transactions.delete(e.id);return}e.isPersisted.promise.then(()=>{this.transactions.delete(e.id)}).catch(()=>{})}capturePreSyncVisibleState(){if(this.pendingSyncedTransactions.length===0)return;const e=new Set;for(const n of this.pendingSyncedTransactions)for(const r of n.operations)e.add(r.key);for(const n of e)this.recentlySyncedKeys.add(n);for(const n of e)if(!this.preSyncVisibleState.has(n)){const r=this.get(n);r!==void 0&&this.preSyncVisibleState.set(n,r)}}onTransactionStateChange(){this.changes.shouldBatchEvents=this.pendingSyncedTransactions.length>0,this.capturePreSyncVisibleState(),this.recomputeOptimisticState(!1)}cleanup(){this.syncedData.clear(),this.syncedMetadata.clear(),this.optimisticUpserts.clear(),this.optimisticDeletes.clear(),this.size=0,this.pendingSyncedTransactions=[],this.syncedKeys.clear(),this.hasReceivedFirstCommit=!1}}class gk{constructor(){this.listeners=new Map}on(e,n){return this.listeners.has(e)||this.listeners.set(e,new Set),this.listeners.get(e).add(n),()=>{this.listeners.get(e)?.delete(n)}}once(e,n){const r=this.on(e,s=>{n(s),r()});return r}off(e,n){this.listeners.get(e)?.delete(n)}waitFor(e,n){return new Promise((r,s)=>{let a;const l=this.on(e,u=>{a&&(clearTimeout(a),a=void 0),r(u),l()});n&&(a=setTimeout(()=>{a=void 0,l(),s(new Error(`Timeout waiting for event ${String(e)}`))},n))})}emitInner(e,n){this.listeners.get(e)?.forEach(r=>{try{r(n)}catch(s){queueMicrotask(()=>{throw s})}})}clearListeners(){this.listeners.clear()}}function DM(t,e){if(e.length===0||t.length===0)return;if(t.length===1){const{expression:r,compareOptions:s}=t[0];return(s.direction==="asc"?Sw:ng)(r,new Un(e[0]))}const n=[];for(let r=0;r<t.length&&r<e.length;r++){const s=t[r],a=e[r],l=[];for(let d=0;d<r;d++){const m=t[d],p=e[d];l.push(tg(m.expression,new Un(p)))}const f=(s.compareOptions.direction==="asc"?Sw:ng)(s.expression,new Un(a));if(l.length===0)n.push(f);else{const d=[...l,f];n.push(d.reduce((m,p)=>rg(m,p)))}}return n.length===1?n[0]:n.reduce((r,s)=>yM(r,s))}class jM extends gk{constructor(e,n,r){super(),this.collection=e,this.callback=n,this.options=r,this.loadedInitialState=!1,this.skipFiltering=!1,this.snapshotSent=!1,this.loadedSubsets=[],this.sentKeys=new Set,this.limitedSnapshotRowCount=0,this._status="ready",this.pendingLoadSubsetPromises=new Set,this.isBufferingForTruncate=!1,this.truncateBuffer=[],this.pendingTruncateRefetches=new Set,r.onUnsubscribe&&this.on("unsubscribed",a=>r.onUnsubscribe(a)),r.whereExpression&&vM(r.whereExpression,this.collection);const s=a=>{n(a),this.trackSentKeys(a)};this.callback=s,this.filteredCallback=r.whereExpression?NM(this.callback,r):this.callback,this.truncateCleanup=this.collection.on("truncate",()=>{this.handleTruncate()})}get status(){return this._status}handleTruncate(){const e=[...this.loadedSubsets],n=this.collection._sync.syncLoadSubsetFn!==null;if(e.length===0||!n){this.snapshotSent=!1,this.loadedInitialState=!1,this.limitedSnapshotRowCount=0,this.lastSentKey=void 0,this.loadedSubsets=[];return}this.isBufferingForTruncate=!0,this.truncateBuffer=[],this.pendingTruncateRefetches.clear(),this.snapshotSent=!1,this.loadedInitialState=!1,this.limitedSnapshotRowCount=0,this.lastSentKey=void 0,this.loadedSubsets=[],queueMicrotask(()=>{if(this.isBufferingForTruncate){for(const r of e){const s=this.collection._sync.loadSubset(r);this.loadedSubsets.push(r),this.trackLoadSubsetPromise(s),s instanceof Promise&&(this.pendingTruncateRefetches.add(s),s.catch(()=>{}).finally(()=>{this.pendingTruncateRefetches.delete(s),this.checkTruncateRefetchComplete()}))}this.pendingTruncateRefetches.size===0&&this.flushTruncateBuffer()}})}checkTruncateRefetchComplete(){this.pendingTruncateRefetches.size===0&&this.isBufferingForTruncate&&this.flushTruncateBuffer()}flushTruncateBuffer(){this.isBufferingForTruncate=!1;const e=this.truncateBuffer.flat();e.length>0&&this.filteredCallback(e),this.truncateBuffer=[]}setOrderByIndex(e){this.orderByIndex=e}setStatus(e){if(this._status===e)return;const n=this._status;this._status=e,this.emitInner("status:change",{type:"status:change",subscription:this,previousStatus:n,status:e});const r=`status:${e}`;this.emitInner(r,{type:r,subscription:this,previousStatus:n,status:e})}trackLoadSubsetPromise(e){e instanceof Promise&&(this.pendingLoadSubsetPromises.add(e),this.setStatus("loadingSubset"),e.finally(()=>{this.pendingLoadSubsetPromises.delete(e),this.pendingLoadSubsetPromises.size===0&&this.setStatus("ready")}))}hasLoadedInitialState(){return this.loadedInitialState}hasSentAtLeastOneSnapshot(){return this.snapshotSent}emitEvents(e){const n=this.filterAndFlipChanges(e);this.isBufferingForTruncate?n.length>0&&this.truncateBuffer.push(n):this.filteredCallback(n)}requestSnapshot(e){if(this.loadedInitialState)return!1;const n={where:this.options.whereExpression,optimizedOnly:e?.optimizedOnly??!1};if(e){if("where"in e){const f=e.where;if(n.where){const d=n.where,m=rg(d,f);n.where=m}else n.where=f}}else this.loadedInitialState=!0;const r={where:n.where,subscription:this,orderBy:e?.orderBy,limit:e?.limit},s=this.collection._sync.loadSubset(r);this.loadedSubsets.push(r),(e?.trackLoadSubsetPromise??!0)&&this.trackLoadSubsetPromise(s);const l=this.collection.currentStateAsChanges(n);if(l===void 0)return!1;const u=l.filter(f=>!this.sentKeys.has(f.key));for(const f of u)this.sentKeys.add(f.key);return this.snapshotSent=!0,this.callback(u),!0}requestLimitedSnapshot({orderBy:e,limit:n,minValues:r,offset:s}){if(!n)throw new Error("limit is required");if(!this.orderByIndex)throw new Error("Ordered snapshot was requested but no index was found. You have to call setOrderByIndex before requesting an ordered snapshot.");const l=r?.[0],u=this.orderByIndex,f=this.options.whereExpression,d=f?kl(f):void 0,m=I=>{if(this.sentKeys.has(I))return!1;const P=this.collection.get(I);return P===void 0?!1:d?.(P)??!0};let p=l;const y=[];let g=[];if(l!==void 0){const{expression:I}=e[0],P=this.collection.currentStateAsChanges({where:tg(I,new Un(l))});if(P){const q=P.map(z=>z.key).filter(z=>!this.sentKeys.has(z)&&m(z));g.push(...q);const H=u.take(n-g.length,l,m);g.push(...H)}else g=u.take(n,l,m)}else g=u.take(n,l,m);const v=()=>Math.max(n-y.length,0),x=()=>g.length===0,E=e[0].expression,S=E.type==="ref"?qn(new On(E.path),!0):null;for(;v()>0&&!x();){const I=new Set;for(const P of g){const q=this.collection.get(P);y.push({type:"insert",key:P,value:q}),p=S?S(q):q,I.add(P)}g=u.take(v(),p,m)}const T=this.limitedSnapshotRowCount;for(const I of y)this.sentKeys.add(I.key);this.callback(y),this.limitedSnapshotRowCount+=y.length,y.length>0&&(this.lastSentKey=y[y.length-1].key);let A;if(r!==void 0&&r.length>0){const I=DM(e,r);if(I){const{expression:P}=e[0],q=r[0];let H;if(q instanceof Date){const z=new Date(q.getTime()+1);H=rg(gM(P,new Un(q)),ng(P,new Un(z)))}else H=tg(P,new Un(q));A={whereFrom:I,whereCurrent:H,lastKey:this.lastSentKey}}}const j={where:f,limit:n,orderBy:e,cursor:A,offset:s??T,subscription:this},D=this.collection._sync.loadSubset(j);this.loadedSubsets.push(j),this.trackLoadSubsetPromise(D)}filterAndFlipChanges(e){if(this.loadedInitialState||this.skipFiltering)return e;const n=this.isBufferingForTruncate,r=[];for(const s of e){let a=s;if(this.sentKeys.has(s.key)){if(s.type==="insert")continue;s.type==="delete"&&this.sentKeys.delete(s.key)}else{if(s.type==="update")a={...s,type:"insert",previousValue:void 0};else if(s.type==="delete"&&!n)continue;this.sentKeys.add(s.key)}r.push(a)}return r}trackSentKeys(e){if(!(this.loadedInitialState||this.skipFiltering))for(const n of e)n.type==="delete"?this.sentKeys.delete(n.key):this.sentKeys.add(n.key)}markAllStateAsSeen(){this.skipFiltering=!0}unsubscribe(){this.truncateCleanup?.(),this.truncateCleanup=void 0,this.isBufferingForTruncate=!1,this.truncateBuffer=[],this.pendingTruncateRefetches.clear();for(const e of this.loadedSubsets)this.collection._sync.unloadSubset(e);this.loadedSubsets=[],this.emitInner("unsubscribed",{type:"unsubscribed",subscription:this}),this.clearListeners()}}class LM{constructor(){this.activeSubscribersCount=0,this.changeSubscriptions=new Set,this.batchedEvents=[],this.shouldBatchEvents=!1}setDeps(e){this.lifecycle=e.lifecycle,this.sync=e.sync,this.events=e.events,this.collection=e.collection}emitEmptyReadyEvent(){for(const e of this.changeSubscriptions)e.emitEvents([])}emitEvents(e,n=!1){if(this.shouldBatchEvents&&!n){this.batchedEvents.push(...e);return}let r=e;if(n&&(this.batchedEvents.length>0&&(r=[...this.batchedEvents,...e]),this.batchedEvents=[],this.shouldBatchEvents=!1),r.length!==0)for(const s of this.changeSubscriptions)s.emitEvents(r)}subscribeChanges(e,n={}){this.addSubscriber();const r=new jM(this.collection,e,{...n,onUnsubscribe:()=>{this.removeSubscriber(),this.changeSubscriptions.delete(r)}});return n.includeInitialState?r.requestSnapshot({trackLoadSubsetPromise:!1}):n.includeInitialState===!1&&r.markAllStateAsSeen(),this.changeSubscriptions.add(r),r}addSubscriber(){const e=this.activeSubscribersCount;this.activeSubscribersCount++,this.lifecycle.cancelGCTimer(),(this.lifecycle.status==="cleaned-up"||this.lifecycle.status==="idle")&&this.sync.startSync(),this.events.emitSubscribersChange(this.activeSubscribersCount,e)}removeSubscriber(){const e=this.activeSubscribersCount;if(this.activeSubscribersCount--,this.activeSubscribersCount===0)this.lifecycle.startGCTimer();else if(this.activeSubscribersCount<0)throw new VO;this.events.emitSubscribersChange(this.activeSubscribersCount,e)}cleanup(){this.batchedEvents=[],this.shouldBatchEvents=!1}}const zM=t=>setTimeout(()=>{t({didTimeout:!0,timeRemaining:()=>50})},0),PM=t=>{clearTimeout(t)},BM=typeof window<"u"&&"requestIdleCallback"in window?(t,e)=>window.requestIdleCallback(t,e):(t,e)=>zM(t),rm=typeof window<"u"&&"cancelIdleCallback"in window?t=>window.cancelIdleCallback(t):PM;class $M{constructor(e,n){this.status="idle",this.hasBeenReady=!1,this.hasReceivedFirstCommit=!1,this.onFirstReadyCallbacks=[],this.gcTimeoutId=null,this.idleCallbackId=null,this.config=e,this.id=n}setDeps(e){this.indexes=e.indexes,this.events=e.events,this.changes=e.changes,this.sync=e.sync,this.state=e.state}validateStatusTransition(e,n){if(e===n)return;if(!{idle:["loading","error","cleaned-up"],loading:["ready","error","cleaned-up"],ready:["cleaned-up","error"],error:["cleaned-up","idle"],"cleaned-up":["loading","error"]}[e].includes(n))throw new qO(e,n,this.id)}setStatus(e,n=!1){if(e==="ready"&&!n)throw new Wl(`You can't directly call "setStatus('ready'). You must use markReady instead.`);this.validateStatusTransition(this.status,e);const r=this.status;this.status=e,e==="ready"&&!this.indexes.isIndexesResolved&&this.indexes.resolveAllIndexes().catch(s=>{console.warn(`${this.config.id?`[${this.config.id}] `:""}Failed to resolve indexes:`,s)}),this.events.emitStatusChange(e,r)}validateCollectionUsable(e){switch(this.status){case"error":throw new UO(e,this.id);case"cleaned-up":this.sync.startSync();break}}markReady(){if(this.validateStatusTransition(this.status,"ready"),this.status==="loading"){if(this.setStatus("ready",!0),!this.hasBeenReady){this.hasBeenReady=!0,this.hasReceivedFirstCommit||(this.hasReceivedFirstCommit=!0);const e=[...this.onFirstReadyCallbacks];this.onFirstReadyCallbacks=[],e.forEach(n=>n())}this.changes.changeSubscriptions.size>0&&this.changes.emitEmptyReadyEvent()}}startGCTimer(){this.gcTimeoutId&&clearTimeout(this.gcTimeoutId);const e=this.config.gcTime??3e5;e!==0&&(this.gcTimeoutId=setTimeout(()=>{this.changes.activeSubscribersCount===0&&this.scheduleIdleCleanup()},e))}cancelGCTimer(){this.gcTimeoutId&&(clearTimeout(this.gcTimeoutId),this.gcTimeoutId=null),this.idleCallbackId!==null&&(rm(this.idleCallbackId),this.idleCallbackId=null)}scheduleIdleCleanup(){this.idleCallbackId!==null&&rm(this.idleCallbackId),this.idleCallbackId=BM(e=>{this.changes.activeSubscribersCount===0?this.performCleanup(e)&&(this.idleCallbackId=null):this.idleCallbackId=null},{timeout:1e3})}performCleanup(e){return!e||e.timeRemaining()>0||e.didTimeout?(this.sync.cleanup(),this.state.cleanup(),this.changes.cleanup(),this.indexes.cleanup(),this.gcTimeoutId&&(clearTimeout(this.gcTimeoutId),this.gcTimeoutId=null),this.hasBeenReady=!1,this.onFirstReadyCallbacks=[],this.setStatus("cleaned-up"),this.events.cleanup(),!0):(this.scheduleIdleCleanup(),!1)}onFirstReady(e){if(this.hasBeenReady){e();return}this.onFirstReadyCallbacks.push(e)}cleanup(){this.idleCallbackId!==null&&(rm(this.idleCallbackId),this.idleCallbackId=null),this.performCleanup()}}const xy=Symbol("liveQueryInternal");class UM{constructor(e,n){this.preloadPromise=null,this.syncCleanupFn=null,this.syncLoadSubsetFn=null,this.syncUnloadSubsetFn=null,this.pendingLoadSubsetPromises=new Set,this.config=e,this.id=n,this.syncMode=e.syncMode??"eager"}setDeps(e){this.collection=e.collection,this.state=e.state,this.lifecycle=e.lifecycle,this._events=e.events}startSync(){if(!(this.lifecycle.status!=="idle"&&this.lifecycle.status!=="cleaned-up")){this.lifecycle.setStatus("loading");try{const e=qM(this.config.sync.sync({collection:this.collection,begin:()=>{this.state.pendingSyncedTransactions.push({committed:!1,operations:[],deletedKeys:new Set})},write:n=>{const r=this.state.pendingSyncedTransactions[this.state.pendingSyncedTransactions.length-1];if(!r)throw new aw;if(r.committed)throw new ow;let s;"key"in n?s=n.key:s=this.config.getKey(n.value);let a=n.type;if(n.type==="insert"){const u=this.state.syncedData.has(s),f=r.deletedKeys.has(s),d=r.truncate===!0;if(u&&!f&&!d){const m=this.state.syncedData.get(s);if(m!==void 0&&Rr(m,n.value))a="update";else{const y=this.config.utils[xy];throw new ZO(s,this.id,{hasCustomGetKey:y?.hasCustomGetKey??!1,hasJoins:y?.hasJoins??!1})}}}const l={...n,type:a,key:s};r.operations.push(l),a==="delete"&&r.deletedKeys.add(s)},commit:()=>{const n=this.state.pendingSyncedTransactions[this.state.pendingSyncedTransactions.length-1];if(!n)throw new lN;if(n.committed)throw new cN;n.committed=!0,this.state.commitPendingTransactions()},markReady:()=>{this.lifecycle.markReady()},truncate:()=>{const n=this.state.pendingSyncedTransactions[this.state.pendingSyncedTransactions.length-1];if(!n)throw new aw;if(n.committed)throw new ow;n.operations=[],n.deletedKeys.clear(),n.truncate=!0,n.optimisticSnapshot={upserts:new Map(this.state.optimisticUpserts),deletes:new Set(this.state.optimisticDeletes)}}}));if(this.syncCleanupFn=e?.cleanup??null,this.syncLoadSubsetFn=e?.loadSubset??null,this.syncUnloadSubsetFn=e?.unloadSubset??null,this.syncMode==="on-demand"&&!this.syncLoadSubsetFn)throw new Xl(`Collection "${this.id}" is configured with syncMode "on-demand" but the sync function did not return a loadSubset handler. Either provide a loadSubset handler or use syncMode "eager".`)}catch(e){throw this.lifecycle.setStatus("error"),e}}}preload(){return this.preloadPromise?this.preloadPromise:(this.syncMode==="on-demand"&&console.warn(`${this.id?`[${this.id}] `:""}Calling .preload() on a collection with syncMode "on-demand" is a no-op. In on-demand mode, data is only loaded when queries request it. Instead, create a live query and call .preload() on that to load the specific data you need. See https://tanstack.com/blog/tanstack-db-0.5-query-driven-sync for more details.`),this.preloadPromise=new Promise((e,n)=>{if(this.lifecycle.status==="ready"){e();return}if(this.lifecycle.status==="error"){n(new FO);return}if(this.lifecycle.onFirstReady(()=>{e()}),this.lifecycle.status==="idle"||this.lifecycle.status==="cleaned-up")try{this.startSync()}catch(r){n(r);return}}),this.preloadPromise)}get isLoadingSubset(){return this.pendingLoadSubsetPromises.size>0}trackLoadPromise(e){const n=!this.isLoadingSubset;this.pendingLoadSubsetPromises.add(e),n&&this._events.emit("loadingSubset:change",{type:"loadingSubset:change",collection:this.collection,isLoadingSubset:!0,previousIsLoadingSubset:!1,loadingSubsetTransition:"start"}),e.finally(()=>{const r=this.pendingLoadSubsetPromises.size===1&&this.pendingLoadSubsetPromises.has(e);this.pendingLoadSubsetPromises.delete(e),r&&this._events.emit("loadingSubset:change",{type:"loadingSubset:change",collection:this.collection,isLoadingSubset:!1,previousIsLoadingSubset:!0,loadingSubsetTransition:"end"})})}loadSubset(e){if(this.syncMode==="eager")return!0;if(this.syncLoadSubsetFn){const n=this.syncLoadSubsetFn(e);if(n instanceof Promise)return this.trackLoadPromise(n),n}return!0}unloadSubset(e){this.syncUnloadSubsetFn&&this.syncUnloadSubsetFn(e)}cleanup(){try{this.syncCleanupFn&&(this.syncCleanupFn(),this.syncCleanupFn=null)}catch(e){queueMicrotask(()=>{if(e instanceof Error){const n=new cw(this.id,e);throw n.cause=e,n.stack=e.stack,n}else throw new cw(this.id,e)})}this.preloadPromise=null}}function qM(t){if(typeof t=="function")return{cleanup:t};if(typeof t=="object")return t}function yk(t){return typeof t=="function"&&t.prototype!==void 0&&t.prototype.constructor===t}async function FM(t){return yk(t)?t:await t()}class VM{constructor(e,n,r,s,a,l){this.id=e,this.expression=n,this.name=r,this.resolver=s,this.options=a,this.collectionEntries=l,this.indexPromise=null,this.resolvedIndex=null,yk(this.resolver)&&(this.resolvedIndex=new this.resolver(this.id,this.expression,this.name,this.options),this.collectionEntries&&this.resolvedIndex.build(this.collectionEntries))}async resolve(){return this.resolvedIndex?this.resolvedIndex:(this.indexPromise||(this.indexPromise=this.createIndex()),this.resolvedIndex=await this.indexPromise,this.resolvedIndex)}isResolved(){return this.resolvedIndex!==null}getResolved(){if(!this.resolvedIndex)throw new Error(`Index ${this.id} has not been resolved yet. Ensure collection is synced.`);return this.resolvedIndex}getId(){return this.id}getName(){return this.name}getExpression(){return this.expression}async createIndex(){const e=await FM(this.resolver);return new e(this.id,this.expression,this.name,this.options)}}class HM{constructor(e,n){this.indexId=e,this.lazyIndex=n}get index(){return this.lazyIndex.getResolved()}get isReady(){return this.lazyIndex.isResolved()}async whenReady(){return await this.lazyIndex.resolve()}get id(){return this.indexId}get name(){return this.isReady?this.index.name:this.lazyIndex.getName()}get expression(){return this.lazyIndex.getExpression()}supports(e){return this.index.supports(e)}getStats(){return this.index.getStats()}matchesField(e){const n=this.expression;return n.type==="ref"&&n.path.length===e.length&&n.path.every((r,s)=>r===e[s])}get keyCount(){return this.index.keyCount}get indexedKeysSet(){return this.index.indexedKeysSet}get orderedEntriesArray(){return this.index.orderedEntriesArray}get valueMapData(){return this.index.valueMapData}equalityLookup(e){return this.index.equalityLookup?.(e)??new Set}rangeQuery(e){return this.index.rangeQuery?.(e)??new Set}inArrayLookup(e){return this.index.inArrayLookup?.(e)??new Set}_getLazyWrapper(){return this.lazyIndex}}class GM{constructor(){this.lazyIndexes=new Map,this.resolvedIndexes=new Map,this.isIndexesResolved=!1,this.indexCounter=0}setDeps(e){this.state=e.state,this.lifecycle=e.lifecycle}createIndex(e,n={}){this.lifecycle.validateCollectionUsable("createIndex");const r=++this.indexCounter,s=pM(),a=e(s),l=Xt(a),u=n.indexType??sg,f=new VM(r,l,n.name,u,n.options,this.state.entries());if(this.lazyIndexes.set(r,f),u===sg)try{const d=f.getResolved();this.resolvedIndexes.set(r,d)}catch(d){console.warn("Failed to resolve BTreeIndex:",d)}else if(typeof u=="function"&&u.prototype)try{const d=f.getResolved();this.resolvedIndexes.set(r,d)}catch{this.resolveSingleIndex(r,f).catch(d=>{console.warn("Failed to resolve single index:",d)})}else this.isIndexesResolved&&this.resolveSingleIndex(r,f).catch(d=>{console.warn("Failed to resolve single index:",d)});return new HM(r,f)}async resolveAllIndexes(){if(this.isIndexesResolved)return;const e=Array.from(this.lazyIndexes.entries()).map(async([n,r])=>{const s=await r.resolve();return s.build(this.state.entries()),this.resolvedIndexes.set(n,s),{indexId:n,resolvedIndex:s}});await Promise.all(e),this.isIndexesResolved=!0}async resolveSingleIndex(e,n){const r=await n.resolve();return r.build(this.state.entries()),this.resolvedIndexes.set(e,r),r}get indexes(){return this.resolvedIndexes}updateIndexes(e){for(const n of this.resolvedIndexes.values())for(const r of e)switch(r.type){case"insert":n.add(r.key,r.value);break;case"update":r.previousValue?n.update(r.key,r.previousValue,r.value):n.add(r.key,r.value);break;case"delete":n.remove(r.key,r.value);break}}cleanup(){this.lazyIndexes.clear(),this.resolvedIndexes.clear()}}var KM={};const ZM=new Set(["find","findLast","findIndex","findLastIndex","filter","map","flatMap","forEach","some","every","reduce","reduceRight"]),QM=new Set(["pop","push","shift","unshift","splice","sort","reverse","fill","copyWithin"]),JM=new Set(["set","delete","clear","add"]),YM=new Set(["entries","keys","values","forEach"]);function wy(t){return t!==null&&typeof t=="object"&&!(t instanceof Date)&&!(t instanceof RegExp)&&!hf(t)}function XM(t,e,n,r){if(ZM.has(t))return function(...s){const a=s[0];if(typeof a!="function")return e.apply(n.copy_,s);const l=(d,m)=>{if(wy(d)){const p={tracker:n,prop:String(m)},{proxy:y}=r(d,p);return y}return d},u=function(d,m,p){const y=l(d,m);return a.call(this,y,m,p)};if(t==="reduce"||t==="reduceRight"){const d=function(m,p,y,g){const v=l(p,y);return a.call(this,m,v,y,g)};return e.apply(n.copy_,[d,...s.slice(1)])}const f=e.apply(n.copy_,[u,...s.slice(1)]);if((t==="find"||t==="findLast")&&f&&typeof f=="object"){const d=n.copy_.indexOf(f);if(d!==-1)return l(f,d)}return t==="filter"&&Array.isArray(f)?f.map(d=>{const m=n.copy_.indexOf(d);return m!==-1?l(d,m):d}):f}}function WM(t,e){return function(){const n=t.copy_;let r=0;return{next(){if(r>=n.length)return{done:!0,value:void 0};const s=n[r];let a=s;if(wy(s)){const l={tracker:t,prop:String(r)},{proxy:u}=e(s,l);a=u}return r++,{done:!1,value:a}},[Symbol.iterator](){return this}}}}function Aw(t,e,n){return function(...r){const s=t.apply(e.copy_,r);return n(e),s}}function e4(t,e,n,r,s,a,l){if(YM.has(t)||e===Symbol.iterator)return function(...f){const d=n.apply(s.copy_,f);if(t==="forEach"){const p=f[0];if(typeof p=="function"){const y=function(g,v,x){const E=p.call(this,g,v,x);return l(s),E};return n.apply(r,[y,...f.slice(1)])}}if(t==="entries"||t==="values"||t===Symbol.iterator.toString()||e===Symbol.iterator){const p=d,y=new Map;if(t==="values"&&r instanceof Map)for(const[v,x]of s.copy_.entries())y.set(x,v);const g=new Map;if(r instanceof Set)for(const v of s.copy_.values())g.set(v,v);return{next(){const v=p.next();if(!v.done&&v.value&&typeof v.value=="object"){if(t==="entries"&&Array.isArray(v.value)&&v.value.length===2){if(v.value[1]&&typeof v.value[1]=="object"){const x=v.value[0],E={tracker:s,prop:x,updateMap:T=>{s.copy_ instanceof Map&&s.copy_.set(x,T)}},{proxy:S}=a(v.value[1],E);v.value[1]=S}}else if(t==="values"||t===Symbol.iterator.toString()||e===Symbol.iterator)if(t==="values"&&r instanceof Map){const x=y.get(v.value);if(x!==void 0){const E={tracker:s,prop:x,updateMap:T=>{s.copy_ instanceof Map&&s.copy_.set(x,T)}},{proxy:S}=a(v.value,E);v.value=S}}else if(r instanceof Set){const x=v.value,E={tracker:s,prop:x,updateSet:T=>{s.copy_ instanceof Set&&(s.copy_.delete(x),s.copy_.add(T),g.set(x,T))}},{proxy:S}=a(v.value,E);v.value=S}else{const x=Symbol("iterator-value"),{proxy:E}=a(v.value,{tracker:s,prop:x});v.value=E}}return v},[Symbol.iterator](){return this}}}return d}}function Je(...t){const e=typeof window<"u"&&typeof localStorage<"u";e&&localStorage.getItem("DEBUG")==="true"?console.log("[proxy]",...t):!e&&typeof process<"u"&&KM.DEBUG==="true"&&console.log("[proxy]",...t)}function ys(t,e=new WeakMap){if(t==null||typeof t!="object")return t;if(e.has(t))return e.get(t);if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp)return new RegExp(t.source,t.flags);if(Array.isArray(t)){const s=[];return e.set(t,s),t.forEach((a,l)=>{s[l]=ys(a,e)}),s}if(ArrayBuffer.isView(t)&&!(t instanceof DataView)){const s=Object.getPrototypeOf(t).constructor,a=new s(t.length);e.set(t,a);for(let l=0;l<t.length;l++)a[l]=t[l];return a}if(t instanceof Map){const s=new Map;return e.set(t,s),t.forEach((a,l)=>{s.set(l,ys(a,e))}),s}if(t instanceof Set){const s=new Set;return e.set(t,s),t.forEach(a=>{s.add(ys(a,e))}),s}if(hf(t))return t;const n={};e.set(t,n);for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(n[s]=ys(t[s],e));const r=Object.getOwnPropertySymbols(t);for(const s of r)n[s]=ys(t[s],e);return n}let Rw=0;function t4(){return Rw+=1,Rw}function Sy(t,e){const n=new Map;function r(p,y){if(Je("Object ID:",p.constructor.name),n.has(p))return n.get(p);{const g=Sy(p,y);return n.set(p,g),g}}const s=new Map,a={copy_:ys(t),originalObject:ys(t),proxyCount:t4(),modified:!1,assigned_:{},parent:e,target:t};Je("createChangeProxy called for target",t,a.proxyCount);function l(p){p.modified||(p.modified=!0),p.parent&&(Je("propagating change to parent"),"updateMap"in p.parent?p.parent.updateMap(p.copy_):"updateSet"in p.parent?p.parent.updateSet(p.copy_):(p.parent.tracker.copy_[p.parent.prop]=p.copy_,p.parent.tracker.assigned_[p.parent.prop]=!0),l(p.parent.tracker))}function u(p){if(Je("checkIfReverted called with assigned keys:",Object.keys(p.assigned_)),Object.keys(p.assigned_).length===0&&Object.getOwnPropertySymbols(p.assigned_).length===0)return Je("No assigned properties, returning true"),!0;for(const g in p.assigned_)if(p.assigned_[g]===!0){const v=p.copy_[g],x=p.originalObject[g];if(Je(`Checking property ${String(g)}, current:`,v,"original:",x),!Rr(v,x))return Je(`Property ${String(g)} is different, returning false`),!1}else if(p.assigned_[g]===!1)return Je(`Property ${String(g)} was deleted, returning false`),!1;const y=Object.getOwnPropertySymbols(p.assigned_);for(const g of y)if(p.assigned_[g]===!0){const v=p.copy_[g],x=p.originalObject[g];if(!Rr(v,x))return Je("Symbol property is different, returning false"),!1}else if(p.assigned_[g]===!1)return Je("Symbol property was deleted, returning false"),!1;return Je("All properties match original values, returning true"),!0}function f(p,y){Je("checkParentStatus called for child prop:",y);const g=u(p);Je("Parent checkIfReverted returned:",g),g&&(Je("Parent is fully reverted, clearing tracking"),p.modified=!1,p.assigned_={},p.parent&&(Je("Continuing up the parent chain"),f(p.parent.tracker,p.parent.prop)))}function d(p){if(Je("createObjectProxy",p),s.has(p))return Je("proxyCache found match"),s.get(p);const y=new Proxy(p,{get(g,v){Je("get",g,v);const x=a.copy_[v]??a.originalObject[v],E=a.originalObject[v];if(Je("value (at top of proxy get)",x),Object.getOwnPropertyDescriptor(g,v)?.get)return x;if(typeof x=="function"){if(Array.isArray(g)){const T=v.toString();if(QM.has(T))return Aw(x,a,l);const A=XM(T,x,a,r);if(A)return A;if(v===Symbol.iterator)return WM(a,r)}if(g instanceof Map||g instanceof Set){const T=v.toString();if(JM.has(T))return Aw(x,a,l);const A=e4(T,v,x,g,a,r,l);if(A)return A}return x.bind(g)}if(wy(x)){const T={tracker:a,prop:String(v)},{proxy:A}=r(E,T);return s.set(x,A),A}return x},set(g,v,x){const E=a.copy_[v];if(Je(`set called for property ${String(v)}, current:`,E,"new:",x),Rr(E,x))Je("Value unchanged, not tracking");else{const S=a.originalObject[v],T=Rr(x,S);if(Je("value:",x,"original:",S,"isRevertToOriginal:",T),T){Je(`Reverting property ${String(v)} to original value`),delete a.assigned_[v.toString()],Je(`Updating copy with original value for ${String(v)}`),a.copy_[v]=ys(S),Je("Checking if all properties reverted");const A=u(a);Je("All reverted:",A),A?(Je("All properties reverted, clearing tracking"),a.modified=!1,a.assigned_={},e&&(Je("Updating parent for property:",e.prop),f(e.tracker,e.prop))):(Je("Some properties still changed, keeping modified flag"),a.modified=!0)}else Je(`Setting new value for property ${String(v)}`),a.copy_[v]=x,a.assigned_[v.toString()]=!0,Je("Marking object and ancestors as modified",a),l(a)}return!0},defineProperty(g,v,x){const E=Reflect.defineProperty(g,v,x);return E&&"value"in x&&(a.copy_[v]=ys(x.value),a.assigned_[v.toString()]=!0,l(a)),E},getOwnPropertyDescriptor(g,v){return Reflect.getOwnPropertyDescriptor(g,v)},preventExtensions(g){return Reflect.preventExtensions(g)},isExtensible(g){return Reflect.isExtensible(g)},deleteProperty(g,v){Je("deleteProperty",g,v);const x=typeof v=="symbol"?v.toString():v;if(x in g){const E=x in a.originalObject,S=Reflect.deleteProperty(g,v);return S&&(E?(a.assigned_[x]=!1,l(a)):(delete a.assigned_[x],Object.keys(a.assigned_).length===0&&Object.getOwnPropertySymbols(a.assigned_).length===0?a.modified=!1:a.modified=!0)),S}return!0}});return s.set(p,y),y}return{proxy:d(a.copy_),getChanges:()=>{if(Je("getChanges called, modified:",a.modified),Je(a),!a.modified)return Je("Object not modified, returning empty object"),{};if(typeof a.copy_!="object"||Array.isArray(a.copy_)||Object.keys(a.assigned_).length===0)return a.copy_;const p={};for(const y in a.copy_)a.assigned_[y]===!0&&y in a.copy_&&(p[y]=a.copy_[y]);return Je("Returning copy:",p),p}}}function n4(t){const e=t.map(n=>Sy(n));return{proxies:e.map(n=>n.proxy),getChanges:()=>e.map(n=>n.getChanges())}}function r4(t,e){const{proxy:n,getChanges:r}=Sy(t);return e(n),r()}function s4(t,e){const{proxies:n,getChanges:r}=n4(t);return e(n),r()}function i4(){let t,e,n=!0;return{promise:new Promise((s,a)=>{t=l=>{n=!1,s(l)},e=l=>{n=!1,a(l)}}),resolve:t,reject:e,isPending:()=>n}}function a4(t){return typeof t=="object"&&t!==null&&typeof t.hasPendingGraphRun=="function"}class o4{constructor(){this.contexts=new Map,this.clearListeners=new Set}getOrCreateContext(e){let n=this.contexts.get(e);return n||(n={queue:[],jobs:new Map,dependencies:new Map,completed:new Set},this.contexts.set(e,n)),n}schedule({contextId:e,jobId:n,dependencies:r,run:s}){if(typeof e>"u"){s();return}const a=this.getOrCreateContext(e);if(a.jobs.has(n)||a.queue.push(n),a.jobs.set(n,s),r){const l=new Set(r);l.delete(n),a.dependencies.set(n,l)}else a.dependencies.has(n)||a.dependencies.set(n,new Set);a.completed.delete(n)}flush(e){const n=this.contexts.get(e);if(!n)return;const{queue:r,jobs:s,dependencies:a,completed:l}=n;for(;r.length>0;){let u=!1;const f=r.length;for(let d=0;d<f;d++){const m=r.shift(),p=s.get(m);if(!p){a.delete(m),l.delete(m);continue}const y=a.get(m);let g=!y;if(y){g=!0;for(const v of y){if(v===m)continue;const x=a4(v)&&v.hasPendingGraphRun(e);if(s.has(v)&&!l.has(v)||!s.has(v)&&x){g=!1;break}}}g?(s.delete(m),a.delete(m),p(),l.add(m),u=!0):r.push(m)}if(!u)throw new Error(`Scheduler detected unresolved dependencies for context ${String(e)}.`)}this.contexts.delete(e)}flushAll(){for(const e of Array.from(this.contexts.keys()))this.flush(e)}clear(e){this.contexts.delete(e),this.clearListeners.forEach(n=>n(e))}onClear(e){return this.clearListeners.add(e),()=>this.clearListeners.delete(e)}hasPendingJobs(e){const n=this.contexts.get(e);return!!n&&n.jobs.size>0}clearJob(e,n){const r=this.contexts.get(e);r&&(r.jobs.delete(n),r.dependencies.delete(n),r.completed.delete(n),r.queue=r.queue.filter(s=>s!==n),r.jobs.size===0&&this.contexts.delete(e))}}const yf=new o4,bf=[];let $l=[],l4=0;function c4(t,e){switch(`${t.type}-${e.type}`){case"insert-update":return{...t,type:"insert",original:{},modified:e.modified,changes:{...t.changes,...e.changes},key:t.key,globalKey:t.globalKey,metadata:e.metadata??t.metadata,syncMetadata:{...t.syncMetadata,...e.syncMetadata},mutationId:e.mutationId,updatedAt:e.updatedAt};case"insert-delete":return null;case"update-delete":return e;case"update-update":return{...e,original:t.original,changes:{...t.changes,...e.changes},metadata:e.metadata??t.metadata,syncMetadata:{...t.syncMetadata,...e.syncMetadata}};case"delete-delete":case"insert-insert":return e;default:{const n=`${t.type}-${e.type}`;throw new Error(`Unhandled mutation combination: ${n}`)}}}function Au(t){const e=new h4(t);return bf.push(e),e}function Qu(){if($l.length>0)return $l.slice(-1)[0]}function u4(t){yf.clear(t.id),$l.push(t)}function f4(t){try{yf.flush(t.id)}finally{$l=$l.filter(e=>e.id!==t.id)}}function d4(t){const e=bf.findIndex(n=>n.id===t.id);e!==-1&&bf.splice(e,1)}class h4{constructor(e){if(typeof e.mutationFn>"u")throw new sN;this.id=e.id??crypto.randomUUID(),this.mutationFn=e.mutationFn,this.state="pending",this.mutations=[],this.isPersisted=i4(),this.autoCommit=e.autoCommit??!0,this.createdAt=new Date,this.sequenceNumber=l4++,this.metadata=e.metadata??{}}setState(e){this.state=e,(e==="completed"||e==="failed")&&d4(this)}mutate(e){if(this.state!=="pending")throw new iN;u4(this);try{e()}finally{f4(this)}return this.autoCommit&&this.commit().catch(()=>{}),this}applyMutations(e){for(const n of e){const r=this.mutations.findIndex(s=>s.globalKey===n.globalKey);if(r>=0){const s=this.mutations[r],a=c4(s,n);a===null?this.mutations.splice(r,1):this.mutations[r]=a}else this.mutations.push(n)}}rollback(e){const n=e?.isSecondaryRollback??!1;if(this.state==="completed")throw new aN;if(this.setState("failed"),!n){const r=new Set;this.mutations.forEach(s=>r.add(s.globalKey));for(const s of bf)s.state==="pending"&&s.mutations.some(a=>r.has(a.globalKey))&&s.rollback({isSecondaryRollback:!0})}return this.isPersisted.reject(this.error?.error),this.touchCollection(),this}touchCollection(){const e=new Set;for(const n of this.mutations)e.has(n.collection.id)||(n.collection._state.onTransactionStateChange(),n.collection._state.pendingSyncedTransactions.length>0&&n.collection._state.commitPendingTransactions(),e.add(n.collection.id))}async commit(){if(this.state!=="pending")throw new oN;if(this.setState("persisting"),this.mutations.length===0)return this.setState("completed"),this.isPersisted.resolve(this),this;try{await this.mutationFn({transaction:this}),this.setState("completed"),this.touchCollection(),this.isPersisted.resolve(this)}catch(e){const n=e instanceof Error?e:new Error(String(e));throw this.error={message:n.message,error:n},this.rollback(),n}return this}compareCreatedAt(e){const n=this.createdAt.getTime()-e.createdAt.getTime();return n!==0?n:this.sequenceNumber-e.sequenceNumber}}class p4{constructor(e,n){this.insert=(r,s)=>{this.lifecycle.validateCollectionUsable("insert");const a=this.state,l=Qu();if(!l&&!this.config.onInsert)throw new tN;const u=Array.isArray(r)?r:[r],f=[],d=new Set;if(u.forEach(m=>{const p=this.validateData(m,"insert"),y=this.config.getKey(p);if(this.state.has(y)||d.has(y))throw new KO(y);d.add(y);const g=this.generateGlobalKey(y,m),v={mutationId:crypto.randomUUID(),original:{},modified:p,changes:Object.fromEntries(Object.keys(m).map(x=>[x,p[x]])),globalKey:g,key:y,metadata:s?.metadata,syncMetadata:this.config.sync.getSyncMetadata?.()||{},optimistic:s?.optimistic??!0,type:"insert",createdAt:new Date,updatedAt:new Date,collection:this.collection};f.push(v)}),l)return l.applyMutations(f),a.transactions.set(l.id,l),a.scheduleTransactionCleanup(l),a.recomputeOptimisticState(!0),l;{const m=Au({mutationFn:async p=>await this.config.onInsert({transaction:p.transaction,collection:this.collection})});return m.applyMutations(f),m.commit().catch(()=>{}),a.transactions.set(m.id,m),a.scheduleTransactionCleanup(m),a.recomputeOptimisticState(!0),m}},this.delete=(r,s)=>{const a=this.state;this.lifecycle.validateCollectionUsable("delete");const l=Qu();if(!l&&!this.config.onDelete)throw new rN;if(Array.isArray(r)&&r.length===0)throw new WO;const u=Array.isArray(r)?r:[r],f=[];for(const m of u){if(!this.state.has(m))throw new eN(m);const p=this.generateGlobalKey(m,this.state.get(m)),y={mutationId:crypto.randomUUID(),original:this.state.get(m),modified:this.state.get(m),changes:this.state.get(m),globalKey:p,key:m,metadata:s?.metadata,syncMetadata:a.syncedMetadata.get(m)||{},optimistic:s?.optimistic??!0,type:"delete",createdAt:new Date,updatedAt:new Date,collection:this.collection};f.push(y)}if(l)return l.applyMutations(f),a.transactions.set(l.id,l),a.scheduleTransactionCleanup(l),a.recomputeOptimisticState(!0),l;const d=Au({autoCommit:!0,mutationFn:async m=>this.config.onDelete({transaction:m.transaction,collection:this.collection})});return d.applyMutations(f),d.commit().catch(()=>{}),a.transactions.set(d.id,d),a.scheduleTransactionCleanup(d),a.recomputeOptimisticState(!0),d},this.id=n,this.config=e}setDeps(e){this.lifecycle=e.lifecycle,this.state=e.state,this.collection=e.collection}ensureStandardSchema(e){if(e&&"~standard"in e)return e;throw new $O}validateData(e,n,r){if(!this.config.schema)return e;const s=this.ensureStandardSchema(this.config.schema);if(n==="update"&&r){const l=this.state.get(r);if(l&&e&&typeof e=="object"&&typeof l=="object"){const u=Object.assign({},l,e),f=s["~standard"].validate(u);if(f instanceof Promise)throw new iw;if("issues"in f&&f.issues){const y=f.issues.map(g=>({message:g.message,path:g.path?.map(v=>String(v))}));throw new sw(n,y)}const d=f.value,m=Object.keys(e);return Object.fromEntries(m.map(y=>[y,d[y]]))}}const a=s["~standard"].validate(e);if(a instanceof Promise)throw new iw;if("issues"in a&&a.issues){const l=a.issues.map(u=>({message:u.message,path:u.path?.map(f=>String(f))}));throw new sw(n,l)}return a.value}generateGlobalKey(e,n){if(typeof e!="string"&&typeof e!="number")throw typeof e>"u"?new HO(n):new GO(e,n);return`KEY::${this.id}/${e}`}update(e,n,r){if(typeof e>"u")throw new QO;const s=this.state;this.lifecycle.validateCollectionUsable("update");const a=Qu();if(!a&&!this.config.onUpdate)throw new nN;const l=Array.isArray(e),u=l?e:[e];if(l&&u.length===0)throw new JO;const f=typeof n=="function"?n:r,d=typeof n=="function"?{}:n,m=u.map(v=>{const x=this.state.get(v);if(!x)throw new YO(v);return x});let p;l?p=s4(m,f):p=[r4(m[0],f)];const y=u.map((v,x)=>{const E=p[x];if(!E||Object.keys(E).length===0)return null;const S=m[x],T=this.validateData(E,"update",v),A=Object.assign({},S,T),j=this.config.getKey(S),D=this.config.getKey(A);if(j!==D)throw new XO(j,D);const I=this.generateGlobalKey(D,A);return{mutationId:crypto.randomUUID(),original:S,modified:A,changes:Object.fromEntries(Object.keys(E).map(P=>[P,A[P]])),globalKey:I,key:v,metadata:d.metadata,syncMetadata:s.syncedMetadata.get(v)||{},optimistic:d.optimistic??!0,type:"update",createdAt:new Date,updatedAt:new Date,collection:this.collection}}).filter(Boolean);if(y.length===0){const v=Au({mutationFn:async()=>{}});return v.commit().catch(()=>{}),s.scheduleTransactionCleanup(v),v}if(a)return a.applyMutations(y),s.transactions.set(a.id,a),s.scheduleTransactionCleanup(a),s.recomputeOptimisticState(!0),a;const g=Au({mutationFn:async v=>this.config.onUpdate({transaction:v.transaction,collection:this.collection})});return g.applyMutations(y),g.commit().catch(()=>{}),s.transactions.set(g.id,g),s.scheduleTransactionCleanup(g),s.recomputeOptimisticState(!0),g}}class m4 extends gk{constructor(){super()}setDeps(e){this.collection=e.collection}emit(e,n){this.emitInner(e,n)}emitStatusChange(e,n){this.emit("status:change",{type:"status:change",collection:this.collection,previousStatus:n,status:e});const r=`status:${e}`;this.emit(r,{type:r,collection:this.collection,previousStatus:n,status:e})}emitSubscribersChange(e,n){this.emit("subscribers:change",{type:"subscribers:change",collection:this.collection,previousSubscriberCount:n,subscriberCount:e})}cleanup(){this.clearListeners()}}function bk(t){const e=new ky(t);return t.utils?e.utils=t.utils:e.utils={},e}class ky{constructor(e){if(this.utils={},this.insert=(n,r)=>this._mutations.insert(n,r),this.delete=(n,r)=>this._mutations.delete(n,r),!e)throw new PO;if(!e.sync)throw new BO;e.id?this.id=e.id:this.id=crypto.randomUUID(),this.config={...e,autoIndex:e.autoIndex??"eager"},this._changes=new LM,this._events=new m4,this._indexes=new GM,this._lifecycle=new $M(e,this.id),this._mutations=new p4(e,this.id),this._state=new MM(e),this._sync=new UM(e,this.id),this.comparisonOpts=g4(e),this._changes.setDeps({collection:this,lifecycle:this._lifecycle,sync:this._sync,events:this._events}),this._events.setDeps({collection:this}),this._indexes.setDeps({state:this._state,lifecycle:this._lifecycle}),this._lifecycle.setDeps({changes:this._changes,events:this._events,indexes:this._indexes,state:this._state,sync:this._sync}),this._mutations.setDeps({collection:this,lifecycle:this._lifecycle,state:this._state}),this._state.setDeps({collection:this,lifecycle:this._lifecycle,changes:this._changes,indexes:this._indexes,events:this._events}),this._sync.setDeps({collection:this,state:this._state,lifecycle:this._lifecycle,events:this._events}),e.startSync===!0&&this._sync.startSync()}get status(){return this._lifecycle.status}get subscriberCount(){return this._changes.activeSubscribersCount}onFirstReady(e){return this._lifecycle.onFirstReady(e)}isReady(){return this._lifecycle.status==="ready"}get isLoadingSubset(){return this._sync.isLoadingSubset}startSyncImmediate(){this._sync.startSync()}preload(){return this._sync.preload()}get(e){return this._state.get(e)}has(e){return this._state.has(e)}get size(){return this._state.size}*keys(){yield*this._state.keys()}*values(){yield*this._state.values()}*entries(){yield*this._state.entries()}*[Symbol.iterator](){yield*this._state[Symbol.iterator]()}forEach(e){return this._state.forEach(e)}map(e){return this._state.map(e)}getKeyFromItem(e){return this.config.getKey(e)}createIndex(e,n={}){return this._indexes.createIndex(e,n)}get indexes(){return this._indexes.indexes}validateData(e,n,r){return this._mutations.validateData(e,n,r)}get compareOptions(){return{...this.comparisonOpts}}update(e,n,r){return this._mutations.update(e,n,r)}get state(){const e=new Map;for(const[n,r]of this.entries())e.set(n,r);return e}stateWhenReady(){return this.size>0||this.isReady()?Promise.resolve(this.state):this.preload().then(()=>this.state)}get toArray(){return Array.from(this.values())}toArrayWhenReady(){return this.size>0||this.isReady()?Promise.resolve(this.toArray):this.preload().then(()=>this.toArray)}currentStateAsChanges(e={}){return OM(this,e)}subscribeChanges(e,n={}){return this._changes.subscribeChanges(e,n)}on(e,n){return this._events.on(e,n)}once(e,n){return this._events.once(e,n)}off(e,n){this._events.off(e,n)}waitFor(e,n){return this._events.waitFor(e,n)}async cleanup(){return this._lifecycle.cleanup(),Promise.resolve()}}function g4(t){if(t.defaultStringCollation){const e=t.defaultStringCollation;return{stringSort:e.stringSort??"locale",locale:e.stringSort==="locale"?e.locale:void 0,localeOptions:e.stringSort==="locale"?e.localeOptions:void 0}}else return{stringSort:"locale"}}class Ut{constructor(e={}){this.query={},this.query={...e}}_createRefForSource(e,n){let r;try{r=Object.keys(e)}catch{const u=e===null?"null":"undefined";throw new Cu(n,u)}if(Array.isArray(e))throw new Cu(n,"array");if(r.length!==1)throw r.length===0?new Cu(n,"empty object"):r.every(u=>!isNaN(Number(u)))?new Cu(n,"string"):new uN(n);const s=r[0],a=e[s];let l;if(a instanceof ky)l=new Ka(a,s);else if(a instanceof Ut){const u=a._getQuery();if(!u.from)throw new fN(n);l=new xr(u,s)}else throw new dN(s);return[s,l]}from(e){const[,n]=this._createRefForSource(e,"from clause");return new Ut({...this.query,from:n})}join(e,n,r="left"){const[s,a]=this._createRefForSource(e,"join clause"),u=[...this._getCurrentAliases(),s],f=Ea(u),d=n(f);let m,p;if(d.type==="func"&&d.name==="eq"&&d.args.length===2)m=d.args[0],p=d.args[1];else throw new hN;const y={from:a,type:r,left:m,right:p},g=this.query.join||[];return new Ut({...this.query,join:[...g,y]})}leftJoin(e,n){return this.join(e,n,"left")}rightJoin(e,n){return this.join(e,n,"right")}innerJoin(e,n){return this.join(e,n,"inner")}fullJoin(e,n){return this.join(e,n,"full")}where(e){const n=this._getCurrentAliases(),r=Ea(n),s=e(r),a=this.query.where||[];return new Ut({...this.query,where:[...a,s]})}having(e){const n=this._getCurrentAliases(),r=Ea(n),s=e(r),a=this.query.having||[];return new Ut({...this.query,having:[...a,s]})}select(e){const n=this._getCurrentAliases(),r=Ea(n),s=e(r),a=_k(s);return new Ut({...this.query,select:a,fnSelect:void 0})}orderBy(e,n="asc"){const r=this._getCurrentAliases(),s=Ea(r),a=e(s),l=typeof n=="string"?{direction:n,nulls:"first"}:{direction:n.direction??"asc",nulls:n.nulls??"first",stringSort:n.stringSort,locale:n.stringSort==="locale"?n.locale:void 0,localeOptions:n.stringSort==="locale"?n.localeOptions:void 0},u=m=>({expression:Xt(m),compareOptions:l}),f=Array.isArray(a)?a.map(m=>u(m)):[u(a)],d=this.query.orderBy||[];return new Ut({...this.query,orderBy:[...d,...f]})}groupBy(e){const n=this._getCurrentAliases(),r=Ea(n),s=e(r),a=Array.isArray(s)?s.map(u=>Xt(u)):[Xt(s)],l=this.query.groupBy||[];return new Ut({...this.query,groupBy:[...l,...a]})}limit(e){return new Ut({...this.query,limit:e})}offset(e){return new Ut({...this.query,offset:e})}distinct(){return new Ut({...this.query,distinct:!0})}findOne(){return new Ut({...this.query,singleResult:!0})}_getCurrentAliases(){const e=[];if(this.query.from&&e.push(this.query.from.alias),this.query.join)for(const n of this.query.join)e.push(n.from.alias);return e}get fn(){const e=this;return{select(n){return new Ut({...e.query,select:void 0,fnSelect:n})},where(n){return new Ut({...e.query,fnWhere:[...e.query.fnWhere||[],n]})},having(n){return new Ut({...e.query,fnHaving:[...e.query.fnHaving||[],n]})}}}_getQuery(){if(!this.query.from)throw new pN;return this.query}}function y4(t){return t===void 0?Xt(null):t instanceof lk||t instanceof Sr||t instanceof On||t instanceof Un?t:Xt(t)}function b4(t){return t!==null&&typeof t=="object"&&!fy(t)&&!t.__refProxy}function _k(t){if(!b4(t))return y4(t);const e={};for(const[n,r]of Object.entries(t)){if(typeof n=="string"&&n.startsWith("__SPREAD_SENTINEL__")){e[n]=r;continue}e[n]=_k(r)}return e}function _4(t){const e=t(new Ut);return vk(e)}function vk(t){return t._getQuery()}function v4(t){const e=x4(t);let n=t,r,s=0;const a=10;for(;s<a&&!Rr(n,r);)r=n,n=ag(n),s++;return{optimizedQuery:xk(n),sourceWhereClauses:e}}function x4(t){const e=new Map;if(!t.where||t.where.length===0)return e;const r=lg(t.where).map(a=>wk(a)),s=Sk(r);for(const[a,l]of s.singleSource)w4(t,a)&&e.set(a,l);return e}function w4(t,e){if(t.from.alias===e)return t.from.type==="collectionRef";if(t.join){for(const n of t.join)if(n.from.alias===e)return n.from.type==="collectionRef"}return!1}function ag(t){const e={...t,from:t.from.type==="queryRef"?new xr(ag(t.from.query),t.from.alias):t.from,join:t.join?.map(n=>({...n,from:n.from.type==="queryRef"?new xr(ag(n.from.query),n.from.alias):n.from}))};return S4(e)}function S4(t){if(!t.where||t.where.length===0)return t;if(!t.join||t.join.length===0){if(t.where.length>1){const u=lg(t.where),f=_f(u);return{...t,where:[f]}}return t}const e=t.where.filter(u=>!rw(u)),r=lg(e).map(u=>wk(u)),s=Sk(r),a=E4(t,s),l=t.where.filter(u=>rw(u));return l.length>0&&(a.where=[...a.where||[],...l]),a}function xk(t){return{...t,from:og(t.from),join:t.join?.map(e=>({...e,from:og(e.from)}))}}function og(t){if(t.type==="collectionRef")return t;const e=xk(t.query);if(k4(e)){const n=og(e.from);return n.type==="collectionRef"?new Ka(n.collection,t.alias):new xr(n.query,t.alias)}return new xr(e,t.alias)}function k4(t){return(!t.where||t.where.length===0)&&!t.select&&(!t.groupBy||t.groupBy.length===0)&&(!t.having||t.having.length===0)&&(!t.orderBy||t.orderBy.length===0)&&(!t.join||t.join.length===0)&&t.limit===void 0&&t.offset===void 0&&!t.fnSelect&&(!t.fnWhere||t.fnWhere.length===0)&&(!t.fnHaving||t.fnHaving.length===0)}function lg(t){const e=[];for(const n of t){const r=dy(n);e.push(...Ey(r))}return e}function Ey(t){if(t.type==="func"&&t.name==="and"){const e=[];for(const n of t.args)e.push(...Ey(n));return e}else return[t]}function wk(t){const e=new Set;let n=!1;function r(s){switch(s.type){case"ref":if(s.path&&s.path.length>0){const a=s.path[0];a&&(e.add(a),s.path.length===1&&(n=!0))}break;case"func":s.args&&s.args.forEach(r);break;case"val":break;case"agg":s.args&&s.args.forEach(r);break}}return r(t),{expression:t,touchedSources:e,hasNamespaceOnlyRef:n}}function Sk(t){const e=new Map,n=[];for(const a of t)if(a.touchedSources.size===1&&!a.hasNamespaceOnlyRef){const l=Array.from(a.touchedSources)[0];e.has(l)||e.set(l,[]),e.get(l).push(a.expression)}else(a.touchedSources.size>1||a.hasNamespaceOnlyRef)&&n.push(a.expression);const r=new Map;for(const[a,l]of e)r.set(a,_f(l));const s=n.length>0?_f(n):void 0;return{singleSource:r,multiSource:s}}function E4(t,e){const n=new Set,r=Ow(t.from,e.singleSource,n),s=t.join?t.join.map(d=>({...d,from:Ow(d.from,e.singleSource,n)})):void 0,a=[];e.multiSource&&a.push(e.multiSource);const l=t.join&&t.join.some(d=>d.type==="left"||d.type==="right"||d.type==="full");for(const[d,m]of e.singleSource)n.has(d)?l&&a.push(LO(m)):a.push(m);const u=a.length>1?[_f(a.flatMap(d=>Ey(dy(d))))]:a;return{select:t.select,groupBy:t.groupBy?[...t.groupBy]:void 0,having:t.having?[...t.having]:void 0,orderBy:t.orderBy?[...t.orderBy]:void 0,limit:t.limit,offset:t.offset,distinct:t.distinct,fnSelect:t.fnSelect,fnWhere:t.fnWhere?[...t.fnWhere]:void 0,fnHaving:t.fnHaving?[...t.fnHaving]:void 0,from:r,join:s,where:u.length>0?u:[]}}function La(t){return{from:t.from.type==="collectionRef"?new Ka(t.from.collection,t.from.alias):new xr(La(t.from.query),t.from.alias),select:t.select,join:t.join?t.join.map(e=>({type:e.type,left:e.left,right:e.right,from:e.from.type==="collectionRef"?new Ka(e.from.collection,e.from.alias):new xr(La(e.from.query),e.from.alias)})):void 0,where:t.where?[...t.where]:void 0,groupBy:t.groupBy?[...t.groupBy]:void 0,having:t.having?[...t.having]:void 0,orderBy:t.orderBy?[...t.orderBy]:void 0,limit:t.limit,offset:t.offset,fnSelect:t.fnSelect,fnWhere:t.fnWhere?[...t.fnWhere]:void 0,fnHaving:t.fnHaving?[...t.fnHaving]:void 0}}function Ow(t,e,n){const r=e.get(t.alias);if(!r)return t.type==="collectionRef"?new Ka(t.collection,t.alias):new xr(La(t.query),t.alias);if(t.type==="collectionRef"){const l={from:new Ka(t.collection,t.alias),where:[r]};return n.add(t.alias),new xr(l,t.alias)}if(!N4(t.query,r,t.alias))return new xr(La(t.query),t.alias);if(M4(t.query,r,t.alias))return new xr(La(t.query),t.alias);const s=t.query.where||[],a={...La(t.query),where:[...s,r]};return n.add(t.alias),new xr(a,t.alias)}function C4(t,e,n){return t.select?kk(t.select)||I4(t.select,e,n):!1}function T4(t){return t.groupBy&&t.groupBy.length>0}function A4(t){return t.having&&t.having.length>0}function R4(t){return t.orderBy&&t.orderBy.length>0&&(t.limit!==void 0||t.offset!==void 0)}function O4(t){return t.fnSelect||t.fnWhere&&t.fnWhere.length>0||t.fnHaving&&t.fnHaving.length>0}function N4(t,e,n){return!(C4(t,e,n)||T4(t)||A4(t)||R4(t)||O4(t))}function kk(t){for(const e of Object.values(t))if(typeof e=="object"){const n=e;if(n.type==="agg"||!("type"in n)&&kk(n))return!0}return!1}function Cy(t){const e=[];if(t==null||typeof t!="object")return e;switch(t.type){case"ref":e.push(t);break;case"func":case"agg":for(const n of t.args??[])e.push(...Cy(n));break}return e}function I4(t,e,n){const r=new Set;for(const[a,l]of Object.entries(t))a.startsWith("__SPREAD_SENTINEL__")||l instanceof On||r.add(a);const s=Cy(e);for(const a of s){const l=a.path;if(!Array.isArray(l)||l.length<2)continue;const u=l[0],f=l[1];if(u===n&&r.has(f))return!0}return!1}function M4(t,e,n){const r=Cy(e);if(r.every(a=>a.path[0]!==n))return!1;if(t.fnSelect)return!0;const s=t.select;if(!s)return!1;for(const a of r){const l=a.path;if(l.length<2||l[0]!==n)continue;const u=s[l[1]];if(!u)continue;if(!(u instanceof On)||u.path.length<2)return!0;const[f,d]=u.path;if(f!==n&&f!==t.from.alias||d!==l[1])return!0}return!1}function _f(t){if(t.length===0)throw new jN;return t.length===1?t[0]:new Sr("and",t)}function D4(t,e,n,r,s,a,l,u,f,d,m,p,y,g,v,x,E,S){let T=t;for(const A of e)T=j4(T,A,n,r,s,a,l,u,f,d,m,p,y,g,v,x,E,S);return T}function j4(t,e,n,r,s,a,l,u,f,d,m,p,y,g,v,x,E,S){const T=e.from.type==="collectionRef",{alias:A,input:j,collectionId:D}=z4(e.from,a,f,d,m,p,y,g,l,u,x,E,S);n[A]=j,T&&(E[A]=D);const I=f[r],P=f[D];if(!I)throw new lw(r);if(!P)throw new lw(D);const{activeSource:q,lazySource:H}=B4(e.type,I,P),z=Object.keys(n),{mainExpr:Q,joinedExpr:re}=L4(e.left,e.right,z,A),pe=qn(Q),X=qn(re);let V=t.pipe(An(([G,oe])=>[pe(oe),[G,oe]])),$=j.pipe(An(([G,oe])=>{const M={[A]:oe};return[X(M),[G,M]]}));if(!["inner","left","right","full"].includes(e.type))throw new SN(e.type);if(q){const G=q==="main"?e.from:v.from,oe=G.type==="queryRef"&&(G.query.limit||G.query.offset),M=Q.type==="func"||re.type==="func";if(!oe&&!M){const C=q==="main"?A:s;p.add(C);const N=q==="main"?V:$,R=zl(v,q==="main"?re:Q,H),te=R.collection,ce=R.path[0];ce&&sd(ce,R.path,te);const he=N.pipe(GI(xe=>{const Me=S[C]||C,je=d[Me];if(!je)throw new LN(Me,C,H.id,Object.keys(d));if(je.hasLoadedInitialState())return;const et=xe.getInner().map(([[Wt]])=>Wt),pt=new On(R.path);je.requestSnapshot({where:bM(pt,et),optimizedOnly:!0})||je.requestSnapshot()}));q==="main"?V=he:$=he}}return V.pipe(WI($,e.type),P4(e.type))}function L4(t,e,n,r){const s=n.filter(u=>u!==r),a=cg(t),l=cg(e);if(a&&s.includes(a)&&l===r)return{mainExpr:t,joinedExpr:e};if(a===r&&l&&s.includes(l))return{mainExpr:e,joinedExpr:t};throw!a||!l?new EN:a===l?new kN(a):s.includes(a)?l!==r?new TN(r):new AN:new CN(a)}function cg(t){switch(t.type){case"ref":return t.path[0]||null;case"func":{const e=new Set;for(const n of t.args){const r=cg(n);r&&e.add(r)}return e.size===1?Array.from(e)[0]:null}default:return null}}function z4(t,e,n,r,s,a,l,u,f,d,m,p,y){switch(t.type){case"collectionRef":{const g=e[t.alias];if(!g)throw new ck(t.alias,t.collection.id,Object.keys(e));return p[t.alias]=t.collection.id,{alias:t.alias,input:g,collectionId:t.collection.id}}case"queryRef":{const g=d.get(t.query)||t.query,v=m(g,e,n,r,s,a,l,u,f,d);Object.assign(p,v.aliasToCollectionId),Object.assign(y,v.aliasRemapping);const x=Object.keys(v.aliasToCollectionId).find(T=>v.aliasToCollectionId[T]===v.collectionId);x&&x!==t.alias&&(y[t.alias]=x);const S=v.pipeline.pipe(An(T=>{const[A,[j,D]]=T;return[A,j]}));return{alias:t.alias,input:S,collectionId:v.collectionId}}default:throw new RN(t.type)}}function P4(t){return function(e){return e.pipe(Qs(n=>{const[r,[s,a]]=n,l=s?.[1],u=a?.[1];return t==="inner"?!!(l&&u):t==="left"?!!l:t==="right"?!!u:!0}),An(n=>{const[r,[s,a]]=n,l=s?.[0],u=s?.[1],f=a?.[0],d=a?.[1],m={};return u&&Object.assign(m,u),d&&Object.assign(m,d),[`[${l},${f}]`,m]}))}}function B4(t,e,n){switch(t){case"left":return{activeSource:"main",lazySource:n};case"right":return{activeSource:"joined",lazySource:e};case"inner":return e.size<n.size?{activeSource:"main",lazySource:n}:{activeSource:"joined",lazySource:e};default:return{activeSource:void 0,lazySource:void 0}}}function ug(t){return t instanceof Un?t.value:t}function $4(t,e,n){const r=t.source(e);if(r&&typeof r=="object"){let s=n;const a=t.targetPath;if(a.length===0)for(const[l,u]of Object.entries(r))n[l]=ug(u);else for(let l=0;l<a.length;l++){const u=a[l];if(l===a.length-1){const f=s[u]??={};if(typeof f=="object")for(const[d,m]of Object.entries(r))f[d]=ug(m)}else{const f=s[u];(f==null||typeof f!="object")&&(s[u]={}),s=s[u]}}}}function U4(t,e,n){const r=t.alias.split(".");if(r.length===1)n[t.alias]=t.compiled(e);else{let s=n;for(let a=0;a<r.length-1;a++){const l=r[a],u=s[l];(u==null||typeof u!="object")&&(s[l]={}),s=s[l]}s[r[r.length-1]]=ug(t.compiled(e))}}function q4([t,e],n){const r={};for(const s of n)s.kind==="merge"?$4(s,e,r):U4(s,e,r);return[t,{...e,__select_results:r}]}function F4(t,e,n){const r=[];return Ek([],e,r),t.pipe(An(s=>q4(s,r)))}function V4(t){return t.type==="agg"}function H4(t){return t&&typeof t=="object"&&!fy(t)}function Ek(t,e,n){for(const[r,s]of Object.entries(e)){if(r.startsWith("__SPREAD_SENTINEL__")){const l=r.slice(19),u=l.lastIndexOf("__"),f=u>=0?l.slice(0,u):l,d=s&&typeof s=="object"&&"type"in s&&s.type==="ref";if(f.includes(".")||d){const m=[...t],p=d?s:new On(f.split(".")),y=qn(p);n.push({kind:"merge",targetPath:m,source:y})}else{const m=f,p=[...t];n.push({kind:"merge",targetPath:p,source:y=>y[m]})}continue}const a=s;if(H4(a)){Ek([...t,r],a,n);continue}if(V4(a))n.push({kind:"field",alias:[...t,r].join("."),compiled:()=>null});else{if(a===void 0||!fy(a)){n.push({kind:"field",alias:[...t,r].join("."),compiled:()=>a});continue}if(a instanceof Un){const l=a.value;n.push({kind:"field",alias:[...t,r].join("."),compiled:()=>l})}else n.push({kind:"field",alias:[...t,r].join("."),compiled:qn(a)})}}}function Ty(t,e,n,r,s,a,l,u,f=new WeakMap,d=new WeakMap){const m=f.get(t);if(m)return m;fg(t);const{optimizedQuery:p,sourceWhereClauses:y}=v4(t);d.set(p,t),hg(p,t,d);const g={...e},v={},x={},E={},{alias:S,input:T,collectionId:A}=K4(p.from,g,n,r,s,a,l,u,f,d,v,x);E[S]=T;let j=T.pipe(An(([q,H])=>[q,{[S]:H}]));if(p.join&&p.join.length>0&&(j=D4(j,p.join,E,A,S,g,f,d,n,r,s,a,l,u,t,Ty,v,x)),p.where&&p.where.length>0)for(const q of p.where){const H=dy(q),z=qn(H);j=j.pipe(Qs(([Q,re])=>Ua(z(re))))}if(p.fnWhere&&p.fnWhere.length>0)for(const q of p.fnWhere)j=j.pipe(Qs(([H,z])=>Ua(q(z))));if(p.distinct&&!p.fnSelect&&!p.select)throw new mN;if(p.fnSelect?j=j.pipe(An(([q,H])=>{const z=p.fnSelect(H);return[q,{...H,__select_results:z}]})):p.select?j=F4(j,p.select):j=j.pipe(An(([q,H])=>{const z=!p.join&&!p.groupBy?H[S]:H;return[q,{...H,__select_results:z}]})),p.groupBy&&p.groupBy.length>0?j=kw(j,p.groupBy,p.having,p.select,p.fnHaving):p.select&&Object.values(p.select).some(H=>H.type==="agg")&&(j=kw(j,[],p.having,p.select,p.fnHaving)),p.having&&(!p.groupBy||p.groupBy.length===0)&&!(p.select?Object.values(p.select).some(H=>H.type==="agg"):!1))throw new gN;if(p.fnHaving&&p.fnHaving.length>0&&(!p.groupBy||p.groupBy.length===0))for(const q of p.fnHaving)j=j.pipe(Qs(([H,z])=>q(z)));if(p.distinct&&(j=j.pipe(tM(([q,H])=>H.__select_results))),p.orderBy&&p.orderBy.length>0){const z=RM(t,j,p.orderBy,p.select||{},n[A],l,u,p.limit,p.offset).pipe(An(([re,[pe,X]])=>{const V=pe.__select_results,$=dg(V);return[re,[$,X]]})),Q={collectionId:A,pipeline:z,sourceWhereClauses:y,aliasToCollectionId:v,aliasRemapping:x};return f.set(t,Q),Q}else if(p.limit!==void 0||p.offset!==void 0)throw new yN;const I=j.pipe(An(([q,H])=>{const z=H.__select_results,Q=dg(z);return[q,[Q,void 0]]})),P={collectionId:A,pipeline:I,sourceWhereClauses:y,aliasToCollectionId:v,aliasRemapping:x};return f.set(t,P),P}function G4(t){const e=new Set;if(t.from.type==="collectionRef"&&e.add(t.from.alias),t.join)for(const n of t.join)n.from.type==="collectionRef"&&e.add(n.from.alias);return e}function fg(t,e=new Set){const n=G4(t);for(const s of n)if(e.has(s))throw new bN(s,Array.from(e));const r=new Set([...e,...n]);if(t.from.type==="queryRef"&&fg(t.from.query,r),t.join)for(const s of t.join)s.from.type==="queryRef"&&fg(s.from.query,r)}function K4(t,e,n,r,s,a,l,u,f,d,m,p){switch(t.type){case"collectionRef":{const y=e[t.alias];if(!y)throw new ck(t.alias,t.collection.id,Object.keys(e));return m[t.alias]=t.collection.id,{alias:t.alias,input:y,collectionId:t.collection.id}}case"queryRef":{const y=d.get(t.query)||t.query,g=Ty(y,e,n,r,s,a,l,u,f,d);Object.assign(m,g.aliasToCollectionId),Object.assign(p,g.aliasRemapping);const v=Object.keys(g.aliasToCollectionId).find(S=>g.aliasToCollectionId[S]===g.collectionId);v&&v!==t.alias&&(p[t.alias]=v);const E=g.pipeline.pipe(An(S=>{const[T,[A,j]]=S,D=dg(A);return[T,D]}));return{alias:t.alias,input:E,collectionId:g.collectionId}}default:throw new _N(t.type)}}function Z4(t){return t instanceof Un||t&&typeof t=="object"&&"type"in t&&t.type==="val"}function dg(t){return Z4(t)?t.value:t}function hg(t,e,n){if(t.from.type==="queryRef"&&e.from.type==="queryRef"&&(n.set(t.from.query,e.from.query),hg(t.from.query,e.from.query,n)),t.join&&e.join)for(let r=0;r<t.join.length&&r<e.join.length;r++){const s=t.join[r],a=e.join[r];s.from.type==="queryRef"&&a.from.type==="queryRef"&&(n.set(s.from.query,a.from.query),hg(s.from.query,a.from.query,n))}}function Ay(t,e){const n=t.type;if(n==="val")return new Un(t.value);if(n==="ref"){const r=t.path;if(Array.isArray(r)){if(r[0]===e&&r.length>1)return new On(r.slice(1));if(r.length===1&&r[0]!==void 0)return new On([r[0]])}return new On(Array.isArray(r)?r:[String(r)])}else{const r=[];for(const s of t.args){const a=Ay(s,e);r.push(a)}return new Sr(t.name,r)}}function Nw(t,e){return t.map(r=>{const s=Ay(r.expression,e);return{...r,expression:s}})}const Iw=Symbol.for("@tanstack/db.collection-config-builder");class Q4{constructor(e,n,r,s){this.alias=e,this.collectionId=n,this.collection=r,this.collectionConfigBuilder=s,this.biggest=void 0,this.subscriptionLoadingPromises=new Map,this.sentToD2Keys=new Set}subscribe(){const e=this.getWhereClauseForAlias();if(e){const n=Ay(e,this.alias);return this.subscribeToChanges(n)}return this.subscribeToChanges()}subscribeToChanges(e){let n;const r=this.getOrderByInfo();if(r)n=this.subscribeToOrderedChanges(e,r);else{const u=!this.collectionConfigBuilder.isLazyAlias(this.alias);n=this.subscribeToMatchingChanges(e,u)}const s=()=>{if(!this.subscriptionLoadingPromises.has(n)){let u;const f=new Promise(d=>{u=d});this.subscriptionLoadingPromises.set(n,{resolve:u}),this.collectionConfigBuilder.liveQueryCollection._sync.trackLoadPromise(f)}};n.status==="loadingSubset"&&s();const a=n.on("status:change",u=>{if(u.status==="loadingSubset")s();else{const f=this.subscriptionLoadingPromises.get(n);f&&(this.subscriptionLoadingPromises.delete(n),f.resolve())}}),l=()=>{const u=this.subscriptionLoadingPromises.get(n);u&&(this.subscriptionLoadingPromises.delete(n),u.resolve()),a(),n.unsubscribe()};return this.collectionConfigBuilder.currentSyncState.unsubscribeCallbacks.add(l),n}sendChangesToPipeline(e,n){const r=Array.isArray(e)?e:[...e],s=[];for(const f of r){if(f.type==="insert"){if(this.sentToD2Keys.has(f.key))continue;this.sentToD2Keys.add(f.key)}else f.type==="delete"&&this.sentToD2Keys.delete(f.key);s.push(f)}const a=this.collectionConfigBuilder.currentSyncState.inputs[this.alias],u=J4(a,s,this.collection.config.getKey)>0?n:void 0;this.collectionConfigBuilder.scheduleGraphRun(u,{alias:this.alias})}subscribeToMatchingChanges(e,n=!1){const r=a=>{this.sendChangesToPipeline(a)};return this.collection.subscribeChanges(r,{...n&&{includeInitialState:n},whereExpression:e})}subscribeToOrderedChanges(e,n){const{orderBy:r,offset:s,limit:a,index:l}=n,u=p=>{const y=Y4(p);this.sendChangesToPipelineWithTracking(y,f)},f=this.collection.subscribeChanges(u,{whereExpression:e}),d=this.collection.on("truncate",()=>{this.biggest=void 0,this.sentToD2Keys.clear()});f.on("unsubscribed",()=>{d()});const m=Nw(r,this.alias);return l?(f.setOrderByIndex(l),f.requestLimitedSnapshot({limit:s+a,orderBy:m})):f.requestSnapshot({orderBy:m,limit:s+a}),f}loadMoreIfNeeded(e){const n=this.getOrderByInfo();if(!n)return!0;const{dataNeeded:r}=n;if(!r)return!0;const s=r();return s>0&&this.loadNextItems(s,e),!0}sendChangesToPipelineWithTracking(e,n){const r=this.getOrderByInfo();if(!r){this.sendChangesToPipeline(e);return}const s=this.trackSentValues(e,r.comparator),a=n;a[Iw]??=this.loadMoreIfNeeded.bind(this,n),this.sendChangesToPipeline(s,a[Iw])}loadNextItems(e,n){const r=this.getOrderByInfo();if(!r)return;const{orderBy:s,valueExtractorForRawRow:a,offset:l}=r,u=this.biggest,f=u?a(u):void 0,d=f!==void 0?Array.isArray(f)?f:[f]:void 0,m=Nw(s,this.alias);n.requestLimitedSnapshot({orderBy:m,limit:e,minValues:d,offset:l})}getWhereClauseForAlias(){const e=this.collectionConfigBuilder.sourceWhereClausesCache;if(e)return e.get(this.alias)}getOrderByInfo(){const e=this.collectionConfigBuilder.optimizableOrderByCollections[this.collectionId];if(e&&e.alias===this.alias)return e}*trackSentValues(e,n){for(const r of e)r.type!=="delete"&&(this.biggest?n(this.biggest,r.value)<0&&(this.biggest=r.value):this.biggest=r.value),yield r}}function J4(t,e,n){const r=[];for(const s of e){const a=n(s.value);s.type==="insert"?r.push([[a,s.value],1]):s.type==="update"?(r.push([[a,s.previousValue],-1]),r.push([[a,s.value],1])):r.push([[a,s.value],-1])}return r.length!==0&&t.sendData(new qt(r)),r.length}function*Y4(t){for(const e of t)e.type==="update"?(yield{type:"delete",key:e.key,value:e.previousValue},yield{type:"insert",key:e.key,value:e.value}):yield e}const Ck=new WeakMap;function X4(t){return t.utils?.[xy]?.getBuilder?.()}function W4(t,e){Ck.set(t,e)}function eD(t){return Ck.get(t)}let tD=0;class nD{constructor(e){this.config=e,this.compiledAliasToCollectionId={},this.resultKeys=new WeakMap,this.orderByIndices=new WeakMap,this.isGraphRunning=!1,this.runCount=0,this.isInErrorState=!1,this.aliasDependencies={},this.builderDependencies=new Set,this.pendingGraphRuns=new Map,this.subscriptions={},this.lazySourcesCallbacks={},this.lazySources=new Set,this.optimizableOrderByCollections={},this.id=e.id||`live-query-${++tD}`,this.query=rD(e),this.collections=iD(this.query);const n=aD(this.query);this.collectionByAlias={};for(const[r,s]of n.entries()){const a=this.collections[r];if(a)for(const l of s)this.collectionByAlias[l]=a}this.query.orderBy&&this.query.orderBy.length>0&&(this.compare=sD(this.orderByIndices)),this.compareOptions=this.config.defaultStringCollation??Tk(this.query).compareOptions,this.compileBasePipeline()}hasJoins(e){return!!(e.join&&e.join.length>0||e.from.type==="queryRef"&&this.hasJoins(e.from.query))}getConfig(){return{id:this.id,getKey:this.config.getKey||(e=>this.resultKeys.get(e)),sync:this.getSyncConfig(),compare:this.compare,defaultStringCollation:this.compareOptions,gcTime:this.config.gcTime||5e3,schema:this.config.schema,onInsert:this.config.onInsert,onUpdate:this.config.onUpdate,onDelete:this.config.onDelete,startSync:this.config.startSync,singleResult:this.query.singleResult,utils:{getRunCount:this.getRunCount.bind(this),setWindow:this.setWindow.bind(this),getWindow:this.getWindow.bind(this),[xy]:{getBuilder:()=>this,hasCustomGetKey:!!this.config.getKey,hasJoins:this.hasJoins(this.query)}}}}setWindow(e){if(!this.windowFn)throw new PN;return this.currentWindow=e,this.windowFn(e),this.maybeRunGraphFn?.(),this.liveQueryCollection?.isLoadingSubset?new Promise(n=>{const r=this.liveQueryCollection.on("loadingSubset:change",s=>{s.isLoadingSubset||(r(),n())})}):!0}getWindow(){if(!(!this.windowFn||!this.currentWindow))return{offset:this.currentWindow.offset??0,limit:this.currentWindow.limit??0}}getCollectionIdForAlias(e){const n=this.compiledAliasToCollectionId[e];if(n)return n;const r=this.collectionByAlias[e];if(r)return r.id;throw new Error(`Unknown source alias "${e}"`)}isLazyAlias(e){return this.lazySources.has(e)}maybeRunGraph(e){if(!this.isGraphRunning){if(!this.currentSyncConfig||!this.currentSyncState)throw new Error("maybeRunGraph called without active sync session. This should not happen.");this.isGraphRunning=!0;try{const{begin:n,commit:r}=this.currentSyncConfig,s=this.currentSyncState;if(this.isInErrorState)return;if(s.subscribedToAllCollections){for(;s.graph.pendingWork();)s.graph.run(),e?.();s.messagesCount===0&&(n(),r(),this.updateLiveQueryStatus(this.currentSyncConfig))}}finally{this.isGraphRunning=!1}}}scheduleGraphRun(e,n){const r=n?.contextId??Qu()?.id,s=n?.jobId??this,a=(()=>{if(n?.dependencies)return n.dependencies;const f=new Set(this.builderDependencies);if(n?.alias){const d=this.aliasDependencies[n.alias];if(d)for(const m of d)f.add(m)}return f.delete(this),Array.from(f)})();if(r)for(const f of a)typeof f.scheduleGraphRun=="function"&&f.scheduleGraphRun(void 0,{contextId:r});if(!this.currentSyncConfig||!this.currentSyncState)throw new Error("scheduleGraphRun called without active sync session. This should not happen.");let l=r?this.pendingGraphRuns.get(r):void 0;l||(l={loadCallbacks:new Set},r&&this.pendingGraphRuns.set(r,l)),e&&l.loadCallbacks.add(e);const u=r?void 0:l;yf.schedule({contextId:r,jobId:s,dependencies:a,run:()=>this.executeGraphRun(r,u)})}clearPendingGraphRun(e){this.pendingGraphRuns.delete(e)}hasPendingGraphRun(e){return this.pendingGraphRuns.has(e)}executeGraphRun(e,n){const r=n??(e?this.pendingGraphRuns.get(e):void 0);if(e&&this.pendingGraphRuns.delete(e),!r||!this.currentSyncConfig||!this.currentSyncState)return;this.incrementRunCount();const s=()=>{let a=!0,l;if(r.loadCallbacks.forEach(u=>{try{a=u()&&a}catch(f){a=!1,l??=f}}),l)throw l;return a};this.maybeRunGraph(s)}getSyncConfig(){return{rowUpdateMode:"full",sync:this.syncFn.bind(this)}}incrementRunCount(){this.runCount++}getRunCount(){return this.runCount}syncFn(e){this.liveQueryCollection=e.collection,this.currentSyncConfig=e;const n={messagesCount:0,subscribedToAllCollections:!1,unsubscribeCallbacks:new Set},r=this.extendPipelineWithChangeProcessing(e,n);this.currentSyncState=r,this.unsubscribeFromSchedulerClears=yf.onClear(a=>{this.clearPendingGraphRun(a)});const s=this.subscribeToAllCollections(e,r);return this.maybeRunGraphFn=()=>this.scheduleGraphRun(s),this.scheduleGraphRun(s),()=>{n.unsubscribeCallbacks.forEach(a=>a()),this.currentSyncConfig=void 0,this.currentSyncState=void 0,this.pendingGraphRuns.clear(),this.graphCache=void 0,this.inputsCache=void 0,this.pipelineCache=void 0,this.sourceWhereClausesCache=void 0,this.lazySources.clear(),this.optimizableOrderByCollections={},this.lazySourcesCallbacks={},Object.keys(this.subscriptions).forEach(a=>delete this.subscriptions[a]),this.compiledAliasToCollectionId={},this.unsubscribeFromSchedulerClears?.(),this.unsubscribeFromSchedulerClears=void 0}}compileBasePipeline(){this.graphCache=new DI,this.inputsCache=Object.fromEntries(Object.keys(this.collectionByAlias).map(r=>[r,this.graphCache.newInput()]));const e=Ty(this.query,this.inputsCache,this.collections,this.subscriptions,this.lazySourcesCallbacks,this.lazySources,this.optimizableOrderByCollections,r=>{this.windowFn=r});this.pipelineCache=e.pipeline,this.sourceWhereClausesCache=e.sourceWhereClauses,this.compiledAliasToCollectionId=e.aliasToCollectionId;const n=Object.keys(this.compiledAliasToCollectionId).filter(r=>!Object.hasOwn(this.inputsCache,r));if(n.length>0)throw new zN(n)}maybeCompileBasePipeline(){return(!this.graphCache||!this.inputsCache||!this.pipelineCache)&&this.compileBasePipeline(),{graph:this.graphCache,inputs:this.inputsCache,pipeline:this.pipelineCache}}extendPipelineWithChangeProcessing(e,n){const{begin:r,commit:s}=e,{graph:a,inputs:l,pipeline:u}=this.maybeCompileBasePipeline();return u.pipe(QI(f=>{const d=f.getInner();n.messagesCount+=d.length,r(),d.reduce(oD,new Map).forEach(this.applyChanges.bind(this,e)),s()})),a.finalize(),n.graph=a,n.inputs=l,n.pipeline=u,n}applyChanges(e,n,r){const{write:s,collection:a}=e,{deletes:l,inserts:u,value:f,orderByIndex:d}=n;if(this.resultKeys.set(f,r),d!==void 0&&this.orderByIndices.set(f,d),u&&l===0)s({value:f,type:"insert"});else if(u>l||u===l&&a.has(a.getKeyFromItem(f)))s({value:f,type:"update"});else if(l>0)s({value:f,type:"delete"});else throw new Error(`Could not apply changes: ${JSON.stringify(n)}. This should never happen.`)}handleSourceStatusChange(e,n,r){const{status:s}=r;if(s==="error"){this.transitionToError(`Source collection '${n}' entered error state`);return}if(s==="cleaned-up"){this.transitionToError(`Source collection '${n}' was manually cleaned up while live query '${this.id}' depends on it. Live queries prevent automatic GC, so this was likely a manual cleanup() call.`);return}this.updateLiveQueryStatus(e)}updateLiveQueryStatus(e){const{markReady:n}=e;this.isInErrorState||this.allCollectionsReady()&&n()}transitionToError(e){this.isInErrorState=!0,console.error(`[Live Query Error] ${e}`),this.liveQueryCollection?._lifecycle.setStatus("error")}allCollectionsReady(){return Object.values(this.collections).every(e=>e.isReady())}subscribeToAllCollections(e,n){const r=Object.entries(this.compiledAliasToCollectionId);if(r.length===0)throw new Error(`Compiler returned no alias metadata for query '${this.id}'. This should not happen; please report.`);const s=r.map(([l,u])=>{const f=this.collectionByAlias[l]??this.collections[u],d=eD(f);d&&d!==this?(this.aliasDependencies[l]=[d],this.builderDependencies.add(d)):this.aliasDependencies[l]=[];const m=new Q4(l,u,f,this),p=f.on("status:change",v=>{this.handleSourceStatusChange(e,u,v)});n.unsubscribeCallbacks.add(p);const y=m.subscribe();return this.subscriptions[l]=y,m.loadMoreIfNeeded.bind(m,y)}),a=()=>(s.map(l=>l()),!0);return n.subscribedToAllCollections=!0,this.updateLiveQueryStatus(e),a}}function rD(t){return typeof t.query=="function"?_4(t.query):vk(t.query)}function sD(t){return(e,n)=>{const r=t.get(e),s=t.get(n);return r&&s?r<s?-1:r>s?1:0:0}}function iD(t){const e={};function n(s){s.type==="collectionRef"?e[s.collection.id]=s.collection:s.type==="queryRef"&&r(s.query)}function r(s){if(s.from&&n(s.from),s.join&&Array.isArray(s.join))for(const a of s.join)a.from&&n(a.from)}return r(t),e}function Tk(t){const e=t.from;if(e.type==="collectionRef")return e.collection;if(e.type==="queryRef")return Tk(e.query);throw new Error(`Failed to extract collection. Invalid FROM clause: ${JSON.stringify(t)}`)}function aD(t){const e=new Map;function n(s){if(s)if(s.type==="collectionRef"){const{id:a}=s.collection,l=e.get(a);l?l.add(s.alias):e.set(a,new Set([s.alias]))}else s.type==="queryRef"&&r(s.query)}function r(s){if(s&&(n(s.from),s.join))for(const a of s.join)n(a.from)}return r(t),e}function oD(t,[[e,n],r]){const[s,a]=n,l=t.get(e)||{deletes:0,inserts:0,value:s,orderByIndex:a};return r<0?l.deletes+=Math.abs(r):r>0&&(l.inserts+=r,l.value=s,l.orderByIndex=a),t.set(e,l),t}function Mw(t){return new nD(t).getConfig()}function sm(t){if(typeof t=="function"){const n=Mw({query:t});return Dw(n)}else{const e=t,n=Mw(e);return e.utils&&(n.utils={...n.utils,...e.utils}),Dw(n)}}function Dw(t){const e=bk(t),n=X4(t);return n&&W4(e,n),e}const im=1;function lD(t,e=[]){const n=t&&typeof t=="object"&&typeof t.subscribeChanges=="function"&&typeof t.startSyncImmediate=="function"&&typeof t.id=="string",r=K.useRef(null),s=K.useRef(null),a=K.useRef(null),l=K.useRef(0),u=K.useRef(null),f=!r.current||n&&a.current!==t||!n&&(s.current===null||s.current.length!==e.length||s.current.some((v,x)=>v!==e[x]));if(f)if(n)t.startSyncImmediate(),r.current=t,a.current=t;else if(typeof t=="function"){const v=new Ut,x=t(v);if(x==null)r.current=null;else if(x instanceof ky)x.startSyncImmediate(),r.current=x;else if(x instanceof Ut)r.current=sm({query:t,startSync:!0,gcTime:im});else if(x&&typeof x=="object")r.current=sm({startSync:!0,gcTime:im,...x});else throw new Error(`useLiveQuery callback must return a QueryBuilder, LiveQueryCollectionConfig, Collection, undefined, or null. Got: ${typeof x}`);s.current=[...e]}else r.current=sm({startSync:!0,gcTime:im,...t}),s.current=[...e];f&&(l.current=0,u.current=null);const d=K.useRef(null);(!d.current||f)&&(d.current=v=>{if(!r.current)return()=>{};const x=r.current.subscribeChanges(()=>{l.current+=1,v()});return r.current.status==="ready"&&(l.current+=1,v()),()=>{x.unsubscribe()}});const m=K.useRef(null);(!m.current||f)&&(m.current=()=>{const v=l.current,x=r.current;return(!u.current||u.current.version!==v||u.current.collection!==x)&&(u.current={collection:x,version:v}),u.current});const p=K.useSyncExternalStore(d.current,m.current),y=K.useRef(null),g=K.useRef(null);if(!y.current||y.current.version!==p.version||y.current.collection!==p.collection){if(!p.collection)g.current={state:void 0,data:void 0,collection:void 0,status:"disabled",isLoading:!1,isReady:!0,isIdle:!1,isError:!1,isCleanedUp:!1,isEnabled:!1};else{const v=Array.from(p.collection.entries()),E=p.collection.config.singleResult;let S=null,T=null;g.current={get state(){return S||(S=new Map(v)),S},get data(){return T||(T=v.map(([,A])=>A)),E?T[0]:T},collection:p.collection,status:p.collection.status,isLoading:p.collection.status==="loading",isReady:p.collection.status==="ready",isIdle:p.collection.status==="idle",isError:p.collection.status==="error",isCleanedUp:p.collection.status==="cleaned-up",isEnabled:!0}}y.current=p}return g.current}class Ws extends nr{constructor(e){super(e),this.name="QueryCollectionError"}}class cD extends Ws{constructor(){super("[QueryCollection] queryKey must be provided."),this.name="QueryKeyRequiredError"}}class uD extends Ws{constructor(){super("[QueryCollection] queryFn must be provided."),this.name="QueryFnRequiredError"}}class fD extends Ws{constructor(){super("[QueryCollection] queryClient must be provided."),this.name="QueryClientRequiredError"}}class dD extends Ws{constructor(){super("[QueryCollection] getKey must be provided."),this.name="GetKeyRequiredError"}}class hD extends Ws{constructor(){super("Collection must be in 'ready' state for manual sync operations. Sync not initialized yet."),this.name="SyncNotInitializedError"}}class pD extends Ws{constructor(e){super(`Duplicate key '${e}' found within batch operations`),this.name="DuplicateKeyInBatchError"}}class mD extends Ws{constructor(e){super(`Update operation: Item with key '${e}' does not exist`),this.name="UpdateOperationItemNotFoundError"}}class gD extends Ws{constructor(e){super(`Delete operation: Item with key '${e}' does not exist`),this.name="DeleteOperationItemNotFoundError"}}const wi=new WeakMap;function yD(t,e){const n=Array.isArray(t)?t:[t],r=[];for(const s of n)if(s.type==="delete"){const a=Array.isArray(s.key)?s.key:[s.key];for(const l of a)r.push({type:"delete",key:l})}else{const a=Array.isArray(s.data)?s.data:[s.data];for(const l of a){let u;if(s.type==="update")u=e.getKey(l);else{const f=e.collection.validateData(l,s.type==="upsert"?"insert":s.type);u=e.getKey(f)}r.push({type:s.type,key:u,data:l})}}return r}function bD(t,e){const n=new Set;for(const r of t){if(n.has(r.key))throw new pD(r.key);if(n.add(r.key),r.type==="update"){if(!e.collection._state.syncedData.has(r.key))throw new mD(r.key)}else if(r.type==="delete"&&!e.collection._state.syncedData.has(r.key))throw new gD(r.key)}}function tl(t,e){const n=yD(t,e);bD(n,e),e.begin();for(const s of n)switch(s.type){case"insert":{const a=e.collection.validateData(s.data,"insert");e.write({type:"insert",value:a});break}case"update":{const l={...e.collection._state.syncedData.get(s.key),...s.data},u=e.collection.validateData(l,"update",s.key);e.write({type:"update",value:u});break}case"delete":{const a=e.collection._state.syncedData.get(s.key);e.write({type:"delete",value:a});break}case"upsert":{const a=e.collection._state.syncedData.has(s.key),l=e.collection.validateData(s.data,a?"update":"insert",s.key);a?e.write({type:"update",value:l}):e.write({type:"insert",value:l});break}}e.commit();const r=Array.from(e.collection._state.syncedData.values());e.updateCacheData?e.updateCacheData(r):e.queryClient.setQueryData(e.queryKey,r)}function _D(t){function e(){const n=t();if(!n)throw new hD;return n}return{writeInsert(n){const r={type:"insert",data:n},s=e(),a=wi.get(s);if(a?.isActive){a.operations.push(r);return}tl(r,s)},writeUpdate(n){const r={type:"update",data:n},s=e(),a=wi.get(s);if(a?.isActive){a.operations.push(r);return}tl(r,s)},writeDelete(n){const r={type:"delete",key:n},s=e(),a=wi.get(s);if(a?.isActive){a.operations.push(r);return}tl(r,s)},writeUpsert(n){const r={type:"upsert",data:n},s=e(),a=wi.get(s);if(a?.isActive){a.operations.push(r);return}tl(r,s)},writeBatch(n){const r=e();if(wi.get(r)?.isActive)throw new Error("Cannot nest writeBatch calls. Complete the current batch before starting a new one.");const a={operations:[],isActive:!0};wi.set(r,a);try{const l=n();if(l&&typeof l=="object"&&"then"in l&&typeof l.then=="function")throw new Error("writeBatch does not support async callbacks. The callback must be synchronous.");a.operations.length>0&&tl(a.operations,r)}finally{a.isActive=!1,wi.delete(r)}}}}function vD(t){if(!t)return;const e={};return t.where&&(e.where=pg(t.where)),t.orderBy?.length&&(e.orderBy=t.orderBy.map(n=>{const r={expression:pg(n.expression),direction:n.compareOptions.direction,nulls:n.compareOptions.nulls,stringSort:n.compareOptions.stringSort};return n.compareOptions.stringSort==="locale"?{...r,locale:n.compareOptions.locale,localeOptions:n.compareOptions.localeOptions}:r})),t.limit!==void 0&&(e.limit=t.limit),t.offset!==void 0&&(e.offset=t.offset),Object.keys(e).length===0?void 0:JSON.stringify(e)}function pg(t){if(!t)return null;switch(t.type){case"val":return{type:"val",value:mg(t.value)};case"ref":return{type:"ref",path:[...t.path]};case"func":return{type:"func",name:t.name,args:t.args.map(e=>pg(e))};default:return null}}function mg(t){if(t===void 0)return{__type:"undefined"};if(typeof t=="number"){if(Number.isNaN(t))return{__type:"nan"};if(t===Number.POSITIVE_INFINITY)return{__type:"infinity",sign:1};if(t===Number.NEGATIVE_INFINITY)return{__type:"infinity",sign:-1}}return t===null||typeof t=="string"||typeof t=="number"||typeof t=="boolean"?t:t instanceof Date?{__type:"date",value:t.toJSON()}:Array.isArray(t)?t.map(e=>mg(e)):typeof t=="object"?Object.fromEntries(Object.entries(t).map(([e,n])=>[e,mg(n)])):t}class xD{constructor(e,n,r){this.state=e,this.refetchFn=n,this.refetch=n,this.writeInsert=r.writeInsert,this.writeUpdate=r.writeUpdate,this.writeDelete=r.writeDelete,this.writeUpsert=r.writeUpsert,this.writeBatch=r.writeBatch}async clearError(){this.state.lastError=void 0,this.state.errorCount=0,this.state.lastErrorUpdatedAt=0,await this.refetchFn({throwOnError:!0})}get lastError(){return this.state.lastError}get isError(){return!!this.state.lastError}get errorCount(){return this.state.errorCount}get isFetching(){return Array.from(this.state.observers.values()).some(e=>e.getCurrentResult().isFetching)}get isRefetching(){return Array.from(this.state.observers.values()).some(e=>e.getCurrentResult().isRefetching)}get isLoading(){return Array.from(this.state.observers.values()).some(e=>e.getCurrentResult().isLoading)}get dataUpdatedAt(){return Math.max(0,...Array.from(this.state.observers.values()).map(e=>e.getCurrentResult().dataUpdatedAt))}get fetchStatus(){return Array.from(this.state.observers.values()).map(e=>e.getCurrentResult().fetchStatus)}}function wD(t){const{queryKey:e,queryFn:n,select:r,queryClient:s,enabled:a,refetchInterval:l,retry:u,retryDelay:f,staleTime:d,getKey:m,onInsert:p,onUpdate:y,onDelete:g,meta:v,...x}=t,E=x.syncMode??"eager";if(!e)throw new cD;if(!n)throw new uD;if(!s)throw new fD;if(!m)throw new dD;const S={lastError:void 0,errorCount:0,lastErrorUpdatedAt:0,observers:new Map},T=new Map,A=new Map,j=new Map,D=new Map,I=new Map,P=(M,C)=>{const N=j.get(M)||new Set;N.add(C),j.set(M,N);const U=A.get(C)||new Set;U.add(M),A.set(C,U)},q=(M,C)=>{const N=j.get(M)||new Set;N.delete(C),j.set(M,N);const U=A.get(C)||new Set;return U.delete(M),A.set(C,U),N.size===0},H=M=>{const{begin:C,write:N,commit:U,markReady:R,collection:te}=M;let ce=!1;const he=ke=>{if(typeof e=="function")return e(ke);if(E==="on-demand"){const _e=vD(ke);return _e!==void 0?[...e,_e]:e}else return e},xe=(ke={},_e=n)=>{const Te=he(ke),be=bs(Te),st={...v,loadSubsetOptions:ke};if(S.observers.has(be)){I.set(be,(I.get(be)||0)+1);const ge=S.observers.get(be),ve=ge.getCurrentResult();return ve.isSuccess?!0:ve.isError?Promise.reject(ve.error):new Promise((Ie,tt)=>{const Xe=ge.subscribe(Pe=>{Pe.isSuccess?(Xe(),Ie()):Pe.isError&&(Xe(),tt(Pe.error))})})}const ne={queryKey:Te,queryFn:_e,meta:st,structuralSharing:!0,notifyOnChangeProps:"all",...a!==void 0&&{enabled:a},...l!==void 0&&{refetchInterval:l},...u!==void 0&&{retry:u},...f!==void 0&&{retryDelay:f},...d!==void 0&&{staleTime:d}},fe=new SO(s,ne);T.set(be,Te),S.observers.set(be,fe),I.set(be,(I.get(be)||0)+1);const ye=new Promise((ge,ve)=>{const Ie=fe.subscribe(tt=>{tt.isSuccess?(Ie(),ge()):tt.isError&&(Ie(),ve(tt.error))})});return(ce||te.subscriberCount>0)&&et(fe,be),ye},Me=ke=>{const _e=bs(ke);return be=>{if(be.isSuccess){S.lastError=void 0,S.errorCount=0;const st=be.data,ne=r?r(st):st;if(!Array.isArray(ne)||ne.some(ge=>typeof ge!="object")){const ge=r?`@tanstack/query-db-collection: select() must return an array of objects. Got: ${typeof ne} for queryKey ${JSON.stringify(ke)}`:`@tanstack/query-db-collection: queryFn must return an array of objects. Got: ${typeof ne} for queryKey ${JSON.stringify(ke)}`;console.error(ge);return}const fe=new Map(te._state.syncedData.entries()),ye=new Map;ne.forEach(ge=>{const ve=m(ge);ye.set(ve,ge)}),C(),fe.forEach((ge,ve)=>{const Ie=ye.get(ve);Ie?Rr(ge,Ie)||N({type:"update",value:Ie}):q(ve,_e)&&N({type:"delete",value:ge})}),ye.forEach((ge,ve)=>{P(ve,_e),fe.has(ve)||N({type:"insert",value:ge})}),U(),R()}else be.isError&&(be.errorUpdatedAt!==S.lastErrorUpdatedAt&&(S.lastError=be.error,S.errorCount++,S.lastErrorUpdatedAt=be.errorUpdatedAt),console.error(`[QueryCollection] Error observing query ${String(ke)}:`,be.error),R())}},je=ke=>D.has(ke),et=(ke,_e)=>{if(!je(_e)){const Te=T.get(_e),be=Me(Te),st=ke.subscribe(be);D.set(_e,st);const ne=ke.getCurrentResult();(ne.isSuccess||ne.isError)&&be(ne)}},pt=()=>{S.observers.forEach(et)},kt=()=>{D.forEach(ke=>{ke()}),D.clear()};ce=!0;const Wt=te.on("subscribers:change",({subscriberCount:ke})=>{ke>0?pt():ke===0&&kt()});if(E==="eager"){const ke=xe({});ke instanceof Promise&&ke.catch(()=>{})}else R();pt(),S.observers.forEach((ke,_e)=>{const Te=T.get(_e);Me(Te)(ke.getCurrentResult())});const bt=ke=>{D.get(ke)?.(),D.delete(ke);const _e=A.get(ke)??new Set,Te=[];_e.forEach(be=>{const st=j.get(be);st&&(st.delete(ke),st.size===0&&(j.delete(be),te.has(be)&&Te.push(te.get(be))))}),Te.length>0&&(C(),Te.forEach(be=>{N({type:"delete",value:be})}),U()),S.observers.delete(ke),A.delete(ke),T.delete(ke),I.delete(ke)},hn=ke=>{const _e=I.get(ke)||0,Te=S.observers.get(ke);if(_e<=0&&(D.get(ke)?.(),D.delete(ke)),Te?.hasListeners()??!1){I.set(ke,0);return}_e>0&&console.warn(`[cleanupQueryIfIdle] Invariant violation: refcount=${_e} but no listeners. Cleaning up to prevent leak.`,{hashedQueryKey:ke}),bt(ke)},en=ke=>{bt(ke)},Nn=s.getQueryCache().subscribe(ke=>{const _e=ke.query.queryHash;ke.type==="removed"&&T.has(_e)&&hn(_e)});return{loadSubset:E==="eager"?void 0:xe,unloadSubset:E==="eager"?void 0:ke=>{const _e=he(ke),Te=bs(_e),st=(I.get(Te)||0)-1;st<=0?(I.set(Te,0),hn(Te)):I.set(Te,st)},cleanup:async()=>{Wt(),kt();const ke=[...T.values()],_e=[...S.observers.keys()];for(const Te of _e)en(Te);Nn(),await Promise.all(ke.map(async Te=>{await s.cancelQueries({queryKey:Te,exact:!0}),s.removeQueries({queryKey:Te,exact:!0})}))}}},z=async M=>{const N=[...T.values()].map(U=>S.observers.get(bs(U)).refetch({throwOnError:M?.throwOnError}));await Promise.all(N)},Q=M=>{const C=typeof e=="function"?e({}):e;r?s.setQueryData(C,N=>{if(!N||typeof N!="object")return N;if(Array.isArray(N))return M;const U=r(N);if(Array.isArray(U)){for(const R of Object.keys(N))if(N[R]===U)return{...N,[R]:M}}if(Array.isArray(N.data))return{...N,data:M};if(Array.isArray(N.items))return{...N,items:M};if(Array.isArray(N.results))return{...N,results:M};for(const R of Object.keys(N))if(Array.isArray(N[R]))return{...N,[R]:M};return N}):s.setQueryData(C,M)};let re=null;const pe=M=>{const{begin:C,write:N,commit:U,collection:R}=M,te=typeof e=="function"?e({}):e;return re={collection:R,queryClient:s,queryKey:te,getKey:m,begin:C,write:N,commit:U,updateCacheData:Q},H(M)},X=_D(()=>re),V=p?async M=>{const C=await p(M)??{};return C.refetch!==!1&&await z(),C}:void 0,$=y?async M=>{const C=await y(M)??{};return C.refetch!==!1&&await z(),C}:void 0,G=g?async M=>{const C=await g(M)??{};return C.refetch!==!1&&await z(),C}:void 0,oe=new xD(S,z,X);return{...x,getKey:m,syncMode:E,sync:{sync:pe},onInsert:V,onUpdate:$,onDelete:G,utils:oe}}function Ur(){return Math.random().toString(36).substring(2,9)}async function SD(t){return new Promise((e,n)=>{const r=new FileReader;r.onloadend=()=>{const a=r.result.split(",")[1]||"";e(a)},r.onerror=n,r.readAsDataURL(t)})}function kD(t,e){const n=atob(t),r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return new Blob([r],{type:e})}function ED(t){const e=t.match(/^grpc:\/\/([^/]+)\/(.+)\/([^/]+)$/);return e?{server:e[1],service:e[2],method:e[3]}:{server:t.replace(/^grpc:\/\//,""),service:"",method:""}}function CD(t,e,n){return e&&n?`grpc://${t}/${e}/${n}`:`grpc://${t}`}async function jw(t){const e={id:t.id,name:t.name,variables:t.variables??[],creationTime:t.creationTime,executionTime:t.executionTime};switch(t.protocol){case"grpc":{const{server:n,service:r,method:s}=ED(t.url);e.grpc={server:n,service:r,method:s,schema:t.grpc?.schema,body:t.grpc?.body??"",response:t.grpc?.response};break}case"mcp":{e.mcp={url:t.url,headers:t.mcp?.headers,tool:t.mcp?.tool,resource:t.mcp?.resource,response:t.mcp?.response};break}case"openai":{e.openai={url:t.url,model:t.openai?.model??"",chat:t.openai?.chat,image:t.openai?.image,response:t.openai?.response};break}default:{let n=t.http?.body??{type:"none"};n.type==="form-data"?n={...n,data:n.data.map(s=>({...s,file:null}))}:n.type==="binary"&&(n={...n,file:null});let r;if(t.http?.response){const s=t.http.response.body instanceof Blob?await SD(t.http.response.body):"",a=t.http.response.body instanceof Blob?t.http.response.body.type:"application/octet-stream";r={status:t.http.response.status,statusCode:t.http.response.statusCode,headers:t.http.response.headers,body:s,bodyType:a,duration:t.http.response.duration,error:t.http.response.error}}e.http={method:t.http?.method??"GET",url:t.url,query:t.http?.query??[],headers:t.http?.headers??[],body:n,response:r};break}}return e}function TD(t){const e=t.grpc?"grpc":t.mcp?"mcp":t.openai?"openai":"rest",n={id:t.id,name:t.name,protocol:e,url:"",variables:t.variables??[],creationTime:t.creationTime,executionTime:t.executionTime,executing:!1};if(t.grpc){const r=t.grpc;n.url=CD(r.server,r.service,r.method),n.grpc={schema:r.schema,body:r.body||"",metadata:[],response:r.response}}else if(t.mcp){const r=t.mcp;n.url=r.url,n.mcp={headers:r.headers??[],tool:r.tool,resource:r.resource,response:r.response}}else if(t.openai){const r=t.openai;n.url=r.url,n.openai={model:r.model,chat:r.chat,image:r.image,response:r.response}}else if(t.http){const r=t.http;n.url=r.url,n.http={method:r.method,query:r.query,headers:r.headers,body:r.body,request:null,response:r.response?{status:r.response.status,statusCode:r.response.statusCode,headers:r.response.headers,body:r.response.body?kD(r.response.body,r.response.bodyType):new Blob([]),duration:r.response.duration,error:r.response.error}:null}}return n}const vf="requests";async function AD(){const t=await fetch(`/data/${vf}`);if(!t.ok)throw new Error(`Failed to list entries: ${t.statusText}`);const e=await t.json();return(await Promise.all(e.map(async r=>{const s=await fetch(`/data/${vf}/${encodeURIComponent(r.id)}`);return s.ok?await s.json():null}))).filter(r=>r!==null)}async function Lw(t){const e=await fetch(`/data/${vf}/${encodeURIComponent(t.id)}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!e.ok)throw new Error(`Failed to save request: ${e.statusText}`)}async function RD(t){const e=await fetch(`/data/${vf}/${encodeURIComponent(t)}`,{method:"DELETE"});if(!e.ok&&e.status!==404)throw new Error(`Failed to delete request: ${e.statusText}`)}const Ak=new NO({defaultOptions:{queries:{staleTime:1/0,refetchOnWindowFocus:!1}}}),Mt=bk(wD({queryKey:["requests"],queryFn:async()=>(await AD()).map(TD),getKey:t=>t.id,queryClient:Ak,onInsert:async({transaction:t})=>{await Promise.all(t.mutations.map(async e=>{const n=e.modified,r=await jw(n);await Lw(r)}))},onUpdate:async({transaction:t})=>{await Promise.all(t.mutations.map(async e=>{const n=e.modified,r=await jw(n);await Lw(r)}))},onDelete:async({transaction:t})=>{await Promise.all(t.mutations.map(async e=>{const n=e.original;await RD(n.id)}))}}));async function OD(){Array.from(Mt.state.keys()).forEach(e=>Mt.delete(e))}function xf(t,e,n={}){const{missingDataPlaceholder:r=""}=n;let s=t;const a=/\{\{(\w+):([^}]+)\}\}/g;let l;for(;(l=a.exec(t))!==null;){const[u,f,d]=l,m=e.find(y=>y.type===f&&y.id===d);let p="";switch(f){case"file_base64":p=m?.data||r;break;case"base64":m?.data?p=btoa(m.data):p=r;break;case"file_dataurl":m?.data&&m?.mimeType?p=`data:${m.mimeType};base64,${m.data}`:m?.data?p=`data:application/octet-stream;base64,${m.data}`:p=r;break;case"timestamp":p=String(Date.now());break;case"uuid":typeof crypto<"u"&&crypto.randomUUID?p=crypto.randomUUID():p="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,y=>{const g=Math.random()*16|0;return(y==="x"?g:g&3|8).toString(16)});break;case"random_string":p=Math.random().toString(36).substring(2,18);break;default:p=u}s=s.replace(u,p)}return s}function za(){return{id:Ur(),enabled:!0,key:"",value:""}}function Ju(t,e="rest"){const n={id:Ur(),name:t||"New Request",protocol:e,url:"",variables:[],creationTime:Date.now(),executionTime:null,executing:!1};switch(e){case"grpc":n.grpc={body:"",metadata:[za()]};break;case"mcp":n.mcp={headers:[za()]};break;case"openai":n.openai={model:"",chat:{input:[{id:Ur(),role:"user",content:[{type:"input_text",text:""}]}]}};break;default:n.http={method:"GET",headers:[za()],query:[za()],body:{type:"none"},request:null,response:null};break}return n}const Rk=K.createContext(null),ND={request:Ju(),sidebarCollapsed:!1,aiPanelOpen:!1};function ID({children:t}){const[e,n]=K.useState(ND),{data:r=[]}=lD(M=>M.from({req:Mt}).orderBy(({req:C})=>C.executionTime??C.creationTime,"desc")),s=K.useCallback(M=>{n(C=>({...C,request:{...C.request,...M}}))},[]),a=K.useCallback((M,C)=>{try{const N=new URL(M),U=N.protocol.replace(/:$/,""),R=N.host,te=N.pathname.replace(/^\//,""),ce=C.replace(/^\//,""),he=`/proxy/mcp/${U}/${R}/${ce}`;return te?`${he}?path=${encodeURIComponent(te)}`:he}catch{return""}},[]),l=K.useCallback(M=>{n(C=>{const N=Ju(C.request.name,M);return N.id=C.request.id,N.url=C.request.url,{...C,request:N}})},[]),u=K.useCallback(M=>{n(C=>({...C,request:{...C.request,http:{...C.request.http,method:M}}}))},[]),f=K.useCallback(M=>{s({url:M})},[s]),d=K.useCallback(M=>{n(C=>({...C,request:{...C.request,http:{...C.request.http,headers:M}}}))},[]),m=K.useCallback(M=>{n(C=>({...C,request:{...C.request,http:{...C.request.http,query:M}}}))},[]),p=K.useCallback(M=>{n(C=>({...C,request:{...C.request,http:C.request.http?{...C.request.http,body:M}:{method:"GET",headers:[],query:[],body:M,request:null,response:null}}}))},[]),y=K.useCallback(M=>{s({variables:M})},[s]),g=K.useCallback(M=>{n(C=>{const N=C.request.http?.request,R={...N?.options??{insecure:!1,redirect:!0},...M};return{...C,request:{...C.request,http:C.request.http?{...C.request.http,request:N?{...N,options:R}:null}:void 0}}})},[]),v=K.useCallback(M=>{n(C=>({...C,request:{...C.request,grpc:C.request.grpc?{...C.request.grpc,body:M}:{body:M,metadata:[]}}}))},[]),x=K.useCallback(M=>{n(C=>({...C,request:{...C.request,grpc:C.request.grpc?{...C.request.grpc,metadata:M}:{body:"",metadata:M}}}))},[]),E=K.useCallback(M=>{n(C=>({...C,request:{...C.request,grpc:C.request.grpc?{...C.request.grpc,schema:M}:{body:"",metadata:[],schema:M}}}))},[]),S=K.useCallback(M=>{n(C=>({...C,request:{...C.request,mcp:{headers:C.request.mcp?.headers??[za()],tool:M,resource:void 0}}}))},[]),T=K.useCallback(M=>{n(C=>({...C,request:{...C.request,mcp:{headers:C.request.mcp?.headers??[za()],resource:M,tool:void 0}}}))},[]),A=K.useCallback(M=>{n(C=>({...C,request:{...C.request,mcp:C.request.mcp?{...C.request.mcp,headers:M}:{headers:M}}}))},[]),j=K.useCallback(M=>{n(C=>({...C,request:{...C.request,openai:C.request.openai?{...C.request.openai,model:M}:{model:M,chat:{input:[]}}}}))},[]),D=K.useCallback(M=>{n(C=>({...C,request:{...C.request,openai:C.request.openai?{...C.request.openai,models:M}:{model:"",models:M,chat:{input:[]}}}}))},[]),I=K.useCallback(M=>{n(C=>{const N=C.request.openai,U={model:N?.model??"",...M==="chat"?{chat:N?.chat??{input:[{id:Ur(),role:"user",content:[{type:"input_text",text:""}]}]}}:{image:N?.image??{prompt:""}}};return{...C,request:{...C.request,openai:U}}})},[]),P=K.useCallback(M=>{n(C=>({...C,request:{...C.request,openai:C.request.openai?{...C.request.openai,chat:{input:M}}:{model:"",chat:{input:M}}}}))},[]),q=K.useCallback(M=>{n(C=>({...C,request:{...C.request,openai:C.request.openai?{...C.request.openai,image:{prompt:M}}:{model:"",image:{prompt:M}}}}))},[]),H=K.useCallback(async()=>{const M=e.request;if(!M.url)return null;s({executing:!0});try{const C=a(M.url,"features");if(!C)throw new Error("Invalid MCP server URL");const N={};for(const te of M.mcp?.headers??[])te.enabled&&te.key&&(N[te.key]=te.value);const U=await fetch(C,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({headers:N})});if(!U.ok){const te=await U.text();throw new Error(te||`HTTP ${U.status}`)}const R=await U.json();return s({executing:!1}),R}catch(C){const N=C instanceof Error?C.message:"Unknown error";return s({executing:!1}),{tools:[],resources:[],error:N}}},[e.request,s,a]),z=K.useCallback(()=>{n(M=>{const{protocol:C}=M.request;return C==="grpc"&&M.request.grpc?{...M,request:{...M.request,grpc:{...M.request.grpc,response:void 0}}}:C==="mcp"&&M.request.mcp?{...M,request:{...M.request,mcp:{...M.request.mcp,response:void 0}}}:C==="openai"&&M.request.openai?{...M,request:{...M.request,openai:{...M.request.openai,response:void 0}}}:M.request.http?{...M,request:{...M.request,http:{...M.request.http,response:null}}}:M})},[]),Q=K.useCallback(async()=>{const M=e.request;s({executing:!0});try{if(M.protocol==="grpc"){const Te=M.url.match(/^grpc:\/\/([^/]+)\/(.+)\/([^/]+)$/);if(!Te)throw new Error("Invalid gRPC URL format. Expected: grpc://host:port/service/method");const[,be,st,ne]=Te,fe=M.grpc?.body??"{}",ye=xf(fe,M.variables),ge={"Content-Type":"application/json"};(M.grpc?.metadata??[]).filter(Sn=>Sn.enabled&&Sn.key).forEach(Sn=>{ge[Sn.key]=Sn.value});const ve=`/proxy/grpc/${be}/${st}/${ne}`,Ie=performance.now(),tt=await fetch(ve,{method:"POST",headers:ge,body:ye}),Xe=Math.round(performance.now()-Ie),Pe=await tt.text(),ut={};tt.headers.forEach((Sn,$i)=>{ut[$i]=Sn});const at=Date.now(),ir={...M,executionTime:at,executing:!1,grpc:{...M.grpc,body:fe,metadata:M.grpc?.metadata??[],response:{body:Pe,metadata:ut,duration:Xe,error:tt.ok?void 0:`HTTP ${tt.status}`}}};r.find(Sn=>Sn.id===M.id)?Mt.update(M.id,Sn=>{Object.assign(Sn,ir)}):Mt.insert(ir),n(Sn=>({...Sn,request:ir}));return}if(M.protocol==="mcp"){const _e=M.url;if(!_e)throw new Error("MCP server URL is required");const Te=performance.now();let be;if(M.mcp?.tool){let ge={};if(M.mcp.tool.arguments)try{ge=JSON.parse(M.mcp.tool.arguments)}catch{}const ve={};for(const Pe of M.mcp?.headers??[])Pe.enabled&&Pe.key&&(ve[Pe.key]=Pe.value);const Ie=a(_e,"tool/call");if(!Ie)throw new Error("Invalid MCP server URL");const tt=await fetch(Ie,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:M.mcp.tool.name,arguments:ge,headers:ve})});if(!tt.ok){const Pe=await tt.text();throw new Error(Pe||`HTTP ${tt.status}`)}be=await tt.json()}else if(M.mcp?.resource){const ge=a(_e,"resource/call");if(!ge)throw new Error("Invalid MCP server URL");const ve={};for(const Xe of M.mcp?.headers??[])Xe.enabled&&Xe.key&&(ve[Xe.key]=Xe.value);const Ie=await fetch(ge,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({uri:M.mcp.resource.uri,headers:ve})});if(!Ie.ok){const Xe=await Ie.text();throw new Error(Xe||`HTTP ${Ie.status}`)}be=await Ie.json()}else throw new Error("No tool or resource selected");const st=Math.round(performance.now()-Te),ne=Date.now(),fe={...M,executionTime:ne,executing:!1,mcp:{...M.mcp,response:{result:be,duration:st}}};r.find(ge=>ge.id===M.id)?Mt.update(M.id,ge=>{Object.assign(ge,fe)}):Mt.insert(fe),n(ge=>({...ge,request:fe}));return}if(M.protocol==="openai"){const _e=M.url.replace(/\/$/,""),Te=M.openai?.model,be=!!M.openai?.chat;if(!_e)throw new Error("OpenAI API URL is required");if(!Te)throw new Error("Please select a model");const st=performance.now();let ne;if(be){const ve=(M.openai?.chat?.input??[]).map(Pe=>({role:Pe.role,content:Pe.content.map(ut=>{switch(ut.type){case"input_text":return{type:"input_text",text:ut.text};case"input_image":return{type:"input_image",image_url:ut.image_url};case"input_file":return{type:"input_file",filename:ut.filename,file_data:ut.file_data}}})})),Ie=await fetch(`${_e}/v1/responses`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({model:Te,input:ve})});if(!Ie.ok){const Pe=await Ie.text();throw new Error(Pe||`HTTP ${Ie.status}`)}const tt=await Ie.json();let Xe="";if(tt.output&&Array.isArray(tt.output)){for(const Pe of tt.output)if(Pe.type==="message"&&Pe.content)for(const ut of Pe.content)ut.type==="output_text"&&(Xe+=ut.text)}ne={result:{type:"text",text:Xe},duration:Math.round(performance.now()-st)}}else{const ve=M.openai?.image?.prompt??"";if(!ve)throw new Error("Please enter an image prompt");const Ie=await fetch(`${_e}/v1/images/generations`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({model:Te,prompt:ve,response_format:"b64_json"})});if(!Ie.ok){const ut=await Ie.text();throw new Error(ut||`HTTP ${Ie.status}`)}const Xe=((await Ie.json()).data||[])[0];ne={result:{type:"image",image:Xe?.b64_json||Xe?.url||""},duration:Math.round(performance.now()-st)}}const fe=Date.now(),ye={...M,executionTime:fe,executing:!1,openai:{...M.openai,response:ne}};r.find(ve=>ve.id===M.id)?Mt.update(M.id,ve=>{Object.assign(ve,ye)}):Mt.insert(ye),n(ve=>({...ve,request:ye}));return}const C={};(M.http?.headers??[]).filter(_e=>_e.enabled&&_e.key).forEach(_e=>{C[_e.key]=_e.value});const N=new URLSearchParams,U=M.http?.method??"GET";(M.http?.query??[]).filter(_e=>_e.enabled&&_e.key).forEach(_e=>{N.append(_e.key,_e.value)});const R=M.http?.body??{type:"none"};let te,ce="",he=!1;switch(R.type){case"json":{te=xf(R.content,M.variables),ce=R.content,C["Content-Type"]||(C["Content-Type"]="application/json");break}case"form-urlencoded":{const _e=new URLSearchParams;R.data.filter(Te=>Te.enabled&&Te.key).forEach(Te=>{_e.append(Te.key,Te.value)}),te=_e.toString(),ce=_e.toString(),C["Content-Type"]||(C["Content-Type"]="application/x-www-form-urlencoded");break}case"form-data":{const _e=new FormData,Te=[];R.data.filter(be=>be.enabled&&be.key).forEach(be=>{be.type==="file"&&be.file?(_e.append(be.key,be.file,be.fileName),Te.push(`${be.key}: [File: ${be.fileName}]`)):be.type==="text"&&(_e.append(be.key,be.value),Te.push(`${be.key}: ${be.value}`))}),te=_e,ce=Te.join(`
`),he=!0;break}case"binary":{R.file&&(te=R.file,ce=`[Binary file: ${R.fileName}]`,C["Content-Type"]||(C["Content-Type"]=R.file.type||"application/octet-stream"));break}case"raw":te=R.content,ce=R.content,C["Content-Type"]||(C["Content-Type"]="text/plain");break}const xe=M.http?.request?.options??{insecure:!1,redirect:!0};xe.insecure&&(C["X-Prism-Insecure"]="true"),xe.redirect&&(C["X-Prism-Redirect"]="true");const Me=new URL(M.url);let je="/proxy/"+Me.protocol.slice(0,-1)+"/"+Me.host+Me.pathname;const et=N.toString();et&&(je+="?"+et);const pt={method:U,url:M.url,headers:C,query:Object.fromEntries(N),body:ce,options:xe},kt={...C};he&&delete kt["Content-Type"];const Wt=performance.now(),bt=await fetch(je,{method:U,headers:kt,body:te&&U!=="GET"&&U!=="HEAD"?te:void 0}),hn=Math.round(performance.now()-Wt),en=await bt.blob(),Nn={};bt.headers.forEach((_e,Te)=>{Nn[Te]=_e});const sr={status:bt.statusText||String(bt.status),statusCode:bt.status,headers:Nn,body:en,duration:hn},pn=Date.now(),wn={...M,executionTime:pn,executing:!1,http:{...M.http,request:pt,response:sr}};r.find(_e=>_e.id===M.id)?Mt.update(M.id,_e=>{Object.assign(_e,wn)}):Mt.insert(wn),n(_e=>({..._e,request:wn}))}catch(C){const N=Date.now(),U=C instanceof Error?C.message:"Unknown error";if(M.protocol==="grpc"){const R={...M,executionTime:N,executing:!1,grpc:{...M.grpc,response:{body:"",duration:0,error:U}}};r.find(ce=>ce.id===M.id)?Mt.update(M.id,ce=>{Object.assign(ce,R)}):Mt.insert(R),n(ce=>({...ce,request:R}))}else if(M.protocol==="mcp"){const R={...M,executionTime:N,executing:!1,mcp:{headers:M.mcp?.headers??[],tool:M.mcp?.tool,resource:M.mcp?.resource,response:{result:void 0,duration:0,error:U}}};r.find(ce=>ce.id===M.id)?Mt.update(M.id,ce=>{Object.assign(ce,R)}):Mt.insert(R),n(ce=>({...ce,request:R}))}else if(M.protocol==="openai"){const te=!!M.openai?.chat?{result:{type:"text",text:""},duration:0,error:U}:{result:{type:"image",image:""},duration:0,error:U},ce={...M,executionTime:N,executing:!1,openai:{...M.openai,response:te}};r.find(xe=>xe.id===M.id)?Mt.update(M.id,xe=>{Object.assign(xe,ce)}):Mt.insert(ce),n(xe=>({...xe,request:ce}))}else{const R={status:"",statusCode:0,headers:{},body:new Blob,duration:0,error:U},te={...M,executionTime:N,executing:!1,http:{...M.http,response:R}};r.find(he=>he.id===M.id)?Mt.update(M.id,he=>{Object.assign(he,te)}):Mt.insert(te),n(he=>({...he,request:te}))}}},[e.request,s,r,a]),re=K.useCallback(M=>{const C=Ju(M.name,M.protocol??"rest");C.id=M.id,C.url=M.url,C.executionTime=M.executionTime,C.variables=M.variables??[],M.http&&(C.http={method:M.http.method,headers:[...M.http.headers],query:[...M.http.query],body:M.http.body,request:M.http.request,response:M.http.response},M.http.body.type==="form-data"?C.http.body={type:"form-data",data:M.http.body.data.map(N=>({...N,file:null}))}:M.http.body.type==="binary"&&(C.http.body={type:"binary",file:null,fileName:M.http.body.fileName})),M.grpc&&(C.grpc={...M.grpc}),M.mcp&&(C.mcp={...M.mcp}),M.openai&&(C.openai={...M.openai}),n(N=>({...N,request:C}))},[]),pe=K.useCallback(async()=>{await OD()},[]),X=K.useCallback(async M=>{Mt.delete(M)},[]),V=K.useCallback(()=>{n(M=>({...M,sidebarCollapsed:!M.sidebarCollapsed}))},[]),$=K.useCallback(()=>{n(M=>({...M,aiPanelOpen:!M.aiPanelOpen}))},[]),G=K.useCallback(()=>{n(M=>({...M,request:Ju()}))},[]),oe={request:e.request,history:r,sidebarCollapsed:e.sidebarCollapsed,aiPanelOpen:e.aiPanelOpen,setProtocol:l,setMethod:u,setUrl:f,setHeaders:d,setQuery:m,setBody:p,setVariables:y,setOptions:g,executeRequest:Q,clearResponse:z,newRequest:G,setGrpcBody:v,setGrpcMetadata:x,setGrpcMethodSchema:E,setMcpTool:S,setMcpResource:T,setMcpHeaders:A,discoverMcpFeatures:H,setOpenAIModel:j,setOpenAIModels:D,setOpenAIBodyType:I,setOpenAIChatInput:P,setOpenAIImagePrompt:q,loadFromHistory:re,clearHistory:pe,deleteHistoryEntry:X,toggleSidebar:V,toggleAiPanel:$};return w.jsx(Rk.Provider,{value:oe,children:t})}var MD=ek();const Ok=K.createContext(null);function DD(t){const e=qe.c(6),{children:n}=t,[r,s]=K.useState(null);let a;e[0]===Symbol.for("react.memo_cache_sentinel")?(a=d=>{s(d)},e[0]=a):a=e[0];const l=a;let u;e[1]!==r?(u={portalTarget:r,setPortalTarget:l},e[1]=r,e[2]=u):u=e[2];let f;return e[3]!==n||e[4]!==u?(f=w.jsx(Ok.Provider,{value:u,children:n}),e[3]=n,e[4]=u,e[5]=f):f=e[5],f}function Nk(){const t=K.useContext(Ok);if(!t)throw new Error("useRequestBarPortal must be used within RequestBarPortalProvider");return t}function jD(t){const e=qe.c(3),{children:n}=t,{portalTarget:r}=Nk();if(!r)return null;let s;return e[0]!==n||e[1]!==r?(s=MD.createPortal(n,r),e[0]=n,e[1]=r,e[2]=s):s=e[2],s}function dn(){const t=K.useContext(Rk);if(!t)throw new Error("useClient must be used within a ClientProvider");return t}const LD=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),zD=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),zw=t=>{const e=zD(t);return e.charAt(0).toUpperCase()+e.slice(1)},Ik=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),PD=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var BD={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const $D=K.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:a,iconNode:l,...u},f)=>K.createElement("svg",{ref:f,...BD,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:Ik("lucide",s),...!a&&!PD(u)&&{"aria-hidden":"true"},...u},[...l.map(([d,m])=>K.createElement(d,m)),...Array.isArray(a)?a:[a]]));const Ke=(t,e)=>{const n=K.forwardRef(({className:r,...s},a)=>K.createElement($D,{ref:a,iconNode:e,className:Ik(`lucide-${LD(zw(t))}`,`lucide-${t}`,r),...s}));return n.displayName=zw(t),n};const UD=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],qD=Ke("box",UD);const FD=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Mk=Ke("check",FD);const VD=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],ei=Ke("chevron-down",VD);const HD=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],id=Ke("chevron-right",HD);const GD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Dk=Ke("circle-alert",GD);const KD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Ry=Ke("circle-check",KD);const ZD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],QD=Ke("circle-x",ZD);const JD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],jk=Ke("circle",JD);const YD=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],El=Ke("clock",YD);const XD=[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]],WD=Ke("cpu",XD);const e3=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Lk=Ke("eye",e3);const t3=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],eo=Ke("file-text",t3);const n3=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}]],wf=Ke("file",n3);const r3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],s3=Ke("globe",r3);const i3=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],zk=Ke("hash",i3);const a3=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],o3=Ke("image",a3);const l3=[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]],gg=Ke("link-2",l3);const c3=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Sf=Ke("loader-circle",c3);const u3=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],f3=Ke("music",u3);const d3=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}],["path",{d:"m8 9 3 3-3 3",key:"12hl5m"}]],h3=Ke("panel-right-close",d3);const p3=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}],["path",{d:"m10 15-3-3 3-3",key:"1pgupc"}]],m3=Ke("panel-right-open",p3);const g3=[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]],Pw=Ke("paperclip",g3);const y3=[["path",{d:"M12 22v-5",key:"1ega77"}],["path",{d:"M15 8V2",key:"18g5xt"}],["path",{d:"M17 8a1 1 0 0 1 1 1v4a4 4 0 0 1-4 4h-4a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1z",key:"1xoxul"}],["path",{d:"M9 8V2",key:"14iosj"}]],b3=Ke("plug",y3);const _3=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],kf=Ke("refresh-cw",_3);const v3=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],x3=Ke("search",v3);const w3=[["path",{d:"M3.714 3.048a.498.498 0 0 0-.683.627l2.843 7.627a2 2 0 0 1 0 1.396l-2.842 7.627a.498.498 0 0 0 .682.627l18-8.5a.5.5 0 0 0 0-.904z",key:"117uat"}],["path",{d:"M6 12h16",key:"s4cdu5"}]],S3=Ke("send-horizontal",w3);const k3=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],E3=Ke("send",k3);const C3=[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]],T3=Ke("server",C3);const A3=[["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 18h1.973a4 4 0 0 0 3.3-1.7l5.454-8.6a4 4 0 0 1 3.3-1.7H22",key:"1ailkh"}],["path",{d:"M2 6h1.972a4 4 0 0 1 3.6 2.2",key:"km57vx"}],["path",{d:"M22 18h-6.041a4 4 0 0 1-3.3-1.8l-.359-.45",key:"os18l9"}]],Pk=Ke("shuffle",A3);const R3=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Za=Ke("sparkles",R3);const O3=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],N3=Ke("square",O3);const I3=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],tc=Ke("trash-2",I3);const M3=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],D3=Ke("type",M3);const j3=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],yg=Ke("upload",j3);const L3=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],Ef=Ke("wrench",L3);const z3=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Ul=Ke("x",z3);const P3=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],B3=Ke("zap",P3),$3={GET:"text-green-600 dark:text-green-400",POST:"text-yellow-600 dark:text-yellow-400",PUT:"text-blue-600 dark:text-blue-400",PATCH:"text-purple-600 dark:text-purple-400",DELETE:"text-red-600 dark:text-red-400",OPTIONS:"text-neutral-500 dark:text-neutral-400",HEAD:"text-neutral-500 dark:text-neutral-400"};function U3(t){return t?t>=200&&t<300?"bg-green-500":t>=300&&t<400?"bg-yellow-500":t>=400&&t<500?"bg-orange-500":"bg-red-500":"bg-neutral-500"}function q3(t){try{return new URL(t.url).hostname}catch{return"Other"}}function F3(t){if(t.protocol==="mcp")return t.mcp?.tool?.name?t.mcp.tool.name:t.mcp?.resource?.uri?t.mcp.resource.uri:"MCP Request";if(t.protocol==="openai")return t.openai?.model||"No model";if(t.protocol==="grpc"){try{const n=new URL(t.url).pathname.split("/").filter(Boolean);if(n.length>0)return n[n.length-1]}catch{}return t.url}try{const e=new URL(t.url);return e.pathname+e.search}catch{return t.url}}function V3(t){return t.protocol==="grpc"?"gRPC":t.protocol==="mcp"?"MCP":t.protocol==="openai"?"OpenAI":t.http?.method??"GET"}function H3(t){return t.protocol==="grpc"?"text-cyan-600 dark:text-cyan-400":t.protocol==="mcp"?"text-violet-600 dark:text-violet-400":t.protocol==="openai"?"text-purple-600 dark:text-purple-400":$3[t.http?.method??"GET"]}function G3(t){const e=new Map;for(const n of t){const r=q3(n),s=e.get(r)||[];s.push(n),e.set(r,s)}return Array.from(e.entries()).map(([n,r])=>({hostname:n,entries:r,latestTimestamp:Math.max(...r.map(s=>s.executionTime??0))})).sort((n,r)=>r.latestTimestamp-n.latestTimestamp)}function K3(){const t=qe.c(20),{history:e,sidebarCollapsed:n,loadFromHistory:r,deleteHistoryEntry:s,clearHistory:a,toggleSidebar:l}=dn();let u;t[0]!==e?(u=G3(e),t[0]=e,t[1]=u):u=t[1];const f=u;if(e.length===0||n)return null;let d;t[2]===Symbol.for("react.memo_cache_sentinel")?(d=w.jsx("h1",{className:"text-sm font-semibold text-neutral-700 dark:text-neutral-200 pl-0.5",children:"Prism"}),t[2]=d):d=t[2];let m;t[3]!==a||t[4]!==e.length?(m=e.length>0&&w.jsx("button",{onClick:a,className:"p-1.5 rounded-lg hover:bg-neutral-100 dark:hover:bg-white/5 transition-colors",title:"Clear history",children:w.jsx(tc,{className:"w-4 h-4 text-neutral-500 dark:text-neutral-400"})}),t[3]=a,t[4]=e.length,t[5]=m):m=t[5];let p;t[6]===Symbol.for("react.memo_cache_sentinel")?(p=w.jsx(m3,{className:"w-4 h-4 text-neutral-500 dark:text-neutral-400"}),t[6]=p):p=t[6];let y;t[7]!==l?(y=w.jsx("button",{onClick:l,className:"p-1.5 rounded-lg hover:bg-neutral-100 dark:hover:bg-white/5 transition-colors",title:"Hide sidebar",children:p}),t[7]=l,t[8]=y):y=t[8];let g;t[9]!==m||t[10]!==y?(g=w.jsxs("div",{className:"px-3 py-2.5 flex items-center justify-between gap-2",children:[d,w.jsxs("div",{className:"flex items-center gap-1",children:[m,y]})]}),t[9]=m,t[10]=y,t[11]=g):g=t[11];let v;t[12]!==s||t[13]!==f||t[14]!==e.length||t[15]!==r?(v=w.jsx("div",{className:"flex-1 overflow-y-auto px-2",children:e.length===0?w.jsx("div",{className:"px-2 py-8 text-center text-neutral-400 dark:text-neutral-600 text-xs",children:"No history yet"}):w.jsx("div",{className:"space-y-3 pb-2",children:f.map(E=>w.jsxs("div",{children:[w.jsx("div",{className:"px-2 py-1 text-[10px] font-medium text-neutral-400 dark:text-neutral-500 uppercase tracking-wider truncate",title:E.hostname,children:E.hostname}),w.jsx("div",{className:"space-y-0.5",children:E.entries.map(S=>w.jsxs("div",{className:"group flex items-center gap-2 px-3 py-1.5 rounded-lg hover:bg-neutral-100 dark:hover:bg-white/5 cursor-pointer transition-colors",onClick:()=>r(S),children:[w.jsx("span",{className:`w-1.5 h-1.5 rounded-full shrink-0 ${U3(S.http?.response?.statusCode??(S.grpc?.response?.error?0:S.grpc?.response?200:null)??(S.mcp?.response?.error?0:S.mcp?.response?200:null)??(S.openai?.response?.error?0:S.openai?.response?200:null))}`}),w.jsx("span",{className:`text-[10px] font-semibold shrink-0 ${H3(S)}`,children:V3(S)}),w.jsx("span",{className:"text-xs text-neutral-500 dark:text-neutral-400 truncate flex-1",title:S.url,children:F3(S)}),w.jsx("button",{onClick:T=>{T.stopPropagation(),s(S.id)},className:"opacity-0 group-hover:opacity-100 inline-flex items-center justify-center w-5 h-5 hover:bg-neutral-200 dark:hover:bg-white/8 rounded transition-all shrink-0",title:"Delete",children:w.jsx("svg",{className:"w-3 h-3 text-neutral-400 dark:text-neutral-500 hover:text-rose-500 dark:hover:text-rose-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},S.id))})]},E.hostname))})}),t[12]=s,t[13]=f,t[14]=e.length,t[15]=r,t[16]=v):v=t[16];let x;return t[17]!==g||t[18]!==v?(x=w.jsxs("aside",{className:"w-64 bg-white dark:bg-[#1a1a1a]/60 dark:backdrop-blur-xl border border-neutral-200 dark:border-white/8 rounded-xl flex flex-col overflow-hidden dark:shadow-2xl",children:[g,v]}),t[17]=g,t[18]=v,t[19]=x):x=t[19],x}const am=[{value:"rest",label:"HTTP",icon:s3},{value:"grpc",label:"gRPC",icon:T3},{value:"mcp",label:"MCP",icon:b3},{value:"openai",label:"OpenAI",icon:Za}];function Z3(){const t=qe.c(23),{request:e,setProtocol:n}=dn(),r=e?.protocol??"rest",[s,a]=K.useState(!1),l=K.useRef(null);let u;t[0]!==r?(u=am.find(A=>A.value===r)??am[0],t[0]=r,t[1]=u):u=t[1];const f=u,d=f.icon;let m,p;t[2]===Symbol.for("react.memo_cache_sentinel")?(m=()=>{const A=j=>{l.current&&!l.current.contains(j.target)&&a(!1)};return document.addEventListener("mousedown",A),()=>document.removeEventListener("mousedown",A)},p=[],t[2]=m,t[3]=p):(m=t[2],p=t[3]),K.useEffect(m,p);let y;t[4]!==s?(y=()=>a(!s),t[4]=s,t[5]=y):y=t[5];let g;t[6]!==d?(g=w.jsx(d,{className:"w-4 h-4"}),t[6]=d,t[7]=g):g=t[7];let v;t[8]!==f.label?(v=w.jsx("span",{className:"text-xs font-medium",children:f.label}),t[8]=f.label,t[9]=v):v=t[9];let x;t[10]===Symbol.for("react.memo_cache_sentinel")?(x=w.jsx(ei,{className:"w-3 h-3"}),t[10]=x):x=t[10];let E;t[11]!==f.label||t[12]!==y||t[13]!==g||t[14]!==v?(E=w.jsxs("button",{type:"button",onClick:y,className:"flex items-center gap-1 px-2 py-1.5 rounded-md hover:bg-neutral-100 dark:hover:bg-white/10 transition-colors text-neutral-600 dark:text-neutral-400",title:f.label,children:[g,v,x]}),t[11]=f.label,t[12]=y,t[13]=g,t[14]=v,t[15]=E):E=t[15];let S;t[16]!==s||t[17]!==r||t[18]!==n?(S=s&&w.jsx("div",{className:"absolute top-full left-0 mt-1 bg-white dark:bg-[#1a1a1a] border border-neutral-200 dark:border-white/10 rounded-md shadow-lg z-50 min-w-28",children:am.map(A=>{const j=A.icon;return w.jsxs("button",{type:"button",onClick:()=>{n(A.value),a(!1)},className:`w-full flex items-center gap-2 px-3 py-1.5 text-sm transition-colors ${r===A.value?"bg-neutral-100 dark:bg-white/10 text-neutral-900 dark:text-neutral-100":"text-neutral-600 dark:text-neutral-400 hover:bg-neutral-50 dark:hover:bg-white/5"}`,children:[w.jsx(j,{className:"w-4 h-4"}),A.label]},A.value)})}),t[16]=s,t[17]=r,t[18]=n,t[19]=S):S=t[19];let T;return t[20]!==E||t[21]!==S?(T=w.jsxs("div",{ref:l,className:"relative",children:[E,S]}),t[20]=E,t[21]=S,t[22]=T):T=t[22],T}let fl={};async function Q3(){try{const t=await fetch("/config.json");if(t.ok){const e=await t.json();fl={...fl,...e}}else console.warn("Failed to load config.json, using defaults");return fl}catch(t){return console.warn("Error loading config:",t),fl}}function Oy(){return fl}function J3(){const t=qe.c(23),{request:e,executeRequest:n,aiPanelOpen:r,toggleAiPanel:s}=dn();let a;t[0]===Symbol.for("react.memo_cache_sentinel")?(a=Oy().ai?.model,t[0]=a):a=t[0];const l=!!a,u=e?.executing??!1,f=e?.protocol??"rest",d=e?.url??"",m=X3;let p;t[1]!==d?(p=m(d),t[1]=d,t[2]=p):p=t[2];const{host:y,service:g,method:v}=p,x=!!e?.mcp?.tool||!!e?.mcp?.resource,E=e?.openai?.model??"";let S;t[3]!==e?.openai?.chat?.input?(S=e?.openai?.chat?.input??[],t[3]=e?.openai?.chat?.input,t[4]=S):S=t[4];const T=S,A=e?.openai?.image?.prompt??"";let j;t[5]!==T||t[6]!==A||t[7]!==e?.openai?.chat?(j=e?.openai?.chat?T.length>0&&T.some(Y3):A.trim().length>0,t[5]=T,t[6]=A,t[7]=e?.openai?.chat,t[8]=j):j=t[8];const D=j,I=f==="rest"?d.length>0:f==="mcp"?d.length>0&&x:f==="openai"?d.length>0&&E.length>0&&D:y.length>0&&g.length>0&&v.length>0;let P;t[9]!==n?(P=()=>{n()},t[9]=n,t[10]=P):P=t[10];const q=P,H=u||!I;let z;t[11]!==u?(z=u?w.jsxs("svg",{className:"w-4 h-4 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[w.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"3"}),w.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):w.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14 5l7 7m0 0l-7 7m7-7H3"})}),t[11]=u,t[12]=z):z=t[12];let Q;t[13]!==q||t[14]!==H||t[15]!==z?(Q=w.jsx("button",{type:"button",onClick:q,disabled:H,className:"p-1.5 hover:bg-neutral-100 dark:hover:bg-white/10 disabled:opacity-30 disabled:cursor-not-allowed rounded-md transition-colors text-neutral-500 dark:text-neutral-400 hover:text-neutral-700 dark:hover:text-neutral-200",title:"Send request",children:z}),t[13]=q,t[14]=H,t[15]=z,t[16]=Q):Q=t[16];let re;t[17]!==r||t[18]!==s?(re=l&&w.jsx("button",{type:"button",onClick:s,className:`p-1.5 hover:bg-neutral-100 dark:hover:bg-white/10 rounded-md transition-colors ${r?"text-amber-500 hover:text-amber-600":"text-neutral-500 dark:text-neutral-400 hover:text-neutral-700 dark:hover:text-neutral-200"}`,title:"AI Assistant",children:w.jsx(Za,{className:"w-4 h-4"})}),t[17]=r,t[18]=s,t[19]=re):re=t[19];let pe;return t[20]!==Q||t[21]!==re?(pe=w.jsxs(jD,{children:[Q,re]}),t[20]=Q,t[21]=re,t[22]=pe):pe=t[22],pe}function Y3(t){return t.content.length>0}function X3(t){const e=t.match(/^grpc:\/\/([^/]*)(?:\/([^/]*)(?:\/([^/]*))?)?$/);return e?{host:e[1]||"",service:e[2]||"",method:e[3]||""}:{host:"",service:"",method:""}}const W3=["GET","POST","PUT","PATCH","DELETE","OPTIONS","HEAD"],ej={GET:"text-emerald-600 dark:text-emerald-400",POST:"text-amber-600 dark:text-amber-400",PUT:"text-blue-600 dark:text-blue-400",PATCH:"text-purple-600 dark:text-purple-400",DELETE:"text-rose-600 dark:text-rose-400",OPTIONS:"text-neutral-500 dark:text-neutral-400",HEAD:"text-neutral-500 dark:text-neutral-400"};function tj(){const t=qe.c(15),{request:e,setUrl:n,setMethod:r}=dn(),s=e?.http?.method??"GET",a=e?.url??"";let l;t[0]!==r?(l=g=>r(g.target.value),t[0]=r,t[1]=l):l=t[1];const u=`px-2 py-1 bg-transparent font-semibold text-xs focus:outline-none cursor-pointer ${ej[s]}`;let f;t[2]===Symbol.for("react.memo_cache_sentinel")?(f=W3.map(nj),t[2]=f):f=t[2];let d;t[3]!==s||t[4]!==l||t[5]!==u?(d=w.jsx("select",{value:s,onChange:l,className:u,children:f}),t[3]=s,t[4]=l,t[5]=u,t[6]=d):d=t[6];let m;t[7]!==n?(m=g=>n(g.target.value),t[7]=n,t[8]=m):m=t[8];let p;t[9]!==m||t[10]!==a?(p=w.jsx("input",{type:"text",value:a,onChange:m,placeholder:"Enter request URL",className:"flex-1 px-3 py-1.5 bg-transparent text-neutral-800 dark:text-neutral-100 text-sm placeholder-neutral-400 dark:placeholder-neutral-600 focus:outline-none"}),t[9]=m,t[10]=a,t[11]=p):p=t[11];let y;return t[12]!==d||t[13]!==p?(y=w.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[d,p]}),t[12]=d,t[13]=p,t[14]=y):y=t[14],y}function nj(t){return w.jsx("option",{value:t,className:"bg-white dark:bg-[#1a1a1a]",children:t},t)}function Bw(t){const e=[],n=/\{\{(\w+):([^{}]+)\}\}/g;let r;for(;(r=n.exec(t))!==null;)e.push({start:r.index,end:r.index+r[0].length,type:r[1],id:r[2],full:r[0]});return e}function Yu(t){if(t.nodeType===Node.TEXT_NODE)return(t.textContent||"").replace(/\u200B/g,"");if(t.classList?.contains("variable-chip"))return t.dataset.marker||"";if(t.tagName==="BR")return`
`;let e="";const n=t.tagName==="DIV"||t.tagName==="P";for(const r of t.childNodes)e+=Yu(r);return n&&e&&!e.endsWith(`
`)&&(e+=`
`),e}function Bk(t,e){if(e.rangeCount===0)return"";const n=e.getRangeAt(0),r=n.startContainer,s=n.startOffset;let a="",l=!1;function u(f){if(!l){if(f===r)if(f.nodeType===Node.TEXT_NODE){a+=(f.textContent||"").slice(0,s).replace(/\u200B/g,""),l=!0;return}else{const d=f.childNodes;for(let m=0;m<s;m++)if(u(d[m]),l)return;l=!0;return}if(f.nodeType===Node.TEXT_NODE)a+=(f.textContent||"").replace(/\u200B/g,"");else if(f.nodeType===Node.ELEMENT_NODE){const d=f;if(d.classList.contains("variable-chip")){if(d.contains(r)){l=!0;return}a+=d.dataset.marker||""}else if(d.tagName==="BR")a+=`
`;else if(d.tagName==="DIV"||d.tagName==="P"){for(const m of Array.from(d.childNodes))if(u(m),l)return;a&&!a.endsWith(`
`)&&(a+=`
`)}else for(const m of Array.from(d.childNodes))if(u(m),l)return}}}return u(t),a}function rj(t){const e=window.getSelection();return!e||e.rangeCount===0||!t.contains(e.anchorNode)?null:Bk(t,e).length}function sj(t,e){let n=0,r=!1;function s(a){if(!r){if(a.nodeType===Node.TEXT_NODE){const l=a.textContent||"",f=l.replace(/\u200B/g,"").length;if(n+f>=e){const d=e-n;let m=0,p=0;for(;p<d&&m<l.length;)l[m]!==""&&p++,m++;const y=document.createRange();y.setStart(a,m),y.setEnd(a,m);const g=window.getSelection();g?.removeAllRanges(),g?.addRange(y),r=!0;return}n+=f}else if(a.nodeType===Node.ELEMENT_NODE){const l=a;if(l.classList.contains("variable-chip")){const u=(l.dataset.marker||"").length;n+=u}else if(l.tagName==="BR")n+=1;else{const u=l.tagName==="DIV"||l.tagName==="P";for(const f of Array.from(a.childNodes))if(s(f),r)return;u&&n<e&&(n+=1)}}}}s(t)}function ij(t,e,n){switch(t){case"file_base64":case"file_dataurl":return n?.data?n.name||"file":"Select file...";case"base64":if(n?.data){const r=n.data;return r.length>12?r.slice(0,12)+"":r}return"Enter text...";default:return n?.name||t}}function aj(t){const e="w-3 h-3";switch(t){case"file_base64":case"file_dataurl":return`<svg class="${e}" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/></svg>`;case"base64":return`<svg class="${e}" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="4" y1="9" x2="20" y2="9"/><line x1="4" y1="15" x2="20" y2="15"/><line x1="10" y1="3" x2="8" y2="21"/><line x1="16" y1="3" x2="14" y2="21"/></svg>`;case"timestamp":return`<svg class="${e}" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>`;case"uuid":return`<svg class="${e}" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"/><path d="M5 3v4"/><path d="M9 5H1"/></svg>`;case"random_string":return`<svg class="${e}" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M2 18h1.4c1.3 0 2.5-.6 3.3-1.7l14.2-12.6c.8-1.1 2-1.7 3.3-1.7H22"/><path d="M2 6h1.4c1.3 0 2.5.6 3.3 1.7l14.2 12.6c.8 1.1 2 1.7 3.3 1.7H22"/></svg>`;default:return""}}function $w(t,e,n,r){const s=r.find(m=>m.type===t&&m.id===e),a=t==="file_base64"||t==="file_dataurl"||t==="base64",l=s&&s.data,u=document.createElement("span");u.contentEditable="false",u.className=`variable-chip inline-flex items-center gap-1 px-1.5 py-0.5 mx-0.5 rounded text-xs font-medium align-baseline select-none ${a&&!l?"bg-amber-500/20 text-amber-300 border border-amber-500/30":"bg-blue-500/20 text-blue-300 border border-blue-500/30"} ${a?"cursor-pointer hover:bg-blue-500/30":""}`,u.dataset.marker=n,u.dataset.variableType=t,u.dataset.variableId=e;const f=document.createElement("span");f.className="chip-icon",f.innerHTML=aj(t),u.appendChild(f);const d=document.createElement("span");return d.className="chip-label",d.textContent=ij(t,e,s),u.appendChild(d),u}function $k(t){const e=qe.c(40),{editorRef:n,value:r,onChange:s,variables:a,onVariablesChange:l,indentTriggers:u}=t;let f;e[0]!==u?(f=u===void 0?["{","["]:u,e[0]=u,e[1]=f):f=e[1];const d=f,m=K.useRef(""),p=K.useRef(!1),y=K.useRef(!1);let g;e[2]!==s||e[3]!==l||e[4]!==a?(g=M=>{const C=Yu(M);m.current=C,p.current=!0,s(C);const N=new Set(Bw(C).map(cj)),U=a.filter(R=>N.has(R.id));U.length!==a.length&&(y.current=!0,l(U))},e[2]=s,e[3]=l,e[4]=a,e[5]=g):g=e[5];const v=g,[x,E]=K.useState(!1);let S;e[6]===Symbol.for("react.memo_cache_sentinel")?(S={top:0,left:0},e[6]=S):S=e[6];const[T,A]=K.useState(S),j=lj;let D;e[7]!==n||e[8]!==r||e[9]!==a?(D=()=>{const M=n.current;if(!M)return;const C=rj(M),N=Bw(r);M.innerHTML="";let U=0;for(const te of N){const ce=r.slice(U,te.start);ce&&j(M,ce);const he=$w(te.type,te.id,te.full,a);M.appendChild(he),M.appendChild(document.createTextNode("")),U=te.end}const R=r.slice(U);R&&j(M,R),M.childNodes.length===0&&M.appendChild(document.createElement("br")),m.current=r,C!==null&&sj(M,C)},e[7]=n,e[8]=r,e[9]=a,e[10]=D):D=e[10];const I=D;let P,q;e[11]!==I||e[12]!==r?(P=()=>{!p.current&&r!==m.current&&I(),p.current=!1},q=[r,I],e[11]=I,e[12]=r,e[13]=P,e[14]=q):(P=e[13],q=e[14]),K.useEffect(P,q);let H;e[15]!==I?(H=()=>{y.current?y.current=!1:I()},e[15]=I,e[16]=H):H=e[16];let z;e[17]!==I||e[18]!==a?(z=[a,I],e[17]=I,e[18]=a,e[19]=z):z=e[19],K.useEffect(H,z);let Q;e[20]!==n||e[21]!==v?(Q=()=>{const M=n.current;if(!M)return;const C=Yu(M),N=window.getSelection();if(N&&N.rangeCount>0){const U=N.getRangeAt(0);if(U.startContainer.nodeType===Node.TEXT_NODE){const R=U.startContainer.textContent||"",te=U.startOffset;if(te>=2&&R.slice(te-2,te)==="{{"){const ce=U.getBoundingClientRect();A({top:ce.bottom+4,left:ce.left}),E(!0)}else E(!1)}}C!==m.current&&v(M)},e[20]=n,e[21]=v,e[22]=Q):Q=e[22];const re=Q,pe=oj;let X;e[23]!==n||e[24]!==d||e[25]!==x||e[26]!==v?(X=M=>{if(x){M.key==="Escape"&&(E(!1),M.preventDefault());return}if(M.key==="Backspace"){const C=window.getSelection();if(C&&C.rangeCount>0&&C.isCollapsed){const N=C.getRangeAt(0),U=N.startContainer,R=N.startOffset;if(U.nodeType===Node.TEXT_NODE&&R===1&&U.textContent?.charAt(0)===""){const te=U.previousSibling;if(te&&te.classList?.contains("variable-chip")){M.preventDefault();const ce=te,he=ce.parentNode;he?.removeChild(ce),he?.removeChild(U);const xe=n.current;xe&&v(xe);return}}if(R===0){let te=U.previousSibling;if(te?.nodeType===Node.TEXT_NODE&&te.textContent===""&&(te=te.previousSibling),te&&te.classList?.contains("variable-chip")){M.preventDefault();const ce=te,he=ce.nextSibling,xe=ce.parentNode;xe?.removeChild(ce),he?.nodeType===Node.TEXT_NODE&&he.textContent===""&&xe?.removeChild(he);const Me=n.current;Me&&v(Me);return}}}}if(M.key==="Tab"&&(M.preventDefault(),document.execCommand("insertText",!1,"  ")),M.key==="Enter"){M.preventDefault();const C=n.current,N=window.getSelection();let U="";if(C&&N&&N.rangeCount>0){const ce=Bk(C,N),he=ce.lastIndexOf(`
`),xe=ce.slice(he+1),Me=xe.match(/^(\s*)/);U=Me?Me[1]:"";const et=xe.trimEnd().slice(-1);d.includes(et)&&(U=U+"  ")}const R=document.createElement("br"),te=N?.getRangeAt(0);te&&(te.deleteContents(),te.insertNode(R),te.setStartAfter(R),te.setEndAfter(R),N?.removeAllRanges(),N?.addRange(te),U&&document.execCommand("insertText",!1,U))}},e[23]=n,e[24]=d,e[25]=x,e[26]=v,e[27]=X):X=e[27];const V=X;let $;e[28]!==n||e[29]!==s||e[30]!==l||e[31]!==a?($=M=>{E(!1);const C=n.current;if(!C)return;const N=window.getSelection();if(!N||N.rangeCount===0)return;const U=N.getRangeAt(0);if(U.startContainer.nodeType!==Node.TEXT_NODE)return;const R=U.startContainer,te=U.startOffset,ce=R.textContent||"";R.textContent=ce.slice(0,te-2)+ce.slice(te);const he=Math.random().toString(36).substring(2,9),xe=M==="file_base64"||M==="file_dataurl"?"file":M,Me=`{{${M}:${he}}}`,je=$w(M,he,Me,a),et=te-2;U.setStart(R,et),U.setEnd(R,et),U.insertNode(je);const pt=document.createTextNode("");je.after(pt),U.setStart(pt,1),U.setEnd(pt,1),N.removeAllRanges(),N.addRange(U),y.current=!0,l([...a,{id:he,type:M,name:xe}]);const kt=Yu(C);return m.current=kt,p.current=!0,s(kt),he},e[28]=n,e[29]=s,e[30]=l,e[31]=a,e[32]=$):$=e[32];const G=$;let oe;return e[33]!==I||e[34]!==re||e[35]!==V||e[36]!==G||e[37]!==x||e[38]!==T?(oe={handleInput:re,handlePaste:pe,handleKeyDown:V,insertVariable:G,showTypeMenu:x,setShowTypeMenu:E,typeMenuPosition:T,buildDOM:I},e[33]=I,e[34]=re,e[35]=V,e[36]=G,e[37]=x,e[38]=T,e[39]=oe):oe=e[39],oe}function oj(t){t.preventDefault();const e=t.clipboardData.getData("text/plain");document.execCommand("insertText",!1,e)}function lj(t,e){e.split(`
`).forEach((r,s)=>{s>0&&t.appendChild(document.createElement("br")),r&&t.appendChild(document.createTextNode(r))})}function cj(t){return t.id}const uj=[{type:"file_base64",label:"File (Base64)",description:"Select a file to encode",icon:w.jsx(wf,{className:"w-3.5 h-3.5"})},{type:"file_dataurl",label:"File (Data URL)",description:"File as data:... URL",icon:w.jsx(wf,{className:"w-3.5 h-3.5"})},{type:"base64",label:"Text (Base64)",description:"Text to encode",icon:w.jsx(zk,{className:"w-3.5 h-3.5"})},{type:"timestamp",label:"Timestamp",description:"Unix timestamp",icon:w.jsx(El,{className:"w-3.5 h-3.5"})},{type:"uuid",label:"UUID",description:"Random UUID",icon:w.jsx(Za,{className:"w-3.5 h-3.5"})},{type:"random_string",label:"Random String",description:"16-char random",icon:w.jsx(Pk,{className:"w-3.5 h-3.5"})}];function Ny({value:t,onChange:e,variables:n,onVariablesChange:r,placeholder:s,action:a}){const l=K.useRef(null),u=K.useRef(null),{handleInput:f,handlePaste:d,handleKeyDown:m,insertVariable:p,showTypeMenu:y,setShowTypeMenu:g,typeMenuPosition:v,buildDOM:x}=$k({editorRef:l,value:t,onChange:e,variables:n,onVariablesChange:r,indentTriggers:["{","["]}),[E,S]=K.useState(null),[T,A]=K.useState(""),j=K.useRef(!1),D=K.useRef(null),I=K.useMemo(()=>{if(!t.trim())return{valid:!0,empty:!0};try{let V=t;return V=V.replace(/"\{\{[^{}]+\}\}"/g,'"__var__"'),V=V.replace(/\{\{[^{}]+\}\}/g,"null"),JSON.parse(V),{valid:!0,empty:!1}}catch(V){return{valid:!1,empty:!1,error:V instanceof Error?V.message:"Invalid JSON"}}},[t]),[P,q]=K.useState(!1),H=K.useMemo(()=>xf(t,n,{missingDataPlaceholder:"[no data]"}),[t,n]);K.useEffect(()=>(D.current&&(clearTimeout(D.current),D.current=null),I.valid&&!I.empty&&j.current&&(D.current=setTimeout(()=>{try{let V=t;V=V.replace(/"\{\{[^{}]+\}\}"/g,'"__var__"'),V=V.replace(/\{\{[^{}]+\}\}/g,"null"),JSON.parse(V);const $=new Map;let G=t,oe=0;G=G.replace(/"\{\{[^{}]+\}\}"/g,N=>{const U=`"__VAR_${oe++}__"`;return $.set(U,N),U}),G=G.replace(/\{\{[^{}]+\}\}/g,N=>{const U=`"__VAR_${oe++}__"`;return $.set(U,N),U});const M=JSON.parse(G);let C=JSON.stringify(M,null,2);C=C.replace(/\{\}/g,`{
}`),C=C.replace(/\[\]/g,`[
]`),$.forEach((N,U)=>{C=C.replace(U,N)}),C!==t&&e(C)}catch{}},500)),j.current=!I.valid,()=>{D.current&&clearTimeout(D.current)}),[I.valid,I.empty,t,e]),K.useEffect(()=>{P||x()},[P,x]);const z=K.useCallback((V,$)=>{const G=document.createElement("input");G.type="file",G.onchange=oe=>{const M=oe.target.files?.[0];if(!M)return;const C=new FileReader;C.onload=()=>{const N=C.result.split(",")[1],U=n.find(R=>R.id===$);r(U?n.map(R=>R.id===U.id?{...R,data:N,mimeType:M.type,name:M.name}:R):[...n,{id:$,type:V,name:M.name,data:N,mimeType:M.type}])},C.readAsDataURL(M)},G.click()},[n,r]),Q=K.useCallback(V=>{const G=V.target.closest(".variable-chip");if(G){const oe=G.dataset.variableType,M=G.dataset.variableId;if(oe==="file_base64"||oe==="file_dataurl")z(oe,M),V.preventDefault(),V.stopPropagation();else if(oe==="base64"){const C=G.getBoundingClientRect(),N=n.find(U=>U.id===M);A(N?.data||""),S({variableKey:`${oe}:${M}`,rect:C}),V.preventDefault(),V.stopPropagation()}}else S(null)},[n,z]),re=K.useCallback(V=>{const $=p(V);$&&(V==="file_base64"||V==="file_dataurl")&&setTimeout(()=>z(V,$),0)},[p,z]),pe=K.useCallback(()=>{if(!E)return;const[V,$]=E.variableKey.split(":"),G=n.find(oe=>oe.id===$);r(G?n.map(oe=>oe.id===G.id?{...oe,data:T}:oe):[...n,{id:$,type:V,name:V,data:T}]),S(null),l.current?.focus()},[E,T,n,r]);K.useEffect(()=>{const V=G=>{G.key==="Escape"&&(g(!1),S(null))},$=G=>{u.current&&!u.current.contains(G.target)&&(g(!1),S(null))};return document.addEventListener("keydown",V),document.addEventListener("mousedown",$),()=>{document.removeEventListener("keydown",V),document.removeEventListener("mousedown",$)}},[g]);const X=K.useMemo(()=>{if(!E||!u.current)return{top:0,left:0};const V=u.current.getBoundingClientRect();return{top:E.rect.bottom-V.top+4,left:Math.max(0,E.rect.left-V.left)}},[E]);return w.jsxs("div",{ref:u,className:"flex flex-col h-full min-h-50 max-h-[60vh] relative overflow-hidden",children:[P?w.jsx("pre",{className:"flex-1 min-h-0 p-3 font-mono text-sm text-zinc-100 overflow-y-auto whitespace-pre-wrap wrap-break-word",children:H}):w.jsxs("div",{className:"flex-1 min-h-0 relative",children:[w.jsx("div",{ref:l,contentEditable:!0,suppressContentEditableWarning:!0,onInput:f,onPaste:d,onKeyDown:m,onClick:Q,className:"h-full p-3 font-mono text-sm text-zinc-100 outline-none overflow-y-auto whitespace-pre-wrap wrap-break-word"}),!t&&s&&w.jsx("div",{className:"absolute top-3 left-3 font-mono text-sm text-zinc-500 pointer-events-none whitespace-pre-wrap",children:s})]}),w.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 text-xs shrink-0",children:[a&&w.jsx("button",{type:"button",onClick:a.onClick,className:"text-[11px] px-2 py-0.5 rounded bg-zinc-700 hover:bg-zinc-600 text-zinc-200 transition-colors",children:a.label}),w.jsx("div",{className:"flex-1"}),w.jsx("button",{onClick:()=>q(!P),className:`transition-colors flex items-center gap-1 ${P?"text-blue-400 hover:text-blue-300":"text-zinc-500 hover:text-zinc-300"}`,title:P?"Show editor":"Show resolved JSON",children:w.jsx(Lk,{className:"w-3.5 h-3.5"})}),I.valid?w.jsx("span",{className:"text-emerald-500",children:"Valid JSON"}):w.jsx("span",{className:"text-red-400",title:I.error,children:"Invalid JSON"})]}),y&&w.jsx("div",{className:"fixed z-50 w-56 bg-zinc-800 border border-zinc-600 rounded-lg shadow-xl py-1",style:{top:v.top,left:v.left},children:uj.map(V=>w.jsxs("button",{onClick:()=>re(V.type),className:"w-full flex items-center gap-2 px-3 py-2 text-left hover:bg-zinc-700 transition-colors",children:[w.jsx("span",{className:"text-zinc-400",children:V.icon}),w.jsxs("div",{className:"flex-1 min-w-0",children:[w.jsx("div",{className:"text-sm text-zinc-200",children:V.label}),w.jsx("div",{className:"text-xs text-zinc-500",children:V.description})]})]},V.type))}),E&&(()=>{const[V]=E.variableKey.split(":");return w.jsx("div",{className:"absolute z-50 bg-zinc-800/95 border border-zinc-700/50 rounded shadow-lg p-1.5 w-44",style:X,children:V==="base64"?w.jsxs("div",{className:"flex gap-1",children:[w.jsx("input",{type:"text",value:T,onChange:$=>A($.target.value),onKeyDown:$=>$.key==="Enter"&&pe(),placeholder:"Text to encode...",className:"flex-1 min-w-0 px-1.5 py-0.5 text-xs bg-transparent text-zinc-200 rounded border-none focus:outline-none placeholder:text-zinc-500",autoFocus:!0}),w.jsx("button",{onClick:pe,className:"p-1 text-zinc-400 hover:text-zinc-200 transition-colors",children:w.jsx(Mk,{className:"w-3 h-3"})})]}):null})})()]})}const fj=[{type:"file_base64",label:"File (Base64)",description:"Select a file to encode",icon:w.jsx(wf,{className:"w-3.5 h-3.5"})},{type:"file_dataurl",label:"File (Data URL)",description:"File as data:... URL",icon:w.jsx(wf,{className:"w-3.5 h-3.5"})},{type:"base64",label:"Text (Base64)",description:"Text to encode",icon:w.jsx(zk,{className:"w-3.5 h-3.5"})},{type:"timestamp",label:"Timestamp",description:"Unix timestamp",icon:w.jsx(El,{className:"w-3.5 h-3.5"})},{type:"uuid",label:"UUID",description:"Random UUID",icon:w.jsx(Za,{className:"w-3.5 h-3.5"})},{type:"random_string",label:"Random String",description:"16-char random",icon:w.jsx(Pk,{className:"w-3.5 h-3.5"})}];function dj(t){if(!t.trim())return{valid:!0};try{const r=new DOMParser().parseFromString(t,"application/xml").querySelector("parsererror");if(r){const s=r.textContent||"Invalid XML",a=s.match(/error[^:]*:\s*(.+)/i);return{valid:!1,error:a?a[1].trim():s.split(`
`)[0]}}return{valid:!0}}catch(e){return{valid:!1,error:e instanceof Error?e.message:"Invalid XML"}}}function hj(t){try{const n=new DOMParser().parseFromString(t,"application/xml");if(n.querySelector("parsererror"))return t;const s=new XMLSerializer().serializeToString(n);let a="",l=0;const u=s.replace(/></g,`>
<`).split(`
`);for(const f of u){const d=f.trim();d&&(d.startsWith("</")&&(l=Math.max(0,l-1)),a+="  ".repeat(l)+d+`
`,d.startsWith("<")&&!d.startsWith("</")&&!d.startsWith("<?")&&!d.endsWith("/>")&&l++)}return a.trim()}catch{return t}}function pj({value:t,onChange:e,variables:n,onVariablesChange:r,placeholder:s}){const a=K.useRef(null),l=K.useRef(null),{handleInput:u,handlePaste:f,handleKeyDown:d,insertVariable:m,showTypeMenu:p,setShowTypeMenu:y,typeMenuPosition:g,buildDOM:v}=$k({editorRef:a,value:t,onChange:e,variables:n,onVariablesChange:r,indentTriggers:[">","{","["]}),[x,E]=K.useState(null),[S,T]=K.useState(""),A=K.useRef(!1),j=K.useRef(null),D=K.useMemo(()=>{if(!t.trim())return{valid:!0,empty:!0};let X=t;return X=X.replace(/\{\{[^{}]+\}\}/g,"PLACEHOLDER"),{...dj(X),empty:!1}},[t]),[I,P]=K.useState(!1),q=K.useMemo(()=>xf(t,n,{missingDataPlaceholder:"[no data]"}),[t,n]);K.useEffect(()=>(j.current&&(clearTimeout(j.current),j.current=null),D.valid&&!D.empty&&A.current&&(j.current=setTimeout(()=>{const X=new Map;let V=t,$=0;V=V.replace(/\{\{[^{}]+\}\}/g,oe=>{const M=`__VAR_${$++}__`;return X.set(M,oe),M});let G=hj(V);X.forEach((oe,M)=>{G=G.replace(M,oe)}),G!==t&&e(G)},500)),A.current=!D.valid,()=>{j.current&&clearTimeout(j.current)}),[D.valid,D.empty,t,e]),K.useEffect(()=>{I||v()},[I,v]);const H=K.useCallback((X,V)=>{const $=document.createElement("input");$.type="file",$.onchange=G=>{const oe=G.target.files?.[0];if(!oe)return;const M=new FileReader;M.onload=()=>{const C=M.result.split(",")[1],N=n.find(U=>U.id===V);r(N?n.map(U=>U.id===N.id?{...U,data:C,mimeType:oe.type,name:oe.name}:U):[...n,{id:V,type:X,name:oe.name,data:C,mimeType:oe.type}])},M.readAsDataURL(oe)},$.click()},[n,r]),z=K.useCallback(X=>{const $=X.target.closest(".variable-chip");if($){const G=$.dataset.variableType,oe=$.dataset.variableId;if(G==="file_base64"||G==="file_dataurl")H(G,oe),X.preventDefault(),X.stopPropagation();else if(G==="base64"){const M=$.getBoundingClientRect(),C=n.find(N=>N.id===oe);T(C?.data||""),E({variableKey:`${G}:${oe}`,rect:M}),X.preventDefault(),X.stopPropagation()}}else E(null)},[n,H]),Q=K.useCallback(X=>{const V=m(X);V&&(X==="file_base64"||X==="file_dataurl")&&setTimeout(()=>H(X,V),0)},[m,H]),re=K.useCallback(()=>{if(!x)return;const[X,V]=x.variableKey.split(":"),$=n.find(G=>G.id===V);r($?n.map(G=>G.id===$.id?{...G,data:S}:G):[...n,{id:V,type:X,name:X,data:S}]),E(null),a.current?.focus()},[x,S,n,r]);K.useEffect(()=>{const X=$=>{$.key==="Escape"&&(y(!1),E(null))},V=$=>{l.current&&!l.current.contains($.target)&&(y(!1),E(null))};return document.addEventListener("keydown",X),document.addEventListener("mousedown",V),()=>{document.removeEventListener("keydown",X),document.removeEventListener("mousedown",V)}},[y]);const pe=K.useMemo(()=>{if(!x||!l.current)return{top:0,left:0};const X=l.current.getBoundingClientRect();return{top:x.rect.bottom-X.top+4,left:Math.max(0,x.rect.left-X.left)}},[x]);return w.jsxs("div",{ref:l,className:"flex flex-col h-full min-h-50 max-h-[60vh] relative overflow-hidden",children:[I?w.jsx("pre",{className:"flex-1 min-h-0 p-3 font-mono text-sm text-zinc-100 overflow-y-auto whitespace-pre-wrap wrap-break-word",children:q}):w.jsxs("div",{className:"flex-1 min-h-0 relative",children:[w.jsx("div",{ref:a,contentEditable:!0,suppressContentEditableWarning:!0,onInput:u,onPaste:f,onKeyDown:d,onClick:z,className:"h-full p-3 font-mono text-sm text-zinc-100 outline-none overflow-y-auto whitespace-pre-wrap wrap-break-word"}),!t&&s&&w.jsx("div",{className:"absolute top-3 left-3 font-mono text-sm text-zinc-500 pointer-events-none whitespace-pre-wrap",children:s})]}),w.jsxs("div",{className:"flex items-center justify-end gap-2 px-3 py-1.5 text-xs shrink-0",children:[w.jsx("button",{onClick:()=>P(!I),className:`transition-colors flex items-center gap-1 ${I?"text-blue-400 hover:text-blue-300":"text-zinc-500 hover:text-zinc-300"}`,title:I?"Show editor":"Show resolved XML",children:w.jsx(Lk,{className:"w-3.5 h-3.5"})}),D.valid?w.jsx("span",{className:"text-emerald-500",children:"Valid XML"}):w.jsx("span",{className:"text-red-400",title:D.error,children:"Invalid XML"})]}),p&&w.jsx("div",{className:"fixed z-50 w-56 bg-zinc-800 border border-zinc-600 rounded-lg shadow-xl py-1",style:{top:g.top,left:g.left},children:fj.map(X=>w.jsxs("button",{onClick:()=>Q(X.type),className:"w-full flex items-center gap-2 px-3 py-2 text-left hover:bg-zinc-700 transition-colors",children:[w.jsx("span",{className:"text-zinc-400",children:X.icon}),w.jsxs("div",{className:"flex-1 min-w-0",children:[w.jsx("div",{className:"text-sm text-zinc-200",children:X.label}),w.jsx("div",{className:"text-xs text-zinc-500",children:X.description})]})]},X.type))}),x&&(()=>{const[X]=x.variableKey.split(":");return w.jsx("div",{className:"absolute z-50 bg-zinc-800/95 border border-zinc-700/50 rounded shadow-lg p-1.5 w-44",style:pe,children:X==="base64"?w.jsxs("div",{className:"flex gap-1",children:[w.jsx("input",{type:"text",value:S,onChange:V=>T(V.target.value),onKeyDown:V=>V.key==="Enter"&&re(),placeholder:"Text to encode...",className:"flex-1 min-w-0 px-1.5 py-0.5 text-xs bg-transparent text-zinc-200 rounded border-none focus:outline-none placeholder:text-zinc-500",autoFocus:!0}),w.jsx("button",{onClick:re,className:"p-1 text-zinc-400 hover:text-zinc-200 transition-colors",children:w.jsx(Mk,{className:"w-3 h-3"})})]}):null})})()]})}function mj(t){const e=qe.c(9),{value:n,onChange:r,placeholder:s}=t,a=K.useRef(null);let l;e[0]===Symbol.for("react.memo_cache_sentinel")?(l=()=>{const m=a.current;if(!m)return;m.style.height="auto";const p=Math.min(m.scrollHeight,160);m.style.height=`${p}px`},e[0]=l):l=e[0];let u;e[1]!==n?(u=[n],e[1]=n,e[2]=u):u=e[2],K.useEffect(l,u);let f;e[3]!==r?(f=m=>r(m.target.value),e[3]=r,e[4]=f):f=e[4];let d;return e[5]!==s||e[6]!==f||e[7]!==n?(d=w.jsx("textarea",{ref:a,value:n,onChange:f,placeholder:s,spellCheck:!1,rows:3,className:"w-full font-mono text-xs text-neutral-800 dark:text-neutral-100 bg-transparent focus:outline-none placeholder-neutral-400 dark:placeholder-neutral-600 resize-none overflow-auto"}),e[5]=s,e[6]=f,e[7]=n,e[8]=d):d=e[8],d}function Uw(){return Math.random().toString(36).substring(2,9)}function Cl(t){const e=qe.c(32),{items:n,onChange:r,keyPlaceholder:s,valuePlaceholder:a,keySuggestions:l}=t,u=s===void 0?"Key":s,f=a===void 0?"Value":a;let d;e[0]!==l?(d=l===void 0?[]:l,e[0]=l,e[1]=d):d=e[1];const m=d,[p,y]=K.useState(null),[g,v]=K.useState("");let x;e[2]!==n||e[3]!==r?(x=(P,q,H)=>{const z=n.map(re=>re.id===P?{...re,[q]:H}:re),Q=z[z.length-1];Q&&(Q.key||Q.value)&&z.push({id:Uw(),enabled:!0,key:"",value:""}),r(z)},e[2]=n,e[3]=r,e[4]=x):x=e[4];const E=x;let S;e[5]!==n||e[6]!==r?(S=P=>{if(n.length===1){r([{id:Uw(),enabled:!0,key:"",value:""}]);return}r(n.filter(q=>q.id!==P))},e[5]=n,e[6]=r,e[7]=S):S=e[7];const T=S;let A;e[8]!==n||e[9]!==m?(A=P=>{const q=n.map(gj);return m.filter(H=>H.toLowerCase().includes(P.toLowerCase())&&!q.includes(H.toLowerCase()))},e[8]=n,e[9]=m,e[10]=A):A=e[10];const j=A;let D;if(e[11]!==p||e[12]!==g||e[13]!==j||e[14]!==n||e[15]!==u||e[16]!==m||e[17]!==T||e[18]!==E||e[19]!==f){let P;e[21]!==p||e[22]!==g||e[23]!==j||e[24]!==u||e[25]!==m||e[26]!==T||e[27]!==E||e[28]!==f?(P=q=>w.jsxs("tr",{className:`border-b border-neutral-100 dark:border-white/5 last:border-0 ${q.enabled?"":"opacity-40"}`,children:[w.jsx("td",{className:"w-8 pl-2.5 py-1.5",children:w.jsx("button",{type:"button",onClick:()=>E(q.id,"enabled",!q.enabled),className:"p-0.5 rounded transition-colors",children:q.enabled?w.jsx(Ry,{className:"w-3.5 h-3.5 text-neutral-700 dark:text-neutral-300"}):w.jsx(jk,{className:"w-3.5 h-3.5 text-neutral-300 dark:text-neutral-600"})})}),w.jsx("td",{className:"px-1.5 py-1.5",children:w.jsxs("div",{className:"relative",children:[w.jsx("input",{type:"text",value:q.key,onChange:H=>{E(q.id,"key",H.target.value),v(H.target.value)},onFocus:()=>{y(q.id),v(q.key)},onBlur:()=>{setTimeout(()=>y(null),150)},placeholder:u,className:"w-full px-2 py-1 bg-white dark:bg-white/5 border border-neutral-300 dark:border-white/10 rounded text-xs text-neutral-800 dark:text-neutral-100 placeholder-neutral-400 dark:placeholder-neutral-500 focus:outline-none focus:border-neutral-400 dark:focus:border-white/20 transition-colors"}),m.length>0&&p===q.id&&(()=>{const H=j(g);return H.length===0?null:w.jsx("div",{className:"absolute z-50 left-0 right-0 top-full mt-1 bg-white dark:bg-[#1a1a1a] border border-neutral-200 dark:border-white/10 rounded-md shadow-lg max-h-48 overflow-y-auto",children:H.map(z=>w.jsx("button",{type:"button",onMouseDown:Q=>{Q.preventDefault(),E(q.id,"key",z),y(null)},className:"w-full px-2 py-1.5 text-left text-xs text-neutral-600 dark:text-neutral-300 hover:bg-neutral-100 dark:hover:bg-white/10 transition-colors",children:z},z))})})()]})}),w.jsx("td",{className:"px-1.5 py-1.5",children:w.jsx("input",{type:"text",value:q.value,onChange:H=>E(q.id,"value",H.target.value),placeholder:f,className:"w-full px-2 py-1 bg-white dark:bg-white/5 border border-neutral-300 dark:border-white/10 rounded text-xs text-neutral-800 dark:text-neutral-100 placeholder-neutral-400 dark:placeholder-neutral-500 focus:outline-none focus:border-neutral-400 dark:focus:border-white/20 transition-colors"})}),w.jsx("td",{className:"w-8 pr-1.5 py-1.5",children:w.jsx("button",{type:"button",onClick:()=>T(q.id),className:"p-1 text-neutral-400 dark:text-neutral-500 hover:text-rose-500 dark:hover:text-rose-400 hover:bg-neutral-100 dark:hover:bg-white/5 rounded transition-colors",children:w.jsx(tc,{className:"w-3.5 h-3.5"})})})]},q.id),e[21]=p,e[22]=g,e[23]=j,e[24]=u,e[25]=m,e[26]=T,e[27]=E,e[28]=f,e[29]=P):P=e[29],D=n.map(P),e[11]=p,e[12]=g,e[13]=j,e[14]=n,e[15]=u,e[16]=m,e[17]=T,e[18]=E,e[19]=f,e[20]=D}else D=e[20];let I;return e[30]!==D?(I=w.jsx("div",{children:w.jsx("table",{className:"w-full",children:w.jsx("tbody",{children:D})})}),e[30]=D,e[31]=I):I=e[31],I}function gj(t){return t.key.toLowerCase()}function yj(){return Math.random().toString(36).substring(2,9)}function qw(){return{id:yj(),enabled:!0,key:"",type:"text",value:"",file:null,fileName:""}}function bj(t){const e=qe.c(21),{items:n,onChange:r,keyPlaceholder:s,valuePlaceholder:a}=t,l=s===void 0?"Field":s,u=a===void 0?"Value":a;let f;e[0]===Symbol.for("react.memo_cache_sentinel")?(f={},e[0]=f):f=e[0];const d=K.useRef(f);let m;e[1]!==n||e[2]!==r?(m=(D,I)=>{const P=n.map(H=>H.id===D?{...H,...I}:H),q=P[P.length-1];q&&(q.key||q.value||q.file)&&P.push(qw()),r(P)},e[1]=n,e[2]=r,e[3]=m):m=e[3];const p=m;let y;e[4]!==n||e[5]!==r?(y=D=>{if(n.length===1){r([qw()]);return}r(n.filter(I=>I.id!==D))},e[4]=n,e[5]=r,e[6]=y):y=e[6];const g=y;let v;e[7]!==p?(v=(D,I)=>{const P=I.target.files?.[0]??null;I.target.value="",P&&p(D,{type:"file",file:P,fileName:P.name,value:""})},e[7]=p,e[8]=v):v=e[8];const x=v;let E;e[9]!==p?(E=D=>{p(D,{type:"text",file:null,fileName:""})},e[9]=p,e[10]=E):E=e[10];const S=E,T=_j;let A;e[11]!==S||e[12]!==x||e[13]!==n||e[14]!==l||e[15]!==g||e[16]!==p||e[17]!==u?(A=n.map(D=>w.jsxs("tr",{className:`border-b border-neutral-100 dark:border-white/5 last:border-0 ${D.enabled?"":"opacity-40"}`,children:[w.jsx("td",{className:"w-8 pl-2.5 py-1.5",children:w.jsx("button",{type:"button",onClick:()=>p(D.id,{enabled:!D.enabled}),className:"p-0.5 rounded transition-colors",children:D.enabled?w.jsx(Ry,{className:"w-3.5 h-3.5 text-neutral-700 dark:text-neutral-300"}):w.jsx(jk,{className:"w-3.5 h-3.5 text-neutral-300 dark:text-neutral-600"})})}),w.jsx("td",{className:"px-1.5 py-1.5 w-36",children:w.jsx("input",{type:"text",value:D.key,onChange:I=>p(D.id,{key:I.target.value}),placeholder:l,className:"w-full px-2 py-1 bg-white dark:bg-white/5 border border-neutral-300 dark:border-white/10 rounded text-xs text-neutral-800 dark:text-neutral-100 placeholder-neutral-400 dark:placeholder-neutral-500 focus:outline-none focus:border-neutral-400 dark:focus:border-white/20 transition-colors"})}),w.jsxs("td",{className:"px-1.5 py-1.5",children:[w.jsx("input",{type:"file",ref:I=>{d.current[D.id]=I},onChange:I=>x(D.id,I),className:"hidden"}),D.type==="file"&&D.file?w.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 bg-neutral-100 dark:bg-white/10 rounded text-xs text-neutral-600 dark:text-neutral-300",children:[w.jsx(Pw,{className:"w-3 h-3 shrink-0"}),w.jsx("span",{className:"truncate max-w-xs",children:D.fileName}),w.jsxs("span",{className:"text-neutral-400 shrink-0",children:["(",T(D.file.size),")"]}),w.jsx("button",{type:"button",onClick:()=>S(D.id),className:"p-0.5 ml-1 text-neutral-400 hover:text-neutral-600 dark:hover:text-neutral-200 transition-colors shrink-0",children:w.jsx(Ul,{className:"w-3 h-3"})})]}):w.jsx("input",{type:"text",value:D.value,onChange:I=>p(D.id,{value:I.target.value}),placeholder:u,className:"w-full px-2 py-1 bg-white dark:bg-white/5 border border-neutral-300 dark:border-white/10 rounded text-xs text-neutral-800 dark:text-neutral-100 placeholder-neutral-400 dark:placeholder-neutral-500 focus:outline-none focus:border-neutral-400 dark:focus:border-white/20 transition-colors"})]}),w.jsx("td",{className:"w-16 pr-1.5 py-1.5",children:w.jsxs("div",{className:"flex items-center gap-0.5",children:[w.jsx("button",{type:"button",onClick:()=>d.current[D.id]?.click(),className:`p-1 rounded transition-colors ${D.type==="file"?"text-blue-500 dark:text-blue-400 bg-blue-50 dark:bg-blue-500/10":"text-neutral-400 dark:text-neutral-500 hover:text-neutral-600 dark:hover:text-neutral-300 hover:bg-neutral-100 dark:hover:bg-white/5"}`,title:"Attach file",children:w.jsx(Pw,{className:"w-3.5 h-3.5"})}),w.jsx("button",{type:"button",onClick:()=>g(D.id),className:"p-1 text-neutral-400 dark:text-neutral-500 hover:text-rose-500 dark:hover:text-rose-400 hover:bg-neutral-100 dark:hover:bg-white/5 rounded transition-colors",children:w.jsx(tc,{className:"w-3.5 h-3.5"})})]})})]},D.id)),e[11]=S,e[12]=x,e[13]=n,e[14]=l,e[15]=g,e[16]=p,e[17]=u,e[18]=A):A=e[18];let j;return e[19]!==A?(j=w.jsx("div",{children:w.jsx("table",{className:"w-full",children:w.jsx("tbody",{children:A})})}),e[19]=A,e[20]=j):j=e[20],j}function _j(t){return t<1024?`${t} B`:t<1048576?`${(t/1024).toFixed(1)} KB`:`${(t/1048576).toFixed(1)} MB`}function vj(t){const e=qe.c(12),{file:n,fileName:r,onFileChange:s}=t,a=K.useRef(null);let l;e[0]!==s?(l=v=>{s(v,v?.name??"")},e[0]=s,e[1]=l):l=e[1];const u=l,f=wj,d=xj;let m;e[2]!==u?(m=w.jsx("input",{type:"file",ref:a,onChange:v=>u(v.target.files?.[0]??null),className:"hidden"}),e[2]=u,e[3]=m):m=e[3];let p;e[4]!==n||e[5]!==r||e[6]!==s?(p=n?w.jsxs("div",{className:"flex items-center gap-3 p-3 bg-neutral-100 dark:bg-white/5 rounded-lg border border-neutral-200 dark:border-white/10",children:[w.jsx("div",{className:"flex items-center justify-center w-10 h-10 bg-white dark:bg-white/10 rounded-lg text-xl",children:d(n.type)}),w.jsxs("div",{className:"flex-1 min-w-0",children:[w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx(eo,{className:"w-4 h-4 text-neutral-500 dark:text-neutral-400 shrink-0"}),w.jsx("p",{className:"text-sm font-medium text-neutral-800 dark:text-neutral-100 truncate",children:r})]}),w.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[w.jsx("span",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:f(n.size)}),w.jsx("span",{className:"text-xs text-neutral-400 dark:text-neutral-500",children:""}),w.jsx("span",{className:"text-xs text-neutral-500 dark:text-neutral-400 truncate",children:n.type||"application/octet-stream"})]})]}),w.jsxs("div",{className:"flex items-center gap-1",children:[w.jsx("button",{type:"button",onClick:()=>a.current?.click(),className:"px-2 py-1 text-xs text-neutral-600 dark:text-neutral-300 hover:bg-neutral-200 dark:hover:bg-white/10 rounded transition-colors",children:"Change"}),w.jsx("button",{type:"button",onClick:()=>s(null,""),className:"p-1 text-neutral-400 dark:text-neutral-500 hover:text-rose-500 dark:hover:text-rose-400 hover:bg-neutral-200 dark:hover:bg-white/10 rounded transition-colors",children:w.jsx(Ul,{className:"w-4 h-4"})})]})]}):w.jsxs("div",{onClick:()=>a.current?.click(),className:"flex flex-col items-center justify-center p-8 border-2 border-dashed border-neutral-300 dark:border-white/20 rounded-lg cursor-pointer hover:border-neutral-400 dark:hover:border-white/30 hover:bg-neutral-50 dark:hover:bg-white/5 transition-colors",children:[w.jsx(yg,{className:"w-8 h-8 text-neutral-400 dark:text-neutral-500 mb-2"}),w.jsx("p",{className:"text-sm text-neutral-600 dark:text-neutral-300 mb-1",children:"Click to select a file"}),w.jsx("p",{className:"text-xs text-neutral-400 dark:text-neutral-500",children:"or drag and drop"})]}),e[4]=n,e[5]=r,e[6]=s,e[7]=p):p=e[7];let y;e[8]===Symbol.for("react.memo_cache_sentinel")?(y=w.jsx("p",{className:"text-xs text-neutral-400 dark:text-neutral-500",children:"The file will be sent as the raw request body. Content-Type will be set automatically based on the file type."}),e[8]=y):y=e[8];let g;return e[9]!==m||e[10]!==p?(g=w.jsxs("div",{className:"space-y-3",children:[m,p,y]}),e[9]=m,e[10]=p,e[11]=g):g=e[11],g}function xj(t){return t.startsWith("image/")?"":t.startsWith("video/")?"":t.startsWith("audio/")?"":t.includes("pdf")?"":t.includes("zip")||t.includes("tar")||t.includes("gzip")?"":t.includes("json")||t.includes("xml")||t.includes("text")?"":""}function wj(t){return t<1024?`${t} B`:t<1048576?`${(t/1024).toFixed(1)} KB`:t<1073741824?`${(t/1048576).toFixed(1)} MB`:`${(t/1073741824).toFixed(2)} GB`}const Sj=[{value:"none",label:"None"},{value:"json",label:"JSON"},{value:"xml",label:"XML"},{value:"form-urlencoded",label:"Form"},{value:"form-data",label:"Form Data"},{value:"binary",label:"Binary"},{value:"raw",label:"Raw"}];function Uk(){return Math.random().toString(36).substring(2,9)}function kj(){return{id:Uk(),enabled:!0,key:"",type:"text",value:"",file:null,fileName:""}}const Ej=["Accept","Accept-Charset","Accept-Encoding","Accept-Language","Authorization","Cache-Control","Connection","Content-Disposition","Content-Encoding","Content-Length","Content-Type","Cookie","Date","ETag","Expect","Forwarded","From","Host","If-Match","If-Modified-Since","If-None-Match","If-Range","If-Unmodified-Since","Max-Forwards","Origin","Pragma","Proxy-Authorization","Range","Referer","TE","Trailer","Transfer-Encoding","Upgrade","User-Agent","Via","Warning","X-Api-Key","X-Correlation-ID","X-Forwarded-For","X-Forwarded-Host","X-Forwarded-Proto","X-Request-ID","X-Requested-With"];function Cj(){const t=qe.c(54),[e,n]=K.useState("body"),{request:r,setHeaders:s,setQuery:a,setBody:l,setVariables:u}=dn();let f;t[0]!==r?.http?.headers?(f=r?.http?.headers??[],t[0]=r?.http?.headers,t[1]=f):f=t[1];const d=f;let m;t[2]!==r?.http?.query?(m=r?.http?.query??[],t[2]=r?.http?.query,t[3]=m):m=t[3];const p=m;let y;t[4]!==r?.http?.body?(y=r?.http?.body??{type:"none"},t[4]=r?.http?.body,t[5]=y):y=t[5];const g=y;let v;t[6]!==r?.variables?(v=r?.variables??[],t[6]=r?.variables,t[7]=v):v=t[7];const x=v;let E;t[8]!==g||t[9]!==l?(E=G=>{e:switch(G){case"none":{l({type:"none"});break e}case"json":{l({type:"json",content:g.type==="json"?g.content:""});break e}case"xml":{l({type:"xml",content:g.type==="xml"?g.content:""});break e}case"raw":{l({type:"raw",content:g.type==="raw"?g.content:""});break e}case"form-urlencoded":{l({type:"form-urlencoded",data:g.type==="form-urlencoded"?g.data:[{id:Uk(),enabled:!0,key:"",value:""}]});break e}case"form-data":{l({type:"form-data",data:g.type==="form-data"?g.data:[kj()]});break e}case"binary":l({type:"binary",file:g.type==="binary"?g.file:null,fileName:g.type==="binary"?g.fileName:""})}},t[8]=g,t[9]=l,t[10]=E):E=t[10];const S=E;let T;t[11]!==p?(T=p.filter(Rj),t[11]=p,t[12]=T):T=t[12];let A;t[13]!==T.length?(A={id:"params",label:"Params",count:T.length},t[13]=T.length,t[14]=A):A=t[14];let j;t[15]!==d?(j=d.filter(Aj),t[15]=d,t[16]=j):j=t[16];let D;t[17]!==j.length?(D={id:"headers",label:"Headers",count:j.length},t[17]=j.length,t[18]=D):D=t[18];let I;t[19]===Symbol.for("react.memo_cache_sentinel")?(I={id:"body",label:"Body"},t[19]=I):I=t[19];let P;t[20]!==A||t[21]!==D?(P=[A,D,I],t[20]=A,t[21]=D,t[22]=P):P=t[22];const q=P;let H;t[23]!==e||t[24]!==q?(H=w.jsx("div",{role:"tablist",className:"inline-flex gap-1",children:q.map(G=>w.jsxs("button",{role:"tab",onClick:()=>n(G.id),className:`px-2 py-1 text-[11px] font-medium rounded-md transition-all ${e===G.id?"bg-white dark:bg-white/10 text-neutral-800 dark:text-neutral-100 shadow-sm":"text-neutral-500 dark:text-neutral-400 hover:text-neutral-700 dark:hover:text-neutral-200 hover:bg-neutral-100 dark:hover:bg-white/5"}`,children:[G.label,G.count!==void 0&&G.count>0&&w.jsx("span",{className:"ml-1.5 px-1.5 py-0.5 text-[9px] bg-neutral-200 dark:bg-white/10 text-neutral-600 dark:text-neutral-300 rounded-full",children:G.count})]},G.id))}),t[23]=e,t[24]=q,t[25]=H):H=t[25];let z;t[26]!==e||t[27]!==g||t[28]!==S?(z=e==="body"&&w.jsx("select",{value:g.type,onChange:G=>S(G.target.value),className:"h-6 px-2 text-[11px] font-medium bg-white dark:bg-white/10 text-neutral-800 dark:text-neutral-100 rounded-md shadow-sm border-0 focus:outline-none focus:ring-2 focus:ring-neutral-300 dark:focus:ring-white/20 cursor-pointer transition-all min-w-30",children:Sj.map(Tj)}),t[26]=e,t[27]=g,t[28]=S,t[29]=z):z=t[29];let Q;t[30]!==H||t[31]!==z?(Q=w.jsxs("div",{className:"flex items-center gap-2",children:[H,z]}),t[30]=H,t[31]=z,t[32]=Q):Q=t[32];let re;t[33]!==e||t[34]!==p||t[35]!==a?(re=e==="params"&&w.jsx(Cl,{items:p,onChange:a,keyPlaceholder:"Parameter",valuePlaceholder:"Value"}),t[33]=e,t[34]=p,t[35]=a,t[36]=re):re=t[36];let pe;t[37]!==e||t[38]!==d||t[39]!==s?(pe=e==="headers"&&w.jsx(Cl,{items:d,onChange:s,keyPlaceholder:"Header",valuePlaceholder:"Value",keySuggestions:Ej}),t[37]=e,t[38]=d,t[39]=s,t[40]=pe):pe=t[40];let X;t[41]!==e||t[42]!==g||t[43]!==l||t[44]!==u||t[45]!==x?(X=e==="body"&&w.jsxs("div",{className:"space-y-3",children:[g.type==="json"&&w.jsx(Ny,{value:g.content,onChange:G=>l({...g,content:G}),variables:x,onVariablesChange:u,placeholder:`{
  "key": "value"
}`}),g.type==="xml"&&w.jsx(pj,{value:g.content,onChange:G=>l({...g,content:G}),variables:x,onVariablesChange:u,placeholder:"<xml></xml>"}),g.type==="raw"&&w.jsx(mj,{value:g.content,onChange:G=>l({...g,content:G}),language:"text",placeholder:"Plain text payload"}),g.type==="form-urlencoded"&&w.jsx(Cl,{items:g.data,onChange:G=>l({...g,data:G}),keyPlaceholder:"Key",valuePlaceholder:"Value"}),g.type==="form-data"&&w.jsx(bj,{items:g.data,onChange:G=>l({...g,data:G})}),g.type==="binary"&&w.jsx(vj,{file:g.file,fileName:g.fileName,onFileChange:(G,oe)=>l({...g,file:G,fileName:oe})}),g.type==="none"&&w.jsx("div",{className:"py-8 text-center text-sm text-neutral-400 dark:text-neutral-500",children:"No request body"})]}),t[41]=e,t[42]=g,t[43]=l,t[44]=u,t[45]=x,t[46]=X):X=t[46];let V;t[47]!==re||t[48]!==pe||t[49]!==X?(V=w.jsxs("div",{children:[re,pe,X]}),t[47]=re,t[48]=pe,t[49]=X,t[50]=V):V=t[50];let $;return t[51]!==Q||t[52]!==V?($=w.jsxs("div",{className:"space-y-3",children:[Q,V]}),t[51]=Q,t[52]=V,t[53]=$):$=t[53],$}function Tj(t){return w.jsx("option",{value:t.value,className:"bg-white dark:bg-[#1a1a1a]",children:t.label},t.value)}function Aj(t){return t.key}function Rj(t){return t.key}const Oj="modulepreload",Nj=function(t){return"/"+t},Fw={},L=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){let d=function(m){return Promise.all(m.map(p=>Promise.resolve(p).then(y=>({status:"fulfilled",value:y}),y=>({status:"rejected",reason:y}))))};var l=d;document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),f=u?.nonce||u?.getAttribute("nonce");s=d(n.map(m=>{if(m=Nj(m),m in Fw)return;Fw[m]=!0;const p=m.endsWith(".css"),y=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${y}`))return;const g=document.createElement("link");if(g.rel=p?"stylesheet":Oj,p||(g.as="script"),g.crossOrigin="",g.href=m,f&&g.setAttribute("nonce",f),document.head.appendChild(g),p)return new Promise((v,x)=>{g.addEventListener("load",v),g.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${m}`)))})}))}function a(u){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=u,window.dispatchEvent(f),!f.defaultPrevented)throw u}return s.then(u=>{for(const f of u||[])f.status==="rejected"&&a(f.reason);return e().catch(a)})};let Lt=class extends Error{constructor(e){super(e),this.name="ShikiError"}};function Ij(t){return Iy(t)}function Iy(t){return Array.isArray(t)?Mj(t):t instanceof RegExp?t:typeof t=="object"?Dj(t):t}function Mj(t){let e=[];for(let n=0,r=t.length;n<r;n++)e[n]=Iy(t[n]);return e}function Dj(t){let e={};for(let n in t)e[n]=Iy(t[n]);return e}function qk(t,...e){return e.forEach(n=>{for(let r in n)t[r]=n[r]}),t}function Fk(t){const e=~t.lastIndexOf("/")||~t.lastIndexOf("\\");return e===0?t:~e===t.length-1?Fk(t.substring(0,t.length-1)):t.substr(~e+1)}var om=/\$(\d+)|\${(\d+):\/(downcase|upcase)}/g,Ru=class{static hasCaptures(t){return t===null?!1:(om.lastIndex=0,om.test(t))}static replaceCaptures(t,e,n){return t.replace(om,(r,s,a,l)=>{let u=n[parseInt(s||a,10)];if(u){let f=e.substring(u.start,u.end);for(;f[0]===".";)f=f.substring(1);switch(l){case"downcase":return f.toLowerCase();case"upcase":return f.toUpperCase();default:return f}}else return r})}};function Vk(t,e){return t<e?-1:t>e?1:0}function Hk(t,e){if(t===null&&e===null)return 0;if(!t)return-1;if(!e)return 1;let n=t.length,r=e.length;if(n===r){for(let s=0;s<n;s++){let a=Vk(t[s],e[s]);if(a!==0)return a}return 0}return n-r}function Vw(t){return!!(/^#[0-9a-f]{6}$/i.test(t)||/^#[0-9a-f]{8}$/i.test(t)||/^#[0-9a-f]{3}$/i.test(t)||/^#[0-9a-f]{4}$/i.test(t))}function Gk(t){return t.replace(/[\-\\\{\}\*\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&")}var Kk=class{constructor(t){this.fn=t}cache=new Map;get(t){if(this.cache.has(t))return this.cache.get(t);const e=this.fn(t);return this.cache.set(t,e),e}},Cf=class{constructor(t,e,n){this._colorMap=t,this._defaults=e,this._root=n}static createFromRawTheme(t,e){return this.createFromParsedTheme(zj(t),e)}static createFromParsedTheme(t,e){return Bj(t,e)}_cachedMatchRoot=new Kk(t=>this._root.match(t));getColorMap(){return this._colorMap.getColorMap()}getDefaults(){return this._defaults}match(t){if(t===null)return this._defaults;const e=t.scopeName,r=this._cachedMatchRoot.get(e).find(s=>jj(t.parent,s.parentScopes));return r?new Zk(r.fontStyle,r.foreground,r.background):null}},lm=class Xu{constructor(e,n){this.parent=e,this.scopeName=n}static push(e,n){for(const r of n)e=new Xu(e,r);return e}static from(...e){let n=null;for(let r=0;r<e.length;r++)n=new Xu(n,e[r]);return n}push(e){return new Xu(this,e)}getSegments(){let e=this;const n=[];for(;e;)n.push(e.scopeName),e=e.parent;return n.reverse(),n}toString(){return this.getSegments().join(" ")}extends(e){return this===e?!0:this.parent===null?!1:this.parent.extends(e)}getExtensionIfDefined(e){const n=[];let r=this;for(;r&&r!==e;)n.push(r.scopeName),r=r.parent;return r===e?n.reverse():void 0}};function jj(t,e){if(e.length===0)return!0;for(let n=0;n<e.length;n++){let r=e[n],s=!1;if(r===">"){if(n===e.length-1)return!1;r=e[++n],s=!0}for(;t&&!Lj(t.scopeName,r);){if(s)return!1;t=t.parent}if(!t)return!1;t=t.parent}return!0}function Lj(t,e){return e===t||t.startsWith(e)&&t[e.length]==="."}var Zk=class{constructor(t,e,n){this.fontStyle=t,this.foregroundId=e,this.backgroundId=n}};function zj(t){if(!t)return[];if(!t.settings||!Array.isArray(t.settings))return[];let e=t.settings,n=[],r=0;for(let s=0,a=e.length;s<a;s++){let l=e[s];if(!l.settings)continue;let u;if(typeof l.scope=="string"){let p=l.scope;p=p.replace(/^[,]+/,""),p=p.replace(/[,]+$/,""),u=p.split(",")}else Array.isArray(l.scope)?u=l.scope:u=[""];let f=-1;if(typeof l.settings.fontStyle=="string"){f=0;let p=l.settings.fontStyle.split(" ");for(let y=0,g=p.length;y<g;y++)switch(p[y]){case"italic":f=f|1;break;case"bold":f=f|2;break;case"underline":f=f|4;break;case"strikethrough":f=f|8;break}}let d=null;typeof l.settings.foreground=="string"&&Vw(l.settings.foreground)&&(d=l.settings.foreground);let m=null;typeof l.settings.background=="string"&&Vw(l.settings.background)&&(m=l.settings.background);for(let p=0,y=u.length;p<y;p++){let v=u[p].trim().split(" "),x=v[v.length-1],E=null;v.length>1&&(E=v.slice(0,v.length-1),E.reverse()),n[r++]=new Pj(x,E,s,f,d,m)}}return n}var Pj=class{constructor(t,e,n,r,s,a){this.scope=t,this.parentScopes=e,this.index=n,this.fontStyle=r,this.foreground=s,this.background=a}},_n=(t=>(t[t.NotSet=-1]="NotSet",t[t.None=0]="None",t[t.Italic=1]="Italic",t[t.Bold=2]="Bold",t[t.Underline=4]="Underline",t[t.Strikethrough=8]="Strikethrough",t))(_n||{});function Bj(t,e){t.sort((f,d)=>{let m=Vk(f.scope,d.scope);return m!==0||(m=Hk(f.parentScopes,d.parentScopes),m!==0)?m:f.index-d.index});let n=0,r="#000000",s="#ffffff";for(;t.length>=1&&t[0].scope==="";){let f=t.shift();f.fontStyle!==-1&&(n=f.fontStyle),f.foreground!==null&&(r=f.foreground),f.background!==null&&(s=f.background)}let a=new $j(e),l=new Zk(n,a.getId(r),a.getId(s)),u=new qj(new bg(0,null,-1,0,0),[]);for(let f=0,d=t.length;f<d;f++){let m=t[f];u.insert(0,m.scope,m.parentScopes,m.fontStyle,a.getId(m.foreground),a.getId(m.background))}return new Cf(a,l,u)}var $j=class{_isFrozen;_lastColorId;_id2color;_color2id;constructor(t){if(this._lastColorId=0,this._id2color=[],this._color2id=Object.create(null),Array.isArray(t)){this._isFrozen=!0;for(let e=0,n=t.length;e<n;e++)this._color2id[t[e]]=e,this._id2color[e]=t[e]}else this._isFrozen=!1}getId(t){if(t===null)return 0;t=t.toUpperCase();let e=this._color2id[t];if(e)return e;if(this._isFrozen)throw new Error(`Missing color in color map - ${t}`);return e=++this._lastColorId,this._color2id[t]=e,this._id2color[e]=t,e}getColorMap(){return this._id2color.slice(0)}},Uj=Object.freeze([]),bg=class Qk{scopeDepth;parentScopes;fontStyle;foreground;background;constructor(e,n,r,s,a){this.scopeDepth=e,this.parentScopes=n||Uj,this.fontStyle=r,this.foreground=s,this.background=a}clone(){return new Qk(this.scopeDepth,this.parentScopes,this.fontStyle,this.foreground,this.background)}static cloneArr(e){let n=[];for(let r=0,s=e.length;r<s;r++)n[r]=e[r].clone();return n}acceptOverwrite(e,n,r,s){this.scopeDepth>e?console.log("how did this happen?"):this.scopeDepth=e,n!==-1&&(this.fontStyle=n),r!==0&&(this.foreground=r),s!==0&&(this.background=s)}},qj=class _g{constructor(e,n=[],r={}){this._mainRule=e,this._children=r,this._rulesWithParentScopes=n}_rulesWithParentScopes;static _cmpBySpecificity(e,n){if(e.scopeDepth!==n.scopeDepth)return n.scopeDepth-e.scopeDepth;let r=0,s=0;for(;e.parentScopes[r]===">"&&r++,n.parentScopes[s]===">"&&s++,!(r>=e.parentScopes.length||s>=n.parentScopes.length);){const a=n.parentScopes[s].length-e.parentScopes[r].length;if(a!==0)return a;r++,s++}return n.parentScopes.length-e.parentScopes.length}match(e){if(e!==""){let r=e.indexOf("."),s,a;if(r===-1?(s=e,a=""):(s=e.substring(0,r),a=e.substring(r+1)),this._children.hasOwnProperty(s))return this._children[s].match(a)}const n=this._rulesWithParentScopes.concat(this._mainRule);return n.sort(_g._cmpBySpecificity),n}insert(e,n,r,s,a,l){if(n===""){this._doInsertHere(e,r,s,a,l);return}let u=n.indexOf("."),f,d;u===-1?(f=n,d=""):(f=n.substring(0,u),d=n.substring(u+1));let m;this._children.hasOwnProperty(f)?m=this._children[f]:(m=new _g(this._mainRule.clone(),bg.cloneArr(this._rulesWithParentScopes)),this._children[f]=m),m.insert(e+1,d,r,s,a,l)}_doInsertHere(e,n,r,s,a){if(n===null){this._mainRule.acceptOverwrite(e,r,s,a);return}for(let l=0,u=this._rulesWithParentScopes.length;l<u;l++){let f=this._rulesWithParentScopes[l];if(Hk(f.parentScopes,n)===0){f.acceptOverwrite(e,r,s,a);return}}r===-1&&(r=this._mainRule.fontStyle),s===0&&(s=this._mainRule.foreground),a===0&&(a=this._mainRule.background),this._rulesWithParentScopes.push(new bg(e,n,r,s,a))}},Qa=class yr{static toBinaryStr(e){return e.toString(2).padStart(32,"0")}static print(e){const n=yr.getLanguageId(e),r=yr.getTokenType(e),s=yr.getFontStyle(e),a=yr.getForeground(e),l=yr.getBackground(e);console.log({languageId:n,tokenType:r,fontStyle:s,foreground:a,background:l})}static getLanguageId(e){return(e&255)>>>0}static getTokenType(e){return(e&768)>>>8}static containsBalancedBrackets(e){return(e&1024)!==0}static getFontStyle(e){return(e&30720)>>>11}static getForeground(e){return(e&16744448)>>>15}static getBackground(e){return(e&4278190080)>>>24}static set(e,n,r,s,a,l,u){let f=yr.getLanguageId(e),d=yr.getTokenType(e),m=yr.containsBalancedBrackets(e)?1:0,p=yr.getFontStyle(e),y=yr.getForeground(e),g=yr.getBackground(e);return n!==0&&(f=n),r!==8&&(d=r),s!==null&&(m=s?1:0),a!==-1&&(p=a),l!==0&&(y=l),u!==0&&(g=u),(f<<0|d<<8|m<<10|p<<11|y<<15|g<<24)>>>0}};function Tf(t,e){const n=[],r=Fj(t);let s=r.next();for(;s!==null;){let f=0;if(s.length===2&&s.charAt(1)===":"){switch(s.charAt(0)){case"R":f=1;break;case"L":f=-1;break;default:console.log(`Unknown priority ${s} in scope selector`)}s=r.next()}let d=l();if(n.push({matcher:d,priority:f}),s!==",")break;s=r.next()}return n;function a(){if(s==="-"){s=r.next();const f=a();return d=>!!f&&!f(d)}if(s==="("){s=r.next();const f=u();return s===")"&&(s=r.next()),f}if(Hw(s)){const f=[];do f.push(s),s=r.next();while(Hw(s));return d=>e(f,d)}return null}function l(){const f=[];let d=a();for(;d;)f.push(d),d=a();return m=>f.every(p=>p(m))}function u(){const f=[];let d=l();for(;d&&(f.push(d),s==="|"||s===",");){do s=r.next();while(s==="|"||s===",");d=l()}return m=>f.some(p=>p(m))}}function Hw(t){return!!t&&!!t.match(/[\w\.:]+/)}function Fj(t){let e=/([LR]:|[\w\.:][\w\.:\-]*|[\,\|\-\(\)])/g,n=e.exec(t);return{next:()=>{if(!n)return null;const r=n[0];return n=e.exec(t),r}}}function Jk(t){typeof t.dispose=="function"&&t.dispose()}var ql=class{constructor(t){this.scopeName=t}toKey(){return this.scopeName}},Vj=class{constructor(t,e){this.scopeName=t,this.ruleName=e}toKey(){return`${this.scopeName}#${this.ruleName}`}},Hj=class{_references=[];_seenReferenceKeys=new Set;get references(){return this._references}visitedRule=new Set;add(t){const e=t.toKey();this._seenReferenceKeys.has(e)||(this._seenReferenceKeys.add(e),this._references.push(t))}},Gj=class{constructor(t,e){this.repo=t,this.initialScopeName=e,this.seenFullScopeRequests.add(this.initialScopeName),this.Q=[new ql(this.initialScopeName)]}seenFullScopeRequests=new Set;seenPartialScopeRequests=new Set;Q;processQueue(){const t=this.Q;this.Q=[];const e=new Hj;for(const n of t)Kj(n,this.initialScopeName,this.repo,e);for(const n of e.references)if(n instanceof ql){if(this.seenFullScopeRequests.has(n.scopeName))continue;this.seenFullScopeRequests.add(n.scopeName),this.Q.push(n)}else{if(this.seenFullScopeRequests.has(n.scopeName)||this.seenPartialScopeRequests.has(n.toKey()))continue;this.seenPartialScopeRequests.add(n.toKey()),this.Q.push(n)}}};function Kj(t,e,n,r){const s=n.lookup(t.scopeName);if(!s){if(t.scopeName===e)throw new Error(`No grammar provided for <${e}>`);return}const a=n.lookup(e);t instanceof ql?Wu({baseGrammar:a,selfGrammar:s},r):vg(t.ruleName,{baseGrammar:a,selfGrammar:s,repository:s.repository},r);const l=n.injections(t.scopeName);if(l)for(const u of l)r.add(new ql(u))}function vg(t,e,n){if(e.repository&&e.repository[t]){const r=e.repository[t];Af([r],e,n)}}function Wu(t,e){t.selfGrammar.patterns&&Array.isArray(t.selfGrammar.patterns)&&Af(t.selfGrammar.patterns,{...t,repository:t.selfGrammar.repository},e),t.selfGrammar.injections&&Af(Object.values(t.selfGrammar.injections),{...t,repository:t.selfGrammar.repository},e)}function Af(t,e,n){for(const r of t){if(n.visitedRule.has(r))continue;n.visitedRule.add(r);const s=r.repository?qk({},e.repository,r.repository):e.repository;Array.isArray(r.patterns)&&Af(r.patterns,{...e,repository:s},n);const a=r.include;if(!a)continue;const l=Yk(a);switch(l.kind){case 0:Wu({...e,selfGrammar:e.baseGrammar},n);break;case 1:Wu(e,n);break;case 2:vg(l.ruleName,{...e,repository:s},n);break;case 3:case 4:const u=l.scopeName===e.selfGrammar.scopeName?e.selfGrammar:l.scopeName===e.baseGrammar.scopeName?e.baseGrammar:void 0;if(u){const f={baseGrammar:e.baseGrammar,selfGrammar:u,repository:s};l.kind===4?vg(l.ruleName,f,n):Wu(f,n)}else l.kind===4?n.add(new Vj(l.scopeName,l.ruleName)):n.add(new ql(l.scopeName));break}}}var Zj=class{kind=0},Qj=class{kind=1},Jj=class{constructor(t){this.ruleName=t}kind=2},Yj=class{constructor(t){this.scopeName=t}kind=3},Xj=class{constructor(t,e){this.scopeName=t,this.ruleName=e}kind=4};function Yk(t){if(t==="$base")return new Zj;if(t==="$self")return new Qj;const e=t.indexOf("#");if(e===-1)return new Yj(t);if(e===0)return new Jj(t.substring(1));{const n=t.substring(0,e),r=t.substring(e+1);return new Xj(n,r)}}var Wj=/\\(\d+)/,Gw=/\\(\d+)/g,eL=-1,Xk=-2;var nc=class{$location;id;_nameIsCapturing;_name;_contentNameIsCapturing;_contentName;constructor(t,e,n,r){this.$location=t,this.id=e,this._name=n||null,this._nameIsCapturing=Ru.hasCaptures(this._name),this._contentName=r||null,this._contentNameIsCapturing=Ru.hasCaptures(this._contentName)}get debugName(){const t=this.$location?`${Fk(this.$location.filename)}:${this.$location.line}`:"unknown";return`${this.constructor.name}#${this.id} @ ${t}`}getName(t,e){return!this._nameIsCapturing||this._name===null||t===null||e===null?this._name:Ru.replaceCaptures(this._name,t,e)}getContentName(t,e){return!this._contentNameIsCapturing||this._contentName===null?this._contentName:Ru.replaceCaptures(this._contentName,t,e)}},tL=class extends nc{retokenizeCapturedWithRuleId;constructor(t,e,n,r,s){super(t,e,n,r),this.retokenizeCapturedWithRuleId=s}dispose(){}collectPatterns(t,e){throw new Error("Not supported!")}compile(t,e){throw new Error("Not supported!")}compileAG(t,e,n,r){throw new Error("Not supported!")}},nL=class extends nc{_match;captures;_cachedCompiledPatterns;constructor(t,e,n,r,s){super(t,e,n,null),this._match=new Fl(r,this.id),this.captures=s,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}get debugMatchRegExp(){return`${this._match.source}`}collectPatterns(t,e){e.push(this._match)}compile(t,e){return this._getCachedCompiledPatterns(t).compile(t)}compileAG(t,e,n,r){return this._getCachedCompiledPatterns(t).compileAG(t,n,r)}_getCachedCompiledPatterns(t){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new Vl,this.collectPatterns(t,this._cachedCompiledPatterns)),this._cachedCompiledPatterns}},Kw=class extends nc{hasMissingPatterns;patterns;_cachedCompiledPatterns;constructor(t,e,n,r,s){super(t,e,n,r),this.patterns=s.patterns,this.hasMissingPatterns=s.hasMissingPatterns,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}collectPatterns(t,e){for(const n of this.patterns)t.getRule(n).collectPatterns(t,e)}compile(t,e){return this._getCachedCompiledPatterns(t).compile(t)}compileAG(t,e,n,r){return this._getCachedCompiledPatterns(t).compileAG(t,n,r)}_getCachedCompiledPatterns(t){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new Vl,this.collectPatterns(t,this._cachedCompiledPatterns)),this._cachedCompiledPatterns}},xg=class extends nc{_begin;beginCaptures;_end;endHasBackReferences;endCaptures;applyEndPatternLast;hasMissingPatterns;patterns;_cachedCompiledPatterns;constructor(t,e,n,r,s,a,l,u,f,d){super(t,e,n,r),this._begin=new Fl(s,this.id),this.beginCaptures=a,this._end=new Fl(l||"",-1),this.endHasBackReferences=this._end.hasBackReferences,this.endCaptures=u,this.applyEndPatternLast=f||!1,this.patterns=d.patterns,this.hasMissingPatterns=d.hasMissingPatterns,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}get debugBeginRegExp(){return`${this._begin.source}`}get debugEndRegExp(){return`${this._end.source}`}getEndWithResolvedBackReferences(t,e){return this._end.resolveBackReferences(t,e)}collectPatterns(t,e){e.push(this._begin)}compile(t,e){return this._getCachedCompiledPatterns(t,e).compile(t)}compileAG(t,e,n,r){return this._getCachedCompiledPatterns(t,e).compileAG(t,n,r)}_getCachedCompiledPatterns(t,e){if(!this._cachedCompiledPatterns){this._cachedCompiledPatterns=new Vl;for(const n of this.patterns)t.getRule(n).collectPatterns(t,this._cachedCompiledPatterns);this.applyEndPatternLast?this._cachedCompiledPatterns.push(this._end.hasBackReferences?this._end.clone():this._end):this._cachedCompiledPatterns.unshift(this._end.hasBackReferences?this._end.clone():this._end)}return this._end.hasBackReferences&&(this.applyEndPatternLast?this._cachedCompiledPatterns.setSource(this._cachedCompiledPatterns.length()-1,e):this._cachedCompiledPatterns.setSource(0,e)),this._cachedCompiledPatterns}},Rf=class extends nc{_begin;beginCaptures;whileCaptures;_while;whileHasBackReferences;hasMissingPatterns;patterns;_cachedCompiledPatterns;_cachedCompiledWhilePatterns;constructor(t,e,n,r,s,a,l,u,f){super(t,e,n,r),this._begin=new Fl(s,this.id),this.beginCaptures=a,this.whileCaptures=u,this._while=new Fl(l,Xk),this.whileHasBackReferences=this._while.hasBackReferences,this.patterns=f.patterns,this.hasMissingPatterns=f.hasMissingPatterns,this._cachedCompiledPatterns=null,this._cachedCompiledWhilePatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null),this._cachedCompiledWhilePatterns&&(this._cachedCompiledWhilePatterns.dispose(),this._cachedCompiledWhilePatterns=null)}get debugBeginRegExp(){return`${this._begin.source}`}get debugWhileRegExp(){return`${this._while.source}`}getWhileWithResolvedBackReferences(t,e){return this._while.resolveBackReferences(t,e)}collectPatterns(t,e){e.push(this._begin)}compile(t,e){return this._getCachedCompiledPatterns(t).compile(t)}compileAG(t,e,n,r){return this._getCachedCompiledPatterns(t).compileAG(t,n,r)}_getCachedCompiledPatterns(t){if(!this._cachedCompiledPatterns){this._cachedCompiledPatterns=new Vl;for(const e of this.patterns)t.getRule(e).collectPatterns(t,this._cachedCompiledPatterns)}return this._cachedCompiledPatterns}compileWhile(t,e){return this._getCachedCompiledWhilePatterns(t,e).compile(t)}compileWhileAG(t,e,n,r){return this._getCachedCompiledWhilePatterns(t,e).compileAG(t,n,r)}_getCachedCompiledWhilePatterns(t,e){return this._cachedCompiledWhilePatterns||(this._cachedCompiledWhilePatterns=new Vl,this._cachedCompiledWhilePatterns.push(this._while.hasBackReferences?this._while.clone():this._while)),this._while.hasBackReferences&&this._cachedCompiledWhilePatterns.setSource(0,e||""),this._cachedCompiledWhilePatterns}},Wk=class yn{static createCaptureRule(e,n,r,s,a){return e.registerRule(l=>new tL(n,l,r,s,a))}static getCompiledRuleId(e,n,r){return e.id||n.registerRule(s=>{if(e.id=s,e.match)return new nL(e.$vscodeTextmateLocation,e.id,e.name,e.match,yn._compileCaptures(e.captures,n,r));if(typeof e.begin>"u"){e.repository&&(r=qk({},r,e.repository));let a=e.patterns;return typeof a>"u"&&e.include&&(a=[{include:e.include}]),new Kw(e.$vscodeTextmateLocation,e.id,e.name,e.contentName,yn._compilePatterns(a,n,r))}return e.while?new Rf(e.$vscodeTextmateLocation,e.id,e.name,e.contentName,e.begin,yn._compileCaptures(e.beginCaptures||e.captures,n,r),e.while,yn._compileCaptures(e.whileCaptures||e.captures,n,r),yn._compilePatterns(e.patterns,n,r)):new xg(e.$vscodeTextmateLocation,e.id,e.name,e.contentName,e.begin,yn._compileCaptures(e.beginCaptures||e.captures,n,r),e.end,yn._compileCaptures(e.endCaptures||e.captures,n,r),e.applyEndPatternLast,yn._compilePatterns(e.patterns,n,r))}),e.id}static _compileCaptures(e,n,r){let s=[];if(e){let a=0;for(const l in e){if(l==="$vscodeTextmateLocation")continue;const u=parseInt(l,10);u>a&&(a=u)}for(let l=0;l<=a;l++)s[l]=null;for(const l in e){if(l==="$vscodeTextmateLocation")continue;const u=parseInt(l,10);let f=0;e[l].patterns&&(f=yn.getCompiledRuleId(e[l],n,r)),s[u]=yn.createCaptureRule(n,e[l].$vscodeTextmateLocation,e[l].name,e[l].contentName,f)}}return s}static _compilePatterns(e,n,r){let s=[];if(e)for(let a=0,l=e.length;a<l;a++){const u=e[a];let f=-1;if(u.include){const d=Yk(u.include);switch(d.kind){case 0:case 1:f=yn.getCompiledRuleId(r[u.include],n,r);break;case 2:let m=r[d.ruleName];m&&(f=yn.getCompiledRuleId(m,n,r));break;case 3:case 4:const p=d.scopeName,y=d.kind===4?d.ruleName:null,g=n.getExternalGrammar(p,r);if(g)if(y){let v=g.repository[y];v&&(f=yn.getCompiledRuleId(v,n,g.repository))}else f=yn.getCompiledRuleId(g.repository.$self,n,g.repository);break}}else f=yn.getCompiledRuleId(u,n,r);if(f!==-1){const d=n.getRule(f);let m=!1;if((d instanceof Kw||d instanceof xg||d instanceof Rf)&&d.hasMissingPatterns&&d.patterns.length===0&&(m=!0),m)continue;s.push(f)}}return{patterns:s,hasMissingPatterns:(e?e.length:0)!==s.length}}},Fl=class eE{source;ruleId;hasAnchor;hasBackReferences;_anchorCache;constructor(e,n){if(e&&typeof e=="string"){const r=e.length;let s=0,a=[],l=!1;for(let u=0;u<r;u++)if(e.charAt(u)==="\\"&&u+1<r){const d=e.charAt(u+1);d==="z"?(a.push(e.substring(s,u)),a.push("$(?!\\n)(?<!\\n)"),s=u+2):(d==="A"||d==="G")&&(l=!0),u++}this.hasAnchor=l,s===0?this.source=e:(a.push(e.substring(s,r)),this.source=a.join(""))}else this.hasAnchor=!1,this.source=e;this.hasAnchor?this._anchorCache=this._buildAnchorCache():this._anchorCache=null,this.ruleId=n,typeof this.source=="string"?this.hasBackReferences=Wj.test(this.source):this.hasBackReferences=!1}clone(){return new eE(this.source,this.ruleId)}setSource(e){this.source!==e&&(this.source=e,this.hasAnchor&&(this._anchorCache=this._buildAnchorCache()))}resolveBackReferences(e,n){if(typeof this.source!="string")throw new Error("This method should only be called if the source is a string");let r=n.map(s=>e.substring(s.start,s.end));return Gw.lastIndex=0,this.source.replace(Gw,(s,a)=>Gk(r[parseInt(a,10)]||""))}_buildAnchorCache(){if(typeof this.source!="string")throw new Error("This method should only be called if the source is a string");let e=[],n=[],r=[],s=[],a,l,u,f;for(a=0,l=this.source.length;a<l;a++)u=this.source.charAt(a),e[a]=u,n[a]=u,r[a]=u,s[a]=u,u==="\\"&&a+1<l&&(f=this.source.charAt(a+1),f==="A"?(e[a+1]="",n[a+1]="",r[a+1]="A",s[a+1]="A"):f==="G"?(e[a+1]="",n[a+1]="G",r[a+1]="",s[a+1]="G"):(e[a+1]=f,n[a+1]=f,r[a+1]=f,s[a+1]=f),a++);return{A0_G0:e.join(""),A0_G1:n.join(""),A1_G0:r.join(""),A1_G1:s.join("")}}resolveAnchors(e,n){return!this.hasAnchor||!this._anchorCache||typeof this.source!="string"?this.source:e?n?this._anchorCache.A1_G1:this._anchorCache.A1_G0:n?this._anchorCache.A0_G1:this._anchorCache.A0_G0}},Vl=class{_items;_hasAnchors;_cached;_anchorCache;constructor(){this._items=[],this._hasAnchors=!1,this._cached=null,this._anchorCache={A0_G0:null,A0_G1:null,A1_G0:null,A1_G1:null}}dispose(){this._disposeCaches()}_disposeCaches(){this._cached&&(this._cached.dispose(),this._cached=null),this._anchorCache.A0_G0&&(this._anchorCache.A0_G0.dispose(),this._anchorCache.A0_G0=null),this._anchorCache.A0_G1&&(this._anchorCache.A0_G1.dispose(),this._anchorCache.A0_G1=null),this._anchorCache.A1_G0&&(this._anchorCache.A1_G0.dispose(),this._anchorCache.A1_G0=null),this._anchorCache.A1_G1&&(this._anchorCache.A1_G1.dispose(),this._anchorCache.A1_G1=null)}push(t){this._items.push(t),this._hasAnchors=this._hasAnchors||t.hasAnchor}unshift(t){this._items.unshift(t),this._hasAnchors=this._hasAnchors||t.hasAnchor}length(){return this._items.length}setSource(t,e){this._items[t].source!==e&&(this._disposeCaches(),this._items[t].setSource(e))}compile(t){if(!this._cached){let e=this._items.map(n=>n.source);this._cached=new Zw(t,e,this._items.map(n=>n.ruleId))}return this._cached}compileAG(t,e,n){return this._hasAnchors?e?n?(this._anchorCache.A1_G1||(this._anchorCache.A1_G1=this._resolveAnchors(t,e,n)),this._anchorCache.A1_G1):(this._anchorCache.A1_G0||(this._anchorCache.A1_G0=this._resolveAnchors(t,e,n)),this._anchorCache.A1_G0):n?(this._anchorCache.A0_G1||(this._anchorCache.A0_G1=this._resolveAnchors(t,e,n)),this._anchorCache.A0_G1):(this._anchorCache.A0_G0||(this._anchorCache.A0_G0=this._resolveAnchors(t,e,n)),this._anchorCache.A0_G0):this.compile(t)}_resolveAnchors(t,e,n){let r=this._items.map(s=>s.resolveAnchors(e,n));return new Zw(t,r,this._items.map(s=>s.ruleId))}},Zw=class{constructor(t,e,n){this.regExps=e,this.rules=n,this.scanner=t.createOnigScanner(e)}scanner;dispose(){typeof this.scanner.dispose=="function"&&this.scanner.dispose()}toString(){const t=[];for(let e=0,n=this.rules.length;e<n;e++)t.push("   - "+this.rules[e]+": "+this.regExps[e]);return t.join(`
`)}findNextMatchSync(t,e,n){const r=this.scanner.findNextMatchSync(t,e,n);return r?{ruleId:this.rules[r.index],captureIndices:r.captureIndices}:null}},cm=class{constructor(t,e){this.languageId=t,this.tokenType=e}},rL=class wg{_defaultAttributes;_embeddedLanguagesMatcher;constructor(e,n){this._defaultAttributes=new cm(e,8),this._embeddedLanguagesMatcher=new sL(Object.entries(n||{}))}getDefaultAttributes(){return this._defaultAttributes}getBasicScopeAttributes(e){return e===null?wg._NULL_SCOPE_METADATA:this._getBasicScopeAttributes.get(e)}static _NULL_SCOPE_METADATA=new cm(0,0);_getBasicScopeAttributes=new Kk(e=>{const n=this._scopeToLanguage(e),r=this._toStandardTokenType(e);return new cm(n,r)});_scopeToLanguage(e){return this._embeddedLanguagesMatcher.match(e)||0}_toStandardTokenType(e){const n=e.match(wg.STANDARD_TOKEN_TYPE_REGEXP);if(!n)return 8;switch(n[1]){case"comment":return 1;case"string":return 2;case"regex":return 3;case"meta.embedded":return 0}throw new Error("Unexpected match for standard token type!")}static STANDARD_TOKEN_TYPE_REGEXP=/\b(comment|string|regex|meta\.embedded)\b/},sL=class{values;scopesRegExp;constructor(t){if(t.length===0)this.values=null,this.scopesRegExp=null;else{this.values=new Map(t);const e=t.map(([n,r])=>Gk(n));e.sort(),e.reverse(),this.scopesRegExp=new RegExp(`^((${e.join(")|(")}))($|\\.)`,"")}}match(t){if(!this.scopesRegExp)return;const e=t.match(this.scopesRegExp);if(e)return this.values.get(e[1])}},Qw=class{constructor(t,e){this.stack=t,this.stoppedEarly=e}};function tE(t,e,n,r,s,a,l,u){const f=e.content.length;let d=!1,m=-1;if(l){const g=iL(t,e,n,r,s,a);s=g.stack,r=g.linePos,n=g.isFirstLine,m=g.anchorPosition}const p=Date.now();for(;!d;){if(u!==0&&Date.now()-p>u)return new Qw(s,!0);y()}return new Qw(s,!1);function y(){const g=aL(t,e,n,r,s,m);if(!g){a.produce(s,f),d=!0;return}const v=g.captureIndices,x=g.matchedRuleId,E=v&&v.length>0?v[0].end>r:!1;if(x===eL){const S=s.getRule(t);a.produce(s,v[0].start),s=s.withContentNameScopesList(s.nameScopesList),dl(t,e,n,s,a,S.endCaptures,v),a.produce(s,v[0].end);const T=s;if(s=s.parent,m=T.getAnchorPos(),!E&&T.getEnterPos()===r){s=T,a.produce(s,f),d=!0;return}}else{const S=t.getRule(x);a.produce(s,v[0].start);const T=s,A=S.getName(e.content,v),j=s.contentNameScopesList.pushAttributed(A,t);if(s=s.push(x,r,m,v[0].end===f,null,j,j),S instanceof xg){const D=S;dl(t,e,n,s,a,D.beginCaptures,v),a.produce(s,v[0].end),m=v[0].end;const I=D.getContentName(e.content,v),P=j.pushAttributed(I,t);if(s=s.withContentNameScopesList(P),D.endHasBackReferences&&(s=s.withEndRule(D.getEndWithResolvedBackReferences(e.content,v))),!E&&T.hasSameRuleAs(s)){s=s.pop(),a.produce(s,f),d=!0;return}}else if(S instanceof Rf){const D=S;dl(t,e,n,s,a,D.beginCaptures,v),a.produce(s,v[0].end),m=v[0].end;const I=D.getContentName(e.content,v),P=j.pushAttributed(I,t);if(s=s.withContentNameScopesList(P),D.whileHasBackReferences&&(s=s.withEndRule(D.getWhileWithResolvedBackReferences(e.content,v))),!E&&T.hasSameRuleAs(s)){s=s.pop(),a.produce(s,f),d=!0;return}}else if(dl(t,e,n,s,a,S.captures,v),a.produce(s,v[0].end),s=s.pop(),!E){s=s.safePop(),a.produce(s,f),d=!0;return}}v[0].end>r&&(r=v[0].end,n=!1)}}function iL(t,e,n,r,s,a){let l=s.beginRuleCapturedEOL?0:-1;const u=[];for(let f=s;f;f=f.pop()){const d=f.getRule(t);d instanceof Rf&&u.push({rule:d,stack:f})}for(let f=u.pop();f;f=u.pop()){const{ruleScanner:d,findOptions:m}=cL(f.rule,t,f.stack.endRule,n,r===l),p=d.findNextMatchSync(e,r,m);if(p){if(p.ruleId!==Xk){s=f.stack.pop();break}p.captureIndices&&p.captureIndices.length&&(a.produce(f.stack,p.captureIndices[0].start),dl(t,e,n,f.stack,a,f.rule.whileCaptures,p.captureIndices),a.produce(f.stack,p.captureIndices[0].end),l=p.captureIndices[0].end,p.captureIndices[0].end>r&&(r=p.captureIndices[0].end,n=!1))}else{s=f.stack.pop();break}}return{stack:s,linePos:r,anchorPosition:l,isFirstLine:n}}function aL(t,e,n,r,s,a){const l=oL(t,e,n,r,s,a),u=t.getInjections();if(u.length===0)return l;const f=lL(u,t,e,n,r,s,a);if(!f)return l;if(!l)return f;const d=l.captureIndices[0].start,m=f.captureIndices[0].start;return m<d||f.priorityMatch&&m===d?f:l}function oL(t,e,n,r,s,a){const l=s.getRule(t),{ruleScanner:u,findOptions:f}=nE(l,t,s.endRule,n,r===a),d=u.findNextMatchSync(e,r,f);return d?{captureIndices:d.captureIndices,matchedRuleId:d.ruleId}:null}function lL(t,e,n,r,s,a,l){let u=Number.MAX_VALUE,f=null,d,m=0;const p=a.contentNameScopesList.getScopeNames();for(let y=0,g=t.length;y<g;y++){const v=t[y];if(!v.matcher(p))continue;const x=e.getRule(v.ruleId),{ruleScanner:E,findOptions:S}=nE(x,e,null,r,s===l),T=E.findNextMatchSync(n,s,S);if(!T)continue;const A=T.captureIndices[0].start;if(!(A>=u)&&(u=A,f=T.captureIndices,d=T.ruleId,m=v.priority,u===s))break}return f?{priorityMatch:m===-1,captureIndices:f,matchedRuleId:d}:null}function nE(t,e,n,r,s){return{ruleScanner:t.compileAG(e,n,r,s),findOptions:0}}function cL(t,e,n,r,s){return{ruleScanner:t.compileWhileAG(e,n,r,s),findOptions:0}}function dl(t,e,n,r,s,a,l){if(a.length===0)return;const u=e.content,f=Math.min(a.length,l.length),d=[],m=l[0].end;for(let p=0;p<f;p++){const y=a[p];if(y===null)continue;const g=l[p];if(g.length===0)continue;if(g.start>m)break;for(;d.length>0&&d[d.length-1].endPos<=g.start;)s.produceFromScopes(d[d.length-1].scopes,d[d.length-1].endPos),d.pop();if(d.length>0?s.produceFromScopes(d[d.length-1].scopes,g.start):s.produce(r,g.start),y.retokenizeCapturedWithRuleId){const x=y.getName(u,l),E=r.contentNameScopesList.pushAttributed(x,t),S=y.getContentName(u,l),T=E.pushAttributed(S,t),A=r.push(y.retokenizeCapturedWithRuleId,g.start,-1,!1,null,E,T),j=t.createOnigString(u.substring(0,g.end));tE(t,j,n&&g.start===0,g.start,A,s,!1,0),Jk(j);continue}const v=y.getName(u,l);if(v!==null){const E=(d.length>0?d[d.length-1].scopes:r.contentNameScopesList).pushAttributed(v,t);d.push(new uL(E,g.end))}}for(;d.length>0;)s.produceFromScopes(d[d.length-1].scopes,d[d.length-1].endPos),d.pop()}var uL=class{scopes;endPos;constructor(t,e){this.scopes=t,this.endPos=e}};function fL(t,e,n,r,s,a,l,u){return new hL(t,e,n,r,s,a,l,u)}function Jw(t,e,n,r,s){const a=Tf(e,Of),l=Wk.getCompiledRuleId(n,r,s.repository);for(const u of a)t.push({debugSelector:e,matcher:u.matcher,ruleId:l,grammar:s,priority:u.priority})}function Of(t,e){if(e.length<t.length)return!1;let n=0;return t.every(r=>{for(let s=n;s<e.length;s++)if(dL(e[s],r))return n=s+1,!0;return!1})}function dL(t,e){if(!t)return!1;if(t===e)return!0;const n=e.length;return t.length>n&&t.substr(0,n)===e&&t[n]==="."}var hL=class{constructor(t,e,n,r,s,a,l,u){if(this._rootScopeName=t,this.balancedBracketSelectors=a,this._onigLib=u,this._basicScopeAttributesProvider=new rL(n,r),this._rootId=-1,this._lastRuleId=0,this._ruleId2desc=[null],this._includedGrammars={},this._grammarRepository=l,this._grammar=Yw(e,null),this._injections=null,this._tokenTypeMatchers=[],s)for(const f of Object.keys(s)){const d=Tf(f,Of);for(const m of d)this._tokenTypeMatchers.push({matcher:m.matcher,type:s[f]})}}_rootId;_lastRuleId;_ruleId2desc;_includedGrammars;_grammarRepository;_grammar;_injections;_basicScopeAttributesProvider;_tokenTypeMatchers;get themeProvider(){return this._grammarRepository}dispose(){for(const t of this._ruleId2desc)t&&t.dispose()}createOnigScanner(t){return this._onigLib.createOnigScanner(t)}createOnigString(t){return this._onigLib.createOnigString(t)}getMetadataForScope(t){return this._basicScopeAttributesProvider.getBasicScopeAttributes(t)}_collectInjections(){const t={lookup:s=>s===this._rootScopeName?this._grammar:this.getExternalGrammar(s),injections:s=>this._grammarRepository.injections(s)},e=[],n=this._rootScopeName,r=t.lookup(n);if(r){const s=r.injections;if(s)for(let l in s)Jw(e,l,s[l],this,r);const a=this._grammarRepository.injections(n);a&&a.forEach(l=>{const u=this.getExternalGrammar(l);if(u){const f=u.injectionSelector;f&&Jw(e,f,u,this,u)}})}return e.sort((s,a)=>s.priority-a.priority),e}getInjections(){return this._injections===null&&(this._injections=this._collectInjections()),this._injections}registerRule(t){const e=++this._lastRuleId,n=t(e);return this._ruleId2desc[e]=n,n}getRule(t){return this._ruleId2desc[t]}getExternalGrammar(t,e){if(this._includedGrammars[t])return this._includedGrammars[t];if(this._grammarRepository){const n=this._grammarRepository.lookup(t);if(n)return this._includedGrammars[t]=Yw(n,e&&e.$base),this._includedGrammars[t]}}tokenizeLine(t,e,n=0){const r=this._tokenize(t,e,!1,n);return{tokens:r.lineTokens.getResult(r.ruleStack,r.lineLength),ruleStack:r.ruleStack,stoppedEarly:r.stoppedEarly}}tokenizeLine2(t,e,n=0){const r=this._tokenize(t,e,!0,n);return{tokens:r.lineTokens.getBinaryResult(r.ruleStack,r.lineLength),ruleStack:r.ruleStack,stoppedEarly:r.stoppedEarly}}_tokenize(t,e,n,r){this._rootId===-1&&(this._rootId=Wk.getCompiledRuleId(this._grammar.repository.$self,this,this._grammar.repository),this.getInjections());let s;if(!e||e===Sg.NULL){s=!0;const d=this._basicScopeAttributesProvider.getDefaultAttributes(),m=this.themeProvider.getDefaults(),p=Qa.set(0,d.languageId,d.tokenType,null,m.fontStyle,m.foregroundId,m.backgroundId),y=this.getRule(this._rootId).getName(null,null);let g;y?g=Tl.createRootAndLookUpScopeName(y,p,this):g=Tl.createRoot("unknown",p),e=new Sg(null,this._rootId,-1,-1,!1,null,g,g)}else s=!1,e.reset();t=t+`
`;const a=this.createOnigString(t),l=a.content.length,u=new mL(n,t,this._tokenTypeMatchers,this.balancedBracketSelectors),f=tE(this,a,s,0,e,u,!0,r);return Jk(a),{lineLength:l,lineTokens:u,ruleStack:f.stack,stoppedEarly:f.stoppedEarly}}};function Yw(t,e){return t=Ij(t),t.repository=t.repository||{},t.repository.$self={$vscodeTextmateLocation:t.$vscodeTextmateLocation,patterns:t.patterns,name:t.scopeName},t.repository.$base=e||t.repository.$self,t}var Tl=class zr{constructor(e,n,r){this.parent=e,this.scopePath=n,this.tokenAttributes=r}static fromExtension(e,n){let r=e,s=e?.scopePath??null;for(const a of n)s=lm.push(s,a.scopeNames),r=new zr(r,s,a.encodedTokenAttributes);return r}static createRoot(e,n){return new zr(null,new lm(null,e),n)}static createRootAndLookUpScopeName(e,n,r){const s=r.getMetadataForScope(e),a=new lm(null,e),l=r.themeProvider.themeMatch(a),u=zr.mergeAttributes(n,s,l);return new zr(null,a,u)}get scopeName(){return this.scopePath.scopeName}toString(){return this.getScopeNames().join(" ")}equals(e){return zr.equals(this,e)}static equals(e,n){do{if(e===n||!e&&!n)return!0;if(!e||!n||e.scopeName!==n.scopeName||e.tokenAttributes!==n.tokenAttributes)return!1;e=e.parent,n=n.parent}while(!0)}static mergeAttributes(e,n,r){let s=-1,a=0,l=0;return r!==null&&(s=r.fontStyle,a=r.foregroundId,l=r.backgroundId),Qa.set(e,n.languageId,n.tokenType,null,s,a,l)}pushAttributed(e,n){if(e===null)return this;if(e.indexOf(" ")===-1)return zr._pushAttributed(this,e,n);const r=e.split(/ /g);let s=this;for(const a of r)s=zr._pushAttributed(s,a,n);return s}static _pushAttributed(e,n,r){const s=r.getMetadataForScope(n),a=e.scopePath.push(n),l=r.themeProvider.themeMatch(a),u=zr.mergeAttributes(e.tokenAttributes,s,l);return new zr(e,a,u)}getScopeNames(){return this.scopePath.getSegments()}getExtensionIfDefined(e){const n=[];let r=this;for(;r&&r!==e;)n.push({encodedTokenAttributes:r.tokenAttributes,scopeNames:r.scopePath.getExtensionIfDefined(r.parent?.scopePath??null)}),r=r.parent;return r===e?n.reverse():void 0}},Sg=class Ei{constructor(e,n,r,s,a,l,u,f){this.parent=e,this.ruleId=n,this.beginRuleCapturedEOL=a,this.endRule=l,this.nameScopesList=u,this.contentNameScopesList=f,this.depth=this.parent?this.parent.depth+1:1,this._enterPos=r,this._anchorPos=s}_stackElementBrand=void 0;static NULL=new Ei(null,0,0,0,!1,null,null,null);_enterPos;_anchorPos;depth;equals(e){return e===null?!1:Ei._equals(this,e)}static _equals(e,n){return e===n?!0:this._structuralEquals(e,n)?Tl.equals(e.contentNameScopesList,n.contentNameScopesList):!1}static _structuralEquals(e,n){do{if(e===n||!e&&!n)return!0;if(!e||!n||e.depth!==n.depth||e.ruleId!==n.ruleId||e.endRule!==n.endRule)return!1;e=e.parent,n=n.parent}while(!0)}clone(){return this}static _reset(e){for(;e;)e._enterPos=-1,e._anchorPos=-1,e=e.parent}reset(){Ei._reset(this)}pop(){return this.parent}safePop(){return this.parent?this.parent:this}push(e,n,r,s,a,l,u){return new Ei(this,e,n,r,s,a,l,u)}getEnterPos(){return this._enterPos}getAnchorPos(){return this._anchorPos}getRule(e){return e.getRule(this.ruleId)}toString(){const e=[];return this._writeString(e,0),"["+e.join(",")+"]"}_writeString(e,n){return this.parent&&(n=this.parent._writeString(e,n)),e[n++]=`(${this.ruleId}, ${this.nameScopesList?.toString()}, ${this.contentNameScopesList?.toString()})`,n}withContentNameScopesList(e){return this.contentNameScopesList===e?this:this.parent.push(this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,this.endRule,this.nameScopesList,e)}withEndRule(e){return this.endRule===e?this:new Ei(this.parent,this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,e,this.nameScopesList,this.contentNameScopesList)}hasSameRuleAs(e){let n=this;for(;n&&n._enterPos===e._enterPos;){if(n.ruleId===e.ruleId)return!0;n=n.parent}return!1}toStateStackFrame(){return{ruleId:this.ruleId,beginRuleCapturedEOL:this.beginRuleCapturedEOL,endRule:this.endRule,nameScopesList:this.nameScopesList?.getExtensionIfDefined(this.parent?.nameScopesList??null)??[],contentNameScopesList:this.contentNameScopesList?.getExtensionIfDefined(this.nameScopesList)??[]}}static pushFrame(e,n){const r=Tl.fromExtension(e?.nameScopesList??null,n.nameScopesList);return new Ei(e,n.ruleId,n.enterPos??-1,n.anchorPos??-1,n.beginRuleCapturedEOL,n.endRule,r,Tl.fromExtension(r,n.contentNameScopesList))}},pL=class{balancedBracketScopes;unbalancedBracketScopes;allowAny=!1;constructor(t,e){this.balancedBracketScopes=t.flatMap(n=>n==="*"?(this.allowAny=!0,[]):Tf(n,Of).map(r=>r.matcher)),this.unbalancedBracketScopes=e.flatMap(n=>Tf(n,Of).map(r=>r.matcher))}get matchesAlways(){return this.allowAny&&this.unbalancedBracketScopes.length===0}get matchesNever(){return this.balancedBracketScopes.length===0&&!this.allowAny}match(t){for(const e of this.unbalancedBracketScopes)if(e(t))return!1;for(const e of this.balancedBracketScopes)if(e(t))return!0;return this.allowAny}},mL=class{constructor(t,e,n,r){this.balancedBracketSelectors=r,this._emitBinaryTokens=t,this._tokenTypeOverrides=n,this._lineText=null,this._tokens=[],this._binaryTokens=[],this._lastTokenEndIndex=0}_emitBinaryTokens;_lineText;_tokens;_binaryTokens;_lastTokenEndIndex;_tokenTypeOverrides;produce(t,e){this.produceFromScopes(t.contentNameScopesList,e)}produceFromScopes(t,e){if(this._lastTokenEndIndex>=e)return;if(this._emitBinaryTokens){let r=t?.tokenAttributes??0,s=!1;if(this.balancedBracketSelectors?.matchesAlways&&(s=!0),this._tokenTypeOverrides.length>0||this.balancedBracketSelectors&&!this.balancedBracketSelectors.matchesAlways&&!this.balancedBracketSelectors.matchesNever){const a=t?.getScopeNames()??[];for(const l of this._tokenTypeOverrides)l.matcher(a)&&(r=Qa.set(r,0,l.type,null,-1,0,0));this.balancedBracketSelectors&&(s=this.balancedBracketSelectors.match(a))}if(s&&(r=Qa.set(r,0,8,s,-1,0,0)),this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-1]===r){this._lastTokenEndIndex=e;return}this._binaryTokens.push(this._lastTokenEndIndex),this._binaryTokens.push(r),this._lastTokenEndIndex=e;return}const n=t?.getScopeNames()??[];this._tokens.push({startIndex:this._lastTokenEndIndex,endIndex:e,scopes:n}),this._lastTokenEndIndex=e}getResult(t,e){return this._tokens.length>0&&this._tokens[this._tokens.length-1].startIndex===e-1&&this._tokens.pop(),this._tokens.length===0&&(this._lastTokenEndIndex=-1,this.produce(t,e),this._tokens[this._tokens.length-1].startIndex=0),this._tokens}getBinaryResult(t,e){this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-2]===e-1&&(this._binaryTokens.pop(),this._binaryTokens.pop()),this._binaryTokens.length===0&&(this._lastTokenEndIndex=-1,this.produce(t,e),this._binaryTokens[this._binaryTokens.length-2]=0);const n=new Uint32Array(this._binaryTokens.length);for(let r=0,s=this._binaryTokens.length;r<s;r++)n[r]=this._binaryTokens[r];return n}},gL=class{constructor(t,e){this._onigLib=e,this._theme=t}_grammars=new Map;_rawGrammars=new Map;_injectionGrammars=new Map;_theme;dispose(){for(const t of this._grammars.values())t.dispose()}setTheme(t){this._theme=t}getColorMap(){return this._theme.getColorMap()}addGrammar(t,e){this._rawGrammars.set(t.scopeName,t),e&&this._injectionGrammars.set(t.scopeName,e)}lookup(t){return this._rawGrammars.get(t)}injections(t){return this._injectionGrammars.get(t)}getDefaults(){return this._theme.getDefaults()}themeMatch(t){return this._theme.match(t)}grammarForScopeName(t,e,n,r,s){if(!this._grammars.has(t)){let a=this._rawGrammars.get(t);if(!a)return null;this._grammars.set(t,fL(t,a,e,n,r,s,this,this._onigLib))}return this._grammars.get(t)}},yL=class{_options;_syncRegistry;_ensureGrammarCache;constructor(e){this._options=e,this._syncRegistry=new gL(Cf.createFromRawTheme(e.theme,e.colorMap),e.onigLib),this._ensureGrammarCache=new Map}dispose(){this._syncRegistry.dispose()}setTheme(e,n){this._syncRegistry.setTheme(Cf.createFromRawTheme(e,n))}getColorMap(){return this._syncRegistry.getColorMap()}loadGrammarWithEmbeddedLanguages(e,n,r){return this.loadGrammarWithConfiguration(e,n,{embeddedLanguages:r})}loadGrammarWithConfiguration(e,n,r){return this._loadGrammar(e,n,r.embeddedLanguages,r.tokenTypes,new pL(r.balancedBracketSelectors||[],r.unbalancedBracketSelectors||[]))}loadGrammar(e){return this._loadGrammar(e,0,null,null,null)}_loadGrammar(e,n,r,s,a){const l=new Gj(this._syncRegistry,e);for(;l.Q.length>0;)l.Q.map(u=>this._loadSingleGrammar(u.scopeName)),l.processQueue();return this._grammarForScopeName(e,n,r,s,a)}_loadSingleGrammar(e){this._ensureGrammarCache.has(e)||(this._doLoadSingleGrammar(e),this._ensureGrammarCache.set(e,!0))}_doLoadSingleGrammar(e){const n=this._options.loadGrammar(e);if(n){const r=typeof this._options.getInjections=="function"?this._options.getInjections(e):void 0;this._syncRegistry.addGrammar(n,r)}}addGrammar(e,n=[],r=0,s=null){return this._syncRegistry.addGrammar(e,n),this._grammarForScopeName(e.scopeName,r,s)}_grammarForScopeName(e,n=0,r=null,s=null,a=null){return this._syncRegistry.grammarForScopeName(e,n,r,s,a)}},kg=Sg.NULL;const bL=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"];class rc{constructor(e,n,r){this.normal=n,this.property=e,r&&(this.space=r)}}rc.prototype.normal={};rc.prototype.property={};rc.prototype.space=void 0;function rE(t,e){const n={},r={};for(const s of t)Object.assign(n,s.property),Object.assign(r,s.normal);return new rc(n,r,e)}function Eg(t){return t.toLowerCase()}class Fn{constructor(e,n){this.attribute=n,this.property=e}}Fn.prototype.attribute="";Fn.prototype.booleanish=!1;Fn.prototype.boolean=!1;Fn.prototype.commaOrSpaceSeparated=!1;Fn.prototype.commaSeparated=!1;Fn.prototype.defined=!1;Fn.prototype.mustUseProperty=!1;Fn.prototype.number=!1;Fn.prototype.overloadedBoolean=!1;Fn.prototype.property="";Fn.prototype.spaceSeparated=!1;Fn.prototype.space=void 0;let _L=0;const Ue=Pi(),jt=Pi(),Cg=Pi(),me=Pi(),yt=Pi(),qa=Pi(),Yn=Pi();function Pi(){return 2**++_L}const Tg=Object.freeze(Object.defineProperty({__proto__:null,boolean:Ue,booleanish:jt,commaOrSpaceSeparated:Yn,commaSeparated:qa,number:me,overloadedBoolean:Cg,spaceSeparated:yt},Symbol.toStringTag,{value:"Module"})),um=Object.keys(Tg);class My extends Fn{constructor(e,n,r,s){let a=-1;if(super(e,n),Xw(this,"space",s),typeof r=="number")for(;++a<um.length;){const l=um[a];Xw(this,um[a],(r&Tg[l])===Tg[l])}}}My.prototype.defined=!0;function Xw(t,e,n){n&&(t[e]=n)}function to(t){const e={},n={};for(const[r,s]of Object.entries(t.properties)){const a=new My(r,t.transform(t.attributes||{},r),s,t.space);t.mustUseProperty&&t.mustUseProperty.includes(r)&&(a.mustUseProperty=!0),e[r]=a,n[Eg(r)]=r,n[Eg(a.attribute)]=r}return new rc(e,n,t.space)}const sE=to({properties:{ariaActiveDescendant:null,ariaAtomic:jt,ariaAutoComplete:null,ariaBusy:jt,ariaChecked:jt,ariaColCount:me,ariaColIndex:me,ariaColSpan:me,ariaControls:yt,ariaCurrent:null,ariaDescribedBy:yt,ariaDetails:null,ariaDisabled:jt,ariaDropEffect:yt,ariaErrorMessage:null,ariaExpanded:jt,ariaFlowTo:yt,ariaGrabbed:jt,ariaHasPopup:null,ariaHidden:jt,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:yt,ariaLevel:me,ariaLive:null,ariaModal:jt,ariaMultiLine:jt,ariaMultiSelectable:jt,ariaOrientation:null,ariaOwns:yt,ariaPlaceholder:null,ariaPosInSet:me,ariaPressed:jt,ariaReadOnly:jt,ariaRelevant:null,ariaRequired:jt,ariaRoleDescription:yt,ariaRowCount:me,ariaRowIndex:me,ariaRowSpan:me,ariaSelected:jt,ariaSetSize:me,ariaSort:null,ariaValueMax:me,ariaValueMin:me,ariaValueNow:me,ariaValueText:null,role:null},transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function iE(t,e){return e in t?t[e]:e}function aE(t,e){return iE(t,e.toLowerCase())}const vL=to({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:qa,acceptCharset:yt,accessKey:yt,action:null,allow:null,allowFullScreen:Ue,allowPaymentRequest:Ue,allowUserMedia:Ue,alt:null,as:null,async:Ue,autoCapitalize:null,autoComplete:yt,autoFocus:Ue,autoPlay:Ue,blocking:yt,capture:null,charSet:null,checked:Ue,cite:null,className:yt,cols:me,colSpan:null,content:null,contentEditable:jt,controls:Ue,controlsList:yt,coords:me|qa,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Ue,defer:Ue,dir:null,dirName:null,disabled:Ue,download:Cg,draggable:jt,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Ue,formTarget:null,headers:yt,height:me,hidden:Cg,high:me,href:null,hrefLang:null,htmlFor:yt,httpEquiv:yt,id:null,imageSizes:null,imageSrcSet:null,inert:Ue,inputMode:null,integrity:null,is:null,isMap:Ue,itemId:null,itemProp:yt,itemRef:yt,itemScope:Ue,itemType:yt,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Ue,low:me,manifest:null,max:null,maxLength:me,media:null,method:null,min:null,minLength:me,multiple:Ue,muted:Ue,name:null,nonce:null,noModule:Ue,noValidate:Ue,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Ue,optimum:me,pattern:null,ping:yt,placeholder:null,playsInline:Ue,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Ue,referrerPolicy:null,rel:yt,required:Ue,reversed:Ue,rows:me,rowSpan:me,sandbox:yt,scope:null,scoped:Ue,seamless:Ue,selected:Ue,shadowRootClonable:Ue,shadowRootDelegatesFocus:Ue,shadowRootMode:null,shape:null,size:me,sizes:null,slot:null,span:me,spellCheck:jt,src:null,srcDoc:null,srcLang:null,srcSet:null,start:me,step:null,style:null,tabIndex:me,target:null,title:null,translate:null,type:null,typeMustMatch:Ue,useMap:null,value:jt,width:me,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:yt,axis:null,background:null,bgColor:null,border:me,borderColor:null,bottomMargin:me,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Ue,declare:Ue,event:null,face:null,frame:null,frameBorder:null,hSpace:me,leftMargin:me,link:null,longDesc:null,lowSrc:null,marginHeight:me,marginWidth:me,noResize:Ue,noHref:Ue,noShade:Ue,noWrap:Ue,object:null,profile:null,prompt:null,rev:null,rightMargin:me,rules:null,scheme:null,scrolling:jt,standby:null,summary:null,text:null,topMargin:me,valueType:null,version:null,vAlign:null,vLink:null,vSpace:me,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Ue,disableRemotePlayback:Ue,prefix:null,property:null,results:me,security:null,unselectable:null},space:"html",transform:aE}),xL=to({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Yn,accentHeight:me,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:me,amplitude:me,arabicForm:null,ascent:me,attributeName:null,attributeType:null,azimuth:me,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:me,by:null,calcMode:null,capHeight:me,className:yt,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:me,diffuseConstant:me,direction:null,display:null,dur:null,divisor:me,dominantBaseline:null,download:Ue,dx:null,dy:null,edgeMode:null,editable:null,elevation:me,enableBackground:null,end:null,event:null,exponent:me,externalResourcesRequired:null,fill:null,fillOpacity:me,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:qa,g2:qa,glyphName:qa,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:me,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:me,horizOriginX:me,horizOriginY:me,id:null,ideographic:me,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:me,k:me,k1:me,k2:me,k3:me,k4:me,kernelMatrix:Yn,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:me,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:me,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:me,overlineThickness:me,paintOrder:null,panose1:null,path:null,pathLength:me,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:yt,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:me,pointsAtY:me,pointsAtZ:me,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Yn,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Yn,rev:Yn,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Yn,requiredFeatures:Yn,requiredFonts:Yn,requiredFormats:Yn,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:me,specularExponent:me,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:me,strikethroughThickness:me,string:null,stroke:null,strokeDashArray:Yn,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:me,strokeOpacity:me,strokeWidth:null,style:null,surfaceScale:me,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Yn,tabIndex:me,tableValues:null,target:null,targetX:me,targetY:me,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Yn,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:me,underlineThickness:me,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:me,values:null,vAlphabetic:me,vMathematical:me,vectorEffect:null,vHanging:me,vIdeographic:me,version:null,vertAdvY:me,vertOriginX:me,vertOriginY:me,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:me,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:iE}),oE=to({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()}}),lE=to({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:aE}),cE=to({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()}}),wL={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},SL=/[A-Z]/g,Ww=/-[a-z]/g,kL=/^data[-\w.:]+$/i;function uE(t,e){const n=Eg(e);let r=e,s=Fn;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&kL.test(e)){if(e.charAt(4)==="-"){const a=e.slice(5).replace(Ww,CL);r="data"+a.charAt(0).toUpperCase()+a.slice(1)}else{const a=e.slice(4);if(!Ww.test(a)){let l=a.replace(SL,EL);l.charAt(0)!=="-"&&(l="-"+l),e="data"+l}}s=My}return new s(r,e)}function EL(t){return"-"+t.toLowerCase()}function CL(t){return t.charAt(1).toUpperCase()}const fE=rE([sE,vL,oE,lE,cE],"html"),sc=rE([sE,xL,oE,lE,cE],"svg"),e1={}.hasOwnProperty;function TL(t,e){const n=e||{};function r(s,...a){let l=r.invalid;const u=r.handlers;if(s&&e1.call(s,t)){const f=String(s[t]);l=e1.call(u,f)?u[f]:r.unknown}if(l)return l.call(this,s,...a)}return r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}const AL=/["&'<>`]/g,RL=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,OL=/[\x01-\t\v\f\x0E-\x1F\x7F\x81\x8D\x8F\x90\x9D\xA0-\uFFFF]/g,NL=/[|\\{}()[\]^$+*?.]/g,t1=new WeakMap;function IL(t,e){if(t=t.replace(e.subset?ML(e.subset):AL,r),e.subset||e.escapeOnly)return t;return t.replace(RL,n).replace(OL,r);function n(s,a,l){return e.format((s.charCodeAt(0)-55296)*1024+s.charCodeAt(1)-56320+65536,l.charCodeAt(a+2),e)}function r(s,a,l){return e.format(s.charCodeAt(0),l.charCodeAt(a+1),e)}}function ML(t){let e=t1.get(t);return e||(e=DL(t),t1.set(t,e)),e}function DL(t){const e=[];let n=-1;for(;++n<t.length;)e.push(t[n].replace(NL,"\\$&"));return new RegExp("(?:"+e.join("|")+")","g")}const jL=/[\dA-Fa-f]/;function LL(t,e,n){const r="&#x"+t.toString(16).toUpperCase();return n&&e&&!jL.test(String.fromCharCode(e))?r:r+";"}const zL=/\d/;function PL(t,e,n){const r="&#"+String(t);return n&&e&&!zL.test(String.fromCharCode(e))?r:r+";"}const BL=["AElig","AMP","Aacute","Acirc","Agrave","Aring","Atilde","Auml","COPY","Ccedil","ETH","Eacute","Ecirc","Egrave","Euml","GT","Iacute","Icirc","Igrave","Iuml","LT","Ntilde","Oacute","Ocirc","Ograve","Oslash","Otilde","Ouml","QUOT","REG","THORN","Uacute","Ucirc","Ugrave","Uuml","Yacute","aacute","acirc","acute","aelig","agrave","amp","aring","atilde","auml","brvbar","ccedil","cedil","cent","copy","curren","deg","divide","eacute","ecirc","egrave","eth","euml","frac12","frac14","frac34","gt","iacute","icirc","iexcl","igrave","iquest","iuml","laquo","lt","macr","micro","middot","nbsp","not","ntilde","oacute","ocirc","ograve","ordf","ordm","oslash","otilde","ouml","para","plusmn","pound","quot","raquo","reg","sect","shy","sup1","sup2","sup3","szlig","thorn","times","uacute","ucirc","ugrave","uml","uuml","yacute","yen","yuml"],fm={nbsp:"",iexcl:"",cent:"",pound:"",curren:"",yen:"",brvbar:"",sect:"",uml:"",copy:"",ordf:"",laquo:"",not:"",shy:"",reg:"",macr:"",deg:"",plusmn:"",sup2:"",sup3:"",acute:"",micro:"",para:"",middot:"",cedil:"",sup1:"",ordm:"",raquo:"",frac14:"",frac12:"",frac34:"",iquest:"",Agrave:"",Aacute:"",Acirc:"",Atilde:"",Auml:"",Aring:"",AElig:"",Ccedil:"",Egrave:"",Eacute:"",Ecirc:"",Euml:"",Igrave:"",Iacute:"",Icirc:"",Iuml:"",ETH:"",Ntilde:"",Ograve:"",Oacute:"",Ocirc:"",Otilde:"",Ouml:"",times:"",Oslash:"",Ugrave:"",Uacute:"",Ucirc:"",Uuml:"",Yacute:"",THORN:"",szlig:"",agrave:"",aacute:"",acirc:"",atilde:"",auml:"",aring:"",aelig:"",ccedil:"",egrave:"",eacute:"",ecirc:"",euml:"",igrave:"",iacute:"",icirc:"",iuml:"",eth:"",ntilde:"",ograve:"",oacute:"",ocirc:"",otilde:"",ouml:"",divide:"",oslash:"",ugrave:"",uacute:"",ucirc:"",uuml:"",yacute:"",thorn:"",yuml:"",fnof:"",Alpha:"",Beta:"",Gamma:"",Delta:"",Epsilon:"",Zeta:"",Eta:"",Theta:"",Iota:"",Kappa:"",Lambda:"",Mu:"",Nu:"",Xi:"",Omicron:"",Pi:"",Rho:"",Sigma:"",Tau:"",Upsilon:"",Phi:"",Chi:"",Psi:"",Omega:"",alpha:"",beta:"",gamma:"",delta:"",epsilon:"",zeta:"",eta:"",theta:"",iota:"",kappa:"",lambda:"",mu:"",nu:"",xi:"",omicron:"",pi:"",rho:"",sigmaf:"",sigma:"",tau:"",upsilon:"",phi:"",chi:"",psi:"",omega:"",thetasym:"",upsih:"",piv:"",bull:"",hellip:"",prime:"",Prime:"",oline:"",frasl:"",weierp:"",image:"",real:"",trade:"",alefsym:"",larr:"",uarr:"",rarr:"",darr:"",harr:"",crarr:"",lArr:"",uArr:"",rArr:"",dArr:"",hArr:"",forall:"",part:"",exist:"",empty:"",nabla:"",isin:"",notin:"",ni:"",prod:"",sum:"",minus:"",lowast:"",radic:"",prop:"",infin:"",ang:"",and:"",or:"",cap:"",cup:"",int:"",there4:"",sim:"",cong:"",asymp:"",ne:"",equiv:"",le:"",ge:"",sub:"",sup:"",nsub:"",sube:"",supe:"",oplus:"",otimes:"",perp:"",sdot:"",lceil:"",rceil:"",lfloor:"",rfloor:"",lang:"",rang:"",loz:"",spades:"",clubs:"",hearts:"",diams:"",quot:'"',amp:"&",lt:"<",gt:">",OElig:"",oelig:"",Scaron:"",scaron:"",Yuml:"",circ:"",tilde:"",ensp:"",emsp:"",thinsp:"",zwnj:"",zwj:"",lrm:"",rlm:"",ndash:"",mdash:"",lsquo:"",rsquo:"",sbquo:"",ldquo:"",rdquo:"",bdquo:"",dagger:"",Dagger:"",permil:"",lsaquo:"",rsaquo:"",euro:""},$L=["cent","copy","divide","gt","lt","not","para","times"],dE={}.hasOwnProperty,Ag={};let Ou;for(Ou in fm)dE.call(fm,Ou)&&(Ag[fm[Ou]]=Ou);const UL=/[^\dA-Za-z]/;function qL(t,e,n,r){const s=String.fromCharCode(t);if(dE.call(Ag,s)){const a=Ag[s],l="&"+a;return n&&BL.includes(a)&&!$L.includes(a)&&(!r||e&&e!==61&&UL.test(String.fromCharCode(e)))?l:l+";"}return""}function FL(t,e,n){let r=LL(t,e,n.omitOptionalSemicolons),s;if((n.useNamedReferences||n.useShortestReferences)&&(s=qL(t,e,n.omitOptionalSemicolons,n.attribute)),(n.useShortestReferences||!s)&&n.useShortestReferences){const a=PL(t,e,n.omitOptionalSemicolons);a.length<r.length&&(r=a)}return s&&(!n.useShortestReferences||s.length<r.length)?s:r}function Fa(t,e){return IL(t,Object.assign({format:FL},e))}const VL=/^>|^->|<!--|-->|--!>|<!-$/g,HL=[">"],GL=["<",">"];function KL(t,e,n,r){return r.settings.bogusComments?"<?"+Fa(t.value,Object.assign({},r.settings.characterReferences,{subset:HL}))+">":"<!--"+t.value.replace(VL,s)+"-->";function s(a){return Fa(a,Object.assign({},r.settings.characterReferences,{subset:GL}))}}function ZL(t,e,n,r){return"<!"+(r.settings.upperDoctype?"DOCTYPE":"doctype")+(r.settings.tightDoctype?"":" ")+"html>"}function Nf(t,e){const n=String(t);if(typeof e!="string")throw new TypeError("Expected character");let r=0,s=n.indexOf(e);for(;s!==-1;)r++,s=n.indexOf(e,s+e.length);return r}function hE(t,e){const n=e||{};return(t[t.length-1]===""?[...t,""]:t).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}function pE(t){return t.join(" ").trim()}const QL=/[ \t\n\f\r]/g;function ad(t){return typeof t=="object"?t.type==="text"?n1(t.value):!1:n1(t)}function n1(t){return t.replace(QL,"")===""}const Vt=gE(1),mE=gE(-1),JL=[];function gE(t){return e;function e(n,r,s){const a=n?n.children:JL;let l=(r||0)+t,u=a[l];if(!s)for(;u&&ad(u);)l+=t,u=a[l];return u}}const YL={}.hasOwnProperty;function yE(t){return e;function e(n,r,s){return YL.call(t,n.tagName)&&t[n.tagName](n,r,s)}}const Dy=yE({body:WL,caption:dm,colgroup:dm,dd:rz,dt:nz,head:dm,html:XL,li:tz,optgroup:sz,option:iz,p:ez,rp:r1,rt:r1,tbody:oz,td:s1,tfoot:lz,th:s1,thead:az,tr:cz});function dm(t,e,n){const r=Vt(n,e,!0);return!r||r.type!=="comment"&&!(r.type==="text"&&ad(r.value.charAt(0)))}function XL(t,e,n){const r=Vt(n,e);return!r||r.type!=="comment"}function WL(t,e,n){const r=Vt(n,e);return!r||r.type!=="comment"}function ez(t,e,n){const r=Vt(n,e);return r?r.type==="element"&&(r.tagName==="address"||r.tagName==="article"||r.tagName==="aside"||r.tagName==="blockquote"||r.tagName==="details"||r.tagName==="div"||r.tagName==="dl"||r.tagName==="fieldset"||r.tagName==="figcaption"||r.tagName==="figure"||r.tagName==="footer"||r.tagName==="form"||r.tagName==="h1"||r.tagName==="h2"||r.tagName==="h3"||r.tagName==="h4"||r.tagName==="h5"||r.tagName==="h6"||r.tagName==="header"||r.tagName==="hgroup"||r.tagName==="hr"||r.tagName==="main"||r.tagName==="menu"||r.tagName==="nav"||r.tagName==="ol"||r.tagName==="p"||r.tagName==="pre"||r.tagName==="section"||r.tagName==="table"||r.tagName==="ul"):!n||!(n.type==="element"&&(n.tagName==="a"||n.tagName==="audio"||n.tagName==="del"||n.tagName==="ins"||n.tagName==="map"||n.tagName==="noscript"||n.tagName==="video"))}function tz(t,e,n){const r=Vt(n,e);return!r||r.type==="element"&&r.tagName==="li"}function nz(t,e,n){const r=Vt(n,e);return!!(r&&r.type==="element"&&(r.tagName==="dt"||r.tagName==="dd"))}function rz(t,e,n){const r=Vt(n,e);return!r||r.type==="element"&&(r.tagName==="dt"||r.tagName==="dd")}function r1(t,e,n){const r=Vt(n,e);return!r||r.type==="element"&&(r.tagName==="rp"||r.tagName==="rt")}function sz(t,e,n){const r=Vt(n,e);return!r||r.type==="element"&&r.tagName==="optgroup"}function iz(t,e,n){const r=Vt(n,e);return!r||r.type==="element"&&(r.tagName==="option"||r.tagName==="optgroup")}function az(t,e,n){const r=Vt(n,e);return!!(r&&r.type==="element"&&(r.tagName==="tbody"||r.tagName==="tfoot"))}function oz(t,e,n){const r=Vt(n,e);return!r||r.type==="element"&&(r.tagName==="tbody"||r.tagName==="tfoot")}function lz(t,e,n){return!Vt(n,e)}function cz(t,e,n){const r=Vt(n,e);return!r||r.type==="element"&&r.tagName==="tr"}function s1(t,e,n){const r=Vt(n,e);return!r||r.type==="element"&&(r.tagName==="td"||r.tagName==="th")}const uz=yE({body:hz,colgroup:pz,head:dz,html:fz,tbody:mz});function fz(t){const e=Vt(t,-1);return!e||e.type!=="comment"}function dz(t){const e=new Set;for(const r of t.children)if(r.type==="element"&&(r.tagName==="base"||r.tagName==="title")){if(e.has(r.tagName))return!1;e.add(r.tagName)}const n=t.children[0];return!n||n.type==="element"}function hz(t){const e=Vt(t,-1,!0);return!e||e.type!=="comment"&&!(e.type==="text"&&ad(e.value.charAt(0)))&&!(e.type==="element"&&(e.tagName==="meta"||e.tagName==="link"||e.tagName==="script"||e.tagName==="style"||e.tagName==="template"))}function pz(t,e,n){const r=mE(n,e),s=Vt(t,-1,!0);return n&&r&&r.type==="element"&&r.tagName==="colgroup"&&Dy(r,n.children.indexOf(r),n)?!1:!!(s&&s.type==="element"&&s.tagName==="col")}function mz(t,e,n){const r=mE(n,e),s=Vt(t,-1);return n&&r&&r.type==="element"&&(r.tagName==="thead"||r.tagName==="tbody")&&Dy(r,n.children.indexOf(r),n)?!1:!!(s&&s.type==="element"&&s.tagName==="tr")}const Nu={name:[[`	
\f\r &/=>`.split(""),`	
\f\r "&'/=>\``.split("")],[`\0	
\f\r "&'/<=>`.split(""),`\0	
\f\r "&'/<=>\``.split("")]],unquoted:[[`	
\f\r &>`.split(""),`\0	
\f\r "&'<=>\``.split("")],[`\0	
\f\r "&'<=>\``.split(""),`\0	
\f\r "&'<=>\``.split("")]],single:[["&'".split(""),"\"&'`".split("")],["\0&'".split(""),"\0\"&'`".split("")]],double:[['"&'.split(""),"\"&'`".split("")],['\0"&'.split(""),"\0\"&'`".split("")]]};function gz(t,e,n,r){const s=r.schema,a=s.space==="svg"?!1:r.settings.omitOptionalTags;let l=s.space==="svg"?r.settings.closeEmptyElements:r.settings.voids.includes(t.tagName.toLowerCase());const u=[];let f;s.space==="html"&&t.tagName==="svg"&&(r.schema=sc);const d=yz(r,t.properties),m=r.all(s.space==="html"&&t.tagName==="template"?t.content:t);return r.schema=s,m&&(l=!1),(d||!a||!uz(t,e,n))&&(u.push("<",t.tagName,d?" "+d:""),l&&(s.space==="svg"||r.settings.closeSelfClosing)&&(f=d.charAt(d.length-1),(!r.settings.tightSelfClosing||f==="/"||f&&f!=='"'&&f!=="'")&&u.push(" "),u.push("/")),u.push(">")),u.push(m),!l&&(!a||!Dy(t,e,n))&&u.push("</"+t.tagName+">"),u.join("")}function yz(t,e){const n=[];let r=-1,s;if(e){for(s in e)if(e[s]!==null&&e[s]!==void 0){const a=bz(t,s,e[s]);a&&n.push(a)}}for(;++r<n.length;){const a=t.settings.tightAttributes?n[r].charAt(n[r].length-1):void 0;r!==n.length-1&&a!=='"'&&a!=="'"&&(n[r]+=" ")}return n.join("")}function bz(t,e,n){const r=uE(t.schema,e),s=t.settings.allowParseErrors&&t.schema.space==="html"?0:1,a=t.settings.allowDangerousCharacters?0:1;let l=t.quote,u;if(r.overloadedBoolean&&(n===r.attribute||n==="")?n=!0:(r.boolean||r.overloadedBoolean)&&(typeof n!="string"||n===r.attribute||n==="")&&(n=!!n),n==null||n===!1||typeof n=="number"&&Number.isNaN(n))return"";const f=Fa(r.attribute,Object.assign({},t.settings.characterReferences,{subset:Nu.name[s][a]}));return n===!0||(n=Array.isArray(n)?(r.commaSeparated?hE:pE)(n,{padLeft:!t.settings.tightCommaSeparatedLists}):String(n),t.settings.collapseEmptyAttributes&&!n)?f:(t.settings.preferUnquoted&&(u=Fa(n,Object.assign({},t.settings.characterReferences,{attribute:!0,subset:Nu.unquoted[s][a]}))),u!==n&&(t.settings.quoteSmart&&Nf(n,l)>Nf(n,t.alternative)&&(l=t.alternative),u=l+Fa(n,Object.assign({},t.settings.characterReferences,{subset:(l==="'"?Nu.single:Nu.double)[s][a],attribute:!0}))+l),f+(u&&"="+u))}const _z=["<","&"];function bE(t,e,n,r){return n&&n.type==="element"&&(n.tagName==="script"||n.tagName==="style")?t.value:Fa(t.value,Object.assign({},r.settings.characterReferences,{subset:_z}))}function vz(t,e,n,r){return r.settings.allowDangerousHtml?t.value:bE(t,e,n,r)}function xz(t,e,n,r){return r.all(t)}const wz=TL("type",{invalid:Sz,unknown:kz,handlers:{comment:KL,doctype:ZL,element:gz,raw:vz,root:xz,text:bE}});function Sz(t){throw new Error("Expected node, not `"+t+"`")}function kz(t){const e=t;throw new Error("Cannot compile unknown node `"+e.type+"`")}const Ez={},Cz={},Tz=[];function Az(t,e){const n=e||Ez,r=n.quote||'"',s=r==='"'?"'":'"';if(r!=='"'&&r!=="'")throw new Error("Invalid quote `"+r+"`, expected `'` or `\"`");return{one:Rz,all:Oz,settings:{omitOptionalTags:n.omitOptionalTags||!1,allowParseErrors:n.allowParseErrors||!1,allowDangerousCharacters:n.allowDangerousCharacters||!1,quoteSmart:n.quoteSmart||!1,preferUnquoted:n.preferUnquoted||!1,tightAttributes:n.tightAttributes||!1,upperDoctype:n.upperDoctype||!1,tightDoctype:n.tightDoctype||!1,bogusComments:n.bogusComments||!1,tightCommaSeparatedLists:n.tightCommaSeparatedLists||!1,tightSelfClosing:n.tightSelfClosing||!1,collapseEmptyAttributes:n.collapseEmptyAttributes||!1,allowDangerousHtml:n.allowDangerousHtml||!1,voids:n.voids||bL,characterReferences:n.characterReferences||Cz,closeSelfClosing:n.closeSelfClosing||!1,closeEmptyElements:n.closeEmptyElements||!1},schema:n.space==="svg"?sc:fE,quote:r,alternative:s}.one(Array.isArray(t)?{type:"root",children:t}:t,void 0,void 0)}function Rz(t,e,n){return wz(t,e,n,this)}function Oz(t){const e=[],n=t&&t.children||Tz;let r=-1;for(;++r<n.length;)e[r]=this.one(n[r],r,t);return e.join("")}function If(t,e){const n=typeof t=="string"?{}:{...t.colorReplacements},r=typeof t=="string"?t:t.name;for(const[s,a]of Object.entries(e?.colorReplacements||{}))typeof a=="string"?n[s]=a:s===r&&Object.assign(n,a);return n}function Ys(t,e){return t&&(e?.[t?.toLowerCase()]||t)}function Nz(t){return Array.isArray(t)?t:[t]}async function _E(t){return Promise.resolve(typeof t=="function"?t():t).then(e=>e.default||e)}function jy(t){return!t||["plaintext","txt","text","plain"].includes(t)}function vE(t){return t==="ansi"||jy(t)}function Ly(t){return t==="none"}function xE(t){return Ly(t)}function wE(t,e){if(!e)return t;t.properties||={},t.properties.class||=[],typeof t.properties.class=="string"&&(t.properties.class=t.properties.class.split(/\s+/g)),Array.isArray(t.properties.class)||(t.properties.class=[]);const n=Array.isArray(e)?e:e.split(/\s+/g);for(const r of n)r&&!t.properties.class.includes(r)&&t.properties.class.push(r);return t}function od(t,e=!1){if(t.length===0)return[["",0]];const n=t.split(/(\r?\n)/g);let r=0;const s=[];for(let a=0;a<n.length;a+=2){const l=e?n[a]+(n[a+1]||""):n[a];s.push([l,r]),r+=n[a].length,r+=n[a+1]?.length||0}return s}function Iz(t){const e=od(t,!0).map(([s])=>s);function n(s){if(s===t.length)return{line:e.length-1,character:e[e.length-1].length};let a=s,l=0;for(const u of e){if(a<u.length)break;a-=u.length,l++}return{line:l,character:a}}function r(s,a){let l=0;for(let u=0;u<s;u++)l+=e[u].length;return l+=a,l}return{lines:e,indexToPos:n,posToIndex:r}}function Mz(t,e,n){const r=new Set;for(const a of t.matchAll(/:?lang=["']([^"']+)["']/g)){const l=a[1].toLowerCase().trim();l&&r.add(l)}for(const a of t.matchAll(/(?:```|~~~)([\w-]+)/g)){const l=a[1].toLowerCase().trim();l&&r.add(l)}for(const a of t.matchAll(/\\begin\{([\w-]+)\}/g)){const l=a[1].toLowerCase().trim();l&&r.add(l)}for(const a of t.matchAll(/<script\s+(?:type|lang)=["']([^"']+)["']/gi)){const l=a[1].toLowerCase().trim(),u=l.includes("/")?l.split("/").pop():l;u&&r.add(u)}if(!n)return Array.from(r);const s=n.getBundledLanguages();return Array.from(r).filter(a=>a&&s[a])}const zy="light-dark()",Dz=["color","background-color"];function jz(t,e){let n=0;const r=[];for(const s of e)s>n&&r.push({...t,content:t.content.slice(n,s),offset:t.offset+n}),n=s;return n<t.content.length&&r.push({...t,content:t.content.slice(n),offset:t.offset+n}),r}function Lz(t,e){const n=Array.from(e instanceof Set?e:new Set(e)).sort((r,s)=>r-s);return n.length?t.map(r=>r.flatMap(s=>{const a=n.filter(l=>s.offset<l&&l<s.offset+s.content.length).map(l=>l-s.offset).sort((l,u)=>l-u);return a.length?jz(s,a):s})):t}function zz(t,e,n,r,s="css-vars"){const a={content:t.content,explanation:t.explanation,offset:t.offset},l=e.map(m=>Mf(t.variants[m])),u=new Set(l.flatMap(m=>Object.keys(m))),f={},d=(m,p)=>{const y=p==="color"?"":p==="background-color"?"-bg":`-${p}`;return n+e[m]+(p==="color"?"":y)};return l.forEach((m,p)=>{for(const y of u){const g=m[y]||"inherit";if(p===0&&r&&Dz.includes(y))if(r===zy&&l.length>1){const v=e.findIndex(T=>T==="light"),x=e.findIndex(T=>T==="dark");if(v===-1||x===-1)throw new Lt('When using `defaultColor: "light-dark()"`, you must provide both `light` and `dark` themes');const E=l[v][y]||"inherit",S=l[x][y]||"inherit";f[y]=`light-dark(${E}, ${S})`,s==="css-vars"&&(f[d(p,y)]=g)}else f[y]=g;else s==="css-vars"&&(f[d(p,y)]=g)}}),a.htmlStyle=f,a}function Mf(t){const e={};if(t.color&&(e.color=t.color),t.bgColor&&(e["background-color"]=t.bgColor),t.fontStyle){t.fontStyle&_n.Italic&&(e["font-style"]="italic"),t.fontStyle&_n.Bold&&(e["font-weight"]="bold");const n=[];t.fontStyle&_n.Underline&&n.push("underline"),t.fontStyle&_n.Strikethrough&&n.push("line-through"),n.length&&(e["text-decoration"]=n.join(" "))}return e}function Rg(t){return typeof t=="string"?t:Object.entries(t).map(([e,n])=>`${e}:${n}`).join(";")}const SE=new WeakMap;function ld(t,e){SE.set(t,e)}function Hl(t){return SE.get(t)}class no{_stacks={};lang;get themes(){return Object.keys(this._stacks)}get theme(){return this.themes[0]}get _stack(){return this._stacks[this.theme]}static initial(e,n){return new no(Object.fromEntries(Nz(n).map(r=>[r,kg])),e)}constructor(...e){if(e.length===2){const[n,r]=e;this.lang=r,this._stacks=n}else{const[n,r,s]=e;this.lang=r,this._stacks={[s]:n}}}getInternalStack(e=this.theme){return this._stacks[e]}getScopes(e=this.theme){return Pz(this._stacks[e])}toJSON(){return{lang:this.lang,theme:this.theme,themes:this.themes,scopes:this.getScopes()}}}function Pz(t){const e=[],n=new Set;function r(s){if(n.has(s))return;n.add(s);const a=s?.nameScopesList?.scopeName;a&&e.push(a),s.parent&&r(s.parent)}return r(t),e}function Bz(t,e){if(!(t instanceof no))throw new Lt("Invalid grammar state");return t.getInternalStack(e)}function $z(){const t=new WeakMap;function e(n){if(!t.has(n.meta)){let r=function(l){if(typeof l=="number"){if(l<0||l>n.source.length)throw new Lt(`Invalid decoration offset: ${l}. Code length: ${n.source.length}`);return{...s.indexToPos(l),offset:l}}else{const u=s.lines[l.line];if(u===void 0)throw new Lt(`Invalid decoration position ${JSON.stringify(l)}. Lines length: ${s.lines.length}`);let f=l.character;if(f<0&&(f=u.length+f),f<0||f>u.length)throw new Lt(`Invalid decoration position ${JSON.stringify(l)}. Line ${l.line} length: ${u.length}`);return{...l,character:f,offset:s.posToIndex(l.line,f)}}};const s=Iz(n.source),a=(n.options.decorations||[]).map(l=>({...l,start:r(l.start),end:r(l.end)}));Uz(a),t.set(n.meta,{decorations:a,converter:s,source:n.source})}return t.get(n.meta)}return{name:"shiki:decorations",tokens(n){if(!this.options.decorations?.length)return;const s=e(this).decorations.flatMap(l=>[l.start.offset,l.end.offset]);return Lz(n,s)},code(n){if(!this.options.decorations?.length)return;const r=e(this),s=Array.from(n.children).filter(m=>m.type==="element"&&m.tagName==="span");if(s.length!==r.converter.lines.length)throw new Lt(`Number of lines in code element (${s.length}) does not match the number of lines in the source (${r.converter.lines.length}). Failed to apply decorations.`);function a(m,p,y,g){const v=s[m];let x="",E=-1,S=-1;if(p===0&&(E=0),y===0&&(S=0),y===Number.POSITIVE_INFINITY&&(S=v.children.length),E===-1||S===-1)for(let A=0;A<v.children.length;A++)x+=kE(v.children[A]),E===-1&&x.length===p&&(E=A+1),S===-1&&x.length===y&&(S=A+1);if(E===-1)throw new Lt(`Failed to find start index for decoration ${JSON.stringify(g.start)}`);if(S===-1)throw new Lt(`Failed to find end index for decoration ${JSON.stringify(g.end)}`);const T=v.children.slice(E,S);if(!g.alwaysWrap&&T.length===v.children.length)u(v,g,"line");else if(!g.alwaysWrap&&T.length===1&&T[0].type==="element")u(T[0],g,"token");else{const A={type:"element",tagName:"span",properties:{},children:T};u(A,g,"wrapper"),v.children.splice(E,T.length,A)}}function l(m,p){s[m]=u(s[m],p,"line")}function u(m,p,y){const g=p.properties||{},v=p.transform||(x=>x);return m.tagName=p.tagName||"span",m.properties={...m.properties,...g,class:m.properties.class},p.properties?.class&&wE(m,p.properties.class),m=v(m,y)||m,m}const f=[],d=r.decorations.sort((m,p)=>p.start.offset-m.start.offset||m.end.offset-p.end.offset);for(const m of d){const{start:p,end:y}=m;if(p.line===y.line)a(p.line,p.character,y.character,m);else if(p.line<y.line){a(p.line,p.character,Number.POSITIVE_INFINITY,m);for(let g=p.line+1;g<y.line;g++)f.unshift(()=>l(g,m));a(y.line,0,y.character,m)}}f.forEach(m=>m())}}}function Uz(t){for(let e=0;e<t.length;e++){const n=t[e];if(n.start.offset>n.end.offset)throw new Lt(`Invalid decoration range: ${JSON.stringify(n.start)} - ${JSON.stringify(n.end)}`);for(let r=e+1;r<t.length;r++){const s=t[r],a=n.start.offset<=s.start.offset&&s.start.offset<n.end.offset,l=n.start.offset<s.end.offset&&s.end.offset<=n.end.offset,u=s.start.offset<=n.start.offset&&n.start.offset<s.end.offset,f=s.start.offset<n.end.offset&&n.end.offset<=s.end.offset;if(a||l||u||f){if(a&&l||u&&f||u&&n.start.offset===n.end.offset||l&&s.start.offset===s.end.offset)continue;throw new Lt(`Decorations ${JSON.stringify(n.start)} and ${JSON.stringify(s.start)} intersect.`)}}}}function kE(t){return t.type==="text"?t.value:t.type==="element"?t.children.map(kE).join(""):""}const qz=[$z()];function Df(t){const e=Fz(t.transformers||[]);return[...e.pre,...e.normal,...e.post,...qz]}function Fz(t){const e=[],n=[],r=[];for(const s of t)switch(s.enforce){case"pre":e.push(s);break;case"post":n.push(s);break;default:r.push(s)}return{pre:e,post:n,normal:r}}var Ri=["black","red","green","yellow","blue","magenta","cyan","white","brightBlack","brightRed","brightGreen","brightYellow","brightBlue","brightMagenta","brightCyan","brightWhite"],hm={1:"bold",2:"dim",3:"italic",4:"underline",7:"reverse",8:"hidden",9:"strikethrough"};function Vz(t,e){const n=t.indexOf("\x1B",e);if(n!==-1&&t[n+1]==="["){const r=t.indexOf("m",n);if(r!==-1)return{sequence:t.substring(n+2,r).split(";"),startPosition:n,position:r+1}}return{position:t.length}}function i1(t){const e=t.shift();if(e==="2"){const n=t.splice(0,3).map(r=>Number.parseInt(r));return n.length!==3||n.some(r=>Number.isNaN(r))?void 0:{type:"rgb",rgb:n}}else if(e==="5"){const n=t.shift();if(n)return{type:"table",index:Number(n)}}}function Hz(t){const e=[];for(;t.length>0;){const n=t.shift();if(!n)continue;const r=Number.parseInt(n);if(!Number.isNaN(r))if(r===0)e.push({type:"resetAll"});else if(r<=9)hm[r]&&e.push({type:"setDecoration",value:hm[r]});else if(r<=29){const s=hm[r-20];s&&(e.push({type:"resetDecoration",value:s}),s==="dim"&&e.push({type:"resetDecoration",value:"bold"}))}else if(r<=37)e.push({type:"setForegroundColor",value:{type:"named",name:Ri[r-30]}});else if(r===38){const s=i1(t);s&&e.push({type:"setForegroundColor",value:s})}else if(r===39)e.push({type:"resetForegroundColor"});else if(r<=47)e.push({type:"setBackgroundColor",value:{type:"named",name:Ri[r-40]}});else if(r===48){const s=i1(t);s&&e.push({type:"setBackgroundColor",value:s})}else r===49?e.push({type:"resetBackgroundColor"}):r===53?e.push({type:"setDecoration",value:"overline"}):r===55?e.push({type:"resetDecoration",value:"overline"}):r>=90&&r<=97?e.push({type:"setForegroundColor",value:{type:"named",name:Ri[r-90+8]}}):r>=100&&r<=107&&e.push({type:"setBackgroundColor",value:{type:"named",name:Ri[r-100+8]}})}return e}function Gz(){let t=null,e=null,n=new Set;return{parse(r){const s=[];let a=0;do{const l=Vz(r,a),u=l.sequence?r.substring(a,l.startPosition):r.substring(a);if(u.length>0&&s.push({value:u,foreground:t,background:e,decorations:new Set(n)}),l.sequence){const f=Hz(l.sequence);for(const d of f)d.type==="resetAll"?(t=null,e=null,n.clear()):d.type==="resetForegroundColor"?t=null:d.type==="resetBackgroundColor"?e=null:d.type==="resetDecoration"&&n.delete(d.value);for(const d of f)d.type==="setForegroundColor"?t=d.value:d.type==="setBackgroundColor"?e=d.value:d.type==="setDecoration"&&n.add(d.value)}a=l.position}while(a<r.length);return s}}}var Kz={black:"#000000",red:"#bb0000",green:"#00bb00",yellow:"#bbbb00",blue:"#0000bb",magenta:"#ff00ff",cyan:"#00bbbb",white:"#eeeeee",brightBlack:"#555555",brightRed:"#ff5555",brightGreen:"#00ff00",brightYellow:"#ffff55",brightBlue:"#5555ff",brightMagenta:"#ff55ff",brightCyan:"#55ffff",brightWhite:"#ffffff"};function Zz(t=Kz){function e(u){return t[u]}function n(u){return`#${u.map(f=>Math.max(0,Math.min(f,255)).toString(16).padStart(2,"0")).join("")}`}let r;function s(){if(r)return r;r=[];for(let d=0;d<Ri.length;d++)r.push(e(Ri[d]));let u=[0,95,135,175,215,255];for(let d=0;d<6;d++)for(let m=0;m<6;m++)for(let p=0;p<6;p++)r.push(n([u[d],u[m],u[p]]));let f=8;for(let d=0;d<24;d++,f+=10)r.push(n([f,f,f]));return r}function a(u){return s()[u]}function l(u){switch(u.type){case"named":return e(u.name);case"rgb":return n(u.rgb);case"table":return a(u.index)}}return{value:l}}const Qz={black:"#000000",red:"#cd3131",green:"#0DBC79",yellow:"#E5E510",blue:"#2472C8",magenta:"#BC3FBC",cyan:"#11A8CD",white:"#E5E5E5",brightBlack:"#666666",brightRed:"#F14C4C",brightGreen:"#23D18B",brightYellow:"#F5F543",brightBlue:"#3B8EEA",brightMagenta:"#D670D6",brightCyan:"#29B8DB",brightWhite:"#FFFFFF"};function Jz(t,e,n){const r=If(t,n),s=od(e),a=Object.fromEntries(Ri.map(f=>{const d=`terminal.ansi${f[0].toUpperCase()}${f.substring(1)}`,m=t.colors?.[d];return[f,m||Qz[f]]})),l=Zz(a),u=Gz();return s.map(f=>u.parse(f[0]).map(d=>{let m,p;d.decorations.has("reverse")?(m=d.background?l.value(d.background):t.bg,p=d.foreground?l.value(d.foreground):t.fg):(m=d.foreground?l.value(d.foreground):t.fg,p=d.background?l.value(d.background):void 0),m=Ys(m,r),p=Ys(p,r),d.decorations.has("dim")&&(m=Yz(m));let y=_n.None;return d.decorations.has("bold")&&(y|=_n.Bold),d.decorations.has("italic")&&(y|=_n.Italic),d.decorations.has("underline")&&(y|=_n.Underline),d.decorations.has("strikethrough")&&(y|=_n.Strikethrough),{content:d.value,offset:f[1],color:m,bgColor:p,fontStyle:y}}))}function Yz(t){const e=t.match(/#([0-9a-f]{3,8})/i);if(e){const r=e[1];if(r.length===8){const s=Math.round(Number.parseInt(r.slice(6,8),16)/2).toString(16).padStart(2,"0");return`#${r.slice(0,6)}${s}`}else{if(r.length===6)return`#${r}80`;if(r.length===4){const s=r[0],a=r[1],l=r[2],u=r[3],f=Math.round(Number.parseInt(`${u}${u}`,16)/2).toString(16).padStart(2,"0");return`#${s}${s}${a}${a}${l}${l}${f}`}else if(r.length===3){const s=r[0],a=r[1],l=r[2];return`#${s}${s}${a}${a}${l}${l}80`}}}const n=t.match(/var\((--[\w-]+-ansi-[\w-]+)\)/);return n?`var(${n[1]}-dim)`:t}function Py(t,e,n={}){const{theme:r=t.getLoadedThemes()[0]}=n,s=t.resolveLangAlias(n.lang||"text");if(jy(s)||Ly(r))return od(e).map(f=>[{content:f[0],offset:f[1]}]);const{theme:a,colorMap:l}=t.setTheme(r);if(s==="ansi")return Jz(a,e,n);const u=t.getLanguage(n.lang||"text");if(n.grammarState){if(n.grammarState.lang!==u.name)throw new Lt(`Grammar state language "${n.grammarState.lang}" does not match highlight language "${u.name}"`);if(!n.grammarState.themes.includes(a.name))throw new Lt(`Grammar state themes "${n.grammarState.themes}" do not contain highlight theme "${a.name}"`)}return Wz(e,u,a,l,n)}function Xz(...t){if(t.length===2)return Hl(t[1]);const[e,n,r={}]=t,{lang:s="text",theme:a=e.getLoadedThemes()[0]}=r;if(jy(s)||Ly(a))throw new Lt("Plain language does not have grammar state");if(s==="ansi")throw new Lt("ANSI language does not have grammar state");const{theme:l,colorMap:u}=e.setTheme(a),f=e.getLanguage(s);return new no(By(n,f,l,u,r).stateStack,f.name,l.name)}function Wz(t,e,n,r,s){const a=By(t,e,n,r,s),l=new no(a.stateStack,e.name,n.name);return ld(a.tokens,l),a.tokens}function By(t,e,n,r,s){const a=If(n,s),{tokenizeMaxLineLength:l=0,tokenizeTimeLimit:u=500}=s,f=od(t);let d=s.grammarState?Bz(s.grammarState,n.name)??kg:s.grammarContextCode!=null?By(s.grammarContextCode,e,n,r,{...s,grammarState:void 0,grammarContextCode:void 0}).stateStack:kg,m=[];const p=[];for(let y=0,g=f.length;y<g;y++){const[v,x]=f[y];if(v===""){m=[],p.push([]);continue}if(l>0&&v.length>=l){m=[],p.push([{content:v,offset:x,color:"",fontStyle:0}]);continue}let E,S,T;s.includeExplanation&&(E=e.tokenizeLine(v,d,u),S=E.tokens,T=0);const A=e.tokenizeLine2(v,d,u),j=A.tokens.length/2;for(let D=0;D<j;D++){const I=A.tokens[2*D],P=D+1<j?A.tokens[2*D+2]:v.length;if(I===P)continue;const q=A.tokens[2*D+1],H=Ys(r[Qa.getForeground(q)],a),z=Qa.getFontStyle(q),Q={content:v.substring(I,P),offset:x+I,color:H,fontStyle:z};if(s.includeExplanation){const re=[];if(s.includeExplanation!=="scopeName")for(const X of n.settings){let V;switch(typeof X.scope){case"string":V=X.scope.split(/,/).map($=>$.trim());break;case"object":V=X.scope;break;default:continue}re.push({settings:X,selectors:V.map($=>$.split(/ /))})}Q.explanation=[];let pe=0;for(;I+pe<P;){const X=S[T],V=v.substring(X.startIndex,X.endIndex);pe+=V.length,Q.explanation.push({content:V,scopes:s.includeExplanation==="scopeName"?e5(X.scopes):t5(re,X.scopes)}),T+=1}}m.push(Q)}p.push(m),m=[],d=A.ruleStack}return{tokens:p,stateStack:d}}function e5(t){return t.map(e=>({scopeName:e}))}function t5(t,e){const n=[];for(let r=0,s=e.length;r<s;r++){const a=e[r];n[r]={scopeName:a,themeMatches:r5(t,a,e.slice(0,r))}}return n}function a1(t,e){return t===e||e.substring(0,t.length)===t&&e[t.length]==="."}function n5(t,e,n){if(!a1(t[t.length-1],e))return!1;let r=t.length-2,s=n.length-1;for(;r>=0&&s>=0;)a1(t[r],n[s])&&(r-=1),s-=1;return r===-1}function r5(t,e,n){const r=[];for(const{selectors:s,settings:a}of t)for(const l of s)if(n5(l,e,n)){r.push(a);break}return r}function EE(t,e,n){const r=Object.entries(n.themes).filter(f=>f[1]).map(f=>({color:f[0],theme:f[1]})),s=r.map(f=>{const d=Py(t,e,{...n,theme:f.theme}),m=Hl(d),p=typeof f.theme=="string"?f.theme:f.theme.name;return{tokens:d,state:m,theme:p}}),a=s5(...s.map(f=>f.tokens)),l=a[0].map((f,d)=>f.map((m,p)=>{const y={content:m.content,variants:{},offset:m.offset};return"includeExplanation"in n&&n.includeExplanation&&(y.explanation=m.explanation),a.forEach((g,v)=>{const{content:x,explanation:E,offset:S,...T}=g[d][p];y.variants[r[v].color]=T}),y})),u=s[0].state?new no(Object.fromEntries(s.map(f=>[f.theme,f.state?.getInternalStack(f.theme)])),s[0].state.lang):void 0;return u&&ld(l,u),l}function s5(...t){const e=t.map(()=>[]),n=t.length;for(let r=0;r<t[0].length;r++){const s=t.map(f=>f[r]),a=e.map(()=>[]);e.forEach((f,d)=>f.push(a[d]));const l=s.map(()=>0),u=s.map(f=>f[0]);for(;u.every(f=>f);){const f=Math.min(...u.map(d=>d.content.length));for(let d=0;d<n;d++){const m=u[d];m.content.length===f?(a[d].push(m),l[d]+=1,u[d]=s[d][l[d]]):(a[d].push({...m,content:m.content.slice(0,f)}),u[d]={...m,content:m.content.slice(f),offset:m.offset+f})}}}return e}function jf(t,e,n){let r,s,a,l,u,f;if("themes"in n){const{defaultColor:d="light",cssVariablePrefix:m="--shiki-",colorsRendering:p="css-vars"}=n,y=Object.entries(n.themes).filter(S=>S[1]).map(S=>({color:S[0],theme:S[1]})).sort((S,T)=>S.color===d?-1:T.color===d?1:0);if(y.length===0)throw new Lt("`themes` option must not be empty");const g=EE(t,e,n);if(f=Hl(g),d&&zy!==d&&!y.find(S=>S.color===d))throw new Lt(`\`themes\` option must contain the defaultColor key \`${d}\``);const v=y.map(S=>t.getTheme(S.theme)),x=y.map(S=>S.color);a=g.map(S=>S.map(T=>zz(T,x,m,d,p))),f&&ld(a,f);const E=y.map(S=>If(S.theme,n));s=o1(y,v,E,m,d,"fg",p),r=o1(y,v,E,m,d,"bg",p),l=`shiki-themes ${v.map(S=>S.name).join(" ")}`,u=d?void 0:[s,r].join(";")}else if("theme"in n){const d=If(n.theme,n);a=Py(t,e,n);const m=t.getTheme(n.theme);r=Ys(m.bg,d),s=Ys(m.fg,d),l=m.name,f=Hl(a)}else throw new Lt("Invalid options, either `theme` or `themes` must be provided");return{tokens:a,fg:s,bg:r,themeName:l,rootStyle:u,grammarState:f}}function o1(t,e,n,r,s,a,l){return t.map((u,f)=>{const d=Ys(e[f][a],n[f])||"inherit",m=`${r+u.color}${a==="bg"?"-bg":""}:${d}`;if(f===0&&s){if(s===zy&&t.length>1){const p=t.findIndex(x=>x.color==="light"),y=t.findIndex(x=>x.color==="dark");if(p===-1||y===-1)throw new Lt('When using `defaultColor: "light-dark()"`, you must provide both `light` and `dark` themes');const g=Ys(e[p][a],n[p])||"inherit",v=Ys(e[y][a],n[y])||"inherit";return`light-dark(${g}, ${v});${m}`}return d}return l==="css-vars"?m:null}).filter(u=>!!u).join(";")}function Lf(t,e,n,r={meta:{},options:n,codeToHast:(s,a)=>Lf(t,s,a),codeToTokens:(s,a)=>jf(t,s,a)}){let s=e;for(const v of Df(n))s=v.preprocess?.call(r,s,n)||s;let{tokens:a,fg:l,bg:u,themeName:f,rootStyle:d,grammarState:m}=jf(t,s,n);const{mergeWhitespaces:p=!0,mergeSameStyleTokens:y=!1}=n;p===!0?a=a5(a):p==="never"&&(a=o5(a)),y&&(a=l5(a));const g={...r,get source(){return s}};for(const v of Df(n))a=v.tokens?.call(g,a)||a;return i5(a,{...n,fg:l,bg:u,themeName:f,rootStyle:n.rootStyle===!1?!1:n.rootStyle??d},g,m)}function i5(t,e,n,r=Hl(t)){const s=Df(e),a=[],l={type:"root",children:[]},{structure:u="classic",tabindex:f="0"}=e,d={class:`shiki ${e.themeName||""}`};e.rootStyle!==!1&&(e.rootStyle!=null?d.style=e.rootStyle:d.style=`background-color:${e.bg};color:${e.fg}`),f!==!1&&f!=null&&(d.tabindex=f.toString());for(const[x,E]of Object.entries(e.meta||{}))x.startsWith("_")||(d[x]=E);let m={type:"element",tagName:"pre",properties:d,children:[]},p={type:"element",tagName:"code",properties:{},children:a};const y=[],g={...n,structure:u,addClassToHast:wE,get source(){return n.source},get tokens(){return t},get options(){return e},get root(){return l},get pre(){return m},get code(){return p},get lines(){return y}};if(t.forEach((x,E)=>{E&&(u==="inline"?l.children.push({type:"element",tagName:"br",properties:{},children:[]}):u==="classic"&&a.push({type:"text",value:`
`}));let S={type:"element",tagName:"span",properties:{class:"line"},children:[]},T=0;for(const A of x){let j={type:"element",tagName:"span",properties:{...A.htmlAttrs},children:[{type:"text",value:A.content}]};const D=Rg(A.htmlStyle||Mf(A));D&&(j.properties.style=D);for(const I of s)j=I?.span?.call(g,j,E+1,T,S,A)||j;u==="inline"?l.children.push(j):u==="classic"&&S.children.push(j),T+=A.content.length}if(u==="classic"){for(const A of s)S=A?.line?.call(g,S,E+1)||S;y.push(S),a.push(S)}else u==="inline"&&y.push(S)}),u==="classic"){for(const x of s)p=x?.code?.call(g,p)||p;m.children.push(p);for(const x of s)m=x?.pre?.call(g,m)||m;l.children.push(m)}else if(u==="inline"){const x=[];let E={type:"element",tagName:"span",properties:{class:"line"},children:[]};for(const A of l.children)A.type==="element"&&A.tagName==="br"?(x.push(E),E={type:"element",tagName:"span",properties:{class:"line"},children:[]}):(A.type==="element"||A.type==="text")&&E.children.push(A);x.push(E);let T={type:"element",tagName:"code",properties:{},children:x};for(const A of s)T=A?.code?.call(g,T)||T;l.children=[];for(let A=0;A<T.children.length;A++){A>0&&l.children.push({type:"element",tagName:"br",properties:{},children:[]});const j=T.children[A];j.type==="element"&&l.children.push(...j.children)}}let v=l;for(const x of s)v=x?.root?.call(g,v)||v;return r&&ld(v,r),v}function a5(t){return t.map(e=>{const n=[];let r="",s;return e.forEach((a,l)=>{const f=!(a.fontStyle&&(a.fontStyle&_n.Underline||a.fontStyle&_n.Strikethrough));f&&a.content.match(/^\s+$/)&&e[l+1]?(s===void 0&&(s=a.offset),r+=a.content):r?(f?n.push({...a,offset:s,content:r+a.content}):n.push({content:r,offset:s},a),s=void 0,r=""):n.push(a)}),n})}function o5(t){return t.map(e=>e.flatMap(n=>{if(n.content.match(/^\s+$/))return n;const r=n.content.match(/^(\s*)(.*?)(\s*)$/);if(!r)return n;const[,s,a,l]=r;if(!s&&!l)return n;const u=[{...n,offset:n.offset+s.length,content:a}];return s&&u.unshift({content:s,offset:n.offset}),l&&u.push({content:l,offset:n.offset+s.length+a.length}),u}))}function l5(t){return t.map(e=>{const n=[];for(const r of e){if(n.length===0){n.push({...r});continue}const s=n[n.length-1],a=Rg(s.htmlStyle||Mf(s)),l=Rg(r.htmlStyle||Mf(r)),u=s.fontStyle&&(s.fontStyle&_n.Underline||s.fontStyle&_n.Strikethrough),f=r.fontStyle&&(r.fontStyle&_n.Underline||r.fontStyle&_n.Strikethrough);!u&&!f&&a===l?s.content+=r.content:n.push({...r})}return n})}const c5=Az;function u5(t,e,n){const r={meta:{},options:n,codeToHast:(a,l)=>Lf(t,a,l),codeToTokens:(a,l)=>jf(t,a,l)};let s=c5(Lf(t,e,n,r));for(const a of Df(n))s=a.postprocess?.call(r,s,n)||s;return s}const l1={light:"#333333",dark:"#bbbbbb"},c1={light:"#fffffe",dark:"#1e1e1e"},u1="__shiki_resolved";function $y(t){if(t?.[u1])return t;const e={...t};e.tokenColors&&!e.settings&&(e.settings=e.tokenColors,delete e.tokenColors),e.type||="dark",e.colorReplacements={...e.colorReplacements},e.settings||=[];let{bg:n,fg:r}=e;if(!n||!r){const u=e.settings?e.settings.find(f=>!f.name&&!f.scope):void 0;u?.settings?.foreground&&(r=u.settings.foreground),u?.settings?.background&&(n=u.settings.background),!r&&e?.colors?.["editor.foreground"]&&(r=e.colors["editor.foreground"]),!n&&e?.colors?.["editor.background"]&&(n=e.colors["editor.background"]),r||(r=e.type==="light"?l1.light:l1.dark),n||(n=e.type==="light"?c1.light:c1.dark),e.fg=r,e.bg=n}e.settings[0]&&e.settings[0].settings&&!e.settings[0].scope||e.settings.unshift({settings:{foreground:e.fg,background:e.bg}});let s=0;const a=new Map;function l(u){if(a.has(u))return a.get(u);s+=1;const f=`#${s.toString(16).padStart(8,"0").toLowerCase()}`;return e.colorReplacements?.[`#${f}`]?l(u):(a.set(u,f),f)}e.settings=e.settings.map(u=>{const f=u.settings?.foreground&&!u.settings.foreground.startsWith("#"),d=u.settings?.background&&!u.settings.background.startsWith("#");if(!f&&!d)return u;const m={...u,settings:{...u.settings}};if(f){const p=l(u.settings.foreground);e.colorReplacements[p]=u.settings.foreground,m.settings.foreground=p}if(d){const p=l(u.settings.background);e.colorReplacements[p]=u.settings.background,m.settings.background=p}return m});for(const u of Object.keys(e.colors||{}))if((u==="editor.foreground"||u==="editor.background"||u.startsWith("terminal.ansi"))&&!e.colors[u]?.startsWith("#")){const f=l(e.colors[u]);e.colorReplacements[f]=e.colors[u],e.colors[u]=f}return Object.defineProperty(e,u1,{enumerable:!1,writable:!1,value:!0}),e}async function CE(t){return Array.from(new Set((await Promise.all(t.filter(e=>!vE(e)).map(async e=>await _E(e).then(n=>Array.isArray(n)?n:[n])))).flat()))}async function TE(t){return(await Promise.all(t.map(async n=>xE(n)?null:$y(await _E(n))))).filter(n=>!!n)}let f5=3;function d5(t,e=3){e>f5||console.trace(`[SHIKI DEPRECATE]: ${t}`)}let Pa=class extends Error{constructor(e){super(e),this.name="ShikiError"}};function AE(t,e){if(!e)return t;if(e[t]){const n=new Set([t]);for(;e[t];){if(t=e[t],n.has(t))throw new Pa(`Circular alias \`${Array.from(n).join(" -> ")} -> ${t}\``);n.add(t)}}return t}class h5 extends yL{constructor(e,n,r,s={}){super(e),this._resolver=e,this._themes=n,this._langs=r,this._alias=s,this._themes.map(a=>this.loadTheme(a)),this.loadLanguages(this._langs)}_resolvedThemes=new Map;_resolvedGrammars=new Map;_langMap=new Map;_langGraph=new Map;_textmateThemeCache=new WeakMap;_loadedThemesCache=null;_loadedLanguagesCache=null;getTheme(e){return typeof e=="string"?this._resolvedThemes.get(e):this.loadTheme(e)}loadTheme(e){const n=$y(e);return n.name&&(this._resolvedThemes.set(n.name,n),this._loadedThemesCache=null),n}getLoadedThemes(){return this._loadedThemesCache||(this._loadedThemesCache=[...this._resolvedThemes.keys()]),this._loadedThemesCache}setTheme(e){let n=this._textmateThemeCache.get(e);n||(n=Cf.createFromRawTheme(e),this._textmateThemeCache.set(e,n)),this._syncRegistry.setTheme(n)}getGrammar(e){return e=AE(e,this._alias),this._resolvedGrammars.get(e)}loadLanguage(e){if(this.getGrammar(e.name))return;const n=new Set([...this._langMap.values()].filter(a=>a.embeddedLangsLazy?.includes(e.name)));this._resolver.addLanguage(e);const r={balancedBracketSelectors:e.balancedBracketSelectors||["*"],unbalancedBracketSelectors:e.unbalancedBracketSelectors||[]};this._syncRegistry._rawGrammars.set(e.scopeName,e);const s=this.loadGrammarWithConfiguration(e.scopeName,1,r);if(s.name=e.name,this._resolvedGrammars.set(e.name,s),e.aliases&&e.aliases.forEach(a=>{this._alias[a]=e.name}),this._loadedLanguagesCache=null,n.size)for(const a of n)this._resolvedGrammars.delete(a.name),this._loadedLanguagesCache=null,this._syncRegistry?._injectionGrammars?.delete(a.scopeName),this._syncRegistry?._grammars?.delete(a.scopeName),this.loadLanguage(this._langMap.get(a.name))}dispose(){super.dispose(),this._resolvedThemes.clear(),this._resolvedGrammars.clear(),this._langMap.clear(),this._langGraph.clear(),this._loadedThemesCache=null}loadLanguages(e){for(const s of e)this.resolveEmbeddedLanguages(s);const n=Array.from(this._langGraph.entries()),r=n.filter(([s,a])=>!a);if(r.length){const s=n.filter(([a,l])=>l?(l.embeddedLanguages||l.embeddedLangs)?.some(f=>r.map(([d])=>d).includes(f)):!1).filter(a=>!r.includes(a));throw new Pa(`Missing languages ${r.map(([a])=>`\`${a}\``).join(", ")}, required by ${s.map(([a])=>`\`${a}\``).join(", ")}`)}for(const[s,a]of n)this._resolver.addLanguage(a);for(const[s,a]of n)this.loadLanguage(a)}getLoadedLanguages(){return this._loadedLanguagesCache||(this._loadedLanguagesCache=[...new Set([...this._resolvedGrammars.keys(),...Object.keys(this._alias)])]),this._loadedLanguagesCache}resolveEmbeddedLanguages(e){this._langMap.set(e.name,e),this._langGraph.set(e.name,e);const n=e.embeddedLanguages??e.embeddedLangs;if(n)for(const r of n)this._langGraph.set(r,this._langMap.get(r))}}class p5{_langs=new Map;_scopeToLang=new Map;_injections=new Map;_onigLib;constructor(e,n){this._onigLib={createOnigScanner:r=>e.createScanner(r),createOnigString:r=>e.createString(r)},n.forEach(r=>this.addLanguage(r))}get onigLib(){return this._onigLib}getLangRegistration(e){return this._langs.get(e)}loadGrammar(e){return this._scopeToLang.get(e)}addLanguage(e){this._langs.set(e.name,e),e.aliases&&e.aliases.forEach(n=>{this._langs.set(n,e)}),this._scopeToLang.set(e.scopeName,e),e.injectTo&&e.injectTo.forEach(n=>{this._injections.get(n)||this._injections.set(n,[]),this._injections.get(n).push(e.scopeName)})}getInjections(e){const n=e.split(".");let r=[];for(let s=1;s<=n.length;s++){const a=n.slice(0,s).join(".");r=[...r,...this._injections.get(a)||[]]}return r}}let nl=0;function m5(t){nl+=1,t.warnings!==!1&&nl>=10&&nl%10===0&&console.warn(`[Shiki] ${nl} instances have been created. Shiki is supposed to be used as a singleton, consider refactoring your code to cache your highlighter instance; Or call \`highlighter.dispose()\` to release unused instances.`);let e=!1;if(!t.engine)throw new Pa("`engine` option is required for synchronous mode");const n=(t.langs||[]).flat(1),r=(t.themes||[]).flat(1).map($y),s=new p5(t.engine,n),a=new h5(s,r,n,t.langAlias);let l;function u(A){return AE(A,t.langAlias)}function f(A){S();const j=a.getGrammar(typeof A=="string"?A:A.name);if(!j)throw new Pa(`Language \`${A}\` not found, you may need to load it first`);return j}function d(A){if(A==="none")return{bg:"",fg:"",name:"none",settings:[],type:"dark"};S();const j=a.getTheme(A);if(!j)throw new Pa(`Theme \`${A}\` not found, you may need to load it first`);return j}function m(A){S();const j=d(A);l!==A&&(a.setTheme(j),l=A);const D=a.getColorMap();return{theme:j,colorMap:D}}function p(){return S(),a.getLoadedThemes()}function y(){return S(),a.getLoadedLanguages()}function g(...A){S(),a.loadLanguages(A.flat(1))}async function v(...A){return g(await CE(A))}function x(...A){S();for(const j of A.flat(1))a.loadTheme(j)}async function E(...A){return S(),x(await TE(A))}function S(){if(e)throw new Pa("Shiki instance has been disposed")}function T(){e||(e=!0,a.dispose(),nl-=1)}return{setTheme:m,getTheme:d,getLanguage:f,getLoadedThemes:p,getLoadedLanguages:y,resolveLangAlias:u,loadLanguage:v,loadLanguageSync:g,loadTheme:E,loadThemeSync:x,dispose:T,[Symbol.dispose]:T}}async function g5(t){t.engine||d5("`engine` option is required. Use `createOnigurumaEngine` or `createJavaScriptRegexEngine` to create an engine.");const[e,n,r]=await Promise.all([TE(t.themes||[]),CE(t.langs||[]),t.engine]);return m5({...t,themes:e,langs:n,engine:r})}async function y5(t){const e=await g5(t);return{getLastGrammarState:(...n)=>Xz(e,...n),codeToTokensBase:(n,r)=>Py(e,n,r),codeToTokensWithThemes:(n,r)=>EE(e,n,r),codeToTokens:(n,r)=>jf(e,n,r),codeToHast:(n,r)=>Lf(e,n,r),codeToHtml:(n,r)=>u5(e,n,r),getBundledLanguages:()=>({}),getBundledThemes:()=>({}),...e,getInternalContext:()=>e}}function b5(t){const e=t.langs,n=t.themes,r=t.engine;async function s(a){function l(p){if(typeof p=="string"){if(p=a.langAlias?.[p]||p,vE(p))return[];const y=e[p];if(!y)throw new Lt(`Language \`${p}\` is not included in this bundle. You may want to load it from external source.`);return y}return p}function u(p){if(xE(p))return"none";if(typeof p=="string"){const y=n[p];if(!y)throw new Lt(`Theme \`${p}\` is not included in this bundle. You may want to load it from external source.`);return y}return p}const f=(a.themes??[]).map(p=>u(p)),d=(a.langs??[]).map(p=>l(p)),m=await y5({engine:a.engine??r(),...a,themes:f,langs:d});return{...m,loadLanguage(...p){return m.loadLanguage(...p.map(l))},loadTheme(...p){return m.loadTheme(...p.map(u))},getBundledLanguages(){return e},getBundledThemes(){return n}}}return s}function _5(t){let e;async function n(r={}){if(e){const s=await e;return await Promise.all([s.loadTheme(...r.themes||[]),s.loadLanguage(...r.langs||[])]),s}else{e=t({...r,themes:[],langs:[]});const s=await e;return await Promise.all([s.loadTheme(...r.themes||[]),s.loadLanguage(...r.langs||[])]),s}}return n}function v5(t,e){const n=_5(t);async function r(s,a){const l=await n({langs:[a.lang],themes:"theme"in a?[a.theme]:Object.values(a.themes)}),u=await e?.guessEmbeddedLanguages?.(s,a.lang,l);return u&&await l.loadLanguage(...u),l}return{getSingletonHighlighter(s){return n(s)},async codeToHtml(s,a){return(await r(s,a)).codeToHtml(s,a)},async codeToHast(s,a){return(await r(s,a)).codeToHast(s,a)},async codeToTokens(s,a){return(await r(s,a)).codeToTokens(s,a)},async codeToTokensBase(s,a){return(await r(s,a)).codeToTokensBase(s,a)},async codeToTokensWithThemes(s,a){return(await r(s,a)).codeToTokensWithThemes(s,a)},async getLastGrammarState(s,a){return(await n({langs:[a.lang],themes:[a.theme]})).getLastGrammarState(s,a)}}}const RE=[{id:"abap",name:"ABAP",import:(()=>L(()=>import("./abap-BdImnpbu.js"),[]))},{id:"actionscript-3",name:"ActionScript",import:(()=>L(()=>import("./actionscript-3-CfeIJUat.js"),[]))},{id:"ada",name:"Ada",import:(()=>L(()=>import("./ada-bCR0ucgS.js"),[]))},{id:"angular-html",name:"Angular HTML",import:(()=>L(()=>import("./angular-html-CU67Zn6k.js").then(t=>t.f),__vite__mapDeps([0,1,2,3])))},{id:"angular-ts",name:"Angular TypeScript",import:(()=>L(()=>import("./angular-ts-BwZT4LLn.js"),__vite__mapDeps([4,0,1,2,3,5])))},{id:"apache",name:"Apache Conf",import:(()=>L(()=>import("./apache-Pmp26Uib.js"),[]))},{id:"apex",name:"Apex",import:(()=>L(()=>import("./apex-DDbsPZ6N.js"),[]))},{id:"apl",name:"APL",import:(()=>L(()=>import("./apl-dKokRX4l.js"),__vite__mapDeps([6,1,2,3,7,8,9])))},{id:"applescript",name:"AppleScript",import:(()=>L(()=>import("./applescript-Co6uUVPk.js"),[]))},{id:"ara",name:"Ara",import:(()=>L(()=>import("./ara-BRHolxvo.js"),[]))},{id:"asciidoc",name:"AsciiDoc",aliases:["adoc"],import:(()=>L(()=>import("./asciidoc-Dv7Oe6Be.js"),[]))},{id:"asm",name:"Assembly",import:(()=>L(()=>import("./asm-D_Q5rh1f.js"),[]))},{id:"astro",name:"Astro",import:(()=>L(()=>import("./astro-CbQHKStN.js"),__vite__mapDeps([10,9,2,11,3,12,13])))},{id:"awk",name:"AWK",import:(()=>L(()=>import("./awk-DMzUqQB5.js"),[]))},{id:"ballerina",name:"Ballerina",import:(()=>L(()=>import("./ballerina-BFfxhgS-.js"),[]))},{id:"bat",name:"Batch File",aliases:["batch"],import:(()=>L(()=>import("./bat-BkioyH1T.js"),[]))},{id:"beancount",name:"Beancount",import:(()=>L(()=>import("./beancount-k_qm7-4y.js"),[]))},{id:"berry",name:"Berry",aliases:["be"],import:(()=>L(()=>import("./berry-uYugtg8r.js"),[]))},{id:"bibtex",name:"BibTeX",import:(()=>L(()=>import("./bibtex-CHM0blh-.js"),[]))},{id:"bicep",name:"Bicep",import:(()=>L(()=>import("./bicep-Bmn6On1c.js"),[]))},{id:"blade",name:"Blade",import:(()=>L(()=>import("./blade-DVc8C-J4.js"),__vite__mapDeps([14,15,1,2,3,7,8,16,9])))},{id:"bsl",name:"1C (Enterprise)",aliases:["1c"],import:(()=>L(()=>import("./bsl-BO_Y6i37.js"),__vite__mapDeps([17,18])))},{id:"c",name:"C",import:(()=>L(()=>import("./c-BIGW1oBm.js"),[]))},{id:"cadence",name:"Cadence",aliases:["cdc"],import:(()=>L(()=>import("./cadence-Bv_4Rxtq.js"),[]))},{id:"cairo",name:"Cairo",import:(()=>L(()=>import("./cairo-KRGpt6FW.js"),__vite__mapDeps([19,20])))},{id:"clarity",name:"Clarity",import:(()=>L(()=>import("./clarity-D53aC0YG.js"),[]))},{id:"clojure",name:"Clojure",aliases:["clj"],import:(()=>L(()=>import("./clojure-P80f7IUj.js"),[]))},{id:"cmake",name:"CMake",import:(()=>L(()=>import("./cmake-D1j8_8rp.js"),[]))},{id:"cobol",name:"COBOL",import:(()=>L(()=>import("./cobol-nwyudZeR.js"),__vite__mapDeps([21,1,2,3,8])))},{id:"codeowners",name:"CODEOWNERS",import:(()=>L(()=>import("./codeowners-Bp6g37R7.js"),[]))},{id:"codeql",name:"CodeQL",aliases:["ql"],import:(()=>L(()=>import("./codeql-DsOJ9woJ.js"),[]))},{id:"coffee",name:"CoffeeScript",aliases:["coffeescript"],import:(()=>L(()=>import("./coffee-Ch7k5sss.js"),__vite__mapDeps([22,2])))},{id:"common-lisp",name:"Common Lisp",aliases:["lisp"],import:(()=>L(()=>import("./common-lisp-Cg-RD9OK.js"),[]))},{id:"coq",name:"Coq",import:(()=>L(()=>import("./coq-DkFqJrB1.js"),[]))},{id:"cpp",name:"C++",aliases:["c++"],import:(()=>L(()=>import("./cpp-CofmeUqb.js"),__vite__mapDeps([23,24,25,26,16])))},{id:"crystal",name:"Crystal",import:(()=>L(()=>import("./crystal-tKQVLTB8.js"),__vite__mapDeps([27,1,2,3,16,26,28])))},{id:"csharp",name:"C#",aliases:["c#","cs"],import:(()=>L(()=>import("./csharp-K5feNrxe.js"),[]))},{id:"css",name:"CSS",import:(()=>L(()=>import("./css-DPfMkruS.js"),[]))},{id:"csv",name:"CSV",import:(()=>L(()=>import("./csv-fuZLfV_i.js"),[]))},{id:"cue",name:"CUE",import:(()=>L(()=>import("./cue-D82EKSYY.js"),[]))},{id:"cypher",name:"Cypher",aliases:["cql"],import:(()=>L(()=>import("./cypher-COkxafJQ.js"),[]))},{id:"d",name:"D",import:(()=>L(()=>import("./d-85-TOEBH.js"),[]))},{id:"dart",name:"Dart",import:(()=>L(()=>import("./dart-CF10PKvl.js"),[]))},{id:"dax",name:"DAX",import:(()=>L(()=>import("./dax-CEL-wOlO.js"),[]))},{id:"desktop",name:"Desktop",import:(()=>L(()=>import("./desktop-BmXAJ9_W.js"),[]))},{id:"diff",name:"Diff",import:(()=>L(()=>import("./diff-D97Zzqfu.js"),[]))},{id:"docker",name:"Dockerfile",aliases:["dockerfile"],import:(()=>L(()=>import("./docker-BcOcwvcX.js"),[]))},{id:"dotenv",name:"dotEnv",import:(()=>L(()=>import("./dotenv-Da5cRb03.js"),[]))},{id:"dream-maker",name:"Dream Maker",import:(()=>L(()=>import("./dream-maker-BtqSS_iP.js"),[]))},{id:"edge",name:"Edge",import:(()=>L(()=>import("./edge-BkV0erSs.js"),__vite__mapDeps([29,11,1,2,3,15])))},{id:"elixir",name:"Elixir",import:(()=>L(()=>import("./elixir-CDX3lj18.js"),__vite__mapDeps([30,1,2,3])))},{id:"elm",name:"Elm",import:(()=>L(()=>import("./elm-DbKCFpqz.js"),__vite__mapDeps([31,25,26])))},{id:"emacs-lisp",name:"Emacs Lisp",aliases:["elisp"],import:(()=>L(()=>import("./emacs-lisp-C9XAeP06.js"),[]))},{id:"erb",name:"ERB",import:(()=>L(()=>import("./erb-BOJIQeun.js"),__vite__mapDeps([32,1,2,3,33,34,7,8,16,35,11,36,13,23,24,25,26,28,37,38])))},{id:"erlang",name:"Erlang",aliases:["erl"],import:(()=>L(()=>import("./erlang-DsQrWhSR.js"),__vite__mapDeps([39,40])))},{id:"fennel",name:"Fennel",import:(()=>L(()=>import("./fennel-BYunw83y.js"),[]))},{id:"fish",name:"Fish",import:(()=>L(()=>import("./fish-BvzEVeQv.js"),[]))},{id:"fluent",name:"Fluent",aliases:["ftl"],import:(()=>L(()=>import("./fluent-C4IJs8-o.js"),[]))},{id:"fortran-fixed-form",name:"Fortran (Fixed Form)",aliases:["f","for","f77"],import:(()=>L(()=>import("./fortran-fixed-form-BZjJHVRy.js"),__vite__mapDeps([41,42])))},{id:"fortran-free-form",name:"Fortran (Free Form)",aliases:["f90","f95","f03","f08","f18"],import:(()=>L(()=>import("./fortran-free-form-D22FLkUw.js"),[]))},{id:"fsharp",name:"F#",aliases:["f#","fs"],import:(()=>L(()=>import("./fsharp-CXgrBDvD.js"),__vite__mapDeps([43,40])))},{id:"gdresource",name:"GDResource",import:(()=>L(()=>import("./gdresource-B7Tvp0Sc.js"),__vite__mapDeps([44,45,46])))},{id:"gdscript",name:"GDScript",import:(()=>L(()=>import("./gdscript-DTMYz4Jt.js"),[]))},{id:"gdshader",name:"GDShader",import:(()=>L(()=>import("./gdshader-DkwncUOv.js"),[]))},{id:"genie",name:"Genie",import:(()=>L(()=>import("./genie-D0YGMca9.js"),[]))},{id:"gherkin",name:"Gherkin",import:(()=>L(()=>import("./gherkin-DyxjwDmM.js"),[]))},{id:"git-commit",name:"Git Commit Message",import:(()=>L(()=>import("./git-commit-F4YmCXRG.js"),__vite__mapDeps([47,48])))},{id:"git-rebase",name:"Git Rebase Message",import:(()=>L(()=>import("./git-rebase-r7XF79zn.js"),__vite__mapDeps([49,28])))},{id:"gleam",name:"Gleam",import:(()=>L(()=>import("./gleam-BspZqrRM.js"),[]))},{id:"glimmer-js",name:"Glimmer JS",aliases:["gjs"],import:(()=>L(()=>import("./glimmer-js-Rg0-pVw9.js"),__vite__mapDeps([50,2,11,3,1])))},{id:"glimmer-ts",name:"Glimmer TS",aliases:["gts"],import:(()=>L(()=>import("./glimmer-ts-U6CK756n.js"),__vite__mapDeps([51,11,3,2,1])))},{id:"glsl",name:"GLSL",import:(()=>L(()=>import("./glsl-DplSGwfg.js"),__vite__mapDeps([25,26])))},{id:"gnuplot",name:"Gnuplot",import:(()=>L(()=>import("./gnuplot-DdkO51Og.js"),[]))},{id:"go",name:"Go",import:(()=>L(()=>import("./go-Dn2_MT6a.js"),[]))},{id:"graphql",name:"GraphQL",aliases:["gql"],import:(()=>L(()=>import("./graphql-ChdNCCLP.js"),__vite__mapDeps([35,2,11,36,13])))},{id:"groovy",name:"Groovy",import:(()=>L(()=>import("./groovy-gcz8RCvz.js"),[]))},{id:"hack",name:"Hack",import:(()=>L(()=>import("./hack-CaT9iCJl.js"),__vite__mapDeps([52,1,2,3,16])))},{id:"haml",name:"Ruby Haml",import:(()=>L(()=>import("./haml-B8DHNrY2.js"),__vite__mapDeps([34,2,3])))},{id:"handlebars",name:"Handlebars",aliases:["hbs"],import:(()=>L(()=>import("./handlebars-BL8al0AC.js"),__vite__mapDeps([53,1,2,3,38])))},{id:"haskell",name:"Haskell",aliases:["hs"],import:(()=>L(()=>import("./haskell-Df6bDoY_.js"),[]))},{id:"haxe",name:"Haxe",import:(()=>L(()=>import("./haxe-CzTSHFRz.js"),[]))},{id:"hcl",name:"HashiCorp HCL",import:(()=>L(()=>import("./hcl-BWvSN4gD.js"),[]))},{id:"hjson",name:"Hjson",import:(()=>L(()=>import("./hjson-D5-asLiD.js"),[]))},{id:"hlsl",name:"HLSL",import:(()=>L(()=>import("./hlsl-D3lLCCz7.js"),[]))},{id:"html",name:"HTML",import:(()=>L(()=>import("./html-GMplVEZG.js"),__vite__mapDeps([1,2,3])))},{id:"html-derivative",name:"HTML (Derivative)",import:(()=>L(()=>import("./html-derivative-BFtXZ54Q.js"),__vite__mapDeps([15,1,2,3])))},{id:"http",name:"HTTP",import:(()=>L(()=>import("./http-jrhK8wxY.js"),__vite__mapDeps([54,28,9,7,8,35,2,11,36,13])))},{id:"hurl",name:"Hurl",import:(()=>L(()=>import("./hurl-irOxFIW8.js"),__vite__mapDeps([55,35,2,11,36,13,7,8,56])))},{id:"hxml",name:"HXML",import:(()=>L(()=>import("./hxml-Bvhsp5Yf.js"),__vite__mapDeps([57,58])))},{id:"hy",name:"Hy",import:(()=>L(()=>import("./hy-DFXneXwc.js"),[]))},{id:"imba",name:"Imba",import:(()=>L(()=>import("./imba-DGztddWO.js"),[]))},{id:"ini",name:"INI",aliases:["properties"],import:(()=>L(()=>import("./ini-BEwlwnbL.js"),[]))},{id:"java",name:"Java",import:(()=>L(()=>import("./java-CylS5w8V.js"),[]))},{id:"javascript",name:"JavaScript",aliases:["js","cjs","mjs"],import:(()=>L(()=>import("./javascript-wDzz0qaB.js"),[]))},{id:"jinja",name:"Jinja",import:(()=>L(()=>import("./jinja-4LBKfQ-Z.js"),__vite__mapDeps([59,1,2,3])))},{id:"jison",name:"Jison",import:(()=>L(()=>import("./jison-wvAkD_A8.js"),__vite__mapDeps([60,2])))},{id:"json",name:"JSON",import:(()=>L(()=>import("./json-Cp-IABpG.js"),[]))},{id:"json5",name:"JSON5",import:(()=>L(()=>import("./json5-C9tS-k6U.js"),[]))},{id:"jsonc",name:"JSON with Comments",import:(()=>L(()=>import("./jsonc-Des-eS-w.js"),[]))},{id:"jsonl",name:"JSON Lines",import:(()=>L(()=>import("./jsonl-DcaNXYhu.js"),[]))},{id:"jsonnet",name:"Jsonnet",import:(()=>L(()=>import("./jsonnet-DFQXde-d.js"),[]))},{id:"jssm",name:"JSSM",aliases:["fsl"],import:(()=>L(()=>import("./jssm-C2t-YnRu.js"),[]))},{id:"jsx",name:"JSX",import:(()=>L(()=>import("./jsx-g9-lgVsj.js"),[]))},{id:"julia",name:"Julia",aliases:["jl"],import:(()=>L(()=>import("./julia-C8NyazO9.js"),__vite__mapDeps([61,23,24,25,26,16,20,2,62])))},{id:"kdl",name:"KDL",import:(()=>L(()=>import("./kdl-DV7GczEv.js"),[]))},{id:"kotlin",name:"Kotlin",aliases:["kt","kts"],import:(()=>L(()=>import("./kotlin-BdnUsdx6.js"),[]))},{id:"kusto",name:"Kusto",aliases:["kql"],import:(()=>L(()=>import("./kusto-BvAqAH-y.js"),[]))},{id:"latex",name:"LaTeX",import:(()=>L(()=>import("./latex-BdAV_C_H.js"),__vite__mapDeps([63,64,62])))},{id:"lean",name:"Lean 4",aliases:["lean4"],import:(()=>L(()=>import("./lean-Bc6EcWN3.js"),[]))},{id:"less",name:"Less",import:(()=>L(()=>import("./less-B1dDrJ26.js"),[]))},{id:"liquid",name:"Liquid",import:(()=>L(()=>import("./liquid-DYVedYrR.js"),__vite__mapDeps([65,1,2,3,9])))},{id:"llvm",name:"LLVM IR",import:(()=>L(()=>import("./llvm-BtvRca6l.js"),[]))},{id:"log",name:"Log file",import:(()=>L(()=>import("./log-2UxHyX5q.js"),[]))},{id:"logo",name:"Logo",import:(()=>L(()=>import("./logo-BtOb2qkB.js"),[]))},{id:"lua",name:"Lua",import:(()=>L(()=>import("./lua-BbnMAYS6.js"),__vite__mapDeps([37,26])))},{id:"luau",name:"Luau",import:(()=>L(()=>import("./luau-CXu1NL6O.js"),[]))},{id:"make",name:"Makefile",aliases:["makefile"],import:(()=>L(()=>import("./make-CHLpvVh8.js"),[]))},{id:"markdown",name:"Markdown",aliases:["md"],import:(()=>L(()=>import("./markdown-Cvjx9yec.js"),[]))},{id:"marko",name:"Marko",import:(()=>L(()=>import("./marko-CPi9NSCl.js"),__vite__mapDeps([66,3,67,5,11])))},{id:"matlab",name:"MATLAB",import:(()=>L(()=>import("./matlab-D7o27uSR.js"),[]))},{id:"mdc",name:"MDC",import:(()=>L(()=>import("./mdc-DUICxH0z.js"),__vite__mapDeps([68,40,38,15,1,2,3])))},{id:"mdx",name:"MDX",import:(()=>L(()=>import("./mdx-Cmh6b_Ma.js"),[]))},{id:"mermaid",name:"Mermaid",aliases:["mmd"],import:(()=>L(()=>import("./mermaid-DKYwYmdq.js"),[]))},{id:"mipsasm",name:"MIPS Assembly",aliases:["mips"],import:(()=>L(()=>import("./mipsasm-CKIfxQSi.js"),[]))},{id:"mojo",name:"Mojo",import:(()=>L(()=>import("./mojo-1DNp92w6.js"),[]))},{id:"move",name:"Move",import:(()=>L(()=>import("./move-Bu9oaDYs.js"),[]))},{id:"narrat",name:"Narrat Language",aliases:["nar"],import:(()=>L(()=>import("./narrat-DRg8JJMk.js"),[]))},{id:"nextflow",name:"Nextflow",aliases:["nf"],import:(()=>L(()=>import("./nextflow-BrzmwbiE.js"),[]))},{id:"nginx",name:"Nginx",import:(()=>L(()=>import("./nginx-DknmC5AR.js"),__vite__mapDeps([69,37,26])))},{id:"nim",name:"Nim",import:(()=>L(()=>import("./nim-CVrawwO9.js"),__vite__mapDeps([70,26,1,2,3,7,8,25,40])))},{id:"nix",name:"Nix",import:(()=>L(()=>import("./nix-c8nO5XWb.js"),[]))},{id:"nushell",name:"nushell",aliases:["nu"],import:(()=>L(()=>import("./nushell-C-sUppwS.js"),[]))},{id:"objective-c",name:"Objective-C",aliases:["objc"],import:(()=>L(()=>import("./objective-c-DXmwc3jG.js"),[]))},{id:"objective-cpp",name:"Objective-C++",import:(()=>L(()=>import("./objective-cpp-CLxacb5B.js"),[]))},{id:"ocaml",name:"OCaml",import:(()=>L(()=>import("./ocaml-C0hk2d4L.js"),[]))},{id:"openscad",name:"OpenSCAD",aliases:["scad"],import:(()=>L(()=>import("./openscad-C4EeE6gA.js"),[]))},{id:"pascal",name:"Pascal",import:(()=>L(()=>import("./pascal-D93ZcfNL.js"),[]))},{id:"perl",name:"Perl",import:(()=>L(()=>import("./perl-C0TMdlhV.js"),__vite__mapDeps([71,1,2,3,7,8,16])))},{id:"php",name:"PHP",import:(()=>L(()=>import("./php-CDn_0X-4.js"),__vite__mapDeps([72,1,2,3,7,8,16,9])))},{id:"pkl",name:"Pkl",import:(()=>L(()=>import("./pkl-u5AG7uiY.js"),[]))},{id:"plsql",name:"PL/SQL",import:(()=>L(()=>import("./plsql-ChMvpjG-.js"),[]))},{id:"po",name:"Gettext PO",aliases:["pot","potx"],import:(()=>L(()=>import("./po-BTJTHyun.js"),[]))},{id:"polar",name:"Polar",import:(()=>L(()=>import("./polar-C0HS_06l.js"),[]))},{id:"postcss",name:"PostCSS",import:(()=>L(()=>import("./postcss-CXtECtnM.js"),[]))},{id:"powerquery",name:"PowerQuery",import:(()=>L(()=>import("./powerquery-CEu0bR-o.js"),[]))},{id:"powershell",name:"PowerShell",aliases:["ps","ps1"],import:(()=>L(()=>import("./powershell-Dpen1YoG.js"),[]))},{id:"prisma",name:"Prisma",import:(()=>L(()=>import("./prisma-Dd19v3D-.js"),[]))},{id:"prolog",name:"Prolog",import:(()=>L(()=>import("./prolog-CbFg5uaA.js"),[]))},{id:"proto",name:"Protocol Buffer 3",aliases:["protobuf"],import:(()=>L(()=>import("./proto-DyJlTyXw.js"),[]))},{id:"pug",name:"Pug",aliases:["jade"],import:(()=>L(()=>import("./pug-CGlum2m_.js"),__vite__mapDeps([73,2,3,1])))},{id:"puppet",name:"Puppet",import:(()=>L(()=>import("./puppet-BMWR74SV.js"),[]))},{id:"purescript",name:"PureScript",import:(()=>L(()=>import("./purescript-CklMAg4u.js"),[]))},{id:"python",name:"Python",aliases:["py"],import:(()=>L(()=>import("./python-B6aJPvgy.js"),[]))},{id:"qml",name:"QML",import:(()=>L(()=>import("./qml-3beO22l8.js"),__vite__mapDeps([74,2])))},{id:"qmldir",name:"QML Directory",import:(()=>L(()=>import("./qmldir-C8lEn-DE.js"),[]))},{id:"qss",name:"Qt Style Sheets",import:(()=>L(()=>import("./qss-IeuSbFQv.js"),[]))},{id:"r",name:"R",import:(()=>L(()=>import("./r-DiinP2Uv.js"),[]))},{id:"racket",name:"Racket",import:(()=>L(()=>import("./racket-BqYA7rlc.js"),[]))},{id:"raku",name:"Raku",aliases:["perl6"],import:(()=>L(()=>import("./raku-DXvB9xmW.js"),[]))},{id:"razor",name:"ASP.NET Razor",import:(()=>L(()=>import("./razor-CE9lU5zL.js"),__vite__mapDeps([75,1,2,3,76])))},{id:"reg",name:"Windows Registry Script",import:(()=>L(()=>import("./reg-C-SQnVFl.js"),[]))},{id:"regexp",name:"RegExp",aliases:["regex"],import:(()=>L(()=>import("./regexp-CDVJQ6XC.js"),[]))},{id:"rel",name:"Rel",import:(()=>L(()=>import("./rel-C3B-1QV4.js"),[]))},{id:"riscv",name:"RISC-V",import:(()=>L(()=>import("./riscv-BM1_JUlF.js"),[]))},{id:"rosmsg",name:"ROS Interface",import:(()=>L(()=>import("./rosmsg-BJDFO7_C.js"),[]))},{id:"rst",name:"reStructuredText",import:(()=>L(()=>import("./rst-B0xPkSld.js"),__vite__mapDeps([77,15,1,2,3,23,24,25,26,16,20,28,38,78,33,34,7,8,35,11,36,13,37])))},{id:"ruby",name:"Ruby",aliases:["rb"],import:(()=>L(()=>import("./ruby-BvKwtOVI.js"),__vite__mapDeps([33,1,2,3,34,7,8,16,35,11,36,13,23,24,25,26,28,37,38])))},{id:"rust",name:"Rust",aliases:["rs"],import:(()=>L(()=>import("./rust-B1yitclQ.js"),[]))},{id:"sas",name:"SAS",import:(()=>L(()=>import("./sas-cz2c8ADy.js"),__vite__mapDeps([79,16])))},{id:"sass",name:"Sass",import:(()=>L(()=>import("./sass-Cj5Yp3dK.js"),[]))},{id:"scala",name:"Scala",import:(()=>L(()=>import("./scala-C151Ov-r.js"),[]))},{id:"scheme",name:"Scheme",import:(()=>L(()=>import("./scheme-C98Dy4si.js"),[]))},{id:"scss",name:"SCSS",import:(()=>L(()=>import("./scss-OYdSNvt2.js"),__vite__mapDeps([5,3])))},{id:"sdbl",name:"1C (Query)",aliases:["1c-query"],import:(()=>L(()=>import("./sdbl-DVxCFoDh.js"),[]))},{id:"shaderlab",name:"ShaderLab",aliases:["shader"],import:(()=>L(()=>import("./shaderlab-Dg9Lc6iA.js"),__vite__mapDeps([80,81])))},{id:"shellscript",name:"Shell",aliases:["bash","sh","shell","zsh"],import:(()=>L(()=>import("./shellscript-Yzrsuije.js"),[]))},{id:"shellsession",name:"Shell Session",aliases:["console"],import:(()=>L(()=>import("./shellsession-BADoaaVG.js"),__vite__mapDeps([82,28])))},{id:"smalltalk",name:"Smalltalk",import:(()=>L(()=>import("./smalltalk-BERRCDM3.js"),[]))},{id:"solidity",name:"Solidity",import:(()=>L(()=>import("./solidity-rGO070M0.js"),[]))},{id:"soy",name:"Closure Templates",aliases:["closure-templates"],import:(()=>L(()=>import("./soy-Brmx7dQM.js"),__vite__mapDeps([83,1,2,3])))},{id:"sparql",name:"SPARQL",import:(()=>L(()=>import("./sparql-rVzFXLq3.js"),__vite__mapDeps([84,85])))},{id:"splunk",name:"Splunk Query Language",aliases:["spl"],import:(()=>L(()=>import("./splunk-BtCnVYZw.js"),[]))},{id:"sql",name:"SQL",import:(()=>L(()=>import("./sql-BLtJtn59.js"),[]))},{id:"ssh-config",name:"SSH Config",import:(()=>L(()=>import("./ssh-config-_ykCGR6B.js"),[]))},{id:"stata",name:"Stata",import:(()=>L(()=>import("./stata-BH5u7GGu.js"),__vite__mapDeps([86,16])))},{id:"stylus",name:"Stylus",aliases:["styl"],import:(()=>L(()=>import("./stylus-BEDo0Tqx.js"),[]))},{id:"svelte",name:"Svelte",import:(()=>L(()=>import("./svelte-3Dk4HxPD.js"),__vite__mapDeps([87,2,11,3,12])))},{id:"swift",name:"Swift",import:(()=>L(()=>import("./swift-Dg5xB15N.js"),[]))},{id:"system-verilog",name:"SystemVerilog",import:(()=>L(()=>import("./system-verilog-CnnmHF94.js"),[]))},{id:"systemd",name:"Systemd Units",import:(()=>L(()=>import("./systemd-4A_iFExJ.js"),[]))},{id:"talonscript",name:"TalonScript",aliases:["talon"],import:(()=>L(()=>import("./talonscript-CkByrt1z.js"),[]))},{id:"tasl",name:"Tasl",import:(()=>L(()=>import("./tasl-QIJgUcNo.js"),[]))},{id:"tcl",name:"Tcl",import:(()=>L(()=>import("./tcl-dwOrl1Do.js"),[]))},{id:"templ",name:"Templ",import:(()=>L(()=>import("./templ-W15q3VgB.js"),__vite__mapDeps([88,89,2,3])))},{id:"terraform",name:"Terraform",aliases:["tf","tfvars"],import:(()=>L(()=>import("./terraform-BETggiCN.js"),[]))},{id:"tex",name:"TeX",import:(()=>L(()=>import("./tex-CxkMU7Pf.js"),__vite__mapDeps([64,62])))},{id:"toml",name:"TOML",import:(()=>L(()=>import("./toml-vGWfd6FD.js"),[]))},{id:"ts-tags",name:"TypeScript with Tags",aliases:["lit"],import:(()=>L(()=>import("./ts-tags-zn1MmPIZ.js"),__vite__mapDeps([90,11,3,2,25,26,1,16,7,8])))},{id:"tsv",name:"TSV",import:(()=>L(()=>import("./tsv-B_m7g4N7.js"),[]))},{id:"tsx",name:"TSX",import:(()=>L(()=>import("./tsx-COt5Ahok.js"),[]))},{id:"turtle",name:"Turtle",import:(()=>L(()=>import("./turtle-BsS91CYL.js"),[]))},{id:"twig",name:"Twig",import:(()=>L(()=>import("./twig-CO9l9SDP.js"),__vite__mapDeps([91,3,2,5,72,1,7,8,16,9,20,33,34,35,11,36,13,23,24,25,26,28,37,38])))},{id:"typescript",name:"TypeScript",aliases:["ts","cts","mts"],import:(()=>L(()=>import("./typescript-BPQ3VLAy.js"),[]))},{id:"typespec",name:"TypeSpec",aliases:["tsp"],import:(()=>L(()=>import("./typespec-BGHnOYBU.js"),[]))},{id:"typst",name:"Typst",aliases:["typ"],import:(()=>L(()=>import("./typst-DHCkPAjA.js"),[]))},{id:"v",name:"V",import:(()=>L(()=>import("./v-BcVCzyr7.js"),[]))},{id:"vala",name:"Vala",import:(()=>L(()=>import("./vala-CsfeWuGM.js"),[]))},{id:"vb",name:"Visual Basic",aliases:["cmd"],import:(()=>L(()=>import("./vb-D17OF-Vu.js"),[]))},{id:"verilog",name:"Verilog",import:(()=>L(()=>import("./verilog-BQ8w6xss.js"),[]))},{id:"vhdl",name:"VHDL",import:(()=>L(()=>import("./vhdl-CeAyd5Ju.js"),[]))},{id:"viml",name:"Vim Script",aliases:["vim","vimscript"],import:(()=>L(()=>import("./viml-CJc9bBzg.js"),[]))},{id:"vue",name:"Vue",import:(()=>L(()=>import("./vue-DnHKYNfI.js"),__vite__mapDeps([92,3,2,11,9,15,1])))},{id:"vue-html",name:"Vue HTML",import:(()=>L(()=>import("./vue-html-CChd_i61.js"),__vite__mapDeps([93,92,3,2,11,9,15,1])))},{id:"vue-vine",name:"Vue Vine",import:(()=>L(()=>import("./vue-vine-8moa0y9V.js"),__vite__mapDeps([94,3,5,67,95,12,92,2,11,9,15,1])))},{id:"vyper",name:"Vyper",aliases:["vy"],import:(()=>L(()=>import("./vyper-CDx5xZoG.js"),[]))},{id:"wasm",name:"WebAssembly",import:(()=>L(()=>import("./wasm-MzD3tlZU.js"),[]))},{id:"wenyan",name:"Wenyan",aliases:[""],import:(()=>L(()=>import("./wenyan-BV7otONQ.js"),[]))},{id:"wgsl",name:"WGSL",import:(()=>L(()=>import("./wgsl-Dx-B1_4e.js"),[]))},{id:"wikitext",name:"Wikitext",aliases:["mediawiki","wiki"],import:(()=>L(()=>import("./wikitext-BhOHFoWU.js"),[]))},{id:"wit",name:"WebAssembly Interface Types",import:(()=>L(()=>import("./wit-5i3qLPDT.js"),[]))},{id:"wolfram",name:"Wolfram",aliases:["wl"],import:(()=>L(()=>import("./wolfram-lXgVvXCa.js"),[]))},{id:"xml",name:"XML",import:(()=>L(()=>import("./xml-sdJ4AIDG.js"),__vite__mapDeps([7,8])))},{id:"xsl",name:"XSL",import:(()=>L(()=>import("./xsl-CtQFsRM5.js"),__vite__mapDeps([96,7,8])))},{id:"yaml",name:"YAML",aliases:["yml"],import:(()=>L(()=>import("./yaml-Buea-lGh.js"),[]))},{id:"zenscript",name:"ZenScript",import:(()=>L(()=>import("./zenscript-DVFEvuxE.js"),[]))},{id:"zig",name:"Zig",import:(()=>L(()=>import("./zig-VOosw3JB.js"),[]))}],x5=Object.fromEntries(RE.map(t=>[t.id,t.import])),w5=Object.fromEntries(RE.flatMap(t=>t.aliases?.map(e=>[e,t.import])||[])),S5={...x5,...w5},k5=[{id:"andromeeda",displayName:"Andromeeda",type:"dark",import:(()=>L(()=>import("./andromeeda-C-Jbm3Hp.js"),[]))},{id:"aurora-x",displayName:"Aurora X",type:"dark",import:(()=>L(()=>import("./aurora-x-D-2ljcwZ.js"),[]))},{id:"ayu-dark",displayName:"Ayu Dark",type:"dark",import:(()=>L(()=>import("./ayu-dark-Cv9koXgw.js"),[]))},{id:"catppuccin-frappe",displayName:"Catppuccin Frapp",type:"dark",import:(()=>L(()=>import("./catppuccin-frappe-DFWUc33u.js"),[]))},{id:"catppuccin-latte",displayName:"Catppuccin Latte",type:"light",import:(()=>L(()=>import("./catppuccin-latte-C9dUb6Cb.js"),[]))},{id:"catppuccin-macchiato",displayName:"Catppuccin Macchiato",type:"dark",import:(()=>L(()=>import("./catppuccin-macchiato-DQyhUUbL.js"),[]))},{id:"catppuccin-mocha",displayName:"Catppuccin Mocha",type:"dark",import:(()=>L(()=>import("./catppuccin-mocha-D87Tk5Gz.js"),[]))},{id:"dark-plus",displayName:"Dark Plus",type:"dark",import:(()=>L(()=>import("./dark-plus-C3mMm8J8.js"),[]))},{id:"dracula",displayName:"Dracula Theme",type:"dark",import:(()=>L(()=>import("./dracula-BzJJZx-M.js"),[]))},{id:"dracula-soft",displayName:"Dracula Theme Soft",type:"dark",import:(()=>L(()=>import("./dracula-soft-BXkSAIEj.js"),[]))},{id:"everforest-dark",displayName:"Everforest Dark",type:"dark",import:(()=>L(()=>import("./everforest-dark-BgDCqdQA.js"),[]))},{id:"everforest-light",displayName:"Everforest Light",type:"light",import:(()=>L(()=>import("./everforest-light-C8M2exoo.js"),[]))},{id:"github-dark",displayName:"GitHub Dark",type:"dark",import:(()=>L(()=>import("./github-dark-DHJKELXO.js"),[]))},{id:"github-dark-default",displayName:"GitHub Dark Default",type:"dark",import:(()=>L(()=>import("./github-dark-default-Cuk6v7N8.js"),[]))},{id:"github-dark-dimmed",displayName:"GitHub Dark Dimmed",type:"dark",import:(()=>L(()=>import("./github-dark-dimmed-DH5Ifo-i.js"),[]))},{id:"github-dark-high-contrast",displayName:"GitHub Dark High Contrast",type:"dark",import:(()=>L(()=>import("./github-dark-high-contrast-E3gJ1_iC.js"),[]))},{id:"github-light",displayName:"GitHub Light",type:"light",import:(()=>L(()=>import("./github-light-DAi9KRSo.js"),[]))},{id:"github-light-default",displayName:"GitHub Light Default",type:"light",import:(()=>L(()=>import("./github-light-default-D7oLnXFd.js"),[]))},{id:"github-light-high-contrast",displayName:"GitHub Light High Contrast",type:"light",import:(()=>L(()=>import("./github-light-high-contrast-BfjtVDDH.js"),[]))},{id:"gruvbox-dark-hard",displayName:"Gruvbox Dark Hard",type:"dark",import:(()=>L(()=>import("./gruvbox-dark-hard-CFHQjOhq.js"),[]))},{id:"gruvbox-dark-medium",displayName:"Gruvbox Dark Medium",type:"dark",import:(()=>L(()=>import("./gruvbox-dark-medium-GsRaNv29.js"),[]))},{id:"gruvbox-dark-soft",displayName:"Gruvbox Dark Soft",type:"dark",import:(()=>L(()=>import("./gruvbox-dark-soft-CVdnzihN.js"),[]))},{id:"gruvbox-light-hard",displayName:"Gruvbox Light Hard",type:"light",import:(()=>L(()=>import("./gruvbox-light-hard-CH1njM8p.js"),[]))},{id:"gruvbox-light-medium",displayName:"Gruvbox Light Medium",type:"light",import:(()=>L(()=>import("./gruvbox-light-medium-DRw_LuNl.js"),[]))},{id:"gruvbox-light-soft",displayName:"Gruvbox Light Soft",type:"light",import:(()=>L(()=>import("./gruvbox-light-soft-hJgmCMqR.js"),[]))},{id:"houston",displayName:"Houston",type:"dark",import:(()=>L(()=>import("./houston-DnULxvSX.js"),[]))},{id:"kanagawa-dragon",displayName:"Kanagawa Dragon",type:"dark",import:(()=>L(()=>import("./kanagawa-dragon-CkXjmgJE.js"),[]))},{id:"kanagawa-lotus",displayName:"Kanagawa Lotus",type:"light",import:(()=>L(()=>import("./kanagawa-lotus-CfQXZHmo.js"),[]))},{id:"kanagawa-wave",displayName:"Kanagawa Wave",type:"dark",import:(()=>L(()=>import("./kanagawa-wave-DWedfzmr.js"),[]))},{id:"laserwave",displayName:"LaserWave",type:"dark",import:(()=>L(()=>import("./laserwave-DUszq2jm.js"),[]))},{id:"light-plus",displayName:"Light Plus",type:"light",import:(()=>L(()=>import("./light-plus-B7mTdjB0.js"),[]))},{id:"material-theme",displayName:"Material Theme",type:"dark",import:(()=>L(()=>import("./material-theme-D5KoaKCx.js"),[]))},{id:"material-theme-darker",displayName:"Material Theme Darker",type:"dark",import:(()=>L(()=>import("./material-theme-darker-BfHTSMKl.js"),[]))},{id:"material-theme-lighter",displayName:"Material Theme Lighter",type:"light",import:(()=>L(()=>import("./material-theme-lighter-B0m2ddpp.js"),[]))},{id:"material-theme-ocean",displayName:"Material Theme Ocean",type:"dark",import:(()=>L(()=>import("./material-theme-ocean-CyktbL80.js"),[]))},{id:"material-theme-palenight",displayName:"Material Theme Palenight",type:"dark",import:(()=>L(()=>import("./material-theme-palenight-Csfq5Kiy.js"),[]))},{id:"min-dark",displayName:"Min Dark",type:"dark",import:(()=>L(()=>import("./min-dark-CafNBF8u.js"),[]))},{id:"min-light",displayName:"Min Light",type:"light",import:(()=>L(()=>import("./min-light-CTRr51gU.js"),[]))},{id:"monokai",displayName:"Monokai",type:"dark",import:(()=>L(()=>import("./monokai-D4h5O-jR.js"),[]))},{id:"night-owl",displayName:"Night Owl",type:"dark",import:(()=>L(()=>import("./night-owl-C39BiMTA.js"),[]))},{id:"nord",displayName:"Nord",type:"dark",import:(()=>L(()=>import("./nord-Ddv68eIx.js"),[]))},{id:"one-dark-pro",displayName:"One Dark Pro",type:"dark",import:(()=>L(()=>import("./one-dark-pro-DVMEJ2y_.js"),[]))},{id:"one-light",displayName:"One Light",type:"light",import:(()=>L(()=>import("./one-light-PoHY5YXO.js"),[]))},{id:"plastic",displayName:"Plastic",type:"dark",import:(()=>L(()=>import("./plastic-3e1v2bzS.js"),[]))},{id:"poimandres",displayName:"Poimandres",type:"dark",import:(()=>L(()=>import("./poimandres-CS3Unz2-.js"),[]))},{id:"red",displayName:"Red",type:"dark",import:(()=>L(()=>import("./red-bN70gL4F.js"),[]))},{id:"rose-pine",displayName:"Ros Pine",type:"dark",import:(()=>L(()=>import("./rose-pine-qdsjHGoJ.js"),[]))},{id:"rose-pine-dawn",displayName:"Ros Pine Dawn",type:"light",import:(()=>L(()=>import("./rose-pine-dawn-DHQR4-dF.js"),[]))},{id:"rose-pine-moon",displayName:"Ros Pine Moon",type:"dark",import:(()=>L(()=>import("./rose-pine-moon-D4_iv3hh.js"),[]))},{id:"slack-dark",displayName:"Slack Dark",type:"dark",import:(()=>L(()=>import("./slack-dark-BthQWCQV.js"),[]))},{id:"slack-ochin",displayName:"Slack Ochin",type:"light",import:(()=>L(()=>import("./slack-ochin-DqwNpetd.js"),[]))},{id:"snazzy-light",displayName:"Snazzy Light",type:"light",import:(()=>L(()=>import("./snazzy-light-Bw305WKR.js"),[]))},{id:"solarized-dark",displayName:"Solarized Dark",type:"dark",import:(()=>L(()=>import("./solarized-dark-DXbdFlpD.js"),[]))},{id:"solarized-light",displayName:"Solarized Light",type:"light",import:(()=>L(()=>import("./solarized-light-L9t79GZl.js"),[]))},{id:"synthwave-84",displayName:"Synthwave '84",type:"dark",import:(()=>L(()=>import("./synthwave-84-CbfX1IO0.js"),[]))},{id:"tokyo-night",displayName:"Tokyo Night",type:"dark",import:(()=>L(()=>import("./tokyo-night-hegEt444.js"),[]))},{id:"vesper",displayName:"Vesper",type:"dark",import:(()=>L(()=>import("./vesper-DU1UobuO.js"),[]))},{id:"vitesse-black",displayName:"Vitesse Black",type:"dark",import:(()=>L(()=>import("./vitesse-black-Bkuqu6BP.js"),[]))},{id:"vitesse-dark",displayName:"Vitesse Dark",type:"dark",import:(()=>L(()=>import("./vitesse-dark-D0r3Knsf.js"),[]))},{id:"vitesse-light",displayName:"Vitesse Light",type:"light",import:(()=>L(()=>import("./vitesse-light-CVO1_9PV.js"),[]))}],E5=Object.fromEntries(k5.map(t=>[t.id,t.import]));class Uy extends Error{constructor(e){super(e),this.name="ShikiError"}}function C5(){return 2147483648}function T5(){return typeof performance<"u"?performance.now():Date.now()}const A5=(t,e)=>t+(e-t%e)%e;async function R5(t){let e,n;const r={};function s(g){n=g,r.HEAPU8=new Uint8Array(g),r.HEAPU32=new Uint32Array(g)}function a(g,v,x){r.HEAPU8.copyWithin(g,v,v+x)}function l(g){try{return e.grow(g-n.byteLength+65535>>>16),s(e.buffer),1}catch{}}function u(g){const v=r.HEAPU8.length;g=g>>>0;const x=C5();if(g>x)return!1;for(let E=1;E<=4;E*=2){let S=v*(1+.2/E);S=Math.min(S,g+100663296);const T=Math.min(x,A5(Math.max(g,S),65536));if(l(T))return!0}return!1}const f=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function d(g,v,x=1024){const E=v+x;let S=v;for(;g[S]&&!(S>=E);)++S;if(S-v>16&&g.buffer&&f)return f.decode(g.subarray(v,S));let T="";for(;v<S;){let A=g[v++];if(!(A&128)){T+=String.fromCharCode(A);continue}const j=g[v++]&63;if((A&224)===192){T+=String.fromCharCode((A&31)<<6|j);continue}const D=g[v++]&63;if((A&240)===224?A=(A&15)<<12|j<<6|D:A=(A&7)<<18|j<<12|D<<6|g[v++]&63,A<65536)T+=String.fromCharCode(A);else{const I=A-65536;T+=String.fromCharCode(55296|I>>10,56320|I&1023)}}return T}function m(g,v){return g?d(r.HEAPU8,g,v):""}const p={emscripten_get_now:T5,emscripten_memcpy_big:a,emscripten_resize_heap:u,fd_write:()=>0};async function y(){const v=await t({env:p,wasi_snapshot_preview1:p});e=v.memory,s(e.buffer),Object.assign(r,v),r.UTF8ToString=m}return await y(),r}var O5=Object.defineProperty,N5=(t,e,n)=>e in t?O5(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ft=(t,e,n)=>N5(t,typeof e!="symbol"?e+"":e,n);let Yt=null;function I5(t){throw new Uy(t.UTF8ToString(t.getLastOnigError()))}class cd{constructor(e){Ft(this,"utf16Length"),Ft(this,"utf8Length"),Ft(this,"utf16Value"),Ft(this,"utf8Value"),Ft(this,"utf16OffsetToUtf8"),Ft(this,"utf8OffsetToUtf16");const n=e.length,r=cd._utf8ByteLength(e),s=r!==n,a=s?new Uint32Array(n+1):null;s&&(a[n]=r);const l=s?new Uint32Array(r+1):null;s&&(l[r]=n);const u=new Uint8Array(r);let f=0;for(let d=0;d<n;d++){const m=e.charCodeAt(d);let p=m,y=!1;if(m>=55296&&m<=56319&&d+1<n){const g=e.charCodeAt(d+1);g>=56320&&g<=57343&&(p=(m-55296<<10)+65536|g-56320,y=!0)}s&&(a[d]=f,y&&(a[d+1]=f),p<=127?l[f+0]=d:p<=2047?(l[f+0]=d,l[f+1]=d):p<=65535?(l[f+0]=d,l[f+1]=d,l[f+2]=d):(l[f+0]=d,l[f+1]=d,l[f+2]=d,l[f+3]=d)),p<=127?u[f++]=p:p<=2047?(u[f++]=192|(p&1984)>>>6,u[f++]=128|(p&63)>>>0):p<=65535?(u[f++]=224|(p&61440)>>>12,u[f++]=128|(p&4032)>>>6,u[f++]=128|(p&63)>>>0):(u[f++]=240|(p&1835008)>>>18,u[f++]=128|(p&258048)>>>12,u[f++]=128|(p&4032)>>>6,u[f++]=128|(p&63)>>>0),y&&d++}this.utf16Length=n,this.utf8Length=r,this.utf16Value=e,this.utf8Value=u,this.utf16OffsetToUtf8=a,this.utf8OffsetToUtf16=l}static _utf8ByteLength(e){let n=0;for(let r=0,s=e.length;r<s;r++){const a=e.charCodeAt(r);let l=a,u=!1;if(a>=55296&&a<=56319&&r+1<s){const f=e.charCodeAt(r+1);f>=56320&&f<=57343&&(l=(a-55296<<10)+65536|f-56320,u=!0)}l<=127?n+=1:l<=2047?n+=2:l<=65535?n+=3:n+=4,u&&r++}return n}createString(e){const n=e.omalloc(this.utf8Length);return e.HEAPU8.set(this.utf8Value,n),n}}const ud=class Pr{constructor(e){if(Ft(this,"id",++Pr.LAST_ID),Ft(this,"_onigBinding"),Ft(this,"content"),Ft(this,"utf16Length"),Ft(this,"utf8Length"),Ft(this,"utf16OffsetToUtf8"),Ft(this,"utf8OffsetToUtf16"),Ft(this,"ptr"),!Yt)throw new Uy("Must invoke loadWasm first.");this._onigBinding=Yt,this.content=e;const n=new cd(e);this.utf16Length=n.utf16Length,this.utf8Length=n.utf8Length,this.utf16OffsetToUtf8=n.utf16OffsetToUtf8,this.utf8OffsetToUtf16=n.utf8OffsetToUtf16,this.utf8Length<1e4&&!Pr._sharedPtrInUse?(Pr._sharedPtr||(Pr._sharedPtr=Yt.omalloc(1e4)),Pr._sharedPtrInUse=!0,Yt.HEAPU8.set(n.utf8Value,Pr._sharedPtr),this.ptr=Pr._sharedPtr):this.ptr=n.createString(Yt)}convertUtf8OffsetToUtf16(e){return this.utf8OffsetToUtf16?e<0?0:e>this.utf8Length?this.utf16Length:this.utf8OffsetToUtf16[e]:e}convertUtf16OffsetToUtf8(e){return this.utf16OffsetToUtf8?e<0?0:e>this.utf16Length?this.utf8Length:this.utf16OffsetToUtf8[e]:e}dispose(){this.ptr===Pr._sharedPtr?Pr._sharedPtrInUse=!1:this._onigBinding.ofree(this.ptr)}};Ft(ud,"LAST_ID",0);Ft(ud,"_sharedPtr",0);Ft(ud,"_sharedPtrInUse",!1);let OE=ud;class M5{constructor(e){if(Ft(this,"_onigBinding"),Ft(this,"_ptr"),!Yt)throw new Uy("Must invoke loadWasm first.");const n=[],r=[];for(let u=0,f=e.length;u<f;u++){const d=new cd(e[u]);n[u]=d.createString(Yt),r[u]=d.utf8Length}const s=Yt.omalloc(4*e.length);Yt.HEAPU32.set(n,s/4);const a=Yt.omalloc(4*e.length);Yt.HEAPU32.set(r,a/4);const l=Yt.createOnigScanner(s,a,e.length);for(let u=0,f=e.length;u<f;u++)Yt.ofree(n[u]);Yt.ofree(a),Yt.ofree(s),l===0&&I5(Yt),this._onigBinding=Yt,this._ptr=l}dispose(){this._onigBinding.freeOnigScanner(this._ptr)}findNextMatchSync(e,n,r){let s=0;if(typeof r=="number"&&(s=r),typeof e=="string"){e=new OE(e);const a=this._findNextMatchSync(e,n,!1,s);return e.dispose(),a}return this._findNextMatchSync(e,n,!1,s)}_findNextMatchSync(e,n,r,s){const a=this._onigBinding,l=a.findNextOnigScannerMatch(this._ptr,e.id,e.ptr,e.utf8Length,e.convertUtf16OffsetToUtf8(n),s);if(l===0)return null;const u=a.HEAPU32;let f=l/4;const d=u[f++],m=u[f++],p=[];for(let y=0;y<m;y++){const g=e.convertUtf8OffsetToUtf16(u[f++]),v=e.convertUtf8OffsetToUtf16(u[f++]);p[y]={start:g,end:v,length:v-g}}return{index:d,captureIndices:p}}}function D5(t){return typeof t.instantiator=="function"}function j5(t){return typeof t.default=="function"}function L5(t){return typeof t.data<"u"}function z5(t){return typeof Response<"u"&&t instanceof Response}function P5(t){return typeof ArrayBuffer<"u"&&(t instanceof ArrayBuffer||ArrayBuffer.isView(t))||typeof Buffer<"u"&&Buffer.isBuffer?.(t)||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer||typeof Uint32Array<"u"&&t instanceof Uint32Array}let Iu;function B5(t){if(Iu)return Iu;async function e(){Yt=await R5(async n=>{let r=t;return r=await r,typeof r=="function"&&(r=await r(n)),typeof r=="function"&&(r=await r(n)),D5(r)?r=await r.instantiator(n):j5(r)?r=await r.default(n):(L5(r)&&(r=r.data),z5(r)?typeof WebAssembly.instantiateStreaming=="function"?r=await $5(r)(n):r=await U5(r)(n):P5(r)?r=await pm(r)(n):r instanceof WebAssembly.Module?r=await pm(r)(n):"default"in r&&r.default instanceof WebAssembly.Module&&(r=await pm(r.default)(n))),"instance"in r&&(r=r.instance),"exports"in r&&(r=r.exports),r})}return Iu=e(),Iu}function pm(t){return e=>WebAssembly.instantiate(t,e)}function $5(t){return e=>WebAssembly.instantiateStreaming(t,e)}function U5(t){return async e=>{const n=await t.arrayBuffer();return WebAssembly.instantiate(n,e)}}async function q5(t){return t&&await B5(t),{createScanner(e){return new M5(e.map(n=>typeof n=="string"?n:n.source))},createString(e){return new OE(e)}}}const F5=b5({langs:S5,themes:E5,engine:()=>q5(L(()=>import("./wasm-CG6Dc4jp.js"),[]))}),{codeToHtml:NE}=v5(F5,{guessEmbeddedLanguages:Mz});function V5(){const t=qe.c(2),[e,n]=K.useState(H5);let r,s;return t[0]===Symbol.for("react.memo_cache_sentinel")?(r=()=>{const a=window.matchMedia("(prefers-color-scheme: dark)"),l=u=>n(u.matches);return a.addEventListener("change",l),()=>a.removeEventListener("change",l)},s=[],t[0]=r,t[1]=s):(r=t[0],s=t[1]),K.useEffect(r,s),e}function H5(){return window.matchMedia("(prefers-color-scheme: dark)").matches}function fd(t,e){const[n,r]=K.useState(""),s=V5();return K.useEffect(()=>{let a=!1;return(async()=>{if(!t){a||r("");return}try{if(e==="text"){const f=t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");a||r(`<pre><code>${f}</code></pre>`);return}const u=await NE(t,{lang:e,theme:s?"github-dark":"github-light"});a||r(u)}catch{const u=t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");a||r(`<pre><code>${u}</code></pre>`)}})(),()=>{a=!0}},[t,e,s]),n}const dd="text-xs [&_pre]:bg-transparent! [&_pre]:p-0! [&_pre]:m-0! [&_pre]:overflow-visible! [&_code]:bg-transparent! [&_code]:block!";function G5(t){try{const e=JSON.parse(t);return JSON.stringify(e,null,2)}catch{return t}}function qy(t){const e=qe.c(5),{content:n}=t,[r,s]=K.useState("");let a,l;e[0]!==n?(a=()=>{let d=!1;return n.text().then(m=>{d||s(G5(m))}),()=>{d=!0}},l=[n],e[0]=n,e[1]=a,e[2]=l):(a=e[1],l=e[2]),K.useEffect(a,l);const u=fd(r,"json");let f;return e[3]!==u?(f=w.jsx("div",{className:dd,dangerouslySetInnerHTML:{__html:u}}),e[3]=u,e[4]=f):f=e[4],f}function K5(t){try{const n=/(>)(<)(\/*)/g,r=t.replace(n,`$1
$2$3`);let s=0;return r.split(`
`).map(a=>{let l=0;a.match(/.+<\/\w[^>]*>$/)?l=0:a.match(/^<\/\w/)&&s>0?s-=1:a.match(/^<\w[^>]*[^/]>.*$/)?l=1:l=0;const u="  ".repeat(s);return s+=l,u+a}).join(`
`)}catch{return t}}function Z5(t){const e=qe.c(5),{content:n}=t,[r,s]=K.useState("");let a,l;e[0]!==n?(a=()=>{let d=!1;return n.text().then(m=>{d||s(K5(m))}),()=>{d=!0}},l=[n],e[0]=n,e[1]=a,e[2]=l):(a=e[1],l=e[2]),K.useEffect(a,l);const u=fd(r,"xml");let f;return e[3]!==u?(f=w.jsx("div",{className:dd,dangerouslySetInnerHTML:{__html:u}}),e[3]=u,e[4]=f):f=e[4],f}function Q5(t){const e=qe.c(5),{content:n}=t,[r,s]=K.useState("");let a,l;e[0]!==n?(a=()=>{let d=!1;return n.text().then(m=>{d||s(m)}),()=>{d=!0}},l=[n],e[0]=n,e[1]=a,e[2]=l):(a=e[1],l=e[2]),K.useEffect(a,l);const u=fd(r,"yaml");let f;return e[3]!==u?(f=w.jsx("div",{className:dd,dangerouslySetInnerHTML:{__html:u}}),e[3]=u,e[4]=f):f=e[4],f}function Og(t){const e=qe.c(5),{content:n}=t,[r,s]=K.useState("");let a,l;e[0]!==n?(a=()=>{n.text().then(s)},l=[n],e[0]=n,e[1]=a,e[2]=l):(a=e[1],l=e[2]),K.useEffect(a,l);let u;return e[3]!==r?(u=w.jsx("pre",{className:"text-xs font-mono text-neutral-700 dark:text-neutral-200 whitespace-pre-wrap",children:r}),e[3]=r,e[4]=u):u=e[4],u}function J5(t){const e=qe.c(6),{content:n}=t,r=Y5;let s;e[0]===Symbol.for("react.memo_cache_sentinel")?(s=w.jsx("div",{className:"text-neutral-500 dark:text-neutral-400 text-sm",children:"Binary content"}),e[0]=s):s=e[0];const a=r(n.size);let l;e[1]!==a?(l=w.jsx("div",{className:"text-2xl font-semibold text-neutral-700 dark:text-neutral-200",children:a}),e[1]=a,e[2]=l):l=e[2];let u;e[3]===Symbol.for("react.memo_cache_sentinel")?(u=w.jsx("div",{className:"text-xs text-neutral-400 dark:text-neutral-500",children:"Cannot preview binary data"}),e[3]=u):u=e[3];let f;return e[4]!==l?(f=w.jsx("div",{className:"flex flex-col items-center justify-center p-12 bg-neutral-100 dark:bg-white/5 rounded-lg border border-neutral-200 dark:border-white/10",children:w.jsxs("div",{className:"text-center space-y-2",children:[s,l,u]})}),e[4]=l,e[5]=f):f=e[5],f}function Y5(t){return t<1024?`${t} B`:t<1048576?`${(t/1024).toFixed(2)} KB`:`${(t/1048576).toFixed(2)} MB`}function X5(t){const e=qe.c(4),{content:n}=t;let r;e[0]!==n?(r=URL.createObjectURL(n),e[0]=n,e[1]=r):r=e[1];const s=r;let a;return e[2]!==s?(a=w.jsx("div",{className:"h-full",children:w.jsx("img",{src:s,alt:"Response",className:"max-w-full max-h-full object-contain"})}),e[2]=s,e[3]=a):a=e[3],a}function W5(){const t=qe.c(2),[e,n]=K.useState(eP);let r,s;return t[0]===Symbol.for("react.memo_cache_sentinel")?(r=()=>{const a=window.matchMedia("(prefers-color-scheme: dark)"),l=u=>n(u.matches);return a.addEventListener("change",l),()=>a.removeEventListener("change",l)},s=[],t[0]=r,t[1]=s):(r=t[0],s=t[1]),K.useEffect(r,s),e}function eP(){return window.matchMedia("(prefers-color-scheme: dark)").matches}function tP(t){const e=[],n=t.split(/\n\n+/);for(const r of n){if(!r.trim())continue;const s={data:"",raw:r},a=r.split(`
`);for(const l of a)l.startsWith("id:")?s.id=l.slice(3).trim():l.startsWith("event:")?s.event=l.slice(6).trim():l.startsWith("data:")?s.data+=(s.data?`
`:"")+l.slice(5).trim():l.startsWith("retry:")&&(s.retry=parseInt(l.slice(6).trim(),10));(s.data||s.event||s.id)&&e.push(s)}return e}function nP(t){try{return JSON.parse(t)}catch{return null}}function rP({event:t,index:e,prefersDark:n}){const[r,s]=K.useState(!0),[a,l]=K.useState(""),u=K.useMemo(()=>nP(t.data),[t.data]);return K.useEffect(()=>{(async()=>{if(u)try{const d=JSON.stringify(u,null,2),m=await NE(d,{lang:"json",theme:n?"github-dark":"github-light"});l(m)}catch{l(`<pre>${JSON.stringify(u,null,2)}</pre>`)}})()},[u,n]),w.jsxs("div",{className:"border border-neutral-200 dark:border-white/10 rounded-lg overflow-hidden",children:[w.jsxs("button",{onClick:()=>s(!r),className:"w-full flex items-center gap-2 px-3 py-2 bg-neutral-50 dark:bg-white/5 hover:bg-neutral-100 dark:hover:bg-white/10 transition-colors",children:[r?w.jsx(ei,{className:"w-4 h-4 text-neutral-400"}):w.jsx(id,{className:"w-4 h-4 text-neutral-400"}),w.jsxs("span",{className:"text-xs font-mono text-neutral-500 dark:text-neutral-400",children:["#",e+1]}),t.event&&w.jsx("span",{className:"px-2 py-0.5 text-xs font-medium bg-blue-100 dark:bg-blue-500/20 text-blue-700 dark:text-blue-300 rounded",children:t.event}),t.id&&w.jsxs("span",{className:"text-xs text-neutral-400 dark:text-neutral-500",children:["id: ",t.id]}),u&&w.jsx("span",{className:"px-1.5 py-0.5 text-[10px] font-medium bg-emerald-100 dark:bg-emerald-500/20 text-emerald-700 dark:text-emerald-300 rounded",children:"JSON"})]}),r&&w.jsx("div",{className:"p-3 bg-white dark:bg-transparent",children:u&&a?w.jsx("div",{className:"text-xs [&_pre]:bg-transparent! [&_pre]:p-0! [&_pre]:m-0! [&_pre]:overflow-visible! [&_code]:bg-transparent! [&_code]:block!",dangerouslySetInnerHTML:{__html:a}}):w.jsx("pre",{className:"text-xs font-mono text-neutral-700 dark:text-neutral-200 whitespace-pre-wrap",children:t.data})})]})}function sP(t){const e=qe.c(17),{content:n}=t;let r;e[0]===Symbol.for("react.memo_cache_sentinel")?(r=[],e[0]=r):r=e[0];const[s,a]=K.useState(r),[l,u]=K.useState(""),f=W5();let d,m;if(e[1]!==n?(d=()=>{n.text().then(x=>{u(x),a(tP(x))})},m=[n],e[1]=n,e[2]=d,e[3]=m):(d=e[2],m=e[3]),K.useEffect(d,m),s.length===0){let x;return e[4]!==l?(x=w.jsx("pre",{className:"text-xs font-mono text-neutral-700 dark:text-neutral-200 whitespace-pre-wrap",children:l}),e[4]=l,e[5]=x):x=e[5],x}const p=s.length!==1?"s":"";let y;e[6]!==s.length||e[7]!==p?(y=w.jsx("div",{className:"flex items-center gap-2 mb-3",children:w.jsxs("span",{className:"text-xs font-medium text-neutral-500 dark:text-neutral-400",children:[s.length," event",p]})}),e[6]=s.length,e[7]=p,e[8]=y):y=e[8];let g;if(e[9]!==s||e[10]!==f){let x;e[12]!==f?(x=(E,S)=>w.jsx(rP,{event:E,index:S,prefersDark:f},S),e[12]=f,e[13]=x):x=e[13],g=s.map(x),e[9]=s,e[10]=f,e[11]=g}else g=e[11];let v;return e[14]!==y||e[15]!==g?(v=w.jsxs("div",{className:"space-y-2",children:[y,g]}),e[14]=y,e[15]=g,e[16]=v):v=e[16],v}const iP=["video/","audio/","application/pdf","application/octet-stream","application/zip","application/gzip","application/x-tar","application/x-rar","application/x-7z","application/vnd.ms-","application/vnd.openxmlformats","application/x-executable","application/x-sharedlib","application/x-mach-binary","application/wasm","font/"],aP=["image/png","image/jpeg","image/gif","image/webp","image/svg+xml","image/bmp","image/x-icon","image/ico","image/avif","image/apng"],oP=["text/","application/json","application/xml","application/javascript","application/ecmascript","application/x-javascript","application/ld+json","application/manifest+json","application/schema+json","application/x-www-form-urlencoded","application/xhtml+xml","application/rss+xml","application/atom+xml","application/soap+xml","application/x-yaml","application/yaml","+json","+xml"];function lP(t){const e=t["content-type"]?.toLowerCase()||"";return e.includes("text/event-stream")?"sse":aP.some(n=>e.includes(n))?"image":iP.some(n=>e.includes(n))?"binary":e.includes("json")||e.endsWith("+json")?"json":e.includes("xml")||e.endsWith("+xml")?"xml":e.includes("yaml")||e.includes("yml")?"yaml":(oP.some(n=>e.includes(n)),"text")}function cP(t){const e=qe.c(8),{response:n,viewMode:r}=t,s=r===void 0?"pretty":r;let a;e[0]!==n.headers?(a=lP(n.headers),e[0]=n.headers,e[1]=a):a=e[1];const l=a;let u;e[2]!==l||e[3]!==n.body||e[4]!==s?(u=()=>{if(s==="raw"&&l!=="image"&&l!=="binary")return w.jsx(Og,{content:n.body});switch(l){case"json":return w.jsx(qy,{content:n.body});case"xml":return w.jsx(Z5,{content:n.body});case"yaml":return w.jsx(Q5,{content:n.body});case"sse":return w.jsx(sP,{content:n.body});case"image":return w.jsx(X5,{content:n.body});case"binary":return w.jsx(J5,{content:n.body});default:return w.jsx(Og,{content:n.body})}},e[2]=l,e[3]=n.body,e[4]=s,e[5]=u):u=e[5];const f=u;let d;return e[6]!==f?(d=w.jsx("div",{className:"h-full flex flex-col overflow-hidden",children:w.jsx("div",{className:"flex-1 min-h-0 overflow-auto",children:f()})}),e[6]=f,e[7]=d):d=e[7],d}let mm=null;async function gm(t){if(mm?.host===t)return mm.data;const e=await fetch(`/proxy/grpc/${t}`);if(!e.ok)throw new Error("Failed to fetch services");const n=await e.json();return mm={host:t,data:n},n}function f1({value:t,onChange:e,placeholder:n,label:r,fetchOptions:s,disabled:a,icon:l}){const[u,f]=K.useState(!1),[d,m]=K.useState([]),[p,y]=K.useState(null),[g,v]=K.useState(!1),x=K.useRef(null);K.useEffect(()=>{const S=T=>{x.current&&!x.current.contains(T.target)&&f(!1)};return document.addEventListener("mousedown",S),()=>document.removeEventListener("mousedown",S)},[]);const E=async()=>{if(!a){f(!0),v(!0),y(null);try{const S=await s();m(S)}catch(S){y(S instanceof Error?S.message:"Failed to fetch"),m([])}finally{v(!1)}}};return w.jsxs("div",{ref:x,className:"relative shrink-0",children:[w.jsxs("button",{type:"button",onClick:E,disabled:a,className:"h-8 px-2 flex items-center gap-2 text-sm transition hover:bg-neutral-50 dark:hover:bg-white/5 disabled:opacity-50 disabled:cursor-not-allowed rounded",children:[l,w.jsx("span",{className:`text-sm whitespace-nowrap ${t?"text-neutral-800 dark:text-neutral-100":"text-neutral-400 dark:text-neutral-500"}`,children:t||n}),g?w.jsx(Sf,{className:"w-3.5 h-3.5 animate-spin text-neutral-400 shrink-0"}):w.jsx(ei,{className:`w-3.5 h-3.5 text-neutral-400 shrink-0 transition-transform ${u?"rotate-180":""}`})]}),u&&w.jsx("div",{className:"absolute top-full left-0 mt-1 w-full min-w-48 max-w-md bg-white dark:bg-[#0f0f0f] border border-neutral-200 dark:border-white/10 rounded-lg shadow-xl z-50 overflow-hidden",children:w.jsxs("div",{className:"max-h-64 overflow-y-auto p-1",children:[g&&w.jsxs("div",{className:"px-3 py-4 text-center text-sm text-neutral-500",children:[w.jsx(Sf,{className:"w-4 h-4 animate-spin mx-auto mb-1"}),"Loading..."]}),p&&w.jsx("div",{className:"px-3 py-3 text-sm text-red-500",children:p}),!g&&!p&&d.length===0&&w.jsxs("div",{className:"px-3 py-4 text-center text-sm text-neutral-500",children:["No ",r.toLowerCase()," available"]}),!g&&!p&&d.map(S=>w.jsx("button",{type:"button",onClick:()=>{e(S),f(!1)},className:`w-full px-3 py-2 text-left text-sm rounded-md transition-colors ${S===t?"bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-400":"text-neutral-700 dark:text-neutral-300 hover:bg-neutral-50 dark:hover:bg-white/5"}`,children:S},S))]})})]})}function uP(){const{request:t,setUrl:e,setGrpcMethodSchema:n}=dn(),r=t?.url??"",s=x=>{const E=x.match(/^grpc:\/\/([^/]*)(?:\/([^/]*)(?:\/([^/]*))?)?$/);return E?{host:E[1]||"",service:E[2]||"",method:E[3]||""}:{host:"",service:"",method:""}},a=(x,E,S)=>x?E?S?`grpc://${x}/${E}/${S}`:`grpc://${x}/${E}`:`grpc://${x}`:"grpc://",{host:l,service:u,method:f}=s(r),d=x=>{e(a(x,"","")),n(void 0)},m=x=>{e(a(l,x,"")),n(void 0)},p=async x=>{e(a(l,u,x));try{const T=(await gm(l)).services.find(A=>A.name===u)?.methods.find(A=>A.name===x);T?.schema?n(T.schema):n(void 0)}catch{n(void 0)}},y=async()=>l?(await gm(l)).services.map(E=>E.name):[],g=async()=>!l||!u?[]:(await gm(l)).services.find(S=>S.name===u)?.methods.map(S=>S.name)??[],v=Math.max(8,l.length||9);return w.jsxs("div",{className:"flex items-center flex-1 min-w-0",children:[w.jsx("input",{type:"text",value:l,onChange:x=>d(x.target.value),placeholder:"host:port",size:v,className:"min-w-20 max-w-full px-2 py-1.5 text-sm bg-transparent text-neutral-800 dark:text-neutral-100 placeholder-neutral-400 dark:placeholder-neutral-600 focus:outline-none"}),w.jsx("span",{className:"text-neutral-300 dark:text-neutral-600 shrink-0",children:"/"}),w.jsx(f1,{value:u,onChange:m,placeholder:"Select service",label:"Service",fetchOptions:y,disabled:!l,icon:w.jsx(qD,{className:`w-4 h-4 shrink-0 ${u?"text-purple-500":"text-neutral-400"}`})}),w.jsx("span",{className:"text-neutral-300 dark:text-neutral-600",children:"/"}),w.jsx(f1,{value:f,onChange:p,placeholder:"Select method",label:"Method",fetchOptions:g,disabled:!l||!u,icon:w.jsx(B3,{className:`w-4 h-4 shrink-0 ${f?"text-amber-500":"text-neutral-400"}`})})]})}const fP=["grpc-timeout","authorization","x-request-id","x-correlation-id"];function Ng(t){if(!t||typeof t!="object")return{};const e=t,r=(Array.isArray(e.type)?e.type[0]:e.type)||(e.properties?"object":e.items?"array":void 0);if(r==="object"){const a={},l=e.properties||{};return Object.keys(l).forEach(u=>{a[u]=Ng(l[u])}),a}if(r==="array"){const a=e.items||{type:"string"};return[Ng(a)]}const s=e.enum;if(s&&s.length>0)return s[0];switch(r){case"integer":case"number":return 0;case"boolean":return!0;case"string":return e.format==="byte"?"":"string";default:return{}}}function dP(){const[t,e]=K.useState("body"),{request:n,setGrpcBody:r,setGrpcMetadata:s,setVariables:a}=dn(),l=n?.grpc?.metadata??[],u=n?.grpc?.body??"",f=n?.variables??[],d=n?.grpc?.schema,m=K.useMemo(()=>{try{return d?Ng(d):void 0}catch{return}},[d]),p=[{id:"body",label:"Message"},{id:"headers",label:"Metadata",count:l.filter(y=>y.key).length}];return w.jsxs("div",{className:"space-y-3",children:[w.jsx("div",{className:"flex items-center gap-2",children:w.jsx("div",{role:"tablist",className:"inline-flex gap-1",children:p.map(y=>w.jsxs("button",{role:"tab",onClick:()=>e(y.id),className:`px-2 py-1 text-[11px] font-medium rounded-md transition-all ${t===y.id?"bg-white dark:bg-white/10 text-neutral-800 dark:text-neutral-100 shadow-sm":"text-neutral-500 dark:text-neutral-400 hover:text-neutral-700 dark:hover:text-neutral-200 hover:bg-neutral-100 dark:hover:bg-white/5"}`,children:[y.label,y.count!==void 0&&y.count>0&&w.jsx("span",{className:"ml-1.5 px-1.5 py-0.5 text-[9px] bg-neutral-200 dark:bg-white/10 text-neutral-600 dark:text-neutral-300 rounded-full",children:y.count})]},y.id))})}),w.jsxs("div",{children:[t==="body"&&w.jsx(Ny,{value:u,onChange:r,variables:f,onVariablesChange:a,placeholder:m?JSON.stringify(m,null,2):`{
  "field": "value"
}`,action:m!==void 0?{label:"Insert schema",onClick:()=>r(JSON.stringify(m,null,2))}:void 0}),t==="headers"&&w.jsxs("div",{className:"space-y-2",children:[w.jsx("p",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:"gRPC metadata (sent as headers)"}),w.jsx(Cl,{items:l,onChange:s,keyPlaceholder:"Key",valuePlaceholder:"Value",keySuggestions:fP})]})]})]})}function hP(t){const e=qe.c(3),{response:n,viewMode:r}=t,s=r===void 0?"pretty":r;let a;return e[0]!==n.body||e[1]!==s?(a=w.jsx("div",{className:"h-full flex flex-col overflow-hidden",children:w.jsx("div",{className:"flex-1 min-h-0 overflow-auto",children:s==="pretty"?w.jsx(qy,{content:n.body}):w.jsx(Og,{content:n.body})})}),e[0]=n.body,e[1]=s,e[2]=a):a=e[2],a}function d1(t){const e=qe.c(27),{feature:n,type:r,isSelected:s,onSelect:a}=t,[l,u]=K.useState(!1);let f;e[0]!==n.schema?(f=n.schema&&Object.keys(n.schema).length>0,e[0]=n.schema,e[1]=f):f=e[1];const d=f,m=`border rounded-md ${s?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-neutral-200 dark:border-white/10"}`;let p;e[2]!==r?(p=r==="tool"?w.jsx(Ef,{className:"w-4 h-4 text-amber-500 shrink-0"}):w.jsx(eo,{className:"w-4 h-4 text-blue-500 shrink-0"}),e[2]=r,e[3]=p):p=e[3];let y;e[4]!==n.name?(y=w.jsx("div",{className:"font-medium text-sm truncate",children:n.name}),e[4]=n.name,e[5]=y):y=e[5];let g;e[6]!==n.description?(g=n.description&&w.jsx("div",{className:"text-xs text-neutral-500 dark:text-neutral-400 truncate",children:n.description}),e[6]=n.description,e[7]=g):g=e[7];let v;e[8]!==y||e[9]!==g?(v=w.jsxs("div",{className:"flex-1 min-w-0",children:[y,g]}),e[8]=y,e[9]=g,e[10]=v):v=e[10];let x;e[11]!==l||e[12]!==d?(x=d&&w.jsx("button",{onClick:A=>{A.stopPropagation(),u(!l)},className:"p-1 hover:bg-neutral-200 dark:hover:bg-white/10 rounded",children:l?w.jsx(ei,{className:"w-4 h-4"}):w.jsx(id,{className:"w-4 h-4"})}),e[11]=l,e[12]=d,e[13]=x):x=e[13];let E;e[14]!==a||e[15]!==p||e[16]!==v||e[17]!==x?(E=w.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 cursor-pointer hover:bg-neutral-50 dark:hover:bg-white/5",onClick:a,children:[p,v,x]}),e[14]=a,e[15]=p,e[16]=v,e[17]=x,e[18]=E):E=e[18];let S;e[19]!==l||e[20]!==n.schema||e[21]!==d?(S=l&&d&&w.jsx("div",{className:"px-3 pb-2 border-t border-neutral-200 dark:border-white/10",children:w.jsx("pre",{className:"text-xs bg-neutral-100 dark:bg-black/20 p-2 rounded mt-2 overflow-auto max-h-48",children:JSON.stringify(n.schema,null,2)})}),e[19]=l,e[20]=n.schema,e[21]=d,e[22]=S):S=e[22];let T;return e[23]!==m||e[24]!==E||e[25]!==S?(T=w.jsxs("div",{className:m,children:[E,S]}),e[23]=m,e[24]=E,e[25]=S,e[26]=T):T=e[26],T}function pP({onSelected:t}){const{request:e,discoverMcpFeatures:n,setMcpTool:r,setMcpResource:s}=dn(),[a,l]=K.useState("tools"),[u,f]=K.useState(null),[d,m]=K.useState(!1),p=u?.tools||[],y=u?.resources||[],g=u?.error,v=async()=>{m(!0);try{const x=await n();x&&f(x)}finally{m(!1)}};return u?g?w.jsxs("div",{className:"p-4 text-center",children:[w.jsx("p",{className:"text-sm text-red-500 dark:text-red-400 mb-4",children:g}),w.jsxs("button",{onClick:v,disabled:!e.url||d,className:"inline-flex items-center gap-2 px-3 py-1.5 text-sm rounded-md border border-neutral-200 dark:border-white/10 text-neutral-700 dark:text-neutral-100 hover:bg-neutral-50 dark:hover:bg-white/10 disabled:opacity-50 disabled:cursor-not-allowed",children:[w.jsx(kf,{className:"w-4 h-4"}),"Retry"]})]}):w.jsxs("div",{className:"flex flex-col h-full",children:[w.jsxs("div",{className:"flex border-b border-neutral-200 dark:border-white/10 shrink-0",children:[w.jsxs("button",{onClick:()=>l("tools"),className:`flex items-center gap-1.5 px-4 py-2 text-sm font-medium border-b-2 transition-colors ${a==="tools"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-neutral-500 hover:text-neutral-700 dark:text-neutral-400 dark:hover:text-neutral-200"}`,children:[w.jsx(Ef,{className:"w-4 h-4"}),"Tools (",p.length,")"]}),w.jsxs("button",{onClick:()=>l("resources"),className:`flex items-center gap-1.5 px-4 py-2 text-sm font-medium border-b-2 transition-colors ${a==="resources"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-neutral-500 hover:text-neutral-700 dark:text-neutral-400 dark:hover:text-neutral-200"}`,children:[w.jsx(eo,{className:"w-4 h-4"}),"Resources (",y.length,")"]}),w.jsx("div",{className:"flex-1"}),w.jsx("button",{onClick:v,disabled:d,className:"p-2 text-neutral-500 hover:text-neutral-700 dark:text-neutral-400 dark:hover:text-neutral-200 disabled:opacity-40",title:"Refresh features",children:w.jsx(kf,{className:"w-4 h-4"})})]}),w.jsxs("div",{className:"flex-1 overflow-auto p-2 space-y-2",children:[a==="tools"&&w.jsx(w.Fragment,{children:p.length===0?w.jsx("p",{className:"text-sm text-neutral-500 dark:text-neutral-400 text-center py-4",children:"No tools available"}):p.map(x=>w.jsx(d1,{feature:x,type:"tool",isSelected:e.mcp?.tool?.name===x.name,onSelect:()=>{r({name:x.name,arguments:"{}",schema:x.schema}),t?.()}},x.name))}),a==="resources"&&w.jsx(w.Fragment,{children:y.length===0?w.jsx("p",{className:"text-sm text-neutral-500 dark:text-neutral-400 text-center py-4",children:"No resources available"}):y.map(x=>w.jsx(d1,{feature:x,type:"resource",isSelected:e.mcp?.resource?.uri===(x.schema?.uri||x.name),onSelect:()=>{const E=x.schema?.uri||x.name;s({uri:E}),t?.()}},x.name))})]}),(e.mcp?.tool||e.mcp?.resource)&&w.jsx("div",{className:"border-t border-neutral-200 dark:border-white/10 p-2 shrink-0",children:w.jsxs("div",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:["Selected: ",e.mcp?.tool?`Tool: ${e.mcp.tool.name}`:`Resource: ${e.mcp?.resource?.uri}`]})})]}):w.jsxs("div",{className:"p-4 text-center",children:[w.jsx("p",{className:"text-sm text-neutral-500 dark:text-neutral-400 mb-4",children:"Enter an MCP server URL and discover its features"}),w.jsxs("button",{onClick:v,disabled:!e.url||d,className:"inline-flex items-center gap-2 px-3 py-1.5 text-sm rounded-md border border-neutral-200 dark:border-white/10 text-neutral-700 dark:text-neutral-100 hover:bg-neutral-50 dark:hover:bg-white/10 disabled:opacity-50 disabled:cursor-not-allowed",children:[w.jsx(x3,{className:"w-4 h-4"}),"Discover"]})]})}function mP(){const t=qe.c(32),{request:e,setUrl:n}=dn(),r=e?.url??"",s=e?.mcp?.tool?.name,a=e?.mcp?.resource?.uri,[l,u]=K.useState(!1),f=K.useRef(null);let d,m;t[0]!==l?(d=()=>{if(!l)return;const re=pe=>{f.current&&!f.current.contains(pe.target)&&u(!1)};return document.addEventListener("mousedown",re),()=>document.removeEventListener("mousedown",re)},m=[l],t[0]=l,t[1]=d,t[2]=m):(d=t[1],m=t[2]),K.useEffect(d,m);let p;t[3]===Symbol.for("react.memo_cache_sentinel")?(p=()=>{u(!0)},t[3]=p):p=t[3];const y=p,g=s||a||"Select feature",v=Math.max(12,r.length||14);let x;t[4]!==n?(x=re=>n(re.target.value),t[4]=n,t[5]=x):x=t[5];let E;t[6]!==x||t[7]!==r||t[8]!==v?(E=w.jsx("input",{type:"text",value:r,onChange:x,placeholder:"MCP server URL",size:v,className:"min-w-24 max-w-full px-2 py-1.5 bg-transparent text-neutral-800 dark:text-neutral-100 text-sm placeholder-neutral-400 dark:placeholder-neutral-600 focus:outline-none"}),t[6]=x,t[7]=r,t[8]=v,t[9]=E):E=t[9];let S;t[10]===Symbol.for("react.memo_cache_sentinel")?(S=w.jsx("span",{className:"text-neutral-300 dark:text-neutral-600 shrink-0",children:"/"}),t[10]=S):S=t[10];const T=!r;let A;t[11]!==a||t[12]!==s?(A=s?w.jsx(Ef,{className:"w-4 h-4 text-amber-500 shrink-0"}):a?w.jsx(eo,{className:"w-4 h-4 text-blue-500 shrink-0"}):w.jsx(Ef,{className:"w-4 h-4 text-neutral-400 shrink-0"}),t[11]=a,t[12]=s,t[13]=A):A=t[13];const j=`text-sm whitespace-nowrap ${s||a?"text-neutral-800 dark:text-neutral-100":"text-neutral-400 dark:text-neutral-500"}`;let D;t[14]!==g||t[15]!==j?(D=w.jsx("span",{className:j,children:g}),t[14]=g,t[15]=j,t[16]=D):D=t[16];const I=`w-3.5 h-3.5 text-neutral-400 shrink-0 transition-transform ${l?"rotate-180":""}`;let P;t[17]!==I?(P=w.jsx(ei,{className:I}),t[17]=I,t[18]=P):P=t[18];let q;t[19]!==P||t[20]!==T||t[21]!==A||t[22]!==D?(q=w.jsxs("button",{type:"button",onClick:y,disabled:T,className:"h-8 px-2 flex items-center gap-2 text-sm transition hover:bg-neutral-50 dark:hover:bg-white/5 disabled:opacity-50 disabled:cursor-not-allowed rounded",children:[A,D,P]}),t[19]=P,t[20]=T,t[21]=A,t[22]=D,t[23]=q):q=t[23];let H;t[24]!==l?(H=l&&w.jsx("div",{className:"absolute left-0 z-50 mt-2 w-[min(640px,calc(100vw-4rem))] max-h-[70vh] bg-white dark:bg-[#0f0f0f] border border-neutral-200 dark:border-white/10 rounded-lg shadow-xl overflow-hidden",children:w.jsx("div",{className:"h-105",children:w.jsx(pP,{onSelected:()=>u(!1)})})}),t[24]=l,t[25]=H):H=t[25];let z;t[26]!==q||t[27]!==H?(z=w.jsxs("div",{className:"relative shrink-0",ref:f,children:[q,H]}),t[26]=q,t[27]=H,t[28]=z):z=t[28];let Q;return t[29]!==z||t[30]!==E?(Q=w.jsxs("div",{className:"flex items-center flex-1 min-w-0",children:[E,S,z]}),t[29]=z,t[30]=E,t[31]=Q):Q=t[31],Q}const gP=["Authorization","X-API-Key","X-Request-ID"];function Ig(t){if(!t||typeof t!="object")return{};const e=t,r=(Array.isArray(e.type)?e.type[0]:e.type)||(e.properties?"object":e.items?"array":void 0);if(r==="object"){const a={},l=e.properties||{};return Object.keys(l).forEach(u=>{a[u]=Ig(l[u])}),a}if(r==="array"){const a=e.items||{type:"string"};return[Ig(a)]}const s=e.enum;if(s&&s.length>0)return s[0];switch(r){case"integer":case"number":return 0;case"boolean":return!0;case"string":return e.format==="byte"?"":"string";default:return{}}}function yP(){const[t,e]=K.useState("body"),{request:n,setMcpTool:r,setMcpHeaders:s,setVariables:a}=dn(),l=n?.variables??[],u=n?.mcp?.headers??[],f=n?.mcp?.tool?.arguments??"{}",d=n?.mcp?.tool,m=n?.mcp?.resource,p=d?.schema,y=K.useMemo(()=>{try{return p?Ig(p):void 0}catch{return}},[p]),g=[{id:"headers",label:"Headers",count:u.filter(v=>v.key).length},{id:"body",label:"Body"}];return w.jsxs("div",{className:"space-y-3",children:[w.jsx("div",{className:"flex items-center gap-2",children:w.jsx("div",{role:"tablist",className:"inline-flex gap-1",children:g.map(v=>w.jsxs("button",{role:"tab",onClick:()=>e(v.id),className:`px-2 py-1 text-[11px] font-medium rounded-md transition-all ${t===v.id?"bg-white dark:bg-white/10 text-neutral-800 dark:text-neutral-100 shadow-sm":"text-neutral-500 dark:text-neutral-400 hover:text-neutral-700 dark:hover:text-neutral-200 hover:bg-neutral-100 dark:hover:bg-white/5"}`,children:[v.label,v.count!==void 0&&v.count>0&&w.jsx("span",{className:"ml-1.5 px-1.5 py-0.5 text-[9px] bg-neutral-200 dark:bg-white/10 text-neutral-600 dark:text-neutral-300 rounded-full",children:v.count})]},v.id))})}),w.jsxs("div",{children:[t==="headers"&&w.jsx(Cl,{items:u,onChange:s,keyPlaceholder:"Header",valuePlaceholder:"Value",keySuggestions:gP}),t==="body"&&(d?w.jsx(Ny,{value:f,onChange:v=>r({name:d.name,arguments:v,schema:d.schema}),variables:l,onVariablesChange:a,placeholder:y?JSON.stringify(y,null,2):`{
  "key": "value"
}`,action:y!==void 0?{label:"Fill with schema",onClick:()=>r({name:d.name,arguments:JSON.stringify(y,null,2),schema:d.schema})}:void 0}):m?w.jsx("div",{className:"py-8 text-center text-sm text-neutral-400 dark:text-neutral-500",children:"Resources are read-only; no arguments required."}):w.jsx("div",{className:"py-8 text-center text-sm text-neutral-400 dark:text-neutral-500",children:"Select a tool or resource from the URL bar."}))]})]})}function Fy(t){const e=t.trim();if(e.startsWith("{")&&e.endsWith("}")||e.startsWith("[")&&e.endsWith("]"))try{return JSON.parse(e),"json"}catch{}return e.startsWith("<")&&e.endsWith(">")&&(/<\w+[^>]*>[\s\S]*<\/\w+>/.test(e)||/<\w+[^>]*\/>/.test(e))?"xml":"text"}function bP(t){try{const e=JSON.parse(t);return JSON.stringify(e,null,2)}catch{return t}}function _P(t){try{const n=/(>)(<)(\/*)/g,r=t.replace(n,`$1
$2$3`);let s=0;return r.split(`
`).map(a=>{let l=0;a.match(/.+<\/\w[^>]*>$/)?l=0:a.match(/^<\/\w/)&&s>0?s-=1:a.match(/^<\w[^>]*[^/]>.*$/)?l=1:l=0;const u="  ".repeat(s);return s+=l,u+a}).join(`
`)}catch{return t}}function IE(t){const e=qe.c(10),{type:n,language:r}=t;let s;e[0]!==n?(s=()=>{switch(n){case"text":return w.jsx(D3,{size:12});case"image":return w.jsx(o3,{size:12});case"audio":return w.jsx(f3,{size:12});case"resource":return w.jsx(gg,{size:12});case"resource_link":return w.jsx(gg,{size:12});default:return w.jsx(eo,{size:12})}},e[0]=n,e[1]=s):s=e[1];const a=s;let l;e[2]!==r||e[3]!==n?(l=r&&r!=="text"?r.toUpperCase():n.charAt(0).toUpperCase()+n.slice(1),e[2]=r,e[3]=n,e[4]=l):l=e[4];const u=l;let f;e[5]!==a?(f=a(),e[5]=a,e[6]=f):f=e[6];let d;return e[7]!==u||e[8]!==f?(d=w.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 text-xs font-medium rounded bg-blue-100 dark:bg-blue-500/20 text-blue-700 dark:text-blue-300",children:[f,u]}),e[7]=u,e[8]=f,e[9]=d):d=e[9],d}function Mg(t){const e=qe.c(10),{text:n,className:r}=t,s=r===void 0?"":r;let a;e[0]!==n?(a=Fy(n),e[0]=n,e[1]=a):a=e[1];const l=a;let u;e[2]!==l||e[3]!==n?(u=l==="json"?bP(n):l==="xml"?_P(n):n,e[2]=l,e[3]=n,e[4]=u):u=e[4];const d=fd(u,l);let m;e[5]!==d?(m=w.jsx("div",{className:dd,dangerouslySetInnerHTML:{__html:d}}),e[5]=d,e[6]=m):m=e[6];let p;return e[7]!==s||e[8]!==m?(p=w.jsx("div",{className:s,children:m}),e[7]=s,e[8]=m,e[9]=p):p=e[9],p}function vP(t){const e=qe.c(38),{content:n,index:r,isError:s}=t,[a,l]=K.useState(!0);let u;e[0]!==n.mimeType||e[1]!==n.resource?.uri||e[2]!==n.text||e[3]!==n.type||e[4]!==n.uri?(u=(()=>{if(n.type==="text"){const D=Fy(n.text||"");return{type:"text",language:D,label:D!=="text"?D.toUpperCase():"Text"}}return n.type==="image"?{type:"image",label:"Image",detail:n.mimeType}:n.type==="audio"?{type:"audio",label:"Audio",detail:n.mimeType}:n.type==="resource"?{type:"resource",label:"Resource",detail:n.resource?.uri}:n.type==="resource_link"?{type:"resource_link",label:"Resource Link",detail:n.uri}:{type:"unknown",label:"Unknown"}})(),e[0]=n.mimeType,e[1]=n.resource?.uri,e[2]=n.text,e[3]=n.type,e[4]=n.uri,e[5]=u):u=e[5];const f=u,d=`border rounded-lg overflow-hidden ${s?"border-red-200 dark:border-red-800/50":"border-neutral-200 dark:border-white/10"}`;let m;e[6]!==a?(m=()=>l(!a),e[6]=a,e[7]=m):m=e[7];const p=`w-full flex items-center gap-2 px-3 py-2 transition-colors ${s?"bg-red-50/50 dark:bg-red-900/10 hover:bg-red-100/50 dark:hover:bg-red-900/20":"bg-neutral-50 dark:bg-white/5 hover:bg-neutral-100 dark:hover:bg-white/10"}`;let y;e[8]!==a?(y=a?w.jsx(ei,{className:"w-4 h-4 text-neutral-400"}):w.jsx(id,{className:"w-4 h-4 text-neutral-400"}),e[8]=a,e[9]=y):y=e[9];const g=r+1;let v;e[10]!==g?(v=w.jsxs("span",{className:"text-xs font-mono text-neutral-500 dark:text-neutral-400",children:["#",g]}),e[10]=g,e[11]=v):v=e[11];let x;e[12]!==f.language||e[13]!==f.type?(x=w.jsx(IE,{type:f.type,language:f.language}),e[12]=f.language,e[13]=f.type,e[14]=x):x=e[14];let E;e[15]!==f.detail?(E=f.detail&&w.jsx("span",{className:"text-xs text-neutral-500 dark:text-neutral-400 font-mono truncate",children:f.detail}),e[15]=f.detail,e[16]=E):E=e[16];let S;e[17]!==m||e[18]!==p||e[19]!==y||e[20]!==v||e[21]!==x||e[22]!==E?(S=w.jsxs("button",{onClick:m,className:p,children:[y,v,x,E]}),e[17]=m,e[18]=p,e[19]=y,e[20]=v,e[21]=x,e[22]=E,e[23]=S):S=e[23];let T;e[24]!==n.data||e[25]!==n.description||e[26]!==n.mimeType||e[27]!==n.name||e[28]!==n.resource||e[29]!==n.text||e[30]!==n.type||e[31]!==n.uri||e[32]!==a?(T=a&&w.jsxs("div",{className:"p-3 bg-white dark:bg-transparent",children:[n.type==="text"&&n.text&&w.jsx(Mg,{text:n.text}),n.type==="image"&&n.data&&w.jsx("img",{src:n.data.startsWith("data:")?n.data:`data:${n.mimeType||"image/png"};base64,${n.data}`,alt:"MCP Image Response",className:"max-w-full h-auto rounded"}),n.type==="audio"&&n.data&&w.jsx("audio",{controls:!0,className:"w-full",children:w.jsx("source",{src:n.data.startsWith("data:")?n.data:`data:${n.mimeType||"audio/wav"};base64,${n.data}`,type:n.mimeType||"audio/wav"})}),n.type==="resource"&&n.resource&&w.jsxs("div",{className:"space-y-2",children:[n.resource.text&&w.jsx(Mg,{text:n.resource.text}),n.resource.blob&&n.resource.mimeType?.startsWith("image/")&&w.jsx("img",{src:`data:${n.resource.mimeType};base64,${n.resource.blob}`,alt:n.resource.uri,className:"max-w-full h-auto rounded"}),n.resource.blob&&n.resource.mimeType?.startsWith("audio/")&&w.jsx("audio",{controls:!0,className:"w-full",children:w.jsx("source",{src:`data:${n.resource.mimeType};base64,${n.resource.blob}`,type:n.resource.mimeType})}),n.resource.blob&&!n.resource.mimeType?.startsWith("image/")&&!n.resource.mimeType?.startsWith("audio/")&&w.jsxs("div",{className:"text-sm text-neutral-600 dark:text-neutral-300",children:["Binary content (",Math.round(n.resource.blob.length*.75)," bytes)"]})]}),n.type==="resource_link"&&w.jsxs("div",{className:"space-y-2",children:[n.name&&w.jsx("div",{className:"font-medium text-neutral-900 dark:text-white",children:n.name}),n.description&&w.jsx("div",{className:"text-sm text-neutral-600 dark:text-neutral-300",children:n.description}),n.uri&&w.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[w.jsx(gg,{size:14,className:"text-neutral-400 shrink-0"}),w.jsx("a",{href:n.uri,target:"_blank",rel:"noopener noreferrer",className:"font-mono text-blue-600 dark:text-blue-400 hover:underline break-all",children:n.uri})]}),n.mimeType&&w.jsx("div",{className:"text-xs text-neutral-500 dark:text-neutral-400 font-mono",children:n.mimeType})]})]}),e[24]=n.data,e[25]=n.description,e[26]=n.mimeType,e[27]=n.name,e[28]=n.resource,e[29]=n.text,e[30]=n.type,e[31]=n.uri,e[32]=a,e[33]=T):T=e[33];let A;return e[34]!==S||e[35]!==T||e[36]!==d?(A=w.jsxs("div",{className:d,children:[S,T]}),e[34]=S,e[35]=T,e[36]=d,e[37]=A):A=e[37],A}function xP(t){const e=qe.c(29),{content:n,index:r}=t,[s,a]=K.useState(!0);let l;e[0]!==n.blob||e[1]!==n.mimeType||e[2]!==n.text?(l=(()=>{if(n.text){const T=Fy(n.text);return{label:T!=="text"?T.toUpperCase():"Text",language:T}}return n.blob&&n.mimeType?.startsWith("image/")?{label:"Image",detail:n.mimeType}:n.blob&&n.mimeType?.startsWith("audio/")?{label:"Audio",detail:n.mimeType}:{label:"Binary",detail:n.mimeType}})(),e[0]=n.blob,e[1]=n.mimeType,e[2]=n.text,e[3]=l):l=e[3];const u=l;let f;e[4]!==s?(f=()=>a(!s),e[4]=s,e[5]=f):f=e[5];let d;e[6]!==s?(d=s?w.jsx(ei,{className:"w-4 h-4 text-neutral-400"}):w.jsx(id,{className:"w-4 h-4 text-neutral-400"}),e[6]=s,e[7]=d):d=e[7];const m=r+1;let p;e[8]!==m?(p=w.jsxs("span",{className:"text-xs font-mono text-neutral-500 dark:text-neutral-400",children:["#",m]}),e[8]=m,e[9]=p):p=e[9];let y;e[10]!==u.language?(y=w.jsx(IE,{type:"resource",language:u.language}),e[10]=u.language,e[11]=y):y=e[11];let g;e[12]!==n.uri?(g=w.jsx("span",{className:"text-xs text-neutral-500 dark:text-neutral-400 font-mono truncate",title:n.uri,children:n.uri}),e[12]=n.uri,e[13]=g):g=e[13];let v;e[14]!==f||e[15]!==d||e[16]!==p||e[17]!==y||e[18]!==g?(v=w.jsxs("button",{onClick:f,className:"w-full flex items-center gap-2 px-3 py-2 bg-neutral-50 dark:bg-white/5 hover:bg-neutral-100 dark:hover:bg-white/10 transition-colors",children:[d,p,y,g]}),e[14]=f,e[15]=d,e[16]=p,e[17]=y,e[18]=g,e[19]=v):v=e[19];let x;e[20]!==n.blob||e[21]!==n.mimeType||e[22]!==n.text||e[23]!==n.uri||e[24]!==s?(x=s&&w.jsxs("div",{className:"p-3 bg-white dark:bg-transparent",children:[n.text&&w.jsx(Mg,{text:n.text}),n.blob&&n.mimeType?.startsWith("image/")&&w.jsx("img",{src:`data:${n.mimeType};base64,${n.blob}`,alt:n.uri,className:"max-w-full h-auto rounded"}),n.blob&&n.mimeType?.startsWith("audio/")&&w.jsx("audio",{controls:!0,className:"w-full",children:w.jsx("source",{src:`data:${n.mimeType};base64,${n.blob}`,type:n.mimeType})}),n.blob&&!n.mimeType?.startsWith("image/")&&!n.mimeType?.startsWith("audio/")&&w.jsxs("div",{className:"text-sm text-neutral-600 dark:text-neutral-300",children:["Binary content (",Math.round(n.blob.length*.75)," bytes)"]}),!n.text&&!n.blob&&w.jsx("div",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:"Empty resource"})]}),e[20]=n.blob,e[21]=n.mimeType,e[22]=n.text,e[23]=n.uri,e[24]=s,e[25]=x):x=e[25];let E;return e[26]!==v||e[27]!==x?(E=w.jsxs("div",{className:"border border-neutral-200 dark:border-white/10 rounded-lg overflow-hidden",children:[v,x]}),e[26]=v,e[27]=x,e[28]=E):E=e[28],E}function wP(t){const e=qe.c(26),{toolResponse:n,resourceResponse:r}=t;if(n){const s=n.isError,a=n.content.length;let l;e[0]!==s?(l=s&&w.jsxs("div",{className:"flex items-center gap-2 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg px-4 py-3 mb-3",children:[w.jsx(Dk,{className:"text-red-500 dark:text-red-400 shrink-0",size:18}),w.jsx("span",{className:"text-red-700 dark:text-red-400 text-sm font-medium",children:"Tool returned an error"})]}),e[0]=s,e[1]=l):l=e[1];let u;e[2]!==a?(u=a>0&&w.jsx("div",{className:"flex items-center gap-2 mb-3",children:w.jsxs("span",{className:"text-xs font-medium text-neutral-500 dark:text-neutral-400",children:[a," item",a!==1?"s":""]})}),e[2]=a,e[3]=u):u=e[3];let f;if(e[4]!==s||e[5]!==n.content){let p;e[7]!==s?(p=(y,g)=>w.jsx(vP,{content:y,index:g,isError:s},g),e[7]=s,e[8]=p):p=e[8],f=n.content.map(p),e[4]=s,e[5]=n.content,e[6]=f}else f=e[6];let d;e[9]!==a?(d=a===0&&w.jsx("div",{className:"text-sm text-neutral-500 dark:text-neutral-400 text-center py-4",children:"No content returned"}),e[9]=a,e[10]=d):d=e[10];let m;return e[11]!==l||e[12]!==u||e[13]!==f||e[14]!==d?(m=w.jsxs("div",{className:"space-y-2",children:[l,u,f,d]}),e[11]=l,e[12]=u,e[13]=f,e[14]=d,e[15]=m):m=e[15],m}if(r){const s=r.contents.length;let a;e[16]!==s?(a=s>0&&w.jsx("div",{className:"flex items-center gap-2 mb-3",children:w.jsxs("span",{className:"text-xs font-medium text-neutral-500 dark:text-neutral-400",children:[s," resource",s!==1?"s":""]})}),e[16]=s,e[17]=a):a=e[17];let l;e[18]!==r.contents?(l=r.contents.map(SP),e[18]=r.contents,e[19]=l):l=e[19];let u;e[20]!==s?(u=s===0&&w.jsx("div",{className:"text-sm text-neutral-500 dark:text-neutral-400 text-center py-4",children:"No content returned"}),e[20]=s,e[21]=u):u=e[21];let f;return e[22]!==a||e[23]!==l||e[24]!==u?(f=w.jsxs("div",{className:"space-y-2",children:[a,l,u]}),e[22]=a,e[23]=l,e[24]=u,e[25]=f):f=e[25],f}return null}function SP(t,e){return w.jsx(xP,{content:t,index:e},e)}function kP(t){const e=qe.c(9),{toolResponse:n,resourceResponse:r,viewMode:s}=t,a=s===void 0?"pretty":s,l=n||r;let u;e[0]!==l?(u=l?new Blob([JSON.stringify(l,null,2)],{type:"application/json"}):null,e[0]=l,e[1]=u):u=e[1];const f=u;let d;e[2]!==f||e[3]!==r||e[4]!==n||e[5]!==a?(d=a==="pretty"?w.jsx(wP,{toolResponse:n,resourceResponse:r}):f&&w.jsx(qy,{content:f}),e[2]=f,e[3]=r,e[4]=n,e[5]=a,e[6]=d):d=e[6];let m;return e[7]!==d?(m=w.jsx("div",{className:"h-full flex flex-col overflow-hidden",children:w.jsx("div",{className:"flex-1 min-h-0 overflow-auto",children:d})}),e[7]=d,e[8]=m):m=e[8],m}function EP(){const{request:t,setUrl:e,setOpenAIModel:n}=dn(),r=t?.url??"",s=t?.openai?.model??"",[a,l]=K.useState([]),[u,f]=K.useState(!1),[d,m]=K.useState(!1),[p,y]=K.useState(null),g=K.useRef(null);K.useEffect(()=>{if(!u)return;const T=A=>{g.current&&!g.current.contains(A.target)&&f(!1)};return document.addEventListener("mousedown",T),()=>document.removeEventListener("mousedown",T)},[u]);const v=K.useCallback(async()=>{if(r){m(!0),y(null);try{const T=r.replace(/\/$/,""),A=await fetch(`${T}/v1/models`);if(!A.ok)throw new Error(`HTTP ${A.status}`);const D=((await A.json()).data||[]).map(I=>I.id).sort();l(D),!s&&D.length>0&&n(D[0])}catch(T){const A=T instanceof Error?T.message:"Failed to fetch models";y(A),l([])}finally{m(!1)}}},[r,s,n]);K.useEffect(()=>{if(!r)return;const T=setTimeout(()=>{v()},500);return()=>clearTimeout(T)},[r]);const x=()=>{f(!0)},E=T=>{n(T),f(!1)},S=Math.max(12,r.length||20);return w.jsxs("div",{className:"flex items-center flex-1 min-w-0",children:[w.jsx("input",{type:"text",value:r,onChange:T=>e(T.target.value),placeholder:"OpenAI API URL (e.g., https://api.openai.com)",size:S,className:"min-w-24 max-w-full px-2 py-1.5 bg-transparent text-neutral-800 dark:text-neutral-100 text-sm placeholder-neutral-400 dark:placeholder-neutral-600 focus:outline-none"}),w.jsx("span",{className:"text-neutral-300 dark:text-neutral-600 shrink-0",children:"/"}),w.jsxs("div",{className:"relative shrink-0",ref:g,children:[w.jsxs("button",{type:"button",onClick:x,disabled:!r,className:"h-8 px-2 flex items-center gap-2 text-sm transition hover:bg-neutral-50 dark:hover:bg-white/5 disabled:opacity-50 disabled:cursor-not-allowed rounded",children:[w.jsx(WD,{className:`w-4 h-4 shrink-0 ${s?"text-violet-500":"text-neutral-400"}`}),w.jsx("span",{className:`text-sm whitespace-nowrap ${s?"text-neutral-800 dark:text-neutral-100":"text-neutral-400 dark:text-neutral-500"}`,children:s||"Select model"}),d?w.jsx(kf,{className:"w-3.5 h-3.5 text-neutral-400 shrink-0 animate-spin"}):w.jsx(ei,{className:`w-3.5 h-3.5 text-neutral-400 shrink-0 transition-transform ${u?"rotate-180":""}`})]}),u&&w.jsxs("div",{className:"absolute left-0 z-50 mt-2 w-64 max-h-80 bg-white dark:bg-[#0f0f0f] border border-neutral-200 dark:border-white/10 rounded-lg shadow-xl overflow-hidden",children:[w.jsxs("div",{className:"p-2 border-b border-neutral-200 dark:border-white/10 flex items-center justify-between",children:[w.jsxs("span",{className:"text-xs font-medium text-neutral-500 dark:text-neutral-400",children:["Models (",a.length,")"]}),w.jsx("button",{type:"button",onClick:T=>{T.stopPropagation(),v()},disabled:d,className:"p-1 hover:bg-neutral-100 dark:hover:bg-white/10 rounded transition-colors disabled:opacity-50",title:"Refresh models",children:w.jsx(kf,{className:`w-3.5 h-3.5 text-neutral-400 ${d?"animate-spin":""}`})})]}),w.jsx("div",{className:"overflow-y-auto max-h-64",children:p?w.jsx("div",{className:"p-3 text-sm text-red-500 dark:text-red-400",children:p}):a.length===0?w.jsx("div",{className:"p-3 text-sm text-neutral-400 dark:text-neutral-500",children:d?"Loading models...":"No models available"}):a.map(T=>w.jsx("button",{type:"button",onClick:()=>E(T),className:`w-full px-3 py-2 text-left text-sm transition-colors ${s===T?"bg-violet-50 dark:bg-violet-500/10 text-violet-700 dark:text-violet-300":"text-neutral-700 dark:text-neutral-300 hover:bg-neutral-50 dark:hover:bg-white/5"}`,children:T},T))})]})]})]})}function CP(){return Math.random().toString(36).substring(2,9)}function h1(){return{id:CP(),role:"user",content:[{type:"input_text",text:""}]}}function TP(t){if(t.content.length===0)return!0;const e=t.content[0];switch(e.type){case"input_text":return!e.text;case"input_image":return!e.image_url;case"input_file":return!e.file_data}}function AP(){const t=qe.c(16),{request:e,setOpenAIChatInput:n}=dn();let r;t[0]===Symbol.for("react.memo_cache_sentinel")?(r={},t[0]=r):r=t[0];const s=K.useRef(r);let a,l;if(t[1]!==e?.openai?.chat?.input||t[2]!==n){const d=e?.openai?.chat?.input??[],m=(j,D)=>{const I=d.map(q=>q.id===j?{...q,...D}:q),P=I[I.length-1];P&&!TP(P)&&I.push(h1()),n(I)};let p;t[5]!==m?(p=(j,D)=>{m(j,{content:[D]})},t[5]=m,t[6]=p):p=t[6];const y=p,g=j=>{if(d.length===1){n([h1()]);return}n(d.filter(D=>D.id!==j))};let v;t[7]!==y?(v=(j,D)=>{const I=D.target.files?.[0];if(D.target.value="",!I)return;const P=new FileReader;P.onload=()=>{const q=P.result,H=q.split(",")[1];I.type.startsWith("image/")?y(j,{type:"input_image",image_url:q}):y(j,{type:"input_file",filename:I.name,file_data:H})},P.readAsDataURL(I)},t[7]=y,t[8]=v):v=t[8];const x=v;let E;t[9]!==y?(E=(j,D)=>{e:switch(D){case"input_text":{y(j,{type:"input_text",text:""});break e}case"input_image":{y(j,{type:"input_image",image_url:""});break e}case"input_file":y(j,{type:"input_file",filename:"",file_data:""})}},t[9]=y,t[10]=E):E=t[10];const S=E,T=j=>{const D=d.find(P=>P.id===j);if(!D)return;const I=D.content[0];I.type==="input_image"?y(j,{type:"input_image",image_url:""}):I.type==="input_file"&&y(j,{type:"input_file",filename:"",file_data:""})},A=j=>{const D=j.content[0];switch(D.type){case"input_text":return w.jsx("input",{type:"text",value:D.text,onChange:I=>y(j.id,{type:"input_text",text:I.target.value}),placeholder:"Message content...",className:"w-full px-2 py-1 bg-white dark:bg-white/5 border border-neutral-300 dark:border-white/10 rounded text-xs text-neutral-800 dark:text-neutral-100 placeholder-neutral-400 dark:placeholder-neutral-500 focus:outline-none focus:border-neutral-400 dark:focus:border-white/20 transition-colors"});case"input_image":return D.image_url?w.jsxs("div",{className:"flex items-center gap-2 px-2 py-1 bg-white dark:bg-white/5 border border-neutral-300 dark:border-white/10 rounded",children:[w.jsx("img",{src:D.image_url,alt:"Uploaded",className:"w-5 h-5 object-cover rounded"}),w.jsx("span",{className:"text-xs text-neutral-600 dark:text-neutral-400 truncate flex-1",children:"Image"}),w.jsx("button",{type:"button",onClick:()=>T(j.id),className:"p-0.5 hover:bg-neutral-100 dark:hover:bg-white/10 rounded transition-colors",children:w.jsx(Ul,{className:"w-3 h-3 text-neutral-400"})})]}):w.jsxs("label",{className:"flex items-center gap-2 px-2 py-1 bg-white dark:bg-white/5 border border-dashed border-neutral-300 dark:border-white/20 rounded cursor-pointer hover:bg-neutral-50 dark:hover:bg-white/10 transition-colors",children:[w.jsx(yg,{className:"w-3.5 h-3.5 text-neutral-400"}),w.jsx("span",{className:"text-xs text-neutral-400",children:"Upload image..."}),w.jsx("input",{ref:I=>{s.current[j.id]=I},type:"file",accept:"image/*",onChange:I=>x(j.id,I),className:"hidden"})]});case"input_file":return D.filename?w.jsxs("div",{className:"flex items-center gap-2 px-2 py-1 bg-white dark:bg-white/5 border border-neutral-300 dark:border-white/10 rounded",children:[w.jsx(eo,{className:"w-3.5 h-3.5 text-violet-500 shrink-0"}),w.jsx("span",{className:"text-xs text-neutral-600 dark:text-neutral-400 truncate flex-1",children:D.filename}),w.jsxs("span",{className:"text-[10px] text-neutral-400",children:["(",Math.round(D.file_data.length*.75/1024),"KB)"]}),w.jsx("button",{type:"button",onClick:()=>T(j.id),className:"p-0.5 hover:bg-neutral-100 dark:hover:bg-white/10 rounded transition-colors",children:w.jsx(Ul,{className:"w-3 h-3 text-neutral-400"})})]}):w.jsxs("label",{className:"flex items-center gap-2 px-2 py-1 bg-white dark:bg-white/5 border border-dashed border-neutral-300 dark:border-white/20 rounded cursor-pointer hover:bg-neutral-50 dark:hover:bg-white/10 transition-colors",children:[w.jsx(yg,{className:"w-3.5 h-3.5 text-neutral-400"}),w.jsx("span",{className:"text-xs text-neutral-400",children:"Upload file..."}),w.jsx("input",{ref:I=>{s.current[j.id]=I},type:"file",accept:".pdf,.doc,.docx,.txt",onChange:I=>x(j.id,I),className:"hidden"})]})}};l="w-full",a=d.map(j=>w.jsxs("tr",{className:"border-b border-neutral-100 dark:border-white/5 last:border-0",children:[w.jsx("td",{className:"w-24 px-1.5 py-1.5",children:w.jsxs("select",{value:j.role,onChange:D=>m(j.id,{role:D.target.value}),className:"w-full px-2 py-1 bg-white dark:bg-white/5 border border-neutral-300 dark:border-white/10 rounded text-xs text-neutral-700 dark:text-neutral-300 focus:outline-none focus:border-neutral-400 dark:focus:border-white/20 transition-colors",children:[w.jsx("option",{value:"system",children:"System"}),w.jsx("option",{value:"user",children:"User"}),w.jsx("option",{value:"assistant",children:"Assistant"})]})}),w.jsx("td",{className:"w-20 px-1.5 py-1.5",children:w.jsxs("select",{value:j.content[0]?.type??"input_text",onChange:D=>S(j.id,D.target.value),className:"w-full px-2 py-1 bg-white dark:bg-white/5 border border-neutral-300 dark:border-white/10 rounded text-xs text-neutral-700 dark:text-neutral-300 focus:outline-none focus:border-neutral-400 dark:focus:border-white/20 transition-colors",children:[w.jsx("option",{value:"input_text",children:"Text"}),w.jsx("option",{value:"input_image",children:"Image"}),w.jsx("option",{value:"input_file",children:"File"})]})}),w.jsx("td",{className:"px-1.5 py-1.5",children:A(j)}),w.jsx("td",{className:"w-8 pr-1.5 py-1.5",children:w.jsx("button",{type:"button",onClick:()=>g(j.id),className:"p-1 rounded hover:bg-red-50 dark:hover:bg-red-500/10 transition-colors text-neutral-300 dark:text-neutral-600 hover:text-red-500",title:"Remove message",children:w.jsx(tc,{className:"w-3.5 h-3.5"})})})]},j.id)),t[1]=e?.openai?.chat?.input,t[2]=n,t[3]=a,t[4]=l}else a=t[3],l=t[4];let u;t[11]!==a?(u=w.jsx("tbody",{children:a}),t[11]=a,t[12]=u):u=t[12];let f;return t[13]!==l||t[14]!==u?(f=w.jsx("div",{children:w.jsx("table",{className:l,children:u})}),t[13]=l,t[14]=u,t[15]=f):f=t[15],f}function RP(){const t=qe.c(19),{request:e,setOpenAIBodyType:n,setOpenAIImagePrompt:r}=dn(),a=!!e?.openai?.chat?"chat":"image",l=e?.openai?.image?.prompt??"";let u;t[0]===Symbol.for("react.memo_cache_sentinel")?(u={id:"chat",label:"Chat"},t[0]=u):u=t[0];let f;t[1]===Symbol.for("react.memo_cache_sentinel")?(f=[u,{id:"image",label:"Image"}],t[1]=f):f=t[1];const d=f;let m;t[2]!==n?(m=S=>{n(S)},t[2]=n,t[3]=m):m=t[3];const p=m;let y;t[4]!==a||t[5]!==p?(y=w.jsx("div",{className:"flex items-center gap-2",children:w.jsx("div",{role:"tablist",className:"inline-flex gap-1",children:d.map(S=>w.jsx("button",{role:"tab",onClick:()=>p(S.id),className:`px-2 py-1 text-[11px] font-medium rounded-md transition-all ${a===S.id?"bg-white dark:bg-white/10 text-neutral-800 dark:text-neutral-100 shadow-sm":"text-neutral-500 dark:text-neutral-400 hover:text-neutral-700 dark:hover:text-neutral-200 hover:bg-neutral-100 dark:hover:bg-white/5"}`,children:S.label},S.id))})}),t[4]=a,t[5]=p,t[6]=y):y=t[6];let g;t[7]!==a?(g=a==="chat"&&w.jsx(AP,{}),t[7]=a,t[8]=g):g=t[8];let v;t[9]!==a||t[10]!==l||t[11]!==r?(v=a==="image"&&w.jsxs("div",{className:"space-y-2",children:[w.jsx("label",{className:"block text-xs font-medium text-neutral-500 dark:text-neutral-400",children:"Prompt"}),w.jsx("textarea",{value:l,onChange:S=>r(S.target.value),placeholder:"Describe the image you want to generate...",rows:4,className:"w-full px-3 py-2 text-sm bg-neutral-50 dark:bg-white/5 border border-neutral-200 dark:border-white/10 rounded-lg focus:outline-none focus:ring-2 focus:ring-violet-500/50 resize-none text-neutral-800 dark:text-neutral-100 placeholder-neutral-400 dark:placeholder-neutral-600"})]}),t[9]=a,t[10]=l,t[11]=r,t[12]=v):v=t[12];let x;t[13]!==g||t[14]!==v?(x=w.jsxs("div",{children:[g,v]}),t[13]=g,t[14]=v,t[15]=x):x=t[15];let E;return t[16]!==y||t[17]!==x?(E=w.jsxs("div",{className:"space-y-3",children:[y,x]}),t[16]=y,t[17]=x,t[18]=E):E=t[18],E}const OP=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,NP=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,IP={};function p1(t,e){return(IP.jsx?NP:OP).test(t)}var Ca={},ym,m1;function MP(){if(m1)return ym;m1=1;var t=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,e=/\n/g,n=/^\s*/,r=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,s=/^:\s*/,a=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,l=/^[;\s]*/,u=/^\s+|\s+$/g,f=`
`,d="/",m="*",p="",y="comment",g="declaration";function v(E,S){if(typeof E!="string")throw new TypeError("First argument must be a string");if(!E)return[];S=S||{};var T=1,A=1;function j(X){var V=X.match(e);V&&(T+=V.length);var $=X.lastIndexOf(f);A=~$?X.length-$:A+X.length}function D(){var X={line:T,column:A};return function(V){return V.position=new I(X),H(),V}}function I(X){this.start=X,this.end={line:T,column:A},this.source=S.source}I.prototype.content=E;function P(X){var V=new Error(S.source+":"+T+":"+A+": "+X);if(V.reason=X,V.filename=S.source,V.line=T,V.column=A,V.source=E,!S.silent)throw V}function q(X){var V=X.exec(E);if(V){var $=V[0];return j($),E=E.slice($.length),V}}function H(){q(n)}function z(X){var V;for(X=X||[];V=Q();)V!==!1&&X.push(V);return X}function Q(){var X=D();if(!(d!=E.charAt(0)||m!=E.charAt(1))){for(var V=2;p!=E.charAt(V)&&(m!=E.charAt(V)||d!=E.charAt(V+1));)++V;if(V+=2,p===E.charAt(V-1))return P("End of comment missing");var $=E.slice(2,V-2);return A+=2,j($),E=E.slice(V),A+=2,X({type:y,comment:$})}}function re(){var X=D(),V=q(r);if(V){if(Q(),!q(s))return P("property missing ':'");var $=q(a),G=X({type:g,property:x(V[0].replace(t,p)),value:$?x($[0].replace(t,p)):p});return q(l),G}}function pe(){var X=[];z(X);for(var V;V=re();)V!==!1&&(X.push(V),z(X));return X}return H(),pe()}function x(E){return E?E.replace(u,p):p}return ym=v,ym}var g1;function DP(){if(g1)return Ca;g1=1;var t=Ca&&Ca.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ca,"__esModule",{value:!0}),Ca.default=n;const e=t(MP());function n(r,s){let a=null;if(!r||typeof r!="string")return a;const l=(0,e.default)(r),u=typeof s=="function";return l.forEach(f=>{if(f.type!=="declaration")return;const{property:d,value:m}=f;u?s(d,m,f):m&&(a=a||{},a[d]=m)}),a}return Ca}var rl={},y1;function jP(){if(y1)return rl;y1=1,Object.defineProperty(rl,"__esModule",{value:!0}),rl.camelCase=void 0;var t=/^--[a-zA-Z0-9_-]+$/,e=/-([a-z])/g,n=/^[^-]+$/,r=/^-(webkit|moz|ms|o|khtml)-/,s=/^-(ms)-/,a=function(d){return!d||n.test(d)||t.test(d)},l=function(d,m){return m.toUpperCase()},u=function(d,m){return"".concat(m,"-")},f=function(d,m){return m===void 0&&(m={}),a(d)?d:(d=d.toLowerCase(),m.reactCompat?d=d.replace(s,u):d=d.replace(r,u),d.replace(e,l))};return rl.camelCase=f,rl}var sl,b1;function LP(){if(b1)return sl;b1=1;var t=sl&&sl.__importDefault||function(s){return s&&s.__esModule?s:{default:s}},e=t(DP()),n=jP();function r(s,a){var l={};return!s||typeof s!="string"||(0,e.default)(s,function(u,f){u&&f&&(l[(0,n.camelCase)(u,a)]=f)}),l}return r.default=r,sl=r,sl}var zP=LP();const PP=WS(zP),ME=DE("end"),Vy=DE("start");function DE(t){return e;function e(n){const r=n&&n.position&&n.position[t]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function BP(t){const e=Vy(t),n=ME(t);if(e&&n)return{start:e,end:n}}function Al(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?_1(t.position):"start"in t||"end"in t?_1(t):"line"in t||"column"in t?Dg(t):""}function Dg(t){return v1(t&&t.line)+":"+v1(t&&t.column)}function _1(t){return Dg(t&&t.start)+"-"+Dg(t&&t.end)}function v1(t){return t&&typeof t=="number"?t:1}class xn extends Error{constructor(e,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let s="",a={},l=!1;if(n&&("line"in n&&"column"in n?a={place:n}:"start"in n&&"end"in n?a={place:n}:"type"in n?a={ancestors:[n],place:n.position}:a={...n}),typeof e=="string"?s=e:!a.cause&&e&&(l=!0,s=e.message,a.cause=e),!a.ruleId&&!a.source&&typeof r=="string"){const f=r.indexOf(":");f===-1?a.ruleId=r:(a.source=r.slice(0,f),a.ruleId=r.slice(f+1))}if(!a.place&&a.ancestors&&a.ancestors){const f=a.ancestors[a.ancestors.length-1];f&&(a.place=f.position)}const u=a.place&&"start"in a.place?a.place.start:a.place;this.ancestors=a.ancestors||void 0,this.cause=a.cause||void 0,this.column=u?u.column:void 0,this.fatal=void 0,this.file="",this.message=s,this.line=u?u.line:void 0,this.name=Al(a.place)||"1:1",this.place=a.place||void 0,this.reason=this.message,this.ruleId=a.ruleId||void 0,this.source=a.source||void 0,this.stack=l&&a.cause&&typeof a.cause.stack=="string"?a.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}xn.prototype.file="";xn.prototype.name="";xn.prototype.reason="";xn.prototype.message="";xn.prototype.stack="";xn.prototype.column=void 0;xn.prototype.line=void 0;xn.prototype.ancestors=void 0;xn.prototype.cause=void 0;xn.prototype.fatal=void 0;xn.prototype.place=void 0;xn.prototype.ruleId=void 0;xn.prototype.source=void 0;const Hy={}.hasOwnProperty,$P=new Map,UP=/[A-Z]/g,qP=new Set(["table","tbody","thead","tfoot","tr"]),FP=new Set(["td","th"]),jE="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function VP(t,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=e.filePath||void 0;let r;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=XP(n,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=YP(n,e.jsx,e.jsxs)}const s={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:r,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?sc:fE,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},a=LE(s,t,void 0);return a&&typeof a!="string"?a:s.create(t,s.Fragment,{children:a||void 0},void 0)}function LE(t,e,n){if(e.type==="element")return HP(t,e,n);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return GP(t,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return ZP(t,e,n);if(e.type==="mdxjsEsm")return KP(t,e);if(e.type==="root")return QP(t,e,n);if(e.type==="text")return JP(t,e)}function HP(t,e,n){const r=t.schema;let s=r;e.tagName.toLowerCase()==="svg"&&r.space==="html"&&(s=sc,t.schema=s),t.ancestors.push(e);const a=PE(t,e.tagName,!1),l=WP(t,e);let u=Ky(t,e);return qP.has(e.tagName)&&(u=u.filter(function(f){return typeof f=="string"?!ad(f):!0})),zE(t,l,a,e),Gy(l,u),t.ancestors.pop(),t.schema=r,t.create(e,a,l,n)}function GP(t,e){if(e.data&&e.data.estree&&t.evaluater){const r=e.data.estree.body[0];return r.type,t.evaluater.evaluateExpression(r.expression)}Gl(t,e.position)}function KP(t,e){if(e.data&&e.data.estree&&t.evaluater)return t.evaluater.evaluateProgram(e.data.estree);Gl(t,e.position)}function ZP(t,e,n){const r=t.schema;let s=r;e.name==="svg"&&r.space==="html"&&(s=sc,t.schema=s),t.ancestors.push(e);const a=e.name===null?t.Fragment:PE(t,e.name,!0),l=e6(t,e),u=Ky(t,e);return zE(t,l,a,e),Gy(l,u),t.ancestors.pop(),t.schema=r,t.create(e,a,l,n)}function QP(t,e,n){const r={};return Gy(r,Ky(t,e)),t.create(e,t.Fragment,r,n)}function JP(t,e){return e.value}function zE(t,e,n,r){typeof n!="string"&&n!==t.Fragment&&t.passNode&&(e.node=r)}function Gy(t,e){if(e.length>0){const n=e.length>1?e:e[0];n&&(t.children=n)}}function YP(t,e,n){return r;function r(s,a,l,u){const d=Array.isArray(l.children)?n:e;return u?d(a,l,u):d(a,l)}}function XP(t,e){return n;function n(r,s,a,l){const u=Array.isArray(a.children),f=Vy(r);return e(s,a,l,u,{columnNumber:f?f.column-1:void 0,fileName:t,lineNumber:f?f.line:void 0},void 0)}}function WP(t,e){const n={};let r,s;for(s in e.properties)if(s!=="children"&&Hy.call(e.properties,s)){const a=t6(t,s,e.properties[s]);if(a){const[l,u]=a;t.tableCellAlignToStyle&&l==="align"&&typeof u=="string"&&FP.has(e.tagName)?r=u:n[l]=u}}if(r){const a=n.style||(n.style={});a[t.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function e6(t,e){const n={};for(const r of e.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&t.evaluater){const a=r.data.estree.body[0];a.type;const l=a.expression;l.type;const u=l.properties[0];u.type,Object.assign(n,t.evaluater.evaluateExpression(u.argument))}else Gl(t,e.position);else{const s=r.name;let a;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&t.evaluater){const u=r.value.data.estree.body[0];u.type,a=t.evaluater.evaluateExpression(u.expression)}else Gl(t,e.position);else a=r.value===null?!0:r.value;n[s]=a}return n}function Ky(t,e){const n=[];let r=-1;const s=t.passKeys?new Map:$P;for(;++r<e.children.length;){const a=e.children[r];let l;if(t.passKeys){const f=a.type==="element"?a.tagName:a.type==="mdxJsxFlowElement"||a.type==="mdxJsxTextElement"?a.name:void 0;if(f){const d=s.get(f)||0;l=f+"-"+d,s.set(f,d+1)}}const u=LE(t,a,l);u!==void 0&&n.push(u)}return n}function t6(t,e,n){const r=uE(t.schema,e);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?hE(n):pE(n)),r.property==="style"){let s=typeof n=="object"?n:n6(t,String(n));return t.stylePropertyNameCase==="css"&&(s=r6(s)),["style",s]}return[t.elementAttributeNameCase==="react"&&r.space?wL[r.property]||r.property:r.attribute,n]}}function n6(t,e){try{return PP(e,{reactCompat:!0})}catch(n){if(t.ignoreInvalidStyle)return{};const r=n,s=new xn("Cannot parse `style` attribute",{ancestors:t.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw s.file=t.filePath||void 0,s.url=jE+"#cannot-parse-style-attribute",s}}function PE(t,e,n){let r;if(!n)r={type:"Literal",value:e};else if(e.includes(".")){const s=e.split(".");let a=-1,l;for(;++a<s.length;){const u=p1(s[a])?{type:"Identifier",name:s[a]}:{type:"Literal",value:s[a]};l=l?{type:"MemberExpression",object:l,property:u,computed:!!(a&&u.type==="Literal"),optional:!1}:u}r=l}else r=p1(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(r.type==="Literal"){const s=r.value;return Hy.call(t.components,s)?t.components[s]:s}if(t.evaluater)return t.evaluater.evaluateExpression(r);Gl(t)}function Gl(t,e){const n=new xn("Cannot handle MDX estrees without `createEvaluater`",{ancestors:t.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=t.filePath||void 0,n.url=jE+"#cannot-handle-mdx-estrees-without-createevaluater",n}function r6(t){const e={};let n;for(n in t)Hy.call(t,n)&&(e[s6(n)]=t[n]);return e}function s6(t){let e=t.replace(UP,i6);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function i6(t){return"-"+t.toLowerCase()}const bm={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},a6={};function Zy(t,e){const n=a6,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,s=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return BE(t,r,s)}function BE(t,e,n){if(o6(t)){if("value"in t)return t.type==="html"&&!n?"":t.value;if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return x1(t.children,e,n)}return Array.isArray(t)?x1(t,e,n):""}function x1(t,e,n){const r=[];let s=-1;for(;++s<t.length;)r[s]=BE(t[s],e,n);return r.join("")}function o6(t){return!!(t&&typeof t=="object")}const w1=document.createElement("i");function Qy(t){const e="&"+t+";";w1.innerHTML=e;const n=w1.textContent;return n.charCodeAt(n.length-1)===59&&t!=="semi"||n===e?!1:n}function tr(t,e,n,r){const s=t.length;let a=0,l;if(e<0?e=-e>s?0:s+e:e=e>s?s:e,n=n>0?n:0,r.length<1e4)l=Array.from(r),l.unshift(e,n),t.splice(...l);else for(n&&t.splice(e,n);a<r.length;)l=r.slice(a,a+1e4),l.unshift(e,0),t.splice(...l),a+=1e4,e+=1e4}function vr(t,e){return t.length>0?(tr(t,t.length,0,e),t):e}const S1={}.hasOwnProperty;function $E(t){const e={};let n=-1;for(;++n<t.length;)l6(e,t[n]);return e}function l6(t,e){let n;for(n in e){const s=(S1.call(t,n)?t[n]:void 0)||(t[n]={}),a=e[n];let l;if(a)for(l in a){S1.call(s,l)||(s[l]=[]);const u=a[l];c6(s[l],Array.isArray(u)?u:u?[u]:[])}}}function c6(t,e){let n=-1;const r=[];for(;++n<e.length;)(e[n].add==="after"?t:r).push(e[n]);tr(t,0,0,r)}function UE(t,e){const n=Number.parseInt(t,e);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function Or(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Rn=ti(/[A-Za-z]/),vn=ti(/[\dA-Za-z]/),u6=ti(/[#-'*+\--9=?A-Z^-~]/);function zf(t){return t!==null&&(t<32||t===127)}const jg=ti(/\d/),f6=ti(/[\dA-Fa-f]/),d6=ti(/[!-/:-@[-`{-~]/);function Oe(t){return t!==null&&t<-2}function gt(t){return t!==null&&(t<0||t===32)}function Ge(t){return t===-2||t===-1||t===32}const hd=ti(new RegExp("\\p{P}|\\p{S}","u")),Mi=ti(/\s/);function ti(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function ro(t){const e=[];let n=-1,r=0,s=0;for(;++n<t.length;){const a=t.charCodeAt(n);let l="";if(a===37&&vn(t.charCodeAt(n+1))&&vn(t.charCodeAt(n+2)))s=2;else if(a<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(a))||(l=String.fromCharCode(a));else if(a>55295&&a<57344){const u=t.charCodeAt(n+1);a<56320&&u>56319&&u<57344?(l=String.fromCharCode(a,u),s=1):l=""}else l=String.fromCharCode(a);l&&(e.push(t.slice(r,n),encodeURIComponent(l)),r=n+s+1,l=""),s&&(n+=s,s=0)}return e.join("")+t.slice(r)}function We(t,e,n,r){const s=r?r-1:Number.POSITIVE_INFINITY;let a=0;return l;function l(f){return Ge(f)?(t.enter(n),u(f)):e(f)}function u(f){return Ge(f)&&a++<s?(t.consume(f),u):(t.exit(n),e(f))}}const h6={tokenize:p6};function p6(t){const e=t.attempt(this.parser.constructs.contentInitial,r,s);let n;return e;function r(u){if(u===null){t.consume(u);return}return t.enter("lineEnding"),t.consume(u),t.exit("lineEnding"),We(t,e,"linePrefix")}function s(u){return t.enter("paragraph"),a(u)}function a(u){const f=t.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=f),n=f,l(u)}function l(u){if(u===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(u);return}return Oe(u)?(t.consume(u),t.exit("chunkText"),a):(t.consume(u),l)}}const m6={tokenize:g6},k1={tokenize:y6};function g6(t){const e=this,n=[];let r=0,s,a,l;return u;function u(A){if(r<n.length){const j=n[r];return e.containerState=j[1],t.attempt(j[0].continuation,f,d)(A)}return d(A)}function f(A){if(r++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,s&&T();const j=e.events.length;let D=j,I;for(;D--;)if(e.events[D][0]==="exit"&&e.events[D][1].type==="chunkFlow"){I=e.events[D][1].end;break}S(r);let P=j;for(;P<e.events.length;)e.events[P][1].end={...I},P++;return tr(e.events,D+1,0,e.events.slice(j)),e.events.length=P,d(A)}return u(A)}function d(A){if(r===n.length){if(!s)return y(A);if(s.currentConstruct&&s.currentConstruct.concrete)return v(A);e.interrupt=!!(s.currentConstruct&&!s._gfmTableDynamicInterruptHack)}return e.containerState={},t.check(k1,m,p)(A)}function m(A){return s&&T(),S(r),y(A)}function p(A){return e.parser.lazy[e.now().line]=r!==n.length,l=e.now().offset,v(A)}function y(A){return e.containerState={},t.attempt(k1,g,v)(A)}function g(A){return r++,n.push([e.currentConstruct,e.containerState]),y(A)}function v(A){if(A===null){s&&T(),S(0),t.consume(A);return}return s=s||e.parser.flow(e.now()),t.enter("chunkFlow",{_tokenizer:s,contentType:"flow",previous:a}),x(A)}function x(A){if(A===null){E(t.exit("chunkFlow"),!0),S(0),t.consume(A);return}return Oe(A)?(t.consume(A),E(t.exit("chunkFlow")),r=0,e.interrupt=void 0,u):(t.consume(A),x)}function E(A,j){const D=e.sliceStream(A);if(j&&D.push(null),A.previous=a,a&&(a.next=A),a=A,s.defineSkip(A.start),s.write(D),e.parser.lazy[A.start.line]){let I=s.events.length;for(;I--;)if(s.events[I][1].start.offset<l&&(!s.events[I][1].end||s.events[I][1].end.offset>l))return;const P=e.events.length;let q=P,H,z;for(;q--;)if(e.events[q][0]==="exit"&&e.events[q][1].type==="chunkFlow"){if(H){z=e.events[q][1].end;break}H=!0}for(S(r),I=P;I<e.events.length;)e.events[I][1].end={...z},I++;tr(e.events,q+1,0,e.events.slice(P)),e.events.length=I}}function S(A){let j=n.length;for(;j-- >A;){const D=n[j];e.containerState=D[1],D[0].exit.call(e,t)}n.length=A}function T(){s.write([null]),a=void 0,s=void 0,e.containerState._closeFlow=void 0}}function y6(t,e,n){return We(t,t.attempt(this.parser.constructs.document,e,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Ja(t){if(t===null||gt(t)||Mi(t))return 1;if(hd(t))return 2}function pd(t,e,n){const r=[];let s=-1;for(;++s<t.length;){const a=t[s].resolveAll;a&&!r.includes(a)&&(e=a(e,n),r.push(a))}return e}const Lg={name:"attention",resolveAll:b6,tokenize:_6};function b6(t,e){let n=-1,r,s,a,l,u,f,d,m;for(;++n<t.length;)if(t[n][0]==="enter"&&t[n][1].type==="attentionSequence"&&t[n][1]._close){for(r=n;r--;)if(t[r][0]==="exit"&&t[r][1].type==="attentionSequence"&&t[r][1]._open&&e.sliceSerialize(t[r][1]).charCodeAt(0)===e.sliceSerialize(t[n][1]).charCodeAt(0)){if((t[r][1]._close||t[n][1]._open)&&(t[n][1].end.offset-t[n][1].start.offset)%3&&!((t[r][1].end.offset-t[r][1].start.offset+t[n][1].end.offset-t[n][1].start.offset)%3))continue;f=t[r][1].end.offset-t[r][1].start.offset>1&&t[n][1].end.offset-t[n][1].start.offset>1?2:1;const p={...t[r][1].end},y={...t[n][1].start};E1(p,-f),E1(y,f),l={type:f>1?"strongSequence":"emphasisSequence",start:p,end:{...t[r][1].end}},u={type:f>1?"strongSequence":"emphasisSequence",start:{...t[n][1].start},end:y},a={type:f>1?"strongText":"emphasisText",start:{...t[r][1].end},end:{...t[n][1].start}},s={type:f>1?"strong":"emphasis",start:{...l.start},end:{...u.end}},t[r][1].end={...l.start},t[n][1].start={...u.end},d=[],t[r][1].end.offset-t[r][1].start.offset&&(d=vr(d,[["enter",t[r][1],e],["exit",t[r][1],e]])),d=vr(d,[["enter",s,e],["enter",l,e],["exit",l,e],["enter",a,e]]),d=vr(d,pd(e.parser.constructs.insideSpan.null,t.slice(r+1,n),e)),d=vr(d,[["exit",a,e],["enter",u,e],["exit",u,e],["exit",s,e]]),t[n][1].end.offset-t[n][1].start.offset?(m=2,d=vr(d,[["enter",t[n][1],e],["exit",t[n][1],e]])):m=0,tr(t,r-1,n-r+3,d),n=r+d.length-m-2;break}}for(n=-1;++n<t.length;)t[n][1].type==="attentionSequence"&&(t[n][1].type="data");return t}function _6(t,e){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,s=Ja(r);let a;return l;function l(f){return a=f,t.enter("attentionSequence"),u(f)}function u(f){if(f===a)return t.consume(f),u;const d=t.exit("attentionSequence"),m=Ja(f),p=!m||m===2&&s||n.includes(f),y=!s||s===2&&m||n.includes(r);return d._open=!!(a===42?p:p&&(s||!y)),d._close=!!(a===42?y:y&&(m||!p)),e(f)}}function E1(t,e){t.column+=e,t.offset+=e,t._bufferIndex+=e}const v6={name:"autolink",tokenize:x6};function x6(t,e,n){let r=0;return s;function s(g){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(g),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),a}function a(g){return Rn(g)?(t.consume(g),l):g===64?n(g):d(g)}function l(g){return g===43||g===45||g===46||vn(g)?(r=1,u(g)):d(g)}function u(g){return g===58?(t.consume(g),r=0,f):(g===43||g===45||g===46||vn(g))&&r++<32?(t.consume(g),u):(r=0,d(g))}function f(g){return g===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(g),t.exit("autolinkMarker"),t.exit("autolink"),e):g===null||g===32||g===60||zf(g)?n(g):(t.consume(g),f)}function d(g){return g===64?(t.consume(g),m):u6(g)?(t.consume(g),d):n(g)}function m(g){return vn(g)?p(g):n(g)}function p(g){return g===46?(t.consume(g),r=0,m):g===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(g),t.exit("autolinkMarker"),t.exit("autolink"),e):y(g)}function y(g){if((g===45||vn(g))&&r++<63){const v=g===45?y:p;return t.consume(g),v}return n(g)}}const ic={partial:!0,tokenize:w6};function w6(t,e,n){return r;function r(a){return Ge(a)?We(t,s,"linePrefix")(a):s(a)}function s(a){return a===null||Oe(a)?e(a):n(a)}}const qE={continuation:{tokenize:k6},exit:E6,name:"blockQuote",tokenize:S6};function S6(t,e,n){const r=this;return s;function s(l){if(l===62){const u=r.containerState;return u.open||(t.enter("blockQuote",{_container:!0}),u.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(l),t.exit("blockQuoteMarker"),a}return n(l)}function a(l){return Ge(l)?(t.enter("blockQuotePrefixWhitespace"),t.consume(l),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),e):(t.exit("blockQuotePrefix"),e(l))}}function k6(t,e,n){const r=this;return s;function s(l){return Ge(l)?We(t,a,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l):a(l)}function a(l){return t.attempt(qE,e,n)(l)}}function E6(t){t.exit("blockQuote")}const FE={name:"characterEscape",tokenize:C6};function C6(t,e,n){return r;function r(a){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(a),t.exit("escapeMarker"),s}function s(a){return d6(a)?(t.enter("characterEscapeValue"),t.consume(a),t.exit("characterEscapeValue"),t.exit("characterEscape"),e):n(a)}}const VE={name:"characterReference",tokenize:T6};function T6(t,e,n){const r=this;let s=0,a,l;return u;function u(p){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(p),t.exit("characterReferenceMarker"),f}function f(p){return p===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(p),t.exit("characterReferenceMarkerNumeric"),d):(t.enter("characterReferenceValue"),a=31,l=vn,m(p))}function d(p){return p===88||p===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(p),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),a=6,l=f6,m):(t.enter("characterReferenceValue"),a=7,l=jg,m(p))}function m(p){if(p===59&&s){const y=t.exit("characterReferenceValue");return l===vn&&!Qy(r.sliceSerialize(y))?n(p):(t.enter("characterReferenceMarker"),t.consume(p),t.exit("characterReferenceMarker"),t.exit("characterReference"),e)}return l(p)&&s++<a?(t.consume(p),m):n(p)}}const C1={partial:!0,tokenize:R6},T1={concrete:!0,name:"codeFenced",tokenize:A6};function A6(t,e,n){const r=this,s={partial:!0,tokenize:D};let a=0,l=0,u;return f;function f(I){return d(I)}function d(I){const P=r.events[r.events.length-1];return a=P&&P[1].type==="linePrefix"?P[2].sliceSerialize(P[1],!0).length:0,u=I,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),m(I)}function m(I){return I===u?(l++,t.consume(I),m):l<3?n(I):(t.exit("codeFencedFenceSequence"),Ge(I)?We(t,p,"whitespace")(I):p(I))}function p(I){return I===null||Oe(I)?(t.exit("codeFencedFence"),r.interrupt?e(I):t.check(C1,x,j)(I)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),y(I))}function y(I){return I===null||Oe(I)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),p(I)):Ge(I)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),We(t,g,"whitespace")(I)):I===96&&I===u?n(I):(t.consume(I),y)}function g(I){return I===null||Oe(I)?p(I):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),v(I))}function v(I){return I===null||Oe(I)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),p(I)):I===96&&I===u?n(I):(t.consume(I),v)}function x(I){return t.attempt(s,j,E)(I)}function E(I){return t.enter("lineEnding"),t.consume(I),t.exit("lineEnding"),S}function S(I){return a>0&&Ge(I)?We(t,T,"linePrefix",a+1)(I):T(I)}function T(I){return I===null||Oe(I)?t.check(C1,x,j)(I):(t.enter("codeFlowValue"),A(I))}function A(I){return I===null||Oe(I)?(t.exit("codeFlowValue"),T(I)):(t.consume(I),A)}function j(I){return t.exit("codeFenced"),e(I)}function D(I,P,q){let H=0;return z;function z(V){return I.enter("lineEnding"),I.consume(V),I.exit("lineEnding"),Q}function Q(V){return I.enter("codeFencedFence"),Ge(V)?We(I,re,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(V):re(V)}function re(V){return V===u?(I.enter("codeFencedFenceSequence"),pe(V)):q(V)}function pe(V){return V===u?(H++,I.consume(V),pe):H>=l?(I.exit("codeFencedFenceSequence"),Ge(V)?We(I,X,"whitespace")(V):X(V)):q(V)}function X(V){return V===null||Oe(V)?(I.exit("codeFencedFence"),P(V)):q(V)}}}function R6(t,e,n){const r=this;return s;function s(l){return l===null?n(l):(t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),a)}function a(l){return r.parser.lazy[r.now().line]?n(l):e(l)}}const _m={name:"codeIndented",tokenize:N6},O6={partial:!0,tokenize:I6};function N6(t,e,n){const r=this;return s;function s(d){return t.enter("codeIndented"),We(t,a,"linePrefix",5)(d)}function a(d){const m=r.events[r.events.length-1];return m&&m[1].type==="linePrefix"&&m[2].sliceSerialize(m[1],!0).length>=4?l(d):n(d)}function l(d){return d===null?f(d):Oe(d)?t.attempt(O6,l,f)(d):(t.enter("codeFlowValue"),u(d))}function u(d){return d===null||Oe(d)?(t.exit("codeFlowValue"),l(d)):(t.consume(d),u)}function f(d){return t.exit("codeIndented"),e(d)}}function I6(t,e,n){const r=this;return s;function s(l){return r.parser.lazy[r.now().line]?n(l):Oe(l)?(t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),s):We(t,a,"linePrefix",5)(l)}function a(l){const u=r.events[r.events.length-1];return u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?e(l):Oe(l)?s(l):n(l)}}const M6={name:"codeText",previous:j6,resolve:D6,tokenize:L6};function D6(t){let e=t.length-4,n=3,r,s;if((t[n][1].type==="lineEnding"||t[n][1].type==="space")&&(t[e][1].type==="lineEnding"||t[e][1].type==="space")){for(r=n;++r<e;)if(t[r][1].type==="codeTextData"){t[n][1].type="codeTextPadding",t[e][1].type="codeTextPadding",n+=2,e-=2;break}}for(r=n-1,e++;++r<=e;)s===void 0?r!==e&&t[r][1].type!=="lineEnding"&&(s=r):(r===e||t[r][1].type==="lineEnding")&&(t[s][1].type="codeTextData",r!==s+2&&(t[s][1].end=t[r-1][1].end,t.splice(s+2,r-s-2),e-=r-s-2,r=s+2),s=void 0);return t}function j6(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function L6(t,e,n){let r=0,s,a;return l;function l(p){return t.enter("codeText"),t.enter("codeTextSequence"),u(p)}function u(p){return p===96?(t.consume(p),r++,u):(t.exit("codeTextSequence"),f(p))}function f(p){return p===null?n(p):p===32?(t.enter("space"),t.consume(p),t.exit("space"),f):p===96?(a=t.enter("codeTextSequence"),s=0,m(p)):Oe(p)?(t.enter("lineEnding"),t.consume(p),t.exit("lineEnding"),f):(t.enter("codeTextData"),d(p))}function d(p){return p===null||p===32||p===96||Oe(p)?(t.exit("codeTextData"),f(p)):(t.consume(p),d)}function m(p){return p===96?(t.consume(p),s++,m):s===r?(t.exit("codeTextSequence"),t.exit("codeText"),e(p)):(a.type="codeTextData",d(p))}}class z6{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(e,r):e>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(e,n,r){const s=n||0;this.setCursor(Math.trunc(e));const a=this.right.splice(this.right.length-s,Number.POSITIVE_INFINITY);return r&&il(this.left,r),a.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),il(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),il(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const n=this.left.splice(e,Number.POSITIVE_INFINITY);il(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);il(this.left,n.reverse())}}}function il(t,e){let n=0;if(e.length<1e4)t.push(...e);else for(;n<e.length;)t.push(...e.slice(n,n+1e4)),n+=1e4}function HE(t){const e={};let n=-1,r,s,a,l,u,f,d;const m=new z6(t);for(;++n<m.length;){for(;n in e;)n=e[n];if(r=m.get(n),n&&r[1].type==="chunkFlow"&&m.get(n-1)[1].type==="listItemPrefix"&&(f=r[1]._tokenizer.events,a=0,a<f.length&&f[a][1].type==="lineEndingBlank"&&(a+=2),a<f.length&&f[a][1].type==="content"))for(;++a<f.length&&f[a][1].type!=="content";)f[a][1].type==="chunkText"&&(f[a][1]._isInFirstContentOfListItem=!0,a++);if(r[0]==="enter")r[1].contentType&&(Object.assign(e,P6(m,n)),n=e[n],d=!0);else if(r[1]._container){for(a=n,s=void 0;a--;)if(l=m.get(a),l[1].type==="lineEnding"||l[1].type==="lineEndingBlank")l[0]==="enter"&&(s&&(m.get(s)[1].type="lineEndingBlank"),l[1].type="lineEnding",s=a);else if(!(l[1].type==="linePrefix"||l[1].type==="listItemIndent"))break;s&&(r[1].end={...m.get(s)[1].start},u=m.slice(s,n),u.unshift(r),m.splice(s,n-s+1,u))}}return tr(t,0,Number.POSITIVE_INFINITY,m.slice(0)),!d}function P6(t,e){const n=t.get(e)[1],r=t.get(e)[2];let s=e-1;const a=[];let l=n._tokenizer;l||(l=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(l._contentTypeTextTrailing=!0));const u=l.events,f=[],d={};let m,p,y=-1,g=n,v=0,x=0;const E=[x];for(;g;){for(;t.get(++s)[1]!==g;);a.push(s),g._tokenizer||(m=r.sliceStream(g),g.next||m.push(null),p&&l.defineSkip(g.start),g._isInFirstContentOfListItem&&(l._gfmTasklistFirstContentOfListItem=!0),l.write(m),g._isInFirstContentOfListItem&&(l._gfmTasklistFirstContentOfListItem=void 0)),p=g,g=g.next}for(g=n;++y<u.length;)u[y][0]==="exit"&&u[y-1][0]==="enter"&&u[y][1].type===u[y-1][1].type&&u[y][1].start.line!==u[y][1].end.line&&(x=y+1,E.push(x),g._tokenizer=void 0,g.previous=void 0,g=g.next);for(l.events=[],g?(g._tokenizer=void 0,g.previous=void 0):E.pop(),y=E.length;y--;){const S=u.slice(E[y],E[y+1]),T=a.pop();f.push([T,T+S.length-1]),t.splice(T,2,S)}for(f.reverse(),y=-1;++y<f.length;)d[v+f[y][0]]=v+f[y][1],v+=f[y][1]-f[y][0]-1;return d}const B6={resolve:U6,tokenize:q6},$6={partial:!0,tokenize:F6};function U6(t){return HE(t),t}function q6(t,e){let n;return r;function r(u){return t.enter("content"),n=t.enter("chunkContent",{contentType:"content"}),s(u)}function s(u){return u===null?a(u):Oe(u)?t.check($6,l,a)(u):(t.consume(u),s)}function a(u){return t.exit("chunkContent"),t.exit("content"),e(u)}function l(u){return t.consume(u),t.exit("chunkContent"),n.next=t.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,s}}function F6(t,e,n){const r=this;return s;function s(l){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),We(t,a,"linePrefix")}function a(l){if(l===null||Oe(l))return n(l);const u=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?e(l):t.interrupt(r.parser.constructs.flow,n,e)(l)}}function GE(t,e,n,r,s,a,l,u,f){const d=f||Number.POSITIVE_INFINITY;let m=0;return p;function p(S){return S===60?(t.enter(r),t.enter(s),t.enter(a),t.consume(S),t.exit(a),y):S===null||S===32||S===41||zf(S)?n(S):(t.enter(r),t.enter(l),t.enter(u),t.enter("chunkString",{contentType:"string"}),x(S))}function y(S){return S===62?(t.enter(a),t.consume(S),t.exit(a),t.exit(s),t.exit(r),e):(t.enter(u),t.enter("chunkString",{contentType:"string"}),g(S))}function g(S){return S===62?(t.exit("chunkString"),t.exit(u),y(S)):S===null||S===60||Oe(S)?n(S):(t.consume(S),S===92?v:g)}function v(S){return S===60||S===62||S===92?(t.consume(S),g):g(S)}function x(S){return!m&&(S===null||S===41||gt(S))?(t.exit("chunkString"),t.exit(u),t.exit(l),t.exit(r),e(S)):m<d&&S===40?(t.consume(S),m++,x):S===41?(t.consume(S),m--,x):S===null||S===32||S===40||zf(S)?n(S):(t.consume(S),S===92?E:x)}function E(S){return S===40||S===41||S===92?(t.consume(S),x):x(S)}}function KE(t,e,n,r,s,a){const l=this;let u=0,f;return d;function d(g){return t.enter(r),t.enter(s),t.consume(g),t.exit(s),t.enter(a),m}function m(g){return u>999||g===null||g===91||g===93&&!f||g===94&&!u&&"_hiddenFootnoteSupport"in l.parser.constructs?n(g):g===93?(t.exit(a),t.enter(s),t.consume(g),t.exit(s),t.exit(r),e):Oe(g)?(t.enter("lineEnding"),t.consume(g),t.exit("lineEnding"),m):(t.enter("chunkString",{contentType:"string"}),p(g))}function p(g){return g===null||g===91||g===93||Oe(g)||u++>999?(t.exit("chunkString"),m(g)):(t.consume(g),f||(f=!Ge(g)),g===92?y:p)}function y(g){return g===91||g===92||g===93?(t.consume(g),u++,p):p(g)}}function ZE(t,e,n,r,s,a){let l;return u;function u(y){return y===34||y===39||y===40?(t.enter(r),t.enter(s),t.consume(y),t.exit(s),l=y===40?41:y,f):n(y)}function f(y){return y===l?(t.enter(s),t.consume(y),t.exit(s),t.exit(r),e):(t.enter(a),d(y))}function d(y){return y===l?(t.exit(a),f(l)):y===null?n(y):Oe(y)?(t.enter("lineEnding"),t.consume(y),t.exit("lineEnding"),We(t,d,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),m(y))}function m(y){return y===l||y===null||Oe(y)?(t.exit("chunkString"),d(y)):(t.consume(y),y===92?p:m)}function p(y){return y===l||y===92?(t.consume(y),m):m(y)}}function Rl(t,e){let n;return r;function r(s){return Oe(s)?(t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),n=!0,r):Ge(s)?We(t,r,n?"linePrefix":"lineSuffix")(s):e(s)}}const V6={name:"definition",tokenize:G6},H6={partial:!0,tokenize:K6};function G6(t,e,n){const r=this;let s;return a;function a(g){return t.enter("definition"),l(g)}function l(g){return KE.call(r,t,u,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(g)}function u(g){return s=Or(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),g===58?(t.enter("definitionMarker"),t.consume(g),t.exit("definitionMarker"),f):n(g)}function f(g){return gt(g)?Rl(t,d)(g):d(g)}function d(g){return GE(t,m,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(g)}function m(g){return t.attempt(H6,p,p)(g)}function p(g){return Ge(g)?We(t,y,"whitespace")(g):y(g)}function y(g){return g===null||Oe(g)?(t.exit("definition"),r.parser.defined.push(s),e(g)):n(g)}}function K6(t,e,n){return r;function r(u){return gt(u)?Rl(t,s)(u):n(u)}function s(u){return ZE(t,a,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(u)}function a(u){return Ge(u)?We(t,l,"whitespace")(u):l(u)}function l(u){return u===null||Oe(u)?e(u):n(u)}}const Z6={name:"hardBreakEscape",tokenize:Q6};function Q6(t,e,n){return r;function r(a){return t.enter("hardBreakEscape"),t.consume(a),s}function s(a){return Oe(a)?(t.exit("hardBreakEscape"),e(a)):n(a)}}const J6={name:"headingAtx",resolve:Y6,tokenize:X6};function Y6(t,e){let n=t.length-2,r=3,s,a;return t[r][1].type==="whitespace"&&(r+=2),n-2>r&&t[n][1].type==="whitespace"&&(n-=2),t[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&t[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(s={type:"atxHeadingText",start:t[r][1].start,end:t[n][1].end},a={type:"chunkText",start:t[r][1].start,end:t[n][1].end,contentType:"text"},tr(t,r,n-r+1,[["enter",s,e],["enter",a,e],["exit",a,e],["exit",s,e]])),t}function X6(t,e,n){let r=0;return s;function s(m){return t.enter("atxHeading"),a(m)}function a(m){return t.enter("atxHeadingSequence"),l(m)}function l(m){return m===35&&r++<6?(t.consume(m),l):m===null||gt(m)?(t.exit("atxHeadingSequence"),u(m)):n(m)}function u(m){return m===35?(t.enter("atxHeadingSequence"),f(m)):m===null||Oe(m)?(t.exit("atxHeading"),e(m)):Ge(m)?We(t,u,"whitespace")(m):(t.enter("atxHeadingText"),d(m))}function f(m){return m===35?(t.consume(m),f):(t.exit("atxHeadingSequence"),u(m))}function d(m){return m===null||m===35||gt(m)?(t.exit("atxHeadingText"),u(m)):(t.consume(m),d)}}const W6=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],A1=["pre","script","style","textarea"],e8={concrete:!0,name:"htmlFlow",resolveTo:r8,tokenize:s8},t8={partial:!0,tokenize:a8},n8={partial:!0,tokenize:i8};function r8(t){let e=t.length;for(;e--&&!(t[e][0]==="enter"&&t[e][1].type==="htmlFlow"););return e>1&&t[e-2][1].type==="linePrefix"&&(t[e][1].start=t[e-2][1].start,t[e+1][1].start=t[e-2][1].start,t.splice(e-2,2)),t}function s8(t,e,n){const r=this;let s,a,l,u,f;return d;function d(R){return m(R)}function m(R){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(R),p}function p(R){return R===33?(t.consume(R),y):R===47?(t.consume(R),a=!0,x):R===63?(t.consume(R),s=3,r.interrupt?e:C):Rn(R)?(t.consume(R),l=String.fromCharCode(R),E):n(R)}function y(R){return R===45?(t.consume(R),s=2,g):R===91?(t.consume(R),s=5,u=0,v):Rn(R)?(t.consume(R),s=4,r.interrupt?e:C):n(R)}function g(R){return R===45?(t.consume(R),r.interrupt?e:C):n(R)}function v(R){const te="CDATA[";return R===te.charCodeAt(u++)?(t.consume(R),u===te.length?r.interrupt?e:re:v):n(R)}function x(R){return Rn(R)?(t.consume(R),l=String.fromCharCode(R),E):n(R)}function E(R){if(R===null||R===47||R===62||gt(R)){const te=R===47,ce=l.toLowerCase();return!te&&!a&&A1.includes(ce)?(s=1,r.interrupt?e(R):re(R)):W6.includes(l.toLowerCase())?(s=6,te?(t.consume(R),S):r.interrupt?e(R):re(R)):(s=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(R):a?T(R):A(R))}return R===45||vn(R)?(t.consume(R),l+=String.fromCharCode(R),E):n(R)}function S(R){return R===62?(t.consume(R),r.interrupt?e:re):n(R)}function T(R){return Ge(R)?(t.consume(R),T):z(R)}function A(R){return R===47?(t.consume(R),z):R===58||R===95||Rn(R)?(t.consume(R),j):Ge(R)?(t.consume(R),A):z(R)}function j(R){return R===45||R===46||R===58||R===95||vn(R)?(t.consume(R),j):D(R)}function D(R){return R===61?(t.consume(R),I):Ge(R)?(t.consume(R),D):A(R)}function I(R){return R===null||R===60||R===61||R===62||R===96?n(R):R===34||R===39?(t.consume(R),f=R,P):Ge(R)?(t.consume(R),I):q(R)}function P(R){return R===f?(t.consume(R),f=null,H):R===null||Oe(R)?n(R):(t.consume(R),P)}function q(R){return R===null||R===34||R===39||R===47||R===60||R===61||R===62||R===96||gt(R)?D(R):(t.consume(R),q)}function H(R){return R===47||R===62||Ge(R)?A(R):n(R)}function z(R){return R===62?(t.consume(R),Q):n(R)}function Q(R){return R===null||Oe(R)?re(R):Ge(R)?(t.consume(R),Q):n(R)}function re(R){return R===45&&s===2?(t.consume(R),$):R===60&&s===1?(t.consume(R),G):R===62&&s===4?(t.consume(R),N):R===63&&s===3?(t.consume(R),C):R===93&&s===5?(t.consume(R),M):Oe(R)&&(s===6||s===7)?(t.exit("htmlFlowData"),t.check(t8,U,pe)(R)):R===null||Oe(R)?(t.exit("htmlFlowData"),pe(R)):(t.consume(R),re)}function pe(R){return t.check(n8,X,U)(R)}function X(R){return t.enter("lineEnding"),t.consume(R),t.exit("lineEnding"),V}function V(R){return R===null||Oe(R)?pe(R):(t.enter("htmlFlowData"),re(R))}function $(R){return R===45?(t.consume(R),C):re(R)}function G(R){return R===47?(t.consume(R),l="",oe):re(R)}function oe(R){if(R===62){const te=l.toLowerCase();return A1.includes(te)?(t.consume(R),N):re(R)}return Rn(R)&&l.length<8?(t.consume(R),l+=String.fromCharCode(R),oe):re(R)}function M(R){return R===93?(t.consume(R),C):re(R)}function C(R){return R===62?(t.consume(R),N):R===45&&s===2?(t.consume(R),C):re(R)}function N(R){return R===null||Oe(R)?(t.exit("htmlFlowData"),U(R)):(t.consume(R),N)}function U(R){return t.exit("htmlFlow"),e(R)}}function i8(t,e,n){const r=this;return s;function s(l){return Oe(l)?(t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),a):n(l)}function a(l){return r.parser.lazy[r.now().line]?n(l):e(l)}}function a8(t,e,n){return r;function r(s){return t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),t.attempt(ic,e,n)}}const o8={name:"htmlText",tokenize:l8};function l8(t,e,n){const r=this;let s,a,l;return u;function u(C){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(C),f}function f(C){return C===33?(t.consume(C),d):C===47?(t.consume(C),D):C===63?(t.consume(C),A):Rn(C)?(t.consume(C),q):n(C)}function d(C){return C===45?(t.consume(C),m):C===91?(t.consume(C),a=0,v):Rn(C)?(t.consume(C),T):n(C)}function m(C){return C===45?(t.consume(C),g):n(C)}function p(C){return C===null?n(C):C===45?(t.consume(C),y):Oe(C)?(l=p,G(C)):(t.consume(C),p)}function y(C){return C===45?(t.consume(C),g):p(C)}function g(C){return C===62?$(C):C===45?y(C):p(C)}function v(C){const N="CDATA[";return C===N.charCodeAt(a++)?(t.consume(C),a===N.length?x:v):n(C)}function x(C){return C===null?n(C):C===93?(t.consume(C),E):Oe(C)?(l=x,G(C)):(t.consume(C),x)}function E(C){return C===93?(t.consume(C),S):x(C)}function S(C){return C===62?$(C):C===93?(t.consume(C),S):x(C)}function T(C){return C===null||C===62?$(C):Oe(C)?(l=T,G(C)):(t.consume(C),T)}function A(C){return C===null?n(C):C===63?(t.consume(C),j):Oe(C)?(l=A,G(C)):(t.consume(C),A)}function j(C){return C===62?$(C):A(C)}function D(C){return Rn(C)?(t.consume(C),I):n(C)}function I(C){return C===45||vn(C)?(t.consume(C),I):P(C)}function P(C){return Oe(C)?(l=P,G(C)):Ge(C)?(t.consume(C),P):$(C)}function q(C){return C===45||vn(C)?(t.consume(C),q):C===47||C===62||gt(C)?H(C):n(C)}function H(C){return C===47?(t.consume(C),$):C===58||C===95||Rn(C)?(t.consume(C),z):Oe(C)?(l=H,G(C)):Ge(C)?(t.consume(C),H):$(C)}function z(C){return C===45||C===46||C===58||C===95||vn(C)?(t.consume(C),z):Q(C)}function Q(C){return C===61?(t.consume(C),re):Oe(C)?(l=Q,G(C)):Ge(C)?(t.consume(C),Q):H(C)}function re(C){return C===null||C===60||C===61||C===62||C===96?n(C):C===34||C===39?(t.consume(C),s=C,pe):Oe(C)?(l=re,G(C)):Ge(C)?(t.consume(C),re):(t.consume(C),X)}function pe(C){return C===s?(t.consume(C),s=void 0,V):C===null?n(C):Oe(C)?(l=pe,G(C)):(t.consume(C),pe)}function X(C){return C===null||C===34||C===39||C===60||C===61||C===96?n(C):C===47||C===62||gt(C)?H(C):(t.consume(C),X)}function V(C){return C===47||C===62||gt(C)?H(C):n(C)}function $(C){return C===62?(t.consume(C),t.exit("htmlTextData"),t.exit("htmlText"),e):n(C)}function G(C){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(C),t.exit("lineEnding"),oe}function oe(C){return Ge(C)?We(t,M,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(C):M(C)}function M(C){return t.enter("htmlTextData"),l(C)}}const Jy={name:"labelEnd",resolveAll:d8,resolveTo:h8,tokenize:p8},c8={tokenize:m8},u8={tokenize:g8},f8={tokenize:y8};function d8(t){let e=-1;const n=[];for(;++e<t.length;){const r=t[e][1];if(n.push(t[e]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const s=r.type==="labelImage"?4:2;r.type="data",e+=s}}return t.length!==n.length&&tr(t,0,t.length,n),t}function h8(t,e){let n=t.length,r=0,s,a,l,u;for(;n--;)if(s=t[n][1],a){if(s.type==="link"||s.type==="labelLink"&&s._inactive)break;t[n][0]==="enter"&&s.type==="labelLink"&&(s._inactive=!0)}else if(l){if(t[n][0]==="enter"&&(s.type==="labelImage"||s.type==="labelLink")&&!s._balanced&&(a=n,s.type!=="labelLink")){r=2;break}}else s.type==="labelEnd"&&(l=n);const f={type:t[a][1].type==="labelLink"?"link":"image",start:{...t[a][1].start},end:{...t[t.length-1][1].end}},d={type:"label",start:{...t[a][1].start},end:{...t[l][1].end}},m={type:"labelText",start:{...t[a+r+2][1].end},end:{...t[l-2][1].start}};return u=[["enter",f,e],["enter",d,e]],u=vr(u,t.slice(a+1,a+r+3)),u=vr(u,[["enter",m,e]]),u=vr(u,pd(e.parser.constructs.insideSpan.null,t.slice(a+r+4,l-3),e)),u=vr(u,[["exit",m,e],t[l-2],t[l-1],["exit",d,e]]),u=vr(u,t.slice(l+1)),u=vr(u,[["exit",f,e]]),tr(t,a,t.length,u),t}function p8(t,e,n){const r=this;let s=r.events.length,a,l;for(;s--;)if((r.events[s][1].type==="labelImage"||r.events[s][1].type==="labelLink")&&!r.events[s][1]._balanced){a=r.events[s][1];break}return u;function u(y){return a?a._inactive?p(y):(l=r.parser.defined.includes(Or(r.sliceSerialize({start:a.end,end:r.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(y),t.exit("labelMarker"),t.exit("labelEnd"),f):n(y)}function f(y){return y===40?t.attempt(c8,m,l?m:p)(y):y===91?t.attempt(u8,m,l?d:p)(y):l?m(y):p(y)}function d(y){return t.attempt(f8,m,p)(y)}function m(y){return e(y)}function p(y){return a._balanced=!0,n(y)}}function m8(t,e,n){return r;function r(p){return t.enter("resource"),t.enter("resourceMarker"),t.consume(p),t.exit("resourceMarker"),s}function s(p){return gt(p)?Rl(t,a)(p):a(p)}function a(p){return p===41?m(p):GE(t,l,u,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(p)}function l(p){return gt(p)?Rl(t,f)(p):m(p)}function u(p){return n(p)}function f(p){return p===34||p===39||p===40?ZE(t,d,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(p):m(p)}function d(p){return gt(p)?Rl(t,m)(p):m(p)}function m(p){return p===41?(t.enter("resourceMarker"),t.consume(p),t.exit("resourceMarker"),t.exit("resource"),e):n(p)}}function g8(t,e,n){const r=this;return s;function s(u){return KE.call(r,t,a,l,"reference","referenceMarker","referenceString")(u)}function a(u){return r.parser.defined.includes(Or(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?e(u):n(u)}function l(u){return n(u)}}function y8(t,e,n){return r;function r(a){return t.enter("reference"),t.enter("referenceMarker"),t.consume(a),t.exit("referenceMarker"),s}function s(a){return a===93?(t.enter("referenceMarker"),t.consume(a),t.exit("referenceMarker"),t.exit("reference"),e):n(a)}}const b8={name:"labelStartImage",resolveAll:Jy.resolveAll,tokenize:_8};function _8(t,e,n){const r=this;return s;function s(u){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(u),t.exit("labelImageMarker"),a}function a(u){return u===91?(t.enter("labelMarker"),t.consume(u),t.exit("labelMarker"),t.exit("labelImage"),l):n(u)}function l(u){return u===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(u):e(u)}}const v8={name:"labelStartLink",resolveAll:Jy.resolveAll,tokenize:x8};function x8(t,e,n){const r=this;return s;function s(l){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(l),t.exit("labelMarker"),t.exit("labelLink"),a}function a(l){return l===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(l):e(l)}}const vm={name:"lineEnding",tokenize:w8};function w8(t,e){return n;function n(r){return t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),We(t,e,"linePrefix")}}const ef={name:"thematicBreak",tokenize:S8};function S8(t,e,n){let r=0,s;return a;function a(d){return t.enter("thematicBreak"),l(d)}function l(d){return s=d,u(d)}function u(d){return d===s?(t.enter("thematicBreakSequence"),f(d)):r>=3&&(d===null||Oe(d))?(t.exit("thematicBreak"),e(d)):n(d)}function f(d){return d===s?(t.consume(d),r++,f):(t.exit("thematicBreakSequence"),Ge(d)?We(t,u,"whitespace")(d):u(d))}}const Bn={continuation:{tokenize:T8},exit:R8,name:"list",tokenize:C8},k8={partial:!0,tokenize:O8},E8={partial:!0,tokenize:A8};function C8(t,e,n){const r=this,s=r.events[r.events.length-1];let a=s&&s[1].type==="linePrefix"?s[2].sliceSerialize(s[1],!0).length:0,l=0;return u;function u(g){const v=r.containerState.type||(g===42||g===43||g===45?"listUnordered":"listOrdered");if(v==="listUnordered"?!r.containerState.marker||g===r.containerState.marker:jg(g)){if(r.containerState.type||(r.containerState.type=v,t.enter(v,{_container:!0})),v==="listUnordered")return t.enter("listItemPrefix"),g===42||g===45?t.check(ef,n,d)(g):d(g);if(!r.interrupt||g===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),f(g)}return n(g)}function f(g){return jg(g)&&++l<10?(t.consume(g),f):(!r.interrupt||l<2)&&(r.containerState.marker?g===r.containerState.marker:g===41||g===46)?(t.exit("listItemValue"),d(g)):n(g)}function d(g){return t.enter("listItemMarker"),t.consume(g),t.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||g,t.check(ic,r.interrupt?n:m,t.attempt(k8,y,p))}function m(g){return r.containerState.initialBlankLine=!0,a++,y(g)}function p(g){return Ge(g)?(t.enter("listItemPrefixWhitespace"),t.consume(g),t.exit("listItemPrefixWhitespace"),y):n(g)}function y(g){return r.containerState.size=a+r.sliceSerialize(t.exit("listItemPrefix"),!0).length,e(g)}}function T8(t,e,n){const r=this;return r.containerState._closeFlow=void 0,t.check(ic,s,a);function s(u){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,We(t,e,"listItemIndent",r.containerState.size+1)(u)}function a(u){return r.containerState.furtherBlankLines||!Ge(u)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,l(u)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,t.attempt(E8,e,l)(u))}function l(u){return r.containerState._closeFlow=!0,r.interrupt=void 0,We(t,t.attempt(Bn,e,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(u)}}function A8(t,e,n){const r=this;return We(t,s,"listItemIndent",r.containerState.size+1);function s(a){const l=r.events[r.events.length-1];return l&&l[1].type==="listItemIndent"&&l[2].sliceSerialize(l[1],!0).length===r.containerState.size?e(a):n(a)}}function R8(t){t.exit(this.containerState.type)}function O8(t,e,n){const r=this;return We(t,s,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function s(a){const l=r.events[r.events.length-1];return!Ge(a)&&l&&l[1].type==="listItemPrefixWhitespace"?e(a):n(a)}}const R1={name:"setextUnderline",resolveTo:N8,tokenize:I8};function N8(t,e){let n=t.length,r,s,a;for(;n--;)if(t[n][0]==="enter"){if(t[n][1].type==="content"){r=n;break}t[n][1].type==="paragraph"&&(s=n)}else t[n][1].type==="content"&&t.splice(n,1),!a&&t[n][1].type==="definition"&&(a=n);const l={type:"setextHeading",start:{...t[r][1].start},end:{...t[t.length-1][1].end}};return t[s][1].type="setextHeadingText",a?(t.splice(s,0,["enter",l,e]),t.splice(a+1,0,["exit",t[r][1],e]),t[r][1].end={...t[a][1].end}):t[r][1]=l,t.push(["exit",l,e]),t}function I8(t,e,n){const r=this;let s;return a;function a(d){let m=r.events.length,p;for(;m--;)if(r.events[m][1].type!=="lineEnding"&&r.events[m][1].type!=="linePrefix"&&r.events[m][1].type!=="content"){p=r.events[m][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||p)?(t.enter("setextHeadingLine"),s=d,l(d)):n(d)}function l(d){return t.enter("setextHeadingLineSequence"),u(d)}function u(d){return d===s?(t.consume(d),u):(t.exit("setextHeadingLineSequence"),Ge(d)?We(t,f,"lineSuffix")(d):f(d))}function f(d){return d===null||Oe(d)?(t.exit("setextHeadingLine"),e(d)):n(d)}}const M8={tokenize:D8};function D8(t){const e=this,n=t.attempt(ic,r,t.attempt(this.parser.constructs.flowInitial,s,We(t,t.attempt(this.parser.constructs.flow,s,t.attempt(B6,s)),"linePrefix")));return n;function r(a){if(a===null){t.consume(a);return}return t.enter("lineEndingBlank"),t.consume(a),t.exit("lineEndingBlank"),e.currentConstruct=void 0,n}function s(a){if(a===null){t.consume(a);return}return t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),e.currentConstruct=void 0,n}}const j8={resolveAll:JE()},L8=QE("string"),z8=QE("text");function QE(t){return{resolveAll:JE(t==="text"?P8:void 0),tokenize:e};function e(n){const r=this,s=this.parser.constructs[t],a=n.attempt(s,l,u);return l;function l(m){return d(m)?a(m):u(m)}function u(m){if(m===null){n.consume(m);return}return n.enter("data"),n.consume(m),f}function f(m){return d(m)?(n.exit("data"),a(m)):(n.consume(m),f)}function d(m){if(m===null)return!0;const p=s[m];let y=-1;if(p)for(;++y<p.length;){const g=p[y];if(!g.previous||g.previous.call(r,r.previous))return!0}return!1}}}function JE(t){return e;function e(n,r){let s=-1,a;for(;++s<=n.length;)a===void 0?n[s]&&n[s][1].type==="data"&&(a=s,s++):(!n[s]||n[s][1].type!=="data")&&(s!==a+2&&(n[a][1].end=n[s-1][1].end,n.splice(a+2,s-a-2),s=a+2),a=void 0);return t?t(n,r):n}}function P8(t,e){let n=0;for(;++n<=t.length;)if((n===t.length||t[n][1].type==="lineEnding")&&t[n-1][1].type==="data"){const r=t[n-1][1],s=e.sliceStream(r);let a=s.length,l=-1,u=0,f;for(;a--;){const d=s[a];if(typeof d=="string"){for(l=d.length;d.charCodeAt(l-1)===32;)u++,l--;if(l)break;l=-1}else if(d===-2)f=!0,u++;else if(d!==-1){a++;break}}if(e._contentTypeTextTrailing&&n===t.length&&(u=0),u){const d={type:n===t.length||f||u<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:a?l:r.start._bufferIndex+l,_index:r.start._index+a,line:r.end.line,column:r.end.column-u,offset:r.end.offset-u},end:{...r.end}};r.end={...d.start},r.start.offset===r.end.offset?Object.assign(r,d):(t.splice(n,0,["enter",d,e],["exit",d,e]),n+=2)}n++}return t}const B8={42:Bn,43:Bn,45:Bn,48:Bn,49:Bn,50:Bn,51:Bn,52:Bn,53:Bn,54:Bn,55:Bn,56:Bn,57:Bn,62:qE},$8={91:V6},U8={[-2]:_m,[-1]:_m,32:_m},q8={35:J6,42:ef,45:[R1,ef],60:e8,61:R1,95:ef,96:T1,126:T1},F8={38:VE,92:FE},V8={[-5]:vm,[-4]:vm,[-3]:vm,33:b8,38:VE,42:Lg,60:[v6,o8],91:v8,92:[Z6,FE],93:Jy,95:Lg,96:M6},H8={null:[Lg,j8]},G8={null:[42,95]},K8={null:[]},Z8=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:G8,contentInitial:$8,disable:K8,document:B8,flow:q8,flowInitial:U8,insideSpan:H8,string:F8,text:V8},Symbol.toStringTag,{value:"Module"}));function Q8(t,e,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const s={},a=[];let l=[],u=[];const f={attempt:P(D),check:P(I),consume:T,enter:A,exit:j,interrupt:P(I,{interrupt:!0})},d={code:null,containerState:{},defineSkip:x,events:[],now:v,parser:t,previous:null,sliceSerialize:y,sliceStream:g,write:p};let m=e.tokenize.call(d,f);return e.resolveAll&&a.push(e),d;function p(Q){return l=vr(l,Q),E(),l[l.length-1]!==null?[]:(q(e,0),d.events=pd(a,d.events,d),d.events)}function y(Q,re){return Y8(g(Q),re)}function g(Q){return J8(l,Q)}function v(){const{_bufferIndex:Q,_index:re,line:pe,column:X,offset:V}=r;return{_bufferIndex:Q,_index:re,line:pe,column:X,offset:V}}function x(Q){s[Q.line]=Q.column,z()}function E(){let Q;for(;r._index<l.length;){const re=l[r._index];if(typeof re=="string")for(Q=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===Q&&r._bufferIndex<re.length;)S(re.charCodeAt(r._bufferIndex));else S(re)}}function S(Q){m=m(Q)}function T(Q){Oe(Q)?(r.line++,r.column=1,r.offset+=Q===-3?2:1,z()):Q!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===l[r._index].length&&(r._bufferIndex=-1,r._index++)),d.previous=Q}function A(Q,re){const pe=re||{};return pe.type=Q,pe.start=v(),d.events.push(["enter",pe,d]),u.push(pe),pe}function j(Q){const re=u.pop();return re.end=v(),d.events.push(["exit",re,d]),re}function D(Q,re){q(Q,re.from)}function I(Q,re){re.restore()}function P(Q,re){return pe;function pe(X,V,$){let G,oe,M,C;return Array.isArray(X)?U(X):"tokenize"in X?U([X]):N(X);function N(he){return xe;function xe(Me){const je=Me!==null&&he[Me],et=Me!==null&&he.null,pt=[...Array.isArray(je)?je:je?[je]:[],...Array.isArray(et)?et:et?[et]:[]];return U(pt)(Me)}}function U(he){return G=he,oe=0,he.length===0?$:R(he[oe])}function R(he){return xe;function xe(Me){return C=H(),M=he,he.partial||(d.currentConstruct=he),he.name&&d.parser.constructs.disable.null.includes(he.name)?ce():he.tokenize.call(re?Object.assign(Object.create(d),re):d,f,te,ce)(Me)}}function te(he){return Q(M,C),V}function ce(he){return C.restore(),++oe<G.length?R(G[oe]):$}}}function q(Q,re){Q.resolveAll&&!a.includes(Q)&&a.push(Q),Q.resolve&&tr(d.events,re,d.events.length-re,Q.resolve(d.events.slice(re),d)),Q.resolveTo&&(d.events=Q.resolveTo(d.events,d))}function H(){const Q=v(),re=d.previous,pe=d.currentConstruct,X=d.events.length,V=Array.from(u);return{from:X,restore:$};function $(){r=Q,d.previous=re,d.currentConstruct=pe,d.events.length=X,u=V,z()}}function z(){r.line in s&&r.column<2&&(r.column=s[r.line],r.offset+=s[r.line]-1)}}function J8(t,e){const n=e.start._index,r=e.start._bufferIndex,s=e.end._index,a=e.end._bufferIndex;let l;if(n===s)l=[t[n].slice(r,a)];else{if(l=t.slice(n,s),r>-1){const u=l[0];typeof u=="string"?l[0]=u.slice(r):l.shift()}a>0&&l.push(t[s].slice(0,a))}return l}function Y8(t,e){let n=-1;const r=[];let s;for(;++n<t.length;){const a=t[n];let l;if(typeof a=="string")l=a;else switch(a){case-5:{l="\r";break}case-4:{l=`
`;break}case-3:{l=`\r
`;break}case-2:{l=e?" ":"	";break}case-1:{if(!e&&s)continue;l=" ";break}default:l=String.fromCharCode(a)}s=a===-2,r.push(l)}return r.join("")}function X8(t){const r={constructs:$E([Z8,...(t||{}).extensions||[]]),content:s(h6),defined:[],document:s(m6),flow:s(M8),lazy:{},string:s(L8),text:s(z8)};return r;function s(a){return l;function l(u){return Q8(r,a,u)}}}function W8(t){for(;!HE(t););return t}const O1=/[\0\t\n\r]/g;function eB(){let t=1,e="",n=!0,r;return s;function s(a,l,u){const f=[];let d,m,p,y,g;for(a=e+(typeof a=="string"?a.toString():new TextDecoder(l||void 0).decode(a)),p=0,e="",n&&(a.charCodeAt(0)===65279&&p++,n=void 0);p<a.length;){if(O1.lastIndex=p,d=O1.exec(a),y=d&&d.index!==void 0?d.index:a.length,g=a.charCodeAt(y),!d){e=a.slice(p);break}if(g===10&&p===y&&r)f.push(-3),r=void 0;else switch(r&&(f.push(-5),r=void 0),p<y&&(f.push(a.slice(p,y)),t+=y-p),g){case 0:{f.push(65533),t++;break}case 9:{for(m=Math.ceil(t/4)*4,f.push(-2);t++<m;)f.push(-1);break}case 10:{f.push(-4),t=1;break}default:r=!0,t=1}p=y+1}return u&&(r&&f.push(-5),e&&f.push(e),f.push(null)),f}}const tB=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function nB(t){return t.replace(tB,rB)}function rB(t,e,n){if(e)return e;if(n.charCodeAt(0)===35){const s=n.charCodeAt(1),a=s===120||s===88;return UE(n.slice(a?2:1),a?16:10)}return Qy(n)||t}const YE={}.hasOwnProperty;function sB(t,e,n){return typeof e!="string"&&(n=e,e=void 0),iB(n)(W8(X8(n).document().write(eB()(t,e,!0))))}function iB(t){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:a(pn),autolinkProtocol:H,autolinkEmail:H,atxHeading:a(hn),blockQuote:a(et),characterEscape:H,characterReference:H,codeFenced:a(pt),codeFencedFenceInfo:l,codeFencedFenceMeta:l,codeIndented:a(pt,l),codeText:a(kt,l),codeTextData:H,data:H,codeFlowValue:H,definition:a(Wt),definitionDestinationString:l,definitionLabelString:l,definitionTitleString:l,emphasis:a(bt),hardBreakEscape:a(en),hardBreakTrailing:a(en),htmlFlow:a(Nn,l),htmlFlowData:H,htmlText:a(Nn,l),htmlTextData:H,image:a(sr),label:l,link:a(pn),listItem:a(ke),listItemValue:y,listOrdered:a(wn,p),listUnordered:a(wn),paragraph:a(_e),reference:R,referenceString:l,resourceDestinationString:l,resourceTitleString:l,setextHeading:a(hn),strong:a(Te),thematicBreak:a(st)},exit:{atxHeading:f(),atxHeadingSequence:D,autolink:f(),autolinkEmail:je,autolinkProtocol:Me,blockQuote:f(),characterEscapeValue:z,characterReferenceMarkerHexadecimal:ce,characterReferenceMarkerNumeric:ce,characterReferenceValue:he,characterReference:xe,codeFenced:f(E),codeFencedFence:x,codeFencedFenceInfo:g,codeFencedFenceMeta:v,codeFlowValue:z,codeIndented:f(S),codeText:f(V),codeTextData:z,data:z,definition:f(),definitionDestinationString:j,definitionLabelString:T,definitionTitleString:A,emphasis:f(),hardBreakEscape:f(re),hardBreakTrailing:f(re),htmlFlow:f(pe),htmlFlowData:z,htmlText:f(X),htmlTextData:z,image:f(G),label:M,labelText:oe,lineEnding:Q,link:f($),listItem:f(),listOrdered:f(),listUnordered:f(),paragraph:f(),referenceString:te,resourceDestinationString:C,resourceTitleString:N,resource:U,setextHeading:f(q),setextHeadingLineSequence:P,setextHeadingText:I,strong:f(),thematicBreak:f()}};XE(e,(t||{}).mdastExtensions||[]);const n={};return r;function r(ne){let fe={type:"root",children:[]};const ye={stack:[fe],tokenStack:[],config:e,enter:u,exit:d,buffer:l,resume:m,data:n},ge=[];let ve=-1;for(;++ve<ne.length;)if(ne[ve][1].type==="listOrdered"||ne[ve][1].type==="listUnordered")if(ne[ve][0]==="enter")ge.push(ve);else{const Ie=ge.pop();ve=s(ne,Ie,ve)}for(ve=-1;++ve<ne.length;){const Ie=e[ne[ve][0]];YE.call(Ie,ne[ve][1].type)&&Ie[ne[ve][1].type].call(Object.assign({sliceSerialize:ne[ve][2].sliceSerialize},ye),ne[ve][1])}if(ye.tokenStack.length>0){const Ie=ye.tokenStack[ye.tokenStack.length-1];(Ie[1]||N1).call(ye,void 0,Ie[0])}for(fe.position={start:Hs(ne.length>0?ne[0][1].start:{line:1,column:1,offset:0}),end:Hs(ne.length>0?ne[ne.length-2][1].end:{line:1,column:1,offset:0})},ve=-1;++ve<e.transforms.length;)fe=e.transforms[ve](fe)||fe;return fe}function s(ne,fe,ye){let ge=fe-1,ve=-1,Ie=!1,tt,Xe,Pe,ut;for(;++ge<=ye;){const at=ne[ge];switch(at[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{at[0]==="enter"?ve++:ve--,ut=void 0;break}case"lineEndingBlank":{at[0]==="enter"&&(tt&&!ut&&!ve&&!Pe&&(Pe=ge),ut=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:ut=void 0}if(!ve&&at[0]==="enter"&&at[1].type==="listItemPrefix"||ve===-1&&at[0]==="exit"&&(at[1].type==="listUnordered"||at[1].type==="listOrdered")){if(tt){let ir=ge;for(Xe=void 0;ir--;){const ar=ne[ir];if(ar[1].type==="lineEnding"||ar[1].type==="lineEndingBlank"){if(ar[0]==="exit")continue;Xe&&(ne[Xe][1].type="lineEndingBlank",Ie=!0),ar[1].type="lineEnding",Xe=ir}else if(!(ar[1].type==="linePrefix"||ar[1].type==="blockQuotePrefix"||ar[1].type==="blockQuotePrefixWhitespace"||ar[1].type==="blockQuoteMarker"||ar[1].type==="listItemIndent"))break}Pe&&(!Xe||Pe<Xe)&&(tt._spread=!0),tt.end=Object.assign({},Xe?ne[Xe][1].start:at[1].end),ne.splice(Xe||ge,0,["exit",tt,at[2]]),ge++,ye++}if(at[1].type==="listItemPrefix"){const ir={type:"listItem",_spread:!1,start:Object.assign({},at[1].start),end:void 0};tt=ir,ne.splice(ge,0,["enter",ir,at[2]]),ge++,ye++,Pe=void 0,ut=!0}}}return ne[fe][1]._spread=Ie,ye}function a(ne,fe){return ye;function ye(ge){u.call(this,ne(ge),ge),fe&&fe.call(this,ge)}}function l(){this.stack.push({type:"fragment",children:[]})}function u(ne,fe,ye){this.stack[this.stack.length-1].children.push(ne),this.stack.push(ne),this.tokenStack.push([fe,ye||void 0]),ne.position={start:Hs(fe.start),end:void 0}}function f(ne){return fe;function fe(ye){ne&&ne.call(this,ye),d.call(this,ye)}}function d(ne,fe){const ye=this.stack.pop(),ge=this.tokenStack.pop();if(ge)ge[0].type!==ne.type&&(fe?fe.call(this,ne,ge[0]):(ge[1]||N1).call(this,ne,ge[0]));else throw new Error("Cannot close `"+ne.type+"` ("+Al({start:ne.start,end:ne.end})+"): its not open");ye.position.end=Hs(ne.end)}function m(){return Zy(this.stack.pop())}function p(){this.data.expectingFirstListItemValue=!0}function y(ne){if(this.data.expectingFirstListItemValue){const fe=this.stack[this.stack.length-2];fe.start=Number.parseInt(this.sliceSerialize(ne),10),this.data.expectingFirstListItemValue=void 0}}function g(){const ne=this.resume(),fe=this.stack[this.stack.length-1];fe.lang=ne}function v(){const ne=this.resume(),fe=this.stack[this.stack.length-1];fe.meta=ne}function x(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function E(){const ne=this.resume(),fe=this.stack[this.stack.length-1];fe.value=ne.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function S(){const ne=this.resume(),fe=this.stack[this.stack.length-1];fe.value=ne.replace(/(\r?\n|\r)$/g,"")}function T(ne){const fe=this.resume(),ye=this.stack[this.stack.length-1];ye.label=fe,ye.identifier=Or(this.sliceSerialize(ne)).toLowerCase()}function A(){const ne=this.resume(),fe=this.stack[this.stack.length-1];fe.title=ne}function j(){const ne=this.resume(),fe=this.stack[this.stack.length-1];fe.url=ne}function D(ne){const fe=this.stack[this.stack.length-1];if(!fe.depth){const ye=this.sliceSerialize(ne).length;fe.depth=ye}}function I(){this.data.setextHeadingSlurpLineEnding=!0}function P(ne){const fe=this.stack[this.stack.length-1];fe.depth=this.sliceSerialize(ne).codePointAt(0)===61?1:2}function q(){this.data.setextHeadingSlurpLineEnding=void 0}function H(ne){const ye=this.stack[this.stack.length-1].children;let ge=ye[ye.length-1];(!ge||ge.type!=="text")&&(ge=be(),ge.position={start:Hs(ne.start),end:void 0},ye.push(ge)),this.stack.push(ge)}function z(ne){const fe=this.stack.pop();fe.value+=this.sliceSerialize(ne),fe.position.end=Hs(ne.end)}function Q(ne){const fe=this.stack[this.stack.length-1];if(this.data.atHardBreak){const ye=fe.children[fe.children.length-1];ye.position.end=Hs(ne.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(fe.type)&&(H.call(this,ne),z.call(this,ne))}function re(){this.data.atHardBreak=!0}function pe(){const ne=this.resume(),fe=this.stack[this.stack.length-1];fe.value=ne}function X(){const ne=this.resume(),fe=this.stack[this.stack.length-1];fe.value=ne}function V(){const ne=this.resume(),fe=this.stack[this.stack.length-1];fe.value=ne}function $(){const ne=this.stack[this.stack.length-1];if(this.data.inReference){const fe=this.data.referenceType||"shortcut";ne.type+="Reference",ne.referenceType=fe,delete ne.url,delete ne.title}else delete ne.identifier,delete ne.label;this.data.referenceType=void 0}function G(){const ne=this.stack[this.stack.length-1];if(this.data.inReference){const fe=this.data.referenceType||"shortcut";ne.type+="Reference",ne.referenceType=fe,delete ne.url,delete ne.title}else delete ne.identifier,delete ne.label;this.data.referenceType=void 0}function oe(ne){const fe=this.sliceSerialize(ne),ye=this.stack[this.stack.length-2];ye.label=nB(fe),ye.identifier=Or(fe).toLowerCase()}function M(){const ne=this.stack[this.stack.length-1],fe=this.resume(),ye=this.stack[this.stack.length-1];if(this.data.inReference=!0,ye.type==="link"){const ge=ne.children;ye.children=ge}else ye.alt=fe}function C(){const ne=this.resume(),fe=this.stack[this.stack.length-1];fe.url=ne}function N(){const ne=this.resume(),fe=this.stack[this.stack.length-1];fe.title=ne}function U(){this.data.inReference=void 0}function R(){this.data.referenceType="collapsed"}function te(ne){const fe=this.resume(),ye=this.stack[this.stack.length-1];ye.label=fe,ye.identifier=Or(this.sliceSerialize(ne)).toLowerCase(),this.data.referenceType="full"}function ce(ne){this.data.characterReferenceType=ne.type}function he(ne){const fe=this.sliceSerialize(ne),ye=this.data.characterReferenceType;let ge;ye?(ge=UE(fe,ye==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):ge=Qy(fe);const ve=this.stack[this.stack.length-1];ve.value+=ge}function xe(ne){const fe=this.stack.pop();fe.position.end=Hs(ne.end)}function Me(ne){z.call(this,ne);const fe=this.stack[this.stack.length-1];fe.url=this.sliceSerialize(ne)}function je(ne){z.call(this,ne);const fe=this.stack[this.stack.length-1];fe.url="mailto:"+this.sliceSerialize(ne)}function et(){return{type:"blockquote",children:[]}}function pt(){return{type:"code",lang:null,meta:null,value:""}}function kt(){return{type:"inlineCode",value:""}}function Wt(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function bt(){return{type:"emphasis",children:[]}}function hn(){return{type:"heading",depth:0,children:[]}}function en(){return{type:"break"}}function Nn(){return{type:"html",value:""}}function sr(){return{type:"image",title:null,url:"",alt:null}}function pn(){return{type:"link",title:null,url:"",children:[]}}function wn(ne){return{type:"list",ordered:ne.type==="listOrdered",start:null,spread:ne._spread,children:[]}}function ke(ne){return{type:"listItem",spread:ne._spread,checked:null,children:[]}}function _e(){return{type:"paragraph",children:[]}}function Te(){return{type:"strong",children:[]}}function be(){return{type:"text",value:""}}function st(){return{type:"thematicBreak"}}}function Hs(t){return{line:t.line,column:t.column,offset:t.offset}}function XE(t,e){let n=-1;for(;++n<e.length;){const r=e[n];Array.isArray(r)?XE(t,r):aB(t,r)}}function aB(t,e){let n;for(n in e)if(YE.call(e,n))switch(n){case"canContainEols":{const r=e[n];r&&t[n].push(...r);break}case"transforms":{const r=e[n];r&&t[n].push(...r);break}case"enter":case"exit":{const r=e[n];r&&Object.assign(t[n],r);break}}}function N1(t,e){throw t?new Error("Cannot close `"+t.type+"` ("+Al({start:t.start,end:t.end})+"): a different token (`"+e.type+"`, "+Al({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+Al({start:e.start,end:e.end})+") is still open")}function oB(t){const e=this;e.parser=n;function n(r){return sB(r,{...e.data("settings"),...t,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function lB(t,e){const n={type:"element",tagName:"blockquote",properties:{},children:t.wrap(t.all(e),!0)};return t.patch(e,n),t.applyData(e,n)}function cB(t,e){const n={type:"element",tagName:"br",properties:{},children:[]};return t.patch(e,n),[t.applyData(e,n),{type:"text",value:`
`}]}function uB(t,e){const n=e.value?e.value+`
`:"",r={},s=e.lang?e.lang.split(/\s+/):[];s.length>0&&(r.className=["language-"+s[0]]);let a={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return e.meta&&(a.data={meta:e.meta}),t.patch(e,a),a=t.applyData(e,a),a={type:"element",tagName:"pre",properties:{},children:[a]},t.patch(e,a),a}function fB(t,e){const n={type:"element",tagName:"del",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function dB(t,e){const n={type:"element",tagName:"em",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function hB(t,e){const n=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",r=String(e.identifier).toUpperCase(),s=ro(r.toLowerCase()),a=t.footnoteOrder.indexOf(r);let l,u=t.footnoteCounts.get(r);u===void 0?(u=0,t.footnoteOrder.push(r),l=t.footnoteOrder.length):l=a+1,u+=1,t.footnoteCounts.set(r,u);const f={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+s,id:n+"fnref-"+s+(u>1?"-"+u:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(l)}]};t.patch(e,f);const d={type:"element",tagName:"sup",properties:{},children:[f]};return t.patch(e,d),t.applyData(e,d)}function pB(t,e){const n={type:"element",tagName:"h"+e.depth,properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function mB(t,e){if(t.options.allowDangerousHtml){const n={type:"raw",value:e.value};return t.patch(e,n),t.applyData(e,n)}}function WE(t,e){const n=e.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+r}];const s=t.all(e),a=s[0];a&&a.type==="text"?a.value="["+a.value:s.unshift({type:"text",value:"["});const l=s[s.length-1];return l&&l.type==="text"?l.value+=r:s.push({type:"text",value:r}),s}function gB(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return WE(t,e);const s={src:ro(r.url||""),alt:e.alt};r.title!==null&&r.title!==void 0&&(s.title=r.title);const a={type:"element",tagName:"img",properties:s,children:[]};return t.patch(e,a),t.applyData(e,a)}function yB(t,e){const n={src:ro(e.url)};e.alt!==null&&e.alt!==void 0&&(n.alt=e.alt),e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"img",properties:n,children:[]};return t.patch(e,r),t.applyData(e,r)}function bB(t,e){const n={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};t.patch(e,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return t.patch(e,r),t.applyData(e,r)}function _B(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return WE(t,e);const s={href:ro(r.url||"")};r.title!==null&&r.title!==void 0&&(s.title=r.title);const a={type:"element",tagName:"a",properties:s,children:t.all(e)};return t.patch(e,a),t.applyData(e,a)}function vB(t,e){const n={href:ro(e.url)};e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"a",properties:n,children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function xB(t,e,n){const r=t.all(e),s=n?wB(n):eC(e),a={},l=[];if(typeof e.checked=="boolean"){const m=r[0];let p;m&&m.type==="element"&&m.tagName==="p"?p=m:(p={type:"element",tagName:"p",properties:{},children:[]},r.unshift(p)),p.children.length>0&&p.children.unshift({type:"text",value:" "}),p.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),a.className=["task-list-item"]}let u=-1;for(;++u<r.length;){const m=r[u];(s||u!==0||m.type!=="element"||m.tagName!=="p")&&l.push({type:"text",value:`
`}),m.type==="element"&&m.tagName==="p"&&!s?l.push(...m.children):l.push(m)}const f=r[r.length-1];f&&(s||f.type!=="element"||f.tagName!=="p")&&l.push({type:"text",value:`
`});const d={type:"element",tagName:"li",properties:a,children:l};return t.patch(e,d),t.applyData(e,d)}function wB(t){let e=!1;if(t.type==="list"){e=t.spread||!1;const n=t.children;let r=-1;for(;!e&&++r<n.length;)e=eC(n[r])}return e}function eC(t){const e=t.spread;return e??t.children.length>1}function SB(t,e){const n={},r=t.all(e);let s=-1;for(typeof e.start=="number"&&e.start!==1&&(n.start=e.start);++s<r.length;){const l=r[s];if(l.type==="element"&&l.tagName==="li"&&l.properties&&Array.isArray(l.properties.className)&&l.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const a={type:"element",tagName:e.ordered?"ol":"ul",properties:n,children:t.wrap(r,!0)};return t.patch(e,a),t.applyData(e,a)}function kB(t,e){const n={type:"element",tagName:"p",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function EB(t,e){const n={type:"root",children:t.wrap(t.all(e))};return t.patch(e,n),t.applyData(e,n)}function CB(t,e){const n={type:"element",tagName:"strong",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function TB(t,e){const n=t.all(e),r=n.shift(),s=[];if(r){const l={type:"element",tagName:"thead",properties:{},children:t.wrap([r],!0)};t.patch(e.children[0],l),s.push(l)}if(n.length>0){const l={type:"element",tagName:"tbody",properties:{},children:t.wrap(n,!0)},u=Vy(e.children[1]),f=ME(e.children[e.children.length-1]);u&&f&&(l.position={start:u,end:f}),s.push(l)}const a={type:"element",tagName:"table",properties:{},children:t.wrap(s,!0)};return t.patch(e,a),t.applyData(e,a)}function AB(t,e,n){const r=n?n.children:void 0,a=(r?r.indexOf(e):1)===0?"th":"td",l=n&&n.type==="table"?n.align:void 0,u=l?l.length:e.children.length;let f=-1;const d=[];for(;++f<u;){const p=e.children[f],y={},g=l?l[f]:void 0;g&&(y.align=g);let v={type:"element",tagName:a,properties:y,children:[]};p&&(v.children=t.all(p),t.patch(p,v),v=t.applyData(p,v)),d.push(v)}const m={type:"element",tagName:"tr",properties:{},children:t.wrap(d,!0)};return t.patch(e,m),t.applyData(e,m)}function RB(t,e){const n={type:"element",tagName:"td",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}const I1=9,M1=32;function OB(t){const e=String(t),n=/\r?\n|\r/g;let r=n.exec(e),s=0;const a=[];for(;r;)a.push(D1(e.slice(s,r.index),s>0,!0),r[0]),s=r.index+r[0].length,r=n.exec(e);return a.push(D1(e.slice(s),s>0,!1)),a.join("")}function D1(t,e,n){let r=0,s=t.length;if(e){let a=t.codePointAt(r);for(;a===I1||a===M1;)r++,a=t.codePointAt(r)}if(n){let a=t.codePointAt(s-1);for(;a===I1||a===M1;)s--,a=t.codePointAt(s-1)}return s>r?t.slice(r,s):""}function NB(t,e){const n={type:"text",value:OB(String(e.value))};return t.patch(e,n),t.applyData(e,n)}function IB(t,e){const n={type:"element",tagName:"hr",properties:{},children:[]};return t.patch(e,n),t.applyData(e,n)}const MB={blockquote:lB,break:cB,code:uB,delete:fB,emphasis:dB,footnoteReference:hB,heading:pB,html:mB,imageReference:gB,image:yB,inlineCode:bB,linkReference:_B,link:vB,listItem:xB,list:SB,paragraph:kB,root:EB,strong:CB,table:TB,tableCell:RB,tableRow:AB,text:NB,thematicBreak:IB,toml:Mu,yaml:Mu,definition:Mu,footnoteDefinition:Mu};function Mu(){}const tC=-1,md=0,Ol=1,Pf=2,Yy=3,Xy=4,Wy=5,e0=6,nC=7,rC=8,j1=typeof self=="object"?self:globalThis,DB=(t,e)=>{const n=(s,a)=>(t.set(a,s),s),r=s=>{if(t.has(s))return t.get(s);const[a,l]=e[s];switch(a){case md:case tC:return n(l,s);case Ol:{const u=n([],s);for(const f of l)u.push(r(f));return u}case Pf:{const u=n({},s);for(const[f,d]of l)u[r(f)]=r(d);return u}case Yy:return n(new Date(l),s);case Xy:{const{source:u,flags:f}=l;return n(new RegExp(u,f),s)}case Wy:{const u=n(new Map,s);for(const[f,d]of l)u.set(r(f),r(d));return u}case e0:{const u=n(new Set,s);for(const f of l)u.add(r(f));return u}case nC:{const{name:u,message:f}=l;return n(new j1[u](f),s)}case rC:return n(BigInt(l),s);case"BigInt":return n(Object(BigInt(l)),s);case"ArrayBuffer":return n(new Uint8Array(l).buffer,l);case"DataView":{const{buffer:u}=new Uint8Array(l);return n(new DataView(u),l)}}return n(new j1[a](l),s)};return r},L1=t=>DB(new Map,t)(0),Ta="",{toString:jB}={},{keys:LB}=Object,al=t=>{const e=typeof t;if(e!=="object"||!t)return[md,e];const n=jB.call(t).slice(8,-1);switch(n){case"Array":return[Ol,Ta];case"Object":return[Pf,Ta];case"Date":return[Yy,Ta];case"RegExp":return[Xy,Ta];case"Map":return[Wy,Ta];case"Set":return[e0,Ta];case"DataView":return[Ol,n]}return n.includes("Array")?[Ol,n]:n.includes("Error")?[nC,n]:[Pf,n]},Du=([t,e])=>t===md&&(e==="function"||e==="symbol"),zB=(t,e,n,r)=>{const s=(l,u)=>{const f=r.push(l)-1;return n.set(u,f),f},a=l=>{if(n.has(l))return n.get(l);let[u,f]=al(l);switch(u){case md:{let m=l;switch(f){case"bigint":u=rC,m=l.toString();break;case"function":case"symbol":if(t)throw new TypeError("unable to serialize "+f);m=null;break;case"undefined":return s([tC],l)}return s([u,m],l)}case Ol:{if(f){let y=l;return f==="DataView"?y=new Uint8Array(l.buffer):f==="ArrayBuffer"&&(y=new Uint8Array(l)),s([f,[...y]],l)}const m=[],p=s([u,m],l);for(const y of l)m.push(a(y));return p}case Pf:{if(f)switch(f){case"BigInt":return s([f,l.toString()],l);case"Boolean":case"Number":case"String":return s([f,l.valueOf()],l)}if(e&&"toJSON"in l)return a(l.toJSON());const m=[],p=s([u,m],l);for(const y of LB(l))(t||!Du(al(l[y])))&&m.push([a(y),a(l[y])]);return p}case Yy:return s([u,l.toISOString()],l);case Xy:{const{source:m,flags:p}=l;return s([u,{source:m,flags:p}],l)}case Wy:{const m=[],p=s([u,m],l);for(const[y,g]of l)(t||!(Du(al(y))||Du(al(g))))&&m.push([a(y),a(g)]);return p}case e0:{const m=[],p=s([u,m],l);for(const y of l)(t||!Du(al(y)))&&m.push(a(y));return p}}const{message:d}=l;return s([u,{name:f,message:d}],l)};return a},z1=(t,{json:e,lossy:n}={})=>{const r=[];return zB(!(e||n),!!e,new Map,r)(t),r},Bf=typeof structuredClone=="function"?(t,e)=>e&&("json"in e||"lossy"in e)?L1(z1(t,e)):structuredClone(t):(t,e)=>L1(z1(t,e));function PB(t,e){const n=[{type:"text",value:""}];return e>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),n}function BB(t,e){return"Back to reference "+(t+1)+(e>1?"-"+e:"")}function $B(t){const e=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",n=t.options.footnoteBackContent||PB,r=t.options.footnoteBackLabel||BB,s=t.options.footnoteLabel||"Footnotes",a=t.options.footnoteLabelTagName||"h2",l=t.options.footnoteLabelProperties||{className:["sr-only"]},u=[];let f=-1;for(;++f<t.footnoteOrder.length;){const d=t.footnoteById.get(t.footnoteOrder[f]);if(!d)continue;const m=t.all(d),p=String(d.identifier).toUpperCase(),y=ro(p.toLowerCase());let g=0;const v=[],x=t.footnoteCounts.get(p);for(;x!==void 0&&++g<=x;){v.length>0&&v.push({type:"text",value:" "});let T=typeof n=="string"?n:n(f,g);typeof T=="string"&&(T={type:"text",value:T}),v.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+y+(g>1?"-"+g:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(f,g),className:["data-footnote-backref"]},children:Array.isArray(T)?T:[T]})}const E=m[m.length-1];if(E&&E.type==="element"&&E.tagName==="p"){const T=E.children[E.children.length-1];T&&T.type==="text"?T.value+=" ":E.children.push({type:"text",value:" "}),E.children.push(...v)}else m.push(...v);const S={type:"element",tagName:"li",properties:{id:e+"fn-"+y},children:t.wrap(m,!0)};t.patch(d,S),u.push(S)}if(u.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:a,properties:{...Bf(l),id:"footnote-label"},children:[{type:"text",value:s}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:t.wrap(u,!0)},{type:"text",value:`
`}]}}const gd=(function(t){if(t==null)return VB;if(typeof t=="function")return yd(t);if(typeof t=="object")return Array.isArray(t)?UB(t):qB(t);if(typeof t=="string")return FB(t);throw new Error("Expected function, string, or object as test")});function UB(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=gd(t[n]);return yd(r);function r(...s){let a=-1;for(;++a<e.length;)if(e[a].apply(this,s))return!0;return!1}}function qB(t){const e=t;return yd(n);function n(r){const s=r;let a;for(a in t)if(s[a]!==e[a])return!1;return!0}}function FB(t){return yd(e);function e(n){return n&&n.type===t}}function yd(t){return e;function e(n,r,s){return!!(HB(n)&&t.call(this,n,typeof r=="number"?r:void 0,s||void 0))}}function VB(){return!0}function HB(t){return t!==null&&typeof t=="object"&&"type"in t}const sC=[],GB=!0,zg=!1,KB="skip";function iC(t,e,n,r){let s;typeof e=="function"&&typeof n!="function"?(r=n,n=e):s=e;const a=gd(s),l=r?-1:1;u(t,void 0,[])();function u(f,d,m){const p=f&&typeof f=="object"?f:{};if(typeof p.type=="string"){const g=typeof p.tagName=="string"?p.tagName:typeof p.name=="string"?p.name:void 0;Object.defineProperty(y,"name",{value:"node ("+(f.type+(g?"<"+g+">":""))+")"})}return y;function y(){let g=sC,v,x,E;if((!e||a(f,d,m[m.length-1]||void 0))&&(g=ZB(n(f,m)),g[0]===zg))return g;if("children"in f&&f.children){const S=f;if(S.children&&g[0]!==KB)for(x=(r?S.children.length:-1)+l,E=m.concat(S);x>-1&&x<S.children.length;){const T=S.children[x];if(v=u(T,x,E)(),v[0]===zg)return v;x=typeof v[1]=="number"?v[1]:x+l}}return g}}}function ZB(t){return Array.isArray(t)?t:typeof t=="number"?[GB,t]:t==null?sC:[t]}function t0(t,e,n,r){let s,a,l;typeof e=="function"&&typeof n!="function"?(a=void 0,l=e,s=n):(a=e,l=n,s=r),iC(t,a,u,s);function u(f,d){const m=d[d.length-1],p=m?m.children.indexOf(f):void 0;return l(f,p,m)}}const Pg={}.hasOwnProperty,QB={};function JB(t,e){const n=e||QB,r=new Map,s=new Map,a=new Map,l={...MB,...n.handlers},u={all:d,applyData:XB,definitionById:r,footnoteById:s,footnoteCounts:a,footnoteOrder:[],handlers:l,one:f,options:n,patch:YB,wrap:e$};return t0(t,function(m){if(m.type==="definition"||m.type==="footnoteDefinition"){const p=m.type==="definition"?r:s,y=String(m.identifier).toUpperCase();p.has(y)||p.set(y,m)}}),u;function f(m,p){const y=m.type,g=u.handlers[y];if(Pg.call(u.handlers,y)&&g)return g(u,m,p);if(u.options.passThrough&&u.options.passThrough.includes(y)){if("children"in m){const{children:x,...E}=m,S=Bf(E);return S.children=u.all(m),S}return Bf(m)}return(u.options.unknownHandler||WB)(u,m,p)}function d(m){const p=[];if("children"in m){const y=m.children;let g=-1;for(;++g<y.length;){const v=u.one(y[g],m);if(v){if(g&&y[g-1].type==="break"&&(!Array.isArray(v)&&v.type==="text"&&(v.value=P1(v.value)),!Array.isArray(v)&&v.type==="element")){const x=v.children[0];x&&x.type==="text"&&(x.value=P1(x.value))}Array.isArray(v)?p.push(...v):p.push(v)}}}return p}}function YB(t,e){t.position&&(e.position=BP(t))}function XB(t,e){let n=e;if(t&&t.data){const r=t.data.hName,s=t.data.hChildren,a=t.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const l="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:l}}n.type==="element"&&a&&Object.assign(n.properties,Bf(a)),"children"in n&&n.children&&s!==null&&s!==void 0&&(n.children=s)}return n}function WB(t,e){const n=e.data||{},r="value"in e&&!(Pg.call(n,"hProperties")||Pg.call(n,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function e$(t,e){const n=[];let r=-1;for(e&&n.push({type:"text",value:`
`});++r<t.length;)r&&n.push({type:"text",value:`
`}),n.push(t[r]);return e&&t.length>0&&n.push({type:"text",value:`
`}),n}function P1(t){let e=0,n=t.charCodeAt(e);for(;n===9||n===32;)e++,n=t.charCodeAt(e);return t.slice(e)}function B1(t,e){const n=JB(t,e),r=n.one(t,void 0),s=$B(n),a=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return s&&a.children.push({type:"text",value:`
`},s),a}function t$(t,e){return t&&"run"in t?async function(n,r){const s=B1(n,{file:r,...e});await t.run(s,r)}:function(n,r){return B1(n,{file:r,...t||e})}}function $1(t){if(t)throw t}var xm,U1;function n$(){if(U1)return xm;U1=1;var t=Object.prototype.hasOwnProperty,e=Object.prototype.toString,n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,s=function(d){return typeof Array.isArray=="function"?Array.isArray(d):e.call(d)==="[object Array]"},a=function(d){if(!d||e.call(d)!=="[object Object]")return!1;var m=t.call(d,"constructor"),p=d.constructor&&d.constructor.prototype&&t.call(d.constructor.prototype,"isPrototypeOf");if(d.constructor&&!m&&!p)return!1;var y;for(y in d);return typeof y>"u"||t.call(d,y)},l=function(d,m){n&&m.name==="__proto__"?n(d,m.name,{enumerable:!0,configurable:!0,value:m.newValue,writable:!0}):d[m.name]=m.newValue},u=function(d,m){if(m==="__proto__")if(t.call(d,m)){if(r)return r(d,m).value}else return;return d[m]};return xm=function f(){var d,m,p,y,g,v,x=arguments[0],E=1,S=arguments.length,T=!1;for(typeof x=="boolean"&&(T=x,x=arguments[1]||{},E=2),(x==null||typeof x!="object"&&typeof x!="function")&&(x={});E<S;++E)if(d=arguments[E],d!=null)for(m in d)p=u(x,m),y=u(d,m),x!==y&&(T&&y&&(a(y)||(g=s(y)))?(g?(g=!1,v=p&&s(p)?p:[]):v=p&&a(p)?p:{},l(x,{name:m,newValue:f(T,v,y)})):typeof y<"u"&&l(x,{name:m,newValue:y}));return x},xm}var r$=n$();const wm=WS(r$);function Bg(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function s$(){const t=[],e={run:n,use:r};return e;function n(...s){let a=-1;const l=s.pop();if(typeof l!="function")throw new TypeError("Expected function as last argument, not "+l);u(null,...s);function u(f,...d){const m=t[++a];let p=-1;if(f){l(f);return}for(;++p<s.length;)(d[p]===null||d[p]===void 0)&&(d[p]=s[p]);s=d,m?i$(m,u)(...d):l(null,...d)}}function r(s){if(typeof s!="function")throw new TypeError("Expected `middelware` to be a function, not "+s);return t.push(s),e}}function i$(t,e){let n;return r;function r(...l){const u=t.length>l.length;let f;u&&l.push(s);try{f=t.apply(this,l)}catch(d){const m=d;if(u&&n)throw m;return s(m)}u||(f&&f.then&&typeof f.then=="function"?f.then(a,s):f instanceof Error?s(f):a(f))}function s(l,...u){n||(n=!0,e(l,...u))}function a(l){s(null,l)}}const Br={basename:a$,dirname:o$,extname:l$,join:c$,sep:"/"};function a$(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');ac(t);let n=0,r=-1,s=t.length,a;if(e===void 0||e.length===0||e.length>t.length){for(;s--;)if(t.codePointAt(s)===47){if(a){n=s+1;break}}else r<0&&(a=!0,r=s+1);return r<0?"":t.slice(n,r)}if(e===t)return"";let l=-1,u=e.length-1;for(;s--;)if(t.codePointAt(s)===47){if(a){n=s+1;break}}else l<0&&(a=!0,l=s+1),u>-1&&(t.codePointAt(s)===e.codePointAt(u--)?u<0&&(r=s):(u=-1,r=l));return n===r?r=l:r<0&&(r=t.length),t.slice(n,r)}function o$(t){if(ac(t),t.length===0)return".";let e=-1,n=t.length,r;for(;--n;)if(t.codePointAt(n)===47){if(r){e=n;break}}else r||(r=!0);return e<0?t.codePointAt(0)===47?"/":".":e===1&&t.codePointAt(0)===47?"//":t.slice(0,e)}function l$(t){ac(t);let e=t.length,n=-1,r=0,s=-1,a=0,l;for(;e--;){const u=t.codePointAt(e);if(u===47){if(l){r=e+1;break}continue}n<0&&(l=!0,n=e+1),u===46?s<0?s=e:a!==1&&(a=1):s>-1&&(a=-1)}return s<0||n<0||a===0||a===1&&s===n-1&&s===r+1?"":t.slice(s,n)}function c$(...t){let e=-1,n;for(;++e<t.length;)ac(t[e]),t[e]&&(n=n===void 0?t[e]:n+"/"+t[e]);return n===void 0?".":u$(n)}function u$(t){ac(t);const e=t.codePointAt(0)===47;let n=f$(t,!e);return n.length===0&&!e&&(n="."),n.length>0&&t.codePointAt(t.length-1)===47&&(n+="/"),e?"/"+n:n}function f$(t,e){let n="",r=0,s=-1,a=0,l=-1,u,f;for(;++l<=t.length;){if(l<t.length)u=t.codePointAt(l);else{if(u===47)break;u=47}if(u===47){if(!(s===l-1||a===1))if(s!==l-1&&a===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(f=n.lastIndexOf("/"),f!==n.length-1){f<0?(n="",r=0):(n=n.slice(0,f),r=n.length-1-n.lastIndexOf("/")),s=l,a=0;continue}}else if(n.length>0){n="",r=0,s=l,a=0;continue}}e&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+t.slice(s+1,l):n=t.slice(s+1,l),r=l-s-1;s=l,a=0}else u===46&&a>-1?a++:a=-1}return n}function ac(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const d$={cwd:h$};function h$(){return"/"}function $g(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function p$(t){if(typeof t=="string")t=new URL(t);else if(!$g(t)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(t.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return m$(t)}function m$(t){if(t.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const e=t.pathname;let n=-1;for(;++n<e.length;)if(e.codePointAt(n)===37&&e.codePointAt(n+1)===50){const r=e.codePointAt(n+2);if(r===70||r===102){const s=new TypeError("File URL path must not include encoded / characters");throw s.code="ERR_INVALID_FILE_URL_PATH",s}}return decodeURIComponent(e)}const Sm=["history","path","basename","stem","extname","dirname"];class aC{constructor(e){let n;e?$g(e)?n={path:e}:typeof e=="string"||g$(e)?n={value:e}:n=e:n={},this.cwd="cwd"in n?"":d$.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<Sm.length;){const a=Sm[r];a in n&&n[a]!==void 0&&n[a]!==null&&(this[a]=a==="history"?[...n[a]]:n[a])}let s;for(s in n)Sm.includes(s)||(this[s]=n[s])}get basename(){return typeof this.path=="string"?Br.basename(this.path):void 0}set basename(e){Em(e,"basename"),km(e,"basename"),this.path=Br.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?Br.dirname(this.path):void 0}set dirname(e){q1(this.basename,"dirname"),this.path=Br.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?Br.extname(this.path):void 0}set extname(e){if(km(e,"extname"),q1(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Br.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){$g(e)&&(e=p$(e)),Em(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?Br.basename(this.path,this.extname):void 0}set stem(e){Em(e,"stem"),km(e,"stem"),this.path=Br.join(this.dirname||"",e+(this.extname||""))}fail(e,n,r){const s=this.message(e,n,r);throw s.fatal=!0,s}info(e,n,r){const s=this.message(e,n,r);return s.fatal=void 0,s}message(e,n,r){const s=new xn(e,n,r);return this.path&&(s.name=this.path+":"+s.name,s.file=this.path),s.fatal=!1,this.messages.push(s),s}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function km(t,e){if(t&&t.includes(Br.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+Br.sep+"`")}function Em(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}function q1(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}function g$(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const y$=(function(t){const r=this.constructor.prototype,s=r[t],a=function(){return s.apply(a,arguments)};return Object.setPrototypeOf(a,r),a}),b$={}.hasOwnProperty;class n0 extends y${constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=s$()}copy(){const e=new n0;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];e.use(...r)}return e.data(wm(!0,{},this.namespace)),e}data(e,n){return typeof e=="string"?arguments.length===2?(Am("data",this.frozen),this.namespace[e]=n,this):b$.call(this.namespace,e)&&this.namespace[e]||void 0:e?(Am("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const s=n.call(e,...r);typeof s=="function"&&this.transformers.use(s)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const n=ju(e),r=this.parser||this.Parser;return Cm("parse",r),r(String(n),n)}process(e,n){const r=this;return this.freeze(),Cm("process",this.parser||this.Parser),Tm("process",this.compiler||this.Compiler),n?s(void 0,n):new Promise(s);function s(a,l){const u=ju(e),f=r.parse(u);r.run(f,u,function(m,p,y){if(m||!p||!y)return d(m);const g=p,v=r.stringify(g,y);x$(v)?y.value=v:y.result=v,d(m,y)});function d(m,p){m||!p?l(m):a?a(p):n(void 0,p)}}}processSync(e){let n=!1,r;return this.freeze(),Cm("processSync",this.parser||this.Parser),Tm("processSync",this.compiler||this.Compiler),this.process(e,s),V1("processSync","process",n),r;function s(a,l){n=!0,$1(a),r=l}}run(e,n,r){F1(e),this.freeze();const s=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?a(void 0,r):new Promise(a);function a(l,u){const f=ju(n);s.run(e,f,d);function d(m,p,y){const g=p||e;m?u(m):l?l(g):r(void 0,g,y)}}}runSync(e,n){let r=!1,s;return this.run(e,n,a),V1("runSync","run",r),s;function a(l,u){$1(l),s=u,r=!0}}stringify(e,n){this.freeze();const r=ju(n),s=this.compiler||this.Compiler;return Tm("stringify",s),F1(e),s(e,r)}use(e,...n){const r=this.attachers,s=this.namespace;if(Am("use",this.frozen),e!=null)if(typeof e=="function")f(e,n);else if(typeof e=="object")Array.isArray(e)?u(e):l(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function a(d){if(typeof d=="function")f(d,[]);else if(typeof d=="object")if(Array.isArray(d)){const[m,...p]=d;f(m,p)}else l(d);else throw new TypeError("Expected usable value, not `"+d+"`")}function l(d){if(!("plugins"in d)&&!("settings"in d))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");u(d.plugins),d.settings&&(s.settings=wm(!0,s.settings,d.settings))}function u(d){let m=-1;if(d!=null)if(Array.isArray(d))for(;++m<d.length;){const p=d[m];a(p)}else throw new TypeError("Expected a list of plugins, not `"+d+"`")}function f(d,m){let p=-1,y=-1;for(;++p<r.length;)if(r[p][0]===d){y=p;break}if(y===-1)r.push([d,...m]);else if(m.length>0){let[g,...v]=m;const x=r[y][1];Bg(x)&&Bg(g)&&(g=wm(!0,x,g)),r[y]=[d,g,...v]}}}}const _$=new n0().freeze();function Cm(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `parser`")}function Tm(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `compiler`")}function Am(t,e){if(e)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function F1(t){if(!Bg(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}function V1(t,e,n){if(!n)throw new Error("`"+t+"` finished async. Use `"+e+"` instead")}function ju(t){return v$(t)?t:new aC(t)}function v$(t){return!!(t&&typeof t=="object"&&"message"in t&&"messages"in t)}function x$(t){return typeof t=="string"||w$(t)}function w$(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const S$="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",H1=[],G1={allowDangerousHtml:!0},k$=/^(https?|ircs?|mailto|xmpp)$/i,E$=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function C$(t){const e=T$(t),n=A$(t);return R$(e.runSync(e.parse(n),n),t)}function T$(t){const e=t.rehypePlugins||H1,n=t.remarkPlugins||H1,r=t.remarkRehypeOptions?{...t.remarkRehypeOptions,...G1}:G1;return _$().use(oB).use(n).use(t$,r).use(e)}function A$(t){const e=t.children||"",n=new aC;return typeof e=="string"&&(n.value=e),n}function R$(t,e){const n=e.allowedElements,r=e.allowElement,s=e.components,a=e.disallowedElements,l=e.skipHtml,u=e.unwrapDisallowed,f=e.urlTransform||O$;for(const m of E$)Object.hasOwn(e,m.from)&&(""+m.from+(m.to?"use `"+m.to+"` instead":"remove it")+S$+m.id,void 0);return t0(t,d),VP(t,{Fragment:w.Fragment,components:s,ignoreInvalidStyle:!0,jsx:w.jsx,jsxs:w.jsxs,passKeys:!0,passNode:!0});function d(m,p,y){if(m.type==="raw"&&y&&typeof p=="number")return l?y.children.splice(p,1):y.children[p]={type:"text",value:m.value},p;if(m.type==="element"){let g;for(g in bm)if(Object.hasOwn(bm,g)&&Object.hasOwn(m.properties,g)){const v=m.properties[g],x=bm[g];(x===null||x.includes(m.tagName))&&(m.properties[g]=f(String(v||""),g,m))}}if(m.type==="element"){let g=n?!n.includes(m.tagName):a?a.includes(m.tagName):!1;if(!g&&r&&typeof p=="number"&&(g=!r(m,p,y)),g&&y&&typeof p=="number")return u&&m.children?y.children.splice(p,1,...m.children):y.children.splice(p,1),p}}}function O$(t){const e=t.indexOf(":"),n=t.indexOf("?"),r=t.indexOf("#"),s=t.indexOf("/");return e===-1||s!==-1&&e>s||n!==-1&&e>n||r!==-1&&e>r||k$.test(t.slice(0,e))?t:""}function N$(t){if(typeof t!="string")throw new TypeError("Expected a string");return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function oC(t,e,n){const s=gd((n||{}).ignore||[]),a=I$(e);let l=-1;for(;++l<a.length;)iC(t,"text",u);function u(d,m){let p=-1,y;for(;++p<m.length;){const g=m[p],v=y?y.children:void 0;if(s(g,v?v.indexOf(g):void 0,y))return;y=g}if(y)return f(d,m)}function f(d,m){const p=m[m.length-1],y=a[l][0],g=a[l][1];let v=0;const E=p.children.indexOf(d);let S=!1,T=[];y.lastIndex=0;let A=y.exec(d.value);for(;A;){const j=A.index,D={index:A.index,input:A.input,stack:[...m,d]};let I=g(...A,D);if(typeof I=="string"&&(I=I.length>0?{type:"text",value:I}:void 0),I===!1?y.lastIndex=j+1:(v!==j&&T.push({type:"text",value:d.value.slice(v,j)}),Array.isArray(I)?T.push(...I):I&&T.push(I),v=j+A[0].length,S=!0),!y.global)break;A=y.exec(d.value)}return S?(v<d.value.length&&T.push({type:"text",value:d.value.slice(v)}),p.children.splice(E,1,...T)):T=[d],E+T.length}}function I$(t){const e=[];if(!Array.isArray(t))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!t[0]||Array.isArray(t[0])?t:[t];let r=-1;for(;++r<n.length;){const s=n[r];e.push([M$(s[0]),D$(s[1])])}return e}function M$(t){return typeof t=="string"?new RegExp(N$(t),"g"):t}function D$(t){return typeof t=="function"?t:function(){return t}}const Rm="phrasing",Om=["autolink","link","image","label"];function j$(){return{transforms:[q$],enter:{literalAutolink:z$,literalAutolinkEmail:Nm,literalAutolinkHttp:Nm,literalAutolinkWww:Nm},exit:{literalAutolink:U$,literalAutolinkEmail:$$,literalAutolinkHttp:P$,literalAutolinkWww:B$}}}function L$(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:Rm,notInConstruct:Om},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:Rm,notInConstruct:Om},{character:":",before:"[ps]",after:"\\/",inConstruct:Rm,notInConstruct:Om}]}}function z$(t){this.enter({type:"link",title:null,url:"",children:[]},t)}function Nm(t){this.config.enter.autolinkProtocol.call(this,t)}function P$(t){this.config.exit.autolinkProtocol.call(this,t)}function B$(t){this.config.exit.data.call(this,t);const e=this.stack[this.stack.length-1];e.type,e.url="http://"+this.sliceSerialize(t)}function $$(t){this.config.exit.autolinkEmail.call(this,t)}function U$(t){this.exit(t)}function q$(t){oC(t,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,F$],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),V$]],{ignore:["link","linkReference"]})}function F$(t,e,n,r,s){let a="";if(!lC(s)||(/^w/i.test(e)&&(n=e+n,e="",a="http://"),!H$(n)))return!1;const l=G$(n+r);if(!l[0])return!1;const u={type:"link",title:null,url:a+e+l[0],children:[{type:"text",value:e+l[0]}]};return l[1]?[u,{type:"text",value:l[1]}]:u}function V$(t,e,n,r){return!lC(r,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+e+"@"+n,children:[{type:"text",value:e+"@"+n}]}}function H$(t){const e=t.split(".");return!(e.length<2||e[e.length-1]&&(/_/.test(e[e.length-1])||!/[a-zA-Z\d]/.test(e[e.length-1]))||e[e.length-2]&&(/_/.test(e[e.length-2])||!/[a-zA-Z\d]/.test(e[e.length-2])))}function G$(t){const e=/[!"&'),.:;<>?\]}]+$/.exec(t);if(!e)return[t,void 0];t=t.slice(0,e.index);let n=e[0],r=n.indexOf(")");const s=Nf(t,"(");let a=Nf(t,")");for(;r!==-1&&s>a;)t+=n.slice(0,r+1),n=n.slice(r+1),r=n.indexOf(")"),a++;return[t,n]}function lC(t,e){const n=t.input.charCodeAt(t.index-1);return(t.index===0||Mi(n)||hd(n))&&(!e||n!==47)}cC.peek=tU;function K$(){this.buffer()}function Z$(t){this.enter({type:"footnoteReference",identifier:"",label:""},t)}function Q$(){this.buffer()}function J$(t){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},t)}function Y$(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Or(this.sliceSerialize(t)).toLowerCase(),n.label=e}function X$(t){this.exit(t)}function W$(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Or(this.sliceSerialize(t)).toLowerCase(),n.label=e}function eU(t){this.exit(t)}function tU(){return"["}function cC(t,e,n,r){const s=n.createTracker(r);let a=s.move("[^");const l=n.enter("footnoteReference"),u=n.enter("reference");return a+=s.move(n.safe(n.associationId(t),{after:"]",before:a})),u(),l(),a+=s.move("]"),a}function nU(){return{enter:{gfmFootnoteCallString:K$,gfmFootnoteCall:Z$,gfmFootnoteDefinitionLabelString:Q$,gfmFootnoteDefinition:J$},exit:{gfmFootnoteCallString:Y$,gfmFootnoteCall:X$,gfmFootnoteDefinitionLabelString:W$,gfmFootnoteDefinition:eU}}}function rU(t){let e=!1;return t&&t.firstLineBlank&&(e=!0),{handlers:{footnoteDefinition:n,footnoteReference:cC},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(r,s,a,l){const u=a.createTracker(l);let f=u.move("[^");const d=a.enter("footnoteDefinition"),m=a.enter("label");return f+=u.move(a.safe(a.associationId(r),{before:f,after:"]"})),m(),f+=u.move("]:"),r.children&&r.children.length>0&&(u.shift(4),f+=u.move((e?`
`:" ")+a.indentLines(a.containerFlow(r,u.current()),e?uC:sU))),d(),f}}function sU(t,e,n){return e===0?t:uC(t,e,n)}function uC(t,e,n){return(n?"":"    ")+t}const iU=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];fC.peek=uU;function aU(){return{canContainEols:["delete"],enter:{strikethrough:lU},exit:{strikethrough:cU}}}function oU(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:iU}],handlers:{delete:fC}}}function lU(t){this.enter({type:"delete",children:[]},t)}function cU(t){this.exit(t)}function fC(t,e,n,r){const s=n.createTracker(r),a=n.enter("strikethrough");let l=s.move("~~");return l+=n.containerPhrasing(t,{...s.current(),before:l,after:"~"}),l+=s.move("~~"),a(),l}function uU(){return"~"}function fU(t){return t.length}function dU(t,e){const n=e||{},r=(n.align||[]).concat(),s=n.stringLength||fU,a=[],l=[],u=[],f=[];let d=0,m=-1;for(;++m<t.length;){const x=[],E=[];let S=-1;for(t[m].length>d&&(d=t[m].length);++S<t[m].length;){const T=hU(t[m][S]);if(n.alignDelimiters!==!1){const A=s(T);E[S]=A,(f[S]===void 0||A>f[S])&&(f[S]=A)}x.push(T)}l[m]=x,u[m]=E}let p=-1;if(typeof r=="object"&&"length"in r)for(;++p<d;)a[p]=K1(r[p]);else{const x=K1(r);for(;++p<d;)a[p]=x}p=-1;const y=[],g=[];for(;++p<d;){const x=a[p];let E="",S="";x===99?(E=":",S=":"):x===108?E=":":x===114&&(S=":");let T=n.alignDelimiters===!1?1:Math.max(1,f[p]-E.length-S.length);const A=E+"-".repeat(T)+S;n.alignDelimiters!==!1&&(T=E.length+T+S.length,T>f[p]&&(f[p]=T),g[p]=T),y[p]=A}l.splice(1,0,y),u.splice(1,0,g),m=-1;const v=[];for(;++m<l.length;){const x=l[m],E=u[m];p=-1;const S=[];for(;++p<d;){const T=x[p]||"";let A="",j="";if(n.alignDelimiters!==!1){const D=f[p]-(E[p]||0),I=a[p];I===114?A=" ".repeat(D):I===99?D%2?(A=" ".repeat(D/2+.5),j=" ".repeat(D/2-.5)):(A=" ".repeat(D/2),j=A):j=" ".repeat(D)}n.delimiterStart!==!1&&!p&&S.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&T==="")&&(n.delimiterStart!==!1||p)&&S.push(" "),n.alignDelimiters!==!1&&S.push(A),S.push(T),n.alignDelimiters!==!1&&S.push(j),n.padding!==!1&&S.push(" "),(n.delimiterEnd!==!1||p!==d-1)&&S.push("|")}v.push(n.delimiterEnd===!1?S.join("").replace(/ +$/,""):S.join(""))}return v.join(`
`)}function hU(t){return t==null?"":String(t)}function K1(t){const e=typeof t=="string"?t.codePointAt(0):0;return e===67||e===99?99:e===76||e===108?108:e===82||e===114?114:0}function pU(t,e,n,r){const s=n.enter("blockquote"),a=n.createTracker(r);a.move("> "),a.shift(2);const l=n.indentLines(n.containerFlow(t,a.current()),mU);return s(),l}function mU(t,e,n){return">"+(n?"":" ")+t}function gU(t,e){return Z1(t,e.inConstruct,!0)&&!Z1(t,e.notInConstruct,!1)}function Z1(t,e,n){if(typeof e=="string"&&(e=[e]),!e||e.length===0)return n;let r=-1;for(;++r<e.length;)if(t.includes(e[r]))return!0;return!1}function Q1(t,e,n,r){let s=-1;for(;++s<n.unsafe.length;)if(n.unsafe[s].character===`
`&&gU(n.stack,n.unsafe[s]))return/[ \t]/.test(r.before)?"":" ";return`\\
`}function yU(t,e){const n=String(t);let r=n.indexOf(e),s=r,a=0,l=0;if(typeof e!="string")throw new TypeError("Expected substring");for(;r!==-1;)r===s?++a>l&&(l=a):a=1,s=r+e.length,r=n.indexOf(e,s);return l}function bU(t,e){return!!(e.options.fences===!1&&t.value&&!t.lang&&/[^ \r\n]/.test(t.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(t.value))}function _U(t){const e=t.options.fence||"`";if(e!=="`"&&e!=="~")throw new Error("Cannot serialize code with `"+e+"` for `options.fence`, expected `` ` `` or `~`");return e}function vU(t,e,n,r){const s=_U(n),a=t.value||"",l=s==="`"?"GraveAccent":"Tilde";if(bU(t,n)){const p=n.enter("codeIndented"),y=n.indentLines(a,xU);return p(),y}const u=n.createTracker(r),f=s.repeat(Math.max(yU(a,s)+1,3)),d=n.enter("codeFenced");let m=u.move(f);if(t.lang){const p=n.enter(`codeFencedLang${l}`);m+=u.move(n.safe(t.lang,{before:m,after:" ",encode:["`"],...u.current()})),p()}if(t.lang&&t.meta){const p=n.enter(`codeFencedMeta${l}`);m+=u.move(" "),m+=u.move(n.safe(t.meta,{before:m,after:`
`,encode:["`"],...u.current()})),p()}return m+=u.move(`
`),a&&(m+=u.move(a+`
`)),m+=u.move(f),d(),m}function xU(t,e,n){return(n?"":"    ")+t}function r0(t){const e=t.options.quote||'"';if(e!=='"'&&e!=="'")throw new Error("Cannot serialize title with `"+e+"` for `options.quote`, expected `\"`, or `'`");return e}function wU(t,e,n,r){const s=r0(n),a=s==='"'?"Quote":"Apostrophe",l=n.enter("definition");let u=n.enter("label");const f=n.createTracker(r);let d=f.move("[");return d+=f.move(n.safe(n.associationId(t),{before:d,after:"]",...f.current()})),d+=f.move("]: "),u(),!t.url||/[\0- \u007F]/.test(t.url)?(u=n.enter("destinationLiteral"),d+=f.move("<"),d+=f.move(n.safe(t.url,{before:d,after:">",...f.current()})),d+=f.move(">")):(u=n.enter("destinationRaw"),d+=f.move(n.safe(t.url,{before:d,after:t.title?" ":`
`,...f.current()}))),u(),t.title&&(u=n.enter(`title${a}`),d+=f.move(" "+s),d+=f.move(n.safe(t.title,{before:d,after:s,...f.current()})),d+=f.move(s),u()),l(),d}function SU(t){const e=t.options.emphasis||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize emphasis with `"+e+"` for `options.emphasis`, expected `*`, or `_`");return e}function Kl(t){return"&#x"+t.toString(16).toUpperCase()+";"}function $f(t,e,n){const r=Ja(t),s=Ja(e);return r===void 0?s===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:s===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:r===1?s===void 0?{inside:!1,outside:!1}:s===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:s===void 0?{inside:!1,outside:!1}:s===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}dC.peek=kU;function dC(t,e,n,r){const s=SU(n),a=n.enter("emphasis"),l=n.createTracker(r),u=l.move(s);let f=l.move(n.containerPhrasing(t,{after:s,before:u,...l.current()}));const d=f.charCodeAt(0),m=$f(r.before.charCodeAt(r.before.length-1),d,s);m.inside&&(f=Kl(d)+f.slice(1));const p=f.charCodeAt(f.length-1),y=$f(r.after.charCodeAt(0),p,s);y.inside&&(f=f.slice(0,-1)+Kl(p));const g=l.move(s);return a(),n.attentionEncodeSurroundingInfo={after:y.outside,before:m.outside},u+f+g}function kU(t,e,n){return n.options.emphasis||"*"}function EU(t,e){let n=!1;return t0(t,function(r){if("value"in r&&/\r?\n|\r/.test(r.value)||r.type==="break")return n=!0,zg}),!!((!t.depth||t.depth<3)&&Zy(t)&&(e.options.setext||n))}function CU(t,e,n,r){const s=Math.max(Math.min(6,t.depth||1),1),a=n.createTracker(r);if(EU(t,n)){const m=n.enter("headingSetext"),p=n.enter("phrasing"),y=n.containerPhrasing(t,{...a.current(),before:`
`,after:`
`});return p(),m(),y+`
`+(s===1?"=":"-").repeat(y.length-(Math.max(y.lastIndexOf("\r"),y.lastIndexOf(`
`))+1))}const l="#".repeat(s),u=n.enter("headingAtx"),f=n.enter("phrasing");a.move(l+" ");let d=n.containerPhrasing(t,{before:"# ",after:`
`,...a.current()});return/^[\t ]/.test(d)&&(d=Kl(d.charCodeAt(0))+d.slice(1)),d=d?l+" "+d:l,n.options.closeAtx&&(d+=" "+l),f(),u(),d}hC.peek=TU;function hC(t){return t.value||""}function TU(){return"<"}pC.peek=AU;function pC(t,e,n,r){const s=r0(n),a=s==='"'?"Quote":"Apostrophe",l=n.enter("image");let u=n.enter("label");const f=n.createTracker(r);let d=f.move("![");return d+=f.move(n.safe(t.alt,{before:d,after:"]",...f.current()})),d+=f.move("]("),u(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(u=n.enter("destinationLiteral"),d+=f.move("<"),d+=f.move(n.safe(t.url,{before:d,after:">",...f.current()})),d+=f.move(">")):(u=n.enter("destinationRaw"),d+=f.move(n.safe(t.url,{before:d,after:t.title?" ":")",...f.current()}))),u(),t.title&&(u=n.enter(`title${a}`),d+=f.move(" "+s),d+=f.move(n.safe(t.title,{before:d,after:s,...f.current()})),d+=f.move(s),u()),d+=f.move(")"),l(),d}function AU(){return"!"}mC.peek=RU;function mC(t,e,n,r){const s=t.referenceType,a=n.enter("imageReference");let l=n.enter("label");const u=n.createTracker(r);let f=u.move("![");const d=n.safe(t.alt,{before:f,after:"]",...u.current()});f+=u.move(d+"]["),l();const m=n.stack;n.stack=[],l=n.enter("reference");const p=n.safe(n.associationId(t),{before:f,after:"]",...u.current()});return l(),n.stack=m,a(),s==="full"||!d||d!==p?f+=u.move(p+"]"):s==="shortcut"?f=f.slice(0,-1):f+=u.move("]"),f}function RU(){return"!"}gC.peek=OU;function gC(t,e,n){let r=t.value||"",s="`",a=-1;for(;new RegExp("(^|[^`])"+s+"([^`]|$)").test(r);)s+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++a<n.unsafe.length;){const l=n.unsafe[a],u=n.compilePattern(l);let f;if(l.atBreak)for(;f=u.exec(r);){let d=f.index;r.charCodeAt(d)===10&&r.charCodeAt(d-1)===13&&d--,r=r.slice(0,d)+" "+r.slice(f.index+1)}}return s+r+s}function OU(){return"`"}function yC(t,e){const n=Zy(t);return!!(!e.options.resourceLink&&t.url&&!t.title&&t.children&&t.children.length===1&&t.children[0].type==="text"&&(n===t.url||"mailto:"+n===t.url)&&/^[a-z][a-z+.-]+:/i.test(t.url)&&!/[\0- <>\u007F]/.test(t.url))}bC.peek=NU;function bC(t,e,n,r){const s=r0(n),a=s==='"'?"Quote":"Apostrophe",l=n.createTracker(r);let u,f;if(yC(t,n)){const m=n.stack;n.stack=[],u=n.enter("autolink");let p=l.move("<");return p+=l.move(n.containerPhrasing(t,{before:p,after:">",...l.current()})),p+=l.move(">"),u(),n.stack=m,p}u=n.enter("link"),f=n.enter("label");let d=l.move("[");return d+=l.move(n.containerPhrasing(t,{before:d,after:"](",...l.current()})),d+=l.move("]("),f(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(f=n.enter("destinationLiteral"),d+=l.move("<"),d+=l.move(n.safe(t.url,{before:d,after:">",...l.current()})),d+=l.move(">")):(f=n.enter("destinationRaw"),d+=l.move(n.safe(t.url,{before:d,after:t.title?" ":")",...l.current()}))),f(),t.title&&(f=n.enter(`title${a}`),d+=l.move(" "+s),d+=l.move(n.safe(t.title,{before:d,after:s,...l.current()})),d+=l.move(s),f()),d+=l.move(")"),u(),d}function NU(t,e,n){return yC(t,n)?"<":"["}_C.peek=IU;function _C(t,e,n,r){const s=t.referenceType,a=n.enter("linkReference");let l=n.enter("label");const u=n.createTracker(r);let f=u.move("[");const d=n.containerPhrasing(t,{before:f,after:"]",...u.current()});f+=u.move(d+"]["),l();const m=n.stack;n.stack=[],l=n.enter("reference");const p=n.safe(n.associationId(t),{before:f,after:"]",...u.current()});return l(),n.stack=m,a(),s==="full"||!d||d!==p?f+=u.move(p+"]"):s==="shortcut"?f=f.slice(0,-1):f+=u.move("]"),f}function IU(){return"["}function s0(t){const e=t.options.bullet||"*";if(e!=="*"&&e!=="+"&&e!=="-")throw new Error("Cannot serialize items with `"+e+"` for `options.bullet`, expected `*`, `+`, or `-`");return e}function MU(t){const e=s0(t),n=t.options.bulletOther;if(!n)return e==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===e)throw new Error("Expected `bullet` (`"+e+"`) and `bulletOther` (`"+n+"`) to be different");return n}function DU(t){const e=t.options.bulletOrdered||".";if(e!=="."&&e!==")")throw new Error("Cannot serialize items with `"+e+"` for `options.bulletOrdered`, expected `.` or `)`");return e}function vC(t){const e=t.options.rule||"*";if(e!=="*"&&e!=="-"&&e!=="_")throw new Error("Cannot serialize rules with `"+e+"` for `options.rule`, expected `*`, `-`, or `_`");return e}function jU(t,e,n,r){const s=n.enter("list"),a=n.bulletCurrent;let l=t.ordered?DU(n):s0(n);const u=t.ordered?l==="."?")":".":MU(n);let f=e&&n.bulletLastUsed?l===n.bulletLastUsed:!1;if(!t.ordered){const m=t.children?t.children[0]:void 0;if((l==="*"||l==="-")&&m&&(!m.children||!m.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(f=!0),vC(n)===l&&m){let p=-1;for(;++p<t.children.length;){const y=t.children[p];if(y&&y.type==="listItem"&&y.children&&y.children[0]&&y.children[0].type==="thematicBreak"){f=!0;break}}}}f&&(l=u),n.bulletCurrent=l;const d=n.containerFlow(t,r);return n.bulletLastUsed=l,n.bulletCurrent=a,s(),d}function LU(t){const e=t.options.listItemIndent||"one";if(e!=="tab"&&e!=="one"&&e!=="mixed")throw new Error("Cannot serialize items with `"+e+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return e}function zU(t,e,n,r){const s=LU(n);let a=n.bulletCurrent||s0(n);e&&e.type==="list"&&e.ordered&&(a=(typeof e.start=="number"&&e.start>-1?e.start:1)+(n.options.incrementListMarker===!1?0:e.children.indexOf(t))+a);let l=a.length+1;(s==="tab"||s==="mixed"&&(e&&e.type==="list"&&e.spread||t.spread))&&(l=Math.ceil(l/4)*4);const u=n.createTracker(r);u.move(a+" ".repeat(l-a.length)),u.shift(l);const f=n.enter("listItem"),d=n.indentLines(n.containerFlow(t,u.current()),m);return f(),d;function m(p,y,g){return y?(g?"":" ".repeat(l))+p:(g?a:a+" ".repeat(l-a.length))+p}}function PU(t,e,n,r){const s=n.enter("paragraph"),a=n.enter("phrasing"),l=n.containerPhrasing(t,r);return a(),s(),l}const BU=gd(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function $U(t,e,n,r){return(t.children.some(function(l){return BU(l)})?n.containerPhrasing:n.containerFlow).call(n,t,r)}function UU(t){const e=t.options.strong||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize strong with `"+e+"` for `options.strong`, expected `*`, or `_`");return e}xC.peek=qU;function xC(t,e,n,r){const s=UU(n),a=n.enter("strong"),l=n.createTracker(r),u=l.move(s+s);let f=l.move(n.containerPhrasing(t,{after:s,before:u,...l.current()}));const d=f.charCodeAt(0),m=$f(r.before.charCodeAt(r.before.length-1),d,s);m.inside&&(f=Kl(d)+f.slice(1));const p=f.charCodeAt(f.length-1),y=$f(r.after.charCodeAt(0),p,s);y.inside&&(f=f.slice(0,-1)+Kl(p));const g=l.move(s+s);return a(),n.attentionEncodeSurroundingInfo={after:y.outside,before:m.outside},u+f+g}function qU(t,e,n){return n.options.strong||"*"}function FU(t,e,n,r){return n.safe(t.value,r)}function VU(t){const e=t.options.ruleRepetition||3;if(e<3)throw new Error("Cannot serialize rules with repetition `"+e+"` for `options.ruleRepetition`, expected `3` or more");return e}function HU(t,e,n){const r=(vC(n)+(n.options.ruleSpaces?" ":"")).repeat(VU(n));return n.options.ruleSpaces?r.slice(0,-1):r}const wC={blockquote:pU,break:Q1,code:vU,definition:wU,emphasis:dC,hardBreak:Q1,heading:CU,html:hC,image:pC,imageReference:mC,inlineCode:gC,link:bC,linkReference:_C,list:jU,listItem:zU,paragraph:PU,root:$U,strong:xC,text:FU,thematicBreak:HU};function GU(){return{enter:{table:KU,tableData:J1,tableHeader:J1,tableRow:QU},exit:{codeText:JU,table:ZU,tableData:Im,tableHeader:Im,tableRow:Im}}}function KU(t){const e=t._align;this.enter({type:"table",align:e.map(function(n){return n==="none"?null:n}),children:[]},t),this.data.inTable=!0}function ZU(t){this.exit(t),this.data.inTable=void 0}function QU(t){this.enter({type:"tableRow",children:[]},t)}function Im(t){this.exit(t)}function J1(t){this.enter({type:"tableCell",children:[]},t)}function JU(t){let e=this.resume();this.data.inTable&&(e=e.replace(/\\([\\|])/g,YU));const n=this.stack[this.stack.length-1];n.type,n.value=e,this.exit(t)}function YU(t,e){return e==="|"?e:t}function XU(t){const e=t||{},n=e.tableCellPadding,r=e.tablePipeAlign,s=e.stringLength,a=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:y,table:l,tableCell:f,tableRow:u}};function l(g,v,x,E){return d(m(g,x,E),g.align)}function u(g,v,x,E){const S=p(g,x,E),T=d([S]);return T.slice(0,T.indexOf(`
`))}function f(g,v,x,E){const S=x.enter("tableCell"),T=x.enter("phrasing"),A=x.containerPhrasing(g,{...E,before:a,after:a});return T(),S(),A}function d(g,v){return dU(g,{align:v,alignDelimiters:r,padding:n,stringLength:s})}function m(g,v,x){const E=g.children;let S=-1;const T=[],A=v.enter("table");for(;++S<E.length;)T[S]=p(E[S],v,x);return A(),T}function p(g,v,x){const E=g.children;let S=-1;const T=[],A=v.enter("tableRow");for(;++S<E.length;)T[S]=f(E[S],g,v,x);return A(),T}function y(g,v,x){let E=wC.inlineCode(g,v,x);return x.stack.includes("tableCell")&&(E=E.replace(/\|/g,"\\$&")),E}}function WU(){return{exit:{taskListCheckValueChecked:Y1,taskListCheckValueUnchecked:Y1,paragraph:tq}}}function eq(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:nq}}}function Y1(t){const e=this.stack[this.stack.length-2];e.type,e.checked=t.type==="taskListCheckValueChecked"}function tq(t){const e=this.stack[this.stack.length-2];if(e&&e.type==="listItem"&&typeof e.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const r=n.children[0];if(r&&r.type==="text"){const s=e.children;let a=-1,l;for(;++a<s.length;){const u=s[a];if(u.type==="paragraph"){l=u;break}}l===n&&(r.value=r.value.slice(1),r.value.length===0?n.children.shift():n.position&&r.position&&typeof r.position.start.offset=="number"&&(r.position.start.column++,r.position.start.offset++,n.position.start=Object.assign({},r.position.start)))}}this.exit(t)}function nq(t,e,n,r){const s=t.children[0],a=typeof t.checked=="boolean"&&s&&s.type==="paragraph",l="["+(t.checked?"x":" ")+"] ",u=n.createTracker(r);a&&u.move(l);let f=wC.listItem(t,e,n,{...r,...u.current()});return a&&(f=f.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,d)),f;function d(m){return m+l}}function rq(){return[j$(),nU(),aU(),GU(),WU()]}function sq(t){return{extensions:[L$(),rU(t),oU(),XU(t),eq()]}}const iq={tokenize:fq,partial:!0},SC={tokenize:dq,partial:!0},kC={tokenize:hq,partial:!0},EC={tokenize:pq,partial:!0},aq={tokenize:mq,partial:!0},CC={name:"wwwAutolink",tokenize:cq,previous:AC},TC={name:"protocolAutolink",tokenize:uq,previous:RC},_s={name:"emailAutolink",tokenize:lq,previous:OC},Kr={};function oq(){return{text:Kr}}let Si=48;for(;Si<123;)Kr[Si]=_s,Si++,Si===58?Si=65:Si===91&&(Si=97);Kr[43]=_s;Kr[45]=_s;Kr[46]=_s;Kr[95]=_s;Kr[72]=[_s,TC];Kr[104]=[_s,TC];Kr[87]=[_s,CC];Kr[119]=[_s,CC];function lq(t,e,n){const r=this;let s,a;return l;function l(p){return!Ug(p)||!OC.call(r,r.previous)||i0(r.events)?n(p):(t.enter("literalAutolink"),t.enter("literalAutolinkEmail"),u(p))}function u(p){return Ug(p)?(t.consume(p),u):p===64?(t.consume(p),f):n(p)}function f(p){return p===46?t.check(aq,m,d)(p):p===45||p===95||vn(p)?(a=!0,t.consume(p),f):m(p)}function d(p){return t.consume(p),s=!0,f}function m(p){return a&&s&&Rn(r.previous)?(t.exit("literalAutolinkEmail"),t.exit("literalAutolink"),e(p)):n(p)}}function cq(t,e,n){const r=this;return s;function s(l){return l!==87&&l!==119||!AC.call(r,r.previous)||i0(r.events)?n(l):(t.enter("literalAutolink"),t.enter("literalAutolinkWww"),t.check(iq,t.attempt(SC,t.attempt(kC,a),n),n)(l))}function a(l){return t.exit("literalAutolinkWww"),t.exit("literalAutolink"),e(l)}}function uq(t,e,n){const r=this;let s="",a=!1;return l;function l(p){return(p===72||p===104)&&RC.call(r,r.previous)&&!i0(r.events)?(t.enter("literalAutolink"),t.enter("literalAutolinkHttp"),s+=String.fromCodePoint(p),t.consume(p),u):n(p)}function u(p){if(Rn(p)&&s.length<5)return s+=String.fromCodePoint(p),t.consume(p),u;if(p===58){const y=s.toLowerCase();if(y==="http"||y==="https")return t.consume(p),f}return n(p)}function f(p){return p===47?(t.consume(p),a?d:(a=!0,f)):n(p)}function d(p){return p===null||zf(p)||gt(p)||Mi(p)||hd(p)?n(p):t.attempt(SC,t.attempt(kC,m),n)(p)}function m(p){return t.exit("literalAutolinkHttp"),t.exit("literalAutolink"),e(p)}}function fq(t,e,n){let r=0;return s;function s(l){return(l===87||l===119)&&r<3?(r++,t.consume(l),s):l===46&&r===3?(t.consume(l),a):n(l)}function a(l){return l===null?n(l):e(l)}}function dq(t,e,n){let r,s,a;return l;function l(d){return d===46||d===95?t.check(EC,f,u)(d):d===null||gt(d)||Mi(d)||d!==45&&hd(d)?f(d):(a=!0,t.consume(d),l)}function u(d){return d===95?r=!0:(s=r,r=void 0),t.consume(d),l}function f(d){return s||r||!a?n(d):e(d)}}function hq(t,e){let n=0,r=0;return s;function s(l){return l===40?(n++,t.consume(l),s):l===41&&r<n?a(l):l===33||l===34||l===38||l===39||l===41||l===42||l===44||l===46||l===58||l===59||l===60||l===63||l===93||l===95||l===126?t.check(EC,e,a)(l):l===null||gt(l)||Mi(l)?e(l):(t.consume(l),s)}function a(l){return l===41&&r++,t.consume(l),s}}function pq(t,e,n){return r;function r(u){return u===33||u===34||u===39||u===41||u===42||u===44||u===46||u===58||u===59||u===63||u===95||u===126?(t.consume(u),r):u===38?(t.consume(u),a):u===93?(t.consume(u),s):u===60||u===null||gt(u)||Mi(u)?e(u):n(u)}function s(u){return u===null||u===40||u===91||gt(u)||Mi(u)?e(u):r(u)}function a(u){return Rn(u)?l(u):n(u)}function l(u){return u===59?(t.consume(u),r):Rn(u)?(t.consume(u),l):n(u)}}function mq(t,e,n){return r;function r(a){return t.consume(a),s}function s(a){return vn(a)?n(a):e(a)}}function AC(t){return t===null||t===40||t===42||t===95||t===91||t===93||t===126||gt(t)}function RC(t){return!Rn(t)}function OC(t){return!(t===47||Ug(t))}function Ug(t){return t===43||t===45||t===46||t===95||vn(t)}function i0(t){let e=t.length,n=!1;for(;e--;){const r=t[e][1];if((r.type==="labelLink"||r.type==="labelImage")&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return t.length>0&&!n&&(t[t.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const gq={tokenize:kq,partial:!0};function yq(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:xq,continuation:{tokenize:wq},exit:Sq}},text:{91:{name:"gfmFootnoteCall",tokenize:vq},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:bq,resolveTo:_q}}}}function bq(t,e,n){const r=this;let s=r.events.length;const a=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let l;for(;s--;){const f=r.events[s][1];if(f.type==="labelImage"){l=f;break}if(f.type==="gfmFootnoteCall"||f.type==="labelLink"||f.type==="label"||f.type==="image"||f.type==="link")break}return u;function u(f){if(!l||!l._balanced)return n(f);const d=Or(r.sliceSerialize({start:l.end,end:r.now()}));return d.codePointAt(0)!==94||!a.includes(d.slice(1))?n(f):(t.enter("gfmFootnoteCallLabelMarker"),t.consume(f),t.exit("gfmFootnoteCallLabelMarker"),e(f))}}function _q(t,e){let n=t.length;for(;n--;)if(t[n][1].type==="labelImage"&&t[n][0]==="enter"){t[n][1];break}t[n+1][1].type="data",t[n+3][1].type="gfmFootnoteCallLabelMarker";const r={type:"gfmFootnoteCall",start:Object.assign({},t[n+3][1].start),end:Object.assign({},t[t.length-1][1].end)},s={type:"gfmFootnoteCallMarker",start:Object.assign({},t[n+3][1].end),end:Object.assign({},t[n+3][1].end)};s.end.column++,s.end.offset++,s.end._bufferIndex++;const a={type:"gfmFootnoteCallString",start:Object.assign({},s.end),end:Object.assign({},t[t.length-1][1].start)},l={type:"chunkString",contentType:"string",start:Object.assign({},a.start),end:Object.assign({},a.end)},u=[t[n+1],t[n+2],["enter",r,e],t[n+3],t[n+4],["enter",s,e],["exit",s,e],["enter",a,e],["enter",l,e],["exit",l,e],["exit",a,e],t[t.length-2],t[t.length-1],["exit",r,e]];return t.splice(n,t.length-n+1,...u),t}function vq(t,e,n){const r=this,s=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let a=0,l;return u;function u(p){return t.enter("gfmFootnoteCall"),t.enter("gfmFootnoteCallLabelMarker"),t.consume(p),t.exit("gfmFootnoteCallLabelMarker"),f}function f(p){return p!==94?n(p):(t.enter("gfmFootnoteCallMarker"),t.consume(p),t.exit("gfmFootnoteCallMarker"),t.enter("gfmFootnoteCallString"),t.enter("chunkString").contentType="string",d)}function d(p){if(a>999||p===93&&!l||p===null||p===91||gt(p))return n(p);if(p===93){t.exit("chunkString");const y=t.exit("gfmFootnoteCallString");return s.includes(Or(r.sliceSerialize(y)))?(t.enter("gfmFootnoteCallLabelMarker"),t.consume(p),t.exit("gfmFootnoteCallLabelMarker"),t.exit("gfmFootnoteCall"),e):n(p)}return gt(p)||(l=!0),a++,t.consume(p),p===92?m:d}function m(p){return p===91||p===92||p===93?(t.consume(p),a++,d):d(p)}}function xq(t,e,n){const r=this,s=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let a,l=0,u;return f;function f(v){return t.enter("gfmFootnoteDefinition")._container=!0,t.enter("gfmFootnoteDefinitionLabel"),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(v),t.exit("gfmFootnoteDefinitionLabelMarker"),d}function d(v){return v===94?(t.enter("gfmFootnoteDefinitionMarker"),t.consume(v),t.exit("gfmFootnoteDefinitionMarker"),t.enter("gfmFootnoteDefinitionLabelString"),t.enter("chunkString").contentType="string",m):n(v)}function m(v){if(l>999||v===93&&!u||v===null||v===91||gt(v))return n(v);if(v===93){t.exit("chunkString");const x=t.exit("gfmFootnoteDefinitionLabelString");return a=Or(r.sliceSerialize(x)),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(v),t.exit("gfmFootnoteDefinitionLabelMarker"),t.exit("gfmFootnoteDefinitionLabel"),y}return gt(v)||(u=!0),l++,t.consume(v),v===92?p:m}function p(v){return v===91||v===92||v===93?(t.consume(v),l++,m):m(v)}function y(v){return v===58?(t.enter("definitionMarker"),t.consume(v),t.exit("definitionMarker"),s.includes(a)||s.push(a),We(t,g,"gfmFootnoteDefinitionWhitespace")):n(v)}function g(v){return e(v)}}function wq(t,e,n){return t.check(ic,e,t.attempt(gq,e,n))}function Sq(t){t.exit("gfmFootnoteDefinition")}function kq(t,e,n){const r=this;return We(t,s,"gfmFootnoteDefinitionIndent",5);function s(a){const l=r.events[r.events.length-1];return l&&l[1].type==="gfmFootnoteDefinitionIndent"&&l[2].sliceSerialize(l[1],!0).length===4?e(a):n(a)}}function Eq(t){let n=(t||{}).singleTilde;const r={name:"strikethrough",tokenize:a,resolveAll:s};return n==null&&(n=!0),{text:{126:r},insideSpan:{null:[r]},attentionMarkers:{null:[126]}};function s(l,u){let f=-1;for(;++f<l.length;)if(l[f][0]==="enter"&&l[f][1].type==="strikethroughSequenceTemporary"&&l[f][1]._close){let d=f;for(;d--;)if(l[d][0]==="exit"&&l[d][1].type==="strikethroughSequenceTemporary"&&l[d][1]._open&&l[f][1].end.offset-l[f][1].start.offset===l[d][1].end.offset-l[d][1].start.offset){l[f][1].type="strikethroughSequence",l[d][1].type="strikethroughSequence";const m={type:"strikethrough",start:Object.assign({},l[d][1].start),end:Object.assign({},l[f][1].end)},p={type:"strikethroughText",start:Object.assign({},l[d][1].end),end:Object.assign({},l[f][1].start)},y=[["enter",m,u],["enter",l[d][1],u],["exit",l[d][1],u],["enter",p,u]],g=u.parser.constructs.insideSpan.null;g&&tr(y,y.length,0,pd(g,l.slice(d+1,f),u)),tr(y,y.length,0,[["exit",p,u],["enter",l[f][1],u],["exit",l[f][1],u],["exit",m,u]]),tr(l,d-1,f-d+3,y),f=d+y.length-2;break}}for(f=-1;++f<l.length;)l[f][1].type==="strikethroughSequenceTemporary"&&(l[f][1].type="data");return l}function a(l,u,f){const d=this.previous,m=this.events;let p=0;return y;function y(v){return d===126&&m[m.length-1][1].type!=="characterEscape"?f(v):(l.enter("strikethroughSequenceTemporary"),g(v))}function g(v){const x=Ja(d);if(v===126)return p>1?f(v):(l.consume(v),p++,g);if(p<2&&!n)return f(v);const E=l.exit("strikethroughSequenceTemporary"),S=Ja(v);return E._open=!S||S===2&&!!x,E._close=!x||x===2&&!!S,u(v)}}}class Cq{constructor(){this.map=[]}add(e,n,r){Tq(this,e,n,r)}consume(e){if(this.map.sort(function(a,l){return a[0]-l[0]}),this.map.length===0)return;let n=this.map.length;const r=[];for(;n>0;)n-=1,r.push(e.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),e.length=this.map[n][0];r.push(e.slice()),e.length=0;let s=r.pop();for(;s;){for(const a of s)e.push(a);s=r.pop()}this.map.length=0}}function Tq(t,e,n,r){let s=0;if(!(n===0&&r.length===0)){for(;s<t.map.length;){if(t.map[s][0]===e){t.map[s][1]+=n,t.map[s][2].push(...r);return}s+=1}t.map.push([e,n,r])}}function Aq(t,e){let n=!1;const r=[];for(;e<t.length;){const s=t[e];if(n){if(s[0]==="enter")s[1].type==="tableContent"&&r.push(t[e+1][1].type==="tableDelimiterMarker"?"left":"none");else if(s[1].type==="tableContent"){if(t[e-1][1].type==="tableDelimiterMarker"){const a=r.length-1;r[a]=r[a]==="left"?"center":"right"}}else if(s[1].type==="tableDelimiterRow")break}else s[0]==="enter"&&s[1].type==="tableDelimiterRow"&&(n=!0);e+=1}return r}function Rq(){return{flow:{null:{name:"table",tokenize:Oq,resolveAll:Nq}}}}function Oq(t,e,n){const r=this;let s=0,a=0,l;return u;function u(z){let Q=r.events.length-1;for(;Q>-1;){const X=r.events[Q][1].type;if(X==="lineEnding"||X==="linePrefix")Q--;else break}const re=Q>-1?r.events[Q][1].type:null,pe=re==="tableHead"||re==="tableRow"?I:f;return pe===I&&r.parser.lazy[r.now().line]?n(z):pe(z)}function f(z){return t.enter("tableHead"),t.enter("tableRow"),d(z)}function d(z){return z===124||(l=!0,a+=1),m(z)}function m(z){return z===null?n(z):Oe(z)?a>1?(a=0,r.interrupt=!0,t.exit("tableRow"),t.enter("lineEnding"),t.consume(z),t.exit("lineEnding"),g):n(z):Ge(z)?We(t,m,"whitespace")(z):(a+=1,l&&(l=!1,s+=1),z===124?(t.enter("tableCellDivider"),t.consume(z),t.exit("tableCellDivider"),l=!0,m):(t.enter("data"),p(z)))}function p(z){return z===null||z===124||gt(z)?(t.exit("data"),m(z)):(t.consume(z),z===92?y:p)}function y(z){return z===92||z===124?(t.consume(z),p):p(z)}function g(z){return r.interrupt=!1,r.parser.lazy[r.now().line]?n(z):(t.enter("tableDelimiterRow"),l=!1,Ge(z)?We(t,v,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(z):v(z))}function v(z){return z===45||z===58?E(z):z===124?(l=!0,t.enter("tableCellDivider"),t.consume(z),t.exit("tableCellDivider"),x):D(z)}function x(z){return Ge(z)?We(t,E,"whitespace")(z):E(z)}function E(z){return z===58?(a+=1,l=!0,t.enter("tableDelimiterMarker"),t.consume(z),t.exit("tableDelimiterMarker"),S):z===45?(a+=1,S(z)):z===null||Oe(z)?j(z):D(z)}function S(z){return z===45?(t.enter("tableDelimiterFiller"),T(z)):D(z)}function T(z){return z===45?(t.consume(z),T):z===58?(l=!0,t.exit("tableDelimiterFiller"),t.enter("tableDelimiterMarker"),t.consume(z),t.exit("tableDelimiterMarker"),A):(t.exit("tableDelimiterFiller"),A(z))}function A(z){return Ge(z)?We(t,j,"whitespace")(z):j(z)}function j(z){return z===124?v(z):z===null||Oe(z)?!l||s!==a?D(z):(t.exit("tableDelimiterRow"),t.exit("tableHead"),e(z)):D(z)}function D(z){return n(z)}function I(z){return t.enter("tableRow"),P(z)}function P(z){return z===124?(t.enter("tableCellDivider"),t.consume(z),t.exit("tableCellDivider"),P):z===null||Oe(z)?(t.exit("tableRow"),e(z)):Ge(z)?We(t,P,"whitespace")(z):(t.enter("data"),q(z))}function q(z){return z===null||z===124||gt(z)?(t.exit("data"),P(z)):(t.consume(z),z===92?H:q)}function H(z){return z===92||z===124?(t.consume(z),q):q(z)}}function Nq(t,e){let n=-1,r=!0,s=0,a=[0,0,0,0],l=[0,0,0,0],u=!1,f=0,d,m,p;const y=new Cq;for(;++n<t.length;){const g=t[n],v=g[1];g[0]==="enter"?v.type==="tableHead"?(u=!1,f!==0&&(X1(y,e,f,d,m),m=void 0,f=0),d={type:"table",start:Object.assign({},v.start),end:Object.assign({},v.end)},y.add(n,0,[["enter",d,e]])):v.type==="tableRow"||v.type==="tableDelimiterRow"?(r=!0,p=void 0,a=[0,0,0,0],l=[0,n+1,0,0],u&&(u=!1,m={type:"tableBody",start:Object.assign({},v.start),end:Object.assign({},v.end)},y.add(n,0,[["enter",m,e]])),s=v.type==="tableDelimiterRow"?2:m?3:1):s&&(v.type==="data"||v.type==="tableDelimiterMarker"||v.type==="tableDelimiterFiller")?(r=!1,l[2]===0&&(a[1]!==0&&(l[0]=l[1],p=Lu(y,e,a,s,void 0,p),a=[0,0,0,0]),l[2]=n)):v.type==="tableCellDivider"&&(r?r=!1:(a[1]!==0&&(l[0]=l[1],p=Lu(y,e,a,s,void 0,p)),a=l,l=[a[1],n,0,0])):v.type==="tableHead"?(u=!0,f=n):v.type==="tableRow"||v.type==="tableDelimiterRow"?(f=n,a[1]!==0?(l[0]=l[1],p=Lu(y,e,a,s,n,p)):l[1]!==0&&(p=Lu(y,e,l,s,n,p)),s=0):s&&(v.type==="data"||v.type==="tableDelimiterMarker"||v.type==="tableDelimiterFiller")&&(l[3]=n)}for(f!==0&&X1(y,e,f,d,m),y.consume(e.events),n=-1;++n<e.events.length;){const g=e.events[n];g[0]==="enter"&&g[1].type==="table"&&(g[1]._align=Aq(e.events,n))}return t}function Lu(t,e,n,r,s,a){const l=r===1?"tableHeader":r===2?"tableDelimiter":"tableData",u="tableContent";n[0]!==0&&(a.end=Object.assign({},Na(e.events,n[0])),t.add(n[0],0,[["exit",a,e]]));const f=Na(e.events,n[1]);if(a={type:l,start:Object.assign({},f),end:Object.assign({},f)},t.add(n[1],0,[["enter",a,e]]),n[2]!==0){const d=Na(e.events,n[2]),m=Na(e.events,n[3]),p={type:u,start:Object.assign({},d),end:Object.assign({},m)};if(t.add(n[2],0,[["enter",p,e]]),r!==2){const y=e.events[n[2]],g=e.events[n[3]];if(y[1].end=Object.assign({},g[1].end),y[1].type="chunkText",y[1].contentType="text",n[3]>n[2]+1){const v=n[2]+1,x=n[3]-n[2]-1;t.add(v,x,[])}}t.add(n[3]+1,0,[["exit",p,e]])}return s!==void 0&&(a.end=Object.assign({},Na(e.events,s)),t.add(s,0,[["exit",a,e]]),a=void 0),a}function X1(t,e,n,r,s){const a=[],l=Na(e.events,n);s&&(s.end=Object.assign({},l),a.push(["exit",s,e])),r.end=Object.assign({},l),a.push(["exit",r,e]),t.add(n+1,0,a)}function Na(t,e){const n=t[e],r=n[0]==="enter"?"start":"end";return n[1][r]}const Iq={name:"tasklistCheck",tokenize:Dq};function Mq(){return{text:{91:Iq}}}function Dq(t,e,n){const r=this;return s;function s(f){return r.previous!==null||!r._gfmTasklistFirstContentOfListItem?n(f):(t.enter("taskListCheck"),t.enter("taskListCheckMarker"),t.consume(f),t.exit("taskListCheckMarker"),a)}function a(f){return gt(f)?(t.enter("taskListCheckValueUnchecked"),t.consume(f),t.exit("taskListCheckValueUnchecked"),l):f===88||f===120?(t.enter("taskListCheckValueChecked"),t.consume(f),t.exit("taskListCheckValueChecked"),l):n(f)}function l(f){return f===93?(t.enter("taskListCheckMarker"),t.consume(f),t.exit("taskListCheckMarker"),t.exit("taskListCheck"),u):n(f)}function u(f){return Oe(f)?e(f):Ge(f)?t.check({tokenize:jq},e,n)(f):n(f)}}function jq(t,e,n){return We(t,r,"whitespace");function r(s){return s===null?n(s):e(s)}}function Lq(t){return $E([oq(),yq(),Eq(t),Rq(),Mq()])}const zq={};function Pq(t){const e=this,n=t||zq,r=e.data(),s=r.micromarkExtensions||(r.micromarkExtensions=[]),a=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),l=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);s.push(Lq(n)),a.push(rq()),l.push(sq(n))}function Bq(t){oC(t,[/\r?\n|\r/g,$q])}function $q(){return{type:"break"}}function Uq(){return function(t){Bq(t)}}const qq={pre:({children:t})=>w.jsx(w.Fragment,{children:t}),li:({children:t,...e})=>w.jsx("li",{className:"py-0.5 ml-0",...e,children:t}),ul:({children:t,...e})=>w.jsx("ul",{className:"list-disc list-outside ml-5 pl-0 my-2",...e,children:t}),ol:({children:t,...e})=>w.jsx("ol",{className:"list-decimal list-outside ml-5 pl-0 my-2",...e,children:t}),strong:({children:t,...e})=>w.jsx("span",{className:"font-semibold",...e,children:t}),a:({children:t,href:e,...n})=>{let r=e||"";return r&&!r.startsWith("http")&&!r.startsWith("#")&&(r=`https://${r}`),w.jsx("a",{className:"text-sky-400 hover:underline",href:r,target:"_blank",rel:"noreferrer noopener",...n,children:t})},h1:({children:t,...e})=>w.jsx("h1",{className:"text-xl font-semibold mt-4 mb-2",...e,children:t}),h2:({children:t,...e})=>w.jsx("h2",{className:"text-lg font-semibold mt-4 mb-2",...e,children:t}),h3:({children:t,...e})=>w.jsx("h3",{className:"text-base font-semibold mt-3 mb-1",...e,children:t}),h4:({children:t,...e})=>w.jsx("h4",{className:"text-sm font-semibold mt-3 mb-1",...e,children:t}),h5:({children:t,...e})=>w.jsx("h5",{className:"text-sm font-semibold mt-2 mb-1",...e,children:t}),h6:({children:t,...e})=>w.jsx("h6",{className:"text-xs font-semibold mt-2 mb-1",...e,children:t}),p:({children:t,...e})=>w.jsx("p",{className:"my-2 leading-relaxed",...e,children:t}),table:({children:t,...e})=>w.jsx("div",{className:"overflow-x-auto my-3",children:w.jsx("table",{className:"w-full border-collapse border border-neutral-600 text-xs",...e,children:t})}),thead:({children:t,...e})=>w.jsx("thead",{className:"bg-neutral-700",...e,children:t}),tbody:({children:t,...e})=>w.jsx("tbody",{...e,children:t}),tr:({children:t,...e})=>w.jsx("tr",{className:"border-b border-neutral-600",...e,children:t}),th:({children:t,...e})=>w.jsx("th",{className:"p-2 text-left font-semibold border-r last:border-r-0 border-neutral-600",...e,children:t}),td:({children:t,...e})=>w.jsx("td",{className:"p-2 border-r last:border-r-0 border-neutral-600",...e,children:t}),blockquote:({children:t,...e})=>w.jsx("blockquote",{className:"border-l-4 border-neutral-500 pl-3 py-1 my-2 italic text-neutral-300",...e,children:t}),hr:({...t})=>w.jsx("hr",{className:"my-4 border-neutral-600",...t}),code({children:t,className:e,...n}){const r=/language-(\w+)/.exec(e||""),s=String(t).replace(/\n$/,""),a=s.includes(`
`);if(!r&&!a)return w.jsx("code",{...n,className:`${e||""} bg-neutral-700 px-1.5 py-0.5 rounded text-xs font-mono text-sky-300`,children:t});const l=r?.[1]||"text";return w.jsxs("div",{className:"my-3",children:[w.jsx("div",{className:"flex items-center justify-between bg-neutral-700 px-3 py-1 rounded-t text-xs text-neutral-400",children:w.jsx("span",{children:l})}),w.jsx("pre",{className:"bg-neutral-800 p-3 rounded-b overflow-x-auto",children:w.jsx("code",{className:"text-xs font-mono text-neutral-200",children:s})})]})}},Fq=[Pq,Uq],Vq=t=>{const e=qe.c(6),{children:n}=t;if(!n)return null;let r=n,s;if(e[0]!==r){r=r.replace(/^(#{1,6}\s+.+)\n```/gm,"$1\n\n```");let l;e[3]===Symbol.for("react.memo_cache_sentinel")?(l=/```\n(#{1,6}\s+)/gm,e[3]=l):l=e[3],s=r.replace(l,"```\n\n$1"),e[0]=r,e[1]=s,e[2]=r}else s=e[1],r=e[2];r=s;let a;return e[4]!==r?(a=w.jsx(C$,{remarkPlugins:Fq,components:qq,children:r}),e[4]=r,e[5]=a):a=e[5],a},NC=K.memo(Vq,(t,e)=>t.children===e.children);function Hq(t,e="image/png"){const n=atob(t),r=new Array(n.length);for(let a=0;a<n.length;a++)r[a]=n.charCodeAt(a);const s=new Uint8Array(r);return new Blob([s],{type:e})}function Gq(){const t=qe.c(11),{request:e}=dn(),n=e?.openai?.response,r=n?.result;let s;e:{if(!r||r.type!=="image"||!r.image){s=null;break e}if(!r.image.startsWith("http")){let u;if(t[0]!==r.image){const f=Hq(r.image,"image/png");u=URL.createObjectURL(f),t[0]=r.image,t[1]=u}else u=t[1];s=u;break e}s=r.image}const a=s;if(!n)return null;if(!r){let u;return t[2]===Symbol.for("react.memo_cache_sentinel")?(u=w.jsx("div",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:"No response data"}),t[2]=u):u=t[2],u}if(r.type==="text"){let u;return t[3]!==r.text?(u=w.jsx("div",{className:"h-full overflow-auto",children:w.jsx("div",{className:"prose prose-sm dark:prose-invert max-w-none prose-pre:bg-neutral-100 dark:prose-pre:bg-neutral-800 prose-pre:text-neutral-800 dark:prose-pre:text-neutral-200 prose-code:text-violet-600 dark:prose-code:text-violet-400 prose-code:before:content-none prose-code:after:content-none",children:w.jsx(NC,{children:r.text})})}),t[3]=r.text,t[4]=u):u=t[4],u}if(r.type==="image"){if(!r.image){let d;return t[5]===Symbol.for("react.memo_cache_sentinel")?(d=w.jsx("div",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:"No image data"}),t[5]=d):d=t[5],d}let u;t[6]!==a?(u=a&&w.jsx("img",{src:a,alt:"Generated image",className:"max-w-full h-auto object-contain rounded-lg shadow-lg"}),t[6]=a,t[7]=u):u=t[7];let f;return t[8]!==u?(f=w.jsx("div",{className:"h-full overflow-auto",children:w.jsx("div",{className:"flex items-center justify-center p-4",children:u})}),t[8]=u,t[9]=f):f=t[9],f}let l;return t[10]===Symbol.for("react.memo_cache_sentinel")?(l=w.jsx("div",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:"Unknown response type"}),t[10]=l):l=t[10],l}function Mm(t){return t<1e3?`${t}ms`:t<6e4?`${(t/1e3).toFixed(2)}s`:`${(t/6e4).toFixed(2)}m`}function Kq(t){return t>=200&&t<300?"text-emerald-600 dark:text-emerald-400":t>=300&&t<400?"text-amber-600 dark:text-amber-400":t>=400&&t<500?"text-orange-600 dark:text-orange-400":t>=500?"text-red-600 dark:text-red-400":"text-neutral-600 dark:text-neutral-400"}function Dm(t){const e=qe.c(16),{statusCode:n,status:r}=t;let s;e[0]!==n?(s=Kq(n),e[0]=n,e[1]=s):s=e[1];const a=s,l=n>=200&&n<300,u=n>=400,f=`flex items-center gap-1.5 px-2 py-1 rounded-md bg-neutral-100 dark:bg-white/5 ${a}`;let d;e[2]!==l?(d=l&&w.jsx(Ry,{size:14}),e[2]=l,e[3]=d):d=e[3];let m;e[4]!==u?(m=u&&w.jsx(QD,{size:14}),e[4]=u,e[5]=m):m=e[5];let p;e[6]!==n?(p=w.jsx("span",{className:"text-xs font-medium",children:n}),e[6]=n,e[7]=p):p=e[7];let y;e[8]!==r?(y=w.jsx("span",{className:"text-xs opacity-75",children:r}),e[8]=r,e[9]=y):y=e[9];let g;return e[10]!==f||e[11]!==d||e[12]!==m||e[13]!==p||e[14]!==y?(g=w.jsxs("div",{className:f,children:[d,m,p,y]}),e[10]=f,e[11]=d,e[12]=m,e[13]=p,e[14]=y,e[15]=g):g=e[15],g}function Zq(){const t=qe.c(43),{request:e}=dn(),[n,r]=K.useState("pretty"),[s,a]=K.useState(!1),l=e?.executing??!1,u=e?.protocol??"rest",f=e?.http?.response,d=e?.grpc?.response,m=e?.mcp?.response,p=e?.mcp?.response?.error,y=e?.openai?.response,g=e?.openai?.response?.error;let v,x,E,S;if(t[0]!==d||t[1]!==f||t[2]!==l||t[3]!==p||t[4]!==m||t[5]!==g||t[6]!==y||t[7]!==u||t[8]!==n){S=Symbol.for("react.early_return_sentinel");e:{x=f??(d?{status:d.error||"OK",statusCode:d.error?0:200,headers:d.metadata??{},body:new Blob([d.body],{type:"application/json"}),duration:d.duration}:void 0);const re=x?.error??p??g;if(l){let X;t[13]===Symbol.for("react.memo_cache_sentinel")?(X=w.jsxs("div",{className:"flex flex-col items-center justify-center h-full min-h-50",children:[w.jsxs("div",{className:"relative mb-4",children:[w.jsx("div",{className:"w-12 h-12 rounded-full border-2 border-zinc-100 dark:border-zinc-800"}),w.jsx("div",{className:"absolute inset-0 w-12 h-12 rounded-full border-2 border-zinc-400 border-t-transparent animate-spin"})]}),w.jsx("span",{className:"text-xs font-medium text-zinc-400 uppercase tracking-widest animate-pulse",children:"Sending Request"})]}),t[13]=X):X=t[13],S=X;break e}if(re){let X,V;t[14]===Symbol.for("react.memo_cache_sentinel")?(X=w.jsx(Dk,{className:"w-5 h-5 text-rose-500 dark:text-rose-400"}),V=w.jsx("h3",{className:"font-semibold text-rose-500 dark:text-rose-400",children:"Error"}),t[14]=X,t[15]=V):(X=t[14],V=t[15]);const $=w.jsxs("div",{children:[V,w.jsx("p",{className:"text-sm text-neutral-600 dark:text-neutral-300 mt-1",children:re})]});let G;t[16]!==$?(G=w.jsx("div",{className:"bg-rose-500/10 border border-rose-500/20 rounded-xl p-4",children:w.jsxs("div",{className:"flex items-center gap-3",children:[X,$]})}),t[16]=$,t[17]=G):G=t[17],S=G;break e}if(!x&&!m&&!y){let X;t[18]===Symbol.for("react.memo_cache_sentinel")?(X=w.jsxs("div",{className:"h-full flex flex-col items-center justify-center",children:[w.jsx(S3,{className:"w-12 h-12 text-neutral-300 dark:text-neutral-600 mb-4"}),w.jsx("p",{className:"text-sm text-neutral-400 dark:text-neutral-500",children:"Hit Send to see what happens"})]}),t[18]=X):X=t[18],S=X;break e}v=()=>{t:switch(u){case"openai":{if(y)return w.jsx(Gq,{});break t}case"mcp":{if(m?.result){const X="content"in m.result;return w.jsx(kP,{toolResponse:X?m.result:void 0,resourceResponse:X?void 0:m.result,viewMode:n})}break t}case"grpc":{if(x)return w.jsx(hP,{response:x,viewMode:n});break t}default:if(x)return w.jsx(cP,{response:x,viewMode:n})}return null};const pe=x?.headers?.["content-type"]?.toLowerCase()||"";E=pe.includes("image/")||pe.includes("video/")||pe.includes("audio/")||pe.includes("application/pdf")||pe.includes("application/octet-stream")}t[0]=d,t[1]=f,t[2]=l,t[3]=p,t[4]=m,t[5]=g,t[6]=y,t[7]=u,t[8]=n,t[9]=v,t[10]=x,t[11]=E,t[12]=S}else v=t[9],x=t[10],E=t[11],S=t[12];if(S!==Symbol.for("react.early_return_sentinel"))return S;const A=!E&&u!=="openai",j=u!=="mcp"&&u!=="openai"&&x;let D;t[19]!==m||t[20]!==y||t[21]!==u||t[22]!==x||t[23]!==s||t[24]!==j||t[25]!==A||t[26]!==n?(D=(x||m||y)&&w.jsxs("div",{className:"flex items-center gap-3 mb-3 shrink-0",children:[x&&w.jsxs(w.Fragment,{children:[w.jsx(Dm,{statusCode:x.statusCode,status:x.status}),w.jsxs("div",{className:"flex items-center gap-1 text-xs text-neutral-500 dark:text-neutral-400",children:[w.jsx(El,{size:12}),w.jsx("span",{children:Mm(x.duration)})]}),x.body&&w.jsxs("div",{className:"text-xs text-neutral-400 dark:text-neutral-500",children:[(x.body.size/1024).toFixed(2)," KB"]})]}),m&&!x&&w.jsxs(w.Fragment,{children:[w.jsx(Dm,{statusCode:200,status:"OK"}),w.jsxs("div",{className:"flex items-center gap-1 text-xs text-neutral-500 dark:text-neutral-400",children:[w.jsx(El,{size:12}),w.jsx("span",{children:Mm(m.duration)})]})]}),y&&!x&&!m&&w.jsxs(w.Fragment,{children:[w.jsx(Dm,{statusCode:200,status:"OK"}),w.jsxs("div",{className:"flex items-center gap-1 text-xs text-neutral-500 dark:text-neutral-400",children:[w.jsx(El,{size:12}),w.jsx("span",{children:Mm(y.duration)})]})]}),w.jsx("div",{className:"flex-1"}),A&&w.jsxs("div",{className:"flex items-center gap-0.5 text-xs",children:[w.jsx("button",{onClick:()=>r("pretty"),className:`px-2 py-0.5 rounded transition-colors ${n==="pretty"?"text-neutral-700 dark:text-neutral-200 font-medium":"text-neutral-400 dark:text-neutral-500 hover:text-neutral-600 dark:hover:text-neutral-300"}`,children:"Pretty"}),w.jsx("span",{className:"text-neutral-300 dark:text-neutral-600",children:"|"}),w.jsx("button",{onClick:()=>r("raw"),className:`px-2 py-0.5 rounded transition-colors ${n==="raw"?"text-neutral-700 dark:text-neutral-200 font-medium":"text-neutral-400 dark:text-neutral-500 hover:text-neutral-600 dark:hover:text-neutral-300"}`,children:"Raw"})]}),j&&w.jsxs("button",{onClick:()=>a(!s),className:`px-2 py-0.5 text-xs rounded transition-colors ${s?"text-neutral-700 dark:text-neutral-200 font-medium":"text-neutral-400 dark:text-neutral-500 hover:text-neutral-600 dark:hover:text-neutral-300"}`,children:[u==="grpc"?"Metadata":"Headers"," (",Object.keys(x.headers).length,")"]})]}),t[19]=m,t[20]=y,t[21]=u,t[22]=x,t[23]=s,t[24]=j,t[25]=A,t[26]=n,t[27]=D):D=t[27];const I=`min-h-0 overflow-hidden transition-all ${s?"flex-2":"flex-1"}`;let P;t[28]!==v?(P=v(),t[28]=v,t[29]=P):P=t[29];let q;t[30]!==I||t[31]!==P?(q=w.jsx("div",{className:I,children:P}),t[30]=I,t[31]=P,t[32]=q):q=t[32];let H;t[33]!==u||t[34]!==x||t[35]!==s?(H=s&&x&&w.jsxs("div",{className:"flex-1 min-w-75 max-w-125 flex flex-col border-l border-neutral-200 dark:border-white/10 pl-3",children:[w.jsxs("div",{className:"text-xs font-medium text-neutral-600 dark:text-neutral-400 mb-2",children:[u==="grpc"?"Metadata":"Headers"," (",Object.keys(x.headers).length,")"]}),w.jsx("div",{className:"flex-1 overflow-auto",children:w.jsx("div",{className:"space-y-2",children:Object.entries(x.headers).map(Qq)})})]}),t[33]=u,t[34]=x,t[35]=s,t[36]=H):H=t[36];let z;t[37]!==q||t[38]!==H?(z=w.jsxs("div",{className:"flex-1 min-h-0 flex gap-3 overflow-hidden",children:[q,H]}),t[37]=q,t[38]=H,t[39]=z):z=t[39];let Q;return t[40]!==D||t[41]!==z?(Q=w.jsxs("div",{className:"h-full flex flex-col overflow-hidden",children:[D,z]}),t[40]=D,t[41]=z,t[42]=Q):Q=t[42],Q}function Qq(t){const[e,n]=t;return w.jsxs("div",{className:"text-xs",children:[w.jsx("div",{className:"font-mono text-neutral-600 dark:text-neutral-400 mb-0.5",children:e}),w.jsx("div",{className:"font-mono text-neutral-700 dark:text-neutral-200 break-all",children:n})]},e)}function Jq(){const t=qe.c(55),{request:e,newRequest:n,sidebarCollapsed:r,toggleSidebar:s,history:a}=dn(),{setPortalTarget:l}=Nk();if(!e){let pe;return t[0]===Symbol.for("react.memo_cache_sentinel")?(pe=w.jsx("div",{className:"flex-1 flex items-center justify-center text-neutral-400 dark:text-neutral-500",children:"No active request"}),t[0]=pe):pe=t[0],pe}const u=e.protocol??"rest";let f;t[1]!==a||t[2]!==r||t[3]!==s?(f=r&&a.length>0&&w.jsx("button",{type:"button",onClick:s,className:"p-1.5 hover:bg-neutral-100 dark:hover:bg-white/10 rounded-md transition-colors text-neutral-500 dark:text-neutral-400 hover:text-neutral-700 dark:hover:text-neutral-200",title:"Show sidebar",children:w.jsx(h3,{className:"w-4 h-4"})}),t[1]=a,t[2]=r,t[3]=s,t[4]=f):f=t[4];let d;t[5]===Symbol.for("react.memo_cache_sentinel")?(d=w.jsx(Z3,{}),t[5]=d):d=t[5];let m;t[6]!==u?(m=u==="rest"&&w.jsx(tj,{}),t[6]=u,t[7]=m):m=t[7];let p;t[8]!==u?(p=u==="grpc"&&w.jsx(uP,{}),t[8]=u,t[9]=p):p=t[9];let y;t[10]!==u?(y=u==="mcp"&&w.jsx(mP,{}),t[10]=u,t[11]=y):y=t[11];let g;t[12]!==u?(g=u==="openai"&&w.jsx(EP,{}),t[12]=u,t[13]=g):g=t[13];let v;t[14]!==m||t[15]!==p||t[16]!==y||t[17]!==g?(v=w.jsxs("div",{className:"flex-1 flex items-center",children:[m,p,y,g]}),t[14]=m,t[15]=p,t[16]=y,t[17]=g,t[18]=v):v=t[18];let x;t[19]!==l?(x=w.jsx("div",{ref:l,className:"flex items-center gap-1"}),t[19]=l,t[20]=x):x=t[20];let E;t[21]===Symbol.for("react.memo_cache_sentinel")?(E=w.jsx(J3,{}),t[21]=E):E=t[21];let S;t[22]===Symbol.for("react.memo_cache_sentinel")?(S=w.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),t[22]=S):S=t[22];let T;t[23]!==n?(T=w.jsx("button",{onClick:n,className:"p-1.5 hover:bg-neutral-100 dark:hover:bg-white/10 rounded-md transition-colors text-neutral-500 dark:text-neutral-400 hover:text-neutral-700 dark:hover:text-neutral-200",title:"New request",children:S}),t[23]=n,t[24]=T):T=t[24];let A;t[25]!==f||t[26]!==T||t[27]!==v||t[28]!==x?(A=w.jsxs("div",{className:"pl-2 pr-3 py-2 border-b border-neutral-200 dark:border-white/5 flex items-center gap-2 shrink-0",children:[f,d,v,x,E,T]}),t[25]=f,t[26]=T,t[27]=v,t[28]=x,t[29]=A):A=t[29];let j;t[30]!==u?(j=u==="rest"&&w.jsx(Cj,{}),t[30]=u,t[31]=j):j=t[31];let D;t[32]!==u?(D=u==="grpc"&&w.jsx(dP,{}),t[32]=u,t[33]=D):D=t[33];let I;t[34]!==u?(I=u==="mcp"&&w.jsx(yP,{}),t[34]=u,t[35]=I):I=t[35];let P;t[36]!==u?(P=u==="openai"&&w.jsx(RP,{}),t[36]=u,t[37]=P):P=t[37];let q;t[38]!==j||t[39]!==D||t[40]!==I||t[41]!==P?(q=w.jsxs("div",{className:"pl-2 pr-3 py-2 border-b border-neutral-200 dark:border-white/5 overflow-visible shrink-0",children:[j,D,I,P]}),t[38]=j,t[39]=D,t[40]=I,t[41]=P,t[42]=q):q=t[42];let H;t[43]!==e.grpc?.response||t[44]!==e.http?.response||t[45]!==e.mcp?.response||t[46]!==e.openai?.response?(H=(e.http?.response||e.grpc?.response||e.mcp?.response||e.openai?.response)&&w.jsx("h2",{className:"text-[10px] font-medium text-neutral-500 dark:text-neutral-300 uppercase tracking-wider mb-2 shrink-0",children:"Response"}),t[43]=e.grpc?.response,t[44]=e.http?.response,t[45]=e.mcp?.response,t[46]=e.openai?.response,t[47]=H):H=t[47];let z;t[48]===Symbol.for("react.memo_cache_sentinel")?(z=w.jsx("div",{className:"flex-1 min-h-0 overflow-hidden",children:w.jsx(Zq,{})}),t[48]=z):z=t[48];let Q;t[49]!==H?(Q=w.jsxs("div",{className:"flex-1 pl-2 pr-3 py-2 flex flex-col min-h-0 overflow-hidden",children:[H,z]}),t[49]=H,t[50]=Q):Q=t[50];let re;return t[51]!==A||t[52]!==q||t[53]!==Q?(re=w.jsxs("div",{className:"h-full flex flex-col overflow-hidden",children:[A,q,Q]}),t[51]=A,t[52]=q,t[53]=Q,t[54]=re):re=t[54],re}class Yq{#e=!0;#t;#n;#r;#s;#o;#i;#a;#p=0;#m=5;#c=!1;#u=!1;#l=null;#f=()=>{this.debugLog("Connected to event bus"),this.#o=!0,this.#c=!1,this.debugLog("Emitting queued events",this.#s),this.#s.forEach(e=>this.emitEventToBus(e)),this.#s=[],this.stopConnectLoop(),this.#n().removeEventListener("tanstack-connect-success",this.#f)};#d=()=>{if(this.#p<this.#m){this.#p++,this.dispatchCustomEvent("tanstack-connect",{});return}this.#n().removeEventListener("tanstack-connect",this.#d),this.#u=!0,this.debugLog("Max retries reached, giving up on connection"),this.stopConnectLoop()};#h=()=>{this.#c||(this.#c=!0,this.#n().addEventListener("tanstack-connect-success",this.#f),this.#d())};constructor({pluginId:e,debug:n=!1,enabled:r=!0,reconnectEveryMs:s=300}){this.#t=e,this.#e=r,this.#n=this.getGlobalTarget,this.#r=n,this.debugLog(" Initializing event subscription for plugin",this.#t),this.#s=[],this.#o=!1,this.#u=!1,this.#i=null,this.#a=s}startConnectLoop(){this.#i!==null||this.#o||(this.debugLog(`Starting connect loop (every ${this.#a}ms)`),this.#i=setInterval(this.#d,this.#a))}stopConnectLoop(){this.#c=!1,this.#i!==null&&(clearInterval(this.#i),this.#i=null,this.#s=[],this.debugLog("Stopped connect loop"))}debugLog(...e){this.#r&&console.log(` [tanstack-devtools:${this.#t}-plugin]`,...e)}getGlobalTarget(){if(typeof globalThis<"u"&&globalThis.__TANSTACK_EVENT_TARGET__)return this.debugLog("Using global event target"),globalThis.__TANSTACK_EVENT_TARGET__;if(typeof window<"u"&&typeof window.addEventListener<"u")return this.debugLog("Using window as event target"),window;const e=typeof EventTarget<"u"?new EventTarget:void 0;return typeof e>"u"||typeof e.addEventListener>"u"?(this.debugLog("No event mechanism available, running in non-web environment"),{addEventListener:()=>{},removeEventListener:()=>{},dispatchEvent:()=>!1}):(this.debugLog("Using new EventTarget as fallback"),e)}getPluginId(){return this.#t}dispatchCustomEventShim(e,n){try{const r=new Event(e,{detail:n});this.#n().dispatchEvent(r)}catch{this.debugLog("Failed to dispatch shim event")}}dispatchCustomEvent(e,n){try{this.#n().dispatchEvent(new CustomEvent(e,{detail:n}))}catch{this.dispatchCustomEventShim(e,n)}}emitEventToBus(e){this.debugLog("Emitting event to client bus",e),this.dispatchCustomEvent("tanstack-dispatch-event",e)}createEventPayload(e,n){return{type:`${this.#t}:${e}`,payload:n,pluginId:this.#t}}emit(e,n){if(!this.#e){this.debugLog("Event bus client is disabled, not emitting event",e,n);return}if(this.#l&&(this.debugLog("Emitting event to internal event target",e,n),this.#l.dispatchEvent(new CustomEvent(`${this.#t}:${e}`,{detail:this.createEventPayload(e,n)}))),this.#u){this.debugLog("Previously failed to connect, not emitting to bus");return}if(!this.#o){this.debugLog("Bus not available, will be pushed as soon as connected"),this.#s.push(this.createEventPayload(e,n)),typeof CustomEvent<"u"&&!this.#c&&(this.#h(),this.startConnectLoop());return}return this.emitEventToBus(this.createEventPayload(e,n))}on(e,n,r){const s=r?.withEventTarget??!1,a=`${this.#t}:${e}`;if(s&&(this.#l||(this.#l=new EventTarget),this.#l.addEventListener(a,u=>{n(u.detail)})),!this.#e)return this.debugLog("Event bus client is disabled, not registering event",a),()=>{};const l=u=>{this.debugLog("Received event from bus",u.detail),n(u.detail)};return this.#n().addEventListener(a,l),this.debugLog("Registered event to bus",a),()=>{s&&this.#l?.removeEventListener(a,l),this.#n().removeEventListener(a,l)}}onAll(e){if(!this.#e)return this.debugLog("Event bus client is disabled, not registering event"),()=>{};const n=r=>{const s=r.detail;e(s)};return this.#n().addEventListener("tanstack-devtools-global",n),()=>this.#n().removeEventListener("tanstack-devtools-global",n)}onAllPluginEvents(e){if(!this.#e)return this.debugLog("Event bus client is disabled, not registering event"),()=>{};const n=r=>{const s=r.detail;this.#t&&s.pluginId!==this.#t||e(s)};return this.#n().addEventListener("tanstack-devtools-global",n),()=>this.#n().removeEventListener("tanstack-devtools-global",n)}}class Xq extends Yq{constructor(){super({pluginId:"tanstack-ai-devtools"})}}const Dt=new Xq;async function Wq(t){let e="";for await(const n of t)n.type==="content"&&n.delta&&(e+=n.delta);return e}function e9(t){return typeof t=="object"&&t!==null&&"~standard"in t&&typeof t["~standard"]=="object"&&t["~standard"].version===1&&typeof t["~standard"].jsonSchema=="object"&&typeof t["~standard"].jsonSchema.input=="function"}function Ii(t){return typeof t=="object"&&t!==null&&"~standard"in t&&typeof t["~standard"]=="object"&&t!==null&&t["~standard"]!==null&&"version"in t["~standard"]&&t["~standard"].version===1&&"validate"in t["~standard"]&&typeof t["~standard"].validate=="function"}function Nl(t,e=[]){const n={...t};if(n.type==="object"&&n.properties){const r={...n.properties},s=Object.keys(r);for(const a of s){const l=r[a],u=!e.includes(a);l.type==="object"&&l.properties?r[a]=Nl(l,l.required||[]):l.type==="array"&&l.items?r[a]={...l,items:Nl(l.items,l.items.required||[])}:u&&(l.type&&!Array.isArray(l.type)?r[a]={...l,type:[l.type,"null"]}:Array.isArray(l.type)&&!l.type.includes("null")&&(r[a]={...l,type:[...l.type,"null"]}))}n.properties=r,n.required=s,n.additionalProperties=!1}return n.type==="array"&&n.items&&(n.items=Nl(n.items,n.items.required||[])),n}function qg(t,e={}){if(!t)return;const{forStructuredOutput:n=!1}=e;if(e9(t)){let s=t["~standard"].jsonSchema.input({target:"draft-07"});if(typeof s=="object"&&"$schema"in s){const{$schema:a,...l}=s;s=l}return typeof s=="object"&&("properties"in s&&!s.type&&(s.type="object"),s.type==="object"&&!("properties"in s)&&(s.properties={}),s.type==="object"&&!("required"in s)&&(s.required=[]),n&&(s=Nl(s,s.required||[]))),s}return n&&typeof t=="object"?Nl(t,t.required||[]):t}function Va(t,e){if(!Ii(t))return e;const n=t["~standard"].validate(e);if(n instanceof Promise)throw new Error("Schema validation returned a Promise. Use validateWithStandardSchema for async validation.");if(!n.issues)return n.value;const r=n.issues.map(s=>s.message||"Validation failed").join(", ");throw new Error(`Validation failed: ${r}`)}class t9{constructor(e){this.toolCallsMap=new Map,this.tools=e}addToolCallChunk(e){const n=e.index,r=this.toolCallsMap.get(n);r?(e.toolCall.function.name&&!r.function.name&&(r.function.name=e.toolCall.function.name),e.toolCall.function.arguments&&(r.function.arguments+=e.toolCall.function.arguments)):e.toolCall.id&&e.toolCall.function.name&&this.toolCallsMap.set(n,{id:e.toolCall.id,type:"function",function:{name:e.toolCall.function.name,arguments:e.toolCall.function.arguments||""}})}hasToolCalls(){return this.getToolCalls().length>0}getToolCalls(){return Array.from(this.toolCallsMap.values()).filter(e=>e.id&&e.function.name&&e.function.name.trim().length>0)}async*executeTools(e){const n=this.getToolCalls(),r=[];for(const s of n){const a=this.tools.find(u=>u.name===s.function.name);let l;if(a?.execute)try{let u;try{u=JSON.parse(s.function.arguments)}catch{throw new Error(`Failed to parse tool arguments as JSON: ${s.function.arguments}`)}if(a.inputSchema&&Ii(a.inputSchema))try{u=Va(a.inputSchema,u)}catch(d){const m=d instanceof Error?d.message:"Validation failed";throw new Error(`Input validation failed for tool ${a.name}: ${m}`)}let f=await a.execute(u);if(a.outputSchema&&Ii(a.outputSchema)&&f!==void 0&&f!==null)try{f=Va(a.outputSchema,f)}catch(d){const m=d instanceof Error?d.message:"Validation failed";throw new Error(`Output validation failed for tool ${a.name}: ${m}`)}l=typeof f=="string"?f:JSON.stringify(f)}catch(u){l=`Error executing tool: ${u instanceof Error?u.message:"Unknown error"}`}else l=`Tool ${s.function.name} does not have an execute function`;yield{type:"tool_result",id:e.id,model:e.model,timestamp:Date.now(),toolCallId:s.id,content:l},r.push({role:"tool",content:l,toolCallId:s.id})}return r}clear(){this.toolCallsMap.clear()}}async function W1(t,e,n=new Map,r=new Map){const s=[],a=[],l=[],u=new Map;for(const f of e)u.set(f.name,f);for(const f of t){const d=u.get(f.function.name),m=f.function.name;if(!d){s.push({toolCallId:f.id,toolName:m,result:{error:`Unknown tool: ${m}`},state:"output-error"});continue}let p={};const y=f.function.arguments.trim()||"{}";try{p=JSON.parse(y)}catch{throw new Error(`Failed to parse tool arguments as JSON: ${y}`)}if(d.inputSchema&&Ii(d.inputSchema))try{p=Va(d.inputSchema,p)}catch(v){const x=v instanceof Error?v.message:"Validation failed";s.push({toolCallId:f.id,toolName:m,result:{error:`Input validation failed for tool ${d.name}: ${x}`},state:"output-error"});continue}if(!d.execute){if(d.needsApproval){const v=`approval_${f.id}`;n.has(v)?n.get(v)?r.has(f.id)?s.push({toolCallId:f.id,toolName:m,result:r.get(f.id)}):l.push({toolCallId:f.id,toolName:m,input:p}):s.push({toolCallId:f.id,toolName:m,result:{error:"User declined tool execution"},state:"output-error"}):a.push({toolCallId:f.id,toolName:f.function.name,input:p,approvalId:v})}else r.has(f.id)?s.push({toolCallId:f.id,toolName:m,result:r.get(f.id)}):l.push({toolCallId:f.id,toolName:m,input:p});continue}if(d.needsApproval){const v=`approval_${f.id}`;if(n.has(v))if(n.get(v)){const E=Date.now();try{let S=await d.execute(p);const T=Date.now()-E;d.outputSchema&&Ii(d.outputSchema)&&S!==void 0&&S!==null&&(S=Va(d.outputSchema,S)),s.push({toolCallId:f.id,toolName:m,result:typeof S=="string"?JSON.parse(S):S||null,duration:T})}catch(S){const T=Date.now()-E,A=S instanceof Error?S.message:"Unknown error";s.push({toolCallId:f.id,toolName:m,result:{error:A},state:"output-error",duration:T})}}else s.push({toolCallId:f.id,toolName:m,result:{error:"User declined tool execution"},state:"output-error"});else a.push({toolCallId:f.id,toolName:m,input:p,approvalId:v});continue}const g=Date.now();try{let v=await d.execute(p);const x=Date.now()-g;d.outputSchema&&Ii(d.outputSchema)&&v!==void 0&&v!==null&&(v=Va(d.outputSchema,v)),s.push({toolCallId:f.id,toolName:m,result:typeof v=="string"?JSON.parse(v):v||null,duration:x})}catch(v){const x=Date.now()-g,E=v instanceof Error?v.message:"Unknown error";s.push({toolCallId:f.id,toolName:m,result:{error:E},state:"output-error",duration:x})}}return{results:s,needsApproval:a,needsClientExecution:l}}function IC(t){return({iterationCount:e})=>e<t}class MC{constructor(e){this.iterationCount=0,this.lastFinishReason=null,this.streamStartTime=0,this.totalChunkCount=0,this.currentMessageId=null,this.accumulatedContent="",this.doneChunk=null,this.shouldEmitStreamEnd=!0,this.earlyTermination=!1,this.toolPhase="continue",this.cyclePhase="processText",this.adapter=e.adapter,this.params=e.params,this.systemPrompts=e.params.systemPrompts||[],this.tools=e.params.tools||[],this.loopStrategy=e.params.agentLoopStrategy||IC(5),this.toolCallManager=new t9(this.tools),this.initialMessageCount=e.params.messages.length,this.messages=e.params.messages,this.requestId=this.createId("chat"),this.streamId=this.createId("stream"),this.effectiveRequest=e.params.abortController?{signal:e.params.abortController.signal}:void 0,this.effectiveSignal=e.params.abortController?.signal}getAccumulatedContent(){return this.accumulatedContent}getMessages(){return this.messages}async*run(){this.beforeRun();try{if((yield*this.checkForPendingToolCalls())==="wait")return;do{if(this.earlyTermination||this.isAborted())return;this.beginCycle(),this.cyclePhase==="processText"?yield*this.streamModelResponse():yield*this.processToolCalls(),this.endCycle()}while(this.shouldContinue())}finally{this.afterRun()}}beforeRun(){this.streamStartTime=Date.now();const{model:e,tools:n,temperature:r,topP:s,maxTokens:a,metadata:l,modelOptions:u,conversationId:f}=this.params,d={};r!==void 0&&(d.temperature=r),s!==void 0&&(d.topP=s),a!==void 0&&(d.maxTokens=a),l!==void 0&&(d.metadata=l),Dt.emit("text:started",{requestId:this.requestId,streamId:this.streamId,model:e,provider:this.adapter.name,messageCount:this.initialMessageCount,hasTools:!!n&&n.length>0,streaming:!0,timestamp:Date.now(),clientId:f,toolNames:n?.map(m=>m.name),options:Object.keys(d).length>0?d:void 0,modelOptions:u}),Dt.emit("stream:started",{streamId:this.streamId,model:e,provider:this.adapter.name,timestamp:Date.now()})}afterRun(){if(!this.shouldEmitStreamEnd)return;const e=Date.now();Dt.emit("text:completed",{requestId:this.requestId,streamId:this.streamId,model:this.params.model,content:this.accumulatedContent,messageId:this.currentMessageId||void 0,finishReason:this.lastFinishReason||void 0,usage:this.doneChunk?.usage,timestamp:e}),Dt.emit("stream:ended",{requestId:this.requestId,streamId:this.streamId,totalChunks:this.totalChunkCount,duration:e-this.streamStartTime,timestamp:e})}beginCycle(){this.cyclePhase==="processText"&&this.beginIteration()}endCycle(){if(this.cyclePhase==="processText"){this.cyclePhase="executeToolCalls";return}this.cyclePhase="processText",this.iterationCount++}beginIteration(){this.currentMessageId=this.createId("msg"),this.accumulatedContent="",this.doneChunk=null}async*streamModelResponse(){const{temperature:e,topP:n,maxTokens:r,metadata:s,modelOptions:a}=this.params,u=this.params.tools?.map(f=>({...f,inputSchema:f.inputSchema?qg(f.inputSchema):void 0,outputSchema:f.outputSchema?qg(f.outputSchema):void 0}));for await(const f of this.adapter.chatStream({model:this.params.model,messages:this.messages,tools:u,temperature:e,topP:n,maxTokens:r,metadata:s,request:this.effectiveRequest,modelOptions:a,systemPrompts:this.systemPrompts}))if(this.isAborted()||(this.totalChunkCount++,yield f,this.handleStreamChunk(f),this.earlyTermination))break}handleStreamChunk(e){switch(e.type){case"content":this.handleContentChunk(e);break;case"tool_call":this.handleToolCallChunk(e);break;case"tool_result":this.handleToolResultChunk(e);break;case"done":this.handleDoneChunk(e);break;case"error":this.handleErrorChunk(e);break;case"thinking":this.handleThinkingChunk(e);break}}handleContentChunk(e){this.accumulatedContent=e.content,Dt.emit("stream:chunk:content",{streamId:this.streamId,messageId:this.currentMessageId||void 0,content:e.content,delta:e.delta,timestamp:Date.now()})}handleToolCallChunk(e){this.toolCallManager.addToolCallChunk(e),Dt.emit("stream:chunk:tool-call",{streamId:this.streamId,messageId:this.currentMessageId||void 0,toolCallId:e.toolCall.id,toolName:e.toolCall.function.name,index:e.index,arguments:e.toolCall.function.arguments,timestamp:Date.now()})}handleToolResultChunk(e){Dt.emit("stream:chunk:tool-result",{streamId:this.streamId,messageId:this.currentMessageId||void 0,toolCallId:e.toolCallId,result:e.content,timestamp:Date.now()})}handleDoneChunk(e){if(this.doneChunk?.finishReason==="tool_calls"&&e.finishReason==="stop"){this.lastFinishReason=e.finishReason,Dt.emit("stream:chunk:done",{streamId:this.streamId,messageId:this.currentMessageId||void 0,finishReason:e.finishReason,usage:e.usage,timestamp:Date.now()}),e.usage&&Dt.emit("usage:tokens",{requestId:this.requestId,streamId:this.streamId,messageId:this.currentMessageId||void 0,model:this.params.model,usage:e.usage,timestamp:Date.now()});return}this.doneChunk=e,this.lastFinishReason=e.finishReason,Dt.emit("stream:chunk:done",{streamId:this.streamId,messageId:this.currentMessageId||void 0,finishReason:e.finishReason,usage:e.usage,timestamp:Date.now()}),e.usage&&Dt.emit("usage:tokens",{requestId:this.requestId,streamId:this.streamId,messageId:this.currentMessageId||void 0,model:this.params.model,usage:e.usage,timestamp:Date.now()})}handleErrorChunk(e){Dt.emit("stream:chunk:error",{streamId:this.streamId,messageId:this.currentMessageId||void 0,error:e.error.message,timestamp:Date.now()}),this.earlyTermination=!0,this.shouldEmitStreamEnd=!1}handleThinkingChunk(e){Dt.emit("stream:chunk:thinking",{streamId:this.streamId,messageId:this.currentMessageId||void 0,content:e.content,delta:e.delta,timestamp:Date.now()})}async*checkForPendingToolCalls(){const e=this.getPendingToolCallsFromMessages();if(e.length===0)return"continue";const n=this.createSyntheticDoneChunk();Dt.emit("text:iteration",{requestId:this.requestId,streamId:this.streamId,iterationNumber:this.iterationCount+1,messageCount:this.messages.length,toolCallCount:e.length,timestamp:Date.now()});const{approvals:r,clientToolResults:s}=this.collectClientState(),a=await W1(e,this.tools,r,s);if(a.needsApproval.length>0||a.needsClientExecution.length>0){for(const u of this.emitApprovalRequests(a.needsApproval,n))yield u;for(const u of this.emitClientToolInputs(a.needsClientExecution,n))yield u;return this.shouldEmitStreamEnd=!1,"wait"}const l=this.emitToolResults(a.results,n);for(const u of l)yield u;return"continue"}async*processToolCalls(){if(!this.shouldExecuteToolPhase()){this.setToolPhase("stop");return}const e=this.toolCallManager.getToolCalls(),n=this.doneChunk;if(!n||e.length===0){this.setToolPhase("stop");return}Dt.emit("text:iteration",{requestId:this.requestId,streamId:this.streamId,iterationNumber:this.iterationCount+1,messageCount:this.messages.length,toolCallCount:e.length,timestamp:Date.now()}),this.addAssistantToolCallMessage(e);const{approvals:r,clientToolResults:s}=this.collectClientState(),a=await W1(e,this.tools,r,s);if(a.needsApproval.length>0||a.needsClientExecution.length>0){for(const u of this.emitApprovalRequests(a.needsApproval,n))yield u;for(const u of this.emitClientToolInputs(a.needsClientExecution,n))yield u;this.setToolPhase("wait");return}const l=this.emitToolResults(a.results,n);for(const u of l)yield u;this.toolCallManager.clear(),this.setToolPhase("continue")}shouldExecuteToolPhase(){return this.doneChunk?.finishReason==="tool_calls"&&this.tools.length>0&&this.toolCallManager.hasToolCalls()}addAssistantToolCallMessage(e){this.messages=[...this.messages,{role:"assistant",content:this.accumulatedContent||null,toolCalls:e}]}collectClientState(){const e=new Map,n=new Map;for(const r of this.messages)if(r.role==="assistant"&&r.parts){const s=r.parts;for(const a of s)a.type==="tool-call"&&a.state==="approval-responded"&&a.approval&&e.set(a.approval.id,a.approval.approved),a.type==="tool-call"&&a.output!==void 0&&!a.approval&&n.set(a.id,a.output)}return{approvals:e,clientToolResults:n}}emitApprovalRequests(e,n){const r=[];for(const s of e)Dt.emit("stream:approval-requested",{streamId:this.streamId,messageId:this.currentMessageId||void 0,toolCallId:s.toolCallId,toolName:s.toolName,input:s.input,approvalId:s.approvalId,timestamp:Date.now()}),r.push({type:"approval-requested",id:n.id,model:n.model,timestamp:Date.now(),toolCallId:s.toolCallId,toolName:s.toolName,input:s.input,approval:{id:s.approvalId,needsApproval:!0}});return r}emitClientToolInputs(e,n){const r=[];for(const s of e)Dt.emit("stream:tool-input-available",{streamId:this.streamId,messageId:this.currentMessageId||void 0,toolCallId:s.toolCallId,toolName:s.toolName,input:s.input,timestamp:Date.now()}),r.push({type:"tool-input-available",id:n.id,model:n.model,timestamp:Date.now(),toolCallId:s.toolCallId,toolName:s.toolName,input:s.input});return r}emitToolResults(e,n){const r=[];for(const s of e){Dt.emit("tool:call-completed",{requestId:this.requestId,streamId:this.streamId,messageId:this.currentMessageId||void 0,toolCallId:s.toolCallId,toolName:s.toolName,result:s.result,duration:s.duration??0,timestamp:Date.now()});const a=JSON.stringify(s.result),l={type:"tool_result",id:n.id,model:n.model,timestamp:Date.now(),toolCallId:s.toolCallId,content:a};r.push(l),this.messages=[...this.messages,{role:"tool",content:a,toolCallId:s.toolCallId}]}return r}getPendingToolCallsFromMessages(){const e=new Set(this.messages.filter(r=>r.role==="tool"&&r.toolCallId).map(r=>r.toolCallId)),n=[];for(const r of this.messages)if(r.role==="assistant"&&r.toolCalls)for(const s of r.toolCalls)e.has(s.id)||n.push(s);return n}createSyntheticDoneChunk(){return{type:"done",id:this.createId("pending"),model:this.params.model,timestamp:Date.now(),finishReason:"tool_calls"}}shouldContinue(){return this.cyclePhase==="executeToolCalls"?!0:this.loopStrategy({iterationCount:this.iterationCount,messages:this.messages,finishReason:this.lastFinishReason})&&this.toolPhase==="continue"}isAborted(){return!!this.effectiveSignal?.aborted}setToolPhase(e){this.toolPhase=e,e==="wait"&&(this.shouldEmitStreamEnd=!1)}createId(e){return`${e}-${Date.now()}-${Math.random().toString(36).slice(2,9)}`}}function n9(t){const{outputSchema:e,stream:n}=t;return e?s9(t):n===!1?r9(t):DC(t)}async function*DC(t){const{adapter:e,...n}=t,r=e.model,s=new MC({adapter:e,params:{...n,model:r}});for await(const a of s.run())yield a}function r9(t){const e=DC(t);return Wq(e)}async function s9(t){const{adapter:e,outputSchema:n,...r}=t,s=e.model;if(!n)throw new Error("outputSchema is required for structured output");const a=new MC({adapter:e,params:{...r,model:s}});for await(const y of a.run());const l=a.getMessages(),{tools:u,agentLoopStrategy:f,...d}=r,m=qg(n);if(!m)throw new Error("Failed to convert output schema to JSON Schema");const p=await e.structuredOutput({chatOptions:{...d,model:s,messages:l},outputSchema:m});return Ii(n)?Va(n,p.data):p.data}function Nr(t){return{__toolSide:"definition",...t,server(n){return{__toolSide:"server",...t,execute:n}},client(n){return{__toolSide:"client",...t,execute:n}}}}function eS(t){return t===null?"":typeof t=="string"?t:t.filter(e=>e.type==="text").map(e=>e.content).join("")}function i9(t){const e=[];for(const n of t)"parts"in n?e.push(...jC(n)):e.push(n);return e}function jC(t){const e=[];if(t.role==="system")return e;const n=[],r=[],s=[];for(const u of t.parts)u.type==="text"?n.push(u):u.type==="tool-call"?r.push(u):u.type==="tool-result"&&s.push(u);const a=n.map(u=>u.content).join("")||null,l=r.length>0?r.filter(u=>u.state==="input-complete"||u.state==="approval-responded"||u.output!==void 0).map(u=>({id:u.id,type:"function",function:{name:u.name,arguments:u.arguments}})):void 0;t.role!=="assistant"||a||!l?e.push({role:t.role,content:a,...l&&l.length>0&&{toolCalls:l}}):l.length>0&&e.push({role:"assistant",content:a,toolCalls:l});for(const u of s)(u.state==="complete"||u.state==="error")&&e.push({role:"tool",content:u.content,toolCallId:u.toolCallId});return e}function a9(t,e){const n=[],r=eS(t.content);if(r&&n.push({type:"text",content:r}),t.toolCalls&&t.toolCalls.length>0)for(const s of t.toolCalls)n.push({type:"tool-call",id:s.id,name:s.function.name,arguments:s.function.arguments,state:"input-complete"});return t.role==="tool"&&t.toolCallId&&n.push({type:"tool-result",toolCallId:t.toolCallId,content:eS(t.content),state:"complete"}),{id:e||Uf(),role:t.role==="tool"?"assistant":t.role,parts:n}}function o9(t,e){return"parts"in t?{...t,id:t.id||e(),createdAt:t.createdAt||new Date}:{...a9(t,e()),createdAt:new Date}}function Uf(){return`msg-${Date.now()}-${Math.random().toString(36).substring(7)}`}var ki={},jm={},tS;function nS(){return tS||(tS=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Allow=t.ALL=t.COLLECTION=t.ATOM=t.SPECIAL=t.INF=t._INFINITY=t.INFINITY=t.NAN=t.BOOL=t.NULL=t.OBJ=t.ARR=t.NUM=t.STR=void 0,t.STR=1,t.NUM=2,t.ARR=4,t.OBJ=8,t.NULL=16,t.BOOL=32,t.NAN=64,t.INFINITY=128,t._INFINITY=256,t.INF=t.INFINITY|t._INFINITY,t.SPECIAL=t.NULL|t.BOOL|t.INF|t.NAN,t.ATOM=t.STR|t.NUM|t.SPECIAL,t.COLLECTION=t.ARR|t.OBJ,t.ALL=t.ATOM|t.COLLECTION,t.Allow={STR:t.STR,NUM:t.NUM,ARR:t.ARR,OBJ:t.OBJ,NULL:t.NULL,BOOL:t.BOOL,NAN:t.NAN,INFINITY:t.INFINITY,_INFINITY:t._INFINITY,INF:t.INF,SPECIAL:t.SPECIAL,ATOM:t.ATOM,COLLECTION:t.COLLECTION,ALL:t.ALL},t.default=t.Allow})(jm)),jm}var rS;function l9(){return rS||(rS=1,(function(t){var e=ki&&ki.__createBinding||(Object.create?(function(d,m,p,y){y===void 0&&(y=p);var g=Object.getOwnPropertyDescriptor(m,p);(!g||("get"in g?!m.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return m[p]}}),Object.defineProperty(d,y,g)}):(function(d,m,p,y){y===void 0&&(y=p),d[y]=m[p]})),n=ki&&ki.__exportStar||function(d,m){for(var p in d)p!=="default"&&!Object.prototype.hasOwnProperty.call(m,p)&&e(m,d,p)};Object.defineProperty(t,"__esModule",{value:!0}),t.Allow=t.MalformedJSON=t.PartialJSON=t.parseJSON=t.parse=void 0;const r=nS();Object.defineProperty(t,"Allow",{enumerable:!0,get:function(){return r.Allow}}),n(nS(),t);class s extends Error{}t.PartialJSON=s;class a extends Error{}t.MalformedJSON=a;function l(d,m=r.Allow.ALL){if(typeof d!="string")throw new TypeError(`expecting str, got ${typeof d}`);if(!d.trim())throw new Error(`${d} is empty`);return u(d.trim(),m)}t.parseJSON=l;const u=(d,m)=>{const p=d.length;let y=0;const g=D=>{throw new s(`${D} at position ${y}`)},v=D=>{throw new a(`${D} at position ${y}`)},x=()=>(j(),y>=p&&g("Unexpected end of input"),d[y]==='"'?E():d[y]==="{"?S():d[y]==="["?T():d.substring(y,y+4)==="null"||r.Allow.NULL&m&&p-y<4&&"null".startsWith(d.substring(y))?(y+=4,null):d.substring(y,y+4)==="true"||r.Allow.BOOL&m&&p-y<4&&"true".startsWith(d.substring(y))?(y+=4,!0):d.substring(y,y+5)==="false"||r.Allow.BOOL&m&&p-y<5&&"false".startsWith(d.substring(y))?(y+=5,!1):d.substring(y,y+8)==="Infinity"||r.Allow.INFINITY&m&&p-y<8&&"Infinity".startsWith(d.substring(y))?(y+=8,1/0):d.substring(y,y+9)==="-Infinity"||r.Allow._INFINITY&m&&1<p-y&&p-y<9&&"-Infinity".startsWith(d.substring(y))?(y+=9,-1/0):d.substring(y,y+3)==="NaN"||r.Allow.NAN&m&&p-y<3&&"NaN".startsWith(d.substring(y))?(y+=3,NaN):A()),E=()=>{const D=y;let I=!1;for(y++;y<p&&(d[y]!=='"'||I&&d[y-1]==="\\");)I=d[y]==="\\"?!I:!1,y++;if(d.charAt(y)=='"')try{return JSON.parse(d.substring(D,++y-Number(I)))}catch(P){v(String(P))}else if(r.Allow.STR&m)try{return JSON.parse(d.substring(D,y-Number(I))+'"')}catch{return JSON.parse(d.substring(D,d.lastIndexOf("\\"))+'"')}g("Unterminated string literal")},S=()=>{y++,j();const D={};try{for(;d[y]!=="}";){if(j(),y>=p&&r.Allow.OBJ&m)return D;const I=E();j(),y++;try{const P=x();D[I]=P}catch(P){if(r.Allow.OBJ&m)return D;throw P}j(),d[y]===","&&y++}}catch{if(r.Allow.OBJ&m)return D;g("Expected '}' at end of object")}return y++,D},T=()=>{y++;const D=[];try{for(;d[y]!=="]";)D.push(x()),j(),d[y]===","&&y++}catch{if(r.Allow.ARR&m)return D;g("Expected ']' at end of array")}return y++,D},A=()=>{if(y===0){d==="-"&&v("Not sure what '-' is");try{return JSON.parse(d)}catch(I){if(r.Allow.NUM&m)try{return JSON.parse(d.substring(0,d.lastIndexOf("e")))}catch{}v(String(I))}}const D=y;for(d[y]==="-"&&y++;d[y]&&",]}".indexOf(d[y])===-1;)y++;y==p&&!(r.Allow.NUM&m)&&g("Unterminated number literal");try{return JSON.parse(d.substring(D,y))}catch{d.substring(D,y)==="-"&&g("Not sure what '-' is");try{return JSON.parse(d.substring(D,d.lastIndexOf("e")))}catch(P){v(String(P))}}},j=()=>{for(;y<p&&` 
\r	`.includes(d[y]);)y++};return x()},f=l;t.parse=f})(ki)),ki}var c9=l9();class u9{parse(e){if(!(!e||e.trim()===""))try{return c9.parse(e)}catch{return}}}const f9=new u9;function d9(t,e,n){return t.map(r=>{if(r.id!==e)return r;const s=[...r.parts],a=s.length>0?s[s.length-1]:null;return a&&a.type==="text"?s[s.length-1]={type:"text",content:n}:s.push({type:"text",content:n}),{...r,parts:s}})}function Lm(t,e,n){return t.map(r=>{if(r.id!==e)return r;const s=[...r.parts],a=s.findIndex(u=>u.type==="tool-call"&&u.id===n.id),l={type:"tool-call",id:n.id,name:n.name,arguments:n.arguments,state:n.state};return a>=0?s[a]=l:s.push(l),{...r,parts:s}})}function sS(t,e,n,r,s,a){return t.map(l=>{if(l.id!==e)return l;const u=[...l.parts],f=u.findIndex(m=>m.type==="tool-result"&&m.toolCallId===n),d={type:"tool-result",toolCallId:n,content:r,state:s,...a&&{error:a}};return f>=0?u[f]=d:u.push(d),{...l,parts:u}})}function h9(t,e,n,r){return t.map(s=>{if(s.id!==e)return s;const a=[...s.parts],l=a.find(u=>u.type==="tool-call"&&u.id===n);return l&&(l.state="approval-requested",l.approval={id:r,needsApproval:!0}),{...s,parts:a}})}function p9(t,e,n,r,s){return t.map(a=>{const l=[...a.parts],u=l.find(f=>f.type==="tool-call"&&f.id===e);return u&&(u.output=s?{error:s}:n,r?u.state=r:u.state="input-complete"),{...a,parts:l}})}function m9(t,e,n){return t.map(r=>{const s=[...r.parts],a=s.find(l=>l.type==="tool-call"&&l.approval?.id===e);return a&&a.approval&&(a.approval.approved=n,a.state="approval-responded"),{...r,parts:s}})}function g9(t,e,n){return t.map(r=>{if(r.id!==e)return r;const s=[...r.parts],a=s.findIndex(u=>u.type==="thinking"),l={type:"thinking",content:n};return a>=0?s[a]=l:s.push(l),{...r,parts:s}})}class y9{shouldEmit(e,n){return!0}}class a0{constructor(e={}){this.messages=[],this.currentAssistantMessageId=null,this.totalTextContent="",this.currentSegmentText="",this.lastEmittedText="",this.thinkingContent="",this.toolCalls=new Map,this.toolCallOrder=[],this.finishReason=null,this.isDone=!1,this.hasToolCallsSinceTextStart=!1,this.recording=null,this.recordingStartTime=0,this.chunkStrategy=e.chunkStrategy||new y9,this.events=e.events||{},this.handlers=e.handlers||{},this.jsonParser=e.jsonParser||f9,this.recordingEnabled=e.recording??!1,e.initialMessages&&(this.messages=[...e.initialMessages])}setMessages(e){this.messages=[...e],this.emitMessagesChange()}addUserMessage(e){const n={id:Uf(),role:"user",parts:[{type:"text",content:e}],createdAt:new Date};return this.messages=[...this.messages,n],this.emitMessagesChange(),n}startAssistantMessage(){this.resetStreamState();const e={id:Uf(),role:"assistant",parts:[],createdAt:new Date};return this.currentAssistantMessageId=e.id,this.messages=[...this.messages,e],this.events.onStreamStart?.(),this.emitMessagesChange(),e.id}addToolResult(e,n,r){const s=this.messages.find(f=>f.parts.some(d=>d.type==="tool-call"&&d.id===e));if(!s){console.warn(`[StreamProcessor] Could not find message with tool call ${e}`);return}let a=p9(this.messages,e,n,r?"input-complete":void 0,r);const l=typeof n=="string"?n:JSON.stringify(n),u=r?"error":"complete";a=sS(a,s.id,e,l,u,r),this.messages=a,this.emitMessagesChange()}addToolApprovalResponse(e,n){this.messages=m9(this.messages,e,n),this.emitMessagesChange()}toModelMessages(){const e=[];for(const n of this.messages)e.push(...jC(n));return e}getMessages(){return this.messages}areAllToolsComplete(){const e=this.messages.findLast(r=>r.role==="assistant");if(!e)return!0;const n=e.parts.filter(r=>r.type==="tool-call");return n.length===0?!0:n.every(r=>r.state==="approval-responded"||r.output!==void 0&&!r.approval)}removeMessagesAfter(e){this.messages=this.messages.slice(0,e+1),this.emitMessagesChange()}clearMessages(){this.messages=[],this.currentAssistantMessageId=null,this.emitMessagesChange()}async process(e){this.resetStreamState(),this.recordingEnabled&&this.startRecording();for await(const n of e)this.processChunk(n);return this.finalizeStream(),this.recording&&(this.recording.result=this.getResult()),this.getResult()}processChunk(e){switch(this.recording&&this.recording.chunks.push({chunk:e,timestamp:Date.now(),index:this.recording.chunks.length}),e.type){case"content":this.handleContentChunk(e);break;case"tool_call":this.handleToolCallChunk(e);break;case"tool_result":this.handleToolResultChunk(e);break;case"done":this.handleDoneChunk(e);break;case"error":this.handleErrorChunk(e);break;case"thinking":this.handleThinkingChunk(e);break;case"approval-requested":this.handleApprovalRequestedChunk(e);break;case"tool-input-available":this.handleToolInputAvailableChunk(e);break}}handleContentChunk(e){this.completeAllToolCalls();const n=this.currentSegmentText;this.hasToolCallsSinceTextStart&&n.length>0&&this.isNewTextSegment(e,n)&&(n!==this.lastEmittedText&&this.emitTextUpdate(),this.currentSegmentText="",this.lastEmittedText="",this.hasToolCallsSinceTextStart=!1);const s=this.currentSegmentText;let a=s;e.delta!==""?a=s+e.delta:e.content!==""&&(e.content.startsWith(s)?a=e.content:s.startsWith(e.content)?a=s:a=s+e.content);const l=a.slice(s.length);this.currentSegmentText=a,this.totalTextContent+=l;const u=e.delta??e.content??"";this.chunkStrategy.shouldEmit(u,this.currentSegmentText)&&this.currentSegmentText!==this.lastEmittedText&&this.emitTextUpdate()}handleToolCallChunk(e){this.hasToolCallsSinceTextStart=!0;const n=e.toolCall.id,r=this.toolCalls.get(n);if(r){const s=r.state==="awaiting-input";r.arguments+=e.toolCall.function.arguments||"",s&&e.toolCall.function.arguments&&(r.state="input-streaming"),r.parsedArguments=this.jsonParser.parse(r.arguments);const a=this.toolCallOrder.indexOf(n);this.handlers.onToolCallStateChange?.(a,r.id,r.name,r.state,r.arguments,r.parsedArguments),e.toolCall.function.arguments&&this.handlers.onToolCallDelta?.(a,e.toolCall.function.arguments),this.currentAssistantMessageId&&(this.messages=Lm(this.messages,this.currentAssistantMessageId,{id:r.id,name:r.name,arguments:r.arguments,state:r.state}),this.emitMessagesChange(),this.events.onToolCallStateChange?.(this.currentAssistantMessageId,r.id,r.state,r.arguments))}else{const s=e.toolCall.function.arguments?"input-streaming":"awaiting-input",a={id:e.toolCall.id,name:e.toolCall.function.name,arguments:e.toolCall.function.arguments||"",state:s,parsedArguments:void 0,index:e.index};e.toolCall.function.arguments&&(a.parsedArguments=this.jsonParser.parse(e.toolCall.function.arguments)),this.toolCalls.set(n,a),this.toolCallOrder.push(n);const l=this.toolCallOrder.indexOf(n);this.handlers.onToolCallStart?.(l,e.toolCall.id,e.toolCall.function.name),this.handlers.onToolCallStateChange?.(l,e.toolCall.id,e.toolCall.function.name,s,e.toolCall.function.arguments||"",a.parsedArguments),e.toolCall.function.arguments&&this.handlers.onToolCallDelta?.(l,e.toolCall.function.arguments),this.currentAssistantMessageId&&(this.messages=Lm(this.messages,this.currentAssistantMessageId,{id:e.toolCall.id,name:e.toolCall.function.name,arguments:e.toolCall.function.arguments||"",state:s}),this.emitMessagesChange(),this.events.onToolCallStateChange?.(this.currentAssistantMessageId,e.toolCall.id,s,e.toolCall.function.arguments||""))}}handleToolResultChunk(e){const n="complete";this.handlers.onToolResultStateChange?.(e.toolCallId,e.content,n),this.currentAssistantMessageId&&(this.messages=sS(this.messages,this.currentAssistantMessageId,e.toolCallId,e.content,n),this.emitMessagesChange())}handleDoneChunk(e){this.finishReason=e.finishReason,this.isDone=!0,this.completeAllToolCalls()}handleErrorChunk(e){this.handlers.onError?.(e.error),this.events.onError?.(new Error(e.error.message))}handleThinkingChunk(e){const n=this.thinkingContent;let r=n;e.delta!==""?r=n+e.delta:e.content!==""&&(e.content.startsWith(n)?r=e.content:n.startsWith(e.content)?r=n:r=n+e.content),this.thinkingContent=r,this.handlers.onThinkingUpdate?.(this.thinkingContent),this.currentAssistantMessageId&&(this.messages=g9(this.messages,this.currentAssistantMessageId,this.thinkingContent),this.emitMessagesChange(),this.events.onThinkingUpdate?.(this.currentAssistantMessageId,this.thinkingContent))}handleApprovalRequestedChunk(e){this.handlers.onApprovalRequested?.(e.toolCallId,e.toolName,e.input,e.approval.id),this.currentAssistantMessageId&&(this.messages=h9(this.messages,this.currentAssistantMessageId,e.toolCallId,e.approval.id),this.emitMessagesChange()),this.events.onApprovalRequest?.({toolCallId:e.toolCallId,toolName:e.toolName,input:e.input,approvalId:e.approval.id})}handleToolInputAvailableChunk(e){this.handlers.onToolInputAvailable?.(e.toolCallId,e.toolName,e.input),this.events.onToolCall?.({toolCallId:e.toolCallId,toolName:e.toolName,input:e.input})}isNewTextSegment(e,n){return e.delta!==void 0&&e.content!==void 0&&(e.content.length<n.length||!e.content.startsWith(n)&&!n.startsWith(e.content))}completeAllToolCalls(){this.toolCalls.forEach((e,n)=>{if(e.state!=="input-complete"){const r=this.toolCallOrder.indexOf(n);this.completeToolCall(r,e)}})}completeToolCall(e,n){n.state="input-complete",n.parsedArguments=this.jsonParser.parse(n.arguments),this.handlers.onToolCallStateChange?.(e,n.id,n.name,"input-complete",n.arguments,n.parsedArguments),this.handlers.onToolCallComplete?.(e,n.id,n.name,n.arguments),this.currentAssistantMessageId&&(this.messages=Lm(this.messages,this.currentAssistantMessageId,{id:n.id,name:n.name,arguments:n.arguments,state:"input-complete"}),this.emitMessagesChange(),this.events.onToolCallStateChange?.(this.currentAssistantMessageId,n.id,"input-complete",n.arguments))}emitTextUpdate(){this.lastEmittedText=this.currentSegmentText,this.handlers.onTextUpdate?.(this.currentSegmentText),this.currentAssistantMessageId&&(this.messages=d9(this.messages,this.currentAssistantMessageId,this.currentSegmentText),this.emitMessagesChange(),this.events.onTextUpdate?.(this.currentAssistantMessageId,this.currentSegmentText))}emitMessagesChange(){this.events.onMessagesChange?.([...this.messages])}finalizeStream(){this.completeAllToolCalls(),this.currentSegmentText!==this.lastEmittedText&&this.emitTextUpdate();const e=this.getCompletedToolCalls();if(this.handlers.onStreamEnd?.(this.totalTextContent,e.length>0?e:void 0),this.currentAssistantMessageId){const n=this.messages.find(r=>r.id===this.currentAssistantMessageId);n&&this.events.onStreamEnd?.(n)}}getCompletedToolCalls(){return Array.from(this.toolCalls.values()).filter(e=>e.state==="input-complete").map(e=>({id:e.id,type:"function",function:{name:e.name,arguments:e.arguments}}))}getResult(){const e=this.getCompletedToolCalls();return{content:this.totalTextContent,thinking:this.thinkingContent||void 0,toolCalls:e.length>0?e:void 0,finishReason:this.finishReason}}getState(){return{content:this.totalTextContent,thinking:this.thinkingContent,toolCalls:new Map(this.toolCalls),toolCallOrder:[...this.toolCallOrder],finishReason:this.finishReason,done:this.isDone}}startRecording(){this.recordingEnabled=!0,this.recordingStartTime=Date.now(),this.recording={version:"1.0",timestamp:this.recordingStartTime,chunks:[]}}getRecording(){return this.recording}resetStreamState(){this.totalTextContent="",this.currentSegmentText="",this.lastEmittedText="",this.thinkingContent="",this.toolCalls.clear(),this.toolCallOrder=[],this.finishReason=null,this.isDone=!1,this.hasToolCallsSinceTextStart=!1,this.chunkStrategy.reset?.()}reset(){this.resetStreamState(),this.messages=[],this.currentAssistantMessageId=null}static async replay(e,n){return new a0(n).process(b9(e))}}function b9(t){return{async*[Symbol.asyncIterator](){for(const{chunk:e}of t.chunks)yield e}}}class _9{constructor(e){this.clientId=e}clientCreated(e){this.emitEvent("client:created",{initialMessageCount:e})}loadingChanged(e){this.emitEvent("client:loading-changed",{isLoading:e})}errorChanged(e){this.emitEvent("client:error-changed",{error:e})}textUpdated(e,n,r){this.emitEvent("processor:text-updated",{streamId:e,content:r}),this.emitEvent("client:assistant-message-updated",{messageId:n,content:r})}toolCallStateChanged(e,n,r,s,a,l){this.emitEvent("processor:tool-call-state-changed",{streamId:e,toolCallId:r,toolName:s,state:a,arguments:l}),this.emitEvent("client:tool-call-updated",{messageId:n,toolCallId:r,toolName:s,state:a,arguments:l})}toolResultStateChanged(e,n,r,s,a){this.emitEvent("processor:tool-result-state-changed",{streamId:e,toolCallId:n,content:r,state:s,error:a})}thinkingUpdated(e,n,r,s){this.emitEvent("stream:chunk:thinking",{streamId:e,messageId:n,content:r,delta:s})}approvalRequested(e,n,r,s,a){this.emitEvent("client:approval-requested",{messageId:e,toolCallId:n,toolName:r,input:s,approvalId:a})}messageAppended(e){const n=e.parts.filter(r=>r.type==="text").map(r=>r.content).join(" ").substring(0,100);this.emitEvent("client:message-appended",{messageId:e.id,role:e.role,contentPreview:n})}messageSent(e,n){this.emitEvent("client:message-sent",{messageId:e,content:n})}reloaded(e){this.emitEvent("client:reloaded",{fromMessageIndex:e})}stopped(){this.emitEvent("client:stopped")}messagesCleared(){this.emitEvent("client:messages-cleared")}toolResultAdded(e,n,r,s){this.emitEvent("tool:result-added",{toolCallId:e,toolName:n,output:r,state:s})}toolApprovalResponded(e,n,r){this.emitEvent("tool:approval-responded",{approvalId:e,toolCallId:n,approved:r})}}class v9 extends _9{emitEvent(e,n){e.startsWith("client:")||e.startsWith("tool:")?Dt.emit(e,{...n,clientId:this.clientId,timestamp:Date.now()}):Dt.emit(e,{...n,timestamp:Date.now()})}}class x9{constructor(e){if(this.body={},this.isLoading=!1,this.error=void 0,this.abortController=null,this.currentStreamId=null,this.currentMessageId=null,this.postStreamActions=[],this.uniqueId=e.id||this.generateUniqueId("chat"),this.body=e.body||{},this.connection=e.connection,this.events=new v9(this.uniqueId),this.clientToolsRef={current:new Map},e.tools)for(const n of e.tools)this.clientToolsRef.current.set(n.name,n);this.callbacksRef={current:{onResponse:e.onResponse||(()=>{}),onChunk:e.onChunk||(()=>{}),onFinish:e.onFinish||(()=>{}),onError:e.onError||(()=>{}),onMessagesChange:e.onMessagesChange||(()=>{}),onLoadingChange:e.onLoadingChange||(()=>{}),onErrorChange:e.onErrorChange||(()=>{})}},this.processor=new a0({chunkStrategy:e.streamProcessor?.chunkStrategy,initialMessages:e.initialMessages,events:{onMessagesChange:n=>{this.callbacksRef.current.onMessagesChange(n)},onStreamStart:()=>{},onStreamEnd:n=>{this.callbacksRef.current.onFinish(n)},onError:n=>{this.setError(n),this.callbacksRef.current.onError(n)},onTextUpdate:(n,r)=>{this.currentStreamId&&this.events.textUpdated(this.currentStreamId,n,r)},onThinkingUpdate:(n,r)=>{this.currentStreamId&&this.events.thinkingUpdated(this.currentStreamId,n,r)},onToolCallStateChange:(n,r,s,a)=>{const d=this.processor.getMessages().find(m=>m.id===n)?.parts.find(m=>m.type==="tool-call"&&m.id===r)?.name||"unknown";this.currentStreamId&&this.events.toolCallStateChanged(this.currentStreamId,n,r,d,s,a)},onToolCall:async n=>{const r=this.clientToolsRef.current.get(n.toolName);if(r?.execute)try{const s=await r.execute(n.input);await this.addToolResult({toolCallId:n.toolCallId,tool:n.toolName,output:s,state:"output-available"})}catch(s){await this.addToolResult({toolCallId:n.toolCallId,tool:n.toolName,output:null,state:"output-error",errorText:s.message})}},onApprovalRequest:n=>{this.events.approvalRequested(this.currentMessageId||"",n.toolCallId,n.toolName,n.input,n.approvalId)}}}),this.events.clientCreated(this.processor.getMessages().length)}generateUniqueId(e){return`${e}-${Date.now()}-${Math.random().toString(36).substring(7)}`}setIsLoading(e){this.isLoading=e,this.callbacksRef.current.onLoadingChange(e),this.events.loadingChanged(e)}setError(e){this.error=e,this.callbacksRef.current.onErrorChange(e),this.events.errorChanged(e?.message||null)}async processStream(e){this.currentStreamId=this.generateUniqueId("stream");const n=this.processor.startAssistantMessage();this.currentMessageId=n;const r={id:n,role:"assistant",parts:[],createdAt:new Date};this.events.messageAppended(r);for await(const l of e)this.callbacksRef.current.onChunk(l),this.processor.processChunk(l),await new Promise(u=>setTimeout(u,0));return this.processor.finalizeStream(),this.currentStreamId=null,this.currentMessageId=null,this.processor.getMessages().find(l=>l.id===n)||{id:n,role:"assistant",parts:[],createdAt:new Date}}async sendMessage(e){if(!e.trim()||this.isLoading)return;const n=this.processor.addUserMessage(e.trim());this.events.messageSent(n.id,e.trim()),await this.streamResponse()}async append(e){const n=o9(e,Uf);if(n.role==="system")return;const r=n;this.events.messageAppended(r);const s=this.processor.getMessages();this.processor.setMessages([...s,r]),await this.streamResponse()}async streamResponse(){this.setIsLoading(!0),this.setError(void 0),this.abortController=new AbortController;try{const e=this.processor.toModelMessages();await this.callbacksRef.current.onResponse();const n={...this.body,conversationId:this.uniqueId},r=this.connection.connect(e,n,this.abortController.signal);await this.processStream(r)}catch(e){if(e instanceof Error){if(e.name==="AbortError")return;this.setError(e),this.callbacksRef.current.onError(e)}}finally{this.abortController=null,this.setIsLoading(!1),await this.drainPostStreamActions()}}async reload(){const e=this.processor.getMessages();if(e.length===0)return;const n=e.findLastIndex(r=>r.role==="user");n!==-1&&(this.events.reloaded(n),this.processor.removeMessagesAfter(n),await this.streamResponse())}stop(){this.abortController&&(this.abortController.abort(),this.abortController=null),this.setIsLoading(!1),this.events.stopped()}clear(){this.processor.clearMessages(),this.setError(void 0),this.events.messagesCleared()}async addToolResult(e){if(this.events.toolResultAdded(e.toolCallId,e.tool,e.output,e.state||"output-available"),this.processor.addToolResult(e.toolCallId,e.output,e.errorText),this.isLoading){this.queuePostStreamAction(()=>this.checkForContinuation());return}await this.checkForContinuation()}async addToolApprovalResponse(e){const n=this.processor.getMessages();let r;for(const s of n){const a=s.parts.find(l=>l.type==="tool-call"&&l.approval?.id===e.id);if(a){r=a.id;break}}if(r&&this.events.toolApprovalResponded(e.id,r,e.approved),this.processor.addToolApprovalResponse(e.id,e.approved),this.isLoading){this.queuePostStreamAction(()=>this.checkForContinuation());return}await this.checkForContinuation()}queuePostStreamAction(e){this.postStreamActions.push(e)}async drainPostStreamActions(){for(;this.postStreamActions.length>0;)await this.postStreamActions.shift()()}async checkForContinuation(){this.shouldAutoSend()&&await this.streamResponse()}shouldAutoSend(){return this.processor.areAllToolsComplete()}getMessages(){return this.processor.getMessages()}getIsLoading(){return this.isLoading}getError(){return this.error}setMessagesManually(e){this.processor.setMessages(e)}updateOptions(e){if(e.connection!==void 0&&(this.connection=e.connection),e.body!==void 0&&(this.body=e.body),e.tools!==void 0){this.clientToolsRef.current=new Map;for(const n of e.tools)this.clientToolsRef.current.set(n.name,n)}e.onResponse!==void 0&&(this.callbacksRef.current.onResponse=e.onResponse),e.onChunk!==void 0&&(this.callbacksRef.current.onChunk=e.onChunk),e.onFinish!==void 0&&(this.callbacksRef.current.onFinish=e.onFinish),e.onError!==void 0&&(this.callbacksRef.current.onError=e.onError)}}function w9(...t){return t}function S9(t){return{async*connect(e,n){const r=i9(e);yield*t(r,n)}}}function k9(t){const e=K.useId(),n=t.id||e,[r,s]=K.useState(t.initialMessages||[]),[a,l]=K.useState(!1),[u,f]=K.useState(void 0),d=K.useRef(t.initialMessages||[]),m=K.useRef(!0);K.useEffect(()=>{d.current=r},[r]);const p=K.useRef(t);p.current=t;const y=K.useMemo(()=>{const D=m.current?t.initialMessages||[]:d.current;return m.current=!1,new x9({connection:p.current.connection,id:n,initialMessages:D,body:p.current.body,onResponse:p.current.onResponse,onChunk:p.current.onChunk,onFinish:p.current.onFinish,onError:p.current.onError,tools:p.current.tools,streamProcessor:t.streamProcessor,onMessagesChange:I=>{s(I)},onLoadingChange:I=>{l(I)},onErrorChange:I=>{f(I)}})},[n]);K.useEffect(()=>{t.initialMessages&&t.initialMessages.length>0&&r.length===0&&y.setMessagesManually(t.initialMessages)},[]),K.useEffect(()=>()=>{y.stop()},[y]);const g=K.useCallback(async D=>{await y.sendMessage(D)},[y]),v=K.useCallback(async D=>{await y.append(D)},[y]),x=K.useCallback(async()=>{await y.reload()},[y]),E=K.useCallback(()=>{y.stop()},[y]),S=K.useCallback(()=>{y.clear()},[y]),T=K.useCallback(D=>{y.setMessagesManually(D)},[y]),A=K.useCallback(async D=>{await y.addToolResult(D)},[y]),j=K.useCallback(async D=>{await y.addToolApprovalResponse(D)},[y]);return{messages:r,sendMessage:g,append:v,reload:x,stop:E,isLoading:a,error:u,setMessages:T,clear:S,addToolResult:A,addToolApprovalResponse:j}}class E9{constructor(e={},n){this.kind="text",this.config=e,this.model=n}generateId(){return`${this.name}-${Date.now()}-${Math.random().toString(36).substring(7)}`}}const C9=t=>{if(t.conversation&&t.previous_response_id)throw new Error("Cannot use both 'conversation' and 'previous_response_id' in the same request.")},T9=t=>{A9(t),C9(t)},A9=t=>{const e=t.metadata;if(e&&Object.keys(e).length>16)throw new Error("Metadata cannot have more than 16 key-value pairs.");if(e&&Object.keys(e).some(a=>a.length>64))throw new Error("Metadata keys cannot be longer than 64 characters.");if(e&&Object.values(e).some(a=>a.length>512))throw new Error("Metadata values cannot be longer than 512 characters.")};function Fg(t){if(t!==null){if(Array.isArray(t))return t.map(e=>Fg(e));if(typeof t=="object"){const e={};for(const[n,r]of Object.entries(t)){const s=Fg(r);s!==void 0&&(e[n]=s)}return e}return t}}function Il(t,e=[]){const n={...t};if(n.type==="object"&&n.properties){const r={...n.properties},s=Object.keys(r);for(const a of s){const l=r[a],u=!e.includes(a);l.type==="object"&&l.properties?r[a]=Il(l,l.required||[]):l.type==="array"&&l.items?r[a]={...l,items:Il(l.items,l.items.required||[])}:u&&(l.type&&!Array.isArray(l.type)?r[a]={...l,type:[l.type,"null"]}:Array.isArray(l.type)&&!l.type.includes("null")&&(r[a]={...l,type:[...l.type,"null"]}))}n.properties=r,n.required=s,n.additionalProperties=!1}return n.type==="array"&&n.items&&(n.items=Il(n.items,n.items.required||[])),n}function R9(t){return{type:"apply_patch"}}function O9(t){return{type:"code_interpreter",container:t.metadata.container}}function N9(t){const e=t.metadata;return{type:"computer_use_preview",display_height:e.display_height,display_width:e.display_width,environment:e.environment}}function I9(t){const e=t.metadata;return{type:"custom",name:e.name,description:e.description,format:e.format}}function M9(t){const e=t.metadata;return{type:"file_search",vector_store_ids:e.vector_store_ids,max_num_results:e.max_num_results,ranking_options:e.ranking_options,filters:e.filters}}function D9(t){const e=t.inputSchema??{type:"object",properties:{},required:[]},n=Il(e,e.required||[]);return n.additionalProperties=!1,{type:"function",name:t.name,description:t.description,parameters:n,strict:!0}}function j9(t){return{type:"image_generation",...t.metadata}}function L9(t){return{type:"local_shell"}}function z9(t){if(!t.server_url&&!t.connector_id)throw new Error("Either server_url or connector_id must be provided.");if(t.connector_id&&t.server_url)throw new Error("Only one of server_url or connector_id can be provided.")}function P9(t){const n={type:"mcp",...t.metadata};return z9(n),n}function B9(t){return{type:"shell"}}function $9(t){const e=t.metadata;return{type:e.type,search_context_size:e.search_context_size,user_location:e.user_location}}function U9(t){return t.metadata}function q9(t){return t.map(e=>{const n=new Set(["apply_patch","code_interpreter","computer_use_preview","file_search","image_generation","local_shell","mcp","shell","web_search_preview","web_search","custom"]),r=e.name;if(n.has(r))switch(r){case"apply_patch":return R9();case"code_interpreter":return O9(e);case"computer_use_preview":return N9(e);case"file_search":return M9(e);case"image_generation":return j9(e);case"local_shell":return L9();case"mcp":return P9(e);case"shell":return B9();case"web_search_preview":return $9(e);case"web_search":return U9(e);case"custom":return I9(e)}return D9(e)})}function De(t,e,n,r,s){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n}function W(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)}let LC=function(){const{crypto:t}=globalThis;if(t?.randomUUID)return LC=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,r=>(+r^n()&15>>+r/4).toString(16))};function Vg(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const Hg=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};class Re extends Error{}class cn extends Re{constructor(e,n,r,s){super(`${cn.makeMessage(e,n,r)}`),this.status=e,this.headers=s,this.requestID=s?.get("x-request-id"),this.error=n;const a=n;this.code=a?.code,this.param=a?.param,this.type=a?.type}static makeMessage(e,n,r){const s=n?.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return e&&s?`${e} ${s}`:e?`${e} status code (no body)`:s||"(no status code or body)"}static generate(e,n,r,s){if(!e||!s)return new bd({message:r,cause:Hg(n)});const a=n?.error;return e===400?new zC(e,a,r,s):e===401?new PC(e,a,r,s):e===403?new BC(e,a,r,s):e===404?new $C(e,a,r,s):e===409?new UC(e,a,r,s):e===422?new qC(e,a,r,s):e===429?new FC(e,a,r,s):e>=500?new VC(e,a,r,s):new cn(e,a,r,s)}}class wr extends cn{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class bd extends cn{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class o0 extends bd{constructor({message:e}={}){super({message:e??"Request timed out."})}}class zC extends cn{}class PC extends cn{}class BC extends cn{}class $C extends cn{}class UC extends cn{}class qC extends cn{}class FC extends cn{}class VC extends cn{}class HC extends Re{constructor(){super("Could not parse response content as the length limit was reached")}}class GC extends Re{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}class hl extends Error{constructor(e){super(e)}}const F9=/^[a-z][a-z0-9+.-]*:/i,V9=t=>F9.test(t);let $n=t=>($n=Array.isArray,$n(t)),iS=$n;function KC(t){return typeof t!="object"?{}:t??{}}function H9(t){if(!t)return!0;for(const e in t)return!1;return!0}function G9(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function zm(t){return t!=null&&typeof t=="object"&&!Array.isArray(t)}const K9=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Re(`${t} must be an integer`);if(e<0)throw new Re(`${t} must be a positive integer`);return e},Z9=t=>{try{return JSON.parse(t)}catch{return}},oc=t=>new Promise(e=>setTimeout(e,t)),Ia="6.15.0",Q9=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u";function J9(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const Y9=()=>{const t=J9();if(t==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ia,"X-Stainless-OS":oS(Deno.build.os),"X-Stainless-Arch":aS(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:Deno.version?.deno??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ia,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(t==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ia,"X-Stainless-OS":oS(globalThis.process.platform??"unknown"),"X-Stainless-Arch":aS(globalThis.process.arch??"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":globalThis.process.version??"unknown"};const e=X9();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ia,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ia,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function X9(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const r=n.exec(navigator.userAgent);if(r){const s=r[1]||0,a=r[2]||0,l=r[3]||0;return{browser:e,version:`${s}.${a}.${l}`}}}return null}const aS=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",oS=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let lS;const W9=()=>lS??(lS=Y9());function eF(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new OpenAI({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function ZC(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function QC(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return ZC({start(){},async pull(n){const{done:r,value:s}=await e.next();r?n.close():n.enqueue(s)},async cancel(){await e.return?.()}})}function JC(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n?.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function tF(t){if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await t[Symbol.asyncIterator]().return?.();return}const e=t.getReader(),n=e.cancel();e.releaseLock(),await n}const nF=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)}),YC="RFC3986",XC=t=>String(t),cS={RFC1738:t=>String(t).replace(/%20/g,"+"),RFC3986:XC},rF="RFC1738";let Gg=(t,e)=>(Gg=Object.hasOwn??Function.prototype.call.bind(Object.prototype.hasOwnProperty),Gg(t,e));const Lr=(()=>{const t=[];for(let e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t})(),Pm=1024,sF=(t,e,n,r,s)=>{if(t.length===0)return t;let a=t;if(typeof t=="symbol"?a=Symbol.prototype.toString.call(t):typeof t!="string"&&(a=String(t)),n==="iso-8859-1")return escape(a).replace(/%u[0-9a-f]{4}/gi,function(u){return"%26%23"+parseInt(u.slice(2),16)+"%3B"});let l="";for(let u=0;u<a.length;u+=Pm){const f=a.length>=Pm?a.slice(u,u+Pm):a,d=[];for(let m=0;m<f.length;++m){let p=f.charCodeAt(m);if(p===45||p===46||p===95||p===126||p>=48&&p<=57||p>=65&&p<=90||p>=97&&p<=122||s===rF&&(p===40||p===41)){d[d.length]=f.charAt(m);continue}if(p<128){d[d.length]=Lr[p];continue}if(p<2048){d[d.length]=Lr[192|p>>6]+Lr[128|p&63];continue}if(p<55296||p>=57344){d[d.length]=Lr[224|p>>12]+Lr[128|p>>6&63]+Lr[128|p&63];continue}m+=1,p=65536+((p&1023)<<10|f.charCodeAt(m)&1023),d[d.length]=Lr[240|p>>18]+Lr[128|p>>12&63]+Lr[128|p>>6&63]+Lr[128|p&63]}l+=d.join("")}return l};function iF(t){return!t||typeof t!="object"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))}function uS(t,e){if($n(t)){const n=[];for(let r=0;r<t.length;r+=1)n.push(e(t[r]));return n}return e(t)}const WC={brackets(t){return String(t)+"[]"},comma:"comma",indices(t,e){return String(t)+"["+e+"]"},repeat(t){return String(t)}},eT=function(t,e){Array.prototype.push.apply(t,$n(e)?e:[e])};let fS;const $t={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:sF,encodeValuesOnly:!1,format:YC,formatter:XC,indices:!1,serializeDate(t){return(fS??(fS=Function.prototype.call.bind(Date.prototype.toISOString)))(t)},skipNulls:!1,strictNullHandling:!1};function aF(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="symbol"||typeof t=="bigint"}const Bm={};function tT(t,e,n,r,s,a,l,u,f,d,m,p,y,g,v,x,E,S){let T=t,A=S,j=0,D=!1;for(;(A=A.get(Bm))!==void 0&&!D;){const z=A.get(t);if(j+=1,typeof z<"u"){if(z===j)throw new RangeError("Cyclic object value");D=!0}typeof A.get(Bm)>"u"&&(j=0)}if(typeof d=="function"?T=d(e,T):T instanceof Date?T=y?.(T):n==="comma"&&$n(T)&&(T=uS(T,function(z){return z instanceof Date?y?.(z):z})),T===null){if(a)return f&&!x?f(e,$t.encoder,E,"key",g):e;T=""}if(aF(T)||iF(T)){if(f){const z=x?e:f(e,$t.encoder,E,"key",g);return[v?.(z)+"="+v?.(f(T,$t.encoder,E,"value",g))]}return[v?.(e)+"="+v?.(String(T))]}const I=[];if(typeof T>"u")return I;let P;if(n==="comma"&&$n(T))x&&f&&(T=uS(T,f)),P=[{value:T.length>0?T.join(",")||null:void 0}];else if($n(d))P=d;else{const z=Object.keys(T);P=m?z.sort(m):z}const q=u?String(e).replace(/\./g,"%2E"):String(e),H=r&&$n(T)&&T.length===1?q+"[]":q;if(s&&$n(T)&&T.length===0)return H+"[]";for(let z=0;z<P.length;++z){const Q=P[z],re=typeof Q=="object"&&typeof Q.value<"u"?Q.value:T[Q];if(l&&re===null)continue;const pe=p&&u?Q.replace(/\./g,"%2E"):Q,X=$n(T)?typeof n=="function"?n(H,pe):H:H+(p?"."+pe:"["+pe+"]");S.set(t,j);const V=new WeakMap;V.set(Bm,S),eT(I,tT(re,X,n,r,s,a,l,u,n==="comma"&&x&&$n(T)?null:f,d,m,p,y,g,v,x,E,V))}return I}function oF(t=$t){if(typeof t.allowEmptyArrays<"u"&&typeof t.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof t.encodeDotInKeys<"u"&&typeof t.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(t.encoder!==null&&typeof t.encoder<"u"&&typeof t.encoder!="function")throw new TypeError("Encoder has to be a function.");const e=t.charset||$t.charset;if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let n=YC;if(typeof t.format<"u"){if(!Gg(cS,t.format))throw new TypeError("Unknown format option provided.");n=t.format}const r=cS[n];let s=$t.filter;(typeof t.filter=="function"||$n(t.filter))&&(s=t.filter);let a;if(t.arrayFormat&&t.arrayFormat in WC?a=t.arrayFormat:"indices"in t?a=t.indices?"indices":"repeat":a=$t.arrayFormat,"commaRoundTrip"in t&&typeof t.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const l=typeof t.allowDots>"u"?t.encodeDotInKeys?!0:$t.allowDots:!!t.allowDots;return{addQueryPrefix:typeof t.addQueryPrefix=="boolean"?t.addQueryPrefix:$t.addQueryPrefix,allowDots:l,allowEmptyArrays:typeof t.allowEmptyArrays=="boolean"?!!t.allowEmptyArrays:$t.allowEmptyArrays,arrayFormat:a,charset:e,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:$t.charsetSentinel,commaRoundTrip:!!t.commaRoundTrip,delimiter:typeof t.delimiter>"u"?$t.delimiter:t.delimiter,encode:typeof t.encode=="boolean"?t.encode:$t.encode,encodeDotInKeys:typeof t.encodeDotInKeys=="boolean"?t.encodeDotInKeys:$t.encodeDotInKeys,encoder:typeof t.encoder=="function"?t.encoder:$t.encoder,encodeValuesOnly:typeof t.encodeValuesOnly=="boolean"?t.encodeValuesOnly:$t.encodeValuesOnly,filter:s,format:n,formatter:r,serializeDate:typeof t.serializeDate=="function"?t.serializeDate:$t.serializeDate,skipNulls:typeof t.skipNulls=="boolean"?t.skipNulls:$t.skipNulls,sort:typeof t.sort=="function"?t.sort:null,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:$t.strictNullHandling}}function lF(t,e={}){let n=t;const r=oF(e);let s,a;typeof r.filter=="function"?(a=r.filter,n=a("",n)):$n(r.filter)&&(a=r.filter,s=a);const l=[];if(typeof n!="object"||n===null)return"";const u=WC[r.arrayFormat],f=u==="comma"&&r.commaRoundTrip;s||(s=Object.keys(n)),r.sort&&s.sort(r.sort);const d=new WeakMap;for(let y=0;y<s.length;++y){const g=s[y];r.skipNulls&&n[g]===null||eT(l,tT(n[g],g,u,f,r.allowEmptyArrays,r.strictNullHandling,r.skipNulls,r.encodeDotInKeys,r.encode?r.encoder:null,r.filter,r.sort,r.allowDots,r.serializeDate,r.format,r.formatter,r.encodeValuesOnly,r.charset,d))}const m=l.join(r.delimiter);let p=r.addQueryPrefix===!0?"?":"";return r.charsetSentinel&&(r.charset==="iso-8859-1"?p+="utf8=%26%2310003%3B&":p+="utf8=%E2%9C%93&"),m.length>0?p+m:""}function cF(t){let e=0;for(const s of t)e+=s.length;const n=new Uint8Array(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return n}let dS;function l0(t){let e;return(dS??(e=new globalThis.TextEncoder,dS=e.encode.bind(e)))(t)}let hS;function pS(t){let e;return(hS??(e=new globalThis.TextDecoder,hS=e.decode.bind(e)))(t)}var Xn,Wn;class _d{constructor(){Xn.set(this,void 0),Wn.set(this,void 0),De(this,Xn,new Uint8Array),De(this,Wn,null)}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?l0(e):e;De(this,Xn,cF([W(this,Xn,"f"),n]));const r=[];let s;for(;(s=uF(W(this,Xn,"f"),W(this,Wn,"f")))!=null;){if(s.carriage&&W(this,Wn,"f")==null){De(this,Wn,s.index);continue}if(W(this,Wn,"f")!=null&&(s.index!==W(this,Wn,"f")+1||s.carriage)){r.push(pS(W(this,Xn,"f").subarray(0,W(this,Wn,"f")-1))),De(this,Xn,W(this,Xn,"f").subarray(W(this,Wn,"f"))),De(this,Wn,null);continue}const a=W(this,Wn,"f")!==null?s.preceding-1:s.preceding,l=pS(W(this,Xn,"f").subarray(0,a));r.push(l),De(this,Xn,W(this,Xn,"f").subarray(s.index)),De(this,Wn,null)}return r}flush(){return W(this,Xn,"f").length?this.decode(`
`):[]}}Xn=new WeakMap,Wn=new WeakMap;_d.NEWLINE_CHARS=new Set([`
`,"\r"]);_d.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function uF(t,e){for(let s=e??0;s<t.length;s++){if(t[s]===10)return{preceding:s,index:s+1,carriage:!1};if(t[s]===13)return{preceding:s,index:s+1,carriage:!0}}return null}function fF(t){for(let r=0;r<t.length-1;r++){if(t[r]===10&&t[r+1]===10||t[r]===13&&t[r+1]===13)return r+2;if(t[r]===13&&t[r+1]===10&&r+3<t.length&&t[r+2]===13&&t[r+3]===10)return r+4}return-1}const qf={off:0,error:200,warn:300,info:400,debug:500},mS=(t,e,n)=>{if(t){if(G9(qf,t))return t;on(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(qf))}`)}};function pl(){}function zu(t,e,n){return!e||qf[t]>qf[n]?pl:e[t].bind(e)}const dF={error:pl,warn:pl,info:pl,debug:pl};let gS=new WeakMap;function on(t){const e=t.logger,n=t.logLevel??"off";if(!e)return dF;const r=gS.get(e);if(r&&r[0]===n)return r[1];const s={error:zu("error",e,n),warn:zu("warn",e,n),info:zu("info",e,n),debug:zu("debug",e,n)};return gS.set(e,[n,s]),s}const Ci=t=>(t.options&&(t.options={...t.options},delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);var ol;class qr{constructor(e,n,r){this.iterator=e,ol.set(this,void 0),this.controller=n,De(this,ol,r)}static fromSSEResponse(e,n,r){let s=!1;const a=r?on(r):console;async function*l(){if(s)throw new Re("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let u=!1;try{for await(const f of hF(e,n))if(!u){if(f.data.startsWith("[DONE]")){u=!0;continue}if(f.event===null||!f.event.startsWith("thread.")){let d;try{d=JSON.parse(f.data)}catch(m){throw a.error("Could not parse message into JSON:",f.data),a.error("From chunk:",f.raw),m}if(d&&d.error)throw new cn(void 0,d.error,void 0,e.headers);yield d}else{let d;try{d=JSON.parse(f.data)}catch(m){throw console.error("Could not parse message into JSON:",f.data),console.error("From chunk:",f.raw),m}if(f.event=="error")throw new cn(void 0,d.error,d.message,void 0);yield{event:f.event,data:d}}}u=!0}catch(f){if(Vg(f))return;throw f}finally{u||n.abort()}}return new qr(l,n,r)}static fromReadableStream(e,n,r){let s=!1;async function*a(){const u=new _d,f=JC(e);for await(const d of f)for(const m of u.decode(d))yield m;for(const d of u.flush())yield d}async function*l(){if(s)throw new Re("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let u=!1;try{for await(const f of a())u||f&&(yield JSON.parse(f));u=!0}catch(f){if(Vg(f))return;throw f}finally{u||n.abort()}}return new qr(l,n,r)}[(ol=new WeakMap,Symbol.asyncIterator)](){return this.iterator()}tee(){const e=[],n=[],r=this.iterator(),s=a=>({next:()=>{if(a.length===0){const l=r.next();e.push(l),n.push(l)}return a.shift()}});return[new qr(()=>s(e),this.controller,W(this,ol,"f")),new qr(()=>s(n),this.controller,W(this,ol,"f"))]}toReadableStream(){const e=this;let n;return ZC({async start(){n=e[Symbol.asyncIterator]()},async pull(r){try{const{value:s,done:a}=await n.next();if(a)return r.close();const l=l0(JSON.stringify(s)+`
`);r.enqueue(l)}catch(s){r.error(s)}},async cancel(){await n.return?.()}})}}async function*hF(t,e){if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Re("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Re("Attempted to iterate over a response with no body");const n=new mF,r=new _d,s=JC(t.body);for await(const a of pF(s))for(const l of r.decode(a)){const u=n.decode(l);u&&(yield u)}for(const a of r.flush()){const l=n.decode(a);l&&(yield l)}}async function*pF(t){let e=new Uint8Array;for await(const n of t){if(n==null)continue;const r=n instanceof ArrayBuffer?new Uint8Array(n):typeof n=="string"?l0(n):n;let s=new Uint8Array(e.length+r.length);s.set(e),s.set(r,e.length),e=s;let a;for(;(a=fF(e))!==-1;)yield e.slice(0,a),e=e.slice(a)}e.length>0&&(yield e)}class mF{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const a={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],a}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,r,s]=gF(e,":");return s.startsWith(" ")&&(s=s.substring(1)),n==="event"?this.event=s:n==="data"&&this.data.push(s),null}}function gF(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}async function nT(t,e){const{response:n,requestLogID:r,retryOfRequestLogID:s,startTime:a}=e,l=await(async()=>{if(e.options.stream)return on(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):qr.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const f=n.headers.get("content-type")?.split(";")[0]?.trim();if(f?.includes("application/json")||f?.endsWith("+json")){const p=await n.json();return rT(p,n)}return await n.text()})();return on(t).debug(`[${r}] response parsed`,Ci({retryOfRequestLogID:s,url:n.url,status:n.status,body:l,durationMs:Date.now()-a})),l}function rT(t,e){return!t||typeof t!="object"||Array.isArray(t)?t:Object.defineProperty(t,"_request_id",{value:e.headers.get("x-request-id"),enumerable:!1})}var ml;class vd extends Promise{constructor(e,n,r=nT){super(s=>{s(null)}),this.responsePromise=n,this.parseResponse=r,ml.set(this,void 0),De(this,ml,e)}_thenUnwrap(e){return new vd(W(this,ml,"f"),this.responsePromise,async(n,r)=>rT(e(await this.parseResponse(n,r),r),r.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n,request_id:n.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(W(this,ml,"f"),e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}ml=new WeakMap;var Pu;class c0{constructor(e,n,r,s){Pu.set(this,void 0),De(this,Pu,e),this.options=s,this.response=n,this.body=r}hasNextPage(){return this.getPaginatedItems().length?this.nextPageRequestOptions()!=null:!1}async getNextPage(){const e=this.nextPageRequestOptions();if(!e)throw new Re("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");return await W(this,Pu,"f").requestAPIList(this.constructor,e)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(Pu=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const n of e.getPaginatedItems())yield n}}class yF extends vd{constructor(e,n,r){super(e,n,async(s,a)=>new r(s,a.response,await nT(s,a),a.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const n of e)yield n}}class xd extends c0{constructor(e,n,r,s){super(e,n,r,s),this.data=r.data||[],this.object=r.object}getPaginatedItems(){return this.data??[]}nextPageRequestOptions(){return null}}class zt extends c0{constructor(e,n,r,s){super(e,n,r,s),this.data=r.data||[],this.has_more=r.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){const e=this.getPaginatedItems(),n=e[e.length-1]?.id;return n?{...this.options,query:{...KC(this.options.query),after:n}}:null}}class Ff extends c0{constructor(e,n,r,s){super(e,n,r,s),this.data=r.data||[],this.has_more=r.has_more||!1,this.last_id=r.last_id||""}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){const e=this.last_id;return e?{...this.options,query:{...KC(this.options.query),after:e}}:null}}const sT=()=>{if(typeof File>"u"){const{process:t}=globalThis,e=typeof t?.versions?.node=="string"&&parseInt(t.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(e?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Ml(t,e,n){return sT(),new File(t,e??"unknown_file",n)}function tf(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const u0=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function",yS=async(t,e)=>Kg(t.body)?{...t,body:await iT(t.body,e)}:t,Di=async(t,e)=>({...t,body:await iT(t.body,e)}),bS=new WeakMap;function bF(t){const e=typeof t=="function"?t:t.fetch,n=bS.get(e);if(n)return n;const r=(async()=>{try{const s="Response"in e?e.Response:(await e("data:,")).constructor,a=new FormData;return a.toString()!==await new s(a).text()}catch{return!0}})();return bS.set(e,r),r}const iT=async(t,e)=>{if(!await bF(e))throw new TypeError("The provided fetch function does not support file uploads with the current global FormData class.");const n=new FormData;return await Promise.all(Object.entries(t||{}).map(([r,s])=>Zg(n,r,s))),n},aT=t=>t instanceof Blob&&"name"in t,_F=t=>typeof t=="object"&&t!==null&&(t instanceof Response||u0(t)||aT(t)),Kg=t=>{if(_F(t))return!0;if(Array.isArray(t))return t.some(Kg);if(t&&typeof t=="object"){for(const e in t)if(Kg(t[e]))return!0}return!1},Zg=async(t,e,n)=>{if(n!==void 0){if(n==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")t.append(e,String(n));else if(n instanceof Response)t.append(e,Ml([await n.blob()],tf(n)));else if(u0(n))t.append(e,Ml([await new Response(QC(n)).blob()],tf(n)));else if(aT(n))t.append(e,n,tf(n));else if(Array.isArray(n))await Promise.all(n.map(r=>Zg(t,e+"[]",r)));else if(typeof n=="object")await Promise.all(Object.entries(n).map(([r,s])=>Zg(t,`${e}[${r}]`,s)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${n} instead`)}},oT=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",vF=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&oT(t),xF=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function wF(t,e,n){if(sT(),t=await t,vF(t))return t instanceof File?t:Ml([await t.arrayBuffer()],t.name);if(xF(t)){const s=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),Ml(await Qg(s),e,n)}const r=await Qg(t);if(e||(e=tf(t)),!n?.type){const s=r.find(a=>typeof a=="object"&&"type"in a&&a.type);typeof s=="string"&&(n={...n,type:s})}return Ml(r,e,n)}async function Qg(t){let e=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)e.push(t);else if(oT(t))e.push(t instanceof Blob?t:await t.arrayBuffer());else if(u0(t))for await(const n of t)e.push(...await Qg(n));else{const n=t?.constructor?.name;throw new Error(`Unexpected data type: ${typeof t}${n?`; constructor: ${n}`:""}${SF(t)}`)}return e}function SF(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}class Ce{constructor(e){this._client=e}}function lT(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const _S=Object.freeze(Object.create(null)),kF=(t=lT)=>function(n,...r){if(n.length===1)return n[0];let s=!1;const a=[],l=n.reduce((m,p,y)=>{/[?#]/.test(p)&&(s=!0);const g=r[y];let v=(s?encodeURIComponent:t)(""+g);return y!==r.length&&(g==null||typeof g=="object"&&g.toString===Object.getPrototypeOf(Object.getPrototypeOf(g.hasOwnProperty??_S)??_S)?.toString)&&(v=g+"",a.push({start:m.length+p.length,length:v.length,error:`Value of type ${Object.prototype.toString.call(g).slice(8,-1)} is not a valid path parameter`})),m+p+(y===r.length?"":v)},""),u=l.split(/[?#]/,1)[0],f=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let d;for(;(d=f.exec(u))!==null;)a.push({start:d.index,length:d[0].length,error:`Value "${d[0]}" can't be safely passed as a path parameter`});if(a.sort((m,p)=>m.start-p.start),a.length>0){let m=0;const p=a.reduce((y,g)=>{const v=" ".repeat(g.start-m),x="^".repeat(g.length);return m=g.start+g.length,y+v+x},"");throw new Re(`Path parameters result in path with invalid segments:
${a.map(y=>y.error).join(`
`)}
${l}
${p}`)}return l},de=kF(lT);let cT=class extends Ce{list(e,n={},r){return this._client.getAPIList(de`/chat/completions/${e}/messages`,zt,{query:n,...r})}};function Vf(t){return t!==void 0&&"function"in t&&t.function!==void 0}function f0(t){return t?.$brand==="auto-parseable-response-format"}function lc(t){return t?.$brand==="auto-parseable-tool"}function EF(t,e){return!e||!uT(e)?{...t,choices:t.choices.map(n=>(fT(n.message.tool_calls),{...n,message:{...n.message,parsed:null,...n.message.tool_calls?{tool_calls:n.message.tool_calls}:void 0}}))}:d0(t,e)}function d0(t,e){const n=t.choices.map(r=>{if(r.finish_reason==="length")throw new HC;if(r.finish_reason==="content_filter")throw new GC;return fT(r.message.tool_calls),{...r,message:{...r.message,...r.message.tool_calls?{tool_calls:r.message.tool_calls?.map(s=>TF(e,s))??void 0}:void 0,parsed:r.message.content&&!r.message.refusal?CF(e,r.message.content):null}}});return{...t,choices:n}}function CF(t,e){return t.response_format?.type!=="json_schema"?null:t.response_format?.type==="json_schema"?"$parseRaw"in t.response_format?t.response_format.$parseRaw(e):JSON.parse(e):null}function TF(t,e){const n=t.tools?.find(r=>Vf(r)&&r.function?.name===e.function.name);return{...e,function:{...e.function,parsed_arguments:lc(n)?n.$parseRaw(e.function.arguments):n?.function.strict?JSON.parse(e.function.arguments):null}}}function AF(t,e){if(!t||!("tools"in t)||!t.tools)return!1;const n=t.tools?.find(r=>Vf(r)&&r.function?.name===e.function.name);return Vf(n)&&(lc(n)||n?.function.strict||!1)}function uT(t){return f0(t.response_format)?!0:t.tools?.some(e=>lc(e)||e.type==="function"&&e.function.strict===!0)??!1}function fT(t){for(const e of t||[])if(e.type!=="function")throw new Re(`Currently only \`function\` tool calls are supported; Received \`${e.type}\``)}function RF(t){for(const e of t??[]){if(e.type!=="function")throw new Re(`Currently only \`function\` tool types support auto-parsing; Received \`${e.type}\``);if(e.function.strict!==!0)throw new Re(`The \`${e.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}const Hf=t=>t?.role==="assistant",dT=t=>t?.role==="tool";var Jg,nf,rf,gl,yl,sf,bl,ms,_l,Gf,Kf,Ma,hT;class h0{constructor(){Jg.add(this),this.controller=new AbortController,nf.set(this,void 0),rf.set(this,()=>{}),gl.set(this,()=>{}),yl.set(this,void 0),sf.set(this,()=>{}),bl.set(this,()=>{}),ms.set(this,{}),_l.set(this,!1),Gf.set(this,!1),Kf.set(this,!1),Ma.set(this,!1),De(this,nf,new Promise((e,n)=>{De(this,rf,e,"f"),De(this,gl,n,"f")})),De(this,yl,new Promise((e,n)=>{De(this,sf,e,"f"),De(this,bl,n,"f")})),W(this,nf,"f").catch(()=>{}),W(this,yl,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},W(this,Jg,"m",hT).bind(this))},0)}_connected(){this.ended||(W(this,rf,"f").call(this),this._emit("connect"))}get ended(){return W(this,_l,"f")}get errored(){return W(this,Gf,"f")}get aborted(){return W(this,Kf,"f")}abort(){this.controller.abort()}on(e,n){return(W(this,ms,"f")[e]||(W(this,ms,"f")[e]=[])).push({listener:n}),this}off(e,n){const r=W(this,ms,"f")[e];if(!r)return this;const s=r.findIndex(a=>a.listener===n);return s>=0&&r.splice(s,1),this}once(e,n){return(W(this,ms,"f")[e]||(W(this,ms,"f")[e]=[])).push({listener:n,once:!0}),this}emitted(e){return new Promise((n,r)=>{De(this,Ma,!0),e!=="error"&&this.once("error",r),this.once(e,n)})}async done(){De(this,Ma,!0),await W(this,yl,"f")}_emit(e,...n){if(W(this,_l,"f"))return;e==="end"&&(De(this,_l,!0),W(this,sf,"f").call(this));const r=W(this,ms,"f")[e];if(r&&(W(this,ms,"f")[e]=r.filter(s=>!s.once),r.forEach(({listener:s})=>s(...n))),e==="abort"){const s=n[0];!W(this,Ma,"f")&&!r?.length&&Promise.reject(s),W(this,gl,"f").call(this,s),W(this,bl,"f").call(this,s),this._emit("end");return}if(e==="error"){const s=n[0];!W(this,Ma,"f")&&!r?.length&&Promise.reject(s),W(this,gl,"f").call(this,s),W(this,bl,"f").call(this,s),this._emit("end")}}_emitFinal(){}}nf=new WeakMap,rf=new WeakMap,gl=new WeakMap,yl=new WeakMap,sf=new WeakMap,bl=new WeakMap,ms=new WeakMap,_l=new WeakMap,Gf=new WeakMap,Kf=new WeakMap,Ma=new WeakMap,Jg=new WeakSet,hT=function(e){if(De(this,Gf,!0),e instanceof Error&&e.name==="AbortError"&&(e=new wr),e instanceof wr)return De(this,Kf,!0),this._emit("abort",e);if(e instanceof Re)return this._emit("error",e);if(e instanceof Error){const n=new Re(e.message);return n.cause=e,this._emit("error",n)}return this._emit("error",new Re(String(e)))};function OF(t){return typeof t.parse=="function"}var Cn,Yg,Zf,Xg,Wg,ey,pT,mT;const NF=10;class gT extends h0{constructor(){super(...arguments),Cn.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){this._chatCompletions.push(e),this._emit("chatCompletion",e);const n=e.choices[0]?.message;return n&&this._addMessage(n),e}_addMessage(e,n=!0){if("content"in e||(e.content=null),this.messages.push(e),n){if(this._emit("message",e),dT(e)&&e.content)this._emit("functionToolCallResult",e.content);else if(Hf(e)&&e.tool_calls)for(const r of e.tool_calls)r.type==="function"&&this._emit("functionToolCall",r.function)}}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new Re("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),W(this,Cn,"m",Yg).call(this)}async finalMessage(){return await this.done(),W(this,Cn,"m",Zf).call(this)}async finalFunctionToolCall(){return await this.done(),W(this,Cn,"m",Xg).call(this)}async finalFunctionToolCallResult(){return await this.done(),W(this,Cn,"m",Wg).call(this)}async totalUsage(){return await this.done(),W(this,Cn,"m",ey).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const n=W(this,Cn,"m",Zf).call(this);n&&this._emit("finalMessage",n);const r=W(this,Cn,"m",Yg).call(this);r&&this._emit("finalContent",r);const s=W(this,Cn,"m",Xg).call(this);s&&this._emit("finalFunctionToolCall",s);const a=W(this,Cn,"m",Wg).call(this);a!=null&&this._emit("finalFunctionToolCallResult",a),this._chatCompletions.some(l=>l.usage)&&this._emit("totalUsage",W(this,Cn,"m",ey).call(this))}async _createChatCompletion(e,n,r){const s=r?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),W(this,Cn,"m",pT).call(this,n);const a=await e.chat.completions.create({...n,stream:!1},{...r,signal:this.controller.signal});return this._connected(),this._addChatCompletion(d0(a,n))}async _runChatCompletion(e,n,r){for(const s of n.messages)this._addMessage(s,!1);return await this._createChatCompletion(e,n,r)}async _runTools(e,n,r){const s="tool",{tool_choice:a="auto",stream:l,...u}=n,f=typeof a!="string"&&a.type==="function"&&a?.function?.name,{maxChatCompletions:d=NF}=r||{},m=n.tools.map(g=>{if(lc(g)){if(!g.$callback)throw new Re("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:g.$callback,name:g.function.name,description:g.function.description||"",parameters:g.function.parameters,parse:g.$parseRaw,strict:!0}}}return g}),p={};for(const g of m)g.type==="function"&&(p[g.function.name||g.function.function.name]=g.function);const y="tools"in n?m.map(g=>g.type==="function"?{type:"function",function:{name:g.function.name||g.function.function.name,parameters:g.function.parameters,description:g.function.description,strict:g.function.strict}}:g):void 0;for(const g of n.messages)this._addMessage(g,!1);for(let g=0;g<d;++g){const x=(await this._createChatCompletion(e,{...u,tool_choice:a,tools:y,messages:[...this.messages]},r)).choices[0]?.message;if(!x)throw new Re("missing message in ChatCompletion response");if(!x.tool_calls?.length)return;for(const E of x.tool_calls){if(E.type!=="function")continue;const S=E.id,{name:T,arguments:A}=E.function,j=p[T];if(j){if(f&&f!==T){const q=`Invalid tool_call: ${JSON.stringify(T)}. ${JSON.stringify(f)} requested. Please try again`;this._addMessage({role:s,tool_call_id:S,content:q});continue}}else{const q=`Invalid tool_call: ${JSON.stringify(T)}. Available options are: ${Object.keys(p).map(H=>JSON.stringify(H)).join(", ")}. Please try again`;this._addMessage({role:s,tool_call_id:S,content:q});continue}let D;try{D=OF(j)?await j.parse(A):A}catch(q){const H=q instanceof Error?q.message:String(q);this._addMessage({role:s,tool_call_id:S,content:H});continue}const I=await j.function(D,this),P=W(this,Cn,"m",mT).call(this,I);if(this._addMessage({role:s,tool_call_id:S,content:P}),f)return}}}}Cn=new WeakSet,Yg=function(){return W(this,Cn,"m",Zf).call(this).content??null},Zf=function(){let e=this.messages.length;for(;e-- >0;){const n=this.messages[e];if(Hf(n))return{...n,content:n.content??null,refusal:n.refusal??null}}throw new Re("stream ended without producing a ChatCompletionMessage with role=assistant")},Xg=function(){for(let e=this.messages.length-1;e>=0;e--){const n=this.messages[e];if(Hf(n)&&n?.tool_calls?.length)return n.tool_calls.filter(r=>r.type==="function").at(-1)?.function}},Wg=function(){for(let e=this.messages.length-1;e>=0;e--){const n=this.messages[e];if(dT(n)&&n.content!=null&&typeof n.content=="string"&&this.messages.some(r=>r.role==="assistant"&&r.tool_calls?.some(s=>s.type==="function"&&s.id===n.tool_call_id)))return n.content}},ey=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:n}of this._chatCompletions)n&&(e.completion_tokens+=n.completion_tokens,e.prompt_tokens+=n.prompt_tokens,e.total_tokens+=n.total_tokens);return e},pT=function(e){if(e.n!=null&&e.n>1)throw new Re("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},mT=function(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)};class p0 extends gT{static runTools(e,n,r){const s=new p0,a={...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"runTools"}};return s._run(()=>s._runTools(e,n,a)),s}_addMessage(e,n=!0){super._addMessage(e,n),Hf(e)&&e.content&&this._emit("content",e.content)}}const yT=1,bT=2,_T=4,vT=8,xT=16,wT=32,ST=64,kT=128,ET=256,CT=kT|ET,TT=xT|wT|CT|ST,AT=yT|bT|TT,RT=_T|vT,IF=AT|RT,Jt={STR:yT,NUM:bT,ARR:_T,OBJ:vT,NULL:xT,BOOL:wT,NAN:ST,INFINITY:kT,MINUS_INFINITY:ET,INF:CT,SPECIAL:TT,ATOM:AT,COLLECTION:RT,ALL:IF};class MF extends Error{}class DF extends Error{}function jF(t,e=Jt.ALL){if(typeof t!="string")throw new TypeError(`expecting str, got ${typeof t}`);if(!t.trim())throw new Error(`${t} is empty`);return LF(t.trim(),e)}const LF=(t,e)=>{const n=t.length;let r=0;const s=y=>{throw new MF(`${y} at position ${r}`)},a=y=>{throw new DF(`${y} at position ${r}`)},l=()=>(p(),r>=n&&s("Unexpected end of input"),t[r]==='"'?u():t[r]==="{"?f():t[r]==="["?d():t.substring(r,r+4)==="null"||Jt.NULL&e&&n-r<4&&"null".startsWith(t.substring(r))?(r+=4,null):t.substring(r,r+4)==="true"||Jt.BOOL&e&&n-r<4&&"true".startsWith(t.substring(r))?(r+=4,!0):t.substring(r,r+5)==="false"||Jt.BOOL&e&&n-r<5&&"false".startsWith(t.substring(r))?(r+=5,!1):t.substring(r,r+8)==="Infinity"||Jt.INFINITY&e&&n-r<8&&"Infinity".startsWith(t.substring(r))?(r+=8,1/0):t.substring(r,r+9)==="-Infinity"||Jt.MINUS_INFINITY&e&&1<n-r&&n-r<9&&"-Infinity".startsWith(t.substring(r))?(r+=9,-1/0):t.substring(r,r+3)==="NaN"||Jt.NAN&e&&n-r<3&&"NaN".startsWith(t.substring(r))?(r+=3,NaN):m()),u=()=>{const y=r;let g=!1;for(r++;r<n&&(t[r]!=='"'||g&&t[r-1]==="\\");)g=t[r]==="\\"?!g:!1,r++;if(t.charAt(r)=='"')try{return JSON.parse(t.substring(y,++r-Number(g)))}catch(v){a(String(v))}else if(Jt.STR&e)try{return JSON.parse(t.substring(y,r-Number(g))+'"')}catch{return JSON.parse(t.substring(y,t.lastIndexOf("\\"))+'"')}s("Unterminated string literal")},f=()=>{r++,p();const y={};try{for(;t[r]!=="}";){if(p(),r>=n&&Jt.OBJ&e)return y;const g=u();p(),r++;try{const v=l();Object.defineProperty(y,g,{value:v,writable:!0,enumerable:!0,configurable:!0})}catch(v){if(Jt.OBJ&e)return y;throw v}p(),t[r]===","&&r++}}catch{if(Jt.OBJ&e)return y;s("Expected '}' at end of object")}return r++,y},d=()=>{r++;const y=[];try{for(;t[r]!=="]";)y.push(l()),p(),t[r]===","&&r++}catch{if(Jt.ARR&e)return y;s("Expected ']' at end of array")}return r++,y},m=()=>{if(r===0){t==="-"&&Jt.NUM&e&&s("Not sure what '-' is");try{return JSON.parse(t)}catch(g){if(Jt.NUM&e)try{return t[t.length-1]==="."?JSON.parse(t.substring(0,t.lastIndexOf("."))):JSON.parse(t.substring(0,t.lastIndexOf("e")))}catch{}a(String(g))}}const y=r;for(t[r]==="-"&&r++;t[r]&&!",]}".includes(t[r]);)r++;r==n&&!(Jt.NUM&e)&&s("Unterminated number literal");try{return JSON.parse(t.substring(y,r))}catch{t.substring(y,r)==="-"&&Jt.NUM&e&&s("Not sure what '-' is");try{return JSON.parse(t.substring(y,t.lastIndexOf("e")))}catch(v){a(String(v))}}},p=()=>{for(;r<n&&` 
\r	`.includes(t[r]);)r++};return l()},vS=t=>jF(t,Jt.ALL^Jt.NUM);var Bt,ps,Aa,Gs,$m,Bu,Um,qm,Fm,$u,Vm,xS;class Zl extends gT{constructor(e){super(),Bt.add(this),ps.set(this,void 0),Aa.set(this,void 0),Gs.set(this,void 0),De(this,ps,e),De(this,Aa,[])}get currentChatCompletionSnapshot(){return W(this,Gs,"f")}static fromReadableStream(e){const n=new Zl(null);return n._run(()=>n._fromReadableStream(e)),n}static createChatCompletion(e,n,r){const s=new Zl(n);return s._run(()=>s._runChatCompletion(e,{...n,stream:!0},{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),s}async _createChatCompletion(e,n,r){super._createChatCompletion;const s=r?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),W(this,Bt,"m",$m).call(this);const a=await e.chat.completions.create({...n,stream:!0},{...r,signal:this.controller.signal});this._connected();for await(const l of a)W(this,Bt,"m",Um).call(this,l);if(a.controller.signal?.aborted)throw new wr;return this._addChatCompletion(W(this,Bt,"m",$u).call(this))}async _fromReadableStream(e,n){const r=n?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),W(this,Bt,"m",$m).call(this),this._connected();const s=qr.fromReadableStream(e,this.controller);let a;for await(const l of s)a&&a!==l.id&&this._addChatCompletion(W(this,Bt,"m",$u).call(this)),W(this,Bt,"m",Um).call(this,l),a=l.id;if(s.controller.signal?.aborted)throw new wr;return this._addChatCompletion(W(this,Bt,"m",$u).call(this))}[(ps=new WeakMap,Aa=new WeakMap,Gs=new WeakMap,Bt=new WeakSet,$m=function(){this.ended||De(this,Gs,void 0)},Bu=function(n){let r=W(this,Aa,"f")[n.index];return r||(r={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},W(this,Aa,"f")[n.index]=r,r)},Um=function(n){if(this.ended)return;const r=W(this,Bt,"m",xS).call(this,n);this._emit("chunk",n,r);for(const s of n.choices){const a=r.choices[s.index];s.delta.content!=null&&a.message?.role==="assistant"&&a.message?.content&&(this._emit("content",s.delta.content,a.message.content),this._emit("content.delta",{delta:s.delta.content,snapshot:a.message.content,parsed:a.message.parsed})),s.delta.refusal!=null&&a.message?.role==="assistant"&&a.message?.refusal&&this._emit("refusal.delta",{delta:s.delta.refusal,snapshot:a.message.refusal}),s.logprobs?.content!=null&&a.message?.role==="assistant"&&this._emit("logprobs.content.delta",{content:s.logprobs?.content,snapshot:a.logprobs?.content??[]}),s.logprobs?.refusal!=null&&a.message?.role==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:s.logprobs?.refusal,snapshot:a.logprobs?.refusal??[]});const l=W(this,Bt,"m",Bu).call(this,a);a.finish_reason&&(W(this,Bt,"m",Fm).call(this,a),l.current_tool_call_index!=null&&W(this,Bt,"m",qm).call(this,a,l.current_tool_call_index));for(const u of s.delta.tool_calls??[])l.current_tool_call_index!==u.index&&(W(this,Bt,"m",Fm).call(this,a),l.current_tool_call_index!=null&&W(this,Bt,"m",qm).call(this,a,l.current_tool_call_index)),l.current_tool_call_index=u.index;for(const u of s.delta.tool_calls??[]){const f=a.message.tool_calls?.[u.index];f?.type&&(f?.type==="function"?this._emit("tool_calls.function.arguments.delta",{name:f.function?.name,index:u.index,arguments:f.function.arguments,parsed_arguments:f.function.parsed_arguments,arguments_delta:u.function?.arguments??""}):(f?.type,void 0))}}},qm=function(n,r){if(W(this,Bt,"m",Bu).call(this,n).done_tool_calls.has(r))return;const a=n.message.tool_calls?.[r];if(!a)throw new Error("no tool call snapshot");if(!a.type)throw new Error("tool call snapshot missing `type`");if(a.type==="function"){const l=W(this,ps,"f")?.tools?.find(u=>Vf(u)&&u.function.name===a.function.name);this._emit("tool_calls.function.arguments.done",{name:a.function.name,index:r,arguments:a.function.arguments,parsed_arguments:lc(l)?l.$parseRaw(a.function.arguments):l?.function.strict?JSON.parse(a.function.arguments):null})}else a.type},Fm=function(n){const r=W(this,Bt,"m",Bu).call(this,n);if(n.message.content&&!r.content_done){r.content_done=!0;const s=W(this,Bt,"m",Vm).call(this);this._emit("content.done",{content:n.message.content,parsed:s?s.$parseRaw(n.message.content):null})}n.message.refusal&&!r.refusal_done&&(r.refusal_done=!0,this._emit("refusal.done",{refusal:n.message.refusal})),n.logprobs?.content&&!r.logprobs_content_done&&(r.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:n.logprobs.content})),n.logprobs?.refusal&&!r.logprobs_refusal_done&&(r.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:n.logprobs.refusal}))},$u=function(){if(this.ended)throw new Re("stream has ended, this shouldn't happen");const n=W(this,Gs,"f");if(!n)throw new Re("request ended without sending any chunks");return De(this,Gs,void 0),De(this,Aa,[]),zF(n,W(this,ps,"f"))},Vm=function(){const n=W(this,ps,"f")?.response_format;return f0(n)?n:null},xS=function(n){var r,s,a,l;let u=W(this,Gs,"f");const{choices:f,...d}=n;u?Object.assign(u,d):u=De(this,Gs,{...d,choices:[]});for(const{delta:m,finish_reason:p,index:y,logprobs:g=null,...v}of n.choices){let x=u.choices[y];if(x||(x=u.choices[y]={finish_reason:p,index:y,message:{},logprobs:g,...v}),g)if(!x.logprobs)x.logprobs=Object.assign({},g);else{const{content:I,refusal:P,...q}=g;Object.assign(x.logprobs,q),I&&((r=x.logprobs).content??(r.content=[]),x.logprobs.content.push(...I)),P&&((s=x.logprobs).refusal??(s.refusal=[]),x.logprobs.refusal.push(...P))}if(p&&(x.finish_reason=p,W(this,ps,"f")&&uT(W(this,ps,"f")))){if(p==="length")throw new HC;if(p==="content_filter")throw new GC}if(Object.assign(x,v),!m)continue;const{content:E,refusal:S,function_call:T,role:A,tool_calls:j,...D}=m;if(Object.assign(x.message,D),S&&(x.message.refusal=(x.message.refusal||"")+S),A&&(x.message.role=A),T&&(x.message.function_call?(T.name&&(x.message.function_call.name=T.name),T.arguments&&((a=x.message.function_call).arguments??(a.arguments=""),x.message.function_call.arguments+=T.arguments)):x.message.function_call=T),E&&(x.message.content=(x.message.content||"")+E,!x.message.refusal&&W(this,Bt,"m",Vm).call(this)&&(x.message.parsed=vS(x.message.content))),j){x.message.tool_calls||(x.message.tool_calls=[]);for(const{index:I,id:P,type:q,function:H,...z}of j){const Q=(l=x.message.tool_calls)[I]??(l[I]={});Object.assign(Q,z),P&&(Q.id=P),q&&(Q.type=q),H&&(Q.function??(Q.function={name:H.name??"",arguments:""})),H?.name&&(Q.function.name=H.name),H?.arguments&&(Q.function.arguments+=H.arguments,AF(W(this,ps,"f"),Q)&&(Q.function.parsed_arguments=vS(Q.function.arguments)))}}}return u},Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("chunk",s=>{const a=n.shift();a?a.resolve(s):e.push(s)}),this.on("end",()=>{r=!0;for(const s of n)s.resolve(void 0);n.length=0}),this.on("abort",s=>{r=!0;for(const a of n)a.reject(s);n.length=0}),this.on("error",s=>{r=!0;for(const a of n)a.reject(s);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((a,l)=>n.push({resolve:a,reject:l})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new qr(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function zF(t,e){const{id:n,choices:r,created:s,model:a,system_fingerprint:l,...u}=t,f={...u,id:n,choices:r.map(({message:d,finish_reason:m,index:p,logprobs:y,...g})=>{if(!m)throw new Re(`missing finish_reason for choice ${p}`);const{content:v=null,function_call:x,tool_calls:E,...S}=d,T=d.role;if(!T)throw new Re(`missing role for choice ${p}`);if(x){const{arguments:A,name:j}=x;if(A==null)throw new Re(`missing function_call.arguments for choice ${p}`);if(!j)throw new Re(`missing function_call.name for choice ${p}`);return{...g,message:{content:v,function_call:{arguments:A,name:j},role:T,refusal:d.refusal??null},finish_reason:m,index:p,logprobs:y}}return E?{...g,index:p,finish_reason:m,logprobs:y,message:{...S,role:T,content:v,refusal:d.refusal??null,tool_calls:E.map((A,j)=>{const{function:D,type:I,id:P,...q}=A,{arguments:H,name:z,...Q}=D||{};if(P==null)throw new Re(`missing choices[${p}].tool_calls[${j}].id
${Uu(t)}`);if(I==null)throw new Re(`missing choices[${p}].tool_calls[${j}].type
${Uu(t)}`);if(z==null)throw new Re(`missing choices[${p}].tool_calls[${j}].function.name
${Uu(t)}`);if(H==null)throw new Re(`missing choices[${p}].tool_calls[${j}].function.arguments
${Uu(t)}`);return{...q,id:P,type:I,function:{...Q,name:z,arguments:H}}})}}:{...g,message:{...S,content:v,role:T,refusal:d.refusal??null},finish_reason:m,index:p,logprobs:y}}),created:s,model:a,object:"chat.completion",...l?{system_fingerprint:l}:{}};return EF(f,e)}function Uu(t){return JSON.stringify(t)}class Qf extends Zl{static fromReadableStream(e){const n=new Qf(null);return n._run(()=>n._fromReadableStream(e)),n}static runTools(e,n,r){const s=new Qf(n),a={...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"runTools"}};return s._run(()=>s._runTools(e,n,a)),s}}let m0=class extends Ce{constructor(){super(...arguments),this.messages=new cT(this._client)}create(e,n){return this._client.post("/chat/completions",{body:e,...n,stream:e.stream??!1})}retrieve(e,n){return this._client.get(de`/chat/completions/${e}`,n)}update(e,n,r){return this._client.post(de`/chat/completions/${e}`,{body:n,...r})}list(e={},n){return this._client.getAPIList("/chat/completions",zt,{query:e,...n})}delete(e,n){return this._client.delete(de`/chat/completions/${e}`,n)}parse(e,n){return RF(e.tools),this._client.chat.completions.create(e,{...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"chat.completions.parse"}})._thenUnwrap(r=>d0(r,e))}runTools(e,n){return e.stream?Qf.runTools(this._client,e,n):p0.runTools(this._client,e,n)}stream(e,n){return Zl.createChatCompletion(this._client,e,n)}};m0.Messages=cT;class g0 extends Ce{constructor(){super(...arguments),this.completions=new m0(this._client)}}g0.Completions=m0;const OT=Symbol("brand.privateNullableHeaders");function*PF(t){if(!t)return;if(OT in t){const{values:r,nulls:s}=t;yield*r.entries();for(const a of s)yield[a,null];return}let e=!1,n;t instanceof Headers?n=t.entries():iS(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let r of n){const s=r[0];if(typeof s!="string")throw new TypeError("expected header name to be a string");const a=iS(r[1])?r[1]:[r[1]];let l=!1;for(const u of a)u!==void 0&&(e&&!l&&(l=!0,yield[s,null]),yield[s,u])}}const Se=t=>{const e=new Headers,n=new Set;for(const r of t){const s=new Set;for(const[a,l]of PF(r)){const u=a.toLowerCase();s.has(u)||(e.delete(a),s.add(u)),l===null?(e.delete(a),n.add(u)):(e.append(a,l),n.delete(u))}}return{[OT]:!0,values:e,nulls:n}};class NT extends Ce{create(e,n){return this._client.post("/audio/speech",{body:e,...n,headers:Se([{Accept:"application/octet-stream"},n?.headers]),__binaryResponse:!0})}}class IT extends Ce{create(e,n){return this._client.post("/audio/transcriptions",Di({body:e,...n,stream:e.stream??!1,__metadata:{model:e.model}},this._client))}}class MT extends Ce{create(e,n){return this._client.post("/audio/translations",Di({body:e,...n,__metadata:{model:e.model}},this._client))}}class cc extends Ce{constructor(){super(...arguments),this.transcriptions=new IT(this._client),this.translations=new MT(this._client),this.speech=new NT(this._client)}}cc.Transcriptions=IT;cc.Translations=MT;cc.Speech=NT;class DT extends Ce{create(e,n){return this._client.post("/batches",{body:e,...n})}retrieve(e,n){return this._client.get(de`/batches/${e}`,n)}list(e={},n){return this._client.getAPIList("/batches",zt,{query:e,...n})}cancel(e,n){return this._client.post(de`/batches/${e}/cancel`,n)}}class jT extends Ce{create(e,n){return this._client.post("/assistants",{body:e,...n,headers:Se([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}retrieve(e,n){return this._client.get(de`/assistants/${e}`,{...n,headers:Se([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}update(e,n,r){return this._client.post(de`/assistants/${e}`,{body:n,...r,headers:Se([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(e={},n){return this._client.getAPIList("/assistants",zt,{query:e,...n,headers:Se([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}delete(e,n){return this._client.delete(de`/assistants/${e}`,{...n,headers:Se([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}}let LT=class extends Ce{create(e,n){return this._client.post("/realtime/sessions",{body:e,...n,headers:Se([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}};class zT extends Ce{create(e,n){return this._client.post("/realtime/transcription_sessions",{body:e,...n,headers:Se([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}}let wd=class extends Ce{constructor(){super(...arguments),this.sessions=new LT(this._client),this.transcriptionSessions=new zT(this._client)}};wd.Sessions=LT;wd.TranscriptionSessions=zT;class PT extends Ce{create(e,n){return this._client.post("/chatkit/sessions",{body:e,...n,headers:Se([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}cancel(e,n){return this._client.post(de`/chatkit/sessions/${e}/cancel`,{...n,headers:Se([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}}let BT=class extends Ce{retrieve(e,n){return this._client.get(de`/chatkit/threads/${e}`,{...n,headers:Se([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}list(e={},n){return this._client.getAPIList("/chatkit/threads",Ff,{query:e,...n,headers:Se([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}delete(e,n){return this._client.delete(de`/chatkit/threads/${e}`,{...n,headers:Se([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}listItems(e,n={},r){return this._client.getAPIList(de`/chatkit/threads/${e}/items`,Ff,{query:n,...r,headers:Se([{"OpenAI-Beta":"chatkit_beta=v1"},r?.headers])})}};class Sd extends Ce{constructor(){super(...arguments),this.sessions=new PT(this._client),this.threads=new BT(this._client)}}Sd.Sessions=PT;Sd.Threads=BT;class $T extends Ce{create(e,n,r){return this._client.post(de`/threads/${e}/messages`,{body:n,...r,headers:Se([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}retrieve(e,n,r){const{thread_id:s}=n;return this._client.get(de`/threads/${s}/messages/${e}`,{...r,headers:Se([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}update(e,n,r){const{thread_id:s,...a}=n;return this._client.post(de`/threads/${s}/messages/${e}`,{body:a,...r,headers:Se([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(e,n={},r){return this._client.getAPIList(de`/threads/${e}/messages`,zt,{query:n,...r,headers:Se([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}delete(e,n,r){const{thread_id:s}=n;return this._client.delete(de`/threads/${s}/messages/${e}`,{...r,headers:Se([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}}class UT extends Ce{retrieve(e,n,r){const{thread_id:s,run_id:a,...l}=n;return this._client.get(de`/threads/${s}/runs/${a}/steps/${e}`,{query:l,...r,headers:Se([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(e,n,r){const{thread_id:s,...a}=n;return this._client.getAPIList(de`/threads/${s}/runs/${e}/steps`,zt,{query:a,...r,headers:Se([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}}const BF=t=>{if(typeof Buffer<"u"){const e=Buffer.from(t,"base64");return Array.from(new Float32Array(e.buffer,e.byteOffset,e.length/Float32Array.BYTES_PER_ELEMENT))}else{const e=atob(t),n=e.length,r=new Uint8Array(n);for(let s=0;s<n;s++)r[s]=e.charCodeAt(s);return Array.from(new Float32Array(r.buffer))}};var $F={};const Ra=t=>{if(typeof globalThis.process<"u")return $F?.[t]?.trim()??void 0;if(typeof globalThis.Deno<"u")return globalThis.Deno.env?.get?.(t)?.trim()};var ln,Oi,ty,$r,af,Ar,Ni,Ba,Ti,Jf,er,of,lf,Dl,vl,xl,wS,SS,kS,ES,CS,TS,AS;class jl extends h0{constructor(){super(...arguments),ln.add(this),ty.set(this,[]),$r.set(this,{}),af.set(this,{}),Ar.set(this,void 0),Ni.set(this,void 0),Ba.set(this,void 0),Ti.set(this,void 0),Jf.set(this,void 0),er.set(this,void 0),of.set(this,void 0),lf.set(this,void 0),Dl.set(this,void 0)}[(ty=new WeakMap,$r=new WeakMap,af=new WeakMap,Ar=new WeakMap,Ni=new WeakMap,Ba=new WeakMap,Ti=new WeakMap,Jf=new WeakMap,er=new WeakMap,of=new WeakMap,lf=new WeakMap,Dl=new WeakMap,ln=new WeakSet,Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("event",s=>{const a=n.shift();a?a.resolve(s):e.push(s)}),this.on("end",()=>{r=!0;for(const s of n)s.resolve(void 0);n.length=0}),this.on("abort",s=>{r=!0;for(const a of n)a.reject(s);n.length=0}),this.on("error",s=>{r=!0;for(const a of n)a.reject(s);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((a,l)=>n.push({resolve:a,reject:l})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){const n=new Oi;return n._run(()=>n._fromReadableStream(e)),n}async _fromReadableStream(e,n){const r=n?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),this._connected();const s=qr.fromReadableStream(e,this.controller);for await(const a of s)W(this,ln,"m",vl).call(this,a);if(s.controller.signal?.aborted)throw new wr;return this._addRun(W(this,ln,"m",xl).call(this))}toReadableStream(){return new qr(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,n,r,s){const a=new Oi;return a._run(()=>a._runToolAssistantStream(e,n,r,{...s,headers:{...s?.headers,"X-Stainless-Helper-Method":"stream"}})),a}async _createToolAssistantStream(e,n,r,s){const a=s?.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort()));const l={...r,stream:!0},u=await e.submitToolOutputs(n,l,{...s,signal:this.controller.signal});this._connected();for await(const f of u)W(this,ln,"m",vl).call(this,f);if(u.controller.signal?.aborted)throw new wr;return this._addRun(W(this,ln,"m",xl).call(this))}static createThreadAssistantStream(e,n,r){const s=new Oi;return s._run(()=>s._threadAssistantStream(e,n,{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),s}static createAssistantStream(e,n,r,s){const a=new Oi;return a._run(()=>a._runAssistantStream(e,n,r,{...s,headers:{...s?.headers,"X-Stainless-Helper-Method":"stream"}})),a}currentEvent(){return W(this,of,"f")}currentRun(){return W(this,lf,"f")}currentMessageSnapshot(){return W(this,Ar,"f")}currentRunStepSnapshot(){return W(this,Dl,"f")}async finalRunSteps(){return await this.done(),Object.values(W(this,$r,"f"))}async finalMessages(){return await this.done(),Object.values(W(this,af,"f"))}async finalRun(){if(await this.done(),!W(this,Ni,"f"))throw Error("Final run was not received.");return W(this,Ni,"f")}async _createThreadAssistantStream(e,n,r){const s=r?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort()));const a={...n,stream:!0},l=await e.createAndRun(a,{...r,signal:this.controller.signal});this._connected();for await(const u of l)W(this,ln,"m",vl).call(this,u);if(l.controller.signal?.aborted)throw new wr;return this._addRun(W(this,ln,"m",xl).call(this))}async _createAssistantStream(e,n,r,s){const a=s?.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort()));const l={...r,stream:!0},u=await e.create(n,l,{...s,signal:this.controller.signal});this._connected();for await(const f of u)W(this,ln,"m",vl).call(this,f);if(u.controller.signal?.aborted)throw new wr;return this._addRun(W(this,ln,"m",xl).call(this))}static accumulateDelta(e,n){for(const[r,s]of Object.entries(n)){if(!e.hasOwnProperty(r)){e[r]=s;continue}let a=e[r];if(a==null){e[r]=s;continue}if(r==="index"||r==="type"){e[r]=s;continue}if(typeof a=="string"&&typeof s=="string")a+=s;else if(typeof a=="number"&&typeof s=="number")a+=s;else if(zm(a)&&zm(s))a=this.accumulateDelta(a,s);else if(Array.isArray(a)&&Array.isArray(s)){if(a.every(l=>typeof l=="string"||typeof l=="number")){a.push(...s);continue}for(const l of s){if(!zm(l))throw new Error(`Expected array delta entry to be an object but got: ${l}`);const u=l.index;if(u==null)throw console.error(l),new Error("Expected array delta entry to have an `index` property");if(typeof u!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${u}`);const f=a[u];f==null?a.push(l):a[u]=this.accumulateDelta(f,l)}continue}else throw Error(`Unhandled record type: ${r}, deltaValue: ${s}, accValue: ${a}`);e[r]=a}return e}_addRun(e){return e}async _threadAssistantStream(e,n,r){return await this._createThreadAssistantStream(n,e,r)}async _runAssistantStream(e,n,r,s){return await this._createAssistantStream(n,e,r,s)}async _runToolAssistantStream(e,n,r,s){return await this._createToolAssistantStream(n,e,r,s)}}Oi=jl,vl=function(e){if(!this.ended)switch(De(this,of,e),W(this,ln,"m",kS).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":W(this,ln,"m",AS).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":W(this,ln,"m",SS).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":W(this,ln,"m",wS).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},xl=function(){if(this.ended)throw new Re("stream has ended, this shouldn't happen");if(!W(this,Ni,"f"))throw Error("Final run has not been received");return W(this,Ni,"f")},wS=function(e){const[n,r]=W(this,ln,"m",CS).call(this,e,W(this,Ar,"f"));De(this,Ar,n),W(this,af,"f")[n.id]=n;for(const s of r){const a=n.content[s.index];a?.type=="text"&&this._emit("textCreated",a.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,n),e.data.delta.content)for(const s of e.data.delta.content){if(s.type=="text"&&s.text){let a=s.text,l=n.content[s.index];if(l&&l.type=="text")this._emit("textDelta",a,l.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(s.index!=W(this,Ba,"f")){if(W(this,Ti,"f"))switch(W(this,Ti,"f").type){case"text":this._emit("textDone",W(this,Ti,"f").text,W(this,Ar,"f"));break;case"image_file":this._emit("imageFileDone",W(this,Ti,"f").image_file,W(this,Ar,"f"));break}De(this,Ba,s.index)}De(this,Ti,n.content[s.index])}break;case"thread.message.completed":case"thread.message.incomplete":if(W(this,Ba,"f")!==void 0){const s=e.data.content[W(this,Ba,"f")];if(s)switch(s.type){case"image_file":this._emit("imageFileDone",s.image_file,W(this,Ar,"f"));break;case"text":this._emit("textDone",s.text,W(this,Ar,"f"));break}}W(this,Ar,"f")&&this._emit("messageDone",e.data),De(this,Ar,void 0)}},SS=function(e){const n=W(this,ln,"m",ES).call(this,e);switch(De(this,Dl,n),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":const r=e.data.delta;if(r.step_details&&r.step_details.type=="tool_calls"&&r.step_details.tool_calls&&n.step_details.type=="tool_calls")for(const a of r.step_details.tool_calls)a.index==W(this,Jf,"f")?this._emit("toolCallDelta",a,n.step_details.tool_calls[a.index]):(W(this,er,"f")&&this._emit("toolCallDone",W(this,er,"f")),De(this,Jf,a.index),De(this,er,n.step_details.tool_calls[a.index]),W(this,er,"f")&&this._emit("toolCallCreated",W(this,er,"f")));this._emit("runStepDelta",e.data.delta,n);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":De(this,Dl,void 0),e.data.step_details.type=="tool_calls"&&W(this,er,"f")&&(this._emit("toolCallDone",W(this,er,"f")),De(this,er,void 0)),this._emit("runStepDone",e.data,n);break}},kS=function(e){W(this,ty,"f").push(e),this._emit("event",e)},ES=function(e){switch(e.event){case"thread.run.step.created":return W(this,$r,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let n=W(this,$r,"f")[e.data.id];if(!n)throw Error("Received a RunStepDelta before creation of a snapshot");let r=e.data;if(r.delta){const s=Oi.accumulateDelta(n,r.delta);W(this,$r,"f")[e.data.id]=s}return W(this,$r,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":W(this,$r,"f")[e.data.id]=e.data;break}if(W(this,$r,"f")[e.data.id])return W(this,$r,"f")[e.data.id];throw new Error("No snapshot available")},CS=function(e,n){let r=[];switch(e.event){case"thread.message.created":return[e.data,r];case"thread.message.delta":if(!n)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let s=e.data;if(s.delta.content)for(const a of s.delta.content)if(a.index in n.content){let l=n.content[a.index];n.content[a.index]=W(this,ln,"m",TS).call(this,a,l)}else n.content[a.index]=a,r.push(a);return[n,r];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(n)return[n,r];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},TS=function(e,n){return Oi.accumulateDelta(n,e)},AS=function(e){switch(De(this,lf,e.data),e.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":case"thread.run.incomplete":De(this,Ni,e.data),W(this,er,"f")&&(this._emit("toolCallDone",W(this,er,"f")),De(this,er,void 0));break}};let y0=class extends Ce{constructor(){super(...arguments),this.steps=new UT(this._client)}create(e,n,r){const{include:s,...a}=n;return this._client.post(de`/threads/${e}/runs`,{query:{include:s},body:a,...r,headers:Se([{"OpenAI-Beta":"assistants=v2"},r?.headers]),stream:n.stream??!1})}retrieve(e,n,r){const{thread_id:s}=n;return this._client.get(de`/threads/${s}/runs/${e}`,{...r,headers:Se([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}update(e,n,r){const{thread_id:s,...a}=n;return this._client.post(de`/threads/${s}/runs/${e}`,{body:a,...r,headers:Se([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(e,n={},r){return this._client.getAPIList(de`/threads/${e}/runs`,zt,{query:n,...r,headers:Se([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}cancel(e,n,r){const{thread_id:s}=n;return this._client.post(de`/threads/${s}/runs/${e}/cancel`,{...r,headers:Se([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}async createAndPoll(e,n,r){const s=await this.create(e,n,r);return await this.poll(s.id,{thread_id:e},r)}createAndStream(e,n,r){return jl.createAssistantStream(e,this._client.beta.threads.runs,n,r)}async poll(e,n,r){const s=Se([r?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":r?.pollIntervalMs?.toString()??void 0}]);for(;;){const{data:a,response:l}=await this.retrieve(e,n,{...r,headers:{...r?.headers,...s}}).withResponse();switch(a.status){case"queued":case"in_progress":case"cancelling":let u=5e3;if(r?.pollIntervalMs)u=r.pollIntervalMs;else{const f=l.headers.get("openai-poll-after-ms");if(f){const d=parseInt(f);isNaN(d)||(u=d)}}await oc(u);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return a}}}stream(e,n,r){return jl.createAssistantStream(e,this._client.beta.threads.runs,n,r)}submitToolOutputs(e,n,r){const{thread_id:s,...a}=n;return this._client.post(de`/threads/${s}/runs/${e}/submit_tool_outputs`,{body:a,...r,headers:Se([{"OpenAI-Beta":"assistants=v2"},r?.headers]),stream:n.stream??!1})}async submitToolOutputsAndPoll(e,n,r){const s=await this.submitToolOutputs(e,n,r);return await this.poll(s.id,n,r)}submitToolOutputsStream(e,n,r){return jl.createToolAssistantStream(e,this._client.beta.threads.runs,n,r)}};y0.Steps=UT;class kd extends Ce{constructor(){super(...arguments),this.runs=new y0(this._client),this.messages=new $T(this._client)}create(e={},n){return this._client.post("/threads",{body:e,...n,headers:Se([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}retrieve(e,n){return this._client.get(de`/threads/${e}`,{...n,headers:Se([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}update(e,n,r){return this._client.post(de`/threads/${e}`,{body:n,...r,headers:Se([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}delete(e,n){return this._client.delete(de`/threads/${e}`,{...n,headers:Se([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}createAndRun(e,n){return this._client.post("/threads/runs",{body:e,...n,headers:Se([{"OpenAI-Beta":"assistants=v2"},n?.headers]),stream:e.stream??!1})}async createAndRunPoll(e,n){const r=await this.createAndRun(e,n);return await this.runs.poll(r.id,{thread_id:r.thread_id},n)}createAndRunStream(e,n){return jl.createThreadAssistantStream(e,this._client.beta.threads,n)}}kd.Runs=y0;kd.Messages=$T;class so extends Ce{constructor(){super(...arguments),this.realtime=new wd(this._client),this.chatkit=new Sd(this._client),this.assistants=new jT(this._client),this.threads=new kd(this._client)}}so.Realtime=wd;so.ChatKit=Sd;so.Assistants=jT;so.Threads=kd;class qT extends Ce{create(e,n){return this._client.post("/completions",{body:e,...n,stream:e.stream??!1})}}class FT extends Ce{retrieve(e,n,r){const{container_id:s}=n;return this._client.get(de`/containers/${s}/files/${e}/content`,{...r,headers:Se([{Accept:"application/binary"},r?.headers]),__binaryResponse:!0})}}let b0=class extends Ce{constructor(){super(...arguments),this.content=new FT(this._client)}create(e,n,r){return this._client.post(de`/containers/${e}/files`,Di({body:n,...r},this._client))}retrieve(e,n,r){const{container_id:s}=n;return this._client.get(de`/containers/${s}/files/${e}`,r)}list(e,n={},r){return this._client.getAPIList(de`/containers/${e}/files`,zt,{query:n,...r})}delete(e,n,r){const{container_id:s}=n;return this._client.delete(de`/containers/${s}/files/${e}`,{...r,headers:Se([{Accept:"*/*"},r?.headers])})}};b0.Content=FT;class _0 extends Ce{constructor(){super(...arguments),this.files=new b0(this._client)}create(e,n){return this._client.post("/containers",{body:e,...n})}retrieve(e,n){return this._client.get(de`/containers/${e}`,n)}list(e={},n){return this._client.getAPIList("/containers",zt,{query:e,...n})}delete(e,n){return this._client.delete(de`/containers/${e}`,{...n,headers:Se([{Accept:"*/*"},n?.headers])})}}_0.Files=b0;class VT extends Ce{create(e,n,r){const{include:s,...a}=n;return this._client.post(de`/conversations/${e}/items`,{query:{include:s},body:a,...r})}retrieve(e,n,r){const{conversation_id:s,...a}=n;return this._client.get(de`/conversations/${s}/items/${e}`,{query:a,...r})}list(e,n={},r){return this._client.getAPIList(de`/conversations/${e}/items`,Ff,{query:n,...r})}delete(e,n,r){const{conversation_id:s}=n;return this._client.delete(de`/conversations/${s}/items/${e}`,r)}}class v0 extends Ce{constructor(){super(...arguments),this.items=new VT(this._client)}create(e={},n){return this._client.post("/conversations",{body:e,...n})}retrieve(e,n){return this._client.get(de`/conversations/${e}`,n)}update(e,n,r){return this._client.post(de`/conversations/${e}`,{body:n,...r})}delete(e,n){return this._client.delete(de`/conversations/${e}`,n)}}v0.Items=VT;class HT extends Ce{create(e,n){const r=!!e.encoding_format;let s=r?e.encoding_format:"base64";r&&on(this._client).debug("embeddings/user defined encoding_format:",e.encoding_format);const a=this._client.post("/embeddings",{body:{...e,encoding_format:s},...n});return r?a:(on(this._client).debug("embeddings/decoding base64 embeddings from base64"),a._thenUnwrap(l=>(l&&l.data&&l.data.forEach(u=>{const f=u.embedding;u.embedding=BF(f)}),l)))}}class GT extends Ce{retrieve(e,n,r){const{eval_id:s,run_id:a}=n;return this._client.get(de`/evals/${s}/runs/${a}/output_items/${e}`,r)}list(e,n,r){const{eval_id:s,...a}=n;return this._client.getAPIList(de`/evals/${s}/runs/${e}/output_items`,zt,{query:a,...r})}}class x0 extends Ce{constructor(){super(...arguments),this.outputItems=new GT(this._client)}create(e,n,r){return this._client.post(de`/evals/${e}/runs`,{body:n,...r})}retrieve(e,n,r){const{eval_id:s}=n;return this._client.get(de`/evals/${s}/runs/${e}`,r)}list(e,n={},r){return this._client.getAPIList(de`/evals/${e}/runs`,zt,{query:n,...r})}delete(e,n,r){const{eval_id:s}=n;return this._client.delete(de`/evals/${s}/runs/${e}`,r)}cancel(e,n,r){const{eval_id:s}=n;return this._client.post(de`/evals/${s}/runs/${e}`,r)}}x0.OutputItems=GT;class w0 extends Ce{constructor(){super(...arguments),this.runs=new x0(this._client)}create(e,n){return this._client.post("/evals",{body:e,...n})}retrieve(e,n){return this._client.get(de`/evals/${e}`,n)}update(e,n,r){return this._client.post(de`/evals/${e}`,{body:n,...r})}list(e={},n){return this._client.getAPIList("/evals",zt,{query:e,...n})}delete(e,n){return this._client.delete(de`/evals/${e}`,n)}}w0.Runs=x0;let KT=class extends Ce{create(e,n){return this._client.post("/files",Di({body:e,...n},this._client))}retrieve(e,n){return this._client.get(de`/files/${e}`,n)}list(e={},n){return this._client.getAPIList("/files",zt,{query:e,...n})}delete(e,n){return this._client.delete(de`/files/${e}`,n)}content(e,n){return this._client.get(de`/files/${e}/content`,{...n,headers:Se([{Accept:"application/binary"},n?.headers]),__binaryResponse:!0})}async waitForProcessing(e,{pollInterval:n=5e3,maxWait:r=1800*1e3}={}){const s=new Set(["processed","error","deleted"]),a=Date.now();let l=await this.retrieve(e);for(;!l.status||!s.has(l.status);)if(await oc(n),l=await this.retrieve(e),Date.now()-a>r)throw new o0({message:`Giving up on waiting for file ${e} to finish processing after ${r} milliseconds.`});return l}};class ZT extends Ce{}let QT=class extends Ce{run(e,n){return this._client.post("/fine_tuning/alpha/graders/run",{body:e,...n})}validate(e,n){return this._client.post("/fine_tuning/alpha/graders/validate",{body:e,...n})}};class S0 extends Ce{constructor(){super(...arguments),this.graders=new QT(this._client)}}S0.Graders=QT;class JT extends Ce{create(e,n,r){return this._client.getAPIList(de`/fine_tuning/checkpoints/${e}/permissions`,xd,{body:n,method:"post",...r})}retrieve(e,n={},r){return this._client.get(de`/fine_tuning/checkpoints/${e}/permissions`,{query:n,...r})}delete(e,n,r){const{fine_tuned_model_checkpoint:s}=n;return this._client.delete(de`/fine_tuning/checkpoints/${s}/permissions/${e}`,r)}}let k0=class extends Ce{constructor(){super(...arguments),this.permissions=new JT(this._client)}};k0.Permissions=JT;class YT extends Ce{list(e,n={},r){return this._client.getAPIList(de`/fine_tuning/jobs/${e}/checkpoints`,zt,{query:n,...r})}}class E0 extends Ce{constructor(){super(...arguments),this.checkpoints=new YT(this._client)}create(e,n){return this._client.post("/fine_tuning/jobs",{body:e,...n})}retrieve(e,n){return this._client.get(de`/fine_tuning/jobs/${e}`,n)}list(e={},n){return this._client.getAPIList("/fine_tuning/jobs",zt,{query:e,...n})}cancel(e,n){return this._client.post(de`/fine_tuning/jobs/${e}/cancel`,n)}listEvents(e,n={},r){return this._client.getAPIList(de`/fine_tuning/jobs/${e}/events`,zt,{query:n,...r})}pause(e,n){return this._client.post(de`/fine_tuning/jobs/${e}/pause`,n)}resume(e,n){return this._client.post(de`/fine_tuning/jobs/${e}/resume`,n)}}E0.Checkpoints=YT;class io extends Ce{constructor(){super(...arguments),this.methods=new ZT(this._client),this.jobs=new E0(this._client),this.checkpoints=new k0(this._client),this.alpha=new S0(this._client)}}io.Methods=ZT;io.Jobs=E0;io.Checkpoints=k0;io.Alpha=S0;class XT extends Ce{}class C0 extends Ce{constructor(){super(...arguments),this.graderModels=new XT(this._client)}}C0.GraderModels=XT;class WT extends Ce{createVariation(e,n){return this._client.post("/images/variations",Di({body:e,...n},this._client))}edit(e,n){return this._client.post("/images/edits",Di({body:e,...n,stream:e.stream??!1},this._client))}generate(e,n){return this._client.post("/images/generations",{body:e,...n,stream:e.stream??!1})}}class eA extends Ce{retrieve(e,n){return this._client.get(de`/models/${e}`,n)}list(e){return this._client.getAPIList("/models",xd,e)}delete(e,n){return this._client.delete(de`/models/${e}`,n)}}class tA extends Ce{create(e,n){return this._client.post("/moderations",{body:e,...n})}}class nA extends Ce{accept(e,n,r){return this._client.post(de`/realtime/calls/${e}/accept`,{body:n,...r,headers:Se([{Accept:"*/*"},r?.headers])})}hangup(e,n){return this._client.post(de`/realtime/calls/${e}/hangup`,{...n,headers:Se([{Accept:"*/*"},n?.headers])})}refer(e,n,r){return this._client.post(de`/realtime/calls/${e}/refer`,{body:n,...r,headers:Se([{Accept:"*/*"},r?.headers])})}reject(e,n={},r){return this._client.post(de`/realtime/calls/${e}/reject`,{body:n,...r,headers:Se([{Accept:"*/*"},r?.headers])})}}class rA extends Ce{create(e,n){return this._client.post("/realtime/client_secrets",{body:e,...n})}}class Ed extends Ce{constructor(){super(...arguments),this.clientSecrets=new rA(this._client),this.calls=new nA(this._client)}}Ed.ClientSecrets=rA;Ed.Calls=nA;function UF(t,e){return!e||!FF(e)?{...t,output_parsed:null,output:t.output.map(n=>n.type==="function_call"?{...n,parsed_arguments:null}:n.type==="message"?{...n,content:n.content.map(r=>({...r,parsed:null}))}:n)}:sA(t,e)}function sA(t,e){const n=t.output.map(s=>{if(s.type==="function_call")return{...s,parsed_arguments:GF(e,s)};if(s.type==="message"){const a=s.content.map(l=>l.type==="output_text"?{...l,parsed:qF(e,l.text)}:l);return{...s,content:a}}return s}),r=Object.assign({},t,{output:n});return Object.getOwnPropertyDescriptor(t,"output_text")||ny(r),Object.defineProperty(r,"output_parsed",{enumerable:!0,get(){for(const s of r.output)if(s.type==="message"){for(const a of s.content)if(a.type==="output_text"&&a.parsed!==null)return a.parsed}return null}}),r}function qF(t,e){return t.text?.format?.type!=="json_schema"?null:"$parseRaw"in t.text?.format?(t.text?.format).$parseRaw(e):JSON.parse(e)}function FF(t){return!!f0(t.text?.format)}function VF(t){return t?.$brand==="auto-parseable-tool"}function HF(t,e){return t.find(n=>n.type==="function"&&n.name===e)}function GF(t,e){const n=HF(t.tools??[],e.name);return{...e,...e,parsed_arguments:VF(n)?n.$parseRaw(e.arguments):n?.strict?JSON.parse(e.arguments):null}}function ny(t){const e=[];for(const n of t.output)if(n.type==="message")for(const r of n.content)r.type==="output_text"&&e.push(r.text);t.output_text=e.join("")}var Oa,qu,Ks,Fu,RS,OS,NS,IS;class T0 extends h0{constructor(e){super(),Oa.add(this),qu.set(this,void 0),Ks.set(this,void 0),Fu.set(this,void 0),De(this,qu,e)}static createResponse(e,n,r){const s=new T0(n);return s._run(()=>s._createOrRetrieveResponse(e,n,{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),s}async _createOrRetrieveResponse(e,n,r){const s=r?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),W(this,Oa,"m",RS).call(this);let a,l=null;"response_id"in n?(a=await e.responses.retrieve(n.response_id,{stream:!0},{...r,signal:this.controller.signal,stream:!0}),l=n.starting_after??null):a=await e.responses.create({...n,stream:!0},{...r,signal:this.controller.signal}),this._connected();for await(const u of a)W(this,Oa,"m",OS).call(this,u,l);if(a.controller.signal?.aborted)throw new wr;return W(this,Oa,"m",NS).call(this)}[(qu=new WeakMap,Ks=new WeakMap,Fu=new WeakMap,Oa=new WeakSet,RS=function(){this.ended||De(this,Ks,void 0)},OS=function(n,r){if(this.ended)return;const s=(l,u)=>{(r==null||u.sequence_number>r)&&this._emit(l,u)},a=W(this,Oa,"m",IS).call(this,n);switch(s("event",n),n.type){case"response.output_text.delta":{const l=a.output[n.output_index];if(!l)throw new Re(`missing output at index ${n.output_index}`);if(l.type==="message"){const u=l.content[n.content_index];if(!u)throw new Re(`missing content at index ${n.content_index}`);if(u.type!=="output_text")throw new Re(`expected content to be 'output_text', got ${u.type}`);s("response.output_text.delta",{...n,snapshot:u.text})}break}case"response.function_call_arguments.delta":{const l=a.output[n.output_index];if(!l)throw new Re(`missing output at index ${n.output_index}`);l.type==="function_call"&&s("response.function_call_arguments.delta",{...n,snapshot:l.arguments});break}default:s(n.type,n);break}},NS=function(){if(this.ended)throw new Re("stream has ended, this shouldn't happen");const n=W(this,Ks,"f");if(!n)throw new Re("request ended without sending any events");De(this,Ks,void 0);const r=KF(n,W(this,qu,"f"));return De(this,Fu,r),r},IS=function(n){let r=W(this,Ks,"f");if(!r){if(n.type!=="response.created")throw new Re(`When snapshot hasn't been set yet, expected 'response.created' event, got ${n.type}`);return r=De(this,Ks,n.response),r}switch(n.type){case"response.output_item.added":{r.output.push(n.item);break}case"response.content_part.added":{const s=r.output[n.output_index];if(!s)throw new Re(`missing output at index ${n.output_index}`);const a=s.type,l=n.part;a==="message"&&l.type!=="reasoning_text"?s.content.push(l):a==="reasoning"&&l.type==="reasoning_text"&&(s.content||(s.content=[]),s.content.push(l));break}case"response.output_text.delta":{const s=r.output[n.output_index];if(!s)throw new Re(`missing output at index ${n.output_index}`);if(s.type==="message"){const a=s.content[n.content_index];if(!a)throw new Re(`missing content at index ${n.content_index}`);if(a.type!=="output_text")throw new Re(`expected content to be 'output_text', got ${a.type}`);a.text+=n.delta}break}case"response.function_call_arguments.delta":{const s=r.output[n.output_index];if(!s)throw new Re(`missing output at index ${n.output_index}`);s.type==="function_call"&&(s.arguments+=n.delta);break}case"response.reasoning_text.delta":{const s=r.output[n.output_index];if(!s)throw new Re(`missing output at index ${n.output_index}`);if(s.type==="reasoning"){const a=s.content?.[n.content_index];if(!a)throw new Re(`missing content at index ${n.content_index}`);if(a.type!=="reasoning_text")throw new Re(`expected content to be 'reasoning_text', got ${a.type}`);a.text+=n.delta}break}case"response.completed":{De(this,Ks,n.response);break}}return r},Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("event",s=>{const a=n.shift();a?a.resolve(s):e.push(s)}),this.on("end",()=>{r=!0;for(const s of n)s.resolve(void 0);n.length=0}),this.on("abort",s=>{r=!0;for(const a of n)a.reject(s);n.length=0}),this.on("error",s=>{r=!0;for(const a of n)a.reject(s);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((a,l)=>n.push({resolve:a,reject:l})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();const e=W(this,Fu,"f");if(!e)throw new Re("stream ended without producing a ChatCompletion");return e}}function KF(t,e){return UF(t,e)}class iA extends Ce{list(e,n={},r){return this._client.getAPIList(de`/responses/${e}/input_items`,zt,{query:n,...r})}}class aA extends Ce{count(e={},n){return this._client.post("/responses/input_tokens",{body:e,...n})}}class Cd extends Ce{constructor(){super(...arguments),this.inputItems=new iA(this._client),this.inputTokens=new aA(this._client)}create(e,n){return this._client.post("/responses",{body:e,...n,stream:e.stream??!1})._thenUnwrap(r=>("object"in r&&r.object==="response"&&ny(r),r))}retrieve(e,n={},r){return this._client.get(de`/responses/${e}`,{query:n,...r,stream:n?.stream??!1})._thenUnwrap(s=>("object"in s&&s.object==="response"&&ny(s),s))}delete(e,n){return this._client.delete(de`/responses/${e}`,{...n,headers:Se([{Accept:"*/*"},n?.headers])})}parse(e,n){return this._client.responses.create(e,n)._thenUnwrap(r=>sA(r,e))}stream(e,n){return T0.createResponse(this._client,e,n)}cancel(e,n){return this._client.post(de`/responses/${e}/cancel`,n)}compact(e,n){return this._client.post("/responses/compact",{body:e,...n})}}Cd.InputItems=iA;Cd.InputTokens=aA;class oA extends Ce{create(e,n,r){return this._client.post(de`/uploads/${e}/parts`,Di({body:n,...r},this._client))}}class A0 extends Ce{constructor(){super(...arguments),this.parts=new oA(this._client)}create(e,n){return this._client.post("/uploads",{body:e,...n})}cancel(e,n){return this._client.post(de`/uploads/${e}/cancel`,n)}complete(e,n,r){return this._client.post(de`/uploads/${e}/complete`,{body:n,...r})}}A0.Parts=oA;const ZF=async t=>{const e=await Promise.allSettled(t),n=e.filter(s=>s.status==="rejected");if(n.length){for(const s of n)console.error(s.reason);throw new Error(`${n.length} promise(s) failed - see the above errors`)}const r=[];for(const s of e)s.status==="fulfilled"&&r.push(s.value);return r};class lA extends Ce{create(e,n,r){return this._client.post(de`/vector_stores/${e}/file_batches`,{body:n,...r,headers:Se([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}retrieve(e,n,r){const{vector_store_id:s}=n;return this._client.get(de`/vector_stores/${s}/file_batches/${e}`,{...r,headers:Se([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}cancel(e,n,r){const{vector_store_id:s}=n;return this._client.post(de`/vector_stores/${s}/file_batches/${e}/cancel`,{...r,headers:Se([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}async createAndPoll(e,n,r){const s=await this.create(e,n);return await this.poll(e,s.id,r)}listFiles(e,n,r){const{vector_store_id:s,...a}=n;return this._client.getAPIList(de`/vector_stores/${s}/file_batches/${e}/files`,zt,{query:a,...r,headers:Se([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}async poll(e,n,r){const s=Se([r?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":r?.pollIntervalMs?.toString()??void 0}]);for(;;){const{data:a,response:l}=await this.retrieve(n,{vector_store_id:e},{...r,headers:s}).withResponse();switch(a.status){case"in_progress":let u=5e3;if(r?.pollIntervalMs)u=r.pollIntervalMs;else{const f=l.headers.get("openai-poll-after-ms");if(f){const d=parseInt(f);isNaN(d)||(u=d)}}await oc(u);break;case"failed":case"cancelled":case"completed":return a}}}async uploadAndPoll(e,{files:n,fileIds:r=[]},s){if(n==null||n.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const a=s?.maxConcurrency??5,l=Math.min(a,n.length),u=this._client,f=n.values(),d=[...r];async function m(y){for(let g of y){const v=await u.files.create({file:g,purpose:"assistants"},s);d.push(v.id)}}const p=Array(l).fill(f).map(m);return await ZF(p),await this.createAndPoll(e,{file_ids:d})}}class cA extends Ce{create(e,n,r){return this._client.post(de`/vector_stores/${e}/files`,{body:n,...r,headers:Se([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}retrieve(e,n,r){const{vector_store_id:s}=n;return this._client.get(de`/vector_stores/${s}/files/${e}`,{...r,headers:Se([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}update(e,n,r){const{vector_store_id:s,...a}=n;return this._client.post(de`/vector_stores/${s}/files/${e}`,{body:a,...r,headers:Se([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(e,n={},r){return this._client.getAPIList(de`/vector_stores/${e}/files`,zt,{query:n,...r,headers:Se([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}delete(e,n,r){const{vector_store_id:s}=n;return this._client.delete(de`/vector_stores/${s}/files/${e}`,{...r,headers:Se([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}async createAndPoll(e,n,r){const s=await this.create(e,n,r);return await this.poll(e,s.id,r)}async poll(e,n,r){const s=Se([r?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":r?.pollIntervalMs?.toString()??void 0}]);for(;;){const a=await this.retrieve(n,{vector_store_id:e},{...r,headers:s}).withResponse(),l=a.data;switch(l.status){case"in_progress":let u=5e3;if(r?.pollIntervalMs)u=r.pollIntervalMs;else{const f=a.response.headers.get("openai-poll-after-ms");if(f){const d=parseInt(f);isNaN(d)||(u=d)}}await oc(u);break;case"failed":case"completed":return l}}}async upload(e,n,r){const s=await this._client.files.create({file:n,purpose:"assistants"},r);return this.create(e,{file_id:s.id},r)}async uploadAndPoll(e,n,r){const s=await this.upload(e,n,r);return await this.poll(e,s.id,r)}content(e,n,r){const{vector_store_id:s}=n;return this._client.getAPIList(de`/vector_stores/${s}/files/${e}/content`,xd,{...r,headers:Se([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}}class Td extends Ce{constructor(){super(...arguments),this.files=new cA(this._client),this.fileBatches=new lA(this._client)}create(e,n){return this._client.post("/vector_stores",{body:e,...n,headers:Se([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}retrieve(e,n){return this._client.get(de`/vector_stores/${e}`,{...n,headers:Se([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}update(e,n,r){return this._client.post(de`/vector_stores/${e}`,{body:n,...r,headers:Se([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(e={},n){return this._client.getAPIList("/vector_stores",zt,{query:e,...n,headers:Se([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}delete(e,n){return this._client.delete(de`/vector_stores/${e}`,{...n,headers:Se([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}search(e,n,r){return this._client.getAPIList(de`/vector_stores/${e}/search`,xd,{body:n,method:"post",...r,headers:Se([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}}Td.Files=cA;Td.FileBatches=lA;class uA extends Ce{create(e,n){return this._client.post("/videos",yS({body:e,...n},this._client))}retrieve(e,n){return this._client.get(de`/videos/${e}`,n)}list(e={},n){return this._client.getAPIList("/videos",Ff,{query:e,...n})}delete(e,n){return this._client.delete(de`/videos/${e}`,n)}downloadContent(e,n={},r){return this._client.get(de`/videos/${e}/content`,{query:n,...r,headers:Se([{Accept:"application/binary"},r?.headers]),__binaryResponse:!0})}remix(e,n,r){return this._client.post(de`/videos/${e}/remix`,yS({body:n,...r},this._client))}}var Da,fA,cf;class dA extends Ce{constructor(){super(...arguments),Da.add(this)}async unwrap(e,n,r=this._client.webhookSecret,s=300){return await this.verifySignature(e,n,r,s),JSON.parse(e)}async verifySignature(e,n,r=this._client.webhookSecret,s=300){if(typeof crypto>"u"||typeof crypto.subtle.importKey!="function"||typeof crypto.subtle.verify!="function")throw new Error("Webhook signature verification is only supported when the `crypto` global is defined");W(this,Da,"m",fA).call(this,r);const a=Se([n]).values,l=W(this,Da,"m",cf).call(this,a,"webhook-signature"),u=W(this,Da,"m",cf).call(this,a,"webhook-timestamp"),f=W(this,Da,"m",cf).call(this,a,"webhook-id"),d=parseInt(u,10);if(isNaN(d))throw new hl("Invalid webhook timestamp format");const m=Math.floor(Date.now()/1e3);if(m-d>s)throw new hl("Webhook timestamp is too old");if(d>m+s)throw new hl("Webhook timestamp is too new");const p=l.split(" ").map(x=>x.startsWith("v1,")?x.substring(3):x),y=r.startsWith("whsec_")?Buffer.from(r.replace("whsec_",""),"base64"):Buffer.from(r,"utf-8"),g=f?`${f}.${u}.${e}`:`${u}.${e}`,v=await crypto.subtle.importKey("raw",y,{name:"HMAC",hash:"SHA-256"},!1,["verify"]);for(const x of p)try{const E=Buffer.from(x,"base64");if(await crypto.subtle.verify("HMAC",v,E,new TextEncoder().encode(g)))return}catch{continue}throw new hl("The given webhook signature does not match the expected signature")}}Da=new WeakSet,fA=function(e){if(typeof e!="string"||e.length===0)throw new Error("The webhook secret must either be set using the env var, OPENAI_WEBHOOK_SECRET, on the client class, OpenAI({ webhookSecret: '123' }), or passed to this function")},cf=function(e,n){if(!e)throw new Error("Headers are required");const r=e.get(n);if(r==null)throw new Error(`Missing required header: ${n}`);return r};var ry,R0,uf,hA;class Fe{constructor({baseURL:e=Ra("OPENAI_BASE_URL"),apiKey:n=Ra("OPENAI_API_KEY"),organization:r=Ra("OPENAI_ORG_ID")??null,project:s=Ra("OPENAI_PROJECT_ID")??null,webhookSecret:a=Ra("OPENAI_WEBHOOK_SECRET")??null,...l}={}){if(ry.add(this),uf.set(this,void 0),this.completions=new qT(this),this.chat=new g0(this),this.embeddings=new HT(this),this.files=new KT(this),this.images=new WT(this),this.audio=new cc(this),this.moderations=new tA(this),this.models=new eA(this),this.fineTuning=new io(this),this.graders=new C0(this),this.vectorStores=new Td(this),this.webhooks=new dA(this),this.beta=new so(this),this.batches=new DT(this),this.uploads=new A0(this),this.responses=new Cd(this),this.realtime=new Ed(this),this.conversations=new v0(this),this.evals=new w0(this),this.containers=new _0(this),this.videos=new uA(this),n===void 0)throw new Re("Missing credentials. Please pass an `apiKey`, or set the `OPENAI_API_KEY` environment variable.");const u={apiKey:n,organization:r,project:s,webhookSecret:a,...l,baseURL:e||"https://api.openai.com/v1"};if(!u.dangerouslyAllowBrowser&&Q9())throw new Re(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);this.baseURL=u.baseURL,this.timeout=u.timeout??R0.DEFAULT_TIMEOUT,this.logger=u.logger??console;const f="warn";this.logLevel=f,this.logLevel=mS(u.logLevel,"ClientOptions.logLevel",this)??mS(Ra("OPENAI_LOG"),"process.env['OPENAI_LOG']",this)??f,this.fetchOptions=u.fetchOptions,this.maxRetries=u.maxRetries??2,this.fetch=u.fetch??eF(),De(this,uf,nF),this._options=u,this.apiKey=typeof n=="string"?n:"Missing Key",this.organization=r,this.project=s,this.webhookSecret=a}withOptions(e){return new this.constructor({...this._options,baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,organization:this.organization,project:this.project,webhookSecret:this.webhookSecret,...e})}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){}async authHeaders(e){return Se([{Authorization:`Bearer ${this.apiKey}`}])}stringifyQuery(e){return lF(e,{arrayFormat:"brackets"})}getUserAgent(){return`${this.constructor.name}/JS ${Ia}`}defaultIdempotencyKey(){return`stainless-node-retry-${LC()}`}makeStatusError(e,n,r,s){return cn.generate(e,n,r,s)}async _callApiKey(){const e=this._options.apiKey;if(typeof e!="function")return!1;let n;try{n=await e()}catch(r){throw r instanceof Re?r:new Re(`Failed to get token from 'apiKey' function: ${r.message}`,{cause:r})}if(typeof n!="string"||!n)throw new Re(`Expected 'apiKey' function argument to return a string but it returned ${n}`);return this.apiKey=n,!0}buildURL(e,n,r){const s=!W(this,ry,"m",hA).call(this)&&r||this.baseURL,a=V9(e)?new URL(e):new URL(s+(s.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),l=this.defaultQuery();return H9(l)||(n={...l,...n}),typeof n=="object"&&n&&!Array.isArray(n)&&(a.search=this.stringifyQuery(n)),a.toString()}async prepareOptions(e){await this._callApiKey()}async prepareRequest(e,{url:n,options:r}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,r){return this.request(Promise.resolve(r).then(s=>({method:e,path:n,...s})))}request(e,n=null){return new vd(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,r){const s=await e,a=s.maxRetries??this.maxRetries;n==null&&(n=a),await this.prepareOptions(s);const{req:l,url:u,timeout:f}=await this.buildRequest(s,{retryCount:a-n});await this.prepareRequest(l,{url:u,options:s});const d="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),m=r===void 0?"":`, retryOf: ${r}`,p=Date.now();if(on(this).debug(`[${d}] sending request`,Ci({retryOfRequestLogID:r,method:s.method,url:u,options:s,headers:l.headers})),s.signal?.aborted)throw new wr;const y=new AbortController,g=await this.fetchWithTimeout(u,l,f,y).catch(Hg),v=Date.now();if(g instanceof globalThis.Error){const S=`retrying, ${n} attempts remaining`;if(s.signal?.aborted)throw new wr;const T=Vg(g)||/timed? ?out/i.test(String(g)+("cause"in g?String(g.cause):""));if(n)return on(this).info(`[${d}] connection ${T?"timed out":"failed"} - ${S}`),on(this).debug(`[${d}] connection ${T?"timed out":"failed"} (${S})`,Ci({retryOfRequestLogID:r,url:u,durationMs:v-p,message:g.message})),this.retryRequest(s,n,r??d);throw on(this).info(`[${d}] connection ${T?"timed out":"failed"} - error; no more retries left`),on(this).debug(`[${d}] connection ${T?"timed out":"failed"} (error; no more retries left)`,Ci({retryOfRequestLogID:r,url:u,durationMs:v-p,message:g.message})),T?new o0:new bd({cause:g})}const x=[...g.headers.entries()].filter(([S])=>S==="x-request-id").map(([S,T])=>", "+S+": "+JSON.stringify(T)).join(""),E=`[${d}${m}${x}] ${l.method} ${u} ${g.ok?"succeeded":"failed"} with status ${g.status} in ${v-p}ms`;if(!g.ok){const S=await this.shouldRetry(g);if(n&&S){const P=`retrying, ${n} attempts remaining`;return await tF(g.body),on(this).info(`${E} - ${P}`),on(this).debug(`[${d}] response error (${P})`,Ci({retryOfRequestLogID:r,url:g.url,status:g.status,headers:g.headers,durationMs:v-p})),this.retryRequest(s,n,r??d,g.headers)}const T=S?"error; no more retries left":"error; not retryable";on(this).info(`${E} - ${T}`);const A=await g.text().catch(P=>Hg(P).message),j=Z9(A),D=j?void 0:A;throw on(this).debug(`[${d}] response error (${T})`,Ci({retryOfRequestLogID:r,url:g.url,status:g.status,headers:g.headers,message:D,durationMs:Date.now()-p})),this.makeStatusError(g.status,j,D,g.headers)}return on(this).info(E),on(this).debug(`[${d}] response start`,Ci({retryOfRequestLogID:r,url:g.url,status:g.status,headers:g.headers,durationMs:v-p})),{response:g,options:s,controller:y,requestLogID:d,retryOfRequestLogID:r,startTime:p}}getAPIList(e,n,r){return this.requestAPIList(n,{method:"get",path:e,...r})}requestAPIList(e,n){const r=this.makeRequest(n,null,void 0);return new yF(this,r,e)}async fetchWithTimeout(e,n,r,s){const{signal:a,method:l,...u}=n||{};a&&a.addEventListener("abort",()=>s.abort());const f=setTimeout(()=>s.abort(),r),d=globalThis.ReadableStream&&u.body instanceof globalThis.ReadableStream||typeof u.body=="object"&&u.body!==null&&Symbol.asyncIterator in u.body,m={signal:s.signal,...d?{duplex:"half"}:{},method:"GET",...u};l&&(m.method=l.toUpperCase());try{return await this.fetch.call(void 0,e,m)}finally{clearTimeout(f)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,r,s){let a;const l=s?.get("retry-after-ms");if(l){const f=parseFloat(l);Number.isNaN(f)||(a=f)}const u=s?.get("retry-after");if(u&&!a){const f=parseFloat(u);Number.isNaN(f)?a=Date.parse(u)-Date.now():a=f*1e3}if(!(a&&0<=a&&a<60*1e3)){const f=e.maxRetries??this.maxRetries;a=this.calculateDefaultRetryTimeoutMillis(n,f)}return await oc(a),this.makeRequest(e,n-1,r)}calculateDefaultRetryTimeoutMillis(e,n){const a=n-e,l=Math.min(.5*Math.pow(2,a),8),u=1-Math.random()*.25;return l*u*1e3}async buildRequest(e,{retryCount:n=0}={}){const r={...e},{method:s,path:a,query:l,defaultBaseURL:u}=r,f=this.buildURL(a,l,u);"timeout"in r&&K9("timeout",r.timeout),r.timeout=r.timeout??this.timeout;const{bodyHeaders:d,body:m}=this.buildBody({options:r}),p=await this.buildHeaders({options:e,method:s,bodyHeaders:d,retryCount:n});return{req:{method:s,headers:p,...r.signal&&{signal:r.signal},...globalThis.ReadableStream&&m instanceof globalThis.ReadableStream&&{duplex:"half"},...m&&{body:m},...this.fetchOptions??{},...r.fetchOptions??{}},url:f,timeout:r.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:r,retryCount:s}){let a={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),a[this.idempotencyHeader]=e.idempotencyKey);const l=Se([a,{Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(s),...e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{},...W9(),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project},await this.authHeaders(e),this._options.defaultHeaders,r,e.headers]);return this.validateHeaders(l),l.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const r=Se([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&r.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:QC(e)}:W(this,uf,"f").call(this,{body:e,headers:r})}}R0=Fe,uf=new WeakMap,ry=new WeakSet,hA=function(){return this.baseURL!=="https://api.openai.com/v1"};Fe.OpenAI=R0;Fe.DEFAULT_TIMEOUT=6e5;Fe.OpenAIError=Re;Fe.APIError=cn;Fe.APIConnectionError=bd;Fe.APIConnectionTimeoutError=o0;Fe.APIUserAbortError=wr;Fe.NotFoundError=$C;Fe.ConflictError=UC;Fe.RateLimitError=FC;Fe.BadRequestError=zC;Fe.AuthenticationError=PC;Fe.InternalServerError=VC;Fe.PermissionDeniedError=BC;Fe.UnprocessableEntityError=qC;Fe.InvalidWebhookSignatureError=hl;Fe.toFile=wF;Fe.Completions=qT;Fe.Chat=g0;Fe.Embeddings=HT;Fe.Files=KT;Fe.Images=WT;Fe.Audio=cc;Fe.Moderations=tA;Fe.Models=eA;Fe.FineTuning=io;Fe.Graders=C0;Fe.VectorStores=Td;Fe.Webhooks=dA;Fe.Beta=so;Fe.Batches=DT;Fe.Uploads=A0;Fe.Responses=Cd;Fe.Realtime=Ed;Fe.Conversations=v0;Fe.Evals=w0;Fe.Containers=_0;Fe.Videos=uA;class QF extends Fe{constructor(e){super({...e,dangerouslyAllowBrowser:!0})}}function JF(t){return new QF({apiKey:t.apiKey,organization:t.organization,baseURL:t.baseURL})}function YF(t){return`${t}-${Date.now()}-${Math.random().toString(36).substring(7)}`}class XF extends E9{constructor(e,n){super({},n),this.kind="text",this.name="openai",this.client=JF(e)}async*chatStream(e){const n=new Map,r=this.mapTextOptionsToOpenAI(e);try{const s=await this.client.responses.create({...r,stream:!0},{headers:e.request?.headers,signal:e.request?.signal});yield*this.processOpenAIStreamChunks(s,n,e,()=>YF(this.name))}catch(s){const a=s;throw console.error(">>> chatStream: Fatal error during response creation <<<"),console.error(">>> Error message:",a.message),console.error(">>> Error stack:",a.stack),console.error(">>> Full error:",a),s}}async structuredOutput(e){const{chatOptions:n,outputSchema:r}=e,s=this.mapTextOptionsToOpenAI(n),a=Il(r,r.required||[]);try{const l=await this.client.responses.create({...s,stream:!1,text:{format:{type:"json_schema",name:"structured_output",schema:a,strict:!0}}},{headers:n.request?.headers,signal:n.request?.signal}),u=this.extractTextFromResponse(l);let f;try{f=JSON.parse(u)}catch{throw new Error(`Failed to parse structured output as JSON. Content: ${u.slice(0,200)}${u.length>200?"...":""}`)}return{data:Fg(f),rawText:u}}catch(l){const u=l;throw console.error(">>> structuredOutput: Error during response creation <<<"),console.error(">>> Error message:",u.message),l}}extractTextFromResponse(e){let n="";for(const r of e.output)if(r.type==="message")for(const s of r.content)s.type==="output_text"&&(n+=s.text);return n}async*processOpenAIStreamChunks(e,n,r,s){let a="",l="";const u=Date.now();let f=0,d=!1,m=!1,p=null,y=r.model;try{for await(const g of e){f++;const v=x=>x.type==="output_text"?(a+=x.text,{type:"content",id:p||s(),model:y||r.model,timestamp:u,delta:x.text,content:a,role:"assistant"}):x.type==="reasoning_text"?(l+=x.text,{type:"thinking",id:p||s(),model:y||r.model,timestamp:u,delta:x.text,content:l}):{type:"error",id:p||s(),model:y||r.model,timestamp:u,error:{message:x.refusal}};if((g.type==="response.created"||g.type==="response.incomplete"||g.type==="response.failed")&&(p=g.response.id,y=g.response.model,d=!1,m=!1,a="",l="",g.response.error&&(yield{type:"error",id:g.response.id,model:g.response.model,timestamp:u,error:g.response.error}),g.response.incomplete_details&&(yield{type:"error",id:g.response.id,model:g.response.model,timestamp:u,error:{message:g.response.incomplete_details.reason??""}})),g.type==="response.output_text.delta"&&g.delta){const x=Array.isArray(g.delta)?g.delta.join(""):typeof g.delta=="string"?g.delta:"";x&&(a+=x,d=!0,yield{type:"content",id:p||s(),model:y||r.model,timestamp:u,delta:x,content:a,role:"assistant"})}if(g.type==="response.reasoning_text.delta"&&g.delta){const x=Array.isArray(g.delta)?g.delta.join(""):typeof g.delta=="string"?g.delta:"";x&&(l+=x,m=!0,yield{type:"thinking",id:p||s(),model:y||r.model,timestamp:u,delta:x,content:l})}if(g.type==="response.reasoning_summary_text.delta"&&g.delta){const x=typeof g.delta=="string"?g.delta:"";x&&(l+=x,m=!0,yield{type:"thinking",id:p||s(),model:y||r.model,timestamp:u,delta:x,content:l})}if(g.type==="response.content_part.added"){const x=g.part;yield v(x)}if(g.type==="response.content_part.done"){const x=g.part;if(x.type==="output_text"&&d||x.type==="reasoning_text"&&m)continue;yield v(x)}if(g.type==="response.output_item.added"){const x=g.item;x.type==="function_call"&&x.id&&(n.has(x.id)||n.set(x.id,{index:g.output_index,name:x.name||""}))}if(g.type==="response.function_call_arguments.done"){const{item_id:x,output_index:E}=g,T=n.get(x)?.name||"";yield{type:"tool_call",id:p||s(),model:y||r.model,timestamp:u,index:E,toolCall:{id:x,type:"function",function:{name:T,arguments:g.arguments}}}}if(g.type==="response.completed"){const x=g.response.output.some(E=>E.type==="function_call");yield{type:"done",id:p||s(),model:y||r.model,timestamp:u,usage:{promptTokens:g.response.usage?.input_tokens||0,completionTokens:g.response.usage?.output_tokens||0,totalTokens:g.response.usage?.total_tokens||0},finishReason:x?"tool_calls":"stop"}}g.type==="error"&&(yield{type:"error",id:p||s(),model:y||r.model,timestamp:u,error:{message:g.message,code:g.code??void 0}})}}catch(g){const v=g;console.log("[OpenAI Adapter] Stream ended with error. Event type summary:",{totalChunks:f,error:v.message}),yield{type:"error",id:s(),model:r.model,timestamp:u,error:{message:v.message||"Unknown error occurred",code:v.code}}}}mapTextOptionsToOpenAI(e){const n=e.modelOptions,r=this.convertMessagesToInput(e.messages);n&&T9({...n,model:e.model});const s=e.tools?q9(e.tools):void 0;return{model:e.model,temperature:e.temperature,max_output_tokens:e.maxTokens,top_p:e.topP,metadata:e.metadata,instructions:e.systemPrompts?.join(`
`),...n,input:r,tools:s}}convertMessagesToInput(e){const n=[];for(const r of e){if(r.role==="tool"){n.push({type:"function_call_output",call_id:r.toolCallId||"",output:typeof r.content=="string"?r.content:JSON.stringify(r.content)});continue}if(r.role==="assistant"){if(r.toolCalls&&r.toolCalls.length>0)for(const l of r.toolCalls){const u=typeof l.function.arguments=="string"?l.function.arguments:JSON.stringify(l.function.arguments);n.push({type:"function_call",call_id:l.id,name:l.function.name,arguments:u})}if(r.content){const l=this.extractTextContent(r.content);l&&n.push({type:"message",role:"assistant",content:l})}continue}const s=this.normalizeContent(r.content),a=[];for(const l of s)a.push(this.convertContentPartToOpenAI(l));a.length===0&&a.push({type:"input_text",text:""}),n.push({type:"message",role:"user",content:a})}return n}convertContentPartToOpenAI(e){switch(e.type){case"text":return{type:"input_text",text:e.content};case"image":{const n=e.metadata;return e.source.type==="url"?{type:"input_image",image_url:e.source.value,detail:n?.detail||"auto"}:{type:"input_image",image_url:e.source.value,detail:n?.detail||"auto"}}case"audio":return e.source.type==="url"?{type:"input_file",file_url:e.source.value}:{type:"input_file",file_data:e.source.value};default:throw new Error(`Unsupported content part type: ${e.type}`)}}normalizeContent(e){return e===null?[]:typeof e=="string"?[{type:"text",content:e}]:e}extractTextContent(e){return e===null?"":typeof e=="string"?e:e.filter(n=>n.type==="text").map(n=>n.content).join("")}}function WF(t){const e=`${window.location.origin}/openai/v1`;return new XF({apiKey:"not-needed",baseURL:e},t)}function eV(){return Oy().ai?.model||"gpt-5.1"}function ue(t,e,n){function r(u,f){if(u._zod||Object.defineProperty(u,"_zod",{value:{def:f,constr:l,traits:new Set},enumerable:!1}),u._zod.traits.has(t))return;u._zod.traits.add(t),e(u,f);const d=l.prototype,m=Object.keys(d);for(let p=0;p<m.length;p++){const y=m[p];y in u||(u[y]=d[y].bind(u))}}const s=n?.Parent??Object;class a extends s{}Object.defineProperty(a,"name",{value:t});function l(u){var f;const d=n?.Parent?new a:this;r(d,u),(f=d._zod).deferred??(f.deferred=[]);for(const m of d._zod.deferred)m();return d}return Object.defineProperty(l,"init",{value:r}),Object.defineProperty(l,Symbol.hasInstance,{value:u=>n?.Parent&&u instanceof n.Parent?!0:u?._zod?.traits?.has(t)}),Object.defineProperty(l,"name",{value:t}),l}class Ha extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class pA extends Error{constructor(e){super(`Encountered unidirectional transform during encode: ${e}`),this.name="ZodEncodeError"}}const mA={};function ji(t){return mA}function gA(t){const e=Object.values(t).filter(r=>typeof r=="number");return Object.entries(t).filter(([r,s])=>e.indexOf(+r)===-1).map(([r,s])=>s)}function sy(t,e){return typeof e=="bigint"?e.toString():e}function O0(t){return{get value(){{const e=t();return Object.defineProperty(this,"value",{value:e}),e}}}}function N0(t){return t==null}function I0(t){const e=t.startsWith("^")?1:0,n=t.endsWith("$")?t.length-1:t.length;return t.slice(e,n)}const MS=Symbol("evaluating");function ct(t,e,n){let r;Object.defineProperty(t,e,{get(){if(r!==MS)return r===void 0&&(r=MS,r=n()),r},set(s){Object.defineProperty(t,e,{value:s})},configurable:!0})}function Bi(t,e,n){Object.defineProperty(t,e,{value:n,writable:!0,enumerable:!0,configurable:!0})}function ni(...t){const e={};for(const n of t){const r=Object.getOwnPropertyDescriptors(n);Object.assign(e,r)}return Object.defineProperties({},e)}function DS(t){return JSON.stringify(t)}function tV(t){return t.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"")}const yA="captureStackTrace"in Error?Error.captureStackTrace:(...t)=>{};function Yf(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)}const nV=O0(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{const t=Function;return new t(""),!0}catch{return!1}});function Ql(t){if(Yf(t)===!1)return!1;const e=t.constructor;if(e===void 0||typeof e!="function")return!0;const n=e.prototype;return!(Yf(n)===!1||Object.prototype.hasOwnProperty.call(n,"isPrototypeOf")===!1)}function bA(t){return Ql(t)?{...t}:Array.isArray(t)?[...t]:t}const rV=new Set(["string","number","symbol"]);function Ad(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function ri(t,e,n){const r=new t._zod.constr(e??t._zod.def);return(!e||n?.parent)&&(r._zod.parent=t),r}function Le(t){const e=t;if(!e)return{};if(typeof e=="string")return{error:()=>e};if(e?.message!==void 0){if(e?.error!==void 0)throw new Error("Cannot specify both `message` and `error` params");e.error=e.message}return delete e.message,typeof e.error=="string"?{...e,error:()=>e.error}:e}function sV(t){return Object.keys(t).filter(e=>t[e]._zod.optin==="optional"&&t[e]._zod.optout==="optional")}function iV(t,e){const n=t._zod.def,r=n.checks;if(r&&r.length>0)throw new Error(".pick() cannot be used on object schemas containing refinements");const a=ni(t._zod.def,{get shape(){const l={};for(const u in e){if(!(u in n.shape))throw new Error(`Unrecognized key: "${u}"`);e[u]&&(l[u]=n.shape[u])}return Bi(this,"shape",l),l},checks:[]});return ri(t,a)}function aV(t,e){const n=t._zod.def,r=n.checks;if(r&&r.length>0)throw new Error(".omit() cannot be used on object schemas containing refinements");const a=ni(t._zod.def,{get shape(){const l={...t._zod.def.shape};for(const u in e){if(!(u in n.shape))throw new Error(`Unrecognized key: "${u}"`);e[u]&&delete l[u]}return Bi(this,"shape",l),l},checks:[]});return ri(t,a)}function oV(t,e){if(!Ql(e))throw new Error("Invalid input to extend: expected a plain object");const n=t._zod.def.checks;if(n&&n.length>0){const a=t._zod.def.shape;for(const l in e)if(Object.getOwnPropertyDescriptor(a,l)!==void 0)throw new Error("Cannot overwrite keys on object schemas containing refinements. Use `.safeExtend()` instead.")}const s=ni(t._zod.def,{get shape(){const a={...t._zod.def.shape,...e};return Bi(this,"shape",a),a}});return ri(t,s)}function lV(t,e){if(!Ql(e))throw new Error("Invalid input to safeExtend: expected a plain object");const n=ni(t._zod.def,{get shape(){const r={...t._zod.def.shape,...e};return Bi(this,"shape",r),r}});return ri(t,n)}function cV(t,e){const n=ni(t._zod.def,{get shape(){const r={...t._zod.def.shape,...e._zod.def.shape};return Bi(this,"shape",r),r},get catchall(){return e._zod.def.catchall},checks:[]});return ri(t,n)}function uV(t,e,n){const s=e._zod.def.checks;if(s&&s.length>0)throw new Error(".partial() cannot be used on object schemas containing refinements");const l=ni(e._zod.def,{get shape(){const u=e._zod.def.shape,f={...u};if(n)for(const d in n){if(!(d in u))throw new Error(`Unrecognized key: "${d}"`);n[d]&&(f[d]=t?new t({type:"optional",innerType:u[d]}):u[d])}else for(const d in u)f[d]=t?new t({type:"optional",innerType:u[d]}):u[d];return Bi(this,"shape",f),f},checks:[]});return ri(e,l)}function fV(t,e,n){const r=ni(e._zod.def,{get shape(){const s=e._zod.def.shape,a={...s};if(n)for(const l in n){if(!(l in a))throw new Error(`Unrecognized key: "${l}"`);n[l]&&(a[l]=new t({type:"nonoptional",innerType:s[l]}))}else for(const l in s)a[l]=new t({type:"nonoptional",innerType:s[l]});return Bi(this,"shape",a),a}});return ri(e,r)}function $a(t,e=0){if(t.aborted===!0)return!0;for(let n=e;n<t.issues.length;n++)if(t.issues[n]?.continue!==!0)return!0;return!1}function _A(t,e){return e.map(n=>{var r;return(r=n).path??(r.path=[]),n.path.unshift(t),n})}function Vu(t){return typeof t=="string"?t:t?.message}function Li(t,e,n){const r={...t,path:t.path??[]};if(!t.message){const s=Vu(t.inst?._zod.def?.error?.(t))??Vu(e?.error?.(t))??Vu(n.customError?.(t))??Vu(n.localeError?.(t))??"Invalid input";r.message=s}return delete r.inst,delete r.continue,e?.reportInput||delete r.input,r}function M0(t){return Array.isArray(t)?"array":typeof t=="string"?"string":"unknown"}function Jl(...t){const[e,n,r]=t;return typeof e=="string"?{message:e,code:"custom",input:n,inst:r}:{...e}}const vA=(t,e)=>{t.name="$ZodError",Object.defineProperty(t,"_zod",{value:t._zod,enumerable:!1}),Object.defineProperty(t,"issues",{value:e,enumerable:!1}),t.message=JSON.stringify(e,sy,2),Object.defineProperty(t,"toString",{value:()=>t.message,enumerable:!1})},xA=ue("$ZodError",vA),wA=ue("$ZodError",vA,{Parent:Error});function dV(t,e=n=>n.message){const n={},r=[];for(const s of t.issues)s.path.length>0?(n[s.path[0]]=n[s.path[0]]||[],n[s.path[0]].push(e(s))):r.push(e(s));return{formErrors:r,fieldErrors:n}}function hV(t,e=n=>n.message){const n={_errors:[]},r=s=>{for(const a of s.issues)if(a.code==="invalid_union"&&a.errors.length)a.errors.map(l=>r({issues:l}));else if(a.code==="invalid_key")r({issues:a.issues});else if(a.code==="invalid_element")r({issues:a.issues});else if(a.path.length===0)n._errors.push(e(a));else{let l=n,u=0;for(;u<a.path.length;){const f=a.path[u];u===a.path.length-1?(l[f]=l[f]||{_errors:[]},l[f]._errors.push(e(a))):l[f]=l[f]||{_errors:[]},l=l[f],u++}}};return r(t),n}const D0=t=>(e,n,r,s)=>{const a=r?Object.assign(r,{async:!1}):{async:!1},l=e._zod.run({value:n,issues:[]},a);if(l instanceof Promise)throw new Ha;if(l.issues.length){const u=new(s?.Err??t)(l.issues.map(f=>Li(f,a,ji())));throw yA(u,s?.callee),u}return l.value},j0=t=>async(e,n,r,s)=>{const a=r?Object.assign(r,{async:!0}):{async:!0};let l=e._zod.run({value:n,issues:[]},a);if(l instanceof Promise&&(l=await l),l.issues.length){const u=new(s?.Err??t)(l.issues.map(f=>Li(f,a,ji())));throw yA(u,s?.callee),u}return l.value},Rd=t=>(e,n,r)=>{const s=r?{...r,async:!1}:{async:!1},a=e._zod.run({value:n,issues:[]},s);if(a instanceof Promise)throw new Ha;return a.issues.length?{success:!1,error:new(t??xA)(a.issues.map(l=>Li(l,s,ji())))}:{success:!0,data:a.value}},pV=Rd(wA),Od=t=>async(e,n,r)=>{const s=r?Object.assign(r,{async:!0}):{async:!0};let a=e._zod.run({value:n,issues:[]},s);return a instanceof Promise&&(a=await a),a.issues.length?{success:!1,error:new t(a.issues.map(l=>Li(l,s,ji())))}:{success:!0,data:a.value}},mV=Od(wA),gV=t=>(e,n,r)=>{const s=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return D0(t)(e,n,s)},yV=t=>(e,n,r)=>D0(t)(e,n,r),bV=t=>async(e,n,r)=>{const s=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return j0(t)(e,n,s)},_V=t=>async(e,n,r)=>j0(t)(e,n,r),vV=t=>(e,n,r)=>{const s=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return Rd(t)(e,n,s)},xV=t=>(e,n,r)=>Rd(t)(e,n,r),wV=t=>async(e,n,r)=>{const s=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return Od(t)(e,n,s)},SV=t=>async(e,n,r)=>Od(t)(e,n,r),kV=/^[cC][^\s-]{8,}$/,EV=/^[0-9a-z]+$/,CV=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,TV=/^[0-9a-vA-V]{20}$/,AV=/^[A-Za-z0-9]{27}$/,RV=/^[a-zA-Z0-9_-]{21}$/,OV=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,NV=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,jS=t=>t?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${t}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,IV=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,MV="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function DV(){return new RegExp(MV,"u")}const jV=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,LV=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,zV=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,PV=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,BV=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,SA=/^[A-Za-z0-9_-]*$/,$V=/^\+[1-9]\d{6,14}$/,kA="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",UV=new RegExp(`^${kA}$`);function EA(t){const e="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof t.precision=="number"?t.precision===-1?`${e}`:t.precision===0?`${e}:[0-5]\\d`:`${e}:[0-5]\\d\\.\\d{${t.precision}}`:`${e}(?::[0-5]\\d(?:\\.\\d+)?)?`}function qV(t){return new RegExp(`^${EA(t)}$`)}function FV(t){const e=EA({precision:t.precision}),n=["Z"];t.local&&n.push(""),t.offset&&n.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const r=`${e}(?:${n.join("|")})`;return new RegExp(`^${kA}T(?:${r})$`)}const VV=t=>{const e=t?`[\\s\\S]{${t?.minimum??0},${t?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${e}$`)},HV=/^[^A-Z]*$/,GV=/^[^a-z]*$/,Zr=ue("$ZodCheck",(t,e)=>{var n;t._zod??(t._zod={}),t._zod.def=e,(n=t._zod).onattach??(n.onattach=[])}),KV=ue("$ZodCheckMaxLength",(t,e)=>{var n;Zr.init(t,e),(n=t._zod.def).when??(n.when=r=>{const s=r.value;return!N0(s)&&s.length!==void 0}),t._zod.onattach.push(r=>{const s=r._zod.bag.maximum??Number.POSITIVE_INFINITY;e.maximum<s&&(r._zod.bag.maximum=e.maximum)}),t._zod.check=r=>{const s=r.value;if(s.length<=e.maximum)return;const l=M0(s);r.issues.push({origin:l,code:"too_big",maximum:e.maximum,inclusive:!0,input:s,inst:t,continue:!e.abort})}}),ZV=ue("$ZodCheckMinLength",(t,e)=>{var n;Zr.init(t,e),(n=t._zod.def).when??(n.when=r=>{const s=r.value;return!N0(s)&&s.length!==void 0}),t._zod.onattach.push(r=>{const s=r._zod.bag.minimum??Number.NEGATIVE_INFINITY;e.minimum>s&&(r._zod.bag.minimum=e.minimum)}),t._zod.check=r=>{const s=r.value;if(s.length>=e.minimum)return;const l=M0(s);r.issues.push({origin:l,code:"too_small",minimum:e.minimum,inclusive:!0,input:s,inst:t,continue:!e.abort})}}),QV=ue("$ZodCheckLengthEquals",(t,e)=>{var n;Zr.init(t,e),(n=t._zod.def).when??(n.when=r=>{const s=r.value;return!N0(s)&&s.length!==void 0}),t._zod.onattach.push(r=>{const s=r._zod.bag;s.minimum=e.length,s.maximum=e.length,s.length=e.length}),t._zod.check=r=>{const s=r.value,a=s.length;if(a===e.length)return;const l=M0(s),u=a>e.length;r.issues.push({origin:l,...u?{code:"too_big",maximum:e.length}:{code:"too_small",minimum:e.length},inclusive:!0,exact:!0,input:r.value,inst:t,continue:!e.abort})}}),Nd=ue("$ZodCheckStringFormat",(t,e)=>{var n,r;Zr.init(t,e),t._zod.onattach.push(s=>{const a=s._zod.bag;a.format=e.format,e.pattern&&(a.patterns??(a.patterns=new Set),a.patterns.add(e.pattern))}),e.pattern?(n=t._zod).check??(n.check=s=>{e.pattern.lastIndex=0,!e.pattern.test(s.value)&&s.issues.push({origin:"string",code:"invalid_format",format:e.format,input:s.value,...e.pattern?{pattern:e.pattern.toString()}:{},inst:t,continue:!e.abort})}):(r=t._zod).check??(r.check=()=>{})}),JV=ue("$ZodCheckRegex",(t,e)=>{Nd.init(t,e),t._zod.check=n=>{e.pattern.lastIndex=0,!e.pattern.test(n.value)&&n.issues.push({origin:"string",code:"invalid_format",format:"regex",input:n.value,pattern:e.pattern.toString(),inst:t,continue:!e.abort})}}),YV=ue("$ZodCheckLowerCase",(t,e)=>{e.pattern??(e.pattern=HV),Nd.init(t,e)}),XV=ue("$ZodCheckUpperCase",(t,e)=>{e.pattern??(e.pattern=GV),Nd.init(t,e)}),WV=ue("$ZodCheckIncludes",(t,e)=>{Zr.init(t,e);const n=Ad(e.includes),r=new RegExp(typeof e.position=="number"?`^.{${e.position}}${n}`:n);e.pattern=r,t._zod.onattach.push(s=>{const a=s._zod.bag;a.patterns??(a.patterns=new Set),a.patterns.add(r)}),t._zod.check=s=>{s.value.includes(e.includes,e.position)||s.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:e.includes,input:s.value,inst:t,continue:!e.abort})}}),e7=ue("$ZodCheckStartsWith",(t,e)=>{Zr.init(t,e);const n=new RegExp(`^${Ad(e.prefix)}.*`);e.pattern??(e.pattern=n),t._zod.onattach.push(r=>{const s=r._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(n)}),t._zod.check=r=>{r.value.startsWith(e.prefix)||r.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:e.prefix,input:r.value,inst:t,continue:!e.abort})}}),t7=ue("$ZodCheckEndsWith",(t,e)=>{Zr.init(t,e);const n=new RegExp(`.*${Ad(e.suffix)}$`);e.pattern??(e.pattern=n),t._zod.onattach.push(r=>{const s=r._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(n)}),t._zod.check=r=>{r.value.endsWith(e.suffix)||r.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:e.suffix,input:r.value,inst:t,continue:!e.abort})}}),n7=ue("$ZodCheckOverwrite",(t,e)=>{Zr.init(t,e),t._zod.check=n=>{n.value=e.tx(n.value)}});class r7{constructor(e=[]){this.content=[],this.indent=0,this&&(this.args=e)}indented(e){this.indent+=1,e(this),this.indent-=1}write(e){if(typeof e=="function"){e(this,{execution:"sync"}),e(this,{execution:"async"});return}const r=e.split(`
`).filter(l=>l),s=Math.min(...r.map(l=>l.length-l.trimStart().length)),a=r.map(l=>l.slice(s)).map(l=>" ".repeat(this.indent*2)+l);for(const l of a)this.content.push(l)}compile(){const e=Function,n=this?.args,s=[...(this?.content??[""]).map(a=>`  ${a}`)];return new e(...n,s.join(`
`))}}const s7={major:4,minor:3,patch:4},Ht=ue("$ZodType",(t,e)=>{var n;t??(t={}),t._zod.def=e,t._zod.bag=t._zod.bag||{},t._zod.version=s7;const r=[...t._zod.def.checks??[]];t._zod.traits.has("$ZodCheck")&&r.unshift(t);for(const s of r)for(const a of s._zod.onattach)a(t);if(r.length===0)(n=t._zod).deferred??(n.deferred=[]),t._zod.deferred?.push(()=>{t._zod.run=t._zod.parse});else{const s=(l,u,f)=>{let d=$a(l),m;for(const p of u){if(p._zod.def.when){if(!p._zod.def.when(l))continue}else if(d)continue;const y=l.issues.length,g=p._zod.check(l);if(g instanceof Promise&&f?.async===!1)throw new Ha;if(m||g instanceof Promise)m=(m??Promise.resolve()).then(async()=>{await g,l.issues.length!==y&&(d||(d=$a(l,y)))});else{if(l.issues.length===y)continue;d||(d=$a(l,y))}}return m?m.then(()=>l):l},a=(l,u,f)=>{if($a(l))return l.aborted=!0,l;const d=s(u,r,f);if(d instanceof Promise){if(f.async===!1)throw new Ha;return d.then(m=>t._zod.parse(m,f))}return t._zod.parse(d,f)};t._zod.run=(l,u)=>{if(u.skipChecks)return t._zod.parse(l,u);if(u.direction==="backward"){const d=t._zod.parse({value:l.value,issues:[]},{...u,skipChecks:!0});return d instanceof Promise?d.then(m=>a(m,l,u)):a(d,l,u)}const f=t._zod.parse(l,u);if(f instanceof Promise){if(u.async===!1)throw new Ha;return f.then(d=>s(d,r,u))}return s(f,r,u)}}ct(t,"~standard",()=>({validate:s=>{try{const a=pV(t,s);return a.success?{value:a.data}:{issues:a.error?.issues}}catch{return mV(t,s).then(l=>l.success?{value:l.data}:{issues:l.error?.issues})}},vendor:"zod",version:1}))}),L0=ue("$ZodString",(t,e)=>{Ht.init(t,e),t._zod.pattern=[...t?._zod.bag?.patterns??[]].pop()??VV(t._zod.bag),t._zod.parse=(n,r)=>{if(e.coerce)try{n.value=String(n.value)}catch{}return typeof n.value=="string"||n.issues.push({expected:"string",code:"invalid_type",input:n.value,inst:t}),n}}),wt=ue("$ZodStringFormat",(t,e)=>{Nd.init(t,e),L0.init(t,e)}),i7=ue("$ZodGUID",(t,e)=>{e.pattern??(e.pattern=NV),wt.init(t,e)}),a7=ue("$ZodUUID",(t,e)=>{if(e.version){const r={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[e.version];if(r===void 0)throw new Error(`Invalid UUID version: "${e.version}"`);e.pattern??(e.pattern=jS(r))}else e.pattern??(e.pattern=jS());wt.init(t,e)}),o7=ue("$ZodEmail",(t,e)=>{e.pattern??(e.pattern=IV),wt.init(t,e)}),l7=ue("$ZodURL",(t,e)=>{wt.init(t,e),t._zod.check=n=>{try{const r=n.value.trim(),s=new URL(r);e.hostname&&(e.hostname.lastIndex=0,e.hostname.test(s.hostname)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:e.hostname.source,input:n.value,inst:t,continue:!e.abort})),e.protocol&&(e.protocol.lastIndex=0,e.protocol.test(s.protocol.endsWith(":")?s.protocol.slice(0,-1):s.protocol)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:e.protocol.source,input:n.value,inst:t,continue:!e.abort})),e.normalize?n.value=s.href:n.value=r;return}catch{n.issues.push({code:"invalid_format",format:"url",input:n.value,inst:t,continue:!e.abort})}}}),c7=ue("$ZodEmoji",(t,e)=>{e.pattern??(e.pattern=DV()),wt.init(t,e)}),u7=ue("$ZodNanoID",(t,e)=>{e.pattern??(e.pattern=RV),wt.init(t,e)}),f7=ue("$ZodCUID",(t,e)=>{e.pattern??(e.pattern=kV),wt.init(t,e)}),d7=ue("$ZodCUID2",(t,e)=>{e.pattern??(e.pattern=EV),wt.init(t,e)}),h7=ue("$ZodULID",(t,e)=>{e.pattern??(e.pattern=CV),wt.init(t,e)}),p7=ue("$ZodXID",(t,e)=>{e.pattern??(e.pattern=TV),wt.init(t,e)}),m7=ue("$ZodKSUID",(t,e)=>{e.pattern??(e.pattern=AV),wt.init(t,e)}),g7=ue("$ZodISODateTime",(t,e)=>{e.pattern??(e.pattern=FV(e)),wt.init(t,e)}),y7=ue("$ZodISODate",(t,e)=>{e.pattern??(e.pattern=UV),wt.init(t,e)}),b7=ue("$ZodISOTime",(t,e)=>{e.pattern??(e.pattern=qV(e)),wt.init(t,e)}),_7=ue("$ZodISODuration",(t,e)=>{e.pattern??(e.pattern=OV),wt.init(t,e)}),v7=ue("$ZodIPv4",(t,e)=>{e.pattern??(e.pattern=jV),wt.init(t,e),t._zod.bag.format="ipv4"}),x7=ue("$ZodIPv6",(t,e)=>{e.pattern??(e.pattern=LV),wt.init(t,e),t._zod.bag.format="ipv6",t._zod.check=n=>{try{new URL(`http://[${n.value}]`)}catch{n.issues.push({code:"invalid_format",format:"ipv6",input:n.value,inst:t,continue:!e.abort})}}}),w7=ue("$ZodCIDRv4",(t,e)=>{e.pattern??(e.pattern=zV),wt.init(t,e)}),S7=ue("$ZodCIDRv6",(t,e)=>{e.pattern??(e.pattern=PV),wt.init(t,e),t._zod.check=n=>{const r=n.value.split("/");try{if(r.length!==2)throw new Error;const[s,a]=r;if(!a)throw new Error;const l=Number(a);if(`${l}`!==a)throw new Error;if(l<0||l>128)throw new Error;new URL(`http://[${s}]`)}catch{n.issues.push({code:"invalid_format",format:"cidrv6",input:n.value,inst:t,continue:!e.abort})}}});function CA(t){if(t==="")return!0;if(t.length%4!==0)return!1;try{return atob(t),!0}catch{return!1}}const k7=ue("$ZodBase64",(t,e)=>{e.pattern??(e.pattern=BV),wt.init(t,e),t._zod.bag.contentEncoding="base64",t._zod.check=n=>{CA(n.value)||n.issues.push({code:"invalid_format",format:"base64",input:n.value,inst:t,continue:!e.abort})}});function E7(t){if(!SA.test(t))return!1;const e=t.replace(/[-_]/g,r=>r==="-"?"+":"/"),n=e.padEnd(Math.ceil(e.length/4)*4,"=");return CA(n)}const C7=ue("$ZodBase64URL",(t,e)=>{e.pattern??(e.pattern=SA),wt.init(t,e),t._zod.bag.contentEncoding="base64url",t._zod.check=n=>{E7(n.value)||n.issues.push({code:"invalid_format",format:"base64url",input:n.value,inst:t,continue:!e.abort})}}),T7=ue("$ZodE164",(t,e)=>{e.pattern??(e.pattern=$V),wt.init(t,e)});function A7(t,e=null){try{const n=t.split(".");if(n.length!==3)return!1;const[r]=n;if(!r)return!1;const s=JSON.parse(atob(r));return!("typ"in s&&s?.typ!=="JWT"||!s.alg||e&&(!("alg"in s)||s.alg!==e))}catch{return!1}}const R7=ue("$ZodJWT",(t,e)=>{wt.init(t,e),t._zod.check=n=>{A7(n.value,e.alg)||n.issues.push({code:"invalid_format",format:"jwt",input:n.value,inst:t,continue:!e.abort})}}),O7=ue("$ZodUnknown",(t,e)=>{Ht.init(t,e),t._zod.parse=n=>n}),N7=ue("$ZodNever",(t,e)=>{Ht.init(t,e),t._zod.parse=(n,r)=>(n.issues.push({expected:"never",code:"invalid_type",input:n.value,inst:t}),n)});function LS(t,e,n){t.issues.length&&e.issues.push(..._A(n,t.issues)),e.value[n]=t.value}const I7=ue("$ZodArray",(t,e)=>{Ht.init(t,e),t._zod.parse=(n,r)=>{const s=n.value;if(!Array.isArray(s))return n.issues.push({expected:"array",code:"invalid_type",input:s,inst:t}),n;n.value=Array(s.length);const a=[];for(let l=0;l<s.length;l++){const u=s[l],f=e.element._zod.run({value:u,issues:[]},r);f instanceof Promise?a.push(f.then(d=>LS(d,n,l))):LS(f,n,l)}return a.length?Promise.all(a).then(()=>n):n}});function Xf(t,e,n,r,s){if(t.issues.length){if(s&&!(n in r))return;e.issues.push(..._A(n,t.issues))}t.value===void 0?n in r&&(e.value[n]=void 0):e.value[n]=t.value}function TA(t){const e=Object.keys(t.shape);for(const r of e)if(!t.shape?.[r]?._zod?.traits?.has("$ZodType"))throw new Error(`Invalid element at key "${r}": expected a Zod schema`);const n=sV(t.shape);return{...t,keys:e,keySet:new Set(e),numKeys:e.length,optionalKeys:new Set(n)}}function AA(t,e,n,r,s,a){const l=[],u=s.keySet,f=s.catchall._zod,d=f.def.type,m=f.optout==="optional";for(const p in e){if(u.has(p))continue;if(d==="never"){l.push(p);continue}const y=f.run({value:e[p],issues:[]},r);y instanceof Promise?t.push(y.then(g=>Xf(g,n,p,e,m))):Xf(y,n,p,e,m)}return l.length&&n.issues.push({code:"unrecognized_keys",keys:l,input:e,inst:a}),t.length?Promise.all(t).then(()=>n):n}const M7=ue("$ZodObject",(t,e)=>{if(Ht.init(t,e),!Object.getOwnPropertyDescriptor(e,"shape")?.get){const u=e.shape;Object.defineProperty(e,"shape",{get:()=>{const f={...u};return Object.defineProperty(e,"shape",{value:f}),f}})}const r=O0(()=>TA(e));ct(t._zod,"propValues",()=>{const u=e.shape,f={};for(const d in u){const m=u[d]._zod;if(m.values){f[d]??(f[d]=new Set);for(const p of m.values)f[d].add(p)}}return f});const s=Yf,a=e.catchall;let l;t._zod.parse=(u,f)=>{l??(l=r.value);const d=u.value;if(!s(d))return u.issues.push({expected:"object",code:"invalid_type",input:d,inst:t}),u;u.value={};const m=[],p=l.shape;for(const y of l.keys){const g=p[y],v=g._zod.optout==="optional",x=g._zod.run({value:d[y],issues:[]},f);x instanceof Promise?m.push(x.then(E=>Xf(E,u,y,d,v))):Xf(x,u,y,d,v)}return a?AA(m,d,u,f,r.value,t):m.length?Promise.all(m).then(()=>u):u}}),D7=ue("$ZodObjectJIT",(t,e)=>{M7.init(t,e);const n=t._zod.parse,r=O0(()=>TA(e)),s=y=>{const g=new r7(["shape","payload","ctx"]),v=r.value,x=A=>{const j=DS(A);return`shape[${j}]._zod.run({ value: input[${j}], issues: [] }, ctx)`};g.write("const input = payload.value;");const E=Object.create(null);let S=0;for(const A of v.keys)E[A]=`key_${S++}`;g.write("const newResult = {};");for(const A of v.keys){const j=E[A],D=DS(A),P=y[A]?._zod?.optout==="optional";g.write(`const ${j} = ${x(A)};`),P?g.write(`
        if (${j}.issues.length) {
          if (${D} in input) {
            payload.issues = payload.issues.concat(${j}.issues.map(iss => ({
              ...iss,
              path: iss.path ? [${D}, ...iss.path] : [${D}]
            })));
          }
        }
        
        if (${j}.value === undefined) {
          if (${D} in input) {
            newResult[${D}] = undefined;
          }
        } else {
          newResult[${D}] = ${j}.value;
        }
        
      `):g.write(`
        if (${j}.issues.length) {
          payload.issues = payload.issues.concat(${j}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${D}, ...iss.path] : [${D}]
          })));
        }
        
        if (${j}.value === undefined) {
          if (${D} in input) {
            newResult[${D}] = undefined;
          }
        } else {
          newResult[${D}] = ${j}.value;
        }
        
      `)}g.write("payload.value = newResult;"),g.write("return payload;");const T=g.compile();return(A,j)=>T(y,A,j)};let a;const l=Yf,u=!mA.jitless,d=u&&nV.value,m=e.catchall;let p;t._zod.parse=(y,g)=>{p??(p=r.value);const v=y.value;return l(v)?u&&d&&g?.async===!1&&g.jitless!==!0?(a||(a=s(e.shape)),y=a(y,g),m?AA([],v,y,g,p,t):y):n(y,g):(y.issues.push({expected:"object",code:"invalid_type",input:v,inst:t}),y)}});function zS(t,e,n,r){for(const a of t)if(a.issues.length===0)return e.value=a.value,e;const s=t.filter(a=>!$a(a));return s.length===1?(e.value=s[0].value,s[0]):(e.issues.push({code:"invalid_union",input:e.value,inst:n,errors:t.map(a=>a.issues.map(l=>Li(l,r,ji())))}),e)}const j7=ue("$ZodUnion",(t,e)=>{Ht.init(t,e),ct(t._zod,"optin",()=>e.options.some(s=>s._zod.optin==="optional")?"optional":void 0),ct(t._zod,"optout",()=>e.options.some(s=>s._zod.optout==="optional")?"optional":void 0),ct(t._zod,"values",()=>{if(e.options.every(s=>s._zod.values))return new Set(e.options.flatMap(s=>Array.from(s._zod.values)))}),ct(t._zod,"pattern",()=>{if(e.options.every(s=>s._zod.pattern)){const s=e.options.map(a=>a._zod.pattern);return new RegExp(`^(${s.map(a=>I0(a.source)).join("|")})$`)}});const n=e.options.length===1,r=e.options[0]._zod.run;t._zod.parse=(s,a)=>{if(n)return r(s,a);let l=!1;const u=[];for(const f of e.options){const d=f._zod.run({value:s.value,issues:[]},a);if(d instanceof Promise)u.push(d),l=!0;else{if(d.issues.length===0)return d;u.push(d)}}return l?Promise.all(u).then(f=>zS(f,s,t,a)):zS(u,s,t,a)}}),L7=ue("$ZodIntersection",(t,e)=>{Ht.init(t,e),t._zod.parse=(n,r)=>{const s=n.value,a=e.left._zod.run({value:s,issues:[]},r),l=e.right._zod.run({value:s,issues:[]},r);return a instanceof Promise||l instanceof Promise?Promise.all([a,l]).then(([f,d])=>PS(n,f,d)):PS(n,a,l)}});function iy(t,e){if(t===e)return{valid:!0,data:t};if(t instanceof Date&&e instanceof Date&&+t==+e)return{valid:!0,data:t};if(Ql(t)&&Ql(e)){const n=Object.keys(e),r=Object.keys(t).filter(a=>n.indexOf(a)!==-1),s={...t,...e};for(const a of r){const l=iy(t[a],e[a]);if(!l.valid)return{valid:!1,mergeErrorPath:[a,...l.mergeErrorPath]};s[a]=l.data}return{valid:!0,data:s}}if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return{valid:!1,mergeErrorPath:[]};const n=[];for(let r=0;r<t.length;r++){const s=t[r],a=e[r],l=iy(s,a);if(!l.valid)return{valid:!1,mergeErrorPath:[r,...l.mergeErrorPath]};n.push(l.data)}return{valid:!0,data:n}}return{valid:!1,mergeErrorPath:[]}}function PS(t,e,n){const r=new Map;let s;for(const u of e.issues)if(u.code==="unrecognized_keys"){s??(s=u);for(const f of u.keys)r.has(f)||r.set(f,{}),r.get(f).l=!0}else t.issues.push(u);for(const u of n.issues)if(u.code==="unrecognized_keys")for(const f of u.keys)r.has(f)||r.set(f,{}),r.get(f).r=!0;else t.issues.push(u);const a=[...r].filter(([,u])=>u.l&&u.r).map(([u])=>u);if(a.length&&s&&t.issues.push({...s,keys:a}),$a(t))return t;const l=iy(e.value,n.value);if(!l.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(l.mergeErrorPath)}`);return t.value=l.data,t}const z7=ue("$ZodEnum",(t,e)=>{Ht.init(t,e);const n=gA(e.entries),r=new Set(n);t._zod.values=r,t._zod.pattern=new RegExp(`^(${n.filter(s=>rV.has(typeof s)).map(s=>typeof s=="string"?Ad(s):s.toString()).join("|")})$`),t._zod.parse=(s,a)=>{const l=s.value;return r.has(l)||s.issues.push({code:"invalid_value",values:n,input:l,inst:t}),s}}),P7=ue("$ZodTransform",(t,e)=>{Ht.init(t,e),t._zod.parse=(n,r)=>{if(r.direction==="backward")throw new pA(t.constructor.name);const s=e.transform(n.value,n);if(r.async)return(s instanceof Promise?s:Promise.resolve(s)).then(l=>(n.value=l,n));if(s instanceof Promise)throw new Ha;return n.value=s,n}});function BS(t,e){return t.issues.length&&e===void 0?{issues:[],value:void 0}:t}const RA=ue("$ZodOptional",(t,e)=>{Ht.init(t,e),t._zod.optin="optional",t._zod.optout="optional",ct(t._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,void 0]):void 0),ct(t._zod,"pattern",()=>{const n=e.innerType._zod.pattern;return n?new RegExp(`^(${I0(n.source)})?$`):void 0}),t._zod.parse=(n,r)=>{if(e.innerType._zod.optin==="optional"){const s=e.innerType._zod.run(n,r);return s instanceof Promise?s.then(a=>BS(a,n.value)):BS(s,n.value)}return n.value===void 0?n:e.innerType._zod.run(n,r)}}),B7=ue("$ZodExactOptional",(t,e)=>{RA.init(t,e),ct(t._zod,"values",()=>e.innerType._zod.values),ct(t._zod,"pattern",()=>e.innerType._zod.pattern),t._zod.parse=(n,r)=>e.innerType._zod.run(n,r)}),$7=ue("$ZodNullable",(t,e)=>{Ht.init(t,e),ct(t._zod,"optin",()=>e.innerType._zod.optin),ct(t._zod,"optout",()=>e.innerType._zod.optout),ct(t._zod,"pattern",()=>{const n=e.innerType._zod.pattern;return n?new RegExp(`^(${I0(n.source)}|null)$`):void 0}),ct(t._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,null]):void 0),t._zod.parse=(n,r)=>n.value===null?n:e.innerType._zod.run(n,r)}),U7=ue("$ZodDefault",(t,e)=>{Ht.init(t,e),t._zod.optin="optional",ct(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(n,r)=>{if(r.direction==="backward")return e.innerType._zod.run(n,r);if(n.value===void 0)return n.value=e.defaultValue,n;const s=e.innerType._zod.run(n,r);return s instanceof Promise?s.then(a=>$S(a,e)):$S(s,e)}});function $S(t,e){return t.value===void 0&&(t.value=e.defaultValue),t}const q7=ue("$ZodPrefault",(t,e)=>{Ht.init(t,e),t._zod.optin="optional",ct(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(n,r)=>(r.direction==="backward"||n.value===void 0&&(n.value=e.defaultValue),e.innerType._zod.run(n,r))}),F7=ue("$ZodNonOptional",(t,e)=>{Ht.init(t,e),ct(t._zod,"values",()=>{const n=e.innerType._zod.values;return n?new Set([...n].filter(r=>r!==void 0)):void 0}),t._zod.parse=(n,r)=>{const s=e.innerType._zod.run(n,r);return s instanceof Promise?s.then(a=>US(a,t)):US(s,t)}});function US(t,e){return!t.issues.length&&t.value===void 0&&t.issues.push({code:"invalid_type",expected:"nonoptional",input:t.value,inst:e}),t}const V7=ue("$ZodCatch",(t,e)=>{Ht.init(t,e),ct(t._zod,"optin",()=>e.innerType._zod.optin),ct(t._zod,"optout",()=>e.innerType._zod.optout),ct(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(n,r)=>{if(r.direction==="backward")return e.innerType._zod.run(n,r);const s=e.innerType._zod.run(n,r);return s instanceof Promise?s.then(a=>(n.value=a.value,a.issues.length&&(n.value=e.catchValue({...n,error:{issues:a.issues.map(l=>Li(l,r,ji()))},input:n.value}),n.issues=[]),n)):(n.value=s.value,s.issues.length&&(n.value=e.catchValue({...n,error:{issues:s.issues.map(a=>Li(a,r,ji()))},input:n.value}),n.issues=[]),n)}}),H7=ue("$ZodPipe",(t,e)=>{Ht.init(t,e),ct(t._zod,"values",()=>e.in._zod.values),ct(t._zod,"optin",()=>e.in._zod.optin),ct(t._zod,"optout",()=>e.out._zod.optout),ct(t._zod,"propValues",()=>e.in._zod.propValues),t._zod.parse=(n,r)=>{if(r.direction==="backward"){const a=e.out._zod.run(n,r);return a instanceof Promise?a.then(l=>Hu(l,e.in,r)):Hu(a,e.in,r)}const s=e.in._zod.run(n,r);return s instanceof Promise?s.then(a=>Hu(a,e.out,r)):Hu(s,e.out,r)}});function Hu(t,e,n){return t.issues.length?(t.aborted=!0,t):e._zod.run({value:t.value,issues:t.issues},n)}const G7=ue("$ZodReadonly",(t,e)=>{Ht.init(t,e),ct(t._zod,"propValues",()=>e.innerType._zod.propValues),ct(t._zod,"values",()=>e.innerType._zod.values),ct(t._zod,"optin",()=>e.innerType?._zod?.optin),ct(t._zod,"optout",()=>e.innerType?._zod?.optout),t._zod.parse=(n,r)=>{if(r.direction==="backward")return e.innerType._zod.run(n,r);const s=e.innerType._zod.run(n,r);return s instanceof Promise?s.then(qS):qS(s)}});function qS(t){return t.value=Object.freeze(t.value),t}const K7=ue("$ZodCustom",(t,e)=>{Zr.init(t,e),Ht.init(t,e),t._zod.parse=(n,r)=>n,t._zod.check=n=>{const r=n.value,s=e.fn(r);if(s instanceof Promise)return s.then(a=>FS(a,n,r,t));FS(s,n,r,t)}});function FS(t,e,n,r){if(!t){const s={code:"custom",input:n,inst:r,path:[...r._zod.def.path??[]],continue:!r._zod.def.abort};r._zod.def.params&&(s.params=r._zod.def.params),e.issues.push(Jl(s))}}var VS;class Z7{constructor(){this._map=new WeakMap,this._idmap=new Map}add(e,...n){const r=n[0];return this._map.set(e,r),r&&typeof r=="object"&&"id"in r&&this._idmap.set(r.id,e),this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(e){const n=this._map.get(e);return n&&typeof n=="object"&&"id"in n&&this._idmap.delete(n.id),this._map.delete(e),this}get(e){const n=e._zod.parent;if(n){const r={...this.get(n)??{}};delete r.id;const s={...r,...this._map.get(e)};return Object.keys(s).length?s:void 0}return this._map.get(e)}has(e){return this._map.has(e)}}function Q7(){return new Z7}(VS=globalThis).__zod_globalRegistry??(VS.__zod_globalRegistry=Q7());const wl=globalThis.__zod_globalRegistry;function J7(t,e){return new t({type:"string",...Le(e)})}function Y7(t,e){return new t({type:"string",format:"email",check:"string_format",abort:!1,...Le(e)})}function HS(t,e){return new t({type:"string",format:"guid",check:"string_format",abort:!1,...Le(e)})}function X7(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,...Le(e)})}function W7(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...Le(e)})}function eH(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...Le(e)})}function tH(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...Le(e)})}function nH(t,e){return new t({type:"string",format:"url",check:"string_format",abort:!1,...Le(e)})}function rH(t,e){return new t({type:"string",format:"emoji",check:"string_format",abort:!1,...Le(e)})}function sH(t,e){return new t({type:"string",format:"nanoid",check:"string_format",abort:!1,...Le(e)})}function iH(t,e){return new t({type:"string",format:"cuid",check:"string_format",abort:!1,...Le(e)})}function aH(t,e){return new t({type:"string",format:"cuid2",check:"string_format",abort:!1,...Le(e)})}function oH(t,e){return new t({type:"string",format:"ulid",check:"string_format",abort:!1,...Le(e)})}function lH(t,e){return new t({type:"string",format:"xid",check:"string_format",abort:!1,...Le(e)})}function cH(t,e){return new t({type:"string",format:"ksuid",check:"string_format",abort:!1,...Le(e)})}function uH(t,e){return new t({type:"string",format:"ipv4",check:"string_format",abort:!1,...Le(e)})}function fH(t,e){return new t({type:"string",format:"ipv6",check:"string_format",abort:!1,...Le(e)})}function dH(t,e){return new t({type:"string",format:"cidrv4",check:"string_format",abort:!1,...Le(e)})}function hH(t,e){return new t({type:"string",format:"cidrv6",check:"string_format",abort:!1,...Le(e)})}function pH(t,e){return new t({type:"string",format:"base64",check:"string_format",abort:!1,...Le(e)})}function mH(t,e){return new t({type:"string",format:"base64url",check:"string_format",abort:!1,...Le(e)})}function gH(t,e){return new t({type:"string",format:"e164",check:"string_format",abort:!1,...Le(e)})}function yH(t,e){return new t({type:"string",format:"jwt",check:"string_format",abort:!1,...Le(e)})}function bH(t,e){return new t({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...Le(e)})}function _H(t,e){return new t({type:"string",format:"date",check:"string_format",...Le(e)})}function vH(t,e){return new t({type:"string",format:"time",check:"string_format",precision:null,...Le(e)})}function xH(t,e){return new t({type:"string",format:"duration",check:"string_format",...Le(e)})}function wH(t){return new t({type:"unknown"})}function SH(t,e){return new t({type:"never",...Le(e)})}function OA(t,e){return new KV({check:"max_length",...Le(e),maximum:t})}function Wf(t,e){return new ZV({check:"min_length",...Le(e),minimum:t})}function NA(t,e){return new QV({check:"length_equals",...Le(e),length:t})}function kH(t,e){return new JV({check:"string_format",format:"regex",...Le(e),pattern:t})}function EH(t){return new YV({check:"string_format",format:"lowercase",...Le(t)})}function CH(t){return new XV({check:"string_format",format:"uppercase",...Le(t)})}function TH(t,e){return new WV({check:"string_format",format:"includes",...Le(e),includes:t})}function AH(t,e){return new e7({check:"string_format",format:"starts_with",...Le(e),prefix:t})}function RH(t,e){return new t7({check:"string_format",format:"ends_with",...Le(e),suffix:t})}function ao(t){return new n7({check:"overwrite",tx:t})}function OH(t){return ao(e=>e.normalize(t))}function NH(){return ao(t=>t.trim())}function IH(){return ao(t=>t.toLowerCase())}function MH(){return ao(t=>t.toUpperCase())}function DH(){return ao(t=>tV(t))}function jH(t,e,n){return new t({type:"array",element:e,...Le(n)})}function LH(t,e,n){return new t({type:"custom",check:"custom",fn:e,...Le(n)})}function zH(t){const e=PH(n=>(n.addIssue=r=>{if(typeof r=="string")n.issues.push(Jl(r,n.value,e._zod.def));else{const s=r;s.fatal&&(s.continue=!1),s.code??(s.code="custom"),s.input??(s.input=n.value),s.inst??(s.inst=e),s.continue??(s.continue=!e._zod.def.abort),n.issues.push(Jl(s))}},t(n.value,n)));return e}function PH(t,e){const n=new Zr({check:"custom",...Le(e)});return n._zod.check=t,n}function IA(t){let e=t?.target??"draft-2020-12";return e==="draft-4"&&(e="draft-04"),e==="draft-7"&&(e="draft-07"),{processors:t.processors??{},metadataRegistry:t?.metadata??wl,target:e,unrepresentable:t?.unrepresentable??"throw",override:t?.override??(()=>{}),io:t?.io??"output",counter:0,seen:new Map,cycles:t?.cycles??"ref",reused:t?.reused??"inline",external:t?.external??void 0}}function un(t,e,n={path:[],schemaPath:[]}){var r;const s=t._zod.def,a=e.seen.get(t);if(a)return a.count++,n.schemaPath.includes(t)&&(a.cycle=n.path),a.schema;const l={schema:{},count:1,cycle:void 0,path:n.path};e.seen.set(t,l);const u=t._zod.toJSONSchema?.();if(u)l.schema=u;else{const m={...n,schemaPath:[...n.schemaPath,t],path:n.path};if(t._zod.processJSONSchema)t._zod.processJSONSchema(e,l.schema,m);else{const y=l.schema,g=e.processors[s.type];if(!g)throw new Error(`[toJSONSchema]: Non-representable type encountered: ${s.type}`);g(t,e,y,m)}const p=t._zod.parent;p&&(l.ref||(l.ref=p),un(p,e,m),e.seen.get(p).isParent=!0)}const f=e.metadataRegistry.get(t);return f&&Object.assign(l.schema,f),e.io==="input"&&En(t)&&(delete l.schema.examples,delete l.schema.default),e.io==="input"&&l.schema._prefault&&((r=l.schema).default??(r.default=l.schema._prefault)),delete l.schema._prefault,e.seen.get(t).schema}function MA(t,e){const n=t.seen.get(e);if(!n)throw new Error("Unprocessed schema. This is a bug in Zod.");const r=new Map;for(const l of t.seen.entries()){const u=t.metadataRegistry.get(l[0])?.id;if(u){const f=r.get(u);if(f&&f!==l[0])throw new Error(`Duplicate schema id "${u}" detected during JSON Schema conversion. Two different schemas cannot share the same id when converted together.`);r.set(u,l[0])}}const s=l=>{const u=t.target==="draft-2020-12"?"$defs":"definitions";if(t.external){const p=t.external.registry.get(l[0])?.id,y=t.external.uri??(v=>v);if(p)return{ref:y(p)};const g=l[1].defId??l[1].schema.id??`schema${t.counter++}`;return l[1].defId=g,{defId:g,ref:`${y("__shared")}#/${u}/${g}`}}if(l[1]===n)return{ref:"#"};const d=`#/${u}/`,m=l[1].schema.id??`__schema${t.counter++}`;return{defId:m,ref:d+m}},a=l=>{if(l[1].schema.$ref)return;const u=l[1],{ref:f,defId:d}=s(l);u.def={...u.schema},d&&(u.defId=d);const m=u.schema;for(const p in m)delete m[p];m.$ref=f};if(t.cycles==="throw")for(const l of t.seen.entries()){const u=l[1];if(u.cycle)throw new Error(`Cycle detected: #/${u.cycle?.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(const l of t.seen.entries()){const u=l[1];if(e===l[0]){a(l);continue}if(t.external){const d=t.external.registry.get(l[0])?.id;if(e!==l[0]&&d){a(l);continue}}if(t.metadataRegistry.get(l[0])?.id){a(l);continue}if(u.cycle){a(l);continue}if(u.count>1&&t.reused==="ref"){a(l);continue}}}function DA(t,e){const n=t.seen.get(e);if(!n)throw new Error("Unprocessed schema. This is a bug in Zod.");const r=l=>{const u=t.seen.get(l);if(u.ref===null)return;const f=u.def??u.schema,d={...f},m=u.ref;if(u.ref=null,m){r(m);const y=t.seen.get(m),g=y.schema;if(g.$ref&&(t.target==="draft-07"||t.target==="draft-04"||t.target==="openapi-3.0")?(f.allOf=f.allOf??[],f.allOf.push(g)):Object.assign(f,g),Object.assign(f,d),l._zod.parent===m)for(const x in f)x==="$ref"||x==="allOf"||x in d||delete f[x];if(g.$ref)for(const x in f)x==="$ref"||x==="allOf"||x in y.def&&JSON.stringify(f[x])===JSON.stringify(y.def[x])&&delete f[x]}const p=l._zod.parent;if(p&&p!==m){r(p);const y=t.seen.get(p);if(y?.schema.$ref&&(f.$ref=y.schema.$ref,y.def))for(const g in f)g==="$ref"||g==="allOf"||g in y.def&&JSON.stringify(f[g])===JSON.stringify(y.def[g])&&delete f[g]}t.override({zodSchema:l,jsonSchema:f,path:u.path??[]})};for(const l of[...t.seen.entries()].reverse())r(l[0]);const s={};if(t.target==="draft-2020-12"?s.$schema="https://json-schema.org/draft/2020-12/schema":t.target==="draft-07"?s.$schema="http://json-schema.org/draft-07/schema#":t.target==="draft-04"?s.$schema="http://json-schema.org/draft-04/schema#":t.target,t.external?.uri){const l=t.external.registry.get(e)?.id;if(!l)throw new Error("Schema is missing an `id` property");s.$id=t.external.uri(l)}Object.assign(s,n.def??n.schema);const a=t.external?.defs??{};for(const l of t.seen.entries()){const u=l[1];u.def&&u.defId&&(a[u.defId]=u.def)}t.external||Object.keys(a).length>0&&(t.target==="draft-2020-12"?s.$defs=a:s.definitions=a);try{const l=JSON.parse(JSON.stringify(s));return Object.defineProperty(l,"~standard",{value:{...e["~standard"],jsonSchema:{input:ed(e,"input",t.processors),output:ed(e,"output",t.processors)}},enumerable:!1,writable:!1}),l}catch{throw new Error("Error converting schema to JSON.")}}function En(t,e){const n=e??{seen:new Set};if(n.seen.has(t))return!1;n.seen.add(t);const r=t._zod.def;if(r.type==="transform")return!0;if(r.type==="array")return En(r.element,n);if(r.type==="set")return En(r.valueType,n);if(r.type==="lazy")return En(r.getter(),n);if(r.type==="promise"||r.type==="optional"||r.type==="nonoptional"||r.type==="nullable"||r.type==="readonly"||r.type==="default"||r.type==="prefault")return En(r.innerType,n);if(r.type==="intersection")return En(r.left,n)||En(r.right,n);if(r.type==="record"||r.type==="map")return En(r.keyType,n)||En(r.valueType,n);if(r.type==="pipe")return En(r.in,n)||En(r.out,n);if(r.type==="object"){for(const s in r.shape)if(En(r.shape[s],n))return!0;return!1}if(r.type==="union"){for(const s of r.options)if(En(s,n))return!0;return!1}if(r.type==="tuple"){for(const s of r.items)if(En(s,n))return!0;return!!(r.rest&&En(r.rest,n))}return!1}const BH=(t,e={})=>n=>{const r=IA({...n,processors:e});return un(t,r),MA(r,t),DA(r,t)},ed=(t,e,n={})=>r=>{const{libraryOptions:s,target:a}=r??{},l=IA({...s??{},target:a,io:e,processors:n});return un(t,l),MA(l,t),DA(l,t)},$H={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},UH=(t,e,n,r)=>{const s=n;s.type="string";const{minimum:a,maximum:l,format:u,patterns:f,contentEncoding:d}=t._zod.bag;if(typeof a=="number"&&(s.minLength=a),typeof l=="number"&&(s.maxLength=l),u&&(s.format=$H[u]??u,s.format===""&&delete s.format,u==="time"&&delete s.format),d&&(s.contentEncoding=d),f&&f.size>0){const m=[...f];m.length===1?s.pattern=m[0].source:m.length>1&&(s.allOf=[...m.map(p=>({...e.target==="draft-07"||e.target==="draft-04"||e.target==="openapi-3.0"?{type:"string"}:{},pattern:p.source}))])}},qH=(t,e,n,r)=>{n.not={}},FH=(t,e,n,r)=>{},VH=(t,e,n,r)=>{const s=t._zod.def,a=gA(s.entries);a.every(l=>typeof l=="number")&&(n.type="number"),a.every(l=>typeof l=="string")&&(n.type="string"),n.enum=a},HH=(t,e,n,r)=>{if(e.unrepresentable==="throw")throw new Error("Custom types cannot be represented in JSON Schema")},GH=(t,e,n,r)=>{if(e.unrepresentable==="throw")throw new Error("Transforms cannot be represented in JSON Schema")},KH=(t,e,n,r)=>{const s=n,a=t._zod.def,{minimum:l,maximum:u}=t._zod.bag;typeof l=="number"&&(s.minItems=l),typeof u=="number"&&(s.maxItems=u),s.type="array",s.items=un(a.element,e,{...r,path:[...r.path,"items"]})},ZH=(t,e,n,r)=>{const s=n,a=t._zod.def;s.type="object",s.properties={};const l=a.shape;for(const d in l)s.properties[d]=un(l[d],e,{...r,path:[...r.path,"properties",d]});const u=new Set(Object.keys(l)),f=new Set([...u].filter(d=>{const m=a.shape[d]._zod;return e.io==="input"?m.optin===void 0:m.optout===void 0}));f.size>0&&(s.required=Array.from(f)),a.catchall?._zod.def.type==="never"?s.additionalProperties=!1:a.catchall?a.catchall&&(s.additionalProperties=un(a.catchall,e,{...r,path:[...r.path,"additionalProperties"]})):e.io==="output"&&(s.additionalProperties=!1)},QH=(t,e,n,r)=>{const s=t._zod.def,a=s.inclusive===!1,l=s.options.map((u,f)=>un(u,e,{...r,path:[...r.path,a?"oneOf":"anyOf",f]}));a?n.oneOf=l:n.anyOf=l},JH=(t,e,n,r)=>{const s=t._zod.def,a=un(s.left,e,{...r,path:[...r.path,"allOf",0]}),l=un(s.right,e,{...r,path:[...r.path,"allOf",1]}),u=d=>"allOf"in d&&Object.keys(d).length===1,f=[...u(a)?a.allOf:[a],...u(l)?l.allOf:[l]];n.allOf=f},YH=(t,e,n,r)=>{const s=t._zod.def,a=un(s.innerType,e,r),l=e.seen.get(t);e.target==="openapi-3.0"?(l.ref=s.innerType,n.nullable=!0):n.anyOf=[a,{type:"null"}]},XH=(t,e,n,r)=>{const s=t._zod.def;un(s.innerType,e,r);const a=e.seen.get(t);a.ref=s.innerType},WH=(t,e,n,r)=>{const s=t._zod.def;un(s.innerType,e,r);const a=e.seen.get(t);a.ref=s.innerType,n.default=JSON.parse(JSON.stringify(s.defaultValue))},eG=(t,e,n,r)=>{const s=t._zod.def;un(s.innerType,e,r);const a=e.seen.get(t);a.ref=s.innerType,e.io==="input"&&(n._prefault=JSON.parse(JSON.stringify(s.defaultValue)))},tG=(t,e,n,r)=>{const s=t._zod.def;un(s.innerType,e,r);const a=e.seen.get(t);a.ref=s.innerType;let l;try{l=s.catchValue(void 0)}catch{throw new Error("Dynamic catch values are not supported in JSON Schema")}n.default=l},nG=(t,e,n,r)=>{const s=t._zod.def,a=e.io==="input"?s.in._zod.def.type==="transform"?s.out:s.in:s.out;un(a,e,r);const l=e.seen.get(t);l.ref=a},rG=(t,e,n,r)=>{const s=t._zod.def;un(s.innerType,e,r);const a=e.seen.get(t);a.ref=s.innerType,n.readOnly=!0},jA=(t,e,n,r)=>{const s=t._zod.def;un(s.innerType,e,r);const a=e.seen.get(t);a.ref=s.innerType},sG=ue("ZodISODateTime",(t,e)=>{g7.init(t,e),St.init(t,e)});function iG(t){return bH(sG,t)}const aG=ue("ZodISODate",(t,e)=>{y7.init(t,e),St.init(t,e)});function oG(t){return _H(aG,t)}const lG=ue("ZodISOTime",(t,e)=>{b7.init(t,e),St.init(t,e)});function cG(t){return vH(lG,t)}const uG=ue("ZodISODuration",(t,e)=>{_7.init(t,e),St.init(t,e)});function fG(t){return xH(uG,t)}const dG=(t,e)=>{xA.init(t,e),t.name="ZodError",Object.defineProperties(t,{format:{value:n=>hV(t,n)},flatten:{value:n=>dV(t,n)},addIssue:{value:n=>{t.issues.push(n),t.message=JSON.stringify(t.issues,sy,2)}},addIssues:{value:n=>{t.issues.push(...n),t.message=JSON.stringify(t.issues,sy,2)}},isEmpty:{get(){return t.issues.length===0}}})},kr=ue("ZodError",dG,{Parent:Error}),hG=D0(kr),pG=j0(kr),mG=Rd(kr),gG=Od(kr),yG=gV(kr),bG=yV(kr),_G=bV(kr),vG=_V(kr),xG=vV(kr),wG=xV(kr),SG=wV(kr),kG=SV(kr),Gt=ue("ZodType",(t,e)=>(Ht.init(t,e),Object.assign(t["~standard"],{jsonSchema:{input:ed(t,"input"),output:ed(t,"output")}}),t.toJSONSchema=BH(t,{}),t.def=e,t.type=e.type,Object.defineProperty(t,"_def",{value:e}),t.check=(...n)=>t.clone(ni(e,{checks:[...e.checks??[],...n.map(r=>typeof r=="function"?{_zod:{check:r,def:{check:"custom"},onattach:[]}}:r)]}),{parent:!0}),t.with=t.check,t.clone=(n,r)=>ri(t,n,r),t.brand=()=>t,t.register=((n,r)=>(n.add(t,r),t)),t.parse=(n,r)=>hG(t,n,r,{callee:t.parse}),t.safeParse=(n,r)=>mG(t,n,r),t.parseAsync=async(n,r)=>pG(t,n,r,{callee:t.parseAsync}),t.safeParseAsync=async(n,r)=>gG(t,n,r),t.spa=t.safeParseAsync,t.encode=(n,r)=>yG(t,n,r),t.decode=(n,r)=>bG(t,n,r),t.encodeAsync=async(n,r)=>_G(t,n,r),t.decodeAsync=async(n,r)=>vG(t,n,r),t.safeEncode=(n,r)=>xG(t,n,r),t.safeDecode=(n,r)=>wG(t,n,r),t.safeEncodeAsync=async(n,r)=>SG(t,n,r),t.safeDecodeAsync=async(n,r)=>kG(t,n,r),t.refine=(n,r)=>t.check(mK(n,r)),t.superRefine=n=>t.check(gK(n)),t.overwrite=n=>t.check(ao(n)),t.optional=()=>ZS(t),t.exactOptional=()=>nK(t),t.nullable=()=>QS(t),t.nullish=()=>ZS(QS(t)),t.nonoptional=n=>lK(t,n),t.array=()=>KG(t),t.or=n=>JG([t,n]),t.and=n=>XG(t,n),t.transform=n=>JS(t,eK(n)),t.default=n=>iK(t,n),t.prefault=n=>oK(t,n),t.catch=n=>uK(t,n),t.pipe=n=>JS(t,n),t.readonly=()=>hK(t),t.describe=n=>{const r=t.clone();return wl.add(r,{description:n}),r},Object.defineProperty(t,"description",{get(){return wl.get(t)?.description},configurable:!0}),t.meta=(...n)=>{if(n.length===0)return wl.get(t);const r=t.clone();return wl.add(r,n[0]),r},t.isOptional=()=>t.safeParse(void 0).success,t.isNullable=()=>t.safeParse(null).success,t.apply=n=>n(t),t)),LA=ue("_ZodString",(t,e)=>{L0.init(t,e),Gt.init(t,e),t._zod.processJSONSchema=(r,s,a)=>UH(t,r,s);const n=t._zod.bag;t.format=n.format??null,t.minLength=n.minimum??null,t.maxLength=n.maximum??null,t.regex=(...r)=>t.check(kH(...r)),t.includes=(...r)=>t.check(TH(...r)),t.startsWith=(...r)=>t.check(AH(...r)),t.endsWith=(...r)=>t.check(RH(...r)),t.min=(...r)=>t.check(Wf(...r)),t.max=(...r)=>t.check(OA(...r)),t.length=(...r)=>t.check(NA(...r)),t.nonempty=(...r)=>t.check(Wf(1,...r)),t.lowercase=r=>t.check(EH(r)),t.uppercase=r=>t.check(CH(r)),t.trim=()=>t.check(NH()),t.normalize=(...r)=>t.check(OH(...r)),t.toLowerCase=()=>t.check(IH()),t.toUpperCase=()=>t.check(MH()),t.slugify=()=>t.check(DH())}),EG=ue("ZodString",(t,e)=>{L0.init(t,e),LA.init(t,e),t.email=n=>t.check(Y7(CG,n)),t.url=n=>t.check(nH(TG,n)),t.jwt=n=>t.check(yH(qG,n)),t.emoji=n=>t.check(rH(AG,n)),t.guid=n=>t.check(HS(GS,n)),t.uuid=n=>t.check(X7(Gu,n)),t.uuidv4=n=>t.check(W7(Gu,n)),t.uuidv6=n=>t.check(eH(Gu,n)),t.uuidv7=n=>t.check(tH(Gu,n)),t.nanoid=n=>t.check(sH(RG,n)),t.guid=n=>t.check(HS(GS,n)),t.cuid=n=>t.check(iH(OG,n)),t.cuid2=n=>t.check(aH(NG,n)),t.ulid=n=>t.check(oH(IG,n)),t.base64=n=>t.check(pH(BG,n)),t.base64url=n=>t.check(mH($G,n)),t.xid=n=>t.check(lH(MG,n)),t.ksuid=n=>t.check(cH(DG,n)),t.ipv4=n=>t.check(uH(jG,n)),t.ipv6=n=>t.check(fH(LG,n)),t.cidrv4=n=>t.check(dH(zG,n)),t.cidrv6=n=>t.check(hH(PG,n)),t.e164=n=>t.check(gH(UG,n)),t.datetime=n=>t.check(iG(n)),t.date=n=>t.check(oG(n)),t.time=n=>t.check(cG(n)),t.duration=n=>t.check(fG(n))});function Fr(t){return J7(EG,t)}const St=ue("ZodStringFormat",(t,e)=>{wt.init(t,e),LA.init(t,e)}),CG=ue("ZodEmail",(t,e)=>{o7.init(t,e),St.init(t,e)}),GS=ue("ZodGUID",(t,e)=>{i7.init(t,e),St.init(t,e)}),Gu=ue("ZodUUID",(t,e)=>{a7.init(t,e),St.init(t,e)}),TG=ue("ZodURL",(t,e)=>{l7.init(t,e),St.init(t,e)}),AG=ue("ZodEmoji",(t,e)=>{c7.init(t,e),St.init(t,e)}),RG=ue("ZodNanoID",(t,e)=>{u7.init(t,e),St.init(t,e)}),OG=ue("ZodCUID",(t,e)=>{f7.init(t,e),St.init(t,e)}),NG=ue("ZodCUID2",(t,e)=>{d7.init(t,e),St.init(t,e)}),IG=ue("ZodULID",(t,e)=>{h7.init(t,e),St.init(t,e)}),MG=ue("ZodXID",(t,e)=>{p7.init(t,e),St.init(t,e)}),DG=ue("ZodKSUID",(t,e)=>{m7.init(t,e),St.init(t,e)}),jG=ue("ZodIPv4",(t,e)=>{v7.init(t,e),St.init(t,e)}),LG=ue("ZodIPv6",(t,e)=>{x7.init(t,e),St.init(t,e)}),zG=ue("ZodCIDRv4",(t,e)=>{w7.init(t,e),St.init(t,e)}),PG=ue("ZodCIDRv6",(t,e)=>{S7.init(t,e),St.init(t,e)}),BG=ue("ZodBase64",(t,e)=>{k7.init(t,e),St.init(t,e)}),$G=ue("ZodBase64URL",(t,e)=>{C7.init(t,e),St.init(t,e)}),UG=ue("ZodE164",(t,e)=>{T7.init(t,e),St.init(t,e)}),qG=ue("ZodJWT",(t,e)=>{R7.init(t,e),St.init(t,e)}),FG=ue("ZodUnknown",(t,e)=>{O7.init(t,e),Gt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>FH()});function KS(){return wH(FG)}const VG=ue("ZodNever",(t,e)=>{N7.init(t,e),Gt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>qH(t,n,r)});function HG(t){return SH(VG,t)}const GG=ue("ZodArray",(t,e)=>{I7.init(t,e),Gt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>KH(t,n,r,s),t.element=e.element,t.min=(n,r)=>t.check(Wf(n,r)),t.nonempty=n=>t.check(Wf(1,n)),t.max=(n,r)=>t.check(OA(n,r)),t.length=(n,r)=>t.check(NA(n,r)),t.unwrap=()=>t.element});function KG(t,e){return jH(GG,t,e)}const ZG=ue("ZodObject",(t,e)=>{D7.init(t,e),Gt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>ZH(t,n,r,s),ct(t,"shape",()=>e.shape),t.keyof=()=>z0(Object.keys(t._zod.def.shape)),t.catchall=n=>t.clone({...t._zod.def,catchall:n}),t.passthrough=()=>t.clone({...t._zod.def,catchall:KS()}),t.loose=()=>t.clone({...t._zod.def,catchall:KS()}),t.strict=()=>t.clone({...t._zod.def,catchall:HG()}),t.strip=()=>t.clone({...t._zod.def,catchall:void 0}),t.extend=n=>oV(t,n),t.safeExtend=n=>lV(t,n),t.merge=n=>cV(t,n),t.pick=n=>iV(t,n),t.omit=n=>aV(t,n),t.partial=(...n)=>uV(zA,t,n[0]),t.required=(...n)=>fV(PA,t,n[0])});function Qr(t,e){const n={type:"object",shape:t??{},...Le(e)};return new ZG(n)}const QG=ue("ZodUnion",(t,e)=>{j7.init(t,e),Gt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>QH(t,n,r,s),t.options=e.options});function JG(t,e){return new QG({type:"union",options:t,...Le(e)})}const YG=ue("ZodIntersection",(t,e)=>{L7.init(t,e),Gt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>JH(t,n,r,s)});function XG(t,e){return new YG({type:"intersection",left:t,right:e})}const ay=ue("ZodEnum",(t,e)=>{z7.init(t,e),Gt.init(t,e),t._zod.processJSONSchema=(r,s,a)=>VH(t,r,s),t.enum=e.entries,t.options=Object.values(e.entries);const n=new Set(Object.keys(e.entries));t.extract=(r,s)=>{const a={};for(const l of r)if(n.has(l))a[l]=e.entries[l];else throw new Error(`Key ${l} not found in enum`);return new ay({...e,checks:[],...Le(s),entries:a})},t.exclude=(r,s)=>{const a={...e.entries};for(const l of r)if(n.has(l))delete a[l];else throw new Error(`Key ${l} not found in enum`);return new ay({...e,checks:[],...Le(s),entries:a})}});function z0(t,e){const n=Array.isArray(t)?Object.fromEntries(t.map(r=>[r,r])):t;return new ay({type:"enum",entries:n,...Le(e)})}const WG=ue("ZodTransform",(t,e)=>{P7.init(t,e),Gt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>GH(t,n),t._zod.parse=(n,r)=>{if(r.direction==="backward")throw new pA(t.constructor.name);n.addIssue=a=>{if(typeof a=="string")n.issues.push(Jl(a,n.value,e));else{const l=a;l.fatal&&(l.continue=!1),l.code??(l.code="custom"),l.input??(l.input=n.value),l.inst??(l.inst=t),n.issues.push(Jl(l))}};const s=e.transform(n.value,n);return s instanceof Promise?s.then(a=>(n.value=a,n)):(n.value=s,n)}});function eK(t){return new WG({type:"transform",transform:t})}const zA=ue("ZodOptional",(t,e)=>{RA.init(t,e),Gt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>jA(t,n,r,s),t.unwrap=()=>t._zod.def.innerType});function ZS(t){return new zA({type:"optional",innerType:t})}const tK=ue("ZodExactOptional",(t,e)=>{B7.init(t,e),Gt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>jA(t,n,r,s),t.unwrap=()=>t._zod.def.innerType});function nK(t){return new tK({type:"optional",innerType:t})}const rK=ue("ZodNullable",(t,e)=>{$7.init(t,e),Gt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>YH(t,n,r,s),t.unwrap=()=>t._zod.def.innerType});function QS(t){return new rK({type:"nullable",innerType:t})}const sK=ue("ZodDefault",(t,e)=>{U7.init(t,e),Gt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>WH(t,n,r,s),t.unwrap=()=>t._zod.def.innerType,t.removeDefault=t.unwrap});function iK(t,e){return new sK({type:"default",innerType:t,get defaultValue(){return typeof e=="function"?e():bA(e)}})}const aK=ue("ZodPrefault",(t,e)=>{q7.init(t,e),Gt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>eG(t,n,r,s),t.unwrap=()=>t._zod.def.innerType});function oK(t,e){return new aK({type:"prefault",innerType:t,get defaultValue(){return typeof e=="function"?e():bA(e)}})}const PA=ue("ZodNonOptional",(t,e)=>{F7.init(t,e),Gt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>XH(t,n,r,s),t.unwrap=()=>t._zod.def.innerType});function lK(t,e){return new PA({type:"nonoptional",innerType:t,...Le(e)})}const cK=ue("ZodCatch",(t,e)=>{V7.init(t,e),Gt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>tG(t,n,r,s),t.unwrap=()=>t._zod.def.innerType,t.removeCatch=t.unwrap});function uK(t,e){return new cK({type:"catch",innerType:t,catchValue:typeof e=="function"?e:()=>e})}const fK=ue("ZodPipe",(t,e)=>{H7.init(t,e),Gt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>nG(t,n,r,s),t.in=e.in,t.out=e.out});function JS(t,e){return new fK({type:"pipe",in:t,out:e})}const dK=ue("ZodReadonly",(t,e)=>{G7.init(t,e),Gt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>rG(t,n,r,s),t.unwrap=()=>t._zod.def.innerType});function hK(t){return new dK({type:"readonly",innerType:t})}const pK=ue("ZodCustom",(t,e)=>{K7.init(t,e),Gt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>HH(t,n)});function mK(t,e={}){return LH(pK,t,e)}function gK(t){return zH(t)}const YS=10*1024;function yK(t){try{const e=JSON.parse(t);return JSON.stringify(e,null,2)}catch{return t}}function bK(t){return t?t.length<=YS?t:t.slice(0,YS)+`
...[TRUNCATED]`:"(empty)"}function _K(t){const e=t.http?.body??{type:"none"},n=e.type==="json"||e.type==="raw"?e.content:e.type==="form-urlencoded"?e.data:e.type==="form-data"?e.data.map(r=>({key:r.key,type:r.type,value:r.type==="file"?r.file?.name:r.value})):null;return{method:t.http?.method??"GET",url:t.url,headers:(t.http?.headers??[]).filter(r=>r.enabled!==!1),queryParams:(t.http?.query??[]).filter(r=>r.enabled!==!1),body:{type:e.type,content:n}}}function vK(t,e){const n=t.http?.response;return n?{status:n.status,statusCode:n.statusCode,headers:n.headers,body:bK(e),duration:n.duration}:null}const BA=Qr({}),xK=Qr({method:z0(["GET","POST","PUT","PATCH","DELETE","OPTIONS","HEAD"]).describe("The HTTP method")}),wK=Qr({url:Fr().describe("The full URL for the request")}),SK=Qr({headers:Fr().describe('JSON array of header objects with "key", "value", and optional "enabled" (default true) properties. Example: [{"key": "Content-Type", "value": "application/json"}]')}),kK=Qr({key:Fr().describe("The header name"),value:Fr().describe("The header value")}),EK=Qr({params:Fr().describe('JSON array of parameter objects with "key", "value", and optional "enabled" (default true) properties. Example: [{"key": "page", "value": "1"}]')}),CK=Qr({key:Fr().describe("The parameter name"),value:Fr().describe("The parameter value")}),TK=Qr({type:z0(["none","json","xml","form-urlencoded","form-data","raw"]).describe("The body type"),content:Fr().optional().describe("The body content. For JSON/XML/raw, provide the content string. For form-urlencoded/form-data, provide JSON array like headers/params. Note: form-data only supports text fields (not file uploads) via this tool.")}),AK=Qr({key:Fr().describe("The header name to remove (case-insensitive)")}),RK=Qr({key:Fr().describe("The query parameter name to remove")}),OK=Nr({name:"get_current_request",description:"Get the current HTTP request configuration including method, URL, headers, query params, and body",inputSchema:BA}),NK=Nr({name:"get_response",description:"Get the response from the last executed request, including status, headers, and body",inputSchema:BA}),IK=Nr({name:"set_method",description:"Set the HTTP method for the request",inputSchema:xK}),MK=Nr({name:"set_url",description:"Set the URL for the request",inputSchema:wK}),DK=Nr({name:"set_headers",description:"Set the headers for the request. This replaces all existing headers.",inputSchema:SK}),jK=Nr({name:"add_header",description:"Add a single header to the request",inputSchema:kK}),LK=Nr({name:"set_query_params",description:"Set the query parameters for the request. This replaces all existing query params.",inputSchema:EK}),zK=Nr({name:"add_query_param",description:"Add a single query parameter to the request",inputSchema:CK}),PK=Nr({name:"set_body",description:"Set the request body",inputSchema:TK}),BK=Nr({name:"remove_header",description:"Remove a header from the request by name",inputSchema:AK}),$K=Nr({name:"remove_query_param",description:"Remove a query parameter from the request by name",inputSchema:RK});function UK(t){const{request:e,setters:n,responseBodyText:r}=t,s=OK.client(async()=>_K(e)),a=NK.client(async()=>vK(e,r)||{error:"No response available. Execute the request first."}),l=IK.client(async x=>{const E=x;return n.setMethod(E.method),{success:!0,method:E.method}}),u=MK.client(async x=>{const E=x;return n.setUrl(E.url),{success:!0,url:E.url}}),f=DK.client(async x=>{const E=x;try{const S=JSON.parse(E.headers).map(T=>({id:Ur(),key:T.key,value:T.value,enabled:T.enabled!==!1}));return n.setHeaders(S),{success:!0,headerCount:S.length}}catch(S){return{success:!1,error:`Invalid JSON for headers: ${S instanceof Error?S.message:"parse error"}`}}}),d=jK.client(async x=>{const E=x,T=[...e.http?.headers??[],{id:Ur(),key:E.key,value:E.value,enabled:!0}];return n.setHeaders(T),{success:!0,added:{key:E.key,value:E.value}}}),m=LK.client(async x=>{const E=x;try{const S=JSON.parse(E.params).map(T=>({id:Ur(),key:T.key,value:T.value,enabled:T.enabled!==!1}));return n.setQuery(S),{success:!0,paramCount:S.length}}catch(S){return{success:!1,error:`Invalid JSON for query params: ${S instanceof Error?S.message:"parse error"}`}}}),p=zK.client(async x=>{const E=x,T=[...e.http?.query??[],{id:Ur(),key:E.key,value:E.value,enabled:!0}];return n.setQuery(T),{success:!0,added:{key:E.key,value:E.value}}}),y=PK.client(async x=>{const E=x;try{let S;switch(E.type){case"none":S={type:"none"};break;case"json":S={type:"json",content:yK(E.content||"")};break;case"xml":S={type:"xml",content:E.content||""};break;case"raw":S={type:"raw",content:E.content||""};break;case"form-urlencoded":{S={type:"form-urlencoded",data:E.content?JSON.parse(E.content).map(A=>({id:Ur(),key:A.key,value:A.value,enabled:A.enabled!==!1})):[]};break}case"form-data":{S={type:"form-data",data:E.content?JSON.parse(E.content).map(A=>({id:Ur(),key:A.key,type:"text",value:A.value||"",enabled:A.enabled!==!1,file:null,fileName:""})):[]};break}default:S={type:"none"}}return n.setBody(S),{success:!0,bodyType:E.type}}catch(S){return{success:!1,error:`Invalid body content: ${S instanceof Error?S.message:"parse error"}`}}}),g=BK.client(async x=>{const E=x,S=E.key.toLowerCase(),T=e.http?.headers??[],A=T.filter(D=>D.key.toLowerCase()!==S),j=T.length-A.length;return j===0?{success:!1,error:`Header '${E.key}' not found`}:(n.setHeaders(A),{success:!0,removed:E.key,removedCount:j})}),v=$K.client(async x=>{const E=x,S=e.http?.query??[],T=S.filter(j=>j.key!==E.key),A=S.length-T.length;return A===0?{success:!1,error:`Query parameter '${E.key}' not found`}:(n.setQuery(T),{success:!0,removed:E.key,removedCount:A})});return w9(s,a,l,u,f,d,g,m,p,v,y)}function qK(){return`You are an AI assistant embedded in an HTTP client (similar to Postman or Insomnia). You have tools that directly modify the request form visible to the user in real-time.

IMPORTANT: When you use tools like set_url, set_headers, set_body, etc., the changes appear immediately in the user's request panel. You are actively editing their requestnot just describing what to do. The user sees updates live as you make them.

Your capabilities:
- View the current request configuration (method, URL, headers, query params, body)
- Directly modify any part of the requestchanges are applied instantly to the UI
- View and analyze responses after the user executes the request

Guidelines:
- When the user asks to create or modify a request, use the appropriate tools to make the changes directly
- After making changes, briefly confirm what you did (e.g., "I've set the URL to ... and added the Authorization header")
- You cannot execute/send requeststhe user must click Send. After they do, you can analyze the response using get_response
- When analyzing responses, look for errors, unexpected data, or issues
- Be concise but helpful in your explanations
- If the user's request is ambiguous, ask for clarification
- When adding headers or params, preserve existing ones unless the user asks to replace them
- Format your responses using Markdown: use **bold**, \`code\`, code blocks with language tags, lists, and headers when appropriate`}const XS={name:"Request Assistant",placeholder:"Ask about your request..."};function FK(t){const e=qe.c(86),{isOpen:n,onClose:r,request:s,setters:a}=t,[l,u]=K.useState(""),[f,d]=K.useState(),m=K.useRef(null),p=K.useRef(null),y=K.useRef(s.id);let g;e[0]!==s.http?.response?(g=()=>{(async function(){const ve=s.http?.response;if(ve?.body)try{const Ie=await ve.body.text();d(Ie)}catch{d("(unable to read response body)")}else d(void 0)})()},e[0]=s.http?.response,e[1]=g):g=e[1];const v=s.http?.response,x=s.http?.response?.body;let E;e[2]!==v||e[3]!==x?(E=[v,x],e[2]=v,e[3]=x,e[4]=E):E=e[4],K.useEffect(g,E);let S;e[5]!==s||e[6]!==f||e[7]!==a?(S={request:s,setters:a,responseBodyText:f},e[5]=s,e[6]=f,e[7]=a,e[8]=S):S=e[8];const T=S;let A;e[9]!==T?(A=UK(T),e[9]=T,e[10]=A):A=e[10];const j=A;let D;if(e[11]!==j){const ye=eV(),ge=WF(ye),ve=qK();D=S9(Ie=>n9({adapter:ge,messages:Ie,tools:j,systemPrompts:[ve],agentLoopStrategy:IC(10)})),e[11]=j,e[12]=D}else D=e[12];const I=D;let P;e[13]!==I||e[14]!==j?(P={connection:I,tools:j},e[13]=I,e[14]=j,e[15]=P):P=e[15];const{messages:q,sendMessage:H,isLoading:z,stop:Q,clear:re}=k9(P);let pe,X;e[16]!==re||e[17]!==s.id?(X=()=>{y.current!==s.id&&(re(),y.current=s.id)},pe=[s.id,re],e[16]=re,e[17]=s.id,e[18]=pe,e[19]=X):(pe=e[18],X=e[19]),K.useEffect(X,pe);let V;e[20]===Symbol.for("react.memo_cache_sentinel")?(V=()=>{m.current?.scrollIntoView({behavior:"smooth"})},e[20]=V):V=e[20];let $;e[21]!==q?($=[q],e[21]=q,e[22]=$):$=e[22],K.useEffect(V,$);let G,oe;e[23]!==n?(G=()=>{n&&p.current?.focus()},oe=[n],e[23]=n,e[24]=G,e[25]=oe):(G=e[24],oe=e[25]),K.useEffect(G,oe);let M;e[26]!==l||e[27]!==z||e[28]!==H?(M=ye=>{ye.preventDefault(),!(!l.trim()||z)&&(H(l.trim()),u(""))},e[26]=l,e[27]=z,e[28]=H,e[29]=M):M=e[29];const C=M;let N;e[30]!==C?(N=ye=>{ye.key==="Enter"&&!ye.shiftKey&&(ye.preventDefault(),C(ye))},e[30]=C,e[31]=N):N=e[31];const U=N,R=VK;let te;e[32]!==z||e[33]!==q?(te=(ye,ge)=>z&&ye.role==="assistant"&&ge===q.length-1,e[32]=z,e[33]=q,e[34]=te):te=e[34];const ce=te;if(!n)return null;let he;e[35]===Symbol.for("react.memo_cache_sentinel")?(he=w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx(Za,{size:16,className:"text-amber-500"}),w.jsx("h3",{className:"font-medium text-neutral-900 dark:text-neutral-100",children:XS.name})]}),e[35]=he):he=e[35];let xe;e[36]===Symbol.for("react.memo_cache_sentinel")?(xe=w.jsx(tc,{size:16}),e[36]=xe):xe=e[36];let Me;e[37]!==re?(Me=w.jsx("button",{onClick:re,className:"p-1.5 text-neutral-500 hover:text-neutral-900 hover:bg-neutral-100 dark:hover:text-neutral-300 dark:hover:bg-neutral-800 rounded transition-colors",title:"Clear chat",children:xe}),e[37]=re,e[38]=Me):Me=e[38];let je;e[39]===Symbol.for("react.memo_cache_sentinel")?(je=w.jsx(Ul,{size:16}),e[39]=je):je=e[39];let et;e[40]!==r?(et=w.jsx("button",{onClick:r,className:"p-1.5 text-neutral-500 hover:text-neutral-900 hover:bg-neutral-100 dark:hover:text-neutral-300 dark:hover:bg-neutral-800 rounded transition-colors",children:je}),e[40]=r,e[41]=et):et=e[41];let pt;e[42]!==Me||e[43]!==et?(pt=w.jsxs("div",{className:"shrink-0 h-12 px-4 flex items-center justify-between border-b border-neutral-200 dark:border-neutral-800",children:[he,w.jsxs("div",{className:"flex items-center gap-1",children:[Me,et]})]}),e[42]=Me,e[43]=et,e[44]=pt):pt=e[44];let kt;e[45]!==q.length?(kt=q.length===0&&w.jsxs("div",{className:"text-center text-neutral-500 dark:text-neutral-400 text-sm py-8",children:[w.jsx(Za,{size:24,className:"mx-auto mb-3 text-amber-500/50"}),w.jsx("p",{className:"mb-2",children:"Ask me to help build your request"}),w.jsx("p",{className:"text-xs text-neutral-400 dark:text-neutral-500",children:'Examples: "Create a POST request to /api/users with a JSON body" or "Add an Authorization header"'})]}),e[45]=q.length,e[46]=kt):kt=e[46];let Wt;if(e[47]!==ce||e[48]!==q){let ye;e[50]!==ce?(ye=(ge,ve)=>{const Ie=R(ge);return w.jsx("div",{className:`text-sm ${ge.role==="user"?"bg-neutral-100 dark:bg-neutral-800 rounded-lg px-3 py-2":""}`,children:w.jsx("div",{className:ge.role==="user"?"text-neutral-900 dark:text-neutral-100":"text-neutral-700 dark:text-neutral-300",children:ge.role==="assistant"?Ie?w.jsx(NC,{children:Ie}):ce(ge,ve)?w.jsxs("span",{className:"flex items-center gap-2 text-neutral-400",children:[w.jsx(Sf,{size:14,className:"animate-spin"}),"Thinking..."]}):null:w.jsx("span",{className:"whitespace-pre-wrap",children:Ie})})},ge.id)},e[50]=ce,e[51]=ye):ye=e[51],Wt=q.map(ye),e[47]=ce,e[48]=q,e[49]=Wt}else Wt=e[49];let bt;e[52]!==z||e[53]!==q?(bt=z&&(q.length===0||q[q.length-1]?.role==="user")&&w.jsx("div",{className:"text-sm",children:w.jsx("div",{className:"text-neutral-800 dark:text-neutral-200",children:w.jsxs("span",{className:"flex items-center gap-2 text-neutral-400",children:[w.jsx(Sf,{size:14,className:"animate-spin"}),"Thinking..."]})})}),e[52]=z,e[53]=q,e[54]=bt):bt=e[54];let hn;e[55]===Symbol.for("react.memo_cache_sentinel")?(hn=w.jsx("div",{ref:m}),e[55]=hn):hn=e[55];let en;e[56]!==kt||e[57]!==Wt||e[58]!==bt?(en=w.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 min-h-0",children:[kt,Wt,bt,hn]}),e[56]=kt,e[57]=Wt,e[58]=bt,e[59]=en):en=e[59];let Nn;e[60]===Symbol.for("react.memo_cache_sentinel")?(Nn=ye=>u(ye.target.value),e[60]=Nn):Nn=e[60];let sr;e[61]===Symbol.for("react.memo_cache_sentinel")?(sr={maxHeight:"120px"},e[61]=sr):sr=e[61];let pn;e[62]!==U||e[63]!==l||e[64]!==z?(pn=w.jsx("textarea",{ref:p,value:l,onChange:Nn,onKeyDown:U,placeholder:XS.placeholder,rows:1,disabled:z,className:"flex-1 px-3 py-2 bg-neutral-50 border border-neutral-200 dark:bg-neutral-800 dark:border-neutral-700 rounded-lg text-neutral-900 dark:text-neutral-100 text-sm placeholder-neutral-400 resize-none focus:outline-none focus:ring-2 focus:ring-amber-500/50 focus:border-amber-500 disabled:opacity-50",style:sr}),e[62]=U,e[63]=l,e[64]=z,e[65]=pn):pn=e[65];const wn=z?"button":"submit",ke=z?Q:void 0;let _e;e[66]!==l||e[67]!==z?(_e=!z&&!l.trim(),e[66]=l,e[67]=z,e[68]=_e):_e=e[68];let Te;e[69]!==z?(Te=z?w.jsx(N3,{size:16}):w.jsx(E3,{size:16}),e[69]=z,e[70]=Te):Te=e[70];let be;e[71]!==wn||e[72]!==ke||e[73]!==_e||e[74]!==Te?(be=w.jsx("button",{type:wn,onClick:ke,disabled:_e,className:"p-2 bg-amber-500 hover:bg-amber-400 disabled:bg-neutral-300 dark:disabled:bg-neutral-700 disabled:text-neutral-500 text-white rounded-lg transition-colors",children:Te}),e[71]=wn,e[72]=ke,e[73]=_e,e[74]=Te,e[75]=be):be=e[75];let st;e[76]!==pn||e[77]!==be?(st=w.jsxs("div",{className:"flex items-end gap-2",children:[pn,be]}),e[76]=pn,e[77]=be,e[78]=st):st=e[78];let ne;e[79]!==C||e[80]!==st?(ne=w.jsx("form",{onSubmit:C,className:"shrink-0 p-3 border-t border-neutral-200 dark:border-neutral-800",children:st}),e[79]=C,e[80]=st,e[81]=ne):ne=e[81];let fe;return e[82]!==pt||e[83]!==en||e[84]!==ne?(fe=w.jsxs("div",{className:"w-96 shrink-0 bg-white border border-neutral-200 dark:bg-neutral-900 dark:border-neutral-800 flex flex-col rounded-xl overflow-hidden",children:[pt,en,ne]}),e[82]=pt,e[83]=en,e[84]=ne,e[85]=fe):fe=e[85],fe}function VK(t){return t.parts.filter(GK).map(HK).join("").replace(/^undefined/,"")}function HK(t){return t.content}function GK(t){return t.type==="text"&&!!t.content}function KK(){const t=qe.c(13),{request:e,aiPanelOpen:n,toggleAiPanel:r,setMethod:s,setUrl:a,setHeaders:l,setQuery:u,setBody:f}=dn();let d;t[0]===Symbol.for("react.memo_cache_sentinel")?(d=w.jsx(K3,{}),t[0]=d):d=t[0];let m;t[1]===Symbol.for("react.memo_cache_sentinel")?(m=w.jsx("div",{className:"flex-1 flex flex-col overflow-hidden gap-2 min-w-0",children:w.jsx("div",{className:"flex-1 overflow-hidden min-h-0",children:w.jsx(Jq,{})})}),t[1]=m):m=t[1];let p;t[2]!==n||t[3]!==e||t[4]!==f||t[5]!==l||t[6]!==s||t[7]!==u||t[8]!==a||t[9]!==r?(p=n&&Oy().ai?.model&&w.jsx(FK,{isOpen:n,onClose:r,request:e,setters:{setMethod:s,setUrl:a,setHeaders:l,setQuery:u,setBody:f}}),t[2]=n,t[3]=e,t[4]=f,t[5]=l,t[6]=s,t[7]=u,t[8]=a,t[9]=r,t[10]=p):p=t[10];let y;return t[11]!==p?(y=w.jsxs("div",{className:"h-screen flex bg-neutral-50 dark:bg-[#0d0d0d] py-2 pr-2 pl-1 gap-2 text-neutral-900 dark:text-neutral-100",children:[d,m,p]}),t[11]=p,t[12]=y):y=t[12],y}function ZK(){const t=qe.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=w.jsx(ID,{children:w.jsx(DD,{children:w.jsx(KK,{})})}),t[0]=e):e=t[0],e}Q3().then(()=>{oO.createRoot(document.getElementById("root")).render(w.jsx(K.StrictMode,{children:w.jsx(MO,{client:Ak,children:w.jsx(ZK,{})})}))});
