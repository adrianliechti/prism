const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/angular-html-CU67Zn6k.js","assets/html-GMplVEZG.js","assets/javascript-wDzz0qaB.js","assets/css-DPfMkruS.js","assets/angular-ts-BwZT4LLn.js","assets/scss-OYdSNvt2.js","assets/apl-dKokRX4l.js","assets/xml-sdJ4AIDG.js","assets/java-CylS5w8V.js","assets/json-Cp-IABpG.js","assets/astro-CbQHKStN.js","assets/typescript-BPQ3VLAy.js","assets/postcss-CXtECtnM.js","assets/tsx-COt5Ahok.js","assets/blade-DVc8C-J4.js","assets/html-derivative-BFtXZ54Q.js","assets/sql-BLtJtn59.js","assets/bsl-BO_Y6i37.js","assets/sdbl-DVxCFoDh.js","assets/cairo-KRGpt6FW.js","assets/python-B6aJPvgy.js","assets/cobol-nwyudZeR.js","assets/coffee-Ch7k5sss.js","assets/cpp-CofmeUqb.js","assets/regexp-CDVJQ6XC.js","assets/glsl-DplSGwfg.js","assets/c-BIGW1oBm.js","assets/crystal-tKQVLTB8.js","assets/shellscript-Yzrsuije.js","assets/edge-BkV0erSs.js","assets/elixir-CDX3lj18.js","assets/elm-DbKCFpqz.js","assets/erb-BOJIQeun.js","assets/ruby-BvKwtOVI.js","assets/haml-B8DHNrY2.js","assets/graphql-ChdNCCLP.js","assets/jsx-g9-lgVsj.js","assets/lua-BbnMAYS6.js","assets/yaml-Buea-lGh.js","assets/erlang-DsQrWhSR.js","assets/markdown-Cvjx9yec.js","assets/fortran-fixed-form-BZjJHVRy.js","assets/fortran-free-form-D22FLkUw.js","assets/fsharp-CXgrBDvD.js","assets/gdresource-B7Tvp0Sc.js","assets/gdshader-DkwncUOv.js","assets/gdscript-DTMYz4Jt.js","assets/git-commit-F4YmCXRG.js","assets/diff-D97Zzqfu.js","assets/git-rebase-r7XF79zn.js","assets/glimmer-js-Rg0-pVw9.js","assets/glimmer-ts-U6CK756n.js","assets/hack-CaT9iCJl.js","assets/handlebars-BL8al0AC.js","assets/http-jrhK8wxY.js","assets/hurl-irOxFIW8.js","assets/csv-fuZLfV_i.js","assets/hxml-Bvhsp5Yf.js","assets/haxe-CzTSHFRz.js","assets/jinja-4LBKfQ-Z.js","assets/jison-wvAkD_A8.js","assets/julia-C8NyazO9.js","assets/r-DiinP2Uv.js","assets/latex-BdAV_C_H.js","assets/tex-CxkMU7Pf.js","assets/liquid-DYVedYrR.js","assets/marko-CPi9NSCl.js","assets/less-B1dDrJ26.js","assets/mdc-DUICxH0z.js","assets/nginx-DknmC5AR.js","assets/nim-CVrawwO9.js","assets/perl-C0TMdlhV.js","assets/php-CDn_0X-4.js","assets/pug-CGlum2m_.js","assets/qml-3beO22l8.js","assets/razor-CE9lU5zL.js","assets/csharp-K5feNrxe.js","assets/rst-B0xPkSld.js","assets/cmake-D1j8_8rp.js","assets/sas-cz2c8ADy.js","assets/shaderlab-Dg9Lc6iA.js","assets/hlsl-D3lLCCz7.js","assets/shellsession-BADoaaVG.js","assets/soy-Brmx7dQM.js","assets/sparql-rVzFXLq3.js","assets/turtle-BsS91CYL.js","assets/stata-BH5u7GGu.js","assets/svelte-3Dk4HxPD.js","assets/templ-W15q3VgB.js","assets/go-Dn2_MT6a.js","assets/ts-tags-zn1MmPIZ.js","assets/twig-CO9l9SDP.js","assets/vue-DnHKYNfI.js","assets/vue-html-CChd_i61.js","assets/vue-vine-8moa0y9V.js","assets/stylus-BEDo0Tqx.js","assets/xsl-CtQFsRM5.js"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();function ck(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var nm={exports:{}},ul={};var qx;function aO(){if(qx)return ul;qx=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,s,a){var l=null;if(a!==void 0&&(l=""+a),s.key!==void 0&&(l=""+s.key),"key"in s){a={};for(var u in s)u!=="key"&&(a[u]=s[u])}else a=s;return s=a.ref,{$$typeof:t,type:r,key:l,ref:s!==void 0?s:null,props:a}}return ul.Fragment=e,ul.jsx=n,ul.jsxs=n,ul}var Fx;function oO(){return Fx||(Fx=1,nm.exports=aO()),nm.exports}var x=oO(),rm={exports:{}},Be={};var Vx;function lO(){if(Vx)return Be;Vx=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),p=Symbol.for("react.activity"),y=Symbol.iterator;function g(j){return j===null||typeof j!="object"?null:(j=y&&j[y]||j["@@iterator"],typeof j=="function"?j:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,E={};function k(j,G,O){this.props=j,this.context=G,this.refs=E,this.updater=O||v}k.prototype.isReactComponent={},k.prototype.setState=function(j,G){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,G,"setState")},k.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")};function C(){}C.prototype=k.prototype;function T(j,G,O){this.props=j,this.context=G,this.refs=E,this.updater=O||v}var D=T.prototype=new C;D.constructor=T,w(D,k.prototype),D.isPureReactComponent=!0;var N=Array.isArray;function R(){}var $={H:null,A:null,T:null,S:null},q=Object.prototype.hasOwnProperty;function H(j,G,O){var le=O.ref;return{$$typeof:t,type:j,key:G,ref:le!==void 0?le:null,props:O}}function M(j,G){return H(j.type,G,j.props)}function Q(j){return typeof j=="object"&&j!==null&&j.$$typeof===t}function ne(j){var G={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(O){return G[O]})}var ye=/\/+/g;function X(j,G){return typeof j=="object"&&j!==null&&j.key!=null?ne(""+j.key):G.toString(36)}function F(j){switch(j.status){case"fulfilled":return j.value;case"rejected":throw j.reason;default:switch(typeof j.status=="string"?j.then(R,R):(j.status="pending",j.then(function(G){j.status==="pending"&&(j.status="fulfilled",j.value=G)},function(G){j.status==="pending"&&(j.status="rejected",j.reason=G)})),j.status){case"fulfilled":return j.value;case"rejected":throw j.reason}}throw j}function B(j,G,O,le,L){var P=typeof j;(P==="undefined"||P==="boolean")&&(j=null);var pe=!1;if(j===null)pe=!0;else switch(P){case"bigint":case"string":case"number":pe=!0;break;case"object":switch(j.$$typeof){case t:case e:pe=!0;break;case m:return pe=j._init,B(pe(j._payload),G,O,le,L)}}if(pe)return L=L(j),pe=le===""?"."+X(j,0):le,N(L)?(O="",pe!=null&&(O=pe.replace(ye,"$&/")+"/"),B(L,G,O,"",function(Te){return Te})):L!=null&&(Q(L)&&(L=M(L,O+(L.key==null||j&&j.key===L.key?"":(""+L.key).replace(ye,"$&/")+"/")+pe)),G.push(L)),1;pe=0;var xe=le===""?".":le+":";if(N(j))for(var ve=0;ve<j.length;ve++)le=j[ve],P=xe+X(le,ve),pe+=B(le,G,O,P,L);else if(ve=g(j),typeof ve=="function")for(j=ve.call(j),ve=0;!(le=j.next()).done;)le=le.value,P=xe+X(le,ve++),pe+=B(le,G,O,P,L);else if(P==="object"){if(typeof j.then=="function")return B(F(j),G,O,le,L);throw G=String(j),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.")}return pe}function K(j,G,O){if(j==null)return j;var le=[],L=0;return B(j,le,"","",function(P){return G.call(O,P,L++)}),le}function ie(j){if(j._status===-1){var G=j._result;G=G(),G.then(function(O){(j._status===0||j._status===-1)&&(j._status=1,j._result=O)},function(O){(j._status===0||j._status===-1)&&(j._status=2,j._result=O)}),j._status===-1&&(j._status=0,j._result=G)}if(j._status===1)return j._result.default;throw j._result}var re=typeof reportError=="function"?reportError:function(j){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var G=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof j=="object"&&j!==null&&typeof j.message=="string"?String(j.message):String(j),error:j});if(!window.dispatchEvent(G))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",j);return}console.error(j)},I={map:K,forEach:function(j,G,O){K(j,function(){G.apply(this,arguments)},O)},count:function(j){var G=0;return K(j,function(){G++}),G},toArray:function(j){return K(j,function(G){return G})||[]},only:function(j){if(!Q(j))throw Error("React.Children.only expected to receive a single React element child.");return j}};return Be.Activity=p,Be.Children=I,Be.Component=k,Be.Fragment=n,Be.Profiler=s,Be.PureComponent=T,Be.StrictMode=r,Be.Suspense=f,Be.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=$,Be.__COMPILER_RUNTIME={__proto__:null,c:function(j){return $.H.useMemoCache(j)}},Be.cache=function(j){return function(){return j.apply(null,arguments)}},Be.cacheSignal=function(){return null},Be.cloneElement=function(j,G,O){if(j==null)throw Error("The argument must be a React element, but you passed "+j+".");var le=w({},j.props),L=j.key;if(G!=null)for(P in G.key!==void 0&&(L=""+G.key),G)!q.call(G,P)||P==="key"||P==="__self"||P==="__source"||P==="ref"&&G.ref===void 0||(le[P]=G[P]);var P=arguments.length-2;if(P===1)le.children=O;else if(1<P){for(var pe=Array(P),xe=0;xe<P;xe++)pe[xe]=arguments[xe+2];le.children=pe}return H(j.type,L,le)},Be.createContext=function(j){return j={$$typeof:l,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null},j.Provider=j,j.Consumer={$$typeof:a,_context:j},j},Be.createElement=function(j,G,O){var le,L={},P=null;if(G!=null)for(le in G.key!==void 0&&(P=""+G.key),G)q.call(G,le)&&le!=="key"&&le!=="__self"&&le!=="__source"&&(L[le]=G[le]);var pe=arguments.length-2;if(pe===1)L.children=O;else if(1<pe){for(var xe=Array(pe),ve=0;ve<pe;ve++)xe[ve]=arguments[ve+2];L.children=xe}if(j&&j.defaultProps)for(le in pe=j.defaultProps,pe)L[le]===void 0&&(L[le]=pe[le]);return H(j,P,L)},Be.createRef=function(){return{current:null}},Be.forwardRef=function(j){return{$$typeof:u,render:j}},Be.isValidElement=Q,Be.lazy=function(j){return{$$typeof:m,_payload:{_status:-1,_result:j},_init:ie}},Be.memo=function(j,G){return{$$typeof:d,type:j,compare:G===void 0?null:G}},Be.startTransition=function(j){var G=$.T,O={};$.T=O;try{var le=j(),L=$.S;L!==null&&L(O,le),typeof le=="object"&&le!==null&&typeof le.then=="function"&&le.then(R,re)}catch(P){re(P)}finally{G!==null&&O.types!==null&&(G.types=O.types),$.T=G}},Be.unstable_useCacheRefresh=function(){return $.H.useCacheRefresh()},Be.use=function(j){return $.H.use(j)},Be.useActionState=function(j,G,O){return $.H.useActionState(j,G,O)},Be.useCallback=function(j,G){return $.H.useCallback(j,G)},Be.useContext=function(j){return $.H.useContext(j)},Be.useDebugValue=function(){},Be.useDeferredValue=function(j,G){return $.H.useDeferredValue(j,G)},Be.useEffect=function(j,G){return $.H.useEffect(j,G)},Be.useEffectEvent=function(j){return $.H.useEffectEvent(j)},Be.useId=function(){return $.H.useId()},Be.useImperativeHandle=function(j,G,O){return $.H.useImperativeHandle(j,G,O)},Be.useInsertionEffect=function(j,G){return $.H.useInsertionEffect(j,G)},Be.useLayoutEffect=function(j,G){return $.H.useLayoutEffect(j,G)},Be.useMemo=function(j,G){return $.H.useMemo(j,G)},Be.useOptimistic=function(j,G){return $.H.useOptimistic(j,G)},Be.useReducer=function(j,G,O){return $.H.useReducer(j,G,O)},Be.useRef=function(j){return $.H.useRef(j)},Be.useState=function(j){return $.H.useState(j)},Be.useSyncExternalStore=function(j,G,O){return $.H.useSyncExternalStore(j,G,O)},Be.useTransition=function(){return $.H.useTransition()},Be.version="19.2.3",Be}var Hx;function cd(){return Hx||(Hx=1,rm.exports=lO()),rm.exports}var Z=cd(),sm={exports:{}},fl={},im={exports:{}},am={};var Gx;function cO(){return Gx||(Gx=1,(function(t){function e(B,K){var ie=B.length;B.push(K);e:for(;0<ie;){var re=ie-1>>>1,I=B[re];if(0<s(I,K))B[re]=K,B[ie]=I,ie=re;else break e}}function n(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var K=B[0],ie=B.pop();if(ie!==K){B[0]=ie;e:for(var re=0,I=B.length,j=I>>>1;re<j;){var G=2*(re+1)-1,O=B[G],le=G+1,L=B[le];if(0>s(O,ie))le<I&&0>s(L,O)?(B[re]=L,B[le]=ie,re=le):(B[re]=O,B[G]=ie,re=G);else if(le<I&&0>s(L,ie))B[re]=L,B[le]=ie,re=le;else break e}}return K}function s(B,K){var ie=B.sortIndex-K.sortIndex;return ie!==0?ie:B.id-K.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var l=Date,u=l.now();t.unstable_now=function(){return l.now()-u}}var f=[],d=[],m=1,p=null,y=3,g=!1,v=!1,w=!1,E=!1,k=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;function D(B){for(var K=n(d);K!==null;){if(K.callback===null)r(d);else if(K.startTime<=B)r(d),K.sortIndex=K.expirationTime,e(f,K);else break;K=n(d)}}function N(B){if(w=!1,D(B),!v)if(n(f)!==null)v=!0,R||(R=!0,ne());else{var K=n(d);K!==null&&F(N,K.startTime-B)}}var R=!1,$=-1,q=5,H=-1;function M(){return E?!0:!(t.unstable_now()-H<q)}function Q(){if(E=!1,R){var B=t.unstable_now();H=B;var K=!0;try{e:{v=!1,w&&(w=!1,C($),$=-1),g=!0;var ie=y;try{t:{for(D(B),p=n(f);p!==null&&!(p.expirationTime>B&&M());){var re=p.callback;if(typeof re=="function"){p.callback=null,y=p.priorityLevel;var I=re(p.expirationTime<=B);if(B=t.unstable_now(),typeof I=="function"){p.callback=I,D(B),K=!0;break t}p===n(f)&&r(f),D(B)}else r(f);p=n(f)}if(p!==null)K=!0;else{var j=n(d);j!==null&&F(N,j.startTime-B),K=!1}}break e}finally{p=null,y=ie,g=!1}K=void 0}}finally{K?ne():R=!1}}}var ne;if(typeof T=="function")ne=function(){T(Q)};else if(typeof MessageChannel<"u"){var ye=new MessageChannel,X=ye.port2;ye.port1.onmessage=Q,ne=function(){X.postMessage(null)}}else ne=function(){k(Q,0)};function F(B,K){$=k(function(){B(t.unstable_now())},K)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):q=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_next=function(B){switch(y){case 1:case 2:case 3:var K=3;break;default:K=y}var ie=y;y=K;try{return B()}finally{y=ie}},t.unstable_requestPaint=function(){E=!0},t.unstable_runWithPriority=function(B,K){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var ie=y;y=B;try{return K()}finally{y=ie}},t.unstable_scheduleCallback=function(B,K,ie){var re=t.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?re+ie:re):ie=re,B){case 1:var I=-1;break;case 2:I=250;break;case 5:I=1073741823;break;case 4:I=1e4;break;default:I=5e3}return I=ie+I,B={id:m++,callback:K,priorityLevel:B,startTime:ie,expirationTime:I,sortIndex:-1},ie>re?(B.sortIndex=ie,e(d,B),n(f)===null&&B===n(d)&&(w?(C($),$=-1):w=!0,F(N,ie-re))):(B.sortIndex=I,e(f,B),v||g||(v=!0,R||(R=!0,ne()))),B},t.unstable_shouldYield=M,t.unstable_wrapCallback=function(B){var K=y;return function(){var ie=y;y=K;try{return B.apply(this,arguments)}finally{y=ie}}}})(am)),am}var Kx;function uO(){return Kx||(Kx=1,im.exports=cO()),im.exports}var om={exports:{}},kn={};var Zx;function fO(){if(Zx)return kn;Zx=1;var t=cd();function e(f){var d="https://react.dev/errors/"+f;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)d+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+f+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},s=Symbol.for("react.portal");function a(f,d,m){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:p==null?null:""+p,children:f,containerInfo:d,implementation:m}}var l=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(f,d){if(f==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return kn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,kn.createPortal=function(f,d){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(e(299));return a(f,d,null,m)},kn.flushSync=function(f){var d=l.T,m=r.p;try{if(l.T=null,r.p=2,f)return f()}finally{l.T=d,r.p=m,r.d.f()}},kn.preconnect=function(f,d){typeof f=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,r.d.C(f,d))},kn.prefetchDNS=function(f){typeof f=="string"&&r.d.D(f)},kn.preinit=function(f,d){if(typeof f=="string"&&d&&typeof d.as=="string"){var m=d.as,p=u(m,d.crossOrigin),y=typeof d.integrity=="string"?d.integrity:void 0,g=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;m==="style"?r.d.S(f,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:p,integrity:y,fetchPriority:g}):m==="script"&&r.d.X(f,{crossOrigin:p,integrity:y,fetchPriority:g,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},kn.preinitModule=function(f,d){if(typeof f=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var m=u(d.as,d.crossOrigin);r.d.M(f,{crossOrigin:m,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&r.d.M(f)},kn.preload=function(f,d){if(typeof f=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var m=d.as,p=u(m,d.crossOrigin);r.d.L(f,m,{crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},kn.preloadModule=function(f,d){if(typeof f=="string")if(d){var m=u(d.as,d.crossOrigin);r.d.m(f,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:m,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else r.d.m(f)},kn.requestFormReset=function(f){r.d.r(f)},kn.unstable_batchedUpdates=function(f,d){return f(d)},kn.useFormState=function(f,d,m){return l.H.useFormState(f,d,m)},kn.useFormStatus=function(){return l.H.useHostTransitionStatus()},kn.version="19.2.3",kn}var Jx;function uk(){if(Jx)return om.exports;Jx=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),om.exports=fO(),om.exports}var Qx;function dO(){if(Qx)return fl;Qx=1;var t=uO(),e=cd(),n=uk();function r(i){var o="https://react.dev/errors/"+i;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)o+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function a(i){var o=i,c=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,(o.flags&4098)!==0&&(c=o.return),i=o.return;while(i)}return o.tag===3?c:null}function l(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function u(i){if(i.tag===31){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function f(i){if(a(i)!==i)throw Error(r(188))}function d(i){var o=i.alternate;if(!o){if(o=a(i),o===null)throw Error(r(188));return o!==i?null:i}for(var c=i,h=o;;){var b=c.return;if(b===null)break;var _=b.alternate;if(_===null){if(h=b.return,h!==null){c=h;continue}break}if(b.child===_.child){for(_=b.child;_;){if(_===c)return f(b),i;if(_===h)return f(b),o;_=_.sibling}throw Error(r(188))}if(c.return!==h.return)c=b,h=_;else{for(var S=!1,A=b.child;A;){if(A===c){S=!0,c=b,h=_;break}if(A===h){S=!0,h=b,c=_;break}A=A.sibling}if(!S){for(A=_.child;A;){if(A===c){S=!0,c=_,h=b;break}if(A===h){S=!0,h=_,c=b;break}A=A.sibling}if(!S)throw Error(r(189))}}if(c.alternate!==h)throw Error(r(190))}if(c.tag!==3)throw Error(r(188));return c.stateNode.current===c?i:o}function m(i){var o=i.tag;if(o===5||o===26||o===27||o===6)return i;for(i=i.child;i!==null;){if(o=m(i),o!==null)return o;i=i.sibling}return null}var p=Object.assign,y=Symbol.for("react.element"),g=Symbol.for("react.transitional.element"),v=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),C=Symbol.for("react.consumer"),T=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),$=Symbol.for("react.memo"),q=Symbol.for("react.lazy"),H=Symbol.for("react.activity"),M=Symbol.for("react.memo_cache_sentinel"),Q=Symbol.iterator;function ne(i){return i===null||typeof i!="object"?null:(i=Q&&i[Q]||i["@@iterator"],typeof i=="function"?i:null)}var ye=Symbol.for("react.client.reference");function X(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===ye?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case w:return"Fragment";case k:return"Profiler";case E:return"StrictMode";case N:return"Suspense";case R:return"SuspenseList";case H:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case v:return"Portal";case T:return i.displayName||"Context";case C:return(i._context.displayName||"Context")+".Consumer";case D:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case $:return o=i.displayName||null,o!==null?o:X(i.type)||"Memo";case q:o=i._payload,i=i._init;try{return X(i(o))}catch{}}return null}var F=Array.isArray,B=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ie={pending:!1,data:null,method:null,action:null},re=[],I=-1;function j(i){return{current:i}}function G(i){0>I||(i.current=re[I],re[I]=null,I--)}function O(i,o){I++,re[I]=i.current,i.current=o}var le=j(null),L=j(null),P=j(null),pe=j(null);function xe(i,o){switch(O(P,o),O(L,i),O(le,null),o.nodeType){case 9:case 11:i=(i=o.documentElement)&&(i=i.namespaceURI)?fx(i):0;break;default:if(i=o.tagName,o=o.namespaceURI)o=fx(o),i=dx(o,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}G(le),O(le,i)}function ve(){G(le),G(L),G(P)}function Te(i){i.memoizedState!==null&&O(pe,i);var o=le.current,c=dx(o,i.type);o!==c&&(O(L,i),O(le,c))}function je(i){L.current===i&&(G(le),G(L)),pe.current===i&&(G(pe),al._currentValue=ie)}var at,Ct;function Nt(i){if(at===void 0)try{throw Error()}catch(c){var o=c.stack.trim().match(/\n( *(at )?)/);at=o&&o[1]||"",Ct=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+at+i+Ct}var Zt=!1;function an(i,o){if(!i||Zt)return"";Zt=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(o){var fe=function(){throw Error()};if(Object.defineProperty(fe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(fe,[])}catch(ae){var te=ae}Reflect.construct(i,[],fe)}else{try{fe.call()}catch(ae){te=ae}i.call(fe.prototype)}}else{try{throw Error()}catch(ae){te=ae}(fe=i())&&typeof fe.catch=="function"&&fe.catch(function(){})}}catch(ae){if(ae&&te&&typeof ae.stack=="string")return[ae.stack,te.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var b=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");b&&b.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=h.DetermineComponentFrameRoot(),S=_[0],A=_[1];if(S&&A){var U=S.split(`
`),W=A.split(`
`);for(b=h=0;h<U.length&&!U[h].includes("DetermineComponentFrameRoot");)h++;for(;b<W.length&&!W[b].includes("DetermineComponentFrameRoot");)b++;if(h===U.length||b===W.length)for(h=U.length-1,b=W.length-1;1<=h&&0<=b&&U[h]!==W[b];)b--;for(;1<=h&&0<=b;h--,b--)if(U[h]!==W[b]){if(h!==1||b!==1)do if(h--,b--,0>b||U[h]!==W[b]){var oe=`
`+U[h].replace(" at new "," at ");return i.displayName&&oe.includes("<anonymous>")&&(oe=oe.replace("<anonymous>",i.displayName)),oe}while(1<=h&&0<=b);break}}}finally{Zt=!1,Error.prepareStackTrace=c}return(c=i?i.displayName||i.name:"")?Nt(c):""}function rr(i,o){switch(i.tag){case 26:case 27:case 5:return Nt(i.type);case 16:return Nt("Lazy");case 13:return i.child!==o&&o!==null?Nt("Suspense Fallback"):Nt("Suspense");case 19:return Nt("SuspenseList");case 0:case 15:return an(i.type,!1);case 11:return an(i.type.render,!1);case 1:return an(i.type,!0);case 31:return Nt("Activity");default:return""}}function In(i){try{var o="",c=null;do o+=rr(i,c),c=i,i=i.return;while(i);return o}catch(h){return`
Error generating stack: `+h.message+`
`+h.stack}}var $n=Object.prototype.hasOwnProperty,on=t.unstable_scheduleCallback,we=t.unstable_cancelCallback,Qe=t.unstable_shouldYield,et=t.unstable_requestPaint,Re=t.unstable_now,kt=t.unstable_getCurrentPriorityLevel,se=t.unstable_ImmediatePriority,me=t.unstable_UserBlockingPriority,he=t.unstable_NormalPriority,_e=t.unstable_LowPriority,ue=t.unstable_IdlePriority,Se=t.log,Oe=t.unstable_setDisableYieldValue,st=null,ut=null;function ft(i){if(typeof Se=="function"&&Oe(i),ut&&typeof ut.setStrictMode=="function")try{ut.setStrictMode(st,i)}catch{}}var Me=Math.clz32?Math.clz32:dt,yt=Math.log,He=Math.LN2;function dt(i){return i>>>=0,i===0?32:31-(yt(i)/He|0)|0}var ht=256,it=262144,nt=4194304;function Lt(i){var o=i&42;if(o!==0)return o;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function Nn(i,o,c){var h=i.pendingLanes;if(h===0)return 0;var b=0,_=i.suspendedLanes,S=i.pingedLanes;i=i.warmLanes;var A=h&134217727;return A!==0?(h=A&~_,h!==0?b=Lt(h):(S&=A,S!==0?b=Lt(S):c||(c=A&~i,c!==0&&(b=Lt(c))))):(A=h&~_,A!==0?b=Lt(A):S!==0?b=Lt(S):c||(c=h&~i,c!==0&&(b=Lt(c)))),b===0?0:o!==0&&o!==b&&(o&_)===0&&(_=b&-b,c=o&-o,_>=c||_===32&&(c&4194048)!==0)?o:b}function Tt(i,o){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&o)===0}function Un(i,o){switch(i){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function hi(){var i=nt;return nt<<=1,(nt&62914560)===0&&(nt=4194304),i}function Yi(i){for(var o=[],c=0;31>c;c++)o.push(i);return o}function qn(i,o){i.pendingLanes|=o,o!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function _o(i,o,c,h,b,_){var S=i.pendingLanes;i.pendingLanes=c,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=c,i.entangledLanes&=c,i.errorRecoveryDisabledLanes&=c,i.shellSuspendCounter=0;var A=i.entanglements,U=i.expirationTimes,W=i.hiddenUpdates;for(c=S&~c;0<c;){var oe=31-Me(c),fe=1<<oe;A[oe]=0,U[oe]=-1;var te=W[oe];if(te!==null)for(W[oe]=null,oe=0;oe<te.length;oe++){var ae=te[oe];ae!==null&&(ae.lane&=-536870913)}c&=~fe}h!==0&&vo(i,h,0),_!==0&&b===0&&i.tag!==0&&(i.suspendedLanes|=_&~(S&~o))}function vo(i,o,c){i.pendingLanes|=o,i.suspendedLanes&=~o;var h=31-Me(o);i.entangledLanes|=o,i.entanglements[h]=i.entanglements[h]|1073741824|c&261930}function vc(i,o){var c=i.entangledLanes|=o;for(i=i.entanglements;c;){var h=31-Me(c),b=1<<h;b&o|i[h]&o&&(i[h]|=o),c&=~b}}function pi(i,o){var c=o&-o;return c=(c&42)!==0?1:Hd(c),(c&(i.suspendedLanes|o))!==0?0:c}function Hd(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Gd(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function Q0(){var i=K.p;return i!==0?i:(i=window.event,i===void 0?32:jx(i.type))}function Y0(i,o){var c=K.p;try{return K.p=i,o()}finally{K.p=c}}var As=Math.random().toString(36).slice(2),pn="__reactFiber$"+As,Fn="__reactProps$"+As,Wi="__reactContainer$"+As,Kd="__reactEvents$"+As,JA="__reactListeners$"+As,QA="__reactHandles$"+As,W0="__reactResources$"+As,xo="__reactMarker$"+As;function Zd(i){delete i[pn],delete i[Fn],delete i[Kd],delete i[JA],delete i[QA]}function Xi(i){var o=i[pn];if(o)return o;for(var c=i.parentNode;c;){if(o=c[Wi]||c[pn]){if(c=o.alternate,o.child!==null||c!==null&&c.child!==null)for(i=_x(i);i!==null;){if(c=i[pn])return c;i=_x(i)}return o}i=c,c=i.parentNode}return null}function ea(i){if(i=i[pn]||i[Wi]){var o=i.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return i}return null}function wo(i){var o=i.tag;if(o===5||o===26||o===27||o===6)return i.stateNode;throw Error(r(33))}function ta(i){var o=i[W0];return o||(o=i[W0]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function ln(i){i[xo]=!0}var X0=new Set,eb={};function mi(i,o){na(i,o),na(i+"Capture",o)}function na(i,o){for(eb[i]=o,i=0;i<o.length;i++)X0.add(o[i])}var YA=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),tb={},nb={};function WA(i){return $n.call(nb,i)?!0:$n.call(tb,i)?!1:YA.test(i)?nb[i]=!0:(tb[i]=!0,!1)}function xc(i,o,c){if(WA(o))if(c===null)i.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":i.removeAttribute(o);return;case"boolean":var h=o.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){i.removeAttribute(o);return}}i.setAttribute(o,""+c)}}function wc(i,o,c){if(c===null)i.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(o);return}i.setAttribute(o,""+c)}}function ss(i,o,c,h){if(h===null)i.removeAttribute(c);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(c);return}i.setAttributeNS(o,c,""+h)}}function _r(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function rb(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function XA(i,o,c){var h=Object.getOwnPropertyDescriptor(i.constructor.prototype,o);if(!i.hasOwnProperty(o)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var b=h.get,_=h.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return b.call(this)},set:function(S){c=""+S,_.call(this,S)}}),Object.defineProperty(i,o,{enumerable:h.enumerable}),{getValue:function(){return c},setValue:function(S){c=""+S},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function Jd(i){if(!i._valueTracker){var o=rb(i)?"checked":"value";i._valueTracker=XA(i,o,""+i[o])}}function sb(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var c=o.getValue(),h="";return i&&(h=rb(i)?i.checked?"true":"false":i.value),i=h,i!==c?(o.setValue(i),!0):!1}function Sc(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var e2=/[\n"\\]/g;function vr(i){return i.replace(e2,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function Qd(i,o,c,h,b,_,S,A){i.name="",S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?i.type=S:i.removeAttribute("type"),o!=null?S==="number"?(o===0&&i.value===""||i.value!=o)&&(i.value=""+_r(o)):i.value!==""+_r(o)&&(i.value=""+_r(o)):S!=="submit"&&S!=="reset"||i.removeAttribute("value"),o!=null?Yd(i,S,_r(o)):c!=null?Yd(i,S,_r(c)):h!=null&&i.removeAttribute("value"),b==null&&_!=null&&(i.defaultChecked=!!_),b!=null&&(i.checked=b&&typeof b!="function"&&typeof b!="symbol"),A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?i.name=""+_r(A):i.removeAttribute("name")}function ib(i,o,c,h,b,_,S,A){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(i.type=_),o!=null||c!=null){if(!(_!=="submit"&&_!=="reset"||o!=null)){Jd(i);return}c=c!=null?""+_r(c):"",o=o!=null?""+_r(o):c,A||o===i.value||(i.value=o),i.defaultValue=o}h=h??b,h=typeof h!="function"&&typeof h!="symbol"&&!!h,i.checked=A?i.checked:!!h,i.defaultChecked=!!h,S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(i.name=S),Jd(i)}function Yd(i,o,c){o==="number"&&Sc(i.ownerDocument)===i||i.defaultValue===""+c||(i.defaultValue=""+c)}function ra(i,o,c,h){if(i=i.options,o){o={};for(var b=0;b<c.length;b++)o["$"+c[b]]=!0;for(c=0;c<i.length;c++)b=o.hasOwnProperty("$"+i[c].value),i[c].selected!==b&&(i[c].selected=b),b&&h&&(i[c].defaultSelected=!0)}else{for(c=""+_r(c),o=null,b=0;b<i.length;b++){if(i[b].value===c){i[b].selected=!0,h&&(i[b].defaultSelected=!0);return}o!==null||i[b].disabled||(o=i[b])}o!==null&&(o.selected=!0)}}function ab(i,o,c){if(o!=null&&(o=""+_r(o),o!==i.value&&(i.value=o),c==null)){i.defaultValue!==o&&(i.defaultValue=o);return}i.defaultValue=c!=null?""+_r(c):""}function ob(i,o,c,h){if(o==null){if(h!=null){if(c!=null)throw Error(r(92));if(F(h)){if(1<h.length)throw Error(r(93));h=h[0]}c=h}c==null&&(c=""),o=c}c=_r(o),i.defaultValue=c,h=i.textContent,h===c&&h!==""&&h!==null&&(i.value=h),Jd(i)}function sa(i,o){if(o){var c=i.firstChild;if(c&&c===i.lastChild&&c.nodeType===3){c.nodeValue=o;return}}i.textContent=o}var t2=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function lb(i,o,c){var h=o.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?h?i.setProperty(o,""):o==="float"?i.cssFloat="":i[o]="":h?i.setProperty(o,c):typeof c!="number"||c===0||t2.has(o)?o==="float"?i.cssFloat=c:i[o]=(""+c).trim():i[o]=c+"px"}function cb(i,o,c){if(o!=null&&typeof o!="object")throw Error(r(62));if(i=i.style,c!=null){for(var h in c)!c.hasOwnProperty(h)||o!=null&&o.hasOwnProperty(h)||(h.indexOf("--")===0?i.setProperty(h,""):h==="float"?i.cssFloat="":i[h]="");for(var b in o)h=o[b],o.hasOwnProperty(b)&&c[b]!==h&&lb(i,b,h)}else for(var _ in o)o.hasOwnProperty(_)&&lb(i,_,o[_])}function Wd(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var n2=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),r2=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function kc(i){return r2.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function is(){}var Xd=null;function eh(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var ia=null,aa=null;function ub(i){var o=ea(i);if(o&&(i=o.stateNode)){var c=i[Fn]||null;e:switch(i=o.stateNode,o.type){case"input":if(Qd(i,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),o=c.name,c.type==="radio"&&o!=null){for(c=i;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+vr(""+o)+'"][type="radio"]'),o=0;o<c.length;o++){var h=c[o];if(h!==i&&h.form===i.form){var b=h[Fn]||null;if(!b)throw Error(r(90));Qd(h,b.value,b.defaultValue,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name)}}for(o=0;o<c.length;o++)h=c[o],h.form===i.form&&sb(h)}break e;case"textarea":ab(i,c.value,c.defaultValue);break e;case"select":o=c.value,o!=null&&ra(i,!!c.multiple,o,!1)}}}var th=!1;function fb(i,o,c){if(th)return i(o,c);th=!0;try{var h=i(o);return h}finally{if(th=!1,(ia!==null||aa!==null)&&(fu(),ia&&(o=ia,i=aa,aa=ia=null,ub(o),i)))for(o=0;o<i.length;o++)ub(i[o])}}function So(i,o){var c=i.stateNode;if(c===null)return null;var h=c[Fn]||null;if(h===null)return null;c=h[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(i=i.type,h=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!h;break e;default:i=!1}if(i)return null;if(c&&typeof c!="function")throw Error(r(231,o,typeof c));return c}var as=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),nh=!1;if(as)try{var ko={};Object.defineProperty(ko,"passive",{get:function(){nh=!0}}),window.addEventListener("test",ko,ko),window.removeEventListener("test",ko,ko)}catch{nh=!1}var Rs=null,rh=null,Ec=null;function db(){if(Ec)return Ec;var i,o=rh,c=o.length,h,b="value"in Rs?Rs.value:Rs.textContent,_=b.length;for(i=0;i<c&&o[i]===b[i];i++);var S=c-i;for(h=1;h<=S&&o[c-h]===b[_-h];h++);return Ec=b.slice(i,1<h?1-h:void 0)}function Cc(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function Tc(){return!0}function hb(){return!1}function Vn(i){function o(c,h,b,_,S){this._reactName=c,this._targetInst=b,this.type=h,this.nativeEvent=_,this.target=S,this.currentTarget=null;for(var A in i)i.hasOwnProperty(A)&&(c=i[A],this[A]=c?c(_):_[A]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?Tc:hb,this.isPropagationStopped=hb,this}return p(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=Tc)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=Tc)},persist:function(){},isPersistent:Tc}),o}var gi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ac=Vn(gi),Eo=p({},gi,{view:0,detail:0}),s2=Vn(Eo),sh,ih,Co,Rc=p({},Eo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:oh,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Co&&(Co&&i.type==="mousemove"?(sh=i.screenX-Co.screenX,ih=i.screenY-Co.screenY):ih=sh=0,Co=i),sh)},movementY:function(i){return"movementY"in i?i.movementY:ih}}),pb=Vn(Rc),i2=p({},Rc,{dataTransfer:0}),a2=Vn(i2),o2=p({},Eo,{relatedTarget:0}),ah=Vn(o2),l2=p({},gi,{animationName:0,elapsedTime:0,pseudoElement:0}),c2=Vn(l2),u2=p({},gi,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),f2=Vn(u2),d2=p({},gi,{data:0}),mb=Vn(d2),h2={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},p2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},m2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function g2(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=m2[i])?!!o[i]:!1}function oh(){return g2}var y2=p({},Eo,{key:function(i){if(i.key){var o=h2[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=Cc(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?p2[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:oh,charCode:function(i){return i.type==="keypress"?Cc(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Cc(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),b2=Vn(y2),_2=p({},Rc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),gb=Vn(_2),v2=p({},Eo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:oh}),x2=Vn(v2),w2=p({},gi,{propertyName:0,elapsedTime:0,pseudoElement:0}),S2=Vn(w2),k2=p({},Rc,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),E2=Vn(k2),C2=p({},gi,{newState:0,oldState:0}),T2=Vn(C2),A2=[9,13,27,32],lh=as&&"CompositionEvent"in window,To=null;as&&"documentMode"in document&&(To=document.documentMode);var R2=as&&"TextEvent"in window&&!To,yb=as&&(!lh||To&&8<To&&11>=To),bb=" ",_b=!1;function vb(i,o){switch(i){case"keyup":return A2.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function xb(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var oa=!1;function O2(i,o){switch(i){case"compositionend":return xb(o);case"keypress":return o.which!==32?null:(_b=!0,bb);case"textInput":return i=o.data,i===bb&&_b?null:i;default:return null}}function I2(i,o){if(oa)return i==="compositionend"||!lh&&vb(i,o)?(i=db(),Ec=rh=Rs=null,oa=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return yb&&o.locale!=="ko"?null:o.data;default:return null}}var N2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function wb(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!N2[i.type]:o==="textarea"}function Sb(i,o,c,h){ia?aa?aa.push(h):aa=[h]:ia=h,o=bu(o,"onChange"),0<o.length&&(c=new Ac("onChange","change",null,c,h),i.push({event:c,listeners:o}))}var Ao=null,Ro=null;function M2(i){ix(i,0)}function Oc(i){var o=wo(i);if(sb(o))return i}function kb(i,o){if(i==="change")return o}var Eb=!1;if(as){var ch;if(as){var uh="oninput"in document;if(!uh){var Cb=document.createElement("div");Cb.setAttribute("oninput","return;"),uh=typeof Cb.oninput=="function"}ch=uh}else ch=!1;Eb=ch&&(!document.documentMode||9<document.documentMode)}function Tb(){Ao&&(Ao.detachEvent("onpropertychange",Ab),Ro=Ao=null)}function Ab(i){if(i.propertyName==="value"&&Oc(Ro)){var o=[];Sb(o,Ro,i,eh(i)),fb(M2,o)}}function D2(i,o,c){i==="focusin"?(Tb(),Ao=o,Ro=c,Ao.attachEvent("onpropertychange",Ab)):i==="focusout"&&Tb()}function j2(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Oc(Ro)}function L2(i,o){if(i==="click")return Oc(o)}function z2(i,o){if(i==="input"||i==="change")return Oc(o)}function P2(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var sr=typeof Object.is=="function"?Object.is:P2;function Oo(i,o){if(sr(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var c=Object.keys(i),h=Object.keys(o);if(c.length!==h.length)return!1;for(h=0;h<c.length;h++){var b=c[h];if(!$n.call(o,b)||!sr(i[b],o[b]))return!1}return!0}function Rb(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Ob(i,o){var c=Rb(i);i=0;for(var h;c;){if(c.nodeType===3){if(h=i+c.textContent.length,i<=o&&h>=o)return{node:c,offset:o-i};i=h}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=Rb(c)}}function Ib(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?Ib(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function Nb(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var o=Sc(i.document);o instanceof i.HTMLIFrameElement;){try{var c=typeof o.contentWindow.location.href=="string"}catch{c=!1}if(c)i=o.contentWindow;else break;o=Sc(i.document)}return o}function fh(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}var B2=as&&"documentMode"in document&&11>=document.documentMode,la=null,dh=null,Io=null,hh=!1;function Mb(i,o,c){var h=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;hh||la==null||la!==Sc(h)||(h=la,"selectionStart"in h&&fh(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),Io&&Oo(Io,h)||(Io=h,h=bu(dh,"onSelect"),0<h.length&&(o=new Ac("onSelect","select",null,o,c),i.push({event:o,listeners:h}),o.target=la)))}function yi(i,o){var c={};return c[i.toLowerCase()]=o.toLowerCase(),c["Webkit"+i]="webkit"+o,c["Moz"+i]="moz"+o,c}var ca={animationend:yi("Animation","AnimationEnd"),animationiteration:yi("Animation","AnimationIteration"),animationstart:yi("Animation","AnimationStart"),transitionrun:yi("Transition","TransitionRun"),transitionstart:yi("Transition","TransitionStart"),transitioncancel:yi("Transition","TransitionCancel"),transitionend:yi("Transition","TransitionEnd")},ph={},Db={};as&&(Db=document.createElement("div").style,"AnimationEvent"in window||(delete ca.animationend.animation,delete ca.animationiteration.animation,delete ca.animationstart.animation),"TransitionEvent"in window||delete ca.transitionend.transition);function bi(i){if(ph[i])return ph[i];if(!ca[i])return i;var o=ca[i],c;for(c in o)if(o.hasOwnProperty(c)&&c in Db)return ph[i]=o[c];return i}var jb=bi("animationend"),Lb=bi("animationiteration"),zb=bi("animationstart"),$2=bi("transitionrun"),U2=bi("transitionstart"),q2=bi("transitioncancel"),Pb=bi("transitionend"),Bb=new Map,mh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");mh.push("scrollEnd");function zr(i,o){Bb.set(i,o),mi(o,[i])}var Ic=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},xr=[],ua=0,gh=0;function Nc(){for(var i=ua,o=gh=ua=0;o<i;){var c=xr[o];xr[o++]=null;var h=xr[o];xr[o++]=null;var b=xr[o];xr[o++]=null;var _=xr[o];if(xr[o++]=null,h!==null&&b!==null){var S=h.pending;S===null?b.next=b:(b.next=S.next,S.next=b),h.pending=b}_!==0&&$b(c,b,_)}}function Mc(i,o,c,h){xr[ua++]=i,xr[ua++]=o,xr[ua++]=c,xr[ua++]=h,gh|=h,i.lanes|=h,i=i.alternate,i!==null&&(i.lanes|=h)}function yh(i,o,c,h){return Mc(i,o,c,h),Dc(i)}function _i(i,o){return Mc(i,null,null,o),Dc(i)}function $b(i,o,c){i.lanes|=c;var h=i.alternate;h!==null&&(h.lanes|=c);for(var b=!1,_=i.return;_!==null;)_.childLanes|=c,h=_.alternate,h!==null&&(h.childLanes|=c),_.tag===22&&(i=_.stateNode,i===null||i._visibility&1||(b=!0)),i=_,_=_.return;return i.tag===3?(_=i.stateNode,b&&o!==null&&(b=31-Me(c),i=_.hiddenUpdates,h=i[b],h===null?i[b]=[o]:h.push(o),o.lane=c|536870912),_):null}function Dc(i){if(50<Xo)throw Xo=0,Cp=null,Error(r(185));for(var o=i.return;o!==null;)i=o,o=i.return;return i.tag===3?i.stateNode:null}var fa={};function F2(i,o,c,h){this.tag=i,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ir(i,o,c,h){return new F2(i,o,c,h)}function bh(i){return i=i.prototype,!(!i||!i.isReactComponent)}function os(i,o){var c=i.alternate;return c===null?(c=ir(i.tag,o,i.key,i.mode),c.elementType=i.elementType,c.type=i.type,c.stateNode=i.stateNode,c.alternate=i,i.alternate=c):(c.pendingProps=o,c.type=i.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=i.flags&65011712,c.childLanes=i.childLanes,c.lanes=i.lanes,c.child=i.child,c.memoizedProps=i.memoizedProps,c.memoizedState=i.memoizedState,c.updateQueue=i.updateQueue,o=i.dependencies,c.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},c.sibling=i.sibling,c.index=i.index,c.ref=i.ref,c.refCleanup=i.refCleanup,c}function Ub(i,o){i.flags&=65011714;var c=i.alternate;return c===null?(i.childLanes=0,i.lanes=o,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=c.childLanes,i.lanes=c.lanes,i.child=c.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=c.memoizedProps,i.memoizedState=c.memoizedState,i.updateQueue=c.updateQueue,i.type=c.type,o=c.dependencies,i.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),i}function jc(i,o,c,h,b,_){var S=0;if(h=i,typeof i=="function")bh(i)&&(S=1);else if(typeof i=="string")S=ZR(i,c,le.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case H:return i=ir(31,c,o,b),i.elementType=H,i.lanes=_,i;case w:return vi(c.children,b,_,o);case E:S=8,b|=24;break;case k:return i=ir(12,c,o,b|2),i.elementType=k,i.lanes=_,i;case N:return i=ir(13,c,o,b),i.elementType=N,i.lanes=_,i;case R:return i=ir(19,c,o,b),i.elementType=R,i.lanes=_,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case T:S=10;break e;case C:S=9;break e;case D:S=11;break e;case $:S=14;break e;case q:S=16,h=null;break e}S=29,c=Error(r(130,i===null?"null":typeof i,"")),h=null}return o=ir(S,c,o,b),o.elementType=i,o.type=h,o.lanes=_,o}function vi(i,o,c,h){return i=ir(7,i,h,o),i.lanes=c,i}function _h(i,o,c){return i=ir(6,i,null,o),i.lanes=c,i}function qb(i){var o=ir(18,null,null,0);return o.stateNode=i,o}function vh(i,o,c){return o=ir(4,i.children!==null?i.children:[],i.key,o),o.lanes=c,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}var Fb=new WeakMap;function wr(i,o){if(typeof i=="object"&&i!==null){var c=Fb.get(i);return c!==void 0?c:(o={value:i,source:o,stack:In(o)},Fb.set(i,o),o)}return{value:i,source:o,stack:In(o)}}var da=[],ha=0,Lc=null,No=0,Sr=[],kr=0,Os=null,Fr=1,Vr="";function ls(i,o){da[ha++]=No,da[ha++]=Lc,Lc=i,No=o}function Vb(i,o,c){Sr[kr++]=Fr,Sr[kr++]=Vr,Sr[kr++]=Os,Os=i;var h=Fr;i=Vr;var b=32-Me(h)-1;h&=~(1<<b),c+=1;var _=32-Me(o)+b;if(30<_){var S=b-b%5;_=(h&(1<<S)-1).toString(32),h>>=S,b-=S,Fr=1<<32-Me(o)+b|c<<b|h,Vr=_+i}else Fr=1<<_|c<<b|h,Vr=i}function xh(i){i.return!==null&&(ls(i,1),Vb(i,1,0))}function wh(i){for(;i===Lc;)Lc=da[--ha],da[ha]=null,No=da[--ha],da[ha]=null;for(;i===Os;)Os=Sr[--kr],Sr[kr]=null,Vr=Sr[--kr],Sr[kr]=null,Fr=Sr[--kr],Sr[kr]=null}function Hb(i,o){Sr[kr++]=Fr,Sr[kr++]=Vr,Sr[kr++]=Os,Fr=o.id,Vr=o.overflow,Os=i}var mn=null,At=null,tt=!1,Is=null,Er=!1,Sh=Error(r(519));function Ns(i){var o=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Mo(wr(o,i)),Sh}function Gb(i){var o=i.stateNode,c=i.type,h=i.memoizedProps;switch(o[pn]=i,o[Fn]=h,c){case"dialog":Ke("cancel",o),Ke("close",o);break;case"iframe":case"object":case"embed":Ke("load",o);break;case"video":case"audio":for(c=0;c<tl.length;c++)Ke(tl[c],o);break;case"source":Ke("error",o);break;case"img":case"image":case"link":Ke("error",o),Ke("load",o);break;case"details":Ke("toggle",o);break;case"input":Ke("invalid",o),ib(o,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0);break;case"select":Ke("invalid",o);break;case"textarea":Ke("invalid",o),ob(o,h.value,h.defaultValue,h.children)}c=h.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||o.textContent===""+c||h.suppressHydrationWarning===!0||cx(o.textContent,c)?(h.popover!=null&&(Ke("beforetoggle",o),Ke("toggle",o)),h.onScroll!=null&&Ke("scroll",o),h.onScrollEnd!=null&&Ke("scrollend",o),h.onClick!=null&&(o.onclick=is),o=!0):o=!1,o||Ns(i,!0)}function Kb(i){for(mn=i.return;mn;)switch(mn.tag){case 5:case 31:case 13:Er=!1;return;case 27:case 3:Er=!0;return;default:mn=mn.return}}function pa(i){if(i!==mn)return!1;if(!tt)return Kb(i),tt=!0,!1;var o=i.tag,c;if((c=o!==3&&o!==27)&&((c=o===5)&&(c=i.type,c=!(c!=="form"&&c!=="button")||Up(i.type,i.memoizedProps)),c=!c),c&&At&&Ns(i),Kb(i),o===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));At=bx(i)}else if(o===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));At=bx(i)}else o===27?(o=At,Gs(i.type)?(i=Gp,Gp=null,At=i):At=o):At=mn?Tr(i.stateNode.nextSibling):null;return!0}function xi(){At=mn=null,tt=!1}function kh(){var i=Is;return i!==null&&(Zn===null?Zn=i:Zn.push.apply(Zn,i),Is=null),i}function Mo(i){Is===null?Is=[i]:Is.push(i)}var Eh=j(null),wi=null,cs=null;function Ms(i,o,c){O(Eh,o._currentValue),o._currentValue=c}function us(i){i._currentValue=Eh.current,G(Eh)}function Ch(i,o,c){for(;i!==null;){var h=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,h!==null&&(h.childLanes|=o)):h!==null&&(h.childLanes&o)!==o&&(h.childLanes|=o),i===c)break;i=i.return}}function Th(i,o,c,h){var b=i.child;for(b!==null&&(b.return=i);b!==null;){var _=b.dependencies;if(_!==null){var S=b.child;_=_.firstContext;e:for(;_!==null;){var A=_;_=b;for(var U=0;U<o.length;U++)if(A.context===o[U]){_.lanes|=c,A=_.alternate,A!==null&&(A.lanes|=c),Ch(_.return,c,i),h||(S=null);break e}_=A.next}}else if(b.tag===18){if(S=b.return,S===null)throw Error(r(341));S.lanes|=c,_=S.alternate,_!==null&&(_.lanes|=c),Ch(S,c,i),S=null}else S=b.child;if(S!==null)S.return=b;else for(S=b;S!==null;){if(S===i){S=null;break}if(b=S.sibling,b!==null){b.return=S.return,S=b;break}S=S.return}b=S}}function ma(i,o,c,h){i=null;for(var b=o,_=!1;b!==null;){if(!_){if((b.flags&524288)!==0)_=!0;else if((b.flags&262144)!==0)break}if(b.tag===10){var S=b.alternate;if(S===null)throw Error(r(387));if(S=S.memoizedProps,S!==null){var A=b.type;sr(b.pendingProps.value,S.value)||(i!==null?i.push(A):i=[A])}}else if(b===pe.current){if(S=b.alternate,S===null)throw Error(r(387));S.memoizedState.memoizedState!==b.memoizedState.memoizedState&&(i!==null?i.push(al):i=[al])}b=b.return}i!==null&&Th(o,i,c,h),o.flags|=262144}function zc(i){for(i=i.firstContext;i!==null;){if(!sr(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function Si(i){wi=i,cs=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function gn(i){return Zb(wi,i)}function Pc(i,o){return wi===null&&Si(i),Zb(i,o)}function Zb(i,o){var c=o._currentValue;if(o={context:o,memoizedValue:c,next:null},cs===null){if(i===null)throw Error(r(308));cs=o,i.dependencies={lanes:0,firstContext:o},i.flags|=524288}else cs=cs.next=o;return c}var V2=typeof AbortController<"u"?AbortController:function(){var i=[],o=this.signal={aborted:!1,addEventListener:function(c,h){i.push(h)}};this.abort=function(){o.aborted=!0,i.forEach(function(c){return c()})}},H2=t.unstable_scheduleCallback,G2=t.unstable_NormalPriority,Bt={$$typeof:T,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ah(){return{controller:new V2,data:new Map,refCount:0}}function Do(i){i.refCount--,i.refCount===0&&H2(G2,function(){i.controller.abort()})}var jo=null,Rh=0,ga=0,ya=null;function K2(i,o){if(jo===null){var c=jo=[];Rh=0,ga=Np(),ya={status:"pending",value:void 0,then:function(h){c.push(h)}}}return Rh++,o.then(Jb,Jb),o}function Jb(){if(--Rh===0&&jo!==null){ya!==null&&(ya.status="fulfilled");var i=jo;jo=null,ga=0,ya=null;for(var o=0;o<i.length;o++)(0,i[o])()}}function Z2(i,o){var c=[],h={status:"pending",value:null,reason:null,then:function(b){c.push(b)}};return i.then(function(){h.status="fulfilled",h.value=o;for(var b=0;b<c.length;b++)(0,c[b])(o)},function(b){for(h.status="rejected",h.reason=b,b=0;b<c.length;b++)(0,c[b])(void 0)}),h}var Qb=B.S;B.S=function(i,o){Mv=Re(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&K2(i,o),Qb!==null&&Qb(i,o)};var ki=j(null);function Oh(){var i=ki.current;return i!==null?i:xt.pooledCache}function Bc(i,o){o===null?O(ki,ki.current):O(ki,o.pool)}function Yb(){var i=Oh();return i===null?null:{parent:Bt._currentValue,pool:i}}var ba=Error(r(460)),Ih=Error(r(474)),$c=Error(r(542)),Uc={then:function(){}};function Wb(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Xb(i,o,c){switch(c=i[c],c===void 0?i.push(o):c!==o&&(o.then(is,is),o=c),o.status){case"fulfilled":return o.value;case"rejected":throw i=o.reason,t_(i),i;default:if(typeof o.status=="string")o.then(is,is);else{if(i=xt,i!==null&&100<i.shellSuspendCounter)throw Error(r(482));i=o,i.status="pending",i.then(function(h){if(o.status==="pending"){var b=o;b.status="fulfilled",b.value=h}},function(h){if(o.status==="pending"){var b=o;b.status="rejected",b.reason=h}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw i=o.reason,t_(i),i}throw Ci=o,ba}}function Ei(i){try{var o=i._init;return o(i._payload)}catch(c){throw c!==null&&typeof c=="object"&&typeof c.then=="function"?(Ci=c,ba):c}}var Ci=null;function e_(){if(Ci===null)throw Error(r(459));var i=Ci;return Ci=null,i}function t_(i){if(i===ba||i===$c)throw Error(r(483))}var _a=null,Lo=0;function qc(i){var o=Lo;return Lo+=1,_a===null&&(_a=[]),Xb(_a,i,o)}function zo(i,o){o=o.props.ref,i.ref=o!==void 0?o:null}function Fc(i,o){throw o.$$typeof===y?Error(r(525)):(i=Object.prototype.toString.call(o),Error(r(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i)))}function n_(i){function o(J,V){if(i){var Y=J.deletions;Y===null?(J.deletions=[V],J.flags|=16):Y.push(V)}}function c(J,V){if(!i)return null;for(;V!==null;)o(J,V),V=V.sibling;return null}function h(J){for(var V=new Map;J!==null;)J.key!==null?V.set(J.key,J):V.set(J.index,J),J=J.sibling;return V}function b(J,V){return J=os(J,V),J.index=0,J.sibling=null,J}function _(J,V,Y){return J.index=Y,i?(Y=J.alternate,Y!==null?(Y=Y.index,Y<V?(J.flags|=67108866,V):Y):(J.flags|=67108866,V)):(J.flags|=1048576,V)}function S(J){return i&&J.alternate===null&&(J.flags|=67108866),J}function A(J,V,Y,ce){return V===null||V.tag!==6?(V=_h(Y,J.mode,ce),V.return=J,V):(V=b(V,Y),V.return=J,V)}function U(J,V,Y,ce){var Ie=Y.type;return Ie===w?oe(J,V,Y.props.children,ce,Y.key):V!==null&&(V.elementType===Ie||typeof Ie=="object"&&Ie!==null&&Ie.$$typeof===q&&Ei(Ie)===V.type)?(V=b(V,Y.props),zo(V,Y),V.return=J,V):(V=jc(Y.type,Y.key,Y.props,null,J.mode,ce),zo(V,Y),V.return=J,V)}function W(J,V,Y,ce){return V===null||V.tag!==4||V.stateNode.containerInfo!==Y.containerInfo||V.stateNode.implementation!==Y.implementation?(V=vh(Y,J.mode,ce),V.return=J,V):(V=b(V,Y.children||[]),V.return=J,V)}function oe(J,V,Y,ce,Ie){return V===null||V.tag!==7?(V=vi(Y,J.mode,ce,Ie),V.return=J,V):(V=b(V,Y),V.return=J,V)}function fe(J,V,Y){if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return V=_h(""+V,J.mode,Y),V.return=J,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case g:return Y=jc(V.type,V.key,V.props,null,J.mode,Y),zo(Y,V),Y.return=J,Y;case v:return V=vh(V,J.mode,Y),V.return=J,V;case q:return V=Ei(V),fe(J,V,Y)}if(F(V)||ne(V))return V=vi(V,J.mode,Y,null),V.return=J,V;if(typeof V.then=="function")return fe(J,qc(V),Y);if(V.$$typeof===T)return fe(J,Pc(J,V),Y);Fc(J,V)}return null}function te(J,V,Y,ce){var Ie=V!==null?V.key:null;if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return Ie!==null?null:A(J,V,""+Y,ce);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case g:return Y.key===Ie?U(J,V,Y,ce):null;case v:return Y.key===Ie?W(J,V,Y,ce):null;case q:return Y=Ei(Y),te(J,V,Y,ce)}if(F(Y)||ne(Y))return Ie!==null?null:oe(J,V,Y,ce,null);if(typeof Y.then=="function")return te(J,V,qc(Y),ce);if(Y.$$typeof===T)return te(J,V,Pc(J,Y),ce);Fc(J,Y)}return null}function ae(J,V,Y,ce,Ie){if(typeof ce=="string"&&ce!==""||typeof ce=="number"||typeof ce=="bigint")return J=J.get(Y)||null,A(V,J,""+ce,Ie);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case g:return J=J.get(ce.key===null?Y:ce.key)||null,U(V,J,ce,Ie);case v:return J=J.get(ce.key===null?Y:ce.key)||null,W(V,J,ce,Ie);case q:return ce=Ei(ce),ae(J,V,Y,ce,Ie)}if(F(ce)||ne(ce))return J=J.get(Y)||null,oe(V,J,ce,Ie,null);if(typeof ce.then=="function")return ae(J,V,Y,qc(ce),Ie);if(ce.$$typeof===T)return ae(J,V,Y,Pc(V,ce),Ie);Fc(V,ce)}return null}function ke(J,V,Y,ce){for(var Ie=null,ot=null,Ce=V,qe=V=0,We=null;Ce!==null&&qe<Y.length;qe++){Ce.index>qe?(We=Ce,Ce=null):We=Ce.sibling;var lt=te(J,Ce,Y[qe],ce);if(lt===null){Ce===null&&(Ce=We);break}i&&Ce&&lt.alternate===null&&o(J,Ce),V=_(lt,V,qe),ot===null?Ie=lt:ot.sibling=lt,ot=lt,Ce=We}if(qe===Y.length)return c(J,Ce),tt&&ls(J,qe),Ie;if(Ce===null){for(;qe<Y.length;qe++)Ce=fe(J,Y[qe],ce),Ce!==null&&(V=_(Ce,V,qe),ot===null?Ie=Ce:ot.sibling=Ce,ot=Ce);return tt&&ls(J,qe),Ie}for(Ce=h(Ce);qe<Y.length;qe++)We=ae(Ce,J,qe,Y[qe],ce),We!==null&&(i&&We.alternate!==null&&Ce.delete(We.key===null?qe:We.key),V=_(We,V,qe),ot===null?Ie=We:ot.sibling=We,ot=We);return i&&Ce.forEach(function(Ys){return o(J,Ys)}),tt&&ls(J,qe),Ie}function Le(J,V,Y,ce){if(Y==null)throw Error(r(151));for(var Ie=null,ot=null,Ce=V,qe=V=0,We=null,lt=Y.next();Ce!==null&&!lt.done;qe++,lt=Y.next()){Ce.index>qe?(We=Ce,Ce=null):We=Ce.sibling;var Ys=te(J,Ce,lt.value,ce);if(Ys===null){Ce===null&&(Ce=We);break}i&&Ce&&Ys.alternate===null&&o(J,Ce),V=_(Ys,V,qe),ot===null?Ie=Ys:ot.sibling=Ys,ot=Ys,Ce=We}if(lt.done)return c(J,Ce),tt&&ls(J,qe),Ie;if(Ce===null){for(;!lt.done;qe++,lt=Y.next())lt=fe(J,lt.value,ce),lt!==null&&(V=_(lt,V,qe),ot===null?Ie=lt:ot.sibling=lt,ot=lt);return tt&&ls(J,qe),Ie}for(Ce=h(Ce);!lt.done;qe++,lt=Y.next())lt=ae(Ce,J,qe,lt.value,ce),lt!==null&&(i&&lt.alternate!==null&&Ce.delete(lt.key===null?qe:lt.key),V=_(lt,V,qe),ot===null?Ie=lt:ot.sibling=lt,ot=lt);return i&&Ce.forEach(function(iO){return o(J,iO)}),tt&&ls(J,qe),Ie}function vt(J,V,Y,ce){if(typeof Y=="object"&&Y!==null&&Y.type===w&&Y.key===null&&(Y=Y.props.children),typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case g:e:{for(var Ie=Y.key;V!==null;){if(V.key===Ie){if(Ie=Y.type,Ie===w){if(V.tag===7){c(J,V.sibling),ce=b(V,Y.props.children),ce.return=J,J=ce;break e}}else if(V.elementType===Ie||typeof Ie=="object"&&Ie!==null&&Ie.$$typeof===q&&Ei(Ie)===V.type){c(J,V.sibling),ce=b(V,Y.props),zo(ce,Y),ce.return=J,J=ce;break e}c(J,V);break}else o(J,V);V=V.sibling}Y.type===w?(ce=vi(Y.props.children,J.mode,ce,Y.key),ce.return=J,J=ce):(ce=jc(Y.type,Y.key,Y.props,null,J.mode,ce),zo(ce,Y),ce.return=J,J=ce)}return S(J);case v:e:{for(Ie=Y.key;V!==null;){if(V.key===Ie)if(V.tag===4&&V.stateNode.containerInfo===Y.containerInfo&&V.stateNode.implementation===Y.implementation){c(J,V.sibling),ce=b(V,Y.children||[]),ce.return=J,J=ce;break e}else{c(J,V);break}else o(J,V);V=V.sibling}ce=vh(Y,J.mode,ce),ce.return=J,J=ce}return S(J);case q:return Y=Ei(Y),vt(J,V,Y,ce)}if(F(Y))return ke(J,V,Y,ce);if(ne(Y)){if(Ie=ne(Y),typeof Ie!="function")throw Error(r(150));return Y=Ie.call(Y),Le(J,V,Y,ce)}if(typeof Y.then=="function")return vt(J,V,qc(Y),ce);if(Y.$$typeof===T)return vt(J,V,Pc(J,Y),ce);Fc(J,Y)}return typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint"?(Y=""+Y,V!==null&&V.tag===6?(c(J,V.sibling),ce=b(V,Y),ce.return=J,J=ce):(c(J,V),ce=_h(Y,J.mode,ce),ce.return=J,J=ce),S(J)):c(J,V)}return function(J,V,Y,ce){try{Lo=0;var Ie=vt(J,V,Y,ce);return _a=null,Ie}catch(Ce){if(Ce===ba||Ce===$c)throw Ce;var ot=ir(29,Ce,null,J.mode);return ot.lanes=ce,ot.return=J,ot}}}var Ti=n_(!0),r_=n_(!1),Ds=!1;function Nh(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Mh(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function js(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Ls(i,o,c){var h=i.updateQueue;if(h===null)return null;if(h=h.shared,(ct&2)!==0){var b=h.pending;return b===null?o.next=o:(o.next=b.next,b.next=o),h.pending=o,o=Dc(i),$b(i,null,c),o}return Mc(i,h,o,c),Dc(i)}function Po(i,o,c){if(o=o.updateQueue,o!==null&&(o=o.shared,(c&4194048)!==0)){var h=o.lanes;h&=i.pendingLanes,c|=h,o.lanes=c,vc(i,c)}}function Dh(i,o){var c=i.updateQueue,h=i.alternate;if(h!==null&&(h=h.updateQueue,c===h)){var b=null,_=null;if(c=c.firstBaseUpdate,c!==null){do{var S={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};_===null?b=_=S:_=_.next=S,c=c.next}while(c!==null);_===null?b=_=o:_=_.next=o}else b=_=o;c={baseState:h.baseState,firstBaseUpdate:b,lastBaseUpdate:_,shared:h.shared,callbacks:h.callbacks},i.updateQueue=c;return}i=c.lastBaseUpdate,i===null?c.firstBaseUpdate=o:i.next=o,c.lastBaseUpdate=o}var jh=!1;function Bo(){if(jh){var i=ya;if(i!==null)throw i}}function $o(i,o,c,h){jh=!1;var b=i.updateQueue;Ds=!1;var _=b.firstBaseUpdate,S=b.lastBaseUpdate,A=b.shared.pending;if(A!==null){b.shared.pending=null;var U=A,W=U.next;U.next=null,S===null?_=W:S.next=W,S=U;var oe=i.alternate;oe!==null&&(oe=oe.updateQueue,A=oe.lastBaseUpdate,A!==S&&(A===null?oe.firstBaseUpdate=W:A.next=W,oe.lastBaseUpdate=U))}if(_!==null){var fe=b.baseState;S=0,oe=W=U=null,A=_;do{var te=A.lane&-536870913,ae=te!==A.lane;if(ae?(Ye&te)===te:(h&te)===te){te!==0&&te===ga&&(jh=!0),oe!==null&&(oe=oe.next={lane:0,tag:A.tag,payload:A.payload,callback:null,next:null});e:{var ke=i,Le=A;te=o;var vt=c;switch(Le.tag){case 1:if(ke=Le.payload,typeof ke=="function"){fe=ke.call(vt,fe,te);break e}fe=ke;break e;case 3:ke.flags=ke.flags&-65537|128;case 0:if(ke=Le.payload,te=typeof ke=="function"?ke.call(vt,fe,te):ke,te==null)break e;fe=p({},fe,te);break e;case 2:Ds=!0}}te=A.callback,te!==null&&(i.flags|=64,ae&&(i.flags|=8192),ae=b.callbacks,ae===null?b.callbacks=[te]:ae.push(te))}else ae={lane:te,tag:A.tag,payload:A.payload,callback:A.callback,next:null},oe===null?(W=oe=ae,U=fe):oe=oe.next=ae,S|=te;if(A=A.next,A===null){if(A=b.shared.pending,A===null)break;ae=A,A=ae.next,ae.next=null,b.lastBaseUpdate=ae,b.shared.pending=null}}while(!0);oe===null&&(U=fe),b.baseState=U,b.firstBaseUpdate=W,b.lastBaseUpdate=oe,_===null&&(b.shared.lanes=0),Us|=S,i.lanes=S,i.memoizedState=fe}}function s_(i,o){if(typeof i!="function")throw Error(r(191,i));i.call(o)}function i_(i,o){var c=i.callbacks;if(c!==null)for(i.callbacks=null,i=0;i<c.length;i++)s_(c[i],o)}var va=j(null),Vc=j(0);function a_(i,o){i=_s,O(Vc,i),O(va,o),_s=i|o.baseLanes}function Lh(){O(Vc,_s),O(va,va.current)}function zh(){_s=Vc.current,G(va),G(Vc)}var ar=j(null),Cr=null;function zs(i){var o=i.alternate;O(zt,zt.current&1),O(ar,i),Cr===null&&(o===null||va.current!==null||o.memoizedState!==null)&&(Cr=i)}function Ph(i){O(zt,zt.current),O(ar,i),Cr===null&&(Cr=i)}function o_(i){i.tag===22?(O(zt,zt.current),O(ar,i),Cr===null&&(Cr=i)):Ps()}function Ps(){O(zt,zt.current),O(ar,ar.current)}function or(i){G(ar),Cr===i&&(Cr=null),G(zt)}var zt=j(0);function Hc(i){for(var o=i;o!==null;){if(o.tag===13){var c=o.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||Vp(c)||Hp(c)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var fs=0,Ue=null,bt=null,$t=null,Gc=!1,xa=!1,Ai=!1,Kc=0,Uo=0,wa=null,J2=0;function Dt(){throw Error(r(321))}function Bh(i,o){if(o===null)return!1;for(var c=0;c<o.length&&c<i.length;c++)if(!sr(i[c],o[c]))return!1;return!0}function $h(i,o,c,h,b,_){return fs=_,Ue=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,B.H=i===null||i.memoizedState===null?V_:tp,Ai=!1,_=c(h,b),Ai=!1,xa&&(_=c_(o,c,h,b)),l_(i),_}function l_(i){B.H=Vo;var o=bt!==null&&bt.next!==null;if(fs=0,$t=bt=Ue=null,Gc=!1,Uo=0,wa=null,o)throw Error(r(300));i===null||Ut||(i=i.dependencies,i!==null&&zc(i)&&(Ut=!0))}function c_(i,o,c,h){Ue=i;var b=0;do{if(xa&&(wa=null),Uo=0,xa=!1,25<=b)throw Error(r(301));if(b+=1,$t=bt=null,i.updateQueue!=null){var _=i.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}B.H=H_,_=o(c,h)}while(xa);return _}function Q2(){var i=B.H,o=i.useState()[0];return o=typeof o.then=="function"?qo(o):o,i=i.useState()[0],(bt!==null?bt.memoizedState:null)!==i&&(Ue.flags|=1024),o}function Uh(){var i=Kc!==0;return Kc=0,i}function qh(i,o,c){o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~c}function Fh(i){if(Gc){for(i=i.memoizedState;i!==null;){var o=i.queue;o!==null&&(o.pending=null),i=i.next}Gc=!1}fs=0,$t=bt=Ue=null,xa=!1,Uo=Kc=0,wa=null}function Mn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return $t===null?Ue.memoizedState=$t=i:$t=$t.next=i,$t}function Pt(){if(bt===null){var i=Ue.alternate;i=i!==null?i.memoizedState:null}else i=bt.next;var o=$t===null?Ue.memoizedState:$t.next;if(o!==null)$t=o,bt=i;else{if(i===null)throw Ue.alternate===null?Error(r(467)):Error(r(310));bt=i,i={memoizedState:bt.memoizedState,baseState:bt.baseState,baseQueue:bt.baseQueue,queue:bt.queue,next:null},$t===null?Ue.memoizedState=$t=i:$t=$t.next=i}return $t}function Zc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function qo(i){var o=Uo;return Uo+=1,wa===null&&(wa=[]),i=Xb(wa,i,o),o=Ue,($t===null?o.memoizedState:$t.next)===null&&(o=o.alternate,B.H=o===null||o.memoizedState===null?V_:tp),i}function Jc(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return qo(i);if(i.$$typeof===T)return gn(i)}throw Error(r(438,String(i)))}function Vh(i){var o=null,c=Ue.updateQueue;if(c!==null&&(o=c.memoCache),o==null){var h=Ue.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(o={data:h.data.map(function(b){return b.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),c===null&&(c=Zc(),Ue.updateQueue=c),c.memoCache=o,c=o.data[o.index],c===void 0)for(c=o.data[o.index]=Array(i),h=0;h<i;h++)c[h]=M;return o.index++,c}function ds(i,o){return typeof o=="function"?o(i):o}function Qc(i){var o=Pt();return Hh(o,bt,i)}function Hh(i,o,c){var h=i.queue;if(h===null)throw Error(r(311));h.lastRenderedReducer=c;var b=i.baseQueue,_=h.pending;if(_!==null){if(b!==null){var S=b.next;b.next=_.next,_.next=S}o.baseQueue=b=_,h.pending=null}if(_=i.baseState,b===null)i.memoizedState=_;else{o=b.next;var A=S=null,U=null,W=o,oe=!1;do{var fe=W.lane&-536870913;if(fe!==W.lane?(Ye&fe)===fe:(fs&fe)===fe){var te=W.revertLane;if(te===0)U!==null&&(U=U.next={lane:0,revertLane:0,gesture:null,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null}),fe===ga&&(oe=!0);else if((fs&te)===te){W=W.next,te===ga&&(oe=!0);continue}else fe={lane:0,revertLane:W.revertLane,gesture:null,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null},U===null?(A=U=fe,S=_):U=U.next=fe,Ue.lanes|=te,Us|=te;fe=W.action,Ai&&c(_,fe),_=W.hasEagerState?W.eagerState:c(_,fe)}else te={lane:fe,revertLane:W.revertLane,gesture:W.gesture,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null},U===null?(A=U=te,S=_):U=U.next=te,Ue.lanes|=fe,Us|=fe;W=W.next}while(W!==null&&W!==o);if(U===null?S=_:U.next=A,!sr(_,i.memoizedState)&&(Ut=!0,oe&&(c=ya,c!==null)))throw c;i.memoizedState=_,i.baseState=S,i.baseQueue=U,h.lastRenderedState=_}return b===null&&(h.lanes=0),[i.memoizedState,h.dispatch]}function Gh(i){var o=Pt(),c=o.queue;if(c===null)throw Error(r(311));c.lastRenderedReducer=i;var h=c.dispatch,b=c.pending,_=o.memoizedState;if(b!==null){c.pending=null;var S=b=b.next;do _=i(_,S.action),S=S.next;while(S!==b);sr(_,o.memoizedState)||(Ut=!0),o.memoizedState=_,o.baseQueue===null&&(o.baseState=_),c.lastRenderedState=_}return[_,h]}function u_(i,o,c){var h=Ue,b=Pt(),_=tt;if(_){if(c===void 0)throw Error(r(407));c=c()}else c=o();var S=!sr((bt||b).memoizedState,c);if(S&&(b.memoizedState=c,Ut=!0),b=b.queue,Jh(h_.bind(null,h,b,i),[i]),b.getSnapshot!==o||S||$t!==null&&$t.memoizedState.tag&1){if(h.flags|=2048,Sa(9,{destroy:void 0},d_.bind(null,h,b,c,o),null),xt===null)throw Error(r(349));_||(fs&127)!==0||f_(h,o,c)}return c}function f_(i,o,c){i.flags|=16384,i={getSnapshot:o,value:c},o=Ue.updateQueue,o===null?(o=Zc(),Ue.updateQueue=o,o.stores=[i]):(c=o.stores,c===null?o.stores=[i]:c.push(i))}function d_(i,o,c,h){o.value=c,o.getSnapshot=h,p_(o)&&m_(i)}function h_(i,o,c){return c(function(){p_(o)&&m_(i)})}function p_(i){var o=i.getSnapshot;i=i.value;try{var c=o();return!sr(i,c)}catch{return!0}}function m_(i){var o=_i(i,2);o!==null&&Jn(o,i,2)}function Kh(i){var o=Mn();if(typeof i=="function"){var c=i;if(i=c(),Ai){ft(!0);try{c()}finally{ft(!1)}}}return o.memoizedState=o.baseState=i,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ds,lastRenderedState:i},o}function g_(i,o,c,h){return i.baseState=c,Hh(i,bt,typeof h=="function"?h:ds)}function Y2(i,o,c,h,b){if(Xc(i))throw Error(r(485));if(i=o.action,i!==null){var _={payload:b,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(S){_.listeners.push(S)}};B.T!==null?c(!0):_.isTransition=!1,h(_),c=o.pending,c===null?(_.next=o.pending=_,y_(o,_)):(_.next=c.next,o.pending=c.next=_)}}function y_(i,o){var c=o.action,h=o.payload,b=i.state;if(o.isTransition){var _=B.T,S={};B.T=S;try{var A=c(b,h),U=B.S;U!==null&&U(S,A),b_(i,o,A)}catch(W){Zh(i,o,W)}finally{_!==null&&S.types!==null&&(_.types=S.types),B.T=_}}else try{_=c(b,h),b_(i,o,_)}catch(W){Zh(i,o,W)}}function b_(i,o,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(h){__(i,o,h)},function(h){return Zh(i,o,h)}):__(i,o,c)}function __(i,o,c){o.status="fulfilled",o.value=c,v_(o),i.state=c,o=i.pending,o!==null&&(c=o.next,c===o?i.pending=null:(c=c.next,o.next=c,y_(i,c)))}function Zh(i,o,c){var h=i.pending;if(i.pending=null,h!==null){h=h.next;do o.status="rejected",o.reason=c,v_(o),o=o.next;while(o!==h)}i.action=null}function v_(i){i=i.listeners;for(var o=0;o<i.length;o++)(0,i[o])()}function x_(i,o){return o}function w_(i,o){if(tt){var c=xt.formState;if(c!==null){e:{var h=Ue;if(tt){if(At){t:{for(var b=At,_=Er;b.nodeType!==8;){if(!_){b=null;break t}if(b=Tr(b.nextSibling),b===null){b=null;break t}}_=b.data,b=_==="F!"||_==="F"?b:null}if(b){At=Tr(b.nextSibling),h=b.data==="F!";break e}}Ns(h)}h=!1}h&&(o=c[0])}}return c=Mn(),c.memoizedState=c.baseState=o,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:x_,lastRenderedState:o},c.queue=h,c=U_.bind(null,Ue,h),h.dispatch=c,h=Kh(!1),_=ep.bind(null,Ue,!1,h.queue),h=Mn(),b={state:o,dispatch:null,action:i,pending:null},h.queue=b,c=Y2.bind(null,Ue,b,_,c),b.dispatch=c,h.memoizedState=i,[o,c,!1]}function S_(i){var o=Pt();return k_(o,bt,i)}function k_(i,o,c){if(o=Hh(i,o,x_)[0],i=Qc(ds)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var h=qo(o)}catch(S){throw S===ba?$c:S}else h=o;o=Pt();var b=o.queue,_=b.dispatch;return c!==o.memoizedState&&(Ue.flags|=2048,Sa(9,{destroy:void 0},W2.bind(null,b,c),null)),[h,_,i]}function W2(i,o){i.action=o}function E_(i){var o=Pt(),c=bt;if(c!==null)return k_(o,c,i);Pt(),o=o.memoizedState,c=Pt();var h=c.queue.dispatch;return c.memoizedState=i,[o,h,!1]}function Sa(i,o,c,h){return i={tag:i,create:c,deps:h,inst:o,next:null},o=Ue.updateQueue,o===null&&(o=Zc(),Ue.updateQueue=o),c=o.lastEffect,c===null?o.lastEffect=i.next=i:(h=c.next,c.next=i,i.next=h,o.lastEffect=i),i}function C_(){return Pt().memoizedState}function Yc(i,o,c,h){var b=Mn();Ue.flags|=i,b.memoizedState=Sa(1|o,{destroy:void 0},c,h===void 0?null:h)}function Wc(i,o,c,h){var b=Pt();h=h===void 0?null:h;var _=b.memoizedState.inst;bt!==null&&h!==null&&Bh(h,bt.memoizedState.deps)?b.memoizedState=Sa(o,_,c,h):(Ue.flags|=i,b.memoizedState=Sa(1|o,_,c,h))}function T_(i,o){Yc(8390656,8,i,o)}function Jh(i,o){Wc(2048,8,i,o)}function X2(i){Ue.flags|=4;var o=Ue.updateQueue;if(o===null)o=Zc(),Ue.updateQueue=o,o.events=[i];else{var c=o.events;c===null?o.events=[i]:c.push(i)}}function A_(i){var o=Pt().memoizedState;return X2({ref:o,nextImpl:i}),function(){if((ct&2)!==0)throw Error(r(440));return o.impl.apply(void 0,arguments)}}function R_(i,o){return Wc(4,2,i,o)}function O_(i,o){return Wc(4,4,i,o)}function I_(i,o){if(typeof o=="function"){i=i();var c=o(i);return function(){typeof c=="function"?c():o(null)}}if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function N_(i,o,c){c=c!=null?c.concat([i]):null,Wc(4,4,I_.bind(null,o,i),c)}function Qh(){}function M_(i,o){var c=Pt();o=o===void 0?null:o;var h=c.memoizedState;return o!==null&&Bh(o,h[1])?h[0]:(c.memoizedState=[i,o],i)}function D_(i,o){var c=Pt();o=o===void 0?null:o;var h=c.memoizedState;if(o!==null&&Bh(o,h[1]))return h[0];if(h=i(),Ai){ft(!0);try{i()}finally{ft(!1)}}return c.memoizedState=[h,o],h}function Yh(i,o,c){return c===void 0||(fs&1073741824)!==0&&(Ye&261930)===0?i.memoizedState=o:(i.memoizedState=c,i=jv(),Ue.lanes|=i,Us|=i,c)}function j_(i,o,c,h){return sr(c,o)?c:va.current!==null?(i=Yh(i,c,h),sr(i,o)||(Ut=!0),i):(fs&42)===0||(fs&1073741824)!==0&&(Ye&261930)===0?(Ut=!0,i.memoizedState=c):(i=jv(),Ue.lanes|=i,Us|=i,o)}function L_(i,o,c,h,b){var _=K.p;K.p=_!==0&&8>_?_:8;var S=B.T,A={};B.T=A,ep(i,!1,o,c);try{var U=b(),W=B.S;if(W!==null&&W(A,U),U!==null&&typeof U=="object"&&typeof U.then=="function"){var oe=Z2(U,h);Fo(i,o,oe,ur(i))}else Fo(i,o,h,ur(i))}catch(fe){Fo(i,o,{then:function(){},status:"rejected",reason:fe},ur())}finally{K.p=_,S!==null&&A.types!==null&&(S.types=A.types),B.T=S}}function eR(){}function Wh(i,o,c,h){if(i.tag!==5)throw Error(r(476));var b=z_(i).queue;L_(i,b,o,ie,c===null?eR:function(){return P_(i),c(h)})}function z_(i){var o=i.memoizedState;if(o!==null)return o;o={memoizedState:ie,baseState:ie,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ds,lastRenderedState:ie},next:null};var c={};return o.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ds,lastRenderedState:c},next:null},i.memoizedState=o,i=i.alternate,i!==null&&(i.memoizedState=o),o}function P_(i){var o=z_(i);o.next===null&&(o=i.alternate.memoizedState),Fo(i,o.next.queue,{},ur())}function Xh(){return gn(al)}function B_(){return Pt().memoizedState}function $_(){return Pt().memoizedState}function tR(i){for(var o=i.return;o!==null;){switch(o.tag){case 24:case 3:var c=ur();i=js(c);var h=Ls(o,i,c);h!==null&&(Jn(h,o,c),Po(h,o,c)),o={cache:Ah()},i.payload=o;return}o=o.return}}function nR(i,o,c){var h=ur();c={lane:h,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Xc(i)?q_(o,c):(c=yh(i,o,c,h),c!==null&&(Jn(c,i,h),F_(c,o,h)))}function U_(i,o,c){var h=ur();Fo(i,o,c,h)}function Fo(i,o,c,h){var b={lane:h,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null};if(Xc(i))q_(o,b);else{var _=i.alternate;if(i.lanes===0&&(_===null||_.lanes===0)&&(_=o.lastRenderedReducer,_!==null))try{var S=o.lastRenderedState,A=_(S,c);if(b.hasEagerState=!0,b.eagerState=A,sr(A,S))return Mc(i,o,b,0),xt===null&&Nc(),!1}catch{}if(c=yh(i,o,b,h),c!==null)return Jn(c,i,h),F_(c,o,h),!0}return!1}function ep(i,o,c,h){if(h={lane:2,revertLane:Np(),gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null},Xc(i)){if(o)throw Error(r(479))}else o=yh(i,c,h,2),o!==null&&Jn(o,i,2)}function Xc(i){var o=i.alternate;return i===Ue||o!==null&&o===Ue}function q_(i,o){xa=Gc=!0;var c=i.pending;c===null?o.next=o:(o.next=c.next,c.next=o),i.pending=o}function F_(i,o,c){if((c&4194048)!==0){var h=o.lanes;h&=i.pendingLanes,c|=h,o.lanes=c,vc(i,c)}}var Vo={readContext:gn,use:Jc,useCallback:Dt,useContext:Dt,useEffect:Dt,useImperativeHandle:Dt,useLayoutEffect:Dt,useInsertionEffect:Dt,useMemo:Dt,useReducer:Dt,useRef:Dt,useState:Dt,useDebugValue:Dt,useDeferredValue:Dt,useTransition:Dt,useSyncExternalStore:Dt,useId:Dt,useHostTransitionStatus:Dt,useFormState:Dt,useActionState:Dt,useOptimistic:Dt,useMemoCache:Dt,useCacheRefresh:Dt};Vo.useEffectEvent=Dt;var V_={readContext:gn,use:Jc,useCallback:function(i,o){return Mn().memoizedState=[i,o===void 0?null:o],i},useContext:gn,useEffect:T_,useImperativeHandle:function(i,o,c){c=c!=null?c.concat([i]):null,Yc(4194308,4,I_.bind(null,o,i),c)},useLayoutEffect:function(i,o){return Yc(4194308,4,i,o)},useInsertionEffect:function(i,o){Yc(4,2,i,o)},useMemo:function(i,o){var c=Mn();o=o===void 0?null:o;var h=i();if(Ai){ft(!0);try{i()}finally{ft(!1)}}return c.memoizedState=[h,o],h},useReducer:function(i,o,c){var h=Mn();if(c!==void 0){var b=c(o);if(Ai){ft(!0);try{c(o)}finally{ft(!1)}}}else b=o;return h.memoizedState=h.baseState=b,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:b},h.queue=i,i=i.dispatch=nR.bind(null,Ue,i),[h.memoizedState,i]},useRef:function(i){var o=Mn();return i={current:i},o.memoizedState=i},useState:function(i){i=Kh(i);var o=i.queue,c=U_.bind(null,Ue,o);return o.dispatch=c,[i.memoizedState,c]},useDebugValue:Qh,useDeferredValue:function(i,o){var c=Mn();return Yh(c,i,o)},useTransition:function(){var i=Kh(!1);return i=L_.bind(null,Ue,i.queue,!0,!1),Mn().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,o,c){var h=Ue,b=Mn();if(tt){if(c===void 0)throw Error(r(407));c=c()}else{if(c=o(),xt===null)throw Error(r(349));(Ye&127)!==0||f_(h,o,c)}b.memoizedState=c;var _={value:c,getSnapshot:o};return b.queue=_,T_(h_.bind(null,h,_,i),[i]),h.flags|=2048,Sa(9,{destroy:void 0},d_.bind(null,h,_,c,o),null),c},useId:function(){var i=Mn(),o=xt.identifierPrefix;if(tt){var c=Vr,h=Fr;c=(h&~(1<<32-Me(h)-1)).toString(32)+c,o="_"+o+"R_"+c,c=Kc++,0<c&&(o+="H"+c.toString(32)),o+="_"}else c=J2++,o="_"+o+"r_"+c.toString(32)+"_";return i.memoizedState=o},useHostTransitionStatus:Xh,useFormState:w_,useActionState:w_,useOptimistic:function(i){var o=Mn();o.memoizedState=o.baseState=i;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=c,o=ep.bind(null,Ue,!0,c),c.dispatch=o,[i,o]},useMemoCache:Vh,useCacheRefresh:function(){return Mn().memoizedState=tR.bind(null,Ue)},useEffectEvent:function(i){var o=Mn(),c={impl:i};return o.memoizedState=c,function(){if((ct&2)!==0)throw Error(r(440));return c.impl.apply(void 0,arguments)}}},tp={readContext:gn,use:Jc,useCallback:M_,useContext:gn,useEffect:Jh,useImperativeHandle:N_,useInsertionEffect:R_,useLayoutEffect:O_,useMemo:D_,useReducer:Qc,useRef:C_,useState:function(){return Qc(ds)},useDebugValue:Qh,useDeferredValue:function(i,o){var c=Pt();return j_(c,bt.memoizedState,i,o)},useTransition:function(){var i=Qc(ds)[0],o=Pt().memoizedState;return[typeof i=="boolean"?i:qo(i),o]},useSyncExternalStore:u_,useId:B_,useHostTransitionStatus:Xh,useFormState:S_,useActionState:S_,useOptimistic:function(i,o){var c=Pt();return g_(c,bt,i,o)},useMemoCache:Vh,useCacheRefresh:$_};tp.useEffectEvent=A_;var H_={readContext:gn,use:Jc,useCallback:M_,useContext:gn,useEffect:Jh,useImperativeHandle:N_,useInsertionEffect:R_,useLayoutEffect:O_,useMemo:D_,useReducer:Gh,useRef:C_,useState:function(){return Gh(ds)},useDebugValue:Qh,useDeferredValue:function(i,o){var c=Pt();return bt===null?Yh(c,i,o):j_(c,bt.memoizedState,i,o)},useTransition:function(){var i=Gh(ds)[0],o=Pt().memoizedState;return[typeof i=="boolean"?i:qo(i),o]},useSyncExternalStore:u_,useId:B_,useHostTransitionStatus:Xh,useFormState:E_,useActionState:E_,useOptimistic:function(i,o){var c=Pt();return bt!==null?g_(c,bt,i,o):(c.baseState=i,[i,c.queue.dispatch])},useMemoCache:Vh,useCacheRefresh:$_};H_.useEffectEvent=A_;function np(i,o,c,h){o=i.memoizedState,c=c(h,o),c=c==null?o:p({},o,c),i.memoizedState=c,i.lanes===0&&(i.updateQueue.baseState=c)}var rp={enqueueSetState:function(i,o,c){i=i._reactInternals;var h=ur(),b=js(h);b.payload=o,c!=null&&(b.callback=c),o=Ls(i,b,h),o!==null&&(Jn(o,i,h),Po(o,i,h))},enqueueReplaceState:function(i,o,c){i=i._reactInternals;var h=ur(),b=js(h);b.tag=1,b.payload=o,c!=null&&(b.callback=c),o=Ls(i,b,h),o!==null&&(Jn(o,i,h),Po(o,i,h))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var c=ur(),h=js(c);h.tag=2,o!=null&&(h.callback=o),o=Ls(i,h,c),o!==null&&(Jn(o,i,c),Po(o,i,c))}};function G_(i,o,c,h,b,_,S){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(h,_,S):o.prototype&&o.prototype.isPureReactComponent?!Oo(c,h)||!Oo(b,_):!0}function K_(i,o,c,h){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(c,h),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(c,h),o.state!==i&&rp.enqueueReplaceState(o,o.state,null)}function Ri(i,o){var c=o;if("ref"in o){c={};for(var h in o)h!=="ref"&&(c[h]=o[h])}if(i=i.defaultProps){c===o&&(c=p({},c));for(var b in i)c[b]===void 0&&(c[b]=i[b])}return c}function Z_(i){Ic(i)}function J_(i){console.error(i)}function Q_(i){Ic(i)}function eu(i,o){try{var c=i.onUncaughtError;c(o.value,{componentStack:o.stack})}catch(h){setTimeout(function(){throw h})}}function Y_(i,o,c){try{var h=i.onCaughtError;h(c.value,{componentStack:c.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(b){setTimeout(function(){throw b})}}function sp(i,o,c){return c=js(c),c.tag=3,c.payload={element:null},c.callback=function(){eu(i,o)},c}function W_(i){return i=js(i),i.tag=3,i}function X_(i,o,c,h){var b=c.type.getDerivedStateFromError;if(typeof b=="function"){var _=h.value;i.payload=function(){return b(_)},i.callback=function(){Y_(o,c,h)}}var S=c.stateNode;S!==null&&typeof S.componentDidCatch=="function"&&(i.callback=function(){Y_(o,c,h),typeof b!="function"&&(qs===null?qs=new Set([this]):qs.add(this));var A=h.stack;this.componentDidCatch(h.value,{componentStack:A!==null?A:""})})}function rR(i,o,c,h,b){if(c.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(o=c.alternate,o!==null&&ma(o,c,b,!0),c=ar.current,c!==null){switch(c.tag){case 31:case 13:return Cr===null?du():c.alternate===null&&jt===0&&(jt=3),c.flags&=-257,c.flags|=65536,c.lanes=b,h===Uc?c.flags|=16384:(o=c.updateQueue,o===null?c.updateQueue=new Set([h]):o.add(h),Rp(i,h,b)),!1;case 22:return c.flags|=65536,h===Uc?c.flags|=16384:(o=c.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([h])},c.updateQueue=o):(c=o.retryQueue,c===null?o.retryQueue=new Set([h]):c.add(h)),Rp(i,h,b)),!1}throw Error(r(435,c.tag))}return Rp(i,h,b),du(),!1}if(tt)return o=ar.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=b,h!==Sh&&(i=Error(r(422),{cause:h}),Mo(wr(i,c)))):(h!==Sh&&(o=Error(r(423),{cause:h}),Mo(wr(o,c))),i=i.current.alternate,i.flags|=65536,b&=-b,i.lanes|=b,h=wr(h,c),b=sp(i.stateNode,h,b),Dh(i,b),jt!==4&&(jt=2)),!1;var _=Error(r(520),{cause:h});if(_=wr(_,c),Wo===null?Wo=[_]:Wo.push(_),jt!==4&&(jt=2),o===null)return!0;h=wr(h,c),c=o;do{switch(c.tag){case 3:return c.flags|=65536,i=b&-b,c.lanes|=i,i=sp(c.stateNode,h,i),Dh(c,i),!1;case 1:if(o=c.type,_=c.stateNode,(c.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(qs===null||!qs.has(_))))return c.flags|=65536,b&=-b,c.lanes|=b,b=W_(b),X_(b,i,c,h),Dh(c,b),!1}c=c.return}while(c!==null);return!1}var ip=Error(r(461)),Ut=!1;function yn(i,o,c,h){o.child=i===null?r_(o,null,c,h):Ti(o,i.child,c,h)}function ev(i,o,c,h,b){c=c.render;var _=o.ref;if("ref"in h){var S={};for(var A in h)A!=="ref"&&(S[A]=h[A])}else S=h;return Si(o),h=$h(i,o,c,S,_,b),A=Uh(),i!==null&&!Ut?(qh(i,o,b),hs(i,o,b)):(tt&&A&&xh(o),o.flags|=1,yn(i,o,h,b),o.child)}function tv(i,o,c,h,b){if(i===null){var _=c.type;return typeof _=="function"&&!bh(_)&&_.defaultProps===void 0&&c.compare===null?(o.tag=15,o.type=_,nv(i,o,_,h,b)):(i=jc(c.type,null,h,o,o.mode,b),i.ref=o.ref,i.return=o,o.child=i)}if(_=i.child,!hp(i,b)){var S=_.memoizedProps;if(c=c.compare,c=c!==null?c:Oo,c(S,h)&&i.ref===o.ref)return hs(i,o,b)}return o.flags|=1,i=os(_,h),i.ref=o.ref,i.return=o,o.child=i}function nv(i,o,c,h,b){if(i!==null){var _=i.memoizedProps;if(Oo(_,h)&&i.ref===o.ref)if(Ut=!1,o.pendingProps=h=_,hp(i,b))(i.flags&131072)!==0&&(Ut=!0);else return o.lanes=i.lanes,hs(i,o,b)}return ap(i,o,c,h,b)}function rv(i,o,c,h){var b=h.children,_=i!==null?i.memoizedState:null;if(i===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),h.mode==="hidden"){if((o.flags&128)!==0){if(_=_!==null?_.baseLanes|c:c,i!==null){for(h=o.child=i.child,b=0;h!==null;)b=b|h.lanes|h.childLanes,h=h.sibling;h=b&~_}else h=0,o.child=null;return sv(i,o,_,c,h)}if((c&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},i!==null&&Bc(o,_!==null?_.cachePool:null),_!==null?a_(o,_):Lh(),o_(o);else return h=o.lanes=536870912,sv(i,o,_!==null?_.baseLanes|c:c,c,h)}else _!==null?(Bc(o,_.cachePool),a_(o,_),Ps(),o.memoizedState=null):(i!==null&&Bc(o,null),Lh(),Ps());return yn(i,o,b,c),o.child}function Ho(i,o){return i!==null&&i.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function sv(i,o,c,h,b){var _=Oh();return _=_===null?null:{parent:Bt._currentValue,pool:_},o.memoizedState={baseLanes:c,cachePool:_},i!==null&&Bc(o,null),Lh(),o_(o),i!==null&&ma(i,o,h,!0),o.childLanes=b,null}function tu(i,o){return o=ru({mode:o.mode,children:o.children},i.mode),o.ref=i.ref,i.child=o,o.return=i,o}function iv(i,o,c){return Ti(o,i.child,null,c),i=tu(o,o.pendingProps),i.flags|=2,or(o),o.memoizedState=null,i}function sR(i,o,c){var h=o.pendingProps,b=(o.flags&128)!==0;if(o.flags&=-129,i===null){if(tt){if(h.mode==="hidden")return i=tu(o,h),o.lanes=536870912,Ho(null,i);if(Ph(o),(i=At)?(i=yx(i,Er),i=i!==null&&i.data==="&"?i:null,i!==null&&(o.memoizedState={dehydrated:i,treeContext:Os!==null?{id:Fr,overflow:Vr}:null,retryLane:536870912,hydrationErrors:null},c=qb(i),c.return=o,o.child=c,mn=o,At=null)):i=null,i===null)throw Ns(o);return o.lanes=536870912,null}return tu(o,h)}var _=i.memoizedState;if(_!==null){var S=_.dehydrated;if(Ph(o),b)if(o.flags&256)o.flags&=-257,o=iv(i,o,c);else if(o.memoizedState!==null)o.child=i.child,o.flags|=128,o=null;else throw Error(r(558));else if(Ut||ma(i,o,c,!1),b=(c&i.childLanes)!==0,Ut||b){if(h=xt,h!==null&&(S=pi(h,c),S!==0&&S!==_.retryLane))throw _.retryLane=S,_i(i,S),Jn(h,i,S),ip;du(),o=iv(i,o,c)}else i=_.treeContext,At=Tr(S.nextSibling),mn=o,tt=!0,Is=null,Er=!1,i!==null&&Hb(o,i),o=tu(o,h),o.flags|=4096;return o}return i=os(i.child,{mode:h.mode,children:h.children}),i.ref=o.ref,o.child=i,i.return=o,i}function nu(i,o){var c=o.ref;if(c===null)i!==null&&i.ref!==null&&(o.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(r(284));(i===null||i.ref!==c)&&(o.flags|=4194816)}}function ap(i,o,c,h,b){return Si(o),c=$h(i,o,c,h,void 0,b),h=Uh(),i!==null&&!Ut?(qh(i,o,b),hs(i,o,b)):(tt&&h&&xh(o),o.flags|=1,yn(i,o,c,b),o.child)}function av(i,o,c,h,b,_){return Si(o),o.updateQueue=null,c=c_(o,h,c,b),l_(i),h=Uh(),i!==null&&!Ut?(qh(i,o,_),hs(i,o,_)):(tt&&h&&xh(o),o.flags|=1,yn(i,o,c,_),o.child)}function ov(i,o,c,h,b){if(Si(o),o.stateNode===null){var _=fa,S=c.contextType;typeof S=="object"&&S!==null&&(_=gn(S)),_=new c(h,_),o.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=rp,o.stateNode=_,_._reactInternals=o,_=o.stateNode,_.props=h,_.state=o.memoizedState,_.refs={},Nh(o),S=c.contextType,_.context=typeof S=="object"&&S!==null?gn(S):fa,_.state=o.memoizedState,S=c.getDerivedStateFromProps,typeof S=="function"&&(np(o,c,S,h),_.state=o.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(S=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),S!==_.state&&rp.enqueueReplaceState(_,_.state,null),$o(o,h,_,b),Bo(),_.state=o.memoizedState),typeof _.componentDidMount=="function"&&(o.flags|=4194308),h=!0}else if(i===null){_=o.stateNode;var A=o.memoizedProps,U=Ri(c,A);_.props=U;var W=_.context,oe=c.contextType;S=fa,typeof oe=="object"&&oe!==null&&(S=gn(oe));var fe=c.getDerivedStateFromProps;oe=typeof fe=="function"||typeof _.getSnapshotBeforeUpdate=="function",A=o.pendingProps!==A,oe||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(A||W!==S)&&K_(o,_,h,S),Ds=!1;var te=o.memoizedState;_.state=te,$o(o,h,_,b),Bo(),W=o.memoizedState,A||te!==W||Ds?(typeof fe=="function"&&(np(o,c,fe,h),W=o.memoizedState),(U=Ds||G_(o,c,U,h,te,W,S))?(oe||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(o.flags|=4194308)):(typeof _.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=h,o.memoizedState=W),_.props=h,_.state=W,_.context=S,h=U):(typeof _.componentDidMount=="function"&&(o.flags|=4194308),h=!1)}else{_=o.stateNode,Mh(i,o),S=o.memoizedProps,oe=Ri(c,S),_.props=oe,fe=o.pendingProps,te=_.context,W=c.contextType,U=fa,typeof W=="object"&&W!==null&&(U=gn(W)),A=c.getDerivedStateFromProps,(W=typeof A=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(S!==fe||te!==U)&&K_(o,_,h,U),Ds=!1,te=o.memoizedState,_.state=te,$o(o,h,_,b),Bo();var ae=o.memoizedState;S!==fe||te!==ae||Ds||i!==null&&i.dependencies!==null&&zc(i.dependencies)?(typeof A=="function"&&(np(o,c,A,h),ae=o.memoizedState),(oe=Ds||G_(o,c,oe,h,te,ae,U)||i!==null&&i.dependencies!==null&&zc(i.dependencies))?(W||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(h,ae,U),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(h,ae,U)),typeof _.componentDidUpdate=="function"&&(o.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof _.componentDidUpdate!="function"||S===i.memoizedProps&&te===i.memoizedState||(o.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||S===i.memoizedProps&&te===i.memoizedState||(o.flags|=1024),o.memoizedProps=h,o.memoizedState=ae),_.props=h,_.state=ae,_.context=U,h=oe):(typeof _.componentDidUpdate!="function"||S===i.memoizedProps&&te===i.memoizedState||(o.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||S===i.memoizedProps&&te===i.memoizedState||(o.flags|=1024),h=!1)}return _=h,nu(i,o),h=(o.flags&128)!==0,_||h?(_=o.stateNode,c=h&&typeof c.getDerivedStateFromError!="function"?null:_.render(),o.flags|=1,i!==null&&h?(o.child=Ti(o,i.child,null,b),o.child=Ti(o,null,c,b)):yn(i,o,c,b),o.memoizedState=_.state,i=o.child):i=hs(i,o,b),i}function lv(i,o,c,h){return xi(),o.flags|=256,yn(i,o,c,h),o.child}var op={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function lp(i){return{baseLanes:i,cachePool:Yb()}}function cp(i,o,c){return i=i!==null?i.childLanes&~c:0,o&&(i|=cr),i}function cv(i,o,c){var h=o.pendingProps,b=!1,_=(o.flags&128)!==0,S;if((S=_)||(S=i!==null&&i.memoizedState===null?!1:(zt.current&2)!==0),S&&(b=!0,o.flags&=-129),S=(o.flags&32)!==0,o.flags&=-33,i===null){if(tt){if(b?zs(o):Ps(),(i=At)?(i=yx(i,Er),i=i!==null&&i.data!=="&"?i:null,i!==null&&(o.memoizedState={dehydrated:i,treeContext:Os!==null?{id:Fr,overflow:Vr}:null,retryLane:536870912,hydrationErrors:null},c=qb(i),c.return=o,o.child=c,mn=o,At=null)):i=null,i===null)throw Ns(o);return Hp(i)?o.lanes=32:o.lanes=536870912,null}var A=h.children;return h=h.fallback,b?(Ps(),b=o.mode,A=ru({mode:"hidden",children:A},b),h=vi(h,b,c,null),A.return=o,h.return=o,A.sibling=h,o.child=A,h=o.child,h.memoizedState=lp(c),h.childLanes=cp(i,S,c),o.memoizedState=op,Ho(null,h)):(zs(o),up(o,A))}var U=i.memoizedState;if(U!==null&&(A=U.dehydrated,A!==null)){if(_)o.flags&256?(zs(o),o.flags&=-257,o=fp(i,o,c)):o.memoizedState!==null?(Ps(),o.child=i.child,o.flags|=128,o=null):(Ps(),A=h.fallback,b=o.mode,h=ru({mode:"visible",children:h.children},b),A=vi(A,b,c,null),A.flags|=2,h.return=o,A.return=o,h.sibling=A,o.child=h,Ti(o,i.child,null,c),h=o.child,h.memoizedState=lp(c),h.childLanes=cp(i,S,c),o.memoizedState=op,o=Ho(null,h));else if(zs(o),Hp(A)){if(S=A.nextSibling&&A.nextSibling.dataset,S)var W=S.dgst;S=W,h=Error(r(419)),h.stack="",h.digest=S,Mo({value:h,source:null,stack:null}),o=fp(i,o,c)}else if(Ut||ma(i,o,c,!1),S=(c&i.childLanes)!==0,Ut||S){if(S=xt,S!==null&&(h=pi(S,c),h!==0&&h!==U.retryLane))throw U.retryLane=h,_i(i,h),Jn(S,i,h),ip;Vp(A)||du(),o=fp(i,o,c)}else Vp(A)?(o.flags|=192,o.child=i.child,o=null):(i=U.treeContext,At=Tr(A.nextSibling),mn=o,tt=!0,Is=null,Er=!1,i!==null&&Hb(o,i),o=up(o,h.children),o.flags|=4096);return o}return b?(Ps(),A=h.fallback,b=o.mode,U=i.child,W=U.sibling,h=os(U,{mode:"hidden",children:h.children}),h.subtreeFlags=U.subtreeFlags&65011712,W!==null?A=os(W,A):(A=vi(A,b,c,null),A.flags|=2),A.return=o,h.return=o,h.sibling=A,o.child=h,Ho(null,h),h=o.child,A=i.child.memoizedState,A===null?A=lp(c):(b=A.cachePool,b!==null?(U=Bt._currentValue,b=b.parent!==U?{parent:U,pool:U}:b):b=Yb(),A={baseLanes:A.baseLanes|c,cachePool:b}),h.memoizedState=A,h.childLanes=cp(i,S,c),o.memoizedState=op,Ho(i.child,h)):(zs(o),c=i.child,i=c.sibling,c=os(c,{mode:"visible",children:h.children}),c.return=o,c.sibling=null,i!==null&&(S=o.deletions,S===null?(o.deletions=[i],o.flags|=16):S.push(i)),o.child=c,o.memoizedState=null,c)}function up(i,o){return o=ru({mode:"visible",children:o},i.mode),o.return=i,i.child=o}function ru(i,o){return i=ir(22,i,null,o),i.lanes=0,i}function fp(i,o,c){return Ti(o,i.child,null,c),i=up(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function uv(i,o,c){i.lanes|=o;var h=i.alternate;h!==null&&(h.lanes|=o),Ch(i.return,o,c)}function dp(i,o,c,h,b,_){var S=i.memoizedState;S===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:h,tail:c,tailMode:b,treeForkCount:_}:(S.isBackwards=o,S.rendering=null,S.renderingStartTime=0,S.last=h,S.tail=c,S.tailMode=b,S.treeForkCount=_)}function fv(i,o,c){var h=o.pendingProps,b=h.revealOrder,_=h.tail;h=h.children;var S=zt.current,A=(S&2)!==0;if(A?(S=S&1|2,o.flags|=128):S&=1,O(zt,S),yn(i,o,h,c),h=tt?No:0,!A&&i!==null&&(i.flags&128)!==0)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&uv(i,c,o);else if(i.tag===19)uv(i,c,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(b){case"forwards":for(c=o.child,b=null;c!==null;)i=c.alternate,i!==null&&Hc(i)===null&&(b=c),c=c.sibling;c=b,c===null?(b=o.child,o.child=null):(b=c.sibling,c.sibling=null),dp(o,!1,b,c,_,h);break;case"backwards":case"unstable_legacy-backwards":for(c=null,b=o.child,o.child=null;b!==null;){if(i=b.alternate,i!==null&&Hc(i)===null){o.child=b;break}i=b.sibling,b.sibling=c,c=b,b=i}dp(o,!0,c,null,_,h);break;case"together":dp(o,!1,null,null,void 0,h);break;default:o.memoizedState=null}return o.child}function hs(i,o,c){if(i!==null&&(o.dependencies=i.dependencies),Us|=o.lanes,(c&o.childLanes)===0)if(i!==null){if(ma(i,o,c,!1),(c&o.childLanes)===0)return null}else return null;if(i!==null&&o.child!==i.child)throw Error(r(153));if(o.child!==null){for(i=o.child,c=os(i,i.pendingProps),o.child=c,c.return=o;i.sibling!==null;)i=i.sibling,c=c.sibling=os(i,i.pendingProps),c.return=o;c.sibling=null}return o.child}function hp(i,o){return(i.lanes&o)!==0?!0:(i=i.dependencies,!!(i!==null&&zc(i)))}function iR(i,o,c){switch(o.tag){case 3:xe(o,o.stateNode.containerInfo),Ms(o,Bt,i.memoizedState.cache),xi();break;case 27:case 5:Te(o);break;case 4:xe(o,o.stateNode.containerInfo);break;case 10:Ms(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,Ph(o),null;break;case 13:var h=o.memoizedState;if(h!==null)return h.dehydrated!==null?(zs(o),o.flags|=128,null):(c&o.child.childLanes)!==0?cv(i,o,c):(zs(o),i=hs(i,o,c),i!==null?i.sibling:null);zs(o);break;case 19:var b=(i.flags&128)!==0;if(h=(c&o.childLanes)!==0,h||(ma(i,o,c,!1),h=(c&o.childLanes)!==0),b){if(h)return fv(i,o,c);o.flags|=128}if(b=o.memoizedState,b!==null&&(b.rendering=null,b.tail=null,b.lastEffect=null),O(zt,zt.current),h)break;return null;case 22:return o.lanes=0,rv(i,o,c,o.pendingProps);case 24:Ms(o,Bt,i.memoizedState.cache)}return hs(i,o,c)}function dv(i,o,c){if(i!==null)if(i.memoizedProps!==o.pendingProps)Ut=!0;else{if(!hp(i,c)&&(o.flags&128)===0)return Ut=!1,iR(i,o,c);Ut=(i.flags&131072)!==0}else Ut=!1,tt&&(o.flags&1048576)!==0&&Vb(o,No,o.index);switch(o.lanes=0,o.tag){case 16:e:{var h=o.pendingProps;if(i=Ei(o.elementType),o.type=i,typeof i=="function")bh(i)?(h=Ri(i,h),o.tag=1,o=ov(null,o,i,h,c)):(o.tag=0,o=ap(null,o,i,h,c));else{if(i!=null){var b=i.$$typeof;if(b===D){o.tag=11,o=ev(null,o,i,h,c);break e}else if(b===$){o.tag=14,o=tv(null,o,i,h,c);break e}}throw o=X(i)||i,Error(r(306,o,""))}}return o;case 0:return ap(i,o,o.type,o.pendingProps,c);case 1:return h=o.type,b=Ri(h,o.pendingProps),ov(i,o,h,b,c);case 3:e:{if(xe(o,o.stateNode.containerInfo),i===null)throw Error(r(387));h=o.pendingProps;var _=o.memoizedState;b=_.element,Mh(i,o),$o(o,h,null,c);var S=o.memoizedState;if(h=S.cache,Ms(o,Bt,h),h!==_.cache&&Th(o,[Bt],c,!0),Bo(),h=S.element,_.isDehydrated)if(_={element:h,isDehydrated:!1,cache:S.cache},o.updateQueue.baseState=_,o.memoizedState=_,o.flags&256){o=lv(i,o,h,c);break e}else if(h!==b){b=wr(Error(r(424)),o),Mo(b),o=lv(i,o,h,c);break e}else for(i=o.stateNode.containerInfo,i.nodeType===9?i=i.body:i=i.nodeName==="HTML"?i.ownerDocument.body:i,At=Tr(i.firstChild),mn=o,tt=!0,Is=null,Er=!0,c=r_(o,null,h,c),o.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(xi(),h===b){o=hs(i,o,c);break e}yn(i,o,h,c)}o=o.child}return o;case 26:return nu(i,o),i===null?(c=Sx(o.type,null,o.pendingProps,null))?o.memoizedState=c:tt||(c=o.type,i=o.pendingProps,h=_u(P.current).createElement(c),h[pn]=o,h[Fn]=i,bn(h,c,i),ln(h),o.stateNode=h):o.memoizedState=Sx(o.type,i.memoizedProps,o.pendingProps,i.memoizedState),null;case 27:return Te(o),i===null&&tt&&(h=o.stateNode=vx(o.type,o.pendingProps,P.current),mn=o,Er=!0,b=At,Gs(o.type)?(Gp=b,At=Tr(h.firstChild)):At=b),yn(i,o,o.pendingProps.children,c),nu(i,o),i===null&&(o.flags|=4194304),o.child;case 5:return i===null&&tt&&((b=h=At)&&(h=jR(h,o.type,o.pendingProps,Er),h!==null?(o.stateNode=h,mn=o,At=Tr(h.firstChild),Er=!1,b=!0):b=!1),b||Ns(o)),Te(o),b=o.type,_=o.pendingProps,S=i!==null?i.memoizedProps:null,h=_.children,Up(b,_)?h=null:S!==null&&Up(b,S)&&(o.flags|=32),o.memoizedState!==null&&(b=$h(i,o,Q2,null,null,c),al._currentValue=b),nu(i,o),yn(i,o,h,c),o.child;case 6:return i===null&&tt&&((i=c=At)&&(c=LR(c,o.pendingProps,Er),c!==null?(o.stateNode=c,mn=o,At=null,i=!0):i=!1),i||Ns(o)),null;case 13:return cv(i,o,c);case 4:return xe(o,o.stateNode.containerInfo),h=o.pendingProps,i===null?o.child=Ti(o,null,h,c):yn(i,o,h,c),o.child;case 11:return ev(i,o,o.type,o.pendingProps,c);case 7:return yn(i,o,o.pendingProps,c),o.child;case 8:return yn(i,o,o.pendingProps.children,c),o.child;case 12:return yn(i,o,o.pendingProps.children,c),o.child;case 10:return h=o.pendingProps,Ms(o,o.type,h.value),yn(i,o,h.children,c),o.child;case 9:return b=o.type._context,h=o.pendingProps.children,Si(o),b=gn(b),h=h(b),o.flags|=1,yn(i,o,h,c),o.child;case 14:return tv(i,o,o.type,o.pendingProps,c);case 15:return nv(i,o,o.type,o.pendingProps,c);case 19:return fv(i,o,c);case 31:return sR(i,o,c);case 22:return rv(i,o,c,o.pendingProps);case 24:return Si(o),h=gn(Bt),i===null?(b=Oh(),b===null&&(b=xt,_=Ah(),b.pooledCache=_,_.refCount++,_!==null&&(b.pooledCacheLanes|=c),b=_),o.memoizedState={parent:h,cache:b},Nh(o),Ms(o,Bt,b)):((i.lanes&c)!==0&&(Mh(i,o),$o(o,null,null,c),Bo()),b=i.memoizedState,_=o.memoizedState,b.parent!==h?(b={parent:h,cache:h},o.memoizedState=b,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=b),Ms(o,Bt,h)):(h=_.cache,Ms(o,Bt,h),h!==b.cache&&Th(o,[Bt],c,!0))),yn(i,o,o.pendingProps.children,c),o.child;case 29:throw o.pendingProps}throw Error(r(156,o.tag))}function ps(i){i.flags|=4}function pp(i,o,c,h,b){if((o=(i.mode&32)!==0)&&(o=!1),o){if(i.flags|=16777216,(b&335544128)===b)if(i.stateNode.complete)i.flags|=8192;else if(Bv())i.flags|=8192;else throw Ci=Uc,Ih}else i.flags&=-16777217}function hv(i,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!Ax(o))if(Bv())i.flags|=8192;else throw Ci=Uc,Ih}function su(i,o){o!==null&&(i.flags|=4),i.flags&16384&&(o=i.tag!==22?hi():536870912,i.lanes|=o,Ta|=o)}function Go(i,o){if(!tt)switch(i.tailMode){case"hidden":o=i.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?i.tail=null:c.sibling=null;break;case"collapsed":c=i.tail;for(var h=null;c!==null;)c.alternate!==null&&(h=c),c=c.sibling;h===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:h.sibling=null}}function Rt(i){var o=i.alternate!==null&&i.alternate.child===i.child,c=0,h=0;if(o)for(var b=i.child;b!==null;)c|=b.lanes|b.childLanes,h|=b.subtreeFlags&65011712,h|=b.flags&65011712,b.return=i,b=b.sibling;else for(b=i.child;b!==null;)c|=b.lanes|b.childLanes,h|=b.subtreeFlags,h|=b.flags,b.return=i,b=b.sibling;return i.subtreeFlags|=h,i.childLanes=c,o}function aR(i,o,c){var h=o.pendingProps;switch(wh(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Rt(o),null;case 1:return Rt(o),null;case 3:return c=o.stateNode,h=null,i!==null&&(h=i.memoizedState.cache),o.memoizedState.cache!==h&&(o.flags|=2048),us(Bt),ve(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(i===null||i.child===null)&&(pa(o)?ps(o):i===null||i.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,kh())),Rt(o),null;case 26:var b=o.type,_=o.memoizedState;return i===null?(ps(o),_!==null?(Rt(o),hv(o,_)):(Rt(o),pp(o,b,null,h,c))):_?_!==i.memoizedState?(ps(o),Rt(o),hv(o,_)):(Rt(o),o.flags&=-16777217):(i=i.memoizedProps,i!==h&&ps(o),Rt(o),pp(o,b,i,h,c)),null;case 27:if(je(o),c=P.current,b=o.type,i!==null&&o.stateNode!=null)i.memoizedProps!==h&&ps(o);else{if(!h){if(o.stateNode===null)throw Error(r(166));return Rt(o),null}i=le.current,pa(o)?Gb(o):(i=vx(b,h,c),o.stateNode=i,ps(o))}return Rt(o),null;case 5:if(je(o),b=o.type,i!==null&&o.stateNode!=null)i.memoizedProps!==h&&ps(o);else{if(!h){if(o.stateNode===null)throw Error(r(166));return Rt(o),null}if(_=le.current,pa(o))Gb(o);else{var S=_u(P.current);switch(_){case 1:_=S.createElementNS("http://www.w3.org/2000/svg",b);break;case 2:_=S.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;default:switch(b){case"svg":_=S.createElementNS("http://www.w3.org/2000/svg",b);break;case"math":_=S.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;case"script":_=S.createElement("div"),_.innerHTML="<script><\/script>",_=_.removeChild(_.firstChild);break;case"select":_=typeof h.is=="string"?S.createElement("select",{is:h.is}):S.createElement("select"),h.multiple?_.multiple=!0:h.size&&(_.size=h.size);break;default:_=typeof h.is=="string"?S.createElement(b,{is:h.is}):S.createElement(b)}}_[pn]=o,_[Fn]=h;e:for(S=o.child;S!==null;){if(S.tag===5||S.tag===6)_.appendChild(S.stateNode);else if(S.tag!==4&&S.tag!==27&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===o)break e;for(;S.sibling===null;){if(S.return===null||S.return===o)break e;S=S.return}S.sibling.return=S.return,S=S.sibling}o.stateNode=_;e:switch(bn(_,b,h),b){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}h&&ps(o)}}return Rt(o),pp(o,o.type,i===null?null:i.memoizedProps,o.pendingProps,c),null;case 6:if(i&&o.stateNode!=null)i.memoizedProps!==h&&ps(o);else{if(typeof h!="string"&&o.stateNode===null)throw Error(r(166));if(i=P.current,pa(o)){if(i=o.stateNode,c=o.memoizedProps,h=null,b=mn,b!==null)switch(b.tag){case 27:case 5:h=b.memoizedProps}i[pn]=o,i=!!(i.nodeValue===c||h!==null&&h.suppressHydrationWarning===!0||cx(i.nodeValue,c)),i||Ns(o,!0)}else i=_u(i).createTextNode(h),i[pn]=o,o.stateNode=i}return Rt(o),null;case 31:if(c=o.memoizedState,i===null||i.memoizedState!==null){if(h=pa(o),c!==null){if(i===null){if(!h)throw Error(r(318));if(i=o.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(557));i[pn]=o}else xi(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Rt(o),i=!1}else c=kh(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=c),i=!0;if(!i)return o.flags&256?(or(o),o):(or(o),null);if((o.flags&128)!==0)throw Error(r(558))}return Rt(o),null;case 13:if(h=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(b=pa(o),h!==null&&h.dehydrated!==null){if(i===null){if(!b)throw Error(r(318));if(b=o.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(r(317));b[pn]=o}else xi(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Rt(o),b=!1}else b=kh(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=b),b=!0;if(!b)return o.flags&256?(or(o),o):(or(o),null)}return or(o),(o.flags&128)!==0?(o.lanes=c,o):(c=h!==null,i=i!==null&&i.memoizedState!==null,c&&(h=o.child,b=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(b=h.alternate.memoizedState.cachePool.pool),_=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(_=h.memoizedState.cachePool.pool),_!==b&&(h.flags|=2048)),c!==i&&c&&(o.child.flags|=8192),su(o,o.updateQueue),Rt(o),null);case 4:return ve(),i===null&&Lp(o.stateNode.containerInfo),Rt(o),null;case 10:return us(o.type),Rt(o),null;case 19:if(G(zt),h=o.memoizedState,h===null)return Rt(o),null;if(b=(o.flags&128)!==0,_=h.rendering,_===null)if(b)Go(h,!1);else{if(jt!==0||i!==null&&(i.flags&128)!==0)for(i=o.child;i!==null;){if(_=Hc(i),_!==null){for(o.flags|=128,Go(h,!1),i=_.updateQueue,o.updateQueue=i,su(o,i),o.subtreeFlags=0,i=c,c=o.child;c!==null;)Ub(c,i),c=c.sibling;return O(zt,zt.current&1|2),tt&&ls(o,h.treeForkCount),o.child}i=i.sibling}h.tail!==null&&Re()>cu&&(o.flags|=128,b=!0,Go(h,!1),o.lanes=4194304)}else{if(!b)if(i=Hc(_),i!==null){if(o.flags|=128,b=!0,i=i.updateQueue,o.updateQueue=i,su(o,i),Go(h,!0),h.tail===null&&h.tailMode==="hidden"&&!_.alternate&&!tt)return Rt(o),null}else 2*Re()-h.renderingStartTime>cu&&c!==536870912&&(o.flags|=128,b=!0,Go(h,!1),o.lanes=4194304);h.isBackwards?(_.sibling=o.child,o.child=_):(i=h.last,i!==null?i.sibling=_:o.child=_,h.last=_)}return h.tail!==null?(i=h.tail,h.rendering=i,h.tail=i.sibling,h.renderingStartTime=Re(),i.sibling=null,c=zt.current,O(zt,b?c&1|2:c&1),tt&&ls(o,h.treeForkCount),i):(Rt(o),null);case 22:case 23:return or(o),zh(),h=o.memoizedState!==null,i!==null?i.memoizedState!==null!==h&&(o.flags|=8192):h&&(o.flags|=8192),h?(c&536870912)!==0&&(o.flags&128)===0&&(Rt(o),o.subtreeFlags&6&&(o.flags|=8192)):Rt(o),c=o.updateQueue,c!==null&&su(o,c.retryQueue),c=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),h=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(h=o.memoizedState.cachePool.pool),h!==c&&(o.flags|=2048),i!==null&&G(ki),null;case 24:return c=null,i!==null&&(c=i.memoizedState.cache),o.memoizedState.cache!==c&&(o.flags|=2048),us(Bt),Rt(o),null;case 25:return null;case 30:return null}throw Error(r(156,o.tag))}function oR(i,o){switch(wh(o),o.tag){case 1:return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return us(Bt),ve(),i=o.flags,(i&65536)!==0&&(i&128)===0?(o.flags=i&-65537|128,o):null;case 26:case 27:case 5:return je(o),null;case 31:if(o.memoizedState!==null){if(or(o),o.alternate===null)throw Error(r(340));xi()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 13:if(or(o),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(r(340));xi()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return G(zt),null;case 4:return ve(),null;case 10:return us(o.type),null;case 22:case 23:return or(o),zh(),i!==null&&G(ki),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 24:return us(Bt),null;case 25:return null;default:return null}}function pv(i,o){switch(wh(o),o.tag){case 3:us(Bt),ve();break;case 26:case 27:case 5:je(o);break;case 4:ve();break;case 31:o.memoizedState!==null&&or(o);break;case 13:or(o);break;case 19:G(zt);break;case 10:us(o.type);break;case 22:case 23:or(o),zh(),i!==null&&G(ki);break;case 24:us(Bt)}}function Ko(i,o){try{var c=o.updateQueue,h=c!==null?c.lastEffect:null;if(h!==null){var b=h.next;c=b;do{if((c.tag&i)===i){h=void 0;var _=c.create,S=c.inst;h=_(),S.destroy=h}c=c.next}while(c!==b)}}catch(A){mt(o,o.return,A)}}function Bs(i,o,c){try{var h=o.updateQueue,b=h!==null?h.lastEffect:null;if(b!==null){var _=b.next;h=_;do{if((h.tag&i)===i){var S=h.inst,A=S.destroy;if(A!==void 0){S.destroy=void 0,b=o;var U=c,W=A;try{W()}catch(oe){mt(b,U,oe)}}}h=h.next}while(h!==_)}}catch(oe){mt(o,o.return,oe)}}function mv(i){var o=i.updateQueue;if(o!==null){var c=i.stateNode;try{i_(o,c)}catch(h){mt(i,i.return,h)}}}function gv(i,o,c){c.props=Ri(i.type,i.memoizedProps),c.state=i.memoizedState;try{c.componentWillUnmount()}catch(h){mt(i,o,h)}}function Zo(i,o){try{var c=i.ref;if(c!==null){switch(i.tag){case 26:case 27:case 5:var h=i.stateNode;break;case 30:h=i.stateNode;break;default:h=i.stateNode}typeof c=="function"?i.refCleanup=c(h):c.current=h}}catch(b){mt(i,o,b)}}function Hr(i,o){var c=i.ref,h=i.refCleanup;if(c!==null)if(typeof h=="function")try{h()}catch(b){mt(i,o,b)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(b){mt(i,o,b)}else c.current=null}function yv(i){var o=i.type,c=i.memoizedProps,h=i.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":c.autoFocus&&h.focus();break e;case"img":c.src?h.src=c.src:c.srcSet&&(h.srcset=c.srcSet)}}catch(b){mt(i,i.return,b)}}function mp(i,o,c){try{var h=i.stateNode;RR(h,i.type,c,o),h[Fn]=o}catch(b){mt(i,i.return,b)}}function bv(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Gs(i.type)||i.tag===4}function gp(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||bv(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Gs(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function yp(i,o,c){var h=i.tag;if(h===5||h===6)i=i.stateNode,o?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(i,o):(o=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,o.appendChild(i),c=c._reactRootContainer,c!=null||o.onclick!==null||(o.onclick=is));else if(h!==4&&(h===27&&Gs(i.type)&&(c=i.stateNode,o=null),i=i.child,i!==null))for(yp(i,o,c),i=i.sibling;i!==null;)yp(i,o,c),i=i.sibling}function iu(i,o,c){var h=i.tag;if(h===5||h===6)i=i.stateNode,o?c.insertBefore(i,o):c.appendChild(i);else if(h!==4&&(h===27&&Gs(i.type)&&(c=i.stateNode),i=i.child,i!==null))for(iu(i,o,c),i=i.sibling;i!==null;)iu(i,o,c),i=i.sibling}function _v(i){var o=i.stateNode,c=i.memoizedProps;try{for(var h=i.type,b=o.attributes;b.length;)o.removeAttributeNode(b[0]);bn(o,h,c),o[pn]=i,o[Fn]=c}catch(_){mt(i,i.return,_)}}var ms=!1,qt=!1,bp=!1,vv=typeof WeakSet=="function"?WeakSet:Set,cn=null;function lR(i,o){if(i=i.containerInfo,Bp=Cu,i=Nb(i),fh(i)){if("selectionStart"in i)var c={start:i.selectionStart,end:i.selectionEnd};else e:{c=(c=i.ownerDocument)&&c.defaultView||window;var h=c.getSelection&&c.getSelection();if(h&&h.rangeCount!==0){c=h.anchorNode;var b=h.anchorOffset,_=h.focusNode;h=h.focusOffset;try{c.nodeType,_.nodeType}catch{c=null;break e}var S=0,A=-1,U=-1,W=0,oe=0,fe=i,te=null;t:for(;;){for(var ae;fe!==c||b!==0&&fe.nodeType!==3||(A=S+b),fe!==_||h!==0&&fe.nodeType!==3||(U=S+h),fe.nodeType===3&&(S+=fe.nodeValue.length),(ae=fe.firstChild)!==null;)te=fe,fe=ae;for(;;){if(fe===i)break t;if(te===c&&++W===b&&(A=S),te===_&&++oe===h&&(U=S),(ae=fe.nextSibling)!==null)break;fe=te,te=fe.parentNode}fe=ae}c=A===-1||U===-1?null:{start:A,end:U}}else c=null}c=c||{start:0,end:0}}else c=null;for($p={focusedElem:i,selectionRange:c},Cu=!1,cn=o;cn!==null;)if(o=cn,i=o.child,(o.subtreeFlags&1028)!==0&&i!==null)i.return=o,cn=i;else for(;cn!==null;){switch(o=cn,_=o.alternate,i=o.flags,o.tag){case 0:if((i&4)!==0&&(i=o.updateQueue,i=i!==null?i.events:null,i!==null))for(c=0;c<i.length;c++)b=i[c],b.ref.impl=b.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&_!==null){i=void 0,c=o,b=_.memoizedProps,_=_.memoizedState,h=c.stateNode;try{var ke=Ri(c.type,b);i=h.getSnapshotBeforeUpdate(ke,_),h.__reactInternalSnapshotBeforeUpdate=i}catch(Le){mt(c,c.return,Le)}}break;case 3:if((i&1024)!==0){if(i=o.stateNode.containerInfo,c=i.nodeType,c===9)Fp(i);else if(c===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":Fp(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(r(163))}if(i=o.sibling,i!==null){i.return=o.return,cn=i;break}cn=o.return}}function xv(i,o,c){var h=c.flags;switch(c.tag){case 0:case 11:case 15:ys(i,c),h&4&&Ko(5,c);break;case 1:if(ys(i,c),h&4)if(i=c.stateNode,o===null)try{i.componentDidMount()}catch(S){mt(c,c.return,S)}else{var b=Ri(c.type,o.memoizedProps);o=o.memoizedState;try{i.componentDidUpdate(b,o,i.__reactInternalSnapshotBeforeUpdate)}catch(S){mt(c,c.return,S)}}h&64&&mv(c),h&512&&Zo(c,c.return);break;case 3:if(ys(i,c),h&64&&(i=c.updateQueue,i!==null)){if(o=null,c.child!==null)switch(c.child.tag){case 27:case 5:o=c.child.stateNode;break;case 1:o=c.child.stateNode}try{i_(i,o)}catch(S){mt(c,c.return,S)}}break;case 27:o===null&&h&4&&_v(c);case 26:case 5:ys(i,c),o===null&&h&4&&yv(c),h&512&&Zo(c,c.return);break;case 12:ys(i,c);break;case 31:ys(i,c),h&4&&kv(i,c);break;case 13:ys(i,c),h&4&&Ev(i,c),h&64&&(i=c.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(c=yR.bind(null,c),zR(i,c))));break;case 22:if(h=c.memoizedState!==null||ms,!h){o=o!==null&&o.memoizedState!==null||qt,b=ms;var _=qt;ms=h,(qt=o)&&!_?bs(i,c,(c.subtreeFlags&8772)!==0):ys(i,c),ms=b,qt=_}break;case 30:break;default:ys(i,c)}}function wv(i){var o=i.alternate;o!==null&&(i.alternate=null,wv(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&Zd(o)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var Ot=null,Hn=!1;function gs(i,o,c){for(c=c.child;c!==null;)Sv(i,o,c),c=c.sibling}function Sv(i,o,c){if(ut&&typeof ut.onCommitFiberUnmount=="function")try{ut.onCommitFiberUnmount(st,c)}catch{}switch(c.tag){case 26:qt||Hr(c,o),gs(i,o,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:qt||Hr(c,o);var h=Ot,b=Hn;Gs(c.type)&&(Ot=c.stateNode,Hn=!1),gs(i,o,c),rl(c.stateNode),Ot=h,Hn=b;break;case 5:qt||Hr(c,o);case 6:if(h=Ot,b=Hn,Ot=null,gs(i,o,c),Ot=h,Hn=b,Ot!==null)if(Hn)try{(Ot.nodeType===9?Ot.body:Ot.nodeName==="HTML"?Ot.ownerDocument.body:Ot).removeChild(c.stateNode)}catch(_){mt(c,o,_)}else try{Ot.removeChild(c.stateNode)}catch(_){mt(c,o,_)}break;case 18:Ot!==null&&(Hn?(i=Ot,mx(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,c.stateNode),ja(i)):mx(Ot,c.stateNode));break;case 4:h=Ot,b=Hn,Ot=c.stateNode.containerInfo,Hn=!0,gs(i,o,c),Ot=h,Hn=b;break;case 0:case 11:case 14:case 15:Bs(2,c,o),qt||Bs(4,c,o),gs(i,o,c);break;case 1:qt||(Hr(c,o),h=c.stateNode,typeof h.componentWillUnmount=="function"&&gv(c,o,h)),gs(i,o,c);break;case 21:gs(i,o,c);break;case 22:qt=(h=qt)||c.memoizedState!==null,gs(i,o,c),qt=h;break;default:gs(i,o,c)}}function kv(i,o){if(o.memoizedState===null&&(i=o.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{ja(i)}catch(c){mt(o,o.return,c)}}}function Ev(i,o){if(o.memoizedState===null&&(i=o.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{ja(i)}catch(c){mt(o,o.return,c)}}function cR(i){switch(i.tag){case 31:case 13:case 19:var o=i.stateNode;return o===null&&(o=i.stateNode=new vv),o;case 22:return i=i.stateNode,o=i._retryCache,o===null&&(o=i._retryCache=new vv),o;default:throw Error(r(435,i.tag))}}function au(i,o){var c=cR(i);o.forEach(function(h){if(!c.has(h)){c.add(h);var b=bR.bind(null,i,h);h.then(b,b)}})}function Gn(i,o){var c=o.deletions;if(c!==null)for(var h=0;h<c.length;h++){var b=c[h],_=i,S=o,A=S;e:for(;A!==null;){switch(A.tag){case 27:if(Gs(A.type)){Ot=A.stateNode,Hn=!1;break e}break;case 5:Ot=A.stateNode,Hn=!1;break e;case 3:case 4:Ot=A.stateNode.containerInfo,Hn=!0;break e}A=A.return}if(Ot===null)throw Error(r(160));Sv(_,S,b),Ot=null,Hn=!1,_=b.alternate,_!==null&&(_.return=null),b.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)Cv(o,i),o=o.sibling}var Pr=null;function Cv(i,o){var c=i.alternate,h=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:Gn(o,i),Kn(i),h&4&&(Bs(3,i,i.return),Ko(3,i),Bs(5,i,i.return));break;case 1:Gn(o,i),Kn(i),h&512&&(qt||c===null||Hr(c,c.return)),h&64&&ms&&(i=i.updateQueue,i!==null&&(h=i.callbacks,h!==null&&(c=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=c===null?h:c.concat(h))));break;case 26:var b=Pr;if(Gn(o,i),Kn(i),h&512&&(qt||c===null||Hr(c,c.return)),h&4){var _=c!==null?c.memoizedState:null;if(h=i.memoizedState,c===null)if(h===null)if(i.stateNode===null){e:{h=i.type,c=i.memoizedProps,b=b.ownerDocument||b;t:switch(h){case"title":_=b.getElementsByTagName("title")[0],(!_||_[xo]||_[pn]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=b.createElement(h),b.head.insertBefore(_,b.querySelector("head > title"))),bn(_,h,c),_[pn]=i,ln(_),h=_;break e;case"link":var S=Cx("link","href",b).get(h+(c.href||""));if(S){for(var A=0;A<S.length;A++)if(_=S[A],_.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&_.getAttribute("rel")===(c.rel==null?null:c.rel)&&_.getAttribute("title")===(c.title==null?null:c.title)&&_.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){S.splice(A,1);break t}}_=b.createElement(h),bn(_,h,c),b.head.appendChild(_);break;case"meta":if(S=Cx("meta","content",b).get(h+(c.content||""))){for(A=0;A<S.length;A++)if(_=S[A],_.getAttribute("content")===(c.content==null?null:""+c.content)&&_.getAttribute("name")===(c.name==null?null:c.name)&&_.getAttribute("property")===(c.property==null?null:c.property)&&_.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&_.getAttribute("charset")===(c.charSet==null?null:c.charSet)){S.splice(A,1);break t}}_=b.createElement(h),bn(_,h,c),b.head.appendChild(_);break;default:throw Error(r(468,h))}_[pn]=i,ln(_),h=_}i.stateNode=h}else Tx(b,i.type,i.stateNode);else i.stateNode=Ex(b,h,i.memoizedProps);else _!==h?(_===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):_.count--,h===null?Tx(b,i.type,i.stateNode):Ex(b,h,i.memoizedProps)):h===null&&i.stateNode!==null&&mp(i,i.memoizedProps,c.memoizedProps)}break;case 27:Gn(o,i),Kn(i),h&512&&(qt||c===null||Hr(c,c.return)),c!==null&&h&4&&mp(i,i.memoizedProps,c.memoizedProps);break;case 5:if(Gn(o,i),Kn(i),h&512&&(qt||c===null||Hr(c,c.return)),i.flags&32){b=i.stateNode;try{sa(b,"")}catch(ke){mt(i,i.return,ke)}}h&4&&i.stateNode!=null&&(b=i.memoizedProps,mp(i,b,c!==null?c.memoizedProps:b)),h&1024&&(bp=!0);break;case 6:if(Gn(o,i),Kn(i),h&4){if(i.stateNode===null)throw Error(r(162));h=i.memoizedProps,c=i.stateNode;try{c.nodeValue=h}catch(ke){mt(i,i.return,ke)}}break;case 3:if(wu=null,b=Pr,Pr=vu(o.containerInfo),Gn(o,i),Pr=b,Kn(i),h&4&&c!==null&&c.memoizedState.isDehydrated)try{ja(o.containerInfo)}catch(ke){mt(i,i.return,ke)}bp&&(bp=!1,Tv(i));break;case 4:h=Pr,Pr=vu(i.stateNode.containerInfo),Gn(o,i),Kn(i),Pr=h;break;case 12:Gn(o,i),Kn(i);break;case 31:Gn(o,i),Kn(i),h&4&&(h=i.updateQueue,h!==null&&(i.updateQueue=null,au(i,h)));break;case 13:Gn(o,i),Kn(i),i.child.flags&8192&&i.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(lu=Re()),h&4&&(h=i.updateQueue,h!==null&&(i.updateQueue=null,au(i,h)));break;case 22:b=i.memoizedState!==null;var U=c!==null&&c.memoizedState!==null,W=ms,oe=qt;if(ms=W||b,qt=oe||U,Gn(o,i),qt=oe,ms=W,Kn(i),h&8192)e:for(o=i.stateNode,o._visibility=b?o._visibility&-2:o._visibility|1,b&&(c===null||U||ms||qt||Oi(i)),c=null,o=i;;){if(o.tag===5||o.tag===26){if(c===null){U=c=o;try{if(_=U.stateNode,b)S=_.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none";else{A=U.stateNode;var fe=U.memoizedProps.style,te=fe!=null&&fe.hasOwnProperty("display")?fe.display:null;A.style.display=te==null||typeof te=="boolean"?"":(""+te).trim()}}catch(ke){mt(U,U.return,ke)}}}else if(o.tag===6){if(c===null){U=o;try{U.stateNode.nodeValue=b?"":U.memoizedProps}catch(ke){mt(U,U.return,ke)}}}else if(o.tag===18){if(c===null){U=o;try{var ae=U.stateNode;b?gx(ae,!0):gx(U.stateNode,!1)}catch(ke){mt(U,U.return,ke)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===i)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break e;for(;o.sibling===null;){if(o.return===null||o.return===i)break e;c===o&&(c=null),o=o.return}c===o&&(c=null),o.sibling.return=o.return,o=o.sibling}h&4&&(h=i.updateQueue,h!==null&&(c=h.retryQueue,c!==null&&(h.retryQueue=null,au(i,c))));break;case 19:Gn(o,i),Kn(i),h&4&&(h=i.updateQueue,h!==null&&(i.updateQueue=null,au(i,h)));break;case 30:break;case 21:break;default:Gn(o,i),Kn(i)}}function Kn(i){var o=i.flags;if(o&2){try{for(var c,h=i.return;h!==null;){if(bv(h)){c=h;break}h=h.return}if(c==null)throw Error(r(160));switch(c.tag){case 27:var b=c.stateNode,_=gp(i);iu(i,_,b);break;case 5:var S=c.stateNode;c.flags&32&&(sa(S,""),c.flags&=-33);var A=gp(i);iu(i,A,S);break;case 3:case 4:var U=c.stateNode.containerInfo,W=gp(i);yp(i,W,U);break;default:throw Error(r(161))}}catch(oe){mt(i,i.return,oe)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function Tv(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var o=i;Tv(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),i=i.sibling}}function ys(i,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)xv(i,o.alternate,o),o=o.sibling}function Oi(i){for(i=i.child;i!==null;){var o=i;switch(o.tag){case 0:case 11:case 14:case 15:Bs(4,o,o.return),Oi(o);break;case 1:Hr(o,o.return);var c=o.stateNode;typeof c.componentWillUnmount=="function"&&gv(o,o.return,c),Oi(o);break;case 27:rl(o.stateNode);case 26:case 5:Hr(o,o.return),Oi(o);break;case 22:o.memoizedState===null&&Oi(o);break;case 30:Oi(o);break;default:Oi(o)}i=i.sibling}}function bs(i,o,c){for(c=c&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var h=o.alternate,b=i,_=o,S=_.flags;switch(_.tag){case 0:case 11:case 15:bs(b,_,c),Ko(4,_);break;case 1:if(bs(b,_,c),h=_,b=h.stateNode,typeof b.componentDidMount=="function")try{b.componentDidMount()}catch(W){mt(h,h.return,W)}if(h=_,b=h.updateQueue,b!==null){var A=h.stateNode;try{var U=b.shared.hiddenCallbacks;if(U!==null)for(b.shared.hiddenCallbacks=null,b=0;b<U.length;b++)s_(U[b],A)}catch(W){mt(h,h.return,W)}}c&&S&64&&mv(_),Zo(_,_.return);break;case 27:_v(_);case 26:case 5:bs(b,_,c),c&&h===null&&S&4&&yv(_),Zo(_,_.return);break;case 12:bs(b,_,c);break;case 31:bs(b,_,c),c&&S&4&&kv(b,_);break;case 13:bs(b,_,c),c&&S&4&&Ev(b,_);break;case 22:_.memoizedState===null&&bs(b,_,c),Zo(_,_.return);break;case 30:break;default:bs(b,_,c)}o=o.sibling}}function _p(i,o){var c=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),i=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(i=o.memoizedState.cachePool.pool),i!==c&&(i!=null&&i.refCount++,c!=null&&Do(c))}function vp(i,o){i=null,o.alternate!==null&&(i=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==i&&(o.refCount++,i!=null&&Do(i))}function Br(i,o,c,h){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)Av(i,o,c,h),o=o.sibling}function Av(i,o,c,h){var b=o.flags;switch(o.tag){case 0:case 11:case 15:Br(i,o,c,h),b&2048&&Ko(9,o);break;case 1:Br(i,o,c,h);break;case 3:Br(i,o,c,h),b&2048&&(i=null,o.alternate!==null&&(i=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==i&&(o.refCount++,i!=null&&Do(i)));break;case 12:if(b&2048){Br(i,o,c,h),i=o.stateNode;try{var _=o.memoizedProps,S=_.id,A=_.onPostCommit;typeof A=="function"&&A(S,o.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(U){mt(o,o.return,U)}}else Br(i,o,c,h);break;case 31:Br(i,o,c,h);break;case 13:Br(i,o,c,h);break;case 23:break;case 22:_=o.stateNode,S=o.alternate,o.memoizedState!==null?_._visibility&2?Br(i,o,c,h):Jo(i,o):_._visibility&2?Br(i,o,c,h):(_._visibility|=2,ka(i,o,c,h,(o.subtreeFlags&10256)!==0||!1)),b&2048&&_p(S,o);break;case 24:Br(i,o,c,h),b&2048&&vp(o.alternate,o);break;default:Br(i,o,c,h)}}function ka(i,o,c,h,b){for(b=b&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var _=i,S=o,A=c,U=h,W=S.flags;switch(S.tag){case 0:case 11:case 15:ka(_,S,A,U,b),Ko(8,S);break;case 23:break;case 22:var oe=S.stateNode;S.memoizedState!==null?oe._visibility&2?ka(_,S,A,U,b):Jo(_,S):(oe._visibility|=2,ka(_,S,A,U,b)),b&&W&2048&&_p(S.alternate,S);break;case 24:ka(_,S,A,U,b),b&&W&2048&&vp(S.alternate,S);break;default:ka(_,S,A,U,b)}o=o.sibling}}function Jo(i,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var c=i,h=o,b=h.flags;switch(h.tag){case 22:Jo(c,h),b&2048&&_p(h.alternate,h);break;case 24:Jo(c,h),b&2048&&vp(h.alternate,h);break;default:Jo(c,h)}o=o.sibling}}var Qo=8192;function Ea(i,o,c){if(i.subtreeFlags&Qo)for(i=i.child;i!==null;)Rv(i,o,c),i=i.sibling}function Rv(i,o,c){switch(i.tag){case 26:Ea(i,o,c),i.flags&Qo&&i.memoizedState!==null&&JR(c,Pr,i.memoizedState,i.memoizedProps);break;case 5:Ea(i,o,c);break;case 3:case 4:var h=Pr;Pr=vu(i.stateNode.containerInfo),Ea(i,o,c),Pr=h;break;case 22:i.memoizedState===null&&(h=i.alternate,h!==null&&h.memoizedState!==null?(h=Qo,Qo=16777216,Ea(i,o,c),Qo=h):Ea(i,o,c));break;default:Ea(i,o,c)}}function Ov(i){var o=i.alternate;if(o!==null&&(i=o.child,i!==null)){o.child=null;do o=i.sibling,i.sibling=null,i=o;while(i!==null)}}function Yo(i){var o=i.deletions;if((i.flags&16)!==0){if(o!==null)for(var c=0;c<o.length;c++){var h=o[c];cn=h,Nv(h,i)}Ov(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Iv(i),i=i.sibling}function Iv(i){switch(i.tag){case 0:case 11:case 15:Yo(i),i.flags&2048&&Bs(9,i,i.return);break;case 3:Yo(i);break;case 12:Yo(i);break;case 22:var o=i.stateNode;i.memoizedState!==null&&o._visibility&2&&(i.return===null||i.return.tag!==13)?(o._visibility&=-3,ou(i)):Yo(i);break;default:Yo(i)}}function ou(i){var o=i.deletions;if((i.flags&16)!==0){if(o!==null)for(var c=0;c<o.length;c++){var h=o[c];cn=h,Nv(h,i)}Ov(i)}for(i=i.child;i!==null;){switch(o=i,o.tag){case 0:case 11:case 15:Bs(8,o,o.return),ou(o);break;case 22:c=o.stateNode,c._visibility&2&&(c._visibility&=-3,ou(o));break;default:ou(o)}i=i.sibling}}function Nv(i,o){for(;cn!==null;){var c=cn;switch(c.tag){case 0:case 11:case 15:Bs(8,c,o);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var h=c.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:Do(c.memoizedState.cache)}if(h=c.child,h!==null)h.return=c,cn=h;else e:for(c=i;cn!==null;){h=cn;var b=h.sibling,_=h.return;if(wv(h),h===c){cn=null;break e}if(b!==null){b.return=_,cn=b;break e}cn=_}}}var uR={getCacheForType:function(i){var o=gn(Bt),c=o.data.get(i);return c===void 0&&(c=i(),o.data.set(i,c)),c},cacheSignal:function(){return gn(Bt).controller.signal}},fR=typeof WeakMap=="function"?WeakMap:Map,ct=0,xt=null,Ge=null,Ye=0,pt=0,lr=null,$s=!1,Ca=!1,xp=!1,_s=0,jt=0,Us=0,Ii=0,wp=0,cr=0,Ta=0,Wo=null,Zn=null,Sp=!1,lu=0,Mv=0,cu=1/0,uu=null,qs=null,Jt=0,Fs=null,Aa=null,vs=0,kp=0,Ep=null,Dv=null,Xo=0,Cp=null;function ur(){return(ct&2)!==0&&Ye!==0?Ye&-Ye:B.T!==null?Np():Q0()}function jv(){if(cr===0)if((Ye&536870912)===0||tt){var i=it;it<<=1,(it&3932160)===0&&(it=262144),cr=i}else cr=536870912;return i=ar.current,i!==null&&(i.flags|=32),cr}function Jn(i,o,c){(i===xt&&(pt===2||pt===9)||i.cancelPendingCommit!==null)&&(Ra(i,0),Vs(i,Ye,cr,!1)),qn(i,c),((ct&2)===0||i!==xt)&&(i===xt&&((ct&2)===0&&(Ii|=c),jt===4&&Vs(i,Ye,cr,!1)),Gr(i))}function Lv(i,o,c){if((ct&6)!==0)throw Error(r(327));var h=!c&&(o&127)===0&&(o&i.expiredLanes)===0||Tt(i,o),b=h?pR(i,o):Ap(i,o,!0),_=h;do{if(b===0){Ca&&!h&&Vs(i,o,0,!1);break}else{if(c=i.current.alternate,_&&!dR(c)){b=Ap(i,o,!1),_=!1;continue}if(b===2){if(_=o,i.errorRecoveryDisabledLanes&_)var S=0;else S=i.pendingLanes&-536870913,S=S!==0?S:S&536870912?536870912:0;if(S!==0){o=S;e:{var A=i;b=Wo;var U=A.current.memoizedState.isDehydrated;if(U&&(Ra(A,S).flags|=256),S=Ap(A,S,!1),S!==2){if(xp&&!U){A.errorRecoveryDisabledLanes|=_,Ii|=_,b=4;break e}_=Zn,Zn=b,_!==null&&(Zn===null?Zn=_:Zn.push.apply(Zn,_))}b=S}if(_=!1,b!==2)continue}}if(b===1){Ra(i,0),Vs(i,o,0,!0);break}e:{switch(h=i,_=b,_){case 0:case 1:throw Error(r(345));case 4:if((o&4194048)!==o)break;case 6:Vs(h,o,cr,!$s);break e;case 2:Zn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((o&62914560)===o&&(b=lu+300-Re(),10<b)){if(Vs(h,o,cr,!$s),Nn(h,0,!0)!==0)break e;vs=o,h.timeoutHandle=hx(zv.bind(null,h,c,Zn,uu,Sp,o,cr,Ii,Ta,$s,_,"Throttled",-0,0),b);break e}zv(h,c,Zn,uu,Sp,o,cr,Ii,Ta,$s,_,null,-0,0)}}break}while(!0);Gr(i)}function zv(i,o,c,h,b,_,S,A,U,W,oe,fe,te,ae){if(i.timeoutHandle=-1,fe=o.subtreeFlags,fe&8192||(fe&16785408)===16785408){fe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:is},Rv(o,_,fe);var ke=(_&62914560)===_?lu-Re():(_&4194048)===_?Mv-Re():0;if(ke=QR(fe,ke),ke!==null){vs=_,i.cancelPendingCommit=ke(Hv.bind(null,i,o,_,c,h,b,S,A,U,oe,fe,null,te,ae)),Vs(i,_,S,!W);return}}Hv(i,o,_,c,h,b,S,A,U)}function dR(i){for(var o=i;;){var c=o.tag;if((c===0||c===11||c===15)&&o.flags&16384&&(c=o.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var h=0;h<c.length;h++){var b=c[h],_=b.getSnapshot;b=b.value;try{if(!sr(_(),b))return!1}catch{return!1}}if(c=o.child,o.subtreeFlags&16384&&c!==null)c.return=o,o=c;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Vs(i,o,c,h){o&=~wp,o&=~Ii,i.suspendedLanes|=o,i.pingedLanes&=~o,h&&(i.warmLanes|=o),h=i.expirationTimes;for(var b=o;0<b;){var _=31-Me(b),S=1<<_;h[_]=-1,b&=~S}c!==0&&vo(i,c,o)}function fu(){return(ct&6)===0?(el(0),!1):!0}function Tp(){if(Ge!==null){if(pt===0)var i=Ge.return;else i=Ge,cs=wi=null,Fh(i),_a=null,Lo=0,i=Ge;for(;i!==null;)pv(i.alternate,i),i=i.return;Ge=null}}function Ra(i,o){var c=i.timeoutHandle;c!==-1&&(i.timeoutHandle=-1,NR(c)),c=i.cancelPendingCommit,c!==null&&(i.cancelPendingCommit=null,c()),vs=0,Tp(),xt=i,Ge=c=os(i.current,null),Ye=o,pt=0,lr=null,$s=!1,Ca=Tt(i,o),xp=!1,Ta=cr=wp=Ii=Us=jt=0,Zn=Wo=null,Sp=!1,(o&8)!==0&&(o|=o&32);var h=i.entangledLanes;if(h!==0)for(i=i.entanglements,h&=o;0<h;){var b=31-Me(h),_=1<<b;o|=i[b],h&=~_}return _s=o,Nc(),c}function Pv(i,o){Ue=null,B.H=Vo,o===ba||o===$c?(o=e_(),pt=3):o===Ih?(o=e_(),pt=4):pt=o===ip?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,lr=o,Ge===null&&(jt=1,eu(i,wr(o,i.current)))}function Bv(){var i=ar.current;return i===null?!0:(Ye&4194048)===Ye?Cr===null:(Ye&62914560)===Ye||(Ye&536870912)!==0?i===Cr:!1}function $v(){var i=B.H;return B.H=Vo,i===null?Vo:i}function Uv(){var i=B.A;return B.A=uR,i}function du(){jt=4,$s||(Ye&4194048)!==Ye&&ar.current!==null||(Ca=!0),(Us&134217727)===0&&(Ii&134217727)===0||xt===null||Vs(xt,Ye,cr,!1)}function Ap(i,o,c){var h=ct;ct|=2;var b=$v(),_=Uv();(xt!==i||Ye!==o)&&(uu=null,Ra(i,o)),o=!1;var S=jt;e:do try{if(pt!==0&&Ge!==null){var A=Ge,U=lr;switch(pt){case 8:Tp(),S=6;break e;case 3:case 2:case 9:case 6:ar.current===null&&(o=!0);var W=pt;if(pt=0,lr=null,Oa(i,A,U,W),c&&Ca){S=0;break e}break;default:W=pt,pt=0,lr=null,Oa(i,A,U,W)}}hR(),S=jt;break}catch(oe){Pv(i,oe)}while(!0);return o&&i.shellSuspendCounter++,cs=wi=null,ct=h,B.H=b,B.A=_,Ge===null&&(xt=null,Ye=0,Nc()),S}function hR(){for(;Ge!==null;)qv(Ge)}function pR(i,o){var c=ct;ct|=2;var h=$v(),b=Uv();xt!==i||Ye!==o?(uu=null,cu=Re()+500,Ra(i,o)):Ca=Tt(i,o);e:do try{if(pt!==0&&Ge!==null){o=Ge;var _=lr;t:switch(pt){case 1:pt=0,lr=null,Oa(i,o,_,1);break;case 2:case 9:if(Wb(_)){pt=0,lr=null,Fv(o);break}o=function(){pt!==2&&pt!==9||xt!==i||(pt=7),Gr(i)},_.then(o,o);break e;case 3:pt=7;break e;case 4:pt=5;break e;case 7:Wb(_)?(pt=0,lr=null,Fv(o)):(pt=0,lr=null,Oa(i,o,_,7));break;case 5:var S=null;switch(Ge.tag){case 26:S=Ge.memoizedState;case 5:case 27:var A=Ge;if(S?Ax(S):A.stateNode.complete){pt=0,lr=null;var U=A.sibling;if(U!==null)Ge=U;else{var W=A.return;W!==null?(Ge=W,hu(W)):Ge=null}break t}}pt=0,lr=null,Oa(i,o,_,5);break;case 6:pt=0,lr=null,Oa(i,o,_,6);break;case 8:Tp(),jt=6;break e;default:throw Error(r(462))}}mR();break}catch(oe){Pv(i,oe)}while(!0);return cs=wi=null,B.H=h,B.A=b,ct=c,Ge!==null?0:(xt=null,Ye=0,Nc(),jt)}function mR(){for(;Ge!==null&&!Qe();)qv(Ge)}function qv(i){var o=dv(i.alternate,i,_s);i.memoizedProps=i.pendingProps,o===null?hu(i):Ge=o}function Fv(i){var o=i,c=o.alternate;switch(o.tag){case 15:case 0:o=av(c,o,o.pendingProps,o.type,void 0,Ye);break;case 11:o=av(c,o,o.pendingProps,o.type.render,o.ref,Ye);break;case 5:Fh(o);default:pv(c,o),o=Ge=Ub(o,_s),o=dv(c,o,_s)}i.memoizedProps=i.pendingProps,o===null?hu(i):Ge=o}function Oa(i,o,c,h){cs=wi=null,Fh(o),_a=null,Lo=0;var b=o.return;try{if(rR(i,b,o,c,Ye)){jt=1,eu(i,wr(c,i.current)),Ge=null;return}}catch(_){if(b!==null)throw Ge=b,_;jt=1,eu(i,wr(c,i.current)),Ge=null;return}o.flags&32768?(tt||h===1?i=!0:Ca||(Ye&536870912)!==0?i=!1:($s=i=!0,(h===2||h===9||h===3||h===6)&&(h=ar.current,h!==null&&h.tag===13&&(h.flags|=16384))),Vv(o,i)):hu(o)}function hu(i){var o=i;do{if((o.flags&32768)!==0){Vv(o,$s);return}i=o.return;var c=aR(o.alternate,o,_s);if(c!==null){Ge=c;return}if(o=o.sibling,o!==null){Ge=o;return}Ge=o=i}while(o!==null);jt===0&&(jt=5)}function Vv(i,o){do{var c=oR(i.alternate,i);if(c!==null){c.flags&=32767,Ge=c;return}if(c=i.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!o&&(i=i.sibling,i!==null)){Ge=i;return}Ge=i=c}while(i!==null);jt=6,Ge=null}function Hv(i,o,c,h,b,_,S,A,U){i.cancelPendingCommit=null;do pu();while(Jt!==0);if((ct&6)!==0)throw Error(r(327));if(o!==null){if(o===i.current)throw Error(r(177));if(_=o.lanes|o.childLanes,_|=gh,_o(i,c,_,S,A,U),i===xt&&(Ge=xt=null,Ye=0),Aa=o,Fs=i,vs=c,kp=_,Ep=b,Dv=h,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,_R(he,function(){return Qv(),null})):(i.callbackNode=null,i.callbackPriority=0),h=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||h){h=B.T,B.T=null,b=K.p,K.p=2,S=ct,ct|=4;try{lR(i,o,c)}finally{ct=S,K.p=b,B.T=h}}Jt=1,Gv(),Kv(),Zv()}}function Gv(){if(Jt===1){Jt=0;var i=Fs,o=Aa,c=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||c){c=B.T,B.T=null;var h=K.p;K.p=2;var b=ct;ct|=4;try{Cv(o,i);var _=$p,S=Nb(i.containerInfo),A=_.focusedElem,U=_.selectionRange;if(S!==A&&A&&A.ownerDocument&&Ib(A.ownerDocument.documentElement,A)){if(U!==null&&fh(A)){var W=U.start,oe=U.end;if(oe===void 0&&(oe=W),"selectionStart"in A)A.selectionStart=W,A.selectionEnd=Math.min(oe,A.value.length);else{var fe=A.ownerDocument||document,te=fe&&fe.defaultView||window;if(te.getSelection){var ae=te.getSelection(),ke=A.textContent.length,Le=Math.min(U.start,ke),vt=U.end===void 0?Le:Math.min(U.end,ke);!ae.extend&&Le>vt&&(S=vt,vt=Le,Le=S);var J=Ob(A,Le),V=Ob(A,vt);if(J&&V&&(ae.rangeCount!==1||ae.anchorNode!==J.node||ae.anchorOffset!==J.offset||ae.focusNode!==V.node||ae.focusOffset!==V.offset)){var Y=fe.createRange();Y.setStart(J.node,J.offset),ae.removeAllRanges(),Le>vt?(ae.addRange(Y),ae.extend(V.node,V.offset)):(Y.setEnd(V.node,V.offset),ae.addRange(Y))}}}}for(fe=[],ae=A;ae=ae.parentNode;)ae.nodeType===1&&fe.push({element:ae,left:ae.scrollLeft,top:ae.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<fe.length;A++){var ce=fe[A];ce.element.scrollLeft=ce.left,ce.element.scrollTop=ce.top}}Cu=!!Bp,$p=Bp=null}finally{ct=b,K.p=h,B.T=c}}i.current=o,Jt=2}}function Kv(){if(Jt===2){Jt=0;var i=Fs,o=Aa,c=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||c){c=B.T,B.T=null;var h=K.p;K.p=2;var b=ct;ct|=4;try{xv(i,o.alternate,o)}finally{ct=b,K.p=h,B.T=c}}Jt=3}}function Zv(){if(Jt===4||Jt===3){Jt=0,et();var i=Fs,o=Aa,c=vs,h=Dv;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?Jt=5:(Jt=0,Aa=Fs=null,Jv(i,i.pendingLanes));var b=i.pendingLanes;if(b===0&&(qs=null),Gd(c),o=o.stateNode,ut&&typeof ut.onCommitFiberRoot=="function")try{ut.onCommitFiberRoot(st,o,void 0,(o.current.flags&128)===128)}catch{}if(h!==null){o=B.T,b=K.p,K.p=2,B.T=null;try{for(var _=i.onRecoverableError,S=0;S<h.length;S++){var A=h[S];_(A.value,{componentStack:A.stack})}}finally{B.T=o,K.p=b}}(vs&3)!==0&&pu(),Gr(i),b=i.pendingLanes,(c&261930)!==0&&(b&42)!==0?i===Cp?Xo++:(Xo=0,Cp=i):Xo=0,el(0)}}function Jv(i,o){(i.pooledCacheLanes&=o)===0&&(o=i.pooledCache,o!=null&&(i.pooledCache=null,Do(o)))}function pu(){return Gv(),Kv(),Zv(),Qv()}function Qv(){if(Jt!==5)return!1;var i=Fs,o=kp;kp=0;var c=Gd(vs),h=B.T,b=K.p;try{K.p=32>c?32:c,B.T=null,c=Ep,Ep=null;var _=Fs,S=vs;if(Jt=0,Aa=Fs=null,vs=0,(ct&6)!==0)throw Error(r(331));var A=ct;if(ct|=4,Iv(_.current),Av(_,_.current,S,c),ct=A,el(0,!1),ut&&typeof ut.onPostCommitFiberRoot=="function")try{ut.onPostCommitFiberRoot(st,_)}catch{}return!0}finally{K.p=b,B.T=h,Jv(i,o)}}function Yv(i,o,c){o=wr(c,o),o=sp(i.stateNode,o,2),i=Ls(i,o,2),i!==null&&(qn(i,2),Gr(i))}function mt(i,o,c){if(i.tag===3)Yv(i,i,c);else for(;o!==null;){if(o.tag===3){Yv(o,i,c);break}else if(o.tag===1){var h=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(qs===null||!qs.has(h))){i=wr(c,i),c=W_(2),h=Ls(o,c,2),h!==null&&(X_(c,h,o,i),qn(h,2),Gr(h));break}}o=o.return}}function Rp(i,o,c){var h=i.pingCache;if(h===null){h=i.pingCache=new fR;var b=new Set;h.set(o,b)}else b=h.get(o),b===void 0&&(b=new Set,h.set(o,b));b.has(c)||(xp=!0,b.add(c),i=gR.bind(null,i,o,c),o.then(i,i))}function gR(i,o,c){var h=i.pingCache;h!==null&&h.delete(o),i.pingedLanes|=i.suspendedLanes&c,i.warmLanes&=~c,xt===i&&(Ye&c)===c&&(jt===4||jt===3&&(Ye&62914560)===Ye&&300>Re()-lu?(ct&2)===0&&Ra(i,0):wp|=c,Ta===Ye&&(Ta=0)),Gr(i)}function Wv(i,o){o===0&&(o=hi()),i=_i(i,o),i!==null&&(qn(i,o),Gr(i))}function yR(i){var o=i.memoizedState,c=0;o!==null&&(c=o.retryLane),Wv(i,c)}function bR(i,o){var c=0;switch(i.tag){case 31:case 13:var h=i.stateNode,b=i.memoizedState;b!==null&&(c=b.retryLane);break;case 19:h=i.stateNode;break;case 22:h=i.stateNode._retryCache;break;default:throw Error(r(314))}h!==null&&h.delete(o),Wv(i,c)}function _R(i,o){return on(i,o)}var mu=null,Ia=null,Op=!1,gu=!1,Ip=!1,Hs=0;function Gr(i){i!==Ia&&i.next===null&&(Ia===null?mu=Ia=i:Ia=Ia.next=i),gu=!0,Op||(Op=!0,xR())}function el(i,o){if(!Ip&&gu){Ip=!0;do for(var c=!1,h=mu;h!==null;){if(i!==0){var b=h.pendingLanes;if(b===0)var _=0;else{var S=h.suspendedLanes,A=h.pingedLanes;_=(1<<31-Me(42|i)+1)-1,_&=b&~(S&~A),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(c=!0,nx(h,_))}else _=Ye,_=Nn(h,h===xt?_:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(_&3)===0||Tt(h,_)||(c=!0,nx(h,_));h=h.next}while(c);Ip=!1}}function vR(){Xv()}function Xv(){gu=Op=!1;var i=0;Hs!==0&&IR()&&(i=Hs);for(var o=Re(),c=null,h=mu;h!==null;){var b=h.next,_=ex(h,o);_===0?(h.next=null,c===null?mu=b:c.next=b,b===null&&(Ia=c)):(c=h,(i!==0||(_&3)!==0)&&(gu=!0)),h=b}Jt!==0&&Jt!==5||el(i),Hs!==0&&(Hs=0)}function ex(i,o){for(var c=i.suspendedLanes,h=i.pingedLanes,b=i.expirationTimes,_=i.pendingLanes&-62914561;0<_;){var S=31-Me(_),A=1<<S,U=b[S];U===-1?((A&c)===0||(A&h)!==0)&&(b[S]=Un(A,o)):U<=o&&(i.expiredLanes|=A),_&=~A}if(o=xt,c=Ye,c=Nn(i,i===o?c:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),h=i.callbackNode,c===0||i===o&&(pt===2||pt===9)||i.cancelPendingCommit!==null)return h!==null&&h!==null&&we(h),i.callbackNode=null,i.callbackPriority=0;if((c&3)===0||Tt(i,c)){if(o=c&-c,o===i.callbackPriority)return o;switch(h!==null&&we(h),Gd(c)){case 2:case 8:c=me;break;case 32:c=he;break;case 268435456:c=ue;break;default:c=he}return h=tx.bind(null,i),c=on(c,h),i.callbackPriority=o,i.callbackNode=c,o}return h!==null&&h!==null&&we(h),i.callbackPriority=2,i.callbackNode=null,2}function tx(i,o){if(Jt!==0&&Jt!==5)return i.callbackNode=null,i.callbackPriority=0,null;var c=i.callbackNode;if(pu()&&i.callbackNode!==c)return null;var h=Ye;return h=Nn(i,i===xt?h:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),h===0?null:(Lv(i,h,o),ex(i,Re()),i.callbackNode!=null&&i.callbackNode===c?tx.bind(null,i):null)}function nx(i,o){if(pu())return null;Lv(i,o,!0)}function xR(){MR(function(){(ct&6)!==0?on(se,vR):Xv()})}function Np(){if(Hs===0){var i=ga;i===0&&(i=ht,ht<<=1,(ht&261888)===0&&(ht=256)),Hs=i}return Hs}function rx(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:kc(""+i)}function sx(i,o){var c=o.ownerDocument.createElement("input");return c.name=o.name,c.value=o.value,i.id&&c.setAttribute("form",i.id),o.parentNode.insertBefore(c,o),i=new FormData(i),c.parentNode.removeChild(c),i}function wR(i,o,c,h,b){if(o==="submit"&&c&&c.stateNode===b){var _=rx((b[Fn]||null).action),S=h.submitter;S&&(o=(o=S[Fn]||null)?rx(o.formAction):S.getAttribute("formAction"),o!==null&&(_=o,S=null));var A=new Ac("action","action",null,h,b);i.push({event:A,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(Hs!==0){var U=S?sx(b,S):new FormData(b);Wh(c,{pending:!0,data:U,method:b.method,action:_},null,U)}}else typeof _=="function"&&(A.preventDefault(),U=S?sx(b,S):new FormData(b),Wh(c,{pending:!0,data:U,method:b.method,action:_},_,U))},currentTarget:b}]})}}for(var Mp=0;Mp<mh.length;Mp++){var Dp=mh[Mp],SR=Dp.toLowerCase(),kR=Dp[0].toUpperCase()+Dp.slice(1);zr(SR,"on"+kR)}zr(jb,"onAnimationEnd"),zr(Lb,"onAnimationIteration"),zr(zb,"onAnimationStart"),zr("dblclick","onDoubleClick"),zr("focusin","onFocus"),zr("focusout","onBlur"),zr($2,"onTransitionRun"),zr(U2,"onTransitionStart"),zr(q2,"onTransitionCancel"),zr(Pb,"onTransitionEnd"),na("onMouseEnter",["mouseout","mouseover"]),na("onMouseLeave",["mouseout","mouseover"]),na("onPointerEnter",["pointerout","pointerover"]),na("onPointerLeave",["pointerout","pointerover"]),mi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),mi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),mi("onBeforeInput",["compositionend","keypress","textInput","paste"]),mi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),mi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),mi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var tl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ER=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(tl));function ix(i,o){o=(o&4)!==0;for(var c=0;c<i.length;c++){var h=i[c],b=h.event;h=h.listeners;e:{var _=void 0;if(o)for(var S=h.length-1;0<=S;S--){var A=h[S],U=A.instance,W=A.currentTarget;if(A=A.listener,U!==_&&b.isPropagationStopped())break e;_=A,b.currentTarget=W;try{_(b)}catch(oe){Ic(oe)}b.currentTarget=null,_=U}else for(S=0;S<h.length;S++){if(A=h[S],U=A.instance,W=A.currentTarget,A=A.listener,U!==_&&b.isPropagationStopped())break e;_=A,b.currentTarget=W;try{_(b)}catch(oe){Ic(oe)}b.currentTarget=null,_=U}}}}function Ke(i,o){var c=o[Kd];c===void 0&&(c=o[Kd]=new Set);var h=i+"__bubble";c.has(h)||(ax(o,i,2,!1),c.add(h))}function jp(i,o,c){var h=0;o&&(h|=4),ax(c,i,h,o)}var yu="_reactListening"+Math.random().toString(36).slice(2);function Lp(i){if(!i[yu]){i[yu]=!0,X0.forEach(function(c){c!=="selectionchange"&&(ER.has(c)||jp(c,!1,i),jp(c,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[yu]||(o[yu]=!0,jp("selectionchange",!1,o))}}function ax(i,o,c,h){switch(jx(o)){case 2:var b=XR;break;case 8:b=eO;break;default:b=Yp}c=b.bind(null,o,c,i),b=void 0,!nh||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(b=!0),h?b!==void 0?i.addEventListener(o,c,{capture:!0,passive:b}):i.addEventListener(o,c,!0):b!==void 0?i.addEventListener(o,c,{passive:b}):i.addEventListener(o,c,!1)}function zp(i,o,c,h,b){var _=h;if((o&1)===0&&(o&2)===0&&h!==null)e:for(;;){if(h===null)return;var S=h.tag;if(S===3||S===4){var A=h.stateNode.containerInfo;if(A===b)break;if(S===4)for(S=h.return;S!==null;){var U=S.tag;if((U===3||U===4)&&S.stateNode.containerInfo===b)return;S=S.return}for(;A!==null;){if(S=Xi(A),S===null)return;if(U=S.tag,U===5||U===6||U===26||U===27){h=_=S;continue e}A=A.parentNode}}h=h.return}fb(function(){var W=_,oe=eh(c),fe=[];e:{var te=Bb.get(i);if(te!==void 0){var ae=Ac,ke=i;switch(i){case"keypress":if(Cc(c)===0)break e;case"keydown":case"keyup":ae=b2;break;case"focusin":ke="focus",ae=ah;break;case"focusout":ke="blur",ae=ah;break;case"beforeblur":case"afterblur":ae=ah;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ae=pb;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ae=a2;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ae=x2;break;case jb:case Lb:case zb:ae=c2;break;case Pb:ae=S2;break;case"scroll":case"scrollend":ae=s2;break;case"wheel":ae=E2;break;case"copy":case"cut":case"paste":ae=f2;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ae=gb;break;case"toggle":case"beforetoggle":ae=T2}var Le=(o&4)!==0,vt=!Le&&(i==="scroll"||i==="scrollend"),J=Le?te!==null?te+"Capture":null:te;Le=[];for(var V=W,Y;V!==null;){var ce=V;if(Y=ce.stateNode,ce=ce.tag,ce!==5&&ce!==26&&ce!==27||Y===null||J===null||(ce=So(V,J),ce!=null&&Le.push(nl(V,ce,Y))),vt)break;V=V.return}0<Le.length&&(te=new ae(te,ke,null,c,oe),fe.push({event:te,listeners:Le}))}}if((o&7)===0){e:{if(te=i==="mouseover"||i==="pointerover",ae=i==="mouseout"||i==="pointerout",te&&c!==Xd&&(ke=c.relatedTarget||c.fromElement)&&(Xi(ke)||ke[Wi]))break e;if((ae||te)&&(te=oe.window===oe?oe:(te=oe.ownerDocument)?te.defaultView||te.parentWindow:window,ae?(ke=c.relatedTarget||c.toElement,ae=W,ke=ke?Xi(ke):null,ke!==null&&(vt=a(ke),Le=ke.tag,ke!==vt||Le!==5&&Le!==27&&Le!==6)&&(ke=null)):(ae=null,ke=W),ae!==ke)){if(Le=pb,ce="onMouseLeave",J="onMouseEnter",V="mouse",(i==="pointerout"||i==="pointerover")&&(Le=gb,ce="onPointerLeave",J="onPointerEnter",V="pointer"),vt=ae==null?te:wo(ae),Y=ke==null?te:wo(ke),te=new Le(ce,V+"leave",ae,c,oe),te.target=vt,te.relatedTarget=Y,ce=null,Xi(oe)===W&&(Le=new Le(J,V+"enter",ke,c,oe),Le.target=Y,Le.relatedTarget=vt,ce=Le),vt=ce,ae&&ke)t:{for(Le=CR,J=ae,V=ke,Y=0,ce=J;ce;ce=Le(ce))Y++;ce=0;for(var Ie=V;Ie;Ie=Le(Ie))ce++;for(;0<Y-ce;)J=Le(J),Y--;for(;0<ce-Y;)V=Le(V),ce--;for(;Y--;){if(J===V||V!==null&&J===V.alternate){Le=J;break t}J=Le(J),V=Le(V)}Le=null}else Le=null;ae!==null&&ox(fe,te,ae,Le,!1),ke!==null&&vt!==null&&ox(fe,vt,ke,Le,!0)}}e:{if(te=W?wo(W):window,ae=te.nodeName&&te.nodeName.toLowerCase(),ae==="select"||ae==="input"&&te.type==="file")var ot=kb;else if(wb(te))if(Eb)ot=z2;else{ot=j2;var Ce=D2}else ae=te.nodeName,!ae||ae.toLowerCase()!=="input"||te.type!=="checkbox"&&te.type!=="radio"?W&&Wd(W.elementType)&&(ot=kb):ot=L2;if(ot&&(ot=ot(i,W))){Sb(fe,ot,c,oe);break e}Ce&&Ce(i,te,W),i==="focusout"&&W&&te.type==="number"&&W.memoizedProps.value!=null&&Yd(te,"number",te.value)}switch(Ce=W?wo(W):window,i){case"focusin":(wb(Ce)||Ce.contentEditable==="true")&&(la=Ce,dh=W,Io=null);break;case"focusout":Io=dh=la=null;break;case"mousedown":hh=!0;break;case"contextmenu":case"mouseup":case"dragend":hh=!1,Mb(fe,c,oe);break;case"selectionchange":if(B2)break;case"keydown":case"keyup":Mb(fe,c,oe)}var qe;if(lh)e:{switch(i){case"compositionstart":var We="onCompositionStart";break e;case"compositionend":We="onCompositionEnd";break e;case"compositionupdate":We="onCompositionUpdate";break e}We=void 0}else oa?vb(i,c)&&(We="onCompositionEnd"):i==="keydown"&&c.keyCode===229&&(We="onCompositionStart");We&&(yb&&c.locale!=="ko"&&(oa||We!=="onCompositionStart"?We==="onCompositionEnd"&&oa&&(qe=db()):(Rs=oe,rh="value"in Rs?Rs.value:Rs.textContent,oa=!0)),Ce=bu(W,We),0<Ce.length&&(We=new mb(We,i,null,c,oe),fe.push({event:We,listeners:Ce}),qe?We.data=qe:(qe=xb(c),qe!==null&&(We.data=qe)))),(qe=R2?O2(i,c):I2(i,c))&&(We=bu(W,"onBeforeInput"),0<We.length&&(Ce=new mb("onBeforeInput","beforeinput",null,c,oe),fe.push({event:Ce,listeners:We}),Ce.data=qe)),wR(fe,i,W,c,oe)}ix(fe,o)})}function nl(i,o,c){return{instance:i,listener:o,currentTarget:c}}function bu(i,o){for(var c=o+"Capture",h=[];i!==null;){var b=i,_=b.stateNode;if(b=b.tag,b!==5&&b!==26&&b!==27||_===null||(b=So(i,c),b!=null&&h.unshift(nl(i,b,_)),b=So(i,o),b!=null&&h.push(nl(i,b,_))),i.tag===3)return h;i=i.return}return[]}function CR(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function ox(i,o,c,h,b){for(var _=o._reactName,S=[];c!==null&&c!==h;){var A=c,U=A.alternate,W=A.stateNode;if(A=A.tag,U!==null&&U===h)break;A!==5&&A!==26&&A!==27||W===null||(U=W,b?(W=So(c,_),W!=null&&S.unshift(nl(c,W,U))):b||(W=So(c,_),W!=null&&S.push(nl(c,W,U)))),c=c.return}S.length!==0&&i.push({event:o,listeners:S})}var TR=/\r\n?/g,AR=/\u0000|\uFFFD/g;function lx(i){return(typeof i=="string"?i:""+i).replace(TR,`
`).replace(AR,"")}function cx(i,o){return o=lx(o),lx(i)===o}function _t(i,o,c,h,b,_){switch(c){case"children":typeof h=="string"?o==="body"||o==="textarea"&&h===""||sa(i,h):(typeof h=="number"||typeof h=="bigint")&&o!=="body"&&sa(i,""+h);break;case"className":wc(i,"class",h);break;case"tabIndex":wc(i,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":wc(i,c,h);break;case"style":cb(i,h,_);break;case"data":if(o!=="object"){wc(i,"data",h);break}case"src":case"href":if(h===""&&(o!=="a"||c!=="href")){i.removeAttribute(c);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){i.removeAttribute(c);break}h=kc(""+h),i.setAttribute(c,h);break;case"action":case"formAction":if(typeof h=="function"){i.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(c==="formAction"?(o!=="input"&&_t(i,o,"name",b.name,b,null),_t(i,o,"formEncType",b.formEncType,b,null),_t(i,o,"formMethod",b.formMethod,b,null),_t(i,o,"formTarget",b.formTarget,b,null)):(_t(i,o,"encType",b.encType,b,null),_t(i,o,"method",b.method,b,null),_t(i,o,"target",b.target,b,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){i.removeAttribute(c);break}h=kc(""+h),i.setAttribute(c,h);break;case"onClick":h!=null&&(i.onclick=is);break;case"onScroll":h!=null&&Ke("scroll",i);break;case"onScrollEnd":h!=null&&Ke("scrollend",i);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(r(61));if(c=h.__html,c!=null){if(b.children!=null)throw Error(r(60));i.innerHTML=c}}break;case"multiple":i.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":i.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){i.removeAttribute("xlink:href");break}c=kc(""+h),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?i.setAttribute(c,""+h):i.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?i.setAttribute(c,""):i.removeAttribute(c);break;case"capture":case"download":h===!0?i.setAttribute(c,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?i.setAttribute(c,h):i.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?i.setAttribute(c,h):i.removeAttribute(c);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?i.removeAttribute(c):i.setAttribute(c,h);break;case"popover":Ke("beforetoggle",i),Ke("toggle",i),xc(i,"popover",h);break;case"xlinkActuate":ss(i,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":ss(i,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":ss(i,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":ss(i,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":ss(i,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":ss(i,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":ss(i,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":ss(i,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":ss(i,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":xc(i,"is",h);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=n2.get(c)||c,xc(i,c,h))}}function Pp(i,o,c,h,b,_){switch(c){case"style":cb(i,h,_);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(r(61));if(c=h.__html,c!=null){if(b.children!=null)throw Error(r(60));i.innerHTML=c}}break;case"children":typeof h=="string"?sa(i,h):(typeof h=="number"||typeof h=="bigint")&&sa(i,""+h);break;case"onScroll":h!=null&&Ke("scroll",i);break;case"onScrollEnd":h!=null&&Ke("scrollend",i);break;case"onClick":h!=null&&(i.onclick=is);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!eb.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(b=c.endsWith("Capture"),o=c.slice(2,b?c.length-7:void 0),_=i[Fn]||null,_=_!=null?_[c]:null,typeof _=="function"&&i.removeEventListener(o,_,b),typeof h=="function")){typeof _!="function"&&_!==null&&(c in i?i[c]=null:i.hasAttribute(c)&&i.removeAttribute(c)),i.addEventListener(o,h,b);break e}c in i?i[c]=h:h===!0?i.setAttribute(c,""):xc(i,c,h)}}}function bn(i,o,c){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ke("error",i),Ke("load",i);var h=!1,b=!1,_;for(_ in c)if(c.hasOwnProperty(_)){var S=c[_];if(S!=null)switch(_){case"src":h=!0;break;case"srcSet":b=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,o));default:_t(i,o,_,S,c,null)}}b&&_t(i,o,"srcSet",c.srcSet,c,null),h&&_t(i,o,"src",c.src,c,null);return;case"input":Ke("invalid",i);var A=_=S=b=null,U=null,W=null;for(h in c)if(c.hasOwnProperty(h)){var oe=c[h];if(oe!=null)switch(h){case"name":b=oe;break;case"type":S=oe;break;case"checked":U=oe;break;case"defaultChecked":W=oe;break;case"value":_=oe;break;case"defaultValue":A=oe;break;case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(r(137,o));break;default:_t(i,o,h,oe,c,null)}}ib(i,_,A,U,W,S,b,!1);return;case"select":Ke("invalid",i),h=S=_=null;for(b in c)if(c.hasOwnProperty(b)&&(A=c[b],A!=null))switch(b){case"value":_=A;break;case"defaultValue":S=A;break;case"multiple":h=A;default:_t(i,o,b,A,c,null)}o=_,c=S,i.multiple=!!h,o!=null?ra(i,!!h,o,!1):c!=null&&ra(i,!!h,c,!0);return;case"textarea":Ke("invalid",i),_=b=h=null;for(S in c)if(c.hasOwnProperty(S)&&(A=c[S],A!=null))switch(S){case"value":h=A;break;case"defaultValue":b=A;break;case"children":_=A;break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(r(91));break;default:_t(i,o,S,A,c,null)}ob(i,h,b,_);return;case"option":for(U in c)c.hasOwnProperty(U)&&(h=c[U],h!=null)&&(U==="selected"?i.selected=h&&typeof h!="function"&&typeof h!="symbol":_t(i,o,U,h,c,null));return;case"dialog":Ke("beforetoggle",i),Ke("toggle",i),Ke("cancel",i),Ke("close",i);break;case"iframe":case"object":Ke("load",i);break;case"video":case"audio":for(h=0;h<tl.length;h++)Ke(tl[h],i);break;case"image":Ke("error",i),Ke("load",i);break;case"details":Ke("toggle",i);break;case"embed":case"source":case"link":Ke("error",i),Ke("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(W in c)if(c.hasOwnProperty(W)&&(h=c[W],h!=null))switch(W){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,o));default:_t(i,o,W,h,c,null)}return;default:if(Wd(o)){for(oe in c)c.hasOwnProperty(oe)&&(h=c[oe],h!==void 0&&Pp(i,o,oe,h,c,void 0));return}}for(A in c)c.hasOwnProperty(A)&&(h=c[A],h!=null&&_t(i,o,A,h,c,null))}function RR(i,o,c,h){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var b=null,_=null,S=null,A=null,U=null,W=null,oe=null;for(ae in c){var fe=c[ae];if(c.hasOwnProperty(ae)&&fe!=null)switch(ae){case"checked":break;case"value":break;case"defaultValue":U=fe;default:h.hasOwnProperty(ae)||_t(i,o,ae,null,h,fe)}}for(var te in h){var ae=h[te];if(fe=c[te],h.hasOwnProperty(te)&&(ae!=null||fe!=null))switch(te){case"type":_=ae;break;case"name":b=ae;break;case"checked":W=ae;break;case"defaultChecked":oe=ae;break;case"value":S=ae;break;case"defaultValue":A=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(r(137,o));break;default:ae!==fe&&_t(i,o,te,ae,h,fe)}}Qd(i,S,A,U,W,oe,_,b);return;case"select":ae=S=A=te=null;for(_ in c)if(U=c[_],c.hasOwnProperty(_)&&U!=null)switch(_){case"value":break;case"multiple":ae=U;default:h.hasOwnProperty(_)||_t(i,o,_,null,h,U)}for(b in h)if(_=h[b],U=c[b],h.hasOwnProperty(b)&&(_!=null||U!=null))switch(b){case"value":te=_;break;case"defaultValue":A=_;break;case"multiple":S=_;default:_!==U&&_t(i,o,b,_,h,U)}o=A,c=S,h=ae,te!=null?ra(i,!!c,te,!1):!!h!=!!c&&(o!=null?ra(i,!!c,o,!0):ra(i,!!c,c?[]:"",!1));return;case"textarea":ae=te=null;for(A in c)if(b=c[A],c.hasOwnProperty(A)&&b!=null&&!h.hasOwnProperty(A))switch(A){case"value":break;case"children":break;default:_t(i,o,A,null,h,b)}for(S in h)if(b=h[S],_=c[S],h.hasOwnProperty(S)&&(b!=null||_!=null))switch(S){case"value":te=b;break;case"defaultValue":ae=b;break;case"children":break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(r(91));break;default:b!==_&&_t(i,o,S,b,h,_)}ab(i,te,ae);return;case"option":for(var ke in c)te=c[ke],c.hasOwnProperty(ke)&&te!=null&&!h.hasOwnProperty(ke)&&(ke==="selected"?i.selected=!1:_t(i,o,ke,null,h,te));for(U in h)te=h[U],ae=c[U],h.hasOwnProperty(U)&&te!==ae&&(te!=null||ae!=null)&&(U==="selected"?i.selected=te&&typeof te!="function"&&typeof te!="symbol":_t(i,o,U,te,h,ae));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Le in c)te=c[Le],c.hasOwnProperty(Le)&&te!=null&&!h.hasOwnProperty(Le)&&_t(i,o,Le,null,h,te);for(W in h)if(te=h[W],ae=c[W],h.hasOwnProperty(W)&&te!==ae&&(te!=null||ae!=null))switch(W){case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(r(137,o));break;default:_t(i,o,W,te,h,ae)}return;default:if(Wd(o)){for(var vt in c)te=c[vt],c.hasOwnProperty(vt)&&te!==void 0&&!h.hasOwnProperty(vt)&&Pp(i,o,vt,void 0,h,te);for(oe in h)te=h[oe],ae=c[oe],!h.hasOwnProperty(oe)||te===ae||te===void 0&&ae===void 0||Pp(i,o,oe,te,h,ae);return}}for(var J in c)te=c[J],c.hasOwnProperty(J)&&te!=null&&!h.hasOwnProperty(J)&&_t(i,o,J,null,h,te);for(fe in h)te=h[fe],ae=c[fe],!h.hasOwnProperty(fe)||te===ae||te==null&&ae==null||_t(i,o,fe,te,h,ae)}function ux(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function OR(){if(typeof performance.getEntriesByType=="function"){for(var i=0,o=0,c=performance.getEntriesByType("resource"),h=0;h<c.length;h++){var b=c[h],_=b.transferSize,S=b.initiatorType,A=b.duration;if(_&&A&&ux(S)){for(S=0,A=b.responseEnd,h+=1;h<c.length;h++){var U=c[h],W=U.startTime;if(W>A)break;var oe=U.transferSize,fe=U.initiatorType;oe&&ux(fe)&&(U=U.responseEnd,S+=oe*(U<A?1:(A-W)/(U-W)))}if(--h,o+=8*(_+S)/(b.duration/1e3),i++,10<i)break}}if(0<i)return o/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var Bp=null,$p=null;function _u(i){return i.nodeType===9?i:i.ownerDocument}function fx(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function dx(i,o){if(i===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&o==="foreignObject"?0:i}function Up(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var qp=null;function IR(){var i=window.event;return i&&i.type==="popstate"?i===qp?!1:(qp=i,!0):(qp=null,!1)}var hx=typeof setTimeout=="function"?setTimeout:void 0,NR=typeof clearTimeout=="function"?clearTimeout:void 0,px=typeof Promise=="function"?Promise:void 0,MR=typeof queueMicrotask=="function"?queueMicrotask:typeof px<"u"?function(i){return px.resolve(null).then(i).catch(DR)}:hx;function DR(i){setTimeout(function(){throw i})}function Gs(i){return i==="head"}function mx(i,o){var c=o,h=0;do{var b=c.nextSibling;if(i.removeChild(c),b&&b.nodeType===8)if(c=b.data,c==="/$"||c==="/&"){if(h===0){i.removeChild(b),ja(o);return}h--}else if(c==="$"||c==="$?"||c==="$~"||c==="$!"||c==="&")h++;else if(c==="html")rl(i.ownerDocument.documentElement);else if(c==="head"){c=i.ownerDocument.head,rl(c);for(var _=c.firstChild;_;){var S=_.nextSibling,A=_.nodeName;_[xo]||A==="SCRIPT"||A==="STYLE"||A==="LINK"&&_.rel.toLowerCase()==="stylesheet"||c.removeChild(_),_=S}}else c==="body"&&rl(i.ownerDocument.body);c=b}while(c);ja(o)}function gx(i,o){var c=i;i=0;do{var h=c.nextSibling;if(c.nodeType===1?o?(c._stashedDisplay=c.style.display,c.style.display="none"):(c.style.display=c._stashedDisplay||"",c.getAttribute("style")===""&&c.removeAttribute("style")):c.nodeType===3&&(o?(c._stashedText=c.nodeValue,c.nodeValue=""):c.nodeValue=c._stashedText||""),h&&h.nodeType===8)if(c=h.data,c==="/$"){if(i===0)break;i--}else c!=="$"&&c!=="$?"&&c!=="$~"&&c!=="$!"||i++;c=h}while(c)}function Fp(i){var o=i.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var c=o;switch(o=o.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":Fp(c),Zd(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}i.removeChild(c)}}function jR(i,o,c,h){for(;i.nodeType===1;){var b=c;if(i.nodeName.toLowerCase()!==o.toLowerCase()){if(!h&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(h){if(!i[xo])switch(o){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(_=i.getAttribute("rel"),_==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(_!==b.rel||i.getAttribute("href")!==(b.href==null||b.href===""?null:b.href)||i.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin)||i.getAttribute("title")!==(b.title==null?null:b.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(_=i.getAttribute("src"),(_!==(b.src==null?null:b.src)||i.getAttribute("type")!==(b.type==null?null:b.type)||i.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin))&&_&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(o==="input"&&i.type==="hidden"){var _=b.name==null?null:""+b.name;if(b.type==="hidden"&&i.getAttribute("name")===_)return i}else return i;if(i=Tr(i.nextSibling),i===null)break}return null}function LR(i,o,c){if(o==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!c||(i=Tr(i.nextSibling),i===null))return null;return i}function yx(i,o){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!o||(i=Tr(i.nextSibling),i===null))return null;return i}function Vp(i){return i.data==="$?"||i.data==="$~"}function Hp(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function zR(i,o){var c=i.ownerDocument;if(i.data==="$~")i._reactRetry=o;else if(i.data!=="$?"||c.readyState!=="loading")o();else{var h=function(){o(),c.removeEventListener("DOMContentLoaded",h)};c.addEventListener("DOMContentLoaded",h),i._reactRetry=h}}function Tr(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return i}var Gp=null;function bx(i){i=i.nextSibling;for(var o=0;i;){if(i.nodeType===8){var c=i.data;if(c==="/$"||c==="/&"){if(o===0)return Tr(i.nextSibling);o--}else c!=="$"&&c!=="$!"&&c!=="$?"&&c!=="$~"&&c!=="&"||o++}i=i.nextSibling}return null}function _x(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var c=i.data;if(c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"){if(o===0)return i;o--}else c!=="/$"&&c!=="/&"||o++}i=i.previousSibling}return null}function vx(i,o,c){switch(o=_u(c),i){case"html":if(i=o.documentElement,!i)throw Error(r(452));return i;case"head":if(i=o.head,!i)throw Error(r(453));return i;case"body":if(i=o.body,!i)throw Error(r(454));return i;default:throw Error(r(451))}}function rl(i){for(var o=i.attributes;o.length;)i.removeAttributeNode(o[0]);Zd(i)}var Ar=new Map,xx=new Set;function vu(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var xs=K.d;K.d={f:PR,r:BR,D:$R,C:UR,L:qR,m:FR,X:HR,S:VR,M:GR};function PR(){var i=xs.f(),o=fu();return i||o}function BR(i){var o=ea(i);o!==null&&o.tag===5&&o.type==="form"?P_(o):xs.r(i)}var Na=typeof document>"u"?null:document;function wx(i,o,c){var h=Na;if(h&&typeof o=="string"&&o){var b=vr(o);b='link[rel="'+i+'"][href="'+b+'"]',typeof c=="string"&&(b+='[crossorigin="'+c+'"]'),xx.has(b)||(xx.add(b),i={rel:i,crossOrigin:c,href:o},h.querySelector(b)===null&&(o=h.createElement("link"),bn(o,"link",i),ln(o),h.head.appendChild(o)))}}function $R(i){xs.D(i),wx("dns-prefetch",i,null)}function UR(i,o){xs.C(i,o),wx("preconnect",i,o)}function qR(i,o,c){xs.L(i,o,c);var h=Na;if(h&&i&&o){var b='link[rel="preload"][as="'+vr(o)+'"]';o==="image"&&c&&c.imageSrcSet?(b+='[imagesrcset="'+vr(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(b+='[imagesizes="'+vr(c.imageSizes)+'"]')):b+='[href="'+vr(i)+'"]';var _=b;switch(o){case"style":_=Ma(i);break;case"script":_=Da(i)}Ar.has(_)||(i=p({rel:"preload",href:o==="image"&&c&&c.imageSrcSet?void 0:i,as:o},c),Ar.set(_,i),h.querySelector(b)!==null||o==="style"&&h.querySelector(sl(_))||o==="script"&&h.querySelector(il(_))||(o=h.createElement("link"),bn(o,"link",i),ln(o),h.head.appendChild(o)))}}function FR(i,o){xs.m(i,o);var c=Na;if(c&&i){var h=o&&typeof o.as=="string"?o.as:"script",b='link[rel="modulepreload"][as="'+vr(h)+'"][href="'+vr(i)+'"]',_=b;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=Da(i)}if(!Ar.has(_)&&(i=p({rel:"modulepreload",href:i},o),Ar.set(_,i),c.querySelector(b)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(il(_)))return}h=c.createElement("link"),bn(h,"link",i),ln(h),c.head.appendChild(h)}}}function VR(i,o,c){xs.S(i,o,c);var h=Na;if(h&&i){var b=ta(h).hoistableStyles,_=Ma(i);o=o||"default";var S=b.get(_);if(!S){var A={loading:0,preload:null};if(S=h.querySelector(sl(_)))A.loading=5;else{i=p({rel:"stylesheet",href:i,"data-precedence":o},c),(c=Ar.get(_))&&Kp(i,c);var U=S=h.createElement("link");ln(U),bn(U,"link",i),U._p=new Promise(function(W,oe){U.onload=W,U.onerror=oe}),U.addEventListener("load",function(){A.loading|=1}),U.addEventListener("error",function(){A.loading|=2}),A.loading|=4,xu(S,o,h)}S={type:"stylesheet",instance:S,count:1,state:A},b.set(_,S)}}}function HR(i,o){xs.X(i,o);var c=Na;if(c&&i){var h=ta(c).hoistableScripts,b=Da(i),_=h.get(b);_||(_=c.querySelector(il(b)),_||(i=p({src:i,async:!0},o),(o=Ar.get(b))&&Zp(i,o),_=c.createElement("script"),ln(_),bn(_,"link",i),c.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},h.set(b,_))}}function GR(i,o){xs.M(i,o);var c=Na;if(c&&i){var h=ta(c).hoistableScripts,b=Da(i),_=h.get(b);_||(_=c.querySelector(il(b)),_||(i=p({src:i,async:!0,type:"module"},o),(o=Ar.get(b))&&Zp(i,o),_=c.createElement("script"),ln(_),bn(_,"link",i),c.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},h.set(b,_))}}function Sx(i,o,c,h){var b=(b=P.current)?vu(b):null;if(!b)throw Error(r(446));switch(i){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(o=Ma(c.href),c=ta(b).hoistableStyles,h=c.get(o),h||(h={type:"style",instance:null,count:0,state:null},c.set(o,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){i=Ma(c.href);var _=ta(b).hoistableStyles,S=_.get(i);if(S||(b=b.ownerDocument||b,S={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(i,S),(_=b.querySelector(sl(i)))&&!_._p&&(S.instance=_,S.state.loading=5),Ar.has(i)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},Ar.set(i,c),_||KR(b,i,c,S.state))),o&&h===null)throw Error(r(528,""));return S}if(o&&h!==null)throw Error(r(529,""));return null;case"script":return o=c.async,c=c.src,typeof c=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=Da(c),c=ta(b).hoistableScripts,h=c.get(o),h||(h={type:"script",instance:null,count:0,state:null},c.set(o,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,i))}}function Ma(i){return'href="'+vr(i)+'"'}function sl(i){return'link[rel="stylesheet"]['+i+"]"}function kx(i){return p({},i,{"data-precedence":i.precedence,precedence:null})}function KR(i,o,c,h){i.querySelector('link[rel="preload"][as="style"]['+o+"]")?h.loading=1:(o=i.createElement("link"),h.preload=o,o.addEventListener("load",function(){return h.loading|=1}),o.addEventListener("error",function(){return h.loading|=2}),bn(o,"link",c),ln(o),i.head.appendChild(o))}function Da(i){return'[src="'+vr(i)+'"]'}function il(i){return"script[async]"+i}function Ex(i,o,c){if(o.count++,o.instance===null)switch(o.type){case"style":var h=i.querySelector('style[data-href~="'+vr(c.href)+'"]');if(h)return o.instance=h,ln(h),h;var b=p({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return h=(i.ownerDocument||i).createElement("style"),ln(h),bn(h,"style",b),xu(h,c.precedence,i),o.instance=h;case"stylesheet":b=Ma(c.href);var _=i.querySelector(sl(b));if(_)return o.state.loading|=4,o.instance=_,ln(_),_;h=kx(c),(b=Ar.get(b))&&Kp(h,b),_=(i.ownerDocument||i).createElement("link"),ln(_);var S=_;return S._p=new Promise(function(A,U){S.onload=A,S.onerror=U}),bn(_,"link",h),o.state.loading|=4,xu(_,c.precedence,i),o.instance=_;case"script":return _=Da(c.src),(b=i.querySelector(il(_)))?(o.instance=b,ln(b),b):(h=c,(b=Ar.get(_))&&(h=p({},c),Zp(h,b)),i=i.ownerDocument||i,b=i.createElement("script"),ln(b),bn(b,"link",h),i.head.appendChild(b),o.instance=b);case"void":return null;default:throw Error(r(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(h=o.instance,o.state.loading|=4,xu(h,c.precedence,i));return o.instance}function xu(i,o,c){for(var h=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),b=h.length?h[h.length-1]:null,_=b,S=0;S<h.length;S++){var A=h[S];if(A.dataset.precedence===o)_=A;else if(_!==b)break}_?_.parentNode.insertBefore(i,_.nextSibling):(o=c.nodeType===9?c.head:c,o.insertBefore(i,o.firstChild))}function Kp(i,o){i.crossOrigin==null&&(i.crossOrigin=o.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=o.referrerPolicy),i.title==null&&(i.title=o.title)}function Zp(i,o){i.crossOrigin==null&&(i.crossOrigin=o.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=o.referrerPolicy),i.integrity==null&&(i.integrity=o.integrity)}var wu=null;function Cx(i,o,c){if(wu===null){var h=new Map,b=wu=new Map;b.set(c,h)}else b=wu,h=b.get(c),h||(h=new Map,b.set(c,h));if(h.has(i))return h;for(h.set(i,null),c=c.getElementsByTagName(i),b=0;b<c.length;b++){var _=c[b];if(!(_[xo]||_[pn]||i==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var S=_.getAttribute(o)||"";S=i+S;var A=h.get(S);A?A.push(_):h.set(S,[_])}}return h}function Tx(i,o,c){i=i.ownerDocument||i,i.head.insertBefore(c,o==="title"?i.querySelector("head > title"):null)}function ZR(i,o,c){if(c===1||o.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;return o.rel==="stylesheet"?(i=o.disabled,typeof o.precedence=="string"&&i==null):!0;case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function Ax(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function JR(i,o,c,h){if(c.type==="stylesheet"&&(typeof h.media!="string"||matchMedia(h.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var b=Ma(h.href),_=o.querySelector(sl(b));if(_){o=_._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(i.count++,i=Su.bind(i),o.then(i,i)),c.state.loading|=4,c.instance=_,ln(_);return}_=o.ownerDocument||o,h=kx(h),(b=Ar.get(b))&&Kp(h,b),_=_.createElement("link"),ln(_);var S=_;S._p=new Promise(function(A,U){S.onload=A,S.onerror=U}),bn(_,"link",h),c.instance=_}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(c,o),(o=c.state.preload)&&(c.state.loading&3)===0&&(i.count++,c=Su.bind(i),o.addEventListener("load",c),o.addEventListener("error",c))}}var Jp=0;function QR(i,o){return i.stylesheets&&i.count===0&&Eu(i,i.stylesheets),0<i.count||0<i.imgCount?function(c){var h=setTimeout(function(){if(i.stylesheets&&Eu(i,i.stylesheets),i.unsuspend){var _=i.unsuspend;i.unsuspend=null,_()}},6e4+o);0<i.imgBytes&&Jp===0&&(Jp=62500*OR());var b=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&Eu(i,i.stylesheets),i.unsuspend)){var _=i.unsuspend;i.unsuspend=null,_()}},(i.imgBytes>Jp?50:800)+o);return i.unsuspend=c,function(){i.unsuspend=null,clearTimeout(h),clearTimeout(b)}}:null}function Su(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Eu(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var ku=null;function Eu(i,o){i.stylesheets=null,i.unsuspend!==null&&(i.count++,ku=new Map,o.forEach(YR,i),ku=null,Su.call(i))}function YR(i,o){if(!(o.state.loading&4)){var c=ku.get(i);if(c)var h=c.get(null);else{c=new Map,ku.set(i,c);for(var b=i.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<b.length;_++){var S=b[_];(S.nodeName==="LINK"||S.getAttribute("media")!=="not all")&&(c.set(S.dataset.precedence,S),h=S)}h&&c.set(null,h)}b=o.instance,S=b.getAttribute("data-precedence"),_=c.get(S)||h,_===h&&c.set(null,b),c.set(S,b),this.count++,h=Su.bind(this),b.addEventListener("load",h),b.addEventListener("error",h),_?_.parentNode.insertBefore(b,_.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(b,i.firstChild)),o.state.loading|=4}}var al={$$typeof:T,Provider:null,Consumer:null,_currentValue:ie,_currentValue2:ie,_threadCount:0};function WR(i,o,c,h,b,_,S,A,U){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Yi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Yi(0),this.hiddenUpdates=Yi(null),this.identifierPrefix=h,this.onUncaughtError=b,this.onCaughtError=_,this.onRecoverableError=S,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=U,this.incompleteTransitions=new Map}function Rx(i,o,c,h,b,_,S,A,U,W,oe,fe){return i=new WR(i,o,c,S,U,W,oe,fe,A),o=1,_===!0&&(o|=24),_=ir(3,null,null,o),i.current=_,_.stateNode=i,o=Ah(),o.refCount++,i.pooledCache=o,o.refCount++,_.memoizedState={element:h,isDehydrated:c,cache:o},Nh(_),i}function Ox(i){return i?(i=fa,i):fa}function Ix(i,o,c,h,b,_){b=Ox(b),h.context===null?h.context=b:h.pendingContext=b,h=js(o),h.payload={element:c},_=_===void 0?null:_,_!==null&&(h.callback=_),c=Ls(i,h,o),c!==null&&(Jn(c,i,o),Po(c,i,o))}function Nx(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var c=i.retryLane;i.retryLane=c!==0&&c<o?c:o}}function Qp(i,o){Nx(i,o),(i=i.alternate)&&Nx(i,o)}function Mx(i){if(i.tag===13||i.tag===31){var o=_i(i,67108864);o!==null&&Jn(o,i,67108864),Qp(i,67108864)}}function Dx(i){if(i.tag===13||i.tag===31){var o=ur();o=Hd(o);var c=_i(i,o);c!==null&&Jn(c,i,o),Qp(i,o)}}var Cu=!0;function XR(i,o,c,h){var b=B.T;B.T=null;var _=K.p;try{K.p=2,Yp(i,o,c,h)}finally{K.p=_,B.T=b}}function eO(i,o,c,h){var b=B.T;B.T=null;var _=K.p;try{K.p=8,Yp(i,o,c,h)}finally{K.p=_,B.T=b}}function Yp(i,o,c,h){if(Cu){var b=Wp(h);if(b===null)zp(i,o,h,Tu,c),Lx(i,h);else if(nO(b,i,o,c,h))h.stopPropagation();else if(Lx(i,h),o&4&&-1<tO.indexOf(i)){for(;b!==null;){var _=ea(b);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var S=Lt(_.pendingLanes);if(S!==0){var A=_;for(A.pendingLanes|=2,A.entangledLanes|=2;S;){var U=1<<31-Me(S);A.entanglements[1]|=U,S&=~U}Gr(_),(ct&6)===0&&(cu=Re()+500,el(0))}}break;case 31:case 13:A=_i(_,2),A!==null&&Jn(A,_,2),fu(),Qp(_,2)}if(_=Wp(h),_===null&&zp(i,o,h,Tu,c),_===b)break;b=_}b!==null&&h.stopPropagation()}else zp(i,o,h,null,c)}}function Wp(i){return i=eh(i),Xp(i)}var Tu=null;function Xp(i){if(Tu=null,i=Xi(i),i!==null){var o=a(i);if(o===null)i=null;else{var c=o.tag;if(c===13){if(i=l(o),i!==null)return i;i=null}else if(c===31){if(i=u(o),i!==null)return i;i=null}else if(c===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null)}}return Tu=i,null}function jx(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(kt()){case se:return 2;case me:return 8;case he:case _e:return 32;case ue:return 268435456;default:return 32}default:return 32}}var em=!1,Ks=null,Zs=null,Js=null,ol=new Map,ll=new Map,Qs=[],tO="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Lx(i,o){switch(i){case"focusin":case"focusout":Ks=null;break;case"dragenter":case"dragleave":Zs=null;break;case"mouseover":case"mouseout":Js=null;break;case"pointerover":case"pointerout":ol.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":ll.delete(o.pointerId)}}function cl(i,o,c,h,b,_){return i===null||i.nativeEvent!==_?(i={blockedOn:o,domEventName:c,eventSystemFlags:h,nativeEvent:_,targetContainers:[b]},o!==null&&(o=ea(o),o!==null&&Mx(o)),i):(i.eventSystemFlags|=h,o=i.targetContainers,b!==null&&o.indexOf(b)===-1&&o.push(b),i)}function nO(i,o,c,h,b){switch(o){case"focusin":return Ks=cl(Ks,i,o,c,h,b),!0;case"dragenter":return Zs=cl(Zs,i,o,c,h,b),!0;case"mouseover":return Js=cl(Js,i,o,c,h,b),!0;case"pointerover":var _=b.pointerId;return ol.set(_,cl(ol.get(_)||null,i,o,c,h,b)),!0;case"gotpointercapture":return _=b.pointerId,ll.set(_,cl(ll.get(_)||null,i,o,c,h,b)),!0}return!1}function zx(i){var o=Xi(i.target);if(o!==null){var c=a(o);if(c!==null){if(o=c.tag,o===13){if(o=l(c),o!==null){i.blockedOn=o,Y0(i.priority,function(){Dx(c)});return}}else if(o===31){if(o=u(c),o!==null){i.blockedOn=o,Y0(i.priority,function(){Dx(c)});return}}else if(o===3&&c.stateNode.current.memoizedState.isDehydrated){i.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Au(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var c=Wp(i.nativeEvent);if(c===null){c=i.nativeEvent;var h=new c.constructor(c.type,c);Xd=h,c.target.dispatchEvent(h),Xd=null}else return o=ea(c),o!==null&&Mx(o),i.blockedOn=c,!1;o.shift()}return!0}function Px(i,o,c){Au(i)&&c.delete(o)}function rO(){em=!1,Ks!==null&&Au(Ks)&&(Ks=null),Zs!==null&&Au(Zs)&&(Zs=null),Js!==null&&Au(Js)&&(Js=null),ol.forEach(Px),ll.forEach(Px)}function Ru(i,o){i.blockedOn===o&&(i.blockedOn=null,em||(em=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,rO)))}var Ou=null;function Bx(i){Ou!==i&&(Ou=i,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Ou===i&&(Ou=null);for(var o=0;o<i.length;o+=3){var c=i[o],h=i[o+1],b=i[o+2];if(typeof h!="function"){if(Xp(h||c)===null)continue;break}var _=ea(c);_!==null&&(i.splice(o,3),o-=3,Wh(_,{pending:!0,data:b,method:c.method,action:h},h,b))}}))}function ja(i){function o(U){return Ru(U,i)}Ks!==null&&Ru(Ks,i),Zs!==null&&Ru(Zs,i),Js!==null&&Ru(Js,i),ol.forEach(o),ll.forEach(o);for(var c=0;c<Qs.length;c++){var h=Qs[c];h.blockedOn===i&&(h.blockedOn=null)}for(;0<Qs.length&&(c=Qs[0],c.blockedOn===null);)zx(c),c.blockedOn===null&&Qs.shift();if(c=(i.ownerDocument||i).$$reactFormReplay,c!=null)for(h=0;h<c.length;h+=3){var b=c[h],_=c[h+1],S=b[Fn]||null;if(typeof _=="function")S||Bx(c);else if(S){var A=null;if(_&&_.hasAttribute("formAction")){if(b=_,S=_[Fn]||null)A=S.formAction;else if(Xp(b)!==null)continue}else A=S.action;typeof A=="function"?c[h+1]=A:(c.splice(h,3),h-=3),Bx(c)}}}function $x(){function i(_){_.canIntercept&&_.info==="react-transition"&&_.intercept({handler:function(){return new Promise(function(S){return b=S})},focusReset:"manual",scroll:"manual"})}function o(){b!==null&&(b(),b=null),h||setTimeout(c,20)}function c(){if(!h&&!navigation.transition){var _=navigation.currentEntry;_&&_.url!=null&&navigation.navigate(_.url,{state:_.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var h=!1,b=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(c,100),function(){h=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),b!==null&&(b(),b=null)}}}function tm(i){this._internalRoot=i}Iu.prototype.render=tm.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(r(409));var c=o.current,h=ur();Ix(c,h,i,o,null,null)},Iu.prototype.unmount=tm.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;Ix(i.current,2,null,i,null,null),fu(),o[Wi]=null}};function Iu(i){this._internalRoot=i}Iu.prototype.unstable_scheduleHydration=function(i){if(i){var o=Q0();i={blockedOn:null,target:i,priority:o};for(var c=0;c<Qs.length&&o!==0&&o<Qs[c].priority;c++);Qs.splice(c,0,i),c===0&&zx(i)}};var Ux=e.version;if(Ux!=="19.2.3")throw Error(r(527,Ux,"19.2.3"));K.findDOMNode=function(i){var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(r(188)):(i=Object.keys(i).join(","),Error(r(268,i)));return i=d(o),i=i!==null?m(i):null,i=i===null?null:i.stateNode,i};var sO={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:B,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Nu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Nu.isDisabled&&Nu.supportsFiber)try{st=Nu.inject(sO),ut=Nu}catch{}}return fl.createRoot=function(i,o){if(!s(i))throw Error(r(299));var c=!1,h="",b=Z_,_=J_,S=Q_;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(h=o.identifierPrefix),o.onUncaughtError!==void 0&&(b=o.onUncaughtError),o.onCaughtError!==void 0&&(_=o.onCaughtError),o.onRecoverableError!==void 0&&(S=o.onRecoverableError)),o=Rx(i,1,!1,null,null,c,h,null,b,_,S,$x),i[Wi]=o.current,Lp(i),new tm(o)},fl.hydrateRoot=function(i,o,c){if(!s(i))throw Error(r(299));var h=!1,b="",_=Z_,S=J_,A=Q_,U=null;return c!=null&&(c.unstable_strictMode===!0&&(h=!0),c.identifierPrefix!==void 0&&(b=c.identifierPrefix),c.onUncaughtError!==void 0&&(_=c.onUncaughtError),c.onCaughtError!==void 0&&(S=c.onCaughtError),c.onRecoverableError!==void 0&&(A=c.onRecoverableError),c.formState!==void 0&&(U=c.formState)),o=Rx(i,1,!0,o,c??null,h,b,U,_,S,A,$x),o.context=Ox(null),c=o.current,h=ur(),h=Hd(h),b=js(h),b.callback=null,Ls(c,b,h),c=h,o.current.lanes=c,qn(o,c),Gr(o),i[Wi]=o.current,Lp(i),new Iu(o)},fl.version="19.2.3",fl}var Yx;function hO(){if(Yx)return sm.exports;Yx=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),sm.exports=dO(),sm.exports}var pO=hO(),lc=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},mO={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},gO=class{#e=mO;#t=!1;setTimeoutProvider(t){this.#e=t}setTimeout(t,e){return this.#e.setTimeout(t,e)}clearTimeout(t){this.#e.clearTimeout(t)}setInterval(t,e){return this.#e.setInterval(t,e)}clearInterval(t){this.#e.clearInterval(t)}},Pi=new gO;function yO(t){setTimeout(t,0)}var ro=typeof window>"u"||"Deno"in globalThis;function Or(){}function bO(t,e){return typeof t=="function"?t(e):t}function rg(t){return typeof t=="number"&&t>=0&&t!==1/0}function fk(t,e){return Math.max(t+(e||0)-Date.now(),0)}function si(t,e){return typeof t=="function"?t(e):t}function Ir(t,e){return typeof t=="function"?t(e):t}function Wx(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:a,queryKey:l,stale:u}=t;if(l){if(r){if(e.queryHash!==by(l,e.options))return!1}else if(!Kl(e.queryKey,l))return!1}if(n!=="all"){const f=e.isActive();if(n==="active"&&!f||n==="inactive"&&f)return!1}return!(typeof u=="boolean"&&e.isStale()!==u||s&&s!==e.state.fetchStatus||a&&!a(e))}function Xx(t,e){const{exact:n,status:r,predicate:s,mutationKey:a}=t;if(a){if(!e.options.mutationKey)return!1;if(n){if(Cs(e.options.mutationKey)!==Cs(a))return!1}else if(!Kl(e.options.mutationKey,a))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function by(t,e){return(e?.queryKeyHashFn||Cs)(t)}function Cs(t){return JSON.stringify(t,(e,n)=>ig(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function Kl(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>Kl(t[n],e[n])):!1}var _O=Object.prototype.hasOwnProperty;function dk(t,e){if(t===e)return t;const n=e1(t)&&e1(e);if(!n&&!(ig(t)&&ig(e)))return e;const s=(n?t:Object.keys(t)).length,a=n?e:Object.keys(e),l=a.length,u=n?new Array(l):{};let f=0;for(let d=0;d<l;d++){const m=n?d:a[d],p=t[m],y=e[m];if(p===y){u[m]=p,(n?d<s:_O.call(t,m))&&f++;continue}if(p===null||y===null||typeof p!="object"||typeof y!="object"){u[m]=y;continue}const g=dk(p,y);u[m]=g,g===p&&f++}return s===l&&f===s?t:u}function sg(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function e1(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function ig(t){if(!t1(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!t1(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function t1(t){return Object.prototype.toString.call(t)==="[object Object]"}function vO(t){return new Promise(e=>{Pi.setTimeout(e,t)})}function ag(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?dk(t,e):e}function xO(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function wO(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var _y=Symbol();function hk(t,e){return!t.queryFn&&e?.initialPromise?()=>e.initialPromise:!t.queryFn||t.queryFn===_y?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function SO(t,e,n){let r=!1,s;return Object.defineProperty(t,"signal",{enumerable:!0,get:()=>(s??=e(),r||(r=!0,s.aborted?n():s.addEventListener("abort",n,{once:!0})),s)}),t}var kO=class extends lc{#e;#t;#n;constructor(){super(),this.#n=t=>{if(!ro&&window.addEventListener){const e=()=>t();return window.addEventListener("visibilitychange",e,!1),()=>{window.removeEventListener("visibilitychange",e)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#n=t,this.#t?.(),this.#t=t(e=>{typeof e=="boolean"?this.setFocused(e):this.onFocus()})}setFocused(t){this.#e!==t&&(this.#e=t,this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(e=>{e(t)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},vy=new kO;function og(){let t,e;const n=new Promise((s,a)=>{t=s,e=a});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}var EO=yO;function CO(){let t=[],e=0,n=u=>{u()},r=u=>{u()},s=EO;const a=u=>{e?t.push(u):s(()=>{n(u)})},l=()=>{const u=t;t=[],u.length&&s(()=>{r(()=>{u.forEach(f=>{n(f)})})})};return{batch:u=>{let f;e++;try{f=u()}finally{e--,e||l()}return f},batchCalls:u=>(...f)=>{a(()=>{u(...f)})},schedule:a,setNotifyFunction:u=>{n=u},setBatchNotifyFunction:u=>{r=u},setScheduler:u=>{s=u}}}var Tn=CO(),TO=class extends lc{#e=!0;#t;#n;constructor(){super(),this.#n=t=>{if(!ro&&window.addEventListener){const e=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",e,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",n)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#n=t,this.#t?.(),this.#t=t(this.setOnline.bind(this))}setOnline(t){this.#e!==t&&(this.#e=t,this.listeners.forEach(n=>{n(t)}))}isOnline(){return this.#e}},_f=new TO;function AO(t){return Math.min(1e3*2**t,3e4)}function pk(t){return(t??"online")==="online"?_f.isOnline():!0}var lg=class extends Error{constructor(t){super("CancelledError"),this.revert=t?.revert,this.silent=t?.silent}};function mk(t){let e=!1,n=0,r;const s=og(),a=()=>s.status!=="pending",l=w=>{if(!a()){const E=new lg(w);y(E),t.onCancel?.(E)}},u=()=>{e=!0},f=()=>{e=!1},d=()=>vy.isFocused()&&(t.networkMode==="always"||_f.isOnline())&&t.canRun(),m=()=>pk(t.networkMode)&&t.canRun(),p=w=>{a()||(r?.(),s.resolve(w))},y=w=>{a()||(r?.(),s.reject(w))},g=()=>new Promise(w=>{r=E=>{(a()||d())&&w(E)},t.onPause?.()}).then(()=>{r=void 0,a()||t.onContinue?.()}),v=()=>{if(a())return;let w;const E=n===0?t.initialPromise:void 0;try{w=E??t.fn()}catch(k){w=Promise.reject(k)}Promise.resolve(w).then(p).catch(k=>{if(a())return;const C=t.retry??(ro?0:3),T=t.retryDelay??AO,D=typeof T=="function"?T(n,k):T,N=C===!0||typeof C=="number"&&n<C||typeof C=="function"&&C(n,k);if(e||!N){y(k);return}n++,t.onFail?.(n,k),vO(D).then(()=>d()?void 0:g()).then(()=>{e?y(k):v()})})};return{promise:s,status:()=>s.status,cancel:l,continue:()=>(r?.(),s),cancelRetry:u,continueRetry:f,canStart:m,start:()=>(m()?v():g().then(v),s)}}var gk=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),rg(this.gcTime)&&(this.#e=Pi.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(ro?1/0:300*1e3))}clearGcTimeout(){this.#e&&(Pi.clearTimeout(this.#e),this.#e=void 0)}},RO=class extends gk{#e;#t;#n;#r;#s;#o;#i;constructor(t){super(),this.#i=!1,this.#o=t.defaultOptions,this.setOptions(t.options),this.observers=[],this.#r=t.client,this.#n=this.#r.getQueryCache(),this.queryKey=t.queryKey,this.queryHash=t.queryHash,this.#e=r1(this.options),this.state=t.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#s?.promise}setOptions(t){if(this.options={...this.#o,...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const e=r1(this.options);e.data!==void 0&&(this.setState(n1(e.data,e.dataUpdatedAt)),this.#e=e)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#n.remove(this)}setData(t,e){const n=ag(this.state.data,t,this.options);return this.#a({data:n,type:"success",dataUpdatedAt:e?.updatedAt,manual:e?.manual}),n}setState(t,e){this.#a({type:"setState",state:t,setStateOptions:e})}cancel(t){const e=this.#s?.promise;return this.#s?.cancel(t),e?e.then(Or).catch(Or):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(t=>Ir(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===_y||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>si(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!fk(this.state.dataUpdatedAt,t)}onFocus(){this.observers.find(e=>e.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#s?.continue()}onOnline(){this.observers.find(e=>e.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#s?.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(e=>e!==t),this.observers.length||(this.#s&&(this.#i?this.#s.cancel({revert:!0}):this.#s.cancelRetry()),this.scheduleGc()),this.#n.notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#a({type:"invalidate"})}async fetch(t,e){if(this.state.fetchStatus!=="idle"&&this.#s?.status()!=="rejected"){if(this.state.data!==void 0&&e?.cancelRefetch)this.cancel({silent:!0});else if(this.#s)return this.#s.continueRetry(),this.#s.promise}if(t&&this.setOptions(t),!this.options.queryFn){const u=this.observers.find(f=>f.options.queryFn);u&&this.setOptions(u.options)}const n=new AbortController,r=u=>{Object.defineProperty(u,"signal",{enumerable:!0,get:()=>(this.#i=!0,n.signal)})},s=()=>{const u=hk(this.options,e),d=(()=>{const m={client:this.#r,queryKey:this.queryKey,meta:this.meta};return r(m),m})();return this.#i=!1,this.options.persister?this.options.persister(u,d,this):u(d)},l=(()=>{const u={fetchOptions:e,options:this.options,queryKey:this.queryKey,client:this.#r,state:this.state,fetchFn:s};return r(u),u})();this.options.behavior?.onFetch(l,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==l.fetchOptions?.meta)&&this.#a({type:"fetch",meta:l.fetchOptions?.meta}),this.#s=mk({initialPromise:e?.initialPromise,fn:l.fetchFn,onCancel:u=>{u instanceof lg&&u.revert&&this.setState({...this.#t,fetchStatus:"idle"}),n.abort()},onFail:(u,f)=>{this.#a({type:"failed",failureCount:u,error:f})},onPause:()=>{this.#a({type:"pause"})},onContinue:()=>{this.#a({type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0});try{const u=await this.#s.start();if(u===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(u),this.#n.config.onSuccess?.(u,this),this.#n.config.onSettled?.(u,this.state.error,this),u}catch(u){if(u instanceof lg){if(u.silent)return this.#s.promise;if(u.revert){if(this.state.data===void 0)throw u;return this.state.data}}throw this.#a({type:"error",error:u}),this.#n.config.onError?.(u,this),this.#n.config.onSettled?.(this.state.data,u,this),u}finally{this.scheduleGc()}}#a(t){const e=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...yk(n.data,this.options),fetchMeta:t.meta??null};case"success":const r={...n,...n1(t.data,t.dataUpdatedAt),dataUpdateCount:n.dataUpdateCount+1,...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=t.manual?r:void 0,r;case"error":const s=t.error;return{...n,error:s,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=e(this.state),Tn.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),this.#n.notify({query:this,type:"updated",action:t})})}};function yk(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:pk(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function n1(t,e){return{data:t,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function r1(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var OO=class extends lc{constructor(t,e){super(),this.options=e,this.#e=t,this.#a=null,this.#i=og(),this.bindMethods(),this.setOptions(e)}#e;#t=void 0;#n=void 0;#r=void 0;#s;#o;#i;#a;#p;#m;#c;#u;#l;#f;#d=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),s1(this.#t,this.options)?this.#h():this.updateResult(),this.#_())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return cg(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return cg(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#v(),this.#x(),this.#t.removeObserver(this)}setOptions(t){const e=this.options,n=this.#t;if(this.options=this.#e.defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Ir(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#w(),this.#t.setOptions(this.options),e._defaulted&&!sg(this.options,e)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const r=this.hasListeners();r&&i1(this.#t,n,this.options,e)&&this.#h(),this.updateResult(),r&&(this.#t!==n||Ir(this.options.enabled,this.#t)!==Ir(e.enabled,this.#t)||si(this.options.staleTime,this.#t)!==si(e.staleTime,this.#t))&&this.#g();const s=this.#y();r&&(this.#t!==n||Ir(this.options.enabled,this.#t)!==Ir(e.enabled,this.#t)||s!==this.#f)&&this.#b(s)}getOptimisticResult(t){const e=this.#e.getQueryCache().build(this.#e,t),n=this.createResult(e,t);return NO(this,n)&&(this.#r=n,this.#o=this.options,this.#s=this.#t.state),n}getCurrentResult(){return this.#r}trackResult(t,e){return new Proxy(t,{get:(n,r)=>(this.trackProp(r),e?.(r),r==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&this.#i.status==="pending"&&this.#i.reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(n,r))})}trackProp(t){this.#d.add(t)}getCurrentQuery(){return this.#t}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const e=this.#e.defaultQueryOptions(t),n=this.#e.getQueryCache().build(this.#e,e);return n.fetch().then(()=>this.createResult(n,e))}fetch(t){return this.#h({...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#r))}#h(t){this.#w();let e=this.#t.fetch(this.options,t);return t?.throwOnError||(e=e.catch(Or)),e}#g(){this.#v();const t=si(this.options.staleTime,this.#t);if(ro||this.#r.isStale||!rg(t))return;const n=fk(this.#r.dataUpdatedAt,t)+1;this.#u=Pi.setTimeout(()=>{this.#r.isStale||this.updateResult()},n)}#y(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#b(t){this.#x(),this.#f=t,!(ro||Ir(this.options.enabled,this.#t)===!1||!rg(this.#f)||this.#f===0)&&(this.#l=Pi.setInterval(()=>{(this.options.refetchIntervalInBackground||vy.isFocused())&&this.#h()},this.#f))}#_(){this.#g(),this.#b(this.#y())}#v(){this.#u&&(Pi.clearTimeout(this.#u),this.#u=void 0)}#x(){this.#l&&(Pi.clearInterval(this.#l),this.#l=void 0)}createResult(t,e){const n=this.#t,r=this.options,s=this.#r,a=this.#s,l=this.#o,f=t!==n?t.state:this.#n,{state:d}=t;let m={...d},p=!1,y;if(e._optimisticResults){const q=this.hasListeners(),H=!q&&s1(t,e),M=q&&i1(t,n,e,r);(H||M)&&(m={...m,...yk(d.data,t.options)}),e._optimisticResults==="isRestoring"&&(m.fetchStatus="idle")}let{error:g,errorUpdatedAt:v,status:w}=m;y=m.data;let E=!1;if(e.placeholderData!==void 0&&y===void 0&&w==="pending"){let q;s?.isPlaceholderData&&e.placeholderData===l?.placeholderData?(q=s.data,E=!0):q=typeof e.placeholderData=="function"?e.placeholderData(this.#c?.state.data,this.#c):e.placeholderData,q!==void 0&&(w="success",y=ag(s?.data,q,e),p=!0)}if(e.select&&y!==void 0&&!E)if(s&&y===a?.data&&e.select===this.#p)y=this.#m;else try{this.#p=e.select,y=e.select(y),y=ag(s?.data,y,e),this.#m=y,this.#a=null}catch(q){this.#a=q}this.#a&&(g=this.#a,y=this.#m,v=Date.now(),w="error");const k=m.fetchStatus==="fetching",C=w==="pending",T=w==="error",D=C&&k,N=y!==void 0,$={status:w,fetchStatus:m.fetchStatus,isPending:C,isSuccess:w==="success",isError:T,isInitialLoading:D,isLoading:D,data:y,dataUpdatedAt:m.dataUpdatedAt,error:g,errorUpdatedAt:v,failureCount:m.fetchFailureCount,failureReason:m.fetchFailureReason,errorUpdateCount:m.errorUpdateCount,isFetched:m.dataUpdateCount>0||m.errorUpdateCount>0,isFetchedAfterMount:m.dataUpdateCount>f.dataUpdateCount||m.errorUpdateCount>f.errorUpdateCount,isFetching:k,isRefetching:k&&!C,isLoadingError:T&&!N,isPaused:m.fetchStatus==="paused",isPlaceholderData:p,isRefetchError:T&&N,isStale:xy(t,e),refetch:this.refetch,promise:this.#i,isEnabled:Ir(e.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const q=Q=>{$.status==="error"?Q.reject($.error):$.data!==void 0&&Q.resolve($.data)},H=()=>{const Q=this.#i=$.promise=og();q(Q)},M=this.#i;switch(M.status){case"pending":t.queryHash===n.queryHash&&q(M);break;case"fulfilled":($.status==="error"||$.data!==M.value)&&H();break;case"rejected":($.status!=="error"||$.error!==M.reason)&&H();break}}return $}updateResult(){const t=this.#r,e=this.createResult(this.#t,this.options);if(this.#s=this.#t.state,this.#o=this.options,this.#s.data!==void 0&&(this.#c=this.#t),sg(e,t))return;this.#r=e;const n=()=>{if(!t)return!0;const{notifyOnChangeProps:r}=this.options,s=typeof r=="function"?r():r;if(s==="all"||!s&&!this.#d.size)return!0;const a=new Set(s??this.#d);return this.options.throwOnError&&a.add("error"),Object.keys(this.#r).some(l=>{const u=l;return this.#r[u]!==t[u]&&a.has(u)})};this.#S({listeners:n()})}#w(){const t=this.#e.getQueryCache().build(this.#e,this.options);if(t===this.#t)return;const e=this.#t;this.#t=t,this.#n=t.state,this.hasListeners()&&(e?.removeObserver(this),t.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#_()}#S(t){Tn.batch(()=>{t.listeners&&this.listeners.forEach(e=>{e(this.#r)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function IO(t,e){return Ir(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function s1(t,e){return IO(t,e)||t.state.data!==void 0&&cg(t,e,e.refetchOnMount)}function cg(t,e,n){if(Ir(e.enabled,t)!==!1&&si(e.staleTime,t)!=="static"){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&xy(t,e)}return!1}function i1(t,e,n,r){return(t!==e||Ir(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&xy(t,n)}function xy(t,e){return Ir(e.enabled,t)!==!1&&t.isStaleByTime(si(e.staleTime,t))}function NO(t,e){return!sg(t.getCurrentResult(),e)}function a1(t){return{onFetch:(e,n)=>{const r=e.options,s=e.fetchOptions?.meta?.fetchMore?.direction,a=e.state.data?.pages||[],l=e.state.data?.pageParams||[];let u={pages:[],pageParams:[]},f=0;const d=async()=>{let m=!1;const p=v=>{SO(v,()=>e.signal,()=>m=!0)},y=hk(e.options,e.fetchOptions),g=async(v,w,E)=>{if(m)return Promise.reject();if(w==null&&v.pages.length)return Promise.resolve(v);const C=(()=>{const R={client:e.client,queryKey:e.queryKey,pageParam:w,direction:E?"backward":"forward",meta:e.options.meta};return p(R),R})(),T=await y(C),{maxPages:D}=e.options,N=E?wO:xO;return{pages:N(v.pages,T,D),pageParams:N(v.pageParams,w,D)}};if(s&&a.length){const v=s==="backward",w=v?MO:o1,E={pages:a,pageParams:l},k=w(r,E);u=await g(E,k,v)}else{const v=t??a.length;do{const w=f===0?l[0]??r.initialPageParam:o1(r,u);if(f>0&&w==null)break;u=await g(u,w),f++}while(f<v)}return u};e.options.persister?e.fetchFn=()=>e.options.persister?.(d,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n):e.fetchFn=d}}}function o1(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function MO(t,{pages:e,pageParams:n}){return e.length>0?t.getPreviousPageParam?.(e[0],e,n[0],n):void 0}var DO=class extends gk{#e;#t;#n;#r;constructor(t){super(),this.#e=t.client,this.mutationId=t.mutationId,this.#n=t.mutationCache,this.#t=[],this.state=t.state||jO(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){this.#t.includes(t)||(this.#t.push(t),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){this.#t=this.#t.filter(e=>e!==t),this.scheduleGc(),this.#n.notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#n.remove(this))}continue(){return this.#r?.continue()??this.execute(this.state.variables)}async execute(t){const e=()=>{this.#s({type:"continue"})},n={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#r=mk({fn:()=>this.options.mutationFn?this.options.mutationFn(t,n):Promise.reject(new Error("No mutationFn found")),onFail:(a,l)=>{this.#s({type:"failed",failureCount:a,error:l})},onPause:()=>{this.#s({type:"pause"})},onContinue:e,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#n.canRun(this)});const r=this.state.status==="pending",s=!this.#r.canStart();try{if(r)e();else{this.#s({type:"pending",variables:t,isPaused:s}),await this.#n.config.onMutate?.(t,this,n);const l=await this.options.onMutate?.(t,n);l!==this.state.context&&this.#s({type:"pending",context:l,variables:t,isPaused:s})}const a=await this.#r.start();return await this.#n.config.onSuccess?.(a,t,this.state.context,this,n),await this.options.onSuccess?.(a,t,this.state.context,n),await this.#n.config.onSettled?.(a,null,this.state.variables,this.state.context,this,n),await this.options.onSettled?.(a,null,t,this.state.context,n),this.#s({type:"success",data:a}),a}catch(a){try{await this.#n.config.onError?.(a,t,this.state.context,this,n)}catch(l){Promise.reject(l)}try{await this.options.onError?.(a,t,this.state.context,n)}catch(l){Promise.reject(l)}try{await this.#n.config.onSettled?.(void 0,a,this.state.variables,this.state.context,this,n)}catch(l){Promise.reject(l)}try{await this.options.onSettled?.(void 0,a,t,this.state.context,n)}catch(l){Promise.reject(l)}throw this.#s({type:"error",error:a}),a}finally{this.#n.runNext(this)}}#s(t){const e=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=e(this.state),Tn.batch(()=>{this.#t.forEach(n=>{n.onMutationUpdate(t)}),this.#n.notify({mutation:this,type:"updated",action:t})})}};function jO(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var LO=class extends lc{constructor(t={}){super(),this.config=t,this.#e=new Set,this.#t=new Map,this.#n=0}#e;#t;#n;build(t,e,n){const r=new DO({client:t,mutationCache:this,mutationId:++this.#n,options:t.defaultMutationOptions(e),state:n});return this.add(r),r}add(t){this.#e.add(t);const e=Mu(t);if(typeof e=="string"){const n=this.#t.get(e);n?n.push(t):this.#t.set(e,[t])}this.notify({type:"added",mutation:t})}remove(t){if(this.#e.delete(t)){const e=Mu(t);if(typeof e=="string"){const n=this.#t.get(e);if(n)if(n.length>1){const r=n.indexOf(t);r!==-1&&n.splice(r,1)}else n[0]===t&&this.#t.delete(e)}}this.notify({type:"removed",mutation:t})}canRun(t){const e=Mu(t);if(typeof e=="string"){const r=this.#t.get(e)?.find(s=>s.state.status==="pending");return!r||r===t}else return!0}runNext(t){const e=Mu(t);return typeof e=="string"?this.#t.get(e)?.find(r=>r!==t&&r.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){Tn.batch(()=>{this.#e.forEach(t=>{this.notify({type:"removed",mutation:t})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(t){const e={exact:!0,...t};return this.getAll().find(n=>Xx(e,n))}findAll(t={}){return this.getAll().filter(e=>Xx(t,e))}notify(t){Tn.batch(()=>{this.listeners.forEach(e=>{e(t)})})}resumePausedMutations(){const t=this.getAll().filter(e=>e.state.isPaused);return Tn.batch(()=>Promise.all(t.map(e=>e.continue().catch(Or))))}};function Mu(t){return t.options.scope?.id}var zO=class extends lc{constructor(t={}){super(),this.config=t,this.#e=new Map}#e;build(t,e,n){const r=e.queryKey,s=e.queryHash??by(r,e);let a=this.get(s);return a||(a=new RO({client:t,queryKey:r,queryHash:s,options:t.defaultQueryOptions(e),state:n,defaultOptions:t.getQueryDefaults(r)}),this.add(a)),a}add(t){this.#e.has(t.queryHash)||(this.#e.set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const e=this.#e.get(t.queryHash);e&&(t.destroy(),e===t&&this.#e.delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Tn.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return this.#e.get(t)}getAll(){return[...this.#e.values()]}find(t){const e={exact:!0,...t};return this.getAll().find(n=>Wx(e,n))}findAll(t={}){const e=this.getAll();return Object.keys(t).length>0?e.filter(n=>Wx(t,n)):e}notify(t){Tn.batch(()=>{this.listeners.forEach(e=>{e(t)})})}onFocus(){Tn.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Tn.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},PO=class{#e;#t;#n;#r;#s;#o;#i;#a;constructor(t={}){this.#e=t.queryCache||new zO,this.#t=t.mutationCache||new LO,this.#n=t.defaultOptions||{},this.#r=new Map,this.#s=new Map,this.#o=0}mount(){this.#o++,this.#o===1&&(this.#i=vy.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#a=_f.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#o--,this.#o===0&&(this.#i?.(),this.#i=void 0,this.#a?.(),this.#a=void 0)}isFetching(t){return this.#e.findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return this.#t.findAll({...t,status:"pending"}).length}getQueryData(t){const e=this.defaultQueryOptions({queryKey:t});return this.#e.get(e.queryHash)?.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=this.#e.build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(si(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return this.#e.findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),a=this.#e.get(r.queryHash)?.state.data,l=bO(e,a);if(l!==void 0)return this.#e.build(this,r).setData(l,{...n,manual:!0})}setQueriesData(t,e,n){return Tn.batch(()=>this.#e.findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){const e=this.defaultQueryOptions({queryKey:t});return this.#e.get(e.queryHash)?.state}removeQueries(t){const e=this.#e;Tn.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=this.#e;return Tn.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=Tn.batch(()=>this.#e.findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(Or).catch(Or)}invalidateQueries(t,e={}){return Tn.batch(()=>(this.#e.findAll(t).forEach(n=>{n.invalidate()}),t?.refetchType==="none"?Promise.resolve():this.refetchQueries({...t,type:t?.refetchType??t?.type??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=Tn.batch(()=>this.#e.findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let a=s.fetch(void 0,n);return n.throwOnError||(a=a.catch(Or)),s.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(r).then(Or)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=this.#e.build(this,e);return n.isStaleByTime(si(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Or).catch(Or)}fetchInfiniteQuery(t){return t.behavior=a1(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Or).catch(Or)}ensureInfiniteQueryData(t){return t.behavior=a1(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return _f.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#n}setDefaultOptions(t){this.#n=t}setQueryDefaults(t,e){this.#r.set(Cs(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...this.#r.values()],n={};return e.forEach(r=>{Kl(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){this.#s.set(Cs(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...this.#s.values()],n={};return e.forEach(r=>{Kl(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...this.#n.queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=by(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===_y&&(e.enabled=!1),e}defaultMutationOptions(t){return t?._defaulted?t:{...this.#n.mutations,...t?.mutationKey&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},BO=Z.createContext(void 0),$O=({client:t,children:e})=>(Z.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),x.jsx(BO.Provider,{value:t,children:e})),lm={exports:{}},cm={};var l1;function UO(){if(l1)return cm;l1=1;var t=cd().__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;return cm.c=function(e){return t.H.useMemoCache(e)},cm}var c1;function qO(){return c1||(c1=1,lm.exports=UO()),lm.exports}var $e=qO();class lo{}class so extends lo{constructor(e,n){super(),this.collection=e,this.alias=n,this.type="collectionRef"}}class Mr extends lo{constructor(e,n){super(),this.query=e,this.alias=n,this.type="queryRef"}}class Bn extends lo{constructor(e){super(),this.path=e,this.type="ref"}}class Wn extends lo{constructor(e){super(),this.value=e,this.type="val"}}class jr extends lo{constructor(e,n){super(),this.name=e,this.args=n,this.type="func"}}class bk extends lo{constructor(e,n){super(),this.name=e,this.args=n,this.type="agg"}}function wy(t){return t instanceof bk||t instanceof jr||t instanceof Bn||t instanceof Wn}function Sy(t){return typeof t=="object"&&"expression"in t?t.expression:t}function u1(t){return typeof t=="object"&&"expression"in t?t.expression:t}function f1(t){return typeof t=="object"&&"expression"in t&&t.residual===!0}function FO(t){return{expression:t,residual:!0}}function VO(t,e){if(t.from.alias===e)return t.from;for(const n of t.join||[])if(n.from.alias===e)return n.from}function Zl(t,e,n){if(e.path.length!==0){if(e.path.length===1){const r=e.path[0];if(t.select){const s=t.select[r];if(s&&s.type==="ref")return Zl(t,s,n)}return{collection:n,path:[r]}}if(e.path.length>1){const[r,...s]=e.path,a=VO(t,r);return a?a.type==="queryRef"?Zl(a.query,new Bn(s),n):{collection:a.collection,path:s}:void 0}}}class yr extends Error{constructor(e){super(e),this.name="TanStackDBError"}}class d1 extends yr{constructor(e,n,r){const s=`${e==="insert"?"Insert":"Update"} validation failed: ${n.map(a=>`
- ${a.message} - path: ${a.path}`).join("")}`;super(r||s),this.name="SchemaValidationError",this.type=e,this.issues=n}}class cc extends yr{constructor(e){super(e),this.name="CollectionConfigurationError"}}class HO extends cc{constructor(){super("Collection requires a config")}}class GO extends cc{constructor(){super("Collection requires a sync config")}}class KO extends cc{constructor(){super("Schema must implement the standard-schema interface")}}class h1 extends cc{constructor(){super("Schema validation must be synchronous")}}class uc extends yr{constructor(e){super(e),this.name="CollectionStateError"}}class ZO extends uc{constructor(e,n){super(`Cannot perform ${e} on collection "${n}" - collection is in error state. Try calling cleanup() and restarting the collection.`)}}class JO extends uc{constructor(e,n,r){super(`Invalid collection status transition from "${e}" to "${n}" for collection "${r}"`)}}class QO extends uc{constructor(){super("Collection is in error state")}}class YO extends uc{constructor(){super("Active subscribers count is negative - this should never happen")}}class Xr extends yr{constructor(e){super(e),this.name="CollectionOperationError"}}class WO extends Xr{constructor(e){super(`An object was created without a defined key: ${JSON.stringify(e)}`)}}class XO extends Xr{constructor(e,n){const r=e===null?"null":typeof e;super(`getKey returned an invalid key type. Expected string or number, but got ${r}: ${JSON.stringify(e)}. Item: ${JSON.stringify(n)}`)}}class eI extends Xr{constructor(e){super(`Cannot insert document with ID "${e}" because it already exists in the collection`)}}class tI extends Xr{constructor(e,n,r){const s=`Cannot insert document with key "${e}" from sync because it already exists in the collection "${n}"`;r?.hasCustomGetKey&&r.hasJoins?super(`${s}. This collection uses a custom getKey with joined queries. Joined queries can produce multiple rows with the same key when relationships are not 1:1. Consider: (1) using a composite key in your getKey function (e.g., \`\${item.key1}-\${item.key2}\`), (2) ensuring your join produces unique rows per key, or (3) removing the custom getKey to use the default composite key behavior.`):super(s)}}class nI extends Xr{constructor(){super("The first argument to update is missing")}}class rI extends Xr{constructor(){super("No keys were passed to update")}}class sI extends Xr{constructor(e){super(`The key "${e}" was passed to update but an object for this key was not found in the collection`)}}class iI extends Xr{constructor(e,n){super(`Updating the key of an item is not allowed. Original key: "${e}", Attempted new key: "${n}". Please delete the old item and create a new one if a key change is necessary.`)}}class aI extends Xr{constructor(){super("No keys were passed to delete")}}class oI extends Xr{constructor(e){super(`Collection.delete was called with key '${e}' but there is no item in the collection with this key`)}}class ky extends yr{constructor(e){super(e),this.name="MissingHandlerError"}}class lI extends ky{constructor(){super("Collection.insert called directly (not within an explicit transaction) but no 'onInsert' handler is configured.")}}class cI extends ky{constructor(){super("Collection.update called directly (not within an explicit transaction) but no 'onUpdate' handler is configured.")}}class uI extends ky{constructor(){super("Collection.delete called directly (not within an explicit transaction) but no 'onDelete' handler is configured.")}}class ai extends yr{constructor(e){super(e),this.name="TransactionError"}}class fI extends ai{constructor(){super("mutationFn is required when creating a transaction")}}class dI extends ai{constructor(){super("You can no longer call .mutate() as the transaction is no longer pending")}}class hI extends ai{constructor(){super("You can no longer call .rollback() as the transaction is already completed")}}class pI extends ai{constructor(){super("You can no longer call .commit() as the transaction is no longer pending")}}class p1 extends ai{constructor(){super("No pending sync transaction to write to")}}class m1 extends ai{constructor(){super("The pending sync transaction is already committed, you can't still write to it.")}}class mI extends ai{constructor(){super("No pending sync transaction to commit")}}class gI extends ai{constructor(){super("The pending sync transaction is already committed, you can't commit it again.")}}class co extends yr{constructor(e){super(e),this.name="QueryBuilderError"}}class yI extends co{constructor(e){super(`Only one source is allowed in the ${e}`)}}class bI extends co{constructor(e){super(`A sub query passed to a ${e} must have a from clause itself`)}}class _I extends co{constructor(e){super(`Invalid source for live query: The value provided for alias "${e}" is not a Collection or subquery. Live queries only accept Collection instances or subqueries. Please ensure you're passing a valid Collection or QueryBuilder, not a plain array or other data type.`)}}class Du extends co{constructor(e,n){super(`Invalid source for ${e}: Expected an object with a single key-value pair like { alias: collection }. For example: .from({ todos: todosCollection }). Got: ${n}`)}}class vI extends co{constructor(){super("Join condition must be an equality expression")}}class xI extends co{constructor(){super("Query must have a from clause")}}class br extends yr{constructor(e){super(e),this.name="QueryCompilationError"}}class wI extends br{constructor(){super("DISTINCT requires a SELECT clause.")}}class SI extends br{constructor(){super("HAVING clause requires GROUP BY clause")}}class kI extends br{constructor(){super("LIMIT and OFFSET require an ORDER BY clause to ensure deterministic results")}}class _k extends br{constructor(e,n,r){const s=n?`alias "${e}" (collection "${n}")`:`collection "${e}"`,a=r?.length?`. Available keys: ${r.join(", ")}`:"";super(`Input for ${s} not found in inputs map${a}`)}}class EI extends br{constructor(e,n){super(`Subquery uses alias "${e}" which is already used in the parent query. Each alias must be unique across parent and subquery contexts. Parent query aliases: ${n.join(", ")}. Please rename "${e}" in either the parent query or subquery to avoid conflicts.`)}}class CI extends br{constructor(e){super(`Unsupported FROM type: ${e}`)}}class TI extends br{constructor(e){super(`Unknown expression type: ${e}`)}}class AI extends br{constructor(){super("Reference path cannot be empty")}}class RI extends br{constructor(e){super(`Unknown function: ${e}`)}}class g1 extends br{constructor(e){super(`Collection "${e}" not found during compilation of join`)}}class Ki extends yr{constructor(e){super(e),this.name="JoinError"}}class OI extends Ki{constructor(e){super(`Unsupported join type: ${e}`)}}class II extends Ki{constructor(e){super(`Invalid join condition: both expressions refer to the same source "${e}"`)}}class NI extends Ki{constructor(){super("Invalid join condition: expressions must reference source aliases")}}class MI extends Ki{constructor(e){super(`Invalid join condition: left expression refers to an unavailable source "${e}"`)}}class DI extends Ki{constructor(e){super(`Invalid join condition: right expression does not refer to the joined source "${e}"`)}}class jI extends Ki{constructor(){super("Invalid join condition")}}class LI extends Ki{constructor(e){super(`Unsupported join source type: ${e}`)}}class ud extends yr{constructor(e){super(e),this.name="GroupByError"}}class zI extends ud{constructor(e){super(`Non-aggregate expression '${e}' in SELECT must also appear in GROUP BY clause`)}}class PI extends ud{constructor(e){super(`Unsupported aggregate function: ${e}`)}}class BI extends ud{constructor(e){super(`Aggregate function in HAVING clause must also be in SELECT clause: ${e}`)}}class $I extends ud{constructor(e){super(`Unknown expression type in HAVING clause: ${e}`)}}class y1 extends yr{constructor(e,n){const r=n instanceof Error?n.message:String(n);super(`Collection "${e}" sync cleanup function threw an error: ${r}`),this.name="SyncCleanupError"}}class UI extends yr{constructor(e){super(e),this.name="QueryOptimizerError"}}class qI extends UI{constructor(){super("Cannot combine empty expression list")}}class FI extends br{constructor(e,n,r,s){super(`Internal error: subscription for alias '${e}' (remapped from '${n}', collection '${r}') is missing in join pipeline. Available aliases: ${s.join(", ")}. This indicates a bug in alias tracking.`)}}class VI extends br{constructor(e){super(`Internal error: compiler returned aliases without inputs: ${e.join(", ")}. This indicates a bug in query compilation. Please report this issue.`)}}class HI extends br{constructor(){super("setWindow() can only be called on collections with an ORDER BY clause. Add .orderBy() to your query to enable window movement.")}}const um=new WeakMap;let GI=1;function b1(t){if(um.has(t))return um.get(t);const e=GI++;return um.set(t,e),e}const Ey=(t,e,n)=>{const{nulls:r}=n;if(t==null&&e==null)return 0;if(t==null)return r==="first"?-1:1;if(e==null)return r==="first"?1:-1;if(typeof t=="string"&&typeof e=="string"&&n.stringSort==="locale")return t.localeCompare(e,n.locale,n.localeOptions);if(Array.isArray(t)&&Array.isArray(e)){for(let l=0;l<Math.min(t.length,e.length);l++){const u=Ey(t[l],e[l],n);if(u!==0)return u}return t.length-e.length}if(t instanceof Date&&e instanceof Date)return t.getTime()-e.getTime();const s=typeof t=="object",a=typeof e=="object";if(s||a){if(s&&a){const l=b1(t),u=b1(e);return l-u}if(s)return 1;if(a)return-1}return t<e?-1:t>e?1:0},KI=(t,e,n)=>Ey(e,t,{...n,nulls:n.nulls==="first"?"last":"first"});function vf(t){return(e,n)=>t.direction==="asc"?Ey(e,n,t):KI(e,n,t)}const ug=vf({direction:"asc",nulls:"first",stringSort:"locale"});function ZI(t,e){if(t.byteLength!==e.byteLength)return!1;for(let n=0;n<t.byteLength;n++)if(t[n]!==e[n])return!1;return!0}const JI=128;function ks(t){return t instanceof Date?t.getTime():(typeof Buffer<"u"&&t instanceof Buffer||t instanceof Uint8Array)&&t.byteLength<=JI?`__u8__${Array.from(t).join(",")}`:t}function QI(t,e){if(t===e)return!0;const n=typeof Buffer<"u"&&t instanceof Buffer||t instanceof Uint8Array,r=typeof Buffer<"u"&&e instanceof Buffer||e instanceof Uint8Array;return n&&r?ZI(t,e):!1}function un(t){return t==null}function Wa(t){return t===!0}function Xn(t,e=!1){return Ty(t,e)}function Cy(t){return Ty(t,!0)}function Ty(t,e){switch(t.type){case"val":{const n=t.value;return()=>n}case"ref":return e?WI(t):YI(t);case"func":return XI(t,e);default:throw new TI(t.type)}}function YI(t){const[e,...n]=t.path;if(!e)throw new AI;if(n.length===0)return r=>r[e];if(n.length===1){const r=n[0];return s=>s[e]?.[r]}else return r=>{const s=r[e];if(s===void 0)return;let a=s;for(const l of n){if(a==null)return a;a=a[l]}return a}}function WI(t){const e=t.path;return n=>{let r=n;for(const s of e){if(r==null)return r;r=r[s]}return r}}function XI(t,e){const n=t.args.map(r=>Ty(r,e));switch(t.name){case"eq":{const r=n[0],s=n[1];return a=>{const l=ks(r(a)),u=ks(s(a));return un(l)||un(u)?null:QI(l,u)}}case"gt":{const r=n[0],s=n[1];return a=>{const l=r(a),u=s(a);return un(l)||un(u)?null:l>u}}case"gte":{const r=n[0],s=n[1];return a=>{const l=r(a),u=s(a);return un(l)||un(u)?null:l>=u}}case"lt":{const r=n[0],s=n[1];return a=>{const l=r(a),u=s(a);return un(l)||un(u)?null:l<u}}case"lte":{const r=n[0],s=n[1];return a=>{const l=r(a),u=s(a);return un(l)||un(u)?null:l<=u}}case"and":return r=>{let s=!1;for(const a of n){const l=a(r);if(l===!1)return!1;un(l)&&(s=!0)}return s?null:!0};case"or":return r=>{let s=!1;for(const a of n){const l=a(r);if(l===!0)return!0;un(l)&&(s=!0)}return s?null:!1};case"not":{const r=n[0];return s=>{const a=r(s);return un(a)?null:!a}}case"in":{const r=n[0],s=n[1];return a=>{const l=r(a),u=s(a);return un(l)?null:Array.isArray(u)?u.includes(l):!1}}case"like":{const r=n[0],s=n[1];return a=>{const l=r(a),u=s(a);return un(l)||un(u)?null:_1(l,u,!1)}}case"ilike":{const r=n[0],s=n[1];return a=>{const l=r(a),u=s(a);return un(l)||un(u)?null:_1(l,u,!0)}}case"upper":{const r=n[0];return s=>{const a=r(s);return typeof a=="string"?a.toUpperCase():a}}case"lower":{const r=n[0];return s=>{const a=r(s);return typeof a=="string"?a.toLowerCase():a}}case"length":{const r=n[0];return s=>{const a=r(s);return typeof a=="string"||Array.isArray(a)?a.length:0}}case"concat":return r=>n.map(s=>{const a=s(r);try{return String(a??"")}catch{try{return JSON.stringify(a)||""}catch{return"[object]"}}}).join("");case"coalesce":return r=>{for(const s of n){const a=s(r);if(a!=null)return a}return null};case"add":{const r=n[0],s=n[1];return a=>{const l=r(a),u=s(a);return(l??0)+(u??0)}}case"subtract":{const r=n[0],s=n[1];return a=>{const l=r(a),u=s(a);return(l??0)-(u??0)}}case"multiply":{const r=n[0],s=n[1];return a=>{const l=r(a),u=s(a);return(l??0)*(u??0)}}case"divide":{const r=n[0],s=n[1];return a=>{const l=r(a),f=s(a)??0;return f!==0?(l??0)/f:null}}case"isUndefined":{const r=n[0];return s=>r(s)===void 0}case"isNull":{const r=n[0];return s=>r(s)===null}default:throw new RI(t.name)}}function _1(t,e,n){if(typeof t!="string"||typeof e!="string")return!1;const r=n?t.toLowerCase():t;let a=(n?e.toLowerCase():e).replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return a=a.replace(/%/g,".*"),a=a.replace(/_/g,"."),new RegExp(`^${a}$`).test(r)}function Ur(t,e){return tf(t,e,new Map)}function tf(t,e,n){if(t===e)return!0;if(t==null||e==null||typeof t!=typeof e)return!1;if(t instanceof Date)return e instanceof Date?t.getTime()===e.getTime():!1;if(t instanceof RegExp)return e instanceof RegExp?t.source===e.source&&t.flags===e.flags:!1;if(t instanceof Map){if(!(e instanceof Map)||t.size!==e.size)return!1;if(n.has(t))return n.get(t)===e;n.set(t,e);const s=Array.from(t.entries()).every(([a,l])=>e.has(a)&&tf(l,e.get(a),n));return n.delete(t),s}if(t instanceof Set){if(!(e instanceof Set)||t.size!==e.size)return!1;if(n.has(t))return n.get(t)===e;n.set(t,e);const r=Array.from(t),s=Array.from(e);if(r.every(l=>typeof l!="object"))return n.delete(t),r.every(l=>e.has(l));const a=r.length===s.length;return n.delete(t),a}if(ArrayBuffer.isView(t)&&ArrayBuffer.isView(e)&&!(t instanceof DataView)&&!(e instanceof DataView)){const r=t,s=e;if(r.length!==s.length)return!1;for(let a=0;a<r.length;a++)if(r[a]!==s[a])return!1;return!0}if(xf(t)&&xf(e)){const r=fg(t),s=fg(e);return r!==s?!1:typeof t.equals=="function"?t.equals(e):t.toString()===e.toString()}if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;if(n.has(t))return n.get(t)===e;n.set(t,e);const r=t.every((s,a)=>tf(s,e[a],n));return n.delete(t),r}if(typeof t=="object"){if(n.has(t))return n.get(t)===e;n.set(t,e);const r=Object.keys(t),s=Object.keys(e);if(r.length!==s.length)return n.delete(t),!1;const a=r.every(l=>l in e&&tf(t[l],e[l],n));return n.delete(t),a}return!1}const eN=["Temporal.Duration","Temporal.Instant","Temporal.PlainDate","Temporal.PlainDateTime","Temporal.PlainMonthDay","Temporal.PlainTime","Temporal.PlainYearMonth","Temporal.ZonedDateTime"];function fg(t){return t[Symbol.toStringTag]}function xf(t){const e=fg(t);return typeof e=="string"&&eN.includes(e)}const Ay={direction:"asc",nulls:"first",stringSort:"locale"};class tN{constructor(e){this.originalIndex=e}lookup(e,n){const r=e==="gt"?"lt":e==="gte"?"lte":e==="lt"?"gt":e==="lte"?"gte":e;return this.originalIndex.lookup(r,n)}rangeQuery(e={}){return this.originalIndex.rangeQueryReversed(e)}rangeQueryReversed(e={}){return this.originalIndex.rangeQuery(e)}take(e,n,r){return this.originalIndex.takeReversed(e,n,r)}takeReversed(e,n,r){return this.originalIndex.take(e,n,r)}get orderedEntriesArray(){return this.originalIndex.orderedEntriesArrayReversed}get orderedEntriesArrayReversed(){return this.originalIndex.orderedEntriesArray}supports(e){return this.originalIndex.supports(e)}matchesField(e){return this.originalIndex.matchesField(e)}matchesCompareOptions(e){return this.originalIndex.matchesCompareOptions(e)}matchesDirection(e){return this.originalIndex.matchesDirection(e)}getStats(){return this.originalIndex.getStats()}add(e,n){this.originalIndex.add(e,n)}remove(e,n){this.originalIndex.remove(e,n)}update(e,n,r){this.originalIndex.update(e,n,r)}build(e){this.originalIndex.build(e)}clear(){this.originalIndex.clear()}get keyCount(){return this.originalIndex.keyCount}equalityLookup(e){return this.originalIndex.equalityLookup(e)}inArrayLookup(e){return this.originalIndex.inArrayLookup(e)}get indexedKeysSet(){return this.originalIndex.indexedKeysSet}get valueMapData(){return this.originalIndex.valueMapData}}function fc(t,e,n){const r=n??{...Ay,...t.compareOptions};for(const s of t.indexes.values())if(s.matchesField(e)&&s.matchesCompareOptions(r))return s.matchesDirection(r.direction)?s:new tN(s)}function nN(t){if(t.length===0)return new Set;if(t.length===1)return new Set(t[0]);let e=new Set(t[0]);for(let n=1;n<t.length;n++){const r=new Set;for(const s of e)t[n].has(s)&&r.add(s);e=r}return e}function rN(t){const e=new Set;for(const n of t)for(const r of n)e.add(r);return e}function sN(t,e){return Ry(t,e)}function Ry(t,e){if(t.type==="func")switch(t.name){case"eq":case"gt":case"gte":case"lt":case"lte":return aN(t,e);case"and":return oN(t,e);case"or":return lN(t,e);case"in":return cN(t,e)}return{canOptimize:!1,matchingKeys:new Set}}function iN(t,e){if(t.type!=="func"||t.args.length<2)return{canOptimize:!1,matchingKeys:new Set};const n=new Map;for(const r of t.args)if(r.type==="func"&&["gt","gte","lt","lte"].includes(r.name)){const s=r;if(s.args.length===2){const a=s.args[0],l=s.args[1];let u=null,f=null,d=s.name;if(a.type==="ref"&&l.type==="val")u=a,f=l;else if(a.type==="val"&&l.type==="ref")switch(u=l,f=a,d){case"gt":d="lt";break;case"gte":d="lte";break;case"lt":d="gt";break;case"lte":d="gte";break}if(u&&f){const p=u.path.join("."),y=f.value;n.has(p)||n.set(p,[]),n.get(p).push({operation:d,value:y})}}}for(const[r,s]of n)if(s.length>=2){const a=r.split("."),l=fc(e,a);if(l&&l.supports("gt")&&l.supports("lt")){let u,f,d=!0,m=!0;for(const{operation:y,value:g}of s)switch(y){case"gt":(u===void 0||g>u)&&(u=g,d=!1);break;case"gte":(u===void 0||g>u)&&(u=g,d=!0);break;case"lt":(f===void 0||g<f)&&(f=g,m=!1);break;case"lte":(f===void 0||g<f)&&(f=g,m=!0);break}return{canOptimize:!0,matchingKeys:l.rangeQuery({from:u,to:f,fromInclusive:d,toInclusive:m})}}}return{canOptimize:!1,matchingKeys:new Set}}function aN(t,e){if(t.type!=="func"||t.args.length!==2)return{canOptimize:!1,matchingKeys:new Set};const n=t.args[0],r=t.args[1];let s=null,a=null,l=t.name;if(n.type==="ref"&&r.type==="val")s=n,a=r;else if(n.type==="val"&&r.type==="ref")switch(s=r,a=n,l){case"gt":l="lt";break;case"gte":l="lte";break;case"lt":l="gt";break;case"lte":l="gte";break}if(s&&a){const u=s.path,f=fc(e,u);if(f){const d=a.value,m=l;return f.supports(m)?{canOptimize:!0,matchingKeys:f.lookup(m,d)}:{canOptimize:!1,matchingKeys:new Set}}}return{canOptimize:!1,matchingKeys:new Set}}function oN(t,e){if(t.type!=="func"||t.args.length<2)return{canOptimize:!1,matchingKeys:new Set};const n=iN(t,e);if(n.canOptimize)return n;const r=[];for(const s of t.args){const a=Ry(s,e);a.canOptimize&&r.push(a)}if(r.length>0){const s=r.map(l=>l.matchingKeys);return{canOptimize:!0,matchingKeys:nN(s)}}return{canOptimize:!1,matchingKeys:new Set}}function lN(t,e){if(t.type!=="func"||t.args.length<2)return{canOptimize:!1,matchingKeys:new Set};const n=[];for(const r of t.args){const s=Ry(r,e);s.canOptimize&&n.push(s)}if(n.length>0){const r=n.map(a=>a.matchingKeys);return{canOptimize:!0,matchingKeys:rN(r)}}return{canOptimize:!1,matchingKeys:new Set}}function cN(t,e){if(t.type!=="func"||t.args.length!==2)return{canOptimize:!1,matchingKeys:new Set};const n=t.args[0],r=t.args[1];if(n.type==="ref"&&r.type==="val"&&Array.isArray(r.value)){const s=n.path,a=r.value,l=fc(e,s);if(l){if(l.supports("in"))return{canOptimize:!0,matchingKeys:l.lookup("in",a)};if(l.supports("eq")){const u=new Set;for(const f of a){const d=l.lookup("eq",f);for(const m of d)u.add(m)}return{canOptimize:!0,matchingKeys:u}}}}return{canOptimize:!1,matchingKeys:new Set}}class uN extends Map{constructor(e,n){super(n),this.defaultValue=e}get(e){return this.has(e)?super.get(e):this.defaultValue()}update(e,n){const r=this.get(e),s=n(r);return this.set(e,s),s}}const fm=3e4;function dm(t,e){if(e.length<=fm)t.push(...e);else for(let n=0;n<e.length;n+=fm){const r=e.slice(n,n+fm);t.push(...r)}}function fN(t,e,n){let r=0,s=t.length;for(;r<s;){const a=Math.floor((r+s)/2),l=n(t[a],e);if(l<0)r=a+1;else if(l>0)s=a;else return a}return r}class dN{constructor(){this.objectIds=new WeakMap,this.nextId=0}getId(e){if(typeof e!="object"||e===null){const n=String(e);let r=0;for(let s=0;s<n.length;s++){const a=n.charCodeAt(s);r=(r<<5)-r+a,r=r&r}return r}return this.objectIds.has(e)||this.objectIds.set(e,this.nextId++),this.objectIds.get(e)}getStringId(e){return e===null?"null":e===void 0?"undefined":typeof e!="object"?`str_${String(e)}`:`obj_${this.getId(e)}`}}const hm=new dN;function hN(t,e){const[n,r]=t,[s,a]=e,l=[...ju(n,Math.min(r,s)),...ju(Math.max(n,a),r)],u=[...ju(s,Math.min(a,n)),...ju(Math.max(s,r),a)];return{onlyInA:l,onlyInB:u}}function ju(t,e){const n=[];for(let r=t;r<e;r++)n.push(r);return n}function wf(t,e){return typeof t==typeof e?t<e?-1:t>e?1:0:typeof t=="string"?-1:1}const pN=Sn(),mN=Sn(),gN=Sn(),yN=Sn(),bN=Sn();function Sn(){return Math.random()*(2**31-1)>>>0}const vk=new ArrayBuffer(8),_N=new DataView(vk),Ws=new Uint8Array(vk);class fd{constructor(){this.hash=pN,this.length=0,this.carry=0,this.carryBytes=0}_mix(e){e=Math.imul(e,3432918353),e=e<<15|e>>>17,e=Math.imul(e,461845907),this.hash^=e,this.hash=this.hash<<13|this.hash>>>19,this.hash=Math.imul(this.hash,5)+3864292196}writeByte(e){this.carry|=(e&255)<<8*this.carryBytes,this.carryBytes++,this.length++,this.carryBytes===4&&(this._mix(this.carry>>>0),this.carry=0,this.carryBytes=0)}update(e){switch(typeof e){case"symbol":{this.update(bN);const n=e.description;if(!n)return;for(let r=0;r<n.length;r++){const s=n.charCodeAt(r);this.writeByte(s&255),this.writeByte(s>>>8&255)}return}case"string":this.update(mN);for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);this.writeByte(r&255),this.writeByte(r>>>8&255)}return;case"number":_N.setFloat64(0,e,!0),this.writeByte(Ws[0]),this.writeByte(Ws[1]),this.writeByte(Ws[2]),this.writeByte(Ws[3]),this.writeByte(Ws[4]),this.writeByte(Ws[5]),this.writeByte(Ws[6]),this.writeByte(Ws[7]);return;case"bigint":{let n=e;for(n<0n?(n=-n,this.update(yN)):this.update(gN);n>0n;)this.writeByte(Number(n&0xffn)),n>>=8n;e===0n&&this.writeByte(0);return}default:throw new TypeError(`Unsupported input type: ${typeof e}`)}}digest(){if(this.carryBytes>0){let e=this.carry>>>0;e=Math.imul(e,3432918353),e=e<<15|e>>>17,e=Math.imul(e,461845907),this.hash^=e}return this.hash^=this.length,this.hash^=this.hash>>>16,this.hash=Math.imul(this.hash,2246822507),this.hash^=this.hash>>>13,this.hash=Math.imul(this.hash,3266489909),this.hash^=this.hash>>>16,this.hash>>>0}}const vN=Sn(),xN=Sn(),wN=Sn(),SN=Sn(),kN=Sn(),EN=Sn(),CN=Sn(),TN=Sn(),AN=Sn(),RN=Sn(),ON=Sn(),IN=Sn(),NN=128,Jl=new WeakMap;function Ln(t){const e=new fd;return xk(e,t),e.digest()}function MN(t){const e=Jl.get(t);if(e!==void 0)return e;let n;if(t instanceof Date)n=DN(t);else if(typeof Buffer<"u"&&t instanceof Buffer||t instanceof Uint8Array)if(t.byteLength<=NN)n=jN(t);else return dg(t);else{if(t instanceof File)return dg(t);{let r=t,s=TN;t instanceof Array&&(s=AN),t instanceof Map&&(s=RN,r=[...t.entries()]),t instanceof Set&&(s=ON,r=[...t.entries()]),n=LN(r,s)}}return Jl.set(t,n),n}function DN(t){const e=new fd;return e.update(CN),e.update(t.getTime()),e.digest()}function jN(t){const e=new fd;e.update(IN),e.update(t.byteLength);for(let n=0;n<t.byteLength;n++)e.writeByte(t[n]);return e.digest()}function LN(t,e){const n=new fd;n.update(e);const r=Object.keys(t);r.sort(PN);for(const s of r)n.update(kN),n.update(s),xk(n,t[s]);return n.digest()}function xk(t,e){if(e===null){t.update(wN);return}switch(typeof e){case"undefined":t.update(SN);return;case"boolean":t.update(e?vN:xN);return;case"number":t.update(isNaN(e)?NaN:e===0?0:e);return;case"bigint":case"string":case"symbol":t.update(e);return;case"object":t.update(zN(e));return;case"function":t.update(dg(e));return;default:console.warn(`Ignored input during hashing because it is of type ${typeof e} which is not supported`)}}function zN(t){let e=Jl.get(t);return e===void 0&&(e=MN(t)),e}let v1=1;function dg(t){let e=Jl.get(t);return e===void 0&&(e=v1^EN,v1++,Jl.set(t,e)),e}function PN(t,e){return t.localeCompare(e)}class Xt{#e;constructor(e=[]){this.#e=e}toString(e=!1){return`MultiSet(${JSON.stringify(this.#e,null,e?2:void 0)})`}toJSON(){return JSON.stringify(Array.from(this.getInner()))}static fromJSON(e){return new Xt(JSON.parse(e))}map(e){return new Xt(this.#e.map(([n,r])=>[e(n),r]))}filter(e){return new Xt(this.#e.filter(([n,r])=>e(n)))}negate(){return new Xt(this.#e.map(([e,n])=>[e,-n]))}concat(e){const n=[];return dm(n,this.#e),dm(n,e.getInner()),new Xt(n)}consolidate(){if(this.#e.length>0){const e=this.#e[0]?.[0];if(Array.isArray(e)&&e.length===2)return this.#t()}return this.#n()}#t(){const e=new Map,n=new Map,r=a=>{if(a.length!==2)throw new Error("Expected tuple of length 2");const[l,u]=a;return`${hm.getStringId(l)}|${hm.getStringId(u)}`};for(const[a,l]of this.#e){if(!Array.isArray(a)||a.length!==2)return this.#n();const[u,f]=a;if(typeof u!="string"&&typeof u!="number")return this.#n();let d;Array.isArray(f)&&f.length===2?d=r(f):d=hm.getStringId(f);const m=u+"|"+d;e.set(m,(e.get(m)||0)+l),n.has(m)||n.set(m,a)}const s=[];for(const[a,l]of e)l!==0&&s.push([n.get(a),l]);return new Xt(s)}#n(){const e=new uN(()=>0),n=new Map;let r=!1,s=!1,a=!1;for(const[f,d]of this.#e)if(typeof f=="string")r=!0;else if(typeof f=="number")s=!0;else{a=!0;break}const l=a||r&&s;for(const[f,d]of this.#e){const m=l?Ln(f):f;l&&!n.has(m)&&n.set(m,f),e.update(m,p=>p+d)}const u=[];for(const[f,d]of e.entries())if(d!==0){const m=l?n.get(f):f;u.push([m,d])}return new Xt(u)}extend(e){const n=e instanceof Xt?e.getInner():e;dm(this.#e,n)}add(e,n){n!==0&&this.#e.push([e,n])}getInner(){return this.#e}}class BN{#e;constructor(e){this.#e=e}drain(){const e=[...this.#e].reverse();return this.#e.length=0,e}isEmpty(){return this.#e.length===0}}class es{#e=[];sendData(e){e instanceof Xt||(e=new Xt(e));for(const n of this.#e)n.unshift(e)}newReader(){const e=[];return this.#e.push(e),new BN(e)}}class wk{constructor(e,n,r){this.id=e,this.inputs=n,this.output=r}hasPendingWork(){return this.inputs.some(e=>!e.isEmpty())}}class uo extends wk{constructor(e,n,r){super(e,[n],r),this.id=e}inputMessages(){return this.inputs[0].drain()}}class $N extends wk{constructor(e,n,r,s){super(e,[n,r],s),this.id=e}inputAMessages(){return this.inputs[0].drain()}inputBMessages(){return this.inputs[1].drain()}}class Oy extends uo{run(){for(const e of this.inputMessages())this.output.sendData(this.inner(e))}}class UN{#e=[];#t=0;#n=!1;constructor(){}#r(){if(this.#n)throw new Error("Graph already finalized")}getNextOperatorId(){return this.#r(),this.#t++}newInput(){this.#r();const e=new es;return new qN(this,e)}addOperator(e){this.#r(),this.#e.push(e)}finalize(){this.#r(),this.#n=!0}step(){if(!this.#n)throw new Error("Graph not finalized");for(const e of this.#e)e.run()}pendingWork(){return this.#e.some(e=>e.hasPendingWork())}run(){for(;this.pendingWork();)this.step()}}class ts{#e;#t;constructor(e,n){this.#e=e,this.#t=n}connectReader(){return this.#t.newReader()}get writer(){return this.#t}get graph(){return this.#e}pipe(...e){return e.reduce((n,r)=>r(n),this)}}class qN extends ts{sendData(e){this.writer.sendData(e)}}class FN extends Oy{#e;constructor(e,n,r,s){super(e,n,r),this.#e=s}inner(e){return e.map(this.#e)}}function zn(t){return e=>{const n=new ts(e.graph,new es),r=new FN(e.graph.getNextOperatorId(),e.connectReader(),n.writer,t);return e.graph.addOperator(r),n}}const _l=Symbol("NO_PREFIX");class x1 extends Map{addValue(e,n){if(n===0)return this.size===0;const r=Dl(e),s=this.get(r);if(nf(s)){const[a,l]=s;if(Dl(a)!==r)throw new Error("Mismatching prefixes, this should never happen");if(a===e||Ln(a)===Ln(e)){const f=l+n;f===0?this.delete(r):this.set(r,[e,f])}else{const f=new vl;f.set(Ln(a),s),f.set(Ln(e),[e,n]),this.set(r,f)}}else s===void 0?this.set(r,[e,n]):s.addValue(e,n)&&this.delete(r);return this.size===0}}class vl extends Map{addValue(e,n){if(n===0)return this.size===0;const r=Ln(e),s=this.get(r);if(s){const[,a]=s,l=a+n;l===0?this.delete(r):this.set(r,[e,l])}else this.set(r,[e,n]);return this.size===0}}class ni{#e;#t=new Map;constructor(){this.#e=new Map}static fromMultiSets(e){const n=new ni;for(const r of e)for(const[s,a]of r.getInner()){const[l,u]=s;n.addValue(l,[u,a])}return n}toString(e=!1){return`Index(${JSON.stringify([...this.entries()],void 0,e?2:void 0)})`}get size(){return this.#e.size}has(e){return this.#e.has(e)}hasPresence(e){return(this.#t.get(e)||0)!==0}getConsolidatedMultiplicity(e){return this.#t.get(e)||0}getPresenceKeys(){return this.#t.keys()}get(e){return[...this.getIterator(e)]}*getIterator(e){const n=this.#e.get(e);if(nf(n))yield n;else{if(n===void 0)return;if(n instanceof vl)for(const r of n.values())yield r;else for(const r of n.values())if(nf(r))yield r;else for(const s of r.values())yield s}}*entries(){for(const e of this.#e.keys())for(const n of this.getIterator(e))yield[e,n]}*entriesIterators(){for(const e of this.#e.keys())yield[e,this.getIterator(e)]}addValue(e,n){const[r,s]=n;if(s===0)return;const a=(this.#t.get(e)||0)+s;a===0?this.#t.delete(e):this.#t.set(e,a);const l=this.#e.get(e);if(l===void 0){this.#e.set(e,n);return}if(nf(l)){this.#n(e,l,r,s);return}if(l instanceof vl){const u=Dl(r);if(u!==_l){const f=new x1;f.set(_l,l),f.set(u,n),this.#e.set(e,f)}else l.addValue(r,s)&&this.#e.delete(e)}else l.addValue(r,s)&&this.#e.delete(e)}#n(e,n,r,s){const[a,l]=n;if(a===r){const d=l+s;d===0?this.#e.delete(e):this.#e.set(e,[r,d]);return}const u=Dl(r),f=Dl(a);if(f===u&&(a===r||Ln(a)===Ln(r))){const d=l+s;d===0?this.#e.delete(e):this.#e.set(e,[r,d]);return}if(f===_l&&u===_l){const d=new vl;d.set(Ln(a),n),d.set(Ln(r),[r,s]),this.#e.set(e,d)}else{const d=new x1;if(f===u){const m=new vl;m.set(Ln(a),n),m.set(Ln(r),[r,s]),d.set(f,m)}else d.set(f,n),d.set(u,[r,s]);this.#e.set(e,d)}}append(e){for(const[n,r]of e.entries())this.addValue(n,r)}join(e){const n=[];if(this.size<=e.size)for(const[r,s]of this.entriesIterators()){if(!e.has(r))continue;const a=e.get(r);for(const[l,u]of s)for(const[f,d]of a)u!==0&&d!==0&&n.push([[r,[l,f]],u*d])}else for(const[r,s]of e.entriesIterators()){if(!this.has(r))continue;const a=this.get(r);for(const[l,u]of s)for(const[f,d]of a)d!==0&&u!==0&&n.push([[r,[f,l]],d*u])}return new Xt(n)}}function Dl(t){return Array.isArray(t)&&(typeof t[0]=="string"||typeof t[0]=="number"||typeof t[0]=="bigint")?t[0]:_l}function nf(t){return Array.isArray(t)}class VN extends uo{#e=new ni;#t=new ni;#n;constructor(e,n,r,s){super(e,n,r),this.#n=s}run(){const e=new Set;for(const r of this.inputMessages())for(const[s,a]of r.getInner()){const[l,u]=s;this.#e.addValue(l,[u,a]),e.add(l)}const n=[];for(const r of e){const s=this.#e.get(r),a=this.#t.get(r),l=this.#n(s),u=new Map,f=new Map;for(const[d,m]of l){const p=u.get(d)??0;u.set(d,p+m)}for(const[d,m]of a){const p=f.get(d)??0;f.set(d,p+m)}for(const[d,m]of f)u.has(d)||(n.push([[r,d],-m]),this.#t.addValue(r,[d,-m]));for(const[d,m]of u)f.has(d)||m!==0&&(n.push([[r,d],m]),this.#t.addValue(r,[d,m]));for(const[d,m]of u){const p=f.get(d);if(p!==void 0){const y=m-p;y!==0&&(n.push([[r,d],y]),this.#t.addValue(r,[d,y]))}}}n.length>0&&this.output.sendData(new Xt(n))}}function HN(t){return e=>{const n=new ts(e.graph,new es),r=new VN(e.graph.getNextOperatorId(),e.connectReader(),n.writer,t);return e.graph.addOperator(r),n}}function w1(t){return"pipe"in t}function S1(t,e={}){const n=Object.fromEntries(Object.entries(e).filter(([r,s])=>!w1(s)));return Object.fromEntries(Object.entries(e).filter(([r,s])=>w1(s))),r=>{const s="__original_key__";return r.pipe(zn(u=>{const f=t(u),d=JSON.stringify(f),m={};m[s]=f;for(const[p,y]of Object.entries(n))m[p]=y.preMap(u);return[d,m]})).pipe(HN(u=>{let f=0;for(const[p,y]of u)f+=y;if(f<=0)return[];const d={},m=u[0]?.[0]?.[s];d[s]=m;for(const[p,y]of Object.entries(n)){const g=u.map(([v,w])=>[v[p],w]);d[p]=y.reduce(g)}return[[d,1]]})).pipe(zn(([u,f])=>{const d=f[s],m={};Object.assign(m,d);for(const[p,y]of Object.entries(n))y.postMap?m[p]=y.postMap(f[p]):m[p]=f[p];return[u,m]}))}}function GN(t=e=>e){return{preMap:e=>t(e),reduce:e=>{let n=0;for(const[r,s]of e)n+=r*s;return n}}}function KN(t=e=>e){return{preMap:e=>t(e)==null?0:1,reduce:e=>{let n=0;for(const[r,s]of e)n+=r*s;return n}}}function ZN(t=e=>e){return{preMap:e=>({sum:t(e),count:0}),reduce:e=>{let n=0,r=0;for(const[s,a]of e)n+=s.sum*a,r+=a;return{sum:n,count:r}},postMap:e=>e.sum/e.count}}function JN(t){const e=t??(n=>n);return{preMap:n=>e(n),reduce:n=>{let r;for(const[s,a]of n)(!r||s&&s<r)&&(r=s);return r}}}function QN(t){const e=t??(n=>n);return{preMap:n=>e(n),reduce:n=>{let r;for(const[s,a]of n)(!r||s&&s>r)&&(r=s);return r}}}const YN={sum:GN,count:KN,avg:ZN,min:JN,max:QN};class WN extends Oy{#e;constructor(e,n,r,s){super(e,n,r),this.#e=s}inner(e){return this.#e(e),e}}function XN(t){return e=>{const n=new ts(e.graph,new es),r=new WN(e.graph.getNextOperatorId(),e.connectReader(),n.writer,t);return e.graph.addOperator(r),n}}class eM extends Oy{#e;constructor(e,n,r,s){super(e,n,r),this.#e=s}inner(e){return e.filter(this.#e)}}function ri(t){return e=>{const n=new ts(e.graph,new es),r=new eM(e.graph.getNextOperatorId(),e.connectReader(),n.writer,t);return e.graph.addOperator(r),n}}class tM extends uo{#e;constructor(e,n,r,s){super(e,n,r),this.#e=s}run(){for(const e of this.inputMessages())this.#e(e),this.output.sendData(e)}}function nM(t){return e=>{const n=new ts(e.graph,new es),r=new tM(e.graph.getNextOperatorId(),e.connectReader(),n.writer,t);return e.graph.addOperator(r),n}}class rM extends uo{run(){const e=this.inputMessages();if(e.length===0)return;const n=new Xt;for(const s of e)n.extend(s);const r=n.consolidate();r.getInner().length>0&&this.output.sendData(r)}}function sM(){return t=>{const e=new ts(t.graph,new es),n=new rM(t.graph.getNextOperatorId(),t.connectReader(),e.writer);return t.graph.addOperator(n),e}}class iM extends $N{#e=new ni;#t=new ni;#n;constructor(e,n,r,s,a="inner"){super(e,n,r,s),this.#n=a}run(){const e=ni.fromMultiSets(this.inputAMessages()),n=ni.fromMultiSets(this.inputBMessages());if(e.size===0&&n.size===0)return;const r=new Xt;this.#n!=="anti"&&this.emitInnerResults(e,n,r),(this.#n==="left"||this.#n==="full"||this.#n==="anti")&&this.emitLeftOuterResults(e,n,r),(this.#n==="right"||this.#n==="full")&&this.emitRightOuterResults(e,n,r),this.#e.append(e),this.#t.append(n),r.getInner().length>0&&this.output.sendData(r)}emitInnerResults(e,n,r){e.size>0&&r.extend(e.join(this.#t)),n.size>0&&r.extend(this.#e.join(n)),e.size>0&&n.size>0&&r.extend(e.join(n))}emitLeftOuterResults(e,n,r){if(e.size>0)for(const[s,a]of e.entriesIterators()){const l=this.#t.getConsolidatedMultiplicity(s),u=n.getConsolidatedMultiplicity(s);if(l+u===0)for(const[d,m]of a)m!==0&&r.add([s,[d,null]],m)}if(n.size>0)for(const s of n.getPresenceKeys()){const a=this.#t.getConsolidatedMultiplicity(s),l=n.getConsolidatedMultiplicity(s);if(l===0)continue;const u=a+l;if(a===0==(u===0))continue;const f=a===0;for(const[d,m]of this.#e.getIterator(s))m!==0&&r.add([s,[d,null]],f?-m:+m)}}emitRightOuterResults(e,n,r){if(n.size>0)for(const[s,a]of n.entriesIterators()){const l=this.#e.getConsolidatedMultiplicity(s),u=e.getConsolidatedMultiplicity(s);if(l+u===0)for(const[d,m]of a)m!==0&&r.add([s,[null,d]],m)}if(e.size>0)for(const s of e.getPresenceKeys()){const a=this.#e.getConsolidatedMultiplicity(s),l=e.getConsolidatedMultiplicity(s);if(l===0)continue;const u=a+l;if(a===0==(u===0))continue;const f=a===0;for(const[d,m]of this.#t.getIterator(s))m!==0&&r.add([s,[null,d]],f?-m:+m)}}}function aM(t,e="inner"){return n=>{if(n.graph!==t.graph)throw new Error("Cannot join streams from different graphs");const r=new ts(n.graph,new es),s=new iM(n.graph.getNextOperatorId(),n.connectReader(),t.connectReader(),r.writer,e);return n.graph.addOperator(s),r}}class oM extends uo{#e;#t;constructor(e,n,r,s=a=>a){super(e,n,r),this.#e=s,this.#t=new Map}run(){const e=new Map;for(const r of this.inputMessages())for(const[s,a]of r.getInner()){const l=Ln(this.#e(s)),f=(e.get(l)?.[0]??this.#t.get(l)??0)+a;e.set(l,[f,s])}const n=[];for(const[r,[s,a]]of e.entries()){const l=this.#t.get(r)??0;s===0?this.#t.delete(r):this.#t.set(r,s),l<=0&&s>0?n.push([[Ln(this.#e(a)),a[1]],1]):l>0&&s<=0&&n.push([[Ln(this.#e(a)),a[1]],-1])}n.length>0&&this.output.sendData(new Xt(n))}}function lM(t=e=>e){return e=>{const n=new ts(e.graph,new es),r=new oM(e.graph.getNextOperatorId(),e.connectReader(),n.writer,t);return e.graph.addOperator(r),n}}const cM="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function Ga(t,e,n){const r=n[0];if(e!=null&&t>=e)throw new Error(t+" >= "+e);if(t.slice(-1)===r||e&&e.slice(-1)===r)throw new Error("trailing zero");if(e){let l=0;for(;(t[l]||r)===e[l];)l++;if(l>0)return e.slice(0,l)+Ga(t.slice(l),e.slice(l),n)}const s=t?n.indexOf(t[0]):0,a=e!=null?n.indexOf(e[0]):n.length;if(a-s>1){const l=Math.round(.5*(s+a));return n[l]}else return e&&e.length>1?e.slice(0,1):n[s]+Ga(t.slice(1),null,n)}function Sk(t){if(t.length!==kk(t[0]))throw new Error("invalid integer part of order key: "+t)}function kk(t){if(t>="a"&&t<="z")return t.charCodeAt(0)-97+2;if(t>="A"&&t<="Z")return 90-t.charCodeAt(0)+2;throw new Error("invalid order key head: "+t)}function xl(t){const e=kk(t[0]);if(e>t.length)throw new Error("invalid order key: "+t);return t.slice(0,e)}function k1(t,e){if(t==="A"+e[0].repeat(26))throw new Error("invalid order key: "+t);const n=xl(t);if(t.slice(n.length).slice(-1)===e[0])throw new Error("invalid order key: "+t)}function E1(t,e){Sk(t);const[n,...r]=t.split("");let s=!0;for(let a=r.length-1;s&&a>=0;a--){const l=e.indexOf(r[a])+1;l===e.length?r[a]=e[0]:(r[a]=e[l],s=!1)}if(s){if(n==="Z")return"a"+e[0];if(n==="z")return null;const a=String.fromCharCode(n.charCodeAt(0)+1);return a>"a"?r.push(e[0]):r.pop(),a+r.join("")}else return n+r.join("")}function uM(t,e){Sk(t);const[n,...r]=t.split("");let s=!0;for(let a=r.length-1;s&&a>=0;a--){const l=e.indexOf(r[a])-1;l===-1?r[a]=e.slice(-1):(r[a]=e[l],s=!1)}if(s){if(n==="a")return"Z"+e.slice(-1);if(n==="A")return null;const a=String.fromCharCode(n.charCodeAt(0)-1);return a<"Z"?r.push(e.slice(-1)):r.pop(),a+r.join("")}else return n+r.join("")}function fM(t,e,n=cM){if(t!=null&&k1(t,n),e!=null&&k1(e,n),t!=null&&e!=null&&t>=e)throw new Error(t+" >= "+e);if(t==null){if(e==null)return"a"+n[0];const f=xl(e),d=e.slice(f.length);if(f==="A"+n[0].repeat(26))return f+Ga("",d,n);if(f<e)return f;const m=uM(f,n);if(m==null)throw new Error("cannot decrement any more");return m}if(e==null){const f=xl(t),d=t.slice(f.length),m=E1(f,n);return m??f+Ga(d,null,n)}const r=xl(t),s=t.slice(r.length),a=xl(e),l=e.slice(a.length);if(r===a)return r+Ga(s,l,n);const u=E1(r,n);if(u==null)throw new Error("cannot increment any more");return u<e?u:r+Ga(s,null,n)}class C1{#e=[];#t;#n;#r;constructor(e,n,r){this.#n=e,this.#r=e+n,this.#t=r}get size(){const e=this.#n,n=this.#r-this.#n,r=this.#e.length-e;return Math.max(0,Math.min(n,r))}move({offset:e,limit:n}){const r=this.#n,s=this.#r-this.#n,a=[this.#n,this.#r===1/0?this.#n+this.size:this.#r];this.#n=e??r,this.#r=this.#n+(n??s);const l=[this.#n,this.#r===1/0?Math.max(this.#n+this.size,a[1]):this.#r],{onlyInA:u,onlyInB:f}=hN(a,l),d=[];f.forEach(p=>{const y=this.#e[p];y&&d.push(y)});const m=[];return u.forEach(p=>{const y=this.#e[p];y&&m.push(y)}),{moveIns:d,moveOuts:m,changes:u.length+f.length>0}}insert(e){const n={moveIn:null,moveOut:null},r=this.#s(e),s=r===0?null:R1(this.#e[r-1]),a=r===this.#e.length?null:R1(this.#e[r]),l=fM(s,a),u=T1(e,l);if(this.#e.splice(r,0,u),r<this.#r){const f=Math.max(r,this.#n);f<this.#e.length&&(n.moveIn=this.#e[f],this.#r<this.#e.length&&(n.moveOut=this.#e[this.#r]))}return n}delete(e){const n={moveIn:null,moveOut:null},r=this.#s(e),[s]=this.#e.splice(r,1);if(r<this.#r){if(n.moveOut=s,r<this.#n){const l=this.#n-1;l<this.#e.length?n.moveOut=this.#e[l]:n.moveOut=null}const a=this.#r-1;a<this.#e.length&&(n.moveIn=this.#e[a])}return n}#s(e){return fN(this.#e,T1(e,""),(n,r)=>this.#t(A1(n),A1(r)))}}class dM extends uo{#e=new Map;#t;constructor(e,n,r,s,a){super(e,n,r);const l=a.limit??1/0,u=a.offset??0;this.#t=this.createTopK(u,l,pM(s)),a.setSizeCallback?.(()=>this.#t.size),a.setWindowFn?.(this.moveTopK.bind(this))}createTopK(e,n,r){return new C1(e,n,r)}moveTopK({offset:e,limit:n}){if(!(this.#t instanceof C1))throw new Error("Cannot move B+-tree implementation of TopK with fractional index");const r=[],s=this.#t.move({offset:e,limit:n});s.moveIns.forEach(a=>this.handleMoveIn(a,r)),s.moveOuts.forEach(a=>this.handleMoveOut(a,r)),s.changes&&this.output.sendData(new Xt(r))}run(){const e=[];for(const n of this.inputMessages())for(const[r,s]of n.getInner()){const[a,l]=r;this.processElement(a,l,s,e)}e.length>0&&this.output.sendData(new Xt(e))}processElement(e,n,r,s){const{oldMultiplicity:a,newMultiplicity:l}=this.addKey(e,r);let u={moveIn:null,moveOut:null};a<=0&&l>0?u=this.#t.insert([e,n]):a>0&&l<=0&&(u=this.#t.delete([e,n])),this.handleMoveIn(u.moveIn,s),this.handleMoveOut(u.moveOut,s)}handleMoveIn(e,n){if(e){const[[r,s],a]=e;n.push([[r,[s,a]],1])}}handleMoveOut(e,n){if(e){const[[r,s],a]=e;n.push([[r,[s,a]],-1])}}getMultiplicity(e){return this.#e.get(e)??0}addKey(e,n){const r=this.getMultiplicity(e),s=r+n;return s===0?this.#e.delete(e):this.#e.set(e,s),{oldMultiplicity:r,newMultiplicity:s}}}function hM(t,e){const n=e||{};return r=>{const s=new ts(r.graph,new es),a=new dM(r.graph.getNextOperatorId(),r.connectReader(),s.writer,t,n);return r.graph.addOperator(a),s}}function T1(t,e){return[t,e]}function A1(t){return t[0]}function R1(t){return t[1]}function pM(t){return([e,n],[r,s])=>{const a=t(n,s);return a!==0?a:wf(e,r)}}function mM(t,e,n){const r=n?.limit??1/0,s=n?.offset??0,a=n?.setSizeCallback,l=n?.setWindowFn,u=n?.comparator??((f,d)=>f===d?0:f<d?-1:1);return f=>f.pipe(t((d,m)=>u(e(d),e(m)),{limit:r,offset:s,setSizeCallback:a,setWindowFn:l}),sM())}function gM(t,e){return mM(hM,t,e)}class yM{constructor(e,n,r){this._root=pm,this._size=0,this._maxNodeSize=r>=4?Math.min(r,256):32,this._compare=e,n&&this.setPairs(n)}get size(){return this._size}get length(){return this._size}get isEmpty(){return this._size===0}clear(){this._root=pm,this._size=0}get(e,n){return this._root.get(e,n,this)}set(e,n,r){this._root.isShared&&(this._root=this._root.clone());const s=this._root.set(e,n,r,this);return s===!0||s===!1?s:(this._root=new Iy([this._root,s]),!0)}has(e){return this.forRange(e,e,!0,void 0)!==0}delete(e){return this.editRange(e,e,!0,_M)!==0}get maxNodeSize(){return this._maxNodeSize}minKey(){return this._root.minKey()}maxKey(){return this._root.maxKey()}keysArray(){const e=[];return this._root.forRange(this.minKey(),this.maxKey(),!0,!1,this,0,(n,r)=>{e.push(n)}),e}nextHigherPair(e,n){return n=n||[],e===void 0?this._root.minPair(n):this._root.getPairOrNextHigher(e,this._compare,!1,n)}nextHigherKey(e){const n=this.nextHigherPair(e,O1);return n&&n[0]}nextLowerPair(e,n){return n=n||[],e===void 0?this._root.maxPair(n):this._root.getPairOrNextLower(e,this._compare,!1,n)}nextLowerKey(e){const n=this.nextLowerPair(e,O1);return n&&n[0]}setPairs(e,n){let r=0;for(const s of e)this.set(s[0],s[1],n)&&r++;return r}forRange(e,n,r,s,a){const l=this._root.forRange(e,n,r,!1,this,a||0,s);return typeof l=="number"?l:l.break}editRange(e,n,r,s,a){let l=this._root;l.isShared&&(this._root=l=l.clone());try{const u=l.forRange(e,n,r,!0,this,a||0,s);return typeof u=="number"?u:u.break}finally{let u;for(;l.keys.length<=1&&!l.isLeaf;)u||=l.isShared,this._root=l=l.keys.length===0?pm:l.children[0];u&&(l.isShared=!0)}}}class Ql{get isLeaf(){return this.children===void 0}constructor(e=[],n){this.keys=e,this.values=n||En,this.isShared=void 0}maxKey(){return this.keys[this.keys.length-1]}indexOf(e,n,r){const s=this.keys;let a=0,l=s.length,u=l>>1;for(;a<l;){const f=r(s[u],e);if(f<0)a=u+1;else if(f>0)l=u;else{if(f===0)return u;if(e===e)return s.length;throw new Error("BTree: NaN was used as a key")}u=a+l>>1}return u^n}minKey(){return this.keys[0]}minPair(e){if(this.keys.length!==0)return e[0]=this.keys[0],e[1]=this.values[0],e}maxPair(e){if(this.keys.length===0)return;const n=this.keys.length-1;return e[0]=this.keys[n],e[1]=this.values[n],e}clone(){const e=this.values;return new Ql(this.keys.slice(0),e===En?e:e.slice(0))}get(e,n,r){const s=this.indexOf(e,-1,r._compare);return s<0?n:this.values[s]}getPairOrNextLower(e,n,r,s){const a=this.indexOf(e,-1,n),l=a<0?~a-1:r?a:a-1;if(l>=0)return s[0]=this.keys[l],s[1]=this.values[l],s}getPairOrNextHigher(e,n,r,s){const a=this.indexOf(e,-1,n),l=a<0?~a:r?a:a+1,u=this.keys;if(l<u.length)return s[0]=u[l],s[1]=this.values[l],s}set(e,n,r,s){let a=this.indexOf(e,-1,s._compare);if(a<0){if(a=~a,s._size++,this.keys.length<s._maxNodeSize)return this.insertInLeaf(a,e,n,s);{const l=this.splitOffRightSide();let u=this;return a>this.keys.length&&(a-=this.keys.length,u=l),u.insertInLeaf(a,e,n,s),l}}else return r!==!1&&(n!==void 0&&this.reifyValues(),this.keys[a]=e,this.values[a]=n),!1}reifyValues(){return this.values===En?this.values=this.values.slice(0,this.keys.length):this.values}insertInLeaf(e,n,r,s){if(this.keys.splice(e,0,n),this.values===En){for(;En.length<s._maxNodeSize;)En.push(void 0);if(r===void 0)return!0;this.values=En.slice(0,this.keys.length-1)}return this.values.splice(e,0,r),!0}takeFromRight(e){let n=this.values;e.values===En?n!==En&&n.push(void 0):(n=this.reifyValues(),n.push(e.values.shift())),this.keys.push(e.keys.shift())}takeFromLeft(e){let n=this.values;e.values===En?n!==En&&n.unshift(void 0):(n=this.reifyValues(),n.unshift(e.values.pop())),this.keys.unshift(e.keys.pop())}splitOffRightSide(){const e=this.keys.length>>1,n=this.keys.splice(e),r=this.values===En?En:this.values.splice(e);return new Ql(n,r)}forRange(e,n,r,s,a,l,u){const f=a._compare;let d,m;if(n===e){if(!r||(m=(d=this.indexOf(e,-1,f))+1,d<0))return l}else d=this.indexOf(e,0,f),m=this.indexOf(n,-1,f),m<0?m=~m:r===!0&&m++;const p=this.keys,y=this.values;if(u!==void 0)for(let g=d;g<m;g++){const v=p[g],w=u(v,y[g],l++);if(w!==void 0){if(s===!0){if(v!==p[g]||this.isShared===!0)throw new Error("BTree illegally changed or cloned in editRange");w.delete?(this.keys.splice(g,1),this.values!==En&&this.values.splice(g,1),a._size--,g--,m--):w.hasOwnProperty("value")&&(y[g]=w.value)}if(w.break!==void 0)return w}}else l+=m-d;return l}mergeSibling(e,n){if(this.keys.push.apply(this.keys,e.keys),this.values===En){if(e.values===En)return;this.values=this.values.slice(0,this.keys.length)}this.values.push.apply(this.values,e.reifyValues())}}class Iy extends Ql{constructor(e,n){if(!n){n=[];for(let r=0;r<e.length;r++)n[r]=e[r].maxKey()}super(n),this.children=e}minKey(){return this.children[0].minKey()}minPair(e){return this.children[0].minPair(e)}maxPair(e){return this.children[this.children.length-1].maxPair(e)}get(e,n,r){const s=this.indexOf(e,0,r._compare),a=this.children;return s<a.length?a[s].get(e,n,r):void 0}getPairOrNextLower(e,n,r,s){const a=this.indexOf(e,0,n),l=this.children;if(a>=l.length)return this.maxPair(s);const u=l[a].getPairOrNextLower(e,n,r,s);return u===void 0&&a>0?l[a-1].maxPair(s):u}getPairOrNextHigher(e,n,r,s){const a=this.indexOf(e,0,n),l=this.children,u=l.length;if(a>=u)return;const f=l[a].getPairOrNextHigher(e,n,r,s);return f===void 0&&a<u-1?l[a+1].minPair(s):f}set(e,n,r,s){const a=this.children,l=s._maxNodeSize,u=s._compare;let f=Math.min(this.indexOf(e,0,u),a.length-1),d=a[f];if(d.isShared&&(a[f]=d=d.clone()),d.keys.length>=l){let p;f>0&&(p=a[f-1]).keys.length<l&&u(d.keys[0],e)<0?(p.isShared&&(a[f-1]=p=p.clone()),p.takeFromRight(d),this.keys[f-1]=p.maxKey()):(p=a[f+1])!==void 0&&p.keys.length<l&&u(d.maxKey(),e)<0&&(p.isShared&&(a[f+1]=p=p.clone()),p.takeFromLeft(d),this.keys[f]=a[f].maxKey())}const m=d.set(e,n,r,s);if(m===!1)return!1;if(this.keys[f]=d.maxKey(),m===!0)return!0;if(this.keys.length<l)return this.insert(f+1,m),!0;{const p=this.splitOffRightSide();let y=this;return u(m.maxKey(),this.maxKey())>0&&(y=p,f-=this.keys.length),y.insert(f+1,m),p}}insert(e,n){this.children.splice(e,0,n),this.keys.splice(e,0,n.maxKey())}splitOffRightSide(){const e=this.children.length>>1;return new Iy(this.children.splice(e),this.keys.splice(e))}takeFromRight(e){this.keys.push(e.keys.shift()),this.children.push(e.children.shift())}takeFromLeft(e){this.keys.unshift(e.keys.pop()),this.children.unshift(e.children.pop())}forRange(e,n,r,s,a,l,u){const f=a._compare,d=this.keys,m=this.children;let p=this.indexOf(e,0,f),y=p;const g=Math.min(n===e?p:this.indexOf(n,0,f),d.length-1);if(s){if(y<=g)try{for(;y<=g;y++){m[y].isShared&&(m[y]=m[y].clone());const v=m[y].forRange(e,n,r,s,a,l,u);if(d[y]=m[y].maxKey(),typeof v!="number")return v;l=v}}finally{const v=a._maxNodeSize>>1;for(p>0&&p--,y=g;y>=p;y--)m[y].keys.length<=v&&(m[y].keys.length!==0?this.tryMerge(y,a._maxNodeSize):(d.splice(y,1),m.splice(y,1)));m.length!==0&&m[0].keys.length===0&&vM(!1,"emptiness bug")}}else for(;y<=g;y++){const v=m[y].forRange(e,n,r,s,a,l,u);if(typeof v!="number")return v;l=v}return l}tryMerge(e,n){const r=this.children;return e>=0&&e+1<r.length&&r[e].keys.length+r[e+1].keys.length<=n?(r[e].isShared&&(r[e]=r[e].clone()),r[e].mergeSibling(r[e+1],n),r.splice(e+1,1),this.keys.splice(e+1,1),this.keys[e]=r[e].maxKey(),!0):!1}mergeSibling(e,n){const r=this.keys.length;this.keys.push.apply(this.keys,e.keys);const s=e.children;if(this.children.push.apply(this.children,s),e.isShared&&!this.isShared)for(const a of s)a.isShared=!0;this.tryMerge(r-1,n)}}const En=[],bM={delete:!0},_M=()=>bM,pm=(function(){const t=new Ql;return t.isShared=!0,t})(),O1=[];function vM(t,...e){throw e.unshift("B+ tree"),new Error(e.join(" "))}function xM(){const t=new Map;function e(n){const r=n.join(".");if(t.has(r))return t.get(r);const s=new Proxy({},{get(a,l,u){if(l==="__refProxy")return!0;if(l==="__path")return n;if(l==="__type")return;if(typeof l=="symbol")return Reflect.get(a,l,u);const f=[...n,String(l)];return e(f)},has(a,l){return l==="__refProxy"||l==="__path"||l==="__type"?!0:Reflect.has(a,l)},ownKeys(a){return Reflect.ownKeys(a)},getOwnPropertyDescriptor(a,l){return l==="__refProxy"||l==="__path"||l==="__type"?{enumerable:!1,configurable:!0}:Reflect.getOwnPropertyDescriptor(a,l)}});return t.set(r,s),s}return e([])}function La(t){const e=new Map;let n=0;function r(a){const l=a.join(".");if(e.has(l))return e.get(l);const u=new Proxy({},{get(f,d,m){if(d==="__refProxy")return!0;if(d==="__path")return a;if(d==="__type")return;if(typeof d=="symbol")return Reflect.get(f,d,m);const p=[...a,String(d)];return r(p)},has(f,d){return d==="__refProxy"||d==="__path"||d==="__type"?!0:Reflect.has(f,d)},ownKeys(f){const d=++n,m=`__SPREAD_SENTINEL__${a.join(".")}__${d}`;return Object.prototype.hasOwnProperty.call(f,m)||Object.defineProperty(f,m,{enumerable:!0,configurable:!0,value:!0}),Reflect.ownKeys(f)},getOwnPropertyDescriptor(f,d){return d==="__refProxy"||d==="__path"||d==="__type"?{enumerable:!1,configurable:!0}:Reflect.getOwnPropertyDescriptor(f,d)}});return e.set(l,u),u}return new Proxy({},{get(a,l,u){if(l==="__refProxy")return!0;if(l==="__path")return[];if(l==="__type")return;if(typeof l=="symbol")return Reflect.get(a,l,u);const f=String(l);if(t.includes(f))return r([f])},has(a,l){return l==="__refProxy"||l==="__path"||l==="__type"||typeof l=="string"&&t.includes(l)?!0:Reflect.has(a,l)},ownKeys(a){return[...t,"__refProxy","__path","__type"]},getOwnPropertyDescriptor(a,l){if(l==="__refProxy"||l==="__path"||l==="__type")return{enumerable:!1,configurable:!0};if(typeof l=="string"&&t.includes(l))return{enumerable:!0,configurable:!0}}})}function hn(t){return wM(t)?new Bn(t.__path):t&&typeof t=="object"&&"type"in t&&(t.type==="func"||t.type==="ref"||t.type==="val"||t.type==="agg")?t:new Wn(t)}function wM(t){return t&&typeof t=="object"&&t.__refProxy===!0}function hg(t,e){return new jr("eq",[hn(t),hn(e)])}function I1(t,e){return new jr("gt",[hn(t),hn(e)])}function SM(t,e){return new jr("gte",[hn(t),hn(e)])}function pg(t,e){return new jr("lt",[hn(t),hn(e)])}function mg(t,e,...n){const r=[t,e,...n];return new jr("and",r.map(s=>hn(s)))}function kM(t,e,...n){const r=[t,e,...n];return new jr("or",r.map(s=>hn(s)))}function EM(t,e){return new jr("in",[hn(t),hn(e)])}class CM{constructor(e,n,r,s){this.lookupCount=0,this.totalLookupTime=0,this.lastUpdated=new Date,this.id=e,this.expression=n,this.compareOptions=Ay,this.name=r,this.initialize(s)}supports(e){return this.supportedOperations.has(e)}matchesField(e){return this.expression.type==="ref"&&this.expression.path.length===e.length&&this.expression.path.every((n,r)=>n===e[r])}matchesCompareOptions(e){const n={...this.compareOptions,direction:void 0},r={...e,direction:void 0};return Ur(n,r)}matchesDirection(e){return this.compareOptions.direction===e}getStats(){return{entryCount:this.keyCount,lookupCount:this.lookupCount,averageLookupTime:this.lookupCount>0?this.totalLookupTime/this.lookupCount:0,lastUpdated:this.lastUpdated}}evaluateIndexExpression(e){return Cy(this.expression)(e)}trackLookup(e){const n=performance.now()-e;this.lookupCount++,this.totalLookupTime+=n}updateTimestamp(){this.lastUpdated=new Date}}class gg extends CM{constructor(e,n,r,s){super(e,n,r,s),this.supportedOperations=new Set(["eq","gt","gte","lt","lte","in"]),this.valueMap=new Map,this.indexedKeys=new Set,this.compareFn=ug,this.compareFn=s?.compareFn??ug,s?.compareOptions&&(this.compareOptions=s.compareOptions),this.orderedEntries=new yM(this.compareFn)}initialize(e){}add(e,n){let r;try{r=this.evaluateIndexExpression(n)}catch(a){throw new Error(`Failed to evaluate index expression for key ${e}: ${a}`)}const s=ks(r);if(this.valueMap.has(s))this.valueMap.get(s).add(e);else{const a=new Set([e]);this.valueMap.set(s,a),this.orderedEntries.set(s,void 0)}this.indexedKeys.add(e),this.updateTimestamp()}remove(e,n){let r;try{r=this.evaluateIndexExpression(n)}catch(a){console.warn(`Failed to evaluate index expression for key ${e} during removal:`,a);return}const s=ks(r);if(this.valueMap.has(s)){const a=this.valueMap.get(s);a.delete(e),a.size===0&&(this.valueMap.delete(s),this.orderedEntries.delete(s))}this.indexedKeys.delete(e),this.updateTimestamp()}update(e,n,r){this.remove(e,n),this.add(e,r)}build(e){this.clear();for(const[n,r]of e)this.add(n,r)}clear(){this.orderedEntries.clear(),this.valueMap.clear(),this.indexedKeys.clear(),this.updateTimestamp()}lookup(e,n){const r=performance.now();let s;switch(e){case"eq":s=this.equalityLookup(n);break;case"gt":s=this.rangeQuery({from:n,fromInclusive:!1});break;case"gte":s=this.rangeQuery({from:n,fromInclusive:!0});break;case"lt":s=this.rangeQuery({to:n,toInclusive:!1});break;case"lte":s=this.rangeQuery({to:n,toInclusive:!0});break;case"in":s=this.inArrayLookup(n);break;default:throw new Error(`Operation ${e} not supported by BTreeIndex`)}return this.trackLookup(r),s}get keyCount(){return this.indexedKeys.size}equalityLookup(e){const n=ks(e);return new Set(this.valueMap.get(n)??[])}rangeQuery(e={}){const{from:n,to:r,fromInclusive:s=!0,toInclusive:a=!0}=e,l=new Set,u=ks(n),f=ks(r),d=u??this.orderedEntries.minKey(),m=f??this.orderedEntries.maxKey();return this.orderedEntries.forRange(d,m,a,(p,y)=>{if(!s&&this.compareFn(p,n)===0)return;const g=this.valueMap.get(p);g&&g.forEach(v=>l.add(v))}),l}rangeQueryReversed(e={}){const{from:n,to:r,fromInclusive:s=!0,toInclusive:a=!0}=e;return this.rangeQuery({from:r??this.orderedEntries.maxKey(),to:n??this.orderedEntries.minKey(),fromInclusive:a,toInclusive:s})}takeInternal(e,n,r,s,a=!1){const l=new Set,u=[];let f,d=ks(r);for(;(f=n(d))!==void 0&&u.length<e;){d=f[0];const m=this.valueMap.get(d);if(m&&m.size>0){const p=Array.from(m).sort(wf);a&&p.reverse();for(const y of p){if(u.length>=e)break;!l.has(y)&&(s?.(y)??!0)&&(u.push(y),l.add(y))}}}return u}take(e,n,r){const s=a=>this.orderedEntries.nextHigherPair(a);return this.takeInternal(e,s,n,r)}takeReversed(e,n,r){const s=a=>this.orderedEntries.nextLowerPair(a);return this.takeInternal(e,s,n,r,!0)}inArrayLookup(e){const n=new Set;for(const r of e){const s=ks(r),a=this.valueMap.get(s);a&&a.forEach(l=>n.add(l))}return n}get indexedKeysSet(){return this.indexedKeys}get orderedEntriesArray(){return this.orderedEntries.keysArray().map(e=>[e,this.valueMap.get(e)??new Set])}get orderedEntriesArrayReversed(){return this.takeReversed(this.orderedEntries.size).map(e=>[e,this.valueMap.get(e)??new Set])}get valueMapData(){return this.valueMap}}function Ek(t){return t.config.autoIndex==="eager"}function dd(t,e,n,r,s){if(!Ek(n))return;const a=r??{...Ay,...n.compareOptions};if(!Array.from(n.indexes.values()).find(u=>u.matchesField(e)&&u.matchesCompareOptions(a)))try{n.createIndex(u=>{let f=u;for(const d of e)f=f[d];return f},{name:`auto:${e.join(".")}`,indexType:gg,options:s?{compareFn:s,compareOptions:a}:{}})}catch(u){console.warn(`${n.id?`[${n.id}] `:""}Failed to create auto-index for field path "${e.join(".")}":`,u)}}function TM(t,e){if(!Ek(e))return;const n=AM(t);for(const{fieldName:r,fieldPath:s}of n)dd(r,s,e)}function AM(t){const e=[];function n(r){if(r.type!=="func")return;const s=r;if(s.name==="and"){for(const d of s.args)n(d);return}if(!["eq","gt","gte","lt","lte","in"].includes(s.name)||s.args.length<1||s.args[0].type!=="ref")return;const u=s.args[0].path;if(u.length===0)return;const f=u.join("_");e.push({fieldName:f,fieldPath:u})}return n(t),e}const{sum:RM,count:OM,avg:IM,min:NM,max:MM}=YN;function DM(t,e){const n=new Map,r=[...t];if(!e)return{selectToGroupByIndex:n,groupByExpressions:r};for(const[s,a]of Object.entries(e)){if(a.type==="agg")continue;const l=r.findIndex(u=>Sf(a,u));if(l===-1)throw new zI(s);n.set(s,l)}return{selectToGroupByIndex:n,groupByExpressions:r}}function N1(t,e,n,r,s){if(e.length===0){const d={};if(r){for(const[p,y]of Object.entries(r))if(y.type==="agg"){const g=y;d[p]=M1(g)}}const m=()=>({__singleGroup:!0});if(t=t.pipe(S1(m,d)),t=t.pipe(zn(([,p])=>{const g={...p.__select_results||{}};if(r)for(const[v,w]of Object.entries(r))w.type==="agg"&&(g[v]=p[v]);return["single_group",{...p,__select_results:g}]})),n&&n.length>0)for(const p of n){const y=u1(p),g=kf(y,r||{}),v=Xn(g);t=t.pipe(ri(([,w])=>{const E={result:w.__select_results};return Wa(v(E))}))}if(s&&s.length>0)for(const p of s)t=t.pipe(ri(([,y])=>{const g={result:y.__select_results};return Wa(p(g))}));return t}const a=DM(e,r),l=e.map(d=>Xn(d)),u=([,d])=>{const m={...d};delete m.__select_results;const p={};for(let y=0;y<e.length;y++){const g=l[y],v=g(m);p[`__key_${y}`]=v}return p},f={};if(r){for(const[d,m]of Object.entries(r))if(m.type==="agg"){const p=m;f[d]=M1(p)}}if(t=t.pipe(S1(u,f)),t=t.pipe(zn(([,d])=>{const m=d.__select_results||{},p={};if(r)for(const[g,v]of Object.entries(r))if(v.type!=="agg"){const w=a.selectToGroupByIndex.get(g);w!==void 0?p[g]=d[`__key_${w}`]:p[g]=m[g]}else p[g]=d[g];else for(let g=0;g<e.length;g++)p[`__key_${g}`]=d[`__key_${g}`];let y;if(e.length===1)y=d.__key_0;else{const g=[];for(let v=0;v<e.length;v++)g.push(d[`__key_${v}`]);y=JSON.stringify(g)}return[y,{...d,__select_results:p}]})),n&&n.length>0)for(const d of n){const m=u1(d),p=kf(m,r||{}),y=Xn(p);t=t.pipe(ri(([,g])=>{const v={result:g.__select_results};return y(v)}))}if(s&&s.length>0)for(const d of s)t=t.pipe(ri(([,m])=>{const p={result:m.__select_results};return Wa(d(p))}));return t}function Sf(t,e){if(!t||!e||t.type!==e.type)return!1;switch(t.type){case"ref":return!t.path||!e.path||t.path.length!==e.path.length?!1:t.path.every((n,r)=>n===e.path[r]);case"val":return t.value===e.value;case"func":return t.name===e.name&&t.args?.length===e.args?.length&&(t.args||[]).every((n,r)=>Sf(n,e.args[r]));case"agg":return t.name===e.name&&t.args?.length===e.args?.length&&(t.args||[]).every((n,r)=>Sf(n,e.args[r]));default:return!1}}function M1(t){const e=Xn(t.args[0]),n=([,a])=>{const l=e(a);return typeof l=="number"?l:l!=null?Number(l):0},r=([,a])=>{const l=e(a);return typeof l=="number"||l instanceof Date?l:l!=null?Number(l):0},s=([,a])=>e(a);switch(t.name.toLowerCase()){case"sum":return RM(n);case"count":return OM(s);case"avg":return IM(n);case"min":return NM(r);case"max":return MM(r);default:throw new PI(t.name)}}function kf(t,e,n="result"){switch(t.type){case"agg":{const r=t;for(const[s,a]of Object.entries(e))if(a.type==="agg"&&jM(r,a))return new Bn([n,s]);throw new BI(r.name)}case"func":{const r=t,s=r.args.map(a=>kf(a,e));return new jr(r.name,s)}case"ref":return t;case"val":return t;default:throw new $I(t.type)}}function jM(t,e){return t.name===e.name&&t.args.length===e.args.length&&t.args.every((n,r)=>Sf(n,e.args[r]))}function LM(t,e,n,r,s,a,l,u,f){const d=n.map(v=>{const w=kf(v.expression,r,"__select_results");return{compiledExpression:Xn(w),compareOptions:yg(v,s)}}),m=v=>{const w=v;return n.length>1?d.map(E=>E.compiledExpression(w)):n.length===1?d[0].compiledExpression(w):null},p=(v,w)=>{if(n.length>1){const E=v,k=w;for(let C=0;C<n.length;C++){const T=d[C],N=vf(T.compareOptions)(E[C],k[C]);if(N!==0)return N}return E.length-k.length}if(n.length===1){const E=d[0];return vf(E.compareOptions)(v,w)}return ug(v,w)};let y,g;if(u){let v,w,E,k=t.from.alias;const C=n[0],T=C.expression;if(T.type==="ref"){const D=Zl(t,T,s);if(D){w=D.collection;const N=D.path[0],R=yg(C,w);N&&dd(N,D.path,w,R,p),E=Xn(new Bn(D.path),!0),v=fc(w,D.path,R),v?.supports("gt")||(v=void 0),k=T.path.length>1?String(T.path[0]):t.from.alias}}if(E){const N=n.every(H=>H.expression.type==="ref")?n.map(H=>{const M=H.expression,Q=Zl(t,M,s);return Xn(Q?new Bn(Q.path):H.expression,!0)}):void 0;g={alias:k,offset:f??0,limit:u,comparator:(H,M)=>{if(n.length===1){const Q=H&&E(H),ne=M&&E(M);return p(Q,ne)}if(N){const Q=ne=>ne&&N.map(ye=>ye(ne));return p(Q(H),Q(M))}return 0},valueExtractorForRawRow:H=>{if(n.length===1)return E(H);if(N)return N.map(M=>M(H))},firstColumnValueExtractor:E,index:v,orderBy:n};const q=w?.id??s.id;a[q]=g,v&&(y=H=>{a[q].dataNeeded=()=>{const M=H();return Math.max(0,g.limit-M)}})}}return e.pipe(gM(m,{limit:u,offset:f,comparator:p,setSizeCallback:y,setWindowFn:v=>{l(w=>{v(w),g&&(g.offset=w.offset??g.offset,g.limit=w.limit??g.limit)})}}))}function yg(t,e){return t.compareOptions.stringSort!==void 0?t.compareOptions:{...e.compareOptions,direction:t.compareOptions.direction,nulls:t.compareOptions.nulls}}function zM(t,e={}){const n=r=>{const s=[];for(const[a,l]of t.entries())(r?.(l)??!0)&&s.push({type:"insert",key:a,value:l});return s};if(e.limit!==void 0&&!e.orderBy)throw new Error("limit cannot be used without orderBy");if(e.orderBy){const r=e.where?jl(e.where):void 0,s=BM(t,e.orderBy,e.limit,r,e.optimizedOnly);if(s===void 0)return;const a=[];for(const l of s){const u=t.get(l);u!==void 0&&a.push({type:"insert",key:l,value:u})}return a}if(!e.where)return n();try{const r=e.where,s=sN(r,t);if(s.canOptimize){const a=[];for(const l of s.matchingKeys){const u=t.get(l);u!==void 0&&a.push({type:"insert",key:l,value:u})}return a}else{if(e.optimizedOnly)return;const a=jl(r);return n(a)}}catch(r){console.warn(`${t.id?`[${t.id}] `:""}Error processing where clause, falling back to full scan:`,r);const s=jl(e.where);return e.optimizedOnly?void 0:n(s)}}function jl(t){const e=Cy(t);return n=>{try{const r=e(n);return Wa(r)}catch{return!1}}}function PM(t,e){const n=jl(e.whereExpression);return r=>{const s=[];for(const a of r)if(a.type==="insert")n(a.value)&&s.push(a);else if(a.type==="update"){const l=n(a.value),u=a.previousValue?n(a.previousValue):!1;l&&u?s.push(a):l&&!u?s.push({...a,type:"insert"}):!l&&u&&s.push({...a,type:"delete",value:a.previousValue})}else n(a.value)&&s.push(a);(s.length>0||r.length===0)&&t(s)}}function BM(t,e,n,r,s){if(e.length===1){const f=e[0],d=f.expression;if(d.type==="ref"){const p=d.path,y=yg(f,t);dd(p[0],p,t,y);const g=fc(t,p,y);if(g&&g.supports("gt")){const v=w=>{const E=t.get(w);return E===void 0?!1:r?.(E)??!0};return g.take(n??g.keyCount,void 0,v)}}}if(s)return;const a=[];for(const[f,d]of t.entries())(r?.(d)??!0)&&a.push({key:f,value:d});const l=(f,d)=>{for(const m of e){const p=vf(m.compareOptions),y=D1(f.value,m.expression),g=D1(d.value,m.expression),v=p(y,g);if(v!==0)return v}return 0};a.sort(l);const u=a.map(f=>f.key);return n!==void 0?u.slice(0,n):u}function D1(t,e){if(e.type==="ref"){const n=e;let r=t;for(const s of n.path)r=r?.[s];return r}else return e.type==="val"?e.value:Cy(e)(t)}class j1{constructor(e){this.map=new Map,this.sortedKeys=[],this.comparator=e}indexOf(e,n){let r=0,s=this.sortedKeys.length;if(!this.comparator){for(;r<s;){const a=Math.floor((r+s)/2),l=this.sortedKeys[a],u=wf(e,l);if(u<0)s=a;else if(u>0)r=a+1;else return a}return r}for(;r<s;){const a=Math.floor((r+s)/2),l=this.sortedKeys[a],u=this.map.get(l),f=this.comparator(n,u);if(f<0)s=a;else if(f>0)r=a+1;else{const d=wf(e,l);if(d<0)s=a;else if(d>0)r=a+1;else return a}}return r}set(e,n){if(this.map.has(e)){const s=this.map.get(e),a=this.indexOf(e,s);this.sortedKeys.splice(a,1)}const r=this.indexOf(e,n);return this.sortedKeys.splice(r,0,e),this.map.set(e,n),this}get(e){return this.map.get(e)}delete(e){if(this.map.has(e)){const n=this.map.get(e),r=this.indexOf(e,n);return this.sortedKeys.splice(r,1),this.map.delete(e)}return!1}has(e){return this.map.has(e)}clear(){this.map.clear(),this.sortedKeys=[]}get size(){return this.map.size}*[Symbol.iterator](){for(const e of this.sortedKeys)yield[e,this.map.get(e)]}entries(){return this[Symbol.iterator]()}keys(){return this.sortedKeys[Symbol.iterator]()}values(){return(function*(){for(const e of this.sortedKeys)yield this.map.get(e)}).call(this)}forEach(e){for(const n of this.sortedKeys)e(this.map.get(n),n,this.map)}}class $M{constructor(e){this.pendingSyncedTransactions=[],this.syncedMetadata=new Map,this.optimisticUpserts=new Map,this.optimisticDeletes=new Set,this.size=0,this.syncedKeys=new Set,this.preSyncVisibleState=new Map,this.recentlySyncedKeys=new Set,this.hasReceivedFirstCommit=!1,this.isCommittingSyncTransactions=!1,this.commitPendingTransactions=()=>{let n=!1;for(const l of this.transactions.values())if(l.state==="persisting"){n=!0;break}const{committedSyncedTransactions:r,uncommittedSyncedTransactions:s,hasTruncateSync:a}=this.pendingSyncedTransactions.reduce((l,u)=>(u.committed?(l.committedSyncedTransactions.push(u),u.truncate===!0&&(l.hasTruncateSync=!0)):l.uncommittedSyncedTransactions.push(u),l),{committedSyncedTransactions:[],uncommittedSyncedTransactions:[],hasTruncateSync:!1});if(!n||a){this.isCommittingSyncTransactions=!0;const l=a?r.find(y=>y.truncate)?.optimisticSnapshot:null,u=new Set;for(const y of r)for(const g of y.operations)u.add(g.key);let f=this.preSyncVisibleState;if(f.size===0){f=new Map;for(const y of u){const g=this.get(y);g!==void 0&&f.set(y,g)}}const d=[],m=this.config.sync.rowUpdateMode||"partial";for(const y of r){if(y.truncate){const g=new Set([...this.syncedData.keys(),...l?.upserts.keys()||[]]);for(const v of g){if(l?.deletes.has(v))continue;const w=l?.upserts.get(v)||this.syncedData.get(v);w!==void 0&&d.push({type:"delete",key:v,value:w})}this.syncedData.clear(),this.syncedMetadata.clear(),this.syncedKeys.clear();for(const v of u)f.delete(v);this._events.emit("truncate",{type:"truncate",collection:this.collection})}for(const g of y.operations){const v=g.key;switch(this.syncedKeys.add(v),g.type){case"insert":this.syncedMetadata.set(v,g.metadata);break;case"update":this.syncedMetadata.set(v,Object.assign({},this.syncedMetadata.get(v),g.metadata));break;case"delete":this.syncedMetadata.delete(v);break}switch(g.type){case"insert":this.syncedData.set(v,g.value);break;case"update":{if(m==="partial"){const w=Object.assign({},this.syncedData.get(v),g.value);this.syncedData.set(v,w)}else this.syncedData.set(v,g.value);break}case"delete":this.syncedData.delete(v);break}}}if(a){const y=new Set;for(const w of r)for(const E of w.operations)(E.type==="insert"||E.type==="update")&&y.add(E.key);const g=new Map(l.upserts),v=new Set(l.deletes);for(const[w,E]of g)if(!v.has(w))if(y.has(w)){let k=!1;for(let C=d.length-1;C>=0;C--){const T=d[C];if(T.key===w&&T.type==="insert"){T.value=E,k=!0;break}}k||d.push({type:"insert",key:w,value:E})}else d.push({type:"insert",key:w,value:E});if(d.length>0&&v.size>0){const w=[];for(const E of d)E.type==="insert"&&v.has(E.key)||w.push(E);d.length=0,d.push(...w)}this.lifecycle.status!=="ready"&&this.lifecycle.markReady()}if(this.optimisticUpserts.clear(),this.optimisticDeletes.clear(),this.isCommittingSyncTransactions=!1,a&&l){for(const[y,g]of l.upserts)this.optimisticUpserts.set(y,g);for(const y of l.deletes)this.optimisticDeletes.add(y)}for(const y of this.transactions.values())if(!["completed","failed"].includes(y.state)){for(const g of y.mutations)if(this.isThisCollection(g.collection)&&g.optimistic)switch(g.type){case"insert":case"update":this.optimisticUpserts.set(g.key,g.modified),this.optimisticDeletes.delete(g.key);break;case"delete":this.optimisticUpserts.delete(g.key),this.optimisticDeletes.add(g.key);break}}const p=new Map;for(const y of this.transactions.values())if(y.state==="completed")for(const g of y.mutations)g.optimistic&&this.isThisCollection(g.collection)&&u.has(g.key)&&p.set(g.key,{type:g.type,value:g.modified});for(const y of u){const g=f.get(y),v=this.get(y),w=p.get(y);let E=!1;w&&(w.type==="delete"&&g!==void 0&&v===void 0&&Ur(w.value,g)||v!==void 0&&Ur(w.value,v))&&(E=!0),E||(g===void 0&&v!==void 0?d.push({type:"insert",key:y,value:v}):g!==void 0&&v===void 0?d.push({type:"delete",key:y,value:g}):g!==void 0&&v!==void 0&&!Ur(g,v)&&d.push({type:"update",key:y,value:v,previousValue:g}))}this.size=this.calculateSize(),d.length>0&&this.indexes.updateIndexes(d),this.changes.emitEvents(d,!0),this.pendingSyncedTransactions=s,this.preSyncVisibleState.clear(),Promise.resolve().then(()=>{this.recentlySyncedKeys.clear()}),this.hasReceivedFirstCommit||(this.hasReceivedFirstCommit=!0)}},this.config=e,this.transactions=new j1((n,r)=>n.compareCreatedAt(r)),this.syncedData=new j1(e.compare)}setDeps(e){this.collection=e.collection,this.lifecycle=e.lifecycle,this.changes=e.changes,this.indexes=e.indexes,this._events=e.events}get(e){const{optimisticDeletes:n,optimisticUpserts:r,syncedData:s}=this;if(!n.has(e))return r.has(e)?r.get(e):s.get(e)}has(e){const{optimisticDeletes:n,optimisticUpserts:r,syncedData:s}=this;return n.has(e)?!1:r.has(e)?!0:s.has(e)}*keys(){const{syncedData:e,optimisticDeletes:n,optimisticUpserts:r}=this;for(const s of e.keys())n.has(s)||(yield s);for(const s of r.keys())!e.has(s)&&!n.has(s)&&(yield s)}*values(){for(const e of this.keys()){const n=this.get(e);n!==void 0&&(yield n)}}*entries(){for(const e of this.keys()){const n=this.get(e);n!==void 0&&(yield[e,n])}}*[Symbol.iterator](){for(const[e,n]of this.entries())yield[e,n]}forEach(e){let n=0;for(const[r,s]of this.entries())e(s,r,n++)}map(e){const n=[];let r=0;for(const[s,a]of this.entries())n.push(e(a,s,r++));return n}isThisCollection(e){return e===this.collection}recomputeOptimisticState(e=!1){if(this.isCommittingSyncTransactions&&!e)return;const n=new Map(this.optimisticUpserts),r=new Set(this.optimisticDeletes);this.optimisticUpserts.clear(),this.optimisticDeletes.clear();const s=[];for(const u of this.transactions.values())["completed","failed"].includes(u.state)||s.push(u);for(const u of s)for(const f of u.mutations)if(this.isThisCollection(f.collection)&&f.optimistic)switch(f.type){case"insert":case"update":this.optimisticUpserts.set(f.key,f.modified),this.optimisticDeletes.delete(f.key);break;case"delete":this.optimisticUpserts.delete(f.key),this.optimisticDeletes.add(f.key);break}this.size=this.calculateSize();const a=[];this.collectOptimisticChanges(n,r,a);const l=a.filter(u=>!!(!this.recentlySyncedKeys.has(u.key)||e));if(this.pendingSyncedTransactions.length>0&&!e){const u=new Set;for(const d of this.pendingSyncedTransactions)for(const m of d.operations)u.add(m.key);const f=l.filter(d=>!(d.type==="delete"&&u.has(d.key)&&!s.some(p=>p.mutations.some(y=>this.isThisCollection(y.collection)&&y.key===d.key))));f.length>0&&this.indexes.updateIndexes(f),this.changes.emitEvents(f,e)}else l.length>0&&this.indexes.updateIndexes(l),this.changes.emitEvents(l,e)}calculateSize(){const e=this.syncedData.size,n=Array.from(this.optimisticDeletes).filter(s=>this.syncedData.has(s)&&!this.optimisticUpserts.has(s)).length,r=Array.from(this.optimisticUpserts.keys()).filter(s=>!this.syncedData.has(s)).length;return e-n+r}collectOptimisticChanges(e,n,r){const s=new Set([...e.keys(),...this.optimisticUpserts.keys(),...n,...this.optimisticDeletes]);for(const a of s){const l=this.get(a),u=this.getPreviousValue(a,e,n);u!==void 0&&l===void 0?r.push({type:"delete",key:a,value:u}):u===void 0&&l!==void 0?r.push({type:"insert",key:a,value:l}):u!==void 0&&l!==void 0&&u!==l&&r.push({type:"update",key:a,value:l,previousValue:u})}}getPreviousValue(e,n,r){if(!r.has(e))return n.has(e)?n.get(e):this.syncedData.get(e)}scheduleTransactionCleanup(e){if(e.state==="completed"){this.transactions.delete(e.id);return}e.isPersisted.promise.then(()=>{this.transactions.delete(e.id)}).catch(()=>{})}capturePreSyncVisibleState(){if(this.pendingSyncedTransactions.length===0)return;const e=new Set;for(const n of this.pendingSyncedTransactions)for(const r of n.operations)e.add(r.key);for(const n of e)this.recentlySyncedKeys.add(n);for(const n of e)if(!this.preSyncVisibleState.has(n)){const r=this.get(n);r!==void 0&&this.preSyncVisibleState.set(n,r)}}onTransactionStateChange(){this.changes.shouldBatchEvents=this.pendingSyncedTransactions.length>0,this.capturePreSyncVisibleState(),this.recomputeOptimisticState(!1)}cleanup(){this.syncedData.clear(),this.syncedMetadata.clear(),this.optimisticUpserts.clear(),this.optimisticDeletes.clear(),this.size=0,this.pendingSyncedTransactions=[],this.syncedKeys.clear(),this.hasReceivedFirstCommit=!1}}class Ck{constructor(){this.listeners=new Map}on(e,n){return this.listeners.has(e)||this.listeners.set(e,new Set),this.listeners.get(e).add(n),()=>{this.listeners.get(e)?.delete(n)}}once(e,n){const r=this.on(e,s=>{n(s),r()});return r}off(e,n){this.listeners.get(e)?.delete(n)}waitFor(e,n){return new Promise((r,s)=>{let a;const l=this.on(e,u=>{a&&(clearTimeout(a),a=void 0),r(u),l()});n&&(a=setTimeout(()=>{a=void 0,l(),s(new Error(`Timeout waiting for event ${String(e)}`))},n))})}emitInner(e,n){this.listeners.get(e)?.forEach(r=>{try{r(n)}catch(s){queueMicrotask(()=>{throw s})}})}clearListeners(){this.listeners.clear()}}function UM(t,e){if(e.length===0||t.length===0)return;if(t.length===1){const{expression:r,compareOptions:s}=t[0];return(s.direction==="asc"?I1:pg)(r,new Wn(e[0]))}const n=[];for(let r=0;r<t.length&&r<e.length;r++){const s=t[r],a=e[r],l=[];for(let d=0;d<r;d++){const m=t[d],p=e[d];l.push(hg(m.expression,new Wn(p)))}const f=(s.compareOptions.direction==="asc"?I1:pg)(s.expression,new Wn(a));if(l.length===0)n.push(f);else{const d=[...l,f];n.push(d.reduce((m,p)=>mg(m,p)))}}return n.length===1?n[0]:n.reduce((r,s)=>kM(r,s))}class qM extends Ck{constructor(e,n,r){super(),this.collection=e,this.callback=n,this.options=r,this.loadedInitialState=!1,this.skipFiltering=!1,this.snapshotSent=!1,this.loadedSubsets=[],this.sentKeys=new Set,this.limitedSnapshotRowCount=0,this._status="ready",this.pendingLoadSubsetPromises=new Set,this.isBufferingForTruncate=!1,this.truncateBuffer=[],this.pendingTruncateRefetches=new Set,r.onUnsubscribe&&this.on("unsubscribed",a=>r.onUnsubscribe(a)),r.whereExpression&&TM(r.whereExpression,this.collection);const s=a=>{n(a),this.trackSentKeys(a)};this.callback=s,this.filteredCallback=r.whereExpression?PM(this.callback,r):this.callback,this.truncateCleanup=this.collection.on("truncate",()=>{this.handleTruncate()})}get status(){return this._status}handleTruncate(){const e=[...this.loadedSubsets],n=this.collection._sync.syncLoadSubsetFn!==null;if(e.length===0||!n){this.snapshotSent=!1,this.loadedInitialState=!1,this.limitedSnapshotRowCount=0,this.lastSentKey=void 0,this.loadedSubsets=[];return}this.isBufferingForTruncate=!0,this.truncateBuffer=[],this.pendingTruncateRefetches.clear(),this.snapshotSent=!1,this.loadedInitialState=!1,this.limitedSnapshotRowCount=0,this.lastSentKey=void 0,this.loadedSubsets=[],queueMicrotask(()=>{if(this.isBufferingForTruncate){for(const r of e){const s=this.collection._sync.loadSubset(r);this.loadedSubsets.push(r),this.trackLoadSubsetPromise(s),s instanceof Promise&&(this.pendingTruncateRefetches.add(s),s.catch(()=>{}).finally(()=>{this.pendingTruncateRefetches.delete(s),this.checkTruncateRefetchComplete()}))}this.pendingTruncateRefetches.size===0&&this.flushTruncateBuffer()}})}checkTruncateRefetchComplete(){this.pendingTruncateRefetches.size===0&&this.isBufferingForTruncate&&this.flushTruncateBuffer()}flushTruncateBuffer(){this.isBufferingForTruncate=!1;const e=this.truncateBuffer.flat();e.length>0&&this.filteredCallback(e),this.truncateBuffer=[]}setOrderByIndex(e){this.orderByIndex=e}setStatus(e){if(this._status===e)return;const n=this._status;this._status=e,this.emitInner("status:change",{type:"status:change",subscription:this,previousStatus:n,status:e});const r=`status:${e}`;this.emitInner(r,{type:r,subscription:this,previousStatus:n,status:e})}trackLoadSubsetPromise(e){e instanceof Promise&&(this.pendingLoadSubsetPromises.add(e),this.setStatus("loadingSubset"),e.finally(()=>{this.pendingLoadSubsetPromises.delete(e),this.pendingLoadSubsetPromises.size===0&&this.setStatus("ready")}))}hasLoadedInitialState(){return this.loadedInitialState}hasSentAtLeastOneSnapshot(){return this.snapshotSent}emitEvents(e){const n=this.filterAndFlipChanges(e);this.isBufferingForTruncate?n.length>0&&this.truncateBuffer.push(n):this.filteredCallback(n)}requestSnapshot(e){if(this.loadedInitialState)return!1;const n={where:this.options.whereExpression,optimizedOnly:e?.optimizedOnly??!1};if(e){if("where"in e){const f=e.where;if(n.where){const d=n.where,m=mg(d,f);n.where=m}else n.where=f}}else this.loadedInitialState=!0;const r={where:n.where,subscription:this,orderBy:e?.orderBy,limit:e?.limit},s=this.collection._sync.loadSubset(r);this.loadedSubsets.push(r),(e?.trackLoadSubsetPromise??!0)&&this.trackLoadSubsetPromise(s);const l=this.collection.currentStateAsChanges(n);if(l===void 0)return!1;const u=l.filter(f=>!this.sentKeys.has(f.key));for(const f of u)this.sentKeys.add(f.key);return this.snapshotSent=!0,this.callback(u),!0}requestLimitedSnapshot({orderBy:e,limit:n,minValues:r,offset:s}){if(!n)throw new Error("limit is required");if(!this.orderByIndex)throw new Error("Ordered snapshot was requested but no index was found. You have to call setOrderByIndex before requesting an ordered snapshot.");const l=r?.[0],u=this.orderByIndex,f=this.options.whereExpression,d=f?jl(f):void 0,m=R=>{if(this.sentKeys.has(R))return!1;const $=this.collection.get(R);return $===void 0?!1:d?.($)??!0};let p=l;const y=[];let g=[];if(l!==void 0){const{expression:R}=e[0],$=this.collection.currentStateAsChanges({where:hg(R,new Wn(l))});if($){const q=$.map(M=>M.key).filter(M=>!this.sentKeys.has(M)&&m(M));g.push(...q);const H=u.take(n-g.length,l,m);g.push(...H)}else g=u.take(n,l,m)}else g=u.take(n,l,m);const v=()=>Math.max(n-y.length,0),w=()=>g.length===0,E=e[0].expression,k=E.type==="ref"?Xn(new Bn(E.path),!0):null;for(;v()>0&&!w();){const R=new Set;for(const $ of g){const q=this.collection.get($);y.push({type:"insert",key:$,value:q}),p=k?k(q):q,R.add($)}g=u.take(v(),p,m)}const C=this.limitedSnapshotRowCount;for(const R of y)this.sentKeys.add(R.key);this.callback(y),this.limitedSnapshotRowCount+=y.length,y.length>0&&(this.lastSentKey=y[y.length-1].key);let T;if(r!==void 0&&r.length>0){const R=UM(e,r);if(R){const{expression:$}=e[0],q=r[0];let H;if(q instanceof Date){const M=new Date(q.getTime()+1);H=mg(SM($,new Wn(q)),pg($,new Wn(M)))}else H=hg($,new Wn(q));T={whereFrom:R,whereCurrent:H,lastKey:this.lastSentKey}}}const D={where:f,limit:n,orderBy:e,cursor:T,offset:s??C,subscription:this},N=this.collection._sync.loadSubset(D);this.loadedSubsets.push(D),this.trackLoadSubsetPromise(N)}filterAndFlipChanges(e){if(this.loadedInitialState||this.skipFiltering)return e;const n=this.isBufferingForTruncate,r=[];for(const s of e){let a=s;if(this.sentKeys.has(s.key)){if(s.type==="insert")continue;s.type==="delete"&&this.sentKeys.delete(s.key)}else{if(s.type==="update")a={...s,type:"insert",previousValue:void 0};else if(s.type==="delete"&&!n)continue;this.sentKeys.add(s.key)}r.push(a)}return r}trackSentKeys(e){if(!(this.loadedInitialState||this.skipFiltering))for(const n of e)n.type==="delete"?this.sentKeys.delete(n.key):this.sentKeys.add(n.key)}markAllStateAsSeen(){this.skipFiltering=!0}unsubscribe(){this.truncateCleanup?.(),this.truncateCleanup=void 0,this.isBufferingForTruncate=!1,this.truncateBuffer=[],this.pendingTruncateRefetches.clear();for(const e of this.loadedSubsets)this.collection._sync.unloadSubset(e);this.loadedSubsets=[],this.emitInner("unsubscribed",{type:"unsubscribed",subscription:this}),this.clearListeners()}}class FM{constructor(){this.activeSubscribersCount=0,this.changeSubscriptions=new Set,this.batchedEvents=[],this.shouldBatchEvents=!1}setDeps(e){this.lifecycle=e.lifecycle,this.sync=e.sync,this.events=e.events,this.collection=e.collection}emitEmptyReadyEvent(){for(const e of this.changeSubscriptions)e.emitEvents([])}emitEvents(e,n=!1){if(this.shouldBatchEvents&&!n){this.batchedEvents.push(...e);return}let r=e;if(n&&(this.batchedEvents.length>0&&(r=[...this.batchedEvents,...e]),this.batchedEvents=[],this.shouldBatchEvents=!1),r.length!==0)for(const s of this.changeSubscriptions)s.emitEvents(r)}subscribeChanges(e,n={}){this.addSubscriber();const r=new qM(this.collection,e,{...n,onUnsubscribe:()=>{this.removeSubscriber(),this.changeSubscriptions.delete(r)}});return n.includeInitialState?r.requestSnapshot({trackLoadSubsetPromise:!1}):n.includeInitialState===!1&&r.markAllStateAsSeen(),this.changeSubscriptions.add(r),r}addSubscriber(){const e=this.activeSubscribersCount;this.activeSubscribersCount++,this.lifecycle.cancelGCTimer(),(this.lifecycle.status==="cleaned-up"||this.lifecycle.status==="idle")&&this.sync.startSync(),this.events.emitSubscribersChange(this.activeSubscribersCount,e)}removeSubscriber(){const e=this.activeSubscribersCount;if(this.activeSubscribersCount--,this.activeSubscribersCount===0)this.lifecycle.startGCTimer();else if(this.activeSubscribersCount<0)throw new YO;this.events.emitSubscribersChange(this.activeSubscribersCount,e)}cleanup(){this.batchedEvents=[],this.shouldBatchEvents=!1}}const VM=t=>setTimeout(()=>{t({didTimeout:!0,timeRemaining:()=>50})},0),HM=t=>{clearTimeout(t)},GM=typeof window<"u"&&"requestIdleCallback"in window?(t,e)=>window.requestIdleCallback(t,e):(t,e)=>VM(t),mm=typeof window<"u"&&"cancelIdleCallback"in window?t=>window.cancelIdleCallback(t):HM;class KM{constructor(e,n){this.status="idle",this.hasBeenReady=!1,this.hasReceivedFirstCommit=!1,this.onFirstReadyCallbacks=[],this.gcTimeoutId=null,this.idleCallbackId=null,this.config=e,this.id=n}setDeps(e){this.indexes=e.indexes,this.events=e.events,this.changes=e.changes,this.sync=e.sync,this.state=e.state}validateStatusTransition(e,n){if(e===n)return;if(!{idle:["loading","error","cleaned-up"],loading:["ready","error","cleaned-up"],ready:["cleaned-up","error"],error:["cleaned-up","idle"],"cleaned-up":["loading","error"]}[e].includes(n))throw new JO(e,n,this.id)}setStatus(e,n=!1){if(e==="ready"&&!n)throw new uc(`You can't directly call "setStatus('ready'). You must use markReady instead.`);this.validateStatusTransition(this.status,e);const r=this.status;this.status=e,e==="ready"&&!this.indexes.isIndexesResolved&&this.indexes.resolveAllIndexes().catch(s=>{console.warn(`${this.config.id?`[${this.config.id}] `:""}Failed to resolve indexes:`,s)}),this.events.emitStatusChange(e,r)}validateCollectionUsable(e){switch(this.status){case"error":throw new ZO(e,this.id);case"cleaned-up":this.sync.startSync();break}}markReady(){if(this.validateStatusTransition(this.status,"ready"),this.status==="loading"){if(this.setStatus("ready",!0),!this.hasBeenReady){this.hasBeenReady=!0,this.hasReceivedFirstCommit||(this.hasReceivedFirstCommit=!0);const e=[...this.onFirstReadyCallbacks];this.onFirstReadyCallbacks=[],e.forEach(n=>n())}this.changes.changeSubscriptions.size>0&&this.changes.emitEmptyReadyEvent()}}startGCTimer(){this.gcTimeoutId&&clearTimeout(this.gcTimeoutId);const e=this.config.gcTime??3e5;e!==0&&(this.gcTimeoutId=setTimeout(()=>{this.changes.activeSubscribersCount===0&&this.scheduleIdleCleanup()},e))}cancelGCTimer(){this.gcTimeoutId&&(clearTimeout(this.gcTimeoutId),this.gcTimeoutId=null),this.idleCallbackId!==null&&(mm(this.idleCallbackId),this.idleCallbackId=null)}scheduleIdleCleanup(){this.idleCallbackId!==null&&mm(this.idleCallbackId),this.idleCallbackId=GM(e=>{this.changes.activeSubscribersCount===0?this.performCleanup(e)&&(this.idleCallbackId=null):this.idleCallbackId=null},{timeout:1e3})}performCleanup(e){return!e||e.timeRemaining()>0||e.didTimeout?(this.sync.cleanup(),this.state.cleanup(),this.changes.cleanup(),this.indexes.cleanup(),this.gcTimeoutId&&(clearTimeout(this.gcTimeoutId),this.gcTimeoutId=null),this.hasBeenReady=!1,this.onFirstReadyCallbacks=[],this.setStatus("cleaned-up"),this.events.cleanup(),!0):(this.scheduleIdleCleanup(),!1)}onFirstReady(e){if(this.hasBeenReady){e();return}this.onFirstReadyCallbacks.push(e)}cleanup(){this.idleCallbackId!==null&&(mm(this.idleCallbackId),this.idleCallbackId=null),this.performCleanup()}}const Ny=Symbol("liveQueryInternal");class ZM{constructor(e,n){this.preloadPromise=null,this.syncCleanupFn=null,this.syncLoadSubsetFn=null,this.syncUnloadSubsetFn=null,this.pendingLoadSubsetPromises=new Set,this.config=e,this.id=n,this.syncMode=e.syncMode??"eager"}setDeps(e){this.collection=e.collection,this.state=e.state,this.lifecycle=e.lifecycle,this._events=e.events}startSync(){if(!(this.lifecycle.status!=="idle"&&this.lifecycle.status!=="cleaned-up")){this.lifecycle.setStatus("loading");try{const e=JM(this.config.sync.sync({collection:this.collection,begin:()=>{this.state.pendingSyncedTransactions.push({committed:!1,operations:[],deletedKeys:new Set})},write:n=>{const r=this.state.pendingSyncedTransactions[this.state.pendingSyncedTransactions.length-1];if(!r)throw new p1;if(r.committed)throw new m1;let s;"key"in n?s=n.key:s=this.config.getKey(n.value);let a=n.type;if(n.type==="insert"){const u=this.state.syncedData.has(s),f=r.deletedKeys.has(s),d=r.truncate===!0;if(u&&!f&&!d){const m=this.state.syncedData.get(s);if(m!==void 0&&Ur(m,n.value))a="update";else{const y=this.config.utils[Ny];throw new tI(s,this.id,{hasCustomGetKey:y?.hasCustomGetKey??!1,hasJoins:y?.hasJoins??!1})}}}const l={...n,type:a,key:s};r.operations.push(l),a==="delete"&&r.deletedKeys.add(s)},commit:()=>{const n=this.state.pendingSyncedTransactions[this.state.pendingSyncedTransactions.length-1];if(!n)throw new mI;if(n.committed)throw new gI;n.committed=!0,this.state.commitPendingTransactions()},markReady:()=>{this.lifecycle.markReady()},truncate:()=>{const n=this.state.pendingSyncedTransactions[this.state.pendingSyncedTransactions.length-1];if(!n)throw new p1;if(n.committed)throw new m1;n.operations=[],n.deletedKeys.clear(),n.truncate=!0,n.optimisticSnapshot={upserts:new Map(this.state.optimisticUpserts),deletes:new Set(this.state.optimisticDeletes)}}}));if(this.syncCleanupFn=e?.cleanup??null,this.syncLoadSubsetFn=e?.loadSubset??null,this.syncUnloadSubsetFn=e?.unloadSubset??null,this.syncMode==="on-demand"&&!this.syncLoadSubsetFn)throw new cc(`Collection "${this.id}" is configured with syncMode "on-demand" but the sync function did not return a loadSubset handler. Either provide a loadSubset handler or use syncMode "eager".`)}catch(e){throw this.lifecycle.setStatus("error"),e}}}preload(){return this.preloadPromise?this.preloadPromise:(this.syncMode==="on-demand"&&console.warn(`${this.id?`[${this.id}] `:""}Calling .preload() on a collection with syncMode "on-demand" is a no-op. In on-demand mode, data is only loaded when queries request it. Instead, create a live query and call .preload() on that to load the specific data you need. See https://tanstack.com/blog/tanstack-db-0.5-query-driven-sync for more details.`),this.preloadPromise=new Promise((e,n)=>{if(this.lifecycle.status==="ready"){e();return}if(this.lifecycle.status==="error"){n(new QO);return}if(this.lifecycle.onFirstReady(()=>{e()}),this.lifecycle.status==="idle"||this.lifecycle.status==="cleaned-up")try{this.startSync()}catch(r){n(r);return}}),this.preloadPromise)}get isLoadingSubset(){return this.pendingLoadSubsetPromises.size>0}trackLoadPromise(e){const n=!this.isLoadingSubset;this.pendingLoadSubsetPromises.add(e),n&&this._events.emit("loadingSubset:change",{type:"loadingSubset:change",collection:this.collection,isLoadingSubset:!0,previousIsLoadingSubset:!1,loadingSubsetTransition:"start"}),e.finally(()=>{const r=this.pendingLoadSubsetPromises.size===1&&this.pendingLoadSubsetPromises.has(e);this.pendingLoadSubsetPromises.delete(e),r&&this._events.emit("loadingSubset:change",{type:"loadingSubset:change",collection:this.collection,isLoadingSubset:!1,previousIsLoadingSubset:!0,loadingSubsetTransition:"end"})})}loadSubset(e){if(this.syncMode==="eager")return!0;if(this.syncLoadSubsetFn){const n=this.syncLoadSubsetFn(e);if(n instanceof Promise)return this.trackLoadPromise(n),n}return!0}unloadSubset(e){this.syncUnloadSubsetFn&&this.syncUnloadSubsetFn(e)}cleanup(){try{this.syncCleanupFn&&(this.syncCleanupFn(),this.syncCleanupFn=null)}catch(e){queueMicrotask(()=>{if(e instanceof Error){const n=new y1(this.id,e);throw n.cause=e,n.stack=e.stack,n}else throw new y1(this.id,e)})}this.preloadPromise=null}}function JM(t){if(typeof t=="function")return{cleanup:t};if(typeof t=="object")return t}function Tk(t){return typeof t=="function"&&t.prototype!==void 0&&t.prototype.constructor===t}async function QM(t){return Tk(t)?t:await t()}class YM{constructor(e,n,r,s,a,l){this.id=e,this.expression=n,this.name=r,this.resolver=s,this.options=a,this.collectionEntries=l,this.indexPromise=null,this.resolvedIndex=null,Tk(this.resolver)&&(this.resolvedIndex=new this.resolver(this.id,this.expression,this.name,this.options),this.collectionEntries&&this.resolvedIndex.build(this.collectionEntries))}async resolve(){return this.resolvedIndex?this.resolvedIndex:(this.indexPromise||(this.indexPromise=this.createIndex()),this.resolvedIndex=await this.indexPromise,this.resolvedIndex)}isResolved(){return this.resolvedIndex!==null}getResolved(){if(!this.resolvedIndex)throw new Error(`Index ${this.id} has not been resolved yet. Ensure collection is synced.`);return this.resolvedIndex}getId(){return this.id}getName(){return this.name}getExpression(){return this.expression}async createIndex(){const e=await QM(this.resolver);return new e(this.id,this.expression,this.name,this.options)}}class WM{constructor(e,n){this.indexId=e,this.lazyIndex=n}get index(){return this.lazyIndex.getResolved()}get isReady(){return this.lazyIndex.isResolved()}async whenReady(){return await this.lazyIndex.resolve()}get id(){return this.indexId}get name(){return this.isReady?this.index.name:this.lazyIndex.getName()}get expression(){return this.lazyIndex.getExpression()}supports(e){return this.index.supports(e)}getStats(){return this.index.getStats()}matchesField(e){const n=this.expression;return n.type==="ref"&&n.path.length===e.length&&n.path.every((r,s)=>r===e[s])}get keyCount(){return this.index.keyCount}get indexedKeysSet(){return this.index.indexedKeysSet}get orderedEntriesArray(){return this.index.orderedEntriesArray}get valueMapData(){return this.index.valueMapData}equalityLookup(e){return this.index.equalityLookup?.(e)??new Set}rangeQuery(e){return this.index.rangeQuery?.(e)??new Set}inArrayLookup(e){return this.index.inArrayLookup?.(e)??new Set}_getLazyWrapper(){return this.lazyIndex}}class XM{constructor(){this.lazyIndexes=new Map,this.resolvedIndexes=new Map,this.isIndexesResolved=!1,this.indexCounter=0}setDeps(e){this.state=e.state,this.lifecycle=e.lifecycle}createIndex(e,n={}){this.lifecycle.validateCollectionUsable("createIndex");const r=++this.indexCounter,s=xM(),a=e(s),l=hn(a),u=n.indexType??gg,f=new YM(r,l,n.name,u,n.options,this.state.entries());if(this.lazyIndexes.set(r,f),u===gg)try{const d=f.getResolved();this.resolvedIndexes.set(r,d)}catch(d){console.warn("Failed to resolve BTreeIndex:",d)}else if(typeof u=="function"&&u.prototype)try{const d=f.getResolved();this.resolvedIndexes.set(r,d)}catch{this.resolveSingleIndex(r,f).catch(d=>{console.warn("Failed to resolve single index:",d)})}else this.isIndexesResolved&&this.resolveSingleIndex(r,f).catch(d=>{console.warn("Failed to resolve single index:",d)});return new WM(r,f)}async resolveAllIndexes(){if(this.isIndexesResolved)return;const e=Array.from(this.lazyIndexes.entries()).map(async([n,r])=>{const s=await r.resolve();return s.build(this.state.entries()),this.resolvedIndexes.set(n,s),{indexId:n,resolvedIndex:s}});await Promise.all(e),this.isIndexesResolved=!0}async resolveSingleIndex(e,n){const r=await n.resolve();return r.build(this.state.entries()),this.resolvedIndexes.set(e,r),r}get indexes(){return this.resolvedIndexes}updateIndexes(e){for(const n of this.resolvedIndexes.values())for(const r of e)switch(r.type){case"insert":n.add(r.key,r.value);break;case"update":r.previousValue?n.update(r.key,r.previousValue,r.value):n.add(r.key,r.value);break;case"delete":n.remove(r.key,r.value);break}}cleanup(){this.lazyIndexes.clear(),this.resolvedIndexes.clear()}}var e4={};const t4=new Set(["find","findLast","findIndex","findLastIndex","filter","map","flatMap","forEach","some","every","reduce","reduceRight"]),n4=new Set(["pop","push","shift","unshift","splice","sort","reverse","fill","copyWithin"]),r4=new Set(["set","delete","clear","add"]),s4=new Set(["entries","keys","values","forEach"]);function My(t){return t!==null&&typeof t=="object"&&!(t instanceof Date)&&!(t instanceof RegExp)&&!xf(t)}function i4(t,e,n,r){if(t4.has(t))return function(...s){const a=s[0];if(typeof a!="function")return e.apply(n.copy_,s);const l=(d,m)=>{if(My(d)){const p={tracker:n,prop:String(m)},{proxy:y}=r(d,p);return y}return d},u=function(d,m,p){const y=l(d,m);return a.call(this,y,m,p)};if(t==="reduce"||t==="reduceRight"){const d=function(m,p,y,g){const v=l(p,y);return a.call(this,m,v,y,g)};return e.apply(n.copy_,[d,...s.slice(1)])}const f=e.apply(n.copy_,[u,...s.slice(1)]);if((t==="find"||t==="findLast")&&f&&typeof f=="object"){const d=n.copy_.indexOf(f);if(d!==-1)return l(f,d)}return t==="filter"&&Array.isArray(f)?f.map(d=>{const m=n.copy_.indexOf(d);return m!==-1?l(d,m):d}):f}}function a4(t,e){return function(){const n=t.copy_;let r=0;return{next(){if(r>=n.length)return{done:!0,value:void 0};const s=n[r];let a=s;if(My(s)){const l={tracker:t,prop:String(r)},{proxy:u}=e(s,l);a=u}return r++,{done:!1,value:a}},[Symbol.iterator](){return this}}}}function L1(t,e,n){return function(...r){const s=t.apply(e.copy_,r);return n(e),s}}function o4(t,e,n,r,s,a,l){if(s4.has(t)||e===Symbol.iterator)return function(...f){const d=n.apply(s.copy_,f);if(t==="forEach"){const p=f[0];if(typeof p=="function"){const y=function(g,v,w){const E=p.call(this,g,v,w);return l(s),E};return n.apply(r,[y,...f.slice(1)])}}if(t==="entries"||t==="values"||t===Symbol.iterator.toString()||e===Symbol.iterator){const p=d,y=new Map;if(t==="values"&&r instanceof Map)for(const[v,w]of s.copy_.entries())y.set(w,v);const g=new Map;if(r instanceof Set)for(const v of s.copy_.values())g.set(v,v);return{next(){const v=p.next();if(!v.done&&v.value&&typeof v.value=="object"){if(t==="entries"&&Array.isArray(v.value)&&v.value.length===2){if(v.value[1]&&typeof v.value[1]=="object"){const w=v.value[0],E={tracker:s,prop:w,updateMap:C=>{s.copy_ instanceof Map&&s.copy_.set(w,C)}},{proxy:k}=a(v.value[1],E);v.value[1]=k}}else if(t==="values"||t===Symbol.iterator.toString()||e===Symbol.iterator)if(t==="values"&&r instanceof Map){const w=y.get(v.value);if(w!==void 0){const E={tracker:s,prop:w,updateMap:C=>{s.copy_ instanceof Map&&s.copy_.set(w,C)}},{proxy:k}=a(v.value,E);v.value=k}}else if(r instanceof Set){const w=v.value,E={tracker:s,prop:w,updateSet:C=>{s.copy_ instanceof Set&&(s.copy_.delete(w),s.copy_.add(C),g.set(w,C))}},{proxy:k}=a(v.value,E);v.value=k}else{const w=Symbol("iterator-value"),{proxy:E}=a(v.value,{tracker:s,prop:w});v.value=E}}return v},[Symbol.iterator](){return this}}}return d}}function Xe(...t){const e=typeof window<"u"&&typeof localStorage<"u";e&&localStorage.getItem("DEBUG")==="true"?console.log("[proxy]",...t):!e&&typeof process<"u"&&e4.DEBUG==="true"&&console.log("[proxy]",...t)}function Es(t,e=new WeakMap){if(t==null||typeof t!="object")return t;if(e.has(t))return e.get(t);if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp)return new RegExp(t.source,t.flags);if(Array.isArray(t)){const s=[];return e.set(t,s),t.forEach((a,l)=>{s[l]=Es(a,e)}),s}if(ArrayBuffer.isView(t)&&!(t instanceof DataView)){const s=Object.getPrototypeOf(t).constructor,a=new s(t.length);e.set(t,a);for(let l=0;l<t.length;l++)a[l]=t[l];return a}if(t instanceof Map){const s=new Map;return e.set(t,s),t.forEach((a,l)=>{s.set(l,Es(a,e))}),s}if(t instanceof Set){const s=new Set;return e.set(t,s),t.forEach(a=>{s.add(Es(a,e))}),s}if(xf(t))return t;const n={};e.set(t,n);for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(n[s]=Es(t[s],e));const r=Object.getOwnPropertySymbols(t);for(const s of r)n[s]=Es(t[s],e);return n}let z1=0;function l4(){return z1+=1,z1}function Dy(t,e){const n=new Map;function r(p,y){if(Xe("Object ID:",p.constructor.name),n.has(p))return n.get(p);{const g=Dy(p,y);return n.set(p,g),g}}const s=new Map,a={copy_:Es(t),originalObject:Es(t),proxyCount:l4(),modified:!1,assigned_:{},parent:e,target:t};Xe("createChangeProxy called for target",t,a.proxyCount);function l(p){p.modified||(p.modified=!0),p.parent&&(Xe("propagating change to parent"),"updateMap"in p.parent?p.parent.updateMap(p.copy_):"updateSet"in p.parent?p.parent.updateSet(p.copy_):(p.parent.tracker.copy_[p.parent.prop]=p.copy_,p.parent.tracker.assigned_[p.parent.prop]=!0),l(p.parent.tracker))}function u(p){if(Xe("checkIfReverted called with assigned keys:",Object.keys(p.assigned_)),Object.keys(p.assigned_).length===0&&Object.getOwnPropertySymbols(p.assigned_).length===0)return Xe("No assigned properties, returning true"),!0;for(const g in p.assigned_)if(p.assigned_[g]===!0){const v=p.copy_[g],w=p.originalObject[g];if(Xe(`Checking property ${String(g)}, current:`,v,"original:",w),!Ur(v,w))return Xe(`Property ${String(g)} is different, returning false`),!1}else if(p.assigned_[g]===!1)return Xe(`Property ${String(g)} was deleted, returning false`),!1;const y=Object.getOwnPropertySymbols(p.assigned_);for(const g of y)if(p.assigned_[g]===!0){const v=p.copy_[g],w=p.originalObject[g];if(!Ur(v,w))return Xe("Symbol property is different, returning false"),!1}else if(p.assigned_[g]===!1)return Xe("Symbol property was deleted, returning false"),!1;return Xe("All properties match original values, returning true"),!0}function f(p,y){Xe("checkParentStatus called for child prop:",y);const g=u(p);Xe("Parent checkIfReverted returned:",g),g&&(Xe("Parent is fully reverted, clearing tracking"),p.modified=!1,p.assigned_={},p.parent&&(Xe("Continuing up the parent chain"),f(p.parent.tracker,p.parent.prop)))}function d(p){if(Xe("createObjectProxy",p),s.has(p))return Xe("proxyCache found match"),s.get(p);const y=new Proxy(p,{get(g,v){Xe("get",g,v);const w=a.copy_[v]??a.originalObject[v],E=a.originalObject[v];if(Xe("value (at top of proxy get)",w),Object.getOwnPropertyDescriptor(g,v)?.get)return w;if(typeof w=="function"){if(Array.isArray(g)){const C=v.toString();if(n4.has(C))return L1(w,a,l);const T=i4(C,w,a,r);if(T)return T;if(v===Symbol.iterator)return a4(a,r)}if(g instanceof Map||g instanceof Set){const C=v.toString();if(r4.has(C))return L1(w,a,l);const T=o4(C,v,w,g,a,r,l);if(T)return T}return w.bind(g)}if(My(w)){const C={tracker:a,prop:String(v)},{proxy:T}=r(E,C);return s.set(w,T),T}return w},set(g,v,w){const E=a.copy_[v];if(Xe(`set called for property ${String(v)}, current:`,E,"new:",w),Ur(E,w))Xe("Value unchanged, not tracking");else{const k=a.originalObject[v],C=Ur(w,k);if(Xe("value:",w,"original:",k,"isRevertToOriginal:",C),C){Xe(`Reverting property ${String(v)} to original value`),delete a.assigned_[v.toString()],Xe(`Updating copy with original value for ${String(v)}`),a.copy_[v]=Es(k),Xe("Checking if all properties reverted");const T=u(a);Xe("All reverted:",T),T?(Xe("All properties reverted, clearing tracking"),a.modified=!1,a.assigned_={},e&&(Xe("Updating parent for property:",e.prop),f(e.tracker,e.prop))):(Xe("Some properties still changed, keeping modified flag"),a.modified=!0)}else Xe(`Setting new value for property ${String(v)}`),a.copy_[v]=w,a.assigned_[v.toString()]=!0,Xe("Marking object and ancestors as modified",a),l(a)}return!0},defineProperty(g,v,w){const E=Reflect.defineProperty(g,v,w);return E&&"value"in w&&(a.copy_[v]=Es(w.value),a.assigned_[v.toString()]=!0,l(a)),E},getOwnPropertyDescriptor(g,v){return Reflect.getOwnPropertyDescriptor(g,v)},preventExtensions(g){return Reflect.preventExtensions(g)},isExtensible(g){return Reflect.isExtensible(g)},deleteProperty(g,v){Xe("deleteProperty",g,v);const w=typeof v=="symbol"?v.toString():v;if(w in g){const E=w in a.originalObject,k=Reflect.deleteProperty(g,v);return k&&(E?(a.assigned_[w]=!1,l(a)):(delete a.assigned_[w],Object.keys(a.assigned_).length===0&&Object.getOwnPropertySymbols(a.assigned_).length===0?a.modified=!1:a.modified=!0)),k}return!0}});return s.set(p,y),y}return{proxy:d(a.copy_),getChanges:()=>{if(Xe("getChanges called, modified:",a.modified),Xe(a),!a.modified)return Xe("Object not modified, returning empty object"),{};if(typeof a.copy_!="object"||Array.isArray(a.copy_)||Object.keys(a.assigned_).length===0)return a.copy_;const p={};for(const y in a.copy_)a.assigned_[y]===!0&&y in a.copy_&&(p[y]=a.copy_[y]);return Xe("Returning copy:",p),p}}}function c4(t){const e=t.map(n=>Dy(n));return{proxies:e.map(n=>n.proxy),getChanges:()=>e.map(n=>n.getChanges())}}function u4(t,e){const{proxy:n,getChanges:r}=Dy(t);return e(n),r()}function f4(t,e){const{proxies:n,getChanges:r}=c4(t);return e(n),r()}function d4(){let t,e,n=!0;return{promise:new Promise((s,a)=>{t=l=>{n=!1,s(l)},e=l=>{n=!1,a(l)}}),resolve:t,reject:e,isPending:()=>n}}function h4(t){return typeof t=="object"&&t!==null&&typeof t.hasPendingGraphRun=="function"}class p4{constructor(){this.contexts=new Map,this.clearListeners=new Set}getOrCreateContext(e){let n=this.contexts.get(e);return n||(n={queue:[],jobs:new Map,dependencies:new Map,completed:new Set},this.contexts.set(e,n)),n}schedule({contextId:e,jobId:n,dependencies:r,run:s}){if(typeof e>"u"){s();return}const a=this.getOrCreateContext(e);if(a.jobs.has(n)||a.queue.push(n),a.jobs.set(n,s),r){const l=new Set(r);l.delete(n),a.dependencies.set(n,l)}else a.dependencies.has(n)||a.dependencies.set(n,new Set);a.completed.delete(n)}flush(e){const n=this.contexts.get(e);if(!n)return;const{queue:r,jobs:s,dependencies:a,completed:l}=n;for(;r.length>0;){let u=!1;const f=r.length;for(let d=0;d<f;d++){const m=r.shift(),p=s.get(m);if(!p){a.delete(m),l.delete(m);continue}const y=a.get(m);let g=!y;if(y){g=!0;for(const v of y){if(v===m)continue;const w=h4(v)&&v.hasPendingGraphRun(e);if(s.has(v)&&!l.has(v)||!s.has(v)&&w){g=!1;break}}}g?(s.delete(m),a.delete(m),p(),l.add(m),u=!0):r.push(m)}if(!u)throw new Error(`Scheduler detected unresolved dependencies for context ${String(e)}.`)}this.contexts.delete(e)}flushAll(){for(const e of Array.from(this.contexts.keys()))this.flush(e)}clear(e){this.contexts.delete(e),this.clearListeners.forEach(n=>n(e))}onClear(e){return this.clearListeners.add(e),()=>this.clearListeners.delete(e)}hasPendingJobs(e){const n=this.contexts.get(e);return!!n&&n.jobs.size>0}clearJob(e,n){const r=this.contexts.get(e);r&&(r.jobs.delete(n),r.dependencies.delete(n),r.completed.delete(n),r.queue=r.queue.filter(s=>s!==n),r.jobs.size===0&&this.contexts.delete(e))}}const Ef=new p4,Cf=[];let Yl=[],m4=0;function g4(t,e){switch(`${t.type}-${e.type}`){case"insert-update":return{...t,type:"insert",original:{},modified:e.modified,changes:{...t.changes,...e.changes},key:t.key,globalKey:t.globalKey,metadata:e.metadata??t.metadata,syncMetadata:{...t.syncMetadata,...e.syncMetadata},mutationId:e.mutationId,updatedAt:e.updatedAt};case"insert-delete":return null;case"update-delete":return e;case"update-update":return{...e,original:t.original,changes:{...t.changes,...e.changes},metadata:e.metadata??t.metadata,syncMetadata:{...t.syncMetadata,...e.syncMetadata}};case"delete-delete":case"insert-insert":return e;default:{const n=`${t.type}-${e.type}`;throw new Error(`Unhandled mutation combination: ${n}`)}}}function Lu(t){const e=new v4(t);return Cf.push(e),e}function rf(){if(Yl.length>0)return Yl.slice(-1)[0]}function y4(t){Ef.clear(t.id),Yl.push(t)}function b4(t){try{Ef.flush(t.id)}finally{Yl=Yl.filter(e=>e.id!==t.id)}}function _4(t){const e=Cf.findIndex(n=>n.id===t.id);e!==-1&&Cf.splice(e,1)}class v4{constructor(e){if(typeof e.mutationFn>"u")throw new fI;this.id=e.id??crypto.randomUUID(),this.mutationFn=e.mutationFn,this.state="pending",this.mutations=[],this.isPersisted=d4(),this.autoCommit=e.autoCommit??!0,this.createdAt=new Date,this.sequenceNumber=m4++,this.metadata=e.metadata??{}}setState(e){this.state=e,(e==="completed"||e==="failed")&&_4(this)}mutate(e){if(this.state!=="pending")throw new dI;y4(this);try{e()}finally{b4(this)}return this.autoCommit&&this.commit().catch(()=>{}),this}applyMutations(e){for(const n of e){const r=this.mutations.findIndex(s=>s.globalKey===n.globalKey);if(r>=0){const s=this.mutations[r],a=g4(s,n);a===null?this.mutations.splice(r,1):this.mutations[r]=a}else this.mutations.push(n)}}rollback(e){const n=e?.isSecondaryRollback??!1;if(this.state==="completed")throw new hI;if(this.setState("failed"),!n){const r=new Set;this.mutations.forEach(s=>r.add(s.globalKey));for(const s of Cf)s.state==="pending"&&s.mutations.some(a=>r.has(a.globalKey))&&s.rollback({isSecondaryRollback:!0})}return this.isPersisted.reject(this.error?.error),this.touchCollection(),this}touchCollection(){const e=new Set;for(const n of this.mutations)e.has(n.collection.id)||(n.collection._state.onTransactionStateChange(),n.collection._state.pendingSyncedTransactions.length>0&&n.collection._state.commitPendingTransactions(),e.add(n.collection.id))}async commit(){if(this.state!=="pending")throw new pI;if(this.setState("persisting"),this.mutations.length===0)return this.setState("completed"),this.isPersisted.resolve(this),this;try{await this.mutationFn({transaction:this}),this.setState("completed"),this.touchCollection(),this.isPersisted.resolve(this)}catch(e){const n=e instanceof Error?e:new Error(String(e));throw this.error={message:n.message,error:n},this.rollback(),n}return this}compareCreatedAt(e){const n=this.createdAt.getTime()-e.createdAt.getTime();return n!==0?n:this.sequenceNumber-e.sequenceNumber}}class x4{constructor(e,n){this.insert=(r,s)=>{this.lifecycle.validateCollectionUsable("insert");const a=this.state,l=rf();if(!l&&!this.config.onInsert)throw new lI;const u=Array.isArray(r)?r:[r],f=[],d=new Set;if(u.forEach(m=>{const p=this.validateData(m,"insert"),y=this.config.getKey(p);if(this.state.has(y)||d.has(y))throw new eI(y);d.add(y);const g=this.generateGlobalKey(y,m),v={mutationId:crypto.randomUUID(),original:{},modified:p,changes:Object.fromEntries(Object.keys(m).map(w=>[w,p[w]])),globalKey:g,key:y,metadata:s?.metadata,syncMetadata:this.config.sync.getSyncMetadata?.()||{},optimistic:s?.optimistic??!0,type:"insert",createdAt:new Date,updatedAt:new Date,collection:this.collection};f.push(v)}),l)return l.applyMutations(f),a.transactions.set(l.id,l),a.scheduleTransactionCleanup(l),a.recomputeOptimisticState(!0),l;{const m=Lu({mutationFn:async p=>await this.config.onInsert({transaction:p.transaction,collection:this.collection})});return m.applyMutations(f),m.commit().catch(()=>{}),a.transactions.set(m.id,m),a.scheduleTransactionCleanup(m),a.recomputeOptimisticState(!0),m}},this.delete=(r,s)=>{const a=this.state;this.lifecycle.validateCollectionUsable("delete");const l=rf();if(!l&&!this.config.onDelete)throw new uI;if(Array.isArray(r)&&r.length===0)throw new aI;const u=Array.isArray(r)?r:[r],f=[];for(const m of u){if(!this.state.has(m))throw new oI(m);const p=this.generateGlobalKey(m,this.state.get(m)),y={mutationId:crypto.randomUUID(),original:this.state.get(m),modified:this.state.get(m),changes:this.state.get(m),globalKey:p,key:m,metadata:s?.metadata,syncMetadata:a.syncedMetadata.get(m)||{},optimistic:s?.optimistic??!0,type:"delete",createdAt:new Date,updatedAt:new Date,collection:this.collection};f.push(y)}if(l)return l.applyMutations(f),a.transactions.set(l.id,l),a.scheduleTransactionCleanup(l),a.recomputeOptimisticState(!0),l;const d=Lu({autoCommit:!0,mutationFn:async m=>this.config.onDelete({transaction:m.transaction,collection:this.collection})});return d.applyMutations(f),d.commit().catch(()=>{}),a.transactions.set(d.id,d),a.scheduleTransactionCleanup(d),a.recomputeOptimisticState(!0),d},this.id=n,this.config=e}setDeps(e){this.lifecycle=e.lifecycle,this.state=e.state,this.collection=e.collection}ensureStandardSchema(e){if(e&&"~standard"in e)return e;throw new KO}validateData(e,n,r){if(!this.config.schema)return e;const s=this.ensureStandardSchema(this.config.schema);if(n==="update"&&r){const l=this.state.get(r);if(l&&e&&typeof e=="object"&&typeof l=="object"){const u=Object.assign({},l,e),f=s["~standard"].validate(u);if(f instanceof Promise)throw new h1;if("issues"in f&&f.issues){const y=f.issues.map(g=>({message:g.message,path:g.path?.map(v=>String(v))}));throw new d1(n,y)}const d=f.value,m=Object.keys(e);return Object.fromEntries(m.map(y=>[y,d[y]]))}}const a=s["~standard"].validate(e);if(a instanceof Promise)throw new h1;if("issues"in a&&a.issues){const l=a.issues.map(u=>({message:u.message,path:u.path?.map(f=>String(f))}));throw new d1(n,l)}return a.value}generateGlobalKey(e,n){if(typeof e!="string"&&typeof e!="number")throw typeof e>"u"?new WO(n):new XO(e,n);return`KEY::${this.id}/${e}`}update(e,n,r){if(typeof e>"u")throw new nI;const s=this.state;this.lifecycle.validateCollectionUsable("update");const a=rf();if(!a&&!this.config.onUpdate)throw new cI;const l=Array.isArray(e),u=l?e:[e];if(l&&u.length===0)throw new rI;const f=typeof n=="function"?n:r,d=typeof n=="function"?{}:n,m=u.map(v=>{const w=this.state.get(v);if(!w)throw new sI(v);return w});let p;l?p=f4(m,f):p=[u4(m[0],f)];const y=u.map((v,w)=>{const E=p[w];if(!E||Object.keys(E).length===0)return null;const k=m[w],C=this.validateData(E,"update",v),T=Object.assign({},k,C),D=this.config.getKey(k),N=this.config.getKey(T);if(D!==N)throw new iI(D,N);const R=this.generateGlobalKey(N,T);return{mutationId:crypto.randomUUID(),original:k,modified:T,changes:Object.fromEntries(Object.keys(E).map($=>[$,T[$]])),globalKey:R,key:v,metadata:d.metadata,syncMetadata:s.syncedMetadata.get(v)||{},optimistic:d.optimistic??!0,type:"update",createdAt:new Date,updatedAt:new Date,collection:this.collection}}).filter(Boolean);if(y.length===0){const v=Lu({mutationFn:async()=>{}});return v.commit().catch(()=>{}),s.scheduleTransactionCleanup(v),v}if(a)return a.applyMutations(y),s.transactions.set(a.id,a),s.scheduleTransactionCleanup(a),s.recomputeOptimisticState(!0),a;const g=Lu({mutationFn:async v=>this.config.onUpdate({transaction:v.transaction,collection:this.collection})});return g.applyMutations(y),g.commit().catch(()=>{}),s.transactions.set(g.id,g),s.scheduleTransactionCleanup(g),s.recomputeOptimisticState(!0),g}}class w4 extends Ck{constructor(){super()}setDeps(e){this.collection=e.collection}emit(e,n){this.emitInner(e,n)}emitStatusChange(e,n){this.emit("status:change",{type:"status:change",collection:this.collection,previousStatus:n,status:e});const r=`status:${e}`;this.emit(r,{type:r,collection:this.collection,previousStatus:n,status:e})}emitSubscribersChange(e,n){this.emit("subscribers:change",{type:"subscribers:change",collection:this.collection,previousSubscriberCount:n,subscriberCount:e})}cleanup(){this.clearListeners()}}function Ak(t){const e=new jy(t);return t.utils?e.utils=t.utils:e.utils={},e}class jy{constructor(e){if(this.utils={},this.insert=(n,r)=>this._mutations.insert(n,r),this.delete=(n,r)=>this._mutations.delete(n,r),!e)throw new HO;if(!e.sync)throw new GO;e.id?this.id=e.id:this.id=crypto.randomUUID(),this.config={...e,autoIndex:e.autoIndex??"eager"},this._changes=new FM,this._events=new w4,this._indexes=new XM,this._lifecycle=new KM(e,this.id),this._mutations=new x4(e,this.id),this._state=new $M(e),this._sync=new ZM(e,this.id),this.comparisonOpts=S4(e),this._changes.setDeps({collection:this,lifecycle:this._lifecycle,sync:this._sync,events:this._events}),this._events.setDeps({collection:this}),this._indexes.setDeps({state:this._state,lifecycle:this._lifecycle}),this._lifecycle.setDeps({changes:this._changes,events:this._events,indexes:this._indexes,state:this._state,sync:this._sync}),this._mutations.setDeps({collection:this,lifecycle:this._lifecycle,state:this._state}),this._state.setDeps({collection:this,lifecycle:this._lifecycle,changes:this._changes,indexes:this._indexes,events:this._events}),this._sync.setDeps({collection:this,state:this._state,lifecycle:this._lifecycle,events:this._events}),e.startSync===!0&&this._sync.startSync()}get status(){return this._lifecycle.status}get subscriberCount(){return this._changes.activeSubscribersCount}onFirstReady(e){return this._lifecycle.onFirstReady(e)}isReady(){return this._lifecycle.status==="ready"}get isLoadingSubset(){return this._sync.isLoadingSubset}startSyncImmediate(){this._sync.startSync()}preload(){return this._sync.preload()}get(e){return this._state.get(e)}has(e){return this._state.has(e)}get size(){return this._state.size}*keys(){yield*this._state.keys()}*values(){yield*this._state.values()}*entries(){yield*this._state.entries()}*[Symbol.iterator](){yield*this._state[Symbol.iterator]()}forEach(e){return this._state.forEach(e)}map(e){return this._state.map(e)}getKeyFromItem(e){return this.config.getKey(e)}createIndex(e,n={}){return this._indexes.createIndex(e,n)}get indexes(){return this._indexes.indexes}validateData(e,n,r){return this._mutations.validateData(e,n,r)}get compareOptions(){return{...this.comparisonOpts}}update(e,n,r){return this._mutations.update(e,n,r)}get state(){const e=new Map;for(const[n,r]of this.entries())e.set(n,r);return e}stateWhenReady(){return this.size>0||this.isReady()?Promise.resolve(this.state):this.preload().then(()=>this.state)}get toArray(){return Array.from(this.values())}toArrayWhenReady(){return this.size>0||this.isReady()?Promise.resolve(this.toArray):this.preload().then(()=>this.toArray)}currentStateAsChanges(e={}){return zM(this,e)}subscribeChanges(e,n={}){return this._changes.subscribeChanges(e,n)}on(e,n){return this._events.on(e,n)}once(e,n){return this._events.once(e,n)}off(e,n){this._events.off(e,n)}waitFor(e,n){return this._events.waitFor(e,n)}async cleanup(){return this._lifecycle.cleanup(),Promise.resolve()}}function S4(t){if(t.defaultStringCollation){const e=t.defaultStringCollation;return{stringSort:e.stringSort??"locale",locale:e.stringSort==="locale"?e.locale:void 0,localeOptions:e.stringSort==="locale"?e.localeOptions:void 0}}else return{stringSort:"locale"}}class Wt{constructor(e={}){this.query={},this.query={...e}}_createRefForSource(e,n){let r;try{r=Object.keys(e)}catch{const u=e===null?"null":"undefined";throw new Du(n,u)}if(Array.isArray(e))throw new Du(n,"array");if(r.length!==1)throw r.length===0?new Du(n,"empty object"):r.every(u=>!isNaN(Number(u)))?new Du(n,"string"):new yI(n);const s=r[0],a=e[s];let l;if(a instanceof jy)l=new so(a,s);else if(a instanceof Wt){const u=a._getQuery();if(!u.from)throw new bI(n);l=new Mr(u,s)}else throw new _I(s);return[s,l]}from(e){const[,n]=this._createRefForSource(e,"from clause");return new Wt({...this.query,from:n})}join(e,n,r="left"){const[s,a]=this._createRefForSource(e,"join clause"),u=[...this._getCurrentAliases(),s],f=La(u),d=n(f);let m,p;if(d.type==="func"&&d.name==="eq"&&d.args.length===2)m=d.args[0],p=d.args[1];else throw new vI;const y={from:a,type:r,left:m,right:p},g=this.query.join||[];return new Wt({...this.query,join:[...g,y]})}leftJoin(e,n){return this.join(e,n,"left")}rightJoin(e,n){return this.join(e,n,"right")}innerJoin(e,n){return this.join(e,n,"inner")}fullJoin(e,n){return this.join(e,n,"full")}where(e){const n=this._getCurrentAliases(),r=La(n),s=e(r),a=this.query.where||[];return new Wt({...this.query,where:[...a,s]})}having(e){const n=this._getCurrentAliases(),r=La(n),s=e(r),a=this.query.having||[];return new Wt({...this.query,having:[...a,s]})}select(e){const n=this._getCurrentAliases(),r=La(n),s=e(r),a=Rk(s);return new Wt({...this.query,select:a,fnSelect:void 0})}orderBy(e,n="asc"){const r=this._getCurrentAliases(),s=La(r),a=e(s),l=typeof n=="string"?{direction:n,nulls:"first"}:{direction:n.direction??"asc",nulls:n.nulls??"first",stringSort:n.stringSort,locale:n.stringSort==="locale"?n.locale:void 0,localeOptions:n.stringSort==="locale"?n.localeOptions:void 0},u=m=>({expression:hn(m),compareOptions:l}),f=Array.isArray(a)?a.map(m=>u(m)):[u(a)],d=this.query.orderBy||[];return new Wt({...this.query,orderBy:[...d,...f]})}groupBy(e){const n=this._getCurrentAliases(),r=La(n),s=e(r),a=Array.isArray(s)?s.map(u=>hn(u)):[hn(s)],l=this.query.groupBy||[];return new Wt({...this.query,groupBy:[...l,...a]})}limit(e){return new Wt({...this.query,limit:e})}offset(e){return new Wt({...this.query,offset:e})}distinct(){return new Wt({...this.query,distinct:!0})}findOne(){return new Wt({...this.query,singleResult:!0})}_getCurrentAliases(){const e=[];if(this.query.from&&e.push(this.query.from.alias),this.query.join)for(const n of this.query.join)e.push(n.from.alias);return e}get fn(){const e=this;return{select(n){return new Wt({...e.query,select:void 0,fnSelect:n})},where(n){return new Wt({...e.query,fnWhere:[...e.query.fnWhere||[],n]})},having(n){return new Wt({...e.query,fnHaving:[...e.query.fnHaving||[],n]})}}}_getQuery(){if(!this.query.from)throw new xI;return this.query}}function k4(t){return t===void 0?hn(null):t instanceof bk||t instanceof jr||t instanceof Bn||t instanceof Wn?t:hn(t)}function E4(t){return t!==null&&typeof t=="object"&&!wy(t)&&!t.__refProxy}function Rk(t){if(!E4(t))return k4(t);const e={};for(const[n,r]of Object.entries(t)){if(typeof n=="string"&&n.startsWith("__SPREAD_SENTINEL__")){e[n]=r;continue}e[n]=Rk(r)}return e}function C4(t){const e=t(new Wt);return Ok(e)}function Ok(t){return t._getQuery()}function T4(t){const e=A4(t);let n=t,r,s=0;const a=10;for(;s<a&&!Ur(n,r);)r=n,n=bg(n),s++;return{optimizedQuery:Ik(n),sourceWhereClauses:e}}function A4(t){const e=new Map;if(!t.where||t.where.length===0)return e;const r=vg(t.where).map(a=>Nk(a)),s=Mk(r);for(const[a,l]of s.singleSource)R4(t,a)&&e.set(a,l);return e}function R4(t,e){if(t.from.alias===e)return t.from.type==="collectionRef";if(t.join){for(const n of t.join)if(n.from.alias===e)return n.from.type==="collectionRef"}return!1}function bg(t){const e={...t,from:t.from.type==="queryRef"?new Mr(bg(t.from.query),t.from.alias):t.from,join:t.join?.map(n=>({...n,from:n.from.type==="queryRef"?new Mr(bg(n.from.query),n.from.alias):n.from}))};return O4(e)}function O4(t){if(!t.where||t.where.length===0)return t;if(!t.join||t.join.length===0){if(t.where.length>1){const u=vg(t.where),f=Tf(u);return{...t,where:[f]}}return t}const e=t.where.filter(u=>!f1(u)),r=vg(e).map(u=>Nk(u)),s=Mk(r),a=N4(t,s),l=t.where.filter(u=>f1(u));return l.length>0&&(a.where=[...a.where||[],...l]),a}function Ik(t){return{...t,from:_g(t.from),join:t.join?.map(e=>({...e,from:_g(e.from)}))}}function _g(t){if(t.type==="collectionRef")return t;const e=Ik(t.query);if(I4(e)){const n=_g(e.from);return n.type==="collectionRef"?new so(n.collection,t.alias):new Mr(n.query,t.alias)}return new Mr(e,t.alias)}function I4(t){return(!t.where||t.where.length===0)&&!t.select&&(!t.groupBy||t.groupBy.length===0)&&(!t.having||t.having.length===0)&&(!t.orderBy||t.orderBy.length===0)&&(!t.join||t.join.length===0)&&t.limit===void 0&&t.offset===void 0&&!t.fnSelect&&(!t.fnWhere||t.fnWhere.length===0)&&(!t.fnHaving||t.fnHaving.length===0)}function vg(t){const e=[];for(const n of t){const r=Sy(n);e.push(...Ly(r))}return e}function Ly(t){if(t.type==="func"&&t.name==="and"){const e=[];for(const n of t.args)e.push(...Ly(n));return e}else return[t]}function Nk(t){const e=new Set;let n=!1;function r(s){switch(s.type){case"ref":if(s.path&&s.path.length>0){const a=s.path[0];a&&(e.add(a),s.path.length===1&&(n=!0))}break;case"func":s.args&&s.args.forEach(r);break;case"val":break;case"agg":s.args&&s.args.forEach(r);break}}return r(t),{expression:t,touchedSources:e,hasNamespaceOnlyRef:n}}function Mk(t){const e=new Map,n=[];for(const a of t)if(a.touchedSources.size===1&&!a.hasNamespaceOnlyRef){const l=Array.from(a.touchedSources)[0];e.has(l)||e.set(l,[]),e.get(l).push(a.expression)}else(a.touchedSources.size>1||a.hasNamespaceOnlyRef)&&n.push(a.expression);const r=new Map;for(const[a,l]of e)r.set(a,Tf(l));const s=n.length>0?Tf(n):void 0;return{singleSource:r,multiSource:s}}function N4(t,e){const n=new Set,r=P1(t.from,e.singleSource,n),s=t.join?t.join.map(d=>({...d,from:P1(d.from,e.singleSource,n)})):void 0,a=[];e.multiSource&&a.push(e.multiSource);const l=t.join&&t.join.some(d=>d.type==="left"||d.type==="right"||d.type==="full");for(const[d,m]of e.singleSource)n.has(d)?l&&a.push(FO(m)):a.push(m);const u=a.length>1?[Tf(a.flatMap(d=>Ly(Sy(d))))]:a;return{select:t.select,groupBy:t.groupBy?[...t.groupBy]:void 0,having:t.having?[...t.having]:void 0,orderBy:t.orderBy?[...t.orderBy]:void 0,limit:t.limit,offset:t.offset,distinct:t.distinct,fnSelect:t.fnSelect,fnWhere:t.fnWhere?[...t.fnWhere]:void 0,fnHaving:t.fnHaving?[...t.fnHaving]:void 0,from:r,join:s,where:u.length>0?u:[]}}function Ka(t){return{from:t.from.type==="collectionRef"?new so(t.from.collection,t.from.alias):new Mr(Ka(t.from.query),t.from.alias),select:t.select,join:t.join?t.join.map(e=>({type:e.type,left:e.left,right:e.right,from:e.from.type==="collectionRef"?new so(e.from.collection,e.from.alias):new Mr(Ka(e.from.query),e.from.alias)})):void 0,where:t.where?[...t.where]:void 0,groupBy:t.groupBy?[...t.groupBy]:void 0,having:t.having?[...t.having]:void 0,orderBy:t.orderBy?[...t.orderBy]:void 0,limit:t.limit,offset:t.offset,fnSelect:t.fnSelect,fnWhere:t.fnWhere?[...t.fnWhere]:void 0,fnHaving:t.fnHaving?[...t.fnHaving]:void 0}}function P1(t,e,n){const r=e.get(t.alias);if(!r)return t.type==="collectionRef"?new so(t.collection,t.alias):new Mr(Ka(t.query),t.alias);if(t.type==="collectionRef"){const l={from:new so(t.collection,t.alias),where:[r]};return n.add(t.alias),new Mr(l,t.alias)}if(!P4(t.query,r,t.alias))return new Mr(Ka(t.query),t.alias);if($4(t.query,r,t.alias))return new Mr(Ka(t.query),t.alias);const s=t.query.where||[],a={...Ka(t.query),where:[...s,r]};return n.add(t.alias),new Mr(a,t.alias)}function M4(t,e,n){return t.select?Dk(t.select)||B4(t.select,e,n):!1}function D4(t){return t.groupBy&&t.groupBy.length>0}function j4(t){return t.having&&t.having.length>0}function L4(t){return t.orderBy&&t.orderBy.length>0&&(t.limit!==void 0||t.offset!==void 0)}function z4(t){return t.fnSelect||t.fnWhere&&t.fnWhere.length>0||t.fnHaving&&t.fnHaving.length>0}function P4(t,e,n){return!(M4(t,e,n)||D4(t)||j4(t)||L4(t)||z4(t))}function Dk(t){for(const e of Object.values(t))if(typeof e=="object"){const n=e;if(n.type==="agg"||!("type"in n)&&Dk(n))return!0}return!1}function zy(t){const e=[];if(t==null||typeof t!="object")return e;switch(t.type){case"ref":e.push(t);break;case"func":case"agg":for(const n of t.args??[])e.push(...zy(n));break}return e}function B4(t,e,n){const r=new Set;for(const[a,l]of Object.entries(t))a.startsWith("__SPREAD_SENTINEL__")||l instanceof Bn||r.add(a);const s=zy(e);for(const a of s){const l=a.path;if(!Array.isArray(l)||l.length<2)continue;const u=l[0],f=l[1];if(u===n&&r.has(f))return!0}return!1}function $4(t,e,n){const r=zy(e);if(r.every(a=>a.path[0]!==n))return!1;if(t.fnSelect)return!0;const s=t.select;if(!s)return!1;for(const a of r){const l=a.path;if(l.length<2||l[0]!==n)continue;const u=s[l[1]];if(!u)continue;if(!(u instanceof Bn)||u.path.length<2)return!0;const[f,d]=u.path;if(f!==n&&f!==t.from.alias||d!==l[1])return!0}return!1}function Tf(t){if(t.length===0)throw new qI;return t.length===1?t[0]:new jr("and",t)}function U4(t,e,n,r,s,a,l,u,f,d,m,p,y,g,v,w,E,k){let C=t;for(const T of e)C=q4(C,T,n,r,s,a,l,u,f,d,m,p,y,g,v,w,E,k);return C}function q4(t,e,n,r,s,a,l,u,f,d,m,p,y,g,v,w,E,k){const C=e.from.type==="collectionRef",{alias:T,input:D,collectionId:N}=V4(e.from,a,f,d,m,p,y,g,l,u,w,E,k);n[T]=D,C&&(E[T]=N);const R=f[r],$=f[N];if(!R)throw new g1(r);if(!$)throw new g1(N);const{activeSource:q,lazySource:H}=G4(e.type,R,$),M=Object.keys(n),{mainExpr:Q,joinedExpr:ne}=F4(e.left,e.right,M,T),ye=Xn(Q),X=Xn(ne);let F=t.pipe(zn(([K,ie])=>[ye(ie),[K,ie]])),B=D.pipe(zn(([K,ie])=>{const re={[T]:ie};return[X(re),[K,re]]}));if(!["inner","left","right","full"].includes(e.type))throw new OI(e.type);if(q){const K=q==="main"?e.from:v.from,ie=K.type==="queryRef"&&(K.query.limit||K.query.offset),re=Q.type==="func"||ne.type==="func";if(!ie&&!re){const I=q==="main"?T:s;p.add(I);const j=q==="main"?F:B,O=Zl(v,q==="main"?ne:Q,H),le=O.collection,L=O.path[0];L&&dd(L,O.path,le);const P=j.pipe(XN(pe=>{const xe=k[I]||I,ve=d[xe];if(!ve)throw new FI(xe,I,H.id,Object.keys(d));if(ve.hasLoadedInitialState())return;const Te=pe.getInner().map(([[Ct]])=>Ct),je=new Bn(O.path);ve.requestSnapshot({where:EM(je,Te),optimizedOnly:!0})||ve.requestSnapshot()}));q==="main"?F=P:B=P}}return F.pipe(aM(B,e.type),H4(e.type))}function F4(t,e,n,r){const s=n.filter(u=>u!==r),a=xg(t),l=xg(e);if(a&&s.includes(a)&&l===r)return{mainExpr:t,joinedExpr:e};if(a===r&&l&&s.includes(l))return{mainExpr:e,joinedExpr:t};throw!a||!l?new NI:a===l?new II(a):s.includes(a)?l!==r?new DI(r):new jI:new MI(a)}function xg(t){switch(t.type){case"ref":return t.path[0]||null;case"func":{const e=new Set;for(const n of t.args){const r=xg(n);r&&e.add(r)}return e.size===1?Array.from(e)[0]:null}default:return null}}function V4(t,e,n,r,s,a,l,u,f,d,m,p,y){switch(t.type){case"collectionRef":{const g=e[t.alias];if(!g)throw new _k(t.alias,t.collection.id,Object.keys(e));return p[t.alias]=t.collection.id,{alias:t.alias,input:g,collectionId:t.collection.id}}case"queryRef":{const g=d.get(t.query)||t.query,v=m(g,e,n,r,s,a,l,u,f,d);Object.assign(p,v.aliasToCollectionId),Object.assign(y,v.aliasRemapping);const w=Object.keys(v.aliasToCollectionId).find(C=>v.aliasToCollectionId[C]===v.collectionId);w&&w!==t.alias&&(y[t.alias]=w);const k=v.pipeline.pipe(zn(C=>{const[T,[D,N]]=C;return[T,D]}));return{alias:t.alias,input:k,collectionId:v.collectionId}}default:throw new LI(t.type)}}function H4(t){return function(e){return e.pipe(ri(n=>{const[r,[s,a]]=n,l=s?.[1],u=a?.[1];return t==="inner"?!!(l&&u):t==="left"?!!l:t==="right"?!!u:!0}),zn(n=>{const[r,[s,a]]=n,l=s?.[0],u=s?.[1],f=a?.[0],d=a?.[1],m={};return u&&Object.assign(m,u),d&&Object.assign(m,d),[`[${l},${f}]`,m]}))}}function G4(t,e,n){switch(t){case"left":return{activeSource:"main",lazySource:n};case"right":return{activeSource:"joined",lazySource:e};case"inner":return e.size<n.size?{activeSource:"main",lazySource:n}:{activeSource:"joined",lazySource:e};default:return{activeSource:void 0,lazySource:void 0}}}function wg(t){return t instanceof Wn?t.value:t}function K4(t,e,n){const r=t.source(e);if(r&&typeof r=="object"){let s=n;const a=t.targetPath;if(a.length===0)for(const[l,u]of Object.entries(r))n[l]=wg(u);else for(let l=0;l<a.length;l++){const u=a[l];if(l===a.length-1){const f=s[u]??={};if(typeof f=="object")for(const[d,m]of Object.entries(r))f[d]=wg(m)}else{const f=s[u];(f==null||typeof f!="object")&&(s[u]={}),s=s[u]}}}}function Z4(t,e,n){const r=t.alias.split(".");if(r.length===1)n[t.alias]=t.compiled(e);else{let s=n;for(let a=0;a<r.length-1;a++){const l=r[a],u=s[l];(u==null||typeof u!="object")&&(s[l]={}),s=s[l]}s[r[r.length-1]]=wg(t.compiled(e))}}function J4([t,e],n){const r={};for(const s of n)s.kind==="merge"?K4(s,e,r):Z4(s,e,r);return[t,{...e,__select_results:r}]}function Q4(t,e,n){const r=[];return jk([],e,r),t.pipe(zn(s=>J4(s,r)))}function Y4(t){return t.type==="agg"}function W4(t){return t&&typeof t=="object"&&!wy(t)}function jk(t,e,n){for(const[r,s]of Object.entries(e)){if(r.startsWith("__SPREAD_SENTINEL__")){const l=r.slice(19),u=l.lastIndexOf("__"),f=u>=0?l.slice(0,u):l,d=s&&typeof s=="object"&&"type"in s&&s.type==="ref";if(f.includes(".")||d){const m=[...t],p=d?s:new Bn(f.split(".")),y=Xn(p);n.push({kind:"merge",targetPath:m,source:y})}else{const m=f,p=[...t];n.push({kind:"merge",targetPath:p,source:y=>y[m]})}continue}const a=s;if(W4(a)){jk([...t,r],a,n);continue}if(Y4(a))n.push({kind:"field",alias:[...t,r].join("."),compiled:()=>null});else{if(a===void 0||!wy(a)){n.push({kind:"field",alias:[...t,r].join("."),compiled:()=>a});continue}if(a instanceof Wn){const l=a.value;n.push({kind:"field",alias:[...t,r].join("."),compiled:()=>l})}else n.push({kind:"field",alias:[...t,r].join("."),compiled:Xn(a)})}}}function Py(t,e,n,r,s,a,l,u,f=new WeakMap,d=new WeakMap){const m=f.get(t);if(m)return m;Sg(t);const{optimizedQuery:p,sourceWhereClauses:y}=T4(t);d.set(p,t),Eg(p,t,d);const g={...e},v={},w={},E={},{alias:k,input:C,collectionId:T}=e3(p.from,g,n,r,s,a,l,u,f,d,v,w);E[k]=C;let D=C.pipe(zn(([q,H])=>[q,{[k]:H}]));if(p.join&&p.join.length>0&&(D=U4(D,p.join,E,T,k,g,f,d,n,r,s,a,l,u,t,Py,v,w)),p.where&&p.where.length>0)for(const q of p.where){const H=Sy(q),M=Xn(H);D=D.pipe(ri(([Q,ne])=>Wa(M(ne))))}if(p.fnWhere&&p.fnWhere.length>0)for(const q of p.fnWhere)D=D.pipe(ri(([H,M])=>Wa(q(M))));if(p.distinct&&!p.fnSelect&&!p.select)throw new wI;if(p.fnSelect?D=D.pipe(zn(([q,H])=>{const M=p.fnSelect(H);return[q,{...H,__select_results:M}]})):p.select?D=Q4(D,p.select):D=D.pipe(zn(([q,H])=>{const M=!p.join&&!p.groupBy?H[k]:H;return[q,{...H,__select_results:M}]})),p.groupBy&&p.groupBy.length>0?D=N1(D,p.groupBy,p.having,p.select,p.fnHaving):p.select&&Object.values(p.select).some(H=>H.type==="agg")&&(D=N1(D,[],p.having,p.select,p.fnHaving)),p.having&&(!p.groupBy||p.groupBy.length===0)&&!(p.select?Object.values(p.select).some(H=>H.type==="agg"):!1))throw new SI;if(p.fnHaving&&p.fnHaving.length>0&&(!p.groupBy||p.groupBy.length===0))for(const q of p.fnHaving)D=D.pipe(ri(([H,M])=>q(M)));if(p.distinct&&(D=D.pipe(lM(([q,H])=>H.__select_results))),p.orderBy&&p.orderBy.length>0){const M=LM(t,D,p.orderBy,p.select||{},n[T],l,u,p.limit,p.offset).pipe(zn(([ne,[ye,X]])=>{const F=ye.__select_results,B=kg(F);return[ne,[B,X]]})),Q={collectionId:T,pipeline:M,sourceWhereClauses:y,aliasToCollectionId:v,aliasRemapping:w};return f.set(t,Q),Q}else if(p.limit!==void 0||p.offset!==void 0)throw new kI;const R=D.pipe(zn(([q,H])=>{const M=H.__select_results,Q=kg(M);return[q,[Q,void 0]]})),$={collectionId:T,pipeline:R,sourceWhereClauses:y,aliasToCollectionId:v,aliasRemapping:w};return f.set(t,$),$}function X4(t){const e=new Set;if(t.from.type==="collectionRef"&&e.add(t.from.alias),t.join)for(const n of t.join)n.from.type==="collectionRef"&&e.add(n.from.alias);return e}function Sg(t,e=new Set){const n=X4(t);for(const s of n)if(e.has(s))throw new EI(s,Array.from(e));const r=new Set([...e,...n]);if(t.from.type==="queryRef"&&Sg(t.from.query,r),t.join)for(const s of t.join)s.from.type==="queryRef"&&Sg(s.from.query,r)}function e3(t,e,n,r,s,a,l,u,f,d,m,p){switch(t.type){case"collectionRef":{const y=e[t.alias];if(!y)throw new _k(t.alias,t.collection.id,Object.keys(e));return m[t.alias]=t.collection.id,{alias:t.alias,input:y,collectionId:t.collection.id}}case"queryRef":{const y=d.get(t.query)||t.query,g=Py(y,e,n,r,s,a,l,u,f,d);Object.assign(m,g.aliasToCollectionId),Object.assign(p,g.aliasRemapping);const v=Object.keys(g.aliasToCollectionId).find(k=>g.aliasToCollectionId[k]===g.collectionId);v&&v!==t.alias&&(p[t.alias]=v);const E=g.pipeline.pipe(zn(k=>{const[C,[T,D]]=k,N=kg(T);return[C,N]}));return{alias:t.alias,input:E,collectionId:g.collectionId}}default:throw new CI(t.type)}}function t3(t){return t instanceof Wn||t&&typeof t=="object"&&"type"in t&&t.type==="val"}function kg(t){return t3(t)?t.value:t}function Eg(t,e,n){if(t.from.type==="queryRef"&&e.from.type==="queryRef"&&(n.set(t.from.query,e.from.query),Eg(t.from.query,e.from.query,n)),t.join&&e.join)for(let r=0;r<t.join.length&&r<e.join.length;r++){const s=t.join[r],a=e.join[r];s.from.type==="queryRef"&&a.from.type==="queryRef"&&(n.set(s.from.query,a.from.query),Eg(s.from.query,a.from.query,n))}}function By(t,e){const n=t.type;if(n==="val")return new Wn(t.value);if(n==="ref"){const r=t.path;if(Array.isArray(r)){if(r[0]===e&&r.length>1)return new Bn(r.slice(1));if(r.length===1&&r[0]!==void 0)return new Bn([r[0]])}return new Bn(Array.isArray(r)?r:[String(r)])}else{const r=[];for(const s of t.args){const a=By(s,e);r.push(a)}return new jr(t.name,r)}}function B1(t,e){return t.map(r=>{const s=By(r.expression,e);return{...r,expression:s}})}const $1=Symbol.for("@tanstack/db.collection-config-builder");class n3{constructor(e,n,r,s){this.alias=e,this.collectionId=n,this.collection=r,this.collectionConfigBuilder=s,this.biggest=void 0,this.subscriptionLoadingPromises=new Map,this.sentToD2Keys=new Set}subscribe(){const e=this.getWhereClauseForAlias();if(e){const n=By(e,this.alias);return this.subscribeToChanges(n)}return this.subscribeToChanges()}subscribeToChanges(e){let n;const r=this.getOrderByInfo();if(r)n=this.subscribeToOrderedChanges(e,r);else{const u=!this.collectionConfigBuilder.isLazyAlias(this.alias);n=this.subscribeToMatchingChanges(e,u)}const s=()=>{if(!this.subscriptionLoadingPromises.has(n)){let u;const f=new Promise(d=>{u=d});this.subscriptionLoadingPromises.set(n,{resolve:u}),this.collectionConfigBuilder.liveQueryCollection._sync.trackLoadPromise(f)}};n.status==="loadingSubset"&&s();const a=n.on("status:change",u=>{if(u.status==="loadingSubset")s();else{const f=this.subscriptionLoadingPromises.get(n);f&&(this.subscriptionLoadingPromises.delete(n),f.resolve())}}),l=()=>{const u=this.subscriptionLoadingPromises.get(n);u&&(this.subscriptionLoadingPromises.delete(n),u.resolve()),a(),n.unsubscribe()};return this.collectionConfigBuilder.currentSyncState.unsubscribeCallbacks.add(l),n}sendChangesToPipeline(e,n){const r=Array.isArray(e)?e:[...e],s=[];for(const f of r){if(f.type==="insert"){if(this.sentToD2Keys.has(f.key))continue;this.sentToD2Keys.add(f.key)}else f.type==="delete"&&this.sentToD2Keys.delete(f.key);s.push(f)}const a=this.collectionConfigBuilder.currentSyncState.inputs[this.alias],u=r3(a,s,this.collection.config.getKey)>0?n:void 0;this.collectionConfigBuilder.scheduleGraphRun(u,{alias:this.alias})}subscribeToMatchingChanges(e,n=!1){const r=a=>{this.sendChangesToPipeline(a)};return this.collection.subscribeChanges(r,{...n&&{includeInitialState:n},whereExpression:e})}subscribeToOrderedChanges(e,n){const{orderBy:r,offset:s,limit:a,index:l}=n,u=p=>{const y=s3(p);this.sendChangesToPipelineWithTracking(y,f)},f=this.collection.subscribeChanges(u,{whereExpression:e}),d=this.collection.on("truncate",()=>{this.biggest=void 0,this.sentToD2Keys.clear()});f.on("unsubscribed",()=>{d()});const m=B1(r,this.alias);return l?(f.setOrderByIndex(l),f.requestLimitedSnapshot({limit:s+a,orderBy:m})):f.requestSnapshot({orderBy:m,limit:s+a}),f}loadMoreIfNeeded(e){const n=this.getOrderByInfo();if(!n)return!0;const{dataNeeded:r}=n;if(!r)return!0;const s=r();return s>0&&this.loadNextItems(s,e),!0}sendChangesToPipelineWithTracking(e,n){const r=this.getOrderByInfo();if(!r){this.sendChangesToPipeline(e);return}const s=this.trackSentValues(e,r.comparator),a=n;a[$1]??=this.loadMoreIfNeeded.bind(this,n),this.sendChangesToPipeline(s,a[$1])}loadNextItems(e,n){const r=this.getOrderByInfo();if(!r)return;const{orderBy:s,valueExtractorForRawRow:a,offset:l}=r,u=this.biggest,f=u?a(u):void 0,d=f!==void 0?Array.isArray(f)?f:[f]:void 0,m=B1(s,this.alias);n.requestLimitedSnapshot({orderBy:m,limit:e,minValues:d,offset:l})}getWhereClauseForAlias(){const e=this.collectionConfigBuilder.sourceWhereClausesCache;if(e)return e.get(this.alias)}getOrderByInfo(){const e=this.collectionConfigBuilder.optimizableOrderByCollections[this.collectionId];if(e&&e.alias===this.alias)return e}*trackSentValues(e,n){for(const r of e)r.type!=="delete"&&(this.biggest?n(this.biggest,r.value)<0&&(this.biggest=r.value):this.biggest=r.value),yield r}}function r3(t,e,n){const r=[];for(const s of e){const a=n(s.value);s.type==="insert"?r.push([[a,s.value],1]):s.type==="update"?(r.push([[a,s.previousValue],-1]),r.push([[a,s.value],1])):r.push([[a,s.value],-1])}return r.length!==0&&t.sendData(new Xt(r)),r.length}function*s3(t){for(const e of t)e.type==="update"?(yield{type:"delete",key:e.key,value:e.previousValue},yield{type:"insert",key:e.key,value:e.value}):yield e}const Lk=new WeakMap;function i3(t){return t.utils?.[Ny]?.getBuilder?.()}function a3(t,e){Lk.set(t,e)}function o3(t){return Lk.get(t)}let l3=0;class c3{constructor(e){this.config=e,this.compiledAliasToCollectionId={},this.resultKeys=new WeakMap,this.orderByIndices=new WeakMap,this.isGraphRunning=!1,this.runCount=0,this.isInErrorState=!1,this.aliasDependencies={},this.builderDependencies=new Set,this.pendingGraphRuns=new Map,this.subscriptions={},this.lazySourcesCallbacks={},this.lazySources=new Set,this.optimizableOrderByCollections={},this.id=e.id||`live-query-${++l3}`,this.query=u3(e),this.collections=d3(this.query);const n=h3(this.query);this.collectionByAlias={};for(const[r,s]of n.entries()){const a=this.collections[r];if(a)for(const l of s)this.collectionByAlias[l]=a}this.query.orderBy&&this.query.orderBy.length>0&&(this.compare=f3(this.orderByIndices)),this.compareOptions=this.config.defaultStringCollation??zk(this.query).compareOptions,this.compileBasePipeline()}hasJoins(e){return!!(e.join&&e.join.length>0||e.from.type==="queryRef"&&this.hasJoins(e.from.query))}getConfig(){return{id:this.id,getKey:this.config.getKey||(e=>this.resultKeys.get(e)),sync:this.getSyncConfig(),compare:this.compare,defaultStringCollation:this.compareOptions,gcTime:this.config.gcTime||5e3,schema:this.config.schema,onInsert:this.config.onInsert,onUpdate:this.config.onUpdate,onDelete:this.config.onDelete,startSync:this.config.startSync,singleResult:this.query.singleResult,utils:{getRunCount:this.getRunCount.bind(this),setWindow:this.setWindow.bind(this),getWindow:this.getWindow.bind(this),[Ny]:{getBuilder:()=>this,hasCustomGetKey:!!this.config.getKey,hasJoins:this.hasJoins(this.query)}}}}setWindow(e){if(!this.windowFn)throw new HI;return this.currentWindow=e,this.windowFn(e),this.maybeRunGraphFn?.(),this.liveQueryCollection?.isLoadingSubset?new Promise(n=>{const r=this.liveQueryCollection.on("loadingSubset:change",s=>{s.isLoadingSubset||(r(),n())})}):!0}getWindow(){if(!(!this.windowFn||!this.currentWindow))return{offset:this.currentWindow.offset??0,limit:this.currentWindow.limit??0}}getCollectionIdForAlias(e){const n=this.compiledAliasToCollectionId[e];if(n)return n;const r=this.collectionByAlias[e];if(r)return r.id;throw new Error(`Unknown source alias "${e}"`)}isLazyAlias(e){return this.lazySources.has(e)}maybeRunGraph(e){if(!this.isGraphRunning){if(!this.currentSyncConfig||!this.currentSyncState)throw new Error("maybeRunGraph called without active sync session. This should not happen.");this.isGraphRunning=!0;try{const{begin:n,commit:r}=this.currentSyncConfig,s=this.currentSyncState;if(this.isInErrorState)return;if(s.subscribedToAllCollections){for(;s.graph.pendingWork();)s.graph.run(),e?.();s.messagesCount===0&&(n(),r(),this.updateLiveQueryStatus(this.currentSyncConfig))}}finally{this.isGraphRunning=!1}}}scheduleGraphRun(e,n){const r=n?.contextId??rf()?.id,s=n?.jobId??this,a=(()=>{if(n?.dependencies)return n.dependencies;const f=new Set(this.builderDependencies);if(n?.alias){const d=this.aliasDependencies[n.alias];if(d)for(const m of d)f.add(m)}return f.delete(this),Array.from(f)})();if(r)for(const f of a)typeof f.scheduleGraphRun=="function"&&f.scheduleGraphRun(void 0,{contextId:r});if(!this.currentSyncConfig||!this.currentSyncState)throw new Error("scheduleGraphRun called without active sync session. This should not happen.");let l=r?this.pendingGraphRuns.get(r):void 0;l||(l={loadCallbacks:new Set},r&&this.pendingGraphRuns.set(r,l)),e&&l.loadCallbacks.add(e);const u=r?void 0:l;Ef.schedule({contextId:r,jobId:s,dependencies:a,run:()=>this.executeGraphRun(r,u)})}clearPendingGraphRun(e){this.pendingGraphRuns.delete(e)}hasPendingGraphRun(e){return this.pendingGraphRuns.has(e)}executeGraphRun(e,n){const r=n??(e?this.pendingGraphRuns.get(e):void 0);if(e&&this.pendingGraphRuns.delete(e),!r||!this.currentSyncConfig||!this.currentSyncState)return;this.incrementRunCount();const s=()=>{let a=!0,l;if(r.loadCallbacks.forEach(u=>{try{a=u()&&a}catch(f){a=!1,l??=f}}),l)throw l;return a};this.maybeRunGraph(s)}getSyncConfig(){return{rowUpdateMode:"full",sync:this.syncFn.bind(this)}}incrementRunCount(){this.runCount++}getRunCount(){return this.runCount}syncFn(e){this.liveQueryCollection=e.collection,this.currentSyncConfig=e;const n={messagesCount:0,subscribedToAllCollections:!1,unsubscribeCallbacks:new Set},r=this.extendPipelineWithChangeProcessing(e,n);this.currentSyncState=r,this.unsubscribeFromSchedulerClears=Ef.onClear(a=>{this.clearPendingGraphRun(a)});const s=this.subscribeToAllCollections(e,r);return this.maybeRunGraphFn=()=>this.scheduleGraphRun(s),this.scheduleGraphRun(s),()=>{n.unsubscribeCallbacks.forEach(a=>a()),this.currentSyncConfig=void 0,this.currentSyncState=void 0,this.pendingGraphRuns.clear(),this.graphCache=void 0,this.inputsCache=void 0,this.pipelineCache=void 0,this.sourceWhereClausesCache=void 0,this.lazySources.clear(),this.optimizableOrderByCollections={},this.lazySourcesCallbacks={},Object.keys(this.subscriptions).forEach(a=>delete this.subscriptions[a]),this.compiledAliasToCollectionId={},this.unsubscribeFromSchedulerClears?.(),this.unsubscribeFromSchedulerClears=void 0}}compileBasePipeline(){this.graphCache=new UN,this.inputsCache=Object.fromEntries(Object.keys(this.collectionByAlias).map(r=>[r,this.graphCache.newInput()]));const e=Py(this.query,this.inputsCache,this.collections,this.subscriptions,this.lazySourcesCallbacks,this.lazySources,this.optimizableOrderByCollections,r=>{this.windowFn=r});this.pipelineCache=e.pipeline,this.sourceWhereClausesCache=e.sourceWhereClauses,this.compiledAliasToCollectionId=e.aliasToCollectionId;const n=Object.keys(this.compiledAliasToCollectionId).filter(r=>!Object.hasOwn(this.inputsCache,r));if(n.length>0)throw new VI(n)}maybeCompileBasePipeline(){return(!this.graphCache||!this.inputsCache||!this.pipelineCache)&&this.compileBasePipeline(),{graph:this.graphCache,inputs:this.inputsCache,pipeline:this.pipelineCache}}extendPipelineWithChangeProcessing(e,n){const{begin:r,commit:s}=e,{graph:a,inputs:l,pipeline:u}=this.maybeCompileBasePipeline();return u.pipe(nM(f=>{const d=f.getInner();n.messagesCount+=d.length,r(),d.reduce(p3,new Map).forEach(this.applyChanges.bind(this,e)),s()})),a.finalize(),n.graph=a,n.inputs=l,n.pipeline=u,n}applyChanges(e,n,r){const{write:s,collection:a}=e,{deletes:l,inserts:u,value:f,orderByIndex:d}=n;if(this.resultKeys.set(f,r),d!==void 0&&this.orderByIndices.set(f,d),u&&l===0)s({value:f,type:"insert"});else if(u>l||u===l&&a.has(a.getKeyFromItem(f)))s({value:f,type:"update"});else if(l>0)s({value:f,type:"delete"});else throw new Error(`Could not apply changes: ${JSON.stringify(n)}. This should never happen.`)}handleSourceStatusChange(e,n,r){const{status:s}=r;if(s==="error"){this.transitionToError(`Source collection '${n}' entered error state`);return}if(s==="cleaned-up"){this.transitionToError(`Source collection '${n}' was manually cleaned up while live query '${this.id}' depends on it. Live queries prevent automatic GC, so this was likely a manual cleanup() call.`);return}this.updateLiveQueryStatus(e)}updateLiveQueryStatus(e){const{markReady:n}=e;this.isInErrorState||this.allCollectionsReady()&&n()}transitionToError(e){this.isInErrorState=!0,console.error(`[Live Query Error] ${e}`),this.liveQueryCollection?._lifecycle.setStatus("error")}allCollectionsReady(){return Object.values(this.collections).every(e=>e.isReady())}subscribeToAllCollections(e,n){const r=Object.entries(this.compiledAliasToCollectionId);if(r.length===0)throw new Error(`Compiler returned no alias metadata for query '${this.id}'. This should not happen; please report.`);const s=r.map(([l,u])=>{const f=this.collectionByAlias[l]??this.collections[u],d=o3(f);d&&d!==this?(this.aliasDependencies[l]=[d],this.builderDependencies.add(d)):this.aliasDependencies[l]=[];const m=new n3(l,u,f,this),p=f.on("status:change",v=>{this.handleSourceStatusChange(e,u,v)});n.unsubscribeCallbacks.add(p);const y=m.subscribe();return this.subscriptions[l]=y,m.loadMoreIfNeeded.bind(m,y)}),a=()=>(s.map(l=>l()),!0);return n.subscribedToAllCollections=!0,this.updateLiveQueryStatus(e),a}}function u3(t){return typeof t.query=="function"?C4(t.query):Ok(t.query)}function f3(t){return(e,n)=>{const r=t.get(e),s=t.get(n);return r&&s?r<s?-1:r>s?1:0:0}}function d3(t){const e={};function n(s){s.type==="collectionRef"?e[s.collection.id]=s.collection:s.type==="queryRef"&&r(s.query)}function r(s){if(s.from&&n(s.from),s.join&&Array.isArray(s.join))for(const a of s.join)a.from&&n(a.from)}return r(t),e}function zk(t){const e=t.from;if(e.type==="collectionRef")return e.collection;if(e.type==="queryRef")return zk(e.query);throw new Error(`Failed to extract collection. Invalid FROM clause: ${JSON.stringify(t)}`)}function h3(t){const e=new Map;function n(s){if(s)if(s.type==="collectionRef"){const{id:a}=s.collection,l=e.get(a);l?l.add(s.alias):e.set(a,new Set([s.alias]))}else s.type==="queryRef"&&r(s.query)}function r(s){if(s&&(n(s.from),s.join))for(const a of s.join)n(a.from)}return r(t),e}function p3(t,[[e,n],r]){const[s,a]=n,l=t.get(e)||{deletes:0,inserts:0,value:s,orderByIndex:a};return r<0?l.deletes+=Math.abs(r):r>0&&(l.inserts+=r,l.value=s,l.orderByIndex=a),t.set(e,l),t}function U1(t){return new c3(t).getConfig()}function gm(t){if(typeof t=="function"){const n=U1({query:t});return q1(n)}else{const e=t,n=U1(e);return e.utils&&(n.utils={...n.utils,...e.utils}),q1(n)}}function q1(t){const e=Ak(t),n=i3(t);return n&&a3(e,n),e}const ym=1;function m3(t,e=[]){const n=t&&typeof t=="object"&&typeof t.subscribeChanges=="function"&&typeof t.startSyncImmediate=="function"&&typeof t.id=="string",r=Z.useRef(null),s=Z.useRef(null),a=Z.useRef(null),l=Z.useRef(0),u=Z.useRef(null),f=!r.current||n&&a.current!==t||!n&&(s.current===null||s.current.length!==e.length||s.current.some((v,w)=>v!==e[w]));if(f)if(n)t.startSyncImmediate(),r.current=t,a.current=t;else if(typeof t=="function"){const v=new Wt,w=t(v);if(w==null)r.current=null;else if(w instanceof jy)w.startSyncImmediate(),r.current=w;else if(w instanceof Wt)r.current=gm({query:t,startSync:!0,gcTime:ym});else if(w&&typeof w=="object")r.current=gm({startSync:!0,gcTime:ym,...w});else throw new Error(`useLiveQuery callback must return a QueryBuilder, LiveQueryCollectionConfig, Collection, undefined, or null. Got: ${typeof w}`);s.current=[...e]}else r.current=gm({startSync:!0,gcTime:ym,...t}),s.current=[...e];f&&(l.current=0,u.current=null);const d=Z.useRef(null);(!d.current||f)&&(d.current=v=>{if(!r.current)return()=>{};const w=r.current.subscribeChanges(()=>{l.current+=1,v()});return r.current.status==="ready"&&(l.current+=1,v()),()=>{w.unsubscribe()}});const m=Z.useRef(null);(!m.current||f)&&(m.current=()=>{const v=l.current,w=r.current;return(!u.current||u.current.version!==v||u.current.collection!==w)&&(u.current={collection:w,version:v}),u.current});const p=Z.useSyncExternalStore(d.current,m.current),y=Z.useRef(null),g=Z.useRef(null);if(!y.current||y.current.version!==p.version||y.current.collection!==p.collection){if(!p.collection)g.current={state:void 0,data:void 0,collection:void 0,status:"disabled",isLoading:!1,isReady:!0,isIdle:!1,isError:!1,isCleanedUp:!1,isEnabled:!1};else{const v=Array.from(p.collection.entries()),E=p.collection.config.singleResult;let k=null,C=null;g.current={get state(){return k||(k=new Map(v)),k},get data(){return C||(C=v.map(([,T])=>T)),E?C[0]:C},collection:p.collection,status:p.collection.status,isLoading:p.collection.status==="loading",isReady:p.collection.status==="ready",isIdle:p.collection.status==="idle",isError:p.collection.status==="error",isCleanedUp:p.collection.status==="cleaned-up",isEnabled:!0}}y.current=p}return g.current}class oi extends yr{constructor(e){super(e),this.name="QueryCollectionError"}}class g3 extends oi{constructor(){super("[QueryCollection] queryKey must be provided."),this.name="QueryKeyRequiredError"}}class y3 extends oi{constructor(){super("[QueryCollection] queryFn must be provided."),this.name="QueryFnRequiredError"}}class b3 extends oi{constructor(){super("[QueryCollection] queryClient must be provided."),this.name="QueryClientRequiredError"}}class _3 extends oi{constructor(){super("[QueryCollection] getKey must be provided."),this.name="GetKeyRequiredError"}}class v3 extends oi{constructor(){super("Collection must be in 'ready' state for manual sync operations. Sync not initialized yet."),this.name="SyncNotInitializedError"}}class x3 extends oi{constructor(e){super(`Duplicate key '${e}' found within batch operations`),this.name="DuplicateKeyInBatchError"}}class w3 extends oi{constructor(e){super(`Update operation: Item with key '${e}' does not exist`),this.name="UpdateOperationItemNotFoundError"}}class S3 extends oi{constructor(e){super(`Delete operation: Item with key '${e}' does not exist`),this.name="DeleteOperationItemNotFoundError"}}const Ni=new WeakMap;function k3(t,e){const n=Array.isArray(t)?t:[t],r=[];for(const s of n)if(s.type==="delete"){const a=Array.isArray(s.key)?s.key:[s.key];for(const l of a)r.push({type:"delete",key:l})}else{const a=Array.isArray(s.data)?s.data:[s.data];for(const l of a){let u;if(s.type==="update")u=e.getKey(l);else{const f=e.collection.validateData(l,s.type==="upsert"?"insert":s.type);u=e.getKey(f)}r.push({type:s.type,key:u,data:l})}}return r}function E3(t,e){const n=new Set;for(const r of t){if(n.has(r.key))throw new x3(r.key);if(n.add(r.key),r.type==="update"){if(!e.collection._state.syncedData.has(r.key))throw new w3(r.key)}else if(r.type==="delete"&&!e.collection._state.syncedData.has(r.key))throw new S3(r.key)}}function dl(t,e){const n=k3(t,e);E3(n,e),e.begin();for(const s of n)switch(s.type){case"insert":{const a=e.collection.validateData(s.data,"insert");e.write({type:"insert",value:a});break}case"update":{const l={...e.collection._state.syncedData.get(s.key),...s.data},u=e.collection.validateData(l,"update",s.key);e.write({type:"update",value:u});break}case"delete":{const a=e.collection._state.syncedData.get(s.key);e.write({type:"delete",value:a});break}case"upsert":{const a=e.collection._state.syncedData.has(s.key),l=e.collection.validateData(s.data,a?"update":"insert",s.key);a?e.write({type:"update",value:l}):e.write({type:"insert",value:l});break}}e.commit();const r=Array.from(e.collection._state.syncedData.values());e.updateCacheData?e.updateCacheData(r):e.queryClient.setQueryData(e.queryKey,r)}function C3(t){function e(){const n=t();if(!n)throw new v3;return n}return{writeInsert(n){const r={type:"insert",data:n},s=e(),a=Ni.get(s);if(a?.isActive){a.operations.push(r);return}dl(r,s)},writeUpdate(n){const r={type:"update",data:n},s=e(),a=Ni.get(s);if(a?.isActive){a.operations.push(r);return}dl(r,s)},writeDelete(n){const r={type:"delete",key:n},s=e(),a=Ni.get(s);if(a?.isActive){a.operations.push(r);return}dl(r,s)},writeUpsert(n){const r={type:"upsert",data:n},s=e(),a=Ni.get(s);if(a?.isActive){a.operations.push(r);return}dl(r,s)},writeBatch(n){const r=e();if(Ni.get(r)?.isActive)throw new Error("Cannot nest writeBatch calls. Complete the current batch before starting a new one.");const a={operations:[],isActive:!0};Ni.set(r,a);try{const l=n();if(l&&typeof l=="object"&&"then"in l&&typeof l.then=="function")throw new Error("writeBatch does not support async callbacks. The callback must be synchronous.");a.operations.length>0&&dl(a.operations,r)}finally{a.isActive=!1,Ni.delete(r)}}}}function T3(t){if(!t)return;const e={};return t.where&&(e.where=Cg(t.where)),t.orderBy?.length&&(e.orderBy=t.orderBy.map(n=>{const r={expression:Cg(n.expression),direction:n.compareOptions.direction,nulls:n.compareOptions.nulls,stringSort:n.compareOptions.stringSort};return n.compareOptions.stringSort==="locale"?{...r,locale:n.compareOptions.locale,localeOptions:n.compareOptions.localeOptions}:r})),t.limit!==void 0&&(e.limit=t.limit),t.offset!==void 0&&(e.offset=t.offset),Object.keys(e).length===0?void 0:JSON.stringify(e)}function Cg(t){if(!t)return null;switch(t.type){case"val":return{type:"val",value:Tg(t.value)};case"ref":return{type:"ref",path:[...t.path]};case"func":return{type:"func",name:t.name,args:t.args.map(e=>Cg(e))};default:return null}}function Tg(t){if(t===void 0)return{__type:"undefined"};if(typeof t=="number"){if(Number.isNaN(t))return{__type:"nan"};if(t===Number.POSITIVE_INFINITY)return{__type:"infinity",sign:1};if(t===Number.NEGATIVE_INFINITY)return{__type:"infinity",sign:-1}}return t===null||typeof t=="string"||typeof t=="number"||typeof t=="boolean"?t:t instanceof Date?{__type:"date",value:t.toJSON()}:Array.isArray(t)?t.map(e=>Tg(e)):typeof t=="object"?Object.fromEntries(Object.entries(t).map(([e,n])=>[e,Tg(n)])):t}class A3{constructor(e,n,r){this.state=e,this.refetchFn=n,this.refetch=n,this.writeInsert=r.writeInsert,this.writeUpdate=r.writeUpdate,this.writeDelete=r.writeDelete,this.writeUpsert=r.writeUpsert,this.writeBatch=r.writeBatch}async clearError(){this.state.lastError=void 0,this.state.errorCount=0,this.state.lastErrorUpdatedAt=0,await this.refetchFn({throwOnError:!0})}get lastError(){return this.state.lastError}get isError(){return!!this.state.lastError}get errorCount(){return this.state.errorCount}get isFetching(){return Array.from(this.state.observers.values()).some(e=>e.getCurrentResult().isFetching)}get isRefetching(){return Array.from(this.state.observers.values()).some(e=>e.getCurrentResult().isRefetching)}get isLoading(){return Array.from(this.state.observers.values()).some(e=>e.getCurrentResult().isLoading)}get dataUpdatedAt(){return Math.max(0,...Array.from(this.state.observers.values()).map(e=>e.getCurrentResult().dataUpdatedAt))}get fetchStatus(){return Array.from(this.state.observers.values()).map(e=>e.getCurrentResult().fetchStatus)}}function R3(t){const{queryKey:e,queryFn:n,select:r,queryClient:s,enabled:a,refetchInterval:l,retry:u,retryDelay:f,staleTime:d,getKey:m,onInsert:p,onUpdate:y,onDelete:g,meta:v,...w}=t,E=w.syncMode??"eager";if(!e)throw new g3;if(!n)throw new y3;if(!s)throw new b3;if(!m)throw new _3;const k={lastError:void 0,errorCount:0,lastErrorUpdatedAt:0,observers:new Map},C=new Map,T=new Map,D=new Map,N=new Map,R=new Map,$=(re,I)=>{const j=D.get(re)||new Set;j.add(I),D.set(re,j);const G=T.get(I)||new Set;G.add(re),T.set(I,G)},q=(re,I)=>{const j=D.get(re)||new Set;j.delete(I),D.set(re,j);const G=T.get(I)||new Set;return G.delete(re),T.set(I,G),j.size===0},H=re=>{const{begin:I,write:j,commit:G,markReady:O,collection:le}=re;let L=!1;const P=we=>{if(typeof e=="function")return e(we);if(E==="on-demand"){const Qe=T3(we);return Qe!==void 0?[...e,Qe]:e}else return e},pe=(we={},Qe=n)=>{const et=P(we),Re=Cs(et),kt={...v,loadSubsetOptions:we};if(k.observers.has(Re)){R.set(Re,(R.get(Re)||0)+1);const _e=k.observers.get(Re),ue=_e.getCurrentResult();return ue.isSuccess?!0:ue.isError?Promise.reject(ue.error):new Promise((Se,Oe)=>{const st=_e.subscribe(ut=>{ut.isSuccess?(st(),Se()):ut.isError&&(st(),Oe(ut.error))})})}const se={queryKey:et,queryFn:Qe,meta:kt,structuralSharing:!0,notifyOnChangeProps:"all",...a!==void 0&&{enabled:a},...l!==void 0&&{refetchInterval:l},...u!==void 0&&{retry:u},...f!==void 0&&{retryDelay:f},...d!==void 0&&{staleTime:d}},me=new OO(s,se);C.set(Re,et),k.observers.set(Re,me),R.set(Re,(R.get(Re)||0)+1);const he=new Promise((_e,ue)=>{const Se=me.subscribe(Oe=>{Oe.isSuccess?(Se(),_e()):Oe.isError&&(Se(),ue(Oe.error))})});return(L||le.subscriberCount>0)&&Te(me,Re),he},xe=we=>{const Qe=Cs(we);return Re=>{if(Re.isSuccess){k.lastError=void 0,k.errorCount=0;const kt=Re.data,se=r?r(kt):kt;if(!Array.isArray(se)||se.some(_e=>typeof _e!="object")){const _e=r?`@tanstack/query-db-collection: select() must return an array of objects. Got: ${typeof se} for queryKey ${JSON.stringify(we)}`:`@tanstack/query-db-collection: queryFn must return an array of objects. Got: ${typeof se} for queryKey ${JSON.stringify(we)}`;console.error(_e);return}const me=new Map(le._state.syncedData.entries()),he=new Map;se.forEach(_e=>{const ue=m(_e);he.set(ue,_e)}),I(),me.forEach((_e,ue)=>{const Se=he.get(ue);Se?Ur(_e,Se)||j({type:"update",value:Se}):q(ue,Qe)&&j({type:"delete",value:_e})}),he.forEach((_e,ue)=>{$(ue,Qe),me.has(ue)||j({type:"insert",value:_e})}),G(),O()}else Re.isError&&(Re.errorUpdatedAt!==k.lastErrorUpdatedAt&&(k.lastError=Re.error,k.errorCount++,k.lastErrorUpdatedAt=Re.errorUpdatedAt),console.error(`[QueryCollection] Error observing query ${String(we)}:`,Re.error),O())}},ve=we=>N.has(we),Te=(we,Qe)=>{if(!ve(Qe)){const et=C.get(Qe),Re=xe(et),kt=we.subscribe(Re);N.set(Qe,kt);const se=we.getCurrentResult();(se.isSuccess||se.isError)&&Re(se)}},je=()=>{k.observers.forEach(Te)},at=()=>{N.forEach(we=>{we()}),N.clear()};L=!0;const Ct=le.on("subscribers:change",({subscriberCount:we})=>{we>0?je():we===0&&at()});if(E==="eager"){const we=pe({});we instanceof Promise&&we.catch(()=>{})}else O();je(),k.observers.forEach((we,Qe)=>{const et=C.get(Qe);xe(et)(we.getCurrentResult())});const Nt=we=>{N.get(we)?.(),N.delete(we);const Qe=T.get(we)??new Set,et=[];Qe.forEach(Re=>{const kt=D.get(Re);kt&&(kt.delete(we),kt.size===0&&(D.delete(Re),le.has(Re)&&et.push(le.get(Re))))}),et.length>0&&(I(),et.forEach(Re=>{j({type:"delete",value:Re})}),G()),k.observers.delete(we),T.delete(we),C.delete(we),R.delete(we)},Zt=we=>{const Qe=R.get(we)||0,et=k.observers.get(we);if(Qe<=0&&(N.get(we)?.(),N.delete(we)),et?.hasListeners()??!1){R.set(we,0);return}Qe>0&&console.warn(`[cleanupQueryIfIdle] Invariant violation: refcount=${Qe} but no listeners. Cleaning up to prevent leak.`,{hashedQueryKey:we}),Nt(we)},an=we=>{Nt(we)},rr=s.getQueryCache().subscribe(we=>{const Qe=we.query.queryHash;we.type==="removed"&&C.has(Qe)&&Zt(Qe)});return{loadSubset:E==="eager"?void 0:pe,unloadSubset:E==="eager"?void 0:we=>{const Qe=P(we),et=Cs(Qe),kt=(R.get(et)||0)-1;kt<=0?(R.set(et,0),Zt(et)):R.set(et,kt)},cleanup:async()=>{Ct(),at();const we=[...C.values()],Qe=[...k.observers.keys()];for(const et of Qe)an(et);rr(),await Promise.all(we.map(async et=>{await s.cancelQueries({queryKey:et,exact:!0}),s.removeQueries({queryKey:et,exact:!0})}))}}},M=async re=>{const j=[...C.values()].map(G=>k.observers.get(Cs(G)).refetch({throwOnError:re?.throwOnError}));await Promise.all(j)},Q=re=>{const I=typeof e=="function"?e({}):e;r?s.setQueryData(I,j=>{if(!j||typeof j!="object")return j;if(Array.isArray(j))return re;const G=r(j);if(Array.isArray(G)){for(const O of Object.keys(j))if(j[O]===G)return{...j,[O]:re}}if(Array.isArray(j.data))return{...j,data:re};if(Array.isArray(j.items))return{...j,items:re};if(Array.isArray(j.results))return{...j,results:re};for(const O of Object.keys(j))if(Array.isArray(j[O]))return{...j,[O]:re};return j}):s.setQueryData(I,re)};let ne=null;const ye=re=>{const{begin:I,write:j,commit:G,collection:O}=re,le=typeof e=="function"?e({}):e;return ne={collection:O,queryClient:s,queryKey:le,getKey:m,begin:I,write:j,commit:G,updateCacheData:Q},H(re)},X=C3(()=>ne),F=p?async re=>{const I=await p(re)??{};return I.refetch!==!1&&await M(),I}:void 0,B=y?async re=>{const I=await y(re)??{};return I.refetch!==!1&&await M(),I}:void 0,K=g?async re=>{const I=await g(re)??{};return I.refetch!==!1&&await M(),I}:void 0,ie=new A3(k,M,X);return{...w,getKey:m,syncMode:E,sync:{sync:ye},onInsert:F,onUpdate:B,onDelete:K,utils:ie}}function er(){return Math.random().toString(36).substring(2,9)}async function O3(t){return new Promise((e,n)=>{const r=new FileReader;r.onloadend=()=>{const a=r.result.split(",")[1]||"";e(a)},r.onerror=n,r.readAsDataURL(t)})}function I3(t,e){const n=atob(t),r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return new Blob([r],{type:e})}function N3(t){const e=t.match(/^grpc:\/\/([^/]+)\/(.+)\/([^/]+)$/);return e?{server:e[1],service:e[2],method:e[3]}:{server:t.replace(/^grpc:\/\//,""),service:"",method:""}}function M3(t,e,n){return e&&n?`grpc://${t}/${e}/${n}`:`grpc://${t}`}async function F1(t){const e={id:t.id,name:t.name,variables:t.variables??[],creationTime:t.creationTime,executionTime:t.executionTime};switch(t.protocol){case"grpc":{const{server:n,service:r,method:s}=N3(t.url);e.grpc={server:n,service:r,method:s,schema:t.grpc?.schema,body:t.grpc?.body??"",response:t.grpc?.response};break}case"mcp":{e.mcp={url:t.url,headers:t.mcp?.headers,tool:t.mcp?.tool,resource:t.mcp?.resource,response:t.mcp?.response};break}case"openai":{e.openai={url:t.url,model:t.openai?.model??"",chat:t.openai?.chat,image:t.openai?.image,audio:t.openai?.audio,transcription:t.openai?.transcription,embeddings:t.openai?.embeddings,response:t.openai?.response};break}default:{let n=t.http?.body??{type:"none"};n.type==="form-data"?n={...n,data:n.data.map(s=>({...s,file:null}))}:n.type==="binary"&&(n={...n,file:null});let r;if(t.http?.response){const s=t.http.response.body instanceof Blob?await O3(t.http.response.body):"",a=t.http.response.body instanceof Blob?t.http.response.body.type:"application/octet-stream";r={status:t.http.response.status,statusCode:t.http.response.statusCode,headers:t.http.response.headers,body:s,bodyType:a,duration:t.http.response.duration,error:t.http.response.error}}e.http={method:t.http?.method??"GET",url:t.url,query:t.http?.query??[],headers:t.http?.headers??[],body:n,response:r};break}}return e}function D3(t){const e=t.grpc?"grpc":t.mcp?"mcp":t.openai?"openai":"rest",n={id:t.id,name:t.name,protocol:e,url:"",variables:t.variables??[],creationTime:t.creationTime,executionTime:t.executionTime};if(t.grpc){const r=t.grpc;n.url=M3(r.server,r.service,r.method),n.grpc={schema:r.schema,body:r.body||"",metadata:[],response:r.response}}else if(t.mcp){const r=t.mcp;n.url=r.url,n.mcp={headers:r.headers??[],tool:r.tool,resource:r.resource,response:r.response}}else if(t.openai){const r=t.openai;n.url=r.url,n.openai={model:r.model,chat:r.chat,image:r.image,audio:r.audio,transcription:r.transcription,embeddings:r.embeddings,response:r.response}}else if(t.http){const r=t.http;n.url=r.url,n.http={method:r.method,query:r.query,headers:r.headers,body:r.body,request:null,response:r.response?{status:r.response.status,statusCode:r.response.statusCode,headers:r.response.headers,body:r.response.body?I3(r.response.body,r.response.bodyType):new Blob([]),duration:r.response.duration,error:r.response.error}:null}}return n}const Af="requests";async function j3(){const t=await fetch(`/data/${Af}`);if(!t.ok)throw new Error(`Failed to list entries: ${t.statusText}`);const e=await t.json();return(await Promise.all(e.map(async r=>{const s=await fetch(`/data/${Af}/${encodeURIComponent(r.id)}`);return s.ok?await s.json():null}))).filter(r=>r!==null)}async function V1(t){const e=await fetch(`/data/${Af}/${encodeURIComponent(t.id)}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!e.ok)throw new Error(`Failed to save request: ${e.statusText}`)}async function L3(t){const e=await fetch(`/data/${Af}/${encodeURIComponent(t)}`,{method:"DELETE"});if(!e.ok&&e.status!==404)throw new Error(`Failed to delete request: ${e.statusText}`)}const Pk=new PO({defaultOptions:{queries:{staleTime:1/0,refetchOnWindowFocus:!1}}}),Ft=Ak(R3({queryKey:["requests"],queryFn:async()=>(await j3()).map(D3),getKey:t=>t.id,queryClient:Pk,onInsert:async({transaction:t})=>{await Promise.all(t.mutations.map(async e=>{const n=e.modified,r=await F1(n);await V1(r)}))},onUpdate:async({transaction:t})=>{await Promise.all(t.mutations.map(async e=>{const n=e.modified,r=await F1(n);await V1(r)}))},onDelete:async({transaction:t})=>{await Promise.all(t.mutations.map(async e=>{const n=e.original;await L3(n.id)}))}}));async function z3(){Array.from(Ft.state.keys()).forEach(e=>Ft.delete(e))}function Rf(t,e,n={}){const{missingDataPlaceholder:r=""}=n;let s=t;const a=/\{\{(\w+):([^}]+)\}\}/g;let l;for(;(l=a.exec(t))!==null;){const[u,f,d]=l,m=e.find(y=>y.type===f&&y.id===d);let p="";switch(f){case"file_base64":p=m?.data||r;break;case"base64":m?.data?p=btoa(m.data):p=r;break;case"file_dataurl":m?.data&&m?.mimeType?p=`data:${m.mimeType};base64,${m.data}`:m?.data?p=`data:application/octet-stream;base64,${m.data}`:p=r;break;case"timestamp":p=String(Date.now());break;case"uuid":typeof crypto<"u"&&crypto.randomUUID?p=crypto.randomUUID():p="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,y=>{const g=Math.random()*16|0;return(y==="x"?g:g&3|8).toString(16)});break;case"random_string":p=Math.random().toString(36).substring(2,18);break;default:p=u}s=s.replace(u,p)}return s}function Za(){return{id:er(),enabled:!0,key:"",value:""}}function sf(t,e="rest"){const n={id:er(),name:t||"New Request",protocol:e,url:"",variables:[],creationTime:Date.now(),executionTime:null};switch(e){case"grpc":n.grpc={body:"",metadata:[Za()]};break;case"mcp":n.mcp={headers:[Za()]};break;case"openai":n.openai={model:"",chat:{input:[{id:er(),role:"user",content:[{type:"text",text:""}]}]}};break;default:n.http={method:"GET",headers:[Za()],query:[Za()],body:{type:"none"},request:null,response:null};break}return n}const Bk=Z.createContext(null),P3={request:sf(),isExecuting:!1,sidebarCollapsed:!1,aiPanelOpen:!1};function B3({children:t}){const[e,n]=Z.useState(P3),{data:r=[]}=m3(L=>L.from({req:Ft}).orderBy(({req:P})=>P.executionTime??P.creationTime,"desc")),s=Z.useCallback(L=>{n(P=>({...P,request:{...P.request,...L}}))},[]),a=Z.useCallback((L,P)=>{try{const pe=new URL(L),xe=pe.protocol.replace(/:$/,""),ve=pe.host,Te=pe.pathname.replace(/^\//,""),je=P.replace(/^\//,""),at=`/proxy/mcp/${xe}/${ve}/${je}`;return Te?`${at}?path=${encodeURIComponent(Te)}`:at}catch{return""}},[]),l=Z.useCallback((L,P)=>{try{const pe=new URL(L),xe=pe.protocol.replace(/:$/,""),ve=pe.host,Te=P.replace(/^\//,"");return`/proxy/${xe}/${ve}/${Te}`}catch{return""}},[]),u=Z.useCallback(L=>{n(P=>{const pe=sf(P.request.name,L);return pe.id=P.request.id,pe.url=P.request.url,{...P,request:pe}})},[]),f=Z.useCallback(L=>{n(P=>({...P,request:{...P.request,http:{...P.request.http,method:L}}}))},[]),d=Z.useCallback(L=>{s({url:L})},[s]),m=Z.useCallback(L=>{n(P=>({...P,request:{...P.request,http:{...P.request.http,headers:L}}}))},[]),p=Z.useCallback(L=>{n(P=>({...P,request:{...P.request,http:{...P.request.http,query:L}}}))},[]),y=Z.useCallback(L=>{n(P=>({...P,request:{...P.request,http:P.request.http?{...P.request.http,body:L}:{method:"GET",headers:[],query:[],body:L,request:null,response:null}}}))},[]),g=Z.useCallback(L=>{s({variables:L})},[s]),v=Z.useCallback(L=>{n(P=>{const pe=P.request.http?.request,ve={...pe?.options??{insecure:!1,redirect:!0},...L};return{...P,request:{...P.request,http:P.request.http?{...P.request.http,request:pe?{...pe,options:ve}:null}:void 0}}})},[]),w=Z.useCallback(L=>{n(P=>({...P,request:{...P.request,grpc:P.request.grpc?{...P.request.grpc,body:L}:{body:L,metadata:[]}}}))},[]),E=Z.useCallback(L=>{n(P=>({...P,request:{...P.request,grpc:P.request.grpc?{...P.request.grpc,metadata:L}:{body:"",metadata:L}}}))},[]),k=Z.useCallback(L=>{n(P=>({...P,request:{...P.request,grpc:P.request.grpc?{...P.request.grpc,schema:L}:{body:"",metadata:[],schema:L}}}))},[]),C=Z.useCallback(L=>{n(P=>({...P,request:{...P.request,mcp:{headers:P.request.mcp?.headers??[Za()],tool:L,resource:void 0}}}))},[]),T=Z.useCallback(L=>{n(P=>({...P,request:{...P.request,mcp:{headers:P.request.mcp?.headers??[Za()],resource:L,tool:void 0}}}))},[]),D=Z.useCallback(L=>{n(P=>({...P,request:{...P.request,mcp:P.request.mcp?{...P.request.mcp,headers:L}:{headers:L}}}))},[]),N=Z.useCallback(L=>{n(P=>({...P,request:{...P.request,openai:P.request.openai?{...P.request.openai,model:L}:{model:L,chat:{input:[]}}}}))},[]),R=Z.useCallback(L=>{n(P=>({...P,request:{...P.request,openai:P.request.openai?{...P.request.openai,models:L}:{model:"",models:L,chat:{input:[]}}}}))},[]),$=Z.useCallback(L=>{n(P=>{const pe=P.request.openai,xe={model:pe?.model??"",...L==="chat"?{chat:pe?.chat??{input:[{id:er(),role:"user",content:[{type:"text",text:""}]}]}}:L==="image"?{image:pe?.image??{prompt:"",images:[{id:er(),data:""}]}}:L==="audio"?{audio:pe?.audio??{text:"",voice:"alloy"}}:L==="transcription"?{transcription:pe?.transcription??{file:""}}:{embeddings:pe?.embeddings??{input:[{id:er(),text:""}]}}};return{...P,request:{...P.request,openai:xe}}})},[]),q=Z.useCallback(L=>{n(P=>({...P,request:{...P.request,openai:P.request.openai?{...P.request.openai,chat:{input:L}}:{model:"",chat:{input:L}}}}))},[]),H=Z.useCallback(L=>{n(P=>({...P,request:{...P.request,openai:P.request.openai?{...P.request.openai,image:{...P.request.openai.image,prompt:L}}:{model:"",image:{prompt:L}}}}))},[]),M=Z.useCallback(L=>{n(P=>({...P,request:{...P.request,openai:P.request.openai?{...P.request.openai,image:{prompt:P.request.openai.image?.prompt??"",images:L}}:{model:"",image:{prompt:"",images:L}}}}))},[]),Q=Z.useCallback(L=>{n(P=>({...P,request:{...P.request,openai:P.request.openai?{...P.request.openai,audio:{...P.request.openai.audio,text:L}}:{model:"",audio:{text:L,voice:"alloy"}}}}))},[]),ne=Z.useCallback(L=>{n(P=>({...P,request:{...P.request,openai:P.request.openai?{...P.request.openai,audio:{text:P.request.openai.audio?.text??"",voice:L}}:{model:"",audio:{text:"",voice:L}}}}))},[]),ye=Z.useCallback(L=>{n(P=>({...P,request:{...P.request,openai:P.request.openai?{...P.request.openai,transcription:{file:L}}:{model:"",transcription:{file:L}}}}))},[]),X=Z.useCallback(L=>{n(P=>({...P,request:{...P.request,openai:P.request.openai?{...P.request.openai,embeddings:{input:L}}:{model:"",embeddings:{input:L}}}}))},[]),F=Z.useCallback(async()=>{const L=e.request;if(!L.url)return null;n(P=>({...P,isExecuting:!0}));try{const P=a(L.url,"features");if(!P)throw new Error("Invalid MCP server URL");const pe={};for(const Te of L.mcp?.headers??[])Te.enabled&&Te.key&&(pe[Te.key]=Te.value);const xe=await fetch(P,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({headers:pe})});if(!xe.ok){const Te=await xe.text();throw new Error(Te||`HTTP ${xe.status}`)}const ve=await xe.json();return n(Te=>({...Te,isExecuting:!1})),ve}catch(P){const pe=P instanceof Error?P.message:"Unknown error";return n(xe=>({...xe,isExecuting:!1})),{tools:[],resources:[],error:pe}}},[e.request,s,a]),B=Z.useCallback(()=>{n(L=>{const{protocol:P}=L.request;return P==="grpc"&&L.request.grpc?{...L,request:{...L.request,grpc:{...L.request.grpc,response:void 0}}}:P==="mcp"&&L.request.mcp?{...L,request:{...L.request,mcp:{...L.request.mcp,response:void 0}}}:P==="openai"&&L.request.openai?{...L,request:{...L.request,openai:{...L.request.openai,response:void 0}}}:L.request.http?{...L,request:{...L.request,http:{...L.request.http,response:null}}}:L})},[]),K=Z.useCallback(async()=>{const L=e.request;n(P=>({...P,isExecuting:!0}));try{if(L.protocol==="grpc"){const _e=L.url.match(/^grpc:\/\/([^/]+)\/(.+)\/([^/]+)$/);if(!_e)throw new Error("Invalid gRPC URL format. Expected: grpc://host:port/service/method");const[,ue,Se,Oe]=_e,st=L.grpc?.body??"{}",ut=Rf(st,L.variables),ft={"Content-Type":"application/json"};(L.grpc?.metadata??[]).filter(Tt=>Tt.enabled&&Tt.key).forEach(Tt=>{ft[Tt.key]=Tt.value});const Me=`/proxy/grpc/${ue}/${Se}/${Oe}`,yt=performance.now(),He=await fetch(Me,{method:"POST",headers:ft,body:ut}),dt=Math.round(performance.now()-yt),ht=await He.text(),it={};He.headers.forEach((Tt,Un)=>{it[Un]=Tt});const nt=Date.now(),Lt={...L,executionTime:nt,grpc:{...L.grpc,body:st,metadata:L.grpc?.metadata??[],response:{body:ht,metadata:it,duration:dt,error:He.ok?void 0:`HTTP ${He.status}`}}};r.find(Tt=>Tt.id===L.id)?Ft.update(L.id,Tt=>{Object.assign(Tt,Lt)}):Ft.insert(Lt),n(Tt=>({...Tt,request:Lt,isExecuting:!1}));return}if(L.protocol==="mcp"){const he=L.url;if(!he)throw new Error("MCP server URL is required");const _e=performance.now();let ue;if(L.mcp?.tool){let ft={};if(L.mcp.tool.arguments)try{ft=JSON.parse(L.mcp.tool.arguments)}catch{}const Me={};for(const ht of L.mcp?.headers??[])ht.enabled&&ht.key&&(Me[ht.key]=ht.value);const yt=a(he,"tool/call");if(!yt)throw new Error("Invalid MCP server URL");const He=await fetch(yt,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:L.mcp.tool.name,arguments:ft,headers:Me})});if(!He.ok){const ht=await He.text();throw new Error(ht||`HTTP ${He.status}`)}ue=await He.json()}else if(L.mcp?.resource){const ft=a(he,"resource/call");if(!ft)throw new Error("Invalid MCP server URL");const Me={};for(const dt of L.mcp?.headers??[])dt.enabled&&dt.key&&(Me[dt.key]=dt.value);const yt=await fetch(ft,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({uri:L.mcp.resource.uri,headers:Me})});if(!yt.ok){const dt=await yt.text();throw new Error(dt||`HTTP ${yt.status}`)}ue=await yt.json()}else throw new Error("No tool or resource selected");const Se=Math.round(performance.now()-_e),Oe=Date.now(),st={...L,executionTime:Oe,mcp:{...L.mcp,response:{result:ue,duration:Se}}};r.find(ft=>ft.id===L.id)?Ft.update(L.id,ft=>{Object.assign(ft,st)}):Ft.insert(st),n(ft=>({...ft,request:st,isExecuting:!1}));return}if(L.protocol==="openai"){const he=L.url.replace(/\/$/,""),_e=L.openai?.model,ue=!!L.openai?.chat;if(!he)throw new Error("OpenAI API URL is required");if(!_e)throw new Error("Please select a model");const Se=performance.now();let Oe;if(ue){const Me=(L.openai?.chat?.input??[]).map(it=>({role:it.role,content:it.content.map(nt=>{switch(nt.type){case"text":return{type:"input_text",text:nt.text};case"file":return nt.data.startsWith("data:image/")?{type:"input_image",image_url:nt.data}:{type:"input_file",filename:nt.name||"file",file_data:nt.data}}})})),yt=l(he,"/v1/responses"),He=await fetch(yt,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({model:_e,input:Me})});if(!He.ok){const it=await He.text();throw new Error(it||`HTTP ${He.status}`)}const dt=await He.json();let ht="";if(dt.output&&Array.isArray(dt.output)){for(const it of dt.output)if(it.type==="message"&&it.content)for(const nt of it.content)nt.type==="output_text"&&(ht+=nt.text)}Oe={result:{type:"text",text:ht},duration:Math.round(performance.now()-Se)}}else if(L.openai?.image){const Me=L.openai.image.prompt??"",He=(L.openai.image.images??[]).filter(ht=>ht.data.length>0),dt=He.length>0;if(!Me)throw new Error("Please enter an image prompt");if(dt){if(He.length===0)throw new Error("Please upload at least one image");const ht=new FormData;ht.append("model",_e),ht.append("prompt",Me);for(const Un of He){const hi=Un.data.match(/^data:([^;]+);base64,(.+)$/);if(hi){const Yi=hi[1],qn=hi[2],_o=atob(qn),vo=new Uint8Array(_o.length);for(let pi=0;pi<_o.length;pi++)vo[pi]=_o.charCodeAt(pi);const vc=new Blob([vo],{type:Yi});ht.append("image[]",vc,"image.png")}}const it=l(he,"/v1/images/edits"),nt=await fetch(it,{method:"POST",body:ht});if(!nt.ok){const Un=await nt.text();throw new Error(Un||`HTTP ${nt.status}`)}const Nn=((await nt.json()).data||[])[0];Oe={result:{type:"image",image:Nn?.b64_json||Nn?.url||""},duration:Math.round(performance.now()-Se)}}else{const ht=l(he,"/v1/images/generations"),it=await fetch(ht,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({model:_e,prompt:Me,response_format:"b64_json"})});if(!it.ok){const Tt=await it.text();throw new Error(Tt||`HTTP ${it.status}`)}const Lt=((await it.json()).data||[])[0];Oe={result:{type:"image",image:Lt?.b64_json||Lt?.url||""},duration:Math.round(performance.now()-Se)}}}else if(L.openai?.audio){const Me=L.openai?.audio?.text??"",yt=L.openai?.audio?.voice??"alloy";if(!Me)throw new Error("Please enter text to convert to speech");const He=l(he,"/v1/audio/speech"),dt=await fetch(He,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({model:_e,input:Me,voice:yt})});if(!dt.ok){const Lt=await dt.text();throw new Error(Lt||`HTTP ${dt.status}`)}const ht=await dt.blob(),it=new FileReader;Oe={result:{type:"audio",audio:await new Promise((Lt,Nn)=>{it.onloadend=()=>{const Un=it.result.split(",")[1]||"";Lt(Un)},it.onerror=Nn,it.readAsDataURL(ht)})},duration:Math.round(performance.now()-Se)}}else if(L.openai?.transcription){const Me=L.openai?.transcription?.file??"";if(!Me)throw new Error("Please select an audio file to transcribe");const[yt,He]=Me.split(","),dt=yt?.split(":")[1]?.split(";")[0]||"audio/mpeg",ht=dt.split("/")[1]||"mp3",it=atob(He||""),nt=new Uint8Array(it.length);for(let qn=0;qn<it.length;qn++)nt[qn]=it.charCodeAt(qn);const Lt=new Blob([nt],{type:dt}),Nn=new FormData;Nn.append("file",Lt,`audio.${ht}`),Nn.append("model",_e);const Tt=l(he,"/v1/audio/transcriptions"),Un=await fetch(Tt,{method:"POST",body:Nn});if(!Un.ok){const qn=await Un.text();throw new Error(qn||`HTTP ${Un.status}`)}Oe={result:{type:"transcription",text:(await Un.json()).text||""},duration:Math.round(performance.now()-Se)}}else if(L.openai?.embeddings){const yt=(L.openai?.embeddings?.input??[]).filter(nt=>nt.text.trim()).map(nt=>nt.text);if(yt.length===0)throw new Error("Please enter at least one text to convert to embeddings");const He=l(he,"/v1/embeddings"),dt=await fetch(He,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({model:_e,input:yt})});if(!dt.ok){const nt=await dt.text();throw new Error(nt||`HTTP ${dt.status}`)}Oe={result:{type:"embeddings",embeddings:((await dt.json()).data||[]).map(nt=>nt.embedding)},duration:Math.round(performance.now()-Se)}}else throw new Error("Invalid OpenAI request type");const st=Date.now(),ut={...L,executionTime:st,openai:{...L.openai,response:Oe}};r.find(Me=>Me.id===L.id)?Ft.update(L.id,Me=>{Object.assign(Me,ut)}):Ft.insert(ut),n(Me=>({...Me,request:ut,isExecuting:!1}));return}const P={};(L.http?.headers??[]).filter(he=>he.enabled&&he.key).forEach(he=>{P[he.key]=he.value});const pe=new URLSearchParams,xe=L.http?.method??"GET";(L.http?.query??[]).filter(he=>he.enabled&&he.key).forEach(he=>{pe.append(he.key,he.value)});const ve=L.http?.body??{type:"none"};let Te,je="",at=!1;switch(ve.type){case"json":{Te=Rf(ve.content,L.variables),je=ve.content,P["Content-Type"]||(P["Content-Type"]="application/json");break}case"form-urlencoded":{const he=new URLSearchParams;ve.data.filter(_e=>_e.enabled&&_e.key).forEach(_e=>{he.append(_e.key,_e.value)}),Te=he.toString(),je=he.toString(),P["Content-Type"]||(P["Content-Type"]="application/x-www-form-urlencoded");break}case"form-data":{const he=new FormData,_e=[];ve.data.filter(ue=>ue.enabled&&ue.key).forEach(ue=>{ue.type==="file"&&ue.file?(he.append(ue.key,ue.file,ue.fileName),_e.push(`${ue.key}: [File: ${ue.fileName}]`)):ue.type==="text"&&(he.append(ue.key,ue.value),_e.push(`${ue.key}: ${ue.value}`))}),Te=he,je=_e.join(`
`),at=!0;break}case"binary":{ve.file&&(Te=ve.file,je=`[Binary file: ${ve.fileName}]`,P["Content-Type"]||(P["Content-Type"]=ve.file.type||"application/octet-stream"));break}case"raw":Te=ve.content,je=ve.content,P["Content-Type"]||(P["Content-Type"]="text/plain");break}const Ct=L.http?.request?.options??{insecure:!1,redirect:!0};Ct.insecure&&(P["X-Prism-Insecure"]="true"),Ct.redirect&&(P["X-Prism-Redirect"]="true");const Nt=new URL(L.url);let Zt="/proxy/"+Nt.protocol.slice(0,-1)+"/"+Nt.host+Nt.pathname;const an=pe.toString();an&&(Zt+="?"+an);const rr={method:xe,url:L.url,headers:P,query:Object.fromEntries(pe),body:je,options:Ct},In={...P};at&&delete In["Content-Type"];const $n=performance.now(),on=await fetch(Zt,{method:xe,headers:In,body:Te&&xe!=="GET"&&xe!=="HEAD"?Te:void 0}),we=Math.round(performance.now()-$n),Qe=await on.blob(),et={};on.headers.forEach((he,_e)=>{et[_e]=he});const Re={status:on.statusText||String(on.status),statusCode:on.status,headers:et,body:Qe,duration:we},kt=Date.now(),se={...L,executionTime:kt,http:{...L.http,request:rr,response:Re}};r.find(he=>he.id===L.id)?Ft.update(L.id,he=>{Object.assign(he,se)}):Ft.insert(se),n(he=>({...he,request:se,isExecuting:!1}))}catch(P){const pe=Date.now(),xe=P instanceof Error?P.message:"Unknown error";if(L.protocol==="grpc"){const ve={...L,executionTime:pe,grpc:{...L.grpc,response:{body:"",duration:0,error:xe}}};r.find(je=>je.id===L.id)?Ft.update(L.id,je=>{Object.assign(je,ve)}):Ft.insert(ve),n(je=>({...je,request:ve,isExecuting:!1}))}else if(L.protocol==="mcp"){const ve={...L,executionTime:pe,mcp:{headers:L.mcp?.headers??[],tool:L.mcp?.tool,resource:L.mcp?.resource,response:{result:void 0,duration:0,error:xe}}};r.find(je=>je.id===L.id)?Ft.update(L.id,je=>{Object.assign(je,ve)}):Ft.insert(ve),n(je=>({...je,request:ve,isExecuting:!1}))}else if(L.protocol==="openai"){const Te=!!L.openai?.chat?{result:{type:"text",text:""},duration:0,error:xe}:{result:{type:"image",image:""},duration:0,error:xe},je={...L,executionTime:pe,openai:{...L.openai,response:Te}};r.find(Ct=>Ct.id===L.id)?Ft.update(L.id,Ct=>{Object.assign(Ct,je)}):Ft.insert(je),n(Ct=>({...Ct,request:je,isExecuting:!1}))}else{const ve={status:"",statusCode:0,headers:{},body:new Blob,duration:0,error:xe},Te={...L,executionTime:pe,http:{...L.http,response:ve}};r.find(at=>at.id===L.id)?Ft.update(L.id,at=>{Object.assign(at,Te)}):Ft.insert(Te),n(at=>({...at,request:Te,isExecuting:!1}))}}},[e.request,r,a,l]),ie=Z.useCallback(L=>{const P=sf(L.name,L.protocol??"rest");P.id=L.id,P.url=L.url,P.executionTime=L.executionTime,P.variables=L.variables??[],L.http&&(P.http={method:L.http.method,headers:[...L.http.headers],query:[...L.http.query],body:L.http.body,request:L.http.request,response:L.http.response},L.http.body.type==="form-data"?P.http.body={type:"form-data",data:L.http.body.data.map(pe=>({...pe,file:null}))}:L.http.body.type==="binary"&&(P.http.body={type:"binary",file:null,fileName:L.http.body.fileName})),L.grpc&&(P.grpc={...L.grpc}),L.mcp&&(P.mcp={...L.mcp}),L.openai&&(P.openai={...L.openai}),n(pe=>({...pe,request:P}))},[]),re=Z.useCallback(async()=>{await z3()},[]),I=Z.useCallback(async L=>{Ft.delete(L)},[]),j=Z.useCallback(()=>{n(L=>({...L,sidebarCollapsed:!L.sidebarCollapsed}))},[]),G=Z.useCallback(()=>{n(L=>({...L,aiPanelOpen:!L.aiPanelOpen}))},[]),O=Z.useCallback(()=>{n(L=>({...L,request:sf()}))},[]),le={request:e.request,isExecuting:e.isExecuting,history:r,sidebarCollapsed:e.sidebarCollapsed,aiPanelOpen:e.aiPanelOpen,setProtocol:u,setMethod:f,setUrl:d,setHeaders:m,setQuery:p,setBody:y,setVariables:g,setOptions:v,executeRequest:K,clearResponse:B,newRequest:O,setGrpcBody:w,setGrpcMetadata:E,setGrpcMethodSchema:k,setMcpTool:C,setMcpResource:T,setMcpHeaders:D,discoverMcpFeatures:F,setOpenAIModel:N,setOpenAIModels:R,setOpenAIBodyType:$,setOpenAIChatInput:q,setOpenAIImagePrompt:H,setOpenAIImageFiles:M,setOpenAIAudioText:Q,setOpenAIAudioVoice:ne,setOpenAITranscriptionFile:ye,setOpenAIEmbeddingsInput:X,loadFromHistory:ie,clearHistory:re,deleteHistoryEntry:I,toggleSidebar:j,toggleAiPanel:G};return x.jsx(Bk.Provider,{value:le,children:t})}var $3=uk();const $k=Z.createContext(null);function U3(t){const e=$e.c(6),{children:n}=t,[r,s]=Z.useState(null);let a;e[0]===Symbol.for("react.memo_cache_sentinel")?(a=d=>{s(d)},e[0]=a):a=e[0];const l=a;let u;e[1]!==r?(u={portalTarget:r,setPortalTarget:l},e[1]=r,e[2]=u):u=e[2];let f;return e[3]!==n||e[4]!==u?(f=x.jsx($k.Provider,{value:u,children:n}),e[3]=n,e[4]=u,e[5]=f):f=e[5],f}function Uk(){const t=Z.useContext($k);if(!t)throw new Error("useRequestBarPortal must be used within RequestBarPortalProvider");return t}function q3(t){const e=$e.c(3),{children:n}=t,{portalTarget:r}=Uk();if(!r)return null;let s;return e[0]!==n||e[1]!==r?(s=$3.createPortal(n,r),e[0]=n,e[1]=r,e[2]=s):s=e[2],s}function tn(){const t=Z.useContext(Bk);if(!t)throw new Error("useClient must be used within a ClientProvider");return t}const F3=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),V3=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),H1=t=>{const e=V3(t);return e.charAt(0).toUpperCase()+e.slice(1)},qk=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),H3=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var G3={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const K3=Z.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:a,iconNode:l,...u},f)=>Z.createElement("svg",{ref:f,...G3,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:qk("lucide",s),...!a&&!H3(u)&&{"aria-hidden":"true"},...u},[...l.map(([d,m])=>Z.createElement(d,m)),...Array.isArray(a)?a:[a]]));const Je=(t,e)=>{const n=Z.forwardRef(({className:r,...s},a)=>Z.createElement(K3,{ref:a,iconNode:e,className:qk(`lucide-${F3(H1(t))}`,`lucide-${t}`,r),...s}));return n.displayName=H1(t),n};const Z3=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],J3=Je("box",Z3);const Q3=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Fk=Je("check",Q3);const Y3=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],li=Je("chevron-down",Y3);const W3=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],hd=Je("chevron-right",W3);const X3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Vk=Je("circle-alert",X3);const eD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],$y=Je("circle-check",eD);const tD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],nD=Je("circle-x",tD);const rD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Hk=Je("circle",rD);const sD=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Ll=Je("clock",sD);const iD=[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]],aD=Je("cpu",iD);const oD=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Gk=Je("eye",oD);const lD=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],fo=Je("file-text",lD);const cD=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}]],Of=Je("file",cD);const uD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],fD=Je("globe",uD);const dD=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],Kk=Je("hash",dD);const hD=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],pD=Je("image",hD);const mD=[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]],Ag=Je("link-2",mD);const gD=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],If=Je("loader-circle",gD);const yD=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],bD=Je("music",yD);const _D=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}],["path",{d:"m8 9 3 3-3 3",key:"12hl5m"}]],vD=Je("panel-right-close",_D);const xD=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}],["path",{d:"m10 15-3-3 3-3",key:"1pgupc"}]],wD=Je("panel-right-open",xD);const SD=[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]],G1=Je("paperclip",SD);const kD=[["path",{d:"M12 22v-5",key:"1ega77"}],["path",{d:"M15 8V2",key:"18g5xt"}],["path",{d:"M17 8a1 1 0 0 1 1 1v4a4 4 0 0 1-4 4h-4a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1z",key:"1xoxul"}],["path",{d:"M9 8V2",key:"14iosj"}]],ED=Je("plug",kD);const CD=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Nf=Je("refresh-cw",CD);const TD=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],AD=Je("search",TD);const RD=[["path",{d:"M3.714 3.048a.498.498 0 0 0-.683.627l2.843 7.627a2 2 0 0 1 0 1.396l-2.842 7.627a.498.498 0 0 0 .682.627l18-8.5a.5.5 0 0 0 0-.904z",key:"117uat"}],["path",{d:"M6 12h16",key:"s4cdu5"}]],OD=Je("send-horizontal",RD);const ID=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],ND=Je("send",ID);const MD=[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]],DD=Je("server",MD);const jD=[["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 18h1.973a4 4 0 0 0 3.3-1.7l5.454-8.6a4 4 0 0 1 3.3-1.7H22",key:"1ailkh"}],["path",{d:"M2 6h1.972a4 4 0 0 1 3.6 2.2",key:"km57vx"}],["path",{d:"M22 18h-6.041a4 4 0 0 1-3.3-1.8l-.359-.45",key:"os18l9"}]],Zk=Je("shuffle",jD);const LD=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],io=Je("sparkles",LD);const zD=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],PD=Je("square",zD);const BD=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Zi=Je("trash-2",BD);const $D=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],UD=Je("type",$D);const qD=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Uy=Je("upload",qD);const FD=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],Mf=Je("wrench",FD);const VD=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],pd=Je("x",VD);const HD=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],GD=Je("zap",HD),KD={GET:"text-green-600 dark:text-green-400",POST:"text-yellow-600 dark:text-yellow-400",PUT:"text-blue-600 dark:text-blue-400",PATCH:"text-purple-600 dark:text-purple-400",DELETE:"text-red-600 dark:text-red-400",OPTIONS:"text-neutral-500 dark:text-neutral-400",HEAD:"text-neutral-500 dark:text-neutral-400"};function ZD(t){try{return new URL(t.url).hostname}catch{return"Other"}}function JD(t){if(t.protocol==="mcp")return t.mcp?.tool?.name?t.mcp.tool.name:t.mcp?.resource?.uri?t.mcp.resource.uri:"MCP Request";if(t.protocol==="openai")return t.openai?.model||"No model";if(t.protocol==="grpc"){try{const n=new URL(t.url).pathname.split("/").filter(Boolean);if(n.length>0)return n[n.length-1]}catch{}return t.url}try{const e=new URL(t.url);return e.pathname+e.search}catch{return t.url}}function QD(t){return t.protocol==="grpc"?"gRPC":t.protocol==="mcp"?"MCP":t.protocol==="openai"?"OpenAI":t.http?.method??"GET"}function YD(t){return t.protocol==="grpc"?"text-cyan-600 dark:text-cyan-400":t.protocol==="mcp"?"text-violet-600 dark:text-violet-400":t.protocol==="openai"?"text-purple-600 dark:text-purple-400":KD[t.http?.method??"GET"]}function WD(t){const e=new Map;for(const n of t){const r=ZD(n),s=e.get(r)||[];s.push(n),e.set(r,s)}return Array.from(e.entries()).map(([n,r])=>({hostname:n,entries:r,latestTimestamp:Math.max(...r.map(s=>s.executionTime??0))})).sort((n,r)=>r.latestTimestamp-n.latestTimestamp)}function XD(){const t=$e.c(20),{history:e,sidebarCollapsed:n,loadFromHistory:r,deleteHistoryEntry:s,clearHistory:a,toggleSidebar:l}=tn();let u;t[0]!==e?(u=WD(e),t[0]=e,t[1]=u):u=t[1];const f=u;if(e.length===0||n)return null;let d;t[2]===Symbol.for("react.memo_cache_sentinel")?(d=x.jsx("h1",{className:"text-sm font-semibold text-neutral-700 dark:text-neutral-200 pl-0.5",children:"Prism"}),t[2]=d):d=t[2];let m;t[3]!==a||t[4]!==e.length?(m=e.length>0&&x.jsx("button",{onClick:a,className:"p-1.5 rounded-lg hover:bg-neutral-100 dark:hover:bg-white/5 transition-colors",title:"Clear history",children:x.jsx(Zi,{className:"w-4 h-4 text-neutral-500 dark:text-neutral-400"})}),t[3]=a,t[4]=e.length,t[5]=m):m=t[5];let p;t[6]===Symbol.for("react.memo_cache_sentinel")?(p=x.jsx(wD,{className:"w-4 h-4 text-neutral-500 dark:text-neutral-400"}),t[6]=p):p=t[6];let y;t[7]!==l?(y=x.jsx("button",{onClick:l,className:"p-1.5 rounded-lg hover:bg-neutral-100 dark:hover:bg-white/5 transition-colors",title:"Hide sidebar",children:p}),t[7]=l,t[8]=y):y=t[8];let g;t[9]!==m||t[10]!==y?(g=x.jsxs("div",{className:"px-3 py-2.5 flex items-center justify-between gap-2",children:[d,x.jsxs("div",{className:"flex items-center gap-1",children:[m,y]})]}),t[9]=m,t[10]=y,t[11]=g):g=t[11];let v;t[12]!==s||t[13]!==f||t[14]!==e.length||t[15]!==r?(v=x.jsx("div",{className:"flex-1 overflow-y-auto px-2",children:e.length===0?x.jsx("div",{className:"px-2 py-8 text-center text-neutral-400 dark:text-neutral-600 text-xs",children:"No history yet"}):x.jsx("div",{className:"space-y-3 pb-2",children:f.map(E=>x.jsxs("div",{children:[x.jsx("div",{className:"px-2 py-1 text-[10px] font-medium text-neutral-400 dark:text-neutral-500 uppercase tracking-wider truncate",title:E.hostname,children:E.hostname}),x.jsx("div",{className:"space-y-0.5",children:E.entries.map(k=>x.jsxs("div",{className:"group flex items-center gap-2 px-3 py-1.5 rounded-lg hover:bg-neutral-100 dark:hover:bg-white/5 cursor-pointer transition-colors",onClick:()=>r(k),children:[x.jsx("span",{className:`text-[10px] font-semibold shrink-0 ${YD(k)}`,children:QD(k)}),x.jsx("span",{className:"text-xs text-neutral-500 dark:text-neutral-400 truncate flex-1",title:k.url,children:JD(k)}),x.jsx("button",{onClick:C=>{C.stopPropagation(),s(k.id)},className:"opacity-0 group-hover:opacity-100 inline-flex items-center justify-center w-5 h-5 hover:bg-neutral-200 dark:hover:bg-white/8 rounded transition-all shrink-0",title:"Delete",children:x.jsx("svg",{className:"w-3 h-3 text-neutral-400 dark:text-neutral-500 hover:text-rose-500 dark:hover:text-rose-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},k.id))})]},E.hostname))})}),t[12]=s,t[13]=f,t[14]=e.length,t[15]=r,t[16]=v):v=t[16];let w;return t[17]!==g||t[18]!==v?(w=x.jsxs("aside",{className:"w-64 bg-white dark:bg-[#1a1a1a]/60 dark:backdrop-blur-xl border border-neutral-200 dark:border-white/8 rounded-xl flex flex-col overflow-hidden dark:shadow-2xl",children:[g,v]}),t[17]=g,t[18]=v,t[19]=w):w=t[19],w}const bm=[{value:"rest",label:"HTTP",icon:fD},{value:"grpc",label:"gRPC",icon:DD},{value:"mcp",label:"MCP",icon:ED},{value:"openai",label:"OpenAI",icon:io}];function ej(){const t=$e.c(23),{request:e,setProtocol:n}=tn(),r=e?.protocol??"rest",[s,a]=Z.useState(!1),l=Z.useRef(null);let u;t[0]!==r?(u=bm.find(T=>T.value===r)??bm[0],t[0]=r,t[1]=u):u=t[1];const f=u,d=f.icon;let m,p;t[2]===Symbol.for("react.memo_cache_sentinel")?(m=()=>{const T=D=>{l.current&&!l.current.contains(D.target)&&a(!1)};return document.addEventListener("mousedown",T),()=>document.removeEventListener("mousedown",T)},p=[],t[2]=m,t[3]=p):(m=t[2],p=t[3]),Z.useEffect(m,p);let y;t[4]!==s?(y=()=>a(!s),t[4]=s,t[5]=y):y=t[5];let g;t[6]!==d?(g=x.jsx(d,{className:"w-4 h-4"}),t[6]=d,t[7]=g):g=t[7];let v;t[8]!==f.label?(v=x.jsx("span",{className:"text-xs font-medium",children:f.label}),t[8]=f.label,t[9]=v):v=t[9];let w;t[10]===Symbol.for("react.memo_cache_sentinel")?(w=x.jsx(li,{className:"w-3 h-3"}),t[10]=w):w=t[10];let E;t[11]!==f.label||t[12]!==y||t[13]!==g||t[14]!==v?(E=x.jsxs("button",{type:"button",onClick:y,className:"flex items-center gap-1 px-2 py-1.5 rounded-md hover:bg-neutral-100 dark:hover:bg-white/10 transition-colors text-neutral-600 dark:text-neutral-400",title:f.label,children:[g,v,w]}),t[11]=f.label,t[12]=y,t[13]=g,t[14]=v,t[15]=E):E=t[15];let k;t[16]!==s||t[17]!==r||t[18]!==n?(k=s&&x.jsx("div",{className:"absolute top-full left-0 mt-1 bg-white dark:bg-[#1a1a1a] border border-neutral-200 dark:border-white/10 rounded-md shadow-lg z-50 min-w-28",children:bm.map(T=>{const D=T.icon;return x.jsxs("button",{type:"button",onClick:()=>{n(T.value),a(!1)},className:`w-full flex items-center gap-2 px-3 py-1.5 text-sm transition-colors ${r===T.value?"bg-neutral-100 dark:bg-white/10 text-neutral-900 dark:text-neutral-100":"text-neutral-600 dark:text-neutral-400 hover:bg-neutral-50 dark:hover:bg-white/5"}`,children:[x.jsx(D,{className:"w-4 h-4"}),T.label]},T.value)})}),t[16]=s,t[17]=r,t[18]=n,t[19]=k):k=t[19];let C;return t[20]!==E||t[21]!==k?(C=x.jsxs("div",{ref:l,className:"relative",children:[E,k]}),t[20]=E,t[21]=k,t[22]=C):C=t[22],C}let wl={};async function tj(){try{const t=await fetch("/config.json");if(t.ok){const e=await t.json();wl={...wl,...e}}else console.warn("Failed to load config.json, using defaults");return wl}catch(t){return console.warn("Error loading config:",t),wl}}function qy(){return wl}function nj(){const t=$e.c(31),{request:e,isExecuting:n,executeRequest:r,aiPanelOpen:s,toggleAiPanel:a}=tn();let l;t[0]===Symbol.for("react.memo_cache_sentinel")?(l=qy().ai?.model,t[0]=l):l=t[0];const u=!!l,f=n,d=e?.protocol??"rest",m=e?.url??"",p=ij;let y;t[1]!==m?(y=p(m),t[1]=m,t[2]=y):y=t[2];const{host:g,service:v,method:w}=y,E=!!e?.mcp?.tool||!!e?.mcp?.resource,k=e?.openai?.model??"";let C;t[3]!==e?.openai?.chat?.input?(C=e?.openai?.chat?.input??[],t[3]=e?.openai?.chat?.input,t[4]=C):C=t[4];const T=C,N=e?.openai?.image?.prompt??"",R=e?.openai?.audio?.text??"",$=e?.openai?.transcription?.file??"";let q;t[5]!==e?.openai?.embeddings?.input?(q=e?.openai?.embeddings?.input??[],t[5]=e?.openai?.embeddings?.input,t[6]=q):q=t[6];const H=q;let M;t[7]!==R||t[8]!==T||t[9]!==H||t[10]!==N||t[11]!==$||t[12]!==e?.openai?.chat||t[13]!==e?.openai?.embeddings||t[14]!==e?.openai?.image||t[15]!==e?.openai?.transcription?(M=e?.openai?.chat?T.length>0&&T.some(sj):e?.openai?.image?N.trim().length>0:e?.openai?.transcription?$.length>0:e?.openai?.embeddings?H.some(rj):R.trim().length>0,t[7]=R,t[8]=T,t[9]=H,t[10]=N,t[11]=$,t[12]=e?.openai?.chat,t[13]=e?.openai?.embeddings,t[14]=e?.openai?.image,t[15]=e?.openai?.transcription,t[16]=M):M=t[16];const Q=M,ne=d==="rest"?m.length>0:d==="mcp"?m.length>0&&E:d==="openai"?m.length>0&&k.length>0&&Q:g.length>0&&v.length>0&&w.length>0;let ye;t[17]!==r?(ye=()=>{r()},t[17]=r,t[18]=ye):ye=t[18];const X=ye,F=f||!ne;let B;t[19]!==f?(B=f?x.jsxs("svg",{className:"w-4 h-4 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[x.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"3"}),x.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):x.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14 5l7 7m0 0l-7 7m7-7H3"})}),t[19]=f,t[20]=B):B=t[20];let K;t[21]!==X||t[22]!==F||t[23]!==B?(K=x.jsx("button",{type:"button",onClick:X,disabled:F,className:"p-1.5 hover:bg-neutral-100 dark:hover:bg-white/10 disabled:opacity-30 disabled:cursor-not-allowed rounded-md transition-colors text-neutral-500 dark:text-neutral-400 hover:text-neutral-700 dark:hover:text-neutral-200",title:"Send request",children:B}),t[21]=X,t[22]=F,t[23]=B,t[24]=K):K=t[24];let ie;t[25]!==s||t[26]!==a?(ie=u&&x.jsx("button",{type:"button",onClick:a,className:`p-1.5 hover:bg-neutral-100 dark:hover:bg-white/10 rounded-md transition-colors ${s?"text-amber-500 hover:text-amber-600":"text-neutral-500 dark:text-neutral-400 hover:text-neutral-700 dark:hover:text-neutral-200"}`,title:"AI Assistant",children:x.jsx(io,{className:"w-4 h-4"})}),t[25]=s,t[26]=a,t[27]=ie):ie=t[27];let re;return t[28]!==K||t[29]!==ie?(re=x.jsxs(q3,{children:[K,ie]}),t[28]=K,t[29]=ie,t[30]=re):re=t[30],re}function rj(t){return t.text.trim().length>0}function sj(t){return t.content.length>0}function ij(t){const e=t.match(/^grpc:\/\/([^/]*)(?:\/([^/]*)(?:\/([^/]*))?)?$/);return e?{host:e[1]||"",service:e[2]||"",method:e[3]||""}:{host:"",service:"",method:""}}const aj=["GET","POST","PUT","PATCH","DELETE","OPTIONS","HEAD"],oj={GET:"text-emerald-600 dark:text-emerald-400",POST:"text-amber-600 dark:text-amber-400",PUT:"text-blue-600 dark:text-blue-400",PATCH:"text-purple-600 dark:text-purple-400",DELETE:"text-rose-600 dark:text-rose-400",OPTIONS:"text-neutral-500 dark:text-neutral-400",HEAD:"text-neutral-500 dark:text-neutral-400"};function lj(){const t=$e.c(15),{request:e,setUrl:n,setMethod:r}=tn(),s=e?.http?.method??"GET",a=e?.url??"";let l;t[0]!==r?(l=g=>r(g.target.value),t[0]=r,t[1]=l):l=t[1];const u=`px-2 py-1 bg-transparent font-semibold text-xs focus:outline-none cursor-pointer ${oj[s]}`;let f;t[2]===Symbol.for("react.memo_cache_sentinel")?(f=aj.map(cj),t[2]=f):f=t[2];let d;t[3]!==s||t[4]!==l||t[5]!==u?(d=x.jsx("select",{value:s,onChange:l,className:u,children:f}),t[3]=s,t[4]=l,t[5]=u,t[6]=d):d=t[6];let m;t[7]!==n?(m=g=>n(g.target.value),t[7]=n,t[8]=m):m=t[8];let p;t[9]!==m||t[10]!==a?(p=x.jsx("input",{type:"text",value:a,onChange:m,placeholder:"Enter request URL",className:"flex-1 px-3 py-1.5 bg-transparent text-neutral-800 dark:text-neutral-100 text-sm placeholder-neutral-400 dark:placeholder-neutral-600 focus:outline-none"}),t[9]=m,t[10]=a,t[11]=p):p=t[11];let y;return t[12]!==d||t[13]!==p?(y=x.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[d,p]}),t[12]=d,t[13]=p,t[14]=y):y=t[14],y}function cj(t){return x.jsx("option",{value:t,className:"bg-white dark:bg-[#1a1a1a]",children:t},t)}function K1(t){const e=[],n=/\{\{(\w+):([^{}]+)\}\}/g;let r;for(;(r=n.exec(t))!==null;)e.push({start:r.index,end:r.index+r[0].length,type:r[1],id:r[2],full:r[0]});return e}function af(t){if(t.nodeType===Node.TEXT_NODE)return(t.textContent||"").replace(/\u200B/g,"");if(t.classList?.contains("variable-chip"))return t.dataset.marker||"";if(t.tagName==="BR")return`
`;let e="";const n=t.tagName==="DIV"||t.tagName==="P";for(const r of t.childNodes)e+=af(r);return n&&e&&!e.endsWith(`
`)&&(e+=`
`),e}function Jk(t,e){if(e.rangeCount===0)return"";const n=e.getRangeAt(0),r=n.startContainer,s=n.startOffset;let a="",l=!1;function u(f){if(!l){if(f===r)if(f.nodeType===Node.TEXT_NODE){a+=(f.textContent||"").slice(0,s).replace(/\u200B/g,""),l=!0;return}else{const d=f.childNodes;for(let m=0;m<s;m++)if(u(d[m]),l)return;l=!0;return}if(f.nodeType===Node.TEXT_NODE)a+=(f.textContent||"").replace(/\u200B/g,"");else if(f.nodeType===Node.ELEMENT_NODE){const d=f;if(d.classList.contains("variable-chip")){if(d.contains(r)){l=!0;return}a+=d.dataset.marker||""}else if(d.tagName==="BR")a+=`
`;else if(d.tagName==="DIV"||d.tagName==="P"){for(const m of Array.from(d.childNodes))if(u(m),l)return;a&&!a.endsWith(`
`)&&(a+=`
`)}else for(const m of Array.from(d.childNodes))if(u(m),l)return}}}return u(t),a}function uj(t){const e=window.getSelection();return!e||e.rangeCount===0||!t.contains(e.anchorNode)?null:Jk(t,e).length}function fj(t,e){let n=0,r=!1;function s(a){if(!r){if(a.nodeType===Node.TEXT_NODE){const l=a.textContent||"",f=l.replace(/\u200B/g,"").length;if(n+f>=e){const d=e-n;let m=0,p=0;for(;p<d&&m<l.length;)l[m]!==""&&p++,m++;const y=document.createRange();y.setStart(a,m),y.setEnd(a,m);const g=window.getSelection();g?.removeAllRanges(),g?.addRange(y),r=!0;return}n+=f}else if(a.nodeType===Node.ELEMENT_NODE){const l=a;if(l.classList.contains("variable-chip")){const u=(l.dataset.marker||"").length;n+=u}else if(l.tagName==="BR")n+=1;else{const u=l.tagName==="DIV"||l.tagName==="P";for(const f of Array.from(a.childNodes))if(s(f),r)return;u&&n<e&&(n+=1)}}}}s(t)}function dj(t,e,n){switch(t){case"file_base64":case"file_dataurl":return n?.data?n.name||"file":"Select file...";case"base64":if(n?.data){const r=n.data;return r.length>12?r.slice(0,12)+"":r}return"Enter text...";default:return n?.name||t}}function hj(t){const e="w-3 h-3";switch(t){case"file_base64":case"file_dataurl":return`<svg class="${e}" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/></svg>`;case"base64":return`<svg class="${e}" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="4" y1="9" x2="20" y2="9"/><line x1="4" y1="15" x2="20" y2="15"/><line x1="10" y1="3" x2="8" y2="21"/><line x1="16" y1="3" x2="14" y2="21"/></svg>`;case"timestamp":return`<svg class="${e}" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>`;case"uuid":return`<svg class="${e}" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"/><path d="M5 3v4"/><path d="M9 5H1"/></svg>`;case"random_string":return`<svg class="${e}" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M2 18h1.4c1.3 0 2.5-.6 3.3-1.7l14.2-12.6c.8-1.1 2-1.7 3.3-1.7H22"/><path d="M2 6h1.4c1.3 0 2.5.6 3.3 1.7l14.2 12.6c.8 1.1 2 1.7 3.3 1.7H22"/></svg>`;default:return""}}function Z1(t,e,n,r){const s=r.find(m=>m.type===t&&m.id===e),a=t==="file_base64"||t==="file_dataurl"||t==="base64",l=s&&s.data,u=document.createElement("span");u.contentEditable="false",u.className=`variable-chip inline-flex items-center gap-1 px-1.5 py-0.5 mx-0.5 rounded text-xs font-medium align-baseline select-none ${a&&!l?"bg-amber-500/20 text-amber-300 border border-amber-500/30":"bg-blue-500/20 text-blue-300 border border-blue-500/30"} ${a?"cursor-pointer hover:bg-blue-500/30":""}`,u.dataset.marker=n,u.dataset.variableType=t,u.dataset.variableId=e;const f=document.createElement("span");f.className="chip-icon",f.innerHTML=hj(t),u.appendChild(f);const d=document.createElement("span");return d.className="chip-label",d.textContent=dj(t,e,s),u.appendChild(d),u}function Qk(t){const e=$e.c(40),{editorRef:n,value:r,onChange:s,variables:a,onVariablesChange:l,indentTriggers:u}=t;let f;e[0]!==u?(f=u===void 0?["{","["]:u,e[0]=u,e[1]=f):f=e[1];const d=f,m=Z.useRef(""),p=Z.useRef(!1),y=Z.useRef(!1);let g;e[2]!==s||e[3]!==l||e[4]!==a?(g=re=>{const I=af(re);m.current=I,p.current=!0,s(I);const j=new Set(K1(I).map(gj)),G=a.filter(O=>j.has(O.id));G.length!==a.length&&(y.current=!0,l(G))},e[2]=s,e[3]=l,e[4]=a,e[5]=g):g=e[5];const v=g,[w,E]=Z.useState(!1);let k;e[6]===Symbol.for("react.memo_cache_sentinel")?(k={top:0,left:0},e[6]=k):k=e[6];const[C,T]=Z.useState(k),D=mj;let N;e[7]!==n||e[8]!==r||e[9]!==a?(N=()=>{const re=n.current;if(!re)return;const I=uj(re),j=K1(r);re.innerHTML="";let G=0;for(const le of j){const L=r.slice(G,le.start);L&&D(re,L);const P=Z1(le.type,le.id,le.full,a);re.appendChild(P),re.appendChild(document.createTextNode("")),G=le.end}const O=r.slice(G);O&&D(re,O),re.childNodes.length===0&&re.appendChild(document.createElement("br")),m.current=r,I!==null&&fj(re,I)},e[7]=n,e[8]=r,e[9]=a,e[10]=N):N=e[10];const R=N;let $,q;e[11]!==R||e[12]!==r?($=()=>{!p.current&&r!==m.current&&R(),p.current=!1},q=[r,R],e[11]=R,e[12]=r,e[13]=$,e[14]=q):($=e[13],q=e[14]),Z.useEffect($,q);let H;e[15]!==R?(H=()=>{y.current?y.current=!1:R()},e[15]=R,e[16]=H):H=e[16];let M;e[17]!==R||e[18]!==a?(M=[a,R],e[17]=R,e[18]=a,e[19]=M):M=e[19],Z.useEffect(H,M);let Q;e[20]!==n||e[21]!==v?(Q=()=>{const re=n.current;if(!re)return;const I=af(re),j=window.getSelection();if(j&&j.rangeCount>0){const G=j.getRangeAt(0);if(G.startContainer.nodeType===Node.TEXT_NODE){const O=G.startContainer.textContent||"",le=G.startOffset;if(le>=2&&O.slice(le-2,le)==="{{"){const L=G.getBoundingClientRect();T({top:L.bottom+4,left:L.left}),E(!0)}else E(!1)}}I!==m.current&&v(re)},e[20]=n,e[21]=v,e[22]=Q):Q=e[22];const ne=Q,ye=pj;let X;e[23]!==n||e[24]!==d||e[25]!==w||e[26]!==v?(X=re=>{if(w){re.key==="Escape"&&(E(!1),re.preventDefault());return}if(re.key==="Backspace"){const I=window.getSelection();if(I&&I.rangeCount>0&&I.isCollapsed){const j=I.getRangeAt(0),G=j.startContainer,O=j.startOffset;if(G.nodeType===Node.TEXT_NODE&&O===1&&G.textContent?.charAt(0)===""){const le=G.previousSibling;if(le&&le.classList?.contains("variable-chip")){re.preventDefault();const L=le,P=L.parentNode;P?.removeChild(L),P?.removeChild(G);const pe=n.current;pe&&v(pe);return}}if(O===0){let le=G.previousSibling;if(le?.nodeType===Node.TEXT_NODE&&le.textContent===""&&(le=le.previousSibling),le&&le.classList?.contains("variable-chip")){re.preventDefault();const L=le,P=L.nextSibling,pe=L.parentNode;pe?.removeChild(L),P?.nodeType===Node.TEXT_NODE&&P.textContent===""&&pe?.removeChild(P);const xe=n.current;xe&&v(xe);return}}}}if(re.key==="Tab"&&(re.preventDefault(),document.execCommand("insertText",!1,"  ")),re.key==="Enter"){re.preventDefault();const I=n.current,j=window.getSelection();let G="";if(I&&j&&j.rangeCount>0){const L=Jk(I,j),P=L.lastIndexOf(`
`),pe=L.slice(P+1),xe=pe.match(/^(\s*)/);G=xe?xe[1]:"";const Te=pe.trimEnd().slice(-1);d.includes(Te)&&(G=G+"  ")}const O=document.createElement("br"),le=j?.getRangeAt(0);le&&(le.deleteContents(),le.insertNode(O),le.setStartAfter(O),le.setEndAfter(O),j?.removeAllRanges(),j?.addRange(le),G&&document.execCommand("insertText",!1,G))}},e[23]=n,e[24]=d,e[25]=w,e[26]=v,e[27]=X):X=e[27];const F=X;let B;e[28]!==n||e[29]!==s||e[30]!==l||e[31]!==a?(B=re=>{E(!1);const I=n.current;if(!I)return;const j=window.getSelection();if(!j||j.rangeCount===0)return;const G=j.getRangeAt(0);if(G.startContainer.nodeType!==Node.TEXT_NODE)return;const O=G.startContainer,le=G.startOffset,L=O.textContent||"";O.textContent=L.slice(0,le-2)+L.slice(le);const P=Math.random().toString(36).substring(2,9),pe=re==="file_base64"||re==="file_dataurl"?"file":re,xe=`{{${re}:${P}}}`,ve=Z1(re,P,xe,a),Te=le-2;G.setStart(O,Te),G.setEnd(O,Te),G.insertNode(ve);const je=document.createTextNode("");ve.after(je),G.setStart(je,1),G.setEnd(je,1),j.removeAllRanges(),j.addRange(G),y.current=!0,l([...a,{id:P,type:re,name:pe}]);const at=af(I);return m.current=at,p.current=!0,s(at),P},e[28]=n,e[29]=s,e[30]=l,e[31]=a,e[32]=B):B=e[32];const K=B;let ie;return e[33]!==R||e[34]!==ne||e[35]!==F||e[36]!==K||e[37]!==w||e[38]!==C?(ie={handleInput:ne,handlePaste:ye,handleKeyDown:F,insertVariable:K,showTypeMenu:w,setShowTypeMenu:E,typeMenuPosition:C,buildDOM:R},e[33]=R,e[34]=ne,e[35]=F,e[36]=K,e[37]=w,e[38]=C,e[39]=ie):ie=e[39],ie}function pj(t){t.preventDefault();const e=t.clipboardData.getData("text/plain");document.execCommand("insertText",!1,e)}function mj(t,e){e.split(`
`).forEach((r,s)=>{s>0&&t.appendChild(document.createElement("br")),r&&t.appendChild(document.createTextNode(r))})}function gj(t){return t.id}const yj=[{type:"file_base64",label:"File (Base64)",description:"Select a file to encode",icon:x.jsx(Of,{className:"w-3.5 h-3.5"})},{type:"file_dataurl",label:"File (Data URL)",description:"File as data:... URL",icon:x.jsx(Of,{className:"w-3.5 h-3.5"})},{type:"base64",label:"Text (Base64)",description:"Text to encode",icon:x.jsx(Kk,{className:"w-3.5 h-3.5"})},{type:"timestamp",label:"Timestamp",description:"Unix timestamp",icon:x.jsx(Ll,{className:"w-3.5 h-3.5"})},{type:"uuid",label:"UUID",description:"Random UUID",icon:x.jsx(io,{className:"w-3.5 h-3.5"})},{type:"random_string",label:"Random String",description:"16-char random",icon:x.jsx(Zk,{className:"w-3.5 h-3.5"})}];function Fy({value:t,onChange:e,variables:n,onVariablesChange:r,placeholder:s,action:a}){const l=Z.useRef(null),u=Z.useRef(null),{handleInput:f,handlePaste:d,handleKeyDown:m,insertVariable:p,showTypeMenu:y,setShowTypeMenu:g,typeMenuPosition:v,buildDOM:w}=Qk({editorRef:l,value:t,onChange:e,variables:n,onVariablesChange:r,indentTriggers:["{","["]}),[E,k]=Z.useState(null),[C,T]=Z.useState(""),D=Z.useRef(!1),N=Z.useRef(null),R=Z.useMemo(()=>{if(!t.trim())return{valid:!0,empty:!0};try{let F=t;return F=F.replace(/"\{\{[^{}]+\}\}"/g,'"__var__"'),F=F.replace(/\{\{[^{}]+\}\}/g,"null"),JSON.parse(F),{valid:!0,empty:!1}}catch(F){return{valid:!1,empty:!1,error:F instanceof Error?F.message:"Invalid JSON"}}},[t]),[$,q]=Z.useState(!1),H=Z.useMemo(()=>Rf(t,n,{missingDataPlaceholder:"[no data]"}),[t,n]);Z.useEffect(()=>(N.current&&(clearTimeout(N.current),N.current=null),R.valid&&!R.empty&&D.current&&(N.current=setTimeout(()=>{try{let F=t;F=F.replace(/"\{\{[^{}]+\}\}"/g,'"__var__"'),F=F.replace(/\{\{[^{}]+\}\}/g,"null"),JSON.parse(F);const B=new Map;let K=t,ie=0;K=K.replace(/"\{\{[^{}]+\}\}"/g,j=>{const G=`"__VAR_${ie++}__"`;return B.set(G,j),G}),K=K.replace(/\{\{[^{}]+\}\}/g,j=>{const G=`"__VAR_${ie++}__"`;return B.set(G,j),G});const re=JSON.parse(K);let I=JSON.stringify(re,null,2);I=I.replace(/\{\}/g,`{
}`),I=I.replace(/\[\]/g,`[
]`),B.forEach((j,G)=>{I=I.replace(G,j)}),I!==t&&e(I)}catch{}},500)),D.current=!R.valid,()=>{N.current&&clearTimeout(N.current)}),[R.valid,R.empty,t,e]),Z.useEffect(()=>{$||w()},[$,w]);const M=Z.useCallback((F,B)=>{const K=document.createElement("input");K.type="file",K.onchange=ie=>{const re=ie.target.files?.[0];if(!re)return;const I=new FileReader;I.onload=()=>{const j=I.result.split(",")[1],G=n.find(O=>O.id===B);r(G?n.map(O=>O.id===G.id?{...O,data:j,mimeType:re.type,name:re.name}:O):[...n,{id:B,type:F,name:re.name,data:j,mimeType:re.type}])},I.readAsDataURL(re)},K.click()},[n,r]),Q=Z.useCallback(F=>{const K=F.target.closest(".variable-chip");if(K){const ie=K.dataset.variableType,re=K.dataset.variableId;if(ie==="file_base64"||ie==="file_dataurl")M(ie,re),F.preventDefault(),F.stopPropagation();else if(ie==="base64"){const I=K.getBoundingClientRect(),j=n.find(G=>G.id===re);T(j?.data||""),k({variableKey:`${ie}:${re}`,rect:I}),F.preventDefault(),F.stopPropagation()}}else k(null)},[n,M]),ne=Z.useCallback(F=>{const B=p(F);B&&(F==="file_base64"||F==="file_dataurl")&&setTimeout(()=>M(F,B),0)},[p,M]),ye=Z.useCallback(()=>{if(!E)return;const[F,B]=E.variableKey.split(":"),K=n.find(ie=>ie.id===B);r(K?n.map(ie=>ie.id===K.id?{...ie,data:C}:ie):[...n,{id:B,type:F,name:F,data:C}]),k(null),l.current?.focus()},[E,C,n,r]);Z.useEffect(()=>{const F=K=>{K.key==="Escape"&&(g(!1),k(null))},B=K=>{u.current&&!u.current.contains(K.target)&&(g(!1),k(null))};return document.addEventListener("keydown",F),document.addEventListener("mousedown",B),()=>{document.removeEventListener("keydown",F),document.removeEventListener("mousedown",B)}},[g]);const X=Z.useMemo(()=>{if(!E||!u.current)return{top:0,left:0};const F=u.current.getBoundingClientRect();return{top:E.rect.bottom-F.top+4,left:Math.max(0,E.rect.left-F.left)}},[E]);return x.jsxs("div",{ref:u,className:"flex flex-col h-full min-h-50 max-h-[60vh] relative overflow-hidden",children:[$?x.jsx("pre",{className:"flex-1 min-h-0 p-3 font-mono text-sm text-zinc-100 overflow-y-auto whitespace-pre-wrap wrap-break-word",children:H}):x.jsxs("div",{className:"flex-1 min-h-0 relative",children:[x.jsx("div",{ref:l,contentEditable:!0,suppressContentEditableWarning:!0,onInput:f,onPaste:d,onKeyDown:m,onClick:Q,className:"h-full p-3 font-mono text-sm text-zinc-100 outline-none overflow-y-auto whitespace-pre-wrap wrap-break-word"}),!t&&s&&x.jsx("div",{className:"absolute top-3 left-3 font-mono text-sm text-zinc-500 pointer-events-none whitespace-pre-wrap",children:s})]}),x.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 text-xs shrink-0",children:[a&&x.jsx("button",{type:"button",onClick:a.onClick,className:"text-[11px] px-2 py-0.5 rounded bg-zinc-700 hover:bg-zinc-600 text-zinc-200 transition-colors",children:a.label}),x.jsx("div",{className:"flex-1"}),x.jsx("button",{onClick:()=>q(!$),className:`transition-colors flex items-center gap-1 ${$?"text-blue-400 hover:text-blue-300":"text-zinc-500 hover:text-zinc-300"}`,title:$?"Show editor":"Show resolved JSON",children:x.jsx(Gk,{className:"w-3.5 h-3.5"})}),R.valid?x.jsx("span",{className:"text-emerald-500",children:"Valid JSON"}):x.jsx("span",{className:"text-red-400",title:R.error,children:"Invalid JSON"})]}),y&&x.jsx("div",{className:"fixed z-50 w-56 bg-zinc-800 border border-zinc-600 rounded-lg shadow-xl py-1",style:{top:v.top,left:v.left},children:yj.map(F=>x.jsxs("button",{onClick:()=>ne(F.type),className:"w-full flex items-center gap-2 px-3 py-2 text-left hover:bg-zinc-700 transition-colors",children:[x.jsx("span",{className:"text-zinc-400",children:F.icon}),x.jsxs("div",{className:"flex-1 min-w-0",children:[x.jsx("div",{className:"text-sm text-zinc-200",children:F.label}),x.jsx("div",{className:"text-xs text-zinc-500",children:F.description})]})]},F.type))}),E&&(()=>{const[F]=E.variableKey.split(":");return x.jsx("div",{className:"absolute z-50 bg-zinc-800/95 border border-zinc-700/50 rounded shadow-lg p-1.5 w-44",style:X,children:F==="base64"?x.jsxs("div",{className:"flex gap-1",children:[x.jsx("input",{type:"text",value:C,onChange:B=>T(B.target.value),onKeyDown:B=>B.key==="Enter"&&ye(),placeholder:"Text to encode...",className:"flex-1 min-w-0 px-1.5 py-0.5 text-xs bg-transparent text-zinc-200 rounded border-none focus:outline-none placeholder:text-zinc-500",autoFocus:!0}),x.jsx("button",{onClick:ye,className:"p-1 text-zinc-400 hover:text-zinc-200 transition-colors",children:x.jsx(Fk,{className:"w-3 h-3"})})]}):null})})()]})}const bj=[{type:"file_base64",label:"File (Base64)",description:"Select a file to encode",icon:x.jsx(Of,{className:"w-3.5 h-3.5"})},{type:"file_dataurl",label:"File (Data URL)",description:"File as data:... URL",icon:x.jsx(Of,{className:"w-3.5 h-3.5"})},{type:"base64",label:"Text (Base64)",description:"Text to encode",icon:x.jsx(Kk,{className:"w-3.5 h-3.5"})},{type:"timestamp",label:"Timestamp",description:"Unix timestamp",icon:x.jsx(Ll,{className:"w-3.5 h-3.5"})},{type:"uuid",label:"UUID",description:"Random UUID",icon:x.jsx(io,{className:"w-3.5 h-3.5"})},{type:"random_string",label:"Random String",description:"16-char random",icon:x.jsx(Zk,{className:"w-3.5 h-3.5"})}];function _j(t){if(!t.trim())return{valid:!0};try{const r=new DOMParser().parseFromString(t,"application/xml").querySelector("parsererror");if(r){const s=r.textContent||"Invalid XML",a=s.match(/error[^:]*:\s*(.+)/i);return{valid:!1,error:a?a[1].trim():s.split(`
`)[0]}}return{valid:!0}}catch(e){return{valid:!1,error:e instanceof Error?e.message:"Invalid XML"}}}function vj(t){try{const n=new DOMParser().parseFromString(t,"application/xml");if(n.querySelector("parsererror"))return t;const s=new XMLSerializer().serializeToString(n);let a="",l=0;const u=s.replace(/></g,`>
<`).split(`
`);for(const f of u){const d=f.trim();d&&(d.startsWith("</")&&(l=Math.max(0,l-1)),a+="  ".repeat(l)+d+`
`,d.startsWith("<")&&!d.startsWith("</")&&!d.startsWith("<?")&&!d.endsWith("/>")&&l++)}return a.trim()}catch{return t}}function xj({value:t,onChange:e,variables:n,onVariablesChange:r,placeholder:s}){const a=Z.useRef(null),l=Z.useRef(null),{handleInput:u,handlePaste:f,handleKeyDown:d,insertVariable:m,showTypeMenu:p,setShowTypeMenu:y,typeMenuPosition:g,buildDOM:v}=Qk({editorRef:a,value:t,onChange:e,variables:n,onVariablesChange:r,indentTriggers:[">","{","["]}),[w,E]=Z.useState(null),[k,C]=Z.useState(""),T=Z.useRef(!1),D=Z.useRef(null),N=Z.useMemo(()=>{if(!t.trim())return{valid:!0,empty:!0};let X=t;return X=X.replace(/\{\{[^{}]+\}\}/g,"PLACEHOLDER"),{..._j(X),empty:!1}},[t]),[R,$]=Z.useState(!1),q=Z.useMemo(()=>Rf(t,n,{missingDataPlaceholder:"[no data]"}),[t,n]);Z.useEffect(()=>(D.current&&(clearTimeout(D.current),D.current=null),N.valid&&!N.empty&&T.current&&(D.current=setTimeout(()=>{const X=new Map;let F=t,B=0;F=F.replace(/\{\{[^{}]+\}\}/g,ie=>{const re=`__VAR_${B++}__`;return X.set(re,ie),re});let K=vj(F);X.forEach((ie,re)=>{K=K.replace(re,ie)}),K!==t&&e(K)},500)),T.current=!N.valid,()=>{D.current&&clearTimeout(D.current)}),[N.valid,N.empty,t,e]),Z.useEffect(()=>{R||v()},[R,v]);const H=Z.useCallback((X,F)=>{const B=document.createElement("input");B.type="file",B.onchange=K=>{const ie=K.target.files?.[0];if(!ie)return;const re=new FileReader;re.onload=()=>{const I=re.result.split(",")[1],j=n.find(G=>G.id===F);r(j?n.map(G=>G.id===j.id?{...G,data:I,mimeType:ie.type,name:ie.name}:G):[...n,{id:F,type:X,name:ie.name,data:I,mimeType:ie.type}])},re.readAsDataURL(ie)},B.click()},[n,r]),M=Z.useCallback(X=>{const B=X.target.closest(".variable-chip");if(B){const K=B.dataset.variableType,ie=B.dataset.variableId;if(K==="file_base64"||K==="file_dataurl")H(K,ie),X.preventDefault(),X.stopPropagation();else if(K==="base64"){const re=B.getBoundingClientRect(),I=n.find(j=>j.id===ie);C(I?.data||""),E({variableKey:`${K}:${ie}`,rect:re}),X.preventDefault(),X.stopPropagation()}}else E(null)},[n,H]),Q=Z.useCallback(X=>{const F=m(X);F&&(X==="file_base64"||X==="file_dataurl")&&setTimeout(()=>H(X,F),0)},[m,H]),ne=Z.useCallback(()=>{if(!w)return;const[X,F]=w.variableKey.split(":"),B=n.find(K=>K.id===F);r(B?n.map(K=>K.id===B.id?{...K,data:k}:K):[...n,{id:F,type:X,name:X,data:k}]),E(null),a.current?.focus()},[w,k,n,r]);Z.useEffect(()=>{const X=B=>{B.key==="Escape"&&(y(!1),E(null))},F=B=>{l.current&&!l.current.contains(B.target)&&(y(!1),E(null))};return document.addEventListener("keydown",X),document.addEventListener("mousedown",F),()=>{document.removeEventListener("keydown",X),document.removeEventListener("mousedown",F)}},[y]);const ye=Z.useMemo(()=>{if(!w||!l.current)return{top:0,left:0};const X=l.current.getBoundingClientRect();return{top:w.rect.bottom-X.top+4,left:Math.max(0,w.rect.left-X.left)}},[w]);return x.jsxs("div",{ref:l,className:"flex flex-col h-full min-h-50 max-h-[60vh] relative overflow-hidden",children:[R?x.jsx("pre",{className:"flex-1 min-h-0 p-3 font-mono text-sm text-zinc-100 overflow-y-auto whitespace-pre-wrap wrap-break-word",children:q}):x.jsxs("div",{className:"flex-1 min-h-0 relative",children:[x.jsx("div",{ref:a,contentEditable:!0,suppressContentEditableWarning:!0,onInput:u,onPaste:f,onKeyDown:d,onClick:M,className:"h-full p-3 font-mono text-sm text-zinc-100 outline-none overflow-y-auto whitespace-pre-wrap wrap-break-word"}),!t&&s&&x.jsx("div",{className:"absolute top-3 left-3 font-mono text-sm text-zinc-500 pointer-events-none whitespace-pre-wrap",children:s})]}),x.jsxs("div",{className:"flex items-center justify-end gap-2 px-3 py-1.5 text-xs shrink-0",children:[x.jsx("button",{onClick:()=>$(!R),className:`transition-colors flex items-center gap-1 ${R?"text-blue-400 hover:text-blue-300":"text-zinc-500 hover:text-zinc-300"}`,title:R?"Show editor":"Show resolved XML",children:x.jsx(Gk,{className:"w-3.5 h-3.5"})}),N.valid?x.jsx("span",{className:"text-emerald-500",children:"Valid XML"}):x.jsx("span",{className:"text-red-400",title:N.error,children:"Invalid XML"})]}),p&&x.jsx("div",{className:"fixed z-50 w-56 bg-zinc-800 border border-zinc-600 rounded-lg shadow-xl py-1",style:{top:g.top,left:g.left},children:bj.map(X=>x.jsxs("button",{onClick:()=>Q(X.type),className:"w-full flex items-center gap-2 px-3 py-2 text-left hover:bg-zinc-700 transition-colors",children:[x.jsx("span",{className:"text-zinc-400",children:X.icon}),x.jsxs("div",{className:"flex-1 min-w-0",children:[x.jsx("div",{className:"text-sm text-zinc-200",children:X.label}),x.jsx("div",{className:"text-xs text-zinc-500",children:X.description})]})]},X.type))}),w&&(()=>{const[X]=w.variableKey.split(":");return x.jsx("div",{className:"absolute z-50 bg-zinc-800/95 border border-zinc-700/50 rounded shadow-lg p-1.5 w-44",style:ye,children:X==="base64"?x.jsxs("div",{className:"flex gap-1",children:[x.jsx("input",{type:"text",value:k,onChange:F=>C(F.target.value),onKeyDown:F=>F.key==="Enter"&&ne(),placeholder:"Text to encode...",className:"flex-1 min-w-0 px-1.5 py-0.5 text-xs bg-transparent text-zinc-200 rounded border-none focus:outline-none placeholder:text-zinc-500",autoFocus:!0}),x.jsx("button",{onClick:ne,className:"p-1 text-zinc-400 hover:text-zinc-200 transition-colors",children:x.jsx(Fk,{className:"w-3 h-3"})})]}):null})})()]})}function wj(t){const e=$e.c(9),{value:n,onChange:r,placeholder:s}=t,a=Z.useRef(null);let l;e[0]===Symbol.for("react.memo_cache_sentinel")?(l=()=>{const m=a.current;if(!m)return;m.style.height="auto";const p=Math.min(m.scrollHeight,160);m.style.height=`${p}px`},e[0]=l):l=e[0];let u;e[1]!==n?(u=[n],e[1]=n,e[2]=u):u=e[2],Z.useEffect(l,u);let f;e[3]!==r?(f=m=>r(m.target.value),e[3]=r,e[4]=f):f=e[4];let d;return e[5]!==s||e[6]!==f||e[7]!==n?(d=x.jsx("textarea",{ref:a,value:n,onChange:f,placeholder:s,spellCheck:!1,rows:3,className:"w-full font-mono text-xs text-neutral-800 dark:text-neutral-100 bg-transparent focus:outline-none placeholder-neutral-400 dark:placeholder-neutral-600 resize-none overflow-auto"}),e[5]=s,e[6]=f,e[7]=n,e[8]=d):d=e[8],d}function J1(){return Math.random().toString(36).substring(2,9)}function zl(t){const e=$e.c(32),{items:n,onChange:r,keyPlaceholder:s,valuePlaceholder:a,keySuggestions:l}=t,u=s===void 0?"Key":s,f=a===void 0?"Value":a;let d;e[0]!==l?(d=l===void 0?[]:l,e[0]=l,e[1]=d):d=e[1];const m=d,[p,y]=Z.useState(null),[g,v]=Z.useState("");let w;e[2]!==n||e[3]!==r?(w=($,q,H)=>{const M=n.map(ne=>ne.id===$?{...ne,[q]:H}:ne),Q=M[M.length-1];Q&&(Q.key||Q.value)&&M.push({id:J1(),enabled:!0,key:"",value:""}),r(M)},e[2]=n,e[3]=r,e[4]=w):w=e[4];const E=w;let k;e[5]!==n||e[6]!==r?(k=$=>{if(n.length===1){r([{id:J1(),enabled:!0,key:"",value:""}]);return}r(n.filter(q=>q.id!==$))},e[5]=n,e[6]=r,e[7]=k):k=e[7];const C=k;let T;e[8]!==n||e[9]!==m?(T=$=>{const q=n.map(Sj);return m.filter(H=>H.toLowerCase().includes($.toLowerCase())&&!q.includes(H.toLowerCase()))},e[8]=n,e[9]=m,e[10]=T):T=e[10];const D=T;let N;if(e[11]!==p||e[12]!==g||e[13]!==D||e[14]!==n||e[15]!==u||e[16]!==m||e[17]!==C||e[18]!==E||e[19]!==f){let $;e[21]!==p||e[22]!==g||e[23]!==D||e[24]!==u||e[25]!==m||e[26]!==C||e[27]!==E||e[28]!==f?($=q=>x.jsxs("tr",{className:`border-b border-neutral-100 dark:border-white/5 last:border-0 ${q.enabled?"":"opacity-40"}`,children:[x.jsx("td",{className:"w-8 pl-2.5 py-1.5",children:x.jsx("button",{type:"button",onClick:()=>E(q.id,"enabled",!q.enabled),className:"p-0.5 rounded transition-colors",children:q.enabled?x.jsx($y,{className:"w-3.5 h-3.5 text-neutral-700 dark:text-neutral-300"}):x.jsx(Hk,{className:"w-3.5 h-3.5 text-neutral-300 dark:text-neutral-600"})})}),x.jsx("td",{className:"px-1.5 py-1.5",children:x.jsxs("div",{className:"relative",children:[x.jsx("input",{type:"text",value:q.key,onChange:H=>{E(q.id,"key",H.target.value),v(H.target.value)},onFocus:()=>{y(q.id),v(q.key)},onBlur:()=>{setTimeout(()=>y(null),150)},placeholder:u,className:"w-full px-2 py-1 bg-white dark:bg-white/5 border border-neutral-300 dark:border-white/10 rounded text-xs text-neutral-800 dark:text-neutral-100 placeholder-neutral-400 dark:placeholder-neutral-500 focus:outline-none focus:border-neutral-400 dark:focus:border-white/20 transition-colors"}),m.length>0&&p===q.id&&(()=>{const H=D(g);return H.length===0?null:x.jsx("div",{className:"absolute z-50 left-0 right-0 top-full mt-1 bg-white dark:bg-[#1a1a1a] border border-neutral-200 dark:border-white/10 rounded-md shadow-lg max-h-48 overflow-y-auto",children:H.map(M=>x.jsx("button",{type:"button",onMouseDown:Q=>{Q.preventDefault(),E(q.id,"key",M),y(null)},className:"w-full px-2 py-1.5 text-left text-xs text-neutral-600 dark:text-neutral-300 hover:bg-neutral-100 dark:hover:bg-white/10 transition-colors",children:M},M))})})()]})}),x.jsx("td",{className:"px-1.5 py-1.5",children:x.jsx("input",{type:"text",value:q.value,onChange:H=>E(q.id,"value",H.target.value),placeholder:f,className:"w-full px-2 py-1 bg-white dark:bg-white/5 border border-neutral-300 dark:border-white/10 rounded text-xs text-neutral-800 dark:text-neutral-100 placeholder-neutral-400 dark:placeholder-neutral-500 focus:outline-none focus:border-neutral-400 dark:focus:border-white/20 transition-colors"})}),x.jsx("td",{className:"w-8 pr-1.5 py-1.5",children:x.jsx("button",{type:"button",onClick:()=>C(q.id),className:"p-1 text-neutral-400 dark:text-neutral-500 hover:text-rose-500 dark:hover:text-rose-400 hover:bg-neutral-100 dark:hover:bg-white/5 rounded transition-colors",children:x.jsx(Zi,{className:"w-3.5 h-3.5"})})})]},q.id),e[21]=p,e[22]=g,e[23]=D,e[24]=u,e[25]=m,e[26]=C,e[27]=E,e[28]=f,e[29]=$):$=e[29],N=n.map($),e[11]=p,e[12]=g,e[13]=D,e[14]=n,e[15]=u,e[16]=m,e[17]=C,e[18]=E,e[19]=f,e[20]=N}else N=e[20];let R;return e[30]!==N?(R=x.jsx("div",{children:x.jsx("table",{className:"w-full",children:x.jsx("tbody",{children:N})})}),e[30]=N,e[31]=R):R=e[31],R}function Sj(t){return t.key.toLowerCase()}function kj(){return Math.random().toString(36).substring(2,9)}function Q1(){return{id:kj(),enabled:!0,key:"",type:"text",value:"",file:null,fileName:""}}function Ej(t){const e=$e.c(21),{items:n,onChange:r,keyPlaceholder:s,valuePlaceholder:a}=t,l=s===void 0?"Field":s,u=a===void 0?"Value":a;let f;e[0]===Symbol.for("react.memo_cache_sentinel")?(f={},e[0]=f):f=e[0];const d=Z.useRef(f);let m;e[1]!==n||e[2]!==r?(m=(N,R)=>{const $=n.map(H=>H.id===N?{...H,...R}:H),q=$[$.length-1];q&&(q.key||q.value||q.file)&&$.push(Q1()),r($)},e[1]=n,e[2]=r,e[3]=m):m=e[3];const p=m;let y;e[4]!==n||e[5]!==r?(y=N=>{if(n.length===1){r([Q1()]);return}r(n.filter(R=>R.id!==N))},e[4]=n,e[5]=r,e[6]=y):y=e[6];const g=y;let v;e[7]!==p?(v=(N,R)=>{const $=R.target.files?.[0]??null;R.target.value="",$&&p(N,{type:"file",file:$,fileName:$.name,value:""})},e[7]=p,e[8]=v):v=e[8];const w=v;let E;e[9]!==p?(E=N=>{p(N,{type:"text",file:null,fileName:""})},e[9]=p,e[10]=E):E=e[10];const k=E,C=Cj;let T;e[11]!==k||e[12]!==w||e[13]!==n||e[14]!==l||e[15]!==g||e[16]!==p||e[17]!==u?(T=n.map(N=>x.jsxs("tr",{className:`border-b border-neutral-100 dark:border-white/5 last:border-0 ${N.enabled?"":"opacity-40"}`,children:[x.jsx("td",{className:"w-8 pl-2.5 py-1.5",children:x.jsx("button",{type:"button",onClick:()=>p(N.id,{enabled:!N.enabled}),className:"p-0.5 rounded transition-colors",children:N.enabled?x.jsx($y,{className:"w-3.5 h-3.5 text-neutral-700 dark:text-neutral-300"}):x.jsx(Hk,{className:"w-3.5 h-3.5 text-neutral-300 dark:text-neutral-600"})})}),x.jsx("td",{className:"px-1.5 py-1.5 w-36",children:x.jsx("input",{type:"text",value:N.key,onChange:R=>p(N.id,{key:R.target.value}),placeholder:l,className:"w-full px-2 py-1 bg-white dark:bg-white/5 border border-neutral-300 dark:border-white/10 rounded text-xs text-neutral-800 dark:text-neutral-100 placeholder-neutral-400 dark:placeholder-neutral-500 focus:outline-none focus:border-neutral-400 dark:focus:border-white/20 transition-colors"})}),x.jsxs("td",{className:"px-1.5 py-1.5",children:[x.jsx("input",{type:"file",ref:R=>{d.current[N.id]=R},onChange:R=>w(N.id,R),className:"hidden"}),N.type==="file"&&N.file?x.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 bg-neutral-100 dark:bg-white/10 rounded text-xs text-neutral-600 dark:text-neutral-300",children:[x.jsx(G1,{className:"w-3 h-3 shrink-0"}),x.jsx("span",{className:"truncate max-w-xs",children:N.fileName}),x.jsxs("span",{className:"text-neutral-400 shrink-0",children:["(",C(N.file.size),")"]}),x.jsx("button",{type:"button",onClick:()=>k(N.id),className:"p-0.5 ml-1 text-neutral-400 hover:text-neutral-600 dark:hover:text-neutral-200 transition-colors shrink-0",children:x.jsx(pd,{className:"w-3 h-3"})})]}):x.jsx("input",{type:"text",value:N.value,onChange:R=>p(N.id,{value:R.target.value}),placeholder:u,className:"w-full px-2 py-1 bg-white dark:bg-white/5 border border-neutral-300 dark:border-white/10 rounded text-xs text-neutral-800 dark:text-neutral-100 placeholder-neutral-400 dark:placeholder-neutral-500 focus:outline-none focus:border-neutral-400 dark:focus:border-white/20 transition-colors"})]}),x.jsx("td",{className:"w-16 pr-1.5 py-1.5",children:x.jsxs("div",{className:"flex items-center gap-0.5",children:[x.jsx("button",{type:"button",onClick:()=>d.current[N.id]?.click(),className:`p-1 rounded transition-colors ${N.type==="file"?"text-blue-500 dark:text-blue-400 bg-blue-50 dark:bg-blue-500/10":"text-neutral-400 dark:text-neutral-500 hover:text-neutral-600 dark:hover:text-neutral-300 hover:bg-neutral-100 dark:hover:bg-white/5"}`,title:"Attach file",children:x.jsx(G1,{className:"w-3.5 h-3.5"})}),x.jsx("button",{type:"button",onClick:()=>g(N.id),className:"p-1 text-neutral-400 dark:text-neutral-500 hover:text-rose-500 dark:hover:text-rose-400 hover:bg-neutral-100 dark:hover:bg-white/5 rounded transition-colors",children:x.jsx(Zi,{className:"w-3.5 h-3.5"})})]})})]},N.id)),e[11]=k,e[12]=w,e[13]=n,e[14]=l,e[15]=g,e[16]=p,e[17]=u,e[18]=T):T=e[18];let D;return e[19]!==T?(D=x.jsx("div",{children:x.jsx("table",{className:"w-full",children:x.jsx("tbody",{children:T})})}),e[19]=T,e[20]=D):D=e[20],D}function Cj(t){return t<1024?`${t} B`:t<1048576?`${(t/1024).toFixed(1)} KB`:`${(t/1048576).toFixed(1)} MB`}function Tj(t){const e=$e.c(12),{file:n,fileName:r,onFileChange:s}=t,a=Z.useRef(null);let l;e[0]!==s?(l=v=>{s(v,v?.name??"")},e[0]=s,e[1]=l):l=e[1];const u=l,f=Rj,d=Aj;let m;e[2]!==u?(m=x.jsx("input",{type:"file",ref:a,onChange:v=>u(v.target.files?.[0]??null),className:"hidden"}),e[2]=u,e[3]=m):m=e[3];let p;e[4]!==n||e[5]!==r||e[6]!==s?(p=n?x.jsxs("div",{className:"flex items-center gap-3 p-3 bg-neutral-100 dark:bg-white/5 rounded-lg border border-neutral-200 dark:border-white/10",children:[x.jsx("div",{className:"flex items-center justify-center w-10 h-10 bg-white dark:bg-white/10 rounded-lg text-xl",children:d(n.type)}),x.jsxs("div",{className:"flex-1 min-w-0",children:[x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx(fo,{className:"w-4 h-4 text-neutral-500 dark:text-neutral-400 shrink-0"}),x.jsx("p",{className:"text-sm font-medium text-neutral-800 dark:text-neutral-100 truncate",children:r})]}),x.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[x.jsx("span",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:f(n.size)}),x.jsx("span",{className:"text-xs text-neutral-400 dark:text-neutral-500",children:""}),x.jsx("span",{className:"text-xs text-neutral-500 dark:text-neutral-400 truncate",children:n.type||"application/octet-stream"})]})]}),x.jsxs("div",{className:"flex items-center gap-1",children:[x.jsx("button",{type:"button",onClick:()=>a.current?.click(),className:"px-2 py-1 text-xs text-neutral-600 dark:text-neutral-300 hover:bg-neutral-200 dark:hover:bg-white/10 rounded transition-colors",children:"Change"}),x.jsx("button",{type:"button",onClick:()=>s(null,""),className:"p-1 text-neutral-400 dark:text-neutral-500 hover:text-rose-500 dark:hover:text-rose-400 hover:bg-neutral-200 dark:hover:bg-white/10 rounded transition-colors",children:x.jsx(pd,{className:"w-4 h-4"})})]})]}):x.jsxs("div",{onClick:()=>a.current?.click(),className:"flex flex-col items-center justify-center p-8 border-2 border-dashed border-neutral-300 dark:border-white/20 rounded-lg cursor-pointer hover:border-neutral-400 dark:hover:border-white/30 hover:bg-neutral-50 dark:hover:bg-white/5 transition-colors",children:[x.jsx(Uy,{className:"w-8 h-8 text-neutral-400 dark:text-neutral-500 mb-2"}),x.jsx("p",{className:"text-sm text-neutral-600 dark:text-neutral-300 mb-1",children:"Click to select a file"}),x.jsx("p",{className:"text-xs text-neutral-400 dark:text-neutral-500",children:"or drag and drop"})]}),e[4]=n,e[5]=r,e[6]=s,e[7]=p):p=e[7];let y;e[8]===Symbol.for("react.memo_cache_sentinel")?(y=x.jsx("p",{className:"text-xs text-neutral-400 dark:text-neutral-500",children:"The file will be sent as the raw request body. Content-Type will be set automatically based on the file type."}),e[8]=y):y=e[8];let g;return e[9]!==m||e[10]!==p?(g=x.jsxs("div",{className:"space-y-3",children:[m,p,y]}),e[9]=m,e[10]=p,e[11]=g):g=e[11],g}function Aj(t){return t.startsWith("image/")?"":t.startsWith("video/")?"":t.startsWith("audio/")?"":t.includes("pdf")?"":t.includes("zip")||t.includes("tar")||t.includes("gzip")?"":t.includes("json")||t.includes("xml")||t.includes("text")?"":""}function Rj(t){return t<1024?`${t} B`:t<1048576?`${(t/1024).toFixed(1)} KB`:t<1073741824?`${(t/1048576).toFixed(1)} MB`:`${(t/1073741824).toFixed(2)} GB`}const Oj=[{value:"none",label:"None"},{value:"json",label:"JSON"},{value:"xml",label:"XML"},{value:"form-urlencoded",label:"Form"},{value:"form-data",label:"Form Data"},{value:"binary",label:"Binary"},{value:"raw",label:"Raw"}];function Yk(){return Math.random().toString(36).substring(2,9)}function Ij(){return{id:Yk(),enabled:!0,key:"",type:"text",value:"",file:null,fileName:""}}const Nj=["Accept","Accept-Charset","Accept-Encoding","Accept-Language","Authorization","Cache-Control","Connection","Content-Disposition","Content-Encoding","Content-Length","Content-Type","Cookie","Date","ETag","Expect","Forwarded","From","Host","If-Match","If-Modified-Since","If-None-Match","If-Range","If-Unmodified-Since","Max-Forwards","Origin","Pragma","Proxy-Authorization","Range","Referer","TE","Trailer","Transfer-Encoding","Upgrade","User-Agent","Via","Warning","X-Api-Key","X-Correlation-ID","X-Forwarded-For","X-Forwarded-Host","X-Forwarded-Proto","X-Request-ID","X-Requested-With"];function Mj(){const t=$e.c(54),[e,n]=Z.useState("body"),{request:r,setHeaders:s,setQuery:a,setBody:l,setVariables:u}=tn();let f;t[0]!==r?.http?.headers?(f=r?.http?.headers??[],t[0]=r?.http?.headers,t[1]=f):f=t[1];const d=f;let m;t[2]!==r?.http?.query?(m=r?.http?.query??[],t[2]=r?.http?.query,t[3]=m):m=t[3];const p=m;let y;t[4]!==r?.http?.body?(y=r?.http?.body??{type:"none"},t[4]=r?.http?.body,t[5]=y):y=t[5];const g=y;let v;t[6]!==r?.variables?(v=r?.variables??[],t[6]=r?.variables,t[7]=v):v=t[7];const w=v;let E;t[8]!==g||t[9]!==l?(E=K=>{e:switch(K){case"none":{l({type:"none"});break e}case"json":{l({type:"json",content:g.type==="json"?g.content:""});break e}case"xml":{l({type:"xml",content:g.type==="xml"?g.content:""});break e}case"raw":{l({type:"raw",content:g.type==="raw"?g.content:""});break e}case"form-urlencoded":{l({type:"form-urlencoded",data:g.type==="form-urlencoded"?g.data:[{id:Yk(),enabled:!0,key:"",value:""}]});break e}case"form-data":{l({type:"form-data",data:g.type==="form-data"?g.data:[Ij()]});break e}case"binary":l({type:"binary",file:g.type==="binary"?g.file:null,fileName:g.type==="binary"?g.fileName:""})}},t[8]=g,t[9]=l,t[10]=E):E=t[10];const k=E;let C;t[11]!==p?(C=p.filter(Lj),t[11]=p,t[12]=C):C=t[12];let T;t[13]!==C.length?(T={id:"params",label:"Params",count:C.length},t[13]=C.length,t[14]=T):T=t[14];let D;t[15]!==d?(D=d.filter(jj),t[15]=d,t[16]=D):D=t[16];let N;t[17]!==D.length?(N={id:"headers",label:"Headers",count:D.length},t[17]=D.length,t[18]=N):N=t[18];let R;t[19]===Symbol.for("react.memo_cache_sentinel")?(R={id:"body",label:"Body"},t[19]=R):R=t[19];let $;t[20]!==T||t[21]!==N?($=[T,N,R],t[20]=T,t[21]=N,t[22]=$):$=t[22];const q=$;let H;t[23]!==e||t[24]!==q?(H=x.jsx("div",{role:"tablist",className:"inline-flex gap-1",children:q.map(K=>x.jsxs("button",{role:"tab",onClick:()=>n(K.id),className:`px-2 py-1 text-[11px] font-medium rounded-md transition-all ${e===K.id?"bg-white dark:bg-white/10 text-neutral-800 dark:text-neutral-100 shadow-sm":"text-neutral-500 dark:text-neutral-400 hover:text-neutral-700 dark:hover:text-neutral-200 hover:bg-neutral-100 dark:hover:bg-white/5"}`,children:[K.label,K.count!==void 0&&K.count>0&&x.jsx("span",{className:"ml-1.5 px-1.5 py-0.5 text-[9px] bg-neutral-200 dark:bg-white/10 text-neutral-600 dark:text-neutral-300 rounded-full",children:K.count})]},K.id))}),t[23]=e,t[24]=q,t[25]=H):H=t[25];let M;t[26]!==e||t[27]!==g||t[28]!==k?(M=e==="body"&&x.jsx("select",{value:g.type,onChange:K=>k(K.target.value),className:"h-6 px-2 text-[11px] font-medium bg-white dark:bg-white/10 text-neutral-800 dark:text-neutral-100 rounded-md shadow-sm border-0 focus:outline-none focus:ring-2 focus:ring-neutral-300 dark:focus:ring-white/20 cursor-pointer transition-all min-w-30",children:Oj.map(Dj)}),t[26]=e,t[27]=g,t[28]=k,t[29]=M):M=t[29];let Q;t[30]!==H||t[31]!==M?(Q=x.jsxs("div",{className:"flex items-center gap-2",children:[H,M]}),t[30]=H,t[31]=M,t[32]=Q):Q=t[32];let ne;t[33]!==e||t[34]!==p||t[35]!==a?(ne=e==="params"&&x.jsx(zl,{items:p,onChange:a,keyPlaceholder:"Parameter",valuePlaceholder:"Value"}),t[33]=e,t[34]=p,t[35]=a,t[36]=ne):ne=t[36];let ye;t[37]!==e||t[38]!==d||t[39]!==s?(ye=e==="headers"&&x.jsx(zl,{items:d,onChange:s,keyPlaceholder:"Header",valuePlaceholder:"Value",keySuggestions:Nj}),t[37]=e,t[38]=d,t[39]=s,t[40]=ye):ye=t[40];let X;t[41]!==e||t[42]!==g||t[43]!==l||t[44]!==u||t[45]!==w?(X=e==="body"&&x.jsxs("div",{className:"space-y-3",children:[g.type==="json"&&x.jsx(Fy,{value:g.content,onChange:K=>l({...g,content:K}),variables:w,onVariablesChange:u,placeholder:`{
  "key": "value"
}`}),g.type==="xml"&&x.jsx(xj,{value:g.content,onChange:K=>l({...g,content:K}),variables:w,onVariablesChange:u,placeholder:"<xml></xml>"}),g.type==="raw"&&x.jsx(wj,{value:g.content,onChange:K=>l({...g,content:K}),language:"text",placeholder:"Plain text payload"}),g.type==="form-urlencoded"&&x.jsx(zl,{items:g.data,onChange:K=>l({...g,data:K}),keyPlaceholder:"Key",valuePlaceholder:"Value"}),g.type==="form-data"&&x.jsx(Ej,{items:g.data,onChange:K=>l({...g,data:K})}),g.type==="binary"&&x.jsx(Tj,{file:g.file,fileName:g.fileName,onFileChange:(K,ie)=>l({...g,file:K,fileName:ie})}),g.type==="none"&&x.jsx("div",{className:"py-8 text-center text-sm text-neutral-400 dark:text-neutral-500",children:"No request body"})]}),t[41]=e,t[42]=g,t[43]=l,t[44]=u,t[45]=w,t[46]=X):X=t[46];let F;t[47]!==ne||t[48]!==ye||t[49]!==X?(F=x.jsxs("div",{children:[ne,ye,X]}),t[47]=ne,t[48]=ye,t[49]=X,t[50]=F):F=t[50];let B;return t[51]!==Q||t[52]!==F?(B=x.jsxs("div",{className:"space-y-3",children:[Q,F]}),t[51]=Q,t[52]=F,t[53]=B):B=t[53],B}function Dj(t){return x.jsx("option",{value:t.value,className:"bg-white dark:bg-[#1a1a1a]",children:t.label},t.value)}function jj(t){return t.key}function Lj(t){return t.key}const zj="modulepreload",Pj=function(t){return"/"+t},Y1={},z=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){let d=function(m){return Promise.all(m.map(p=>Promise.resolve(p).then(y=>({status:"fulfilled",value:y}),y=>({status:"rejected",reason:y}))))};var l=d;document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),f=u?.nonce||u?.getAttribute("nonce");s=d(n.map(m=>{if(m=Pj(m),m in Y1)return;Y1[m]=!0;const p=m.endsWith(".css"),y=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${y}`))return;const g=document.createElement("link");if(g.rel=p?"stylesheet":zj,p||(g.as="script"),g.crossOrigin="",g.href=m,f&&g.setAttribute("nonce",f),document.head.appendChild(g),p)return new Promise((v,w)=>{g.addEventListener("load",v),g.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${m}`)))})}))}function a(u){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=u,window.dispatchEvent(f),!f.defaultPrevented)throw u}return s.then(u=>{for(const f of u||[])f.status==="rejected"&&a(f.reason);return e().catch(a)})};let Gt=class extends Error{constructor(e){super(e),this.name="ShikiError"}};function Bj(t){return Vy(t)}function Vy(t){return Array.isArray(t)?$j(t):t instanceof RegExp?t:typeof t=="object"?Uj(t):t}function $j(t){let e=[];for(let n=0,r=t.length;n<r;n++)e[n]=Vy(t[n]);return e}function Uj(t){let e={};for(let n in t)e[n]=Vy(t[n]);return e}function Wk(t,...e){return e.forEach(n=>{for(let r in n)t[r]=n[r]}),t}function Xk(t){const e=~t.lastIndexOf("/")||~t.lastIndexOf("\\");return e===0?t:~e===t.length-1?Xk(t.substring(0,t.length-1)):t.substr(~e+1)}var _m=/\$(\d+)|\${(\d+):\/(downcase|upcase)}/g,zu=class{static hasCaptures(t){return t===null?!1:(_m.lastIndex=0,_m.test(t))}static replaceCaptures(t,e,n){return t.replace(_m,(r,s,a,l)=>{let u=n[parseInt(s||a,10)];if(u){let f=e.substring(u.start,u.end);for(;f[0]===".";)f=f.substring(1);switch(l){case"downcase":return f.toLowerCase();case"upcase":return f.toUpperCase();default:return f}}else return r})}};function eE(t,e){return t<e?-1:t>e?1:0}function tE(t,e){if(t===null&&e===null)return 0;if(!t)return-1;if(!e)return 1;let n=t.length,r=e.length;if(n===r){for(let s=0;s<n;s++){let a=eE(t[s],e[s]);if(a!==0)return a}return 0}return n-r}function W1(t){return!!(/^#[0-9a-f]{6}$/i.test(t)||/^#[0-9a-f]{8}$/i.test(t)||/^#[0-9a-f]{3}$/i.test(t)||/^#[0-9a-f]{4}$/i.test(t))}function nE(t){return t.replace(/[\-\\\{\}\*\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&")}var rE=class{constructor(t){this.fn=t}cache=new Map;get(t){if(this.cache.has(t))return this.cache.get(t);const e=this.fn(t);return this.cache.set(t,e),e}},Df=class{constructor(t,e,n){this._colorMap=t,this._defaults=e,this._root=n}static createFromRawTheme(t,e){return this.createFromParsedTheme(Vj(t),e)}static createFromParsedTheme(t,e){return Gj(t,e)}_cachedMatchRoot=new rE(t=>this._root.match(t));getColorMap(){return this._colorMap.getColorMap()}getDefaults(){return this._defaults}match(t){if(t===null)return this._defaults;const e=t.scopeName,r=this._cachedMatchRoot.get(e).find(s=>qj(t.parent,s.parentScopes));return r?new sE(r.fontStyle,r.foreground,r.background):null}},vm=class of{constructor(e,n){this.parent=e,this.scopeName=n}static push(e,n){for(const r of n)e=new of(e,r);return e}static from(...e){let n=null;for(let r=0;r<e.length;r++)n=new of(n,e[r]);return n}push(e){return new of(this,e)}getSegments(){let e=this;const n=[];for(;e;)n.push(e.scopeName),e=e.parent;return n.reverse(),n}toString(){return this.getSegments().join(" ")}extends(e){return this===e?!0:this.parent===null?!1:this.parent.extends(e)}getExtensionIfDefined(e){const n=[];let r=this;for(;r&&r!==e;)n.push(r.scopeName),r=r.parent;return r===e?n.reverse():void 0}};function qj(t,e){if(e.length===0)return!0;for(let n=0;n<e.length;n++){let r=e[n],s=!1;if(r===">"){if(n===e.length-1)return!1;r=e[++n],s=!0}for(;t&&!Fj(t.scopeName,r);){if(s)return!1;t=t.parent}if(!t)return!1;t=t.parent}return!0}function Fj(t,e){return e===t||t.startsWith(e)&&t[e.length]==="."}var sE=class{constructor(t,e,n){this.fontStyle=t,this.foregroundId=e,this.backgroundId=n}};function Vj(t){if(!t)return[];if(!t.settings||!Array.isArray(t.settings))return[];let e=t.settings,n=[],r=0;for(let s=0,a=e.length;s<a;s++){let l=e[s];if(!l.settings)continue;let u;if(typeof l.scope=="string"){let p=l.scope;p=p.replace(/^[,]+/,""),p=p.replace(/[,]+$/,""),u=p.split(",")}else Array.isArray(l.scope)?u=l.scope:u=[""];let f=-1;if(typeof l.settings.fontStyle=="string"){f=0;let p=l.settings.fontStyle.split(" ");for(let y=0,g=p.length;y<g;y++)switch(p[y]){case"italic":f=f|1;break;case"bold":f=f|2;break;case"underline":f=f|4;break;case"strikethrough":f=f|8;break}}let d=null;typeof l.settings.foreground=="string"&&W1(l.settings.foreground)&&(d=l.settings.foreground);let m=null;typeof l.settings.background=="string"&&W1(l.settings.background)&&(m=l.settings.background);for(let p=0,y=u.length;p<y;p++){let v=u[p].trim().split(" "),w=v[v.length-1],E=null;v.length>1&&(E=v.slice(0,v.length-1),E.reverse()),n[r++]=new Hj(w,E,s,f,d,m)}}return n}var Hj=class{constructor(t,e,n,r,s,a){this.scope=t,this.parentScopes=e,this.index=n,this.fontStyle=r,this.foreground=s,this.background=a}},An=(t=>(t[t.NotSet=-1]="NotSet",t[t.None=0]="None",t[t.Italic=1]="Italic",t[t.Bold=2]="Bold",t[t.Underline=4]="Underline",t[t.Strikethrough=8]="Strikethrough",t))(An||{});function Gj(t,e){t.sort((f,d)=>{let m=eE(f.scope,d.scope);return m!==0||(m=tE(f.parentScopes,d.parentScopes),m!==0)?m:f.index-d.index});let n=0,r="#000000",s="#ffffff";for(;t.length>=1&&t[0].scope==="";){let f=t.shift();f.fontStyle!==-1&&(n=f.fontStyle),f.foreground!==null&&(r=f.foreground),f.background!==null&&(s=f.background)}let a=new Kj(e),l=new sE(n,a.getId(r),a.getId(s)),u=new Jj(new Rg(0,null,-1,0,0),[]);for(let f=0,d=t.length;f<d;f++){let m=t[f];u.insert(0,m.scope,m.parentScopes,m.fontStyle,a.getId(m.foreground),a.getId(m.background))}return new Df(a,l,u)}var Kj=class{_isFrozen;_lastColorId;_id2color;_color2id;constructor(t){if(this._lastColorId=0,this._id2color=[],this._color2id=Object.create(null),Array.isArray(t)){this._isFrozen=!0;for(let e=0,n=t.length;e<n;e++)this._color2id[t[e]]=e,this._id2color[e]=t[e]}else this._isFrozen=!1}getId(t){if(t===null)return 0;t=t.toUpperCase();let e=this._color2id[t];if(e)return e;if(this._isFrozen)throw new Error(`Missing color in color map - ${t}`);return e=++this._lastColorId,this._color2id[t]=e,this._id2color[e]=t,e}getColorMap(){return this._id2color.slice(0)}},Zj=Object.freeze([]),Rg=class iE{scopeDepth;parentScopes;fontStyle;foreground;background;constructor(e,n,r,s,a){this.scopeDepth=e,this.parentScopes=n||Zj,this.fontStyle=r,this.foreground=s,this.background=a}clone(){return new iE(this.scopeDepth,this.parentScopes,this.fontStyle,this.foreground,this.background)}static cloneArr(e){let n=[];for(let r=0,s=e.length;r<s;r++)n[r]=e[r].clone();return n}acceptOverwrite(e,n,r,s){this.scopeDepth>e?console.log("how did this happen?"):this.scopeDepth=e,n!==-1&&(this.fontStyle=n),r!==0&&(this.foreground=r),s!==0&&(this.background=s)}},Jj=class Og{constructor(e,n=[],r={}){this._mainRule=e,this._children=r,this._rulesWithParentScopes=n}_rulesWithParentScopes;static _cmpBySpecificity(e,n){if(e.scopeDepth!==n.scopeDepth)return n.scopeDepth-e.scopeDepth;let r=0,s=0;for(;e.parentScopes[r]===">"&&r++,n.parentScopes[s]===">"&&s++,!(r>=e.parentScopes.length||s>=n.parentScopes.length);){const a=n.parentScopes[s].length-e.parentScopes[r].length;if(a!==0)return a;r++,s++}return n.parentScopes.length-e.parentScopes.length}match(e){if(e!==""){let r=e.indexOf("."),s,a;if(r===-1?(s=e,a=""):(s=e.substring(0,r),a=e.substring(r+1)),this._children.hasOwnProperty(s))return this._children[s].match(a)}const n=this._rulesWithParentScopes.concat(this._mainRule);return n.sort(Og._cmpBySpecificity),n}insert(e,n,r,s,a,l){if(n===""){this._doInsertHere(e,r,s,a,l);return}let u=n.indexOf("."),f,d;u===-1?(f=n,d=""):(f=n.substring(0,u),d=n.substring(u+1));let m;this._children.hasOwnProperty(f)?m=this._children[f]:(m=new Og(this._mainRule.clone(),Rg.cloneArr(this._rulesWithParentScopes)),this._children[f]=m),m.insert(e+1,d,r,s,a,l)}_doInsertHere(e,n,r,s,a){if(n===null){this._mainRule.acceptOverwrite(e,r,s,a);return}for(let l=0,u=this._rulesWithParentScopes.length;l<u;l++){let f=this._rulesWithParentScopes[l];if(tE(f.parentScopes,n)===0){f.acceptOverwrite(e,r,s,a);return}}r===-1&&(r=this._mainRule.fontStyle),s===0&&(s=this._mainRule.foreground),a===0&&(a=this._mainRule.background),this._rulesWithParentScopes.push(new Rg(e,n,r,s,a))}},ao=class Rr{static toBinaryStr(e){return e.toString(2).padStart(32,"0")}static print(e){const n=Rr.getLanguageId(e),r=Rr.getTokenType(e),s=Rr.getFontStyle(e),a=Rr.getForeground(e),l=Rr.getBackground(e);console.log({languageId:n,tokenType:r,fontStyle:s,foreground:a,background:l})}static getLanguageId(e){return(e&255)>>>0}static getTokenType(e){return(e&768)>>>8}static containsBalancedBrackets(e){return(e&1024)!==0}static getFontStyle(e){return(e&30720)>>>11}static getForeground(e){return(e&16744448)>>>15}static getBackground(e){return(e&4278190080)>>>24}static set(e,n,r,s,a,l,u){let f=Rr.getLanguageId(e),d=Rr.getTokenType(e),m=Rr.containsBalancedBrackets(e)?1:0,p=Rr.getFontStyle(e),y=Rr.getForeground(e),g=Rr.getBackground(e);return n!==0&&(f=n),r!==8&&(d=r),s!==null&&(m=s?1:0),a!==-1&&(p=a),l!==0&&(y=l),u!==0&&(g=u),(f<<0|d<<8|m<<10|p<<11|y<<15|g<<24)>>>0}};function jf(t,e){const n=[],r=Qj(t);let s=r.next();for(;s!==null;){let f=0;if(s.length===2&&s.charAt(1)===":"){switch(s.charAt(0)){case"R":f=1;break;case"L":f=-1;break;default:console.log(`Unknown priority ${s} in scope selector`)}s=r.next()}let d=l();if(n.push({matcher:d,priority:f}),s!==",")break;s=r.next()}return n;function a(){if(s==="-"){s=r.next();const f=a();return d=>!!f&&!f(d)}if(s==="("){s=r.next();const f=u();return s===")"&&(s=r.next()),f}if(X1(s)){const f=[];do f.push(s),s=r.next();while(X1(s));return d=>e(f,d)}return null}function l(){const f=[];let d=a();for(;d;)f.push(d),d=a();return m=>f.every(p=>p(m))}function u(){const f=[];let d=l();for(;d&&(f.push(d),s==="|"||s===",");){do s=r.next();while(s==="|"||s===",");d=l()}return m=>f.some(p=>p(m))}}function X1(t){return!!t&&!!t.match(/[\w\.:]+/)}function Qj(t){let e=/([LR]:|[\w\.:][\w\.:\-]*|[\,\|\-\(\)])/g,n=e.exec(t);return{next:()=>{if(!n)return null;const r=n[0];return n=e.exec(t),r}}}function aE(t){typeof t.dispose=="function"&&t.dispose()}var Wl=class{constructor(t){this.scopeName=t}toKey(){return this.scopeName}},Yj=class{constructor(t,e){this.scopeName=t,this.ruleName=e}toKey(){return`${this.scopeName}#${this.ruleName}`}},Wj=class{_references=[];_seenReferenceKeys=new Set;get references(){return this._references}visitedRule=new Set;add(t){const e=t.toKey();this._seenReferenceKeys.has(e)||(this._seenReferenceKeys.add(e),this._references.push(t))}},Xj=class{constructor(t,e){this.repo=t,this.initialScopeName=e,this.seenFullScopeRequests.add(this.initialScopeName),this.Q=[new Wl(this.initialScopeName)]}seenFullScopeRequests=new Set;seenPartialScopeRequests=new Set;Q;processQueue(){const t=this.Q;this.Q=[];const e=new Wj;for(const n of t)eL(n,this.initialScopeName,this.repo,e);for(const n of e.references)if(n instanceof Wl){if(this.seenFullScopeRequests.has(n.scopeName))continue;this.seenFullScopeRequests.add(n.scopeName),this.Q.push(n)}else{if(this.seenFullScopeRequests.has(n.scopeName)||this.seenPartialScopeRequests.has(n.toKey()))continue;this.seenPartialScopeRequests.add(n.toKey()),this.Q.push(n)}}};function eL(t,e,n,r){const s=n.lookup(t.scopeName);if(!s){if(t.scopeName===e)throw new Error(`No grammar provided for <${e}>`);return}const a=n.lookup(e);t instanceof Wl?lf({baseGrammar:a,selfGrammar:s},r):Ig(t.ruleName,{baseGrammar:a,selfGrammar:s,repository:s.repository},r);const l=n.injections(t.scopeName);if(l)for(const u of l)r.add(new Wl(u))}function Ig(t,e,n){if(e.repository&&e.repository[t]){const r=e.repository[t];Lf([r],e,n)}}function lf(t,e){t.selfGrammar.patterns&&Array.isArray(t.selfGrammar.patterns)&&Lf(t.selfGrammar.patterns,{...t,repository:t.selfGrammar.repository},e),t.selfGrammar.injections&&Lf(Object.values(t.selfGrammar.injections),{...t,repository:t.selfGrammar.repository},e)}function Lf(t,e,n){for(const r of t){if(n.visitedRule.has(r))continue;n.visitedRule.add(r);const s=r.repository?Wk({},e.repository,r.repository):e.repository;Array.isArray(r.patterns)&&Lf(r.patterns,{...e,repository:s},n);const a=r.include;if(!a)continue;const l=oE(a);switch(l.kind){case 0:lf({...e,selfGrammar:e.baseGrammar},n);break;case 1:lf(e,n);break;case 2:Ig(l.ruleName,{...e,repository:s},n);break;case 3:case 4:const u=l.scopeName===e.selfGrammar.scopeName?e.selfGrammar:l.scopeName===e.baseGrammar.scopeName?e.baseGrammar:void 0;if(u){const f={baseGrammar:e.baseGrammar,selfGrammar:u,repository:s};l.kind===4?Ig(l.ruleName,f,n):lf(f,n)}else l.kind===4?n.add(new Yj(l.scopeName,l.ruleName)):n.add(new Wl(l.scopeName));break}}}var tL=class{kind=0},nL=class{kind=1},rL=class{constructor(t){this.ruleName=t}kind=2},sL=class{constructor(t){this.scopeName=t}kind=3},iL=class{constructor(t,e){this.scopeName=t,this.ruleName=e}kind=4};function oE(t){if(t==="$base")return new tL;if(t==="$self")return new nL;const e=t.indexOf("#");if(e===-1)return new sL(t);if(e===0)return new rL(t.substring(1));{const n=t.substring(0,e),r=t.substring(e+1);return new iL(n,r)}}var aL=/\\(\d+)/,ew=/\\(\d+)/g,oL=-1,lE=-2;var dc=class{$location;id;_nameIsCapturing;_name;_contentNameIsCapturing;_contentName;constructor(t,e,n,r){this.$location=t,this.id=e,this._name=n||null,this._nameIsCapturing=zu.hasCaptures(this._name),this._contentName=r||null,this._contentNameIsCapturing=zu.hasCaptures(this._contentName)}get debugName(){const t=this.$location?`${Xk(this.$location.filename)}:${this.$location.line}`:"unknown";return`${this.constructor.name}#${this.id} @ ${t}`}getName(t,e){return!this._nameIsCapturing||this._name===null||t===null||e===null?this._name:zu.replaceCaptures(this._name,t,e)}getContentName(t,e){return!this._contentNameIsCapturing||this._contentName===null?this._contentName:zu.replaceCaptures(this._contentName,t,e)}},lL=class extends dc{retokenizeCapturedWithRuleId;constructor(t,e,n,r,s){super(t,e,n,r),this.retokenizeCapturedWithRuleId=s}dispose(){}collectPatterns(t,e){throw new Error("Not supported!")}compile(t,e){throw new Error("Not supported!")}compileAG(t,e,n,r){throw new Error("Not supported!")}},cL=class extends dc{_match;captures;_cachedCompiledPatterns;constructor(t,e,n,r,s){super(t,e,n,null),this._match=new Xl(r,this.id),this.captures=s,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}get debugMatchRegExp(){return`${this._match.source}`}collectPatterns(t,e){e.push(this._match)}compile(t,e){return this._getCachedCompiledPatterns(t).compile(t)}compileAG(t,e,n,r){return this._getCachedCompiledPatterns(t).compileAG(t,n,r)}_getCachedCompiledPatterns(t){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new ec,this.collectPatterns(t,this._cachedCompiledPatterns)),this._cachedCompiledPatterns}},tw=class extends dc{hasMissingPatterns;patterns;_cachedCompiledPatterns;constructor(t,e,n,r,s){super(t,e,n,r),this.patterns=s.patterns,this.hasMissingPatterns=s.hasMissingPatterns,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}collectPatterns(t,e){for(const n of this.patterns)t.getRule(n).collectPatterns(t,e)}compile(t,e){return this._getCachedCompiledPatterns(t).compile(t)}compileAG(t,e,n,r){return this._getCachedCompiledPatterns(t).compileAG(t,n,r)}_getCachedCompiledPatterns(t){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new ec,this.collectPatterns(t,this._cachedCompiledPatterns)),this._cachedCompiledPatterns}},Ng=class extends dc{_begin;beginCaptures;_end;endHasBackReferences;endCaptures;applyEndPatternLast;hasMissingPatterns;patterns;_cachedCompiledPatterns;constructor(t,e,n,r,s,a,l,u,f,d){super(t,e,n,r),this._begin=new Xl(s,this.id),this.beginCaptures=a,this._end=new Xl(l||"",-1),this.endHasBackReferences=this._end.hasBackReferences,this.endCaptures=u,this.applyEndPatternLast=f||!1,this.patterns=d.patterns,this.hasMissingPatterns=d.hasMissingPatterns,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}get debugBeginRegExp(){return`${this._begin.source}`}get debugEndRegExp(){return`${this._end.source}`}getEndWithResolvedBackReferences(t,e){return this._end.resolveBackReferences(t,e)}collectPatterns(t,e){e.push(this._begin)}compile(t,e){return this._getCachedCompiledPatterns(t,e).compile(t)}compileAG(t,e,n,r){return this._getCachedCompiledPatterns(t,e).compileAG(t,n,r)}_getCachedCompiledPatterns(t,e){if(!this._cachedCompiledPatterns){this._cachedCompiledPatterns=new ec;for(const n of this.patterns)t.getRule(n).collectPatterns(t,this._cachedCompiledPatterns);this.applyEndPatternLast?this._cachedCompiledPatterns.push(this._end.hasBackReferences?this._end.clone():this._end):this._cachedCompiledPatterns.unshift(this._end.hasBackReferences?this._end.clone():this._end)}return this._end.hasBackReferences&&(this.applyEndPatternLast?this._cachedCompiledPatterns.setSource(this._cachedCompiledPatterns.length()-1,e):this._cachedCompiledPatterns.setSource(0,e)),this._cachedCompiledPatterns}},zf=class extends dc{_begin;beginCaptures;whileCaptures;_while;whileHasBackReferences;hasMissingPatterns;patterns;_cachedCompiledPatterns;_cachedCompiledWhilePatterns;constructor(t,e,n,r,s,a,l,u,f){super(t,e,n,r),this._begin=new Xl(s,this.id),this.beginCaptures=a,this.whileCaptures=u,this._while=new Xl(l,lE),this.whileHasBackReferences=this._while.hasBackReferences,this.patterns=f.patterns,this.hasMissingPatterns=f.hasMissingPatterns,this._cachedCompiledPatterns=null,this._cachedCompiledWhilePatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null),this._cachedCompiledWhilePatterns&&(this._cachedCompiledWhilePatterns.dispose(),this._cachedCompiledWhilePatterns=null)}get debugBeginRegExp(){return`${this._begin.source}`}get debugWhileRegExp(){return`${this._while.source}`}getWhileWithResolvedBackReferences(t,e){return this._while.resolveBackReferences(t,e)}collectPatterns(t,e){e.push(this._begin)}compile(t,e){return this._getCachedCompiledPatterns(t).compile(t)}compileAG(t,e,n,r){return this._getCachedCompiledPatterns(t).compileAG(t,n,r)}_getCachedCompiledPatterns(t){if(!this._cachedCompiledPatterns){this._cachedCompiledPatterns=new ec;for(const e of this.patterns)t.getRule(e).collectPatterns(t,this._cachedCompiledPatterns)}return this._cachedCompiledPatterns}compileWhile(t,e){return this._getCachedCompiledWhilePatterns(t,e).compile(t)}compileWhileAG(t,e,n,r){return this._getCachedCompiledWhilePatterns(t,e).compileAG(t,n,r)}_getCachedCompiledWhilePatterns(t,e){return this._cachedCompiledWhilePatterns||(this._cachedCompiledWhilePatterns=new ec,this._cachedCompiledWhilePatterns.push(this._while.hasBackReferences?this._while.clone():this._while)),this._while.hasBackReferences&&this._cachedCompiledWhilePatterns.setSource(0,e||""),this._cachedCompiledWhilePatterns}},cE=class Cn{static createCaptureRule(e,n,r,s,a){return e.registerRule(l=>new lL(n,l,r,s,a))}static getCompiledRuleId(e,n,r){return e.id||n.registerRule(s=>{if(e.id=s,e.match)return new cL(e.$vscodeTextmateLocation,e.id,e.name,e.match,Cn._compileCaptures(e.captures,n,r));if(typeof e.begin>"u"){e.repository&&(r=Wk({},r,e.repository));let a=e.patterns;return typeof a>"u"&&e.include&&(a=[{include:e.include}]),new tw(e.$vscodeTextmateLocation,e.id,e.name,e.contentName,Cn._compilePatterns(a,n,r))}return e.while?new zf(e.$vscodeTextmateLocation,e.id,e.name,e.contentName,e.begin,Cn._compileCaptures(e.beginCaptures||e.captures,n,r),e.while,Cn._compileCaptures(e.whileCaptures||e.captures,n,r),Cn._compilePatterns(e.patterns,n,r)):new Ng(e.$vscodeTextmateLocation,e.id,e.name,e.contentName,e.begin,Cn._compileCaptures(e.beginCaptures||e.captures,n,r),e.end,Cn._compileCaptures(e.endCaptures||e.captures,n,r),e.applyEndPatternLast,Cn._compilePatterns(e.patterns,n,r))}),e.id}static _compileCaptures(e,n,r){let s=[];if(e){let a=0;for(const l in e){if(l==="$vscodeTextmateLocation")continue;const u=parseInt(l,10);u>a&&(a=u)}for(let l=0;l<=a;l++)s[l]=null;for(const l in e){if(l==="$vscodeTextmateLocation")continue;const u=parseInt(l,10);let f=0;e[l].patterns&&(f=Cn.getCompiledRuleId(e[l],n,r)),s[u]=Cn.createCaptureRule(n,e[l].$vscodeTextmateLocation,e[l].name,e[l].contentName,f)}}return s}static _compilePatterns(e,n,r){let s=[];if(e)for(let a=0,l=e.length;a<l;a++){const u=e[a];let f=-1;if(u.include){const d=oE(u.include);switch(d.kind){case 0:case 1:f=Cn.getCompiledRuleId(r[u.include],n,r);break;case 2:let m=r[d.ruleName];m&&(f=Cn.getCompiledRuleId(m,n,r));break;case 3:case 4:const p=d.scopeName,y=d.kind===4?d.ruleName:null,g=n.getExternalGrammar(p,r);if(g)if(y){let v=g.repository[y];v&&(f=Cn.getCompiledRuleId(v,n,g.repository))}else f=Cn.getCompiledRuleId(g.repository.$self,n,g.repository);break}}else f=Cn.getCompiledRuleId(u,n,r);if(f!==-1){const d=n.getRule(f);let m=!1;if((d instanceof tw||d instanceof Ng||d instanceof zf)&&d.hasMissingPatterns&&d.patterns.length===0&&(m=!0),m)continue;s.push(f)}}return{patterns:s,hasMissingPatterns:(e?e.length:0)!==s.length}}},Xl=class uE{source;ruleId;hasAnchor;hasBackReferences;_anchorCache;constructor(e,n){if(e&&typeof e=="string"){const r=e.length;let s=0,a=[],l=!1;for(let u=0;u<r;u++)if(e.charAt(u)==="\\"&&u+1<r){const d=e.charAt(u+1);d==="z"?(a.push(e.substring(s,u)),a.push("$(?!\\n)(?<!\\n)"),s=u+2):(d==="A"||d==="G")&&(l=!0),u++}this.hasAnchor=l,s===0?this.source=e:(a.push(e.substring(s,r)),this.source=a.join(""))}else this.hasAnchor=!1,this.source=e;this.hasAnchor?this._anchorCache=this._buildAnchorCache():this._anchorCache=null,this.ruleId=n,typeof this.source=="string"?this.hasBackReferences=aL.test(this.source):this.hasBackReferences=!1}clone(){return new uE(this.source,this.ruleId)}setSource(e){this.source!==e&&(this.source=e,this.hasAnchor&&(this._anchorCache=this._buildAnchorCache()))}resolveBackReferences(e,n){if(typeof this.source!="string")throw new Error("This method should only be called if the source is a string");let r=n.map(s=>e.substring(s.start,s.end));return ew.lastIndex=0,this.source.replace(ew,(s,a)=>nE(r[parseInt(a,10)]||""))}_buildAnchorCache(){if(typeof this.source!="string")throw new Error("This method should only be called if the source is a string");let e=[],n=[],r=[],s=[],a,l,u,f;for(a=0,l=this.source.length;a<l;a++)u=this.source.charAt(a),e[a]=u,n[a]=u,r[a]=u,s[a]=u,u==="\\"&&a+1<l&&(f=this.source.charAt(a+1),f==="A"?(e[a+1]="",n[a+1]="",r[a+1]="A",s[a+1]="A"):f==="G"?(e[a+1]="",n[a+1]="G",r[a+1]="",s[a+1]="G"):(e[a+1]=f,n[a+1]=f,r[a+1]=f,s[a+1]=f),a++);return{A0_G0:e.join(""),A0_G1:n.join(""),A1_G0:r.join(""),A1_G1:s.join("")}}resolveAnchors(e,n){return!this.hasAnchor||!this._anchorCache||typeof this.source!="string"?this.source:e?n?this._anchorCache.A1_G1:this._anchorCache.A1_G0:n?this._anchorCache.A0_G1:this._anchorCache.A0_G0}},ec=class{_items;_hasAnchors;_cached;_anchorCache;constructor(){this._items=[],this._hasAnchors=!1,this._cached=null,this._anchorCache={A0_G0:null,A0_G1:null,A1_G0:null,A1_G1:null}}dispose(){this._disposeCaches()}_disposeCaches(){this._cached&&(this._cached.dispose(),this._cached=null),this._anchorCache.A0_G0&&(this._anchorCache.A0_G0.dispose(),this._anchorCache.A0_G0=null),this._anchorCache.A0_G1&&(this._anchorCache.A0_G1.dispose(),this._anchorCache.A0_G1=null),this._anchorCache.A1_G0&&(this._anchorCache.A1_G0.dispose(),this._anchorCache.A1_G0=null),this._anchorCache.A1_G1&&(this._anchorCache.A1_G1.dispose(),this._anchorCache.A1_G1=null)}push(t){this._items.push(t),this._hasAnchors=this._hasAnchors||t.hasAnchor}unshift(t){this._items.unshift(t),this._hasAnchors=this._hasAnchors||t.hasAnchor}length(){return this._items.length}setSource(t,e){this._items[t].source!==e&&(this._disposeCaches(),this._items[t].setSource(e))}compile(t){if(!this._cached){let e=this._items.map(n=>n.source);this._cached=new nw(t,e,this._items.map(n=>n.ruleId))}return this._cached}compileAG(t,e,n){return this._hasAnchors?e?n?(this._anchorCache.A1_G1||(this._anchorCache.A1_G1=this._resolveAnchors(t,e,n)),this._anchorCache.A1_G1):(this._anchorCache.A1_G0||(this._anchorCache.A1_G0=this._resolveAnchors(t,e,n)),this._anchorCache.A1_G0):n?(this._anchorCache.A0_G1||(this._anchorCache.A0_G1=this._resolveAnchors(t,e,n)),this._anchorCache.A0_G1):(this._anchorCache.A0_G0||(this._anchorCache.A0_G0=this._resolveAnchors(t,e,n)),this._anchorCache.A0_G0):this.compile(t)}_resolveAnchors(t,e,n){let r=this._items.map(s=>s.resolveAnchors(e,n));return new nw(t,r,this._items.map(s=>s.ruleId))}},nw=class{constructor(t,e,n){this.regExps=e,this.rules=n,this.scanner=t.createOnigScanner(e)}scanner;dispose(){typeof this.scanner.dispose=="function"&&this.scanner.dispose()}toString(){const t=[];for(let e=0,n=this.rules.length;e<n;e++)t.push("   - "+this.rules[e]+": "+this.regExps[e]);return t.join(`
`)}findNextMatchSync(t,e,n){const r=this.scanner.findNextMatchSync(t,e,n);return r?{ruleId:this.rules[r.index],captureIndices:r.captureIndices}:null}},xm=class{constructor(t,e){this.languageId=t,this.tokenType=e}},uL=class Mg{_defaultAttributes;_embeddedLanguagesMatcher;constructor(e,n){this._defaultAttributes=new xm(e,8),this._embeddedLanguagesMatcher=new fL(Object.entries(n||{}))}getDefaultAttributes(){return this._defaultAttributes}getBasicScopeAttributes(e){return e===null?Mg._NULL_SCOPE_METADATA:this._getBasicScopeAttributes.get(e)}static _NULL_SCOPE_METADATA=new xm(0,0);_getBasicScopeAttributes=new rE(e=>{const n=this._scopeToLanguage(e),r=this._toStandardTokenType(e);return new xm(n,r)});_scopeToLanguage(e){return this._embeddedLanguagesMatcher.match(e)||0}_toStandardTokenType(e){const n=e.match(Mg.STANDARD_TOKEN_TYPE_REGEXP);if(!n)return 8;switch(n[1]){case"comment":return 1;case"string":return 2;case"regex":return 3;case"meta.embedded":return 0}throw new Error("Unexpected match for standard token type!")}static STANDARD_TOKEN_TYPE_REGEXP=/\b(comment|string|regex|meta\.embedded)\b/},fL=class{values;scopesRegExp;constructor(t){if(t.length===0)this.values=null,this.scopesRegExp=null;else{this.values=new Map(t);const e=t.map(([n,r])=>nE(n));e.sort(),e.reverse(),this.scopesRegExp=new RegExp(`^((${e.join(")|(")}))($|\\.)`,"")}}match(t){if(!this.scopesRegExp)return;const e=t.match(this.scopesRegExp);if(e)return this.values.get(e[1])}},rw=class{constructor(t,e){this.stack=t,this.stoppedEarly=e}};function fE(t,e,n,r,s,a,l,u){const f=e.content.length;let d=!1,m=-1;if(l){const g=dL(t,e,n,r,s,a);s=g.stack,r=g.linePos,n=g.isFirstLine,m=g.anchorPosition}const p=Date.now();for(;!d;){if(u!==0&&Date.now()-p>u)return new rw(s,!0);y()}return new rw(s,!1);function y(){const g=hL(t,e,n,r,s,m);if(!g){a.produce(s,f),d=!0;return}const v=g.captureIndices,w=g.matchedRuleId,E=v&&v.length>0?v[0].end>r:!1;if(w===oL){const k=s.getRule(t);a.produce(s,v[0].start),s=s.withContentNameScopesList(s.nameScopesList),Sl(t,e,n,s,a,k.endCaptures,v),a.produce(s,v[0].end);const C=s;if(s=s.parent,m=C.getAnchorPos(),!E&&C.getEnterPos()===r){s=C,a.produce(s,f),d=!0;return}}else{const k=t.getRule(w);a.produce(s,v[0].start);const C=s,T=k.getName(e.content,v),D=s.contentNameScopesList.pushAttributed(T,t);if(s=s.push(w,r,m,v[0].end===f,null,D,D),k instanceof Ng){const N=k;Sl(t,e,n,s,a,N.beginCaptures,v),a.produce(s,v[0].end),m=v[0].end;const R=N.getContentName(e.content,v),$=D.pushAttributed(R,t);if(s=s.withContentNameScopesList($),N.endHasBackReferences&&(s=s.withEndRule(N.getEndWithResolvedBackReferences(e.content,v))),!E&&C.hasSameRuleAs(s)){s=s.pop(),a.produce(s,f),d=!0;return}}else if(k instanceof zf){const N=k;Sl(t,e,n,s,a,N.beginCaptures,v),a.produce(s,v[0].end),m=v[0].end;const R=N.getContentName(e.content,v),$=D.pushAttributed(R,t);if(s=s.withContentNameScopesList($),N.whileHasBackReferences&&(s=s.withEndRule(N.getWhileWithResolvedBackReferences(e.content,v))),!E&&C.hasSameRuleAs(s)){s=s.pop(),a.produce(s,f),d=!0;return}}else if(Sl(t,e,n,s,a,k.captures,v),a.produce(s,v[0].end),s=s.pop(),!E){s=s.safePop(),a.produce(s,f),d=!0;return}}v[0].end>r&&(r=v[0].end,n=!1)}}function dL(t,e,n,r,s,a){let l=s.beginRuleCapturedEOL?0:-1;const u=[];for(let f=s;f;f=f.pop()){const d=f.getRule(t);d instanceof zf&&u.push({rule:d,stack:f})}for(let f=u.pop();f;f=u.pop()){const{ruleScanner:d,findOptions:m}=gL(f.rule,t,f.stack.endRule,n,r===l),p=d.findNextMatchSync(e,r,m);if(p){if(p.ruleId!==lE){s=f.stack.pop();break}p.captureIndices&&p.captureIndices.length&&(a.produce(f.stack,p.captureIndices[0].start),Sl(t,e,n,f.stack,a,f.rule.whileCaptures,p.captureIndices),a.produce(f.stack,p.captureIndices[0].end),l=p.captureIndices[0].end,p.captureIndices[0].end>r&&(r=p.captureIndices[0].end,n=!1))}else{s=f.stack.pop();break}}return{stack:s,linePos:r,anchorPosition:l,isFirstLine:n}}function hL(t,e,n,r,s,a){const l=pL(t,e,n,r,s,a),u=t.getInjections();if(u.length===0)return l;const f=mL(u,t,e,n,r,s,a);if(!f)return l;if(!l)return f;const d=l.captureIndices[0].start,m=f.captureIndices[0].start;return m<d||f.priorityMatch&&m===d?f:l}function pL(t,e,n,r,s,a){const l=s.getRule(t),{ruleScanner:u,findOptions:f}=dE(l,t,s.endRule,n,r===a),d=u.findNextMatchSync(e,r,f);return d?{captureIndices:d.captureIndices,matchedRuleId:d.ruleId}:null}function mL(t,e,n,r,s,a,l){let u=Number.MAX_VALUE,f=null,d,m=0;const p=a.contentNameScopesList.getScopeNames();for(let y=0,g=t.length;y<g;y++){const v=t[y];if(!v.matcher(p))continue;const w=e.getRule(v.ruleId),{ruleScanner:E,findOptions:k}=dE(w,e,null,r,s===l),C=E.findNextMatchSync(n,s,k);if(!C)continue;const T=C.captureIndices[0].start;if(!(T>=u)&&(u=T,f=C.captureIndices,d=C.ruleId,m=v.priority,u===s))break}return f?{priorityMatch:m===-1,captureIndices:f,matchedRuleId:d}:null}function dE(t,e,n,r,s){return{ruleScanner:t.compileAG(e,n,r,s),findOptions:0}}function gL(t,e,n,r,s){return{ruleScanner:t.compileWhileAG(e,n,r,s),findOptions:0}}function Sl(t,e,n,r,s,a,l){if(a.length===0)return;const u=e.content,f=Math.min(a.length,l.length),d=[],m=l[0].end;for(let p=0;p<f;p++){const y=a[p];if(y===null)continue;const g=l[p];if(g.length===0)continue;if(g.start>m)break;for(;d.length>0&&d[d.length-1].endPos<=g.start;)s.produceFromScopes(d[d.length-1].scopes,d[d.length-1].endPos),d.pop();if(d.length>0?s.produceFromScopes(d[d.length-1].scopes,g.start):s.produce(r,g.start),y.retokenizeCapturedWithRuleId){const w=y.getName(u,l),E=r.contentNameScopesList.pushAttributed(w,t),k=y.getContentName(u,l),C=E.pushAttributed(k,t),T=r.push(y.retokenizeCapturedWithRuleId,g.start,-1,!1,null,E,C),D=t.createOnigString(u.substring(0,g.end));fE(t,D,n&&g.start===0,g.start,T,s,!1,0),aE(D);continue}const v=y.getName(u,l);if(v!==null){const E=(d.length>0?d[d.length-1].scopes:r.contentNameScopesList).pushAttributed(v,t);d.push(new yL(E,g.end))}}for(;d.length>0;)s.produceFromScopes(d[d.length-1].scopes,d[d.length-1].endPos),d.pop()}var yL=class{scopes;endPos;constructor(t,e){this.scopes=t,this.endPos=e}};function bL(t,e,n,r,s,a,l,u){return new vL(t,e,n,r,s,a,l,u)}function sw(t,e,n,r,s){const a=jf(e,Pf),l=cE.getCompiledRuleId(n,r,s.repository);for(const u of a)t.push({debugSelector:e,matcher:u.matcher,ruleId:l,grammar:s,priority:u.priority})}function Pf(t,e){if(e.length<t.length)return!1;let n=0;return t.every(r=>{for(let s=n;s<e.length;s++)if(_L(e[s],r))return n=s+1,!0;return!1})}function _L(t,e){if(!t)return!1;if(t===e)return!0;const n=e.length;return t.length>n&&t.substr(0,n)===e&&t[n]==="."}var vL=class{constructor(t,e,n,r,s,a,l,u){if(this._rootScopeName=t,this.balancedBracketSelectors=a,this._onigLib=u,this._basicScopeAttributesProvider=new uL(n,r),this._rootId=-1,this._lastRuleId=0,this._ruleId2desc=[null],this._includedGrammars={},this._grammarRepository=l,this._grammar=iw(e,null),this._injections=null,this._tokenTypeMatchers=[],s)for(const f of Object.keys(s)){const d=jf(f,Pf);for(const m of d)this._tokenTypeMatchers.push({matcher:m.matcher,type:s[f]})}}_rootId;_lastRuleId;_ruleId2desc;_includedGrammars;_grammarRepository;_grammar;_injections;_basicScopeAttributesProvider;_tokenTypeMatchers;get themeProvider(){return this._grammarRepository}dispose(){for(const t of this._ruleId2desc)t&&t.dispose()}createOnigScanner(t){return this._onigLib.createOnigScanner(t)}createOnigString(t){return this._onigLib.createOnigString(t)}getMetadataForScope(t){return this._basicScopeAttributesProvider.getBasicScopeAttributes(t)}_collectInjections(){const t={lookup:s=>s===this._rootScopeName?this._grammar:this.getExternalGrammar(s),injections:s=>this._grammarRepository.injections(s)},e=[],n=this._rootScopeName,r=t.lookup(n);if(r){const s=r.injections;if(s)for(let l in s)sw(e,l,s[l],this,r);const a=this._grammarRepository.injections(n);a&&a.forEach(l=>{const u=this.getExternalGrammar(l);if(u){const f=u.injectionSelector;f&&sw(e,f,u,this,u)}})}return e.sort((s,a)=>s.priority-a.priority),e}getInjections(){return this._injections===null&&(this._injections=this._collectInjections()),this._injections}registerRule(t){const e=++this._lastRuleId,n=t(e);return this._ruleId2desc[e]=n,n}getRule(t){return this._ruleId2desc[t]}getExternalGrammar(t,e){if(this._includedGrammars[t])return this._includedGrammars[t];if(this._grammarRepository){const n=this._grammarRepository.lookup(t);if(n)return this._includedGrammars[t]=iw(n,e&&e.$base),this._includedGrammars[t]}}tokenizeLine(t,e,n=0){const r=this._tokenize(t,e,!1,n);return{tokens:r.lineTokens.getResult(r.ruleStack,r.lineLength),ruleStack:r.ruleStack,stoppedEarly:r.stoppedEarly}}tokenizeLine2(t,e,n=0){const r=this._tokenize(t,e,!0,n);return{tokens:r.lineTokens.getBinaryResult(r.ruleStack,r.lineLength),ruleStack:r.ruleStack,stoppedEarly:r.stoppedEarly}}_tokenize(t,e,n,r){this._rootId===-1&&(this._rootId=cE.getCompiledRuleId(this._grammar.repository.$self,this,this._grammar.repository),this.getInjections());let s;if(!e||e===Dg.NULL){s=!0;const d=this._basicScopeAttributesProvider.getDefaultAttributes(),m=this.themeProvider.getDefaults(),p=ao.set(0,d.languageId,d.tokenType,null,m.fontStyle,m.foregroundId,m.backgroundId),y=this.getRule(this._rootId).getName(null,null);let g;y?g=Pl.createRootAndLookUpScopeName(y,p,this):g=Pl.createRoot("unknown",p),e=new Dg(null,this._rootId,-1,-1,!1,null,g,g)}else s=!1,e.reset();t=t+`
`;const a=this.createOnigString(t),l=a.content.length,u=new wL(n,t,this._tokenTypeMatchers,this.balancedBracketSelectors),f=fE(this,a,s,0,e,u,!0,r);return aE(a),{lineLength:l,lineTokens:u,ruleStack:f.stack,stoppedEarly:f.stoppedEarly}}};function iw(t,e){return t=Bj(t),t.repository=t.repository||{},t.repository.$self={$vscodeTextmateLocation:t.$vscodeTextmateLocation,patterns:t.patterns,name:t.scopeName},t.repository.$base=e||t.repository.$self,t}var Pl=class Zr{constructor(e,n,r){this.parent=e,this.scopePath=n,this.tokenAttributes=r}static fromExtension(e,n){let r=e,s=e?.scopePath??null;for(const a of n)s=vm.push(s,a.scopeNames),r=new Zr(r,s,a.encodedTokenAttributes);return r}static createRoot(e,n){return new Zr(null,new vm(null,e),n)}static createRootAndLookUpScopeName(e,n,r){const s=r.getMetadataForScope(e),a=new vm(null,e),l=r.themeProvider.themeMatch(a),u=Zr.mergeAttributes(n,s,l);return new Zr(null,a,u)}get scopeName(){return this.scopePath.scopeName}toString(){return this.getScopeNames().join(" ")}equals(e){return Zr.equals(this,e)}static equals(e,n){do{if(e===n||!e&&!n)return!0;if(!e||!n||e.scopeName!==n.scopeName||e.tokenAttributes!==n.tokenAttributes)return!1;e=e.parent,n=n.parent}while(!0)}static mergeAttributes(e,n,r){let s=-1,a=0,l=0;return r!==null&&(s=r.fontStyle,a=r.foregroundId,l=r.backgroundId),ao.set(e,n.languageId,n.tokenType,null,s,a,l)}pushAttributed(e,n){if(e===null)return this;if(e.indexOf(" ")===-1)return Zr._pushAttributed(this,e,n);const r=e.split(/ /g);let s=this;for(const a of r)s=Zr._pushAttributed(s,a,n);return s}static _pushAttributed(e,n,r){const s=r.getMetadataForScope(n),a=e.scopePath.push(n),l=r.themeProvider.themeMatch(a),u=Zr.mergeAttributes(e.tokenAttributes,s,l);return new Zr(e,a,u)}getScopeNames(){return this.scopePath.getSegments()}getExtensionIfDefined(e){const n=[];let r=this;for(;r&&r!==e;)n.push({encodedTokenAttributes:r.tokenAttributes,scopeNames:r.scopePath.getExtensionIfDefined(r.parent?.scopePath??null)}),r=r.parent;return r===e?n.reverse():void 0}},Dg=class ji{constructor(e,n,r,s,a,l,u,f){this.parent=e,this.ruleId=n,this.beginRuleCapturedEOL=a,this.endRule=l,this.nameScopesList=u,this.contentNameScopesList=f,this.depth=this.parent?this.parent.depth+1:1,this._enterPos=r,this._anchorPos=s}_stackElementBrand=void 0;static NULL=new ji(null,0,0,0,!1,null,null,null);_enterPos;_anchorPos;depth;equals(e){return e===null?!1:ji._equals(this,e)}static _equals(e,n){return e===n?!0:this._structuralEquals(e,n)?Pl.equals(e.contentNameScopesList,n.contentNameScopesList):!1}static _structuralEquals(e,n){do{if(e===n||!e&&!n)return!0;if(!e||!n||e.depth!==n.depth||e.ruleId!==n.ruleId||e.endRule!==n.endRule)return!1;e=e.parent,n=n.parent}while(!0)}clone(){return this}static _reset(e){for(;e;)e._enterPos=-1,e._anchorPos=-1,e=e.parent}reset(){ji._reset(this)}pop(){return this.parent}safePop(){return this.parent?this.parent:this}push(e,n,r,s,a,l,u){return new ji(this,e,n,r,s,a,l,u)}getEnterPos(){return this._enterPos}getAnchorPos(){return this._anchorPos}getRule(e){return e.getRule(this.ruleId)}toString(){const e=[];return this._writeString(e,0),"["+e.join(",")+"]"}_writeString(e,n){return this.parent&&(n=this.parent._writeString(e,n)),e[n++]=`(${this.ruleId}, ${this.nameScopesList?.toString()}, ${this.contentNameScopesList?.toString()})`,n}withContentNameScopesList(e){return this.contentNameScopesList===e?this:this.parent.push(this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,this.endRule,this.nameScopesList,e)}withEndRule(e){return this.endRule===e?this:new ji(this.parent,this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,e,this.nameScopesList,this.contentNameScopesList)}hasSameRuleAs(e){let n=this;for(;n&&n._enterPos===e._enterPos;){if(n.ruleId===e.ruleId)return!0;n=n.parent}return!1}toStateStackFrame(){return{ruleId:this.ruleId,beginRuleCapturedEOL:this.beginRuleCapturedEOL,endRule:this.endRule,nameScopesList:this.nameScopesList?.getExtensionIfDefined(this.parent?.nameScopesList??null)??[],contentNameScopesList:this.contentNameScopesList?.getExtensionIfDefined(this.nameScopesList)??[]}}static pushFrame(e,n){const r=Pl.fromExtension(e?.nameScopesList??null,n.nameScopesList);return new ji(e,n.ruleId,n.enterPos??-1,n.anchorPos??-1,n.beginRuleCapturedEOL,n.endRule,r,Pl.fromExtension(r,n.contentNameScopesList))}},xL=class{balancedBracketScopes;unbalancedBracketScopes;allowAny=!1;constructor(t,e){this.balancedBracketScopes=t.flatMap(n=>n==="*"?(this.allowAny=!0,[]):jf(n,Pf).map(r=>r.matcher)),this.unbalancedBracketScopes=e.flatMap(n=>jf(n,Pf).map(r=>r.matcher))}get matchesAlways(){return this.allowAny&&this.unbalancedBracketScopes.length===0}get matchesNever(){return this.balancedBracketScopes.length===0&&!this.allowAny}match(t){for(const e of this.unbalancedBracketScopes)if(e(t))return!1;for(const e of this.balancedBracketScopes)if(e(t))return!0;return this.allowAny}},wL=class{constructor(t,e,n,r){this.balancedBracketSelectors=r,this._emitBinaryTokens=t,this._tokenTypeOverrides=n,this._lineText=null,this._tokens=[],this._binaryTokens=[],this._lastTokenEndIndex=0}_emitBinaryTokens;_lineText;_tokens;_binaryTokens;_lastTokenEndIndex;_tokenTypeOverrides;produce(t,e){this.produceFromScopes(t.contentNameScopesList,e)}produceFromScopes(t,e){if(this._lastTokenEndIndex>=e)return;if(this._emitBinaryTokens){let r=t?.tokenAttributes??0,s=!1;if(this.balancedBracketSelectors?.matchesAlways&&(s=!0),this._tokenTypeOverrides.length>0||this.balancedBracketSelectors&&!this.balancedBracketSelectors.matchesAlways&&!this.balancedBracketSelectors.matchesNever){const a=t?.getScopeNames()??[];for(const l of this._tokenTypeOverrides)l.matcher(a)&&(r=ao.set(r,0,l.type,null,-1,0,0));this.balancedBracketSelectors&&(s=this.balancedBracketSelectors.match(a))}if(s&&(r=ao.set(r,0,8,s,-1,0,0)),this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-1]===r){this._lastTokenEndIndex=e;return}this._binaryTokens.push(this._lastTokenEndIndex),this._binaryTokens.push(r),this._lastTokenEndIndex=e;return}const n=t?.getScopeNames()??[];this._tokens.push({startIndex:this._lastTokenEndIndex,endIndex:e,scopes:n}),this._lastTokenEndIndex=e}getResult(t,e){return this._tokens.length>0&&this._tokens[this._tokens.length-1].startIndex===e-1&&this._tokens.pop(),this._tokens.length===0&&(this._lastTokenEndIndex=-1,this.produce(t,e),this._tokens[this._tokens.length-1].startIndex=0),this._tokens}getBinaryResult(t,e){this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-2]===e-1&&(this._binaryTokens.pop(),this._binaryTokens.pop()),this._binaryTokens.length===0&&(this._lastTokenEndIndex=-1,this.produce(t,e),this._binaryTokens[this._binaryTokens.length-2]=0);const n=new Uint32Array(this._binaryTokens.length);for(let r=0,s=this._binaryTokens.length;r<s;r++)n[r]=this._binaryTokens[r];return n}},SL=class{constructor(t,e){this._onigLib=e,this._theme=t}_grammars=new Map;_rawGrammars=new Map;_injectionGrammars=new Map;_theme;dispose(){for(const t of this._grammars.values())t.dispose()}setTheme(t){this._theme=t}getColorMap(){return this._theme.getColorMap()}addGrammar(t,e){this._rawGrammars.set(t.scopeName,t),e&&this._injectionGrammars.set(t.scopeName,e)}lookup(t){return this._rawGrammars.get(t)}injections(t){return this._injectionGrammars.get(t)}getDefaults(){return this._theme.getDefaults()}themeMatch(t){return this._theme.match(t)}grammarForScopeName(t,e,n,r,s){if(!this._grammars.has(t)){let a=this._rawGrammars.get(t);if(!a)return null;this._grammars.set(t,bL(t,a,e,n,r,s,this,this._onigLib))}return this._grammars.get(t)}},kL=class{_options;_syncRegistry;_ensureGrammarCache;constructor(e){this._options=e,this._syncRegistry=new SL(Df.createFromRawTheme(e.theme,e.colorMap),e.onigLib),this._ensureGrammarCache=new Map}dispose(){this._syncRegistry.dispose()}setTheme(e,n){this._syncRegistry.setTheme(Df.createFromRawTheme(e,n))}getColorMap(){return this._syncRegistry.getColorMap()}loadGrammarWithEmbeddedLanguages(e,n,r){return this.loadGrammarWithConfiguration(e,n,{embeddedLanguages:r})}loadGrammarWithConfiguration(e,n,r){return this._loadGrammar(e,n,r.embeddedLanguages,r.tokenTypes,new xL(r.balancedBracketSelectors||[],r.unbalancedBracketSelectors||[]))}loadGrammar(e){return this._loadGrammar(e,0,null,null,null)}_loadGrammar(e,n,r,s,a){const l=new Xj(this._syncRegistry,e);for(;l.Q.length>0;)l.Q.map(u=>this._loadSingleGrammar(u.scopeName)),l.processQueue();return this._grammarForScopeName(e,n,r,s,a)}_loadSingleGrammar(e){this._ensureGrammarCache.has(e)||(this._doLoadSingleGrammar(e),this._ensureGrammarCache.set(e,!0))}_doLoadSingleGrammar(e){const n=this._options.loadGrammar(e);if(n){const r=typeof this._options.getInjections=="function"?this._options.getInjections(e):void 0;this._syncRegistry.addGrammar(n,r)}}addGrammar(e,n=[],r=0,s=null){return this._syncRegistry.addGrammar(e,n),this._grammarForScopeName(e.scopeName,r,s)}_grammarForScopeName(e,n=0,r=null,s=null,a=null){return this._syncRegistry.grammarForScopeName(e,n,r,s,a)}},jg=Dg.NULL;const EL=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"];class hc{constructor(e,n,r){this.normal=n,this.property=e,r&&(this.space=r)}}hc.prototype.normal={};hc.prototype.property={};hc.prototype.space=void 0;function hE(t,e){const n={},r={};for(const s of t)Object.assign(n,s.property),Object.assign(r,s.normal);return new hc(n,r,e)}function Lg(t){return t.toLowerCase()}class tr{constructor(e,n){this.attribute=n,this.property=e}}tr.prototype.attribute="";tr.prototype.booleanish=!1;tr.prototype.boolean=!1;tr.prototype.commaOrSpaceSeparated=!1;tr.prototype.commaSeparated=!1;tr.prototype.defined=!1;tr.prototype.mustUseProperty=!1;tr.prototype.number=!1;tr.prototype.overloadedBoolean=!1;tr.prototype.property="";tr.prototype.spaceSeparated=!1;tr.prototype.space=void 0;let CL=0;const Fe=Ji(),Ht=Ji(),zg=Ji(),be=Ji(),Et=Ji(),Xa=Ji(),fr=Ji();function Ji(){return 2**++CL}const Pg=Object.freeze(Object.defineProperty({__proto__:null,boolean:Fe,booleanish:Ht,commaOrSpaceSeparated:fr,commaSeparated:Xa,number:be,overloadedBoolean:zg,spaceSeparated:Et},Symbol.toStringTag,{value:"Module"})),wm=Object.keys(Pg);class Hy extends tr{constructor(e,n,r,s){let a=-1;if(super(e,n),aw(this,"space",s),typeof r=="number")for(;++a<wm.length;){const l=wm[a];aw(this,wm[a],(r&Pg[l])===Pg[l])}}}Hy.prototype.defined=!0;function aw(t,e,n){n&&(t[e]=n)}function ho(t){const e={},n={};for(const[r,s]of Object.entries(t.properties)){const a=new Hy(r,t.transform(t.attributes||{},r),s,t.space);t.mustUseProperty&&t.mustUseProperty.includes(r)&&(a.mustUseProperty=!0),e[r]=a,n[Lg(r)]=r,n[Lg(a.attribute)]=r}return new hc(e,n,t.space)}const pE=ho({properties:{ariaActiveDescendant:null,ariaAtomic:Ht,ariaAutoComplete:null,ariaBusy:Ht,ariaChecked:Ht,ariaColCount:be,ariaColIndex:be,ariaColSpan:be,ariaControls:Et,ariaCurrent:null,ariaDescribedBy:Et,ariaDetails:null,ariaDisabled:Ht,ariaDropEffect:Et,ariaErrorMessage:null,ariaExpanded:Ht,ariaFlowTo:Et,ariaGrabbed:Ht,ariaHasPopup:null,ariaHidden:Ht,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Et,ariaLevel:be,ariaLive:null,ariaModal:Ht,ariaMultiLine:Ht,ariaMultiSelectable:Ht,ariaOrientation:null,ariaOwns:Et,ariaPlaceholder:null,ariaPosInSet:be,ariaPressed:Ht,ariaReadOnly:Ht,ariaRelevant:null,ariaRequired:Ht,ariaRoleDescription:Et,ariaRowCount:be,ariaRowIndex:be,ariaRowSpan:be,ariaSelected:Ht,ariaSetSize:be,ariaSort:null,ariaValueMax:be,ariaValueMin:be,ariaValueNow:be,ariaValueText:null,role:null},transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function mE(t,e){return e in t?t[e]:e}function gE(t,e){return mE(t,e.toLowerCase())}const TL=ho({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Xa,acceptCharset:Et,accessKey:Et,action:null,allow:null,allowFullScreen:Fe,allowPaymentRequest:Fe,allowUserMedia:Fe,alt:null,as:null,async:Fe,autoCapitalize:null,autoComplete:Et,autoFocus:Fe,autoPlay:Fe,blocking:Et,capture:null,charSet:null,checked:Fe,cite:null,className:Et,cols:be,colSpan:null,content:null,contentEditable:Ht,controls:Fe,controlsList:Et,coords:be|Xa,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Fe,defer:Fe,dir:null,dirName:null,disabled:Fe,download:zg,draggable:Ht,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Fe,formTarget:null,headers:Et,height:be,hidden:zg,high:be,href:null,hrefLang:null,htmlFor:Et,httpEquiv:Et,id:null,imageSizes:null,imageSrcSet:null,inert:Fe,inputMode:null,integrity:null,is:null,isMap:Fe,itemId:null,itemProp:Et,itemRef:Et,itemScope:Fe,itemType:Et,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Fe,low:be,manifest:null,max:null,maxLength:be,media:null,method:null,min:null,minLength:be,multiple:Fe,muted:Fe,name:null,nonce:null,noModule:Fe,noValidate:Fe,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Fe,optimum:be,pattern:null,ping:Et,placeholder:null,playsInline:Fe,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Fe,referrerPolicy:null,rel:Et,required:Fe,reversed:Fe,rows:be,rowSpan:be,sandbox:Et,scope:null,scoped:Fe,seamless:Fe,selected:Fe,shadowRootClonable:Fe,shadowRootDelegatesFocus:Fe,shadowRootMode:null,shape:null,size:be,sizes:null,slot:null,span:be,spellCheck:Ht,src:null,srcDoc:null,srcLang:null,srcSet:null,start:be,step:null,style:null,tabIndex:be,target:null,title:null,translate:null,type:null,typeMustMatch:Fe,useMap:null,value:Ht,width:be,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Et,axis:null,background:null,bgColor:null,border:be,borderColor:null,bottomMargin:be,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Fe,declare:Fe,event:null,face:null,frame:null,frameBorder:null,hSpace:be,leftMargin:be,link:null,longDesc:null,lowSrc:null,marginHeight:be,marginWidth:be,noResize:Fe,noHref:Fe,noShade:Fe,noWrap:Fe,object:null,profile:null,prompt:null,rev:null,rightMargin:be,rules:null,scheme:null,scrolling:Ht,standby:null,summary:null,text:null,topMargin:be,valueType:null,version:null,vAlign:null,vLink:null,vSpace:be,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Fe,disableRemotePlayback:Fe,prefix:null,property:null,results:be,security:null,unselectable:null},space:"html",transform:gE}),AL=ho({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:fr,accentHeight:be,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:be,amplitude:be,arabicForm:null,ascent:be,attributeName:null,attributeType:null,azimuth:be,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:be,by:null,calcMode:null,capHeight:be,className:Et,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:be,diffuseConstant:be,direction:null,display:null,dur:null,divisor:be,dominantBaseline:null,download:Fe,dx:null,dy:null,edgeMode:null,editable:null,elevation:be,enableBackground:null,end:null,event:null,exponent:be,externalResourcesRequired:null,fill:null,fillOpacity:be,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Xa,g2:Xa,glyphName:Xa,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:be,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:be,horizOriginX:be,horizOriginY:be,id:null,ideographic:be,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:be,k:be,k1:be,k2:be,k3:be,k4:be,kernelMatrix:fr,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:be,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:be,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:be,overlineThickness:be,paintOrder:null,panose1:null,path:null,pathLength:be,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Et,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:be,pointsAtY:be,pointsAtZ:be,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:fr,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:fr,rev:fr,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:fr,requiredFeatures:fr,requiredFonts:fr,requiredFormats:fr,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:be,specularExponent:be,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:be,strikethroughThickness:be,string:null,stroke:null,strokeDashArray:fr,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:be,strokeOpacity:be,strokeWidth:null,style:null,surfaceScale:be,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:fr,tabIndex:be,tableValues:null,target:null,targetX:be,targetY:be,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:fr,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:be,underlineThickness:be,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:be,values:null,vAlphabetic:be,vMathematical:be,vectorEffect:null,vHanging:be,vIdeographic:be,version:null,vertAdvY:be,vertOriginX:be,vertOriginY:be,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:be,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:mE}),yE=ho({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()}}),bE=ho({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:gE}),_E=ho({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()}}),RL={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},OL=/[A-Z]/g,ow=/-[a-z]/g,IL=/^data[-\w.:]+$/i;function vE(t,e){const n=Lg(e);let r=e,s=tr;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&IL.test(e)){if(e.charAt(4)==="-"){const a=e.slice(5).replace(ow,ML);r="data"+a.charAt(0).toUpperCase()+a.slice(1)}else{const a=e.slice(4);if(!ow.test(a)){let l=a.replace(OL,NL);l.charAt(0)!=="-"&&(l="-"+l),e="data"+l}}s=Hy}return new s(r,e)}function NL(t){return"-"+t.toLowerCase()}function ML(t){return t.charAt(1).toUpperCase()}const xE=hE([pE,TL,yE,bE,_E],"html"),pc=hE([pE,AL,yE,bE,_E],"svg"),lw={}.hasOwnProperty;function DL(t,e){const n=e||{};function r(s,...a){let l=r.invalid;const u=r.handlers;if(s&&lw.call(s,t)){const f=String(s[t]);l=lw.call(u,f)?u[f]:r.unknown}if(l)return l.call(this,s,...a)}return r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}const jL=/["&'<>`]/g,LL=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,zL=/[\x01-\t\v\f\x0E-\x1F\x7F\x81\x8D\x8F\x90\x9D\xA0-\uFFFF]/g,PL=/[|\\{}()[\]^$+*?.]/g,cw=new WeakMap;function BL(t,e){if(t=t.replace(e.subset?$L(e.subset):jL,r),e.subset||e.escapeOnly)return t;return t.replace(LL,n).replace(zL,r);function n(s,a,l){return e.format((s.charCodeAt(0)-55296)*1024+s.charCodeAt(1)-56320+65536,l.charCodeAt(a+2),e)}function r(s,a,l){return e.format(s.charCodeAt(0),l.charCodeAt(a+1),e)}}function $L(t){let e=cw.get(t);return e||(e=UL(t),cw.set(t,e)),e}function UL(t){const e=[];let n=-1;for(;++n<t.length;)e.push(t[n].replace(PL,"\\$&"));return new RegExp("(?:"+e.join("|")+")","g")}const qL=/[\dA-Fa-f]/;function FL(t,e,n){const r="&#x"+t.toString(16).toUpperCase();return n&&e&&!qL.test(String.fromCharCode(e))?r:r+";"}const VL=/\d/;function HL(t,e,n){const r="&#"+String(t);return n&&e&&!VL.test(String.fromCharCode(e))?r:r+";"}const GL=["AElig","AMP","Aacute","Acirc","Agrave","Aring","Atilde","Auml","COPY","Ccedil","ETH","Eacute","Ecirc","Egrave","Euml","GT","Iacute","Icirc","Igrave","Iuml","LT","Ntilde","Oacute","Ocirc","Ograve","Oslash","Otilde","Ouml","QUOT","REG","THORN","Uacute","Ucirc","Ugrave","Uuml","Yacute","aacute","acirc","acute","aelig","agrave","amp","aring","atilde","auml","brvbar","ccedil","cedil","cent","copy","curren","deg","divide","eacute","ecirc","egrave","eth","euml","frac12","frac14","frac34","gt","iacute","icirc","iexcl","igrave","iquest","iuml","laquo","lt","macr","micro","middot","nbsp","not","ntilde","oacute","ocirc","ograve","ordf","ordm","oslash","otilde","ouml","para","plusmn","pound","quot","raquo","reg","sect","shy","sup1","sup2","sup3","szlig","thorn","times","uacute","ucirc","ugrave","uml","uuml","yacute","yen","yuml"],Sm={nbsp:"",iexcl:"",cent:"",pound:"",curren:"",yen:"",brvbar:"",sect:"",uml:"",copy:"",ordf:"",laquo:"",not:"",shy:"",reg:"",macr:"",deg:"",plusmn:"",sup2:"",sup3:"",acute:"",micro:"",para:"",middot:"",cedil:"",sup1:"",ordm:"",raquo:"",frac14:"",frac12:"",frac34:"",iquest:"",Agrave:"",Aacute:"",Acirc:"",Atilde:"",Auml:"",Aring:"",AElig:"",Ccedil:"",Egrave:"",Eacute:"",Ecirc:"",Euml:"",Igrave:"",Iacute:"",Icirc:"",Iuml:"",ETH:"",Ntilde:"",Ograve:"",Oacute:"",Ocirc:"",Otilde:"",Ouml:"",times:"",Oslash:"",Ugrave:"",Uacute:"",Ucirc:"",Uuml:"",Yacute:"",THORN:"",szlig:"",agrave:"",aacute:"",acirc:"",atilde:"",auml:"",aring:"",aelig:"",ccedil:"",egrave:"",eacute:"",ecirc:"",euml:"",igrave:"",iacute:"",icirc:"",iuml:"",eth:"",ntilde:"",ograve:"",oacute:"",ocirc:"",otilde:"",ouml:"",divide:"",oslash:"",ugrave:"",uacute:"",ucirc:"",uuml:"",yacute:"",thorn:"",yuml:"",fnof:"",Alpha:"",Beta:"",Gamma:"",Delta:"",Epsilon:"",Zeta:"",Eta:"",Theta:"",Iota:"",Kappa:"",Lambda:"",Mu:"",Nu:"",Xi:"",Omicron:"",Pi:"",Rho:"",Sigma:"",Tau:"",Upsilon:"",Phi:"",Chi:"",Psi:"",Omega:"",alpha:"",beta:"",gamma:"",delta:"",epsilon:"",zeta:"",eta:"",theta:"",iota:"",kappa:"",lambda:"",mu:"",nu:"",xi:"",omicron:"",pi:"",rho:"",sigmaf:"",sigma:"",tau:"",upsilon:"",phi:"",chi:"",psi:"",omega:"",thetasym:"",upsih:"",piv:"",bull:"",hellip:"",prime:"",Prime:"",oline:"",frasl:"",weierp:"",image:"",real:"",trade:"",alefsym:"",larr:"",uarr:"",rarr:"",darr:"",harr:"",crarr:"",lArr:"",uArr:"",rArr:"",dArr:"",hArr:"",forall:"",part:"",exist:"",empty:"",nabla:"",isin:"",notin:"",ni:"",prod:"",sum:"",minus:"",lowast:"",radic:"",prop:"",infin:"",ang:"",and:"",or:"",cap:"",cup:"",int:"",there4:"",sim:"",cong:"",asymp:"",ne:"",equiv:"",le:"",ge:"",sub:"",sup:"",nsub:"",sube:"",supe:"",oplus:"",otimes:"",perp:"",sdot:"",lceil:"",rceil:"",lfloor:"",rfloor:"",lang:"",rang:"",loz:"",spades:"",clubs:"",hearts:"",diams:"",quot:'"',amp:"&",lt:"<",gt:">",OElig:"",oelig:"",Scaron:"",scaron:"",Yuml:"",circ:"",tilde:"",ensp:"",emsp:"",thinsp:"",zwnj:"",zwj:"",lrm:"",rlm:"",ndash:"",mdash:"",lsquo:"",rsquo:"",sbquo:"",ldquo:"",rdquo:"",bdquo:"",dagger:"",Dagger:"",permil:"",lsaquo:"",rsaquo:"",euro:""},KL=["cent","copy","divide","gt","lt","not","para","times"],wE={}.hasOwnProperty,Bg={};let Pu;for(Pu in Sm)wE.call(Sm,Pu)&&(Bg[Sm[Pu]]=Pu);const ZL=/[^\dA-Za-z]/;function JL(t,e,n,r){const s=String.fromCharCode(t);if(wE.call(Bg,s)){const a=Bg[s],l="&"+a;return n&&GL.includes(a)&&!KL.includes(a)&&(!r||e&&e!==61&&ZL.test(String.fromCharCode(e)))?l:l+";"}return""}function QL(t,e,n){let r=FL(t,e,n.omitOptionalSemicolons),s;if((n.useNamedReferences||n.useShortestReferences)&&(s=JL(t,e,n.omitOptionalSemicolons,n.attribute)),(n.useShortestReferences||!s)&&n.useShortestReferences){const a=HL(t,e,n.omitOptionalSemicolons);a.length<r.length&&(r=a)}return s&&(!n.useShortestReferences||s.length<r.length)?s:r}function eo(t,e){return BL(t,Object.assign({format:QL},e))}const YL=/^>|^->|<!--|-->|--!>|<!-$/g,WL=[">"],XL=["<",">"];function e5(t,e,n,r){return r.settings.bogusComments?"<?"+eo(t.value,Object.assign({},r.settings.characterReferences,{subset:WL}))+">":"<!--"+t.value.replace(YL,s)+"-->";function s(a){return eo(a,Object.assign({},r.settings.characterReferences,{subset:XL}))}}function t5(t,e,n,r){return"<!"+(r.settings.upperDoctype?"DOCTYPE":"doctype")+(r.settings.tightDoctype?"":" ")+"html>"}function Bf(t,e){const n=String(t);if(typeof e!="string")throw new TypeError("Expected character");let r=0,s=n.indexOf(e);for(;s!==-1;)r++,s=n.indexOf(e,s+e.length);return r}function SE(t,e){const n=e||{};return(t[t.length-1]===""?[...t,""]:t).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}function kE(t){return t.join(" ").trim()}const n5=/[ \t\n\f\r]/g;function md(t){return typeof t=="object"?t.type==="text"?uw(t.value):!1:uw(t)}function uw(t){return t.replace(n5,"")===""}const nn=CE(1),EE=CE(-1),r5=[];function CE(t){return e;function e(n,r,s){const a=n?n.children:r5;let l=(r||0)+t,u=a[l];if(!s)for(;u&&md(u);)l+=t,u=a[l];return u}}const s5={}.hasOwnProperty;function TE(t){return e;function e(n,r,s){return s5.call(t,n.tagName)&&t[n.tagName](n,r,s)}}const Gy=TE({body:a5,caption:km,colgroup:km,dd:u5,dt:c5,head:km,html:i5,li:l5,optgroup:f5,option:d5,p:o5,rp:fw,rt:fw,tbody:p5,td:dw,tfoot:m5,th:dw,thead:h5,tr:g5});function km(t,e,n){const r=nn(n,e,!0);return!r||r.type!=="comment"&&!(r.type==="text"&&md(r.value.charAt(0)))}function i5(t,e,n){const r=nn(n,e);return!r||r.type!=="comment"}function a5(t,e,n){const r=nn(n,e);return!r||r.type!=="comment"}function o5(t,e,n){const r=nn(n,e);return r?r.type==="element"&&(r.tagName==="address"||r.tagName==="article"||r.tagName==="aside"||r.tagName==="blockquote"||r.tagName==="details"||r.tagName==="div"||r.tagName==="dl"||r.tagName==="fieldset"||r.tagName==="figcaption"||r.tagName==="figure"||r.tagName==="footer"||r.tagName==="form"||r.tagName==="h1"||r.tagName==="h2"||r.tagName==="h3"||r.tagName==="h4"||r.tagName==="h5"||r.tagName==="h6"||r.tagName==="header"||r.tagName==="hgroup"||r.tagName==="hr"||r.tagName==="main"||r.tagName==="menu"||r.tagName==="nav"||r.tagName==="ol"||r.tagName==="p"||r.tagName==="pre"||r.tagName==="section"||r.tagName==="table"||r.tagName==="ul"):!n||!(n.type==="element"&&(n.tagName==="a"||n.tagName==="audio"||n.tagName==="del"||n.tagName==="ins"||n.tagName==="map"||n.tagName==="noscript"||n.tagName==="video"))}function l5(t,e,n){const r=nn(n,e);return!r||r.type==="element"&&r.tagName==="li"}function c5(t,e,n){const r=nn(n,e);return!!(r&&r.type==="element"&&(r.tagName==="dt"||r.tagName==="dd"))}function u5(t,e,n){const r=nn(n,e);return!r||r.type==="element"&&(r.tagName==="dt"||r.tagName==="dd")}function fw(t,e,n){const r=nn(n,e);return!r||r.type==="element"&&(r.tagName==="rp"||r.tagName==="rt")}function f5(t,e,n){const r=nn(n,e);return!r||r.type==="element"&&r.tagName==="optgroup"}function d5(t,e,n){const r=nn(n,e);return!r||r.type==="element"&&(r.tagName==="option"||r.tagName==="optgroup")}function h5(t,e,n){const r=nn(n,e);return!!(r&&r.type==="element"&&(r.tagName==="tbody"||r.tagName==="tfoot"))}function p5(t,e,n){const r=nn(n,e);return!r||r.type==="element"&&(r.tagName==="tbody"||r.tagName==="tfoot")}function m5(t,e,n){return!nn(n,e)}function g5(t,e,n){const r=nn(n,e);return!r||r.type==="element"&&r.tagName==="tr"}function dw(t,e,n){const r=nn(n,e);return!r||r.type==="element"&&(r.tagName==="td"||r.tagName==="th")}const y5=TE({body:v5,colgroup:x5,head:_5,html:b5,tbody:w5});function b5(t){const e=nn(t,-1);return!e||e.type!=="comment"}function _5(t){const e=new Set;for(const r of t.children)if(r.type==="element"&&(r.tagName==="base"||r.tagName==="title")){if(e.has(r.tagName))return!1;e.add(r.tagName)}const n=t.children[0];return!n||n.type==="element"}function v5(t){const e=nn(t,-1,!0);return!e||e.type!=="comment"&&!(e.type==="text"&&md(e.value.charAt(0)))&&!(e.type==="element"&&(e.tagName==="meta"||e.tagName==="link"||e.tagName==="script"||e.tagName==="style"||e.tagName==="template"))}function x5(t,e,n){const r=EE(n,e),s=nn(t,-1,!0);return n&&r&&r.type==="element"&&r.tagName==="colgroup"&&Gy(r,n.children.indexOf(r),n)?!1:!!(s&&s.type==="element"&&s.tagName==="col")}function w5(t,e,n){const r=EE(n,e),s=nn(t,-1);return n&&r&&r.type==="element"&&(r.tagName==="thead"||r.tagName==="tbody")&&Gy(r,n.children.indexOf(r),n)?!1:!!(s&&s.type==="element"&&s.tagName==="tr")}const Bu={name:[[`	
\f\r &/=>`.split(""),`	
\f\r "&'/=>\``.split("")],[`\0	
\f\r "&'/<=>`.split(""),`\0	
\f\r "&'/<=>\``.split("")]],unquoted:[[`	
\f\r &>`.split(""),`\0	
\f\r "&'<=>\``.split("")],[`\0	
\f\r "&'<=>\``.split(""),`\0	
\f\r "&'<=>\``.split("")]],single:[["&'".split(""),"\"&'`".split("")],["\0&'".split(""),"\0\"&'`".split("")]],double:[['"&'.split(""),"\"&'`".split("")],['\0"&'.split(""),"\0\"&'`".split("")]]};function S5(t,e,n,r){const s=r.schema,a=s.space==="svg"?!1:r.settings.omitOptionalTags;let l=s.space==="svg"?r.settings.closeEmptyElements:r.settings.voids.includes(t.tagName.toLowerCase());const u=[];let f;s.space==="html"&&t.tagName==="svg"&&(r.schema=pc);const d=k5(r,t.properties),m=r.all(s.space==="html"&&t.tagName==="template"?t.content:t);return r.schema=s,m&&(l=!1),(d||!a||!y5(t,e,n))&&(u.push("<",t.tagName,d?" "+d:""),l&&(s.space==="svg"||r.settings.closeSelfClosing)&&(f=d.charAt(d.length-1),(!r.settings.tightSelfClosing||f==="/"||f&&f!=='"'&&f!=="'")&&u.push(" "),u.push("/")),u.push(">")),u.push(m),!l&&(!a||!Gy(t,e,n))&&u.push("</"+t.tagName+">"),u.join("")}function k5(t,e){const n=[];let r=-1,s;if(e){for(s in e)if(e[s]!==null&&e[s]!==void 0){const a=E5(t,s,e[s]);a&&n.push(a)}}for(;++r<n.length;){const a=t.settings.tightAttributes?n[r].charAt(n[r].length-1):void 0;r!==n.length-1&&a!=='"'&&a!=="'"&&(n[r]+=" ")}return n.join("")}function E5(t,e,n){const r=vE(t.schema,e),s=t.settings.allowParseErrors&&t.schema.space==="html"?0:1,a=t.settings.allowDangerousCharacters?0:1;let l=t.quote,u;if(r.overloadedBoolean&&(n===r.attribute||n==="")?n=!0:(r.boolean||r.overloadedBoolean)&&(typeof n!="string"||n===r.attribute||n==="")&&(n=!!n),n==null||n===!1||typeof n=="number"&&Number.isNaN(n))return"";const f=eo(r.attribute,Object.assign({},t.settings.characterReferences,{subset:Bu.name[s][a]}));return n===!0||(n=Array.isArray(n)?(r.commaSeparated?SE:kE)(n,{padLeft:!t.settings.tightCommaSeparatedLists}):String(n),t.settings.collapseEmptyAttributes&&!n)?f:(t.settings.preferUnquoted&&(u=eo(n,Object.assign({},t.settings.characterReferences,{attribute:!0,subset:Bu.unquoted[s][a]}))),u!==n&&(t.settings.quoteSmart&&Bf(n,l)>Bf(n,t.alternative)&&(l=t.alternative),u=l+eo(n,Object.assign({},t.settings.characterReferences,{subset:(l==="'"?Bu.single:Bu.double)[s][a],attribute:!0}))+l),f+(u&&"="+u))}const C5=["<","&"];function AE(t,e,n,r){return n&&n.type==="element"&&(n.tagName==="script"||n.tagName==="style")?t.value:eo(t.value,Object.assign({},r.settings.characterReferences,{subset:C5}))}function T5(t,e,n,r){return r.settings.allowDangerousHtml?t.value:AE(t,e,n,r)}function A5(t,e,n,r){return r.all(t)}const R5=DL("type",{invalid:O5,unknown:I5,handlers:{comment:e5,doctype:t5,element:S5,raw:T5,root:A5,text:AE}});function O5(t){throw new Error("Expected node, not `"+t+"`")}function I5(t){const e=t;throw new Error("Cannot compile unknown node `"+e.type+"`")}const N5={},M5={},D5=[];function j5(t,e){const n=e||N5,r=n.quote||'"',s=r==='"'?"'":'"';if(r!=='"'&&r!=="'")throw new Error("Invalid quote `"+r+"`, expected `'` or `\"`");return{one:L5,all:z5,settings:{omitOptionalTags:n.omitOptionalTags||!1,allowParseErrors:n.allowParseErrors||!1,allowDangerousCharacters:n.allowDangerousCharacters||!1,quoteSmart:n.quoteSmart||!1,preferUnquoted:n.preferUnquoted||!1,tightAttributes:n.tightAttributes||!1,upperDoctype:n.upperDoctype||!1,tightDoctype:n.tightDoctype||!1,bogusComments:n.bogusComments||!1,tightCommaSeparatedLists:n.tightCommaSeparatedLists||!1,tightSelfClosing:n.tightSelfClosing||!1,collapseEmptyAttributes:n.collapseEmptyAttributes||!1,allowDangerousHtml:n.allowDangerousHtml||!1,voids:n.voids||EL,characterReferences:n.characterReferences||M5,closeSelfClosing:n.closeSelfClosing||!1,closeEmptyElements:n.closeEmptyElements||!1},schema:n.space==="svg"?pc:xE,quote:r,alternative:s}.one(Array.isArray(t)?{type:"root",children:t}:t,void 0,void 0)}function L5(t,e,n){return R5(t,e,n,this)}function z5(t){const e=[],n=t&&t.children||D5;let r=-1;for(;++r<n.length;)e[r]=this.one(n[r],r,t);return e.join("")}function $f(t,e){const n=typeof t=="string"?{}:{...t.colorReplacements},r=typeof t=="string"?t:t.name;for(const[s,a]of Object.entries(e?.colorReplacements||{}))typeof a=="string"?n[s]=a:s===r&&Object.assign(n,a);return n}function ii(t,e){return t&&(e?.[t?.toLowerCase()]||t)}function P5(t){return Array.isArray(t)?t:[t]}async function RE(t){return Promise.resolve(typeof t=="function"?t():t).then(e=>e.default||e)}function Ky(t){return!t||["plaintext","txt","text","plain"].includes(t)}function OE(t){return t==="ansi"||Ky(t)}function Zy(t){return t==="none"}function IE(t){return Zy(t)}function NE(t,e){if(!e)return t;t.properties||={},t.properties.class||=[],typeof t.properties.class=="string"&&(t.properties.class=t.properties.class.split(/\s+/g)),Array.isArray(t.properties.class)||(t.properties.class=[]);const n=Array.isArray(e)?e:e.split(/\s+/g);for(const r of n)r&&!t.properties.class.includes(r)&&t.properties.class.push(r);return t}function gd(t,e=!1){if(t.length===0)return[["",0]];const n=t.split(/(\r?\n)/g);let r=0;const s=[];for(let a=0;a<n.length;a+=2){const l=e?n[a]+(n[a+1]||""):n[a];s.push([l,r]),r+=n[a].length,r+=n[a+1]?.length||0}return s}function B5(t){const e=gd(t,!0).map(([s])=>s);function n(s){if(s===t.length)return{line:e.length-1,character:e[e.length-1].length};let a=s,l=0;for(const u of e){if(a<u.length)break;a-=u.length,l++}return{line:l,character:a}}function r(s,a){let l=0;for(let u=0;u<s;u++)l+=e[u].length;return l+=a,l}return{lines:e,indexToPos:n,posToIndex:r}}function $5(t,e,n){const r=new Set;for(const a of t.matchAll(/:?lang=["']([^"']+)["']/g)){const l=a[1].toLowerCase().trim();l&&r.add(l)}for(const a of t.matchAll(/(?:```|~~~)([\w-]+)/g)){const l=a[1].toLowerCase().trim();l&&r.add(l)}for(const a of t.matchAll(/\\begin\{([\w-]+)\}/g)){const l=a[1].toLowerCase().trim();l&&r.add(l)}for(const a of t.matchAll(/<script\s+(?:type|lang)=["']([^"']+)["']/gi)){const l=a[1].toLowerCase().trim(),u=l.includes("/")?l.split("/").pop():l;u&&r.add(u)}if(!n)return Array.from(r);const s=n.getBundledLanguages();return Array.from(r).filter(a=>a&&s[a])}const Jy="light-dark()",U5=["color","background-color"];function q5(t,e){let n=0;const r=[];for(const s of e)s>n&&r.push({...t,content:t.content.slice(n,s),offset:t.offset+n}),n=s;return n<t.content.length&&r.push({...t,content:t.content.slice(n),offset:t.offset+n}),r}function F5(t,e){const n=Array.from(e instanceof Set?e:new Set(e)).sort((r,s)=>r-s);return n.length?t.map(r=>r.flatMap(s=>{const a=n.filter(l=>s.offset<l&&l<s.offset+s.content.length).map(l=>l-s.offset).sort((l,u)=>l-u);return a.length?q5(s,a):s})):t}function V5(t,e,n,r,s="css-vars"){const a={content:t.content,explanation:t.explanation,offset:t.offset},l=e.map(m=>Uf(t.variants[m])),u=new Set(l.flatMap(m=>Object.keys(m))),f={},d=(m,p)=>{const y=p==="color"?"":p==="background-color"?"-bg":`-${p}`;return n+e[m]+(p==="color"?"":y)};return l.forEach((m,p)=>{for(const y of u){const g=m[y]||"inherit";if(p===0&&r&&U5.includes(y))if(r===Jy&&l.length>1){const v=e.findIndex(C=>C==="light"),w=e.findIndex(C=>C==="dark");if(v===-1||w===-1)throw new Gt('When using `defaultColor: "light-dark()"`, you must provide both `light` and `dark` themes');const E=l[v][y]||"inherit",k=l[w][y]||"inherit";f[y]=`light-dark(${E}, ${k})`,s==="css-vars"&&(f[d(p,y)]=g)}else f[y]=g;else s==="css-vars"&&(f[d(p,y)]=g)}}),a.htmlStyle=f,a}function Uf(t){const e={};if(t.color&&(e.color=t.color),t.bgColor&&(e["background-color"]=t.bgColor),t.fontStyle){t.fontStyle&An.Italic&&(e["font-style"]="italic"),t.fontStyle&An.Bold&&(e["font-weight"]="bold");const n=[];t.fontStyle&An.Underline&&n.push("underline"),t.fontStyle&An.Strikethrough&&n.push("line-through"),n.length&&(e["text-decoration"]=n.join(" "))}return e}function $g(t){return typeof t=="string"?t:Object.entries(t).map(([e,n])=>`${e}:${n}`).join(";")}const ME=new WeakMap;function yd(t,e){ME.set(t,e)}function tc(t){return ME.get(t)}class po{_stacks={};lang;get themes(){return Object.keys(this._stacks)}get theme(){return this.themes[0]}get _stack(){return this._stacks[this.theme]}static initial(e,n){return new po(Object.fromEntries(P5(n).map(r=>[r,jg])),e)}constructor(...e){if(e.length===2){const[n,r]=e;this.lang=r,this._stacks=n}else{const[n,r,s]=e;this.lang=r,this._stacks={[s]:n}}}getInternalStack(e=this.theme){return this._stacks[e]}getScopes(e=this.theme){return H5(this._stacks[e])}toJSON(){return{lang:this.lang,theme:this.theme,themes:this.themes,scopes:this.getScopes()}}}function H5(t){const e=[],n=new Set;function r(s){if(n.has(s))return;n.add(s);const a=s?.nameScopesList?.scopeName;a&&e.push(a),s.parent&&r(s.parent)}return r(t),e}function G5(t,e){if(!(t instanceof po))throw new Gt("Invalid grammar state");return t.getInternalStack(e)}function K5(){const t=new WeakMap;function e(n){if(!t.has(n.meta)){let r=function(l){if(typeof l=="number"){if(l<0||l>n.source.length)throw new Gt(`Invalid decoration offset: ${l}. Code length: ${n.source.length}`);return{...s.indexToPos(l),offset:l}}else{const u=s.lines[l.line];if(u===void 0)throw new Gt(`Invalid decoration position ${JSON.stringify(l)}. Lines length: ${s.lines.length}`);let f=l.character;if(f<0&&(f=u.length+f),f<0||f>u.length)throw new Gt(`Invalid decoration position ${JSON.stringify(l)}. Line ${l.line} length: ${u.length}`);return{...l,character:f,offset:s.posToIndex(l.line,f)}}};const s=B5(n.source),a=(n.options.decorations||[]).map(l=>({...l,start:r(l.start),end:r(l.end)}));Z5(a),t.set(n.meta,{decorations:a,converter:s,source:n.source})}return t.get(n.meta)}return{name:"shiki:decorations",tokens(n){if(!this.options.decorations?.length)return;const s=e(this).decorations.flatMap(l=>[l.start.offset,l.end.offset]);return F5(n,s)},code(n){if(!this.options.decorations?.length)return;const r=e(this),s=Array.from(n.children).filter(m=>m.type==="element"&&m.tagName==="span");if(s.length!==r.converter.lines.length)throw new Gt(`Number of lines in code element (${s.length}) does not match the number of lines in the source (${r.converter.lines.length}). Failed to apply decorations.`);function a(m,p,y,g){const v=s[m];let w="",E=-1,k=-1;if(p===0&&(E=0),y===0&&(k=0),y===Number.POSITIVE_INFINITY&&(k=v.children.length),E===-1||k===-1)for(let T=0;T<v.children.length;T++)w+=DE(v.children[T]),E===-1&&w.length===p&&(E=T+1),k===-1&&w.length===y&&(k=T+1);if(E===-1)throw new Gt(`Failed to find start index for decoration ${JSON.stringify(g.start)}`);if(k===-1)throw new Gt(`Failed to find end index for decoration ${JSON.stringify(g.end)}`);const C=v.children.slice(E,k);if(!g.alwaysWrap&&C.length===v.children.length)u(v,g,"line");else if(!g.alwaysWrap&&C.length===1&&C[0].type==="element")u(C[0],g,"token");else{const T={type:"element",tagName:"span",properties:{},children:C};u(T,g,"wrapper"),v.children.splice(E,C.length,T)}}function l(m,p){s[m]=u(s[m],p,"line")}function u(m,p,y){const g=p.properties||{},v=p.transform||(w=>w);return m.tagName=p.tagName||"span",m.properties={...m.properties,...g,class:m.properties.class},p.properties?.class&&NE(m,p.properties.class),m=v(m,y)||m,m}const f=[],d=r.decorations.sort((m,p)=>p.start.offset-m.start.offset||m.end.offset-p.end.offset);for(const m of d){const{start:p,end:y}=m;if(p.line===y.line)a(p.line,p.character,y.character,m);else if(p.line<y.line){a(p.line,p.character,Number.POSITIVE_INFINITY,m);for(let g=p.line+1;g<y.line;g++)f.unshift(()=>l(g,m));a(y.line,0,y.character,m)}}f.forEach(m=>m())}}}function Z5(t){for(let e=0;e<t.length;e++){const n=t[e];if(n.start.offset>n.end.offset)throw new Gt(`Invalid decoration range: ${JSON.stringify(n.start)} - ${JSON.stringify(n.end)}`);for(let r=e+1;r<t.length;r++){const s=t[r],a=n.start.offset<=s.start.offset&&s.start.offset<n.end.offset,l=n.start.offset<s.end.offset&&s.end.offset<=n.end.offset,u=s.start.offset<=n.start.offset&&n.start.offset<s.end.offset,f=s.start.offset<n.end.offset&&n.end.offset<=s.end.offset;if(a||l||u||f){if(a&&l||u&&f||u&&n.start.offset===n.end.offset||l&&s.start.offset===s.end.offset)continue;throw new Gt(`Decorations ${JSON.stringify(n.start)} and ${JSON.stringify(s.start)} intersect.`)}}}}function DE(t){return t.type==="text"?t.value:t.type==="element"?t.children.map(DE).join(""):""}const J5=[K5()];function qf(t){const e=Q5(t.transformers||[]);return[...e.pre,...e.normal,...e.post,...J5]}function Q5(t){const e=[],n=[],r=[];for(const s of t)switch(s.enforce){case"pre":e.push(s);break;case"post":n.push(s);break;default:r.push(s)}return{pre:e,post:n,normal:r}}var Bi=["black","red","green","yellow","blue","magenta","cyan","white","brightBlack","brightRed","brightGreen","brightYellow","brightBlue","brightMagenta","brightCyan","brightWhite"],Em={1:"bold",2:"dim",3:"italic",4:"underline",7:"reverse",8:"hidden",9:"strikethrough"};function Y5(t,e){const n=t.indexOf("\x1B",e);if(n!==-1&&t[n+1]==="["){const r=t.indexOf("m",n);if(r!==-1)return{sequence:t.substring(n+2,r).split(";"),startPosition:n,position:r+1}}return{position:t.length}}function hw(t){const e=t.shift();if(e==="2"){const n=t.splice(0,3).map(r=>Number.parseInt(r));return n.length!==3||n.some(r=>Number.isNaN(r))?void 0:{type:"rgb",rgb:n}}else if(e==="5"){const n=t.shift();if(n)return{type:"table",index:Number(n)}}}function W5(t){const e=[];for(;t.length>0;){const n=t.shift();if(!n)continue;const r=Number.parseInt(n);if(!Number.isNaN(r))if(r===0)e.push({type:"resetAll"});else if(r<=9)Em[r]&&e.push({type:"setDecoration",value:Em[r]});else if(r<=29){const s=Em[r-20];s&&(e.push({type:"resetDecoration",value:s}),s==="dim"&&e.push({type:"resetDecoration",value:"bold"}))}else if(r<=37)e.push({type:"setForegroundColor",value:{type:"named",name:Bi[r-30]}});else if(r===38){const s=hw(t);s&&e.push({type:"setForegroundColor",value:s})}else if(r===39)e.push({type:"resetForegroundColor"});else if(r<=47)e.push({type:"setBackgroundColor",value:{type:"named",name:Bi[r-40]}});else if(r===48){const s=hw(t);s&&e.push({type:"setBackgroundColor",value:s})}else r===49?e.push({type:"resetBackgroundColor"}):r===53?e.push({type:"setDecoration",value:"overline"}):r===55?e.push({type:"resetDecoration",value:"overline"}):r>=90&&r<=97?e.push({type:"setForegroundColor",value:{type:"named",name:Bi[r-90+8]}}):r>=100&&r<=107&&e.push({type:"setBackgroundColor",value:{type:"named",name:Bi[r-100+8]}})}return e}function X5(){let t=null,e=null,n=new Set;return{parse(r){const s=[];let a=0;do{const l=Y5(r,a),u=l.sequence?r.substring(a,l.startPosition):r.substring(a);if(u.length>0&&s.push({value:u,foreground:t,background:e,decorations:new Set(n)}),l.sequence){const f=W5(l.sequence);for(const d of f)d.type==="resetAll"?(t=null,e=null,n.clear()):d.type==="resetForegroundColor"?t=null:d.type==="resetBackgroundColor"?e=null:d.type==="resetDecoration"&&n.delete(d.value);for(const d of f)d.type==="setForegroundColor"?t=d.value:d.type==="setBackgroundColor"?e=d.value:d.type==="setDecoration"&&n.add(d.value)}a=l.position}while(a<r.length);return s}}}var ez={black:"#000000",red:"#bb0000",green:"#00bb00",yellow:"#bbbb00",blue:"#0000bb",magenta:"#ff00ff",cyan:"#00bbbb",white:"#eeeeee",brightBlack:"#555555",brightRed:"#ff5555",brightGreen:"#00ff00",brightYellow:"#ffff55",brightBlue:"#5555ff",brightMagenta:"#ff55ff",brightCyan:"#55ffff",brightWhite:"#ffffff"};function tz(t=ez){function e(u){return t[u]}function n(u){return`#${u.map(f=>Math.max(0,Math.min(f,255)).toString(16).padStart(2,"0")).join("")}`}let r;function s(){if(r)return r;r=[];for(let d=0;d<Bi.length;d++)r.push(e(Bi[d]));let u=[0,95,135,175,215,255];for(let d=0;d<6;d++)for(let m=0;m<6;m++)for(let p=0;p<6;p++)r.push(n([u[d],u[m],u[p]]));let f=8;for(let d=0;d<24;d++,f+=10)r.push(n([f,f,f]));return r}function a(u){return s()[u]}function l(u){switch(u.type){case"named":return e(u.name);case"rgb":return n(u.rgb);case"table":return a(u.index)}}return{value:l}}const nz={black:"#000000",red:"#cd3131",green:"#0DBC79",yellow:"#E5E510",blue:"#2472C8",magenta:"#BC3FBC",cyan:"#11A8CD",white:"#E5E5E5",brightBlack:"#666666",brightRed:"#F14C4C",brightGreen:"#23D18B",brightYellow:"#F5F543",brightBlue:"#3B8EEA",brightMagenta:"#D670D6",brightCyan:"#29B8DB",brightWhite:"#FFFFFF"};function rz(t,e,n){const r=$f(t,n),s=gd(e),a=Object.fromEntries(Bi.map(f=>{const d=`terminal.ansi${f[0].toUpperCase()}${f.substring(1)}`,m=t.colors?.[d];return[f,m||nz[f]]})),l=tz(a),u=X5();return s.map(f=>u.parse(f[0]).map(d=>{let m,p;d.decorations.has("reverse")?(m=d.background?l.value(d.background):t.bg,p=d.foreground?l.value(d.foreground):t.fg):(m=d.foreground?l.value(d.foreground):t.fg,p=d.background?l.value(d.background):void 0),m=ii(m,r),p=ii(p,r),d.decorations.has("dim")&&(m=sz(m));let y=An.None;return d.decorations.has("bold")&&(y|=An.Bold),d.decorations.has("italic")&&(y|=An.Italic),d.decorations.has("underline")&&(y|=An.Underline),d.decorations.has("strikethrough")&&(y|=An.Strikethrough),{content:d.value,offset:f[1],color:m,bgColor:p,fontStyle:y}}))}function sz(t){const e=t.match(/#([0-9a-f]{3,8})/i);if(e){const r=e[1];if(r.length===8){const s=Math.round(Number.parseInt(r.slice(6,8),16)/2).toString(16).padStart(2,"0");return`#${r.slice(0,6)}${s}`}else{if(r.length===6)return`#${r}80`;if(r.length===4){const s=r[0],a=r[1],l=r[2],u=r[3],f=Math.round(Number.parseInt(`${u}${u}`,16)/2).toString(16).padStart(2,"0");return`#${s}${s}${a}${a}${l}${l}${f}`}else if(r.length===3){const s=r[0],a=r[1],l=r[2];return`#${s}${s}${a}${a}${l}${l}80`}}}const n=t.match(/var\((--[\w-]+-ansi-[\w-]+)\)/);return n?`var(${n[1]}-dim)`:t}function Qy(t,e,n={}){const{theme:r=t.getLoadedThemes()[0]}=n,s=t.resolveLangAlias(n.lang||"text");if(Ky(s)||Zy(r))return gd(e).map(f=>[{content:f[0],offset:f[1]}]);const{theme:a,colorMap:l}=t.setTheme(r);if(s==="ansi")return rz(a,e,n);const u=t.getLanguage(n.lang||"text");if(n.grammarState){if(n.grammarState.lang!==u.name)throw new Gt(`Grammar state language "${n.grammarState.lang}" does not match highlight language "${u.name}"`);if(!n.grammarState.themes.includes(a.name))throw new Gt(`Grammar state themes "${n.grammarState.themes}" do not contain highlight theme "${a.name}"`)}return az(e,u,a,l,n)}function iz(...t){if(t.length===2)return tc(t[1]);const[e,n,r={}]=t,{lang:s="text",theme:a=e.getLoadedThemes()[0]}=r;if(Ky(s)||Zy(a))throw new Gt("Plain language does not have grammar state");if(s==="ansi")throw new Gt("ANSI language does not have grammar state");const{theme:l,colorMap:u}=e.setTheme(a),f=e.getLanguage(s);return new po(Yy(n,f,l,u,r).stateStack,f.name,l.name)}function az(t,e,n,r,s){const a=Yy(t,e,n,r,s),l=new po(a.stateStack,e.name,n.name);return yd(a.tokens,l),a.tokens}function Yy(t,e,n,r,s){const a=$f(n,s),{tokenizeMaxLineLength:l=0,tokenizeTimeLimit:u=500}=s,f=gd(t);let d=s.grammarState?G5(s.grammarState,n.name)??jg:s.grammarContextCode!=null?Yy(s.grammarContextCode,e,n,r,{...s,grammarState:void 0,grammarContextCode:void 0}).stateStack:jg,m=[];const p=[];for(let y=0,g=f.length;y<g;y++){const[v,w]=f[y];if(v===""){m=[],p.push([]);continue}if(l>0&&v.length>=l){m=[],p.push([{content:v,offset:w,color:"",fontStyle:0}]);continue}let E,k,C;s.includeExplanation&&(E=e.tokenizeLine(v,d,u),k=E.tokens,C=0);const T=e.tokenizeLine2(v,d,u),D=T.tokens.length/2;for(let N=0;N<D;N++){const R=T.tokens[2*N],$=N+1<D?T.tokens[2*N+2]:v.length;if(R===$)continue;const q=T.tokens[2*N+1],H=ii(r[ao.getForeground(q)],a),M=ao.getFontStyle(q),Q={content:v.substring(R,$),offset:w+R,color:H,fontStyle:M};if(s.includeExplanation){const ne=[];if(s.includeExplanation!=="scopeName")for(const X of n.settings){let F;switch(typeof X.scope){case"string":F=X.scope.split(/,/).map(B=>B.trim());break;case"object":F=X.scope;break;default:continue}ne.push({settings:X,selectors:F.map(B=>B.split(/ /))})}Q.explanation=[];let ye=0;for(;R+ye<$;){const X=k[C],F=v.substring(X.startIndex,X.endIndex);ye+=F.length,Q.explanation.push({content:F,scopes:s.includeExplanation==="scopeName"?oz(X.scopes):lz(ne,X.scopes)}),C+=1}}m.push(Q)}p.push(m),m=[],d=T.ruleStack}return{tokens:p,stateStack:d}}function oz(t){return t.map(e=>({scopeName:e}))}function lz(t,e){const n=[];for(let r=0,s=e.length;r<s;r++){const a=e[r];n[r]={scopeName:a,themeMatches:uz(t,a,e.slice(0,r))}}return n}function pw(t,e){return t===e||e.substring(0,t.length)===t&&e[t.length]==="."}function cz(t,e,n){if(!pw(t[t.length-1],e))return!1;let r=t.length-2,s=n.length-1;for(;r>=0&&s>=0;)pw(t[r],n[s])&&(r-=1),s-=1;return r===-1}function uz(t,e,n){const r=[];for(const{selectors:s,settings:a}of t)for(const l of s)if(cz(l,e,n)){r.push(a);break}return r}function jE(t,e,n){const r=Object.entries(n.themes).filter(f=>f[1]).map(f=>({color:f[0],theme:f[1]})),s=r.map(f=>{const d=Qy(t,e,{...n,theme:f.theme}),m=tc(d),p=typeof f.theme=="string"?f.theme:f.theme.name;return{tokens:d,state:m,theme:p}}),a=fz(...s.map(f=>f.tokens)),l=a[0].map((f,d)=>f.map((m,p)=>{const y={content:m.content,variants:{},offset:m.offset};return"includeExplanation"in n&&n.includeExplanation&&(y.explanation=m.explanation),a.forEach((g,v)=>{const{content:w,explanation:E,offset:k,...C}=g[d][p];y.variants[r[v].color]=C}),y})),u=s[0].state?new po(Object.fromEntries(s.map(f=>[f.theme,f.state?.getInternalStack(f.theme)])),s[0].state.lang):void 0;return u&&yd(l,u),l}function fz(...t){const e=t.map(()=>[]),n=t.length;for(let r=0;r<t[0].length;r++){const s=t.map(f=>f[r]),a=e.map(()=>[]);e.forEach((f,d)=>f.push(a[d]));const l=s.map(()=>0),u=s.map(f=>f[0]);for(;u.every(f=>f);){const f=Math.min(...u.map(d=>d.content.length));for(let d=0;d<n;d++){const m=u[d];m.content.length===f?(a[d].push(m),l[d]+=1,u[d]=s[d][l[d]]):(a[d].push({...m,content:m.content.slice(0,f)}),u[d]={...m,content:m.content.slice(f),offset:m.offset+f})}}}return e}function Ff(t,e,n){let r,s,a,l,u,f;if("themes"in n){const{defaultColor:d="light",cssVariablePrefix:m="--shiki-",colorsRendering:p="css-vars"}=n,y=Object.entries(n.themes).filter(k=>k[1]).map(k=>({color:k[0],theme:k[1]})).sort((k,C)=>k.color===d?-1:C.color===d?1:0);if(y.length===0)throw new Gt("`themes` option must not be empty");const g=jE(t,e,n);if(f=tc(g),d&&Jy!==d&&!y.find(k=>k.color===d))throw new Gt(`\`themes\` option must contain the defaultColor key \`${d}\``);const v=y.map(k=>t.getTheme(k.theme)),w=y.map(k=>k.color);a=g.map(k=>k.map(C=>V5(C,w,m,d,p))),f&&yd(a,f);const E=y.map(k=>$f(k.theme,n));s=mw(y,v,E,m,d,"fg",p),r=mw(y,v,E,m,d,"bg",p),l=`shiki-themes ${v.map(k=>k.name).join(" ")}`,u=d?void 0:[s,r].join(";")}else if("theme"in n){const d=$f(n.theme,n);a=Qy(t,e,n);const m=t.getTheme(n.theme);r=ii(m.bg,d),s=ii(m.fg,d),l=m.name,f=tc(a)}else throw new Gt("Invalid options, either `theme` or `themes` must be provided");return{tokens:a,fg:s,bg:r,themeName:l,rootStyle:u,grammarState:f}}function mw(t,e,n,r,s,a,l){return t.map((u,f)=>{const d=ii(e[f][a],n[f])||"inherit",m=`${r+u.color}${a==="bg"?"-bg":""}:${d}`;if(f===0&&s){if(s===Jy&&t.length>1){const p=t.findIndex(w=>w.color==="light"),y=t.findIndex(w=>w.color==="dark");if(p===-1||y===-1)throw new Gt('When using `defaultColor: "light-dark()"`, you must provide both `light` and `dark` themes');const g=ii(e[p][a],n[p])||"inherit",v=ii(e[y][a],n[y])||"inherit";return`light-dark(${g}, ${v});${m}`}return d}return l==="css-vars"?m:null}).filter(u=>!!u).join(";")}function Vf(t,e,n,r={meta:{},options:n,codeToHast:(s,a)=>Vf(t,s,a),codeToTokens:(s,a)=>Ff(t,s,a)}){let s=e;for(const v of qf(n))s=v.preprocess?.call(r,s,n)||s;let{tokens:a,fg:l,bg:u,themeName:f,rootStyle:d,grammarState:m}=Ff(t,s,n);const{mergeWhitespaces:p=!0,mergeSameStyleTokens:y=!1}=n;p===!0?a=hz(a):p==="never"&&(a=pz(a)),y&&(a=mz(a));const g={...r,get source(){return s}};for(const v of qf(n))a=v.tokens?.call(g,a)||a;return dz(a,{...n,fg:l,bg:u,themeName:f,rootStyle:n.rootStyle===!1?!1:n.rootStyle??d},g,m)}function dz(t,e,n,r=tc(t)){const s=qf(e),a=[],l={type:"root",children:[]},{structure:u="classic",tabindex:f="0"}=e,d={class:`shiki ${e.themeName||""}`};e.rootStyle!==!1&&(e.rootStyle!=null?d.style=e.rootStyle:d.style=`background-color:${e.bg};color:${e.fg}`),f!==!1&&f!=null&&(d.tabindex=f.toString());for(const[w,E]of Object.entries(e.meta||{}))w.startsWith("_")||(d[w]=E);let m={type:"element",tagName:"pre",properties:d,children:[]},p={type:"element",tagName:"code",properties:{},children:a};const y=[],g={...n,structure:u,addClassToHast:NE,get source(){return n.source},get tokens(){return t},get options(){return e},get root(){return l},get pre(){return m},get code(){return p},get lines(){return y}};if(t.forEach((w,E)=>{E&&(u==="inline"?l.children.push({type:"element",tagName:"br",properties:{},children:[]}):u==="classic"&&a.push({type:"text",value:`
`}));let k={type:"element",tagName:"span",properties:{class:"line"},children:[]},C=0;for(const T of w){let D={type:"element",tagName:"span",properties:{...T.htmlAttrs},children:[{type:"text",value:T.content}]};const N=$g(T.htmlStyle||Uf(T));N&&(D.properties.style=N);for(const R of s)D=R?.span?.call(g,D,E+1,C,k,T)||D;u==="inline"?l.children.push(D):u==="classic"&&k.children.push(D),C+=T.content.length}if(u==="classic"){for(const T of s)k=T?.line?.call(g,k,E+1)||k;y.push(k),a.push(k)}else u==="inline"&&y.push(k)}),u==="classic"){for(const w of s)p=w?.code?.call(g,p)||p;m.children.push(p);for(const w of s)m=w?.pre?.call(g,m)||m;l.children.push(m)}else if(u==="inline"){const w=[];let E={type:"element",tagName:"span",properties:{class:"line"},children:[]};for(const T of l.children)T.type==="element"&&T.tagName==="br"?(w.push(E),E={type:"element",tagName:"span",properties:{class:"line"},children:[]}):(T.type==="element"||T.type==="text")&&E.children.push(T);w.push(E);let C={type:"element",tagName:"code",properties:{},children:w};for(const T of s)C=T?.code?.call(g,C)||C;l.children=[];for(let T=0;T<C.children.length;T++){T>0&&l.children.push({type:"element",tagName:"br",properties:{},children:[]});const D=C.children[T];D.type==="element"&&l.children.push(...D.children)}}let v=l;for(const w of s)v=w?.root?.call(g,v)||v;return r&&yd(v,r),v}function hz(t){return t.map(e=>{const n=[];let r="",s;return e.forEach((a,l)=>{const f=!(a.fontStyle&&(a.fontStyle&An.Underline||a.fontStyle&An.Strikethrough));f&&a.content.match(/^\s+$/)&&e[l+1]?(s===void 0&&(s=a.offset),r+=a.content):r?(f?n.push({...a,offset:s,content:r+a.content}):n.push({content:r,offset:s},a),s=void 0,r=""):n.push(a)}),n})}function pz(t){return t.map(e=>e.flatMap(n=>{if(n.content.match(/^\s+$/))return n;const r=n.content.match(/^(\s*)(.*?)(\s*)$/);if(!r)return n;const[,s,a,l]=r;if(!s&&!l)return n;const u=[{...n,offset:n.offset+s.length,content:a}];return s&&u.unshift({content:s,offset:n.offset}),l&&u.push({content:l,offset:n.offset+s.length+a.length}),u}))}function mz(t){return t.map(e=>{const n=[];for(const r of e){if(n.length===0){n.push({...r});continue}const s=n[n.length-1],a=$g(s.htmlStyle||Uf(s)),l=$g(r.htmlStyle||Uf(r)),u=s.fontStyle&&(s.fontStyle&An.Underline||s.fontStyle&An.Strikethrough),f=r.fontStyle&&(r.fontStyle&An.Underline||r.fontStyle&An.Strikethrough);!u&&!f&&a===l?s.content+=r.content:n.push({...r})}return n})}const gz=j5;function yz(t,e,n){const r={meta:{},options:n,codeToHast:(a,l)=>Vf(t,a,l),codeToTokens:(a,l)=>Ff(t,a,l)};let s=gz(Vf(t,e,n,r));for(const a of qf(n))s=a.postprocess?.call(r,s,n)||s;return s}const gw={light:"#333333",dark:"#bbbbbb"},yw={light:"#fffffe",dark:"#1e1e1e"},bw="__shiki_resolved";function Wy(t){if(t?.[bw])return t;const e={...t};e.tokenColors&&!e.settings&&(e.settings=e.tokenColors,delete e.tokenColors),e.type||="dark",e.colorReplacements={...e.colorReplacements},e.settings||=[];let{bg:n,fg:r}=e;if(!n||!r){const u=e.settings?e.settings.find(f=>!f.name&&!f.scope):void 0;u?.settings?.foreground&&(r=u.settings.foreground),u?.settings?.background&&(n=u.settings.background),!r&&e?.colors?.["editor.foreground"]&&(r=e.colors["editor.foreground"]),!n&&e?.colors?.["editor.background"]&&(n=e.colors["editor.background"]),r||(r=e.type==="light"?gw.light:gw.dark),n||(n=e.type==="light"?yw.light:yw.dark),e.fg=r,e.bg=n}e.settings[0]&&e.settings[0].settings&&!e.settings[0].scope||e.settings.unshift({settings:{foreground:e.fg,background:e.bg}});let s=0;const a=new Map;function l(u){if(a.has(u))return a.get(u);s+=1;const f=`#${s.toString(16).padStart(8,"0").toLowerCase()}`;return e.colorReplacements?.[`#${f}`]?l(u):(a.set(u,f),f)}e.settings=e.settings.map(u=>{const f=u.settings?.foreground&&!u.settings.foreground.startsWith("#"),d=u.settings?.background&&!u.settings.background.startsWith("#");if(!f&&!d)return u;const m={...u,settings:{...u.settings}};if(f){const p=l(u.settings.foreground);e.colorReplacements[p]=u.settings.foreground,m.settings.foreground=p}if(d){const p=l(u.settings.background);e.colorReplacements[p]=u.settings.background,m.settings.background=p}return m});for(const u of Object.keys(e.colors||{}))if((u==="editor.foreground"||u==="editor.background"||u.startsWith("terminal.ansi"))&&!e.colors[u]?.startsWith("#")){const f=l(e.colors[u]);e.colorReplacements[f]=e.colors[u],e.colors[u]=f}return Object.defineProperty(e,bw,{enumerable:!1,writable:!1,value:!0}),e}async function LE(t){return Array.from(new Set((await Promise.all(t.filter(e=>!OE(e)).map(async e=>await RE(e).then(n=>Array.isArray(n)?n:[n])))).flat()))}async function zE(t){return(await Promise.all(t.map(async n=>IE(n)?null:Wy(await RE(n))))).filter(n=>!!n)}let bz=3;function _z(t,e=3){e>bz||console.trace(`[SHIKI DEPRECATE]: ${t}`)}let Ja=class extends Error{constructor(e){super(e),this.name="ShikiError"}};function PE(t,e){if(!e)return t;if(e[t]){const n=new Set([t]);for(;e[t];){if(t=e[t],n.has(t))throw new Ja(`Circular alias \`${Array.from(n).join(" -> ")} -> ${t}\``);n.add(t)}}return t}class vz extends kL{constructor(e,n,r,s={}){super(e),this._resolver=e,this._themes=n,this._langs=r,this._alias=s,this._themes.map(a=>this.loadTheme(a)),this.loadLanguages(this._langs)}_resolvedThemes=new Map;_resolvedGrammars=new Map;_langMap=new Map;_langGraph=new Map;_textmateThemeCache=new WeakMap;_loadedThemesCache=null;_loadedLanguagesCache=null;getTheme(e){return typeof e=="string"?this._resolvedThemes.get(e):this.loadTheme(e)}loadTheme(e){const n=Wy(e);return n.name&&(this._resolvedThemes.set(n.name,n),this._loadedThemesCache=null),n}getLoadedThemes(){return this._loadedThemesCache||(this._loadedThemesCache=[...this._resolvedThemes.keys()]),this._loadedThemesCache}setTheme(e){let n=this._textmateThemeCache.get(e);n||(n=Df.createFromRawTheme(e),this._textmateThemeCache.set(e,n)),this._syncRegistry.setTheme(n)}getGrammar(e){return e=PE(e,this._alias),this._resolvedGrammars.get(e)}loadLanguage(e){if(this.getGrammar(e.name))return;const n=new Set([...this._langMap.values()].filter(a=>a.embeddedLangsLazy?.includes(e.name)));this._resolver.addLanguage(e);const r={balancedBracketSelectors:e.balancedBracketSelectors||["*"],unbalancedBracketSelectors:e.unbalancedBracketSelectors||[]};this._syncRegistry._rawGrammars.set(e.scopeName,e);const s=this.loadGrammarWithConfiguration(e.scopeName,1,r);if(s.name=e.name,this._resolvedGrammars.set(e.name,s),e.aliases&&e.aliases.forEach(a=>{this._alias[a]=e.name}),this._loadedLanguagesCache=null,n.size)for(const a of n)this._resolvedGrammars.delete(a.name),this._loadedLanguagesCache=null,this._syncRegistry?._injectionGrammars?.delete(a.scopeName),this._syncRegistry?._grammars?.delete(a.scopeName),this.loadLanguage(this._langMap.get(a.name))}dispose(){super.dispose(),this._resolvedThemes.clear(),this._resolvedGrammars.clear(),this._langMap.clear(),this._langGraph.clear(),this._loadedThemesCache=null}loadLanguages(e){for(const s of e)this.resolveEmbeddedLanguages(s);const n=Array.from(this._langGraph.entries()),r=n.filter(([s,a])=>!a);if(r.length){const s=n.filter(([a,l])=>l?(l.embeddedLanguages||l.embeddedLangs)?.some(f=>r.map(([d])=>d).includes(f)):!1).filter(a=>!r.includes(a));throw new Ja(`Missing languages ${r.map(([a])=>`\`${a}\``).join(", ")}, required by ${s.map(([a])=>`\`${a}\``).join(", ")}`)}for(const[s,a]of n)this._resolver.addLanguage(a);for(const[s,a]of n)this.loadLanguage(a)}getLoadedLanguages(){return this._loadedLanguagesCache||(this._loadedLanguagesCache=[...new Set([...this._resolvedGrammars.keys(),...Object.keys(this._alias)])]),this._loadedLanguagesCache}resolveEmbeddedLanguages(e){this._langMap.set(e.name,e),this._langGraph.set(e.name,e);const n=e.embeddedLanguages??e.embeddedLangs;if(n)for(const r of n)this._langGraph.set(r,this._langMap.get(r))}}class xz{_langs=new Map;_scopeToLang=new Map;_injections=new Map;_onigLib;constructor(e,n){this._onigLib={createOnigScanner:r=>e.createScanner(r),createOnigString:r=>e.createString(r)},n.forEach(r=>this.addLanguage(r))}get onigLib(){return this._onigLib}getLangRegistration(e){return this._langs.get(e)}loadGrammar(e){return this._scopeToLang.get(e)}addLanguage(e){this._langs.set(e.name,e),e.aliases&&e.aliases.forEach(n=>{this._langs.set(n,e)}),this._scopeToLang.set(e.scopeName,e),e.injectTo&&e.injectTo.forEach(n=>{this._injections.get(n)||this._injections.set(n,[]),this._injections.get(n).push(e.scopeName)})}getInjections(e){const n=e.split(".");let r=[];for(let s=1;s<=n.length;s++){const a=n.slice(0,s).join(".");r=[...r,...this._injections.get(a)||[]]}return r}}let hl=0;function wz(t){hl+=1,t.warnings!==!1&&hl>=10&&hl%10===0&&console.warn(`[Shiki] ${hl} instances have been created. Shiki is supposed to be used as a singleton, consider refactoring your code to cache your highlighter instance; Or call \`highlighter.dispose()\` to release unused instances.`);let e=!1;if(!t.engine)throw new Ja("`engine` option is required for synchronous mode");const n=(t.langs||[]).flat(1),r=(t.themes||[]).flat(1).map(Wy),s=new xz(t.engine,n),a=new vz(s,r,n,t.langAlias);let l;function u(T){return PE(T,t.langAlias)}function f(T){k();const D=a.getGrammar(typeof T=="string"?T:T.name);if(!D)throw new Ja(`Language \`${T}\` not found, you may need to load it first`);return D}function d(T){if(T==="none")return{bg:"",fg:"",name:"none",settings:[],type:"dark"};k();const D=a.getTheme(T);if(!D)throw new Ja(`Theme \`${T}\` not found, you may need to load it first`);return D}function m(T){k();const D=d(T);l!==T&&(a.setTheme(D),l=T);const N=a.getColorMap();return{theme:D,colorMap:N}}function p(){return k(),a.getLoadedThemes()}function y(){return k(),a.getLoadedLanguages()}function g(...T){k(),a.loadLanguages(T.flat(1))}async function v(...T){return g(await LE(T))}function w(...T){k();for(const D of T.flat(1))a.loadTheme(D)}async function E(...T){return k(),w(await zE(T))}function k(){if(e)throw new Ja("Shiki instance has been disposed")}function C(){e||(e=!0,a.dispose(),hl-=1)}return{setTheme:m,getTheme:d,getLanguage:f,getLoadedThemes:p,getLoadedLanguages:y,resolveLangAlias:u,loadLanguage:v,loadLanguageSync:g,loadTheme:E,loadThemeSync:w,dispose:C,[Symbol.dispose]:C}}async function Sz(t){t.engine||_z("`engine` option is required. Use `createOnigurumaEngine` or `createJavaScriptRegexEngine` to create an engine.");const[e,n,r]=await Promise.all([zE(t.themes||[]),LE(t.langs||[]),t.engine]);return wz({...t,themes:e,langs:n,engine:r})}async function kz(t){const e=await Sz(t);return{getLastGrammarState:(...n)=>iz(e,...n),codeToTokensBase:(n,r)=>Qy(e,n,r),codeToTokensWithThemes:(n,r)=>jE(e,n,r),codeToTokens:(n,r)=>Ff(e,n,r),codeToHast:(n,r)=>Vf(e,n,r),codeToHtml:(n,r)=>yz(e,n,r),getBundledLanguages:()=>({}),getBundledThemes:()=>({}),...e,getInternalContext:()=>e}}function Ez(t){const e=t.langs,n=t.themes,r=t.engine;async function s(a){function l(p){if(typeof p=="string"){if(p=a.langAlias?.[p]||p,OE(p))return[];const y=e[p];if(!y)throw new Gt(`Language \`${p}\` is not included in this bundle. You may want to load it from external source.`);return y}return p}function u(p){if(IE(p))return"none";if(typeof p=="string"){const y=n[p];if(!y)throw new Gt(`Theme \`${p}\` is not included in this bundle. You may want to load it from external source.`);return y}return p}const f=(a.themes??[]).map(p=>u(p)),d=(a.langs??[]).map(p=>l(p)),m=await kz({engine:a.engine??r(),...a,themes:f,langs:d});return{...m,loadLanguage(...p){return m.loadLanguage(...p.map(l))},loadTheme(...p){return m.loadTheme(...p.map(u))},getBundledLanguages(){return e},getBundledThemes(){return n}}}return s}function Cz(t){let e;async function n(r={}){if(e){const s=await e;return await Promise.all([s.loadTheme(...r.themes||[]),s.loadLanguage(...r.langs||[])]),s}else{e=t({...r,themes:[],langs:[]});const s=await e;return await Promise.all([s.loadTheme(...r.themes||[]),s.loadLanguage(...r.langs||[])]),s}}return n}function Tz(t,e){const n=Cz(t);async function r(s,a){const l=await n({langs:[a.lang],themes:"theme"in a?[a.theme]:Object.values(a.themes)}),u=await e?.guessEmbeddedLanguages?.(s,a.lang,l);return u&&await l.loadLanguage(...u),l}return{getSingletonHighlighter(s){return n(s)},async codeToHtml(s,a){return(await r(s,a)).codeToHtml(s,a)},async codeToHast(s,a){return(await r(s,a)).codeToHast(s,a)},async codeToTokens(s,a){return(await r(s,a)).codeToTokens(s,a)},async codeToTokensBase(s,a){return(await r(s,a)).codeToTokensBase(s,a)},async codeToTokensWithThemes(s,a){return(await r(s,a)).codeToTokensWithThemes(s,a)},async getLastGrammarState(s,a){return(await n({langs:[a.lang],themes:[a.theme]})).getLastGrammarState(s,a)}}}const BE=[{id:"abap",name:"ABAP",import:(()=>z(()=>import("./abap-BdImnpbu.js"),[]))},{id:"actionscript-3",name:"ActionScript",import:(()=>z(()=>import("./actionscript-3-CfeIJUat.js"),[]))},{id:"ada",name:"Ada",import:(()=>z(()=>import("./ada-bCR0ucgS.js"),[]))},{id:"angular-html",name:"Angular HTML",import:(()=>z(()=>import("./angular-html-CU67Zn6k.js").then(t=>t.f),__vite__mapDeps([0,1,2,3])))},{id:"angular-ts",name:"Angular TypeScript",import:(()=>z(()=>import("./angular-ts-BwZT4LLn.js"),__vite__mapDeps([4,0,1,2,3,5])))},{id:"apache",name:"Apache Conf",import:(()=>z(()=>import("./apache-Pmp26Uib.js"),[]))},{id:"apex",name:"Apex",import:(()=>z(()=>import("./apex-DDbsPZ6N.js"),[]))},{id:"apl",name:"APL",import:(()=>z(()=>import("./apl-dKokRX4l.js"),__vite__mapDeps([6,1,2,3,7,8,9])))},{id:"applescript",name:"AppleScript",import:(()=>z(()=>import("./applescript-Co6uUVPk.js"),[]))},{id:"ara",name:"Ara",import:(()=>z(()=>import("./ara-BRHolxvo.js"),[]))},{id:"asciidoc",name:"AsciiDoc",aliases:["adoc"],import:(()=>z(()=>import("./asciidoc-Dv7Oe6Be.js"),[]))},{id:"asm",name:"Assembly",import:(()=>z(()=>import("./asm-D_Q5rh1f.js"),[]))},{id:"astro",name:"Astro",import:(()=>z(()=>import("./astro-CbQHKStN.js"),__vite__mapDeps([10,9,2,11,3,12,13])))},{id:"awk",name:"AWK",import:(()=>z(()=>import("./awk-DMzUqQB5.js"),[]))},{id:"ballerina",name:"Ballerina",import:(()=>z(()=>import("./ballerina-BFfxhgS-.js"),[]))},{id:"bat",name:"Batch File",aliases:["batch"],import:(()=>z(()=>import("./bat-BkioyH1T.js"),[]))},{id:"beancount",name:"Beancount",import:(()=>z(()=>import("./beancount-k_qm7-4y.js"),[]))},{id:"berry",name:"Berry",aliases:["be"],import:(()=>z(()=>import("./berry-uYugtg8r.js"),[]))},{id:"bibtex",name:"BibTeX",import:(()=>z(()=>import("./bibtex-CHM0blh-.js"),[]))},{id:"bicep",name:"Bicep",import:(()=>z(()=>import("./bicep-Bmn6On1c.js"),[]))},{id:"blade",name:"Blade",import:(()=>z(()=>import("./blade-DVc8C-J4.js"),__vite__mapDeps([14,15,1,2,3,7,8,16,9])))},{id:"bsl",name:"1C (Enterprise)",aliases:["1c"],import:(()=>z(()=>import("./bsl-BO_Y6i37.js"),__vite__mapDeps([17,18])))},{id:"c",name:"C",import:(()=>z(()=>import("./c-BIGW1oBm.js"),[]))},{id:"cadence",name:"Cadence",aliases:["cdc"],import:(()=>z(()=>import("./cadence-Bv_4Rxtq.js"),[]))},{id:"cairo",name:"Cairo",import:(()=>z(()=>import("./cairo-KRGpt6FW.js"),__vite__mapDeps([19,20])))},{id:"clarity",name:"Clarity",import:(()=>z(()=>import("./clarity-D53aC0YG.js"),[]))},{id:"clojure",name:"Clojure",aliases:["clj"],import:(()=>z(()=>import("./clojure-P80f7IUj.js"),[]))},{id:"cmake",name:"CMake",import:(()=>z(()=>import("./cmake-D1j8_8rp.js"),[]))},{id:"cobol",name:"COBOL",import:(()=>z(()=>import("./cobol-nwyudZeR.js"),__vite__mapDeps([21,1,2,3,8])))},{id:"codeowners",name:"CODEOWNERS",import:(()=>z(()=>import("./codeowners-Bp6g37R7.js"),[]))},{id:"codeql",name:"CodeQL",aliases:["ql"],import:(()=>z(()=>import("./codeql-DsOJ9woJ.js"),[]))},{id:"coffee",name:"CoffeeScript",aliases:["coffeescript"],import:(()=>z(()=>import("./coffee-Ch7k5sss.js"),__vite__mapDeps([22,2])))},{id:"common-lisp",name:"Common Lisp",aliases:["lisp"],import:(()=>z(()=>import("./common-lisp-Cg-RD9OK.js"),[]))},{id:"coq",name:"Coq",import:(()=>z(()=>import("./coq-DkFqJrB1.js"),[]))},{id:"cpp",name:"C++",aliases:["c++"],import:(()=>z(()=>import("./cpp-CofmeUqb.js"),__vite__mapDeps([23,24,25,26,16])))},{id:"crystal",name:"Crystal",import:(()=>z(()=>import("./crystal-tKQVLTB8.js"),__vite__mapDeps([27,1,2,3,16,26,28])))},{id:"csharp",name:"C#",aliases:["c#","cs"],import:(()=>z(()=>import("./csharp-K5feNrxe.js"),[]))},{id:"css",name:"CSS",import:(()=>z(()=>import("./css-DPfMkruS.js"),[]))},{id:"csv",name:"CSV",import:(()=>z(()=>import("./csv-fuZLfV_i.js"),[]))},{id:"cue",name:"CUE",import:(()=>z(()=>import("./cue-D82EKSYY.js"),[]))},{id:"cypher",name:"Cypher",aliases:["cql"],import:(()=>z(()=>import("./cypher-COkxafJQ.js"),[]))},{id:"d",name:"D",import:(()=>z(()=>import("./d-85-TOEBH.js"),[]))},{id:"dart",name:"Dart",import:(()=>z(()=>import("./dart-CF10PKvl.js"),[]))},{id:"dax",name:"DAX",import:(()=>z(()=>import("./dax-CEL-wOlO.js"),[]))},{id:"desktop",name:"Desktop",import:(()=>z(()=>import("./desktop-BmXAJ9_W.js"),[]))},{id:"diff",name:"Diff",import:(()=>z(()=>import("./diff-D97Zzqfu.js"),[]))},{id:"docker",name:"Dockerfile",aliases:["dockerfile"],import:(()=>z(()=>import("./docker-BcOcwvcX.js"),[]))},{id:"dotenv",name:"dotEnv",import:(()=>z(()=>import("./dotenv-Da5cRb03.js"),[]))},{id:"dream-maker",name:"Dream Maker",import:(()=>z(()=>import("./dream-maker-BtqSS_iP.js"),[]))},{id:"edge",name:"Edge",import:(()=>z(()=>import("./edge-BkV0erSs.js"),__vite__mapDeps([29,11,1,2,3,15])))},{id:"elixir",name:"Elixir",import:(()=>z(()=>import("./elixir-CDX3lj18.js"),__vite__mapDeps([30,1,2,3])))},{id:"elm",name:"Elm",import:(()=>z(()=>import("./elm-DbKCFpqz.js"),__vite__mapDeps([31,25,26])))},{id:"emacs-lisp",name:"Emacs Lisp",aliases:["elisp"],import:(()=>z(()=>import("./emacs-lisp-C9XAeP06.js"),[]))},{id:"erb",name:"ERB",import:(()=>z(()=>import("./erb-BOJIQeun.js"),__vite__mapDeps([32,1,2,3,33,34,7,8,16,35,11,36,13,23,24,25,26,28,37,38])))},{id:"erlang",name:"Erlang",aliases:["erl"],import:(()=>z(()=>import("./erlang-DsQrWhSR.js"),__vite__mapDeps([39,40])))},{id:"fennel",name:"Fennel",import:(()=>z(()=>import("./fennel-BYunw83y.js"),[]))},{id:"fish",name:"Fish",import:(()=>z(()=>import("./fish-BvzEVeQv.js"),[]))},{id:"fluent",name:"Fluent",aliases:["ftl"],import:(()=>z(()=>import("./fluent-C4IJs8-o.js"),[]))},{id:"fortran-fixed-form",name:"Fortran (Fixed Form)",aliases:["f","for","f77"],import:(()=>z(()=>import("./fortran-fixed-form-BZjJHVRy.js"),__vite__mapDeps([41,42])))},{id:"fortran-free-form",name:"Fortran (Free Form)",aliases:["f90","f95","f03","f08","f18"],import:(()=>z(()=>import("./fortran-free-form-D22FLkUw.js"),[]))},{id:"fsharp",name:"F#",aliases:["f#","fs"],import:(()=>z(()=>import("./fsharp-CXgrBDvD.js"),__vite__mapDeps([43,40])))},{id:"gdresource",name:"GDResource",import:(()=>z(()=>import("./gdresource-B7Tvp0Sc.js"),__vite__mapDeps([44,45,46])))},{id:"gdscript",name:"GDScript",import:(()=>z(()=>import("./gdscript-DTMYz4Jt.js"),[]))},{id:"gdshader",name:"GDShader",import:(()=>z(()=>import("./gdshader-DkwncUOv.js"),[]))},{id:"genie",name:"Genie",import:(()=>z(()=>import("./genie-D0YGMca9.js"),[]))},{id:"gherkin",name:"Gherkin",import:(()=>z(()=>import("./gherkin-DyxjwDmM.js"),[]))},{id:"git-commit",name:"Git Commit Message",import:(()=>z(()=>import("./git-commit-F4YmCXRG.js"),__vite__mapDeps([47,48])))},{id:"git-rebase",name:"Git Rebase Message",import:(()=>z(()=>import("./git-rebase-r7XF79zn.js"),__vite__mapDeps([49,28])))},{id:"gleam",name:"Gleam",import:(()=>z(()=>import("./gleam-BspZqrRM.js"),[]))},{id:"glimmer-js",name:"Glimmer JS",aliases:["gjs"],import:(()=>z(()=>import("./glimmer-js-Rg0-pVw9.js"),__vite__mapDeps([50,2,11,3,1])))},{id:"glimmer-ts",name:"Glimmer TS",aliases:["gts"],import:(()=>z(()=>import("./glimmer-ts-U6CK756n.js"),__vite__mapDeps([51,11,3,2,1])))},{id:"glsl",name:"GLSL",import:(()=>z(()=>import("./glsl-DplSGwfg.js"),__vite__mapDeps([25,26])))},{id:"gnuplot",name:"Gnuplot",import:(()=>z(()=>import("./gnuplot-DdkO51Og.js"),[]))},{id:"go",name:"Go",import:(()=>z(()=>import("./go-Dn2_MT6a.js"),[]))},{id:"graphql",name:"GraphQL",aliases:["gql"],import:(()=>z(()=>import("./graphql-ChdNCCLP.js"),__vite__mapDeps([35,2,11,36,13])))},{id:"groovy",name:"Groovy",import:(()=>z(()=>import("./groovy-gcz8RCvz.js"),[]))},{id:"hack",name:"Hack",import:(()=>z(()=>import("./hack-CaT9iCJl.js"),__vite__mapDeps([52,1,2,3,16])))},{id:"haml",name:"Ruby Haml",import:(()=>z(()=>import("./haml-B8DHNrY2.js"),__vite__mapDeps([34,2,3])))},{id:"handlebars",name:"Handlebars",aliases:["hbs"],import:(()=>z(()=>import("./handlebars-BL8al0AC.js"),__vite__mapDeps([53,1,2,3,38])))},{id:"haskell",name:"Haskell",aliases:["hs"],import:(()=>z(()=>import("./haskell-Df6bDoY_.js"),[]))},{id:"haxe",name:"Haxe",import:(()=>z(()=>import("./haxe-CzTSHFRz.js"),[]))},{id:"hcl",name:"HashiCorp HCL",import:(()=>z(()=>import("./hcl-BWvSN4gD.js"),[]))},{id:"hjson",name:"Hjson",import:(()=>z(()=>import("./hjson-D5-asLiD.js"),[]))},{id:"hlsl",name:"HLSL",import:(()=>z(()=>import("./hlsl-D3lLCCz7.js"),[]))},{id:"html",name:"HTML",import:(()=>z(()=>import("./html-GMplVEZG.js"),__vite__mapDeps([1,2,3])))},{id:"html-derivative",name:"HTML (Derivative)",import:(()=>z(()=>import("./html-derivative-BFtXZ54Q.js"),__vite__mapDeps([15,1,2,3])))},{id:"http",name:"HTTP",import:(()=>z(()=>import("./http-jrhK8wxY.js"),__vite__mapDeps([54,28,9,7,8,35,2,11,36,13])))},{id:"hurl",name:"Hurl",import:(()=>z(()=>import("./hurl-irOxFIW8.js"),__vite__mapDeps([55,35,2,11,36,13,7,8,56])))},{id:"hxml",name:"HXML",import:(()=>z(()=>import("./hxml-Bvhsp5Yf.js"),__vite__mapDeps([57,58])))},{id:"hy",name:"Hy",import:(()=>z(()=>import("./hy-DFXneXwc.js"),[]))},{id:"imba",name:"Imba",import:(()=>z(()=>import("./imba-DGztddWO.js"),[]))},{id:"ini",name:"INI",aliases:["properties"],import:(()=>z(()=>import("./ini-BEwlwnbL.js"),[]))},{id:"java",name:"Java",import:(()=>z(()=>import("./java-CylS5w8V.js"),[]))},{id:"javascript",name:"JavaScript",aliases:["js","cjs","mjs"],import:(()=>z(()=>import("./javascript-wDzz0qaB.js"),[]))},{id:"jinja",name:"Jinja",import:(()=>z(()=>import("./jinja-4LBKfQ-Z.js"),__vite__mapDeps([59,1,2,3])))},{id:"jison",name:"Jison",import:(()=>z(()=>import("./jison-wvAkD_A8.js"),__vite__mapDeps([60,2])))},{id:"json",name:"JSON",import:(()=>z(()=>import("./json-Cp-IABpG.js"),[]))},{id:"json5",name:"JSON5",import:(()=>z(()=>import("./json5-C9tS-k6U.js"),[]))},{id:"jsonc",name:"JSON with Comments",import:(()=>z(()=>import("./jsonc-Des-eS-w.js"),[]))},{id:"jsonl",name:"JSON Lines",import:(()=>z(()=>import("./jsonl-DcaNXYhu.js"),[]))},{id:"jsonnet",name:"Jsonnet",import:(()=>z(()=>import("./jsonnet-DFQXde-d.js"),[]))},{id:"jssm",name:"JSSM",aliases:["fsl"],import:(()=>z(()=>import("./jssm-C2t-YnRu.js"),[]))},{id:"jsx",name:"JSX",import:(()=>z(()=>import("./jsx-g9-lgVsj.js"),[]))},{id:"julia",name:"Julia",aliases:["jl"],import:(()=>z(()=>import("./julia-C8NyazO9.js"),__vite__mapDeps([61,23,24,25,26,16,20,2,62])))},{id:"kdl",name:"KDL",import:(()=>z(()=>import("./kdl-DV7GczEv.js"),[]))},{id:"kotlin",name:"Kotlin",aliases:["kt","kts"],import:(()=>z(()=>import("./kotlin-BdnUsdx6.js"),[]))},{id:"kusto",name:"Kusto",aliases:["kql"],import:(()=>z(()=>import("./kusto-BvAqAH-y.js"),[]))},{id:"latex",name:"LaTeX",import:(()=>z(()=>import("./latex-BdAV_C_H.js"),__vite__mapDeps([63,64,62])))},{id:"lean",name:"Lean 4",aliases:["lean4"],import:(()=>z(()=>import("./lean-Bc6EcWN3.js"),[]))},{id:"less",name:"Less",import:(()=>z(()=>import("./less-B1dDrJ26.js"),[]))},{id:"liquid",name:"Liquid",import:(()=>z(()=>import("./liquid-DYVedYrR.js"),__vite__mapDeps([65,1,2,3,9])))},{id:"llvm",name:"LLVM IR",import:(()=>z(()=>import("./llvm-BtvRca6l.js"),[]))},{id:"log",name:"Log file",import:(()=>z(()=>import("./log-2UxHyX5q.js"),[]))},{id:"logo",name:"Logo",import:(()=>z(()=>import("./logo-BtOb2qkB.js"),[]))},{id:"lua",name:"Lua",import:(()=>z(()=>import("./lua-BbnMAYS6.js"),__vite__mapDeps([37,26])))},{id:"luau",name:"Luau",import:(()=>z(()=>import("./luau-CXu1NL6O.js"),[]))},{id:"make",name:"Makefile",aliases:["makefile"],import:(()=>z(()=>import("./make-CHLpvVh8.js"),[]))},{id:"markdown",name:"Markdown",aliases:["md"],import:(()=>z(()=>import("./markdown-Cvjx9yec.js"),[]))},{id:"marko",name:"Marko",import:(()=>z(()=>import("./marko-CPi9NSCl.js"),__vite__mapDeps([66,3,67,5,11])))},{id:"matlab",name:"MATLAB",import:(()=>z(()=>import("./matlab-D7o27uSR.js"),[]))},{id:"mdc",name:"MDC",import:(()=>z(()=>import("./mdc-DUICxH0z.js"),__vite__mapDeps([68,40,38,15,1,2,3])))},{id:"mdx",name:"MDX",import:(()=>z(()=>import("./mdx-Cmh6b_Ma.js"),[]))},{id:"mermaid",name:"Mermaid",aliases:["mmd"],import:(()=>z(()=>import("./mermaid-DKYwYmdq.js"),[]))},{id:"mipsasm",name:"MIPS Assembly",aliases:["mips"],import:(()=>z(()=>import("./mipsasm-CKIfxQSi.js"),[]))},{id:"mojo",name:"Mojo",import:(()=>z(()=>import("./mojo-1DNp92w6.js"),[]))},{id:"move",name:"Move",import:(()=>z(()=>import("./move-Bu9oaDYs.js"),[]))},{id:"narrat",name:"Narrat Language",aliases:["nar"],import:(()=>z(()=>import("./narrat-DRg8JJMk.js"),[]))},{id:"nextflow",name:"Nextflow",aliases:["nf"],import:(()=>z(()=>import("./nextflow-BrzmwbiE.js"),[]))},{id:"nginx",name:"Nginx",import:(()=>z(()=>import("./nginx-DknmC5AR.js"),__vite__mapDeps([69,37,26])))},{id:"nim",name:"Nim",import:(()=>z(()=>import("./nim-CVrawwO9.js"),__vite__mapDeps([70,26,1,2,3,7,8,25,40])))},{id:"nix",name:"Nix",import:(()=>z(()=>import("./nix-c8nO5XWb.js"),[]))},{id:"nushell",name:"nushell",aliases:["nu"],import:(()=>z(()=>import("./nushell-C-sUppwS.js"),[]))},{id:"objective-c",name:"Objective-C",aliases:["objc"],import:(()=>z(()=>import("./objective-c-DXmwc3jG.js"),[]))},{id:"objective-cpp",name:"Objective-C++",import:(()=>z(()=>import("./objective-cpp-CLxacb5B.js"),[]))},{id:"ocaml",name:"OCaml",import:(()=>z(()=>import("./ocaml-C0hk2d4L.js"),[]))},{id:"openscad",name:"OpenSCAD",aliases:["scad"],import:(()=>z(()=>import("./openscad-C4EeE6gA.js"),[]))},{id:"pascal",name:"Pascal",import:(()=>z(()=>import("./pascal-D93ZcfNL.js"),[]))},{id:"perl",name:"Perl",import:(()=>z(()=>import("./perl-C0TMdlhV.js"),__vite__mapDeps([71,1,2,3,7,8,16])))},{id:"php",name:"PHP",import:(()=>z(()=>import("./php-CDn_0X-4.js"),__vite__mapDeps([72,1,2,3,7,8,16,9])))},{id:"pkl",name:"Pkl",import:(()=>z(()=>import("./pkl-u5AG7uiY.js"),[]))},{id:"plsql",name:"PL/SQL",import:(()=>z(()=>import("./plsql-ChMvpjG-.js"),[]))},{id:"po",name:"Gettext PO",aliases:["pot","potx"],import:(()=>z(()=>import("./po-BTJTHyun.js"),[]))},{id:"polar",name:"Polar",import:(()=>z(()=>import("./polar-C0HS_06l.js"),[]))},{id:"postcss",name:"PostCSS",import:(()=>z(()=>import("./postcss-CXtECtnM.js"),[]))},{id:"powerquery",name:"PowerQuery",import:(()=>z(()=>import("./powerquery-CEu0bR-o.js"),[]))},{id:"powershell",name:"PowerShell",aliases:["ps","ps1"],import:(()=>z(()=>import("./powershell-Dpen1YoG.js"),[]))},{id:"prisma",name:"Prisma",import:(()=>z(()=>import("./prisma-Dd19v3D-.js"),[]))},{id:"prolog",name:"Prolog",import:(()=>z(()=>import("./prolog-CbFg5uaA.js"),[]))},{id:"proto",name:"Protocol Buffer 3",aliases:["protobuf"],import:(()=>z(()=>import("./proto-DyJlTyXw.js"),[]))},{id:"pug",name:"Pug",aliases:["jade"],import:(()=>z(()=>import("./pug-CGlum2m_.js"),__vite__mapDeps([73,2,3,1])))},{id:"puppet",name:"Puppet",import:(()=>z(()=>import("./puppet-BMWR74SV.js"),[]))},{id:"purescript",name:"PureScript",import:(()=>z(()=>import("./purescript-CklMAg4u.js"),[]))},{id:"python",name:"Python",aliases:["py"],import:(()=>z(()=>import("./python-B6aJPvgy.js"),[]))},{id:"qml",name:"QML",import:(()=>z(()=>import("./qml-3beO22l8.js"),__vite__mapDeps([74,2])))},{id:"qmldir",name:"QML Directory",import:(()=>z(()=>import("./qmldir-C8lEn-DE.js"),[]))},{id:"qss",name:"Qt Style Sheets",import:(()=>z(()=>import("./qss-IeuSbFQv.js"),[]))},{id:"r",name:"R",import:(()=>z(()=>import("./r-DiinP2Uv.js"),[]))},{id:"racket",name:"Racket",import:(()=>z(()=>import("./racket-BqYA7rlc.js"),[]))},{id:"raku",name:"Raku",aliases:["perl6"],import:(()=>z(()=>import("./raku-DXvB9xmW.js"),[]))},{id:"razor",name:"ASP.NET Razor",import:(()=>z(()=>import("./razor-CE9lU5zL.js"),__vite__mapDeps([75,1,2,3,76])))},{id:"reg",name:"Windows Registry Script",import:(()=>z(()=>import("./reg-C-SQnVFl.js"),[]))},{id:"regexp",name:"RegExp",aliases:["regex"],import:(()=>z(()=>import("./regexp-CDVJQ6XC.js"),[]))},{id:"rel",name:"Rel",import:(()=>z(()=>import("./rel-C3B-1QV4.js"),[]))},{id:"riscv",name:"RISC-V",import:(()=>z(()=>import("./riscv-BM1_JUlF.js"),[]))},{id:"rosmsg",name:"ROS Interface",import:(()=>z(()=>import("./rosmsg-BJDFO7_C.js"),[]))},{id:"rst",name:"reStructuredText",import:(()=>z(()=>import("./rst-B0xPkSld.js"),__vite__mapDeps([77,15,1,2,3,23,24,25,26,16,20,28,38,78,33,34,7,8,35,11,36,13,37])))},{id:"ruby",name:"Ruby",aliases:["rb"],import:(()=>z(()=>import("./ruby-BvKwtOVI.js"),__vite__mapDeps([33,1,2,3,34,7,8,16,35,11,36,13,23,24,25,26,28,37,38])))},{id:"rust",name:"Rust",aliases:["rs"],import:(()=>z(()=>import("./rust-B1yitclQ.js"),[]))},{id:"sas",name:"SAS",import:(()=>z(()=>import("./sas-cz2c8ADy.js"),__vite__mapDeps([79,16])))},{id:"sass",name:"Sass",import:(()=>z(()=>import("./sass-Cj5Yp3dK.js"),[]))},{id:"scala",name:"Scala",import:(()=>z(()=>import("./scala-C151Ov-r.js"),[]))},{id:"scheme",name:"Scheme",import:(()=>z(()=>import("./scheme-C98Dy4si.js"),[]))},{id:"scss",name:"SCSS",import:(()=>z(()=>import("./scss-OYdSNvt2.js"),__vite__mapDeps([5,3])))},{id:"sdbl",name:"1C (Query)",aliases:["1c-query"],import:(()=>z(()=>import("./sdbl-DVxCFoDh.js"),[]))},{id:"shaderlab",name:"ShaderLab",aliases:["shader"],import:(()=>z(()=>import("./shaderlab-Dg9Lc6iA.js"),__vite__mapDeps([80,81])))},{id:"shellscript",name:"Shell",aliases:["bash","sh","shell","zsh"],import:(()=>z(()=>import("./shellscript-Yzrsuije.js"),[]))},{id:"shellsession",name:"Shell Session",aliases:["console"],import:(()=>z(()=>import("./shellsession-BADoaaVG.js"),__vite__mapDeps([82,28])))},{id:"smalltalk",name:"Smalltalk",import:(()=>z(()=>import("./smalltalk-BERRCDM3.js"),[]))},{id:"solidity",name:"Solidity",import:(()=>z(()=>import("./solidity-rGO070M0.js"),[]))},{id:"soy",name:"Closure Templates",aliases:["closure-templates"],import:(()=>z(()=>import("./soy-Brmx7dQM.js"),__vite__mapDeps([83,1,2,3])))},{id:"sparql",name:"SPARQL",import:(()=>z(()=>import("./sparql-rVzFXLq3.js"),__vite__mapDeps([84,85])))},{id:"splunk",name:"Splunk Query Language",aliases:["spl"],import:(()=>z(()=>import("./splunk-BtCnVYZw.js"),[]))},{id:"sql",name:"SQL",import:(()=>z(()=>import("./sql-BLtJtn59.js"),[]))},{id:"ssh-config",name:"SSH Config",import:(()=>z(()=>import("./ssh-config-_ykCGR6B.js"),[]))},{id:"stata",name:"Stata",import:(()=>z(()=>import("./stata-BH5u7GGu.js"),__vite__mapDeps([86,16])))},{id:"stylus",name:"Stylus",aliases:["styl"],import:(()=>z(()=>import("./stylus-BEDo0Tqx.js"),[]))},{id:"svelte",name:"Svelte",import:(()=>z(()=>import("./svelte-3Dk4HxPD.js"),__vite__mapDeps([87,2,11,3,12])))},{id:"swift",name:"Swift",import:(()=>z(()=>import("./swift-Dg5xB15N.js"),[]))},{id:"system-verilog",name:"SystemVerilog",import:(()=>z(()=>import("./system-verilog-CnnmHF94.js"),[]))},{id:"systemd",name:"Systemd Units",import:(()=>z(()=>import("./systemd-4A_iFExJ.js"),[]))},{id:"talonscript",name:"TalonScript",aliases:["talon"],import:(()=>z(()=>import("./talonscript-CkByrt1z.js"),[]))},{id:"tasl",name:"Tasl",import:(()=>z(()=>import("./tasl-QIJgUcNo.js"),[]))},{id:"tcl",name:"Tcl",import:(()=>z(()=>import("./tcl-dwOrl1Do.js"),[]))},{id:"templ",name:"Templ",import:(()=>z(()=>import("./templ-W15q3VgB.js"),__vite__mapDeps([88,89,2,3])))},{id:"terraform",name:"Terraform",aliases:["tf","tfvars"],import:(()=>z(()=>import("./terraform-BETggiCN.js"),[]))},{id:"tex",name:"TeX",import:(()=>z(()=>import("./tex-CxkMU7Pf.js"),__vite__mapDeps([64,62])))},{id:"toml",name:"TOML",import:(()=>z(()=>import("./toml-vGWfd6FD.js"),[]))},{id:"ts-tags",name:"TypeScript with Tags",aliases:["lit"],import:(()=>z(()=>import("./ts-tags-zn1MmPIZ.js"),__vite__mapDeps([90,11,3,2,25,26,1,16,7,8])))},{id:"tsv",name:"TSV",import:(()=>z(()=>import("./tsv-B_m7g4N7.js"),[]))},{id:"tsx",name:"TSX",import:(()=>z(()=>import("./tsx-COt5Ahok.js"),[]))},{id:"turtle",name:"Turtle",import:(()=>z(()=>import("./turtle-BsS91CYL.js"),[]))},{id:"twig",name:"Twig",import:(()=>z(()=>import("./twig-CO9l9SDP.js"),__vite__mapDeps([91,3,2,5,72,1,7,8,16,9,20,33,34,35,11,36,13,23,24,25,26,28,37,38])))},{id:"typescript",name:"TypeScript",aliases:["ts","cts","mts"],import:(()=>z(()=>import("./typescript-BPQ3VLAy.js"),[]))},{id:"typespec",name:"TypeSpec",aliases:["tsp"],import:(()=>z(()=>import("./typespec-BGHnOYBU.js"),[]))},{id:"typst",name:"Typst",aliases:["typ"],import:(()=>z(()=>import("./typst-DHCkPAjA.js"),[]))},{id:"v",name:"V",import:(()=>z(()=>import("./v-BcVCzyr7.js"),[]))},{id:"vala",name:"Vala",import:(()=>z(()=>import("./vala-CsfeWuGM.js"),[]))},{id:"vb",name:"Visual Basic",aliases:["cmd"],import:(()=>z(()=>import("./vb-D17OF-Vu.js"),[]))},{id:"verilog",name:"Verilog",import:(()=>z(()=>import("./verilog-BQ8w6xss.js"),[]))},{id:"vhdl",name:"VHDL",import:(()=>z(()=>import("./vhdl-CeAyd5Ju.js"),[]))},{id:"viml",name:"Vim Script",aliases:["vim","vimscript"],import:(()=>z(()=>import("./viml-CJc9bBzg.js"),[]))},{id:"vue",name:"Vue",import:(()=>z(()=>import("./vue-DnHKYNfI.js"),__vite__mapDeps([92,3,2,11,9,15,1])))},{id:"vue-html",name:"Vue HTML",import:(()=>z(()=>import("./vue-html-CChd_i61.js"),__vite__mapDeps([93,92,3,2,11,9,15,1])))},{id:"vue-vine",name:"Vue Vine",import:(()=>z(()=>import("./vue-vine-8moa0y9V.js"),__vite__mapDeps([94,3,5,67,95,12,92,2,11,9,15,1])))},{id:"vyper",name:"Vyper",aliases:["vy"],import:(()=>z(()=>import("./vyper-CDx5xZoG.js"),[]))},{id:"wasm",name:"WebAssembly",import:(()=>z(()=>import("./wasm-MzD3tlZU.js"),[]))},{id:"wenyan",name:"Wenyan",aliases:[""],import:(()=>z(()=>import("./wenyan-BV7otONQ.js"),[]))},{id:"wgsl",name:"WGSL",import:(()=>z(()=>import("./wgsl-Dx-B1_4e.js"),[]))},{id:"wikitext",name:"Wikitext",aliases:["mediawiki","wiki"],import:(()=>z(()=>import("./wikitext-BhOHFoWU.js"),[]))},{id:"wit",name:"WebAssembly Interface Types",import:(()=>z(()=>import("./wit-5i3qLPDT.js"),[]))},{id:"wolfram",name:"Wolfram",aliases:["wl"],import:(()=>z(()=>import("./wolfram-lXgVvXCa.js"),[]))},{id:"xml",name:"XML",import:(()=>z(()=>import("./xml-sdJ4AIDG.js"),__vite__mapDeps([7,8])))},{id:"xsl",name:"XSL",import:(()=>z(()=>import("./xsl-CtQFsRM5.js"),__vite__mapDeps([96,7,8])))},{id:"yaml",name:"YAML",aliases:["yml"],import:(()=>z(()=>import("./yaml-Buea-lGh.js"),[]))},{id:"zenscript",name:"ZenScript",import:(()=>z(()=>import("./zenscript-DVFEvuxE.js"),[]))},{id:"zig",name:"Zig",import:(()=>z(()=>import("./zig-VOosw3JB.js"),[]))}],Az=Object.fromEntries(BE.map(t=>[t.id,t.import])),Rz=Object.fromEntries(BE.flatMap(t=>t.aliases?.map(e=>[e,t.import])||[])),Oz={...Az,...Rz},Iz=[{id:"andromeeda",displayName:"Andromeeda",type:"dark",import:(()=>z(()=>import("./andromeeda-C-Jbm3Hp.js"),[]))},{id:"aurora-x",displayName:"Aurora X",type:"dark",import:(()=>z(()=>import("./aurora-x-D-2ljcwZ.js"),[]))},{id:"ayu-dark",displayName:"Ayu Dark",type:"dark",import:(()=>z(()=>import("./ayu-dark-Cv9koXgw.js"),[]))},{id:"catppuccin-frappe",displayName:"Catppuccin Frapp",type:"dark",import:(()=>z(()=>import("./catppuccin-frappe-DFWUc33u.js"),[]))},{id:"catppuccin-latte",displayName:"Catppuccin Latte",type:"light",import:(()=>z(()=>import("./catppuccin-latte-C9dUb6Cb.js"),[]))},{id:"catppuccin-macchiato",displayName:"Catppuccin Macchiato",type:"dark",import:(()=>z(()=>import("./catppuccin-macchiato-DQyhUUbL.js"),[]))},{id:"catppuccin-mocha",displayName:"Catppuccin Mocha",type:"dark",import:(()=>z(()=>import("./catppuccin-mocha-D87Tk5Gz.js"),[]))},{id:"dark-plus",displayName:"Dark Plus",type:"dark",import:(()=>z(()=>import("./dark-plus-C3mMm8J8.js"),[]))},{id:"dracula",displayName:"Dracula Theme",type:"dark",import:(()=>z(()=>import("./dracula-BzJJZx-M.js"),[]))},{id:"dracula-soft",displayName:"Dracula Theme Soft",type:"dark",import:(()=>z(()=>import("./dracula-soft-BXkSAIEj.js"),[]))},{id:"everforest-dark",displayName:"Everforest Dark",type:"dark",import:(()=>z(()=>import("./everforest-dark-BgDCqdQA.js"),[]))},{id:"everforest-light",displayName:"Everforest Light",type:"light",import:(()=>z(()=>import("./everforest-light-C8M2exoo.js"),[]))},{id:"github-dark",displayName:"GitHub Dark",type:"dark",import:(()=>z(()=>import("./github-dark-DHJKELXO.js"),[]))},{id:"github-dark-default",displayName:"GitHub Dark Default",type:"dark",import:(()=>z(()=>import("./github-dark-default-Cuk6v7N8.js"),[]))},{id:"github-dark-dimmed",displayName:"GitHub Dark Dimmed",type:"dark",import:(()=>z(()=>import("./github-dark-dimmed-DH5Ifo-i.js"),[]))},{id:"github-dark-high-contrast",displayName:"GitHub Dark High Contrast",type:"dark",import:(()=>z(()=>import("./github-dark-high-contrast-E3gJ1_iC.js"),[]))},{id:"github-light",displayName:"GitHub Light",type:"light",import:(()=>z(()=>import("./github-light-DAi9KRSo.js"),[]))},{id:"github-light-default",displayName:"GitHub Light Default",type:"light",import:(()=>z(()=>import("./github-light-default-D7oLnXFd.js"),[]))},{id:"github-light-high-contrast",displayName:"GitHub Light High Contrast",type:"light",import:(()=>z(()=>import("./github-light-high-contrast-BfjtVDDH.js"),[]))},{id:"gruvbox-dark-hard",displayName:"Gruvbox Dark Hard",type:"dark",import:(()=>z(()=>import("./gruvbox-dark-hard-CFHQjOhq.js"),[]))},{id:"gruvbox-dark-medium",displayName:"Gruvbox Dark Medium",type:"dark",import:(()=>z(()=>import("./gruvbox-dark-medium-GsRaNv29.js"),[]))},{id:"gruvbox-dark-soft",displayName:"Gruvbox Dark Soft",type:"dark",import:(()=>z(()=>import("./gruvbox-dark-soft-CVdnzihN.js"),[]))},{id:"gruvbox-light-hard",displayName:"Gruvbox Light Hard",type:"light",import:(()=>z(()=>import("./gruvbox-light-hard-CH1njM8p.js"),[]))},{id:"gruvbox-light-medium",displayName:"Gruvbox Light Medium",type:"light",import:(()=>z(()=>import("./gruvbox-light-medium-DRw_LuNl.js"),[]))},{id:"gruvbox-light-soft",displayName:"Gruvbox Light Soft",type:"light",import:(()=>z(()=>import("./gruvbox-light-soft-hJgmCMqR.js"),[]))},{id:"houston",displayName:"Houston",type:"dark",import:(()=>z(()=>import("./houston-DnULxvSX.js"),[]))},{id:"kanagawa-dragon",displayName:"Kanagawa Dragon",type:"dark",import:(()=>z(()=>import("./kanagawa-dragon-CkXjmgJE.js"),[]))},{id:"kanagawa-lotus",displayName:"Kanagawa Lotus",type:"light",import:(()=>z(()=>import("./kanagawa-lotus-CfQXZHmo.js"),[]))},{id:"kanagawa-wave",displayName:"Kanagawa Wave",type:"dark",import:(()=>z(()=>import("./kanagawa-wave-DWedfzmr.js"),[]))},{id:"laserwave",displayName:"LaserWave",type:"dark",import:(()=>z(()=>import("./laserwave-DUszq2jm.js"),[]))},{id:"light-plus",displayName:"Light Plus",type:"light",import:(()=>z(()=>import("./light-plus-B7mTdjB0.js"),[]))},{id:"material-theme",displayName:"Material Theme",type:"dark",import:(()=>z(()=>import("./material-theme-D5KoaKCx.js"),[]))},{id:"material-theme-darker",displayName:"Material Theme Darker",type:"dark",import:(()=>z(()=>import("./material-theme-darker-BfHTSMKl.js"),[]))},{id:"material-theme-lighter",displayName:"Material Theme Lighter",type:"light",import:(()=>z(()=>import("./material-theme-lighter-B0m2ddpp.js"),[]))},{id:"material-theme-ocean",displayName:"Material Theme Ocean",type:"dark",import:(()=>z(()=>import("./material-theme-ocean-CyktbL80.js"),[]))},{id:"material-theme-palenight",displayName:"Material Theme Palenight",type:"dark",import:(()=>z(()=>import("./material-theme-palenight-Csfq5Kiy.js"),[]))},{id:"min-dark",displayName:"Min Dark",type:"dark",import:(()=>z(()=>import("./min-dark-CafNBF8u.js"),[]))},{id:"min-light",displayName:"Min Light",type:"light",import:(()=>z(()=>import("./min-light-CTRr51gU.js"),[]))},{id:"monokai",displayName:"Monokai",type:"dark",import:(()=>z(()=>import("./monokai-D4h5O-jR.js"),[]))},{id:"night-owl",displayName:"Night Owl",type:"dark",import:(()=>z(()=>import("./night-owl-C39BiMTA.js"),[]))},{id:"nord",displayName:"Nord",type:"dark",import:(()=>z(()=>import("./nord-Ddv68eIx.js"),[]))},{id:"one-dark-pro",displayName:"One Dark Pro",type:"dark",import:(()=>z(()=>import("./one-dark-pro-DVMEJ2y_.js"),[]))},{id:"one-light",displayName:"One Light",type:"light",import:(()=>z(()=>import("./one-light-PoHY5YXO.js"),[]))},{id:"plastic",displayName:"Plastic",type:"dark",import:(()=>z(()=>import("./plastic-3e1v2bzS.js"),[]))},{id:"poimandres",displayName:"Poimandres",type:"dark",import:(()=>z(()=>import("./poimandres-CS3Unz2-.js"),[]))},{id:"red",displayName:"Red",type:"dark",import:(()=>z(()=>import("./red-bN70gL4F.js"),[]))},{id:"rose-pine",displayName:"Ros Pine",type:"dark",import:(()=>z(()=>import("./rose-pine-qdsjHGoJ.js"),[]))},{id:"rose-pine-dawn",displayName:"Ros Pine Dawn",type:"light",import:(()=>z(()=>import("./rose-pine-dawn-DHQR4-dF.js"),[]))},{id:"rose-pine-moon",displayName:"Ros Pine Moon",type:"dark",import:(()=>z(()=>import("./rose-pine-moon-D4_iv3hh.js"),[]))},{id:"slack-dark",displayName:"Slack Dark",type:"dark",import:(()=>z(()=>import("./slack-dark-BthQWCQV.js"),[]))},{id:"slack-ochin",displayName:"Slack Ochin",type:"light",import:(()=>z(()=>import("./slack-ochin-DqwNpetd.js"),[]))},{id:"snazzy-light",displayName:"Snazzy Light",type:"light",import:(()=>z(()=>import("./snazzy-light-Bw305WKR.js"),[]))},{id:"solarized-dark",displayName:"Solarized Dark",type:"dark",import:(()=>z(()=>import("./solarized-dark-DXbdFlpD.js"),[]))},{id:"solarized-light",displayName:"Solarized Light",type:"light",import:(()=>z(()=>import("./solarized-light-L9t79GZl.js"),[]))},{id:"synthwave-84",displayName:"Synthwave '84",type:"dark",import:(()=>z(()=>import("./synthwave-84-CbfX1IO0.js"),[]))},{id:"tokyo-night",displayName:"Tokyo Night",type:"dark",import:(()=>z(()=>import("./tokyo-night-hegEt444.js"),[]))},{id:"vesper",displayName:"Vesper",type:"dark",import:(()=>z(()=>import("./vesper-DU1UobuO.js"),[]))},{id:"vitesse-black",displayName:"Vitesse Black",type:"dark",import:(()=>z(()=>import("./vitesse-black-Bkuqu6BP.js"),[]))},{id:"vitesse-dark",displayName:"Vitesse Dark",type:"dark",import:(()=>z(()=>import("./vitesse-dark-D0r3Knsf.js"),[]))},{id:"vitesse-light",displayName:"Vitesse Light",type:"light",import:(()=>z(()=>import("./vitesse-light-CVO1_9PV.js"),[]))}],Nz=Object.fromEntries(Iz.map(t=>[t.id,t.import]));class Xy extends Error{constructor(e){super(e),this.name="ShikiError"}}function Mz(){return 2147483648}function Dz(){return typeof performance<"u"?performance.now():Date.now()}const jz=(t,e)=>t+(e-t%e)%e;async function Lz(t){let e,n;const r={};function s(g){n=g,r.HEAPU8=new Uint8Array(g),r.HEAPU32=new Uint32Array(g)}function a(g,v,w){r.HEAPU8.copyWithin(g,v,v+w)}function l(g){try{return e.grow(g-n.byteLength+65535>>>16),s(e.buffer),1}catch{}}function u(g){const v=r.HEAPU8.length;g=g>>>0;const w=Mz();if(g>w)return!1;for(let E=1;E<=4;E*=2){let k=v*(1+.2/E);k=Math.min(k,g+100663296);const C=Math.min(w,jz(Math.max(g,k),65536));if(l(C))return!0}return!1}const f=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function d(g,v,w=1024){const E=v+w;let k=v;for(;g[k]&&!(k>=E);)++k;if(k-v>16&&g.buffer&&f)return f.decode(g.subarray(v,k));let C="";for(;v<k;){let T=g[v++];if(!(T&128)){C+=String.fromCharCode(T);continue}const D=g[v++]&63;if((T&224)===192){C+=String.fromCharCode((T&31)<<6|D);continue}const N=g[v++]&63;if((T&240)===224?T=(T&15)<<12|D<<6|N:T=(T&7)<<18|D<<12|N<<6|g[v++]&63,T<65536)C+=String.fromCharCode(T);else{const R=T-65536;C+=String.fromCharCode(55296|R>>10,56320|R&1023)}}return C}function m(g,v){return g?d(r.HEAPU8,g,v):""}const p={emscripten_get_now:Dz,emscripten_memcpy_big:a,emscripten_resize_heap:u,fd_write:()=>0};async function y(){const v=await t({env:p,wasi_snapshot_preview1:p});e=v.memory,s(e.buffer),Object.assign(r,v),r.UTF8ToString=m}return await y(),r}var zz=Object.defineProperty,Pz=(t,e,n)=>e in t?zz(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,en=(t,e,n)=>Pz(t,typeof e!="symbol"?e+"":e,n);let dn=null;function Bz(t){throw new Xy(t.UTF8ToString(t.getLastOnigError()))}class bd{constructor(e){en(this,"utf16Length"),en(this,"utf8Length"),en(this,"utf16Value"),en(this,"utf8Value"),en(this,"utf16OffsetToUtf8"),en(this,"utf8OffsetToUtf16");const n=e.length,r=bd._utf8ByteLength(e),s=r!==n,a=s?new Uint32Array(n+1):null;s&&(a[n]=r);const l=s?new Uint32Array(r+1):null;s&&(l[r]=n);const u=new Uint8Array(r);let f=0;for(let d=0;d<n;d++){const m=e.charCodeAt(d);let p=m,y=!1;if(m>=55296&&m<=56319&&d+1<n){const g=e.charCodeAt(d+1);g>=56320&&g<=57343&&(p=(m-55296<<10)+65536|g-56320,y=!0)}s&&(a[d]=f,y&&(a[d+1]=f),p<=127?l[f+0]=d:p<=2047?(l[f+0]=d,l[f+1]=d):p<=65535?(l[f+0]=d,l[f+1]=d,l[f+2]=d):(l[f+0]=d,l[f+1]=d,l[f+2]=d,l[f+3]=d)),p<=127?u[f++]=p:p<=2047?(u[f++]=192|(p&1984)>>>6,u[f++]=128|(p&63)>>>0):p<=65535?(u[f++]=224|(p&61440)>>>12,u[f++]=128|(p&4032)>>>6,u[f++]=128|(p&63)>>>0):(u[f++]=240|(p&1835008)>>>18,u[f++]=128|(p&258048)>>>12,u[f++]=128|(p&4032)>>>6,u[f++]=128|(p&63)>>>0),y&&d++}this.utf16Length=n,this.utf8Length=r,this.utf16Value=e,this.utf8Value=u,this.utf16OffsetToUtf8=a,this.utf8OffsetToUtf16=l}static _utf8ByteLength(e){let n=0;for(let r=0,s=e.length;r<s;r++){const a=e.charCodeAt(r);let l=a,u=!1;if(a>=55296&&a<=56319&&r+1<s){const f=e.charCodeAt(r+1);f>=56320&&f<=57343&&(l=(a-55296<<10)+65536|f-56320,u=!0)}l<=127?n+=1:l<=2047?n+=2:l<=65535?n+=3:n+=4,u&&r++}return n}createString(e){const n=e.omalloc(this.utf8Length);return e.HEAPU8.set(this.utf8Value,n),n}}const _d=class Jr{constructor(e){if(en(this,"id",++Jr.LAST_ID),en(this,"_onigBinding"),en(this,"content"),en(this,"utf16Length"),en(this,"utf8Length"),en(this,"utf16OffsetToUtf8"),en(this,"utf8OffsetToUtf16"),en(this,"ptr"),!dn)throw new Xy("Must invoke loadWasm first.");this._onigBinding=dn,this.content=e;const n=new bd(e);this.utf16Length=n.utf16Length,this.utf8Length=n.utf8Length,this.utf16OffsetToUtf8=n.utf16OffsetToUtf8,this.utf8OffsetToUtf16=n.utf8OffsetToUtf16,this.utf8Length<1e4&&!Jr._sharedPtrInUse?(Jr._sharedPtr||(Jr._sharedPtr=dn.omalloc(1e4)),Jr._sharedPtrInUse=!0,dn.HEAPU8.set(n.utf8Value,Jr._sharedPtr),this.ptr=Jr._sharedPtr):this.ptr=n.createString(dn)}convertUtf8OffsetToUtf16(e){return this.utf8OffsetToUtf16?e<0?0:e>this.utf8Length?this.utf16Length:this.utf8OffsetToUtf16[e]:e}convertUtf16OffsetToUtf8(e){return this.utf16OffsetToUtf8?e<0?0:e>this.utf16Length?this.utf8Length:this.utf16OffsetToUtf8[e]:e}dispose(){this.ptr===Jr._sharedPtr?Jr._sharedPtrInUse=!1:this._onigBinding.ofree(this.ptr)}};en(_d,"LAST_ID",0);en(_d,"_sharedPtr",0);en(_d,"_sharedPtrInUse",!1);let $E=_d;class $z{constructor(e){if(en(this,"_onigBinding"),en(this,"_ptr"),!dn)throw new Xy("Must invoke loadWasm first.");const n=[],r=[];for(let u=0,f=e.length;u<f;u++){const d=new bd(e[u]);n[u]=d.createString(dn),r[u]=d.utf8Length}const s=dn.omalloc(4*e.length);dn.HEAPU32.set(n,s/4);const a=dn.omalloc(4*e.length);dn.HEAPU32.set(r,a/4);const l=dn.createOnigScanner(s,a,e.length);for(let u=0,f=e.length;u<f;u++)dn.ofree(n[u]);dn.ofree(a),dn.ofree(s),l===0&&Bz(dn),this._onigBinding=dn,this._ptr=l}dispose(){this._onigBinding.freeOnigScanner(this._ptr)}findNextMatchSync(e,n,r){let s=0;if(typeof r=="number"&&(s=r),typeof e=="string"){e=new $E(e);const a=this._findNextMatchSync(e,n,!1,s);return e.dispose(),a}return this._findNextMatchSync(e,n,!1,s)}_findNextMatchSync(e,n,r,s){const a=this._onigBinding,l=a.findNextOnigScannerMatch(this._ptr,e.id,e.ptr,e.utf8Length,e.convertUtf16OffsetToUtf8(n),s);if(l===0)return null;const u=a.HEAPU32;let f=l/4;const d=u[f++],m=u[f++],p=[];for(let y=0;y<m;y++){const g=e.convertUtf8OffsetToUtf16(u[f++]),v=e.convertUtf8OffsetToUtf16(u[f++]);p[y]={start:g,end:v,length:v-g}}return{index:d,captureIndices:p}}}function Uz(t){return typeof t.instantiator=="function"}function qz(t){return typeof t.default=="function"}function Fz(t){return typeof t.data<"u"}function Vz(t){return typeof Response<"u"&&t instanceof Response}function Hz(t){return typeof ArrayBuffer<"u"&&(t instanceof ArrayBuffer||ArrayBuffer.isView(t))||typeof Buffer<"u"&&Buffer.isBuffer?.(t)||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer||typeof Uint32Array<"u"&&t instanceof Uint32Array}let $u;function Gz(t){if($u)return $u;async function e(){dn=await Lz(async n=>{let r=t;return r=await r,typeof r=="function"&&(r=await r(n)),typeof r=="function"&&(r=await r(n)),Uz(r)?r=await r.instantiator(n):qz(r)?r=await r.default(n):(Fz(r)&&(r=r.data),Vz(r)?typeof WebAssembly.instantiateStreaming=="function"?r=await Kz(r)(n):r=await Zz(r)(n):Hz(r)?r=await Cm(r)(n):r instanceof WebAssembly.Module?r=await Cm(r)(n):"default"in r&&r.default instanceof WebAssembly.Module&&(r=await Cm(r.default)(n))),"instance"in r&&(r=r.instance),"exports"in r&&(r=r.exports),r})}return $u=e(),$u}function Cm(t){return e=>WebAssembly.instantiate(t,e)}function Kz(t){return e=>WebAssembly.instantiateStreaming(t,e)}function Zz(t){return async e=>{const n=await t.arrayBuffer();return WebAssembly.instantiate(n,e)}}async function Jz(t){return t&&await Gz(t),{createScanner(e){return new $z(e.map(n=>typeof n=="string"?n:n.source))},createString(e){return new $E(e)}}}const Qz=Ez({langs:Oz,themes:Nz,engine:()=>Jz(z(()=>import("./wasm-CG6Dc4jp.js"),[]))}),{codeToHtml:UE}=Tz(Qz,{guessEmbeddedLanguages:$5});function Yz(){const t=$e.c(2),[e,n]=Z.useState(Wz);let r,s;return t[0]===Symbol.for("react.memo_cache_sentinel")?(r=()=>{const a=window.matchMedia("(prefers-color-scheme: dark)"),l=u=>n(u.matches);return a.addEventListener("change",l),()=>a.removeEventListener("change",l)},s=[],t[0]=r,t[1]=s):(r=t[0],s=t[1]),Z.useEffect(r,s),e}function Wz(){return window.matchMedia("(prefers-color-scheme: dark)").matches}function vd(t,e){const[n,r]=Z.useState(""),s=Yz();return Z.useEffect(()=>{let a=!1;return(async()=>{if(!t){a||r("");return}try{if(e==="text"){const f=t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");a||r(`<pre><code>${f}</code></pre>`);return}const u=await UE(t,{lang:e,theme:s?"github-dark":"github-light"});a||r(u)}catch{const u=t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");a||r(`<pre><code>${u}</code></pre>`)}})(),()=>{a=!0}},[t,e,s]),n}const xd="text-xs [&_pre]:bg-transparent! [&_pre]:p-0! [&_pre]:m-0! [&_pre]:overflow-visible! [&_code]:bg-transparent! [&_code]:block!";function Xz(t){try{const e=JSON.parse(t);return JSON.stringify(e,null,2)}catch{return t}}function e0(t){const e=$e.c(5),{content:n}=t,[r,s]=Z.useState("");let a,l;e[0]!==n?(a=()=>{let d=!1;return n.text().then(m=>{d||s(Xz(m))}),()=>{d=!0}},l=[n],e[0]=n,e[1]=a,e[2]=l):(a=e[1],l=e[2]),Z.useEffect(a,l);const u=vd(r,"json");let f;return e[3]!==u?(f=x.jsx("div",{className:xd,dangerouslySetInnerHTML:{__html:u}}),e[3]=u,e[4]=f):f=e[4],f}function eP(t){try{const n=/(>)(<)(\/*)/g,r=t.replace(n,`$1
$2$3`);let s=0;return r.split(`
`).map(a=>{let l=0;a.match(/.+<\/\w[^>]*>$/)?l=0:a.match(/^<\/\w/)&&s>0?s-=1:a.match(/^<\w[^>]*[^/]>.*$/)?l=1:l=0;const u="  ".repeat(s);return s+=l,u+a}).join(`
`)}catch{return t}}function tP(t){const e=$e.c(5),{content:n}=t,[r,s]=Z.useState("");let a,l;e[0]!==n?(a=()=>{let d=!1;return n.text().then(m=>{d||s(eP(m))}),()=>{d=!0}},l=[n],e[0]=n,e[1]=a,e[2]=l):(a=e[1],l=e[2]),Z.useEffect(a,l);const u=vd(r,"xml");let f;return e[3]!==u?(f=x.jsx("div",{className:xd,dangerouslySetInnerHTML:{__html:u}}),e[3]=u,e[4]=f):f=e[4],f}function nP(t){const e=$e.c(5),{content:n}=t,[r,s]=Z.useState("");let a,l;e[0]!==n?(a=()=>{let d=!1;return n.text().then(m=>{d||s(m)}),()=>{d=!0}},l=[n],e[0]=n,e[1]=a,e[2]=l):(a=e[1],l=e[2]),Z.useEffect(a,l);const u=vd(r,"yaml");let f;return e[3]!==u?(f=x.jsx("div",{className:xd,dangerouslySetInnerHTML:{__html:u}}),e[3]=u,e[4]=f):f=e[4],f}function Ug(t){const e=$e.c(5),{content:n}=t,[r,s]=Z.useState("");let a,l;e[0]!==n?(a=()=>{n.text().then(s)},l=[n],e[0]=n,e[1]=a,e[2]=l):(a=e[1],l=e[2]),Z.useEffect(a,l);let u;return e[3]!==r?(u=x.jsx("pre",{className:"text-xs font-mono text-neutral-700 dark:text-neutral-200 whitespace-pre-wrap",children:r}),e[3]=r,e[4]=u):u=e[4],u}function rP(t){const e=$e.c(6),{content:n}=t,r=sP;let s;e[0]===Symbol.for("react.memo_cache_sentinel")?(s=x.jsx("div",{className:"text-neutral-500 dark:text-neutral-400 text-sm",children:"Binary content"}),e[0]=s):s=e[0];const a=r(n.size);let l;e[1]!==a?(l=x.jsx("div",{className:"text-2xl font-semibold text-neutral-700 dark:text-neutral-200",children:a}),e[1]=a,e[2]=l):l=e[2];let u;e[3]===Symbol.for("react.memo_cache_sentinel")?(u=x.jsx("div",{className:"text-xs text-neutral-400 dark:text-neutral-500",children:"Cannot preview binary data"}),e[3]=u):u=e[3];let f;return e[4]!==l?(f=x.jsx("div",{className:"flex flex-col items-center justify-center p-12 bg-neutral-100 dark:bg-white/5 rounded-lg border border-neutral-200 dark:border-white/10",children:x.jsxs("div",{className:"text-center space-y-2",children:[s,l,u]})}),e[4]=l,e[5]=f):f=e[5],f}function sP(t){return t<1024?`${t} B`:t<1048576?`${(t/1024).toFixed(2)} KB`:`${(t/1048576).toFixed(2)} MB`}function iP(t){const e=$e.c(4),{content:n}=t;let r;e[0]!==n?(r=URL.createObjectURL(n),e[0]=n,e[1]=r):r=e[1];const s=r;let a;return e[2]!==s?(a=x.jsx("div",{className:"h-full",children:x.jsx("img",{src:s,alt:"Response",className:"max-w-full max-h-full object-contain"})}),e[2]=s,e[3]=a):a=e[3],a}function aP(){const t=$e.c(2),[e,n]=Z.useState(oP);let r,s;return t[0]===Symbol.for("react.memo_cache_sentinel")?(r=()=>{const a=window.matchMedia("(prefers-color-scheme: dark)"),l=u=>n(u.matches);return a.addEventListener("change",l),()=>a.removeEventListener("change",l)},s=[],t[0]=r,t[1]=s):(r=t[0],s=t[1]),Z.useEffect(r,s),e}function oP(){return window.matchMedia("(prefers-color-scheme: dark)").matches}function lP(t){const e=[],n=t.split(/\n\n+/);for(const r of n){if(!r.trim())continue;const s={data:"",raw:r},a=r.split(`
`);for(const l of a)l.startsWith("id:")?s.id=l.slice(3).trim():l.startsWith("event:")?s.event=l.slice(6).trim():l.startsWith("data:")?s.data+=(s.data?`
`:"")+l.slice(5).trim():l.startsWith("retry:")&&(s.retry=parseInt(l.slice(6).trim(),10));(s.data||s.event||s.id)&&e.push(s)}return e}function cP(t){try{return JSON.parse(t)}catch{return null}}function uP({event:t,index:e,prefersDark:n}){const[r,s]=Z.useState(!0),[a,l]=Z.useState(""),u=Z.useMemo(()=>cP(t.data),[t.data]);return Z.useEffect(()=>{(async()=>{if(u)try{const d=JSON.stringify(u,null,2),m=await UE(d,{lang:"json",theme:n?"github-dark":"github-light"});l(m)}catch{l(`<pre>${JSON.stringify(u,null,2)}</pre>`)}})()},[u,n]),x.jsxs("div",{className:"border border-neutral-200 dark:border-white/10 rounded-lg overflow-hidden",children:[x.jsxs("button",{onClick:()=>s(!r),className:"w-full flex items-center gap-2 px-3 py-2 bg-neutral-50 dark:bg-white/5 hover:bg-neutral-100 dark:hover:bg-white/10 transition-colors",children:[r?x.jsx(li,{className:"w-4 h-4 text-neutral-400"}):x.jsx(hd,{className:"w-4 h-4 text-neutral-400"}),x.jsxs("span",{className:"text-xs font-mono text-neutral-500 dark:text-neutral-400",children:["#",e+1]}),t.event&&x.jsx("span",{className:"px-2 py-0.5 text-xs font-medium bg-blue-100 dark:bg-blue-500/20 text-blue-700 dark:text-blue-300 rounded",children:t.event}),t.id&&x.jsxs("span",{className:"text-xs text-neutral-400 dark:text-neutral-500",children:["id: ",t.id]}),u&&x.jsx("span",{className:"px-1.5 py-0.5 text-[10px] font-medium bg-emerald-100 dark:bg-emerald-500/20 text-emerald-700 dark:text-emerald-300 rounded",children:"JSON"})]}),r&&x.jsx("div",{className:"p-3 bg-white dark:bg-transparent",children:u&&a?x.jsx("div",{className:"text-xs [&_pre]:bg-transparent! [&_pre]:p-0! [&_pre]:m-0! [&_pre]:overflow-visible! [&_code]:bg-transparent! [&_code]:block!",dangerouslySetInnerHTML:{__html:a}}):x.jsx("pre",{className:"text-xs font-mono text-neutral-700 dark:text-neutral-200 whitespace-pre-wrap",children:t.data})})]})}function fP(t){const e=$e.c(17),{content:n}=t;let r;e[0]===Symbol.for("react.memo_cache_sentinel")?(r=[],e[0]=r):r=e[0];const[s,a]=Z.useState(r),[l,u]=Z.useState(""),f=aP();let d,m;if(e[1]!==n?(d=()=>{n.text().then(w=>{u(w),a(lP(w))})},m=[n],e[1]=n,e[2]=d,e[3]=m):(d=e[2],m=e[3]),Z.useEffect(d,m),s.length===0){let w;return e[4]!==l?(w=x.jsx("pre",{className:"text-xs font-mono text-neutral-700 dark:text-neutral-200 whitespace-pre-wrap",children:l}),e[4]=l,e[5]=w):w=e[5],w}const p=s.length!==1?"s":"";let y;e[6]!==s.length||e[7]!==p?(y=x.jsx("div",{className:"flex items-center gap-2 mb-3",children:x.jsxs("span",{className:"text-xs font-medium text-neutral-500 dark:text-neutral-400",children:[s.length," event",p]})}),e[6]=s.length,e[7]=p,e[8]=y):y=e[8];let g;if(e[9]!==s||e[10]!==f){let w;e[12]!==f?(w=(E,k)=>x.jsx(uP,{event:E,index:k,prefersDark:f},k),e[12]=f,e[13]=w):w=e[13],g=s.map(w),e[9]=s,e[10]=f,e[11]=g}else g=e[11];let v;return e[14]!==y||e[15]!==g?(v=x.jsxs("div",{className:"space-y-2",children:[y,g]}),e[14]=y,e[15]=g,e[16]=v):v=e[16],v}const dP=["video/","audio/","application/pdf","application/octet-stream","application/zip","application/gzip","application/x-tar","application/x-rar","application/x-7z","application/vnd.ms-","application/vnd.openxmlformats","application/x-executable","application/x-sharedlib","application/x-mach-binary","application/wasm","font/"],hP=["image/png","image/jpeg","image/gif","image/webp","image/svg+xml","image/bmp","image/x-icon","image/ico","image/avif","image/apng"],pP=["text/","application/json","application/xml","application/javascript","application/ecmascript","application/x-javascript","application/ld+json","application/manifest+json","application/schema+json","application/x-www-form-urlencoded","application/xhtml+xml","application/rss+xml","application/atom+xml","application/soap+xml","application/x-yaml","application/yaml","+json","+xml"];function mP(t){const e=t["content-type"]?.toLowerCase()||"";return e.includes("text/event-stream")?"sse":hP.some(n=>e.includes(n))?"image":dP.some(n=>e.includes(n))?"binary":e.includes("json")||e.endsWith("+json")?"json":e.includes("xml")||e.endsWith("+xml")?"xml":e.includes("yaml")||e.includes("yml")?"yaml":(pP.some(n=>e.includes(n)),"text")}function gP(t){const e=$e.c(8),{response:n,viewMode:r}=t,s=r===void 0?"pretty":r;let a;e[0]!==n.headers?(a=mP(n.headers),e[0]=n.headers,e[1]=a):a=e[1];const l=a;let u;e[2]!==l||e[3]!==n.body||e[4]!==s?(u=()=>{if(s==="raw"&&l!=="image"&&l!=="binary")return x.jsx(Ug,{content:n.body});switch(l){case"json":return x.jsx(e0,{content:n.body});case"xml":return x.jsx(tP,{content:n.body});case"yaml":return x.jsx(nP,{content:n.body});case"sse":return x.jsx(fP,{content:n.body});case"image":return x.jsx(iP,{content:n.body});case"binary":return x.jsx(rP,{content:n.body});default:return x.jsx(Ug,{content:n.body})}},e[2]=l,e[3]=n.body,e[4]=s,e[5]=u):u=e[5];const f=u;let d;return e[6]!==f?(d=x.jsx("div",{className:"h-full flex flex-col overflow-hidden",children:x.jsx("div",{className:"flex-1 min-h-0 overflow-auto",children:f()})}),e[6]=f,e[7]=d):d=e[7],d}class yP{#e=!0;#t;#n;#r;#s;#o;#i;#a;#p=0;#m=5;#c=!1;#u=!1;#l=null;#f=()=>{this.debugLog("Connected to event bus"),this.#o=!0,this.#c=!1,this.debugLog("Emitting queued events",this.#s),this.#s.forEach(e=>this.emitEventToBus(e)),this.#s=[],this.stopConnectLoop(),this.#n().removeEventListener("tanstack-connect-success",this.#f)};#d=()=>{if(this.#p<this.#m){this.#p++,this.dispatchCustomEvent("tanstack-connect",{});return}this.#n().removeEventListener("tanstack-connect",this.#d),this.#u=!0,this.debugLog("Max retries reached, giving up on connection"),this.stopConnectLoop()};#h=()=>{this.#c||(this.#c=!0,this.#n().addEventListener("tanstack-connect-success",this.#f),this.#d())};constructor({pluginId:e,debug:n=!1,enabled:r=!0,reconnectEveryMs:s=300}){this.#t=e,this.#e=r,this.#n=this.getGlobalTarget,this.#r=n,this.debugLog(" Initializing event subscription for plugin",this.#t),this.#s=[],this.#o=!1,this.#u=!1,this.#i=null,this.#a=s}startConnectLoop(){this.#i!==null||this.#o||(this.debugLog(`Starting connect loop (every ${this.#a}ms)`),this.#i=setInterval(this.#d,this.#a))}stopConnectLoop(){this.#c=!1,this.#i!==null&&(clearInterval(this.#i),this.#i=null,this.#s=[],this.debugLog("Stopped connect loop"))}debugLog(...e){this.#r&&console.log(` [tanstack-devtools:${this.#t}-plugin]`,...e)}getGlobalTarget(){if(typeof globalThis<"u"&&globalThis.__TANSTACK_EVENT_TARGET__)return this.debugLog("Using global event target"),globalThis.__TANSTACK_EVENT_TARGET__;if(typeof window<"u"&&typeof window.addEventListener<"u")return this.debugLog("Using window as event target"),window;const e=typeof EventTarget<"u"?new EventTarget:void 0;return typeof e>"u"||typeof e.addEventListener>"u"?(this.debugLog("No event mechanism available, running in non-web environment"),{addEventListener:()=>{},removeEventListener:()=>{},dispatchEvent:()=>!1}):(this.debugLog("Using new EventTarget as fallback"),e)}getPluginId(){return this.#t}dispatchCustomEventShim(e,n){try{const r=new Event(e,{detail:n});this.#n().dispatchEvent(r)}catch{this.debugLog("Failed to dispatch shim event")}}dispatchCustomEvent(e,n){try{this.#n().dispatchEvent(new CustomEvent(e,{detail:n}))}catch{this.dispatchCustomEventShim(e,n)}}emitEventToBus(e){this.debugLog("Emitting event to client bus",e),this.dispatchCustomEvent("tanstack-dispatch-event",e)}createEventPayload(e,n){return{type:`${this.#t}:${e}`,payload:n,pluginId:this.#t}}emit(e,n){if(!this.#e){this.debugLog("Event bus client is disabled, not emitting event",e,n);return}if(this.#l&&(this.debugLog("Emitting event to internal event target",e,n),this.#l.dispatchEvent(new CustomEvent(`${this.#t}:${e}`,{detail:this.createEventPayload(e,n)}))),this.#u){this.debugLog("Previously failed to connect, not emitting to bus");return}if(!this.#o){this.debugLog("Bus not available, will be pushed as soon as connected"),this.#s.push(this.createEventPayload(e,n)),typeof CustomEvent<"u"&&!this.#c&&(this.#h(),this.startConnectLoop());return}return this.emitEventToBus(this.createEventPayload(e,n))}on(e,n,r){const s=r?.withEventTarget??!1,a=`${this.#t}:${e}`;if(s&&(this.#l||(this.#l=new EventTarget),this.#l.addEventListener(a,u=>{n(u.detail)})),!this.#e)return this.debugLog("Event bus client is disabled, not registering event",a),()=>{};const l=u=>{this.debugLog("Received event from bus",u.detail),n(u.detail)};return this.#n().addEventListener(a,l),this.debugLog("Registered event to bus",a),()=>{s&&this.#l?.removeEventListener(a,l),this.#n().removeEventListener(a,l)}}onAll(e){if(!this.#e)return this.debugLog("Event bus client is disabled, not registering event"),()=>{};const n=r=>{const s=r.detail;e(s)};return this.#n().addEventListener("tanstack-devtools-global",n),()=>this.#n().removeEventListener("tanstack-devtools-global",n)}onAllPluginEvents(e){if(!this.#e)return this.debugLog("Event bus client is disabled, not registering event"),()=>{};const n=r=>{const s=r.detail;this.#t&&s.pluginId!==this.#t||e(s)};return this.#n().addEventListener("tanstack-devtools-global",n),()=>this.#n().removeEventListener("tanstack-devtools-global",n)}}class bP extends yP{constructor(){super({pluginId:"tanstack-ai-devtools"})}}const Vt=new bP;async function _P(t){let e="";for await(const n of t)n.type==="content"&&n.delta&&(e+=n.delta);return e}function vP(t){return typeof t=="object"&&t!==null&&"~standard"in t&&typeof t["~standard"]=="object"&&t["~standard"].version===1&&typeof t["~standard"].jsonSchema=="object"&&typeof t["~standard"].jsonSchema.input=="function"}function qi(t){return typeof t=="object"&&t!==null&&"~standard"in t&&typeof t["~standard"]=="object"&&t!==null&&t["~standard"]!==null&&"version"in t["~standard"]&&t["~standard"].version===1&&"validate"in t["~standard"]&&typeof t["~standard"].validate=="function"}function Bl(t,e=[]){const n={...t};if(n.type==="object"&&n.properties){const r={...n.properties},s=Object.keys(r);for(const a of s){const l=r[a],u=!e.includes(a);l.type==="object"&&l.properties?r[a]=Bl(l,l.required||[]):l.type==="array"&&l.items?r[a]={...l,items:Bl(l.items,l.items.required||[])}:u&&(l.type&&!Array.isArray(l.type)?r[a]={...l,type:[l.type,"null"]}:Array.isArray(l.type)&&!l.type.includes("null")&&(r[a]={...l,type:[...l.type,"null"]}))}n.properties=r,n.required=s,n.additionalProperties=!1}return n.type==="array"&&n.items&&(n.items=Bl(n.items,n.items.required||[])),n}function qg(t,e={}){if(!t)return;const{forStructuredOutput:n=!1}=e;if(vP(t)){let s=t["~standard"].jsonSchema.input({target:"draft-07"});if(typeof s=="object"&&"$schema"in s){const{$schema:a,...l}=s;s=l}return typeof s=="object"&&("properties"in s&&!s.type&&(s.type="object"),s.type==="object"&&!("properties"in s)&&(s.properties={}),s.type==="object"&&!("required"in s)&&(s.required=[]),n&&(s=Bl(s,s.required||[]))),s}return n&&typeof t=="object"?Bl(t,t.required||[]):t}function to(t,e){if(!qi(t))return e;const n=t["~standard"].validate(e);if(n instanceof Promise)throw new Error("Schema validation returned a Promise. Use validateWithStandardSchema for async validation.");if(!n.issues)return n.value;const r=n.issues.map(s=>s.message||"Validation failed").join(", ");throw new Error(`Validation failed: ${r}`)}class xP{constructor(e){this.toolCallsMap=new Map,this.tools=e}addToolCallChunk(e){const n=e.index,r=this.toolCallsMap.get(n);r?(e.toolCall.function.name&&!r.function.name&&(r.function.name=e.toolCall.function.name),e.toolCall.function.arguments&&(r.function.arguments+=e.toolCall.function.arguments)):e.toolCall.id&&e.toolCall.function.name&&this.toolCallsMap.set(n,{id:e.toolCall.id,type:"function",function:{name:e.toolCall.function.name,arguments:e.toolCall.function.arguments||""}})}hasToolCalls(){return this.getToolCalls().length>0}getToolCalls(){return Array.from(this.toolCallsMap.values()).filter(e=>e.id&&e.function.name&&e.function.name.trim().length>0)}async*executeTools(e){const n=this.getToolCalls(),r=[];for(const s of n){const a=this.tools.find(u=>u.name===s.function.name);let l;if(a?.execute)try{let u;try{u=JSON.parse(s.function.arguments)}catch{throw new Error(`Failed to parse tool arguments as JSON: ${s.function.arguments}`)}if(a.inputSchema&&qi(a.inputSchema))try{u=to(a.inputSchema,u)}catch(d){const m=d instanceof Error?d.message:"Validation failed";throw new Error(`Input validation failed for tool ${a.name}: ${m}`)}let f=await a.execute(u);if(a.outputSchema&&qi(a.outputSchema)&&f!==void 0&&f!==null)try{f=to(a.outputSchema,f)}catch(d){const m=d instanceof Error?d.message:"Validation failed";throw new Error(`Output validation failed for tool ${a.name}: ${m}`)}l=typeof f=="string"?f:JSON.stringify(f)}catch(u){l=`Error executing tool: ${u instanceof Error?u.message:"Unknown error"}`}else l=`Tool ${s.function.name} does not have an execute function`;yield{type:"tool_result",id:e.id,model:e.model,timestamp:Date.now(),toolCallId:s.id,content:l},r.push({role:"tool",content:l,toolCallId:s.id})}return r}clear(){this.toolCallsMap.clear()}}async function _w(t,e,n=new Map,r=new Map){const s=[],a=[],l=[],u=new Map;for(const f of e)u.set(f.name,f);for(const f of t){const d=u.get(f.function.name),m=f.function.name;if(!d){s.push({toolCallId:f.id,toolName:m,result:{error:`Unknown tool: ${m}`},state:"output-error"});continue}let p={};const y=f.function.arguments.trim()||"{}";try{p=JSON.parse(y)}catch{throw new Error(`Failed to parse tool arguments as JSON: ${y}`)}if(d.inputSchema&&qi(d.inputSchema))try{p=to(d.inputSchema,p)}catch(v){const w=v instanceof Error?v.message:"Validation failed";s.push({toolCallId:f.id,toolName:m,result:{error:`Input validation failed for tool ${d.name}: ${w}`},state:"output-error"});continue}if(!d.execute){if(d.needsApproval){const v=`approval_${f.id}`;n.has(v)?n.get(v)?r.has(f.id)?s.push({toolCallId:f.id,toolName:m,result:r.get(f.id)}):l.push({toolCallId:f.id,toolName:m,input:p}):s.push({toolCallId:f.id,toolName:m,result:{error:"User declined tool execution"},state:"output-error"}):a.push({toolCallId:f.id,toolName:f.function.name,input:p,approvalId:v})}else r.has(f.id)?s.push({toolCallId:f.id,toolName:m,result:r.get(f.id)}):l.push({toolCallId:f.id,toolName:m,input:p});continue}if(d.needsApproval){const v=`approval_${f.id}`;if(n.has(v))if(n.get(v)){const E=Date.now();try{let k=await d.execute(p);const C=Date.now()-E;d.outputSchema&&qi(d.outputSchema)&&k!==void 0&&k!==null&&(k=to(d.outputSchema,k)),s.push({toolCallId:f.id,toolName:m,result:typeof k=="string"?JSON.parse(k):k||null,duration:C})}catch(k){const C=Date.now()-E,T=k instanceof Error?k.message:"Unknown error";s.push({toolCallId:f.id,toolName:m,result:{error:T},state:"output-error",duration:C})}}else s.push({toolCallId:f.id,toolName:m,result:{error:"User declined tool execution"},state:"output-error"});else a.push({toolCallId:f.id,toolName:m,input:p,approvalId:v});continue}const g=Date.now();try{let v=await d.execute(p);const w=Date.now()-g;d.outputSchema&&qi(d.outputSchema)&&v!==void 0&&v!==null&&(v=to(d.outputSchema,v)),s.push({toolCallId:f.id,toolName:m,result:typeof v=="string"?JSON.parse(v):v||null,duration:w})}catch(v){const w=Date.now()-g,E=v instanceof Error?v.message:"Unknown error";s.push({toolCallId:f.id,toolName:m,result:{error:E},state:"output-error",duration:w})}}return{results:s,needsApproval:a,needsClientExecution:l}}function qE(t){return({iterationCount:e})=>e<t}class FE{constructor(e){this.iterationCount=0,this.lastFinishReason=null,this.streamStartTime=0,this.totalChunkCount=0,this.currentMessageId=null,this.accumulatedContent="",this.doneChunk=null,this.shouldEmitStreamEnd=!0,this.earlyTermination=!1,this.toolPhase="continue",this.cyclePhase="processText",this.adapter=e.adapter,this.params=e.params,this.systemPrompts=e.params.systemPrompts||[],this.tools=e.params.tools||[],this.loopStrategy=e.params.agentLoopStrategy||qE(5),this.toolCallManager=new xP(this.tools),this.initialMessageCount=e.params.messages.length,this.messages=e.params.messages,this.requestId=this.createId("chat"),this.streamId=this.createId("stream"),this.effectiveRequest=e.params.abortController?{signal:e.params.abortController.signal}:void 0,this.effectiveSignal=e.params.abortController?.signal}getAccumulatedContent(){return this.accumulatedContent}getMessages(){return this.messages}async*run(){this.beforeRun();try{if((yield*this.checkForPendingToolCalls())==="wait")return;do{if(this.earlyTermination||this.isAborted())return;this.beginCycle(),this.cyclePhase==="processText"?yield*this.streamModelResponse():yield*this.processToolCalls(),this.endCycle()}while(this.shouldContinue())}finally{this.afterRun()}}beforeRun(){this.streamStartTime=Date.now();const{model:e,tools:n,temperature:r,topP:s,maxTokens:a,metadata:l,modelOptions:u,conversationId:f}=this.params,d={};r!==void 0&&(d.temperature=r),s!==void 0&&(d.topP=s),a!==void 0&&(d.maxTokens=a),l!==void 0&&(d.metadata=l),Vt.emit("text:started",{requestId:this.requestId,streamId:this.streamId,model:e,provider:this.adapter.name,messageCount:this.initialMessageCount,hasTools:!!n&&n.length>0,streaming:!0,timestamp:Date.now(),clientId:f,toolNames:n?.map(m=>m.name),options:Object.keys(d).length>0?d:void 0,modelOptions:u}),Vt.emit("stream:started",{streamId:this.streamId,model:e,provider:this.adapter.name,timestamp:Date.now()})}afterRun(){if(!this.shouldEmitStreamEnd)return;const e=Date.now();Vt.emit("text:completed",{requestId:this.requestId,streamId:this.streamId,model:this.params.model,content:this.accumulatedContent,messageId:this.currentMessageId||void 0,finishReason:this.lastFinishReason||void 0,usage:this.doneChunk?.usage,timestamp:e}),Vt.emit("stream:ended",{requestId:this.requestId,streamId:this.streamId,totalChunks:this.totalChunkCount,duration:e-this.streamStartTime,timestamp:e})}beginCycle(){this.cyclePhase==="processText"&&this.beginIteration()}endCycle(){if(this.cyclePhase==="processText"){this.cyclePhase="executeToolCalls";return}this.cyclePhase="processText",this.iterationCount++}beginIteration(){this.currentMessageId=this.createId("msg"),this.accumulatedContent="",this.doneChunk=null}async*streamModelResponse(){const{temperature:e,topP:n,maxTokens:r,metadata:s,modelOptions:a}=this.params,u=this.params.tools?.map(f=>({...f,inputSchema:f.inputSchema?qg(f.inputSchema):void 0,outputSchema:f.outputSchema?qg(f.outputSchema):void 0}));for await(const f of this.adapter.chatStream({model:this.params.model,messages:this.messages,tools:u,temperature:e,topP:n,maxTokens:r,metadata:s,request:this.effectiveRequest,modelOptions:a,systemPrompts:this.systemPrompts}))if(this.isAborted()||(this.totalChunkCount++,yield f,this.handleStreamChunk(f),this.earlyTermination))break}handleStreamChunk(e){switch(e.type){case"content":this.handleContentChunk(e);break;case"tool_call":this.handleToolCallChunk(e);break;case"tool_result":this.handleToolResultChunk(e);break;case"done":this.handleDoneChunk(e);break;case"error":this.handleErrorChunk(e);break;case"thinking":this.handleThinkingChunk(e);break}}handleContentChunk(e){this.accumulatedContent=e.content,Vt.emit("stream:chunk:content",{streamId:this.streamId,messageId:this.currentMessageId||void 0,content:e.content,delta:e.delta,timestamp:Date.now()})}handleToolCallChunk(e){this.toolCallManager.addToolCallChunk(e),Vt.emit("stream:chunk:tool-call",{streamId:this.streamId,messageId:this.currentMessageId||void 0,toolCallId:e.toolCall.id,toolName:e.toolCall.function.name,index:e.index,arguments:e.toolCall.function.arguments,timestamp:Date.now()})}handleToolResultChunk(e){Vt.emit("stream:chunk:tool-result",{streamId:this.streamId,messageId:this.currentMessageId||void 0,toolCallId:e.toolCallId,result:e.content,timestamp:Date.now()})}handleDoneChunk(e){if(this.doneChunk?.finishReason==="tool_calls"&&e.finishReason==="stop"){this.lastFinishReason=e.finishReason,Vt.emit("stream:chunk:done",{streamId:this.streamId,messageId:this.currentMessageId||void 0,finishReason:e.finishReason,usage:e.usage,timestamp:Date.now()}),e.usage&&Vt.emit("usage:tokens",{requestId:this.requestId,streamId:this.streamId,messageId:this.currentMessageId||void 0,model:this.params.model,usage:e.usage,timestamp:Date.now()});return}this.doneChunk=e,this.lastFinishReason=e.finishReason,Vt.emit("stream:chunk:done",{streamId:this.streamId,messageId:this.currentMessageId||void 0,finishReason:e.finishReason,usage:e.usage,timestamp:Date.now()}),e.usage&&Vt.emit("usage:tokens",{requestId:this.requestId,streamId:this.streamId,messageId:this.currentMessageId||void 0,model:this.params.model,usage:e.usage,timestamp:Date.now()})}handleErrorChunk(e){Vt.emit("stream:chunk:error",{streamId:this.streamId,messageId:this.currentMessageId||void 0,error:e.error.message,timestamp:Date.now()}),this.earlyTermination=!0,this.shouldEmitStreamEnd=!1}handleThinkingChunk(e){Vt.emit("stream:chunk:thinking",{streamId:this.streamId,messageId:this.currentMessageId||void 0,content:e.content,delta:e.delta,timestamp:Date.now()})}async*checkForPendingToolCalls(){const e=this.getPendingToolCallsFromMessages();if(e.length===0)return"continue";const n=this.createSyntheticDoneChunk();Vt.emit("text:iteration",{requestId:this.requestId,streamId:this.streamId,iterationNumber:this.iterationCount+1,messageCount:this.messages.length,toolCallCount:e.length,timestamp:Date.now()});const{approvals:r,clientToolResults:s}=this.collectClientState(),a=await _w(e,this.tools,r,s);if(a.needsApproval.length>0||a.needsClientExecution.length>0){for(const u of this.emitApprovalRequests(a.needsApproval,n))yield u;for(const u of this.emitClientToolInputs(a.needsClientExecution,n))yield u;return this.shouldEmitStreamEnd=!1,"wait"}const l=this.emitToolResults(a.results,n);for(const u of l)yield u;return"continue"}async*processToolCalls(){if(!this.shouldExecuteToolPhase()){this.setToolPhase("stop");return}const e=this.toolCallManager.getToolCalls(),n=this.doneChunk;if(!n||e.length===0){this.setToolPhase("stop");return}Vt.emit("text:iteration",{requestId:this.requestId,streamId:this.streamId,iterationNumber:this.iterationCount+1,messageCount:this.messages.length,toolCallCount:e.length,timestamp:Date.now()}),this.addAssistantToolCallMessage(e);const{approvals:r,clientToolResults:s}=this.collectClientState(),a=await _w(e,this.tools,r,s);if(a.needsApproval.length>0||a.needsClientExecution.length>0){for(const u of this.emitApprovalRequests(a.needsApproval,n))yield u;for(const u of this.emitClientToolInputs(a.needsClientExecution,n))yield u;this.setToolPhase("wait");return}const l=this.emitToolResults(a.results,n);for(const u of l)yield u;this.toolCallManager.clear(),this.setToolPhase("continue")}shouldExecuteToolPhase(){return this.doneChunk?.finishReason==="tool_calls"&&this.tools.length>0&&this.toolCallManager.hasToolCalls()}addAssistantToolCallMessage(e){this.messages=[...this.messages,{role:"assistant",content:this.accumulatedContent||null,toolCalls:e}]}collectClientState(){const e=new Map,n=new Map;for(const r of this.messages)if(r.role==="assistant"&&r.parts){const s=r.parts;for(const a of s)a.type==="tool-call"&&a.state==="approval-responded"&&a.approval&&e.set(a.approval.id,a.approval.approved),a.type==="tool-call"&&a.output!==void 0&&!a.approval&&n.set(a.id,a.output)}return{approvals:e,clientToolResults:n}}emitApprovalRequests(e,n){const r=[];for(const s of e)Vt.emit("stream:approval-requested",{streamId:this.streamId,messageId:this.currentMessageId||void 0,toolCallId:s.toolCallId,toolName:s.toolName,input:s.input,approvalId:s.approvalId,timestamp:Date.now()}),r.push({type:"approval-requested",id:n.id,model:n.model,timestamp:Date.now(),toolCallId:s.toolCallId,toolName:s.toolName,input:s.input,approval:{id:s.approvalId,needsApproval:!0}});return r}emitClientToolInputs(e,n){const r=[];for(const s of e)Vt.emit("stream:tool-input-available",{streamId:this.streamId,messageId:this.currentMessageId||void 0,toolCallId:s.toolCallId,toolName:s.toolName,input:s.input,timestamp:Date.now()}),r.push({type:"tool-input-available",id:n.id,model:n.model,timestamp:Date.now(),toolCallId:s.toolCallId,toolName:s.toolName,input:s.input});return r}emitToolResults(e,n){const r=[];for(const s of e){Vt.emit("tool:call-completed",{requestId:this.requestId,streamId:this.streamId,messageId:this.currentMessageId||void 0,toolCallId:s.toolCallId,toolName:s.toolName,result:s.result,duration:s.duration??0,timestamp:Date.now()});const a=JSON.stringify(s.result),l={type:"tool_result",id:n.id,model:n.model,timestamp:Date.now(),toolCallId:s.toolCallId,content:a};r.push(l),this.messages=[...this.messages,{role:"tool",content:a,toolCallId:s.toolCallId}]}return r}getPendingToolCallsFromMessages(){const e=new Set(this.messages.filter(r=>r.role==="tool"&&r.toolCallId).map(r=>r.toolCallId)),n=[];for(const r of this.messages)if(r.role==="assistant"&&r.toolCalls)for(const s of r.toolCalls)e.has(s.id)||n.push(s);return n}createSyntheticDoneChunk(){return{type:"done",id:this.createId("pending"),model:this.params.model,timestamp:Date.now(),finishReason:"tool_calls"}}shouldContinue(){return this.cyclePhase==="executeToolCalls"?!0:this.loopStrategy({iterationCount:this.iterationCount,messages:this.messages,finishReason:this.lastFinishReason})&&this.toolPhase==="continue"}isAborted(){return!!this.effectiveSignal?.aborted}setToolPhase(e){this.toolPhase=e,e==="wait"&&(this.shouldEmitStreamEnd=!1)}createId(e){return`${e}-${Date.now()}-${Math.random().toString(36).slice(2,9)}`}}function wP(t){const{outputSchema:e,stream:n}=t;return e?kP(t):n===!1?SP(t):VE(t)}async function*VE(t){const{adapter:e,...n}=t,r=e.model,s=new FE({adapter:e,params:{...n,model:r}});for await(const a of s.run())yield a}function SP(t){const e=VE(t);return _P(e)}async function kP(t){const{adapter:e,outputSchema:n,...r}=t,s=e.model;if(!n)throw new Error("outputSchema is required for structured output");const a=new FE({adapter:e,params:{...r,model:s}});for await(const y of a.run());const l=a.getMessages(),{tools:u,agentLoopStrategy:f,...d}=r,m=qg(n);if(!m)throw new Error("Failed to convert output schema to JSON Schema");const p=await e.structuredOutput({chatOptions:{...d,model:s,messages:l},outputSchema:m});return qi(n)?to(n,p.data):p.data}function St(t){return{__toolSide:"definition",...t,server(n){return{__toolSide:"server",...t,execute:n}},client(n){return{__toolSide:"client",...t,execute:n}}}}function vw(t){return t===null?"":typeof t=="string"?t:t.filter(e=>e.type==="text").map(e=>e.content).join("")}function EP(t){const e=[];for(const n of t)"parts"in n?e.push(...HE(n)):e.push(n);return e}function HE(t){const e=[];if(t.role==="system")return e;const n=[],r=[],s=[];for(const u of t.parts)u.type==="text"?n.push(u):u.type==="tool-call"?r.push(u):u.type==="tool-result"&&s.push(u);const a=n.map(u=>u.content).join("")||null,l=r.length>0?r.filter(u=>u.state==="input-complete"||u.state==="approval-responded"||u.output!==void 0).map(u=>({id:u.id,type:"function",function:{name:u.name,arguments:u.arguments}})):void 0;t.role!=="assistant"||a||!l?e.push({role:t.role,content:a,...l&&l.length>0&&{toolCalls:l}}):l.length>0&&e.push({role:"assistant",content:a,toolCalls:l});for(const u of s)(u.state==="complete"||u.state==="error")&&e.push({role:"tool",content:u.content,toolCallId:u.toolCallId});return e}function CP(t,e){const n=[],r=vw(t.content);if(r&&n.push({type:"text",content:r}),t.toolCalls&&t.toolCalls.length>0)for(const s of t.toolCalls)n.push({type:"tool-call",id:s.id,name:s.function.name,arguments:s.function.arguments,state:"input-complete"});return t.role==="tool"&&t.toolCallId&&n.push({type:"tool-result",toolCallId:t.toolCallId,content:vw(t.content),state:"complete"}),{id:e||Hf(),role:t.role==="tool"?"assistant":t.role,parts:n}}function TP(t,e){return"parts"in t?{...t,id:t.id||e(),createdAt:t.createdAt||new Date}:{...CP(t,e()),createdAt:new Date}}function Hf(){return`msg-${Date.now()}-${Math.random().toString(36).substring(7)}`}var Mi={},Tm={},xw;function ww(){return xw||(xw=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Allow=t.ALL=t.COLLECTION=t.ATOM=t.SPECIAL=t.INF=t._INFINITY=t.INFINITY=t.NAN=t.BOOL=t.NULL=t.OBJ=t.ARR=t.NUM=t.STR=void 0,t.STR=1,t.NUM=2,t.ARR=4,t.OBJ=8,t.NULL=16,t.BOOL=32,t.NAN=64,t.INFINITY=128,t._INFINITY=256,t.INF=t.INFINITY|t._INFINITY,t.SPECIAL=t.NULL|t.BOOL|t.INF|t.NAN,t.ATOM=t.STR|t.NUM|t.SPECIAL,t.COLLECTION=t.ARR|t.OBJ,t.ALL=t.ATOM|t.COLLECTION,t.Allow={STR:t.STR,NUM:t.NUM,ARR:t.ARR,OBJ:t.OBJ,NULL:t.NULL,BOOL:t.BOOL,NAN:t.NAN,INFINITY:t.INFINITY,_INFINITY:t._INFINITY,INF:t.INF,SPECIAL:t.SPECIAL,ATOM:t.ATOM,COLLECTION:t.COLLECTION,ALL:t.ALL},t.default=t.Allow})(Tm)),Tm}var Sw;function AP(){return Sw||(Sw=1,(function(t){var e=Mi&&Mi.__createBinding||(Object.create?(function(d,m,p,y){y===void 0&&(y=p);var g=Object.getOwnPropertyDescriptor(m,p);(!g||("get"in g?!m.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return m[p]}}),Object.defineProperty(d,y,g)}):(function(d,m,p,y){y===void 0&&(y=p),d[y]=m[p]})),n=Mi&&Mi.__exportStar||function(d,m){for(var p in d)p!=="default"&&!Object.prototype.hasOwnProperty.call(m,p)&&e(m,d,p)};Object.defineProperty(t,"__esModule",{value:!0}),t.Allow=t.MalformedJSON=t.PartialJSON=t.parseJSON=t.parse=void 0;const r=ww();Object.defineProperty(t,"Allow",{enumerable:!0,get:function(){return r.Allow}}),n(ww(),t);class s extends Error{}t.PartialJSON=s;class a extends Error{}t.MalformedJSON=a;function l(d,m=r.Allow.ALL){if(typeof d!="string")throw new TypeError(`expecting str, got ${typeof d}`);if(!d.trim())throw new Error(`${d} is empty`);return u(d.trim(),m)}t.parseJSON=l;const u=(d,m)=>{const p=d.length;let y=0;const g=N=>{throw new s(`${N} at position ${y}`)},v=N=>{throw new a(`${N} at position ${y}`)},w=()=>(D(),y>=p&&g("Unexpected end of input"),d[y]==='"'?E():d[y]==="{"?k():d[y]==="["?C():d.substring(y,y+4)==="null"||r.Allow.NULL&m&&p-y<4&&"null".startsWith(d.substring(y))?(y+=4,null):d.substring(y,y+4)==="true"||r.Allow.BOOL&m&&p-y<4&&"true".startsWith(d.substring(y))?(y+=4,!0):d.substring(y,y+5)==="false"||r.Allow.BOOL&m&&p-y<5&&"false".startsWith(d.substring(y))?(y+=5,!1):d.substring(y,y+8)==="Infinity"||r.Allow.INFINITY&m&&p-y<8&&"Infinity".startsWith(d.substring(y))?(y+=8,1/0):d.substring(y,y+9)==="-Infinity"||r.Allow._INFINITY&m&&1<p-y&&p-y<9&&"-Infinity".startsWith(d.substring(y))?(y+=9,-1/0):d.substring(y,y+3)==="NaN"||r.Allow.NAN&m&&p-y<3&&"NaN".startsWith(d.substring(y))?(y+=3,NaN):T()),E=()=>{const N=y;let R=!1;for(y++;y<p&&(d[y]!=='"'||R&&d[y-1]==="\\");)R=d[y]==="\\"?!R:!1,y++;if(d.charAt(y)=='"')try{return JSON.parse(d.substring(N,++y-Number(R)))}catch($){v(String($))}else if(r.Allow.STR&m)try{return JSON.parse(d.substring(N,y-Number(R))+'"')}catch{return JSON.parse(d.substring(N,d.lastIndexOf("\\"))+'"')}g("Unterminated string literal")},k=()=>{y++,D();const N={};try{for(;d[y]!=="}";){if(D(),y>=p&&r.Allow.OBJ&m)return N;const R=E();D(),y++;try{const $=w();N[R]=$}catch($){if(r.Allow.OBJ&m)return N;throw $}D(),d[y]===","&&y++}}catch{if(r.Allow.OBJ&m)return N;g("Expected '}' at end of object")}return y++,N},C=()=>{y++;const N=[];try{for(;d[y]!=="]";)N.push(w()),D(),d[y]===","&&y++}catch{if(r.Allow.ARR&m)return N;g("Expected ']' at end of array")}return y++,N},T=()=>{if(y===0){d==="-"&&v("Not sure what '-' is");try{return JSON.parse(d)}catch(R){if(r.Allow.NUM&m)try{return JSON.parse(d.substring(0,d.lastIndexOf("e")))}catch{}v(String(R))}}const N=y;for(d[y]==="-"&&y++;d[y]&&",]}".indexOf(d[y])===-1;)y++;y==p&&!(r.Allow.NUM&m)&&g("Unterminated number literal");try{return JSON.parse(d.substring(N,y))}catch{d.substring(N,y)==="-"&&g("Not sure what '-' is");try{return JSON.parse(d.substring(N,d.lastIndexOf("e")))}catch($){v(String($))}}},D=()=>{for(;y<p&&` 
\r	`.includes(d[y]);)y++};return w()},f=l;t.parse=f})(Mi)),Mi}var RP=AP();class OP{parse(e){if(!(!e||e.trim()===""))try{return RP.parse(e)}catch{return}}}const IP=new OP;function NP(t,e,n){return t.map(r=>{if(r.id!==e)return r;const s=[...r.parts],a=s.length>0?s[s.length-1]:null;return a&&a.type==="text"?s[s.length-1]={type:"text",content:n}:s.push({type:"text",content:n}),{...r,parts:s}})}function Am(t,e,n){return t.map(r=>{if(r.id!==e)return r;const s=[...r.parts],a=s.findIndex(u=>u.type==="tool-call"&&u.id===n.id),l={type:"tool-call",id:n.id,name:n.name,arguments:n.arguments,state:n.state};return a>=0?s[a]=l:s.push(l),{...r,parts:s}})}function kw(t,e,n,r,s,a){return t.map(l=>{if(l.id!==e)return l;const u=[...l.parts],f=u.findIndex(m=>m.type==="tool-result"&&m.toolCallId===n),d={type:"tool-result",toolCallId:n,content:r,state:s,...a&&{error:a}};return f>=0?u[f]=d:u.push(d),{...l,parts:u}})}function MP(t,e,n,r){return t.map(s=>{if(s.id!==e)return s;const a=[...s.parts],l=a.find(u=>u.type==="tool-call"&&u.id===n);return l&&(l.state="approval-requested",l.approval={id:r,needsApproval:!0}),{...s,parts:a}})}function DP(t,e,n,r,s){return t.map(a=>{const l=[...a.parts],u=l.find(f=>f.type==="tool-call"&&f.id===e);return u&&(u.output=s?{error:s}:n,r?u.state=r:u.state="input-complete"),{...a,parts:l}})}function jP(t,e,n){return t.map(r=>{const s=[...r.parts],a=s.find(l=>l.type==="tool-call"&&l.approval?.id===e);return a&&a.approval&&(a.approval.approved=n,a.state="approval-responded"),{...r,parts:s}})}function LP(t,e,n){return t.map(r=>{if(r.id!==e)return r;const s=[...r.parts],a=s.findIndex(u=>u.type==="thinking"),l={type:"thinking",content:n};return a>=0?s[a]=l:s.push(l),{...r,parts:s}})}class zP{shouldEmit(e,n){return!0}}class t0{constructor(e={}){this.messages=[],this.currentAssistantMessageId=null,this.totalTextContent="",this.currentSegmentText="",this.lastEmittedText="",this.thinkingContent="",this.toolCalls=new Map,this.toolCallOrder=[],this.finishReason=null,this.isDone=!1,this.hasToolCallsSinceTextStart=!1,this.recording=null,this.recordingStartTime=0,this.chunkStrategy=e.chunkStrategy||new zP,this.events=e.events||{},this.handlers=e.handlers||{},this.jsonParser=e.jsonParser||IP,this.recordingEnabled=e.recording??!1,e.initialMessages&&(this.messages=[...e.initialMessages])}setMessages(e){this.messages=[...e],this.emitMessagesChange()}addUserMessage(e){const n={id:Hf(),role:"user",parts:[{type:"text",content:e}],createdAt:new Date};return this.messages=[...this.messages,n],this.emitMessagesChange(),n}startAssistantMessage(){this.resetStreamState();const e={id:Hf(),role:"assistant",parts:[],createdAt:new Date};return this.currentAssistantMessageId=e.id,this.messages=[...this.messages,e],this.events.onStreamStart?.(),this.emitMessagesChange(),e.id}addToolResult(e,n,r){const s=this.messages.find(f=>f.parts.some(d=>d.type==="tool-call"&&d.id===e));if(!s){console.warn(`[StreamProcessor] Could not find message with tool call ${e}`);return}let a=DP(this.messages,e,n,r?"input-complete":void 0,r);const l=typeof n=="string"?n:JSON.stringify(n),u=r?"error":"complete";a=kw(a,s.id,e,l,u,r),this.messages=a,this.emitMessagesChange()}addToolApprovalResponse(e,n){this.messages=jP(this.messages,e,n),this.emitMessagesChange()}toModelMessages(){const e=[];for(const n of this.messages)e.push(...HE(n));return e}getMessages(){return this.messages}areAllToolsComplete(){const e=this.messages.findLast(r=>r.role==="assistant");if(!e)return!0;const n=e.parts.filter(r=>r.type==="tool-call");return n.length===0?!0:n.every(r=>r.state==="approval-responded"||r.output!==void 0&&!r.approval)}removeMessagesAfter(e){this.messages=this.messages.slice(0,e+1),this.emitMessagesChange()}clearMessages(){this.messages=[],this.currentAssistantMessageId=null,this.emitMessagesChange()}async process(e){this.resetStreamState(),this.recordingEnabled&&this.startRecording();for await(const n of e)this.processChunk(n);return this.finalizeStream(),this.recording&&(this.recording.result=this.getResult()),this.getResult()}processChunk(e){switch(this.recording&&this.recording.chunks.push({chunk:e,timestamp:Date.now(),index:this.recording.chunks.length}),e.type){case"content":this.handleContentChunk(e);break;case"tool_call":this.handleToolCallChunk(e);break;case"tool_result":this.handleToolResultChunk(e);break;case"done":this.handleDoneChunk(e);break;case"error":this.handleErrorChunk(e);break;case"thinking":this.handleThinkingChunk(e);break;case"approval-requested":this.handleApprovalRequestedChunk(e);break;case"tool-input-available":this.handleToolInputAvailableChunk(e);break}}handleContentChunk(e){this.completeAllToolCalls();const n=this.currentSegmentText;this.hasToolCallsSinceTextStart&&n.length>0&&this.isNewTextSegment(e,n)&&(n!==this.lastEmittedText&&this.emitTextUpdate(),this.currentSegmentText="",this.lastEmittedText="",this.hasToolCallsSinceTextStart=!1);const s=this.currentSegmentText;let a=s;e.delta!==""?a=s+e.delta:e.content!==""&&(e.content.startsWith(s)?a=e.content:s.startsWith(e.content)?a=s:a=s+e.content);const l=a.slice(s.length);this.currentSegmentText=a,this.totalTextContent+=l;const u=e.delta??e.content??"";this.chunkStrategy.shouldEmit(u,this.currentSegmentText)&&this.currentSegmentText!==this.lastEmittedText&&this.emitTextUpdate()}handleToolCallChunk(e){this.hasToolCallsSinceTextStart=!0;const n=e.toolCall.id,r=this.toolCalls.get(n);if(r){const s=r.state==="awaiting-input";r.arguments+=e.toolCall.function.arguments||"",s&&e.toolCall.function.arguments&&(r.state="input-streaming"),r.parsedArguments=this.jsonParser.parse(r.arguments);const a=this.toolCallOrder.indexOf(n);this.handlers.onToolCallStateChange?.(a,r.id,r.name,r.state,r.arguments,r.parsedArguments),e.toolCall.function.arguments&&this.handlers.onToolCallDelta?.(a,e.toolCall.function.arguments),this.currentAssistantMessageId&&(this.messages=Am(this.messages,this.currentAssistantMessageId,{id:r.id,name:r.name,arguments:r.arguments,state:r.state}),this.emitMessagesChange(),this.events.onToolCallStateChange?.(this.currentAssistantMessageId,r.id,r.state,r.arguments))}else{const s=e.toolCall.function.arguments?"input-streaming":"awaiting-input",a={id:e.toolCall.id,name:e.toolCall.function.name,arguments:e.toolCall.function.arguments||"",state:s,parsedArguments:void 0,index:e.index};e.toolCall.function.arguments&&(a.parsedArguments=this.jsonParser.parse(e.toolCall.function.arguments)),this.toolCalls.set(n,a),this.toolCallOrder.push(n);const l=this.toolCallOrder.indexOf(n);this.handlers.onToolCallStart?.(l,e.toolCall.id,e.toolCall.function.name),this.handlers.onToolCallStateChange?.(l,e.toolCall.id,e.toolCall.function.name,s,e.toolCall.function.arguments||"",a.parsedArguments),e.toolCall.function.arguments&&this.handlers.onToolCallDelta?.(l,e.toolCall.function.arguments),this.currentAssistantMessageId&&(this.messages=Am(this.messages,this.currentAssistantMessageId,{id:e.toolCall.id,name:e.toolCall.function.name,arguments:e.toolCall.function.arguments||"",state:s}),this.emitMessagesChange(),this.events.onToolCallStateChange?.(this.currentAssistantMessageId,e.toolCall.id,s,e.toolCall.function.arguments||""))}}handleToolResultChunk(e){const n="complete";this.handlers.onToolResultStateChange?.(e.toolCallId,e.content,n),this.currentAssistantMessageId&&(this.messages=kw(this.messages,this.currentAssistantMessageId,e.toolCallId,e.content,n),this.emitMessagesChange())}handleDoneChunk(e){this.finishReason=e.finishReason,this.isDone=!0,this.completeAllToolCalls()}handleErrorChunk(e){this.handlers.onError?.(e.error),this.events.onError?.(new Error(e.error.message))}handleThinkingChunk(e){const n=this.thinkingContent;let r=n;e.delta!==""?r=n+e.delta:e.content!==""&&(e.content.startsWith(n)?r=e.content:n.startsWith(e.content)?r=n:r=n+e.content),this.thinkingContent=r,this.handlers.onThinkingUpdate?.(this.thinkingContent),this.currentAssistantMessageId&&(this.messages=LP(this.messages,this.currentAssistantMessageId,this.thinkingContent),this.emitMessagesChange(),this.events.onThinkingUpdate?.(this.currentAssistantMessageId,this.thinkingContent))}handleApprovalRequestedChunk(e){this.handlers.onApprovalRequested?.(e.toolCallId,e.toolName,e.input,e.approval.id),this.currentAssistantMessageId&&(this.messages=MP(this.messages,this.currentAssistantMessageId,e.toolCallId,e.approval.id),this.emitMessagesChange()),this.events.onApprovalRequest?.({toolCallId:e.toolCallId,toolName:e.toolName,input:e.input,approvalId:e.approval.id})}handleToolInputAvailableChunk(e){this.handlers.onToolInputAvailable?.(e.toolCallId,e.toolName,e.input),this.events.onToolCall?.({toolCallId:e.toolCallId,toolName:e.toolName,input:e.input})}isNewTextSegment(e,n){return e.delta!==void 0&&e.content!==void 0&&(e.content.length<n.length||!e.content.startsWith(n)&&!n.startsWith(e.content))}completeAllToolCalls(){this.toolCalls.forEach((e,n)=>{if(e.state!=="input-complete"){const r=this.toolCallOrder.indexOf(n);this.completeToolCall(r,e)}})}completeToolCall(e,n){n.state="input-complete",n.parsedArguments=this.jsonParser.parse(n.arguments),this.handlers.onToolCallStateChange?.(e,n.id,n.name,"input-complete",n.arguments,n.parsedArguments),this.handlers.onToolCallComplete?.(e,n.id,n.name,n.arguments),this.currentAssistantMessageId&&(this.messages=Am(this.messages,this.currentAssistantMessageId,{id:n.id,name:n.name,arguments:n.arguments,state:"input-complete"}),this.emitMessagesChange(),this.events.onToolCallStateChange?.(this.currentAssistantMessageId,n.id,"input-complete",n.arguments))}emitTextUpdate(){this.lastEmittedText=this.currentSegmentText,this.handlers.onTextUpdate?.(this.currentSegmentText),this.currentAssistantMessageId&&(this.messages=NP(this.messages,this.currentAssistantMessageId,this.currentSegmentText),this.emitMessagesChange(),this.events.onTextUpdate?.(this.currentAssistantMessageId,this.currentSegmentText))}emitMessagesChange(){this.events.onMessagesChange?.([...this.messages])}finalizeStream(){this.completeAllToolCalls(),this.currentSegmentText!==this.lastEmittedText&&this.emitTextUpdate();const e=this.getCompletedToolCalls();if(this.handlers.onStreamEnd?.(this.totalTextContent,e.length>0?e:void 0),this.currentAssistantMessageId){const n=this.messages.find(r=>r.id===this.currentAssistantMessageId);n&&this.events.onStreamEnd?.(n)}}getCompletedToolCalls(){return Array.from(this.toolCalls.values()).filter(e=>e.state==="input-complete").map(e=>({id:e.id,type:"function",function:{name:e.name,arguments:e.arguments}}))}getResult(){const e=this.getCompletedToolCalls();return{content:this.totalTextContent,thinking:this.thinkingContent||void 0,toolCalls:e.length>0?e:void 0,finishReason:this.finishReason}}getState(){return{content:this.totalTextContent,thinking:this.thinkingContent,toolCalls:new Map(this.toolCalls),toolCallOrder:[...this.toolCallOrder],finishReason:this.finishReason,done:this.isDone}}startRecording(){this.recordingEnabled=!0,this.recordingStartTime=Date.now(),this.recording={version:"1.0",timestamp:this.recordingStartTime,chunks:[]}}getRecording(){return this.recording}resetStreamState(){this.totalTextContent="",this.currentSegmentText="",this.lastEmittedText="",this.thinkingContent="",this.toolCalls.clear(),this.toolCallOrder=[],this.finishReason=null,this.isDone=!1,this.hasToolCallsSinceTextStart=!1,this.chunkStrategy.reset?.()}reset(){this.resetStreamState(),this.messages=[],this.currentAssistantMessageId=null}static async replay(e,n){return new t0(n).process(PP(e))}}function PP(t){return{async*[Symbol.asyncIterator](){for(const{chunk:e}of t.chunks)yield e}}}class BP{constructor(e){this.clientId=e}clientCreated(e){this.emitEvent("client:created",{initialMessageCount:e})}loadingChanged(e){this.emitEvent("client:loading-changed",{isLoading:e})}errorChanged(e){this.emitEvent("client:error-changed",{error:e})}textUpdated(e,n,r){this.emitEvent("processor:text-updated",{streamId:e,content:r}),this.emitEvent("client:assistant-message-updated",{messageId:n,content:r})}toolCallStateChanged(e,n,r,s,a,l){this.emitEvent("processor:tool-call-state-changed",{streamId:e,toolCallId:r,toolName:s,state:a,arguments:l}),this.emitEvent("client:tool-call-updated",{messageId:n,toolCallId:r,toolName:s,state:a,arguments:l})}toolResultStateChanged(e,n,r,s,a){this.emitEvent("processor:tool-result-state-changed",{streamId:e,toolCallId:n,content:r,state:s,error:a})}thinkingUpdated(e,n,r,s){this.emitEvent("stream:chunk:thinking",{streamId:e,messageId:n,content:r,delta:s})}approvalRequested(e,n,r,s,a){this.emitEvent("client:approval-requested",{messageId:e,toolCallId:n,toolName:r,input:s,approvalId:a})}messageAppended(e){const n=e.parts.filter(r=>r.type==="text").map(r=>r.content).join(" ").substring(0,100);this.emitEvent("client:message-appended",{messageId:e.id,role:e.role,contentPreview:n})}messageSent(e,n){this.emitEvent("client:message-sent",{messageId:e,content:n})}reloaded(e){this.emitEvent("client:reloaded",{fromMessageIndex:e})}stopped(){this.emitEvent("client:stopped")}messagesCleared(){this.emitEvent("client:messages-cleared")}toolResultAdded(e,n,r,s){this.emitEvent("tool:result-added",{toolCallId:e,toolName:n,output:r,state:s})}toolApprovalResponded(e,n,r){this.emitEvent("tool:approval-responded",{approvalId:e,toolCallId:n,approved:r})}}class $P extends BP{emitEvent(e,n){e.startsWith("client:")||e.startsWith("tool:")?Vt.emit(e,{...n,clientId:this.clientId,timestamp:Date.now()}):Vt.emit(e,{...n,timestamp:Date.now()})}}class UP{constructor(e){if(this.body={},this.isLoading=!1,this.error=void 0,this.abortController=null,this.currentStreamId=null,this.currentMessageId=null,this.postStreamActions=[],this.uniqueId=e.id||this.generateUniqueId("chat"),this.body=e.body||{},this.connection=e.connection,this.events=new $P(this.uniqueId),this.clientToolsRef={current:new Map},e.tools)for(const n of e.tools)this.clientToolsRef.current.set(n.name,n);this.callbacksRef={current:{onResponse:e.onResponse||(()=>{}),onChunk:e.onChunk||(()=>{}),onFinish:e.onFinish||(()=>{}),onError:e.onError||(()=>{}),onMessagesChange:e.onMessagesChange||(()=>{}),onLoadingChange:e.onLoadingChange||(()=>{}),onErrorChange:e.onErrorChange||(()=>{})}},this.processor=new t0({chunkStrategy:e.streamProcessor?.chunkStrategy,initialMessages:e.initialMessages,events:{onMessagesChange:n=>{this.callbacksRef.current.onMessagesChange(n)},onStreamStart:()=>{},onStreamEnd:n=>{this.callbacksRef.current.onFinish(n)},onError:n=>{this.setError(n),this.callbacksRef.current.onError(n)},onTextUpdate:(n,r)=>{this.currentStreamId&&this.events.textUpdated(this.currentStreamId,n,r)},onThinkingUpdate:(n,r)=>{this.currentStreamId&&this.events.thinkingUpdated(this.currentStreamId,n,r)},onToolCallStateChange:(n,r,s,a)=>{const d=this.processor.getMessages().find(m=>m.id===n)?.parts.find(m=>m.type==="tool-call"&&m.id===r)?.name||"unknown";this.currentStreamId&&this.events.toolCallStateChanged(this.currentStreamId,n,r,d,s,a)},onToolCall:async n=>{const r=this.clientToolsRef.current.get(n.toolName);if(r?.execute)try{const s=await r.execute(n.input);await this.addToolResult({toolCallId:n.toolCallId,tool:n.toolName,output:s,state:"output-available"})}catch(s){await this.addToolResult({toolCallId:n.toolCallId,tool:n.toolName,output:null,state:"output-error",errorText:s.message})}},onApprovalRequest:n=>{this.events.approvalRequested(this.currentMessageId||"",n.toolCallId,n.toolName,n.input,n.approvalId)}}}),this.events.clientCreated(this.processor.getMessages().length)}generateUniqueId(e){return`${e}-${Date.now()}-${Math.random().toString(36).substring(7)}`}setIsLoading(e){this.isLoading=e,this.callbacksRef.current.onLoadingChange(e),this.events.loadingChanged(e)}setError(e){this.error=e,this.callbacksRef.current.onErrorChange(e),this.events.errorChanged(e?.message||null)}async processStream(e){this.currentStreamId=this.generateUniqueId("stream");const n=this.processor.startAssistantMessage();this.currentMessageId=n;const r={id:n,role:"assistant",parts:[],createdAt:new Date};this.events.messageAppended(r);for await(const l of e)this.callbacksRef.current.onChunk(l),this.processor.processChunk(l),await new Promise(u=>setTimeout(u,0));return this.processor.finalizeStream(),this.currentStreamId=null,this.currentMessageId=null,this.processor.getMessages().find(l=>l.id===n)||{id:n,role:"assistant",parts:[],createdAt:new Date}}async sendMessage(e){if(!e.trim()||this.isLoading)return;const n=this.processor.addUserMessage(e.trim());this.events.messageSent(n.id,e.trim()),await this.streamResponse()}async append(e){const n=TP(e,Hf);if(n.role==="system")return;const r=n;this.events.messageAppended(r);const s=this.processor.getMessages();this.processor.setMessages([...s,r]),await this.streamResponse()}async streamResponse(){this.setIsLoading(!0),this.setError(void 0),this.abortController=new AbortController;try{const e=this.processor.toModelMessages();await this.callbacksRef.current.onResponse();const n={...this.body,conversationId:this.uniqueId},r=this.connection.connect(e,n,this.abortController.signal);await this.processStream(r)}catch(e){if(e instanceof Error){if(e.name==="AbortError")return;this.setError(e),this.callbacksRef.current.onError(e)}}finally{this.abortController=null,this.setIsLoading(!1),await this.drainPostStreamActions()}}async reload(){const e=this.processor.getMessages();if(e.length===0)return;const n=e.findLastIndex(r=>r.role==="user");n!==-1&&(this.events.reloaded(n),this.processor.removeMessagesAfter(n),await this.streamResponse())}stop(){this.abortController&&(this.abortController.abort(),this.abortController=null),this.setIsLoading(!1),this.events.stopped()}clear(){this.processor.clearMessages(),this.setError(void 0),this.events.messagesCleared()}async addToolResult(e){if(this.events.toolResultAdded(e.toolCallId,e.tool,e.output,e.state||"output-available"),this.processor.addToolResult(e.toolCallId,e.output,e.errorText),this.isLoading){this.queuePostStreamAction(()=>this.checkForContinuation());return}await this.checkForContinuation()}async addToolApprovalResponse(e){const n=this.processor.getMessages();let r;for(const s of n){const a=s.parts.find(l=>l.type==="tool-call"&&l.approval?.id===e.id);if(a){r=a.id;break}}if(r&&this.events.toolApprovalResponded(e.id,r,e.approved),this.processor.addToolApprovalResponse(e.id,e.approved),this.isLoading){this.queuePostStreamAction(()=>this.checkForContinuation());return}await this.checkForContinuation()}queuePostStreamAction(e){this.postStreamActions.push(e)}async drainPostStreamActions(){for(;this.postStreamActions.length>0;)await this.postStreamActions.shift()()}async checkForContinuation(){this.shouldAutoSend()&&await this.streamResponse()}shouldAutoSend(){return this.processor.areAllToolsComplete()}getMessages(){return this.processor.getMessages()}getIsLoading(){return this.isLoading}getError(){return this.error}setMessagesManually(e){this.processor.setMessages(e)}updateOptions(e){if(e.connection!==void 0&&(this.connection=e.connection),e.body!==void 0&&(this.body=e.body),e.tools!==void 0){this.clientToolsRef.current=new Map;for(const n of e.tools)this.clientToolsRef.current.set(n.name,n)}e.onResponse!==void 0&&(this.callbacksRef.current.onResponse=e.onResponse),e.onChunk!==void 0&&(this.callbacksRef.current.onChunk=e.onChunk),e.onFinish!==void 0&&(this.callbacksRef.current.onFinish=e.onFinish),e.onError!==void 0&&(this.callbacksRef.current.onError=e.onError)}}function wd(...t){return t}function qP(t){return{async*connect(e,n){const r=EP(e);yield*t(r,n)}}}function de(t,e,n){function r(u,f){if(u._zod||Object.defineProperty(u,"_zod",{value:{def:f,constr:l,traits:new Set},enumerable:!1}),u._zod.traits.has(t))return;u._zod.traits.add(t),e(u,f);const d=l.prototype,m=Object.keys(d);for(let p=0;p<m.length;p++){const y=m[p];y in u||(u[y]=d[y].bind(u))}}const s=n?.Parent??Object;class a extends s{}Object.defineProperty(a,"name",{value:t});function l(u){var f;const d=n?.Parent?new a:this;r(d,u),(f=d._zod).deferred??(f.deferred=[]);for(const m of d._zod.deferred)m();return d}return Object.defineProperty(l,"init",{value:r}),Object.defineProperty(l,Symbol.hasInstance,{value:u=>n?.Parent&&u instanceof n.Parent?!0:u?._zod?.traits?.has(t)}),Object.defineProperty(l,"name",{value:t}),l}class no extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class GE extends Error{constructor(e){super(`Encountered unidirectional transform during encode: ${e}`),this.name="ZodEncodeError"}}const KE={};function Fi(t){return KE}function ZE(t){const e=Object.values(t).filter(r=>typeof r=="number");return Object.entries(t).filter(([r,s])=>e.indexOf(+r)===-1).map(([r,s])=>s)}function Fg(t,e){return typeof e=="bigint"?e.toString():e}function n0(t){return{get value(){{const e=t();return Object.defineProperty(this,"value",{value:e}),e}}}}function r0(t){return t==null}function s0(t){const e=t.startsWith("^")?1:0,n=t.endsWith("$")?t.length-1:t.length;return t.slice(e,n)}const Ew=Symbol("evaluating");function gt(t,e,n){let r;Object.defineProperty(t,e,{get(){if(r!==Ew)return r===void 0&&(r=Ew,r=n()),r},set(s){Object.defineProperty(t,e,{value:s})},configurable:!0})}function Qi(t,e,n){Object.defineProperty(t,e,{value:n,writable:!0,enumerable:!0,configurable:!0})}function ci(...t){const e={};for(const n of t){const r=Object.getOwnPropertyDescriptors(n);Object.assign(e,r)}return Object.defineProperties({},e)}function Cw(t){return JSON.stringify(t)}function FP(t){return t.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"")}const JE="captureStackTrace"in Error?Error.captureStackTrace:(...t)=>{};function Gf(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)}const VP=n0(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{const t=Function;return new t(""),!0}catch{return!1}});function nc(t){if(Gf(t)===!1)return!1;const e=t.constructor;if(e===void 0||typeof e!="function")return!0;const n=e.prototype;return!(Gf(n)===!1||Object.prototype.hasOwnProperty.call(n,"isPrototypeOf")===!1)}function QE(t){return nc(t)?{...t}:Array.isArray(t)?[...t]:t}const HP=new Set(["string","number","symbol"]);function Sd(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function ui(t,e,n){const r=new t._zod.constr(e??t._zod.def);return(!e||n?.parent)&&(r._zod.parent=t),r}function Pe(t){const e=t;if(!e)return{};if(typeof e=="string")return{error:()=>e};if(e?.message!==void 0){if(e?.error!==void 0)throw new Error("Cannot specify both `message` and `error` params");e.error=e.message}return delete e.message,typeof e.error=="string"?{...e,error:()=>e.error}:e}function GP(t){return Object.keys(t).filter(e=>t[e]._zod.optin==="optional"&&t[e]._zod.optout==="optional")}function KP(t,e){const n=t._zod.def,r=n.checks;if(r&&r.length>0)throw new Error(".pick() cannot be used on object schemas containing refinements");const a=ci(t._zod.def,{get shape(){const l={};for(const u in e){if(!(u in n.shape))throw new Error(`Unrecognized key: "${u}"`);e[u]&&(l[u]=n.shape[u])}return Qi(this,"shape",l),l},checks:[]});return ui(t,a)}function ZP(t,e){const n=t._zod.def,r=n.checks;if(r&&r.length>0)throw new Error(".omit() cannot be used on object schemas containing refinements");const a=ci(t._zod.def,{get shape(){const l={...t._zod.def.shape};for(const u in e){if(!(u in n.shape))throw new Error(`Unrecognized key: "${u}"`);e[u]&&delete l[u]}return Qi(this,"shape",l),l},checks:[]});return ui(t,a)}function JP(t,e){if(!nc(e))throw new Error("Invalid input to extend: expected a plain object");const n=t._zod.def.checks;if(n&&n.length>0){const a=t._zod.def.shape;for(const l in e)if(Object.getOwnPropertyDescriptor(a,l)!==void 0)throw new Error("Cannot overwrite keys on object schemas containing refinements. Use `.safeExtend()` instead.")}const s=ci(t._zod.def,{get shape(){const a={...t._zod.def.shape,...e};return Qi(this,"shape",a),a}});return ui(t,s)}function QP(t,e){if(!nc(e))throw new Error("Invalid input to safeExtend: expected a plain object");const n=ci(t._zod.def,{get shape(){const r={...t._zod.def.shape,...e};return Qi(this,"shape",r),r}});return ui(t,n)}function YP(t,e){const n=ci(t._zod.def,{get shape(){const r={...t._zod.def.shape,...e._zod.def.shape};return Qi(this,"shape",r),r},get catchall(){return e._zod.def.catchall},checks:[]});return ui(t,n)}function WP(t,e,n){const s=e._zod.def.checks;if(s&&s.length>0)throw new Error(".partial() cannot be used on object schemas containing refinements");const l=ci(e._zod.def,{get shape(){const u=e._zod.def.shape,f={...u};if(n)for(const d in n){if(!(d in u))throw new Error(`Unrecognized key: "${d}"`);n[d]&&(f[d]=t?new t({type:"optional",innerType:u[d]}):u[d])}else for(const d in u)f[d]=t?new t({type:"optional",innerType:u[d]}):u[d];return Qi(this,"shape",f),f},checks:[]});return ui(e,l)}function XP(t,e,n){const r=ci(e._zod.def,{get shape(){const s=e._zod.def.shape,a={...s};if(n)for(const l in n){if(!(l in a))throw new Error(`Unrecognized key: "${l}"`);n[l]&&(a[l]=new t({type:"nonoptional",innerType:s[l]}))}else for(const l in s)a[l]=new t({type:"nonoptional",innerType:s[l]});return Qi(this,"shape",a),a}});return ui(e,r)}function Qa(t,e=0){if(t.aborted===!0)return!0;for(let n=e;n<t.issues.length;n++)if(t.issues[n]?.continue!==!0)return!0;return!1}function YE(t,e){return e.map(n=>{var r;return(r=n).path??(r.path=[]),n.path.unshift(t),n})}function Uu(t){return typeof t=="string"?t:t?.message}function Vi(t,e,n){const r={...t,path:t.path??[]};if(!t.message){const s=Uu(t.inst?._zod.def?.error?.(t))??Uu(e?.error?.(t))??Uu(n.customError?.(t))??Uu(n.localeError?.(t))??"Invalid input";r.message=s}return delete r.inst,delete r.continue,e?.reportInput||delete r.input,r}function i0(t){return Array.isArray(t)?"array":typeof t=="string"?"string":"unknown"}function rc(...t){const[e,n,r]=t;return typeof e=="string"?{message:e,code:"custom",input:n,inst:r}:{...e}}const WE=(t,e)=>{t.name="$ZodError",Object.defineProperty(t,"_zod",{value:t._zod,enumerable:!1}),Object.defineProperty(t,"issues",{value:e,enumerable:!1}),t.message=JSON.stringify(e,Fg,2),Object.defineProperty(t,"toString",{value:()=>t.message,enumerable:!1})},XE=de("$ZodError",WE),eC=de("$ZodError",WE,{Parent:Error});function e6(t,e=n=>n.message){const n={},r=[];for(const s of t.issues)s.path.length>0?(n[s.path[0]]=n[s.path[0]]||[],n[s.path[0]].push(e(s))):r.push(e(s));return{formErrors:r,fieldErrors:n}}function t6(t,e=n=>n.message){const n={_errors:[]},r=s=>{for(const a of s.issues)if(a.code==="invalid_union"&&a.errors.length)a.errors.map(l=>r({issues:l}));else if(a.code==="invalid_key")r({issues:a.issues});else if(a.code==="invalid_element")r({issues:a.issues});else if(a.path.length===0)n._errors.push(e(a));else{let l=n,u=0;for(;u<a.path.length;){const f=a.path[u];u===a.path.length-1?(l[f]=l[f]||{_errors:[]},l[f]._errors.push(e(a))):l[f]=l[f]||{_errors:[]},l=l[f],u++}}};return r(t),n}const a0=t=>(e,n,r,s)=>{const a=r?Object.assign(r,{async:!1}):{async:!1},l=e._zod.run({value:n,issues:[]},a);if(l instanceof Promise)throw new no;if(l.issues.length){const u=new(s?.Err??t)(l.issues.map(f=>Vi(f,a,Fi())));throw JE(u,s?.callee),u}return l.value},o0=t=>async(e,n,r,s)=>{const a=r?Object.assign(r,{async:!0}):{async:!0};let l=e._zod.run({value:n,issues:[]},a);if(l instanceof Promise&&(l=await l),l.issues.length){const u=new(s?.Err??t)(l.issues.map(f=>Vi(f,a,Fi())));throw JE(u,s?.callee),u}return l.value},kd=t=>(e,n,r)=>{const s=r?{...r,async:!1}:{async:!1},a=e._zod.run({value:n,issues:[]},s);if(a instanceof Promise)throw new no;return a.issues.length?{success:!1,error:new(t??XE)(a.issues.map(l=>Vi(l,s,Fi())))}:{success:!0,data:a.value}},n6=kd(eC),Ed=t=>async(e,n,r)=>{const s=r?Object.assign(r,{async:!0}):{async:!0};let a=e._zod.run({value:n,issues:[]},s);return a instanceof Promise&&(a=await a),a.issues.length?{success:!1,error:new t(a.issues.map(l=>Vi(l,s,Fi())))}:{success:!0,data:a.value}},r6=Ed(eC),s6=t=>(e,n,r)=>{const s=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return a0(t)(e,n,s)},i6=t=>(e,n,r)=>a0(t)(e,n,r),a6=t=>async(e,n,r)=>{const s=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return o0(t)(e,n,s)},o6=t=>async(e,n,r)=>o0(t)(e,n,r),l6=t=>(e,n,r)=>{const s=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return kd(t)(e,n,s)},c6=t=>(e,n,r)=>kd(t)(e,n,r),u6=t=>async(e,n,r)=>{const s=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return Ed(t)(e,n,s)},f6=t=>async(e,n,r)=>Ed(t)(e,n,r),d6=/^[cC][^\s-]{8,}$/,h6=/^[0-9a-z]+$/,p6=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,m6=/^[0-9a-vA-V]{20}$/,g6=/^[A-Za-z0-9]{27}$/,y6=/^[a-zA-Z0-9_-]{21}$/,b6=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,_6=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,Tw=t=>t?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${t}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,v6=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,x6="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function w6(){return new RegExp(x6,"u")}const S6=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,k6=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,E6=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,C6=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,T6=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,tC=/^[A-Za-z0-9_-]*$/,A6=/^\+[1-9]\d{6,14}$/,nC="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",R6=new RegExp(`^${nC}$`);function rC(t){const e="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof t.precision=="number"?t.precision===-1?`${e}`:t.precision===0?`${e}:[0-5]\\d`:`${e}:[0-5]\\d\\.\\d{${t.precision}}`:`${e}(?::[0-5]\\d(?:\\.\\d+)?)?`}function O6(t){return new RegExp(`^${rC(t)}$`)}function I6(t){const e=rC({precision:t.precision}),n=["Z"];t.local&&n.push(""),t.offset&&n.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const r=`${e}(?:${n.join("|")})`;return new RegExp(`^${nC}T(?:${r})$`)}const N6=t=>{const e=t?`[\\s\\S]{${t?.minimum??0},${t?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${e}$`)},M6=/^[^A-Z]*$/,D6=/^[^a-z]*$/,ns=de("$ZodCheck",(t,e)=>{var n;t._zod??(t._zod={}),t._zod.def=e,(n=t._zod).onattach??(n.onattach=[])}),j6=de("$ZodCheckMaxLength",(t,e)=>{var n;ns.init(t,e),(n=t._zod.def).when??(n.when=r=>{const s=r.value;return!r0(s)&&s.length!==void 0}),t._zod.onattach.push(r=>{const s=r._zod.bag.maximum??Number.POSITIVE_INFINITY;e.maximum<s&&(r._zod.bag.maximum=e.maximum)}),t._zod.check=r=>{const s=r.value;if(s.length<=e.maximum)return;const l=i0(s);r.issues.push({origin:l,code:"too_big",maximum:e.maximum,inclusive:!0,input:s,inst:t,continue:!e.abort})}}),L6=de("$ZodCheckMinLength",(t,e)=>{var n;ns.init(t,e),(n=t._zod.def).when??(n.when=r=>{const s=r.value;return!r0(s)&&s.length!==void 0}),t._zod.onattach.push(r=>{const s=r._zod.bag.minimum??Number.NEGATIVE_INFINITY;e.minimum>s&&(r._zod.bag.minimum=e.minimum)}),t._zod.check=r=>{const s=r.value;if(s.length>=e.minimum)return;const l=i0(s);r.issues.push({origin:l,code:"too_small",minimum:e.minimum,inclusive:!0,input:s,inst:t,continue:!e.abort})}}),z6=de("$ZodCheckLengthEquals",(t,e)=>{var n;ns.init(t,e),(n=t._zod.def).when??(n.when=r=>{const s=r.value;return!r0(s)&&s.length!==void 0}),t._zod.onattach.push(r=>{const s=r._zod.bag;s.minimum=e.length,s.maximum=e.length,s.length=e.length}),t._zod.check=r=>{const s=r.value,a=s.length;if(a===e.length)return;const l=i0(s),u=a>e.length;r.issues.push({origin:l,...u?{code:"too_big",maximum:e.length}:{code:"too_small",minimum:e.length},inclusive:!0,exact:!0,input:r.value,inst:t,continue:!e.abort})}}),Cd=de("$ZodCheckStringFormat",(t,e)=>{var n,r;ns.init(t,e),t._zod.onattach.push(s=>{const a=s._zod.bag;a.format=e.format,e.pattern&&(a.patterns??(a.patterns=new Set),a.patterns.add(e.pattern))}),e.pattern?(n=t._zod).check??(n.check=s=>{e.pattern.lastIndex=0,!e.pattern.test(s.value)&&s.issues.push({origin:"string",code:"invalid_format",format:e.format,input:s.value,...e.pattern?{pattern:e.pattern.toString()}:{},inst:t,continue:!e.abort})}):(r=t._zod).check??(r.check=()=>{})}),P6=de("$ZodCheckRegex",(t,e)=>{Cd.init(t,e),t._zod.check=n=>{e.pattern.lastIndex=0,!e.pattern.test(n.value)&&n.issues.push({origin:"string",code:"invalid_format",format:"regex",input:n.value,pattern:e.pattern.toString(),inst:t,continue:!e.abort})}}),B6=de("$ZodCheckLowerCase",(t,e)=>{e.pattern??(e.pattern=M6),Cd.init(t,e)}),$6=de("$ZodCheckUpperCase",(t,e)=>{e.pattern??(e.pattern=D6),Cd.init(t,e)}),U6=de("$ZodCheckIncludes",(t,e)=>{ns.init(t,e);const n=Sd(e.includes),r=new RegExp(typeof e.position=="number"?`^.{${e.position}}${n}`:n);e.pattern=r,t._zod.onattach.push(s=>{const a=s._zod.bag;a.patterns??(a.patterns=new Set),a.patterns.add(r)}),t._zod.check=s=>{s.value.includes(e.includes,e.position)||s.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:e.includes,input:s.value,inst:t,continue:!e.abort})}}),q6=de("$ZodCheckStartsWith",(t,e)=>{ns.init(t,e);const n=new RegExp(`^${Sd(e.prefix)}.*`);e.pattern??(e.pattern=n),t._zod.onattach.push(r=>{const s=r._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(n)}),t._zod.check=r=>{r.value.startsWith(e.prefix)||r.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:e.prefix,input:r.value,inst:t,continue:!e.abort})}}),F6=de("$ZodCheckEndsWith",(t,e)=>{ns.init(t,e);const n=new RegExp(`.*${Sd(e.suffix)}$`);e.pattern??(e.pattern=n),t._zod.onattach.push(r=>{const s=r._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(n)}),t._zod.check=r=>{r.value.endsWith(e.suffix)||r.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:e.suffix,input:r.value,inst:t,continue:!e.abort})}}),V6=de("$ZodCheckOverwrite",(t,e)=>{ns.init(t,e),t._zod.check=n=>{n.value=e.tx(n.value)}});class H6{constructor(e=[]){this.content=[],this.indent=0,this&&(this.args=e)}indented(e){this.indent+=1,e(this),this.indent-=1}write(e){if(typeof e=="function"){e(this,{execution:"sync"}),e(this,{execution:"async"});return}const r=e.split(`
`).filter(l=>l),s=Math.min(...r.map(l=>l.length-l.trimStart().length)),a=r.map(l=>l.slice(s)).map(l=>" ".repeat(this.indent*2)+l);for(const l of a)this.content.push(l)}compile(){const e=Function,n=this?.args,s=[...(this?.content??[""]).map(a=>`  ${a}`)];return new e(...n,s.join(`
`))}}const G6={major:4,minor:3,patch:4},rn=de("$ZodType",(t,e)=>{var n;t??(t={}),t._zod.def=e,t._zod.bag=t._zod.bag||{},t._zod.version=G6;const r=[...t._zod.def.checks??[]];t._zod.traits.has("$ZodCheck")&&r.unshift(t);for(const s of r)for(const a of s._zod.onattach)a(t);if(r.length===0)(n=t._zod).deferred??(n.deferred=[]),t._zod.deferred?.push(()=>{t._zod.run=t._zod.parse});else{const s=(l,u,f)=>{let d=Qa(l),m;for(const p of u){if(p._zod.def.when){if(!p._zod.def.when(l))continue}else if(d)continue;const y=l.issues.length,g=p._zod.check(l);if(g instanceof Promise&&f?.async===!1)throw new no;if(m||g instanceof Promise)m=(m??Promise.resolve()).then(async()=>{await g,l.issues.length!==y&&(d||(d=Qa(l,y)))});else{if(l.issues.length===y)continue;d||(d=Qa(l,y))}}return m?m.then(()=>l):l},a=(l,u,f)=>{if(Qa(l))return l.aborted=!0,l;const d=s(u,r,f);if(d instanceof Promise){if(f.async===!1)throw new no;return d.then(m=>t._zod.parse(m,f))}return t._zod.parse(d,f)};t._zod.run=(l,u)=>{if(u.skipChecks)return t._zod.parse(l,u);if(u.direction==="backward"){const d=t._zod.parse({value:l.value,issues:[]},{...u,skipChecks:!0});return d instanceof Promise?d.then(m=>a(m,l,u)):a(d,l,u)}const f=t._zod.parse(l,u);if(f instanceof Promise){if(u.async===!1)throw new no;return f.then(d=>s(d,r,u))}return s(f,r,u)}}gt(t,"~standard",()=>({validate:s=>{try{const a=n6(t,s);return a.success?{value:a.data}:{issues:a.error?.issues}}catch{return r6(t,s).then(l=>l.success?{value:l.data}:{issues:l.error?.issues})}},vendor:"zod",version:1}))}),l0=de("$ZodString",(t,e)=>{rn.init(t,e),t._zod.pattern=[...t?._zod.bag?.patterns??[]].pop()??N6(t._zod.bag),t._zod.parse=(n,r)=>{if(e.coerce)try{n.value=String(n.value)}catch{}return typeof n.value=="string"||n.issues.push({expected:"string",code:"invalid_type",input:n.value,inst:t}),n}}),It=de("$ZodStringFormat",(t,e)=>{Cd.init(t,e),l0.init(t,e)}),K6=de("$ZodGUID",(t,e)=>{e.pattern??(e.pattern=_6),It.init(t,e)}),Z6=de("$ZodUUID",(t,e)=>{if(e.version){const r={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[e.version];if(r===void 0)throw new Error(`Invalid UUID version: "${e.version}"`);e.pattern??(e.pattern=Tw(r))}else e.pattern??(e.pattern=Tw());It.init(t,e)}),J6=de("$ZodEmail",(t,e)=>{e.pattern??(e.pattern=v6),It.init(t,e)}),Q6=de("$ZodURL",(t,e)=>{It.init(t,e),t._zod.check=n=>{try{const r=n.value.trim(),s=new URL(r);e.hostname&&(e.hostname.lastIndex=0,e.hostname.test(s.hostname)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:e.hostname.source,input:n.value,inst:t,continue:!e.abort})),e.protocol&&(e.protocol.lastIndex=0,e.protocol.test(s.protocol.endsWith(":")?s.protocol.slice(0,-1):s.protocol)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:e.protocol.source,input:n.value,inst:t,continue:!e.abort})),e.normalize?n.value=s.href:n.value=r;return}catch{n.issues.push({code:"invalid_format",format:"url",input:n.value,inst:t,continue:!e.abort})}}}),Y6=de("$ZodEmoji",(t,e)=>{e.pattern??(e.pattern=w6()),It.init(t,e)}),W6=de("$ZodNanoID",(t,e)=>{e.pattern??(e.pattern=y6),It.init(t,e)}),X6=de("$ZodCUID",(t,e)=>{e.pattern??(e.pattern=d6),It.init(t,e)}),e8=de("$ZodCUID2",(t,e)=>{e.pattern??(e.pattern=h6),It.init(t,e)}),t8=de("$ZodULID",(t,e)=>{e.pattern??(e.pattern=p6),It.init(t,e)}),n8=de("$ZodXID",(t,e)=>{e.pattern??(e.pattern=m6),It.init(t,e)}),r8=de("$ZodKSUID",(t,e)=>{e.pattern??(e.pattern=g6),It.init(t,e)}),s8=de("$ZodISODateTime",(t,e)=>{e.pattern??(e.pattern=I6(e)),It.init(t,e)}),i8=de("$ZodISODate",(t,e)=>{e.pattern??(e.pattern=R6),It.init(t,e)}),a8=de("$ZodISOTime",(t,e)=>{e.pattern??(e.pattern=O6(e)),It.init(t,e)}),o8=de("$ZodISODuration",(t,e)=>{e.pattern??(e.pattern=b6),It.init(t,e)}),l8=de("$ZodIPv4",(t,e)=>{e.pattern??(e.pattern=S6),It.init(t,e),t._zod.bag.format="ipv4"}),c8=de("$ZodIPv6",(t,e)=>{e.pattern??(e.pattern=k6),It.init(t,e),t._zod.bag.format="ipv6",t._zod.check=n=>{try{new URL(`http://[${n.value}]`)}catch{n.issues.push({code:"invalid_format",format:"ipv6",input:n.value,inst:t,continue:!e.abort})}}}),u8=de("$ZodCIDRv4",(t,e)=>{e.pattern??(e.pattern=E6),It.init(t,e)}),f8=de("$ZodCIDRv6",(t,e)=>{e.pattern??(e.pattern=C6),It.init(t,e),t._zod.check=n=>{const r=n.value.split("/");try{if(r.length!==2)throw new Error;const[s,a]=r;if(!a)throw new Error;const l=Number(a);if(`${l}`!==a)throw new Error;if(l<0||l>128)throw new Error;new URL(`http://[${s}]`)}catch{n.issues.push({code:"invalid_format",format:"cidrv6",input:n.value,inst:t,continue:!e.abort})}}});function sC(t){if(t==="")return!0;if(t.length%4!==0)return!1;try{return atob(t),!0}catch{return!1}}const d8=de("$ZodBase64",(t,e)=>{e.pattern??(e.pattern=T6),It.init(t,e),t._zod.bag.contentEncoding="base64",t._zod.check=n=>{sC(n.value)||n.issues.push({code:"invalid_format",format:"base64",input:n.value,inst:t,continue:!e.abort})}});function h8(t){if(!tC.test(t))return!1;const e=t.replace(/[-_]/g,r=>r==="-"?"+":"/"),n=e.padEnd(Math.ceil(e.length/4)*4,"=");return sC(n)}const p8=de("$ZodBase64URL",(t,e)=>{e.pattern??(e.pattern=tC),It.init(t,e),t._zod.bag.contentEncoding="base64url",t._zod.check=n=>{h8(n.value)||n.issues.push({code:"invalid_format",format:"base64url",input:n.value,inst:t,continue:!e.abort})}}),m8=de("$ZodE164",(t,e)=>{e.pattern??(e.pattern=A6),It.init(t,e)});function g8(t,e=null){try{const n=t.split(".");if(n.length!==3)return!1;const[r]=n;if(!r)return!1;const s=JSON.parse(atob(r));return!("typ"in s&&s?.typ!=="JWT"||!s.alg||e&&(!("alg"in s)||s.alg!==e))}catch{return!1}}const y8=de("$ZodJWT",(t,e)=>{It.init(t,e),t._zod.check=n=>{g8(n.value,e.alg)||n.issues.push({code:"invalid_format",format:"jwt",input:n.value,inst:t,continue:!e.abort})}}),b8=de("$ZodUnknown",(t,e)=>{rn.init(t,e),t._zod.parse=n=>n}),_8=de("$ZodNever",(t,e)=>{rn.init(t,e),t._zod.parse=(n,r)=>(n.issues.push({expected:"never",code:"invalid_type",input:n.value,inst:t}),n)});function Aw(t,e,n){t.issues.length&&e.issues.push(...YE(n,t.issues)),e.value[n]=t.value}const v8=de("$ZodArray",(t,e)=>{rn.init(t,e),t._zod.parse=(n,r)=>{const s=n.value;if(!Array.isArray(s))return n.issues.push({expected:"array",code:"invalid_type",input:s,inst:t}),n;n.value=Array(s.length);const a=[];for(let l=0;l<s.length;l++){const u=s[l],f=e.element._zod.run({value:u,issues:[]},r);f instanceof Promise?a.push(f.then(d=>Aw(d,n,l))):Aw(f,n,l)}return a.length?Promise.all(a).then(()=>n):n}});function Kf(t,e,n,r,s){if(t.issues.length){if(s&&!(n in r))return;e.issues.push(...YE(n,t.issues))}t.value===void 0?n in r&&(e.value[n]=void 0):e.value[n]=t.value}function iC(t){const e=Object.keys(t.shape);for(const r of e)if(!t.shape?.[r]?._zod?.traits?.has("$ZodType"))throw new Error(`Invalid element at key "${r}": expected a Zod schema`);const n=GP(t.shape);return{...t,keys:e,keySet:new Set(e),numKeys:e.length,optionalKeys:new Set(n)}}function aC(t,e,n,r,s,a){const l=[],u=s.keySet,f=s.catchall._zod,d=f.def.type,m=f.optout==="optional";for(const p in e){if(u.has(p))continue;if(d==="never"){l.push(p);continue}const y=f.run({value:e[p],issues:[]},r);y instanceof Promise?t.push(y.then(g=>Kf(g,n,p,e,m))):Kf(y,n,p,e,m)}return l.length&&n.issues.push({code:"unrecognized_keys",keys:l,input:e,inst:a}),t.length?Promise.all(t).then(()=>n):n}const x8=de("$ZodObject",(t,e)=>{if(rn.init(t,e),!Object.getOwnPropertyDescriptor(e,"shape")?.get){const u=e.shape;Object.defineProperty(e,"shape",{get:()=>{const f={...u};return Object.defineProperty(e,"shape",{value:f}),f}})}const r=n0(()=>iC(e));gt(t._zod,"propValues",()=>{const u=e.shape,f={};for(const d in u){const m=u[d]._zod;if(m.values){f[d]??(f[d]=new Set);for(const p of m.values)f[d].add(p)}}return f});const s=Gf,a=e.catchall;let l;t._zod.parse=(u,f)=>{l??(l=r.value);const d=u.value;if(!s(d))return u.issues.push({expected:"object",code:"invalid_type",input:d,inst:t}),u;u.value={};const m=[],p=l.shape;for(const y of l.keys){const g=p[y],v=g._zod.optout==="optional",w=g._zod.run({value:d[y],issues:[]},f);w instanceof Promise?m.push(w.then(E=>Kf(E,u,y,d,v))):Kf(w,u,y,d,v)}return a?aC(m,d,u,f,r.value,t):m.length?Promise.all(m).then(()=>u):u}}),w8=de("$ZodObjectJIT",(t,e)=>{x8.init(t,e);const n=t._zod.parse,r=n0(()=>iC(e)),s=y=>{const g=new H6(["shape","payload","ctx"]),v=r.value,w=T=>{const D=Cw(T);return`shape[${D}]._zod.run({ value: input[${D}], issues: [] }, ctx)`};g.write("const input = payload.value;");const E=Object.create(null);let k=0;for(const T of v.keys)E[T]=`key_${k++}`;g.write("const newResult = {};");for(const T of v.keys){const D=E[T],N=Cw(T),$=y[T]?._zod?.optout==="optional";g.write(`const ${D} = ${w(T)};`),$?g.write(`
        if (${D}.issues.length) {
          if (${N} in input) {
            payload.issues = payload.issues.concat(${D}.issues.map(iss => ({
              ...iss,
              path: iss.path ? [${N}, ...iss.path] : [${N}]
            })));
          }
        }
        
        if (${D}.value === undefined) {
          if (${N} in input) {
            newResult[${N}] = undefined;
          }
        } else {
          newResult[${N}] = ${D}.value;
        }
        
      `):g.write(`
        if (${D}.issues.length) {
          payload.issues = payload.issues.concat(${D}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${N}, ...iss.path] : [${N}]
          })));
        }
        
        if (${D}.value === undefined) {
          if (${N} in input) {
            newResult[${N}] = undefined;
          }
        } else {
          newResult[${N}] = ${D}.value;
        }
        
      `)}g.write("payload.value = newResult;"),g.write("return payload;");const C=g.compile();return(T,D)=>C(y,T,D)};let a;const l=Gf,u=!KE.jitless,d=u&&VP.value,m=e.catchall;let p;t._zod.parse=(y,g)=>{p??(p=r.value);const v=y.value;return l(v)?u&&d&&g?.async===!1&&g.jitless!==!0?(a||(a=s(e.shape)),y=a(y,g),m?aC([],v,y,g,p,t):y):n(y,g):(y.issues.push({expected:"object",code:"invalid_type",input:v,inst:t}),y)}});function Rw(t,e,n,r){for(const a of t)if(a.issues.length===0)return e.value=a.value,e;const s=t.filter(a=>!Qa(a));return s.length===1?(e.value=s[0].value,s[0]):(e.issues.push({code:"invalid_union",input:e.value,inst:n,errors:t.map(a=>a.issues.map(l=>Vi(l,r,Fi())))}),e)}const S8=de("$ZodUnion",(t,e)=>{rn.init(t,e),gt(t._zod,"optin",()=>e.options.some(s=>s._zod.optin==="optional")?"optional":void 0),gt(t._zod,"optout",()=>e.options.some(s=>s._zod.optout==="optional")?"optional":void 0),gt(t._zod,"values",()=>{if(e.options.every(s=>s._zod.values))return new Set(e.options.flatMap(s=>Array.from(s._zod.values)))}),gt(t._zod,"pattern",()=>{if(e.options.every(s=>s._zod.pattern)){const s=e.options.map(a=>a._zod.pattern);return new RegExp(`^(${s.map(a=>s0(a.source)).join("|")})$`)}});const n=e.options.length===1,r=e.options[0]._zod.run;t._zod.parse=(s,a)=>{if(n)return r(s,a);let l=!1;const u=[];for(const f of e.options){const d=f._zod.run({value:s.value,issues:[]},a);if(d instanceof Promise)u.push(d),l=!0;else{if(d.issues.length===0)return d;u.push(d)}}return l?Promise.all(u).then(f=>Rw(f,s,t,a)):Rw(u,s,t,a)}}),k8=de("$ZodIntersection",(t,e)=>{rn.init(t,e),t._zod.parse=(n,r)=>{const s=n.value,a=e.left._zod.run({value:s,issues:[]},r),l=e.right._zod.run({value:s,issues:[]},r);return a instanceof Promise||l instanceof Promise?Promise.all([a,l]).then(([f,d])=>Ow(n,f,d)):Ow(n,a,l)}});function Vg(t,e){if(t===e)return{valid:!0,data:t};if(t instanceof Date&&e instanceof Date&&+t==+e)return{valid:!0,data:t};if(nc(t)&&nc(e)){const n=Object.keys(e),r=Object.keys(t).filter(a=>n.indexOf(a)!==-1),s={...t,...e};for(const a of r){const l=Vg(t[a],e[a]);if(!l.valid)return{valid:!1,mergeErrorPath:[a,...l.mergeErrorPath]};s[a]=l.data}return{valid:!0,data:s}}if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return{valid:!1,mergeErrorPath:[]};const n=[];for(let r=0;r<t.length;r++){const s=t[r],a=e[r],l=Vg(s,a);if(!l.valid)return{valid:!1,mergeErrorPath:[r,...l.mergeErrorPath]};n.push(l.data)}return{valid:!0,data:n}}return{valid:!1,mergeErrorPath:[]}}function Ow(t,e,n){const r=new Map;let s;for(const u of e.issues)if(u.code==="unrecognized_keys"){s??(s=u);for(const f of u.keys)r.has(f)||r.set(f,{}),r.get(f).l=!0}else t.issues.push(u);for(const u of n.issues)if(u.code==="unrecognized_keys")for(const f of u.keys)r.has(f)||r.set(f,{}),r.get(f).r=!0;else t.issues.push(u);const a=[...r].filter(([,u])=>u.l&&u.r).map(([u])=>u);if(a.length&&s&&t.issues.push({...s,keys:a}),Qa(t))return t;const l=Vg(e.value,n.value);if(!l.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(l.mergeErrorPath)}`);return t.value=l.data,t}const E8=de("$ZodEnum",(t,e)=>{rn.init(t,e);const n=ZE(e.entries),r=new Set(n);t._zod.values=r,t._zod.pattern=new RegExp(`^(${n.filter(s=>HP.has(typeof s)).map(s=>typeof s=="string"?Sd(s):s.toString()).join("|")})$`),t._zod.parse=(s,a)=>{const l=s.value;return r.has(l)||s.issues.push({code:"invalid_value",values:n,input:l,inst:t}),s}}),C8=de("$ZodTransform",(t,e)=>{rn.init(t,e),t._zod.parse=(n,r)=>{if(r.direction==="backward")throw new GE(t.constructor.name);const s=e.transform(n.value,n);if(r.async)return(s instanceof Promise?s:Promise.resolve(s)).then(l=>(n.value=l,n));if(s instanceof Promise)throw new no;return n.value=s,n}});function Iw(t,e){return t.issues.length&&e===void 0?{issues:[],value:void 0}:t}const oC=de("$ZodOptional",(t,e)=>{rn.init(t,e),t._zod.optin="optional",t._zod.optout="optional",gt(t._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,void 0]):void 0),gt(t._zod,"pattern",()=>{const n=e.innerType._zod.pattern;return n?new RegExp(`^(${s0(n.source)})?$`):void 0}),t._zod.parse=(n,r)=>{if(e.innerType._zod.optin==="optional"){const s=e.innerType._zod.run(n,r);return s instanceof Promise?s.then(a=>Iw(a,n.value)):Iw(s,n.value)}return n.value===void 0?n:e.innerType._zod.run(n,r)}}),T8=de("$ZodExactOptional",(t,e)=>{oC.init(t,e),gt(t._zod,"values",()=>e.innerType._zod.values),gt(t._zod,"pattern",()=>e.innerType._zod.pattern),t._zod.parse=(n,r)=>e.innerType._zod.run(n,r)}),A8=de("$ZodNullable",(t,e)=>{rn.init(t,e),gt(t._zod,"optin",()=>e.innerType._zod.optin),gt(t._zod,"optout",()=>e.innerType._zod.optout),gt(t._zod,"pattern",()=>{const n=e.innerType._zod.pattern;return n?new RegExp(`^(${s0(n.source)}|null)$`):void 0}),gt(t._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,null]):void 0),t._zod.parse=(n,r)=>n.value===null?n:e.innerType._zod.run(n,r)}),R8=de("$ZodDefault",(t,e)=>{rn.init(t,e),t._zod.optin="optional",gt(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(n,r)=>{if(r.direction==="backward")return e.innerType._zod.run(n,r);if(n.value===void 0)return n.value=e.defaultValue,n;const s=e.innerType._zod.run(n,r);return s instanceof Promise?s.then(a=>Nw(a,e)):Nw(s,e)}});function Nw(t,e){return t.value===void 0&&(t.value=e.defaultValue),t}const O8=de("$ZodPrefault",(t,e)=>{rn.init(t,e),t._zod.optin="optional",gt(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(n,r)=>(r.direction==="backward"||n.value===void 0&&(n.value=e.defaultValue),e.innerType._zod.run(n,r))}),I8=de("$ZodNonOptional",(t,e)=>{rn.init(t,e),gt(t._zod,"values",()=>{const n=e.innerType._zod.values;return n?new Set([...n].filter(r=>r!==void 0)):void 0}),t._zod.parse=(n,r)=>{const s=e.innerType._zod.run(n,r);return s instanceof Promise?s.then(a=>Mw(a,t)):Mw(s,t)}});function Mw(t,e){return!t.issues.length&&t.value===void 0&&t.issues.push({code:"invalid_type",expected:"nonoptional",input:t.value,inst:e}),t}const N8=de("$ZodCatch",(t,e)=>{rn.init(t,e),gt(t._zod,"optin",()=>e.innerType._zod.optin),gt(t._zod,"optout",()=>e.innerType._zod.optout),gt(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(n,r)=>{if(r.direction==="backward")return e.innerType._zod.run(n,r);const s=e.innerType._zod.run(n,r);return s instanceof Promise?s.then(a=>(n.value=a.value,a.issues.length&&(n.value=e.catchValue({...n,error:{issues:a.issues.map(l=>Vi(l,r,Fi()))},input:n.value}),n.issues=[]),n)):(n.value=s.value,s.issues.length&&(n.value=e.catchValue({...n,error:{issues:s.issues.map(a=>Vi(a,r,Fi()))},input:n.value}),n.issues=[]),n)}}),M8=de("$ZodPipe",(t,e)=>{rn.init(t,e),gt(t._zod,"values",()=>e.in._zod.values),gt(t._zod,"optin",()=>e.in._zod.optin),gt(t._zod,"optout",()=>e.out._zod.optout),gt(t._zod,"propValues",()=>e.in._zod.propValues),t._zod.parse=(n,r)=>{if(r.direction==="backward"){const a=e.out._zod.run(n,r);return a instanceof Promise?a.then(l=>qu(l,e.in,r)):qu(a,e.in,r)}const s=e.in._zod.run(n,r);return s instanceof Promise?s.then(a=>qu(a,e.out,r)):qu(s,e.out,r)}});function qu(t,e,n){return t.issues.length?(t.aborted=!0,t):e._zod.run({value:t.value,issues:t.issues},n)}const D8=de("$ZodReadonly",(t,e)=>{rn.init(t,e),gt(t._zod,"propValues",()=>e.innerType._zod.propValues),gt(t._zod,"values",()=>e.innerType._zod.values),gt(t._zod,"optin",()=>e.innerType?._zod?.optin),gt(t._zod,"optout",()=>e.innerType?._zod?.optout),t._zod.parse=(n,r)=>{if(r.direction==="backward")return e.innerType._zod.run(n,r);const s=e.innerType._zod.run(n,r);return s instanceof Promise?s.then(Dw):Dw(s)}});function Dw(t){return t.value=Object.freeze(t.value),t}const j8=de("$ZodCustom",(t,e)=>{ns.init(t,e),rn.init(t,e),t._zod.parse=(n,r)=>n,t._zod.check=n=>{const r=n.value,s=e.fn(r);if(s instanceof Promise)return s.then(a=>jw(a,n,r,t));jw(s,n,r,t)}});function jw(t,e,n,r){if(!t){const s={code:"custom",input:n,inst:r,path:[...r._zod.def.path??[]],continue:!r._zod.def.abort};r._zod.def.params&&(s.params=r._zod.def.params),e.issues.push(rc(s))}}var Lw;class L8{constructor(){this._map=new WeakMap,this._idmap=new Map}add(e,...n){const r=n[0];return this._map.set(e,r),r&&typeof r=="object"&&"id"in r&&this._idmap.set(r.id,e),this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(e){const n=this._map.get(e);return n&&typeof n=="object"&&"id"in n&&this._idmap.delete(n.id),this._map.delete(e),this}get(e){const n=e._zod.parent;if(n){const r={...this.get(n)??{}};delete r.id;const s={...r,...this._map.get(e)};return Object.keys(s).length?s:void 0}return this._map.get(e)}has(e){return this._map.has(e)}}function z8(){return new L8}(Lw=globalThis).__zod_globalRegistry??(Lw.__zod_globalRegistry=z8());const kl=globalThis.__zod_globalRegistry;function P8(t,e){return new t({type:"string",...Pe(e)})}function B8(t,e){return new t({type:"string",format:"email",check:"string_format",abort:!1,...Pe(e)})}function zw(t,e){return new t({type:"string",format:"guid",check:"string_format",abort:!1,...Pe(e)})}function $8(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,...Pe(e)})}function U8(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...Pe(e)})}function q8(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...Pe(e)})}function F8(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...Pe(e)})}function V8(t,e){return new t({type:"string",format:"url",check:"string_format",abort:!1,...Pe(e)})}function H8(t,e){return new t({type:"string",format:"emoji",check:"string_format",abort:!1,...Pe(e)})}function G8(t,e){return new t({type:"string",format:"nanoid",check:"string_format",abort:!1,...Pe(e)})}function K8(t,e){return new t({type:"string",format:"cuid",check:"string_format",abort:!1,...Pe(e)})}function Z8(t,e){return new t({type:"string",format:"cuid2",check:"string_format",abort:!1,...Pe(e)})}function J8(t,e){return new t({type:"string",format:"ulid",check:"string_format",abort:!1,...Pe(e)})}function Q8(t,e){return new t({type:"string",format:"xid",check:"string_format",abort:!1,...Pe(e)})}function Y8(t,e){return new t({type:"string",format:"ksuid",check:"string_format",abort:!1,...Pe(e)})}function W8(t,e){return new t({type:"string",format:"ipv4",check:"string_format",abort:!1,...Pe(e)})}function X8(t,e){return new t({type:"string",format:"ipv6",check:"string_format",abort:!1,...Pe(e)})}function eB(t,e){return new t({type:"string",format:"cidrv4",check:"string_format",abort:!1,...Pe(e)})}function tB(t,e){return new t({type:"string",format:"cidrv6",check:"string_format",abort:!1,...Pe(e)})}function nB(t,e){return new t({type:"string",format:"base64",check:"string_format",abort:!1,...Pe(e)})}function rB(t,e){return new t({type:"string",format:"base64url",check:"string_format",abort:!1,...Pe(e)})}function sB(t,e){return new t({type:"string",format:"e164",check:"string_format",abort:!1,...Pe(e)})}function iB(t,e){return new t({type:"string",format:"jwt",check:"string_format",abort:!1,...Pe(e)})}function aB(t,e){return new t({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...Pe(e)})}function oB(t,e){return new t({type:"string",format:"date",check:"string_format",...Pe(e)})}function lB(t,e){return new t({type:"string",format:"time",check:"string_format",precision:null,...Pe(e)})}function cB(t,e){return new t({type:"string",format:"duration",check:"string_format",...Pe(e)})}function uB(t){return new t({type:"unknown"})}function fB(t,e){return new t({type:"never",...Pe(e)})}function lC(t,e){return new j6({check:"max_length",...Pe(e),maximum:t})}function Zf(t,e){return new L6({check:"min_length",...Pe(e),minimum:t})}function cC(t,e){return new z6({check:"length_equals",...Pe(e),length:t})}function dB(t,e){return new P6({check:"string_format",format:"regex",...Pe(e),pattern:t})}function hB(t){return new B6({check:"string_format",format:"lowercase",...Pe(t)})}function pB(t){return new $6({check:"string_format",format:"uppercase",...Pe(t)})}function mB(t,e){return new U6({check:"string_format",format:"includes",...Pe(e),includes:t})}function gB(t,e){return new q6({check:"string_format",format:"starts_with",...Pe(e),prefix:t})}function yB(t,e){return new F6({check:"string_format",format:"ends_with",...Pe(e),suffix:t})}function mo(t){return new V6({check:"overwrite",tx:t})}function bB(t){return mo(e=>e.normalize(t))}function _B(){return mo(t=>t.trim())}function vB(){return mo(t=>t.toLowerCase())}function xB(){return mo(t=>t.toUpperCase())}function wB(){return mo(t=>FP(t))}function SB(t,e,n){return new t({type:"array",element:e,...Pe(n)})}function kB(t,e,n){return new t({type:"custom",check:"custom",fn:e,...Pe(n)})}function EB(t){const e=CB(n=>(n.addIssue=r=>{if(typeof r=="string")n.issues.push(rc(r,n.value,e._zod.def));else{const s=r;s.fatal&&(s.continue=!1),s.code??(s.code="custom"),s.input??(s.input=n.value),s.inst??(s.inst=e),s.continue??(s.continue=!e._zod.def.abort),n.issues.push(rc(s))}},t(n.value,n)));return e}function CB(t,e){const n=new ns({check:"custom",...Pe(e)});return n._zod.check=t,n}function uC(t){let e=t?.target??"draft-2020-12";return e==="draft-4"&&(e="draft-04"),e==="draft-7"&&(e="draft-07"),{processors:t.processors??{},metadataRegistry:t?.metadata??kl,target:e,unrepresentable:t?.unrepresentable??"throw",override:t?.override??(()=>{}),io:t?.io??"output",counter:0,seen:new Map,cycles:t?.cycles??"ref",reused:t?.reused??"inline",external:t?.external??void 0}}function xn(t,e,n={path:[],schemaPath:[]}){var r;const s=t._zod.def,a=e.seen.get(t);if(a)return a.count++,n.schemaPath.includes(t)&&(a.cycle=n.path),a.schema;const l={schema:{},count:1,cycle:void 0,path:n.path};e.seen.set(t,l);const u=t._zod.toJSONSchema?.();if(u)l.schema=u;else{const m={...n,schemaPath:[...n.schemaPath,t],path:n.path};if(t._zod.processJSONSchema)t._zod.processJSONSchema(e,l.schema,m);else{const y=l.schema,g=e.processors[s.type];if(!g)throw new Error(`[toJSONSchema]: Non-representable type encountered: ${s.type}`);g(t,e,y,m)}const p=t._zod.parent;p&&(l.ref||(l.ref=p),xn(p,e,m),e.seen.get(p).isParent=!0)}const f=e.metadataRegistry.get(t);return f&&Object.assign(l.schema,f),e.io==="input"&&Dn(t)&&(delete l.schema.examples,delete l.schema.default),e.io==="input"&&l.schema._prefault&&((r=l.schema).default??(r.default=l.schema._prefault)),delete l.schema._prefault,e.seen.get(t).schema}function fC(t,e){const n=t.seen.get(e);if(!n)throw new Error("Unprocessed schema. This is a bug in Zod.");const r=new Map;for(const l of t.seen.entries()){const u=t.metadataRegistry.get(l[0])?.id;if(u){const f=r.get(u);if(f&&f!==l[0])throw new Error(`Duplicate schema id "${u}" detected during JSON Schema conversion. Two different schemas cannot share the same id when converted together.`);r.set(u,l[0])}}const s=l=>{const u=t.target==="draft-2020-12"?"$defs":"definitions";if(t.external){const p=t.external.registry.get(l[0])?.id,y=t.external.uri??(v=>v);if(p)return{ref:y(p)};const g=l[1].defId??l[1].schema.id??`schema${t.counter++}`;return l[1].defId=g,{defId:g,ref:`${y("__shared")}#/${u}/${g}`}}if(l[1]===n)return{ref:"#"};const d=`#/${u}/`,m=l[1].schema.id??`__schema${t.counter++}`;return{defId:m,ref:d+m}},a=l=>{if(l[1].schema.$ref)return;const u=l[1],{ref:f,defId:d}=s(l);u.def={...u.schema},d&&(u.defId=d);const m=u.schema;for(const p in m)delete m[p];m.$ref=f};if(t.cycles==="throw")for(const l of t.seen.entries()){const u=l[1];if(u.cycle)throw new Error(`Cycle detected: #/${u.cycle?.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(const l of t.seen.entries()){const u=l[1];if(e===l[0]){a(l);continue}if(t.external){const d=t.external.registry.get(l[0])?.id;if(e!==l[0]&&d){a(l);continue}}if(t.metadataRegistry.get(l[0])?.id){a(l);continue}if(u.cycle){a(l);continue}if(u.count>1&&t.reused==="ref"){a(l);continue}}}function dC(t,e){const n=t.seen.get(e);if(!n)throw new Error("Unprocessed schema. This is a bug in Zod.");const r=l=>{const u=t.seen.get(l);if(u.ref===null)return;const f=u.def??u.schema,d={...f},m=u.ref;if(u.ref=null,m){r(m);const y=t.seen.get(m),g=y.schema;if(g.$ref&&(t.target==="draft-07"||t.target==="draft-04"||t.target==="openapi-3.0")?(f.allOf=f.allOf??[],f.allOf.push(g)):Object.assign(f,g),Object.assign(f,d),l._zod.parent===m)for(const w in f)w==="$ref"||w==="allOf"||w in d||delete f[w];if(g.$ref)for(const w in f)w==="$ref"||w==="allOf"||w in y.def&&JSON.stringify(f[w])===JSON.stringify(y.def[w])&&delete f[w]}const p=l._zod.parent;if(p&&p!==m){r(p);const y=t.seen.get(p);if(y?.schema.$ref&&(f.$ref=y.schema.$ref,y.def))for(const g in f)g==="$ref"||g==="allOf"||g in y.def&&JSON.stringify(f[g])===JSON.stringify(y.def[g])&&delete f[g]}t.override({zodSchema:l,jsonSchema:f,path:u.path??[]})};for(const l of[...t.seen.entries()].reverse())r(l[0]);const s={};if(t.target==="draft-2020-12"?s.$schema="https://json-schema.org/draft/2020-12/schema":t.target==="draft-07"?s.$schema="http://json-schema.org/draft-07/schema#":t.target==="draft-04"?s.$schema="http://json-schema.org/draft-04/schema#":t.target,t.external?.uri){const l=t.external.registry.get(e)?.id;if(!l)throw new Error("Schema is missing an `id` property");s.$id=t.external.uri(l)}Object.assign(s,n.def??n.schema);const a=t.external?.defs??{};for(const l of t.seen.entries()){const u=l[1];u.def&&u.defId&&(a[u.defId]=u.def)}t.external||Object.keys(a).length>0&&(t.target==="draft-2020-12"?s.$defs=a:s.definitions=a);try{const l=JSON.parse(JSON.stringify(s));return Object.defineProperty(l,"~standard",{value:{...e["~standard"],jsonSchema:{input:Jf(e,"input",t.processors),output:Jf(e,"output",t.processors)}},enumerable:!1,writable:!1}),l}catch{throw new Error("Error converting schema to JSON.")}}function Dn(t,e){const n=e??{seen:new Set};if(n.seen.has(t))return!1;n.seen.add(t);const r=t._zod.def;if(r.type==="transform")return!0;if(r.type==="array")return Dn(r.element,n);if(r.type==="set")return Dn(r.valueType,n);if(r.type==="lazy")return Dn(r.getter(),n);if(r.type==="promise"||r.type==="optional"||r.type==="nonoptional"||r.type==="nullable"||r.type==="readonly"||r.type==="default"||r.type==="prefault")return Dn(r.innerType,n);if(r.type==="intersection")return Dn(r.left,n)||Dn(r.right,n);if(r.type==="record"||r.type==="map")return Dn(r.keyType,n)||Dn(r.valueType,n);if(r.type==="pipe")return Dn(r.in,n)||Dn(r.out,n);if(r.type==="object"){for(const s in r.shape)if(Dn(r.shape[s],n))return!0;return!1}if(r.type==="union"){for(const s of r.options)if(Dn(s,n))return!0;return!1}if(r.type==="tuple"){for(const s of r.items)if(Dn(s,n))return!0;return!!(r.rest&&Dn(r.rest,n))}return!1}const TB=(t,e={})=>n=>{const r=uC({...n,processors:e});return xn(t,r),fC(r,t),dC(r,t)},Jf=(t,e,n={})=>r=>{const{libraryOptions:s,target:a}=r??{},l=uC({...s??{},target:a,io:e,processors:n});return xn(t,l),fC(l,t),dC(l,t)},AB={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},RB=(t,e,n,r)=>{const s=n;s.type="string";const{minimum:a,maximum:l,format:u,patterns:f,contentEncoding:d}=t._zod.bag;if(typeof a=="number"&&(s.minLength=a),typeof l=="number"&&(s.maxLength=l),u&&(s.format=AB[u]??u,s.format===""&&delete s.format,u==="time"&&delete s.format),d&&(s.contentEncoding=d),f&&f.size>0){const m=[...f];m.length===1?s.pattern=m[0].source:m.length>1&&(s.allOf=[...m.map(p=>({...e.target==="draft-07"||e.target==="draft-04"||e.target==="openapi-3.0"?{type:"string"}:{},pattern:p.source}))])}},OB=(t,e,n,r)=>{n.not={}},IB=(t,e,n,r)=>{},NB=(t,e,n,r)=>{const s=t._zod.def,a=ZE(s.entries);a.every(l=>typeof l=="number")&&(n.type="number"),a.every(l=>typeof l=="string")&&(n.type="string"),n.enum=a},MB=(t,e,n,r)=>{if(e.unrepresentable==="throw")throw new Error("Custom types cannot be represented in JSON Schema")},DB=(t,e,n,r)=>{if(e.unrepresentable==="throw")throw new Error("Transforms cannot be represented in JSON Schema")},jB=(t,e,n,r)=>{const s=n,a=t._zod.def,{minimum:l,maximum:u}=t._zod.bag;typeof l=="number"&&(s.minItems=l),typeof u=="number"&&(s.maxItems=u),s.type="array",s.items=xn(a.element,e,{...r,path:[...r.path,"items"]})},LB=(t,e,n,r)=>{const s=n,a=t._zod.def;s.type="object",s.properties={};const l=a.shape;for(const d in l)s.properties[d]=xn(l[d],e,{...r,path:[...r.path,"properties",d]});const u=new Set(Object.keys(l)),f=new Set([...u].filter(d=>{const m=a.shape[d]._zod;return e.io==="input"?m.optin===void 0:m.optout===void 0}));f.size>0&&(s.required=Array.from(f)),a.catchall?._zod.def.type==="never"?s.additionalProperties=!1:a.catchall?a.catchall&&(s.additionalProperties=xn(a.catchall,e,{...r,path:[...r.path,"additionalProperties"]})):e.io==="output"&&(s.additionalProperties=!1)},zB=(t,e,n,r)=>{const s=t._zod.def,a=s.inclusive===!1,l=s.options.map((u,f)=>xn(u,e,{...r,path:[...r.path,a?"oneOf":"anyOf",f]}));a?n.oneOf=l:n.anyOf=l},PB=(t,e,n,r)=>{const s=t._zod.def,a=xn(s.left,e,{...r,path:[...r.path,"allOf",0]}),l=xn(s.right,e,{...r,path:[...r.path,"allOf",1]}),u=d=>"allOf"in d&&Object.keys(d).length===1,f=[...u(a)?a.allOf:[a],...u(l)?l.allOf:[l]];n.allOf=f},BB=(t,e,n,r)=>{const s=t._zod.def,a=xn(s.innerType,e,r),l=e.seen.get(t);e.target==="openapi-3.0"?(l.ref=s.innerType,n.nullable=!0):n.anyOf=[a,{type:"null"}]},$B=(t,e,n,r)=>{const s=t._zod.def;xn(s.innerType,e,r);const a=e.seen.get(t);a.ref=s.innerType},UB=(t,e,n,r)=>{const s=t._zod.def;xn(s.innerType,e,r);const a=e.seen.get(t);a.ref=s.innerType,n.default=JSON.parse(JSON.stringify(s.defaultValue))},qB=(t,e,n,r)=>{const s=t._zod.def;xn(s.innerType,e,r);const a=e.seen.get(t);a.ref=s.innerType,e.io==="input"&&(n._prefault=JSON.parse(JSON.stringify(s.defaultValue)))},FB=(t,e,n,r)=>{const s=t._zod.def;xn(s.innerType,e,r);const a=e.seen.get(t);a.ref=s.innerType;let l;try{l=s.catchValue(void 0)}catch{throw new Error("Dynamic catch values are not supported in JSON Schema")}n.default=l},VB=(t,e,n,r)=>{const s=t._zod.def,a=e.io==="input"?s.in._zod.def.type==="transform"?s.out:s.in:s.out;xn(a,e,r);const l=e.seen.get(t);l.ref=a},HB=(t,e,n,r)=>{const s=t._zod.def;xn(s.innerType,e,r);const a=e.seen.get(t);a.ref=s.innerType,n.readOnly=!0},hC=(t,e,n,r)=>{const s=t._zod.def;xn(s.innerType,e,r);const a=e.seen.get(t);a.ref=s.innerType},GB=de("ZodISODateTime",(t,e)=>{s8.init(t,e),Mt.init(t,e)});function KB(t){return aB(GB,t)}const ZB=de("ZodISODate",(t,e)=>{i8.init(t,e),Mt.init(t,e)});function JB(t){return oB(ZB,t)}const QB=de("ZodISOTime",(t,e)=>{a8.init(t,e),Mt.init(t,e)});function YB(t){return lB(QB,t)}const WB=de("ZodISODuration",(t,e)=>{o8.init(t,e),Mt.init(t,e)});function XB(t){return cB(WB,t)}const e$=(t,e)=>{XE.init(t,e),t.name="ZodError",Object.defineProperties(t,{format:{value:n=>t6(t,n)},flatten:{value:n=>e6(t,n)},addIssue:{value:n=>{t.issues.push(n),t.message=JSON.stringify(t.issues,Fg,2)}},addIssues:{value:n=>{t.issues.push(...n),t.message=JSON.stringify(t.issues,Fg,2)}},isEmpty:{get(){return t.issues.length===0}}})},Lr=de("ZodError",e$,{Parent:Error}),t$=a0(Lr),n$=o0(Lr),r$=kd(Lr),s$=Ed(Lr),i$=s6(Lr),a$=i6(Lr),o$=a6(Lr),l$=o6(Lr),c$=l6(Lr),u$=c6(Lr),f$=u6(Lr),d$=f6(Lr),sn=de("ZodType",(t,e)=>(rn.init(t,e),Object.assign(t["~standard"],{jsonSchema:{input:Jf(t,"input"),output:Jf(t,"output")}}),t.toJSONSchema=TB(t,{}),t.def=e,t.type=e.type,Object.defineProperty(t,"_def",{value:e}),t.check=(...n)=>t.clone(ci(e,{checks:[...e.checks??[],...n.map(r=>typeof r=="function"?{_zod:{check:r,def:{check:"custom"},onattach:[]}}:r)]}),{parent:!0}),t.with=t.check,t.clone=(n,r)=>ui(t,n,r),t.brand=()=>t,t.register=((n,r)=>(n.add(t,r),t)),t.parse=(n,r)=>t$(t,n,r,{callee:t.parse}),t.safeParse=(n,r)=>r$(t,n,r),t.parseAsync=async(n,r)=>n$(t,n,r,{callee:t.parseAsync}),t.safeParseAsync=async(n,r)=>s$(t,n,r),t.spa=t.safeParseAsync,t.encode=(n,r)=>i$(t,n,r),t.decode=(n,r)=>a$(t,n,r),t.encodeAsync=async(n,r)=>o$(t,n,r),t.decodeAsync=async(n,r)=>l$(t,n,r),t.safeEncode=(n,r)=>c$(t,n,r),t.safeDecode=(n,r)=>u$(t,n,r),t.safeEncodeAsync=async(n,r)=>f$(t,n,r),t.safeDecodeAsync=async(n,r)=>d$(t,n,r),t.refine=(n,r)=>t.check(rU(n,r)),t.superRefine=n=>t.check(sU(n)),t.overwrite=n=>t.check(mo(n)),t.optional=()=>$w(t),t.exactOptional=()=>V$(t),t.nullable=()=>Uw(t),t.nullish=()=>$w(Uw(t)),t.nonoptional=n=>Q$(t,n),t.array=()=>j$(t),t.or=n=>P$([t,n]),t.and=n=>$$(t,n),t.transform=n=>qw(t,q$(n)),t.default=n=>K$(t,n),t.prefault=n=>J$(t,n),t.catch=n=>W$(t,n),t.pipe=n=>qw(t,n),t.readonly=()=>tU(t),t.describe=n=>{const r=t.clone();return kl.add(r,{description:n}),r},Object.defineProperty(t,"description",{get(){return kl.get(t)?.description},configurable:!0}),t.meta=(...n)=>{if(n.length===0)return kl.get(t);const r=t.clone();return kl.add(r,n[0]),r},t.isOptional=()=>t.safeParse(void 0).success,t.isNullable=()=>t.safeParse(null).success,t.apply=n=>n(t),t)),pC=de("_ZodString",(t,e)=>{l0.init(t,e),sn.init(t,e),t._zod.processJSONSchema=(r,s,a)=>RB(t,r,s);const n=t._zod.bag;t.format=n.format??null,t.minLength=n.minimum??null,t.maxLength=n.maximum??null,t.regex=(...r)=>t.check(dB(...r)),t.includes=(...r)=>t.check(mB(...r)),t.startsWith=(...r)=>t.check(gB(...r)),t.endsWith=(...r)=>t.check(yB(...r)),t.min=(...r)=>t.check(Zf(...r)),t.max=(...r)=>t.check(lC(...r)),t.length=(...r)=>t.check(cC(...r)),t.nonempty=(...r)=>t.check(Zf(1,...r)),t.lowercase=r=>t.check(hB(r)),t.uppercase=r=>t.check(pB(r)),t.trim=()=>t.check(_B()),t.normalize=(...r)=>t.check(bB(...r)),t.toLowerCase=()=>t.check(vB()),t.toUpperCase=()=>t.check(xB()),t.slugify=()=>t.check(wB())}),h$=de("ZodString",(t,e)=>{l0.init(t,e),pC.init(t,e),t.email=n=>t.check(B8(p$,n)),t.url=n=>t.check(V8(m$,n)),t.jwt=n=>t.check(iB(O$,n)),t.emoji=n=>t.check(H8(g$,n)),t.guid=n=>t.check(zw(Pw,n)),t.uuid=n=>t.check($8(Fu,n)),t.uuidv4=n=>t.check(U8(Fu,n)),t.uuidv6=n=>t.check(q8(Fu,n)),t.uuidv7=n=>t.check(F8(Fu,n)),t.nanoid=n=>t.check(G8(y$,n)),t.guid=n=>t.check(zw(Pw,n)),t.cuid=n=>t.check(K8(b$,n)),t.cuid2=n=>t.check(Z8(_$,n)),t.ulid=n=>t.check(J8(v$,n)),t.base64=n=>t.check(nB(T$,n)),t.base64url=n=>t.check(rB(A$,n)),t.xid=n=>t.check(Q8(x$,n)),t.ksuid=n=>t.check(Y8(w$,n)),t.ipv4=n=>t.check(W8(S$,n)),t.ipv6=n=>t.check(X8(k$,n)),t.cidrv4=n=>t.check(eB(E$,n)),t.cidrv6=n=>t.check(tB(C$,n)),t.e164=n=>t.check(sB(R$,n)),t.datetime=n=>t.check(KB(n)),t.date=n=>t.check(JB(n)),t.time=n=>t.check(YB(n)),t.duration=n=>t.check(XB(n))});function gr(t){return P8(h$,t)}const Mt=de("ZodStringFormat",(t,e)=>{It.init(t,e),pC.init(t,e)}),p$=de("ZodEmail",(t,e)=>{J6.init(t,e),Mt.init(t,e)}),Pw=de("ZodGUID",(t,e)=>{K6.init(t,e),Mt.init(t,e)}),Fu=de("ZodUUID",(t,e)=>{Z6.init(t,e),Mt.init(t,e)}),m$=de("ZodURL",(t,e)=>{Q6.init(t,e),Mt.init(t,e)}),g$=de("ZodEmoji",(t,e)=>{Y6.init(t,e),Mt.init(t,e)}),y$=de("ZodNanoID",(t,e)=>{W6.init(t,e),Mt.init(t,e)}),b$=de("ZodCUID",(t,e)=>{X6.init(t,e),Mt.init(t,e)}),_$=de("ZodCUID2",(t,e)=>{e8.init(t,e),Mt.init(t,e)}),v$=de("ZodULID",(t,e)=>{t8.init(t,e),Mt.init(t,e)}),x$=de("ZodXID",(t,e)=>{n8.init(t,e),Mt.init(t,e)}),w$=de("ZodKSUID",(t,e)=>{r8.init(t,e),Mt.init(t,e)}),S$=de("ZodIPv4",(t,e)=>{l8.init(t,e),Mt.init(t,e)}),k$=de("ZodIPv6",(t,e)=>{c8.init(t,e),Mt.init(t,e)}),E$=de("ZodCIDRv4",(t,e)=>{u8.init(t,e),Mt.init(t,e)}),C$=de("ZodCIDRv6",(t,e)=>{f8.init(t,e),Mt.init(t,e)}),T$=de("ZodBase64",(t,e)=>{d8.init(t,e),Mt.init(t,e)}),A$=de("ZodBase64URL",(t,e)=>{p8.init(t,e),Mt.init(t,e)}),R$=de("ZodE164",(t,e)=>{m8.init(t,e),Mt.init(t,e)}),O$=de("ZodJWT",(t,e)=>{y8.init(t,e),Mt.init(t,e)}),I$=de("ZodUnknown",(t,e)=>{b8.init(t,e),sn.init(t,e),t._zod.processJSONSchema=(n,r,s)=>IB()});function Bw(){return uB(I$)}const N$=de("ZodNever",(t,e)=>{_8.init(t,e),sn.init(t,e),t._zod.processJSONSchema=(n,r,s)=>OB(t,n,r)});function M$(t){return fB(N$,t)}const D$=de("ZodArray",(t,e)=>{v8.init(t,e),sn.init(t,e),t._zod.processJSONSchema=(n,r,s)=>jB(t,n,r,s),t.element=e.element,t.min=(n,r)=>t.check(Zf(n,r)),t.nonempty=n=>t.check(Zf(1,n)),t.max=(n,r)=>t.check(lC(n,r)),t.length=(n,r)=>t.check(cC(n,r)),t.unwrap=()=>t.element});function j$(t,e){return SB(D$,t,e)}const L$=de("ZodObject",(t,e)=>{w8.init(t,e),sn.init(t,e),t._zod.processJSONSchema=(n,r,s)=>LB(t,n,r,s),gt(t,"shape",()=>e.shape),t.keyof=()=>Td(Object.keys(t._zod.def.shape)),t.catchall=n=>t.clone({...t._zod.def,catchall:n}),t.passthrough=()=>t.clone({...t._zod.def,catchall:Bw()}),t.loose=()=>t.clone({...t._zod.def,catchall:Bw()}),t.strict=()=>t.clone({...t._zod.def,catchall:M$()}),t.strip=()=>t.clone({...t._zod.def,catchall:void 0}),t.extend=n=>JP(t,n),t.safeExtend=n=>QP(t,n),t.merge=n=>YP(t,n),t.pick=n=>KP(t,n),t.omit=n=>ZP(t,n),t.partial=(...n)=>WP(mC,t,n[0]),t.required=(...n)=>XP(gC,t,n[0])});function nr(t,e){const n={type:"object",shape:t??{},...Pe(e)};return new L$(n)}const z$=de("ZodUnion",(t,e)=>{S8.init(t,e),sn.init(t,e),t._zod.processJSONSchema=(n,r,s)=>zB(t,n,r,s),t.options=e.options});function P$(t,e){return new z$({type:"union",options:t,...Pe(e)})}const B$=de("ZodIntersection",(t,e)=>{k8.init(t,e),sn.init(t,e),t._zod.processJSONSchema=(n,r,s)=>PB(t,n,r,s)});function $$(t,e){return new B$({type:"intersection",left:t,right:e})}const Hg=de("ZodEnum",(t,e)=>{E8.init(t,e),sn.init(t,e),t._zod.processJSONSchema=(r,s,a)=>NB(t,r,s),t.enum=e.entries,t.options=Object.values(e.entries);const n=new Set(Object.keys(e.entries));t.extract=(r,s)=>{const a={};for(const l of r)if(n.has(l))a[l]=e.entries[l];else throw new Error(`Key ${l} not found in enum`);return new Hg({...e,checks:[],...Pe(s),entries:a})},t.exclude=(r,s)=>{const a={...e.entries};for(const l of r)if(n.has(l))delete a[l];else throw new Error(`Key ${l} not found in enum`);return new Hg({...e,checks:[],...Pe(s),entries:a})}});function Td(t,e){const n=Array.isArray(t)?Object.fromEntries(t.map(r=>[r,r])):t;return new Hg({type:"enum",entries:n,...Pe(e)})}const U$=de("ZodTransform",(t,e)=>{C8.init(t,e),sn.init(t,e),t._zod.processJSONSchema=(n,r,s)=>DB(t,n),t._zod.parse=(n,r)=>{if(r.direction==="backward")throw new GE(t.constructor.name);n.addIssue=a=>{if(typeof a=="string")n.issues.push(rc(a,n.value,e));else{const l=a;l.fatal&&(l.continue=!1),l.code??(l.code="custom"),l.input??(l.input=n.value),l.inst??(l.inst=t),n.issues.push(rc(l))}};const s=e.transform(n.value,n);return s instanceof Promise?s.then(a=>(n.value=a,n)):(n.value=s,n)}});function q$(t){return new U$({type:"transform",transform:t})}const mC=de("ZodOptional",(t,e)=>{oC.init(t,e),sn.init(t,e),t._zod.processJSONSchema=(n,r,s)=>hC(t,n,r,s),t.unwrap=()=>t._zod.def.innerType});function $w(t){return new mC({type:"optional",innerType:t})}const F$=de("ZodExactOptional",(t,e)=>{T8.init(t,e),sn.init(t,e),t._zod.processJSONSchema=(n,r,s)=>hC(t,n,r,s),t.unwrap=()=>t._zod.def.innerType});function V$(t){return new F$({type:"optional",innerType:t})}const H$=de("ZodNullable",(t,e)=>{A8.init(t,e),sn.init(t,e),t._zod.processJSONSchema=(n,r,s)=>BB(t,n,r,s),t.unwrap=()=>t._zod.def.innerType});function Uw(t){return new H$({type:"nullable",innerType:t})}const G$=de("ZodDefault",(t,e)=>{R8.init(t,e),sn.init(t,e),t._zod.processJSONSchema=(n,r,s)=>UB(t,n,r,s),t.unwrap=()=>t._zod.def.innerType,t.removeDefault=t.unwrap});function K$(t,e){return new G$({type:"default",innerType:t,get defaultValue(){return typeof e=="function"?e():QE(e)}})}const Z$=de("ZodPrefault",(t,e)=>{O8.init(t,e),sn.init(t,e),t._zod.processJSONSchema=(n,r,s)=>qB(t,n,r,s),t.unwrap=()=>t._zod.def.innerType});function J$(t,e){return new Z$({type:"prefault",innerType:t,get defaultValue(){return typeof e=="function"?e():QE(e)}})}const gC=de("ZodNonOptional",(t,e)=>{I8.init(t,e),sn.init(t,e),t._zod.processJSONSchema=(n,r,s)=>$B(t,n,r,s),t.unwrap=()=>t._zod.def.innerType});function Q$(t,e){return new gC({type:"nonoptional",innerType:t,...Pe(e)})}const Y$=de("ZodCatch",(t,e)=>{N8.init(t,e),sn.init(t,e),t._zod.processJSONSchema=(n,r,s)=>FB(t,n,r,s),t.unwrap=()=>t._zod.def.innerType,t.removeCatch=t.unwrap});function W$(t,e){return new Y$({type:"catch",innerType:t,catchValue:typeof e=="function"?e:()=>e})}const X$=de("ZodPipe",(t,e)=>{M8.init(t,e),sn.init(t,e),t._zod.processJSONSchema=(n,r,s)=>VB(t,n,r,s),t.in=e.in,t.out=e.out});function qw(t,e){return new X$({type:"pipe",in:t,out:e})}const eU=de("ZodReadonly",(t,e)=>{D8.init(t,e),sn.init(t,e),t._zod.processJSONSchema=(n,r,s)=>HB(t,n,r,s),t.unwrap=()=>t._zod.def.innerType});function tU(t){return new eU({type:"readonly",innerType:t})}const nU=de("ZodCustom",(t,e)=>{j8.init(t,e),sn.init(t,e),t._zod.processJSONSchema=(n,r,s)=>MB(t,n)});function rU(t,e={}){return kB(nU,t,e)}function sU(t){return EB(t)}const Fw=10*1024;function c0(t){try{const e=JSON.parse(t);return JSON.stringify(e,null,2)}catch{return t}}function sc(t){return t?t.length<=Fw?t:t.slice(0,Fw)+`
...[TRUNCATED]`:"(empty)"}const fi=nr({}),Ad=nr({url:gr().describe("The full URL for the request")}),Rd=nr({items:gr().describe('JSON array of objects with "key", "value", and optional "enabled" (default true) properties. Example: [{"key": "Content-Type", "value": "application/json"}]')});function iU(t){const e=t.http?.body??{type:"none"},n=e.type==="json"||e.type==="raw"||e.type==="xml"?e.content:e.type==="form-urlencoded"?e.data:e.type==="form-data"?e.data.map(r=>({key:r.key,type:r.type,value:r.type==="file"?r.file?.name:r.value})):null;return{method:t.http?.method??"GET",url:t.url,headers:(t.http?.headers??[]).filter(r=>r.enabled!==!1),queryParams:(t.http?.query??[]).filter(r=>r.enabled!==!1),body:{type:e.type,content:n}}}function aU(t,e){const n=t.http?.response;return n?{status:n.status,statusCode:n.statusCode,headers:n.headers,body:sc(e),duration:n.duration}:null}const oU=nr({method:Td(["GET","POST","PUT","PATCH","DELETE","OPTIONS","HEAD"]).describe("The HTTP method")}),lU=nr({type:Td(["none","json","xml","form-urlencoded","form-data","raw"]).describe("The body type"),content:gr().optional().describe("The body content. For JSON/XML/raw, provide the content string. For form-urlencoded/form-data, provide JSON array like headers/params. Note: form-data only supports text fields (not file uploads) via this tool.")}),cU=St({name:"get_request",description:"Get the current HTTP request configuration including method, URL, headers, query params, and body",inputSchema:fi}),uU=St({name:"get_response",description:"Get the response from the last executed request, including status, headers, and body",inputSchema:fi}),fU=St({name:"set_method",description:"Set the HTTP method for the request",inputSchema:oU}),dU=St({name:"set_url",description:"Set the URL for the request",inputSchema:Ad}),hU=St({name:"set_headers",description:"Set the headers for the request. This replaces all existing headers.",inputSchema:Rd}),pU=St({name:"set_query_params",description:"Set the query parameters for the request. This replaces all existing query params.",inputSchema:Rd}),mU=St({name:"set_body",description:"Set the request body",inputSchema:lU});function gU(t){const{request:e,setters:n,responseBodyText:r}=t,s=cU.client(async()=>iU(e)),a=uU.client(async()=>aU(e,r)||{error:"No response available. Execute the request first."}),l=fU.client(async p=>{const y=p;return n.setMethod(y.method),{success:!0,method:y.method}}),u=dU.client(async p=>{const y=p;return n.setUrl(y.url),{success:!0,url:y.url}}),f=hU.client(async p=>{const y=p;try{const g=JSON.parse(y.items).map(v=>({id:er(),key:v.key,value:v.value,enabled:v.enabled!==!1}));return n.setHeaders(g),{success:!0,headerCount:g.length}}catch(g){return{success:!1,error:`Invalid JSON for headers: ${g instanceof Error?g.message:"parse error"}`}}}),d=pU.client(async p=>{const y=p;try{const g=JSON.parse(y.items).map(v=>({id:er(),key:v.key,value:v.value,enabled:v.enabled!==!1}));return n.setQuery(g),{success:!0,paramCount:g.length}}catch(g){return{success:!1,error:`Invalid JSON for query params: ${g instanceof Error?g.message:"parse error"}`}}}),m=mU.client(async p=>{const y=p;try{let g;switch(y.type){case"none":g={type:"none"};break;case"json":g={type:"json",content:c0(y.content||"")};break;case"xml":g={type:"xml",content:y.content||""};break;case"raw":g={type:"raw",content:y.content||""};break;case"form-urlencoded":{g={type:"form-urlencoded",data:y.content?JSON.parse(y.content).map(w=>({id:er(),key:w.key,value:w.value,enabled:w.enabled!==!1})):[]};break}case"form-data":{g={type:"form-data",data:y.content?JSON.parse(y.content).map(w=>({id:er(),key:w.key,type:"text",value:w.value||"",enabled:w.enabled!==!1,file:null,fileName:""})):[]};break}default:g={type:"none"}}return n.setBody(g),{success:!0,bodyType:y.type}}catch(g){return{success:!1,error:`Invalid body content: ${g instanceof Error?g.message:"parse error"}`}}});return wd(s,a,l,u,f,d,m)}function yU(){return`You are an AI assistant embedded in an HTTP client (similar to Postman or Insomnia). You have tools that directly modify the request form visible to the user in real-time.

IMPORTANT: When you use tools like set_url, set_headers, set_body, etc., the changes appear immediately in the user's request panel. You are actively editing their requestnot just describing what to do. The user sees updates live as you make them.

Your capabilities:
- View the current request configuration (method, URL, headers, query params, body)
- Directly modify any part of the requestchanges are applied instantly to the UI
- View and analyze responses after the user executes the request

Guidelines:
- When the user asks to create or modify a request, use the appropriate tools to make the changes directly
- After making changes, briefly confirm what you did (e.g., "I've set the URL to ... and added the Authorization header")
- You cannot execute/send requeststhe user must click Send. After they do, you can analyze the response using get_response
- When analyzing responses, look for errors, unexpected data, or issues
- Be concise but helpful in your explanations
- If the user's request is ambiguous, ask for clarification
- Format your responses using Markdown: use **bold**, \`code\`, code blocks with language tags, lists, and headers when appropriate`}const bU={id:"http",name:"HTTP Assistant",placeholder:"Ask about your HTTP request..."};let Rm=null;async function Om(t){if(Rm?.host===t)return Rm.data;const e=await fetch(`/proxy/grpc/${t}`);if(!e.ok)throw new Error("Failed to fetch services");const n=await e.json();return Rm={host:t,data:n},n}function Vw({value:t,onChange:e,placeholder:n,label:r,fetchOptions:s,disabled:a,icon:l}){const[u,f]=Z.useState(!1),[d,m]=Z.useState([]),[p,y]=Z.useState(null),[g,v]=Z.useState(!1),w=Z.useRef(null);Z.useEffect(()=>{const k=C=>{w.current&&!w.current.contains(C.target)&&f(!1)};return document.addEventListener("mousedown",k),()=>document.removeEventListener("mousedown",k)},[]);const E=async()=>{if(!a){f(!0),v(!0),y(null);try{const k=await s();m(k)}catch(k){y(k instanceof Error?k.message:"Failed to fetch"),m([])}finally{v(!1)}}};return x.jsxs("div",{ref:w,className:"relative shrink-0",children:[x.jsxs("button",{type:"button",onClick:E,disabled:a,className:"h-8 px-2 flex items-center gap-2 text-sm transition hover:bg-neutral-50 dark:hover:bg-white/5 disabled:opacity-50 disabled:cursor-not-allowed rounded",children:[l,x.jsx("span",{className:`text-sm whitespace-nowrap ${t?"text-neutral-800 dark:text-neutral-100":"text-neutral-400 dark:text-neutral-500"}`,children:t||n}),g?x.jsx(If,{className:"w-3.5 h-3.5 animate-spin text-neutral-400 shrink-0"}):x.jsx(li,{className:`w-3.5 h-3.5 text-neutral-400 shrink-0 transition-transform ${u?"rotate-180":""}`})]}),u&&x.jsx("div",{className:"absolute top-full left-0 mt-1 w-full min-w-48 max-w-md bg-white dark:bg-[#0f0f0f] border border-neutral-200 dark:border-white/10 rounded-lg shadow-xl z-50 overflow-hidden",children:x.jsxs("div",{className:"max-h-64 overflow-y-auto p-1",children:[g&&x.jsxs("div",{className:"px-3 py-4 text-center text-sm text-neutral-500",children:[x.jsx(If,{className:"w-4 h-4 animate-spin mx-auto mb-1"}),"Loading..."]}),p&&x.jsx("div",{className:"px-3 py-3 text-sm text-red-500",children:p}),!g&&!p&&d.length===0&&x.jsxs("div",{className:"px-3 py-4 text-center text-sm text-neutral-500",children:["No ",r.toLowerCase()," available"]}),!g&&!p&&d.map(k=>x.jsx("button",{type:"button",onClick:()=>{e(k),f(!1)},className:`w-full px-3 py-2 text-left text-sm rounded-md transition-colors ${k===t?"bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-400":"text-neutral-700 dark:text-neutral-300 hover:bg-neutral-50 dark:hover:bg-white/5"}`,children:k},k))]})})]})}function _U(){const{request:t,setUrl:e,setGrpcMethodSchema:n}=tn(),r=t?.url??"",s=w=>{const E=w.match(/^grpc:\/\/([^/]*)(?:\/([^/]*)(?:\/([^/]*))?)?$/);return E?{host:E[1]||"",service:E[2]||"",method:E[3]||""}:{host:"",service:"",method:""}},a=(w,E,k)=>w?E?k?`grpc://${w}/${E}/${k}`:`grpc://${w}/${E}`:`grpc://${w}`:"grpc://",{host:l,service:u,method:f}=s(r),d=w=>{e(a(w,"","")),n(void 0)},m=w=>{e(a(l,w,"")),n(void 0)},p=async w=>{e(a(l,u,w));try{const C=(await Om(l)).services.find(T=>T.name===u)?.methods.find(T=>T.name===w);C?.schema?n(C.schema):n(void 0)}catch{n(void 0)}},y=async()=>l?(await Om(l)).services.map(E=>E.name):[],g=async()=>!l||!u?[]:(await Om(l)).services.find(k=>k.name===u)?.methods.map(k=>k.name)??[],v=Math.max(8,l.length||9);return x.jsxs("div",{className:"flex items-center flex-1 min-w-0",children:[x.jsx("input",{type:"text",value:l,onChange:w=>d(w.target.value),placeholder:"host:port",size:v,className:"min-w-20 max-w-full px-2 py-1.5 text-sm bg-transparent text-neutral-800 dark:text-neutral-100 placeholder-neutral-400 dark:placeholder-neutral-600 focus:outline-none"}),x.jsx("span",{className:"text-neutral-300 dark:text-neutral-600 shrink-0",children:"/"}),x.jsx(Vw,{value:u,onChange:m,placeholder:"Select service",label:"Service",fetchOptions:y,disabled:!l,icon:x.jsx(J3,{className:`w-4 h-4 shrink-0 ${u?"text-purple-500":"text-neutral-400"}`})}),x.jsx("span",{className:"text-neutral-300 dark:text-neutral-600",children:"/"}),x.jsx(Vw,{value:f,onChange:p,placeholder:"Select method",label:"Method",fetchOptions:g,disabled:!l||!u,icon:x.jsx(GD,{className:`w-4 h-4 shrink-0 ${f?"text-amber-500":"text-neutral-400"}`})})]})}const vU=["grpc-timeout","authorization","x-request-id","x-correlation-id"];function Gg(t){if(!t||typeof t!="object")return{};const e=t,r=(Array.isArray(e.type)?e.type[0]:e.type)||(e.properties?"object":e.items?"array":void 0);if(r==="object"){const a={},l=e.properties||{};return Object.keys(l).forEach(u=>{a[u]=Gg(l[u])}),a}if(r==="array"){const a=e.items||{type:"string"};return[Gg(a)]}const s=e.enum;if(s&&s.length>0)return s[0];switch(r){case"integer":case"number":return 0;case"boolean":return!0;case"string":return e.format==="byte"?"":"string";default:return{}}}function xU(){const[t,e]=Z.useState("body"),{request:n,setGrpcBody:r,setGrpcMetadata:s,setVariables:a}=tn(),l=n?.grpc?.metadata??[],u=n?.grpc?.body??"",f=n?.variables??[],d=n?.grpc?.schema,m=Z.useMemo(()=>{try{return d?Gg(d):void 0}catch{return}},[d]),p=[{id:"body",label:"Message"},{id:"headers",label:"Metadata",count:l.filter(y=>y.key).length}];return x.jsxs("div",{className:"space-y-3",children:[x.jsx("div",{className:"flex items-center gap-2",children:x.jsx("div",{role:"tablist",className:"inline-flex gap-1",children:p.map(y=>x.jsxs("button",{role:"tab",onClick:()=>e(y.id),className:`px-2 py-1 text-[11px] font-medium rounded-md transition-all ${t===y.id?"bg-white dark:bg-white/10 text-neutral-800 dark:text-neutral-100 shadow-sm":"text-neutral-500 dark:text-neutral-400 hover:text-neutral-700 dark:hover:text-neutral-200 hover:bg-neutral-100 dark:hover:bg-white/5"}`,children:[y.label,y.count!==void 0&&y.count>0&&x.jsx("span",{className:"ml-1.5 px-1.5 py-0.5 text-[9px] bg-neutral-200 dark:bg-white/10 text-neutral-600 dark:text-neutral-300 rounded-full",children:y.count})]},y.id))})}),x.jsxs("div",{children:[t==="body"&&x.jsx(Fy,{value:u,onChange:r,variables:f,onVariablesChange:a,placeholder:m?JSON.stringify(m,null,2):`{
  "field": "value"
}`,action:m!==void 0?{label:"Insert schema",onClick:()=>r(JSON.stringify(m,null,2))}:void 0}),t==="headers"&&x.jsxs("div",{className:"space-y-2",children:[x.jsx("p",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:"gRPC metadata (sent as headers)"}),x.jsx(zl,{items:l,onChange:s,keyPlaceholder:"Key",valuePlaceholder:"Value",keySuggestions:vU})]})]})]})}function wU(t){const e=$e.c(3),{response:n,viewMode:r}=t,s=r===void 0?"pretty":r;let a;return e[0]!==n.body||e[1]!==s?(a=x.jsx("div",{className:"h-full flex flex-col overflow-hidden",children:x.jsx("div",{className:"flex-1 min-h-0 overflow-auto",children:s==="pretty"?x.jsx(e0,{content:n.body}):x.jsx(Ug,{content:n.body})})}),e[0]=n.body,e[1]=s,e[2]=a):a=e[2],a}function SU(t){return{url:t.url,body:t.grpc?.body||"",metadata:(t.grpc?.metadata??[]).filter(e=>e.enabled!==!1&&e.key),schema:t.grpc?.schema}}function kU(t){const e=t.grpc?.response;return e?{body:sc(e.body),metadata:e.metadata,duration:e.duration,error:e.error}:null}const EU=nr({body:gr().describe("The JSON message body for the gRPC request")}),CU=St({name:"get_request",description:"Get the current gRPC request configuration including URL, message body, and metadata",inputSchema:fi}),TU=St({name:"get_response",description:"Get the response from the last executed gRPC request, including response body and metadata",inputSchema:fi}),AU=St({name:"set_url",description:"Set the gRPC URL (format: grpc://host:port/service/method or grpcs:// for TLS)",inputSchema:Ad}),RU=St({name:"set_body",description:"Set the JSON message body for the gRPC request",inputSchema:EU}),OU=St({name:"set_metadata",description:"Set the gRPC metadata (headers). This replaces all existing metadata.",inputSchema:Rd});function IU(t){const{request:e,setters:n}=t,r=CU.client(async()=>SU(e)),s=TU.client(async()=>kU(e)||{error:"No response available. Execute the request first."}),a=AU.client(async f=>{const d=f;return n.setUrl(d.url),{success:!0,url:d.url}}),l=RU.client(async f=>{const d=f;return n.setGrpcBody(c0(d.body)),{success:!0}}),u=OU.client(async f=>{const d=f;try{const m=JSON.parse(d.items).map(p=>({id:er(),key:p.key,value:p.value,enabled:p.enabled!==!1}));return n.setGrpcMetadata(m),{success:!0,metadataCount:m.length}}catch(m){return{success:!1,error:`Invalid JSON for metadata: ${m instanceof Error?m.message:"parse error"}`}}});return wd(r,s,a,l,u)}function NU(){return`You are an AI assistant embedded in a gRPC client. You have tools that directly modify the gRPC request form visible to the user in real-time.

IMPORTANT: When you use tools like set_url, set_body, set_metadata, the changes appear immediately in the user's request panel. You are actively editing their requestnot just describing what to do.

Your capabilities:
- View the current gRPC request configuration (URL, message body, metadata)
- Directly modify the requestchanges are applied instantly to the UI
- View and analyze responses after the user executes the request

Guidelines:
- gRPC URLs follow the format: grpc://host:port/service/method or grpcs:// for TLS
- The message body should be valid JSON matching the protobuf message schema
- Metadata is similar to HTTP headers and can include authentication tokens
- After making changes, briefly confirm what you did
- You cannot execute/send requeststhe user must click Send
- When analyzing responses, look for errors or unexpected data
- Format your responses using Markdown`}const MU={id:"grpc",name:"gRPC Assistant",placeholder:"Ask about your gRPC request..."};function Hw(t){const e=$e.c(27),{feature:n,type:r,isSelected:s,onSelect:a}=t,[l,u]=Z.useState(!1);let f;e[0]!==n.schema?(f=n.schema&&Object.keys(n.schema).length>0,e[0]=n.schema,e[1]=f):f=e[1];const d=f,m=`border rounded-md ${s?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-neutral-200 dark:border-white/10"}`;let p;e[2]!==r?(p=r==="tool"?x.jsx(Mf,{className:"w-4 h-4 text-amber-500 shrink-0"}):x.jsx(fo,{className:"w-4 h-4 text-blue-500 shrink-0"}),e[2]=r,e[3]=p):p=e[3];let y;e[4]!==n.name?(y=x.jsx("div",{className:"font-medium text-sm truncate",children:n.name}),e[4]=n.name,e[5]=y):y=e[5];let g;e[6]!==n.description?(g=n.description&&x.jsx("div",{className:"text-xs text-neutral-500 dark:text-neutral-400 truncate",children:n.description}),e[6]=n.description,e[7]=g):g=e[7];let v;e[8]!==y||e[9]!==g?(v=x.jsxs("div",{className:"flex-1 min-w-0",children:[y,g]}),e[8]=y,e[9]=g,e[10]=v):v=e[10];let w;e[11]!==l||e[12]!==d?(w=d&&x.jsx("button",{onClick:T=>{T.stopPropagation(),u(!l)},className:"p-1 hover:bg-neutral-200 dark:hover:bg-white/10 rounded",children:l?x.jsx(li,{className:"w-4 h-4"}):x.jsx(hd,{className:"w-4 h-4"})}),e[11]=l,e[12]=d,e[13]=w):w=e[13];let E;e[14]!==a||e[15]!==p||e[16]!==v||e[17]!==w?(E=x.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 cursor-pointer hover:bg-neutral-50 dark:hover:bg-white/5",onClick:a,children:[p,v,w]}),e[14]=a,e[15]=p,e[16]=v,e[17]=w,e[18]=E):E=e[18];let k;e[19]!==l||e[20]!==n.schema||e[21]!==d?(k=l&&d&&x.jsx("div",{className:"px-3 pb-2 border-t border-neutral-200 dark:border-white/10",children:x.jsx("pre",{className:"text-xs bg-neutral-100 dark:bg-black/20 p-2 rounded mt-2 overflow-auto max-h-48",children:JSON.stringify(n.schema,null,2)})}),e[19]=l,e[20]=n.schema,e[21]=d,e[22]=k):k=e[22];let C;return e[23]!==m||e[24]!==E||e[25]!==k?(C=x.jsxs("div",{className:m,children:[E,k]}),e[23]=m,e[24]=E,e[25]=k,e[26]=C):C=e[26],C}function DU({onSelected:t}){const{request:e,discoverMcpFeatures:n,setMcpTool:r,setMcpResource:s}=tn(),[a,l]=Z.useState("tools"),[u,f]=Z.useState(null),[d,m]=Z.useState(!1),p=u?.tools||[],y=u?.resources||[],g=u?.error,v=async()=>{m(!0);try{const w=await n();w&&f(w)}finally{m(!1)}};return u?g?x.jsxs("div",{className:"p-4 text-center",children:[x.jsx("p",{className:"text-sm text-red-500 dark:text-red-400 mb-4",children:g}),x.jsxs("button",{onClick:v,disabled:!e.url||d,className:"inline-flex items-center gap-2 px-3 py-1.5 text-sm rounded-md border border-neutral-200 dark:border-white/10 text-neutral-700 dark:text-neutral-100 hover:bg-neutral-50 dark:hover:bg-white/10 disabled:opacity-50 disabled:cursor-not-allowed",children:[x.jsx(Nf,{className:"w-4 h-4"}),"Retry"]})]}):x.jsxs("div",{className:"flex flex-col h-full",children:[x.jsxs("div",{className:"flex border-b border-neutral-200 dark:border-white/10 shrink-0",children:[x.jsxs("button",{onClick:()=>l("tools"),className:`flex items-center gap-1.5 px-4 py-2 text-sm font-medium border-b-2 transition-colors ${a==="tools"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-neutral-500 hover:text-neutral-700 dark:text-neutral-400 dark:hover:text-neutral-200"}`,children:[x.jsx(Mf,{className:"w-4 h-4"}),"Tools (",p.length,")"]}),x.jsxs("button",{onClick:()=>l("resources"),className:`flex items-center gap-1.5 px-4 py-2 text-sm font-medium border-b-2 transition-colors ${a==="resources"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-neutral-500 hover:text-neutral-700 dark:text-neutral-400 dark:hover:text-neutral-200"}`,children:[x.jsx(fo,{className:"w-4 h-4"}),"Resources (",y.length,")"]}),x.jsx("div",{className:"flex-1"}),x.jsx("button",{onClick:v,disabled:d,className:"p-2 text-neutral-500 hover:text-neutral-700 dark:text-neutral-400 dark:hover:text-neutral-200 disabled:opacity-40",title:"Refresh features",children:x.jsx(Nf,{className:"w-4 h-4"})})]}),x.jsxs("div",{className:"flex-1 overflow-auto p-2 space-y-2",children:[a==="tools"&&x.jsx(x.Fragment,{children:p.length===0?x.jsx("p",{className:"text-sm text-neutral-500 dark:text-neutral-400 text-center py-4",children:"No tools available"}):p.map(w=>x.jsx(Hw,{feature:w,type:"tool",isSelected:e.mcp?.tool?.name===w.name,onSelect:()=>{r({name:w.name,arguments:"{}",schema:w.schema}),t?.()}},w.name))}),a==="resources"&&x.jsx(x.Fragment,{children:y.length===0?x.jsx("p",{className:"text-sm text-neutral-500 dark:text-neutral-400 text-center py-4",children:"No resources available"}):y.map(w=>x.jsx(Hw,{feature:w,type:"resource",isSelected:e.mcp?.resource?.uri===(w.schema?.uri||w.name),onSelect:()=>{const E=w.schema?.uri||w.name;s({uri:E}),t?.()}},w.name))})]}),(e.mcp?.tool||e.mcp?.resource)&&x.jsx("div",{className:"border-t border-neutral-200 dark:border-white/10 p-2 shrink-0",children:x.jsxs("div",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:["Selected: ",e.mcp?.tool?`Tool: ${e.mcp.tool.name}`:`Resource: ${e.mcp?.resource?.uri}`]})})]}):x.jsxs("div",{className:"p-4 text-center",children:[x.jsx("p",{className:"text-sm text-neutral-500 dark:text-neutral-400 mb-4",children:"Enter an MCP server URL and discover its features"}),x.jsxs("button",{onClick:v,disabled:!e.url||d,className:"inline-flex items-center gap-2 px-3 py-1.5 text-sm rounded-md border border-neutral-200 dark:border-white/10 text-neutral-700 dark:text-neutral-100 hover:bg-neutral-50 dark:hover:bg-white/10 disabled:opacity-50 disabled:cursor-not-allowed",children:[x.jsx(AD,{className:"w-4 h-4"}),"Discover"]})]})}function jU(){const t=$e.c(32),{request:e,setUrl:n}=tn(),r=e?.url??"",s=e?.mcp?.tool?.name,a=e?.mcp?.resource?.uri,[l,u]=Z.useState(!1),f=Z.useRef(null);let d,m;t[0]!==l?(d=()=>{if(!l)return;const ne=ye=>{f.current&&!f.current.contains(ye.target)&&u(!1)};return document.addEventListener("mousedown",ne),()=>document.removeEventListener("mousedown",ne)},m=[l],t[0]=l,t[1]=d,t[2]=m):(d=t[1],m=t[2]),Z.useEffect(d,m);let p;t[3]===Symbol.for("react.memo_cache_sentinel")?(p=()=>{u(!0)},t[3]=p):p=t[3];const y=p,g=s||a||"Select feature",v=Math.max(12,r.length||14);let w;t[4]!==n?(w=ne=>n(ne.target.value),t[4]=n,t[5]=w):w=t[5];let E;t[6]!==w||t[7]!==r||t[8]!==v?(E=x.jsx("input",{type:"text",value:r,onChange:w,placeholder:"MCP server URL",size:v,className:"min-w-24 max-w-full px-2 py-1.5 bg-transparent text-neutral-800 dark:text-neutral-100 text-sm placeholder-neutral-400 dark:placeholder-neutral-600 focus:outline-none"}),t[6]=w,t[7]=r,t[8]=v,t[9]=E):E=t[9];let k;t[10]===Symbol.for("react.memo_cache_sentinel")?(k=x.jsx("span",{className:"text-neutral-300 dark:text-neutral-600 shrink-0",children:"/"}),t[10]=k):k=t[10];const C=!r;let T;t[11]!==a||t[12]!==s?(T=s?x.jsx(Mf,{className:"w-4 h-4 text-amber-500 shrink-0"}):a?x.jsx(fo,{className:"w-4 h-4 text-blue-500 shrink-0"}):x.jsx(Mf,{className:"w-4 h-4 text-neutral-400 shrink-0"}),t[11]=a,t[12]=s,t[13]=T):T=t[13];const D=`text-sm whitespace-nowrap ${s||a?"text-neutral-800 dark:text-neutral-100":"text-neutral-400 dark:text-neutral-500"}`;let N;t[14]!==g||t[15]!==D?(N=x.jsx("span",{className:D,children:g}),t[14]=g,t[15]=D,t[16]=N):N=t[16];const R=`w-3.5 h-3.5 text-neutral-400 shrink-0 transition-transform ${l?"rotate-180":""}`;let $;t[17]!==R?($=x.jsx(li,{className:R}),t[17]=R,t[18]=$):$=t[18];let q;t[19]!==$||t[20]!==C||t[21]!==T||t[22]!==N?(q=x.jsxs("button",{type:"button",onClick:y,disabled:C,className:"h-8 px-2 flex items-center gap-2 text-sm transition hover:bg-neutral-50 dark:hover:bg-white/5 disabled:opacity-50 disabled:cursor-not-allowed rounded",children:[T,N,$]}),t[19]=$,t[20]=C,t[21]=T,t[22]=N,t[23]=q):q=t[23];let H;t[24]!==l?(H=l&&x.jsx("div",{className:"absolute left-0 z-50 mt-2 w-[min(640px,calc(100vw-4rem))] max-h-[70vh] bg-white dark:bg-[#0f0f0f] border border-neutral-200 dark:border-white/10 rounded-lg shadow-xl overflow-hidden",children:x.jsx("div",{className:"h-105",children:x.jsx(DU,{onSelected:()=>u(!1)})})}),t[24]=l,t[25]=H):H=t[25];let M;t[26]!==q||t[27]!==H?(M=x.jsxs("div",{className:"relative shrink-0",ref:f,children:[q,H]}),t[26]=q,t[27]=H,t[28]=M):M=t[28];let Q;return t[29]!==M||t[30]!==E?(Q=x.jsxs("div",{className:"flex items-center flex-1 min-w-0",children:[E,k,M]}),t[29]=M,t[30]=E,t[31]=Q):Q=t[31],Q}const LU=["Authorization","X-API-Key","X-Request-ID"];function Kg(t){if(!t||typeof t!="object")return{};const e=t,r=(Array.isArray(e.type)?e.type[0]:e.type)||(e.properties?"object":e.items?"array":void 0);if(r==="object"){const a={},l=e.properties||{};return Object.keys(l).forEach(u=>{a[u]=Kg(l[u])}),a}if(r==="array"){const a=e.items||{type:"string"};return[Kg(a)]}const s=e.enum;if(s&&s.length>0)return s[0];switch(r){case"integer":case"number":return 0;case"boolean":return!0;case"string":return e.format==="byte"?"":"string";default:return{}}}function zU(){const[t,e]=Z.useState("body"),{request:n,setMcpTool:r,setMcpHeaders:s,setVariables:a}=tn(),l=n?.variables??[],u=n?.mcp?.headers??[],f=n?.mcp?.tool?.arguments??"{}",d=n?.mcp?.tool,m=n?.mcp?.resource,p=d?.schema,y=Z.useMemo(()=>{try{return p?Kg(p):void 0}catch{return}},[p]),g=[{id:"headers",label:"Headers",count:u.filter(v=>v.key).length},{id:"body",label:"Body"}];return x.jsxs("div",{className:"space-y-3",children:[x.jsx("div",{className:"flex items-center gap-2",children:x.jsx("div",{role:"tablist",className:"inline-flex gap-1",children:g.map(v=>x.jsxs("button",{role:"tab",onClick:()=>e(v.id),className:`px-2 py-1 text-[11px] font-medium rounded-md transition-all ${t===v.id?"bg-white dark:bg-white/10 text-neutral-800 dark:text-neutral-100 shadow-sm":"text-neutral-500 dark:text-neutral-400 hover:text-neutral-700 dark:hover:text-neutral-200 hover:bg-neutral-100 dark:hover:bg-white/5"}`,children:[v.label,v.count!==void 0&&v.count>0&&x.jsx("span",{className:"ml-1.5 px-1.5 py-0.5 text-[9px] bg-neutral-200 dark:bg-white/10 text-neutral-600 dark:text-neutral-300 rounded-full",children:v.count})]},v.id))})}),x.jsxs("div",{children:[t==="headers"&&x.jsx(zl,{items:u,onChange:s,keyPlaceholder:"Header",valuePlaceholder:"Value",keySuggestions:LU}),t==="body"&&(d?x.jsx(Fy,{value:f,onChange:v=>r({name:d.name,arguments:v,schema:d.schema}),variables:l,onVariablesChange:a,placeholder:y?JSON.stringify(y,null,2):`{
  "key": "value"
}`,action:y!==void 0?{label:"Fill with schema",onClick:()=>r({name:d.name,arguments:JSON.stringify(y,null,2),schema:d.schema})}:void 0}):m?x.jsx("div",{className:"py-8 text-center text-sm text-neutral-400 dark:text-neutral-500",children:"Resources are read-only; no arguments required."}):x.jsx("div",{className:"py-8 text-center text-sm text-neutral-400 dark:text-neutral-500",children:"Select a tool or resource from the URL bar."}))]})]})}function u0(t){const e=t.trim();if(e.startsWith("{")&&e.endsWith("}")||e.startsWith("[")&&e.endsWith("]"))try{return JSON.parse(e),"json"}catch{}return e.startsWith("<")&&e.endsWith(">")&&(/<\w+[^>]*>[\s\S]*<\/\w+>/.test(e)||/<\w+[^>]*\/>/.test(e))?"xml":"text"}function PU(t){try{const e=JSON.parse(t);return JSON.stringify(e,null,2)}catch{return t}}function BU(t){try{const n=/(>)(<)(\/*)/g,r=t.replace(n,`$1
$2$3`);let s=0;return r.split(`
`).map(a=>{let l=0;a.match(/.+<\/\w[^>]*>$/)?l=0:a.match(/^<\/\w/)&&s>0?s-=1:a.match(/^<\w[^>]*[^/]>.*$/)?l=1:l=0;const u="  ".repeat(s);return s+=l,u+a}).join(`
`)}catch{return t}}function yC(t){const e=$e.c(10),{type:n,language:r}=t;let s;e[0]!==n?(s=()=>{switch(n){case"text":return x.jsx(UD,{size:12});case"image":return x.jsx(pD,{size:12});case"audio":return x.jsx(bD,{size:12});case"resource":return x.jsx(Ag,{size:12});case"resource_link":return x.jsx(Ag,{size:12});default:return x.jsx(fo,{size:12})}},e[0]=n,e[1]=s):s=e[1];const a=s;let l;e[2]!==r||e[3]!==n?(l=r&&r!=="text"?r.toUpperCase():n.charAt(0).toUpperCase()+n.slice(1),e[2]=r,e[3]=n,e[4]=l):l=e[4];const u=l;let f;e[5]!==a?(f=a(),e[5]=a,e[6]=f):f=e[6];let d;return e[7]!==u||e[8]!==f?(d=x.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 text-xs font-medium rounded bg-blue-100 dark:bg-blue-500/20 text-blue-700 dark:text-blue-300",children:[f,u]}),e[7]=u,e[8]=f,e[9]=d):d=e[9],d}function Zg(t){const e=$e.c(10),{text:n,className:r}=t,s=r===void 0?"":r;let a;e[0]!==n?(a=u0(n),e[0]=n,e[1]=a):a=e[1];const l=a;let u;e[2]!==l||e[3]!==n?(u=l==="json"?PU(n):l==="xml"?BU(n):n,e[2]=l,e[3]=n,e[4]=u):u=e[4];const d=vd(u,l);let m;e[5]!==d?(m=x.jsx("div",{className:xd,dangerouslySetInnerHTML:{__html:d}}),e[5]=d,e[6]=m):m=e[6];let p;return e[7]!==s||e[8]!==m?(p=x.jsx("div",{className:s,children:m}),e[7]=s,e[8]=m,e[9]=p):p=e[9],p}function $U(t){const e=$e.c(38),{content:n,index:r,isError:s}=t,[a,l]=Z.useState(!0);let u;e[0]!==n.mimeType||e[1]!==n.resource?.uri||e[2]!==n.text||e[3]!==n.type||e[4]!==n.uri?(u=(()=>{if(n.type==="text"){const N=u0(n.text||"");return{type:"text",language:N,label:N!=="text"?N.toUpperCase():"Text"}}return n.type==="image"?{type:"image",label:"Image",detail:n.mimeType}:n.type==="audio"?{type:"audio",label:"Audio",detail:n.mimeType}:n.type==="resource"?{type:"resource",label:"Resource",detail:n.resource?.uri}:n.type==="resource_link"?{type:"resource_link",label:"Resource Link",detail:n.uri}:{type:"unknown",label:"Unknown"}})(),e[0]=n.mimeType,e[1]=n.resource?.uri,e[2]=n.text,e[3]=n.type,e[4]=n.uri,e[5]=u):u=e[5];const f=u,d=`border rounded-lg overflow-hidden ${s?"border-red-200 dark:border-red-800/50":"border-neutral-200 dark:border-white/10"}`;let m;e[6]!==a?(m=()=>l(!a),e[6]=a,e[7]=m):m=e[7];const p=`w-full flex items-center gap-2 px-3 py-2 transition-colors ${s?"bg-red-50/50 dark:bg-red-900/10 hover:bg-red-100/50 dark:hover:bg-red-900/20":"bg-neutral-50 dark:bg-white/5 hover:bg-neutral-100 dark:hover:bg-white/10"}`;let y;e[8]!==a?(y=a?x.jsx(li,{className:"w-4 h-4 text-neutral-400"}):x.jsx(hd,{className:"w-4 h-4 text-neutral-400"}),e[8]=a,e[9]=y):y=e[9];const g=r+1;let v;e[10]!==g?(v=x.jsxs("span",{className:"text-xs font-mono text-neutral-500 dark:text-neutral-400",children:["#",g]}),e[10]=g,e[11]=v):v=e[11];let w;e[12]!==f.language||e[13]!==f.type?(w=x.jsx(yC,{type:f.type,language:f.language}),e[12]=f.language,e[13]=f.type,e[14]=w):w=e[14];let E;e[15]!==f.detail?(E=f.detail&&x.jsx("span",{className:"text-xs text-neutral-500 dark:text-neutral-400 font-mono truncate",children:f.detail}),e[15]=f.detail,e[16]=E):E=e[16];let k;e[17]!==m||e[18]!==p||e[19]!==y||e[20]!==v||e[21]!==w||e[22]!==E?(k=x.jsxs("button",{onClick:m,className:p,children:[y,v,w,E]}),e[17]=m,e[18]=p,e[19]=y,e[20]=v,e[21]=w,e[22]=E,e[23]=k):k=e[23];let C;e[24]!==n.data||e[25]!==n.description||e[26]!==n.mimeType||e[27]!==n.name||e[28]!==n.resource||e[29]!==n.text||e[30]!==n.type||e[31]!==n.uri||e[32]!==a?(C=a&&x.jsxs("div",{className:"p-3 bg-white dark:bg-transparent",children:[n.type==="text"&&n.text&&x.jsx(Zg,{text:n.text}),n.type==="image"&&n.data&&x.jsx("img",{src:n.data.startsWith("data:")?n.data:`data:${n.mimeType||"image/png"};base64,${n.data}`,alt:"MCP Image Response",className:"max-w-full h-auto rounded"}),n.type==="audio"&&n.data&&x.jsx("audio",{controls:!0,className:"w-full",children:x.jsx("source",{src:n.data.startsWith("data:")?n.data:`data:${n.mimeType||"audio/wav"};base64,${n.data}`,type:n.mimeType||"audio/wav"})}),n.type==="resource"&&n.resource&&x.jsxs("div",{className:"space-y-2",children:[n.resource.text&&x.jsx(Zg,{text:n.resource.text}),n.resource.blob&&n.resource.mimeType?.startsWith("image/")&&x.jsx("img",{src:`data:${n.resource.mimeType};base64,${n.resource.blob}`,alt:n.resource.uri,className:"max-w-full h-auto rounded"}),n.resource.blob&&n.resource.mimeType?.startsWith("audio/")&&x.jsx("audio",{controls:!0,className:"w-full",children:x.jsx("source",{src:`data:${n.resource.mimeType};base64,${n.resource.blob}`,type:n.resource.mimeType})}),n.resource.blob&&!n.resource.mimeType?.startsWith("image/")&&!n.resource.mimeType?.startsWith("audio/")&&x.jsxs("div",{className:"text-sm text-neutral-600 dark:text-neutral-300",children:["Binary content (",Math.round(n.resource.blob.length*.75)," bytes)"]})]}),n.type==="resource_link"&&x.jsxs("div",{className:"space-y-2",children:[n.name&&x.jsx("div",{className:"font-medium text-neutral-900 dark:text-white",children:n.name}),n.description&&x.jsx("div",{className:"text-sm text-neutral-600 dark:text-neutral-300",children:n.description}),n.uri&&x.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[x.jsx(Ag,{size:14,className:"text-neutral-400 shrink-0"}),x.jsx("a",{href:n.uri,target:"_blank",rel:"noopener noreferrer",className:"font-mono text-blue-600 dark:text-blue-400 hover:underline break-all",children:n.uri})]}),n.mimeType&&x.jsx("div",{className:"text-xs text-neutral-500 dark:text-neutral-400 font-mono",children:n.mimeType})]})]}),e[24]=n.data,e[25]=n.description,e[26]=n.mimeType,e[27]=n.name,e[28]=n.resource,e[29]=n.text,e[30]=n.type,e[31]=n.uri,e[32]=a,e[33]=C):C=e[33];let T;return e[34]!==k||e[35]!==C||e[36]!==d?(T=x.jsxs("div",{className:d,children:[k,C]}),e[34]=k,e[35]=C,e[36]=d,e[37]=T):T=e[37],T}function UU(t){const e=$e.c(29),{content:n,index:r}=t,[s,a]=Z.useState(!0);let l;e[0]!==n.blob||e[1]!==n.mimeType||e[2]!==n.text?(l=(()=>{if(n.text){const C=u0(n.text);return{label:C!=="text"?C.toUpperCase():"Text",language:C}}return n.blob&&n.mimeType?.startsWith("image/")?{label:"Image",detail:n.mimeType}:n.blob&&n.mimeType?.startsWith("audio/")?{label:"Audio",detail:n.mimeType}:{label:"Binary",detail:n.mimeType}})(),e[0]=n.blob,e[1]=n.mimeType,e[2]=n.text,e[3]=l):l=e[3];const u=l;let f;e[4]!==s?(f=()=>a(!s),e[4]=s,e[5]=f):f=e[5];let d;e[6]!==s?(d=s?x.jsx(li,{className:"w-4 h-4 text-neutral-400"}):x.jsx(hd,{className:"w-4 h-4 text-neutral-400"}),e[6]=s,e[7]=d):d=e[7];const m=r+1;let p;e[8]!==m?(p=x.jsxs("span",{className:"text-xs font-mono text-neutral-500 dark:text-neutral-400",children:["#",m]}),e[8]=m,e[9]=p):p=e[9];let y;e[10]!==u.language?(y=x.jsx(yC,{type:"resource",language:u.language}),e[10]=u.language,e[11]=y):y=e[11];let g;e[12]!==n.uri?(g=x.jsx("span",{className:"text-xs text-neutral-500 dark:text-neutral-400 font-mono truncate",title:n.uri,children:n.uri}),e[12]=n.uri,e[13]=g):g=e[13];let v;e[14]!==f||e[15]!==d||e[16]!==p||e[17]!==y||e[18]!==g?(v=x.jsxs("button",{onClick:f,className:"w-full flex items-center gap-2 px-3 py-2 bg-neutral-50 dark:bg-white/5 hover:bg-neutral-100 dark:hover:bg-white/10 transition-colors",children:[d,p,y,g]}),e[14]=f,e[15]=d,e[16]=p,e[17]=y,e[18]=g,e[19]=v):v=e[19];let w;e[20]!==n.blob||e[21]!==n.mimeType||e[22]!==n.text||e[23]!==n.uri||e[24]!==s?(w=s&&x.jsxs("div",{className:"p-3 bg-white dark:bg-transparent",children:[n.text&&x.jsx(Zg,{text:n.text}),n.blob&&n.mimeType?.startsWith("image/")&&x.jsx("img",{src:`data:${n.mimeType};base64,${n.blob}`,alt:n.uri,className:"max-w-full h-auto rounded"}),n.blob&&n.mimeType?.startsWith("audio/")&&x.jsx("audio",{controls:!0,className:"w-full",children:x.jsx("source",{src:`data:${n.mimeType};base64,${n.blob}`,type:n.mimeType})}),n.blob&&!n.mimeType?.startsWith("image/")&&!n.mimeType?.startsWith("audio/")&&x.jsxs("div",{className:"text-sm text-neutral-600 dark:text-neutral-300",children:["Binary content (",Math.round(n.blob.length*.75)," bytes)"]}),!n.text&&!n.blob&&x.jsx("div",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:"Empty resource"})]}),e[20]=n.blob,e[21]=n.mimeType,e[22]=n.text,e[23]=n.uri,e[24]=s,e[25]=w):w=e[25];let E;return e[26]!==v||e[27]!==w?(E=x.jsxs("div",{className:"border border-neutral-200 dark:border-white/10 rounded-lg overflow-hidden",children:[v,w]}),e[26]=v,e[27]=w,e[28]=E):E=e[28],E}function qU(t){const e=$e.c(26),{toolResponse:n,resourceResponse:r}=t;if(n){const s=n.isError,a=n.content.length;let l;e[0]!==s?(l=s&&x.jsxs("div",{className:"flex items-center gap-2 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg px-4 py-3 mb-3",children:[x.jsx(Vk,{className:"text-red-500 dark:text-red-400 shrink-0",size:18}),x.jsx("span",{className:"text-red-700 dark:text-red-400 text-sm font-medium",children:"Tool returned an error"})]}),e[0]=s,e[1]=l):l=e[1];let u;e[2]!==a?(u=a>0&&x.jsx("div",{className:"flex items-center gap-2 mb-3",children:x.jsxs("span",{className:"text-xs font-medium text-neutral-500 dark:text-neutral-400",children:[a," item",a!==1?"s":""]})}),e[2]=a,e[3]=u):u=e[3];let f;if(e[4]!==s||e[5]!==n.content){let p;e[7]!==s?(p=(y,g)=>x.jsx($U,{content:y,index:g,isError:s},g),e[7]=s,e[8]=p):p=e[8],f=n.content.map(p),e[4]=s,e[5]=n.content,e[6]=f}else f=e[6];let d;e[9]!==a?(d=a===0&&x.jsx("div",{className:"text-sm text-neutral-500 dark:text-neutral-400 text-center py-4",children:"No content returned"}),e[9]=a,e[10]=d):d=e[10];let m;return e[11]!==l||e[12]!==u||e[13]!==f||e[14]!==d?(m=x.jsxs("div",{className:"space-y-2",children:[l,u,f,d]}),e[11]=l,e[12]=u,e[13]=f,e[14]=d,e[15]=m):m=e[15],m}if(r){const s=r.contents.length;let a;e[16]!==s?(a=s>0&&x.jsx("div",{className:"flex items-center gap-2 mb-3",children:x.jsxs("span",{className:"text-xs font-medium text-neutral-500 dark:text-neutral-400",children:[s," resource",s!==1?"s":""]})}),e[16]=s,e[17]=a):a=e[17];let l;e[18]!==r.contents?(l=r.contents.map(FU),e[18]=r.contents,e[19]=l):l=e[19];let u;e[20]!==s?(u=s===0&&x.jsx("div",{className:"text-sm text-neutral-500 dark:text-neutral-400 text-center py-4",children:"No content returned"}),e[20]=s,e[21]=u):u=e[21];let f;return e[22]!==a||e[23]!==l||e[24]!==u?(f=x.jsxs("div",{className:"space-y-2",children:[a,l,u]}),e[22]=a,e[23]=l,e[24]=u,e[25]=f):f=e[25],f}return null}function FU(t,e){return x.jsx(UU,{content:t,index:e},e)}function VU(t){const e=$e.c(9),{toolResponse:n,resourceResponse:r,viewMode:s}=t,a=s===void 0?"pretty":s,l=n||r;let u;e[0]!==l?(u=l?new Blob([JSON.stringify(l,null,2)],{type:"application/json"}):null,e[0]=l,e[1]=u):u=e[1];const f=u;let d;e[2]!==f||e[3]!==r||e[4]!==n||e[5]!==a?(d=a==="pretty"?x.jsx(qU,{toolResponse:n,resourceResponse:r}):f&&x.jsx(e0,{content:f}),e[2]=f,e[3]=r,e[4]=n,e[5]=a,e[6]=d):d=e[6];let m;return e[7]!==d?(m=x.jsx("div",{className:"h-full flex flex-col overflow-hidden",children:x.jsx("div",{className:"flex-1 min-h-0 overflow-auto",children:d})}),e[7]=d,e[8]=m):m=e[8],m}function HU(t){const e=t.mcp;return{url:t.url,headers:(e?.headers??[]).filter(n=>n.enabled!==!1&&n.key),tool:e?.tool?{name:e.tool.name,arguments:e.tool.arguments,schema:e.tool.schema}:null,resource:e?.resource?{uri:e.resource.uri}:null}}function GU(t){return"content"in t?t.content.map(e=>e.type==="text"?e.text||"":e.type==="image"?`[Image: ${e.mimeType}]`:e.type==="audio"?`[Audio: ${e.mimeType}]`:e.type==="resource"?`[Resource: ${e.resource?.uri}]`:e.type==="resource_link"?`[Resource Link: ${e.uri}]`:"[Unknown content]").join(`
`):"contents"in t?t.contents.map(e=>e.text?e.text:e.blob?`[Binary data: ${e.mimeType}]`:`[Resource: ${e.uri}]`).join(`
`):""}function KU(t){const e=t.mcp?.response;return e?{result:e.result?sc(GU(e.result)):null,duration:e.duration,error:e.error}:null}const ZU=nr({name:gr().describe("The name of the MCP tool to call"),arguments:gr().describe("JSON string of the tool arguments")}),JU=nr({uri:gr().describe("The URI of the MCP resource to read")}),QU=St({name:"get_request",description:"Get the current MCP request configuration including URL, headers, tool, or resource",inputSchema:fi}),YU=St({name:"get_response",description:"Get the response from the last executed MCP request",inputSchema:fi}),WU=St({name:"set_url",description:"Set the MCP server URL (e.g., http://localhost:3000/mcp or sse://localhost:3000/sse)",inputSchema:Ad}),XU=St({name:"set_headers",description:"Set the MCP request headers (for authentication, etc.). This replaces all existing headers.",inputSchema:Rd}),eq=St({name:"set_tool",description:"Set the MCP tool to call with its arguments. This clears any resource selection.",inputSchema:ZU}),tq=St({name:"set_resource",description:"Set the MCP resource to read by URI. This clears any tool selection.",inputSchema:JU});function nq(t){const{request:e,setters:n}=t,r=QU.client(async()=>HU(e)),s=YU.client(async()=>KU(e)||{error:"No response available. Execute the request first."}),a=WU.client(async d=>{const m=d;return n.setUrl(m.url),{success:!0,url:m.url}}),l=XU.client(async d=>{const m=d;try{const p=JSON.parse(m.items).map(y=>({id:er(),key:y.key,value:y.value,enabled:y.enabled!==!1}));return n.setMcpHeaders(p),{success:!0,headerCount:p.length}}catch(p){return{success:!1,error:`Invalid JSON for headers: ${p instanceof Error?p.message:"parse error"}`}}}),u=eq.client(async d=>{const m=d;return n.setMcpTool({name:m.name,arguments:c0(m.arguments)}),{success:!0,tool:m.name}}),f=tq.client(async d=>{const m=d;return n.setMcpResource({uri:m.uri}),{success:!0,resource:m.uri}});return wd(r,s,a,l,u,f)}function rq(){return`You are an AI assistant embedded in an MCP (Model Context Protocol) client. You have tools that directly modify the MCP request form visible to the user in real-time.

IMPORTANT: When you use tools like set_url, set_headers, set_tool, set_resource, the changes appear immediately in the user's request panel. You are actively editing their requestnot just describing what to do.

Your capabilities:
- View the current MCP request configuration (URL, headers, tool or resource)
- Directly modify the requestchanges are applied instantly to the UI
- View and analyze responses after the user executes the request

Guidelines:
- MCP servers expose tools and resources that can be called/read
- Use set_tool to configure a tool call with its name and JSON arguments
- Use set_resource to configure reading a resource by URI
- Tool and resource are mutually exclusivesetting one clears the other
- Headers can be used for authentication (e.g., Authorization header)
- After making changes, briefly confirm what you did
- You cannot execute/send requeststhe user must click Send
- Format your responses using Markdown`}const sq={id:"mcp",name:"MCP Assistant",placeholder:"Ask about your MCP request..."};function iq(){const{request:t,setUrl:e,setOpenAIModel:n}=tn(),r=t?.url??"",s=t?.openai?.model??"",[a,l]=Z.useState([]),[u,f]=Z.useState(!1),[d,m]=Z.useState(!1),[p,y]=Z.useState(null),g=Z.useRef(null);Z.useEffect(()=>{if(!u)return;const C=T=>{g.current&&!g.current.contains(T.target)&&f(!1)};return document.addEventListener("mousedown",C),()=>document.removeEventListener("mousedown",C)},[u]);const v=Z.useCallback(async()=>{if(r){m(!0),y(null);try{const C=r.replace(/\/$/,""),T=await fetch(`${C}/v1/models`);if(!T.ok)throw new Error(`HTTP ${T.status}`);const N=((await T.json()).data||[]).map(R=>R.id).sort();l(N),!s&&N.length>0&&n(N[0])}catch(C){const T=C instanceof Error?C.message:"Failed to fetch models";y(T),l([])}finally{m(!1)}}},[r,s,n]);Z.useEffect(()=>{if(!r)return;const C=setTimeout(()=>{v()},500);return()=>clearTimeout(C)},[r]);const w=()=>{f(!0)},E=C=>{n(C),f(!1)},k=Math.max(12,r.length||20);return x.jsxs("div",{className:"flex items-center flex-1 min-w-0",children:[x.jsx("input",{type:"text",value:r,onChange:C=>e(C.target.value),placeholder:"OpenAI API URL (e.g., https://api.openai.com)",size:k,className:"min-w-24 max-w-full px-2 py-1.5 bg-transparent text-neutral-800 dark:text-neutral-100 text-sm placeholder-neutral-400 dark:placeholder-neutral-600 focus:outline-none"}),x.jsx("span",{className:"text-neutral-300 dark:text-neutral-600 shrink-0",children:"/"}),x.jsxs("div",{className:"relative shrink-0",ref:g,children:[x.jsxs("button",{type:"button",onClick:w,disabled:!r,className:"h-8 px-2 flex items-center gap-2 text-sm transition hover:bg-neutral-50 dark:hover:bg-white/5 disabled:opacity-50 disabled:cursor-not-allowed rounded",children:[x.jsx(aD,{className:`w-4 h-4 shrink-0 ${s?"text-violet-500":"text-neutral-400"}`}),x.jsx("span",{className:`text-sm whitespace-nowrap ${s?"text-neutral-800 dark:text-neutral-100":"text-neutral-400 dark:text-neutral-500"}`,children:s||"Select model"}),d?x.jsx(Nf,{className:"w-3.5 h-3.5 text-neutral-400 shrink-0 animate-spin"}):x.jsx(li,{className:`w-3.5 h-3.5 text-neutral-400 shrink-0 transition-transform ${u?"rotate-180":""}`})]}),u&&x.jsxs("div",{className:"absolute left-0 z-50 mt-2 w-64 max-h-80 bg-white dark:bg-[#0f0f0f] border border-neutral-200 dark:border-white/10 rounded-lg shadow-xl overflow-hidden",children:[x.jsxs("div",{className:"p-2 border-b border-neutral-200 dark:border-white/10 flex items-center justify-between",children:[x.jsxs("span",{className:"text-xs font-medium text-neutral-500 dark:text-neutral-400",children:["Models (",a.length,")"]}),x.jsx("button",{type:"button",onClick:C=>{C.stopPropagation(),v()},disabled:d,className:"p-1 hover:bg-neutral-100 dark:hover:bg-white/10 rounded transition-colors disabled:opacity-50",title:"Refresh models",children:x.jsx(Nf,{className:`w-3.5 h-3.5 text-neutral-400 ${d?"animate-spin":""}`})})]}),x.jsx("div",{className:"overflow-y-auto max-h-64",children:p?x.jsx("div",{className:"p-3 text-sm text-red-500 dark:text-red-400",children:p}):a.length===0?x.jsx("div",{className:"p-3 text-sm text-neutral-400 dark:text-neutral-500",children:d?"Loading models...":"No models available"}):a.map(C=>x.jsx("button",{type:"button",onClick:()=>E(C),className:`w-full px-3 py-2 text-left text-sm transition-colors ${s===C?"bg-violet-50 dark:bg-violet-500/10 text-violet-700 dark:text-violet-300":"text-neutral-700 dark:text-neutral-300 hover:bg-neutral-50 dark:hover:bg-white/5"}`,children:C},C))})]})]})]})}function aq(){return Math.random().toString(36).substring(2,9)}function Gw(){return{id:aq(),role:"user",content:[{type:"text",text:""}]}}function oq(t){if(t.content.length===0)return!0;const e=t.content[0];switch(e.type){case"text":return!e.text;case"file":return!e.data}}function lq(){const t=$e.c(16),{request:e,setOpenAIChatInput:n}=tn();let r;t[0]===Symbol.for("react.memo_cache_sentinel")?(r={},t[0]=r):r=t[0];const s=Z.useRef(r);let a,l;if(t[1]!==e?.openai?.chat?.input||t[2]!==n){const d=e?.openai?.chat?.input??[],m=(D,N)=>{const R=d.map(q=>q.id===D?{...q,...N}:q),$=R[R.length-1];$&&!oq($)&&R.push(Gw()),n(R)};let p;t[5]!==m?(p=(D,N)=>{m(D,{content:[N]})},t[5]=m,t[6]=p):p=t[6];const y=p,g=D=>{if(d.length===1){n([Gw()]);return}n(d.filter(N=>N.id!==D))};let v;t[7]!==y?(v=(D,N)=>{const R=N.target.files?.[0];if(N.target.value="",!R)return;const $=new FileReader;$.onload=()=>{const q=$.result,H=q.split(",")[1];R.type.startsWith("image/")?y(D,{type:"file",data:q}):y(D,{type:"file",name:R.name,data:H})},$.readAsDataURL(R)},t[7]=y,t[8]=v):v=t[8];const w=v;let E;t[9]!==y?(E=(D,N)=>{e:switch(N){case"text":{y(D,{type:"text",text:""});break e}case"file":y(D,{type:"file",data:""})}},t[9]=y,t[10]=E):E=t[10];const k=E,C=D=>{const N=d.find($=>$.id===D);if(!N)return;N.content[0].type==="file"&&y(D,{type:"file",data:""})},T=D=>{const N=D.content[0];switch(N.type){case"text":return x.jsx("input",{type:"text",value:N.text,onChange:R=>y(D.id,{type:"text",text:R.target.value}),placeholder:"Message content...",className:"w-full px-2 py-1 bg-white dark:bg-white/5 border border-neutral-300 dark:border-white/10 rounded text-xs text-neutral-800 dark:text-neutral-100 placeholder-neutral-400 dark:placeholder-neutral-500 focus:outline-none focus:border-neutral-400 dark:focus:border-white/20 transition-colors"});case"file":return N.data?x.jsxs("div",{className:"flex items-center gap-2 px-2 py-1 bg-white dark:bg-white/5 border border-neutral-300 dark:border-white/10 rounded",children:[N.data.startsWith("data:image/")?x.jsx("img",{src:N.data,alt:"Uploaded",className:"w-5 h-5 object-cover rounded"}):x.jsx(fo,{className:"w-3.5 h-3.5 text-violet-500 shrink-0"}),x.jsx("span",{className:"text-xs text-neutral-600 dark:text-neutral-400 truncate flex-1",children:N.name||(N.data.startsWith("data:image/")?"Image":"File")}),!N.data.startsWith("data:image/")&&x.jsxs("span",{className:"text-[10px] text-neutral-400",children:["(",Math.round(N.data.length*.75/1024),"KB)"]}),x.jsx("button",{type:"button",onClick:()=>C(D.id),className:"p-0.5 hover:bg-neutral-100 dark:hover:bg-white/10 rounded transition-colors",children:x.jsx(pd,{className:"w-3 h-3 text-neutral-400"})})]}):x.jsxs("label",{className:"flex items-center gap-2 px-2 py-1 bg-white dark:bg-white/5 border border-dashed border-neutral-300 dark:border-white/20 rounded cursor-pointer hover:bg-neutral-50 dark:hover:bg-white/10 transition-colors",children:[x.jsx(Uy,{className:"w-3.5 h-3.5 text-neutral-400"}),x.jsx("span",{className:"text-xs text-neutral-400",children:"Upload file..."}),x.jsx("input",{ref:R=>{s.current[D.id]=R},type:"file",accept:"image/*,.pdf,.doc,.docx,.txt",onChange:R=>w(D.id,R),className:"hidden"})]})}};l="w-full",a=d.map(D=>x.jsxs("tr",{className:"border-b border-neutral-100 dark:border-white/5 last:border-0",children:[x.jsx("td",{className:"w-24 px-1.5 py-1.5",children:x.jsxs("select",{value:D.role,onChange:N=>m(D.id,{role:N.target.value}),className:"w-full px-2 py-1 bg-white dark:bg-white/5 border border-neutral-300 dark:border-white/10 rounded text-xs text-neutral-700 dark:text-neutral-300 focus:outline-none focus:border-neutral-400 dark:focus:border-white/20 transition-colors",children:[x.jsx("option",{value:"system",children:"System"}),x.jsx("option",{value:"user",children:"User"}),x.jsx("option",{value:"assistant",children:"Assistant"})]})}),x.jsx("td",{className:"w-20 px-1.5 py-1.5",children:x.jsxs("select",{value:D.content[0]?.type??"text",onChange:N=>k(D.id,N.target.value),className:"w-full px-2 py-1 bg-white dark:bg-white/5 border border-neutral-300 dark:border-white/10 rounded text-xs text-neutral-700 dark:text-neutral-300 focus:outline-none focus:border-neutral-400 dark:focus:border-white/20 transition-colors",children:[x.jsx("option",{value:"text",children:"Text"}),x.jsx("option",{value:"file",children:"File"})]})}),x.jsx("td",{className:"px-1.5 py-1.5",children:T(D)}),x.jsx("td",{className:"w-8 pr-1.5 py-1.5",children:x.jsx("button",{type:"button",onClick:()=>g(D.id),className:"p-1 rounded hover:bg-red-50 dark:hover:bg-red-500/10 transition-colors text-neutral-300 dark:text-neutral-600 hover:text-red-500",title:"Remove message",children:x.jsx(Zi,{className:"w-3.5 h-3.5"})})})]},D.id)),t[1]=e?.openai?.chat?.input,t[2]=n,t[3]=a,t[4]=l}else a=t[3],l=t[4];let u;t[11]!==a?(u=x.jsx("tbody",{children:a}),t[11]=a,t[12]=u):u=t[12];let f;return t[13]!==l||t[14]!==u?(f=x.jsx("div",{children:x.jsx("table",{className:l,children:u})}),t[13]=l,t[14]=u,t[15]=f):f=t[15],f}function cq(){return Math.random().toString(36).substring(2,9)}function Kw(){return{id:cq(),text:""}}function uq(t){return!t.text.trim()}function fq(){const t=$e.c(17),{request:e,setOpenAIEmbeddingsInput:n}=tn();let r;t[0]!==e?.openai?.embeddings?.input?(r=e?.openai?.embeddings?.input??[],t[0]=e?.openai?.embeddings?.input,t[1]=r):r=t[1];const s=r;let a;t[2]!==s||t[3]!==n?(a=(p,y)=>{const g=s.map(w=>w.id===p?{...w,text:y}:w),v=g[g.length-1];v&&!uq(v)&&g.push(Kw()),n(g)},t[2]=s,t[3]=n,t[4]=a):a=t[4];const l=a;let u;t[5]!==s||t[6]!==n?(u=p=>{if(s.length===1){n([Kw()]);return}n(s.filter(y=>y.id!==p))},t[5]=s,t[6]=n,t[7]=u):u=t[7];const f=u;let d;if(t[8]!==s||t[9]!==f||t[10]!==l){let p;t[12]!==f||t[13]!==l?(p=y=>x.jsxs("tr",{className:"border-b border-neutral-100 dark:border-white/5 last:border-0",children:[x.jsx("td",{className:"px-1.5 py-1.5",children:x.jsx("input",{type:"text",value:y.text,onChange:g=>l(y.id,g.target.value),placeholder:"Text to convert to embeddings...",className:"w-full px-2 py-1 bg-white dark:bg-white/5 border border-neutral-300 dark:border-white/10 rounded text-xs text-neutral-800 dark:text-neutral-100 placeholder-neutral-400 dark:placeholder-neutral-500 focus:outline-none focus:border-neutral-400 dark:focus:border-white/20 transition-colors"})}),x.jsx("td",{className:"w-8 pr-1.5 py-1.5",children:x.jsx("button",{type:"button",onClick:()=>f(y.id),className:"p-1 rounded hover:bg-red-50 dark:hover:bg-red-500/10 transition-colors text-neutral-300 dark:text-neutral-600 hover:text-red-500",title:"Remove input",children:x.jsx(Zi,{className:"w-3.5 h-3.5"})})})]},y.id),t[12]=f,t[13]=l,t[14]=p):p=t[14],d=s.map(p),t[8]=s,t[9]=f,t[10]=l,t[11]=d}else d=t[11];let m;return t[15]!==d?(m=x.jsx("div",{children:x.jsx("table",{className:"w-full",children:x.jsx("tbody",{children:d})})}),t[15]=d,t[16]=m):m=t[16],m}function dq(){return Math.random().toString(36).substring(2,9)}function Zw(){return{id:dq(),data:""}}function hq(t){return!t.data}function pq(){const t=$e.c(22),{request:e,setOpenAIImageFiles:n}=tn();let r;t[0]!==e?.openai?.image?.images?(r=e?.openai?.image?.images??[],t[0]=e?.openai?.image?.images,t[1]=r):r=t[1];const s=r;let a;t[2]!==s||t[3]!==n?(a=(g,v)=>{if(!v)return;const w=new FileReader;w.onloadend=()=>{const E=w.result,k=s.map(T=>T.id===g?{...T,data:E}:T),C=k[k.length-1];C&&!hq(C)&&k.push(Zw()),n(k)},w.readAsDataURL(v)},t[2]=s,t[3]=n,t[4]=a):a=t[4];const l=a;let u;t[5]!==s||t[6]!==n?(u=g=>{if(s.length===1){n([Zw()]);return}n(s.filter(v=>v.id!==g))},t[5]=s,t[6]=n,t[7]=u):u=t[7];const f=u;let d;t[8]!==s||t[9]!==n?(d=g=>{const v=s.map(w=>w.id===g?{...w,data:""}:w);n(v)},t[8]=s,t[9]=n,t[10]=d):d=t[10];const m=d;let p;if(t[11]!==m||t[12]!==l||t[13]!==s||t[14]!==f){let g;t[16]!==m||t[17]!==l||t[18]!==f?(g=v=>x.jsxs("tr",{className:"border-b border-neutral-100 dark:border-white/5 last:border-0",children:[x.jsx("td",{className:"px-1.5 py-1.5",children:v.data?x.jsxs("div",{className:"flex items-center gap-2 px-2 py-1 bg-white dark:bg-white/5 border border-neutral-300 dark:border-white/10 rounded text-xs",children:[x.jsx("img",{src:v.data,alt:"Preview",className:"w-8 h-8 object-cover rounded"}),x.jsx("span",{className:"flex-1 text-neutral-700 dark:text-neutral-300",children:"Image uploaded"}),x.jsx("button",{type:"button",onClick:()=>m(v.id),className:"px-2 py-0.5 text-xs text-neutral-500 dark:text-neutral-400 hover:text-neutral-700 dark:hover:text-neutral-200 hover:bg-neutral-100 dark:hover:bg-white/10 rounded transition-colors",children:"Clear"})]}):x.jsxs("label",{className:"flex items-center gap-2 px-2 py-1 bg-white dark:bg-white/5 border border-neutral-300 dark:border-white/10 rounded text-xs cursor-pointer hover:border-neutral-400 dark:hover:border-white/20 transition-colors",children:[x.jsx(Uy,{className:"w-3.5 h-3.5 text-neutral-400 dark:text-neutral-500"}),x.jsx("span",{className:"text-neutral-500 dark:text-neutral-400",children:"Select image file..."}),x.jsx("input",{type:"file",accept:"image/*",onChange:w=>l(v.id,w.target.files?.[0]||null),className:"hidden"})]})}),x.jsx("td",{className:"w-8 pr-1.5 py-1.5",children:x.jsx("button",{type:"button",onClick:()=>f(v.id),className:"p-1 rounded hover:bg-red-50 dark:hover:bg-red-500/10 transition-colors text-neutral-300 dark:text-neutral-600 hover:text-red-500",title:"Remove image",children:x.jsx(Zi,{className:"w-3.5 h-3.5"})})})]},v.id),t[16]=m,t[17]=l,t[18]=f,t[19]=g):g=t[19],p=s.map(g),t[11]=m,t[12]=l,t[13]=s,t[14]=f,t[15]=p}else p=t[15];let y;return t[20]!==p?(y=x.jsx("div",{children:x.jsx("table",{className:"w-full",children:x.jsx("tbody",{children:p})})}),t[20]=p,t[21]=y):y=t[21],y}function mq(){const t=$e.c(42),{request:e,setOpenAIBodyType:n,setOpenAIImagePrompt:r,setOpenAIAudioText:s,setOpenAIAudioVoice:a,setOpenAITranscriptionFile:l}=tn(),u=!!e?.openai?.chat,f=!!e?.openai?.image,d=!!e?.openai?.audio,m=!!e?.openai?.transcription,p=u?"chat":f?"image":d?"audio":m?"transcription":"embeddings",y=e?.openai?.image?.prompt??"",g=e?.openai?.audio?.text??"",v=e?.openai?.audio?.voice??"alloy",w=e?.openai?.transcription?.file??"";let E;t[0]===Symbol.for("react.memo_cache_sentinel")?(E={id:"chat",label:"Chat"},t[0]=E):E=t[0];let k;t[1]===Symbol.for("react.memo_cache_sentinel")?(k={id:"audio",label:"Audio"},t[1]=k):k=t[1];let C;t[2]===Symbol.for("react.memo_cache_sentinel")?(C={id:"image",label:"Image"},t[2]=C):C=t[2];let T;t[3]===Symbol.for("react.memo_cache_sentinel")?(T={id:"transcription",label:"Transcription"},t[3]=T):T=t[3];let D;t[4]===Symbol.for("react.memo_cache_sentinel")?(D=[E,k,C,T,{id:"embeddings",label:"Embeddings"}],t[4]=D):D=t[4];const N=D;let R;t[5]!==n?(R=ie=>{n(ie)},t[5]=n,t[6]=R):R=t[6];const $=R;let q;t[7]!==p||t[8]!==$?(q=x.jsx("div",{role:"tablist",className:"inline-flex gap-1",children:N.map(ie=>x.jsx("button",{role:"tab",onClick:()=>$(ie.id),className:`px-2 py-1 text-[11px] font-medium rounded-md transition-all ${p===ie.id?"bg-white dark:bg-white/10 text-neutral-800 dark:text-neutral-100 shadow-sm":"text-neutral-500 dark:text-neutral-400 hover:text-neutral-700 dark:hover:text-neutral-200 hover:bg-neutral-100 dark:hover:bg-white/5"}`,children:ie.label},ie.id))}),t[7]=p,t[8]=$,t[9]=q):q=t[9];let H;t[10]!==v||t[11]!==p||t[12]!==a?(H=p==="audio"&&x.jsxs("select",{value:v,onChange:ie=>a(ie.target.value),className:"h-6 px-2 text-[11px] font-medium bg-white dark:bg-white/10 text-neutral-800 dark:text-neutral-100 rounded-md shadow-sm border-0 focus:outline-none focus:ring-2 focus:ring-neutral-300 dark:focus:ring-white/20 cursor-pointer transition-all min-w-30",children:[x.jsx("option",{value:"alloy",children:"Alloy"}),x.jsx("option",{value:"ash",children:"Ash"}),x.jsx("option",{value:"ballad",children:"Ballad"}),x.jsx("option",{value:"coral",children:"Coral"}),x.jsx("option",{value:"echo",children:"Echo"}),x.jsx("option",{value:"fable",children:"Fable"}),x.jsx("option",{value:"onyx",children:"Onyx"}),x.jsx("option",{value:"nova",children:"Nova"}),x.jsx("option",{value:"sage",children:"Sage"}),x.jsx("option",{value:"shimmer",children:"Shimmer"}),x.jsx("option",{value:"verse",children:"Verse"}),x.jsx("option",{value:"marin",children:"Marin"}),x.jsx("option",{value:"cedar",children:"Cedar"})]}),t[10]=v,t[11]=p,t[12]=a,t[13]=H):H=t[13];let M;t[14]!==q||t[15]!==H?(M=x.jsxs("div",{className:"flex items-center gap-2",children:[q,H]}),t[14]=q,t[15]=H,t[16]=M):M=t[16];let Q;t[17]!==p?(Q=p==="chat"&&x.jsx(lq,{}),t[17]=p,t[18]=Q):Q=t[18];let ne;t[19]!==p||t[20]!==y||t[21]!==r?(ne=p==="image"&&x.jsxs("div",{className:"space-y-3",children:[x.jsx("textarea",{value:y,onChange:ie=>r(ie.target.value),placeholder:"Describe the image...",rows:4,className:"w-full px-3 py-2 text-sm bg-neutral-50 dark:bg-white/5 border border-neutral-200 dark:border-white/10 rounded-lg focus:outline-none focus:ring-2 focus:ring-violet-500/50 resize-none text-neutral-800 dark:text-neutral-100 placeholder-neutral-400 dark:placeholder-neutral-600"}),x.jsx(pq,{})]}),t[19]=p,t[20]=y,t[21]=r,t[22]=ne):ne=t[22];let ye;t[23]!==g||t[24]!==p||t[25]!==s?(ye=p==="audio"&&x.jsx("textarea",{value:g,onChange:ie=>s(ie.target.value),placeholder:"Enter text to convert to speech...",rows:4,className:"w-full px-3 py-2 text-sm bg-neutral-50 dark:bg-white/5 border border-neutral-200 dark:border-white/10 rounded-lg focus:outline-none focus:ring-2 focus:ring-violet-500/50 resize-none text-neutral-800 dark:text-neutral-100 placeholder-neutral-400 dark:placeholder-neutral-600"}),t[23]=g,t[24]=p,t[25]=s,t[26]=ye):ye=t[26];let X;t[27]!==p||t[28]!==l||t[29]!==w?(X=p==="transcription"&&x.jsx("div",{children:w?x.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 text-sm bg-neutral-50 dark:bg-white/5 border border-neutral-200 dark:border-white/10 rounded-lg",children:[x.jsxs("div",{className:"flex-1 text-neutral-700 dark:text-neutral-300",children:[x.jsx("svg",{className:"w-4 h-4 inline-block mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"})}),"Audio file uploaded"]}),x.jsx("button",{type:"button",onClick:()=>l(""),className:"px-2 py-1 text-xs text-neutral-500 dark:text-neutral-400 hover:text-neutral-700 dark:hover:text-neutral-200 hover:bg-neutral-100 dark:hover:bg-white/10 rounded transition-colors",children:"Clear"})]}):x.jsx("input",{type:"file",accept:"audio/*,.m4a,.mp3,.mp4,.mpeg,.mpga,.wav,.webm",onChange:ie=>{const re=ie.target.files?.[0];if(re){const I=new FileReader;I.onloadend=()=>{const j=I.result;l(j)},I.readAsDataURL(re)}},className:"w-full px-3 py-2 text-sm bg-neutral-50 dark:bg-white/5 border border-neutral-200 dark:border-white/10 rounded-lg focus:outline-none focus:ring-2 focus:ring-violet-500/50 text-neutral-800 dark:text-neutral-100 file:mr-4 file:py-1 file:px-2 file:rounded file:border-0 file:text-sm file:bg-violet-50 dark:file:bg-violet-500/10 file:text-violet-600 dark:file:text-violet-400 hover:file:bg-violet-100 dark:hover:file:bg-violet-500/20"})}),t[27]=p,t[28]=l,t[29]=w,t[30]=X):X=t[30];let F;t[31]!==p?(F=p==="embeddings"&&x.jsx(fq,{}),t[31]=p,t[32]=F):F=t[32];let B;t[33]!==ne||t[34]!==ye||t[35]!==X||t[36]!==F||t[37]!==Q?(B=x.jsxs("div",{children:[Q,ne,ye,X,F]}),t[33]=ne,t[34]=ye,t[35]=X,t[36]=F,t[37]=Q,t[38]=B):B=t[38];let K;return t[39]!==B||t[40]!==M?(K=x.jsxs("div",{className:"space-y-3",children:[M,B]}),t[39]=B,t[40]=M,t[41]=K):K=t[41],K}const gq=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,yq=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,bq={};function Jw(t,e){return(bq.jsx?yq:gq).test(t)}var za={},Im,Qw;function _q(){if(Qw)return Im;Qw=1;var t=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,e=/\n/g,n=/^\s*/,r=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,s=/^:\s*/,a=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,l=/^[;\s]*/,u=/^\s+|\s+$/g,f=`
`,d="/",m="*",p="",y="comment",g="declaration";function v(E,k){if(typeof E!="string")throw new TypeError("First argument must be a string");if(!E)return[];k=k||{};var C=1,T=1;function D(X){var F=X.match(e);F&&(C+=F.length);var B=X.lastIndexOf(f);T=~B?X.length-B:T+X.length}function N(){var X={line:C,column:T};return function(F){return F.position=new R(X),H(),F}}function R(X){this.start=X,this.end={line:C,column:T},this.source=k.source}R.prototype.content=E;function $(X){var F=new Error(k.source+":"+C+":"+T+": "+X);if(F.reason=X,F.filename=k.source,F.line=C,F.column=T,F.source=E,!k.silent)throw F}function q(X){var F=X.exec(E);if(F){var B=F[0];return D(B),E=E.slice(B.length),F}}function H(){q(n)}function M(X){var F;for(X=X||[];F=Q();)F!==!1&&X.push(F);return X}function Q(){var X=N();if(!(d!=E.charAt(0)||m!=E.charAt(1))){for(var F=2;p!=E.charAt(F)&&(m!=E.charAt(F)||d!=E.charAt(F+1));)++F;if(F+=2,p===E.charAt(F-1))return $("End of comment missing");var B=E.slice(2,F-2);return T+=2,D(B),E=E.slice(F),T+=2,X({type:y,comment:B})}}function ne(){var X=N(),F=q(r);if(F){if(Q(),!q(s))return $("property missing ':'");var B=q(a),K=X({type:g,property:w(F[0].replace(t,p)),value:B?w(B[0].replace(t,p)):p});return q(l),K}}function ye(){var X=[];M(X);for(var F;F=ne();)F!==!1&&(X.push(F),M(X));return X}return H(),ye()}function w(E){return E?E.replace(u,p):p}return Im=v,Im}var Yw;function vq(){if(Yw)return za;Yw=1;var t=za&&za.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(za,"__esModule",{value:!0}),za.default=n;const e=t(_q());function n(r,s){let a=null;if(!r||typeof r!="string")return a;const l=(0,e.default)(r),u=typeof s=="function";return l.forEach(f=>{if(f.type!=="declaration")return;const{property:d,value:m}=f;u?s(d,m,f):m&&(a=a||{},a[d]=m)}),a}return za}var pl={},Ww;function xq(){if(Ww)return pl;Ww=1,Object.defineProperty(pl,"__esModule",{value:!0}),pl.camelCase=void 0;var t=/^--[a-zA-Z0-9_-]+$/,e=/-([a-z])/g,n=/^[^-]+$/,r=/^-(webkit|moz|ms|o|khtml)-/,s=/^-(ms)-/,a=function(d){return!d||n.test(d)||t.test(d)},l=function(d,m){return m.toUpperCase()},u=function(d,m){return"".concat(m,"-")},f=function(d,m){return m===void 0&&(m={}),a(d)?d:(d=d.toLowerCase(),m.reactCompat?d=d.replace(s,u):d=d.replace(r,u),d.replace(e,l))};return pl.camelCase=f,pl}var ml,Xw;function wq(){if(Xw)return ml;Xw=1;var t=ml&&ml.__importDefault||function(s){return s&&s.__esModule?s:{default:s}},e=t(vq()),n=xq();function r(s,a){var l={};return!s||typeof s!="string"||(0,e.default)(s,function(u,f){u&&f&&(l[(0,n.camelCase)(u,a)]=f)}),l}return r.default=r,ml=r,ml}var Sq=wq();const kq=ck(Sq),bC=_C("end"),f0=_C("start");function _C(t){return e;function e(n){const r=n&&n.position&&n.position[t]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function Eq(t){const e=f0(t),n=bC(t);if(e&&n)return{start:e,end:n}}function $l(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?eS(t.position):"start"in t||"end"in t?eS(t):"line"in t||"column"in t?Jg(t):""}function Jg(t){return tS(t&&t.line)+":"+tS(t&&t.column)}function eS(t){return Jg(t&&t.start)+"-"+Jg(t&&t.end)}function tS(t){return t&&typeof t=="number"?t:1}class On extends Error{constructor(e,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let s="",a={},l=!1;if(n&&("line"in n&&"column"in n?a={place:n}:"start"in n&&"end"in n?a={place:n}:"type"in n?a={ancestors:[n],place:n.position}:a={...n}),typeof e=="string"?s=e:!a.cause&&e&&(l=!0,s=e.message,a.cause=e),!a.ruleId&&!a.source&&typeof r=="string"){const f=r.indexOf(":");f===-1?a.ruleId=r:(a.source=r.slice(0,f),a.ruleId=r.slice(f+1))}if(!a.place&&a.ancestors&&a.ancestors){const f=a.ancestors[a.ancestors.length-1];f&&(a.place=f.position)}const u=a.place&&"start"in a.place?a.place.start:a.place;this.ancestors=a.ancestors||void 0,this.cause=a.cause||void 0,this.column=u?u.column:void 0,this.fatal=void 0,this.file="",this.message=s,this.line=u?u.line:void 0,this.name=$l(a.place)||"1:1",this.place=a.place||void 0,this.reason=this.message,this.ruleId=a.ruleId||void 0,this.source=a.source||void 0,this.stack=l&&a.cause&&typeof a.cause.stack=="string"?a.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}On.prototype.file="";On.prototype.name="";On.prototype.reason="";On.prototype.message="";On.prototype.stack="";On.prototype.column=void 0;On.prototype.line=void 0;On.prototype.ancestors=void 0;On.prototype.cause=void 0;On.prototype.fatal=void 0;On.prototype.place=void 0;On.prototype.ruleId=void 0;On.prototype.source=void 0;const d0={}.hasOwnProperty,Cq=new Map,Tq=/[A-Z]/g,Aq=new Set(["table","tbody","thead","tfoot","tr"]),Rq=new Set(["td","th"]),vC="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function Oq(t,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=e.filePath||void 0;let r;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=Pq(n,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=zq(n,e.jsx,e.jsxs)}const s={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:r,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?pc:xE,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},a=xC(s,t,void 0);return a&&typeof a!="string"?a:s.create(t,s.Fragment,{children:a||void 0},void 0)}function xC(t,e,n){if(e.type==="element")return Iq(t,e,n);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return Nq(t,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return Dq(t,e,n);if(e.type==="mdxjsEsm")return Mq(t,e);if(e.type==="root")return jq(t,e,n);if(e.type==="text")return Lq(t,e)}function Iq(t,e,n){const r=t.schema;let s=r;e.tagName.toLowerCase()==="svg"&&r.space==="html"&&(s=pc,t.schema=s),t.ancestors.push(e);const a=SC(t,e.tagName,!1),l=Bq(t,e);let u=p0(t,e);return Aq.has(e.tagName)&&(u=u.filter(function(f){return typeof f=="string"?!md(f):!0})),wC(t,l,a,e),h0(l,u),t.ancestors.pop(),t.schema=r,t.create(e,a,l,n)}function Nq(t,e){if(e.data&&e.data.estree&&t.evaluater){const r=e.data.estree.body[0];return r.type,t.evaluater.evaluateExpression(r.expression)}ic(t,e.position)}function Mq(t,e){if(e.data&&e.data.estree&&t.evaluater)return t.evaluater.evaluateProgram(e.data.estree);ic(t,e.position)}function Dq(t,e,n){const r=t.schema;let s=r;e.name==="svg"&&r.space==="html"&&(s=pc,t.schema=s),t.ancestors.push(e);const a=e.name===null?t.Fragment:SC(t,e.name,!0),l=$q(t,e),u=p0(t,e);return wC(t,l,a,e),h0(l,u),t.ancestors.pop(),t.schema=r,t.create(e,a,l,n)}function jq(t,e,n){const r={};return h0(r,p0(t,e)),t.create(e,t.Fragment,r,n)}function Lq(t,e){return e.value}function wC(t,e,n,r){typeof n!="string"&&n!==t.Fragment&&t.passNode&&(e.node=r)}function h0(t,e){if(e.length>0){const n=e.length>1?e:e[0];n&&(t.children=n)}}function zq(t,e,n){return r;function r(s,a,l,u){const d=Array.isArray(l.children)?n:e;return u?d(a,l,u):d(a,l)}}function Pq(t,e){return n;function n(r,s,a,l){const u=Array.isArray(a.children),f=f0(r);return e(s,a,l,u,{columnNumber:f?f.column-1:void 0,fileName:t,lineNumber:f?f.line:void 0},void 0)}}function Bq(t,e){const n={};let r,s;for(s in e.properties)if(s!=="children"&&d0.call(e.properties,s)){const a=Uq(t,s,e.properties[s]);if(a){const[l,u]=a;t.tableCellAlignToStyle&&l==="align"&&typeof u=="string"&&Rq.has(e.tagName)?r=u:n[l]=u}}if(r){const a=n.style||(n.style={});a[t.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function $q(t,e){const n={};for(const r of e.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&t.evaluater){const a=r.data.estree.body[0];a.type;const l=a.expression;l.type;const u=l.properties[0];u.type,Object.assign(n,t.evaluater.evaluateExpression(u.argument))}else ic(t,e.position);else{const s=r.name;let a;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&t.evaluater){const u=r.value.data.estree.body[0];u.type,a=t.evaluater.evaluateExpression(u.expression)}else ic(t,e.position);else a=r.value===null?!0:r.value;n[s]=a}return n}function p0(t,e){const n=[];let r=-1;const s=t.passKeys?new Map:Cq;for(;++r<e.children.length;){const a=e.children[r];let l;if(t.passKeys){const f=a.type==="element"?a.tagName:a.type==="mdxJsxFlowElement"||a.type==="mdxJsxTextElement"?a.name:void 0;if(f){const d=s.get(f)||0;l=f+"-"+d,s.set(f,d+1)}}const u=xC(t,a,l);u!==void 0&&n.push(u)}return n}function Uq(t,e,n){const r=vE(t.schema,e);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?SE(n):kE(n)),r.property==="style"){let s=typeof n=="object"?n:qq(t,String(n));return t.stylePropertyNameCase==="css"&&(s=Fq(s)),["style",s]}return[t.elementAttributeNameCase==="react"&&r.space?RL[r.property]||r.property:r.attribute,n]}}function qq(t,e){try{return kq(e,{reactCompat:!0})}catch(n){if(t.ignoreInvalidStyle)return{};const r=n,s=new On("Cannot parse `style` attribute",{ancestors:t.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw s.file=t.filePath||void 0,s.url=vC+"#cannot-parse-style-attribute",s}}function SC(t,e,n){let r;if(!n)r={type:"Literal",value:e};else if(e.includes(".")){const s=e.split(".");let a=-1,l;for(;++a<s.length;){const u=Jw(s[a])?{type:"Identifier",name:s[a]}:{type:"Literal",value:s[a]};l=l?{type:"MemberExpression",object:l,property:u,computed:!!(a&&u.type==="Literal"),optional:!1}:u}r=l}else r=Jw(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(r.type==="Literal"){const s=r.value;return d0.call(t.components,s)?t.components[s]:s}if(t.evaluater)return t.evaluater.evaluateExpression(r);ic(t)}function ic(t,e){const n=new On("Cannot handle MDX estrees without `createEvaluater`",{ancestors:t.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=t.filePath||void 0,n.url=vC+"#cannot-handle-mdx-estrees-without-createevaluater",n}function Fq(t){const e={};let n;for(n in t)d0.call(t,n)&&(e[Vq(n)]=t[n]);return e}function Vq(t){let e=t.replace(Tq,Hq);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function Hq(t){return"-"+t.toLowerCase()}const Nm={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},Gq={};function m0(t,e){const n=Gq,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,s=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return kC(t,r,s)}function kC(t,e,n){if(Kq(t)){if("value"in t)return t.type==="html"&&!n?"":t.value;if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return nS(t.children,e,n)}return Array.isArray(t)?nS(t,e,n):""}function nS(t,e,n){const r=[];let s=-1;for(;++s<t.length;)r[s]=kC(t[s],e,n);return r.join("")}function Kq(t){return!!(t&&typeof t=="object")}const rS=document.createElement("i");function g0(t){const e="&"+t+";";rS.innerHTML=e;const n=rS.textContent;return n.charCodeAt(n.length-1)===59&&t!=="semi"||n===e?!1:n}function mr(t,e,n,r){const s=t.length;let a=0,l;if(e<0?e=-e>s?0:s+e:e=e>s?s:e,n=n>0?n:0,r.length<1e4)l=Array.from(r),l.unshift(e,n),t.splice(...l);else for(n&&t.splice(e,n);a<r.length;)l=r.slice(a,a+1e4),l.unshift(e,0),t.splice(...l),a+=1e4,e+=1e4}function Nr(t,e){return t.length>0?(mr(t,t.length,0,e),t):e}const sS={}.hasOwnProperty;function EC(t){const e={};let n=-1;for(;++n<t.length;)Zq(e,t[n]);return e}function Zq(t,e){let n;for(n in e){const s=(sS.call(t,n)?t[n]:void 0)||(t[n]={}),a=e[n];let l;if(a)for(l in a){sS.call(s,l)||(s[l]=[]);const u=a[l];Jq(s[l],Array.isArray(u)?u:u?[u]:[])}}}function Jq(t,e){let n=-1;const r=[];for(;++n<e.length;)(e[n].add==="after"?t:r).push(e[n]);mr(t,0,0,r)}function CC(t,e){const n=Number.parseInt(t,e);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function qr(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Pn=di(/[A-Za-z]/),Rn=di(/[\dA-Za-z]/),Qq=di(/[#-'*+\--9=?A-Z^-~]/);function Qf(t){return t!==null&&(t<32||t===127)}const Qg=di(/\d/),Yq=di(/[\dA-Fa-f]/),Wq=di(/[!-/:-@[-`{-~]/);function De(t){return t!==null&&t<-2}function wt(t){return t!==null&&(t<0||t===32)}function Ze(t){return t===-2||t===-1||t===32}const Od=di(new RegExp("\\p{P}|\\p{S}","u")),Hi=di(/\s/);function di(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function go(t){const e=[];let n=-1,r=0,s=0;for(;++n<t.length;){const a=t.charCodeAt(n);let l="";if(a===37&&Rn(t.charCodeAt(n+1))&&Rn(t.charCodeAt(n+2)))s=2;else if(a<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(a))||(l=String.fromCharCode(a));else if(a>55295&&a<57344){const u=t.charCodeAt(n+1);a<56320&&u>56319&&u<57344?(l=String.fromCharCode(a,u),s=1):l=""}else l=String.fromCharCode(a);l&&(e.push(t.slice(r,n),encodeURIComponent(l)),r=n+s+1,l=""),s&&(n+=s,s=0)}return e.join("")+t.slice(r)}function rt(t,e,n,r){const s=r?r-1:Number.POSITIVE_INFINITY;let a=0;return l;function l(f){return Ze(f)?(t.enter(n),u(f)):e(f)}function u(f){return Ze(f)&&a++<s?(t.consume(f),u):(t.exit(n),e(f))}}const Xq={tokenize:e9};function e9(t){const e=t.attempt(this.parser.constructs.contentInitial,r,s);let n;return e;function r(u){if(u===null){t.consume(u);return}return t.enter("lineEnding"),t.consume(u),t.exit("lineEnding"),rt(t,e,"linePrefix")}function s(u){return t.enter("paragraph"),a(u)}function a(u){const f=t.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=f),n=f,l(u)}function l(u){if(u===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(u);return}return De(u)?(t.consume(u),t.exit("chunkText"),a):(t.consume(u),l)}}const t9={tokenize:n9},iS={tokenize:r9};function n9(t){const e=this,n=[];let r=0,s,a,l;return u;function u(T){if(r<n.length){const D=n[r];return e.containerState=D[1],t.attempt(D[0].continuation,f,d)(T)}return d(T)}function f(T){if(r++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,s&&C();const D=e.events.length;let N=D,R;for(;N--;)if(e.events[N][0]==="exit"&&e.events[N][1].type==="chunkFlow"){R=e.events[N][1].end;break}k(r);let $=D;for(;$<e.events.length;)e.events[$][1].end={...R},$++;return mr(e.events,N+1,0,e.events.slice(D)),e.events.length=$,d(T)}return u(T)}function d(T){if(r===n.length){if(!s)return y(T);if(s.currentConstruct&&s.currentConstruct.concrete)return v(T);e.interrupt=!!(s.currentConstruct&&!s._gfmTableDynamicInterruptHack)}return e.containerState={},t.check(iS,m,p)(T)}function m(T){return s&&C(),k(r),y(T)}function p(T){return e.parser.lazy[e.now().line]=r!==n.length,l=e.now().offset,v(T)}function y(T){return e.containerState={},t.attempt(iS,g,v)(T)}function g(T){return r++,n.push([e.currentConstruct,e.containerState]),y(T)}function v(T){if(T===null){s&&C(),k(0),t.consume(T);return}return s=s||e.parser.flow(e.now()),t.enter("chunkFlow",{_tokenizer:s,contentType:"flow",previous:a}),w(T)}function w(T){if(T===null){E(t.exit("chunkFlow"),!0),k(0),t.consume(T);return}return De(T)?(t.consume(T),E(t.exit("chunkFlow")),r=0,e.interrupt=void 0,u):(t.consume(T),w)}function E(T,D){const N=e.sliceStream(T);if(D&&N.push(null),T.previous=a,a&&(a.next=T),a=T,s.defineSkip(T.start),s.write(N),e.parser.lazy[T.start.line]){let R=s.events.length;for(;R--;)if(s.events[R][1].start.offset<l&&(!s.events[R][1].end||s.events[R][1].end.offset>l))return;const $=e.events.length;let q=$,H,M;for(;q--;)if(e.events[q][0]==="exit"&&e.events[q][1].type==="chunkFlow"){if(H){M=e.events[q][1].end;break}H=!0}for(k(r),R=$;R<e.events.length;)e.events[R][1].end={...M},R++;mr(e.events,q+1,0,e.events.slice($)),e.events.length=R}}function k(T){let D=n.length;for(;D-- >T;){const N=n[D];e.containerState=N[1],N[0].exit.call(e,t)}n.length=T}function C(){s.write([null]),a=void 0,s=void 0,e.containerState._closeFlow=void 0}}function r9(t,e,n){return rt(t,t.attempt(this.parser.constructs.document,e,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function oo(t){if(t===null||wt(t)||Hi(t))return 1;if(Od(t))return 2}function Id(t,e,n){const r=[];let s=-1;for(;++s<t.length;){const a=t[s].resolveAll;a&&!r.includes(a)&&(e=a(e,n),r.push(a))}return e}const Yg={name:"attention",resolveAll:s9,tokenize:i9};function s9(t,e){let n=-1,r,s,a,l,u,f,d,m;for(;++n<t.length;)if(t[n][0]==="enter"&&t[n][1].type==="attentionSequence"&&t[n][1]._close){for(r=n;r--;)if(t[r][0]==="exit"&&t[r][1].type==="attentionSequence"&&t[r][1]._open&&e.sliceSerialize(t[r][1]).charCodeAt(0)===e.sliceSerialize(t[n][1]).charCodeAt(0)){if((t[r][1]._close||t[n][1]._open)&&(t[n][1].end.offset-t[n][1].start.offset)%3&&!((t[r][1].end.offset-t[r][1].start.offset+t[n][1].end.offset-t[n][1].start.offset)%3))continue;f=t[r][1].end.offset-t[r][1].start.offset>1&&t[n][1].end.offset-t[n][1].start.offset>1?2:1;const p={...t[r][1].end},y={...t[n][1].start};aS(p,-f),aS(y,f),l={type:f>1?"strongSequence":"emphasisSequence",start:p,end:{...t[r][1].end}},u={type:f>1?"strongSequence":"emphasisSequence",start:{...t[n][1].start},end:y},a={type:f>1?"strongText":"emphasisText",start:{...t[r][1].end},end:{...t[n][1].start}},s={type:f>1?"strong":"emphasis",start:{...l.start},end:{...u.end}},t[r][1].end={...l.start},t[n][1].start={...u.end},d=[],t[r][1].end.offset-t[r][1].start.offset&&(d=Nr(d,[["enter",t[r][1],e],["exit",t[r][1],e]])),d=Nr(d,[["enter",s,e],["enter",l,e],["exit",l,e],["enter",a,e]]),d=Nr(d,Id(e.parser.constructs.insideSpan.null,t.slice(r+1,n),e)),d=Nr(d,[["exit",a,e],["enter",u,e],["exit",u,e],["exit",s,e]]),t[n][1].end.offset-t[n][1].start.offset?(m=2,d=Nr(d,[["enter",t[n][1],e],["exit",t[n][1],e]])):m=0,mr(t,r-1,n-r+3,d),n=r+d.length-m-2;break}}for(n=-1;++n<t.length;)t[n][1].type==="attentionSequence"&&(t[n][1].type="data");return t}function i9(t,e){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,s=oo(r);let a;return l;function l(f){return a=f,t.enter("attentionSequence"),u(f)}function u(f){if(f===a)return t.consume(f),u;const d=t.exit("attentionSequence"),m=oo(f),p=!m||m===2&&s||n.includes(f),y=!s||s===2&&m||n.includes(r);return d._open=!!(a===42?p:p&&(s||!y)),d._close=!!(a===42?y:y&&(m||!p)),e(f)}}function aS(t,e){t.column+=e,t.offset+=e,t._bufferIndex+=e}const a9={name:"autolink",tokenize:o9};function o9(t,e,n){let r=0;return s;function s(g){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(g),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),a}function a(g){return Pn(g)?(t.consume(g),l):g===64?n(g):d(g)}function l(g){return g===43||g===45||g===46||Rn(g)?(r=1,u(g)):d(g)}function u(g){return g===58?(t.consume(g),r=0,f):(g===43||g===45||g===46||Rn(g))&&r++<32?(t.consume(g),u):(r=0,d(g))}function f(g){return g===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(g),t.exit("autolinkMarker"),t.exit("autolink"),e):g===null||g===32||g===60||Qf(g)?n(g):(t.consume(g),f)}function d(g){return g===64?(t.consume(g),m):Qq(g)?(t.consume(g),d):n(g)}function m(g){return Rn(g)?p(g):n(g)}function p(g){return g===46?(t.consume(g),r=0,m):g===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(g),t.exit("autolinkMarker"),t.exit("autolink"),e):y(g)}function y(g){if((g===45||Rn(g))&&r++<63){const v=g===45?y:p;return t.consume(g),v}return n(g)}}const mc={partial:!0,tokenize:l9};function l9(t,e,n){return r;function r(a){return Ze(a)?rt(t,s,"linePrefix")(a):s(a)}function s(a){return a===null||De(a)?e(a):n(a)}}const TC={continuation:{tokenize:u9},exit:f9,name:"blockQuote",tokenize:c9};function c9(t,e,n){const r=this;return s;function s(l){if(l===62){const u=r.containerState;return u.open||(t.enter("blockQuote",{_container:!0}),u.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(l),t.exit("blockQuoteMarker"),a}return n(l)}function a(l){return Ze(l)?(t.enter("blockQuotePrefixWhitespace"),t.consume(l),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),e):(t.exit("blockQuotePrefix"),e(l))}}function u9(t,e,n){const r=this;return s;function s(l){return Ze(l)?rt(t,a,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l):a(l)}function a(l){return t.attempt(TC,e,n)(l)}}function f9(t){t.exit("blockQuote")}const AC={name:"characterEscape",tokenize:d9};function d9(t,e,n){return r;function r(a){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(a),t.exit("escapeMarker"),s}function s(a){return Wq(a)?(t.enter("characterEscapeValue"),t.consume(a),t.exit("characterEscapeValue"),t.exit("characterEscape"),e):n(a)}}const RC={name:"characterReference",tokenize:h9};function h9(t,e,n){const r=this;let s=0,a,l;return u;function u(p){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(p),t.exit("characterReferenceMarker"),f}function f(p){return p===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(p),t.exit("characterReferenceMarkerNumeric"),d):(t.enter("characterReferenceValue"),a=31,l=Rn,m(p))}function d(p){return p===88||p===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(p),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),a=6,l=Yq,m):(t.enter("characterReferenceValue"),a=7,l=Qg,m(p))}function m(p){if(p===59&&s){const y=t.exit("characterReferenceValue");return l===Rn&&!g0(r.sliceSerialize(y))?n(p):(t.enter("characterReferenceMarker"),t.consume(p),t.exit("characterReferenceMarker"),t.exit("characterReference"),e)}return l(p)&&s++<a?(t.consume(p),m):n(p)}}const oS={partial:!0,tokenize:m9},lS={concrete:!0,name:"codeFenced",tokenize:p9};function p9(t,e,n){const r=this,s={partial:!0,tokenize:N};let a=0,l=0,u;return f;function f(R){return d(R)}function d(R){const $=r.events[r.events.length-1];return a=$&&$[1].type==="linePrefix"?$[2].sliceSerialize($[1],!0).length:0,u=R,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),m(R)}function m(R){return R===u?(l++,t.consume(R),m):l<3?n(R):(t.exit("codeFencedFenceSequence"),Ze(R)?rt(t,p,"whitespace")(R):p(R))}function p(R){return R===null||De(R)?(t.exit("codeFencedFence"),r.interrupt?e(R):t.check(oS,w,D)(R)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),y(R))}function y(R){return R===null||De(R)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),p(R)):Ze(R)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),rt(t,g,"whitespace")(R)):R===96&&R===u?n(R):(t.consume(R),y)}function g(R){return R===null||De(R)?p(R):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),v(R))}function v(R){return R===null||De(R)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),p(R)):R===96&&R===u?n(R):(t.consume(R),v)}function w(R){return t.attempt(s,D,E)(R)}function E(R){return t.enter("lineEnding"),t.consume(R),t.exit("lineEnding"),k}function k(R){return a>0&&Ze(R)?rt(t,C,"linePrefix",a+1)(R):C(R)}function C(R){return R===null||De(R)?t.check(oS,w,D)(R):(t.enter("codeFlowValue"),T(R))}function T(R){return R===null||De(R)?(t.exit("codeFlowValue"),C(R)):(t.consume(R),T)}function D(R){return t.exit("codeFenced"),e(R)}function N(R,$,q){let H=0;return M;function M(F){return R.enter("lineEnding"),R.consume(F),R.exit("lineEnding"),Q}function Q(F){return R.enter("codeFencedFence"),Ze(F)?rt(R,ne,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(F):ne(F)}function ne(F){return F===u?(R.enter("codeFencedFenceSequence"),ye(F)):q(F)}function ye(F){return F===u?(H++,R.consume(F),ye):H>=l?(R.exit("codeFencedFenceSequence"),Ze(F)?rt(R,X,"whitespace")(F):X(F)):q(F)}function X(F){return F===null||De(F)?(R.exit("codeFencedFence"),$(F)):q(F)}}}function m9(t,e,n){const r=this;return s;function s(l){return l===null?n(l):(t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),a)}function a(l){return r.parser.lazy[r.now().line]?n(l):e(l)}}const Mm={name:"codeIndented",tokenize:y9},g9={partial:!0,tokenize:b9};function y9(t,e,n){const r=this;return s;function s(d){return t.enter("codeIndented"),rt(t,a,"linePrefix",5)(d)}function a(d){const m=r.events[r.events.length-1];return m&&m[1].type==="linePrefix"&&m[2].sliceSerialize(m[1],!0).length>=4?l(d):n(d)}function l(d){return d===null?f(d):De(d)?t.attempt(g9,l,f)(d):(t.enter("codeFlowValue"),u(d))}function u(d){return d===null||De(d)?(t.exit("codeFlowValue"),l(d)):(t.consume(d),u)}function f(d){return t.exit("codeIndented"),e(d)}}function b9(t,e,n){const r=this;return s;function s(l){return r.parser.lazy[r.now().line]?n(l):De(l)?(t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),s):rt(t,a,"linePrefix",5)(l)}function a(l){const u=r.events[r.events.length-1];return u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?e(l):De(l)?s(l):n(l)}}const _9={name:"codeText",previous:x9,resolve:v9,tokenize:w9};function v9(t){let e=t.length-4,n=3,r,s;if((t[n][1].type==="lineEnding"||t[n][1].type==="space")&&(t[e][1].type==="lineEnding"||t[e][1].type==="space")){for(r=n;++r<e;)if(t[r][1].type==="codeTextData"){t[n][1].type="codeTextPadding",t[e][1].type="codeTextPadding",n+=2,e-=2;break}}for(r=n-1,e++;++r<=e;)s===void 0?r!==e&&t[r][1].type!=="lineEnding"&&(s=r):(r===e||t[r][1].type==="lineEnding")&&(t[s][1].type="codeTextData",r!==s+2&&(t[s][1].end=t[r-1][1].end,t.splice(s+2,r-s-2),e-=r-s-2,r=s+2),s=void 0);return t}function x9(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function w9(t,e,n){let r=0,s,a;return l;function l(p){return t.enter("codeText"),t.enter("codeTextSequence"),u(p)}function u(p){return p===96?(t.consume(p),r++,u):(t.exit("codeTextSequence"),f(p))}function f(p){return p===null?n(p):p===32?(t.enter("space"),t.consume(p),t.exit("space"),f):p===96?(a=t.enter("codeTextSequence"),s=0,m(p)):De(p)?(t.enter("lineEnding"),t.consume(p),t.exit("lineEnding"),f):(t.enter("codeTextData"),d(p))}function d(p){return p===null||p===32||p===96||De(p)?(t.exit("codeTextData"),f(p)):(t.consume(p),d)}function m(p){return p===96?(t.consume(p),s++,m):s===r?(t.exit("codeTextSequence"),t.exit("codeText"),e(p)):(a.type="codeTextData",d(p))}}class S9{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(e,r):e>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(e,n,r){const s=n||0;this.setCursor(Math.trunc(e));const a=this.right.splice(this.right.length-s,Number.POSITIVE_INFINITY);return r&&gl(this.left,r),a.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),gl(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),gl(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const n=this.left.splice(e,Number.POSITIVE_INFINITY);gl(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);gl(this.left,n.reverse())}}}function gl(t,e){let n=0;if(e.length<1e4)t.push(...e);else for(;n<e.length;)t.push(...e.slice(n,n+1e4)),n+=1e4}function OC(t){const e={};let n=-1,r,s,a,l,u,f,d;const m=new S9(t);for(;++n<m.length;){for(;n in e;)n=e[n];if(r=m.get(n),n&&r[1].type==="chunkFlow"&&m.get(n-1)[1].type==="listItemPrefix"&&(f=r[1]._tokenizer.events,a=0,a<f.length&&f[a][1].type==="lineEndingBlank"&&(a+=2),a<f.length&&f[a][1].type==="content"))for(;++a<f.length&&f[a][1].type!=="content";)f[a][1].type==="chunkText"&&(f[a][1]._isInFirstContentOfListItem=!0,a++);if(r[0]==="enter")r[1].contentType&&(Object.assign(e,k9(m,n)),n=e[n],d=!0);else if(r[1]._container){for(a=n,s=void 0;a--;)if(l=m.get(a),l[1].type==="lineEnding"||l[1].type==="lineEndingBlank")l[0]==="enter"&&(s&&(m.get(s)[1].type="lineEndingBlank"),l[1].type="lineEnding",s=a);else if(!(l[1].type==="linePrefix"||l[1].type==="listItemIndent"))break;s&&(r[1].end={...m.get(s)[1].start},u=m.slice(s,n),u.unshift(r),m.splice(s,n-s+1,u))}}return mr(t,0,Number.POSITIVE_INFINITY,m.slice(0)),!d}function k9(t,e){const n=t.get(e)[1],r=t.get(e)[2];let s=e-1;const a=[];let l=n._tokenizer;l||(l=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(l._contentTypeTextTrailing=!0));const u=l.events,f=[],d={};let m,p,y=-1,g=n,v=0,w=0;const E=[w];for(;g;){for(;t.get(++s)[1]!==g;);a.push(s),g._tokenizer||(m=r.sliceStream(g),g.next||m.push(null),p&&l.defineSkip(g.start),g._isInFirstContentOfListItem&&(l._gfmTasklistFirstContentOfListItem=!0),l.write(m),g._isInFirstContentOfListItem&&(l._gfmTasklistFirstContentOfListItem=void 0)),p=g,g=g.next}for(g=n;++y<u.length;)u[y][0]==="exit"&&u[y-1][0]==="enter"&&u[y][1].type===u[y-1][1].type&&u[y][1].start.line!==u[y][1].end.line&&(w=y+1,E.push(w),g._tokenizer=void 0,g.previous=void 0,g=g.next);for(l.events=[],g?(g._tokenizer=void 0,g.previous=void 0):E.pop(),y=E.length;y--;){const k=u.slice(E[y],E[y+1]),C=a.pop();f.push([C,C+k.length-1]),t.splice(C,2,k)}for(f.reverse(),y=-1;++y<f.length;)d[v+f[y][0]]=v+f[y][1],v+=f[y][1]-f[y][0]-1;return d}const E9={resolve:T9,tokenize:A9},C9={partial:!0,tokenize:R9};function T9(t){return OC(t),t}function A9(t,e){let n;return r;function r(u){return t.enter("content"),n=t.enter("chunkContent",{contentType:"content"}),s(u)}function s(u){return u===null?a(u):De(u)?t.check(C9,l,a)(u):(t.consume(u),s)}function a(u){return t.exit("chunkContent"),t.exit("content"),e(u)}function l(u){return t.consume(u),t.exit("chunkContent"),n.next=t.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,s}}function R9(t,e,n){const r=this;return s;function s(l){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),rt(t,a,"linePrefix")}function a(l){if(l===null||De(l))return n(l);const u=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?e(l):t.interrupt(r.parser.constructs.flow,n,e)(l)}}function IC(t,e,n,r,s,a,l,u,f){const d=f||Number.POSITIVE_INFINITY;let m=0;return p;function p(k){return k===60?(t.enter(r),t.enter(s),t.enter(a),t.consume(k),t.exit(a),y):k===null||k===32||k===41||Qf(k)?n(k):(t.enter(r),t.enter(l),t.enter(u),t.enter("chunkString",{contentType:"string"}),w(k))}function y(k){return k===62?(t.enter(a),t.consume(k),t.exit(a),t.exit(s),t.exit(r),e):(t.enter(u),t.enter("chunkString",{contentType:"string"}),g(k))}function g(k){return k===62?(t.exit("chunkString"),t.exit(u),y(k)):k===null||k===60||De(k)?n(k):(t.consume(k),k===92?v:g)}function v(k){return k===60||k===62||k===92?(t.consume(k),g):g(k)}function w(k){return!m&&(k===null||k===41||wt(k))?(t.exit("chunkString"),t.exit(u),t.exit(l),t.exit(r),e(k)):m<d&&k===40?(t.consume(k),m++,w):k===41?(t.consume(k),m--,w):k===null||k===32||k===40||Qf(k)?n(k):(t.consume(k),k===92?E:w)}function E(k){return k===40||k===41||k===92?(t.consume(k),w):w(k)}}function NC(t,e,n,r,s,a){const l=this;let u=0,f;return d;function d(g){return t.enter(r),t.enter(s),t.consume(g),t.exit(s),t.enter(a),m}function m(g){return u>999||g===null||g===91||g===93&&!f||g===94&&!u&&"_hiddenFootnoteSupport"in l.parser.constructs?n(g):g===93?(t.exit(a),t.enter(s),t.consume(g),t.exit(s),t.exit(r),e):De(g)?(t.enter("lineEnding"),t.consume(g),t.exit("lineEnding"),m):(t.enter("chunkString",{contentType:"string"}),p(g))}function p(g){return g===null||g===91||g===93||De(g)||u++>999?(t.exit("chunkString"),m(g)):(t.consume(g),f||(f=!Ze(g)),g===92?y:p)}function y(g){return g===91||g===92||g===93?(t.consume(g),u++,p):p(g)}}function MC(t,e,n,r,s,a){let l;return u;function u(y){return y===34||y===39||y===40?(t.enter(r),t.enter(s),t.consume(y),t.exit(s),l=y===40?41:y,f):n(y)}function f(y){return y===l?(t.enter(s),t.consume(y),t.exit(s),t.exit(r),e):(t.enter(a),d(y))}function d(y){return y===l?(t.exit(a),f(l)):y===null?n(y):De(y)?(t.enter("lineEnding"),t.consume(y),t.exit("lineEnding"),rt(t,d,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),m(y))}function m(y){return y===l||y===null||De(y)?(t.exit("chunkString"),d(y)):(t.consume(y),y===92?p:m)}function p(y){return y===l||y===92?(t.consume(y),m):m(y)}}function Ul(t,e){let n;return r;function r(s){return De(s)?(t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),n=!0,r):Ze(s)?rt(t,r,n?"linePrefix":"lineSuffix")(s):e(s)}}const O9={name:"definition",tokenize:N9},I9={partial:!0,tokenize:M9};function N9(t,e,n){const r=this;let s;return a;function a(g){return t.enter("definition"),l(g)}function l(g){return NC.call(r,t,u,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(g)}function u(g){return s=qr(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),g===58?(t.enter("definitionMarker"),t.consume(g),t.exit("definitionMarker"),f):n(g)}function f(g){return wt(g)?Ul(t,d)(g):d(g)}function d(g){return IC(t,m,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(g)}function m(g){return t.attempt(I9,p,p)(g)}function p(g){return Ze(g)?rt(t,y,"whitespace")(g):y(g)}function y(g){return g===null||De(g)?(t.exit("definition"),r.parser.defined.push(s),e(g)):n(g)}}function M9(t,e,n){return r;function r(u){return wt(u)?Ul(t,s)(u):n(u)}function s(u){return MC(t,a,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(u)}function a(u){return Ze(u)?rt(t,l,"whitespace")(u):l(u)}function l(u){return u===null||De(u)?e(u):n(u)}}const D9={name:"hardBreakEscape",tokenize:j9};function j9(t,e,n){return r;function r(a){return t.enter("hardBreakEscape"),t.consume(a),s}function s(a){return De(a)?(t.exit("hardBreakEscape"),e(a)):n(a)}}const L9={name:"headingAtx",resolve:z9,tokenize:P9};function z9(t,e){let n=t.length-2,r=3,s,a;return t[r][1].type==="whitespace"&&(r+=2),n-2>r&&t[n][1].type==="whitespace"&&(n-=2),t[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&t[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(s={type:"atxHeadingText",start:t[r][1].start,end:t[n][1].end},a={type:"chunkText",start:t[r][1].start,end:t[n][1].end,contentType:"text"},mr(t,r,n-r+1,[["enter",s,e],["enter",a,e],["exit",a,e],["exit",s,e]])),t}function P9(t,e,n){let r=0;return s;function s(m){return t.enter("atxHeading"),a(m)}function a(m){return t.enter("atxHeadingSequence"),l(m)}function l(m){return m===35&&r++<6?(t.consume(m),l):m===null||wt(m)?(t.exit("atxHeadingSequence"),u(m)):n(m)}function u(m){return m===35?(t.enter("atxHeadingSequence"),f(m)):m===null||De(m)?(t.exit("atxHeading"),e(m)):Ze(m)?rt(t,u,"whitespace")(m):(t.enter("atxHeadingText"),d(m))}function f(m){return m===35?(t.consume(m),f):(t.exit("atxHeadingSequence"),u(m))}function d(m){return m===null||m===35||wt(m)?(t.exit("atxHeadingText"),u(m)):(t.consume(m),d)}}const B9=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],cS=["pre","script","style","textarea"],$9={concrete:!0,name:"htmlFlow",resolveTo:F9,tokenize:V9},U9={partial:!0,tokenize:G9},q9={partial:!0,tokenize:H9};function F9(t){let e=t.length;for(;e--&&!(t[e][0]==="enter"&&t[e][1].type==="htmlFlow"););return e>1&&t[e-2][1].type==="linePrefix"&&(t[e][1].start=t[e-2][1].start,t[e+1][1].start=t[e-2][1].start,t.splice(e-2,2)),t}function V9(t,e,n){const r=this;let s,a,l,u,f;return d;function d(O){return m(O)}function m(O){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(O),p}function p(O){return O===33?(t.consume(O),y):O===47?(t.consume(O),a=!0,w):O===63?(t.consume(O),s=3,r.interrupt?e:I):Pn(O)?(t.consume(O),l=String.fromCharCode(O),E):n(O)}function y(O){return O===45?(t.consume(O),s=2,g):O===91?(t.consume(O),s=5,u=0,v):Pn(O)?(t.consume(O),s=4,r.interrupt?e:I):n(O)}function g(O){return O===45?(t.consume(O),r.interrupt?e:I):n(O)}function v(O){const le="CDATA[";return O===le.charCodeAt(u++)?(t.consume(O),u===le.length?r.interrupt?e:ne:v):n(O)}function w(O){return Pn(O)?(t.consume(O),l=String.fromCharCode(O),E):n(O)}function E(O){if(O===null||O===47||O===62||wt(O)){const le=O===47,L=l.toLowerCase();return!le&&!a&&cS.includes(L)?(s=1,r.interrupt?e(O):ne(O)):B9.includes(l.toLowerCase())?(s=6,le?(t.consume(O),k):r.interrupt?e(O):ne(O)):(s=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(O):a?C(O):T(O))}return O===45||Rn(O)?(t.consume(O),l+=String.fromCharCode(O),E):n(O)}function k(O){return O===62?(t.consume(O),r.interrupt?e:ne):n(O)}function C(O){return Ze(O)?(t.consume(O),C):M(O)}function T(O){return O===47?(t.consume(O),M):O===58||O===95||Pn(O)?(t.consume(O),D):Ze(O)?(t.consume(O),T):M(O)}function D(O){return O===45||O===46||O===58||O===95||Rn(O)?(t.consume(O),D):N(O)}function N(O){return O===61?(t.consume(O),R):Ze(O)?(t.consume(O),N):T(O)}function R(O){return O===null||O===60||O===61||O===62||O===96?n(O):O===34||O===39?(t.consume(O),f=O,$):Ze(O)?(t.consume(O),R):q(O)}function $(O){return O===f?(t.consume(O),f=null,H):O===null||De(O)?n(O):(t.consume(O),$)}function q(O){return O===null||O===34||O===39||O===47||O===60||O===61||O===62||O===96||wt(O)?N(O):(t.consume(O),q)}function H(O){return O===47||O===62||Ze(O)?T(O):n(O)}function M(O){return O===62?(t.consume(O),Q):n(O)}function Q(O){return O===null||De(O)?ne(O):Ze(O)?(t.consume(O),Q):n(O)}function ne(O){return O===45&&s===2?(t.consume(O),B):O===60&&s===1?(t.consume(O),K):O===62&&s===4?(t.consume(O),j):O===63&&s===3?(t.consume(O),I):O===93&&s===5?(t.consume(O),re):De(O)&&(s===6||s===7)?(t.exit("htmlFlowData"),t.check(U9,G,ye)(O)):O===null||De(O)?(t.exit("htmlFlowData"),ye(O)):(t.consume(O),ne)}function ye(O){return t.check(q9,X,G)(O)}function X(O){return t.enter("lineEnding"),t.consume(O),t.exit("lineEnding"),F}function F(O){return O===null||De(O)?ye(O):(t.enter("htmlFlowData"),ne(O))}function B(O){return O===45?(t.consume(O),I):ne(O)}function K(O){return O===47?(t.consume(O),l="",ie):ne(O)}function ie(O){if(O===62){const le=l.toLowerCase();return cS.includes(le)?(t.consume(O),j):ne(O)}return Pn(O)&&l.length<8?(t.consume(O),l+=String.fromCharCode(O),ie):ne(O)}function re(O){return O===93?(t.consume(O),I):ne(O)}function I(O){return O===62?(t.consume(O),j):O===45&&s===2?(t.consume(O),I):ne(O)}function j(O){return O===null||De(O)?(t.exit("htmlFlowData"),G(O)):(t.consume(O),j)}function G(O){return t.exit("htmlFlow"),e(O)}}function H9(t,e,n){const r=this;return s;function s(l){return De(l)?(t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),a):n(l)}function a(l){return r.parser.lazy[r.now().line]?n(l):e(l)}}function G9(t,e,n){return r;function r(s){return t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),t.attempt(mc,e,n)}}const K9={name:"htmlText",tokenize:Z9};function Z9(t,e,n){const r=this;let s,a,l;return u;function u(I){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(I),f}function f(I){return I===33?(t.consume(I),d):I===47?(t.consume(I),N):I===63?(t.consume(I),T):Pn(I)?(t.consume(I),q):n(I)}function d(I){return I===45?(t.consume(I),m):I===91?(t.consume(I),a=0,v):Pn(I)?(t.consume(I),C):n(I)}function m(I){return I===45?(t.consume(I),g):n(I)}function p(I){return I===null?n(I):I===45?(t.consume(I),y):De(I)?(l=p,K(I)):(t.consume(I),p)}function y(I){return I===45?(t.consume(I),g):p(I)}function g(I){return I===62?B(I):I===45?y(I):p(I)}function v(I){const j="CDATA[";return I===j.charCodeAt(a++)?(t.consume(I),a===j.length?w:v):n(I)}function w(I){return I===null?n(I):I===93?(t.consume(I),E):De(I)?(l=w,K(I)):(t.consume(I),w)}function E(I){return I===93?(t.consume(I),k):w(I)}function k(I){return I===62?B(I):I===93?(t.consume(I),k):w(I)}function C(I){return I===null||I===62?B(I):De(I)?(l=C,K(I)):(t.consume(I),C)}function T(I){return I===null?n(I):I===63?(t.consume(I),D):De(I)?(l=T,K(I)):(t.consume(I),T)}function D(I){return I===62?B(I):T(I)}function N(I){return Pn(I)?(t.consume(I),R):n(I)}function R(I){return I===45||Rn(I)?(t.consume(I),R):$(I)}function $(I){return De(I)?(l=$,K(I)):Ze(I)?(t.consume(I),$):B(I)}function q(I){return I===45||Rn(I)?(t.consume(I),q):I===47||I===62||wt(I)?H(I):n(I)}function H(I){return I===47?(t.consume(I),B):I===58||I===95||Pn(I)?(t.consume(I),M):De(I)?(l=H,K(I)):Ze(I)?(t.consume(I),H):B(I)}function M(I){return I===45||I===46||I===58||I===95||Rn(I)?(t.consume(I),M):Q(I)}function Q(I){return I===61?(t.consume(I),ne):De(I)?(l=Q,K(I)):Ze(I)?(t.consume(I),Q):H(I)}function ne(I){return I===null||I===60||I===61||I===62||I===96?n(I):I===34||I===39?(t.consume(I),s=I,ye):De(I)?(l=ne,K(I)):Ze(I)?(t.consume(I),ne):(t.consume(I),X)}function ye(I){return I===s?(t.consume(I),s=void 0,F):I===null?n(I):De(I)?(l=ye,K(I)):(t.consume(I),ye)}function X(I){return I===null||I===34||I===39||I===60||I===61||I===96?n(I):I===47||I===62||wt(I)?H(I):(t.consume(I),X)}function F(I){return I===47||I===62||wt(I)?H(I):n(I)}function B(I){return I===62?(t.consume(I),t.exit("htmlTextData"),t.exit("htmlText"),e):n(I)}function K(I){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(I),t.exit("lineEnding"),ie}function ie(I){return Ze(I)?rt(t,re,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(I):re(I)}function re(I){return t.enter("htmlTextData"),l(I)}}const y0={name:"labelEnd",resolveAll:W9,resolveTo:X9,tokenize:eF},J9={tokenize:tF},Q9={tokenize:nF},Y9={tokenize:rF};function W9(t){let e=-1;const n=[];for(;++e<t.length;){const r=t[e][1];if(n.push(t[e]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const s=r.type==="labelImage"?4:2;r.type="data",e+=s}}return t.length!==n.length&&mr(t,0,t.length,n),t}function X9(t,e){let n=t.length,r=0,s,a,l,u;for(;n--;)if(s=t[n][1],a){if(s.type==="link"||s.type==="labelLink"&&s._inactive)break;t[n][0]==="enter"&&s.type==="labelLink"&&(s._inactive=!0)}else if(l){if(t[n][0]==="enter"&&(s.type==="labelImage"||s.type==="labelLink")&&!s._balanced&&(a=n,s.type!=="labelLink")){r=2;break}}else s.type==="labelEnd"&&(l=n);const f={type:t[a][1].type==="labelLink"?"link":"image",start:{...t[a][1].start},end:{...t[t.length-1][1].end}},d={type:"label",start:{...t[a][1].start},end:{...t[l][1].end}},m={type:"labelText",start:{...t[a+r+2][1].end},end:{...t[l-2][1].start}};return u=[["enter",f,e],["enter",d,e]],u=Nr(u,t.slice(a+1,a+r+3)),u=Nr(u,[["enter",m,e]]),u=Nr(u,Id(e.parser.constructs.insideSpan.null,t.slice(a+r+4,l-3),e)),u=Nr(u,[["exit",m,e],t[l-2],t[l-1],["exit",d,e]]),u=Nr(u,t.slice(l+1)),u=Nr(u,[["exit",f,e]]),mr(t,a,t.length,u),t}function eF(t,e,n){const r=this;let s=r.events.length,a,l;for(;s--;)if((r.events[s][1].type==="labelImage"||r.events[s][1].type==="labelLink")&&!r.events[s][1]._balanced){a=r.events[s][1];break}return u;function u(y){return a?a._inactive?p(y):(l=r.parser.defined.includes(qr(r.sliceSerialize({start:a.end,end:r.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(y),t.exit("labelMarker"),t.exit("labelEnd"),f):n(y)}function f(y){return y===40?t.attempt(J9,m,l?m:p)(y):y===91?t.attempt(Q9,m,l?d:p)(y):l?m(y):p(y)}function d(y){return t.attempt(Y9,m,p)(y)}function m(y){return e(y)}function p(y){return a._balanced=!0,n(y)}}function tF(t,e,n){return r;function r(p){return t.enter("resource"),t.enter("resourceMarker"),t.consume(p),t.exit("resourceMarker"),s}function s(p){return wt(p)?Ul(t,a)(p):a(p)}function a(p){return p===41?m(p):IC(t,l,u,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(p)}function l(p){return wt(p)?Ul(t,f)(p):m(p)}function u(p){return n(p)}function f(p){return p===34||p===39||p===40?MC(t,d,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(p):m(p)}function d(p){return wt(p)?Ul(t,m)(p):m(p)}function m(p){return p===41?(t.enter("resourceMarker"),t.consume(p),t.exit("resourceMarker"),t.exit("resource"),e):n(p)}}function nF(t,e,n){const r=this;return s;function s(u){return NC.call(r,t,a,l,"reference","referenceMarker","referenceString")(u)}function a(u){return r.parser.defined.includes(qr(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?e(u):n(u)}function l(u){return n(u)}}function rF(t,e,n){return r;function r(a){return t.enter("reference"),t.enter("referenceMarker"),t.consume(a),t.exit("referenceMarker"),s}function s(a){return a===93?(t.enter("referenceMarker"),t.consume(a),t.exit("referenceMarker"),t.exit("reference"),e):n(a)}}const sF={name:"labelStartImage",resolveAll:y0.resolveAll,tokenize:iF};function iF(t,e,n){const r=this;return s;function s(u){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(u),t.exit("labelImageMarker"),a}function a(u){return u===91?(t.enter("labelMarker"),t.consume(u),t.exit("labelMarker"),t.exit("labelImage"),l):n(u)}function l(u){return u===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(u):e(u)}}const aF={name:"labelStartLink",resolveAll:y0.resolveAll,tokenize:oF};function oF(t,e,n){const r=this;return s;function s(l){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(l),t.exit("labelMarker"),t.exit("labelLink"),a}function a(l){return l===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(l):e(l)}}const Dm={name:"lineEnding",tokenize:lF};function lF(t,e){return n;function n(r){return t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),rt(t,e,"linePrefix")}}const cf={name:"thematicBreak",tokenize:cF};function cF(t,e,n){let r=0,s;return a;function a(d){return t.enter("thematicBreak"),l(d)}function l(d){return s=d,u(d)}function u(d){return d===s?(t.enter("thematicBreakSequence"),f(d)):r>=3&&(d===null||De(d))?(t.exit("thematicBreak"),e(d)):n(d)}function f(d){return d===s?(t.consume(d),r++,f):(t.exit("thematicBreakSequence"),Ze(d)?rt(t,u,"whitespace")(d):u(d))}}const Qn={continuation:{tokenize:hF},exit:mF,name:"list",tokenize:dF},uF={partial:!0,tokenize:gF},fF={partial:!0,tokenize:pF};function dF(t,e,n){const r=this,s=r.events[r.events.length-1];let a=s&&s[1].type==="linePrefix"?s[2].sliceSerialize(s[1],!0).length:0,l=0;return u;function u(g){const v=r.containerState.type||(g===42||g===43||g===45?"listUnordered":"listOrdered");if(v==="listUnordered"?!r.containerState.marker||g===r.containerState.marker:Qg(g)){if(r.containerState.type||(r.containerState.type=v,t.enter(v,{_container:!0})),v==="listUnordered")return t.enter("listItemPrefix"),g===42||g===45?t.check(cf,n,d)(g):d(g);if(!r.interrupt||g===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),f(g)}return n(g)}function f(g){return Qg(g)&&++l<10?(t.consume(g),f):(!r.interrupt||l<2)&&(r.containerState.marker?g===r.containerState.marker:g===41||g===46)?(t.exit("listItemValue"),d(g)):n(g)}function d(g){return t.enter("listItemMarker"),t.consume(g),t.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||g,t.check(mc,r.interrupt?n:m,t.attempt(uF,y,p))}function m(g){return r.containerState.initialBlankLine=!0,a++,y(g)}function p(g){return Ze(g)?(t.enter("listItemPrefixWhitespace"),t.consume(g),t.exit("listItemPrefixWhitespace"),y):n(g)}function y(g){return r.containerState.size=a+r.sliceSerialize(t.exit("listItemPrefix"),!0).length,e(g)}}function hF(t,e,n){const r=this;return r.containerState._closeFlow=void 0,t.check(mc,s,a);function s(u){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,rt(t,e,"listItemIndent",r.containerState.size+1)(u)}function a(u){return r.containerState.furtherBlankLines||!Ze(u)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,l(u)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,t.attempt(fF,e,l)(u))}function l(u){return r.containerState._closeFlow=!0,r.interrupt=void 0,rt(t,t.attempt(Qn,e,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(u)}}function pF(t,e,n){const r=this;return rt(t,s,"listItemIndent",r.containerState.size+1);function s(a){const l=r.events[r.events.length-1];return l&&l[1].type==="listItemIndent"&&l[2].sliceSerialize(l[1],!0).length===r.containerState.size?e(a):n(a)}}function mF(t){t.exit(this.containerState.type)}function gF(t,e,n){const r=this;return rt(t,s,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function s(a){const l=r.events[r.events.length-1];return!Ze(a)&&l&&l[1].type==="listItemPrefixWhitespace"?e(a):n(a)}}const uS={name:"setextUnderline",resolveTo:yF,tokenize:bF};function yF(t,e){let n=t.length,r,s,a;for(;n--;)if(t[n][0]==="enter"){if(t[n][1].type==="content"){r=n;break}t[n][1].type==="paragraph"&&(s=n)}else t[n][1].type==="content"&&t.splice(n,1),!a&&t[n][1].type==="definition"&&(a=n);const l={type:"setextHeading",start:{...t[r][1].start},end:{...t[t.length-1][1].end}};return t[s][1].type="setextHeadingText",a?(t.splice(s,0,["enter",l,e]),t.splice(a+1,0,["exit",t[r][1],e]),t[r][1].end={...t[a][1].end}):t[r][1]=l,t.push(["exit",l,e]),t}function bF(t,e,n){const r=this;let s;return a;function a(d){let m=r.events.length,p;for(;m--;)if(r.events[m][1].type!=="lineEnding"&&r.events[m][1].type!=="linePrefix"&&r.events[m][1].type!=="content"){p=r.events[m][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||p)?(t.enter("setextHeadingLine"),s=d,l(d)):n(d)}function l(d){return t.enter("setextHeadingLineSequence"),u(d)}function u(d){return d===s?(t.consume(d),u):(t.exit("setextHeadingLineSequence"),Ze(d)?rt(t,f,"lineSuffix")(d):f(d))}function f(d){return d===null||De(d)?(t.exit("setextHeadingLine"),e(d)):n(d)}}const _F={tokenize:vF};function vF(t){const e=this,n=t.attempt(mc,r,t.attempt(this.parser.constructs.flowInitial,s,rt(t,t.attempt(this.parser.constructs.flow,s,t.attempt(E9,s)),"linePrefix")));return n;function r(a){if(a===null){t.consume(a);return}return t.enter("lineEndingBlank"),t.consume(a),t.exit("lineEndingBlank"),e.currentConstruct=void 0,n}function s(a){if(a===null){t.consume(a);return}return t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),e.currentConstruct=void 0,n}}const xF={resolveAll:jC()},wF=DC("string"),SF=DC("text");function DC(t){return{resolveAll:jC(t==="text"?kF:void 0),tokenize:e};function e(n){const r=this,s=this.parser.constructs[t],a=n.attempt(s,l,u);return l;function l(m){return d(m)?a(m):u(m)}function u(m){if(m===null){n.consume(m);return}return n.enter("data"),n.consume(m),f}function f(m){return d(m)?(n.exit("data"),a(m)):(n.consume(m),f)}function d(m){if(m===null)return!0;const p=s[m];let y=-1;if(p)for(;++y<p.length;){const g=p[y];if(!g.previous||g.previous.call(r,r.previous))return!0}return!1}}}function jC(t){return e;function e(n,r){let s=-1,a;for(;++s<=n.length;)a===void 0?n[s]&&n[s][1].type==="data"&&(a=s,s++):(!n[s]||n[s][1].type!=="data")&&(s!==a+2&&(n[a][1].end=n[s-1][1].end,n.splice(a+2,s-a-2),s=a+2),a=void 0);return t?t(n,r):n}}function kF(t,e){let n=0;for(;++n<=t.length;)if((n===t.length||t[n][1].type==="lineEnding")&&t[n-1][1].type==="data"){const r=t[n-1][1],s=e.sliceStream(r);let a=s.length,l=-1,u=0,f;for(;a--;){const d=s[a];if(typeof d=="string"){for(l=d.length;d.charCodeAt(l-1)===32;)u++,l--;if(l)break;l=-1}else if(d===-2)f=!0,u++;else if(d!==-1){a++;break}}if(e._contentTypeTextTrailing&&n===t.length&&(u=0),u){const d={type:n===t.length||f||u<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:a?l:r.start._bufferIndex+l,_index:r.start._index+a,line:r.end.line,column:r.end.column-u,offset:r.end.offset-u},end:{...r.end}};r.end={...d.start},r.start.offset===r.end.offset?Object.assign(r,d):(t.splice(n,0,["enter",d,e],["exit",d,e]),n+=2)}n++}return t}const EF={42:Qn,43:Qn,45:Qn,48:Qn,49:Qn,50:Qn,51:Qn,52:Qn,53:Qn,54:Qn,55:Qn,56:Qn,57:Qn,62:TC},CF={91:O9},TF={[-2]:Mm,[-1]:Mm,32:Mm},AF={35:L9,42:cf,45:[uS,cf],60:$9,61:uS,95:cf,96:lS,126:lS},RF={38:RC,92:AC},OF={[-5]:Dm,[-4]:Dm,[-3]:Dm,33:sF,38:RC,42:Yg,60:[a9,K9],91:aF,92:[D9,AC],93:y0,95:Yg,96:_9},IF={null:[Yg,xF]},NF={null:[42,95]},MF={null:[]},DF=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:NF,contentInitial:CF,disable:MF,document:EF,flow:AF,flowInitial:TF,insideSpan:IF,string:RF,text:OF},Symbol.toStringTag,{value:"Module"}));function jF(t,e,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const s={},a=[];let l=[],u=[];const f={attempt:$(N),check:$(R),consume:C,enter:T,exit:D,interrupt:$(R,{interrupt:!0})},d={code:null,containerState:{},defineSkip:w,events:[],now:v,parser:t,previous:null,sliceSerialize:y,sliceStream:g,write:p};let m=e.tokenize.call(d,f);return e.resolveAll&&a.push(e),d;function p(Q){return l=Nr(l,Q),E(),l[l.length-1]!==null?[]:(q(e,0),d.events=Id(a,d.events,d),d.events)}function y(Q,ne){return zF(g(Q),ne)}function g(Q){return LF(l,Q)}function v(){const{_bufferIndex:Q,_index:ne,line:ye,column:X,offset:F}=r;return{_bufferIndex:Q,_index:ne,line:ye,column:X,offset:F}}function w(Q){s[Q.line]=Q.column,M()}function E(){let Q;for(;r._index<l.length;){const ne=l[r._index];if(typeof ne=="string")for(Q=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===Q&&r._bufferIndex<ne.length;)k(ne.charCodeAt(r._bufferIndex));else k(ne)}}function k(Q){m=m(Q)}function C(Q){De(Q)?(r.line++,r.column=1,r.offset+=Q===-3?2:1,M()):Q!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===l[r._index].length&&(r._bufferIndex=-1,r._index++)),d.previous=Q}function T(Q,ne){const ye=ne||{};return ye.type=Q,ye.start=v(),d.events.push(["enter",ye,d]),u.push(ye),ye}function D(Q){const ne=u.pop();return ne.end=v(),d.events.push(["exit",ne,d]),ne}function N(Q,ne){q(Q,ne.from)}function R(Q,ne){ne.restore()}function $(Q,ne){return ye;function ye(X,F,B){let K,ie,re,I;return Array.isArray(X)?G(X):"tokenize"in X?G([X]):j(X);function j(P){return pe;function pe(xe){const ve=xe!==null&&P[xe],Te=xe!==null&&P.null,je=[...Array.isArray(ve)?ve:ve?[ve]:[],...Array.isArray(Te)?Te:Te?[Te]:[]];return G(je)(xe)}}function G(P){return K=P,ie=0,P.length===0?B:O(P[ie])}function O(P){return pe;function pe(xe){return I=H(),re=P,P.partial||(d.currentConstruct=P),P.name&&d.parser.constructs.disable.null.includes(P.name)?L():P.tokenize.call(ne?Object.assign(Object.create(d),ne):d,f,le,L)(xe)}}function le(P){return Q(re,I),F}function L(P){return I.restore(),++ie<K.length?O(K[ie]):B}}}function q(Q,ne){Q.resolveAll&&!a.includes(Q)&&a.push(Q),Q.resolve&&mr(d.events,ne,d.events.length-ne,Q.resolve(d.events.slice(ne),d)),Q.resolveTo&&(d.events=Q.resolveTo(d.events,d))}function H(){const Q=v(),ne=d.previous,ye=d.currentConstruct,X=d.events.length,F=Array.from(u);return{from:X,restore:B};function B(){r=Q,d.previous=ne,d.currentConstruct=ye,d.events.length=X,u=F,M()}}function M(){r.line in s&&r.column<2&&(r.column=s[r.line],r.offset+=s[r.line]-1)}}function LF(t,e){const n=e.start._index,r=e.start._bufferIndex,s=e.end._index,a=e.end._bufferIndex;let l;if(n===s)l=[t[n].slice(r,a)];else{if(l=t.slice(n,s),r>-1){const u=l[0];typeof u=="string"?l[0]=u.slice(r):l.shift()}a>0&&l.push(t[s].slice(0,a))}return l}function zF(t,e){let n=-1;const r=[];let s;for(;++n<t.length;){const a=t[n];let l;if(typeof a=="string")l=a;else switch(a){case-5:{l="\r";break}case-4:{l=`
`;break}case-3:{l=`\r
`;break}case-2:{l=e?" ":"	";break}case-1:{if(!e&&s)continue;l=" ";break}default:l=String.fromCharCode(a)}s=a===-2,r.push(l)}return r.join("")}function PF(t){const r={constructs:EC([DF,...(t||{}).extensions||[]]),content:s(Xq),defined:[],document:s(t9),flow:s(_F),lazy:{},string:s(wF),text:s(SF)};return r;function s(a){return l;function l(u){return jF(r,a,u)}}}function BF(t){for(;!OC(t););return t}const fS=/[\0\t\n\r]/g;function $F(){let t=1,e="",n=!0,r;return s;function s(a,l,u){const f=[];let d,m,p,y,g;for(a=e+(typeof a=="string"?a.toString():new TextDecoder(l||void 0).decode(a)),p=0,e="",n&&(a.charCodeAt(0)===65279&&p++,n=void 0);p<a.length;){if(fS.lastIndex=p,d=fS.exec(a),y=d&&d.index!==void 0?d.index:a.length,g=a.charCodeAt(y),!d){e=a.slice(p);break}if(g===10&&p===y&&r)f.push(-3),r=void 0;else switch(r&&(f.push(-5),r=void 0),p<y&&(f.push(a.slice(p,y)),t+=y-p),g){case 0:{f.push(65533),t++;break}case 9:{for(m=Math.ceil(t/4)*4,f.push(-2);t++<m;)f.push(-1);break}case 10:{f.push(-4),t=1;break}default:r=!0,t=1}p=y+1}return u&&(r&&f.push(-5),e&&f.push(e),f.push(null)),f}}const UF=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function qF(t){return t.replace(UF,FF)}function FF(t,e,n){if(e)return e;if(n.charCodeAt(0)===35){const s=n.charCodeAt(1),a=s===120||s===88;return CC(n.slice(a?2:1),a?16:10)}return g0(n)||t}const LC={}.hasOwnProperty;function VF(t,e,n){return typeof e!="string"&&(n=e,e=void 0),HF(n)(BF(PF(n).document().write($F()(t,e,!0))))}function HF(t){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:a($n),autolinkProtocol:H,autolinkEmail:H,atxHeading:a(Zt),blockQuote:a(Te),characterEscape:H,characterReference:H,codeFenced:a(je),codeFencedFenceInfo:l,codeFencedFenceMeta:l,codeIndented:a(je,l),codeText:a(at,l),codeTextData:H,data:H,codeFlowValue:H,definition:a(Ct),definitionDestinationString:l,definitionLabelString:l,definitionTitleString:l,emphasis:a(Nt),hardBreakEscape:a(an),hardBreakTrailing:a(an),htmlFlow:a(rr,l),htmlFlowData:H,htmlText:a(rr,l),htmlTextData:H,image:a(In),label:l,link:a($n),listItem:a(we),listItemValue:y,listOrdered:a(on,p),listUnordered:a(on),paragraph:a(Qe),reference:O,referenceString:l,resourceDestinationString:l,resourceTitleString:l,setextHeading:a(Zt),strong:a(et),thematicBreak:a(kt)},exit:{atxHeading:f(),atxHeadingSequence:N,autolink:f(),autolinkEmail:ve,autolinkProtocol:xe,blockQuote:f(),characterEscapeValue:M,characterReferenceMarkerHexadecimal:L,characterReferenceMarkerNumeric:L,characterReferenceValue:P,characterReference:pe,codeFenced:f(E),codeFencedFence:w,codeFencedFenceInfo:g,codeFencedFenceMeta:v,codeFlowValue:M,codeIndented:f(k),codeText:f(F),codeTextData:M,data:M,definition:f(),definitionDestinationString:D,definitionLabelString:C,definitionTitleString:T,emphasis:f(),hardBreakEscape:f(ne),hardBreakTrailing:f(ne),htmlFlow:f(ye),htmlFlowData:M,htmlText:f(X),htmlTextData:M,image:f(K),label:re,labelText:ie,lineEnding:Q,link:f(B),listItem:f(),listOrdered:f(),listUnordered:f(),paragraph:f(),referenceString:le,resourceDestinationString:I,resourceTitleString:j,resource:G,setextHeading:f(q),setextHeadingLineSequence:$,setextHeadingText:R,strong:f(),thematicBreak:f()}};zC(e,(t||{}).mdastExtensions||[]);const n={};return r;function r(se){let me={type:"root",children:[]};const he={stack:[me],tokenStack:[],config:e,enter:u,exit:d,buffer:l,resume:m,data:n},_e=[];let ue=-1;for(;++ue<se.length;)if(se[ue][1].type==="listOrdered"||se[ue][1].type==="listUnordered")if(se[ue][0]==="enter")_e.push(ue);else{const Se=_e.pop();ue=s(se,Se,ue)}for(ue=-1;++ue<se.length;){const Se=e[se[ue][0]];LC.call(Se,se[ue][1].type)&&Se[se[ue][1].type].call(Object.assign({sliceSerialize:se[ue][2].sliceSerialize},he),se[ue][1])}if(he.tokenStack.length>0){const Se=he.tokenStack[he.tokenStack.length-1];(Se[1]||dS).call(he,void 0,Se[0])}for(me.position={start:Xs(se.length>0?se[0][1].start:{line:1,column:1,offset:0}),end:Xs(se.length>0?se[se.length-2][1].end:{line:1,column:1,offset:0})},ue=-1;++ue<e.transforms.length;)me=e.transforms[ue](me)||me;return me}function s(se,me,he){let _e=me-1,ue=-1,Se=!1,Oe,st,ut,ft;for(;++_e<=he;){const Me=se[_e];switch(Me[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Me[0]==="enter"?ue++:ue--,ft=void 0;break}case"lineEndingBlank":{Me[0]==="enter"&&(Oe&&!ft&&!ue&&!ut&&(ut=_e),ft=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:ft=void 0}if(!ue&&Me[0]==="enter"&&Me[1].type==="listItemPrefix"||ue===-1&&Me[0]==="exit"&&(Me[1].type==="listUnordered"||Me[1].type==="listOrdered")){if(Oe){let yt=_e;for(st=void 0;yt--;){const He=se[yt];if(He[1].type==="lineEnding"||He[1].type==="lineEndingBlank"){if(He[0]==="exit")continue;st&&(se[st][1].type="lineEndingBlank",Se=!0),He[1].type="lineEnding",st=yt}else if(!(He[1].type==="linePrefix"||He[1].type==="blockQuotePrefix"||He[1].type==="blockQuotePrefixWhitespace"||He[1].type==="blockQuoteMarker"||He[1].type==="listItemIndent"))break}ut&&(!st||ut<st)&&(Oe._spread=!0),Oe.end=Object.assign({},st?se[st][1].start:Me[1].end),se.splice(st||_e,0,["exit",Oe,Me[2]]),_e++,he++}if(Me[1].type==="listItemPrefix"){const yt={type:"listItem",_spread:!1,start:Object.assign({},Me[1].start),end:void 0};Oe=yt,se.splice(_e,0,["enter",yt,Me[2]]),_e++,he++,ut=void 0,ft=!0}}}return se[me][1]._spread=Se,he}function a(se,me){return he;function he(_e){u.call(this,se(_e),_e),me&&me.call(this,_e)}}function l(){this.stack.push({type:"fragment",children:[]})}function u(se,me,he){this.stack[this.stack.length-1].children.push(se),this.stack.push(se),this.tokenStack.push([me,he||void 0]),se.position={start:Xs(me.start),end:void 0}}function f(se){return me;function me(he){se&&se.call(this,he),d.call(this,he)}}function d(se,me){const he=this.stack.pop(),_e=this.tokenStack.pop();if(_e)_e[0].type!==se.type&&(me?me.call(this,se,_e[0]):(_e[1]||dS).call(this,se,_e[0]));else throw new Error("Cannot close `"+se.type+"` ("+$l({start:se.start,end:se.end})+"): its not open");he.position.end=Xs(se.end)}function m(){return m0(this.stack.pop())}function p(){this.data.expectingFirstListItemValue=!0}function y(se){if(this.data.expectingFirstListItemValue){const me=this.stack[this.stack.length-2];me.start=Number.parseInt(this.sliceSerialize(se),10),this.data.expectingFirstListItemValue=void 0}}function g(){const se=this.resume(),me=this.stack[this.stack.length-1];me.lang=se}function v(){const se=this.resume(),me=this.stack[this.stack.length-1];me.meta=se}function w(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function E(){const se=this.resume(),me=this.stack[this.stack.length-1];me.value=se.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function k(){const se=this.resume(),me=this.stack[this.stack.length-1];me.value=se.replace(/(\r?\n|\r)$/g,"")}function C(se){const me=this.resume(),he=this.stack[this.stack.length-1];he.label=me,he.identifier=qr(this.sliceSerialize(se)).toLowerCase()}function T(){const se=this.resume(),me=this.stack[this.stack.length-1];me.title=se}function D(){const se=this.resume(),me=this.stack[this.stack.length-1];me.url=se}function N(se){const me=this.stack[this.stack.length-1];if(!me.depth){const he=this.sliceSerialize(se).length;me.depth=he}}function R(){this.data.setextHeadingSlurpLineEnding=!0}function $(se){const me=this.stack[this.stack.length-1];me.depth=this.sliceSerialize(se).codePointAt(0)===61?1:2}function q(){this.data.setextHeadingSlurpLineEnding=void 0}function H(se){const he=this.stack[this.stack.length-1].children;let _e=he[he.length-1];(!_e||_e.type!=="text")&&(_e=Re(),_e.position={start:Xs(se.start),end:void 0},he.push(_e)),this.stack.push(_e)}function M(se){const me=this.stack.pop();me.value+=this.sliceSerialize(se),me.position.end=Xs(se.end)}function Q(se){const me=this.stack[this.stack.length-1];if(this.data.atHardBreak){const he=me.children[me.children.length-1];he.position.end=Xs(se.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(me.type)&&(H.call(this,se),M.call(this,se))}function ne(){this.data.atHardBreak=!0}function ye(){const se=this.resume(),me=this.stack[this.stack.length-1];me.value=se}function X(){const se=this.resume(),me=this.stack[this.stack.length-1];me.value=se}function F(){const se=this.resume(),me=this.stack[this.stack.length-1];me.value=se}function B(){const se=this.stack[this.stack.length-1];if(this.data.inReference){const me=this.data.referenceType||"shortcut";se.type+="Reference",se.referenceType=me,delete se.url,delete se.title}else delete se.identifier,delete se.label;this.data.referenceType=void 0}function K(){const se=this.stack[this.stack.length-1];if(this.data.inReference){const me=this.data.referenceType||"shortcut";se.type+="Reference",se.referenceType=me,delete se.url,delete se.title}else delete se.identifier,delete se.label;this.data.referenceType=void 0}function ie(se){const me=this.sliceSerialize(se),he=this.stack[this.stack.length-2];he.label=qF(me),he.identifier=qr(me).toLowerCase()}function re(){const se=this.stack[this.stack.length-1],me=this.resume(),he=this.stack[this.stack.length-1];if(this.data.inReference=!0,he.type==="link"){const _e=se.children;he.children=_e}else he.alt=me}function I(){const se=this.resume(),me=this.stack[this.stack.length-1];me.url=se}function j(){const se=this.resume(),me=this.stack[this.stack.length-1];me.title=se}function G(){this.data.inReference=void 0}function O(){this.data.referenceType="collapsed"}function le(se){const me=this.resume(),he=this.stack[this.stack.length-1];he.label=me,he.identifier=qr(this.sliceSerialize(se)).toLowerCase(),this.data.referenceType="full"}function L(se){this.data.characterReferenceType=se.type}function P(se){const me=this.sliceSerialize(se),he=this.data.characterReferenceType;let _e;he?(_e=CC(me,he==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):_e=g0(me);const ue=this.stack[this.stack.length-1];ue.value+=_e}function pe(se){const me=this.stack.pop();me.position.end=Xs(se.end)}function xe(se){M.call(this,se);const me=this.stack[this.stack.length-1];me.url=this.sliceSerialize(se)}function ve(se){M.call(this,se);const me=this.stack[this.stack.length-1];me.url="mailto:"+this.sliceSerialize(se)}function Te(){return{type:"blockquote",children:[]}}function je(){return{type:"code",lang:null,meta:null,value:""}}function at(){return{type:"inlineCode",value:""}}function Ct(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Nt(){return{type:"emphasis",children:[]}}function Zt(){return{type:"heading",depth:0,children:[]}}function an(){return{type:"break"}}function rr(){return{type:"html",value:""}}function In(){return{type:"image",title:null,url:"",alt:null}}function $n(){return{type:"link",title:null,url:"",children:[]}}function on(se){return{type:"list",ordered:se.type==="listOrdered",start:null,spread:se._spread,children:[]}}function we(se){return{type:"listItem",spread:se._spread,checked:null,children:[]}}function Qe(){return{type:"paragraph",children:[]}}function et(){return{type:"strong",children:[]}}function Re(){return{type:"text",value:""}}function kt(){return{type:"thematicBreak"}}}function Xs(t){return{line:t.line,column:t.column,offset:t.offset}}function zC(t,e){let n=-1;for(;++n<e.length;){const r=e[n];Array.isArray(r)?zC(t,r):GF(t,r)}}function GF(t,e){let n;for(n in e)if(LC.call(e,n))switch(n){case"canContainEols":{const r=e[n];r&&t[n].push(...r);break}case"transforms":{const r=e[n];r&&t[n].push(...r);break}case"enter":case"exit":{const r=e[n];r&&Object.assign(t[n],r);break}}}function dS(t,e){throw t?new Error("Cannot close `"+t.type+"` ("+$l({start:t.start,end:t.end})+"): a different token (`"+e.type+"`, "+$l({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+$l({start:e.start,end:e.end})+") is still open")}function KF(t){const e=this;e.parser=n;function n(r){return VF(r,{...e.data("settings"),...t,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function ZF(t,e){const n={type:"element",tagName:"blockquote",properties:{},children:t.wrap(t.all(e),!0)};return t.patch(e,n),t.applyData(e,n)}function JF(t,e){const n={type:"element",tagName:"br",properties:{},children:[]};return t.patch(e,n),[t.applyData(e,n),{type:"text",value:`
`}]}function QF(t,e){const n=e.value?e.value+`
`:"",r={},s=e.lang?e.lang.split(/\s+/):[];s.length>0&&(r.className=["language-"+s[0]]);let a={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return e.meta&&(a.data={meta:e.meta}),t.patch(e,a),a=t.applyData(e,a),a={type:"element",tagName:"pre",properties:{},children:[a]},t.patch(e,a),a}function YF(t,e){const n={type:"element",tagName:"del",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function WF(t,e){const n={type:"element",tagName:"em",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function XF(t,e){const n=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",r=String(e.identifier).toUpperCase(),s=go(r.toLowerCase()),a=t.footnoteOrder.indexOf(r);let l,u=t.footnoteCounts.get(r);u===void 0?(u=0,t.footnoteOrder.push(r),l=t.footnoteOrder.length):l=a+1,u+=1,t.footnoteCounts.set(r,u);const f={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+s,id:n+"fnref-"+s+(u>1?"-"+u:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(l)}]};t.patch(e,f);const d={type:"element",tagName:"sup",properties:{},children:[f]};return t.patch(e,d),t.applyData(e,d)}function e7(t,e){const n={type:"element",tagName:"h"+e.depth,properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function t7(t,e){if(t.options.allowDangerousHtml){const n={type:"raw",value:e.value};return t.patch(e,n),t.applyData(e,n)}}function PC(t,e){const n=e.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+r}];const s=t.all(e),a=s[0];a&&a.type==="text"?a.value="["+a.value:s.unshift({type:"text",value:"["});const l=s[s.length-1];return l&&l.type==="text"?l.value+=r:s.push({type:"text",value:r}),s}function n7(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return PC(t,e);const s={src:go(r.url||""),alt:e.alt};r.title!==null&&r.title!==void 0&&(s.title=r.title);const a={type:"element",tagName:"img",properties:s,children:[]};return t.patch(e,a),t.applyData(e,a)}function r7(t,e){const n={src:go(e.url)};e.alt!==null&&e.alt!==void 0&&(n.alt=e.alt),e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"img",properties:n,children:[]};return t.patch(e,r),t.applyData(e,r)}function s7(t,e){const n={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};t.patch(e,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return t.patch(e,r),t.applyData(e,r)}function i7(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return PC(t,e);const s={href:go(r.url||"")};r.title!==null&&r.title!==void 0&&(s.title=r.title);const a={type:"element",tagName:"a",properties:s,children:t.all(e)};return t.patch(e,a),t.applyData(e,a)}function a7(t,e){const n={href:go(e.url)};e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"a",properties:n,children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function o7(t,e,n){const r=t.all(e),s=n?l7(n):BC(e),a={},l=[];if(typeof e.checked=="boolean"){const m=r[0];let p;m&&m.type==="element"&&m.tagName==="p"?p=m:(p={type:"element",tagName:"p",properties:{},children:[]},r.unshift(p)),p.children.length>0&&p.children.unshift({type:"text",value:" "}),p.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),a.className=["task-list-item"]}let u=-1;for(;++u<r.length;){const m=r[u];(s||u!==0||m.type!=="element"||m.tagName!=="p")&&l.push({type:"text",value:`
`}),m.type==="element"&&m.tagName==="p"&&!s?l.push(...m.children):l.push(m)}const f=r[r.length-1];f&&(s||f.type!=="element"||f.tagName!=="p")&&l.push({type:"text",value:`
`});const d={type:"element",tagName:"li",properties:a,children:l};return t.patch(e,d),t.applyData(e,d)}function l7(t){let e=!1;if(t.type==="list"){e=t.spread||!1;const n=t.children;let r=-1;for(;!e&&++r<n.length;)e=BC(n[r])}return e}function BC(t){const e=t.spread;return e??t.children.length>1}function c7(t,e){const n={},r=t.all(e);let s=-1;for(typeof e.start=="number"&&e.start!==1&&(n.start=e.start);++s<r.length;){const l=r[s];if(l.type==="element"&&l.tagName==="li"&&l.properties&&Array.isArray(l.properties.className)&&l.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const a={type:"element",tagName:e.ordered?"ol":"ul",properties:n,children:t.wrap(r,!0)};return t.patch(e,a),t.applyData(e,a)}function u7(t,e){const n={type:"element",tagName:"p",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function f7(t,e){const n={type:"root",children:t.wrap(t.all(e))};return t.patch(e,n),t.applyData(e,n)}function d7(t,e){const n={type:"element",tagName:"strong",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function h7(t,e){const n=t.all(e),r=n.shift(),s=[];if(r){const l={type:"element",tagName:"thead",properties:{},children:t.wrap([r],!0)};t.patch(e.children[0],l),s.push(l)}if(n.length>0){const l={type:"element",tagName:"tbody",properties:{},children:t.wrap(n,!0)},u=f0(e.children[1]),f=bC(e.children[e.children.length-1]);u&&f&&(l.position={start:u,end:f}),s.push(l)}const a={type:"element",tagName:"table",properties:{},children:t.wrap(s,!0)};return t.patch(e,a),t.applyData(e,a)}function p7(t,e,n){const r=n?n.children:void 0,a=(r?r.indexOf(e):1)===0?"th":"td",l=n&&n.type==="table"?n.align:void 0,u=l?l.length:e.children.length;let f=-1;const d=[];for(;++f<u;){const p=e.children[f],y={},g=l?l[f]:void 0;g&&(y.align=g);let v={type:"element",tagName:a,properties:y,children:[]};p&&(v.children=t.all(p),t.patch(p,v),v=t.applyData(p,v)),d.push(v)}const m={type:"element",tagName:"tr",properties:{},children:t.wrap(d,!0)};return t.patch(e,m),t.applyData(e,m)}function m7(t,e){const n={type:"element",tagName:"td",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}const hS=9,pS=32;function g7(t){const e=String(t),n=/\r?\n|\r/g;let r=n.exec(e),s=0;const a=[];for(;r;)a.push(mS(e.slice(s,r.index),s>0,!0),r[0]),s=r.index+r[0].length,r=n.exec(e);return a.push(mS(e.slice(s),s>0,!1)),a.join("")}function mS(t,e,n){let r=0,s=t.length;if(e){let a=t.codePointAt(r);for(;a===hS||a===pS;)r++,a=t.codePointAt(r)}if(n){let a=t.codePointAt(s-1);for(;a===hS||a===pS;)s--,a=t.codePointAt(s-1)}return s>r?t.slice(r,s):""}function y7(t,e){const n={type:"text",value:g7(String(e.value))};return t.patch(e,n),t.applyData(e,n)}function b7(t,e){const n={type:"element",tagName:"hr",properties:{},children:[]};return t.patch(e,n),t.applyData(e,n)}const _7={blockquote:ZF,break:JF,code:QF,delete:YF,emphasis:WF,footnoteReference:XF,heading:e7,html:t7,imageReference:n7,image:r7,inlineCode:s7,linkReference:i7,link:a7,listItem:o7,list:c7,paragraph:u7,root:f7,strong:d7,table:h7,tableCell:m7,tableRow:p7,text:y7,thematicBreak:b7,toml:Vu,yaml:Vu,definition:Vu,footnoteDefinition:Vu};function Vu(){}const $C=-1,Nd=0,ql=1,Yf=2,b0=3,_0=4,v0=5,x0=6,UC=7,qC=8,gS=typeof self=="object"?self:globalThis,v7=(t,e)=>{const n=(s,a)=>(t.set(a,s),s),r=s=>{if(t.has(s))return t.get(s);const[a,l]=e[s];switch(a){case Nd:case $C:return n(l,s);case ql:{const u=n([],s);for(const f of l)u.push(r(f));return u}case Yf:{const u=n({},s);for(const[f,d]of l)u[r(f)]=r(d);return u}case b0:return n(new Date(l),s);case _0:{const{source:u,flags:f}=l;return n(new RegExp(u,f),s)}case v0:{const u=n(new Map,s);for(const[f,d]of l)u.set(r(f),r(d));return u}case x0:{const u=n(new Set,s);for(const f of l)u.add(r(f));return u}case UC:{const{name:u,message:f}=l;return n(new gS[u](f),s)}case qC:return n(BigInt(l),s);case"BigInt":return n(Object(BigInt(l)),s);case"ArrayBuffer":return n(new Uint8Array(l).buffer,l);case"DataView":{const{buffer:u}=new Uint8Array(l);return n(new DataView(u),l)}}return n(new gS[a](l),s)};return r},yS=t=>v7(new Map,t)(0),Pa="",{toString:x7}={},{keys:w7}=Object,yl=t=>{const e=typeof t;if(e!=="object"||!t)return[Nd,e];const n=x7.call(t).slice(8,-1);switch(n){case"Array":return[ql,Pa];case"Object":return[Yf,Pa];case"Date":return[b0,Pa];case"RegExp":return[_0,Pa];case"Map":return[v0,Pa];case"Set":return[x0,Pa];case"DataView":return[ql,n]}return n.includes("Array")?[ql,n]:n.includes("Error")?[UC,n]:[Yf,n]},Hu=([t,e])=>t===Nd&&(e==="function"||e==="symbol"),S7=(t,e,n,r)=>{const s=(l,u)=>{const f=r.push(l)-1;return n.set(u,f),f},a=l=>{if(n.has(l))return n.get(l);let[u,f]=yl(l);switch(u){case Nd:{let m=l;switch(f){case"bigint":u=qC,m=l.toString();break;case"function":case"symbol":if(t)throw new TypeError("unable to serialize "+f);m=null;break;case"undefined":return s([$C],l)}return s([u,m],l)}case ql:{if(f){let y=l;return f==="DataView"?y=new Uint8Array(l.buffer):f==="ArrayBuffer"&&(y=new Uint8Array(l)),s([f,[...y]],l)}const m=[],p=s([u,m],l);for(const y of l)m.push(a(y));return p}case Yf:{if(f)switch(f){case"BigInt":return s([f,l.toString()],l);case"Boolean":case"Number":case"String":return s([f,l.valueOf()],l)}if(e&&"toJSON"in l)return a(l.toJSON());const m=[],p=s([u,m],l);for(const y of w7(l))(t||!Hu(yl(l[y])))&&m.push([a(y),a(l[y])]);return p}case b0:return s([u,l.toISOString()],l);case _0:{const{source:m,flags:p}=l;return s([u,{source:m,flags:p}],l)}case v0:{const m=[],p=s([u,m],l);for(const[y,g]of l)(t||!(Hu(yl(y))||Hu(yl(g))))&&m.push([a(y),a(g)]);return p}case x0:{const m=[],p=s([u,m],l);for(const y of l)(t||!Hu(yl(y)))&&m.push(a(y));return p}}const{message:d}=l;return s([u,{name:f,message:d}],l)};return a},bS=(t,{json:e,lossy:n}={})=>{const r=[];return S7(!(e||n),!!e,new Map,r)(t),r},Wf=typeof structuredClone=="function"?(t,e)=>e&&("json"in e||"lossy"in e)?yS(bS(t,e)):structuredClone(t):(t,e)=>yS(bS(t,e));function k7(t,e){const n=[{type:"text",value:""}];return e>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),n}function E7(t,e){return"Back to reference "+(t+1)+(e>1?"-"+e:"")}function C7(t){const e=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",n=t.options.footnoteBackContent||k7,r=t.options.footnoteBackLabel||E7,s=t.options.footnoteLabel||"Footnotes",a=t.options.footnoteLabelTagName||"h2",l=t.options.footnoteLabelProperties||{className:["sr-only"]},u=[];let f=-1;for(;++f<t.footnoteOrder.length;){const d=t.footnoteById.get(t.footnoteOrder[f]);if(!d)continue;const m=t.all(d),p=String(d.identifier).toUpperCase(),y=go(p.toLowerCase());let g=0;const v=[],w=t.footnoteCounts.get(p);for(;w!==void 0&&++g<=w;){v.length>0&&v.push({type:"text",value:" "});let C=typeof n=="string"?n:n(f,g);typeof C=="string"&&(C={type:"text",value:C}),v.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+y+(g>1?"-"+g:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(f,g),className:["data-footnote-backref"]},children:Array.isArray(C)?C:[C]})}const E=m[m.length-1];if(E&&E.type==="element"&&E.tagName==="p"){const C=E.children[E.children.length-1];C&&C.type==="text"?C.value+=" ":E.children.push({type:"text",value:" "}),E.children.push(...v)}else m.push(...v);const k={type:"element",tagName:"li",properties:{id:e+"fn-"+y},children:t.wrap(m,!0)};t.patch(d,k),u.push(k)}if(u.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:a,properties:{...Wf(l),id:"footnote-label"},children:[{type:"text",value:s}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:t.wrap(u,!0)},{type:"text",value:`
`}]}}const Md=(function(t){if(t==null)return O7;if(typeof t=="function")return Dd(t);if(typeof t=="object")return Array.isArray(t)?T7(t):A7(t);if(typeof t=="string")return R7(t);throw new Error("Expected function, string, or object as test")});function T7(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=Md(t[n]);return Dd(r);function r(...s){let a=-1;for(;++a<e.length;)if(e[a].apply(this,s))return!0;return!1}}function A7(t){const e=t;return Dd(n);function n(r){const s=r;let a;for(a in t)if(s[a]!==e[a])return!1;return!0}}function R7(t){return Dd(e);function e(n){return n&&n.type===t}}function Dd(t){return e;function e(n,r,s){return!!(I7(n)&&t.call(this,n,typeof r=="number"?r:void 0,s||void 0))}}function O7(){return!0}function I7(t){return t!==null&&typeof t=="object"&&"type"in t}const FC=[],N7=!0,Wg=!1,M7="skip";function VC(t,e,n,r){let s;typeof e=="function"&&typeof n!="function"?(r=n,n=e):s=e;const a=Md(s),l=r?-1:1;u(t,void 0,[])();function u(f,d,m){const p=f&&typeof f=="object"?f:{};if(typeof p.type=="string"){const g=typeof p.tagName=="string"?p.tagName:typeof p.name=="string"?p.name:void 0;Object.defineProperty(y,"name",{value:"node ("+(f.type+(g?"<"+g+">":""))+")"})}return y;function y(){let g=FC,v,w,E;if((!e||a(f,d,m[m.length-1]||void 0))&&(g=D7(n(f,m)),g[0]===Wg))return g;if("children"in f&&f.children){const k=f;if(k.children&&g[0]!==M7)for(w=(r?k.children.length:-1)+l,E=m.concat(k);w>-1&&w<k.children.length;){const C=k.children[w];if(v=u(C,w,E)(),v[0]===Wg)return v;w=typeof v[1]=="number"?v[1]:w+l}}return g}}}function D7(t){return Array.isArray(t)?t:typeof t=="number"?[N7,t]:t==null?FC:[t]}function w0(t,e,n,r){let s,a,l;typeof e=="function"&&typeof n!="function"?(a=void 0,l=e,s=n):(a=e,l=n,s=r),VC(t,a,u,s);function u(f,d){const m=d[d.length-1],p=m?m.children.indexOf(f):void 0;return l(f,p,m)}}const Xg={}.hasOwnProperty,j7={};function L7(t,e){const n=e||j7,r=new Map,s=new Map,a=new Map,l={..._7,...n.handlers},u={all:d,applyData:P7,definitionById:r,footnoteById:s,footnoteCounts:a,footnoteOrder:[],handlers:l,one:f,options:n,patch:z7,wrap:$7};return w0(t,function(m){if(m.type==="definition"||m.type==="footnoteDefinition"){const p=m.type==="definition"?r:s,y=String(m.identifier).toUpperCase();p.has(y)||p.set(y,m)}}),u;function f(m,p){const y=m.type,g=u.handlers[y];if(Xg.call(u.handlers,y)&&g)return g(u,m,p);if(u.options.passThrough&&u.options.passThrough.includes(y)){if("children"in m){const{children:w,...E}=m,k=Wf(E);return k.children=u.all(m),k}return Wf(m)}return(u.options.unknownHandler||B7)(u,m,p)}function d(m){const p=[];if("children"in m){const y=m.children;let g=-1;for(;++g<y.length;){const v=u.one(y[g],m);if(v){if(g&&y[g-1].type==="break"&&(!Array.isArray(v)&&v.type==="text"&&(v.value=_S(v.value)),!Array.isArray(v)&&v.type==="element")){const w=v.children[0];w&&w.type==="text"&&(w.value=_S(w.value))}Array.isArray(v)?p.push(...v):p.push(v)}}}return p}}function z7(t,e){t.position&&(e.position=Eq(t))}function P7(t,e){let n=e;if(t&&t.data){const r=t.data.hName,s=t.data.hChildren,a=t.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const l="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:l}}n.type==="element"&&a&&Object.assign(n.properties,Wf(a)),"children"in n&&n.children&&s!==null&&s!==void 0&&(n.children=s)}return n}function B7(t,e){const n=e.data||{},r="value"in e&&!(Xg.call(n,"hProperties")||Xg.call(n,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function $7(t,e){const n=[];let r=-1;for(e&&n.push({type:"text",value:`
`});++r<t.length;)r&&n.push({type:"text",value:`
`}),n.push(t[r]);return e&&t.length>0&&n.push({type:"text",value:`
`}),n}function _S(t){let e=0,n=t.charCodeAt(e);for(;n===9||n===32;)e++,n=t.charCodeAt(e);return t.slice(e)}function vS(t,e){const n=L7(t,e),r=n.one(t,void 0),s=C7(n),a=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return s&&a.children.push({type:"text",value:`
`},s),a}function U7(t,e){return t&&"run"in t?async function(n,r){const s=vS(n,{file:r,...e});await t.run(s,r)}:function(n,r){return vS(n,{file:r,...t||e})}}function xS(t){if(t)throw t}var jm,wS;function q7(){if(wS)return jm;wS=1;var t=Object.prototype.hasOwnProperty,e=Object.prototype.toString,n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,s=function(d){return typeof Array.isArray=="function"?Array.isArray(d):e.call(d)==="[object Array]"},a=function(d){if(!d||e.call(d)!=="[object Object]")return!1;var m=t.call(d,"constructor"),p=d.constructor&&d.constructor.prototype&&t.call(d.constructor.prototype,"isPrototypeOf");if(d.constructor&&!m&&!p)return!1;var y;for(y in d);return typeof y>"u"||t.call(d,y)},l=function(d,m){n&&m.name==="__proto__"?n(d,m.name,{enumerable:!0,configurable:!0,value:m.newValue,writable:!0}):d[m.name]=m.newValue},u=function(d,m){if(m==="__proto__")if(t.call(d,m)){if(r)return r(d,m).value}else return;return d[m]};return jm=function f(){var d,m,p,y,g,v,w=arguments[0],E=1,k=arguments.length,C=!1;for(typeof w=="boolean"&&(C=w,w=arguments[1]||{},E=2),(w==null||typeof w!="object"&&typeof w!="function")&&(w={});E<k;++E)if(d=arguments[E],d!=null)for(m in d)p=u(w,m),y=u(d,m),w!==y&&(C&&y&&(a(y)||(g=s(y)))?(g?(g=!1,v=p&&s(p)?p:[]):v=p&&a(p)?p:{},l(w,{name:m,newValue:f(C,v,y)})):typeof y<"u"&&l(w,{name:m,newValue:y}));return w},jm}var F7=q7();const Lm=ck(F7);function ey(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function V7(){const t=[],e={run:n,use:r};return e;function n(...s){let a=-1;const l=s.pop();if(typeof l!="function")throw new TypeError("Expected function as last argument, not "+l);u(null,...s);function u(f,...d){const m=t[++a];let p=-1;if(f){l(f);return}for(;++p<s.length;)(d[p]===null||d[p]===void 0)&&(d[p]=s[p]);s=d,m?H7(m,u)(...d):l(null,...d)}}function r(s){if(typeof s!="function")throw new TypeError("Expected `middelware` to be a function, not "+s);return t.push(s),e}}function H7(t,e){let n;return r;function r(...l){const u=t.length>l.length;let f;u&&l.push(s);try{f=t.apply(this,l)}catch(d){const m=d;if(u&&n)throw m;return s(m)}u||(f&&f.then&&typeof f.then=="function"?f.then(a,s):f instanceof Error?s(f):a(f))}function s(l,...u){n||(n=!0,e(l,...u))}function a(l){s(null,l)}}const Qr={basename:G7,dirname:K7,extname:Z7,join:J7,sep:"/"};function G7(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');gc(t);let n=0,r=-1,s=t.length,a;if(e===void 0||e.length===0||e.length>t.length){for(;s--;)if(t.codePointAt(s)===47){if(a){n=s+1;break}}else r<0&&(a=!0,r=s+1);return r<0?"":t.slice(n,r)}if(e===t)return"";let l=-1,u=e.length-1;for(;s--;)if(t.codePointAt(s)===47){if(a){n=s+1;break}}else l<0&&(a=!0,l=s+1),u>-1&&(t.codePointAt(s)===e.codePointAt(u--)?u<0&&(r=s):(u=-1,r=l));return n===r?r=l:r<0&&(r=t.length),t.slice(n,r)}function K7(t){if(gc(t),t.length===0)return".";let e=-1,n=t.length,r;for(;--n;)if(t.codePointAt(n)===47){if(r){e=n;break}}else r||(r=!0);return e<0?t.codePointAt(0)===47?"/":".":e===1&&t.codePointAt(0)===47?"//":t.slice(0,e)}function Z7(t){gc(t);let e=t.length,n=-1,r=0,s=-1,a=0,l;for(;e--;){const u=t.codePointAt(e);if(u===47){if(l){r=e+1;break}continue}n<0&&(l=!0,n=e+1),u===46?s<0?s=e:a!==1&&(a=1):s>-1&&(a=-1)}return s<0||n<0||a===0||a===1&&s===n-1&&s===r+1?"":t.slice(s,n)}function J7(...t){let e=-1,n;for(;++e<t.length;)gc(t[e]),t[e]&&(n=n===void 0?t[e]:n+"/"+t[e]);return n===void 0?".":Q7(n)}function Q7(t){gc(t);const e=t.codePointAt(0)===47;let n=Y7(t,!e);return n.length===0&&!e&&(n="."),n.length>0&&t.codePointAt(t.length-1)===47&&(n+="/"),e?"/"+n:n}function Y7(t,e){let n="",r=0,s=-1,a=0,l=-1,u,f;for(;++l<=t.length;){if(l<t.length)u=t.codePointAt(l);else{if(u===47)break;u=47}if(u===47){if(!(s===l-1||a===1))if(s!==l-1&&a===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(f=n.lastIndexOf("/"),f!==n.length-1){f<0?(n="",r=0):(n=n.slice(0,f),r=n.length-1-n.lastIndexOf("/")),s=l,a=0;continue}}else if(n.length>0){n="",r=0,s=l,a=0;continue}}e&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+t.slice(s+1,l):n=t.slice(s+1,l),r=l-s-1;s=l,a=0}else u===46&&a>-1?a++:a=-1}return n}function gc(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const W7={cwd:X7};function X7(){return"/"}function ty(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function eV(t){if(typeof t=="string")t=new URL(t);else if(!ty(t)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(t.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return tV(t)}function tV(t){if(t.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const e=t.pathname;let n=-1;for(;++n<e.length;)if(e.codePointAt(n)===37&&e.codePointAt(n+1)===50){const r=e.codePointAt(n+2);if(r===70||r===102){const s=new TypeError("File URL path must not include encoded / characters");throw s.code="ERR_INVALID_FILE_URL_PATH",s}}return decodeURIComponent(e)}const zm=["history","path","basename","stem","extname","dirname"];class HC{constructor(e){let n;e?ty(e)?n={path:e}:typeof e=="string"||nV(e)?n={value:e}:n=e:n={},this.cwd="cwd"in n?"":W7.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<zm.length;){const a=zm[r];a in n&&n[a]!==void 0&&n[a]!==null&&(this[a]=a==="history"?[...n[a]]:n[a])}let s;for(s in n)zm.includes(s)||(this[s]=n[s])}get basename(){return typeof this.path=="string"?Qr.basename(this.path):void 0}set basename(e){Bm(e,"basename"),Pm(e,"basename"),this.path=Qr.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?Qr.dirname(this.path):void 0}set dirname(e){SS(this.basename,"dirname"),this.path=Qr.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?Qr.extname(this.path):void 0}set extname(e){if(Pm(e,"extname"),SS(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Qr.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){ty(e)&&(e=eV(e)),Bm(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?Qr.basename(this.path,this.extname):void 0}set stem(e){Bm(e,"stem"),Pm(e,"stem"),this.path=Qr.join(this.dirname||"",e+(this.extname||""))}fail(e,n,r){const s=this.message(e,n,r);throw s.fatal=!0,s}info(e,n,r){const s=this.message(e,n,r);return s.fatal=void 0,s}message(e,n,r){const s=new On(e,n,r);return this.path&&(s.name=this.path+":"+s.name,s.file=this.path),s.fatal=!1,this.messages.push(s),s}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function Pm(t,e){if(t&&t.includes(Qr.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+Qr.sep+"`")}function Bm(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}function SS(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}function nV(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const rV=(function(t){const r=this.constructor.prototype,s=r[t],a=function(){return s.apply(a,arguments)};return Object.setPrototypeOf(a,r),a}),sV={}.hasOwnProperty;class S0 extends rV{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=V7()}copy(){const e=new S0;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];e.use(...r)}return e.data(Lm(!0,{},this.namespace)),e}data(e,n){return typeof e=="string"?arguments.length===2?(qm("data",this.frozen),this.namespace[e]=n,this):sV.call(this.namespace,e)&&this.namespace[e]||void 0:e?(qm("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const s=n.call(e,...r);typeof s=="function"&&this.transformers.use(s)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const n=Gu(e),r=this.parser||this.Parser;return $m("parse",r),r(String(n),n)}process(e,n){const r=this;return this.freeze(),$m("process",this.parser||this.Parser),Um("process",this.compiler||this.Compiler),n?s(void 0,n):new Promise(s);function s(a,l){const u=Gu(e),f=r.parse(u);r.run(f,u,function(m,p,y){if(m||!p||!y)return d(m);const g=p,v=r.stringify(g,y);oV(v)?y.value=v:y.result=v,d(m,y)});function d(m,p){m||!p?l(m):a?a(p):n(void 0,p)}}}processSync(e){let n=!1,r;return this.freeze(),$m("processSync",this.parser||this.Parser),Um("processSync",this.compiler||this.Compiler),this.process(e,s),ES("processSync","process",n),r;function s(a,l){n=!0,xS(a),r=l}}run(e,n,r){kS(e),this.freeze();const s=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?a(void 0,r):new Promise(a);function a(l,u){const f=Gu(n);s.run(e,f,d);function d(m,p,y){const g=p||e;m?u(m):l?l(g):r(void 0,g,y)}}}runSync(e,n){let r=!1,s;return this.run(e,n,a),ES("runSync","run",r),s;function a(l,u){xS(l),s=u,r=!0}}stringify(e,n){this.freeze();const r=Gu(n),s=this.compiler||this.Compiler;return Um("stringify",s),kS(e),s(e,r)}use(e,...n){const r=this.attachers,s=this.namespace;if(qm("use",this.frozen),e!=null)if(typeof e=="function")f(e,n);else if(typeof e=="object")Array.isArray(e)?u(e):l(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function a(d){if(typeof d=="function")f(d,[]);else if(typeof d=="object")if(Array.isArray(d)){const[m,...p]=d;f(m,p)}else l(d);else throw new TypeError("Expected usable value, not `"+d+"`")}function l(d){if(!("plugins"in d)&&!("settings"in d))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");u(d.plugins),d.settings&&(s.settings=Lm(!0,s.settings,d.settings))}function u(d){let m=-1;if(d!=null)if(Array.isArray(d))for(;++m<d.length;){const p=d[m];a(p)}else throw new TypeError("Expected a list of plugins, not `"+d+"`")}function f(d,m){let p=-1,y=-1;for(;++p<r.length;)if(r[p][0]===d){y=p;break}if(y===-1)r.push([d,...m]);else if(m.length>0){let[g,...v]=m;const w=r[y][1];ey(w)&&ey(g)&&(g=Lm(!0,w,g)),r[y]=[d,g,...v]}}}}const iV=new S0().freeze();function $m(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `parser`")}function Um(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `compiler`")}function qm(t,e){if(e)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function kS(t){if(!ey(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}function ES(t,e,n){if(!n)throw new Error("`"+t+"` finished async. Use `"+e+"` instead")}function Gu(t){return aV(t)?t:new HC(t)}function aV(t){return!!(t&&typeof t=="object"&&"message"in t&&"messages"in t)}function oV(t){return typeof t=="string"||lV(t)}function lV(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const cV="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",CS=[],TS={allowDangerousHtml:!0},uV=/^(https?|ircs?|mailto|xmpp)$/i,fV=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function dV(t){const e=hV(t),n=pV(t);return mV(e.runSync(e.parse(n),n),t)}function hV(t){const e=t.rehypePlugins||CS,n=t.remarkPlugins||CS,r=t.remarkRehypeOptions?{...t.remarkRehypeOptions,...TS}:TS;return iV().use(KF).use(n).use(U7,r).use(e)}function pV(t){const e=t.children||"",n=new HC;return typeof e=="string"&&(n.value=e),n}function mV(t,e){const n=e.allowedElements,r=e.allowElement,s=e.components,a=e.disallowedElements,l=e.skipHtml,u=e.unwrapDisallowed,f=e.urlTransform||gV;for(const m of fV)Object.hasOwn(e,m.from)&&(""+m.from+(m.to?"use `"+m.to+"` instead":"remove it")+cV+m.id,void 0);return w0(t,d),Oq(t,{Fragment:x.Fragment,components:s,ignoreInvalidStyle:!0,jsx:x.jsx,jsxs:x.jsxs,passKeys:!0,passNode:!0});function d(m,p,y){if(m.type==="raw"&&y&&typeof p=="number")return l?y.children.splice(p,1):y.children[p]={type:"text",value:m.value},p;if(m.type==="element"){let g;for(g in Nm)if(Object.hasOwn(Nm,g)&&Object.hasOwn(m.properties,g)){const v=m.properties[g],w=Nm[g];(w===null||w.includes(m.tagName))&&(m.properties[g]=f(String(v||""),g,m))}}if(m.type==="element"){let g=n?!n.includes(m.tagName):a?a.includes(m.tagName):!1;if(!g&&r&&typeof p=="number"&&(g=!r(m,p,y)),g&&y&&typeof p=="number")return u&&m.children?y.children.splice(p,1,...m.children):y.children.splice(p,1),p}}}function gV(t){const e=t.indexOf(":"),n=t.indexOf("?"),r=t.indexOf("#"),s=t.indexOf("/");return e===-1||s!==-1&&e>s||n!==-1&&e>n||r!==-1&&e>r||uV.test(t.slice(0,e))?t:""}function yV(t){if(typeof t!="string")throw new TypeError("Expected a string");return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function GC(t,e,n){const s=Md((n||{}).ignore||[]),a=bV(e);let l=-1;for(;++l<a.length;)VC(t,"text",u);function u(d,m){let p=-1,y;for(;++p<m.length;){const g=m[p],v=y?y.children:void 0;if(s(g,v?v.indexOf(g):void 0,y))return;y=g}if(y)return f(d,m)}function f(d,m){const p=m[m.length-1],y=a[l][0],g=a[l][1];let v=0;const E=p.children.indexOf(d);let k=!1,C=[];y.lastIndex=0;let T=y.exec(d.value);for(;T;){const D=T.index,N={index:T.index,input:T.input,stack:[...m,d]};let R=g(...T,N);if(typeof R=="string"&&(R=R.length>0?{type:"text",value:R}:void 0),R===!1?y.lastIndex=D+1:(v!==D&&C.push({type:"text",value:d.value.slice(v,D)}),Array.isArray(R)?C.push(...R):R&&C.push(R),v=D+T[0].length,k=!0),!y.global)break;T=y.exec(d.value)}return k?(v<d.value.length&&C.push({type:"text",value:d.value.slice(v)}),p.children.splice(E,1,...C)):C=[d],E+C.length}}function bV(t){const e=[];if(!Array.isArray(t))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!t[0]||Array.isArray(t[0])?t:[t];let r=-1;for(;++r<n.length;){const s=n[r];e.push([_V(s[0]),vV(s[1])])}return e}function _V(t){return typeof t=="string"?new RegExp(yV(t),"g"):t}function vV(t){return typeof t=="function"?t:function(){return t}}const Fm="phrasing",Vm=["autolink","link","image","label"];function xV(){return{transforms:[AV],enter:{literalAutolink:SV,literalAutolinkEmail:Hm,literalAutolinkHttp:Hm,literalAutolinkWww:Hm},exit:{literalAutolink:TV,literalAutolinkEmail:CV,literalAutolinkHttp:kV,literalAutolinkWww:EV}}}function wV(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:Fm,notInConstruct:Vm},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:Fm,notInConstruct:Vm},{character:":",before:"[ps]",after:"\\/",inConstruct:Fm,notInConstruct:Vm}]}}function SV(t){this.enter({type:"link",title:null,url:"",children:[]},t)}function Hm(t){this.config.enter.autolinkProtocol.call(this,t)}function kV(t){this.config.exit.autolinkProtocol.call(this,t)}function EV(t){this.config.exit.data.call(this,t);const e=this.stack[this.stack.length-1];e.type,e.url="http://"+this.sliceSerialize(t)}function CV(t){this.config.exit.autolinkEmail.call(this,t)}function TV(t){this.exit(t)}function AV(t){GC(t,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,RV],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),OV]],{ignore:["link","linkReference"]})}function RV(t,e,n,r,s){let a="";if(!KC(s)||(/^w/i.test(e)&&(n=e+n,e="",a="http://"),!IV(n)))return!1;const l=NV(n+r);if(!l[0])return!1;const u={type:"link",title:null,url:a+e+l[0],children:[{type:"text",value:e+l[0]}]};return l[1]?[u,{type:"text",value:l[1]}]:u}function OV(t,e,n,r){return!KC(r,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+e+"@"+n,children:[{type:"text",value:e+"@"+n}]}}function IV(t){const e=t.split(".");return!(e.length<2||e[e.length-1]&&(/_/.test(e[e.length-1])||!/[a-zA-Z\d]/.test(e[e.length-1]))||e[e.length-2]&&(/_/.test(e[e.length-2])||!/[a-zA-Z\d]/.test(e[e.length-2])))}function NV(t){const e=/[!"&'),.:;<>?\]}]+$/.exec(t);if(!e)return[t,void 0];t=t.slice(0,e.index);let n=e[0],r=n.indexOf(")");const s=Bf(t,"(");let a=Bf(t,")");for(;r!==-1&&s>a;)t+=n.slice(0,r+1),n=n.slice(r+1),r=n.indexOf(")"),a++;return[t,n]}function KC(t,e){const n=t.input.charCodeAt(t.index-1);return(t.index===0||Hi(n)||Od(n))&&(!e||n!==47)}ZC.peek=UV;function MV(){this.buffer()}function DV(t){this.enter({type:"footnoteReference",identifier:"",label:""},t)}function jV(){this.buffer()}function LV(t){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},t)}function zV(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=qr(this.sliceSerialize(t)).toLowerCase(),n.label=e}function PV(t){this.exit(t)}function BV(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=qr(this.sliceSerialize(t)).toLowerCase(),n.label=e}function $V(t){this.exit(t)}function UV(){return"["}function ZC(t,e,n,r){const s=n.createTracker(r);let a=s.move("[^");const l=n.enter("footnoteReference"),u=n.enter("reference");return a+=s.move(n.safe(n.associationId(t),{after:"]",before:a})),u(),l(),a+=s.move("]"),a}function qV(){return{enter:{gfmFootnoteCallString:MV,gfmFootnoteCall:DV,gfmFootnoteDefinitionLabelString:jV,gfmFootnoteDefinition:LV},exit:{gfmFootnoteCallString:zV,gfmFootnoteCall:PV,gfmFootnoteDefinitionLabelString:BV,gfmFootnoteDefinition:$V}}}function FV(t){let e=!1;return t&&t.firstLineBlank&&(e=!0),{handlers:{footnoteDefinition:n,footnoteReference:ZC},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(r,s,a,l){const u=a.createTracker(l);let f=u.move("[^");const d=a.enter("footnoteDefinition"),m=a.enter("label");return f+=u.move(a.safe(a.associationId(r),{before:f,after:"]"})),m(),f+=u.move("]:"),r.children&&r.children.length>0&&(u.shift(4),f+=u.move((e?`
`:" ")+a.indentLines(a.containerFlow(r,u.current()),e?JC:VV))),d(),f}}function VV(t,e,n){return e===0?t:JC(t,e,n)}function JC(t,e,n){return(n?"":"    ")+t}const HV=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];QC.peek=QV;function GV(){return{canContainEols:["delete"],enter:{strikethrough:ZV},exit:{strikethrough:JV}}}function KV(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:HV}],handlers:{delete:QC}}}function ZV(t){this.enter({type:"delete",children:[]},t)}function JV(t){this.exit(t)}function QC(t,e,n,r){const s=n.createTracker(r),a=n.enter("strikethrough");let l=s.move("~~");return l+=n.containerPhrasing(t,{...s.current(),before:l,after:"~"}),l+=s.move("~~"),a(),l}function QV(){return"~"}function YV(t){return t.length}function WV(t,e){const n=e||{},r=(n.align||[]).concat(),s=n.stringLength||YV,a=[],l=[],u=[],f=[];let d=0,m=-1;for(;++m<t.length;){const w=[],E=[];let k=-1;for(t[m].length>d&&(d=t[m].length);++k<t[m].length;){const C=XV(t[m][k]);if(n.alignDelimiters!==!1){const T=s(C);E[k]=T,(f[k]===void 0||T>f[k])&&(f[k]=T)}w.push(C)}l[m]=w,u[m]=E}let p=-1;if(typeof r=="object"&&"length"in r)for(;++p<d;)a[p]=AS(r[p]);else{const w=AS(r);for(;++p<d;)a[p]=w}p=-1;const y=[],g=[];for(;++p<d;){const w=a[p];let E="",k="";w===99?(E=":",k=":"):w===108?E=":":w===114&&(k=":");let C=n.alignDelimiters===!1?1:Math.max(1,f[p]-E.length-k.length);const T=E+"-".repeat(C)+k;n.alignDelimiters!==!1&&(C=E.length+C+k.length,C>f[p]&&(f[p]=C),g[p]=C),y[p]=T}l.splice(1,0,y),u.splice(1,0,g),m=-1;const v=[];for(;++m<l.length;){const w=l[m],E=u[m];p=-1;const k=[];for(;++p<d;){const C=w[p]||"";let T="",D="";if(n.alignDelimiters!==!1){const N=f[p]-(E[p]||0),R=a[p];R===114?T=" ".repeat(N):R===99?N%2?(T=" ".repeat(N/2+.5),D=" ".repeat(N/2-.5)):(T=" ".repeat(N/2),D=T):D=" ".repeat(N)}n.delimiterStart!==!1&&!p&&k.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&C==="")&&(n.delimiterStart!==!1||p)&&k.push(" "),n.alignDelimiters!==!1&&k.push(T),k.push(C),n.alignDelimiters!==!1&&k.push(D),n.padding!==!1&&k.push(" "),(n.delimiterEnd!==!1||p!==d-1)&&k.push("|")}v.push(n.delimiterEnd===!1?k.join("").replace(/ +$/,""):k.join(""))}return v.join(`
`)}function XV(t){return t==null?"":String(t)}function AS(t){const e=typeof t=="string"?t.codePointAt(0):0;return e===67||e===99?99:e===76||e===108?108:e===82||e===114?114:0}function eH(t,e,n,r){const s=n.enter("blockquote"),a=n.createTracker(r);a.move("> "),a.shift(2);const l=n.indentLines(n.containerFlow(t,a.current()),tH);return s(),l}function tH(t,e,n){return">"+(n?"":" ")+t}function nH(t,e){return RS(t,e.inConstruct,!0)&&!RS(t,e.notInConstruct,!1)}function RS(t,e,n){if(typeof e=="string"&&(e=[e]),!e||e.length===0)return n;let r=-1;for(;++r<e.length;)if(t.includes(e[r]))return!0;return!1}function OS(t,e,n,r){let s=-1;for(;++s<n.unsafe.length;)if(n.unsafe[s].character===`
`&&nH(n.stack,n.unsafe[s]))return/[ \t]/.test(r.before)?"":" ";return`\\
`}function rH(t,e){const n=String(t);let r=n.indexOf(e),s=r,a=0,l=0;if(typeof e!="string")throw new TypeError("Expected substring");for(;r!==-1;)r===s?++a>l&&(l=a):a=1,s=r+e.length,r=n.indexOf(e,s);return l}function sH(t,e){return!!(e.options.fences===!1&&t.value&&!t.lang&&/[^ \r\n]/.test(t.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(t.value))}function iH(t){const e=t.options.fence||"`";if(e!=="`"&&e!=="~")throw new Error("Cannot serialize code with `"+e+"` for `options.fence`, expected `` ` `` or `~`");return e}function aH(t,e,n,r){const s=iH(n),a=t.value||"",l=s==="`"?"GraveAccent":"Tilde";if(sH(t,n)){const p=n.enter("codeIndented"),y=n.indentLines(a,oH);return p(),y}const u=n.createTracker(r),f=s.repeat(Math.max(rH(a,s)+1,3)),d=n.enter("codeFenced");let m=u.move(f);if(t.lang){const p=n.enter(`codeFencedLang${l}`);m+=u.move(n.safe(t.lang,{before:m,after:" ",encode:["`"],...u.current()})),p()}if(t.lang&&t.meta){const p=n.enter(`codeFencedMeta${l}`);m+=u.move(" "),m+=u.move(n.safe(t.meta,{before:m,after:`
`,encode:["`"],...u.current()})),p()}return m+=u.move(`
`),a&&(m+=u.move(a+`
`)),m+=u.move(f),d(),m}function oH(t,e,n){return(n?"":"    ")+t}function k0(t){const e=t.options.quote||'"';if(e!=='"'&&e!=="'")throw new Error("Cannot serialize title with `"+e+"` for `options.quote`, expected `\"`, or `'`");return e}function lH(t,e,n,r){const s=k0(n),a=s==='"'?"Quote":"Apostrophe",l=n.enter("definition");let u=n.enter("label");const f=n.createTracker(r);let d=f.move("[");return d+=f.move(n.safe(n.associationId(t),{before:d,after:"]",...f.current()})),d+=f.move("]: "),u(),!t.url||/[\0- \u007F]/.test(t.url)?(u=n.enter("destinationLiteral"),d+=f.move("<"),d+=f.move(n.safe(t.url,{before:d,after:">",...f.current()})),d+=f.move(">")):(u=n.enter("destinationRaw"),d+=f.move(n.safe(t.url,{before:d,after:t.title?" ":`
`,...f.current()}))),u(),t.title&&(u=n.enter(`title${a}`),d+=f.move(" "+s),d+=f.move(n.safe(t.title,{before:d,after:s,...f.current()})),d+=f.move(s),u()),l(),d}function cH(t){const e=t.options.emphasis||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize emphasis with `"+e+"` for `options.emphasis`, expected `*`, or `_`");return e}function ac(t){return"&#x"+t.toString(16).toUpperCase()+";"}function Xf(t,e,n){const r=oo(t),s=oo(e);return r===void 0?s===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:s===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:r===1?s===void 0?{inside:!1,outside:!1}:s===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:s===void 0?{inside:!1,outside:!1}:s===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}YC.peek=uH;function YC(t,e,n,r){const s=cH(n),a=n.enter("emphasis"),l=n.createTracker(r),u=l.move(s);let f=l.move(n.containerPhrasing(t,{after:s,before:u,...l.current()}));const d=f.charCodeAt(0),m=Xf(r.before.charCodeAt(r.before.length-1),d,s);m.inside&&(f=ac(d)+f.slice(1));const p=f.charCodeAt(f.length-1),y=Xf(r.after.charCodeAt(0),p,s);y.inside&&(f=f.slice(0,-1)+ac(p));const g=l.move(s);return a(),n.attentionEncodeSurroundingInfo={after:y.outside,before:m.outside},u+f+g}function uH(t,e,n){return n.options.emphasis||"*"}function fH(t,e){let n=!1;return w0(t,function(r){if("value"in r&&/\r?\n|\r/.test(r.value)||r.type==="break")return n=!0,Wg}),!!((!t.depth||t.depth<3)&&m0(t)&&(e.options.setext||n))}function dH(t,e,n,r){const s=Math.max(Math.min(6,t.depth||1),1),a=n.createTracker(r);if(fH(t,n)){const m=n.enter("headingSetext"),p=n.enter("phrasing"),y=n.containerPhrasing(t,{...a.current(),before:`
`,after:`
`});return p(),m(),y+`
`+(s===1?"=":"-").repeat(y.length-(Math.max(y.lastIndexOf("\r"),y.lastIndexOf(`
`))+1))}const l="#".repeat(s),u=n.enter("headingAtx"),f=n.enter("phrasing");a.move(l+" ");let d=n.containerPhrasing(t,{before:"# ",after:`
`,...a.current()});return/^[\t ]/.test(d)&&(d=ac(d.charCodeAt(0))+d.slice(1)),d=d?l+" "+d:l,n.options.closeAtx&&(d+=" "+l),f(),u(),d}WC.peek=hH;function WC(t){return t.value||""}function hH(){return"<"}XC.peek=pH;function XC(t,e,n,r){const s=k0(n),a=s==='"'?"Quote":"Apostrophe",l=n.enter("image");let u=n.enter("label");const f=n.createTracker(r);let d=f.move("![");return d+=f.move(n.safe(t.alt,{before:d,after:"]",...f.current()})),d+=f.move("]("),u(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(u=n.enter("destinationLiteral"),d+=f.move("<"),d+=f.move(n.safe(t.url,{before:d,after:">",...f.current()})),d+=f.move(">")):(u=n.enter("destinationRaw"),d+=f.move(n.safe(t.url,{before:d,after:t.title?" ":")",...f.current()}))),u(),t.title&&(u=n.enter(`title${a}`),d+=f.move(" "+s),d+=f.move(n.safe(t.title,{before:d,after:s,...f.current()})),d+=f.move(s),u()),d+=f.move(")"),l(),d}function pH(){return"!"}eT.peek=mH;function eT(t,e,n,r){const s=t.referenceType,a=n.enter("imageReference");let l=n.enter("label");const u=n.createTracker(r);let f=u.move("![");const d=n.safe(t.alt,{before:f,after:"]",...u.current()});f+=u.move(d+"]["),l();const m=n.stack;n.stack=[],l=n.enter("reference");const p=n.safe(n.associationId(t),{before:f,after:"]",...u.current()});return l(),n.stack=m,a(),s==="full"||!d||d!==p?f+=u.move(p+"]"):s==="shortcut"?f=f.slice(0,-1):f+=u.move("]"),f}function mH(){return"!"}tT.peek=gH;function tT(t,e,n){let r=t.value||"",s="`",a=-1;for(;new RegExp("(^|[^`])"+s+"([^`]|$)").test(r);)s+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++a<n.unsafe.length;){const l=n.unsafe[a],u=n.compilePattern(l);let f;if(l.atBreak)for(;f=u.exec(r);){let d=f.index;r.charCodeAt(d)===10&&r.charCodeAt(d-1)===13&&d--,r=r.slice(0,d)+" "+r.slice(f.index+1)}}return s+r+s}function gH(){return"`"}function nT(t,e){const n=m0(t);return!!(!e.options.resourceLink&&t.url&&!t.title&&t.children&&t.children.length===1&&t.children[0].type==="text"&&(n===t.url||"mailto:"+n===t.url)&&/^[a-z][a-z+.-]+:/i.test(t.url)&&!/[\0- <>\u007F]/.test(t.url))}rT.peek=yH;function rT(t,e,n,r){const s=k0(n),a=s==='"'?"Quote":"Apostrophe",l=n.createTracker(r);let u,f;if(nT(t,n)){const m=n.stack;n.stack=[],u=n.enter("autolink");let p=l.move("<");return p+=l.move(n.containerPhrasing(t,{before:p,after:">",...l.current()})),p+=l.move(">"),u(),n.stack=m,p}u=n.enter("link"),f=n.enter("label");let d=l.move("[");return d+=l.move(n.containerPhrasing(t,{before:d,after:"](",...l.current()})),d+=l.move("]("),f(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(f=n.enter("destinationLiteral"),d+=l.move("<"),d+=l.move(n.safe(t.url,{before:d,after:">",...l.current()})),d+=l.move(">")):(f=n.enter("destinationRaw"),d+=l.move(n.safe(t.url,{before:d,after:t.title?" ":")",...l.current()}))),f(),t.title&&(f=n.enter(`title${a}`),d+=l.move(" "+s),d+=l.move(n.safe(t.title,{before:d,after:s,...l.current()})),d+=l.move(s),f()),d+=l.move(")"),u(),d}function yH(t,e,n){return nT(t,n)?"<":"["}sT.peek=bH;function sT(t,e,n,r){const s=t.referenceType,a=n.enter("linkReference");let l=n.enter("label");const u=n.createTracker(r);let f=u.move("[");const d=n.containerPhrasing(t,{before:f,after:"]",...u.current()});f+=u.move(d+"]["),l();const m=n.stack;n.stack=[],l=n.enter("reference");const p=n.safe(n.associationId(t),{before:f,after:"]",...u.current()});return l(),n.stack=m,a(),s==="full"||!d||d!==p?f+=u.move(p+"]"):s==="shortcut"?f=f.slice(0,-1):f+=u.move("]"),f}function bH(){return"["}function E0(t){const e=t.options.bullet||"*";if(e!=="*"&&e!=="+"&&e!=="-")throw new Error("Cannot serialize items with `"+e+"` for `options.bullet`, expected `*`, `+`, or `-`");return e}function _H(t){const e=E0(t),n=t.options.bulletOther;if(!n)return e==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===e)throw new Error("Expected `bullet` (`"+e+"`) and `bulletOther` (`"+n+"`) to be different");return n}function vH(t){const e=t.options.bulletOrdered||".";if(e!=="."&&e!==")")throw new Error("Cannot serialize items with `"+e+"` for `options.bulletOrdered`, expected `.` or `)`");return e}function iT(t){const e=t.options.rule||"*";if(e!=="*"&&e!=="-"&&e!=="_")throw new Error("Cannot serialize rules with `"+e+"` for `options.rule`, expected `*`, `-`, or `_`");return e}function xH(t,e,n,r){const s=n.enter("list"),a=n.bulletCurrent;let l=t.ordered?vH(n):E0(n);const u=t.ordered?l==="."?")":".":_H(n);let f=e&&n.bulletLastUsed?l===n.bulletLastUsed:!1;if(!t.ordered){const m=t.children?t.children[0]:void 0;if((l==="*"||l==="-")&&m&&(!m.children||!m.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(f=!0),iT(n)===l&&m){let p=-1;for(;++p<t.children.length;){const y=t.children[p];if(y&&y.type==="listItem"&&y.children&&y.children[0]&&y.children[0].type==="thematicBreak"){f=!0;break}}}}f&&(l=u),n.bulletCurrent=l;const d=n.containerFlow(t,r);return n.bulletLastUsed=l,n.bulletCurrent=a,s(),d}function wH(t){const e=t.options.listItemIndent||"one";if(e!=="tab"&&e!=="one"&&e!=="mixed")throw new Error("Cannot serialize items with `"+e+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return e}function SH(t,e,n,r){const s=wH(n);let a=n.bulletCurrent||E0(n);e&&e.type==="list"&&e.ordered&&(a=(typeof e.start=="number"&&e.start>-1?e.start:1)+(n.options.incrementListMarker===!1?0:e.children.indexOf(t))+a);let l=a.length+1;(s==="tab"||s==="mixed"&&(e&&e.type==="list"&&e.spread||t.spread))&&(l=Math.ceil(l/4)*4);const u=n.createTracker(r);u.move(a+" ".repeat(l-a.length)),u.shift(l);const f=n.enter("listItem"),d=n.indentLines(n.containerFlow(t,u.current()),m);return f(),d;function m(p,y,g){return y?(g?"":" ".repeat(l))+p:(g?a:a+" ".repeat(l-a.length))+p}}function kH(t,e,n,r){const s=n.enter("paragraph"),a=n.enter("phrasing"),l=n.containerPhrasing(t,r);return a(),s(),l}const EH=Md(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function CH(t,e,n,r){return(t.children.some(function(l){return EH(l)})?n.containerPhrasing:n.containerFlow).call(n,t,r)}function TH(t){const e=t.options.strong||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize strong with `"+e+"` for `options.strong`, expected `*`, or `_`");return e}aT.peek=AH;function aT(t,e,n,r){const s=TH(n),a=n.enter("strong"),l=n.createTracker(r),u=l.move(s+s);let f=l.move(n.containerPhrasing(t,{after:s,before:u,...l.current()}));const d=f.charCodeAt(0),m=Xf(r.before.charCodeAt(r.before.length-1),d,s);m.inside&&(f=ac(d)+f.slice(1));const p=f.charCodeAt(f.length-1),y=Xf(r.after.charCodeAt(0),p,s);y.inside&&(f=f.slice(0,-1)+ac(p));const g=l.move(s+s);return a(),n.attentionEncodeSurroundingInfo={after:y.outside,before:m.outside},u+f+g}function AH(t,e,n){return n.options.strong||"*"}function RH(t,e,n,r){return n.safe(t.value,r)}function OH(t){const e=t.options.ruleRepetition||3;if(e<3)throw new Error("Cannot serialize rules with repetition `"+e+"` for `options.ruleRepetition`, expected `3` or more");return e}function IH(t,e,n){const r=(iT(n)+(n.options.ruleSpaces?" ":"")).repeat(OH(n));return n.options.ruleSpaces?r.slice(0,-1):r}const oT={blockquote:eH,break:OS,code:aH,definition:lH,emphasis:YC,hardBreak:OS,heading:dH,html:WC,image:XC,imageReference:eT,inlineCode:tT,link:rT,linkReference:sT,list:xH,listItem:SH,paragraph:kH,root:CH,strong:aT,text:RH,thematicBreak:IH};function NH(){return{enter:{table:MH,tableData:IS,tableHeader:IS,tableRow:jH},exit:{codeText:LH,table:DH,tableData:Gm,tableHeader:Gm,tableRow:Gm}}}function MH(t){const e=t._align;this.enter({type:"table",align:e.map(function(n){return n==="none"?null:n}),children:[]},t),this.data.inTable=!0}function DH(t){this.exit(t),this.data.inTable=void 0}function jH(t){this.enter({type:"tableRow",children:[]},t)}function Gm(t){this.exit(t)}function IS(t){this.enter({type:"tableCell",children:[]},t)}function LH(t){let e=this.resume();this.data.inTable&&(e=e.replace(/\\([\\|])/g,zH));const n=this.stack[this.stack.length-1];n.type,n.value=e,this.exit(t)}function zH(t,e){return e==="|"?e:t}function PH(t){const e=t||{},n=e.tableCellPadding,r=e.tablePipeAlign,s=e.stringLength,a=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:y,table:l,tableCell:f,tableRow:u}};function l(g,v,w,E){return d(m(g,w,E),g.align)}function u(g,v,w,E){const k=p(g,w,E),C=d([k]);return C.slice(0,C.indexOf(`
`))}function f(g,v,w,E){const k=w.enter("tableCell"),C=w.enter("phrasing"),T=w.containerPhrasing(g,{...E,before:a,after:a});return C(),k(),T}function d(g,v){return WV(g,{align:v,alignDelimiters:r,padding:n,stringLength:s})}function m(g,v,w){const E=g.children;let k=-1;const C=[],T=v.enter("table");for(;++k<E.length;)C[k]=p(E[k],v,w);return T(),C}function p(g,v,w){const E=g.children;let k=-1;const C=[],T=v.enter("tableRow");for(;++k<E.length;)C[k]=f(E[k],g,v,w);return T(),C}function y(g,v,w){let E=oT.inlineCode(g,v,w);return w.stack.includes("tableCell")&&(E=E.replace(/\|/g,"\\$&")),E}}function BH(){return{exit:{taskListCheckValueChecked:NS,taskListCheckValueUnchecked:NS,paragraph:UH}}}function $H(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:qH}}}function NS(t){const e=this.stack[this.stack.length-2];e.type,e.checked=t.type==="taskListCheckValueChecked"}function UH(t){const e=this.stack[this.stack.length-2];if(e&&e.type==="listItem"&&typeof e.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const r=n.children[0];if(r&&r.type==="text"){const s=e.children;let a=-1,l;for(;++a<s.length;){const u=s[a];if(u.type==="paragraph"){l=u;break}}l===n&&(r.value=r.value.slice(1),r.value.length===0?n.children.shift():n.position&&r.position&&typeof r.position.start.offset=="number"&&(r.position.start.column++,r.position.start.offset++,n.position.start=Object.assign({},r.position.start)))}}this.exit(t)}function qH(t,e,n,r){const s=t.children[0],a=typeof t.checked=="boolean"&&s&&s.type==="paragraph",l="["+(t.checked?"x":" ")+"] ",u=n.createTracker(r);a&&u.move(l);let f=oT.listItem(t,e,n,{...r,...u.current()});return a&&(f=f.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,d)),f;function d(m){return m+l}}function FH(){return[xV(),qV(),GV(),NH(),BH()]}function VH(t){return{extensions:[wV(),FV(t),KV(),PH(t),$H()]}}const HH={tokenize:YH,partial:!0},lT={tokenize:WH,partial:!0},cT={tokenize:XH,partial:!0},uT={tokenize:eG,partial:!0},GH={tokenize:tG,partial:!0},fT={name:"wwwAutolink",tokenize:JH,previous:hT},dT={name:"protocolAutolink",tokenize:QH,previous:pT},Ts={name:"emailAutolink",tokenize:ZH,previous:mT},rs={};function KH(){return{text:rs}}let Di=48;for(;Di<123;)rs[Di]=Ts,Di++,Di===58?Di=65:Di===91&&(Di=97);rs[43]=Ts;rs[45]=Ts;rs[46]=Ts;rs[95]=Ts;rs[72]=[Ts,dT];rs[104]=[Ts,dT];rs[87]=[Ts,fT];rs[119]=[Ts,fT];function ZH(t,e,n){const r=this;let s,a;return l;function l(p){return!ny(p)||!mT.call(r,r.previous)||C0(r.events)?n(p):(t.enter("literalAutolink"),t.enter("literalAutolinkEmail"),u(p))}function u(p){return ny(p)?(t.consume(p),u):p===64?(t.consume(p),f):n(p)}function f(p){return p===46?t.check(GH,m,d)(p):p===45||p===95||Rn(p)?(a=!0,t.consume(p),f):m(p)}function d(p){return t.consume(p),s=!0,f}function m(p){return a&&s&&Pn(r.previous)?(t.exit("literalAutolinkEmail"),t.exit("literalAutolink"),e(p)):n(p)}}function JH(t,e,n){const r=this;return s;function s(l){return l!==87&&l!==119||!hT.call(r,r.previous)||C0(r.events)?n(l):(t.enter("literalAutolink"),t.enter("literalAutolinkWww"),t.check(HH,t.attempt(lT,t.attempt(cT,a),n),n)(l))}function a(l){return t.exit("literalAutolinkWww"),t.exit("literalAutolink"),e(l)}}function QH(t,e,n){const r=this;let s="",a=!1;return l;function l(p){return(p===72||p===104)&&pT.call(r,r.previous)&&!C0(r.events)?(t.enter("literalAutolink"),t.enter("literalAutolinkHttp"),s+=String.fromCodePoint(p),t.consume(p),u):n(p)}function u(p){if(Pn(p)&&s.length<5)return s+=String.fromCodePoint(p),t.consume(p),u;if(p===58){const y=s.toLowerCase();if(y==="http"||y==="https")return t.consume(p),f}return n(p)}function f(p){return p===47?(t.consume(p),a?d:(a=!0,f)):n(p)}function d(p){return p===null||Qf(p)||wt(p)||Hi(p)||Od(p)?n(p):t.attempt(lT,t.attempt(cT,m),n)(p)}function m(p){return t.exit("literalAutolinkHttp"),t.exit("literalAutolink"),e(p)}}function YH(t,e,n){let r=0;return s;function s(l){return(l===87||l===119)&&r<3?(r++,t.consume(l),s):l===46&&r===3?(t.consume(l),a):n(l)}function a(l){return l===null?n(l):e(l)}}function WH(t,e,n){let r,s,a;return l;function l(d){return d===46||d===95?t.check(uT,f,u)(d):d===null||wt(d)||Hi(d)||d!==45&&Od(d)?f(d):(a=!0,t.consume(d),l)}function u(d){return d===95?r=!0:(s=r,r=void 0),t.consume(d),l}function f(d){return s||r||!a?n(d):e(d)}}function XH(t,e){let n=0,r=0;return s;function s(l){return l===40?(n++,t.consume(l),s):l===41&&r<n?a(l):l===33||l===34||l===38||l===39||l===41||l===42||l===44||l===46||l===58||l===59||l===60||l===63||l===93||l===95||l===126?t.check(uT,e,a)(l):l===null||wt(l)||Hi(l)?e(l):(t.consume(l),s)}function a(l){return l===41&&r++,t.consume(l),s}}function eG(t,e,n){return r;function r(u){return u===33||u===34||u===39||u===41||u===42||u===44||u===46||u===58||u===59||u===63||u===95||u===126?(t.consume(u),r):u===38?(t.consume(u),a):u===93?(t.consume(u),s):u===60||u===null||wt(u)||Hi(u)?e(u):n(u)}function s(u){return u===null||u===40||u===91||wt(u)||Hi(u)?e(u):r(u)}function a(u){return Pn(u)?l(u):n(u)}function l(u){return u===59?(t.consume(u),r):Pn(u)?(t.consume(u),l):n(u)}}function tG(t,e,n){return r;function r(a){return t.consume(a),s}function s(a){return Rn(a)?n(a):e(a)}}function hT(t){return t===null||t===40||t===42||t===95||t===91||t===93||t===126||wt(t)}function pT(t){return!Pn(t)}function mT(t){return!(t===47||ny(t))}function ny(t){return t===43||t===45||t===46||t===95||Rn(t)}function C0(t){let e=t.length,n=!1;for(;e--;){const r=t[e][1];if((r.type==="labelLink"||r.type==="labelImage")&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return t.length>0&&!n&&(t[t.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const nG={tokenize:uG,partial:!0};function rG(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:oG,continuation:{tokenize:lG},exit:cG}},text:{91:{name:"gfmFootnoteCall",tokenize:aG},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:sG,resolveTo:iG}}}}function sG(t,e,n){const r=this;let s=r.events.length;const a=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let l;for(;s--;){const f=r.events[s][1];if(f.type==="labelImage"){l=f;break}if(f.type==="gfmFootnoteCall"||f.type==="labelLink"||f.type==="label"||f.type==="image"||f.type==="link")break}return u;function u(f){if(!l||!l._balanced)return n(f);const d=qr(r.sliceSerialize({start:l.end,end:r.now()}));return d.codePointAt(0)!==94||!a.includes(d.slice(1))?n(f):(t.enter("gfmFootnoteCallLabelMarker"),t.consume(f),t.exit("gfmFootnoteCallLabelMarker"),e(f))}}function iG(t,e){let n=t.length;for(;n--;)if(t[n][1].type==="labelImage"&&t[n][0]==="enter"){t[n][1];break}t[n+1][1].type="data",t[n+3][1].type="gfmFootnoteCallLabelMarker";const r={type:"gfmFootnoteCall",start:Object.assign({},t[n+3][1].start),end:Object.assign({},t[t.length-1][1].end)},s={type:"gfmFootnoteCallMarker",start:Object.assign({},t[n+3][1].end),end:Object.assign({},t[n+3][1].end)};s.end.column++,s.end.offset++,s.end._bufferIndex++;const a={type:"gfmFootnoteCallString",start:Object.assign({},s.end),end:Object.assign({},t[t.length-1][1].start)},l={type:"chunkString",contentType:"string",start:Object.assign({},a.start),end:Object.assign({},a.end)},u=[t[n+1],t[n+2],["enter",r,e],t[n+3],t[n+4],["enter",s,e],["exit",s,e],["enter",a,e],["enter",l,e],["exit",l,e],["exit",a,e],t[t.length-2],t[t.length-1],["exit",r,e]];return t.splice(n,t.length-n+1,...u),t}function aG(t,e,n){const r=this,s=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let a=0,l;return u;function u(p){return t.enter("gfmFootnoteCall"),t.enter("gfmFootnoteCallLabelMarker"),t.consume(p),t.exit("gfmFootnoteCallLabelMarker"),f}function f(p){return p!==94?n(p):(t.enter("gfmFootnoteCallMarker"),t.consume(p),t.exit("gfmFootnoteCallMarker"),t.enter("gfmFootnoteCallString"),t.enter("chunkString").contentType="string",d)}function d(p){if(a>999||p===93&&!l||p===null||p===91||wt(p))return n(p);if(p===93){t.exit("chunkString");const y=t.exit("gfmFootnoteCallString");return s.includes(qr(r.sliceSerialize(y)))?(t.enter("gfmFootnoteCallLabelMarker"),t.consume(p),t.exit("gfmFootnoteCallLabelMarker"),t.exit("gfmFootnoteCall"),e):n(p)}return wt(p)||(l=!0),a++,t.consume(p),p===92?m:d}function m(p){return p===91||p===92||p===93?(t.consume(p),a++,d):d(p)}}function oG(t,e,n){const r=this,s=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let a,l=0,u;return f;function f(v){return t.enter("gfmFootnoteDefinition")._container=!0,t.enter("gfmFootnoteDefinitionLabel"),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(v),t.exit("gfmFootnoteDefinitionLabelMarker"),d}function d(v){return v===94?(t.enter("gfmFootnoteDefinitionMarker"),t.consume(v),t.exit("gfmFootnoteDefinitionMarker"),t.enter("gfmFootnoteDefinitionLabelString"),t.enter("chunkString").contentType="string",m):n(v)}function m(v){if(l>999||v===93&&!u||v===null||v===91||wt(v))return n(v);if(v===93){t.exit("chunkString");const w=t.exit("gfmFootnoteDefinitionLabelString");return a=qr(r.sliceSerialize(w)),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(v),t.exit("gfmFootnoteDefinitionLabelMarker"),t.exit("gfmFootnoteDefinitionLabel"),y}return wt(v)||(u=!0),l++,t.consume(v),v===92?p:m}function p(v){return v===91||v===92||v===93?(t.consume(v),l++,m):m(v)}function y(v){return v===58?(t.enter("definitionMarker"),t.consume(v),t.exit("definitionMarker"),s.includes(a)||s.push(a),rt(t,g,"gfmFootnoteDefinitionWhitespace")):n(v)}function g(v){return e(v)}}function lG(t,e,n){return t.check(mc,e,t.attempt(nG,e,n))}function cG(t){t.exit("gfmFootnoteDefinition")}function uG(t,e,n){const r=this;return rt(t,s,"gfmFootnoteDefinitionIndent",5);function s(a){const l=r.events[r.events.length-1];return l&&l[1].type==="gfmFootnoteDefinitionIndent"&&l[2].sliceSerialize(l[1],!0).length===4?e(a):n(a)}}function fG(t){let n=(t||{}).singleTilde;const r={name:"strikethrough",tokenize:a,resolveAll:s};return n==null&&(n=!0),{text:{126:r},insideSpan:{null:[r]},attentionMarkers:{null:[126]}};function s(l,u){let f=-1;for(;++f<l.length;)if(l[f][0]==="enter"&&l[f][1].type==="strikethroughSequenceTemporary"&&l[f][1]._close){let d=f;for(;d--;)if(l[d][0]==="exit"&&l[d][1].type==="strikethroughSequenceTemporary"&&l[d][1]._open&&l[f][1].end.offset-l[f][1].start.offset===l[d][1].end.offset-l[d][1].start.offset){l[f][1].type="strikethroughSequence",l[d][1].type="strikethroughSequence";const m={type:"strikethrough",start:Object.assign({},l[d][1].start),end:Object.assign({},l[f][1].end)},p={type:"strikethroughText",start:Object.assign({},l[d][1].end),end:Object.assign({},l[f][1].start)},y=[["enter",m,u],["enter",l[d][1],u],["exit",l[d][1],u],["enter",p,u]],g=u.parser.constructs.insideSpan.null;g&&mr(y,y.length,0,Id(g,l.slice(d+1,f),u)),mr(y,y.length,0,[["exit",p,u],["enter",l[f][1],u],["exit",l[f][1],u],["exit",m,u]]),mr(l,d-1,f-d+3,y),f=d+y.length-2;break}}for(f=-1;++f<l.length;)l[f][1].type==="strikethroughSequenceTemporary"&&(l[f][1].type="data");return l}function a(l,u,f){const d=this.previous,m=this.events;let p=0;return y;function y(v){return d===126&&m[m.length-1][1].type!=="characterEscape"?f(v):(l.enter("strikethroughSequenceTemporary"),g(v))}function g(v){const w=oo(d);if(v===126)return p>1?f(v):(l.consume(v),p++,g);if(p<2&&!n)return f(v);const E=l.exit("strikethroughSequenceTemporary"),k=oo(v);return E._open=!k||k===2&&!!w,E._close=!w||w===2&&!!k,u(v)}}}class dG{constructor(){this.map=[]}add(e,n,r){hG(this,e,n,r)}consume(e){if(this.map.sort(function(a,l){return a[0]-l[0]}),this.map.length===0)return;let n=this.map.length;const r=[];for(;n>0;)n-=1,r.push(e.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),e.length=this.map[n][0];r.push(e.slice()),e.length=0;let s=r.pop();for(;s;){for(const a of s)e.push(a);s=r.pop()}this.map.length=0}}function hG(t,e,n,r){let s=0;if(!(n===0&&r.length===0)){for(;s<t.map.length;){if(t.map[s][0]===e){t.map[s][1]+=n,t.map[s][2].push(...r);return}s+=1}t.map.push([e,n,r])}}function pG(t,e){let n=!1;const r=[];for(;e<t.length;){const s=t[e];if(n){if(s[0]==="enter")s[1].type==="tableContent"&&r.push(t[e+1][1].type==="tableDelimiterMarker"?"left":"none");else if(s[1].type==="tableContent"){if(t[e-1][1].type==="tableDelimiterMarker"){const a=r.length-1;r[a]=r[a]==="left"?"center":"right"}}else if(s[1].type==="tableDelimiterRow")break}else s[0]==="enter"&&s[1].type==="tableDelimiterRow"&&(n=!0);e+=1}return r}function mG(){return{flow:{null:{name:"table",tokenize:gG,resolveAll:yG}}}}function gG(t,e,n){const r=this;let s=0,a=0,l;return u;function u(M){let Q=r.events.length-1;for(;Q>-1;){const X=r.events[Q][1].type;if(X==="lineEnding"||X==="linePrefix")Q--;else break}const ne=Q>-1?r.events[Q][1].type:null,ye=ne==="tableHead"||ne==="tableRow"?R:f;return ye===R&&r.parser.lazy[r.now().line]?n(M):ye(M)}function f(M){return t.enter("tableHead"),t.enter("tableRow"),d(M)}function d(M){return M===124||(l=!0,a+=1),m(M)}function m(M){return M===null?n(M):De(M)?a>1?(a=0,r.interrupt=!0,t.exit("tableRow"),t.enter("lineEnding"),t.consume(M),t.exit("lineEnding"),g):n(M):Ze(M)?rt(t,m,"whitespace")(M):(a+=1,l&&(l=!1,s+=1),M===124?(t.enter("tableCellDivider"),t.consume(M),t.exit("tableCellDivider"),l=!0,m):(t.enter("data"),p(M)))}function p(M){return M===null||M===124||wt(M)?(t.exit("data"),m(M)):(t.consume(M),M===92?y:p)}function y(M){return M===92||M===124?(t.consume(M),p):p(M)}function g(M){return r.interrupt=!1,r.parser.lazy[r.now().line]?n(M):(t.enter("tableDelimiterRow"),l=!1,Ze(M)?rt(t,v,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(M):v(M))}function v(M){return M===45||M===58?E(M):M===124?(l=!0,t.enter("tableCellDivider"),t.consume(M),t.exit("tableCellDivider"),w):N(M)}function w(M){return Ze(M)?rt(t,E,"whitespace")(M):E(M)}function E(M){return M===58?(a+=1,l=!0,t.enter("tableDelimiterMarker"),t.consume(M),t.exit("tableDelimiterMarker"),k):M===45?(a+=1,k(M)):M===null||De(M)?D(M):N(M)}function k(M){return M===45?(t.enter("tableDelimiterFiller"),C(M)):N(M)}function C(M){return M===45?(t.consume(M),C):M===58?(l=!0,t.exit("tableDelimiterFiller"),t.enter("tableDelimiterMarker"),t.consume(M),t.exit("tableDelimiterMarker"),T):(t.exit("tableDelimiterFiller"),T(M))}function T(M){return Ze(M)?rt(t,D,"whitespace")(M):D(M)}function D(M){return M===124?v(M):M===null||De(M)?!l||s!==a?N(M):(t.exit("tableDelimiterRow"),t.exit("tableHead"),e(M)):N(M)}function N(M){return n(M)}function R(M){return t.enter("tableRow"),$(M)}function $(M){return M===124?(t.enter("tableCellDivider"),t.consume(M),t.exit("tableCellDivider"),$):M===null||De(M)?(t.exit("tableRow"),e(M)):Ze(M)?rt(t,$,"whitespace")(M):(t.enter("data"),q(M))}function q(M){return M===null||M===124||wt(M)?(t.exit("data"),$(M)):(t.consume(M),M===92?H:q)}function H(M){return M===92||M===124?(t.consume(M),q):q(M)}}function yG(t,e){let n=-1,r=!0,s=0,a=[0,0,0,0],l=[0,0,0,0],u=!1,f=0,d,m,p;const y=new dG;for(;++n<t.length;){const g=t[n],v=g[1];g[0]==="enter"?v.type==="tableHead"?(u=!1,f!==0&&(MS(y,e,f,d,m),m=void 0,f=0),d={type:"table",start:Object.assign({},v.start),end:Object.assign({},v.end)},y.add(n,0,[["enter",d,e]])):v.type==="tableRow"||v.type==="tableDelimiterRow"?(r=!0,p=void 0,a=[0,0,0,0],l=[0,n+1,0,0],u&&(u=!1,m={type:"tableBody",start:Object.assign({},v.start),end:Object.assign({},v.end)},y.add(n,0,[["enter",m,e]])),s=v.type==="tableDelimiterRow"?2:m?3:1):s&&(v.type==="data"||v.type==="tableDelimiterMarker"||v.type==="tableDelimiterFiller")?(r=!1,l[2]===0&&(a[1]!==0&&(l[0]=l[1],p=Ku(y,e,a,s,void 0,p),a=[0,0,0,0]),l[2]=n)):v.type==="tableCellDivider"&&(r?r=!1:(a[1]!==0&&(l[0]=l[1],p=Ku(y,e,a,s,void 0,p)),a=l,l=[a[1],n,0,0])):v.type==="tableHead"?(u=!0,f=n):v.type==="tableRow"||v.type==="tableDelimiterRow"?(f=n,a[1]!==0?(l[0]=l[1],p=Ku(y,e,a,s,n,p)):l[1]!==0&&(p=Ku(y,e,l,s,n,p)),s=0):s&&(v.type==="data"||v.type==="tableDelimiterMarker"||v.type==="tableDelimiterFiller")&&(l[3]=n)}for(f!==0&&MS(y,e,f,d,m),y.consume(e.events),n=-1;++n<e.events.length;){const g=e.events[n];g[0]==="enter"&&g[1].type==="table"&&(g[1]._align=pG(e.events,n))}return t}function Ku(t,e,n,r,s,a){const l=r===1?"tableHeader":r===2?"tableDelimiter":"tableData",u="tableContent";n[0]!==0&&(a.end=Object.assign({},qa(e.events,n[0])),t.add(n[0],0,[["exit",a,e]]));const f=qa(e.events,n[1]);if(a={type:l,start:Object.assign({},f),end:Object.assign({},f)},t.add(n[1],0,[["enter",a,e]]),n[2]!==0){const d=qa(e.events,n[2]),m=qa(e.events,n[3]),p={type:u,start:Object.assign({},d),end:Object.assign({},m)};if(t.add(n[2],0,[["enter",p,e]]),r!==2){const y=e.events[n[2]],g=e.events[n[3]];if(y[1].end=Object.assign({},g[1].end),y[1].type="chunkText",y[1].contentType="text",n[3]>n[2]+1){const v=n[2]+1,w=n[3]-n[2]-1;t.add(v,w,[])}}t.add(n[3]+1,0,[["exit",p,e]])}return s!==void 0&&(a.end=Object.assign({},qa(e.events,s)),t.add(s,0,[["exit",a,e]]),a=void 0),a}function MS(t,e,n,r,s){const a=[],l=qa(e.events,n);s&&(s.end=Object.assign({},l),a.push(["exit",s,e])),r.end=Object.assign({},l),a.push(["exit",r,e]),t.add(n+1,0,a)}function qa(t,e){const n=t[e],r=n[0]==="enter"?"start":"end";return n[1][r]}const bG={name:"tasklistCheck",tokenize:vG};function _G(){return{text:{91:bG}}}function vG(t,e,n){const r=this;return s;function s(f){return r.previous!==null||!r._gfmTasklistFirstContentOfListItem?n(f):(t.enter("taskListCheck"),t.enter("taskListCheckMarker"),t.consume(f),t.exit("taskListCheckMarker"),a)}function a(f){return wt(f)?(t.enter("taskListCheckValueUnchecked"),t.consume(f),t.exit("taskListCheckValueUnchecked"),l):f===88||f===120?(t.enter("taskListCheckValueChecked"),t.consume(f),t.exit("taskListCheckValueChecked"),l):n(f)}function l(f){return f===93?(t.enter("taskListCheckMarker"),t.consume(f),t.exit("taskListCheckMarker"),t.exit("taskListCheck"),u):n(f)}function u(f){return De(f)?e(f):Ze(f)?t.check({tokenize:xG},e,n)(f):n(f)}}function xG(t,e,n){return rt(t,r,"whitespace");function r(s){return s===null?n(s):e(s)}}function wG(t){return EC([KH(),rG(),fG(t),mG(),_G()])}const SG={};function kG(t){const e=this,n=t||SG,r=e.data(),s=r.micromarkExtensions||(r.micromarkExtensions=[]),a=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),l=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);s.push(wG(n)),a.push(FH()),l.push(VH(n))}function EG(t){GC(t,[/\r?\n|\r/g,CG])}function CG(){return{type:"break"}}function TG(){return function(t){EG(t)}}const AG={pre:({children:t})=>x.jsx(x.Fragment,{children:t}),li:({children:t,...e})=>x.jsx("li",{className:"py-0.5 ml-0",...e,children:t}),ul:({children:t,...e})=>x.jsx("ul",{className:"list-disc list-outside ml-5 pl-0 my-2",...e,children:t}),ol:({children:t,...e})=>x.jsx("ol",{className:"list-decimal list-outside ml-5 pl-0 my-2",...e,children:t}),strong:({children:t,...e})=>x.jsx("span",{className:"font-semibold",...e,children:t}),a:({children:t,href:e,...n})=>{let r=e||"";return r&&!r.startsWith("http")&&!r.startsWith("#")&&(r=`https://${r}`),x.jsx("a",{className:"text-sky-400 hover:underline",href:r,target:"_blank",rel:"noreferrer noopener",...n,children:t})},h1:({children:t,...e})=>x.jsx("h1",{className:"text-xl font-semibold mt-4 mb-2",...e,children:t}),h2:({children:t,...e})=>x.jsx("h2",{className:"text-lg font-semibold mt-4 mb-2",...e,children:t}),h3:({children:t,...e})=>x.jsx("h3",{className:"text-base font-semibold mt-3 mb-1",...e,children:t}),h4:({children:t,...e})=>x.jsx("h4",{className:"text-sm font-semibold mt-3 mb-1",...e,children:t}),h5:({children:t,...e})=>x.jsx("h5",{className:"text-sm font-semibold mt-2 mb-1",...e,children:t}),h6:({children:t,...e})=>x.jsx("h6",{className:"text-xs font-semibold mt-2 mb-1",...e,children:t}),p:({children:t,...e})=>x.jsx("p",{className:"my-2 leading-relaxed",...e,children:t}),table:({children:t,...e})=>x.jsx("div",{className:"overflow-x-auto my-3",children:x.jsx("table",{className:"w-full border-collapse border border-neutral-600 text-xs",...e,children:t})}),thead:({children:t,...e})=>x.jsx("thead",{className:"bg-neutral-700",...e,children:t}),tbody:({children:t,...e})=>x.jsx("tbody",{...e,children:t}),tr:({children:t,...e})=>x.jsx("tr",{className:"border-b border-neutral-600",...e,children:t}),th:({children:t,...e})=>x.jsx("th",{className:"p-2 text-left font-semibold border-r last:border-r-0 border-neutral-600",...e,children:t}),td:({children:t,...e})=>x.jsx("td",{className:"p-2 border-r last:border-r-0 border-neutral-600",...e,children:t}),blockquote:({children:t,...e})=>x.jsx("blockquote",{className:"border-l-4 border-neutral-500 pl-3 py-1 my-2 italic text-neutral-300",...e,children:t}),hr:({...t})=>x.jsx("hr",{className:"my-4 border-neutral-600",...t}),code({children:t,className:e,...n}){const r=/language-(\w+)/.exec(e||""),s=String(t).replace(/\n$/,""),a=s.includes(`
`);if(!r&&!a)return x.jsx("code",{...n,className:`${e||""} bg-neutral-700 px-1.5 py-0.5 rounded text-xs font-mono text-sky-300`,children:t});const l=r?.[1]||"text";return x.jsxs("div",{className:"my-3",children:[x.jsx("div",{className:"flex items-center justify-between bg-neutral-700 px-3 py-1 rounded-t text-xs text-neutral-400",children:x.jsx("span",{children:l})}),x.jsx("pre",{className:"bg-neutral-800 p-3 rounded-b overflow-x-auto",children:x.jsx("code",{className:"text-xs font-mono text-neutral-200",children:s})})]})}},RG=[kG,TG],OG=t=>{const e=$e.c(6),{children:n}=t;if(!n)return null;let r=n,s;if(e[0]!==r){r=r.replace(/^(#{1,6}\s+.+)\n```/gm,"$1\n\n```");let l;e[3]===Symbol.for("react.memo_cache_sentinel")?(l=/```\n(#{1,6}\s+)/gm,e[3]=l):l=e[3],s=r.replace(l,"```\n\n$1"),e[0]=r,e[1]=s,e[2]=r}else s=e[1],r=e[2];r=s;let a;return e[4]!==r?(a=x.jsx(dV,{remarkPlugins:RG,components:AG,children:r}),e[4]=r,e[5]=a):a=e[5],a},gT=Z.memo(OG,(t,e)=>t.children===e.children);function DS(t,e="image/png"){const n=atob(t),r=new Array(n.length);for(let a=0;a<n.length;a++)r[a]=n.charCodeAt(a);const s=new Uint8Array(r);return new Blob([s],{type:e})}function IG(){const t=$e.c(28),{request:e}=tn(),n=e?.openai?.response,r=n?.result;let s;e:{if(!r||r.type!=="image"||!r.image){s=null;break e}if(!r.image.startsWith("http")){let d;if(t[0]!==r.image){const m=DS(r.image,"image/png");d=URL.createObjectURL(m),t[0]=r.image,t[1]=d}else d=t[1];s=d;break e}s=r.image}const a=s;let l;e:{if(!r||r.type!=="audio"||!r.audio){l=null;break e}let d;if(t[2]!==r.audio){const m=DS(r.audio,"audio/mpeg");d=URL.createObjectURL(m),t[2]=r.audio,t[3]=d}else d=t[3];l=d}const u=l;if(!n)return null;if(!r){let d;return t[4]===Symbol.for("react.memo_cache_sentinel")?(d=x.jsx("div",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:"No response data"}),t[4]=d):d=t[4],d}if(r.type==="text"){let d;return t[5]!==r.text?(d=x.jsx("div",{className:"h-full overflow-auto",children:x.jsx("div",{className:"prose prose-sm dark:prose-invert max-w-none prose-pre:bg-neutral-100 dark:prose-pre:bg-neutral-800 prose-pre:text-neutral-800 dark:prose-pre:text-neutral-200 prose-code:text-violet-600 dark:prose-code:text-violet-400 prose-code:before:content-none prose-code:after:content-none",children:x.jsx(gT,{children:r.text})})}),t[5]=r.text,t[6]=d):d=t[6],d}if(r.type==="image"){if(!r.image){let p;return t[7]===Symbol.for("react.memo_cache_sentinel")?(p=x.jsx("div",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:"No image data"}),t[7]=p):p=t[7],p}let d;t[8]!==a?(d=a&&x.jsx("img",{src:a,alt:"Generated image",className:"max-w-full h-auto object-contain rounded-lg shadow-lg"}),t[8]=a,t[9]=d):d=t[9];let m;return t[10]!==d?(m=x.jsx("div",{className:"h-full overflow-auto",children:x.jsx("div",{className:"flex items-center justify-center p-4",children:d})}),t[10]=d,t[11]=m):m=t[11],m}if(r.type==="audio"){if(!r.audio){let g;return t[12]===Symbol.for("react.memo_cache_sentinel")?(g=x.jsx("div",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:"No audio data"}),t[12]=g):g=t[12],g}let d;t[13]===Symbol.for("react.memo_cache_sentinel")?(d=x.jsx("div",{className:"text-sm font-medium text-neutral-700 dark:text-neutral-300",children:"Generated Audio"}),t[13]=d):d=t[13];let m;t[14]!==u?(m=u&&x.jsx("audio",{controls:!0,src:u,className:"w-full max-w-md",preload:"auto",children:"Your browser does not support the audio element."}),t[14]=u,t[15]=m):m=t[15];let p;t[16]!==u?(p=u&&x.jsx("a",{href:u,download:"generated-audio.mp3",className:"text-sm text-violet-600 dark:text-violet-400 hover:underline",children:"Download Audio"}),t[16]=u,t[17]=p):p=t[17];let y;return t[18]!==m||t[19]!==p?(y=x.jsx("div",{className:"h-full overflow-auto",children:x.jsxs("div",{className:"flex flex-col items-center justify-center p-4 space-y-4",children:[d,m,p]})}),t[18]=m,t[19]=p,t[20]=y):y=t[20],y}if(r.type==="transcription"){let d;return t[21]!==r.text?(d=x.jsx("div",{className:"h-full overflow-auto",children:x.jsx("div",{className:"prose prose-sm dark:prose-invert max-w-none prose-pre:bg-neutral-100 dark:prose-pre:bg-neutral-800 prose-pre:text-neutral-800 dark:prose-pre:text-neutral-200 prose-code:text-violet-600 dark:prose-code:text-violet-400 prose-code:before:content-none prose-code:after:content-none",children:x.jsx("div",{className:"p-4",children:x.jsx("div",{className:"text-sm text-neutral-800 dark:text-neutral-100 whitespace-pre-wrap",children:r.text})})})}),t[21]=r.text,t[22]=d):d=t[22],d}if(r.type==="embeddings"){let d;t[23]!==r.embeddings?(d=r.embeddings.map(NG),t[23]=r.embeddings,t[24]=d):d=t[24];let m;return t[25]!==d?(m=x.jsx("div",{className:"h-full overflow-auto",children:x.jsx("div",{className:"p-4 space-y-3",children:d})}),t[25]=d,t[26]=m):m=t[26],m}let f;return t[27]===Symbol.for("react.memo_cache_sentinel")?(f=x.jsx("div",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:"Unknown response type"}),t[27]=f):f=t[27],f}function NG(t,e){return x.jsxs("div",{className:"space-y-1",children:[x.jsxs("div",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:["Input ",e+1,": ",t.length," dimensions"]}),x.jsx("pre",{className:"text-xs overflow-auto text-neutral-800 dark:text-neutral-200",children:JSON.stringify(t,null,2)})]},e)}function MG(t){const e=t.openai;return!e||e.chat?"chat":e.image?"image":e.audio?"audio":e.transcription?"transcription":e.embeddings?"embeddings":"chat"}function DG(t){const e=t.openai,n=MG(t),r={url:t.url,model:e?.model||"",bodyType:n};switch(n){case"chat":return{...r,chat:{messages:e?.chat?.input.map(s=>({role:s.role,content:s.content.map(a=>a.type==="text"?a.text:`[File: ${a.name||"attachment"}]`).join("")}))||[]}};case"image":return{...r,image:{prompt:e?.image?.prompt||"",imageCount:e?.image?.images?.length||0}};case"audio":return{...r,audio:{text:e?.audio?.text||"",voice:e?.audio?.voice||"alloy"}};case"transcription":return{...r,transcription:{hasFile:!!e?.transcription?.file}};case"embeddings":return{...r,embeddings:{inputs:e?.embeddings?.input.map(s=>s.text)||[]}};default:return r}}function jG(t){const e=t.openai?.response;if(!e)return null;const n=e.result;if(!n)return{error:e.error,duration:e.duration};switch(n.type){case"text":return{type:"text",content:sc(n.text),duration:e.duration};case"image":return{type:"image",hasImage:!!n.image,duration:e.duration};case"audio":return{type:"audio",hasAudio:!!n.audio,duration:e.duration};case"transcription":return{type:"transcription",text:sc(n.text),duration:e.duration};case"embeddings":return{type:"embeddings",embeddingCount:n.embeddings.length,dimensions:n.embeddings[0]?.length||0,duration:e.duration};default:return{duration:e.duration}}}const LG=nr({model:gr().describe("The OpenAI model name (e.g., gpt-4o, gpt-4o-mini, dall-e-3, tts-1, whisper-1, text-embedding-3-small)")}),zG=nr({bodyType:Td(["chat","image","audio","transcription","embeddings"]).describe("The type of OpenAI request: chat (completions), image (generation), audio (TTS), transcription (STT), or embeddings")}),PG=nr({messages:gr().describe('JSON array of chat messages. Each message has "role" (system|user|assistant) and "content" (string). Example: [{"role": "user", "content": "Hello"}]')}),BG=nr({prompt:gr().describe("The prompt for image generation")}),$G=nr({text:gr().describe("The text to convert to speech"),voice:gr().optional().describe("The voice to use (alloy, echo, fable, onyx, nova, shimmer). Default: alloy")}),UG=nr({inputs:gr().describe('JSON array of strings to embed. Example: ["Hello world", "How are you?"]')}),qG=St({name:"get_request",description:"Get the current OpenAI request configuration including URL, model, body type, and type-specific data",inputSchema:fi}),FG=St({name:"get_response",description:"Get the response from the last executed OpenAI request",inputSchema:fi}),VG=St({name:"set_url",description:"Set the OpenAI API base URL (e.g., https://api.openai.com/v1 or a compatible endpoint)",inputSchema:Ad}),HG=St({name:"set_model",description:"Set the OpenAI model to use",inputSchema:LG}),GG=St({name:"set_body_type",description:"Set the type of OpenAI request (chat, image, audio, transcription, embeddings)",inputSchema:zG}),KG=St({name:"set_chat_messages",description:"Set the chat messages for a chat completion request",inputSchema:PG}),ZG=St({name:"set_image_prompt",description:"Set the prompt for image generation",inputSchema:BG}),JG=St({name:"set_audio",description:"Set the text and voice for text-to-speech",inputSchema:$G}),QG=St({name:"set_embeddings_input",description:"Set the input texts for embeddings generation",inputSchema:UG});function YG(t){const{request:e,setters:n}=t,r=qG.client(async()=>DG(e)),s=FG.client(async()=>jG(e)||{error:"No response available. Execute the request first."}),a=VG.client(async y=>{const g=y;return n.setUrl(g.url),{success:!0,url:g.url}}),l=HG.client(async y=>{const g=y;return n.setOpenAIModel(g.model),{success:!0,model:g.model}}),u=GG.client(async y=>{const g=y;return n.setOpenAIBodyType(g.bodyType),{success:!0,bodyType:g.bodyType}}),f=KG.client(async y=>{const g=y;try{const v=JSON.parse(g.messages).map(w=>({id:er(),role:w.role,content:[{type:"text",text:w.content}]}));return n.setOpenAIChatInput(v),{success:!0,messageCount:v.length}}catch(v){return{success:!1,error:`Invalid JSON for messages: ${v instanceof Error?v.message:"parse error"}`}}}),d=ZG.client(async y=>{const g=y;return n.setOpenAIImagePrompt(g.prompt),{success:!0}}),m=JG.client(async y=>{const g=y;return n.setOpenAIAudioText(g.text),g.voice&&n.setOpenAIAudioVoice(g.voice),{success:!0,voice:g.voice||"alloy"}}),p=QG.client(async y=>{const g=y;try{const w=JSON.parse(g.inputs).map(E=>({id:er(),text:E}));return n.setOpenAIEmbeddingsInput(w),{success:!0,inputCount:w.length}}catch(v){return{success:!1,error:`Invalid JSON for inputs: ${v instanceof Error?v.message:"parse error"}`}}});return wd(r,s,a,l,u,f,d,m,p)}function WG(){return`You are an AI assistant embedded in an OpenAI API client. You have tools that directly modify the request form visible to the user in real-time.

IMPORTANT: When you use tools like set_url, set_model, set_body_type, set_chat_messages, etc., the changes appear immediately in the user's request panel. You are actively editing their requestnot just describing what to do.

Your capabilities:
- View the current OpenAI request configuration (URL, model, body type, and type-specific data)
- Directly modify the requestchanges are applied instantly to the UI
- View and analyze responses after the user executes the request

Supported body types and their models:
- chat: gpt-4o, gpt-4o-mini, gpt-4-turbo, gpt-3.5-turbo (chat completions)
- image: dall-e-3, dall-e-2 (image generation)
- audio: tts-1, tts-1-hd (text-to-speech)
- transcription: whisper-1 (speech-to-text)
- embeddings: text-embedding-3-small, text-embedding-3-large, text-embedding-ada-002

Guidelines:
- First set the body_type, then configure type-specific options
- For chat, use set_chat_messages with role (system/user/assistant) and content
- For image, use set_image_prompt with a descriptive prompt
- For audio (TTS), use set_audio with text and optional voice
- For embeddings, use set_embeddings_input with an array of texts
- After making changes, briefly confirm what you did
- You cannot execute/send requeststhe user must click Send
- Format your responses using Markdown`}const XG={id:"openai",name:"OpenAI Assistant",placeholder:"Ask about your OpenAI request..."};function Km(t){return t<1e3?`${t}ms`:t<6e4?`${(t/1e3).toFixed(2)}s`:`${(t/6e4).toFixed(2)}m`}function eK(t){return t>=200&&t<300?"text-emerald-600 dark:text-emerald-400":t>=300&&t<400?"text-amber-600 dark:text-amber-400":t>=400&&t<500?"text-orange-600 dark:text-orange-400":t>=500?"text-red-600 dark:text-red-400":"text-neutral-600 dark:text-neutral-400"}function Zm(t){const e=$e.c(16),{statusCode:n,status:r}=t;let s;e[0]!==n?(s=eK(n),e[0]=n,e[1]=s):s=e[1];const a=s,l=n>=200&&n<300,u=n>=400,f=`flex items-center gap-1.5 px-2 py-1 rounded-md bg-neutral-100 dark:bg-white/5 ${a}`;let d;e[2]!==l?(d=l&&x.jsx($y,{size:14}),e[2]=l,e[3]=d):d=e[3];let m;e[4]!==u?(m=u&&x.jsx(nD,{size:14}),e[4]=u,e[5]=m):m=e[5];let p;e[6]!==n?(p=x.jsx("span",{className:"text-xs font-medium",children:n}),e[6]=n,e[7]=p):p=e[7];let y;e[8]!==r?(y=x.jsx("span",{className:"text-xs opacity-75",children:r}),e[8]=r,e[9]=y):y=e[9];let g;return e[10]!==f||e[11]!==d||e[12]!==m||e[13]!==p||e[14]!==y?(g=x.jsxs("div",{className:f,children:[d,m,p,y]}),e[10]=f,e[11]=d,e[12]=m,e[13]=p,e[14]=y,e[15]=g):g=e[15],g}function tK(){const t=$e.c(43),{request:e,isExecuting:n}=tn(),[r,s]=Z.useState("pretty"),[a,l]=Z.useState(!1),u=n,f=e?.protocol??"rest",d=e?.http?.response,m=e?.grpc?.response,p=e?.mcp?.response,y=e?.mcp?.response?.error,g=e?.openai?.response,v=e?.openai?.response?.error;let w,E,k,C;if(t[0]!==m||t[1]!==d||t[2]!==u||t[3]!==y||t[4]!==p||t[5]!==v||t[6]!==g||t[7]!==f||t[8]!==r){C=Symbol.for("react.early_return_sentinel");e:{E=d??(m?{status:m.error||"OK",statusCode:m.error?0:200,headers:m.metadata??{},body:new Blob([m.body],{type:"application/json"}),duration:m.duration}:void 0);const ye=E?.error??y??v;if(u){let F;t[13]===Symbol.for("react.memo_cache_sentinel")?(F=x.jsxs("div",{className:"flex flex-col items-center justify-center h-full min-h-50",children:[x.jsxs("div",{className:"relative mb-4",children:[x.jsx("div",{className:"w-12 h-12 rounded-full border-2 border-zinc-100 dark:border-zinc-800"}),x.jsx("div",{className:"absolute inset-0 w-12 h-12 rounded-full border-2 border-zinc-400 border-t-transparent animate-spin"})]}),x.jsx("span",{className:"text-xs font-medium text-zinc-400 uppercase tracking-widest animate-pulse",children:"Sending Request"})]}),t[13]=F):F=t[13],C=F;break e}if(ye){let F,B;t[14]===Symbol.for("react.memo_cache_sentinel")?(F=x.jsx(Vk,{className:"w-5 h-5 text-rose-500 dark:text-rose-400"}),B=x.jsx("h3",{className:"font-semibold text-rose-500 dark:text-rose-400",children:"Error"}),t[14]=F,t[15]=B):(F=t[14],B=t[15]);const K=x.jsxs("div",{children:[B,x.jsx("p",{className:"text-sm text-neutral-600 dark:text-neutral-300 mt-1",children:ye})]});let ie;t[16]!==K?(ie=x.jsx("div",{className:"bg-rose-500/10 border border-rose-500/20 rounded-xl p-4",children:x.jsxs("div",{className:"flex items-center gap-3",children:[F,K]})}),t[16]=K,t[17]=ie):ie=t[17],C=ie;break e}if(!E&&!p&&!g){let F;t[18]===Symbol.for("react.memo_cache_sentinel")?(F=x.jsxs("div",{className:"h-full flex flex-col items-center justify-center",children:[x.jsx(OD,{className:"w-12 h-12 text-neutral-300 dark:text-neutral-600 mb-4"}),x.jsx("p",{className:"text-sm text-neutral-400 dark:text-neutral-500",children:"Hit Send to see what happens"})]}),t[18]=F):F=t[18],C=F;break e}w=()=>{t:switch(f){case"openai":{if(g)return x.jsx(IG,{});break t}case"mcp":{if(p?.result){const F="content"in p.result;return x.jsx(VU,{toolResponse:F?p.result:void 0,resourceResponse:F?void 0:p.result,viewMode:r})}break t}case"grpc":{if(E)return x.jsx(wU,{response:E,viewMode:r});break t}default:if(E)return x.jsx(gP,{response:E,viewMode:r})}return null};const X=E?.headers?.["content-type"]?.toLowerCase()||"";k=X.includes("image/")||X.includes("video/")||X.includes("audio/")||X.includes("application/pdf")||X.includes("application/octet-stream")}t[0]=m,t[1]=d,t[2]=u,t[3]=y,t[4]=p,t[5]=v,t[6]=g,t[7]=f,t[8]=r,t[9]=w,t[10]=E,t[11]=k,t[12]=C}else w=t[9],E=t[10],k=t[11],C=t[12];if(C!==Symbol.for("react.early_return_sentinel"))return C;const D=!k&&f!=="openai",N=f!=="mcp"&&f!=="openai"&&E;let R;t[19]!==p||t[20]!==g||t[21]!==f||t[22]!==E||t[23]!==a||t[24]!==N||t[25]!==D||t[26]!==r?(R=(E||p||g)&&x.jsxs("div",{className:"flex items-center gap-3 mb-3 shrink-0",children:[E&&x.jsxs(x.Fragment,{children:[x.jsx(Zm,{statusCode:E.statusCode,status:E.status}),x.jsxs("div",{className:"flex items-center gap-1 text-xs text-neutral-500 dark:text-neutral-400",children:[x.jsx(Ll,{size:12}),x.jsx("span",{children:Km(E.duration)})]}),E.body&&x.jsxs("div",{className:"text-xs text-neutral-400 dark:text-neutral-500",children:[(E.body.size/1024).toFixed(2)," KB"]})]}),p&&!E&&x.jsxs(x.Fragment,{children:[x.jsx(Zm,{statusCode:200,status:"OK"}),x.jsxs("div",{className:"flex items-center gap-1 text-xs text-neutral-500 dark:text-neutral-400",children:[x.jsx(Ll,{size:12}),x.jsx("span",{children:Km(p.duration)})]})]}),g&&!E&&!p&&x.jsxs(x.Fragment,{children:[x.jsx(Zm,{statusCode:200,status:"OK"}),x.jsxs("div",{className:"flex items-center gap-1 text-xs text-neutral-500 dark:text-neutral-400",children:[x.jsx(Ll,{size:12}),x.jsx("span",{children:Km(g.duration)})]})]}),x.jsx("div",{className:"flex-1"}),D&&x.jsxs("div",{className:"flex items-center gap-0.5 text-xs",children:[x.jsx("button",{onClick:()=>s("pretty"),className:`px-2 py-0.5 rounded transition-colors ${r==="pretty"?"text-neutral-700 dark:text-neutral-200 font-medium":"text-neutral-400 dark:text-neutral-500 hover:text-neutral-600 dark:hover:text-neutral-300"}`,children:"Pretty"}),x.jsx("span",{className:"text-neutral-300 dark:text-neutral-600",children:"|"}),x.jsx("button",{onClick:()=>s("raw"),className:`px-2 py-0.5 rounded transition-colors ${r==="raw"?"text-neutral-700 dark:text-neutral-200 font-medium":"text-neutral-400 dark:text-neutral-500 hover:text-neutral-600 dark:hover:text-neutral-300"}`,children:"Raw"})]}),N&&x.jsxs("button",{onClick:()=>l(!a),className:`px-2 py-0.5 text-xs rounded transition-colors ${a?"text-neutral-700 dark:text-neutral-200 font-medium":"text-neutral-400 dark:text-neutral-500 hover:text-neutral-600 dark:hover:text-neutral-300"}`,children:[f==="grpc"?"Metadata":"Headers"," (",Object.keys(E.headers).length,")"]})]}),t[19]=p,t[20]=g,t[21]=f,t[22]=E,t[23]=a,t[24]=N,t[25]=D,t[26]=r,t[27]=R):R=t[27];const $=`min-h-0 overflow-hidden transition-all ${a?"flex-2":"flex-1"}`;let q;t[28]!==w?(q=w(),t[28]=w,t[29]=q):q=t[29];let H;t[30]!==$||t[31]!==q?(H=x.jsx("div",{className:$,children:q}),t[30]=$,t[31]=q,t[32]=H):H=t[32];let M;t[33]!==f||t[34]!==E||t[35]!==a?(M=a&&E&&x.jsxs("div",{className:"flex-1 min-w-75 max-w-125 flex flex-col border-l border-neutral-200 dark:border-white/10 pl-3",children:[x.jsxs("div",{className:"text-xs font-medium text-neutral-600 dark:text-neutral-400 mb-2",children:[f==="grpc"?"Metadata":"Headers"," (",Object.keys(E.headers).length,")"]}),x.jsx("div",{className:"flex-1 overflow-auto",children:x.jsx("div",{className:"space-y-2",children:Object.entries(E.headers).map(nK)})})]}),t[33]=f,t[34]=E,t[35]=a,t[36]=M):M=t[36];let Q;t[37]!==H||t[38]!==M?(Q=x.jsxs("div",{className:"flex-1 min-h-0 flex gap-3 overflow-hidden",children:[H,M]}),t[37]=H,t[38]=M,t[39]=Q):Q=t[39];let ne;return t[40]!==R||t[41]!==Q?(ne=x.jsxs("div",{className:"h-full flex flex-col overflow-hidden",children:[R,Q]}),t[40]=R,t[41]=Q,t[42]=ne):ne=t[42],ne}function nK(t){const[e,n]=t;return x.jsxs("div",{className:"text-xs",children:[x.jsx("div",{className:"font-mono text-neutral-600 dark:text-neutral-400 mb-0.5",children:e}),x.jsx("div",{className:"font-mono text-neutral-700 dark:text-neutral-200 break-all",children:n})]},e)}function rK(){const t=$e.c(55),{request:e,newRequest:n,sidebarCollapsed:r,toggleSidebar:s,history:a}=tn(),{setPortalTarget:l}=Uk();if(!e){let ye;return t[0]===Symbol.for("react.memo_cache_sentinel")?(ye=x.jsx("div",{className:"flex-1 flex items-center justify-center text-neutral-400 dark:text-neutral-500",children:"No active request"}),t[0]=ye):ye=t[0],ye}const u=e.protocol??"rest";let f;t[1]!==a||t[2]!==r||t[3]!==s?(f=r&&a.length>0&&x.jsx("button",{type:"button",onClick:s,className:"p-1.5 hover:bg-neutral-100 dark:hover:bg-white/10 rounded-md transition-colors text-neutral-500 dark:text-neutral-400 hover:text-neutral-700 dark:hover:text-neutral-200",title:"Show sidebar",children:x.jsx(vD,{className:"w-4 h-4"})}),t[1]=a,t[2]=r,t[3]=s,t[4]=f):f=t[4];let d;t[5]===Symbol.for("react.memo_cache_sentinel")?(d=x.jsx(ej,{}),t[5]=d):d=t[5];let m;t[6]!==u?(m=u==="rest"&&x.jsx(lj,{}),t[6]=u,t[7]=m):m=t[7];let p;t[8]!==u?(p=u==="grpc"&&x.jsx(_U,{}),t[8]=u,t[9]=p):p=t[9];let y;t[10]!==u?(y=u==="mcp"&&x.jsx(jU,{}),t[10]=u,t[11]=y):y=t[11];let g;t[12]!==u?(g=u==="openai"&&x.jsx(iq,{}),t[12]=u,t[13]=g):g=t[13];let v;t[14]!==m||t[15]!==p||t[16]!==y||t[17]!==g?(v=x.jsxs("div",{className:"flex-1 flex items-center",children:[m,p,y,g]}),t[14]=m,t[15]=p,t[16]=y,t[17]=g,t[18]=v):v=t[18];let w;t[19]!==l?(w=x.jsx("div",{ref:l,className:"flex items-center gap-1"}),t[19]=l,t[20]=w):w=t[20];let E;t[21]===Symbol.for("react.memo_cache_sentinel")?(E=x.jsx(nj,{}),t[21]=E):E=t[21];let k;t[22]===Symbol.for("react.memo_cache_sentinel")?(k=x.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),t[22]=k):k=t[22];let C;t[23]!==n?(C=x.jsx("button",{onClick:n,className:"p-1.5 hover:bg-neutral-100 dark:hover:bg-white/10 rounded-md transition-colors text-neutral-500 dark:text-neutral-400 hover:text-neutral-700 dark:hover:text-neutral-200",title:"New request",children:k}),t[23]=n,t[24]=C):C=t[24];let T;t[25]!==f||t[26]!==C||t[27]!==v||t[28]!==w?(T=x.jsxs("div",{className:"pl-2 pr-3 py-2 border-b border-neutral-200 dark:border-white/5 flex items-center gap-2 shrink-0",children:[f,d,v,w,E,C]}),t[25]=f,t[26]=C,t[27]=v,t[28]=w,t[29]=T):T=t[29];let D;t[30]!==u?(D=u==="rest"&&x.jsx(Mj,{}),t[30]=u,t[31]=D):D=t[31];let N;t[32]!==u?(N=u==="grpc"&&x.jsx(xU,{}),t[32]=u,t[33]=N):N=t[33];let R;t[34]!==u?(R=u==="mcp"&&x.jsx(zU,{}),t[34]=u,t[35]=R):R=t[35];let $;t[36]!==u?($=u==="openai"&&x.jsx(mq,{}),t[36]=u,t[37]=$):$=t[37];let q;t[38]!==D||t[39]!==N||t[40]!==R||t[41]!==$?(q=x.jsxs("div",{className:"pl-2 pr-3 py-2 border-b border-neutral-200 dark:border-white/5 overflow-visible shrink-0",children:[D,N,R,$]}),t[38]=D,t[39]=N,t[40]=R,t[41]=$,t[42]=q):q=t[42];let H;t[43]!==e.grpc?.response||t[44]!==e.http?.response||t[45]!==e.mcp?.response||t[46]!==e.openai?.response?(H=(e.http?.response||e.grpc?.response||e.mcp?.response||e.openai?.response)&&x.jsx("h2",{className:"text-[10px] font-medium text-neutral-500 dark:text-neutral-300 uppercase tracking-wider mb-2 shrink-0",children:"Response"}),t[43]=e.grpc?.response,t[44]=e.http?.response,t[45]=e.mcp?.response,t[46]=e.openai?.response,t[47]=H):H=t[47];let M;t[48]===Symbol.for("react.memo_cache_sentinel")?(M=x.jsx("div",{className:"flex-1 min-h-0 overflow-hidden",children:x.jsx(tK,{})}),t[48]=M):M=t[48];let Q;t[49]!==H?(Q=x.jsxs("div",{className:"flex-1 pl-2 pr-3 py-2 flex flex-col min-h-0 overflow-hidden",children:[H,M]}),t[49]=H,t[50]=Q):Q=t[50];let ne;return t[51]!==T||t[52]!==q||t[53]!==Q?(ne=x.jsxs("div",{className:"h-full flex flex-col overflow-hidden",children:[T,q,Q]}),t[51]=T,t[52]=q,t[53]=Q,t[54]=ne):ne=t[54],ne}function sK(t){const e=Z.useId(),n=t.id||e,[r,s]=Z.useState(t.initialMessages||[]),[a,l]=Z.useState(!1),[u,f]=Z.useState(void 0),d=Z.useRef(t.initialMessages||[]),m=Z.useRef(!0);Z.useEffect(()=>{d.current=r},[r]);const p=Z.useRef(t);p.current=t;const y=Z.useMemo(()=>{const N=m.current?t.initialMessages||[]:d.current;return m.current=!1,new UP({connection:p.current.connection,id:n,initialMessages:N,body:p.current.body,onResponse:p.current.onResponse,onChunk:p.current.onChunk,onFinish:p.current.onFinish,onError:p.current.onError,tools:p.current.tools,streamProcessor:t.streamProcessor,onMessagesChange:R=>{s(R)},onLoadingChange:R=>{l(R)},onErrorChange:R=>{f(R)}})},[n]);Z.useEffect(()=>{t.initialMessages&&t.initialMessages.length>0&&r.length===0&&y.setMessagesManually(t.initialMessages)},[]),Z.useEffect(()=>()=>{y.stop()},[y]);const g=Z.useCallback(async N=>{await y.sendMessage(N)},[y]),v=Z.useCallback(async N=>{await y.append(N)},[y]),w=Z.useCallback(async()=>{await y.reload()},[y]),E=Z.useCallback(()=>{y.stop()},[y]),k=Z.useCallback(()=>{y.clear()},[y]),C=Z.useCallback(N=>{y.setMessagesManually(N)},[y]),T=Z.useCallback(async N=>{await y.addToolResult(N)},[y]),D=Z.useCallback(async N=>{await y.addToolApprovalResponse(N)},[y]);return{messages:r,sendMessage:g,append:v,reload:w,stop:E,isLoading:a,error:u,setMessages:C,clear:k,addToolResult:T,addToolApprovalResponse:D}}class iK{constructor(e={},n){this.kind="text",this.config=e,this.model=n}generateId(){return`${this.name}-${Date.now()}-${Math.random().toString(36).substring(7)}`}}const aK=t=>{if(t.conversation&&t.previous_response_id)throw new Error("Cannot use both 'conversation' and 'previous_response_id' in the same request.")},oK=t=>{lK(t),aK(t)},lK=t=>{const e=t.metadata;if(e&&Object.keys(e).length>16)throw new Error("Metadata cannot have more than 16 key-value pairs.");if(e&&Object.keys(e).some(a=>a.length>64))throw new Error("Metadata keys cannot be longer than 64 characters.");if(e&&Object.values(e).some(a=>a.length>512))throw new Error("Metadata values cannot be longer than 512 characters.")};function ry(t){if(t!==null){if(Array.isArray(t))return t.map(e=>ry(e));if(typeof t=="object"){const e={};for(const[n,r]of Object.entries(t)){const s=ry(r);s!==void 0&&(e[n]=s)}return e}return t}}function Fl(t,e=[]){const n={...t};if(n.type==="object"&&n.properties){const r={...n.properties},s=Object.keys(r);for(const a of s){const l=r[a],u=!e.includes(a);l.type==="object"&&l.properties?r[a]=Fl(l,l.required||[]):l.type==="array"&&l.items?r[a]={...l,items:Fl(l.items,l.items.required||[])}:u&&(l.type&&!Array.isArray(l.type)?r[a]={...l,type:[l.type,"null"]}:Array.isArray(l.type)&&!l.type.includes("null")&&(r[a]={...l,type:[...l.type,"null"]}))}n.properties=r,n.required=s,n.additionalProperties=!1}return n.type==="array"&&n.items&&(n.items=Fl(n.items,n.items.required||[])),n}function cK(t){return{type:"apply_patch"}}function uK(t){return{type:"code_interpreter",container:t.metadata.container}}function fK(t){const e=t.metadata;return{type:"computer_use_preview",display_height:e.display_height,display_width:e.display_width,environment:e.environment}}function dK(t){const e=t.metadata;return{type:"custom",name:e.name,description:e.description,format:e.format}}function hK(t){const e=t.metadata;return{type:"file_search",vector_store_ids:e.vector_store_ids,max_num_results:e.max_num_results,ranking_options:e.ranking_options,filters:e.filters}}function pK(t){const e=t.inputSchema??{type:"object",properties:{},required:[]},n=Fl(e,e.required||[]);return n.additionalProperties=!1,{type:"function",name:t.name,description:t.description,parameters:n,strict:!0}}function mK(t){return{type:"image_generation",...t.metadata}}function gK(t){return{type:"local_shell"}}function yK(t){if(!t.server_url&&!t.connector_id)throw new Error("Either server_url or connector_id must be provided.");if(t.connector_id&&t.server_url)throw new Error("Only one of server_url or connector_id can be provided.")}function bK(t){const n={type:"mcp",...t.metadata};return yK(n),n}function _K(t){return{type:"shell"}}function vK(t){const e=t.metadata;return{type:e.type,search_context_size:e.search_context_size,user_location:e.user_location}}function xK(t){return t.metadata}function wK(t){return t.map(e=>{const n=new Set(["apply_patch","code_interpreter","computer_use_preview","file_search","image_generation","local_shell","mcp","shell","web_search_preview","web_search","custom"]),r=e.name;if(n.has(r))switch(r){case"apply_patch":return cK();case"code_interpreter":return uK(e);case"computer_use_preview":return fK(e);case"file_search":return hK(e);case"image_generation":return mK(e);case"local_shell":return gK();case"mcp":return bK(e);case"shell":return _K();case"web_search_preview":return vK(e);case"web_search":return xK(e);case"custom":return dK(e)}return pK(e)})}function ze(t,e,n,r,s){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n}function ee(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)}let yT=function(){const{crypto:t}=globalThis;if(t?.randomUUID)return yT=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,r=>(+r^n()&15>>+r/4).toString(16))};function sy(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const iy=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};class Ne extends Error{}class wn extends Ne{constructor(e,n,r,s){super(`${wn.makeMessage(e,n,r)}`),this.status=e,this.headers=s,this.requestID=s?.get("x-request-id"),this.error=n;const a=n;this.code=a?.code,this.param=a?.param,this.type=a?.type}static makeMessage(e,n,r){const s=n?.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return e&&s?`${e} ${s}`:e?`${e} status code (no body)`:s||"(no status code or body)"}static generate(e,n,r,s){if(!e||!s)return new jd({message:r,cause:iy(n)});const a=n?.error;return e===400?new bT(e,a,r,s):e===401?new _T(e,a,r,s):e===403?new vT(e,a,r,s):e===404?new xT(e,a,r,s):e===409?new wT(e,a,r,s):e===422?new ST(e,a,r,s):e===429?new kT(e,a,r,s):e>=500?new ET(e,a,r,s):new wn(e,a,r,s)}}class Dr extends wn{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class jd extends wn{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class T0 extends jd{constructor({message:e}={}){super({message:e??"Request timed out."})}}class bT extends wn{}class _T extends wn{}class vT extends wn{}class xT extends wn{}class wT extends wn{}class ST extends wn{}class kT extends wn{}class ET extends wn{}class CT extends Ne{constructor(){super("Could not parse response content as the length limit was reached")}}class TT extends Ne{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}class El extends Error{constructor(e){super(e)}}const SK=/^[a-z][a-z0-9+.-]*:/i,kK=t=>SK.test(t);let Yn=t=>(Yn=Array.isArray,Yn(t)),jS=Yn;function AT(t){return typeof t!="object"?{}:t??{}}function EK(t){if(!t)return!0;for(const e in t)return!1;return!0}function CK(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Jm(t){return t!=null&&typeof t=="object"&&!Array.isArray(t)}const TK=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Ne(`${t} must be an integer`);if(e<0)throw new Ne(`${t} must be a positive integer`);return e},AK=t=>{try{return JSON.parse(t)}catch{return}},yc=t=>new Promise(e=>setTimeout(e,t)),Fa="6.15.0",RK=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u";function OK(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const IK=()=>{const t=OK();if(t==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Fa,"X-Stainless-OS":zS(Deno.build.os),"X-Stainless-Arch":LS(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:Deno.version?.deno??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Fa,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(t==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Fa,"X-Stainless-OS":zS(globalThis.process.platform??"unknown"),"X-Stainless-Arch":LS(globalThis.process.arch??"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":globalThis.process.version??"unknown"};const e=NK();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Fa,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Fa,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function NK(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const r=n.exec(navigator.userAgent);if(r){const s=r[1]||0,a=r[2]||0,l=r[3]||0;return{browser:e,version:`${s}.${a}.${l}`}}}return null}const LS=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",zS=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let PS;const MK=()=>PS??(PS=IK());function DK(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new OpenAI({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function RT(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function OT(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return RT({start(){},async pull(n){const{done:r,value:s}=await e.next();r?n.close():n.enqueue(s)},async cancel(){await e.return?.()}})}function IT(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n?.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function jK(t){if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await t[Symbol.asyncIterator]().return?.();return}const e=t.getReader(),n=e.cancel();e.releaseLock(),await n}const LK=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)}),NT="RFC3986",MT=t=>String(t),BS={RFC1738:t=>String(t).replace(/%20/g,"+"),RFC3986:MT},zK="RFC1738";let ay=(t,e)=>(ay=Object.hasOwn??Function.prototype.call.bind(Object.prototype.hasOwnProperty),ay(t,e));const Kr=(()=>{const t=[];for(let e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t})(),Qm=1024,PK=(t,e,n,r,s)=>{if(t.length===0)return t;let a=t;if(typeof t=="symbol"?a=Symbol.prototype.toString.call(t):typeof t!="string"&&(a=String(t)),n==="iso-8859-1")return escape(a).replace(/%u[0-9a-f]{4}/gi,function(u){return"%26%23"+parseInt(u.slice(2),16)+"%3B"});let l="";for(let u=0;u<a.length;u+=Qm){const f=a.length>=Qm?a.slice(u,u+Qm):a,d=[];for(let m=0;m<f.length;++m){let p=f.charCodeAt(m);if(p===45||p===46||p===95||p===126||p>=48&&p<=57||p>=65&&p<=90||p>=97&&p<=122||s===zK&&(p===40||p===41)){d[d.length]=f.charAt(m);continue}if(p<128){d[d.length]=Kr[p];continue}if(p<2048){d[d.length]=Kr[192|p>>6]+Kr[128|p&63];continue}if(p<55296||p>=57344){d[d.length]=Kr[224|p>>12]+Kr[128|p>>6&63]+Kr[128|p&63];continue}m+=1,p=65536+((p&1023)<<10|f.charCodeAt(m)&1023),d[d.length]=Kr[240|p>>18]+Kr[128|p>>12&63]+Kr[128|p>>6&63]+Kr[128|p&63]}l+=d.join("")}return l};function BK(t){return!t||typeof t!="object"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))}function $S(t,e){if(Yn(t)){const n=[];for(let r=0;r<t.length;r+=1)n.push(e(t[r]));return n}return e(t)}const DT={brackets(t){return String(t)+"[]"},comma:"comma",indices(t,e){return String(t)+"["+e+"]"},repeat(t){return String(t)}},jT=function(t,e){Array.prototype.push.apply(t,Yn(e)?e:[e])};let US;const Yt={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:PK,encodeValuesOnly:!1,format:NT,formatter:MT,indices:!1,serializeDate(t){return(US??(US=Function.prototype.call.bind(Date.prototype.toISOString)))(t)},skipNulls:!1,strictNullHandling:!1};function $K(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="symbol"||typeof t=="bigint"}const Ym={};function LT(t,e,n,r,s,a,l,u,f,d,m,p,y,g,v,w,E,k){let C=t,T=k,D=0,N=!1;for(;(T=T.get(Ym))!==void 0&&!N;){const M=T.get(t);if(D+=1,typeof M<"u"){if(M===D)throw new RangeError("Cyclic object value");N=!0}typeof T.get(Ym)>"u"&&(D=0)}if(typeof d=="function"?C=d(e,C):C instanceof Date?C=y?.(C):n==="comma"&&Yn(C)&&(C=$S(C,function(M){return M instanceof Date?y?.(M):M})),C===null){if(a)return f&&!w?f(e,Yt.encoder,E,"key",g):e;C=""}if($K(C)||BK(C)){if(f){const M=w?e:f(e,Yt.encoder,E,"key",g);return[v?.(M)+"="+v?.(f(C,Yt.encoder,E,"value",g))]}return[v?.(e)+"="+v?.(String(C))]}const R=[];if(typeof C>"u")return R;let $;if(n==="comma"&&Yn(C))w&&f&&(C=$S(C,f)),$=[{value:C.length>0?C.join(",")||null:void 0}];else if(Yn(d))$=d;else{const M=Object.keys(C);$=m?M.sort(m):M}const q=u?String(e).replace(/\./g,"%2E"):String(e),H=r&&Yn(C)&&C.length===1?q+"[]":q;if(s&&Yn(C)&&C.length===0)return H+"[]";for(let M=0;M<$.length;++M){const Q=$[M],ne=typeof Q=="object"&&typeof Q.value<"u"?Q.value:C[Q];if(l&&ne===null)continue;const ye=p&&u?Q.replace(/\./g,"%2E"):Q,X=Yn(C)?typeof n=="function"?n(H,ye):H:H+(p?"."+ye:"["+ye+"]");k.set(t,D);const F=new WeakMap;F.set(Ym,k),jT(R,LT(ne,X,n,r,s,a,l,u,n==="comma"&&w&&Yn(C)?null:f,d,m,p,y,g,v,w,E,F))}return R}function UK(t=Yt){if(typeof t.allowEmptyArrays<"u"&&typeof t.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof t.encodeDotInKeys<"u"&&typeof t.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(t.encoder!==null&&typeof t.encoder<"u"&&typeof t.encoder!="function")throw new TypeError("Encoder has to be a function.");const e=t.charset||Yt.charset;if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let n=NT;if(typeof t.format<"u"){if(!ay(BS,t.format))throw new TypeError("Unknown format option provided.");n=t.format}const r=BS[n];let s=Yt.filter;(typeof t.filter=="function"||Yn(t.filter))&&(s=t.filter);let a;if(t.arrayFormat&&t.arrayFormat in DT?a=t.arrayFormat:"indices"in t?a=t.indices?"indices":"repeat":a=Yt.arrayFormat,"commaRoundTrip"in t&&typeof t.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const l=typeof t.allowDots>"u"?t.encodeDotInKeys?!0:Yt.allowDots:!!t.allowDots;return{addQueryPrefix:typeof t.addQueryPrefix=="boolean"?t.addQueryPrefix:Yt.addQueryPrefix,allowDots:l,allowEmptyArrays:typeof t.allowEmptyArrays=="boolean"?!!t.allowEmptyArrays:Yt.allowEmptyArrays,arrayFormat:a,charset:e,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:Yt.charsetSentinel,commaRoundTrip:!!t.commaRoundTrip,delimiter:typeof t.delimiter>"u"?Yt.delimiter:t.delimiter,encode:typeof t.encode=="boolean"?t.encode:Yt.encode,encodeDotInKeys:typeof t.encodeDotInKeys=="boolean"?t.encodeDotInKeys:Yt.encodeDotInKeys,encoder:typeof t.encoder=="function"?t.encoder:Yt.encoder,encodeValuesOnly:typeof t.encodeValuesOnly=="boolean"?t.encodeValuesOnly:Yt.encodeValuesOnly,filter:s,format:n,formatter:r,serializeDate:typeof t.serializeDate=="function"?t.serializeDate:Yt.serializeDate,skipNulls:typeof t.skipNulls=="boolean"?t.skipNulls:Yt.skipNulls,sort:typeof t.sort=="function"?t.sort:null,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:Yt.strictNullHandling}}function qK(t,e={}){let n=t;const r=UK(e);let s,a;typeof r.filter=="function"?(a=r.filter,n=a("",n)):Yn(r.filter)&&(a=r.filter,s=a);const l=[];if(typeof n!="object"||n===null)return"";const u=DT[r.arrayFormat],f=u==="comma"&&r.commaRoundTrip;s||(s=Object.keys(n)),r.sort&&s.sort(r.sort);const d=new WeakMap;for(let y=0;y<s.length;++y){const g=s[y];r.skipNulls&&n[g]===null||jT(l,LT(n[g],g,u,f,r.allowEmptyArrays,r.strictNullHandling,r.skipNulls,r.encodeDotInKeys,r.encode?r.encoder:null,r.filter,r.sort,r.allowDots,r.serializeDate,r.format,r.formatter,r.encodeValuesOnly,r.charset,d))}const m=l.join(r.delimiter);let p=r.addQueryPrefix===!0?"?":"";return r.charsetSentinel&&(r.charset==="iso-8859-1"?p+="utf8=%26%2310003%3B&":p+="utf8=%E2%9C%93&"),m.length>0?p+m:""}function FK(t){let e=0;for(const s of t)e+=s.length;const n=new Uint8Array(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return n}let qS;function A0(t){let e;return(qS??(e=new globalThis.TextEncoder,qS=e.encode.bind(e)))(t)}let FS;function VS(t){let e;return(FS??(e=new globalThis.TextDecoder,FS=e.decode.bind(e)))(t)}var dr,hr;class Ld{constructor(){dr.set(this,void 0),hr.set(this,void 0),ze(this,dr,new Uint8Array),ze(this,hr,null)}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?A0(e):e;ze(this,dr,FK([ee(this,dr,"f"),n]));const r=[];let s;for(;(s=VK(ee(this,dr,"f"),ee(this,hr,"f")))!=null;){if(s.carriage&&ee(this,hr,"f")==null){ze(this,hr,s.index);continue}if(ee(this,hr,"f")!=null&&(s.index!==ee(this,hr,"f")+1||s.carriage)){r.push(VS(ee(this,dr,"f").subarray(0,ee(this,hr,"f")-1))),ze(this,dr,ee(this,dr,"f").subarray(ee(this,hr,"f"))),ze(this,hr,null);continue}const a=ee(this,hr,"f")!==null?s.preceding-1:s.preceding,l=VS(ee(this,dr,"f").subarray(0,a));r.push(l),ze(this,dr,ee(this,dr,"f").subarray(s.index)),ze(this,hr,null)}return r}flush(){return ee(this,dr,"f").length?this.decode(`
`):[]}}dr=new WeakMap,hr=new WeakMap;Ld.NEWLINE_CHARS=new Set([`
`,"\r"]);Ld.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function VK(t,e){for(let s=e??0;s<t.length;s++){if(t[s]===10)return{preceding:s,index:s+1,carriage:!1};if(t[s]===13)return{preceding:s,index:s+1,carriage:!0}}return null}function HK(t){for(let r=0;r<t.length-1;r++){if(t[r]===10&&t[r+1]===10||t[r]===13&&t[r+1]===13)return r+2;if(t[r]===13&&t[r+1]===10&&r+3<t.length&&t[r+2]===13&&t[r+3]===10)return r+4}return-1}const ed={off:0,error:200,warn:300,info:400,debug:500},HS=(t,e,n)=>{if(t){if(CK(ed,t))return t;_n(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(ed))}`)}};function Cl(){}function Zu(t,e,n){return!e||ed[t]>ed[n]?Cl:e[t].bind(e)}const GK={error:Cl,warn:Cl,info:Cl,debug:Cl};let GS=new WeakMap;function _n(t){const e=t.logger,n=t.logLevel??"off";if(!e)return GK;const r=GS.get(e);if(r&&r[0]===n)return r[1];const s={error:Zu("error",e,n),warn:Zu("warn",e,n),info:Zu("info",e,n),debug:Zu("debug",e,n)};return GS.set(e,[n,s]),s}const Li=t=>(t.options&&(t.options={...t.options},delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);var bl;class Wr{constructor(e,n,r){this.iterator=e,bl.set(this,void 0),this.controller=n,ze(this,bl,r)}static fromSSEResponse(e,n,r){let s=!1;const a=r?_n(r):console;async function*l(){if(s)throw new Ne("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let u=!1;try{for await(const f of KK(e,n))if(!u){if(f.data.startsWith("[DONE]")){u=!0;continue}if(f.event===null||!f.event.startsWith("thread.")){let d;try{d=JSON.parse(f.data)}catch(m){throw a.error("Could not parse message into JSON:",f.data),a.error("From chunk:",f.raw),m}if(d&&d.error)throw new wn(void 0,d.error,void 0,e.headers);yield d}else{let d;try{d=JSON.parse(f.data)}catch(m){throw console.error("Could not parse message into JSON:",f.data),console.error("From chunk:",f.raw),m}if(f.event=="error")throw new wn(void 0,d.error,d.message,void 0);yield{event:f.event,data:d}}}u=!0}catch(f){if(sy(f))return;throw f}finally{u||n.abort()}}return new Wr(l,n,r)}static fromReadableStream(e,n,r){let s=!1;async function*a(){const u=new Ld,f=IT(e);for await(const d of f)for(const m of u.decode(d))yield m;for(const d of u.flush())yield d}async function*l(){if(s)throw new Ne("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let u=!1;try{for await(const f of a())u||f&&(yield JSON.parse(f));u=!0}catch(f){if(sy(f))return;throw f}finally{u||n.abort()}}return new Wr(l,n,r)}[(bl=new WeakMap,Symbol.asyncIterator)](){return this.iterator()}tee(){const e=[],n=[],r=this.iterator(),s=a=>({next:()=>{if(a.length===0){const l=r.next();e.push(l),n.push(l)}return a.shift()}});return[new Wr(()=>s(e),this.controller,ee(this,bl,"f")),new Wr(()=>s(n),this.controller,ee(this,bl,"f"))]}toReadableStream(){const e=this;let n;return RT({async start(){n=e[Symbol.asyncIterator]()},async pull(r){try{const{value:s,done:a}=await n.next();if(a)return r.close();const l=A0(JSON.stringify(s)+`
`);r.enqueue(l)}catch(s){r.error(s)}},async cancel(){await n.return?.()}})}}async function*KK(t,e){if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Ne("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Ne("Attempted to iterate over a response with no body");const n=new JK,r=new Ld,s=IT(t.body);for await(const a of ZK(s))for(const l of r.decode(a)){const u=n.decode(l);u&&(yield u)}for(const a of r.flush()){const l=n.decode(a);l&&(yield l)}}async function*ZK(t){let e=new Uint8Array;for await(const n of t){if(n==null)continue;const r=n instanceof ArrayBuffer?new Uint8Array(n):typeof n=="string"?A0(n):n;let s=new Uint8Array(e.length+r.length);s.set(e),s.set(r,e.length),e=s;let a;for(;(a=HK(e))!==-1;)yield e.slice(0,a),e=e.slice(a)}e.length>0&&(yield e)}class JK{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const a={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],a}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,r,s]=QK(e,":");return s.startsWith(" ")&&(s=s.substring(1)),n==="event"?this.event=s:n==="data"&&this.data.push(s),null}}function QK(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}async function zT(t,e){const{response:n,requestLogID:r,retryOfRequestLogID:s,startTime:a}=e,l=await(async()=>{if(e.options.stream)return _n(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):Wr.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const f=n.headers.get("content-type")?.split(";")[0]?.trim();if(f?.includes("application/json")||f?.endsWith("+json")){const p=await n.json();return PT(p,n)}return await n.text()})();return _n(t).debug(`[${r}] response parsed`,Li({retryOfRequestLogID:s,url:n.url,status:n.status,body:l,durationMs:Date.now()-a})),l}function PT(t,e){return!t||typeof t!="object"||Array.isArray(t)?t:Object.defineProperty(t,"_request_id",{value:e.headers.get("x-request-id"),enumerable:!1})}var Tl;class zd extends Promise{constructor(e,n,r=zT){super(s=>{s(null)}),this.responsePromise=n,this.parseResponse=r,Tl.set(this,void 0),ze(this,Tl,e)}_thenUnwrap(e){return new zd(ee(this,Tl,"f"),this.responsePromise,async(n,r)=>PT(e(await this.parseResponse(n,r),r),r.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n,request_id:n.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(ee(this,Tl,"f"),e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}Tl=new WeakMap;var Ju;class R0{constructor(e,n,r,s){Ju.set(this,void 0),ze(this,Ju,e),this.options=s,this.response=n,this.body=r}hasNextPage(){return this.getPaginatedItems().length?this.nextPageRequestOptions()!=null:!1}async getNextPage(){const e=this.nextPageRequestOptions();if(!e)throw new Ne("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");return await ee(this,Ju,"f").requestAPIList(this.constructor,e)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(Ju=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const n of e.getPaginatedItems())yield n}}class YK extends zd{constructor(e,n,r){super(e,n,async(s,a)=>new r(s,a.response,await zT(s,a),a.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const n of e)yield n}}class Pd extends R0{constructor(e,n,r,s){super(e,n,r,s),this.data=r.data||[],this.object=r.object}getPaginatedItems(){return this.data??[]}nextPageRequestOptions(){return null}}class Kt extends R0{constructor(e,n,r,s){super(e,n,r,s),this.data=r.data||[],this.has_more=r.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){const e=this.getPaginatedItems(),n=e[e.length-1]?.id;return n?{...this.options,query:{...AT(this.options.query),after:n}}:null}}class td extends R0{constructor(e,n,r,s){super(e,n,r,s),this.data=r.data||[],this.has_more=r.has_more||!1,this.last_id=r.last_id||""}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){const e=this.last_id;return e?{...this.options,query:{...AT(this.options.query),after:e}}:null}}const BT=()=>{if(typeof File>"u"){const{process:t}=globalThis,e=typeof t?.versions?.node=="string"&&parseInt(t.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(e?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Vl(t,e,n){return BT(),new File(t,e??"unknown_file",n)}function uf(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const O0=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function",KS=async(t,e)=>oy(t.body)?{...t,body:await $T(t.body,e)}:t,Gi=async(t,e)=>({...t,body:await $T(t.body,e)}),ZS=new WeakMap;function WK(t){const e=typeof t=="function"?t:t.fetch,n=ZS.get(e);if(n)return n;const r=(async()=>{try{const s="Response"in e?e.Response:(await e("data:,")).constructor,a=new FormData;return a.toString()!==await new s(a).text()}catch{return!0}})();return ZS.set(e,r),r}const $T=async(t,e)=>{if(!await WK(e))throw new TypeError("The provided fetch function does not support file uploads with the current global FormData class.");const n=new FormData;return await Promise.all(Object.entries(t||{}).map(([r,s])=>ly(n,r,s))),n},UT=t=>t instanceof Blob&&"name"in t,XK=t=>typeof t=="object"&&t!==null&&(t instanceof Response||O0(t)||UT(t)),oy=t=>{if(XK(t))return!0;if(Array.isArray(t))return t.some(oy);if(t&&typeof t=="object"){for(const e in t)if(oy(t[e]))return!0}return!1},ly=async(t,e,n)=>{if(n!==void 0){if(n==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")t.append(e,String(n));else if(n instanceof Response)t.append(e,Vl([await n.blob()],uf(n)));else if(O0(n))t.append(e,Vl([await new Response(OT(n)).blob()],uf(n)));else if(UT(n))t.append(e,n,uf(n));else if(Array.isArray(n))await Promise.all(n.map(r=>ly(t,e+"[]",r)));else if(typeof n=="object")await Promise.all(Object.entries(n).map(([r,s])=>ly(t,`${e}[${r}]`,s)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${n} instead`)}},qT=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",eZ=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&qT(t),tZ=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function nZ(t,e,n){if(BT(),t=await t,eZ(t))return t instanceof File?t:Vl([await t.arrayBuffer()],t.name);if(tZ(t)){const s=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),Vl(await cy(s),e,n)}const r=await cy(t);if(e||(e=uf(t)),!n?.type){const s=r.find(a=>typeof a=="object"&&"type"in a&&a.type);typeof s=="string"&&(n={...n,type:s})}return Vl(r,e,n)}async function cy(t){let e=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)e.push(t);else if(qT(t))e.push(t instanceof Blob?t:await t.arrayBuffer());else if(O0(t))for await(const n of t)e.push(...await cy(n));else{const n=t?.constructor?.name;throw new Error(`Unexpected data type: ${typeof t}${n?`; constructor: ${n}`:""}${rZ(t)}`)}return e}function rZ(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}class Ae{constructor(e){this._client=e}}function FT(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const JS=Object.freeze(Object.create(null)),sZ=(t=FT)=>function(n,...r){if(n.length===1)return n[0];let s=!1;const a=[],l=n.reduce((m,p,y)=>{/[?#]/.test(p)&&(s=!0);const g=r[y];let v=(s?encodeURIComponent:t)(""+g);return y!==r.length&&(g==null||typeof g=="object"&&g.toString===Object.getPrototypeOf(Object.getPrototypeOf(g.hasOwnProperty??JS)??JS)?.toString)&&(v=g+"",a.push({start:m.length+p.length,length:v.length,error:`Value of type ${Object.prototype.toString.call(g).slice(8,-1)} is not a valid path parameter`})),m+p+(y===r.length?"":v)},""),u=l.split(/[?#]/,1)[0],f=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let d;for(;(d=f.exec(u))!==null;)a.push({start:d.index,length:d[0].length,error:`Value "${d[0]}" can't be safely passed as a path parameter`});if(a.sort((m,p)=>m.start-p.start),a.length>0){let m=0;const p=a.reduce((y,g)=>{const v=" ".repeat(g.start-m),w="^".repeat(g.length);return m=g.start+g.length,y+v+w},"");throw new Ne(`Path parameters result in path with invalid segments:
${a.map(y=>y.error).join(`
`)}
${l}
${p}`)}return l},ge=sZ(FT);let VT=class extends Ae{list(e,n={},r){return this._client.getAPIList(ge`/chat/completions/${e}/messages`,Kt,{query:n,...r})}};function nd(t){return t!==void 0&&"function"in t&&t.function!==void 0}function I0(t){return t?.$brand==="auto-parseable-response-format"}function bc(t){return t?.$brand==="auto-parseable-tool"}function iZ(t,e){return!e||!HT(e)?{...t,choices:t.choices.map(n=>(GT(n.message.tool_calls),{...n,message:{...n.message,parsed:null,...n.message.tool_calls?{tool_calls:n.message.tool_calls}:void 0}}))}:N0(t,e)}function N0(t,e){const n=t.choices.map(r=>{if(r.finish_reason==="length")throw new CT;if(r.finish_reason==="content_filter")throw new TT;return GT(r.message.tool_calls),{...r,message:{...r.message,...r.message.tool_calls?{tool_calls:r.message.tool_calls?.map(s=>oZ(e,s))??void 0}:void 0,parsed:r.message.content&&!r.message.refusal?aZ(e,r.message.content):null}}});return{...t,choices:n}}function aZ(t,e){return t.response_format?.type!=="json_schema"?null:t.response_format?.type==="json_schema"?"$parseRaw"in t.response_format?t.response_format.$parseRaw(e):JSON.parse(e):null}function oZ(t,e){const n=t.tools?.find(r=>nd(r)&&r.function?.name===e.function.name);return{...e,function:{...e.function,parsed_arguments:bc(n)?n.$parseRaw(e.function.arguments):n?.function.strict?JSON.parse(e.function.arguments):null}}}function lZ(t,e){if(!t||!("tools"in t)||!t.tools)return!1;const n=t.tools?.find(r=>nd(r)&&r.function?.name===e.function.name);return nd(n)&&(bc(n)||n?.function.strict||!1)}function HT(t){return I0(t.response_format)?!0:t.tools?.some(e=>bc(e)||e.type==="function"&&e.function.strict===!0)??!1}function GT(t){for(const e of t||[])if(e.type!=="function")throw new Ne(`Currently only \`function\` tool calls are supported; Received \`${e.type}\``)}function cZ(t){for(const e of t??[]){if(e.type!=="function")throw new Ne(`Currently only \`function\` tool types support auto-parsing; Received \`${e.type}\``);if(e.function.strict!==!0)throw new Ne(`The \`${e.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}const rd=t=>t?.role==="assistant",KT=t=>t?.role==="tool";var uy,ff,df,Al,Rl,hf,Ol,Ss,Il,sd,id,Va,ZT;class M0{constructor(){uy.add(this),this.controller=new AbortController,ff.set(this,void 0),df.set(this,()=>{}),Al.set(this,()=>{}),Rl.set(this,void 0),hf.set(this,()=>{}),Ol.set(this,()=>{}),Ss.set(this,{}),Il.set(this,!1),sd.set(this,!1),id.set(this,!1),Va.set(this,!1),ze(this,ff,new Promise((e,n)=>{ze(this,df,e,"f"),ze(this,Al,n,"f")})),ze(this,Rl,new Promise((e,n)=>{ze(this,hf,e,"f"),ze(this,Ol,n,"f")})),ee(this,ff,"f").catch(()=>{}),ee(this,Rl,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},ee(this,uy,"m",ZT).bind(this))},0)}_connected(){this.ended||(ee(this,df,"f").call(this),this._emit("connect"))}get ended(){return ee(this,Il,"f")}get errored(){return ee(this,sd,"f")}get aborted(){return ee(this,id,"f")}abort(){this.controller.abort()}on(e,n){return(ee(this,Ss,"f")[e]||(ee(this,Ss,"f")[e]=[])).push({listener:n}),this}off(e,n){const r=ee(this,Ss,"f")[e];if(!r)return this;const s=r.findIndex(a=>a.listener===n);return s>=0&&r.splice(s,1),this}once(e,n){return(ee(this,Ss,"f")[e]||(ee(this,Ss,"f")[e]=[])).push({listener:n,once:!0}),this}emitted(e){return new Promise((n,r)=>{ze(this,Va,!0),e!=="error"&&this.once("error",r),this.once(e,n)})}async done(){ze(this,Va,!0),await ee(this,Rl,"f")}_emit(e,...n){if(ee(this,Il,"f"))return;e==="end"&&(ze(this,Il,!0),ee(this,hf,"f").call(this));const r=ee(this,Ss,"f")[e];if(r&&(ee(this,Ss,"f")[e]=r.filter(s=>!s.once),r.forEach(({listener:s})=>s(...n))),e==="abort"){const s=n[0];!ee(this,Va,"f")&&!r?.length&&Promise.reject(s),ee(this,Al,"f").call(this,s),ee(this,Ol,"f").call(this,s),this._emit("end");return}if(e==="error"){const s=n[0];!ee(this,Va,"f")&&!r?.length&&Promise.reject(s),ee(this,Al,"f").call(this,s),ee(this,Ol,"f").call(this,s),this._emit("end")}}_emitFinal(){}}ff=new WeakMap,df=new WeakMap,Al=new WeakMap,Rl=new WeakMap,hf=new WeakMap,Ol=new WeakMap,Ss=new WeakMap,Il=new WeakMap,sd=new WeakMap,id=new WeakMap,Va=new WeakMap,uy=new WeakSet,ZT=function(e){if(ze(this,sd,!0),e instanceof Error&&e.name==="AbortError"&&(e=new Dr),e instanceof Dr)return ze(this,id,!0),this._emit("abort",e);if(e instanceof Ne)return this._emit("error",e);if(e instanceof Error){const n=new Ne(e.message);return n.cause=e,this._emit("error",n)}return this._emit("error",new Ne(String(e)))};function uZ(t){return typeof t.parse=="function"}var jn,fy,ad,dy,hy,py,JT,QT;const fZ=10;class YT extends M0{constructor(){super(...arguments),jn.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){this._chatCompletions.push(e),this._emit("chatCompletion",e);const n=e.choices[0]?.message;return n&&this._addMessage(n),e}_addMessage(e,n=!0){if("content"in e||(e.content=null),this.messages.push(e),n){if(this._emit("message",e),KT(e)&&e.content)this._emit("functionToolCallResult",e.content);else if(rd(e)&&e.tool_calls)for(const r of e.tool_calls)r.type==="function"&&this._emit("functionToolCall",r.function)}}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new Ne("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),ee(this,jn,"m",fy).call(this)}async finalMessage(){return await this.done(),ee(this,jn,"m",ad).call(this)}async finalFunctionToolCall(){return await this.done(),ee(this,jn,"m",dy).call(this)}async finalFunctionToolCallResult(){return await this.done(),ee(this,jn,"m",hy).call(this)}async totalUsage(){return await this.done(),ee(this,jn,"m",py).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const n=ee(this,jn,"m",ad).call(this);n&&this._emit("finalMessage",n);const r=ee(this,jn,"m",fy).call(this);r&&this._emit("finalContent",r);const s=ee(this,jn,"m",dy).call(this);s&&this._emit("finalFunctionToolCall",s);const a=ee(this,jn,"m",hy).call(this);a!=null&&this._emit("finalFunctionToolCallResult",a),this._chatCompletions.some(l=>l.usage)&&this._emit("totalUsage",ee(this,jn,"m",py).call(this))}async _createChatCompletion(e,n,r){const s=r?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),ee(this,jn,"m",JT).call(this,n);const a=await e.chat.completions.create({...n,stream:!1},{...r,signal:this.controller.signal});return this._connected(),this._addChatCompletion(N0(a,n))}async _runChatCompletion(e,n,r){for(const s of n.messages)this._addMessage(s,!1);return await this._createChatCompletion(e,n,r)}async _runTools(e,n,r){const s="tool",{tool_choice:a="auto",stream:l,...u}=n,f=typeof a!="string"&&a.type==="function"&&a?.function?.name,{maxChatCompletions:d=fZ}=r||{},m=n.tools.map(g=>{if(bc(g)){if(!g.$callback)throw new Ne("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:g.$callback,name:g.function.name,description:g.function.description||"",parameters:g.function.parameters,parse:g.$parseRaw,strict:!0}}}return g}),p={};for(const g of m)g.type==="function"&&(p[g.function.name||g.function.function.name]=g.function);const y="tools"in n?m.map(g=>g.type==="function"?{type:"function",function:{name:g.function.name||g.function.function.name,parameters:g.function.parameters,description:g.function.description,strict:g.function.strict}}:g):void 0;for(const g of n.messages)this._addMessage(g,!1);for(let g=0;g<d;++g){const w=(await this._createChatCompletion(e,{...u,tool_choice:a,tools:y,messages:[...this.messages]},r)).choices[0]?.message;if(!w)throw new Ne("missing message in ChatCompletion response");if(!w.tool_calls?.length)return;for(const E of w.tool_calls){if(E.type!=="function")continue;const k=E.id,{name:C,arguments:T}=E.function,D=p[C];if(D){if(f&&f!==C){const q=`Invalid tool_call: ${JSON.stringify(C)}. ${JSON.stringify(f)} requested. Please try again`;this._addMessage({role:s,tool_call_id:k,content:q});continue}}else{const q=`Invalid tool_call: ${JSON.stringify(C)}. Available options are: ${Object.keys(p).map(H=>JSON.stringify(H)).join(", ")}. Please try again`;this._addMessage({role:s,tool_call_id:k,content:q});continue}let N;try{N=uZ(D)?await D.parse(T):T}catch(q){const H=q instanceof Error?q.message:String(q);this._addMessage({role:s,tool_call_id:k,content:H});continue}const R=await D.function(N,this),$=ee(this,jn,"m",QT).call(this,R);if(this._addMessage({role:s,tool_call_id:k,content:$}),f)return}}}}jn=new WeakSet,fy=function(){return ee(this,jn,"m",ad).call(this).content??null},ad=function(){let e=this.messages.length;for(;e-- >0;){const n=this.messages[e];if(rd(n))return{...n,content:n.content??null,refusal:n.refusal??null}}throw new Ne("stream ended without producing a ChatCompletionMessage with role=assistant")},dy=function(){for(let e=this.messages.length-1;e>=0;e--){const n=this.messages[e];if(rd(n)&&n?.tool_calls?.length)return n.tool_calls.filter(r=>r.type==="function").at(-1)?.function}},hy=function(){for(let e=this.messages.length-1;e>=0;e--){const n=this.messages[e];if(KT(n)&&n.content!=null&&typeof n.content=="string"&&this.messages.some(r=>r.role==="assistant"&&r.tool_calls?.some(s=>s.type==="function"&&s.id===n.tool_call_id)))return n.content}},py=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:n}of this._chatCompletions)n&&(e.completion_tokens+=n.completion_tokens,e.prompt_tokens+=n.prompt_tokens,e.total_tokens+=n.total_tokens);return e},JT=function(e){if(e.n!=null&&e.n>1)throw new Ne("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},QT=function(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)};class D0 extends YT{static runTools(e,n,r){const s=new D0,a={...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"runTools"}};return s._run(()=>s._runTools(e,n,a)),s}_addMessage(e,n=!0){super._addMessage(e,n),rd(e)&&e.content&&this._emit("content",e.content)}}const WT=1,XT=2,eA=4,tA=8,nA=16,rA=32,sA=64,iA=128,aA=256,oA=iA|aA,lA=nA|rA|oA|sA,cA=WT|XT|lA,uA=eA|tA,dZ=cA|uA,fn={STR:WT,NUM:XT,ARR:eA,OBJ:tA,NULL:nA,BOOL:rA,NAN:sA,INFINITY:iA,MINUS_INFINITY:aA,INF:oA,SPECIAL:lA,ATOM:cA,COLLECTION:uA,ALL:dZ};class hZ extends Error{}class pZ extends Error{}function mZ(t,e=fn.ALL){if(typeof t!="string")throw new TypeError(`expecting str, got ${typeof t}`);if(!t.trim())throw new Error(`${t} is empty`);return gZ(t.trim(),e)}const gZ=(t,e)=>{const n=t.length;let r=0;const s=y=>{throw new hZ(`${y} at position ${r}`)},a=y=>{throw new pZ(`${y} at position ${r}`)},l=()=>(p(),r>=n&&s("Unexpected end of input"),t[r]==='"'?u():t[r]==="{"?f():t[r]==="["?d():t.substring(r,r+4)==="null"||fn.NULL&e&&n-r<4&&"null".startsWith(t.substring(r))?(r+=4,null):t.substring(r,r+4)==="true"||fn.BOOL&e&&n-r<4&&"true".startsWith(t.substring(r))?(r+=4,!0):t.substring(r,r+5)==="false"||fn.BOOL&e&&n-r<5&&"false".startsWith(t.substring(r))?(r+=5,!1):t.substring(r,r+8)==="Infinity"||fn.INFINITY&e&&n-r<8&&"Infinity".startsWith(t.substring(r))?(r+=8,1/0):t.substring(r,r+9)==="-Infinity"||fn.MINUS_INFINITY&e&&1<n-r&&n-r<9&&"-Infinity".startsWith(t.substring(r))?(r+=9,-1/0):t.substring(r,r+3)==="NaN"||fn.NAN&e&&n-r<3&&"NaN".startsWith(t.substring(r))?(r+=3,NaN):m()),u=()=>{const y=r;let g=!1;for(r++;r<n&&(t[r]!=='"'||g&&t[r-1]==="\\");)g=t[r]==="\\"?!g:!1,r++;if(t.charAt(r)=='"')try{return JSON.parse(t.substring(y,++r-Number(g)))}catch(v){a(String(v))}else if(fn.STR&e)try{return JSON.parse(t.substring(y,r-Number(g))+'"')}catch{return JSON.parse(t.substring(y,t.lastIndexOf("\\"))+'"')}s("Unterminated string literal")},f=()=>{r++,p();const y={};try{for(;t[r]!=="}";){if(p(),r>=n&&fn.OBJ&e)return y;const g=u();p(),r++;try{const v=l();Object.defineProperty(y,g,{value:v,writable:!0,enumerable:!0,configurable:!0})}catch(v){if(fn.OBJ&e)return y;throw v}p(),t[r]===","&&r++}}catch{if(fn.OBJ&e)return y;s("Expected '}' at end of object")}return r++,y},d=()=>{r++;const y=[];try{for(;t[r]!=="]";)y.push(l()),p(),t[r]===","&&r++}catch{if(fn.ARR&e)return y;s("Expected ']' at end of array")}return r++,y},m=()=>{if(r===0){t==="-"&&fn.NUM&e&&s("Not sure what '-' is");try{return JSON.parse(t)}catch(g){if(fn.NUM&e)try{return t[t.length-1]==="."?JSON.parse(t.substring(0,t.lastIndexOf("."))):JSON.parse(t.substring(0,t.lastIndexOf("e")))}catch{}a(String(g))}}const y=r;for(t[r]==="-"&&r++;t[r]&&!",]}".includes(t[r]);)r++;r==n&&!(fn.NUM&e)&&s("Unterminated number literal");try{return JSON.parse(t.substring(y,r))}catch{t.substring(y,r)==="-"&&fn.NUM&e&&s("Not sure what '-' is");try{return JSON.parse(t.substring(y,t.lastIndexOf("e")))}catch(v){a(String(v))}}},p=()=>{for(;r<n&&` 
\r	`.includes(t[r]);)r++};return l()},QS=t=>mZ(t,fn.ALL^fn.NUM);var Qt,ws,Ba,ei,Wm,Qu,Xm,eg,tg,Yu,ng,YS;class oc extends YT{constructor(e){super(),Qt.add(this),ws.set(this,void 0),Ba.set(this,void 0),ei.set(this,void 0),ze(this,ws,e),ze(this,Ba,[])}get currentChatCompletionSnapshot(){return ee(this,ei,"f")}static fromReadableStream(e){const n=new oc(null);return n._run(()=>n._fromReadableStream(e)),n}static createChatCompletion(e,n,r){const s=new oc(n);return s._run(()=>s._runChatCompletion(e,{...n,stream:!0},{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),s}async _createChatCompletion(e,n,r){super._createChatCompletion;const s=r?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),ee(this,Qt,"m",Wm).call(this);const a=await e.chat.completions.create({...n,stream:!0},{...r,signal:this.controller.signal});this._connected();for await(const l of a)ee(this,Qt,"m",Xm).call(this,l);if(a.controller.signal?.aborted)throw new Dr;return this._addChatCompletion(ee(this,Qt,"m",Yu).call(this))}async _fromReadableStream(e,n){const r=n?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),ee(this,Qt,"m",Wm).call(this),this._connected();const s=Wr.fromReadableStream(e,this.controller);let a;for await(const l of s)a&&a!==l.id&&this._addChatCompletion(ee(this,Qt,"m",Yu).call(this)),ee(this,Qt,"m",Xm).call(this,l),a=l.id;if(s.controller.signal?.aborted)throw new Dr;return this._addChatCompletion(ee(this,Qt,"m",Yu).call(this))}[(ws=new WeakMap,Ba=new WeakMap,ei=new WeakMap,Qt=new WeakSet,Wm=function(){this.ended||ze(this,ei,void 0)},Qu=function(n){let r=ee(this,Ba,"f")[n.index];return r||(r={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},ee(this,Ba,"f")[n.index]=r,r)},Xm=function(n){if(this.ended)return;const r=ee(this,Qt,"m",YS).call(this,n);this._emit("chunk",n,r);for(const s of n.choices){const a=r.choices[s.index];s.delta.content!=null&&a.message?.role==="assistant"&&a.message?.content&&(this._emit("content",s.delta.content,a.message.content),this._emit("content.delta",{delta:s.delta.content,snapshot:a.message.content,parsed:a.message.parsed})),s.delta.refusal!=null&&a.message?.role==="assistant"&&a.message?.refusal&&this._emit("refusal.delta",{delta:s.delta.refusal,snapshot:a.message.refusal}),s.logprobs?.content!=null&&a.message?.role==="assistant"&&this._emit("logprobs.content.delta",{content:s.logprobs?.content,snapshot:a.logprobs?.content??[]}),s.logprobs?.refusal!=null&&a.message?.role==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:s.logprobs?.refusal,snapshot:a.logprobs?.refusal??[]});const l=ee(this,Qt,"m",Qu).call(this,a);a.finish_reason&&(ee(this,Qt,"m",tg).call(this,a),l.current_tool_call_index!=null&&ee(this,Qt,"m",eg).call(this,a,l.current_tool_call_index));for(const u of s.delta.tool_calls??[])l.current_tool_call_index!==u.index&&(ee(this,Qt,"m",tg).call(this,a),l.current_tool_call_index!=null&&ee(this,Qt,"m",eg).call(this,a,l.current_tool_call_index)),l.current_tool_call_index=u.index;for(const u of s.delta.tool_calls??[]){const f=a.message.tool_calls?.[u.index];f?.type&&(f?.type==="function"?this._emit("tool_calls.function.arguments.delta",{name:f.function?.name,index:u.index,arguments:f.function.arguments,parsed_arguments:f.function.parsed_arguments,arguments_delta:u.function?.arguments??""}):(f?.type,void 0))}}},eg=function(n,r){if(ee(this,Qt,"m",Qu).call(this,n).done_tool_calls.has(r))return;const a=n.message.tool_calls?.[r];if(!a)throw new Error("no tool call snapshot");if(!a.type)throw new Error("tool call snapshot missing `type`");if(a.type==="function"){const l=ee(this,ws,"f")?.tools?.find(u=>nd(u)&&u.function.name===a.function.name);this._emit("tool_calls.function.arguments.done",{name:a.function.name,index:r,arguments:a.function.arguments,parsed_arguments:bc(l)?l.$parseRaw(a.function.arguments):l?.function.strict?JSON.parse(a.function.arguments):null})}else a.type},tg=function(n){const r=ee(this,Qt,"m",Qu).call(this,n);if(n.message.content&&!r.content_done){r.content_done=!0;const s=ee(this,Qt,"m",ng).call(this);this._emit("content.done",{content:n.message.content,parsed:s?s.$parseRaw(n.message.content):null})}n.message.refusal&&!r.refusal_done&&(r.refusal_done=!0,this._emit("refusal.done",{refusal:n.message.refusal})),n.logprobs?.content&&!r.logprobs_content_done&&(r.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:n.logprobs.content})),n.logprobs?.refusal&&!r.logprobs_refusal_done&&(r.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:n.logprobs.refusal}))},Yu=function(){if(this.ended)throw new Ne("stream has ended, this shouldn't happen");const n=ee(this,ei,"f");if(!n)throw new Ne("request ended without sending any chunks");return ze(this,ei,void 0),ze(this,Ba,[]),yZ(n,ee(this,ws,"f"))},ng=function(){const n=ee(this,ws,"f")?.response_format;return I0(n)?n:null},YS=function(n){var r,s,a,l;let u=ee(this,ei,"f");const{choices:f,...d}=n;u?Object.assign(u,d):u=ze(this,ei,{...d,choices:[]});for(const{delta:m,finish_reason:p,index:y,logprobs:g=null,...v}of n.choices){let w=u.choices[y];if(w||(w=u.choices[y]={finish_reason:p,index:y,message:{},logprobs:g,...v}),g)if(!w.logprobs)w.logprobs=Object.assign({},g);else{const{content:R,refusal:$,...q}=g;Object.assign(w.logprobs,q),R&&((r=w.logprobs).content??(r.content=[]),w.logprobs.content.push(...R)),$&&((s=w.logprobs).refusal??(s.refusal=[]),w.logprobs.refusal.push(...$))}if(p&&(w.finish_reason=p,ee(this,ws,"f")&&HT(ee(this,ws,"f")))){if(p==="length")throw new CT;if(p==="content_filter")throw new TT}if(Object.assign(w,v),!m)continue;const{content:E,refusal:k,function_call:C,role:T,tool_calls:D,...N}=m;if(Object.assign(w.message,N),k&&(w.message.refusal=(w.message.refusal||"")+k),T&&(w.message.role=T),C&&(w.message.function_call?(C.name&&(w.message.function_call.name=C.name),C.arguments&&((a=w.message.function_call).arguments??(a.arguments=""),w.message.function_call.arguments+=C.arguments)):w.message.function_call=C),E&&(w.message.content=(w.message.content||"")+E,!w.message.refusal&&ee(this,Qt,"m",ng).call(this)&&(w.message.parsed=QS(w.message.content))),D){w.message.tool_calls||(w.message.tool_calls=[]);for(const{index:R,id:$,type:q,function:H,...M}of D){const Q=(l=w.message.tool_calls)[R]??(l[R]={});Object.assign(Q,M),$&&(Q.id=$),q&&(Q.type=q),H&&(Q.function??(Q.function={name:H.name??"",arguments:""})),H?.name&&(Q.function.name=H.name),H?.arguments&&(Q.function.arguments+=H.arguments,lZ(ee(this,ws,"f"),Q)&&(Q.function.parsed_arguments=QS(Q.function.arguments)))}}}return u},Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("chunk",s=>{const a=n.shift();a?a.resolve(s):e.push(s)}),this.on("end",()=>{r=!0;for(const s of n)s.resolve(void 0);n.length=0}),this.on("abort",s=>{r=!0;for(const a of n)a.reject(s);n.length=0}),this.on("error",s=>{r=!0;for(const a of n)a.reject(s);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((a,l)=>n.push({resolve:a,reject:l})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new Wr(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function yZ(t,e){const{id:n,choices:r,created:s,model:a,system_fingerprint:l,...u}=t,f={...u,id:n,choices:r.map(({message:d,finish_reason:m,index:p,logprobs:y,...g})=>{if(!m)throw new Ne(`missing finish_reason for choice ${p}`);const{content:v=null,function_call:w,tool_calls:E,...k}=d,C=d.role;if(!C)throw new Ne(`missing role for choice ${p}`);if(w){const{arguments:T,name:D}=w;if(T==null)throw new Ne(`missing function_call.arguments for choice ${p}`);if(!D)throw new Ne(`missing function_call.name for choice ${p}`);return{...g,message:{content:v,function_call:{arguments:T,name:D},role:C,refusal:d.refusal??null},finish_reason:m,index:p,logprobs:y}}return E?{...g,index:p,finish_reason:m,logprobs:y,message:{...k,role:C,content:v,refusal:d.refusal??null,tool_calls:E.map((T,D)=>{const{function:N,type:R,id:$,...q}=T,{arguments:H,name:M,...Q}=N||{};if($==null)throw new Ne(`missing choices[${p}].tool_calls[${D}].id
${Wu(t)}`);if(R==null)throw new Ne(`missing choices[${p}].tool_calls[${D}].type
${Wu(t)}`);if(M==null)throw new Ne(`missing choices[${p}].tool_calls[${D}].function.name
${Wu(t)}`);if(H==null)throw new Ne(`missing choices[${p}].tool_calls[${D}].function.arguments
${Wu(t)}`);return{...q,id:$,type:R,function:{...Q,name:M,arguments:H}}})}}:{...g,message:{...k,content:v,role:C,refusal:d.refusal??null},finish_reason:m,index:p,logprobs:y}}),created:s,model:a,object:"chat.completion",...l?{system_fingerprint:l}:{}};return iZ(f,e)}function Wu(t){return JSON.stringify(t)}class od extends oc{static fromReadableStream(e){const n=new od(null);return n._run(()=>n._fromReadableStream(e)),n}static runTools(e,n,r){const s=new od(n),a={...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"runTools"}};return s._run(()=>s._runTools(e,n,a)),s}}let j0=class extends Ae{constructor(){super(...arguments),this.messages=new VT(this._client)}create(e,n){return this._client.post("/chat/completions",{body:e,...n,stream:e.stream??!1})}retrieve(e,n){return this._client.get(ge`/chat/completions/${e}`,n)}update(e,n,r){return this._client.post(ge`/chat/completions/${e}`,{body:n,...r})}list(e={},n){return this._client.getAPIList("/chat/completions",Kt,{query:e,...n})}delete(e,n){return this._client.delete(ge`/chat/completions/${e}`,n)}parse(e,n){return cZ(e.tools),this._client.chat.completions.create(e,{...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"chat.completions.parse"}})._thenUnwrap(r=>N0(r,e))}runTools(e,n){return e.stream?od.runTools(this._client,e,n):D0.runTools(this._client,e,n)}stream(e,n){return oc.createChatCompletion(this._client,e,n)}};j0.Messages=VT;class L0 extends Ae{constructor(){super(...arguments),this.completions=new j0(this._client)}}L0.Completions=j0;const fA=Symbol("brand.privateNullableHeaders");function*bZ(t){if(!t)return;if(fA in t){const{values:r,nulls:s}=t;yield*r.entries();for(const a of s)yield[a,null];return}let e=!1,n;t instanceof Headers?n=t.entries():jS(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let r of n){const s=r[0];if(typeof s!="string")throw new TypeError("expected header name to be a string");const a=jS(r[1])?r[1]:[r[1]];let l=!1;for(const u of a)u!==void 0&&(e&&!l&&(l=!0,yield[s,null]),yield[s,u])}}const Ee=t=>{const e=new Headers,n=new Set;for(const r of t){const s=new Set;for(const[a,l]of bZ(r)){const u=a.toLowerCase();s.has(u)||(e.delete(a),s.add(u)),l===null?(e.delete(a),n.add(u)):(e.append(a,l),n.delete(u))}}return{[fA]:!0,values:e,nulls:n}};class dA extends Ae{create(e,n){return this._client.post("/audio/speech",{body:e,...n,headers:Ee([{Accept:"application/octet-stream"},n?.headers]),__binaryResponse:!0})}}class hA extends Ae{create(e,n){return this._client.post("/audio/transcriptions",Gi({body:e,...n,stream:e.stream??!1,__metadata:{model:e.model}},this._client))}}class pA extends Ae{create(e,n){return this._client.post("/audio/translations",Gi({body:e,...n,__metadata:{model:e.model}},this._client))}}class _c extends Ae{constructor(){super(...arguments),this.transcriptions=new hA(this._client),this.translations=new pA(this._client),this.speech=new dA(this._client)}}_c.Transcriptions=hA;_c.Translations=pA;_c.Speech=dA;class mA extends Ae{create(e,n){return this._client.post("/batches",{body:e,...n})}retrieve(e,n){return this._client.get(ge`/batches/${e}`,n)}list(e={},n){return this._client.getAPIList("/batches",Kt,{query:e,...n})}cancel(e,n){return this._client.post(ge`/batches/${e}/cancel`,n)}}class gA extends Ae{create(e,n){return this._client.post("/assistants",{body:e,...n,headers:Ee([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}retrieve(e,n){return this._client.get(ge`/assistants/${e}`,{...n,headers:Ee([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}update(e,n,r){return this._client.post(ge`/assistants/${e}`,{body:n,...r,headers:Ee([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(e={},n){return this._client.getAPIList("/assistants",Kt,{query:e,...n,headers:Ee([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}delete(e,n){return this._client.delete(ge`/assistants/${e}`,{...n,headers:Ee([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}}let yA=class extends Ae{create(e,n){return this._client.post("/realtime/sessions",{body:e,...n,headers:Ee([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}};class bA extends Ae{create(e,n){return this._client.post("/realtime/transcription_sessions",{body:e,...n,headers:Ee([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}}let Bd=class extends Ae{constructor(){super(...arguments),this.sessions=new yA(this._client),this.transcriptionSessions=new bA(this._client)}};Bd.Sessions=yA;Bd.TranscriptionSessions=bA;class _A extends Ae{create(e,n){return this._client.post("/chatkit/sessions",{body:e,...n,headers:Ee([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}cancel(e,n){return this._client.post(ge`/chatkit/sessions/${e}/cancel`,{...n,headers:Ee([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}}let vA=class extends Ae{retrieve(e,n){return this._client.get(ge`/chatkit/threads/${e}`,{...n,headers:Ee([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}list(e={},n){return this._client.getAPIList("/chatkit/threads",td,{query:e,...n,headers:Ee([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}delete(e,n){return this._client.delete(ge`/chatkit/threads/${e}`,{...n,headers:Ee([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}listItems(e,n={},r){return this._client.getAPIList(ge`/chatkit/threads/${e}/items`,td,{query:n,...r,headers:Ee([{"OpenAI-Beta":"chatkit_beta=v1"},r?.headers])})}};class $d extends Ae{constructor(){super(...arguments),this.sessions=new _A(this._client),this.threads=new vA(this._client)}}$d.Sessions=_A;$d.Threads=vA;class xA extends Ae{create(e,n,r){return this._client.post(ge`/threads/${e}/messages`,{body:n,...r,headers:Ee([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}retrieve(e,n,r){const{thread_id:s}=n;return this._client.get(ge`/threads/${s}/messages/${e}`,{...r,headers:Ee([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}update(e,n,r){const{thread_id:s,...a}=n;return this._client.post(ge`/threads/${s}/messages/${e}`,{body:a,...r,headers:Ee([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(e,n={},r){return this._client.getAPIList(ge`/threads/${e}/messages`,Kt,{query:n,...r,headers:Ee([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}delete(e,n,r){const{thread_id:s}=n;return this._client.delete(ge`/threads/${s}/messages/${e}`,{...r,headers:Ee([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}}class wA extends Ae{retrieve(e,n,r){const{thread_id:s,run_id:a,...l}=n;return this._client.get(ge`/threads/${s}/runs/${a}/steps/${e}`,{query:l,...r,headers:Ee([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(e,n,r){const{thread_id:s,...a}=n;return this._client.getAPIList(ge`/threads/${s}/runs/${e}/steps`,Kt,{query:a,...r,headers:Ee([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}}const _Z=t=>{if(typeof Buffer<"u"){const e=Buffer.from(t,"base64");return Array.from(new Float32Array(e.buffer,e.byteOffset,e.length/Float32Array.BYTES_PER_ELEMENT))}else{const e=atob(t),n=e.length,r=new Uint8Array(n);for(let s=0;s<n;s++)r[s]=e.charCodeAt(s);return Array.from(new Float32Array(r.buffer))}};var vZ={};const $a=t=>{if(typeof globalThis.process<"u")return vZ?.[t]?.trim()??void 0;if(typeof globalThis.Deno<"u")return globalThis.Deno.env?.get?.(t)?.trim()};var vn,$i,my,Yr,pf,$r,Ui,Ya,zi,ld,pr,mf,gf,Hl,Nl,Ml,WS,XS,ek,tk,nk,rk,sk;class Gl extends M0{constructor(){super(...arguments),vn.add(this),my.set(this,[]),Yr.set(this,{}),pf.set(this,{}),$r.set(this,void 0),Ui.set(this,void 0),Ya.set(this,void 0),zi.set(this,void 0),ld.set(this,void 0),pr.set(this,void 0),mf.set(this,void 0),gf.set(this,void 0),Hl.set(this,void 0)}[(my=new WeakMap,Yr=new WeakMap,pf=new WeakMap,$r=new WeakMap,Ui=new WeakMap,Ya=new WeakMap,zi=new WeakMap,ld=new WeakMap,pr=new WeakMap,mf=new WeakMap,gf=new WeakMap,Hl=new WeakMap,vn=new WeakSet,Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("event",s=>{const a=n.shift();a?a.resolve(s):e.push(s)}),this.on("end",()=>{r=!0;for(const s of n)s.resolve(void 0);n.length=0}),this.on("abort",s=>{r=!0;for(const a of n)a.reject(s);n.length=0}),this.on("error",s=>{r=!0;for(const a of n)a.reject(s);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((a,l)=>n.push({resolve:a,reject:l})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){const n=new $i;return n._run(()=>n._fromReadableStream(e)),n}async _fromReadableStream(e,n){const r=n?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),this._connected();const s=Wr.fromReadableStream(e,this.controller);for await(const a of s)ee(this,vn,"m",Nl).call(this,a);if(s.controller.signal?.aborted)throw new Dr;return this._addRun(ee(this,vn,"m",Ml).call(this))}toReadableStream(){return new Wr(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,n,r,s){const a=new $i;return a._run(()=>a._runToolAssistantStream(e,n,r,{...s,headers:{...s?.headers,"X-Stainless-Helper-Method":"stream"}})),a}async _createToolAssistantStream(e,n,r,s){const a=s?.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort()));const l={...r,stream:!0},u=await e.submitToolOutputs(n,l,{...s,signal:this.controller.signal});this._connected();for await(const f of u)ee(this,vn,"m",Nl).call(this,f);if(u.controller.signal?.aborted)throw new Dr;return this._addRun(ee(this,vn,"m",Ml).call(this))}static createThreadAssistantStream(e,n,r){const s=new $i;return s._run(()=>s._threadAssistantStream(e,n,{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),s}static createAssistantStream(e,n,r,s){const a=new $i;return a._run(()=>a._runAssistantStream(e,n,r,{...s,headers:{...s?.headers,"X-Stainless-Helper-Method":"stream"}})),a}currentEvent(){return ee(this,mf,"f")}currentRun(){return ee(this,gf,"f")}currentMessageSnapshot(){return ee(this,$r,"f")}currentRunStepSnapshot(){return ee(this,Hl,"f")}async finalRunSteps(){return await this.done(),Object.values(ee(this,Yr,"f"))}async finalMessages(){return await this.done(),Object.values(ee(this,pf,"f"))}async finalRun(){if(await this.done(),!ee(this,Ui,"f"))throw Error("Final run was not received.");return ee(this,Ui,"f")}async _createThreadAssistantStream(e,n,r){const s=r?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort()));const a={...n,stream:!0},l=await e.createAndRun(a,{...r,signal:this.controller.signal});this._connected();for await(const u of l)ee(this,vn,"m",Nl).call(this,u);if(l.controller.signal?.aborted)throw new Dr;return this._addRun(ee(this,vn,"m",Ml).call(this))}async _createAssistantStream(e,n,r,s){const a=s?.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort()));const l={...r,stream:!0},u=await e.create(n,l,{...s,signal:this.controller.signal});this._connected();for await(const f of u)ee(this,vn,"m",Nl).call(this,f);if(u.controller.signal?.aborted)throw new Dr;return this._addRun(ee(this,vn,"m",Ml).call(this))}static accumulateDelta(e,n){for(const[r,s]of Object.entries(n)){if(!e.hasOwnProperty(r)){e[r]=s;continue}let a=e[r];if(a==null){e[r]=s;continue}if(r==="index"||r==="type"){e[r]=s;continue}if(typeof a=="string"&&typeof s=="string")a+=s;else if(typeof a=="number"&&typeof s=="number")a+=s;else if(Jm(a)&&Jm(s))a=this.accumulateDelta(a,s);else if(Array.isArray(a)&&Array.isArray(s)){if(a.every(l=>typeof l=="string"||typeof l=="number")){a.push(...s);continue}for(const l of s){if(!Jm(l))throw new Error(`Expected array delta entry to be an object but got: ${l}`);const u=l.index;if(u==null)throw console.error(l),new Error("Expected array delta entry to have an `index` property");if(typeof u!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${u}`);const f=a[u];f==null?a.push(l):a[u]=this.accumulateDelta(f,l)}continue}else throw Error(`Unhandled record type: ${r}, deltaValue: ${s}, accValue: ${a}`);e[r]=a}return e}_addRun(e){return e}async _threadAssistantStream(e,n,r){return await this._createThreadAssistantStream(n,e,r)}async _runAssistantStream(e,n,r,s){return await this._createAssistantStream(n,e,r,s)}async _runToolAssistantStream(e,n,r,s){return await this._createToolAssistantStream(n,e,r,s)}}$i=Gl,Nl=function(e){if(!this.ended)switch(ze(this,mf,e),ee(this,vn,"m",ek).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":ee(this,vn,"m",sk).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":ee(this,vn,"m",XS).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":ee(this,vn,"m",WS).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},Ml=function(){if(this.ended)throw new Ne("stream has ended, this shouldn't happen");if(!ee(this,Ui,"f"))throw Error("Final run has not been received");return ee(this,Ui,"f")},WS=function(e){const[n,r]=ee(this,vn,"m",nk).call(this,e,ee(this,$r,"f"));ze(this,$r,n),ee(this,pf,"f")[n.id]=n;for(const s of r){const a=n.content[s.index];a?.type=="text"&&this._emit("textCreated",a.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,n),e.data.delta.content)for(const s of e.data.delta.content){if(s.type=="text"&&s.text){let a=s.text,l=n.content[s.index];if(l&&l.type=="text")this._emit("textDelta",a,l.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(s.index!=ee(this,Ya,"f")){if(ee(this,zi,"f"))switch(ee(this,zi,"f").type){case"text":this._emit("textDone",ee(this,zi,"f").text,ee(this,$r,"f"));break;case"image_file":this._emit("imageFileDone",ee(this,zi,"f").image_file,ee(this,$r,"f"));break}ze(this,Ya,s.index)}ze(this,zi,n.content[s.index])}break;case"thread.message.completed":case"thread.message.incomplete":if(ee(this,Ya,"f")!==void 0){const s=e.data.content[ee(this,Ya,"f")];if(s)switch(s.type){case"image_file":this._emit("imageFileDone",s.image_file,ee(this,$r,"f"));break;case"text":this._emit("textDone",s.text,ee(this,$r,"f"));break}}ee(this,$r,"f")&&this._emit("messageDone",e.data),ze(this,$r,void 0)}},XS=function(e){const n=ee(this,vn,"m",tk).call(this,e);switch(ze(this,Hl,n),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":const r=e.data.delta;if(r.step_details&&r.step_details.type=="tool_calls"&&r.step_details.tool_calls&&n.step_details.type=="tool_calls")for(const a of r.step_details.tool_calls)a.index==ee(this,ld,"f")?this._emit("toolCallDelta",a,n.step_details.tool_calls[a.index]):(ee(this,pr,"f")&&this._emit("toolCallDone",ee(this,pr,"f")),ze(this,ld,a.index),ze(this,pr,n.step_details.tool_calls[a.index]),ee(this,pr,"f")&&this._emit("toolCallCreated",ee(this,pr,"f")));this._emit("runStepDelta",e.data.delta,n);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":ze(this,Hl,void 0),e.data.step_details.type=="tool_calls"&&ee(this,pr,"f")&&(this._emit("toolCallDone",ee(this,pr,"f")),ze(this,pr,void 0)),this._emit("runStepDone",e.data,n);break}},ek=function(e){ee(this,my,"f").push(e),this._emit("event",e)},tk=function(e){switch(e.event){case"thread.run.step.created":return ee(this,Yr,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let n=ee(this,Yr,"f")[e.data.id];if(!n)throw Error("Received a RunStepDelta before creation of a snapshot");let r=e.data;if(r.delta){const s=$i.accumulateDelta(n,r.delta);ee(this,Yr,"f")[e.data.id]=s}return ee(this,Yr,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":ee(this,Yr,"f")[e.data.id]=e.data;break}if(ee(this,Yr,"f")[e.data.id])return ee(this,Yr,"f")[e.data.id];throw new Error("No snapshot available")},nk=function(e,n){let r=[];switch(e.event){case"thread.message.created":return[e.data,r];case"thread.message.delta":if(!n)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let s=e.data;if(s.delta.content)for(const a of s.delta.content)if(a.index in n.content){let l=n.content[a.index];n.content[a.index]=ee(this,vn,"m",rk).call(this,a,l)}else n.content[a.index]=a,r.push(a);return[n,r];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(n)return[n,r];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},rk=function(e,n){return $i.accumulateDelta(n,e)},sk=function(e){switch(ze(this,gf,e.data),e.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":case"thread.run.incomplete":ze(this,Ui,e.data),ee(this,pr,"f")&&(this._emit("toolCallDone",ee(this,pr,"f")),ze(this,pr,void 0));break}};let z0=class extends Ae{constructor(){super(...arguments),this.steps=new wA(this._client)}create(e,n,r){const{include:s,...a}=n;return this._client.post(ge`/threads/${e}/runs`,{query:{include:s},body:a,...r,headers:Ee([{"OpenAI-Beta":"assistants=v2"},r?.headers]),stream:n.stream??!1})}retrieve(e,n,r){const{thread_id:s}=n;return this._client.get(ge`/threads/${s}/runs/${e}`,{...r,headers:Ee([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}update(e,n,r){const{thread_id:s,...a}=n;return this._client.post(ge`/threads/${s}/runs/${e}`,{body:a,...r,headers:Ee([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(e,n={},r){return this._client.getAPIList(ge`/threads/${e}/runs`,Kt,{query:n,...r,headers:Ee([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}cancel(e,n,r){const{thread_id:s}=n;return this._client.post(ge`/threads/${s}/runs/${e}/cancel`,{...r,headers:Ee([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}async createAndPoll(e,n,r){const s=await this.create(e,n,r);return await this.poll(s.id,{thread_id:e},r)}createAndStream(e,n,r){return Gl.createAssistantStream(e,this._client.beta.threads.runs,n,r)}async poll(e,n,r){const s=Ee([r?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":r?.pollIntervalMs?.toString()??void 0}]);for(;;){const{data:a,response:l}=await this.retrieve(e,n,{...r,headers:{...r?.headers,...s}}).withResponse();switch(a.status){case"queued":case"in_progress":case"cancelling":let u=5e3;if(r?.pollIntervalMs)u=r.pollIntervalMs;else{const f=l.headers.get("openai-poll-after-ms");if(f){const d=parseInt(f);isNaN(d)||(u=d)}}await yc(u);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return a}}}stream(e,n,r){return Gl.createAssistantStream(e,this._client.beta.threads.runs,n,r)}submitToolOutputs(e,n,r){const{thread_id:s,...a}=n;return this._client.post(ge`/threads/${s}/runs/${e}/submit_tool_outputs`,{body:a,...r,headers:Ee([{"OpenAI-Beta":"assistants=v2"},r?.headers]),stream:n.stream??!1})}async submitToolOutputsAndPoll(e,n,r){const s=await this.submitToolOutputs(e,n,r);return await this.poll(s.id,n,r)}submitToolOutputsStream(e,n,r){return Gl.createToolAssistantStream(e,this._client.beta.threads.runs,n,r)}};z0.Steps=wA;class Ud extends Ae{constructor(){super(...arguments),this.runs=new z0(this._client),this.messages=new xA(this._client)}create(e={},n){return this._client.post("/threads",{body:e,...n,headers:Ee([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}retrieve(e,n){return this._client.get(ge`/threads/${e}`,{...n,headers:Ee([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}update(e,n,r){return this._client.post(ge`/threads/${e}`,{body:n,...r,headers:Ee([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}delete(e,n){return this._client.delete(ge`/threads/${e}`,{...n,headers:Ee([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}createAndRun(e,n){return this._client.post("/threads/runs",{body:e,...n,headers:Ee([{"OpenAI-Beta":"assistants=v2"},n?.headers]),stream:e.stream??!1})}async createAndRunPoll(e,n){const r=await this.createAndRun(e,n);return await this.runs.poll(r.id,{thread_id:r.thread_id},n)}createAndRunStream(e,n){return Gl.createThreadAssistantStream(e,this._client.beta.threads,n)}}Ud.Runs=z0;Ud.Messages=xA;class yo extends Ae{constructor(){super(...arguments),this.realtime=new Bd(this._client),this.chatkit=new $d(this._client),this.assistants=new gA(this._client),this.threads=new Ud(this._client)}}yo.Realtime=Bd;yo.ChatKit=$d;yo.Assistants=gA;yo.Threads=Ud;class SA extends Ae{create(e,n){return this._client.post("/completions",{body:e,...n,stream:e.stream??!1})}}class kA extends Ae{retrieve(e,n,r){const{container_id:s}=n;return this._client.get(ge`/containers/${s}/files/${e}/content`,{...r,headers:Ee([{Accept:"application/binary"},r?.headers]),__binaryResponse:!0})}}let P0=class extends Ae{constructor(){super(...arguments),this.content=new kA(this._client)}create(e,n,r){return this._client.post(ge`/containers/${e}/files`,Gi({body:n,...r},this._client))}retrieve(e,n,r){const{container_id:s}=n;return this._client.get(ge`/containers/${s}/files/${e}`,r)}list(e,n={},r){return this._client.getAPIList(ge`/containers/${e}/files`,Kt,{query:n,...r})}delete(e,n,r){const{container_id:s}=n;return this._client.delete(ge`/containers/${s}/files/${e}`,{...r,headers:Ee([{Accept:"*/*"},r?.headers])})}};P0.Content=kA;class B0 extends Ae{constructor(){super(...arguments),this.files=new P0(this._client)}create(e,n){return this._client.post("/containers",{body:e,...n})}retrieve(e,n){return this._client.get(ge`/containers/${e}`,n)}list(e={},n){return this._client.getAPIList("/containers",Kt,{query:e,...n})}delete(e,n){return this._client.delete(ge`/containers/${e}`,{...n,headers:Ee([{Accept:"*/*"},n?.headers])})}}B0.Files=P0;class EA extends Ae{create(e,n,r){const{include:s,...a}=n;return this._client.post(ge`/conversations/${e}/items`,{query:{include:s},body:a,...r})}retrieve(e,n,r){const{conversation_id:s,...a}=n;return this._client.get(ge`/conversations/${s}/items/${e}`,{query:a,...r})}list(e,n={},r){return this._client.getAPIList(ge`/conversations/${e}/items`,td,{query:n,...r})}delete(e,n,r){const{conversation_id:s}=n;return this._client.delete(ge`/conversations/${s}/items/${e}`,r)}}class $0 extends Ae{constructor(){super(...arguments),this.items=new EA(this._client)}create(e={},n){return this._client.post("/conversations",{body:e,...n})}retrieve(e,n){return this._client.get(ge`/conversations/${e}`,n)}update(e,n,r){return this._client.post(ge`/conversations/${e}`,{body:n,...r})}delete(e,n){return this._client.delete(ge`/conversations/${e}`,n)}}$0.Items=EA;class CA extends Ae{create(e,n){const r=!!e.encoding_format;let s=r?e.encoding_format:"base64";r&&_n(this._client).debug("embeddings/user defined encoding_format:",e.encoding_format);const a=this._client.post("/embeddings",{body:{...e,encoding_format:s},...n});return r?a:(_n(this._client).debug("embeddings/decoding base64 embeddings from base64"),a._thenUnwrap(l=>(l&&l.data&&l.data.forEach(u=>{const f=u.embedding;u.embedding=_Z(f)}),l)))}}class TA extends Ae{retrieve(e,n,r){const{eval_id:s,run_id:a}=n;return this._client.get(ge`/evals/${s}/runs/${a}/output_items/${e}`,r)}list(e,n,r){const{eval_id:s,...a}=n;return this._client.getAPIList(ge`/evals/${s}/runs/${e}/output_items`,Kt,{query:a,...r})}}class U0 extends Ae{constructor(){super(...arguments),this.outputItems=new TA(this._client)}create(e,n,r){return this._client.post(ge`/evals/${e}/runs`,{body:n,...r})}retrieve(e,n,r){const{eval_id:s}=n;return this._client.get(ge`/evals/${s}/runs/${e}`,r)}list(e,n={},r){return this._client.getAPIList(ge`/evals/${e}/runs`,Kt,{query:n,...r})}delete(e,n,r){const{eval_id:s}=n;return this._client.delete(ge`/evals/${s}/runs/${e}`,r)}cancel(e,n,r){const{eval_id:s}=n;return this._client.post(ge`/evals/${s}/runs/${e}`,r)}}U0.OutputItems=TA;class q0 extends Ae{constructor(){super(...arguments),this.runs=new U0(this._client)}create(e,n){return this._client.post("/evals",{body:e,...n})}retrieve(e,n){return this._client.get(ge`/evals/${e}`,n)}update(e,n,r){return this._client.post(ge`/evals/${e}`,{body:n,...r})}list(e={},n){return this._client.getAPIList("/evals",Kt,{query:e,...n})}delete(e,n){return this._client.delete(ge`/evals/${e}`,n)}}q0.Runs=U0;let AA=class extends Ae{create(e,n){return this._client.post("/files",Gi({body:e,...n},this._client))}retrieve(e,n){return this._client.get(ge`/files/${e}`,n)}list(e={},n){return this._client.getAPIList("/files",Kt,{query:e,...n})}delete(e,n){return this._client.delete(ge`/files/${e}`,n)}content(e,n){return this._client.get(ge`/files/${e}/content`,{...n,headers:Ee([{Accept:"application/binary"},n?.headers]),__binaryResponse:!0})}async waitForProcessing(e,{pollInterval:n=5e3,maxWait:r=1800*1e3}={}){const s=new Set(["processed","error","deleted"]),a=Date.now();let l=await this.retrieve(e);for(;!l.status||!s.has(l.status);)if(await yc(n),l=await this.retrieve(e),Date.now()-a>r)throw new T0({message:`Giving up on waiting for file ${e} to finish processing after ${r} milliseconds.`});return l}};class RA extends Ae{}let OA=class extends Ae{run(e,n){return this._client.post("/fine_tuning/alpha/graders/run",{body:e,...n})}validate(e,n){return this._client.post("/fine_tuning/alpha/graders/validate",{body:e,...n})}};class F0 extends Ae{constructor(){super(...arguments),this.graders=new OA(this._client)}}F0.Graders=OA;class IA extends Ae{create(e,n,r){return this._client.getAPIList(ge`/fine_tuning/checkpoints/${e}/permissions`,Pd,{body:n,method:"post",...r})}retrieve(e,n={},r){return this._client.get(ge`/fine_tuning/checkpoints/${e}/permissions`,{query:n,...r})}delete(e,n,r){const{fine_tuned_model_checkpoint:s}=n;return this._client.delete(ge`/fine_tuning/checkpoints/${s}/permissions/${e}`,r)}}let V0=class extends Ae{constructor(){super(...arguments),this.permissions=new IA(this._client)}};V0.Permissions=IA;class NA extends Ae{list(e,n={},r){return this._client.getAPIList(ge`/fine_tuning/jobs/${e}/checkpoints`,Kt,{query:n,...r})}}class H0 extends Ae{constructor(){super(...arguments),this.checkpoints=new NA(this._client)}create(e,n){return this._client.post("/fine_tuning/jobs",{body:e,...n})}retrieve(e,n){return this._client.get(ge`/fine_tuning/jobs/${e}`,n)}list(e={},n){return this._client.getAPIList("/fine_tuning/jobs",Kt,{query:e,...n})}cancel(e,n){return this._client.post(ge`/fine_tuning/jobs/${e}/cancel`,n)}listEvents(e,n={},r){return this._client.getAPIList(ge`/fine_tuning/jobs/${e}/events`,Kt,{query:n,...r})}pause(e,n){return this._client.post(ge`/fine_tuning/jobs/${e}/pause`,n)}resume(e,n){return this._client.post(ge`/fine_tuning/jobs/${e}/resume`,n)}}H0.Checkpoints=NA;class bo extends Ae{constructor(){super(...arguments),this.methods=new RA(this._client),this.jobs=new H0(this._client),this.checkpoints=new V0(this._client),this.alpha=new F0(this._client)}}bo.Methods=RA;bo.Jobs=H0;bo.Checkpoints=V0;bo.Alpha=F0;class MA extends Ae{}class G0 extends Ae{constructor(){super(...arguments),this.graderModels=new MA(this._client)}}G0.GraderModels=MA;class DA extends Ae{createVariation(e,n){return this._client.post("/images/variations",Gi({body:e,...n},this._client))}edit(e,n){return this._client.post("/images/edits",Gi({body:e,...n,stream:e.stream??!1},this._client))}generate(e,n){return this._client.post("/images/generations",{body:e,...n,stream:e.stream??!1})}}class jA extends Ae{retrieve(e,n){return this._client.get(ge`/models/${e}`,n)}list(e){return this._client.getAPIList("/models",Pd,e)}delete(e,n){return this._client.delete(ge`/models/${e}`,n)}}class LA extends Ae{create(e,n){return this._client.post("/moderations",{body:e,...n})}}class zA extends Ae{accept(e,n,r){return this._client.post(ge`/realtime/calls/${e}/accept`,{body:n,...r,headers:Ee([{Accept:"*/*"},r?.headers])})}hangup(e,n){return this._client.post(ge`/realtime/calls/${e}/hangup`,{...n,headers:Ee([{Accept:"*/*"},n?.headers])})}refer(e,n,r){return this._client.post(ge`/realtime/calls/${e}/refer`,{body:n,...r,headers:Ee([{Accept:"*/*"},r?.headers])})}reject(e,n={},r){return this._client.post(ge`/realtime/calls/${e}/reject`,{body:n,...r,headers:Ee([{Accept:"*/*"},r?.headers])})}}class PA extends Ae{create(e,n){return this._client.post("/realtime/client_secrets",{body:e,...n})}}class qd extends Ae{constructor(){super(...arguments),this.clientSecrets=new PA(this._client),this.calls=new zA(this._client)}}qd.ClientSecrets=PA;qd.Calls=zA;function xZ(t,e){return!e||!SZ(e)?{...t,output_parsed:null,output:t.output.map(n=>n.type==="function_call"?{...n,parsed_arguments:null}:n.type==="message"?{...n,content:n.content.map(r=>({...r,parsed:null}))}:n)}:BA(t,e)}function BA(t,e){const n=t.output.map(s=>{if(s.type==="function_call")return{...s,parsed_arguments:CZ(e,s)};if(s.type==="message"){const a=s.content.map(l=>l.type==="output_text"?{...l,parsed:wZ(e,l.text)}:l);return{...s,content:a}}return s}),r=Object.assign({},t,{output:n});return Object.getOwnPropertyDescriptor(t,"output_text")||gy(r),Object.defineProperty(r,"output_parsed",{enumerable:!0,get(){for(const s of r.output)if(s.type==="message"){for(const a of s.content)if(a.type==="output_text"&&a.parsed!==null)return a.parsed}return null}}),r}function wZ(t,e){return t.text?.format?.type!=="json_schema"?null:"$parseRaw"in t.text?.format?(t.text?.format).$parseRaw(e):JSON.parse(e)}function SZ(t){return!!I0(t.text?.format)}function kZ(t){return t?.$brand==="auto-parseable-tool"}function EZ(t,e){return t.find(n=>n.type==="function"&&n.name===e)}function CZ(t,e){const n=EZ(t.tools??[],e.name);return{...e,...e,parsed_arguments:kZ(n)?n.$parseRaw(e.arguments):n?.strict?JSON.parse(e.arguments):null}}function gy(t){const e=[];for(const n of t.output)if(n.type==="message")for(const r of n.content)r.type==="output_text"&&e.push(r.text);t.output_text=e.join("")}var Ua,Xu,ti,ef,ik,ak,ok,lk;class K0 extends M0{constructor(e){super(),Ua.add(this),Xu.set(this,void 0),ti.set(this,void 0),ef.set(this,void 0),ze(this,Xu,e)}static createResponse(e,n,r){const s=new K0(n);return s._run(()=>s._createOrRetrieveResponse(e,n,{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),s}async _createOrRetrieveResponse(e,n,r){const s=r?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),ee(this,Ua,"m",ik).call(this);let a,l=null;"response_id"in n?(a=await e.responses.retrieve(n.response_id,{stream:!0},{...r,signal:this.controller.signal,stream:!0}),l=n.starting_after??null):a=await e.responses.create({...n,stream:!0},{...r,signal:this.controller.signal}),this._connected();for await(const u of a)ee(this,Ua,"m",ak).call(this,u,l);if(a.controller.signal?.aborted)throw new Dr;return ee(this,Ua,"m",ok).call(this)}[(Xu=new WeakMap,ti=new WeakMap,ef=new WeakMap,Ua=new WeakSet,ik=function(){this.ended||ze(this,ti,void 0)},ak=function(n,r){if(this.ended)return;const s=(l,u)=>{(r==null||u.sequence_number>r)&&this._emit(l,u)},a=ee(this,Ua,"m",lk).call(this,n);switch(s("event",n),n.type){case"response.output_text.delta":{const l=a.output[n.output_index];if(!l)throw new Ne(`missing output at index ${n.output_index}`);if(l.type==="message"){const u=l.content[n.content_index];if(!u)throw new Ne(`missing content at index ${n.content_index}`);if(u.type!=="output_text")throw new Ne(`expected content to be 'output_text', got ${u.type}`);s("response.output_text.delta",{...n,snapshot:u.text})}break}case"response.function_call_arguments.delta":{const l=a.output[n.output_index];if(!l)throw new Ne(`missing output at index ${n.output_index}`);l.type==="function_call"&&s("response.function_call_arguments.delta",{...n,snapshot:l.arguments});break}default:s(n.type,n);break}},ok=function(){if(this.ended)throw new Ne("stream has ended, this shouldn't happen");const n=ee(this,ti,"f");if(!n)throw new Ne("request ended without sending any events");ze(this,ti,void 0);const r=TZ(n,ee(this,Xu,"f"));return ze(this,ef,r),r},lk=function(n){let r=ee(this,ti,"f");if(!r){if(n.type!=="response.created")throw new Ne(`When snapshot hasn't been set yet, expected 'response.created' event, got ${n.type}`);return r=ze(this,ti,n.response),r}switch(n.type){case"response.output_item.added":{r.output.push(n.item);break}case"response.content_part.added":{const s=r.output[n.output_index];if(!s)throw new Ne(`missing output at index ${n.output_index}`);const a=s.type,l=n.part;a==="message"&&l.type!=="reasoning_text"?s.content.push(l):a==="reasoning"&&l.type==="reasoning_text"&&(s.content||(s.content=[]),s.content.push(l));break}case"response.output_text.delta":{const s=r.output[n.output_index];if(!s)throw new Ne(`missing output at index ${n.output_index}`);if(s.type==="message"){const a=s.content[n.content_index];if(!a)throw new Ne(`missing content at index ${n.content_index}`);if(a.type!=="output_text")throw new Ne(`expected content to be 'output_text', got ${a.type}`);a.text+=n.delta}break}case"response.function_call_arguments.delta":{const s=r.output[n.output_index];if(!s)throw new Ne(`missing output at index ${n.output_index}`);s.type==="function_call"&&(s.arguments+=n.delta);break}case"response.reasoning_text.delta":{const s=r.output[n.output_index];if(!s)throw new Ne(`missing output at index ${n.output_index}`);if(s.type==="reasoning"){const a=s.content?.[n.content_index];if(!a)throw new Ne(`missing content at index ${n.content_index}`);if(a.type!=="reasoning_text")throw new Ne(`expected content to be 'reasoning_text', got ${a.type}`);a.text+=n.delta}break}case"response.completed":{ze(this,ti,n.response);break}}return r},Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("event",s=>{const a=n.shift();a?a.resolve(s):e.push(s)}),this.on("end",()=>{r=!0;for(const s of n)s.resolve(void 0);n.length=0}),this.on("abort",s=>{r=!0;for(const a of n)a.reject(s);n.length=0}),this.on("error",s=>{r=!0;for(const a of n)a.reject(s);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((a,l)=>n.push({resolve:a,reject:l})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();const e=ee(this,ef,"f");if(!e)throw new Ne("stream ended without producing a ChatCompletion");return e}}function TZ(t,e){return xZ(t,e)}class $A extends Ae{list(e,n={},r){return this._client.getAPIList(ge`/responses/${e}/input_items`,Kt,{query:n,...r})}}class UA extends Ae{count(e={},n){return this._client.post("/responses/input_tokens",{body:e,...n})}}class Fd extends Ae{constructor(){super(...arguments),this.inputItems=new $A(this._client),this.inputTokens=new UA(this._client)}create(e,n){return this._client.post("/responses",{body:e,...n,stream:e.stream??!1})._thenUnwrap(r=>("object"in r&&r.object==="response"&&gy(r),r))}retrieve(e,n={},r){return this._client.get(ge`/responses/${e}`,{query:n,...r,stream:n?.stream??!1})._thenUnwrap(s=>("object"in s&&s.object==="response"&&gy(s),s))}delete(e,n){return this._client.delete(ge`/responses/${e}`,{...n,headers:Ee([{Accept:"*/*"},n?.headers])})}parse(e,n){return this._client.responses.create(e,n)._thenUnwrap(r=>BA(r,e))}stream(e,n){return K0.createResponse(this._client,e,n)}cancel(e,n){return this._client.post(ge`/responses/${e}/cancel`,n)}compact(e,n){return this._client.post("/responses/compact",{body:e,...n})}}Fd.InputItems=$A;Fd.InputTokens=UA;class qA extends Ae{create(e,n,r){return this._client.post(ge`/uploads/${e}/parts`,Gi({body:n,...r},this._client))}}class Z0 extends Ae{constructor(){super(...arguments),this.parts=new qA(this._client)}create(e,n){return this._client.post("/uploads",{body:e,...n})}cancel(e,n){return this._client.post(ge`/uploads/${e}/cancel`,n)}complete(e,n,r){return this._client.post(ge`/uploads/${e}/complete`,{body:n,...r})}}Z0.Parts=qA;const AZ=async t=>{const e=await Promise.allSettled(t),n=e.filter(s=>s.status==="rejected");if(n.length){for(const s of n)console.error(s.reason);throw new Error(`${n.length} promise(s) failed - see the above errors`)}const r=[];for(const s of e)s.status==="fulfilled"&&r.push(s.value);return r};class FA extends Ae{create(e,n,r){return this._client.post(ge`/vector_stores/${e}/file_batches`,{body:n,...r,headers:Ee([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}retrieve(e,n,r){const{vector_store_id:s}=n;return this._client.get(ge`/vector_stores/${s}/file_batches/${e}`,{...r,headers:Ee([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}cancel(e,n,r){const{vector_store_id:s}=n;return this._client.post(ge`/vector_stores/${s}/file_batches/${e}/cancel`,{...r,headers:Ee([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}async createAndPoll(e,n,r){const s=await this.create(e,n);return await this.poll(e,s.id,r)}listFiles(e,n,r){const{vector_store_id:s,...a}=n;return this._client.getAPIList(ge`/vector_stores/${s}/file_batches/${e}/files`,Kt,{query:a,...r,headers:Ee([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}async poll(e,n,r){const s=Ee([r?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":r?.pollIntervalMs?.toString()??void 0}]);for(;;){const{data:a,response:l}=await this.retrieve(n,{vector_store_id:e},{...r,headers:s}).withResponse();switch(a.status){case"in_progress":let u=5e3;if(r?.pollIntervalMs)u=r.pollIntervalMs;else{const f=l.headers.get("openai-poll-after-ms");if(f){const d=parseInt(f);isNaN(d)||(u=d)}}await yc(u);break;case"failed":case"cancelled":case"completed":return a}}}async uploadAndPoll(e,{files:n,fileIds:r=[]},s){if(n==null||n.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const a=s?.maxConcurrency??5,l=Math.min(a,n.length),u=this._client,f=n.values(),d=[...r];async function m(y){for(let g of y){const v=await u.files.create({file:g,purpose:"assistants"},s);d.push(v.id)}}const p=Array(l).fill(f).map(m);return await AZ(p),await this.createAndPoll(e,{file_ids:d})}}class VA extends Ae{create(e,n,r){return this._client.post(ge`/vector_stores/${e}/files`,{body:n,...r,headers:Ee([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}retrieve(e,n,r){const{vector_store_id:s}=n;return this._client.get(ge`/vector_stores/${s}/files/${e}`,{...r,headers:Ee([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}update(e,n,r){const{vector_store_id:s,...a}=n;return this._client.post(ge`/vector_stores/${s}/files/${e}`,{body:a,...r,headers:Ee([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(e,n={},r){return this._client.getAPIList(ge`/vector_stores/${e}/files`,Kt,{query:n,...r,headers:Ee([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}delete(e,n,r){const{vector_store_id:s}=n;return this._client.delete(ge`/vector_stores/${s}/files/${e}`,{...r,headers:Ee([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}async createAndPoll(e,n,r){const s=await this.create(e,n,r);return await this.poll(e,s.id,r)}async poll(e,n,r){const s=Ee([r?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":r?.pollIntervalMs?.toString()??void 0}]);for(;;){const a=await this.retrieve(n,{vector_store_id:e},{...r,headers:s}).withResponse(),l=a.data;switch(l.status){case"in_progress":let u=5e3;if(r?.pollIntervalMs)u=r.pollIntervalMs;else{const f=a.response.headers.get("openai-poll-after-ms");if(f){const d=parseInt(f);isNaN(d)||(u=d)}}await yc(u);break;case"failed":case"completed":return l}}}async upload(e,n,r){const s=await this._client.files.create({file:n,purpose:"assistants"},r);return this.create(e,{file_id:s.id},r)}async uploadAndPoll(e,n,r){const s=await this.upload(e,n,r);return await this.poll(e,s.id,r)}content(e,n,r){const{vector_store_id:s}=n;return this._client.getAPIList(ge`/vector_stores/${s}/files/${e}/content`,Pd,{...r,headers:Ee([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}}class Vd extends Ae{constructor(){super(...arguments),this.files=new VA(this._client),this.fileBatches=new FA(this._client)}create(e,n){return this._client.post("/vector_stores",{body:e,...n,headers:Ee([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}retrieve(e,n){return this._client.get(ge`/vector_stores/${e}`,{...n,headers:Ee([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}update(e,n,r){return this._client.post(ge`/vector_stores/${e}`,{body:n,...r,headers:Ee([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(e={},n){return this._client.getAPIList("/vector_stores",Kt,{query:e,...n,headers:Ee([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}delete(e,n){return this._client.delete(ge`/vector_stores/${e}`,{...n,headers:Ee([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}search(e,n,r){return this._client.getAPIList(ge`/vector_stores/${e}/search`,Pd,{body:n,method:"post",...r,headers:Ee([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}}Vd.Files=VA;Vd.FileBatches=FA;class HA extends Ae{create(e,n){return this._client.post("/videos",KS({body:e,...n},this._client))}retrieve(e,n){return this._client.get(ge`/videos/${e}`,n)}list(e={},n){return this._client.getAPIList("/videos",td,{query:e,...n})}delete(e,n){return this._client.delete(ge`/videos/${e}`,n)}downloadContent(e,n={},r){return this._client.get(ge`/videos/${e}/content`,{query:n,...r,headers:Ee([{Accept:"application/binary"},r?.headers]),__binaryResponse:!0})}remix(e,n,r){return this._client.post(ge`/videos/${e}/remix`,KS({body:n,...r},this._client))}}var Ha,GA,yf;class KA extends Ae{constructor(){super(...arguments),Ha.add(this)}async unwrap(e,n,r=this._client.webhookSecret,s=300){return await this.verifySignature(e,n,r,s),JSON.parse(e)}async verifySignature(e,n,r=this._client.webhookSecret,s=300){if(typeof crypto>"u"||typeof crypto.subtle.importKey!="function"||typeof crypto.subtle.verify!="function")throw new Error("Webhook signature verification is only supported when the `crypto` global is defined");ee(this,Ha,"m",GA).call(this,r);const a=Ee([n]).values,l=ee(this,Ha,"m",yf).call(this,a,"webhook-signature"),u=ee(this,Ha,"m",yf).call(this,a,"webhook-timestamp"),f=ee(this,Ha,"m",yf).call(this,a,"webhook-id"),d=parseInt(u,10);if(isNaN(d))throw new El("Invalid webhook timestamp format");const m=Math.floor(Date.now()/1e3);if(m-d>s)throw new El("Webhook timestamp is too old");if(d>m+s)throw new El("Webhook timestamp is too new");const p=l.split(" ").map(w=>w.startsWith("v1,")?w.substring(3):w),y=r.startsWith("whsec_")?Buffer.from(r.replace("whsec_",""),"base64"):Buffer.from(r,"utf-8"),g=f?`${f}.${u}.${e}`:`${u}.${e}`,v=await crypto.subtle.importKey("raw",y,{name:"HMAC",hash:"SHA-256"},!1,["verify"]);for(const w of p)try{const E=Buffer.from(w,"base64");if(await crypto.subtle.verify("HMAC",v,E,new TextEncoder().encode(g)))return}catch{continue}throw new El("The given webhook signature does not match the expected signature")}}Ha=new WeakSet,GA=function(e){if(typeof e!="string"||e.length===0)throw new Error("The webhook secret must either be set using the env var, OPENAI_WEBHOOK_SECRET, on the client class, OpenAI({ webhookSecret: '123' }), or passed to this function")},yf=function(e,n){if(!e)throw new Error("Headers are required");const r=e.get(n);if(r==null)throw new Error(`Missing required header: ${n}`);return r};var yy,J0,bf,ZA;class Ve{constructor({baseURL:e=$a("OPENAI_BASE_URL"),apiKey:n=$a("OPENAI_API_KEY"),organization:r=$a("OPENAI_ORG_ID")??null,project:s=$a("OPENAI_PROJECT_ID")??null,webhookSecret:a=$a("OPENAI_WEBHOOK_SECRET")??null,...l}={}){if(yy.add(this),bf.set(this,void 0),this.completions=new SA(this),this.chat=new L0(this),this.embeddings=new CA(this),this.files=new AA(this),this.images=new DA(this),this.audio=new _c(this),this.moderations=new LA(this),this.models=new jA(this),this.fineTuning=new bo(this),this.graders=new G0(this),this.vectorStores=new Vd(this),this.webhooks=new KA(this),this.beta=new yo(this),this.batches=new mA(this),this.uploads=new Z0(this),this.responses=new Fd(this),this.realtime=new qd(this),this.conversations=new $0(this),this.evals=new q0(this),this.containers=new B0(this),this.videos=new HA(this),n===void 0)throw new Ne("Missing credentials. Please pass an `apiKey`, or set the `OPENAI_API_KEY` environment variable.");const u={apiKey:n,organization:r,project:s,webhookSecret:a,...l,baseURL:e||"https://api.openai.com/v1"};if(!u.dangerouslyAllowBrowser&&RK())throw new Ne(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);this.baseURL=u.baseURL,this.timeout=u.timeout??J0.DEFAULT_TIMEOUT,this.logger=u.logger??console;const f="warn";this.logLevel=f,this.logLevel=HS(u.logLevel,"ClientOptions.logLevel",this)??HS($a("OPENAI_LOG"),"process.env['OPENAI_LOG']",this)??f,this.fetchOptions=u.fetchOptions,this.maxRetries=u.maxRetries??2,this.fetch=u.fetch??DK(),ze(this,bf,LK),this._options=u,this.apiKey=typeof n=="string"?n:"Missing Key",this.organization=r,this.project=s,this.webhookSecret=a}withOptions(e){return new this.constructor({...this._options,baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,organization:this.organization,project:this.project,webhookSecret:this.webhookSecret,...e})}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){}async authHeaders(e){return Ee([{Authorization:`Bearer ${this.apiKey}`}])}stringifyQuery(e){return qK(e,{arrayFormat:"brackets"})}getUserAgent(){return`${this.constructor.name}/JS ${Fa}`}defaultIdempotencyKey(){return`stainless-node-retry-${yT()}`}makeStatusError(e,n,r,s){return wn.generate(e,n,r,s)}async _callApiKey(){const e=this._options.apiKey;if(typeof e!="function")return!1;let n;try{n=await e()}catch(r){throw r instanceof Ne?r:new Ne(`Failed to get token from 'apiKey' function: ${r.message}`,{cause:r})}if(typeof n!="string"||!n)throw new Ne(`Expected 'apiKey' function argument to return a string but it returned ${n}`);return this.apiKey=n,!0}buildURL(e,n,r){const s=!ee(this,yy,"m",ZA).call(this)&&r||this.baseURL,a=kK(e)?new URL(e):new URL(s+(s.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),l=this.defaultQuery();return EK(l)||(n={...l,...n}),typeof n=="object"&&n&&!Array.isArray(n)&&(a.search=this.stringifyQuery(n)),a.toString()}async prepareOptions(e){await this._callApiKey()}async prepareRequest(e,{url:n,options:r}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,r){return this.request(Promise.resolve(r).then(s=>({method:e,path:n,...s})))}request(e,n=null){return new zd(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,r){const s=await e,a=s.maxRetries??this.maxRetries;n==null&&(n=a),await this.prepareOptions(s);const{req:l,url:u,timeout:f}=await this.buildRequest(s,{retryCount:a-n});await this.prepareRequest(l,{url:u,options:s});const d="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),m=r===void 0?"":`, retryOf: ${r}`,p=Date.now();if(_n(this).debug(`[${d}] sending request`,Li({retryOfRequestLogID:r,method:s.method,url:u,options:s,headers:l.headers})),s.signal?.aborted)throw new Dr;const y=new AbortController,g=await this.fetchWithTimeout(u,l,f,y).catch(iy),v=Date.now();if(g instanceof globalThis.Error){const k=`retrying, ${n} attempts remaining`;if(s.signal?.aborted)throw new Dr;const C=sy(g)||/timed? ?out/i.test(String(g)+("cause"in g?String(g.cause):""));if(n)return _n(this).info(`[${d}] connection ${C?"timed out":"failed"} - ${k}`),_n(this).debug(`[${d}] connection ${C?"timed out":"failed"} (${k})`,Li({retryOfRequestLogID:r,url:u,durationMs:v-p,message:g.message})),this.retryRequest(s,n,r??d);throw _n(this).info(`[${d}] connection ${C?"timed out":"failed"} - error; no more retries left`),_n(this).debug(`[${d}] connection ${C?"timed out":"failed"} (error; no more retries left)`,Li({retryOfRequestLogID:r,url:u,durationMs:v-p,message:g.message})),C?new T0:new jd({cause:g})}const w=[...g.headers.entries()].filter(([k])=>k==="x-request-id").map(([k,C])=>", "+k+": "+JSON.stringify(C)).join(""),E=`[${d}${m}${w}] ${l.method} ${u} ${g.ok?"succeeded":"failed"} with status ${g.status} in ${v-p}ms`;if(!g.ok){const k=await this.shouldRetry(g);if(n&&k){const $=`retrying, ${n} attempts remaining`;return await jK(g.body),_n(this).info(`${E} - ${$}`),_n(this).debug(`[${d}] response error (${$})`,Li({retryOfRequestLogID:r,url:g.url,status:g.status,headers:g.headers,durationMs:v-p})),this.retryRequest(s,n,r??d,g.headers)}const C=k?"error; no more retries left":"error; not retryable";_n(this).info(`${E} - ${C}`);const T=await g.text().catch($=>iy($).message),D=AK(T),N=D?void 0:T;throw _n(this).debug(`[${d}] response error (${C})`,Li({retryOfRequestLogID:r,url:g.url,status:g.status,headers:g.headers,message:N,durationMs:Date.now()-p})),this.makeStatusError(g.status,D,N,g.headers)}return _n(this).info(E),_n(this).debug(`[${d}] response start`,Li({retryOfRequestLogID:r,url:g.url,status:g.status,headers:g.headers,durationMs:v-p})),{response:g,options:s,controller:y,requestLogID:d,retryOfRequestLogID:r,startTime:p}}getAPIList(e,n,r){return this.requestAPIList(n,{method:"get",path:e,...r})}requestAPIList(e,n){const r=this.makeRequest(n,null,void 0);return new YK(this,r,e)}async fetchWithTimeout(e,n,r,s){const{signal:a,method:l,...u}=n||{};a&&a.addEventListener("abort",()=>s.abort());const f=setTimeout(()=>s.abort(),r),d=globalThis.ReadableStream&&u.body instanceof globalThis.ReadableStream||typeof u.body=="object"&&u.body!==null&&Symbol.asyncIterator in u.body,m={signal:s.signal,...d?{duplex:"half"}:{},method:"GET",...u};l&&(m.method=l.toUpperCase());try{return await this.fetch.call(void 0,e,m)}finally{clearTimeout(f)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,r,s){let a;const l=s?.get("retry-after-ms");if(l){const f=parseFloat(l);Number.isNaN(f)||(a=f)}const u=s?.get("retry-after");if(u&&!a){const f=parseFloat(u);Number.isNaN(f)?a=Date.parse(u)-Date.now():a=f*1e3}if(!(a&&0<=a&&a<60*1e3)){const f=e.maxRetries??this.maxRetries;a=this.calculateDefaultRetryTimeoutMillis(n,f)}return await yc(a),this.makeRequest(e,n-1,r)}calculateDefaultRetryTimeoutMillis(e,n){const a=n-e,l=Math.min(.5*Math.pow(2,a),8),u=1-Math.random()*.25;return l*u*1e3}async buildRequest(e,{retryCount:n=0}={}){const r={...e},{method:s,path:a,query:l,defaultBaseURL:u}=r,f=this.buildURL(a,l,u);"timeout"in r&&TK("timeout",r.timeout),r.timeout=r.timeout??this.timeout;const{bodyHeaders:d,body:m}=this.buildBody({options:r}),p=await this.buildHeaders({options:e,method:s,bodyHeaders:d,retryCount:n});return{req:{method:s,headers:p,...r.signal&&{signal:r.signal},...globalThis.ReadableStream&&m instanceof globalThis.ReadableStream&&{duplex:"half"},...m&&{body:m},...this.fetchOptions??{},...r.fetchOptions??{}},url:f,timeout:r.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:r,retryCount:s}){let a={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),a[this.idempotencyHeader]=e.idempotencyKey);const l=Ee([a,{Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(s),...e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{},...MK(),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project},await this.authHeaders(e),this._options.defaultHeaders,r,e.headers]);return this.validateHeaders(l),l.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const r=Ee([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&r.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:OT(e)}:ee(this,bf,"f").call(this,{body:e,headers:r})}}J0=Ve,bf=new WeakMap,yy=new WeakSet,ZA=function(){return this.baseURL!=="https://api.openai.com/v1"};Ve.OpenAI=J0;Ve.DEFAULT_TIMEOUT=6e5;Ve.OpenAIError=Ne;Ve.APIError=wn;Ve.APIConnectionError=jd;Ve.APIConnectionTimeoutError=T0;Ve.APIUserAbortError=Dr;Ve.NotFoundError=xT;Ve.ConflictError=wT;Ve.RateLimitError=kT;Ve.BadRequestError=bT;Ve.AuthenticationError=_T;Ve.InternalServerError=ET;Ve.PermissionDeniedError=vT;Ve.UnprocessableEntityError=ST;Ve.InvalidWebhookSignatureError=El;Ve.toFile=nZ;Ve.Completions=SA;Ve.Chat=L0;Ve.Embeddings=CA;Ve.Files=AA;Ve.Images=DA;Ve.Audio=_c;Ve.Moderations=LA;Ve.Models=jA;Ve.FineTuning=bo;Ve.Graders=G0;Ve.VectorStores=Vd;Ve.Webhooks=KA;Ve.Beta=yo;Ve.Batches=mA;Ve.Uploads=Z0;Ve.Responses=Fd;Ve.Realtime=qd;Ve.Conversations=$0;Ve.Evals=q0;Ve.Containers=B0;Ve.Videos=HA;class RZ extends Ve{constructor(e){super({...e,dangerouslyAllowBrowser:!0})}}function OZ(t){return new RZ({apiKey:t.apiKey,organization:t.organization,baseURL:t.baseURL})}function IZ(t){return`${t}-${Date.now()}-${Math.random().toString(36).substring(7)}`}class NZ extends iK{constructor(e,n){super({},n),this.kind="text",this.name="openai",this.client=OZ(e)}async*chatStream(e){const n=new Map,r=this.mapTextOptionsToOpenAI(e);try{const s=await this.client.responses.create({...r,stream:!0},{headers:e.request?.headers,signal:e.request?.signal});yield*this.processOpenAIStreamChunks(s,n,e,()=>IZ(this.name))}catch(s){const a=s;throw console.error(">>> chatStream: Fatal error during response creation <<<"),console.error(">>> Error message:",a.message),console.error(">>> Error stack:",a.stack),console.error(">>> Full error:",a),s}}async structuredOutput(e){const{chatOptions:n,outputSchema:r}=e,s=this.mapTextOptionsToOpenAI(n),a=Fl(r,r.required||[]);try{const l=await this.client.responses.create({...s,stream:!1,text:{format:{type:"json_schema",name:"structured_output",schema:a,strict:!0}}},{headers:n.request?.headers,signal:n.request?.signal}),u=this.extractTextFromResponse(l);let f;try{f=JSON.parse(u)}catch{throw new Error(`Failed to parse structured output as JSON. Content: ${u.slice(0,200)}${u.length>200?"...":""}`)}return{data:ry(f),rawText:u}}catch(l){const u=l;throw console.error(">>> structuredOutput: Error during response creation <<<"),console.error(">>> Error message:",u.message),l}}extractTextFromResponse(e){let n="";for(const r of e.output)if(r.type==="message")for(const s of r.content)s.type==="output_text"&&(n+=s.text);return n}async*processOpenAIStreamChunks(e,n,r,s){let a="",l="";const u=Date.now();let f=0,d=!1,m=!1,p=null,y=r.model;try{for await(const g of e){f++;const v=w=>w.type==="output_text"?(a+=w.text,{type:"content",id:p||s(),model:y||r.model,timestamp:u,delta:w.text,content:a,role:"assistant"}):w.type==="reasoning_text"?(l+=w.text,{type:"thinking",id:p||s(),model:y||r.model,timestamp:u,delta:w.text,content:l}):{type:"error",id:p||s(),model:y||r.model,timestamp:u,error:{message:w.refusal}};if((g.type==="response.created"||g.type==="response.incomplete"||g.type==="response.failed")&&(p=g.response.id,y=g.response.model,d=!1,m=!1,a="",l="",g.response.error&&(yield{type:"error",id:g.response.id,model:g.response.model,timestamp:u,error:g.response.error}),g.response.incomplete_details&&(yield{type:"error",id:g.response.id,model:g.response.model,timestamp:u,error:{message:g.response.incomplete_details.reason??""}})),g.type==="response.output_text.delta"&&g.delta){const w=Array.isArray(g.delta)?g.delta.join(""):typeof g.delta=="string"?g.delta:"";w&&(a+=w,d=!0,yield{type:"content",id:p||s(),model:y||r.model,timestamp:u,delta:w,content:a,role:"assistant"})}if(g.type==="response.reasoning_text.delta"&&g.delta){const w=Array.isArray(g.delta)?g.delta.join(""):typeof g.delta=="string"?g.delta:"";w&&(l+=w,m=!0,yield{type:"thinking",id:p||s(),model:y||r.model,timestamp:u,delta:w,content:l})}if(g.type==="response.reasoning_summary_text.delta"&&g.delta){const w=typeof g.delta=="string"?g.delta:"";w&&(l+=w,m=!0,yield{type:"thinking",id:p||s(),model:y||r.model,timestamp:u,delta:w,content:l})}if(g.type==="response.content_part.added"){const w=g.part;yield v(w)}if(g.type==="response.content_part.done"){const w=g.part;if(w.type==="output_text"&&d||w.type==="reasoning_text"&&m)continue;yield v(w)}if(g.type==="response.output_item.added"){const w=g.item;w.type==="function_call"&&w.id&&(n.has(w.id)||n.set(w.id,{index:g.output_index,name:w.name||""}))}if(g.type==="response.function_call_arguments.done"){const{item_id:w,output_index:E}=g,C=n.get(w)?.name||"";yield{type:"tool_call",id:p||s(),model:y||r.model,timestamp:u,index:E,toolCall:{id:w,type:"function",function:{name:C,arguments:g.arguments}}}}if(g.type==="response.completed"){const w=g.response.output.some(E=>E.type==="function_call");yield{type:"done",id:p||s(),model:y||r.model,timestamp:u,usage:{promptTokens:g.response.usage?.input_tokens||0,completionTokens:g.response.usage?.output_tokens||0,totalTokens:g.response.usage?.total_tokens||0},finishReason:w?"tool_calls":"stop"}}g.type==="error"&&(yield{type:"error",id:p||s(),model:y||r.model,timestamp:u,error:{message:g.message,code:g.code??void 0}})}}catch(g){const v=g;console.log("[OpenAI Adapter] Stream ended with error. Event type summary:",{totalChunks:f,error:v.message}),yield{type:"error",id:s(),model:r.model,timestamp:u,error:{message:v.message||"Unknown error occurred",code:v.code}}}}mapTextOptionsToOpenAI(e){const n=e.modelOptions,r=this.convertMessagesToInput(e.messages);n&&oK({...n,model:e.model});const s=e.tools?wK(e.tools):void 0;return{model:e.model,temperature:e.temperature,max_output_tokens:e.maxTokens,top_p:e.topP,metadata:e.metadata,instructions:e.systemPrompts?.join(`
`),...n,input:r,tools:s}}convertMessagesToInput(e){const n=[];for(const r of e){if(r.role==="tool"){n.push({type:"function_call_output",call_id:r.toolCallId||"",output:typeof r.content=="string"?r.content:JSON.stringify(r.content)});continue}if(r.role==="assistant"){if(r.toolCalls&&r.toolCalls.length>0)for(const l of r.toolCalls){const u=typeof l.function.arguments=="string"?l.function.arguments:JSON.stringify(l.function.arguments);n.push({type:"function_call",call_id:l.id,name:l.function.name,arguments:u})}if(r.content){const l=this.extractTextContent(r.content);l&&n.push({type:"message",role:"assistant",content:l})}continue}const s=this.normalizeContent(r.content),a=[];for(const l of s)a.push(this.convertContentPartToOpenAI(l));a.length===0&&a.push({type:"input_text",text:""}),n.push({type:"message",role:"user",content:a})}return n}convertContentPartToOpenAI(e){switch(e.type){case"text":return{type:"input_text",text:e.content};case"image":{const n=e.metadata;return e.source.type==="url"?{type:"input_image",image_url:e.source.value,detail:n?.detail||"auto"}:{type:"input_image",image_url:e.source.value,detail:n?.detail||"auto"}}case"audio":return e.source.type==="url"?{type:"input_file",file_url:e.source.value}:{type:"input_file",file_data:e.source.value};default:throw new Error(`Unsupported content part type: ${e.type}`)}}normalizeContent(e){return e===null?[]:typeof e=="string"?[{type:"text",content:e}]:e}extractTextContent(e){return e===null?"":typeof e=="string"?e:e.filter(n=>n.type==="text").map(n=>n.content).join("")}}function MZ(t){const e=`${window.location.origin}/openai/v1`;return new NZ({apiKey:"not-needed",baseURL:e},t)}function DZ(){return qy().ai?.model||"gpt-5.1"}function jZ(t){const e=$e.c(112),{isOpen:n,onClose:r,request:s,setters:a}=t,[l,u]=Z.useState(""),[f,d]=Z.useState(),m=Z.useRef(null),p=Z.useRef(null),y=Z.useRef(s.id);let g;e[0]!==s.http?.response?(g=()=>{(async function(){const Oe=s.http?.response;if(Oe?.body)try{const st=await Oe.body.text();d(st)}catch{d("(unable to read response body)")}else d(void 0)})()},e[0]=s.http?.response,e[1]=g):g=e[1];const v=s.http?.response,w=s.http?.response?.body;let E;e[2]!==v||e[3]!==w?(E=[v,w],e[2]=v,e[3]=w,e[4]=E):E=e[4],Z.useEffect(g,E);let k;e:switch(s.protocol){case"grpc":{let ue;e[5]!==s||e[6]!==a?(ue=IU({request:s,setters:a}),e[5]=s,e[6]=a,e[7]=ue):ue=e[7];let Se;e[8]===Symbol.for("react.memo_cache_sentinel")?(Se=NU(),e[8]=Se):Se=e[8];let Oe;e[9]!==ue?(Oe={tools:ue,instructions:Se,adapterConfig:MU},e[9]=ue,e[10]=Oe):Oe=e[10],k=Oe;break e}case"mcp":{let ue;e[11]!==s||e[12]!==a?(ue=nq({request:s,setters:a}),e[11]=s,e[12]=a,e[13]=ue):ue=e[13];let Se;e[14]===Symbol.for("react.memo_cache_sentinel")?(Se=rq(),e[14]=Se):Se=e[14];let Oe;e[15]!==ue?(Oe={tools:ue,instructions:Se,adapterConfig:sq},e[15]=ue,e[16]=Oe):Oe=e[16],k=Oe;break e}case"openai":{let ue;e[17]!==s||e[18]!==a?(ue=YG({request:s,setters:a}),e[17]=s,e[18]=a,e[19]=ue):ue=e[19];let Se;e[20]===Symbol.for("react.memo_cache_sentinel")?(Se=WG(),e[20]=Se):Se=e[20];let Oe;e[21]!==ue?(Oe={tools:ue,instructions:Se,adapterConfig:XG},e[21]=ue,e[22]=Oe):Oe=e[22],k=Oe;break e}default:{let ue;e[23]!==s||e[24]!==f||e[25]!==a?(ue=gU({request:s,setters:a,responseBodyText:f}),e[23]=s,e[24]=f,e[25]=a,e[26]=ue):ue=e[26];let Se;e[27]===Symbol.for("react.memo_cache_sentinel")?(Se=yU(),e[27]=Se):Se=e[27];let Oe;e[28]!==ue?(Oe={tools:ue,instructions:Se,adapterConfig:bU},e[28]=ue,e[29]=Oe):Oe=e[29],k=Oe}}const{tools:C,instructions:T,adapterConfig:D}=k;let N;if(e[30]!==T||e[31]!==C){const ue=DZ(),Se=MZ(ue);N=qP(Oe=>wP({adapter:Se,messages:Oe,tools:C,systemPrompts:[T],agentLoopStrategy:qE(10)})),e[30]=T,e[31]=C,e[32]=N}else N=e[32];const R=N;let $;e[33]!==R||e[34]!==C?($={connection:R,tools:C},e[33]=R,e[34]=C,e[35]=$):$=e[35];const{messages:q,sendMessage:H,isLoading:M,stop:Q,clear:ne}=sK($);let ye,X;e[36]!==ne||e[37]!==s.id?(ye=()=>{y.current!==s.id&&(ne(),y.current=s.id)},X=[s.id,ne],e[36]=ne,e[37]=s.id,e[38]=ye,e[39]=X):(ye=e[38],X=e[39]),Z.useEffect(ye,X);let F;e[40]===Symbol.for("react.memo_cache_sentinel")?(F=()=>{m.current?.scrollIntoView({behavior:"smooth"})},e[40]=F):F=e[40];let B;e[41]!==q?(B=[q],e[41]=q,e[42]=B):B=e[42],Z.useEffect(F,B);let K,ie;e[43]!==n?(K=()=>{n&&p.current?.focus()},ie=[n],e[43]=n,e[44]=K,e[45]=ie):(K=e[44],ie=e[45]),Z.useEffect(K,ie);let re;e[46]!==l||e[47]!==M||e[48]!==H?(re=ue=>{ue.preventDefault(),!(!l.trim()||M)&&(H(l.trim()),u(""))},e[46]=l,e[47]=M,e[48]=H,e[49]=re):re=e[49];const I=re;let j;e[50]!==I?(j=ue=>{ue.key==="Enter"&&!ue.shiftKey&&(ue.preventDefault(),I(ue))},e[50]=I,e[51]=j):j=e[51];const G=j,O=LZ;let le;e[52]!==M||e[53]!==q?(le=(ue,Se)=>M&&ue.role==="assistant"&&Se===q.length-1,e[52]=M,e[53]=q,e[54]=le):le=e[54];const L=le;if(!n)return null;let P;e[55]===Symbol.for("react.memo_cache_sentinel")?(P=x.jsx(io,{size:16,className:"text-amber-500"}),e[55]=P):P=e[55];let pe;e[56]!==D.name?(pe=x.jsxs("div",{className:"flex items-center gap-2",children:[P,x.jsx("h3",{className:"font-medium text-neutral-900 dark:text-neutral-100",children:D.name})]}),e[56]=D.name,e[57]=pe):pe=e[57];let xe;e[58]===Symbol.for("react.memo_cache_sentinel")?(xe=x.jsx(Zi,{size:16}),e[58]=xe):xe=e[58];let ve;e[59]!==ne?(ve=x.jsx("button",{onClick:ne,className:"p-1.5 text-neutral-500 hover:text-neutral-900 hover:bg-neutral-100 dark:hover:text-neutral-300 dark:hover:bg-neutral-800 rounded transition-colors",title:"Clear chat",children:xe}),e[59]=ne,e[60]=ve):ve=e[60];let Te;e[61]===Symbol.for("react.memo_cache_sentinel")?(Te=x.jsx(pd,{size:16}),e[61]=Te):Te=e[61];let je;e[62]!==r?(je=x.jsx("button",{onClick:r,className:"p-1.5 text-neutral-500 hover:text-neutral-900 hover:bg-neutral-100 dark:hover:text-neutral-300 dark:hover:bg-neutral-800 rounded transition-colors",children:Te}),e[62]=r,e[63]=je):je=e[63];let at;e[64]!==ve||e[65]!==je?(at=x.jsxs("div",{className:"flex items-center gap-1",children:[ve,je]}),e[64]=ve,e[65]=je,e[66]=at):at=e[66];let Ct;e[67]!==pe||e[68]!==at?(Ct=x.jsxs("div",{className:"shrink-0 h-12 px-4 flex items-center justify-between border-b border-neutral-200 dark:border-neutral-800",children:[pe,at]}),e[67]=pe,e[68]=at,e[69]=Ct):Ct=e[69];let Nt;e[70]!==q.length?(Nt=q.length===0&&x.jsxs("div",{className:"text-center text-neutral-500 dark:text-neutral-400 text-sm py-8",children:[x.jsx(io,{size:24,className:"mx-auto mb-3 text-amber-500/50"}),x.jsx("p",{className:"mb-2",children:"Ask me to help build your request"}),x.jsx("p",{className:"text-xs text-neutral-400 dark:text-neutral-500",children:'Examples: "Create a POST request to /api/users with a JSON body" or "Add an Authorization header"'})]}),e[70]=q.length,e[71]=Nt):Nt=e[71];let Zt;if(e[72]!==L||e[73]!==q){let ue;e[75]!==L?(ue=(Se,Oe)=>{const st=O(Se);return x.jsx("div",{className:`text-sm ${Se.role==="user"?"bg-neutral-100 dark:bg-neutral-800 rounded-lg px-3 py-2":""}`,children:x.jsx("div",{className:Se.role==="user"?"text-neutral-900 dark:text-neutral-100":"text-neutral-700 dark:text-neutral-300",children:Se.role==="assistant"?st?x.jsx(gT,{children:st}):L(Se,Oe)?x.jsxs("span",{className:"flex items-center gap-2 text-neutral-400",children:[x.jsx(If,{size:14,className:"animate-spin"}),"Thinking..."]}):null:x.jsx("span",{className:"whitespace-pre-wrap",children:st})})},Se.id)},e[75]=L,e[76]=ue):ue=e[76],Zt=q.map(ue),e[72]=L,e[73]=q,e[74]=Zt}else Zt=e[74];let an;e[77]!==M||e[78]!==q?(an=M&&(q.length===0||q[q.length-1]?.role==="user")&&x.jsx("div",{className:"text-sm",children:x.jsx("div",{className:"text-neutral-800 dark:text-neutral-200",children:x.jsxs("span",{className:"flex items-center gap-2 text-neutral-400",children:[x.jsx(If,{size:14,className:"animate-spin"}),"Thinking..."]})})}),e[77]=M,e[78]=q,e[79]=an):an=e[79];let rr;e[80]===Symbol.for("react.memo_cache_sentinel")?(rr=x.jsx("div",{ref:m}),e[80]=rr):rr=e[80];let In;e[81]!==Nt||e[82]!==Zt||e[83]!==an?(In=x.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 min-h-0",children:[Nt,Zt,an,rr]}),e[81]=Nt,e[82]=Zt,e[83]=an,e[84]=In):In=e[84];let $n;e[85]===Symbol.for("react.memo_cache_sentinel")?($n=ue=>u(ue.target.value),e[85]=$n):$n=e[85];let on;e[86]===Symbol.for("react.memo_cache_sentinel")?(on={maxHeight:"120px"},e[86]=on):on=e[86];let we;e[87]!==D.placeholder||e[88]!==G||e[89]!==l||e[90]!==M?(we=x.jsx("textarea",{ref:p,value:l,onChange:$n,onKeyDown:G,placeholder:D.placeholder,rows:1,disabled:M,className:"flex-1 px-3 py-2 bg-neutral-50 border border-neutral-200 dark:bg-neutral-800 dark:border-neutral-700 rounded-lg text-neutral-900 dark:text-neutral-100 text-sm placeholder-neutral-400 resize-none focus:outline-none focus:ring-2 focus:ring-amber-500/50 focus:border-amber-500 disabled:opacity-50",style:on}),e[87]=D.placeholder,e[88]=G,e[89]=l,e[90]=M,e[91]=we):we=e[91];const Qe=M?"button":"submit",et=M?Q:void 0;let Re;e[92]!==l||e[93]!==M?(Re=!M&&!l.trim(),e[92]=l,e[93]=M,e[94]=Re):Re=e[94];let kt;e[95]!==M?(kt=M?x.jsx(PD,{size:16}):x.jsx(ND,{size:16}),e[95]=M,e[96]=kt):kt=e[96];let se;e[97]!==Qe||e[98]!==et||e[99]!==Re||e[100]!==kt?(se=x.jsx("button",{type:Qe,onClick:et,disabled:Re,className:"p-2 bg-amber-500 hover:bg-amber-400 disabled:bg-neutral-300 dark:disabled:bg-neutral-700 disabled:text-neutral-500 text-white rounded-lg transition-colors",children:kt}),e[97]=Qe,e[98]=et,e[99]=Re,e[100]=kt,e[101]=se):se=e[101];let me;e[102]!==we||e[103]!==se?(me=x.jsxs("div",{className:"flex items-end gap-2",children:[we,se]}),e[102]=we,e[103]=se,e[104]=me):me=e[104];let he;e[105]!==I||e[106]!==me?(he=x.jsx("form",{onSubmit:I,className:"shrink-0 p-3 border-t border-neutral-200 dark:border-neutral-800",children:me}),e[105]=I,e[106]=me,e[107]=he):he=e[107];let _e;return e[108]!==Ct||e[109]!==In||e[110]!==he?(_e=x.jsxs("div",{className:"w-96 shrink-0 bg-white border border-neutral-200 dark:bg-neutral-900 dark:border-neutral-800 flex flex-col rounded-xl overflow-hidden",children:[Ct,In,he]}),e[108]=Ct,e[109]=In,e[110]=he,e[111]=_e):_e=e[111],_e}function LZ(t){return t.parts.filter(PZ).map(zZ).join("").replace(/^undefined/,"")}function zZ(t){return t.content}function PZ(t){return t.type==="text"&&!!t.content}function BZ(){const t=$e.c(28),{request:e,aiPanelOpen:n,toggleAiPanel:r,setMethod:s,setUrl:a,setHeaders:l,setQuery:u,setBody:f,setGrpcBody:d,setGrpcMetadata:m,setMcpHeaders:p,setMcpTool:y,setMcpResource:g,setOpenAIModel:v,setOpenAIBodyType:w,setOpenAIChatInput:E,setOpenAIImagePrompt:k,setOpenAIImageFiles:C,setOpenAIAudioText:T,setOpenAIAudioVoice:D,setOpenAIEmbeddingsInput:N}=tn();let R;t[0]!==f||t[1]!==d||t[2]!==m||t[3]!==l||t[4]!==p||t[5]!==g||t[6]!==y||t[7]!==s||t[8]!==T||t[9]!==D||t[10]!==w||t[11]!==E||t[12]!==N||t[13]!==C||t[14]!==k||t[15]!==v||t[16]!==u||t[17]!==a?(R={setMethod:s,setUrl:a,setHeaders:l,setQuery:u,setBody:f,setGrpcBody:d,setGrpcMetadata:m,setMcpHeaders:p,setMcpTool:y,setMcpResource:g,setOpenAIModel:v,setOpenAIBodyType:w,setOpenAIChatInput:E,setOpenAIImagePrompt:k,setOpenAIImageFiles:C,setOpenAIAudioText:T,setOpenAIAudioVoice:D,setOpenAIEmbeddingsInput:N},t[0]=f,t[1]=d,t[2]=m,t[3]=l,t[4]=p,t[5]=g,t[6]=y,t[7]=s,t[8]=T,t[9]=D,t[10]=w,t[11]=E,t[12]=N,t[13]=C,t[14]=k,t[15]=v,t[16]=u,t[17]=a,t[18]=R):R=t[18];const $=R;let q;t[19]===Symbol.for("react.memo_cache_sentinel")?(q=x.jsx(XD,{}),t[19]=q):q=t[19];let H;t[20]===Symbol.for("react.memo_cache_sentinel")?(H=x.jsx("div",{className:"flex-1 flex flex-col overflow-hidden gap-2 min-w-0",children:x.jsx("div",{className:"flex-1 overflow-hidden min-h-0",children:x.jsx(rK,{})})}),t[20]=H):H=t[20];let M;t[21]!==n||t[22]!==$||t[23]!==e||t[24]!==r?(M=n&&qy().ai?.model&&x.jsx(jZ,{isOpen:n,onClose:r,request:e,setters:$}),t[21]=n,t[22]=$,t[23]=e,t[24]=r,t[25]=M):M=t[25];let Q;return t[26]!==M?(Q=x.jsxs("div",{className:"h-screen flex bg-neutral-50 dark:bg-[#0d0d0d] py-2 pr-2 pl-1 gap-2 text-neutral-900 dark:text-neutral-100",children:[q,H,M]}),t[26]=M,t[27]=Q):Q=t[27],Q}function $Z(){const t=$e.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=x.jsx(B3,{children:x.jsx(U3,{children:x.jsx(BZ,{})})}),t[0]=e):e=t[0],e}tj().then(()=>{pO.createRoot(document.getElementById("root")).render(x.jsx(Z.StrictMode,{children:x.jsx($O,{client:Pk,children:x.jsx($Z,{})})}))});
