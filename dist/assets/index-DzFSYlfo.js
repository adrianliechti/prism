const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/angular-html-CU67Zn6k.js","assets/html-GMplVEZG.js","assets/javascript-wDzz0qaB.js","assets/css-DPfMkruS.js","assets/angular-ts-BwZT4LLn.js","assets/scss-OYdSNvt2.js","assets/apl-dKokRX4l.js","assets/xml-sdJ4AIDG.js","assets/java-CylS5w8V.js","assets/json-Cp-IABpG.js","assets/astro-CbQHKStN.js","assets/typescript-BPQ3VLAy.js","assets/postcss-CXtECtnM.js","assets/tsx-COt5Ahok.js","assets/blade-DVc8C-J4.js","assets/html-derivative-BFtXZ54Q.js","assets/sql-BLtJtn59.js","assets/bsl-BO_Y6i37.js","assets/sdbl-DVxCFoDh.js","assets/cairo-KRGpt6FW.js","assets/python-B6aJPvgy.js","assets/cobol-nwyudZeR.js","assets/coffee-Ch7k5sss.js","assets/cpp-CofmeUqb.js","assets/regexp-CDVJQ6XC.js","assets/glsl-DplSGwfg.js","assets/c-BIGW1oBm.js","assets/crystal-tKQVLTB8.js","assets/shellscript-Yzrsuije.js","assets/edge-BkV0erSs.js","assets/elixir-CDX3lj18.js","assets/elm-DbKCFpqz.js","assets/erb-BOJIQeun.js","assets/ruby-BvKwtOVI.js","assets/haml-B8DHNrY2.js","assets/graphql-ChdNCCLP.js","assets/jsx-g9-lgVsj.js","assets/lua-BbnMAYS6.js","assets/yaml-Buea-lGh.js","assets/erlang-DsQrWhSR.js","assets/markdown-Cvjx9yec.js","assets/fortran-fixed-form-BZjJHVRy.js","assets/fortran-free-form-D22FLkUw.js","assets/fsharp-CXgrBDvD.js","assets/gdresource-B7Tvp0Sc.js","assets/gdshader-DkwncUOv.js","assets/gdscript-DTMYz4Jt.js","assets/git-commit-F4YmCXRG.js","assets/diff-D97Zzqfu.js","assets/git-rebase-r7XF79zn.js","assets/glimmer-js-Rg0-pVw9.js","assets/glimmer-ts-U6CK756n.js","assets/hack-CaT9iCJl.js","assets/handlebars-BL8al0AC.js","assets/http-jrhK8wxY.js","assets/hurl-irOxFIW8.js","assets/csv-fuZLfV_i.js","assets/hxml-Bvhsp5Yf.js","assets/haxe-CzTSHFRz.js","assets/jinja-4LBKfQ-Z.js","assets/jison-wvAkD_A8.js","assets/julia-C8NyazO9.js","assets/r-DiinP2Uv.js","assets/latex-BdAV_C_H.js","assets/tex-CxkMU7Pf.js","assets/liquid-DYVedYrR.js","assets/marko-CPi9NSCl.js","assets/less-B1dDrJ26.js","assets/mdc-DUICxH0z.js","assets/nginx-DknmC5AR.js","assets/nim-CVrawwO9.js","assets/perl-C0TMdlhV.js","assets/php-CDn_0X-4.js","assets/pug-CGlum2m_.js","assets/qml-3beO22l8.js","assets/razor-CE9lU5zL.js","assets/csharp-K5feNrxe.js","assets/rst-B0xPkSld.js","assets/cmake-D1j8_8rp.js","assets/sas-cz2c8ADy.js","assets/shaderlab-Dg9Lc6iA.js","assets/hlsl-D3lLCCz7.js","assets/shellsession-BADoaaVG.js","assets/soy-Brmx7dQM.js","assets/sparql-rVzFXLq3.js","assets/turtle-BsS91CYL.js","assets/stata-BH5u7GGu.js","assets/svelte-3Dk4HxPD.js","assets/templ-W15q3VgB.js","assets/go-Dn2_MT6a.js","assets/ts-tags-zn1MmPIZ.js","assets/twig-CO9l9SDP.js","assets/vue-DnHKYNfI.js","assets/vue-html-CChd_i61.js","assets/vue-vine-8moa0y9V.js","assets/stylus-BEDo0Tqx.js","assets/xsl-CtQFsRM5.js"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();function DS(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Np={exports:{}},Ko={};var dw;function RO(){if(dw)return Ko;dw=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,i,a){var l=null;if(a!==void 0&&(l=""+a),i.key!==void 0&&(l=""+i.key),"key"in i){a={};for(var c in i)c!=="key"&&(a[c]=i[c])}else a=i;return i=a.ref,{$$typeof:t,type:r,key:l,ref:i!==void 0?i:null,props:a}}return Ko.Fragment=e,Ko.jsx=n,Ko.jsxs=n,Ko}var pw;function OO(){return pw||(pw=1,Np.exports=RO()),Np.exports}var C=OO(),Dp={exports:{}},Me={};var mw;function IO(){if(mw)return Me;mw=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),p=Symbol.for("react.activity"),_=Symbol.iterator;function y(N){return N===null||typeof N!="object"?null:(N=_&&N[_]||N["@@iterator"],typeof N=="function"?N:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,k={};function S(N,q,O){this.props=N,this.context=q,this.refs=k,this.updater=O||v}S.prototype.isReactComponent={},S.prototype.setState=function(N,q){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,q,"setState")},S.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function R(){}R.prototype=S.prototype;function T(N,q,O){this.props=N,this.context=q,this.refs=k,this.updater=O||v}var z=T.prototype=new R;z.constructor=T,w(z,S.prototype),z.isPureReactComponent=!0;var L=Array.isArray;function E(){}var M={H:null,A:null,T:null,S:null},$=Object.prototype.hasOwnProperty;function F(N,q,O){var ie=O.ref;return{$$typeof:t,type:N,key:q,ref:ie!==void 0?ie:null,props:O}}function P(N,q){return F(N.type,q,N.props)}function Z(N){return typeof N=="object"&&N!==null&&N.$$typeof===t}function se(N){var q={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(O){return q[O]})}var me=/\/+/g;function V(N,q){return typeof N=="object"&&N!==null&&N.key!=null?se(""+N.key):q.toString(36)}function G(N){switch(N.status){case"fulfilled":return N.value;case"rejected":throw N.reason;default:switch(typeof N.status=="string"?N.then(E,E):(N.status="pending",N.then(function(q){N.status==="pending"&&(N.status="fulfilled",N.value=q)},function(q){N.status==="pending"&&(N.status="rejected",N.reason=q)})),N.status){case"fulfilled":return N.value;case"rejected":throw N.reason}}throw N}function B(N,q,O,ie,fe){var ge=typeof N;(ge==="undefined"||ge==="boolean")&&(N=null);var de=!1;if(N===null)de=!0;else switch(ge){case"bigint":case"string":case"number":de=!0;break;case"object":switch(N.$$typeof){case t:case e:de=!0;break;case m:return de=N._init,B(de(N._payload),q,O,ie,fe)}}if(de)return fe=fe(N),de=ie===""?"."+V(N,0):ie,L(fe)?(O="",de!=null&&(O=de.replace(me,"$&/")+"/"),B(fe,q,O,"",function(Xe){return Xe})):fe!=null&&(Z(fe)&&(fe=P(fe,O+(fe.key==null||N&&N.key===fe.key?"":(""+fe.key).replace(me,"$&/")+"/")+de)),q.push(fe)),1;de=0;var Se=ie===""?".":ie+":";if(L(N))for(var we=0;we<N.length;we++)ie=N[we],ge=Se+V(ie,we),de+=B(ie,q,O,ge,fe);else if(we=y(N),typeof we=="function")for(N=we.call(N),we=0;!(ie=N.next()).done;)ie=ie.value,ge=Se+V(ie,we++),de+=B(ie,q,O,ge,fe);else if(ge==="object"){if(typeof N.then=="function")return B(G(N),q,O,ie,fe);throw q=String(N),Error("Objects are not valid as a React child (found: "+(q==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":q)+"). If you meant to render a collection of children, use an array instead.")}return de}function K(N,q,O){if(N==null)return N;var ie=[],fe=0;return B(N,ie,"","",function(ge){return q.call(O,ge,fe++)}),ie}function re(N){if(N._status===-1){var q=N._result;q=q(),q.then(function(O){(N._status===0||N._status===-1)&&(N._status=1,N._result=O)},function(O){(N._status===0||N._status===-1)&&(N._status=2,N._result=O)}),N._status===-1&&(N._status=0,N._result=q)}if(N._status===1)return N._result.default;throw N._result}var Q=typeof reportError=="function"?reportError:function(N){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof N=="object"&&N!==null&&typeof N.message=="string"?String(N.message):String(N),error:N});if(!window.dispatchEvent(q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",N);return}console.error(N)},I={map:K,forEach:function(N,q,O){K(N,function(){q.apply(this,arguments)},O)},count:function(N){var q=0;return K(N,function(){q++}),q},toArray:function(N){return K(N,function(q){return q})||[]},only:function(N){if(!Z(N))throw Error("React.Children.only expected to receive a single React element child.");return N}};return Me.Activity=p,Me.Children=I,Me.Component=S,Me.Fragment=n,Me.Profiler=i,Me.PureComponent=T,Me.StrictMode=r,Me.Suspense=f,Me.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=M,Me.__COMPILER_RUNTIME={__proto__:null,c:function(N){return M.H.useMemoCache(N)}},Me.cache=function(N){return function(){return N.apply(null,arguments)}},Me.cacheSignal=function(){return null},Me.cloneElement=function(N,q,O){if(N==null)throw Error("The argument must be a React element, but you passed "+N+".");var ie=w({},N.props),fe=N.key;if(q!=null)for(ge in q.key!==void 0&&(fe=""+q.key),q)!$.call(q,ge)||ge==="key"||ge==="__self"||ge==="__source"||ge==="ref"&&q.ref===void 0||(ie[ge]=q[ge]);var ge=arguments.length-2;if(ge===1)ie.children=O;else if(1<ge){for(var de=Array(ge),Se=0;Se<ge;Se++)de[Se]=arguments[Se+2];ie.children=de}return F(N.type,fe,ie)},Me.createContext=function(N){return N={$$typeof:l,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null},N.Provider=N,N.Consumer={$$typeof:a,_context:N},N},Me.createElement=function(N,q,O){var ie,fe={},ge=null;if(q!=null)for(ie in q.key!==void 0&&(ge=""+q.key),q)$.call(q,ie)&&ie!=="key"&&ie!=="__self"&&ie!=="__source"&&(fe[ie]=q[ie]);var de=arguments.length-2;if(de===1)fe.children=O;else if(1<de){for(var Se=Array(de),we=0;we<de;we++)Se[we]=arguments[we+2];fe.children=Se}if(N&&N.defaultProps)for(ie in de=N.defaultProps,de)fe[ie]===void 0&&(fe[ie]=de[ie]);return F(N,ge,fe)},Me.createRef=function(){return{current:null}},Me.forwardRef=function(N){return{$$typeof:c,render:N}},Me.isValidElement=Z,Me.lazy=function(N){return{$$typeof:m,_payload:{_status:-1,_result:N},_init:re}},Me.memo=function(N,q){return{$$typeof:h,type:N,compare:q===void 0?null:q}},Me.startTransition=function(N){var q=M.T,O={};M.T=O;try{var ie=N(),fe=M.S;fe!==null&&fe(O,ie),typeof ie=="object"&&ie!==null&&typeof ie.then=="function"&&ie.then(E,Q)}catch(ge){Q(ge)}finally{q!==null&&O.types!==null&&(q.types=O.types),M.T=q}},Me.unstable_useCacheRefresh=function(){return M.H.useCacheRefresh()},Me.use=function(N){return M.H.use(N)},Me.useActionState=function(N,q,O){return M.H.useActionState(N,q,O)},Me.useCallback=function(N,q){return M.H.useCallback(N,q)},Me.useContext=function(N){return M.H.useContext(N)},Me.useDebugValue=function(){},Me.useDeferredValue=function(N,q){return M.H.useDeferredValue(N,q)},Me.useEffect=function(N,q){return M.H.useEffect(N,q)},Me.useEffectEvent=function(N){return M.H.useEffectEvent(N)},Me.useId=function(){return M.H.useId()},Me.useImperativeHandle=function(N,q,O){return M.H.useImperativeHandle(N,q,O)},Me.useInsertionEffect=function(N,q){return M.H.useInsertionEffect(N,q)},Me.useLayoutEffect=function(N,q){return M.H.useLayoutEffect(N,q)},Me.useMemo=function(N,q){return M.H.useMemo(N,q)},Me.useOptimistic=function(N,q){return M.H.useOptimistic(N,q)},Me.useReducer=function(N,q,O){return M.H.useReducer(N,q,O)},Me.useRef=function(N){return M.H.useRef(N)},Me.useState=function(N){return M.H.useState(N)},Me.useSyncExternalStore=function(N,q,O){return M.H.useSyncExternalStore(N,q,O)},Me.useTransition=function(){return M.H.useTransition()},Me.version="19.2.3",Me}var gw;function Vf(){return gw||(gw=1,Dp.exports=IO()),Dp.exports}var X=Vf(),Mp={exports:{}},Zo={},Lp={exports:{}},zp={};var yw;function NO(){return yw||(yw=1,(function(t){function e(B,K){var re=B.length;B.push(K);e:for(;0<re;){var Q=re-1>>>1,I=B[Q];if(0<i(I,K))B[Q]=K,B[re]=I,re=Q;else break e}}function n(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var K=B[0],re=B.pop();if(re!==K){B[0]=re;e:for(var Q=0,I=B.length,N=I>>>1;Q<N;){var q=2*(Q+1)-1,O=B[q],ie=q+1,fe=B[ie];if(0>i(O,re))ie<I&&0>i(fe,O)?(B[Q]=fe,B[ie]=re,Q=ie):(B[Q]=O,B[q]=re,Q=q);else if(ie<I&&0>i(fe,re))B[Q]=fe,B[ie]=re,Q=ie;else break e}}return K}function i(B,K){var re=B.sortIndex-K.sortIndex;return re!==0?re:B.id-K.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var l=Date,c=l.now();t.unstable_now=function(){return l.now()-c}}var f=[],h=[],m=1,p=null,_=3,y=!1,v=!1,w=!1,k=!1,S=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;function z(B){for(var K=n(h);K!==null;){if(K.callback===null)r(h);else if(K.startTime<=B)r(h),K.sortIndex=K.expirationTime,e(f,K);else break;K=n(h)}}function L(B){if(w=!1,z(B),!v)if(n(f)!==null)v=!0,E||(E=!0,se());else{var K=n(h);K!==null&&G(L,K.startTime-B)}}var E=!1,M=-1,$=5,F=-1;function P(){return k?!0:!(t.unstable_now()-F<$)}function Z(){if(k=!1,E){var B=t.unstable_now();F=B;var K=!0;try{e:{v=!1,w&&(w=!1,R(M),M=-1),y=!0;var re=_;try{t:{for(z(B),p=n(f);p!==null&&!(p.expirationTime>B&&P());){var Q=p.callback;if(typeof Q=="function"){p.callback=null,_=p.priorityLevel;var I=Q(p.expirationTime<=B);if(B=t.unstable_now(),typeof I=="function"){p.callback=I,z(B),K=!0;break t}p===n(f)&&r(f),z(B)}else r(f);p=n(f)}if(p!==null)K=!0;else{var N=n(h);N!==null&&G(L,N.startTime-B),K=!1}}break e}finally{p=null,_=re,y=!1}K=void 0}}finally{K?se():E=!1}}}var se;if(typeof T=="function")se=function(){T(Z)};else if(typeof MessageChannel<"u"){var me=new MessageChannel,V=me.port2;me.port1.onmessage=Z,se=function(){V.postMessage(null)}}else se=function(){S(Z,0)};function G(B,K){M=S(function(){B(t.unstable_now())},K)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):$=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return _},t.unstable_next=function(B){switch(_){case 1:case 2:case 3:var K=3;break;default:K=_}var re=_;_=K;try{return B()}finally{_=re}},t.unstable_requestPaint=function(){k=!0},t.unstable_runWithPriority=function(B,K){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var re=_;_=B;try{return K()}finally{_=re}},t.unstable_scheduleCallback=function(B,K,re){var Q=t.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?Q+re:Q):re=Q,B){case 1:var I=-1;break;case 2:I=250;break;case 5:I=1073741823;break;case 4:I=1e4;break;default:I=5e3}return I=re+I,B={id:m++,callback:K,priorityLevel:B,startTime:re,expirationTime:I,sortIndex:-1},re>Q?(B.sortIndex=re,e(h,B),n(f)===null&&B===n(h)&&(w?(R(M),M=-1):w=!0,G(L,re-Q))):(B.sortIndex=I,e(f,B),v||y||(v=!0,E||(E=!0,se()))),B},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(B){var K=_;return function(){var re=_;_=K;try{return B.apply(this,arguments)}finally{_=re}}}})(zp)),zp}var _w;function DO(){return _w||(_w=1,Lp.exports=NO()),Lp.exports}var Pp={exports:{}},fn={};var bw;function MO(){if(bw)return fn;bw=1;var t=Vf();function e(f){var h="https://react.dev/errors/"+f;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)h+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+f+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function a(f,h,m){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:p==null?null:""+p,children:f,containerInfo:h,implementation:m}}var l=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(f,h){if(f==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return fn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,fn.createPortal=function(f,h){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return a(f,h,null,m)},fn.flushSync=function(f){var h=l.T,m=r.p;try{if(l.T=null,r.p=2,f)return f()}finally{l.T=h,r.p=m,r.d.f()}},fn.preconnect=function(f,h){typeof f=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,r.d.C(f,h))},fn.prefetchDNS=function(f){typeof f=="string"&&r.d.D(f)},fn.preinit=function(f,h){if(typeof f=="string"&&h&&typeof h.as=="string"){var m=h.as,p=c(m,h.crossOrigin),_=typeof h.integrity=="string"?h.integrity:void 0,y=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;m==="style"?r.d.S(f,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:p,integrity:_,fetchPriority:y}):m==="script"&&r.d.X(f,{crossOrigin:p,integrity:_,fetchPriority:y,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},fn.preinitModule=function(f,h){if(typeof f=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var m=c(h.as,h.crossOrigin);r.d.M(f,{crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&r.d.M(f)},fn.preload=function(f,h){if(typeof f=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var m=h.as,p=c(m,h.crossOrigin);r.d.L(f,m,{crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},fn.preloadModule=function(f,h){if(typeof f=="string")if(h){var m=c(h.as,h.crossOrigin);r.d.m(f,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else r.d.m(f)},fn.requestFormReset=function(f){r.d.r(f)},fn.unstable_batchedUpdates=function(f,h){return f(h)},fn.useFormState=function(f,h,m){return l.H.useFormState(f,h,m)},fn.useFormStatus=function(){return l.H.useHostTransitionStatus()},fn.version="19.2.3",fn}var vw;function LO(){if(vw)return Pp.exports;vw=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Pp.exports=MO(),Pp.exports}var ww;function zO(){if(ww)return Zo;ww=1;var t=DO(),e=Vf(),n=LO();function r(s){var o="https://react.dev/errors/"+s;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)o+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+s+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function a(s){var o=s,u=s;if(s.alternate)for(;o.return;)o=o.return;else{s=o;do o=s,(o.flags&4098)!==0&&(u=o.return),s=o.return;while(s)}return o.tag===3?u:null}function l(s){if(s.tag===13){var o=s.memoizedState;if(o===null&&(s=s.alternate,s!==null&&(o=s.memoizedState)),o!==null)return o.dehydrated}return null}function c(s){if(s.tag===31){var o=s.memoizedState;if(o===null&&(s=s.alternate,s!==null&&(o=s.memoizedState)),o!==null)return o.dehydrated}return null}function f(s){if(a(s)!==s)throw Error(r(188))}function h(s){var o=s.alternate;if(!o){if(o=a(s),o===null)throw Error(r(188));return o!==s?null:s}for(var u=s,d=o;;){var g=u.return;if(g===null)break;var b=g.alternate;if(b===null){if(d=g.return,d!==null){u=d;continue}break}if(g.child===b.child){for(b=g.child;b;){if(b===u)return f(g),s;if(b===d)return f(g),o;b=b.sibling}throw Error(r(188))}if(u.return!==d.return)u=g,d=b;else{for(var x=!1,A=g.child;A;){if(A===u){x=!0,u=g,d=b;break}if(A===d){x=!0,d=g,u=b;break}A=A.sibling}if(!x){for(A=b.child;A;){if(A===u){x=!0,u=b,d=g;break}if(A===d){x=!0,d=b,u=g;break}A=A.sibling}if(!x)throw Error(r(189))}}if(u.alternate!==d)throw Error(r(190))}if(u.tag!==3)throw Error(r(188));return u.stateNode.current===u?s:o}function m(s){var o=s.tag;if(o===5||o===26||o===27||o===6)return s;for(s=s.child;s!==null;){if(o=m(s),o!==null)return o;s=s.sibling}return null}var p=Object.assign,_=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),v=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),R=Symbol.for("react.consumer"),T=Symbol.for("react.context"),z=Symbol.for("react.forward_ref"),L=Symbol.for("react.suspense"),E=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),$=Symbol.for("react.lazy"),F=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),Z=Symbol.iterator;function se(s){return s===null||typeof s!="object"?null:(s=Z&&s[Z]||s["@@iterator"],typeof s=="function"?s:null)}var me=Symbol.for("react.client.reference");function V(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===me?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case w:return"Fragment";case S:return"Profiler";case k:return"StrictMode";case L:return"Suspense";case E:return"SuspenseList";case F:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case v:return"Portal";case T:return s.displayName||"Context";case R:return(s._context.displayName||"Context")+".Consumer";case z:var o=s.render;return s=s.displayName,s||(s=o.displayName||o.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case M:return o=s.displayName||null,o!==null?o:V(s.type)||"Memo";case $:o=s._payload,s=s._init;try{return V(s(o))}catch{}}return null}var G=Array.isArray,B=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re={pending:!1,data:null,method:null,action:null},Q=[],I=-1;function N(s){return{current:s}}function q(s){0>I||(s.current=Q[I],Q[I]=null,I--)}function O(s,o){I++,Q[I]=s.current,s.current=o}var ie=N(null),fe=N(null),ge=N(null),de=N(null);function Se(s,o){switch(O(ge,o),O(fe,s),O(ie,null),o.nodeType){case 9:case 11:s=(s=o.documentElement)&&(s=s.namespaceURI)?zv(s):0;break;default:if(s=o.tagName,o=o.namespaceURI)o=zv(o),s=Pv(o,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}q(ie),O(ie,s)}function we(){q(ie),q(fe),q(ge)}function Xe(s){s.memoizedState!==null&&O(de,s);var o=ie.current,u=Pv(o,s.type);o!==u&&(O(fe,s),O(ie,u))}function at(s){fe.current===s&&(q(ie),q(fe)),de.current===s&&(q(de),Fo._currentValue=re)}var yt,Dt;function Mt(s){if(yt===void 0)try{throw Error()}catch(u){var o=u.stack.trim().match(/\n( *(at )?)/);yt=o&&o[1]||"",Dt=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+yt+s+Dt}var Vt=!1;function _n(s,o){if(!s||Vt)return"";Vt=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(o){var le=function(){throw Error()};if(Object.defineProperty(le.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(le,[])}catch(te){var ee=te}Reflect.construct(s,[],le)}else{try{le.call()}catch(te){ee=te}s.call(le.prototype)}}else{try{throw Error()}catch(te){ee=te}(le=s())&&typeof le.catch=="function"&&le.catch(function(){})}}catch(te){if(te&&ee&&typeof te.stack=="string")return[te.stack,ee.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var b=d.DetermineComponentFrameRoot(),x=b[0],A=b[1];if(x&&A){var j=x.split(`
`),Y=A.split(`
`);for(g=d=0;d<j.length&&!j[d].includes("DetermineComponentFrameRoot");)d++;for(;g<Y.length&&!Y[g].includes("DetermineComponentFrameRoot");)g++;if(d===j.length||g===Y.length)for(d=j.length-1,g=Y.length-1;1<=d&&0<=g&&j[d]!==Y[g];)g--;for(;1<=d&&0<=g;d--,g--)if(j[d]!==Y[g]){if(d!==1||g!==1)do if(d--,g--,0>g||j[d]!==Y[g]){var ae=`
`+j[d].replace(" at new "," at ");return s.displayName&&ae.includes("<anonymous>")&&(ae=ae.replace("<anonymous>",s.displayName)),ae}while(1<=d&&0<=g);break}}}finally{Vt=!1,Error.prepareStackTrace=u}return(u=s?s.displayName||s.name:"")?Mt(u):""}function Xt(s,o){switch(s.tag){case 26:case 27:case 5:return Mt(s.type);case 16:return Mt("Lazy");case 13:return s.child!==o&&o!==null?Mt("Suspense Fallback"):Mt("Suspense");case 19:return Mt("SuspenseList");case 0:case 15:return _n(s.type,!1);case 11:return _n(s.type.render,!1);case 1:return _n(s.type,!0);case 31:return Mt("Activity");default:return""}}function Cn(s){try{var o="",u=null;do o+=Xt(s,u),u=s,s=s.return;while(s);return o}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}var $n=Object.prototype.hasOwnProperty,Tn=t.unstable_scheduleCallback,ye=t.unstable_cancelCallback,Be=t.unstable_shouldYield,Ue=t.unstable_requestPaint,Ae=t.unstable_now,Qe=t.unstable_getCurrentPriorityLevel,ne=t.unstable_ImmediatePriority,ue=t.unstable_UserBlockingPriority,_e=t.unstable_NormalPriority,Ee=t.unstable_LowPriority,Ie=t.unstable_IdlePriority,vt=t.log,cn=t.unstable_setDisableYieldValue,Ht=null,_t=null;function An(s){if(typeof vt=="function"&&cn(s),_t&&typeof _t.setStrictMode=="function")try{_t.setStrictMode(Ht,s)}catch{}}var ot=Math.clz32?Math.clz32:mA,pi=Math.log,vr=Math.LN2;function mA(s){return s>>>=0,s===0?32:31-(pi(s)/vr|0)|0}var nu=256,ru=262144,iu=4194304;function ts(s){var o=s&42;if(o!==0)return o;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function su(s,o,u){var d=s.pendingLanes;if(d===0)return 0;var g=0,b=s.suspendedLanes,x=s.pingedLanes;s=s.warmLanes;var A=d&134217727;return A!==0?(d=A&~b,d!==0?g=ts(d):(x&=A,x!==0?g=ts(x):u||(u=A&~s,u!==0&&(g=ts(u))))):(A=d&~b,A!==0?g=ts(A):x!==0?g=ts(x):u||(u=d&~s,u!==0&&(g=ts(u)))),g===0?0:o!==0&&o!==g&&(o&b)===0&&(b=g&-g,u=o&-o,b>=u||b===32&&(u&4194048)!==0)?o:g}function to(s,o){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&o)===0}function gA(s,o){switch(s){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function y0(){var s=iu;return iu<<=1,(iu&62914560)===0&&(iu=4194304),s}function vh(s){for(var o=[],u=0;31>u;u++)o.push(s);return o}function no(s,o){s.pendingLanes|=o,o!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function yA(s,o,u,d,g,b){var x=s.pendingLanes;s.pendingLanes=u,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=u,s.entangledLanes&=u,s.errorRecoveryDisabledLanes&=u,s.shellSuspendCounter=0;var A=s.entanglements,j=s.expirationTimes,Y=s.hiddenUpdates;for(u=x&~u;0<u;){var ae=31-ot(u),le=1<<ae;A[ae]=0,j[ae]=-1;var ee=Y[ae];if(ee!==null)for(Y[ae]=null,ae=0;ae<ee.length;ae++){var te=ee[ae];te!==null&&(te.lane&=-536870913)}u&=~le}d!==0&&_0(s,d,0),b!==0&&g===0&&s.tag!==0&&(s.suspendedLanes|=b&~(x&~o))}function _0(s,o,u){s.pendingLanes|=o,s.suspendedLanes&=~o;var d=31-ot(o);s.entangledLanes|=o,s.entanglements[d]=s.entanglements[d]|1073741824|u&261930}function b0(s,o){var u=s.entangledLanes|=o;for(s=s.entanglements;u;){var d=31-ot(u),g=1<<d;g&o|s[d]&o&&(s[d]|=o),u&=~g}}function v0(s,o){var u=o&-o;return u=(u&42)!==0?1:wh(u),(u&(s.suspendedLanes|o))!==0?0:u}function wh(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function xh(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function w0(){var s=K.p;return s!==0?s:(s=window.event,s===void 0?32:aw(s.type))}function x0(s,o){var u=K.p;try{return K.p=s,o()}finally{K.p=u}}var mi=Math.random().toString(36).slice(2),Wt="__reactFiber$"+mi,Rn="__reactProps$"+mi,js="__reactContainer$"+mi,Sh="__reactEvents$"+mi,_A="__reactListeners$"+mi,bA="__reactHandles$"+mi,S0="__reactResources$"+mi,ro="__reactMarker$"+mi;function Eh(s){delete s[Wt],delete s[Rn],delete s[Sh],delete s[_A],delete s[bA]}function Bs(s){var o=s[Wt];if(o)return o;for(var u=s.parentNode;u;){if(o=u[js]||u[Wt]){if(u=o.alternate,o.child!==null||u!==null&&u.child!==null)for(s=Vv(s);s!==null;){if(u=s[Wt])return u;s=Vv(s)}return o}s=u,u=s.parentNode}return null}function Us(s){if(s=s[Wt]||s[js]){var o=s.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return s}return null}function io(s){var o=s.tag;if(o===5||o===26||o===27||o===6)return s.stateNode;throw Error(r(33))}function $s(s){var o=s[S0];return o||(o=s[S0]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function Gt(s){s[ro]=!0}var E0=new Set,k0={};function ns(s,o){qs(s,o),qs(s+"Capture",o)}function qs(s,o){for(k0[s]=o,s=0;s<o.length;s++)E0.add(o[s])}var vA=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),C0={},T0={};function wA(s){return $n.call(T0,s)?!0:$n.call(C0,s)?!1:vA.test(s)?T0[s]=!0:(C0[s]=!0,!1)}function au(s,o,u){if(wA(o))if(u===null)s.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":s.removeAttribute(o);return;case"boolean":var d=o.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){s.removeAttribute(o);return}}s.setAttribute(o,""+u)}}function ou(s,o,u){if(u===null)s.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(o);return}s.setAttribute(o,""+u)}}function Fr(s,o,u,d){if(d===null)s.removeAttribute(u);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(u);return}s.setAttributeNS(o,u,""+d)}}function nr(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function A0(s){var o=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function xA(s,o,u){var d=Object.getOwnPropertyDescriptor(s.constructor.prototype,o);if(!s.hasOwnProperty(o)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var g=d.get,b=d.set;return Object.defineProperty(s,o,{configurable:!0,get:function(){return g.call(this)},set:function(x){u=""+x,b.call(this,x)}}),Object.defineProperty(s,o,{enumerable:d.enumerable}),{getValue:function(){return u},setValue:function(x){u=""+x},stopTracking:function(){s._valueTracker=null,delete s[o]}}}}function kh(s){if(!s._valueTracker){var o=A0(s)?"checked":"value";s._valueTracker=xA(s,o,""+s[o])}}function R0(s){if(!s)return!1;var o=s._valueTracker;if(!o)return!0;var u=o.getValue(),d="";return s&&(d=A0(s)?s.checked?"true":"false":s.value),s=d,s!==u?(o.setValue(s),!0):!1}function lu(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var SA=/[\n"\\]/g;function rr(s){return s.replace(SA,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function Ch(s,o,u,d,g,b,x,A){s.name="",x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?s.type=x:s.removeAttribute("type"),o!=null?x==="number"?(o===0&&s.value===""||s.value!=o)&&(s.value=""+nr(o)):s.value!==""+nr(o)&&(s.value=""+nr(o)):x!=="submit"&&x!=="reset"||s.removeAttribute("value"),o!=null?Th(s,x,nr(o)):u!=null?Th(s,x,nr(u)):d!=null&&s.removeAttribute("value"),g==null&&b!=null&&(s.defaultChecked=!!b),g!=null&&(s.checked=g&&typeof g!="function"&&typeof g!="symbol"),A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?s.name=""+nr(A):s.removeAttribute("name")}function O0(s,o,u,d,g,b,x,A){if(b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(s.type=b),o!=null||u!=null){if(!(b!=="submit"&&b!=="reset"||o!=null)){kh(s);return}u=u!=null?""+nr(u):"",o=o!=null?""+nr(o):u,A||o===s.value||(s.value=o),s.defaultValue=o}d=d??g,d=typeof d!="function"&&typeof d!="symbol"&&!!d,s.checked=A?s.checked:!!d,s.defaultChecked=!!d,x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(s.name=x),kh(s)}function Th(s,o,u){o==="number"&&lu(s.ownerDocument)===s||s.defaultValue===""+u||(s.defaultValue=""+u)}function Fs(s,o,u,d){if(s=s.options,o){o={};for(var g=0;g<u.length;g++)o["$"+u[g]]=!0;for(u=0;u<s.length;u++)g=o.hasOwnProperty("$"+s[u].value),s[u].selected!==g&&(s[u].selected=g),g&&d&&(s[u].defaultSelected=!0)}else{for(u=""+nr(u),o=null,g=0;g<s.length;g++){if(s[g].value===u){s[g].selected=!0,d&&(s[g].defaultSelected=!0);return}o!==null||s[g].disabled||(o=s[g])}o!==null&&(o.selected=!0)}}function I0(s,o,u){if(o!=null&&(o=""+nr(o),o!==s.value&&(s.value=o),u==null)){s.defaultValue!==o&&(s.defaultValue=o);return}s.defaultValue=u!=null?""+nr(u):""}function N0(s,o,u,d){if(o==null){if(d!=null){if(u!=null)throw Error(r(92));if(G(d)){if(1<d.length)throw Error(r(93));d=d[0]}u=d}u==null&&(u=""),o=u}u=nr(o),s.defaultValue=u,d=s.textContent,d===u&&d!==""&&d!==null&&(s.value=d),kh(s)}function Vs(s,o){if(o){var u=s.firstChild;if(u&&u===s.lastChild&&u.nodeType===3){u.nodeValue=o;return}}s.textContent=o}var EA=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function D0(s,o,u){var d=o.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?d?s.setProperty(o,""):o==="float"?s.cssFloat="":s[o]="":d?s.setProperty(o,u):typeof u!="number"||u===0||EA.has(o)?o==="float"?s.cssFloat=u:s[o]=(""+u).trim():s[o]=u+"px"}function M0(s,o,u){if(o!=null&&typeof o!="object")throw Error(r(62));if(s=s.style,u!=null){for(var d in u)!u.hasOwnProperty(d)||o!=null&&o.hasOwnProperty(d)||(d.indexOf("--")===0?s.setProperty(d,""):d==="float"?s.cssFloat="":s[d]="");for(var g in o)d=o[g],o.hasOwnProperty(g)&&u[g]!==d&&D0(s,g,d)}else for(var b in o)o.hasOwnProperty(b)&&D0(s,b,o[b])}function Ah(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var kA=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),CA=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function uu(s){return CA.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function Vr(){}var Rh=null;function Oh(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Hs=null,Gs=null;function L0(s){var o=Us(s);if(o&&(s=o.stateNode)){var u=s[Rn]||null;e:switch(s=o.stateNode,o.type){case"input":if(Ch(s,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),o=u.name,u.type==="radio"&&o!=null){for(u=s;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+rr(""+o)+'"][type="radio"]'),o=0;o<u.length;o++){var d=u[o];if(d!==s&&d.form===s.form){var g=d[Rn]||null;if(!g)throw Error(r(90));Ch(d,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(o=0;o<u.length;o++)d=u[o],d.form===s.form&&R0(d)}break e;case"textarea":I0(s,u.value,u.defaultValue);break e;case"select":o=u.value,o!=null&&Fs(s,!!u.multiple,o,!1)}}}var Ih=!1;function z0(s,o,u){if(Ih)return s(o,u);Ih=!0;try{var d=s(o);return d}finally{if(Ih=!1,(Hs!==null||Gs!==null)&&(Ju(),Hs&&(o=Hs,s=Gs,Gs=Hs=null,L0(o),s)))for(o=0;o<s.length;o++)L0(s[o])}}function so(s,o){var u=s.stateNode;if(u===null)return null;var d=u[Rn]||null;if(d===null)return null;u=d[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(s=s.type,d=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!d;break e;default:s=!1}if(s)return null;if(u&&typeof u!="function")throw Error(r(231,o,typeof u));return u}var Hr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Nh=!1;if(Hr)try{var ao={};Object.defineProperty(ao,"passive",{get:function(){Nh=!0}}),window.addEventListener("test",ao,ao),window.removeEventListener("test",ao,ao)}catch{Nh=!1}var gi=null,Dh=null,cu=null;function P0(){if(cu)return cu;var s,o=Dh,u=o.length,d,g="value"in gi?gi.value:gi.textContent,b=g.length;for(s=0;s<u&&o[s]===g[s];s++);var x=u-s;for(d=1;d<=x&&o[u-d]===g[b-d];d++);return cu=g.slice(s,1<d?1-d:void 0)}function fu(s){var o=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&o===13&&(s=13)):s=o,s===10&&(s=13),32<=s||s===13?s:0}function hu(){return!0}function j0(){return!1}function On(s){function o(u,d,g,b,x){this._reactName=u,this._targetInst=g,this.type=d,this.nativeEvent=b,this.target=x,this.currentTarget=null;for(var A in s)s.hasOwnProperty(A)&&(u=s[A],this[A]=u?u(b):b[A]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?hu:j0,this.isPropagationStopped=j0,this}return p(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=hu)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=hu)},persist:function(){},isPersistent:hu}),o}var rs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},du=On(rs),oo=p({},rs,{view:0,detail:0}),TA=On(oo),Mh,Lh,lo,pu=p({},oo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ph,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==lo&&(lo&&s.type==="mousemove"?(Mh=s.screenX-lo.screenX,Lh=s.screenY-lo.screenY):Lh=Mh=0,lo=s),Mh)},movementY:function(s){return"movementY"in s?s.movementY:Lh}}),B0=On(pu),AA=p({},pu,{dataTransfer:0}),RA=On(AA),OA=p({},oo,{relatedTarget:0}),zh=On(OA),IA=p({},rs,{animationName:0,elapsedTime:0,pseudoElement:0}),NA=On(IA),DA=p({},rs,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),MA=On(DA),LA=p({},rs,{data:0}),U0=On(LA),zA={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},PA={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},jA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function BA(s){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(s):(s=jA[s])?!!o[s]:!1}function Ph(){return BA}var UA=p({},oo,{key:function(s){if(s.key){var o=zA[s.key]||s.key;if(o!=="Unidentified")return o}return s.type==="keypress"?(s=fu(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?PA[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ph,charCode:function(s){return s.type==="keypress"?fu(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?fu(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),$A=On(UA),qA=p({},pu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$0=On(qA),FA=p({},oo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ph}),VA=On(FA),HA=p({},rs,{propertyName:0,elapsedTime:0,pseudoElement:0}),GA=On(HA),KA=p({},pu,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),ZA=On(KA),QA=p({},rs,{newState:0,oldState:0}),JA=On(QA),YA=[9,13,27,32],jh=Hr&&"CompositionEvent"in window,uo=null;Hr&&"documentMode"in document&&(uo=document.documentMode);var XA=Hr&&"TextEvent"in window&&!uo,q0=Hr&&(!jh||uo&&8<uo&&11>=uo),F0=" ",V0=!1;function H0(s,o){switch(s){case"keyup":return YA.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function G0(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Ks=!1;function WA(s,o){switch(s){case"compositionend":return G0(o);case"keypress":return o.which!==32?null:(V0=!0,F0);case"textInput":return s=o.data,s===F0&&V0?null:s;default:return null}}function eR(s,o){if(Ks)return s==="compositionend"||!jh&&H0(s,o)?(s=P0(),cu=Dh=gi=null,Ks=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return q0&&o.locale!=="ko"?null:o.data;default:return null}}var tR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function K0(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o==="input"?!!tR[s.type]:o==="textarea"}function Z0(s,o,u,d){Hs?Gs?Gs.push(d):Gs=[d]:Hs=d,o=rc(o,"onChange"),0<o.length&&(u=new du("onChange","change",null,u,d),s.push({event:u,listeners:o}))}var co=null,fo=null;function nR(s){Ov(s,0)}function mu(s){var o=io(s);if(R0(o))return s}function Q0(s,o){if(s==="change")return o}var J0=!1;if(Hr){var Bh;if(Hr){var Uh="oninput"in document;if(!Uh){var Y0=document.createElement("div");Y0.setAttribute("oninput","return;"),Uh=typeof Y0.oninput=="function"}Bh=Uh}else Bh=!1;J0=Bh&&(!document.documentMode||9<document.documentMode)}function X0(){co&&(co.detachEvent("onpropertychange",W0),fo=co=null)}function W0(s){if(s.propertyName==="value"&&mu(fo)){var o=[];Z0(o,fo,s,Oh(s)),z0(nR,o)}}function rR(s,o,u){s==="focusin"?(X0(),co=o,fo=u,co.attachEvent("onpropertychange",W0)):s==="focusout"&&X0()}function iR(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return mu(fo)}function sR(s,o){if(s==="click")return mu(o)}function aR(s,o){if(s==="input"||s==="change")return mu(o)}function oR(s,o){return s===o&&(s!==0||1/s===1/o)||s!==s&&o!==o}var qn=typeof Object.is=="function"?Object.is:oR;function ho(s,o){if(qn(s,o))return!0;if(typeof s!="object"||s===null||typeof o!="object"||o===null)return!1;var u=Object.keys(s),d=Object.keys(o);if(u.length!==d.length)return!1;for(d=0;d<u.length;d++){var g=u[d];if(!$n.call(o,g)||!qn(s[g],o[g]))return!1}return!0}function e_(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function t_(s,o){var u=e_(s);s=0;for(var d;u;){if(u.nodeType===3){if(d=s+u.textContent.length,s<=o&&d>=o)return{node:u,offset:o-s};s=d}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=e_(u)}}function n_(s,o){return s&&o?s===o?!0:s&&s.nodeType===3?!1:o&&o.nodeType===3?n_(s,o.parentNode):"contains"in s?s.contains(o):s.compareDocumentPosition?!!(s.compareDocumentPosition(o)&16):!1:!1}function r_(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var o=lu(s.document);o instanceof s.HTMLIFrameElement;){try{var u=typeof o.contentWindow.location.href=="string"}catch{u=!1}if(u)s=o.contentWindow;else break;o=lu(s.document)}return o}function $h(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o&&(o==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||o==="textarea"||s.contentEditable==="true")}var lR=Hr&&"documentMode"in document&&11>=document.documentMode,Zs=null,qh=null,po=null,Fh=!1;function i_(s,o,u){var d=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;Fh||Zs==null||Zs!==lu(d)||(d=Zs,"selectionStart"in d&&$h(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),po&&ho(po,d)||(po=d,d=rc(qh,"onSelect"),0<d.length&&(o=new du("onSelect","select",null,o,u),s.push({event:o,listeners:d}),o.target=Zs)))}function is(s,o){var u={};return u[s.toLowerCase()]=o.toLowerCase(),u["Webkit"+s]="webkit"+o,u["Moz"+s]="moz"+o,u}var Qs={animationend:is("Animation","AnimationEnd"),animationiteration:is("Animation","AnimationIteration"),animationstart:is("Animation","AnimationStart"),transitionrun:is("Transition","TransitionRun"),transitionstart:is("Transition","TransitionStart"),transitioncancel:is("Transition","TransitionCancel"),transitionend:is("Transition","TransitionEnd")},Vh={},s_={};Hr&&(s_=document.createElement("div").style,"AnimationEvent"in window||(delete Qs.animationend.animation,delete Qs.animationiteration.animation,delete Qs.animationstart.animation),"TransitionEvent"in window||delete Qs.transitionend.transition);function ss(s){if(Vh[s])return Vh[s];if(!Qs[s])return s;var o=Qs[s],u;for(u in o)if(o.hasOwnProperty(u)&&u in s_)return Vh[s]=o[u];return s}var a_=ss("animationend"),o_=ss("animationiteration"),l_=ss("animationstart"),uR=ss("transitionrun"),cR=ss("transitionstart"),fR=ss("transitioncancel"),u_=ss("transitionend"),c_=new Map,Hh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Hh.push("scrollEnd");function wr(s,o){c_.set(s,o),ns(o,[s])}var gu=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},ir=[],Js=0,Gh=0;function yu(){for(var s=Js,o=Gh=Js=0;o<s;){var u=ir[o];ir[o++]=null;var d=ir[o];ir[o++]=null;var g=ir[o];ir[o++]=null;var b=ir[o];if(ir[o++]=null,d!==null&&g!==null){var x=d.pending;x===null?g.next=g:(g.next=x.next,x.next=g),d.pending=g}b!==0&&f_(u,g,b)}}function _u(s,o,u,d){ir[Js++]=s,ir[Js++]=o,ir[Js++]=u,ir[Js++]=d,Gh|=d,s.lanes|=d,s=s.alternate,s!==null&&(s.lanes|=d)}function Kh(s,o,u,d){return _u(s,o,u,d),bu(s)}function as(s,o){return _u(s,null,null,o),bu(s)}function f_(s,o,u){s.lanes|=u;var d=s.alternate;d!==null&&(d.lanes|=u);for(var g=!1,b=s.return;b!==null;)b.childLanes|=u,d=b.alternate,d!==null&&(d.childLanes|=u),b.tag===22&&(s=b.stateNode,s===null||s._visibility&1||(g=!0)),s=b,b=b.return;return s.tag===3?(b=s.stateNode,g&&o!==null&&(g=31-ot(u),s=b.hiddenUpdates,d=s[g],d===null?s[g]=[o]:d.push(o),o.lane=u|536870912),b):null}function bu(s){if(50<zo)throw zo=0,np=null,Error(r(185));for(var o=s.return;o!==null;)s=o,o=s.return;return s.tag===3?s.stateNode:null}var Ys={};function hR(s,o,u,d){this.tag=s,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fn(s,o,u,d){return new hR(s,o,u,d)}function Zh(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Gr(s,o){var u=s.alternate;return u===null?(u=Fn(s.tag,o,s.key,s.mode),u.elementType=s.elementType,u.type=s.type,u.stateNode=s.stateNode,u.alternate=s,s.alternate=u):(u.pendingProps=o,u.type=s.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=s.flags&65011712,u.childLanes=s.childLanes,u.lanes=s.lanes,u.child=s.child,u.memoizedProps=s.memoizedProps,u.memoizedState=s.memoizedState,u.updateQueue=s.updateQueue,o=s.dependencies,u.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},u.sibling=s.sibling,u.index=s.index,u.ref=s.ref,u.refCleanup=s.refCleanup,u}function h_(s,o){s.flags&=65011714;var u=s.alternate;return u===null?(s.childLanes=0,s.lanes=o,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=u.childLanes,s.lanes=u.lanes,s.child=u.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=u.memoizedProps,s.memoizedState=u.memoizedState,s.updateQueue=u.updateQueue,s.type=u.type,o=u.dependencies,s.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),s}function vu(s,o,u,d,g,b){var x=0;if(d=s,typeof s=="function")Zh(s)&&(x=1);else if(typeof s=="string")x=yO(s,u,ie.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case F:return s=Fn(31,u,o,g),s.elementType=F,s.lanes=b,s;case w:return os(u.children,g,b,o);case k:x=8,g|=24;break;case S:return s=Fn(12,u,o,g|2),s.elementType=S,s.lanes=b,s;case L:return s=Fn(13,u,o,g),s.elementType=L,s.lanes=b,s;case E:return s=Fn(19,u,o,g),s.elementType=E,s.lanes=b,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case T:x=10;break e;case R:x=9;break e;case z:x=11;break e;case M:x=14;break e;case $:x=16,d=null;break e}x=29,u=Error(r(130,s===null?"null":typeof s,"")),d=null}return o=Fn(x,u,o,g),o.elementType=s,o.type=d,o.lanes=b,o}function os(s,o,u,d){return s=Fn(7,s,d,o),s.lanes=u,s}function Qh(s,o,u){return s=Fn(6,s,null,o),s.lanes=u,s}function d_(s){var o=Fn(18,null,null,0);return o.stateNode=s,o}function Jh(s,o,u){return o=Fn(4,s.children!==null?s.children:[],s.key,o),o.lanes=u,o.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},o}var p_=new WeakMap;function sr(s,o){if(typeof s=="object"&&s!==null){var u=p_.get(s);return u!==void 0?u:(o={value:s,source:o,stack:Cn(o)},p_.set(s,o),o)}return{value:s,source:o,stack:Cn(o)}}var Xs=[],Ws=0,wu=null,mo=0,ar=[],or=0,yi=null,Tr=1,Ar="";function Kr(s,o){Xs[Ws++]=mo,Xs[Ws++]=wu,wu=s,mo=o}function m_(s,o,u){ar[or++]=Tr,ar[or++]=Ar,ar[or++]=yi,yi=s;var d=Tr;s=Ar;var g=32-ot(d)-1;d&=~(1<<g),u+=1;var b=32-ot(o)+g;if(30<b){var x=g-g%5;b=(d&(1<<x)-1).toString(32),d>>=x,g-=x,Tr=1<<32-ot(o)+g|u<<g|d,Ar=b+s}else Tr=1<<b|u<<g|d,Ar=s}function Yh(s){s.return!==null&&(Kr(s,1),m_(s,1,0))}function Xh(s){for(;s===wu;)wu=Xs[--Ws],Xs[Ws]=null,mo=Xs[--Ws],Xs[Ws]=null;for(;s===yi;)yi=ar[--or],ar[or]=null,Ar=ar[--or],ar[or]=null,Tr=ar[--or],ar[or]=null}function g_(s,o){ar[or++]=Tr,ar[or++]=Ar,ar[or++]=yi,Tr=o.id,Ar=o.overflow,yi=s}var en=null,ft=null,Ke=!1,_i=null,lr=!1,Wh=Error(r(519));function bi(s){var o=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw go(sr(o,s)),Wh}function y_(s){var o=s.stateNode,u=s.type,d=s.memoizedProps;switch(o[Wt]=s,o[Rn]=d,u){case"dialog":qe("cancel",o),qe("close",o);break;case"iframe":case"object":case"embed":qe("load",o);break;case"video":case"audio":for(u=0;u<jo.length;u++)qe(jo[u],o);break;case"source":qe("error",o);break;case"img":case"image":case"link":qe("error",o),qe("load",o);break;case"details":qe("toggle",o);break;case"input":qe("invalid",o),O0(o,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0);break;case"select":qe("invalid",o);break;case"textarea":qe("invalid",o),N0(o,d.value,d.defaultValue,d.children)}u=d.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||o.textContent===""+u||d.suppressHydrationWarning===!0||Mv(o.textContent,u)?(d.popover!=null&&(qe("beforetoggle",o),qe("toggle",o)),d.onScroll!=null&&qe("scroll",o),d.onScrollEnd!=null&&qe("scrollend",o),d.onClick!=null&&(o.onclick=Vr),o=!0):o=!1,o||bi(s,!0)}function __(s){for(en=s.return;en;)switch(en.tag){case 5:case 31:case 13:lr=!1;return;case 27:case 3:lr=!0;return;default:en=en.return}}function ea(s){if(s!==en)return!1;if(!Ke)return __(s),Ke=!0,!1;var o=s.tag,u;if((u=o!==3&&o!==27)&&((u=o===5)&&(u=s.type,u=!(u!=="form"&&u!=="button")||yp(s.type,s.memoizedProps)),u=!u),u&&ft&&bi(s),__(s),o===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));ft=Fv(s)}else if(o===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));ft=Fv(s)}else o===27?(o=ft,Di(s.type)?(s=xp,xp=null,ft=s):ft=o):ft=en?cr(s.stateNode.nextSibling):null;return!0}function ls(){ft=en=null,Ke=!1}function ed(){var s=_i;return s!==null&&(Mn===null?Mn=s:Mn.push.apply(Mn,s),_i=null),s}function go(s){_i===null?_i=[s]:_i.push(s)}var td=N(null),us=null,Zr=null;function vi(s,o,u){O(td,o._currentValue),o._currentValue=u}function Qr(s){s._currentValue=td.current,q(td)}function nd(s,o,u){for(;s!==null;){var d=s.alternate;if((s.childLanes&o)!==o?(s.childLanes|=o,d!==null&&(d.childLanes|=o)):d!==null&&(d.childLanes&o)!==o&&(d.childLanes|=o),s===u)break;s=s.return}}function rd(s,o,u,d){var g=s.child;for(g!==null&&(g.return=s);g!==null;){var b=g.dependencies;if(b!==null){var x=g.child;b=b.firstContext;e:for(;b!==null;){var A=b;b=g;for(var j=0;j<o.length;j++)if(A.context===o[j]){b.lanes|=u,A=b.alternate,A!==null&&(A.lanes|=u),nd(b.return,u,s),d||(x=null);break e}b=A.next}}else if(g.tag===18){if(x=g.return,x===null)throw Error(r(341));x.lanes|=u,b=x.alternate,b!==null&&(b.lanes|=u),nd(x,u,s),x=null}else x=g.child;if(x!==null)x.return=g;else for(x=g;x!==null;){if(x===s){x=null;break}if(g=x.sibling,g!==null){g.return=x.return,x=g;break}x=x.return}g=x}}function ta(s,o,u,d){s=null;for(var g=o,b=!1;g!==null;){if(!b){if((g.flags&524288)!==0)b=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var x=g.alternate;if(x===null)throw Error(r(387));if(x=x.memoizedProps,x!==null){var A=g.type;qn(g.pendingProps.value,x.value)||(s!==null?s.push(A):s=[A])}}else if(g===de.current){if(x=g.alternate,x===null)throw Error(r(387));x.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(s!==null?s.push(Fo):s=[Fo])}g=g.return}s!==null&&rd(o,s,u,d),o.flags|=262144}function xu(s){for(s=s.firstContext;s!==null;){if(!qn(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function cs(s){us=s,Zr=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function tn(s){return b_(us,s)}function Su(s,o){return us===null&&cs(s),b_(s,o)}function b_(s,o){var u=o._currentValue;if(o={context:o,memoizedValue:u,next:null},Zr===null){if(s===null)throw Error(r(308));Zr=o,s.dependencies={lanes:0,firstContext:o},s.flags|=524288}else Zr=Zr.next=o;return u}var dR=typeof AbortController<"u"?AbortController:function(){var s=[],o=this.signal={aborted:!1,addEventListener:function(u,d){s.push(d)}};this.abort=function(){o.aborted=!0,s.forEach(function(u){return u()})}},pR=t.unstable_scheduleCallback,mR=t.unstable_NormalPriority,kt={$$typeof:T,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function id(){return{controller:new dR,data:new Map,refCount:0}}function yo(s){s.refCount--,s.refCount===0&&pR(mR,function(){s.controller.abort()})}var _o=null,sd=0,na=0,ra=null;function gR(s,o){if(_o===null){var u=_o=[];sd=0,na=lp(),ra={status:"pending",value:void 0,then:function(d){u.push(d)}}}return sd++,o.then(v_,v_),o}function v_(){if(--sd===0&&_o!==null){ra!==null&&(ra.status="fulfilled");var s=_o;_o=null,na=0,ra=null;for(var o=0;o<s.length;o++)(0,s[o])()}}function yR(s,o){var u=[],d={status:"pending",value:null,reason:null,then:function(g){u.push(g)}};return s.then(function(){d.status="fulfilled",d.value=o;for(var g=0;g<u.length;g++)(0,u[g])(o)},function(g){for(d.status="rejected",d.reason=g,g=0;g<u.length;g++)(0,u[g])(void 0)}),d}var w_=B.S;B.S=function(s,o){iv=Ae(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&gR(s,o),w_!==null&&w_(s,o)};var fs=N(null);function ad(){var s=fs.current;return s!==null?s:lt.pooledCache}function Eu(s,o){o===null?O(fs,fs.current):O(fs,o.pool)}function x_(){var s=ad();return s===null?null:{parent:kt._currentValue,pool:s}}var ia=Error(r(460)),od=Error(r(474)),ku=Error(r(542)),Cu={then:function(){}};function S_(s){return s=s.status,s==="fulfilled"||s==="rejected"}function E_(s,o,u){switch(u=s[u],u===void 0?s.push(o):u!==o&&(o.then(Vr,Vr),o=u),o.status){case"fulfilled":return o.value;case"rejected":throw s=o.reason,C_(s),s;default:if(typeof o.status=="string")o.then(Vr,Vr);else{if(s=lt,s!==null&&100<s.shellSuspendCounter)throw Error(r(482));s=o,s.status="pending",s.then(function(d){if(o.status==="pending"){var g=o;g.status="fulfilled",g.value=d}},function(d){if(o.status==="pending"){var g=o;g.status="rejected",g.reason=d}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw s=o.reason,C_(s),s}throw ds=o,ia}}function hs(s){try{var o=s._init;return o(s._payload)}catch(u){throw u!==null&&typeof u=="object"&&typeof u.then=="function"?(ds=u,ia):u}}var ds=null;function k_(){if(ds===null)throw Error(r(459));var s=ds;return ds=null,s}function C_(s){if(s===ia||s===ku)throw Error(r(483))}var sa=null,bo=0;function Tu(s){var o=bo;return bo+=1,sa===null&&(sa=[]),E_(sa,s,o)}function vo(s,o){o=o.props.ref,s.ref=o!==void 0?o:null}function Au(s,o){throw o.$$typeof===_?Error(r(525)):(s=Object.prototype.toString.call(o),Error(r(31,s==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":s)))}function T_(s){function o(H,U){if(s){var J=H.deletions;J===null?(H.deletions=[U],H.flags|=16):J.push(U)}}function u(H,U){if(!s)return null;for(;U!==null;)o(H,U),U=U.sibling;return null}function d(H){for(var U=new Map;H!==null;)H.key!==null?U.set(H.key,H):U.set(H.index,H),H=H.sibling;return U}function g(H,U){return H=Gr(H,U),H.index=0,H.sibling=null,H}function b(H,U,J){return H.index=J,s?(J=H.alternate,J!==null?(J=J.index,J<U?(H.flags|=67108866,U):J):(H.flags|=67108866,U)):(H.flags|=1048576,U)}function x(H){return s&&H.alternate===null&&(H.flags|=67108866),H}function A(H,U,J,oe){return U===null||U.tag!==6?(U=Qh(J,H.mode,oe),U.return=H,U):(U=g(U,J),U.return=H,U)}function j(H,U,J,oe){var Ce=J.type;return Ce===w?ae(H,U,J.props.children,oe,J.key):U!==null&&(U.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===$&&hs(Ce)===U.type)?(U=g(U,J.props),vo(U,J),U.return=H,U):(U=vu(J.type,J.key,J.props,null,H.mode,oe),vo(U,J),U.return=H,U)}function Y(H,U,J,oe){return U===null||U.tag!==4||U.stateNode.containerInfo!==J.containerInfo||U.stateNode.implementation!==J.implementation?(U=Jh(J,H.mode,oe),U.return=H,U):(U=g(U,J.children||[]),U.return=H,U)}function ae(H,U,J,oe,Ce){return U===null||U.tag!==7?(U=os(J,H.mode,oe,Ce),U.return=H,U):(U=g(U,J),U.return=H,U)}function le(H,U,J){if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return U=Qh(""+U,H.mode,J),U.return=H,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case y:return J=vu(U.type,U.key,U.props,null,H.mode,J),vo(J,U),J.return=H,J;case v:return U=Jh(U,H.mode,J),U.return=H,U;case $:return U=hs(U),le(H,U,J)}if(G(U)||se(U))return U=os(U,H.mode,J,null),U.return=H,U;if(typeof U.then=="function")return le(H,Tu(U),J);if(U.$$typeof===T)return le(H,Su(H,U),J);Au(H,U)}return null}function ee(H,U,J,oe){var Ce=U!==null?U.key:null;if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return Ce!==null?null:A(H,U,""+J,oe);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case y:return J.key===Ce?j(H,U,J,oe):null;case v:return J.key===Ce?Y(H,U,J,oe):null;case $:return J=hs(J),ee(H,U,J,oe)}if(G(J)||se(J))return Ce!==null?null:ae(H,U,J,oe,null);if(typeof J.then=="function")return ee(H,U,Tu(J),oe);if(J.$$typeof===T)return ee(H,U,Su(H,J),oe);Au(H,J)}return null}function te(H,U,J,oe,Ce){if(typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint")return H=H.get(J)||null,A(U,H,""+oe,Ce);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case y:return H=H.get(oe.key===null?J:oe.key)||null,j(U,H,oe,Ce);case v:return H=H.get(oe.key===null?J:oe.key)||null,Y(U,H,oe,Ce);case $:return oe=hs(oe),te(H,U,J,oe,Ce)}if(G(oe)||se(oe))return H=H.get(J)||null,ae(U,H,oe,Ce,null);if(typeof oe.then=="function")return te(H,U,J,Tu(oe),Ce);if(oe.$$typeof===T)return te(H,U,J,Su(U,oe),Ce);Au(U,oe)}return null}function be(H,U,J,oe){for(var Ce=null,Je=null,xe=U,ze=U=0,He=null;xe!==null&&ze<J.length;ze++){xe.index>ze?(He=xe,xe=null):He=xe.sibling;var Ye=ee(H,xe,J[ze],oe);if(Ye===null){xe===null&&(xe=He);break}s&&xe&&Ye.alternate===null&&o(H,xe),U=b(Ye,U,ze),Je===null?Ce=Ye:Je.sibling=Ye,Je=Ye,xe=He}if(ze===J.length)return u(H,xe),Ke&&Kr(H,ze),Ce;if(xe===null){for(;ze<J.length;ze++)xe=le(H,J[ze],oe),xe!==null&&(U=b(xe,U,ze),Je===null?Ce=xe:Je.sibling=xe,Je=xe);return Ke&&Kr(H,ze),Ce}for(xe=d(xe);ze<J.length;ze++)He=te(xe,H,ze,J[ze],oe),He!==null&&(s&&He.alternate!==null&&xe.delete(He.key===null?ze:He.key),U=b(He,U,ze),Je===null?Ce=He:Je.sibling=He,Je=He);return s&&xe.forEach(function(ji){return o(H,ji)}),Ke&&Kr(H,ze),Ce}function Oe(H,U,J,oe){if(J==null)throw Error(r(151));for(var Ce=null,Je=null,xe=U,ze=U=0,He=null,Ye=J.next();xe!==null&&!Ye.done;ze++,Ye=J.next()){xe.index>ze?(He=xe,xe=null):He=xe.sibling;var ji=ee(H,xe,Ye.value,oe);if(ji===null){xe===null&&(xe=He);break}s&&xe&&ji.alternate===null&&o(H,xe),U=b(ji,U,ze),Je===null?Ce=ji:Je.sibling=ji,Je=ji,xe=He}if(Ye.done)return u(H,xe),Ke&&Kr(H,ze),Ce;if(xe===null){for(;!Ye.done;ze++,Ye=J.next())Ye=le(H,Ye.value,oe),Ye!==null&&(U=b(Ye,U,ze),Je===null?Ce=Ye:Je.sibling=Ye,Je=Ye);return Ke&&Kr(H,ze),Ce}for(xe=d(xe);!Ye.done;ze++,Ye=J.next())Ye=te(xe,H,ze,Ye.value,oe),Ye!==null&&(s&&Ye.alternate!==null&&xe.delete(Ye.key===null?ze:Ye.key),U=b(Ye,U,ze),Je===null?Ce=Ye:Je.sibling=Ye,Je=Ye);return s&&xe.forEach(function(AO){return o(H,AO)}),Ke&&Kr(H,ze),Ce}function st(H,U,J,oe){if(typeof J=="object"&&J!==null&&J.type===w&&J.key===null&&(J=J.props.children),typeof J=="object"&&J!==null){switch(J.$$typeof){case y:e:{for(var Ce=J.key;U!==null;){if(U.key===Ce){if(Ce=J.type,Ce===w){if(U.tag===7){u(H,U.sibling),oe=g(U,J.props.children),oe.return=H,H=oe;break e}}else if(U.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===$&&hs(Ce)===U.type){u(H,U.sibling),oe=g(U,J.props),vo(oe,J),oe.return=H,H=oe;break e}u(H,U);break}else o(H,U);U=U.sibling}J.type===w?(oe=os(J.props.children,H.mode,oe,J.key),oe.return=H,H=oe):(oe=vu(J.type,J.key,J.props,null,H.mode,oe),vo(oe,J),oe.return=H,H=oe)}return x(H);case v:e:{for(Ce=J.key;U!==null;){if(U.key===Ce)if(U.tag===4&&U.stateNode.containerInfo===J.containerInfo&&U.stateNode.implementation===J.implementation){u(H,U.sibling),oe=g(U,J.children||[]),oe.return=H,H=oe;break e}else{u(H,U);break}else o(H,U);U=U.sibling}oe=Jh(J,H.mode,oe),oe.return=H,H=oe}return x(H);case $:return J=hs(J),st(H,U,J,oe)}if(G(J))return be(H,U,J,oe);if(se(J)){if(Ce=se(J),typeof Ce!="function")throw Error(r(150));return J=Ce.call(J),Oe(H,U,J,oe)}if(typeof J.then=="function")return st(H,U,Tu(J),oe);if(J.$$typeof===T)return st(H,U,Su(H,J),oe);Au(H,J)}return typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint"?(J=""+J,U!==null&&U.tag===6?(u(H,U.sibling),oe=g(U,J),oe.return=H,H=oe):(u(H,U),oe=Qh(J,H.mode,oe),oe.return=H,H=oe),x(H)):u(H,U)}return function(H,U,J,oe){try{bo=0;var Ce=st(H,U,J,oe);return sa=null,Ce}catch(xe){if(xe===ia||xe===ku)throw xe;var Je=Fn(29,xe,null,H.mode);return Je.lanes=oe,Je.return=H,Je}}}var ps=T_(!0),A_=T_(!1),wi=!1;function ld(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ud(s,o){s=s.updateQueue,o.updateQueue===s&&(o.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function xi(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function Si(s,o,u){var d=s.updateQueue;if(d===null)return null;if(d=d.shared,(We&2)!==0){var g=d.pending;return g===null?o.next=o:(o.next=g.next,g.next=o),d.pending=o,o=bu(s),f_(s,null,u),o}return _u(s,d,o,u),bu(s)}function wo(s,o,u){if(o=o.updateQueue,o!==null&&(o=o.shared,(u&4194048)!==0)){var d=o.lanes;d&=s.pendingLanes,u|=d,o.lanes=u,b0(s,u)}}function cd(s,o){var u=s.updateQueue,d=s.alternate;if(d!==null&&(d=d.updateQueue,u===d)){var g=null,b=null;if(u=u.firstBaseUpdate,u!==null){do{var x={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};b===null?g=b=x:b=b.next=x,u=u.next}while(u!==null);b===null?g=b=o:b=b.next=o}else g=b=o;u={baseState:d.baseState,firstBaseUpdate:g,lastBaseUpdate:b,shared:d.shared,callbacks:d.callbacks},s.updateQueue=u;return}s=u.lastBaseUpdate,s===null?u.firstBaseUpdate=o:s.next=o,u.lastBaseUpdate=o}var fd=!1;function xo(){if(fd){var s=ra;if(s!==null)throw s}}function So(s,o,u,d){fd=!1;var g=s.updateQueue;wi=!1;var b=g.firstBaseUpdate,x=g.lastBaseUpdate,A=g.shared.pending;if(A!==null){g.shared.pending=null;var j=A,Y=j.next;j.next=null,x===null?b=Y:x.next=Y,x=j;var ae=s.alternate;ae!==null&&(ae=ae.updateQueue,A=ae.lastBaseUpdate,A!==x&&(A===null?ae.firstBaseUpdate=Y:A.next=Y,ae.lastBaseUpdate=j))}if(b!==null){var le=g.baseState;x=0,ae=Y=j=null,A=b;do{var ee=A.lane&-536870913,te=ee!==A.lane;if(te?(Ve&ee)===ee:(d&ee)===ee){ee!==0&&ee===na&&(fd=!0),ae!==null&&(ae=ae.next={lane:0,tag:A.tag,payload:A.payload,callback:null,next:null});e:{var be=s,Oe=A;ee=o;var st=u;switch(Oe.tag){case 1:if(be=Oe.payload,typeof be=="function"){le=be.call(st,le,ee);break e}le=be;break e;case 3:be.flags=be.flags&-65537|128;case 0:if(be=Oe.payload,ee=typeof be=="function"?be.call(st,le,ee):be,ee==null)break e;le=p({},le,ee);break e;case 2:wi=!0}}ee=A.callback,ee!==null&&(s.flags|=64,te&&(s.flags|=8192),te=g.callbacks,te===null?g.callbacks=[ee]:te.push(ee))}else te={lane:ee,tag:A.tag,payload:A.payload,callback:A.callback,next:null},ae===null?(Y=ae=te,j=le):ae=ae.next=te,x|=ee;if(A=A.next,A===null){if(A=g.shared.pending,A===null)break;te=A,A=te.next,te.next=null,g.lastBaseUpdate=te,g.shared.pending=null}}while(!0);ae===null&&(j=le),g.baseState=j,g.firstBaseUpdate=Y,g.lastBaseUpdate=ae,b===null&&(g.shared.lanes=0),Ai|=x,s.lanes=x,s.memoizedState=le}}function R_(s,o){if(typeof s!="function")throw Error(r(191,s));s.call(o)}function O_(s,o){var u=s.callbacks;if(u!==null)for(s.callbacks=null,s=0;s<u.length;s++)R_(u[s],o)}var aa=N(null),Ru=N(0);function I_(s,o){s=ii,O(Ru,s),O(aa,o),ii=s|o.baseLanes}function hd(){O(Ru,ii),O(aa,aa.current)}function dd(){ii=Ru.current,q(aa),q(Ru)}var Vn=N(null),ur=null;function Ei(s){var o=s.alternate;O(St,St.current&1),O(Vn,s),ur===null&&(o===null||aa.current!==null||o.memoizedState!==null)&&(ur=s)}function pd(s){O(St,St.current),O(Vn,s),ur===null&&(ur=s)}function N_(s){s.tag===22?(O(St,St.current),O(Vn,s),ur===null&&(ur=s)):ki()}function ki(){O(St,St.current),O(Vn,Vn.current)}function Hn(s){q(Vn),ur===s&&(ur=null),q(St)}var St=N(0);function Ou(s){for(var o=s;o!==null;){if(o.tag===13){var u=o.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||vp(u)||wp(u)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Jr=0,Le=null,rt=null,Ct=null,Iu=!1,oa=!1,ms=!1,Nu=0,Eo=0,la=null,_R=0;function wt(){throw Error(r(321))}function md(s,o){if(o===null)return!1;for(var u=0;u<o.length&&u<s.length;u++)if(!qn(s[u],o[u]))return!1;return!0}function gd(s,o,u,d,g,b){return Jr=b,Le=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,B.H=s===null||s.memoizedState===null?mb:Id,ms=!1,b=u(d,g),ms=!1,oa&&(b=M_(o,u,d,g)),D_(s),b}function D_(s){B.H=To;var o=rt!==null&&rt.next!==null;if(Jr=0,Ct=rt=Le=null,Iu=!1,Eo=0,la=null,o)throw Error(r(300));s===null||Tt||(s=s.dependencies,s!==null&&xu(s)&&(Tt=!0))}function M_(s,o,u,d){Le=s;var g=0;do{if(oa&&(la=null),Eo=0,oa=!1,25<=g)throw Error(r(301));if(g+=1,Ct=rt=null,s.updateQueue!=null){var b=s.updateQueue;b.lastEffect=null,b.events=null,b.stores=null,b.memoCache!=null&&(b.memoCache.index=0)}B.H=gb,b=o(u,d)}while(oa);return b}function bR(){var s=B.H,o=s.useState()[0];return o=typeof o.then=="function"?ko(o):o,s=s.useState()[0],(rt!==null?rt.memoizedState:null)!==s&&(Le.flags|=1024),o}function yd(){var s=Nu!==0;return Nu=0,s}function _d(s,o,u){o.updateQueue=s.updateQueue,o.flags&=-2053,s.lanes&=~u}function bd(s){if(Iu){for(s=s.memoizedState;s!==null;){var o=s.queue;o!==null&&(o.pending=null),s=s.next}Iu=!1}Jr=0,Ct=rt=Le=null,oa=!1,Eo=Nu=0,la=null}function bn(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ct===null?Le.memoizedState=Ct=s:Ct=Ct.next=s,Ct}function Et(){if(rt===null){var s=Le.alternate;s=s!==null?s.memoizedState:null}else s=rt.next;var o=Ct===null?Le.memoizedState:Ct.next;if(o!==null)Ct=o,rt=s;else{if(s===null)throw Le.alternate===null?Error(r(467)):Error(r(310));rt=s,s={memoizedState:rt.memoizedState,baseState:rt.baseState,baseQueue:rt.baseQueue,queue:rt.queue,next:null},Ct===null?Le.memoizedState=Ct=s:Ct=Ct.next=s}return Ct}function Du(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ko(s){var o=Eo;return Eo+=1,la===null&&(la=[]),s=E_(la,s,o),o=Le,(Ct===null?o.memoizedState:Ct.next)===null&&(o=o.alternate,B.H=o===null||o.memoizedState===null?mb:Id),s}function Mu(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return ko(s);if(s.$$typeof===T)return tn(s)}throw Error(r(438,String(s)))}function vd(s){var o=null,u=Le.updateQueue;if(u!==null&&(o=u.memoCache),o==null){var d=Le.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(o={data:d.data.map(function(g){return g.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),u===null&&(u=Du(),Le.updateQueue=u),u.memoCache=o,u=o.data[o.index],u===void 0)for(u=o.data[o.index]=Array(s),d=0;d<s;d++)u[d]=P;return o.index++,u}function Yr(s,o){return typeof o=="function"?o(s):o}function Lu(s){var o=Et();return wd(o,rt,s)}function wd(s,o,u){var d=s.queue;if(d===null)throw Error(r(311));d.lastRenderedReducer=u;var g=s.baseQueue,b=d.pending;if(b!==null){if(g!==null){var x=g.next;g.next=b.next,b.next=x}o.baseQueue=g=b,d.pending=null}if(b=s.baseState,g===null)s.memoizedState=b;else{o=g.next;var A=x=null,j=null,Y=o,ae=!1;do{var le=Y.lane&-536870913;if(le!==Y.lane?(Ve&le)===le:(Jr&le)===le){var ee=Y.revertLane;if(ee===0)j!==null&&(j=j.next={lane:0,revertLane:0,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),le===na&&(ae=!0);else if((Jr&ee)===ee){Y=Y.next,ee===na&&(ae=!0);continue}else le={lane:0,revertLane:Y.revertLane,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},j===null?(A=j=le,x=b):j=j.next=le,Le.lanes|=ee,Ai|=ee;le=Y.action,ms&&u(b,le),b=Y.hasEagerState?Y.eagerState:u(b,le)}else ee={lane:le,revertLane:Y.revertLane,gesture:Y.gesture,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},j===null?(A=j=ee,x=b):j=j.next=ee,Le.lanes|=le,Ai|=le;Y=Y.next}while(Y!==null&&Y!==o);if(j===null?x=b:j.next=A,!qn(b,s.memoizedState)&&(Tt=!0,ae&&(u=ra,u!==null)))throw u;s.memoizedState=b,s.baseState=x,s.baseQueue=j,d.lastRenderedState=b}return g===null&&(d.lanes=0),[s.memoizedState,d.dispatch]}function xd(s){var o=Et(),u=o.queue;if(u===null)throw Error(r(311));u.lastRenderedReducer=s;var d=u.dispatch,g=u.pending,b=o.memoizedState;if(g!==null){u.pending=null;var x=g=g.next;do b=s(b,x.action),x=x.next;while(x!==g);qn(b,o.memoizedState)||(Tt=!0),o.memoizedState=b,o.baseQueue===null&&(o.baseState=b),u.lastRenderedState=b}return[b,d]}function L_(s,o,u){var d=Le,g=Et(),b=Ke;if(b){if(u===void 0)throw Error(r(407));u=u()}else u=o();var x=!qn((rt||g).memoizedState,u);if(x&&(g.memoizedState=u,Tt=!0),g=g.queue,kd(j_.bind(null,d,g,s),[s]),g.getSnapshot!==o||x||Ct!==null&&Ct.memoizedState.tag&1){if(d.flags|=2048,ua(9,{destroy:void 0},P_.bind(null,d,g,u,o),null),lt===null)throw Error(r(349));b||(Jr&127)!==0||z_(d,o,u)}return u}function z_(s,o,u){s.flags|=16384,s={getSnapshot:o,value:u},o=Le.updateQueue,o===null?(o=Du(),Le.updateQueue=o,o.stores=[s]):(u=o.stores,u===null?o.stores=[s]:u.push(s))}function P_(s,o,u,d){o.value=u,o.getSnapshot=d,B_(o)&&U_(s)}function j_(s,o,u){return u(function(){B_(o)&&U_(s)})}function B_(s){var o=s.getSnapshot;s=s.value;try{var u=o();return!qn(s,u)}catch{return!0}}function U_(s){var o=as(s,2);o!==null&&Ln(o,s,2)}function Sd(s){var o=bn();if(typeof s=="function"){var u=s;if(s=u(),ms){An(!0);try{u()}finally{An(!1)}}}return o.memoizedState=o.baseState=s,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yr,lastRenderedState:s},o}function $_(s,o,u,d){return s.baseState=u,wd(s,rt,typeof d=="function"?d:Yr)}function vR(s,o,u,d,g){if(ju(s))throw Error(r(485));if(s=o.action,s!==null){var b={payload:g,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(x){b.listeners.push(x)}};B.T!==null?u(!0):b.isTransition=!1,d(b),u=o.pending,u===null?(b.next=o.pending=b,q_(o,b)):(b.next=u.next,o.pending=u.next=b)}}function q_(s,o){var u=o.action,d=o.payload,g=s.state;if(o.isTransition){var b=B.T,x={};B.T=x;try{var A=u(g,d),j=B.S;j!==null&&j(x,A),F_(s,o,A)}catch(Y){Ed(s,o,Y)}finally{b!==null&&x.types!==null&&(b.types=x.types),B.T=b}}else try{b=u(g,d),F_(s,o,b)}catch(Y){Ed(s,o,Y)}}function F_(s,o,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(d){V_(s,o,d)},function(d){return Ed(s,o,d)}):V_(s,o,u)}function V_(s,o,u){o.status="fulfilled",o.value=u,H_(o),s.state=u,o=s.pending,o!==null&&(u=o.next,u===o?s.pending=null:(u=u.next,o.next=u,q_(s,u)))}function Ed(s,o,u){var d=s.pending;if(s.pending=null,d!==null){d=d.next;do o.status="rejected",o.reason=u,H_(o),o=o.next;while(o!==d)}s.action=null}function H_(s){s=s.listeners;for(var o=0;o<s.length;o++)(0,s[o])()}function G_(s,o){return o}function K_(s,o){if(Ke){var u=lt.formState;if(u!==null){e:{var d=Le;if(Ke){if(ft){t:{for(var g=ft,b=lr;g.nodeType!==8;){if(!b){g=null;break t}if(g=cr(g.nextSibling),g===null){g=null;break t}}b=g.data,g=b==="F!"||b==="F"?g:null}if(g){ft=cr(g.nextSibling),d=g.data==="F!";break e}}bi(d)}d=!1}d&&(o=u[0])}}return u=bn(),u.memoizedState=u.baseState=o,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:G_,lastRenderedState:o},u.queue=d,u=hb.bind(null,Le,d),d.dispatch=u,d=Sd(!1),b=Od.bind(null,Le,!1,d.queue),d=bn(),g={state:o,dispatch:null,action:s,pending:null},d.queue=g,u=vR.bind(null,Le,g,b,u),g.dispatch=u,d.memoizedState=s,[o,u,!1]}function Z_(s){var o=Et();return Q_(o,rt,s)}function Q_(s,o,u){if(o=wd(s,o,G_)[0],s=Lu(Yr)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var d=ko(o)}catch(x){throw x===ia?ku:x}else d=o;o=Et();var g=o.queue,b=g.dispatch;return u!==o.memoizedState&&(Le.flags|=2048,ua(9,{destroy:void 0},wR.bind(null,g,u),null)),[d,b,s]}function wR(s,o){s.action=o}function J_(s){var o=Et(),u=rt;if(u!==null)return Q_(o,u,s);Et(),o=o.memoizedState,u=Et();var d=u.queue.dispatch;return u.memoizedState=s,[o,d,!1]}function ua(s,o,u,d){return s={tag:s,create:u,deps:d,inst:o,next:null},o=Le.updateQueue,o===null&&(o=Du(),Le.updateQueue=o),u=o.lastEffect,u===null?o.lastEffect=s.next=s:(d=u.next,u.next=s,s.next=d,o.lastEffect=s),s}function Y_(){return Et().memoizedState}function zu(s,o,u,d){var g=bn();Le.flags|=s,g.memoizedState=ua(1|o,{destroy:void 0},u,d===void 0?null:d)}function Pu(s,o,u,d){var g=Et();d=d===void 0?null:d;var b=g.memoizedState.inst;rt!==null&&d!==null&&md(d,rt.memoizedState.deps)?g.memoizedState=ua(o,b,u,d):(Le.flags|=s,g.memoizedState=ua(1|o,b,u,d))}function X_(s,o){zu(8390656,8,s,o)}function kd(s,o){Pu(2048,8,s,o)}function xR(s){Le.flags|=4;var o=Le.updateQueue;if(o===null)o=Du(),Le.updateQueue=o,o.events=[s];else{var u=o.events;u===null?o.events=[s]:u.push(s)}}function W_(s){var o=Et().memoizedState;return xR({ref:o,nextImpl:s}),function(){if((We&2)!==0)throw Error(r(440));return o.impl.apply(void 0,arguments)}}function eb(s,o){return Pu(4,2,s,o)}function tb(s,o){return Pu(4,4,s,o)}function nb(s,o){if(typeof o=="function"){s=s();var u=o(s);return function(){typeof u=="function"?u():o(null)}}if(o!=null)return s=s(),o.current=s,function(){o.current=null}}function rb(s,o,u){u=u!=null?u.concat([s]):null,Pu(4,4,nb.bind(null,o,s),u)}function Cd(){}function ib(s,o){var u=Et();o=o===void 0?null:o;var d=u.memoizedState;return o!==null&&md(o,d[1])?d[0]:(u.memoizedState=[s,o],s)}function sb(s,o){var u=Et();o=o===void 0?null:o;var d=u.memoizedState;if(o!==null&&md(o,d[1]))return d[0];if(d=s(),ms){An(!0);try{s()}finally{An(!1)}}return u.memoizedState=[d,o],d}function Td(s,o,u){return u===void 0||(Jr&1073741824)!==0&&(Ve&261930)===0?s.memoizedState=o:(s.memoizedState=u,s=av(),Le.lanes|=s,Ai|=s,u)}function ab(s,o,u,d){return qn(u,o)?u:aa.current!==null?(s=Td(s,u,d),qn(s,o)||(Tt=!0),s):(Jr&42)===0||(Jr&1073741824)!==0&&(Ve&261930)===0?(Tt=!0,s.memoizedState=u):(s=av(),Le.lanes|=s,Ai|=s,o)}function ob(s,o,u,d,g){var b=K.p;K.p=b!==0&&8>b?b:8;var x=B.T,A={};B.T=A,Od(s,!1,o,u);try{var j=g(),Y=B.S;if(Y!==null&&Y(A,j),j!==null&&typeof j=="object"&&typeof j.then=="function"){var ae=yR(j,d);Co(s,o,ae,Zn(s))}else Co(s,o,d,Zn(s))}catch(le){Co(s,o,{then:function(){},status:"rejected",reason:le},Zn())}finally{K.p=b,x!==null&&A.types!==null&&(x.types=A.types),B.T=x}}function SR(){}function Ad(s,o,u,d){if(s.tag!==5)throw Error(r(476));var g=lb(s).queue;ob(s,g,o,re,u===null?SR:function(){return ub(s),u(d)})}function lb(s){var o=s.memoizedState;if(o!==null)return o;o={memoizedState:re,baseState:re,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yr,lastRenderedState:re},next:null};var u={};return o.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yr,lastRenderedState:u},next:null},s.memoizedState=o,s=s.alternate,s!==null&&(s.memoizedState=o),o}function ub(s){var o=lb(s);o.next===null&&(o=s.alternate.memoizedState),Co(s,o.next.queue,{},Zn())}function Rd(){return tn(Fo)}function cb(){return Et().memoizedState}function fb(){return Et().memoizedState}function ER(s){for(var o=s.return;o!==null;){switch(o.tag){case 24:case 3:var u=Zn();s=xi(u);var d=Si(o,s,u);d!==null&&(Ln(d,o,u),wo(d,o,u)),o={cache:id()},s.payload=o;return}o=o.return}}function kR(s,o,u){var d=Zn();u={lane:d,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},ju(s)?db(o,u):(u=Kh(s,o,u,d),u!==null&&(Ln(u,s,d),pb(u,o,d)))}function hb(s,o,u){var d=Zn();Co(s,o,u,d)}function Co(s,o,u,d){var g={lane:d,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null};if(ju(s))db(o,g);else{var b=s.alternate;if(s.lanes===0&&(b===null||b.lanes===0)&&(b=o.lastRenderedReducer,b!==null))try{var x=o.lastRenderedState,A=b(x,u);if(g.hasEagerState=!0,g.eagerState=A,qn(A,x))return _u(s,o,g,0),lt===null&&yu(),!1}catch{}if(u=Kh(s,o,g,d),u!==null)return Ln(u,s,d),pb(u,o,d),!0}return!1}function Od(s,o,u,d){if(d={lane:2,revertLane:lp(),gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},ju(s)){if(o)throw Error(r(479))}else o=Kh(s,u,d,2),o!==null&&Ln(o,s,2)}function ju(s){var o=s.alternate;return s===Le||o!==null&&o===Le}function db(s,o){oa=Iu=!0;var u=s.pending;u===null?o.next=o:(o.next=u.next,u.next=o),s.pending=o}function pb(s,o,u){if((u&4194048)!==0){var d=o.lanes;d&=s.pendingLanes,u|=d,o.lanes=u,b0(s,u)}}var To={readContext:tn,use:Mu,useCallback:wt,useContext:wt,useEffect:wt,useImperativeHandle:wt,useLayoutEffect:wt,useInsertionEffect:wt,useMemo:wt,useReducer:wt,useRef:wt,useState:wt,useDebugValue:wt,useDeferredValue:wt,useTransition:wt,useSyncExternalStore:wt,useId:wt,useHostTransitionStatus:wt,useFormState:wt,useActionState:wt,useOptimistic:wt,useMemoCache:wt,useCacheRefresh:wt};To.useEffectEvent=wt;var mb={readContext:tn,use:Mu,useCallback:function(s,o){return bn().memoizedState=[s,o===void 0?null:o],s},useContext:tn,useEffect:X_,useImperativeHandle:function(s,o,u){u=u!=null?u.concat([s]):null,zu(4194308,4,nb.bind(null,o,s),u)},useLayoutEffect:function(s,o){return zu(4194308,4,s,o)},useInsertionEffect:function(s,o){zu(4,2,s,o)},useMemo:function(s,o){var u=bn();o=o===void 0?null:o;var d=s();if(ms){An(!0);try{s()}finally{An(!1)}}return u.memoizedState=[d,o],d},useReducer:function(s,o,u){var d=bn();if(u!==void 0){var g=u(o);if(ms){An(!0);try{u(o)}finally{An(!1)}}}else g=o;return d.memoizedState=d.baseState=g,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:g},d.queue=s,s=s.dispatch=kR.bind(null,Le,s),[d.memoizedState,s]},useRef:function(s){var o=bn();return s={current:s},o.memoizedState=s},useState:function(s){s=Sd(s);var o=s.queue,u=hb.bind(null,Le,o);return o.dispatch=u,[s.memoizedState,u]},useDebugValue:Cd,useDeferredValue:function(s,o){var u=bn();return Td(u,s,o)},useTransition:function(){var s=Sd(!1);return s=ob.bind(null,Le,s.queue,!0,!1),bn().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,o,u){var d=Le,g=bn();if(Ke){if(u===void 0)throw Error(r(407));u=u()}else{if(u=o(),lt===null)throw Error(r(349));(Ve&127)!==0||z_(d,o,u)}g.memoizedState=u;var b={value:u,getSnapshot:o};return g.queue=b,X_(j_.bind(null,d,b,s),[s]),d.flags|=2048,ua(9,{destroy:void 0},P_.bind(null,d,b,u,o),null),u},useId:function(){var s=bn(),o=lt.identifierPrefix;if(Ke){var u=Ar,d=Tr;u=(d&~(1<<32-ot(d)-1)).toString(32)+u,o="_"+o+"R_"+u,u=Nu++,0<u&&(o+="H"+u.toString(32)),o+="_"}else u=_R++,o="_"+o+"r_"+u.toString(32)+"_";return s.memoizedState=o},useHostTransitionStatus:Rd,useFormState:K_,useActionState:K_,useOptimistic:function(s){var o=bn();o.memoizedState=o.baseState=s;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=u,o=Od.bind(null,Le,!0,u),u.dispatch=o,[s,o]},useMemoCache:vd,useCacheRefresh:function(){return bn().memoizedState=ER.bind(null,Le)},useEffectEvent:function(s){var o=bn(),u={impl:s};return o.memoizedState=u,function(){if((We&2)!==0)throw Error(r(440));return u.impl.apply(void 0,arguments)}}},Id={readContext:tn,use:Mu,useCallback:ib,useContext:tn,useEffect:kd,useImperativeHandle:rb,useInsertionEffect:eb,useLayoutEffect:tb,useMemo:sb,useReducer:Lu,useRef:Y_,useState:function(){return Lu(Yr)},useDebugValue:Cd,useDeferredValue:function(s,o){var u=Et();return ab(u,rt.memoizedState,s,o)},useTransition:function(){var s=Lu(Yr)[0],o=Et().memoizedState;return[typeof s=="boolean"?s:ko(s),o]},useSyncExternalStore:L_,useId:cb,useHostTransitionStatus:Rd,useFormState:Z_,useActionState:Z_,useOptimistic:function(s,o){var u=Et();return $_(u,rt,s,o)},useMemoCache:vd,useCacheRefresh:fb};Id.useEffectEvent=W_;var gb={readContext:tn,use:Mu,useCallback:ib,useContext:tn,useEffect:kd,useImperativeHandle:rb,useInsertionEffect:eb,useLayoutEffect:tb,useMemo:sb,useReducer:xd,useRef:Y_,useState:function(){return xd(Yr)},useDebugValue:Cd,useDeferredValue:function(s,o){var u=Et();return rt===null?Td(u,s,o):ab(u,rt.memoizedState,s,o)},useTransition:function(){var s=xd(Yr)[0],o=Et().memoizedState;return[typeof s=="boolean"?s:ko(s),o]},useSyncExternalStore:L_,useId:cb,useHostTransitionStatus:Rd,useFormState:J_,useActionState:J_,useOptimistic:function(s,o){var u=Et();return rt!==null?$_(u,rt,s,o):(u.baseState=s,[s,u.queue.dispatch])},useMemoCache:vd,useCacheRefresh:fb};gb.useEffectEvent=W_;function Nd(s,o,u,d){o=s.memoizedState,u=u(d,o),u=u==null?o:p({},o,u),s.memoizedState=u,s.lanes===0&&(s.updateQueue.baseState=u)}var Dd={enqueueSetState:function(s,o,u){s=s._reactInternals;var d=Zn(),g=xi(d);g.payload=o,u!=null&&(g.callback=u),o=Si(s,g,d),o!==null&&(Ln(o,s,d),wo(o,s,d))},enqueueReplaceState:function(s,o,u){s=s._reactInternals;var d=Zn(),g=xi(d);g.tag=1,g.payload=o,u!=null&&(g.callback=u),o=Si(s,g,d),o!==null&&(Ln(o,s,d),wo(o,s,d))},enqueueForceUpdate:function(s,o){s=s._reactInternals;var u=Zn(),d=xi(u);d.tag=2,o!=null&&(d.callback=o),o=Si(s,d,u),o!==null&&(Ln(o,s,u),wo(o,s,u))}};function yb(s,o,u,d,g,b,x){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(d,b,x):o.prototype&&o.prototype.isPureReactComponent?!ho(u,d)||!ho(g,b):!0}function _b(s,o,u,d){s=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(u,d),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(u,d),o.state!==s&&Dd.enqueueReplaceState(o,o.state,null)}function gs(s,o){var u=o;if("ref"in o){u={};for(var d in o)d!=="ref"&&(u[d]=o[d])}if(s=s.defaultProps){u===o&&(u=p({},u));for(var g in s)u[g]===void 0&&(u[g]=s[g])}return u}function bb(s){gu(s)}function vb(s){console.error(s)}function wb(s){gu(s)}function Bu(s,o){try{var u=s.onUncaughtError;u(o.value,{componentStack:o.stack})}catch(d){setTimeout(function(){throw d})}}function xb(s,o,u){try{var d=s.onCaughtError;d(u.value,{componentStack:u.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function Md(s,o,u){return u=xi(u),u.tag=3,u.payload={element:null},u.callback=function(){Bu(s,o)},u}function Sb(s){return s=xi(s),s.tag=3,s}function Eb(s,o,u,d){var g=u.type.getDerivedStateFromError;if(typeof g=="function"){var b=d.value;s.payload=function(){return g(b)},s.callback=function(){xb(o,u,d)}}var x=u.stateNode;x!==null&&typeof x.componentDidCatch=="function"&&(s.callback=function(){xb(o,u,d),typeof g!="function"&&(Ri===null?Ri=new Set([this]):Ri.add(this));var A=d.stack;this.componentDidCatch(d.value,{componentStack:A!==null?A:""})})}function CR(s,o,u,d,g){if(u.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(o=u.alternate,o!==null&&ta(o,u,g,!0),u=Vn.current,u!==null){switch(u.tag){case 31:case 13:return ur===null?Yu():u.alternate===null&&xt===0&&(xt=3),u.flags&=-257,u.flags|=65536,u.lanes=g,d===Cu?u.flags|=16384:(o=u.updateQueue,o===null?u.updateQueue=new Set([d]):o.add(d),sp(s,d,g)),!1;case 22:return u.flags|=65536,d===Cu?u.flags|=16384:(o=u.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([d])},u.updateQueue=o):(u=o.retryQueue,u===null?o.retryQueue=new Set([d]):u.add(d)),sp(s,d,g)),!1}throw Error(r(435,u.tag))}return sp(s,d,g),Yu(),!1}if(Ke)return o=Vn.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=g,d!==Wh&&(s=Error(r(422),{cause:d}),go(sr(s,u)))):(d!==Wh&&(o=Error(r(423),{cause:d}),go(sr(o,u))),s=s.current.alternate,s.flags|=65536,g&=-g,s.lanes|=g,d=sr(d,u),g=Md(s.stateNode,d,g),cd(s,g),xt!==4&&(xt=2)),!1;var b=Error(r(520),{cause:d});if(b=sr(b,u),Lo===null?Lo=[b]:Lo.push(b),xt!==4&&(xt=2),o===null)return!0;d=sr(d,u),u=o;do{switch(u.tag){case 3:return u.flags|=65536,s=g&-g,u.lanes|=s,s=Md(u.stateNode,d,s),cd(u,s),!1;case 1:if(o=u.type,b=u.stateNode,(u.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Ri===null||!Ri.has(b))))return u.flags|=65536,g&=-g,u.lanes|=g,g=Sb(g),Eb(g,s,u,d),cd(u,g),!1}u=u.return}while(u!==null);return!1}var Ld=Error(r(461)),Tt=!1;function nn(s,o,u,d){o.child=s===null?A_(o,null,u,d):ps(o,s.child,u,d)}function kb(s,o,u,d,g){u=u.render;var b=o.ref;if("ref"in d){var x={};for(var A in d)A!=="ref"&&(x[A]=d[A])}else x=d;return cs(o),d=gd(s,o,u,x,b,g),A=yd(),s!==null&&!Tt?(_d(s,o,g),Xr(s,o,g)):(Ke&&A&&Yh(o),o.flags|=1,nn(s,o,d,g),o.child)}function Cb(s,o,u,d,g){if(s===null){var b=u.type;return typeof b=="function"&&!Zh(b)&&b.defaultProps===void 0&&u.compare===null?(o.tag=15,o.type=b,Tb(s,o,b,d,g)):(s=vu(u.type,null,d,o,o.mode,g),s.ref=o.ref,s.return=o,o.child=s)}if(b=s.child,!Fd(s,g)){var x=b.memoizedProps;if(u=u.compare,u=u!==null?u:ho,u(x,d)&&s.ref===o.ref)return Xr(s,o,g)}return o.flags|=1,s=Gr(b,d),s.ref=o.ref,s.return=o,o.child=s}function Tb(s,o,u,d,g){if(s!==null){var b=s.memoizedProps;if(ho(b,d)&&s.ref===o.ref)if(Tt=!1,o.pendingProps=d=b,Fd(s,g))(s.flags&131072)!==0&&(Tt=!0);else return o.lanes=s.lanes,Xr(s,o,g)}return zd(s,o,u,d,g)}function Ab(s,o,u,d){var g=d.children,b=s!==null?s.memoizedState:null;if(s===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.mode==="hidden"){if((o.flags&128)!==0){if(b=b!==null?b.baseLanes|u:u,s!==null){for(d=o.child=s.child,g=0;d!==null;)g=g|d.lanes|d.childLanes,d=d.sibling;d=g&~b}else d=0,o.child=null;return Rb(s,o,b,u,d)}if((u&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},s!==null&&Eu(o,b!==null?b.cachePool:null),b!==null?I_(o,b):hd(),N_(o);else return d=o.lanes=536870912,Rb(s,o,b!==null?b.baseLanes|u:u,u,d)}else b!==null?(Eu(o,b.cachePool),I_(o,b),ki(),o.memoizedState=null):(s!==null&&Eu(o,null),hd(),ki());return nn(s,o,g,u),o.child}function Ao(s,o){return s!==null&&s.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function Rb(s,o,u,d,g){var b=ad();return b=b===null?null:{parent:kt._currentValue,pool:b},o.memoizedState={baseLanes:u,cachePool:b},s!==null&&Eu(o,null),hd(),N_(o),s!==null&&ta(s,o,d,!0),o.childLanes=g,null}function Uu(s,o){return o=qu({mode:o.mode,children:o.children},s.mode),o.ref=s.ref,s.child=o,o.return=s,o}function Ob(s,o,u){return ps(o,s.child,null,u),s=Uu(o,o.pendingProps),s.flags|=2,Hn(o),o.memoizedState=null,s}function TR(s,o,u){var d=o.pendingProps,g=(o.flags&128)!==0;if(o.flags&=-129,s===null){if(Ke){if(d.mode==="hidden")return s=Uu(o,d),o.lanes=536870912,Ao(null,s);if(pd(o),(s=ft)?(s=qv(s,lr),s=s!==null&&s.data==="&"?s:null,s!==null&&(o.memoizedState={dehydrated:s,treeContext:yi!==null?{id:Tr,overflow:Ar}:null,retryLane:536870912,hydrationErrors:null},u=d_(s),u.return=o,o.child=u,en=o,ft=null)):s=null,s===null)throw bi(o);return o.lanes=536870912,null}return Uu(o,d)}var b=s.memoizedState;if(b!==null){var x=b.dehydrated;if(pd(o),g)if(o.flags&256)o.flags&=-257,o=Ob(s,o,u);else if(o.memoizedState!==null)o.child=s.child,o.flags|=128,o=null;else throw Error(r(558));else if(Tt||ta(s,o,u,!1),g=(u&s.childLanes)!==0,Tt||g){if(d=lt,d!==null&&(x=v0(d,u),x!==0&&x!==b.retryLane))throw b.retryLane=x,as(s,x),Ln(d,s,x),Ld;Yu(),o=Ob(s,o,u)}else s=b.treeContext,ft=cr(x.nextSibling),en=o,Ke=!0,_i=null,lr=!1,s!==null&&g_(o,s),o=Uu(o,d),o.flags|=4096;return o}return s=Gr(s.child,{mode:d.mode,children:d.children}),s.ref=o.ref,o.child=s,s.return=o,s}function $u(s,o){var u=o.ref;if(u===null)s!==null&&s.ref!==null&&(o.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(r(284));(s===null||s.ref!==u)&&(o.flags|=4194816)}}function zd(s,o,u,d,g){return cs(o),u=gd(s,o,u,d,void 0,g),d=yd(),s!==null&&!Tt?(_d(s,o,g),Xr(s,o,g)):(Ke&&d&&Yh(o),o.flags|=1,nn(s,o,u,g),o.child)}function Ib(s,o,u,d,g,b){return cs(o),o.updateQueue=null,u=M_(o,d,u,g),D_(s),d=yd(),s!==null&&!Tt?(_d(s,o,b),Xr(s,o,b)):(Ke&&d&&Yh(o),o.flags|=1,nn(s,o,u,b),o.child)}function Nb(s,o,u,d,g){if(cs(o),o.stateNode===null){var b=Ys,x=u.contextType;typeof x=="object"&&x!==null&&(b=tn(x)),b=new u(d,b),o.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,b.updater=Dd,o.stateNode=b,b._reactInternals=o,b=o.stateNode,b.props=d,b.state=o.memoizedState,b.refs={},ld(o),x=u.contextType,b.context=typeof x=="object"&&x!==null?tn(x):Ys,b.state=o.memoizedState,x=u.getDerivedStateFromProps,typeof x=="function"&&(Nd(o,u,x,d),b.state=o.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(x=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),x!==b.state&&Dd.enqueueReplaceState(b,b.state,null),So(o,d,b,g),xo(),b.state=o.memoizedState),typeof b.componentDidMount=="function"&&(o.flags|=4194308),d=!0}else if(s===null){b=o.stateNode;var A=o.memoizedProps,j=gs(u,A);b.props=j;var Y=b.context,ae=u.contextType;x=Ys,typeof ae=="object"&&ae!==null&&(x=tn(ae));var le=u.getDerivedStateFromProps;ae=typeof le=="function"||typeof b.getSnapshotBeforeUpdate=="function",A=o.pendingProps!==A,ae||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(A||Y!==x)&&_b(o,b,d,x),wi=!1;var ee=o.memoizedState;b.state=ee,So(o,d,b,g),xo(),Y=o.memoizedState,A||ee!==Y||wi?(typeof le=="function"&&(Nd(o,u,le,d),Y=o.memoizedState),(j=wi||yb(o,u,j,d,ee,Y,x))?(ae||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(o.flags|=4194308)):(typeof b.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=d,o.memoizedState=Y),b.props=d,b.state=Y,b.context=x,d=j):(typeof b.componentDidMount=="function"&&(o.flags|=4194308),d=!1)}else{b=o.stateNode,ud(s,o),x=o.memoizedProps,ae=gs(u,x),b.props=ae,le=o.pendingProps,ee=b.context,Y=u.contextType,j=Ys,typeof Y=="object"&&Y!==null&&(j=tn(Y)),A=u.getDerivedStateFromProps,(Y=typeof A=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(x!==le||ee!==j)&&_b(o,b,d,j),wi=!1,ee=o.memoizedState,b.state=ee,So(o,d,b,g),xo();var te=o.memoizedState;x!==le||ee!==te||wi||s!==null&&s.dependencies!==null&&xu(s.dependencies)?(typeof A=="function"&&(Nd(o,u,A,d),te=o.memoizedState),(ae=wi||yb(o,u,ae,d,ee,te,j)||s!==null&&s.dependencies!==null&&xu(s.dependencies))?(Y||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(d,te,j),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(d,te,j)),typeof b.componentDidUpdate=="function"&&(o.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof b.componentDidUpdate!="function"||x===s.memoizedProps&&ee===s.memoizedState||(o.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||x===s.memoizedProps&&ee===s.memoizedState||(o.flags|=1024),o.memoizedProps=d,o.memoizedState=te),b.props=d,b.state=te,b.context=j,d=ae):(typeof b.componentDidUpdate!="function"||x===s.memoizedProps&&ee===s.memoizedState||(o.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||x===s.memoizedProps&&ee===s.memoizedState||(o.flags|=1024),d=!1)}return b=d,$u(s,o),d=(o.flags&128)!==0,b||d?(b=o.stateNode,u=d&&typeof u.getDerivedStateFromError!="function"?null:b.render(),o.flags|=1,s!==null&&d?(o.child=ps(o,s.child,null,g),o.child=ps(o,null,u,g)):nn(s,o,u,g),o.memoizedState=b.state,s=o.child):s=Xr(s,o,g),s}function Db(s,o,u,d){return ls(),o.flags|=256,nn(s,o,u,d),o.child}var Pd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function jd(s){return{baseLanes:s,cachePool:x_()}}function Bd(s,o,u){return s=s!==null?s.childLanes&~u:0,o&&(s|=Kn),s}function Mb(s,o,u){var d=o.pendingProps,g=!1,b=(o.flags&128)!==0,x;if((x=b)||(x=s!==null&&s.memoizedState===null?!1:(St.current&2)!==0),x&&(g=!0,o.flags&=-129),x=(o.flags&32)!==0,o.flags&=-33,s===null){if(Ke){if(g?Ei(o):ki(),(s=ft)?(s=qv(s,lr),s=s!==null&&s.data!=="&"?s:null,s!==null&&(o.memoizedState={dehydrated:s,treeContext:yi!==null?{id:Tr,overflow:Ar}:null,retryLane:536870912,hydrationErrors:null},u=d_(s),u.return=o,o.child=u,en=o,ft=null)):s=null,s===null)throw bi(o);return wp(s)?o.lanes=32:o.lanes=536870912,null}var A=d.children;return d=d.fallback,g?(ki(),g=o.mode,A=qu({mode:"hidden",children:A},g),d=os(d,g,u,null),A.return=o,d.return=o,A.sibling=d,o.child=A,d=o.child,d.memoizedState=jd(u),d.childLanes=Bd(s,x,u),o.memoizedState=Pd,Ao(null,d)):(Ei(o),Ud(o,A))}var j=s.memoizedState;if(j!==null&&(A=j.dehydrated,A!==null)){if(b)o.flags&256?(Ei(o),o.flags&=-257,o=$d(s,o,u)):o.memoizedState!==null?(ki(),o.child=s.child,o.flags|=128,o=null):(ki(),A=d.fallback,g=o.mode,d=qu({mode:"visible",children:d.children},g),A=os(A,g,u,null),A.flags|=2,d.return=o,A.return=o,d.sibling=A,o.child=d,ps(o,s.child,null,u),d=o.child,d.memoizedState=jd(u),d.childLanes=Bd(s,x,u),o.memoizedState=Pd,o=Ao(null,d));else if(Ei(o),wp(A)){if(x=A.nextSibling&&A.nextSibling.dataset,x)var Y=x.dgst;x=Y,d=Error(r(419)),d.stack="",d.digest=x,go({value:d,source:null,stack:null}),o=$d(s,o,u)}else if(Tt||ta(s,o,u,!1),x=(u&s.childLanes)!==0,Tt||x){if(x=lt,x!==null&&(d=v0(x,u),d!==0&&d!==j.retryLane))throw j.retryLane=d,as(s,d),Ln(x,s,d),Ld;vp(A)||Yu(),o=$d(s,o,u)}else vp(A)?(o.flags|=192,o.child=s.child,o=null):(s=j.treeContext,ft=cr(A.nextSibling),en=o,Ke=!0,_i=null,lr=!1,s!==null&&g_(o,s),o=Ud(o,d.children),o.flags|=4096);return o}return g?(ki(),A=d.fallback,g=o.mode,j=s.child,Y=j.sibling,d=Gr(j,{mode:"hidden",children:d.children}),d.subtreeFlags=j.subtreeFlags&65011712,Y!==null?A=Gr(Y,A):(A=os(A,g,u,null),A.flags|=2),A.return=o,d.return=o,d.sibling=A,o.child=d,Ao(null,d),d=o.child,A=s.child.memoizedState,A===null?A=jd(u):(g=A.cachePool,g!==null?(j=kt._currentValue,g=g.parent!==j?{parent:j,pool:j}:g):g=x_(),A={baseLanes:A.baseLanes|u,cachePool:g}),d.memoizedState=A,d.childLanes=Bd(s,x,u),o.memoizedState=Pd,Ao(s.child,d)):(Ei(o),u=s.child,s=u.sibling,u=Gr(u,{mode:"visible",children:d.children}),u.return=o,u.sibling=null,s!==null&&(x=o.deletions,x===null?(o.deletions=[s],o.flags|=16):x.push(s)),o.child=u,o.memoizedState=null,u)}function Ud(s,o){return o=qu({mode:"visible",children:o},s.mode),o.return=s,s.child=o}function qu(s,o){return s=Fn(22,s,null,o),s.lanes=0,s}function $d(s,o,u){return ps(o,s.child,null,u),s=Ud(o,o.pendingProps.children),s.flags|=2,o.memoizedState=null,s}function Lb(s,o,u){s.lanes|=o;var d=s.alternate;d!==null&&(d.lanes|=o),nd(s.return,o,u)}function qd(s,o,u,d,g,b){var x=s.memoizedState;x===null?s.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:d,tail:u,tailMode:g,treeForkCount:b}:(x.isBackwards=o,x.rendering=null,x.renderingStartTime=0,x.last=d,x.tail=u,x.tailMode=g,x.treeForkCount=b)}function zb(s,o,u){var d=o.pendingProps,g=d.revealOrder,b=d.tail;d=d.children;var x=St.current,A=(x&2)!==0;if(A?(x=x&1|2,o.flags|=128):x&=1,O(St,x),nn(s,o,d,u),d=Ke?mo:0,!A&&s!==null&&(s.flags&128)!==0)e:for(s=o.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&Lb(s,u,o);else if(s.tag===19)Lb(s,u,o);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break e;for(;s.sibling===null;){if(s.return===null||s.return===o)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(g){case"forwards":for(u=o.child,g=null;u!==null;)s=u.alternate,s!==null&&Ou(s)===null&&(g=u),u=u.sibling;u=g,u===null?(g=o.child,o.child=null):(g=u.sibling,u.sibling=null),qd(o,!1,g,u,b,d);break;case"backwards":case"unstable_legacy-backwards":for(u=null,g=o.child,o.child=null;g!==null;){if(s=g.alternate,s!==null&&Ou(s)===null){o.child=g;break}s=g.sibling,g.sibling=u,u=g,g=s}qd(o,!0,u,null,b,d);break;case"together":qd(o,!1,null,null,void 0,d);break;default:o.memoizedState=null}return o.child}function Xr(s,o,u){if(s!==null&&(o.dependencies=s.dependencies),Ai|=o.lanes,(u&o.childLanes)===0)if(s!==null){if(ta(s,o,u,!1),(u&o.childLanes)===0)return null}else return null;if(s!==null&&o.child!==s.child)throw Error(r(153));if(o.child!==null){for(s=o.child,u=Gr(s,s.pendingProps),o.child=u,u.return=o;s.sibling!==null;)s=s.sibling,u=u.sibling=Gr(s,s.pendingProps),u.return=o;u.sibling=null}return o.child}function Fd(s,o){return(s.lanes&o)!==0?!0:(s=s.dependencies,!!(s!==null&&xu(s)))}function AR(s,o,u){switch(o.tag){case 3:Se(o,o.stateNode.containerInfo),vi(o,kt,s.memoizedState.cache),ls();break;case 27:case 5:Xe(o);break;case 4:Se(o,o.stateNode.containerInfo);break;case 10:vi(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,pd(o),null;break;case 13:var d=o.memoizedState;if(d!==null)return d.dehydrated!==null?(Ei(o),o.flags|=128,null):(u&o.child.childLanes)!==0?Mb(s,o,u):(Ei(o),s=Xr(s,o,u),s!==null?s.sibling:null);Ei(o);break;case 19:var g=(s.flags&128)!==0;if(d=(u&o.childLanes)!==0,d||(ta(s,o,u,!1),d=(u&o.childLanes)!==0),g){if(d)return zb(s,o,u);o.flags|=128}if(g=o.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),O(St,St.current),d)break;return null;case 22:return o.lanes=0,Ab(s,o,u,o.pendingProps);case 24:vi(o,kt,s.memoizedState.cache)}return Xr(s,o,u)}function Pb(s,o,u){if(s!==null)if(s.memoizedProps!==o.pendingProps)Tt=!0;else{if(!Fd(s,u)&&(o.flags&128)===0)return Tt=!1,AR(s,o,u);Tt=(s.flags&131072)!==0}else Tt=!1,Ke&&(o.flags&1048576)!==0&&m_(o,mo,o.index);switch(o.lanes=0,o.tag){case 16:e:{var d=o.pendingProps;if(s=hs(o.elementType),o.type=s,typeof s=="function")Zh(s)?(d=gs(s,d),o.tag=1,o=Nb(null,o,s,d,u)):(o.tag=0,o=zd(null,o,s,d,u));else{if(s!=null){var g=s.$$typeof;if(g===z){o.tag=11,o=kb(null,o,s,d,u);break e}else if(g===M){o.tag=14,o=Cb(null,o,s,d,u);break e}}throw o=V(s)||s,Error(r(306,o,""))}}return o;case 0:return zd(s,o,o.type,o.pendingProps,u);case 1:return d=o.type,g=gs(d,o.pendingProps),Nb(s,o,d,g,u);case 3:e:{if(Se(o,o.stateNode.containerInfo),s===null)throw Error(r(387));d=o.pendingProps;var b=o.memoizedState;g=b.element,ud(s,o),So(o,d,null,u);var x=o.memoizedState;if(d=x.cache,vi(o,kt,d),d!==b.cache&&rd(o,[kt],u,!0),xo(),d=x.element,b.isDehydrated)if(b={element:d,isDehydrated:!1,cache:x.cache},o.updateQueue.baseState=b,o.memoizedState=b,o.flags&256){o=Db(s,o,d,u);break e}else if(d!==g){g=sr(Error(r(424)),o),go(g),o=Db(s,o,d,u);break e}else for(s=o.stateNode.containerInfo,s.nodeType===9?s=s.body:s=s.nodeName==="HTML"?s.ownerDocument.body:s,ft=cr(s.firstChild),en=o,Ke=!0,_i=null,lr=!0,u=A_(o,null,d,u),o.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(ls(),d===g){o=Xr(s,o,u);break e}nn(s,o,d,u)}o=o.child}return o;case 26:return $u(s,o),s===null?(u=Zv(o.type,null,o.pendingProps,null))?o.memoizedState=u:Ke||(u=o.type,s=o.pendingProps,d=ic(ge.current).createElement(u),d[Wt]=o,d[Rn]=s,rn(d,u,s),Gt(d),o.stateNode=d):o.memoizedState=Zv(o.type,s.memoizedProps,o.pendingProps,s.memoizedState),null;case 27:return Xe(o),s===null&&Ke&&(d=o.stateNode=Hv(o.type,o.pendingProps,ge.current),en=o,lr=!0,g=ft,Di(o.type)?(xp=g,ft=cr(d.firstChild)):ft=g),nn(s,o,o.pendingProps.children,u),$u(s,o),s===null&&(o.flags|=4194304),o.child;case 5:return s===null&&Ke&&((g=d=ft)&&(d=iO(d,o.type,o.pendingProps,lr),d!==null?(o.stateNode=d,en=o,ft=cr(d.firstChild),lr=!1,g=!0):g=!1),g||bi(o)),Xe(o),g=o.type,b=o.pendingProps,x=s!==null?s.memoizedProps:null,d=b.children,yp(g,b)?d=null:x!==null&&yp(g,x)&&(o.flags|=32),o.memoizedState!==null&&(g=gd(s,o,bR,null,null,u),Fo._currentValue=g),$u(s,o),nn(s,o,d,u),o.child;case 6:return s===null&&Ke&&((s=u=ft)&&(u=sO(u,o.pendingProps,lr),u!==null?(o.stateNode=u,en=o,ft=null,s=!0):s=!1),s||bi(o)),null;case 13:return Mb(s,o,u);case 4:return Se(o,o.stateNode.containerInfo),d=o.pendingProps,s===null?o.child=ps(o,null,d,u):nn(s,o,d,u),o.child;case 11:return kb(s,o,o.type,o.pendingProps,u);case 7:return nn(s,o,o.pendingProps,u),o.child;case 8:return nn(s,o,o.pendingProps.children,u),o.child;case 12:return nn(s,o,o.pendingProps.children,u),o.child;case 10:return d=o.pendingProps,vi(o,o.type,d.value),nn(s,o,d.children,u),o.child;case 9:return g=o.type._context,d=o.pendingProps.children,cs(o),g=tn(g),d=d(g),o.flags|=1,nn(s,o,d,u),o.child;case 14:return Cb(s,o,o.type,o.pendingProps,u);case 15:return Tb(s,o,o.type,o.pendingProps,u);case 19:return zb(s,o,u);case 31:return TR(s,o,u);case 22:return Ab(s,o,u,o.pendingProps);case 24:return cs(o),d=tn(kt),s===null?(g=ad(),g===null&&(g=lt,b=id(),g.pooledCache=b,b.refCount++,b!==null&&(g.pooledCacheLanes|=u),g=b),o.memoizedState={parent:d,cache:g},ld(o),vi(o,kt,g)):((s.lanes&u)!==0&&(ud(s,o),So(o,null,null,u),xo()),g=s.memoizedState,b=o.memoizedState,g.parent!==d?(g={parent:d,cache:d},o.memoizedState=g,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=g),vi(o,kt,d)):(d=b.cache,vi(o,kt,d),d!==g.cache&&rd(o,[kt],u,!0))),nn(s,o,o.pendingProps.children,u),o.child;case 29:throw o.pendingProps}throw Error(r(156,o.tag))}function Wr(s){s.flags|=4}function Vd(s,o,u,d,g){if((o=(s.mode&32)!==0)&&(o=!1),o){if(s.flags|=16777216,(g&335544128)===g)if(s.stateNode.complete)s.flags|=8192;else if(cv())s.flags|=8192;else throw ds=Cu,od}else s.flags&=-16777217}function jb(s,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!Wv(o))if(cv())s.flags|=8192;else throw ds=Cu,od}function Fu(s,o){o!==null&&(s.flags|=4),s.flags&16384&&(o=s.tag!==22?y0():536870912,s.lanes|=o,da|=o)}function Ro(s,o){if(!Ke)switch(s.tailMode){case"hidden":o=s.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?s.tail=null:u.sibling=null;break;case"collapsed":u=s.tail;for(var d=null;u!==null;)u.alternate!==null&&(d=u),u=u.sibling;d===null?o||s.tail===null?s.tail=null:s.tail.sibling=null:d.sibling=null}}function ht(s){var o=s.alternate!==null&&s.alternate.child===s.child,u=0,d=0;if(o)for(var g=s.child;g!==null;)u|=g.lanes|g.childLanes,d|=g.subtreeFlags&65011712,d|=g.flags&65011712,g.return=s,g=g.sibling;else for(g=s.child;g!==null;)u|=g.lanes|g.childLanes,d|=g.subtreeFlags,d|=g.flags,g.return=s,g=g.sibling;return s.subtreeFlags|=d,s.childLanes=u,o}function RR(s,o,u){var d=o.pendingProps;switch(Xh(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ht(o),null;case 1:return ht(o),null;case 3:return u=o.stateNode,d=null,s!==null&&(d=s.memoizedState.cache),o.memoizedState.cache!==d&&(o.flags|=2048),Qr(kt),we(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(s===null||s.child===null)&&(ea(o)?Wr(o):s===null||s.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,ed())),ht(o),null;case 26:var g=o.type,b=o.memoizedState;return s===null?(Wr(o),b!==null?(ht(o),jb(o,b)):(ht(o),Vd(o,g,null,d,u))):b?b!==s.memoizedState?(Wr(o),ht(o),jb(o,b)):(ht(o),o.flags&=-16777217):(s=s.memoizedProps,s!==d&&Wr(o),ht(o),Vd(o,g,s,d,u)),null;case 27:if(at(o),u=ge.current,g=o.type,s!==null&&o.stateNode!=null)s.memoizedProps!==d&&Wr(o);else{if(!d){if(o.stateNode===null)throw Error(r(166));return ht(o),null}s=ie.current,ea(o)?y_(o):(s=Hv(g,d,u),o.stateNode=s,Wr(o))}return ht(o),null;case 5:if(at(o),g=o.type,s!==null&&o.stateNode!=null)s.memoizedProps!==d&&Wr(o);else{if(!d){if(o.stateNode===null)throw Error(r(166));return ht(o),null}if(b=ie.current,ea(o))y_(o);else{var x=ic(ge.current);switch(b){case 1:b=x.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:b=x.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":b=x.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":b=x.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":b=x.createElement("div"),b.innerHTML="<script><\/script>",b=b.removeChild(b.firstChild);break;case"select":b=typeof d.is=="string"?x.createElement("select",{is:d.is}):x.createElement("select"),d.multiple?b.multiple=!0:d.size&&(b.size=d.size);break;default:b=typeof d.is=="string"?x.createElement(g,{is:d.is}):x.createElement(g)}}b[Wt]=o,b[Rn]=d;e:for(x=o.child;x!==null;){if(x.tag===5||x.tag===6)b.appendChild(x.stateNode);else if(x.tag!==4&&x.tag!==27&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===o)break e;for(;x.sibling===null;){if(x.return===null||x.return===o)break e;x=x.return}x.sibling.return=x.return,x=x.sibling}o.stateNode=b;e:switch(rn(b,g,d),g){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}d&&Wr(o)}}return ht(o),Vd(o,o.type,s===null?null:s.memoizedProps,o.pendingProps,u),null;case 6:if(s&&o.stateNode!=null)s.memoizedProps!==d&&Wr(o);else{if(typeof d!="string"&&o.stateNode===null)throw Error(r(166));if(s=ge.current,ea(o)){if(s=o.stateNode,u=o.memoizedProps,d=null,g=en,g!==null)switch(g.tag){case 27:case 5:d=g.memoizedProps}s[Wt]=o,s=!!(s.nodeValue===u||d!==null&&d.suppressHydrationWarning===!0||Mv(s.nodeValue,u)),s||bi(o,!0)}else s=ic(s).createTextNode(d),s[Wt]=o,o.stateNode=s}return ht(o),null;case 31:if(u=o.memoizedState,s===null||s.memoizedState!==null){if(d=ea(o),u!==null){if(s===null){if(!d)throw Error(r(318));if(s=o.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(557));s[Wt]=o}else ls(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;ht(o),s=!1}else u=ed(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=u),s=!0;if(!s)return o.flags&256?(Hn(o),o):(Hn(o),null);if((o.flags&128)!==0)throw Error(r(558))}return ht(o),null;case 13:if(d=o.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(g=ea(o),d!==null&&d.dehydrated!==null){if(s===null){if(!g)throw Error(r(318));if(g=o.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(r(317));g[Wt]=o}else ls(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;ht(o),g=!1}else g=ed(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=g),g=!0;if(!g)return o.flags&256?(Hn(o),o):(Hn(o),null)}return Hn(o),(o.flags&128)!==0?(o.lanes=u,o):(u=d!==null,s=s!==null&&s.memoizedState!==null,u&&(d=o.child,g=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(g=d.alternate.memoizedState.cachePool.pool),b=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(b=d.memoizedState.cachePool.pool),b!==g&&(d.flags|=2048)),u!==s&&u&&(o.child.flags|=8192),Fu(o,o.updateQueue),ht(o),null);case 4:return we(),s===null&&hp(o.stateNode.containerInfo),ht(o),null;case 10:return Qr(o.type),ht(o),null;case 19:if(q(St),d=o.memoizedState,d===null)return ht(o),null;if(g=(o.flags&128)!==0,b=d.rendering,b===null)if(g)Ro(d,!1);else{if(xt!==0||s!==null&&(s.flags&128)!==0)for(s=o.child;s!==null;){if(b=Ou(s),b!==null){for(o.flags|=128,Ro(d,!1),s=b.updateQueue,o.updateQueue=s,Fu(o,s),o.subtreeFlags=0,s=u,u=o.child;u!==null;)h_(u,s),u=u.sibling;return O(St,St.current&1|2),Ke&&Kr(o,d.treeForkCount),o.child}s=s.sibling}d.tail!==null&&Ae()>Zu&&(o.flags|=128,g=!0,Ro(d,!1),o.lanes=4194304)}else{if(!g)if(s=Ou(b),s!==null){if(o.flags|=128,g=!0,s=s.updateQueue,o.updateQueue=s,Fu(o,s),Ro(d,!0),d.tail===null&&d.tailMode==="hidden"&&!b.alternate&&!Ke)return ht(o),null}else 2*Ae()-d.renderingStartTime>Zu&&u!==536870912&&(o.flags|=128,g=!0,Ro(d,!1),o.lanes=4194304);d.isBackwards?(b.sibling=o.child,o.child=b):(s=d.last,s!==null?s.sibling=b:o.child=b,d.last=b)}return d.tail!==null?(s=d.tail,d.rendering=s,d.tail=s.sibling,d.renderingStartTime=Ae(),s.sibling=null,u=St.current,O(St,g?u&1|2:u&1),Ke&&Kr(o,d.treeForkCount),s):(ht(o),null);case 22:case 23:return Hn(o),dd(),d=o.memoizedState!==null,s!==null?s.memoizedState!==null!==d&&(o.flags|=8192):d&&(o.flags|=8192),d?(u&536870912)!==0&&(o.flags&128)===0&&(ht(o),o.subtreeFlags&6&&(o.flags|=8192)):ht(o),u=o.updateQueue,u!==null&&Fu(o,u.retryQueue),u=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),d=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(d=o.memoizedState.cachePool.pool),d!==u&&(o.flags|=2048),s!==null&&q(fs),null;case 24:return u=null,s!==null&&(u=s.memoizedState.cache),o.memoizedState.cache!==u&&(o.flags|=2048),Qr(kt),ht(o),null;case 25:return null;case 30:return null}throw Error(r(156,o.tag))}function OR(s,o){switch(Xh(o),o.tag){case 1:return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 3:return Qr(kt),we(),s=o.flags,(s&65536)!==0&&(s&128)===0?(o.flags=s&-65537|128,o):null;case 26:case 27:case 5:return at(o),null;case 31:if(o.memoizedState!==null){if(Hn(o),o.alternate===null)throw Error(r(340));ls()}return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 13:if(Hn(o),s=o.memoizedState,s!==null&&s.dehydrated!==null){if(o.alternate===null)throw Error(r(340));ls()}return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 19:return q(St),null;case 4:return we(),null;case 10:return Qr(o.type),null;case 22:case 23:return Hn(o),dd(),s!==null&&q(fs),s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 24:return Qr(kt),null;case 25:return null;default:return null}}function Bb(s,o){switch(Xh(o),o.tag){case 3:Qr(kt),we();break;case 26:case 27:case 5:at(o);break;case 4:we();break;case 31:o.memoizedState!==null&&Hn(o);break;case 13:Hn(o);break;case 19:q(St);break;case 10:Qr(o.type);break;case 22:case 23:Hn(o),dd(),s!==null&&q(fs);break;case 24:Qr(kt)}}function Oo(s,o){try{var u=o.updateQueue,d=u!==null?u.lastEffect:null;if(d!==null){var g=d.next;u=g;do{if((u.tag&s)===s){d=void 0;var b=u.create,x=u.inst;d=b(),x.destroy=d}u=u.next}while(u!==g)}}catch(A){tt(o,o.return,A)}}function Ci(s,o,u){try{var d=o.updateQueue,g=d!==null?d.lastEffect:null;if(g!==null){var b=g.next;d=b;do{if((d.tag&s)===s){var x=d.inst,A=x.destroy;if(A!==void 0){x.destroy=void 0,g=o;var j=u,Y=A;try{Y()}catch(ae){tt(g,j,ae)}}}d=d.next}while(d!==b)}}catch(ae){tt(o,o.return,ae)}}function Ub(s){var o=s.updateQueue;if(o!==null){var u=s.stateNode;try{O_(o,u)}catch(d){tt(s,s.return,d)}}}function $b(s,o,u){u.props=gs(s.type,s.memoizedProps),u.state=s.memoizedState;try{u.componentWillUnmount()}catch(d){tt(s,o,d)}}function Io(s,o){try{var u=s.ref;if(u!==null){switch(s.tag){case 26:case 27:case 5:var d=s.stateNode;break;case 30:d=s.stateNode;break;default:d=s.stateNode}typeof u=="function"?s.refCleanup=u(d):u.current=d}}catch(g){tt(s,o,g)}}function Rr(s,o){var u=s.ref,d=s.refCleanup;if(u!==null)if(typeof d=="function")try{d()}catch(g){tt(s,o,g)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(g){tt(s,o,g)}else u.current=null}function qb(s){var o=s.type,u=s.memoizedProps,d=s.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":u.autoFocus&&d.focus();break e;case"img":u.src?d.src=u.src:u.srcSet&&(d.srcset=u.srcSet)}}catch(g){tt(s,s.return,g)}}function Hd(s,o,u){try{var d=s.stateNode;XR(d,s.type,u,o),d[Rn]=o}catch(g){tt(s,s.return,g)}}function Fb(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&Di(s.type)||s.tag===4}function Gd(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||Fb(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&Di(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Kd(s,o,u){var d=s.tag;if(d===5||d===6)s=s.stateNode,o?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(s,o):(o=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,o.appendChild(s),u=u._reactRootContainer,u!=null||o.onclick!==null||(o.onclick=Vr));else if(d!==4&&(d===27&&Di(s.type)&&(u=s.stateNode,o=null),s=s.child,s!==null))for(Kd(s,o,u),s=s.sibling;s!==null;)Kd(s,o,u),s=s.sibling}function Vu(s,o,u){var d=s.tag;if(d===5||d===6)s=s.stateNode,o?u.insertBefore(s,o):u.appendChild(s);else if(d!==4&&(d===27&&Di(s.type)&&(u=s.stateNode),s=s.child,s!==null))for(Vu(s,o,u),s=s.sibling;s!==null;)Vu(s,o,u),s=s.sibling}function Vb(s){var o=s.stateNode,u=s.memoizedProps;try{for(var d=s.type,g=o.attributes;g.length;)o.removeAttributeNode(g[0]);rn(o,d,u),o[Wt]=s,o[Rn]=u}catch(b){tt(s,s.return,b)}}var ei=!1,At=!1,Zd=!1,Hb=typeof WeakSet=="function"?WeakSet:Set,Kt=null;function IR(s,o){if(s=s.containerInfo,mp=fc,s=r_(s),$h(s)){if("selectionStart"in s)var u={start:s.selectionStart,end:s.selectionEnd};else e:{u=(u=s.ownerDocument)&&u.defaultView||window;var d=u.getSelection&&u.getSelection();if(d&&d.rangeCount!==0){u=d.anchorNode;var g=d.anchorOffset,b=d.focusNode;d=d.focusOffset;try{u.nodeType,b.nodeType}catch{u=null;break e}var x=0,A=-1,j=-1,Y=0,ae=0,le=s,ee=null;t:for(;;){for(var te;le!==u||g!==0&&le.nodeType!==3||(A=x+g),le!==b||d!==0&&le.nodeType!==3||(j=x+d),le.nodeType===3&&(x+=le.nodeValue.length),(te=le.firstChild)!==null;)ee=le,le=te;for(;;){if(le===s)break t;if(ee===u&&++Y===g&&(A=x),ee===b&&++ae===d&&(j=x),(te=le.nextSibling)!==null)break;le=ee,ee=le.parentNode}le=te}u=A===-1||j===-1?null:{start:A,end:j}}else u=null}u=u||{start:0,end:0}}else u=null;for(gp={focusedElem:s,selectionRange:u},fc=!1,Kt=o;Kt!==null;)if(o=Kt,s=o.child,(o.subtreeFlags&1028)!==0&&s!==null)s.return=o,Kt=s;else for(;Kt!==null;){switch(o=Kt,b=o.alternate,s=o.flags,o.tag){case 0:if((s&4)!==0&&(s=o.updateQueue,s=s!==null?s.events:null,s!==null))for(u=0;u<s.length;u++)g=s[u],g.ref.impl=g.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&b!==null){s=void 0,u=o,g=b.memoizedProps,b=b.memoizedState,d=u.stateNode;try{var be=gs(u.type,g);s=d.getSnapshotBeforeUpdate(be,b),d.__reactInternalSnapshotBeforeUpdate=s}catch(Oe){tt(u,u.return,Oe)}}break;case 3:if((s&1024)!==0){if(s=o.stateNode.containerInfo,u=s.nodeType,u===9)bp(s);else if(u===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":bp(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(r(163))}if(s=o.sibling,s!==null){s.return=o.return,Kt=s;break}Kt=o.return}}function Gb(s,o,u){var d=u.flags;switch(u.tag){case 0:case 11:case 15:ni(s,u),d&4&&Oo(5,u);break;case 1:if(ni(s,u),d&4)if(s=u.stateNode,o===null)try{s.componentDidMount()}catch(x){tt(u,u.return,x)}else{var g=gs(u.type,o.memoizedProps);o=o.memoizedState;try{s.componentDidUpdate(g,o,s.__reactInternalSnapshotBeforeUpdate)}catch(x){tt(u,u.return,x)}}d&64&&Ub(u),d&512&&Io(u,u.return);break;case 3:if(ni(s,u),d&64&&(s=u.updateQueue,s!==null)){if(o=null,u.child!==null)switch(u.child.tag){case 27:case 5:o=u.child.stateNode;break;case 1:o=u.child.stateNode}try{O_(s,o)}catch(x){tt(u,u.return,x)}}break;case 27:o===null&&d&4&&Vb(u);case 26:case 5:ni(s,u),o===null&&d&4&&qb(u),d&512&&Io(u,u.return);break;case 12:ni(s,u);break;case 31:ni(s,u),d&4&&Qb(s,u);break;case 13:ni(s,u),d&4&&Jb(s,u),d&64&&(s=u.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(u=UR.bind(null,u),aO(s,u))));break;case 22:if(d=u.memoizedState!==null||ei,!d){o=o!==null&&o.memoizedState!==null||At,g=ei;var b=At;ei=d,(At=o)&&!b?ri(s,u,(u.subtreeFlags&8772)!==0):ni(s,u),ei=g,At=b}break;case 30:break;default:ni(s,u)}}function Kb(s){var o=s.alternate;o!==null&&(s.alternate=null,Kb(o)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(o=s.stateNode,o!==null&&Eh(o)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var mt=null,In=!1;function ti(s,o,u){for(u=u.child;u!==null;)Zb(s,o,u),u=u.sibling}function Zb(s,o,u){if(_t&&typeof _t.onCommitFiberUnmount=="function")try{_t.onCommitFiberUnmount(Ht,u)}catch{}switch(u.tag){case 26:At||Rr(u,o),ti(s,o,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:At||Rr(u,o);var d=mt,g=In;Di(u.type)&&(mt=u.stateNode,In=!1),ti(s,o,u),Uo(u.stateNode),mt=d,In=g;break;case 5:At||Rr(u,o);case 6:if(d=mt,g=In,mt=null,ti(s,o,u),mt=d,In=g,mt!==null)if(In)try{(mt.nodeType===9?mt.body:mt.nodeName==="HTML"?mt.ownerDocument.body:mt).removeChild(u.stateNode)}catch(b){tt(u,o,b)}else try{mt.removeChild(u.stateNode)}catch(b){tt(u,o,b)}break;case 18:mt!==null&&(In?(s=mt,Uv(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,u.stateNode),wa(s)):Uv(mt,u.stateNode));break;case 4:d=mt,g=In,mt=u.stateNode.containerInfo,In=!0,ti(s,o,u),mt=d,In=g;break;case 0:case 11:case 14:case 15:Ci(2,u,o),At||Ci(4,u,o),ti(s,o,u);break;case 1:At||(Rr(u,o),d=u.stateNode,typeof d.componentWillUnmount=="function"&&$b(u,o,d)),ti(s,o,u);break;case 21:ti(s,o,u);break;case 22:At=(d=At)||u.memoizedState!==null,ti(s,o,u),At=d;break;default:ti(s,o,u)}}function Qb(s,o){if(o.memoizedState===null&&(s=o.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{wa(s)}catch(u){tt(o,o.return,u)}}}function Jb(s,o){if(o.memoizedState===null&&(s=o.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{wa(s)}catch(u){tt(o,o.return,u)}}function NR(s){switch(s.tag){case 31:case 13:case 19:var o=s.stateNode;return o===null&&(o=s.stateNode=new Hb),o;case 22:return s=s.stateNode,o=s._retryCache,o===null&&(o=s._retryCache=new Hb),o;default:throw Error(r(435,s.tag))}}function Hu(s,o){var u=NR(s);o.forEach(function(d){if(!u.has(d)){u.add(d);var g=$R.bind(null,s,d);d.then(g,g)}})}function Nn(s,o){var u=o.deletions;if(u!==null)for(var d=0;d<u.length;d++){var g=u[d],b=s,x=o,A=x;e:for(;A!==null;){switch(A.tag){case 27:if(Di(A.type)){mt=A.stateNode,In=!1;break e}break;case 5:mt=A.stateNode,In=!1;break e;case 3:case 4:mt=A.stateNode.containerInfo,In=!0;break e}A=A.return}if(mt===null)throw Error(r(160));Zb(b,x,g),mt=null,In=!1,b=g.alternate,b!==null&&(b.return=null),g.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)Yb(o,s),o=o.sibling}var xr=null;function Yb(s,o){var u=s.alternate,d=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Nn(o,s),Dn(s),d&4&&(Ci(3,s,s.return),Oo(3,s),Ci(5,s,s.return));break;case 1:Nn(o,s),Dn(s),d&512&&(At||u===null||Rr(u,u.return)),d&64&&ei&&(s=s.updateQueue,s!==null&&(d=s.callbacks,d!==null&&(u=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=u===null?d:u.concat(d))));break;case 26:var g=xr;if(Nn(o,s),Dn(s),d&512&&(At||u===null||Rr(u,u.return)),d&4){var b=u!==null?u.memoizedState:null;if(d=s.memoizedState,u===null)if(d===null)if(s.stateNode===null){e:{d=s.type,u=s.memoizedProps,g=g.ownerDocument||g;t:switch(d){case"title":b=g.getElementsByTagName("title")[0],(!b||b[ro]||b[Wt]||b.namespaceURI==="http://www.w3.org/2000/svg"||b.hasAttribute("itemprop"))&&(b=g.createElement(d),g.head.insertBefore(b,g.querySelector("head > title"))),rn(b,d,u),b[Wt]=s,Gt(b),d=b;break e;case"link":var x=Yv("link","href",g).get(d+(u.href||""));if(x){for(var A=0;A<x.length;A++)if(b=x[A],b.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&b.getAttribute("rel")===(u.rel==null?null:u.rel)&&b.getAttribute("title")===(u.title==null?null:u.title)&&b.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){x.splice(A,1);break t}}b=g.createElement(d),rn(b,d,u),g.head.appendChild(b);break;case"meta":if(x=Yv("meta","content",g).get(d+(u.content||""))){for(A=0;A<x.length;A++)if(b=x[A],b.getAttribute("content")===(u.content==null?null:""+u.content)&&b.getAttribute("name")===(u.name==null?null:u.name)&&b.getAttribute("property")===(u.property==null?null:u.property)&&b.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&b.getAttribute("charset")===(u.charSet==null?null:u.charSet)){x.splice(A,1);break t}}b=g.createElement(d),rn(b,d,u),g.head.appendChild(b);break;default:throw Error(r(468,d))}b[Wt]=s,Gt(b),d=b}s.stateNode=d}else Xv(g,s.type,s.stateNode);else s.stateNode=Jv(g,d,s.memoizedProps);else b!==d?(b===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):b.count--,d===null?Xv(g,s.type,s.stateNode):Jv(g,d,s.memoizedProps)):d===null&&s.stateNode!==null&&Hd(s,s.memoizedProps,u.memoizedProps)}break;case 27:Nn(o,s),Dn(s),d&512&&(At||u===null||Rr(u,u.return)),u!==null&&d&4&&Hd(s,s.memoizedProps,u.memoizedProps);break;case 5:if(Nn(o,s),Dn(s),d&512&&(At||u===null||Rr(u,u.return)),s.flags&32){g=s.stateNode;try{Vs(g,"")}catch(be){tt(s,s.return,be)}}d&4&&s.stateNode!=null&&(g=s.memoizedProps,Hd(s,g,u!==null?u.memoizedProps:g)),d&1024&&(Zd=!0);break;case 6:if(Nn(o,s),Dn(s),d&4){if(s.stateNode===null)throw Error(r(162));d=s.memoizedProps,u=s.stateNode;try{u.nodeValue=d}catch(be){tt(s,s.return,be)}}break;case 3:if(oc=null,g=xr,xr=sc(o.containerInfo),Nn(o,s),xr=g,Dn(s),d&4&&u!==null&&u.memoizedState.isDehydrated)try{wa(o.containerInfo)}catch(be){tt(s,s.return,be)}Zd&&(Zd=!1,Xb(s));break;case 4:d=xr,xr=sc(s.stateNode.containerInfo),Nn(o,s),Dn(s),xr=d;break;case 12:Nn(o,s),Dn(s);break;case 31:Nn(o,s),Dn(s),d&4&&(d=s.updateQueue,d!==null&&(s.updateQueue=null,Hu(s,d)));break;case 13:Nn(o,s),Dn(s),s.child.flags&8192&&s.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(Ku=Ae()),d&4&&(d=s.updateQueue,d!==null&&(s.updateQueue=null,Hu(s,d)));break;case 22:g=s.memoizedState!==null;var j=u!==null&&u.memoizedState!==null,Y=ei,ae=At;if(ei=Y||g,At=ae||j,Nn(o,s),At=ae,ei=Y,Dn(s),d&8192)e:for(o=s.stateNode,o._visibility=g?o._visibility&-2:o._visibility|1,g&&(u===null||j||ei||At||ys(s)),u=null,o=s;;){if(o.tag===5||o.tag===26){if(u===null){j=u=o;try{if(b=j.stateNode,g)x=b.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none";else{A=j.stateNode;var le=j.memoizedProps.style,ee=le!=null&&le.hasOwnProperty("display")?le.display:null;A.style.display=ee==null||typeof ee=="boolean"?"":(""+ee).trim()}}catch(be){tt(j,j.return,be)}}}else if(o.tag===6){if(u===null){j=o;try{j.stateNode.nodeValue=g?"":j.memoizedProps}catch(be){tt(j,j.return,be)}}}else if(o.tag===18){if(u===null){j=o;try{var te=j.stateNode;g?$v(te,!0):$v(j.stateNode,!1)}catch(be){tt(j,j.return,be)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===s)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break e;for(;o.sibling===null;){if(o.return===null||o.return===s)break e;u===o&&(u=null),o=o.return}u===o&&(u=null),o.sibling.return=o.return,o=o.sibling}d&4&&(d=s.updateQueue,d!==null&&(u=d.retryQueue,u!==null&&(d.retryQueue=null,Hu(s,u))));break;case 19:Nn(o,s),Dn(s),d&4&&(d=s.updateQueue,d!==null&&(s.updateQueue=null,Hu(s,d)));break;case 30:break;case 21:break;default:Nn(o,s),Dn(s)}}function Dn(s){var o=s.flags;if(o&2){try{for(var u,d=s.return;d!==null;){if(Fb(d)){u=d;break}d=d.return}if(u==null)throw Error(r(160));switch(u.tag){case 27:var g=u.stateNode,b=Gd(s);Vu(s,b,g);break;case 5:var x=u.stateNode;u.flags&32&&(Vs(x,""),u.flags&=-33);var A=Gd(s);Vu(s,A,x);break;case 3:case 4:var j=u.stateNode.containerInfo,Y=Gd(s);Kd(s,Y,j);break;default:throw Error(r(161))}}catch(ae){tt(s,s.return,ae)}s.flags&=-3}o&4096&&(s.flags&=-4097)}function Xb(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var o=s;Xb(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),s=s.sibling}}function ni(s,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)Gb(s,o.alternate,o),o=o.sibling}function ys(s){for(s=s.child;s!==null;){var o=s;switch(o.tag){case 0:case 11:case 14:case 15:Ci(4,o,o.return),ys(o);break;case 1:Rr(o,o.return);var u=o.stateNode;typeof u.componentWillUnmount=="function"&&$b(o,o.return,u),ys(o);break;case 27:Uo(o.stateNode);case 26:case 5:Rr(o,o.return),ys(o);break;case 22:o.memoizedState===null&&ys(o);break;case 30:ys(o);break;default:ys(o)}s=s.sibling}}function ri(s,o,u){for(u=u&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var d=o.alternate,g=s,b=o,x=b.flags;switch(b.tag){case 0:case 11:case 15:ri(g,b,u),Oo(4,b);break;case 1:if(ri(g,b,u),d=b,g=d.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(Y){tt(d,d.return,Y)}if(d=b,g=d.updateQueue,g!==null){var A=d.stateNode;try{var j=g.shared.hiddenCallbacks;if(j!==null)for(g.shared.hiddenCallbacks=null,g=0;g<j.length;g++)R_(j[g],A)}catch(Y){tt(d,d.return,Y)}}u&&x&64&&Ub(b),Io(b,b.return);break;case 27:Vb(b);case 26:case 5:ri(g,b,u),u&&d===null&&x&4&&qb(b),Io(b,b.return);break;case 12:ri(g,b,u);break;case 31:ri(g,b,u),u&&x&4&&Qb(g,b);break;case 13:ri(g,b,u),u&&x&4&&Jb(g,b);break;case 22:b.memoizedState===null&&ri(g,b,u),Io(b,b.return);break;case 30:break;default:ri(g,b,u)}o=o.sibling}}function Qd(s,o){var u=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),s=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(s=o.memoizedState.cachePool.pool),s!==u&&(s!=null&&s.refCount++,u!=null&&yo(u))}function Jd(s,o){s=null,o.alternate!==null&&(s=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==s&&(o.refCount++,s!=null&&yo(s))}function Sr(s,o,u,d){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)Wb(s,o,u,d),o=o.sibling}function Wb(s,o,u,d){var g=o.flags;switch(o.tag){case 0:case 11:case 15:Sr(s,o,u,d),g&2048&&Oo(9,o);break;case 1:Sr(s,o,u,d);break;case 3:Sr(s,o,u,d),g&2048&&(s=null,o.alternate!==null&&(s=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==s&&(o.refCount++,s!=null&&yo(s)));break;case 12:if(g&2048){Sr(s,o,u,d),s=o.stateNode;try{var b=o.memoizedProps,x=b.id,A=b.onPostCommit;typeof A=="function"&&A(x,o.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(j){tt(o,o.return,j)}}else Sr(s,o,u,d);break;case 31:Sr(s,o,u,d);break;case 13:Sr(s,o,u,d);break;case 23:break;case 22:b=o.stateNode,x=o.alternate,o.memoizedState!==null?b._visibility&2?Sr(s,o,u,d):No(s,o):b._visibility&2?Sr(s,o,u,d):(b._visibility|=2,ca(s,o,u,d,(o.subtreeFlags&10256)!==0||!1)),g&2048&&Qd(x,o);break;case 24:Sr(s,o,u,d),g&2048&&Jd(o.alternate,o);break;default:Sr(s,o,u,d)}}function ca(s,o,u,d,g){for(g=g&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var b=s,x=o,A=u,j=d,Y=x.flags;switch(x.tag){case 0:case 11:case 15:ca(b,x,A,j,g),Oo(8,x);break;case 23:break;case 22:var ae=x.stateNode;x.memoizedState!==null?ae._visibility&2?ca(b,x,A,j,g):No(b,x):(ae._visibility|=2,ca(b,x,A,j,g)),g&&Y&2048&&Qd(x.alternate,x);break;case 24:ca(b,x,A,j,g),g&&Y&2048&&Jd(x.alternate,x);break;default:ca(b,x,A,j,g)}o=o.sibling}}function No(s,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var u=s,d=o,g=d.flags;switch(d.tag){case 22:No(u,d),g&2048&&Qd(d.alternate,d);break;case 24:No(u,d),g&2048&&Jd(d.alternate,d);break;default:No(u,d)}o=o.sibling}}var Do=8192;function fa(s,o,u){if(s.subtreeFlags&Do)for(s=s.child;s!==null;)ev(s,o,u),s=s.sibling}function ev(s,o,u){switch(s.tag){case 26:fa(s,o,u),s.flags&Do&&s.memoizedState!==null&&_O(u,xr,s.memoizedState,s.memoizedProps);break;case 5:fa(s,o,u);break;case 3:case 4:var d=xr;xr=sc(s.stateNode.containerInfo),fa(s,o,u),xr=d;break;case 22:s.memoizedState===null&&(d=s.alternate,d!==null&&d.memoizedState!==null?(d=Do,Do=16777216,fa(s,o,u),Do=d):fa(s,o,u));break;default:fa(s,o,u)}}function tv(s){var o=s.alternate;if(o!==null&&(s=o.child,s!==null)){o.child=null;do o=s.sibling,s.sibling=null,s=o;while(s!==null)}}function Mo(s){var o=s.deletions;if((s.flags&16)!==0){if(o!==null)for(var u=0;u<o.length;u++){var d=o[u];Kt=d,rv(d,s)}tv(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)nv(s),s=s.sibling}function nv(s){switch(s.tag){case 0:case 11:case 15:Mo(s),s.flags&2048&&Ci(9,s,s.return);break;case 3:Mo(s);break;case 12:Mo(s);break;case 22:var o=s.stateNode;s.memoizedState!==null&&o._visibility&2&&(s.return===null||s.return.tag!==13)?(o._visibility&=-3,Gu(s)):Mo(s);break;default:Mo(s)}}function Gu(s){var o=s.deletions;if((s.flags&16)!==0){if(o!==null)for(var u=0;u<o.length;u++){var d=o[u];Kt=d,rv(d,s)}tv(s)}for(s=s.child;s!==null;){switch(o=s,o.tag){case 0:case 11:case 15:Ci(8,o,o.return),Gu(o);break;case 22:u=o.stateNode,u._visibility&2&&(u._visibility&=-3,Gu(o));break;default:Gu(o)}s=s.sibling}}function rv(s,o){for(;Kt!==null;){var u=Kt;switch(u.tag){case 0:case 11:case 15:Ci(8,u,o);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var d=u.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:yo(u.memoizedState.cache)}if(d=u.child,d!==null)d.return=u,Kt=d;else e:for(u=s;Kt!==null;){d=Kt;var g=d.sibling,b=d.return;if(Kb(d),d===u){Kt=null;break e}if(g!==null){g.return=b,Kt=g;break e}Kt=b}}}var DR={getCacheForType:function(s){var o=tn(kt),u=o.data.get(s);return u===void 0&&(u=s(),o.data.set(s,u)),u},cacheSignal:function(){return tn(kt).controller.signal}},MR=typeof WeakMap=="function"?WeakMap:Map,We=0,lt=null,$e=null,Ve=0,et=0,Gn=null,Ti=!1,ha=!1,Yd=!1,ii=0,xt=0,Ai=0,_s=0,Xd=0,Kn=0,da=0,Lo=null,Mn=null,Wd=!1,Ku=0,iv=0,Zu=1/0,Qu=null,Ri=null,Lt=0,Oi=null,pa=null,si=0,ep=0,tp=null,sv=null,zo=0,np=null;function Zn(){return(We&2)!==0&&Ve!==0?Ve&-Ve:B.T!==null?lp():w0()}function av(){if(Kn===0)if((Ve&536870912)===0||Ke){var s=ru;ru<<=1,(ru&3932160)===0&&(ru=262144),Kn=s}else Kn=536870912;return s=Vn.current,s!==null&&(s.flags|=32),Kn}function Ln(s,o,u){(s===lt&&(et===2||et===9)||s.cancelPendingCommit!==null)&&(ma(s,0),Ii(s,Ve,Kn,!1)),no(s,u),((We&2)===0||s!==lt)&&(s===lt&&((We&2)===0&&(_s|=u),xt===4&&Ii(s,Ve,Kn,!1)),Or(s))}function ov(s,o,u){if((We&6)!==0)throw Error(r(327));var d=!u&&(o&127)===0&&(o&s.expiredLanes)===0||to(s,o),g=d?PR(s,o):ip(s,o,!0),b=d;do{if(g===0){ha&&!d&&Ii(s,o,0,!1);break}else{if(u=s.current.alternate,b&&!LR(u)){g=ip(s,o,!1),b=!1;continue}if(g===2){if(b=o,s.errorRecoveryDisabledLanes&b)var x=0;else x=s.pendingLanes&-536870913,x=x!==0?x:x&536870912?536870912:0;if(x!==0){o=x;e:{var A=s;g=Lo;var j=A.current.memoizedState.isDehydrated;if(j&&(ma(A,x).flags|=256),x=ip(A,x,!1),x!==2){if(Yd&&!j){A.errorRecoveryDisabledLanes|=b,_s|=b,g=4;break e}b=Mn,Mn=g,b!==null&&(Mn===null?Mn=b:Mn.push.apply(Mn,b))}g=x}if(b=!1,g!==2)continue}}if(g===1){ma(s,0),Ii(s,o,0,!0);break}e:{switch(d=s,b=g,b){case 0:case 1:throw Error(r(345));case 4:if((o&4194048)!==o)break;case 6:Ii(d,o,Kn,!Ti);break e;case 2:Mn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((o&62914560)===o&&(g=Ku+300-Ae(),10<g)){if(Ii(d,o,Kn,!Ti),su(d,0,!0)!==0)break e;si=o,d.timeoutHandle=jv(lv.bind(null,d,u,Mn,Qu,Wd,o,Kn,_s,da,Ti,b,"Throttled",-0,0),g);break e}lv(d,u,Mn,Qu,Wd,o,Kn,_s,da,Ti,b,null,-0,0)}}break}while(!0);Or(s)}function lv(s,o,u,d,g,b,x,A,j,Y,ae,le,ee,te){if(s.timeoutHandle=-1,le=o.subtreeFlags,le&8192||(le&16785408)===16785408){le={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Vr},ev(o,b,le);var be=(b&62914560)===b?Ku-Ae():(b&4194048)===b?iv-Ae():0;if(be=bO(le,be),be!==null){si=b,s.cancelPendingCommit=be(gv.bind(null,s,o,b,u,d,g,x,A,j,ae,le,null,ee,te)),Ii(s,b,x,!Y);return}}gv(s,o,b,u,d,g,x,A,j)}function LR(s){for(var o=s;;){var u=o.tag;if((u===0||u===11||u===15)&&o.flags&16384&&(u=o.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var d=0;d<u.length;d++){var g=u[d],b=g.getSnapshot;g=g.value;try{if(!qn(b(),g))return!1}catch{return!1}}if(u=o.child,o.subtreeFlags&16384&&u!==null)u.return=o,o=u;else{if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Ii(s,o,u,d){o&=~Xd,o&=~_s,s.suspendedLanes|=o,s.pingedLanes&=~o,d&&(s.warmLanes|=o),d=s.expirationTimes;for(var g=o;0<g;){var b=31-ot(g),x=1<<b;d[b]=-1,g&=~x}u!==0&&_0(s,u,o)}function Ju(){return(We&6)===0?(Po(0),!1):!0}function rp(){if($e!==null){if(et===0)var s=$e.return;else s=$e,Zr=us=null,bd(s),sa=null,bo=0,s=$e;for(;s!==null;)Bb(s.alternate,s),s=s.return;$e=null}}function ma(s,o){var u=s.timeoutHandle;u!==-1&&(s.timeoutHandle=-1,tO(u)),u=s.cancelPendingCommit,u!==null&&(s.cancelPendingCommit=null,u()),si=0,rp(),lt=s,$e=u=Gr(s.current,null),Ve=o,et=0,Gn=null,Ti=!1,ha=to(s,o),Yd=!1,da=Kn=Xd=_s=Ai=xt=0,Mn=Lo=null,Wd=!1,(o&8)!==0&&(o|=o&32);var d=s.entangledLanes;if(d!==0)for(s=s.entanglements,d&=o;0<d;){var g=31-ot(d),b=1<<g;o|=s[g],d&=~b}return ii=o,yu(),u}function uv(s,o){Le=null,B.H=To,o===ia||o===ku?(o=k_(),et=3):o===od?(o=k_(),et=4):et=o===Ld?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,Gn=o,$e===null&&(xt=1,Bu(s,sr(o,s.current)))}function cv(){var s=Vn.current;return s===null?!0:(Ve&4194048)===Ve?ur===null:(Ve&62914560)===Ve||(Ve&536870912)!==0?s===ur:!1}function fv(){var s=B.H;return B.H=To,s===null?To:s}function hv(){var s=B.A;return B.A=DR,s}function Yu(){xt=4,Ti||(Ve&4194048)!==Ve&&Vn.current!==null||(ha=!0),(Ai&134217727)===0&&(_s&134217727)===0||lt===null||Ii(lt,Ve,Kn,!1)}function ip(s,o,u){var d=We;We|=2;var g=fv(),b=hv();(lt!==s||Ve!==o)&&(Qu=null,ma(s,o)),o=!1;var x=xt;e:do try{if(et!==0&&$e!==null){var A=$e,j=Gn;switch(et){case 8:rp(),x=6;break e;case 3:case 2:case 9:case 6:Vn.current===null&&(o=!0);var Y=et;if(et=0,Gn=null,ga(s,A,j,Y),u&&ha){x=0;break e}break;default:Y=et,et=0,Gn=null,ga(s,A,j,Y)}}zR(),x=xt;break}catch(ae){uv(s,ae)}while(!0);return o&&s.shellSuspendCounter++,Zr=us=null,We=d,B.H=g,B.A=b,$e===null&&(lt=null,Ve=0,yu()),x}function zR(){for(;$e!==null;)dv($e)}function PR(s,o){var u=We;We|=2;var d=fv(),g=hv();lt!==s||Ve!==o?(Qu=null,Zu=Ae()+500,ma(s,o)):ha=to(s,o);e:do try{if(et!==0&&$e!==null){o=$e;var b=Gn;t:switch(et){case 1:et=0,Gn=null,ga(s,o,b,1);break;case 2:case 9:if(S_(b)){et=0,Gn=null,pv(o);break}o=function(){et!==2&&et!==9||lt!==s||(et=7),Or(s)},b.then(o,o);break e;case 3:et=7;break e;case 4:et=5;break e;case 7:S_(b)?(et=0,Gn=null,pv(o)):(et=0,Gn=null,ga(s,o,b,7));break;case 5:var x=null;switch($e.tag){case 26:x=$e.memoizedState;case 5:case 27:var A=$e;if(x?Wv(x):A.stateNode.complete){et=0,Gn=null;var j=A.sibling;if(j!==null)$e=j;else{var Y=A.return;Y!==null?($e=Y,Xu(Y)):$e=null}break t}}et=0,Gn=null,ga(s,o,b,5);break;case 6:et=0,Gn=null,ga(s,o,b,6);break;case 8:rp(),xt=6;break e;default:throw Error(r(462))}}jR();break}catch(ae){uv(s,ae)}while(!0);return Zr=us=null,B.H=d,B.A=g,We=u,$e!==null?0:(lt=null,Ve=0,yu(),xt)}function jR(){for(;$e!==null&&!Be();)dv($e)}function dv(s){var o=Pb(s.alternate,s,ii);s.memoizedProps=s.pendingProps,o===null?Xu(s):$e=o}function pv(s){var o=s,u=o.alternate;switch(o.tag){case 15:case 0:o=Ib(u,o,o.pendingProps,o.type,void 0,Ve);break;case 11:o=Ib(u,o,o.pendingProps,o.type.render,o.ref,Ve);break;case 5:bd(o);default:Bb(u,o),o=$e=h_(o,ii),o=Pb(u,o,ii)}s.memoizedProps=s.pendingProps,o===null?Xu(s):$e=o}function ga(s,o,u,d){Zr=us=null,bd(o),sa=null,bo=0;var g=o.return;try{if(CR(s,g,o,u,Ve)){xt=1,Bu(s,sr(u,s.current)),$e=null;return}}catch(b){if(g!==null)throw $e=g,b;xt=1,Bu(s,sr(u,s.current)),$e=null;return}o.flags&32768?(Ke||d===1?s=!0:ha||(Ve&536870912)!==0?s=!1:(Ti=s=!0,(d===2||d===9||d===3||d===6)&&(d=Vn.current,d!==null&&d.tag===13&&(d.flags|=16384))),mv(o,s)):Xu(o)}function Xu(s){var o=s;do{if((o.flags&32768)!==0){mv(o,Ti);return}s=o.return;var u=RR(o.alternate,o,ii);if(u!==null){$e=u;return}if(o=o.sibling,o!==null){$e=o;return}$e=o=s}while(o!==null);xt===0&&(xt=5)}function mv(s,o){do{var u=OR(s.alternate,s);if(u!==null){u.flags&=32767,$e=u;return}if(u=s.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!o&&(s=s.sibling,s!==null)){$e=s;return}$e=s=u}while(s!==null);xt=6,$e=null}function gv(s,o,u,d,g,b,x,A,j){s.cancelPendingCommit=null;do Wu();while(Lt!==0);if((We&6)!==0)throw Error(r(327));if(o!==null){if(o===s.current)throw Error(r(177));if(b=o.lanes|o.childLanes,b|=Gh,yA(s,u,b,x,A,j),s===lt&&($e=lt=null,Ve=0),pa=o,Oi=s,si=u,ep=b,tp=g,sv=d,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,qR(_e,function(){return wv(),null})):(s.callbackNode=null,s.callbackPriority=0),d=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||d){d=B.T,B.T=null,g=K.p,K.p=2,x=We,We|=4;try{IR(s,o,u)}finally{We=x,K.p=g,B.T=d}}Lt=1,yv(),_v(),bv()}}function yv(){if(Lt===1){Lt=0;var s=Oi,o=pa,u=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||u){u=B.T,B.T=null;var d=K.p;K.p=2;var g=We;We|=4;try{Yb(o,s);var b=gp,x=r_(s.containerInfo),A=b.focusedElem,j=b.selectionRange;if(x!==A&&A&&A.ownerDocument&&n_(A.ownerDocument.documentElement,A)){if(j!==null&&$h(A)){var Y=j.start,ae=j.end;if(ae===void 0&&(ae=Y),"selectionStart"in A)A.selectionStart=Y,A.selectionEnd=Math.min(ae,A.value.length);else{var le=A.ownerDocument||document,ee=le&&le.defaultView||window;if(ee.getSelection){var te=ee.getSelection(),be=A.textContent.length,Oe=Math.min(j.start,be),st=j.end===void 0?Oe:Math.min(j.end,be);!te.extend&&Oe>st&&(x=st,st=Oe,Oe=x);var H=t_(A,Oe),U=t_(A,st);if(H&&U&&(te.rangeCount!==1||te.anchorNode!==H.node||te.anchorOffset!==H.offset||te.focusNode!==U.node||te.focusOffset!==U.offset)){var J=le.createRange();J.setStart(H.node,H.offset),te.removeAllRanges(),Oe>st?(te.addRange(J),te.extend(U.node,U.offset)):(J.setEnd(U.node,U.offset),te.addRange(J))}}}}for(le=[],te=A;te=te.parentNode;)te.nodeType===1&&le.push({element:te,left:te.scrollLeft,top:te.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<le.length;A++){var oe=le[A];oe.element.scrollLeft=oe.left,oe.element.scrollTop=oe.top}}fc=!!mp,gp=mp=null}finally{We=g,K.p=d,B.T=u}}s.current=o,Lt=2}}function _v(){if(Lt===2){Lt=0;var s=Oi,o=pa,u=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||u){u=B.T,B.T=null;var d=K.p;K.p=2;var g=We;We|=4;try{Gb(s,o.alternate,o)}finally{We=g,K.p=d,B.T=u}}Lt=3}}function bv(){if(Lt===4||Lt===3){Lt=0,Ue();var s=Oi,o=pa,u=si,d=sv;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?Lt=5:(Lt=0,pa=Oi=null,vv(s,s.pendingLanes));var g=s.pendingLanes;if(g===0&&(Ri=null),xh(u),o=o.stateNode,_t&&typeof _t.onCommitFiberRoot=="function")try{_t.onCommitFiberRoot(Ht,o,void 0,(o.current.flags&128)===128)}catch{}if(d!==null){o=B.T,g=K.p,K.p=2,B.T=null;try{for(var b=s.onRecoverableError,x=0;x<d.length;x++){var A=d[x];b(A.value,{componentStack:A.stack})}}finally{B.T=o,K.p=g}}(si&3)!==0&&Wu(),Or(s),g=s.pendingLanes,(u&261930)!==0&&(g&42)!==0?s===np?zo++:(zo=0,np=s):zo=0,Po(0)}}function vv(s,o){(s.pooledCacheLanes&=o)===0&&(o=s.pooledCache,o!=null&&(s.pooledCache=null,yo(o)))}function Wu(){return yv(),_v(),bv(),wv()}function wv(){if(Lt!==5)return!1;var s=Oi,o=ep;ep=0;var u=xh(si),d=B.T,g=K.p;try{K.p=32>u?32:u,B.T=null,u=tp,tp=null;var b=Oi,x=si;if(Lt=0,pa=Oi=null,si=0,(We&6)!==0)throw Error(r(331));var A=We;if(We|=4,nv(b.current),Wb(b,b.current,x,u),We=A,Po(0,!1),_t&&typeof _t.onPostCommitFiberRoot=="function")try{_t.onPostCommitFiberRoot(Ht,b)}catch{}return!0}finally{K.p=g,B.T=d,vv(s,o)}}function xv(s,o,u){o=sr(u,o),o=Md(s.stateNode,o,2),s=Si(s,o,2),s!==null&&(no(s,2),Or(s))}function tt(s,o,u){if(s.tag===3)xv(s,s,u);else for(;o!==null;){if(o.tag===3){xv(o,s,u);break}else if(o.tag===1){var d=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(Ri===null||!Ri.has(d))){s=sr(u,s),u=Sb(2),d=Si(o,u,2),d!==null&&(Eb(u,d,o,s),no(d,2),Or(d));break}}o=o.return}}function sp(s,o,u){var d=s.pingCache;if(d===null){d=s.pingCache=new MR;var g=new Set;d.set(o,g)}else g=d.get(o),g===void 0&&(g=new Set,d.set(o,g));g.has(u)||(Yd=!0,g.add(u),s=BR.bind(null,s,o,u),o.then(s,s))}function BR(s,o,u){var d=s.pingCache;d!==null&&d.delete(o),s.pingedLanes|=s.suspendedLanes&u,s.warmLanes&=~u,lt===s&&(Ve&u)===u&&(xt===4||xt===3&&(Ve&62914560)===Ve&&300>Ae()-Ku?(We&2)===0&&ma(s,0):Xd|=u,da===Ve&&(da=0)),Or(s)}function Sv(s,o){o===0&&(o=y0()),s=as(s,o),s!==null&&(no(s,o),Or(s))}function UR(s){var o=s.memoizedState,u=0;o!==null&&(u=o.retryLane),Sv(s,u)}function $R(s,o){var u=0;switch(s.tag){case 31:case 13:var d=s.stateNode,g=s.memoizedState;g!==null&&(u=g.retryLane);break;case 19:d=s.stateNode;break;case 22:d=s.stateNode._retryCache;break;default:throw Error(r(314))}d!==null&&d.delete(o),Sv(s,u)}function qR(s,o){return Tn(s,o)}var ec=null,ya=null,ap=!1,tc=!1,op=!1,Ni=0;function Or(s){s!==ya&&s.next===null&&(ya===null?ec=ya=s:ya=ya.next=s),tc=!0,ap||(ap=!0,VR())}function Po(s,o){if(!op&&tc){op=!0;do for(var u=!1,d=ec;d!==null;){if(s!==0){var g=d.pendingLanes;if(g===0)var b=0;else{var x=d.suspendedLanes,A=d.pingedLanes;b=(1<<31-ot(42|s)+1)-1,b&=g&~(x&~A),b=b&201326741?b&201326741|1:b?b|2:0}b!==0&&(u=!0,Tv(d,b))}else b=Ve,b=su(d,d===lt?b:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(b&3)===0||to(d,b)||(u=!0,Tv(d,b));d=d.next}while(u);op=!1}}function FR(){Ev()}function Ev(){tc=ap=!1;var s=0;Ni!==0&&eO()&&(s=Ni);for(var o=Ae(),u=null,d=ec;d!==null;){var g=d.next,b=kv(d,o);b===0?(d.next=null,u===null?ec=g:u.next=g,g===null&&(ya=u)):(u=d,(s!==0||(b&3)!==0)&&(tc=!0)),d=g}Lt!==0&&Lt!==5||Po(s),Ni!==0&&(Ni=0)}function kv(s,o){for(var u=s.suspendedLanes,d=s.pingedLanes,g=s.expirationTimes,b=s.pendingLanes&-62914561;0<b;){var x=31-ot(b),A=1<<x,j=g[x];j===-1?((A&u)===0||(A&d)!==0)&&(g[x]=gA(A,o)):j<=o&&(s.expiredLanes|=A),b&=~A}if(o=lt,u=Ve,u=su(s,s===o?u:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),d=s.callbackNode,u===0||s===o&&(et===2||et===9)||s.cancelPendingCommit!==null)return d!==null&&d!==null&&ye(d),s.callbackNode=null,s.callbackPriority=0;if((u&3)===0||to(s,u)){if(o=u&-u,o===s.callbackPriority)return o;switch(d!==null&&ye(d),xh(u)){case 2:case 8:u=ue;break;case 32:u=_e;break;case 268435456:u=Ie;break;default:u=_e}return d=Cv.bind(null,s),u=Tn(u,d),s.callbackPriority=o,s.callbackNode=u,o}return d!==null&&d!==null&&ye(d),s.callbackPriority=2,s.callbackNode=null,2}function Cv(s,o){if(Lt!==0&&Lt!==5)return s.callbackNode=null,s.callbackPriority=0,null;var u=s.callbackNode;if(Wu()&&s.callbackNode!==u)return null;var d=Ve;return d=su(s,s===lt?d:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),d===0?null:(ov(s,d,o),kv(s,Ae()),s.callbackNode!=null&&s.callbackNode===u?Cv.bind(null,s):null)}function Tv(s,o){if(Wu())return null;ov(s,o,!0)}function VR(){nO(function(){(We&6)!==0?Tn(ne,FR):Ev()})}function lp(){if(Ni===0){var s=na;s===0&&(s=nu,nu<<=1,(nu&261888)===0&&(nu=256)),Ni=s}return Ni}function Av(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:uu(""+s)}function Rv(s,o){var u=o.ownerDocument.createElement("input");return u.name=o.name,u.value=o.value,s.id&&u.setAttribute("form",s.id),o.parentNode.insertBefore(u,o),s=new FormData(s),u.parentNode.removeChild(u),s}function HR(s,o,u,d,g){if(o==="submit"&&u&&u.stateNode===g){var b=Av((g[Rn]||null).action),x=d.submitter;x&&(o=(o=x[Rn]||null)?Av(o.formAction):x.getAttribute("formAction"),o!==null&&(b=o,x=null));var A=new du("action","action",null,d,g);s.push({event:A,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(Ni!==0){var j=x?Rv(g,x):new FormData(g);Ad(u,{pending:!0,data:j,method:g.method,action:b},null,j)}}else typeof b=="function"&&(A.preventDefault(),j=x?Rv(g,x):new FormData(g),Ad(u,{pending:!0,data:j,method:g.method,action:b},b,j))},currentTarget:g}]})}}for(var up=0;up<Hh.length;up++){var cp=Hh[up],GR=cp.toLowerCase(),KR=cp[0].toUpperCase()+cp.slice(1);wr(GR,"on"+KR)}wr(a_,"onAnimationEnd"),wr(o_,"onAnimationIteration"),wr(l_,"onAnimationStart"),wr("dblclick","onDoubleClick"),wr("focusin","onFocus"),wr("focusout","onBlur"),wr(uR,"onTransitionRun"),wr(cR,"onTransitionStart"),wr(fR,"onTransitionCancel"),wr(u_,"onTransitionEnd"),qs("onMouseEnter",["mouseout","mouseover"]),qs("onMouseLeave",["mouseout","mouseover"]),qs("onPointerEnter",["pointerout","pointerover"]),qs("onPointerLeave",["pointerout","pointerover"]),ns("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ns("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ns("onBeforeInput",["compositionend","keypress","textInput","paste"]),ns("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ns("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ns("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var jo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ZR=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(jo));function Ov(s,o){o=(o&4)!==0;for(var u=0;u<s.length;u++){var d=s[u],g=d.event;d=d.listeners;e:{var b=void 0;if(o)for(var x=d.length-1;0<=x;x--){var A=d[x],j=A.instance,Y=A.currentTarget;if(A=A.listener,j!==b&&g.isPropagationStopped())break e;b=A,g.currentTarget=Y;try{b(g)}catch(ae){gu(ae)}g.currentTarget=null,b=j}else for(x=0;x<d.length;x++){if(A=d[x],j=A.instance,Y=A.currentTarget,A=A.listener,j!==b&&g.isPropagationStopped())break e;b=A,g.currentTarget=Y;try{b(g)}catch(ae){gu(ae)}g.currentTarget=null,b=j}}}}function qe(s,o){var u=o[Sh];u===void 0&&(u=o[Sh]=new Set);var d=s+"__bubble";u.has(d)||(Iv(o,s,2,!1),u.add(d))}function fp(s,o,u){var d=0;o&&(d|=4),Iv(u,s,d,o)}var nc="_reactListening"+Math.random().toString(36).slice(2);function hp(s){if(!s[nc]){s[nc]=!0,E0.forEach(function(u){u!=="selectionchange"&&(ZR.has(u)||fp(u,!1,s),fp(u,!0,s))});var o=s.nodeType===9?s:s.ownerDocument;o===null||o[nc]||(o[nc]=!0,fp("selectionchange",!1,o))}}function Iv(s,o,u,d){switch(aw(o)){case 2:var g=xO;break;case 8:g=SO;break;default:g=Tp}u=g.bind(null,o,u,s),g=void 0,!Nh||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(g=!0),d?g!==void 0?s.addEventListener(o,u,{capture:!0,passive:g}):s.addEventListener(o,u,!0):g!==void 0?s.addEventListener(o,u,{passive:g}):s.addEventListener(o,u,!1)}function dp(s,o,u,d,g){var b=d;if((o&1)===0&&(o&2)===0&&d!==null)e:for(;;){if(d===null)return;var x=d.tag;if(x===3||x===4){var A=d.stateNode.containerInfo;if(A===g)break;if(x===4)for(x=d.return;x!==null;){var j=x.tag;if((j===3||j===4)&&x.stateNode.containerInfo===g)return;x=x.return}for(;A!==null;){if(x=Bs(A),x===null)return;if(j=x.tag,j===5||j===6||j===26||j===27){d=b=x;continue e}A=A.parentNode}}d=d.return}z0(function(){var Y=b,ae=Oh(u),le=[];e:{var ee=c_.get(s);if(ee!==void 0){var te=du,be=s;switch(s){case"keypress":if(fu(u)===0)break e;case"keydown":case"keyup":te=$A;break;case"focusin":be="focus",te=zh;break;case"focusout":be="blur",te=zh;break;case"beforeblur":case"afterblur":te=zh;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":te=B0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":te=RA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":te=VA;break;case a_:case o_:case l_:te=NA;break;case u_:te=GA;break;case"scroll":case"scrollend":te=TA;break;case"wheel":te=ZA;break;case"copy":case"cut":case"paste":te=MA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":te=$0;break;case"toggle":case"beforetoggle":te=JA}var Oe=(o&4)!==0,st=!Oe&&(s==="scroll"||s==="scrollend"),H=Oe?ee!==null?ee+"Capture":null:ee;Oe=[];for(var U=Y,J;U!==null;){var oe=U;if(J=oe.stateNode,oe=oe.tag,oe!==5&&oe!==26&&oe!==27||J===null||H===null||(oe=so(U,H),oe!=null&&Oe.push(Bo(U,oe,J))),st)break;U=U.return}0<Oe.length&&(ee=new te(ee,be,null,u,ae),le.push({event:ee,listeners:Oe}))}}if((o&7)===0){e:{if(ee=s==="mouseover"||s==="pointerover",te=s==="mouseout"||s==="pointerout",ee&&u!==Rh&&(be=u.relatedTarget||u.fromElement)&&(Bs(be)||be[js]))break e;if((te||ee)&&(ee=ae.window===ae?ae:(ee=ae.ownerDocument)?ee.defaultView||ee.parentWindow:window,te?(be=u.relatedTarget||u.toElement,te=Y,be=be?Bs(be):null,be!==null&&(st=a(be),Oe=be.tag,be!==st||Oe!==5&&Oe!==27&&Oe!==6)&&(be=null)):(te=null,be=Y),te!==be)){if(Oe=B0,oe="onMouseLeave",H="onMouseEnter",U="mouse",(s==="pointerout"||s==="pointerover")&&(Oe=$0,oe="onPointerLeave",H="onPointerEnter",U="pointer"),st=te==null?ee:io(te),J=be==null?ee:io(be),ee=new Oe(oe,U+"leave",te,u,ae),ee.target=st,ee.relatedTarget=J,oe=null,Bs(ae)===Y&&(Oe=new Oe(H,U+"enter",be,u,ae),Oe.target=J,Oe.relatedTarget=st,oe=Oe),st=oe,te&&be)t:{for(Oe=QR,H=te,U=be,J=0,oe=H;oe;oe=Oe(oe))J++;oe=0;for(var Ce=U;Ce;Ce=Oe(Ce))oe++;for(;0<J-oe;)H=Oe(H),J--;for(;0<oe-J;)U=Oe(U),oe--;for(;J--;){if(H===U||U!==null&&H===U.alternate){Oe=H;break t}H=Oe(H),U=Oe(U)}Oe=null}else Oe=null;te!==null&&Nv(le,ee,te,Oe,!1),be!==null&&st!==null&&Nv(le,st,be,Oe,!0)}}e:{if(ee=Y?io(Y):window,te=ee.nodeName&&ee.nodeName.toLowerCase(),te==="select"||te==="input"&&ee.type==="file")var Je=Q0;else if(K0(ee))if(J0)Je=aR;else{Je=iR;var xe=rR}else te=ee.nodeName,!te||te.toLowerCase()!=="input"||ee.type!=="checkbox"&&ee.type!=="radio"?Y&&Ah(Y.elementType)&&(Je=Q0):Je=sR;if(Je&&(Je=Je(s,Y))){Z0(le,Je,u,ae);break e}xe&&xe(s,ee,Y),s==="focusout"&&Y&&ee.type==="number"&&Y.memoizedProps.value!=null&&Th(ee,"number",ee.value)}switch(xe=Y?io(Y):window,s){case"focusin":(K0(xe)||xe.contentEditable==="true")&&(Zs=xe,qh=Y,po=null);break;case"focusout":po=qh=Zs=null;break;case"mousedown":Fh=!0;break;case"contextmenu":case"mouseup":case"dragend":Fh=!1,i_(le,u,ae);break;case"selectionchange":if(lR)break;case"keydown":case"keyup":i_(le,u,ae)}var ze;if(jh)e:{switch(s){case"compositionstart":var He="onCompositionStart";break e;case"compositionend":He="onCompositionEnd";break e;case"compositionupdate":He="onCompositionUpdate";break e}He=void 0}else Ks?H0(s,u)&&(He="onCompositionEnd"):s==="keydown"&&u.keyCode===229&&(He="onCompositionStart");He&&(q0&&u.locale!=="ko"&&(Ks||He!=="onCompositionStart"?He==="onCompositionEnd"&&Ks&&(ze=P0()):(gi=ae,Dh="value"in gi?gi.value:gi.textContent,Ks=!0)),xe=rc(Y,He),0<xe.length&&(He=new U0(He,s,null,u,ae),le.push({event:He,listeners:xe}),ze?He.data=ze:(ze=G0(u),ze!==null&&(He.data=ze)))),(ze=XA?WA(s,u):eR(s,u))&&(He=rc(Y,"onBeforeInput"),0<He.length&&(xe=new U0("onBeforeInput","beforeinput",null,u,ae),le.push({event:xe,listeners:He}),xe.data=ze)),HR(le,s,Y,u,ae)}Ov(le,o)})}function Bo(s,o,u){return{instance:s,listener:o,currentTarget:u}}function rc(s,o){for(var u=o+"Capture",d=[];s!==null;){var g=s,b=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||b===null||(g=so(s,u),g!=null&&d.unshift(Bo(s,g,b)),g=so(s,o),g!=null&&d.push(Bo(s,g,b))),s.tag===3)return d;s=s.return}return[]}function QR(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function Nv(s,o,u,d,g){for(var b=o._reactName,x=[];u!==null&&u!==d;){var A=u,j=A.alternate,Y=A.stateNode;if(A=A.tag,j!==null&&j===d)break;A!==5&&A!==26&&A!==27||Y===null||(j=Y,g?(Y=so(u,b),Y!=null&&x.unshift(Bo(u,Y,j))):g||(Y=so(u,b),Y!=null&&x.push(Bo(u,Y,j)))),u=u.return}x.length!==0&&s.push({event:o,listeners:x})}var JR=/\r\n?/g,YR=/\u0000|\uFFFD/g;function Dv(s){return(typeof s=="string"?s:""+s).replace(JR,`
`).replace(YR,"")}function Mv(s,o){return o=Dv(o),Dv(s)===o}function it(s,o,u,d,g,b){switch(u){case"children":typeof d=="string"?o==="body"||o==="textarea"&&d===""||Vs(s,d):(typeof d=="number"||typeof d=="bigint")&&o!=="body"&&Vs(s,""+d);break;case"className":ou(s,"class",d);break;case"tabIndex":ou(s,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":ou(s,u,d);break;case"style":M0(s,d,b);break;case"data":if(o!=="object"){ou(s,"data",d);break}case"src":case"href":if(d===""&&(o!=="a"||u!=="href")){s.removeAttribute(u);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){s.removeAttribute(u);break}d=uu(""+d),s.setAttribute(u,d);break;case"action":case"formAction":if(typeof d=="function"){s.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof b=="function"&&(u==="formAction"?(o!=="input"&&it(s,o,"name",g.name,g,null),it(s,o,"formEncType",g.formEncType,g,null),it(s,o,"formMethod",g.formMethod,g,null),it(s,o,"formTarget",g.formTarget,g,null)):(it(s,o,"encType",g.encType,g,null),it(s,o,"method",g.method,g,null),it(s,o,"target",g.target,g,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){s.removeAttribute(u);break}d=uu(""+d),s.setAttribute(u,d);break;case"onClick":d!=null&&(s.onclick=Vr);break;case"onScroll":d!=null&&qe("scroll",s);break;case"onScrollEnd":d!=null&&qe("scrollend",s);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(r(61));if(u=d.__html,u!=null){if(g.children!=null)throw Error(r(60));s.innerHTML=u}}break;case"multiple":s.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":s.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){s.removeAttribute("xlink:href");break}u=uu(""+d),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?s.setAttribute(u,""+d):s.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?s.setAttribute(u,""):s.removeAttribute(u);break;case"capture":case"download":d===!0?s.setAttribute(u,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?s.setAttribute(u,d):s.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?s.setAttribute(u,d):s.removeAttribute(u);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?s.removeAttribute(u):s.setAttribute(u,d);break;case"popover":qe("beforetoggle",s),qe("toggle",s),au(s,"popover",d);break;case"xlinkActuate":Fr(s,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":Fr(s,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":Fr(s,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":Fr(s,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":Fr(s,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":Fr(s,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":Fr(s,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":Fr(s,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":Fr(s,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":au(s,"is",d);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=kA.get(u)||u,au(s,u,d))}}function pp(s,o,u,d,g,b){switch(u){case"style":M0(s,d,b);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(r(61));if(u=d.__html,u!=null){if(g.children!=null)throw Error(r(60));s.innerHTML=u}}break;case"children":typeof d=="string"?Vs(s,d):(typeof d=="number"||typeof d=="bigint")&&Vs(s,""+d);break;case"onScroll":d!=null&&qe("scroll",s);break;case"onScrollEnd":d!=null&&qe("scrollend",s);break;case"onClick":d!=null&&(s.onclick=Vr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!k0.hasOwnProperty(u))e:{if(u[0]==="o"&&u[1]==="n"&&(g=u.endsWith("Capture"),o=u.slice(2,g?u.length-7:void 0),b=s[Rn]||null,b=b!=null?b[u]:null,typeof b=="function"&&s.removeEventListener(o,b,g),typeof d=="function")){typeof b!="function"&&b!==null&&(u in s?s[u]=null:s.hasAttribute(u)&&s.removeAttribute(u)),s.addEventListener(o,d,g);break e}u in s?s[u]=d:d===!0?s.setAttribute(u,""):au(s,u,d)}}}function rn(s,o,u){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":qe("error",s),qe("load",s);var d=!1,g=!1,b;for(b in u)if(u.hasOwnProperty(b)){var x=u[b];if(x!=null)switch(b){case"src":d=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,o));default:it(s,o,b,x,u,null)}}g&&it(s,o,"srcSet",u.srcSet,u,null),d&&it(s,o,"src",u.src,u,null);return;case"input":qe("invalid",s);var A=b=x=g=null,j=null,Y=null;for(d in u)if(u.hasOwnProperty(d)){var ae=u[d];if(ae!=null)switch(d){case"name":g=ae;break;case"type":x=ae;break;case"checked":j=ae;break;case"defaultChecked":Y=ae;break;case"value":b=ae;break;case"defaultValue":A=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(r(137,o));break;default:it(s,o,d,ae,u,null)}}O0(s,b,A,j,Y,x,g,!1);return;case"select":qe("invalid",s),d=x=b=null;for(g in u)if(u.hasOwnProperty(g)&&(A=u[g],A!=null))switch(g){case"value":b=A;break;case"defaultValue":x=A;break;case"multiple":d=A;default:it(s,o,g,A,u,null)}o=b,u=x,s.multiple=!!d,o!=null?Fs(s,!!d,o,!1):u!=null&&Fs(s,!!d,u,!0);return;case"textarea":qe("invalid",s),b=g=d=null;for(x in u)if(u.hasOwnProperty(x)&&(A=u[x],A!=null))switch(x){case"value":d=A;break;case"defaultValue":g=A;break;case"children":b=A;break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(r(91));break;default:it(s,o,x,A,u,null)}N0(s,d,g,b);return;case"option":for(j in u)u.hasOwnProperty(j)&&(d=u[j],d!=null)&&(j==="selected"?s.selected=d&&typeof d!="function"&&typeof d!="symbol":it(s,o,j,d,u,null));return;case"dialog":qe("beforetoggle",s),qe("toggle",s),qe("cancel",s),qe("close",s);break;case"iframe":case"object":qe("load",s);break;case"video":case"audio":for(d=0;d<jo.length;d++)qe(jo[d],s);break;case"image":qe("error",s),qe("load",s);break;case"details":qe("toggle",s);break;case"embed":case"source":case"link":qe("error",s),qe("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Y in u)if(u.hasOwnProperty(Y)&&(d=u[Y],d!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,o));default:it(s,o,Y,d,u,null)}return;default:if(Ah(o)){for(ae in u)u.hasOwnProperty(ae)&&(d=u[ae],d!==void 0&&pp(s,o,ae,d,u,void 0));return}}for(A in u)u.hasOwnProperty(A)&&(d=u[A],d!=null&&it(s,o,A,d,u,null))}function XR(s,o,u,d){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,b=null,x=null,A=null,j=null,Y=null,ae=null;for(te in u){var le=u[te];if(u.hasOwnProperty(te)&&le!=null)switch(te){case"checked":break;case"value":break;case"defaultValue":j=le;default:d.hasOwnProperty(te)||it(s,o,te,null,d,le)}}for(var ee in d){var te=d[ee];if(le=u[ee],d.hasOwnProperty(ee)&&(te!=null||le!=null))switch(ee){case"type":b=te;break;case"name":g=te;break;case"checked":Y=te;break;case"defaultChecked":ae=te;break;case"value":x=te;break;case"defaultValue":A=te;break;case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(r(137,o));break;default:te!==le&&it(s,o,ee,te,d,le)}}Ch(s,x,A,j,Y,ae,b,g);return;case"select":te=x=A=ee=null;for(b in u)if(j=u[b],u.hasOwnProperty(b)&&j!=null)switch(b){case"value":break;case"multiple":te=j;default:d.hasOwnProperty(b)||it(s,o,b,null,d,j)}for(g in d)if(b=d[g],j=u[g],d.hasOwnProperty(g)&&(b!=null||j!=null))switch(g){case"value":ee=b;break;case"defaultValue":A=b;break;case"multiple":x=b;default:b!==j&&it(s,o,g,b,d,j)}o=A,u=x,d=te,ee!=null?Fs(s,!!u,ee,!1):!!d!=!!u&&(o!=null?Fs(s,!!u,o,!0):Fs(s,!!u,u?[]:"",!1));return;case"textarea":te=ee=null;for(A in u)if(g=u[A],u.hasOwnProperty(A)&&g!=null&&!d.hasOwnProperty(A))switch(A){case"value":break;case"children":break;default:it(s,o,A,null,d,g)}for(x in d)if(g=d[x],b=u[x],d.hasOwnProperty(x)&&(g!=null||b!=null))switch(x){case"value":ee=g;break;case"defaultValue":te=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(r(91));break;default:g!==b&&it(s,o,x,g,d,b)}I0(s,ee,te);return;case"option":for(var be in u)ee=u[be],u.hasOwnProperty(be)&&ee!=null&&!d.hasOwnProperty(be)&&(be==="selected"?s.selected=!1:it(s,o,be,null,d,ee));for(j in d)ee=d[j],te=u[j],d.hasOwnProperty(j)&&ee!==te&&(ee!=null||te!=null)&&(j==="selected"?s.selected=ee&&typeof ee!="function"&&typeof ee!="symbol":it(s,o,j,ee,d,te));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Oe in u)ee=u[Oe],u.hasOwnProperty(Oe)&&ee!=null&&!d.hasOwnProperty(Oe)&&it(s,o,Oe,null,d,ee);for(Y in d)if(ee=d[Y],te=u[Y],d.hasOwnProperty(Y)&&ee!==te&&(ee!=null||te!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(r(137,o));break;default:it(s,o,Y,ee,d,te)}return;default:if(Ah(o)){for(var st in u)ee=u[st],u.hasOwnProperty(st)&&ee!==void 0&&!d.hasOwnProperty(st)&&pp(s,o,st,void 0,d,ee);for(ae in d)ee=d[ae],te=u[ae],!d.hasOwnProperty(ae)||ee===te||ee===void 0&&te===void 0||pp(s,o,ae,ee,d,te);return}}for(var H in u)ee=u[H],u.hasOwnProperty(H)&&ee!=null&&!d.hasOwnProperty(H)&&it(s,o,H,null,d,ee);for(le in d)ee=d[le],te=u[le],!d.hasOwnProperty(le)||ee===te||ee==null&&te==null||it(s,o,le,ee,d,te)}function Lv(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function WR(){if(typeof performance.getEntriesByType=="function"){for(var s=0,o=0,u=performance.getEntriesByType("resource"),d=0;d<u.length;d++){var g=u[d],b=g.transferSize,x=g.initiatorType,A=g.duration;if(b&&A&&Lv(x)){for(x=0,A=g.responseEnd,d+=1;d<u.length;d++){var j=u[d],Y=j.startTime;if(Y>A)break;var ae=j.transferSize,le=j.initiatorType;ae&&Lv(le)&&(j=j.responseEnd,x+=ae*(j<A?1:(A-Y)/(j-Y)))}if(--d,o+=8*(b+x)/(g.duration/1e3),s++,10<s)break}}if(0<s)return o/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var mp=null,gp=null;function ic(s){return s.nodeType===9?s:s.ownerDocument}function zv(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Pv(s,o){if(s===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&o==="foreignObject"?0:s}function yp(s,o){return s==="textarea"||s==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var _p=null;function eO(){var s=window.event;return s&&s.type==="popstate"?s===_p?!1:(_p=s,!0):(_p=null,!1)}var jv=typeof setTimeout=="function"?setTimeout:void 0,tO=typeof clearTimeout=="function"?clearTimeout:void 0,Bv=typeof Promise=="function"?Promise:void 0,nO=typeof queueMicrotask=="function"?queueMicrotask:typeof Bv<"u"?function(s){return Bv.resolve(null).then(s).catch(rO)}:jv;function rO(s){setTimeout(function(){throw s})}function Di(s){return s==="head"}function Uv(s,o){var u=o,d=0;do{var g=u.nextSibling;if(s.removeChild(u),g&&g.nodeType===8)if(u=g.data,u==="/$"||u==="/&"){if(d===0){s.removeChild(g),wa(o);return}d--}else if(u==="$"||u==="$?"||u==="$~"||u==="$!"||u==="&")d++;else if(u==="html")Uo(s.ownerDocument.documentElement);else if(u==="head"){u=s.ownerDocument.head,Uo(u);for(var b=u.firstChild;b;){var x=b.nextSibling,A=b.nodeName;b[ro]||A==="SCRIPT"||A==="STYLE"||A==="LINK"&&b.rel.toLowerCase()==="stylesheet"||u.removeChild(b),b=x}}else u==="body"&&Uo(s.ownerDocument.body);u=g}while(u);wa(o)}function $v(s,o){var u=s;s=0;do{var d=u.nextSibling;if(u.nodeType===1?o?(u._stashedDisplay=u.style.display,u.style.display="none"):(u.style.display=u._stashedDisplay||"",u.getAttribute("style")===""&&u.removeAttribute("style")):u.nodeType===3&&(o?(u._stashedText=u.nodeValue,u.nodeValue=""):u.nodeValue=u._stashedText||""),d&&d.nodeType===8)if(u=d.data,u==="/$"){if(s===0)break;s--}else u!=="$"&&u!=="$?"&&u!=="$~"&&u!=="$!"||s++;u=d}while(u)}function bp(s){var o=s.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var u=o;switch(o=o.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":bp(u),Eh(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}s.removeChild(u)}}function iO(s,o,u,d){for(;s.nodeType===1;){var g=u;if(s.nodeName.toLowerCase()!==o.toLowerCase()){if(!d&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(d){if(!s[ro])switch(o){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(b=s.getAttribute("rel"),b==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(b!==g.rel||s.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||s.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||s.getAttribute("title")!==(g.title==null?null:g.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(b=s.getAttribute("src"),(b!==(g.src==null?null:g.src)||s.getAttribute("type")!==(g.type==null?null:g.type)||s.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&b&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(o==="input"&&s.type==="hidden"){var b=g.name==null?null:""+g.name;if(g.type==="hidden"&&s.getAttribute("name")===b)return s}else return s;if(s=cr(s.nextSibling),s===null)break}return null}function sO(s,o,u){if(o==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!u||(s=cr(s.nextSibling),s===null))return null;return s}function qv(s,o){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!o||(s=cr(s.nextSibling),s===null))return null;return s}function vp(s){return s.data==="$?"||s.data==="$~"}function wp(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function aO(s,o){var u=s.ownerDocument;if(s.data==="$~")s._reactRetry=o;else if(s.data!=="$?"||u.readyState!=="loading")o();else{var d=function(){o(),u.removeEventListener("DOMContentLoaded",d)};u.addEventListener("DOMContentLoaded",d),s._reactRetry=d}}function cr(s){for(;s!=null;s=s.nextSibling){var o=s.nodeType;if(o===1||o===3)break;if(o===8){if(o=s.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return s}var xp=null;function Fv(s){s=s.nextSibling;for(var o=0;s;){if(s.nodeType===8){var u=s.data;if(u==="/$"||u==="/&"){if(o===0)return cr(s.nextSibling);o--}else u!=="$"&&u!=="$!"&&u!=="$?"&&u!=="$~"&&u!=="&"||o++}s=s.nextSibling}return null}function Vv(s){s=s.previousSibling;for(var o=0;s;){if(s.nodeType===8){var u=s.data;if(u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"){if(o===0)return s;o--}else u!=="/$"&&u!=="/&"||o++}s=s.previousSibling}return null}function Hv(s,o,u){switch(o=ic(u),s){case"html":if(s=o.documentElement,!s)throw Error(r(452));return s;case"head":if(s=o.head,!s)throw Error(r(453));return s;case"body":if(s=o.body,!s)throw Error(r(454));return s;default:throw Error(r(451))}}function Uo(s){for(var o=s.attributes;o.length;)s.removeAttributeNode(o[0]);Eh(s)}var fr=new Map,Gv=new Set;function sc(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var ai=K.d;K.d={f:oO,r:lO,D:uO,C:cO,L:fO,m:hO,X:pO,S:dO,M:mO};function oO(){var s=ai.f(),o=Ju();return s||o}function lO(s){var o=Us(s);o!==null&&o.tag===5&&o.type==="form"?ub(o):ai.r(s)}var _a=typeof document>"u"?null:document;function Kv(s,o,u){var d=_a;if(d&&typeof o=="string"&&o){var g=rr(o);g='link[rel="'+s+'"][href="'+g+'"]',typeof u=="string"&&(g+='[crossorigin="'+u+'"]'),Gv.has(g)||(Gv.add(g),s={rel:s,crossOrigin:u,href:o},d.querySelector(g)===null&&(o=d.createElement("link"),rn(o,"link",s),Gt(o),d.head.appendChild(o)))}}function uO(s){ai.D(s),Kv("dns-prefetch",s,null)}function cO(s,o){ai.C(s,o),Kv("preconnect",s,o)}function fO(s,o,u){ai.L(s,o,u);var d=_a;if(d&&s&&o){var g='link[rel="preload"][as="'+rr(o)+'"]';o==="image"&&u&&u.imageSrcSet?(g+='[imagesrcset="'+rr(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(g+='[imagesizes="'+rr(u.imageSizes)+'"]')):g+='[href="'+rr(s)+'"]';var b=g;switch(o){case"style":b=ba(s);break;case"script":b=va(s)}fr.has(b)||(s=p({rel:"preload",href:o==="image"&&u&&u.imageSrcSet?void 0:s,as:o},u),fr.set(b,s),d.querySelector(g)!==null||o==="style"&&d.querySelector($o(b))||o==="script"&&d.querySelector(qo(b))||(o=d.createElement("link"),rn(o,"link",s),Gt(o),d.head.appendChild(o)))}}function hO(s,o){ai.m(s,o);var u=_a;if(u&&s){var d=o&&typeof o.as=="string"?o.as:"script",g='link[rel="modulepreload"][as="'+rr(d)+'"][href="'+rr(s)+'"]',b=g;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":b=va(s)}if(!fr.has(b)&&(s=p({rel:"modulepreload",href:s},o),fr.set(b,s),u.querySelector(g)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(qo(b)))return}d=u.createElement("link"),rn(d,"link",s),Gt(d),u.head.appendChild(d)}}}function dO(s,o,u){ai.S(s,o,u);var d=_a;if(d&&s){var g=$s(d).hoistableStyles,b=ba(s);o=o||"default";var x=g.get(b);if(!x){var A={loading:0,preload:null};if(x=d.querySelector($o(b)))A.loading=5;else{s=p({rel:"stylesheet",href:s,"data-precedence":o},u),(u=fr.get(b))&&Sp(s,u);var j=x=d.createElement("link");Gt(j),rn(j,"link",s),j._p=new Promise(function(Y,ae){j.onload=Y,j.onerror=ae}),j.addEventListener("load",function(){A.loading|=1}),j.addEventListener("error",function(){A.loading|=2}),A.loading|=4,ac(x,o,d)}x={type:"stylesheet",instance:x,count:1,state:A},g.set(b,x)}}}function pO(s,o){ai.X(s,o);var u=_a;if(u&&s){var d=$s(u).hoistableScripts,g=va(s),b=d.get(g);b||(b=u.querySelector(qo(g)),b||(s=p({src:s,async:!0},o),(o=fr.get(g))&&Ep(s,o),b=u.createElement("script"),Gt(b),rn(b,"link",s),u.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},d.set(g,b))}}function mO(s,o){ai.M(s,o);var u=_a;if(u&&s){var d=$s(u).hoistableScripts,g=va(s),b=d.get(g);b||(b=u.querySelector(qo(g)),b||(s=p({src:s,async:!0,type:"module"},o),(o=fr.get(g))&&Ep(s,o),b=u.createElement("script"),Gt(b),rn(b,"link",s),u.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},d.set(g,b))}}function Zv(s,o,u,d){var g=(g=ge.current)?sc(g):null;if(!g)throw Error(r(446));switch(s){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(o=ba(u.href),u=$s(g).hoistableStyles,d=u.get(o),d||(d={type:"style",instance:null,count:0,state:null},u.set(o,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){s=ba(u.href);var b=$s(g).hoistableStyles,x=b.get(s);if(x||(g=g.ownerDocument||g,x={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},b.set(s,x),(b=g.querySelector($o(s)))&&!b._p&&(x.instance=b,x.state.loading=5),fr.has(s)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},fr.set(s,u),b||gO(g,s,u,x.state))),o&&d===null)throw Error(r(528,""));return x}if(o&&d!==null)throw Error(r(529,""));return null;case"script":return o=u.async,u=u.src,typeof u=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=va(u),u=$s(g).hoistableScripts,d=u.get(o),d||(d={type:"script",instance:null,count:0,state:null},u.set(o,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,s))}}function ba(s){return'href="'+rr(s)+'"'}function $o(s){return'link[rel="stylesheet"]['+s+"]"}function Qv(s){return p({},s,{"data-precedence":s.precedence,precedence:null})}function gO(s,o,u,d){s.querySelector('link[rel="preload"][as="style"]['+o+"]")?d.loading=1:(o=s.createElement("link"),d.preload=o,o.addEventListener("load",function(){return d.loading|=1}),o.addEventListener("error",function(){return d.loading|=2}),rn(o,"link",u),Gt(o),s.head.appendChild(o))}function va(s){return'[src="'+rr(s)+'"]'}function qo(s){return"script[async]"+s}function Jv(s,o,u){if(o.count++,o.instance===null)switch(o.type){case"style":var d=s.querySelector('style[data-href~="'+rr(u.href)+'"]');if(d)return o.instance=d,Gt(d),d;var g=p({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return d=(s.ownerDocument||s).createElement("style"),Gt(d),rn(d,"style",g),ac(d,u.precedence,s),o.instance=d;case"stylesheet":g=ba(u.href);var b=s.querySelector($o(g));if(b)return o.state.loading|=4,o.instance=b,Gt(b),b;d=Qv(u),(g=fr.get(g))&&Sp(d,g),b=(s.ownerDocument||s).createElement("link"),Gt(b);var x=b;return x._p=new Promise(function(A,j){x.onload=A,x.onerror=j}),rn(b,"link",d),o.state.loading|=4,ac(b,u.precedence,s),o.instance=b;case"script":return b=va(u.src),(g=s.querySelector(qo(b)))?(o.instance=g,Gt(g),g):(d=u,(g=fr.get(b))&&(d=p({},u),Ep(d,g)),s=s.ownerDocument||s,g=s.createElement("script"),Gt(g),rn(g,"link",d),s.head.appendChild(g),o.instance=g);case"void":return null;default:throw Error(r(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(d=o.instance,o.state.loading|=4,ac(d,u.precedence,s));return o.instance}function ac(s,o,u){for(var d=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=d.length?d[d.length-1]:null,b=g,x=0;x<d.length;x++){var A=d[x];if(A.dataset.precedence===o)b=A;else if(b!==g)break}b?b.parentNode.insertBefore(s,b.nextSibling):(o=u.nodeType===9?u.head:u,o.insertBefore(s,o.firstChild))}function Sp(s,o){s.crossOrigin==null&&(s.crossOrigin=o.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=o.referrerPolicy),s.title==null&&(s.title=o.title)}function Ep(s,o){s.crossOrigin==null&&(s.crossOrigin=o.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=o.referrerPolicy),s.integrity==null&&(s.integrity=o.integrity)}var oc=null;function Yv(s,o,u){if(oc===null){var d=new Map,g=oc=new Map;g.set(u,d)}else g=oc,d=g.get(u),d||(d=new Map,g.set(u,d));if(d.has(s))return d;for(d.set(s,null),u=u.getElementsByTagName(s),g=0;g<u.length;g++){var b=u[g];if(!(b[ro]||b[Wt]||s==="link"&&b.getAttribute("rel")==="stylesheet")&&b.namespaceURI!=="http://www.w3.org/2000/svg"){var x=b.getAttribute(o)||"";x=s+x;var A=d.get(x);A?A.push(b):d.set(x,[b])}}return d}function Xv(s,o,u){s=s.ownerDocument||s,s.head.insertBefore(u,o==="title"?s.querySelector("head > title"):null)}function yO(s,o,u){if(u===1||o.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;return o.rel==="stylesheet"?(s=o.disabled,typeof o.precedence=="string"&&s==null):!0;case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function Wv(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function _O(s,o,u,d){if(u.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var g=ba(d.href),b=o.querySelector($o(g));if(b){o=b._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(s.count++,s=lc.bind(s),o.then(s,s)),u.state.loading|=4,u.instance=b,Gt(b);return}b=o.ownerDocument||o,d=Qv(d),(g=fr.get(g))&&Sp(d,g),b=b.createElement("link"),Gt(b);var x=b;x._p=new Promise(function(A,j){x.onload=A,x.onerror=j}),rn(b,"link",d),u.instance=b}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(u,o),(o=u.state.preload)&&(u.state.loading&3)===0&&(s.count++,u=lc.bind(s),o.addEventListener("load",u),o.addEventListener("error",u))}}var kp=0;function bO(s,o){return s.stylesheets&&s.count===0&&cc(s,s.stylesheets),0<s.count||0<s.imgCount?function(u){var d=setTimeout(function(){if(s.stylesheets&&cc(s,s.stylesheets),s.unsuspend){var b=s.unsuspend;s.unsuspend=null,b()}},6e4+o);0<s.imgBytes&&kp===0&&(kp=62500*WR());var g=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&cc(s,s.stylesheets),s.unsuspend)){var b=s.unsuspend;s.unsuspend=null,b()}},(s.imgBytes>kp?50:800)+o);return s.unsuspend=u,function(){s.unsuspend=null,clearTimeout(d),clearTimeout(g)}}:null}function lc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)cc(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var uc=null;function cc(s,o){s.stylesheets=null,s.unsuspend!==null&&(s.count++,uc=new Map,o.forEach(vO,s),uc=null,lc.call(s))}function vO(s,o){if(!(o.state.loading&4)){var u=uc.get(s);if(u)var d=u.get(null);else{u=new Map,uc.set(s,u);for(var g=s.querySelectorAll("link[data-precedence],style[data-precedence]"),b=0;b<g.length;b++){var x=g[b];(x.nodeName==="LINK"||x.getAttribute("media")!=="not all")&&(u.set(x.dataset.precedence,x),d=x)}d&&u.set(null,d)}g=o.instance,x=g.getAttribute("data-precedence"),b=u.get(x)||d,b===d&&u.set(null,g),u.set(x,g),this.count++,d=lc.bind(this),g.addEventListener("load",d),g.addEventListener("error",d),b?b.parentNode.insertBefore(g,b.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(g,s.firstChild)),o.state.loading|=4}}var Fo={$$typeof:T,Provider:null,Consumer:null,_currentValue:re,_currentValue2:re,_threadCount:0};function wO(s,o,u,d,g,b,x,A,j){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=vh(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vh(0),this.hiddenUpdates=vh(null),this.identifierPrefix=d,this.onUncaughtError=g,this.onCaughtError=b,this.onRecoverableError=x,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=j,this.incompleteTransitions=new Map}function ew(s,o,u,d,g,b,x,A,j,Y,ae,le){return s=new wO(s,o,u,x,j,Y,ae,le,A),o=1,b===!0&&(o|=24),b=Fn(3,null,null,o),s.current=b,b.stateNode=s,o=id(),o.refCount++,s.pooledCache=o,o.refCount++,b.memoizedState={element:d,isDehydrated:u,cache:o},ld(b),s}function tw(s){return s?(s=Ys,s):Ys}function nw(s,o,u,d,g,b){g=tw(g),d.context===null?d.context=g:d.pendingContext=g,d=xi(o),d.payload={element:u},b=b===void 0?null:b,b!==null&&(d.callback=b),u=Si(s,d,o),u!==null&&(Ln(u,s,o),wo(u,s,o))}function rw(s,o){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var u=s.retryLane;s.retryLane=u!==0&&u<o?u:o}}function Cp(s,o){rw(s,o),(s=s.alternate)&&rw(s,o)}function iw(s){if(s.tag===13||s.tag===31){var o=as(s,67108864);o!==null&&Ln(o,s,67108864),Cp(s,67108864)}}function sw(s){if(s.tag===13||s.tag===31){var o=Zn();o=wh(o);var u=as(s,o);u!==null&&Ln(u,s,o),Cp(s,o)}}var fc=!0;function xO(s,o,u,d){var g=B.T;B.T=null;var b=K.p;try{K.p=2,Tp(s,o,u,d)}finally{K.p=b,B.T=g}}function SO(s,o,u,d){var g=B.T;B.T=null;var b=K.p;try{K.p=8,Tp(s,o,u,d)}finally{K.p=b,B.T=g}}function Tp(s,o,u,d){if(fc){var g=Ap(d);if(g===null)dp(s,o,d,hc,u),ow(s,d);else if(kO(g,s,o,u,d))d.stopPropagation();else if(ow(s,d),o&4&&-1<EO.indexOf(s)){for(;g!==null;){var b=Us(g);if(b!==null)switch(b.tag){case 3:if(b=b.stateNode,b.current.memoizedState.isDehydrated){var x=ts(b.pendingLanes);if(x!==0){var A=b;for(A.pendingLanes|=2,A.entangledLanes|=2;x;){var j=1<<31-ot(x);A.entanglements[1]|=j,x&=~j}Or(b),(We&6)===0&&(Zu=Ae()+500,Po(0))}}break;case 31:case 13:A=as(b,2),A!==null&&Ln(A,b,2),Ju(),Cp(b,2)}if(b=Ap(d),b===null&&dp(s,o,d,hc,u),b===g)break;g=b}g!==null&&d.stopPropagation()}else dp(s,o,d,null,u)}}function Ap(s){return s=Oh(s),Rp(s)}var hc=null;function Rp(s){if(hc=null,s=Bs(s),s!==null){var o=a(s);if(o===null)s=null;else{var u=o.tag;if(u===13){if(s=l(o),s!==null)return s;s=null}else if(u===31){if(s=c(o),s!==null)return s;s=null}else if(u===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;s=null}else o!==s&&(s=null)}}return hc=s,null}function aw(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Qe()){case ne:return 2;case ue:return 8;case _e:case Ee:return 32;case Ie:return 268435456;default:return 32}default:return 32}}var Op=!1,Mi=null,Li=null,zi=null,Vo=new Map,Ho=new Map,Pi=[],EO="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function ow(s,o){switch(s){case"focusin":case"focusout":Mi=null;break;case"dragenter":case"dragleave":Li=null;break;case"mouseover":case"mouseout":zi=null;break;case"pointerover":case"pointerout":Vo.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ho.delete(o.pointerId)}}function Go(s,o,u,d,g,b){return s===null||s.nativeEvent!==b?(s={blockedOn:o,domEventName:u,eventSystemFlags:d,nativeEvent:b,targetContainers:[g]},o!==null&&(o=Us(o),o!==null&&iw(o)),s):(s.eventSystemFlags|=d,o=s.targetContainers,g!==null&&o.indexOf(g)===-1&&o.push(g),s)}function kO(s,o,u,d,g){switch(o){case"focusin":return Mi=Go(Mi,s,o,u,d,g),!0;case"dragenter":return Li=Go(Li,s,o,u,d,g),!0;case"mouseover":return zi=Go(zi,s,o,u,d,g),!0;case"pointerover":var b=g.pointerId;return Vo.set(b,Go(Vo.get(b)||null,s,o,u,d,g)),!0;case"gotpointercapture":return b=g.pointerId,Ho.set(b,Go(Ho.get(b)||null,s,o,u,d,g)),!0}return!1}function lw(s){var o=Bs(s.target);if(o!==null){var u=a(o);if(u!==null){if(o=u.tag,o===13){if(o=l(u),o!==null){s.blockedOn=o,x0(s.priority,function(){sw(u)});return}}else if(o===31){if(o=c(u),o!==null){s.blockedOn=o,x0(s.priority,function(){sw(u)});return}}else if(o===3&&u.stateNode.current.memoizedState.isDehydrated){s.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}s.blockedOn=null}function dc(s){if(s.blockedOn!==null)return!1;for(var o=s.targetContainers;0<o.length;){var u=Ap(s.nativeEvent);if(u===null){u=s.nativeEvent;var d=new u.constructor(u.type,u);Rh=d,u.target.dispatchEvent(d),Rh=null}else return o=Us(u),o!==null&&iw(o),s.blockedOn=u,!1;o.shift()}return!0}function uw(s,o,u){dc(s)&&u.delete(o)}function CO(){Op=!1,Mi!==null&&dc(Mi)&&(Mi=null),Li!==null&&dc(Li)&&(Li=null),zi!==null&&dc(zi)&&(zi=null),Vo.forEach(uw),Ho.forEach(uw)}function pc(s,o){s.blockedOn===o&&(s.blockedOn=null,Op||(Op=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,CO)))}var mc=null;function cw(s){mc!==s&&(mc=s,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){mc===s&&(mc=null);for(var o=0;o<s.length;o+=3){var u=s[o],d=s[o+1],g=s[o+2];if(typeof d!="function"){if(Rp(d||u)===null)continue;break}var b=Us(u);b!==null&&(s.splice(o,3),o-=3,Ad(b,{pending:!0,data:g,method:u.method,action:d},d,g))}}))}function wa(s){function o(j){return pc(j,s)}Mi!==null&&pc(Mi,s),Li!==null&&pc(Li,s),zi!==null&&pc(zi,s),Vo.forEach(o),Ho.forEach(o);for(var u=0;u<Pi.length;u++){var d=Pi[u];d.blockedOn===s&&(d.blockedOn=null)}for(;0<Pi.length&&(u=Pi[0],u.blockedOn===null);)lw(u),u.blockedOn===null&&Pi.shift();if(u=(s.ownerDocument||s).$$reactFormReplay,u!=null)for(d=0;d<u.length;d+=3){var g=u[d],b=u[d+1],x=g[Rn]||null;if(typeof b=="function")x||cw(u);else if(x){var A=null;if(b&&b.hasAttribute("formAction")){if(g=b,x=b[Rn]||null)A=x.formAction;else if(Rp(g)!==null)continue}else A=x.action;typeof A=="function"?u[d+1]=A:(u.splice(d,3),d-=3),cw(u)}}}function fw(){function s(b){b.canIntercept&&b.info==="react-transition"&&b.intercept({handler:function(){return new Promise(function(x){return g=x})},focusReset:"manual",scroll:"manual"})}function o(){g!==null&&(g(),g=null),d||setTimeout(u,20)}function u(){if(!d&&!navigation.transition){var b=navigation.currentEntry;b&&b.url!=null&&navigation.navigate(b.url,{state:b.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var d=!1,g=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(u,100),function(){d=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),g!==null&&(g(),g=null)}}}function Ip(s){this._internalRoot=s}gc.prototype.render=Ip.prototype.render=function(s){var o=this._internalRoot;if(o===null)throw Error(r(409));var u=o.current,d=Zn();nw(u,d,s,o,null,null)},gc.prototype.unmount=Ip.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var o=s.containerInfo;nw(s.current,2,null,s,null,null),Ju(),o[js]=null}};function gc(s){this._internalRoot=s}gc.prototype.unstable_scheduleHydration=function(s){if(s){var o=w0();s={blockedOn:null,target:s,priority:o};for(var u=0;u<Pi.length&&o!==0&&o<Pi[u].priority;u++);Pi.splice(u,0,s),u===0&&lw(s)}};var hw=e.version;if(hw!=="19.2.3")throw Error(r(527,hw,"19.2.3"));K.findDOMNode=function(s){var o=s._reactInternals;if(o===void 0)throw typeof s.render=="function"?Error(r(188)):(s=Object.keys(s).join(","),Error(r(268,s)));return s=h(o),s=s!==null?m(s):null,s=s===null?null:s.stateNode,s};var TO={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:B,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var yc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yc.isDisabled&&yc.supportsFiber)try{Ht=yc.inject(TO),_t=yc}catch{}}return Zo.createRoot=function(s,o){if(!i(s))throw Error(r(299));var u=!1,d="",g=bb,b=vb,x=wb;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(d=o.identifierPrefix),o.onUncaughtError!==void 0&&(g=o.onUncaughtError),o.onCaughtError!==void 0&&(b=o.onCaughtError),o.onRecoverableError!==void 0&&(x=o.onRecoverableError)),o=ew(s,1,!1,null,null,u,d,null,g,b,x,fw),s[js]=o.current,hp(s),new Ip(o)},Zo.hydrateRoot=function(s,o,u){if(!i(s))throw Error(r(299));var d=!1,g="",b=bb,x=vb,A=wb,j=null;return u!=null&&(u.unstable_strictMode===!0&&(d=!0),u.identifierPrefix!==void 0&&(g=u.identifierPrefix),u.onUncaughtError!==void 0&&(b=u.onUncaughtError),u.onCaughtError!==void 0&&(x=u.onCaughtError),u.onRecoverableError!==void 0&&(A=u.onRecoverableError),u.formState!==void 0&&(j=u.formState)),o=ew(s,1,!0,o,u??null,d,g,j,b,x,A,fw),o.context=tw(null),u=o.current,d=Zn(),d=wh(d),g=xi(d),g.callback=null,Si(u,g,d),u=d,o.current.lanes=u,no(o,u),Or(o),s[js]=o.current,hp(s),new gc(o)},Zo.version="19.2.3",Zo}var xw;function PO(){if(xw)return Mp.exports;xw=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Mp.exports=zO(),Mp.exports}var jO=PO(),Vl=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},BO={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},UO=class{#e=BO;#t=!1;setTimeoutProvider(t){this.#e=t}setTimeout(t,e){return this.#e.setTimeout(t,e)}clearTimeout(t){this.#e.clearTimeout(t)}setInterval(t,e){return this.#e.setInterval(t,e)}clearInterval(t){this.#e.clearInterval(t)}},Cs=new UO;function $O(t){setTimeout(t,0)}var qa=typeof window>"u"||"Deno"in globalThis;function dr(){}function qO(t,e){return typeof t=="function"?t(e):t}function Om(t){return typeof t=="number"&&t>=0&&t!==1/0}function MS(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Hi(t,e){return typeof t=="function"?t(e):t}function pr(t,e){return typeof t=="function"?t(e):t}function Sw(t,e){const{type:n="all",exact:r,fetchStatus:i,predicate:a,queryKey:l,stale:c}=t;if(l){if(r){if(e.queryHash!==qg(l,e.options))return!1}else if(!Rl(e.queryKey,l))return!1}if(n!=="all"){const f=e.isActive();if(n==="active"&&!f||n==="inactive"&&f)return!1}return!(typeof c=="boolean"&&e.isStale()!==c||i&&i!==e.state.fetchStatus||a&&!a(e))}function Ew(t,e){const{exact:n,status:r,predicate:i,mutationKey:a}=t;if(a){if(!e.options.mutationKey)return!1;if(n){if(fi(e.options.mutationKey)!==fi(a))return!1}else if(!Rl(e.options.mutationKey,a))return!1}return!(r&&e.state.status!==r||i&&!i(e))}function qg(t,e){return(e?.queryKeyHashFn||fi)(t)}function fi(t){return JSON.stringify(t,(e,n)=>Nm(n)?Object.keys(n).sort().reduce((r,i)=>(r[i]=n[i],r),{}):n)}function Rl(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>Rl(t[n],e[n])):!1}var FO=Object.prototype.hasOwnProperty;function LS(t,e){if(t===e)return t;const n=kw(t)&&kw(e);if(!n&&!(Nm(t)&&Nm(e)))return e;const i=(n?t:Object.keys(t)).length,a=n?e:Object.keys(e),l=a.length,c=n?new Array(l):{};let f=0;for(let h=0;h<l;h++){const m=n?h:a[h],p=t[m],_=e[m];if(p===_){c[m]=p,(n?h<i:FO.call(t,m))&&f++;continue}if(p===null||_===null||typeof p!="object"||typeof _!="object"){c[m]=_;continue}const y=LS(p,_);c[m]=y,y===p&&f++}return i===l&&f===i?t:c}function Im(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function kw(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Nm(t){if(!Cw(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!Cw(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function Cw(t){return Object.prototype.toString.call(t)==="[object Object]"}function VO(t){return new Promise(e=>{Cs.setTimeout(e,t)})}function Dm(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?LS(t,e):e}function HO(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function GO(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var Fg=Symbol();function zS(t,e){return!t.queryFn&&e?.initialPromise?()=>e.initialPromise:!t.queryFn||t.queryFn===Fg?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function KO(t,e,n){let r=!1,i;return Object.defineProperty(t,"signal",{enumerable:!0,get:()=>(i??=e(),r||(r=!0,i.aborted?n():i.addEventListener("abort",n,{once:!0})),i)}),t}var ZO=class extends Vl{#e;#t;#n;constructor(){super(),this.#n=t=>{if(!qa&&window.addEventListener){const e=()=>t();return window.addEventListener("visibilitychange",e,!1),()=>{window.removeEventListener("visibilitychange",e)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#n=t,this.#t?.(),this.#t=t(e=>{typeof e=="boolean"?this.setFocused(e):this.onFocus()})}setFocused(t){this.#e!==t&&(this.#e=t,this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(e=>{e(t)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},Vg=new ZO;function Mm(){let t,e;const n=new Promise((i,a)=>{t=i,e=a});n.status="pending",n.catch(()=>{});function r(i){Object.assign(n,i),delete n.resolve,delete n.reject}return n.resolve=i=>{r({status:"fulfilled",value:i}),t(i)},n.reject=i=>{r({status:"rejected",reason:i}),e(i)},n}var QO=$O;function JO(){let t=[],e=0,n=c=>{c()},r=c=>{c()},i=QO;const a=c=>{e?t.push(c):i(()=>{n(c)})},l=()=>{const c=t;t=[],c.length&&i(()=>{r(()=>{c.forEach(f=>{n(f)})})})};return{batch:c=>{let f;e++;try{f=c()}finally{e--,e||l()}return f},batchCalls:c=>(...f)=>{a(()=>{c(...f)})},schedule:a,setNotifyFunction:c=>{n=c},setBatchNotifyFunction:c=>{r=c},setScheduler:c=>{i=c}}}var pn=JO(),YO=class extends Vl{#e=!0;#t;#n;constructor(){super(),this.#n=t=>{if(!qa&&window.addEventListener){const e=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",e,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",n)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#n=t,this.#t?.(),this.#t=t(this.setOnline.bind(this))}setOnline(t){this.#e!==t&&(this.#e=t,this.listeners.forEach(n=>{n(t)}))}isOnline(){return this.#e}},nf=new YO;function XO(t){return Math.min(1e3*2**t,3e4)}function PS(t){return(t??"online")==="online"?nf.isOnline():!0}var Lm=class extends Error{constructor(t){super("CancelledError"),this.revert=t?.revert,this.silent=t?.silent}};function jS(t){let e=!1,n=0,r;const i=Mm(),a=()=>i.status!=="pending",l=w=>{if(!a()){const k=new Lm(w);_(k),t.onCancel?.(k)}},c=()=>{e=!0},f=()=>{e=!1},h=()=>Vg.isFocused()&&(t.networkMode==="always"||nf.isOnline())&&t.canRun(),m=()=>PS(t.networkMode)&&t.canRun(),p=w=>{a()||(r?.(),i.resolve(w))},_=w=>{a()||(r?.(),i.reject(w))},y=()=>new Promise(w=>{r=k=>{(a()||h())&&w(k)},t.onPause?.()}).then(()=>{r=void 0,a()||t.onContinue?.()}),v=()=>{if(a())return;let w;const k=n===0?t.initialPromise:void 0;try{w=k??t.fn()}catch(S){w=Promise.reject(S)}Promise.resolve(w).then(p).catch(S=>{if(a())return;const R=t.retry??(qa?0:3),T=t.retryDelay??XO,z=typeof T=="function"?T(n,S):T,L=R===!0||typeof R=="number"&&n<R||typeof R=="function"&&R(n,S);if(e||!L){_(S);return}n++,t.onFail?.(n,S),VO(z).then(()=>h()?void 0:y()).then(()=>{e?_(S):v()})})};return{promise:i,status:()=>i.status,cancel:l,continue:()=>(r?.(),i),cancelRetry:c,continueRetry:f,canStart:m,start:()=>(m()?v():y().then(v),i)}}var BS=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Om(this.gcTime)&&(this.#e=Cs.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(qa?1/0:300*1e3))}clearGcTimeout(){this.#e&&(Cs.clearTimeout(this.#e),this.#e=void 0)}},WO=class extends BS{#e;#t;#n;#r;#i;#o;#s;constructor(t){super(),this.#s=!1,this.#o=t.defaultOptions,this.setOptions(t.options),this.observers=[],this.#r=t.client,this.#n=this.#r.getQueryCache(),this.queryKey=t.queryKey,this.queryHash=t.queryHash,this.#e=Aw(this.options),this.state=t.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#i?.promise}setOptions(t){if(this.options={...this.#o,...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const e=Aw(this.options);e.data!==void 0&&(this.setState(Tw(e.data,e.dataUpdatedAt)),this.#e=e)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#n.remove(this)}setData(t,e){const n=Dm(this.state.data,t,this.options);return this.#a({data:n,type:"success",dataUpdatedAt:e?.updatedAt,manual:e?.manual}),n}setState(t,e){this.#a({type:"setState",state:t,setStateOptions:e})}cancel(t){const e=this.#i?.promise;return this.#i?.cancel(t),e?e.then(dr).catch(dr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(t=>pr(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Fg||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>Hi(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!MS(this.state.dataUpdatedAt,t)}onFocus(){this.observers.find(e=>e.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#i?.continue()}onOnline(){this.observers.find(e=>e.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#i?.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(e=>e!==t),this.observers.length||(this.#i&&(this.#s?this.#i.cancel({revert:!0}):this.#i.cancelRetry()),this.scheduleGc()),this.#n.notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#a({type:"invalidate"})}async fetch(t,e){if(this.state.fetchStatus!=="idle"&&this.#i?.status()!=="rejected"){if(this.state.data!==void 0&&e?.cancelRefetch)this.cancel({silent:!0});else if(this.#i)return this.#i.continueRetry(),this.#i.promise}if(t&&this.setOptions(t),!this.options.queryFn){const c=this.observers.find(f=>f.options.queryFn);c&&this.setOptions(c.options)}const n=new AbortController,r=c=>{Object.defineProperty(c,"signal",{enumerable:!0,get:()=>(this.#s=!0,n.signal)})},i=()=>{const c=zS(this.options,e),h=(()=>{const m={client:this.#r,queryKey:this.queryKey,meta:this.meta};return r(m),m})();return this.#s=!1,this.options.persister?this.options.persister(c,h,this):c(h)},l=(()=>{const c={fetchOptions:e,options:this.options,queryKey:this.queryKey,client:this.#r,state:this.state,fetchFn:i};return r(c),c})();this.options.behavior?.onFetch(l,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==l.fetchOptions?.meta)&&this.#a({type:"fetch",meta:l.fetchOptions?.meta}),this.#i=jS({initialPromise:e?.initialPromise,fn:l.fetchFn,onCancel:c=>{c instanceof Lm&&c.revert&&this.setState({...this.#t,fetchStatus:"idle"}),n.abort()},onFail:(c,f)=>{this.#a({type:"failed",failureCount:c,error:f})},onPause:()=>{this.#a({type:"pause"})},onContinue:()=>{this.#a({type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0});try{const c=await this.#i.start();if(c===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(c),this.#n.config.onSuccess?.(c,this),this.#n.config.onSettled?.(c,this.state.error,this),c}catch(c){if(c instanceof Lm){if(c.silent)return this.#i.promise;if(c.revert){if(this.state.data===void 0)throw c;return this.state.data}}throw this.#a({type:"error",error:c}),this.#n.config.onError?.(c,this),this.#n.config.onSettled?.(this.state.data,c,this),c}finally{this.scheduleGc()}}#a(t){const e=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...US(n.data,this.options),fetchMeta:t.meta??null};case"success":const r={...n,...Tw(t.data,t.dataUpdatedAt),dataUpdateCount:n.dataUpdateCount+1,...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=t.manual?r:void 0,r;case"error":const i=t.error;return{...n,error:i,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=e(this.state),pn.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),this.#n.notify({query:this,type:"updated",action:t})})}};function US(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:PS(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function Tw(t,e){return{data:t,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function Aw(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var e2=class extends Vl{constructor(t,e){super(),this.options=e,this.#e=t,this.#a=null,this.#s=Mm(),this.bindMethods(),this.setOptions(e)}#e;#t=void 0;#n=void 0;#r=void 0;#i;#o;#s;#a;#p;#m;#u;#c;#l;#f;#h=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),Rw(this.#t,this.options)?this.#d():this.updateResult(),this.#b())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return zm(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return zm(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#v(),this.#w(),this.#t.removeObserver(this)}setOptions(t){const e=this.options,n=this.#t;if(this.options=this.#e.defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof pr(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#x(),this.#t.setOptions(this.options),e._defaulted&&!Im(this.options,e)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const r=this.hasListeners();r&&Ow(this.#t,n,this.options,e)&&this.#d(),this.updateResult(),r&&(this.#t!==n||pr(this.options.enabled,this.#t)!==pr(e.enabled,this.#t)||Hi(this.options.staleTime,this.#t)!==Hi(e.staleTime,this.#t))&&this.#g();const i=this.#y();r&&(this.#t!==n||pr(this.options.enabled,this.#t)!==pr(e.enabled,this.#t)||i!==this.#f)&&this.#_(i)}getOptimisticResult(t){const e=this.#e.getQueryCache().build(this.#e,t),n=this.createResult(e,t);return n2(this,n)&&(this.#r=n,this.#o=this.options,this.#i=this.#t.state),n}getCurrentResult(){return this.#r}trackResult(t,e){return new Proxy(t,{get:(n,r)=>(this.trackProp(r),e?.(r),r==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&this.#s.status==="pending"&&this.#s.reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(n,r))})}trackProp(t){this.#h.add(t)}getCurrentQuery(){return this.#t}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const e=this.#e.defaultQueryOptions(t),n=this.#e.getQueryCache().build(this.#e,e);return n.fetch().then(()=>this.createResult(n,e))}fetch(t){return this.#d({...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#r))}#d(t){this.#x();let e=this.#t.fetch(this.options,t);return t?.throwOnError||(e=e.catch(dr)),e}#g(){this.#v();const t=Hi(this.options.staleTime,this.#t);if(qa||this.#r.isStale||!Om(t))return;const n=MS(this.#r.dataUpdatedAt,t)+1;this.#c=Cs.setTimeout(()=>{this.#r.isStale||this.updateResult()},n)}#y(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#_(t){this.#w(),this.#f=t,!(qa||pr(this.options.enabled,this.#t)===!1||!Om(this.#f)||this.#f===0)&&(this.#l=Cs.setInterval(()=>{(this.options.refetchIntervalInBackground||Vg.isFocused())&&this.#d()},this.#f))}#b(){this.#g(),this.#_(this.#y())}#v(){this.#c&&(Cs.clearTimeout(this.#c),this.#c=void 0)}#w(){this.#l&&(Cs.clearInterval(this.#l),this.#l=void 0)}createResult(t,e){const n=this.#t,r=this.options,i=this.#r,a=this.#i,l=this.#o,f=t!==n?t.state:this.#n,{state:h}=t;let m={...h},p=!1,_;if(e._optimisticResults){const $=this.hasListeners(),F=!$&&Rw(t,e),P=$&&Ow(t,n,e,r);(F||P)&&(m={...m,...US(h.data,t.options)}),e._optimisticResults==="isRestoring"&&(m.fetchStatus="idle")}let{error:y,errorUpdatedAt:v,status:w}=m;_=m.data;let k=!1;if(e.placeholderData!==void 0&&_===void 0&&w==="pending"){let $;i?.isPlaceholderData&&e.placeholderData===l?.placeholderData?($=i.data,k=!0):$=typeof e.placeholderData=="function"?e.placeholderData(this.#u?.state.data,this.#u):e.placeholderData,$!==void 0&&(w="success",_=Dm(i?.data,$,e),p=!0)}if(e.select&&_!==void 0&&!k)if(i&&_===a?.data&&e.select===this.#p)_=this.#m;else try{this.#p=e.select,_=e.select(_),_=Dm(i?.data,_,e),this.#m=_,this.#a=null}catch($){this.#a=$}this.#a&&(y=this.#a,_=this.#m,v=Date.now(),w="error");const S=m.fetchStatus==="fetching",R=w==="pending",T=w==="error",z=R&&S,L=_!==void 0,M={status:w,fetchStatus:m.fetchStatus,isPending:R,isSuccess:w==="success",isError:T,isInitialLoading:z,isLoading:z,data:_,dataUpdatedAt:m.dataUpdatedAt,error:y,errorUpdatedAt:v,failureCount:m.fetchFailureCount,failureReason:m.fetchFailureReason,errorUpdateCount:m.errorUpdateCount,isFetched:m.dataUpdateCount>0||m.errorUpdateCount>0,isFetchedAfterMount:m.dataUpdateCount>f.dataUpdateCount||m.errorUpdateCount>f.errorUpdateCount,isFetching:S,isRefetching:S&&!R,isLoadingError:T&&!L,isPaused:m.fetchStatus==="paused",isPlaceholderData:p,isRefetchError:T&&L,isStale:Hg(t,e),refetch:this.refetch,promise:this.#s,isEnabled:pr(e.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const $=Z=>{M.status==="error"?Z.reject(M.error):M.data!==void 0&&Z.resolve(M.data)},F=()=>{const Z=this.#s=M.promise=Mm();$(Z)},P=this.#s;switch(P.status){case"pending":t.queryHash===n.queryHash&&$(P);break;case"fulfilled":(M.status==="error"||M.data!==P.value)&&F();break;case"rejected":(M.status!=="error"||M.error!==P.reason)&&F();break}}return M}updateResult(){const t=this.#r,e=this.createResult(this.#t,this.options);if(this.#i=this.#t.state,this.#o=this.options,this.#i.data!==void 0&&(this.#u=this.#t),Im(e,t))return;this.#r=e;const n=()=>{if(!t)return!0;const{notifyOnChangeProps:r}=this.options,i=typeof r=="function"?r():r;if(i==="all"||!i&&!this.#h.size)return!0;const a=new Set(i??this.#h);return this.options.throwOnError&&a.add("error"),Object.keys(this.#r).some(l=>{const c=l;return this.#r[c]!==t[c]&&a.has(c)})};this.#S({listeners:n()})}#x(){const t=this.#e.getQueryCache().build(this.#e,this.options);if(t===this.#t)return;const e=this.#t;this.#t=t,this.#n=t.state,this.hasListeners()&&(e?.removeObserver(this),t.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#b()}#S(t){pn.batch(()=>{t.listeners&&this.listeners.forEach(e=>{e(this.#r)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function t2(t,e){return pr(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function Rw(t,e){return t2(t,e)||t.state.data!==void 0&&zm(t,e,e.refetchOnMount)}function zm(t,e,n){if(pr(e.enabled,t)!==!1&&Hi(e.staleTime,t)!=="static"){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&Hg(t,e)}return!1}function Ow(t,e,n,r){return(t!==e||pr(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&Hg(t,n)}function Hg(t,e){return pr(e.enabled,t)!==!1&&t.isStaleByTime(Hi(e.staleTime,t))}function n2(t,e){return!Im(t.getCurrentResult(),e)}function Iw(t){return{onFetch:(e,n)=>{const r=e.options,i=e.fetchOptions?.meta?.fetchMore?.direction,a=e.state.data?.pages||[],l=e.state.data?.pageParams||[];let c={pages:[],pageParams:[]},f=0;const h=async()=>{let m=!1;const p=v=>{KO(v,()=>e.signal,()=>m=!0)},_=zS(e.options,e.fetchOptions),y=async(v,w,k)=>{if(m)return Promise.reject();if(w==null&&v.pages.length)return Promise.resolve(v);const R=(()=>{const E={client:e.client,queryKey:e.queryKey,pageParam:w,direction:k?"backward":"forward",meta:e.options.meta};return p(E),E})(),T=await _(R),{maxPages:z}=e.options,L=k?GO:HO;return{pages:L(v.pages,T,z),pageParams:L(v.pageParams,w,z)}};if(i&&a.length){const v=i==="backward",w=v?r2:Nw,k={pages:a,pageParams:l},S=w(r,k);c=await y(k,S,v)}else{const v=t??a.length;do{const w=f===0?l[0]??r.initialPageParam:Nw(r,c);if(f>0&&w==null)break;c=await y(c,w),f++}while(f<v)}return c};e.options.persister?e.fetchFn=()=>e.options.persister?.(h,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n):e.fetchFn=h}}}function Nw(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function r2(t,{pages:e,pageParams:n}){return e.length>0?t.getPreviousPageParam?.(e[0],e,n[0],n):void 0}var i2=class extends BS{#e;#t;#n;#r;constructor(t){super(),this.#e=t.client,this.mutationId=t.mutationId,this.#n=t.mutationCache,this.#t=[],this.state=t.state||s2(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){this.#t.includes(t)||(this.#t.push(t),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){this.#t=this.#t.filter(e=>e!==t),this.scheduleGc(),this.#n.notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#n.remove(this))}continue(){return this.#r?.continue()??this.execute(this.state.variables)}async execute(t){const e=()=>{this.#i({type:"continue"})},n={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#r=jS({fn:()=>this.options.mutationFn?this.options.mutationFn(t,n):Promise.reject(new Error("No mutationFn found")),onFail:(a,l)=>{this.#i({type:"failed",failureCount:a,error:l})},onPause:()=>{this.#i({type:"pause"})},onContinue:e,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#n.canRun(this)});const r=this.state.status==="pending",i=!this.#r.canStart();try{if(r)e();else{this.#i({type:"pending",variables:t,isPaused:i}),await this.#n.config.onMutate?.(t,this,n);const l=await this.options.onMutate?.(t,n);l!==this.state.context&&this.#i({type:"pending",context:l,variables:t,isPaused:i})}const a=await this.#r.start();return await this.#n.config.onSuccess?.(a,t,this.state.context,this,n),await this.options.onSuccess?.(a,t,this.state.context,n),await this.#n.config.onSettled?.(a,null,this.state.variables,this.state.context,this,n),await this.options.onSettled?.(a,null,t,this.state.context,n),this.#i({type:"success",data:a}),a}catch(a){try{await this.#n.config.onError?.(a,t,this.state.context,this,n)}catch(l){Promise.reject(l)}try{await this.options.onError?.(a,t,this.state.context,n)}catch(l){Promise.reject(l)}try{await this.#n.config.onSettled?.(void 0,a,this.state.variables,this.state.context,this,n)}catch(l){Promise.reject(l)}try{await this.options.onSettled?.(void 0,a,t,this.state.context,n)}catch(l){Promise.reject(l)}throw this.#i({type:"error",error:a}),a}finally{this.#n.runNext(this)}}#i(t){const e=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=e(this.state),pn.batch(()=>{this.#t.forEach(n=>{n.onMutationUpdate(t)}),this.#n.notify({mutation:this,type:"updated",action:t})})}};function s2(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var a2=class extends Vl{constructor(t={}){super(),this.config=t,this.#e=new Set,this.#t=new Map,this.#n=0}#e;#t;#n;build(t,e,n){const r=new i2({client:t,mutationCache:this,mutationId:++this.#n,options:t.defaultMutationOptions(e),state:n});return this.add(r),r}add(t){this.#e.add(t);const e=_c(t);if(typeof e=="string"){const n=this.#t.get(e);n?n.push(t):this.#t.set(e,[t])}this.notify({type:"added",mutation:t})}remove(t){if(this.#e.delete(t)){const e=_c(t);if(typeof e=="string"){const n=this.#t.get(e);if(n)if(n.length>1){const r=n.indexOf(t);r!==-1&&n.splice(r,1)}else n[0]===t&&this.#t.delete(e)}}this.notify({type:"removed",mutation:t})}canRun(t){const e=_c(t);if(typeof e=="string"){const r=this.#t.get(e)?.find(i=>i.state.status==="pending");return!r||r===t}else return!0}runNext(t){const e=_c(t);return typeof e=="string"?this.#t.get(e)?.find(r=>r!==t&&r.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){pn.batch(()=>{this.#e.forEach(t=>{this.notify({type:"removed",mutation:t})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(t){const e={exact:!0,...t};return this.getAll().find(n=>Ew(e,n))}findAll(t={}){return this.getAll().filter(e=>Ew(t,e))}notify(t){pn.batch(()=>{this.listeners.forEach(e=>{e(t)})})}resumePausedMutations(){const t=this.getAll().filter(e=>e.state.isPaused);return pn.batch(()=>Promise.all(t.map(e=>e.continue().catch(dr))))}};function _c(t){return t.options.scope?.id}var o2=class extends Vl{constructor(t={}){super(),this.config=t,this.#e=new Map}#e;build(t,e,n){const r=e.queryKey,i=e.queryHash??qg(r,e);let a=this.get(i);return a||(a=new WO({client:t,queryKey:r,queryHash:i,options:t.defaultQueryOptions(e),state:n,defaultOptions:t.getQueryDefaults(r)}),this.add(a)),a}add(t){this.#e.has(t.queryHash)||(this.#e.set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const e=this.#e.get(t.queryHash);e&&(t.destroy(),e===t&&this.#e.delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){pn.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return this.#e.get(t)}getAll(){return[...this.#e.values()]}find(t){const e={exact:!0,...t};return this.getAll().find(n=>Sw(e,n))}findAll(t={}){const e=this.getAll();return Object.keys(t).length>0?e.filter(n=>Sw(t,n)):e}notify(t){pn.batch(()=>{this.listeners.forEach(e=>{e(t)})})}onFocus(){pn.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){pn.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},l2=class{#e;#t;#n;#r;#i;#o;#s;#a;constructor(t={}){this.#e=t.queryCache||new o2,this.#t=t.mutationCache||new a2,this.#n=t.defaultOptions||{},this.#r=new Map,this.#i=new Map,this.#o=0}mount(){this.#o++,this.#o===1&&(this.#s=Vg.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#a=nf.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#o--,this.#o===0&&(this.#s?.(),this.#s=void 0,this.#a?.(),this.#a=void 0)}isFetching(t){return this.#e.findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return this.#t.findAll({...t,status:"pending"}).length}getQueryData(t){const e=this.defaultQueryOptions({queryKey:t});return this.#e.get(e.queryHash)?.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=this.#e.build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(Hi(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return this.#e.findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),a=this.#e.get(r.queryHash)?.state.data,l=qO(e,a);if(l!==void 0)return this.#e.build(this,r).setData(l,{...n,manual:!0})}setQueriesData(t,e,n){return pn.batch(()=>this.#e.findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){const e=this.defaultQueryOptions({queryKey:t});return this.#e.get(e.queryHash)?.state}removeQueries(t){const e=this.#e;pn.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=this.#e;return pn.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=pn.batch(()=>this.#e.findAll(t).map(i=>i.cancel(n)));return Promise.all(r).then(dr).catch(dr)}invalidateQueries(t,e={}){return pn.batch(()=>(this.#e.findAll(t).forEach(n=>{n.invalidate()}),t?.refetchType==="none"?Promise.resolve():this.refetchQueries({...t,type:t?.refetchType??t?.type??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=pn.batch(()=>this.#e.findAll(t).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let a=i.fetch(void 0,n);return n.throwOnError||(a=a.catch(dr)),i.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(r).then(dr)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=this.#e.build(this,e);return n.isStaleByTime(Hi(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(dr).catch(dr)}fetchInfiniteQuery(t){return t.behavior=Iw(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(dr).catch(dr)}ensureInfiniteQueryData(t){return t.behavior=Iw(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return nf.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#n}setDefaultOptions(t){this.#n=t}setQueryDefaults(t,e){this.#r.set(fi(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...this.#r.values()],n={};return e.forEach(r=>{Rl(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){this.#i.set(fi(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...this.#i.values()],n={};return e.forEach(r=>{Rl(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...this.#n.queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=qg(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===Fg&&(e.enabled=!1),e}defaultMutationOptions(t){return t?._defaulted?t:{...this.#n.mutations,...t?.mutationKey&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},u2=X.createContext(void 0),c2=({client:t,children:e})=>(X.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),C.jsx(u2.Provider,{value:t,children:e})),jp={exports:{}},Bp={};var Dw;function f2(){if(Dw)return Bp;Dw=1;var t=Vf().__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;return Bp.c=function(e){return t.H.useMemoCache(e)},Bp}var Mw;function h2(){return Mw||(Mw=1,jp.exports=f2()),jp.exports}var dt=h2();class Ga{}class Fa extends Ga{constructor(e,n){super(),this.collection=e,this.alias=n,this.type="collectionRef"}}class gr extends Ga{constructor(e,n){super(),this.query=e,this.alias=n,this.type="queryRef"}}class kn extends Ga{constructor(e){super(),this.path=e,this.type="ref"}}class jn extends Ga{constructor(e){super(),this.value=e,this.type="val"}}class _r extends Ga{constructor(e,n){super(),this.name=e,this.args=n,this.type="func"}}class $S extends Ga{constructor(e,n){super(),this.name=e,this.args=n,this.type="agg"}}function Gg(t){return t instanceof $S||t instanceof _r||t instanceof kn||t instanceof jn}function Kg(t){return typeof t=="object"&&"expression"in t?t.expression:t}function Lw(t){return typeof t=="object"&&"expression"in t?t.expression:t}function zw(t){return typeof t=="object"&&"expression"in t&&t.residual===!0}function d2(t){return{expression:t,residual:!0}}function p2(t,e){if(t.from.alias===e)return t.from;for(const n of t.join||[])if(n.from.alias===e)return n.from}function Ol(t,e,n){if(e.path.length!==0){if(e.path.length===1){const r=e.path[0];if(t.select){const i=t.select[r];if(i&&i.type==="ref")return Ol(t,i,n)}return{collection:n,path:[r]}}if(e.path.length>1){const[r,...i]=e.path,a=p2(t,r);return a?a.type==="queryRef"?Ol(a.query,new kn(i),n):{collection:a.collection,path:i}:void 0}}}class er extends Error{constructor(e){super(e),this.name="TanStackDBError"}}class Pw extends er{constructor(e,n,r){const i=`${e==="insert"?"Insert":"Update"} validation failed: ${n.map(a=>`
- ${a.message} - path: ${a.path}`).join("")}`;super(r||i),this.name="SchemaValidationError",this.type=e,this.issues=n}}class Hl extends er{constructor(e){super(e),this.name="CollectionConfigurationError"}}class m2 extends Hl{constructor(){super("Collection requires a config")}}class g2 extends Hl{constructor(){super("Collection requires a sync config")}}class y2 extends Hl{constructor(){super("Schema must implement the standard-schema interface")}}class jw extends Hl{constructor(){super("Schema validation must be synchronous")}}class Gl extends er{constructor(e){super(e),this.name="CollectionStateError"}}class _2 extends Gl{constructor(e,n){super(`Cannot perform ${e} on collection "${n}" - collection is in error state. Try calling cleanup() and restarting the collection.`)}}class b2 extends Gl{constructor(e,n,r){super(`Invalid collection status transition from "${e}" to "${n}" for collection "${r}"`)}}class v2 extends Gl{constructor(){super("Collection is in error state")}}class w2 extends Gl{constructor(){super("Active subscribers count is negative - this should never happen")}}class jr extends er{constructor(e){super(e),this.name="CollectionOperationError"}}class x2 extends jr{constructor(e){super(`An object was created without a defined key: ${JSON.stringify(e)}`)}}class S2 extends jr{constructor(e,n){const r=e===null?"null":typeof e;super(`getKey returned an invalid key type. Expected string or number, but got ${r}: ${JSON.stringify(e)}. Item: ${JSON.stringify(n)}`)}}class E2 extends jr{constructor(e){super(`Cannot insert document with ID "${e}" because it already exists in the collection`)}}class k2 extends jr{constructor(e,n,r){const i=`Cannot insert document with key "${e}" from sync because it already exists in the collection "${n}"`;r?.hasCustomGetKey&&r.hasJoins?super(`${i}. This collection uses a custom getKey with joined queries. Joined queries can produce multiple rows with the same key when relationships are not 1:1. Consider: (1) using a composite key in your getKey function (e.g., \`\${item.key1}-\${item.key2}\`), (2) ensuring your join produces unique rows per key, or (3) removing the custom getKey to use the default composite key behavior.`):super(i)}}class C2 extends jr{constructor(){super("The first argument to update is missing")}}class T2 extends jr{constructor(){super("No keys were passed to update")}}class A2 extends jr{constructor(e){super(`The key "${e}" was passed to update but an object for this key was not found in the collection`)}}class R2 extends jr{constructor(e,n){super(`Updating the key of an item is not allowed. Original key: "${e}", Attempted new key: "${n}". Please delete the old item and create a new one if a key change is necessary.`)}}class O2 extends jr{constructor(){super("No keys were passed to delete")}}class I2 extends jr{constructor(e){super(`Collection.delete was called with key '${e}' but there is no item in the collection with this key`)}}class Zg extends er{constructor(e){super(e),this.name="MissingHandlerError"}}class N2 extends Zg{constructor(){super("Collection.insert called directly (not within an explicit transaction) but no 'onInsert' handler is configured.")}}class D2 extends Zg{constructor(){super("Collection.update called directly (not within an explicit transaction) but no 'onUpdate' handler is configured.")}}class M2 extends Zg{constructor(){super("Collection.delete called directly (not within an explicit transaction) but no 'onDelete' handler is configured.")}}class Zi extends er{constructor(e){super(e),this.name="TransactionError"}}class L2 extends Zi{constructor(){super("mutationFn is required when creating a transaction")}}class z2 extends Zi{constructor(){super("You can no longer call .mutate() as the transaction is no longer pending")}}class P2 extends Zi{constructor(){super("You can no longer call .rollback() as the transaction is already completed")}}class j2 extends Zi{constructor(){super("You can no longer call .commit() as the transaction is no longer pending")}}class Bw extends Zi{constructor(){super("No pending sync transaction to write to")}}class Uw extends Zi{constructor(){super("The pending sync transaction is already committed, you can't still write to it.")}}class B2 extends Zi{constructor(){super("No pending sync transaction to commit")}}class U2 extends Zi{constructor(){super("The pending sync transaction is already committed, you can't commit it again.")}}class Ka extends er{constructor(e){super(e),this.name="QueryBuilderError"}}class $2 extends Ka{constructor(e){super(`Only one source is allowed in the ${e}`)}}class q2 extends Ka{constructor(e){super(`A sub query passed to a ${e} must have a from clause itself`)}}class F2 extends Ka{constructor(e){super(`Invalid source for live query: The value provided for alias "${e}" is not a Collection or subquery. Live queries only accept Collection instances or subqueries. Please ensure you're passing a valid Collection or QueryBuilder, not a plain array or other data type.`)}}class bc extends Ka{constructor(e,n){super(`Invalid source for ${e}: Expected an object with a single key-value pair like { alias: collection }. For example: .from({ todos: todosCollection }). Got: ${n}`)}}class V2 extends Ka{constructor(){super("Join condition must be an equality expression")}}class H2 extends Ka{constructor(){super("Query must have a from clause")}}class tr extends er{constructor(e){super(e),this.name="QueryCompilationError"}}class G2 extends tr{constructor(){super("DISTINCT requires a SELECT clause.")}}class K2 extends tr{constructor(){super("HAVING clause requires GROUP BY clause")}}class Z2 extends tr{constructor(){super("LIMIT and OFFSET require an ORDER BY clause to ensure deterministic results")}}class qS extends tr{constructor(e,n,r){const i=n?`alias "${e}" (collection "${n}")`:`collection "${e}"`,a=r?.length?`. Available keys: ${r.join(", ")}`:"";super(`Input for ${i} not found in inputs map${a}`)}}class Q2 extends tr{constructor(e,n){super(`Subquery uses alias "${e}" which is already used in the parent query. Each alias must be unique across parent and subquery contexts. Parent query aliases: ${n.join(", ")}. Please rename "${e}" in either the parent query or subquery to avoid conflicts.`)}}class J2 extends tr{constructor(e){super(`Unsupported FROM type: ${e}`)}}class Y2 extends tr{constructor(e){super(`Unknown expression type: ${e}`)}}class X2 extends tr{constructor(){super("Reference path cannot be empty")}}class W2 extends tr{constructor(e){super(`Unknown function: ${e}`)}}class $w extends tr{constructor(e){super(`Collection "${e}" not found during compilation of join`)}}class Ls extends er{constructor(e){super(e),this.name="JoinError"}}class eI extends Ls{constructor(e){super(`Unsupported join type: ${e}`)}}class tI extends Ls{constructor(e){super(`Invalid join condition: both expressions refer to the same source "${e}"`)}}class nI extends Ls{constructor(){super("Invalid join condition: expressions must reference source aliases")}}class rI extends Ls{constructor(e){super(`Invalid join condition: left expression refers to an unavailable source "${e}"`)}}class iI extends Ls{constructor(e){super(`Invalid join condition: right expression does not refer to the joined source "${e}"`)}}class sI extends Ls{constructor(){super("Invalid join condition")}}class aI extends Ls{constructor(e){super(`Unsupported join source type: ${e}`)}}class Hf extends er{constructor(e){super(e),this.name="GroupByError"}}class oI extends Hf{constructor(e){super(`Non-aggregate expression '${e}' in SELECT must also appear in GROUP BY clause`)}}class lI extends Hf{constructor(e){super(`Unsupported aggregate function: ${e}`)}}class uI extends Hf{constructor(e){super(`Aggregate function in HAVING clause must also be in SELECT clause: ${e}`)}}class cI extends Hf{constructor(e){super(`Unknown expression type in HAVING clause: ${e}`)}}class qw extends er{constructor(e,n){const r=n instanceof Error?n.message:String(n);super(`Collection "${e}" sync cleanup function threw an error: ${r}`),this.name="SyncCleanupError"}}class fI extends er{constructor(e){super(e),this.name="QueryOptimizerError"}}class hI extends fI{constructor(){super("Cannot combine empty expression list")}}class dI extends tr{constructor(e,n,r,i){super(`Internal error: subscription for alias '${e}' (remapped from '${n}', collection '${r}') is missing in join pipeline. Available aliases: ${i.join(", ")}. This indicates a bug in alias tracking.`)}}class pI extends tr{constructor(e){super(`Internal error: compiler returned aliases without inputs: ${e.join(", ")}. This indicates a bug in query compilation. Please report this issue.`)}}class mI extends tr{constructor(){super("setWindow() can only be called on collections with an ORDER BY clause. Add .orderBy() to your query to enable window movement.")}}const Up=new WeakMap;let gI=1;function Fw(t){if(Up.has(t))return Up.get(t);const e=gI++;return Up.set(t,e),e}const Qg=(t,e,n)=>{const{nulls:r}=n;if(t==null&&e==null)return 0;if(t==null)return r==="first"?-1:1;if(e==null)return r==="first"?1:-1;if(typeof t=="string"&&typeof e=="string"&&n.stringSort==="locale")return t.localeCompare(e,n.locale,n.localeOptions);if(Array.isArray(t)&&Array.isArray(e)){for(let l=0;l<Math.min(t.length,e.length);l++){const c=Qg(t[l],e[l],n);if(c!==0)return c}return t.length-e.length}if(t instanceof Date&&e instanceof Date)return t.getTime()-e.getTime();const i=typeof t=="object",a=typeof e=="object";if(i||a){if(i&&a){const l=Fw(t),c=Fw(e);return l-c}if(i)return 1;if(a)return-1}return t<e?-1:t>e?1:0},yI=(t,e,n)=>Qg(e,t,{...n,nulls:n.nulls==="first"?"last":"first"});function rf(t){return(e,n)=>t.direction==="asc"?Qg(e,n,t):yI(e,n,t)}const Pm=rf({direction:"asc",nulls:"first",stringSort:"locale"});function _I(t,e){if(t.byteLength!==e.byteLength)return!1;for(let n=0;n<t.byteLength;n++)if(t[n]!==e[n])return!1;return!0}const bI=128;function ui(t){return t instanceof Date?t.getTime():(typeof Buffer<"u"&&t instanceof Buffer||t instanceof Uint8Array)&&t.byteLength<=bI?`__u8__${Array.from(t).join(",")}`:t}function vI(t,e){if(t===e)return!0;const n=typeof Buffer<"u"&&t instanceof Buffer||t instanceof Uint8Array,r=typeof Buffer<"u"&&e instanceof Buffer||e instanceof Uint8Array;return n&&r?_I(t,e):!1}function Zt(t){return t==null}function Pa(t){return t===!0}function Bn(t,e=!1){return Yg(t,e)}function Jg(t){return Yg(t,!0)}function Yg(t,e){switch(t.type){case"val":{const n=t.value;return()=>n}case"ref":return e?xI(t):wI(t);case"func":return SI(t,e);default:throw new Y2(t.type)}}function wI(t){const[e,...n]=t.path;if(!e)throw new X2;if(n.length===0)return r=>r[e];if(n.length===1){const r=n[0];return i=>i[e]?.[r]}else return r=>{const i=r[e];if(i===void 0)return;let a=i;for(const l of n){if(a==null)return a;a=a[l]}return a}}function xI(t){const e=t.path;return n=>{let r=n;for(const i of e){if(r==null)return r;r=r[i]}return r}}function SI(t,e){const n=t.args.map(r=>Yg(r,e));switch(t.name){case"eq":{const r=n[0],i=n[1];return a=>{const l=ui(r(a)),c=ui(i(a));return Zt(l)||Zt(c)?null:vI(l,c)}}case"gt":{const r=n[0],i=n[1];return a=>{const l=r(a),c=i(a);return Zt(l)||Zt(c)?null:l>c}}case"gte":{const r=n[0],i=n[1];return a=>{const l=r(a),c=i(a);return Zt(l)||Zt(c)?null:l>=c}}case"lt":{const r=n[0],i=n[1];return a=>{const l=r(a),c=i(a);return Zt(l)||Zt(c)?null:l<c}}case"lte":{const r=n[0],i=n[1];return a=>{const l=r(a),c=i(a);return Zt(l)||Zt(c)?null:l<=c}}case"and":return r=>{let i=!1;for(const a of n){const l=a(r);if(l===!1)return!1;Zt(l)&&(i=!0)}return i?null:!0};case"or":return r=>{let i=!1;for(const a of n){const l=a(r);if(l===!0)return!0;Zt(l)&&(i=!0)}return i?null:!1};case"not":{const r=n[0];return i=>{const a=r(i);return Zt(a)?null:!a}}case"in":{const r=n[0],i=n[1];return a=>{const l=r(a),c=i(a);return Zt(l)?null:Array.isArray(c)?c.includes(l):!1}}case"like":{const r=n[0],i=n[1];return a=>{const l=r(a),c=i(a);return Zt(l)||Zt(c)?null:Vw(l,c,!1)}}case"ilike":{const r=n[0],i=n[1];return a=>{const l=r(a),c=i(a);return Zt(l)||Zt(c)?null:Vw(l,c,!0)}}case"upper":{const r=n[0];return i=>{const a=r(i);return typeof a=="string"?a.toUpperCase():a}}case"lower":{const r=n[0];return i=>{const a=r(i);return typeof a=="string"?a.toLowerCase():a}}case"length":{const r=n[0];return i=>{const a=r(i);return typeof a=="string"||Array.isArray(a)?a.length:0}}case"concat":return r=>n.map(i=>{const a=i(r);try{return String(a??"")}catch{try{return JSON.stringify(a)||""}catch{return"[object]"}}}).join("");case"coalesce":return r=>{for(const i of n){const a=i(r);if(a!=null)return a}return null};case"add":{const r=n[0],i=n[1];return a=>{const l=r(a),c=i(a);return(l??0)+(c??0)}}case"subtract":{const r=n[0],i=n[1];return a=>{const l=r(a),c=i(a);return(l??0)-(c??0)}}case"multiply":{const r=n[0],i=n[1];return a=>{const l=r(a),c=i(a);return(l??0)*(c??0)}}case"divide":{const r=n[0],i=n[1];return a=>{const l=r(a),f=i(a)??0;return f!==0?(l??0)/f:null}}case"isUndefined":{const r=n[0];return i=>r(i)===void 0}case"isNull":{const r=n[0];return i=>r(i)===null}default:throw new W2(t.name)}}function Vw(t,e,n){if(typeof t!="string"||typeof e!="string")return!1;const r=n?t.toLowerCase():t;let a=(n?e.toLowerCase():e).replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return a=a.replace(/%/g,".*"),a=a.replace(/_/g,"."),new RegExp(`^${a}$`).test(r)}function kr(t,e){return Uc(t,e,new Map)}function Uc(t,e,n){if(t===e)return!0;if(t==null||e==null||typeof t!=typeof e)return!1;if(t instanceof Date)return e instanceof Date?t.getTime()===e.getTime():!1;if(t instanceof RegExp)return e instanceof RegExp?t.source===e.source&&t.flags===e.flags:!1;if(t instanceof Map){if(!(e instanceof Map)||t.size!==e.size)return!1;if(n.has(t))return n.get(t)===e;n.set(t,e);const i=Array.from(t.entries()).every(([a,l])=>e.has(a)&&Uc(l,e.get(a),n));return n.delete(t),i}if(t instanceof Set){if(!(e instanceof Set)||t.size!==e.size)return!1;if(n.has(t))return n.get(t)===e;n.set(t,e);const r=Array.from(t),i=Array.from(e);if(r.every(l=>typeof l!="object"))return n.delete(t),r.every(l=>e.has(l));const a=r.length===i.length;return n.delete(t),a}if(ArrayBuffer.isView(t)&&ArrayBuffer.isView(e)&&!(t instanceof DataView)&&!(e instanceof DataView)){const r=t,i=e;if(r.length!==i.length)return!1;for(let a=0;a<r.length;a++)if(r[a]!==i[a])return!1;return!0}if(sf(t)&&sf(e)){const r=jm(t),i=jm(e);return r!==i?!1:typeof t.equals=="function"?t.equals(e):t.toString()===e.toString()}if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;if(n.has(t))return n.get(t)===e;n.set(t,e);const r=t.every((i,a)=>Uc(i,e[a],n));return n.delete(t),r}if(typeof t=="object"){if(n.has(t))return n.get(t)===e;n.set(t,e);const r=Object.keys(t),i=Object.keys(e);if(r.length!==i.length)return n.delete(t),!1;const a=r.every(l=>l in e&&Uc(t[l],e[l],n));return n.delete(t),a}return!1}const EI=["Temporal.Duration","Temporal.Instant","Temporal.PlainDate","Temporal.PlainDateTime","Temporal.PlainMonthDay","Temporal.PlainTime","Temporal.PlainYearMonth","Temporal.ZonedDateTime"];function jm(t){return t[Symbol.toStringTag]}function sf(t){const e=jm(t);return typeof e=="string"&&EI.includes(e)}const Xg={direction:"asc",nulls:"first",stringSort:"locale"};class kI{constructor(e){this.originalIndex=e}lookup(e,n){const r=e==="gt"?"lt":e==="gte"?"lte":e==="lt"?"gt":e==="lte"?"gte":e;return this.originalIndex.lookup(r,n)}rangeQuery(e={}){return this.originalIndex.rangeQueryReversed(e)}rangeQueryReversed(e={}){return this.originalIndex.rangeQuery(e)}take(e,n,r){return this.originalIndex.takeReversed(e,n,r)}takeReversed(e,n,r){return this.originalIndex.take(e,n,r)}get orderedEntriesArray(){return this.originalIndex.orderedEntriesArrayReversed}get orderedEntriesArrayReversed(){return this.originalIndex.orderedEntriesArray}supports(e){return this.originalIndex.supports(e)}matchesField(e){return this.originalIndex.matchesField(e)}matchesCompareOptions(e){return this.originalIndex.matchesCompareOptions(e)}matchesDirection(e){return this.originalIndex.matchesDirection(e)}getStats(){return this.originalIndex.getStats()}add(e,n){this.originalIndex.add(e,n)}remove(e,n){this.originalIndex.remove(e,n)}update(e,n,r){this.originalIndex.update(e,n,r)}build(e){this.originalIndex.build(e)}clear(){this.originalIndex.clear()}get keyCount(){return this.originalIndex.keyCount}equalityLookup(e){return this.originalIndex.equalityLookup(e)}inArrayLookup(e){return this.originalIndex.inArrayLookup(e)}get indexedKeysSet(){return this.originalIndex.indexedKeysSet}get valueMapData(){return this.originalIndex.valueMapData}}function Kl(t,e,n){const r=n??{...Xg,...t.compareOptions};for(const i of t.indexes.values())if(i.matchesField(e)&&i.matchesCompareOptions(r))return i.matchesDirection(r.direction)?i:new kI(i)}function CI(t){if(t.length===0)return new Set;if(t.length===1)return new Set(t[0]);let e=new Set(t[0]);for(let n=1;n<t.length;n++){const r=new Set;for(const i of e)t[n].has(i)&&r.add(i);e=r}return e}function TI(t){const e=new Set;for(const n of t)for(const r of n)e.add(r);return e}function AI(t,e){return Wg(t,e)}function Wg(t,e){if(t.type==="func")switch(t.name){case"eq":case"gt":case"gte":case"lt":case"lte":return OI(t,e);case"and":return II(t,e);case"or":return NI(t,e);case"in":return DI(t,e)}return{canOptimize:!1,matchingKeys:new Set}}function RI(t,e){if(t.type!=="func"||t.args.length<2)return{canOptimize:!1,matchingKeys:new Set};const n=new Map;for(const r of t.args)if(r.type==="func"&&["gt","gte","lt","lte"].includes(r.name)){const i=r;if(i.args.length===2){const a=i.args[0],l=i.args[1];let c=null,f=null,h=i.name;if(a.type==="ref"&&l.type==="val")c=a,f=l;else if(a.type==="val"&&l.type==="ref")switch(c=l,f=a,h){case"gt":h="lt";break;case"gte":h="lte";break;case"lt":h="gt";break;case"lte":h="gte";break}if(c&&f){const p=c.path.join("."),_=f.value;n.has(p)||n.set(p,[]),n.get(p).push({operation:h,value:_})}}}for(const[r,i]of n)if(i.length>=2){const a=r.split("."),l=Kl(e,a);if(l&&l.supports("gt")&&l.supports("lt")){let c,f,h=!0,m=!0;for(const{operation:_,value:y}of i)switch(_){case"gt":(c===void 0||y>c)&&(c=y,h=!1);break;case"gte":(c===void 0||y>c)&&(c=y,h=!0);break;case"lt":(f===void 0||y<f)&&(f=y,m=!1);break;case"lte":(f===void 0||y<f)&&(f=y,m=!0);break}return{canOptimize:!0,matchingKeys:l.rangeQuery({from:c,to:f,fromInclusive:h,toInclusive:m})}}}return{canOptimize:!1,matchingKeys:new Set}}function OI(t,e){if(t.type!=="func"||t.args.length!==2)return{canOptimize:!1,matchingKeys:new Set};const n=t.args[0],r=t.args[1];let i=null,a=null,l=t.name;if(n.type==="ref"&&r.type==="val")i=n,a=r;else if(n.type==="val"&&r.type==="ref")switch(i=r,a=n,l){case"gt":l="lt";break;case"gte":l="lte";break;case"lt":l="gt";break;case"lte":l="gte";break}if(i&&a){const c=i.path,f=Kl(e,c);if(f){const h=a.value,m=l;return f.supports(m)?{canOptimize:!0,matchingKeys:f.lookup(m,h)}:{canOptimize:!1,matchingKeys:new Set}}}return{canOptimize:!1,matchingKeys:new Set}}function II(t,e){if(t.type!=="func"||t.args.length<2)return{canOptimize:!1,matchingKeys:new Set};const n=RI(t,e);if(n.canOptimize)return n;const r=[];for(const i of t.args){const a=Wg(i,e);a.canOptimize&&r.push(a)}if(r.length>0){const i=r.map(l=>l.matchingKeys);return{canOptimize:!0,matchingKeys:CI(i)}}return{canOptimize:!1,matchingKeys:new Set}}function NI(t,e){if(t.type!=="func"||t.args.length<2)return{canOptimize:!1,matchingKeys:new Set};const n=[];for(const r of t.args){const i=Wg(r,e);i.canOptimize&&n.push(i)}if(n.length>0){const r=n.map(a=>a.matchingKeys);return{canOptimize:!0,matchingKeys:TI(r)}}return{canOptimize:!1,matchingKeys:new Set}}function DI(t,e){if(t.type!=="func"||t.args.length!==2)return{canOptimize:!1,matchingKeys:new Set};const n=t.args[0],r=t.args[1];if(n.type==="ref"&&r.type==="val"&&Array.isArray(r.value)){const i=n.path,a=r.value,l=Kl(e,i);if(l){if(l.supports("in"))return{canOptimize:!0,matchingKeys:l.lookup("in",a)};if(l.supports("eq")){const c=new Set;for(const f of a){const h=l.lookup("eq",f);for(const m of h)c.add(m)}return{canOptimize:!0,matchingKeys:c}}}}return{canOptimize:!1,matchingKeys:new Set}}class MI extends Map{constructor(e,n){super(n),this.defaultValue=e}get(e){return this.has(e)?super.get(e):this.defaultValue()}update(e,n){const r=this.get(e),i=n(r);return this.set(e,i),i}}const $p=3e4;function qp(t,e){if(e.length<=$p)t.push(...e);else for(let n=0;n<e.length;n+=$p){const r=e.slice(n,n+$p);t.push(...r)}}function LI(t,e,n){let r=0,i=t.length;for(;r<i;){const a=Math.floor((r+i)/2),l=n(t[a],e);if(l<0)r=a+1;else if(l>0)i=a;else return a}return r}class zI{constructor(){this.objectIds=new WeakMap,this.nextId=0}getId(e){if(typeof e!="object"||e===null){const n=String(e);let r=0;for(let i=0;i<n.length;i++){const a=n.charCodeAt(i);r=(r<<5)-r+a,r=r&r}return r}return this.objectIds.has(e)||this.objectIds.set(e,this.nextId++),this.objectIds.get(e)}getStringId(e){return e===null?"null":e===void 0?"undefined":typeof e!="object"?`str_${String(e)}`:`obj_${this.getId(e)}`}}const Fp=new zI;function PI(t,e){const[n,r]=t,[i,a]=e,l=[...vc(n,Math.min(r,i)),...vc(Math.max(n,a),r)],c=[...vc(i,Math.min(a,n)),...vc(Math.max(i,r),a)];return{onlyInA:l,onlyInB:c}}function vc(t,e){const n=[];for(let r=t;r<e;r++)n.push(r);return n}function af(t,e){return typeof t==typeof e?t<e?-1:t>e?1:0:typeof t=="string"?-1:1}const jI=un(),BI=un(),UI=un(),$I=un(),qI=un();function un(){return Math.random()*(2**31-1)>>>0}const FS=new ArrayBuffer(8),FI=new DataView(FS),Bi=new Uint8Array(FS);class Gf{constructor(){this.hash=jI,this.length=0,this.carry=0,this.carryBytes=0}_mix(e){e=Math.imul(e,3432918353),e=e<<15|e>>>17,e=Math.imul(e,461845907),this.hash^=e,this.hash=this.hash<<13|this.hash>>>19,this.hash=Math.imul(this.hash,5)+3864292196}writeByte(e){this.carry|=(e&255)<<8*this.carryBytes,this.carryBytes++,this.length++,this.carryBytes===4&&(this._mix(this.carry>>>0),this.carry=0,this.carryBytes=0)}update(e){switch(typeof e){case"symbol":{this.update(qI);const n=e.description;if(!n)return;for(let r=0;r<n.length;r++){const i=n.charCodeAt(r);this.writeByte(i&255),this.writeByte(i>>>8&255)}return}case"string":this.update(BI);for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);this.writeByte(r&255),this.writeByte(r>>>8&255)}return;case"number":FI.setFloat64(0,e,!0),this.writeByte(Bi[0]),this.writeByte(Bi[1]),this.writeByte(Bi[2]),this.writeByte(Bi[3]),this.writeByte(Bi[4]),this.writeByte(Bi[5]),this.writeByte(Bi[6]),this.writeByte(Bi[7]);return;case"bigint":{let n=e;for(n<0n?(n=-n,this.update($I)):this.update(UI);n>0n;)this.writeByte(Number(n&0xffn)),n>>=8n;e===0n&&this.writeByte(0);return}default:throw new TypeError(`Unsupported input type: ${typeof e}`)}}digest(){if(this.carryBytes>0){let e=this.carry>>>0;e=Math.imul(e,3432918353),e=e<<15|e>>>17,e=Math.imul(e,461845907),this.hash^=e}return this.hash^=this.length,this.hash^=this.hash>>>16,this.hash=Math.imul(this.hash,2246822507),this.hash^=this.hash>>>13,this.hash=Math.imul(this.hash,3266489909),this.hash^=this.hash>>>16,this.hash>>>0}}const VI=un(),HI=un(),GI=un(),KI=un(),ZI=un(),QI=un(),JI=un(),YI=un(),XI=un(),WI=un(),eN=un(),tN=un(),nN=128,Il=new WeakMap;function xn(t){const e=new Gf;return VS(e,t),e.digest()}function rN(t){const e=Il.get(t);if(e!==void 0)return e;let n;if(t instanceof Date)n=iN(t);else if(typeof Buffer<"u"&&t instanceof Buffer||t instanceof Uint8Array)if(t.byteLength<=nN)n=sN(t);else return Bm(t);else{if(t instanceof File)return Bm(t);{let r=t,i=YI;t instanceof Array&&(i=XI),t instanceof Map&&(i=WI,r=[...t.entries()]),t instanceof Set&&(i=eN,r=[...t.entries()]),n=aN(r,i)}}return Il.set(t,n),n}function iN(t){const e=new Gf;return e.update(JI),e.update(t.getTime()),e.digest()}function sN(t){const e=new Gf;e.update(tN),e.update(t.byteLength);for(let n=0;n<t.byteLength;n++)e.writeByte(t[n]);return e.digest()}function aN(t,e){const n=new Gf;n.update(e);const r=Object.keys(t);r.sort(lN);for(const i of r)n.update(ZI),n.update(i),VS(n,t[i]);return n.digest()}function VS(t,e){if(e===null){t.update(GI);return}switch(typeof e){case"undefined":t.update(KI);return;case"boolean":t.update(e?VI:HI);return;case"number":t.update(isNaN(e)?NaN:e===0?0:e);return;case"bigint":case"string":case"symbol":t.update(e);return;case"object":t.update(oN(e));return;case"function":t.update(Bm(e));return;default:console.warn(`Ignored input during hashing because it is of type ${typeof e} which is not supported`)}}function oN(t){let e=Il.get(t);return e===void 0&&(e=rN(t)),e}let Hw=1;function Bm(t){let e=Il.get(t);return e===void 0&&(e=Hw^QI,Hw++,Il.set(t,e)),e}function lN(t,e){return t.localeCompare(e)}class Bt{#e;constructor(e=[]){this.#e=e}toString(e=!1){return`MultiSet(${JSON.stringify(this.#e,null,e?2:void 0)})`}toJSON(){return JSON.stringify(Array.from(this.getInner()))}static fromJSON(e){return new Bt(JSON.parse(e))}map(e){return new Bt(this.#e.map(([n,r])=>[e(n),r]))}filter(e){return new Bt(this.#e.filter(([n,r])=>e(n)))}negate(){return new Bt(this.#e.map(([e,n])=>[e,-n]))}concat(e){const n=[];return qp(n,this.#e),qp(n,e.getInner()),new Bt(n)}consolidate(){if(this.#e.length>0){const e=this.#e[0]?.[0];if(Array.isArray(e)&&e.length===2)return this.#t()}return this.#n()}#t(){const e=new Map,n=new Map,r=a=>{if(a.length!==2)throw new Error("Expected tuple of length 2");const[l,c]=a;return`${Fp.getStringId(l)}|${Fp.getStringId(c)}`};for(const[a,l]of this.#e){if(!Array.isArray(a)||a.length!==2)return this.#n();const[c,f]=a;if(typeof c!="string"&&typeof c!="number")return this.#n();let h;Array.isArray(f)&&f.length===2?h=r(f):h=Fp.getStringId(f);const m=c+"|"+h;e.set(m,(e.get(m)||0)+l),n.has(m)||n.set(m,a)}const i=[];for(const[a,l]of e)l!==0&&i.push([n.get(a),l]);return new Bt(i)}#n(){const e=new MI(()=>0),n=new Map;let r=!1,i=!1,a=!1;for(const[f,h]of this.#e)if(typeof f=="string")r=!0;else if(typeof f=="number")i=!0;else{a=!0;break}const l=a||r&&i;for(const[f,h]of this.#e){const m=l?xn(f):f;l&&!n.has(m)&&n.set(m,f),e.update(m,p=>p+h)}const c=[];for(const[f,h]of e.entries())if(h!==0){const m=l?n.get(f):f;c.push([m,h])}return new Bt(c)}extend(e){const n=e instanceof Bt?e.getInner():e;qp(this.#e,n)}add(e,n){n!==0&&this.#e.push([e,n])}getInner(){return this.#e}}class uN{#e;constructor(e){this.#e=e}drain(){const e=[...this.#e].reverse();return this.#e.length=0,e}isEmpty(){return this.#e.length===0}}class Br{#e=[];sendData(e){e instanceof Bt||(e=new Bt(e));for(const n of this.#e)n.unshift(e)}newReader(){const e=[];return this.#e.push(e),new uN(e)}}class HS{constructor(e,n,r){this.id=e,this.inputs=n,this.output=r}hasPendingWork(){return this.inputs.some(e=>!e.isEmpty())}}class Za extends HS{constructor(e,n,r){super(e,[n],r),this.id=e}inputMessages(){return this.inputs[0].drain()}}class cN extends HS{constructor(e,n,r,i){super(e,[n,r],i),this.id=e}inputAMessages(){return this.inputs[0].drain()}inputBMessages(){return this.inputs[1].drain()}}class ey extends Za{run(){for(const e of this.inputMessages())this.output.sendData(this.inner(e))}}class fN{#e=[];#t=0;#n=!1;constructor(){}#r(){if(this.#n)throw new Error("Graph already finalized")}getNextOperatorId(){return this.#r(),this.#t++}newInput(){this.#r();const e=new Br;return new hN(this,e)}addOperator(e){this.#r(),this.#e.push(e)}finalize(){this.#r(),this.#n=!0}step(){if(!this.#n)throw new Error("Graph not finalized");for(const e of this.#e)e.run()}pendingWork(){return this.#e.some(e=>e.hasPendingWork())}run(){for(;this.pendingWork();)this.step()}}class Ur{#e;#t;constructor(e,n){this.#e=e,this.#t=n}connectReader(){return this.#t.newReader()}get writer(){return this.#t}get graph(){return this.#e}pipe(...e){return e.reduce((n,r)=>r(n),this)}}class hN extends Ur{sendData(e){this.writer.sendData(e)}}class dN extends ey{#e;constructor(e,n,r,i){super(e,n,r),this.#e=i}inner(e){return e.map(this.#e)}}function Sn(t){return e=>{const n=new Ur(e.graph,new Br),r=new dN(e.graph.getNextOperatorId(),e.connectReader(),n.writer,t);return e.graph.addOperator(r),n}}const rl=Symbol("NO_PREFIX");class Gw extends Map{addValue(e,n){if(n===0)return this.size===0;const r=_l(e),i=this.get(r);if($c(i)){const[a,l]=i;if(_l(a)!==r)throw new Error("Mismatching prefixes, this should never happen");if(a===e||xn(a)===xn(e)){const f=l+n;f===0?this.delete(r):this.set(r,[e,f])}else{const f=new il;f.set(xn(a),i),f.set(xn(e),[e,n]),this.set(r,f)}}else i===void 0?this.set(r,[e,n]):i.addValue(e,n)&&this.delete(r);return this.size===0}}class il extends Map{addValue(e,n){if(n===0)return this.size===0;const r=xn(e),i=this.get(r);if(i){const[,a]=i,l=a+n;l===0?this.delete(r):this.set(r,[e,l])}else this.set(r,[e,n]);return this.size===0}}class Fi{#e;#t=new Map;constructor(){this.#e=new Map}static fromMultiSets(e){const n=new Fi;for(const r of e)for(const[i,a]of r.getInner()){const[l,c]=i;n.addValue(l,[c,a])}return n}toString(e=!1){return`Index(${JSON.stringify([...this.entries()],void 0,e?2:void 0)})`}get size(){return this.#e.size}has(e){return this.#e.has(e)}hasPresence(e){return(this.#t.get(e)||0)!==0}getConsolidatedMultiplicity(e){return this.#t.get(e)||0}getPresenceKeys(){return this.#t.keys()}get(e){return[...this.getIterator(e)]}*getIterator(e){const n=this.#e.get(e);if($c(n))yield n;else{if(n===void 0)return;if(n instanceof il)for(const r of n.values())yield r;else for(const r of n.values())if($c(r))yield r;else for(const i of r.values())yield i}}*entries(){for(const e of this.#e.keys())for(const n of this.getIterator(e))yield[e,n]}*entriesIterators(){for(const e of this.#e.keys())yield[e,this.getIterator(e)]}addValue(e,n){const[r,i]=n;if(i===0)return;const a=(this.#t.get(e)||0)+i;a===0?this.#t.delete(e):this.#t.set(e,a);const l=this.#e.get(e);if(l===void 0){this.#e.set(e,n);return}if($c(l)){this.#n(e,l,r,i);return}if(l instanceof il){const c=_l(r);if(c!==rl){const f=new Gw;f.set(rl,l),f.set(c,n),this.#e.set(e,f)}else l.addValue(r,i)&&this.#e.delete(e)}else l.addValue(r,i)&&this.#e.delete(e)}#n(e,n,r,i){const[a,l]=n;if(a===r){const h=l+i;h===0?this.#e.delete(e):this.#e.set(e,[r,h]);return}const c=_l(r),f=_l(a);if(f===c&&(a===r||xn(a)===xn(r))){const h=l+i;h===0?this.#e.delete(e):this.#e.set(e,[r,h]);return}if(f===rl&&c===rl){const h=new il;h.set(xn(a),n),h.set(xn(r),[r,i]),this.#e.set(e,h)}else{const h=new Gw;if(f===c){const m=new il;m.set(xn(a),n),m.set(xn(r),[r,i]),h.set(f,m)}else h.set(f,n),h.set(c,[r,i]);this.#e.set(e,h)}}append(e){for(const[n,r]of e.entries())this.addValue(n,r)}join(e){const n=[];if(this.size<=e.size)for(const[r,i]of this.entriesIterators()){if(!e.has(r))continue;const a=e.get(r);for(const[l,c]of i)for(const[f,h]of a)c!==0&&h!==0&&n.push([[r,[l,f]],c*h])}else for(const[r,i]of e.entriesIterators()){if(!this.has(r))continue;const a=this.get(r);for(const[l,c]of i)for(const[f,h]of a)h!==0&&c!==0&&n.push([[r,[f,l]],h*c])}return new Bt(n)}}function _l(t){return Array.isArray(t)&&(typeof t[0]=="string"||typeof t[0]=="number"||typeof t[0]=="bigint")?t[0]:rl}function $c(t){return Array.isArray(t)}class pN extends Za{#e=new Fi;#t=new Fi;#n;constructor(e,n,r,i){super(e,n,r),this.#n=i}run(){const e=new Set;for(const r of this.inputMessages())for(const[i,a]of r.getInner()){const[l,c]=i;this.#e.addValue(l,[c,a]),e.add(l)}const n=[];for(const r of e){const i=this.#e.get(r),a=this.#t.get(r),l=this.#n(i),c=new Map,f=new Map;for(const[h,m]of l){const p=c.get(h)??0;c.set(h,p+m)}for(const[h,m]of a){const p=f.get(h)??0;f.set(h,p+m)}for(const[h,m]of f)c.has(h)||(n.push([[r,h],-m]),this.#t.addValue(r,[h,-m]));for(const[h,m]of c)f.has(h)||m!==0&&(n.push([[r,h],m]),this.#t.addValue(r,[h,m]));for(const[h,m]of c){const p=f.get(h);if(p!==void 0){const _=m-p;_!==0&&(n.push([[r,h],_]),this.#t.addValue(r,[h,_]))}}}n.length>0&&this.output.sendData(new Bt(n))}}function mN(t){return e=>{const n=new Ur(e.graph,new Br),r=new pN(e.graph.getNextOperatorId(),e.connectReader(),n.writer,t);return e.graph.addOperator(r),n}}function Kw(t){return"pipe"in t}function Zw(t,e={}){const n=Object.fromEntries(Object.entries(e).filter(([r,i])=>!Kw(i)));return Object.fromEntries(Object.entries(e).filter(([r,i])=>Kw(i))),r=>{const i="__original_key__";return r.pipe(Sn(c=>{const f=t(c),h=JSON.stringify(f),m={};m[i]=f;for(const[p,_]of Object.entries(n))m[p]=_.preMap(c);return[h,m]})).pipe(mN(c=>{let f=0;for(const[p,_]of c)f+=_;if(f<=0)return[];const h={},m=c[0]?.[0]?.[i];h[i]=m;for(const[p,_]of Object.entries(n)){const y=c.map(([v,w])=>[v[p],w]);h[p]=_.reduce(y)}return[[h,1]]})).pipe(Sn(([c,f])=>{const h=f[i],m={};Object.assign(m,h);for(const[p,_]of Object.entries(n))_.postMap?m[p]=_.postMap(f[p]):m[p]=f[p];return[c,m]}))}}function gN(t=e=>e){return{preMap:e=>t(e),reduce:e=>{let n=0;for(const[r,i]of e)n+=r*i;return n}}}function yN(t=e=>e){return{preMap:e=>t(e)==null?0:1,reduce:e=>{let n=0;for(const[r,i]of e)n+=r*i;return n}}}function _N(t=e=>e){return{preMap:e=>({sum:t(e),count:0}),reduce:e=>{let n=0,r=0;for(const[i,a]of e)n+=i.sum*a,r+=a;return{sum:n,count:r}},postMap:e=>e.sum/e.count}}function bN(t){const e=t??(n=>n);return{preMap:n=>e(n),reduce:n=>{let r;for(const[i,a]of n)(!r||i&&i<r)&&(r=i);return r}}}function vN(t){const e=t??(n=>n);return{preMap:n=>e(n),reduce:n=>{let r;for(const[i,a]of n)(!r||i&&i>r)&&(r=i);return r}}}const wN={sum:gN,count:yN,avg:_N,min:bN,max:vN};class xN extends ey{#e;constructor(e,n,r,i){super(e,n,r),this.#e=i}inner(e){return this.#e(e),e}}function SN(t){return e=>{const n=new Ur(e.graph,new Br),r=new xN(e.graph.getNextOperatorId(),e.connectReader(),n.writer,t);return e.graph.addOperator(r),n}}class EN extends ey{#e;constructor(e,n,r,i){super(e,n,r),this.#e=i}inner(e){return e.filter(this.#e)}}function Vi(t){return e=>{const n=new Ur(e.graph,new Br),r=new EN(e.graph.getNextOperatorId(),e.connectReader(),n.writer,t);return e.graph.addOperator(r),n}}class kN extends Za{#e;constructor(e,n,r,i){super(e,n,r),this.#e=i}run(){for(const e of this.inputMessages())this.#e(e),this.output.sendData(e)}}function CN(t){return e=>{const n=new Ur(e.graph,new Br),r=new kN(e.graph.getNextOperatorId(),e.connectReader(),n.writer,t);return e.graph.addOperator(r),n}}class TN extends Za{run(){const e=this.inputMessages();if(e.length===0)return;const n=new Bt;for(const i of e)n.extend(i);const r=n.consolidate();r.getInner().length>0&&this.output.sendData(r)}}function AN(){return t=>{const e=new Ur(t.graph,new Br),n=new TN(t.graph.getNextOperatorId(),t.connectReader(),e.writer);return t.graph.addOperator(n),e}}class RN extends cN{#e=new Fi;#t=new Fi;#n;constructor(e,n,r,i,a="inner"){super(e,n,r,i),this.#n=a}run(){const e=Fi.fromMultiSets(this.inputAMessages()),n=Fi.fromMultiSets(this.inputBMessages());if(e.size===0&&n.size===0)return;const r=new Bt;this.#n!=="anti"&&this.emitInnerResults(e,n,r),(this.#n==="left"||this.#n==="full"||this.#n==="anti")&&this.emitLeftOuterResults(e,n,r),(this.#n==="right"||this.#n==="full")&&this.emitRightOuterResults(e,n,r),this.#e.append(e),this.#t.append(n),r.getInner().length>0&&this.output.sendData(r)}emitInnerResults(e,n,r){e.size>0&&r.extend(e.join(this.#t)),n.size>0&&r.extend(this.#e.join(n)),e.size>0&&n.size>0&&r.extend(e.join(n))}emitLeftOuterResults(e,n,r){if(e.size>0)for(const[i,a]of e.entriesIterators()){const l=this.#t.getConsolidatedMultiplicity(i),c=n.getConsolidatedMultiplicity(i);if(l+c===0)for(const[h,m]of a)m!==0&&r.add([i,[h,null]],m)}if(n.size>0)for(const i of n.getPresenceKeys()){const a=this.#t.getConsolidatedMultiplicity(i),l=n.getConsolidatedMultiplicity(i);if(l===0)continue;const c=a+l;if(a===0==(c===0))continue;const f=a===0;for(const[h,m]of this.#e.getIterator(i))m!==0&&r.add([i,[h,null]],f?-m:+m)}}emitRightOuterResults(e,n,r){if(n.size>0)for(const[i,a]of n.entriesIterators()){const l=this.#e.getConsolidatedMultiplicity(i),c=e.getConsolidatedMultiplicity(i);if(l+c===0)for(const[h,m]of a)m!==0&&r.add([i,[null,h]],m)}if(e.size>0)for(const i of e.getPresenceKeys()){const a=this.#e.getConsolidatedMultiplicity(i),l=e.getConsolidatedMultiplicity(i);if(l===0)continue;const c=a+l;if(a===0==(c===0))continue;const f=a===0;for(const[h,m]of this.#t.getIterator(i))m!==0&&r.add([i,[null,h]],f?-m:+m)}}}function ON(t,e="inner"){return n=>{if(n.graph!==t.graph)throw new Error("Cannot join streams from different graphs");const r=new Ur(n.graph,new Br),i=new RN(n.graph.getNextOperatorId(),n.connectReader(),t.connectReader(),r.writer,e);return n.graph.addOperator(i),r}}class IN extends Za{#e;#t;constructor(e,n,r,i=a=>a){super(e,n,r),this.#e=i,this.#t=new Map}run(){const e=new Map;for(const r of this.inputMessages())for(const[i,a]of r.getInner()){const l=xn(this.#e(i)),f=(e.get(l)?.[0]??this.#t.get(l)??0)+a;e.set(l,[f,i])}const n=[];for(const[r,[i,a]]of e.entries()){const l=this.#t.get(r)??0;i===0?this.#t.delete(r):this.#t.set(r,i),l<=0&&i>0?n.push([[xn(this.#e(a)),a[1]],1]):l>0&&i<=0&&n.push([[xn(this.#e(a)),a[1]],-1])}n.length>0&&this.output.sendData(new Bt(n))}}function NN(t=e=>e){return e=>{const n=new Ur(e.graph,new Br),r=new IN(e.graph.getNextOperatorId(),e.connectReader(),n.writer,t);return e.graph.addOperator(r),n}}const DN="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function Na(t,e,n){const r=n[0];if(e!=null&&t>=e)throw new Error(t+" >= "+e);if(t.slice(-1)===r||e&&e.slice(-1)===r)throw new Error("trailing zero");if(e){let l=0;for(;(t[l]||r)===e[l];)l++;if(l>0)return e.slice(0,l)+Na(t.slice(l),e.slice(l),n)}const i=t?n.indexOf(t[0]):0,a=e!=null?n.indexOf(e[0]):n.length;if(a-i>1){const l=Math.round(.5*(i+a));return n[l]}else return e&&e.length>1?e.slice(0,1):n[i]+Na(t.slice(1),null,n)}function GS(t){if(t.length!==KS(t[0]))throw new Error("invalid integer part of order key: "+t)}function KS(t){if(t>="a"&&t<="z")return t.charCodeAt(0)-97+2;if(t>="A"&&t<="Z")return 90-t.charCodeAt(0)+2;throw new Error("invalid order key head: "+t)}function sl(t){const e=KS(t[0]);if(e>t.length)throw new Error("invalid order key: "+t);return t.slice(0,e)}function Qw(t,e){if(t==="A"+e[0].repeat(26))throw new Error("invalid order key: "+t);const n=sl(t);if(t.slice(n.length).slice(-1)===e[0])throw new Error("invalid order key: "+t)}function Jw(t,e){GS(t);const[n,...r]=t.split("");let i=!0;for(let a=r.length-1;i&&a>=0;a--){const l=e.indexOf(r[a])+1;l===e.length?r[a]=e[0]:(r[a]=e[l],i=!1)}if(i){if(n==="Z")return"a"+e[0];if(n==="z")return null;const a=String.fromCharCode(n.charCodeAt(0)+1);return a>"a"?r.push(e[0]):r.pop(),a+r.join("")}else return n+r.join("")}function MN(t,e){GS(t);const[n,...r]=t.split("");let i=!0;for(let a=r.length-1;i&&a>=0;a--){const l=e.indexOf(r[a])-1;l===-1?r[a]=e.slice(-1):(r[a]=e[l],i=!1)}if(i){if(n==="a")return"Z"+e.slice(-1);if(n==="A")return null;const a=String.fromCharCode(n.charCodeAt(0)-1);return a<"Z"?r.push(e.slice(-1)):r.pop(),a+r.join("")}else return n+r.join("")}function LN(t,e,n=DN){if(t!=null&&Qw(t,n),e!=null&&Qw(e,n),t!=null&&e!=null&&t>=e)throw new Error(t+" >= "+e);if(t==null){if(e==null)return"a"+n[0];const f=sl(e),h=e.slice(f.length);if(f==="A"+n[0].repeat(26))return f+Na("",h,n);if(f<e)return f;const m=MN(f,n);if(m==null)throw new Error("cannot decrement any more");return m}if(e==null){const f=sl(t),h=t.slice(f.length),m=Jw(f,n);return m??f+Na(h,null,n)}const r=sl(t),i=t.slice(r.length),a=sl(e),l=e.slice(a.length);if(r===a)return r+Na(i,l,n);const c=Jw(r,n);if(c==null)throw new Error("cannot increment any more");return c<e?c:r+Na(i,null,n)}class Yw{#e=[];#t;#n;#r;constructor(e,n,r){this.#n=e,this.#r=e+n,this.#t=r}get size(){const e=this.#n,n=this.#r-this.#n,r=this.#e.length-e;return Math.max(0,Math.min(n,r))}move({offset:e,limit:n}){const r=this.#n,i=this.#r-this.#n,a=[this.#n,this.#r===1/0?this.#n+this.size:this.#r];this.#n=e??r,this.#r=this.#n+(n??i);const l=[this.#n,this.#r===1/0?Math.max(this.#n+this.size,a[1]):this.#r],{onlyInA:c,onlyInB:f}=PI(a,l),h=[];f.forEach(p=>{const _=this.#e[p];_&&h.push(_)});const m=[];return c.forEach(p=>{const _=this.#e[p];_&&m.push(_)}),{moveIns:h,moveOuts:m,changes:c.length+f.length>0}}insert(e){const n={moveIn:null,moveOut:null},r=this.#i(e),i=r===0?null:ex(this.#e[r-1]),a=r===this.#e.length?null:ex(this.#e[r]),l=LN(i,a),c=Xw(e,l);if(this.#e.splice(r,0,c),r<this.#r){const f=Math.max(r,this.#n);f<this.#e.length&&(n.moveIn=this.#e[f],this.#r<this.#e.length&&(n.moveOut=this.#e[this.#r]))}return n}delete(e){const n={moveIn:null,moveOut:null},r=this.#i(e),[i]=this.#e.splice(r,1);if(r<this.#r){if(n.moveOut=i,r<this.#n){const l=this.#n-1;l<this.#e.length?n.moveOut=this.#e[l]:n.moveOut=null}const a=this.#r-1;a<this.#e.length&&(n.moveIn=this.#e[a])}return n}#i(e){return LI(this.#e,Xw(e,""),(n,r)=>this.#t(Ww(n),Ww(r)))}}class zN extends Za{#e=new Map;#t;constructor(e,n,r,i,a){super(e,n,r);const l=a.limit??1/0,c=a.offset??0;this.#t=this.createTopK(c,l,jN(i)),a.setSizeCallback?.(()=>this.#t.size),a.setWindowFn?.(this.moveTopK.bind(this))}createTopK(e,n,r){return new Yw(e,n,r)}moveTopK({offset:e,limit:n}){if(!(this.#t instanceof Yw))throw new Error("Cannot move B+-tree implementation of TopK with fractional index");const r=[],i=this.#t.move({offset:e,limit:n});i.moveIns.forEach(a=>this.handleMoveIn(a,r)),i.moveOuts.forEach(a=>this.handleMoveOut(a,r)),i.changes&&this.output.sendData(new Bt(r))}run(){const e=[];for(const n of this.inputMessages())for(const[r,i]of n.getInner()){const[a,l]=r;this.processElement(a,l,i,e)}e.length>0&&this.output.sendData(new Bt(e))}processElement(e,n,r,i){const{oldMultiplicity:a,newMultiplicity:l}=this.addKey(e,r);let c={moveIn:null,moveOut:null};a<=0&&l>0?c=this.#t.insert([e,n]):a>0&&l<=0&&(c=this.#t.delete([e,n])),this.handleMoveIn(c.moveIn,i),this.handleMoveOut(c.moveOut,i)}handleMoveIn(e,n){if(e){const[[r,i],a]=e;n.push([[r,[i,a]],1])}}handleMoveOut(e,n){if(e){const[[r,i],a]=e;n.push([[r,[i,a]],-1])}}getMultiplicity(e){return this.#e.get(e)??0}addKey(e,n){const r=this.getMultiplicity(e),i=r+n;return i===0?this.#e.delete(e):this.#e.set(e,i),{oldMultiplicity:r,newMultiplicity:i}}}function PN(t,e){const n=e||{};return r=>{const i=new Ur(r.graph,new Br),a=new zN(r.graph.getNextOperatorId(),r.connectReader(),i.writer,t,n);return r.graph.addOperator(a),i}}function Xw(t,e){return[t,e]}function Ww(t){return t[0]}function ex(t){return t[1]}function jN(t){return([e,n],[r,i])=>{const a=t(n,i);return a!==0?a:af(e,r)}}function BN(t,e,n){const r=n?.limit??1/0,i=n?.offset??0,a=n?.setSizeCallback,l=n?.setWindowFn,c=n?.comparator??((f,h)=>f===h?0:f<h?-1:1);return f=>f.pipe(t((h,m)=>c(e(h),e(m)),{limit:r,offset:i,setSizeCallback:a,setWindowFn:l}),AN())}function UN(t,e){return BN(PN,t,e)}class $N{constructor(e,n,r){this._root=Vp,this._size=0,this._maxNodeSize=r>=4?Math.min(r,256):32,this._compare=e,n&&this.setPairs(n)}get size(){return this._size}get length(){return this._size}get isEmpty(){return this._size===0}clear(){this._root=Vp,this._size=0}get(e,n){return this._root.get(e,n,this)}set(e,n,r){this._root.isShared&&(this._root=this._root.clone());const i=this._root.set(e,n,r,this);return i===!0||i===!1?i:(this._root=new ty([this._root,i]),!0)}has(e){return this.forRange(e,e,!0,void 0)!==0}delete(e){return this.editRange(e,e,!0,FN)!==0}get maxNodeSize(){return this._maxNodeSize}minKey(){return this._root.minKey()}maxKey(){return this._root.maxKey()}keysArray(){const e=[];return this._root.forRange(this.minKey(),this.maxKey(),!0,!1,this,0,(n,r)=>{e.push(n)}),e}nextHigherPair(e,n){return n=n||[],e===void 0?this._root.minPair(n):this._root.getPairOrNextHigher(e,this._compare,!1,n)}nextHigherKey(e){const n=this.nextHigherPair(e,tx);return n&&n[0]}nextLowerPair(e,n){return n=n||[],e===void 0?this._root.maxPair(n):this._root.getPairOrNextLower(e,this._compare,!1,n)}nextLowerKey(e){const n=this.nextLowerPair(e,tx);return n&&n[0]}setPairs(e,n){let r=0;for(const i of e)this.set(i[0],i[1],n)&&r++;return r}forRange(e,n,r,i,a){const l=this._root.forRange(e,n,r,!1,this,a||0,i);return typeof l=="number"?l:l.break}editRange(e,n,r,i,a){let l=this._root;l.isShared&&(this._root=l=l.clone());try{const c=l.forRange(e,n,r,!0,this,a||0,i);return typeof c=="number"?c:c.break}finally{let c;for(;l.keys.length<=1&&!l.isLeaf;)c||=l.isShared,this._root=l=l.keys.length===0?Vp:l.children[0];c&&(l.isShared=!0)}}}class Nl{get isLeaf(){return this.children===void 0}constructor(e=[],n){this.keys=e,this.values=n||hn,this.isShared=void 0}maxKey(){return this.keys[this.keys.length-1]}indexOf(e,n,r){const i=this.keys;let a=0,l=i.length,c=l>>1;for(;a<l;){const f=r(i[c],e);if(f<0)a=c+1;else if(f>0)l=c;else{if(f===0)return c;if(e===e)return i.length;throw new Error("BTree: NaN was used as a key")}c=a+l>>1}return c^n}minKey(){return this.keys[0]}minPair(e){if(this.keys.length!==0)return e[0]=this.keys[0],e[1]=this.values[0],e}maxPair(e){if(this.keys.length===0)return;const n=this.keys.length-1;return e[0]=this.keys[n],e[1]=this.values[n],e}clone(){const e=this.values;return new Nl(this.keys.slice(0),e===hn?e:e.slice(0))}get(e,n,r){const i=this.indexOf(e,-1,r._compare);return i<0?n:this.values[i]}getPairOrNextLower(e,n,r,i){const a=this.indexOf(e,-1,n),l=a<0?~a-1:r?a:a-1;if(l>=0)return i[0]=this.keys[l],i[1]=this.values[l],i}getPairOrNextHigher(e,n,r,i){const a=this.indexOf(e,-1,n),l=a<0?~a:r?a:a+1,c=this.keys;if(l<c.length)return i[0]=c[l],i[1]=this.values[l],i}set(e,n,r,i){let a=this.indexOf(e,-1,i._compare);if(a<0){if(a=~a,i._size++,this.keys.length<i._maxNodeSize)return this.insertInLeaf(a,e,n,i);{const l=this.splitOffRightSide();let c=this;return a>this.keys.length&&(a-=this.keys.length,c=l),c.insertInLeaf(a,e,n,i),l}}else return r!==!1&&(n!==void 0&&this.reifyValues(),this.keys[a]=e,this.values[a]=n),!1}reifyValues(){return this.values===hn?this.values=this.values.slice(0,this.keys.length):this.values}insertInLeaf(e,n,r,i){if(this.keys.splice(e,0,n),this.values===hn){for(;hn.length<i._maxNodeSize;)hn.push(void 0);if(r===void 0)return!0;this.values=hn.slice(0,this.keys.length-1)}return this.values.splice(e,0,r),!0}takeFromRight(e){let n=this.values;e.values===hn?n!==hn&&n.push(void 0):(n=this.reifyValues(),n.push(e.values.shift())),this.keys.push(e.keys.shift())}takeFromLeft(e){let n=this.values;e.values===hn?n!==hn&&n.unshift(void 0):(n=this.reifyValues(),n.unshift(e.values.pop())),this.keys.unshift(e.keys.pop())}splitOffRightSide(){const e=this.keys.length>>1,n=this.keys.splice(e),r=this.values===hn?hn:this.values.splice(e);return new Nl(n,r)}forRange(e,n,r,i,a,l,c){const f=a._compare;let h,m;if(n===e){if(!r||(m=(h=this.indexOf(e,-1,f))+1,h<0))return l}else h=this.indexOf(e,0,f),m=this.indexOf(n,-1,f),m<0?m=~m:r===!0&&m++;const p=this.keys,_=this.values;if(c!==void 0)for(let y=h;y<m;y++){const v=p[y],w=c(v,_[y],l++);if(w!==void 0){if(i===!0){if(v!==p[y]||this.isShared===!0)throw new Error("BTree illegally changed or cloned in editRange");w.delete?(this.keys.splice(y,1),this.values!==hn&&this.values.splice(y,1),a._size--,y--,m--):w.hasOwnProperty("value")&&(_[y]=w.value)}if(w.break!==void 0)return w}}else l+=m-h;return l}mergeSibling(e,n){if(this.keys.push.apply(this.keys,e.keys),this.values===hn){if(e.values===hn)return;this.values=this.values.slice(0,this.keys.length)}this.values.push.apply(this.values,e.reifyValues())}}class ty extends Nl{constructor(e,n){if(!n){n=[];for(let r=0;r<e.length;r++)n[r]=e[r].maxKey()}super(n),this.children=e}minKey(){return this.children[0].minKey()}minPair(e){return this.children[0].minPair(e)}maxPair(e){return this.children[this.children.length-1].maxPair(e)}get(e,n,r){const i=this.indexOf(e,0,r._compare),a=this.children;return i<a.length?a[i].get(e,n,r):void 0}getPairOrNextLower(e,n,r,i){const a=this.indexOf(e,0,n),l=this.children;if(a>=l.length)return this.maxPair(i);const c=l[a].getPairOrNextLower(e,n,r,i);return c===void 0&&a>0?l[a-1].maxPair(i):c}getPairOrNextHigher(e,n,r,i){const a=this.indexOf(e,0,n),l=this.children,c=l.length;if(a>=c)return;const f=l[a].getPairOrNextHigher(e,n,r,i);return f===void 0&&a<c-1?l[a+1].minPair(i):f}set(e,n,r,i){const a=this.children,l=i._maxNodeSize,c=i._compare;let f=Math.min(this.indexOf(e,0,c),a.length-1),h=a[f];if(h.isShared&&(a[f]=h=h.clone()),h.keys.length>=l){let p;f>0&&(p=a[f-1]).keys.length<l&&c(h.keys[0],e)<0?(p.isShared&&(a[f-1]=p=p.clone()),p.takeFromRight(h),this.keys[f-1]=p.maxKey()):(p=a[f+1])!==void 0&&p.keys.length<l&&c(h.maxKey(),e)<0&&(p.isShared&&(a[f+1]=p=p.clone()),p.takeFromLeft(h),this.keys[f]=a[f].maxKey())}const m=h.set(e,n,r,i);if(m===!1)return!1;if(this.keys[f]=h.maxKey(),m===!0)return!0;if(this.keys.length<l)return this.insert(f+1,m),!0;{const p=this.splitOffRightSide();let _=this;return c(m.maxKey(),this.maxKey())>0&&(_=p,f-=this.keys.length),_.insert(f+1,m),p}}insert(e,n){this.children.splice(e,0,n),this.keys.splice(e,0,n.maxKey())}splitOffRightSide(){const e=this.children.length>>1;return new ty(this.children.splice(e),this.keys.splice(e))}takeFromRight(e){this.keys.push(e.keys.shift()),this.children.push(e.children.shift())}takeFromLeft(e){this.keys.unshift(e.keys.pop()),this.children.unshift(e.children.pop())}forRange(e,n,r,i,a,l,c){const f=a._compare,h=this.keys,m=this.children;let p=this.indexOf(e,0,f),_=p;const y=Math.min(n===e?p:this.indexOf(n,0,f),h.length-1);if(i){if(_<=y)try{for(;_<=y;_++){m[_].isShared&&(m[_]=m[_].clone());const v=m[_].forRange(e,n,r,i,a,l,c);if(h[_]=m[_].maxKey(),typeof v!="number")return v;l=v}}finally{const v=a._maxNodeSize>>1;for(p>0&&p--,_=y;_>=p;_--)m[_].keys.length<=v&&(m[_].keys.length!==0?this.tryMerge(_,a._maxNodeSize):(h.splice(_,1),m.splice(_,1)));m.length!==0&&m[0].keys.length===0&&VN(!1,"emptiness bug")}}else for(;_<=y;_++){const v=m[_].forRange(e,n,r,i,a,l,c);if(typeof v!="number")return v;l=v}return l}tryMerge(e,n){const r=this.children;return e>=0&&e+1<r.length&&r[e].keys.length+r[e+1].keys.length<=n?(r[e].isShared&&(r[e]=r[e].clone()),r[e].mergeSibling(r[e+1],n),r.splice(e+1,1),this.keys.splice(e+1,1),this.keys[e]=r[e].maxKey(),!0):!1}mergeSibling(e,n){const r=this.keys.length;this.keys.push.apply(this.keys,e.keys);const i=e.children;if(this.children.push.apply(this.children,i),e.isShared&&!this.isShared)for(const a of i)a.isShared=!0;this.tryMerge(r-1,n)}}const hn=[],qN={delete:!0},FN=()=>qN,Vp=(function(){const t=new Nl;return t.isShared=!0,t})(),tx=[];function VN(t,...e){throw e.unshift("B+ tree"),new Error(e.join(" "))}function HN(){const t=new Map;function e(n){const r=n.join(".");if(t.has(r))return t.get(r);const i=new Proxy({},{get(a,l,c){if(l==="__refProxy")return!0;if(l==="__path")return n;if(l==="__type")return;if(typeof l=="symbol")return Reflect.get(a,l,c);const f=[...n,String(l)];return e(f)},has(a,l){return l==="__refProxy"||l==="__path"||l==="__type"?!0:Reflect.has(a,l)},ownKeys(a){return Reflect.ownKeys(a)},getOwnPropertyDescriptor(a,l){return l==="__refProxy"||l==="__path"||l==="__type"?{enumerable:!1,configurable:!0}:Reflect.getOwnPropertyDescriptor(a,l)}});return t.set(r,i),i}return e([])}function xa(t){const e=new Map;let n=0;function r(a){const l=a.join(".");if(e.has(l))return e.get(l);const c=new Proxy({},{get(f,h,m){if(h==="__refProxy")return!0;if(h==="__path")return a;if(h==="__type")return;if(typeof h=="symbol")return Reflect.get(f,h,m);const p=[...a,String(h)];return r(p)},has(f,h){return h==="__refProxy"||h==="__path"||h==="__type"?!0:Reflect.has(f,h)},ownKeys(f){const h=++n,m=`__SPREAD_SENTINEL__${a.join(".")}__${h}`;return Object.prototype.hasOwnProperty.call(f,m)||Object.defineProperty(f,m,{enumerable:!0,configurable:!0,value:!0}),Reflect.ownKeys(f)},getOwnPropertyDescriptor(f,h){return h==="__refProxy"||h==="__path"||h==="__type"?{enumerable:!1,configurable:!0}:Reflect.getOwnPropertyDescriptor(f,h)}});return e.set(l,c),c}return new Proxy({},{get(a,l,c){if(l==="__refProxy")return!0;if(l==="__path")return[];if(l==="__type")return;if(typeof l=="symbol")return Reflect.get(a,l,c);const f=String(l);if(t.includes(f))return r([f])},has(a,l){return l==="__refProxy"||l==="__path"||l==="__type"||typeof l=="string"&&t.includes(l)?!0:Reflect.has(a,l)},ownKeys(a){return[...t,"__refProxy","__path","__type"]},getOwnPropertyDescriptor(a,l){if(l==="__refProxy"||l==="__path"||l==="__type")return{enumerable:!1,configurable:!0};if(typeof l=="string"&&t.includes(l))return{enumerable:!0,configurable:!0}}})}function Yt(t){return GN(t)?new kn(t.__path):t&&typeof t=="object"&&"type"in t&&(t.type==="func"||t.type==="ref"||t.type==="val"||t.type==="agg")?t:new jn(t)}function GN(t){return t&&typeof t=="object"&&t.__refProxy===!0}function Um(t,e){return new _r("eq",[Yt(t),Yt(e)])}function nx(t,e){return new _r("gt",[Yt(t),Yt(e)])}function KN(t,e){return new _r("gte",[Yt(t),Yt(e)])}function $m(t,e){return new _r("lt",[Yt(t),Yt(e)])}function qm(t,e,...n){const r=[t,e,...n];return new _r("and",r.map(i=>Yt(i)))}function ZN(t,e,...n){const r=[t,e,...n];return new _r("or",r.map(i=>Yt(i)))}function QN(t,e){return new _r("in",[Yt(t),Yt(e)])}class JN{constructor(e,n,r,i){this.lookupCount=0,this.totalLookupTime=0,this.lastUpdated=new Date,this.id=e,this.expression=n,this.compareOptions=Xg,this.name=r,this.initialize(i)}supports(e){return this.supportedOperations.has(e)}matchesField(e){return this.expression.type==="ref"&&this.expression.path.length===e.length&&this.expression.path.every((n,r)=>n===e[r])}matchesCompareOptions(e){const n={...this.compareOptions,direction:void 0},r={...e,direction:void 0};return kr(n,r)}matchesDirection(e){return this.compareOptions.direction===e}getStats(){return{entryCount:this.keyCount,lookupCount:this.lookupCount,averageLookupTime:this.lookupCount>0?this.totalLookupTime/this.lookupCount:0,lastUpdated:this.lastUpdated}}evaluateIndexExpression(e){return Jg(this.expression)(e)}trackLookup(e){const n=performance.now()-e;this.lookupCount++,this.totalLookupTime+=n}updateTimestamp(){this.lastUpdated=new Date}}class Fm extends JN{constructor(e,n,r,i){super(e,n,r,i),this.supportedOperations=new Set(["eq","gt","gte","lt","lte","in"]),this.valueMap=new Map,this.indexedKeys=new Set,this.compareFn=Pm,this.compareFn=i?.compareFn??Pm,i?.compareOptions&&(this.compareOptions=i.compareOptions),this.orderedEntries=new $N(this.compareFn)}initialize(e){}add(e,n){let r;try{r=this.evaluateIndexExpression(n)}catch(a){throw new Error(`Failed to evaluate index expression for key ${e}: ${a}`)}const i=ui(r);if(this.valueMap.has(i))this.valueMap.get(i).add(e);else{const a=new Set([e]);this.valueMap.set(i,a),this.orderedEntries.set(i,void 0)}this.indexedKeys.add(e),this.updateTimestamp()}remove(e,n){let r;try{r=this.evaluateIndexExpression(n)}catch(a){console.warn(`Failed to evaluate index expression for key ${e} during removal:`,a);return}const i=ui(r);if(this.valueMap.has(i)){const a=this.valueMap.get(i);a.delete(e),a.size===0&&(this.valueMap.delete(i),this.orderedEntries.delete(i))}this.indexedKeys.delete(e),this.updateTimestamp()}update(e,n,r){this.remove(e,n),this.add(e,r)}build(e){this.clear();for(const[n,r]of e)this.add(n,r)}clear(){this.orderedEntries.clear(),this.valueMap.clear(),this.indexedKeys.clear(),this.updateTimestamp()}lookup(e,n){const r=performance.now();let i;switch(e){case"eq":i=this.equalityLookup(n);break;case"gt":i=this.rangeQuery({from:n,fromInclusive:!1});break;case"gte":i=this.rangeQuery({from:n,fromInclusive:!0});break;case"lt":i=this.rangeQuery({to:n,toInclusive:!1});break;case"lte":i=this.rangeQuery({to:n,toInclusive:!0});break;case"in":i=this.inArrayLookup(n);break;default:throw new Error(`Operation ${e} not supported by BTreeIndex`)}return this.trackLookup(r),i}get keyCount(){return this.indexedKeys.size}equalityLookup(e){const n=ui(e);return new Set(this.valueMap.get(n)??[])}rangeQuery(e={}){const{from:n,to:r,fromInclusive:i=!0,toInclusive:a=!0}=e,l=new Set,c=ui(n),f=ui(r),h=c??this.orderedEntries.minKey(),m=f??this.orderedEntries.maxKey();return this.orderedEntries.forRange(h,m,a,(p,_)=>{if(!i&&this.compareFn(p,n)===0)return;const y=this.valueMap.get(p);y&&y.forEach(v=>l.add(v))}),l}rangeQueryReversed(e={}){const{from:n,to:r,fromInclusive:i=!0,toInclusive:a=!0}=e;return this.rangeQuery({from:r??this.orderedEntries.maxKey(),to:n??this.orderedEntries.minKey(),fromInclusive:a,toInclusive:i})}takeInternal(e,n,r,i,a=!1){const l=new Set,c=[];let f,h=ui(r);for(;(f=n(h))!==void 0&&c.length<e;){h=f[0];const m=this.valueMap.get(h);if(m&&m.size>0){const p=Array.from(m).sort(af);a&&p.reverse();for(const _ of p){if(c.length>=e)break;!l.has(_)&&(i?.(_)??!0)&&(c.push(_),l.add(_))}}}return c}take(e,n,r){const i=a=>this.orderedEntries.nextHigherPair(a);return this.takeInternal(e,i,n,r)}takeReversed(e,n,r){const i=a=>this.orderedEntries.nextLowerPair(a);return this.takeInternal(e,i,n,r,!0)}inArrayLookup(e){const n=new Set;for(const r of e){const i=ui(r),a=this.valueMap.get(i);a&&a.forEach(l=>n.add(l))}return n}get indexedKeysSet(){return this.indexedKeys}get orderedEntriesArray(){return this.orderedEntries.keysArray().map(e=>[e,this.valueMap.get(e)??new Set])}get orderedEntriesArrayReversed(){return this.takeReversed(this.orderedEntries.size).map(e=>[e,this.valueMap.get(e)??new Set])}get valueMapData(){return this.valueMap}}function ZS(t){return t.config.autoIndex==="eager"}function Kf(t,e,n,r,i){if(!ZS(n))return;const a=r??{...Xg,...n.compareOptions};if(!Array.from(n.indexes.values()).find(c=>c.matchesField(e)&&c.matchesCompareOptions(a)))try{n.createIndex(c=>{let f=c;for(const h of e)f=f[h];return f},{name:`auto:${e.join(".")}`,indexType:Fm,options:i?{compareFn:i,compareOptions:a}:{}})}catch(c){console.warn(`${n.id?`[${n.id}] `:""}Failed to create auto-index for field path "${e.join(".")}":`,c)}}function YN(t,e){if(!ZS(e))return;const n=XN(t);for(const{fieldName:r,fieldPath:i}of n)Kf(r,i,e)}function XN(t){const e=[];function n(r){if(r.type!=="func")return;const i=r;if(i.name==="and"){for(const h of i.args)n(h);return}if(!["eq","gt","gte","lt","lte","in"].includes(i.name)||i.args.length<1||i.args[0].type!=="ref")return;const c=i.args[0].path;if(c.length===0)return;const f=c.join("_");e.push({fieldName:f,fieldPath:c})}return n(t),e}const{sum:WN,count:eD,avg:tD,min:nD,max:rD}=wN;function iD(t,e){const n=new Map,r=[...t];if(!e)return{selectToGroupByIndex:n,groupByExpressions:r};for(const[i,a]of Object.entries(e)){if(a.type==="agg")continue;const l=r.findIndex(c=>of(a,c));if(l===-1)throw new oI(i);n.set(i,l)}return{selectToGroupByIndex:n,groupByExpressions:r}}function rx(t,e,n,r,i){if(e.length===0){const h={};if(r){for(const[p,_]of Object.entries(r))if(_.type==="agg"){const y=_;h[p]=ix(y)}}const m=()=>({__singleGroup:!0});if(t=t.pipe(Zw(m,h)),t=t.pipe(Sn(([,p])=>{const y={...p.__select_results||{}};if(r)for(const[v,w]of Object.entries(r))w.type==="agg"&&(y[v]=p[v]);return["single_group",{...p,__select_results:y}]})),n&&n.length>0)for(const p of n){const _=Lw(p),y=lf(_,r||{}),v=Bn(y);t=t.pipe(Vi(([,w])=>{const k={result:w.__select_results};return Pa(v(k))}))}if(i&&i.length>0)for(const p of i)t=t.pipe(Vi(([,_])=>{const y={result:_.__select_results};return Pa(p(y))}));return t}const a=iD(e,r),l=e.map(h=>Bn(h)),c=([,h])=>{const m={...h};delete m.__select_results;const p={};for(let _=0;_<e.length;_++){const y=l[_],v=y(m);p[`__key_${_}`]=v}return p},f={};if(r){for(const[h,m]of Object.entries(r))if(m.type==="agg"){const p=m;f[h]=ix(p)}}if(t=t.pipe(Zw(c,f)),t=t.pipe(Sn(([,h])=>{const m=h.__select_results||{},p={};if(r)for(const[y,v]of Object.entries(r))if(v.type!=="agg"){const w=a.selectToGroupByIndex.get(y);w!==void 0?p[y]=h[`__key_${w}`]:p[y]=m[y]}else p[y]=h[y];else for(let y=0;y<e.length;y++)p[`__key_${y}`]=h[`__key_${y}`];let _;if(e.length===1)_=h.__key_0;else{const y=[];for(let v=0;v<e.length;v++)y.push(h[`__key_${v}`]);_=JSON.stringify(y)}return[_,{...h,__select_results:p}]})),n&&n.length>0)for(const h of n){const m=Lw(h),p=lf(m,r||{}),_=Bn(p);t=t.pipe(Vi(([,y])=>{const v={result:y.__select_results};return _(v)}))}if(i&&i.length>0)for(const h of i)t=t.pipe(Vi(([,m])=>{const p={result:m.__select_results};return Pa(h(p))}));return t}function of(t,e){if(!t||!e||t.type!==e.type)return!1;switch(t.type){case"ref":return!t.path||!e.path||t.path.length!==e.path.length?!1:t.path.every((n,r)=>n===e.path[r]);case"val":return t.value===e.value;case"func":return t.name===e.name&&t.args?.length===e.args?.length&&(t.args||[]).every((n,r)=>of(n,e.args[r]));case"agg":return t.name===e.name&&t.args?.length===e.args?.length&&(t.args||[]).every((n,r)=>of(n,e.args[r]));default:return!1}}function ix(t){const e=Bn(t.args[0]),n=([,a])=>{const l=e(a);return typeof l=="number"?l:l!=null?Number(l):0},r=([,a])=>{const l=e(a);return typeof l=="number"||l instanceof Date?l:l!=null?Number(l):0},i=([,a])=>e(a);switch(t.name.toLowerCase()){case"sum":return WN(n);case"count":return eD(i);case"avg":return tD(n);case"min":return nD(r);case"max":return rD(r);default:throw new lI(t.name)}}function lf(t,e,n="result"){switch(t.type){case"agg":{const r=t;for(const[i,a]of Object.entries(e))if(a.type==="agg"&&sD(r,a))return new kn([n,i]);throw new uI(r.name)}case"func":{const r=t,i=r.args.map(a=>lf(a,e));return new _r(r.name,i)}case"ref":return t;case"val":return t;default:throw new cI(t.type)}}function sD(t,e){return t.name===e.name&&t.args.length===e.args.length&&t.args.every((n,r)=>of(n,e.args[r]))}function aD(t,e,n,r,i,a,l,c,f){const h=n.map(v=>{const w=lf(v.expression,r,"__select_results");return{compiledExpression:Bn(w),compareOptions:Vm(v,i)}}),m=v=>{const w=v;return n.length>1?h.map(k=>k.compiledExpression(w)):n.length===1?h[0].compiledExpression(w):null},p=(v,w)=>{if(n.length>1){const k=v,S=w;for(let R=0;R<n.length;R++){const T=h[R],L=rf(T.compareOptions)(k[R],S[R]);if(L!==0)return L}return k.length-S.length}if(n.length===1){const k=h[0];return rf(k.compareOptions)(v,w)}return Pm(v,w)};let _,y;if(c){let v,w,k,S=t.from.alias;const R=n[0],T=R.expression;if(T.type==="ref"){const z=Ol(t,T,i);if(z){w=z.collection;const L=z.path[0],E=Vm(R,w);L&&Kf(L,z.path,w,E,p),k=Bn(new kn(z.path),!0),v=Kl(w,z.path,E),v?.supports("gt")||(v=void 0),S=T.path.length>1?String(T.path[0]):t.from.alias}}if(k){const L=n.every(F=>F.expression.type==="ref")?n.map(F=>{const P=F.expression,Z=Ol(t,P,i);return Bn(Z?new kn(Z.path):F.expression,!0)}):void 0;y={alias:S,offset:f??0,limit:c,comparator:(F,P)=>{if(n.length===1){const Z=F&&k(F),se=P&&k(P);return p(Z,se)}if(L){const Z=se=>se&&L.map(me=>me(se));return p(Z(F),Z(P))}return 0},valueExtractorForRawRow:F=>{if(n.length===1)return k(F);if(L)return L.map(P=>P(F))},firstColumnValueExtractor:k,index:v,orderBy:n};const $=w?.id??i.id;a[$]=y,v&&(_=F=>{a[$].dataNeeded=()=>{const P=F();return Math.max(0,y.limit-P)}})}}return e.pipe(UN(m,{limit:c,offset:f,comparator:p,setSizeCallback:_,setWindowFn:v=>{l(w=>{v(w),y&&(y.offset=w.offset??y.offset,y.limit=w.limit??y.limit)})}}))}function Vm(t,e){return t.compareOptions.stringSort!==void 0?t.compareOptions:{...e.compareOptions,direction:t.compareOptions.direction,nulls:t.compareOptions.nulls}}function oD(t,e={}){const n=r=>{const i=[];for(const[a,l]of t.entries())(r?.(l)??!0)&&i.push({type:"insert",key:a,value:l});return i};if(e.limit!==void 0&&!e.orderBy)throw new Error("limit cannot be used without orderBy");if(e.orderBy){const r=e.where?bl(e.where):void 0,i=uD(t,e.orderBy,e.limit,r,e.optimizedOnly);if(i===void 0)return;const a=[];for(const l of i){const c=t.get(l);c!==void 0&&a.push({type:"insert",key:l,value:c})}return a}if(!e.where)return n();try{const r=e.where,i=AI(r,t);if(i.canOptimize){const a=[];for(const l of i.matchingKeys){const c=t.get(l);c!==void 0&&a.push({type:"insert",key:l,value:c})}return a}else{if(e.optimizedOnly)return;const a=bl(r);return n(a)}}catch(r){console.warn(`${t.id?`[${t.id}] `:""}Error processing where clause, falling back to full scan:`,r);const i=bl(e.where);return e.optimizedOnly?void 0:n(i)}}function bl(t){const e=Jg(t);return n=>{try{const r=e(n);return Pa(r)}catch{return!1}}}function lD(t,e){const n=bl(e.whereExpression);return r=>{const i=[];for(const a of r)if(a.type==="insert")n(a.value)&&i.push(a);else if(a.type==="update"){const l=n(a.value),c=a.previousValue?n(a.previousValue):!1;l&&c?i.push(a):l&&!c?i.push({...a,type:"insert"}):!l&&c&&i.push({...a,type:"delete",value:a.previousValue})}else n(a.value)&&i.push(a);(i.length>0||r.length===0)&&t(i)}}function uD(t,e,n,r,i){if(e.length===1){const f=e[0],h=f.expression;if(h.type==="ref"){const p=h.path,_=Vm(f,t);Kf(p[0],p,t,_);const y=Kl(t,p,_);if(y&&y.supports("gt")){const v=w=>{const k=t.get(w);return k===void 0?!1:r?.(k)??!0};return y.take(n??y.keyCount,void 0,v)}}}if(i)return;const a=[];for(const[f,h]of t.entries())(r?.(h)??!0)&&a.push({key:f,value:h});const l=(f,h)=>{for(const m of e){const p=rf(m.compareOptions),_=sx(f.value,m.expression),y=sx(h.value,m.expression),v=p(_,y);if(v!==0)return v}return 0};a.sort(l);const c=a.map(f=>f.key);return n!==void 0?c.slice(0,n):c}function sx(t,e){if(e.type==="ref"){const n=e;let r=t;for(const i of n.path)r=r?.[i];return r}else return e.type==="val"?e.value:Jg(e)(t)}class ax{constructor(e){this.map=new Map,this.sortedKeys=[],this.comparator=e}indexOf(e,n){let r=0,i=this.sortedKeys.length;if(!this.comparator){for(;r<i;){const a=Math.floor((r+i)/2),l=this.sortedKeys[a],c=af(e,l);if(c<0)i=a;else if(c>0)r=a+1;else return a}return r}for(;r<i;){const a=Math.floor((r+i)/2),l=this.sortedKeys[a],c=this.map.get(l),f=this.comparator(n,c);if(f<0)i=a;else if(f>0)r=a+1;else{const h=af(e,l);if(h<0)i=a;else if(h>0)r=a+1;else return a}}return r}set(e,n){if(this.map.has(e)){const i=this.map.get(e),a=this.indexOf(e,i);this.sortedKeys.splice(a,1)}const r=this.indexOf(e,n);return this.sortedKeys.splice(r,0,e),this.map.set(e,n),this}get(e){return this.map.get(e)}delete(e){if(this.map.has(e)){const n=this.map.get(e),r=this.indexOf(e,n);return this.sortedKeys.splice(r,1),this.map.delete(e)}return!1}has(e){return this.map.has(e)}clear(){this.map.clear(),this.sortedKeys=[]}get size(){return this.map.size}*[Symbol.iterator](){for(const e of this.sortedKeys)yield[e,this.map.get(e)]}entries(){return this[Symbol.iterator]()}keys(){return this.sortedKeys[Symbol.iterator]()}values(){return(function*(){for(const e of this.sortedKeys)yield this.map.get(e)}).call(this)}forEach(e){for(const n of this.sortedKeys)e(this.map.get(n),n,this.map)}}class cD{constructor(e){this.pendingSyncedTransactions=[],this.syncedMetadata=new Map,this.optimisticUpserts=new Map,this.optimisticDeletes=new Set,this.size=0,this.syncedKeys=new Set,this.preSyncVisibleState=new Map,this.recentlySyncedKeys=new Set,this.hasReceivedFirstCommit=!1,this.isCommittingSyncTransactions=!1,this.commitPendingTransactions=()=>{let n=!1;for(const l of this.transactions.values())if(l.state==="persisting"){n=!0;break}const{committedSyncedTransactions:r,uncommittedSyncedTransactions:i,hasTruncateSync:a}=this.pendingSyncedTransactions.reduce((l,c)=>(c.committed?(l.committedSyncedTransactions.push(c),c.truncate===!0&&(l.hasTruncateSync=!0)):l.uncommittedSyncedTransactions.push(c),l),{committedSyncedTransactions:[],uncommittedSyncedTransactions:[],hasTruncateSync:!1});if(!n||a){this.isCommittingSyncTransactions=!0;const l=a?r.find(_=>_.truncate)?.optimisticSnapshot:null,c=new Set;for(const _ of r)for(const y of _.operations)c.add(y.key);let f=this.preSyncVisibleState;if(f.size===0){f=new Map;for(const _ of c){const y=this.get(_);y!==void 0&&f.set(_,y)}}const h=[],m=this.config.sync.rowUpdateMode||"partial";for(const _ of r){if(_.truncate){const y=new Set([...this.syncedData.keys(),...l?.upserts.keys()||[]]);for(const v of y){if(l?.deletes.has(v))continue;const w=l?.upserts.get(v)||this.syncedData.get(v);w!==void 0&&h.push({type:"delete",key:v,value:w})}this.syncedData.clear(),this.syncedMetadata.clear(),this.syncedKeys.clear();for(const v of c)f.delete(v);this._events.emit("truncate",{type:"truncate",collection:this.collection})}for(const y of _.operations){const v=y.key;switch(this.syncedKeys.add(v),y.type){case"insert":this.syncedMetadata.set(v,y.metadata);break;case"update":this.syncedMetadata.set(v,Object.assign({},this.syncedMetadata.get(v),y.metadata));break;case"delete":this.syncedMetadata.delete(v);break}switch(y.type){case"insert":this.syncedData.set(v,y.value);break;case"update":{if(m==="partial"){const w=Object.assign({},this.syncedData.get(v),y.value);this.syncedData.set(v,w)}else this.syncedData.set(v,y.value);break}case"delete":this.syncedData.delete(v);break}}}if(a){const _=new Set;for(const w of r)for(const k of w.operations)(k.type==="insert"||k.type==="update")&&_.add(k.key);const y=new Map(l.upserts),v=new Set(l.deletes);for(const[w,k]of y)if(!v.has(w))if(_.has(w)){let S=!1;for(let R=h.length-1;R>=0;R--){const T=h[R];if(T.key===w&&T.type==="insert"){T.value=k,S=!0;break}}S||h.push({type:"insert",key:w,value:k})}else h.push({type:"insert",key:w,value:k});if(h.length>0&&v.size>0){const w=[];for(const k of h)k.type==="insert"&&v.has(k.key)||w.push(k);h.length=0,h.push(...w)}this.lifecycle.status!=="ready"&&this.lifecycle.markReady()}if(this.optimisticUpserts.clear(),this.optimisticDeletes.clear(),this.isCommittingSyncTransactions=!1,a&&l){for(const[_,y]of l.upserts)this.optimisticUpserts.set(_,y);for(const _ of l.deletes)this.optimisticDeletes.add(_)}for(const _ of this.transactions.values())if(!["completed","failed"].includes(_.state)){for(const y of _.mutations)if(this.isThisCollection(y.collection)&&y.optimistic)switch(y.type){case"insert":case"update":this.optimisticUpserts.set(y.key,y.modified),this.optimisticDeletes.delete(y.key);break;case"delete":this.optimisticUpserts.delete(y.key),this.optimisticDeletes.add(y.key);break}}const p=new Map;for(const _ of this.transactions.values())if(_.state==="completed")for(const y of _.mutations)y.optimistic&&this.isThisCollection(y.collection)&&c.has(y.key)&&p.set(y.key,{type:y.type,value:y.modified});for(const _ of c){const y=f.get(_),v=this.get(_),w=p.get(_);let k=!1;w&&(w.type==="delete"&&y!==void 0&&v===void 0&&kr(w.value,y)||v!==void 0&&kr(w.value,v))&&(k=!0),k||(y===void 0&&v!==void 0?h.push({type:"insert",key:_,value:v}):y!==void 0&&v===void 0?h.push({type:"delete",key:_,value:y}):y!==void 0&&v!==void 0&&!kr(y,v)&&h.push({type:"update",key:_,value:v,previousValue:y}))}this.size=this.calculateSize(),h.length>0&&this.indexes.updateIndexes(h),this.changes.emitEvents(h,!0),this.pendingSyncedTransactions=i,this.preSyncVisibleState.clear(),Promise.resolve().then(()=>{this.recentlySyncedKeys.clear()}),this.hasReceivedFirstCommit||(this.hasReceivedFirstCommit=!0)}},this.config=e,this.transactions=new ax((n,r)=>n.compareCreatedAt(r)),this.syncedData=new ax(e.compare)}setDeps(e){this.collection=e.collection,this.lifecycle=e.lifecycle,this.changes=e.changes,this.indexes=e.indexes,this._events=e.events}get(e){const{optimisticDeletes:n,optimisticUpserts:r,syncedData:i}=this;if(!n.has(e))return r.has(e)?r.get(e):i.get(e)}has(e){const{optimisticDeletes:n,optimisticUpserts:r,syncedData:i}=this;return n.has(e)?!1:r.has(e)?!0:i.has(e)}*keys(){const{syncedData:e,optimisticDeletes:n,optimisticUpserts:r}=this;for(const i of e.keys())n.has(i)||(yield i);for(const i of r.keys())!e.has(i)&&!n.has(i)&&(yield i)}*values(){for(const e of this.keys()){const n=this.get(e);n!==void 0&&(yield n)}}*entries(){for(const e of this.keys()){const n=this.get(e);n!==void 0&&(yield[e,n])}}*[Symbol.iterator](){for(const[e,n]of this.entries())yield[e,n]}forEach(e){let n=0;for(const[r,i]of this.entries())e(i,r,n++)}map(e){const n=[];let r=0;for(const[i,a]of this.entries())n.push(e(a,i,r++));return n}isThisCollection(e){return e===this.collection}recomputeOptimisticState(e=!1){if(this.isCommittingSyncTransactions&&!e)return;const n=new Map(this.optimisticUpserts),r=new Set(this.optimisticDeletes);this.optimisticUpserts.clear(),this.optimisticDeletes.clear();const i=[];for(const c of this.transactions.values())["completed","failed"].includes(c.state)||i.push(c);for(const c of i)for(const f of c.mutations)if(this.isThisCollection(f.collection)&&f.optimistic)switch(f.type){case"insert":case"update":this.optimisticUpserts.set(f.key,f.modified),this.optimisticDeletes.delete(f.key);break;case"delete":this.optimisticUpserts.delete(f.key),this.optimisticDeletes.add(f.key);break}this.size=this.calculateSize();const a=[];this.collectOptimisticChanges(n,r,a);const l=a.filter(c=>!!(!this.recentlySyncedKeys.has(c.key)||e));if(this.pendingSyncedTransactions.length>0&&!e){const c=new Set;for(const h of this.pendingSyncedTransactions)for(const m of h.operations)c.add(m.key);const f=l.filter(h=>!(h.type==="delete"&&c.has(h.key)&&!i.some(p=>p.mutations.some(_=>this.isThisCollection(_.collection)&&_.key===h.key))));f.length>0&&this.indexes.updateIndexes(f),this.changes.emitEvents(f,e)}else l.length>0&&this.indexes.updateIndexes(l),this.changes.emitEvents(l,e)}calculateSize(){const e=this.syncedData.size,n=Array.from(this.optimisticDeletes).filter(i=>this.syncedData.has(i)&&!this.optimisticUpserts.has(i)).length,r=Array.from(this.optimisticUpserts.keys()).filter(i=>!this.syncedData.has(i)).length;return e-n+r}collectOptimisticChanges(e,n,r){const i=new Set([...e.keys(),...this.optimisticUpserts.keys(),...n,...this.optimisticDeletes]);for(const a of i){const l=this.get(a),c=this.getPreviousValue(a,e,n);c!==void 0&&l===void 0?r.push({type:"delete",key:a,value:c}):c===void 0&&l!==void 0?r.push({type:"insert",key:a,value:l}):c!==void 0&&l!==void 0&&c!==l&&r.push({type:"update",key:a,value:l,previousValue:c})}}getPreviousValue(e,n,r){if(!r.has(e))return n.has(e)?n.get(e):this.syncedData.get(e)}scheduleTransactionCleanup(e){if(e.state==="completed"){this.transactions.delete(e.id);return}e.isPersisted.promise.then(()=>{this.transactions.delete(e.id)}).catch(()=>{})}capturePreSyncVisibleState(){if(this.pendingSyncedTransactions.length===0)return;const e=new Set;for(const n of this.pendingSyncedTransactions)for(const r of n.operations)e.add(r.key);for(const n of e)this.recentlySyncedKeys.add(n);for(const n of e)if(!this.preSyncVisibleState.has(n)){const r=this.get(n);r!==void 0&&this.preSyncVisibleState.set(n,r)}}onTransactionStateChange(){this.changes.shouldBatchEvents=this.pendingSyncedTransactions.length>0,this.capturePreSyncVisibleState(),this.recomputeOptimisticState(!1)}cleanup(){this.syncedData.clear(),this.syncedMetadata.clear(),this.optimisticUpserts.clear(),this.optimisticDeletes.clear(),this.size=0,this.pendingSyncedTransactions=[],this.syncedKeys.clear(),this.hasReceivedFirstCommit=!1}}class QS{constructor(){this.listeners=new Map}on(e,n){return this.listeners.has(e)||this.listeners.set(e,new Set),this.listeners.get(e).add(n),()=>{this.listeners.get(e)?.delete(n)}}once(e,n){const r=this.on(e,i=>{n(i),r()});return r}off(e,n){this.listeners.get(e)?.delete(n)}waitFor(e,n){return new Promise((r,i)=>{let a;const l=this.on(e,c=>{a&&(clearTimeout(a),a=void 0),r(c),l()});n&&(a=setTimeout(()=>{a=void 0,l(),i(new Error(`Timeout waiting for event ${String(e)}`))},n))})}emitInner(e,n){this.listeners.get(e)?.forEach(r=>{try{r(n)}catch(i){queueMicrotask(()=>{throw i})}})}clearListeners(){this.listeners.clear()}}function fD(t,e){if(e.length===0||t.length===0)return;if(t.length===1){const{expression:r,compareOptions:i}=t[0];return(i.direction==="asc"?nx:$m)(r,new jn(e[0]))}const n=[];for(let r=0;r<t.length&&r<e.length;r++){const i=t[r],a=e[r],l=[];for(let h=0;h<r;h++){const m=t[h],p=e[h];l.push(Um(m.expression,new jn(p)))}const f=(i.compareOptions.direction==="asc"?nx:$m)(i.expression,new jn(a));if(l.length===0)n.push(f);else{const h=[...l,f];n.push(h.reduce((m,p)=>qm(m,p)))}}return n.length===1?n[0]:n.reduce((r,i)=>ZN(r,i))}class hD extends QS{constructor(e,n,r){super(),this.collection=e,this.callback=n,this.options=r,this.loadedInitialState=!1,this.skipFiltering=!1,this.snapshotSent=!1,this.loadedSubsets=[],this.sentKeys=new Set,this.limitedSnapshotRowCount=0,this._status="ready",this.pendingLoadSubsetPromises=new Set,this.isBufferingForTruncate=!1,this.truncateBuffer=[],this.pendingTruncateRefetches=new Set,r.onUnsubscribe&&this.on("unsubscribed",a=>r.onUnsubscribe(a)),r.whereExpression&&YN(r.whereExpression,this.collection);const i=a=>{n(a),this.trackSentKeys(a)};this.callback=i,this.filteredCallback=r.whereExpression?lD(this.callback,r):this.callback,this.truncateCleanup=this.collection.on("truncate",()=>{this.handleTruncate()})}get status(){return this._status}handleTruncate(){const e=[...this.loadedSubsets],n=this.collection._sync.syncLoadSubsetFn!==null;if(e.length===0||!n){this.snapshotSent=!1,this.loadedInitialState=!1,this.limitedSnapshotRowCount=0,this.lastSentKey=void 0,this.loadedSubsets=[];return}this.isBufferingForTruncate=!0,this.truncateBuffer=[],this.pendingTruncateRefetches.clear(),this.snapshotSent=!1,this.loadedInitialState=!1,this.limitedSnapshotRowCount=0,this.lastSentKey=void 0,this.loadedSubsets=[],queueMicrotask(()=>{if(this.isBufferingForTruncate){for(const r of e){const i=this.collection._sync.loadSubset(r);this.loadedSubsets.push(r),this.trackLoadSubsetPromise(i),i instanceof Promise&&(this.pendingTruncateRefetches.add(i),i.catch(()=>{}).finally(()=>{this.pendingTruncateRefetches.delete(i),this.checkTruncateRefetchComplete()}))}this.pendingTruncateRefetches.size===0&&this.flushTruncateBuffer()}})}checkTruncateRefetchComplete(){this.pendingTruncateRefetches.size===0&&this.isBufferingForTruncate&&this.flushTruncateBuffer()}flushTruncateBuffer(){this.isBufferingForTruncate=!1;const e=this.truncateBuffer.flat();e.length>0&&this.filteredCallback(e),this.truncateBuffer=[]}setOrderByIndex(e){this.orderByIndex=e}setStatus(e){if(this._status===e)return;const n=this._status;this._status=e,this.emitInner("status:change",{type:"status:change",subscription:this,previousStatus:n,status:e});const r=`status:${e}`;this.emitInner(r,{type:r,subscription:this,previousStatus:n,status:e})}trackLoadSubsetPromise(e){e instanceof Promise&&(this.pendingLoadSubsetPromises.add(e),this.setStatus("loadingSubset"),e.finally(()=>{this.pendingLoadSubsetPromises.delete(e),this.pendingLoadSubsetPromises.size===0&&this.setStatus("ready")}))}hasLoadedInitialState(){return this.loadedInitialState}hasSentAtLeastOneSnapshot(){return this.snapshotSent}emitEvents(e){const n=this.filterAndFlipChanges(e);this.isBufferingForTruncate?n.length>0&&this.truncateBuffer.push(n):this.filteredCallback(n)}requestSnapshot(e){if(this.loadedInitialState)return!1;const n={where:this.options.whereExpression,optimizedOnly:e?.optimizedOnly??!1};if(e){if("where"in e){const f=e.where;if(n.where){const h=n.where,m=qm(h,f);n.where=m}else n.where=f}}else this.loadedInitialState=!0;const r={where:n.where,subscription:this,orderBy:e?.orderBy,limit:e?.limit},i=this.collection._sync.loadSubset(r);this.loadedSubsets.push(r),(e?.trackLoadSubsetPromise??!0)&&this.trackLoadSubsetPromise(i);const l=this.collection.currentStateAsChanges(n);if(l===void 0)return!1;const c=l.filter(f=>!this.sentKeys.has(f.key));for(const f of c)this.sentKeys.add(f.key);return this.snapshotSent=!0,this.callback(c),!0}requestLimitedSnapshot({orderBy:e,limit:n,minValues:r,offset:i}){if(!n)throw new Error("limit is required");if(!this.orderByIndex)throw new Error("Ordered snapshot was requested but no index was found. You have to call setOrderByIndex before requesting an ordered snapshot.");const l=r?.[0],c=this.orderByIndex,f=this.options.whereExpression,h=f?bl(f):void 0,m=E=>{if(this.sentKeys.has(E))return!1;const M=this.collection.get(E);return M===void 0?!1:h?.(M)??!0};let p=l;const _=[];let y=[];if(l!==void 0){const{expression:E}=e[0],M=this.collection.currentStateAsChanges({where:Um(E,new jn(l))});if(M){const $=M.map(P=>P.key).filter(P=>!this.sentKeys.has(P)&&m(P));y.push(...$);const F=c.take(n-y.length,l,m);y.push(...F)}else y=c.take(n,l,m)}else y=c.take(n,l,m);const v=()=>Math.max(n-_.length,0),w=()=>y.length===0,k=e[0].expression,S=k.type==="ref"?Bn(new kn(k.path),!0):null;for(;v()>0&&!w();){const E=new Set;for(const M of y){const $=this.collection.get(M);_.push({type:"insert",key:M,value:$}),p=S?S($):$,E.add(M)}y=c.take(v(),p,m)}const R=this.limitedSnapshotRowCount;for(const E of _)this.sentKeys.add(E.key);this.callback(_),this.limitedSnapshotRowCount+=_.length,_.length>0&&(this.lastSentKey=_[_.length-1].key);let T;if(r!==void 0&&r.length>0){const E=fD(e,r);if(E){const{expression:M}=e[0],$=r[0];let F;if($ instanceof Date){const P=new Date($.getTime()+1);F=qm(KN(M,new jn($)),$m(M,new jn(P)))}else F=Um(M,new jn($));T={whereFrom:E,whereCurrent:F,lastKey:this.lastSentKey}}}const z={where:f,limit:n,orderBy:e,cursor:T,offset:i??R,subscription:this},L=this.collection._sync.loadSubset(z);this.loadedSubsets.push(z),this.trackLoadSubsetPromise(L)}filterAndFlipChanges(e){if(this.loadedInitialState||this.skipFiltering)return e;const n=this.isBufferingForTruncate,r=[];for(const i of e){let a=i;if(this.sentKeys.has(i.key)){if(i.type==="insert")continue;i.type==="delete"&&this.sentKeys.delete(i.key)}else{if(i.type==="update")a={...i,type:"insert",previousValue:void 0};else if(i.type==="delete"&&!n)continue;this.sentKeys.add(i.key)}r.push(a)}return r}trackSentKeys(e){if(!(this.loadedInitialState||this.skipFiltering))for(const n of e)n.type==="delete"?this.sentKeys.delete(n.key):this.sentKeys.add(n.key)}markAllStateAsSeen(){this.skipFiltering=!0}unsubscribe(){this.truncateCleanup?.(),this.truncateCleanup=void 0,this.isBufferingForTruncate=!1,this.truncateBuffer=[],this.pendingTruncateRefetches.clear();for(const e of this.loadedSubsets)this.collection._sync.unloadSubset(e);this.loadedSubsets=[],this.emitInner("unsubscribed",{type:"unsubscribed",subscription:this}),this.clearListeners()}}class dD{constructor(){this.activeSubscribersCount=0,this.changeSubscriptions=new Set,this.batchedEvents=[],this.shouldBatchEvents=!1}setDeps(e){this.lifecycle=e.lifecycle,this.sync=e.sync,this.events=e.events,this.collection=e.collection}emitEmptyReadyEvent(){for(const e of this.changeSubscriptions)e.emitEvents([])}emitEvents(e,n=!1){if(this.shouldBatchEvents&&!n){this.batchedEvents.push(...e);return}let r=e;if(n&&(this.batchedEvents.length>0&&(r=[...this.batchedEvents,...e]),this.batchedEvents=[],this.shouldBatchEvents=!1),r.length!==0)for(const i of this.changeSubscriptions)i.emitEvents(r)}subscribeChanges(e,n={}){this.addSubscriber();const r=new hD(this.collection,e,{...n,onUnsubscribe:()=>{this.removeSubscriber(),this.changeSubscriptions.delete(r)}});return n.includeInitialState?r.requestSnapshot({trackLoadSubsetPromise:!1}):n.includeInitialState===!1&&r.markAllStateAsSeen(),this.changeSubscriptions.add(r),r}addSubscriber(){const e=this.activeSubscribersCount;this.activeSubscribersCount++,this.lifecycle.cancelGCTimer(),(this.lifecycle.status==="cleaned-up"||this.lifecycle.status==="idle")&&this.sync.startSync(),this.events.emitSubscribersChange(this.activeSubscribersCount,e)}removeSubscriber(){const e=this.activeSubscribersCount;if(this.activeSubscribersCount--,this.activeSubscribersCount===0)this.lifecycle.startGCTimer();else if(this.activeSubscribersCount<0)throw new w2;this.events.emitSubscribersChange(this.activeSubscribersCount,e)}cleanup(){this.batchedEvents=[],this.shouldBatchEvents=!1}}const pD=t=>setTimeout(()=>{t({didTimeout:!0,timeRemaining:()=>50})},0),mD=t=>{clearTimeout(t)},gD=typeof window<"u"&&"requestIdleCallback"in window?(t,e)=>window.requestIdleCallback(t,e):(t,e)=>pD(t),Hp=typeof window<"u"&&"cancelIdleCallback"in window?t=>window.cancelIdleCallback(t):mD;class yD{constructor(e,n){this.status="idle",this.hasBeenReady=!1,this.hasReceivedFirstCommit=!1,this.onFirstReadyCallbacks=[],this.gcTimeoutId=null,this.idleCallbackId=null,this.config=e,this.id=n}setDeps(e){this.indexes=e.indexes,this.events=e.events,this.changes=e.changes,this.sync=e.sync,this.state=e.state}validateStatusTransition(e,n){if(e===n)return;if(!{idle:["loading","error","cleaned-up"],loading:["ready","error","cleaned-up"],ready:["cleaned-up","error"],error:["cleaned-up","idle"],"cleaned-up":["loading","error"]}[e].includes(n))throw new b2(e,n,this.id)}setStatus(e,n=!1){if(e==="ready"&&!n)throw new Gl(`You can't directly call "setStatus('ready'). You must use markReady instead.`);this.validateStatusTransition(this.status,e);const r=this.status;this.status=e,e==="ready"&&!this.indexes.isIndexesResolved&&this.indexes.resolveAllIndexes().catch(i=>{console.warn(`${this.config.id?`[${this.config.id}] `:""}Failed to resolve indexes:`,i)}),this.events.emitStatusChange(e,r)}validateCollectionUsable(e){switch(this.status){case"error":throw new _2(e,this.id);case"cleaned-up":this.sync.startSync();break}}markReady(){if(this.validateStatusTransition(this.status,"ready"),this.status==="loading"){if(this.setStatus("ready",!0),!this.hasBeenReady){this.hasBeenReady=!0,this.hasReceivedFirstCommit||(this.hasReceivedFirstCommit=!0);const e=[...this.onFirstReadyCallbacks];this.onFirstReadyCallbacks=[],e.forEach(n=>n())}this.changes.changeSubscriptions.size>0&&this.changes.emitEmptyReadyEvent()}}startGCTimer(){this.gcTimeoutId&&clearTimeout(this.gcTimeoutId);const e=this.config.gcTime??3e5;e!==0&&(this.gcTimeoutId=setTimeout(()=>{this.changes.activeSubscribersCount===0&&this.scheduleIdleCleanup()},e))}cancelGCTimer(){this.gcTimeoutId&&(clearTimeout(this.gcTimeoutId),this.gcTimeoutId=null),this.idleCallbackId!==null&&(Hp(this.idleCallbackId),this.idleCallbackId=null)}scheduleIdleCleanup(){this.idleCallbackId!==null&&Hp(this.idleCallbackId),this.idleCallbackId=gD(e=>{this.changes.activeSubscribersCount===0?this.performCleanup(e)&&(this.idleCallbackId=null):this.idleCallbackId=null},{timeout:1e3})}performCleanup(e){return!e||e.timeRemaining()>0||e.didTimeout?(this.sync.cleanup(),this.state.cleanup(),this.changes.cleanup(),this.indexes.cleanup(),this.gcTimeoutId&&(clearTimeout(this.gcTimeoutId),this.gcTimeoutId=null),this.hasBeenReady=!1,this.onFirstReadyCallbacks=[],this.setStatus("cleaned-up"),this.events.cleanup(),!0):(this.scheduleIdleCleanup(),!1)}onFirstReady(e){if(this.hasBeenReady){e();return}this.onFirstReadyCallbacks.push(e)}cleanup(){this.idleCallbackId!==null&&(Hp(this.idleCallbackId),this.idleCallbackId=null),this.performCleanup()}}const ny=Symbol("liveQueryInternal");class _D{constructor(e,n){this.preloadPromise=null,this.syncCleanupFn=null,this.syncLoadSubsetFn=null,this.syncUnloadSubsetFn=null,this.pendingLoadSubsetPromises=new Set,this.config=e,this.id=n,this.syncMode=e.syncMode??"eager"}setDeps(e){this.collection=e.collection,this.state=e.state,this.lifecycle=e.lifecycle,this._events=e.events}startSync(){if(!(this.lifecycle.status!=="idle"&&this.lifecycle.status!=="cleaned-up")){this.lifecycle.setStatus("loading");try{const e=bD(this.config.sync.sync({collection:this.collection,begin:()=>{this.state.pendingSyncedTransactions.push({committed:!1,operations:[],deletedKeys:new Set})},write:n=>{const r=this.state.pendingSyncedTransactions[this.state.pendingSyncedTransactions.length-1];if(!r)throw new Bw;if(r.committed)throw new Uw;let i;"key"in n?i=n.key:i=this.config.getKey(n.value);let a=n.type;if(n.type==="insert"){const c=this.state.syncedData.has(i),f=r.deletedKeys.has(i),h=r.truncate===!0;if(c&&!f&&!h){const m=this.state.syncedData.get(i);if(m!==void 0&&kr(m,n.value))a="update";else{const _=this.config.utils[ny];throw new k2(i,this.id,{hasCustomGetKey:_?.hasCustomGetKey??!1,hasJoins:_?.hasJoins??!1})}}}const l={...n,type:a,key:i};r.operations.push(l),a==="delete"&&r.deletedKeys.add(i)},commit:()=>{const n=this.state.pendingSyncedTransactions[this.state.pendingSyncedTransactions.length-1];if(!n)throw new B2;if(n.committed)throw new U2;n.committed=!0,this.state.commitPendingTransactions()},markReady:()=>{this.lifecycle.markReady()},truncate:()=>{const n=this.state.pendingSyncedTransactions[this.state.pendingSyncedTransactions.length-1];if(!n)throw new Bw;if(n.committed)throw new Uw;n.operations=[],n.deletedKeys.clear(),n.truncate=!0,n.optimisticSnapshot={upserts:new Map(this.state.optimisticUpserts),deletes:new Set(this.state.optimisticDeletes)}}}));if(this.syncCleanupFn=e?.cleanup??null,this.syncLoadSubsetFn=e?.loadSubset??null,this.syncUnloadSubsetFn=e?.unloadSubset??null,this.syncMode==="on-demand"&&!this.syncLoadSubsetFn)throw new Hl(`Collection "${this.id}" is configured with syncMode "on-demand" but the sync function did not return a loadSubset handler. Either provide a loadSubset handler or use syncMode "eager".`)}catch(e){throw this.lifecycle.setStatus("error"),e}}}preload(){return this.preloadPromise?this.preloadPromise:(this.syncMode==="on-demand"&&console.warn(`${this.id?`[${this.id}] `:""}Calling .preload() on a collection with syncMode "on-demand" is a no-op. In on-demand mode, data is only loaded when queries request it. Instead, create a live query and call .preload() on that to load the specific data you need. See https://tanstack.com/blog/tanstack-db-0.5-query-driven-sync for more details.`),this.preloadPromise=new Promise((e,n)=>{if(this.lifecycle.status==="ready"){e();return}if(this.lifecycle.status==="error"){n(new v2);return}if(this.lifecycle.onFirstReady(()=>{e()}),this.lifecycle.status==="idle"||this.lifecycle.status==="cleaned-up")try{this.startSync()}catch(r){n(r);return}}),this.preloadPromise)}get isLoadingSubset(){return this.pendingLoadSubsetPromises.size>0}trackLoadPromise(e){const n=!this.isLoadingSubset;this.pendingLoadSubsetPromises.add(e),n&&this._events.emit("loadingSubset:change",{type:"loadingSubset:change",collection:this.collection,isLoadingSubset:!0,previousIsLoadingSubset:!1,loadingSubsetTransition:"start"}),e.finally(()=>{const r=this.pendingLoadSubsetPromises.size===1&&this.pendingLoadSubsetPromises.has(e);this.pendingLoadSubsetPromises.delete(e),r&&this._events.emit("loadingSubset:change",{type:"loadingSubset:change",collection:this.collection,isLoadingSubset:!1,previousIsLoadingSubset:!0,loadingSubsetTransition:"end"})})}loadSubset(e){if(this.syncMode==="eager")return!0;if(this.syncLoadSubsetFn){const n=this.syncLoadSubsetFn(e);if(n instanceof Promise)return this.trackLoadPromise(n),n}return!0}unloadSubset(e){this.syncUnloadSubsetFn&&this.syncUnloadSubsetFn(e)}cleanup(){try{this.syncCleanupFn&&(this.syncCleanupFn(),this.syncCleanupFn=null)}catch(e){queueMicrotask(()=>{if(e instanceof Error){const n=new qw(this.id,e);throw n.cause=e,n.stack=e.stack,n}else throw new qw(this.id,e)})}this.preloadPromise=null}}function bD(t){if(typeof t=="function")return{cleanup:t};if(typeof t=="object")return t}function JS(t){return typeof t=="function"&&t.prototype!==void 0&&t.prototype.constructor===t}async function vD(t){return JS(t)?t:await t()}class wD{constructor(e,n,r,i,a,l){this.id=e,this.expression=n,this.name=r,this.resolver=i,this.options=a,this.collectionEntries=l,this.indexPromise=null,this.resolvedIndex=null,JS(this.resolver)&&(this.resolvedIndex=new this.resolver(this.id,this.expression,this.name,this.options),this.collectionEntries&&this.resolvedIndex.build(this.collectionEntries))}async resolve(){return this.resolvedIndex?this.resolvedIndex:(this.indexPromise||(this.indexPromise=this.createIndex()),this.resolvedIndex=await this.indexPromise,this.resolvedIndex)}isResolved(){return this.resolvedIndex!==null}getResolved(){if(!this.resolvedIndex)throw new Error(`Index ${this.id} has not been resolved yet. Ensure collection is synced.`);return this.resolvedIndex}getId(){return this.id}getName(){return this.name}getExpression(){return this.expression}async createIndex(){const e=await vD(this.resolver);return new e(this.id,this.expression,this.name,this.options)}}class xD{constructor(e,n){this.indexId=e,this.lazyIndex=n}get index(){return this.lazyIndex.getResolved()}get isReady(){return this.lazyIndex.isResolved()}async whenReady(){return await this.lazyIndex.resolve()}get id(){return this.indexId}get name(){return this.isReady?this.index.name:this.lazyIndex.getName()}get expression(){return this.lazyIndex.getExpression()}supports(e){return this.index.supports(e)}getStats(){return this.index.getStats()}matchesField(e){const n=this.expression;return n.type==="ref"&&n.path.length===e.length&&n.path.every((r,i)=>r===e[i])}get keyCount(){return this.index.keyCount}get indexedKeysSet(){return this.index.indexedKeysSet}get orderedEntriesArray(){return this.index.orderedEntriesArray}get valueMapData(){return this.index.valueMapData}equalityLookup(e){return this.index.equalityLookup?.(e)??new Set}rangeQuery(e){return this.index.rangeQuery?.(e)??new Set}inArrayLookup(e){return this.index.inArrayLookup?.(e)??new Set}_getLazyWrapper(){return this.lazyIndex}}class SD{constructor(){this.lazyIndexes=new Map,this.resolvedIndexes=new Map,this.isIndexesResolved=!1,this.indexCounter=0}setDeps(e){this.state=e.state,this.lifecycle=e.lifecycle}createIndex(e,n={}){this.lifecycle.validateCollectionUsable("createIndex");const r=++this.indexCounter,i=HN(),a=e(i),l=Yt(a),c=n.indexType??Fm,f=new wD(r,l,n.name,c,n.options,this.state.entries());if(this.lazyIndexes.set(r,f),c===Fm)try{const h=f.getResolved();this.resolvedIndexes.set(r,h)}catch(h){console.warn("Failed to resolve BTreeIndex:",h)}else if(typeof c=="function"&&c.prototype)try{const h=f.getResolved();this.resolvedIndexes.set(r,h)}catch{this.resolveSingleIndex(r,f).catch(h=>{console.warn("Failed to resolve single index:",h)})}else this.isIndexesResolved&&this.resolveSingleIndex(r,f).catch(h=>{console.warn("Failed to resolve single index:",h)});return new xD(r,f)}async resolveAllIndexes(){if(this.isIndexesResolved)return;const e=Array.from(this.lazyIndexes.entries()).map(async([n,r])=>{const i=await r.resolve();return i.build(this.state.entries()),this.resolvedIndexes.set(n,i),{indexId:n,resolvedIndex:i}});await Promise.all(e),this.isIndexesResolved=!0}async resolveSingleIndex(e,n){const r=await n.resolve();return r.build(this.state.entries()),this.resolvedIndexes.set(e,r),r}get indexes(){return this.resolvedIndexes}updateIndexes(e){for(const n of this.resolvedIndexes.values())for(const r of e)switch(r.type){case"insert":n.add(r.key,r.value);break;case"update":r.previousValue?n.update(r.key,r.previousValue,r.value):n.add(r.key,r.value);break;case"delete":n.remove(r.key,r.value);break}}cleanup(){this.lazyIndexes.clear(),this.resolvedIndexes.clear()}}var ED={};const kD=new Set(["find","findLast","findIndex","findLastIndex","filter","map","flatMap","forEach","some","every","reduce","reduceRight"]),CD=new Set(["pop","push","shift","unshift","splice","sort","reverse","fill","copyWithin"]),TD=new Set(["set","delete","clear","add"]),AD=new Set(["entries","keys","values","forEach"]);function ry(t){return t!==null&&typeof t=="object"&&!(t instanceof Date)&&!(t instanceof RegExp)&&!sf(t)}function RD(t,e,n,r){if(kD.has(t))return function(...i){const a=i[0];if(typeof a!="function")return e.apply(n.copy_,i);const l=(h,m)=>{if(ry(h)){const p={tracker:n,prop:String(m)},{proxy:_}=r(h,p);return _}return h},c=function(h,m,p){const _=l(h,m);return a.call(this,_,m,p)};if(t==="reduce"||t==="reduceRight"){const h=function(m,p,_,y){const v=l(p,_);return a.call(this,m,v,_,y)};return e.apply(n.copy_,[h,...i.slice(1)])}const f=e.apply(n.copy_,[c,...i.slice(1)]);if((t==="find"||t==="findLast")&&f&&typeof f=="object"){const h=n.copy_.indexOf(f);if(h!==-1)return l(f,h)}return t==="filter"&&Array.isArray(f)?f.map(h=>{const m=n.copy_.indexOf(h);return m!==-1?l(h,m):h}):f}}function OD(t,e){return function(){const n=t.copy_;let r=0;return{next(){if(r>=n.length)return{done:!0,value:void 0};const i=n[r];let a=i;if(ry(i)){const l={tracker:t,prop:String(r)},{proxy:c}=e(i,l);a=c}return r++,{done:!1,value:a}},[Symbol.iterator](){return this}}}}function ox(t,e,n){return function(...r){const i=t.apply(e.copy_,r);return n(e),i}}function ID(t,e,n,r,i,a,l){if(AD.has(t)||e===Symbol.iterator)return function(...f){const h=n.apply(i.copy_,f);if(t==="forEach"){const p=f[0];if(typeof p=="function"){const _=function(y,v,w){const k=p.call(this,y,v,w);return l(i),k};return n.apply(r,[_,...f.slice(1)])}}if(t==="entries"||t==="values"||t===Symbol.iterator.toString()||e===Symbol.iterator){const p=h,_=new Map;if(t==="values"&&r instanceof Map)for(const[v,w]of i.copy_.entries())_.set(w,v);const y=new Map;if(r instanceof Set)for(const v of i.copy_.values())y.set(v,v);return{next(){const v=p.next();if(!v.done&&v.value&&typeof v.value=="object"){if(t==="entries"&&Array.isArray(v.value)&&v.value.length===2){if(v.value[1]&&typeof v.value[1]=="object"){const w=v.value[0],k={tracker:i,prop:w,updateMap:R=>{i.copy_ instanceof Map&&i.copy_.set(w,R)}},{proxy:S}=a(v.value[1],k);v.value[1]=S}}else if(t==="values"||t===Symbol.iterator.toString()||e===Symbol.iterator)if(t==="values"&&r instanceof Map){const w=_.get(v.value);if(w!==void 0){const k={tracker:i,prop:w,updateMap:R=>{i.copy_ instanceof Map&&i.copy_.set(w,R)}},{proxy:S}=a(v.value,k);v.value=S}}else if(r instanceof Set){const w=v.value,k={tracker:i,prop:w,updateSet:R=>{i.copy_ instanceof Set&&(i.copy_.delete(w),i.copy_.add(R),y.set(w,R))}},{proxy:S}=a(v.value,k);v.value=S}else{const w=Symbol("iterator-value"),{proxy:k}=a(v.value,{tracker:i,prop:w});v.value=k}}return v},[Symbol.iterator](){return this}}}return h}}function Ge(...t){const e=typeof window<"u"&&typeof localStorage<"u";e&&localStorage.getItem("DEBUG")==="true"?console.log("[proxy]",...t):!e&&typeof process<"u"&&ED.DEBUG==="true"&&console.log("[proxy]",...t)}function ci(t,e=new WeakMap){if(t==null||typeof t!="object")return t;if(e.has(t))return e.get(t);if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp)return new RegExp(t.source,t.flags);if(Array.isArray(t)){const i=[];return e.set(t,i),t.forEach((a,l)=>{i[l]=ci(a,e)}),i}if(ArrayBuffer.isView(t)&&!(t instanceof DataView)){const i=Object.getPrototypeOf(t).constructor,a=new i(t.length);e.set(t,a);for(let l=0;l<t.length;l++)a[l]=t[l];return a}if(t instanceof Map){const i=new Map;return e.set(t,i),t.forEach((a,l)=>{i.set(l,ci(a,e))}),i}if(t instanceof Set){const i=new Set;return e.set(t,i),t.forEach(a=>{i.add(ci(a,e))}),i}if(sf(t))return t;const n={};e.set(t,n);for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=ci(t[i],e));const r=Object.getOwnPropertySymbols(t);for(const i of r)n[i]=ci(t[i],e);return n}let lx=0;function ND(){return lx+=1,lx}function iy(t,e){const n=new Map;function r(p,_){if(Ge("Object ID:",p.constructor.name),n.has(p))return n.get(p);{const y=iy(p,_);return n.set(p,y),y}}const i=new Map,a={copy_:ci(t),originalObject:ci(t),proxyCount:ND(),modified:!1,assigned_:{},parent:e,target:t};Ge("createChangeProxy called for target",t,a.proxyCount);function l(p){p.modified||(p.modified=!0),p.parent&&(Ge("propagating change to parent"),"updateMap"in p.parent?p.parent.updateMap(p.copy_):"updateSet"in p.parent?p.parent.updateSet(p.copy_):(p.parent.tracker.copy_[p.parent.prop]=p.copy_,p.parent.tracker.assigned_[p.parent.prop]=!0),l(p.parent.tracker))}function c(p){if(Ge("checkIfReverted called with assigned keys:",Object.keys(p.assigned_)),Object.keys(p.assigned_).length===0&&Object.getOwnPropertySymbols(p.assigned_).length===0)return Ge("No assigned properties, returning true"),!0;for(const y in p.assigned_)if(p.assigned_[y]===!0){const v=p.copy_[y],w=p.originalObject[y];if(Ge(`Checking property ${String(y)}, current:`,v,"original:",w),!kr(v,w))return Ge(`Property ${String(y)} is different, returning false`),!1}else if(p.assigned_[y]===!1)return Ge(`Property ${String(y)} was deleted, returning false`),!1;const _=Object.getOwnPropertySymbols(p.assigned_);for(const y of _)if(p.assigned_[y]===!0){const v=p.copy_[y],w=p.originalObject[y];if(!kr(v,w))return Ge("Symbol property is different, returning false"),!1}else if(p.assigned_[y]===!1)return Ge("Symbol property was deleted, returning false"),!1;return Ge("All properties match original values, returning true"),!0}function f(p,_){Ge("checkParentStatus called for child prop:",_);const y=c(p);Ge("Parent checkIfReverted returned:",y),y&&(Ge("Parent is fully reverted, clearing tracking"),p.modified=!1,p.assigned_={},p.parent&&(Ge("Continuing up the parent chain"),f(p.parent.tracker,p.parent.prop)))}function h(p){if(Ge("createObjectProxy",p),i.has(p))return Ge("proxyCache found match"),i.get(p);const _=new Proxy(p,{get(y,v){Ge("get",y,v);const w=a.copy_[v]??a.originalObject[v],k=a.originalObject[v];if(Ge("value (at top of proxy get)",w),Object.getOwnPropertyDescriptor(y,v)?.get)return w;if(typeof w=="function"){if(Array.isArray(y)){const R=v.toString();if(CD.has(R))return ox(w,a,l);const T=RD(R,w,a,r);if(T)return T;if(v===Symbol.iterator)return OD(a,r)}if(y instanceof Map||y instanceof Set){const R=v.toString();if(TD.has(R))return ox(w,a,l);const T=ID(R,v,w,y,a,r,l);if(T)return T}return w.bind(y)}if(ry(w)){const R={tracker:a,prop:String(v)},{proxy:T}=r(k,R);return i.set(w,T),T}return w},set(y,v,w){const k=a.copy_[v];if(Ge(`set called for property ${String(v)}, current:`,k,"new:",w),kr(k,w))Ge("Value unchanged, not tracking");else{const S=a.originalObject[v],R=kr(w,S);if(Ge("value:",w,"original:",S,"isRevertToOriginal:",R),R){Ge(`Reverting property ${String(v)} to original value`),delete a.assigned_[v.toString()],Ge(`Updating copy with original value for ${String(v)}`),a.copy_[v]=ci(S),Ge("Checking if all properties reverted");const T=c(a);Ge("All reverted:",T),T?(Ge("All properties reverted, clearing tracking"),a.modified=!1,a.assigned_={},e&&(Ge("Updating parent for property:",e.prop),f(e.tracker,e.prop))):(Ge("Some properties still changed, keeping modified flag"),a.modified=!0)}else Ge(`Setting new value for property ${String(v)}`),a.copy_[v]=w,a.assigned_[v.toString()]=!0,Ge("Marking object and ancestors as modified",a),l(a)}return!0},defineProperty(y,v,w){const k=Reflect.defineProperty(y,v,w);return k&&"value"in w&&(a.copy_[v]=ci(w.value),a.assigned_[v.toString()]=!0,l(a)),k},getOwnPropertyDescriptor(y,v){return Reflect.getOwnPropertyDescriptor(y,v)},preventExtensions(y){return Reflect.preventExtensions(y)},isExtensible(y){return Reflect.isExtensible(y)},deleteProperty(y,v){Ge("deleteProperty",y,v);const w=typeof v=="symbol"?v.toString():v;if(w in y){const k=w in a.originalObject,S=Reflect.deleteProperty(y,v);return S&&(k?(a.assigned_[w]=!1,l(a)):(delete a.assigned_[w],Object.keys(a.assigned_).length===0&&Object.getOwnPropertySymbols(a.assigned_).length===0?a.modified=!1:a.modified=!0)),S}return!0}});return i.set(p,_),_}return{proxy:h(a.copy_),getChanges:()=>{if(Ge("getChanges called, modified:",a.modified),Ge(a),!a.modified)return Ge("Object not modified, returning empty object"),{};if(typeof a.copy_!="object"||Array.isArray(a.copy_)||Object.keys(a.assigned_).length===0)return a.copy_;const p={};for(const _ in a.copy_)a.assigned_[_]===!0&&_ in a.copy_&&(p[_]=a.copy_[_]);return Ge("Returning copy:",p),p}}}function DD(t){const e=t.map(n=>iy(n));return{proxies:e.map(n=>n.proxy),getChanges:()=>e.map(n=>n.getChanges())}}function MD(t,e){const{proxy:n,getChanges:r}=iy(t);return e(n),r()}function LD(t,e){const{proxies:n,getChanges:r}=DD(t);return e(n),r()}function zD(){let t,e,n=!0;return{promise:new Promise((i,a)=>{t=l=>{n=!1,i(l)},e=l=>{n=!1,a(l)}}),resolve:t,reject:e,isPending:()=>n}}function PD(t){return typeof t=="object"&&t!==null&&typeof t.hasPendingGraphRun=="function"}class jD{constructor(){this.contexts=new Map,this.clearListeners=new Set}getOrCreateContext(e){let n=this.contexts.get(e);return n||(n={queue:[],jobs:new Map,dependencies:new Map,completed:new Set},this.contexts.set(e,n)),n}schedule({contextId:e,jobId:n,dependencies:r,run:i}){if(typeof e>"u"){i();return}const a=this.getOrCreateContext(e);if(a.jobs.has(n)||a.queue.push(n),a.jobs.set(n,i),r){const l=new Set(r);l.delete(n),a.dependencies.set(n,l)}else a.dependencies.has(n)||a.dependencies.set(n,new Set);a.completed.delete(n)}flush(e){const n=this.contexts.get(e);if(!n)return;const{queue:r,jobs:i,dependencies:a,completed:l}=n;for(;r.length>0;){let c=!1;const f=r.length;for(let h=0;h<f;h++){const m=r.shift(),p=i.get(m);if(!p){a.delete(m),l.delete(m);continue}const _=a.get(m);let y=!_;if(_){y=!0;for(const v of _){if(v===m)continue;const w=PD(v)&&v.hasPendingGraphRun(e);if(i.has(v)&&!l.has(v)||!i.has(v)&&w){y=!1;break}}}y?(i.delete(m),a.delete(m),p(),l.add(m),c=!0):r.push(m)}if(!c)throw new Error(`Scheduler detected unresolved dependencies for context ${String(e)}.`)}this.contexts.delete(e)}flushAll(){for(const e of Array.from(this.contexts.keys()))this.flush(e)}clear(e){this.contexts.delete(e),this.clearListeners.forEach(n=>n(e))}onClear(e){return this.clearListeners.add(e),()=>this.clearListeners.delete(e)}hasPendingJobs(e){const n=this.contexts.get(e);return!!n&&n.jobs.size>0}clearJob(e,n){const r=this.contexts.get(e);r&&(r.jobs.delete(n),r.dependencies.delete(n),r.completed.delete(n),r.queue=r.queue.filter(i=>i!==n),r.jobs.size===0&&this.contexts.delete(e))}}const uf=new jD,cf=[];let Dl=[],BD=0;function UD(t,e){switch(`${t.type}-${e.type}`){case"insert-update":return{...t,type:"insert",original:{},modified:e.modified,changes:{...t.changes,...e.changes},key:t.key,globalKey:t.globalKey,metadata:e.metadata??t.metadata,syncMetadata:{...t.syncMetadata,...e.syncMetadata},mutationId:e.mutationId,updatedAt:e.updatedAt};case"insert-delete":return null;case"update-delete":return e;case"update-update":return{...e,original:t.original,changes:{...t.changes,...e.changes},metadata:e.metadata??t.metadata,syncMetadata:{...t.syncMetadata,...e.syncMetadata}};case"delete-delete":case"insert-insert":return e;default:{const n=`${t.type}-${e.type}`;throw new Error(`Unhandled mutation combination: ${n}`)}}}function wc(t){const e=new VD(t);return cf.push(e),e}function qc(){if(Dl.length>0)return Dl.slice(-1)[0]}function $D(t){uf.clear(t.id),Dl.push(t)}function qD(t){try{uf.flush(t.id)}finally{Dl=Dl.filter(e=>e.id!==t.id)}}function FD(t){const e=cf.findIndex(n=>n.id===t.id);e!==-1&&cf.splice(e,1)}class VD{constructor(e){if(typeof e.mutationFn>"u")throw new L2;this.id=e.id??crypto.randomUUID(),this.mutationFn=e.mutationFn,this.state="pending",this.mutations=[],this.isPersisted=zD(),this.autoCommit=e.autoCommit??!0,this.createdAt=new Date,this.sequenceNumber=BD++,this.metadata=e.metadata??{}}setState(e){this.state=e,(e==="completed"||e==="failed")&&FD(this)}mutate(e){if(this.state!=="pending")throw new z2;$D(this);try{e()}finally{qD(this)}return this.autoCommit&&this.commit().catch(()=>{}),this}applyMutations(e){for(const n of e){const r=this.mutations.findIndex(i=>i.globalKey===n.globalKey);if(r>=0){const i=this.mutations[r],a=UD(i,n);a===null?this.mutations.splice(r,1):this.mutations[r]=a}else this.mutations.push(n)}}rollback(e){const n=e?.isSecondaryRollback??!1;if(this.state==="completed")throw new P2;if(this.setState("failed"),!n){const r=new Set;this.mutations.forEach(i=>r.add(i.globalKey));for(const i of cf)i.state==="pending"&&i.mutations.some(a=>r.has(a.globalKey))&&i.rollback({isSecondaryRollback:!0})}return this.isPersisted.reject(this.error?.error),this.touchCollection(),this}touchCollection(){const e=new Set;for(const n of this.mutations)e.has(n.collection.id)||(n.collection._state.onTransactionStateChange(),n.collection._state.pendingSyncedTransactions.length>0&&n.collection._state.commitPendingTransactions(),e.add(n.collection.id))}async commit(){if(this.state!=="pending")throw new j2;if(this.setState("persisting"),this.mutations.length===0)return this.setState("completed"),this.isPersisted.resolve(this),this;try{await this.mutationFn({transaction:this}),this.setState("completed"),this.touchCollection(),this.isPersisted.resolve(this)}catch(e){const n=e instanceof Error?e:new Error(String(e));throw this.error={message:n.message,error:n},this.rollback(),n}return this}compareCreatedAt(e){const n=this.createdAt.getTime()-e.createdAt.getTime();return n!==0?n:this.sequenceNumber-e.sequenceNumber}}class HD{constructor(e,n){this.insert=(r,i)=>{this.lifecycle.validateCollectionUsable("insert");const a=this.state,l=qc();if(!l&&!this.config.onInsert)throw new N2;const c=Array.isArray(r)?r:[r],f=[],h=new Set;if(c.forEach(m=>{const p=this.validateData(m,"insert"),_=this.config.getKey(p);if(this.state.has(_)||h.has(_))throw new E2(_);h.add(_);const y=this.generateGlobalKey(_,m),v={mutationId:crypto.randomUUID(),original:{},modified:p,changes:Object.fromEntries(Object.keys(m).map(w=>[w,p[w]])),globalKey:y,key:_,metadata:i?.metadata,syncMetadata:this.config.sync.getSyncMetadata?.()||{},optimistic:i?.optimistic??!0,type:"insert",createdAt:new Date,updatedAt:new Date,collection:this.collection};f.push(v)}),l)return l.applyMutations(f),a.transactions.set(l.id,l),a.scheduleTransactionCleanup(l),a.recomputeOptimisticState(!0),l;{const m=wc({mutationFn:async p=>await this.config.onInsert({transaction:p.transaction,collection:this.collection})});return m.applyMutations(f),m.commit().catch(()=>{}),a.transactions.set(m.id,m),a.scheduleTransactionCleanup(m),a.recomputeOptimisticState(!0),m}},this.delete=(r,i)=>{const a=this.state;this.lifecycle.validateCollectionUsable("delete");const l=qc();if(!l&&!this.config.onDelete)throw new M2;if(Array.isArray(r)&&r.length===0)throw new O2;const c=Array.isArray(r)?r:[r],f=[];for(const m of c){if(!this.state.has(m))throw new I2(m);const p=this.generateGlobalKey(m,this.state.get(m)),_={mutationId:crypto.randomUUID(),original:this.state.get(m),modified:this.state.get(m),changes:this.state.get(m),globalKey:p,key:m,metadata:i?.metadata,syncMetadata:a.syncedMetadata.get(m)||{},optimistic:i?.optimistic??!0,type:"delete",createdAt:new Date,updatedAt:new Date,collection:this.collection};f.push(_)}if(l)return l.applyMutations(f),a.transactions.set(l.id,l),a.scheduleTransactionCleanup(l),a.recomputeOptimisticState(!0),l;const h=wc({autoCommit:!0,mutationFn:async m=>this.config.onDelete({transaction:m.transaction,collection:this.collection})});return h.applyMutations(f),h.commit().catch(()=>{}),a.transactions.set(h.id,h),a.scheduleTransactionCleanup(h),a.recomputeOptimisticState(!0),h},this.id=n,this.config=e}setDeps(e){this.lifecycle=e.lifecycle,this.state=e.state,this.collection=e.collection}ensureStandardSchema(e){if(e&&"~standard"in e)return e;throw new y2}validateData(e,n,r){if(!this.config.schema)return e;const i=this.ensureStandardSchema(this.config.schema);if(n==="update"&&r){const l=this.state.get(r);if(l&&e&&typeof e=="object"&&typeof l=="object"){const c=Object.assign({},l,e),f=i["~standard"].validate(c);if(f instanceof Promise)throw new jw;if("issues"in f&&f.issues){const _=f.issues.map(y=>({message:y.message,path:y.path?.map(v=>String(v))}));throw new Pw(n,_)}const h=f.value,m=Object.keys(e);return Object.fromEntries(m.map(_=>[_,h[_]]))}}const a=i["~standard"].validate(e);if(a instanceof Promise)throw new jw;if("issues"in a&&a.issues){const l=a.issues.map(c=>({message:c.message,path:c.path?.map(f=>String(f))}));throw new Pw(n,l)}return a.value}generateGlobalKey(e,n){if(typeof e!="string"&&typeof e!="number")throw typeof e>"u"?new x2(n):new S2(e,n);return`KEY::${this.id}/${e}`}update(e,n,r){if(typeof e>"u")throw new C2;const i=this.state;this.lifecycle.validateCollectionUsable("update");const a=qc();if(!a&&!this.config.onUpdate)throw new D2;const l=Array.isArray(e),c=l?e:[e];if(l&&c.length===0)throw new T2;const f=typeof n=="function"?n:r,h=typeof n=="function"?{}:n,m=c.map(v=>{const w=this.state.get(v);if(!w)throw new A2(v);return w});let p;l?p=LD(m,f):p=[MD(m[0],f)];const _=c.map((v,w)=>{const k=p[w];if(!k||Object.keys(k).length===0)return null;const S=m[w],R=this.validateData(k,"update",v),T=Object.assign({},S,R),z=this.config.getKey(S),L=this.config.getKey(T);if(z!==L)throw new R2(z,L);const E=this.generateGlobalKey(L,T);return{mutationId:crypto.randomUUID(),original:S,modified:T,changes:Object.fromEntries(Object.keys(k).map(M=>[M,T[M]])),globalKey:E,key:v,metadata:h.metadata,syncMetadata:i.syncedMetadata.get(v)||{},optimistic:h.optimistic??!0,type:"update",createdAt:new Date,updatedAt:new Date,collection:this.collection}}).filter(Boolean);if(_.length===0){const v=wc({mutationFn:async()=>{}});return v.commit().catch(()=>{}),i.scheduleTransactionCleanup(v),v}if(a)return a.applyMutations(_),i.transactions.set(a.id,a),i.scheduleTransactionCleanup(a),i.recomputeOptimisticState(!0),a;const y=wc({mutationFn:async v=>this.config.onUpdate({transaction:v.transaction,collection:this.collection})});return y.applyMutations(_),y.commit().catch(()=>{}),i.transactions.set(y.id,y),i.scheduleTransactionCleanup(y),i.recomputeOptimisticState(!0),y}}class GD extends QS{constructor(){super()}setDeps(e){this.collection=e.collection}emit(e,n){this.emitInner(e,n)}emitStatusChange(e,n){this.emit("status:change",{type:"status:change",collection:this.collection,previousStatus:n,status:e});const r=`status:${e}`;this.emit(r,{type:r,collection:this.collection,previousStatus:n,status:e})}emitSubscribersChange(e,n){this.emit("subscribers:change",{type:"subscribers:change",collection:this.collection,previousSubscriberCount:n,subscriberCount:e})}cleanup(){this.clearListeners()}}function YS(t){const e=new sy(t);return t.utils?e.utils=t.utils:e.utils={},e}class sy{constructor(e){if(this.utils={},this.insert=(n,r)=>this._mutations.insert(n,r),this.delete=(n,r)=>this._mutations.delete(n,r),!e)throw new m2;if(!e.sync)throw new g2;e.id?this.id=e.id:this.id=crypto.randomUUID(),this.config={...e,autoIndex:e.autoIndex??"eager"},this._changes=new dD,this._events=new GD,this._indexes=new SD,this._lifecycle=new yD(e,this.id),this._mutations=new HD(e,this.id),this._state=new cD(e),this._sync=new _D(e,this.id),this.comparisonOpts=KD(e),this._changes.setDeps({collection:this,lifecycle:this._lifecycle,sync:this._sync,events:this._events}),this._events.setDeps({collection:this}),this._indexes.setDeps({state:this._state,lifecycle:this._lifecycle}),this._lifecycle.setDeps({changes:this._changes,events:this._events,indexes:this._indexes,state:this._state,sync:this._sync}),this._mutations.setDeps({collection:this,lifecycle:this._lifecycle,state:this._state}),this._state.setDeps({collection:this,lifecycle:this._lifecycle,changes:this._changes,indexes:this._indexes,events:this._events}),this._sync.setDeps({collection:this,state:this._state,lifecycle:this._lifecycle,events:this._events}),e.startSync===!0&&this._sync.startSync()}get status(){return this._lifecycle.status}get subscriberCount(){return this._changes.activeSubscribersCount}onFirstReady(e){return this._lifecycle.onFirstReady(e)}isReady(){return this._lifecycle.status==="ready"}get isLoadingSubset(){return this._sync.isLoadingSubset}startSyncImmediate(){this._sync.startSync()}preload(){return this._sync.preload()}get(e){return this._state.get(e)}has(e){return this._state.has(e)}get size(){return this._state.size}*keys(){yield*this._state.keys()}*values(){yield*this._state.values()}*entries(){yield*this._state.entries()}*[Symbol.iterator](){yield*this._state[Symbol.iterator]()}forEach(e){return this._state.forEach(e)}map(e){return this._state.map(e)}getKeyFromItem(e){return this.config.getKey(e)}createIndex(e,n={}){return this._indexes.createIndex(e,n)}get indexes(){return this._indexes.indexes}validateData(e,n,r){return this._mutations.validateData(e,n,r)}get compareOptions(){return{...this.comparisonOpts}}update(e,n,r){return this._mutations.update(e,n,r)}get state(){const e=new Map;for(const[n,r]of this.entries())e.set(n,r);return e}stateWhenReady(){return this.size>0||this.isReady()?Promise.resolve(this.state):this.preload().then(()=>this.state)}get toArray(){return Array.from(this.values())}toArrayWhenReady(){return this.size>0||this.isReady()?Promise.resolve(this.toArray):this.preload().then(()=>this.toArray)}currentStateAsChanges(e={}){return oD(this,e)}subscribeChanges(e,n={}){return this._changes.subscribeChanges(e,n)}on(e,n){return this._events.on(e,n)}once(e,n){return this._events.once(e,n)}off(e,n){this._events.off(e,n)}waitFor(e,n){return this._events.waitFor(e,n)}async cleanup(){return this._lifecycle.cleanup(),Promise.resolve()}}function KD(t){if(t.defaultStringCollation){const e=t.defaultStringCollation;return{stringSort:e.stringSort??"locale",locale:e.stringSort==="locale"?e.locale:void 0,localeOptions:e.stringSort==="locale"?e.localeOptions:void 0}}else return{stringSort:"locale"}}class jt{constructor(e={}){this.query={},this.query={...e}}_createRefForSource(e,n){let r;try{r=Object.keys(e)}catch{const c=e===null?"null":"undefined";throw new bc(n,c)}if(Array.isArray(e))throw new bc(n,"array");if(r.length!==1)throw r.length===0?new bc(n,"empty object"):r.every(c=>!isNaN(Number(c)))?new bc(n,"string"):new $2(n);const i=r[0],a=e[i];let l;if(a instanceof sy)l=new Fa(a,i);else if(a instanceof jt){const c=a._getQuery();if(!c.from)throw new q2(n);l=new gr(c,i)}else throw new F2(i);return[i,l]}from(e){const[,n]=this._createRefForSource(e,"from clause");return new jt({...this.query,from:n})}join(e,n,r="left"){const[i,a]=this._createRefForSource(e,"join clause"),c=[...this._getCurrentAliases(),i],f=xa(c),h=n(f);let m,p;if(h.type==="func"&&h.name==="eq"&&h.args.length===2)m=h.args[0],p=h.args[1];else throw new V2;const _={from:a,type:r,left:m,right:p},y=this.query.join||[];return new jt({...this.query,join:[...y,_]})}leftJoin(e,n){return this.join(e,n,"left")}rightJoin(e,n){return this.join(e,n,"right")}innerJoin(e,n){return this.join(e,n,"inner")}fullJoin(e,n){return this.join(e,n,"full")}where(e){const n=this._getCurrentAliases(),r=xa(n),i=e(r),a=this.query.where||[];return new jt({...this.query,where:[...a,i]})}having(e){const n=this._getCurrentAliases(),r=xa(n),i=e(r),a=this.query.having||[];return new jt({...this.query,having:[...a,i]})}select(e){const n=this._getCurrentAliases(),r=xa(n),i=e(r),a=XS(i);return new jt({...this.query,select:a,fnSelect:void 0})}orderBy(e,n="asc"){const r=this._getCurrentAliases(),i=xa(r),a=e(i),l=typeof n=="string"?{direction:n,nulls:"first"}:{direction:n.direction??"asc",nulls:n.nulls??"first",stringSort:n.stringSort,locale:n.stringSort==="locale"?n.locale:void 0,localeOptions:n.stringSort==="locale"?n.localeOptions:void 0},c=m=>({expression:Yt(m),compareOptions:l}),f=Array.isArray(a)?a.map(m=>c(m)):[c(a)],h=this.query.orderBy||[];return new jt({...this.query,orderBy:[...h,...f]})}groupBy(e){const n=this._getCurrentAliases(),r=xa(n),i=e(r),a=Array.isArray(i)?i.map(c=>Yt(c)):[Yt(i)],l=this.query.groupBy||[];return new jt({...this.query,groupBy:[...l,...a]})}limit(e){return new jt({...this.query,limit:e})}offset(e){return new jt({...this.query,offset:e})}distinct(){return new jt({...this.query,distinct:!0})}findOne(){return new jt({...this.query,singleResult:!0})}_getCurrentAliases(){const e=[];if(this.query.from&&e.push(this.query.from.alias),this.query.join)for(const n of this.query.join)e.push(n.from.alias);return e}get fn(){const e=this;return{select(n){return new jt({...e.query,select:void 0,fnSelect:n})},where(n){return new jt({...e.query,fnWhere:[...e.query.fnWhere||[],n]})},having(n){return new jt({...e.query,fnHaving:[...e.query.fnHaving||[],n]})}}}_getQuery(){if(!this.query.from)throw new H2;return this.query}}function ZD(t){return t===void 0?Yt(null):t instanceof $S||t instanceof _r||t instanceof kn||t instanceof jn?t:Yt(t)}function QD(t){return t!==null&&typeof t=="object"&&!Gg(t)&&!t.__refProxy}function XS(t){if(!QD(t))return ZD(t);const e={};for(const[n,r]of Object.entries(t)){if(typeof n=="string"&&n.startsWith("__SPREAD_SENTINEL__")){e[n]=r;continue}e[n]=XS(r)}return e}function JD(t){const e=t(new jt);return WS(e)}function WS(t){return t._getQuery()}function YD(t){const e=XD(t);let n=t,r,i=0;const a=10;for(;i<a&&!kr(n,r);)r=n,n=Hm(n),i++;return{optimizedQuery:eE(n),sourceWhereClauses:e}}function XD(t){const e=new Map;if(!t.where||t.where.length===0)return e;const r=Km(t.where).map(a=>tE(a)),i=nE(r);for(const[a,l]of i.singleSource)WD(t,a)&&e.set(a,l);return e}function WD(t,e){if(t.from.alias===e)return t.from.type==="collectionRef";if(t.join){for(const n of t.join)if(n.from.alias===e)return n.from.type==="collectionRef"}return!1}function Hm(t){const e={...t,from:t.from.type==="queryRef"?new gr(Hm(t.from.query),t.from.alias):t.from,join:t.join?.map(n=>({...n,from:n.from.type==="queryRef"?new gr(Hm(n.from.query),n.from.alias):n.from}))};return eM(e)}function eM(t){if(!t.where||t.where.length===0)return t;if(!t.join||t.join.length===0){if(t.where.length>1){const c=Km(t.where),f=ff(c);return{...t,where:[f]}}return t}const e=t.where.filter(c=>!zw(c)),r=Km(e).map(c=>tE(c)),i=nE(r),a=nM(t,i),l=t.where.filter(c=>zw(c));return l.length>0&&(a.where=[...a.where||[],...l]),a}function eE(t){return{...t,from:Gm(t.from),join:t.join?.map(e=>({...e,from:Gm(e.from)}))}}function Gm(t){if(t.type==="collectionRef")return t;const e=eE(t.query);if(tM(e)){const n=Gm(e.from);return n.type==="collectionRef"?new Fa(n.collection,t.alias):new gr(n.query,t.alias)}return new gr(e,t.alias)}function tM(t){return(!t.where||t.where.length===0)&&!t.select&&(!t.groupBy||t.groupBy.length===0)&&(!t.having||t.having.length===0)&&(!t.orderBy||t.orderBy.length===0)&&(!t.join||t.join.length===0)&&t.limit===void 0&&t.offset===void 0&&!t.fnSelect&&(!t.fnWhere||t.fnWhere.length===0)&&(!t.fnHaving||t.fnHaving.length===0)}function Km(t){const e=[];for(const n of t){const r=Kg(n);e.push(...ay(r))}return e}function ay(t){if(t.type==="func"&&t.name==="and"){const e=[];for(const n of t.args)e.push(...ay(n));return e}else return[t]}function tE(t){const e=new Set;let n=!1;function r(i){switch(i.type){case"ref":if(i.path&&i.path.length>0){const a=i.path[0];a&&(e.add(a),i.path.length===1&&(n=!0))}break;case"func":i.args&&i.args.forEach(r);break;case"val":break;case"agg":i.args&&i.args.forEach(r);break}}return r(t),{expression:t,touchedSources:e,hasNamespaceOnlyRef:n}}function nE(t){const e=new Map,n=[];for(const a of t)if(a.touchedSources.size===1&&!a.hasNamespaceOnlyRef){const l=Array.from(a.touchedSources)[0];e.has(l)||e.set(l,[]),e.get(l).push(a.expression)}else(a.touchedSources.size>1||a.hasNamespaceOnlyRef)&&n.push(a.expression);const r=new Map;for(const[a,l]of e)r.set(a,ff(l));const i=n.length>0?ff(n):void 0;return{singleSource:r,multiSource:i}}function nM(t,e){const n=new Set,r=ux(t.from,e.singleSource,n),i=t.join?t.join.map(h=>({...h,from:ux(h.from,e.singleSource,n)})):void 0,a=[];e.multiSource&&a.push(e.multiSource);const l=t.join&&t.join.some(h=>h.type==="left"||h.type==="right"||h.type==="full");for(const[h,m]of e.singleSource)n.has(h)?l&&a.push(d2(m)):a.push(m);const c=a.length>1?[ff(a.flatMap(h=>ay(Kg(h))))]:a;return{select:t.select,groupBy:t.groupBy?[...t.groupBy]:void 0,having:t.having?[...t.having]:void 0,orderBy:t.orderBy?[...t.orderBy]:void 0,limit:t.limit,offset:t.offset,distinct:t.distinct,fnSelect:t.fnSelect,fnWhere:t.fnWhere?[...t.fnWhere]:void 0,fnHaving:t.fnHaving?[...t.fnHaving]:void 0,from:r,join:i,where:c.length>0?c:[]}}function Da(t){return{from:t.from.type==="collectionRef"?new Fa(t.from.collection,t.from.alias):new gr(Da(t.from.query),t.from.alias),select:t.select,join:t.join?t.join.map(e=>({type:e.type,left:e.left,right:e.right,from:e.from.type==="collectionRef"?new Fa(e.from.collection,e.from.alias):new gr(Da(e.from.query),e.from.alias)})):void 0,where:t.where?[...t.where]:void 0,groupBy:t.groupBy?[...t.groupBy]:void 0,having:t.having?[...t.having]:void 0,orderBy:t.orderBy?[...t.orderBy]:void 0,limit:t.limit,offset:t.offset,fnSelect:t.fnSelect,fnWhere:t.fnWhere?[...t.fnWhere]:void 0,fnHaving:t.fnHaving?[...t.fnHaving]:void 0}}function ux(t,e,n){const r=e.get(t.alias);if(!r)return t.type==="collectionRef"?new Fa(t.collection,t.alias):new gr(Da(t.query),t.alias);if(t.type==="collectionRef"){const l={from:new Fa(t.collection,t.alias),where:[r]};return n.add(t.alias),new gr(l,t.alias)}if(!lM(t.query,r,t.alias))return new gr(Da(t.query),t.alias);if(cM(t.query,r,t.alias))return new gr(Da(t.query),t.alias);const i=t.query.where||[],a={...Da(t.query),where:[...i,r]};return n.add(t.alias),new gr(a,t.alias)}function rM(t,e,n){return t.select?rE(t.select)||uM(t.select,e,n):!1}function iM(t){return t.groupBy&&t.groupBy.length>0}function sM(t){return t.having&&t.having.length>0}function aM(t){return t.orderBy&&t.orderBy.length>0&&(t.limit!==void 0||t.offset!==void 0)}function oM(t){return t.fnSelect||t.fnWhere&&t.fnWhere.length>0||t.fnHaving&&t.fnHaving.length>0}function lM(t,e,n){return!(rM(t,e,n)||iM(t)||sM(t)||aM(t)||oM(t))}function rE(t){for(const e of Object.values(t))if(typeof e=="object"){const n=e;if(n.type==="agg"||!("type"in n)&&rE(n))return!0}return!1}function oy(t){const e=[];if(t==null||typeof t!="object")return e;switch(t.type){case"ref":e.push(t);break;case"func":case"agg":for(const n of t.args??[])e.push(...oy(n));break}return e}function uM(t,e,n){const r=new Set;for(const[a,l]of Object.entries(t))a.startsWith("__SPREAD_SENTINEL__")||l instanceof kn||r.add(a);const i=oy(e);for(const a of i){const l=a.path;if(!Array.isArray(l)||l.length<2)continue;const c=l[0],f=l[1];if(c===n&&r.has(f))return!0}return!1}function cM(t,e,n){const r=oy(e);if(r.every(a=>a.path[0]!==n))return!1;if(t.fnSelect)return!0;const i=t.select;if(!i)return!1;for(const a of r){const l=a.path;if(l.length<2||l[0]!==n)continue;const c=i[l[1]];if(!c)continue;if(!(c instanceof kn)||c.path.length<2)return!0;const[f,h]=c.path;if(f!==n&&f!==t.from.alias||h!==l[1])return!0}return!1}function ff(t){if(t.length===0)throw new hI;return t.length===1?t[0]:new _r("and",t)}function fM(t,e,n,r,i,a,l,c,f,h,m,p,_,y,v,w,k,S){let R=t;for(const T of e)R=hM(R,T,n,r,i,a,l,c,f,h,m,p,_,y,v,w,k,S);return R}function hM(t,e,n,r,i,a,l,c,f,h,m,p,_,y,v,w,k,S){const R=e.from.type==="collectionRef",{alias:T,input:z,collectionId:L}=pM(e.from,a,f,h,m,p,_,y,l,c,w,k,S);n[T]=z,R&&(k[T]=L);const E=f[r],M=f[L];if(!E)throw new $w(r);if(!M)throw new $w(L);const{activeSource:$,lazySource:F}=gM(e.type,E,M),P=Object.keys(n),{mainExpr:Z,joinedExpr:se}=dM(e.left,e.right,P,T),me=Bn(Z),V=Bn(se);let G=t.pipe(Sn(([K,re])=>[me(re),[K,re]])),B=z.pipe(Sn(([K,re])=>{const Q={[T]:re};return[V(Q),[K,Q]]}));if(!["inner","left","right","full"].includes(e.type))throw new eI(e.type);if($){const K=$==="main"?e.from:v.from,re=K.type==="queryRef"&&(K.query.limit||K.query.offset),Q=Z.type==="func"||se.type==="func";if(!re&&!Q){const I=$==="main"?T:i;p.add(I);const N=$==="main"?G:B,O=Ol(v,$==="main"?se:Z,F),ie=O.collection,fe=O.path[0];fe&&Kf(fe,O.path,ie);const ge=N.pipe(SN(de=>{const Se=S[I]||I,we=h[Se];if(!we)throw new dI(Se,I,F.id,Object.keys(h));if(we.hasLoadedInitialState())return;const Xe=de.getInner().map(([[Dt]])=>Dt),at=new kn(O.path);we.requestSnapshot({where:QN(at,Xe),optimizedOnly:!0})||we.requestSnapshot()}));$==="main"?G=ge:B=ge}}return G.pipe(ON(B,e.type),mM(e.type))}function dM(t,e,n,r){const i=n.filter(c=>c!==r),a=Zm(t),l=Zm(e);if(a&&i.includes(a)&&l===r)return{mainExpr:t,joinedExpr:e};if(a===r&&l&&i.includes(l))return{mainExpr:e,joinedExpr:t};throw!a||!l?new nI:a===l?new tI(a):i.includes(a)?l!==r?new iI(r):new sI:new rI(a)}function Zm(t){switch(t.type){case"ref":return t.path[0]||null;case"func":{const e=new Set;for(const n of t.args){const r=Zm(n);r&&e.add(r)}return e.size===1?Array.from(e)[0]:null}default:return null}}function pM(t,e,n,r,i,a,l,c,f,h,m,p,_){switch(t.type){case"collectionRef":{const y=e[t.alias];if(!y)throw new qS(t.alias,t.collection.id,Object.keys(e));return p[t.alias]=t.collection.id,{alias:t.alias,input:y,collectionId:t.collection.id}}case"queryRef":{const y=h.get(t.query)||t.query,v=m(y,e,n,r,i,a,l,c,f,h);Object.assign(p,v.aliasToCollectionId),Object.assign(_,v.aliasRemapping);const w=Object.keys(v.aliasToCollectionId).find(R=>v.aliasToCollectionId[R]===v.collectionId);w&&w!==t.alias&&(_[t.alias]=w);const S=v.pipeline.pipe(Sn(R=>{const[T,[z,L]]=R;return[T,z]}));return{alias:t.alias,input:S,collectionId:v.collectionId}}default:throw new aI(t.type)}}function mM(t){return function(e){return e.pipe(Vi(n=>{const[r,[i,a]]=n,l=i?.[1],c=a?.[1];return t==="inner"?!!(l&&c):t==="left"?!!l:t==="right"?!!c:!0}),Sn(n=>{const[r,[i,a]]=n,l=i?.[0],c=i?.[1],f=a?.[0],h=a?.[1],m={};return c&&Object.assign(m,c),h&&Object.assign(m,h),[`[${l},${f}]`,m]}))}}function gM(t,e,n){switch(t){case"left":return{activeSource:"main",lazySource:n};case"right":return{activeSource:"joined",lazySource:e};case"inner":return e.size<n.size?{activeSource:"main",lazySource:n}:{activeSource:"joined",lazySource:e};default:return{activeSource:void 0,lazySource:void 0}}}function Qm(t){return t instanceof jn?t.value:t}function yM(t,e,n){const r=t.source(e);if(r&&typeof r=="object"){let i=n;const a=t.targetPath;if(a.length===0)for(const[l,c]of Object.entries(r))n[l]=Qm(c);else for(let l=0;l<a.length;l++){const c=a[l];if(l===a.length-1){const f=i[c]??={};if(typeof f=="object")for(const[h,m]of Object.entries(r))f[h]=Qm(m)}else{const f=i[c];(f==null||typeof f!="object")&&(i[c]={}),i=i[c]}}}}function _M(t,e,n){const r=t.alias.split(".");if(r.length===1)n[t.alias]=t.compiled(e);else{let i=n;for(let a=0;a<r.length-1;a++){const l=r[a],c=i[l];(c==null||typeof c!="object")&&(i[l]={}),i=i[l]}i[r[r.length-1]]=Qm(t.compiled(e))}}function bM([t,e],n){const r={};for(const i of n)i.kind==="merge"?yM(i,e,r):_M(i,e,r);return[t,{...e,__select_results:r}]}function vM(t,e,n){const r=[];return iE([],e,r),t.pipe(Sn(i=>bM(i,r)))}function wM(t){return t.type==="agg"}function xM(t){return t&&typeof t=="object"&&!Gg(t)}function iE(t,e,n){for(const[r,i]of Object.entries(e)){if(r.startsWith("__SPREAD_SENTINEL__")){const l=r.slice(19),c=l.lastIndexOf("__"),f=c>=0?l.slice(0,c):l,h=i&&typeof i=="object"&&"type"in i&&i.type==="ref";if(f.includes(".")||h){const m=[...t],p=h?i:new kn(f.split(".")),_=Bn(p);n.push({kind:"merge",targetPath:m,source:_})}else{const m=f,p=[...t];n.push({kind:"merge",targetPath:p,source:_=>_[m]})}continue}const a=i;if(xM(a)){iE([...t,r],a,n);continue}if(wM(a))n.push({kind:"field",alias:[...t,r].join("."),compiled:()=>null});else{if(a===void 0||!Gg(a)){n.push({kind:"field",alias:[...t,r].join("."),compiled:()=>a});continue}if(a instanceof jn){const l=a.value;n.push({kind:"field",alias:[...t,r].join("."),compiled:()=>l})}else n.push({kind:"field",alias:[...t,r].join("."),compiled:Bn(a)})}}}function ly(t,e,n,r,i,a,l,c,f=new WeakMap,h=new WeakMap){const m=f.get(t);if(m)return m;Jm(t);const{optimizedQuery:p,sourceWhereClauses:_}=YD(t);h.set(p,t),Xm(p,t,h);const y={...e},v={},w={},k={},{alias:S,input:R,collectionId:T}=EM(p.from,y,n,r,i,a,l,c,f,h,v,w);k[S]=R;let z=R.pipe(Sn(([$,F])=>[$,{[S]:F}]));if(p.join&&p.join.length>0&&(z=fM(z,p.join,k,T,S,y,f,h,n,r,i,a,l,c,t,ly,v,w)),p.where&&p.where.length>0)for(const $ of p.where){const F=Kg($),P=Bn(F);z=z.pipe(Vi(([Z,se])=>Pa(P(se))))}if(p.fnWhere&&p.fnWhere.length>0)for(const $ of p.fnWhere)z=z.pipe(Vi(([F,P])=>Pa($(P))));if(p.distinct&&!p.fnSelect&&!p.select)throw new G2;if(p.fnSelect?z=z.pipe(Sn(([$,F])=>{const P=p.fnSelect(F);return[$,{...F,__select_results:P}]})):p.select?z=vM(z,p.select):z=z.pipe(Sn(([$,F])=>{const P=!p.join&&!p.groupBy?F[S]:F;return[$,{...F,__select_results:P}]})),p.groupBy&&p.groupBy.length>0?z=rx(z,p.groupBy,p.having,p.select,p.fnHaving):p.select&&Object.values(p.select).some(F=>F.type==="agg")&&(z=rx(z,[],p.having,p.select,p.fnHaving)),p.having&&(!p.groupBy||p.groupBy.length===0)&&!(p.select?Object.values(p.select).some(F=>F.type==="agg"):!1))throw new K2;if(p.fnHaving&&p.fnHaving.length>0&&(!p.groupBy||p.groupBy.length===0))for(const $ of p.fnHaving)z=z.pipe(Vi(([F,P])=>$(P)));if(p.distinct&&(z=z.pipe(NN(([$,F])=>F.__select_results))),p.orderBy&&p.orderBy.length>0){const P=aD(t,z,p.orderBy,p.select||{},n[T],l,c,p.limit,p.offset).pipe(Sn(([se,[me,V]])=>{const G=me.__select_results,B=Ym(G);return[se,[B,V]]})),Z={collectionId:T,pipeline:P,sourceWhereClauses:_,aliasToCollectionId:v,aliasRemapping:w};return f.set(t,Z),Z}else if(p.limit!==void 0||p.offset!==void 0)throw new Z2;const E=z.pipe(Sn(([$,F])=>{const P=F.__select_results,Z=Ym(P);return[$,[Z,void 0]]})),M={collectionId:T,pipeline:E,sourceWhereClauses:_,aliasToCollectionId:v,aliasRemapping:w};return f.set(t,M),M}function SM(t){const e=new Set;if(t.from.type==="collectionRef"&&e.add(t.from.alias),t.join)for(const n of t.join)n.from.type==="collectionRef"&&e.add(n.from.alias);return e}function Jm(t,e=new Set){const n=SM(t);for(const i of n)if(e.has(i))throw new Q2(i,Array.from(e));const r=new Set([...e,...n]);if(t.from.type==="queryRef"&&Jm(t.from.query,r),t.join)for(const i of t.join)i.from.type==="queryRef"&&Jm(i.from.query,r)}function EM(t,e,n,r,i,a,l,c,f,h,m,p){switch(t.type){case"collectionRef":{const _=e[t.alias];if(!_)throw new qS(t.alias,t.collection.id,Object.keys(e));return m[t.alias]=t.collection.id,{alias:t.alias,input:_,collectionId:t.collection.id}}case"queryRef":{const _=h.get(t.query)||t.query,y=ly(_,e,n,r,i,a,l,c,f,h);Object.assign(m,y.aliasToCollectionId),Object.assign(p,y.aliasRemapping);const v=Object.keys(y.aliasToCollectionId).find(S=>y.aliasToCollectionId[S]===y.collectionId);v&&v!==t.alias&&(p[t.alias]=v);const k=y.pipeline.pipe(Sn(S=>{const[R,[T,z]]=S,L=Ym(T);return[R,L]}));return{alias:t.alias,input:k,collectionId:y.collectionId}}default:throw new J2(t.type)}}function kM(t){return t instanceof jn||t&&typeof t=="object"&&"type"in t&&t.type==="val"}function Ym(t){return kM(t)?t.value:t}function Xm(t,e,n){if(t.from.type==="queryRef"&&e.from.type==="queryRef"&&(n.set(t.from.query,e.from.query),Xm(t.from.query,e.from.query,n)),t.join&&e.join)for(let r=0;r<t.join.length&&r<e.join.length;r++){const i=t.join[r],a=e.join[r];i.from.type==="queryRef"&&a.from.type==="queryRef"&&(n.set(i.from.query,a.from.query),Xm(i.from.query,a.from.query,n))}}function uy(t,e){const n=t.type;if(n==="val")return new jn(t.value);if(n==="ref"){const r=t.path;if(Array.isArray(r)){if(r[0]===e&&r.length>1)return new kn(r.slice(1));if(r.length===1&&r[0]!==void 0)return new kn([r[0]])}return new kn(Array.isArray(r)?r:[String(r)])}else{const r=[];for(const i of t.args){const a=uy(i,e);r.push(a)}return new _r(t.name,r)}}function cx(t,e){return t.map(r=>{const i=uy(r.expression,e);return{...r,expression:i}})}const fx=Symbol.for("@tanstack/db.collection-config-builder");class CM{constructor(e,n,r,i){this.alias=e,this.collectionId=n,this.collection=r,this.collectionConfigBuilder=i,this.biggest=void 0,this.subscriptionLoadingPromises=new Map,this.sentToD2Keys=new Set}subscribe(){const e=this.getWhereClauseForAlias();if(e){const n=uy(e,this.alias);return this.subscribeToChanges(n)}return this.subscribeToChanges()}subscribeToChanges(e){let n;const r=this.getOrderByInfo();if(r)n=this.subscribeToOrderedChanges(e,r);else{const c=!this.collectionConfigBuilder.isLazyAlias(this.alias);n=this.subscribeToMatchingChanges(e,c)}const i=()=>{if(!this.subscriptionLoadingPromises.has(n)){let c;const f=new Promise(h=>{c=h});this.subscriptionLoadingPromises.set(n,{resolve:c}),this.collectionConfigBuilder.liveQueryCollection._sync.trackLoadPromise(f)}};n.status==="loadingSubset"&&i();const a=n.on("status:change",c=>{if(c.status==="loadingSubset")i();else{const f=this.subscriptionLoadingPromises.get(n);f&&(this.subscriptionLoadingPromises.delete(n),f.resolve())}}),l=()=>{const c=this.subscriptionLoadingPromises.get(n);c&&(this.subscriptionLoadingPromises.delete(n),c.resolve()),a(),n.unsubscribe()};return this.collectionConfigBuilder.currentSyncState.unsubscribeCallbacks.add(l),n}sendChangesToPipeline(e,n){const r=Array.isArray(e)?e:[...e],i=[];for(const f of r){if(f.type==="insert"){if(this.sentToD2Keys.has(f.key))continue;this.sentToD2Keys.add(f.key)}else f.type==="delete"&&this.sentToD2Keys.delete(f.key);i.push(f)}const a=this.collectionConfigBuilder.currentSyncState.inputs[this.alias],c=TM(a,i,this.collection.config.getKey)>0?n:void 0;this.collectionConfigBuilder.scheduleGraphRun(c,{alias:this.alias})}subscribeToMatchingChanges(e,n=!1){const r=a=>{this.sendChangesToPipeline(a)};return this.collection.subscribeChanges(r,{...n&&{includeInitialState:n},whereExpression:e})}subscribeToOrderedChanges(e,n){const{orderBy:r,offset:i,limit:a,index:l}=n,c=p=>{const _=AM(p);this.sendChangesToPipelineWithTracking(_,f)},f=this.collection.subscribeChanges(c,{whereExpression:e}),h=this.collection.on("truncate",()=>{this.biggest=void 0,this.sentToD2Keys.clear()});f.on("unsubscribed",()=>{h()});const m=cx(r,this.alias);return l?(f.setOrderByIndex(l),f.requestLimitedSnapshot({limit:i+a,orderBy:m})):f.requestSnapshot({orderBy:m,limit:i+a}),f}loadMoreIfNeeded(e){const n=this.getOrderByInfo();if(!n)return!0;const{dataNeeded:r}=n;if(!r)return!0;const i=r();return i>0&&this.loadNextItems(i,e),!0}sendChangesToPipelineWithTracking(e,n){const r=this.getOrderByInfo();if(!r){this.sendChangesToPipeline(e);return}const i=this.trackSentValues(e,r.comparator),a=n;a[fx]??=this.loadMoreIfNeeded.bind(this,n),this.sendChangesToPipeline(i,a[fx])}loadNextItems(e,n){const r=this.getOrderByInfo();if(!r)return;const{orderBy:i,valueExtractorForRawRow:a,offset:l}=r,c=this.biggest,f=c?a(c):void 0,h=f!==void 0?Array.isArray(f)?f:[f]:void 0,m=cx(i,this.alias);n.requestLimitedSnapshot({orderBy:m,limit:e,minValues:h,offset:l})}getWhereClauseForAlias(){const e=this.collectionConfigBuilder.sourceWhereClausesCache;if(e)return e.get(this.alias)}getOrderByInfo(){const e=this.collectionConfigBuilder.optimizableOrderByCollections[this.collectionId];if(e&&e.alias===this.alias)return e}*trackSentValues(e,n){for(const r of e)r.type!=="delete"&&(this.biggest?n(this.biggest,r.value)<0&&(this.biggest=r.value):this.biggest=r.value),yield r}}function TM(t,e,n){const r=[];for(const i of e){const a=n(i.value);i.type==="insert"?r.push([[a,i.value],1]):i.type==="update"?(r.push([[a,i.previousValue],-1]),r.push([[a,i.value],1])):r.push([[a,i.value],-1])}return r.length!==0&&t.sendData(new Bt(r)),r.length}function*AM(t){for(const e of t)e.type==="update"?(yield{type:"delete",key:e.key,value:e.previousValue},yield{type:"insert",key:e.key,value:e.value}):yield e}const sE=new WeakMap;function RM(t){return t.utils?.[ny]?.getBuilder?.()}function OM(t,e){sE.set(t,e)}function IM(t){return sE.get(t)}let NM=0;class DM{constructor(e){this.config=e,this.compiledAliasToCollectionId={},this.resultKeys=new WeakMap,this.orderByIndices=new WeakMap,this.isGraphRunning=!1,this.runCount=0,this.isInErrorState=!1,this.aliasDependencies={},this.builderDependencies=new Set,this.pendingGraphRuns=new Map,this.subscriptions={},this.lazySourcesCallbacks={},this.lazySources=new Set,this.optimizableOrderByCollections={},this.id=e.id||`live-query-${++NM}`,this.query=MM(e),this.collections=zM(this.query);const n=PM(this.query);this.collectionByAlias={};for(const[r,i]of n.entries()){const a=this.collections[r];if(a)for(const l of i)this.collectionByAlias[l]=a}this.query.orderBy&&this.query.orderBy.length>0&&(this.compare=LM(this.orderByIndices)),this.compareOptions=this.config.defaultStringCollation??aE(this.query).compareOptions,this.compileBasePipeline()}hasJoins(e){return!!(e.join&&e.join.length>0||e.from.type==="queryRef"&&this.hasJoins(e.from.query))}getConfig(){return{id:this.id,getKey:this.config.getKey||(e=>this.resultKeys.get(e)),sync:this.getSyncConfig(),compare:this.compare,defaultStringCollation:this.compareOptions,gcTime:this.config.gcTime||5e3,schema:this.config.schema,onInsert:this.config.onInsert,onUpdate:this.config.onUpdate,onDelete:this.config.onDelete,startSync:this.config.startSync,singleResult:this.query.singleResult,utils:{getRunCount:this.getRunCount.bind(this),setWindow:this.setWindow.bind(this),getWindow:this.getWindow.bind(this),[ny]:{getBuilder:()=>this,hasCustomGetKey:!!this.config.getKey,hasJoins:this.hasJoins(this.query)}}}}setWindow(e){if(!this.windowFn)throw new mI;return this.currentWindow=e,this.windowFn(e),this.maybeRunGraphFn?.(),this.liveQueryCollection?.isLoadingSubset?new Promise(n=>{const r=this.liveQueryCollection.on("loadingSubset:change",i=>{i.isLoadingSubset||(r(),n())})}):!0}getWindow(){if(!(!this.windowFn||!this.currentWindow))return{offset:this.currentWindow.offset??0,limit:this.currentWindow.limit??0}}getCollectionIdForAlias(e){const n=this.compiledAliasToCollectionId[e];if(n)return n;const r=this.collectionByAlias[e];if(r)return r.id;throw new Error(`Unknown source alias "${e}"`)}isLazyAlias(e){return this.lazySources.has(e)}maybeRunGraph(e){if(!this.isGraphRunning){if(!this.currentSyncConfig||!this.currentSyncState)throw new Error("maybeRunGraph called without active sync session. This should not happen.");this.isGraphRunning=!0;try{const{begin:n,commit:r}=this.currentSyncConfig,i=this.currentSyncState;if(this.isInErrorState)return;if(i.subscribedToAllCollections){for(;i.graph.pendingWork();)i.graph.run(),e?.();i.messagesCount===0&&(n(),r(),this.updateLiveQueryStatus(this.currentSyncConfig))}}finally{this.isGraphRunning=!1}}}scheduleGraphRun(e,n){const r=n?.contextId??qc()?.id,i=n?.jobId??this,a=(()=>{if(n?.dependencies)return n.dependencies;const f=new Set(this.builderDependencies);if(n?.alias){const h=this.aliasDependencies[n.alias];if(h)for(const m of h)f.add(m)}return f.delete(this),Array.from(f)})();if(r)for(const f of a)typeof f.scheduleGraphRun=="function"&&f.scheduleGraphRun(void 0,{contextId:r});if(!this.currentSyncConfig||!this.currentSyncState)throw new Error("scheduleGraphRun called without active sync session. This should not happen.");let l=r?this.pendingGraphRuns.get(r):void 0;l||(l={loadCallbacks:new Set},r&&this.pendingGraphRuns.set(r,l)),e&&l.loadCallbacks.add(e);const c=r?void 0:l;uf.schedule({contextId:r,jobId:i,dependencies:a,run:()=>this.executeGraphRun(r,c)})}clearPendingGraphRun(e){this.pendingGraphRuns.delete(e)}hasPendingGraphRun(e){return this.pendingGraphRuns.has(e)}executeGraphRun(e,n){const r=n??(e?this.pendingGraphRuns.get(e):void 0);if(e&&this.pendingGraphRuns.delete(e),!r||!this.currentSyncConfig||!this.currentSyncState)return;this.incrementRunCount();const i=()=>{let a=!0,l;if(r.loadCallbacks.forEach(c=>{try{a=c()&&a}catch(f){a=!1,l??=f}}),l)throw l;return a};this.maybeRunGraph(i)}getSyncConfig(){return{rowUpdateMode:"full",sync:this.syncFn.bind(this)}}incrementRunCount(){this.runCount++}getRunCount(){return this.runCount}syncFn(e){this.liveQueryCollection=e.collection,this.currentSyncConfig=e;const n={messagesCount:0,subscribedToAllCollections:!1,unsubscribeCallbacks:new Set},r=this.extendPipelineWithChangeProcessing(e,n);this.currentSyncState=r,this.unsubscribeFromSchedulerClears=uf.onClear(a=>{this.clearPendingGraphRun(a)});const i=this.subscribeToAllCollections(e,r);return this.maybeRunGraphFn=()=>this.scheduleGraphRun(i),this.scheduleGraphRun(i),()=>{n.unsubscribeCallbacks.forEach(a=>a()),this.currentSyncConfig=void 0,this.currentSyncState=void 0,this.pendingGraphRuns.clear(),this.graphCache=void 0,this.inputsCache=void 0,this.pipelineCache=void 0,this.sourceWhereClausesCache=void 0,this.lazySources.clear(),this.optimizableOrderByCollections={},this.lazySourcesCallbacks={},Object.keys(this.subscriptions).forEach(a=>delete this.subscriptions[a]),this.compiledAliasToCollectionId={},this.unsubscribeFromSchedulerClears?.(),this.unsubscribeFromSchedulerClears=void 0}}compileBasePipeline(){this.graphCache=new fN,this.inputsCache=Object.fromEntries(Object.keys(this.collectionByAlias).map(r=>[r,this.graphCache.newInput()]));const e=ly(this.query,this.inputsCache,this.collections,this.subscriptions,this.lazySourcesCallbacks,this.lazySources,this.optimizableOrderByCollections,r=>{this.windowFn=r});this.pipelineCache=e.pipeline,this.sourceWhereClausesCache=e.sourceWhereClauses,this.compiledAliasToCollectionId=e.aliasToCollectionId;const n=Object.keys(this.compiledAliasToCollectionId).filter(r=>!Object.hasOwn(this.inputsCache,r));if(n.length>0)throw new pI(n)}maybeCompileBasePipeline(){return(!this.graphCache||!this.inputsCache||!this.pipelineCache)&&this.compileBasePipeline(),{graph:this.graphCache,inputs:this.inputsCache,pipeline:this.pipelineCache}}extendPipelineWithChangeProcessing(e,n){const{begin:r,commit:i}=e,{graph:a,inputs:l,pipeline:c}=this.maybeCompileBasePipeline();return c.pipe(CN(f=>{const h=f.getInner();n.messagesCount+=h.length,r(),h.reduce(jM,new Map).forEach(this.applyChanges.bind(this,e)),i()})),a.finalize(),n.graph=a,n.inputs=l,n.pipeline=c,n}applyChanges(e,n,r){const{write:i,collection:a}=e,{deletes:l,inserts:c,value:f,orderByIndex:h}=n;if(this.resultKeys.set(f,r),h!==void 0&&this.orderByIndices.set(f,h),c&&l===0)i({value:f,type:"insert"});else if(c>l||c===l&&a.has(a.getKeyFromItem(f)))i({value:f,type:"update"});else if(l>0)i({value:f,type:"delete"});else throw new Error(`Could not apply changes: ${JSON.stringify(n)}. This should never happen.`)}handleSourceStatusChange(e,n,r){const{status:i}=r;if(i==="error"){this.transitionToError(`Source collection '${n}' entered error state`);return}if(i==="cleaned-up"){this.transitionToError(`Source collection '${n}' was manually cleaned up while live query '${this.id}' depends on it. Live queries prevent automatic GC, so this was likely a manual cleanup() call.`);return}this.updateLiveQueryStatus(e)}updateLiveQueryStatus(e){const{markReady:n}=e;this.isInErrorState||this.allCollectionsReady()&&n()}transitionToError(e){this.isInErrorState=!0,console.error(`[Live Query Error] ${e}`),this.liveQueryCollection?._lifecycle.setStatus("error")}allCollectionsReady(){return Object.values(this.collections).every(e=>e.isReady())}subscribeToAllCollections(e,n){const r=Object.entries(this.compiledAliasToCollectionId);if(r.length===0)throw new Error(`Compiler returned no alias metadata for query '${this.id}'. This should not happen; please report.`);const i=r.map(([l,c])=>{const f=this.collectionByAlias[l]??this.collections[c],h=IM(f);h&&h!==this?(this.aliasDependencies[l]=[h],this.builderDependencies.add(h)):this.aliasDependencies[l]=[];const m=new CM(l,c,f,this),p=f.on("status:change",v=>{this.handleSourceStatusChange(e,c,v)});n.unsubscribeCallbacks.add(p);const _=m.subscribe();return this.subscriptions[l]=_,m.loadMoreIfNeeded.bind(m,_)}),a=()=>(i.map(l=>l()),!0);return n.subscribedToAllCollections=!0,this.updateLiveQueryStatus(e),a}}function MM(t){return typeof t.query=="function"?JD(t.query):WS(t.query)}function LM(t){return(e,n)=>{const r=t.get(e),i=t.get(n);return r&&i?r<i?-1:r>i?1:0:0}}function zM(t){const e={};function n(i){i.type==="collectionRef"?e[i.collection.id]=i.collection:i.type==="queryRef"&&r(i.query)}function r(i){if(i.from&&n(i.from),i.join&&Array.isArray(i.join))for(const a of i.join)a.from&&n(a.from)}return r(t),e}function aE(t){const e=t.from;if(e.type==="collectionRef")return e.collection;if(e.type==="queryRef")return aE(e.query);throw new Error(`Failed to extract collection. Invalid FROM clause: ${JSON.stringify(t)}`)}function PM(t){const e=new Map;function n(i){if(i)if(i.type==="collectionRef"){const{id:a}=i.collection,l=e.get(a);l?l.add(i.alias):e.set(a,new Set([i.alias]))}else i.type==="queryRef"&&r(i.query)}function r(i){if(i&&(n(i.from),i.join))for(const a of i.join)n(a.from)}return r(t),e}function jM(t,[[e,n],r]){const[i,a]=n,l=t.get(e)||{deletes:0,inserts:0,value:i,orderByIndex:a};return r<0?l.deletes+=Math.abs(r):r>0&&(l.inserts+=r,l.value=i,l.orderByIndex=a),t.set(e,l),t}function hx(t){return new DM(t).getConfig()}function Gp(t){if(typeof t=="function"){const n=hx({query:t});return dx(n)}else{const e=t,n=hx(e);return e.utils&&(n.utils={...n.utils,...e.utils}),dx(n)}}function dx(t){const e=YS(t),n=RM(t);return n&&OM(e,n),e}const Kp=1;function BM(t,e=[]){const n=t&&typeof t=="object"&&typeof t.subscribeChanges=="function"&&typeof t.startSyncImmediate=="function"&&typeof t.id=="string",r=X.useRef(null),i=X.useRef(null),a=X.useRef(null),l=X.useRef(0),c=X.useRef(null),f=!r.current||n&&a.current!==t||!n&&(i.current===null||i.current.length!==e.length||i.current.some((v,w)=>v!==e[w]));if(f)if(n)t.startSyncImmediate(),r.current=t,a.current=t;else if(typeof t=="function"){const v=new jt,w=t(v);if(w==null)r.current=null;else if(w instanceof sy)w.startSyncImmediate(),r.current=w;else if(w instanceof jt)r.current=Gp({query:t,startSync:!0,gcTime:Kp});else if(w&&typeof w=="object")r.current=Gp({startSync:!0,gcTime:Kp,...w});else throw new Error(`useLiveQuery callback must return a QueryBuilder, LiveQueryCollectionConfig, Collection, undefined, or null. Got: ${typeof w}`);i.current=[...e]}else r.current=Gp({startSync:!0,gcTime:Kp,...t}),i.current=[...e];f&&(l.current=0,c.current=null);const h=X.useRef(null);(!h.current||f)&&(h.current=v=>{if(!r.current)return()=>{};const w=r.current.subscribeChanges(()=>{l.current+=1,v()});return r.current.status==="ready"&&(l.current+=1,v()),()=>{w.unsubscribe()}});const m=X.useRef(null);(!m.current||f)&&(m.current=()=>{const v=l.current,w=r.current;return(!c.current||c.current.version!==v||c.current.collection!==w)&&(c.current={collection:w,version:v}),c.current});const p=X.useSyncExternalStore(h.current,m.current),_=X.useRef(null),y=X.useRef(null);if(!_.current||_.current.version!==p.version||_.current.collection!==p.collection){if(!p.collection)y.current={state:void 0,data:void 0,collection:void 0,status:"disabled",isLoading:!1,isReady:!0,isIdle:!1,isError:!1,isCleanedUp:!1,isEnabled:!1};else{const v=Array.from(p.collection.entries()),k=p.collection.config.singleResult;let S=null,R=null;y.current={get state(){return S||(S=new Map(v)),S},get data(){return R||(R=v.map(([,T])=>T)),k?R[0]:R},collection:p.collection,status:p.collection.status,isLoading:p.collection.status==="loading",isReady:p.collection.status==="ready",isIdle:p.collection.status==="idle",isError:p.collection.status==="error",isCleanedUp:p.collection.status==="cleaned-up",isEnabled:!0}}_.current=p}return y.current}class Qi extends er{constructor(e){super(e),this.name="QueryCollectionError"}}class UM extends Qi{constructor(){super("[QueryCollection] queryKey must be provided."),this.name="QueryKeyRequiredError"}}class $M extends Qi{constructor(){super("[QueryCollection] queryFn must be provided."),this.name="QueryFnRequiredError"}}class qM extends Qi{constructor(){super("[QueryCollection] queryClient must be provided."),this.name="QueryClientRequiredError"}}class FM extends Qi{constructor(){super("[QueryCollection] getKey must be provided."),this.name="GetKeyRequiredError"}}class VM extends Qi{constructor(){super("Collection must be in 'ready' state for manual sync operations. Sync not initialized yet."),this.name="SyncNotInitializedError"}}class HM extends Qi{constructor(e){super(`Duplicate key '${e}' found within batch operations`),this.name="DuplicateKeyInBatchError"}}class GM extends Qi{constructor(e){super(`Update operation: Item with key '${e}' does not exist`),this.name="UpdateOperationItemNotFoundError"}}class KM extends Qi{constructor(e){super(`Delete operation: Item with key '${e}' does not exist`),this.name="DeleteOperationItemNotFoundError"}}const bs=new WeakMap;function ZM(t,e){const n=Array.isArray(t)?t:[t],r=[];for(const i of n)if(i.type==="delete"){const a=Array.isArray(i.key)?i.key:[i.key];for(const l of a)r.push({type:"delete",key:l})}else{const a=Array.isArray(i.data)?i.data:[i.data];for(const l of a){let c;if(i.type==="update")c=e.getKey(l);else{const f=e.collection.validateData(l,i.type==="upsert"?"insert":i.type);c=e.getKey(f)}r.push({type:i.type,key:c,data:l})}}return r}function QM(t,e){const n=new Set;for(const r of t){if(n.has(r.key))throw new HM(r.key);if(n.add(r.key),r.type==="update"){if(!e.collection._state.syncedData.has(r.key))throw new GM(r.key)}else if(r.type==="delete"&&!e.collection._state.syncedData.has(r.key))throw new KM(r.key)}}function Qo(t,e){const n=ZM(t,e);QM(n,e),e.begin();for(const i of n)switch(i.type){case"insert":{const a=e.collection.validateData(i.data,"insert");e.write({type:"insert",value:a});break}case"update":{const l={...e.collection._state.syncedData.get(i.key),...i.data},c=e.collection.validateData(l,"update",i.key);e.write({type:"update",value:c});break}case"delete":{const a=e.collection._state.syncedData.get(i.key);e.write({type:"delete",value:a});break}case"upsert":{const a=e.collection._state.syncedData.has(i.key),l=e.collection.validateData(i.data,a?"update":"insert",i.key);a?e.write({type:"update",value:l}):e.write({type:"insert",value:l});break}}e.commit();const r=Array.from(e.collection._state.syncedData.values());e.updateCacheData?e.updateCacheData(r):e.queryClient.setQueryData(e.queryKey,r)}function JM(t){function e(){const n=t();if(!n)throw new VM;return n}return{writeInsert(n){const r={type:"insert",data:n},i=e(),a=bs.get(i);if(a?.isActive){a.operations.push(r);return}Qo(r,i)},writeUpdate(n){const r={type:"update",data:n},i=e(),a=bs.get(i);if(a?.isActive){a.operations.push(r);return}Qo(r,i)},writeDelete(n){const r={type:"delete",key:n},i=e(),a=bs.get(i);if(a?.isActive){a.operations.push(r);return}Qo(r,i)},writeUpsert(n){const r={type:"upsert",data:n},i=e(),a=bs.get(i);if(a?.isActive){a.operations.push(r);return}Qo(r,i)},writeBatch(n){const r=e();if(bs.get(r)?.isActive)throw new Error("Cannot nest writeBatch calls. Complete the current batch before starting a new one.");const a={operations:[],isActive:!0};bs.set(r,a);try{const l=n();if(l&&typeof l=="object"&&"then"in l&&typeof l.then=="function")throw new Error("writeBatch does not support async callbacks. The callback must be synchronous.");a.operations.length>0&&Qo(a.operations,r)}finally{a.isActive=!1,bs.delete(r)}}}}function YM(t){if(!t)return;const e={};return t.where&&(e.where=Wm(t.where)),t.orderBy?.length&&(e.orderBy=t.orderBy.map(n=>{const r={expression:Wm(n.expression),direction:n.compareOptions.direction,nulls:n.compareOptions.nulls,stringSort:n.compareOptions.stringSort};return n.compareOptions.stringSort==="locale"?{...r,locale:n.compareOptions.locale,localeOptions:n.compareOptions.localeOptions}:r})),t.limit!==void 0&&(e.limit=t.limit),t.offset!==void 0&&(e.offset=t.offset),Object.keys(e).length===0?void 0:JSON.stringify(e)}function Wm(t){if(!t)return null;switch(t.type){case"val":return{type:"val",value:eg(t.value)};case"ref":return{type:"ref",path:[...t.path]};case"func":return{type:"func",name:t.name,args:t.args.map(e=>Wm(e))};default:return null}}function eg(t){if(t===void 0)return{__type:"undefined"};if(typeof t=="number"){if(Number.isNaN(t))return{__type:"nan"};if(t===Number.POSITIVE_INFINITY)return{__type:"infinity",sign:1};if(t===Number.NEGATIVE_INFINITY)return{__type:"infinity",sign:-1}}return t===null||typeof t=="string"||typeof t=="number"||typeof t=="boolean"?t:t instanceof Date?{__type:"date",value:t.toJSON()}:Array.isArray(t)?t.map(e=>eg(e)):typeof t=="object"?Object.fromEntries(Object.entries(t).map(([e,n])=>[e,eg(n)])):t}class XM{constructor(e,n,r){this.state=e,this.refetchFn=n,this.refetch=n,this.writeInsert=r.writeInsert,this.writeUpdate=r.writeUpdate,this.writeDelete=r.writeDelete,this.writeUpsert=r.writeUpsert,this.writeBatch=r.writeBatch}async clearError(){this.state.lastError=void 0,this.state.errorCount=0,this.state.lastErrorUpdatedAt=0,await this.refetchFn({throwOnError:!0})}get lastError(){return this.state.lastError}get isError(){return!!this.state.lastError}get errorCount(){return this.state.errorCount}get isFetching(){return Array.from(this.state.observers.values()).some(e=>e.getCurrentResult().isFetching)}get isRefetching(){return Array.from(this.state.observers.values()).some(e=>e.getCurrentResult().isRefetching)}get isLoading(){return Array.from(this.state.observers.values()).some(e=>e.getCurrentResult().isLoading)}get dataUpdatedAt(){return Math.max(0,...Array.from(this.state.observers.values()).map(e=>e.getCurrentResult().dataUpdatedAt))}get fetchStatus(){return Array.from(this.state.observers.values()).map(e=>e.getCurrentResult().fetchStatus)}}function WM(t){const{queryKey:e,queryFn:n,select:r,queryClient:i,enabled:a,refetchInterval:l,retry:c,retryDelay:f,staleTime:h,getKey:m,onInsert:p,onUpdate:_,onDelete:y,meta:v,...w}=t,k=w.syncMode??"eager";if(!e)throw new UM;if(!n)throw new $M;if(!i)throw new qM;if(!m)throw new FM;const S={lastError:void 0,errorCount:0,lastErrorUpdatedAt:0,observers:new Map},R=new Map,T=new Map,z=new Map,L=new Map,E=new Map,M=(Q,I)=>{const N=z.get(Q)||new Set;N.add(I),z.set(Q,N);const q=T.get(I)||new Set;q.add(Q),T.set(I,q)},$=(Q,I)=>{const N=z.get(Q)||new Set;N.delete(I),z.set(Q,N);const q=T.get(I)||new Set;return q.delete(Q),T.set(I,q),N.size===0},F=Q=>{const{begin:I,write:N,commit:q,markReady:O,collection:ie}=Q;let fe=!1;const ge=ye=>{if(typeof e=="function")return e(ye);if(k==="on-demand"){const Be=YM(ye);return Be!==void 0?[...e,Be]:e}else return e},de=(ye={},Be=n)=>{const Ue=ge(ye),Ae=fi(Ue),Qe={...v,loadSubsetOptions:ye};if(S.observers.has(Ae)){E.set(Ae,(E.get(Ae)||0)+1);const Ee=S.observers.get(Ae),Ie=Ee.getCurrentResult();return Ie.isSuccess?!0:Ie.isError?Promise.reject(Ie.error):new Promise((vt,cn)=>{const Ht=Ee.subscribe(_t=>{_t.isSuccess?(Ht(),vt()):_t.isError&&(Ht(),cn(_t.error))})})}const ne={queryKey:Ue,queryFn:Be,meta:Qe,structuralSharing:!0,notifyOnChangeProps:"all",...a!==void 0&&{enabled:a},...l!==void 0&&{refetchInterval:l},...c!==void 0&&{retry:c},...f!==void 0&&{retryDelay:f},...h!==void 0&&{staleTime:h}},ue=new e2(i,ne);R.set(Ae,Ue),S.observers.set(Ae,ue),E.set(Ae,(E.get(Ae)||0)+1);const _e=new Promise((Ee,Ie)=>{const vt=ue.subscribe(cn=>{cn.isSuccess?(vt(),Ee()):cn.isError&&(vt(),Ie(cn.error))})});return(fe||ie.subscriberCount>0)&&Xe(ue,Ae),_e},Se=ye=>{const Be=fi(ye);return Ae=>{if(Ae.isSuccess){S.lastError=void 0,S.errorCount=0;const Qe=Ae.data,ne=r?r(Qe):Qe;if(!Array.isArray(ne)||ne.some(Ee=>typeof Ee!="object")){const Ee=r?`@tanstack/query-db-collection: select() must return an array of objects. Got: ${typeof ne} for queryKey ${JSON.stringify(ye)}`:`@tanstack/query-db-collection: queryFn must return an array of objects. Got: ${typeof ne} for queryKey ${JSON.stringify(ye)}`;console.error(Ee);return}const ue=new Map(ie._state.syncedData.entries()),_e=new Map;ne.forEach(Ee=>{const Ie=m(Ee);_e.set(Ie,Ee)}),I(),ue.forEach((Ee,Ie)=>{const vt=_e.get(Ie);vt?kr(Ee,vt)||N({type:"update",value:vt}):$(Ie,Be)&&N({type:"delete",value:Ee})}),_e.forEach((Ee,Ie)=>{M(Ie,Be),ue.has(Ie)||N({type:"insert",value:Ee})}),q(),O()}else Ae.isError&&(Ae.errorUpdatedAt!==S.lastErrorUpdatedAt&&(S.lastError=Ae.error,S.errorCount++,S.lastErrorUpdatedAt=Ae.errorUpdatedAt),console.error(`[QueryCollection] Error observing query ${String(ye)}:`,Ae.error),O())}},we=ye=>L.has(ye),Xe=(ye,Be)=>{if(!we(Be)){const Ue=R.get(Be),Ae=Se(Ue),Qe=ye.subscribe(Ae);L.set(Be,Qe);const ne=ye.getCurrentResult();(ne.isSuccess||ne.isError)&&Ae(ne)}},at=()=>{S.observers.forEach(Xe)},yt=()=>{L.forEach(ye=>{ye()}),L.clear()};fe=!0;const Dt=ie.on("subscribers:change",({subscriberCount:ye})=>{ye>0?at():ye===0&&yt()});if(k==="eager"){const ye=de({});ye instanceof Promise&&ye.catch(()=>{})}else O();at(),S.observers.forEach((ye,Be)=>{const Ue=R.get(Be);Se(Ue)(ye.getCurrentResult())});const Mt=ye=>{L.get(ye)?.(),L.delete(ye);const Be=T.get(ye)??new Set,Ue=[];Be.forEach(Ae=>{const Qe=z.get(Ae);Qe&&(Qe.delete(ye),Qe.size===0&&(z.delete(Ae),ie.has(Ae)&&Ue.push(ie.get(Ae))))}),Ue.length>0&&(I(),Ue.forEach(Ae=>{N({type:"delete",value:Ae})}),q()),S.observers.delete(ye),T.delete(ye),R.delete(ye),E.delete(ye)},Vt=ye=>{const Be=E.get(ye)||0,Ue=S.observers.get(ye);if(Be<=0&&(L.get(ye)?.(),L.delete(ye)),Ue?.hasListeners()??!1){E.set(ye,0);return}Be>0&&console.warn(`[cleanupQueryIfIdle] Invariant violation: refcount=${Be} but no listeners. Cleaning up to prevent leak.`,{hashedQueryKey:ye}),Mt(ye)},_n=ye=>{Mt(ye)},Xt=i.getQueryCache().subscribe(ye=>{const Be=ye.query.queryHash;ye.type==="removed"&&R.has(Be)&&Vt(Be)});return{loadSubset:k==="eager"?void 0:de,unloadSubset:k==="eager"?void 0:ye=>{const Be=ge(ye),Ue=fi(Be),Qe=(E.get(Ue)||0)-1;Qe<=0?(E.set(Ue,0),Vt(Ue)):E.set(Ue,Qe)},cleanup:async()=>{Dt(),yt();const ye=[...R.values()],Be=[...S.observers.keys()];for(const Ue of Be)_n(Ue);Xt(),await Promise.all(ye.map(async Ue=>{await i.cancelQueries({queryKey:Ue,exact:!0}),i.removeQueries({queryKey:Ue,exact:!0})}))}}},P=async Q=>{const N=[...R.values()].map(q=>S.observers.get(fi(q)).refetch({throwOnError:Q?.throwOnError}));await Promise.all(N)},Z=Q=>{const I=typeof e=="function"?e({}):e;r?i.setQueryData(I,N=>{if(!N||typeof N!="object")return N;if(Array.isArray(N))return Q;const q=r(N);if(Array.isArray(q)){for(const O of Object.keys(N))if(N[O]===q)return{...N,[O]:Q}}if(Array.isArray(N.data))return{...N,data:Q};if(Array.isArray(N.items))return{...N,items:Q};if(Array.isArray(N.results))return{...N,results:Q};for(const O of Object.keys(N))if(Array.isArray(N[O]))return{...N,[O]:Q};return N}):i.setQueryData(I,Q)};let se=null;const me=Q=>{const{begin:I,write:N,commit:q,collection:O}=Q,ie=typeof e=="function"?e({}):e;return se={collection:O,queryClient:i,queryKey:ie,getKey:m,begin:I,write:N,commit:q,updateCacheData:Z},F(Q)},V=JM(()=>se),G=p?async Q=>{const I=await p(Q)??{};return I.refetch!==!1&&await P(),I}:void 0,B=_?async Q=>{const I=await _(Q)??{};return I.refetch!==!1&&await P(),I}:void 0,K=y?async Q=>{const I=await y(Q)??{};return I.refetch!==!1&&await P(),I}:void 0,re=new XM(S,P,V);return{...w,getKey:m,syncMode:k,sync:{sync:me},onInsert:G,onUpdate:B,onDelete:K,utils:re}}async function eL(t){return new Promise((e,n)=>{const r=new FileReader;r.onloadend=()=>{const a=r.result.split(",")[1]||"";e(a)},r.onerror=n,r.readAsDataURL(t)})}function tL(t,e){const n=atob(t),r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return new Blob([r],{type:e})}async function px(t){let e=t.body;t.body.type==="form-data"?e={...t.body,data:t.body.data.map(r=>({...r,file:null}))}:t.body.type==="binary"&&(e={...t.body,file:null});let n=null;if(t.httpResponse){const r=t.httpResponse.body instanceof Blob?await eL(t.httpResponse.body):"",i=t.httpResponse.body instanceof Blob?t.httpResponse.body.type:"application/octet-stream";n={status:t.httpResponse.status,statusCode:t.httpResponse.statusCode,headers:t.httpResponse.headers,content:r,contentType:i,duration:t.httpResponse.duration,error:t.httpResponse.error}}return{id:t.id,name:t.name,protocol:t.protocol,method:t.method,url:t.url,query:t.query,headers:t.headers,body:e,variables:t.variables,creationTime:t.creationTime,executionTime:t.executionTime,httpRequest:t.httpRequest,httpResponse:n,executing:!1}}function nL(t){let e=null;if(t.httpResponse){const n=t.httpResponse.content?tL(t.httpResponse.content,t.httpResponse.contentType):new Blob([]);e={status:t.httpResponse.status,statusCode:t.httpResponse.statusCode,headers:t.httpResponse.headers,body:n,duration:t.httpResponse.duration,error:t.httpResponse.error}}return{id:t.id,name:t.name,protocol:t.protocol??"rest",method:t.method,url:t.url,query:t.query,headers:t.headers,body:t.body,variables:t.variables??[],creationTime:t.creationTime,executionTime:t.executionTime,httpRequest:t.httpRequest,httpResponse:e,executing:!1}}const hf="requests";async function rL(){const t=await fetch(`/data/${hf}`);if(!t.ok)throw new Error(`Failed to list entries: ${t.statusText}`);const e=await t.json();return(await Promise.all(e.map(async r=>{const i=await fetch(`/data/${hf}/${encodeURIComponent(r.id)}`);return i.ok?await i.json():null}))).filter(r=>r!==null)}async function mx(t){const e=await fetch(`/data/${hf}/${encodeURIComponent(t.id)}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!e.ok)throw new Error(`Failed to save request: ${e.statusText}`)}async function iL(t){const e=await fetch(`/data/${hf}/${encodeURIComponent(t)}`,{method:"DELETE"});if(!e.ok&&e.status!==404)throw new Error(`Failed to delete request: ${e.statusText}`)}const oE=new l2({defaultOptions:{queries:{staleTime:1/0,refetchOnWindowFocus:!1}}}),Mr=YS(WM({queryKey:["requests"],queryFn:async()=>(await rL()).map(nL),getKey:t=>t.id,queryClient:oE,onInsert:async({transaction:t})=>{await Promise.all(t.mutations.map(async e=>{const n=e.modified,r=await px(n);await mx(r)}))},onUpdate:async({transaction:t})=>{await Promise.all(t.mutations.map(async e=>{const n=e.modified,r=await px(n);await mx(r)}))},onDelete:async({transaction:t})=>{await Promise.all(t.mutations.map(async e=>{const n=e.original;await iL(n.id)}))}}));async function sL(){Array.from(Mr.state.keys()).forEach(e=>Mr.delete(e))}function df(t,e,n={}){const{missingDataPlaceholder:r=""}=n;let i=t;const a=/\{\{(\w+):([^}]+)\}\}/g;let l;for(;(l=a.exec(t))!==null;){const[c,f,h]=l,m=e.find(_=>_.type===f&&_.id===h);let p="";switch(f){case"file_base64":case"base64":p=m?.data||r;break;case"file_dataurl":m?.data&&m?.mimeType?p=`data:${m.mimeType};base64,${m.data}`:m?.data?p=`data:application/octet-stream;base64,${m.data}`:p=r;break;case"timestamp":p=String(Date.now());break;case"uuid":typeof crypto<"u"&&crypto.randomUUID?p=crypto.randomUUID():p="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,_=>{const y=Math.random()*16|0;return(_==="x"?y:y&3|8).toString(16)});break;case"random_string":p=Math.random().toString(36).substring(2,18);break;default:p=c}i=i.replace(c,p)}return i}function Es(){return Math.random().toString(36).substring(2,9)}function gx(){return{id:Es(),enabled:!0,key:"",value:""}}function tg(t){return{id:Es(),name:"New Request",protocol:"rest",method:"GET",url:"",headers:[gx()],query:[gx()],body:{type:"none"},variables:[],creationTime:Date.now(),executionTime:null,httpRequest:null,httpResponse:null,executing:!1}}const lE=X.createContext(null),aL={request:tg(),sidebarCollapsed:!1,aiPanelOpen:!1};function oL({children:t}){const[e,n]=X.useState(aL),{data:r=[]}=BM(E=>E.from({req:Mr}).orderBy(({req:M})=>M.executionTime??M.creationTime,"desc")),i=X.useCallback(E=>{n(M=>({...M,request:{...M.request,...E}}))},[]),a=X.useCallback(E=>{i({protocol:E})},[i]),l=X.useCallback(E=>{i({method:E})},[i]),c=X.useCallback(E=>{i({url:E})},[i]),f=X.useCallback(E=>{i({headers:E})},[i]),h=X.useCallback(E=>{i({query:E})},[i]),m=X.useCallback(E=>{i({body:E})},[i]),p=X.useCallback(E=>{i({variables:E})},[i]),_=X.useCallback(E=>{n(M=>{const F={...M.request.httpRequest?.options??{insecure:!1,redirect:!0},...E};return{...M,request:{...M.request,httpRequest:M.request.httpRequest?{...M.request.httpRequest,options:F}:null}}})},[]),y=X.useCallback(()=>{i({httpResponse:null})},[i]),v=X.useCallback(async()=>{const E=e.request;i({executing:!0});try{const M={};if(E.headers.filter(de=>de.enabled&&de.key).forEach(de=>{M[de.key]=de.value}),E.protocol==="grpc"){const de=E.url,Se=de.match(/^grpc:\/\/([^/]+)\/(.+)\/([^/]+)$/);if(!Se)throw new Error("Invalid gRPC URL format. Expected: grpc://host:port/service/method");const[,we,Xe,at]=Se;let yt="",Dt="";E.body.type==="json"?(yt=df(E.body.content,E.variables),Dt=E.body.content):(yt="{}",Dt="{}"),M["Content-Type"]||(M["Content-Type"]="application/json");const Mt=`/proxy/grpc/${we}/${Xe}/${at}`,Vt={method:"POST",url:de,headers:M,query:{},body:Dt,options:{insecure:!1,redirect:!1}},_n=performance.now(),Xt=await fetch(Mt,{method:"POST",headers:M,body:yt}),Cn=Math.round(performance.now()-_n),$n=await Xt.blob(),Tn={};Xt.headers.forEach((Qe,ne)=>{Tn[ne]=Qe});const ye={status:Xt.statusText||String(Xt.status),statusCode:Xt.status,headers:Tn,body:$n,duration:Cn},Be=Date.now(),Ue={...E,executionTime:Be,httpRequest:Vt,httpResponse:ye,executing:!1};r.find(Qe=>Qe.id===E.id)?Mr.update(E.id,Qe=>{Object.assign(Qe,Ue)}):Mr.insert(Ue),n(Qe=>({...Qe,request:Ue}));return}const $=new URLSearchParams;E.query.filter(de=>de.enabled&&de.key).forEach(de=>{$.append(de.key,de.value)});let F,P="",Z=!1;switch(E.body.type){case"json":{F=df(E.body.content,E.variables),P=E.body.content,M["Content-Type"]||(M["Content-Type"]="application/json");break}case"form-urlencoded":{const de=new URLSearchParams;E.body.data.filter(Se=>Se.enabled&&Se.key).forEach(Se=>{de.append(Se.key,Se.value)}),F=de.toString(),P=de.toString(),M["Content-Type"]||(M["Content-Type"]="application/x-www-form-urlencoded");break}case"form-data":{const de=new FormData,Se=[];E.body.data.filter(we=>we.enabled&&we.key).forEach(we=>{we.type==="file"&&we.file?(de.append(we.key,we.file,we.fileName),Se.push(`${we.key}: [File: ${we.fileName}]`)):we.type==="text"&&(de.append(we.key,we.value),Se.push(`${we.key}: ${we.value}`))}),F=de,P=Se.join(`
`),Z=!0;break}case"binary":{E.body.file&&(F=E.body.file,P=`[Binary file: ${E.body.fileName}]`,M["Content-Type"]||(M["Content-Type"]=E.body.file.type||"application/octet-stream"));break}case"raw":F=E.body.content,P=E.body.content,M["Content-Type"]||(M["Content-Type"]="text/plain");break}const se=E.httpRequest?.options??{insecure:!1,redirect:!0};se.insecure&&(M["X-Prism-Insecure"]="true"),se.redirect&&(M["X-Prism-Redirect"]="true");const me=new URL(E.url);let V="/proxy/"+me.protocol.slice(0,-1)+"/"+me.host+me.pathname;const G=$.toString();G&&(V+="?"+G);const B={method:E.method,url:E.url,headers:M,query:Object.fromEntries($),body:P,options:se},K={...M};Z&&delete K["Content-Type"];const re=performance.now(),Q=await fetch(V,{method:E.method,headers:K,body:F&&E.method!=="GET"&&E.method!=="HEAD"?F:void 0}),I=Math.round(performance.now()-re),N=await Q.blob(),q={};Q.headers.forEach((de,Se)=>{q[Se]=de});const O={status:Q.statusText||String(Q.status),statusCode:Q.status,headers:q,body:N,duration:I},ie=Date.now(),fe={...E,executionTime:ie,httpRequest:B,httpResponse:O,executing:!1};r.find(de=>de.id===E.id)?Mr.update(E.id,de=>{Object.assign(de,fe)}):Mr.insert(fe),n(de=>({...de,request:fe}))}catch(M){const $=Date.now(),F=M instanceof Error?M.message:"Unknown error",P={status:"",statusCode:0,headers:{},body:new Blob,duration:0,error:F},Z={...E,executionTime:$,httpResponse:P,executing:!1};r.find(me=>me.id===E.id)?Mr.update(E.id,me=>{Object.assign(me,Z)}):Mr.insert(Z),n(me=>({...me,request:Z}))}},[e.request,i,r]),w=X.useCallback(E=>{const M=tg();M.id=E.id,M.name=E.name,M.protocol=E.protocol??"rest",M.method=E.method,M.url=E.url,M.headers=E.headers.map($=>({...$,id:Es()})),M.query=E.query.map($=>({...$,id:Es()})),M.variables=(E.variables??[]).map($=>({...$,id:Es()})),E.body.type==="form-urlencoded"?M.body={type:"form-urlencoded",data:E.body.data.map($=>({...$,id:Es()}))}:E.body.type==="form-data"?M.body={type:"form-data",data:E.body.data.map($=>({...$,id:Es(),file:null}))}:E.body.type==="binary"?M.body={type:"binary",file:null,fileName:E.body.fileName}:M.body=E.body,E.httpRequest&&(M.httpRequest={...E.httpRequest}),E.httpResponse&&(M.httpResponse=E.httpResponse),n($=>({...$,request:M}))},[]),k=X.useCallback(async()=>{await sL()},[]),S=X.useCallback(async E=>{Mr.delete(E)},[]),R=X.useCallback(()=>{n(E=>({...E,sidebarCollapsed:!E.sidebarCollapsed}))},[]),T=X.useCallback(()=>{n(E=>({...E,aiPanelOpen:!E.aiPanelOpen}))},[]),z=X.useCallback(()=>{n(E=>({...E,request:tg()}))},[]),L={request:e.request,history:r,sidebarCollapsed:e.sidebarCollapsed,aiPanelOpen:e.aiPanelOpen,setProtocol:a,setMethod:l,setUrl:c,setHeaders:f,setQuery:h,setBody:m,setVariables:p,setOptions:_,executeRequest:v,clearResponse:y,newRequest:z,loadFromHistory:w,clearHistory:k,deleteHistoryEntry:S,toggleSidebar:R,toggleAiPanel:T};return C.jsx(lE.Provider,{value:L,children:t})}function Ji(){const t=X.useContext(lE);if(!t)throw new Error("useClient must be used within a ClientProvider");return t}const lL=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),uL=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),yx=t=>{const e=uL(t);return e.charAt(0).toUpperCase()+e.slice(1)},uE=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),cL=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var fL={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const hL=X.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:a,iconNode:l,...c},f)=>X.createElement("svg",{ref:f,...fL,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:uE("lucide",i),...!a&&!cL(c)&&{"aria-hidden":"true"},...c},[...l.map(([h,m])=>X.createElement(h,m)),...Array.isArray(a)?a:[a]]));const pt=(t,e)=>{const n=X.forwardRef(({className:r,...i},a)=>X.createElement(hL,{ref:a,iconNode:e,className:uE(`lucide-${lL(yx(t))}`,`lucide-${t}`,r),...i}));return n.displayName=yx(t),n};const dL=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],cE=pt("check",dL);const pL=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],cy=pt("chevron-down",pL);const mL=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],gL=pt("chevron-right",mL);const yL=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],_L=pt("circle-alert",yL);const bL=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],fE=pt("circle-check",bL);const vL=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],hE=pt("circle",vL);const wL=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],dE=pt("clock",wL);const xL=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],pE=pt("eye",xL);const SL=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],EL=pt("file-text",SL);const kL=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}]],pf=pt("file",kL);const CL=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],TL=pt("globe",CL);const AL=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],mE=pt("hash",AL);const RL=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],ng=pt("loader-circle",RL);const OL=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}],["path",{d:"m8 9 3 3-3 3",key:"12hl5m"}]],IL=pt("panel-right-close",OL);const NL=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}],["path",{d:"m10 15-3-3 3-3",key:"1pgupc"}]],DL=pt("panel-right-open",NL);const ML=[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]],_x=pt("paperclip",ML);const LL=[["path",{d:"M3.714 3.048a.498.498 0 0 0-.683.627l2.843 7.627a2 2 0 0 1 0 1.396l-2.842 7.627a.498.498 0 0 0 .682.627l18-8.5a.5.5 0 0 0 0-.904z",key:"117uat"}],["path",{d:"M6 12h16",key:"s4cdu5"}]],zL=pt("send-horizontal",LL);const PL=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],jL=pt("send",PL);const BL=[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]],UL=pt("server",BL);const $L=[["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 18h1.973a4 4 0 0 0 3.3-1.7l5.454-8.6a4 4 0 0 1 3.3-1.7H22",key:"1ailkh"}],["path",{d:"M2 6h1.972a4 4 0 0 1 3.6 2.2",key:"km57vx"}],["path",{d:"M22 18h-6.041a4 4 0 0 1-3.3-1.8l-.359-.45",key:"os18l9"}]],gE=pt("shuffle",$L);const qL=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Ml=pt("sparkles",qL);const FL=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],VL=pt("square",FL);const HL=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Zf=pt("trash-2",HL);const GL=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],KL=pt("upload",GL);const ZL=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],fy=pt("x",ZL),QL={GET:"text-green-600 dark:text-green-400",POST:"text-yellow-600 dark:text-yellow-400",PUT:"text-blue-600 dark:text-blue-400",PATCH:"text-purple-600 dark:text-purple-400",DELETE:"text-red-600 dark:text-red-400",OPTIONS:"text-neutral-500 dark:text-neutral-400",HEAD:"text-neutral-500 dark:text-neutral-400"};function JL(t){const e=new Date(t),n=new Date;return e.toDateString()===n.toDateString()?e.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):e.toLocaleDateString([],{month:"short",day:"numeric"})}function YL(t){return t?t>=200&&t<300?"bg-green-500":t>=300&&t<400?"bg-yellow-500":t>=400&&t<500?"bg-orange-500":"bg-red-500":"bg-neutral-500"}function XL(t){try{return new URL(t.url).hostname}catch{return"Other"}}function WL(t){try{const e=new URL(t.url);return e.pathname+e.search}catch{return t.url}}function ez(t){return t.protocol==="grpc"?"gRPC":t.method}function tz(t){return t.protocol==="grpc"?"text-cyan-600 dark:text-cyan-400":QL[t.method]}function nz(t){const e=new Map;for(const n of t){const r=XL(n),i=e.get(r)||[];i.push(n),e.set(r,i)}return Array.from(e.entries()).map(([n,r])=>({hostname:n,entries:r,latestTimestamp:Math.max(...r.map(i=>i.executionTime??0))})).sort((n,r)=>r.latestTimestamp-n.latestTimestamp)}function rz(){const t=dt.c(20),{history:e,sidebarCollapsed:n,loadFromHistory:r,deleteHistoryEntry:i,clearHistory:a,toggleSidebar:l}=Ji();let c;t[0]!==e?(c=nz(e),t[0]=e,t[1]=c):c=t[1];const f=c;if(e.length===0||n)return null;let h;t[2]===Symbol.for("react.memo_cache_sentinel")?(h=C.jsx("h1",{className:"text-sm font-semibold text-neutral-700 dark:text-neutral-200 pl-0.5",children:"Prism"}),t[2]=h):h=t[2];let m;t[3]!==a||t[4]!==e.length?(m=e.length>0&&C.jsx("button",{onClick:a,className:"p-1.5 rounded-lg hover:bg-neutral-100 dark:hover:bg-white/5 transition-colors",title:"Clear history",children:C.jsx(Zf,{className:"w-4 h-4 text-neutral-500 dark:text-neutral-400"})}),t[3]=a,t[4]=e.length,t[5]=m):m=t[5];let p;t[6]===Symbol.for("react.memo_cache_sentinel")?(p=C.jsx(DL,{className:"w-4 h-4 text-neutral-500 dark:text-neutral-400"}),t[6]=p):p=t[6];let _;t[7]!==l?(_=C.jsx("button",{onClick:l,className:"p-1.5 rounded-lg hover:bg-neutral-100 dark:hover:bg-white/5 transition-colors",title:"Hide sidebar",children:p}),t[7]=l,t[8]=_):_=t[8];let y;t[9]!==m||t[10]!==_?(y=C.jsxs("div",{className:"px-3 py-2.5 flex items-center justify-between gap-2",children:[h,C.jsxs("div",{className:"flex items-center gap-1",children:[m,_]})]}),t[9]=m,t[10]=_,t[11]=y):y=t[11];let v;t[12]!==i||t[13]!==f||t[14]!==e.length||t[15]!==r?(v=C.jsx("div",{className:"flex-1 overflow-y-auto px-2",children:e.length===0?C.jsx("div",{className:"px-2 py-8 text-center text-neutral-400 dark:text-neutral-600 text-xs",children:"No history yet"}):C.jsx("div",{className:"space-y-3 pb-2",children:f.map(k=>C.jsxs("div",{children:[C.jsx("div",{className:"px-2 py-1 text-[10px] font-medium text-neutral-400 dark:text-neutral-500 uppercase tracking-wider truncate",title:k.hostname,children:k.hostname}),C.jsx("div",{className:"space-y-0.5",children:k.entries.map(S=>C.jsxs("div",{className:"group flex items-center gap-2 px-3 py-1.5 rounded-lg hover:bg-neutral-100 dark:hover:bg-white/5 cursor-pointer transition-colors",onClick:()=>r(S),children:[C.jsx("span",{className:`w-1.5 h-1.5 rounded-full shrink-0 ${YL(S.httpResponse?.statusCode??null)}`}),C.jsx("span",{className:`text-[10px] font-semibold shrink-0 ${tz(S)}`,children:ez(S)}),C.jsx("span",{className:"text-xs text-neutral-500 dark:text-neutral-400 truncate flex-1",title:S.url,children:WL(S)}),C.jsxs("div",{className:"flex items-center justify-end text-[10px] text-neutral-400 dark:text-neutral-600 shrink-0 w-12 h-5",children:[C.jsx("span",{className:"group-hover:hidden",children:JL(S.executionTime??S.creationTime)}),C.jsx("button",{onClick:R=>{R.stopPropagation(),i(S.id)},className:"hidden group-hover:inline-flex items-center justify-center w-5 h-5 hover:bg-neutral-200 dark:hover:bg-white/8 rounded transition-colors",title:"Delete",children:C.jsx("svg",{className:"w-3 h-3 text-neutral-400 dark:text-neutral-500 hover:text-rose-500 dark:hover:text-rose-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]},S.id))})]},k.hostname))})}),t[12]=i,t[13]=f,t[14]=e.length,t[15]=r,t[16]=v):v=t[16];let w;return t[17]!==y||t[18]!==v?(w=C.jsxs("aside",{className:"w-64 bg-white dark:bg-[#1a1a1a]/60 dark:backdrop-blur-xl border border-neutral-200 dark:border-white/8 rounded-xl flex flex-col overflow-hidden dark:shadow-2xl",children:[y,v]}),t[17]=y,t[18]=v,t[19]=w):w=t[19],w}const iz=["GET","POST","PUT","PATCH","DELETE","OPTIONS","HEAD"],sz={GET:"text-emerald-600 dark:text-emerald-400",POST:"text-amber-600 dark:text-amber-400",PUT:"text-blue-600 dark:text-blue-400",PATCH:"text-purple-600 dark:text-purple-400",DELETE:"text-rose-600 dark:text-rose-400",OPTIONS:"text-neutral-500 dark:text-neutral-400",HEAD:"text-neutral-500 dark:text-neutral-400"},Zp=[{value:"rest",label:"REST",icon:TL},{value:"grpc",label:"gRPC",icon:UL}];function az(){const t=dt.c(27),{request:e,setMethod:n,setProtocol:r}=Ji(),i=e?.method??"GET",a=e?.protocol??"rest",[l,c]=X.useState(!1),f=X.useRef(null);let h;t[0]!==a?(h=Zp.find(E=>E.value===a)??Zp[0],t[0]=a,t[1]=h):h=t[1];const m=h,p=m.icon;let _,y;t[2]===Symbol.for("react.memo_cache_sentinel")?(_=()=>{const E=M=>{f.current&&!f.current.contains(M.target)&&c(!1)};return document.addEventListener("mousedown",E),()=>document.removeEventListener("mousedown",E)},y=[],t[2]=_,t[3]=y):(_=t[2],y=t[3]),X.useEffect(_,y);let v;t[4]!==l?(v=()=>c(!l),t[4]=l,t[5]=v):v=t[5];let w;t[6]!==p?(w=C.jsx(p,{className:"w-4 h-4"}),t[6]=p,t[7]=w):w=t[7];let k;t[8]===Symbol.for("react.memo_cache_sentinel")?(k=C.jsx(cy,{className:"w-3 h-3"}),t[8]=k):k=t[8];let S;t[9]!==m.label||t[10]!==v||t[11]!==w?(S=C.jsxs("button",{type:"button",onClick:v,className:"flex items-center gap-0.5 p-1.5 rounded-md hover:bg-neutral-100 dark:hover:bg-white/10 transition-colors text-neutral-600 dark:text-neutral-400",title:m.label,children:[w,k]}),t[9]=m.label,t[10]=v,t[11]=w,t[12]=S):S=t[12];let R;t[13]!==l||t[14]!==a||t[15]!==r?(R=l&&C.jsx("div",{className:"absolute top-full left-0 mt-1 bg-white dark:bg-[#1a1a1a] border border-neutral-200 dark:border-white/10 rounded-md shadow-lg z-50 min-w-25",children:Zp.map(E=>{const M=E.icon;return C.jsxs("button",{type:"button",onClick:()=>{r(E.value),c(!1)},className:`w-full flex items-center gap-2 px-3 py-1.5 text-sm transition-colors ${a===E.value?"bg-neutral-100 dark:bg-white/10 text-neutral-900 dark:text-neutral-100":"text-neutral-600 dark:text-neutral-400 hover:bg-neutral-50 dark:hover:bg-white/5"}`,children:[C.jsx(M,{className:"w-4 h-4"}),E.label]},E.value)})}),t[13]=l,t[14]=a,t[15]=r,t[16]=R):R=t[16];let T;t[17]!==S||t[18]!==R?(T=C.jsxs("div",{ref:f,className:"relative",children:[S,R]}),t[17]=S,t[18]=R,t[19]=T):T=t[19];let z;t[20]!==i||t[21]!==a||t[22]!==n?(z=a==="rest"&&C.jsx("select",{value:i,onChange:E=>n(E.target.value),className:`px-2 py-1 bg-transparent font-semibold text-xs focus:outline-none cursor-pointer ${sz[i]}`,children:iz.map(oz)}),t[20]=i,t[21]=a,t[22]=n,t[23]=z):z=t[23];let L;return t[24]!==T||t[25]!==z?(L=C.jsxs("div",{className:"flex items-center gap-1",children:[T,z]}),t[24]=T,t[25]=z,t[26]=L):L=t[26],L}function oz(t){return C.jsx("option",{value:t,className:"bg-white dark:bg-[#1a1a1a]",children:t},t)}let al={};async function lz(){try{const t=await fetch("/config.json");if(t.ok){const e=await t.json();al={...al,...e}}else console.warn("Failed to load config.json, using defaults");return al}catch(t){return console.warn("Error loading config:",t),al}}function hy(){return al}function uz(t){const e=dt.c(20),{value:n,onChange:r,placeholder:i,minWidth:a}=t,l=a===void 0?60:a,c=X.useRef(null),[f,h]=X.useState(l);let m;e[0]!==l?(m=()=>{if(c.current){const T=c.current.offsetWidth;h(Math.max(l,T+24))}},e[0]=l,e[1]=m):m=e[1];let p;e[2]!==l||e[3]!==i||e[4]!==n?(p=[n,i,l],e[2]=l,e[3]=i,e[4]=n,e[5]=p):p=e[5],X.useEffect(m,p);const _=n||i;let y;e[6]!==_?(y=C.jsx("span",{ref:c,className:"absolute invisible whitespace-pre text-sm","aria-hidden":"true",children:_}),e[6]=_,e[7]=y):y=e[7];let v;e[8]!==r?(v=T=>r(T.target.value),e[8]=r,e[9]=v):v=e[9];const w=`${f}px`;let k;e[10]!==w?(k={width:w},e[10]=w,e[11]=k):k=e[11];let S;e[12]!==i||e[13]!==v||e[14]!==k||e[15]!==n?(S=C.jsx("input",{type:"text",value:n,onChange:v,placeholder:i,style:k,className:"px-2 py-1.5 bg-transparent text-neutral-800 dark:text-neutral-100 text-sm placeholder-neutral-400 dark:placeholder-neutral-600 focus:outline-none"}),e[12]=i,e[13]=v,e[14]=k,e[15]=n,e[16]=S):S=e[16];let R;return e[17]!==y||e[18]!==S?(R=C.jsxs("div",{className:"relative",children:[y,S]}),e[17]=y,e[18]=S,e[19]=R):R=e[19],R}function bx({value:t,onChange:e,placeholder:n,fetchOptions:r,disabled:i,minWidth:a=60}){const[l,c]=X.useState(!1),[f,h]=X.useState([]),[m,p]=X.useState(!1),[_,y]=X.useState(null),v=X.useRef(null),w=X.useRef(null),k=X.useRef(null),[S,R]=X.useState(a);X.useEffect(()=>{if(k.current){const E=k.current.offsetWidth;R(Math.max(a,E+40))}},[t,n,a]);const T=t||n;X.useEffect(()=>{const E=M=>{v.current&&!v.current.contains(M.target)&&c(!1)};return document.addEventListener("mousedown",E),()=>document.removeEventListener("mousedown",E)},[]);const z=async()=>{if(!i){c(!0),p(!0),y(null);try{const E=await r();h(E)}catch(E){y(E instanceof Error?E.message:"Failed to fetch"),h([])}finally{p(!1)}}},L=f.filter(E=>E.toLowerCase().includes(t.toLowerCase()));return C.jsxs("div",{ref:v,className:"relative",style:{width:`${S}px`},children:[C.jsx("span",{ref:k,className:"absolute invisible whitespace-pre text-sm","aria-hidden":"true",children:T}),C.jsxs("div",{className:"flex items-center",children:[C.jsx("input",{ref:w,type:"text",value:t,onChange:E=>e(E.target.value),onFocus:z,placeholder:n,disabled:i,className:"flex-1 min-w-0 px-2 py-1.5 bg-transparent text-neutral-800 dark:text-neutral-100 text-sm placeholder-neutral-400 dark:placeholder-neutral-600 focus:outline-none disabled:opacity-50"}),C.jsx("button",{type:"button",onClick:z,disabled:i,className:"p-1 text-neutral-400 hover:text-neutral-600 dark:hover:text-neutral-300 disabled:opacity-50",children:m?C.jsx(ng,{className:"w-3 h-3 animate-spin"}):C.jsx(cy,{className:"w-3 h-3"})})]}),l&&C.jsxs("div",{className:"absolute top-full left-0 mt-1 bg-white dark:bg-[#1a1a1a] border border-neutral-200 dark:border-white/10 rounded-md shadow-lg z-50 max-h-48 overflow-y-auto min-w-full",children:[m&&C.jsx("div",{className:"px-3 py-2 text-xs text-neutral-500",children:"Loading..."}),_&&C.jsx("div",{className:"px-3 py-2 text-xs text-red-500",children:_}),!m&&!_&&L.length===0&&C.jsx("div",{className:"px-3 py-2 text-xs text-neutral-500",children:f.length===0?"No options available":"No matches"}),!m&&!_&&L.map(E=>C.jsx("button",{type:"button",onClick:()=>{e(E),c(!1)},className:"w-full px-3 py-1.5 text-left text-sm text-neutral-800 dark:text-neutral-200 hover:bg-neutral-100 dark:hover:bg-white/10 transition-colors whitespace-nowrap",children:E},E))]})]})}function cz(){const t=dt.c(53),{request:e,setUrl:n,executeRequest:r,sidebarCollapsed:i,toggleSidebar:a,history:l,aiPanelOpen:c,toggleAiPanel:f}=Ji();let h;t[0]===Symbol.for("react.memo_cache_sentinel")?(h=hy().ai?.model,t[0]=h):h=t[0];const m=!!h;let p;t[1]!==r?(p=fe=>{fe.preventDefault(),r()},t[1]=r,t[2]=p):p=t[2];const _=p,y=e?.protocol??"rest",v=e?.url??"",w=e?.executing??!1,k=pz,S=dz;let R;t[3]!==v?(R=k(v),t[3]=v,t[4]=R):R=t[4];const{host:T,service:z,method:L}=R;let E;t[5]!==L||t[6]!==z||t[7]!==n?(E=fe=>n(S(fe,z,L)),t[5]=L,t[6]=z,t[7]=n,t[8]=E):E=t[8];const M=E;let $;t[9]!==T||t[10]!==L||t[11]!==n?($=fe=>n(S(T,fe,L)),t[9]=T,t[10]=L,t[11]=n,t[12]=$):$=t[12];const F=$;let P;t[13]!==T||t[14]!==z||t[15]!==n?(P=fe=>n(S(T,z,fe)),t[13]=T,t[14]=z,t[15]=n,t[16]=P):P=t[16];const Z=P,se=y==="rest"?v.length>0:T.length>0&&z.length>0&&L.length>0;let me;t[17]!==T?(me=async()=>{if(!T)return[];const fe=await fetch(`/proxy/grpc/${T}`);if(!fe.ok)throw new Error("Failed to fetch services");return(await fe.json()).services.map(hz)},t[17]=T,t[18]=me):me=t[18];const V=me;let G;t[19]!==T||t[20]!==z?(G=async()=>{if(!T||!z)return[];const fe=await fetch(`/proxy/grpc/${T}`);if(!fe.ok)throw new Error("Failed to fetch methods");return(await fe.json()).services.find(Se=>Se.name===z)?.methods.map(fz)??[]},t[19]=T,t[20]=z,t[21]=G):G=t[21];const B=G;let K;t[22]!==l||t[23]!==i||t[24]!==a?(K=i&&l.length>0&&C.jsx("button",{type:"button",onClick:a,className:"p-1.5 hover:bg-neutral-100 dark:hover:bg-white/10 rounded-md transition-colors text-neutral-500 dark:text-neutral-400 hover:text-neutral-700 dark:hover:text-neutral-200",title:"Show sidebar",children:C.jsx(IL,{className:"w-4 h-4"})}),t[22]=l,t[23]=i,t[24]=a,t[25]=K):K=t[25];let re;t[26]===Symbol.for("react.memo_cache_sentinel")?(re=C.jsx(az,{}),t[26]=re):re=t[26];let Q;t[27]!==B||t[28]!==V||t[29]!==T||t[30]!==L||t[31]!==z||t[32]!==y||t[33]!==M||t[34]!==Z||t[35]!==F||t[36]!==n||t[37]!==v?(Q=y==="rest"?C.jsx("input",{type:"text",value:v,onChange:fe=>n(fe.target.value),placeholder:"Enter request URL",className:"flex-1 px-3 py-1.5 bg-transparent text-neutral-800 dark:text-neutral-100 text-sm placeholder-neutral-400 dark:placeholder-neutral-600 focus:outline-none"}):C.jsxs("div",{className:"flex-1 flex items-center gap-0 min-w-0",children:[C.jsx(uz,{value:T,onChange:M,placeholder:"host:port",minWidth:160}),C.jsx("span",{className:"text-neutral-300 dark:text-neutral-600 px-1",children:"/"}),C.jsx(bx,{value:z,onChange:F,placeholder:"service",fetchOptions:V,disabled:!T,minWidth:60}),C.jsx("span",{className:"text-neutral-300 dark:text-neutral-600 px-1",children:"/"}),C.jsx(bx,{value:L,onChange:Z,placeholder:"method",fetchOptions:B,disabled:!T||!z,minWidth:60})]}),t[27]=B,t[28]=V,t[29]=T,t[30]=L,t[31]=z,t[32]=y,t[33]=M,t[34]=Z,t[35]=F,t[36]=n,t[37]=v,t[38]=Q):Q=t[38];const I=w||!se;let N;t[39]!==w?(N=w?C.jsxs("svg",{className:"w-4 h-4 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[C.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"3"}),C.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):C.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14 5l7 7m0 0l-7 7m7-7H3"})}),t[39]=w,t[40]=N):N=t[40];let q;t[41]!==I||t[42]!==N?(q=C.jsx("button",{type:"submit",disabled:I,className:"p-1.5 hover:bg-neutral-100 dark:hover:bg-white/10 disabled:opacity-30 disabled:cursor-not-allowed rounded-md transition-colors text-neutral-500 dark:text-neutral-400 hover:text-neutral-700 dark:hover:text-neutral-200",title:"Send request",children:N}),t[41]=I,t[42]=N,t[43]=q):q=t[43];let O;t[44]!==c||t[45]!==f?(O=m&&C.jsx("button",{type:"button",onClick:f,className:`p-1.5 hover:bg-neutral-100 dark:hover:bg-white/10 rounded-md transition-colors ${c?"text-amber-500 hover:text-amber-600":"text-neutral-500 dark:text-neutral-400 hover:text-neutral-700 dark:hover:text-neutral-200"}`,title:"AI Assistant",children:C.jsx(Ml,{className:"w-4 h-4"})}),t[44]=c,t[45]=f,t[46]=O):O=t[46];let ie;return t[47]!==_||t[48]!==Q||t[49]!==q||t[50]!==O||t[51]!==K?(ie=C.jsxs("form",{onSubmit:_,className:"flex items-center gap-2",children:[K,re,Q,q,O]}),t[47]=_,t[48]=Q,t[49]=q,t[50]=O,t[51]=K,t[52]=ie):ie=t[52],ie}function fz(t){return t.name}function hz(t){return t.name}function dz(t,e,n){return t?e?n?`grpc://${t}/${e}/${n}`:`grpc://${t}/${e}`:`grpc://${t}`:"grpc://"}function pz(t){const e=t.match(/^grpc:\/\/([^/]*)(?:\/([^/]*)(?:\/([^/]*))?)?$/);return e?{host:e[1]||"",service:e[2]||"",method:e[3]||""}:{host:"",service:"",method:""}}function vx(){return Math.random().toString(36).substring(2,9)}function Qp(t){const e=dt.c(32),{items:n,onChange:r,keyPlaceholder:i,valuePlaceholder:a,keySuggestions:l}=t,c=i===void 0?"Key":i,f=a===void 0?"Value":a;let h;e[0]!==l?(h=l===void 0?[]:l,e[0]=l,e[1]=h):h=e[1];const m=h,[p,_]=X.useState(null),[y,v]=X.useState("");let w;e[2]!==n||e[3]!==r?(w=(M,$,F)=>{const P=n.map(se=>se.id===M?{...se,[$]:F}:se),Z=P[P.length-1];Z&&(Z.key||Z.value)&&P.push({id:vx(),enabled:!0,key:"",value:""}),r(P)},e[2]=n,e[3]=r,e[4]=w):w=e[4];const k=w;let S;e[5]!==n||e[6]!==r?(S=M=>{if(n.length===1){r([{id:vx(),enabled:!0,key:"",value:""}]);return}r(n.filter($=>$.id!==M))},e[5]=n,e[6]=r,e[7]=S):S=e[7];const R=S;let T;e[8]!==n||e[9]!==m?(T=M=>{const $=n.map(mz);return m.filter(F=>F.toLowerCase().includes(M.toLowerCase())&&!$.includes(F.toLowerCase()))},e[8]=n,e[9]=m,e[10]=T):T=e[10];const z=T;let L;if(e[11]!==p||e[12]!==y||e[13]!==z||e[14]!==n||e[15]!==c||e[16]!==m||e[17]!==R||e[18]!==k||e[19]!==f){let M;e[21]!==p||e[22]!==y||e[23]!==z||e[24]!==c||e[25]!==m||e[26]!==R||e[27]!==k||e[28]!==f?(M=$=>C.jsxs("tr",{className:`border-b border-neutral-100 dark:border-white/5 last:border-0 ${$.enabled?"":"opacity-40"}`,children:[C.jsx("td",{className:"w-8 pl-2.5 py-1.5",children:C.jsx("button",{type:"button",onClick:()=>k($.id,"enabled",!$.enabled),className:"p-0.5 rounded transition-colors",children:$.enabled?C.jsx(fE,{className:"w-3.5 h-3.5 text-neutral-700 dark:text-neutral-300"}):C.jsx(hE,{className:"w-3.5 h-3.5 text-neutral-300 dark:text-neutral-600"})})}),C.jsx("td",{className:"px-1.5 py-1.5",children:C.jsxs("div",{className:"relative",children:[C.jsx("input",{type:"text",value:$.key,onChange:F=>{k($.id,"key",F.target.value),v(F.target.value)},onFocus:()=>{_($.id),v($.key)},onBlur:()=>{setTimeout(()=>_(null),150)},placeholder:c,className:"w-full px-2 py-1 bg-white dark:bg-white/5 border border-neutral-300 dark:border-white/10 rounded text-xs text-neutral-800 dark:text-neutral-100 placeholder-neutral-400 dark:placeholder-neutral-500 focus:outline-none focus:border-neutral-400 dark:focus:border-white/20 transition-colors"}),m.length>0&&p===$.id&&(()=>{const F=z(y);return F.length===0?null:C.jsx("div",{className:"absolute z-50 left-0 right-0 top-full mt-1 bg-white dark:bg-[#1a1a1a] border border-neutral-200 dark:border-white/10 rounded-md shadow-lg max-h-48 overflow-y-auto",children:F.map(P=>C.jsx("button",{type:"button",onMouseDown:Z=>{Z.preventDefault(),k($.id,"key",P),_(null)},className:"w-full px-2 py-1.5 text-left text-xs text-neutral-600 dark:text-neutral-300 hover:bg-neutral-100 dark:hover:bg-white/10 transition-colors",children:P},P))})})()]})}),C.jsx("td",{className:"px-1.5 py-1.5",children:C.jsx("input",{type:"text",value:$.value,onChange:F=>k($.id,"value",F.target.value),placeholder:f,className:"w-full px-2 py-1 bg-white dark:bg-white/5 border border-neutral-300 dark:border-white/10 rounded text-xs text-neutral-800 dark:text-neutral-100 placeholder-neutral-400 dark:placeholder-neutral-500 focus:outline-none focus:border-neutral-400 dark:focus:border-white/20 transition-colors"})}),C.jsx("td",{className:"w-8 pr-1.5 py-1.5",children:C.jsx("button",{type:"button",onClick:()=>R($.id),className:"p-1 text-neutral-400 dark:text-neutral-500 hover:text-rose-500 dark:hover:text-rose-400 hover:bg-neutral-100 dark:hover:bg-white/5 rounded transition-colors",children:C.jsx(Zf,{className:"w-3.5 h-3.5"})})})]},$.id),e[21]=p,e[22]=y,e[23]=z,e[24]=c,e[25]=m,e[26]=R,e[27]=k,e[28]=f,e[29]=M):M=e[29],L=n.map(M),e[11]=p,e[12]=y,e[13]=z,e[14]=n,e[15]=c,e[16]=m,e[17]=R,e[18]=k,e[19]=f,e[20]=L}else L=e[20];let E;return e[30]!==L?(E=C.jsx("div",{children:C.jsx("table",{className:"w-full",children:C.jsx("tbody",{children:L})})}),e[30]=L,e[31]=E):E=e[31],E}function mz(t){return t.key.toLowerCase()}function gz(){return Math.random().toString(36).substring(2,9)}function wx(){return{id:gz(),enabled:!0,key:"",type:"text",value:"",file:null,fileName:""}}function yz(t){const e=dt.c(21),{items:n,onChange:r,keyPlaceholder:i,valuePlaceholder:a}=t,l=i===void 0?"Field":i,c=a===void 0?"Value":a;let f;e[0]===Symbol.for("react.memo_cache_sentinel")?(f={},e[0]=f):f=e[0];const h=X.useRef(f);let m;e[1]!==n||e[2]!==r?(m=(L,E)=>{const M=n.map(F=>F.id===L?{...F,...E}:F),$=M[M.length-1];$&&($.key||$.value||$.file)&&M.push(wx()),r(M)},e[1]=n,e[2]=r,e[3]=m):m=e[3];const p=m;let _;e[4]!==n||e[5]!==r?(_=L=>{if(n.length===1){r([wx()]);return}r(n.filter(E=>E.id!==L))},e[4]=n,e[5]=r,e[6]=_):_=e[6];const y=_;let v;e[7]!==p?(v=(L,E)=>{const M=E.target.files?.[0]??null;E.target.value="",M&&p(L,{type:"file",file:M,fileName:M.name,value:""})},e[7]=p,e[8]=v):v=e[8];const w=v;let k;e[9]!==p?(k=L=>{p(L,{type:"text",file:null,fileName:""})},e[9]=p,e[10]=k):k=e[10];const S=k,R=_z;let T;e[11]!==S||e[12]!==w||e[13]!==n||e[14]!==l||e[15]!==y||e[16]!==p||e[17]!==c?(T=n.map(L=>C.jsxs("tr",{className:`border-b border-neutral-100 dark:border-white/5 last:border-0 ${L.enabled?"":"opacity-40"}`,children:[C.jsx("td",{className:"w-8 pl-2.5 py-1.5",children:C.jsx("button",{type:"button",onClick:()=>p(L.id,{enabled:!L.enabled}),className:"p-0.5 rounded transition-colors",children:L.enabled?C.jsx(fE,{className:"w-3.5 h-3.5 text-neutral-700 dark:text-neutral-300"}):C.jsx(hE,{className:"w-3.5 h-3.5 text-neutral-300 dark:text-neutral-600"})})}),C.jsx("td",{className:"px-1.5 py-1.5 w-36",children:C.jsx("input",{type:"text",value:L.key,onChange:E=>p(L.id,{key:E.target.value}),placeholder:l,className:"w-full px-2 py-1 bg-white dark:bg-white/5 border border-neutral-300 dark:border-white/10 rounded text-xs text-neutral-800 dark:text-neutral-100 placeholder-neutral-400 dark:placeholder-neutral-500 focus:outline-none focus:border-neutral-400 dark:focus:border-white/20 transition-colors"})}),C.jsxs("td",{className:"px-1.5 py-1.5",children:[C.jsx("input",{type:"file",ref:E=>{h.current[L.id]=E},onChange:E=>w(L.id,E),className:"hidden"}),L.type==="file"&&L.file?C.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 bg-neutral-100 dark:bg-white/10 rounded text-xs text-neutral-600 dark:text-neutral-300",children:[C.jsx(_x,{className:"w-3 h-3 shrink-0"}),C.jsx("span",{className:"truncate max-w-xs",children:L.fileName}),C.jsxs("span",{className:"text-neutral-400 shrink-0",children:["(",R(L.file.size),")"]}),C.jsx("button",{type:"button",onClick:()=>S(L.id),className:"p-0.5 ml-1 text-neutral-400 hover:text-neutral-600 dark:hover:text-neutral-200 transition-colors shrink-0",children:C.jsx(fy,{className:"w-3 h-3"})})]}):C.jsx("input",{type:"text",value:L.value,onChange:E=>p(L.id,{value:E.target.value}),placeholder:c,className:"w-full px-2 py-1 bg-white dark:bg-white/5 border border-neutral-300 dark:border-white/10 rounded text-xs text-neutral-800 dark:text-neutral-100 placeholder-neutral-400 dark:placeholder-neutral-500 focus:outline-none focus:border-neutral-400 dark:focus:border-white/20 transition-colors"})]}),C.jsx("td",{className:"w-16 pr-1.5 py-1.5",children:C.jsxs("div",{className:"flex items-center gap-0.5",children:[C.jsx("button",{type:"button",onClick:()=>h.current[L.id]?.click(),className:`p-1 rounded transition-colors ${L.type==="file"?"text-blue-500 dark:text-blue-400 bg-blue-50 dark:bg-blue-500/10":"text-neutral-400 dark:text-neutral-500 hover:text-neutral-600 dark:hover:text-neutral-300 hover:bg-neutral-100 dark:hover:bg-white/5"}`,title:"Attach file",children:C.jsx(_x,{className:"w-3.5 h-3.5"})}),C.jsx("button",{type:"button",onClick:()=>y(L.id),className:"p-1 text-neutral-400 dark:text-neutral-500 hover:text-rose-500 dark:hover:text-rose-400 hover:bg-neutral-100 dark:hover:bg-white/5 rounded transition-colors",children:C.jsx(Zf,{className:"w-3.5 h-3.5"})})]})})]},L.id)),e[11]=S,e[12]=w,e[13]=n,e[14]=l,e[15]=y,e[16]=p,e[17]=c,e[18]=T):T=e[18];let z;return e[19]!==T?(z=C.jsx("div",{children:C.jsx("table",{className:"w-full",children:C.jsx("tbody",{children:T})})}),e[19]=T,e[20]=z):z=e[20],z}function _z(t){return t<1024?`${t} B`:t<1048576?`${(t/1024).toFixed(1)} KB`:`${(t/1048576).toFixed(1)} MB`}function bz(t){const e=dt.c(12),{file:n,fileName:r,onFileChange:i}=t,a=X.useRef(null);let l;e[0]!==i?(l=v=>{i(v,v?.name??"")},e[0]=i,e[1]=l):l=e[1];const c=l,f=wz,h=vz;let m;e[2]!==c?(m=C.jsx("input",{type:"file",ref:a,onChange:v=>c(v.target.files?.[0]??null),className:"hidden"}),e[2]=c,e[3]=m):m=e[3];let p;e[4]!==n||e[5]!==r||e[6]!==i?(p=n?C.jsxs("div",{className:"flex items-center gap-3 p-3 bg-neutral-100 dark:bg-white/5 rounded-lg border border-neutral-200 dark:border-white/10",children:[C.jsx("div",{className:"flex items-center justify-center w-10 h-10 bg-white dark:bg-white/10 rounded-lg text-xl",children:h(n.type)}),C.jsxs("div",{className:"flex-1 min-w-0",children:[C.jsxs("div",{className:"flex items-center gap-2",children:[C.jsx(EL,{className:"w-4 h-4 text-neutral-500 dark:text-neutral-400 shrink-0"}),C.jsx("p",{className:"text-sm font-medium text-neutral-800 dark:text-neutral-100 truncate",children:r})]}),C.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[C.jsx("span",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:f(n.size)}),C.jsx("span",{className:"text-xs text-neutral-400 dark:text-neutral-500",children:""}),C.jsx("span",{className:"text-xs text-neutral-500 dark:text-neutral-400 truncate",children:n.type||"application/octet-stream"})]})]}),C.jsxs("div",{className:"flex items-center gap-1",children:[C.jsx("button",{type:"button",onClick:()=>a.current?.click(),className:"px-2 py-1 text-xs text-neutral-600 dark:text-neutral-300 hover:bg-neutral-200 dark:hover:bg-white/10 rounded transition-colors",children:"Change"}),C.jsx("button",{type:"button",onClick:()=>i(null,""),className:"p-1 text-neutral-400 dark:text-neutral-500 hover:text-rose-500 dark:hover:text-rose-400 hover:bg-neutral-200 dark:hover:bg-white/10 rounded transition-colors",children:C.jsx(fy,{className:"w-4 h-4"})})]})]}):C.jsxs("div",{onClick:()=>a.current?.click(),className:"flex flex-col items-center justify-center p-8 border-2 border-dashed border-neutral-300 dark:border-white/20 rounded-lg cursor-pointer hover:border-neutral-400 dark:hover:border-white/30 hover:bg-neutral-50 dark:hover:bg-white/5 transition-colors",children:[C.jsx(KL,{className:"w-8 h-8 text-neutral-400 dark:text-neutral-500 mb-2"}),C.jsx("p",{className:"text-sm text-neutral-600 dark:text-neutral-300 mb-1",children:"Click to select a file"}),C.jsx("p",{className:"text-xs text-neutral-400 dark:text-neutral-500",children:"or drag and drop"})]}),e[4]=n,e[5]=r,e[6]=i,e[7]=p):p=e[7];let _;e[8]===Symbol.for("react.memo_cache_sentinel")?(_=C.jsx("p",{className:"text-xs text-neutral-400 dark:text-neutral-500",children:"The file will be sent as the raw request body. Content-Type will be set automatically based on the file type."}),e[8]=_):_=e[8];let y;return e[9]!==m||e[10]!==p?(y=C.jsxs("div",{className:"space-y-3",children:[m,p,_]}),e[9]=m,e[10]=p,e[11]=y):y=e[11],y}function vz(t){return t.startsWith("image/")?"":t.startsWith("video/")?"":t.startsWith("audio/")?"":t.includes("pdf")?"":t.includes("zip")||t.includes("tar")||t.includes("gzip")?"":t.includes("json")||t.includes("xml")||t.includes("text")?"":""}function wz(t){return t<1024?`${t} B`:t<1048576?`${(t/1024).toFixed(1)} KB`:t<1073741824?`${(t/1048576).toFixed(1)} MB`:`${(t/1073741824).toFixed(2)} GB`}function xz(t){const e=dt.c(9),{value:n,onChange:r,placeholder:i}=t,a=X.useRef(null);let l;e[0]===Symbol.for("react.memo_cache_sentinel")?(l=()=>{const m=a.current;if(!m)return;m.style.height="auto";const p=Math.min(m.scrollHeight,160);m.style.height=`${p}px`},e[0]=l):l=e[0];let c;e[1]!==n?(c=[n],e[1]=n,e[2]=c):c=e[2],X.useEffect(l,c);let f;e[3]!==r?(f=m=>r(m.target.value),e[3]=r,e[4]=f):f=e[4];let h;return e[5]!==i||e[6]!==f||e[7]!==n?(h=C.jsx("textarea",{ref:a,value:n,onChange:f,placeholder:i,spellCheck:!1,rows:3,className:"w-full font-mono text-xs text-neutral-800 dark:text-neutral-100 bg-transparent focus:outline-none placeholder-neutral-400 dark:placeholder-neutral-600 resize-none overflow-auto"}),e[5]=i,e[6]=f,e[7]=n,e[8]=h):h=e[8],h}function xx(t){const e=[],n=/\{\{(\w+):([^{}]+)\}\}/g;let r;for(;(r=n.exec(t))!==null;)e.push({start:r.index,end:r.index+r[0].length,type:r[1],id:r[2],full:r[0]});return e}function Fc(t){if(t.nodeType===Node.TEXT_NODE)return(t.textContent||"").replace(/\u200B/g,"");if(t.classList?.contains("variable-chip"))return t.dataset.marker||"";if(t.tagName==="BR")return`
`;let e="";const n=t.tagName==="DIV"||t.tagName==="P";for(const r of t.childNodes)e+=Fc(r);return n&&e&&!e.endsWith(`
`)&&(e+=`
`),e}function yE(t,e){if(e.rangeCount===0)return"";const n=e.getRangeAt(0),r=n.startContainer,i=n.startOffset;let a="",l=!1;function c(f){if(!l){if(f===r)if(f.nodeType===Node.TEXT_NODE){a+=(f.textContent||"").slice(0,i).replace(/\u200B/g,""),l=!0;return}else{const h=f.childNodes;for(let m=0;m<i;m++)if(c(h[m]),l)return;l=!0;return}if(f.nodeType===Node.TEXT_NODE)a+=(f.textContent||"").replace(/\u200B/g,"");else if(f.nodeType===Node.ELEMENT_NODE){const h=f;if(h.classList.contains("variable-chip")){if(h.contains(r)){l=!0;return}a+=h.dataset.marker||""}else if(h.tagName==="BR")a+=`
`;else if(h.tagName==="DIV"||h.tagName==="P"){for(const m of Array.from(h.childNodes))if(c(m),l)return;a&&!a.endsWith(`
`)&&(a+=`
`)}else for(const m of Array.from(h.childNodes))if(c(m),l)return}}}return c(t),a}function Sz(t){const e=window.getSelection();return!e||e.rangeCount===0||!t.contains(e.anchorNode)?null:yE(t,e).length}function Ez(t,e){let n=0,r=!1;function i(a){if(!r){if(a.nodeType===Node.TEXT_NODE){const l=a.textContent||"",f=l.replace(/\u200B/g,"").length;if(n+f>=e){const h=e-n;let m=0,p=0;for(;p<h&&m<l.length;)l[m]!==""&&p++,m++;const _=document.createRange();_.setStart(a,m),_.setEnd(a,m);const y=window.getSelection();y?.removeAllRanges(),y?.addRange(_),r=!0;return}n+=f}else if(a.nodeType===Node.ELEMENT_NODE){const l=a;if(l.classList.contains("variable-chip")){const c=(l.dataset.marker||"").length;n+=c}else if(l.tagName==="BR")n+=1;else{const c=l.tagName==="DIV"||l.tagName==="P";for(const f of Array.from(a.childNodes))if(i(f),r)return;c&&n<e&&(n+=1)}}}}i(t)}function kz(t,e,n){switch(t){case"file_base64":case"file_dataurl":return n?.data?n.name||"file":"Select file...";default:return n?.name||t}}function Cz(t){const e="w-3 h-3";switch(t){case"file_base64":case"file_dataurl":return`<svg class="${e}" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/></svg>`;case"base64":return`<svg class="${e}" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="4" y1="9" x2="20" y2="9"/><line x1="4" y1="15" x2="20" y2="15"/><line x1="10" y1="3" x2="8" y2="21"/><line x1="16" y1="3" x2="14" y2="21"/></svg>`;case"timestamp":return`<svg class="${e}" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>`;case"uuid":return`<svg class="${e}" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"/><path d="M5 3v4"/><path d="M9 5H1"/></svg>`;case"random_string":return`<svg class="${e}" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M2 18h1.4c1.3 0 2.5-.6 3.3-1.7l14.2-12.6c.8-1.1 2-1.7 3.3-1.7H22"/><path d="M2 6h1.4c1.3 0 2.5.6 3.3 1.7l14.2 12.6c.8 1.1 2 1.7 3.3 1.7H22"/></svg>`;default:return""}}function Sx(t,e,n,r){const i=r.find(m=>m.type===t&&m.id===e),a=t==="file_base64"||t==="file_dataurl"||t==="base64",l=i&&i.data,c=document.createElement("span");c.contentEditable="false",c.className=`variable-chip inline-flex items-center gap-1 px-1.5 py-0.5 mx-0.5 rounded text-xs font-medium align-baseline select-none ${a&&!l?"bg-amber-500/20 text-amber-300 border border-amber-500/30":"bg-blue-500/20 text-blue-300 border border-blue-500/30"} ${a?"cursor-pointer hover:bg-blue-500/30":""}`,c.dataset.marker=n,c.dataset.variableType=t,c.dataset.variableId=e;const f=document.createElement("span");f.className="chip-icon",f.innerHTML=Cz(t),c.appendChild(f);const h=document.createElement("span");return h.className="chip-label",h.textContent=kz(t,e,i),c.appendChild(h),c}function _E(t){const e=dt.c(40),{editorRef:n,value:r,onChange:i,variables:a,onVariablesChange:l,indentTriggers:c}=t;let f;e[0]!==c?(f=c===void 0?["{","["]:c,e[0]=c,e[1]=f):f=e[1];const h=f,m=X.useRef(""),p=X.useRef(!1),_=X.useRef(!1);let y;e[2]!==i||e[3]!==l||e[4]!==a?(y=Q=>{const I=Fc(Q);m.current=I,p.current=!0,i(I);const N=new Set(xx(I).map(Rz)),q=a.filter(O=>N.has(O.id));q.length!==a.length&&(_.current=!0,l(q))},e[2]=i,e[3]=l,e[4]=a,e[5]=y):y=e[5];const v=y,[w,k]=X.useState(!1);let S;e[6]===Symbol.for("react.memo_cache_sentinel")?(S={top:0,left:0},e[6]=S):S=e[6];const[R,T]=X.useState(S),z=Az;let L;e[7]!==n||e[8]!==r||e[9]!==a?(L=()=>{const Q=n.current;if(!Q)return;const I=Sz(Q),N=xx(r);Q.innerHTML="";let q=0;for(const ie of N){const fe=r.slice(q,ie.start);fe&&z(Q,fe);const ge=Sx(ie.type,ie.id,ie.full,a);Q.appendChild(ge),Q.appendChild(document.createTextNode("")),q=ie.end}const O=r.slice(q);O&&z(Q,O),Q.childNodes.length===0&&Q.appendChild(document.createElement("br")),m.current=r,I!==null&&Ez(Q,I)},e[7]=n,e[8]=r,e[9]=a,e[10]=L):L=e[10];const E=L;let M,$;e[11]!==E||e[12]!==r?(M=()=>{!p.current&&r!==m.current&&E(),p.current=!1},$=[r,E],e[11]=E,e[12]=r,e[13]=M,e[14]=$):(M=e[13],$=e[14]),X.useEffect(M,$);let F;e[15]!==E?(F=()=>{_.current?_.current=!1:E()},e[15]=E,e[16]=F):F=e[16];let P;e[17]!==E||e[18]!==a?(P=[a,E],e[17]=E,e[18]=a,e[19]=P):P=e[19],X.useEffect(F,P);let Z;e[20]!==n||e[21]!==v?(Z=()=>{const Q=n.current;if(!Q)return;const I=Fc(Q),N=window.getSelection();if(N&&N.rangeCount>0){const q=N.getRangeAt(0);if(q.startContainer.nodeType===Node.TEXT_NODE){const O=q.startContainer.textContent||"",ie=q.startOffset;if(ie>=2&&O.slice(ie-2,ie)==="{{"){const fe=q.getBoundingClientRect();T({top:fe.bottom+4,left:fe.left}),k(!0)}else k(!1)}}I!==m.current&&v(Q)},e[20]=n,e[21]=v,e[22]=Z):Z=e[22];const se=Z,me=Tz;let V;e[23]!==n||e[24]!==h||e[25]!==w||e[26]!==v?(V=Q=>{if(w){Q.key==="Escape"&&(k(!1),Q.preventDefault());return}if(Q.key==="Backspace"){const I=window.getSelection();if(I&&I.rangeCount>0&&I.isCollapsed){const N=I.getRangeAt(0),q=N.startContainer,O=N.startOffset;if(q.nodeType===Node.TEXT_NODE&&O===1&&q.textContent?.charAt(0)===""){const ie=q.previousSibling;if(ie&&ie.classList?.contains("variable-chip")){Q.preventDefault();const fe=ie,ge=fe.parentNode;ge?.removeChild(fe),ge?.removeChild(q);const de=n.current;de&&v(de);return}}if(O===0){let ie=q.previousSibling;if(ie?.nodeType===Node.TEXT_NODE&&ie.textContent===""&&(ie=ie.previousSibling),ie&&ie.classList?.contains("variable-chip")){Q.preventDefault();const fe=ie,ge=fe.nextSibling,de=fe.parentNode;de?.removeChild(fe),ge?.nodeType===Node.TEXT_NODE&&ge.textContent===""&&de?.removeChild(ge);const Se=n.current;Se&&v(Se);return}}}}if(Q.key==="Tab"&&(Q.preventDefault(),document.execCommand("insertText",!1,"  ")),Q.key==="Enter"){Q.preventDefault();const I=n.current,N=window.getSelection();let q="";if(I&&N&&N.rangeCount>0){const fe=yE(I,N),ge=fe.lastIndexOf(`
`),de=fe.slice(ge+1),Se=de.match(/^(\s*)/);q=Se?Se[1]:"";const Xe=de.trimEnd().slice(-1);h.includes(Xe)&&(q=q+"  ")}const O=document.createElement("br"),ie=N?.getRangeAt(0);ie&&(ie.deleteContents(),ie.insertNode(O),ie.setStartAfter(O),ie.setEndAfter(O),N?.removeAllRanges(),N?.addRange(ie),q&&document.execCommand("insertText",!1,q))}},e[23]=n,e[24]=h,e[25]=w,e[26]=v,e[27]=V):V=e[27];const G=V;let B;e[28]!==n||e[29]!==i||e[30]!==l||e[31]!==a?(B=Q=>{k(!1);const I=n.current;if(!I)return;const N=window.getSelection();if(!N||N.rangeCount===0)return;const q=N.getRangeAt(0);if(q.startContainer.nodeType!==Node.TEXT_NODE)return;const O=q.startContainer,ie=q.startOffset,fe=O.textContent||"";O.textContent=fe.slice(0,ie-2)+fe.slice(ie);const ge=Math.random().toString(36).substring(2,9),de=Q==="file_base64"||Q==="file_dataurl"?"file":Q,Se=`{{${Q}:${ge}}}`,we=Sx(Q,ge,Se,a),Xe=ie-2;q.setStart(O,Xe),q.setEnd(O,Xe),q.insertNode(we);const at=document.createTextNode("");we.after(at),q.setStart(at,1),q.setEnd(at,1),N.removeAllRanges(),N.addRange(q),_.current=!0,l([...a,{id:ge,type:Q,name:de}]);const yt=Fc(I);return m.current=yt,p.current=!0,i(yt),ge},e[28]=n,e[29]=i,e[30]=l,e[31]=a,e[32]=B):B=e[32];const K=B;let re;return e[33]!==E||e[34]!==se||e[35]!==G||e[36]!==K||e[37]!==w||e[38]!==R?(re={handleInput:se,handlePaste:me,handleKeyDown:G,insertVariable:K,showTypeMenu:w,setShowTypeMenu:k,typeMenuPosition:R,buildDOM:E},e[33]=E,e[34]=se,e[35]=G,e[36]=K,e[37]=w,e[38]=R,e[39]=re):re=e[39],re}function Tz(t){t.preventDefault();const e=t.clipboardData.getData("text/plain");document.execCommand("insertText",!1,e)}function Az(t,e){e.split(`
`).forEach((r,i)=>{i>0&&t.appendChild(document.createElement("br")),r&&t.appendChild(document.createTextNode(r))})}function Rz(t){return t.id}const Oz=[{type:"file_base64",label:"File (Base64)",description:"Select a file to encode",icon:C.jsx(pf,{className:"w-3.5 h-3.5"})},{type:"file_dataurl",label:"File (Data URL)",description:"File as data:... URL",icon:C.jsx(pf,{className:"w-3.5 h-3.5"})},{type:"base64",label:"Text (Base64)",description:"Text to encode",icon:C.jsx(mE,{className:"w-3.5 h-3.5"})},{type:"timestamp",label:"Timestamp",description:"Unix timestamp",icon:C.jsx(dE,{className:"w-3.5 h-3.5"})},{type:"uuid",label:"UUID",description:"Random UUID",icon:C.jsx(Ml,{className:"w-3.5 h-3.5"})},{type:"random_string",label:"Random String",description:"16-char random",icon:C.jsx(gE,{className:"w-3.5 h-3.5"})}];function Iz({value:t,onChange:e,variables:n,onVariablesChange:r,placeholder:i}){const a=X.useRef(null),l=X.useRef(null),{handleInput:c,handlePaste:f,handleKeyDown:h,insertVariable:m,showTypeMenu:p,setShowTypeMenu:_,typeMenuPosition:y,buildDOM:v}=_E({editorRef:a,value:t,onChange:e,variables:n,onVariablesChange:r,indentTriggers:["{","["]}),[w,k]=X.useState(null),[S,R]=X.useState(""),T=X.useRef(!1),z=X.useRef(null),L=X.useMemo(()=>{if(!t.trim())return{valid:!0,empty:!0};try{let V=t;return V=V.replace(/"\{\{[^{}]+\}\}"/g,'"__var__"'),V=V.replace(/\{\{[^{}]+\}\}/g,"null"),JSON.parse(V),{valid:!0,empty:!1}}catch(V){return{valid:!1,empty:!1,error:V instanceof Error?V.message:"Invalid JSON"}}},[t]),[E,M]=X.useState(!1),$=X.useMemo(()=>df(t,n,{missingDataPlaceholder:"[no data]"}),[t,n]);X.useEffect(()=>(z.current&&(clearTimeout(z.current),z.current=null),L.valid&&!L.empty&&T.current&&(z.current=setTimeout(()=>{try{let V=t;V=V.replace(/"\{\{[^{}]+\}\}"/g,'"__var__"'),V=V.replace(/\{\{[^{}]+\}\}/g,"null"),JSON.parse(V);const G=new Map;let B=t,K=0;B=B.replace(/"\{\{[^{}]+\}\}"/g,I=>{const N=`"__VAR_${K++}__"`;return G.set(N,I),N}),B=B.replace(/\{\{[^{}]+\}\}/g,I=>{const N=`"__VAR_${K++}__"`;return G.set(N,I),N});const re=JSON.parse(B);let Q=JSON.stringify(re,null,2);Q=Q.replace(/\{\}/g,`{
}`),Q=Q.replace(/\[\]/g,`[
]`),G.forEach((I,N)=>{Q=Q.replace(N,I)}),Q!==t&&e(Q)}catch{}},500)),T.current=!L.valid,()=>{z.current&&clearTimeout(z.current)}),[L.valid,L.empty,t,e]),X.useEffect(()=>{E||v()},[E,v]);const F=X.useCallback((V,G)=>{const B=document.createElement("input");B.type="file",B.onchange=K=>{const re=K.target.files?.[0];if(!re)return;const Q=new FileReader;Q.onload=()=>{const I=Q.result.split(",")[1],N=n.find(q=>q.id===G);r(N?n.map(q=>q.id===N.id?{...q,data:I,mimeType:re.type,name:re.name}:q):[...n,{id:G,type:V,name:re.name,data:I,mimeType:re.type}])},Q.readAsDataURL(re)},B.click()},[n,r]),P=X.useCallback(V=>{const B=V.target.closest(".variable-chip");if(B){const K=B.dataset.variableType,re=B.dataset.variableId;if(K==="file_base64"||K==="file_dataurl")F(K,re),V.preventDefault(),V.stopPropagation();else if(K==="base64"){const Q=B.getBoundingClientRect(),I=n.find(N=>N.id===re);R(I?.data||""),k({variableKey:`${K}:${re}`,rect:Q}),V.preventDefault(),V.stopPropagation()}}else k(null)},[n,F]),Z=X.useCallback(V=>{const G=m(V);G&&(V==="file_base64"||V==="file_dataurl")&&setTimeout(()=>F(V,G),0)},[m,F]),se=X.useCallback(()=>{if(!w)return;const[V,G]=w.variableKey.split(":"),B=n.find(K=>K.id===G);r(B?n.map(K=>K.id===B.id?{...K,data:S}:K):[...n,{id:G,type:V,name:V,data:S}]),k(null),a.current?.focus()},[w,S,n,r]);X.useEffect(()=>{const V=B=>{B.key==="Escape"&&(_(!1),k(null))},G=B=>{l.current&&!l.current.contains(B.target)&&(_(!1),k(null))};return document.addEventListener("keydown",V),document.addEventListener("mousedown",G),()=>{document.removeEventListener("keydown",V),document.removeEventListener("mousedown",G)}},[_]);const me=X.useMemo(()=>{if(!w||!l.current)return{top:0,left:0};const V=l.current.getBoundingClientRect();return{top:w.rect.bottom-V.top+4,left:Math.max(0,w.rect.left-V.left)}},[w]);return C.jsxs("div",{ref:l,className:"flex flex-col h-full min-h-50 max-h-[60vh] relative overflow-hidden",children:[E?C.jsx("pre",{className:"flex-1 min-h-0 p-3 font-mono text-sm text-zinc-100 overflow-y-auto whitespace-pre-wrap wrap-break-word",children:$}):C.jsxs("div",{className:"flex-1 min-h-0 relative",children:[C.jsx("div",{ref:a,contentEditable:!0,suppressContentEditableWarning:!0,onInput:c,onPaste:f,onKeyDown:h,onClick:P,className:"h-full p-3 font-mono text-sm text-zinc-100 outline-none overflow-y-auto whitespace-pre-wrap wrap-break-word"}),!t&&i&&C.jsx("div",{className:"absolute top-3 left-3 font-mono text-sm text-zinc-500 pointer-events-none whitespace-pre-wrap",children:i})]}),C.jsxs("div",{className:"flex items-center justify-end gap-2 px-3 py-1.5 text-xs shrink-0",children:[C.jsx("button",{onClick:()=>M(!E),className:`transition-colors flex items-center gap-1 ${E?"text-blue-400 hover:text-blue-300":"text-zinc-500 hover:text-zinc-300"}`,title:E?"Show editor":"Show resolved JSON",children:C.jsx(pE,{className:"w-3.5 h-3.5"})}),L.valid?C.jsx("span",{className:"text-emerald-500",children:"Valid JSON"}):C.jsx("span",{className:"text-red-400",title:L.error,children:"Invalid JSON"})]}),p&&C.jsx("div",{className:"fixed z-50 w-56 bg-zinc-800 border border-zinc-600 rounded-lg shadow-xl py-1",style:{top:y.top,left:y.left},children:Oz.map(V=>C.jsxs("button",{onClick:()=>Z(V.type),className:"w-full flex items-center gap-2 px-3 py-2 text-left hover:bg-zinc-700 transition-colors",children:[C.jsx("span",{className:"text-zinc-400",children:V.icon}),C.jsxs("div",{className:"flex-1 min-w-0",children:[C.jsx("div",{className:"text-sm text-zinc-200",children:V.label}),C.jsx("div",{className:"text-xs text-zinc-500",children:V.description})]})]},V.type))}),w&&(()=>{const[V]=w.variableKey.split(":");return C.jsx("div",{className:"absolute z-50 bg-zinc-800/95 border border-zinc-700/50 rounded shadow-lg p-1.5 w-44",style:me,children:V==="base64"?C.jsxs("div",{className:"flex gap-1",children:[C.jsx("input",{type:"text",value:S,onChange:G=>R(G.target.value),onKeyDown:G=>G.key==="Enter"&&se(),placeholder:"Text to encode...",className:"flex-1 min-w-0 px-1.5 py-0.5 text-xs bg-transparent text-zinc-200 rounded border-none focus:outline-none placeholder:text-zinc-500",autoFocus:!0}),C.jsx("button",{onClick:se,className:"p-1 text-zinc-400 hover:text-zinc-200 transition-colors",children:C.jsx(cE,{className:"w-3 h-3"})})]}):null})})()]})}const Nz=[{type:"file_base64",label:"File (Base64)",description:"Select a file to encode",icon:C.jsx(pf,{className:"w-3.5 h-3.5"})},{type:"file_dataurl",label:"File (Data URL)",description:"File as data:... URL",icon:C.jsx(pf,{className:"w-3.5 h-3.5"})},{type:"base64",label:"Text (Base64)",description:"Text to encode",icon:C.jsx(mE,{className:"w-3.5 h-3.5"})},{type:"timestamp",label:"Timestamp",description:"Unix timestamp",icon:C.jsx(dE,{className:"w-3.5 h-3.5"})},{type:"uuid",label:"UUID",description:"Random UUID",icon:C.jsx(Ml,{className:"w-3.5 h-3.5"})},{type:"random_string",label:"Random String",description:"16-char random",icon:C.jsx(gE,{className:"w-3.5 h-3.5"})}];function Dz(t){if(!t.trim())return{valid:!0};try{const r=new DOMParser().parseFromString(t,"application/xml").querySelector("parsererror");if(r){const i=r.textContent||"Invalid XML",a=i.match(/error[^:]*:\s*(.+)/i);return{valid:!1,error:a?a[1].trim():i.split(`
`)[0]}}return{valid:!0}}catch(e){return{valid:!1,error:e instanceof Error?e.message:"Invalid XML"}}}function Mz(t){try{const n=new DOMParser().parseFromString(t,"application/xml");if(n.querySelector("parsererror"))return t;const i=new XMLSerializer().serializeToString(n);let a="",l=0;const c=i.replace(/></g,`>
<`).split(`
`);for(const f of c){const h=f.trim();h&&(h.startsWith("</")&&(l=Math.max(0,l-1)),a+="  ".repeat(l)+h+`
`,h.startsWith("<")&&!h.startsWith("</")&&!h.startsWith("<?")&&!h.endsWith("/>")&&l++)}return a.trim()}catch{return t}}function Lz({value:t,onChange:e,variables:n,onVariablesChange:r,placeholder:i}){const a=X.useRef(null),l=X.useRef(null),{handleInput:c,handlePaste:f,handleKeyDown:h,insertVariable:m,showTypeMenu:p,setShowTypeMenu:_,typeMenuPosition:y,buildDOM:v}=_E({editorRef:a,value:t,onChange:e,variables:n,onVariablesChange:r,indentTriggers:[">","{","["]}),[w,k]=X.useState(null),[S,R]=X.useState(""),T=X.useRef(!1),z=X.useRef(null),L=X.useMemo(()=>{if(!t.trim())return{valid:!0,empty:!0};let V=t;return V=V.replace(/\{\{[^{}]+\}\}/g,"PLACEHOLDER"),{...Dz(V),empty:!1}},[t]),[E,M]=X.useState(!1),$=X.useMemo(()=>df(t,n,{missingDataPlaceholder:"[no data]"}),[t,n]);X.useEffect(()=>(z.current&&(clearTimeout(z.current),z.current=null),L.valid&&!L.empty&&T.current&&(z.current=setTimeout(()=>{const V=new Map;let G=t,B=0;G=G.replace(/\{\{[^{}]+\}\}/g,re=>{const Q=`__VAR_${B++}__`;return V.set(Q,re),Q});let K=Mz(G);V.forEach((re,Q)=>{K=K.replace(Q,re)}),K!==t&&e(K)},500)),T.current=!L.valid,()=>{z.current&&clearTimeout(z.current)}),[L.valid,L.empty,t,e]),X.useEffect(()=>{E||v()},[E,v]);const F=X.useCallback((V,G)=>{const B=document.createElement("input");B.type="file",B.onchange=K=>{const re=K.target.files?.[0];if(!re)return;const Q=new FileReader;Q.onload=()=>{const I=Q.result.split(",")[1],N=n.find(q=>q.id===G);r(N?n.map(q=>q.id===N.id?{...q,data:I,mimeType:re.type,name:re.name}:q):[...n,{id:G,type:V,name:re.name,data:I,mimeType:re.type}])},Q.readAsDataURL(re)},B.click()},[n,r]),P=X.useCallback(V=>{const B=V.target.closest(".variable-chip");if(B){const K=B.dataset.variableType,re=B.dataset.variableId;if(K==="file_base64"||K==="file_dataurl")F(K,re),V.preventDefault(),V.stopPropagation();else if(K==="base64"){const Q=B.getBoundingClientRect(),I=n.find(N=>N.id===re);R(I?.data||""),k({variableKey:`${K}:${re}`,rect:Q}),V.preventDefault(),V.stopPropagation()}}else k(null)},[n,F]),Z=X.useCallback(V=>{const G=m(V);G&&(V==="file_base64"||V==="file_dataurl")&&setTimeout(()=>F(V,G),0)},[m,F]),se=X.useCallback(()=>{if(!w)return;const[V,G]=w.variableKey.split(":"),B=n.find(K=>K.id===G);r(B?n.map(K=>K.id===B.id?{...K,data:S}:K):[...n,{id:G,type:V,name:V,data:S}]),k(null),a.current?.focus()},[w,S,n,r]);X.useEffect(()=>{const V=B=>{B.key==="Escape"&&(_(!1),k(null))},G=B=>{l.current&&!l.current.contains(B.target)&&(_(!1),k(null))};return document.addEventListener("keydown",V),document.addEventListener("mousedown",G),()=>{document.removeEventListener("keydown",V),document.removeEventListener("mousedown",G)}},[_]);const me=X.useMemo(()=>{if(!w||!l.current)return{top:0,left:0};const V=l.current.getBoundingClientRect();return{top:w.rect.bottom-V.top+4,left:Math.max(0,w.rect.left-V.left)}},[w]);return C.jsxs("div",{ref:l,className:"flex flex-col h-full min-h-50 max-h-[60vh] relative overflow-hidden",children:[E?C.jsx("pre",{className:"flex-1 min-h-0 p-3 font-mono text-sm text-zinc-100 overflow-y-auto whitespace-pre-wrap wrap-break-word",children:$}):C.jsxs("div",{className:"flex-1 min-h-0 relative",children:[C.jsx("div",{ref:a,contentEditable:!0,suppressContentEditableWarning:!0,onInput:c,onPaste:f,onKeyDown:h,onClick:P,className:"h-full p-3 font-mono text-sm text-zinc-100 outline-none overflow-y-auto whitespace-pre-wrap wrap-break-word"}),!t&&i&&C.jsx("div",{className:"absolute top-3 left-3 font-mono text-sm text-zinc-500 pointer-events-none whitespace-pre-wrap",children:i})]}),C.jsxs("div",{className:"flex items-center justify-end gap-2 px-3 py-1.5 text-xs shrink-0",children:[C.jsx("button",{onClick:()=>M(!E),className:`transition-colors flex items-center gap-1 ${E?"text-blue-400 hover:text-blue-300":"text-zinc-500 hover:text-zinc-300"}`,title:E?"Show editor":"Show resolved XML",children:C.jsx(pE,{className:"w-3.5 h-3.5"})}),L.valid?C.jsx("span",{className:"text-emerald-500",children:"Valid XML"}):C.jsx("span",{className:"text-red-400",title:L.error,children:"Invalid XML"})]}),p&&C.jsx("div",{className:"fixed z-50 w-56 bg-zinc-800 border border-zinc-600 rounded-lg shadow-xl py-1",style:{top:y.top,left:y.left},children:Nz.map(V=>C.jsxs("button",{onClick:()=>Z(V.type),className:"w-full flex items-center gap-2 px-3 py-2 text-left hover:bg-zinc-700 transition-colors",children:[C.jsx("span",{className:"text-zinc-400",children:V.icon}),C.jsxs("div",{className:"flex-1 min-w-0",children:[C.jsx("div",{className:"text-sm text-zinc-200",children:V.label}),C.jsx("div",{className:"text-xs text-zinc-500",children:V.description})]})]},V.type))}),w&&(()=>{const[V]=w.variableKey.split(":");return C.jsx("div",{className:"absolute z-50 bg-zinc-800/95 border border-zinc-700/50 rounded shadow-lg p-1.5 w-44",style:me,children:V==="base64"?C.jsxs("div",{className:"flex gap-1",children:[C.jsx("input",{type:"text",value:S,onChange:G=>R(G.target.value),onKeyDown:G=>G.key==="Enter"&&se(),placeholder:"Text to encode...",className:"flex-1 min-w-0 px-1.5 py-0.5 text-xs bg-transparent text-zinc-200 rounded border-none focus:outline-none placeholder:text-zinc-500",autoFocus:!0}),C.jsx("button",{onClick:se,className:"p-1 text-zinc-400 hover:text-zinc-200 transition-colors",children:C.jsx(cE,{className:"w-3 h-3"})})]}):null})})()]})}const Ex=[{value:"none",label:"None"},{value:"json",label:"JSON"},{value:"xml",label:"XML"},{value:"form-urlencoded",label:"Form"},{value:"form-data",label:"Form Data"},{value:"binary",label:"Binary"},{value:"raw",label:"Raw"}];function bE(){return Math.random().toString(36).substring(2,9)}function zz(){return{id:bE(),enabled:!0,key:"",type:"text",value:"",file:null,fileName:""}}const Pz=["Accept","Accept-Charset","Accept-Encoding","Accept-Language","Authorization","Cache-Control","Connection","Content-Disposition","Content-Encoding","Content-Length","Content-Type","Cookie","Date","ETag","Expect","Forwarded","From","Host","If-Match","If-Modified-Since","If-None-Match","If-Range","If-Unmodified-Since","Max-Forwards","Origin","Pragma","Proxy-Authorization","Range","Referer","TE","Trailer","Transfer-Encoding","Upgrade","User-Agent","Via","Warning","X-Api-Key","X-Correlation-ID","X-Forwarded-For","X-Forwarded-Host","X-Forwarded-Proto","X-Request-ID","X-Requested-With"];function jz(){const t=dt.c(63),[e,n]=X.useState("body"),{request:r,setHeaders:i,setQuery:a,setBody:l,setVariables:c}=Ji(),f=r?.protocol??"rest";let h;t[0]!==r?.headers?(h=r?.headers??[],t[0]=r?.headers,t[1]=h):h=t[1];const m=h;let p;t[2]!==r?.query?(p=r?.query??[],t[2]=r?.query,t[3]=p):p=t[3];const _=p;let y;t[4]!==r?.body?(y=r?.body??{type:"none"},t[4]=r?.body,t[5]=y):y=t[5];const v=y;let w;t[6]!==r?.variables?(w=r?.variables??[],t[6]=r?.variables,t[7]=w):w=t[7];const k=w;let S,R;t[8]!==v.type||t[9]!==f||t[10]!==l?(S=()=>{f==="grpc"&&v.type!=="json"&&l({type:"json",content:""})},R=[f,v.type,l],t[8]=v.type,t[9]=f,t[10]=l,t[11]=S,t[12]=R):(S=t[11],R=t[12]),X.useEffect(S,R);let T;t[13]!==v.content||t[14]!==v.data||t[15]!==v.file||t[16]!==v.fileName||t[17]!==v.type||t[18]!==l?(T=re=>{e:switch(re){case"none":{l({type:"none"});break e}case"json":{l({type:"json",content:v.type==="json"?v.content:""});break e}case"xml":{l({type:"xml",content:v.type==="xml"?v.content:""});break e}case"raw":{l({type:"raw",content:v.type==="raw"?v.content:""});break e}case"form-urlencoded":{l({type:"form-urlencoded",data:v.type==="form-urlencoded"?v.data:[{id:bE(),enabled:!0,key:"",value:""}]});break e}case"form-data":{l({type:"form-data",data:v.type==="form-data"?v.data:[zz()]});break e}case"binary":l({type:"binary",file:v.type==="binary"?v.file:null,fileName:v.type==="binary"?v.fileName:""})}},t[13]=v.content,t[14]=v.data,t[15]=v.file,t[16]=v.fileName,t[17]=v.type,t[18]=l,t[19]=T):T=t[19];const z=T;let L;t[20]!==m||t[21]!==f||t[22]!==_?(L=f==="grpc"?[{id:"headers",label:"Headers",count:m.filter(Fz).length},{id:"body",label:"Body"}]:[{id:"params",label:"Params",count:_.filter(qz).length},{id:"headers",label:"Headers",count:m.filter($z).length},{id:"body",label:"Body"}],t[20]=m,t[21]=f,t[22]=_,t[23]=L):L=t[23];const E=L;let M,$,F,P,Z;if(t[24]!==e||t[25]!==v.type||t[26]!==z||t[27]!==f||t[28]!==E){const re=f==="grpc"?Ex.filter(Uz):Ex;let Q;e:{if(f==="grpc"&&e==="params"){Q="body";break e}Q=e}M=Q,F="space-y-3",P="flex items-center gap-2",t[34]!==M||t[35]!==E?(Z=C.jsx("div",{role:"tablist",className:"inline-flex gap-1",children:E.map(I=>C.jsxs("button",{role:"tab",onClick:()=>n(I.id),className:`px-2 py-1 text-[11px] font-medium rounded-md transition-all ${M===I.id?"bg-white dark:bg-white/10 text-neutral-800 dark:text-neutral-100 shadow-sm":"text-neutral-500 dark:text-neutral-400 hover:text-neutral-700 dark:hover:text-neutral-200 hover:bg-neutral-100 dark:hover:bg-white/5"}`,children:[I.label,I.count!==void 0&&I.count>0&&C.jsx("span",{className:"ml-1.5 px-1.5 py-0.5 text-[9px] bg-neutral-200 dark:bg-white/10 text-neutral-600 dark:text-neutral-300 rounded-full",children:I.count})]},I.id))}),t[34]=M,t[35]=E,t[36]=Z):Z=t[36],$=M==="body"&&re.length>1&&C.jsx("select",{value:v.type,onChange:I=>z(I.target.value),className:"h-6 px-2 text-[11px] font-medium bg-white dark:bg-white/10 text-neutral-800 dark:text-neutral-100 rounded-md shadow-sm border-0 focus:outline-none focus:ring-2 focus:ring-neutral-300 dark:focus:ring-white/20 cursor-pointer transition-all min-w-30",children:re.map(Bz)}),t[24]=e,t[25]=v.type,t[26]=z,t[27]=f,t[28]=E,t[29]=M,t[30]=$,t[31]=F,t[32]=P,t[33]=Z}else M=t[29],$=t[30],F=t[31],P=t[32],Z=t[33];let se;t[37]!==$||t[38]!==P||t[39]!==Z?(se=C.jsxs("div",{className:P,children:[Z,$]}),t[37]=$,t[38]=P,t[39]=Z,t[40]=se):se=t[40];let me;t[41]!==M||t[42]!==_||t[43]!==a?(me=M==="params"&&C.jsx(Qp,{items:_,onChange:a,keyPlaceholder:"Parameter",valuePlaceholder:"Value"}),t[41]=M,t[42]=_,t[43]=a,t[44]=me):me=t[44];let V;t[45]!==M||t[46]!==m||t[47]!==i?(V=M==="headers"&&C.jsx(Qp,{items:m,onChange:i,keyPlaceholder:"Header",valuePlaceholder:"Value",keySuggestions:Pz}),t[45]=M,t[46]=m,t[47]=i,t[48]=V):V=t[48];let G;t[49]!==v||t[50]!==M||t[51]!==l||t[52]!==c||t[53]!==k?(G=M==="body"&&v.type!=="none"&&C.jsxs(C.Fragment,{children:[v.type==="json"&&C.jsx(Iz,{value:v.content,onChange:re=>l({...v,content:re}),variables:k,onVariablesChange:c,placeholder:`{
  "key": "value"
}`}),v.type==="xml"&&C.jsx(Lz,{value:v.content,onChange:re=>l({...v,content:re}),variables:k,onVariablesChange:c,placeholder:`<?xml version="1.0" encoding="UTF-8"?>
<root>
  <element>value</element>
</root>`}),v.type==="raw"&&C.jsx(xz,{value:v.content,onChange:re=>l({...v,content:re}),language:"text",placeholder:"Enter raw body content"}),v.type==="form-urlencoded"&&C.jsx(Qp,{items:v.data,onChange:re=>l({...v,data:re}),keyPlaceholder:"Field",valuePlaceholder:"Value"}),v.type==="form-data"&&C.jsx(yz,{items:v.data,onChange:re=>l({...v,data:re}),keyPlaceholder:"Field",valuePlaceholder:"Value"}),v.type==="binary"&&C.jsx(bz,{file:v.file,fileName:v.fileName,onFileChange:(re,Q)=>l({...v,file:re,fileName:Q})})]}),t[49]=v,t[50]=M,t[51]=l,t[52]=c,t[53]=k,t[54]=G):G=t[54];let B;t[55]!==me||t[56]!==V||t[57]!==G?(B=C.jsxs("div",{children:[me,V,G]}),t[55]=me,t[56]=V,t[57]=G,t[58]=B):B=t[58];let K;return t[59]!==F||t[60]!==se||t[61]!==B?(K=C.jsxs("div",{className:F,children:[se,B]}),t[59]=F,t[60]=se,t[61]=B,t[62]=K):K=t[62],K}function Bz(t){return C.jsx("option",{value:t.value,className:"bg-white dark:bg-[#1a1a1a]",children:t.label},t.value)}function Uz(t){return t.value==="json"}function $z(t){return t.key}function qz(t){return t.key}function Fz(t){return t.key}const Vz="modulepreload",Hz=function(t){return"/"+t},kx={},D=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){let h=function(m){return Promise.all(m.map(p=>Promise.resolve(p).then(_=>({status:"fulfilled",value:_}),_=>({status:"rejected",reason:_}))))};var l=h;document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),f=c?.nonce||c?.getAttribute("nonce");i=h(n.map(m=>{if(m=Hz(m),m in kx)return;kx[m]=!0;const p=m.endsWith(".css"),_=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${_}`))return;const y=document.createElement("link");if(y.rel=p?"stylesheet":Vz,p||(y.as="script"),y.crossOrigin="",y.href=m,f&&y.setAttribute("nonce",f),document.head.appendChild(y),p)return new Promise((v,w)=>{y.addEventListener("load",v),y.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${m}`)))})}))}function a(c){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=c,window.dispatchEvent(f),!f.defaultPrevented)throw c}return i.then(c=>{for(const f of c||[])f.status==="rejected"&&a(f.reason);return e().catch(a)})};let It=class extends Error{constructor(e){super(e),this.name="ShikiError"}};function Gz(t){return dy(t)}function dy(t){return Array.isArray(t)?Kz(t):t instanceof RegExp?t:typeof t=="object"?Zz(t):t}function Kz(t){let e=[];for(let n=0,r=t.length;n<r;n++)e[n]=dy(t[n]);return e}function Zz(t){let e={};for(let n in t)e[n]=dy(t[n]);return e}function vE(t,...e){return e.forEach(n=>{for(let r in n)t[r]=n[r]}),t}function wE(t){const e=~t.lastIndexOf("/")||~t.lastIndexOf("\\");return e===0?t:~e===t.length-1?wE(t.substring(0,t.length-1)):t.substr(~e+1)}var Jp=/\$(\d+)|\${(\d+):\/(downcase|upcase)}/g,xc=class{static hasCaptures(t){return t===null?!1:(Jp.lastIndex=0,Jp.test(t))}static replaceCaptures(t,e,n){return t.replace(Jp,(r,i,a,l)=>{let c=n[parseInt(i||a,10)];if(c){let f=e.substring(c.start,c.end);for(;f[0]===".";)f=f.substring(1);switch(l){case"downcase":return f.toLowerCase();case"upcase":return f.toUpperCase();default:return f}}else return r})}};function xE(t,e){return t<e?-1:t>e?1:0}function SE(t,e){if(t===null&&e===null)return 0;if(!t)return-1;if(!e)return 1;let n=t.length,r=e.length;if(n===r){for(let i=0;i<n;i++){let a=xE(t[i],e[i]);if(a!==0)return a}return 0}return n-r}function Cx(t){return!!(/^#[0-9a-f]{6}$/i.test(t)||/^#[0-9a-f]{8}$/i.test(t)||/^#[0-9a-f]{3}$/i.test(t)||/^#[0-9a-f]{4}$/i.test(t))}function EE(t){return t.replace(/[\-\\\{\}\*\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&")}var kE=class{constructor(t){this.fn=t}cache=new Map;get(t){if(this.cache.has(t))return this.cache.get(t);const e=this.fn(t);return this.cache.set(t,e),e}},mf=class{constructor(t,e,n){this._colorMap=t,this._defaults=e,this._root=n}static createFromRawTheme(t,e){return this.createFromParsedTheme(Yz(t),e)}static createFromParsedTheme(t,e){return Wz(t,e)}_cachedMatchRoot=new kE(t=>this._root.match(t));getColorMap(){return this._colorMap.getColorMap()}getDefaults(){return this._defaults}match(t){if(t===null)return this._defaults;const e=t.scopeName,r=this._cachedMatchRoot.get(e).find(i=>Qz(t.parent,i.parentScopes));return r?new CE(r.fontStyle,r.foreground,r.background):null}},Yp=class Vc{constructor(e,n){this.parent=e,this.scopeName=n}static push(e,n){for(const r of n)e=new Vc(e,r);return e}static from(...e){let n=null;for(let r=0;r<e.length;r++)n=new Vc(n,e[r]);return n}push(e){return new Vc(this,e)}getSegments(){let e=this;const n=[];for(;e;)n.push(e.scopeName),e=e.parent;return n.reverse(),n}toString(){return this.getSegments().join(" ")}extends(e){return this===e?!0:this.parent===null?!1:this.parent.extends(e)}getExtensionIfDefined(e){const n=[];let r=this;for(;r&&r!==e;)n.push(r.scopeName),r=r.parent;return r===e?n.reverse():void 0}};function Qz(t,e){if(e.length===0)return!0;for(let n=0;n<e.length;n++){let r=e[n],i=!1;if(r===">"){if(n===e.length-1)return!1;r=e[++n],i=!0}for(;t&&!Jz(t.scopeName,r);){if(i)return!1;t=t.parent}if(!t)return!1;t=t.parent}return!0}function Jz(t,e){return e===t||t.startsWith(e)&&t[e.length]==="."}var CE=class{constructor(t,e,n){this.fontStyle=t,this.foregroundId=e,this.backgroundId=n}};function Yz(t){if(!t)return[];if(!t.settings||!Array.isArray(t.settings))return[];let e=t.settings,n=[],r=0;for(let i=0,a=e.length;i<a;i++){let l=e[i];if(!l.settings)continue;let c;if(typeof l.scope=="string"){let p=l.scope;p=p.replace(/^[,]+/,""),p=p.replace(/[,]+$/,""),c=p.split(",")}else Array.isArray(l.scope)?c=l.scope:c=[""];let f=-1;if(typeof l.settings.fontStyle=="string"){f=0;let p=l.settings.fontStyle.split(" ");for(let _=0,y=p.length;_<y;_++)switch(p[_]){case"italic":f=f|1;break;case"bold":f=f|2;break;case"underline":f=f|4;break;case"strikethrough":f=f|8;break}}let h=null;typeof l.settings.foreground=="string"&&Cx(l.settings.foreground)&&(h=l.settings.foreground);let m=null;typeof l.settings.background=="string"&&Cx(l.settings.background)&&(m=l.settings.background);for(let p=0,_=c.length;p<_;p++){let v=c[p].trim().split(" "),w=v[v.length-1],k=null;v.length>1&&(k=v.slice(0,v.length-1),k.reverse()),n[r++]=new Xz(w,k,i,f,h,m)}}return n}var Xz=class{constructor(t,e,n,r,i,a){this.scope=t,this.parentScopes=e,this.index=n,this.fontStyle=r,this.foreground=i,this.background=a}},mn=(t=>(t[t.NotSet=-1]="NotSet",t[t.None=0]="None",t[t.Italic=1]="Italic",t[t.Bold=2]="Bold",t[t.Underline=4]="Underline",t[t.Strikethrough=8]="Strikethrough",t))(mn||{});function Wz(t,e){t.sort((f,h)=>{let m=xE(f.scope,h.scope);return m!==0||(m=SE(f.parentScopes,h.parentScopes),m!==0)?m:f.index-h.index});let n=0,r="#000000",i="#ffffff";for(;t.length>=1&&t[0].scope==="";){let f=t.shift();f.fontStyle!==-1&&(n=f.fontStyle),f.foreground!==null&&(r=f.foreground),f.background!==null&&(i=f.background)}let a=new e4(e),l=new CE(n,a.getId(r),a.getId(i)),c=new n4(new rg(0,null,-1,0,0),[]);for(let f=0,h=t.length;f<h;f++){let m=t[f];c.insert(0,m.scope,m.parentScopes,m.fontStyle,a.getId(m.foreground),a.getId(m.background))}return new mf(a,l,c)}var e4=class{_isFrozen;_lastColorId;_id2color;_color2id;constructor(t){if(this._lastColorId=0,this._id2color=[],this._color2id=Object.create(null),Array.isArray(t)){this._isFrozen=!0;for(let e=0,n=t.length;e<n;e++)this._color2id[t[e]]=e,this._id2color[e]=t[e]}else this._isFrozen=!1}getId(t){if(t===null)return 0;t=t.toUpperCase();let e=this._color2id[t];if(e)return e;if(this._isFrozen)throw new Error(`Missing color in color map - ${t}`);return e=++this._lastColorId,this._color2id[t]=e,this._id2color[e]=t,e}getColorMap(){return this._id2color.slice(0)}},t4=Object.freeze([]),rg=class TE{scopeDepth;parentScopes;fontStyle;foreground;background;constructor(e,n,r,i,a){this.scopeDepth=e,this.parentScopes=n||t4,this.fontStyle=r,this.foreground=i,this.background=a}clone(){return new TE(this.scopeDepth,this.parentScopes,this.fontStyle,this.foreground,this.background)}static cloneArr(e){let n=[];for(let r=0,i=e.length;r<i;r++)n[r]=e[r].clone();return n}acceptOverwrite(e,n,r,i){this.scopeDepth>e?console.log("how did this happen?"):this.scopeDepth=e,n!==-1&&(this.fontStyle=n),r!==0&&(this.foreground=r),i!==0&&(this.background=i)}},n4=class ig{constructor(e,n=[],r={}){this._mainRule=e,this._children=r,this._rulesWithParentScopes=n}_rulesWithParentScopes;static _cmpBySpecificity(e,n){if(e.scopeDepth!==n.scopeDepth)return n.scopeDepth-e.scopeDepth;let r=0,i=0;for(;e.parentScopes[r]===">"&&r++,n.parentScopes[i]===">"&&i++,!(r>=e.parentScopes.length||i>=n.parentScopes.length);){const a=n.parentScopes[i].length-e.parentScopes[r].length;if(a!==0)return a;r++,i++}return n.parentScopes.length-e.parentScopes.length}match(e){if(e!==""){let r=e.indexOf("."),i,a;if(r===-1?(i=e,a=""):(i=e.substring(0,r),a=e.substring(r+1)),this._children.hasOwnProperty(i))return this._children[i].match(a)}const n=this._rulesWithParentScopes.concat(this._mainRule);return n.sort(ig._cmpBySpecificity),n}insert(e,n,r,i,a,l){if(n===""){this._doInsertHere(e,r,i,a,l);return}let c=n.indexOf("."),f,h;c===-1?(f=n,h=""):(f=n.substring(0,c),h=n.substring(c+1));let m;this._children.hasOwnProperty(f)?m=this._children[f]:(m=new ig(this._mainRule.clone(),rg.cloneArr(this._rulesWithParentScopes)),this._children[f]=m),m.insert(e+1,h,r,i,a,l)}_doInsertHere(e,n,r,i,a){if(n===null){this._mainRule.acceptOverwrite(e,r,i,a);return}for(let l=0,c=this._rulesWithParentScopes.length;l<c;l++){let f=this._rulesWithParentScopes[l];if(SE(f.parentScopes,n)===0){f.acceptOverwrite(e,r,i,a);return}}r===-1&&(r=this._mainRule.fontStyle),i===0&&(i=this._mainRule.foreground),a===0&&(a=this._mainRule.background),this._rulesWithParentScopes.push(new rg(e,n,r,i,a))}},Va=class hr{static toBinaryStr(e){return e.toString(2).padStart(32,"0")}static print(e){const n=hr.getLanguageId(e),r=hr.getTokenType(e),i=hr.getFontStyle(e),a=hr.getForeground(e),l=hr.getBackground(e);console.log({languageId:n,tokenType:r,fontStyle:i,foreground:a,background:l})}static getLanguageId(e){return(e&255)>>>0}static getTokenType(e){return(e&768)>>>8}static containsBalancedBrackets(e){return(e&1024)!==0}static getFontStyle(e){return(e&30720)>>>11}static getForeground(e){return(e&16744448)>>>15}static getBackground(e){return(e&4278190080)>>>24}static set(e,n,r,i,a,l,c){let f=hr.getLanguageId(e),h=hr.getTokenType(e),m=hr.containsBalancedBrackets(e)?1:0,p=hr.getFontStyle(e),_=hr.getForeground(e),y=hr.getBackground(e);return n!==0&&(f=n),r!==8&&(h=r),i!==null&&(m=i?1:0),a!==-1&&(p=a),l!==0&&(_=l),c!==0&&(y=c),(f<<0|h<<8|m<<10|p<<11|_<<15|y<<24)>>>0}};function gf(t,e){const n=[],r=r4(t);let i=r.next();for(;i!==null;){let f=0;if(i.length===2&&i.charAt(1)===":"){switch(i.charAt(0)){case"R":f=1;break;case"L":f=-1;break;default:console.log(`Unknown priority ${i} in scope selector`)}i=r.next()}let h=l();if(n.push({matcher:h,priority:f}),i!==",")break;i=r.next()}return n;function a(){if(i==="-"){i=r.next();const f=a();return h=>!!f&&!f(h)}if(i==="("){i=r.next();const f=c();return i===")"&&(i=r.next()),f}if(Tx(i)){const f=[];do f.push(i),i=r.next();while(Tx(i));return h=>e(f,h)}return null}function l(){const f=[];let h=a();for(;h;)f.push(h),h=a();return m=>f.every(p=>p(m))}function c(){const f=[];let h=l();for(;h&&(f.push(h),i==="|"||i===",");){do i=r.next();while(i==="|"||i===",");h=l()}return m=>f.some(p=>p(m))}}function Tx(t){return!!t&&!!t.match(/[\w\.:]+/)}function r4(t){let e=/([LR]:|[\w\.:][\w\.:\-]*|[\,\|\-\(\)])/g,n=e.exec(t);return{next:()=>{if(!n)return null;const r=n[0];return n=e.exec(t),r}}}function AE(t){typeof t.dispose=="function"&&t.dispose()}var Ll=class{constructor(t){this.scopeName=t}toKey(){return this.scopeName}},i4=class{constructor(t,e){this.scopeName=t,this.ruleName=e}toKey(){return`${this.scopeName}#${this.ruleName}`}},s4=class{_references=[];_seenReferenceKeys=new Set;get references(){return this._references}visitedRule=new Set;add(t){const e=t.toKey();this._seenReferenceKeys.has(e)||(this._seenReferenceKeys.add(e),this._references.push(t))}},a4=class{constructor(t,e){this.repo=t,this.initialScopeName=e,this.seenFullScopeRequests.add(this.initialScopeName),this.Q=[new Ll(this.initialScopeName)]}seenFullScopeRequests=new Set;seenPartialScopeRequests=new Set;Q;processQueue(){const t=this.Q;this.Q=[];const e=new s4;for(const n of t)o4(n,this.initialScopeName,this.repo,e);for(const n of e.references)if(n instanceof Ll){if(this.seenFullScopeRequests.has(n.scopeName))continue;this.seenFullScopeRequests.add(n.scopeName),this.Q.push(n)}else{if(this.seenFullScopeRequests.has(n.scopeName)||this.seenPartialScopeRequests.has(n.toKey()))continue;this.seenPartialScopeRequests.add(n.toKey()),this.Q.push(n)}}};function o4(t,e,n,r){const i=n.lookup(t.scopeName);if(!i){if(t.scopeName===e)throw new Error(`No grammar provided for <${e}>`);return}const a=n.lookup(e);t instanceof Ll?Hc({baseGrammar:a,selfGrammar:i},r):sg(t.ruleName,{baseGrammar:a,selfGrammar:i,repository:i.repository},r);const l=n.injections(t.scopeName);if(l)for(const c of l)r.add(new Ll(c))}function sg(t,e,n){if(e.repository&&e.repository[t]){const r=e.repository[t];yf([r],e,n)}}function Hc(t,e){t.selfGrammar.patterns&&Array.isArray(t.selfGrammar.patterns)&&yf(t.selfGrammar.patterns,{...t,repository:t.selfGrammar.repository},e),t.selfGrammar.injections&&yf(Object.values(t.selfGrammar.injections),{...t,repository:t.selfGrammar.repository},e)}function yf(t,e,n){for(const r of t){if(n.visitedRule.has(r))continue;n.visitedRule.add(r);const i=r.repository?vE({},e.repository,r.repository):e.repository;Array.isArray(r.patterns)&&yf(r.patterns,{...e,repository:i},n);const a=r.include;if(!a)continue;const l=RE(a);switch(l.kind){case 0:Hc({...e,selfGrammar:e.baseGrammar},n);break;case 1:Hc(e,n);break;case 2:sg(l.ruleName,{...e,repository:i},n);break;case 3:case 4:const c=l.scopeName===e.selfGrammar.scopeName?e.selfGrammar:l.scopeName===e.baseGrammar.scopeName?e.baseGrammar:void 0;if(c){const f={baseGrammar:e.baseGrammar,selfGrammar:c,repository:i};l.kind===4?sg(l.ruleName,f,n):Hc(f,n)}else l.kind===4?n.add(new i4(l.scopeName,l.ruleName)):n.add(new Ll(l.scopeName));break}}}var l4=class{kind=0},u4=class{kind=1},c4=class{constructor(t){this.ruleName=t}kind=2},f4=class{constructor(t){this.scopeName=t}kind=3},h4=class{constructor(t,e){this.scopeName=t,this.ruleName=e}kind=4};function RE(t){if(t==="$base")return new l4;if(t==="$self")return new u4;const e=t.indexOf("#");if(e===-1)return new f4(t);if(e===0)return new c4(t.substring(1));{const n=t.substring(0,e),r=t.substring(e+1);return new h4(n,r)}}var d4=/\\(\d+)/,Ax=/\\(\d+)/g,p4=-1,OE=-2;var Zl=class{$location;id;_nameIsCapturing;_name;_contentNameIsCapturing;_contentName;constructor(t,e,n,r){this.$location=t,this.id=e,this._name=n||null,this._nameIsCapturing=xc.hasCaptures(this._name),this._contentName=r||null,this._contentNameIsCapturing=xc.hasCaptures(this._contentName)}get debugName(){const t=this.$location?`${wE(this.$location.filename)}:${this.$location.line}`:"unknown";return`${this.constructor.name}#${this.id} @ ${t}`}getName(t,e){return!this._nameIsCapturing||this._name===null||t===null||e===null?this._name:xc.replaceCaptures(this._name,t,e)}getContentName(t,e){return!this._contentNameIsCapturing||this._contentName===null?this._contentName:xc.replaceCaptures(this._contentName,t,e)}},m4=class extends Zl{retokenizeCapturedWithRuleId;constructor(t,e,n,r,i){super(t,e,n,r),this.retokenizeCapturedWithRuleId=i}dispose(){}collectPatterns(t,e){throw new Error("Not supported!")}compile(t,e){throw new Error("Not supported!")}compileAG(t,e,n,r){throw new Error("Not supported!")}},g4=class extends Zl{_match;captures;_cachedCompiledPatterns;constructor(t,e,n,r,i){super(t,e,n,null),this._match=new zl(r,this.id),this.captures=i,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}get debugMatchRegExp(){return`${this._match.source}`}collectPatterns(t,e){e.push(this._match)}compile(t,e){return this._getCachedCompiledPatterns(t).compile(t)}compileAG(t,e,n,r){return this._getCachedCompiledPatterns(t).compileAG(t,n,r)}_getCachedCompiledPatterns(t){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new Pl,this.collectPatterns(t,this._cachedCompiledPatterns)),this._cachedCompiledPatterns}},Rx=class extends Zl{hasMissingPatterns;patterns;_cachedCompiledPatterns;constructor(t,e,n,r,i){super(t,e,n,r),this.patterns=i.patterns,this.hasMissingPatterns=i.hasMissingPatterns,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}collectPatterns(t,e){for(const n of this.patterns)t.getRule(n).collectPatterns(t,e)}compile(t,e){return this._getCachedCompiledPatterns(t).compile(t)}compileAG(t,e,n,r){return this._getCachedCompiledPatterns(t).compileAG(t,n,r)}_getCachedCompiledPatterns(t){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new Pl,this.collectPatterns(t,this._cachedCompiledPatterns)),this._cachedCompiledPatterns}},ag=class extends Zl{_begin;beginCaptures;_end;endHasBackReferences;endCaptures;applyEndPatternLast;hasMissingPatterns;patterns;_cachedCompiledPatterns;constructor(t,e,n,r,i,a,l,c,f,h){super(t,e,n,r),this._begin=new zl(i,this.id),this.beginCaptures=a,this._end=new zl(l||"",-1),this.endHasBackReferences=this._end.hasBackReferences,this.endCaptures=c,this.applyEndPatternLast=f||!1,this.patterns=h.patterns,this.hasMissingPatterns=h.hasMissingPatterns,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}get debugBeginRegExp(){return`${this._begin.source}`}get debugEndRegExp(){return`${this._end.source}`}getEndWithResolvedBackReferences(t,e){return this._end.resolveBackReferences(t,e)}collectPatterns(t,e){e.push(this._begin)}compile(t,e){return this._getCachedCompiledPatterns(t,e).compile(t)}compileAG(t,e,n,r){return this._getCachedCompiledPatterns(t,e).compileAG(t,n,r)}_getCachedCompiledPatterns(t,e){if(!this._cachedCompiledPatterns){this._cachedCompiledPatterns=new Pl;for(const n of this.patterns)t.getRule(n).collectPatterns(t,this._cachedCompiledPatterns);this.applyEndPatternLast?this._cachedCompiledPatterns.push(this._end.hasBackReferences?this._end.clone():this._end):this._cachedCompiledPatterns.unshift(this._end.hasBackReferences?this._end.clone():this._end)}return this._end.hasBackReferences&&(this.applyEndPatternLast?this._cachedCompiledPatterns.setSource(this._cachedCompiledPatterns.length()-1,e):this._cachedCompiledPatterns.setSource(0,e)),this._cachedCompiledPatterns}},_f=class extends Zl{_begin;beginCaptures;whileCaptures;_while;whileHasBackReferences;hasMissingPatterns;patterns;_cachedCompiledPatterns;_cachedCompiledWhilePatterns;constructor(t,e,n,r,i,a,l,c,f){super(t,e,n,r),this._begin=new zl(i,this.id),this.beginCaptures=a,this.whileCaptures=c,this._while=new zl(l,OE),this.whileHasBackReferences=this._while.hasBackReferences,this.patterns=f.patterns,this.hasMissingPatterns=f.hasMissingPatterns,this._cachedCompiledPatterns=null,this._cachedCompiledWhilePatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null),this._cachedCompiledWhilePatterns&&(this._cachedCompiledWhilePatterns.dispose(),this._cachedCompiledWhilePatterns=null)}get debugBeginRegExp(){return`${this._begin.source}`}get debugWhileRegExp(){return`${this._while.source}`}getWhileWithResolvedBackReferences(t,e){return this._while.resolveBackReferences(t,e)}collectPatterns(t,e){e.push(this._begin)}compile(t,e){return this._getCachedCompiledPatterns(t).compile(t)}compileAG(t,e,n,r){return this._getCachedCompiledPatterns(t).compileAG(t,n,r)}_getCachedCompiledPatterns(t){if(!this._cachedCompiledPatterns){this._cachedCompiledPatterns=new Pl;for(const e of this.patterns)t.getRule(e).collectPatterns(t,this._cachedCompiledPatterns)}return this._cachedCompiledPatterns}compileWhile(t,e){return this._getCachedCompiledWhilePatterns(t,e).compile(t)}compileWhileAG(t,e,n,r){return this._getCachedCompiledWhilePatterns(t,e).compileAG(t,n,r)}_getCachedCompiledWhilePatterns(t,e){return this._cachedCompiledWhilePatterns||(this._cachedCompiledWhilePatterns=new Pl,this._cachedCompiledWhilePatterns.push(this._while.hasBackReferences?this._while.clone():this._while)),this._while.hasBackReferences&&this._cachedCompiledWhilePatterns.setSource(0,e||""),this._cachedCompiledWhilePatterns}},IE=class dn{static createCaptureRule(e,n,r,i,a){return e.registerRule(l=>new m4(n,l,r,i,a))}static getCompiledRuleId(e,n,r){return e.id||n.registerRule(i=>{if(e.id=i,e.match)return new g4(e.$vscodeTextmateLocation,e.id,e.name,e.match,dn._compileCaptures(e.captures,n,r));if(typeof e.begin>"u"){e.repository&&(r=vE({},r,e.repository));let a=e.patterns;return typeof a>"u"&&e.include&&(a=[{include:e.include}]),new Rx(e.$vscodeTextmateLocation,e.id,e.name,e.contentName,dn._compilePatterns(a,n,r))}return e.while?new _f(e.$vscodeTextmateLocation,e.id,e.name,e.contentName,e.begin,dn._compileCaptures(e.beginCaptures||e.captures,n,r),e.while,dn._compileCaptures(e.whileCaptures||e.captures,n,r),dn._compilePatterns(e.patterns,n,r)):new ag(e.$vscodeTextmateLocation,e.id,e.name,e.contentName,e.begin,dn._compileCaptures(e.beginCaptures||e.captures,n,r),e.end,dn._compileCaptures(e.endCaptures||e.captures,n,r),e.applyEndPatternLast,dn._compilePatterns(e.patterns,n,r))}),e.id}static _compileCaptures(e,n,r){let i=[];if(e){let a=0;for(const l in e){if(l==="$vscodeTextmateLocation")continue;const c=parseInt(l,10);c>a&&(a=c)}for(let l=0;l<=a;l++)i[l]=null;for(const l in e){if(l==="$vscodeTextmateLocation")continue;const c=parseInt(l,10);let f=0;e[l].patterns&&(f=dn.getCompiledRuleId(e[l],n,r)),i[c]=dn.createCaptureRule(n,e[l].$vscodeTextmateLocation,e[l].name,e[l].contentName,f)}}return i}static _compilePatterns(e,n,r){let i=[];if(e)for(let a=0,l=e.length;a<l;a++){const c=e[a];let f=-1;if(c.include){const h=RE(c.include);switch(h.kind){case 0:case 1:f=dn.getCompiledRuleId(r[c.include],n,r);break;case 2:let m=r[h.ruleName];m&&(f=dn.getCompiledRuleId(m,n,r));break;case 3:case 4:const p=h.scopeName,_=h.kind===4?h.ruleName:null,y=n.getExternalGrammar(p,r);if(y)if(_){let v=y.repository[_];v&&(f=dn.getCompiledRuleId(v,n,y.repository))}else f=dn.getCompiledRuleId(y.repository.$self,n,y.repository);break}}else f=dn.getCompiledRuleId(c,n,r);if(f!==-1){const h=n.getRule(f);let m=!1;if((h instanceof Rx||h instanceof ag||h instanceof _f)&&h.hasMissingPatterns&&h.patterns.length===0&&(m=!0),m)continue;i.push(f)}}return{patterns:i,hasMissingPatterns:(e?e.length:0)!==i.length}}},zl=class NE{source;ruleId;hasAnchor;hasBackReferences;_anchorCache;constructor(e,n){if(e&&typeof e=="string"){const r=e.length;let i=0,a=[],l=!1;for(let c=0;c<r;c++)if(e.charAt(c)==="\\"&&c+1<r){const h=e.charAt(c+1);h==="z"?(a.push(e.substring(i,c)),a.push("$(?!\\n)(?<!\\n)"),i=c+2):(h==="A"||h==="G")&&(l=!0),c++}this.hasAnchor=l,i===0?this.source=e:(a.push(e.substring(i,r)),this.source=a.join(""))}else this.hasAnchor=!1,this.source=e;this.hasAnchor?this._anchorCache=this._buildAnchorCache():this._anchorCache=null,this.ruleId=n,typeof this.source=="string"?this.hasBackReferences=d4.test(this.source):this.hasBackReferences=!1}clone(){return new NE(this.source,this.ruleId)}setSource(e){this.source!==e&&(this.source=e,this.hasAnchor&&(this._anchorCache=this._buildAnchorCache()))}resolveBackReferences(e,n){if(typeof this.source!="string")throw new Error("This method should only be called if the source is a string");let r=n.map(i=>e.substring(i.start,i.end));return Ax.lastIndex=0,this.source.replace(Ax,(i,a)=>EE(r[parseInt(a,10)]||""))}_buildAnchorCache(){if(typeof this.source!="string")throw new Error("This method should only be called if the source is a string");let e=[],n=[],r=[],i=[],a,l,c,f;for(a=0,l=this.source.length;a<l;a++)c=this.source.charAt(a),e[a]=c,n[a]=c,r[a]=c,i[a]=c,c==="\\"&&a+1<l&&(f=this.source.charAt(a+1),f==="A"?(e[a+1]="",n[a+1]="",r[a+1]="A",i[a+1]="A"):f==="G"?(e[a+1]="",n[a+1]="G",r[a+1]="",i[a+1]="G"):(e[a+1]=f,n[a+1]=f,r[a+1]=f,i[a+1]=f),a++);return{A0_G0:e.join(""),A0_G1:n.join(""),A1_G0:r.join(""),A1_G1:i.join("")}}resolveAnchors(e,n){return!this.hasAnchor||!this._anchorCache||typeof this.source!="string"?this.source:e?n?this._anchorCache.A1_G1:this._anchorCache.A1_G0:n?this._anchorCache.A0_G1:this._anchorCache.A0_G0}},Pl=class{_items;_hasAnchors;_cached;_anchorCache;constructor(){this._items=[],this._hasAnchors=!1,this._cached=null,this._anchorCache={A0_G0:null,A0_G1:null,A1_G0:null,A1_G1:null}}dispose(){this._disposeCaches()}_disposeCaches(){this._cached&&(this._cached.dispose(),this._cached=null),this._anchorCache.A0_G0&&(this._anchorCache.A0_G0.dispose(),this._anchorCache.A0_G0=null),this._anchorCache.A0_G1&&(this._anchorCache.A0_G1.dispose(),this._anchorCache.A0_G1=null),this._anchorCache.A1_G0&&(this._anchorCache.A1_G0.dispose(),this._anchorCache.A1_G0=null),this._anchorCache.A1_G1&&(this._anchorCache.A1_G1.dispose(),this._anchorCache.A1_G1=null)}push(t){this._items.push(t),this._hasAnchors=this._hasAnchors||t.hasAnchor}unshift(t){this._items.unshift(t),this._hasAnchors=this._hasAnchors||t.hasAnchor}length(){return this._items.length}setSource(t,e){this._items[t].source!==e&&(this._disposeCaches(),this._items[t].setSource(e))}compile(t){if(!this._cached){let e=this._items.map(n=>n.source);this._cached=new Ox(t,e,this._items.map(n=>n.ruleId))}return this._cached}compileAG(t,e,n){return this._hasAnchors?e?n?(this._anchorCache.A1_G1||(this._anchorCache.A1_G1=this._resolveAnchors(t,e,n)),this._anchorCache.A1_G1):(this._anchorCache.A1_G0||(this._anchorCache.A1_G0=this._resolveAnchors(t,e,n)),this._anchorCache.A1_G0):n?(this._anchorCache.A0_G1||(this._anchorCache.A0_G1=this._resolveAnchors(t,e,n)),this._anchorCache.A0_G1):(this._anchorCache.A0_G0||(this._anchorCache.A0_G0=this._resolveAnchors(t,e,n)),this._anchorCache.A0_G0):this.compile(t)}_resolveAnchors(t,e,n){let r=this._items.map(i=>i.resolveAnchors(e,n));return new Ox(t,r,this._items.map(i=>i.ruleId))}},Ox=class{constructor(t,e,n){this.regExps=e,this.rules=n,this.scanner=t.createOnigScanner(e)}scanner;dispose(){typeof this.scanner.dispose=="function"&&this.scanner.dispose()}toString(){const t=[];for(let e=0,n=this.rules.length;e<n;e++)t.push("   - "+this.rules[e]+": "+this.regExps[e]);return t.join(`
`)}findNextMatchSync(t,e,n){const r=this.scanner.findNextMatchSync(t,e,n);return r?{ruleId:this.rules[r.index],captureIndices:r.captureIndices}:null}},Xp=class{constructor(t,e){this.languageId=t,this.tokenType=e}},y4=class og{_defaultAttributes;_embeddedLanguagesMatcher;constructor(e,n){this._defaultAttributes=new Xp(e,8),this._embeddedLanguagesMatcher=new _4(Object.entries(n||{}))}getDefaultAttributes(){return this._defaultAttributes}getBasicScopeAttributes(e){return e===null?og._NULL_SCOPE_METADATA:this._getBasicScopeAttributes.get(e)}static _NULL_SCOPE_METADATA=new Xp(0,0);_getBasicScopeAttributes=new kE(e=>{const n=this._scopeToLanguage(e),r=this._toStandardTokenType(e);return new Xp(n,r)});_scopeToLanguage(e){return this._embeddedLanguagesMatcher.match(e)||0}_toStandardTokenType(e){const n=e.match(og.STANDARD_TOKEN_TYPE_REGEXP);if(!n)return 8;switch(n[1]){case"comment":return 1;case"string":return 2;case"regex":return 3;case"meta.embedded":return 0}throw new Error("Unexpected match for standard token type!")}static STANDARD_TOKEN_TYPE_REGEXP=/\b(comment|string|regex|meta\.embedded)\b/},_4=class{values;scopesRegExp;constructor(t){if(t.length===0)this.values=null,this.scopesRegExp=null;else{this.values=new Map(t);const e=t.map(([n,r])=>EE(n));e.sort(),e.reverse(),this.scopesRegExp=new RegExp(`^((${e.join(")|(")}))($|\\.)`,"")}}match(t){if(!this.scopesRegExp)return;const e=t.match(this.scopesRegExp);if(e)return this.values.get(e[1])}},Ix=class{constructor(t,e){this.stack=t,this.stoppedEarly=e}};function DE(t,e,n,r,i,a,l,c){const f=e.content.length;let h=!1,m=-1;if(l){const y=b4(t,e,n,r,i,a);i=y.stack,r=y.linePos,n=y.isFirstLine,m=y.anchorPosition}const p=Date.now();for(;!h;){if(c!==0&&Date.now()-p>c)return new Ix(i,!0);_()}return new Ix(i,!1);function _(){const y=v4(t,e,n,r,i,m);if(!y){a.produce(i,f),h=!0;return}const v=y.captureIndices,w=y.matchedRuleId,k=v&&v.length>0?v[0].end>r:!1;if(w===p4){const S=i.getRule(t);a.produce(i,v[0].start),i=i.withContentNameScopesList(i.nameScopesList),ol(t,e,n,i,a,S.endCaptures,v),a.produce(i,v[0].end);const R=i;if(i=i.parent,m=R.getAnchorPos(),!k&&R.getEnterPos()===r){i=R,a.produce(i,f),h=!0;return}}else{const S=t.getRule(w);a.produce(i,v[0].start);const R=i,T=S.getName(e.content,v),z=i.contentNameScopesList.pushAttributed(T,t);if(i=i.push(w,r,m,v[0].end===f,null,z,z),S instanceof ag){const L=S;ol(t,e,n,i,a,L.beginCaptures,v),a.produce(i,v[0].end),m=v[0].end;const E=L.getContentName(e.content,v),M=z.pushAttributed(E,t);if(i=i.withContentNameScopesList(M),L.endHasBackReferences&&(i=i.withEndRule(L.getEndWithResolvedBackReferences(e.content,v))),!k&&R.hasSameRuleAs(i)){i=i.pop(),a.produce(i,f),h=!0;return}}else if(S instanceof _f){const L=S;ol(t,e,n,i,a,L.beginCaptures,v),a.produce(i,v[0].end),m=v[0].end;const E=L.getContentName(e.content,v),M=z.pushAttributed(E,t);if(i=i.withContentNameScopesList(M),L.whileHasBackReferences&&(i=i.withEndRule(L.getWhileWithResolvedBackReferences(e.content,v))),!k&&R.hasSameRuleAs(i)){i=i.pop(),a.produce(i,f),h=!0;return}}else if(ol(t,e,n,i,a,S.captures,v),a.produce(i,v[0].end),i=i.pop(),!k){i=i.safePop(),a.produce(i,f),h=!0;return}}v[0].end>r&&(r=v[0].end,n=!1)}}function b4(t,e,n,r,i,a){let l=i.beginRuleCapturedEOL?0:-1;const c=[];for(let f=i;f;f=f.pop()){const h=f.getRule(t);h instanceof _f&&c.push({rule:h,stack:f})}for(let f=c.pop();f;f=c.pop()){const{ruleScanner:h,findOptions:m}=S4(f.rule,t,f.stack.endRule,n,r===l),p=h.findNextMatchSync(e,r,m);if(p){if(p.ruleId!==OE){i=f.stack.pop();break}p.captureIndices&&p.captureIndices.length&&(a.produce(f.stack,p.captureIndices[0].start),ol(t,e,n,f.stack,a,f.rule.whileCaptures,p.captureIndices),a.produce(f.stack,p.captureIndices[0].end),l=p.captureIndices[0].end,p.captureIndices[0].end>r&&(r=p.captureIndices[0].end,n=!1))}else{i=f.stack.pop();break}}return{stack:i,linePos:r,anchorPosition:l,isFirstLine:n}}function v4(t,e,n,r,i,a){const l=w4(t,e,n,r,i,a),c=t.getInjections();if(c.length===0)return l;const f=x4(c,t,e,n,r,i,a);if(!f)return l;if(!l)return f;const h=l.captureIndices[0].start,m=f.captureIndices[0].start;return m<h||f.priorityMatch&&m===h?f:l}function w4(t,e,n,r,i,a){const l=i.getRule(t),{ruleScanner:c,findOptions:f}=ME(l,t,i.endRule,n,r===a),h=c.findNextMatchSync(e,r,f);return h?{captureIndices:h.captureIndices,matchedRuleId:h.ruleId}:null}function x4(t,e,n,r,i,a,l){let c=Number.MAX_VALUE,f=null,h,m=0;const p=a.contentNameScopesList.getScopeNames();for(let _=0,y=t.length;_<y;_++){const v=t[_];if(!v.matcher(p))continue;const w=e.getRule(v.ruleId),{ruleScanner:k,findOptions:S}=ME(w,e,null,r,i===l),R=k.findNextMatchSync(n,i,S);if(!R)continue;const T=R.captureIndices[0].start;if(!(T>=c)&&(c=T,f=R.captureIndices,h=R.ruleId,m=v.priority,c===i))break}return f?{priorityMatch:m===-1,captureIndices:f,matchedRuleId:h}:null}function ME(t,e,n,r,i){return{ruleScanner:t.compileAG(e,n,r,i),findOptions:0}}function S4(t,e,n,r,i){return{ruleScanner:t.compileWhileAG(e,n,r,i),findOptions:0}}function ol(t,e,n,r,i,a,l){if(a.length===0)return;const c=e.content,f=Math.min(a.length,l.length),h=[],m=l[0].end;for(let p=0;p<f;p++){const _=a[p];if(_===null)continue;const y=l[p];if(y.length===0)continue;if(y.start>m)break;for(;h.length>0&&h[h.length-1].endPos<=y.start;)i.produceFromScopes(h[h.length-1].scopes,h[h.length-1].endPos),h.pop();if(h.length>0?i.produceFromScopes(h[h.length-1].scopes,y.start):i.produce(r,y.start),_.retokenizeCapturedWithRuleId){const w=_.getName(c,l),k=r.contentNameScopesList.pushAttributed(w,t),S=_.getContentName(c,l),R=k.pushAttributed(S,t),T=r.push(_.retokenizeCapturedWithRuleId,y.start,-1,!1,null,k,R),z=t.createOnigString(c.substring(0,y.end));DE(t,z,n&&y.start===0,y.start,T,i,!1,0),AE(z);continue}const v=_.getName(c,l);if(v!==null){const k=(h.length>0?h[h.length-1].scopes:r.contentNameScopesList).pushAttributed(v,t);h.push(new E4(k,y.end))}}for(;h.length>0;)i.produceFromScopes(h[h.length-1].scopes,h[h.length-1].endPos),h.pop()}var E4=class{scopes;endPos;constructor(t,e){this.scopes=t,this.endPos=e}};function k4(t,e,n,r,i,a,l,c){return new T4(t,e,n,r,i,a,l,c)}function Nx(t,e,n,r,i){const a=gf(e,bf),l=IE.getCompiledRuleId(n,r,i.repository);for(const c of a)t.push({debugSelector:e,matcher:c.matcher,ruleId:l,grammar:i,priority:c.priority})}function bf(t,e){if(e.length<t.length)return!1;let n=0;return t.every(r=>{for(let i=n;i<e.length;i++)if(C4(e[i],r))return n=i+1,!0;return!1})}function C4(t,e){if(!t)return!1;if(t===e)return!0;const n=e.length;return t.length>n&&t.substr(0,n)===e&&t[n]==="."}var T4=class{constructor(t,e,n,r,i,a,l,c){if(this._rootScopeName=t,this.balancedBracketSelectors=a,this._onigLib=c,this._basicScopeAttributesProvider=new y4(n,r),this._rootId=-1,this._lastRuleId=0,this._ruleId2desc=[null],this._includedGrammars={},this._grammarRepository=l,this._grammar=Dx(e,null),this._injections=null,this._tokenTypeMatchers=[],i)for(const f of Object.keys(i)){const h=gf(f,bf);for(const m of h)this._tokenTypeMatchers.push({matcher:m.matcher,type:i[f]})}}_rootId;_lastRuleId;_ruleId2desc;_includedGrammars;_grammarRepository;_grammar;_injections;_basicScopeAttributesProvider;_tokenTypeMatchers;get themeProvider(){return this._grammarRepository}dispose(){for(const t of this._ruleId2desc)t&&t.dispose()}createOnigScanner(t){return this._onigLib.createOnigScanner(t)}createOnigString(t){return this._onigLib.createOnigString(t)}getMetadataForScope(t){return this._basicScopeAttributesProvider.getBasicScopeAttributes(t)}_collectInjections(){const t={lookup:i=>i===this._rootScopeName?this._grammar:this.getExternalGrammar(i),injections:i=>this._grammarRepository.injections(i)},e=[],n=this._rootScopeName,r=t.lookup(n);if(r){const i=r.injections;if(i)for(let l in i)Nx(e,l,i[l],this,r);const a=this._grammarRepository.injections(n);a&&a.forEach(l=>{const c=this.getExternalGrammar(l);if(c){const f=c.injectionSelector;f&&Nx(e,f,c,this,c)}})}return e.sort((i,a)=>i.priority-a.priority),e}getInjections(){return this._injections===null&&(this._injections=this._collectInjections()),this._injections}registerRule(t){const e=++this._lastRuleId,n=t(e);return this._ruleId2desc[e]=n,n}getRule(t){return this._ruleId2desc[t]}getExternalGrammar(t,e){if(this._includedGrammars[t])return this._includedGrammars[t];if(this._grammarRepository){const n=this._grammarRepository.lookup(t);if(n)return this._includedGrammars[t]=Dx(n,e&&e.$base),this._includedGrammars[t]}}tokenizeLine(t,e,n=0){const r=this._tokenize(t,e,!1,n);return{tokens:r.lineTokens.getResult(r.ruleStack,r.lineLength),ruleStack:r.ruleStack,stoppedEarly:r.stoppedEarly}}tokenizeLine2(t,e,n=0){const r=this._tokenize(t,e,!0,n);return{tokens:r.lineTokens.getBinaryResult(r.ruleStack,r.lineLength),ruleStack:r.ruleStack,stoppedEarly:r.stoppedEarly}}_tokenize(t,e,n,r){this._rootId===-1&&(this._rootId=IE.getCompiledRuleId(this._grammar.repository.$self,this,this._grammar.repository),this.getInjections());let i;if(!e||e===lg.NULL){i=!0;const h=this._basicScopeAttributesProvider.getDefaultAttributes(),m=this.themeProvider.getDefaults(),p=Va.set(0,h.languageId,h.tokenType,null,m.fontStyle,m.foregroundId,m.backgroundId),_=this.getRule(this._rootId).getName(null,null);let y;_?y=vl.createRootAndLookUpScopeName(_,p,this):y=vl.createRoot("unknown",p),e=new lg(null,this._rootId,-1,-1,!1,null,y,y)}else i=!1,e.reset();t=t+`
`;const a=this.createOnigString(t),l=a.content.length,c=new R4(n,t,this._tokenTypeMatchers,this.balancedBracketSelectors),f=DE(this,a,i,0,e,c,!0,r);return AE(a),{lineLength:l,lineTokens:c,ruleStack:f.stack,stoppedEarly:f.stoppedEarly}}};function Dx(t,e){return t=Gz(t),t.repository=t.repository||{},t.repository.$self={$vscodeTextmateLocation:t.$vscodeTextmateLocation,patterns:t.patterns,name:t.scopeName},t.repository.$base=e||t.repository.$self,t}var vl=class Nr{constructor(e,n,r){this.parent=e,this.scopePath=n,this.tokenAttributes=r}static fromExtension(e,n){let r=e,i=e?.scopePath??null;for(const a of n)i=Yp.push(i,a.scopeNames),r=new Nr(r,i,a.encodedTokenAttributes);return r}static createRoot(e,n){return new Nr(null,new Yp(null,e),n)}static createRootAndLookUpScopeName(e,n,r){const i=r.getMetadataForScope(e),a=new Yp(null,e),l=r.themeProvider.themeMatch(a),c=Nr.mergeAttributes(n,i,l);return new Nr(null,a,c)}get scopeName(){return this.scopePath.scopeName}toString(){return this.getScopeNames().join(" ")}equals(e){return Nr.equals(this,e)}static equals(e,n){do{if(e===n||!e&&!n)return!0;if(!e||!n||e.scopeName!==n.scopeName||e.tokenAttributes!==n.tokenAttributes)return!1;e=e.parent,n=n.parent}while(!0)}static mergeAttributes(e,n,r){let i=-1,a=0,l=0;return r!==null&&(i=r.fontStyle,a=r.foregroundId,l=r.backgroundId),Va.set(e,n.languageId,n.tokenType,null,i,a,l)}pushAttributed(e,n){if(e===null)return this;if(e.indexOf(" ")===-1)return Nr._pushAttributed(this,e,n);const r=e.split(/ /g);let i=this;for(const a of r)i=Nr._pushAttributed(i,a,n);return i}static _pushAttributed(e,n,r){const i=r.getMetadataForScope(n),a=e.scopePath.push(n),l=r.themeProvider.themeMatch(a),c=Nr.mergeAttributes(e.tokenAttributes,i,l);return new Nr(e,a,c)}getScopeNames(){return this.scopePath.getSegments()}getExtensionIfDefined(e){const n=[];let r=this;for(;r&&r!==e;)n.push({encodedTokenAttributes:r.tokenAttributes,scopeNames:r.scopePath.getExtensionIfDefined(r.parent?.scopePath??null)}),r=r.parent;return r===e?n.reverse():void 0}},lg=class xs{constructor(e,n,r,i,a,l,c,f){this.parent=e,this.ruleId=n,this.beginRuleCapturedEOL=a,this.endRule=l,this.nameScopesList=c,this.contentNameScopesList=f,this.depth=this.parent?this.parent.depth+1:1,this._enterPos=r,this._anchorPos=i}_stackElementBrand=void 0;static NULL=new xs(null,0,0,0,!1,null,null,null);_enterPos;_anchorPos;depth;equals(e){return e===null?!1:xs._equals(this,e)}static _equals(e,n){return e===n?!0:this._structuralEquals(e,n)?vl.equals(e.contentNameScopesList,n.contentNameScopesList):!1}static _structuralEquals(e,n){do{if(e===n||!e&&!n)return!0;if(!e||!n||e.depth!==n.depth||e.ruleId!==n.ruleId||e.endRule!==n.endRule)return!1;e=e.parent,n=n.parent}while(!0)}clone(){return this}static _reset(e){for(;e;)e._enterPos=-1,e._anchorPos=-1,e=e.parent}reset(){xs._reset(this)}pop(){return this.parent}safePop(){return this.parent?this.parent:this}push(e,n,r,i,a,l,c){return new xs(this,e,n,r,i,a,l,c)}getEnterPos(){return this._enterPos}getAnchorPos(){return this._anchorPos}getRule(e){return e.getRule(this.ruleId)}toString(){const e=[];return this._writeString(e,0),"["+e.join(",")+"]"}_writeString(e,n){return this.parent&&(n=this.parent._writeString(e,n)),e[n++]=`(${this.ruleId}, ${this.nameScopesList?.toString()}, ${this.contentNameScopesList?.toString()})`,n}withContentNameScopesList(e){return this.contentNameScopesList===e?this:this.parent.push(this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,this.endRule,this.nameScopesList,e)}withEndRule(e){return this.endRule===e?this:new xs(this.parent,this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,e,this.nameScopesList,this.contentNameScopesList)}hasSameRuleAs(e){let n=this;for(;n&&n._enterPos===e._enterPos;){if(n.ruleId===e.ruleId)return!0;n=n.parent}return!1}toStateStackFrame(){return{ruleId:this.ruleId,beginRuleCapturedEOL:this.beginRuleCapturedEOL,endRule:this.endRule,nameScopesList:this.nameScopesList?.getExtensionIfDefined(this.parent?.nameScopesList??null)??[],contentNameScopesList:this.contentNameScopesList?.getExtensionIfDefined(this.nameScopesList)??[]}}static pushFrame(e,n){const r=vl.fromExtension(e?.nameScopesList??null,n.nameScopesList);return new xs(e,n.ruleId,n.enterPos??-1,n.anchorPos??-1,n.beginRuleCapturedEOL,n.endRule,r,vl.fromExtension(r,n.contentNameScopesList))}},A4=class{balancedBracketScopes;unbalancedBracketScopes;allowAny=!1;constructor(t,e){this.balancedBracketScopes=t.flatMap(n=>n==="*"?(this.allowAny=!0,[]):gf(n,bf).map(r=>r.matcher)),this.unbalancedBracketScopes=e.flatMap(n=>gf(n,bf).map(r=>r.matcher))}get matchesAlways(){return this.allowAny&&this.unbalancedBracketScopes.length===0}get matchesNever(){return this.balancedBracketScopes.length===0&&!this.allowAny}match(t){for(const e of this.unbalancedBracketScopes)if(e(t))return!1;for(const e of this.balancedBracketScopes)if(e(t))return!0;return this.allowAny}},R4=class{constructor(t,e,n,r){this.balancedBracketSelectors=r,this._emitBinaryTokens=t,this._tokenTypeOverrides=n,this._lineText=null,this._tokens=[],this._binaryTokens=[],this._lastTokenEndIndex=0}_emitBinaryTokens;_lineText;_tokens;_binaryTokens;_lastTokenEndIndex;_tokenTypeOverrides;produce(t,e){this.produceFromScopes(t.contentNameScopesList,e)}produceFromScopes(t,e){if(this._lastTokenEndIndex>=e)return;if(this._emitBinaryTokens){let r=t?.tokenAttributes??0,i=!1;if(this.balancedBracketSelectors?.matchesAlways&&(i=!0),this._tokenTypeOverrides.length>0||this.balancedBracketSelectors&&!this.balancedBracketSelectors.matchesAlways&&!this.balancedBracketSelectors.matchesNever){const a=t?.getScopeNames()??[];for(const l of this._tokenTypeOverrides)l.matcher(a)&&(r=Va.set(r,0,l.type,null,-1,0,0));this.balancedBracketSelectors&&(i=this.balancedBracketSelectors.match(a))}if(i&&(r=Va.set(r,0,8,i,-1,0,0)),this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-1]===r){this._lastTokenEndIndex=e;return}this._binaryTokens.push(this._lastTokenEndIndex),this._binaryTokens.push(r),this._lastTokenEndIndex=e;return}const n=t?.getScopeNames()??[];this._tokens.push({startIndex:this._lastTokenEndIndex,endIndex:e,scopes:n}),this._lastTokenEndIndex=e}getResult(t,e){return this._tokens.length>0&&this._tokens[this._tokens.length-1].startIndex===e-1&&this._tokens.pop(),this._tokens.length===0&&(this._lastTokenEndIndex=-1,this.produce(t,e),this._tokens[this._tokens.length-1].startIndex=0),this._tokens}getBinaryResult(t,e){this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-2]===e-1&&(this._binaryTokens.pop(),this._binaryTokens.pop()),this._binaryTokens.length===0&&(this._lastTokenEndIndex=-1,this.produce(t,e),this._binaryTokens[this._binaryTokens.length-2]=0);const n=new Uint32Array(this._binaryTokens.length);for(let r=0,i=this._binaryTokens.length;r<i;r++)n[r]=this._binaryTokens[r];return n}},O4=class{constructor(t,e){this._onigLib=e,this._theme=t}_grammars=new Map;_rawGrammars=new Map;_injectionGrammars=new Map;_theme;dispose(){for(const t of this._grammars.values())t.dispose()}setTheme(t){this._theme=t}getColorMap(){return this._theme.getColorMap()}addGrammar(t,e){this._rawGrammars.set(t.scopeName,t),e&&this._injectionGrammars.set(t.scopeName,e)}lookup(t){return this._rawGrammars.get(t)}injections(t){return this._injectionGrammars.get(t)}getDefaults(){return this._theme.getDefaults()}themeMatch(t){return this._theme.match(t)}grammarForScopeName(t,e,n,r,i){if(!this._grammars.has(t)){let a=this._rawGrammars.get(t);if(!a)return null;this._grammars.set(t,k4(t,a,e,n,r,i,this,this._onigLib))}return this._grammars.get(t)}},I4=class{_options;_syncRegistry;_ensureGrammarCache;constructor(e){this._options=e,this._syncRegistry=new O4(mf.createFromRawTheme(e.theme,e.colorMap),e.onigLib),this._ensureGrammarCache=new Map}dispose(){this._syncRegistry.dispose()}setTheme(e,n){this._syncRegistry.setTheme(mf.createFromRawTheme(e,n))}getColorMap(){return this._syncRegistry.getColorMap()}loadGrammarWithEmbeddedLanguages(e,n,r){return this.loadGrammarWithConfiguration(e,n,{embeddedLanguages:r})}loadGrammarWithConfiguration(e,n,r){return this._loadGrammar(e,n,r.embeddedLanguages,r.tokenTypes,new A4(r.balancedBracketSelectors||[],r.unbalancedBracketSelectors||[]))}loadGrammar(e){return this._loadGrammar(e,0,null,null,null)}_loadGrammar(e,n,r,i,a){const l=new a4(this._syncRegistry,e);for(;l.Q.length>0;)l.Q.map(c=>this._loadSingleGrammar(c.scopeName)),l.processQueue();return this._grammarForScopeName(e,n,r,i,a)}_loadSingleGrammar(e){this._ensureGrammarCache.has(e)||(this._doLoadSingleGrammar(e),this._ensureGrammarCache.set(e,!0))}_doLoadSingleGrammar(e){const n=this._options.loadGrammar(e);if(n){const r=typeof this._options.getInjections=="function"?this._options.getInjections(e):void 0;this._syncRegistry.addGrammar(n,r)}}addGrammar(e,n=[],r=0,i=null){return this._syncRegistry.addGrammar(e,n),this._grammarForScopeName(e.scopeName,r,i)}_grammarForScopeName(e,n=0,r=null,i=null,a=null){return this._syncRegistry.grammarForScopeName(e,n,r,i,a)}},ug=lg.NULL;const N4=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"];class Ql{constructor(e,n,r){this.normal=n,this.property=e,r&&(this.space=r)}}Ql.prototype.normal={};Ql.prototype.property={};Ql.prototype.space=void 0;function LE(t,e){const n={},r={};for(const i of t)Object.assign(n,i.property),Object.assign(r,i.normal);return new Ql(n,r,e)}function cg(t){return t.toLowerCase()}class Un{constructor(e,n){this.attribute=n,this.property=e}}Un.prototype.attribute="";Un.prototype.booleanish=!1;Un.prototype.boolean=!1;Un.prototype.commaOrSpaceSeparated=!1;Un.prototype.commaSeparated=!1;Un.prototype.defined=!1;Un.prototype.mustUseProperty=!1;Un.prototype.number=!1;Un.prototype.overloadedBoolean=!1;Un.prototype.property="";Un.prototype.spaceSeparated=!1;Un.prototype.space=void 0;let D4=0;const Pe=zs(),Ot=zs(),fg=zs(),pe=zs(),ct=zs(),ja=zs(),Qn=zs();function zs(){return 2**++D4}const hg=Object.freeze(Object.defineProperty({__proto__:null,boolean:Pe,booleanish:Ot,commaOrSpaceSeparated:Qn,commaSeparated:ja,number:pe,overloadedBoolean:fg,spaceSeparated:ct},Symbol.toStringTag,{value:"Module"})),Wp=Object.keys(hg);class py extends Un{constructor(e,n,r,i){let a=-1;if(super(e,n),Mx(this,"space",i),typeof r=="number")for(;++a<Wp.length;){const l=Wp[a];Mx(this,Wp[a],(r&hg[l])===hg[l])}}}py.prototype.defined=!0;function Mx(t,e,n){n&&(t[e]=n)}function Qa(t){const e={},n={};for(const[r,i]of Object.entries(t.properties)){const a=new py(r,t.transform(t.attributes||{},r),i,t.space);t.mustUseProperty&&t.mustUseProperty.includes(r)&&(a.mustUseProperty=!0),e[r]=a,n[cg(r)]=r,n[cg(a.attribute)]=r}return new Ql(e,n,t.space)}const zE=Qa({properties:{ariaActiveDescendant:null,ariaAtomic:Ot,ariaAutoComplete:null,ariaBusy:Ot,ariaChecked:Ot,ariaColCount:pe,ariaColIndex:pe,ariaColSpan:pe,ariaControls:ct,ariaCurrent:null,ariaDescribedBy:ct,ariaDetails:null,ariaDisabled:Ot,ariaDropEffect:ct,ariaErrorMessage:null,ariaExpanded:Ot,ariaFlowTo:ct,ariaGrabbed:Ot,ariaHasPopup:null,ariaHidden:Ot,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:ct,ariaLevel:pe,ariaLive:null,ariaModal:Ot,ariaMultiLine:Ot,ariaMultiSelectable:Ot,ariaOrientation:null,ariaOwns:ct,ariaPlaceholder:null,ariaPosInSet:pe,ariaPressed:Ot,ariaReadOnly:Ot,ariaRelevant:null,ariaRequired:Ot,ariaRoleDescription:ct,ariaRowCount:pe,ariaRowIndex:pe,ariaRowSpan:pe,ariaSelected:Ot,ariaSetSize:pe,ariaSort:null,ariaValueMax:pe,ariaValueMin:pe,ariaValueNow:pe,ariaValueText:null,role:null},transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function PE(t,e){return e in t?t[e]:e}function jE(t,e){return PE(t,e.toLowerCase())}const M4=Qa({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:ja,acceptCharset:ct,accessKey:ct,action:null,allow:null,allowFullScreen:Pe,allowPaymentRequest:Pe,allowUserMedia:Pe,alt:null,as:null,async:Pe,autoCapitalize:null,autoComplete:ct,autoFocus:Pe,autoPlay:Pe,blocking:ct,capture:null,charSet:null,checked:Pe,cite:null,className:ct,cols:pe,colSpan:null,content:null,contentEditable:Ot,controls:Pe,controlsList:ct,coords:pe|ja,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Pe,defer:Pe,dir:null,dirName:null,disabled:Pe,download:fg,draggable:Ot,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Pe,formTarget:null,headers:ct,height:pe,hidden:fg,high:pe,href:null,hrefLang:null,htmlFor:ct,httpEquiv:ct,id:null,imageSizes:null,imageSrcSet:null,inert:Pe,inputMode:null,integrity:null,is:null,isMap:Pe,itemId:null,itemProp:ct,itemRef:ct,itemScope:Pe,itemType:ct,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Pe,low:pe,manifest:null,max:null,maxLength:pe,media:null,method:null,min:null,minLength:pe,multiple:Pe,muted:Pe,name:null,nonce:null,noModule:Pe,noValidate:Pe,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Pe,optimum:pe,pattern:null,ping:ct,placeholder:null,playsInline:Pe,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Pe,referrerPolicy:null,rel:ct,required:Pe,reversed:Pe,rows:pe,rowSpan:pe,sandbox:ct,scope:null,scoped:Pe,seamless:Pe,selected:Pe,shadowRootClonable:Pe,shadowRootDelegatesFocus:Pe,shadowRootMode:null,shape:null,size:pe,sizes:null,slot:null,span:pe,spellCheck:Ot,src:null,srcDoc:null,srcLang:null,srcSet:null,start:pe,step:null,style:null,tabIndex:pe,target:null,title:null,translate:null,type:null,typeMustMatch:Pe,useMap:null,value:Ot,width:pe,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:ct,axis:null,background:null,bgColor:null,border:pe,borderColor:null,bottomMargin:pe,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Pe,declare:Pe,event:null,face:null,frame:null,frameBorder:null,hSpace:pe,leftMargin:pe,link:null,longDesc:null,lowSrc:null,marginHeight:pe,marginWidth:pe,noResize:Pe,noHref:Pe,noShade:Pe,noWrap:Pe,object:null,profile:null,prompt:null,rev:null,rightMargin:pe,rules:null,scheme:null,scrolling:Ot,standby:null,summary:null,text:null,topMargin:pe,valueType:null,version:null,vAlign:null,vLink:null,vSpace:pe,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Pe,disableRemotePlayback:Pe,prefix:null,property:null,results:pe,security:null,unselectable:null},space:"html",transform:jE}),L4=Qa({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Qn,accentHeight:pe,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:pe,amplitude:pe,arabicForm:null,ascent:pe,attributeName:null,attributeType:null,azimuth:pe,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:pe,by:null,calcMode:null,capHeight:pe,className:ct,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:pe,diffuseConstant:pe,direction:null,display:null,dur:null,divisor:pe,dominantBaseline:null,download:Pe,dx:null,dy:null,edgeMode:null,editable:null,elevation:pe,enableBackground:null,end:null,event:null,exponent:pe,externalResourcesRequired:null,fill:null,fillOpacity:pe,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:ja,g2:ja,glyphName:ja,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:pe,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:pe,horizOriginX:pe,horizOriginY:pe,id:null,ideographic:pe,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:pe,k:pe,k1:pe,k2:pe,k3:pe,k4:pe,kernelMatrix:Qn,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:pe,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:pe,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:pe,overlineThickness:pe,paintOrder:null,panose1:null,path:null,pathLength:pe,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:ct,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:pe,pointsAtY:pe,pointsAtZ:pe,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Qn,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Qn,rev:Qn,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Qn,requiredFeatures:Qn,requiredFonts:Qn,requiredFormats:Qn,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:pe,specularExponent:pe,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:pe,strikethroughThickness:pe,string:null,stroke:null,strokeDashArray:Qn,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:pe,strokeOpacity:pe,strokeWidth:null,style:null,surfaceScale:pe,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Qn,tabIndex:pe,tableValues:null,target:null,targetX:pe,targetY:pe,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Qn,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:pe,underlineThickness:pe,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:pe,values:null,vAlphabetic:pe,vMathematical:pe,vectorEffect:null,vHanging:pe,vIdeographic:pe,version:null,vertAdvY:pe,vertOriginX:pe,vertOriginY:pe,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:pe,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:PE}),BE=Qa({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()}}),UE=Qa({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:jE}),$E=Qa({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()}}),z4={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},P4=/[A-Z]/g,Lx=/-[a-z]/g,j4=/^data[-\w.:]+$/i;function qE(t,e){const n=cg(e);let r=e,i=Un;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&j4.test(e)){if(e.charAt(4)==="-"){const a=e.slice(5).replace(Lx,U4);r="data"+a.charAt(0).toUpperCase()+a.slice(1)}else{const a=e.slice(4);if(!Lx.test(a)){let l=a.replace(P4,B4);l.charAt(0)!=="-"&&(l="-"+l),e="data"+l}}i=py}return new i(r,e)}function B4(t){return"-"+t.toLowerCase()}function U4(t){return t.charAt(1).toUpperCase()}const FE=LE([zE,M4,BE,UE,$E],"html"),Jl=LE([zE,L4,BE,UE,$E],"svg"),zx={}.hasOwnProperty;function $4(t,e){const n=e||{};function r(i,...a){let l=r.invalid;const c=r.handlers;if(i&&zx.call(i,t)){const f=String(i[t]);l=zx.call(c,f)?c[f]:r.unknown}if(l)return l.call(this,i,...a)}return r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}const q4=/["&'<>`]/g,F4=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,V4=/[\x01-\t\v\f\x0E-\x1F\x7F\x81\x8D\x8F\x90\x9D\xA0-\uFFFF]/g,H4=/[|\\{}()[\]^$+*?.]/g,Px=new WeakMap;function G4(t,e){if(t=t.replace(e.subset?K4(e.subset):q4,r),e.subset||e.escapeOnly)return t;return t.replace(F4,n).replace(V4,r);function n(i,a,l){return e.format((i.charCodeAt(0)-55296)*1024+i.charCodeAt(1)-56320+65536,l.charCodeAt(a+2),e)}function r(i,a,l){return e.format(i.charCodeAt(0),l.charCodeAt(a+1),e)}}function K4(t){let e=Px.get(t);return e||(e=Z4(t),Px.set(t,e)),e}function Z4(t){const e=[];let n=-1;for(;++n<t.length;)e.push(t[n].replace(H4,"\\$&"));return new RegExp("(?:"+e.join("|")+")","g")}const Q4=/[\dA-Fa-f]/;function J4(t,e,n){const r="&#x"+t.toString(16).toUpperCase();return n&&e&&!Q4.test(String.fromCharCode(e))?r:r+";"}const Y4=/\d/;function X4(t,e,n){const r="&#"+String(t);return n&&e&&!Y4.test(String.fromCharCode(e))?r:r+";"}const W4=["AElig","AMP","Aacute","Acirc","Agrave","Aring","Atilde","Auml","COPY","Ccedil","ETH","Eacute","Ecirc","Egrave","Euml","GT","Iacute","Icirc","Igrave","Iuml","LT","Ntilde","Oacute","Ocirc","Ograve","Oslash","Otilde","Ouml","QUOT","REG","THORN","Uacute","Ucirc","Ugrave","Uuml","Yacute","aacute","acirc","acute","aelig","agrave","amp","aring","atilde","auml","brvbar","ccedil","cedil","cent","copy","curren","deg","divide","eacute","ecirc","egrave","eth","euml","frac12","frac14","frac34","gt","iacute","icirc","iexcl","igrave","iquest","iuml","laquo","lt","macr","micro","middot","nbsp","not","ntilde","oacute","ocirc","ograve","ordf","ordm","oslash","otilde","ouml","para","plusmn","pound","quot","raquo","reg","sect","shy","sup1","sup2","sup3","szlig","thorn","times","uacute","ucirc","ugrave","uml","uuml","yacute","yen","yuml"],em={nbsp:"",iexcl:"",cent:"",pound:"",curren:"",yen:"",brvbar:"",sect:"",uml:"",copy:"",ordf:"",laquo:"",not:"",shy:"",reg:"",macr:"",deg:"",plusmn:"",sup2:"",sup3:"",acute:"",micro:"",para:"",middot:"",cedil:"",sup1:"",ordm:"",raquo:"",frac14:"",frac12:"",frac34:"",iquest:"",Agrave:"",Aacute:"",Acirc:"",Atilde:"",Auml:"",Aring:"",AElig:"",Ccedil:"",Egrave:"",Eacute:"",Ecirc:"",Euml:"",Igrave:"",Iacute:"",Icirc:"",Iuml:"",ETH:"",Ntilde:"",Ograve:"",Oacute:"",Ocirc:"",Otilde:"",Ouml:"",times:"",Oslash:"",Ugrave:"",Uacute:"",Ucirc:"",Uuml:"",Yacute:"",THORN:"",szlig:"",agrave:"",aacute:"",acirc:"",atilde:"",auml:"",aring:"",aelig:"",ccedil:"",egrave:"",eacute:"",ecirc:"",euml:"",igrave:"",iacute:"",icirc:"",iuml:"",eth:"",ntilde:"",ograve:"",oacute:"",ocirc:"",otilde:"",ouml:"",divide:"",oslash:"",ugrave:"",uacute:"",ucirc:"",uuml:"",yacute:"",thorn:"",yuml:"",fnof:"",Alpha:"",Beta:"",Gamma:"",Delta:"",Epsilon:"",Zeta:"",Eta:"",Theta:"",Iota:"",Kappa:"",Lambda:"",Mu:"",Nu:"",Xi:"",Omicron:"",Pi:"",Rho:"",Sigma:"",Tau:"",Upsilon:"",Phi:"",Chi:"",Psi:"",Omega:"",alpha:"",beta:"",gamma:"",delta:"",epsilon:"",zeta:"",eta:"",theta:"",iota:"",kappa:"",lambda:"",mu:"",nu:"",xi:"",omicron:"",pi:"",rho:"",sigmaf:"",sigma:"",tau:"",upsilon:"",phi:"",chi:"",psi:"",omega:"",thetasym:"",upsih:"",piv:"",bull:"",hellip:"",prime:"",Prime:"",oline:"",frasl:"",weierp:"",image:"",real:"",trade:"",alefsym:"",larr:"",uarr:"",rarr:"",darr:"",harr:"",crarr:"",lArr:"",uArr:"",rArr:"",dArr:"",hArr:"",forall:"",part:"",exist:"",empty:"",nabla:"",isin:"",notin:"",ni:"",prod:"",sum:"",minus:"",lowast:"",radic:"",prop:"",infin:"",ang:"",and:"",or:"",cap:"",cup:"",int:"",there4:"",sim:"",cong:"",asymp:"",ne:"",equiv:"",le:"",ge:"",sub:"",sup:"",nsub:"",sube:"",supe:"",oplus:"",otimes:"",perp:"",sdot:"",lceil:"",rceil:"",lfloor:"",rfloor:"",lang:"",rang:"",loz:"",spades:"",clubs:"",hearts:"",diams:"",quot:'"',amp:"&",lt:"<",gt:">",OElig:"",oelig:"",Scaron:"",scaron:"",Yuml:"",circ:"",tilde:"",ensp:"",emsp:"",thinsp:"",zwnj:"",zwj:"",lrm:"",rlm:"",ndash:"",mdash:"",lsquo:"",rsquo:"",sbquo:"",ldquo:"",rdquo:"",bdquo:"",dagger:"",Dagger:"",permil:"",lsaquo:"",rsaquo:"",euro:""},e3=["cent","copy","divide","gt","lt","not","para","times"],VE={}.hasOwnProperty,dg={};let Sc;for(Sc in em)VE.call(em,Sc)&&(dg[em[Sc]]=Sc);const t3=/[^\dA-Za-z]/;function n3(t,e,n,r){const i=String.fromCharCode(t);if(VE.call(dg,i)){const a=dg[i],l="&"+a;return n&&W4.includes(a)&&!e3.includes(a)&&(!r||e&&e!==61&&t3.test(String.fromCharCode(e)))?l:l+";"}return""}function r3(t,e,n){let r=J4(t,e,n.omitOptionalSemicolons),i;if((n.useNamedReferences||n.useShortestReferences)&&(i=n3(t,e,n.omitOptionalSemicolons,n.attribute)),(n.useShortestReferences||!i)&&n.useShortestReferences){const a=X4(t,e,n.omitOptionalSemicolons);a.length<r.length&&(r=a)}return i&&(!n.useShortestReferences||i.length<r.length)?i:r}function Ba(t,e){return G4(t,Object.assign({format:r3},e))}const i3=/^>|^->|<!--|-->|--!>|<!-$/g,s3=[">"],a3=["<",">"];function o3(t,e,n,r){return r.settings.bogusComments?"<?"+Ba(t.value,Object.assign({},r.settings.characterReferences,{subset:s3}))+">":"<!--"+t.value.replace(i3,i)+"-->";function i(a){return Ba(a,Object.assign({},r.settings.characterReferences,{subset:a3}))}}function l3(t,e,n,r){return"<!"+(r.settings.upperDoctype?"DOCTYPE":"doctype")+(r.settings.tightDoctype?"":" ")+"html>"}function vf(t,e){const n=String(t);if(typeof e!="string")throw new TypeError("Expected character");let r=0,i=n.indexOf(e);for(;i!==-1;)r++,i=n.indexOf(e,i+e.length);return r}function HE(t,e){const n=e||{};return(t[t.length-1]===""?[...t,""]:t).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}function GE(t){return t.join(" ").trim()}const u3=/[ \t\n\f\r]/g;function Qf(t){return typeof t=="object"?t.type==="text"?jx(t.value):!1:jx(t)}function jx(t){return t.replace(u3,"")===""}const $t=ZE(1),KE=ZE(-1),c3=[];function ZE(t){return e;function e(n,r,i){const a=n?n.children:c3;let l=(r||0)+t,c=a[l];if(!i)for(;c&&Qf(c);)l+=t,c=a[l];return c}}const f3={}.hasOwnProperty;function QE(t){return e;function e(n,r,i){return f3.call(t,n.tagName)&&t[n.tagName](n,r,i)}}const my=QE({body:d3,caption:tm,colgroup:tm,dd:y3,dt:g3,head:tm,html:h3,li:m3,optgroup:_3,option:b3,p:p3,rp:Bx,rt:Bx,tbody:w3,td:Ux,tfoot:x3,th:Ux,thead:v3,tr:S3});function tm(t,e,n){const r=$t(n,e,!0);return!r||r.type!=="comment"&&!(r.type==="text"&&Qf(r.value.charAt(0)))}function h3(t,e,n){const r=$t(n,e);return!r||r.type!=="comment"}function d3(t,e,n){const r=$t(n,e);return!r||r.type!=="comment"}function p3(t,e,n){const r=$t(n,e);return r?r.type==="element"&&(r.tagName==="address"||r.tagName==="article"||r.tagName==="aside"||r.tagName==="blockquote"||r.tagName==="details"||r.tagName==="div"||r.tagName==="dl"||r.tagName==="fieldset"||r.tagName==="figcaption"||r.tagName==="figure"||r.tagName==="footer"||r.tagName==="form"||r.tagName==="h1"||r.tagName==="h2"||r.tagName==="h3"||r.tagName==="h4"||r.tagName==="h5"||r.tagName==="h6"||r.tagName==="header"||r.tagName==="hgroup"||r.tagName==="hr"||r.tagName==="main"||r.tagName==="menu"||r.tagName==="nav"||r.tagName==="ol"||r.tagName==="p"||r.tagName==="pre"||r.tagName==="section"||r.tagName==="table"||r.tagName==="ul"):!n||!(n.type==="element"&&(n.tagName==="a"||n.tagName==="audio"||n.tagName==="del"||n.tagName==="ins"||n.tagName==="map"||n.tagName==="noscript"||n.tagName==="video"))}function m3(t,e,n){const r=$t(n,e);return!r||r.type==="element"&&r.tagName==="li"}function g3(t,e,n){const r=$t(n,e);return!!(r&&r.type==="element"&&(r.tagName==="dt"||r.tagName==="dd"))}function y3(t,e,n){const r=$t(n,e);return!r||r.type==="element"&&(r.tagName==="dt"||r.tagName==="dd")}function Bx(t,e,n){const r=$t(n,e);return!r||r.type==="element"&&(r.tagName==="rp"||r.tagName==="rt")}function _3(t,e,n){const r=$t(n,e);return!r||r.type==="element"&&r.tagName==="optgroup"}function b3(t,e,n){const r=$t(n,e);return!r||r.type==="element"&&(r.tagName==="option"||r.tagName==="optgroup")}function v3(t,e,n){const r=$t(n,e);return!!(r&&r.type==="element"&&(r.tagName==="tbody"||r.tagName==="tfoot"))}function w3(t,e,n){const r=$t(n,e);return!r||r.type==="element"&&(r.tagName==="tbody"||r.tagName==="tfoot")}function x3(t,e,n){return!$t(n,e)}function S3(t,e,n){const r=$t(n,e);return!r||r.type==="element"&&r.tagName==="tr"}function Ux(t,e,n){const r=$t(n,e);return!r||r.type==="element"&&(r.tagName==="td"||r.tagName==="th")}const E3=QE({body:T3,colgroup:A3,head:C3,html:k3,tbody:R3});function k3(t){const e=$t(t,-1);return!e||e.type!=="comment"}function C3(t){const e=new Set;for(const r of t.children)if(r.type==="element"&&(r.tagName==="base"||r.tagName==="title")){if(e.has(r.tagName))return!1;e.add(r.tagName)}const n=t.children[0];return!n||n.type==="element"}function T3(t){const e=$t(t,-1,!0);return!e||e.type!=="comment"&&!(e.type==="text"&&Qf(e.value.charAt(0)))&&!(e.type==="element"&&(e.tagName==="meta"||e.tagName==="link"||e.tagName==="script"||e.tagName==="style"||e.tagName==="template"))}function A3(t,e,n){const r=KE(n,e),i=$t(t,-1,!0);return n&&r&&r.type==="element"&&r.tagName==="colgroup"&&my(r,n.children.indexOf(r),n)?!1:!!(i&&i.type==="element"&&i.tagName==="col")}function R3(t,e,n){const r=KE(n,e),i=$t(t,-1);return n&&r&&r.type==="element"&&(r.tagName==="thead"||r.tagName==="tbody")&&my(r,n.children.indexOf(r),n)?!1:!!(i&&i.type==="element"&&i.tagName==="tr")}const Ec={name:[[`	
\f\r &/=>`.split(""),`	
\f\r "&'/=>\``.split("")],[`\0	
\f\r "&'/<=>`.split(""),`\0	
\f\r "&'/<=>\``.split("")]],unquoted:[[`	
\f\r &>`.split(""),`\0	
\f\r "&'<=>\``.split("")],[`\0	
\f\r "&'<=>\``.split(""),`\0	
\f\r "&'<=>\``.split("")]],single:[["&'".split(""),"\"&'`".split("")],["\0&'".split(""),"\0\"&'`".split("")]],double:[['"&'.split(""),"\"&'`".split("")],['\0"&'.split(""),"\0\"&'`".split("")]]};function O3(t,e,n,r){const i=r.schema,a=i.space==="svg"?!1:r.settings.omitOptionalTags;let l=i.space==="svg"?r.settings.closeEmptyElements:r.settings.voids.includes(t.tagName.toLowerCase());const c=[];let f;i.space==="html"&&t.tagName==="svg"&&(r.schema=Jl);const h=I3(r,t.properties),m=r.all(i.space==="html"&&t.tagName==="template"?t.content:t);return r.schema=i,m&&(l=!1),(h||!a||!E3(t,e,n))&&(c.push("<",t.tagName,h?" "+h:""),l&&(i.space==="svg"||r.settings.closeSelfClosing)&&(f=h.charAt(h.length-1),(!r.settings.tightSelfClosing||f==="/"||f&&f!=='"'&&f!=="'")&&c.push(" "),c.push("/")),c.push(">")),c.push(m),!l&&(!a||!my(t,e,n))&&c.push("</"+t.tagName+">"),c.join("")}function I3(t,e){const n=[];let r=-1,i;if(e){for(i in e)if(e[i]!==null&&e[i]!==void 0){const a=N3(t,i,e[i]);a&&n.push(a)}}for(;++r<n.length;){const a=t.settings.tightAttributes?n[r].charAt(n[r].length-1):void 0;r!==n.length-1&&a!=='"'&&a!=="'"&&(n[r]+=" ")}return n.join("")}function N3(t,e,n){const r=qE(t.schema,e),i=t.settings.allowParseErrors&&t.schema.space==="html"?0:1,a=t.settings.allowDangerousCharacters?0:1;let l=t.quote,c;if(r.overloadedBoolean&&(n===r.attribute||n==="")?n=!0:(r.boolean||r.overloadedBoolean)&&(typeof n!="string"||n===r.attribute||n==="")&&(n=!!n),n==null||n===!1||typeof n=="number"&&Number.isNaN(n))return"";const f=Ba(r.attribute,Object.assign({},t.settings.characterReferences,{subset:Ec.name[i][a]}));return n===!0||(n=Array.isArray(n)?(r.commaSeparated?HE:GE)(n,{padLeft:!t.settings.tightCommaSeparatedLists}):String(n),t.settings.collapseEmptyAttributes&&!n)?f:(t.settings.preferUnquoted&&(c=Ba(n,Object.assign({},t.settings.characterReferences,{attribute:!0,subset:Ec.unquoted[i][a]}))),c!==n&&(t.settings.quoteSmart&&vf(n,l)>vf(n,t.alternative)&&(l=t.alternative),c=l+Ba(n,Object.assign({},t.settings.characterReferences,{subset:(l==="'"?Ec.single:Ec.double)[i][a],attribute:!0}))+l),f+(c&&"="+c))}const D3=["<","&"];function JE(t,e,n,r){return n&&n.type==="element"&&(n.tagName==="script"||n.tagName==="style")?t.value:Ba(t.value,Object.assign({},r.settings.characterReferences,{subset:D3}))}function M3(t,e,n,r){return r.settings.allowDangerousHtml?t.value:JE(t,e,n,r)}function L3(t,e,n,r){return r.all(t)}const z3=$4("type",{invalid:P3,unknown:j3,handlers:{comment:o3,doctype:l3,element:O3,raw:M3,root:L3,text:JE}});function P3(t){throw new Error("Expected node, not `"+t+"`")}function j3(t){const e=t;throw new Error("Cannot compile unknown node `"+e.type+"`")}const B3={},U3={},$3=[];function q3(t,e){const n=e||B3,r=n.quote||'"',i=r==='"'?"'":'"';if(r!=='"'&&r!=="'")throw new Error("Invalid quote `"+r+"`, expected `'` or `\"`");return{one:F3,all:V3,settings:{omitOptionalTags:n.omitOptionalTags||!1,allowParseErrors:n.allowParseErrors||!1,allowDangerousCharacters:n.allowDangerousCharacters||!1,quoteSmart:n.quoteSmart||!1,preferUnquoted:n.preferUnquoted||!1,tightAttributes:n.tightAttributes||!1,upperDoctype:n.upperDoctype||!1,tightDoctype:n.tightDoctype||!1,bogusComments:n.bogusComments||!1,tightCommaSeparatedLists:n.tightCommaSeparatedLists||!1,tightSelfClosing:n.tightSelfClosing||!1,collapseEmptyAttributes:n.collapseEmptyAttributes||!1,allowDangerousHtml:n.allowDangerousHtml||!1,voids:n.voids||N4,characterReferences:n.characterReferences||U3,closeSelfClosing:n.closeSelfClosing||!1,closeEmptyElements:n.closeEmptyElements||!1},schema:n.space==="svg"?Jl:FE,quote:r,alternative:i}.one(Array.isArray(t)?{type:"root",children:t}:t,void 0,void 0)}function F3(t,e,n){return z3(t,e,n,this)}function V3(t){const e=[],n=t&&t.children||$3;let r=-1;for(;++r<n.length;)e[r]=this.one(n[r],r,t);return e.join("")}function wf(t,e){const n=typeof t=="string"?{}:{...t.colorReplacements},r=typeof t=="string"?t:t.name;for(const[i,a]of Object.entries(e?.colorReplacements||{}))typeof a=="string"?n[i]=a:i===r&&Object.assign(n,a);return n}function Gi(t,e){return t&&(e?.[t?.toLowerCase()]||t)}function H3(t){return Array.isArray(t)?t:[t]}async function YE(t){return Promise.resolve(typeof t=="function"?t():t).then(e=>e.default||e)}function gy(t){return!t||["plaintext","txt","text","plain"].includes(t)}function XE(t){return t==="ansi"||gy(t)}function yy(t){return t==="none"}function WE(t){return yy(t)}function ek(t,e){if(!e)return t;t.properties||={},t.properties.class||=[],typeof t.properties.class=="string"&&(t.properties.class=t.properties.class.split(/\s+/g)),Array.isArray(t.properties.class)||(t.properties.class=[]);const n=Array.isArray(e)?e:e.split(/\s+/g);for(const r of n)r&&!t.properties.class.includes(r)&&t.properties.class.push(r);return t}function Jf(t,e=!1){if(t.length===0)return[["",0]];const n=t.split(/(\r?\n)/g);let r=0;const i=[];for(let a=0;a<n.length;a+=2){const l=e?n[a]+(n[a+1]||""):n[a];i.push([l,r]),r+=n[a].length,r+=n[a+1]?.length||0}return i}function G3(t){const e=Jf(t,!0).map(([i])=>i);function n(i){if(i===t.length)return{line:e.length-1,character:e[e.length-1].length};let a=i,l=0;for(const c of e){if(a<c.length)break;a-=c.length,l++}return{line:l,character:a}}function r(i,a){let l=0;for(let c=0;c<i;c++)l+=e[c].length;return l+=a,l}return{lines:e,indexToPos:n,posToIndex:r}}function K3(t,e,n){const r=new Set;for(const a of t.matchAll(/:?lang=["']([^"']+)["']/g)){const l=a[1].toLowerCase().trim();l&&r.add(l)}for(const a of t.matchAll(/(?:```|~~~)([\w-]+)/g)){const l=a[1].toLowerCase().trim();l&&r.add(l)}for(const a of t.matchAll(/\\begin\{([\w-]+)\}/g)){const l=a[1].toLowerCase().trim();l&&r.add(l)}for(const a of t.matchAll(/<script\s+(?:type|lang)=["']([^"']+)["']/gi)){const l=a[1].toLowerCase().trim(),c=l.includes("/")?l.split("/").pop():l;c&&r.add(c)}if(!n)return Array.from(r);const i=n.getBundledLanguages();return Array.from(r).filter(a=>a&&i[a])}const _y="light-dark()",Z3=["color","background-color"];function Q3(t,e){let n=0;const r=[];for(const i of e)i>n&&r.push({...t,content:t.content.slice(n,i),offset:t.offset+n}),n=i;return n<t.content.length&&r.push({...t,content:t.content.slice(n),offset:t.offset+n}),r}function J3(t,e){const n=Array.from(e instanceof Set?e:new Set(e)).sort((r,i)=>r-i);return n.length?t.map(r=>r.flatMap(i=>{const a=n.filter(l=>i.offset<l&&l<i.offset+i.content.length).map(l=>l-i.offset).sort((l,c)=>l-c);return a.length?Q3(i,a):i})):t}function Y3(t,e,n,r,i="css-vars"){const a={content:t.content,explanation:t.explanation,offset:t.offset},l=e.map(m=>xf(t.variants[m])),c=new Set(l.flatMap(m=>Object.keys(m))),f={},h=(m,p)=>{const _=p==="color"?"":p==="background-color"?"-bg":`-${p}`;return n+e[m]+(p==="color"?"":_)};return l.forEach((m,p)=>{for(const _ of c){const y=m[_]||"inherit";if(p===0&&r&&Z3.includes(_))if(r===_y&&l.length>1){const v=e.findIndex(R=>R==="light"),w=e.findIndex(R=>R==="dark");if(v===-1||w===-1)throw new It('When using `defaultColor: "light-dark()"`, you must provide both `light` and `dark` themes');const k=l[v][_]||"inherit",S=l[w][_]||"inherit";f[_]=`light-dark(${k}, ${S})`,i==="css-vars"&&(f[h(p,_)]=y)}else f[_]=y;else i==="css-vars"&&(f[h(p,_)]=y)}}),a.htmlStyle=f,a}function xf(t){const e={};if(t.color&&(e.color=t.color),t.bgColor&&(e["background-color"]=t.bgColor),t.fontStyle){t.fontStyle&mn.Italic&&(e["font-style"]="italic"),t.fontStyle&mn.Bold&&(e["font-weight"]="bold");const n=[];t.fontStyle&mn.Underline&&n.push("underline"),t.fontStyle&mn.Strikethrough&&n.push("line-through"),n.length&&(e["text-decoration"]=n.join(" "))}return e}function pg(t){return typeof t=="string"?t:Object.entries(t).map(([e,n])=>`${e}:${n}`).join(";")}const tk=new WeakMap;function Yf(t,e){tk.set(t,e)}function jl(t){return tk.get(t)}class Ja{_stacks={};lang;get themes(){return Object.keys(this._stacks)}get theme(){return this.themes[0]}get _stack(){return this._stacks[this.theme]}static initial(e,n){return new Ja(Object.fromEntries(H3(n).map(r=>[r,ug])),e)}constructor(...e){if(e.length===2){const[n,r]=e;this.lang=r,this._stacks=n}else{const[n,r,i]=e;this.lang=r,this._stacks={[i]:n}}}getInternalStack(e=this.theme){return this._stacks[e]}getScopes(e=this.theme){return X3(this._stacks[e])}toJSON(){return{lang:this.lang,theme:this.theme,themes:this.themes,scopes:this.getScopes()}}}function X3(t){const e=[],n=new Set;function r(i){if(n.has(i))return;n.add(i);const a=i?.nameScopesList?.scopeName;a&&e.push(a),i.parent&&r(i.parent)}return r(t),e}function W3(t,e){if(!(t instanceof Ja))throw new It("Invalid grammar state");return t.getInternalStack(e)}function eP(){const t=new WeakMap;function e(n){if(!t.has(n.meta)){let r=function(l){if(typeof l=="number"){if(l<0||l>n.source.length)throw new It(`Invalid decoration offset: ${l}. Code length: ${n.source.length}`);return{...i.indexToPos(l),offset:l}}else{const c=i.lines[l.line];if(c===void 0)throw new It(`Invalid decoration position ${JSON.stringify(l)}. Lines length: ${i.lines.length}`);let f=l.character;if(f<0&&(f=c.length+f),f<0||f>c.length)throw new It(`Invalid decoration position ${JSON.stringify(l)}. Line ${l.line} length: ${c.length}`);return{...l,character:f,offset:i.posToIndex(l.line,f)}}};const i=G3(n.source),a=(n.options.decorations||[]).map(l=>({...l,start:r(l.start),end:r(l.end)}));tP(a),t.set(n.meta,{decorations:a,converter:i,source:n.source})}return t.get(n.meta)}return{name:"shiki:decorations",tokens(n){if(!this.options.decorations?.length)return;const i=e(this).decorations.flatMap(l=>[l.start.offset,l.end.offset]);return J3(n,i)},code(n){if(!this.options.decorations?.length)return;const r=e(this),i=Array.from(n.children).filter(m=>m.type==="element"&&m.tagName==="span");if(i.length!==r.converter.lines.length)throw new It(`Number of lines in code element (${i.length}) does not match the number of lines in the source (${r.converter.lines.length}). Failed to apply decorations.`);function a(m,p,_,y){const v=i[m];let w="",k=-1,S=-1;if(p===0&&(k=0),_===0&&(S=0),_===Number.POSITIVE_INFINITY&&(S=v.children.length),k===-1||S===-1)for(let T=0;T<v.children.length;T++)w+=nk(v.children[T]),k===-1&&w.length===p&&(k=T+1),S===-1&&w.length===_&&(S=T+1);if(k===-1)throw new It(`Failed to find start index for decoration ${JSON.stringify(y.start)}`);if(S===-1)throw new It(`Failed to find end index for decoration ${JSON.stringify(y.end)}`);const R=v.children.slice(k,S);if(!y.alwaysWrap&&R.length===v.children.length)c(v,y,"line");else if(!y.alwaysWrap&&R.length===1&&R[0].type==="element")c(R[0],y,"token");else{const T={type:"element",tagName:"span",properties:{},children:R};c(T,y,"wrapper"),v.children.splice(k,R.length,T)}}function l(m,p){i[m]=c(i[m],p,"line")}function c(m,p,_){const y=p.properties||{},v=p.transform||(w=>w);return m.tagName=p.tagName||"span",m.properties={...m.properties,...y,class:m.properties.class},p.properties?.class&&ek(m,p.properties.class),m=v(m,_)||m,m}const f=[],h=r.decorations.sort((m,p)=>p.start.offset-m.start.offset||m.end.offset-p.end.offset);for(const m of h){const{start:p,end:_}=m;if(p.line===_.line)a(p.line,p.character,_.character,m);else if(p.line<_.line){a(p.line,p.character,Number.POSITIVE_INFINITY,m);for(let y=p.line+1;y<_.line;y++)f.unshift(()=>l(y,m));a(_.line,0,_.character,m)}}f.forEach(m=>m())}}}function tP(t){for(let e=0;e<t.length;e++){const n=t[e];if(n.start.offset>n.end.offset)throw new It(`Invalid decoration range: ${JSON.stringify(n.start)} - ${JSON.stringify(n.end)}`);for(let r=e+1;r<t.length;r++){const i=t[r],a=n.start.offset<=i.start.offset&&i.start.offset<n.end.offset,l=n.start.offset<i.end.offset&&i.end.offset<=n.end.offset,c=i.start.offset<=n.start.offset&&n.start.offset<i.end.offset,f=i.start.offset<n.end.offset&&n.end.offset<=i.end.offset;if(a||l||c||f){if(a&&l||c&&f||c&&n.start.offset===n.end.offset||l&&i.start.offset===i.end.offset)continue;throw new It(`Decorations ${JSON.stringify(n.start)} and ${JSON.stringify(i.start)} intersect.`)}}}}function nk(t){return t.type==="text"?t.value:t.type==="element"?t.children.map(nk).join(""):""}const nP=[eP()];function Sf(t){const e=rP(t.transformers||[]);return[...e.pre,...e.normal,...e.post,...nP]}function rP(t){const e=[],n=[],r=[];for(const i of t)switch(i.enforce){case"pre":e.push(i);break;case"post":n.push(i);break;default:r.push(i)}return{pre:e,post:n,normal:r}}var Ts=["black","red","green","yellow","blue","magenta","cyan","white","brightBlack","brightRed","brightGreen","brightYellow","brightBlue","brightMagenta","brightCyan","brightWhite"],nm={1:"bold",2:"dim",3:"italic",4:"underline",7:"reverse",8:"hidden",9:"strikethrough"};function iP(t,e){const n=t.indexOf("\x1B",e);if(n!==-1&&t[n+1]==="["){const r=t.indexOf("m",n);if(r!==-1)return{sequence:t.substring(n+2,r).split(";"),startPosition:n,position:r+1}}return{position:t.length}}function $x(t){const e=t.shift();if(e==="2"){const n=t.splice(0,3).map(r=>Number.parseInt(r));return n.length!==3||n.some(r=>Number.isNaN(r))?void 0:{type:"rgb",rgb:n}}else if(e==="5"){const n=t.shift();if(n)return{type:"table",index:Number(n)}}}function sP(t){const e=[];for(;t.length>0;){const n=t.shift();if(!n)continue;const r=Number.parseInt(n);if(!Number.isNaN(r))if(r===0)e.push({type:"resetAll"});else if(r<=9)nm[r]&&e.push({type:"setDecoration",value:nm[r]});else if(r<=29){const i=nm[r-20];i&&(e.push({type:"resetDecoration",value:i}),i==="dim"&&e.push({type:"resetDecoration",value:"bold"}))}else if(r<=37)e.push({type:"setForegroundColor",value:{type:"named",name:Ts[r-30]}});else if(r===38){const i=$x(t);i&&e.push({type:"setForegroundColor",value:i})}else if(r===39)e.push({type:"resetForegroundColor"});else if(r<=47)e.push({type:"setBackgroundColor",value:{type:"named",name:Ts[r-40]}});else if(r===48){const i=$x(t);i&&e.push({type:"setBackgroundColor",value:i})}else r===49?e.push({type:"resetBackgroundColor"}):r===53?e.push({type:"setDecoration",value:"overline"}):r===55?e.push({type:"resetDecoration",value:"overline"}):r>=90&&r<=97?e.push({type:"setForegroundColor",value:{type:"named",name:Ts[r-90+8]}}):r>=100&&r<=107&&e.push({type:"setBackgroundColor",value:{type:"named",name:Ts[r-100+8]}})}return e}function aP(){let t=null,e=null,n=new Set;return{parse(r){const i=[];let a=0;do{const l=iP(r,a),c=l.sequence?r.substring(a,l.startPosition):r.substring(a);if(c.length>0&&i.push({value:c,foreground:t,background:e,decorations:new Set(n)}),l.sequence){const f=sP(l.sequence);for(const h of f)h.type==="resetAll"?(t=null,e=null,n.clear()):h.type==="resetForegroundColor"?t=null:h.type==="resetBackgroundColor"?e=null:h.type==="resetDecoration"&&n.delete(h.value);for(const h of f)h.type==="setForegroundColor"?t=h.value:h.type==="setBackgroundColor"?e=h.value:h.type==="setDecoration"&&n.add(h.value)}a=l.position}while(a<r.length);return i}}}var oP={black:"#000000",red:"#bb0000",green:"#00bb00",yellow:"#bbbb00",blue:"#0000bb",magenta:"#ff00ff",cyan:"#00bbbb",white:"#eeeeee",brightBlack:"#555555",brightRed:"#ff5555",brightGreen:"#00ff00",brightYellow:"#ffff55",brightBlue:"#5555ff",brightMagenta:"#ff55ff",brightCyan:"#55ffff",brightWhite:"#ffffff"};function lP(t=oP){function e(c){return t[c]}function n(c){return`#${c.map(f=>Math.max(0,Math.min(f,255)).toString(16).padStart(2,"0")).join("")}`}let r;function i(){if(r)return r;r=[];for(let h=0;h<Ts.length;h++)r.push(e(Ts[h]));let c=[0,95,135,175,215,255];for(let h=0;h<6;h++)for(let m=0;m<6;m++)for(let p=0;p<6;p++)r.push(n([c[h],c[m],c[p]]));let f=8;for(let h=0;h<24;h++,f+=10)r.push(n([f,f,f]));return r}function a(c){return i()[c]}function l(c){switch(c.type){case"named":return e(c.name);case"rgb":return n(c.rgb);case"table":return a(c.index)}}return{value:l}}const uP={black:"#000000",red:"#cd3131",green:"#0DBC79",yellow:"#E5E510",blue:"#2472C8",magenta:"#BC3FBC",cyan:"#11A8CD",white:"#E5E5E5",brightBlack:"#666666",brightRed:"#F14C4C",brightGreen:"#23D18B",brightYellow:"#F5F543",brightBlue:"#3B8EEA",brightMagenta:"#D670D6",brightCyan:"#29B8DB",brightWhite:"#FFFFFF"};function cP(t,e,n){const r=wf(t,n),i=Jf(e),a=Object.fromEntries(Ts.map(f=>{const h=`terminal.ansi${f[0].toUpperCase()}${f.substring(1)}`,m=t.colors?.[h];return[f,m||uP[f]]})),l=lP(a),c=aP();return i.map(f=>c.parse(f[0]).map(h=>{let m,p;h.decorations.has("reverse")?(m=h.background?l.value(h.background):t.bg,p=h.foreground?l.value(h.foreground):t.fg):(m=h.foreground?l.value(h.foreground):t.fg,p=h.background?l.value(h.background):void 0),m=Gi(m,r),p=Gi(p,r),h.decorations.has("dim")&&(m=fP(m));let _=mn.None;return h.decorations.has("bold")&&(_|=mn.Bold),h.decorations.has("italic")&&(_|=mn.Italic),h.decorations.has("underline")&&(_|=mn.Underline),h.decorations.has("strikethrough")&&(_|=mn.Strikethrough),{content:h.value,offset:f[1],color:m,bgColor:p,fontStyle:_}}))}function fP(t){const e=t.match(/#([0-9a-f]{3,8})/i);if(e){const r=e[1];if(r.length===8){const i=Math.round(Number.parseInt(r.slice(6,8),16)/2).toString(16).padStart(2,"0");return`#${r.slice(0,6)}${i}`}else{if(r.length===6)return`#${r}80`;if(r.length===4){const i=r[0],a=r[1],l=r[2],c=r[3],f=Math.round(Number.parseInt(`${c}${c}`,16)/2).toString(16).padStart(2,"0");return`#${i}${i}${a}${a}${l}${l}${f}`}else if(r.length===3){const i=r[0],a=r[1],l=r[2];return`#${i}${i}${a}${a}${l}${l}80`}}}const n=t.match(/var\((--[\w-]+-ansi-[\w-]+)\)/);return n?`var(${n[1]}-dim)`:t}function by(t,e,n={}){const{theme:r=t.getLoadedThemes()[0]}=n,i=t.resolveLangAlias(n.lang||"text");if(gy(i)||yy(r))return Jf(e).map(f=>[{content:f[0],offset:f[1]}]);const{theme:a,colorMap:l}=t.setTheme(r);if(i==="ansi")return cP(a,e,n);const c=t.getLanguage(n.lang||"text");if(n.grammarState){if(n.grammarState.lang!==c.name)throw new It(`Grammar state language "${n.grammarState.lang}" does not match highlight language "${c.name}"`);if(!n.grammarState.themes.includes(a.name))throw new It(`Grammar state themes "${n.grammarState.themes}" do not contain highlight theme "${a.name}"`)}return dP(e,c,a,l,n)}function hP(...t){if(t.length===2)return jl(t[1]);const[e,n,r={}]=t,{lang:i="text",theme:a=e.getLoadedThemes()[0]}=r;if(gy(i)||yy(a))throw new It("Plain language does not have grammar state");if(i==="ansi")throw new It("ANSI language does not have grammar state");const{theme:l,colorMap:c}=e.setTheme(a),f=e.getLanguage(i);return new Ja(vy(n,f,l,c,r).stateStack,f.name,l.name)}function dP(t,e,n,r,i){const a=vy(t,e,n,r,i),l=new Ja(a.stateStack,e.name,n.name);return Yf(a.tokens,l),a.tokens}function vy(t,e,n,r,i){const a=wf(n,i),{tokenizeMaxLineLength:l=0,tokenizeTimeLimit:c=500}=i,f=Jf(t);let h=i.grammarState?W3(i.grammarState,n.name)??ug:i.grammarContextCode!=null?vy(i.grammarContextCode,e,n,r,{...i,grammarState:void 0,grammarContextCode:void 0}).stateStack:ug,m=[];const p=[];for(let _=0,y=f.length;_<y;_++){const[v,w]=f[_];if(v===""){m=[],p.push([]);continue}if(l>0&&v.length>=l){m=[],p.push([{content:v,offset:w,color:"",fontStyle:0}]);continue}let k,S,R;i.includeExplanation&&(k=e.tokenizeLine(v,h,c),S=k.tokens,R=0);const T=e.tokenizeLine2(v,h,c),z=T.tokens.length/2;for(let L=0;L<z;L++){const E=T.tokens[2*L],M=L+1<z?T.tokens[2*L+2]:v.length;if(E===M)continue;const $=T.tokens[2*L+1],F=Gi(r[Va.getForeground($)],a),P=Va.getFontStyle($),Z={content:v.substring(E,M),offset:w+E,color:F,fontStyle:P};if(i.includeExplanation){const se=[];if(i.includeExplanation!=="scopeName")for(const V of n.settings){let G;switch(typeof V.scope){case"string":G=V.scope.split(/,/).map(B=>B.trim());break;case"object":G=V.scope;break;default:continue}se.push({settings:V,selectors:G.map(B=>B.split(/ /))})}Z.explanation=[];let me=0;for(;E+me<M;){const V=S[R],G=v.substring(V.startIndex,V.endIndex);me+=G.length,Z.explanation.push({content:G,scopes:i.includeExplanation==="scopeName"?pP(V.scopes):mP(se,V.scopes)}),R+=1}}m.push(Z)}p.push(m),m=[],h=T.ruleStack}return{tokens:p,stateStack:h}}function pP(t){return t.map(e=>({scopeName:e}))}function mP(t,e){const n=[];for(let r=0,i=e.length;r<i;r++){const a=e[r];n[r]={scopeName:a,themeMatches:yP(t,a,e.slice(0,r))}}return n}function qx(t,e){return t===e||e.substring(0,t.length)===t&&e[t.length]==="."}function gP(t,e,n){if(!qx(t[t.length-1],e))return!1;let r=t.length-2,i=n.length-1;for(;r>=0&&i>=0;)qx(t[r],n[i])&&(r-=1),i-=1;return r===-1}function yP(t,e,n){const r=[];for(const{selectors:i,settings:a}of t)for(const l of i)if(gP(l,e,n)){r.push(a);break}return r}function rk(t,e,n){const r=Object.entries(n.themes).filter(f=>f[1]).map(f=>({color:f[0],theme:f[1]})),i=r.map(f=>{const h=by(t,e,{...n,theme:f.theme}),m=jl(h),p=typeof f.theme=="string"?f.theme:f.theme.name;return{tokens:h,state:m,theme:p}}),a=_P(...i.map(f=>f.tokens)),l=a[0].map((f,h)=>f.map((m,p)=>{const _={content:m.content,variants:{},offset:m.offset};return"includeExplanation"in n&&n.includeExplanation&&(_.explanation=m.explanation),a.forEach((y,v)=>{const{content:w,explanation:k,offset:S,...R}=y[h][p];_.variants[r[v].color]=R}),_})),c=i[0].state?new Ja(Object.fromEntries(i.map(f=>[f.theme,f.state?.getInternalStack(f.theme)])),i[0].state.lang):void 0;return c&&Yf(l,c),l}function _P(...t){const e=t.map(()=>[]),n=t.length;for(let r=0;r<t[0].length;r++){const i=t.map(f=>f[r]),a=e.map(()=>[]);e.forEach((f,h)=>f.push(a[h]));const l=i.map(()=>0),c=i.map(f=>f[0]);for(;c.every(f=>f);){const f=Math.min(...c.map(h=>h.content.length));for(let h=0;h<n;h++){const m=c[h];m.content.length===f?(a[h].push(m),l[h]+=1,c[h]=i[h][l[h]]):(a[h].push({...m,content:m.content.slice(0,f)}),c[h]={...m,content:m.content.slice(f),offset:m.offset+f})}}}return e}function Ef(t,e,n){let r,i,a,l,c,f;if("themes"in n){const{defaultColor:h="light",cssVariablePrefix:m="--shiki-",colorsRendering:p="css-vars"}=n,_=Object.entries(n.themes).filter(S=>S[1]).map(S=>({color:S[0],theme:S[1]})).sort((S,R)=>S.color===h?-1:R.color===h?1:0);if(_.length===0)throw new It("`themes` option must not be empty");const y=rk(t,e,n);if(f=jl(y),h&&_y!==h&&!_.find(S=>S.color===h))throw new It(`\`themes\` option must contain the defaultColor key \`${h}\``);const v=_.map(S=>t.getTheme(S.theme)),w=_.map(S=>S.color);a=y.map(S=>S.map(R=>Y3(R,w,m,h,p))),f&&Yf(a,f);const k=_.map(S=>wf(S.theme,n));i=Fx(_,v,k,m,h,"fg",p),r=Fx(_,v,k,m,h,"bg",p),l=`shiki-themes ${v.map(S=>S.name).join(" ")}`,c=h?void 0:[i,r].join(";")}else if("theme"in n){const h=wf(n.theme,n);a=by(t,e,n);const m=t.getTheme(n.theme);r=Gi(m.bg,h),i=Gi(m.fg,h),l=m.name,f=jl(a)}else throw new It("Invalid options, either `theme` or `themes` must be provided");return{tokens:a,fg:i,bg:r,themeName:l,rootStyle:c,grammarState:f}}function Fx(t,e,n,r,i,a,l){return t.map((c,f)=>{const h=Gi(e[f][a],n[f])||"inherit",m=`${r+c.color}${a==="bg"?"-bg":""}:${h}`;if(f===0&&i){if(i===_y&&t.length>1){const p=t.findIndex(w=>w.color==="light"),_=t.findIndex(w=>w.color==="dark");if(p===-1||_===-1)throw new It('When using `defaultColor: "light-dark()"`, you must provide both `light` and `dark` themes');const y=Gi(e[p][a],n[p])||"inherit",v=Gi(e[_][a],n[_])||"inherit";return`light-dark(${y}, ${v});${m}`}return h}return l==="css-vars"?m:null}).filter(c=>!!c).join(";")}function kf(t,e,n,r={meta:{},options:n,codeToHast:(i,a)=>kf(t,i,a),codeToTokens:(i,a)=>Ef(t,i,a)}){let i=e;for(const v of Sf(n))i=v.preprocess?.call(r,i,n)||i;let{tokens:a,fg:l,bg:c,themeName:f,rootStyle:h,grammarState:m}=Ef(t,i,n);const{mergeWhitespaces:p=!0,mergeSameStyleTokens:_=!1}=n;p===!0?a=vP(a):p==="never"&&(a=wP(a)),_&&(a=xP(a));const y={...r,get source(){return i}};for(const v of Sf(n))a=v.tokens?.call(y,a)||a;return bP(a,{...n,fg:l,bg:c,themeName:f,rootStyle:n.rootStyle===!1?!1:n.rootStyle??h},y,m)}function bP(t,e,n,r=jl(t)){const i=Sf(e),a=[],l={type:"root",children:[]},{structure:c="classic",tabindex:f="0"}=e,h={class:`shiki ${e.themeName||""}`};e.rootStyle!==!1&&(e.rootStyle!=null?h.style=e.rootStyle:h.style=`background-color:${e.bg};color:${e.fg}`),f!==!1&&f!=null&&(h.tabindex=f.toString());for(const[w,k]of Object.entries(e.meta||{}))w.startsWith("_")||(h[w]=k);let m={type:"element",tagName:"pre",properties:h,children:[]},p={type:"element",tagName:"code",properties:{},children:a};const _=[],y={...n,structure:c,addClassToHast:ek,get source(){return n.source},get tokens(){return t},get options(){return e},get root(){return l},get pre(){return m},get code(){return p},get lines(){return _}};if(t.forEach((w,k)=>{k&&(c==="inline"?l.children.push({type:"element",tagName:"br",properties:{},children:[]}):c==="classic"&&a.push({type:"text",value:`
`}));let S={type:"element",tagName:"span",properties:{class:"line"},children:[]},R=0;for(const T of w){let z={type:"element",tagName:"span",properties:{...T.htmlAttrs},children:[{type:"text",value:T.content}]};const L=pg(T.htmlStyle||xf(T));L&&(z.properties.style=L);for(const E of i)z=E?.span?.call(y,z,k+1,R,S,T)||z;c==="inline"?l.children.push(z):c==="classic"&&S.children.push(z),R+=T.content.length}if(c==="classic"){for(const T of i)S=T?.line?.call(y,S,k+1)||S;_.push(S),a.push(S)}else c==="inline"&&_.push(S)}),c==="classic"){for(const w of i)p=w?.code?.call(y,p)||p;m.children.push(p);for(const w of i)m=w?.pre?.call(y,m)||m;l.children.push(m)}else if(c==="inline"){const w=[];let k={type:"element",tagName:"span",properties:{class:"line"},children:[]};for(const T of l.children)T.type==="element"&&T.tagName==="br"?(w.push(k),k={type:"element",tagName:"span",properties:{class:"line"},children:[]}):(T.type==="element"||T.type==="text")&&k.children.push(T);w.push(k);let R={type:"element",tagName:"code",properties:{},children:w};for(const T of i)R=T?.code?.call(y,R)||R;l.children=[];for(let T=0;T<R.children.length;T++){T>0&&l.children.push({type:"element",tagName:"br",properties:{},children:[]});const z=R.children[T];z.type==="element"&&l.children.push(...z.children)}}let v=l;for(const w of i)v=w?.root?.call(y,v)||v;return r&&Yf(v,r),v}function vP(t){return t.map(e=>{const n=[];let r="",i;return e.forEach((a,l)=>{const f=!(a.fontStyle&&(a.fontStyle&mn.Underline||a.fontStyle&mn.Strikethrough));f&&a.content.match(/^\s+$/)&&e[l+1]?(i===void 0&&(i=a.offset),r+=a.content):r?(f?n.push({...a,offset:i,content:r+a.content}):n.push({content:r,offset:i},a),i=void 0,r=""):n.push(a)}),n})}function wP(t){return t.map(e=>e.flatMap(n=>{if(n.content.match(/^\s+$/))return n;const r=n.content.match(/^(\s*)(.*?)(\s*)$/);if(!r)return n;const[,i,a,l]=r;if(!i&&!l)return n;const c=[{...n,offset:n.offset+i.length,content:a}];return i&&c.unshift({content:i,offset:n.offset}),l&&c.push({content:l,offset:n.offset+i.length+a.length}),c}))}function xP(t){return t.map(e=>{const n=[];for(const r of e){if(n.length===0){n.push({...r});continue}const i=n[n.length-1],a=pg(i.htmlStyle||xf(i)),l=pg(r.htmlStyle||xf(r)),c=i.fontStyle&&(i.fontStyle&mn.Underline||i.fontStyle&mn.Strikethrough),f=r.fontStyle&&(r.fontStyle&mn.Underline||r.fontStyle&mn.Strikethrough);!c&&!f&&a===l?i.content+=r.content:n.push({...r})}return n})}const SP=q3;function EP(t,e,n){const r={meta:{},options:n,codeToHast:(a,l)=>kf(t,a,l),codeToTokens:(a,l)=>Ef(t,a,l)};let i=SP(kf(t,e,n,r));for(const a of Sf(n))i=a.postprocess?.call(r,i,n)||i;return i}const Vx={light:"#333333",dark:"#bbbbbb"},Hx={light:"#fffffe",dark:"#1e1e1e"},Gx="__shiki_resolved";function wy(t){if(t?.[Gx])return t;const e={...t};e.tokenColors&&!e.settings&&(e.settings=e.tokenColors,delete e.tokenColors),e.type||="dark",e.colorReplacements={...e.colorReplacements},e.settings||=[];let{bg:n,fg:r}=e;if(!n||!r){const c=e.settings?e.settings.find(f=>!f.name&&!f.scope):void 0;c?.settings?.foreground&&(r=c.settings.foreground),c?.settings?.background&&(n=c.settings.background),!r&&e?.colors?.["editor.foreground"]&&(r=e.colors["editor.foreground"]),!n&&e?.colors?.["editor.background"]&&(n=e.colors["editor.background"]),r||(r=e.type==="light"?Vx.light:Vx.dark),n||(n=e.type==="light"?Hx.light:Hx.dark),e.fg=r,e.bg=n}e.settings[0]&&e.settings[0].settings&&!e.settings[0].scope||e.settings.unshift({settings:{foreground:e.fg,background:e.bg}});let i=0;const a=new Map;function l(c){if(a.has(c))return a.get(c);i+=1;const f=`#${i.toString(16).padStart(8,"0").toLowerCase()}`;return e.colorReplacements?.[`#${f}`]?l(c):(a.set(c,f),f)}e.settings=e.settings.map(c=>{const f=c.settings?.foreground&&!c.settings.foreground.startsWith("#"),h=c.settings?.background&&!c.settings.background.startsWith("#");if(!f&&!h)return c;const m={...c,settings:{...c.settings}};if(f){const p=l(c.settings.foreground);e.colorReplacements[p]=c.settings.foreground,m.settings.foreground=p}if(h){const p=l(c.settings.background);e.colorReplacements[p]=c.settings.background,m.settings.background=p}return m});for(const c of Object.keys(e.colors||{}))if((c==="editor.foreground"||c==="editor.background"||c.startsWith("terminal.ansi"))&&!e.colors[c]?.startsWith("#")){const f=l(e.colors[c]);e.colorReplacements[f]=e.colors[c],e.colors[c]=f}return Object.defineProperty(e,Gx,{enumerable:!1,writable:!1,value:!0}),e}async function ik(t){return Array.from(new Set((await Promise.all(t.filter(e=>!XE(e)).map(async e=>await YE(e).then(n=>Array.isArray(n)?n:[n])))).flat()))}async function sk(t){return(await Promise.all(t.map(async n=>WE(n)?null:wy(await YE(n))))).filter(n=>!!n)}let kP=3;function CP(t,e=3){e>kP||console.trace(`[SHIKI DEPRECATE]: ${t}`)}let Ma=class extends Error{constructor(e){super(e),this.name="ShikiError"}};function ak(t,e){if(!e)return t;if(e[t]){const n=new Set([t]);for(;e[t];){if(t=e[t],n.has(t))throw new Ma(`Circular alias \`${Array.from(n).join(" -> ")} -> ${t}\``);n.add(t)}}return t}class TP extends I4{constructor(e,n,r,i={}){super(e),this._resolver=e,this._themes=n,this._langs=r,this._alias=i,this._themes.map(a=>this.loadTheme(a)),this.loadLanguages(this._langs)}_resolvedThemes=new Map;_resolvedGrammars=new Map;_langMap=new Map;_langGraph=new Map;_textmateThemeCache=new WeakMap;_loadedThemesCache=null;_loadedLanguagesCache=null;getTheme(e){return typeof e=="string"?this._resolvedThemes.get(e):this.loadTheme(e)}loadTheme(e){const n=wy(e);return n.name&&(this._resolvedThemes.set(n.name,n),this._loadedThemesCache=null),n}getLoadedThemes(){return this._loadedThemesCache||(this._loadedThemesCache=[...this._resolvedThemes.keys()]),this._loadedThemesCache}setTheme(e){let n=this._textmateThemeCache.get(e);n||(n=mf.createFromRawTheme(e),this._textmateThemeCache.set(e,n)),this._syncRegistry.setTheme(n)}getGrammar(e){return e=ak(e,this._alias),this._resolvedGrammars.get(e)}loadLanguage(e){if(this.getGrammar(e.name))return;const n=new Set([...this._langMap.values()].filter(a=>a.embeddedLangsLazy?.includes(e.name)));this._resolver.addLanguage(e);const r={balancedBracketSelectors:e.balancedBracketSelectors||["*"],unbalancedBracketSelectors:e.unbalancedBracketSelectors||[]};this._syncRegistry._rawGrammars.set(e.scopeName,e);const i=this.loadGrammarWithConfiguration(e.scopeName,1,r);if(i.name=e.name,this._resolvedGrammars.set(e.name,i),e.aliases&&e.aliases.forEach(a=>{this._alias[a]=e.name}),this._loadedLanguagesCache=null,n.size)for(const a of n)this._resolvedGrammars.delete(a.name),this._loadedLanguagesCache=null,this._syncRegistry?._injectionGrammars?.delete(a.scopeName),this._syncRegistry?._grammars?.delete(a.scopeName),this.loadLanguage(this._langMap.get(a.name))}dispose(){super.dispose(),this._resolvedThemes.clear(),this._resolvedGrammars.clear(),this._langMap.clear(),this._langGraph.clear(),this._loadedThemesCache=null}loadLanguages(e){for(const i of e)this.resolveEmbeddedLanguages(i);const n=Array.from(this._langGraph.entries()),r=n.filter(([i,a])=>!a);if(r.length){const i=n.filter(([a,l])=>l?(l.embeddedLanguages||l.embeddedLangs)?.some(f=>r.map(([h])=>h).includes(f)):!1).filter(a=>!r.includes(a));throw new Ma(`Missing languages ${r.map(([a])=>`\`${a}\``).join(", ")}, required by ${i.map(([a])=>`\`${a}\``).join(", ")}`)}for(const[i,a]of n)this._resolver.addLanguage(a);for(const[i,a]of n)this.loadLanguage(a)}getLoadedLanguages(){return this._loadedLanguagesCache||(this._loadedLanguagesCache=[...new Set([...this._resolvedGrammars.keys(),...Object.keys(this._alias)])]),this._loadedLanguagesCache}resolveEmbeddedLanguages(e){this._langMap.set(e.name,e),this._langGraph.set(e.name,e);const n=e.embeddedLanguages??e.embeddedLangs;if(n)for(const r of n)this._langGraph.set(r,this._langMap.get(r))}}class AP{_langs=new Map;_scopeToLang=new Map;_injections=new Map;_onigLib;constructor(e,n){this._onigLib={createOnigScanner:r=>e.createScanner(r),createOnigString:r=>e.createString(r)},n.forEach(r=>this.addLanguage(r))}get onigLib(){return this._onigLib}getLangRegistration(e){return this._langs.get(e)}loadGrammar(e){return this._scopeToLang.get(e)}addLanguage(e){this._langs.set(e.name,e),e.aliases&&e.aliases.forEach(n=>{this._langs.set(n,e)}),this._scopeToLang.set(e.scopeName,e),e.injectTo&&e.injectTo.forEach(n=>{this._injections.get(n)||this._injections.set(n,[]),this._injections.get(n).push(e.scopeName)})}getInjections(e){const n=e.split(".");let r=[];for(let i=1;i<=n.length;i++){const a=n.slice(0,i).join(".");r=[...r,...this._injections.get(a)||[]]}return r}}let Jo=0;function RP(t){Jo+=1,t.warnings!==!1&&Jo>=10&&Jo%10===0&&console.warn(`[Shiki] ${Jo} instances have been created. Shiki is supposed to be used as a singleton, consider refactoring your code to cache your highlighter instance; Or call \`highlighter.dispose()\` to release unused instances.`);let e=!1;if(!t.engine)throw new Ma("`engine` option is required for synchronous mode");const n=(t.langs||[]).flat(1),r=(t.themes||[]).flat(1).map(wy),i=new AP(t.engine,n),a=new TP(i,r,n,t.langAlias);let l;function c(T){return ak(T,t.langAlias)}function f(T){S();const z=a.getGrammar(typeof T=="string"?T:T.name);if(!z)throw new Ma(`Language \`${T}\` not found, you may need to load it first`);return z}function h(T){if(T==="none")return{bg:"",fg:"",name:"none",settings:[],type:"dark"};S();const z=a.getTheme(T);if(!z)throw new Ma(`Theme \`${T}\` not found, you may need to load it first`);return z}function m(T){S();const z=h(T);l!==T&&(a.setTheme(z),l=T);const L=a.getColorMap();return{theme:z,colorMap:L}}function p(){return S(),a.getLoadedThemes()}function _(){return S(),a.getLoadedLanguages()}function y(...T){S(),a.loadLanguages(T.flat(1))}async function v(...T){return y(await ik(T))}function w(...T){S();for(const z of T.flat(1))a.loadTheme(z)}async function k(...T){return S(),w(await sk(T))}function S(){if(e)throw new Ma("Shiki instance has been disposed")}function R(){e||(e=!0,a.dispose(),Jo-=1)}return{setTheme:m,getTheme:h,getLanguage:f,getLoadedThemes:p,getLoadedLanguages:_,resolveLangAlias:c,loadLanguage:v,loadLanguageSync:y,loadTheme:k,loadThemeSync:w,dispose:R,[Symbol.dispose]:R}}async function OP(t){t.engine||CP("`engine` option is required. Use `createOnigurumaEngine` or `createJavaScriptRegexEngine` to create an engine.");const[e,n,r]=await Promise.all([sk(t.themes||[]),ik(t.langs||[]),t.engine]);return RP({...t,themes:e,langs:n,engine:r})}async function IP(t){const e=await OP(t);return{getLastGrammarState:(...n)=>hP(e,...n),codeToTokensBase:(n,r)=>by(e,n,r),codeToTokensWithThemes:(n,r)=>rk(e,n,r),codeToTokens:(n,r)=>Ef(e,n,r),codeToHast:(n,r)=>kf(e,n,r),codeToHtml:(n,r)=>EP(e,n,r),getBundledLanguages:()=>({}),getBundledThemes:()=>({}),...e,getInternalContext:()=>e}}function NP(t){const e=t.langs,n=t.themes,r=t.engine;async function i(a){function l(p){if(typeof p=="string"){if(p=a.langAlias?.[p]||p,XE(p))return[];const _=e[p];if(!_)throw new It(`Language \`${p}\` is not included in this bundle. You may want to load it from external source.`);return _}return p}function c(p){if(WE(p))return"none";if(typeof p=="string"){const _=n[p];if(!_)throw new It(`Theme \`${p}\` is not included in this bundle. You may want to load it from external source.`);return _}return p}const f=(a.themes??[]).map(p=>c(p)),h=(a.langs??[]).map(p=>l(p)),m=await IP({engine:a.engine??r(),...a,themes:f,langs:h});return{...m,loadLanguage(...p){return m.loadLanguage(...p.map(l))},loadTheme(...p){return m.loadTheme(...p.map(c))},getBundledLanguages(){return e},getBundledThemes(){return n}}}return i}function DP(t){let e;async function n(r={}){if(e){const i=await e;return await Promise.all([i.loadTheme(...r.themes||[]),i.loadLanguage(...r.langs||[])]),i}else{e=t({...r,themes:[],langs:[]});const i=await e;return await Promise.all([i.loadTheme(...r.themes||[]),i.loadLanguage(...r.langs||[])]),i}}return n}function MP(t,e){const n=DP(t);async function r(i,a){const l=await n({langs:[a.lang],themes:"theme"in a?[a.theme]:Object.values(a.themes)}),c=await e?.guessEmbeddedLanguages?.(i,a.lang,l);return c&&await l.loadLanguage(...c),l}return{getSingletonHighlighter(i){return n(i)},async codeToHtml(i,a){return(await r(i,a)).codeToHtml(i,a)},async codeToHast(i,a){return(await r(i,a)).codeToHast(i,a)},async codeToTokens(i,a){return(await r(i,a)).codeToTokens(i,a)},async codeToTokensBase(i,a){return(await r(i,a)).codeToTokensBase(i,a)},async codeToTokensWithThemes(i,a){return(await r(i,a)).codeToTokensWithThemes(i,a)},async getLastGrammarState(i,a){return(await n({langs:[a.lang],themes:[a.theme]})).getLastGrammarState(i,a)}}}const ok=[{id:"abap",name:"ABAP",import:(()=>D(()=>import("./abap-BdImnpbu.js"),[]))},{id:"actionscript-3",name:"ActionScript",import:(()=>D(()=>import("./actionscript-3-CfeIJUat.js"),[]))},{id:"ada",name:"Ada",import:(()=>D(()=>import("./ada-bCR0ucgS.js"),[]))},{id:"angular-html",name:"Angular HTML",import:(()=>D(()=>import("./angular-html-CU67Zn6k.js").then(t=>t.f),__vite__mapDeps([0,1,2,3])))},{id:"angular-ts",name:"Angular TypeScript",import:(()=>D(()=>import("./angular-ts-BwZT4LLn.js"),__vite__mapDeps([4,0,1,2,3,5])))},{id:"apache",name:"Apache Conf",import:(()=>D(()=>import("./apache-Pmp26Uib.js"),[]))},{id:"apex",name:"Apex",import:(()=>D(()=>import("./apex-DDbsPZ6N.js"),[]))},{id:"apl",name:"APL",import:(()=>D(()=>import("./apl-dKokRX4l.js"),__vite__mapDeps([6,1,2,3,7,8,9])))},{id:"applescript",name:"AppleScript",import:(()=>D(()=>import("./applescript-Co6uUVPk.js"),[]))},{id:"ara",name:"Ara",import:(()=>D(()=>import("./ara-BRHolxvo.js"),[]))},{id:"asciidoc",name:"AsciiDoc",aliases:["adoc"],import:(()=>D(()=>import("./asciidoc-Dv7Oe6Be.js"),[]))},{id:"asm",name:"Assembly",import:(()=>D(()=>import("./asm-D_Q5rh1f.js"),[]))},{id:"astro",name:"Astro",import:(()=>D(()=>import("./astro-CbQHKStN.js"),__vite__mapDeps([10,9,2,11,3,12,13])))},{id:"awk",name:"AWK",import:(()=>D(()=>import("./awk-DMzUqQB5.js"),[]))},{id:"ballerina",name:"Ballerina",import:(()=>D(()=>import("./ballerina-BFfxhgS-.js"),[]))},{id:"bat",name:"Batch File",aliases:["batch"],import:(()=>D(()=>import("./bat-BkioyH1T.js"),[]))},{id:"beancount",name:"Beancount",import:(()=>D(()=>import("./beancount-k_qm7-4y.js"),[]))},{id:"berry",name:"Berry",aliases:["be"],import:(()=>D(()=>import("./berry-uYugtg8r.js"),[]))},{id:"bibtex",name:"BibTeX",import:(()=>D(()=>import("./bibtex-CHM0blh-.js"),[]))},{id:"bicep",name:"Bicep",import:(()=>D(()=>import("./bicep-Bmn6On1c.js"),[]))},{id:"blade",name:"Blade",import:(()=>D(()=>import("./blade-DVc8C-J4.js"),__vite__mapDeps([14,15,1,2,3,7,8,16,9])))},{id:"bsl",name:"1C (Enterprise)",aliases:["1c"],import:(()=>D(()=>import("./bsl-BO_Y6i37.js"),__vite__mapDeps([17,18])))},{id:"c",name:"C",import:(()=>D(()=>import("./c-BIGW1oBm.js"),[]))},{id:"cadence",name:"Cadence",aliases:["cdc"],import:(()=>D(()=>import("./cadence-Bv_4Rxtq.js"),[]))},{id:"cairo",name:"Cairo",import:(()=>D(()=>import("./cairo-KRGpt6FW.js"),__vite__mapDeps([19,20])))},{id:"clarity",name:"Clarity",import:(()=>D(()=>import("./clarity-D53aC0YG.js"),[]))},{id:"clojure",name:"Clojure",aliases:["clj"],import:(()=>D(()=>import("./clojure-P80f7IUj.js"),[]))},{id:"cmake",name:"CMake",import:(()=>D(()=>import("./cmake-D1j8_8rp.js"),[]))},{id:"cobol",name:"COBOL",import:(()=>D(()=>import("./cobol-nwyudZeR.js"),__vite__mapDeps([21,1,2,3,8])))},{id:"codeowners",name:"CODEOWNERS",import:(()=>D(()=>import("./codeowners-Bp6g37R7.js"),[]))},{id:"codeql",name:"CodeQL",aliases:["ql"],import:(()=>D(()=>import("./codeql-DsOJ9woJ.js"),[]))},{id:"coffee",name:"CoffeeScript",aliases:["coffeescript"],import:(()=>D(()=>import("./coffee-Ch7k5sss.js"),__vite__mapDeps([22,2])))},{id:"common-lisp",name:"Common Lisp",aliases:["lisp"],import:(()=>D(()=>import("./common-lisp-Cg-RD9OK.js"),[]))},{id:"coq",name:"Coq",import:(()=>D(()=>import("./coq-DkFqJrB1.js"),[]))},{id:"cpp",name:"C++",aliases:["c++"],import:(()=>D(()=>import("./cpp-CofmeUqb.js"),__vite__mapDeps([23,24,25,26,16])))},{id:"crystal",name:"Crystal",import:(()=>D(()=>import("./crystal-tKQVLTB8.js"),__vite__mapDeps([27,1,2,3,16,26,28])))},{id:"csharp",name:"C#",aliases:["c#","cs"],import:(()=>D(()=>import("./csharp-K5feNrxe.js"),[]))},{id:"css",name:"CSS",import:(()=>D(()=>import("./css-DPfMkruS.js"),[]))},{id:"csv",name:"CSV",import:(()=>D(()=>import("./csv-fuZLfV_i.js"),[]))},{id:"cue",name:"CUE",import:(()=>D(()=>import("./cue-D82EKSYY.js"),[]))},{id:"cypher",name:"Cypher",aliases:["cql"],import:(()=>D(()=>import("./cypher-COkxafJQ.js"),[]))},{id:"d",name:"D",import:(()=>D(()=>import("./d-85-TOEBH.js"),[]))},{id:"dart",name:"Dart",import:(()=>D(()=>import("./dart-CF10PKvl.js"),[]))},{id:"dax",name:"DAX",import:(()=>D(()=>import("./dax-CEL-wOlO.js"),[]))},{id:"desktop",name:"Desktop",import:(()=>D(()=>import("./desktop-BmXAJ9_W.js"),[]))},{id:"diff",name:"Diff",import:(()=>D(()=>import("./diff-D97Zzqfu.js"),[]))},{id:"docker",name:"Dockerfile",aliases:["dockerfile"],import:(()=>D(()=>import("./docker-BcOcwvcX.js"),[]))},{id:"dotenv",name:"dotEnv",import:(()=>D(()=>import("./dotenv-Da5cRb03.js"),[]))},{id:"dream-maker",name:"Dream Maker",import:(()=>D(()=>import("./dream-maker-BtqSS_iP.js"),[]))},{id:"edge",name:"Edge",import:(()=>D(()=>import("./edge-BkV0erSs.js"),__vite__mapDeps([29,11,1,2,3,15])))},{id:"elixir",name:"Elixir",import:(()=>D(()=>import("./elixir-CDX3lj18.js"),__vite__mapDeps([30,1,2,3])))},{id:"elm",name:"Elm",import:(()=>D(()=>import("./elm-DbKCFpqz.js"),__vite__mapDeps([31,25,26])))},{id:"emacs-lisp",name:"Emacs Lisp",aliases:["elisp"],import:(()=>D(()=>import("./emacs-lisp-C9XAeP06.js"),[]))},{id:"erb",name:"ERB",import:(()=>D(()=>import("./erb-BOJIQeun.js"),__vite__mapDeps([32,1,2,3,33,34,7,8,16,35,11,36,13,23,24,25,26,28,37,38])))},{id:"erlang",name:"Erlang",aliases:["erl"],import:(()=>D(()=>import("./erlang-DsQrWhSR.js"),__vite__mapDeps([39,40])))},{id:"fennel",name:"Fennel",import:(()=>D(()=>import("./fennel-BYunw83y.js"),[]))},{id:"fish",name:"Fish",import:(()=>D(()=>import("./fish-BvzEVeQv.js"),[]))},{id:"fluent",name:"Fluent",aliases:["ftl"],import:(()=>D(()=>import("./fluent-C4IJs8-o.js"),[]))},{id:"fortran-fixed-form",name:"Fortran (Fixed Form)",aliases:["f","for","f77"],import:(()=>D(()=>import("./fortran-fixed-form-BZjJHVRy.js"),__vite__mapDeps([41,42])))},{id:"fortran-free-form",name:"Fortran (Free Form)",aliases:["f90","f95","f03","f08","f18"],import:(()=>D(()=>import("./fortran-free-form-D22FLkUw.js"),[]))},{id:"fsharp",name:"F#",aliases:["f#","fs"],import:(()=>D(()=>import("./fsharp-CXgrBDvD.js"),__vite__mapDeps([43,40])))},{id:"gdresource",name:"GDResource",import:(()=>D(()=>import("./gdresource-B7Tvp0Sc.js"),__vite__mapDeps([44,45,46])))},{id:"gdscript",name:"GDScript",import:(()=>D(()=>import("./gdscript-DTMYz4Jt.js"),[]))},{id:"gdshader",name:"GDShader",import:(()=>D(()=>import("./gdshader-DkwncUOv.js"),[]))},{id:"genie",name:"Genie",import:(()=>D(()=>import("./genie-D0YGMca9.js"),[]))},{id:"gherkin",name:"Gherkin",import:(()=>D(()=>import("./gherkin-DyxjwDmM.js"),[]))},{id:"git-commit",name:"Git Commit Message",import:(()=>D(()=>import("./git-commit-F4YmCXRG.js"),__vite__mapDeps([47,48])))},{id:"git-rebase",name:"Git Rebase Message",import:(()=>D(()=>import("./git-rebase-r7XF79zn.js"),__vite__mapDeps([49,28])))},{id:"gleam",name:"Gleam",import:(()=>D(()=>import("./gleam-BspZqrRM.js"),[]))},{id:"glimmer-js",name:"Glimmer JS",aliases:["gjs"],import:(()=>D(()=>import("./glimmer-js-Rg0-pVw9.js"),__vite__mapDeps([50,2,11,3,1])))},{id:"glimmer-ts",name:"Glimmer TS",aliases:["gts"],import:(()=>D(()=>import("./glimmer-ts-U6CK756n.js"),__vite__mapDeps([51,11,3,2,1])))},{id:"glsl",name:"GLSL",import:(()=>D(()=>import("./glsl-DplSGwfg.js"),__vite__mapDeps([25,26])))},{id:"gnuplot",name:"Gnuplot",import:(()=>D(()=>import("./gnuplot-DdkO51Og.js"),[]))},{id:"go",name:"Go",import:(()=>D(()=>import("./go-Dn2_MT6a.js"),[]))},{id:"graphql",name:"GraphQL",aliases:["gql"],import:(()=>D(()=>import("./graphql-ChdNCCLP.js"),__vite__mapDeps([35,2,11,36,13])))},{id:"groovy",name:"Groovy",import:(()=>D(()=>import("./groovy-gcz8RCvz.js"),[]))},{id:"hack",name:"Hack",import:(()=>D(()=>import("./hack-CaT9iCJl.js"),__vite__mapDeps([52,1,2,3,16])))},{id:"haml",name:"Ruby Haml",import:(()=>D(()=>import("./haml-B8DHNrY2.js"),__vite__mapDeps([34,2,3])))},{id:"handlebars",name:"Handlebars",aliases:["hbs"],import:(()=>D(()=>import("./handlebars-BL8al0AC.js"),__vite__mapDeps([53,1,2,3,38])))},{id:"haskell",name:"Haskell",aliases:["hs"],import:(()=>D(()=>import("./haskell-Df6bDoY_.js"),[]))},{id:"haxe",name:"Haxe",import:(()=>D(()=>import("./haxe-CzTSHFRz.js"),[]))},{id:"hcl",name:"HashiCorp HCL",import:(()=>D(()=>import("./hcl-BWvSN4gD.js"),[]))},{id:"hjson",name:"Hjson",import:(()=>D(()=>import("./hjson-D5-asLiD.js"),[]))},{id:"hlsl",name:"HLSL",import:(()=>D(()=>import("./hlsl-D3lLCCz7.js"),[]))},{id:"html",name:"HTML",import:(()=>D(()=>import("./html-GMplVEZG.js"),__vite__mapDeps([1,2,3])))},{id:"html-derivative",name:"HTML (Derivative)",import:(()=>D(()=>import("./html-derivative-BFtXZ54Q.js"),__vite__mapDeps([15,1,2,3])))},{id:"http",name:"HTTP",import:(()=>D(()=>import("./http-jrhK8wxY.js"),__vite__mapDeps([54,28,9,7,8,35,2,11,36,13])))},{id:"hurl",name:"Hurl",import:(()=>D(()=>import("./hurl-irOxFIW8.js"),__vite__mapDeps([55,35,2,11,36,13,7,8,56])))},{id:"hxml",name:"HXML",import:(()=>D(()=>import("./hxml-Bvhsp5Yf.js"),__vite__mapDeps([57,58])))},{id:"hy",name:"Hy",import:(()=>D(()=>import("./hy-DFXneXwc.js"),[]))},{id:"imba",name:"Imba",import:(()=>D(()=>import("./imba-DGztddWO.js"),[]))},{id:"ini",name:"INI",aliases:["properties"],import:(()=>D(()=>import("./ini-BEwlwnbL.js"),[]))},{id:"java",name:"Java",import:(()=>D(()=>import("./java-CylS5w8V.js"),[]))},{id:"javascript",name:"JavaScript",aliases:["js","cjs","mjs"],import:(()=>D(()=>import("./javascript-wDzz0qaB.js"),[]))},{id:"jinja",name:"Jinja",import:(()=>D(()=>import("./jinja-4LBKfQ-Z.js"),__vite__mapDeps([59,1,2,3])))},{id:"jison",name:"Jison",import:(()=>D(()=>import("./jison-wvAkD_A8.js"),__vite__mapDeps([60,2])))},{id:"json",name:"JSON",import:(()=>D(()=>import("./json-Cp-IABpG.js"),[]))},{id:"json5",name:"JSON5",import:(()=>D(()=>import("./json5-C9tS-k6U.js"),[]))},{id:"jsonc",name:"JSON with Comments",import:(()=>D(()=>import("./jsonc-Des-eS-w.js"),[]))},{id:"jsonl",name:"JSON Lines",import:(()=>D(()=>import("./jsonl-DcaNXYhu.js"),[]))},{id:"jsonnet",name:"Jsonnet",import:(()=>D(()=>import("./jsonnet-DFQXde-d.js"),[]))},{id:"jssm",name:"JSSM",aliases:["fsl"],import:(()=>D(()=>import("./jssm-C2t-YnRu.js"),[]))},{id:"jsx",name:"JSX",import:(()=>D(()=>import("./jsx-g9-lgVsj.js"),[]))},{id:"julia",name:"Julia",aliases:["jl"],import:(()=>D(()=>import("./julia-C8NyazO9.js"),__vite__mapDeps([61,23,24,25,26,16,20,2,62])))},{id:"kdl",name:"KDL",import:(()=>D(()=>import("./kdl-DV7GczEv.js"),[]))},{id:"kotlin",name:"Kotlin",aliases:["kt","kts"],import:(()=>D(()=>import("./kotlin-BdnUsdx6.js"),[]))},{id:"kusto",name:"Kusto",aliases:["kql"],import:(()=>D(()=>import("./kusto-BvAqAH-y.js"),[]))},{id:"latex",name:"LaTeX",import:(()=>D(()=>import("./latex-BdAV_C_H.js"),__vite__mapDeps([63,64,62])))},{id:"lean",name:"Lean 4",aliases:["lean4"],import:(()=>D(()=>import("./lean-Bc6EcWN3.js"),[]))},{id:"less",name:"Less",import:(()=>D(()=>import("./less-B1dDrJ26.js"),[]))},{id:"liquid",name:"Liquid",import:(()=>D(()=>import("./liquid-DYVedYrR.js"),__vite__mapDeps([65,1,2,3,9])))},{id:"llvm",name:"LLVM IR",import:(()=>D(()=>import("./llvm-BtvRca6l.js"),[]))},{id:"log",name:"Log file",import:(()=>D(()=>import("./log-2UxHyX5q.js"),[]))},{id:"logo",name:"Logo",import:(()=>D(()=>import("./logo-BtOb2qkB.js"),[]))},{id:"lua",name:"Lua",import:(()=>D(()=>import("./lua-BbnMAYS6.js"),__vite__mapDeps([37,26])))},{id:"luau",name:"Luau",import:(()=>D(()=>import("./luau-CXu1NL6O.js"),[]))},{id:"make",name:"Makefile",aliases:["makefile"],import:(()=>D(()=>import("./make-CHLpvVh8.js"),[]))},{id:"markdown",name:"Markdown",aliases:["md"],import:(()=>D(()=>import("./markdown-Cvjx9yec.js"),[]))},{id:"marko",name:"Marko",import:(()=>D(()=>import("./marko-CPi9NSCl.js"),__vite__mapDeps([66,3,67,5,11])))},{id:"matlab",name:"MATLAB",import:(()=>D(()=>import("./matlab-D7o27uSR.js"),[]))},{id:"mdc",name:"MDC",import:(()=>D(()=>import("./mdc-DUICxH0z.js"),__vite__mapDeps([68,40,38,15,1,2,3])))},{id:"mdx",name:"MDX",import:(()=>D(()=>import("./mdx-Cmh6b_Ma.js"),[]))},{id:"mermaid",name:"Mermaid",aliases:["mmd"],import:(()=>D(()=>import("./mermaid-DKYwYmdq.js"),[]))},{id:"mipsasm",name:"MIPS Assembly",aliases:["mips"],import:(()=>D(()=>import("./mipsasm-CKIfxQSi.js"),[]))},{id:"mojo",name:"Mojo",import:(()=>D(()=>import("./mojo-1DNp92w6.js"),[]))},{id:"move",name:"Move",import:(()=>D(()=>import("./move-Bu9oaDYs.js"),[]))},{id:"narrat",name:"Narrat Language",aliases:["nar"],import:(()=>D(()=>import("./narrat-DRg8JJMk.js"),[]))},{id:"nextflow",name:"Nextflow",aliases:["nf"],import:(()=>D(()=>import("./nextflow-BrzmwbiE.js"),[]))},{id:"nginx",name:"Nginx",import:(()=>D(()=>import("./nginx-DknmC5AR.js"),__vite__mapDeps([69,37,26])))},{id:"nim",name:"Nim",import:(()=>D(()=>import("./nim-CVrawwO9.js"),__vite__mapDeps([70,26,1,2,3,7,8,25,40])))},{id:"nix",name:"Nix",import:(()=>D(()=>import("./nix-c8nO5XWb.js"),[]))},{id:"nushell",name:"nushell",aliases:["nu"],import:(()=>D(()=>import("./nushell-C-sUppwS.js"),[]))},{id:"objective-c",name:"Objective-C",aliases:["objc"],import:(()=>D(()=>import("./objective-c-DXmwc3jG.js"),[]))},{id:"objective-cpp",name:"Objective-C++",import:(()=>D(()=>import("./objective-cpp-CLxacb5B.js"),[]))},{id:"ocaml",name:"OCaml",import:(()=>D(()=>import("./ocaml-C0hk2d4L.js"),[]))},{id:"openscad",name:"OpenSCAD",aliases:["scad"],import:(()=>D(()=>import("./openscad-C4EeE6gA.js"),[]))},{id:"pascal",name:"Pascal",import:(()=>D(()=>import("./pascal-D93ZcfNL.js"),[]))},{id:"perl",name:"Perl",import:(()=>D(()=>import("./perl-C0TMdlhV.js"),__vite__mapDeps([71,1,2,3,7,8,16])))},{id:"php",name:"PHP",import:(()=>D(()=>import("./php-CDn_0X-4.js"),__vite__mapDeps([72,1,2,3,7,8,16,9])))},{id:"pkl",name:"Pkl",import:(()=>D(()=>import("./pkl-u5AG7uiY.js"),[]))},{id:"plsql",name:"PL/SQL",import:(()=>D(()=>import("./plsql-ChMvpjG-.js"),[]))},{id:"po",name:"Gettext PO",aliases:["pot","potx"],import:(()=>D(()=>import("./po-BTJTHyun.js"),[]))},{id:"polar",name:"Polar",import:(()=>D(()=>import("./polar-C0HS_06l.js"),[]))},{id:"postcss",name:"PostCSS",import:(()=>D(()=>import("./postcss-CXtECtnM.js"),[]))},{id:"powerquery",name:"PowerQuery",import:(()=>D(()=>import("./powerquery-CEu0bR-o.js"),[]))},{id:"powershell",name:"PowerShell",aliases:["ps","ps1"],import:(()=>D(()=>import("./powershell-Dpen1YoG.js"),[]))},{id:"prisma",name:"Prisma",import:(()=>D(()=>import("./prisma-Dd19v3D-.js"),[]))},{id:"prolog",name:"Prolog",import:(()=>D(()=>import("./prolog-CbFg5uaA.js"),[]))},{id:"proto",name:"Protocol Buffer 3",aliases:["protobuf"],import:(()=>D(()=>import("./proto-DyJlTyXw.js"),[]))},{id:"pug",name:"Pug",aliases:["jade"],import:(()=>D(()=>import("./pug-CGlum2m_.js"),__vite__mapDeps([73,2,3,1])))},{id:"puppet",name:"Puppet",import:(()=>D(()=>import("./puppet-BMWR74SV.js"),[]))},{id:"purescript",name:"PureScript",import:(()=>D(()=>import("./purescript-CklMAg4u.js"),[]))},{id:"python",name:"Python",aliases:["py"],import:(()=>D(()=>import("./python-B6aJPvgy.js"),[]))},{id:"qml",name:"QML",import:(()=>D(()=>import("./qml-3beO22l8.js"),__vite__mapDeps([74,2])))},{id:"qmldir",name:"QML Directory",import:(()=>D(()=>import("./qmldir-C8lEn-DE.js"),[]))},{id:"qss",name:"Qt Style Sheets",import:(()=>D(()=>import("./qss-IeuSbFQv.js"),[]))},{id:"r",name:"R",import:(()=>D(()=>import("./r-DiinP2Uv.js"),[]))},{id:"racket",name:"Racket",import:(()=>D(()=>import("./racket-BqYA7rlc.js"),[]))},{id:"raku",name:"Raku",aliases:["perl6"],import:(()=>D(()=>import("./raku-DXvB9xmW.js"),[]))},{id:"razor",name:"ASP.NET Razor",import:(()=>D(()=>import("./razor-CE9lU5zL.js"),__vite__mapDeps([75,1,2,3,76])))},{id:"reg",name:"Windows Registry Script",import:(()=>D(()=>import("./reg-C-SQnVFl.js"),[]))},{id:"regexp",name:"RegExp",aliases:["regex"],import:(()=>D(()=>import("./regexp-CDVJQ6XC.js"),[]))},{id:"rel",name:"Rel",import:(()=>D(()=>import("./rel-C3B-1QV4.js"),[]))},{id:"riscv",name:"RISC-V",import:(()=>D(()=>import("./riscv-BM1_JUlF.js"),[]))},{id:"rosmsg",name:"ROS Interface",import:(()=>D(()=>import("./rosmsg-BJDFO7_C.js"),[]))},{id:"rst",name:"reStructuredText",import:(()=>D(()=>import("./rst-B0xPkSld.js"),__vite__mapDeps([77,15,1,2,3,23,24,25,26,16,20,28,38,78,33,34,7,8,35,11,36,13,37])))},{id:"ruby",name:"Ruby",aliases:["rb"],import:(()=>D(()=>import("./ruby-BvKwtOVI.js"),__vite__mapDeps([33,1,2,3,34,7,8,16,35,11,36,13,23,24,25,26,28,37,38])))},{id:"rust",name:"Rust",aliases:["rs"],import:(()=>D(()=>import("./rust-B1yitclQ.js"),[]))},{id:"sas",name:"SAS",import:(()=>D(()=>import("./sas-cz2c8ADy.js"),__vite__mapDeps([79,16])))},{id:"sass",name:"Sass",import:(()=>D(()=>import("./sass-Cj5Yp3dK.js"),[]))},{id:"scala",name:"Scala",import:(()=>D(()=>import("./scala-C151Ov-r.js"),[]))},{id:"scheme",name:"Scheme",import:(()=>D(()=>import("./scheme-C98Dy4si.js"),[]))},{id:"scss",name:"SCSS",import:(()=>D(()=>import("./scss-OYdSNvt2.js"),__vite__mapDeps([5,3])))},{id:"sdbl",name:"1C (Query)",aliases:["1c-query"],import:(()=>D(()=>import("./sdbl-DVxCFoDh.js"),[]))},{id:"shaderlab",name:"ShaderLab",aliases:["shader"],import:(()=>D(()=>import("./shaderlab-Dg9Lc6iA.js"),__vite__mapDeps([80,81])))},{id:"shellscript",name:"Shell",aliases:["bash","sh","shell","zsh"],import:(()=>D(()=>import("./shellscript-Yzrsuije.js"),[]))},{id:"shellsession",name:"Shell Session",aliases:["console"],import:(()=>D(()=>import("./shellsession-BADoaaVG.js"),__vite__mapDeps([82,28])))},{id:"smalltalk",name:"Smalltalk",import:(()=>D(()=>import("./smalltalk-BERRCDM3.js"),[]))},{id:"solidity",name:"Solidity",import:(()=>D(()=>import("./solidity-rGO070M0.js"),[]))},{id:"soy",name:"Closure Templates",aliases:["closure-templates"],import:(()=>D(()=>import("./soy-Brmx7dQM.js"),__vite__mapDeps([83,1,2,3])))},{id:"sparql",name:"SPARQL",import:(()=>D(()=>import("./sparql-rVzFXLq3.js"),__vite__mapDeps([84,85])))},{id:"splunk",name:"Splunk Query Language",aliases:["spl"],import:(()=>D(()=>import("./splunk-BtCnVYZw.js"),[]))},{id:"sql",name:"SQL",import:(()=>D(()=>import("./sql-BLtJtn59.js"),[]))},{id:"ssh-config",name:"SSH Config",import:(()=>D(()=>import("./ssh-config-_ykCGR6B.js"),[]))},{id:"stata",name:"Stata",import:(()=>D(()=>import("./stata-BH5u7GGu.js"),__vite__mapDeps([86,16])))},{id:"stylus",name:"Stylus",aliases:["styl"],import:(()=>D(()=>import("./stylus-BEDo0Tqx.js"),[]))},{id:"svelte",name:"Svelte",import:(()=>D(()=>import("./svelte-3Dk4HxPD.js"),__vite__mapDeps([87,2,11,3,12])))},{id:"swift",name:"Swift",import:(()=>D(()=>import("./swift-Dg5xB15N.js"),[]))},{id:"system-verilog",name:"SystemVerilog",import:(()=>D(()=>import("./system-verilog-CnnmHF94.js"),[]))},{id:"systemd",name:"Systemd Units",import:(()=>D(()=>import("./systemd-4A_iFExJ.js"),[]))},{id:"talonscript",name:"TalonScript",aliases:["talon"],import:(()=>D(()=>import("./talonscript-CkByrt1z.js"),[]))},{id:"tasl",name:"Tasl",import:(()=>D(()=>import("./tasl-QIJgUcNo.js"),[]))},{id:"tcl",name:"Tcl",import:(()=>D(()=>import("./tcl-dwOrl1Do.js"),[]))},{id:"templ",name:"Templ",import:(()=>D(()=>import("./templ-W15q3VgB.js"),__vite__mapDeps([88,89,2,3])))},{id:"terraform",name:"Terraform",aliases:["tf","tfvars"],import:(()=>D(()=>import("./terraform-BETggiCN.js"),[]))},{id:"tex",name:"TeX",import:(()=>D(()=>import("./tex-CxkMU7Pf.js"),__vite__mapDeps([64,62])))},{id:"toml",name:"TOML",import:(()=>D(()=>import("./toml-vGWfd6FD.js"),[]))},{id:"ts-tags",name:"TypeScript with Tags",aliases:["lit"],import:(()=>D(()=>import("./ts-tags-zn1MmPIZ.js"),__vite__mapDeps([90,11,3,2,25,26,1,16,7,8])))},{id:"tsv",name:"TSV",import:(()=>D(()=>import("./tsv-B_m7g4N7.js"),[]))},{id:"tsx",name:"TSX",import:(()=>D(()=>import("./tsx-COt5Ahok.js"),[]))},{id:"turtle",name:"Turtle",import:(()=>D(()=>import("./turtle-BsS91CYL.js"),[]))},{id:"twig",name:"Twig",import:(()=>D(()=>import("./twig-CO9l9SDP.js"),__vite__mapDeps([91,3,2,5,72,1,7,8,16,9,20,33,34,35,11,36,13,23,24,25,26,28,37,38])))},{id:"typescript",name:"TypeScript",aliases:["ts","cts","mts"],import:(()=>D(()=>import("./typescript-BPQ3VLAy.js"),[]))},{id:"typespec",name:"TypeSpec",aliases:["tsp"],import:(()=>D(()=>import("./typespec-BGHnOYBU.js"),[]))},{id:"typst",name:"Typst",aliases:["typ"],import:(()=>D(()=>import("./typst-DHCkPAjA.js"),[]))},{id:"v",name:"V",import:(()=>D(()=>import("./v-BcVCzyr7.js"),[]))},{id:"vala",name:"Vala",import:(()=>D(()=>import("./vala-CsfeWuGM.js"),[]))},{id:"vb",name:"Visual Basic",aliases:["cmd"],import:(()=>D(()=>import("./vb-D17OF-Vu.js"),[]))},{id:"verilog",name:"Verilog",import:(()=>D(()=>import("./verilog-BQ8w6xss.js"),[]))},{id:"vhdl",name:"VHDL",import:(()=>D(()=>import("./vhdl-CeAyd5Ju.js"),[]))},{id:"viml",name:"Vim Script",aliases:["vim","vimscript"],import:(()=>D(()=>import("./viml-CJc9bBzg.js"),[]))},{id:"vue",name:"Vue",import:(()=>D(()=>import("./vue-DnHKYNfI.js"),__vite__mapDeps([92,3,2,11,9,15,1])))},{id:"vue-html",name:"Vue HTML",import:(()=>D(()=>import("./vue-html-CChd_i61.js"),__vite__mapDeps([93,92,3,2,11,9,15,1])))},{id:"vue-vine",name:"Vue Vine",import:(()=>D(()=>import("./vue-vine-8moa0y9V.js"),__vite__mapDeps([94,3,5,67,95,12,92,2,11,9,15,1])))},{id:"vyper",name:"Vyper",aliases:["vy"],import:(()=>D(()=>import("./vyper-CDx5xZoG.js"),[]))},{id:"wasm",name:"WebAssembly",import:(()=>D(()=>import("./wasm-MzD3tlZU.js"),[]))},{id:"wenyan",name:"Wenyan",aliases:[""],import:(()=>D(()=>import("./wenyan-BV7otONQ.js"),[]))},{id:"wgsl",name:"WGSL",import:(()=>D(()=>import("./wgsl-Dx-B1_4e.js"),[]))},{id:"wikitext",name:"Wikitext",aliases:["mediawiki","wiki"],import:(()=>D(()=>import("./wikitext-BhOHFoWU.js"),[]))},{id:"wit",name:"WebAssembly Interface Types",import:(()=>D(()=>import("./wit-5i3qLPDT.js"),[]))},{id:"wolfram",name:"Wolfram",aliases:["wl"],import:(()=>D(()=>import("./wolfram-lXgVvXCa.js"),[]))},{id:"xml",name:"XML",import:(()=>D(()=>import("./xml-sdJ4AIDG.js"),__vite__mapDeps([7,8])))},{id:"xsl",name:"XSL",import:(()=>D(()=>import("./xsl-CtQFsRM5.js"),__vite__mapDeps([96,7,8])))},{id:"yaml",name:"YAML",aliases:["yml"],import:(()=>D(()=>import("./yaml-Buea-lGh.js"),[]))},{id:"zenscript",name:"ZenScript",import:(()=>D(()=>import("./zenscript-DVFEvuxE.js"),[]))},{id:"zig",name:"Zig",import:(()=>D(()=>import("./zig-VOosw3JB.js"),[]))}],LP=Object.fromEntries(ok.map(t=>[t.id,t.import])),zP=Object.fromEntries(ok.flatMap(t=>t.aliases?.map(e=>[e,t.import])||[])),PP={...LP,...zP},jP=[{id:"andromeeda",displayName:"Andromeeda",type:"dark",import:(()=>D(()=>import("./andromeeda-C-Jbm3Hp.js"),[]))},{id:"aurora-x",displayName:"Aurora X",type:"dark",import:(()=>D(()=>import("./aurora-x-D-2ljcwZ.js"),[]))},{id:"ayu-dark",displayName:"Ayu Dark",type:"dark",import:(()=>D(()=>import("./ayu-dark-Cv9koXgw.js"),[]))},{id:"catppuccin-frappe",displayName:"Catppuccin Frapp",type:"dark",import:(()=>D(()=>import("./catppuccin-frappe-DFWUc33u.js"),[]))},{id:"catppuccin-latte",displayName:"Catppuccin Latte",type:"light",import:(()=>D(()=>import("./catppuccin-latte-C9dUb6Cb.js"),[]))},{id:"catppuccin-macchiato",displayName:"Catppuccin Macchiato",type:"dark",import:(()=>D(()=>import("./catppuccin-macchiato-DQyhUUbL.js"),[]))},{id:"catppuccin-mocha",displayName:"Catppuccin Mocha",type:"dark",import:(()=>D(()=>import("./catppuccin-mocha-D87Tk5Gz.js"),[]))},{id:"dark-plus",displayName:"Dark Plus",type:"dark",import:(()=>D(()=>import("./dark-plus-C3mMm8J8.js"),[]))},{id:"dracula",displayName:"Dracula Theme",type:"dark",import:(()=>D(()=>import("./dracula-BzJJZx-M.js"),[]))},{id:"dracula-soft",displayName:"Dracula Theme Soft",type:"dark",import:(()=>D(()=>import("./dracula-soft-BXkSAIEj.js"),[]))},{id:"everforest-dark",displayName:"Everforest Dark",type:"dark",import:(()=>D(()=>import("./everforest-dark-BgDCqdQA.js"),[]))},{id:"everforest-light",displayName:"Everforest Light",type:"light",import:(()=>D(()=>import("./everforest-light-C8M2exoo.js"),[]))},{id:"github-dark",displayName:"GitHub Dark",type:"dark",import:(()=>D(()=>import("./github-dark-DHJKELXO.js"),[]))},{id:"github-dark-default",displayName:"GitHub Dark Default",type:"dark",import:(()=>D(()=>import("./github-dark-default-Cuk6v7N8.js"),[]))},{id:"github-dark-dimmed",displayName:"GitHub Dark Dimmed",type:"dark",import:(()=>D(()=>import("./github-dark-dimmed-DH5Ifo-i.js"),[]))},{id:"github-dark-high-contrast",displayName:"GitHub Dark High Contrast",type:"dark",import:(()=>D(()=>import("./github-dark-high-contrast-E3gJ1_iC.js"),[]))},{id:"github-light",displayName:"GitHub Light",type:"light",import:(()=>D(()=>import("./github-light-DAi9KRSo.js"),[]))},{id:"github-light-default",displayName:"GitHub Light Default",type:"light",import:(()=>D(()=>import("./github-light-default-D7oLnXFd.js"),[]))},{id:"github-light-high-contrast",displayName:"GitHub Light High Contrast",type:"light",import:(()=>D(()=>import("./github-light-high-contrast-BfjtVDDH.js"),[]))},{id:"gruvbox-dark-hard",displayName:"Gruvbox Dark Hard",type:"dark",import:(()=>D(()=>import("./gruvbox-dark-hard-CFHQjOhq.js"),[]))},{id:"gruvbox-dark-medium",displayName:"Gruvbox Dark Medium",type:"dark",import:(()=>D(()=>import("./gruvbox-dark-medium-GsRaNv29.js"),[]))},{id:"gruvbox-dark-soft",displayName:"Gruvbox Dark Soft",type:"dark",import:(()=>D(()=>import("./gruvbox-dark-soft-CVdnzihN.js"),[]))},{id:"gruvbox-light-hard",displayName:"Gruvbox Light Hard",type:"light",import:(()=>D(()=>import("./gruvbox-light-hard-CH1njM8p.js"),[]))},{id:"gruvbox-light-medium",displayName:"Gruvbox Light Medium",type:"light",import:(()=>D(()=>import("./gruvbox-light-medium-DRw_LuNl.js"),[]))},{id:"gruvbox-light-soft",displayName:"Gruvbox Light Soft",type:"light",import:(()=>D(()=>import("./gruvbox-light-soft-hJgmCMqR.js"),[]))},{id:"houston",displayName:"Houston",type:"dark",import:(()=>D(()=>import("./houston-DnULxvSX.js"),[]))},{id:"kanagawa-dragon",displayName:"Kanagawa Dragon",type:"dark",import:(()=>D(()=>import("./kanagawa-dragon-CkXjmgJE.js"),[]))},{id:"kanagawa-lotus",displayName:"Kanagawa Lotus",type:"light",import:(()=>D(()=>import("./kanagawa-lotus-CfQXZHmo.js"),[]))},{id:"kanagawa-wave",displayName:"Kanagawa Wave",type:"dark",import:(()=>D(()=>import("./kanagawa-wave-DWedfzmr.js"),[]))},{id:"laserwave",displayName:"LaserWave",type:"dark",import:(()=>D(()=>import("./laserwave-DUszq2jm.js"),[]))},{id:"light-plus",displayName:"Light Plus",type:"light",import:(()=>D(()=>import("./light-plus-B7mTdjB0.js"),[]))},{id:"material-theme",displayName:"Material Theme",type:"dark",import:(()=>D(()=>import("./material-theme-D5KoaKCx.js"),[]))},{id:"material-theme-darker",displayName:"Material Theme Darker",type:"dark",import:(()=>D(()=>import("./material-theme-darker-BfHTSMKl.js"),[]))},{id:"material-theme-lighter",displayName:"Material Theme Lighter",type:"light",import:(()=>D(()=>import("./material-theme-lighter-B0m2ddpp.js"),[]))},{id:"material-theme-ocean",displayName:"Material Theme Ocean",type:"dark",import:(()=>D(()=>import("./material-theme-ocean-CyktbL80.js"),[]))},{id:"material-theme-palenight",displayName:"Material Theme Palenight",type:"dark",import:(()=>D(()=>import("./material-theme-palenight-Csfq5Kiy.js"),[]))},{id:"min-dark",displayName:"Min Dark",type:"dark",import:(()=>D(()=>import("./min-dark-CafNBF8u.js"),[]))},{id:"min-light",displayName:"Min Light",type:"light",import:(()=>D(()=>import("./min-light-CTRr51gU.js"),[]))},{id:"monokai",displayName:"Monokai",type:"dark",import:(()=>D(()=>import("./monokai-D4h5O-jR.js"),[]))},{id:"night-owl",displayName:"Night Owl",type:"dark",import:(()=>D(()=>import("./night-owl-C39BiMTA.js"),[]))},{id:"nord",displayName:"Nord",type:"dark",import:(()=>D(()=>import("./nord-Ddv68eIx.js"),[]))},{id:"one-dark-pro",displayName:"One Dark Pro",type:"dark",import:(()=>D(()=>import("./one-dark-pro-DVMEJ2y_.js"),[]))},{id:"one-light",displayName:"One Light",type:"light",import:(()=>D(()=>import("./one-light-PoHY5YXO.js"),[]))},{id:"plastic",displayName:"Plastic",type:"dark",import:(()=>D(()=>import("./plastic-3e1v2bzS.js"),[]))},{id:"poimandres",displayName:"Poimandres",type:"dark",import:(()=>D(()=>import("./poimandres-CS3Unz2-.js"),[]))},{id:"red",displayName:"Red",type:"dark",import:(()=>D(()=>import("./red-bN70gL4F.js"),[]))},{id:"rose-pine",displayName:"Ros Pine",type:"dark",import:(()=>D(()=>import("./rose-pine-qdsjHGoJ.js"),[]))},{id:"rose-pine-dawn",displayName:"Ros Pine Dawn",type:"light",import:(()=>D(()=>import("./rose-pine-dawn-DHQR4-dF.js"),[]))},{id:"rose-pine-moon",displayName:"Ros Pine Moon",type:"dark",import:(()=>D(()=>import("./rose-pine-moon-D4_iv3hh.js"),[]))},{id:"slack-dark",displayName:"Slack Dark",type:"dark",import:(()=>D(()=>import("./slack-dark-BthQWCQV.js"),[]))},{id:"slack-ochin",displayName:"Slack Ochin",type:"light",import:(()=>D(()=>import("./slack-ochin-DqwNpetd.js"),[]))},{id:"snazzy-light",displayName:"Snazzy Light",type:"light",import:(()=>D(()=>import("./snazzy-light-Bw305WKR.js"),[]))},{id:"solarized-dark",displayName:"Solarized Dark",type:"dark",import:(()=>D(()=>import("./solarized-dark-DXbdFlpD.js"),[]))},{id:"solarized-light",displayName:"Solarized Light",type:"light",import:(()=>D(()=>import("./solarized-light-L9t79GZl.js"),[]))},{id:"synthwave-84",displayName:"Synthwave '84",type:"dark",import:(()=>D(()=>import("./synthwave-84-CbfX1IO0.js"),[]))},{id:"tokyo-night",displayName:"Tokyo Night",type:"dark",import:(()=>D(()=>import("./tokyo-night-hegEt444.js"),[]))},{id:"vesper",displayName:"Vesper",type:"dark",import:(()=>D(()=>import("./vesper-DU1UobuO.js"),[]))},{id:"vitesse-black",displayName:"Vitesse Black",type:"dark",import:(()=>D(()=>import("./vitesse-black-Bkuqu6BP.js"),[]))},{id:"vitesse-dark",displayName:"Vitesse Dark",type:"dark",import:(()=>D(()=>import("./vitesse-dark-D0r3Knsf.js"),[]))},{id:"vitesse-light",displayName:"Vitesse Light",type:"light",import:(()=>D(()=>import("./vitesse-light-CVO1_9PV.js"),[]))}],BP=Object.fromEntries(jP.map(t=>[t.id,t.import]));class xy extends Error{constructor(e){super(e),this.name="ShikiError"}}function UP(){return 2147483648}function $P(){return typeof performance<"u"?performance.now():Date.now()}const qP=(t,e)=>t+(e-t%e)%e;async function FP(t){let e,n;const r={};function i(y){n=y,r.HEAPU8=new Uint8Array(y),r.HEAPU32=new Uint32Array(y)}function a(y,v,w){r.HEAPU8.copyWithin(y,v,v+w)}function l(y){try{return e.grow(y-n.byteLength+65535>>>16),i(e.buffer),1}catch{}}function c(y){const v=r.HEAPU8.length;y=y>>>0;const w=UP();if(y>w)return!1;for(let k=1;k<=4;k*=2){let S=v*(1+.2/k);S=Math.min(S,y+100663296);const R=Math.min(w,qP(Math.max(y,S),65536));if(l(R))return!0}return!1}const f=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function h(y,v,w=1024){const k=v+w;let S=v;for(;y[S]&&!(S>=k);)++S;if(S-v>16&&y.buffer&&f)return f.decode(y.subarray(v,S));let R="";for(;v<S;){let T=y[v++];if(!(T&128)){R+=String.fromCharCode(T);continue}const z=y[v++]&63;if((T&224)===192){R+=String.fromCharCode((T&31)<<6|z);continue}const L=y[v++]&63;if((T&240)===224?T=(T&15)<<12|z<<6|L:T=(T&7)<<18|z<<12|L<<6|y[v++]&63,T<65536)R+=String.fromCharCode(T);else{const E=T-65536;R+=String.fromCharCode(55296|E>>10,56320|E&1023)}}return R}function m(y,v){return y?h(r.HEAPU8,y,v):""}const p={emscripten_get_now:$P,emscripten_memcpy_big:a,emscripten_resize_heap:c,fd_write:()=>0};async function _(){const v=await t({env:p,wasi_snapshot_preview1:p});e=v.memory,i(e.buffer),Object.assign(r,v),r.UTF8ToString=m}return await _(),r}var VP=Object.defineProperty,HP=(t,e,n)=>e in t?VP(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ut=(t,e,n)=>HP(t,typeof e!="symbol"?e+"":e,n);let Jt=null;function GP(t){throw new xy(t.UTF8ToString(t.getLastOnigError()))}class Xf{constructor(e){Ut(this,"utf16Length"),Ut(this,"utf8Length"),Ut(this,"utf16Value"),Ut(this,"utf8Value"),Ut(this,"utf16OffsetToUtf8"),Ut(this,"utf8OffsetToUtf16");const n=e.length,r=Xf._utf8ByteLength(e),i=r!==n,a=i?new Uint32Array(n+1):null;i&&(a[n]=r);const l=i?new Uint32Array(r+1):null;i&&(l[r]=n);const c=new Uint8Array(r);let f=0;for(let h=0;h<n;h++){const m=e.charCodeAt(h);let p=m,_=!1;if(m>=55296&&m<=56319&&h+1<n){const y=e.charCodeAt(h+1);y>=56320&&y<=57343&&(p=(m-55296<<10)+65536|y-56320,_=!0)}i&&(a[h]=f,_&&(a[h+1]=f),p<=127?l[f+0]=h:p<=2047?(l[f+0]=h,l[f+1]=h):p<=65535?(l[f+0]=h,l[f+1]=h,l[f+2]=h):(l[f+0]=h,l[f+1]=h,l[f+2]=h,l[f+3]=h)),p<=127?c[f++]=p:p<=2047?(c[f++]=192|(p&1984)>>>6,c[f++]=128|(p&63)>>>0):p<=65535?(c[f++]=224|(p&61440)>>>12,c[f++]=128|(p&4032)>>>6,c[f++]=128|(p&63)>>>0):(c[f++]=240|(p&1835008)>>>18,c[f++]=128|(p&258048)>>>12,c[f++]=128|(p&4032)>>>6,c[f++]=128|(p&63)>>>0),_&&h++}this.utf16Length=n,this.utf8Length=r,this.utf16Value=e,this.utf8Value=c,this.utf16OffsetToUtf8=a,this.utf8OffsetToUtf16=l}static _utf8ByteLength(e){let n=0;for(let r=0,i=e.length;r<i;r++){const a=e.charCodeAt(r);let l=a,c=!1;if(a>=55296&&a<=56319&&r+1<i){const f=e.charCodeAt(r+1);f>=56320&&f<=57343&&(l=(a-55296<<10)+65536|f-56320,c=!0)}l<=127?n+=1:l<=2047?n+=2:l<=65535?n+=3:n+=4,c&&r++}return n}createString(e){const n=e.omalloc(this.utf8Length);return e.HEAPU8.set(this.utf8Value,n),n}}const Wf=class Dr{constructor(e){if(Ut(this,"id",++Dr.LAST_ID),Ut(this,"_onigBinding"),Ut(this,"content"),Ut(this,"utf16Length"),Ut(this,"utf8Length"),Ut(this,"utf16OffsetToUtf8"),Ut(this,"utf8OffsetToUtf16"),Ut(this,"ptr"),!Jt)throw new xy("Must invoke loadWasm first.");this._onigBinding=Jt,this.content=e;const n=new Xf(e);this.utf16Length=n.utf16Length,this.utf8Length=n.utf8Length,this.utf16OffsetToUtf8=n.utf16OffsetToUtf8,this.utf8OffsetToUtf16=n.utf8OffsetToUtf16,this.utf8Length<1e4&&!Dr._sharedPtrInUse?(Dr._sharedPtr||(Dr._sharedPtr=Jt.omalloc(1e4)),Dr._sharedPtrInUse=!0,Jt.HEAPU8.set(n.utf8Value,Dr._sharedPtr),this.ptr=Dr._sharedPtr):this.ptr=n.createString(Jt)}convertUtf8OffsetToUtf16(e){return this.utf8OffsetToUtf16?e<0?0:e>this.utf8Length?this.utf16Length:this.utf8OffsetToUtf16[e]:e}convertUtf16OffsetToUtf8(e){return this.utf16OffsetToUtf8?e<0?0:e>this.utf16Length?this.utf8Length:this.utf16OffsetToUtf8[e]:e}dispose(){this.ptr===Dr._sharedPtr?Dr._sharedPtrInUse=!1:this._onigBinding.ofree(this.ptr)}};Ut(Wf,"LAST_ID",0);Ut(Wf,"_sharedPtr",0);Ut(Wf,"_sharedPtrInUse",!1);let lk=Wf;class KP{constructor(e){if(Ut(this,"_onigBinding"),Ut(this,"_ptr"),!Jt)throw new xy("Must invoke loadWasm first.");const n=[],r=[];for(let c=0,f=e.length;c<f;c++){const h=new Xf(e[c]);n[c]=h.createString(Jt),r[c]=h.utf8Length}const i=Jt.omalloc(4*e.length);Jt.HEAPU32.set(n,i/4);const a=Jt.omalloc(4*e.length);Jt.HEAPU32.set(r,a/4);const l=Jt.createOnigScanner(i,a,e.length);for(let c=0,f=e.length;c<f;c++)Jt.ofree(n[c]);Jt.ofree(a),Jt.ofree(i),l===0&&GP(Jt),this._onigBinding=Jt,this._ptr=l}dispose(){this._onigBinding.freeOnigScanner(this._ptr)}findNextMatchSync(e,n,r){let i=0;if(typeof r=="number"&&(i=r),typeof e=="string"){e=new lk(e);const a=this._findNextMatchSync(e,n,!1,i);return e.dispose(),a}return this._findNextMatchSync(e,n,!1,i)}_findNextMatchSync(e,n,r,i){const a=this._onigBinding,l=a.findNextOnigScannerMatch(this._ptr,e.id,e.ptr,e.utf8Length,e.convertUtf16OffsetToUtf8(n),i);if(l===0)return null;const c=a.HEAPU32;let f=l/4;const h=c[f++],m=c[f++],p=[];for(let _=0;_<m;_++){const y=e.convertUtf8OffsetToUtf16(c[f++]),v=e.convertUtf8OffsetToUtf16(c[f++]);p[_]={start:y,end:v,length:v-y}}return{index:h,captureIndices:p}}}function ZP(t){return typeof t.instantiator=="function"}function QP(t){return typeof t.default=="function"}function JP(t){return typeof t.data<"u"}function YP(t){return typeof Response<"u"&&t instanceof Response}function XP(t){return typeof ArrayBuffer<"u"&&(t instanceof ArrayBuffer||ArrayBuffer.isView(t))||typeof Buffer<"u"&&Buffer.isBuffer?.(t)||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer||typeof Uint32Array<"u"&&t instanceof Uint32Array}let kc;function WP(t){if(kc)return kc;async function e(){Jt=await FP(async n=>{let r=t;return r=await r,typeof r=="function"&&(r=await r(n)),typeof r=="function"&&(r=await r(n)),ZP(r)?r=await r.instantiator(n):QP(r)?r=await r.default(n):(JP(r)&&(r=r.data),YP(r)?typeof WebAssembly.instantiateStreaming=="function"?r=await ej(r)(n):r=await tj(r)(n):XP(r)?r=await rm(r)(n):r instanceof WebAssembly.Module?r=await rm(r)(n):"default"in r&&r.default instanceof WebAssembly.Module&&(r=await rm(r.default)(n))),"instance"in r&&(r=r.instance),"exports"in r&&(r=r.exports),r})}return kc=e(),kc}function rm(t){return e=>WebAssembly.instantiate(t,e)}function ej(t){return e=>WebAssembly.instantiateStreaming(t,e)}function tj(t){return async e=>{const n=await t.arrayBuffer();return WebAssembly.instantiate(n,e)}}async function nj(t){return t&&await WP(t),{createScanner(e){return new KP(e.map(n=>typeof n=="string"?n:n.source))},createString(e){return new lk(e)}}}const rj=NP({langs:PP,themes:BP,engine:()=>nj(D(()=>import("./wasm-CG6Dc4jp.js"),[]))}),{codeToHtml:eh}=MP(rj,{guessEmbeddedLanguages:K3});function ij(){const t=dt.c(2),[e,n]=X.useState(sj);let r,i;return t[0]===Symbol.for("react.memo_cache_sentinel")?(r=()=>{const a=window.matchMedia("(prefers-color-scheme: dark)"),l=c=>n(c.matches);return a.addEventListener("change",l),()=>a.removeEventListener("change",l)},i=[],t[0]=r,t[1]=i):(r=t[0],i=t[1]),X.useEffect(r,i),e}function sj(){return window.matchMedia("(prefers-color-scheme: dark)").matches}function aj({content:t}){const[e,n]=X.useState(""),r=ij(),i=a=>{try{const l=JSON.parse(a);return JSON.stringify(l,null,2)}catch{return a}};return X.useEffect(()=>{(async()=>{try{const l=await t.text(),c=i(l),f=await eh(c,{lang:"json",theme:r?"github-dark":"github-light"});n(f)}catch{const l=await t.text();n(`<pre>${i(l)}</pre>`)}})()},[t,r]),C.jsx("div",{className:"text-xs [&_pre]:bg-transparent! [&_pre]:p-0! [&_pre]:m-0! [&_pre]:overflow-visible! [&_code]:bg-transparent! [&_code]:block!",dangerouslySetInnerHTML:{__html:e}})}function oj(){const t=dt.c(2),[e,n]=X.useState(lj);let r,i;return t[0]===Symbol.for("react.memo_cache_sentinel")?(r=()=>{const a=window.matchMedia("(prefers-color-scheme: dark)"),l=c=>n(c.matches);return a.addEventListener("change",l),()=>a.removeEventListener("change",l)},i=[],t[0]=r,t[1]=i):(r=t[0],i=t[1]),X.useEffect(r,i),e}function lj(){return window.matchMedia("(prefers-color-scheme: dark)").matches}function uj({content:t}){const[e,n]=X.useState(""),r=oj(),i=a=>{try{const c=/(>)(<)(\/*)/g,f=a.replace(c,`$1
$2$3`);let h=0;return f.split(`
`).map(m=>{let p=0;m.match(/.+<\/\w[^>]*>$/)?p=0:m.match(/^<\/\w/)&&h>0?h-=1:m.match(/^<\w[^>]*[^/]>.*$/)?p=1:p=0;const _="  ".repeat(h);return h+=p,_+m}).join(`
`)}catch{return a}};return X.useEffect(()=>{(async()=>{try{const l=await t.text(),c=i(l),f=await eh(c,{lang:"xml",theme:r?"github-dark":"github-light"});n(f)}catch{const l=await t.text();n(`<pre>${i(l)}</pre>`)}})()},[t,r]),C.jsx("div",{className:"text-xs [&_pre]:bg-transparent! [&_pre]:p-0! [&_pre]:m-0! [&_pre]:overflow-visible! [&_code]:bg-transparent! [&_code]:block!",dangerouslySetInnerHTML:{__html:e}})}function cj(){const t=dt.c(2),[e,n]=X.useState(fj);let r,i;return t[0]===Symbol.for("react.memo_cache_sentinel")?(r=()=>{const a=window.matchMedia("(prefers-color-scheme: dark)"),l=c=>n(c.matches);return a.addEventListener("change",l),()=>a.removeEventListener("change",l)},i=[],t[0]=r,t[1]=i):(r=t[0],i=t[1]),X.useEffect(r,i),e}function fj(){return window.matchMedia("(prefers-color-scheme: dark)").matches}function hj({content:t}){const[e,n]=X.useState(""),r=cj();return X.useEffect(()=>{(async()=>{try{const a=await t.text(),l=await eh(a,{lang:"yaml",theme:r?"github-dark":"github-light"});n(l)}catch{const a=await t.text();n(`<pre>${a}</pre>`)}})()},[t,r]),C.jsx("div",{className:"text-xs [&_pre]:bg-transparent! [&_pre]:p-0! [&_pre]:m-0! [&_pre]:overflow-visible! [&_code]:bg-transparent! [&_code]:block!",dangerouslySetInnerHTML:{__html:e}})}function Kx(t){const e=dt.c(5),{content:n}=t,[r,i]=X.useState("");let a,l;e[0]!==n?(a=()=>{n.text().then(i)},l=[n],e[0]=n,e[1]=a,e[2]=l):(a=e[1],l=e[2]),X.useEffect(a,l);let c;return e[3]!==r?(c=C.jsx("pre",{className:"text-xs font-mono text-neutral-700 dark:text-neutral-200 whitespace-pre-wrap",children:r}),e[3]=r,e[4]=c):c=e[4],c}function dj(t){const e=dt.c(6),{content:n}=t,r=pj;let i;e[0]===Symbol.for("react.memo_cache_sentinel")?(i=C.jsx("div",{className:"text-neutral-500 dark:text-neutral-400 text-sm",children:"Binary content"}),e[0]=i):i=e[0];const a=r(n.size);let l;e[1]!==a?(l=C.jsx("div",{className:"text-2xl font-semibold text-neutral-700 dark:text-neutral-200",children:a}),e[1]=a,e[2]=l):l=e[2];let c;e[3]===Symbol.for("react.memo_cache_sentinel")?(c=C.jsx("div",{className:"text-xs text-neutral-400 dark:text-neutral-500",children:"Cannot preview binary data"}),e[3]=c):c=e[3];let f;return e[4]!==l?(f=C.jsx("div",{className:"flex flex-col items-center justify-center p-12 bg-neutral-100 dark:bg-white/5 rounded-lg border border-neutral-200 dark:border-white/10",children:C.jsxs("div",{className:"text-center space-y-2",children:[i,l,c]})}),e[4]=l,e[5]=f):f=e[5],f}function pj(t){return t<1024?`${t} B`:t<1048576?`${(t/1024).toFixed(2)} KB`:`${(t/1048576).toFixed(2)} MB`}function mj(t){const e=dt.c(4),{content:n}=t;let r;e[0]!==n?(r=URL.createObjectURL(n),e[0]=n,e[1]=r):r=e[1];const i=r;let a;return e[2]!==i?(a=C.jsx("div",{className:"h-full",children:C.jsx("img",{src:i,alt:"Response",className:"max-w-full max-h-full object-contain"})}),e[2]=i,e[3]=a):a=e[3],a}function gj(){const t=dt.c(2),[e,n]=X.useState(yj);let r,i;return t[0]===Symbol.for("react.memo_cache_sentinel")?(r=()=>{const a=window.matchMedia("(prefers-color-scheme: dark)"),l=c=>n(c.matches);return a.addEventListener("change",l),()=>a.removeEventListener("change",l)},i=[],t[0]=r,t[1]=i):(r=t[0],i=t[1]),X.useEffect(r,i),e}function yj(){return window.matchMedia("(prefers-color-scheme: dark)").matches}function _j(t){const e=[],n=t.split(/\n\n+/);for(const r of n){if(!r.trim())continue;const i={data:"",raw:r},a=r.split(`
`);for(const l of a)l.startsWith("id:")?i.id=l.slice(3).trim():l.startsWith("event:")?i.event=l.slice(6).trim():l.startsWith("data:")?i.data+=(i.data?`
`:"")+l.slice(5).trim():l.startsWith("retry:")&&(i.retry=parseInt(l.slice(6).trim(),10));(i.data||i.event||i.id)&&e.push(i)}return e}function bj(t){try{return JSON.parse(t)}catch{return null}}function vj({event:t,index:e,prefersDark:n}){const[r,i]=X.useState(!0),[a,l]=X.useState(""),c=X.useMemo(()=>bj(t.data),[t.data]);return X.useEffect(()=>{(async()=>{if(c)try{const h=JSON.stringify(c,null,2),m=await eh(h,{lang:"json",theme:n?"github-dark":"github-light"});l(m)}catch{l(`<pre>${JSON.stringify(c,null,2)}</pre>`)}})()},[c,n]),C.jsxs("div",{className:"border border-neutral-200 dark:border-white/10 rounded-lg overflow-hidden",children:[C.jsxs("button",{onClick:()=>i(!r),className:"w-full flex items-center gap-2 px-3 py-2 bg-neutral-50 dark:bg-white/5 hover:bg-neutral-100 dark:hover:bg-white/10 transition-colors",children:[r?C.jsx(cy,{className:"w-4 h-4 text-neutral-400"}):C.jsx(gL,{className:"w-4 h-4 text-neutral-400"}),C.jsxs("span",{className:"text-xs font-mono text-neutral-500 dark:text-neutral-400",children:["#",e+1]}),t.event&&C.jsx("span",{className:"px-2 py-0.5 text-xs font-medium bg-blue-100 dark:bg-blue-500/20 text-blue-700 dark:text-blue-300 rounded",children:t.event}),t.id&&C.jsxs("span",{className:"text-xs text-neutral-400 dark:text-neutral-500",children:["id: ",t.id]}),c&&C.jsx("span",{className:"px-1.5 py-0.5 text-[10px] font-medium bg-emerald-100 dark:bg-emerald-500/20 text-emerald-700 dark:text-emerald-300 rounded",children:"JSON"})]}),r&&C.jsx("div",{className:"p-3 bg-white dark:bg-transparent",children:c&&a?C.jsx("div",{className:"text-xs [&_pre]:bg-transparent! [&_pre]:p-0! [&_pre]:m-0! [&_pre]:overflow-visible! [&_code]:bg-transparent! [&_code]:block!",dangerouslySetInnerHTML:{__html:a}}):C.jsx("pre",{className:"text-xs font-mono text-neutral-700 dark:text-neutral-200 whitespace-pre-wrap",children:t.data})})]})}function wj(t){const e=dt.c(17),{content:n}=t;let r;e[0]===Symbol.for("react.memo_cache_sentinel")?(r=[],e[0]=r):r=e[0];const[i,a]=X.useState(r),[l,c]=X.useState(""),f=gj();let h,m;if(e[1]!==n?(h=()=>{n.text().then(w=>{c(w),a(_j(w))})},m=[n],e[1]=n,e[2]=h,e[3]=m):(h=e[2],m=e[3]),X.useEffect(h,m),i.length===0){let w;return e[4]!==l?(w=C.jsx("pre",{className:"text-xs font-mono text-neutral-700 dark:text-neutral-200 whitespace-pre-wrap",children:l}),e[4]=l,e[5]=w):w=e[5],w}const p=i.length!==1?"s":"";let _;e[6]!==i.length||e[7]!==p?(_=C.jsx("div",{className:"flex items-center gap-2 mb-3",children:C.jsxs("span",{className:"text-xs font-medium text-neutral-500 dark:text-neutral-400",children:[i.length," event",p]})}),e[6]=i.length,e[7]=p,e[8]=_):_=e[8];let y;if(e[9]!==i||e[10]!==f){let w;e[12]!==f?(w=(k,S)=>C.jsx(vj,{event:k,index:S,prefersDark:f},S),e[12]=f,e[13]=w):w=e[13],y=i.map(w),e[9]=i,e[10]=f,e[11]=y}else y=e[11];let v;return e[14]!==_||e[15]!==y?(v=C.jsxs("div",{className:"space-y-2",children:[_,y]}),e[14]=_,e[15]=y,e[16]=v):v=e[16],v}const xj=["video/","audio/","application/pdf","application/octet-stream","application/zip","application/gzip","application/x-tar","application/x-rar","application/x-7z","application/vnd.ms-","application/vnd.openxmlformats","application/x-executable","application/x-sharedlib","application/x-mach-binary","application/wasm","font/"],Sj=["image/png","image/jpeg","image/gif","image/webp","image/svg+xml","image/bmp","image/x-icon","image/ico","image/avif","image/apng"],Ej=["text/","application/json","application/xml","application/javascript","application/ecmascript","application/x-javascript","application/ld+json","application/manifest+json","application/schema+json","application/x-www-form-urlencoded","application/xhtml+xml","application/rss+xml","application/atom+xml","application/soap+xml","application/x-yaml","application/yaml","+json","+xml"];function kj(t){const e=t["content-type"]?.toLowerCase()||"";return e.includes("text/event-stream")?"sse":Sj.some(n=>e.includes(n))?"image":xj.some(n=>e.includes(n))?"binary":e.includes("json")||e.endsWith("+json")?"json":e.includes("xml")||e.endsWith("+xml")?"xml":e.includes("yaml")||e.includes("yml")?"yaml":(Ej.some(n=>e.includes(n)),"text")}function Cj(){const t=dt.c(35),{request:e}=Ji(),[n,r]=X.useState("pretty"),[i,a]=X.useState(!1),l=e?.httpResponse,c=e?.executing??!1,f=l?.error;if(c){let E;return t[0]===Symbol.for("react.memo_cache_sentinel")?(E=C.jsxs("div",{className:"flex flex-col items-center justify-center h-full min-h-50",children:[C.jsxs("div",{className:"relative mb-4",children:[C.jsx("div",{className:"w-12 h-12 rounded-full border-2 border-zinc-100 dark:border-zinc-800"}),C.jsx("div",{className:"absolute inset-0 w-12 h-12 rounded-full border-2 border-zinc-400 border-t-transparent animate-spin"})]}),C.jsx("span",{className:"text-xs font-medium text-zinc-400 uppercase tracking-widest animate-pulse",children:"Sending Request"})]}),t[0]=E):E=t[0],E}if(f){let E,M;t[1]===Symbol.for("react.memo_cache_sentinel")?(E=C.jsx(_L,{className:"w-5 h-5 text-rose-500 dark:text-rose-400"}),M=C.jsx("h3",{className:"font-semibold text-rose-500 dark:text-rose-400",children:"Error"}),t[1]=E,t[2]=M):(E=t[1],M=t[2]);let $;return t[3]!==f?($=C.jsx("div",{className:"bg-rose-500/10 border border-rose-500/20 rounded-xl p-4",children:C.jsxs("div",{className:"flex items-center gap-3",children:[E,C.jsxs("div",{children:[M,C.jsx("p",{className:"text-sm text-neutral-600 dark:text-neutral-300 mt-1",children:f})]})]})}),t[3]=f,t[4]=$):$=t[4],$}if(!l){let E;return t[5]===Symbol.for("react.memo_cache_sentinel")?(E=C.jsxs("div",{className:"h-full flex flex-col items-center justify-center",children:[C.jsx(zL,{className:"w-12 h-12 text-neutral-300 dark:text-neutral-600 mb-4"}),C.jsx("p",{className:"text-sm text-neutral-400 dark:text-neutral-500",children:"Hit Send to see what happens"})]}),t[5]=E):E=t[5],E}let h;t[6]!==l.headers?(h=kj(l.headers),t[6]=l.headers,t[7]=h):h=t[7];const m=h;let p;t[8]!==m||t[9]!==l.body||t[10]!==n?(p=()=>{if(n==="raw"&&m!=="image"&&m!=="binary")return C.jsx(Kx,{content:l.body});switch(m){case"json":return C.jsx(aj,{content:l.body});case"xml":return C.jsx(uj,{content:l.body});case"yaml":return C.jsx(hj,{content:l.body});case"sse":return C.jsx(wj,{content:l.body});case"image":return C.jsx(mj,{content:l.body});case"binary":return C.jsx(dj,{content:l.body});default:return C.jsx(Kx,{content:l.body})}},t[8]=m,t[9]=l.body,t[10]=n,t[11]=p):p=t[11];const _=p;let y;t[12]!==m||t[13]!==n?(y=m!=="binary"&&m!=="image"&&C.jsxs("div",{className:"flex gap-1 p-1 bg-neutral-100 dark:bg-white/5 rounded-lg",children:[C.jsx("button",{onClick:()=>r("pretty"),className:`px-3 py-1.5 text-xs font-medium rounded-md transition-all ${n==="pretty"?"bg-white dark:bg-white/10 text-neutral-800 dark:text-neutral-100 shadow-sm":"text-neutral-500 dark:text-neutral-400 hover:text-neutral-700 dark:hover:text-neutral-200"}`,children:"Pretty"}),C.jsx("button",{onClick:()=>r("raw"),className:`px-3 py-1.5 text-xs font-medium rounded-md transition-all ${n==="raw"?"bg-white dark:bg-white/10 text-neutral-800 dark:text-neutral-100 shadow-sm":"text-neutral-500 dark:text-neutral-400 hover:text-neutral-700 dark:hover:text-neutral-200"}`,children:"Raw"})]}),t[12]=m,t[13]=n,t[14]=y):y=t[14];let v;t[15]!==i?(v=()=>a(!i),t[15]=i,t[16]=v):v=t[16];const w=`px-3 py-1.5 text-xs font-medium rounded-lg transition-all ${i?"bg-white dark:bg-white/10 text-neutral-800 dark:text-neutral-100 shadow-sm":"bg-neutral-100 dark:bg-white/5 text-neutral-500 dark:text-neutral-400 hover:text-neutral-700 dark:hover:text-neutral-200"}`;let k;t[17]!==l.headers?(k=Object.keys(l.headers),t[17]=l.headers,t[18]=k):k=t[18];let S;t[19]!==v||t[20]!==w||t[21]!==k.length?(S=C.jsxs("button",{onClick:v,className:w,children:["Headers (",k.length,")"]}),t[19]=v,t[20]=w,t[21]=k.length,t[22]=S):S=t[22];let R;t[23]!==y||t[24]!==S?(R=C.jsxs("div",{className:"flex gap-2 shrink-0 mb-4",children:[y,S]}),t[23]=y,t[24]=S,t[25]=R):R=t[25];let T;t[26]!==l.headers||t[27]!==i?(T=i&&C.jsx("div",{className:"bg-neutral-100 dark:bg-white/5 rounded-xl border border-neutral-200 dark:border-white/10 overflow-hidden shrink-0 mb-4",children:C.jsxs("table",{className:"w-full",children:[C.jsx("thead",{children:C.jsxs("tr",{className:"border-b border-neutral-200 dark:border-white/10",children:[C.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-neutral-500 dark:text-neutral-400",children:"Header"}),C.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-neutral-500 dark:text-neutral-400",children:"Value"})]})}),C.jsx("tbody",{children:Object.entries(l.headers).map(Tj)})]})}),t[26]=l.headers,t[27]=i,t[28]=T):T=t[28];let z;t[29]!==_?(z=C.jsx("div",{className:"flex-1 min-h-0 overflow-auto",children:_()}),t[29]=_,t[30]=z):z=t[30];let L;return t[31]!==R||t[32]!==T||t[33]!==z?(L=C.jsxs("div",{className:"h-full flex flex-col overflow-hidden",children:[R,T,z]}),t[31]=R,t[32]=T,t[33]=z,t[34]=L):L=t[34],L}function Tj(t){const[e,n]=t;return C.jsxs("tr",{className:"border-b border-neutral-100 dark:border-white/5 last:border-0",children:[C.jsx("td",{className:"px-4 py-2 font-mono text-xs text-neutral-600 dark:text-neutral-300",children:e}),C.jsx("td",{className:"px-4 py-2 font-mono text-xs text-neutral-500 dark:text-neutral-400",children:n})]},e)}function Aj(){const t=dt.c(14),{request:e,newRequest:n}=Ji();if(!e){let p;return t[0]===Symbol.for("react.memo_cache_sentinel")?(p=C.jsx("div",{className:"flex-1 flex items-center justify-center text-neutral-400 dark:text-neutral-500",children:"No active request"}),t[0]=p):p=t[0],p}let r;t[1]===Symbol.for("react.memo_cache_sentinel")?(r=C.jsx("div",{className:"flex-1",children:C.jsx(cz,{})}),t[1]=r):r=t[1];let i;t[2]===Symbol.for("react.memo_cache_sentinel")?(i=C.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),t[2]=i):i=t[2];let a;t[3]!==n?(a=C.jsxs("div",{className:"pl-2 pr-3 py-2 border-b border-neutral-200 dark:border-white/5 flex items-center gap-2 shrink-0",children:[r,C.jsx("button",{onClick:n,className:"p-1.5 hover:bg-neutral-100 dark:hover:bg-white/10 rounded-md transition-colors text-neutral-500 dark:text-neutral-400 hover:text-neutral-700 dark:hover:text-neutral-200",title:"New request",children:i})]}),t[3]=n,t[4]=a):a=t[4];let l;t[5]===Symbol.for("react.memo_cache_sentinel")?(l=C.jsx("div",{className:"pl-2 pr-3 py-2 border-b border-neutral-200 dark:border-white/5 overflow-visible shrink-0",children:C.jsx(jz,{})}),t[5]=l):l=t[5];let c;t[6]!==e.httpResponse?(c=e.httpResponse&&C.jsx("h2",{className:"text-[10px] font-medium text-neutral-400 dark:text-neutral-500 uppercase tracking-wider mb-2 shrink-0",children:"Response"}),t[6]=e.httpResponse,t[7]=c):c=t[7];let f;t[8]===Symbol.for("react.memo_cache_sentinel")?(f=C.jsx("div",{className:"flex-1 min-h-0 overflow-hidden",children:C.jsx(Cj,{})}),t[8]=f):f=t[8];let h;t[9]!==c?(h=C.jsxs("div",{className:"flex-1 pl-2 pr-3 py-2 flex flex-col min-h-0 overflow-hidden",children:[c,f]}),t[9]=c,t[10]=h):h=t[10];let m;return t[11]!==a||t[12]!==h?(m=C.jsxs("div",{className:"h-full flex flex-col overflow-hidden",children:[a,l,h]}),t[11]=a,t[12]=h,t[13]=m):m=t[13],m}class Rj{#e=!0;#t;#n;#r;#i;#o;#s;#a;#p=0;#m=5;#u=!1;#c=!1;#l=null;#f=()=>{this.debugLog("Connected to event bus"),this.#o=!0,this.#u=!1,this.debugLog("Emitting queued events",this.#i),this.#i.forEach(e=>this.emitEventToBus(e)),this.#i=[],this.stopConnectLoop(),this.#n().removeEventListener("tanstack-connect-success",this.#f)};#h=()=>{if(this.#p<this.#m){this.#p++,this.dispatchCustomEvent("tanstack-connect",{});return}this.#n().removeEventListener("tanstack-connect",this.#h),this.#c=!0,this.debugLog("Max retries reached, giving up on connection"),this.stopConnectLoop()};#d=()=>{this.#u||(this.#u=!0,this.#n().addEventListener("tanstack-connect-success",this.#f),this.#h())};constructor({pluginId:e,debug:n=!1,enabled:r=!0,reconnectEveryMs:i=300}){this.#t=e,this.#e=r,this.#n=this.getGlobalTarget,this.#r=n,this.debugLog(" Initializing event subscription for plugin",this.#t),this.#i=[],this.#o=!1,this.#c=!1,this.#s=null,this.#a=i}startConnectLoop(){this.#s!==null||this.#o||(this.debugLog(`Starting connect loop (every ${this.#a}ms)`),this.#s=setInterval(this.#h,this.#a))}stopConnectLoop(){this.#u=!1,this.#s!==null&&(clearInterval(this.#s),this.#s=null,this.#i=[],this.debugLog("Stopped connect loop"))}debugLog(...e){this.#r&&console.log(` [tanstack-devtools:${this.#t}-plugin]`,...e)}getGlobalTarget(){if(typeof globalThis<"u"&&globalThis.__TANSTACK_EVENT_TARGET__)return this.debugLog("Using global event target"),globalThis.__TANSTACK_EVENT_TARGET__;if(typeof window<"u"&&typeof window.addEventListener<"u")return this.debugLog("Using window as event target"),window;const e=typeof EventTarget<"u"?new EventTarget:void 0;return typeof e>"u"||typeof e.addEventListener>"u"?(this.debugLog("No event mechanism available, running in non-web environment"),{addEventListener:()=>{},removeEventListener:()=>{},dispatchEvent:()=>!1}):(this.debugLog("Using new EventTarget as fallback"),e)}getPluginId(){return this.#t}dispatchCustomEventShim(e,n){try{const r=new Event(e,{detail:n});this.#n().dispatchEvent(r)}catch{this.debugLog("Failed to dispatch shim event")}}dispatchCustomEvent(e,n){try{this.#n().dispatchEvent(new CustomEvent(e,{detail:n}))}catch{this.dispatchCustomEventShim(e,n)}}emitEventToBus(e){this.debugLog("Emitting event to client bus",e),this.dispatchCustomEvent("tanstack-dispatch-event",e)}createEventPayload(e,n){return{type:`${this.#t}:${e}`,payload:n,pluginId:this.#t}}emit(e,n){if(!this.#e){this.debugLog("Event bus client is disabled, not emitting event",e,n);return}if(this.#l&&(this.debugLog("Emitting event to internal event target",e,n),this.#l.dispatchEvent(new CustomEvent(`${this.#t}:${e}`,{detail:this.createEventPayload(e,n)}))),this.#c){this.debugLog("Previously failed to connect, not emitting to bus");return}if(!this.#o){this.debugLog("Bus not available, will be pushed as soon as connected"),this.#i.push(this.createEventPayload(e,n)),typeof CustomEvent<"u"&&!this.#u&&(this.#d(),this.startConnectLoop());return}return this.emitEventToBus(this.createEventPayload(e,n))}on(e,n,r){const i=r?.withEventTarget??!1,a=`${this.#t}:${e}`;if(i&&(this.#l||(this.#l=new EventTarget),this.#l.addEventListener(a,c=>{n(c.detail)})),!this.#e)return this.debugLog("Event bus client is disabled, not registering event",a),()=>{};const l=c=>{this.debugLog("Received event from bus",c.detail),n(c.detail)};return this.#n().addEventListener(a,l),this.debugLog("Registered event to bus",a),()=>{i&&this.#l?.removeEventListener(a,l),this.#n().removeEventListener(a,l)}}onAll(e){if(!this.#e)return this.debugLog("Event bus client is disabled, not registering event"),()=>{};const n=r=>{const i=r.detail;e(i)};return this.#n().addEventListener("tanstack-devtools-global",n),()=>this.#n().removeEventListener("tanstack-devtools-global",n)}onAllPluginEvents(e){if(!this.#e)return this.debugLog("Event bus client is disabled, not registering event"),()=>{};const n=r=>{const i=r.detail;this.#t&&i.pluginId!==this.#t||e(i)};return this.#n().addEventListener("tanstack-devtools-global",n),()=>this.#n().removeEventListener("tanstack-devtools-global",n)}}class Oj extends Rj{constructor(){super({pluginId:"tanstack-ai-devtools"})}}const Rt=new Oj;async function Ij(t){let e="";for await(const n of t)n.type==="content"&&n.delta&&(e+=n.delta);return e}function Nj(t){return typeof t=="object"&&t!==null&&"~standard"in t&&typeof t["~standard"]=="object"&&t["~standard"].version===1&&typeof t["~standard"].jsonSchema=="object"&&typeof t["~standard"].jsonSchema.input=="function"}function Os(t){return typeof t=="object"&&t!==null&&"~standard"in t&&typeof t["~standard"]=="object"&&t!==null&&t["~standard"]!==null&&"version"in t["~standard"]&&t["~standard"].version===1&&"validate"in t["~standard"]&&typeof t["~standard"].validate=="function"}function wl(t,e=[]){const n={...t};if(n.type==="object"&&n.properties){const r={...n.properties},i=Object.keys(r);for(const a of i){const l=r[a],c=!e.includes(a);l.type==="object"&&l.properties?r[a]=wl(l,l.required||[]):l.type==="array"&&l.items?r[a]={...l,items:wl(l.items,l.items.required||[])}:c&&(l.type&&!Array.isArray(l.type)?r[a]={...l,type:[l.type,"null"]}:Array.isArray(l.type)&&!l.type.includes("null")&&(r[a]={...l,type:[...l.type,"null"]}))}n.properties=r,n.required=i,n.additionalProperties=!1}return n.type==="array"&&n.items&&(n.items=wl(n.items,n.items.required||[])),n}function mg(t,e={}){if(!t)return;const{forStructuredOutput:n=!1}=e;if(Nj(t)){let i=t["~standard"].jsonSchema.input({target:"draft-07"});if(typeof i=="object"&&"$schema"in i){const{$schema:a,...l}=i;i=l}return typeof i=="object"&&("properties"in i&&!i.type&&(i.type="object"),i.type==="object"&&!("properties"in i)&&(i.properties={}),i.type==="object"&&!("required"in i)&&(i.required=[]),n&&(i=wl(i,i.required||[]))),i}return n&&typeof t=="object"?wl(t,t.required||[]):t}function Ua(t,e){if(!Os(t))return e;const n=t["~standard"].validate(e);if(n instanceof Promise)throw new Error("Schema validation returned a Promise. Use validateWithStandardSchema for async validation.");if(!n.issues)return n.value;const r=n.issues.map(i=>i.message||"Validation failed").join(", ");throw new Error(`Validation failed: ${r}`)}class Dj{constructor(e){this.toolCallsMap=new Map,this.tools=e}addToolCallChunk(e){const n=e.index,r=this.toolCallsMap.get(n);r?(e.toolCall.function.name&&!r.function.name&&(r.function.name=e.toolCall.function.name),e.toolCall.function.arguments&&(r.function.arguments+=e.toolCall.function.arguments)):e.toolCall.id&&e.toolCall.function.name&&this.toolCallsMap.set(n,{id:e.toolCall.id,type:"function",function:{name:e.toolCall.function.name,arguments:e.toolCall.function.arguments||""}})}hasToolCalls(){return this.getToolCalls().length>0}getToolCalls(){return Array.from(this.toolCallsMap.values()).filter(e=>e.id&&e.function.name&&e.function.name.trim().length>0)}async*executeTools(e){const n=this.getToolCalls(),r=[];for(const i of n){const a=this.tools.find(c=>c.name===i.function.name);let l;if(a?.execute)try{let c;try{c=JSON.parse(i.function.arguments)}catch{throw new Error(`Failed to parse tool arguments as JSON: ${i.function.arguments}`)}if(a.inputSchema&&Os(a.inputSchema))try{c=Ua(a.inputSchema,c)}catch(h){const m=h instanceof Error?h.message:"Validation failed";throw new Error(`Input validation failed for tool ${a.name}: ${m}`)}let f=await a.execute(c);if(a.outputSchema&&Os(a.outputSchema)&&f!==void 0&&f!==null)try{f=Ua(a.outputSchema,f)}catch(h){const m=h instanceof Error?h.message:"Validation failed";throw new Error(`Output validation failed for tool ${a.name}: ${m}`)}l=typeof f=="string"?f:JSON.stringify(f)}catch(c){l=`Error executing tool: ${c instanceof Error?c.message:"Unknown error"}`}else l=`Tool ${i.function.name} does not have an execute function`;yield{type:"tool_result",id:e.id,model:e.model,timestamp:Date.now(),toolCallId:i.id,content:l},r.push({role:"tool",content:l,toolCallId:i.id})}return r}clear(){this.toolCallsMap.clear()}}async function Zx(t,e,n=new Map,r=new Map){const i=[],a=[],l=[],c=new Map;for(const f of e)c.set(f.name,f);for(const f of t){const h=c.get(f.function.name),m=f.function.name;if(!h){i.push({toolCallId:f.id,toolName:m,result:{error:`Unknown tool: ${m}`},state:"output-error"});continue}let p={};const _=f.function.arguments.trim()||"{}";try{p=JSON.parse(_)}catch{throw new Error(`Failed to parse tool arguments as JSON: ${_}`)}if(h.inputSchema&&Os(h.inputSchema))try{p=Ua(h.inputSchema,p)}catch(v){const w=v instanceof Error?v.message:"Validation failed";i.push({toolCallId:f.id,toolName:m,result:{error:`Input validation failed for tool ${h.name}: ${w}`},state:"output-error"});continue}if(!h.execute){if(h.needsApproval){const v=`approval_${f.id}`;n.has(v)?n.get(v)?r.has(f.id)?i.push({toolCallId:f.id,toolName:m,result:r.get(f.id)}):l.push({toolCallId:f.id,toolName:m,input:p}):i.push({toolCallId:f.id,toolName:m,result:{error:"User declined tool execution"},state:"output-error"}):a.push({toolCallId:f.id,toolName:f.function.name,input:p,approvalId:v})}else r.has(f.id)?i.push({toolCallId:f.id,toolName:m,result:r.get(f.id)}):l.push({toolCallId:f.id,toolName:m,input:p});continue}if(h.needsApproval){const v=`approval_${f.id}`;if(n.has(v))if(n.get(v)){const k=Date.now();try{let S=await h.execute(p);const R=Date.now()-k;h.outputSchema&&Os(h.outputSchema)&&S!==void 0&&S!==null&&(S=Ua(h.outputSchema,S)),i.push({toolCallId:f.id,toolName:m,result:typeof S=="string"?JSON.parse(S):S||null,duration:R})}catch(S){const R=Date.now()-k,T=S instanceof Error?S.message:"Unknown error";i.push({toolCallId:f.id,toolName:m,result:{error:T},state:"output-error",duration:R})}}else i.push({toolCallId:f.id,toolName:m,result:{error:"User declined tool execution"},state:"output-error"});else a.push({toolCallId:f.id,toolName:m,input:p,approvalId:v});continue}const y=Date.now();try{let v=await h.execute(p);const w=Date.now()-y;h.outputSchema&&Os(h.outputSchema)&&v!==void 0&&v!==null&&(v=Ua(h.outputSchema,v)),i.push({toolCallId:f.id,toolName:m,result:typeof v=="string"?JSON.parse(v):v||null,duration:w})}catch(v){const w=Date.now()-y,k=v instanceof Error?v.message:"Unknown error";i.push({toolCallId:f.id,toolName:m,result:{error:k},state:"output-error",duration:w})}}return{results:i,needsApproval:a,needsClientExecution:l}}function uk(t){return({iterationCount:e})=>e<t}class ck{constructor(e){this.iterationCount=0,this.lastFinishReason=null,this.streamStartTime=0,this.totalChunkCount=0,this.currentMessageId=null,this.accumulatedContent="",this.doneChunk=null,this.shouldEmitStreamEnd=!0,this.earlyTermination=!1,this.toolPhase="continue",this.cyclePhase="processText",this.adapter=e.adapter,this.params=e.params,this.systemPrompts=e.params.systemPrompts||[],this.tools=e.params.tools||[],this.loopStrategy=e.params.agentLoopStrategy||uk(5),this.toolCallManager=new Dj(this.tools),this.initialMessageCount=e.params.messages.length,this.messages=e.params.messages,this.requestId=this.createId("chat"),this.streamId=this.createId("stream"),this.effectiveRequest=e.params.abortController?{signal:e.params.abortController.signal}:void 0,this.effectiveSignal=e.params.abortController?.signal}getAccumulatedContent(){return this.accumulatedContent}getMessages(){return this.messages}async*run(){this.beforeRun();try{if((yield*this.checkForPendingToolCalls())==="wait")return;do{if(this.earlyTermination||this.isAborted())return;this.beginCycle(),this.cyclePhase==="processText"?yield*this.streamModelResponse():yield*this.processToolCalls(),this.endCycle()}while(this.shouldContinue())}finally{this.afterRun()}}beforeRun(){this.streamStartTime=Date.now();const{model:e,tools:n,temperature:r,topP:i,maxTokens:a,metadata:l,modelOptions:c,conversationId:f}=this.params,h={};r!==void 0&&(h.temperature=r),i!==void 0&&(h.topP=i),a!==void 0&&(h.maxTokens=a),l!==void 0&&(h.metadata=l),Rt.emit("text:started",{requestId:this.requestId,streamId:this.streamId,model:e,provider:this.adapter.name,messageCount:this.initialMessageCount,hasTools:!!n&&n.length>0,streaming:!0,timestamp:Date.now(),clientId:f,toolNames:n?.map(m=>m.name),options:Object.keys(h).length>0?h:void 0,modelOptions:c}),Rt.emit("stream:started",{streamId:this.streamId,model:e,provider:this.adapter.name,timestamp:Date.now()})}afterRun(){if(!this.shouldEmitStreamEnd)return;const e=Date.now();Rt.emit("text:completed",{requestId:this.requestId,streamId:this.streamId,model:this.params.model,content:this.accumulatedContent,messageId:this.currentMessageId||void 0,finishReason:this.lastFinishReason||void 0,usage:this.doneChunk?.usage,timestamp:e}),Rt.emit("stream:ended",{requestId:this.requestId,streamId:this.streamId,totalChunks:this.totalChunkCount,duration:e-this.streamStartTime,timestamp:e})}beginCycle(){this.cyclePhase==="processText"&&this.beginIteration()}endCycle(){if(this.cyclePhase==="processText"){this.cyclePhase="executeToolCalls";return}this.cyclePhase="processText",this.iterationCount++}beginIteration(){this.currentMessageId=this.createId("msg"),this.accumulatedContent="",this.doneChunk=null}async*streamModelResponse(){const{temperature:e,topP:n,maxTokens:r,metadata:i,modelOptions:a}=this.params,c=this.params.tools?.map(f=>({...f,inputSchema:f.inputSchema?mg(f.inputSchema):void 0,outputSchema:f.outputSchema?mg(f.outputSchema):void 0}));for await(const f of this.adapter.chatStream({model:this.params.model,messages:this.messages,tools:c,temperature:e,topP:n,maxTokens:r,metadata:i,request:this.effectiveRequest,modelOptions:a,systemPrompts:this.systemPrompts}))if(this.isAborted()||(this.totalChunkCount++,yield f,this.handleStreamChunk(f),this.earlyTermination))break}handleStreamChunk(e){switch(e.type){case"content":this.handleContentChunk(e);break;case"tool_call":this.handleToolCallChunk(e);break;case"tool_result":this.handleToolResultChunk(e);break;case"done":this.handleDoneChunk(e);break;case"error":this.handleErrorChunk(e);break;case"thinking":this.handleThinkingChunk(e);break}}handleContentChunk(e){this.accumulatedContent=e.content,Rt.emit("stream:chunk:content",{streamId:this.streamId,messageId:this.currentMessageId||void 0,content:e.content,delta:e.delta,timestamp:Date.now()})}handleToolCallChunk(e){this.toolCallManager.addToolCallChunk(e),Rt.emit("stream:chunk:tool-call",{streamId:this.streamId,messageId:this.currentMessageId||void 0,toolCallId:e.toolCall.id,toolName:e.toolCall.function.name,index:e.index,arguments:e.toolCall.function.arguments,timestamp:Date.now()})}handleToolResultChunk(e){Rt.emit("stream:chunk:tool-result",{streamId:this.streamId,messageId:this.currentMessageId||void 0,toolCallId:e.toolCallId,result:e.content,timestamp:Date.now()})}handleDoneChunk(e){if(this.doneChunk?.finishReason==="tool_calls"&&e.finishReason==="stop"){this.lastFinishReason=e.finishReason,Rt.emit("stream:chunk:done",{streamId:this.streamId,messageId:this.currentMessageId||void 0,finishReason:e.finishReason,usage:e.usage,timestamp:Date.now()}),e.usage&&Rt.emit("usage:tokens",{requestId:this.requestId,streamId:this.streamId,messageId:this.currentMessageId||void 0,model:this.params.model,usage:e.usage,timestamp:Date.now()});return}this.doneChunk=e,this.lastFinishReason=e.finishReason,Rt.emit("stream:chunk:done",{streamId:this.streamId,messageId:this.currentMessageId||void 0,finishReason:e.finishReason,usage:e.usage,timestamp:Date.now()}),e.usage&&Rt.emit("usage:tokens",{requestId:this.requestId,streamId:this.streamId,messageId:this.currentMessageId||void 0,model:this.params.model,usage:e.usage,timestamp:Date.now()})}handleErrorChunk(e){Rt.emit("stream:chunk:error",{streamId:this.streamId,messageId:this.currentMessageId||void 0,error:e.error.message,timestamp:Date.now()}),this.earlyTermination=!0,this.shouldEmitStreamEnd=!1}handleThinkingChunk(e){Rt.emit("stream:chunk:thinking",{streamId:this.streamId,messageId:this.currentMessageId||void 0,content:e.content,delta:e.delta,timestamp:Date.now()})}async*checkForPendingToolCalls(){const e=this.getPendingToolCallsFromMessages();if(e.length===0)return"continue";const n=this.createSyntheticDoneChunk();Rt.emit("text:iteration",{requestId:this.requestId,streamId:this.streamId,iterationNumber:this.iterationCount+1,messageCount:this.messages.length,toolCallCount:e.length,timestamp:Date.now()});const{approvals:r,clientToolResults:i}=this.collectClientState(),a=await Zx(e,this.tools,r,i);if(a.needsApproval.length>0||a.needsClientExecution.length>0){for(const c of this.emitApprovalRequests(a.needsApproval,n))yield c;for(const c of this.emitClientToolInputs(a.needsClientExecution,n))yield c;return this.shouldEmitStreamEnd=!1,"wait"}const l=this.emitToolResults(a.results,n);for(const c of l)yield c;return"continue"}async*processToolCalls(){if(!this.shouldExecuteToolPhase()){this.setToolPhase("stop");return}const e=this.toolCallManager.getToolCalls(),n=this.doneChunk;if(!n||e.length===0){this.setToolPhase("stop");return}Rt.emit("text:iteration",{requestId:this.requestId,streamId:this.streamId,iterationNumber:this.iterationCount+1,messageCount:this.messages.length,toolCallCount:e.length,timestamp:Date.now()}),this.addAssistantToolCallMessage(e);const{approvals:r,clientToolResults:i}=this.collectClientState(),a=await Zx(e,this.tools,r,i);if(a.needsApproval.length>0||a.needsClientExecution.length>0){for(const c of this.emitApprovalRequests(a.needsApproval,n))yield c;for(const c of this.emitClientToolInputs(a.needsClientExecution,n))yield c;this.setToolPhase("wait");return}const l=this.emitToolResults(a.results,n);for(const c of l)yield c;this.toolCallManager.clear(),this.setToolPhase("continue")}shouldExecuteToolPhase(){return this.doneChunk?.finishReason==="tool_calls"&&this.tools.length>0&&this.toolCallManager.hasToolCalls()}addAssistantToolCallMessage(e){this.messages=[...this.messages,{role:"assistant",content:this.accumulatedContent||null,toolCalls:e}]}collectClientState(){const e=new Map,n=new Map;for(const r of this.messages)if(r.role==="assistant"&&r.parts){const i=r.parts;for(const a of i)a.type==="tool-call"&&a.state==="approval-responded"&&a.approval&&e.set(a.approval.id,a.approval.approved),a.type==="tool-call"&&a.output!==void 0&&!a.approval&&n.set(a.id,a.output)}return{approvals:e,clientToolResults:n}}emitApprovalRequests(e,n){const r=[];for(const i of e)Rt.emit("stream:approval-requested",{streamId:this.streamId,messageId:this.currentMessageId||void 0,toolCallId:i.toolCallId,toolName:i.toolName,input:i.input,approvalId:i.approvalId,timestamp:Date.now()}),r.push({type:"approval-requested",id:n.id,model:n.model,timestamp:Date.now(),toolCallId:i.toolCallId,toolName:i.toolName,input:i.input,approval:{id:i.approvalId,needsApproval:!0}});return r}emitClientToolInputs(e,n){const r=[];for(const i of e)Rt.emit("stream:tool-input-available",{streamId:this.streamId,messageId:this.currentMessageId||void 0,toolCallId:i.toolCallId,toolName:i.toolName,input:i.input,timestamp:Date.now()}),r.push({type:"tool-input-available",id:n.id,model:n.model,timestamp:Date.now(),toolCallId:i.toolCallId,toolName:i.toolName,input:i.input});return r}emitToolResults(e,n){const r=[];for(const i of e){Rt.emit("tool:call-completed",{requestId:this.requestId,streamId:this.streamId,messageId:this.currentMessageId||void 0,toolCallId:i.toolCallId,toolName:i.toolName,result:i.result,duration:i.duration??0,timestamp:Date.now()});const a=JSON.stringify(i.result),l={type:"tool_result",id:n.id,model:n.model,timestamp:Date.now(),toolCallId:i.toolCallId,content:a};r.push(l),this.messages=[...this.messages,{role:"tool",content:a,toolCallId:i.toolCallId}]}return r}getPendingToolCallsFromMessages(){const e=new Set(this.messages.filter(r=>r.role==="tool"&&r.toolCallId).map(r=>r.toolCallId)),n=[];for(const r of this.messages)if(r.role==="assistant"&&r.toolCalls)for(const i of r.toolCalls)e.has(i.id)||n.push(i);return n}createSyntheticDoneChunk(){return{type:"done",id:this.createId("pending"),model:this.params.model,timestamp:Date.now(),finishReason:"tool_calls"}}shouldContinue(){return this.cyclePhase==="executeToolCalls"?!0:this.loopStrategy({iterationCount:this.iterationCount,messages:this.messages,finishReason:this.lastFinishReason})&&this.toolPhase==="continue"}isAborted(){return!!this.effectiveSignal?.aborted}setToolPhase(e){this.toolPhase=e,e==="wait"&&(this.shouldEmitStreamEnd=!1)}createId(e){return`${e}-${Date.now()}-${Math.random().toString(36).slice(2,9)}`}}function Mj(t){const{outputSchema:e,stream:n}=t;return e?zj(t):n===!1?Lj(t):fk(t)}async function*fk(t){const{adapter:e,...n}=t,r=e.model,i=new ck({adapter:e,params:{...n,model:r}});for await(const a of i.run())yield a}function Lj(t){const e=fk(t);return Ij(e)}async function zj(t){const{adapter:e,outputSchema:n,...r}=t,i=e.model;if(!n)throw new Error("outputSchema is required for structured output");const a=new ck({adapter:e,params:{...r,model:i}});for await(const _ of a.run());const l=a.getMessages(),{tools:c,agentLoopStrategy:f,...h}=r,m=mg(n);if(!m)throw new Error("Failed to convert output schema to JSON Schema");const p=await e.structuredOutput({chatOptions:{...h,model:i,messages:l},outputSchema:m});return Os(n)?Ua(n,p.data):p.data}function hi(t){return{__toolSide:"definition",...t,server(n){return{__toolSide:"server",...t,execute:n}},client(n){return{__toolSide:"client",...t,execute:n}}}}function Qx(t){return t===null?"":typeof t=="string"?t:t.filter(e=>e.type==="text").map(e=>e.content).join("")}function Pj(t){const e=[];for(const n of t)"parts"in n?e.push(...hk(n)):e.push(n);return e}function hk(t){const e=[];if(t.role==="system")return e;const n=[],r=[],i=[];for(const c of t.parts)c.type==="text"?n.push(c):c.type==="tool-call"?r.push(c):c.type==="tool-result"&&i.push(c);const a=n.map(c=>c.content).join("")||null,l=r.length>0?r.filter(c=>c.state==="input-complete"||c.state==="approval-responded"||c.output!==void 0).map(c=>({id:c.id,type:"function",function:{name:c.name,arguments:c.arguments}})):void 0;t.role!=="assistant"||a||!l?e.push({role:t.role,content:a,...l&&l.length>0&&{toolCalls:l}}):l.length>0&&e.push({role:"assistant",content:a,toolCalls:l});for(const c of i)(c.state==="complete"||c.state==="error")&&e.push({role:"tool",content:c.content,toolCallId:c.toolCallId});return e}function jj(t,e){const n=[],r=Qx(t.content);if(r&&n.push({type:"text",content:r}),t.toolCalls&&t.toolCalls.length>0)for(const i of t.toolCalls)n.push({type:"tool-call",id:i.id,name:i.function.name,arguments:i.function.arguments,state:"input-complete"});return t.role==="tool"&&t.toolCallId&&n.push({type:"tool-result",toolCallId:t.toolCallId,content:Qx(t.content),state:"complete"}),{id:e||Cf(),role:t.role==="tool"?"assistant":t.role,parts:n}}function Bj(t,e){return"parts"in t?{...t,id:t.id||e(),createdAt:t.createdAt||new Date}:{...jj(t,e()),createdAt:new Date}}function Cf(){return`msg-${Date.now()}-${Math.random().toString(36).substring(7)}`}var vs={},im={},Jx;function Yx(){return Jx||(Jx=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Allow=t.ALL=t.COLLECTION=t.ATOM=t.SPECIAL=t.INF=t._INFINITY=t.INFINITY=t.NAN=t.BOOL=t.NULL=t.OBJ=t.ARR=t.NUM=t.STR=void 0,t.STR=1,t.NUM=2,t.ARR=4,t.OBJ=8,t.NULL=16,t.BOOL=32,t.NAN=64,t.INFINITY=128,t._INFINITY=256,t.INF=t.INFINITY|t._INFINITY,t.SPECIAL=t.NULL|t.BOOL|t.INF|t.NAN,t.ATOM=t.STR|t.NUM|t.SPECIAL,t.COLLECTION=t.ARR|t.OBJ,t.ALL=t.ATOM|t.COLLECTION,t.Allow={STR:t.STR,NUM:t.NUM,ARR:t.ARR,OBJ:t.OBJ,NULL:t.NULL,BOOL:t.BOOL,NAN:t.NAN,INFINITY:t.INFINITY,_INFINITY:t._INFINITY,INF:t.INF,SPECIAL:t.SPECIAL,ATOM:t.ATOM,COLLECTION:t.COLLECTION,ALL:t.ALL},t.default=t.Allow})(im)),im}var Xx;function Uj(){return Xx||(Xx=1,(function(t){var e=vs&&vs.__createBinding||(Object.create?(function(h,m,p,_){_===void 0&&(_=p);var y=Object.getOwnPropertyDescriptor(m,p);(!y||("get"in y?!m.__esModule:y.writable||y.configurable))&&(y={enumerable:!0,get:function(){return m[p]}}),Object.defineProperty(h,_,y)}):(function(h,m,p,_){_===void 0&&(_=p),h[_]=m[p]})),n=vs&&vs.__exportStar||function(h,m){for(var p in h)p!=="default"&&!Object.prototype.hasOwnProperty.call(m,p)&&e(m,h,p)};Object.defineProperty(t,"__esModule",{value:!0}),t.Allow=t.MalformedJSON=t.PartialJSON=t.parseJSON=t.parse=void 0;const r=Yx();Object.defineProperty(t,"Allow",{enumerable:!0,get:function(){return r.Allow}}),n(Yx(),t);class i extends Error{}t.PartialJSON=i;class a extends Error{}t.MalformedJSON=a;function l(h,m=r.Allow.ALL){if(typeof h!="string")throw new TypeError(`expecting str, got ${typeof h}`);if(!h.trim())throw new Error(`${h} is empty`);return c(h.trim(),m)}t.parseJSON=l;const c=(h,m)=>{const p=h.length;let _=0;const y=L=>{throw new i(`${L} at position ${_}`)},v=L=>{throw new a(`${L} at position ${_}`)},w=()=>(z(),_>=p&&y("Unexpected end of input"),h[_]==='"'?k():h[_]==="{"?S():h[_]==="["?R():h.substring(_,_+4)==="null"||r.Allow.NULL&m&&p-_<4&&"null".startsWith(h.substring(_))?(_+=4,null):h.substring(_,_+4)==="true"||r.Allow.BOOL&m&&p-_<4&&"true".startsWith(h.substring(_))?(_+=4,!0):h.substring(_,_+5)==="false"||r.Allow.BOOL&m&&p-_<5&&"false".startsWith(h.substring(_))?(_+=5,!1):h.substring(_,_+8)==="Infinity"||r.Allow.INFINITY&m&&p-_<8&&"Infinity".startsWith(h.substring(_))?(_+=8,1/0):h.substring(_,_+9)==="-Infinity"||r.Allow._INFINITY&m&&1<p-_&&p-_<9&&"-Infinity".startsWith(h.substring(_))?(_+=9,-1/0):h.substring(_,_+3)==="NaN"||r.Allow.NAN&m&&p-_<3&&"NaN".startsWith(h.substring(_))?(_+=3,NaN):T()),k=()=>{const L=_;let E=!1;for(_++;_<p&&(h[_]!=='"'||E&&h[_-1]==="\\");)E=h[_]==="\\"?!E:!1,_++;if(h.charAt(_)=='"')try{return JSON.parse(h.substring(L,++_-Number(E)))}catch(M){v(String(M))}else if(r.Allow.STR&m)try{return JSON.parse(h.substring(L,_-Number(E))+'"')}catch{return JSON.parse(h.substring(L,h.lastIndexOf("\\"))+'"')}y("Unterminated string literal")},S=()=>{_++,z();const L={};try{for(;h[_]!=="}";){if(z(),_>=p&&r.Allow.OBJ&m)return L;const E=k();z(),_++;try{const M=w();L[E]=M}catch(M){if(r.Allow.OBJ&m)return L;throw M}z(),h[_]===","&&_++}}catch{if(r.Allow.OBJ&m)return L;y("Expected '}' at end of object")}return _++,L},R=()=>{_++;const L=[];try{for(;h[_]!=="]";)L.push(w()),z(),h[_]===","&&_++}catch{if(r.Allow.ARR&m)return L;y("Expected ']' at end of array")}return _++,L},T=()=>{if(_===0){h==="-"&&v("Not sure what '-' is");try{return JSON.parse(h)}catch(E){if(r.Allow.NUM&m)try{return JSON.parse(h.substring(0,h.lastIndexOf("e")))}catch{}v(String(E))}}const L=_;for(h[_]==="-"&&_++;h[_]&&",]}".indexOf(h[_])===-1;)_++;_==p&&!(r.Allow.NUM&m)&&y("Unterminated number literal");try{return JSON.parse(h.substring(L,_))}catch{h.substring(L,_)==="-"&&y("Not sure what '-' is");try{return JSON.parse(h.substring(L,h.lastIndexOf("e")))}catch(M){v(String(M))}}},z=()=>{for(;_<p&&` 
\r	`.includes(h[_]);)_++};return w()},f=l;t.parse=f})(vs)),vs}var $j=Uj();class qj{parse(e){if(!(!e||e.trim()===""))try{return $j.parse(e)}catch{return}}}const Fj=new qj;function Vj(t,e,n){return t.map(r=>{if(r.id!==e)return r;const i=[...r.parts],a=i.length>0?i[i.length-1]:null;return a&&a.type==="text"?i[i.length-1]={type:"text",content:n}:i.push({type:"text",content:n}),{...r,parts:i}})}function sm(t,e,n){return t.map(r=>{if(r.id!==e)return r;const i=[...r.parts],a=i.findIndex(c=>c.type==="tool-call"&&c.id===n.id),l={type:"tool-call",id:n.id,name:n.name,arguments:n.arguments,state:n.state};return a>=0?i[a]=l:i.push(l),{...r,parts:i}})}function Wx(t,e,n,r,i,a){return t.map(l=>{if(l.id!==e)return l;const c=[...l.parts],f=c.findIndex(m=>m.type==="tool-result"&&m.toolCallId===n),h={type:"tool-result",toolCallId:n,content:r,state:i,...a&&{error:a}};return f>=0?c[f]=h:c.push(h),{...l,parts:c}})}function Hj(t,e,n,r){return t.map(i=>{if(i.id!==e)return i;const a=[...i.parts],l=a.find(c=>c.type==="tool-call"&&c.id===n);return l&&(l.state="approval-requested",l.approval={id:r,needsApproval:!0}),{...i,parts:a}})}function Gj(t,e,n,r,i){return t.map(a=>{const l=[...a.parts],c=l.find(f=>f.type==="tool-call"&&f.id===e);return c&&(c.output=i?{error:i}:n,r?c.state=r:c.state="input-complete"),{...a,parts:l}})}function Kj(t,e,n){return t.map(r=>{const i=[...r.parts],a=i.find(l=>l.type==="tool-call"&&l.approval?.id===e);return a&&a.approval&&(a.approval.approved=n,a.state="approval-responded"),{...r,parts:i}})}function Zj(t,e,n){return t.map(r=>{if(r.id!==e)return r;const i=[...r.parts],a=i.findIndex(c=>c.type==="thinking"),l={type:"thinking",content:n};return a>=0?i[a]=l:i.push(l),{...r,parts:i}})}class Qj{shouldEmit(e,n){return!0}}class Sy{constructor(e={}){this.messages=[],this.currentAssistantMessageId=null,this.totalTextContent="",this.currentSegmentText="",this.lastEmittedText="",this.thinkingContent="",this.toolCalls=new Map,this.toolCallOrder=[],this.finishReason=null,this.isDone=!1,this.hasToolCallsSinceTextStart=!1,this.recording=null,this.recordingStartTime=0,this.chunkStrategy=e.chunkStrategy||new Qj,this.events=e.events||{},this.handlers=e.handlers||{},this.jsonParser=e.jsonParser||Fj,this.recordingEnabled=e.recording??!1,e.initialMessages&&(this.messages=[...e.initialMessages])}setMessages(e){this.messages=[...e],this.emitMessagesChange()}addUserMessage(e){const n={id:Cf(),role:"user",parts:[{type:"text",content:e}],createdAt:new Date};return this.messages=[...this.messages,n],this.emitMessagesChange(),n}startAssistantMessage(){this.resetStreamState();const e={id:Cf(),role:"assistant",parts:[],createdAt:new Date};return this.currentAssistantMessageId=e.id,this.messages=[...this.messages,e],this.events.onStreamStart?.(),this.emitMessagesChange(),e.id}addToolResult(e,n,r){const i=this.messages.find(f=>f.parts.some(h=>h.type==="tool-call"&&h.id===e));if(!i){console.warn(`[StreamProcessor] Could not find message with tool call ${e}`);return}let a=Gj(this.messages,e,n,r?"input-complete":void 0,r);const l=typeof n=="string"?n:JSON.stringify(n),c=r?"error":"complete";a=Wx(a,i.id,e,l,c,r),this.messages=a,this.emitMessagesChange()}addToolApprovalResponse(e,n){this.messages=Kj(this.messages,e,n),this.emitMessagesChange()}toModelMessages(){const e=[];for(const n of this.messages)e.push(...hk(n));return e}getMessages(){return this.messages}areAllToolsComplete(){const e=this.messages.findLast(r=>r.role==="assistant");if(!e)return!0;const n=e.parts.filter(r=>r.type==="tool-call");return n.length===0?!0:n.every(r=>r.state==="approval-responded"||r.output!==void 0&&!r.approval)}removeMessagesAfter(e){this.messages=this.messages.slice(0,e+1),this.emitMessagesChange()}clearMessages(){this.messages=[],this.currentAssistantMessageId=null,this.emitMessagesChange()}async process(e){this.resetStreamState(),this.recordingEnabled&&this.startRecording();for await(const n of e)this.processChunk(n);return this.finalizeStream(),this.recording&&(this.recording.result=this.getResult()),this.getResult()}processChunk(e){switch(this.recording&&this.recording.chunks.push({chunk:e,timestamp:Date.now(),index:this.recording.chunks.length}),e.type){case"content":this.handleContentChunk(e);break;case"tool_call":this.handleToolCallChunk(e);break;case"tool_result":this.handleToolResultChunk(e);break;case"done":this.handleDoneChunk(e);break;case"error":this.handleErrorChunk(e);break;case"thinking":this.handleThinkingChunk(e);break;case"approval-requested":this.handleApprovalRequestedChunk(e);break;case"tool-input-available":this.handleToolInputAvailableChunk(e);break}}handleContentChunk(e){this.completeAllToolCalls();const n=this.currentSegmentText;this.hasToolCallsSinceTextStart&&n.length>0&&this.isNewTextSegment(e,n)&&(n!==this.lastEmittedText&&this.emitTextUpdate(),this.currentSegmentText="",this.lastEmittedText="",this.hasToolCallsSinceTextStart=!1);const i=this.currentSegmentText;let a=i;e.delta!==""?a=i+e.delta:e.content!==""&&(e.content.startsWith(i)?a=e.content:i.startsWith(e.content)?a=i:a=i+e.content);const l=a.slice(i.length);this.currentSegmentText=a,this.totalTextContent+=l;const c=e.delta??e.content??"";this.chunkStrategy.shouldEmit(c,this.currentSegmentText)&&this.currentSegmentText!==this.lastEmittedText&&this.emitTextUpdate()}handleToolCallChunk(e){this.hasToolCallsSinceTextStart=!0;const n=e.toolCall.id,r=this.toolCalls.get(n);if(r){const i=r.state==="awaiting-input";r.arguments+=e.toolCall.function.arguments||"",i&&e.toolCall.function.arguments&&(r.state="input-streaming"),r.parsedArguments=this.jsonParser.parse(r.arguments);const a=this.toolCallOrder.indexOf(n);this.handlers.onToolCallStateChange?.(a,r.id,r.name,r.state,r.arguments,r.parsedArguments),e.toolCall.function.arguments&&this.handlers.onToolCallDelta?.(a,e.toolCall.function.arguments),this.currentAssistantMessageId&&(this.messages=sm(this.messages,this.currentAssistantMessageId,{id:r.id,name:r.name,arguments:r.arguments,state:r.state}),this.emitMessagesChange(),this.events.onToolCallStateChange?.(this.currentAssistantMessageId,r.id,r.state,r.arguments))}else{const i=e.toolCall.function.arguments?"input-streaming":"awaiting-input",a={id:e.toolCall.id,name:e.toolCall.function.name,arguments:e.toolCall.function.arguments||"",state:i,parsedArguments:void 0,index:e.index};e.toolCall.function.arguments&&(a.parsedArguments=this.jsonParser.parse(e.toolCall.function.arguments)),this.toolCalls.set(n,a),this.toolCallOrder.push(n);const l=this.toolCallOrder.indexOf(n);this.handlers.onToolCallStart?.(l,e.toolCall.id,e.toolCall.function.name),this.handlers.onToolCallStateChange?.(l,e.toolCall.id,e.toolCall.function.name,i,e.toolCall.function.arguments||"",a.parsedArguments),e.toolCall.function.arguments&&this.handlers.onToolCallDelta?.(l,e.toolCall.function.arguments),this.currentAssistantMessageId&&(this.messages=sm(this.messages,this.currentAssistantMessageId,{id:e.toolCall.id,name:e.toolCall.function.name,arguments:e.toolCall.function.arguments||"",state:i}),this.emitMessagesChange(),this.events.onToolCallStateChange?.(this.currentAssistantMessageId,e.toolCall.id,i,e.toolCall.function.arguments||""))}}handleToolResultChunk(e){const n="complete";this.handlers.onToolResultStateChange?.(e.toolCallId,e.content,n),this.currentAssistantMessageId&&(this.messages=Wx(this.messages,this.currentAssistantMessageId,e.toolCallId,e.content,n),this.emitMessagesChange())}handleDoneChunk(e){this.finishReason=e.finishReason,this.isDone=!0,this.completeAllToolCalls()}handleErrorChunk(e){this.handlers.onError?.(e.error),this.events.onError?.(new Error(e.error.message))}handleThinkingChunk(e){const n=this.thinkingContent;let r=n;e.delta!==""?r=n+e.delta:e.content!==""&&(e.content.startsWith(n)?r=e.content:n.startsWith(e.content)?r=n:r=n+e.content),this.thinkingContent=r,this.handlers.onThinkingUpdate?.(this.thinkingContent),this.currentAssistantMessageId&&(this.messages=Zj(this.messages,this.currentAssistantMessageId,this.thinkingContent),this.emitMessagesChange(),this.events.onThinkingUpdate?.(this.currentAssistantMessageId,this.thinkingContent))}handleApprovalRequestedChunk(e){this.handlers.onApprovalRequested?.(e.toolCallId,e.toolName,e.input,e.approval.id),this.currentAssistantMessageId&&(this.messages=Hj(this.messages,this.currentAssistantMessageId,e.toolCallId,e.approval.id),this.emitMessagesChange()),this.events.onApprovalRequest?.({toolCallId:e.toolCallId,toolName:e.toolName,input:e.input,approvalId:e.approval.id})}handleToolInputAvailableChunk(e){this.handlers.onToolInputAvailable?.(e.toolCallId,e.toolName,e.input),this.events.onToolCall?.({toolCallId:e.toolCallId,toolName:e.toolName,input:e.input})}isNewTextSegment(e,n){return e.delta!==void 0&&e.content!==void 0&&(e.content.length<n.length||!e.content.startsWith(n)&&!n.startsWith(e.content))}completeAllToolCalls(){this.toolCalls.forEach((e,n)=>{if(e.state!=="input-complete"){const r=this.toolCallOrder.indexOf(n);this.completeToolCall(r,e)}})}completeToolCall(e,n){n.state="input-complete",n.parsedArguments=this.jsonParser.parse(n.arguments),this.handlers.onToolCallStateChange?.(e,n.id,n.name,"input-complete",n.arguments,n.parsedArguments),this.handlers.onToolCallComplete?.(e,n.id,n.name,n.arguments),this.currentAssistantMessageId&&(this.messages=sm(this.messages,this.currentAssistantMessageId,{id:n.id,name:n.name,arguments:n.arguments,state:"input-complete"}),this.emitMessagesChange(),this.events.onToolCallStateChange?.(this.currentAssistantMessageId,n.id,"input-complete",n.arguments))}emitTextUpdate(){this.lastEmittedText=this.currentSegmentText,this.handlers.onTextUpdate?.(this.currentSegmentText),this.currentAssistantMessageId&&(this.messages=Vj(this.messages,this.currentAssistantMessageId,this.currentSegmentText),this.emitMessagesChange(),this.events.onTextUpdate?.(this.currentAssistantMessageId,this.currentSegmentText))}emitMessagesChange(){this.events.onMessagesChange?.([...this.messages])}finalizeStream(){this.completeAllToolCalls(),this.currentSegmentText!==this.lastEmittedText&&this.emitTextUpdate();const e=this.getCompletedToolCalls();if(this.handlers.onStreamEnd?.(this.totalTextContent,e.length>0?e:void 0),this.currentAssistantMessageId){const n=this.messages.find(r=>r.id===this.currentAssistantMessageId);n&&this.events.onStreamEnd?.(n)}}getCompletedToolCalls(){return Array.from(this.toolCalls.values()).filter(e=>e.state==="input-complete").map(e=>({id:e.id,type:"function",function:{name:e.name,arguments:e.arguments}}))}getResult(){const e=this.getCompletedToolCalls();return{content:this.totalTextContent,thinking:this.thinkingContent||void 0,toolCalls:e.length>0?e:void 0,finishReason:this.finishReason}}getState(){return{content:this.totalTextContent,thinking:this.thinkingContent,toolCalls:new Map(this.toolCalls),toolCallOrder:[...this.toolCallOrder],finishReason:this.finishReason,done:this.isDone}}startRecording(){this.recordingEnabled=!0,this.recordingStartTime=Date.now(),this.recording={version:"1.0",timestamp:this.recordingStartTime,chunks:[]}}getRecording(){return this.recording}resetStreamState(){this.totalTextContent="",this.currentSegmentText="",this.lastEmittedText="",this.thinkingContent="",this.toolCalls.clear(),this.toolCallOrder=[],this.finishReason=null,this.isDone=!1,this.hasToolCallsSinceTextStart=!1,this.chunkStrategy.reset?.()}reset(){this.resetStreamState(),this.messages=[],this.currentAssistantMessageId=null}static async replay(e,n){return new Sy(n).process(Jj(e))}}function Jj(t){return{async*[Symbol.asyncIterator](){for(const{chunk:e}of t.chunks)yield e}}}class Yj{constructor(e){this.clientId=e}clientCreated(e){this.emitEvent("client:created",{initialMessageCount:e})}loadingChanged(e){this.emitEvent("client:loading-changed",{isLoading:e})}errorChanged(e){this.emitEvent("client:error-changed",{error:e})}textUpdated(e,n,r){this.emitEvent("processor:text-updated",{streamId:e,content:r}),this.emitEvent("client:assistant-message-updated",{messageId:n,content:r})}toolCallStateChanged(e,n,r,i,a,l){this.emitEvent("processor:tool-call-state-changed",{streamId:e,toolCallId:r,toolName:i,state:a,arguments:l}),this.emitEvent("client:tool-call-updated",{messageId:n,toolCallId:r,toolName:i,state:a,arguments:l})}toolResultStateChanged(e,n,r,i,a){this.emitEvent("processor:tool-result-state-changed",{streamId:e,toolCallId:n,content:r,state:i,error:a})}thinkingUpdated(e,n,r,i){this.emitEvent("stream:chunk:thinking",{streamId:e,messageId:n,content:r,delta:i})}approvalRequested(e,n,r,i,a){this.emitEvent("client:approval-requested",{messageId:e,toolCallId:n,toolName:r,input:i,approvalId:a})}messageAppended(e){const n=e.parts.filter(r=>r.type==="text").map(r=>r.content).join(" ").substring(0,100);this.emitEvent("client:message-appended",{messageId:e.id,role:e.role,contentPreview:n})}messageSent(e,n){this.emitEvent("client:message-sent",{messageId:e,content:n})}reloaded(e){this.emitEvent("client:reloaded",{fromMessageIndex:e})}stopped(){this.emitEvent("client:stopped")}messagesCleared(){this.emitEvent("client:messages-cleared")}toolResultAdded(e,n,r,i){this.emitEvent("tool:result-added",{toolCallId:e,toolName:n,output:r,state:i})}toolApprovalResponded(e,n,r){this.emitEvent("tool:approval-responded",{approvalId:e,toolCallId:n,approved:r})}}class Xj extends Yj{emitEvent(e,n){e.startsWith("client:")||e.startsWith("tool:")?Rt.emit(e,{...n,clientId:this.clientId,timestamp:Date.now()}):Rt.emit(e,{...n,timestamp:Date.now()})}}class Wj{constructor(e){if(this.body={},this.isLoading=!1,this.error=void 0,this.abortController=null,this.currentStreamId=null,this.currentMessageId=null,this.postStreamActions=[],this.uniqueId=e.id||this.generateUniqueId("chat"),this.body=e.body||{},this.connection=e.connection,this.events=new Xj(this.uniqueId),this.clientToolsRef={current:new Map},e.tools)for(const n of e.tools)this.clientToolsRef.current.set(n.name,n);this.callbacksRef={current:{onResponse:e.onResponse||(()=>{}),onChunk:e.onChunk||(()=>{}),onFinish:e.onFinish||(()=>{}),onError:e.onError||(()=>{}),onMessagesChange:e.onMessagesChange||(()=>{}),onLoadingChange:e.onLoadingChange||(()=>{}),onErrorChange:e.onErrorChange||(()=>{})}},this.processor=new Sy({chunkStrategy:e.streamProcessor?.chunkStrategy,initialMessages:e.initialMessages,events:{onMessagesChange:n=>{this.callbacksRef.current.onMessagesChange(n)},onStreamStart:()=>{},onStreamEnd:n=>{this.callbacksRef.current.onFinish(n)},onError:n=>{this.setError(n),this.callbacksRef.current.onError(n)},onTextUpdate:(n,r)=>{this.currentStreamId&&this.events.textUpdated(this.currentStreamId,n,r)},onThinkingUpdate:(n,r)=>{this.currentStreamId&&this.events.thinkingUpdated(this.currentStreamId,n,r)},onToolCallStateChange:(n,r,i,a)=>{const h=this.processor.getMessages().find(m=>m.id===n)?.parts.find(m=>m.type==="tool-call"&&m.id===r)?.name||"unknown";this.currentStreamId&&this.events.toolCallStateChanged(this.currentStreamId,n,r,h,i,a)},onToolCall:async n=>{const r=this.clientToolsRef.current.get(n.toolName);if(r?.execute)try{const i=await r.execute(n.input);await this.addToolResult({toolCallId:n.toolCallId,tool:n.toolName,output:i,state:"output-available"})}catch(i){await this.addToolResult({toolCallId:n.toolCallId,tool:n.toolName,output:null,state:"output-error",errorText:i.message})}},onApprovalRequest:n=>{this.events.approvalRequested(this.currentMessageId||"",n.toolCallId,n.toolName,n.input,n.approvalId)}}}),this.events.clientCreated(this.processor.getMessages().length)}generateUniqueId(e){return`${e}-${Date.now()}-${Math.random().toString(36).substring(7)}`}setIsLoading(e){this.isLoading=e,this.callbacksRef.current.onLoadingChange(e),this.events.loadingChanged(e)}setError(e){this.error=e,this.callbacksRef.current.onErrorChange(e),this.events.errorChanged(e?.message||null)}async processStream(e){this.currentStreamId=this.generateUniqueId("stream");const n=this.processor.startAssistantMessage();this.currentMessageId=n;const r={id:n,role:"assistant",parts:[],createdAt:new Date};this.events.messageAppended(r);for await(const l of e)this.callbacksRef.current.onChunk(l),this.processor.processChunk(l),await new Promise(c=>setTimeout(c,0));return this.processor.finalizeStream(),this.currentStreamId=null,this.currentMessageId=null,this.processor.getMessages().find(l=>l.id===n)||{id:n,role:"assistant",parts:[],createdAt:new Date}}async sendMessage(e){if(!e.trim()||this.isLoading)return;const n=this.processor.addUserMessage(e.trim());this.events.messageSent(n.id,e.trim()),await this.streamResponse()}async append(e){const n=Bj(e,Cf);if(n.role==="system")return;const r=n;this.events.messageAppended(r);const i=this.processor.getMessages();this.processor.setMessages([...i,r]),await this.streamResponse()}async streamResponse(){this.setIsLoading(!0),this.setError(void 0),this.abortController=new AbortController;try{const e=this.processor.toModelMessages();await this.callbacksRef.current.onResponse();const n={...this.body,conversationId:this.uniqueId},r=this.connection.connect(e,n,this.abortController.signal);await this.processStream(r)}catch(e){if(e instanceof Error){if(e.name==="AbortError")return;this.setError(e),this.callbacksRef.current.onError(e)}}finally{this.abortController=null,this.setIsLoading(!1),await this.drainPostStreamActions()}}async reload(){const e=this.processor.getMessages();if(e.length===0)return;const n=e.findLastIndex(r=>r.role==="user");n!==-1&&(this.events.reloaded(n),this.processor.removeMessagesAfter(n),await this.streamResponse())}stop(){this.abortController&&(this.abortController.abort(),this.abortController=null),this.setIsLoading(!1),this.events.stopped()}clear(){this.processor.clearMessages(),this.setError(void 0),this.events.messagesCleared()}async addToolResult(e){if(this.events.toolResultAdded(e.toolCallId,e.tool,e.output,e.state||"output-available"),this.processor.addToolResult(e.toolCallId,e.output,e.errorText),this.isLoading){this.queuePostStreamAction(()=>this.checkForContinuation());return}await this.checkForContinuation()}async addToolApprovalResponse(e){const n=this.processor.getMessages();let r;for(const i of n){const a=i.parts.find(l=>l.type==="tool-call"&&l.approval?.id===e.id);if(a){r=a.id;break}}if(r&&this.events.toolApprovalResponded(e.id,r,e.approved),this.processor.addToolApprovalResponse(e.id,e.approved),this.isLoading){this.queuePostStreamAction(()=>this.checkForContinuation());return}await this.checkForContinuation()}queuePostStreamAction(e){this.postStreamActions.push(e)}async drainPostStreamActions(){for(;this.postStreamActions.length>0;)await this.postStreamActions.shift()()}async checkForContinuation(){this.shouldAutoSend()&&await this.streamResponse()}shouldAutoSend(){return this.processor.areAllToolsComplete()}getMessages(){return this.processor.getMessages()}getIsLoading(){return this.isLoading}getError(){return this.error}setMessagesManually(e){this.processor.setMessages(e)}updateOptions(e){if(e.connection!==void 0&&(this.connection=e.connection),e.body!==void 0&&(this.body=e.body),e.tools!==void 0){this.clientToolsRef.current=new Map;for(const n of e.tools)this.clientToolsRef.current.set(n.name,n)}e.onResponse!==void 0&&(this.callbacksRef.current.onResponse=e.onResponse),e.onChunk!==void 0&&(this.callbacksRef.current.onChunk=e.onChunk),e.onFinish!==void 0&&(this.callbacksRef.current.onFinish=e.onFinish),e.onError!==void 0&&(this.callbacksRef.current.onError=e.onError)}}function e5(...t){return t}function t5(t){return{async*connect(e,n){const r=Pj(e);yield*t(r,n)}}}function n5(t){const e=X.useId(),n=t.id||e,[r,i]=X.useState(t.initialMessages||[]),[a,l]=X.useState(!1),[c,f]=X.useState(void 0),h=X.useRef(t.initialMessages||[]),m=X.useRef(!0);X.useEffect(()=>{h.current=r},[r]);const p=X.useRef(t);p.current=t;const _=X.useMemo(()=>{const L=m.current?t.initialMessages||[]:h.current;return m.current=!1,new Wj({connection:p.current.connection,id:n,initialMessages:L,body:p.current.body,onResponse:p.current.onResponse,onChunk:p.current.onChunk,onFinish:p.current.onFinish,onError:p.current.onError,tools:p.current.tools,streamProcessor:t.streamProcessor,onMessagesChange:E=>{i(E)},onLoadingChange:E=>{l(E)},onErrorChange:E=>{f(E)}})},[n]);X.useEffect(()=>{t.initialMessages&&t.initialMessages.length>0&&r.length===0&&_.setMessagesManually(t.initialMessages)},[]),X.useEffect(()=>()=>{_.stop()},[_]);const y=X.useCallback(async L=>{await _.sendMessage(L)},[_]),v=X.useCallback(async L=>{await _.append(L)},[_]),w=X.useCallback(async()=>{await _.reload()},[_]),k=X.useCallback(()=>{_.stop()},[_]),S=X.useCallback(()=>{_.clear()},[_]),R=X.useCallback(L=>{_.setMessagesManually(L)},[_]),T=X.useCallback(async L=>{await _.addToolResult(L)},[_]),z=X.useCallback(async L=>{await _.addToolApprovalResponse(L)},[_]);return{messages:r,sendMessage:y,append:v,reload:w,stop:k,isLoading:a,error:c,setMessages:R,clear:S,addToolResult:T,addToolApprovalResponse:z}}class r5{constructor(e={},n){this.kind="text",this.config=e,this.model=n}generateId(){return`${this.name}-${Date.now()}-${Math.random().toString(36).substring(7)}`}}const i5=t=>{if(t.conversation&&t.previous_response_id)throw new Error("Cannot use both 'conversation' and 'previous_response_id' in the same request.")},s5=t=>{a5(t),i5(t)},a5=t=>{const e=t.metadata;if(e&&Object.keys(e).length>16)throw new Error("Metadata cannot have more than 16 key-value pairs.");if(e&&Object.keys(e).some(a=>a.length>64))throw new Error("Metadata keys cannot be longer than 64 characters.");if(e&&Object.values(e).some(a=>a.length>512))throw new Error("Metadata values cannot be longer than 512 characters.")};function gg(t){if(t!==null){if(Array.isArray(t))return t.map(e=>gg(e));if(typeof t=="object"){const e={};for(const[n,r]of Object.entries(t)){const i=gg(r);i!==void 0&&(e[n]=i)}return e}return t}}function xl(t,e=[]){const n={...t};if(n.type==="object"&&n.properties){const r={...n.properties},i=Object.keys(r);for(const a of i){const l=r[a],c=!e.includes(a);l.type==="object"&&l.properties?r[a]=xl(l,l.required||[]):l.type==="array"&&l.items?r[a]={...l,items:xl(l.items,l.items.required||[])}:c&&(l.type&&!Array.isArray(l.type)?r[a]={...l,type:[l.type,"null"]}:Array.isArray(l.type)&&!l.type.includes("null")&&(r[a]={...l,type:[...l.type,"null"]}))}n.properties=r,n.required=i,n.additionalProperties=!1}return n.type==="array"&&n.items&&(n.items=xl(n.items,n.items.required||[])),n}function o5(t){return{type:"apply_patch"}}function l5(t){return{type:"code_interpreter",container:t.metadata.container}}function u5(t){const e=t.metadata;return{type:"computer_use_preview",display_height:e.display_height,display_width:e.display_width,environment:e.environment}}function c5(t){const e=t.metadata;return{type:"custom",name:e.name,description:e.description,format:e.format}}function f5(t){const e=t.metadata;return{type:"file_search",vector_store_ids:e.vector_store_ids,max_num_results:e.max_num_results,ranking_options:e.ranking_options,filters:e.filters}}function h5(t){const e=t.inputSchema??{type:"object",properties:{},required:[]},n=xl(e,e.required||[]);return n.additionalProperties=!1,{type:"function",name:t.name,description:t.description,parameters:n,strict:!0}}function d5(t){return{type:"image_generation",...t.metadata}}function p5(t){return{type:"local_shell"}}function m5(t){if(!t.server_url&&!t.connector_id)throw new Error("Either server_url or connector_id must be provided.");if(t.connector_id&&t.server_url)throw new Error("Only one of server_url or connector_id can be provided.")}function g5(t){const n={type:"mcp",...t.metadata};return m5(n),n}function y5(t){return{type:"shell"}}function _5(t){const e=t.metadata;return{type:e.type,search_context_size:e.search_context_size,user_location:e.user_location}}function b5(t){return t.metadata}function v5(t){return t.map(e=>{const n=new Set(["apply_patch","code_interpreter","computer_use_preview","file_search","image_generation","local_shell","mcp","shell","web_search_preview","web_search","custom"]),r=e.name;if(n.has(r))switch(r){case"apply_patch":return o5();case"code_interpreter":return l5(e);case"computer_use_preview":return u5(e);case"file_search":return f5(e);case"image_generation":return d5(e);case"local_shell":return p5();case"mcp":return g5(e);case"shell":return y5();case"web_search_preview":return _5(e);case"web_search":return b5(e);case"custom":return c5(e)}return h5(e)})}function Ne(t,e,n,r,i){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n}function W(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)}let dk=function(){const{crypto:t}=globalThis;if(t?.randomUUID)return dk=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,r=>(+r^n()&15>>+r/4).toString(16))};function yg(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const _g=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};class Te extends Error{}class on extends Te{constructor(e,n,r,i){super(`${on.makeMessage(e,n,r)}`),this.status=e,this.headers=i,this.requestID=i?.get("x-request-id"),this.error=n;const a=n;this.code=a?.code,this.param=a?.param,this.type=a?.type}static makeMessage(e,n,r){const i=n?.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return e&&i?`${e} ${i}`:e?`${e} status code (no body)`:i||"(no status code or body)"}static generate(e,n,r,i){if(!e||!i)return new th({message:r,cause:_g(n)});const a=n?.error;return e===400?new pk(e,a,r,i):e===401?new mk(e,a,r,i):e===403?new gk(e,a,r,i):e===404?new yk(e,a,r,i):e===409?new _k(e,a,r,i):e===422?new bk(e,a,r,i):e===429?new vk(e,a,r,i):e>=500?new wk(e,a,r,i):new on(e,a,r,i)}}class yr extends on{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class th extends on{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class Ey extends th{constructor({message:e}={}){super({message:e??"Request timed out."})}}class pk extends on{}class mk extends on{}class gk extends on{}class yk extends on{}class _k extends on{}class bk extends on{}class vk extends on{}class wk extends on{}class xk extends Te{constructor(){super("Could not parse response content as the length limit was reached")}}class Sk extends Te{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}class ll extends Error{constructor(e){super(e)}}const w5=/^[a-z][a-z0-9+.-]*:/i,x5=t=>w5.test(t);let Pn=t=>(Pn=Array.isArray,Pn(t)),e1=Pn;function Ek(t){return typeof t!="object"?{}:t??{}}function S5(t){if(!t)return!0;for(const e in t)return!1;return!0}function E5(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function am(t){return t!=null&&typeof t=="object"&&!Array.isArray(t)}const k5=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Te(`${t} must be an integer`);if(e<0)throw new Te(`${t} must be a positive integer`);return e},C5=t=>{try{return JSON.parse(t)}catch{return}},Yl=t=>new Promise(e=>setTimeout(e,t)),Aa="6.15.0",T5=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u";function A5(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const R5=()=>{const t=A5();if(t==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Aa,"X-Stainless-OS":n1(Deno.build.os),"X-Stainless-Arch":t1(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:Deno.version?.deno??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Aa,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(t==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Aa,"X-Stainless-OS":n1(globalThis.process.platform??"unknown"),"X-Stainless-Arch":t1(globalThis.process.arch??"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":globalThis.process.version??"unknown"};const e=O5();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Aa,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Aa,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function O5(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const r=n.exec(navigator.userAgent);if(r){const i=r[1]||0,a=r[2]||0,l=r[3]||0;return{browser:e,version:`${i}.${a}.${l}`}}}return null}const t1=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",n1=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let r1;const I5=()=>r1??(r1=R5());function N5(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new OpenAI({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function kk(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function Ck(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return kk({start(){},async pull(n){const{done:r,value:i}=await e.next();r?n.close():n.enqueue(i)},async cancel(){await e.return?.()}})}function Tk(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n?.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function D5(t){if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await t[Symbol.asyncIterator]().return?.();return}const e=t.getReader(),n=e.cancel();e.releaseLock(),await n}const M5=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)}),Ak="RFC3986",Rk=t=>String(t),i1={RFC1738:t=>String(t).replace(/%20/g,"+"),RFC3986:Rk},L5="RFC1738";let bg=(t,e)=>(bg=Object.hasOwn??Function.prototype.call.bind(Object.prototype.hasOwnProperty),bg(t,e));const Ir=(()=>{const t=[];for(let e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t})(),om=1024,z5=(t,e,n,r,i)=>{if(t.length===0)return t;let a=t;if(typeof t=="symbol"?a=Symbol.prototype.toString.call(t):typeof t!="string"&&(a=String(t)),n==="iso-8859-1")return escape(a).replace(/%u[0-9a-f]{4}/gi,function(c){return"%26%23"+parseInt(c.slice(2),16)+"%3B"});let l="";for(let c=0;c<a.length;c+=om){const f=a.length>=om?a.slice(c,c+om):a,h=[];for(let m=0;m<f.length;++m){let p=f.charCodeAt(m);if(p===45||p===46||p===95||p===126||p>=48&&p<=57||p>=65&&p<=90||p>=97&&p<=122||i===L5&&(p===40||p===41)){h[h.length]=f.charAt(m);continue}if(p<128){h[h.length]=Ir[p];continue}if(p<2048){h[h.length]=Ir[192|p>>6]+Ir[128|p&63];continue}if(p<55296||p>=57344){h[h.length]=Ir[224|p>>12]+Ir[128|p>>6&63]+Ir[128|p&63];continue}m+=1,p=65536+((p&1023)<<10|f.charCodeAt(m)&1023),h[h.length]=Ir[240|p>>18]+Ir[128|p>>12&63]+Ir[128|p>>6&63]+Ir[128|p&63]}l+=h.join("")}return l};function P5(t){return!t||typeof t!="object"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))}function s1(t,e){if(Pn(t)){const n=[];for(let r=0;r<t.length;r+=1)n.push(e(t[r]));return n}return e(t)}const Ok={brackets(t){return String(t)+"[]"},comma:"comma",indices(t,e){return String(t)+"["+e+"]"},repeat(t){return String(t)}},Ik=function(t,e){Array.prototype.push.apply(t,Pn(e)?e:[e])};let a1;const Pt={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:z5,encodeValuesOnly:!1,format:Ak,formatter:Rk,indices:!1,serializeDate(t){return(a1??(a1=Function.prototype.call.bind(Date.prototype.toISOString)))(t)},skipNulls:!1,strictNullHandling:!1};function j5(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="symbol"||typeof t=="bigint"}const lm={};function Nk(t,e,n,r,i,a,l,c,f,h,m,p,_,y,v,w,k,S){let R=t,T=S,z=0,L=!1;for(;(T=T.get(lm))!==void 0&&!L;){const P=T.get(t);if(z+=1,typeof P<"u"){if(P===z)throw new RangeError("Cyclic object value");L=!0}typeof T.get(lm)>"u"&&(z=0)}if(typeof h=="function"?R=h(e,R):R instanceof Date?R=_?.(R):n==="comma"&&Pn(R)&&(R=s1(R,function(P){return P instanceof Date?_?.(P):P})),R===null){if(a)return f&&!w?f(e,Pt.encoder,k,"key",y):e;R=""}if(j5(R)||P5(R)){if(f){const P=w?e:f(e,Pt.encoder,k,"key",y);return[v?.(P)+"="+v?.(f(R,Pt.encoder,k,"value",y))]}return[v?.(e)+"="+v?.(String(R))]}const E=[];if(typeof R>"u")return E;let M;if(n==="comma"&&Pn(R))w&&f&&(R=s1(R,f)),M=[{value:R.length>0?R.join(",")||null:void 0}];else if(Pn(h))M=h;else{const P=Object.keys(R);M=m?P.sort(m):P}const $=c?String(e).replace(/\./g,"%2E"):String(e),F=r&&Pn(R)&&R.length===1?$+"[]":$;if(i&&Pn(R)&&R.length===0)return F+"[]";for(let P=0;P<M.length;++P){const Z=M[P],se=typeof Z=="object"&&typeof Z.value<"u"?Z.value:R[Z];if(l&&se===null)continue;const me=p&&c?Z.replace(/\./g,"%2E"):Z,V=Pn(R)?typeof n=="function"?n(F,me):F:F+(p?"."+me:"["+me+"]");S.set(t,z);const G=new WeakMap;G.set(lm,S),Ik(E,Nk(se,V,n,r,i,a,l,c,n==="comma"&&w&&Pn(R)?null:f,h,m,p,_,y,v,w,k,G))}return E}function B5(t=Pt){if(typeof t.allowEmptyArrays<"u"&&typeof t.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof t.encodeDotInKeys<"u"&&typeof t.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(t.encoder!==null&&typeof t.encoder<"u"&&typeof t.encoder!="function")throw new TypeError("Encoder has to be a function.");const e=t.charset||Pt.charset;if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let n=Ak;if(typeof t.format<"u"){if(!bg(i1,t.format))throw new TypeError("Unknown format option provided.");n=t.format}const r=i1[n];let i=Pt.filter;(typeof t.filter=="function"||Pn(t.filter))&&(i=t.filter);let a;if(t.arrayFormat&&t.arrayFormat in Ok?a=t.arrayFormat:"indices"in t?a=t.indices?"indices":"repeat":a=Pt.arrayFormat,"commaRoundTrip"in t&&typeof t.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const l=typeof t.allowDots>"u"?t.encodeDotInKeys?!0:Pt.allowDots:!!t.allowDots;return{addQueryPrefix:typeof t.addQueryPrefix=="boolean"?t.addQueryPrefix:Pt.addQueryPrefix,allowDots:l,allowEmptyArrays:typeof t.allowEmptyArrays=="boolean"?!!t.allowEmptyArrays:Pt.allowEmptyArrays,arrayFormat:a,charset:e,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:Pt.charsetSentinel,commaRoundTrip:!!t.commaRoundTrip,delimiter:typeof t.delimiter>"u"?Pt.delimiter:t.delimiter,encode:typeof t.encode=="boolean"?t.encode:Pt.encode,encodeDotInKeys:typeof t.encodeDotInKeys=="boolean"?t.encodeDotInKeys:Pt.encodeDotInKeys,encoder:typeof t.encoder=="function"?t.encoder:Pt.encoder,encodeValuesOnly:typeof t.encodeValuesOnly=="boolean"?t.encodeValuesOnly:Pt.encodeValuesOnly,filter:i,format:n,formatter:r,serializeDate:typeof t.serializeDate=="function"?t.serializeDate:Pt.serializeDate,skipNulls:typeof t.skipNulls=="boolean"?t.skipNulls:Pt.skipNulls,sort:typeof t.sort=="function"?t.sort:null,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:Pt.strictNullHandling}}function U5(t,e={}){let n=t;const r=B5(e);let i,a;typeof r.filter=="function"?(a=r.filter,n=a("",n)):Pn(r.filter)&&(a=r.filter,i=a);const l=[];if(typeof n!="object"||n===null)return"";const c=Ok[r.arrayFormat],f=c==="comma"&&r.commaRoundTrip;i||(i=Object.keys(n)),r.sort&&i.sort(r.sort);const h=new WeakMap;for(let _=0;_<i.length;++_){const y=i[_];r.skipNulls&&n[y]===null||Ik(l,Nk(n[y],y,c,f,r.allowEmptyArrays,r.strictNullHandling,r.skipNulls,r.encodeDotInKeys,r.encode?r.encoder:null,r.filter,r.sort,r.allowDots,r.serializeDate,r.format,r.formatter,r.encodeValuesOnly,r.charset,h))}const m=l.join(r.delimiter);let p=r.addQueryPrefix===!0?"?":"";return r.charsetSentinel&&(r.charset==="iso-8859-1"?p+="utf8=%26%2310003%3B&":p+="utf8=%E2%9C%93&"),m.length>0?p+m:""}function $5(t){let e=0;for(const i of t)e+=i.length;const n=new Uint8Array(e);let r=0;for(const i of t)n.set(i,r),r+=i.length;return n}let o1;function ky(t){let e;return(o1??(e=new globalThis.TextEncoder,o1=e.encode.bind(e)))(t)}let l1;function u1(t){let e;return(l1??(e=new globalThis.TextDecoder,l1=e.decode.bind(e)))(t)}var Jn,Yn;class nh{constructor(){Jn.set(this,void 0),Yn.set(this,void 0),Ne(this,Jn,new Uint8Array),Ne(this,Yn,null)}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?ky(e):e;Ne(this,Jn,$5([W(this,Jn,"f"),n]));const r=[];let i;for(;(i=q5(W(this,Jn,"f"),W(this,Yn,"f")))!=null;){if(i.carriage&&W(this,Yn,"f")==null){Ne(this,Yn,i.index);continue}if(W(this,Yn,"f")!=null&&(i.index!==W(this,Yn,"f")+1||i.carriage)){r.push(u1(W(this,Jn,"f").subarray(0,W(this,Yn,"f")-1))),Ne(this,Jn,W(this,Jn,"f").subarray(W(this,Yn,"f"))),Ne(this,Yn,null);continue}const a=W(this,Yn,"f")!==null?i.preceding-1:i.preceding,l=u1(W(this,Jn,"f").subarray(0,a));r.push(l),Ne(this,Jn,W(this,Jn,"f").subarray(i.index)),Ne(this,Yn,null)}return r}flush(){return W(this,Jn,"f").length?this.decode(`
`):[]}}Jn=new WeakMap,Yn=new WeakMap;nh.NEWLINE_CHARS=new Set([`
`,"\r"]);nh.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function q5(t,e){for(let i=e??0;i<t.length;i++){if(t[i]===10)return{preceding:i,index:i+1,carriage:!1};if(t[i]===13)return{preceding:i,index:i+1,carriage:!0}}return null}function F5(t){for(let r=0;r<t.length-1;r++){if(t[r]===10&&t[r+1]===10||t[r]===13&&t[r+1]===13)return r+2;if(t[r]===13&&t[r+1]===10&&r+3<t.length&&t[r+2]===13&&t[r+3]===10)return r+4}return-1}const Tf={off:0,error:200,warn:300,info:400,debug:500},c1=(t,e,n)=>{if(t){if(E5(Tf,t))return t;sn(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(Tf))}`)}};function ul(){}function Cc(t,e,n){return!e||Tf[t]>Tf[n]?ul:e[t].bind(e)}const V5={error:ul,warn:ul,info:ul,debug:ul};let f1=new WeakMap;function sn(t){const e=t.logger,n=t.logLevel??"off";if(!e)return V5;const r=f1.get(e);if(r&&r[0]===n)return r[1];const i={error:Cc("error",e,n),warn:Cc("warn",e,n),info:Cc("info",e,n),debug:Cc("debug",e,n)};return f1.set(e,[n,i]),i}const Ss=t=>(t.options&&(t.options={...t.options},delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);var Yo;class Pr{constructor(e,n,r){this.iterator=e,Yo.set(this,void 0),this.controller=n,Ne(this,Yo,r)}static fromSSEResponse(e,n,r){let i=!1;const a=r?sn(r):console;async function*l(){if(i)throw new Te("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let c=!1;try{for await(const f of H5(e,n))if(!c){if(f.data.startsWith("[DONE]")){c=!0;continue}if(f.event===null||!f.event.startsWith("thread.")){let h;try{h=JSON.parse(f.data)}catch(m){throw a.error("Could not parse message into JSON:",f.data),a.error("From chunk:",f.raw),m}if(h&&h.error)throw new on(void 0,h.error,void 0,e.headers);yield h}else{let h;try{h=JSON.parse(f.data)}catch(m){throw console.error("Could not parse message into JSON:",f.data),console.error("From chunk:",f.raw),m}if(f.event=="error")throw new on(void 0,h.error,h.message,void 0);yield{event:f.event,data:h}}}c=!0}catch(f){if(yg(f))return;throw f}finally{c||n.abort()}}return new Pr(l,n,r)}static fromReadableStream(e,n,r){let i=!1;async function*a(){const c=new nh,f=Tk(e);for await(const h of f)for(const m of c.decode(h))yield m;for(const h of c.flush())yield h}async function*l(){if(i)throw new Te("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let c=!1;try{for await(const f of a())c||f&&(yield JSON.parse(f));c=!0}catch(f){if(yg(f))return;throw f}finally{c||n.abort()}}return new Pr(l,n,r)}[(Yo=new WeakMap,Symbol.asyncIterator)](){return this.iterator()}tee(){const e=[],n=[],r=this.iterator(),i=a=>({next:()=>{if(a.length===0){const l=r.next();e.push(l),n.push(l)}return a.shift()}});return[new Pr(()=>i(e),this.controller,W(this,Yo,"f")),new Pr(()=>i(n),this.controller,W(this,Yo,"f"))]}toReadableStream(){const e=this;let n;return kk({async start(){n=e[Symbol.asyncIterator]()},async pull(r){try{const{value:i,done:a}=await n.next();if(a)return r.close();const l=ky(JSON.stringify(i)+`
`);r.enqueue(l)}catch(i){r.error(i)}},async cancel(){await n.return?.()}})}}async function*H5(t,e){if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Te("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Te("Attempted to iterate over a response with no body");const n=new K5,r=new nh,i=Tk(t.body);for await(const a of G5(i))for(const l of r.decode(a)){const c=n.decode(l);c&&(yield c)}for(const a of r.flush()){const l=n.decode(a);l&&(yield l)}}async function*G5(t){let e=new Uint8Array;for await(const n of t){if(n==null)continue;const r=n instanceof ArrayBuffer?new Uint8Array(n):typeof n=="string"?ky(n):n;let i=new Uint8Array(e.length+r.length);i.set(e),i.set(r,e.length),e=i;let a;for(;(a=F5(e))!==-1;)yield e.slice(0,a),e=e.slice(a)}e.length>0&&(yield e)}class K5{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const a={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],a}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,r,i]=Z5(e,":");return i.startsWith(" ")&&(i=i.substring(1)),n==="event"?this.event=i:n==="data"&&this.data.push(i),null}}function Z5(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}async function Dk(t,e){const{response:n,requestLogID:r,retryOfRequestLogID:i,startTime:a}=e,l=await(async()=>{if(e.options.stream)return sn(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):Pr.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const f=n.headers.get("content-type")?.split(";")[0]?.trim();if(f?.includes("application/json")||f?.endsWith("+json")){const p=await n.json();return Mk(p,n)}return await n.text()})();return sn(t).debug(`[${r}] response parsed`,Ss({retryOfRequestLogID:i,url:n.url,status:n.status,body:l,durationMs:Date.now()-a})),l}function Mk(t,e){return!t||typeof t!="object"||Array.isArray(t)?t:Object.defineProperty(t,"_request_id",{value:e.headers.get("x-request-id"),enumerable:!1})}var cl;class rh extends Promise{constructor(e,n,r=Dk){super(i=>{i(null)}),this.responsePromise=n,this.parseResponse=r,cl.set(this,void 0),Ne(this,cl,e)}_thenUnwrap(e){return new rh(W(this,cl,"f"),this.responsePromise,async(n,r)=>Mk(e(await this.parseResponse(n,r),r),r.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n,request_id:n.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(W(this,cl,"f"),e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}cl=new WeakMap;var Tc;class Cy{constructor(e,n,r,i){Tc.set(this,void 0),Ne(this,Tc,e),this.options=i,this.response=n,this.body=r}hasNextPage(){return this.getPaginatedItems().length?this.nextPageRequestOptions()!=null:!1}async getNextPage(){const e=this.nextPageRequestOptions();if(!e)throw new Te("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");return await W(this,Tc,"f").requestAPIList(this.constructor,e)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(Tc=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const n of e.getPaginatedItems())yield n}}class Q5 extends rh{constructor(e,n,r){super(e,n,async(i,a)=>new r(i,a.response,await Dk(i,a),a.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const n of e)yield n}}class ih extends Cy{constructor(e,n,r,i){super(e,n,r,i),this.data=r.data||[],this.object=r.object}getPaginatedItems(){return this.data??[]}nextPageRequestOptions(){return null}}class Nt extends Cy{constructor(e,n,r,i){super(e,n,r,i),this.data=r.data||[],this.has_more=r.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){const e=this.getPaginatedItems(),n=e[e.length-1]?.id;return n?{...this.options,query:{...Ek(this.options.query),after:n}}:null}}class Af extends Cy{constructor(e,n,r,i){super(e,n,r,i),this.data=r.data||[],this.has_more=r.has_more||!1,this.last_id=r.last_id||""}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){const e=this.last_id;return e?{...this.options,query:{...Ek(this.options.query),after:e}}:null}}const Lk=()=>{if(typeof File>"u"){const{process:t}=globalThis,e=typeof t?.versions?.node=="string"&&parseInt(t.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(e?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Sl(t,e,n){return Lk(),new File(t,e??"unknown_file",n)}function Gc(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const Ty=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function",h1=async(t,e)=>vg(t.body)?{...t,body:await zk(t.body,e)}:t,Is=async(t,e)=>({...t,body:await zk(t.body,e)}),d1=new WeakMap;function J5(t){const e=typeof t=="function"?t:t.fetch,n=d1.get(e);if(n)return n;const r=(async()=>{try{const i="Response"in e?e.Response:(await e("data:,")).constructor,a=new FormData;return a.toString()!==await new i(a).text()}catch{return!0}})();return d1.set(e,r),r}const zk=async(t,e)=>{if(!await J5(e))throw new TypeError("The provided fetch function does not support file uploads with the current global FormData class.");const n=new FormData;return await Promise.all(Object.entries(t||{}).map(([r,i])=>wg(n,r,i))),n},Pk=t=>t instanceof Blob&&"name"in t,Y5=t=>typeof t=="object"&&t!==null&&(t instanceof Response||Ty(t)||Pk(t)),vg=t=>{if(Y5(t))return!0;if(Array.isArray(t))return t.some(vg);if(t&&typeof t=="object"){for(const e in t)if(vg(t[e]))return!0}return!1},wg=async(t,e,n)=>{if(n!==void 0){if(n==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")t.append(e,String(n));else if(n instanceof Response)t.append(e,Sl([await n.blob()],Gc(n)));else if(Ty(n))t.append(e,Sl([await new Response(Ck(n)).blob()],Gc(n)));else if(Pk(n))t.append(e,n,Gc(n));else if(Array.isArray(n))await Promise.all(n.map(r=>wg(t,e+"[]",r)));else if(typeof n=="object")await Promise.all(Object.entries(n).map(([r,i])=>wg(t,`${e}[${r}]`,i)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${n} instead`)}},jk=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",X5=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&jk(t),W5=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function e6(t,e,n){if(Lk(),t=await t,X5(t))return t instanceof File?t:Sl([await t.arrayBuffer()],t.name);if(W5(t)){const i=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),Sl(await xg(i),e,n)}const r=await xg(t);if(e||(e=Gc(t)),!n?.type){const i=r.find(a=>typeof a=="object"&&"type"in a&&a.type);typeof i=="string"&&(n={...n,type:i})}return Sl(r,e,n)}async function xg(t){let e=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)e.push(t);else if(jk(t))e.push(t instanceof Blob?t:await t.arrayBuffer());else if(Ty(t))for await(const n of t)e.push(...await xg(n));else{const n=t?.constructor?.name;throw new Error(`Unexpected data type: ${typeof t}${n?`; constructor: ${n}`:""}${t6(t)}`)}return e}function t6(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}class ke{constructor(e){this._client=e}}function Bk(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const p1=Object.freeze(Object.create(null)),n6=(t=Bk)=>function(n,...r){if(n.length===1)return n[0];let i=!1;const a=[],l=n.reduce((m,p,_)=>{/[?#]/.test(p)&&(i=!0);const y=r[_];let v=(i?encodeURIComponent:t)(""+y);return _!==r.length&&(y==null||typeof y=="object"&&y.toString===Object.getPrototypeOf(Object.getPrototypeOf(y.hasOwnProperty??p1)??p1)?.toString)&&(v=y+"",a.push({start:m.length+p.length,length:v.length,error:`Value of type ${Object.prototype.toString.call(y).slice(8,-1)} is not a valid path parameter`})),m+p+(_===r.length?"":v)},""),c=l.split(/[?#]/,1)[0],f=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let h;for(;(h=f.exec(c))!==null;)a.push({start:h.index,length:h[0].length,error:`Value "${h[0]}" can't be safely passed as a path parameter`});if(a.sort((m,p)=>m.start-p.start),a.length>0){let m=0;const p=a.reduce((_,y)=>{const v=" ".repeat(y.start-m),w="^".repeat(y.length);return m=y.start+y.length,_+v+w},"");throw new Te(`Path parameters result in path with invalid segments:
${a.map(_=>_.error).join(`
`)}
${l}
${p}`)}return l},he=n6(Bk);let Uk=class extends ke{list(e,n={},r){return this._client.getAPIList(he`/chat/completions/${e}/messages`,Nt,{query:n,...r})}};function Rf(t){return t!==void 0&&"function"in t&&t.function!==void 0}function Ay(t){return t?.$brand==="auto-parseable-response-format"}function Xl(t){return t?.$brand==="auto-parseable-tool"}function r6(t,e){return!e||!$k(e)?{...t,choices:t.choices.map(n=>(qk(n.message.tool_calls),{...n,message:{...n.message,parsed:null,...n.message.tool_calls?{tool_calls:n.message.tool_calls}:void 0}}))}:Ry(t,e)}function Ry(t,e){const n=t.choices.map(r=>{if(r.finish_reason==="length")throw new xk;if(r.finish_reason==="content_filter")throw new Sk;return qk(r.message.tool_calls),{...r,message:{...r.message,...r.message.tool_calls?{tool_calls:r.message.tool_calls?.map(i=>s6(e,i))??void 0}:void 0,parsed:r.message.content&&!r.message.refusal?i6(e,r.message.content):null}}});return{...t,choices:n}}function i6(t,e){return t.response_format?.type!=="json_schema"?null:t.response_format?.type==="json_schema"?"$parseRaw"in t.response_format?t.response_format.$parseRaw(e):JSON.parse(e):null}function s6(t,e){const n=t.tools?.find(r=>Rf(r)&&r.function?.name===e.function.name);return{...e,function:{...e.function,parsed_arguments:Xl(n)?n.$parseRaw(e.function.arguments):n?.function.strict?JSON.parse(e.function.arguments):null}}}function a6(t,e){if(!t||!("tools"in t)||!t.tools)return!1;const n=t.tools?.find(r=>Rf(r)&&r.function?.name===e.function.name);return Rf(n)&&(Xl(n)||n?.function.strict||!1)}function $k(t){return Ay(t.response_format)?!0:t.tools?.some(e=>Xl(e)||e.type==="function"&&e.function.strict===!0)??!1}function qk(t){for(const e of t||[])if(e.type!=="function")throw new Te(`Currently only \`function\` tool calls are supported; Received \`${e.type}\``)}function o6(t){for(const e of t??[]){if(e.type!=="function")throw new Te(`Currently only \`function\` tool types support auto-parsing; Received \`${e.type}\``);if(e.function.strict!==!0)throw new Te(`The \`${e.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}const Of=t=>t?.role==="assistant",Fk=t=>t?.role==="tool";var Sg,Kc,Zc,fl,hl,Qc,dl,li,pl,If,Nf,Ra,Vk;class Oy{constructor(){Sg.add(this),this.controller=new AbortController,Kc.set(this,void 0),Zc.set(this,()=>{}),fl.set(this,()=>{}),hl.set(this,void 0),Qc.set(this,()=>{}),dl.set(this,()=>{}),li.set(this,{}),pl.set(this,!1),If.set(this,!1),Nf.set(this,!1),Ra.set(this,!1),Ne(this,Kc,new Promise((e,n)=>{Ne(this,Zc,e,"f"),Ne(this,fl,n,"f")})),Ne(this,hl,new Promise((e,n)=>{Ne(this,Qc,e,"f"),Ne(this,dl,n,"f")})),W(this,Kc,"f").catch(()=>{}),W(this,hl,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},W(this,Sg,"m",Vk).bind(this))},0)}_connected(){this.ended||(W(this,Zc,"f").call(this),this._emit("connect"))}get ended(){return W(this,pl,"f")}get errored(){return W(this,If,"f")}get aborted(){return W(this,Nf,"f")}abort(){this.controller.abort()}on(e,n){return(W(this,li,"f")[e]||(W(this,li,"f")[e]=[])).push({listener:n}),this}off(e,n){const r=W(this,li,"f")[e];if(!r)return this;const i=r.findIndex(a=>a.listener===n);return i>=0&&r.splice(i,1),this}once(e,n){return(W(this,li,"f")[e]||(W(this,li,"f")[e]=[])).push({listener:n,once:!0}),this}emitted(e){return new Promise((n,r)=>{Ne(this,Ra,!0),e!=="error"&&this.once("error",r),this.once(e,n)})}async done(){Ne(this,Ra,!0),await W(this,hl,"f")}_emit(e,...n){if(W(this,pl,"f"))return;e==="end"&&(Ne(this,pl,!0),W(this,Qc,"f").call(this));const r=W(this,li,"f")[e];if(r&&(W(this,li,"f")[e]=r.filter(i=>!i.once),r.forEach(({listener:i})=>i(...n))),e==="abort"){const i=n[0];!W(this,Ra,"f")&&!r?.length&&Promise.reject(i),W(this,fl,"f").call(this,i),W(this,dl,"f").call(this,i),this._emit("end");return}if(e==="error"){const i=n[0];!W(this,Ra,"f")&&!r?.length&&Promise.reject(i),W(this,fl,"f").call(this,i),W(this,dl,"f").call(this,i),this._emit("end")}}_emitFinal(){}}Kc=new WeakMap,Zc=new WeakMap,fl=new WeakMap,hl=new WeakMap,Qc=new WeakMap,dl=new WeakMap,li=new WeakMap,pl=new WeakMap,If=new WeakMap,Nf=new WeakMap,Ra=new WeakMap,Sg=new WeakSet,Vk=function(e){if(Ne(this,If,!0),e instanceof Error&&e.name==="AbortError"&&(e=new yr),e instanceof yr)return Ne(this,Nf,!0),this._emit("abort",e);if(e instanceof Te)return this._emit("error",e);if(e instanceof Error){const n=new Te(e.message);return n.cause=e,this._emit("error",n)}return this._emit("error",new Te(String(e)))};function l6(t){return typeof t.parse=="function"}var wn,Eg,Df,kg,Cg,Tg,Hk,Gk;const u6=10;class Kk extends Oy{constructor(){super(...arguments),wn.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){this._chatCompletions.push(e),this._emit("chatCompletion",e);const n=e.choices[0]?.message;return n&&this._addMessage(n),e}_addMessage(e,n=!0){if("content"in e||(e.content=null),this.messages.push(e),n){if(this._emit("message",e),Fk(e)&&e.content)this._emit("functionToolCallResult",e.content);else if(Of(e)&&e.tool_calls)for(const r of e.tool_calls)r.type==="function"&&this._emit("functionToolCall",r.function)}}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new Te("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),W(this,wn,"m",Eg).call(this)}async finalMessage(){return await this.done(),W(this,wn,"m",Df).call(this)}async finalFunctionToolCall(){return await this.done(),W(this,wn,"m",kg).call(this)}async finalFunctionToolCallResult(){return await this.done(),W(this,wn,"m",Cg).call(this)}async totalUsage(){return await this.done(),W(this,wn,"m",Tg).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const n=W(this,wn,"m",Df).call(this);n&&this._emit("finalMessage",n);const r=W(this,wn,"m",Eg).call(this);r&&this._emit("finalContent",r);const i=W(this,wn,"m",kg).call(this);i&&this._emit("finalFunctionToolCall",i);const a=W(this,wn,"m",Cg).call(this);a!=null&&this._emit("finalFunctionToolCallResult",a),this._chatCompletions.some(l=>l.usage)&&this._emit("totalUsage",W(this,wn,"m",Tg).call(this))}async _createChatCompletion(e,n,r){const i=r?.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),W(this,wn,"m",Hk).call(this,n);const a=await e.chat.completions.create({...n,stream:!1},{...r,signal:this.controller.signal});return this._connected(),this._addChatCompletion(Ry(a,n))}async _runChatCompletion(e,n,r){for(const i of n.messages)this._addMessage(i,!1);return await this._createChatCompletion(e,n,r)}async _runTools(e,n,r){const i="tool",{tool_choice:a="auto",stream:l,...c}=n,f=typeof a!="string"&&a.type==="function"&&a?.function?.name,{maxChatCompletions:h=u6}=r||{},m=n.tools.map(y=>{if(Xl(y)){if(!y.$callback)throw new Te("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:y.$callback,name:y.function.name,description:y.function.description||"",parameters:y.function.parameters,parse:y.$parseRaw,strict:!0}}}return y}),p={};for(const y of m)y.type==="function"&&(p[y.function.name||y.function.function.name]=y.function);const _="tools"in n?m.map(y=>y.type==="function"?{type:"function",function:{name:y.function.name||y.function.function.name,parameters:y.function.parameters,description:y.function.description,strict:y.function.strict}}:y):void 0;for(const y of n.messages)this._addMessage(y,!1);for(let y=0;y<h;++y){const w=(await this._createChatCompletion(e,{...c,tool_choice:a,tools:_,messages:[...this.messages]},r)).choices[0]?.message;if(!w)throw new Te("missing message in ChatCompletion response");if(!w.tool_calls?.length)return;for(const k of w.tool_calls){if(k.type!=="function")continue;const S=k.id,{name:R,arguments:T}=k.function,z=p[R];if(z){if(f&&f!==R){const $=`Invalid tool_call: ${JSON.stringify(R)}. ${JSON.stringify(f)} requested. Please try again`;this._addMessage({role:i,tool_call_id:S,content:$});continue}}else{const $=`Invalid tool_call: ${JSON.stringify(R)}. Available options are: ${Object.keys(p).map(F=>JSON.stringify(F)).join(", ")}. Please try again`;this._addMessage({role:i,tool_call_id:S,content:$});continue}let L;try{L=l6(z)?await z.parse(T):T}catch($){const F=$ instanceof Error?$.message:String($);this._addMessage({role:i,tool_call_id:S,content:F});continue}const E=await z.function(L,this),M=W(this,wn,"m",Gk).call(this,E);if(this._addMessage({role:i,tool_call_id:S,content:M}),f)return}}}}wn=new WeakSet,Eg=function(){return W(this,wn,"m",Df).call(this).content??null},Df=function(){let e=this.messages.length;for(;e-- >0;){const n=this.messages[e];if(Of(n))return{...n,content:n.content??null,refusal:n.refusal??null}}throw new Te("stream ended without producing a ChatCompletionMessage with role=assistant")},kg=function(){for(let e=this.messages.length-1;e>=0;e--){const n=this.messages[e];if(Of(n)&&n?.tool_calls?.length)return n.tool_calls.filter(r=>r.type==="function").at(-1)?.function}},Cg=function(){for(let e=this.messages.length-1;e>=0;e--){const n=this.messages[e];if(Fk(n)&&n.content!=null&&typeof n.content=="string"&&this.messages.some(r=>r.role==="assistant"&&r.tool_calls?.some(i=>i.type==="function"&&i.id===n.tool_call_id)))return n.content}},Tg=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:n}of this._chatCompletions)n&&(e.completion_tokens+=n.completion_tokens,e.prompt_tokens+=n.prompt_tokens,e.total_tokens+=n.total_tokens);return e},Hk=function(e){if(e.n!=null&&e.n>1)throw new Te("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},Gk=function(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)};class Iy extends Kk{static runTools(e,n,r){const i=new Iy,a={...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"runTools"}};return i._run(()=>i._runTools(e,n,a)),i}_addMessage(e,n=!0){super._addMessage(e,n),Of(e)&&e.content&&this._emit("content",e.content)}}const Zk=1,Qk=2,Jk=4,Yk=8,Xk=16,Wk=32,eC=64,tC=128,nC=256,rC=tC|nC,iC=Xk|Wk|rC|eC,sC=Zk|Qk|iC,aC=Jk|Yk,c6=sC|aC,Qt={STR:Zk,NUM:Qk,ARR:Jk,OBJ:Yk,NULL:Xk,BOOL:Wk,NAN:eC,INFINITY:tC,MINUS_INFINITY:nC,INF:rC,SPECIAL:iC,ATOM:sC,COLLECTION:aC,ALL:c6};class f6 extends Error{}class h6 extends Error{}function d6(t,e=Qt.ALL){if(typeof t!="string")throw new TypeError(`expecting str, got ${typeof t}`);if(!t.trim())throw new Error(`${t} is empty`);return p6(t.trim(),e)}const p6=(t,e)=>{const n=t.length;let r=0;const i=_=>{throw new f6(`${_} at position ${r}`)},a=_=>{throw new h6(`${_} at position ${r}`)},l=()=>(p(),r>=n&&i("Unexpected end of input"),t[r]==='"'?c():t[r]==="{"?f():t[r]==="["?h():t.substring(r,r+4)==="null"||Qt.NULL&e&&n-r<4&&"null".startsWith(t.substring(r))?(r+=4,null):t.substring(r,r+4)==="true"||Qt.BOOL&e&&n-r<4&&"true".startsWith(t.substring(r))?(r+=4,!0):t.substring(r,r+5)==="false"||Qt.BOOL&e&&n-r<5&&"false".startsWith(t.substring(r))?(r+=5,!1):t.substring(r,r+8)==="Infinity"||Qt.INFINITY&e&&n-r<8&&"Infinity".startsWith(t.substring(r))?(r+=8,1/0):t.substring(r,r+9)==="-Infinity"||Qt.MINUS_INFINITY&e&&1<n-r&&n-r<9&&"-Infinity".startsWith(t.substring(r))?(r+=9,-1/0):t.substring(r,r+3)==="NaN"||Qt.NAN&e&&n-r<3&&"NaN".startsWith(t.substring(r))?(r+=3,NaN):m()),c=()=>{const _=r;let y=!1;for(r++;r<n&&(t[r]!=='"'||y&&t[r-1]==="\\");)y=t[r]==="\\"?!y:!1,r++;if(t.charAt(r)=='"')try{return JSON.parse(t.substring(_,++r-Number(y)))}catch(v){a(String(v))}else if(Qt.STR&e)try{return JSON.parse(t.substring(_,r-Number(y))+'"')}catch{return JSON.parse(t.substring(_,t.lastIndexOf("\\"))+'"')}i("Unterminated string literal")},f=()=>{r++,p();const _={};try{for(;t[r]!=="}";){if(p(),r>=n&&Qt.OBJ&e)return _;const y=c();p(),r++;try{const v=l();Object.defineProperty(_,y,{value:v,writable:!0,enumerable:!0,configurable:!0})}catch(v){if(Qt.OBJ&e)return _;throw v}p(),t[r]===","&&r++}}catch{if(Qt.OBJ&e)return _;i("Expected '}' at end of object")}return r++,_},h=()=>{r++;const _=[];try{for(;t[r]!=="]";)_.push(l()),p(),t[r]===","&&r++}catch{if(Qt.ARR&e)return _;i("Expected ']' at end of array")}return r++,_},m=()=>{if(r===0){t==="-"&&Qt.NUM&e&&i("Not sure what '-' is");try{return JSON.parse(t)}catch(y){if(Qt.NUM&e)try{return t[t.length-1]==="."?JSON.parse(t.substring(0,t.lastIndexOf("."))):JSON.parse(t.substring(0,t.lastIndexOf("e")))}catch{}a(String(y))}}const _=r;for(t[r]==="-"&&r++;t[r]&&!",]}".includes(t[r]);)r++;r==n&&!(Qt.NUM&e)&&i("Unterminated number literal");try{return JSON.parse(t.substring(_,r))}catch{t.substring(_,r)==="-"&&Qt.NUM&e&&i("Not sure what '-' is");try{return JSON.parse(t.substring(_,t.lastIndexOf("e")))}catch(v){a(String(v))}}},p=()=>{for(;r<n&&` 
\r	`.includes(t[r]);)r++};return l()},m1=t=>d6(t,Qt.ALL^Qt.NUM);var zt,oi,Sa,Ui,um,Ac,cm,fm,hm,Rc,dm,g1;class Bl extends Kk{constructor(e){super(),zt.add(this),oi.set(this,void 0),Sa.set(this,void 0),Ui.set(this,void 0),Ne(this,oi,e),Ne(this,Sa,[])}get currentChatCompletionSnapshot(){return W(this,Ui,"f")}static fromReadableStream(e){const n=new Bl(null);return n._run(()=>n._fromReadableStream(e)),n}static createChatCompletion(e,n,r){const i=new Bl(n);return i._run(()=>i._runChatCompletion(e,{...n,stream:!0},{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),i}async _createChatCompletion(e,n,r){super._createChatCompletion;const i=r?.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),W(this,zt,"m",um).call(this);const a=await e.chat.completions.create({...n,stream:!0},{...r,signal:this.controller.signal});this._connected();for await(const l of a)W(this,zt,"m",cm).call(this,l);if(a.controller.signal?.aborted)throw new yr;return this._addChatCompletion(W(this,zt,"m",Rc).call(this))}async _fromReadableStream(e,n){const r=n?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),W(this,zt,"m",um).call(this),this._connected();const i=Pr.fromReadableStream(e,this.controller);let a;for await(const l of i)a&&a!==l.id&&this._addChatCompletion(W(this,zt,"m",Rc).call(this)),W(this,zt,"m",cm).call(this,l),a=l.id;if(i.controller.signal?.aborted)throw new yr;return this._addChatCompletion(W(this,zt,"m",Rc).call(this))}[(oi=new WeakMap,Sa=new WeakMap,Ui=new WeakMap,zt=new WeakSet,um=function(){this.ended||Ne(this,Ui,void 0)},Ac=function(n){let r=W(this,Sa,"f")[n.index];return r||(r={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},W(this,Sa,"f")[n.index]=r,r)},cm=function(n){if(this.ended)return;const r=W(this,zt,"m",g1).call(this,n);this._emit("chunk",n,r);for(const i of n.choices){const a=r.choices[i.index];i.delta.content!=null&&a.message?.role==="assistant"&&a.message?.content&&(this._emit("content",i.delta.content,a.message.content),this._emit("content.delta",{delta:i.delta.content,snapshot:a.message.content,parsed:a.message.parsed})),i.delta.refusal!=null&&a.message?.role==="assistant"&&a.message?.refusal&&this._emit("refusal.delta",{delta:i.delta.refusal,snapshot:a.message.refusal}),i.logprobs?.content!=null&&a.message?.role==="assistant"&&this._emit("logprobs.content.delta",{content:i.logprobs?.content,snapshot:a.logprobs?.content??[]}),i.logprobs?.refusal!=null&&a.message?.role==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:i.logprobs?.refusal,snapshot:a.logprobs?.refusal??[]});const l=W(this,zt,"m",Ac).call(this,a);a.finish_reason&&(W(this,zt,"m",hm).call(this,a),l.current_tool_call_index!=null&&W(this,zt,"m",fm).call(this,a,l.current_tool_call_index));for(const c of i.delta.tool_calls??[])l.current_tool_call_index!==c.index&&(W(this,zt,"m",hm).call(this,a),l.current_tool_call_index!=null&&W(this,zt,"m",fm).call(this,a,l.current_tool_call_index)),l.current_tool_call_index=c.index;for(const c of i.delta.tool_calls??[]){const f=a.message.tool_calls?.[c.index];f?.type&&(f?.type==="function"?this._emit("tool_calls.function.arguments.delta",{name:f.function?.name,index:c.index,arguments:f.function.arguments,parsed_arguments:f.function.parsed_arguments,arguments_delta:c.function?.arguments??""}):(f?.type,void 0))}}},fm=function(n,r){if(W(this,zt,"m",Ac).call(this,n).done_tool_calls.has(r))return;const a=n.message.tool_calls?.[r];if(!a)throw new Error("no tool call snapshot");if(!a.type)throw new Error("tool call snapshot missing `type`");if(a.type==="function"){const l=W(this,oi,"f")?.tools?.find(c=>Rf(c)&&c.function.name===a.function.name);this._emit("tool_calls.function.arguments.done",{name:a.function.name,index:r,arguments:a.function.arguments,parsed_arguments:Xl(l)?l.$parseRaw(a.function.arguments):l?.function.strict?JSON.parse(a.function.arguments):null})}else a.type},hm=function(n){const r=W(this,zt,"m",Ac).call(this,n);if(n.message.content&&!r.content_done){r.content_done=!0;const i=W(this,zt,"m",dm).call(this);this._emit("content.done",{content:n.message.content,parsed:i?i.$parseRaw(n.message.content):null})}n.message.refusal&&!r.refusal_done&&(r.refusal_done=!0,this._emit("refusal.done",{refusal:n.message.refusal})),n.logprobs?.content&&!r.logprobs_content_done&&(r.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:n.logprobs.content})),n.logprobs?.refusal&&!r.logprobs_refusal_done&&(r.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:n.logprobs.refusal}))},Rc=function(){if(this.ended)throw new Te("stream has ended, this shouldn't happen");const n=W(this,Ui,"f");if(!n)throw new Te("request ended without sending any chunks");return Ne(this,Ui,void 0),Ne(this,Sa,[]),m6(n,W(this,oi,"f"))},dm=function(){const n=W(this,oi,"f")?.response_format;return Ay(n)?n:null},g1=function(n){var r,i,a,l;let c=W(this,Ui,"f");const{choices:f,...h}=n;c?Object.assign(c,h):c=Ne(this,Ui,{...h,choices:[]});for(const{delta:m,finish_reason:p,index:_,logprobs:y=null,...v}of n.choices){let w=c.choices[_];if(w||(w=c.choices[_]={finish_reason:p,index:_,message:{},logprobs:y,...v}),y)if(!w.logprobs)w.logprobs=Object.assign({},y);else{const{content:E,refusal:M,...$}=y;Object.assign(w.logprobs,$),E&&((r=w.logprobs).content??(r.content=[]),w.logprobs.content.push(...E)),M&&((i=w.logprobs).refusal??(i.refusal=[]),w.logprobs.refusal.push(...M))}if(p&&(w.finish_reason=p,W(this,oi,"f")&&$k(W(this,oi,"f")))){if(p==="length")throw new xk;if(p==="content_filter")throw new Sk}if(Object.assign(w,v),!m)continue;const{content:k,refusal:S,function_call:R,role:T,tool_calls:z,...L}=m;if(Object.assign(w.message,L),S&&(w.message.refusal=(w.message.refusal||"")+S),T&&(w.message.role=T),R&&(w.message.function_call?(R.name&&(w.message.function_call.name=R.name),R.arguments&&((a=w.message.function_call).arguments??(a.arguments=""),w.message.function_call.arguments+=R.arguments)):w.message.function_call=R),k&&(w.message.content=(w.message.content||"")+k,!w.message.refusal&&W(this,zt,"m",dm).call(this)&&(w.message.parsed=m1(w.message.content))),z){w.message.tool_calls||(w.message.tool_calls=[]);for(const{index:E,id:M,type:$,function:F,...P}of z){const Z=(l=w.message.tool_calls)[E]??(l[E]={});Object.assign(Z,P),M&&(Z.id=M),$&&(Z.type=$),F&&(Z.function??(Z.function={name:F.name??"",arguments:""})),F?.name&&(Z.function.name=F.name),F?.arguments&&(Z.function.arguments+=F.arguments,a6(W(this,oi,"f"),Z)&&(Z.function.parsed_arguments=m1(Z.function.arguments)))}}}return c},Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("chunk",i=>{const a=n.shift();a?a.resolve(i):e.push(i)}),this.on("end",()=>{r=!0;for(const i of n)i.resolve(void 0);n.length=0}),this.on("abort",i=>{r=!0;for(const a of n)a.reject(i);n.length=0}),this.on("error",i=>{r=!0;for(const a of n)a.reject(i);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((a,l)=>n.push({resolve:a,reject:l})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new Pr(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function m6(t,e){const{id:n,choices:r,created:i,model:a,system_fingerprint:l,...c}=t,f={...c,id:n,choices:r.map(({message:h,finish_reason:m,index:p,logprobs:_,...y})=>{if(!m)throw new Te(`missing finish_reason for choice ${p}`);const{content:v=null,function_call:w,tool_calls:k,...S}=h,R=h.role;if(!R)throw new Te(`missing role for choice ${p}`);if(w){const{arguments:T,name:z}=w;if(T==null)throw new Te(`missing function_call.arguments for choice ${p}`);if(!z)throw new Te(`missing function_call.name for choice ${p}`);return{...y,message:{content:v,function_call:{arguments:T,name:z},role:R,refusal:h.refusal??null},finish_reason:m,index:p,logprobs:_}}return k?{...y,index:p,finish_reason:m,logprobs:_,message:{...S,role:R,content:v,refusal:h.refusal??null,tool_calls:k.map((T,z)=>{const{function:L,type:E,id:M,...$}=T,{arguments:F,name:P,...Z}=L||{};if(M==null)throw new Te(`missing choices[${p}].tool_calls[${z}].id
${Oc(t)}`);if(E==null)throw new Te(`missing choices[${p}].tool_calls[${z}].type
${Oc(t)}`);if(P==null)throw new Te(`missing choices[${p}].tool_calls[${z}].function.name
${Oc(t)}`);if(F==null)throw new Te(`missing choices[${p}].tool_calls[${z}].function.arguments
${Oc(t)}`);return{...$,id:M,type:E,function:{...Z,name:P,arguments:F}}})}}:{...y,message:{...S,content:v,role:R,refusal:h.refusal??null},finish_reason:m,index:p,logprobs:_}}),created:i,model:a,object:"chat.completion",...l?{system_fingerprint:l}:{}};return r6(f,e)}function Oc(t){return JSON.stringify(t)}class Mf extends Bl{static fromReadableStream(e){const n=new Mf(null);return n._run(()=>n._fromReadableStream(e)),n}static runTools(e,n,r){const i=new Mf(n),a={...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"runTools"}};return i._run(()=>i._runTools(e,n,a)),i}}let Ny=class extends ke{constructor(){super(...arguments),this.messages=new Uk(this._client)}create(e,n){return this._client.post("/chat/completions",{body:e,...n,stream:e.stream??!1})}retrieve(e,n){return this._client.get(he`/chat/completions/${e}`,n)}update(e,n,r){return this._client.post(he`/chat/completions/${e}`,{body:n,...r})}list(e={},n){return this._client.getAPIList("/chat/completions",Nt,{query:e,...n})}delete(e,n){return this._client.delete(he`/chat/completions/${e}`,n)}parse(e,n){return o6(e.tools),this._client.chat.completions.create(e,{...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"chat.completions.parse"}})._thenUnwrap(r=>Ry(r,e))}runTools(e,n){return e.stream?Mf.runTools(this._client,e,n):Iy.runTools(this._client,e,n)}stream(e,n){return Bl.createChatCompletion(this._client,e,n)}};Ny.Messages=Uk;class Dy extends ke{constructor(){super(...arguments),this.completions=new Ny(this._client)}}Dy.Completions=Ny;const oC=Symbol("brand.privateNullableHeaders");function*g6(t){if(!t)return;if(oC in t){const{values:r,nulls:i}=t;yield*r.entries();for(const a of i)yield[a,null];return}let e=!1,n;t instanceof Headers?n=t.entries():e1(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let r of n){const i=r[0];if(typeof i!="string")throw new TypeError("expected header name to be a string");const a=e1(r[1])?r[1]:[r[1]];let l=!1;for(const c of a)c!==void 0&&(e&&!l&&(l=!0,yield[i,null]),yield[i,c])}}const ve=t=>{const e=new Headers,n=new Set;for(const r of t){const i=new Set;for(const[a,l]of g6(r)){const c=a.toLowerCase();i.has(c)||(e.delete(a),i.add(c)),l===null?(e.delete(a),n.add(c)):(e.append(a,l),n.delete(c))}}return{[oC]:!0,values:e,nulls:n}};class lC extends ke{create(e,n){return this._client.post("/audio/speech",{body:e,...n,headers:ve([{Accept:"application/octet-stream"},n?.headers]),__binaryResponse:!0})}}class uC extends ke{create(e,n){return this._client.post("/audio/transcriptions",Is({body:e,...n,stream:e.stream??!1,__metadata:{model:e.model}},this._client))}}class cC extends ke{create(e,n){return this._client.post("/audio/translations",Is({body:e,...n,__metadata:{model:e.model}},this._client))}}class Wl extends ke{constructor(){super(...arguments),this.transcriptions=new uC(this._client),this.translations=new cC(this._client),this.speech=new lC(this._client)}}Wl.Transcriptions=uC;Wl.Translations=cC;Wl.Speech=lC;class fC extends ke{create(e,n){return this._client.post("/batches",{body:e,...n})}retrieve(e,n){return this._client.get(he`/batches/${e}`,n)}list(e={},n){return this._client.getAPIList("/batches",Nt,{query:e,...n})}cancel(e,n){return this._client.post(he`/batches/${e}/cancel`,n)}}class hC extends ke{create(e,n){return this._client.post("/assistants",{body:e,...n,headers:ve([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}retrieve(e,n){return this._client.get(he`/assistants/${e}`,{...n,headers:ve([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}update(e,n,r){return this._client.post(he`/assistants/${e}`,{body:n,...r,headers:ve([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(e={},n){return this._client.getAPIList("/assistants",Nt,{query:e,...n,headers:ve([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}delete(e,n){return this._client.delete(he`/assistants/${e}`,{...n,headers:ve([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}}let dC=class extends ke{create(e,n){return this._client.post("/realtime/sessions",{body:e,...n,headers:ve([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}};class pC extends ke{create(e,n){return this._client.post("/realtime/transcription_sessions",{body:e,...n,headers:ve([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}}let sh=class extends ke{constructor(){super(...arguments),this.sessions=new dC(this._client),this.transcriptionSessions=new pC(this._client)}};sh.Sessions=dC;sh.TranscriptionSessions=pC;class mC extends ke{create(e,n){return this._client.post("/chatkit/sessions",{body:e,...n,headers:ve([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}cancel(e,n){return this._client.post(he`/chatkit/sessions/${e}/cancel`,{...n,headers:ve([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}}let gC=class extends ke{retrieve(e,n){return this._client.get(he`/chatkit/threads/${e}`,{...n,headers:ve([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}list(e={},n){return this._client.getAPIList("/chatkit/threads",Af,{query:e,...n,headers:ve([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}delete(e,n){return this._client.delete(he`/chatkit/threads/${e}`,{...n,headers:ve([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}listItems(e,n={},r){return this._client.getAPIList(he`/chatkit/threads/${e}/items`,Af,{query:n,...r,headers:ve([{"OpenAI-Beta":"chatkit_beta=v1"},r?.headers])})}};class ah extends ke{constructor(){super(...arguments),this.sessions=new mC(this._client),this.threads=new gC(this._client)}}ah.Sessions=mC;ah.Threads=gC;class yC extends ke{create(e,n,r){return this._client.post(he`/threads/${e}/messages`,{body:n,...r,headers:ve([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}retrieve(e,n,r){const{thread_id:i}=n;return this._client.get(he`/threads/${i}/messages/${e}`,{...r,headers:ve([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}update(e,n,r){const{thread_id:i,...a}=n;return this._client.post(he`/threads/${i}/messages/${e}`,{body:a,...r,headers:ve([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(e,n={},r){return this._client.getAPIList(he`/threads/${e}/messages`,Nt,{query:n,...r,headers:ve([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}delete(e,n,r){const{thread_id:i}=n;return this._client.delete(he`/threads/${i}/messages/${e}`,{...r,headers:ve([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}}class _C extends ke{retrieve(e,n,r){const{thread_id:i,run_id:a,...l}=n;return this._client.get(he`/threads/${i}/runs/${a}/steps/${e}`,{query:l,...r,headers:ve([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(e,n,r){const{thread_id:i,...a}=n;return this._client.getAPIList(he`/threads/${i}/runs/${e}/steps`,Nt,{query:a,...r,headers:ve([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}}const y6=t=>{if(typeof Buffer<"u"){const e=Buffer.from(t,"base64");return Array.from(new Float32Array(e.buffer,e.byteOffset,e.length/Float32Array.BYTES_PER_ELEMENT))}else{const e=atob(t),n=e.length,r=new Uint8Array(n);for(let i=0;i<n;i++)r[i]=e.charCodeAt(i);return Array.from(new Float32Array(r.buffer))}};var _6={};const Ea=t=>{if(typeof globalThis.process<"u")return _6?.[t]?.trim()??void 0;if(typeof globalThis.Deno<"u")return globalThis.Deno.env?.get?.(t)?.trim()};var an,As,Ag,zr,Jc,Er,Rs,La,ks,Lf,Xn,Yc,Xc,El,ml,gl,y1,_1,b1,v1,w1,x1,S1;class kl extends Oy{constructor(){super(...arguments),an.add(this),Ag.set(this,[]),zr.set(this,{}),Jc.set(this,{}),Er.set(this,void 0),Rs.set(this,void 0),La.set(this,void 0),ks.set(this,void 0),Lf.set(this,void 0),Xn.set(this,void 0),Yc.set(this,void 0),Xc.set(this,void 0),El.set(this,void 0)}[(Ag=new WeakMap,zr=new WeakMap,Jc=new WeakMap,Er=new WeakMap,Rs=new WeakMap,La=new WeakMap,ks=new WeakMap,Lf=new WeakMap,Xn=new WeakMap,Yc=new WeakMap,Xc=new WeakMap,El=new WeakMap,an=new WeakSet,Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("event",i=>{const a=n.shift();a?a.resolve(i):e.push(i)}),this.on("end",()=>{r=!0;for(const i of n)i.resolve(void 0);n.length=0}),this.on("abort",i=>{r=!0;for(const a of n)a.reject(i);n.length=0}),this.on("error",i=>{r=!0;for(const a of n)a.reject(i);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((a,l)=>n.push({resolve:a,reject:l})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){const n=new As;return n._run(()=>n._fromReadableStream(e)),n}async _fromReadableStream(e,n){const r=n?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),this._connected();const i=Pr.fromReadableStream(e,this.controller);for await(const a of i)W(this,an,"m",ml).call(this,a);if(i.controller.signal?.aborted)throw new yr;return this._addRun(W(this,an,"m",gl).call(this))}toReadableStream(){return new Pr(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,n,r,i){const a=new As;return a._run(()=>a._runToolAssistantStream(e,n,r,{...i,headers:{...i?.headers,"X-Stainless-Helper-Method":"stream"}})),a}async _createToolAssistantStream(e,n,r,i){const a=i?.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort()));const l={...r,stream:!0},c=await e.submitToolOutputs(n,l,{...i,signal:this.controller.signal});this._connected();for await(const f of c)W(this,an,"m",ml).call(this,f);if(c.controller.signal?.aborted)throw new yr;return this._addRun(W(this,an,"m",gl).call(this))}static createThreadAssistantStream(e,n,r){const i=new As;return i._run(()=>i._threadAssistantStream(e,n,{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),i}static createAssistantStream(e,n,r,i){const a=new As;return a._run(()=>a._runAssistantStream(e,n,r,{...i,headers:{...i?.headers,"X-Stainless-Helper-Method":"stream"}})),a}currentEvent(){return W(this,Yc,"f")}currentRun(){return W(this,Xc,"f")}currentMessageSnapshot(){return W(this,Er,"f")}currentRunStepSnapshot(){return W(this,El,"f")}async finalRunSteps(){return await this.done(),Object.values(W(this,zr,"f"))}async finalMessages(){return await this.done(),Object.values(W(this,Jc,"f"))}async finalRun(){if(await this.done(),!W(this,Rs,"f"))throw Error("Final run was not received.");return W(this,Rs,"f")}async _createThreadAssistantStream(e,n,r){const i=r?.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort()));const a={...n,stream:!0},l=await e.createAndRun(a,{...r,signal:this.controller.signal});this._connected();for await(const c of l)W(this,an,"m",ml).call(this,c);if(l.controller.signal?.aborted)throw new yr;return this._addRun(W(this,an,"m",gl).call(this))}async _createAssistantStream(e,n,r,i){const a=i?.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort()));const l={...r,stream:!0},c=await e.create(n,l,{...i,signal:this.controller.signal});this._connected();for await(const f of c)W(this,an,"m",ml).call(this,f);if(c.controller.signal?.aborted)throw new yr;return this._addRun(W(this,an,"m",gl).call(this))}static accumulateDelta(e,n){for(const[r,i]of Object.entries(n)){if(!e.hasOwnProperty(r)){e[r]=i;continue}let a=e[r];if(a==null){e[r]=i;continue}if(r==="index"||r==="type"){e[r]=i;continue}if(typeof a=="string"&&typeof i=="string")a+=i;else if(typeof a=="number"&&typeof i=="number")a+=i;else if(am(a)&&am(i))a=this.accumulateDelta(a,i);else if(Array.isArray(a)&&Array.isArray(i)){if(a.every(l=>typeof l=="string"||typeof l=="number")){a.push(...i);continue}for(const l of i){if(!am(l))throw new Error(`Expected array delta entry to be an object but got: ${l}`);const c=l.index;if(c==null)throw console.error(l),new Error("Expected array delta entry to have an `index` property");if(typeof c!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${c}`);const f=a[c];f==null?a.push(l):a[c]=this.accumulateDelta(f,l)}continue}else throw Error(`Unhandled record type: ${r}, deltaValue: ${i}, accValue: ${a}`);e[r]=a}return e}_addRun(e){return e}async _threadAssistantStream(e,n,r){return await this._createThreadAssistantStream(n,e,r)}async _runAssistantStream(e,n,r,i){return await this._createAssistantStream(n,e,r,i)}async _runToolAssistantStream(e,n,r,i){return await this._createToolAssistantStream(n,e,r,i)}}As=kl,ml=function(e){if(!this.ended)switch(Ne(this,Yc,e),W(this,an,"m",b1).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":W(this,an,"m",S1).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":W(this,an,"m",_1).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":W(this,an,"m",y1).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},gl=function(){if(this.ended)throw new Te("stream has ended, this shouldn't happen");if(!W(this,Rs,"f"))throw Error("Final run has not been received");return W(this,Rs,"f")},y1=function(e){const[n,r]=W(this,an,"m",w1).call(this,e,W(this,Er,"f"));Ne(this,Er,n),W(this,Jc,"f")[n.id]=n;for(const i of r){const a=n.content[i.index];a?.type=="text"&&this._emit("textCreated",a.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,n),e.data.delta.content)for(const i of e.data.delta.content){if(i.type=="text"&&i.text){let a=i.text,l=n.content[i.index];if(l&&l.type=="text")this._emit("textDelta",a,l.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(i.index!=W(this,La,"f")){if(W(this,ks,"f"))switch(W(this,ks,"f").type){case"text":this._emit("textDone",W(this,ks,"f").text,W(this,Er,"f"));break;case"image_file":this._emit("imageFileDone",W(this,ks,"f").image_file,W(this,Er,"f"));break}Ne(this,La,i.index)}Ne(this,ks,n.content[i.index])}break;case"thread.message.completed":case"thread.message.incomplete":if(W(this,La,"f")!==void 0){const i=e.data.content[W(this,La,"f")];if(i)switch(i.type){case"image_file":this._emit("imageFileDone",i.image_file,W(this,Er,"f"));break;case"text":this._emit("textDone",i.text,W(this,Er,"f"));break}}W(this,Er,"f")&&this._emit("messageDone",e.data),Ne(this,Er,void 0)}},_1=function(e){const n=W(this,an,"m",v1).call(this,e);switch(Ne(this,El,n),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":const r=e.data.delta;if(r.step_details&&r.step_details.type=="tool_calls"&&r.step_details.tool_calls&&n.step_details.type=="tool_calls")for(const a of r.step_details.tool_calls)a.index==W(this,Lf,"f")?this._emit("toolCallDelta",a,n.step_details.tool_calls[a.index]):(W(this,Xn,"f")&&this._emit("toolCallDone",W(this,Xn,"f")),Ne(this,Lf,a.index),Ne(this,Xn,n.step_details.tool_calls[a.index]),W(this,Xn,"f")&&this._emit("toolCallCreated",W(this,Xn,"f")));this._emit("runStepDelta",e.data.delta,n);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":Ne(this,El,void 0),e.data.step_details.type=="tool_calls"&&W(this,Xn,"f")&&(this._emit("toolCallDone",W(this,Xn,"f")),Ne(this,Xn,void 0)),this._emit("runStepDone",e.data,n);break}},b1=function(e){W(this,Ag,"f").push(e),this._emit("event",e)},v1=function(e){switch(e.event){case"thread.run.step.created":return W(this,zr,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let n=W(this,zr,"f")[e.data.id];if(!n)throw Error("Received a RunStepDelta before creation of a snapshot");let r=e.data;if(r.delta){const i=As.accumulateDelta(n,r.delta);W(this,zr,"f")[e.data.id]=i}return W(this,zr,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":W(this,zr,"f")[e.data.id]=e.data;break}if(W(this,zr,"f")[e.data.id])return W(this,zr,"f")[e.data.id];throw new Error("No snapshot available")},w1=function(e,n){let r=[];switch(e.event){case"thread.message.created":return[e.data,r];case"thread.message.delta":if(!n)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let i=e.data;if(i.delta.content)for(const a of i.delta.content)if(a.index in n.content){let l=n.content[a.index];n.content[a.index]=W(this,an,"m",x1).call(this,a,l)}else n.content[a.index]=a,r.push(a);return[n,r];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(n)return[n,r];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},x1=function(e,n){return As.accumulateDelta(n,e)},S1=function(e){switch(Ne(this,Xc,e.data),e.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":case"thread.run.incomplete":Ne(this,Rs,e.data),W(this,Xn,"f")&&(this._emit("toolCallDone",W(this,Xn,"f")),Ne(this,Xn,void 0));break}};let My=class extends ke{constructor(){super(...arguments),this.steps=new _C(this._client)}create(e,n,r){const{include:i,...a}=n;return this._client.post(he`/threads/${e}/runs`,{query:{include:i},body:a,...r,headers:ve([{"OpenAI-Beta":"assistants=v2"},r?.headers]),stream:n.stream??!1})}retrieve(e,n,r){const{thread_id:i}=n;return this._client.get(he`/threads/${i}/runs/${e}`,{...r,headers:ve([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}update(e,n,r){const{thread_id:i,...a}=n;return this._client.post(he`/threads/${i}/runs/${e}`,{body:a,...r,headers:ve([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(e,n={},r){return this._client.getAPIList(he`/threads/${e}/runs`,Nt,{query:n,...r,headers:ve([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}cancel(e,n,r){const{thread_id:i}=n;return this._client.post(he`/threads/${i}/runs/${e}/cancel`,{...r,headers:ve([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}async createAndPoll(e,n,r){const i=await this.create(e,n,r);return await this.poll(i.id,{thread_id:e},r)}createAndStream(e,n,r){return kl.createAssistantStream(e,this._client.beta.threads.runs,n,r)}async poll(e,n,r){const i=ve([r?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":r?.pollIntervalMs?.toString()??void 0}]);for(;;){const{data:a,response:l}=await this.retrieve(e,n,{...r,headers:{...r?.headers,...i}}).withResponse();switch(a.status){case"queued":case"in_progress":case"cancelling":let c=5e3;if(r?.pollIntervalMs)c=r.pollIntervalMs;else{const f=l.headers.get("openai-poll-after-ms");if(f){const h=parseInt(f);isNaN(h)||(c=h)}}await Yl(c);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return a}}}stream(e,n,r){return kl.createAssistantStream(e,this._client.beta.threads.runs,n,r)}submitToolOutputs(e,n,r){const{thread_id:i,...a}=n;return this._client.post(he`/threads/${i}/runs/${e}/submit_tool_outputs`,{body:a,...r,headers:ve([{"OpenAI-Beta":"assistants=v2"},r?.headers]),stream:n.stream??!1})}async submitToolOutputsAndPoll(e,n,r){const i=await this.submitToolOutputs(e,n,r);return await this.poll(i.id,n,r)}submitToolOutputsStream(e,n,r){return kl.createToolAssistantStream(e,this._client.beta.threads.runs,n,r)}};My.Steps=_C;class oh extends ke{constructor(){super(...arguments),this.runs=new My(this._client),this.messages=new yC(this._client)}create(e={},n){return this._client.post("/threads",{body:e,...n,headers:ve([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}retrieve(e,n){return this._client.get(he`/threads/${e}`,{...n,headers:ve([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}update(e,n,r){return this._client.post(he`/threads/${e}`,{body:n,...r,headers:ve([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}delete(e,n){return this._client.delete(he`/threads/${e}`,{...n,headers:ve([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}createAndRun(e,n){return this._client.post("/threads/runs",{body:e,...n,headers:ve([{"OpenAI-Beta":"assistants=v2"},n?.headers]),stream:e.stream??!1})}async createAndRunPoll(e,n){const r=await this.createAndRun(e,n);return await this.runs.poll(r.id,{thread_id:r.thread_id},n)}createAndRunStream(e,n){return kl.createThreadAssistantStream(e,this._client.beta.threads,n)}}oh.Runs=My;oh.Messages=yC;class Ya extends ke{constructor(){super(...arguments),this.realtime=new sh(this._client),this.chatkit=new ah(this._client),this.assistants=new hC(this._client),this.threads=new oh(this._client)}}Ya.Realtime=sh;Ya.ChatKit=ah;Ya.Assistants=hC;Ya.Threads=oh;class bC extends ke{create(e,n){return this._client.post("/completions",{body:e,...n,stream:e.stream??!1})}}class vC extends ke{retrieve(e,n,r){const{container_id:i}=n;return this._client.get(he`/containers/${i}/files/${e}/content`,{...r,headers:ve([{Accept:"application/binary"},r?.headers]),__binaryResponse:!0})}}let Ly=class extends ke{constructor(){super(...arguments),this.content=new vC(this._client)}create(e,n,r){return this._client.post(he`/containers/${e}/files`,Is({body:n,...r},this._client))}retrieve(e,n,r){const{container_id:i}=n;return this._client.get(he`/containers/${i}/files/${e}`,r)}list(e,n={},r){return this._client.getAPIList(he`/containers/${e}/files`,Nt,{query:n,...r})}delete(e,n,r){const{container_id:i}=n;return this._client.delete(he`/containers/${i}/files/${e}`,{...r,headers:ve([{Accept:"*/*"},r?.headers])})}};Ly.Content=vC;class zy extends ke{constructor(){super(...arguments),this.files=new Ly(this._client)}create(e,n){return this._client.post("/containers",{body:e,...n})}retrieve(e,n){return this._client.get(he`/containers/${e}`,n)}list(e={},n){return this._client.getAPIList("/containers",Nt,{query:e,...n})}delete(e,n){return this._client.delete(he`/containers/${e}`,{...n,headers:ve([{Accept:"*/*"},n?.headers])})}}zy.Files=Ly;class wC extends ke{create(e,n,r){const{include:i,...a}=n;return this._client.post(he`/conversations/${e}/items`,{query:{include:i},body:a,...r})}retrieve(e,n,r){const{conversation_id:i,...a}=n;return this._client.get(he`/conversations/${i}/items/${e}`,{query:a,...r})}list(e,n={},r){return this._client.getAPIList(he`/conversations/${e}/items`,Af,{query:n,...r})}delete(e,n,r){const{conversation_id:i}=n;return this._client.delete(he`/conversations/${i}/items/${e}`,r)}}class Py extends ke{constructor(){super(...arguments),this.items=new wC(this._client)}create(e={},n){return this._client.post("/conversations",{body:e,...n})}retrieve(e,n){return this._client.get(he`/conversations/${e}`,n)}update(e,n,r){return this._client.post(he`/conversations/${e}`,{body:n,...r})}delete(e,n){return this._client.delete(he`/conversations/${e}`,n)}}Py.Items=wC;class xC extends ke{create(e,n){const r=!!e.encoding_format;let i=r?e.encoding_format:"base64";r&&sn(this._client).debug("embeddings/user defined encoding_format:",e.encoding_format);const a=this._client.post("/embeddings",{body:{...e,encoding_format:i},...n});return r?a:(sn(this._client).debug("embeddings/decoding base64 embeddings from base64"),a._thenUnwrap(l=>(l&&l.data&&l.data.forEach(c=>{const f=c.embedding;c.embedding=y6(f)}),l)))}}class SC extends ke{retrieve(e,n,r){const{eval_id:i,run_id:a}=n;return this._client.get(he`/evals/${i}/runs/${a}/output_items/${e}`,r)}list(e,n,r){const{eval_id:i,...a}=n;return this._client.getAPIList(he`/evals/${i}/runs/${e}/output_items`,Nt,{query:a,...r})}}class jy extends ke{constructor(){super(...arguments),this.outputItems=new SC(this._client)}create(e,n,r){return this._client.post(he`/evals/${e}/runs`,{body:n,...r})}retrieve(e,n,r){const{eval_id:i}=n;return this._client.get(he`/evals/${i}/runs/${e}`,r)}list(e,n={},r){return this._client.getAPIList(he`/evals/${e}/runs`,Nt,{query:n,...r})}delete(e,n,r){const{eval_id:i}=n;return this._client.delete(he`/evals/${i}/runs/${e}`,r)}cancel(e,n,r){const{eval_id:i}=n;return this._client.post(he`/evals/${i}/runs/${e}`,r)}}jy.OutputItems=SC;class By extends ke{constructor(){super(...arguments),this.runs=new jy(this._client)}create(e,n){return this._client.post("/evals",{body:e,...n})}retrieve(e,n){return this._client.get(he`/evals/${e}`,n)}update(e,n,r){return this._client.post(he`/evals/${e}`,{body:n,...r})}list(e={},n){return this._client.getAPIList("/evals",Nt,{query:e,...n})}delete(e,n){return this._client.delete(he`/evals/${e}`,n)}}By.Runs=jy;let EC=class extends ke{create(e,n){return this._client.post("/files",Is({body:e,...n},this._client))}retrieve(e,n){return this._client.get(he`/files/${e}`,n)}list(e={},n){return this._client.getAPIList("/files",Nt,{query:e,...n})}delete(e,n){return this._client.delete(he`/files/${e}`,n)}content(e,n){return this._client.get(he`/files/${e}/content`,{...n,headers:ve([{Accept:"application/binary"},n?.headers]),__binaryResponse:!0})}async waitForProcessing(e,{pollInterval:n=5e3,maxWait:r=1800*1e3}={}){const i=new Set(["processed","error","deleted"]),a=Date.now();let l=await this.retrieve(e);for(;!l.status||!i.has(l.status);)if(await Yl(n),l=await this.retrieve(e),Date.now()-a>r)throw new Ey({message:`Giving up on waiting for file ${e} to finish processing after ${r} milliseconds.`});return l}};class kC extends ke{}let CC=class extends ke{run(e,n){return this._client.post("/fine_tuning/alpha/graders/run",{body:e,...n})}validate(e,n){return this._client.post("/fine_tuning/alpha/graders/validate",{body:e,...n})}};class Uy extends ke{constructor(){super(...arguments),this.graders=new CC(this._client)}}Uy.Graders=CC;class TC extends ke{create(e,n,r){return this._client.getAPIList(he`/fine_tuning/checkpoints/${e}/permissions`,ih,{body:n,method:"post",...r})}retrieve(e,n={},r){return this._client.get(he`/fine_tuning/checkpoints/${e}/permissions`,{query:n,...r})}delete(e,n,r){const{fine_tuned_model_checkpoint:i}=n;return this._client.delete(he`/fine_tuning/checkpoints/${i}/permissions/${e}`,r)}}let $y=class extends ke{constructor(){super(...arguments),this.permissions=new TC(this._client)}};$y.Permissions=TC;class AC extends ke{list(e,n={},r){return this._client.getAPIList(he`/fine_tuning/jobs/${e}/checkpoints`,Nt,{query:n,...r})}}class qy extends ke{constructor(){super(...arguments),this.checkpoints=new AC(this._client)}create(e,n){return this._client.post("/fine_tuning/jobs",{body:e,...n})}retrieve(e,n){return this._client.get(he`/fine_tuning/jobs/${e}`,n)}list(e={},n){return this._client.getAPIList("/fine_tuning/jobs",Nt,{query:e,...n})}cancel(e,n){return this._client.post(he`/fine_tuning/jobs/${e}/cancel`,n)}listEvents(e,n={},r){return this._client.getAPIList(he`/fine_tuning/jobs/${e}/events`,Nt,{query:n,...r})}pause(e,n){return this._client.post(he`/fine_tuning/jobs/${e}/pause`,n)}resume(e,n){return this._client.post(he`/fine_tuning/jobs/${e}/resume`,n)}}qy.Checkpoints=AC;class Xa extends ke{constructor(){super(...arguments),this.methods=new kC(this._client),this.jobs=new qy(this._client),this.checkpoints=new $y(this._client),this.alpha=new Uy(this._client)}}Xa.Methods=kC;Xa.Jobs=qy;Xa.Checkpoints=$y;Xa.Alpha=Uy;class RC extends ke{}class Fy extends ke{constructor(){super(...arguments),this.graderModels=new RC(this._client)}}Fy.GraderModels=RC;class OC extends ke{createVariation(e,n){return this._client.post("/images/variations",Is({body:e,...n},this._client))}edit(e,n){return this._client.post("/images/edits",Is({body:e,...n,stream:e.stream??!1},this._client))}generate(e,n){return this._client.post("/images/generations",{body:e,...n,stream:e.stream??!1})}}class IC extends ke{retrieve(e,n){return this._client.get(he`/models/${e}`,n)}list(e){return this._client.getAPIList("/models",ih,e)}delete(e,n){return this._client.delete(he`/models/${e}`,n)}}class NC extends ke{create(e,n){return this._client.post("/moderations",{body:e,...n})}}class DC extends ke{accept(e,n,r){return this._client.post(he`/realtime/calls/${e}/accept`,{body:n,...r,headers:ve([{Accept:"*/*"},r?.headers])})}hangup(e,n){return this._client.post(he`/realtime/calls/${e}/hangup`,{...n,headers:ve([{Accept:"*/*"},n?.headers])})}refer(e,n,r){return this._client.post(he`/realtime/calls/${e}/refer`,{body:n,...r,headers:ve([{Accept:"*/*"},r?.headers])})}reject(e,n={},r){return this._client.post(he`/realtime/calls/${e}/reject`,{body:n,...r,headers:ve([{Accept:"*/*"},r?.headers])})}}class MC extends ke{create(e,n){return this._client.post("/realtime/client_secrets",{body:e,...n})}}class lh extends ke{constructor(){super(...arguments),this.clientSecrets=new MC(this._client),this.calls=new DC(this._client)}}lh.ClientSecrets=MC;lh.Calls=DC;function b6(t,e){return!e||!w6(e)?{...t,output_parsed:null,output:t.output.map(n=>n.type==="function_call"?{...n,parsed_arguments:null}:n.type==="message"?{...n,content:n.content.map(r=>({...r,parsed:null}))}:n)}:LC(t,e)}function LC(t,e){const n=t.output.map(i=>{if(i.type==="function_call")return{...i,parsed_arguments:E6(e,i)};if(i.type==="message"){const a=i.content.map(l=>l.type==="output_text"?{...l,parsed:v6(e,l.text)}:l);return{...i,content:a}}return i}),r=Object.assign({},t,{output:n});return Object.getOwnPropertyDescriptor(t,"output_text")||Rg(r),Object.defineProperty(r,"output_parsed",{enumerable:!0,get(){for(const i of r.output)if(i.type==="message"){for(const a of i.content)if(a.type==="output_text"&&a.parsed!==null)return a.parsed}return null}}),r}function v6(t,e){return t.text?.format?.type!=="json_schema"?null:"$parseRaw"in t.text?.format?(t.text?.format).$parseRaw(e):JSON.parse(e)}function w6(t){return!!Ay(t.text?.format)}function x6(t){return t?.$brand==="auto-parseable-tool"}function S6(t,e){return t.find(n=>n.type==="function"&&n.name===e)}function E6(t,e){const n=S6(t.tools??[],e.name);return{...e,...e,parsed_arguments:x6(n)?n.$parseRaw(e.arguments):n?.strict?JSON.parse(e.arguments):null}}function Rg(t){const e=[];for(const n of t.output)if(n.type==="message")for(const r of n.content)r.type==="output_text"&&e.push(r.text);t.output_text=e.join("")}var ka,Ic,$i,Nc,E1,k1,C1,T1;class Vy extends Oy{constructor(e){super(),ka.add(this),Ic.set(this,void 0),$i.set(this,void 0),Nc.set(this,void 0),Ne(this,Ic,e)}static createResponse(e,n,r){const i=new Vy(n);return i._run(()=>i._createOrRetrieveResponse(e,n,{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),i}async _createOrRetrieveResponse(e,n,r){const i=r?.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),W(this,ka,"m",E1).call(this);let a,l=null;"response_id"in n?(a=await e.responses.retrieve(n.response_id,{stream:!0},{...r,signal:this.controller.signal,stream:!0}),l=n.starting_after??null):a=await e.responses.create({...n,stream:!0},{...r,signal:this.controller.signal}),this._connected();for await(const c of a)W(this,ka,"m",k1).call(this,c,l);if(a.controller.signal?.aborted)throw new yr;return W(this,ka,"m",C1).call(this)}[(Ic=new WeakMap,$i=new WeakMap,Nc=new WeakMap,ka=new WeakSet,E1=function(){this.ended||Ne(this,$i,void 0)},k1=function(n,r){if(this.ended)return;const i=(l,c)=>{(r==null||c.sequence_number>r)&&this._emit(l,c)},a=W(this,ka,"m",T1).call(this,n);switch(i("event",n),n.type){case"response.output_text.delta":{const l=a.output[n.output_index];if(!l)throw new Te(`missing output at index ${n.output_index}`);if(l.type==="message"){const c=l.content[n.content_index];if(!c)throw new Te(`missing content at index ${n.content_index}`);if(c.type!=="output_text")throw new Te(`expected content to be 'output_text', got ${c.type}`);i("response.output_text.delta",{...n,snapshot:c.text})}break}case"response.function_call_arguments.delta":{const l=a.output[n.output_index];if(!l)throw new Te(`missing output at index ${n.output_index}`);l.type==="function_call"&&i("response.function_call_arguments.delta",{...n,snapshot:l.arguments});break}default:i(n.type,n);break}},C1=function(){if(this.ended)throw new Te("stream has ended, this shouldn't happen");const n=W(this,$i,"f");if(!n)throw new Te("request ended without sending any events");Ne(this,$i,void 0);const r=k6(n,W(this,Ic,"f"));return Ne(this,Nc,r),r},T1=function(n){let r=W(this,$i,"f");if(!r){if(n.type!=="response.created")throw new Te(`When snapshot hasn't been set yet, expected 'response.created' event, got ${n.type}`);return r=Ne(this,$i,n.response),r}switch(n.type){case"response.output_item.added":{r.output.push(n.item);break}case"response.content_part.added":{const i=r.output[n.output_index];if(!i)throw new Te(`missing output at index ${n.output_index}`);const a=i.type,l=n.part;a==="message"&&l.type!=="reasoning_text"?i.content.push(l):a==="reasoning"&&l.type==="reasoning_text"&&(i.content||(i.content=[]),i.content.push(l));break}case"response.output_text.delta":{const i=r.output[n.output_index];if(!i)throw new Te(`missing output at index ${n.output_index}`);if(i.type==="message"){const a=i.content[n.content_index];if(!a)throw new Te(`missing content at index ${n.content_index}`);if(a.type!=="output_text")throw new Te(`expected content to be 'output_text', got ${a.type}`);a.text+=n.delta}break}case"response.function_call_arguments.delta":{const i=r.output[n.output_index];if(!i)throw new Te(`missing output at index ${n.output_index}`);i.type==="function_call"&&(i.arguments+=n.delta);break}case"response.reasoning_text.delta":{const i=r.output[n.output_index];if(!i)throw new Te(`missing output at index ${n.output_index}`);if(i.type==="reasoning"){const a=i.content?.[n.content_index];if(!a)throw new Te(`missing content at index ${n.content_index}`);if(a.type!=="reasoning_text")throw new Te(`expected content to be 'reasoning_text', got ${a.type}`);a.text+=n.delta}break}case"response.completed":{Ne(this,$i,n.response);break}}return r},Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("event",i=>{const a=n.shift();a?a.resolve(i):e.push(i)}),this.on("end",()=>{r=!0;for(const i of n)i.resolve(void 0);n.length=0}),this.on("abort",i=>{r=!0;for(const a of n)a.reject(i);n.length=0}),this.on("error",i=>{r=!0;for(const a of n)a.reject(i);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((a,l)=>n.push({resolve:a,reject:l})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();const e=W(this,Nc,"f");if(!e)throw new Te("stream ended without producing a ChatCompletion");return e}}function k6(t,e){return b6(t,e)}class zC extends ke{list(e,n={},r){return this._client.getAPIList(he`/responses/${e}/input_items`,Nt,{query:n,...r})}}class PC extends ke{count(e={},n){return this._client.post("/responses/input_tokens",{body:e,...n})}}class uh extends ke{constructor(){super(...arguments),this.inputItems=new zC(this._client),this.inputTokens=new PC(this._client)}create(e,n){return this._client.post("/responses",{body:e,...n,stream:e.stream??!1})._thenUnwrap(r=>("object"in r&&r.object==="response"&&Rg(r),r))}retrieve(e,n={},r){return this._client.get(he`/responses/${e}`,{query:n,...r,stream:n?.stream??!1})._thenUnwrap(i=>("object"in i&&i.object==="response"&&Rg(i),i))}delete(e,n){return this._client.delete(he`/responses/${e}`,{...n,headers:ve([{Accept:"*/*"},n?.headers])})}parse(e,n){return this._client.responses.create(e,n)._thenUnwrap(r=>LC(r,e))}stream(e,n){return Vy.createResponse(this._client,e,n)}cancel(e,n){return this._client.post(he`/responses/${e}/cancel`,n)}compact(e,n){return this._client.post("/responses/compact",{body:e,...n})}}uh.InputItems=zC;uh.InputTokens=PC;class jC extends ke{create(e,n,r){return this._client.post(he`/uploads/${e}/parts`,Is({body:n,...r},this._client))}}class Hy extends ke{constructor(){super(...arguments),this.parts=new jC(this._client)}create(e,n){return this._client.post("/uploads",{body:e,...n})}cancel(e,n){return this._client.post(he`/uploads/${e}/cancel`,n)}complete(e,n,r){return this._client.post(he`/uploads/${e}/complete`,{body:n,...r})}}Hy.Parts=jC;const C6=async t=>{const e=await Promise.allSettled(t),n=e.filter(i=>i.status==="rejected");if(n.length){for(const i of n)console.error(i.reason);throw new Error(`${n.length} promise(s) failed - see the above errors`)}const r=[];for(const i of e)i.status==="fulfilled"&&r.push(i.value);return r};class BC extends ke{create(e,n,r){return this._client.post(he`/vector_stores/${e}/file_batches`,{body:n,...r,headers:ve([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}retrieve(e,n,r){const{vector_store_id:i}=n;return this._client.get(he`/vector_stores/${i}/file_batches/${e}`,{...r,headers:ve([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}cancel(e,n,r){const{vector_store_id:i}=n;return this._client.post(he`/vector_stores/${i}/file_batches/${e}/cancel`,{...r,headers:ve([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}async createAndPoll(e,n,r){const i=await this.create(e,n);return await this.poll(e,i.id,r)}listFiles(e,n,r){const{vector_store_id:i,...a}=n;return this._client.getAPIList(he`/vector_stores/${i}/file_batches/${e}/files`,Nt,{query:a,...r,headers:ve([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}async poll(e,n,r){const i=ve([r?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":r?.pollIntervalMs?.toString()??void 0}]);for(;;){const{data:a,response:l}=await this.retrieve(n,{vector_store_id:e},{...r,headers:i}).withResponse();switch(a.status){case"in_progress":let c=5e3;if(r?.pollIntervalMs)c=r.pollIntervalMs;else{const f=l.headers.get("openai-poll-after-ms");if(f){const h=parseInt(f);isNaN(h)||(c=h)}}await Yl(c);break;case"failed":case"cancelled":case"completed":return a}}}async uploadAndPoll(e,{files:n,fileIds:r=[]},i){if(n==null||n.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const a=i?.maxConcurrency??5,l=Math.min(a,n.length),c=this._client,f=n.values(),h=[...r];async function m(_){for(let y of _){const v=await c.files.create({file:y,purpose:"assistants"},i);h.push(v.id)}}const p=Array(l).fill(f).map(m);return await C6(p),await this.createAndPoll(e,{file_ids:h})}}class UC extends ke{create(e,n,r){return this._client.post(he`/vector_stores/${e}/files`,{body:n,...r,headers:ve([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}retrieve(e,n,r){const{vector_store_id:i}=n;return this._client.get(he`/vector_stores/${i}/files/${e}`,{...r,headers:ve([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}update(e,n,r){const{vector_store_id:i,...a}=n;return this._client.post(he`/vector_stores/${i}/files/${e}`,{body:a,...r,headers:ve([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(e,n={},r){return this._client.getAPIList(he`/vector_stores/${e}/files`,Nt,{query:n,...r,headers:ve([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}delete(e,n,r){const{vector_store_id:i}=n;return this._client.delete(he`/vector_stores/${i}/files/${e}`,{...r,headers:ve([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}async createAndPoll(e,n,r){const i=await this.create(e,n,r);return await this.poll(e,i.id,r)}async poll(e,n,r){const i=ve([r?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":r?.pollIntervalMs?.toString()??void 0}]);for(;;){const a=await this.retrieve(n,{vector_store_id:e},{...r,headers:i}).withResponse(),l=a.data;switch(l.status){case"in_progress":let c=5e3;if(r?.pollIntervalMs)c=r.pollIntervalMs;else{const f=a.response.headers.get("openai-poll-after-ms");if(f){const h=parseInt(f);isNaN(h)||(c=h)}}await Yl(c);break;case"failed":case"completed":return l}}}async upload(e,n,r){const i=await this._client.files.create({file:n,purpose:"assistants"},r);return this.create(e,{file_id:i.id},r)}async uploadAndPoll(e,n,r){const i=await this.upload(e,n,r);return await this.poll(e,i.id,r)}content(e,n,r){const{vector_store_id:i}=n;return this._client.getAPIList(he`/vector_stores/${i}/files/${e}/content`,ih,{...r,headers:ve([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}}class ch extends ke{constructor(){super(...arguments),this.files=new UC(this._client),this.fileBatches=new BC(this._client)}create(e,n){return this._client.post("/vector_stores",{body:e,...n,headers:ve([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}retrieve(e,n){return this._client.get(he`/vector_stores/${e}`,{...n,headers:ve([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}update(e,n,r){return this._client.post(he`/vector_stores/${e}`,{body:n,...r,headers:ve([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(e={},n){return this._client.getAPIList("/vector_stores",Nt,{query:e,...n,headers:ve([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}delete(e,n){return this._client.delete(he`/vector_stores/${e}`,{...n,headers:ve([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}search(e,n,r){return this._client.getAPIList(he`/vector_stores/${e}/search`,ih,{body:n,method:"post",...r,headers:ve([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}}ch.Files=UC;ch.FileBatches=BC;class $C extends ke{create(e,n){return this._client.post("/videos",h1({body:e,...n},this._client))}retrieve(e,n){return this._client.get(he`/videos/${e}`,n)}list(e={},n){return this._client.getAPIList("/videos",Af,{query:e,...n})}delete(e,n){return this._client.delete(he`/videos/${e}`,n)}downloadContent(e,n={},r){return this._client.get(he`/videos/${e}/content`,{query:n,...r,headers:ve([{Accept:"application/binary"},r?.headers]),__binaryResponse:!0})}remix(e,n,r){return this._client.post(he`/videos/${e}/remix`,h1({body:n,...r},this._client))}}var Oa,qC,Wc;class FC extends ke{constructor(){super(...arguments),Oa.add(this)}async unwrap(e,n,r=this._client.webhookSecret,i=300){return await this.verifySignature(e,n,r,i),JSON.parse(e)}async verifySignature(e,n,r=this._client.webhookSecret,i=300){if(typeof crypto>"u"||typeof crypto.subtle.importKey!="function"||typeof crypto.subtle.verify!="function")throw new Error("Webhook signature verification is only supported when the `crypto` global is defined");W(this,Oa,"m",qC).call(this,r);const a=ve([n]).values,l=W(this,Oa,"m",Wc).call(this,a,"webhook-signature"),c=W(this,Oa,"m",Wc).call(this,a,"webhook-timestamp"),f=W(this,Oa,"m",Wc).call(this,a,"webhook-id"),h=parseInt(c,10);if(isNaN(h))throw new ll("Invalid webhook timestamp format");const m=Math.floor(Date.now()/1e3);if(m-h>i)throw new ll("Webhook timestamp is too old");if(h>m+i)throw new ll("Webhook timestamp is too new");const p=l.split(" ").map(w=>w.startsWith("v1,")?w.substring(3):w),_=r.startsWith("whsec_")?Buffer.from(r.replace("whsec_",""),"base64"):Buffer.from(r,"utf-8"),y=f?`${f}.${c}.${e}`:`${c}.${e}`,v=await crypto.subtle.importKey("raw",_,{name:"HMAC",hash:"SHA-256"},!1,["verify"]);for(const w of p)try{const k=Buffer.from(w,"base64");if(await crypto.subtle.verify("HMAC",v,k,new TextEncoder().encode(y)))return}catch{continue}throw new ll("The given webhook signature does not match the expected signature")}}Oa=new WeakSet,qC=function(e){if(typeof e!="string"||e.length===0)throw new Error("The webhook secret must either be set using the env var, OPENAI_WEBHOOK_SECRET, on the client class, OpenAI({ webhookSecret: '123' }), or passed to this function")},Wc=function(e,n){if(!e)throw new Error("Headers are required");const r=e.get(n);if(r==null)throw new Error(`Missing required header: ${n}`);return r};var Og,Gy,ef,VC;class je{constructor({baseURL:e=Ea("OPENAI_BASE_URL"),apiKey:n=Ea("OPENAI_API_KEY"),organization:r=Ea("OPENAI_ORG_ID")??null,project:i=Ea("OPENAI_PROJECT_ID")??null,webhookSecret:a=Ea("OPENAI_WEBHOOK_SECRET")??null,...l}={}){if(Og.add(this),ef.set(this,void 0),this.completions=new bC(this),this.chat=new Dy(this),this.embeddings=new xC(this),this.files=new EC(this),this.images=new OC(this),this.audio=new Wl(this),this.moderations=new NC(this),this.models=new IC(this),this.fineTuning=new Xa(this),this.graders=new Fy(this),this.vectorStores=new ch(this),this.webhooks=new FC(this),this.beta=new Ya(this),this.batches=new fC(this),this.uploads=new Hy(this),this.responses=new uh(this),this.realtime=new lh(this),this.conversations=new Py(this),this.evals=new By(this),this.containers=new zy(this),this.videos=new $C(this),n===void 0)throw new Te("Missing credentials. Please pass an `apiKey`, or set the `OPENAI_API_KEY` environment variable.");const c={apiKey:n,organization:r,project:i,webhookSecret:a,...l,baseURL:e||"https://api.openai.com/v1"};if(!c.dangerouslyAllowBrowser&&T5())throw new Te(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);this.baseURL=c.baseURL,this.timeout=c.timeout??Gy.DEFAULT_TIMEOUT,this.logger=c.logger??console;const f="warn";this.logLevel=f,this.logLevel=c1(c.logLevel,"ClientOptions.logLevel",this)??c1(Ea("OPENAI_LOG"),"process.env['OPENAI_LOG']",this)??f,this.fetchOptions=c.fetchOptions,this.maxRetries=c.maxRetries??2,this.fetch=c.fetch??N5(),Ne(this,ef,M5),this._options=c,this.apiKey=typeof n=="string"?n:"Missing Key",this.organization=r,this.project=i,this.webhookSecret=a}withOptions(e){return new this.constructor({...this._options,baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,organization:this.organization,project:this.project,webhookSecret:this.webhookSecret,...e})}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){}async authHeaders(e){return ve([{Authorization:`Bearer ${this.apiKey}`}])}stringifyQuery(e){return U5(e,{arrayFormat:"brackets"})}getUserAgent(){return`${this.constructor.name}/JS ${Aa}`}defaultIdempotencyKey(){return`stainless-node-retry-${dk()}`}makeStatusError(e,n,r,i){return on.generate(e,n,r,i)}async _callApiKey(){const e=this._options.apiKey;if(typeof e!="function")return!1;let n;try{n=await e()}catch(r){throw r instanceof Te?r:new Te(`Failed to get token from 'apiKey' function: ${r.message}`,{cause:r})}if(typeof n!="string"||!n)throw new Te(`Expected 'apiKey' function argument to return a string but it returned ${n}`);return this.apiKey=n,!0}buildURL(e,n,r){const i=!W(this,Og,"m",VC).call(this)&&r||this.baseURL,a=x5(e)?new URL(e):new URL(i+(i.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),l=this.defaultQuery();return S5(l)||(n={...l,...n}),typeof n=="object"&&n&&!Array.isArray(n)&&(a.search=this.stringifyQuery(n)),a.toString()}async prepareOptions(e){await this._callApiKey()}async prepareRequest(e,{url:n,options:r}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,r){return this.request(Promise.resolve(r).then(i=>({method:e,path:n,...i})))}request(e,n=null){return new rh(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,r){const i=await e,a=i.maxRetries??this.maxRetries;n==null&&(n=a),await this.prepareOptions(i);const{req:l,url:c,timeout:f}=await this.buildRequest(i,{retryCount:a-n});await this.prepareRequest(l,{url:c,options:i});const h="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),m=r===void 0?"":`, retryOf: ${r}`,p=Date.now();if(sn(this).debug(`[${h}] sending request`,Ss({retryOfRequestLogID:r,method:i.method,url:c,options:i,headers:l.headers})),i.signal?.aborted)throw new yr;const _=new AbortController,y=await this.fetchWithTimeout(c,l,f,_).catch(_g),v=Date.now();if(y instanceof globalThis.Error){const S=`retrying, ${n} attempts remaining`;if(i.signal?.aborted)throw new yr;const R=yg(y)||/timed? ?out/i.test(String(y)+("cause"in y?String(y.cause):""));if(n)return sn(this).info(`[${h}] connection ${R?"timed out":"failed"} - ${S}`),sn(this).debug(`[${h}] connection ${R?"timed out":"failed"} (${S})`,Ss({retryOfRequestLogID:r,url:c,durationMs:v-p,message:y.message})),this.retryRequest(i,n,r??h);throw sn(this).info(`[${h}] connection ${R?"timed out":"failed"} - error; no more retries left`),sn(this).debug(`[${h}] connection ${R?"timed out":"failed"} (error; no more retries left)`,Ss({retryOfRequestLogID:r,url:c,durationMs:v-p,message:y.message})),R?new Ey:new th({cause:y})}const w=[...y.headers.entries()].filter(([S])=>S==="x-request-id").map(([S,R])=>", "+S+": "+JSON.stringify(R)).join(""),k=`[${h}${m}${w}] ${l.method} ${c} ${y.ok?"succeeded":"failed"} with status ${y.status} in ${v-p}ms`;if(!y.ok){const S=await this.shouldRetry(y);if(n&&S){const M=`retrying, ${n} attempts remaining`;return await D5(y.body),sn(this).info(`${k} - ${M}`),sn(this).debug(`[${h}] response error (${M})`,Ss({retryOfRequestLogID:r,url:y.url,status:y.status,headers:y.headers,durationMs:v-p})),this.retryRequest(i,n,r??h,y.headers)}const R=S?"error; no more retries left":"error; not retryable";sn(this).info(`${k} - ${R}`);const T=await y.text().catch(M=>_g(M).message),z=C5(T),L=z?void 0:T;throw sn(this).debug(`[${h}] response error (${R})`,Ss({retryOfRequestLogID:r,url:y.url,status:y.status,headers:y.headers,message:L,durationMs:Date.now()-p})),this.makeStatusError(y.status,z,L,y.headers)}return sn(this).info(k),sn(this).debug(`[${h}] response start`,Ss({retryOfRequestLogID:r,url:y.url,status:y.status,headers:y.headers,durationMs:v-p})),{response:y,options:i,controller:_,requestLogID:h,retryOfRequestLogID:r,startTime:p}}getAPIList(e,n,r){return this.requestAPIList(n,{method:"get",path:e,...r})}requestAPIList(e,n){const r=this.makeRequest(n,null,void 0);return new Q5(this,r,e)}async fetchWithTimeout(e,n,r,i){const{signal:a,method:l,...c}=n||{};a&&a.addEventListener("abort",()=>i.abort());const f=setTimeout(()=>i.abort(),r),h=globalThis.ReadableStream&&c.body instanceof globalThis.ReadableStream||typeof c.body=="object"&&c.body!==null&&Symbol.asyncIterator in c.body,m={signal:i.signal,...h?{duplex:"half"}:{},method:"GET",...c};l&&(m.method=l.toUpperCase());try{return await this.fetch.call(void 0,e,m)}finally{clearTimeout(f)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,r,i){let a;const l=i?.get("retry-after-ms");if(l){const f=parseFloat(l);Number.isNaN(f)||(a=f)}const c=i?.get("retry-after");if(c&&!a){const f=parseFloat(c);Number.isNaN(f)?a=Date.parse(c)-Date.now():a=f*1e3}if(!(a&&0<=a&&a<60*1e3)){const f=e.maxRetries??this.maxRetries;a=this.calculateDefaultRetryTimeoutMillis(n,f)}return await Yl(a),this.makeRequest(e,n-1,r)}calculateDefaultRetryTimeoutMillis(e,n){const a=n-e,l=Math.min(.5*Math.pow(2,a),8),c=1-Math.random()*.25;return l*c*1e3}async buildRequest(e,{retryCount:n=0}={}){const r={...e},{method:i,path:a,query:l,defaultBaseURL:c}=r,f=this.buildURL(a,l,c);"timeout"in r&&k5("timeout",r.timeout),r.timeout=r.timeout??this.timeout;const{bodyHeaders:h,body:m}=this.buildBody({options:r}),p=await this.buildHeaders({options:e,method:i,bodyHeaders:h,retryCount:n});return{req:{method:i,headers:p,...r.signal&&{signal:r.signal},...globalThis.ReadableStream&&m instanceof globalThis.ReadableStream&&{duplex:"half"},...m&&{body:m},...this.fetchOptions??{},...r.fetchOptions??{}},url:f,timeout:r.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:r,retryCount:i}){let a={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),a[this.idempotencyHeader]=e.idempotencyKey);const l=ve([a,{Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(i),...e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{},...I5(),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project},await this.authHeaders(e),this._options.defaultHeaders,r,e.headers]);return this.validateHeaders(l),l.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const r=ve([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&r.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:Ck(e)}:W(this,ef,"f").call(this,{body:e,headers:r})}}Gy=je,ef=new WeakMap,Og=new WeakSet,VC=function(){return this.baseURL!=="https://api.openai.com/v1"};je.OpenAI=Gy;je.DEFAULT_TIMEOUT=6e5;je.OpenAIError=Te;je.APIError=on;je.APIConnectionError=th;je.APIConnectionTimeoutError=Ey;je.APIUserAbortError=yr;je.NotFoundError=yk;je.ConflictError=_k;je.RateLimitError=vk;je.BadRequestError=pk;je.AuthenticationError=mk;je.InternalServerError=wk;je.PermissionDeniedError=gk;je.UnprocessableEntityError=bk;je.InvalidWebhookSignatureError=ll;je.toFile=e6;je.Completions=bC;je.Chat=Dy;je.Embeddings=xC;je.Files=EC;je.Images=OC;je.Audio=Wl;je.Moderations=NC;je.Models=IC;je.FineTuning=Xa;je.Graders=Fy;je.VectorStores=ch;je.Webhooks=FC;je.Beta=Ya;je.Batches=fC;je.Uploads=Hy;je.Responses=uh;je.Realtime=lh;je.Conversations=Py;je.Evals=By;je.Containers=zy;je.Videos=$C;class T6 extends je{constructor(e){super({...e,dangerouslyAllowBrowser:!0})}}function A6(t){return new T6({apiKey:t.apiKey,organization:t.organization,baseURL:t.baseURL})}function R6(t){return`${t}-${Date.now()}-${Math.random().toString(36).substring(7)}`}class O6 extends r5{constructor(e,n){super({},n),this.kind="text",this.name="openai",this.client=A6(e)}async*chatStream(e){const n=new Map,r=this.mapTextOptionsToOpenAI(e);try{const i=await this.client.responses.create({...r,stream:!0},{headers:e.request?.headers,signal:e.request?.signal});yield*this.processOpenAIStreamChunks(i,n,e,()=>R6(this.name))}catch(i){const a=i;throw console.error(">>> chatStream: Fatal error during response creation <<<"),console.error(">>> Error message:",a.message),console.error(">>> Error stack:",a.stack),console.error(">>> Full error:",a),i}}async structuredOutput(e){const{chatOptions:n,outputSchema:r}=e,i=this.mapTextOptionsToOpenAI(n),a=xl(r,r.required||[]);try{const l=await this.client.responses.create({...i,stream:!1,text:{format:{type:"json_schema",name:"structured_output",schema:a,strict:!0}}},{headers:n.request?.headers,signal:n.request?.signal}),c=this.extractTextFromResponse(l);let f;try{f=JSON.parse(c)}catch{throw new Error(`Failed to parse structured output as JSON. Content: ${c.slice(0,200)}${c.length>200?"...":""}`)}return{data:gg(f),rawText:c}}catch(l){const c=l;throw console.error(">>> structuredOutput: Error during response creation <<<"),console.error(">>> Error message:",c.message),l}}extractTextFromResponse(e){let n="";for(const r of e.output)if(r.type==="message")for(const i of r.content)i.type==="output_text"&&(n+=i.text);return n}async*processOpenAIStreamChunks(e,n,r,i){let a="",l="";const c=Date.now();let f=0,h=!1,m=!1,p=null,_=r.model;try{for await(const y of e){f++;const v=w=>w.type==="output_text"?(a+=w.text,{type:"content",id:p||i(),model:_||r.model,timestamp:c,delta:w.text,content:a,role:"assistant"}):w.type==="reasoning_text"?(l+=w.text,{type:"thinking",id:p||i(),model:_||r.model,timestamp:c,delta:w.text,content:l}):{type:"error",id:p||i(),model:_||r.model,timestamp:c,error:{message:w.refusal}};if((y.type==="response.created"||y.type==="response.incomplete"||y.type==="response.failed")&&(p=y.response.id,_=y.response.model,h=!1,m=!1,a="",l="",y.response.error&&(yield{type:"error",id:y.response.id,model:y.response.model,timestamp:c,error:y.response.error}),y.response.incomplete_details&&(yield{type:"error",id:y.response.id,model:y.response.model,timestamp:c,error:{message:y.response.incomplete_details.reason??""}})),y.type==="response.output_text.delta"&&y.delta){const w=Array.isArray(y.delta)?y.delta.join(""):typeof y.delta=="string"?y.delta:"";w&&(a+=w,h=!0,yield{type:"content",id:p||i(),model:_||r.model,timestamp:c,delta:w,content:a,role:"assistant"})}if(y.type==="response.reasoning_text.delta"&&y.delta){const w=Array.isArray(y.delta)?y.delta.join(""):typeof y.delta=="string"?y.delta:"";w&&(l+=w,m=!0,yield{type:"thinking",id:p||i(),model:_||r.model,timestamp:c,delta:w,content:l})}if(y.type==="response.reasoning_summary_text.delta"&&y.delta){const w=typeof y.delta=="string"?y.delta:"";w&&(l+=w,m=!0,yield{type:"thinking",id:p||i(),model:_||r.model,timestamp:c,delta:w,content:l})}if(y.type==="response.content_part.added"){const w=y.part;yield v(w)}if(y.type==="response.content_part.done"){const w=y.part;if(w.type==="output_text"&&h||w.type==="reasoning_text"&&m)continue;yield v(w)}if(y.type==="response.output_item.added"){const w=y.item;w.type==="function_call"&&w.id&&(n.has(w.id)||n.set(w.id,{index:y.output_index,name:w.name||""}))}if(y.type==="response.function_call_arguments.done"){const{item_id:w,output_index:k}=y,R=n.get(w)?.name||"";yield{type:"tool_call",id:p||i(),model:_||r.model,timestamp:c,index:k,toolCall:{id:w,type:"function",function:{name:R,arguments:y.arguments}}}}if(y.type==="response.completed"){const w=y.response.output.some(k=>k.type==="function_call");yield{type:"done",id:p||i(),model:_||r.model,timestamp:c,usage:{promptTokens:y.response.usage?.input_tokens||0,completionTokens:y.response.usage?.output_tokens||0,totalTokens:y.response.usage?.total_tokens||0},finishReason:w?"tool_calls":"stop"}}y.type==="error"&&(yield{type:"error",id:p||i(),model:_||r.model,timestamp:c,error:{message:y.message,code:y.code??void 0}})}}catch(y){const v=y;console.log("[OpenAI Adapter] Stream ended with error. Event type summary:",{totalChunks:f,error:v.message}),yield{type:"error",id:i(),model:r.model,timestamp:c,error:{message:v.message||"Unknown error occurred",code:v.code}}}}mapTextOptionsToOpenAI(e){const n=e.modelOptions,r=this.convertMessagesToInput(e.messages);n&&s5({...n,model:e.model});const i=e.tools?v5(e.tools):void 0;return{model:e.model,temperature:e.temperature,max_output_tokens:e.maxTokens,top_p:e.topP,metadata:e.metadata,instructions:e.systemPrompts?.join(`
`),...n,input:r,tools:i}}convertMessagesToInput(e){const n=[];for(const r of e){if(r.role==="tool"){n.push({type:"function_call_output",call_id:r.toolCallId||"",output:typeof r.content=="string"?r.content:JSON.stringify(r.content)});continue}if(r.role==="assistant"){if(r.toolCalls&&r.toolCalls.length>0)for(const l of r.toolCalls){const c=typeof l.function.arguments=="string"?l.function.arguments:JSON.stringify(l.function.arguments);n.push({type:"function_call",call_id:l.id,name:l.function.name,arguments:c})}if(r.content){const l=this.extractTextContent(r.content);l&&n.push({type:"message",role:"assistant",content:l})}continue}const i=this.normalizeContent(r.content),a=[];for(const l of i)a.push(this.convertContentPartToOpenAI(l));a.length===0&&a.push({type:"input_text",text:""}),n.push({type:"message",role:"user",content:a})}return n}convertContentPartToOpenAI(e){switch(e.type){case"text":return{type:"input_text",text:e.content};case"image":{const n=e.metadata;return e.source.type==="url"?{type:"input_image",image_url:e.source.value,detail:n?.detail||"auto"}:{type:"input_image",image_url:e.source.value,detail:n?.detail||"auto"}}case"audio":return e.source.type==="url"?{type:"input_file",file_url:e.source.value}:{type:"input_file",file_data:e.source.value};default:throw new Error(`Unsupported content part type: ${e.type}`)}}normalizeContent(e){return e===null?[]:typeof e=="string"?[{type:"text",content:e}]:e}extractTextContent(e){return e===null?"":typeof e=="string"?e:e.filter(n=>n.type==="text").map(n=>n.content).join("")}}function I6(t){const e=`${window.location.origin}/openai/v1`;return new O6({apiKey:"not-needed",baseURL:e},t)}function N6(){return hy().ai?.model||"gpt-5.1"}function ce(t,e,n){function r(c,f){if(c._zod||Object.defineProperty(c,"_zod",{value:{def:f,constr:l,traits:new Set},enumerable:!1}),c._zod.traits.has(t))return;c._zod.traits.add(t),e(c,f);const h=l.prototype,m=Object.keys(h);for(let p=0;p<m.length;p++){const _=m[p];_ in c||(c[_]=h[_].bind(c))}}const i=n?.Parent??Object;class a extends i{}Object.defineProperty(a,"name",{value:t});function l(c){var f;const h=n?.Parent?new a:this;r(h,c),(f=h._zod).deferred??(f.deferred=[]);for(const m of h._zod.deferred)m();return h}return Object.defineProperty(l,"init",{value:r}),Object.defineProperty(l,Symbol.hasInstance,{value:c=>n?.Parent&&c instanceof n.Parent?!0:c?._zod?.traits?.has(t)}),Object.defineProperty(l,"name",{value:t}),l}class $a extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class HC extends Error{constructor(e){super(`Encountered unidirectional transform during encode: ${e}`),this.name="ZodEncodeError"}}const GC={};function Ns(t){return GC}function KC(t){const e=Object.values(t).filter(r=>typeof r=="number");return Object.entries(t).filter(([r,i])=>e.indexOf(+r)===-1).map(([r,i])=>i)}function Ig(t,e){return typeof e=="bigint"?e.toString():e}function Ky(t){return{get value(){{const e=t();return Object.defineProperty(this,"value",{value:e}),e}}}}function Zy(t){return t==null}function Qy(t){const e=t.startsWith("^")?1:0,n=t.endsWith("$")?t.length-1:t.length;return t.slice(e,n)}const A1=Symbol("evaluating");function nt(t,e,n){let r;Object.defineProperty(t,e,{get(){if(r!==A1)return r===void 0&&(r=A1,r=n()),r},set(i){Object.defineProperty(t,e,{value:i})},configurable:!0})}function Ps(t,e,n){Object.defineProperty(t,e,{value:n,writable:!0,enumerable:!0,configurable:!0})}function Yi(...t){const e={};for(const n of t){const r=Object.getOwnPropertyDescriptors(n);Object.assign(e,r)}return Object.defineProperties({},e)}function R1(t){return JSON.stringify(t)}function D6(t){return t.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"")}const ZC="captureStackTrace"in Error?Error.captureStackTrace:(...t)=>{};function zf(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)}const M6=Ky(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{const t=Function;return new t(""),!0}catch{return!1}});function Ul(t){if(zf(t)===!1)return!1;const e=t.constructor;if(e===void 0||typeof e!="function")return!0;const n=e.prototype;return!(zf(n)===!1||Object.prototype.hasOwnProperty.call(n,"isPrototypeOf")===!1)}function QC(t){return Ul(t)?{...t}:Array.isArray(t)?[...t]:t}const L6=new Set(["string","number","symbol"]);function fh(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Xi(t,e,n){const r=new t._zod.constr(e??t._zod.def);return(!e||n?.parent)&&(r._zod.parent=t),r}function De(t){const e=t;if(!e)return{};if(typeof e=="string")return{error:()=>e};if(e?.message!==void 0){if(e?.error!==void 0)throw new Error("Cannot specify both `message` and `error` params");e.error=e.message}return delete e.message,typeof e.error=="string"?{...e,error:()=>e.error}:e}function z6(t){return Object.keys(t).filter(e=>t[e]._zod.optin==="optional"&&t[e]._zod.optout==="optional")}function P6(t,e){const n=t._zod.def,r=n.checks;if(r&&r.length>0)throw new Error(".pick() cannot be used on object schemas containing refinements");const a=Yi(t._zod.def,{get shape(){const l={};for(const c in e){if(!(c in n.shape))throw new Error(`Unrecognized key: "${c}"`);e[c]&&(l[c]=n.shape[c])}return Ps(this,"shape",l),l},checks:[]});return Xi(t,a)}function j6(t,e){const n=t._zod.def,r=n.checks;if(r&&r.length>0)throw new Error(".omit() cannot be used on object schemas containing refinements");const a=Yi(t._zod.def,{get shape(){const l={...t._zod.def.shape};for(const c in e){if(!(c in n.shape))throw new Error(`Unrecognized key: "${c}"`);e[c]&&delete l[c]}return Ps(this,"shape",l),l},checks:[]});return Xi(t,a)}function B6(t,e){if(!Ul(e))throw new Error("Invalid input to extend: expected a plain object");const n=t._zod.def.checks;if(n&&n.length>0){const a=t._zod.def.shape;for(const l in e)if(Object.getOwnPropertyDescriptor(a,l)!==void 0)throw new Error("Cannot overwrite keys on object schemas containing refinements. Use `.safeExtend()` instead.")}const i=Yi(t._zod.def,{get shape(){const a={...t._zod.def.shape,...e};return Ps(this,"shape",a),a}});return Xi(t,i)}function U6(t,e){if(!Ul(e))throw new Error("Invalid input to safeExtend: expected a plain object");const n=Yi(t._zod.def,{get shape(){const r={...t._zod.def.shape,...e};return Ps(this,"shape",r),r}});return Xi(t,n)}function $6(t,e){const n=Yi(t._zod.def,{get shape(){const r={...t._zod.def.shape,...e._zod.def.shape};return Ps(this,"shape",r),r},get catchall(){return e._zod.def.catchall},checks:[]});return Xi(t,n)}function q6(t,e,n){const i=e._zod.def.checks;if(i&&i.length>0)throw new Error(".partial() cannot be used on object schemas containing refinements");const l=Yi(e._zod.def,{get shape(){const c=e._zod.def.shape,f={...c};if(n)for(const h in n){if(!(h in c))throw new Error(`Unrecognized key: "${h}"`);n[h]&&(f[h]=t?new t({type:"optional",innerType:c[h]}):c[h])}else for(const h in c)f[h]=t?new t({type:"optional",innerType:c[h]}):c[h];return Ps(this,"shape",f),f},checks:[]});return Xi(e,l)}function F6(t,e,n){const r=Yi(e._zod.def,{get shape(){const i=e._zod.def.shape,a={...i};if(n)for(const l in n){if(!(l in a))throw new Error(`Unrecognized key: "${l}"`);n[l]&&(a[l]=new t({type:"nonoptional",innerType:i[l]}))}else for(const l in i)a[l]=new t({type:"nonoptional",innerType:i[l]});return Ps(this,"shape",a),a}});return Xi(e,r)}function za(t,e=0){if(t.aborted===!0)return!0;for(let n=e;n<t.issues.length;n++)if(t.issues[n]?.continue!==!0)return!0;return!1}function JC(t,e){return e.map(n=>{var r;return(r=n).path??(r.path=[]),n.path.unshift(t),n})}function Dc(t){return typeof t=="string"?t:t?.message}function Ds(t,e,n){const r={...t,path:t.path??[]};if(!t.message){const i=Dc(t.inst?._zod.def?.error?.(t))??Dc(e?.error?.(t))??Dc(n.customError?.(t))??Dc(n.localeError?.(t))??"Invalid input";r.message=i}return delete r.inst,delete r.continue,e?.reportInput||delete r.input,r}function Jy(t){return Array.isArray(t)?"array":typeof t=="string"?"string":"unknown"}function $l(...t){const[e,n,r]=t;return typeof e=="string"?{message:e,code:"custom",input:n,inst:r}:{...e}}const YC=(t,e)=>{t.name="$ZodError",Object.defineProperty(t,"_zod",{value:t._zod,enumerable:!1}),Object.defineProperty(t,"issues",{value:e,enumerable:!1}),t.message=JSON.stringify(e,Ig,2),Object.defineProperty(t,"toString",{value:()=>t.message,enumerable:!1})},XC=ce("$ZodError",YC),WC=ce("$ZodError",YC,{Parent:Error});function V6(t,e=n=>n.message){const n={},r=[];for(const i of t.issues)i.path.length>0?(n[i.path[0]]=n[i.path[0]]||[],n[i.path[0]].push(e(i))):r.push(e(i));return{formErrors:r,fieldErrors:n}}function H6(t,e=n=>n.message){const n={_errors:[]},r=i=>{for(const a of i.issues)if(a.code==="invalid_union"&&a.errors.length)a.errors.map(l=>r({issues:l}));else if(a.code==="invalid_key")r({issues:a.issues});else if(a.code==="invalid_element")r({issues:a.issues});else if(a.path.length===0)n._errors.push(e(a));else{let l=n,c=0;for(;c<a.path.length;){const f=a.path[c];c===a.path.length-1?(l[f]=l[f]||{_errors:[]},l[f]._errors.push(e(a))):l[f]=l[f]||{_errors:[]},l=l[f],c++}}};return r(t),n}const Yy=t=>(e,n,r,i)=>{const a=r?Object.assign(r,{async:!1}):{async:!1},l=e._zod.run({value:n,issues:[]},a);if(l instanceof Promise)throw new $a;if(l.issues.length){const c=new(i?.Err??t)(l.issues.map(f=>Ds(f,a,Ns())));throw ZC(c,i?.callee),c}return l.value},Xy=t=>async(e,n,r,i)=>{const a=r?Object.assign(r,{async:!0}):{async:!0};let l=e._zod.run({value:n,issues:[]},a);if(l instanceof Promise&&(l=await l),l.issues.length){const c=new(i?.Err??t)(l.issues.map(f=>Ds(f,a,Ns())));throw ZC(c,i?.callee),c}return l.value},hh=t=>(e,n,r)=>{const i=r?{...r,async:!1}:{async:!1},a=e._zod.run({value:n,issues:[]},i);if(a instanceof Promise)throw new $a;return a.issues.length?{success:!1,error:new(t??XC)(a.issues.map(l=>Ds(l,i,Ns())))}:{success:!0,data:a.value}},G6=hh(WC),dh=t=>async(e,n,r)=>{const i=r?Object.assign(r,{async:!0}):{async:!0};let a=e._zod.run({value:n,issues:[]},i);return a instanceof Promise&&(a=await a),a.issues.length?{success:!1,error:new t(a.issues.map(l=>Ds(l,i,Ns())))}:{success:!0,data:a.value}},K6=dh(WC),Z6=t=>(e,n,r)=>{const i=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return Yy(t)(e,n,i)},Q6=t=>(e,n,r)=>Yy(t)(e,n,r),J6=t=>async(e,n,r)=>{const i=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return Xy(t)(e,n,i)},Y6=t=>async(e,n,r)=>Xy(t)(e,n,r),X6=t=>(e,n,r)=>{const i=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return hh(t)(e,n,i)},W6=t=>(e,n,r)=>hh(t)(e,n,r),eB=t=>async(e,n,r)=>{const i=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return dh(t)(e,n,i)},tB=t=>async(e,n,r)=>dh(t)(e,n,r),nB=/^[cC][^\s-]{8,}$/,rB=/^[0-9a-z]+$/,iB=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,sB=/^[0-9a-vA-V]{20}$/,aB=/^[A-Za-z0-9]{27}$/,oB=/^[a-zA-Z0-9_-]{21}$/,lB=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,uB=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,O1=t=>t?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${t}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,cB=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,fB="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function hB(){return new RegExp(fB,"u")}const dB=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,pB=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,mB=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,gB=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,yB=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,eT=/^[A-Za-z0-9_-]*$/,_B=/^\+[1-9]\d{6,14}$/,tT="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",bB=new RegExp(`^${tT}$`);function nT(t){const e="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof t.precision=="number"?t.precision===-1?`${e}`:t.precision===0?`${e}:[0-5]\\d`:`${e}:[0-5]\\d\\.\\d{${t.precision}}`:`${e}(?::[0-5]\\d(?:\\.\\d+)?)?`}function vB(t){return new RegExp(`^${nT(t)}$`)}function wB(t){const e=nT({precision:t.precision}),n=["Z"];t.local&&n.push(""),t.offset&&n.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const r=`${e}(?:${n.join("|")})`;return new RegExp(`^${tT}T(?:${r})$`)}const xB=t=>{const e=t?`[\\s\\S]{${t?.minimum??0},${t?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${e}$`)},SB=/^[^A-Z]*$/,EB=/^[^a-z]*$/,$r=ce("$ZodCheck",(t,e)=>{var n;t._zod??(t._zod={}),t._zod.def=e,(n=t._zod).onattach??(n.onattach=[])}),kB=ce("$ZodCheckMaxLength",(t,e)=>{var n;$r.init(t,e),(n=t._zod.def).when??(n.when=r=>{const i=r.value;return!Zy(i)&&i.length!==void 0}),t._zod.onattach.push(r=>{const i=r._zod.bag.maximum??Number.POSITIVE_INFINITY;e.maximum<i&&(r._zod.bag.maximum=e.maximum)}),t._zod.check=r=>{const i=r.value;if(i.length<=e.maximum)return;const l=Jy(i);r.issues.push({origin:l,code:"too_big",maximum:e.maximum,inclusive:!0,input:i,inst:t,continue:!e.abort})}}),CB=ce("$ZodCheckMinLength",(t,e)=>{var n;$r.init(t,e),(n=t._zod.def).when??(n.when=r=>{const i=r.value;return!Zy(i)&&i.length!==void 0}),t._zod.onattach.push(r=>{const i=r._zod.bag.minimum??Number.NEGATIVE_INFINITY;e.minimum>i&&(r._zod.bag.minimum=e.minimum)}),t._zod.check=r=>{const i=r.value;if(i.length>=e.minimum)return;const l=Jy(i);r.issues.push({origin:l,code:"too_small",minimum:e.minimum,inclusive:!0,input:i,inst:t,continue:!e.abort})}}),TB=ce("$ZodCheckLengthEquals",(t,e)=>{var n;$r.init(t,e),(n=t._zod.def).when??(n.when=r=>{const i=r.value;return!Zy(i)&&i.length!==void 0}),t._zod.onattach.push(r=>{const i=r._zod.bag;i.minimum=e.length,i.maximum=e.length,i.length=e.length}),t._zod.check=r=>{const i=r.value,a=i.length;if(a===e.length)return;const l=Jy(i),c=a>e.length;r.issues.push({origin:l,...c?{code:"too_big",maximum:e.length}:{code:"too_small",minimum:e.length},inclusive:!0,exact:!0,input:r.value,inst:t,continue:!e.abort})}}),ph=ce("$ZodCheckStringFormat",(t,e)=>{var n,r;$r.init(t,e),t._zod.onattach.push(i=>{const a=i._zod.bag;a.format=e.format,e.pattern&&(a.patterns??(a.patterns=new Set),a.patterns.add(e.pattern))}),e.pattern?(n=t._zod).check??(n.check=i=>{e.pattern.lastIndex=0,!e.pattern.test(i.value)&&i.issues.push({origin:"string",code:"invalid_format",format:e.format,input:i.value,...e.pattern?{pattern:e.pattern.toString()}:{},inst:t,continue:!e.abort})}):(r=t._zod).check??(r.check=()=>{})}),AB=ce("$ZodCheckRegex",(t,e)=>{ph.init(t,e),t._zod.check=n=>{e.pattern.lastIndex=0,!e.pattern.test(n.value)&&n.issues.push({origin:"string",code:"invalid_format",format:"regex",input:n.value,pattern:e.pattern.toString(),inst:t,continue:!e.abort})}}),RB=ce("$ZodCheckLowerCase",(t,e)=>{e.pattern??(e.pattern=SB),ph.init(t,e)}),OB=ce("$ZodCheckUpperCase",(t,e)=>{e.pattern??(e.pattern=EB),ph.init(t,e)}),IB=ce("$ZodCheckIncludes",(t,e)=>{$r.init(t,e);const n=fh(e.includes),r=new RegExp(typeof e.position=="number"?`^.{${e.position}}${n}`:n);e.pattern=r,t._zod.onattach.push(i=>{const a=i._zod.bag;a.patterns??(a.patterns=new Set),a.patterns.add(r)}),t._zod.check=i=>{i.value.includes(e.includes,e.position)||i.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:e.includes,input:i.value,inst:t,continue:!e.abort})}}),NB=ce("$ZodCheckStartsWith",(t,e)=>{$r.init(t,e);const n=new RegExp(`^${fh(e.prefix)}.*`);e.pattern??(e.pattern=n),t._zod.onattach.push(r=>{const i=r._zod.bag;i.patterns??(i.patterns=new Set),i.patterns.add(n)}),t._zod.check=r=>{r.value.startsWith(e.prefix)||r.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:e.prefix,input:r.value,inst:t,continue:!e.abort})}}),DB=ce("$ZodCheckEndsWith",(t,e)=>{$r.init(t,e);const n=new RegExp(`.*${fh(e.suffix)}$`);e.pattern??(e.pattern=n),t._zod.onattach.push(r=>{const i=r._zod.bag;i.patterns??(i.patterns=new Set),i.patterns.add(n)}),t._zod.check=r=>{r.value.endsWith(e.suffix)||r.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:e.suffix,input:r.value,inst:t,continue:!e.abort})}}),MB=ce("$ZodCheckOverwrite",(t,e)=>{$r.init(t,e),t._zod.check=n=>{n.value=e.tx(n.value)}});class LB{constructor(e=[]){this.content=[],this.indent=0,this&&(this.args=e)}indented(e){this.indent+=1,e(this),this.indent-=1}write(e){if(typeof e=="function"){e(this,{execution:"sync"}),e(this,{execution:"async"});return}const r=e.split(`
`).filter(l=>l),i=Math.min(...r.map(l=>l.length-l.trimStart().length)),a=r.map(l=>l.slice(i)).map(l=>" ".repeat(this.indent*2)+l);for(const l of a)this.content.push(l)}compile(){const e=Function,n=this?.args,i=[...(this?.content??[""]).map(a=>`  ${a}`)];return new e(...n,i.join(`
`))}}const zB={major:4,minor:3,patch:4},qt=ce("$ZodType",(t,e)=>{var n;t??(t={}),t._zod.def=e,t._zod.bag=t._zod.bag||{},t._zod.version=zB;const r=[...t._zod.def.checks??[]];t._zod.traits.has("$ZodCheck")&&r.unshift(t);for(const i of r)for(const a of i._zod.onattach)a(t);if(r.length===0)(n=t._zod).deferred??(n.deferred=[]),t._zod.deferred?.push(()=>{t._zod.run=t._zod.parse});else{const i=(l,c,f)=>{let h=za(l),m;for(const p of c){if(p._zod.def.when){if(!p._zod.def.when(l))continue}else if(h)continue;const _=l.issues.length,y=p._zod.check(l);if(y instanceof Promise&&f?.async===!1)throw new $a;if(m||y instanceof Promise)m=(m??Promise.resolve()).then(async()=>{await y,l.issues.length!==_&&(h||(h=za(l,_)))});else{if(l.issues.length===_)continue;h||(h=za(l,_))}}return m?m.then(()=>l):l},a=(l,c,f)=>{if(za(l))return l.aborted=!0,l;const h=i(c,r,f);if(h instanceof Promise){if(f.async===!1)throw new $a;return h.then(m=>t._zod.parse(m,f))}return t._zod.parse(h,f)};t._zod.run=(l,c)=>{if(c.skipChecks)return t._zod.parse(l,c);if(c.direction==="backward"){const h=t._zod.parse({value:l.value,issues:[]},{...c,skipChecks:!0});return h instanceof Promise?h.then(m=>a(m,l,c)):a(h,l,c)}const f=t._zod.parse(l,c);if(f instanceof Promise){if(c.async===!1)throw new $a;return f.then(h=>i(h,r,c))}return i(f,r,c)}}nt(t,"~standard",()=>({validate:i=>{try{const a=G6(t,i);return a.success?{value:a.data}:{issues:a.error?.issues}}catch{return K6(t,i).then(l=>l.success?{value:l.data}:{issues:l.error?.issues})}},vendor:"zod",version:1}))}),Wy=ce("$ZodString",(t,e)=>{qt.init(t,e),t._zod.pattern=[...t?._zod.bag?.patterns??[]].pop()??xB(t._zod.bag),t._zod.parse=(n,r)=>{if(e.coerce)try{n.value=String(n.value)}catch{}return typeof n.value=="string"||n.issues.push({expected:"string",code:"invalid_type",input:n.value,inst:t}),n}}),gt=ce("$ZodStringFormat",(t,e)=>{ph.init(t,e),Wy.init(t,e)}),PB=ce("$ZodGUID",(t,e)=>{e.pattern??(e.pattern=uB),gt.init(t,e)}),jB=ce("$ZodUUID",(t,e)=>{if(e.version){const r={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[e.version];if(r===void 0)throw new Error(`Invalid UUID version: "${e.version}"`);e.pattern??(e.pattern=O1(r))}else e.pattern??(e.pattern=O1());gt.init(t,e)}),BB=ce("$ZodEmail",(t,e)=>{e.pattern??(e.pattern=cB),gt.init(t,e)}),UB=ce("$ZodURL",(t,e)=>{gt.init(t,e),t._zod.check=n=>{try{const r=n.value.trim(),i=new URL(r);e.hostname&&(e.hostname.lastIndex=0,e.hostname.test(i.hostname)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:e.hostname.source,input:n.value,inst:t,continue:!e.abort})),e.protocol&&(e.protocol.lastIndex=0,e.protocol.test(i.protocol.endsWith(":")?i.protocol.slice(0,-1):i.protocol)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:e.protocol.source,input:n.value,inst:t,continue:!e.abort})),e.normalize?n.value=i.href:n.value=r;return}catch{n.issues.push({code:"invalid_format",format:"url",input:n.value,inst:t,continue:!e.abort})}}}),$B=ce("$ZodEmoji",(t,e)=>{e.pattern??(e.pattern=hB()),gt.init(t,e)}),qB=ce("$ZodNanoID",(t,e)=>{e.pattern??(e.pattern=oB),gt.init(t,e)}),FB=ce("$ZodCUID",(t,e)=>{e.pattern??(e.pattern=nB),gt.init(t,e)}),VB=ce("$ZodCUID2",(t,e)=>{e.pattern??(e.pattern=rB),gt.init(t,e)}),HB=ce("$ZodULID",(t,e)=>{e.pattern??(e.pattern=iB),gt.init(t,e)}),GB=ce("$ZodXID",(t,e)=>{e.pattern??(e.pattern=sB),gt.init(t,e)}),KB=ce("$ZodKSUID",(t,e)=>{e.pattern??(e.pattern=aB),gt.init(t,e)}),ZB=ce("$ZodISODateTime",(t,e)=>{e.pattern??(e.pattern=wB(e)),gt.init(t,e)}),QB=ce("$ZodISODate",(t,e)=>{e.pattern??(e.pattern=bB),gt.init(t,e)}),JB=ce("$ZodISOTime",(t,e)=>{e.pattern??(e.pattern=vB(e)),gt.init(t,e)}),YB=ce("$ZodISODuration",(t,e)=>{e.pattern??(e.pattern=lB),gt.init(t,e)}),XB=ce("$ZodIPv4",(t,e)=>{e.pattern??(e.pattern=dB),gt.init(t,e),t._zod.bag.format="ipv4"}),WB=ce("$ZodIPv6",(t,e)=>{e.pattern??(e.pattern=pB),gt.init(t,e),t._zod.bag.format="ipv6",t._zod.check=n=>{try{new URL(`http://[${n.value}]`)}catch{n.issues.push({code:"invalid_format",format:"ipv6",input:n.value,inst:t,continue:!e.abort})}}}),eU=ce("$ZodCIDRv4",(t,e)=>{e.pattern??(e.pattern=mB),gt.init(t,e)}),tU=ce("$ZodCIDRv6",(t,e)=>{e.pattern??(e.pattern=gB),gt.init(t,e),t._zod.check=n=>{const r=n.value.split("/");try{if(r.length!==2)throw new Error;const[i,a]=r;if(!a)throw new Error;const l=Number(a);if(`${l}`!==a)throw new Error;if(l<0||l>128)throw new Error;new URL(`http://[${i}]`)}catch{n.issues.push({code:"invalid_format",format:"cidrv6",input:n.value,inst:t,continue:!e.abort})}}});function rT(t){if(t==="")return!0;if(t.length%4!==0)return!1;try{return atob(t),!0}catch{return!1}}const nU=ce("$ZodBase64",(t,e)=>{e.pattern??(e.pattern=yB),gt.init(t,e),t._zod.bag.contentEncoding="base64",t._zod.check=n=>{rT(n.value)||n.issues.push({code:"invalid_format",format:"base64",input:n.value,inst:t,continue:!e.abort})}});function rU(t){if(!eT.test(t))return!1;const e=t.replace(/[-_]/g,r=>r==="-"?"+":"/"),n=e.padEnd(Math.ceil(e.length/4)*4,"=");return rT(n)}const iU=ce("$ZodBase64URL",(t,e)=>{e.pattern??(e.pattern=eT),gt.init(t,e),t._zod.bag.contentEncoding="base64url",t._zod.check=n=>{rU(n.value)||n.issues.push({code:"invalid_format",format:"base64url",input:n.value,inst:t,continue:!e.abort})}}),sU=ce("$ZodE164",(t,e)=>{e.pattern??(e.pattern=_B),gt.init(t,e)});function aU(t,e=null){try{const n=t.split(".");if(n.length!==3)return!1;const[r]=n;if(!r)return!1;const i=JSON.parse(atob(r));return!("typ"in i&&i?.typ!=="JWT"||!i.alg||e&&(!("alg"in i)||i.alg!==e))}catch{return!1}}const oU=ce("$ZodJWT",(t,e)=>{gt.init(t,e),t._zod.check=n=>{aU(n.value,e.alg)||n.issues.push({code:"invalid_format",format:"jwt",input:n.value,inst:t,continue:!e.abort})}}),lU=ce("$ZodUnknown",(t,e)=>{qt.init(t,e),t._zod.parse=n=>n}),uU=ce("$ZodNever",(t,e)=>{qt.init(t,e),t._zod.parse=(n,r)=>(n.issues.push({expected:"never",code:"invalid_type",input:n.value,inst:t}),n)});function I1(t,e,n){t.issues.length&&e.issues.push(...JC(n,t.issues)),e.value[n]=t.value}const cU=ce("$ZodArray",(t,e)=>{qt.init(t,e),t._zod.parse=(n,r)=>{const i=n.value;if(!Array.isArray(i))return n.issues.push({expected:"array",code:"invalid_type",input:i,inst:t}),n;n.value=Array(i.length);const a=[];for(let l=0;l<i.length;l++){const c=i[l],f=e.element._zod.run({value:c,issues:[]},r);f instanceof Promise?a.push(f.then(h=>I1(h,n,l))):I1(f,n,l)}return a.length?Promise.all(a).then(()=>n):n}});function Pf(t,e,n,r,i){if(t.issues.length){if(i&&!(n in r))return;e.issues.push(...JC(n,t.issues))}t.value===void 0?n in r&&(e.value[n]=void 0):e.value[n]=t.value}function iT(t){const e=Object.keys(t.shape);for(const r of e)if(!t.shape?.[r]?._zod?.traits?.has("$ZodType"))throw new Error(`Invalid element at key "${r}": expected a Zod schema`);const n=z6(t.shape);return{...t,keys:e,keySet:new Set(e),numKeys:e.length,optionalKeys:new Set(n)}}function sT(t,e,n,r,i,a){const l=[],c=i.keySet,f=i.catchall._zod,h=f.def.type,m=f.optout==="optional";for(const p in e){if(c.has(p))continue;if(h==="never"){l.push(p);continue}const _=f.run({value:e[p],issues:[]},r);_ instanceof Promise?t.push(_.then(y=>Pf(y,n,p,e,m))):Pf(_,n,p,e,m)}return l.length&&n.issues.push({code:"unrecognized_keys",keys:l,input:e,inst:a}),t.length?Promise.all(t).then(()=>n):n}const fU=ce("$ZodObject",(t,e)=>{if(qt.init(t,e),!Object.getOwnPropertyDescriptor(e,"shape")?.get){const c=e.shape;Object.defineProperty(e,"shape",{get:()=>{const f={...c};return Object.defineProperty(e,"shape",{value:f}),f}})}const r=Ky(()=>iT(e));nt(t._zod,"propValues",()=>{const c=e.shape,f={};for(const h in c){const m=c[h]._zod;if(m.values){f[h]??(f[h]=new Set);for(const p of m.values)f[h].add(p)}}return f});const i=zf,a=e.catchall;let l;t._zod.parse=(c,f)=>{l??(l=r.value);const h=c.value;if(!i(h))return c.issues.push({expected:"object",code:"invalid_type",input:h,inst:t}),c;c.value={};const m=[],p=l.shape;for(const _ of l.keys){const y=p[_],v=y._zod.optout==="optional",w=y._zod.run({value:h[_],issues:[]},f);w instanceof Promise?m.push(w.then(k=>Pf(k,c,_,h,v))):Pf(w,c,_,h,v)}return a?sT(m,h,c,f,r.value,t):m.length?Promise.all(m).then(()=>c):c}}),hU=ce("$ZodObjectJIT",(t,e)=>{fU.init(t,e);const n=t._zod.parse,r=Ky(()=>iT(e)),i=_=>{const y=new LB(["shape","payload","ctx"]),v=r.value,w=T=>{const z=R1(T);return`shape[${z}]._zod.run({ value: input[${z}], issues: [] }, ctx)`};y.write("const input = payload.value;");const k=Object.create(null);let S=0;for(const T of v.keys)k[T]=`key_${S++}`;y.write("const newResult = {};");for(const T of v.keys){const z=k[T],L=R1(T),M=_[T]?._zod?.optout==="optional";y.write(`const ${z} = ${w(T)};`),M?y.write(`
        if (${z}.issues.length) {
          if (${L} in input) {
            payload.issues = payload.issues.concat(${z}.issues.map(iss => ({
              ...iss,
              path: iss.path ? [${L}, ...iss.path] : [${L}]
            })));
          }
        }
        
        if (${z}.value === undefined) {
          if (${L} in input) {
            newResult[${L}] = undefined;
          }
        } else {
          newResult[${L}] = ${z}.value;
        }
        
      `):y.write(`
        if (${z}.issues.length) {
          payload.issues = payload.issues.concat(${z}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${L}, ...iss.path] : [${L}]
          })));
        }
        
        if (${z}.value === undefined) {
          if (${L} in input) {
            newResult[${L}] = undefined;
          }
        } else {
          newResult[${L}] = ${z}.value;
        }
        
      `)}y.write("payload.value = newResult;"),y.write("return payload;");const R=y.compile();return(T,z)=>R(_,T,z)};let a;const l=zf,c=!GC.jitless,h=c&&M6.value,m=e.catchall;let p;t._zod.parse=(_,y)=>{p??(p=r.value);const v=_.value;return l(v)?c&&h&&y?.async===!1&&y.jitless!==!0?(a||(a=i(e.shape)),_=a(_,y),m?sT([],v,_,y,p,t):_):n(_,y):(_.issues.push({expected:"object",code:"invalid_type",input:v,inst:t}),_)}});function N1(t,e,n,r){for(const a of t)if(a.issues.length===0)return e.value=a.value,e;const i=t.filter(a=>!za(a));return i.length===1?(e.value=i[0].value,i[0]):(e.issues.push({code:"invalid_union",input:e.value,inst:n,errors:t.map(a=>a.issues.map(l=>Ds(l,r,Ns())))}),e)}const dU=ce("$ZodUnion",(t,e)=>{qt.init(t,e),nt(t._zod,"optin",()=>e.options.some(i=>i._zod.optin==="optional")?"optional":void 0),nt(t._zod,"optout",()=>e.options.some(i=>i._zod.optout==="optional")?"optional":void 0),nt(t._zod,"values",()=>{if(e.options.every(i=>i._zod.values))return new Set(e.options.flatMap(i=>Array.from(i._zod.values)))}),nt(t._zod,"pattern",()=>{if(e.options.every(i=>i._zod.pattern)){const i=e.options.map(a=>a._zod.pattern);return new RegExp(`^(${i.map(a=>Qy(a.source)).join("|")})$`)}});const n=e.options.length===1,r=e.options[0]._zod.run;t._zod.parse=(i,a)=>{if(n)return r(i,a);let l=!1;const c=[];for(const f of e.options){const h=f._zod.run({value:i.value,issues:[]},a);if(h instanceof Promise)c.push(h),l=!0;else{if(h.issues.length===0)return h;c.push(h)}}return l?Promise.all(c).then(f=>N1(f,i,t,a)):N1(c,i,t,a)}}),pU=ce("$ZodIntersection",(t,e)=>{qt.init(t,e),t._zod.parse=(n,r)=>{const i=n.value,a=e.left._zod.run({value:i,issues:[]},r),l=e.right._zod.run({value:i,issues:[]},r);return a instanceof Promise||l instanceof Promise?Promise.all([a,l]).then(([f,h])=>D1(n,f,h)):D1(n,a,l)}});function Ng(t,e){if(t===e)return{valid:!0,data:t};if(t instanceof Date&&e instanceof Date&&+t==+e)return{valid:!0,data:t};if(Ul(t)&&Ul(e)){const n=Object.keys(e),r=Object.keys(t).filter(a=>n.indexOf(a)!==-1),i={...t,...e};for(const a of r){const l=Ng(t[a],e[a]);if(!l.valid)return{valid:!1,mergeErrorPath:[a,...l.mergeErrorPath]};i[a]=l.data}return{valid:!0,data:i}}if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return{valid:!1,mergeErrorPath:[]};const n=[];for(let r=0;r<t.length;r++){const i=t[r],a=e[r],l=Ng(i,a);if(!l.valid)return{valid:!1,mergeErrorPath:[r,...l.mergeErrorPath]};n.push(l.data)}return{valid:!0,data:n}}return{valid:!1,mergeErrorPath:[]}}function D1(t,e,n){const r=new Map;let i;for(const c of e.issues)if(c.code==="unrecognized_keys"){i??(i=c);for(const f of c.keys)r.has(f)||r.set(f,{}),r.get(f).l=!0}else t.issues.push(c);for(const c of n.issues)if(c.code==="unrecognized_keys")for(const f of c.keys)r.has(f)||r.set(f,{}),r.get(f).r=!0;else t.issues.push(c);const a=[...r].filter(([,c])=>c.l&&c.r).map(([c])=>c);if(a.length&&i&&t.issues.push({...i,keys:a}),za(t))return t;const l=Ng(e.value,n.value);if(!l.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(l.mergeErrorPath)}`);return t.value=l.data,t}const mU=ce("$ZodEnum",(t,e)=>{qt.init(t,e);const n=KC(e.entries),r=new Set(n);t._zod.values=r,t._zod.pattern=new RegExp(`^(${n.filter(i=>L6.has(typeof i)).map(i=>typeof i=="string"?fh(i):i.toString()).join("|")})$`),t._zod.parse=(i,a)=>{const l=i.value;return r.has(l)||i.issues.push({code:"invalid_value",values:n,input:l,inst:t}),i}}),gU=ce("$ZodTransform",(t,e)=>{qt.init(t,e),t._zod.parse=(n,r)=>{if(r.direction==="backward")throw new HC(t.constructor.name);const i=e.transform(n.value,n);if(r.async)return(i instanceof Promise?i:Promise.resolve(i)).then(l=>(n.value=l,n));if(i instanceof Promise)throw new $a;return n.value=i,n}});function M1(t,e){return t.issues.length&&e===void 0?{issues:[],value:void 0}:t}const aT=ce("$ZodOptional",(t,e)=>{qt.init(t,e),t._zod.optin="optional",t._zod.optout="optional",nt(t._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,void 0]):void 0),nt(t._zod,"pattern",()=>{const n=e.innerType._zod.pattern;return n?new RegExp(`^(${Qy(n.source)})?$`):void 0}),t._zod.parse=(n,r)=>{if(e.innerType._zod.optin==="optional"){const i=e.innerType._zod.run(n,r);return i instanceof Promise?i.then(a=>M1(a,n.value)):M1(i,n.value)}return n.value===void 0?n:e.innerType._zod.run(n,r)}}),yU=ce("$ZodExactOptional",(t,e)=>{aT.init(t,e),nt(t._zod,"values",()=>e.innerType._zod.values),nt(t._zod,"pattern",()=>e.innerType._zod.pattern),t._zod.parse=(n,r)=>e.innerType._zod.run(n,r)}),_U=ce("$ZodNullable",(t,e)=>{qt.init(t,e),nt(t._zod,"optin",()=>e.innerType._zod.optin),nt(t._zod,"optout",()=>e.innerType._zod.optout),nt(t._zod,"pattern",()=>{const n=e.innerType._zod.pattern;return n?new RegExp(`^(${Qy(n.source)}|null)$`):void 0}),nt(t._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,null]):void 0),t._zod.parse=(n,r)=>n.value===null?n:e.innerType._zod.run(n,r)}),bU=ce("$ZodDefault",(t,e)=>{qt.init(t,e),t._zod.optin="optional",nt(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(n,r)=>{if(r.direction==="backward")return e.innerType._zod.run(n,r);if(n.value===void 0)return n.value=e.defaultValue,n;const i=e.innerType._zod.run(n,r);return i instanceof Promise?i.then(a=>L1(a,e)):L1(i,e)}});function L1(t,e){return t.value===void 0&&(t.value=e.defaultValue),t}const vU=ce("$ZodPrefault",(t,e)=>{qt.init(t,e),t._zod.optin="optional",nt(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(n,r)=>(r.direction==="backward"||n.value===void 0&&(n.value=e.defaultValue),e.innerType._zod.run(n,r))}),wU=ce("$ZodNonOptional",(t,e)=>{qt.init(t,e),nt(t._zod,"values",()=>{const n=e.innerType._zod.values;return n?new Set([...n].filter(r=>r!==void 0)):void 0}),t._zod.parse=(n,r)=>{const i=e.innerType._zod.run(n,r);return i instanceof Promise?i.then(a=>z1(a,t)):z1(i,t)}});function z1(t,e){return!t.issues.length&&t.value===void 0&&t.issues.push({code:"invalid_type",expected:"nonoptional",input:t.value,inst:e}),t}const xU=ce("$ZodCatch",(t,e)=>{qt.init(t,e),nt(t._zod,"optin",()=>e.innerType._zod.optin),nt(t._zod,"optout",()=>e.innerType._zod.optout),nt(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(n,r)=>{if(r.direction==="backward")return e.innerType._zod.run(n,r);const i=e.innerType._zod.run(n,r);return i instanceof Promise?i.then(a=>(n.value=a.value,a.issues.length&&(n.value=e.catchValue({...n,error:{issues:a.issues.map(l=>Ds(l,r,Ns()))},input:n.value}),n.issues=[]),n)):(n.value=i.value,i.issues.length&&(n.value=e.catchValue({...n,error:{issues:i.issues.map(a=>Ds(a,r,Ns()))},input:n.value}),n.issues=[]),n)}}),SU=ce("$ZodPipe",(t,e)=>{qt.init(t,e),nt(t._zod,"values",()=>e.in._zod.values),nt(t._zod,"optin",()=>e.in._zod.optin),nt(t._zod,"optout",()=>e.out._zod.optout),nt(t._zod,"propValues",()=>e.in._zod.propValues),t._zod.parse=(n,r)=>{if(r.direction==="backward"){const a=e.out._zod.run(n,r);return a instanceof Promise?a.then(l=>Mc(l,e.in,r)):Mc(a,e.in,r)}const i=e.in._zod.run(n,r);return i instanceof Promise?i.then(a=>Mc(a,e.out,r)):Mc(i,e.out,r)}});function Mc(t,e,n){return t.issues.length?(t.aborted=!0,t):e._zod.run({value:t.value,issues:t.issues},n)}const EU=ce("$ZodReadonly",(t,e)=>{qt.init(t,e),nt(t._zod,"propValues",()=>e.innerType._zod.propValues),nt(t._zod,"values",()=>e.innerType._zod.values),nt(t._zod,"optin",()=>e.innerType?._zod?.optin),nt(t._zod,"optout",()=>e.innerType?._zod?.optout),t._zod.parse=(n,r)=>{if(r.direction==="backward")return e.innerType._zod.run(n,r);const i=e.innerType._zod.run(n,r);return i instanceof Promise?i.then(P1):P1(i)}});function P1(t){return t.value=Object.freeze(t.value),t}const kU=ce("$ZodCustom",(t,e)=>{$r.init(t,e),qt.init(t,e),t._zod.parse=(n,r)=>n,t._zod.check=n=>{const r=n.value,i=e.fn(r);if(i instanceof Promise)return i.then(a=>j1(a,n,r,t));j1(i,n,r,t)}});function j1(t,e,n,r){if(!t){const i={code:"custom",input:n,inst:r,path:[...r._zod.def.path??[]],continue:!r._zod.def.abort};r._zod.def.params&&(i.params=r._zod.def.params),e.issues.push($l(i))}}var B1;class CU{constructor(){this._map=new WeakMap,this._idmap=new Map}add(e,...n){const r=n[0];return this._map.set(e,r),r&&typeof r=="object"&&"id"in r&&this._idmap.set(r.id,e),this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(e){const n=this._map.get(e);return n&&typeof n=="object"&&"id"in n&&this._idmap.delete(n.id),this._map.delete(e),this}get(e){const n=e._zod.parent;if(n){const r={...this.get(n)??{}};delete r.id;const i={...r,...this._map.get(e)};return Object.keys(i).length?i:void 0}return this._map.get(e)}has(e){return this._map.has(e)}}function TU(){return new CU}(B1=globalThis).__zod_globalRegistry??(B1.__zod_globalRegistry=TU());const yl=globalThis.__zod_globalRegistry;function AU(t,e){return new t({type:"string",...De(e)})}function RU(t,e){return new t({type:"string",format:"email",check:"string_format",abort:!1,...De(e)})}function U1(t,e){return new t({type:"string",format:"guid",check:"string_format",abort:!1,...De(e)})}function OU(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,...De(e)})}function IU(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...De(e)})}function NU(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...De(e)})}function DU(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...De(e)})}function MU(t,e){return new t({type:"string",format:"url",check:"string_format",abort:!1,...De(e)})}function LU(t,e){return new t({type:"string",format:"emoji",check:"string_format",abort:!1,...De(e)})}function zU(t,e){return new t({type:"string",format:"nanoid",check:"string_format",abort:!1,...De(e)})}function PU(t,e){return new t({type:"string",format:"cuid",check:"string_format",abort:!1,...De(e)})}function jU(t,e){return new t({type:"string",format:"cuid2",check:"string_format",abort:!1,...De(e)})}function BU(t,e){return new t({type:"string",format:"ulid",check:"string_format",abort:!1,...De(e)})}function UU(t,e){return new t({type:"string",format:"xid",check:"string_format",abort:!1,...De(e)})}function $U(t,e){return new t({type:"string",format:"ksuid",check:"string_format",abort:!1,...De(e)})}function qU(t,e){return new t({type:"string",format:"ipv4",check:"string_format",abort:!1,...De(e)})}function FU(t,e){return new t({type:"string",format:"ipv6",check:"string_format",abort:!1,...De(e)})}function VU(t,e){return new t({type:"string",format:"cidrv4",check:"string_format",abort:!1,...De(e)})}function HU(t,e){return new t({type:"string",format:"cidrv6",check:"string_format",abort:!1,...De(e)})}function GU(t,e){return new t({type:"string",format:"base64",check:"string_format",abort:!1,...De(e)})}function KU(t,e){return new t({type:"string",format:"base64url",check:"string_format",abort:!1,...De(e)})}function ZU(t,e){return new t({type:"string",format:"e164",check:"string_format",abort:!1,...De(e)})}function QU(t,e){return new t({type:"string",format:"jwt",check:"string_format",abort:!1,...De(e)})}function JU(t,e){return new t({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...De(e)})}function YU(t,e){return new t({type:"string",format:"date",check:"string_format",...De(e)})}function XU(t,e){return new t({type:"string",format:"time",check:"string_format",precision:null,...De(e)})}function WU(t,e){return new t({type:"string",format:"duration",check:"string_format",...De(e)})}function e8(t){return new t({type:"unknown"})}function t8(t,e){return new t({type:"never",...De(e)})}function oT(t,e){return new kB({check:"max_length",...De(e),maximum:t})}function jf(t,e){return new CB({check:"min_length",...De(e),minimum:t})}function lT(t,e){return new TB({check:"length_equals",...De(e),length:t})}function n8(t,e){return new AB({check:"string_format",format:"regex",...De(e),pattern:t})}function r8(t){return new RB({check:"string_format",format:"lowercase",...De(t)})}function i8(t){return new OB({check:"string_format",format:"uppercase",...De(t)})}function s8(t,e){return new IB({check:"string_format",format:"includes",...De(e),includes:t})}function a8(t,e){return new NB({check:"string_format",format:"starts_with",...De(e),prefix:t})}function o8(t,e){return new DB({check:"string_format",format:"ends_with",...De(e),suffix:t})}function Wa(t){return new MB({check:"overwrite",tx:t})}function l8(t){return Wa(e=>e.normalize(t))}function u8(){return Wa(t=>t.trim())}function c8(){return Wa(t=>t.toLowerCase())}function f8(){return Wa(t=>t.toUpperCase())}function h8(){return Wa(t=>D6(t))}function d8(t,e,n){return new t({type:"array",element:e,...De(n)})}function p8(t,e,n){return new t({type:"custom",check:"custom",fn:e,...De(n)})}function m8(t){const e=g8(n=>(n.addIssue=r=>{if(typeof r=="string")n.issues.push($l(r,n.value,e._zod.def));else{const i=r;i.fatal&&(i.continue=!1),i.code??(i.code="custom"),i.input??(i.input=n.value),i.inst??(i.inst=e),i.continue??(i.continue=!e._zod.def.abort),n.issues.push($l(i))}},t(n.value,n)));return e}function g8(t,e){const n=new $r({check:"custom",...De(e)});return n._zod.check=t,n}function uT(t){let e=t?.target??"draft-2020-12";return e==="draft-4"&&(e="draft-04"),e==="draft-7"&&(e="draft-07"),{processors:t.processors??{},metadataRegistry:t?.metadata??yl,target:e,unrepresentable:t?.unrepresentable??"throw",override:t?.override??(()=>{}),io:t?.io??"output",counter:0,seen:new Map,cycles:t?.cycles??"ref",reused:t?.reused??"inline",external:t?.external??void 0}}function ln(t,e,n={path:[],schemaPath:[]}){var r;const i=t._zod.def,a=e.seen.get(t);if(a)return a.count++,n.schemaPath.includes(t)&&(a.cycle=n.path),a.schema;const l={schema:{},count:1,cycle:void 0,path:n.path};e.seen.set(t,l);const c=t._zod.toJSONSchema?.();if(c)l.schema=c;else{const m={...n,schemaPath:[...n.schemaPath,t],path:n.path};if(t._zod.processJSONSchema)t._zod.processJSONSchema(e,l.schema,m);else{const _=l.schema,y=e.processors[i.type];if(!y)throw new Error(`[toJSONSchema]: Non-representable type encountered: ${i.type}`);y(t,e,_,m)}const p=t._zod.parent;p&&(l.ref||(l.ref=p),ln(p,e,m),e.seen.get(p).isParent=!0)}const f=e.metadataRegistry.get(t);return f&&Object.assign(l.schema,f),e.io==="input"&&vn(t)&&(delete l.schema.examples,delete l.schema.default),e.io==="input"&&l.schema._prefault&&((r=l.schema).default??(r.default=l.schema._prefault)),delete l.schema._prefault,e.seen.get(t).schema}function cT(t,e){const n=t.seen.get(e);if(!n)throw new Error("Unprocessed schema. This is a bug in Zod.");const r=new Map;for(const l of t.seen.entries()){const c=t.metadataRegistry.get(l[0])?.id;if(c){const f=r.get(c);if(f&&f!==l[0])throw new Error(`Duplicate schema id "${c}" detected during JSON Schema conversion. Two different schemas cannot share the same id when converted together.`);r.set(c,l[0])}}const i=l=>{const c=t.target==="draft-2020-12"?"$defs":"definitions";if(t.external){const p=t.external.registry.get(l[0])?.id,_=t.external.uri??(v=>v);if(p)return{ref:_(p)};const y=l[1].defId??l[1].schema.id??`schema${t.counter++}`;return l[1].defId=y,{defId:y,ref:`${_("__shared")}#/${c}/${y}`}}if(l[1]===n)return{ref:"#"};const h=`#/${c}/`,m=l[1].schema.id??`__schema${t.counter++}`;return{defId:m,ref:h+m}},a=l=>{if(l[1].schema.$ref)return;const c=l[1],{ref:f,defId:h}=i(l);c.def={...c.schema},h&&(c.defId=h);const m=c.schema;for(const p in m)delete m[p];m.$ref=f};if(t.cycles==="throw")for(const l of t.seen.entries()){const c=l[1];if(c.cycle)throw new Error(`Cycle detected: #/${c.cycle?.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(const l of t.seen.entries()){const c=l[1];if(e===l[0]){a(l);continue}if(t.external){const h=t.external.registry.get(l[0])?.id;if(e!==l[0]&&h){a(l);continue}}if(t.metadataRegistry.get(l[0])?.id){a(l);continue}if(c.cycle){a(l);continue}if(c.count>1&&t.reused==="ref"){a(l);continue}}}function fT(t,e){const n=t.seen.get(e);if(!n)throw new Error("Unprocessed schema. This is a bug in Zod.");const r=l=>{const c=t.seen.get(l);if(c.ref===null)return;const f=c.def??c.schema,h={...f},m=c.ref;if(c.ref=null,m){r(m);const _=t.seen.get(m),y=_.schema;if(y.$ref&&(t.target==="draft-07"||t.target==="draft-04"||t.target==="openapi-3.0")?(f.allOf=f.allOf??[],f.allOf.push(y)):Object.assign(f,y),Object.assign(f,h),l._zod.parent===m)for(const w in f)w==="$ref"||w==="allOf"||w in h||delete f[w];if(y.$ref)for(const w in f)w==="$ref"||w==="allOf"||w in _.def&&JSON.stringify(f[w])===JSON.stringify(_.def[w])&&delete f[w]}const p=l._zod.parent;if(p&&p!==m){r(p);const _=t.seen.get(p);if(_?.schema.$ref&&(f.$ref=_.schema.$ref,_.def))for(const y in f)y==="$ref"||y==="allOf"||y in _.def&&JSON.stringify(f[y])===JSON.stringify(_.def[y])&&delete f[y]}t.override({zodSchema:l,jsonSchema:f,path:c.path??[]})};for(const l of[...t.seen.entries()].reverse())r(l[0]);const i={};if(t.target==="draft-2020-12"?i.$schema="https://json-schema.org/draft/2020-12/schema":t.target==="draft-07"?i.$schema="http://json-schema.org/draft-07/schema#":t.target==="draft-04"?i.$schema="http://json-schema.org/draft-04/schema#":t.target,t.external?.uri){const l=t.external.registry.get(e)?.id;if(!l)throw new Error("Schema is missing an `id` property");i.$id=t.external.uri(l)}Object.assign(i,n.def??n.schema);const a=t.external?.defs??{};for(const l of t.seen.entries()){const c=l[1];c.def&&c.defId&&(a[c.defId]=c.def)}t.external||Object.keys(a).length>0&&(t.target==="draft-2020-12"?i.$defs=a:i.definitions=a);try{const l=JSON.parse(JSON.stringify(i));return Object.defineProperty(l,"~standard",{value:{...e["~standard"],jsonSchema:{input:Bf(e,"input",t.processors),output:Bf(e,"output",t.processors)}},enumerable:!1,writable:!1}),l}catch{throw new Error("Error converting schema to JSON.")}}function vn(t,e){const n=e??{seen:new Set};if(n.seen.has(t))return!1;n.seen.add(t);const r=t._zod.def;if(r.type==="transform")return!0;if(r.type==="array")return vn(r.element,n);if(r.type==="set")return vn(r.valueType,n);if(r.type==="lazy")return vn(r.getter(),n);if(r.type==="promise"||r.type==="optional"||r.type==="nonoptional"||r.type==="nullable"||r.type==="readonly"||r.type==="default"||r.type==="prefault")return vn(r.innerType,n);if(r.type==="intersection")return vn(r.left,n)||vn(r.right,n);if(r.type==="record"||r.type==="map")return vn(r.keyType,n)||vn(r.valueType,n);if(r.type==="pipe")return vn(r.in,n)||vn(r.out,n);if(r.type==="object"){for(const i in r.shape)if(vn(r.shape[i],n))return!0;return!1}if(r.type==="union"){for(const i of r.options)if(vn(i,n))return!0;return!1}if(r.type==="tuple"){for(const i of r.items)if(vn(i,n))return!0;return!!(r.rest&&vn(r.rest,n))}return!1}const y8=(t,e={})=>n=>{const r=uT({...n,processors:e});return ln(t,r),cT(r,t),fT(r,t)},Bf=(t,e,n={})=>r=>{const{libraryOptions:i,target:a}=r??{},l=uT({...i??{},target:a,io:e,processors:n});return ln(t,l),cT(l,t),fT(l,t)},_8={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},b8=(t,e,n,r)=>{const i=n;i.type="string";const{minimum:a,maximum:l,format:c,patterns:f,contentEncoding:h}=t._zod.bag;if(typeof a=="number"&&(i.minLength=a),typeof l=="number"&&(i.maxLength=l),c&&(i.format=_8[c]??c,i.format===""&&delete i.format,c==="time"&&delete i.format),h&&(i.contentEncoding=h),f&&f.size>0){const m=[...f];m.length===1?i.pattern=m[0].source:m.length>1&&(i.allOf=[...m.map(p=>({...e.target==="draft-07"||e.target==="draft-04"||e.target==="openapi-3.0"?{type:"string"}:{},pattern:p.source}))])}},v8=(t,e,n,r)=>{n.not={}},w8=(t,e,n,r)=>{},x8=(t,e,n,r)=>{const i=t._zod.def,a=KC(i.entries);a.every(l=>typeof l=="number")&&(n.type="number"),a.every(l=>typeof l=="string")&&(n.type="string"),n.enum=a},S8=(t,e,n,r)=>{if(e.unrepresentable==="throw")throw new Error("Custom types cannot be represented in JSON Schema")},E8=(t,e,n,r)=>{if(e.unrepresentable==="throw")throw new Error("Transforms cannot be represented in JSON Schema")},k8=(t,e,n,r)=>{const i=n,a=t._zod.def,{minimum:l,maximum:c}=t._zod.bag;typeof l=="number"&&(i.minItems=l),typeof c=="number"&&(i.maxItems=c),i.type="array",i.items=ln(a.element,e,{...r,path:[...r.path,"items"]})},C8=(t,e,n,r)=>{const i=n,a=t._zod.def;i.type="object",i.properties={};const l=a.shape;for(const h in l)i.properties[h]=ln(l[h],e,{...r,path:[...r.path,"properties",h]});const c=new Set(Object.keys(l)),f=new Set([...c].filter(h=>{const m=a.shape[h]._zod;return e.io==="input"?m.optin===void 0:m.optout===void 0}));f.size>0&&(i.required=Array.from(f)),a.catchall?._zod.def.type==="never"?i.additionalProperties=!1:a.catchall?a.catchall&&(i.additionalProperties=ln(a.catchall,e,{...r,path:[...r.path,"additionalProperties"]})):e.io==="output"&&(i.additionalProperties=!1)},T8=(t,e,n,r)=>{const i=t._zod.def,a=i.inclusive===!1,l=i.options.map((c,f)=>ln(c,e,{...r,path:[...r.path,a?"oneOf":"anyOf",f]}));a?n.oneOf=l:n.anyOf=l},A8=(t,e,n,r)=>{const i=t._zod.def,a=ln(i.left,e,{...r,path:[...r.path,"allOf",0]}),l=ln(i.right,e,{...r,path:[...r.path,"allOf",1]}),c=h=>"allOf"in h&&Object.keys(h).length===1,f=[...c(a)?a.allOf:[a],...c(l)?l.allOf:[l]];n.allOf=f},R8=(t,e,n,r)=>{const i=t._zod.def,a=ln(i.innerType,e,r),l=e.seen.get(t);e.target==="openapi-3.0"?(l.ref=i.innerType,n.nullable=!0):n.anyOf=[a,{type:"null"}]},O8=(t,e,n,r)=>{const i=t._zod.def;ln(i.innerType,e,r);const a=e.seen.get(t);a.ref=i.innerType},I8=(t,e,n,r)=>{const i=t._zod.def;ln(i.innerType,e,r);const a=e.seen.get(t);a.ref=i.innerType,n.default=JSON.parse(JSON.stringify(i.defaultValue))},N8=(t,e,n,r)=>{const i=t._zod.def;ln(i.innerType,e,r);const a=e.seen.get(t);a.ref=i.innerType,e.io==="input"&&(n._prefault=JSON.parse(JSON.stringify(i.defaultValue)))},D8=(t,e,n,r)=>{const i=t._zod.def;ln(i.innerType,e,r);const a=e.seen.get(t);a.ref=i.innerType;let l;try{l=i.catchValue(void 0)}catch{throw new Error("Dynamic catch values are not supported in JSON Schema")}n.default=l},M8=(t,e,n,r)=>{const i=t._zod.def,a=e.io==="input"?i.in._zod.def.type==="transform"?i.out:i.in:i.out;ln(a,e,r);const l=e.seen.get(t);l.ref=a},L8=(t,e,n,r)=>{const i=t._zod.def;ln(i.innerType,e,r);const a=e.seen.get(t);a.ref=i.innerType,n.readOnly=!0},hT=(t,e,n,r)=>{const i=t._zod.def;ln(i.innerType,e,r);const a=e.seen.get(t);a.ref=i.innerType},z8=ce("ZodISODateTime",(t,e)=>{ZB.init(t,e),bt.init(t,e)});function P8(t){return JU(z8,t)}const j8=ce("ZodISODate",(t,e)=>{QB.init(t,e),bt.init(t,e)});function B8(t){return YU(j8,t)}const U8=ce("ZodISOTime",(t,e)=>{JB.init(t,e),bt.init(t,e)});function $8(t){return XU(U8,t)}const q8=ce("ZodISODuration",(t,e)=>{YB.init(t,e),bt.init(t,e)});function F8(t){return WU(q8,t)}const V8=(t,e)=>{XC.init(t,e),t.name="ZodError",Object.defineProperties(t,{format:{value:n=>H6(t,n)},flatten:{value:n=>V6(t,n)},addIssue:{value:n=>{t.issues.push(n),t.message=JSON.stringify(t.issues,Ig,2)}},addIssues:{value:n=>{t.issues.push(...n),t.message=JSON.stringify(t.issues,Ig,2)}},isEmpty:{get(){return t.issues.length===0}}})},br=ce("ZodError",V8,{Parent:Error}),H8=Yy(br),G8=Xy(br),K8=hh(br),Z8=dh(br),Q8=Z6(br),J8=Q6(br),Y8=J6(br),X8=Y6(br),W8=X6(br),e$=W6(br),t$=eB(br),n$=tB(br),Ft=ce("ZodType",(t,e)=>(qt.init(t,e),Object.assign(t["~standard"],{jsonSchema:{input:Bf(t,"input"),output:Bf(t,"output")}}),t.toJSONSchema=y8(t,{}),t.def=e,t.type=e.type,Object.defineProperty(t,"_def",{value:e}),t.check=(...n)=>t.clone(Yi(e,{checks:[...e.checks??[],...n.map(r=>typeof r=="function"?{_zod:{check:r,def:{check:"custom"},onattach:[]}}:r)]}),{parent:!0}),t.with=t.check,t.clone=(n,r)=>Xi(t,n,r),t.brand=()=>t,t.register=((n,r)=>(n.add(t,r),t)),t.parse=(n,r)=>H8(t,n,r,{callee:t.parse}),t.safeParse=(n,r)=>K8(t,n,r),t.parseAsync=async(n,r)=>G8(t,n,r,{callee:t.parseAsync}),t.safeParseAsync=async(n,r)=>Z8(t,n,r),t.spa=t.safeParseAsync,t.encode=(n,r)=>Q8(t,n,r),t.decode=(n,r)=>J8(t,n,r),t.encodeAsync=async(n,r)=>Y8(t,n,r),t.decodeAsync=async(n,r)=>X8(t,n,r),t.safeEncode=(n,r)=>W8(t,n,r),t.safeDecode=(n,r)=>e$(t,n,r),t.safeEncodeAsync=async(n,r)=>t$(t,n,r),t.safeDecodeAsync=async(n,r)=>n$(t,n,r),t.refine=(n,r)=>t.check(K$(n,r)),t.superRefine=n=>t.check(Z$(n)),t.overwrite=n=>t.check(Wa(n)),t.optional=()=>F1(t),t.exactOptional=()=>M$(t),t.nullable=()=>V1(t),t.nullish=()=>F1(V1(t)),t.nonoptional=n=>U$(t,n),t.array=()=>k$(t),t.or=n=>A$([t,n]),t.and=n=>O$(t,n),t.transform=n=>H1(t,N$(n)),t.default=n=>P$(t,n),t.prefault=n=>B$(t,n),t.catch=n=>q$(t,n),t.pipe=n=>H1(t,n),t.readonly=()=>H$(t),t.describe=n=>{const r=t.clone();return yl.add(r,{description:n}),r},Object.defineProperty(t,"description",{get(){return yl.get(t)?.description},configurable:!0}),t.meta=(...n)=>{if(n.length===0)return yl.get(t);const r=t.clone();return yl.add(r,n[0]),r},t.isOptional=()=>t.safeParse(void 0).success,t.isNullable=()=>t.safeParse(null).success,t.apply=n=>n(t),t)),dT=ce("_ZodString",(t,e)=>{Wy.init(t,e),Ft.init(t,e),t._zod.processJSONSchema=(r,i,a)=>b8(t,r,i);const n=t._zod.bag;t.format=n.format??null,t.minLength=n.minimum??null,t.maxLength=n.maximum??null,t.regex=(...r)=>t.check(n8(...r)),t.includes=(...r)=>t.check(s8(...r)),t.startsWith=(...r)=>t.check(a8(...r)),t.endsWith=(...r)=>t.check(o8(...r)),t.min=(...r)=>t.check(jf(...r)),t.max=(...r)=>t.check(oT(...r)),t.length=(...r)=>t.check(lT(...r)),t.nonempty=(...r)=>t.check(jf(1,...r)),t.lowercase=r=>t.check(r8(r)),t.uppercase=r=>t.check(i8(r)),t.trim=()=>t.check(u8()),t.normalize=(...r)=>t.check(l8(...r)),t.toLowerCase=()=>t.check(c8()),t.toUpperCase=()=>t.check(f8()),t.slugify=()=>t.check(h8())}),r$=ce("ZodString",(t,e)=>{Wy.init(t,e),dT.init(t,e),t.email=n=>t.check(RU(i$,n)),t.url=n=>t.check(MU(s$,n)),t.jwt=n=>t.check(QU(v$,n)),t.emoji=n=>t.check(LU(a$,n)),t.guid=n=>t.check(U1($1,n)),t.uuid=n=>t.check(OU(Lc,n)),t.uuidv4=n=>t.check(IU(Lc,n)),t.uuidv6=n=>t.check(NU(Lc,n)),t.uuidv7=n=>t.check(DU(Lc,n)),t.nanoid=n=>t.check(zU(o$,n)),t.guid=n=>t.check(U1($1,n)),t.cuid=n=>t.check(PU(l$,n)),t.cuid2=n=>t.check(jU(u$,n)),t.ulid=n=>t.check(BU(c$,n)),t.base64=n=>t.check(GU(y$,n)),t.base64url=n=>t.check(KU(_$,n)),t.xid=n=>t.check(UU(f$,n)),t.ksuid=n=>t.check($U(h$,n)),t.ipv4=n=>t.check(qU(d$,n)),t.ipv6=n=>t.check(FU(p$,n)),t.cidrv4=n=>t.check(VU(m$,n)),t.cidrv6=n=>t.check(HU(g$,n)),t.e164=n=>t.check(ZU(b$,n)),t.datetime=n=>t.check(P8(n)),t.date=n=>t.check(B8(n)),t.time=n=>t.check($8(n)),t.duration=n=>t.check(F8(n))});function Ki(t){return AU(r$,t)}const bt=ce("ZodStringFormat",(t,e)=>{gt.init(t,e),dT.init(t,e)}),i$=ce("ZodEmail",(t,e)=>{BB.init(t,e),bt.init(t,e)}),$1=ce("ZodGUID",(t,e)=>{PB.init(t,e),bt.init(t,e)}),Lc=ce("ZodUUID",(t,e)=>{jB.init(t,e),bt.init(t,e)}),s$=ce("ZodURL",(t,e)=>{UB.init(t,e),bt.init(t,e)}),a$=ce("ZodEmoji",(t,e)=>{$B.init(t,e),bt.init(t,e)}),o$=ce("ZodNanoID",(t,e)=>{qB.init(t,e),bt.init(t,e)}),l$=ce("ZodCUID",(t,e)=>{FB.init(t,e),bt.init(t,e)}),u$=ce("ZodCUID2",(t,e)=>{VB.init(t,e),bt.init(t,e)}),c$=ce("ZodULID",(t,e)=>{HB.init(t,e),bt.init(t,e)}),f$=ce("ZodXID",(t,e)=>{GB.init(t,e),bt.init(t,e)}),h$=ce("ZodKSUID",(t,e)=>{KB.init(t,e),bt.init(t,e)}),d$=ce("ZodIPv4",(t,e)=>{XB.init(t,e),bt.init(t,e)}),p$=ce("ZodIPv6",(t,e)=>{WB.init(t,e),bt.init(t,e)}),m$=ce("ZodCIDRv4",(t,e)=>{eU.init(t,e),bt.init(t,e)}),g$=ce("ZodCIDRv6",(t,e)=>{tU.init(t,e),bt.init(t,e)}),y$=ce("ZodBase64",(t,e)=>{nU.init(t,e),bt.init(t,e)}),_$=ce("ZodBase64URL",(t,e)=>{iU.init(t,e),bt.init(t,e)}),b$=ce("ZodE164",(t,e)=>{sU.init(t,e),bt.init(t,e)}),v$=ce("ZodJWT",(t,e)=>{oU.init(t,e),bt.init(t,e)}),w$=ce("ZodUnknown",(t,e)=>{lU.init(t,e),Ft.init(t,e),t._zod.processJSONSchema=(n,r,i)=>w8()});function q1(){return e8(w$)}const x$=ce("ZodNever",(t,e)=>{uU.init(t,e),Ft.init(t,e),t._zod.processJSONSchema=(n,r,i)=>v8(t,n,r)});function S$(t){return t8(x$,t)}const E$=ce("ZodArray",(t,e)=>{cU.init(t,e),Ft.init(t,e),t._zod.processJSONSchema=(n,r,i)=>k8(t,n,r,i),t.element=e.element,t.min=(n,r)=>t.check(jf(n,r)),t.nonempty=n=>t.check(jf(1,n)),t.max=(n,r)=>t.check(oT(n,r)),t.length=(n,r)=>t.check(lT(n,r)),t.unwrap=()=>t.element});function k$(t,e){return d8(E$,t,e)}const C$=ce("ZodObject",(t,e)=>{hU.init(t,e),Ft.init(t,e),t._zod.processJSONSchema=(n,r,i)=>C8(t,n,r,i),nt(t,"shape",()=>e.shape),t.keyof=()=>e0(Object.keys(t._zod.def.shape)),t.catchall=n=>t.clone({...t._zod.def,catchall:n}),t.passthrough=()=>t.clone({...t._zod.def,catchall:q1()}),t.loose=()=>t.clone({...t._zod.def,catchall:q1()}),t.strict=()=>t.clone({...t._zod.def,catchall:S$()}),t.strip=()=>t.clone({...t._zod.def,catchall:void 0}),t.extend=n=>B6(t,n),t.safeExtend=n=>U6(t,n),t.merge=n=>$6(t,n),t.pick=n=>P6(t,n),t.omit=n=>j6(t,n),t.partial=(...n)=>q6(pT,t,n[0]),t.required=(...n)=>F6(mT,t,n[0])});function Wi(t,e){const n={type:"object",shape:t??{},...De(e)};return new C$(n)}const T$=ce("ZodUnion",(t,e)=>{dU.init(t,e),Ft.init(t,e),t._zod.processJSONSchema=(n,r,i)=>T8(t,n,r,i),t.options=e.options});function A$(t,e){return new T$({type:"union",options:t,...De(e)})}const R$=ce("ZodIntersection",(t,e)=>{pU.init(t,e),Ft.init(t,e),t._zod.processJSONSchema=(n,r,i)=>A8(t,n,r,i)});function O$(t,e){return new R$({type:"intersection",left:t,right:e})}const Dg=ce("ZodEnum",(t,e)=>{mU.init(t,e),Ft.init(t,e),t._zod.processJSONSchema=(r,i,a)=>x8(t,r,i),t.enum=e.entries,t.options=Object.values(e.entries);const n=new Set(Object.keys(e.entries));t.extract=(r,i)=>{const a={};for(const l of r)if(n.has(l))a[l]=e.entries[l];else throw new Error(`Key ${l} not found in enum`);return new Dg({...e,checks:[],...De(i),entries:a})},t.exclude=(r,i)=>{const a={...e.entries};for(const l of r)if(n.has(l))delete a[l];else throw new Error(`Key ${l} not found in enum`);return new Dg({...e,checks:[],...De(i),entries:a})}});function e0(t,e){const n=Array.isArray(t)?Object.fromEntries(t.map(r=>[r,r])):t;return new Dg({type:"enum",entries:n,...De(e)})}const I$=ce("ZodTransform",(t,e)=>{gU.init(t,e),Ft.init(t,e),t._zod.processJSONSchema=(n,r,i)=>E8(t,n),t._zod.parse=(n,r)=>{if(r.direction==="backward")throw new HC(t.constructor.name);n.addIssue=a=>{if(typeof a=="string")n.issues.push($l(a,n.value,e));else{const l=a;l.fatal&&(l.continue=!1),l.code??(l.code="custom"),l.input??(l.input=n.value),l.inst??(l.inst=t),n.issues.push($l(l))}};const i=e.transform(n.value,n);return i instanceof Promise?i.then(a=>(n.value=a,n)):(n.value=i,n)}});function N$(t){return new I$({type:"transform",transform:t})}const pT=ce("ZodOptional",(t,e)=>{aT.init(t,e),Ft.init(t,e),t._zod.processJSONSchema=(n,r,i)=>hT(t,n,r,i),t.unwrap=()=>t._zod.def.innerType});function F1(t){return new pT({type:"optional",innerType:t})}const D$=ce("ZodExactOptional",(t,e)=>{yU.init(t,e),Ft.init(t,e),t._zod.processJSONSchema=(n,r,i)=>hT(t,n,r,i),t.unwrap=()=>t._zod.def.innerType});function M$(t){return new D$({type:"optional",innerType:t})}const L$=ce("ZodNullable",(t,e)=>{_U.init(t,e),Ft.init(t,e),t._zod.processJSONSchema=(n,r,i)=>R8(t,n,r,i),t.unwrap=()=>t._zod.def.innerType});function V1(t){return new L$({type:"nullable",innerType:t})}const z$=ce("ZodDefault",(t,e)=>{bU.init(t,e),Ft.init(t,e),t._zod.processJSONSchema=(n,r,i)=>I8(t,n,r,i),t.unwrap=()=>t._zod.def.innerType,t.removeDefault=t.unwrap});function P$(t,e){return new z$({type:"default",innerType:t,get defaultValue(){return typeof e=="function"?e():QC(e)}})}const j$=ce("ZodPrefault",(t,e)=>{vU.init(t,e),Ft.init(t,e),t._zod.processJSONSchema=(n,r,i)=>N8(t,n,r,i),t.unwrap=()=>t._zod.def.innerType});function B$(t,e){return new j$({type:"prefault",innerType:t,get defaultValue(){return typeof e=="function"?e():QC(e)}})}const mT=ce("ZodNonOptional",(t,e)=>{wU.init(t,e),Ft.init(t,e),t._zod.processJSONSchema=(n,r,i)=>O8(t,n,r,i),t.unwrap=()=>t._zod.def.innerType});function U$(t,e){return new mT({type:"nonoptional",innerType:t,...De(e)})}const $$=ce("ZodCatch",(t,e)=>{xU.init(t,e),Ft.init(t,e),t._zod.processJSONSchema=(n,r,i)=>D8(t,n,r,i),t.unwrap=()=>t._zod.def.innerType,t.removeCatch=t.unwrap});function q$(t,e){return new $$({type:"catch",innerType:t,catchValue:typeof e=="function"?e:()=>e})}const F$=ce("ZodPipe",(t,e)=>{SU.init(t,e),Ft.init(t,e),t._zod.processJSONSchema=(n,r,i)=>M8(t,n,r,i),t.in=e.in,t.out=e.out});function H1(t,e){return new F$({type:"pipe",in:t,out:e})}const V$=ce("ZodReadonly",(t,e)=>{EU.init(t,e),Ft.init(t,e),t._zod.processJSONSchema=(n,r,i)=>L8(t,n,r,i),t.unwrap=()=>t._zod.def.innerType});function H$(t){return new V$({type:"readonly",innerType:t})}const G$=ce("ZodCustom",(t,e)=>{kU.init(t,e),Ft.init(t,e),t._zod.processJSONSchema=(n,r,i)=>S8(t,n)});function K$(t,e={}){return p8(G$,t,e)}function Z$(t){return m8(t)}const G1=10*1024;function Xo(){return Math.random().toString(36).substring(2,9)}function Q$(t){try{const e=JSON.parse(t);return JSON.stringify(e,null,2)}catch{return t}}function J$(t){return t?t.length<=G1?t:t.slice(0,G1)+`
...[TRUNCATED]`:"(empty)"}function Y$(t){const e=t.body.type==="json"||t.body.type==="raw"?t.body.content:t.body.type==="form-urlencoded"?t.body.data:t.body.type==="form-data"?t.body.data.map(n=>({key:n.key,type:n.type,value:n.type==="file"?n.file?.name:n.value})):null;return{method:t.method,url:t.url,headers:t.headers.filter(n=>n.enabled!==!1),queryParams:t.query.filter(n=>n.enabled!==!1),body:{type:t.body.type,content:e}}}function X$(t,e){const n=t.httpResponse;return n?{status:n.status,statusCode:n.statusCode,headers:n.headers,body:J$(e),duration:n.duration}:null}const gT=Wi({}),W$=Wi({method:e0(["GET","POST","PUT","PATCH","DELETE","OPTIONS","HEAD"]).describe("The HTTP method")}),e9=Wi({url:Ki().describe("The full URL for the request")}),t9=Wi({headers:Ki().describe('JSON array of header objects with "key", "value", and optional "enabled" (default true) properties. Example: [{"key": "Content-Type", "value": "application/json"}]')}),n9=Wi({key:Ki().describe("The header name"),value:Ki().describe("The header value")}),r9=Wi({params:Ki().describe('JSON array of parameter objects with "key", "value", and optional "enabled" (default true) properties. Example: [{"key": "page", "value": "1"}]')}),i9=Wi({key:Ki().describe("The parameter name"),value:Ki().describe("The parameter value")}),s9=Wi({type:e0(["none","json","form-urlencoded","raw"]).describe("The body type"),content:Ki().optional().describe("The body content. For JSON, provide valid JSON string. For form-urlencoded, provide JSON array like headers/params.")}),a9=hi({name:"get_current_request",description:"Get the current HTTP request configuration including method, URL, headers, query params, and body",inputSchema:gT}),o9=hi({name:"get_response",description:"Get the response from the last executed request, including status, headers, and body",inputSchema:gT}),l9=hi({name:"set_method",description:"Set the HTTP method for the request",inputSchema:W$}),u9=hi({name:"set_url",description:"Set the URL for the request",inputSchema:e9}),c9=hi({name:"set_headers",description:"Set the headers for the request. This replaces all existing headers.",inputSchema:t9}),f9=hi({name:"add_header",description:"Add a single header to the request",inputSchema:n9}),h9=hi({name:"set_query_params",description:"Set the query parameters for the request. This replaces all existing query params.",inputSchema:r9}),d9=hi({name:"add_query_param",description:"Add a single query parameter to the request",inputSchema:i9}),p9=hi({name:"set_body",description:"Set the request body",inputSchema:s9});function m9(t){const{request:e,setters:n,responseBodyText:r}=t,i=a9.client(async()=>Y$(e)),a=o9.client(async()=>X$(e,r)||{error:"No response available. Execute the request first."}),l=l9.client(async y=>{const v=y;return n.setMethod(v.method),{success:!0,method:v.method}}),c=u9.client(async y=>{const v=y;return n.setUrl(v.url),{success:!0,url:v.url}}),f=c9.client(async y=>{const w=JSON.parse(y.headers).map(k=>({id:Xo(),key:k.key,value:k.value,enabled:k.enabled!==!1}));return n.setHeaders(w),{success:!0,headerCount:w.length}}),h=f9.client(async y=>{const v=y,w=[...e.headers,{id:Xo(),key:v.key,value:v.value,enabled:!0}];return n.setHeaders(w),{success:!0,added:{key:v.key,value:v.value}}}),m=h9.client(async y=>{const w=JSON.parse(y.params).map(k=>({id:Xo(),key:k.key,value:k.value,enabled:k.enabled!==!1}));return n.setQuery(w),{success:!0,paramCount:w.length}}),p=d9.client(async y=>{const v=y,w=[...e.query,{id:Xo(),key:v.key,value:v.value,enabled:!0}];return n.setQuery(w),{success:!0,added:{key:v.key,value:v.value}}}),_=p9.client(async y=>{const v=y;let w;switch(v.type){case"none":w={type:"none"};break;case"json":w={type:"json",content:Q$(v.content||"")};break;case"raw":w={type:"raw",content:v.content||""};break;case"form-urlencoded":{w={type:"form-urlencoded",data:v.content?JSON.parse(v.content).map(S=>({id:Xo(),key:S.key,value:S.value,enabled:S.enabled!==!1})):[]};break}default:w={type:"none"}}return n.setBody(w),{success:!0,bodyType:v.type}});return e5(i,a,l,c,f,h,m,p,_)}function g9(){return`You are an AI assistant helping users build and test HTTP requests. You have access to tools to view and modify the current request configuration.

Your capabilities:
- View the current request (method, URL, headers, query params, body)
- Modify any part of the request
- View and analyze responses from executed requests

Guidelines:
- When the user asks to create or modify a request, use the appropriate tools
- When analyzing responses, look for errors, unexpected data, or issues
- Be concise but helpful in your explanations
- If the user's request is ambiguous, ask for clarification
- When setting headers or params, preserve existing ones unless the user asks to replace them
- Format your responses using Markdown: use **bold**, \`code\`, code blocks with language tags, lists, and headers when appropriate

The user is working with an HTTP client similar to Postman or Insomnia.`}const K1={name:"Request Assistant",placeholder:"Ask about your request..."};const y9=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,_9=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,b9={};function Z1(t,e){return(b9.jsx?_9:y9).test(t)}var Ca={},pm,Q1;function v9(){if(Q1)return pm;Q1=1;var t=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,e=/\n/g,n=/^\s*/,r=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,i=/^:\s*/,a=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,l=/^[;\s]*/,c=/^\s+|\s+$/g,f=`
`,h="/",m="*",p="",_="comment",y="declaration";function v(k,S){if(typeof k!="string")throw new TypeError("First argument must be a string");if(!k)return[];S=S||{};var R=1,T=1;function z(V){var G=V.match(e);G&&(R+=G.length);var B=V.lastIndexOf(f);T=~B?V.length-B:T+V.length}function L(){var V={line:R,column:T};return function(G){return G.position=new E(V),F(),G}}function E(V){this.start=V,this.end={line:R,column:T},this.source=S.source}E.prototype.content=k;function M(V){var G=new Error(S.source+":"+R+":"+T+": "+V);if(G.reason=V,G.filename=S.source,G.line=R,G.column=T,G.source=k,!S.silent)throw G}function $(V){var G=V.exec(k);if(G){var B=G[0];return z(B),k=k.slice(B.length),G}}function F(){$(n)}function P(V){var G;for(V=V||[];G=Z();)G!==!1&&V.push(G);return V}function Z(){var V=L();if(!(h!=k.charAt(0)||m!=k.charAt(1))){for(var G=2;p!=k.charAt(G)&&(m!=k.charAt(G)||h!=k.charAt(G+1));)++G;if(G+=2,p===k.charAt(G-1))return M("End of comment missing");var B=k.slice(2,G-2);return T+=2,z(B),k=k.slice(G),T+=2,V({type:_,comment:B})}}function se(){var V=L(),G=$(r);if(G){if(Z(),!$(i))return M("property missing ':'");var B=$(a),K=V({type:y,property:w(G[0].replace(t,p)),value:B?w(B[0].replace(t,p)):p});return $(l),K}}function me(){var V=[];P(V);for(var G;G=se();)G!==!1&&(V.push(G),P(V));return V}return F(),me()}function w(k){return k?k.replace(c,p):p}return pm=v,pm}var J1;function w9(){if(J1)return Ca;J1=1;var t=Ca&&Ca.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ca,"__esModule",{value:!0}),Ca.default=n;const e=t(v9());function n(r,i){let a=null;if(!r||typeof r!="string")return a;const l=(0,e.default)(r),c=typeof i=="function";return l.forEach(f=>{if(f.type!=="declaration")return;const{property:h,value:m}=f;c?i(h,m,f):m&&(a=a||{},a[h]=m)}),a}return Ca}var Wo={},Y1;function x9(){if(Y1)return Wo;Y1=1,Object.defineProperty(Wo,"__esModule",{value:!0}),Wo.camelCase=void 0;var t=/^--[a-zA-Z0-9_-]+$/,e=/-([a-z])/g,n=/^[^-]+$/,r=/^-(webkit|moz|ms|o|khtml)-/,i=/^-(ms)-/,a=function(h){return!h||n.test(h)||t.test(h)},l=function(h,m){return m.toUpperCase()},c=function(h,m){return"".concat(m,"-")},f=function(h,m){return m===void 0&&(m={}),a(h)?h:(h=h.toLowerCase(),m.reactCompat?h=h.replace(i,c):h=h.replace(r,c),h.replace(e,l))};return Wo.camelCase=f,Wo}var el,X1;function S9(){if(X1)return el;X1=1;var t=el&&el.__importDefault||function(i){return i&&i.__esModule?i:{default:i}},e=t(w9()),n=x9();function r(i,a){var l={};return!i||typeof i!="string"||(0,e.default)(i,function(c,f){c&&f&&(l[(0,n.camelCase)(c,a)]=f)}),l}return r.default=r,el=r,el}var E9=S9();const k9=DS(E9),yT=_T("end"),t0=_T("start");function _T(t){return e;function e(n){const r=n&&n.position&&n.position[t]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function C9(t){const e=t0(t),n=yT(t);if(e&&n)return{start:e,end:n}}function Cl(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?W1(t.position):"start"in t||"end"in t?W1(t):"line"in t||"column"in t?Mg(t):""}function Mg(t){return eS(t&&t.line)+":"+eS(t&&t.column)}function W1(t){return Mg(t&&t.start)+"-"+Mg(t&&t.end)}function eS(t){return t&&typeof t=="number"?t:1}class yn extends Error{constructor(e,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",a={},l=!1;if(n&&("line"in n&&"column"in n?a={place:n}:"start"in n&&"end"in n?a={place:n}:"type"in n?a={ancestors:[n],place:n.position}:a={...n}),typeof e=="string"?i=e:!a.cause&&e&&(l=!0,i=e.message,a.cause=e),!a.ruleId&&!a.source&&typeof r=="string"){const f=r.indexOf(":");f===-1?a.ruleId=r:(a.source=r.slice(0,f),a.ruleId=r.slice(f+1))}if(!a.place&&a.ancestors&&a.ancestors){const f=a.ancestors[a.ancestors.length-1];f&&(a.place=f.position)}const c=a.place&&"start"in a.place?a.place.start:a.place;this.ancestors=a.ancestors||void 0,this.cause=a.cause||void 0,this.column=c?c.column:void 0,this.fatal=void 0,this.file="",this.message=i,this.line=c?c.line:void 0,this.name=Cl(a.place)||"1:1",this.place=a.place||void 0,this.reason=this.message,this.ruleId=a.ruleId||void 0,this.source=a.source||void 0,this.stack=l&&a.cause&&typeof a.cause.stack=="string"?a.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}yn.prototype.file="";yn.prototype.name="";yn.prototype.reason="";yn.prototype.message="";yn.prototype.stack="";yn.prototype.column=void 0;yn.prototype.line=void 0;yn.prototype.ancestors=void 0;yn.prototype.cause=void 0;yn.prototype.fatal=void 0;yn.prototype.place=void 0;yn.prototype.ruleId=void 0;yn.prototype.source=void 0;const n0={}.hasOwnProperty,T9=new Map,A9=/[A-Z]/g,R9=new Set(["table","tbody","thead","tfoot","tr"]),O9=new Set(["td","th"]),bT="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function I9(t,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=e.filePath||void 0;let r;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=B9(n,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=j9(n,e.jsx,e.jsxs)}const i={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:r,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?Jl:FE,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},a=vT(i,t,void 0);return a&&typeof a!="string"?a:i.create(t,i.Fragment,{children:a||void 0},void 0)}function vT(t,e,n){if(e.type==="element")return N9(t,e,n);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return D9(t,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return L9(t,e,n);if(e.type==="mdxjsEsm")return M9(t,e);if(e.type==="root")return z9(t,e,n);if(e.type==="text")return P9(t,e)}function N9(t,e,n){const r=t.schema;let i=r;e.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=Jl,t.schema=i),t.ancestors.push(e);const a=xT(t,e.tagName,!1),l=U9(t,e);let c=i0(t,e);return R9.has(e.tagName)&&(c=c.filter(function(f){return typeof f=="string"?!Qf(f):!0})),wT(t,l,a,e),r0(l,c),t.ancestors.pop(),t.schema=r,t.create(e,a,l,n)}function D9(t,e){if(e.data&&e.data.estree&&t.evaluater){const r=e.data.estree.body[0];return r.type,t.evaluater.evaluateExpression(r.expression)}ql(t,e.position)}function M9(t,e){if(e.data&&e.data.estree&&t.evaluater)return t.evaluater.evaluateProgram(e.data.estree);ql(t,e.position)}function L9(t,e,n){const r=t.schema;let i=r;e.name==="svg"&&r.space==="html"&&(i=Jl,t.schema=i),t.ancestors.push(e);const a=e.name===null?t.Fragment:xT(t,e.name,!0),l=$9(t,e),c=i0(t,e);return wT(t,l,a,e),r0(l,c),t.ancestors.pop(),t.schema=r,t.create(e,a,l,n)}function z9(t,e,n){const r={};return r0(r,i0(t,e)),t.create(e,t.Fragment,r,n)}function P9(t,e){return e.value}function wT(t,e,n,r){typeof n!="string"&&n!==t.Fragment&&t.passNode&&(e.node=r)}function r0(t,e){if(e.length>0){const n=e.length>1?e:e[0];n&&(t.children=n)}}function j9(t,e,n){return r;function r(i,a,l,c){const h=Array.isArray(l.children)?n:e;return c?h(a,l,c):h(a,l)}}function B9(t,e){return n;function n(r,i,a,l){const c=Array.isArray(a.children),f=t0(r);return e(i,a,l,c,{columnNumber:f?f.column-1:void 0,fileName:t,lineNumber:f?f.line:void 0},void 0)}}function U9(t,e){const n={};let r,i;for(i in e.properties)if(i!=="children"&&n0.call(e.properties,i)){const a=q9(t,i,e.properties[i]);if(a){const[l,c]=a;t.tableCellAlignToStyle&&l==="align"&&typeof c=="string"&&O9.has(e.tagName)?r=c:n[l]=c}}if(r){const a=n.style||(n.style={});a[t.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function $9(t,e){const n={};for(const r of e.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&t.evaluater){const a=r.data.estree.body[0];a.type;const l=a.expression;l.type;const c=l.properties[0];c.type,Object.assign(n,t.evaluater.evaluateExpression(c.argument))}else ql(t,e.position);else{const i=r.name;let a;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&t.evaluater){const c=r.value.data.estree.body[0];c.type,a=t.evaluater.evaluateExpression(c.expression)}else ql(t,e.position);else a=r.value===null?!0:r.value;n[i]=a}return n}function i0(t,e){const n=[];let r=-1;const i=t.passKeys?new Map:T9;for(;++r<e.children.length;){const a=e.children[r];let l;if(t.passKeys){const f=a.type==="element"?a.tagName:a.type==="mdxJsxFlowElement"||a.type==="mdxJsxTextElement"?a.name:void 0;if(f){const h=i.get(f)||0;l=f+"-"+h,i.set(f,h+1)}}const c=vT(t,a,l);c!==void 0&&n.push(c)}return n}function q9(t,e,n){const r=qE(t.schema,e);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?HE(n):GE(n)),r.property==="style"){let i=typeof n=="object"?n:F9(t,String(n));return t.stylePropertyNameCase==="css"&&(i=V9(i)),["style",i]}return[t.elementAttributeNameCase==="react"&&r.space?z4[r.property]||r.property:r.attribute,n]}}function F9(t,e){try{return k9(e,{reactCompat:!0})}catch(n){if(t.ignoreInvalidStyle)return{};const r=n,i=new yn("Cannot parse `style` attribute",{ancestors:t.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw i.file=t.filePath||void 0,i.url=bT+"#cannot-parse-style-attribute",i}}function xT(t,e,n){let r;if(!n)r={type:"Literal",value:e};else if(e.includes(".")){const i=e.split(".");let a=-1,l;for(;++a<i.length;){const c=Z1(i[a])?{type:"Identifier",name:i[a]}:{type:"Literal",value:i[a]};l=l?{type:"MemberExpression",object:l,property:c,computed:!!(a&&c.type==="Literal"),optional:!1}:c}r=l}else r=Z1(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(r.type==="Literal"){const i=r.value;return n0.call(t.components,i)?t.components[i]:i}if(t.evaluater)return t.evaluater.evaluateExpression(r);ql(t)}function ql(t,e){const n=new yn("Cannot handle MDX estrees without `createEvaluater`",{ancestors:t.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=t.filePath||void 0,n.url=bT+"#cannot-handle-mdx-estrees-without-createevaluater",n}function V9(t){const e={};let n;for(n in t)n0.call(t,n)&&(e[H9(n)]=t[n]);return e}function H9(t){let e=t.replace(A9,G9);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function G9(t){return"-"+t.toLowerCase()}const mm={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},K9={};function s0(t,e){const n=K9,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return ST(t,r,i)}function ST(t,e,n){if(Z9(t)){if("value"in t)return t.type==="html"&&!n?"":t.value;if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return tS(t.children,e,n)}return Array.isArray(t)?tS(t,e,n):""}function tS(t,e,n){const r=[];let i=-1;for(;++i<t.length;)r[i]=ST(t[i],e,n);return r.join("")}function Z9(t){return!!(t&&typeof t=="object")}const nS=document.createElement("i");function a0(t){const e="&"+t+";";nS.innerHTML=e;const n=nS.textContent;return n.charCodeAt(n.length-1)===59&&t!=="semi"||n===e?!1:n}function Wn(t,e,n,r){const i=t.length;let a=0,l;if(e<0?e=-e>i?0:i+e:e=e>i?i:e,n=n>0?n:0,r.length<1e4)l=Array.from(r),l.unshift(e,n),t.splice(...l);else for(n&&t.splice(e,n);a<r.length;)l=r.slice(a,a+1e4),l.unshift(e,0),t.splice(...l),a+=1e4,e+=1e4}function mr(t,e){return t.length>0?(Wn(t,t.length,0,e),t):e}const rS={}.hasOwnProperty;function ET(t){const e={};let n=-1;for(;++n<t.length;)Q9(e,t[n]);return e}function Q9(t,e){let n;for(n in e){const i=(rS.call(t,n)?t[n]:void 0)||(t[n]={}),a=e[n];let l;if(a)for(l in a){rS.call(i,l)||(i[l]=[]);const c=a[l];J9(i[l],Array.isArray(c)?c:c?[c]:[])}}}function J9(t,e){let n=-1;const r=[];for(;++n<e.length;)(e[n].add==="after"?t:r).push(e[n]);Wn(t,0,0,r)}function kT(t,e){const n=Number.parseInt(t,e);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function Cr(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const En=es(/[A-Za-z]/),gn=es(/[\dA-Za-z]/),Y9=es(/[#-'*+\--9=?A-Z^-~]/);function Uf(t){return t!==null&&(t<32||t===127)}const Lg=es(/\d/),X9=es(/[\dA-Fa-f]/),W9=es(/[!-/:-@[-`{-~]/);function Re(t){return t!==null&&t<-2}function ut(t){return t!==null&&(t<0||t===32)}function Fe(t){return t===-2||t===-1||t===32}const mh=es(new RegExp("\\p{P}|\\p{S}","u")),Ms=es(/\s/);function es(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function eo(t){const e=[];let n=-1,r=0,i=0;for(;++n<t.length;){const a=t.charCodeAt(n);let l="";if(a===37&&gn(t.charCodeAt(n+1))&&gn(t.charCodeAt(n+2)))i=2;else if(a<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(a))||(l=String.fromCharCode(a));else if(a>55295&&a<57344){const c=t.charCodeAt(n+1);a<56320&&c>56319&&c<57344?(l=String.fromCharCode(a,c),i=1):l=""}else l=String.fromCharCode(a);l&&(e.push(t.slice(r,n),encodeURIComponent(l)),r=n+i+1,l=""),i&&(n+=i,i=0)}return e.join("")+t.slice(r)}function Ze(t,e,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let a=0;return l;function l(f){return Fe(f)?(t.enter(n),c(f)):e(f)}function c(f){return Fe(f)&&a++<i?(t.consume(f),c):(t.exit(n),e(f))}}const eq={tokenize:tq};function tq(t){const e=t.attempt(this.parser.constructs.contentInitial,r,i);let n;return e;function r(c){if(c===null){t.consume(c);return}return t.enter("lineEnding"),t.consume(c),t.exit("lineEnding"),Ze(t,e,"linePrefix")}function i(c){return t.enter("paragraph"),a(c)}function a(c){const f=t.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=f),n=f,l(c)}function l(c){if(c===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(c);return}return Re(c)?(t.consume(c),t.exit("chunkText"),a):(t.consume(c),l)}}const nq={tokenize:rq},iS={tokenize:iq};function rq(t){const e=this,n=[];let r=0,i,a,l;return c;function c(T){if(r<n.length){const z=n[r];return e.containerState=z[1],t.attempt(z[0].continuation,f,h)(T)}return h(T)}function f(T){if(r++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,i&&R();const z=e.events.length;let L=z,E;for(;L--;)if(e.events[L][0]==="exit"&&e.events[L][1].type==="chunkFlow"){E=e.events[L][1].end;break}S(r);let M=z;for(;M<e.events.length;)e.events[M][1].end={...E},M++;return Wn(e.events,L+1,0,e.events.slice(z)),e.events.length=M,h(T)}return c(T)}function h(T){if(r===n.length){if(!i)return _(T);if(i.currentConstruct&&i.currentConstruct.concrete)return v(T);e.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return e.containerState={},t.check(iS,m,p)(T)}function m(T){return i&&R(),S(r),_(T)}function p(T){return e.parser.lazy[e.now().line]=r!==n.length,l=e.now().offset,v(T)}function _(T){return e.containerState={},t.attempt(iS,y,v)(T)}function y(T){return r++,n.push([e.currentConstruct,e.containerState]),_(T)}function v(T){if(T===null){i&&R(),S(0),t.consume(T);return}return i=i||e.parser.flow(e.now()),t.enter("chunkFlow",{_tokenizer:i,contentType:"flow",previous:a}),w(T)}function w(T){if(T===null){k(t.exit("chunkFlow"),!0),S(0),t.consume(T);return}return Re(T)?(t.consume(T),k(t.exit("chunkFlow")),r=0,e.interrupt=void 0,c):(t.consume(T),w)}function k(T,z){const L=e.sliceStream(T);if(z&&L.push(null),T.previous=a,a&&(a.next=T),a=T,i.defineSkip(T.start),i.write(L),e.parser.lazy[T.start.line]){let E=i.events.length;for(;E--;)if(i.events[E][1].start.offset<l&&(!i.events[E][1].end||i.events[E][1].end.offset>l))return;const M=e.events.length;let $=M,F,P;for(;$--;)if(e.events[$][0]==="exit"&&e.events[$][1].type==="chunkFlow"){if(F){P=e.events[$][1].end;break}F=!0}for(S(r),E=M;E<e.events.length;)e.events[E][1].end={...P},E++;Wn(e.events,$+1,0,e.events.slice(M)),e.events.length=E}}function S(T){let z=n.length;for(;z-- >T;){const L=n[z];e.containerState=L[1],L[0].exit.call(e,t)}n.length=T}function R(){i.write([null]),a=void 0,i=void 0,e.containerState._closeFlow=void 0}}function iq(t,e,n){return Ze(t,t.attempt(this.parser.constructs.document,e,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Ha(t){if(t===null||ut(t)||Ms(t))return 1;if(mh(t))return 2}function gh(t,e,n){const r=[];let i=-1;for(;++i<t.length;){const a=t[i].resolveAll;a&&!r.includes(a)&&(e=a(e,n),r.push(a))}return e}const zg={name:"attention",resolveAll:sq,tokenize:aq};function sq(t,e){let n=-1,r,i,a,l,c,f,h,m;for(;++n<t.length;)if(t[n][0]==="enter"&&t[n][1].type==="attentionSequence"&&t[n][1]._close){for(r=n;r--;)if(t[r][0]==="exit"&&t[r][1].type==="attentionSequence"&&t[r][1]._open&&e.sliceSerialize(t[r][1]).charCodeAt(0)===e.sliceSerialize(t[n][1]).charCodeAt(0)){if((t[r][1]._close||t[n][1]._open)&&(t[n][1].end.offset-t[n][1].start.offset)%3&&!((t[r][1].end.offset-t[r][1].start.offset+t[n][1].end.offset-t[n][1].start.offset)%3))continue;f=t[r][1].end.offset-t[r][1].start.offset>1&&t[n][1].end.offset-t[n][1].start.offset>1?2:1;const p={...t[r][1].end},_={...t[n][1].start};sS(p,-f),sS(_,f),l={type:f>1?"strongSequence":"emphasisSequence",start:p,end:{...t[r][1].end}},c={type:f>1?"strongSequence":"emphasisSequence",start:{...t[n][1].start},end:_},a={type:f>1?"strongText":"emphasisText",start:{...t[r][1].end},end:{...t[n][1].start}},i={type:f>1?"strong":"emphasis",start:{...l.start},end:{...c.end}},t[r][1].end={...l.start},t[n][1].start={...c.end},h=[],t[r][1].end.offset-t[r][1].start.offset&&(h=mr(h,[["enter",t[r][1],e],["exit",t[r][1],e]])),h=mr(h,[["enter",i,e],["enter",l,e],["exit",l,e],["enter",a,e]]),h=mr(h,gh(e.parser.constructs.insideSpan.null,t.slice(r+1,n),e)),h=mr(h,[["exit",a,e],["enter",c,e],["exit",c,e],["exit",i,e]]),t[n][1].end.offset-t[n][1].start.offset?(m=2,h=mr(h,[["enter",t[n][1],e],["exit",t[n][1],e]])):m=0,Wn(t,r-1,n-r+3,h),n=r+h.length-m-2;break}}for(n=-1;++n<t.length;)t[n][1].type==="attentionSequence"&&(t[n][1].type="data");return t}function aq(t,e){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=Ha(r);let a;return l;function l(f){return a=f,t.enter("attentionSequence"),c(f)}function c(f){if(f===a)return t.consume(f),c;const h=t.exit("attentionSequence"),m=Ha(f),p=!m||m===2&&i||n.includes(f),_=!i||i===2&&m||n.includes(r);return h._open=!!(a===42?p:p&&(i||!_)),h._close=!!(a===42?_:_&&(m||!p)),e(f)}}function sS(t,e){t.column+=e,t.offset+=e,t._bufferIndex+=e}const oq={name:"autolink",tokenize:lq};function lq(t,e,n){let r=0;return i;function i(y){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(y),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),a}function a(y){return En(y)?(t.consume(y),l):y===64?n(y):h(y)}function l(y){return y===43||y===45||y===46||gn(y)?(r=1,c(y)):h(y)}function c(y){return y===58?(t.consume(y),r=0,f):(y===43||y===45||y===46||gn(y))&&r++<32?(t.consume(y),c):(r=0,h(y))}function f(y){return y===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(y),t.exit("autolinkMarker"),t.exit("autolink"),e):y===null||y===32||y===60||Uf(y)?n(y):(t.consume(y),f)}function h(y){return y===64?(t.consume(y),m):Y9(y)?(t.consume(y),h):n(y)}function m(y){return gn(y)?p(y):n(y)}function p(y){return y===46?(t.consume(y),r=0,m):y===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(y),t.exit("autolinkMarker"),t.exit("autolink"),e):_(y)}function _(y){if((y===45||gn(y))&&r++<63){const v=y===45?_:p;return t.consume(y),v}return n(y)}}const eu={partial:!0,tokenize:uq};function uq(t,e,n){return r;function r(a){return Fe(a)?Ze(t,i,"linePrefix")(a):i(a)}function i(a){return a===null||Re(a)?e(a):n(a)}}const CT={continuation:{tokenize:fq},exit:hq,name:"blockQuote",tokenize:cq};function cq(t,e,n){const r=this;return i;function i(l){if(l===62){const c=r.containerState;return c.open||(t.enter("blockQuote",{_container:!0}),c.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(l),t.exit("blockQuoteMarker"),a}return n(l)}function a(l){return Fe(l)?(t.enter("blockQuotePrefixWhitespace"),t.consume(l),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),e):(t.exit("blockQuotePrefix"),e(l))}}function fq(t,e,n){const r=this;return i;function i(l){return Fe(l)?Ze(t,a,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l):a(l)}function a(l){return t.attempt(CT,e,n)(l)}}function hq(t){t.exit("blockQuote")}const TT={name:"characterEscape",tokenize:dq};function dq(t,e,n){return r;function r(a){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(a),t.exit("escapeMarker"),i}function i(a){return W9(a)?(t.enter("characterEscapeValue"),t.consume(a),t.exit("characterEscapeValue"),t.exit("characterEscape"),e):n(a)}}const AT={name:"characterReference",tokenize:pq};function pq(t,e,n){const r=this;let i=0,a,l;return c;function c(p){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(p),t.exit("characterReferenceMarker"),f}function f(p){return p===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(p),t.exit("characterReferenceMarkerNumeric"),h):(t.enter("characterReferenceValue"),a=31,l=gn,m(p))}function h(p){return p===88||p===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(p),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),a=6,l=X9,m):(t.enter("characterReferenceValue"),a=7,l=Lg,m(p))}function m(p){if(p===59&&i){const _=t.exit("characterReferenceValue");return l===gn&&!a0(r.sliceSerialize(_))?n(p):(t.enter("characterReferenceMarker"),t.consume(p),t.exit("characterReferenceMarker"),t.exit("characterReference"),e)}return l(p)&&i++<a?(t.consume(p),m):n(p)}}const aS={partial:!0,tokenize:gq},oS={concrete:!0,name:"codeFenced",tokenize:mq};function mq(t,e,n){const r=this,i={partial:!0,tokenize:L};let a=0,l=0,c;return f;function f(E){return h(E)}function h(E){const M=r.events[r.events.length-1];return a=M&&M[1].type==="linePrefix"?M[2].sliceSerialize(M[1],!0).length:0,c=E,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),m(E)}function m(E){return E===c?(l++,t.consume(E),m):l<3?n(E):(t.exit("codeFencedFenceSequence"),Fe(E)?Ze(t,p,"whitespace")(E):p(E))}function p(E){return E===null||Re(E)?(t.exit("codeFencedFence"),r.interrupt?e(E):t.check(aS,w,z)(E)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),_(E))}function _(E){return E===null||Re(E)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),p(E)):Fe(E)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),Ze(t,y,"whitespace")(E)):E===96&&E===c?n(E):(t.consume(E),_)}function y(E){return E===null||Re(E)?p(E):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),v(E))}function v(E){return E===null||Re(E)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),p(E)):E===96&&E===c?n(E):(t.consume(E),v)}function w(E){return t.attempt(i,z,k)(E)}function k(E){return t.enter("lineEnding"),t.consume(E),t.exit("lineEnding"),S}function S(E){return a>0&&Fe(E)?Ze(t,R,"linePrefix",a+1)(E):R(E)}function R(E){return E===null||Re(E)?t.check(aS,w,z)(E):(t.enter("codeFlowValue"),T(E))}function T(E){return E===null||Re(E)?(t.exit("codeFlowValue"),R(E)):(t.consume(E),T)}function z(E){return t.exit("codeFenced"),e(E)}function L(E,M,$){let F=0;return P;function P(G){return E.enter("lineEnding"),E.consume(G),E.exit("lineEnding"),Z}function Z(G){return E.enter("codeFencedFence"),Fe(G)?Ze(E,se,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(G):se(G)}function se(G){return G===c?(E.enter("codeFencedFenceSequence"),me(G)):$(G)}function me(G){return G===c?(F++,E.consume(G),me):F>=l?(E.exit("codeFencedFenceSequence"),Fe(G)?Ze(E,V,"whitespace")(G):V(G)):$(G)}function V(G){return G===null||Re(G)?(E.exit("codeFencedFence"),M(G)):$(G)}}}function gq(t,e,n){const r=this;return i;function i(l){return l===null?n(l):(t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),a)}function a(l){return r.parser.lazy[r.now().line]?n(l):e(l)}}const gm={name:"codeIndented",tokenize:_q},yq={partial:!0,tokenize:bq};function _q(t,e,n){const r=this;return i;function i(h){return t.enter("codeIndented"),Ze(t,a,"linePrefix",5)(h)}function a(h){const m=r.events[r.events.length-1];return m&&m[1].type==="linePrefix"&&m[2].sliceSerialize(m[1],!0).length>=4?l(h):n(h)}function l(h){return h===null?f(h):Re(h)?t.attempt(yq,l,f)(h):(t.enter("codeFlowValue"),c(h))}function c(h){return h===null||Re(h)?(t.exit("codeFlowValue"),l(h)):(t.consume(h),c)}function f(h){return t.exit("codeIndented"),e(h)}}function bq(t,e,n){const r=this;return i;function i(l){return r.parser.lazy[r.now().line]?n(l):Re(l)?(t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),i):Ze(t,a,"linePrefix",5)(l)}function a(l){const c=r.events[r.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?e(l):Re(l)?i(l):n(l)}}const vq={name:"codeText",previous:xq,resolve:wq,tokenize:Sq};function wq(t){let e=t.length-4,n=3,r,i;if((t[n][1].type==="lineEnding"||t[n][1].type==="space")&&(t[e][1].type==="lineEnding"||t[e][1].type==="space")){for(r=n;++r<e;)if(t[r][1].type==="codeTextData"){t[n][1].type="codeTextPadding",t[e][1].type="codeTextPadding",n+=2,e-=2;break}}for(r=n-1,e++;++r<=e;)i===void 0?r!==e&&t[r][1].type!=="lineEnding"&&(i=r):(r===e||t[r][1].type==="lineEnding")&&(t[i][1].type="codeTextData",r!==i+2&&(t[i][1].end=t[r-1][1].end,t.splice(i+2,r-i-2),e-=r-i-2,r=i+2),i=void 0);return t}function xq(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function Sq(t,e,n){let r=0,i,a;return l;function l(p){return t.enter("codeText"),t.enter("codeTextSequence"),c(p)}function c(p){return p===96?(t.consume(p),r++,c):(t.exit("codeTextSequence"),f(p))}function f(p){return p===null?n(p):p===32?(t.enter("space"),t.consume(p),t.exit("space"),f):p===96?(a=t.enter("codeTextSequence"),i=0,m(p)):Re(p)?(t.enter("lineEnding"),t.consume(p),t.exit("lineEnding"),f):(t.enter("codeTextData"),h(p))}function h(p){return p===null||p===32||p===96||Re(p)?(t.exit("codeTextData"),f(p)):(t.consume(p),h)}function m(p){return p===96?(t.consume(p),i++,m):i===r?(t.exit("codeTextSequence"),t.exit("codeText"),e(p)):(a.type="codeTextData",h(p))}}class Eq{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(e,r):e>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(e,n,r){const i=n||0;this.setCursor(Math.trunc(e));const a=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&tl(this.left,r),a.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),tl(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),tl(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const n=this.left.splice(e,Number.POSITIVE_INFINITY);tl(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);tl(this.left,n.reverse())}}}function tl(t,e){let n=0;if(e.length<1e4)t.push(...e);else for(;n<e.length;)t.push(...e.slice(n,n+1e4)),n+=1e4}function RT(t){const e={};let n=-1,r,i,a,l,c,f,h;const m=new Eq(t);for(;++n<m.length;){for(;n in e;)n=e[n];if(r=m.get(n),n&&r[1].type==="chunkFlow"&&m.get(n-1)[1].type==="listItemPrefix"&&(f=r[1]._tokenizer.events,a=0,a<f.length&&f[a][1].type==="lineEndingBlank"&&(a+=2),a<f.length&&f[a][1].type==="content"))for(;++a<f.length&&f[a][1].type!=="content";)f[a][1].type==="chunkText"&&(f[a][1]._isInFirstContentOfListItem=!0,a++);if(r[0]==="enter")r[1].contentType&&(Object.assign(e,kq(m,n)),n=e[n],h=!0);else if(r[1]._container){for(a=n,i=void 0;a--;)if(l=m.get(a),l[1].type==="lineEnding"||l[1].type==="lineEndingBlank")l[0]==="enter"&&(i&&(m.get(i)[1].type="lineEndingBlank"),l[1].type="lineEnding",i=a);else if(!(l[1].type==="linePrefix"||l[1].type==="listItemIndent"))break;i&&(r[1].end={...m.get(i)[1].start},c=m.slice(i,n),c.unshift(r),m.splice(i,n-i+1,c))}}return Wn(t,0,Number.POSITIVE_INFINITY,m.slice(0)),!h}function kq(t,e){const n=t.get(e)[1],r=t.get(e)[2];let i=e-1;const a=[];let l=n._tokenizer;l||(l=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(l._contentTypeTextTrailing=!0));const c=l.events,f=[],h={};let m,p,_=-1,y=n,v=0,w=0;const k=[w];for(;y;){for(;t.get(++i)[1]!==y;);a.push(i),y._tokenizer||(m=r.sliceStream(y),y.next||m.push(null),p&&l.defineSkip(y.start),y._isInFirstContentOfListItem&&(l._gfmTasklistFirstContentOfListItem=!0),l.write(m),y._isInFirstContentOfListItem&&(l._gfmTasklistFirstContentOfListItem=void 0)),p=y,y=y.next}for(y=n;++_<c.length;)c[_][0]==="exit"&&c[_-1][0]==="enter"&&c[_][1].type===c[_-1][1].type&&c[_][1].start.line!==c[_][1].end.line&&(w=_+1,k.push(w),y._tokenizer=void 0,y.previous=void 0,y=y.next);for(l.events=[],y?(y._tokenizer=void 0,y.previous=void 0):k.pop(),_=k.length;_--;){const S=c.slice(k[_],k[_+1]),R=a.pop();f.push([R,R+S.length-1]),t.splice(R,2,S)}for(f.reverse(),_=-1;++_<f.length;)h[v+f[_][0]]=v+f[_][1],v+=f[_][1]-f[_][0]-1;return h}const Cq={resolve:Aq,tokenize:Rq},Tq={partial:!0,tokenize:Oq};function Aq(t){return RT(t),t}function Rq(t,e){let n;return r;function r(c){return t.enter("content"),n=t.enter("chunkContent",{contentType:"content"}),i(c)}function i(c){return c===null?a(c):Re(c)?t.check(Tq,l,a)(c):(t.consume(c),i)}function a(c){return t.exit("chunkContent"),t.exit("content"),e(c)}function l(c){return t.consume(c),t.exit("chunkContent"),n.next=t.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function Oq(t,e,n){const r=this;return i;function i(l){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),Ze(t,a,"linePrefix")}function a(l){if(l===null||Re(l))return n(l);const c=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?e(l):t.interrupt(r.parser.constructs.flow,n,e)(l)}}function OT(t,e,n,r,i,a,l,c,f){const h=f||Number.POSITIVE_INFINITY;let m=0;return p;function p(S){return S===60?(t.enter(r),t.enter(i),t.enter(a),t.consume(S),t.exit(a),_):S===null||S===32||S===41||Uf(S)?n(S):(t.enter(r),t.enter(l),t.enter(c),t.enter("chunkString",{contentType:"string"}),w(S))}function _(S){return S===62?(t.enter(a),t.consume(S),t.exit(a),t.exit(i),t.exit(r),e):(t.enter(c),t.enter("chunkString",{contentType:"string"}),y(S))}function y(S){return S===62?(t.exit("chunkString"),t.exit(c),_(S)):S===null||S===60||Re(S)?n(S):(t.consume(S),S===92?v:y)}function v(S){return S===60||S===62||S===92?(t.consume(S),y):y(S)}function w(S){return!m&&(S===null||S===41||ut(S))?(t.exit("chunkString"),t.exit(c),t.exit(l),t.exit(r),e(S)):m<h&&S===40?(t.consume(S),m++,w):S===41?(t.consume(S),m--,w):S===null||S===32||S===40||Uf(S)?n(S):(t.consume(S),S===92?k:w)}function k(S){return S===40||S===41||S===92?(t.consume(S),w):w(S)}}function IT(t,e,n,r,i,a){const l=this;let c=0,f;return h;function h(y){return t.enter(r),t.enter(i),t.consume(y),t.exit(i),t.enter(a),m}function m(y){return c>999||y===null||y===91||y===93&&!f||y===94&&!c&&"_hiddenFootnoteSupport"in l.parser.constructs?n(y):y===93?(t.exit(a),t.enter(i),t.consume(y),t.exit(i),t.exit(r),e):Re(y)?(t.enter("lineEnding"),t.consume(y),t.exit("lineEnding"),m):(t.enter("chunkString",{contentType:"string"}),p(y))}function p(y){return y===null||y===91||y===93||Re(y)||c++>999?(t.exit("chunkString"),m(y)):(t.consume(y),f||(f=!Fe(y)),y===92?_:p)}function _(y){return y===91||y===92||y===93?(t.consume(y),c++,p):p(y)}}function NT(t,e,n,r,i,a){let l;return c;function c(_){return _===34||_===39||_===40?(t.enter(r),t.enter(i),t.consume(_),t.exit(i),l=_===40?41:_,f):n(_)}function f(_){return _===l?(t.enter(i),t.consume(_),t.exit(i),t.exit(r),e):(t.enter(a),h(_))}function h(_){return _===l?(t.exit(a),f(l)):_===null?n(_):Re(_)?(t.enter("lineEnding"),t.consume(_),t.exit("lineEnding"),Ze(t,h,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),m(_))}function m(_){return _===l||_===null||Re(_)?(t.exit("chunkString"),h(_)):(t.consume(_),_===92?p:m)}function p(_){return _===l||_===92?(t.consume(_),m):m(_)}}function Tl(t,e){let n;return r;function r(i){return Re(i)?(t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),n=!0,r):Fe(i)?Ze(t,r,n?"linePrefix":"lineSuffix")(i):e(i)}}const Iq={name:"definition",tokenize:Dq},Nq={partial:!0,tokenize:Mq};function Dq(t,e,n){const r=this;let i;return a;function a(y){return t.enter("definition"),l(y)}function l(y){return IT.call(r,t,c,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(y)}function c(y){return i=Cr(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),y===58?(t.enter("definitionMarker"),t.consume(y),t.exit("definitionMarker"),f):n(y)}function f(y){return ut(y)?Tl(t,h)(y):h(y)}function h(y){return OT(t,m,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(y)}function m(y){return t.attempt(Nq,p,p)(y)}function p(y){return Fe(y)?Ze(t,_,"whitespace")(y):_(y)}function _(y){return y===null||Re(y)?(t.exit("definition"),r.parser.defined.push(i),e(y)):n(y)}}function Mq(t,e,n){return r;function r(c){return ut(c)?Tl(t,i)(c):n(c)}function i(c){return NT(t,a,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(c)}function a(c){return Fe(c)?Ze(t,l,"whitespace")(c):l(c)}function l(c){return c===null||Re(c)?e(c):n(c)}}const Lq={name:"hardBreakEscape",tokenize:zq};function zq(t,e,n){return r;function r(a){return t.enter("hardBreakEscape"),t.consume(a),i}function i(a){return Re(a)?(t.exit("hardBreakEscape"),e(a)):n(a)}}const Pq={name:"headingAtx",resolve:jq,tokenize:Bq};function jq(t,e){let n=t.length-2,r=3,i,a;return t[r][1].type==="whitespace"&&(r+=2),n-2>r&&t[n][1].type==="whitespace"&&(n-=2),t[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&t[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:t[r][1].start,end:t[n][1].end},a={type:"chunkText",start:t[r][1].start,end:t[n][1].end,contentType:"text"},Wn(t,r,n-r+1,[["enter",i,e],["enter",a,e],["exit",a,e],["exit",i,e]])),t}function Bq(t,e,n){let r=0;return i;function i(m){return t.enter("atxHeading"),a(m)}function a(m){return t.enter("atxHeadingSequence"),l(m)}function l(m){return m===35&&r++<6?(t.consume(m),l):m===null||ut(m)?(t.exit("atxHeadingSequence"),c(m)):n(m)}function c(m){return m===35?(t.enter("atxHeadingSequence"),f(m)):m===null||Re(m)?(t.exit("atxHeading"),e(m)):Fe(m)?Ze(t,c,"whitespace")(m):(t.enter("atxHeadingText"),h(m))}function f(m){return m===35?(t.consume(m),f):(t.exit("atxHeadingSequence"),c(m))}function h(m){return m===null||m===35||ut(m)?(t.exit("atxHeadingText"),c(m)):(t.consume(m),h)}}const Uq=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],lS=["pre","script","style","textarea"],$q={concrete:!0,name:"htmlFlow",resolveTo:Vq,tokenize:Hq},qq={partial:!0,tokenize:Kq},Fq={partial:!0,tokenize:Gq};function Vq(t){let e=t.length;for(;e--&&!(t[e][0]==="enter"&&t[e][1].type==="htmlFlow"););return e>1&&t[e-2][1].type==="linePrefix"&&(t[e][1].start=t[e-2][1].start,t[e+1][1].start=t[e-2][1].start,t.splice(e-2,2)),t}function Hq(t,e,n){const r=this;let i,a,l,c,f;return h;function h(O){return m(O)}function m(O){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(O),p}function p(O){return O===33?(t.consume(O),_):O===47?(t.consume(O),a=!0,w):O===63?(t.consume(O),i=3,r.interrupt?e:I):En(O)?(t.consume(O),l=String.fromCharCode(O),k):n(O)}function _(O){return O===45?(t.consume(O),i=2,y):O===91?(t.consume(O),i=5,c=0,v):En(O)?(t.consume(O),i=4,r.interrupt?e:I):n(O)}function y(O){return O===45?(t.consume(O),r.interrupt?e:I):n(O)}function v(O){const ie="CDATA[";return O===ie.charCodeAt(c++)?(t.consume(O),c===ie.length?r.interrupt?e:se:v):n(O)}function w(O){return En(O)?(t.consume(O),l=String.fromCharCode(O),k):n(O)}function k(O){if(O===null||O===47||O===62||ut(O)){const ie=O===47,fe=l.toLowerCase();return!ie&&!a&&lS.includes(fe)?(i=1,r.interrupt?e(O):se(O)):Uq.includes(l.toLowerCase())?(i=6,ie?(t.consume(O),S):r.interrupt?e(O):se(O)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(O):a?R(O):T(O))}return O===45||gn(O)?(t.consume(O),l+=String.fromCharCode(O),k):n(O)}function S(O){return O===62?(t.consume(O),r.interrupt?e:se):n(O)}function R(O){return Fe(O)?(t.consume(O),R):P(O)}function T(O){return O===47?(t.consume(O),P):O===58||O===95||En(O)?(t.consume(O),z):Fe(O)?(t.consume(O),T):P(O)}function z(O){return O===45||O===46||O===58||O===95||gn(O)?(t.consume(O),z):L(O)}function L(O){return O===61?(t.consume(O),E):Fe(O)?(t.consume(O),L):T(O)}function E(O){return O===null||O===60||O===61||O===62||O===96?n(O):O===34||O===39?(t.consume(O),f=O,M):Fe(O)?(t.consume(O),E):$(O)}function M(O){return O===f?(t.consume(O),f=null,F):O===null||Re(O)?n(O):(t.consume(O),M)}function $(O){return O===null||O===34||O===39||O===47||O===60||O===61||O===62||O===96||ut(O)?L(O):(t.consume(O),$)}function F(O){return O===47||O===62||Fe(O)?T(O):n(O)}function P(O){return O===62?(t.consume(O),Z):n(O)}function Z(O){return O===null||Re(O)?se(O):Fe(O)?(t.consume(O),Z):n(O)}function se(O){return O===45&&i===2?(t.consume(O),B):O===60&&i===1?(t.consume(O),K):O===62&&i===4?(t.consume(O),N):O===63&&i===3?(t.consume(O),I):O===93&&i===5?(t.consume(O),Q):Re(O)&&(i===6||i===7)?(t.exit("htmlFlowData"),t.check(qq,q,me)(O)):O===null||Re(O)?(t.exit("htmlFlowData"),me(O)):(t.consume(O),se)}function me(O){return t.check(Fq,V,q)(O)}function V(O){return t.enter("lineEnding"),t.consume(O),t.exit("lineEnding"),G}function G(O){return O===null||Re(O)?me(O):(t.enter("htmlFlowData"),se(O))}function B(O){return O===45?(t.consume(O),I):se(O)}function K(O){return O===47?(t.consume(O),l="",re):se(O)}function re(O){if(O===62){const ie=l.toLowerCase();return lS.includes(ie)?(t.consume(O),N):se(O)}return En(O)&&l.length<8?(t.consume(O),l+=String.fromCharCode(O),re):se(O)}function Q(O){return O===93?(t.consume(O),I):se(O)}function I(O){return O===62?(t.consume(O),N):O===45&&i===2?(t.consume(O),I):se(O)}function N(O){return O===null||Re(O)?(t.exit("htmlFlowData"),q(O)):(t.consume(O),N)}function q(O){return t.exit("htmlFlow"),e(O)}}function Gq(t,e,n){const r=this;return i;function i(l){return Re(l)?(t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),a):n(l)}function a(l){return r.parser.lazy[r.now().line]?n(l):e(l)}}function Kq(t,e,n){return r;function r(i){return t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),t.attempt(eu,e,n)}}const Zq={name:"htmlText",tokenize:Qq};function Qq(t,e,n){const r=this;let i,a,l;return c;function c(I){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(I),f}function f(I){return I===33?(t.consume(I),h):I===47?(t.consume(I),L):I===63?(t.consume(I),T):En(I)?(t.consume(I),$):n(I)}function h(I){return I===45?(t.consume(I),m):I===91?(t.consume(I),a=0,v):En(I)?(t.consume(I),R):n(I)}function m(I){return I===45?(t.consume(I),y):n(I)}function p(I){return I===null?n(I):I===45?(t.consume(I),_):Re(I)?(l=p,K(I)):(t.consume(I),p)}function _(I){return I===45?(t.consume(I),y):p(I)}function y(I){return I===62?B(I):I===45?_(I):p(I)}function v(I){const N="CDATA[";return I===N.charCodeAt(a++)?(t.consume(I),a===N.length?w:v):n(I)}function w(I){return I===null?n(I):I===93?(t.consume(I),k):Re(I)?(l=w,K(I)):(t.consume(I),w)}function k(I){return I===93?(t.consume(I),S):w(I)}function S(I){return I===62?B(I):I===93?(t.consume(I),S):w(I)}function R(I){return I===null||I===62?B(I):Re(I)?(l=R,K(I)):(t.consume(I),R)}function T(I){return I===null?n(I):I===63?(t.consume(I),z):Re(I)?(l=T,K(I)):(t.consume(I),T)}function z(I){return I===62?B(I):T(I)}function L(I){return En(I)?(t.consume(I),E):n(I)}function E(I){return I===45||gn(I)?(t.consume(I),E):M(I)}function M(I){return Re(I)?(l=M,K(I)):Fe(I)?(t.consume(I),M):B(I)}function $(I){return I===45||gn(I)?(t.consume(I),$):I===47||I===62||ut(I)?F(I):n(I)}function F(I){return I===47?(t.consume(I),B):I===58||I===95||En(I)?(t.consume(I),P):Re(I)?(l=F,K(I)):Fe(I)?(t.consume(I),F):B(I)}function P(I){return I===45||I===46||I===58||I===95||gn(I)?(t.consume(I),P):Z(I)}function Z(I){return I===61?(t.consume(I),se):Re(I)?(l=Z,K(I)):Fe(I)?(t.consume(I),Z):F(I)}function se(I){return I===null||I===60||I===61||I===62||I===96?n(I):I===34||I===39?(t.consume(I),i=I,me):Re(I)?(l=se,K(I)):Fe(I)?(t.consume(I),se):(t.consume(I),V)}function me(I){return I===i?(t.consume(I),i=void 0,G):I===null?n(I):Re(I)?(l=me,K(I)):(t.consume(I),me)}function V(I){return I===null||I===34||I===39||I===60||I===61||I===96?n(I):I===47||I===62||ut(I)?F(I):(t.consume(I),V)}function G(I){return I===47||I===62||ut(I)?F(I):n(I)}function B(I){return I===62?(t.consume(I),t.exit("htmlTextData"),t.exit("htmlText"),e):n(I)}function K(I){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(I),t.exit("lineEnding"),re}function re(I){return Fe(I)?Ze(t,Q,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(I):Q(I)}function Q(I){return t.enter("htmlTextData"),l(I)}}const o0={name:"labelEnd",resolveAll:Wq,resolveTo:eF,tokenize:tF},Jq={tokenize:nF},Yq={tokenize:rF},Xq={tokenize:iF};function Wq(t){let e=-1;const n=[];for(;++e<t.length;){const r=t[e][1];if(n.push(t[e]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const i=r.type==="labelImage"?4:2;r.type="data",e+=i}}return t.length!==n.length&&Wn(t,0,t.length,n),t}function eF(t,e){let n=t.length,r=0,i,a,l,c;for(;n--;)if(i=t[n][1],a){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;t[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(l){if(t[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(a=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(l=n);const f={type:t[a][1].type==="labelLink"?"link":"image",start:{...t[a][1].start},end:{...t[t.length-1][1].end}},h={type:"label",start:{...t[a][1].start},end:{...t[l][1].end}},m={type:"labelText",start:{...t[a+r+2][1].end},end:{...t[l-2][1].start}};return c=[["enter",f,e],["enter",h,e]],c=mr(c,t.slice(a+1,a+r+3)),c=mr(c,[["enter",m,e]]),c=mr(c,gh(e.parser.constructs.insideSpan.null,t.slice(a+r+4,l-3),e)),c=mr(c,[["exit",m,e],t[l-2],t[l-1],["exit",h,e]]),c=mr(c,t.slice(l+1)),c=mr(c,[["exit",f,e]]),Wn(t,a,t.length,c),t}function tF(t,e,n){const r=this;let i=r.events.length,a,l;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){a=r.events[i][1];break}return c;function c(_){return a?a._inactive?p(_):(l=r.parser.defined.includes(Cr(r.sliceSerialize({start:a.end,end:r.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(_),t.exit("labelMarker"),t.exit("labelEnd"),f):n(_)}function f(_){return _===40?t.attempt(Jq,m,l?m:p)(_):_===91?t.attempt(Yq,m,l?h:p)(_):l?m(_):p(_)}function h(_){return t.attempt(Xq,m,p)(_)}function m(_){return e(_)}function p(_){return a._balanced=!0,n(_)}}function nF(t,e,n){return r;function r(p){return t.enter("resource"),t.enter("resourceMarker"),t.consume(p),t.exit("resourceMarker"),i}function i(p){return ut(p)?Tl(t,a)(p):a(p)}function a(p){return p===41?m(p):OT(t,l,c,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(p)}function l(p){return ut(p)?Tl(t,f)(p):m(p)}function c(p){return n(p)}function f(p){return p===34||p===39||p===40?NT(t,h,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(p):m(p)}function h(p){return ut(p)?Tl(t,m)(p):m(p)}function m(p){return p===41?(t.enter("resourceMarker"),t.consume(p),t.exit("resourceMarker"),t.exit("resource"),e):n(p)}}function rF(t,e,n){const r=this;return i;function i(c){return IT.call(r,t,a,l,"reference","referenceMarker","referenceString")(c)}function a(c){return r.parser.defined.includes(Cr(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?e(c):n(c)}function l(c){return n(c)}}function iF(t,e,n){return r;function r(a){return t.enter("reference"),t.enter("referenceMarker"),t.consume(a),t.exit("referenceMarker"),i}function i(a){return a===93?(t.enter("referenceMarker"),t.consume(a),t.exit("referenceMarker"),t.exit("reference"),e):n(a)}}const sF={name:"labelStartImage",resolveAll:o0.resolveAll,tokenize:aF};function aF(t,e,n){const r=this;return i;function i(c){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(c),t.exit("labelImageMarker"),a}function a(c){return c===91?(t.enter("labelMarker"),t.consume(c),t.exit("labelMarker"),t.exit("labelImage"),l):n(c)}function l(c){return c===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(c):e(c)}}const oF={name:"labelStartLink",resolveAll:o0.resolveAll,tokenize:lF};function lF(t,e,n){const r=this;return i;function i(l){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(l),t.exit("labelMarker"),t.exit("labelLink"),a}function a(l){return l===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(l):e(l)}}const ym={name:"lineEnding",tokenize:uF};function uF(t,e){return n;function n(r){return t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),Ze(t,e,"linePrefix")}}const tf={name:"thematicBreak",tokenize:cF};function cF(t,e,n){let r=0,i;return a;function a(h){return t.enter("thematicBreak"),l(h)}function l(h){return i=h,c(h)}function c(h){return h===i?(t.enter("thematicBreakSequence"),f(h)):r>=3&&(h===null||Re(h))?(t.exit("thematicBreak"),e(h)):n(h)}function f(h){return h===i?(t.consume(h),r++,f):(t.exit("thematicBreakSequence"),Fe(h)?Ze(t,c,"whitespace")(h):c(h))}}const zn={continuation:{tokenize:pF},exit:gF,name:"list",tokenize:dF},fF={partial:!0,tokenize:yF},hF={partial:!0,tokenize:mF};function dF(t,e,n){const r=this,i=r.events[r.events.length-1];let a=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,l=0;return c;function c(y){const v=r.containerState.type||(y===42||y===43||y===45?"listUnordered":"listOrdered");if(v==="listUnordered"?!r.containerState.marker||y===r.containerState.marker:Lg(y)){if(r.containerState.type||(r.containerState.type=v,t.enter(v,{_container:!0})),v==="listUnordered")return t.enter("listItemPrefix"),y===42||y===45?t.check(tf,n,h)(y):h(y);if(!r.interrupt||y===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),f(y)}return n(y)}function f(y){return Lg(y)&&++l<10?(t.consume(y),f):(!r.interrupt||l<2)&&(r.containerState.marker?y===r.containerState.marker:y===41||y===46)?(t.exit("listItemValue"),h(y)):n(y)}function h(y){return t.enter("listItemMarker"),t.consume(y),t.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||y,t.check(eu,r.interrupt?n:m,t.attempt(fF,_,p))}function m(y){return r.containerState.initialBlankLine=!0,a++,_(y)}function p(y){return Fe(y)?(t.enter("listItemPrefixWhitespace"),t.consume(y),t.exit("listItemPrefixWhitespace"),_):n(y)}function _(y){return r.containerState.size=a+r.sliceSerialize(t.exit("listItemPrefix"),!0).length,e(y)}}function pF(t,e,n){const r=this;return r.containerState._closeFlow=void 0,t.check(eu,i,a);function i(c){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,Ze(t,e,"listItemIndent",r.containerState.size+1)(c)}function a(c){return r.containerState.furtherBlankLines||!Fe(c)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,l(c)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,t.attempt(hF,e,l)(c))}function l(c){return r.containerState._closeFlow=!0,r.interrupt=void 0,Ze(t,t.attempt(zn,e,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(c)}}function mF(t,e,n){const r=this;return Ze(t,i,"listItemIndent",r.containerState.size+1);function i(a){const l=r.events[r.events.length-1];return l&&l[1].type==="listItemIndent"&&l[2].sliceSerialize(l[1],!0).length===r.containerState.size?e(a):n(a)}}function gF(t){t.exit(this.containerState.type)}function yF(t,e,n){const r=this;return Ze(t,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(a){const l=r.events[r.events.length-1];return!Fe(a)&&l&&l[1].type==="listItemPrefixWhitespace"?e(a):n(a)}}const uS={name:"setextUnderline",resolveTo:_F,tokenize:bF};function _F(t,e){let n=t.length,r,i,a;for(;n--;)if(t[n][0]==="enter"){if(t[n][1].type==="content"){r=n;break}t[n][1].type==="paragraph"&&(i=n)}else t[n][1].type==="content"&&t.splice(n,1),!a&&t[n][1].type==="definition"&&(a=n);const l={type:"setextHeading",start:{...t[r][1].start},end:{...t[t.length-1][1].end}};return t[i][1].type="setextHeadingText",a?(t.splice(i,0,["enter",l,e]),t.splice(a+1,0,["exit",t[r][1],e]),t[r][1].end={...t[a][1].end}):t[r][1]=l,t.push(["exit",l,e]),t}function bF(t,e,n){const r=this;let i;return a;function a(h){let m=r.events.length,p;for(;m--;)if(r.events[m][1].type!=="lineEnding"&&r.events[m][1].type!=="linePrefix"&&r.events[m][1].type!=="content"){p=r.events[m][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||p)?(t.enter("setextHeadingLine"),i=h,l(h)):n(h)}function l(h){return t.enter("setextHeadingLineSequence"),c(h)}function c(h){return h===i?(t.consume(h),c):(t.exit("setextHeadingLineSequence"),Fe(h)?Ze(t,f,"lineSuffix")(h):f(h))}function f(h){return h===null||Re(h)?(t.exit("setextHeadingLine"),e(h)):n(h)}}const vF={tokenize:wF};function wF(t){const e=this,n=t.attempt(eu,r,t.attempt(this.parser.constructs.flowInitial,i,Ze(t,t.attempt(this.parser.constructs.flow,i,t.attempt(Cq,i)),"linePrefix")));return n;function r(a){if(a===null){t.consume(a);return}return t.enter("lineEndingBlank"),t.consume(a),t.exit("lineEndingBlank"),e.currentConstruct=void 0,n}function i(a){if(a===null){t.consume(a);return}return t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),e.currentConstruct=void 0,n}}const xF={resolveAll:MT()},SF=DT("string"),EF=DT("text");function DT(t){return{resolveAll:MT(t==="text"?kF:void 0),tokenize:e};function e(n){const r=this,i=this.parser.constructs[t],a=n.attempt(i,l,c);return l;function l(m){return h(m)?a(m):c(m)}function c(m){if(m===null){n.consume(m);return}return n.enter("data"),n.consume(m),f}function f(m){return h(m)?(n.exit("data"),a(m)):(n.consume(m),f)}function h(m){if(m===null)return!0;const p=i[m];let _=-1;if(p)for(;++_<p.length;){const y=p[_];if(!y.previous||y.previous.call(r,r.previous))return!0}return!1}}}function MT(t){return e;function e(n,r){let i=-1,a;for(;++i<=n.length;)a===void 0?n[i]&&n[i][1].type==="data"&&(a=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==a+2&&(n[a][1].end=n[i-1][1].end,n.splice(a+2,i-a-2),i=a+2),a=void 0);return t?t(n,r):n}}function kF(t,e){let n=0;for(;++n<=t.length;)if((n===t.length||t[n][1].type==="lineEnding")&&t[n-1][1].type==="data"){const r=t[n-1][1],i=e.sliceStream(r);let a=i.length,l=-1,c=0,f;for(;a--;){const h=i[a];if(typeof h=="string"){for(l=h.length;h.charCodeAt(l-1)===32;)c++,l--;if(l)break;l=-1}else if(h===-2)f=!0,c++;else if(h!==-1){a++;break}}if(e._contentTypeTextTrailing&&n===t.length&&(c=0),c){const h={type:n===t.length||f||c<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:a?l:r.start._bufferIndex+l,_index:r.start._index+a,line:r.end.line,column:r.end.column-c,offset:r.end.offset-c},end:{...r.end}};r.end={...h.start},r.start.offset===r.end.offset?Object.assign(r,h):(t.splice(n,0,["enter",h,e],["exit",h,e]),n+=2)}n++}return t}const CF={42:zn,43:zn,45:zn,48:zn,49:zn,50:zn,51:zn,52:zn,53:zn,54:zn,55:zn,56:zn,57:zn,62:CT},TF={91:Iq},AF={[-2]:gm,[-1]:gm,32:gm},RF={35:Pq,42:tf,45:[uS,tf],60:$q,61:uS,95:tf,96:oS,126:oS},OF={38:AT,92:TT},IF={[-5]:ym,[-4]:ym,[-3]:ym,33:sF,38:AT,42:zg,60:[oq,Zq],91:oF,92:[Lq,TT],93:o0,95:zg,96:vq},NF={null:[zg,xF]},DF={null:[42,95]},MF={null:[]},LF=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:DF,contentInitial:TF,disable:MF,document:CF,flow:RF,flowInitial:AF,insideSpan:NF,string:OF,text:IF},Symbol.toStringTag,{value:"Module"}));function zF(t,e,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const i={},a=[];let l=[],c=[];const f={attempt:M(L),check:M(E),consume:R,enter:T,exit:z,interrupt:M(E,{interrupt:!0})},h={code:null,containerState:{},defineSkip:w,events:[],now:v,parser:t,previous:null,sliceSerialize:_,sliceStream:y,write:p};let m=e.tokenize.call(h,f);return e.resolveAll&&a.push(e),h;function p(Z){return l=mr(l,Z),k(),l[l.length-1]!==null?[]:($(e,0),h.events=gh(a,h.events,h),h.events)}function _(Z,se){return jF(y(Z),se)}function y(Z){return PF(l,Z)}function v(){const{_bufferIndex:Z,_index:se,line:me,column:V,offset:G}=r;return{_bufferIndex:Z,_index:se,line:me,column:V,offset:G}}function w(Z){i[Z.line]=Z.column,P()}function k(){let Z;for(;r._index<l.length;){const se=l[r._index];if(typeof se=="string")for(Z=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===Z&&r._bufferIndex<se.length;)S(se.charCodeAt(r._bufferIndex));else S(se)}}function S(Z){m=m(Z)}function R(Z){Re(Z)?(r.line++,r.column=1,r.offset+=Z===-3?2:1,P()):Z!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===l[r._index].length&&(r._bufferIndex=-1,r._index++)),h.previous=Z}function T(Z,se){const me=se||{};return me.type=Z,me.start=v(),h.events.push(["enter",me,h]),c.push(me),me}function z(Z){const se=c.pop();return se.end=v(),h.events.push(["exit",se,h]),se}function L(Z,se){$(Z,se.from)}function E(Z,se){se.restore()}function M(Z,se){return me;function me(V,G,B){let K,re,Q,I;return Array.isArray(V)?q(V):"tokenize"in V?q([V]):N(V);function N(ge){return de;function de(Se){const we=Se!==null&&ge[Se],Xe=Se!==null&&ge.null,at=[...Array.isArray(we)?we:we?[we]:[],...Array.isArray(Xe)?Xe:Xe?[Xe]:[]];return q(at)(Se)}}function q(ge){return K=ge,re=0,ge.length===0?B:O(ge[re])}function O(ge){return de;function de(Se){return I=F(),Q=ge,ge.partial||(h.currentConstruct=ge),ge.name&&h.parser.constructs.disable.null.includes(ge.name)?fe():ge.tokenize.call(se?Object.assign(Object.create(h),se):h,f,ie,fe)(Se)}}function ie(ge){return Z(Q,I),G}function fe(ge){return I.restore(),++re<K.length?O(K[re]):B}}}function $(Z,se){Z.resolveAll&&!a.includes(Z)&&a.push(Z),Z.resolve&&Wn(h.events,se,h.events.length-se,Z.resolve(h.events.slice(se),h)),Z.resolveTo&&(h.events=Z.resolveTo(h.events,h))}function F(){const Z=v(),se=h.previous,me=h.currentConstruct,V=h.events.length,G=Array.from(c);return{from:V,restore:B};function B(){r=Z,h.previous=se,h.currentConstruct=me,h.events.length=V,c=G,P()}}function P(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function PF(t,e){const n=e.start._index,r=e.start._bufferIndex,i=e.end._index,a=e.end._bufferIndex;let l;if(n===i)l=[t[n].slice(r,a)];else{if(l=t.slice(n,i),r>-1){const c=l[0];typeof c=="string"?l[0]=c.slice(r):l.shift()}a>0&&l.push(t[i].slice(0,a))}return l}function jF(t,e){let n=-1;const r=[];let i;for(;++n<t.length;){const a=t[n];let l;if(typeof a=="string")l=a;else switch(a){case-5:{l="\r";break}case-4:{l=`
`;break}case-3:{l=`\r
`;break}case-2:{l=e?" ":"	";break}case-1:{if(!e&&i)continue;l=" ";break}default:l=String.fromCharCode(a)}i=a===-2,r.push(l)}return r.join("")}function BF(t){const r={constructs:ET([LF,...(t||{}).extensions||[]]),content:i(eq),defined:[],document:i(nq),flow:i(vF),lazy:{},string:i(SF),text:i(EF)};return r;function i(a){return l;function l(c){return zF(r,a,c)}}}function UF(t){for(;!RT(t););return t}const cS=/[\0\t\n\r]/g;function $F(){let t=1,e="",n=!0,r;return i;function i(a,l,c){const f=[];let h,m,p,_,y;for(a=e+(typeof a=="string"?a.toString():new TextDecoder(l||void 0).decode(a)),p=0,e="",n&&(a.charCodeAt(0)===65279&&p++,n=void 0);p<a.length;){if(cS.lastIndex=p,h=cS.exec(a),_=h&&h.index!==void 0?h.index:a.length,y=a.charCodeAt(_),!h){e=a.slice(p);break}if(y===10&&p===_&&r)f.push(-3),r=void 0;else switch(r&&(f.push(-5),r=void 0),p<_&&(f.push(a.slice(p,_)),t+=_-p),y){case 0:{f.push(65533),t++;break}case 9:{for(m=Math.ceil(t/4)*4,f.push(-2);t++<m;)f.push(-1);break}case 10:{f.push(-4),t=1;break}default:r=!0,t=1}p=_+1}return c&&(r&&f.push(-5),e&&f.push(e),f.push(null)),f}}const qF=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function FF(t){return t.replace(qF,VF)}function VF(t,e,n){if(e)return e;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),a=i===120||i===88;return kT(n.slice(a?2:1),a?16:10)}return a0(n)||t}const LT={}.hasOwnProperty;function HF(t,e,n){return typeof e!="string"&&(n=e,e=void 0),GF(n)(UF(BF(n).document().write($F()(t,e,!0))))}function GF(t){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:a($n),autolinkProtocol:F,autolinkEmail:F,atxHeading:a(Vt),blockQuote:a(Xe),characterEscape:F,characterReference:F,codeFenced:a(at),codeFencedFenceInfo:l,codeFencedFenceMeta:l,codeIndented:a(at,l),codeText:a(yt,l),codeTextData:F,data:F,codeFlowValue:F,definition:a(Dt),definitionDestinationString:l,definitionLabelString:l,definitionTitleString:l,emphasis:a(Mt),hardBreakEscape:a(_n),hardBreakTrailing:a(_n),htmlFlow:a(Xt,l),htmlFlowData:F,htmlText:a(Xt,l),htmlTextData:F,image:a(Cn),label:l,link:a($n),listItem:a(ye),listItemValue:_,listOrdered:a(Tn,p),listUnordered:a(Tn),paragraph:a(Be),reference:O,referenceString:l,resourceDestinationString:l,resourceTitleString:l,setextHeading:a(Vt),strong:a(Ue),thematicBreak:a(Qe)},exit:{atxHeading:f(),atxHeadingSequence:L,autolink:f(),autolinkEmail:we,autolinkProtocol:Se,blockQuote:f(),characterEscapeValue:P,characterReferenceMarkerHexadecimal:fe,characterReferenceMarkerNumeric:fe,characterReferenceValue:ge,characterReference:de,codeFenced:f(k),codeFencedFence:w,codeFencedFenceInfo:y,codeFencedFenceMeta:v,codeFlowValue:P,codeIndented:f(S),codeText:f(G),codeTextData:P,data:P,definition:f(),definitionDestinationString:z,definitionLabelString:R,definitionTitleString:T,emphasis:f(),hardBreakEscape:f(se),hardBreakTrailing:f(se),htmlFlow:f(me),htmlFlowData:P,htmlText:f(V),htmlTextData:P,image:f(K),label:Q,labelText:re,lineEnding:Z,link:f(B),listItem:f(),listOrdered:f(),listUnordered:f(),paragraph:f(),referenceString:ie,resourceDestinationString:I,resourceTitleString:N,resource:q,setextHeading:f($),setextHeadingLineSequence:M,setextHeadingText:E,strong:f(),thematicBreak:f()}};zT(e,(t||{}).mdastExtensions||[]);const n={};return r;function r(ne){let ue={type:"root",children:[]};const _e={stack:[ue],tokenStack:[],config:e,enter:c,exit:h,buffer:l,resume:m,data:n},Ee=[];let Ie=-1;for(;++Ie<ne.length;)if(ne[Ie][1].type==="listOrdered"||ne[Ie][1].type==="listUnordered")if(ne[Ie][0]==="enter")Ee.push(Ie);else{const vt=Ee.pop();Ie=i(ne,vt,Ie)}for(Ie=-1;++Ie<ne.length;){const vt=e[ne[Ie][0]];LT.call(vt,ne[Ie][1].type)&&vt[ne[Ie][1].type].call(Object.assign({sliceSerialize:ne[Ie][2].sliceSerialize},_e),ne[Ie][1])}if(_e.tokenStack.length>0){const vt=_e.tokenStack[_e.tokenStack.length-1];(vt[1]||fS).call(_e,void 0,vt[0])}for(ue.position={start:qi(ne.length>0?ne[0][1].start:{line:1,column:1,offset:0}),end:qi(ne.length>0?ne[ne.length-2][1].end:{line:1,column:1,offset:0})},Ie=-1;++Ie<e.transforms.length;)ue=e.transforms[Ie](ue)||ue;return ue}function i(ne,ue,_e){let Ee=ue-1,Ie=-1,vt=!1,cn,Ht,_t,An;for(;++Ee<=_e;){const ot=ne[Ee];switch(ot[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{ot[0]==="enter"?Ie++:Ie--,An=void 0;break}case"lineEndingBlank":{ot[0]==="enter"&&(cn&&!An&&!Ie&&!_t&&(_t=Ee),An=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:An=void 0}if(!Ie&&ot[0]==="enter"&&ot[1].type==="listItemPrefix"||Ie===-1&&ot[0]==="exit"&&(ot[1].type==="listUnordered"||ot[1].type==="listOrdered")){if(cn){let pi=Ee;for(Ht=void 0;pi--;){const vr=ne[pi];if(vr[1].type==="lineEnding"||vr[1].type==="lineEndingBlank"){if(vr[0]==="exit")continue;Ht&&(ne[Ht][1].type="lineEndingBlank",vt=!0),vr[1].type="lineEnding",Ht=pi}else if(!(vr[1].type==="linePrefix"||vr[1].type==="blockQuotePrefix"||vr[1].type==="blockQuotePrefixWhitespace"||vr[1].type==="blockQuoteMarker"||vr[1].type==="listItemIndent"))break}_t&&(!Ht||_t<Ht)&&(cn._spread=!0),cn.end=Object.assign({},Ht?ne[Ht][1].start:ot[1].end),ne.splice(Ht||Ee,0,["exit",cn,ot[2]]),Ee++,_e++}if(ot[1].type==="listItemPrefix"){const pi={type:"listItem",_spread:!1,start:Object.assign({},ot[1].start),end:void 0};cn=pi,ne.splice(Ee,0,["enter",pi,ot[2]]),Ee++,_e++,_t=void 0,An=!0}}}return ne[ue][1]._spread=vt,_e}function a(ne,ue){return _e;function _e(Ee){c.call(this,ne(Ee),Ee),ue&&ue.call(this,Ee)}}function l(){this.stack.push({type:"fragment",children:[]})}function c(ne,ue,_e){this.stack[this.stack.length-1].children.push(ne),this.stack.push(ne),this.tokenStack.push([ue,_e||void 0]),ne.position={start:qi(ue.start),end:void 0}}function f(ne){return ue;function ue(_e){ne&&ne.call(this,_e),h.call(this,_e)}}function h(ne,ue){const _e=this.stack.pop(),Ee=this.tokenStack.pop();if(Ee)Ee[0].type!==ne.type&&(ue?ue.call(this,ne,Ee[0]):(Ee[1]||fS).call(this,ne,Ee[0]));else throw new Error("Cannot close `"+ne.type+"` ("+Cl({start:ne.start,end:ne.end})+"): its not open");_e.position.end=qi(ne.end)}function m(){return s0(this.stack.pop())}function p(){this.data.expectingFirstListItemValue=!0}function _(ne){if(this.data.expectingFirstListItemValue){const ue=this.stack[this.stack.length-2];ue.start=Number.parseInt(this.sliceSerialize(ne),10),this.data.expectingFirstListItemValue=void 0}}function y(){const ne=this.resume(),ue=this.stack[this.stack.length-1];ue.lang=ne}function v(){const ne=this.resume(),ue=this.stack[this.stack.length-1];ue.meta=ne}function w(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function k(){const ne=this.resume(),ue=this.stack[this.stack.length-1];ue.value=ne.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function S(){const ne=this.resume(),ue=this.stack[this.stack.length-1];ue.value=ne.replace(/(\r?\n|\r)$/g,"")}function R(ne){const ue=this.resume(),_e=this.stack[this.stack.length-1];_e.label=ue,_e.identifier=Cr(this.sliceSerialize(ne)).toLowerCase()}function T(){const ne=this.resume(),ue=this.stack[this.stack.length-1];ue.title=ne}function z(){const ne=this.resume(),ue=this.stack[this.stack.length-1];ue.url=ne}function L(ne){const ue=this.stack[this.stack.length-1];if(!ue.depth){const _e=this.sliceSerialize(ne).length;ue.depth=_e}}function E(){this.data.setextHeadingSlurpLineEnding=!0}function M(ne){const ue=this.stack[this.stack.length-1];ue.depth=this.sliceSerialize(ne).codePointAt(0)===61?1:2}function $(){this.data.setextHeadingSlurpLineEnding=void 0}function F(ne){const _e=this.stack[this.stack.length-1].children;let Ee=_e[_e.length-1];(!Ee||Ee.type!=="text")&&(Ee=Ae(),Ee.position={start:qi(ne.start),end:void 0},_e.push(Ee)),this.stack.push(Ee)}function P(ne){const ue=this.stack.pop();ue.value+=this.sliceSerialize(ne),ue.position.end=qi(ne.end)}function Z(ne){const ue=this.stack[this.stack.length-1];if(this.data.atHardBreak){const _e=ue.children[ue.children.length-1];_e.position.end=qi(ne.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(ue.type)&&(F.call(this,ne),P.call(this,ne))}function se(){this.data.atHardBreak=!0}function me(){const ne=this.resume(),ue=this.stack[this.stack.length-1];ue.value=ne}function V(){const ne=this.resume(),ue=this.stack[this.stack.length-1];ue.value=ne}function G(){const ne=this.resume(),ue=this.stack[this.stack.length-1];ue.value=ne}function B(){const ne=this.stack[this.stack.length-1];if(this.data.inReference){const ue=this.data.referenceType||"shortcut";ne.type+="Reference",ne.referenceType=ue,delete ne.url,delete ne.title}else delete ne.identifier,delete ne.label;this.data.referenceType=void 0}function K(){const ne=this.stack[this.stack.length-1];if(this.data.inReference){const ue=this.data.referenceType||"shortcut";ne.type+="Reference",ne.referenceType=ue,delete ne.url,delete ne.title}else delete ne.identifier,delete ne.label;this.data.referenceType=void 0}function re(ne){const ue=this.sliceSerialize(ne),_e=this.stack[this.stack.length-2];_e.label=FF(ue),_e.identifier=Cr(ue).toLowerCase()}function Q(){const ne=this.stack[this.stack.length-1],ue=this.resume(),_e=this.stack[this.stack.length-1];if(this.data.inReference=!0,_e.type==="link"){const Ee=ne.children;_e.children=Ee}else _e.alt=ue}function I(){const ne=this.resume(),ue=this.stack[this.stack.length-1];ue.url=ne}function N(){const ne=this.resume(),ue=this.stack[this.stack.length-1];ue.title=ne}function q(){this.data.inReference=void 0}function O(){this.data.referenceType="collapsed"}function ie(ne){const ue=this.resume(),_e=this.stack[this.stack.length-1];_e.label=ue,_e.identifier=Cr(this.sliceSerialize(ne)).toLowerCase(),this.data.referenceType="full"}function fe(ne){this.data.characterReferenceType=ne.type}function ge(ne){const ue=this.sliceSerialize(ne),_e=this.data.characterReferenceType;let Ee;_e?(Ee=kT(ue,_e==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):Ee=a0(ue);const Ie=this.stack[this.stack.length-1];Ie.value+=Ee}function de(ne){const ue=this.stack.pop();ue.position.end=qi(ne.end)}function Se(ne){P.call(this,ne);const ue=this.stack[this.stack.length-1];ue.url=this.sliceSerialize(ne)}function we(ne){P.call(this,ne);const ue=this.stack[this.stack.length-1];ue.url="mailto:"+this.sliceSerialize(ne)}function Xe(){return{type:"blockquote",children:[]}}function at(){return{type:"code",lang:null,meta:null,value:""}}function yt(){return{type:"inlineCode",value:""}}function Dt(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Mt(){return{type:"emphasis",children:[]}}function Vt(){return{type:"heading",depth:0,children:[]}}function _n(){return{type:"break"}}function Xt(){return{type:"html",value:""}}function Cn(){return{type:"image",title:null,url:"",alt:null}}function $n(){return{type:"link",title:null,url:"",children:[]}}function Tn(ne){return{type:"list",ordered:ne.type==="listOrdered",start:null,spread:ne._spread,children:[]}}function ye(ne){return{type:"listItem",spread:ne._spread,checked:null,children:[]}}function Be(){return{type:"paragraph",children:[]}}function Ue(){return{type:"strong",children:[]}}function Ae(){return{type:"text",value:""}}function Qe(){return{type:"thematicBreak"}}}function qi(t){return{line:t.line,column:t.column,offset:t.offset}}function zT(t,e){let n=-1;for(;++n<e.length;){const r=e[n];Array.isArray(r)?zT(t,r):KF(t,r)}}function KF(t,e){let n;for(n in e)if(LT.call(e,n))switch(n){case"canContainEols":{const r=e[n];r&&t[n].push(...r);break}case"transforms":{const r=e[n];r&&t[n].push(...r);break}case"enter":case"exit":{const r=e[n];r&&Object.assign(t[n],r);break}}}function fS(t,e){throw t?new Error("Cannot close `"+t.type+"` ("+Cl({start:t.start,end:t.end})+"): a different token (`"+e.type+"`, "+Cl({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+Cl({start:e.start,end:e.end})+") is still open")}function ZF(t){const e=this;e.parser=n;function n(r){return HF(r,{...e.data("settings"),...t,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function QF(t,e){const n={type:"element",tagName:"blockquote",properties:{},children:t.wrap(t.all(e),!0)};return t.patch(e,n),t.applyData(e,n)}function JF(t,e){const n={type:"element",tagName:"br",properties:{},children:[]};return t.patch(e,n),[t.applyData(e,n),{type:"text",value:`
`}]}function YF(t,e){const n=e.value?e.value+`
`:"",r={},i=e.lang?e.lang.split(/\s+/):[];i.length>0&&(r.className=["language-"+i[0]]);let a={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return e.meta&&(a.data={meta:e.meta}),t.patch(e,a),a=t.applyData(e,a),a={type:"element",tagName:"pre",properties:{},children:[a]},t.patch(e,a),a}function XF(t,e){const n={type:"element",tagName:"del",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function WF(t,e){const n={type:"element",tagName:"em",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function eV(t,e){const n=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",r=String(e.identifier).toUpperCase(),i=eo(r.toLowerCase()),a=t.footnoteOrder.indexOf(r);let l,c=t.footnoteCounts.get(r);c===void 0?(c=0,t.footnoteOrder.push(r),l=t.footnoteOrder.length):l=a+1,c+=1,t.footnoteCounts.set(r,c);const f={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(c>1?"-"+c:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(l)}]};t.patch(e,f);const h={type:"element",tagName:"sup",properties:{},children:[f]};return t.patch(e,h),t.applyData(e,h)}function tV(t,e){const n={type:"element",tagName:"h"+e.depth,properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function nV(t,e){if(t.options.allowDangerousHtml){const n={type:"raw",value:e.value};return t.patch(e,n),t.applyData(e,n)}}function PT(t,e){const n=e.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+r}];const i=t.all(e),a=i[0];a&&a.type==="text"?a.value="["+a.value:i.unshift({type:"text",value:"["});const l=i[i.length-1];return l&&l.type==="text"?l.value+=r:i.push({type:"text",value:r}),i}function rV(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return PT(t,e);const i={src:eo(r.url||""),alt:e.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const a={type:"element",tagName:"img",properties:i,children:[]};return t.patch(e,a),t.applyData(e,a)}function iV(t,e){const n={src:eo(e.url)};e.alt!==null&&e.alt!==void 0&&(n.alt=e.alt),e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"img",properties:n,children:[]};return t.patch(e,r),t.applyData(e,r)}function sV(t,e){const n={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};t.patch(e,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return t.patch(e,r),t.applyData(e,r)}function aV(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return PT(t,e);const i={href:eo(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const a={type:"element",tagName:"a",properties:i,children:t.all(e)};return t.patch(e,a),t.applyData(e,a)}function oV(t,e){const n={href:eo(e.url)};e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"a",properties:n,children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function lV(t,e,n){const r=t.all(e),i=n?uV(n):jT(e),a={},l=[];if(typeof e.checked=="boolean"){const m=r[0];let p;m&&m.type==="element"&&m.tagName==="p"?p=m:(p={type:"element",tagName:"p",properties:{},children:[]},r.unshift(p)),p.children.length>0&&p.children.unshift({type:"text",value:" "}),p.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),a.className=["task-list-item"]}let c=-1;for(;++c<r.length;){const m=r[c];(i||c!==0||m.type!=="element"||m.tagName!=="p")&&l.push({type:"text",value:`
`}),m.type==="element"&&m.tagName==="p"&&!i?l.push(...m.children):l.push(m)}const f=r[r.length-1];f&&(i||f.type!=="element"||f.tagName!=="p")&&l.push({type:"text",value:`
`});const h={type:"element",tagName:"li",properties:a,children:l};return t.patch(e,h),t.applyData(e,h)}function uV(t){let e=!1;if(t.type==="list"){e=t.spread||!1;const n=t.children;let r=-1;for(;!e&&++r<n.length;)e=jT(n[r])}return e}function jT(t){const e=t.spread;return e??t.children.length>1}function cV(t,e){const n={},r=t.all(e);let i=-1;for(typeof e.start=="number"&&e.start!==1&&(n.start=e.start);++i<r.length;){const l=r[i];if(l.type==="element"&&l.tagName==="li"&&l.properties&&Array.isArray(l.properties.className)&&l.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const a={type:"element",tagName:e.ordered?"ol":"ul",properties:n,children:t.wrap(r,!0)};return t.patch(e,a),t.applyData(e,a)}function fV(t,e){const n={type:"element",tagName:"p",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function hV(t,e){const n={type:"root",children:t.wrap(t.all(e))};return t.patch(e,n),t.applyData(e,n)}function dV(t,e){const n={type:"element",tagName:"strong",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function pV(t,e){const n=t.all(e),r=n.shift(),i=[];if(r){const l={type:"element",tagName:"thead",properties:{},children:t.wrap([r],!0)};t.patch(e.children[0],l),i.push(l)}if(n.length>0){const l={type:"element",tagName:"tbody",properties:{},children:t.wrap(n,!0)},c=t0(e.children[1]),f=yT(e.children[e.children.length-1]);c&&f&&(l.position={start:c,end:f}),i.push(l)}const a={type:"element",tagName:"table",properties:{},children:t.wrap(i,!0)};return t.patch(e,a),t.applyData(e,a)}function mV(t,e,n){const r=n?n.children:void 0,a=(r?r.indexOf(e):1)===0?"th":"td",l=n&&n.type==="table"?n.align:void 0,c=l?l.length:e.children.length;let f=-1;const h=[];for(;++f<c;){const p=e.children[f],_={},y=l?l[f]:void 0;y&&(_.align=y);let v={type:"element",tagName:a,properties:_,children:[]};p&&(v.children=t.all(p),t.patch(p,v),v=t.applyData(p,v)),h.push(v)}const m={type:"element",tagName:"tr",properties:{},children:t.wrap(h,!0)};return t.patch(e,m),t.applyData(e,m)}function gV(t,e){const n={type:"element",tagName:"td",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}const hS=9,dS=32;function yV(t){const e=String(t),n=/\r?\n|\r/g;let r=n.exec(e),i=0;const a=[];for(;r;)a.push(pS(e.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(e);return a.push(pS(e.slice(i),i>0,!1)),a.join("")}function pS(t,e,n){let r=0,i=t.length;if(e){let a=t.codePointAt(r);for(;a===hS||a===dS;)r++,a=t.codePointAt(r)}if(n){let a=t.codePointAt(i-1);for(;a===hS||a===dS;)i--,a=t.codePointAt(i-1)}return i>r?t.slice(r,i):""}function _V(t,e){const n={type:"text",value:yV(String(e.value))};return t.patch(e,n),t.applyData(e,n)}function bV(t,e){const n={type:"element",tagName:"hr",properties:{},children:[]};return t.patch(e,n),t.applyData(e,n)}const vV={blockquote:QF,break:JF,code:YF,delete:XF,emphasis:WF,footnoteReference:eV,heading:tV,html:nV,imageReference:rV,image:iV,inlineCode:sV,linkReference:aV,link:oV,listItem:lV,list:cV,paragraph:fV,root:hV,strong:dV,table:pV,tableCell:gV,tableRow:mV,text:_V,thematicBreak:bV,toml:zc,yaml:zc,definition:zc,footnoteDefinition:zc};function zc(){}const BT=-1,yh=0,Al=1,$f=2,l0=3,u0=4,c0=5,f0=6,UT=7,$T=8,mS=typeof self=="object"?self:globalThis,wV=(t,e)=>{const n=(i,a)=>(t.set(a,i),i),r=i=>{if(t.has(i))return t.get(i);const[a,l]=e[i];switch(a){case yh:case BT:return n(l,i);case Al:{const c=n([],i);for(const f of l)c.push(r(f));return c}case $f:{const c=n({},i);for(const[f,h]of l)c[r(f)]=r(h);return c}case l0:return n(new Date(l),i);case u0:{const{source:c,flags:f}=l;return n(new RegExp(c,f),i)}case c0:{const c=n(new Map,i);for(const[f,h]of l)c.set(r(f),r(h));return c}case f0:{const c=n(new Set,i);for(const f of l)c.add(r(f));return c}case UT:{const{name:c,message:f}=l;return n(new mS[c](f),i)}case $T:return n(BigInt(l),i);case"BigInt":return n(Object(BigInt(l)),i);case"ArrayBuffer":return n(new Uint8Array(l).buffer,l);case"DataView":{const{buffer:c}=new Uint8Array(l);return n(new DataView(c),l)}}return n(new mS[a](l),i)};return r},gS=t=>wV(new Map,t)(0),Ta="",{toString:xV}={},{keys:SV}=Object,nl=t=>{const e=typeof t;if(e!=="object"||!t)return[yh,e];const n=xV.call(t).slice(8,-1);switch(n){case"Array":return[Al,Ta];case"Object":return[$f,Ta];case"Date":return[l0,Ta];case"RegExp":return[u0,Ta];case"Map":return[c0,Ta];case"Set":return[f0,Ta];case"DataView":return[Al,n]}return n.includes("Array")?[Al,n]:n.includes("Error")?[UT,n]:[$f,n]},Pc=([t,e])=>t===yh&&(e==="function"||e==="symbol"),EV=(t,e,n,r)=>{const i=(l,c)=>{const f=r.push(l)-1;return n.set(c,f),f},a=l=>{if(n.has(l))return n.get(l);let[c,f]=nl(l);switch(c){case yh:{let m=l;switch(f){case"bigint":c=$T,m=l.toString();break;case"function":case"symbol":if(t)throw new TypeError("unable to serialize "+f);m=null;break;case"undefined":return i([BT],l)}return i([c,m],l)}case Al:{if(f){let _=l;return f==="DataView"?_=new Uint8Array(l.buffer):f==="ArrayBuffer"&&(_=new Uint8Array(l)),i([f,[..._]],l)}const m=[],p=i([c,m],l);for(const _ of l)m.push(a(_));return p}case $f:{if(f)switch(f){case"BigInt":return i([f,l.toString()],l);case"Boolean":case"Number":case"String":return i([f,l.valueOf()],l)}if(e&&"toJSON"in l)return a(l.toJSON());const m=[],p=i([c,m],l);for(const _ of SV(l))(t||!Pc(nl(l[_])))&&m.push([a(_),a(l[_])]);return p}case l0:return i([c,l.toISOString()],l);case u0:{const{source:m,flags:p}=l;return i([c,{source:m,flags:p}],l)}case c0:{const m=[],p=i([c,m],l);for(const[_,y]of l)(t||!(Pc(nl(_))||Pc(nl(y))))&&m.push([a(_),a(y)]);return p}case f0:{const m=[],p=i([c,m],l);for(const _ of l)(t||!Pc(nl(_)))&&m.push(a(_));return p}}const{message:h}=l;return i([c,{name:f,message:h}],l)};return a},yS=(t,{json:e,lossy:n}={})=>{const r=[];return EV(!(e||n),!!e,new Map,r)(t),r},qf=typeof structuredClone=="function"?(t,e)=>e&&("json"in e||"lossy"in e)?gS(yS(t,e)):structuredClone(t):(t,e)=>gS(yS(t,e));function kV(t,e){const n=[{type:"text",value:""}];return e>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),n}function CV(t,e){return"Back to reference "+(t+1)+(e>1?"-"+e:"")}function TV(t){const e=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",n=t.options.footnoteBackContent||kV,r=t.options.footnoteBackLabel||CV,i=t.options.footnoteLabel||"Footnotes",a=t.options.footnoteLabelTagName||"h2",l=t.options.footnoteLabelProperties||{className:["sr-only"]},c=[];let f=-1;for(;++f<t.footnoteOrder.length;){const h=t.footnoteById.get(t.footnoteOrder[f]);if(!h)continue;const m=t.all(h),p=String(h.identifier).toUpperCase(),_=eo(p.toLowerCase());let y=0;const v=[],w=t.footnoteCounts.get(p);for(;w!==void 0&&++y<=w;){v.length>0&&v.push({type:"text",value:" "});let R=typeof n=="string"?n:n(f,y);typeof R=="string"&&(R={type:"text",value:R}),v.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+_+(y>1?"-"+y:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(f,y),className:["data-footnote-backref"]},children:Array.isArray(R)?R:[R]})}const k=m[m.length-1];if(k&&k.type==="element"&&k.tagName==="p"){const R=k.children[k.children.length-1];R&&R.type==="text"?R.value+=" ":k.children.push({type:"text",value:" "}),k.children.push(...v)}else m.push(...v);const S={type:"element",tagName:"li",properties:{id:e+"fn-"+_},children:t.wrap(m,!0)};t.patch(h,S),c.push(S)}if(c.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:a,properties:{...qf(l),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:t.wrap(c,!0)},{type:"text",value:`
`}]}}const _h=(function(t){if(t==null)return IV;if(typeof t=="function")return bh(t);if(typeof t=="object")return Array.isArray(t)?AV(t):RV(t);if(typeof t=="string")return OV(t);throw new Error("Expected function, string, or object as test")});function AV(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=_h(t[n]);return bh(r);function r(...i){let a=-1;for(;++a<e.length;)if(e[a].apply(this,i))return!0;return!1}}function RV(t){const e=t;return bh(n);function n(r){const i=r;let a;for(a in t)if(i[a]!==e[a])return!1;return!0}}function OV(t){return bh(e);function e(n){return n&&n.type===t}}function bh(t){return e;function e(n,r,i){return!!(NV(n)&&t.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function IV(){return!0}function NV(t){return t!==null&&typeof t=="object"&&"type"in t}const qT=[],DV=!0,Pg=!1,MV="skip";function FT(t,e,n,r){let i;typeof e=="function"&&typeof n!="function"?(r=n,n=e):i=e;const a=_h(i),l=r?-1:1;c(t,void 0,[])();function c(f,h,m){const p=f&&typeof f=="object"?f:{};if(typeof p.type=="string"){const y=typeof p.tagName=="string"?p.tagName:typeof p.name=="string"?p.name:void 0;Object.defineProperty(_,"name",{value:"node ("+(f.type+(y?"<"+y+">":""))+")"})}return _;function _(){let y=qT,v,w,k;if((!e||a(f,h,m[m.length-1]||void 0))&&(y=LV(n(f,m)),y[0]===Pg))return y;if("children"in f&&f.children){const S=f;if(S.children&&y[0]!==MV)for(w=(r?S.children.length:-1)+l,k=m.concat(S);w>-1&&w<S.children.length;){const R=S.children[w];if(v=c(R,w,k)(),v[0]===Pg)return v;w=typeof v[1]=="number"?v[1]:w+l}}return y}}}function LV(t){return Array.isArray(t)?t:typeof t=="number"?[DV,t]:t==null?qT:[t]}function h0(t,e,n,r){let i,a,l;typeof e=="function"&&typeof n!="function"?(a=void 0,l=e,i=n):(a=e,l=n,i=r),FT(t,a,c,i);function c(f,h){const m=h[h.length-1],p=m?m.children.indexOf(f):void 0;return l(f,p,m)}}const jg={}.hasOwnProperty,zV={};function PV(t,e){const n=e||zV,r=new Map,i=new Map,a=new Map,l={...vV,...n.handlers},c={all:h,applyData:BV,definitionById:r,footnoteById:i,footnoteCounts:a,footnoteOrder:[],handlers:l,one:f,options:n,patch:jV,wrap:$V};return h0(t,function(m){if(m.type==="definition"||m.type==="footnoteDefinition"){const p=m.type==="definition"?r:i,_=String(m.identifier).toUpperCase();p.has(_)||p.set(_,m)}}),c;function f(m,p){const _=m.type,y=c.handlers[_];if(jg.call(c.handlers,_)&&y)return y(c,m,p);if(c.options.passThrough&&c.options.passThrough.includes(_)){if("children"in m){const{children:w,...k}=m,S=qf(k);return S.children=c.all(m),S}return qf(m)}return(c.options.unknownHandler||UV)(c,m,p)}function h(m){const p=[];if("children"in m){const _=m.children;let y=-1;for(;++y<_.length;){const v=c.one(_[y],m);if(v){if(y&&_[y-1].type==="break"&&(!Array.isArray(v)&&v.type==="text"&&(v.value=_S(v.value)),!Array.isArray(v)&&v.type==="element")){const w=v.children[0];w&&w.type==="text"&&(w.value=_S(w.value))}Array.isArray(v)?p.push(...v):p.push(v)}}}return p}}function jV(t,e){t.position&&(e.position=C9(t))}function BV(t,e){let n=e;if(t&&t.data){const r=t.data.hName,i=t.data.hChildren,a=t.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const l="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:l}}n.type==="element"&&a&&Object.assign(n.properties,qf(a)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function UV(t,e){const n=e.data||{},r="value"in e&&!(jg.call(n,"hProperties")||jg.call(n,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function $V(t,e){const n=[];let r=-1;for(e&&n.push({type:"text",value:`
`});++r<t.length;)r&&n.push({type:"text",value:`
`}),n.push(t[r]);return e&&t.length>0&&n.push({type:"text",value:`
`}),n}function _S(t){let e=0,n=t.charCodeAt(e);for(;n===9||n===32;)e++,n=t.charCodeAt(e);return t.slice(e)}function bS(t,e){const n=PV(t,e),r=n.one(t,void 0),i=TV(n),a=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&a.children.push({type:"text",value:`
`},i),a}function qV(t,e){return t&&"run"in t?async function(n,r){const i=bS(n,{file:r,...e});await t.run(i,r)}:function(n,r){return bS(n,{file:r,...t||e})}}function vS(t){if(t)throw t}var _m,wS;function FV(){if(wS)return _m;wS=1;var t=Object.prototype.hasOwnProperty,e=Object.prototype.toString,n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=function(h){return typeof Array.isArray=="function"?Array.isArray(h):e.call(h)==="[object Array]"},a=function(h){if(!h||e.call(h)!=="[object Object]")return!1;var m=t.call(h,"constructor"),p=h.constructor&&h.constructor.prototype&&t.call(h.constructor.prototype,"isPrototypeOf");if(h.constructor&&!m&&!p)return!1;var _;for(_ in h);return typeof _>"u"||t.call(h,_)},l=function(h,m){n&&m.name==="__proto__"?n(h,m.name,{enumerable:!0,configurable:!0,value:m.newValue,writable:!0}):h[m.name]=m.newValue},c=function(h,m){if(m==="__proto__")if(t.call(h,m)){if(r)return r(h,m).value}else return;return h[m]};return _m=function f(){var h,m,p,_,y,v,w=arguments[0],k=1,S=arguments.length,R=!1;for(typeof w=="boolean"&&(R=w,w=arguments[1]||{},k=2),(w==null||typeof w!="object"&&typeof w!="function")&&(w={});k<S;++k)if(h=arguments[k],h!=null)for(m in h)p=c(w,m),_=c(h,m),w!==_&&(R&&_&&(a(_)||(y=i(_)))?(y?(y=!1,v=p&&i(p)?p:[]):v=p&&a(p)?p:{},l(w,{name:m,newValue:f(R,v,_)})):typeof _<"u"&&l(w,{name:m,newValue:_}));return w},_m}var VV=FV();const bm=DS(VV);function Bg(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function HV(){const t=[],e={run:n,use:r};return e;function n(...i){let a=-1;const l=i.pop();if(typeof l!="function")throw new TypeError("Expected function as last argument, not "+l);c(null,...i);function c(f,...h){const m=t[++a];let p=-1;if(f){l(f);return}for(;++p<i.length;)(h[p]===null||h[p]===void 0)&&(h[p]=i[p]);i=h,m?GV(m,c)(...h):l(null,...h)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return t.push(i),e}}function GV(t,e){let n;return r;function r(...l){const c=t.length>l.length;let f;c&&l.push(i);try{f=t.apply(this,l)}catch(h){const m=h;if(c&&n)throw m;return i(m)}c||(f&&f.then&&typeof f.then=="function"?f.then(a,i):f instanceof Error?i(f):a(f))}function i(l,...c){n||(n=!0,e(l,...c))}function a(l){i(null,l)}}const Lr={basename:KV,dirname:ZV,extname:QV,join:JV,sep:"/"};function KV(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');tu(t);let n=0,r=-1,i=t.length,a;if(e===void 0||e.length===0||e.length>t.length){for(;i--;)if(t.codePointAt(i)===47){if(a){n=i+1;break}}else r<0&&(a=!0,r=i+1);return r<0?"":t.slice(n,r)}if(e===t)return"";let l=-1,c=e.length-1;for(;i--;)if(t.codePointAt(i)===47){if(a){n=i+1;break}}else l<0&&(a=!0,l=i+1),c>-1&&(t.codePointAt(i)===e.codePointAt(c--)?c<0&&(r=i):(c=-1,r=l));return n===r?r=l:r<0&&(r=t.length),t.slice(n,r)}function ZV(t){if(tu(t),t.length===0)return".";let e=-1,n=t.length,r;for(;--n;)if(t.codePointAt(n)===47){if(r){e=n;break}}else r||(r=!0);return e<0?t.codePointAt(0)===47?"/":".":e===1&&t.codePointAt(0)===47?"//":t.slice(0,e)}function QV(t){tu(t);let e=t.length,n=-1,r=0,i=-1,a=0,l;for(;e--;){const c=t.codePointAt(e);if(c===47){if(l){r=e+1;break}continue}n<0&&(l=!0,n=e+1),c===46?i<0?i=e:a!==1&&(a=1):i>-1&&(a=-1)}return i<0||n<0||a===0||a===1&&i===n-1&&i===r+1?"":t.slice(i,n)}function JV(...t){let e=-1,n;for(;++e<t.length;)tu(t[e]),t[e]&&(n=n===void 0?t[e]:n+"/"+t[e]);return n===void 0?".":YV(n)}function YV(t){tu(t);const e=t.codePointAt(0)===47;let n=XV(t,!e);return n.length===0&&!e&&(n="."),n.length>0&&t.codePointAt(t.length-1)===47&&(n+="/"),e?"/"+n:n}function XV(t,e){let n="",r=0,i=-1,a=0,l=-1,c,f;for(;++l<=t.length;){if(l<t.length)c=t.codePointAt(l);else{if(c===47)break;c=47}if(c===47){if(!(i===l-1||a===1))if(i!==l-1&&a===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(f=n.lastIndexOf("/"),f!==n.length-1){f<0?(n="",r=0):(n=n.slice(0,f),r=n.length-1-n.lastIndexOf("/")),i=l,a=0;continue}}else if(n.length>0){n="",r=0,i=l,a=0;continue}}e&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+t.slice(i+1,l):n=t.slice(i+1,l),r=l-i-1;i=l,a=0}else c===46&&a>-1?a++:a=-1}return n}function tu(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const WV={cwd:eH};function eH(){return"/"}function Ug(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function tH(t){if(typeof t=="string")t=new URL(t);else if(!Ug(t)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(t.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return nH(t)}function nH(t){if(t.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const e=t.pathname;let n=-1;for(;++n<e.length;)if(e.codePointAt(n)===37&&e.codePointAt(n+1)===50){const r=e.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(e)}const vm=["history","path","basename","stem","extname","dirname"];class VT{constructor(e){let n;e?Ug(e)?n={path:e}:typeof e=="string"||rH(e)?n={value:e}:n=e:n={},this.cwd="cwd"in n?"":WV.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<vm.length;){const a=vm[r];a in n&&n[a]!==void 0&&n[a]!==null&&(this[a]=a==="history"?[...n[a]]:n[a])}let i;for(i in n)vm.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?Lr.basename(this.path):void 0}set basename(e){xm(e,"basename"),wm(e,"basename"),this.path=Lr.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?Lr.dirname(this.path):void 0}set dirname(e){xS(this.basename,"dirname"),this.path=Lr.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?Lr.extname(this.path):void 0}set extname(e){if(wm(e,"extname"),xS(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Lr.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){Ug(e)&&(e=tH(e)),xm(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?Lr.basename(this.path,this.extname):void 0}set stem(e){xm(e,"stem"),wm(e,"stem"),this.path=Lr.join(this.dirname||"",e+(this.extname||""))}fail(e,n,r){const i=this.message(e,n,r);throw i.fatal=!0,i}info(e,n,r){const i=this.message(e,n,r);return i.fatal=void 0,i}message(e,n,r){const i=new yn(e,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function wm(t,e){if(t&&t.includes(Lr.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+Lr.sep+"`")}function xm(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}function xS(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}function rH(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const iH=(function(t){const r=this.constructor.prototype,i=r[t],a=function(){return i.apply(a,arguments)};return Object.setPrototypeOf(a,r),a}),sH={}.hasOwnProperty;class d0 extends iH{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=HV()}copy(){const e=new d0;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];e.use(...r)}return e.data(bm(!0,{},this.namespace)),e}data(e,n){return typeof e=="string"?arguments.length===2?(km("data",this.frozen),this.namespace[e]=n,this):sH.call(this.namespace,e)&&this.namespace[e]||void 0:e?(km("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(e,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const n=jc(e),r=this.parser||this.Parser;return Sm("parse",r),r(String(n),n)}process(e,n){const r=this;return this.freeze(),Sm("process",this.parser||this.Parser),Em("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(a,l){const c=jc(e),f=r.parse(c);r.run(f,c,function(m,p,_){if(m||!p||!_)return h(m);const y=p,v=r.stringify(y,_);lH(v)?_.value=v:_.result=v,h(m,_)});function h(m,p){m||!p?l(m):a?a(p):n(void 0,p)}}}processSync(e){let n=!1,r;return this.freeze(),Sm("processSync",this.parser||this.Parser),Em("processSync",this.compiler||this.Compiler),this.process(e,i),ES("processSync","process",n),r;function i(a,l){n=!0,vS(a),r=l}}run(e,n,r){SS(e),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?a(void 0,r):new Promise(a);function a(l,c){const f=jc(n);i.run(e,f,h);function h(m,p,_){const y=p||e;m?c(m):l?l(y):r(void 0,y,_)}}}runSync(e,n){let r=!1,i;return this.run(e,n,a),ES("runSync","run",r),i;function a(l,c){vS(l),i=c,r=!0}}stringify(e,n){this.freeze();const r=jc(n),i=this.compiler||this.Compiler;return Em("stringify",i),SS(e),i(e,r)}use(e,...n){const r=this.attachers,i=this.namespace;if(km("use",this.frozen),e!=null)if(typeof e=="function")f(e,n);else if(typeof e=="object")Array.isArray(e)?c(e):l(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function a(h){if(typeof h=="function")f(h,[]);else if(typeof h=="object")if(Array.isArray(h)){const[m,...p]=h;f(m,p)}else l(h);else throw new TypeError("Expected usable value, not `"+h+"`")}function l(h){if(!("plugins"in h)&&!("settings"in h))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");c(h.plugins),h.settings&&(i.settings=bm(!0,i.settings,h.settings))}function c(h){let m=-1;if(h!=null)if(Array.isArray(h))for(;++m<h.length;){const p=h[m];a(p)}else throw new TypeError("Expected a list of plugins, not `"+h+"`")}function f(h,m){let p=-1,_=-1;for(;++p<r.length;)if(r[p][0]===h){_=p;break}if(_===-1)r.push([h,...m]);else if(m.length>0){let[y,...v]=m;const w=r[_][1];Bg(w)&&Bg(y)&&(y=bm(!0,w,y)),r[_]=[h,y,...v]}}}}const aH=new d0().freeze();function Sm(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `parser`")}function Em(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `compiler`")}function km(t,e){if(e)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function SS(t){if(!Bg(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}function ES(t,e,n){if(!n)throw new Error("`"+t+"` finished async. Use `"+e+"` instead")}function jc(t){return oH(t)?t:new VT(t)}function oH(t){return!!(t&&typeof t=="object"&&"message"in t&&"messages"in t)}function lH(t){return typeof t=="string"||uH(t)}function uH(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const cH="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",kS=[],CS={allowDangerousHtml:!0},fH=/^(https?|ircs?|mailto|xmpp)$/i,hH=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function dH(t){const e=pH(t),n=mH(t);return gH(e.runSync(e.parse(n),n),t)}function pH(t){const e=t.rehypePlugins||kS,n=t.remarkPlugins||kS,r=t.remarkRehypeOptions?{...t.remarkRehypeOptions,...CS}:CS;return aH().use(ZF).use(n).use(qV,r).use(e)}function mH(t){const e=t.children||"",n=new VT;return typeof e=="string"&&(n.value=e),n}function gH(t,e){const n=e.allowedElements,r=e.allowElement,i=e.components,a=e.disallowedElements,l=e.skipHtml,c=e.unwrapDisallowed,f=e.urlTransform||yH;for(const m of hH)Object.hasOwn(e,m.from)&&(""+m.from+(m.to?"use `"+m.to+"` instead":"remove it")+cH+m.id,void 0);return h0(t,h),I9(t,{Fragment:C.Fragment,components:i,ignoreInvalidStyle:!0,jsx:C.jsx,jsxs:C.jsxs,passKeys:!0,passNode:!0});function h(m,p,_){if(m.type==="raw"&&_&&typeof p=="number")return l?_.children.splice(p,1):_.children[p]={type:"text",value:m.value},p;if(m.type==="element"){let y;for(y in mm)if(Object.hasOwn(mm,y)&&Object.hasOwn(m.properties,y)){const v=m.properties[y],w=mm[y];(w===null||w.includes(m.tagName))&&(m.properties[y]=f(String(v||""),y,m))}}if(m.type==="element"){let y=n?!n.includes(m.tagName):a?a.includes(m.tagName):!1;if(!y&&r&&typeof p=="number"&&(y=!r(m,p,_)),y&&_&&typeof p=="number")return c&&m.children?_.children.splice(p,1,...m.children):_.children.splice(p,1),p}}}function yH(t){const e=t.indexOf(":"),n=t.indexOf("?"),r=t.indexOf("#"),i=t.indexOf("/");return e===-1||i!==-1&&e>i||n!==-1&&e>n||r!==-1&&e>r||fH.test(t.slice(0,e))?t:""}function _H(t){if(typeof t!="string")throw new TypeError("Expected a string");return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function HT(t,e,n){const i=_h((n||{}).ignore||[]),a=bH(e);let l=-1;for(;++l<a.length;)FT(t,"text",c);function c(h,m){let p=-1,_;for(;++p<m.length;){const y=m[p],v=_?_.children:void 0;if(i(y,v?v.indexOf(y):void 0,_))return;_=y}if(_)return f(h,m)}function f(h,m){const p=m[m.length-1],_=a[l][0],y=a[l][1];let v=0;const k=p.children.indexOf(h);let S=!1,R=[];_.lastIndex=0;let T=_.exec(h.value);for(;T;){const z=T.index,L={index:T.index,input:T.input,stack:[...m,h]};let E=y(...T,L);if(typeof E=="string"&&(E=E.length>0?{type:"text",value:E}:void 0),E===!1?_.lastIndex=z+1:(v!==z&&R.push({type:"text",value:h.value.slice(v,z)}),Array.isArray(E)?R.push(...E):E&&R.push(E),v=z+T[0].length,S=!0),!_.global)break;T=_.exec(h.value)}return S?(v<h.value.length&&R.push({type:"text",value:h.value.slice(v)}),p.children.splice(k,1,...R)):R=[h],k+R.length}}function bH(t){const e=[];if(!Array.isArray(t))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!t[0]||Array.isArray(t[0])?t:[t];let r=-1;for(;++r<n.length;){const i=n[r];e.push([vH(i[0]),wH(i[1])])}return e}function vH(t){return typeof t=="string"?new RegExp(_H(t),"g"):t}function wH(t){return typeof t=="function"?t:function(){return t}}const Cm="phrasing",Tm=["autolink","link","image","label"];function xH(){return{transforms:[RH],enter:{literalAutolink:EH,literalAutolinkEmail:Am,literalAutolinkHttp:Am,literalAutolinkWww:Am},exit:{literalAutolink:AH,literalAutolinkEmail:TH,literalAutolinkHttp:kH,literalAutolinkWww:CH}}}function SH(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:Cm,notInConstruct:Tm},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:Cm,notInConstruct:Tm},{character:":",before:"[ps]",after:"\\/",inConstruct:Cm,notInConstruct:Tm}]}}function EH(t){this.enter({type:"link",title:null,url:"",children:[]},t)}function Am(t){this.config.enter.autolinkProtocol.call(this,t)}function kH(t){this.config.exit.autolinkProtocol.call(this,t)}function CH(t){this.config.exit.data.call(this,t);const e=this.stack[this.stack.length-1];e.type,e.url="http://"+this.sliceSerialize(t)}function TH(t){this.config.exit.autolinkEmail.call(this,t)}function AH(t){this.exit(t)}function RH(t){HT(t,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,OH],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),IH]],{ignore:["link","linkReference"]})}function OH(t,e,n,r,i){let a="";if(!GT(i)||(/^w/i.test(e)&&(n=e+n,e="",a="http://"),!NH(n)))return!1;const l=DH(n+r);if(!l[0])return!1;const c={type:"link",title:null,url:a+e+l[0],children:[{type:"text",value:e+l[0]}]};return l[1]?[c,{type:"text",value:l[1]}]:c}function IH(t,e,n,r){return!GT(r,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+e+"@"+n,children:[{type:"text",value:e+"@"+n}]}}function NH(t){const e=t.split(".");return!(e.length<2||e[e.length-1]&&(/_/.test(e[e.length-1])||!/[a-zA-Z\d]/.test(e[e.length-1]))||e[e.length-2]&&(/_/.test(e[e.length-2])||!/[a-zA-Z\d]/.test(e[e.length-2])))}function DH(t){const e=/[!"&'),.:;<>?\]}]+$/.exec(t);if(!e)return[t,void 0];t=t.slice(0,e.index);let n=e[0],r=n.indexOf(")");const i=vf(t,"(");let a=vf(t,")");for(;r!==-1&&i>a;)t+=n.slice(0,r+1),n=n.slice(r+1),r=n.indexOf(")"),a++;return[t,n]}function GT(t,e){const n=t.input.charCodeAt(t.index-1);return(t.index===0||Ms(n)||mh(n))&&(!e||n!==47)}KT.peek=qH;function MH(){this.buffer()}function LH(t){this.enter({type:"footnoteReference",identifier:"",label:""},t)}function zH(){this.buffer()}function PH(t){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},t)}function jH(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Cr(this.sliceSerialize(t)).toLowerCase(),n.label=e}function BH(t){this.exit(t)}function UH(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Cr(this.sliceSerialize(t)).toLowerCase(),n.label=e}function $H(t){this.exit(t)}function qH(){return"["}function KT(t,e,n,r){const i=n.createTracker(r);let a=i.move("[^");const l=n.enter("footnoteReference"),c=n.enter("reference");return a+=i.move(n.safe(n.associationId(t),{after:"]",before:a})),c(),l(),a+=i.move("]"),a}function FH(){return{enter:{gfmFootnoteCallString:MH,gfmFootnoteCall:LH,gfmFootnoteDefinitionLabelString:zH,gfmFootnoteDefinition:PH},exit:{gfmFootnoteCallString:jH,gfmFootnoteCall:BH,gfmFootnoteDefinitionLabelString:UH,gfmFootnoteDefinition:$H}}}function VH(t){let e=!1;return t&&t.firstLineBlank&&(e=!0),{handlers:{footnoteDefinition:n,footnoteReference:KT},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(r,i,a,l){const c=a.createTracker(l);let f=c.move("[^");const h=a.enter("footnoteDefinition"),m=a.enter("label");return f+=c.move(a.safe(a.associationId(r),{before:f,after:"]"})),m(),f+=c.move("]:"),r.children&&r.children.length>0&&(c.shift(4),f+=c.move((e?`
`:" ")+a.indentLines(a.containerFlow(r,c.current()),e?ZT:HH))),h(),f}}function HH(t,e,n){return e===0?t:ZT(t,e,n)}function ZT(t,e,n){return(n?"":"    ")+t}const GH=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];QT.peek=YH;function KH(){return{canContainEols:["delete"],enter:{strikethrough:QH},exit:{strikethrough:JH}}}function ZH(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:GH}],handlers:{delete:QT}}}function QH(t){this.enter({type:"delete",children:[]},t)}function JH(t){this.exit(t)}function QT(t,e,n,r){const i=n.createTracker(r),a=n.enter("strikethrough");let l=i.move("~~");return l+=n.containerPhrasing(t,{...i.current(),before:l,after:"~"}),l+=i.move("~~"),a(),l}function YH(){return"~"}function XH(t){return t.length}function WH(t,e){const n=e||{},r=(n.align||[]).concat(),i=n.stringLength||XH,a=[],l=[],c=[],f=[];let h=0,m=-1;for(;++m<t.length;){const w=[],k=[];let S=-1;for(t[m].length>h&&(h=t[m].length);++S<t[m].length;){const R=e7(t[m][S]);if(n.alignDelimiters!==!1){const T=i(R);k[S]=T,(f[S]===void 0||T>f[S])&&(f[S]=T)}w.push(R)}l[m]=w,c[m]=k}let p=-1;if(typeof r=="object"&&"length"in r)for(;++p<h;)a[p]=TS(r[p]);else{const w=TS(r);for(;++p<h;)a[p]=w}p=-1;const _=[],y=[];for(;++p<h;){const w=a[p];let k="",S="";w===99?(k=":",S=":"):w===108?k=":":w===114&&(S=":");let R=n.alignDelimiters===!1?1:Math.max(1,f[p]-k.length-S.length);const T=k+"-".repeat(R)+S;n.alignDelimiters!==!1&&(R=k.length+R+S.length,R>f[p]&&(f[p]=R),y[p]=R),_[p]=T}l.splice(1,0,_),c.splice(1,0,y),m=-1;const v=[];for(;++m<l.length;){const w=l[m],k=c[m];p=-1;const S=[];for(;++p<h;){const R=w[p]||"";let T="",z="";if(n.alignDelimiters!==!1){const L=f[p]-(k[p]||0),E=a[p];E===114?T=" ".repeat(L):E===99?L%2?(T=" ".repeat(L/2+.5),z=" ".repeat(L/2-.5)):(T=" ".repeat(L/2),z=T):z=" ".repeat(L)}n.delimiterStart!==!1&&!p&&S.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&R==="")&&(n.delimiterStart!==!1||p)&&S.push(" "),n.alignDelimiters!==!1&&S.push(T),S.push(R),n.alignDelimiters!==!1&&S.push(z),n.padding!==!1&&S.push(" "),(n.delimiterEnd!==!1||p!==h-1)&&S.push("|")}v.push(n.delimiterEnd===!1?S.join("").replace(/ +$/,""):S.join(""))}return v.join(`
`)}function e7(t){return t==null?"":String(t)}function TS(t){const e=typeof t=="string"?t.codePointAt(0):0;return e===67||e===99?99:e===76||e===108?108:e===82||e===114?114:0}function t7(t,e,n,r){const i=n.enter("blockquote"),a=n.createTracker(r);a.move("> "),a.shift(2);const l=n.indentLines(n.containerFlow(t,a.current()),n7);return i(),l}function n7(t,e,n){return">"+(n?"":" ")+t}function r7(t,e){return AS(t,e.inConstruct,!0)&&!AS(t,e.notInConstruct,!1)}function AS(t,e,n){if(typeof e=="string"&&(e=[e]),!e||e.length===0)return n;let r=-1;for(;++r<e.length;)if(t.includes(e[r]))return!0;return!1}function RS(t,e,n,r){let i=-1;for(;++i<n.unsafe.length;)if(n.unsafe[i].character===`
`&&r7(n.stack,n.unsafe[i]))return/[ \t]/.test(r.before)?"":" ";return`\\
`}function i7(t,e){const n=String(t);let r=n.indexOf(e),i=r,a=0,l=0;if(typeof e!="string")throw new TypeError("Expected substring");for(;r!==-1;)r===i?++a>l&&(l=a):a=1,i=r+e.length,r=n.indexOf(e,i);return l}function s7(t,e){return!!(e.options.fences===!1&&t.value&&!t.lang&&/[^ \r\n]/.test(t.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(t.value))}function a7(t){const e=t.options.fence||"`";if(e!=="`"&&e!=="~")throw new Error("Cannot serialize code with `"+e+"` for `options.fence`, expected `` ` `` or `~`");return e}function o7(t,e,n,r){const i=a7(n),a=t.value||"",l=i==="`"?"GraveAccent":"Tilde";if(s7(t,n)){const p=n.enter("codeIndented"),_=n.indentLines(a,l7);return p(),_}const c=n.createTracker(r),f=i.repeat(Math.max(i7(a,i)+1,3)),h=n.enter("codeFenced");let m=c.move(f);if(t.lang){const p=n.enter(`codeFencedLang${l}`);m+=c.move(n.safe(t.lang,{before:m,after:" ",encode:["`"],...c.current()})),p()}if(t.lang&&t.meta){const p=n.enter(`codeFencedMeta${l}`);m+=c.move(" "),m+=c.move(n.safe(t.meta,{before:m,after:`
`,encode:["`"],...c.current()})),p()}return m+=c.move(`
`),a&&(m+=c.move(a+`
`)),m+=c.move(f),h(),m}function l7(t,e,n){return(n?"":"    ")+t}function p0(t){const e=t.options.quote||'"';if(e!=='"'&&e!=="'")throw new Error("Cannot serialize title with `"+e+"` for `options.quote`, expected `\"`, or `'`");return e}function u7(t,e,n,r){const i=p0(n),a=i==='"'?"Quote":"Apostrophe",l=n.enter("definition");let c=n.enter("label");const f=n.createTracker(r);let h=f.move("[");return h+=f.move(n.safe(n.associationId(t),{before:h,after:"]",...f.current()})),h+=f.move("]: "),c(),!t.url||/[\0- \u007F]/.test(t.url)?(c=n.enter("destinationLiteral"),h+=f.move("<"),h+=f.move(n.safe(t.url,{before:h,after:">",...f.current()})),h+=f.move(">")):(c=n.enter("destinationRaw"),h+=f.move(n.safe(t.url,{before:h,after:t.title?" ":`
`,...f.current()}))),c(),t.title&&(c=n.enter(`title${a}`),h+=f.move(" "+i),h+=f.move(n.safe(t.title,{before:h,after:i,...f.current()})),h+=f.move(i),c()),l(),h}function c7(t){const e=t.options.emphasis||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize emphasis with `"+e+"` for `options.emphasis`, expected `*`, or `_`");return e}function Fl(t){return"&#x"+t.toString(16).toUpperCase()+";"}function Ff(t,e,n){const r=Ha(t),i=Ha(e);return r===void 0?i===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:r===1?i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}JT.peek=f7;function JT(t,e,n,r){const i=c7(n),a=n.enter("emphasis"),l=n.createTracker(r),c=l.move(i);let f=l.move(n.containerPhrasing(t,{after:i,before:c,...l.current()}));const h=f.charCodeAt(0),m=Ff(r.before.charCodeAt(r.before.length-1),h,i);m.inside&&(f=Fl(h)+f.slice(1));const p=f.charCodeAt(f.length-1),_=Ff(r.after.charCodeAt(0),p,i);_.inside&&(f=f.slice(0,-1)+Fl(p));const y=l.move(i);return a(),n.attentionEncodeSurroundingInfo={after:_.outside,before:m.outside},c+f+y}function f7(t,e,n){return n.options.emphasis||"*"}function h7(t,e){let n=!1;return h0(t,function(r){if("value"in r&&/\r?\n|\r/.test(r.value)||r.type==="break")return n=!0,Pg}),!!((!t.depth||t.depth<3)&&s0(t)&&(e.options.setext||n))}function d7(t,e,n,r){const i=Math.max(Math.min(6,t.depth||1),1),a=n.createTracker(r);if(h7(t,n)){const m=n.enter("headingSetext"),p=n.enter("phrasing"),_=n.containerPhrasing(t,{...a.current(),before:`
`,after:`
`});return p(),m(),_+`
`+(i===1?"=":"-").repeat(_.length-(Math.max(_.lastIndexOf("\r"),_.lastIndexOf(`
`))+1))}const l="#".repeat(i),c=n.enter("headingAtx"),f=n.enter("phrasing");a.move(l+" ");let h=n.containerPhrasing(t,{before:"# ",after:`
`,...a.current()});return/^[\t ]/.test(h)&&(h=Fl(h.charCodeAt(0))+h.slice(1)),h=h?l+" "+h:l,n.options.closeAtx&&(h+=" "+l),f(),c(),h}YT.peek=p7;function YT(t){return t.value||""}function p7(){return"<"}XT.peek=m7;function XT(t,e,n,r){const i=p0(n),a=i==='"'?"Quote":"Apostrophe",l=n.enter("image");let c=n.enter("label");const f=n.createTracker(r);let h=f.move("![");return h+=f.move(n.safe(t.alt,{before:h,after:"]",...f.current()})),h+=f.move("]("),c(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(c=n.enter("destinationLiteral"),h+=f.move("<"),h+=f.move(n.safe(t.url,{before:h,after:">",...f.current()})),h+=f.move(">")):(c=n.enter("destinationRaw"),h+=f.move(n.safe(t.url,{before:h,after:t.title?" ":")",...f.current()}))),c(),t.title&&(c=n.enter(`title${a}`),h+=f.move(" "+i),h+=f.move(n.safe(t.title,{before:h,after:i,...f.current()})),h+=f.move(i),c()),h+=f.move(")"),l(),h}function m7(){return"!"}WT.peek=g7;function WT(t,e,n,r){const i=t.referenceType,a=n.enter("imageReference");let l=n.enter("label");const c=n.createTracker(r);let f=c.move("![");const h=n.safe(t.alt,{before:f,after:"]",...c.current()});f+=c.move(h+"]["),l();const m=n.stack;n.stack=[],l=n.enter("reference");const p=n.safe(n.associationId(t),{before:f,after:"]",...c.current()});return l(),n.stack=m,a(),i==="full"||!h||h!==p?f+=c.move(p+"]"):i==="shortcut"?f=f.slice(0,-1):f+=c.move("]"),f}function g7(){return"!"}eA.peek=y7;function eA(t,e,n){let r=t.value||"",i="`",a=-1;for(;new RegExp("(^|[^`])"+i+"([^`]|$)").test(r);)i+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++a<n.unsafe.length;){const l=n.unsafe[a],c=n.compilePattern(l);let f;if(l.atBreak)for(;f=c.exec(r);){let h=f.index;r.charCodeAt(h)===10&&r.charCodeAt(h-1)===13&&h--,r=r.slice(0,h)+" "+r.slice(f.index+1)}}return i+r+i}function y7(){return"`"}function tA(t,e){const n=s0(t);return!!(!e.options.resourceLink&&t.url&&!t.title&&t.children&&t.children.length===1&&t.children[0].type==="text"&&(n===t.url||"mailto:"+n===t.url)&&/^[a-z][a-z+.-]+:/i.test(t.url)&&!/[\0- <>\u007F]/.test(t.url))}nA.peek=_7;function nA(t,e,n,r){const i=p0(n),a=i==='"'?"Quote":"Apostrophe",l=n.createTracker(r);let c,f;if(tA(t,n)){const m=n.stack;n.stack=[],c=n.enter("autolink");let p=l.move("<");return p+=l.move(n.containerPhrasing(t,{before:p,after:">",...l.current()})),p+=l.move(">"),c(),n.stack=m,p}c=n.enter("link"),f=n.enter("label");let h=l.move("[");return h+=l.move(n.containerPhrasing(t,{before:h,after:"](",...l.current()})),h+=l.move("]("),f(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(f=n.enter("destinationLiteral"),h+=l.move("<"),h+=l.move(n.safe(t.url,{before:h,after:">",...l.current()})),h+=l.move(">")):(f=n.enter("destinationRaw"),h+=l.move(n.safe(t.url,{before:h,after:t.title?" ":")",...l.current()}))),f(),t.title&&(f=n.enter(`title${a}`),h+=l.move(" "+i),h+=l.move(n.safe(t.title,{before:h,after:i,...l.current()})),h+=l.move(i),f()),h+=l.move(")"),c(),h}function _7(t,e,n){return tA(t,n)?"<":"["}rA.peek=b7;function rA(t,e,n,r){const i=t.referenceType,a=n.enter("linkReference");let l=n.enter("label");const c=n.createTracker(r);let f=c.move("[");const h=n.containerPhrasing(t,{before:f,after:"]",...c.current()});f+=c.move(h+"]["),l();const m=n.stack;n.stack=[],l=n.enter("reference");const p=n.safe(n.associationId(t),{before:f,after:"]",...c.current()});return l(),n.stack=m,a(),i==="full"||!h||h!==p?f+=c.move(p+"]"):i==="shortcut"?f=f.slice(0,-1):f+=c.move("]"),f}function b7(){return"["}function m0(t){const e=t.options.bullet||"*";if(e!=="*"&&e!=="+"&&e!=="-")throw new Error("Cannot serialize items with `"+e+"` for `options.bullet`, expected `*`, `+`, or `-`");return e}function v7(t){const e=m0(t),n=t.options.bulletOther;if(!n)return e==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===e)throw new Error("Expected `bullet` (`"+e+"`) and `bulletOther` (`"+n+"`) to be different");return n}function w7(t){const e=t.options.bulletOrdered||".";if(e!=="."&&e!==")")throw new Error("Cannot serialize items with `"+e+"` for `options.bulletOrdered`, expected `.` or `)`");return e}function iA(t){const e=t.options.rule||"*";if(e!=="*"&&e!=="-"&&e!=="_")throw new Error("Cannot serialize rules with `"+e+"` for `options.rule`, expected `*`, `-`, or `_`");return e}function x7(t,e,n,r){const i=n.enter("list"),a=n.bulletCurrent;let l=t.ordered?w7(n):m0(n);const c=t.ordered?l==="."?")":".":v7(n);let f=e&&n.bulletLastUsed?l===n.bulletLastUsed:!1;if(!t.ordered){const m=t.children?t.children[0]:void 0;if((l==="*"||l==="-")&&m&&(!m.children||!m.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(f=!0),iA(n)===l&&m){let p=-1;for(;++p<t.children.length;){const _=t.children[p];if(_&&_.type==="listItem"&&_.children&&_.children[0]&&_.children[0].type==="thematicBreak"){f=!0;break}}}}f&&(l=c),n.bulletCurrent=l;const h=n.containerFlow(t,r);return n.bulletLastUsed=l,n.bulletCurrent=a,i(),h}function S7(t){const e=t.options.listItemIndent||"one";if(e!=="tab"&&e!=="one"&&e!=="mixed")throw new Error("Cannot serialize items with `"+e+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return e}function E7(t,e,n,r){const i=S7(n);let a=n.bulletCurrent||m0(n);e&&e.type==="list"&&e.ordered&&(a=(typeof e.start=="number"&&e.start>-1?e.start:1)+(n.options.incrementListMarker===!1?0:e.children.indexOf(t))+a);let l=a.length+1;(i==="tab"||i==="mixed"&&(e&&e.type==="list"&&e.spread||t.spread))&&(l=Math.ceil(l/4)*4);const c=n.createTracker(r);c.move(a+" ".repeat(l-a.length)),c.shift(l);const f=n.enter("listItem"),h=n.indentLines(n.containerFlow(t,c.current()),m);return f(),h;function m(p,_,y){return _?(y?"":" ".repeat(l))+p:(y?a:a+" ".repeat(l-a.length))+p}}function k7(t,e,n,r){const i=n.enter("paragraph"),a=n.enter("phrasing"),l=n.containerPhrasing(t,r);return a(),i(),l}const C7=_h(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function T7(t,e,n,r){return(t.children.some(function(l){return C7(l)})?n.containerPhrasing:n.containerFlow).call(n,t,r)}function A7(t){const e=t.options.strong||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize strong with `"+e+"` for `options.strong`, expected `*`, or `_`");return e}sA.peek=R7;function sA(t,e,n,r){const i=A7(n),a=n.enter("strong"),l=n.createTracker(r),c=l.move(i+i);let f=l.move(n.containerPhrasing(t,{after:i,before:c,...l.current()}));const h=f.charCodeAt(0),m=Ff(r.before.charCodeAt(r.before.length-1),h,i);m.inside&&(f=Fl(h)+f.slice(1));const p=f.charCodeAt(f.length-1),_=Ff(r.after.charCodeAt(0),p,i);_.inside&&(f=f.slice(0,-1)+Fl(p));const y=l.move(i+i);return a(),n.attentionEncodeSurroundingInfo={after:_.outside,before:m.outside},c+f+y}function R7(t,e,n){return n.options.strong||"*"}function O7(t,e,n,r){return n.safe(t.value,r)}function I7(t){const e=t.options.ruleRepetition||3;if(e<3)throw new Error("Cannot serialize rules with repetition `"+e+"` for `options.ruleRepetition`, expected `3` or more");return e}function N7(t,e,n){const r=(iA(n)+(n.options.ruleSpaces?" ":"")).repeat(I7(n));return n.options.ruleSpaces?r.slice(0,-1):r}const aA={blockquote:t7,break:RS,code:o7,definition:u7,emphasis:JT,hardBreak:RS,heading:d7,html:YT,image:XT,imageReference:WT,inlineCode:eA,link:nA,linkReference:rA,list:x7,listItem:E7,paragraph:k7,root:T7,strong:sA,text:O7,thematicBreak:N7};function D7(){return{enter:{table:M7,tableData:OS,tableHeader:OS,tableRow:z7},exit:{codeText:P7,table:L7,tableData:Rm,tableHeader:Rm,tableRow:Rm}}}function M7(t){const e=t._align;this.enter({type:"table",align:e.map(function(n){return n==="none"?null:n}),children:[]},t),this.data.inTable=!0}function L7(t){this.exit(t),this.data.inTable=void 0}function z7(t){this.enter({type:"tableRow",children:[]},t)}function Rm(t){this.exit(t)}function OS(t){this.enter({type:"tableCell",children:[]},t)}function P7(t){let e=this.resume();this.data.inTable&&(e=e.replace(/\\([\\|])/g,j7));const n=this.stack[this.stack.length-1];n.type,n.value=e,this.exit(t)}function j7(t,e){return e==="|"?e:t}function B7(t){const e=t||{},n=e.tableCellPadding,r=e.tablePipeAlign,i=e.stringLength,a=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:_,table:l,tableCell:f,tableRow:c}};function l(y,v,w,k){return h(m(y,w,k),y.align)}function c(y,v,w,k){const S=p(y,w,k),R=h([S]);return R.slice(0,R.indexOf(`
`))}function f(y,v,w,k){const S=w.enter("tableCell"),R=w.enter("phrasing"),T=w.containerPhrasing(y,{...k,before:a,after:a});return R(),S(),T}function h(y,v){return WH(y,{align:v,alignDelimiters:r,padding:n,stringLength:i})}function m(y,v,w){const k=y.children;let S=-1;const R=[],T=v.enter("table");for(;++S<k.length;)R[S]=p(k[S],v,w);return T(),R}function p(y,v,w){const k=y.children;let S=-1;const R=[],T=v.enter("tableRow");for(;++S<k.length;)R[S]=f(k[S],y,v,w);return T(),R}function _(y,v,w){let k=aA.inlineCode(y,v,w);return w.stack.includes("tableCell")&&(k=k.replace(/\|/g,"\\$&")),k}}function U7(){return{exit:{taskListCheckValueChecked:IS,taskListCheckValueUnchecked:IS,paragraph:q7}}}function $7(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:F7}}}function IS(t){const e=this.stack[this.stack.length-2];e.type,e.checked=t.type==="taskListCheckValueChecked"}function q7(t){const e=this.stack[this.stack.length-2];if(e&&e.type==="listItem"&&typeof e.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const r=n.children[0];if(r&&r.type==="text"){const i=e.children;let a=-1,l;for(;++a<i.length;){const c=i[a];if(c.type==="paragraph"){l=c;break}}l===n&&(r.value=r.value.slice(1),r.value.length===0?n.children.shift():n.position&&r.position&&typeof r.position.start.offset=="number"&&(r.position.start.column++,r.position.start.offset++,n.position.start=Object.assign({},r.position.start)))}}this.exit(t)}function F7(t,e,n,r){const i=t.children[0],a=typeof t.checked=="boolean"&&i&&i.type==="paragraph",l="["+(t.checked?"x":" ")+"] ",c=n.createTracker(r);a&&c.move(l);let f=aA.listItem(t,e,n,{...r,...c.current()});return a&&(f=f.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,h)),f;function h(m){return m+l}}function V7(){return[xH(),FH(),KH(),D7(),U7()]}function H7(t){return{extensions:[SH(),VH(t),ZH(),B7(t),$7()]}}const G7={tokenize:X7,partial:!0},oA={tokenize:W7,partial:!0},lA={tokenize:eG,partial:!0},uA={tokenize:tG,partial:!0},K7={tokenize:nG,partial:!0},cA={name:"wwwAutolink",tokenize:J7,previous:hA},fA={name:"protocolAutolink",tokenize:Y7,previous:dA},di={name:"emailAutolink",tokenize:Q7,previous:pA},qr={};function Z7(){return{text:qr}}let ws=48;for(;ws<123;)qr[ws]=di,ws++,ws===58?ws=65:ws===91&&(ws=97);qr[43]=di;qr[45]=di;qr[46]=di;qr[95]=di;qr[72]=[di,fA];qr[104]=[di,fA];qr[87]=[di,cA];qr[119]=[di,cA];function Q7(t,e,n){const r=this;let i,a;return l;function l(p){return!$g(p)||!pA.call(r,r.previous)||g0(r.events)?n(p):(t.enter("literalAutolink"),t.enter("literalAutolinkEmail"),c(p))}function c(p){return $g(p)?(t.consume(p),c):p===64?(t.consume(p),f):n(p)}function f(p){return p===46?t.check(K7,m,h)(p):p===45||p===95||gn(p)?(a=!0,t.consume(p),f):m(p)}function h(p){return t.consume(p),i=!0,f}function m(p){return a&&i&&En(r.previous)?(t.exit("literalAutolinkEmail"),t.exit("literalAutolink"),e(p)):n(p)}}function J7(t,e,n){const r=this;return i;function i(l){return l!==87&&l!==119||!hA.call(r,r.previous)||g0(r.events)?n(l):(t.enter("literalAutolink"),t.enter("literalAutolinkWww"),t.check(G7,t.attempt(oA,t.attempt(lA,a),n),n)(l))}function a(l){return t.exit("literalAutolinkWww"),t.exit("literalAutolink"),e(l)}}function Y7(t,e,n){const r=this;let i="",a=!1;return l;function l(p){return(p===72||p===104)&&dA.call(r,r.previous)&&!g0(r.events)?(t.enter("literalAutolink"),t.enter("literalAutolinkHttp"),i+=String.fromCodePoint(p),t.consume(p),c):n(p)}function c(p){if(En(p)&&i.length<5)return i+=String.fromCodePoint(p),t.consume(p),c;if(p===58){const _=i.toLowerCase();if(_==="http"||_==="https")return t.consume(p),f}return n(p)}function f(p){return p===47?(t.consume(p),a?h:(a=!0,f)):n(p)}function h(p){return p===null||Uf(p)||ut(p)||Ms(p)||mh(p)?n(p):t.attempt(oA,t.attempt(lA,m),n)(p)}function m(p){return t.exit("literalAutolinkHttp"),t.exit("literalAutolink"),e(p)}}function X7(t,e,n){let r=0;return i;function i(l){return(l===87||l===119)&&r<3?(r++,t.consume(l),i):l===46&&r===3?(t.consume(l),a):n(l)}function a(l){return l===null?n(l):e(l)}}function W7(t,e,n){let r,i,a;return l;function l(h){return h===46||h===95?t.check(uA,f,c)(h):h===null||ut(h)||Ms(h)||h!==45&&mh(h)?f(h):(a=!0,t.consume(h),l)}function c(h){return h===95?r=!0:(i=r,r=void 0),t.consume(h),l}function f(h){return i||r||!a?n(h):e(h)}}function eG(t,e){let n=0,r=0;return i;function i(l){return l===40?(n++,t.consume(l),i):l===41&&r<n?a(l):l===33||l===34||l===38||l===39||l===41||l===42||l===44||l===46||l===58||l===59||l===60||l===63||l===93||l===95||l===126?t.check(uA,e,a)(l):l===null||ut(l)||Ms(l)?e(l):(t.consume(l),i)}function a(l){return l===41&&r++,t.consume(l),i}}function tG(t,e,n){return r;function r(c){return c===33||c===34||c===39||c===41||c===42||c===44||c===46||c===58||c===59||c===63||c===95||c===126?(t.consume(c),r):c===38?(t.consume(c),a):c===93?(t.consume(c),i):c===60||c===null||ut(c)||Ms(c)?e(c):n(c)}function i(c){return c===null||c===40||c===91||ut(c)||Ms(c)?e(c):r(c)}function a(c){return En(c)?l(c):n(c)}function l(c){return c===59?(t.consume(c),r):En(c)?(t.consume(c),l):n(c)}}function nG(t,e,n){return r;function r(a){return t.consume(a),i}function i(a){return gn(a)?n(a):e(a)}}function hA(t){return t===null||t===40||t===42||t===95||t===91||t===93||t===126||ut(t)}function dA(t){return!En(t)}function pA(t){return!(t===47||$g(t))}function $g(t){return t===43||t===45||t===46||t===95||gn(t)}function g0(t){let e=t.length,n=!1;for(;e--;){const r=t[e][1];if((r.type==="labelLink"||r.type==="labelImage")&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return t.length>0&&!n&&(t[t.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const rG={tokenize:fG,partial:!0};function iG(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:lG,continuation:{tokenize:uG},exit:cG}},text:{91:{name:"gfmFootnoteCall",tokenize:oG},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:sG,resolveTo:aG}}}}function sG(t,e,n){const r=this;let i=r.events.length;const a=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let l;for(;i--;){const f=r.events[i][1];if(f.type==="labelImage"){l=f;break}if(f.type==="gfmFootnoteCall"||f.type==="labelLink"||f.type==="label"||f.type==="image"||f.type==="link")break}return c;function c(f){if(!l||!l._balanced)return n(f);const h=Cr(r.sliceSerialize({start:l.end,end:r.now()}));return h.codePointAt(0)!==94||!a.includes(h.slice(1))?n(f):(t.enter("gfmFootnoteCallLabelMarker"),t.consume(f),t.exit("gfmFootnoteCallLabelMarker"),e(f))}}function aG(t,e){let n=t.length;for(;n--;)if(t[n][1].type==="labelImage"&&t[n][0]==="enter"){t[n][1];break}t[n+1][1].type="data",t[n+3][1].type="gfmFootnoteCallLabelMarker";const r={type:"gfmFootnoteCall",start:Object.assign({},t[n+3][1].start),end:Object.assign({},t[t.length-1][1].end)},i={type:"gfmFootnoteCallMarker",start:Object.assign({},t[n+3][1].end),end:Object.assign({},t[n+3][1].end)};i.end.column++,i.end.offset++,i.end._bufferIndex++;const a={type:"gfmFootnoteCallString",start:Object.assign({},i.end),end:Object.assign({},t[t.length-1][1].start)},l={type:"chunkString",contentType:"string",start:Object.assign({},a.start),end:Object.assign({},a.end)},c=[t[n+1],t[n+2],["enter",r,e],t[n+3],t[n+4],["enter",i,e],["exit",i,e],["enter",a,e],["enter",l,e],["exit",l,e],["exit",a,e],t[t.length-2],t[t.length-1],["exit",r,e]];return t.splice(n,t.length-n+1,...c),t}function oG(t,e,n){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let a=0,l;return c;function c(p){return t.enter("gfmFootnoteCall"),t.enter("gfmFootnoteCallLabelMarker"),t.consume(p),t.exit("gfmFootnoteCallLabelMarker"),f}function f(p){return p!==94?n(p):(t.enter("gfmFootnoteCallMarker"),t.consume(p),t.exit("gfmFootnoteCallMarker"),t.enter("gfmFootnoteCallString"),t.enter("chunkString").contentType="string",h)}function h(p){if(a>999||p===93&&!l||p===null||p===91||ut(p))return n(p);if(p===93){t.exit("chunkString");const _=t.exit("gfmFootnoteCallString");return i.includes(Cr(r.sliceSerialize(_)))?(t.enter("gfmFootnoteCallLabelMarker"),t.consume(p),t.exit("gfmFootnoteCallLabelMarker"),t.exit("gfmFootnoteCall"),e):n(p)}return ut(p)||(l=!0),a++,t.consume(p),p===92?m:h}function m(p){return p===91||p===92||p===93?(t.consume(p),a++,h):h(p)}}function lG(t,e,n){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let a,l=0,c;return f;function f(v){return t.enter("gfmFootnoteDefinition")._container=!0,t.enter("gfmFootnoteDefinitionLabel"),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(v),t.exit("gfmFootnoteDefinitionLabelMarker"),h}function h(v){return v===94?(t.enter("gfmFootnoteDefinitionMarker"),t.consume(v),t.exit("gfmFootnoteDefinitionMarker"),t.enter("gfmFootnoteDefinitionLabelString"),t.enter("chunkString").contentType="string",m):n(v)}function m(v){if(l>999||v===93&&!c||v===null||v===91||ut(v))return n(v);if(v===93){t.exit("chunkString");const w=t.exit("gfmFootnoteDefinitionLabelString");return a=Cr(r.sliceSerialize(w)),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(v),t.exit("gfmFootnoteDefinitionLabelMarker"),t.exit("gfmFootnoteDefinitionLabel"),_}return ut(v)||(c=!0),l++,t.consume(v),v===92?p:m}function p(v){return v===91||v===92||v===93?(t.consume(v),l++,m):m(v)}function _(v){return v===58?(t.enter("definitionMarker"),t.consume(v),t.exit("definitionMarker"),i.includes(a)||i.push(a),Ze(t,y,"gfmFootnoteDefinitionWhitespace")):n(v)}function y(v){return e(v)}}function uG(t,e,n){return t.check(eu,e,t.attempt(rG,e,n))}function cG(t){t.exit("gfmFootnoteDefinition")}function fG(t,e,n){const r=this;return Ze(t,i,"gfmFootnoteDefinitionIndent",5);function i(a){const l=r.events[r.events.length-1];return l&&l[1].type==="gfmFootnoteDefinitionIndent"&&l[2].sliceSerialize(l[1],!0).length===4?e(a):n(a)}}function hG(t){let n=(t||{}).singleTilde;const r={name:"strikethrough",tokenize:a,resolveAll:i};return n==null&&(n=!0),{text:{126:r},insideSpan:{null:[r]},attentionMarkers:{null:[126]}};function i(l,c){let f=-1;for(;++f<l.length;)if(l[f][0]==="enter"&&l[f][1].type==="strikethroughSequenceTemporary"&&l[f][1]._close){let h=f;for(;h--;)if(l[h][0]==="exit"&&l[h][1].type==="strikethroughSequenceTemporary"&&l[h][1]._open&&l[f][1].end.offset-l[f][1].start.offset===l[h][1].end.offset-l[h][1].start.offset){l[f][1].type="strikethroughSequence",l[h][1].type="strikethroughSequence";const m={type:"strikethrough",start:Object.assign({},l[h][1].start),end:Object.assign({},l[f][1].end)},p={type:"strikethroughText",start:Object.assign({},l[h][1].end),end:Object.assign({},l[f][1].start)},_=[["enter",m,c],["enter",l[h][1],c],["exit",l[h][1],c],["enter",p,c]],y=c.parser.constructs.insideSpan.null;y&&Wn(_,_.length,0,gh(y,l.slice(h+1,f),c)),Wn(_,_.length,0,[["exit",p,c],["enter",l[f][1],c],["exit",l[f][1],c],["exit",m,c]]),Wn(l,h-1,f-h+3,_),f=h+_.length-2;break}}for(f=-1;++f<l.length;)l[f][1].type==="strikethroughSequenceTemporary"&&(l[f][1].type="data");return l}function a(l,c,f){const h=this.previous,m=this.events;let p=0;return _;function _(v){return h===126&&m[m.length-1][1].type!=="characterEscape"?f(v):(l.enter("strikethroughSequenceTemporary"),y(v))}function y(v){const w=Ha(h);if(v===126)return p>1?f(v):(l.consume(v),p++,y);if(p<2&&!n)return f(v);const k=l.exit("strikethroughSequenceTemporary"),S=Ha(v);return k._open=!S||S===2&&!!w,k._close=!w||w===2&&!!S,c(v)}}}class dG{constructor(){this.map=[]}add(e,n,r){pG(this,e,n,r)}consume(e){if(this.map.sort(function(a,l){return a[0]-l[0]}),this.map.length===0)return;let n=this.map.length;const r=[];for(;n>0;)n-=1,r.push(e.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),e.length=this.map[n][0];r.push(e.slice()),e.length=0;let i=r.pop();for(;i;){for(const a of i)e.push(a);i=r.pop()}this.map.length=0}}function pG(t,e,n,r){let i=0;if(!(n===0&&r.length===0)){for(;i<t.map.length;){if(t.map[i][0]===e){t.map[i][1]+=n,t.map[i][2].push(...r);return}i+=1}t.map.push([e,n,r])}}function mG(t,e){let n=!1;const r=[];for(;e<t.length;){const i=t[e];if(n){if(i[0]==="enter")i[1].type==="tableContent"&&r.push(t[e+1][1].type==="tableDelimiterMarker"?"left":"none");else if(i[1].type==="tableContent"){if(t[e-1][1].type==="tableDelimiterMarker"){const a=r.length-1;r[a]=r[a]==="left"?"center":"right"}}else if(i[1].type==="tableDelimiterRow")break}else i[0]==="enter"&&i[1].type==="tableDelimiterRow"&&(n=!0);e+=1}return r}function gG(){return{flow:{null:{name:"table",tokenize:yG,resolveAll:_G}}}}function yG(t,e,n){const r=this;let i=0,a=0,l;return c;function c(P){let Z=r.events.length-1;for(;Z>-1;){const V=r.events[Z][1].type;if(V==="lineEnding"||V==="linePrefix")Z--;else break}const se=Z>-1?r.events[Z][1].type:null,me=se==="tableHead"||se==="tableRow"?E:f;return me===E&&r.parser.lazy[r.now().line]?n(P):me(P)}function f(P){return t.enter("tableHead"),t.enter("tableRow"),h(P)}function h(P){return P===124||(l=!0,a+=1),m(P)}function m(P){return P===null?n(P):Re(P)?a>1?(a=0,r.interrupt=!0,t.exit("tableRow"),t.enter("lineEnding"),t.consume(P),t.exit("lineEnding"),y):n(P):Fe(P)?Ze(t,m,"whitespace")(P):(a+=1,l&&(l=!1,i+=1),P===124?(t.enter("tableCellDivider"),t.consume(P),t.exit("tableCellDivider"),l=!0,m):(t.enter("data"),p(P)))}function p(P){return P===null||P===124||ut(P)?(t.exit("data"),m(P)):(t.consume(P),P===92?_:p)}function _(P){return P===92||P===124?(t.consume(P),p):p(P)}function y(P){return r.interrupt=!1,r.parser.lazy[r.now().line]?n(P):(t.enter("tableDelimiterRow"),l=!1,Fe(P)?Ze(t,v,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(P):v(P))}function v(P){return P===45||P===58?k(P):P===124?(l=!0,t.enter("tableCellDivider"),t.consume(P),t.exit("tableCellDivider"),w):L(P)}function w(P){return Fe(P)?Ze(t,k,"whitespace")(P):k(P)}function k(P){return P===58?(a+=1,l=!0,t.enter("tableDelimiterMarker"),t.consume(P),t.exit("tableDelimiterMarker"),S):P===45?(a+=1,S(P)):P===null||Re(P)?z(P):L(P)}function S(P){return P===45?(t.enter("tableDelimiterFiller"),R(P)):L(P)}function R(P){return P===45?(t.consume(P),R):P===58?(l=!0,t.exit("tableDelimiterFiller"),t.enter("tableDelimiterMarker"),t.consume(P),t.exit("tableDelimiterMarker"),T):(t.exit("tableDelimiterFiller"),T(P))}function T(P){return Fe(P)?Ze(t,z,"whitespace")(P):z(P)}function z(P){return P===124?v(P):P===null||Re(P)?!l||i!==a?L(P):(t.exit("tableDelimiterRow"),t.exit("tableHead"),e(P)):L(P)}function L(P){return n(P)}function E(P){return t.enter("tableRow"),M(P)}function M(P){return P===124?(t.enter("tableCellDivider"),t.consume(P),t.exit("tableCellDivider"),M):P===null||Re(P)?(t.exit("tableRow"),e(P)):Fe(P)?Ze(t,M,"whitespace")(P):(t.enter("data"),$(P))}function $(P){return P===null||P===124||ut(P)?(t.exit("data"),M(P)):(t.consume(P),P===92?F:$)}function F(P){return P===92||P===124?(t.consume(P),$):$(P)}}function _G(t,e){let n=-1,r=!0,i=0,a=[0,0,0,0],l=[0,0,0,0],c=!1,f=0,h,m,p;const _=new dG;for(;++n<t.length;){const y=t[n],v=y[1];y[0]==="enter"?v.type==="tableHead"?(c=!1,f!==0&&(NS(_,e,f,h,m),m=void 0,f=0),h={type:"table",start:Object.assign({},v.start),end:Object.assign({},v.end)},_.add(n,0,[["enter",h,e]])):v.type==="tableRow"||v.type==="tableDelimiterRow"?(r=!0,p=void 0,a=[0,0,0,0],l=[0,n+1,0,0],c&&(c=!1,m={type:"tableBody",start:Object.assign({},v.start),end:Object.assign({},v.end)},_.add(n,0,[["enter",m,e]])),i=v.type==="tableDelimiterRow"?2:m?3:1):i&&(v.type==="data"||v.type==="tableDelimiterMarker"||v.type==="tableDelimiterFiller")?(r=!1,l[2]===0&&(a[1]!==0&&(l[0]=l[1],p=Bc(_,e,a,i,void 0,p),a=[0,0,0,0]),l[2]=n)):v.type==="tableCellDivider"&&(r?r=!1:(a[1]!==0&&(l[0]=l[1],p=Bc(_,e,a,i,void 0,p)),a=l,l=[a[1],n,0,0])):v.type==="tableHead"?(c=!0,f=n):v.type==="tableRow"||v.type==="tableDelimiterRow"?(f=n,a[1]!==0?(l[0]=l[1],p=Bc(_,e,a,i,n,p)):l[1]!==0&&(p=Bc(_,e,l,i,n,p)),i=0):i&&(v.type==="data"||v.type==="tableDelimiterMarker"||v.type==="tableDelimiterFiller")&&(l[3]=n)}for(f!==0&&NS(_,e,f,h,m),_.consume(e.events),n=-1;++n<e.events.length;){const y=e.events[n];y[0]==="enter"&&y[1].type==="table"&&(y[1]._align=mG(e.events,n))}return t}function Bc(t,e,n,r,i,a){const l=r===1?"tableHeader":r===2?"tableDelimiter":"tableData",c="tableContent";n[0]!==0&&(a.end=Object.assign({},Ia(e.events,n[0])),t.add(n[0],0,[["exit",a,e]]));const f=Ia(e.events,n[1]);if(a={type:l,start:Object.assign({},f),end:Object.assign({},f)},t.add(n[1],0,[["enter",a,e]]),n[2]!==0){const h=Ia(e.events,n[2]),m=Ia(e.events,n[3]),p={type:c,start:Object.assign({},h),end:Object.assign({},m)};if(t.add(n[2],0,[["enter",p,e]]),r!==2){const _=e.events[n[2]],y=e.events[n[3]];if(_[1].end=Object.assign({},y[1].end),_[1].type="chunkText",_[1].contentType="text",n[3]>n[2]+1){const v=n[2]+1,w=n[3]-n[2]-1;t.add(v,w,[])}}t.add(n[3]+1,0,[["exit",p,e]])}return i!==void 0&&(a.end=Object.assign({},Ia(e.events,i)),t.add(i,0,[["exit",a,e]]),a=void 0),a}function NS(t,e,n,r,i){const a=[],l=Ia(e.events,n);i&&(i.end=Object.assign({},l),a.push(["exit",i,e])),r.end=Object.assign({},l),a.push(["exit",r,e]),t.add(n+1,0,a)}function Ia(t,e){const n=t[e],r=n[0]==="enter"?"start":"end";return n[1][r]}const bG={name:"tasklistCheck",tokenize:wG};function vG(){return{text:{91:bG}}}function wG(t,e,n){const r=this;return i;function i(f){return r.previous!==null||!r._gfmTasklistFirstContentOfListItem?n(f):(t.enter("taskListCheck"),t.enter("taskListCheckMarker"),t.consume(f),t.exit("taskListCheckMarker"),a)}function a(f){return ut(f)?(t.enter("taskListCheckValueUnchecked"),t.consume(f),t.exit("taskListCheckValueUnchecked"),l):f===88||f===120?(t.enter("taskListCheckValueChecked"),t.consume(f),t.exit("taskListCheckValueChecked"),l):n(f)}function l(f){return f===93?(t.enter("taskListCheckMarker"),t.consume(f),t.exit("taskListCheckMarker"),t.exit("taskListCheck"),c):n(f)}function c(f){return Re(f)?e(f):Fe(f)?t.check({tokenize:xG},e,n)(f):n(f)}}function xG(t,e,n){return Ze(t,r,"whitespace");function r(i){return i===null?n(i):e(i)}}function SG(t){return ET([Z7(),iG(),hG(t),gG(),vG()])}const EG={};function kG(t){const e=this,n=t||EG,r=e.data(),i=r.micromarkExtensions||(r.micromarkExtensions=[]),a=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),l=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);i.push(SG(n)),a.push(V7()),l.push(H7(n))}function CG(t){HT(t,[/\r?\n|\r/g,TG])}function TG(){return{type:"break"}}function AG(){return function(t){CG(t)}}const RG={pre:({children:t})=>C.jsx(C.Fragment,{children:t}),li:({children:t,...e})=>C.jsx("li",{className:"py-0.5 ml-0",...e,children:t}),ul:({children:t,...e})=>C.jsx("ul",{className:"list-disc list-outside ml-5 pl-0 my-2",...e,children:t}),ol:({children:t,...e})=>C.jsx("ol",{className:"list-decimal list-outside ml-5 pl-0 my-2",...e,children:t}),strong:({children:t,...e})=>C.jsx("span",{className:"font-semibold",...e,children:t}),a:({children:t,href:e,...n})=>{let r=e||"";return r&&!r.startsWith("http")&&!r.startsWith("#")&&(r=`https://${r}`),C.jsx("a",{className:"text-sky-400 hover:underline",href:r,target:"_blank",rel:"noreferrer noopener",...n,children:t})},h1:({children:t,...e})=>C.jsx("h1",{className:"text-xl font-semibold mt-4 mb-2",...e,children:t}),h2:({children:t,...e})=>C.jsx("h2",{className:"text-lg font-semibold mt-4 mb-2",...e,children:t}),h3:({children:t,...e})=>C.jsx("h3",{className:"text-base font-semibold mt-3 mb-1",...e,children:t}),h4:({children:t,...e})=>C.jsx("h4",{className:"text-sm font-semibold mt-3 mb-1",...e,children:t}),h5:({children:t,...e})=>C.jsx("h5",{className:"text-sm font-semibold mt-2 mb-1",...e,children:t}),h6:({children:t,...e})=>C.jsx("h6",{className:"text-xs font-semibold mt-2 mb-1",...e,children:t}),p:({children:t,...e})=>C.jsx("p",{className:"my-2 leading-relaxed",...e,children:t}),table:({children:t,...e})=>C.jsx("div",{className:"overflow-x-auto my-3",children:C.jsx("table",{className:"w-full border-collapse border border-neutral-600 text-xs",...e,children:t})}),thead:({children:t,...e})=>C.jsx("thead",{className:"bg-neutral-700",...e,children:t}),tbody:({children:t,...e})=>C.jsx("tbody",{...e,children:t}),tr:({children:t,...e})=>C.jsx("tr",{className:"border-b border-neutral-600",...e,children:t}),th:({children:t,...e})=>C.jsx("th",{className:"p-2 text-left font-semibold border-r last:border-r-0 border-neutral-600",...e,children:t}),td:({children:t,...e})=>C.jsx("td",{className:"p-2 border-r last:border-r-0 border-neutral-600",...e,children:t}),blockquote:({children:t,...e})=>C.jsx("blockquote",{className:"border-l-4 border-neutral-500 pl-3 py-1 my-2 italic text-neutral-300",...e,children:t}),hr:({...t})=>C.jsx("hr",{className:"my-4 border-neutral-600",...t}),code({children:t,className:e,...n}){const r=/language-(\w+)/.exec(e||""),i=String(t).replace(/\n$/,""),a=i.includes(`
`);if(!r&&!a)return C.jsx("code",{...n,className:`${e||""} bg-neutral-700 px-1.5 py-0.5 rounded text-xs font-mono text-sky-300`,children:t});const l=r?.[1]||"text";return C.jsxs("div",{className:"my-3",children:[C.jsx("div",{className:"flex items-center justify-between bg-neutral-700 px-3 py-1 rounded-t text-xs text-neutral-400",children:C.jsx("span",{children:l})}),C.jsx("pre",{className:"bg-neutral-800 p-3 rounded-b overflow-x-auto",children:C.jsx("code",{className:"text-xs font-mono text-neutral-200",children:i})})]})}},OG=[kG,AG],IG=t=>{const e=dt.c(6),{children:n}=t;if(!n)return null;let r=n,i;if(e[0]!==r){r=r.replace(/^(#{1,6}\s+.+)\n```/gm,"$1\n\n```");let l;e[3]===Symbol.for("react.memo_cache_sentinel")?(l=/```\n(#{1,6}\s+)/gm,e[3]=l):l=e[3],i=r.replace(l,"```\n\n$1"),e[0]=r,e[1]=i,e[2]=r}else i=e[1],r=e[2];r=i;let a;return e[4]!==r?(a=C.jsx(dH,{remarkPlugins:OG,components:RG,children:r}),e[4]=r,e[5]=a):a=e[5],a},NG=X.memo(IG,(t,e)=>t.children===e.children);function DG(t){const e=dt.c(85),{isOpen:n,onClose:r,request:i,setters:a}=t,[l,c]=X.useState(""),[f,h]=X.useState(),m=X.useRef(null),p=X.useRef(null),_=X.useRef(i.id);let y;e[0]!==i.httpResponse?(y=()=>{(async function(){if(i.httpResponse?.body)try{const Ee=await i.httpResponse.body.text();h(Ee)}catch{h("(unable to read response body)")}else h(void 0)})()},e[0]=i.httpResponse,e[1]=y):y=e[1];const v=i.httpResponse?.body;let w;e[2]!==v?(w=[v],e[2]=v,e[3]=w):w=e[3],X.useEffect(y,w);let k;e[4]!==i||e[5]!==f||e[6]!==a?(k={request:i,setters:a,responseBodyText:f},e[4]=i,e[5]=f,e[6]=a,e[7]=k):k=e[7];const S=k;let R;e[8]!==S?(R=m9(S),e[8]=S,e[9]=R):R=e[9];const T=R;let z;if(e[10]!==T){const ue=N6(),_e=I6(ue),Ee=g9();z=t5(Ie=>Mj({adapter:_e,messages:Ie,tools:T,systemPrompts:[Ee],agentLoopStrategy:uk(10)})),e[10]=T,e[11]=z}else z=e[11];const L=z;let E;e[12]!==L||e[13]!==T?(E={connection:L,tools:T},e[12]=L,e[13]=T,e[14]=E):E=e[14];const{messages:M,sendMessage:$,isLoading:F,stop:P,clear:Z}=n5(E);let se,me;e[15]!==Z||e[16]!==i.id?(se=()=>{_.current!==i.id&&(Z(),_.current=i.id)},me=[i.id,Z],e[15]=Z,e[16]=i.id,e[17]=se,e[18]=me):(se=e[17],me=e[18]),X.useEffect(se,me);let V;e[19]===Symbol.for("react.memo_cache_sentinel")?(V=()=>{m.current?.scrollIntoView({behavior:"smooth"})},e[19]=V):V=e[19];let G;e[20]!==M?(G=[M],e[20]=M,e[21]=G):G=e[21],X.useEffect(V,G);let B,K;e[22]!==n?(B=()=>{n&&p.current?.focus()},K=[n],e[22]=n,e[23]=B,e[24]=K):(B=e[23],K=e[24]),X.useEffect(B,K);let re;e[25]!==l||e[26]!==F||e[27]!==$?(re=ue=>{ue.preventDefault(),!(!l.trim()||F)&&($(l.trim()),c(""))},e[25]=l,e[26]=F,e[27]=$,e[28]=re):re=e[28];const Q=re;let I;e[29]!==Q?(I=ue=>{ue.key==="Enter"&&!ue.shiftKey&&(ue.preventDefault(),Q(ue))},e[29]=Q,e[30]=I):I=e[30];const N=I,q=MG;let O;e[31]!==F||e[32]!==M?(O=(ue,_e)=>F&&ue.role==="assistant"&&_e===M.length-1,e[31]=F,e[32]=M,e[33]=O):O=e[33];const ie=O;if(!n)return null;let fe;e[34]===Symbol.for("react.memo_cache_sentinel")?(fe=C.jsxs("div",{className:"flex items-center gap-2",children:[C.jsx(Ml,{size:16,className:"text-amber-500"}),C.jsx("h3",{className:"font-medium text-neutral-900 dark:text-neutral-100",children:K1.name})]}),e[34]=fe):fe=e[34];let ge;e[35]===Symbol.for("react.memo_cache_sentinel")?(ge=C.jsx(Zf,{size:16}),e[35]=ge):ge=e[35];let de;e[36]!==Z?(de=C.jsx("button",{onClick:Z,className:"p-1.5 text-neutral-500 hover:text-neutral-900 hover:bg-neutral-100 dark:hover:text-neutral-300 dark:hover:bg-neutral-800 rounded transition-colors",title:"Clear chat",children:ge}),e[36]=Z,e[37]=de):de=e[37];let Se;e[38]===Symbol.for("react.memo_cache_sentinel")?(Se=C.jsx(fy,{size:16}),e[38]=Se):Se=e[38];let we;e[39]!==r?(we=C.jsx("button",{onClick:r,className:"p-1.5 text-neutral-500 hover:text-neutral-900 hover:bg-neutral-100 dark:hover:text-neutral-300 dark:hover:bg-neutral-800 rounded transition-colors",children:Se}),e[39]=r,e[40]=we):we=e[40];let Xe;e[41]!==de||e[42]!==we?(Xe=C.jsxs("div",{className:"shrink-0 h-12 px-4 flex items-center justify-between border-b border-neutral-200 dark:border-neutral-800",children:[fe,C.jsxs("div",{className:"flex items-center gap-1",children:[de,we]})]}),e[41]=de,e[42]=we,e[43]=Xe):Xe=e[43];let at;e[44]!==M.length?(at=M.length===0&&C.jsxs("div",{className:"text-center text-neutral-500 dark:text-neutral-400 text-sm py-8",children:[C.jsx(Ml,{size:24,className:"mx-auto mb-3 text-amber-500/50"}),C.jsx("p",{className:"mb-2",children:"Ask me to help build your request"}),C.jsx("p",{className:"text-xs text-neutral-400 dark:text-neutral-500",children:'Examples: "Create a POST request to /api/users with a JSON body" or "Add an Authorization header"'})]}),e[44]=M.length,e[45]=at):at=e[45];let yt;if(e[46]!==ie||e[47]!==M){let ue;e[49]!==ie?(ue=(_e,Ee)=>{const Ie=q(_e);return C.jsx("div",{className:`text-sm ${_e.role==="user"?"bg-neutral-100 dark:bg-neutral-800 rounded-lg px-3 py-2":""}`,children:C.jsx("div",{className:_e.role==="user"?"text-neutral-900 dark:text-neutral-100":"text-neutral-700 dark:text-neutral-300",children:_e.role==="assistant"?Ie?C.jsx(NG,{children:Ie}):ie(_e,Ee)?C.jsxs("span",{className:"flex items-center gap-2 text-neutral-400",children:[C.jsx(ng,{size:14,className:"animate-spin"}),"Thinking..."]}):null:C.jsx("span",{className:"whitespace-pre-wrap",children:Ie})})},_e.id)},e[49]=ie,e[50]=ue):ue=e[50],yt=M.map(ue),e[46]=ie,e[47]=M,e[48]=yt}else yt=e[48];let Dt;e[51]!==F||e[52]!==M?(Dt=F&&(M.length===0||M[M.length-1]?.role==="user")&&C.jsx("div",{className:"text-sm",children:C.jsx("div",{className:"text-neutral-800 dark:text-neutral-200",children:C.jsxs("span",{className:"flex items-center gap-2 text-neutral-400",children:[C.jsx(ng,{size:14,className:"animate-spin"}),"Thinking..."]})})}),e[51]=F,e[52]=M,e[53]=Dt):Dt=e[53];let Mt;e[54]===Symbol.for("react.memo_cache_sentinel")?(Mt=C.jsx("div",{ref:m}),e[54]=Mt):Mt=e[54];let Vt;e[55]!==at||e[56]!==yt||e[57]!==Dt?(Vt=C.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 min-h-0",children:[at,yt,Dt,Mt]}),e[55]=at,e[56]=yt,e[57]=Dt,e[58]=Vt):Vt=e[58];let _n;e[59]===Symbol.for("react.memo_cache_sentinel")?(_n=ue=>c(ue.target.value),e[59]=_n):_n=e[59];let Xt;e[60]===Symbol.for("react.memo_cache_sentinel")?(Xt={maxHeight:"120px"},e[60]=Xt):Xt=e[60];let Cn;e[61]!==N||e[62]!==l||e[63]!==F?(Cn=C.jsx("textarea",{ref:p,value:l,onChange:_n,onKeyDown:N,placeholder:K1.placeholder,rows:1,disabled:F,className:"flex-1 px-3 py-2 bg-neutral-50 border border-neutral-200 dark:bg-neutral-800 dark:border-neutral-700 rounded-lg text-neutral-900 dark:text-neutral-100 text-sm placeholder-neutral-400 resize-none focus:outline-none focus:ring-2 focus:ring-amber-500/50 focus:border-amber-500 disabled:opacity-50",style:Xt}),e[61]=N,e[62]=l,e[63]=F,e[64]=Cn):Cn=e[64];const $n=F?"button":"submit",Tn=F?P:void 0;let ye;e[65]!==l||e[66]!==F?(ye=!F&&!l.trim(),e[65]=l,e[66]=F,e[67]=ye):ye=e[67];let Be;e[68]!==F?(Be=F?C.jsx(VL,{size:16}):C.jsx(jL,{size:16}),e[68]=F,e[69]=Be):Be=e[69];let Ue;e[70]!==$n||e[71]!==Tn||e[72]!==ye||e[73]!==Be?(Ue=C.jsx("button",{type:$n,onClick:Tn,disabled:ye,className:"p-2 bg-amber-500 hover:bg-amber-400 disabled:bg-neutral-300 dark:disabled:bg-neutral-700 disabled:text-neutral-500 text-white rounded-lg transition-colors",children:Be}),e[70]=$n,e[71]=Tn,e[72]=ye,e[73]=Be,e[74]=Ue):Ue=e[74];let Ae;e[75]!==Cn||e[76]!==Ue?(Ae=C.jsxs("div",{className:"flex items-end gap-2",children:[Cn,Ue]}),e[75]=Cn,e[76]=Ue,e[77]=Ae):Ae=e[77];let Qe;e[78]!==Q||e[79]!==Ae?(Qe=C.jsx("form",{onSubmit:Q,className:"shrink-0 p-3 border-t border-neutral-200 dark:border-neutral-800",children:Ae}),e[78]=Q,e[79]=Ae,e[80]=Qe):Qe=e[80];let ne;return e[81]!==Xe||e[82]!==Vt||e[83]!==Qe?(ne=C.jsxs("div",{className:"w-96 shrink-0 bg-white border border-neutral-200 dark:bg-neutral-900 dark:border-neutral-800 flex flex-col rounded-xl overflow-hidden",children:[Xe,Vt,Qe]}),e[81]=Xe,e[82]=Vt,e[83]=Qe,e[84]=ne):ne=e[84],ne}function MG(t){return t.parts.filter(zG).map(LG).join("").replace(/^undefined/,"")}function LG(t){return t.content}function zG(t){return t.type==="text"&&!!t.content}function PG(t){return t>=200&&t<300?"bg-emerald-500/20 text-emerald-400 border-emerald-500/30":t>=300&&t<400?"bg-amber-500/20 text-amber-400 border-amber-500/30":t>=400&&t<500?"bg-orange-500/20 text-orange-400 border-orange-500/30":t>=500?"bg-rose-500/20 text-rose-400 border-rose-500/30":"bg-gray-500/20 text-gray-400 border-gray-500/30"}function jG(t){return t<1024?`${t} B`:t<1024*1024?`${(t/1024).toFixed(2)} KB`:`${(t/(1024*1024)).toFixed(2)} MB`}function BG(){const t=dt.c(17),{request:e}=Ji();if(!e?.httpResponse)return null;const n=e.httpResponse;let r;t[0]!==n.statusCode?(r=PG(n.statusCode),t[0]=n.statusCode,t[1]=r):r=t[1];const i=`inline-flex items-center px-2 py-0.5 rounded text-[10px] font-semibold border ${r}`,a=n.statusCode>0?n.status:"Error";let l;t[2]!==i||t[3]!==a?(l=C.jsx("span",{className:i,children:a}),t[2]=i,t[3]=a,t[4]=l):l=t[4];let c;t[5]===Symbol.for("react.memo_cache_sentinel")?(c=C.jsx("span",{className:"text-neutral-400 dark:text-neutral-500",children:"Time:"}),t[5]=c):c=t[5];let f;t[6]!==n.duration?(f=C.jsxs("div",{className:"flex items-center gap-2",children:[c,C.jsxs("span",{className:"text-neutral-700 dark:text-neutral-200 font-medium",children:[n.duration,"ms"]})]}),t[6]=n.duration,t[7]=f):f=t[7];let h;t[8]===Symbol.for("react.memo_cache_sentinel")?(h=C.jsx("span",{className:"text-neutral-400 dark:text-neutral-500",children:"Size:"}),t[8]=h):h=t[8];let m;t[9]!==n.body.size?(m=jG(n.body.size),t[9]=n.body.size,t[10]=m):m=t[10];let p;t[11]!==m?(p=C.jsxs("div",{className:"flex items-center gap-2",children:[h,C.jsx("span",{className:"text-neutral-700 dark:text-neutral-200 font-medium",children:m})]}),t[11]=m,t[12]=p):p=t[12];let _;return t[13]!==l||t[14]!==f||t[15]!==p?(_=C.jsxs("div",{className:"px-3 py-2 flex items-center gap-4 text-xs shrink-0",children:[l,f,p]}),t[13]=l,t[14]=f,t[15]=p,t[16]=_):_=t[16],_}function UG(){const t=dt.c(13),{request:e,aiPanelOpen:n,toggleAiPanel:r,setMethod:i,setUrl:a,setHeaders:l,setQuery:c,setBody:f}=Ji();let h;t[0]===Symbol.for("react.memo_cache_sentinel")?(h=C.jsx(rz,{}),t[0]=h):h=t[0];let m;t[1]===Symbol.for("react.memo_cache_sentinel")?(m=C.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden gap-2 min-w-0",children:[C.jsx("div",{className:"flex-1 overflow-hidden min-h-0",children:C.jsx(Aj,{})}),C.jsx(BG,{})]}),t[1]=m):m=t[1];let p;t[2]!==n||t[3]!==e||t[4]!==f||t[5]!==l||t[6]!==i||t[7]!==c||t[8]!==a||t[9]!==r?(p=n&&hy().ai?.model&&C.jsx(DG,{isOpen:n,onClose:r,request:e,setters:{setMethod:i,setUrl:a,setHeaders:l,setQuery:c,setBody:f}}),t[2]=n,t[3]=e,t[4]=f,t[5]=l,t[6]=i,t[7]=c,t[8]=a,t[9]=r,t[10]=p):p=t[10];let _;return t[11]!==p?(_=C.jsxs("div",{className:"h-screen flex bg-neutral-50 dark:bg-[#0d0d0d] py-2 pr-2 pl-1 gap-2",children:[h,m,p]}),t[11]=p,t[12]=_):_=t[12],_}function $G(){const t=dt.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=C.jsx(oL,{children:C.jsx(UG,{})}),t[0]=e):e=t[0],e}lz().then(()=>{jO.createRoot(document.getElementById("root")).render(C.jsx(X.StrictMode,{children:C.jsx(c2,{client:oE,children:C.jsx($G,{})})}))});
