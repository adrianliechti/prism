const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/angular-html-CU67Zn6k.js","assets/html-GMplVEZG.js","assets/javascript-wDzz0qaB.js","assets/css-DPfMkruS.js","assets/angular-ts-BwZT4LLn.js","assets/scss-OYdSNvt2.js","assets/apl-dKokRX4l.js","assets/xml-sdJ4AIDG.js","assets/java-CylS5w8V.js","assets/json-Cp-IABpG.js","assets/astro-CbQHKStN.js","assets/typescript-BPQ3VLAy.js","assets/postcss-CXtECtnM.js","assets/tsx-COt5Ahok.js","assets/blade-DVc8C-J4.js","assets/html-derivative-BFtXZ54Q.js","assets/sql-BLtJtn59.js","assets/bsl-BO_Y6i37.js","assets/sdbl-DVxCFoDh.js","assets/cairo-KRGpt6FW.js","assets/python-B6aJPvgy.js","assets/cobol-nwyudZeR.js","assets/coffee-Ch7k5sss.js","assets/cpp-CofmeUqb.js","assets/regexp-CDVJQ6XC.js","assets/glsl-DplSGwfg.js","assets/c-BIGW1oBm.js","assets/crystal-tKQVLTB8.js","assets/shellscript-Yzrsuije.js","assets/edge-BkV0erSs.js","assets/elixir-CDX3lj18.js","assets/elm-DbKCFpqz.js","assets/erb-BOJIQeun.js","assets/ruby-BvKwtOVI.js","assets/haml-B8DHNrY2.js","assets/graphql-ChdNCCLP.js","assets/jsx-g9-lgVsj.js","assets/lua-BbnMAYS6.js","assets/yaml-Buea-lGh.js","assets/erlang-DsQrWhSR.js","assets/markdown-Cvjx9yec.js","assets/fortran-fixed-form-BZjJHVRy.js","assets/fortran-free-form-D22FLkUw.js","assets/fsharp-CXgrBDvD.js","assets/gdresource-B7Tvp0Sc.js","assets/gdshader-DkwncUOv.js","assets/gdscript-DTMYz4Jt.js","assets/git-commit-F4YmCXRG.js","assets/diff-D97Zzqfu.js","assets/git-rebase-r7XF79zn.js","assets/glimmer-js-Rg0-pVw9.js","assets/glimmer-ts-U6CK756n.js","assets/hack-CaT9iCJl.js","assets/handlebars-BL8al0AC.js","assets/http-jrhK8wxY.js","assets/hurl-irOxFIW8.js","assets/csv-fuZLfV_i.js","assets/hxml-Bvhsp5Yf.js","assets/haxe-CzTSHFRz.js","assets/jinja-4LBKfQ-Z.js","assets/jison-wvAkD_A8.js","assets/julia-C8NyazO9.js","assets/r-DiinP2Uv.js","assets/latex-BdAV_C_H.js","assets/tex-CxkMU7Pf.js","assets/liquid-DYVedYrR.js","assets/marko-CPi9NSCl.js","assets/less-B1dDrJ26.js","assets/mdc-DUICxH0z.js","assets/nginx-DknmC5AR.js","assets/nim-CVrawwO9.js","assets/perl-C0TMdlhV.js","assets/php-CDn_0X-4.js","assets/pug-CGlum2m_.js","assets/qml-3beO22l8.js","assets/razor-CE9lU5zL.js","assets/csharp-K5feNrxe.js","assets/rst-B0xPkSld.js","assets/cmake-D1j8_8rp.js","assets/sas-cz2c8ADy.js","assets/shaderlab-Dg9Lc6iA.js","assets/hlsl-D3lLCCz7.js","assets/shellsession-BADoaaVG.js","assets/soy-Brmx7dQM.js","assets/sparql-rVzFXLq3.js","assets/turtle-BsS91CYL.js","assets/stata-BH5u7GGu.js","assets/svelte-3Dk4HxPD.js","assets/templ-W15q3VgB.js","assets/go-Dn2_MT6a.js","assets/ts-tags-zn1MmPIZ.js","assets/twig-CO9l9SDP.js","assets/vue-DnHKYNfI.js","assets/vue-html-CChd_i61.js","assets/vue-vine-8moa0y9V.js","assets/stylus-BEDo0Tqx.js","assets/xsl-CtQFsRM5.js"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();function ZS(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var $p={exports:{}},Qo={};var Tx;function Z2(){if(Tx)return Qo;Tx=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,s,a){var l=null;if(a!==void 0&&(l=""+a),s.key!==void 0&&(l=""+s.key),"key"in s){a={};for(var u in s)u!=="key"&&(a[u]=s[u])}else a=s;return s=a.ref,{$$typeof:t,type:r,key:l,ref:s!==void 0?s:null,props:a}}return Qo.Fragment=e,Qo.jsx=n,Qo.jsxs=n,Qo}var Ax;function Q2(){return Ax||(Ax=1,$p.exports=Z2()),$p.exports}var w=Q2(),qp={exports:{}},ze={};var Rx;function J2(){if(Rx)return ze;Rx=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),p=Symbol.for("react.activity"),_=Symbol.iterator;function g(N){return N===null||typeof N!="object"?null:(N=_&&N[_]||N["@@iterator"],typeof N=="function"?N:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,E={};function k(N,F,O){this.props=N,this.context=F,this.refs=E,this.updater=O||v}k.prototype.isReactComponent={},k.prototype.setState=function(N,F){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,F,"setState")},k.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function T(){}T.prototype=k.prototype;function C(N,F,O){this.props=N,this.context=F,this.refs=E,this.updater=O||v}var j=C.prototype=new T;j.constructor=C,x(j,k.prototype),j.isPureReactComponent=!0;var D=Array.isArray;function I(){}var U={H:null,A:null,T:null,S:null},V=Object.prototype.hasOwnProperty;function H(N,F,O){var ie=O.ref;return{$$typeof:t,type:N,key:F,ref:ie!==void 0?ie:null,props:O}}function P(N,F){return H(N.type,F,N.props)}function Q(N){return typeof N=="object"&&N!==null&&N.$$typeof===t}function ne(N){var F={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(O){return F[O]})}var me=/\/+/g;function z(N,F){return typeof N=="object"&&N!==null&&N.key!=null?ne(""+N.key):F.toString(36)}function M(N){switch(N.status){case"fulfilled":return N.value;case"rejected":throw N.reason;default:switch(typeof N.status=="string"?N.then(I,I):(N.status="pending",N.then(function(F){N.status==="pending"&&(N.status="fulfilled",N.value=F)},function(F){N.status==="pending"&&(N.status="rejected",N.reason=F)})),N.status){case"fulfilled":return N.value;case"rejected":throw N.reason}}throw N}function B(N,F,O,ie,pe){var de=typeof N;(de==="undefined"||de==="boolean")&&(N=null);var we=!1;if(N===null)we=!0;else switch(de){case"bigint":case"string":case"number":we=!0;break;case"object":switch(N.$$typeof){case t:case e:we=!0;break;case m:return we=N._init,B(we(N._payload),F,O,ie,pe)}}if(we)return pe=pe(N),we=ie===""?"."+z(N,0):ie,D(pe)?(O="",we!=null&&(O=we.replace(me,"$&/")+"/"),B(pe,F,O,"",function(rt){return rt})):pe!=null&&(Q(pe)&&(pe=P(pe,O+(pe.key==null||N&&N.key===pe.key?"":(""+pe.key).replace(me,"$&/")+"/")+we)),F.push(pe)),1;we=0;var Me=ie===""?".":ie+":";if(D(N))for(var Ae=0;Ae<N.length;Ae++)ie=N[Ae],de=Me+z(ie,Ae),we+=B(ie,F,O,de,pe);else if(Ae=g(N),typeof Ae=="function")for(N=Ae.call(N),Ae=0;!(ie=N.next()).done;)ie=ie.value,de=Me+z(ie,Ae++),we+=B(ie,F,O,de,pe);else if(de==="object"){if(typeof N.then=="function")return B(M(N),F,O,ie,pe);throw F=String(N),Error("Objects are not valid as a React child (found: "+(F==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":F)+"). If you meant to render a collection of children, use an array instead.")}return we}function G(N,F,O){if(N==null)return N;var ie=[],pe=0;return B(N,ie,"","",function(de){return F.call(O,de,pe++)}),ie}function re(N){if(N._status===-1){var F=N._result;F=F(),F.then(function(O){(N._status===0||N._status===-1)&&(N._status=1,N._result=O)},function(O){(N._status===0||N._status===-1)&&(N._status=2,N._result=O)}),N._status===-1&&(N._status=0,N._result=F)}if(N._status===1)return N._result.default;throw N._result}var J=typeof reportError=="function"?reportError:function(N){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var F=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof N=="object"&&N!==null&&typeof N.message=="string"?String(N.message):String(N),error:N});if(!window.dispatchEvent(F))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",N);return}console.error(N)},R={map:G,forEach:function(N,F,O){G(N,function(){F.apply(this,arguments)},O)},count:function(N){var F=0;return G(N,function(){F++}),F},toArray:function(N){return G(N,function(F){return F})||[]},only:function(N){if(!Q(N))throw Error("React.Children.only expected to receive a single React element child.");return N}};return ze.Activity=p,ze.Children=R,ze.Component=k,ze.Fragment=n,ze.Profiler=s,ze.PureComponent=C,ze.StrictMode=r,ze.Suspense=f,ze.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=U,ze.__COMPILER_RUNTIME={__proto__:null,c:function(N){return U.H.useMemoCache(N)}},ze.cache=function(N){return function(){return N.apply(null,arguments)}},ze.cacheSignal=function(){return null},ze.cloneElement=function(N,F,O){if(N==null)throw Error("The argument must be a React element, but you passed "+N+".");var ie=x({},N.props),pe=N.key;if(F!=null)for(de in F.key!==void 0&&(pe=""+F.key),F)!V.call(F,de)||de==="key"||de==="__self"||de==="__source"||de==="ref"&&F.ref===void 0||(ie[de]=F[de]);var de=arguments.length-2;if(de===1)ie.children=O;else if(1<de){for(var we=Array(de),Me=0;Me<de;Me++)we[Me]=arguments[Me+2];ie.children=we}return H(N.type,pe,ie)},ze.createContext=function(N){return N={$$typeof:l,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null},N.Provider=N,N.Consumer={$$typeof:a,_context:N},N},ze.createElement=function(N,F,O){var ie,pe={},de=null;if(F!=null)for(ie in F.key!==void 0&&(de=""+F.key),F)V.call(F,ie)&&ie!=="key"&&ie!=="__self"&&ie!=="__source"&&(pe[ie]=F[ie]);var we=arguments.length-2;if(we===1)pe.children=O;else if(1<we){for(var Me=Array(we),Ae=0;Ae<we;Ae++)Me[Ae]=arguments[Ae+2];pe.children=Me}if(N&&N.defaultProps)for(ie in we=N.defaultProps,we)pe[ie]===void 0&&(pe[ie]=we[ie]);return H(N,de,pe)},ze.createRef=function(){return{current:null}},ze.forwardRef=function(N){return{$$typeof:u,render:N}},ze.isValidElement=Q,ze.lazy=function(N){return{$$typeof:m,_payload:{_status:-1,_result:N},_init:re}},ze.memo=function(N,F){return{$$typeof:h,type:N,compare:F===void 0?null:F}},ze.startTransition=function(N){var F=U.T,O={};U.T=O;try{var ie=N(),pe=U.S;pe!==null&&pe(O,ie),typeof ie=="object"&&ie!==null&&typeof ie.then=="function"&&ie.then(I,J)}catch(de){J(de)}finally{F!==null&&O.types!==null&&(F.types=O.types),U.T=F}},ze.unstable_useCacheRefresh=function(){return U.H.useCacheRefresh()},ze.use=function(N){return U.H.use(N)},ze.useActionState=function(N,F,O){return U.H.useActionState(N,F,O)},ze.useCallback=function(N,F){return U.H.useCallback(N,F)},ze.useContext=function(N){return U.H.useContext(N)},ze.useDebugValue=function(){},ze.useDeferredValue=function(N,F){return U.H.useDeferredValue(N,F)},ze.useEffect=function(N,F){return U.H.useEffect(N,F)},ze.useEffectEvent=function(N){return U.H.useEffectEvent(N)},ze.useId=function(){return U.H.useId()},ze.useImperativeHandle=function(N,F,O){return U.H.useImperativeHandle(N,F,O)},ze.useInsertionEffect=function(N,F){return U.H.useInsertionEffect(N,F)},ze.useLayoutEffect=function(N,F){return U.H.useLayoutEffect(N,F)},ze.useMemo=function(N,F){return U.H.useMemo(N,F)},ze.useOptimistic=function(N,F){return U.H.useOptimistic(N,F)},ze.useReducer=function(N,F,O){return U.H.useReducer(N,F,O)},ze.useRef=function(N){return U.H.useRef(N)},ze.useState=function(N){return U.H.useState(N)},ze.useSyncExternalStore=function(N,F,O){return U.H.useSyncExternalStore(N,F,O)},ze.useTransition=function(){return U.H.useTransition()},ze.version="19.2.3",ze}var Ox;function Yf(){return Ox||(Ox=1,qp.exports=J2()),qp.exports}var Z=Yf(),Fp={exports:{}},Jo={},Vp={exports:{}},Hp={};var Ix;function Y2(){return Ix||(Ix=1,(function(t){function e(B,G){var re=B.length;B.push(G);e:for(;0<re;){var J=re-1>>>1,R=B[J];if(0<s(R,G))B[J]=G,B[re]=R,re=J;else break e}}function n(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var G=B[0],re=B.pop();if(re!==G){B[0]=re;e:for(var J=0,R=B.length,N=R>>>1;J<N;){var F=2*(J+1)-1,O=B[F],ie=F+1,pe=B[ie];if(0>s(O,re))ie<R&&0>s(pe,O)?(B[J]=pe,B[ie]=re,J=ie):(B[J]=O,B[F]=re,J=F);else if(ie<R&&0>s(pe,re))B[J]=pe,B[ie]=re,J=ie;else break e}}return G}function s(B,G){var re=B.sortIndex-G.sortIndex;return re!==0?re:B.id-G.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var l=Date,u=l.now();t.unstable_now=function(){return l.now()-u}}var f=[],h=[],m=1,p=null,_=3,g=!1,v=!1,x=!1,E=!1,k=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;function j(B){for(var G=n(h);G!==null;){if(G.callback===null)r(h);else if(G.startTime<=B)r(h),G.sortIndex=G.expirationTime,e(f,G);else break;G=n(h)}}function D(B){if(x=!1,j(B),!v)if(n(f)!==null)v=!0,I||(I=!0,ne());else{var G=n(h);G!==null&&M(D,G.startTime-B)}}var I=!1,U=-1,V=5,H=-1;function P(){return E?!0:!(t.unstable_now()-H<V)}function Q(){if(E=!1,I){var B=t.unstable_now();H=B;var G=!0;try{e:{v=!1,x&&(x=!1,T(U),U=-1),g=!0;var re=_;try{t:{for(j(B),p=n(f);p!==null&&!(p.expirationTime>B&&P());){var J=p.callback;if(typeof J=="function"){p.callback=null,_=p.priorityLevel;var R=J(p.expirationTime<=B);if(B=t.unstable_now(),typeof R=="function"){p.callback=R,j(B),G=!0;break t}p===n(f)&&r(f),j(B)}else r(f);p=n(f)}if(p!==null)G=!0;else{var N=n(h);N!==null&&M(D,N.startTime-B),G=!1}}break e}finally{p=null,_=re,g=!1}G=void 0}}finally{G?ne():I=!1}}}var ne;if(typeof C=="function")ne=function(){C(Q)};else if(typeof MessageChannel<"u"){var me=new MessageChannel,z=me.port2;me.port1.onmessage=Q,ne=function(){z.postMessage(null)}}else ne=function(){k(Q,0)};function M(B,G){U=k(function(){B(t.unstable_now())},G)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):V=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return _},t.unstable_next=function(B){switch(_){case 1:case 2:case 3:var G=3;break;default:G=_}var re=_;_=G;try{return B()}finally{_=re}},t.unstable_requestPaint=function(){E=!0},t.unstable_runWithPriority=function(B,G){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var re=_;_=B;try{return G()}finally{_=re}},t.unstable_scheduleCallback=function(B,G,re){var J=t.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?J+re:J):re=J,B){case 1:var R=-1;break;case 2:R=250;break;case 5:R=1073741823;break;case 4:R=1e4;break;default:R=5e3}return R=re+R,B={id:m++,callback:G,priorityLevel:B,startTime:re,expirationTime:R,sortIndex:-1},re>J?(B.sortIndex=re,e(h,B),n(f)===null&&B===n(h)&&(x?(T(U),U=-1):x=!0,M(D,re-J))):(B.sortIndex=R,e(f,B),v||g||(v=!0,I||(I=!0,ne()))),B},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(B){var G=_;return function(){var re=_;_=G;try{return B.apply(this,arguments)}finally{_=re}}}})(Hp)),Hp}var Nx;function X2(){return Nx||(Nx=1,Vp.exports=Y2()),Vp.exports}var Gp={exports:{}},pn={};var Mx;function W2(){if(Mx)return pn;Mx=1;var t=Yf();function e(f){var h="https://react.dev/errors/"+f;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)h+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+f+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},s=Symbol.for("react.portal");function a(f,h,m){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:p==null?null:""+p,children:f,containerInfo:h,implementation:m}}var l=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(f,h){if(f==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return pn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,pn.createPortal=function(f,h){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return a(f,h,null,m)},pn.flushSync=function(f){var h=l.T,m=r.p;try{if(l.T=null,r.p=2,f)return f()}finally{l.T=h,r.p=m,r.d.f()}},pn.preconnect=function(f,h){typeof f=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,r.d.C(f,h))},pn.prefetchDNS=function(f){typeof f=="string"&&r.d.D(f)},pn.preinit=function(f,h){if(typeof f=="string"&&h&&typeof h.as=="string"){var m=h.as,p=u(m,h.crossOrigin),_=typeof h.integrity=="string"?h.integrity:void 0,g=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;m==="style"?r.d.S(f,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:p,integrity:_,fetchPriority:g}):m==="script"&&r.d.X(f,{crossOrigin:p,integrity:_,fetchPriority:g,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},pn.preinitModule=function(f,h){if(typeof f=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var m=u(h.as,h.crossOrigin);r.d.M(f,{crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&r.d.M(f)},pn.preload=function(f,h){if(typeof f=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var m=h.as,p=u(m,h.crossOrigin);r.d.L(f,m,{crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},pn.preloadModule=function(f,h){if(typeof f=="string")if(h){var m=u(h.as,h.crossOrigin);r.d.m(f,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else r.d.m(f)},pn.requestFormReset=function(f){r.d.r(f)},pn.unstable_batchedUpdates=function(f,h){return f(h)},pn.useFormState=function(f,h,m){return l.H.useFormState(f,h,m)},pn.useFormStatus=function(){return l.H.useHostTransitionStatus()},pn.version="19.2.3",pn}var Dx;function QS(){if(Dx)return Gp.exports;Dx=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Gp.exports=W2(),Gp.exports}var Lx;function eO(){if(Lx)return Jo;Lx=1;var t=X2(),e=Yf(),n=QS();function r(i){var o="https://react.dev/errors/"+i;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)o+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function a(i){var o=i,c=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,(o.flags&4098)!==0&&(c=o.return),i=o.return;while(i)}return o.tag===3?c:null}function l(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function u(i){if(i.tag===31){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function f(i){if(a(i)!==i)throw Error(r(188))}function h(i){var o=i.alternate;if(!o){if(o=a(i),o===null)throw Error(r(188));return o!==i?null:i}for(var c=i,d=o;;){var y=c.return;if(y===null)break;var b=y.alternate;if(b===null){if(d=y.return,d!==null){c=d;continue}break}if(y.child===b.child){for(b=y.child;b;){if(b===c)return f(y),i;if(b===d)return f(y),o;b=b.sibling}throw Error(r(188))}if(c.return!==d.return)c=y,d=b;else{for(var S=!1,A=y.child;A;){if(A===c){S=!0,c=y,d=b;break}if(A===d){S=!0,d=y,c=b;break}A=A.sibling}if(!S){for(A=b.child;A;){if(A===c){S=!0,c=b,d=y;break}if(A===d){S=!0,d=b,c=y;break}A=A.sibling}if(!S)throw Error(r(189))}}if(c.alternate!==d)throw Error(r(190))}if(c.tag!==3)throw Error(r(188));return c.stateNode.current===c?i:o}function m(i){var o=i.tag;if(o===5||o===26||o===27||o===6)return i;for(i=i.child;i!==null;){if(o=m(i),o!==null)return o;i=i.sibling}return null}var p=Object.assign,_=Symbol.for("react.element"),g=Symbol.for("react.transitional.element"),v=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),T=Symbol.for("react.consumer"),C=Symbol.for("react.context"),j=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),U=Symbol.for("react.memo"),V=Symbol.for("react.lazy"),H=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),Q=Symbol.iterator;function ne(i){return i===null||typeof i!="object"?null:(i=Q&&i[Q]||i["@@iterator"],typeof i=="function"?i:null)}var me=Symbol.for("react.client.reference");function z(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===me?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case x:return"Fragment";case k:return"Profiler";case E:return"StrictMode";case D:return"Suspense";case I:return"SuspenseList";case H:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case v:return"Portal";case C:return i.displayName||"Context";case T:return(i._context.displayName||"Context")+".Consumer";case j:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case U:return o=i.displayName||null,o!==null?o:z(i.type)||"Memo";case V:o=i._payload,i=i._init;try{return z(i(o))}catch{}}return null}var M=Array.isArray,B=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re={pending:!1,data:null,method:null,action:null},J=[],R=-1;function N(i){return{current:i}}function F(i){0>R||(i.current=J[R],J[R]=null,R--)}function O(i,o){R++,J[R]=i.current,i.current=o}var ie=N(null),pe=N(null),de=N(null),we=N(null);function Me(i,o){switch(O(de,o),O(pe,i),O(ie,null),o.nodeType){case 9:case 11:i=(i=o.documentElement)&&(i=i.namespaceURI)?Jv(i):0;break;default:if(i=o.tagName,o=o.namespaceURI)o=Jv(o),i=Yv(o,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}F(ie),O(ie,i)}function Ae(){F(ie),F(pe),F(de)}function rt(i){i.memoizedState!==null&&O(we,i);var o=ie.current,c=Yv(o,i.type);o!==c&&(O(pe,i),O(ie,c))}function ht(i){pe.current===i&&(F(ie),F(pe)),we.current===i&&(F(we),Ho._currentValue=re)}var St,tn;function Pt(i){if(St===void 0)try{throw Error()}catch(c){var o=c.stack.trim().match(/\n( *(at )?)/);St=o&&o[1]||"",tn=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+St+i+tn}var At=!1;function On(i,o){if(!i||At)return"";At=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(o){var ce=function(){throw Error()};if(Object.defineProperty(ce.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ce,[])}catch(se){var ee=se}Reflect.construct(i,[],ce)}else{try{ce.call()}catch(se){ee=se}i.call(ce.prototype)}}else{try{throw Error()}catch(se){ee=se}(ce=i())&&typeof ce.catch=="function"&&ce.catch(function(){})}}catch(se){if(se&&ee&&typeof se.stack=="string")return[se.stack,ee.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var b=d.DetermineComponentFrameRoot(),S=b[0],A=b[1];if(S&&A){var $=S.split(`
`),X=A.split(`
`);for(y=d=0;d<$.length&&!$[d].includes("DetermineComponentFrameRoot");)d++;for(;y<X.length&&!X[y].includes("DetermineComponentFrameRoot");)y++;if(d===$.length||y===X.length)for(d=$.length-1,y=X.length-1;1<=d&&0<=y&&$[d]!==X[y];)y--;for(;1<=d&&0<=y;d--,y--)if($[d]!==X[y]){if(d!==1||y!==1)do if(d--,y--,0>y||$[d]!==X[y]){var ae=`
`+$[d].replace(" at new "," at ");return i.displayName&&ae.includes("<anonymous>")&&(ae=ae.replace("<anonymous>",i.displayName)),ae}while(1<=d&&0<=y);break}}}finally{At=!1,Error.prepareStackTrace=c}return(c=i?i.displayName||i.name:"")?Pt(c):""}function De(i,o){switch(i.tag){case 26:case 27:case 5:return Pt(i.type);case 16:return Pt("Lazy");case 13:return i.child!==o&&o!==null?Pt("Suspense Fallback"):Pt("Suspense");case 19:return Pt("SuspenseList");case 0:case 15:return On(i.type,!1);case 11:return On(i.type.render,!1);case 1:return On(i.type,!0);case 31:return Pt("Activity");default:return""}}function it(i){try{var o="",c=null;do o+=De(i,c),c=i,i=i.return;while(i);return o}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}var We=Object.prototype.hasOwnProperty,wn=t.unstable_scheduleCallback,_e=t.unstable_cancelCallback,Le=t.unstable_shouldYield,qe=t.unstable_requestPaint,be=t.unstable_now,et=t.unstable_getCurrentPriorityLevel,te=t.unstable_ImmediatePriority,oe=t.unstable_UserBlockingPriority,ge=t.unstable_NormalPriority,ye=t.unstable_LowPriority,Ee=t.unstable_IdlePriority,bt=t.log,Rt=t.unstable_setDisableYieldValue,Bt=null,Fe=null;function dn(i){if(typeof bt=="function"&&Rt(i),Fe&&typeof Fe.setStrictMode=="function")try{Fe.setStrictMode(Bt,i)}catch{}}var dt=Math.clz32?Math.clz32:DA,ys=Math.log,wr=Math.LN2;function DA(i){return i>>>=0,i===0?32:31-(ys(i)/wr|0)|0}var ic=256,ac=262144,oc=4194304;function ni(i){var o=i&42;if(o!==0)return o;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function lc(i,o,c){var d=i.pendingLanes;if(d===0)return 0;var y=0,b=i.suspendedLanes,S=i.pingedLanes;i=i.warmLanes;var A=d&134217727;return A!==0?(d=A&~b,d!==0?y=ni(d):(S&=A,S!==0?y=ni(S):c||(c=A&~i,c!==0&&(y=ni(c))))):(A=d&~b,A!==0?y=ni(A):S!==0?y=ni(S):c||(c=d&~i,c!==0&&(y=ni(c)))),y===0?0:o!==0&&o!==y&&(o&b)===0&&(b=y&-y,c=o&-o,b>=c||b===32&&(c&4194048)!==0)?o:y}function ro(i,o){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&o)===0}function LA(i,o){switch(i){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function I0(){var i=oc;return oc<<=1,(oc&62914560)===0&&(oc=4194304),i}function Rh(i){for(var o=[],c=0;31>c;c++)o.push(i);return o}function so(i,o){i.pendingLanes|=o,o!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function zA(i,o,c,d,y,b){var S=i.pendingLanes;i.pendingLanes=c,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=c,i.entangledLanes&=c,i.errorRecoveryDisabledLanes&=c,i.shellSuspendCounter=0;var A=i.entanglements,$=i.expirationTimes,X=i.hiddenUpdates;for(c=S&~c;0<c;){var ae=31-dt(c),ce=1<<ae;A[ae]=0,$[ae]=-1;var ee=X[ae];if(ee!==null)for(X[ae]=null,ae=0;ae<ee.length;ae++){var se=ee[ae];se!==null&&(se.lane&=-536870913)}c&=~ce}d!==0&&N0(i,d,0),b!==0&&y===0&&i.tag!==0&&(i.suspendedLanes|=b&~(S&~o))}function N0(i,o,c){i.pendingLanes|=o,i.suspendedLanes&=~o;var d=31-dt(o);i.entangledLanes|=o,i.entanglements[d]=i.entanglements[d]|1073741824|c&261930}function M0(i,o){var c=i.entangledLanes|=o;for(i=i.entanglements;c;){var d=31-dt(c),y=1<<d;y&o|i[d]&o&&(i[d]|=o),c&=~y}}function D0(i,o){var c=o&-o;return c=(c&42)!==0?1:Oh(c),(c&(i.suspendedLanes|o))!==0?0:c}function Oh(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Ih(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function L0(){var i=G.p;return i!==0?i:(i=window.event,i===void 0?32:vx(i.type))}function z0(i,o){var c=G.p;try{return G.p=i,o()}finally{G.p=c}}var _s=Math.random().toString(36).slice(2),nn="__reactFiber$"+_s,In="__reactProps$"+_s,Bi="__reactContainer$"+_s,Nh="__reactEvents$"+_s,jA="__reactListeners$"+_s,PA="__reactHandles$"+_s,j0="__reactResources$"+_s,io="__reactMarker$"+_s;function Mh(i){delete i[nn],delete i[In],delete i[Nh],delete i[jA],delete i[PA]}function Ui(i){var o=i[nn];if(o)return o;for(var c=i.parentNode;c;){if(o=c[Bi]||c[nn]){if(c=o.alternate,o.child!==null||c!==null&&c.child!==null)for(i=sx(i);i!==null;){if(c=i[nn])return c;i=sx(i)}return o}i=c,c=i.parentNode}return null}function $i(i){if(i=i[nn]||i[Bi]){var o=i.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return i}return null}function ao(i){var o=i.tag;if(o===5||o===26||o===27||o===6)return i.stateNode;throw Error(r(33))}function qi(i){var o=i[j0];return o||(o=i[j0]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function Qt(i){i[io]=!0}var P0=new Set,B0={};function ri(i,o){Fi(i,o),Fi(i+"Capture",o)}function Fi(i,o){for(B0[i]=o,i=0;i<o.length;i++)P0.add(o[i])}var BA=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),U0={},$0={};function UA(i){return We.call($0,i)?!0:We.call(U0,i)?!1:BA.test(i)?$0[i]=!0:(U0[i]=!0,!1)}function cc(i,o,c){if(UA(o))if(c===null)i.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":i.removeAttribute(o);return;case"boolean":var d=o.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){i.removeAttribute(o);return}}i.setAttribute(o,""+c)}}function uc(i,o,c){if(c===null)i.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(o);return}i.setAttribute(o,""+c)}}function Kr(i,o,c,d){if(d===null)i.removeAttribute(c);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(c);return}i.setAttributeNS(o,c,""+d)}}function sr(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function q0(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function $A(i,o,c){var d=Object.getOwnPropertyDescriptor(i.constructor.prototype,o);if(!i.hasOwnProperty(o)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var y=d.get,b=d.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return y.call(this)},set:function(S){c=""+S,b.call(this,S)}}),Object.defineProperty(i,o,{enumerable:d.enumerable}),{getValue:function(){return c},setValue:function(S){c=""+S},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function Dh(i){if(!i._valueTracker){var o=q0(i)?"checked":"value";i._valueTracker=$A(i,o,""+i[o])}}function F0(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var c=o.getValue(),d="";return i&&(d=q0(i)?i.checked?"true":"false":i.value),i=d,i!==c?(o.setValue(i),!0):!1}function fc(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var qA=/[\n"\\]/g;function ir(i){return i.replace(qA,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function Lh(i,o,c,d,y,b,S,A){i.name="",S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?i.type=S:i.removeAttribute("type"),o!=null?S==="number"?(o===0&&i.value===""||i.value!=o)&&(i.value=""+sr(o)):i.value!==""+sr(o)&&(i.value=""+sr(o)):S!=="submit"&&S!=="reset"||i.removeAttribute("value"),o!=null?zh(i,S,sr(o)):c!=null?zh(i,S,sr(c)):d!=null&&i.removeAttribute("value"),y==null&&b!=null&&(i.defaultChecked=!!b),y!=null&&(i.checked=y&&typeof y!="function"&&typeof y!="symbol"),A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?i.name=""+sr(A):i.removeAttribute("name")}function V0(i,o,c,d,y,b,S,A){if(b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(i.type=b),o!=null||c!=null){if(!(b!=="submit"&&b!=="reset"||o!=null)){Dh(i);return}c=c!=null?""+sr(c):"",o=o!=null?""+sr(o):c,A||o===i.value||(i.value=o),i.defaultValue=o}d=d??y,d=typeof d!="function"&&typeof d!="symbol"&&!!d,i.checked=A?i.checked:!!d,i.defaultChecked=!!d,S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(i.name=S),Dh(i)}function zh(i,o,c){o==="number"&&fc(i.ownerDocument)===i||i.defaultValue===""+c||(i.defaultValue=""+c)}function Vi(i,o,c,d){if(i=i.options,o){o={};for(var y=0;y<c.length;y++)o["$"+c[y]]=!0;for(c=0;c<i.length;c++)y=o.hasOwnProperty("$"+i[c].value),i[c].selected!==y&&(i[c].selected=y),y&&d&&(i[c].defaultSelected=!0)}else{for(c=""+sr(c),o=null,y=0;y<i.length;y++){if(i[y].value===c){i[y].selected=!0,d&&(i[y].defaultSelected=!0);return}o!==null||i[y].disabled||(o=i[y])}o!==null&&(o.selected=!0)}}function H0(i,o,c){if(o!=null&&(o=""+sr(o),o!==i.value&&(i.value=o),c==null)){i.defaultValue!==o&&(i.defaultValue=o);return}i.defaultValue=c!=null?""+sr(c):""}function G0(i,o,c,d){if(o==null){if(d!=null){if(c!=null)throw Error(r(92));if(M(d)){if(1<d.length)throw Error(r(93));d=d[0]}c=d}c==null&&(c=""),o=c}c=sr(o),i.defaultValue=c,d=i.textContent,d===c&&d!==""&&d!==null&&(i.value=d),Dh(i)}function Hi(i,o){if(o){var c=i.firstChild;if(c&&c===i.lastChild&&c.nodeType===3){c.nodeValue=o;return}}i.textContent=o}var FA=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function K0(i,o,c){var d=o.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?d?i.setProperty(o,""):o==="float"?i.cssFloat="":i[o]="":d?i.setProperty(o,c):typeof c!="number"||c===0||FA.has(o)?o==="float"?i.cssFloat=c:i[o]=(""+c).trim():i[o]=c+"px"}function Z0(i,o,c){if(o!=null&&typeof o!="object")throw Error(r(62));if(i=i.style,c!=null){for(var d in c)!c.hasOwnProperty(d)||o!=null&&o.hasOwnProperty(d)||(d.indexOf("--")===0?i.setProperty(d,""):d==="float"?i.cssFloat="":i[d]="");for(var y in o)d=o[y],o.hasOwnProperty(y)&&c[y]!==d&&K0(i,y,d)}else for(var b in o)o.hasOwnProperty(b)&&K0(i,b,o[b])}function jh(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var VA=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),HA=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function hc(i){return HA.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function Zr(){}var Ph=null;function Bh(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Gi=null,Ki=null;function Q0(i){var o=$i(i);if(o&&(i=o.stateNode)){var c=i[In]||null;e:switch(i=o.stateNode,o.type){case"input":if(Lh(i,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),o=c.name,c.type==="radio"&&o!=null){for(c=i;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+ir(""+o)+'"][type="radio"]'),o=0;o<c.length;o++){var d=c[o];if(d!==i&&d.form===i.form){var y=d[In]||null;if(!y)throw Error(r(90));Lh(d,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(o=0;o<c.length;o++)d=c[o],d.form===i.form&&F0(d)}break e;case"textarea":H0(i,c.value,c.defaultValue);break e;case"select":o=c.value,o!=null&&Vi(i,!!c.multiple,o,!1)}}}var Uh=!1;function J0(i,o,c){if(Uh)return i(o,c);Uh=!0;try{var d=i(o);return d}finally{if(Uh=!1,(Gi!==null||Ki!==null)&&(Wc(),Gi&&(o=Gi,i=Ki,Ki=Gi=null,Q0(o),i)))for(o=0;o<i.length;o++)Q0(i[o])}}function oo(i,o){var c=i.stateNode;if(c===null)return null;var d=c[In]||null;if(d===null)return null;c=d[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(i=i.type,d=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!d;break e;default:i=!1}if(i)return null;if(c&&typeof c!="function")throw Error(r(231,o,typeof c));return c}var Qr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),$h=!1;if(Qr)try{var lo={};Object.defineProperty(lo,"passive",{get:function(){$h=!0}}),window.addEventListener("test",lo,lo),window.removeEventListener("test",lo,lo)}catch{$h=!1}var bs=null,qh=null,dc=null;function Y0(){if(dc)return dc;var i,o=qh,c=o.length,d,y="value"in bs?bs.value:bs.textContent,b=y.length;for(i=0;i<c&&o[i]===y[i];i++);var S=c-i;for(d=1;d<=S&&o[c-d]===y[b-d];d++);return dc=y.slice(i,1<d?1-d:void 0)}function pc(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function mc(){return!0}function X0(){return!1}function Nn(i){function o(c,d,y,b,S){this._reactName=c,this._targetInst=y,this.type=d,this.nativeEvent=b,this.target=S,this.currentTarget=null;for(var A in i)i.hasOwnProperty(A)&&(c=i[A],this[A]=c?c(b):b[A]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?mc:X0,this.isPropagationStopped=X0,this}return p(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=mc)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=mc)},persist:function(){},isPersistent:mc}),o}var si={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},gc=Nn(si),co=p({},si,{view:0,detail:0}),GA=Nn(co),Fh,Vh,uo,yc=p({},co,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Gh,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==uo&&(uo&&i.type==="mousemove"?(Fh=i.screenX-uo.screenX,Vh=i.screenY-uo.screenY):Vh=Fh=0,uo=i),Fh)},movementY:function(i){return"movementY"in i?i.movementY:Vh}}),W0=Nn(yc),KA=p({},yc,{dataTransfer:0}),ZA=Nn(KA),QA=p({},co,{relatedTarget:0}),Hh=Nn(QA),JA=p({},si,{animationName:0,elapsedTime:0,pseudoElement:0}),YA=Nn(JA),XA=p({},si,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),WA=Nn(XA),eR=p({},si,{data:0}),e_=Nn(eR),tR={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},nR={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},rR={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function sR(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=rR[i])?!!o[i]:!1}function Gh(){return sR}var iR=p({},co,{key:function(i){if(i.key){var o=tR[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=pc(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?nR[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Gh,charCode:function(i){return i.type==="keypress"?pc(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?pc(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),aR=Nn(iR),oR=p({},yc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),t_=Nn(oR),lR=p({},co,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Gh}),cR=Nn(lR),uR=p({},si,{propertyName:0,elapsedTime:0,pseudoElement:0}),fR=Nn(uR),hR=p({},yc,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),dR=Nn(hR),pR=p({},si,{newState:0,oldState:0}),mR=Nn(pR),gR=[9,13,27,32],Kh=Qr&&"CompositionEvent"in window,fo=null;Qr&&"documentMode"in document&&(fo=document.documentMode);var yR=Qr&&"TextEvent"in window&&!fo,n_=Qr&&(!Kh||fo&&8<fo&&11>=fo),r_=" ",s_=!1;function i_(i,o){switch(i){case"keyup":return gR.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function a_(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Zi=!1;function _R(i,o){switch(i){case"compositionend":return a_(o);case"keypress":return o.which!==32?null:(s_=!0,r_);case"textInput":return i=o.data,i===r_&&s_?null:i;default:return null}}function bR(i,o){if(Zi)return i==="compositionend"||!Kh&&i_(i,o)?(i=Y0(),dc=qh=bs=null,Zi=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return n_&&o.locale!=="ko"?null:o.data;default:return null}}var vR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function o_(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!vR[i.type]:o==="textarea"}function l_(i,o,c,d){Gi?Ki?Ki.push(d):Ki=[d]:Gi=d,o=au(o,"onChange"),0<o.length&&(c=new gc("onChange","change",null,c,d),i.push({event:c,listeners:o}))}var ho=null,po=null;function xR(i){Vv(i,0)}function _c(i){var o=ao(i);if(F0(o))return i}function c_(i,o){if(i==="change")return o}var u_=!1;if(Qr){var Zh;if(Qr){var Qh="oninput"in document;if(!Qh){var f_=document.createElement("div");f_.setAttribute("oninput","return;"),Qh=typeof f_.oninput=="function"}Zh=Qh}else Zh=!1;u_=Zh&&(!document.documentMode||9<document.documentMode)}function h_(){ho&&(ho.detachEvent("onpropertychange",d_),po=ho=null)}function d_(i){if(i.propertyName==="value"&&_c(po)){var o=[];l_(o,po,i,Bh(i)),J0(xR,o)}}function wR(i,o,c){i==="focusin"?(h_(),ho=o,po=c,ho.attachEvent("onpropertychange",d_)):i==="focusout"&&h_()}function SR(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return _c(po)}function kR(i,o){if(i==="click")return _c(o)}function ER(i,o){if(i==="input"||i==="change")return _c(o)}function CR(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var Fn=typeof Object.is=="function"?Object.is:CR;function mo(i,o){if(Fn(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var c=Object.keys(i),d=Object.keys(o);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++){var y=c[d];if(!We.call(o,y)||!Fn(i[y],o[y]))return!1}return!0}function p_(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function m_(i,o){var c=p_(i);i=0;for(var d;c;){if(c.nodeType===3){if(d=i+c.textContent.length,i<=o&&d>=o)return{node:c,offset:o-i};i=d}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=p_(c)}}function g_(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?g_(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function y_(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var o=fc(i.document);o instanceof i.HTMLIFrameElement;){try{var c=typeof o.contentWindow.location.href=="string"}catch{c=!1}if(c)i=o.contentWindow;else break;o=fc(i.document)}return o}function Jh(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}var TR=Qr&&"documentMode"in document&&11>=document.documentMode,Qi=null,Yh=null,go=null,Xh=!1;function __(i,o,c){var d=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;Xh||Qi==null||Qi!==fc(d)||(d=Qi,"selectionStart"in d&&Jh(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),go&&mo(go,d)||(go=d,d=au(Yh,"onSelect"),0<d.length&&(o=new gc("onSelect","select",null,o,c),i.push({event:o,listeners:d}),o.target=Qi)))}function ii(i,o){var c={};return c[i.toLowerCase()]=o.toLowerCase(),c["Webkit"+i]="webkit"+o,c["Moz"+i]="moz"+o,c}var Ji={animationend:ii("Animation","AnimationEnd"),animationiteration:ii("Animation","AnimationIteration"),animationstart:ii("Animation","AnimationStart"),transitionrun:ii("Transition","TransitionRun"),transitionstart:ii("Transition","TransitionStart"),transitioncancel:ii("Transition","TransitionCancel"),transitionend:ii("Transition","TransitionEnd")},Wh={},b_={};Qr&&(b_=document.createElement("div").style,"AnimationEvent"in window||(delete Ji.animationend.animation,delete Ji.animationiteration.animation,delete Ji.animationstart.animation),"TransitionEvent"in window||delete Ji.transitionend.transition);function ai(i){if(Wh[i])return Wh[i];if(!Ji[i])return i;var o=Ji[i],c;for(c in o)if(o.hasOwnProperty(c)&&c in b_)return Wh[i]=o[c];return i}var v_=ai("animationend"),x_=ai("animationiteration"),w_=ai("animationstart"),AR=ai("transitionrun"),RR=ai("transitionstart"),OR=ai("transitioncancel"),S_=ai("transitionend"),k_=new Map,ed="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ed.push("scrollEnd");function Sr(i,o){k_.set(i,o),ri(o,[i])}var bc=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},ar=[],Yi=0,td=0;function vc(){for(var i=Yi,o=td=Yi=0;o<i;){var c=ar[o];ar[o++]=null;var d=ar[o];ar[o++]=null;var y=ar[o];ar[o++]=null;var b=ar[o];if(ar[o++]=null,d!==null&&y!==null){var S=d.pending;S===null?y.next=y:(y.next=S.next,S.next=y),d.pending=y}b!==0&&E_(c,y,b)}}function xc(i,o,c,d){ar[Yi++]=i,ar[Yi++]=o,ar[Yi++]=c,ar[Yi++]=d,td|=d,i.lanes|=d,i=i.alternate,i!==null&&(i.lanes|=d)}function nd(i,o,c,d){return xc(i,o,c,d),wc(i)}function oi(i,o){return xc(i,null,null,o),wc(i)}function E_(i,o,c){i.lanes|=c;var d=i.alternate;d!==null&&(d.lanes|=c);for(var y=!1,b=i.return;b!==null;)b.childLanes|=c,d=b.alternate,d!==null&&(d.childLanes|=c),b.tag===22&&(i=b.stateNode,i===null||i._visibility&1||(y=!0)),i=b,b=b.return;return i.tag===3?(b=i.stateNode,y&&o!==null&&(y=31-dt(c),i=b.hiddenUpdates,d=i[y],d===null?i[y]=[o]:d.push(o),o.lane=c|536870912),b):null}function wc(i){if(50<Po)throw Po=0,fp=null,Error(r(185));for(var o=i.return;o!==null;)i=o,o=i.return;return i.tag===3?i.stateNode:null}var Xi={};function IR(i,o,c,d){this.tag=i,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vn(i,o,c,d){return new IR(i,o,c,d)}function rd(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Jr(i,o){var c=i.alternate;return c===null?(c=Vn(i.tag,o,i.key,i.mode),c.elementType=i.elementType,c.type=i.type,c.stateNode=i.stateNode,c.alternate=i,i.alternate=c):(c.pendingProps=o,c.type=i.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=i.flags&65011712,c.childLanes=i.childLanes,c.lanes=i.lanes,c.child=i.child,c.memoizedProps=i.memoizedProps,c.memoizedState=i.memoizedState,c.updateQueue=i.updateQueue,o=i.dependencies,c.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},c.sibling=i.sibling,c.index=i.index,c.ref=i.ref,c.refCleanup=i.refCleanup,c}function C_(i,o){i.flags&=65011714;var c=i.alternate;return c===null?(i.childLanes=0,i.lanes=o,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=c.childLanes,i.lanes=c.lanes,i.child=c.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=c.memoizedProps,i.memoizedState=c.memoizedState,i.updateQueue=c.updateQueue,i.type=c.type,o=c.dependencies,i.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),i}function Sc(i,o,c,d,y,b){var S=0;if(d=i,typeof i=="function")rd(i)&&(S=1);else if(typeof i=="string")S=z2(i,c,ie.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case H:return i=Vn(31,c,o,y),i.elementType=H,i.lanes=b,i;case x:return li(c.children,y,b,o);case E:S=8,y|=24;break;case k:return i=Vn(12,c,o,y|2),i.elementType=k,i.lanes=b,i;case D:return i=Vn(13,c,o,y),i.elementType=D,i.lanes=b,i;case I:return i=Vn(19,c,o,y),i.elementType=I,i.lanes=b,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case C:S=10;break e;case T:S=9;break e;case j:S=11;break e;case U:S=14;break e;case V:S=16,d=null;break e}S=29,c=Error(r(130,i===null?"null":typeof i,"")),d=null}return o=Vn(S,c,o,y),o.elementType=i,o.type=d,o.lanes=b,o}function li(i,o,c,d){return i=Vn(7,i,d,o),i.lanes=c,i}function sd(i,o,c){return i=Vn(6,i,null,o),i.lanes=c,i}function T_(i){var o=Vn(18,null,null,0);return o.stateNode=i,o}function id(i,o,c){return o=Vn(4,i.children!==null?i.children:[],i.key,o),o.lanes=c,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}var A_=new WeakMap;function or(i,o){if(typeof i=="object"&&i!==null){var c=A_.get(i);return c!==void 0?c:(o={value:i,source:o,stack:it(o)},A_.set(i,o),o)}return{value:i,source:o,stack:it(o)}}var Wi=[],ea=0,kc=null,yo=0,lr=[],cr=0,vs=null,Or=1,Ir="";function Yr(i,o){Wi[ea++]=yo,Wi[ea++]=kc,kc=i,yo=o}function R_(i,o,c){lr[cr++]=Or,lr[cr++]=Ir,lr[cr++]=vs,vs=i;var d=Or;i=Ir;var y=32-dt(d)-1;d&=~(1<<y),c+=1;var b=32-dt(o)+y;if(30<b){var S=y-y%5;b=(d&(1<<S)-1).toString(32),d>>=S,y-=S,Or=1<<32-dt(o)+y|c<<y|d,Ir=b+i}else Or=1<<b|c<<y|d,Ir=i}function ad(i){i.return!==null&&(Yr(i,1),R_(i,1,0))}function od(i){for(;i===kc;)kc=Wi[--ea],Wi[ea]=null,yo=Wi[--ea],Wi[ea]=null;for(;i===vs;)vs=lr[--cr],lr[cr]=null,Ir=lr[--cr],lr[cr]=null,Or=lr[--cr],lr[cr]=null}function O_(i,o){lr[cr++]=Or,lr[cr++]=Ir,lr[cr++]=vs,Or=o.id,Ir=o.overflow,vs=i}var rn=null,yt=null,Ye=!1,xs=null,ur=!1,ld=Error(r(519));function ws(i){var o=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw _o(or(o,i)),ld}function I_(i){var o=i.stateNode,c=i.type,d=i.memoizedProps;switch(o[nn]=i,o[In]=d,c){case"dialog":He("cancel",o),He("close",o);break;case"iframe":case"object":case"embed":He("load",o);break;case"video":case"audio":for(c=0;c<Uo.length;c++)He(Uo[c],o);break;case"source":He("error",o);break;case"img":case"image":case"link":He("error",o),He("load",o);break;case"details":He("toggle",o);break;case"input":He("invalid",o),V0(o,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0);break;case"select":He("invalid",o);break;case"textarea":He("invalid",o),G0(o,d.value,d.defaultValue,d.children)}c=d.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||o.textContent===""+c||d.suppressHydrationWarning===!0||Zv(o.textContent,c)?(d.popover!=null&&(He("beforetoggle",o),He("toggle",o)),d.onScroll!=null&&He("scroll",o),d.onScrollEnd!=null&&He("scrollend",o),d.onClick!=null&&(o.onclick=Zr),o=!0):o=!1,o||ws(i,!0)}function N_(i){for(rn=i.return;rn;)switch(rn.tag){case 5:case 31:case 13:ur=!1;return;case 27:case 3:ur=!0;return;default:rn=rn.return}}function ta(i){if(i!==rn)return!1;if(!Ye)return N_(i),Ye=!0,!1;var o=i.tag,c;if((c=o!==3&&o!==27)&&((c=o===5)&&(c=i.type,c=!(c!=="form"&&c!=="button")||Cp(i.type,i.memoizedProps)),c=!c),c&&yt&&ws(i),N_(i),o===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));yt=rx(i)}else if(o===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));yt=rx(i)}else o===27?(o=yt,zs(i.type)?(i=Ip,Ip=null,yt=i):yt=o):yt=rn?hr(i.stateNode.nextSibling):null;return!0}function ci(){yt=rn=null,Ye=!1}function cd(){var i=xs;return i!==null&&(zn===null?zn=i:zn.push.apply(zn,i),xs=null),i}function _o(i){xs===null?xs=[i]:xs.push(i)}var ud=N(null),ui=null,Xr=null;function Ss(i,o,c){O(ud,o._currentValue),o._currentValue=c}function Wr(i){i._currentValue=ud.current,F(ud)}function fd(i,o,c){for(;i!==null;){var d=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,d!==null&&(d.childLanes|=o)):d!==null&&(d.childLanes&o)!==o&&(d.childLanes|=o),i===c)break;i=i.return}}function hd(i,o,c,d){var y=i.child;for(y!==null&&(y.return=i);y!==null;){var b=y.dependencies;if(b!==null){var S=y.child;b=b.firstContext;e:for(;b!==null;){var A=b;b=y;for(var $=0;$<o.length;$++)if(A.context===o[$]){b.lanes|=c,A=b.alternate,A!==null&&(A.lanes|=c),fd(b.return,c,i),d||(S=null);break e}b=A.next}}else if(y.tag===18){if(S=y.return,S===null)throw Error(r(341));S.lanes|=c,b=S.alternate,b!==null&&(b.lanes|=c),fd(S,c,i),S=null}else S=y.child;if(S!==null)S.return=y;else for(S=y;S!==null;){if(S===i){S=null;break}if(y=S.sibling,y!==null){y.return=S.return,S=y;break}S=S.return}y=S}}function na(i,o,c,d){i=null;for(var y=o,b=!1;y!==null;){if(!b){if((y.flags&524288)!==0)b=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var S=y.alternate;if(S===null)throw Error(r(387));if(S=S.memoizedProps,S!==null){var A=y.type;Fn(y.pendingProps.value,S.value)||(i!==null?i.push(A):i=[A])}}else if(y===we.current){if(S=y.alternate,S===null)throw Error(r(387));S.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(i!==null?i.push(Ho):i=[Ho])}y=y.return}i!==null&&hd(o,i,c,d),o.flags|=262144}function Ec(i){for(i=i.firstContext;i!==null;){if(!Fn(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function fi(i){ui=i,Xr=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function sn(i){return M_(ui,i)}function Cc(i,o){return ui===null&&fi(i),M_(i,o)}function M_(i,o){var c=o._currentValue;if(o={context:o,memoizedValue:c,next:null},Xr===null){if(i===null)throw Error(r(308));Xr=o,i.dependencies={lanes:0,firstContext:o},i.flags|=524288}else Xr=Xr.next=o;return c}var NR=typeof AbortController<"u"?AbortController:function(){var i=[],o=this.signal={aborted:!1,addEventListener:function(c,d){i.push(d)}};this.abort=function(){o.aborted=!0,i.forEach(function(c){return c()})}},MR=t.unstable_scheduleCallback,DR=t.unstable_NormalPriority,Ot={$$typeof:C,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function dd(){return{controller:new NR,data:new Map,refCount:0}}function bo(i){i.refCount--,i.refCount===0&&MR(DR,function(){i.controller.abort()})}var vo=null,pd=0,ra=0,sa=null;function LR(i,o){if(vo===null){var c=vo=[];pd=0,ra=yp(),sa={status:"pending",value:void 0,then:function(d){c.push(d)}}}return pd++,o.then(D_,D_),o}function D_(){if(--pd===0&&vo!==null){sa!==null&&(sa.status="fulfilled");var i=vo;vo=null,ra=0,sa=null;for(var o=0;o<i.length;o++)(0,i[o])()}}function zR(i,o){var c=[],d={status:"pending",value:null,reason:null,then:function(y){c.push(y)}};return i.then(function(){d.status="fulfilled",d.value=o;for(var y=0;y<c.length;y++)(0,c[y])(o)},function(y){for(d.status="rejected",d.reason=y,y=0;y<c.length;y++)(0,c[y])(void 0)}),d}var L_=B.S;B.S=function(i,o){_v=be(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&LR(i,o),L_!==null&&L_(i,o)};var hi=N(null);function md(){var i=hi.current;return i!==null?i:pt.pooledCache}function Tc(i,o){o===null?O(hi,hi.current):O(hi,o.pool)}function z_(){var i=md();return i===null?null:{parent:Ot._currentValue,pool:i}}var ia=Error(r(460)),gd=Error(r(474)),Ac=Error(r(542)),Rc={then:function(){}};function j_(i){return i=i.status,i==="fulfilled"||i==="rejected"}function P_(i,o,c){switch(c=i[c],c===void 0?i.push(o):c!==o&&(o.then(Zr,Zr),o=c),o.status){case"fulfilled":return o.value;case"rejected":throw i=o.reason,U_(i),i;default:if(typeof o.status=="string")o.then(Zr,Zr);else{if(i=pt,i!==null&&100<i.shellSuspendCounter)throw Error(r(482));i=o,i.status="pending",i.then(function(d){if(o.status==="pending"){var y=o;y.status="fulfilled",y.value=d}},function(d){if(o.status==="pending"){var y=o;y.status="rejected",y.reason=d}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw i=o.reason,U_(i),i}throw pi=o,ia}}function di(i){try{var o=i._init;return o(i._payload)}catch(c){throw c!==null&&typeof c=="object"&&typeof c.then=="function"?(pi=c,ia):c}}var pi=null;function B_(){if(pi===null)throw Error(r(459));var i=pi;return pi=null,i}function U_(i){if(i===ia||i===Ac)throw Error(r(483))}var aa=null,xo=0;function Oc(i){var o=xo;return xo+=1,aa===null&&(aa=[]),P_(aa,i,o)}function wo(i,o){o=o.props.ref,i.ref=o!==void 0?o:null}function Ic(i,o){throw o.$$typeof===_?Error(r(525)):(i=Object.prototype.toString.call(o),Error(r(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i)))}function $_(i){function o(K,q){if(i){var Y=K.deletions;Y===null?(K.deletions=[q],K.flags|=16):Y.push(q)}}function c(K,q){if(!i)return null;for(;q!==null;)o(K,q),q=q.sibling;return null}function d(K){for(var q=new Map;K!==null;)K.key!==null?q.set(K.key,K):q.set(K.index,K),K=K.sibling;return q}function y(K,q){return K=Jr(K,q),K.index=0,K.sibling=null,K}function b(K,q,Y){return K.index=Y,i?(Y=K.alternate,Y!==null?(Y=Y.index,Y<q?(K.flags|=67108866,q):Y):(K.flags|=67108866,q)):(K.flags|=1048576,q)}function S(K){return i&&K.alternate===null&&(K.flags|=67108866),K}function A(K,q,Y,le){return q===null||q.tag!==6?(q=sd(Y,K.mode,le),q.return=K,q):(q=y(q,Y),q.return=K,q)}function $(K,q,Y,le){var Ce=Y.type;return Ce===x?ae(K,q,Y.props.children,le,Y.key):q!==null&&(q.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===V&&di(Ce)===q.type)?(q=y(q,Y.props),wo(q,Y),q.return=K,q):(q=Sc(Y.type,Y.key,Y.props,null,K.mode,le),wo(q,Y),q.return=K,q)}function X(K,q,Y,le){return q===null||q.tag!==4||q.stateNode.containerInfo!==Y.containerInfo||q.stateNode.implementation!==Y.implementation?(q=id(Y,K.mode,le),q.return=K,q):(q=y(q,Y.children||[]),q.return=K,q)}function ae(K,q,Y,le,Ce){return q===null||q.tag!==7?(q=li(Y,K.mode,le,Ce),q.return=K,q):(q=y(q,Y),q.return=K,q)}function ce(K,q,Y){if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return q=sd(""+q,K.mode,Y),q.return=K,q;if(typeof q=="object"&&q!==null){switch(q.$$typeof){case g:return Y=Sc(q.type,q.key,q.props,null,K.mode,Y),wo(Y,q),Y.return=K,Y;case v:return q=id(q,K.mode,Y),q.return=K,q;case V:return q=di(q),ce(K,q,Y)}if(M(q)||ne(q))return q=li(q,K.mode,Y,null),q.return=K,q;if(typeof q.then=="function")return ce(K,Oc(q),Y);if(q.$$typeof===C)return ce(K,Cc(K,q),Y);Ic(K,q)}return null}function ee(K,q,Y,le){var Ce=q!==null?q.key:null;if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return Ce!==null?null:A(K,q,""+Y,le);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case g:return Y.key===Ce?$(K,q,Y,le):null;case v:return Y.key===Ce?X(K,q,Y,le):null;case V:return Y=di(Y),ee(K,q,Y,le)}if(M(Y)||ne(Y))return Ce!==null?null:ae(K,q,Y,le,null);if(typeof Y.then=="function")return ee(K,q,Oc(Y),le);if(Y.$$typeof===C)return ee(K,q,Cc(K,Y),le);Ic(K,Y)}return null}function se(K,q,Y,le,Ce){if(typeof le=="string"&&le!==""||typeof le=="number"||typeof le=="bigint")return K=K.get(Y)||null,A(q,K,""+le,Ce);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case g:return K=K.get(le.key===null?Y:le.key)||null,$(q,K,le,Ce);case v:return K=K.get(le.key===null?Y:le.key)||null,X(q,K,le,Ce);case V:return le=di(le),se(K,q,Y,le,Ce)}if(M(le)||ne(le))return K=K.get(Y)||null,ae(q,K,le,Ce,null);if(typeof le.then=="function")return se(K,q,Y,Oc(le),Ce);if(le.$$typeof===C)return se(K,q,Y,Cc(q,le),Ce);Ic(q,le)}return null}function ve(K,q,Y,le){for(var Ce=null,tt=null,Se=q,Pe=q=0,Ze=null;Se!==null&&Pe<Y.length;Pe++){Se.index>Pe?(Ze=Se,Se=null):Ze=Se.sibling;var nt=ee(K,Se,Y[Pe],le);if(nt===null){Se===null&&(Se=Ze);break}i&&Se&&nt.alternate===null&&o(K,Se),q=b(nt,q,Pe),tt===null?Ce=nt:tt.sibling=nt,tt=nt,Se=Ze}if(Pe===Y.length)return c(K,Se),Ye&&Yr(K,Pe),Ce;if(Se===null){for(;Pe<Y.length;Pe++)Se=ce(K,Y[Pe],le),Se!==null&&(q=b(Se,q,Pe),tt===null?Ce=Se:tt.sibling=Se,tt=Se);return Ye&&Yr(K,Pe),Ce}for(Se=d(Se);Pe<Y.length;Pe++)Ze=se(Se,K,Pe,Y[Pe],le),Ze!==null&&(i&&Ze.alternate!==null&&Se.delete(Ze.key===null?Pe:Ze.key),q=b(Ze,q,Pe),tt===null?Ce=Ze:tt.sibling=Ze,tt=Ze);return i&&Se.forEach(function($s){return o(K,$s)}),Ye&&Yr(K,Pe),Ce}function Oe(K,q,Y,le){if(Y==null)throw Error(r(151));for(var Ce=null,tt=null,Se=q,Pe=q=0,Ze=null,nt=Y.next();Se!==null&&!nt.done;Pe++,nt=Y.next()){Se.index>Pe?(Ze=Se,Se=null):Ze=Se.sibling;var $s=ee(K,Se,nt.value,le);if($s===null){Se===null&&(Se=Ze);break}i&&Se&&$s.alternate===null&&o(K,Se),q=b($s,q,Pe),tt===null?Ce=$s:tt.sibling=$s,tt=$s,Se=Ze}if(nt.done)return c(K,Se),Ye&&Yr(K,Pe),Ce;if(Se===null){for(;!nt.done;Pe++,nt=Y.next())nt=ce(K,nt.value,le),nt!==null&&(q=b(nt,q,Pe),tt===null?Ce=nt:tt.sibling=nt,tt=nt);return Ye&&Yr(K,Pe),Ce}for(Se=d(Se);!nt.done;Pe++,nt=Y.next())nt=se(Se,K,Pe,nt.value,le),nt!==null&&(i&&nt.alternate!==null&&Se.delete(nt.key===null?Pe:nt.key),q=b(nt,q,Pe),tt===null?Ce=nt:tt.sibling=nt,tt=nt);return i&&Se.forEach(function(K2){return o(K,K2)}),Ye&&Yr(K,Pe),Ce}function ft(K,q,Y,le){if(typeof Y=="object"&&Y!==null&&Y.type===x&&Y.key===null&&(Y=Y.props.children),typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case g:e:{for(var Ce=Y.key;q!==null;){if(q.key===Ce){if(Ce=Y.type,Ce===x){if(q.tag===7){c(K,q.sibling),le=y(q,Y.props.children),le.return=K,K=le;break e}}else if(q.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===V&&di(Ce)===q.type){c(K,q.sibling),le=y(q,Y.props),wo(le,Y),le.return=K,K=le;break e}c(K,q);break}else o(K,q);q=q.sibling}Y.type===x?(le=li(Y.props.children,K.mode,le,Y.key),le.return=K,K=le):(le=Sc(Y.type,Y.key,Y.props,null,K.mode,le),wo(le,Y),le.return=K,K=le)}return S(K);case v:e:{for(Ce=Y.key;q!==null;){if(q.key===Ce)if(q.tag===4&&q.stateNode.containerInfo===Y.containerInfo&&q.stateNode.implementation===Y.implementation){c(K,q.sibling),le=y(q,Y.children||[]),le.return=K,K=le;break e}else{c(K,q);break}else o(K,q);q=q.sibling}le=id(Y,K.mode,le),le.return=K,K=le}return S(K);case V:return Y=di(Y),ft(K,q,Y,le)}if(M(Y))return ve(K,q,Y,le);if(ne(Y)){if(Ce=ne(Y),typeof Ce!="function")throw Error(r(150));return Y=Ce.call(Y),Oe(K,q,Y,le)}if(typeof Y.then=="function")return ft(K,q,Oc(Y),le);if(Y.$$typeof===C)return ft(K,q,Cc(K,Y),le);Ic(K,Y)}return typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint"?(Y=""+Y,q!==null&&q.tag===6?(c(K,q.sibling),le=y(q,Y),le.return=K,K=le):(c(K,q),le=sd(Y,K.mode,le),le.return=K,K=le),S(K)):c(K,q)}return function(K,q,Y,le){try{xo=0;var Ce=ft(K,q,Y,le);return aa=null,Ce}catch(Se){if(Se===ia||Se===Ac)throw Se;var tt=Vn(29,Se,null,K.mode);return tt.lanes=le,tt.return=K,tt}}}var mi=$_(!0),q_=$_(!1),ks=!1;function yd(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function _d(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Es(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Cs(i,o,c){var d=i.updateQueue;if(d===null)return null;if(d=d.shared,(st&2)!==0){var y=d.pending;return y===null?o.next=o:(o.next=y.next,y.next=o),d.pending=o,o=wc(i),E_(i,null,c),o}return xc(i,d,o,c),wc(i)}function So(i,o,c){if(o=o.updateQueue,o!==null&&(o=o.shared,(c&4194048)!==0)){var d=o.lanes;d&=i.pendingLanes,c|=d,o.lanes=c,M0(i,c)}}function bd(i,o){var c=i.updateQueue,d=i.alternate;if(d!==null&&(d=d.updateQueue,c===d)){var y=null,b=null;if(c=c.firstBaseUpdate,c!==null){do{var S={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};b===null?y=b=S:b=b.next=S,c=c.next}while(c!==null);b===null?y=b=o:b=b.next=o}else y=b=o;c={baseState:d.baseState,firstBaseUpdate:y,lastBaseUpdate:b,shared:d.shared,callbacks:d.callbacks},i.updateQueue=c;return}i=c.lastBaseUpdate,i===null?c.firstBaseUpdate=o:i.next=o,c.lastBaseUpdate=o}var vd=!1;function ko(){if(vd){var i=sa;if(i!==null)throw i}}function Eo(i,o,c,d){vd=!1;var y=i.updateQueue;ks=!1;var b=y.firstBaseUpdate,S=y.lastBaseUpdate,A=y.shared.pending;if(A!==null){y.shared.pending=null;var $=A,X=$.next;$.next=null,S===null?b=X:S.next=X,S=$;var ae=i.alternate;ae!==null&&(ae=ae.updateQueue,A=ae.lastBaseUpdate,A!==S&&(A===null?ae.firstBaseUpdate=X:A.next=X,ae.lastBaseUpdate=$))}if(b!==null){var ce=y.baseState;S=0,ae=X=$=null,A=b;do{var ee=A.lane&-536870913,se=ee!==A.lane;if(se?(Ke&ee)===ee:(d&ee)===ee){ee!==0&&ee===ra&&(vd=!0),ae!==null&&(ae=ae.next={lane:0,tag:A.tag,payload:A.payload,callback:null,next:null});e:{var ve=i,Oe=A;ee=o;var ft=c;switch(Oe.tag){case 1:if(ve=Oe.payload,typeof ve=="function"){ce=ve.call(ft,ce,ee);break e}ce=ve;break e;case 3:ve.flags=ve.flags&-65537|128;case 0:if(ve=Oe.payload,ee=typeof ve=="function"?ve.call(ft,ce,ee):ve,ee==null)break e;ce=p({},ce,ee);break e;case 2:ks=!0}}ee=A.callback,ee!==null&&(i.flags|=64,se&&(i.flags|=8192),se=y.callbacks,se===null?y.callbacks=[ee]:se.push(ee))}else se={lane:ee,tag:A.tag,payload:A.payload,callback:A.callback,next:null},ae===null?(X=ae=se,$=ce):ae=ae.next=se,S|=ee;if(A=A.next,A===null){if(A=y.shared.pending,A===null)break;se=A,A=se.next,se.next=null,y.lastBaseUpdate=se,y.shared.pending=null}}while(!0);ae===null&&($=ce),y.baseState=$,y.firstBaseUpdate=X,y.lastBaseUpdate=ae,b===null&&(y.shared.lanes=0),Is|=S,i.lanes=S,i.memoizedState=ce}}function F_(i,o){if(typeof i!="function")throw Error(r(191,i));i.call(o)}function V_(i,o){var c=i.callbacks;if(c!==null)for(i.callbacks=null,i=0;i<c.length;i++)F_(c[i],o)}var oa=N(null),Nc=N(0);function H_(i,o){i=ls,O(Nc,i),O(oa,o),ls=i|o.baseLanes}function xd(){O(Nc,ls),O(oa,oa.current)}function wd(){ls=Nc.current,F(oa),F(Nc)}var Hn=N(null),fr=null;function Ts(i){var o=i.alternate;O(Ct,Ct.current&1),O(Hn,i),fr===null&&(o===null||oa.current!==null||o.memoizedState!==null)&&(fr=i)}function Sd(i){O(Ct,Ct.current),O(Hn,i),fr===null&&(fr=i)}function G_(i){i.tag===22?(O(Ct,Ct.current),O(Hn,i),fr===null&&(fr=i)):As()}function As(){O(Ct,Ct.current),O(Hn,Hn.current)}function Gn(i){F(Hn),fr===i&&(fr=null),F(Ct)}var Ct=N(0);function Mc(i){for(var o=i;o!==null;){if(o.tag===13){var c=o.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||Rp(c)||Op(c)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var es=0,je=null,ct=null,It=null,Dc=!1,la=!1,gi=!1,Lc=0,Co=0,ca=null,jR=0;function kt(){throw Error(r(321))}function kd(i,o){if(o===null)return!1;for(var c=0;c<o.length&&c<i.length;c++)if(!Fn(i[c],o[c]))return!1;return!0}function Ed(i,o,c,d,y,b){return es=b,je=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,B.H=i===null||i.memoizedState===null?Rb:Ud,gi=!1,b=c(d,y),gi=!1,la&&(b=Z_(o,c,d,y)),K_(i),b}function K_(i){B.H=Ro;var o=ct!==null&&ct.next!==null;if(es=0,It=ct=je=null,Dc=!1,Co=0,ca=null,o)throw Error(r(300));i===null||Nt||(i=i.dependencies,i!==null&&Ec(i)&&(Nt=!0))}function Z_(i,o,c,d){je=i;var y=0;do{if(la&&(ca=null),Co=0,la=!1,25<=y)throw Error(r(301));if(y+=1,It=ct=null,i.updateQueue!=null){var b=i.updateQueue;b.lastEffect=null,b.events=null,b.stores=null,b.memoCache!=null&&(b.memoCache.index=0)}B.H=Ob,b=o(c,d)}while(la);return b}function PR(){var i=B.H,o=i.useState()[0];return o=typeof o.then=="function"?To(o):o,i=i.useState()[0],(ct!==null?ct.memoizedState:null)!==i&&(je.flags|=1024),o}function Cd(){var i=Lc!==0;return Lc=0,i}function Td(i,o,c){o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~c}function Ad(i){if(Dc){for(i=i.memoizedState;i!==null;){var o=i.queue;o!==null&&(o.pending=null),i=i.next}Dc=!1}es=0,It=ct=je=null,la=!1,Co=Lc=0,ca=null}function Sn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return It===null?je.memoizedState=It=i:It=It.next=i,It}function Tt(){if(ct===null){var i=je.alternate;i=i!==null?i.memoizedState:null}else i=ct.next;var o=It===null?je.memoizedState:It.next;if(o!==null)It=o,ct=i;else{if(i===null)throw je.alternate===null?Error(r(467)):Error(r(310));ct=i,i={memoizedState:ct.memoizedState,baseState:ct.baseState,baseQueue:ct.baseQueue,queue:ct.queue,next:null},It===null?je.memoizedState=It=i:It=It.next=i}return It}function zc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function To(i){var o=Co;return Co+=1,ca===null&&(ca=[]),i=P_(ca,i,o),o=je,(It===null?o.memoizedState:It.next)===null&&(o=o.alternate,B.H=o===null||o.memoizedState===null?Rb:Ud),i}function jc(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return To(i);if(i.$$typeof===C)return sn(i)}throw Error(r(438,String(i)))}function Rd(i){var o=null,c=je.updateQueue;if(c!==null&&(o=c.memoCache),o==null){var d=je.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(o={data:d.data.map(function(y){return y.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),c===null&&(c=zc(),je.updateQueue=c),c.memoCache=o,c=o.data[o.index],c===void 0)for(c=o.data[o.index]=Array(i),d=0;d<i;d++)c[d]=P;return o.index++,c}function ts(i,o){return typeof o=="function"?o(i):o}function Pc(i){var o=Tt();return Od(o,ct,i)}function Od(i,o,c){var d=i.queue;if(d===null)throw Error(r(311));d.lastRenderedReducer=c;var y=i.baseQueue,b=d.pending;if(b!==null){if(y!==null){var S=y.next;y.next=b.next,b.next=S}o.baseQueue=y=b,d.pending=null}if(b=i.baseState,y===null)i.memoizedState=b;else{o=y.next;var A=S=null,$=null,X=o,ae=!1;do{var ce=X.lane&-536870913;if(ce!==X.lane?(Ke&ce)===ce:(es&ce)===ce){var ee=X.revertLane;if(ee===0)$!==null&&($=$.next={lane:0,revertLane:0,gesture:null,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null}),ce===ra&&(ae=!0);else if((es&ee)===ee){X=X.next,ee===ra&&(ae=!0);continue}else ce={lane:0,revertLane:X.revertLane,gesture:null,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},$===null?(A=$=ce,S=b):$=$.next=ce,je.lanes|=ee,Is|=ee;ce=X.action,gi&&c(b,ce),b=X.hasEagerState?X.eagerState:c(b,ce)}else ee={lane:ce,revertLane:X.revertLane,gesture:X.gesture,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},$===null?(A=$=ee,S=b):$=$.next=ee,je.lanes|=ce,Is|=ce;X=X.next}while(X!==null&&X!==o);if($===null?S=b:$.next=A,!Fn(b,i.memoizedState)&&(Nt=!0,ae&&(c=sa,c!==null)))throw c;i.memoizedState=b,i.baseState=S,i.baseQueue=$,d.lastRenderedState=b}return y===null&&(d.lanes=0),[i.memoizedState,d.dispatch]}function Id(i){var o=Tt(),c=o.queue;if(c===null)throw Error(r(311));c.lastRenderedReducer=i;var d=c.dispatch,y=c.pending,b=o.memoizedState;if(y!==null){c.pending=null;var S=y=y.next;do b=i(b,S.action),S=S.next;while(S!==y);Fn(b,o.memoizedState)||(Nt=!0),o.memoizedState=b,o.baseQueue===null&&(o.baseState=b),c.lastRenderedState=b}return[b,d]}function Q_(i,o,c){var d=je,y=Tt(),b=Ye;if(b){if(c===void 0)throw Error(r(407));c=c()}else c=o();var S=!Fn((ct||y).memoizedState,c);if(S&&(y.memoizedState=c,Nt=!0),y=y.queue,Dd(X_.bind(null,d,y,i),[i]),y.getSnapshot!==o||S||It!==null&&It.memoizedState.tag&1){if(d.flags|=2048,ua(9,{destroy:void 0},Y_.bind(null,d,y,c,o),null),pt===null)throw Error(r(349));b||(es&127)!==0||J_(d,o,c)}return c}function J_(i,o,c){i.flags|=16384,i={getSnapshot:o,value:c},o=je.updateQueue,o===null?(o=zc(),je.updateQueue=o,o.stores=[i]):(c=o.stores,c===null?o.stores=[i]:c.push(i))}function Y_(i,o,c,d){o.value=c,o.getSnapshot=d,W_(o)&&eb(i)}function X_(i,o,c){return c(function(){W_(o)&&eb(i)})}function W_(i){var o=i.getSnapshot;i=i.value;try{var c=o();return!Fn(i,c)}catch{return!0}}function eb(i){var o=oi(i,2);o!==null&&jn(o,i,2)}function Nd(i){var o=Sn();if(typeof i=="function"){var c=i;if(i=c(),gi){dn(!0);try{c()}finally{dn(!1)}}}return o.memoizedState=o.baseState=i,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ts,lastRenderedState:i},o}function tb(i,o,c,d){return i.baseState=c,Od(i,ct,typeof d=="function"?d:ts)}function BR(i,o,c,d,y){if($c(i))throw Error(r(485));if(i=o.action,i!==null){var b={payload:y,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(S){b.listeners.push(S)}};B.T!==null?c(!0):b.isTransition=!1,d(b),c=o.pending,c===null?(b.next=o.pending=b,nb(o,b)):(b.next=c.next,o.pending=c.next=b)}}function nb(i,o){var c=o.action,d=o.payload,y=i.state;if(o.isTransition){var b=B.T,S={};B.T=S;try{var A=c(y,d),$=B.S;$!==null&&$(S,A),rb(i,o,A)}catch(X){Md(i,o,X)}finally{b!==null&&S.types!==null&&(b.types=S.types),B.T=b}}else try{b=c(y,d),rb(i,o,b)}catch(X){Md(i,o,X)}}function rb(i,o,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(d){sb(i,o,d)},function(d){return Md(i,o,d)}):sb(i,o,c)}function sb(i,o,c){o.status="fulfilled",o.value=c,ib(o),i.state=c,o=i.pending,o!==null&&(c=o.next,c===o?i.pending=null:(c=c.next,o.next=c,nb(i,c)))}function Md(i,o,c){var d=i.pending;if(i.pending=null,d!==null){d=d.next;do o.status="rejected",o.reason=c,ib(o),o=o.next;while(o!==d)}i.action=null}function ib(i){i=i.listeners;for(var o=0;o<i.length;o++)(0,i[o])()}function ab(i,o){return o}function ob(i,o){if(Ye){var c=pt.formState;if(c!==null){e:{var d=je;if(Ye){if(yt){t:{for(var y=yt,b=ur;y.nodeType!==8;){if(!b){y=null;break t}if(y=hr(y.nextSibling),y===null){y=null;break t}}b=y.data,y=b==="F!"||b==="F"?y:null}if(y){yt=hr(y.nextSibling),d=y.data==="F!";break e}}ws(d)}d=!1}d&&(o=c[0])}}return c=Sn(),c.memoizedState=c.baseState=o,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ab,lastRenderedState:o},c.queue=d,c=Cb.bind(null,je,d),d.dispatch=c,d=Nd(!1),b=Bd.bind(null,je,!1,d.queue),d=Sn(),y={state:o,dispatch:null,action:i,pending:null},d.queue=y,c=BR.bind(null,je,y,b,c),y.dispatch=c,d.memoizedState=i,[o,c,!1]}function lb(i){var o=Tt();return cb(o,ct,i)}function cb(i,o,c){if(o=Od(i,o,ab)[0],i=Pc(ts)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var d=To(o)}catch(S){throw S===ia?Ac:S}else d=o;o=Tt();var y=o.queue,b=y.dispatch;return c!==o.memoizedState&&(je.flags|=2048,ua(9,{destroy:void 0},UR.bind(null,y,c),null)),[d,b,i]}function UR(i,o){i.action=o}function ub(i){var o=Tt(),c=ct;if(c!==null)return cb(o,c,i);Tt(),o=o.memoizedState,c=Tt();var d=c.queue.dispatch;return c.memoizedState=i,[o,d,!1]}function ua(i,o,c,d){return i={tag:i,create:c,deps:d,inst:o,next:null},o=je.updateQueue,o===null&&(o=zc(),je.updateQueue=o),c=o.lastEffect,c===null?o.lastEffect=i.next=i:(d=c.next,c.next=i,i.next=d,o.lastEffect=i),i}function fb(){return Tt().memoizedState}function Bc(i,o,c,d){var y=Sn();je.flags|=i,y.memoizedState=ua(1|o,{destroy:void 0},c,d===void 0?null:d)}function Uc(i,o,c,d){var y=Tt();d=d===void 0?null:d;var b=y.memoizedState.inst;ct!==null&&d!==null&&kd(d,ct.memoizedState.deps)?y.memoizedState=ua(o,b,c,d):(je.flags|=i,y.memoizedState=ua(1|o,b,c,d))}function hb(i,o){Bc(8390656,8,i,o)}function Dd(i,o){Uc(2048,8,i,o)}function $R(i){je.flags|=4;var o=je.updateQueue;if(o===null)o=zc(),je.updateQueue=o,o.events=[i];else{var c=o.events;c===null?o.events=[i]:c.push(i)}}function db(i){var o=Tt().memoizedState;return $R({ref:o,nextImpl:i}),function(){if((st&2)!==0)throw Error(r(440));return o.impl.apply(void 0,arguments)}}function pb(i,o){return Uc(4,2,i,o)}function mb(i,o){return Uc(4,4,i,o)}function gb(i,o){if(typeof o=="function"){i=i();var c=o(i);return function(){typeof c=="function"?c():o(null)}}if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function yb(i,o,c){c=c!=null?c.concat([i]):null,Uc(4,4,gb.bind(null,o,i),c)}function Ld(){}function _b(i,o){var c=Tt();o=o===void 0?null:o;var d=c.memoizedState;return o!==null&&kd(o,d[1])?d[0]:(c.memoizedState=[i,o],i)}function bb(i,o){var c=Tt();o=o===void 0?null:o;var d=c.memoizedState;if(o!==null&&kd(o,d[1]))return d[0];if(d=i(),gi){dn(!0);try{i()}finally{dn(!1)}}return c.memoizedState=[d,o],d}function zd(i,o,c){return c===void 0||(es&1073741824)!==0&&(Ke&261930)===0?i.memoizedState=o:(i.memoizedState=c,i=vv(),je.lanes|=i,Is|=i,c)}function vb(i,o,c,d){return Fn(c,o)?c:oa.current!==null?(i=zd(i,c,d),Fn(i,o)||(Nt=!0),i):(es&42)===0||(es&1073741824)!==0&&(Ke&261930)===0?(Nt=!0,i.memoizedState=c):(i=vv(),je.lanes|=i,Is|=i,o)}function xb(i,o,c,d,y){var b=G.p;G.p=b!==0&&8>b?b:8;var S=B.T,A={};B.T=A,Bd(i,!1,o,c);try{var $=y(),X=B.S;if(X!==null&&X(A,$),$!==null&&typeof $=="object"&&typeof $.then=="function"){var ae=zR($,d);Ao(i,o,ae,Qn(i))}else Ao(i,o,d,Qn(i))}catch(ce){Ao(i,o,{then:function(){},status:"rejected",reason:ce},Qn())}finally{G.p=b,S!==null&&A.types!==null&&(S.types=A.types),B.T=S}}function qR(){}function jd(i,o,c,d){if(i.tag!==5)throw Error(r(476));var y=wb(i).queue;xb(i,y,o,re,c===null?qR:function(){return Sb(i),c(d)})}function wb(i){var o=i.memoizedState;if(o!==null)return o;o={memoizedState:re,baseState:re,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ts,lastRenderedState:re},next:null};var c={};return o.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ts,lastRenderedState:c},next:null},i.memoizedState=o,i=i.alternate,i!==null&&(i.memoizedState=o),o}function Sb(i){var o=wb(i);o.next===null&&(o=i.alternate.memoizedState),Ao(i,o.next.queue,{},Qn())}function Pd(){return sn(Ho)}function kb(){return Tt().memoizedState}function Eb(){return Tt().memoizedState}function FR(i){for(var o=i.return;o!==null;){switch(o.tag){case 24:case 3:var c=Qn();i=Es(c);var d=Cs(o,i,c);d!==null&&(jn(d,o,c),So(d,o,c)),o={cache:dd()},i.payload=o;return}o=o.return}}function VR(i,o,c){var d=Qn();c={lane:d,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},$c(i)?Tb(o,c):(c=nd(i,o,c,d),c!==null&&(jn(c,i,d),Ab(c,o,d)))}function Cb(i,o,c){var d=Qn();Ao(i,o,c,d)}function Ao(i,o,c,d){var y={lane:d,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null};if($c(i))Tb(o,y);else{var b=i.alternate;if(i.lanes===0&&(b===null||b.lanes===0)&&(b=o.lastRenderedReducer,b!==null))try{var S=o.lastRenderedState,A=b(S,c);if(y.hasEagerState=!0,y.eagerState=A,Fn(A,S))return xc(i,o,y,0),pt===null&&vc(),!1}catch{}if(c=nd(i,o,y,d),c!==null)return jn(c,i,d),Ab(c,o,d),!0}return!1}function Bd(i,o,c,d){if(d={lane:2,revertLane:yp(),gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},$c(i)){if(o)throw Error(r(479))}else o=nd(i,c,d,2),o!==null&&jn(o,i,2)}function $c(i){var o=i.alternate;return i===je||o!==null&&o===je}function Tb(i,o){la=Dc=!0;var c=i.pending;c===null?o.next=o:(o.next=c.next,c.next=o),i.pending=o}function Ab(i,o,c){if((c&4194048)!==0){var d=o.lanes;d&=i.pendingLanes,c|=d,o.lanes=c,M0(i,c)}}var Ro={readContext:sn,use:jc,useCallback:kt,useContext:kt,useEffect:kt,useImperativeHandle:kt,useLayoutEffect:kt,useInsertionEffect:kt,useMemo:kt,useReducer:kt,useRef:kt,useState:kt,useDebugValue:kt,useDeferredValue:kt,useTransition:kt,useSyncExternalStore:kt,useId:kt,useHostTransitionStatus:kt,useFormState:kt,useActionState:kt,useOptimistic:kt,useMemoCache:kt,useCacheRefresh:kt};Ro.useEffectEvent=kt;var Rb={readContext:sn,use:jc,useCallback:function(i,o){return Sn().memoizedState=[i,o===void 0?null:o],i},useContext:sn,useEffect:hb,useImperativeHandle:function(i,o,c){c=c!=null?c.concat([i]):null,Bc(4194308,4,gb.bind(null,o,i),c)},useLayoutEffect:function(i,o){return Bc(4194308,4,i,o)},useInsertionEffect:function(i,o){Bc(4,2,i,o)},useMemo:function(i,o){var c=Sn();o=o===void 0?null:o;var d=i();if(gi){dn(!0);try{i()}finally{dn(!1)}}return c.memoizedState=[d,o],d},useReducer:function(i,o,c){var d=Sn();if(c!==void 0){var y=c(o);if(gi){dn(!0);try{c(o)}finally{dn(!1)}}}else y=o;return d.memoizedState=d.baseState=y,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:y},d.queue=i,i=i.dispatch=VR.bind(null,je,i),[d.memoizedState,i]},useRef:function(i){var o=Sn();return i={current:i},o.memoizedState=i},useState:function(i){i=Nd(i);var o=i.queue,c=Cb.bind(null,je,o);return o.dispatch=c,[i.memoizedState,c]},useDebugValue:Ld,useDeferredValue:function(i,o){var c=Sn();return zd(c,i,o)},useTransition:function(){var i=Nd(!1);return i=xb.bind(null,je,i.queue,!0,!1),Sn().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,o,c){var d=je,y=Sn();if(Ye){if(c===void 0)throw Error(r(407));c=c()}else{if(c=o(),pt===null)throw Error(r(349));(Ke&127)!==0||J_(d,o,c)}y.memoizedState=c;var b={value:c,getSnapshot:o};return y.queue=b,hb(X_.bind(null,d,b,i),[i]),d.flags|=2048,ua(9,{destroy:void 0},Y_.bind(null,d,b,c,o),null),c},useId:function(){var i=Sn(),o=pt.identifierPrefix;if(Ye){var c=Ir,d=Or;c=(d&~(1<<32-dt(d)-1)).toString(32)+c,o="_"+o+"R_"+c,c=Lc++,0<c&&(o+="H"+c.toString(32)),o+="_"}else c=jR++,o="_"+o+"r_"+c.toString(32)+"_";return i.memoizedState=o},useHostTransitionStatus:Pd,useFormState:ob,useActionState:ob,useOptimistic:function(i){var o=Sn();o.memoizedState=o.baseState=i;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=c,o=Bd.bind(null,je,!0,c),c.dispatch=o,[i,o]},useMemoCache:Rd,useCacheRefresh:function(){return Sn().memoizedState=FR.bind(null,je)},useEffectEvent:function(i){var o=Sn(),c={impl:i};return o.memoizedState=c,function(){if((st&2)!==0)throw Error(r(440));return c.impl.apply(void 0,arguments)}}},Ud={readContext:sn,use:jc,useCallback:_b,useContext:sn,useEffect:Dd,useImperativeHandle:yb,useInsertionEffect:pb,useLayoutEffect:mb,useMemo:bb,useReducer:Pc,useRef:fb,useState:function(){return Pc(ts)},useDebugValue:Ld,useDeferredValue:function(i,o){var c=Tt();return vb(c,ct.memoizedState,i,o)},useTransition:function(){var i=Pc(ts)[0],o=Tt().memoizedState;return[typeof i=="boolean"?i:To(i),o]},useSyncExternalStore:Q_,useId:kb,useHostTransitionStatus:Pd,useFormState:lb,useActionState:lb,useOptimistic:function(i,o){var c=Tt();return tb(c,ct,i,o)},useMemoCache:Rd,useCacheRefresh:Eb};Ud.useEffectEvent=db;var Ob={readContext:sn,use:jc,useCallback:_b,useContext:sn,useEffect:Dd,useImperativeHandle:yb,useInsertionEffect:pb,useLayoutEffect:mb,useMemo:bb,useReducer:Id,useRef:fb,useState:function(){return Id(ts)},useDebugValue:Ld,useDeferredValue:function(i,o){var c=Tt();return ct===null?zd(c,i,o):vb(c,ct.memoizedState,i,o)},useTransition:function(){var i=Id(ts)[0],o=Tt().memoizedState;return[typeof i=="boolean"?i:To(i),o]},useSyncExternalStore:Q_,useId:kb,useHostTransitionStatus:Pd,useFormState:ub,useActionState:ub,useOptimistic:function(i,o){var c=Tt();return ct!==null?tb(c,ct,i,o):(c.baseState=i,[i,c.queue.dispatch])},useMemoCache:Rd,useCacheRefresh:Eb};Ob.useEffectEvent=db;function $d(i,o,c,d){o=i.memoizedState,c=c(d,o),c=c==null?o:p({},o,c),i.memoizedState=c,i.lanes===0&&(i.updateQueue.baseState=c)}var qd={enqueueSetState:function(i,o,c){i=i._reactInternals;var d=Qn(),y=Es(d);y.payload=o,c!=null&&(y.callback=c),o=Cs(i,y,d),o!==null&&(jn(o,i,d),So(o,i,d))},enqueueReplaceState:function(i,o,c){i=i._reactInternals;var d=Qn(),y=Es(d);y.tag=1,y.payload=o,c!=null&&(y.callback=c),o=Cs(i,y,d),o!==null&&(jn(o,i,d),So(o,i,d))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var c=Qn(),d=Es(c);d.tag=2,o!=null&&(d.callback=o),o=Cs(i,d,c),o!==null&&(jn(o,i,c),So(o,i,c))}};function Ib(i,o,c,d,y,b,S){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(d,b,S):o.prototype&&o.prototype.isPureReactComponent?!mo(c,d)||!mo(y,b):!0}function Nb(i,o,c,d){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(c,d),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(c,d),o.state!==i&&qd.enqueueReplaceState(o,o.state,null)}function yi(i,o){var c=o;if("ref"in o){c={};for(var d in o)d!=="ref"&&(c[d]=o[d])}if(i=i.defaultProps){c===o&&(c=p({},c));for(var y in i)c[y]===void 0&&(c[y]=i[y])}return c}function Mb(i){bc(i)}function Db(i){console.error(i)}function Lb(i){bc(i)}function qc(i,o){try{var c=i.onUncaughtError;c(o.value,{componentStack:o.stack})}catch(d){setTimeout(function(){throw d})}}function zb(i,o,c){try{var d=i.onCaughtError;d(c.value,{componentStack:c.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function Fd(i,o,c){return c=Es(c),c.tag=3,c.payload={element:null},c.callback=function(){qc(i,o)},c}function jb(i){return i=Es(i),i.tag=3,i}function Pb(i,o,c,d){var y=c.type.getDerivedStateFromError;if(typeof y=="function"){var b=d.value;i.payload=function(){return y(b)},i.callback=function(){zb(o,c,d)}}var S=c.stateNode;S!==null&&typeof S.componentDidCatch=="function"&&(i.callback=function(){zb(o,c,d),typeof y!="function"&&(Ns===null?Ns=new Set([this]):Ns.add(this));var A=d.stack;this.componentDidCatch(d.value,{componentStack:A!==null?A:""})})}function HR(i,o,c,d,y){if(c.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(o=c.alternate,o!==null&&na(o,c,y,!0),c=Hn.current,c!==null){switch(c.tag){case 31:case 13:return fr===null?eu():c.alternate===null&&Et===0&&(Et=3),c.flags&=-257,c.flags|=65536,c.lanes=y,d===Rc?c.flags|=16384:(o=c.updateQueue,o===null?c.updateQueue=new Set([d]):o.add(d),pp(i,d,y)),!1;case 22:return c.flags|=65536,d===Rc?c.flags|=16384:(o=c.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([d])},c.updateQueue=o):(c=o.retryQueue,c===null?o.retryQueue=new Set([d]):c.add(d)),pp(i,d,y)),!1}throw Error(r(435,c.tag))}return pp(i,d,y),eu(),!1}if(Ye)return o=Hn.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=y,d!==ld&&(i=Error(r(422),{cause:d}),_o(or(i,c)))):(d!==ld&&(o=Error(r(423),{cause:d}),_o(or(o,c))),i=i.current.alternate,i.flags|=65536,y&=-y,i.lanes|=y,d=or(d,c),y=Fd(i.stateNode,d,y),bd(i,y),Et!==4&&(Et=2)),!1;var b=Error(r(520),{cause:d});if(b=or(b,c),jo===null?jo=[b]:jo.push(b),Et!==4&&(Et=2),o===null)return!0;d=or(d,c),c=o;do{switch(c.tag){case 3:return c.flags|=65536,i=y&-y,c.lanes|=i,i=Fd(c.stateNode,d,i),bd(c,i),!1;case 1:if(o=c.type,b=c.stateNode,(c.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Ns===null||!Ns.has(b))))return c.flags|=65536,y&=-y,c.lanes|=y,y=jb(y),Pb(y,i,c,d),bd(c,y),!1}c=c.return}while(c!==null);return!1}var Vd=Error(r(461)),Nt=!1;function an(i,o,c,d){o.child=i===null?q_(o,null,c,d):mi(o,i.child,c,d)}function Bb(i,o,c,d,y){c=c.render;var b=o.ref;if("ref"in d){var S={};for(var A in d)A!=="ref"&&(S[A]=d[A])}else S=d;return fi(o),d=Ed(i,o,c,S,b,y),A=Cd(),i!==null&&!Nt?(Td(i,o,y),ns(i,o,y)):(Ye&&A&&ad(o),o.flags|=1,an(i,o,d,y),o.child)}function Ub(i,o,c,d,y){if(i===null){var b=c.type;return typeof b=="function"&&!rd(b)&&b.defaultProps===void 0&&c.compare===null?(o.tag=15,o.type=b,$b(i,o,b,d,y)):(i=Sc(c.type,null,d,o,o.mode,y),i.ref=o.ref,i.return=o,o.child=i)}if(b=i.child,!Xd(i,y)){var S=b.memoizedProps;if(c=c.compare,c=c!==null?c:mo,c(S,d)&&i.ref===o.ref)return ns(i,o,y)}return o.flags|=1,i=Jr(b,d),i.ref=o.ref,i.return=o,o.child=i}function $b(i,o,c,d,y){if(i!==null){var b=i.memoizedProps;if(mo(b,d)&&i.ref===o.ref)if(Nt=!1,o.pendingProps=d=b,Xd(i,y))(i.flags&131072)!==0&&(Nt=!0);else return o.lanes=i.lanes,ns(i,o,y)}return Hd(i,o,c,d,y)}function qb(i,o,c,d){var y=d.children,b=i!==null?i.memoizedState:null;if(i===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.mode==="hidden"){if((o.flags&128)!==0){if(b=b!==null?b.baseLanes|c:c,i!==null){for(d=o.child=i.child,y=0;d!==null;)y=y|d.lanes|d.childLanes,d=d.sibling;d=y&~b}else d=0,o.child=null;return Fb(i,o,b,c,d)}if((c&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},i!==null&&Tc(o,b!==null?b.cachePool:null),b!==null?H_(o,b):xd(),G_(o);else return d=o.lanes=536870912,Fb(i,o,b!==null?b.baseLanes|c:c,c,d)}else b!==null?(Tc(o,b.cachePool),H_(o,b),As(),o.memoizedState=null):(i!==null&&Tc(o,null),xd(),As());return an(i,o,y,c),o.child}function Oo(i,o){return i!==null&&i.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function Fb(i,o,c,d,y){var b=md();return b=b===null?null:{parent:Ot._currentValue,pool:b},o.memoizedState={baseLanes:c,cachePool:b},i!==null&&Tc(o,null),xd(),G_(o),i!==null&&na(i,o,d,!0),o.childLanes=y,null}function Fc(i,o){return o=Hc({mode:o.mode,children:o.children},i.mode),o.ref=i.ref,i.child=o,o.return=i,o}function Vb(i,o,c){return mi(o,i.child,null,c),i=Fc(o,o.pendingProps),i.flags|=2,Gn(o),o.memoizedState=null,i}function GR(i,o,c){var d=o.pendingProps,y=(o.flags&128)!==0;if(o.flags&=-129,i===null){if(Ye){if(d.mode==="hidden")return i=Fc(o,d),o.lanes=536870912,Oo(null,i);if(Sd(o),(i=yt)?(i=nx(i,ur),i=i!==null&&i.data==="&"?i:null,i!==null&&(o.memoizedState={dehydrated:i,treeContext:vs!==null?{id:Or,overflow:Ir}:null,retryLane:536870912,hydrationErrors:null},c=T_(i),c.return=o,o.child=c,rn=o,yt=null)):i=null,i===null)throw ws(o);return o.lanes=536870912,null}return Fc(o,d)}var b=i.memoizedState;if(b!==null){var S=b.dehydrated;if(Sd(o),y)if(o.flags&256)o.flags&=-257,o=Vb(i,o,c);else if(o.memoizedState!==null)o.child=i.child,o.flags|=128,o=null;else throw Error(r(558));else if(Nt||na(i,o,c,!1),y=(c&i.childLanes)!==0,Nt||y){if(d=pt,d!==null&&(S=D0(d,c),S!==0&&S!==b.retryLane))throw b.retryLane=S,oi(i,S),jn(d,i,S),Vd;eu(),o=Vb(i,o,c)}else i=b.treeContext,yt=hr(S.nextSibling),rn=o,Ye=!0,xs=null,ur=!1,i!==null&&O_(o,i),o=Fc(o,d),o.flags|=4096;return o}return i=Jr(i.child,{mode:d.mode,children:d.children}),i.ref=o.ref,o.child=i,i.return=o,i}function Vc(i,o){var c=o.ref;if(c===null)i!==null&&i.ref!==null&&(o.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(r(284));(i===null||i.ref!==c)&&(o.flags|=4194816)}}function Hd(i,o,c,d,y){return fi(o),c=Ed(i,o,c,d,void 0,y),d=Cd(),i!==null&&!Nt?(Td(i,o,y),ns(i,o,y)):(Ye&&d&&ad(o),o.flags|=1,an(i,o,c,y),o.child)}function Hb(i,o,c,d,y,b){return fi(o),o.updateQueue=null,c=Z_(o,d,c,y),K_(i),d=Cd(),i!==null&&!Nt?(Td(i,o,b),ns(i,o,b)):(Ye&&d&&ad(o),o.flags|=1,an(i,o,c,b),o.child)}function Gb(i,o,c,d,y){if(fi(o),o.stateNode===null){var b=Xi,S=c.contextType;typeof S=="object"&&S!==null&&(b=sn(S)),b=new c(d,b),o.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,b.updater=qd,o.stateNode=b,b._reactInternals=o,b=o.stateNode,b.props=d,b.state=o.memoizedState,b.refs={},yd(o),S=c.contextType,b.context=typeof S=="object"&&S!==null?sn(S):Xi,b.state=o.memoizedState,S=c.getDerivedStateFromProps,typeof S=="function"&&($d(o,c,S,d),b.state=o.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(S=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),S!==b.state&&qd.enqueueReplaceState(b,b.state,null),Eo(o,d,b,y),ko(),b.state=o.memoizedState),typeof b.componentDidMount=="function"&&(o.flags|=4194308),d=!0}else if(i===null){b=o.stateNode;var A=o.memoizedProps,$=yi(c,A);b.props=$;var X=b.context,ae=c.contextType;S=Xi,typeof ae=="object"&&ae!==null&&(S=sn(ae));var ce=c.getDerivedStateFromProps;ae=typeof ce=="function"||typeof b.getSnapshotBeforeUpdate=="function",A=o.pendingProps!==A,ae||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(A||X!==S)&&Nb(o,b,d,S),ks=!1;var ee=o.memoizedState;b.state=ee,Eo(o,d,b,y),ko(),X=o.memoizedState,A||ee!==X||ks?(typeof ce=="function"&&($d(o,c,ce,d),X=o.memoizedState),($=ks||Ib(o,c,$,d,ee,X,S))?(ae||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(o.flags|=4194308)):(typeof b.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=d,o.memoizedState=X),b.props=d,b.state=X,b.context=S,d=$):(typeof b.componentDidMount=="function"&&(o.flags|=4194308),d=!1)}else{b=o.stateNode,_d(i,o),S=o.memoizedProps,ae=yi(c,S),b.props=ae,ce=o.pendingProps,ee=b.context,X=c.contextType,$=Xi,typeof X=="object"&&X!==null&&($=sn(X)),A=c.getDerivedStateFromProps,(X=typeof A=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(S!==ce||ee!==$)&&Nb(o,b,d,$),ks=!1,ee=o.memoizedState,b.state=ee,Eo(o,d,b,y),ko();var se=o.memoizedState;S!==ce||ee!==se||ks||i!==null&&i.dependencies!==null&&Ec(i.dependencies)?(typeof A=="function"&&($d(o,c,A,d),se=o.memoizedState),(ae=ks||Ib(o,c,ae,d,ee,se,$)||i!==null&&i.dependencies!==null&&Ec(i.dependencies))?(X||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(d,se,$),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(d,se,$)),typeof b.componentDidUpdate=="function"&&(o.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof b.componentDidUpdate!="function"||S===i.memoizedProps&&ee===i.memoizedState||(o.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||S===i.memoizedProps&&ee===i.memoizedState||(o.flags|=1024),o.memoizedProps=d,o.memoizedState=se),b.props=d,b.state=se,b.context=$,d=ae):(typeof b.componentDidUpdate!="function"||S===i.memoizedProps&&ee===i.memoizedState||(o.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||S===i.memoizedProps&&ee===i.memoizedState||(o.flags|=1024),d=!1)}return b=d,Vc(i,o),d=(o.flags&128)!==0,b||d?(b=o.stateNode,c=d&&typeof c.getDerivedStateFromError!="function"?null:b.render(),o.flags|=1,i!==null&&d?(o.child=mi(o,i.child,null,y),o.child=mi(o,null,c,y)):an(i,o,c,y),o.memoizedState=b.state,i=o.child):i=ns(i,o,y),i}function Kb(i,o,c,d){return ci(),o.flags|=256,an(i,o,c,d),o.child}var Gd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Kd(i){return{baseLanes:i,cachePool:z_()}}function Zd(i,o,c){return i=i!==null?i.childLanes&~c:0,o&&(i|=Zn),i}function Zb(i,o,c){var d=o.pendingProps,y=!1,b=(o.flags&128)!==0,S;if((S=b)||(S=i!==null&&i.memoizedState===null?!1:(Ct.current&2)!==0),S&&(y=!0,o.flags&=-129),S=(o.flags&32)!==0,o.flags&=-33,i===null){if(Ye){if(y?Ts(o):As(),(i=yt)?(i=nx(i,ur),i=i!==null&&i.data!=="&"?i:null,i!==null&&(o.memoizedState={dehydrated:i,treeContext:vs!==null?{id:Or,overflow:Ir}:null,retryLane:536870912,hydrationErrors:null},c=T_(i),c.return=o,o.child=c,rn=o,yt=null)):i=null,i===null)throw ws(o);return Op(i)?o.lanes=32:o.lanes=536870912,null}var A=d.children;return d=d.fallback,y?(As(),y=o.mode,A=Hc({mode:"hidden",children:A},y),d=li(d,y,c,null),A.return=o,d.return=o,A.sibling=d,o.child=A,d=o.child,d.memoizedState=Kd(c),d.childLanes=Zd(i,S,c),o.memoizedState=Gd,Oo(null,d)):(Ts(o),Qd(o,A))}var $=i.memoizedState;if($!==null&&(A=$.dehydrated,A!==null)){if(b)o.flags&256?(Ts(o),o.flags&=-257,o=Jd(i,o,c)):o.memoizedState!==null?(As(),o.child=i.child,o.flags|=128,o=null):(As(),A=d.fallback,y=o.mode,d=Hc({mode:"visible",children:d.children},y),A=li(A,y,c,null),A.flags|=2,d.return=o,A.return=o,d.sibling=A,o.child=d,mi(o,i.child,null,c),d=o.child,d.memoizedState=Kd(c),d.childLanes=Zd(i,S,c),o.memoizedState=Gd,o=Oo(null,d));else if(Ts(o),Op(A)){if(S=A.nextSibling&&A.nextSibling.dataset,S)var X=S.dgst;S=X,d=Error(r(419)),d.stack="",d.digest=S,_o({value:d,source:null,stack:null}),o=Jd(i,o,c)}else if(Nt||na(i,o,c,!1),S=(c&i.childLanes)!==0,Nt||S){if(S=pt,S!==null&&(d=D0(S,c),d!==0&&d!==$.retryLane))throw $.retryLane=d,oi(i,d),jn(S,i,d),Vd;Rp(A)||eu(),o=Jd(i,o,c)}else Rp(A)?(o.flags|=192,o.child=i.child,o=null):(i=$.treeContext,yt=hr(A.nextSibling),rn=o,Ye=!0,xs=null,ur=!1,i!==null&&O_(o,i),o=Qd(o,d.children),o.flags|=4096);return o}return y?(As(),A=d.fallback,y=o.mode,$=i.child,X=$.sibling,d=Jr($,{mode:"hidden",children:d.children}),d.subtreeFlags=$.subtreeFlags&65011712,X!==null?A=Jr(X,A):(A=li(A,y,c,null),A.flags|=2),A.return=o,d.return=o,d.sibling=A,o.child=d,Oo(null,d),d=o.child,A=i.child.memoizedState,A===null?A=Kd(c):(y=A.cachePool,y!==null?($=Ot._currentValue,y=y.parent!==$?{parent:$,pool:$}:y):y=z_(),A={baseLanes:A.baseLanes|c,cachePool:y}),d.memoizedState=A,d.childLanes=Zd(i,S,c),o.memoizedState=Gd,Oo(i.child,d)):(Ts(o),c=i.child,i=c.sibling,c=Jr(c,{mode:"visible",children:d.children}),c.return=o,c.sibling=null,i!==null&&(S=o.deletions,S===null?(o.deletions=[i],o.flags|=16):S.push(i)),o.child=c,o.memoizedState=null,c)}function Qd(i,o){return o=Hc({mode:"visible",children:o},i.mode),o.return=i,i.child=o}function Hc(i,o){return i=Vn(22,i,null,o),i.lanes=0,i}function Jd(i,o,c){return mi(o,i.child,null,c),i=Qd(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function Qb(i,o,c){i.lanes|=o;var d=i.alternate;d!==null&&(d.lanes|=o),fd(i.return,o,c)}function Yd(i,o,c,d,y,b){var S=i.memoizedState;S===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:d,tail:c,tailMode:y,treeForkCount:b}:(S.isBackwards=o,S.rendering=null,S.renderingStartTime=0,S.last=d,S.tail=c,S.tailMode=y,S.treeForkCount=b)}function Jb(i,o,c){var d=o.pendingProps,y=d.revealOrder,b=d.tail;d=d.children;var S=Ct.current,A=(S&2)!==0;if(A?(S=S&1|2,o.flags|=128):S&=1,O(Ct,S),an(i,o,d,c),d=Ye?yo:0,!A&&i!==null&&(i.flags&128)!==0)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Qb(i,c,o);else if(i.tag===19)Qb(i,c,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(y){case"forwards":for(c=o.child,y=null;c!==null;)i=c.alternate,i!==null&&Mc(i)===null&&(y=c),c=c.sibling;c=y,c===null?(y=o.child,o.child=null):(y=c.sibling,c.sibling=null),Yd(o,!1,y,c,b,d);break;case"backwards":case"unstable_legacy-backwards":for(c=null,y=o.child,o.child=null;y!==null;){if(i=y.alternate,i!==null&&Mc(i)===null){o.child=y;break}i=y.sibling,y.sibling=c,c=y,y=i}Yd(o,!0,c,null,b,d);break;case"together":Yd(o,!1,null,null,void 0,d);break;default:o.memoizedState=null}return o.child}function ns(i,o,c){if(i!==null&&(o.dependencies=i.dependencies),Is|=o.lanes,(c&o.childLanes)===0)if(i!==null){if(na(i,o,c,!1),(c&o.childLanes)===0)return null}else return null;if(i!==null&&o.child!==i.child)throw Error(r(153));if(o.child!==null){for(i=o.child,c=Jr(i,i.pendingProps),o.child=c,c.return=o;i.sibling!==null;)i=i.sibling,c=c.sibling=Jr(i,i.pendingProps),c.return=o;c.sibling=null}return o.child}function Xd(i,o){return(i.lanes&o)!==0?!0:(i=i.dependencies,!!(i!==null&&Ec(i)))}function KR(i,o,c){switch(o.tag){case 3:Me(o,o.stateNode.containerInfo),Ss(o,Ot,i.memoizedState.cache),ci();break;case 27:case 5:rt(o);break;case 4:Me(o,o.stateNode.containerInfo);break;case 10:Ss(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,Sd(o),null;break;case 13:var d=o.memoizedState;if(d!==null)return d.dehydrated!==null?(Ts(o),o.flags|=128,null):(c&o.child.childLanes)!==0?Zb(i,o,c):(Ts(o),i=ns(i,o,c),i!==null?i.sibling:null);Ts(o);break;case 19:var y=(i.flags&128)!==0;if(d=(c&o.childLanes)!==0,d||(na(i,o,c,!1),d=(c&o.childLanes)!==0),y){if(d)return Jb(i,o,c);o.flags|=128}if(y=o.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),O(Ct,Ct.current),d)break;return null;case 22:return o.lanes=0,qb(i,o,c,o.pendingProps);case 24:Ss(o,Ot,i.memoizedState.cache)}return ns(i,o,c)}function Yb(i,o,c){if(i!==null)if(i.memoizedProps!==o.pendingProps)Nt=!0;else{if(!Xd(i,c)&&(o.flags&128)===0)return Nt=!1,KR(i,o,c);Nt=(i.flags&131072)!==0}else Nt=!1,Ye&&(o.flags&1048576)!==0&&R_(o,yo,o.index);switch(o.lanes=0,o.tag){case 16:e:{var d=o.pendingProps;if(i=di(o.elementType),o.type=i,typeof i=="function")rd(i)?(d=yi(i,d),o.tag=1,o=Gb(null,o,i,d,c)):(o.tag=0,o=Hd(null,o,i,d,c));else{if(i!=null){var y=i.$$typeof;if(y===j){o.tag=11,o=Bb(null,o,i,d,c);break e}else if(y===U){o.tag=14,o=Ub(null,o,i,d,c);break e}}throw o=z(i)||i,Error(r(306,o,""))}}return o;case 0:return Hd(i,o,o.type,o.pendingProps,c);case 1:return d=o.type,y=yi(d,o.pendingProps),Gb(i,o,d,y,c);case 3:e:{if(Me(o,o.stateNode.containerInfo),i===null)throw Error(r(387));d=o.pendingProps;var b=o.memoizedState;y=b.element,_d(i,o),Eo(o,d,null,c);var S=o.memoizedState;if(d=S.cache,Ss(o,Ot,d),d!==b.cache&&hd(o,[Ot],c,!0),ko(),d=S.element,b.isDehydrated)if(b={element:d,isDehydrated:!1,cache:S.cache},o.updateQueue.baseState=b,o.memoizedState=b,o.flags&256){o=Kb(i,o,d,c);break e}else if(d!==y){y=or(Error(r(424)),o),_o(y),o=Kb(i,o,d,c);break e}else for(i=o.stateNode.containerInfo,i.nodeType===9?i=i.body:i=i.nodeName==="HTML"?i.ownerDocument.body:i,yt=hr(i.firstChild),rn=o,Ye=!0,xs=null,ur=!0,c=q_(o,null,d,c),o.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(ci(),d===y){o=ns(i,o,c);break e}an(i,o,d,c)}o=o.child}return o;case 26:return Vc(i,o),i===null?(c=lx(o.type,null,o.pendingProps,null))?o.memoizedState=c:Ye||(c=o.type,i=o.pendingProps,d=ou(de.current).createElement(c),d[nn]=o,d[In]=i,on(d,c,i),Qt(d),o.stateNode=d):o.memoizedState=lx(o.type,i.memoizedProps,o.pendingProps,i.memoizedState),null;case 27:return rt(o),i===null&&Ye&&(d=o.stateNode=ix(o.type,o.pendingProps,de.current),rn=o,ur=!0,y=yt,zs(o.type)?(Ip=y,yt=hr(d.firstChild)):yt=y),an(i,o,o.pendingProps.children,c),Vc(i,o),i===null&&(o.flags|=4194304),o.child;case 5:return i===null&&Ye&&((y=d=yt)&&(d=S2(d,o.type,o.pendingProps,ur),d!==null?(o.stateNode=d,rn=o,yt=hr(d.firstChild),ur=!1,y=!0):y=!1),y||ws(o)),rt(o),y=o.type,b=o.pendingProps,S=i!==null?i.memoizedProps:null,d=b.children,Cp(y,b)?d=null:S!==null&&Cp(y,S)&&(o.flags|=32),o.memoizedState!==null&&(y=Ed(i,o,PR,null,null,c),Ho._currentValue=y),Vc(i,o),an(i,o,d,c),o.child;case 6:return i===null&&Ye&&((i=c=yt)&&(c=k2(c,o.pendingProps,ur),c!==null?(o.stateNode=c,rn=o,yt=null,i=!0):i=!1),i||ws(o)),null;case 13:return Zb(i,o,c);case 4:return Me(o,o.stateNode.containerInfo),d=o.pendingProps,i===null?o.child=mi(o,null,d,c):an(i,o,d,c),o.child;case 11:return Bb(i,o,o.type,o.pendingProps,c);case 7:return an(i,o,o.pendingProps,c),o.child;case 8:return an(i,o,o.pendingProps.children,c),o.child;case 12:return an(i,o,o.pendingProps.children,c),o.child;case 10:return d=o.pendingProps,Ss(o,o.type,d.value),an(i,o,d.children,c),o.child;case 9:return y=o.type._context,d=o.pendingProps.children,fi(o),y=sn(y),d=d(y),o.flags|=1,an(i,o,d,c),o.child;case 14:return Ub(i,o,o.type,o.pendingProps,c);case 15:return $b(i,o,o.type,o.pendingProps,c);case 19:return Jb(i,o,c);case 31:return GR(i,o,c);case 22:return qb(i,o,c,o.pendingProps);case 24:return fi(o),d=sn(Ot),i===null?(y=md(),y===null&&(y=pt,b=dd(),y.pooledCache=b,b.refCount++,b!==null&&(y.pooledCacheLanes|=c),y=b),o.memoizedState={parent:d,cache:y},yd(o),Ss(o,Ot,y)):((i.lanes&c)!==0&&(_d(i,o),Eo(o,null,null,c),ko()),y=i.memoizedState,b=o.memoizedState,y.parent!==d?(y={parent:d,cache:d},o.memoizedState=y,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=y),Ss(o,Ot,d)):(d=b.cache,Ss(o,Ot,d),d!==y.cache&&hd(o,[Ot],c,!0))),an(i,o,o.pendingProps.children,c),o.child;case 29:throw o.pendingProps}throw Error(r(156,o.tag))}function rs(i){i.flags|=4}function Wd(i,o,c,d,y){if((o=(i.mode&32)!==0)&&(o=!1),o){if(i.flags|=16777216,(y&335544128)===y)if(i.stateNode.complete)i.flags|=8192;else if(kv())i.flags|=8192;else throw pi=Rc,gd}else i.flags&=-16777217}function Xb(i,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!dx(o))if(kv())i.flags|=8192;else throw pi=Rc,gd}function Gc(i,o){o!==null&&(i.flags|=4),i.flags&16384&&(o=i.tag!==22?I0():536870912,i.lanes|=o,pa|=o)}function Io(i,o){if(!Ye)switch(i.tailMode){case"hidden":o=i.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?i.tail=null:c.sibling=null;break;case"collapsed":c=i.tail;for(var d=null;c!==null;)c.alternate!==null&&(d=c),c=c.sibling;d===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:d.sibling=null}}function _t(i){var o=i.alternate!==null&&i.alternate.child===i.child,c=0,d=0;if(o)for(var y=i.child;y!==null;)c|=y.lanes|y.childLanes,d|=y.subtreeFlags&65011712,d|=y.flags&65011712,y.return=i,y=y.sibling;else for(y=i.child;y!==null;)c|=y.lanes|y.childLanes,d|=y.subtreeFlags,d|=y.flags,y.return=i,y=y.sibling;return i.subtreeFlags|=d,i.childLanes=c,o}function ZR(i,o,c){var d=o.pendingProps;switch(od(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _t(o),null;case 1:return _t(o),null;case 3:return c=o.stateNode,d=null,i!==null&&(d=i.memoizedState.cache),o.memoizedState.cache!==d&&(o.flags|=2048),Wr(Ot),Ae(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(i===null||i.child===null)&&(ta(o)?rs(o):i===null||i.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,cd())),_t(o),null;case 26:var y=o.type,b=o.memoizedState;return i===null?(rs(o),b!==null?(_t(o),Xb(o,b)):(_t(o),Wd(o,y,null,d,c))):b?b!==i.memoizedState?(rs(o),_t(o),Xb(o,b)):(_t(o),o.flags&=-16777217):(i=i.memoizedProps,i!==d&&rs(o),_t(o),Wd(o,y,i,d,c)),null;case 27:if(ht(o),c=de.current,y=o.type,i!==null&&o.stateNode!=null)i.memoizedProps!==d&&rs(o);else{if(!d){if(o.stateNode===null)throw Error(r(166));return _t(o),null}i=ie.current,ta(o)?I_(o):(i=ix(y,d,c),o.stateNode=i,rs(o))}return _t(o),null;case 5:if(ht(o),y=o.type,i!==null&&o.stateNode!=null)i.memoizedProps!==d&&rs(o);else{if(!d){if(o.stateNode===null)throw Error(r(166));return _t(o),null}if(b=ie.current,ta(o))I_(o);else{var S=ou(de.current);switch(b){case 1:b=S.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:b=S.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":b=S.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":b=S.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":b=S.createElement("div"),b.innerHTML="<script><\/script>",b=b.removeChild(b.firstChild);break;case"select":b=typeof d.is=="string"?S.createElement("select",{is:d.is}):S.createElement("select"),d.multiple?b.multiple=!0:d.size&&(b.size=d.size);break;default:b=typeof d.is=="string"?S.createElement(y,{is:d.is}):S.createElement(y)}}b[nn]=o,b[In]=d;e:for(S=o.child;S!==null;){if(S.tag===5||S.tag===6)b.appendChild(S.stateNode);else if(S.tag!==4&&S.tag!==27&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===o)break e;for(;S.sibling===null;){if(S.return===null||S.return===o)break e;S=S.return}S.sibling.return=S.return,S=S.sibling}o.stateNode=b;e:switch(on(b,y,d),y){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}d&&rs(o)}}return _t(o),Wd(o,o.type,i===null?null:i.memoizedProps,o.pendingProps,c),null;case 6:if(i&&o.stateNode!=null)i.memoizedProps!==d&&rs(o);else{if(typeof d!="string"&&o.stateNode===null)throw Error(r(166));if(i=de.current,ta(o)){if(i=o.stateNode,c=o.memoizedProps,d=null,y=rn,y!==null)switch(y.tag){case 27:case 5:d=y.memoizedProps}i[nn]=o,i=!!(i.nodeValue===c||d!==null&&d.suppressHydrationWarning===!0||Zv(i.nodeValue,c)),i||ws(o,!0)}else i=ou(i).createTextNode(d),i[nn]=o,o.stateNode=i}return _t(o),null;case 31:if(c=o.memoizedState,i===null||i.memoizedState!==null){if(d=ta(o),c!==null){if(i===null){if(!d)throw Error(r(318));if(i=o.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(557));i[nn]=o}else ci(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;_t(o),i=!1}else c=cd(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=c),i=!0;if(!i)return o.flags&256?(Gn(o),o):(Gn(o),null);if((o.flags&128)!==0)throw Error(r(558))}return _t(o),null;case 13:if(d=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(y=ta(o),d!==null&&d.dehydrated!==null){if(i===null){if(!y)throw Error(r(318));if(y=o.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(r(317));y[nn]=o}else ci(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;_t(o),y=!1}else y=cd(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=y),y=!0;if(!y)return o.flags&256?(Gn(o),o):(Gn(o),null)}return Gn(o),(o.flags&128)!==0?(o.lanes=c,o):(c=d!==null,i=i!==null&&i.memoizedState!==null,c&&(d=o.child,y=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(y=d.alternate.memoizedState.cachePool.pool),b=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(b=d.memoizedState.cachePool.pool),b!==y&&(d.flags|=2048)),c!==i&&c&&(o.child.flags|=8192),Gc(o,o.updateQueue),_t(o),null);case 4:return Ae(),i===null&&xp(o.stateNode.containerInfo),_t(o),null;case 10:return Wr(o.type),_t(o),null;case 19:if(F(Ct),d=o.memoizedState,d===null)return _t(o),null;if(y=(o.flags&128)!==0,b=d.rendering,b===null)if(y)Io(d,!1);else{if(Et!==0||i!==null&&(i.flags&128)!==0)for(i=o.child;i!==null;){if(b=Mc(i),b!==null){for(o.flags|=128,Io(d,!1),i=b.updateQueue,o.updateQueue=i,Gc(o,i),o.subtreeFlags=0,i=c,c=o.child;c!==null;)C_(c,i),c=c.sibling;return O(Ct,Ct.current&1|2),Ye&&Yr(o,d.treeForkCount),o.child}i=i.sibling}d.tail!==null&&be()>Yc&&(o.flags|=128,y=!0,Io(d,!1),o.lanes=4194304)}else{if(!y)if(i=Mc(b),i!==null){if(o.flags|=128,y=!0,i=i.updateQueue,o.updateQueue=i,Gc(o,i),Io(d,!0),d.tail===null&&d.tailMode==="hidden"&&!b.alternate&&!Ye)return _t(o),null}else 2*be()-d.renderingStartTime>Yc&&c!==536870912&&(o.flags|=128,y=!0,Io(d,!1),o.lanes=4194304);d.isBackwards?(b.sibling=o.child,o.child=b):(i=d.last,i!==null?i.sibling=b:o.child=b,d.last=b)}return d.tail!==null?(i=d.tail,d.rendering=i,d.tail=i.sibling,d.renderingStartTime=be(),i.sibling=null,c=Ct.current,O(Ct,y?c&1|2:c&1),Ye&&Yr(o,d.treeForkCount),i):(_t(o),null);case 22:case 23:return Gn(o),wd(),d=o.memoizedState!==null,i!==null?i.memoizedState!==null!==d&&(o.flags|=8192):d&&(o.flags|=8192),d?(c&536870912)!==0&&(o.flags&128)===0&&(_t(o),o.subtreeFlags&6&&(o.flags|=8192)):_t(o),c=o.updateQueue,c!==null&&Gc(o,c.retryQueue),c=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),d=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(d=o.memoizedState.cachePool.pool),d!==c&&(o.flags|=2048),i!==null&&F(hi),null;case 24:return c=null,i!==null&&(c=i.memoizedState.cache),o.memoizedState.cache!==c&&(o.flags|=2048),Wr(Ot),_t(o),null;case 25:return null;case 30:return null}throw Error(r(156,o.tag))}function QR(i,o){switch(od(o),o.tag){case 1:return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return Wr(Ot),Ae(),i=o.flags,(i&65536)!==0&&(i&128)===0?(o.flags=i&-65537|128,o):null;case 26:case 27:case 5:return ht(o),null;case 31:if(o.memoizedState!==null){if(Gn(o),o.alternate===null)throw Error(r(340));ci()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 13:if(Gn(o),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(r(340));ci()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return F(Ct),null;case 4:return Ae(),null;case 10:return Wr(o.type),null;case 22:case 23:return Gn(o),wd(),i!==null&&F(hi),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 24:return Wr(Ot),null;case 25:return null;default:return null}}function Wb(i,o){switch(od(o),o.tag){case 3:Wr(Ot),Ae();break;case 26:case 27:case 5:ht(o);break;case 4:Ae();break;case 31:o.memoizedState!==null&&Gn(o);break;case 13:Gn(o);break;case 19:F(Ct);break;case 10:Wr(o.type);break;case 22:case 23:Gn(o),wd(),i!==null&&F(hi);break;case 24:Wr(Ot)}}function No(i,o){try{var c=o.updateQueue,d=c!==null?c.lastEffect:null;if(d!==null){var y=d.next;c=y;do{if((c.tag&i)===i){d=void 0;var b=c.create,S=c.inst;d=b(),S.destroy=d}c=c.next}while(c!==y)}}catch(A){ot(o,o.return,A)}}function Rs(i,o,c){try{var d=o.updateQueue,y=d!==null?d.lastEffect:null;if(y!==null){var b=y.next;d=b;do{if((d.tag&i)===i){var S=d.inst,A=S.destroy;if(A!==void 0){S.destroy=void 0,y=o;var $=c,X=A;try{X()}catch(ae){ot(y,$,ae)}}}d=d.next}while(d!==b)}}catch(ae){ot(o,o.return,ae)}}function ev(i){var o=i.updateQueue;if(o!==null){var c=i.stateNode;try{V_(o,c)}catch(d){ot(i,i.return,d)}}}function tv(i,o,c){c.props=yi(i.type,i.memoizedProps),c.state=i.memoizedState;try{c.componentWillUnmount()}catch(d){ot(i,o,d)}}function Mo(i,o){try{var c=i.ref;if(c!==null){switch(i.tag){case 26:case 27:case 5:var d=i.stateNode;break;case 30:d=i.stateNode;break;default:d=i.stateNode}typeof c=="function"?i.refCleanup=c(d):c.current=d}}catch(y){ot(i,o,y)}}function Nr(i,o){var c=i.ref,d=i.refCleanup;if(c!==null)if(typeof d=="function")try{d()}catch(y){ot(i,o,y)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(y){ot(i,o,y)}else c.current=null}function nv(i){var o=i.type,c=i.memoizedProps,d=i.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":c.autoFocus&&d.focus();break e;case"img":c.src?d.src=c.src:c.srcSet&&(d.srcset=c.srcSet)}}catch(y){ot(i,i.return,y)}}function ep(i,o,c){try{var d=i.stateNode;y2(d,i.type,c,o),d[In]=o}catch(y){ot(i,i.return,y)}}function rv(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&zs(i.type)||i.tag===4}function tp(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||rv(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&zs(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function np(i,o,c){var d=i.tag;if(d===5||d===6)i=i.stateNode,o?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(i,o):(o=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,o.appendChild(i),c=c._reactRootContainer,c!=null||o.onclick!==null||(o.onclick=Zr));else if(d!==4&&(d===27&&zs(i.type)&&(c=i.stateNode,o=null),i=i.child,i!==null))for(np(i,o,c),i=i.sibling;i!==null;)np(i,o,c),i=i.sibling}function Kc(i,o,c){var d=i.tag;if(d===5||d===6)i=i.stateNode,o?c.insertBefore(i,o):c.appendChild(i);else if(d!==4&&(d===27&&zs(i.type)&&(c=i.stateNode),i=i.child,i!==null))for(Kc(i,o,c),i=i.sibling;i!==null;)Kc(i,o,c),i=i.sibling}function sv(i){var o=i.stateNode,c=i.memoizedProps;try{for(var d=i.type,y=o.attributes;y.length;)o.removeAttributeNode(y[0]);on(o,d,c),o[nn]=i,o[In]=c}catch(b){ot(i,i.return,b)}}var ss=!1,Mt=!1,rp=!1,iv=typeof WeakSet=="function"?WeakSet:Set,Jt=null;function JR(i,o){if(i=i.containerInfo,kp=pu,i=y_(i),Jh(i)){if("selectionStart"in i)var c={start:i.selectionStart,end:i.selectionEnd};else e:{c=(c=i.ownerDocument)&&c.defaultView||window;var d=c.getSelection&&c.getSelection();if(d&&d.rangeCount!==0){c=d.anchorNode;var y=d.anchorOffset,b=d.focusNode;d=d.focusOffset;try{c.nodeType,b.nodeType}catch{c=null;break e}var S=0,A=-1,$=-1,X=0,ae=0,ce=i,ee=null;t:for(;;){for(var se;ce!==c||y!==0&&ce.nodeType!==3||(A=S+y),ce!==b||d!==0&&ce.nodeType!==3||($=S+d),ce.nodeType===3&&(S+=ce.nodeValue.length),(se=ce.firstChild)!==null;)ee=ce,ce=se;for(;;){if(ce===i)break t;if(ee===c&&++X===y&&(A=S),ee===b&&++ae===d&&($=S),(se=ce.nextSibling)!==null)break;ce=ee,ee=ce.parentNode}ce=se}c=A===-1||$===-1?null:{start:A,end:$}}else c=null}c=c||{start:0,end:0}}else c=null;for(Ep={focusedElem:i,selectionRange:c},pu=!1,Jt=o;Jt!==null;)if(o=Jt,i=o.child,(o.subtreeFlags&1028)!==0&&i!==null)i.return=o,Jt=i;else for(;Jt!==null;){switch(o=Jt,b=o.alternate,i=o.flags,o.tag){case 0:if((i&4)!==0&&(i=o.updateQueue,i=i!==null?i.events:null,i!==null))for(c=0;c<i.length;c++)y=i[c],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&b!==null){i=void 0,c=o,y=b.memoizedProps,b=b.memoizedState,d=c.stateNode;try{var ve=yi(c.type,y);i=d.getSnapshotBeforeUpdate(ve,b),d.__reactInternalSnapshotBeforeUpdate=i}catch(Oe){ot(c,c.return,Oe)}}break;case 3:if((i&1024)!==0){if(i=o.stateNode.containerInfo,c=i.nodeType,c===9)Ap(i);else if(c===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":Ap(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(r(163))}if(i=o.sibling,i!==null){i.return=o.return,Jt=i;break}Jt=o.return}}function av(i,o,c){var d=c.flags;switch(c.tag){case 0:case 11:case 15:as(i,c),d&4&&No(5,c);break;case 1:if(as(i,c),d&4)if(i=c.stateNode,o===null)try{i.componentDidMount()}catch(S){ot(c,c.return,S)}else{var y=yi(c.type,o.memoizedProps);o=o.memoizedState;try{i.componentDidUpdate(y,o,i.__reactInternalSnapshotBeforeUpdate)}catch(S){ot(c,c.return,S)}}d&64&&ev(c),d&512&&Mo(c,c.return);break;case 3:if(as(i,c),d&64&&(i=c.updateQueue,i!==null)){if(o=null,c.child!==null)switch(c.child.tag){case 27:case 5:o=c.child.stateNode;break;case 1:o=c.child.stateNode}try{V_(i,o)}catch(S){ot(c,c.return,S)}}break;case 27:o===null&&d&4&&sv(c);case 26:case 5:as(i,c),o===null&&d&4&&nv(c),d&512&&Mo(c,c.return);break;case 12:as(i,c);break;case 31:as(i,c),d&4&&cv(i,c);break;case 13:as(i,c),d&4&&uv(i,c),d&64&&(i=c.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(c=i2.bind(null,c),E2(i,c))));break;case 22:if(d=c.memoizedState!==null||ss,!d){o=o!==null&&o.memoizedState!==null||Mt,y=ss;var b=Mt;ss=d,(Mt=o)&&!b?os(i,c,(c.subtreeFlags&8772)!==0):as(i,c),ss=y,Mt=b}break;case 30:break;default:as(i,c)}}function ov(i){var o=i.alternate;o!==null&&(i.alternate=null,ov(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&Mh(o)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var vt=null,Mn=!1;function is(i,o,c){for(c=c.child;c!==null;)lv(i,o,c),c=c.sibling}function lv(i,o,c){if(Fe&&typeof Fe.onCommitFiberUnmount=="function")try{Fe.onCommitFiberUnmount(Bt,c)}catch{}switch(c.tag){case 26:Mt||Nr(c,o),is(i,o,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:Mt||Nr(c,o);var d=vt,y=Mn;zs(c.type)&&(vt=c.stateNode,Mn=!1),is(i,o,c),qo(c.stateNode),vt=d,Mn=y;break;case 5:Mt||Nr(c,o);case 6:if(d=vt,y=Mn,vt=null,is(i,o,c),vt=d,Mn=y,vt!==null)if(Mn)try{(vt.nodeType===9?vt.body:vt.nodeName==="HTML"?vt.ownerDocument.body:vt).removeChild(c.stateNode)}catch(b){ot(c,o,b)}else try{vt.removeChild(c.stateNode)}catch(b){ot(c,o,b)}break;case 18:vt!==null&&(Mn?(i=vt,ex(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,c.stateNode),wa(i)):ex(vt,c.stateNode));break;case 4:d=vt,y=Mn,vt=c.stateNode.containerInfo,Mn=!0,is(i,o,c),vt=d,Mn=y;break;case 0:case 11:case 14:case 15:Rs(2,c,o),Mt||Rs(4,c,o),is(i,o,c);break;case 1:Mt||(Nr(c,o),d=c.stateNode,typeof d.componentWillUnmount=="function"&&tv(c,o,d)),is(i,o,c);break;case 21:is(i,o,c);break;case 22:Mt=(d=Mt)||c.memoizedState!==null,is(i,o,c),Mt=d;break;default:is(i,o,c)}}function cv(i,o){if(o.memoizedState===null&&(i=o.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{wa(i)}catch(c){ot(o,o.return,c)}}}function uv(i,o){if(o.memoizedState===null&&(i=o.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{wa(i)}catch(c){ot(o,o.return,c)}}function YR(i){switch(i.tag){case 31:case 13:case 19:var o=i.stateNode;return o===null&&(o=i.stateNode=new iv),o;case 22:return i=i.stateNode,o=i._retryCache,o===null&&(o=i._retryCache=new iv),o;default:throw Error(r(435,i.tag))}}function Zc(i,o){var c=YR(i);o.forEach(function(d){if(!c.has(d)){c.add(d);var y=a2.bind(null,i,d);d.then(y,y)}})}function Dn(i,o){var c=o.deletions;if(c!==null)for(var d=0;d<c.length;d++){var y=c[d],b=i,S=o,A=S;e:for(;A!==null;){switch(A.tag){case 27:if(zs(A.type)){vt=A.stateNode,Mn=!1;break e}break;case 5:vt=A.stateNode,Mn=!1;break e;case 3:case 4:vt=A.stateNode.containerInfo,Mn=!0;break e}A=A.return}if(vt===null)throw Error(r(160));lv(b,S,y),vt=null,Mn=!1,b=y.alternate,b!==null&&(b.return=null),y.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)fv(o,i),o=o.sibling}var kr=null;function fv(i,o){var c=i.alternate,d=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:Dn(o,i),Ln(i),d&4&&(Rs(3,i,i.return),No(3,i),Rs(5,i,i.return));break;case 1:Dn(o,i),Ln(i),d&512&&(Mt||c===null||Nr(c,c.return)),d&64&&ss&&(i=i.updateQueue,i!==null&&(d=i.callbacks,d!==null&&(c=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=c===null?d:c.concat(d))));break;case 26:var y=kr;if(Dn(o,i),Ln(i),d&512&&(Mt||c===null||Nr(c,c.return)),d&4){var b=c!==null?c.memoizedState:null;if(d=i.memoizedState,c===null)if(d===null)if(i.stateNode===null){e:{d=i.type,c=i.memoizedProps,y=y.ownerDocument||y;t:switch(d){case"title":b=y.getElementsByTagName("title")[0],(!b||b[io]||b[nn]||b.namespaceURI==="http://www.w3.org/2000/svg"||b.hasAttribute("itemprop"))&&(b=y.createElement(d),y.head.insertBefore(b,y.querySelector("head > title"))),on(b,d,c),b[nn]=i,Qt(b),d=b;break e;case"link":var S=fx("link","href",y).get(d+(c.href||""));if(S){for(var A=0;A<S.length;A++)if(b=S[A],b.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&b.getAttribute("rel")===(c.rel==null?null:c.rel)&&b.getAttribute("title")===(c.title==null?null:c.title)&&b.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){S.splice(A,1);break t}}b=y.createElement(d),on(b,d,c),y.head.appendChild(b);break;case"meta":if(S=fx("meta","content",y).get(d+(c.content||""))){for(A=0;A<S.length;A++)if(b=S[A],b.getAttribute("content")===(c.content==null?null:""+c.content)&&b.getAttribute("name")===(c.name==null?null:c.name)&&b.getAttribute("property")===(c.property==null?null:c.property)&&b.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&b.getAttribute("charset")===(c.charSet==null?null:c.charSet)){S.splice(A,1);break t}}b=y.createElement(d),on(b,d,c),y.head.appendChild(b);break;default:throw Error(r(468,d))}b[nn]=i,Qt(b),d=b}i.stateNode=d}else hx(y,i.type,i.stateNode);else i.stateNode=ux(y,d,i.memoizedProps);else b!==d?(b===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):b.count--,d===null?hx(y,i.type,i.stateNode):ux(y,d,i.memoizedProps)):d===null&&i.stateNode!==null&&ep(i,i.memoizedProps,c.memoizedProps)}break;case 27:Dn(o,i),Ln(i),d&512&&(Mt||c===null||Nr(c,c.return)),c!==null&&d&4&&ep(i,i.memoizedProps,c.memoizedProps);break;case 5:if(Dn(o,i),Ln(i),d&512&&(Mt||c===null||Nr(c,c.return)),i.flags&32){y=i.stateNode;try{Hi(y,"")}catch(ve){ot(i,i.return,ve)}}d&4&&i.stateNode!=null&&(y=i.memoizedProps,ep(i,y,c!==null?c.memoizedProps:y)),d&1024&&(rp=!0);break;case 6:if(Dn(o,i),Ln(i),d&4){if(i.stateNode===null)throw Error(r(162));d=i.memoizedProps,c=i.stateNode;try{c.nodeValue=d}catch(ve){ot(i,i.return,ve)}}break;case 3:if(uu=null,y=kr,kr=lu(o.containerInfo),Dn(o,i),kr=y,Ln(i),d&4&&c!==null&&c.memoizedState.isDehydrated)try{wa(o.containerInfo)}catch(ve){ot(i,i.return,ve)}rp&&(rp=!1,hv(i));break;case 4:d=kr,kr=lu(i.stateNode.containerInfo),Dn(o,i),Ln(i),kr=d;break;case 12:Dn(o,i),Ln(i);break;case 31:Dn(o,i),Ln(i),d&4&&(d=i.updateQueue,d!==null&&(i.updateQueue=null,Zc(i,d)));break;case 13:Dn(o,i),Ln(i),i.child.flags&8192&&i.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(Jc=be()),d&4&&(d=i.updateQueue,d!==null&&(i.updateQueue=null,Zc(i,d)));break;case 22:y=i.memoizedState!==null;var $=c!==null&&c.memoizedState!==null,X=ss,ae=Mt;if(ss=X||y,Mt=ae||$,Dn(o,i),Mt=ae,ss=X,Ln(i),d&8192)e:for(o=i.stateNode,o._visibility=y?o._visibility&-2:o._visibility|1,y&&(c===null||$||ss||Mt||_i(i)),c=null,o=i;;){if(o.tag===5||o.tag===26){if(c===null){$=c=o;try{if(b=$.stateNode,y)S=b.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none";else{A=$.stateNode;var ce=$.memoizedProps.style,ee=ce!=null&&ce.hasOwnProperty("display")?ce.display:null;A.style.display=ee==null||typeof ee=="boolean"?"":(""+ee).trim()}}catch(ve){ot($,$.return,ve)}}}else if(o.tag===6){if(c===null){$=o;try{$.stateNode.nodeValue=y?"":$.memoizedProps}catch(ve){ot($,$.return,ve)}}}else if(o.tag===18){if(c===null){$=o;try{var se=$.stateNode;y?tx(se,!0):tx($.stateNode,!1)}catch(ve){ot($,$.return,ve)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===i)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break e;for(;o.sibling===null;){if(o.return===null||o.return===i)break e;c===o&&(c=null),o=o.return}c===o&&(c=null),o.sibling.return=o.return,o=o.sibling}d&4&&(d=i.updateQueue,d!==null&&(c=d.retryQueue,c!==null&&(d.retryQueue=null,Zc(i,c))));break;case 19:Dn(o,i),Ln(i),d&4&&(d=i.updateQueue,d!==null&&(i.updateQueue=null,Zc(i,d)));break;case 30:break;case 21:break;default:Dn(o,i),Ln(i)}}function Ln(i){var o=i.flags;if(o&2){try{for(var c,d=i.return;d!==null;){if(rv(d)){c=d;break}d=d.return}if(c==null)throw Error(r(160));switch(c.tag){case 27:var y=c.stateNode,b=tp(i);Kc(i,b,y);break;case 5:var S=c.stateNode;c.flags&32&&(Hi(S,""),c.flags&=-33);var A=tp(i);Kc(i,A,S);break;case 3:case 4:var $=c.stateNode.containerInfo,X=tp(i);np(i,X,$);break;default:throw Error(r(161))}}catch(ae){ot(i,i.return,ae)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function hv(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var o=i;hv(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),i=i.sibling}}function as(i,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)av(i,o.alternate,o),o=o.sibling}function _i(i){for(i=i.child;i!==null;){var o=i;switch(o.tag){case 0:case 11:case 14:case 15:Rs(4,o,o.return),_i(o);break;case 1:Nr(o,o.return);var c=o.stateNode;typeof c.componentWillUnmount=="function"&&tv(o,o.return,c),_i(o);break;case 27:qo(o.stateNode);case 26:case 5:Nr(o,o.return),_i(o);break;case 22:o.memoizedState===null&&_i(o);break;case 30:_i(o);break;default:_i(o)}i=i.sibling}}function os(i,o,c){for(c=c&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var d=o.alternate,y=i,b=o,S=b.flags;switch(b.tag){case 0:case 11:case 15:os(y,b,c),No(4,b);break;case 1:if(os(y,b,c),d=b,y=d.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(X){ot(d,d.return,X)}if(d=b,y=d.updateQueue,y!==null){var A=d.stateNode;try{var $=y.shared.hiddenCallbacks;if($!==null)for(y.shared.hiddenCallbacks=null,y=0;y<$.length;y++)F_($[y],A)}catch(X){ot(d,d.return,X)}}c&&S&64&&ev(b),Mo(b,b.return);break;case 27:sv(b);case 26:case 5:os(y,b,c),c&&d===null&&S&4&&nv(b),Mo(b,b.return);break;case 12:os(y,b,c);break;case 31:os(y,b,c),c&&S&4&&cv(y,b);break;case 13:os(y,b,c),c&&S&4&&uv(y,b);break;case 22:b.memoizedState===null&&os(y,b,c),Mo(b,b.return);break;case 30:break;default:os(y,b,c)}o=o.sibling}}function sp(i,o){var c=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),i=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(i=o.memoizedState.cachePool.pool),i!==c&&(i!=null&&i.refCount++,c!=null&&bo(c))}function ip(i,o){i=null,o.alternate!==null&&(i=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==i&&(o.refCount++,i!=null&&bo(i))}function Er(i,o,c,d){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)dv(i,o,c,d),o=o.sibling}function dv(i,o,c,d){var y=o.flags;switch(o.tag){case 0:case 11:case 15:Er(i,o,c,d),y&2048&&No(9,o);break;case 1:Er(i,o,c,d);break;case 3:Er(i,o,c,d),y&2048&&(i=null,o.alternate!==null&&(i=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==i&&(o.refCount++,i!=null&&bo(i)));break;case 12:if(y&2048){Er(i,o,c,d),i=o.stateNode;try{var b=o.memoizedProps,S=b.id,A=b.onPostCommit;typeof A=="function"&&A(S,o.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch($){ot(o,o.return,$)}}else Er(i,o,c,d);break;case 31:Er(i,o,c,d);break;case 13:Er(i,o,c,d);break;case 23:break;case 22:b=o.stateNode,S=o.alternate,o.memoizedState!==null?b._visibility&2?Er(i,o,c,d):Do(i,o):b._visibility&2?Er(i,o,c,d):(b._visibility|=2,fa(i,o,c,d,(o.subtreeFlags&10256)!==0||!1)),y&2048&&sp(S,o);break;case 24:Er(i,o,c,d),y&2048&&ip(o.alternate,o);break;default:Er(i,o,c,d)}}function fa(i,o,c,d,y){for(y=y&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var b=i,S=o,A=c,$=d,X=S.flags;switch(S.tag){case 0:case 11:case 15:fa(b,S,A,$,y),No(8,S);break;case 23:break;case 22:var ae=S.stateNode;S.memoizedState!==null?ae._visibility&2?fa(b,S,A,$,y):Do(b,S):(ae._visibility|=2,fa(b,S,A,$,y)),y&&X&2048&&sp(S.alternate,S);break;case 24:fa(b,S,A,$,y),y&&X&2048&&ip(S.alternate,S);break;default:fa(b,S,A,$,y)}o=o.sibling}}function Do(i,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var c=i,d=o,y=d.flags;switch(d.tag){case 22:Do(c,d),y&2048&&sp(d.alternate,d);break;case 24:Do(c,d),y&2048&&ip(d.alternate,d);break;default:Do(c,d)}o=o.sibling}}var Lo=8192;function ha(i,o,c){if(i.subtreeFlags&Lo)for(i=i.child;i!==null;)pv(i,o,c),i=i.sibling}function pv(i,o,c){switch(i.tag){case 26:ha(i,o,c),i.flags&Lo&&i.memoizedState!==null&&j2(c,kr,i.memoizedState,i.memoizedProps);break;case 5:ha(i,o,c);break;case 3:case 4:var d=kr;kr=lu(i.stateNode.containerInfo),ha(i,o,c),kr=d;break;case 22:i.memoizedState===null&&(d=i.alternate,d!==null&&d.memoizedState!==null?(d=Lo,Lo=16777216,ha(i,o,c),Lo=d):ha(i,o,c));break;default:ha(i,o,c)}}function mv(i){var o=i.alternate;if(o!==null&&(i=o.child,i!==null)){o.child=null;do o=i.sibling,i.sibling=null,i=o;while(i!==null)}}function zo(i){var o=i.deletions;if((i.flags&16)!==0){if(o!==null)for(var c=0;c<o.length;c++){var d=o[c];Jt=d,yv(d,i)}mv(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)gv(i),i=i.sibling}function gv(i){switch(i.tag){case 0:case 11:case 15:zo(i),i.flags&2048&&Rs(9,i,i.return);break;case 3:zo(i);break;case 12:zo(i);break;case 22:var o=i.stateNode;i.memoizedState!==null&&o._visibility&2&&(i.return===null||i.return.tag!==13)?(o._visibility&=-3,Qc(i)):zo(i);break;default:zo(i)}}function Qc(i){var o=i.deletions;if((i.flags&16)!==0){if(o!==null)for(var c=0;c<o.length;c++){var d=o[c];Jt=d,yv(d,i)}mv(i)}for(i=i.child;i!==null;){switch(o=i,o.tag){case 0:case 11:case 15:Rs(8,o,o.return),Qc(o);break;case 22:c=o.stateNode,c._visibility&2&&(c._visibility&=-3,Qc(o));break;default:Qc(o)}i=i.sibling}}function yv(i,o){for(;Jt!==null;){var c=Jt;switch(c.tag){case 0:case 11:case 15:Rs(8,c,o);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var d=c.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:bo(c.memoizedState.cache)}if(d=c.child,d!==null)d.return=c,Jt=d;else e:for(c=i;Jt!==null;){d=Jt;var y=d.sibling,b=d.return;if(ov(d),d===c){Jt=null;break e}if(y!==null){y.return=b,Jt=y;break e}Jt=b}}}var XR={getCacheForType:function(i){var o=sn(Ot),c=o.data.get(i);return c===void 0&&(c=i(),o.data.set(i,c)),c},cacheSignal:function(){return sn(Ot).controller.signal}},WR=typeof WeakMap=="function"?WeakMap:Map,st=0,pt=null,Ve=null,Ke=0,at=0,Kn=null,Os=!1,da=!1,ap=!1,ls=0,Et=0,Is=0,bi=0,op=0,Zn=0,pa=0,jo=null,zn=null,lp=!1,Jc=0,_v=0,Yc=1/0,Xc=null,Ns=null,Ut=0,Ms=null,ma=null,cs=0,cp=0,up=null,bv=null,Po=0,fp=null;function Qn(){return(st&2)!==0&&Ke!==0?Ke&-Ke:B.T!==null?yp():L0()}function vv(){if(Zn===0)if((Ke&536870912)===0||Ye){var i=ac;ac<<=1,(ac&3932160)===0&&(ac=262144),Zn=i}else Zn=536870912;return i=Hn.current,i!==null&&(i.flags|=32),Zn}function jn(i,o,c){(i===pt&&(at===2||at===9)||i.cancelPendingCommit!==null)&&(ga(i,0),Ds(i,Ke,Zn,!1)),so(i,c),((st&2)===0||i!==pt)&&(i===pt&&((st&2)===0&&(bi|=c),Et===4&&Ds(i,Ke,Zn,!1)),Mr(i))}function xv(i,o,c){if((st&6)!==0)throw Error(r(327));var d=!c&&(o&127)===0&&(o&i.expiredLanes)===0||ro(i,o),y=d?n2(i,o):dp(i,o,!0),b=d;do{if(y===0){da&&!d&&Ds(i,o,0,!1);break}else{if(c=i.current.alternate,b&&!e2(c)){y=dp(i,o,!1),b=!1;continue}if(y===2){if(b=o,i.errorRecoveryDisabledLanes&b)var S=0;else S=i.pendingLanes&-536870913,S=S!==0?S:S&536870912?536870912:0;if(S!==0){o=S;e:{var A=i;y=jo;var $=A.current.memoizedState.isDehydrated;if($&&(ga(A,S).flags|=256),S=dp(A,S,!1),S!==2){if(ap&&!$){A.errorRecoveryDisabledLanes|=b,bi|=b,y=4;break e}b=zn,zn=y,b!==null&&(zn===null?zn=b:zn.push.apply(zn,b))}y=S}if(b=!1,y!==2)continue}}if(y===1){ga(i,0),Ds(i,o,0,!0);break}e:{switch(d=i,b=y,b){case 0:case 1:throw Error(r(345));case 4:if((o&4194048)!==o)break;case 6:Ds(d,o,Zn,!Os);break e;case 2:zn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((o&62914560)===o&&(y=Jc+300-be(),10<y)){if(Ds(d,o,Zn,!Os),lc(d,0,!0)!==0)break e;cs=o,d.timeoutHandle=Xv(wv.bind(null,d,c,zn,Xc,lp,o,Zn,bi,pa,Os,b,"Throttled",-0,0),y);break e}wv(d,c,zn,Xc,lp,o,Zn,bi,pa,Os,b,null,-0,0)}}break}while(!0);Mr(i)}function wv(i,o,c,d,y,b,S,A,$,X,ae,ce,ee,se){if(i.timeoutHandle=-1,ce=o.subtreeFlags,ce&8192||(ce&16785408)===16785408){ce={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Zr},pv(o,b,ce);var ve=(b&62914560)===b?Jc-be():(b&4194048)===b?_v-be():0;if(ve=P2(ce,ve),ve!==null){cs=b,i.cancelPendingCommit=ve(Ov.bind(null,i,o,b,c,d,y,S,A,$,ae,ce,null,ee,se)),Ds(i,b,S,!X);return}}Ov(i,o,b,c,d,y,S,A,$)}function e2(i){for(var o=i;;){var c=o.tag;if((c===0||c===11||c===15)&&o.flags&16384&&(c=o.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var d=0;d<c.length;d++){var y=c[d],b=y.getSnapshot;y=y.value;try{if(!Fn(b(),y))return!1}catch{return!1}}if(c=o.child,o.subtreeFlags&16384&&c!==null)c.return=o,o=c;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Ds(i,o,c,d){o&=~op,o&=~bi,i.suspendedLanes|=o,i.pingedLanes&=~o,d&&(i.warmLanes|=o),d=i.expirationTimes;for(var y=o;0<y;){var b=31-dt(y),S=1<<b;d[b]=-1,y&=~S}c!==0&&N0(i,c,o)}function Wc(){return(st&6)===0?(Bo(0),!1):!0}function hp(){if(Ve!==null){if(at===0)var i=Ve.return;else i=Ve,Xr=ui=null,Ad(i),aa=null,xo=0,i=Ve;for(;i!==null;)Wb(i.alternate,i),i=i.return;Ve=null}}function ga(i,o){var c=i.timeoutHandle;c!==-1&&(i.timeoutHandle=-1,v2(c)),c=i.cancelPendingCommit,c!==null&&(i.cancelPendingCommit=null,c()),cs=0,hp(),pt=i,Ve=c=Jr(i.current,null),Ke=o,at=0,Kn=null,Os=!1,da=ro(i,o),ap=!1,pa=Zn=op=bi=Is=Et=0,zn=jo=null,lp=!1,(o&8)!==0&&(o|=o&32);var d=i.entangledLanes;if(d!==0)for(i=i.entanglements,d&=o;0<d;){var y=31-dt(d),b=1<<y;o|=i[y],d&=~b}return ls=o,vc(),c}function Sv(i,o){je=null,B.H=Ro,o===ia||o===Ac?(o=B_(),at=3):o===gd?(o=B_(),at=4):at=o===Vd?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,Kn=o,Ve===null&&(Et=1,qc(i,or(o,i.current)))}function kv(){var i=Hn.current;return i===null?!0:(Ke&4194048)===Ke?fr===null:(Ke&62914560)===Ke||(Ke&536870912)!==0?i===fr:!1}function Ev(){var i=B.H;return B.H=Ro,i===null?Ro:i}function Cv(){var i=B.A;return B.A=XR,i}function eu(){Et=4,Os||(Ke&4194048)!==Ke&&Hn.current!==null||(da=!0),(Is&134217727)===0&&(bi&134217727)===0||pt===null||Ds(pt,Ke,Zn,!1)}function dp(i,o,c){var d=st;st|=2;var y=Ev(),b=Cv();(pt!==i||Ke!==o)&&(Xc=null,ga(i,o)),o=!1;var S=Et;e:do try{if(at!==0&&Ve!==null){var A=Ve,$=Kn;switch(at){case 8:hp(),S=6;break e;case 3:case 2:case 9:case 6:Hn.current===null&&(o=!0);var X=at;if(at=0,Kn=null,ya(i,A,$,X),c&&da){S=0;break e}break;default:X=at,at=0,Kn=null,ya(i,A,$,X)}}t2(),S=Et;break}catch(ae){Sv(i,ae)}while(!0);return o&&i.shellSuspendCounter++,Xr=ui=null,st=d,B.H=y,B.A=b,Ve===null&&(pt=null,Ke=0,vc()),S}function t2(){for(;Ve!==null;)Tv(Ve)}function n2(i,o){var c=st;st|=2;var d=Ev(),y=Cv();pt!==i||Ke!==o?(Xc=null,Yc=be()+500,ga(i,o)):da=ro(i,o);e:do try{if(at!==0&&Ve!==null){o=Ve;var b=Kn;t:switch(at){case 1:at=0,Kn=null,ya(i,o,b,1);break;case 2:case 9:if(j_(b)){at=0,Kn=null,Av(o);break}o=function(){at!==2&&at!==9||pt!==i||(at=7),Mr(i)},b.then(o,o);break e;case 3:at=7;break e;case 4:at=5;break e;case 7:j_(b)?(at=0,Kn=null,Av(o)):(at=0,Kn=null,ya(i,o,b,7));break;case 5:var S=null;switch(Ve.tag){case 26:S=Ve.memoizedState;case 5:case 27:var A=Ve;if(S?dx(S):A.stateNode.complete){at=0,Kn=null;var $=A.sibling;if($!==null)Ve=$;else{var X=A.return;X!==null?(Ve=X,tu(X)):Ve=null}break t}}at=0,Kn=null,ya(i,o,b,5);break;case 6:at=0,Kn=null,ya(i,o,b,6);break;case 8:hp(),Et=6;break e;default:throw Error(r(462))}}r2();break}catch(ae){Sv(i,ae)}while(!0);return Xr=ui=null,B.H=d,B.A=y,st=c,Ve!==null?0:(pt=null,Ke=0,vc(),Et)}function r2(){for(;Ve!==null&&!Le();)Tv(Ve)}function Tv(i){var o=Yb(i.alternate,i,ls);i.memoizedProps=i.pendingProps,o===null?tu(i):Ve=o}function Av(i){var o=i,c=o.alternate;switch(o.tag){case 15:case 0:o=Hb(c,o,o.pendingProps,o.type,void 0,Ke);break;case 11:o=Hb(c,o,o.pendingProps,o.type.render,o.ref,Ke);break;case 5:Ad(o);default:Wb(c,o),o=Ve=C_(o,ls),o=Yb(c,o,ls)}i.memoizedProps=i.pendingProps,o===null?tu(i):Ve=o}function ya(i,o,c,d){Xr=ui=null,Ad(o),aa=null,xo=0;var y=o.return;try{if(HR(i,y,o,c,Ke)){Et=1,qc(i,or(c,i.current)),Ve=null;return}}catch(b){if(y!==null)throw Ve=y,b;Et=1,qc(i,or(c,i.current)),Ve=null;return}o.flags&32768?(Ye||d===1?i=!0:da||(Ke&536870912)!==0?i=!1:(Os=i=!0,(d===2||d===9||d===3||d===6)&&(d=Hn.current,d!==null&&d.tag===13&&(d.flags|=16384))),Rv(o,i)):tu(o)}function tu(i){var o=i;do{if((o.flags&32768)!==0){Rv(o,Os);return}i=o.return;var c=ZR(o.alternate,o,ls);if(c!==null){Ve=c;return}if(o=o.sibling,o!==null){Ve=o;return}Ve=o=i}while(o!==null);Et===0&&(Et=5)}function Rv(i,o){do{var c=QR(i.alternate,i);if(c!==null){c.flags&=32767,Ve=c;return}if(c=i.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!o&&(i=i.sibling,i!==null)){Ve=i;return}Ve=i=c}while(i!==null);Et=6,Ve=null}function Ov(i,o,c,d,y,b,S,A,$){i.cancelPendingCommit=null;do nu();while(Ut!==0);if((st&6)!==0)throw Error(r(327));if(o!==null){if(o===i.current)throw Error(r(177));if(b=o.lanes|o.childLanes,b|=td,zA(i,c,b,S,A,$),i===pt&&(Ve=pt=null,Ke=0),ma=o,Ms=i,cs=c,cp=b,up=y,bv=d,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,o2(ge,function(){return Lv(),null})):(i.callbackNode=null,i.callbackPriority=0),d=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||d){d=B.T,B.T=null,y=G.p,G.p=2,S=st,st|=4;try{JR(i,o,c)}finally{st=S,G.p=y,B.T=d}}Ut=1,Iv(),Nv(),Mv()}}function Iv(){if(Ut===1){Ut=0;var i=Ms,o=ma,c=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||c){c=B.T,B.T=null;var d=G.p;G.p=2;var y=st;st|=4;try{fv(o,i);var b=Ep,S=y_(i.containerInfo),A=b.focusedElem,$=b.selectionRange;if(S!==A&&A&&A.ownerDocument&&g_(A.ownerDocument.documentElement,A)){if($!==null&&Jh(A)){var X=$.start,ae=$.end;if(ae===void 0&&(ae=X),"selectionStart"in A)A.selectionStart=X,A.selectionEnd=Math.min(ae,A.value.length);else{var ce=A.ownerDocument||document,ee=ce&&ce.defaultView||window;if(ee.getSelection){var se=ee.getSelection(),ve=A.textContent.length,Oe=Math.min($.start,ve),ft=$.end===void 0?Oe:Math.min($.end,ve);!se.extend&&Oe>ft&&(S=ft,ft=Oe,Oe=S);var K=m_(A,Oe),q=m_(A,ft);if(K&&q&&(se.rangeCount!==1||se.anchorNode!==K.node||se.anchorOffset!==K.offset||se.focusNode!==q.node||se.focusOffset!==q.offset)){var Y=ce.createRange();Y.setStart(K.node,K.offset),se.removeAllRanges(),Oe>ft?(se.addRange(Y),se.extend(q.node,q.offset)):(Y.setEnd(q.node,q.offset),se.addRange(Y))}}}}for(ce=[],se=A;se=se.parentNode;)se.nodeType===1&&ce.push({element:se,left:se.scrollLeft,top:se.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<ce.length;A++){var le=ce[A];le.element.scrollLeft=le.left,le.element.scrollTop=le.top}}pu=!!kp,Ep=kp=null}finally{st=y,G.p=d,B.T=c}}i.current=o,Ut=2}}function Nv(){if(Ut===2){Ut=0;var i=Ms,o=ma,c=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||c){c=B.T,B.T=null;var d=G.p;G.p=2;var y=st;st|=4;try{av(i,o.alternate,o)}finally{st=y,G.p=d,B.T=c}}Ut=3}}function Mv(){if(Ut===4||Ut===3){Ut=0,qe();var i=Ms,o=ma,c=cs,d=bv;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?Ut=5:(Ut=0,ma=Ms=null,Dv(i,i.pendingLanes));var y=i.pendingLanes;if(y===0&&(Ns=null),Ih(c),o=o.stateNode,Fe&&typeof Fe.onCommitFiberRoot=="function")try{Fe.onCommitFiberRoot(Bt,o,void 0,(o.current.flags&128)===128)}catch{}if(d!==null){o=B.T,y=G.p,G.p=2,B.T=null;try{for(var b=i.onRecoverableError,S=0;S<d.length;S++){var A=d[S];b(A.value,{componentStack:A.stack})}}finally{B.T=o,G.p=y}}(cs&3)!==0&&nu(),Mr(i),y=i.pendingLanes,(c&261930)!==0&&(y&42)!==0?i===fp?Po++:(Po=0,fp=i):Po=0,Bo(0)}}function Dv(i,o){(i.pooledCacheLanes&=o)===0&&(o=i.pooledCache,o!=null&&(i.pooledCache=null,bo(o)))}function nu(){return Iv(),Nv(),Mv(),Lv()}function Lv(){if(Ut!==5)return!1;var i=Ms,o=cp;cp=0;var c=Ih(cs),d=B.T,y=G.p;try{G.p=32>c?32:c,B.T=null,c=up,up=null;var b=Ms,S=cs;if(Ut=0,ma=Ms=null,cs=0,(st&6)!==0)throw Error(r(331));var A=st;if(st|=4,gv(b.current),dv(b,b.current,S,c),st=A,Bo(0,!1),Fe&&typeof Fe.onPostCommitFiberRoot=="function")try{Fe.onPostCommitFiberRoot(Bt,b)}catch{}return!0}finally{G.p=y,B.T=d,Dv(i,o)}}function zv(i,o,c){o=or(c,o),o=Fd(i.stateNode,o,2),i=Cs(i,o,2),i!==null&&(so(i,2),Mr(i))}function ot(i,o,c){if(i.tag===3)zv(i,i,c);else for(;o!==null;){if(o.tag===3){zv(o,i,c);break}else if(o.tag===1){var d=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(Ns===null||!Ns.has(d))){i=or(c,i),c=jb(2),d=Cs(o,c,2),d!==null&&(Pb(c,d,o,i),so(d,2),Mr(d));break}}o=o.return}}function pp(i,o,c){var d=i.pingCache;if(d===null){d=i.pingCache=new WR;var y=new Set;d.set(o,y)}else y=d.get(o),y===void 0&&(y=new Set,d.set(o,y));y.has(c)||(ap=!0,y.add(c),i=s2.bind(null,i,o,c),o.then(i,i))}function s2(i,o,c){var d=i.pingCache;d!==null&&d.delete(o),i.pingedLanes|=i.suspendedLanes&c,i.warmLanes&=~c,pt===i&&(Ke&c)===c&&(Et===4||Et===3&&(Ke&62914560)===Ke&&300>be()-Jc?(st&2)===0&&ga(i,0):op|=c,pa===Ke&&(pa=0)),Mr(i)}function jv(i,o){o===0&&(o=I0()),i=oi(i,o),i!==null&&(so(i,o),Mr(i))}function i2(i){var o=i.memoizedState,c=0;o!==null&&(c=o.retryLane),jv(i,c)}function a2(i,o){var c=0;switch(i.tag){case 31:case 13:var d=i.stateNode,y=i.memoizedState;y!==null&&(c=y.retryLane);break;case 19:d=i.stateNode;break;case 22:d=i.stateNode._retryCache;break;default:throw Error(r(314))}d!==null&&d.delete(o),jv(i,c)}function o2(i,o){return wn(i,o)}var ru=null,_a=null,mp=!1,su=!1,gp=!1,Ls=0;function Mr(i){i!==_a&&i.next===null&&(_a===null?ru=_a=i:_a=_a.next=i),su=!0,mp||(mp=!0,c2())}function Bo(i,o){if(!gp&&su){gp=!0;do for(var c=!1,d=ru;d!==null;){if(i!==0){var y=d.pendingLanes;if(y===0)var b=0;else{var S=d.suspendedLanes,A=d.pingedLanes;b=(1<<31-dt(42|i)+1)-1,b&=y&~(S&~A),b=b&201326741?b&201326741|1:b?b|2:0}b!==0&&(c=!0,$v(d,b))}else b=Ke,b=lc(d,d===pt?b:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(b&3)===0||ro(d,b)||(c=!0,$v(d,b));d=d.next}while(c);gp=!1}}function l2(){Pv()}function Pv(){su=mp=!1;var i=0;Ls!==0&&b2()&&(i=Ls);for(var o=be(),c=null,d=ru;d!==null;){var y=d.next,b=Bv(d,o);b===0?(d.next=null,c===null?ru=y:c.next=y,y===null&&(_a=c)):(c=d,(i!==0||(b&3)!==0)&&(su=!0)),d=y}Ut!==0&&Ut!==5||Bo(i),Ls!==0&&(Ls=0)}function Bv(i,o){for(var c=i.suspendedLanes,d=i.pingedLanes,y=i.expirationTimes,b=i.pendingLanes&-62914561;0<b;){var S=31-dt(b),A=1<<S,$=y[S];$===-1?((A&c)===0||(A&d)!==0)&&(y[S]=LA(A,o)):$<=o&&(i.expiredLanes|=A),b&=~A}if(o=pt,c=Ke,c=lc(i,i===o?c:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),d=i.callbackNode,c===0||i===o&&(at===2||at===9)||i.cancelPendingCommit!==null)return d!==null&&d!==null&&_e(d),i.callbackNode=null,i.callbackPriority=0;if((c&3)===0||ro(i,c)){if(o=c&-c,o===i.callbackPriority)return o;switch(d!==null&&_e(d),Ih(c)){case 2:case 8:c=oe;break;case 32:c=ge;break;case 268435456:c=Ee;break;default:c=ge}return d=Uv.bind(null,i),c=wn(c,d),i.callbackPriority=o,i.callbackNode=c,o}return d!==null&&d!==null&&_e(d),i.callbackPriority=2,i.callbackNode=null,2}function Uv(i,o){if(Ut!==0&&Ut!==5)return i.callbackNode=null,i.callbackPriority=0,null;var c=i.callbackNode;if(nu()&&i.callbackNode!==c)return null;var d=Ke;return d=lc(i,i===pt?d:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),d===0?null:(xv(i,d,o),Bv(i,be()),i.callbackNode!=null&&i.callbackNode===c?Uv.bind(null,i):null)}function $v(i,o){if(nu())return null;xv(i,o,!0)}function c2(){x2(function(){(st&6)!==0?wn(te,l2):Pv()})}function yp(){if(Ls===0){var i=ra;i===0&&(i=ic,ic<<=1,(ic&261888)===0&&(ic=256)),Ls=i}return Ls}function qv(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:hc(""+i)}function Fv(i,o){var c=o.ownerDocument.createElement("input");return c.name=o.name,c.value=o.value,i.id&&c.setAttribute("form",i.id),o.parentNode.insertBefore(c,o),i=new FormData(i),c.parentNode.removeChild(c),i}function u2(i,o,c,d,y){if(o==="submit"&&c&&c.stateNode===y){var b=qv((y[In]||null).action),S=d.submitter;S&&(o=(o=S[In]||null)?qv(o.formAction):S.getAttribute("formAction"),o!==null&&(b=o,S=null));var A=new gc("action","action",null,d,y);i.push({event:A,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(Ls!==0){var $=S?Fv(y,S):new FormData(y);jd(c,{pending:!0,data:$,method:y.method,action:b},null,$)}}else typeof b=="function"&&(A.preventDefault(),$=S?Fv(y,S):new FormData(y),jd(c,{pending:!0,data:$,method:y.method,action:b},b,$))},currentTarget:y}]})}}for(var _p=0;_p<ed.length;_p++){var bp=ed[_p],f2=bp.toLowerCase(),h2=bp[0].toUpperCase()+bp.slice(1);Sr(f2,"on"+h2)}Sr(v_,"onAnimationEnd"),Sr(x_,"onAnimationIteration"),Sr(w_,"onAnimationStart"),Sr("dblclick","onDoubleClick"),Sr("focusin","onFocus"),Sr("focusout","onBlur"),Sr(AR,"onTransitionRun"),Sr(RR,"onTransitionStart"),Sr(OR,"onTransitionCancel"),Sr(S_,"onTransitionEnd"),Fi("onMouseEnter",["mouseout","mouseover"]),Fi("onMouseLeave",["mouseout","mouseover"]),Fi("onPointerEnter",["pointerout","pointerover"]),Fi("onPointerLeave",["pointerout","pointerover"]),ri("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ri("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ri("onBeforeInput",["compositionend","keypress","textInput","paste"]),ri("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ri("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ri("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Uo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),d2=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Uo));function Vv(i,o){o=(o&4)!==0;for(var c=0;c<i.length;c++){var d=i[c],y=d.event;d=d.listeners;e:{var b=void 0;if(o)for(var S=d.length-1;0<=S;S--){var A=d[S],$=A.instance,X=A.currentTarget;if(A=A.listener,$!==b&&y.isPropagationStopped())break e;b=A,y.currentTarget=X;try{b(y)}catch(ae){bc(ae)}y.currentTarget=null,b=$}else for(S=0;S<d.length;S++){if(A=d[S],$=A.instance,X=A.currentTarget,A=A.listener,$!==b&&y.isPropagationStopped())break e;b=A,y.currentTarget=X;try{b(y)}catch(ae){bc(ae)}y.currentTarget=null,b=$}}}}function He(i,o){var c=o[Nh];c===void 0&&(c=o[Nh]=new Set);var d=i+"__bubble";c.has(d)||(Hv(o,i,2,!1),c.add(d))}function vp(i,o,c){var d=0;o&&(d|=4),Hv(c,i,d,o)}var iu="_reactListening"+Math.random().toString(36).slice(2);function xp(i){if(!i[iu]){i[iu]=!0,P0.forEach(function(c){c!=="selectionchange"&&(d2.has(c)||vp(c,!1,i),vp(c,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[iu]||(o[iu]=!0,vp("selectionchange",!1,o))}}function Hv(i,o,c,d){switch(vx(o)){case 2:var y=$2;break;case 8:y=q2;break;default:y=zp}c=y.bind(null,o,c,i),y=void 0,!$h||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(y=!0),d?y!==void 0?i.addEventListener(o,c,{capture:!0,passive:y}):i.addEventListener(o,c,!0):y!==void 0?i.addEventListener(o,c,{passive:y}):i.addEventListener(o,c,!1)}function wp(i,o,c,d,y){var b=d;if((o&1)===0&&(o&2)===0&&d!==null)e:for(;;){if(d===null)return;var S=d.tag;if(S===3||S===4){var A=d.stateNode.containerInfo;if(A===y)break;if(S===4)for(S=d.return;S!==null;){var $=S.tag;if(($===3||$===4)&&S.stateNode.containerInfo===y)return;S=S.return}for(;A!==null;){if(S=Ui(A),S===null)return;if($=S.tag,$===5||$===6||$===26||$===27){d=b=S;continue e}A=A.parentNode}}d=d.return}J0(function(){var X=b,ae=Bh(c),ce=[];e:{var ee=k_.get(i);if(ee!==void 0){var se=gc,ve=i;switch(i){case"keypress":if(pc(c)===0)break e;case"keydown":case"keyup":se=aR;break;case"focusin":ve="focus",se=Hh;break;case"focusout":ve="blur",se=Hh;break;case"beforeblur":case"afterblur":se=Hh;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":se=W0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":se=ZA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":se=cR;break;case v_:case x_:case w_:se=YA;break;case S_:se=fR;break;case"scroll":case"scrollend":se=GA;break;case"wheel":se=dR;break;case"copy":case"cut":case"paste":se=WA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":se=t_;break;case"toggle":case"beforetoggle":se=mR}var Oe=(o&4)!==0,ft=!Oe&&(i==="scroll"||i==="scrollend"),K=Oe?ee!==null?ee+"Capture":null:ee;Oe=[];for(var q=X,Y;q!==null;){var le=q;if(Y=le.stateNode,le=le.tag,le!==5&&le!==26&&le!==27||Y===null||K===null||(le=oo(q,K),le!=null&&Oe.push($o(q,le,Y))),ft)break;q=q.return}0<Oe.length&&(ee=new se(ee,ve,null,c,ae),ce.push({event:ee,listeners:Oe}))}}if((o&7)===0){e:{if(ee=i==="mouseover"||i==="pointerover",se=i==="mouseout"||i==="pointerout",ee&&c!==Ph&&(ve=c.relatedTarget||c.fromElement)&&(Ui(ve)||ve[Bi]))break e;if((se||ee)&&(ee=ae.window===ae?ae:(ee=ae.ownerDocument)?ee.defaultView||ee.parentWindow:window,se?(ve=c.relatedTarget||c.toElement,se=X,ve=ve?Ui(ve):null,ve!==null&&(ft=a(ve),Oe=ve.tag,ve!==ft||Oe!==5&&Oe!==27&&Oe!==6)&&(ve=null)):(se=null,ve=X),se!==ve)){if(Oe=W0,le="onMouseLeave",K="onMouseEnter",q="mouse",(i==="pointerout"||i==="pointerover")&&(Oe=t_,le="onPointerLeave",K="onPointerEnter",q="pointer"),ft=se==null?ee:ao(se),Y=ve==null?ee:ao(ve),ee=new Oe(le,q+"leave",se,c,ae),ee.target=ft,ee.relatedTarget=Y,le=null,Ui(ae)===X&&(Oe=new Oe(K,q+"enter",ve,c,ae),Oe.target=Y,Oe.relatedTarget=ft,le=Oe),ft=le,se&&ve)t:{for(Oe=p2,K=se,q=ve,Y=0,le=K;le;le=Oe(le))Y++;le=0;for(var Ce=q;Ce;Ce=Oe(Ce))le++;for(;0<Y-le;)K=Oe(K),Y--;for(;0<le-Y;)q=Oe(q),le--;for(;Y--;){if(K===q||q!==null&&K===q.alternate){Oe=K;break t}K=Oe(K),q=Oe(q)}Oe=null}else Oe=null;se!==null&&Gv(ce,ee,se,Oe,!1),ve!==null&&ft!==null&&Gv(ce,ft,ve,Oe,!0)}}e:{if(ee=X?ao(X):window,se=ee.nodeName&&ee.nodeName.toLowerCase(),se==="select"||se==="input"&&ee.type==="file")var tt=c_;else if(o_(ee))if(u_)tt=ER;else{tt=SR;var Se=wR}else se=ee.nodeName,!se||se.toLowerCase()!=="input"||ee.type!=="checkbox"&&ee.type!=="radio"?X&&jh(X.elementType)&&(tt=c_):tt=kR;if(tt&&(tt=tt(i,X))){l_(ce,tt,c,ae);break e}Se&&Se(i,ee,X),i==="focusout"&&X&&ee.type==="number"&&X.memoizedProps.value!=null&&zh(ee,"number",ee.value)}switch(Se=X?ao(X):window,i){case"focusin":(o_(Se)||Se.contentEditable==="true")&&(Qi=Se,Yh=X,go=null);break;case"focusout":go=Yh=Qi=null;break;case"mousedown":Xh=!0;break;case"contextmenu":case"mouseup":case"dragend":Xh=!1,__(ce,c,ae);break;case"selectionchange":if(TR)break;case"keydown":case"keyup":__(ce,c,ae)}var Pe;if(Kh)e:{switch(i){case"compositionstart":var Ze="onCompositionStart";break e;case"compositionend":Ze="onCompositionEnd";break e;case"compositionupdate":Ze="onCompositionUpdate";break e}Ze=void 0}else Zi?i_(i,c)&&(Ze="onCompositionEnd"):i==="keydown"&&c.keyCode===229&&(Ze="onCompositionStart");Ze&&(n_&&c.locale!=="ko"&&(Zi||Ze!=="onCompositionStart"?Ze==="onCompositionEnd"&&Zi&&(Pe=Y0()):(bs=ae,qh="value"in bs?bs.value:bs.textContent,Zi=!0)),Se=au(X,Ze),0<Se.length&&(Ze=new e_(Ze,i,null,c,ae),ce.push({event:Ze,listeners:Se}),Pe?Ze.data=Pe:(Pe=a_(c),Pe!==null&&(Ze.data=Pe)))),(Pe=yR?_R(i,c):bR(i,c))&&(Ze=au(X,"onBeforeInput"),0<Ze.length&&(Se=new e_("onBeforeInput","beforeinput",null,c,ae),ce.push({event:Se,listeners:Ze}),Se.data=Pe)),u2(ce,i,X,c,ae)}Vv(ce,o)})}function $o(i,o,c){return{instance:i,listener:o,currentTarget:c}}function au(i,o){for(var c=o+"Capture",d=[];i!==null;){var y=i,b=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||b===null||(y=oo(i,c),y!=null&&d.unshift($o(i,y,b)),y=oo(i,o),y!=null&&d.push($o(i,y,b))),i.tag===3)return d;i=i.return}return[]}function p2(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function Gv(i,o,c,d,y){for(var b=o._reactName,S=[];c!==null&&c!==d;){var A=c,$=A.alternate,X=A.stateNode;if(A=A.tag,$!==null&&$===d)break;A!==5&&A!==26&&A!==27||X===null||($=X,y?(X=oo(c,b),X!=null&&S.unshift($o(c,X,$))):y||(X=oo(c,b),X!=null&&S.push($o(c,X,$)))),c=c.return}S.length!==0&&i.push({event:o,listeners:S})}var m2=/\r\n?/g,g2=/\u0000|\uFFFD/g;function Kv(i){return(typeof i=="string"?i:""+i).replace(m2,`
`).replace(g2,"")}function Zv(i,o){return o=Kv(o),Kv(i)===o}function ut(i,o,c,d,y,b){switch(c){case"children":typeof d=="string"?o==="body"||o==="textarea"&&d===""||Hi(i,d):(typeof d=="number"||typeof d=="bigint")&&o!=="body"&&Hi(i,""+d);break;case"className":uc(i,"class",d);break;case"tabIndex":uc(i,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":uc(i,c,d);break;case"style":Z0(i,d,b);break;case"data":if(o!=="object"){uc(i,"data",d);break}case"src":case"href":if(d===""&&(o!=="a"||c!=="href")){i.removeAttribute(c);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){i.removeAttribute(c);break}d=hc(""+d),i.setAttribute(c,d);break;case"action":case"formAction":if(typeof d=="function"){i.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof b=="function"&&(c==="formAction"?(o!=="input"&&ut(i,o,"name",y.name,y,null),ut(i,o,"formEncType",y.formEncType,y,null),ut(i,o,"formMethod",y.formMethod,y,null),ut(i,o,"formTarget",y.formTarget,y,null)):(ut(i,o,"encType",y.encType,y,null),ut(i,o,"method",y.method,y,null),ut(i,o,"target",y.target,y,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){i.removeAttribute(c);break}d=hc(""+d),i.setAttribute(c,d);break;case"onClick":d!=null&&(i.onclick=Zr);break;case"onScroll":d!=null&&He("scroll",i);break;case"onScrollEnd":d!=null&&He("scrollend",i);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(r(61));if(c=d.__html,c!=null){if(y.children!=null)throw Error(r(60));i.innerHTML=c}}break;case"multiple":i.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":i.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){i.removeAttribute("xlink:href");break}c=hc(""+d),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?i.setAttribute(c,""+d):i.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?i.setAttribute(c,""):i.removeAttribute(c);break;case"capture":case"download":d===!0?i.setAttribute(c,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?i.setAttribute(c,d):i.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?i.setAttribute(c,d):i.removeAttribute(c);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?i.removeAttribute(c):i.setAttribute(c,d);break;case"popover":He("beforetoggle",i),He("toggle",i),cc(i,"popover",d);break;case"xlinkActuate":Kr(i,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":Kr(i,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":Kr(i,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":Kr(i,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":Kr(i,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":Kr(i,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":Kr(i,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":Kr(i,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":Kr(i,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":cc(i,"is",d);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=VA.get(c)||c,cc(i,c,d))}}function Sp(i,o,c,d,y,b){switch(c){case"style":Z0(i,d,b);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(r(61));if(c=d.__html,c!=null){if(y.children!=null)throw Error(r(60));i.innerHTML=c}}break;case"children":typeof d=="string"?Hi(i,d):(typeof d=="number"||typeof d=="bigint")&&Hi(i,""+d);break;case"onScroll":d!=null&&He("scroll",i);break;case"onScrollEnd":d!=null&&He("scrollend",i);break;case"onClick":d!=null&&(i.onclick=Zr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!B0.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(y=c.endsWith("Capture"),o=c.slice(2,y?c.length-7:void 0),b=i[In]||null,b=b!=null?b[c]:null,typeof b=="function"&&i.removeEventListener(o,b,y),typeof d=="function")){typeof b!="function"&&b!==null&&(c in i?i[c]=null:i.hasAttribute(c)&&i.removeAttribute(c)),i.addEventListener(o,d,y);break e}c in i?i[c]=d:d===!0?i.setAttribute(c,""):cc(i,c,d)}}}function on(i,o,c){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":He("error",i),He("load",i);var d=!1,y=!1,b;for(b in c)if(c.hasOwnProperty(b)){var S=c[b];if(S!=null)switch(b){case"src":d=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,o));default:ut(i,o,b,S,c,null)}}y&&ut(i,o,"srcSet",c.srcSet,c,null),d&&ut(i,o,"src",c.src,c,null);return;case"input":He("invalid",i);var A=b=S=y=null,$=null,X=null;for(d in c)if(c.hasOwnProperty(d)){var ae=c[d];if(ae!=null)switch(d){case"name":y=ae;break;case"type":S=ae;break;case"checked":$=ae;break;case"defaultChecked":X=ae;break;case"value":b=ae;break;case"defaultValue":A=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(r(137,o));break;default:ut(i,o,d,ae,c,null)}}V0(i,b,A,$,X,S,y,!1);return;case"select":He("invalid",i),d=S=b=null;for(y in c)if(c.hasOwnProperty(y)&&(A=c[y],A!=null))switch(y){case"value":b=A;break;case"defaultValue":S=A;break;case"multiple":d=A;default:ut(i,o,y,A,c,null)}o=b,c=S,i.multiple=!!d,o!=null?Vi(i,!!d,o,!1):c!=null&&Vi(i,!!d,c,!0);return;case"textarea":He("invalid",i),b=y=d=null;for(S in c)if(c.hasOwnProperty(S)&&(A=c[S],A!=null))switch(S){case"value":d=A;break;case"defaultValue":y=A;break;case"children":b=A;break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(r(91));break;default:ut(i,o,S,A,c,null)}G0(i,d,y,b);return;case"option":for($ in c)c.hasOwnProperty($)&&(d=c[$],d!=null)&&($==="selected"?i.selected=d&&typeof d!="function"&&typeof d!="symbol":ut(i,o,$,d,c,null));return;case"dialog":He("beforetoggle",i),He("toggle",i),He("cancel",i),He("close",i);break;case"iframe":case"object":He("load",i);break;case"video":case"audio":for(d=0;d<Uo.length;d++)He(Uo[d],i);break;case"image":He("error",i),He("load",i);break;case"details":He("toggle",i);break;case"embed":case"source":case"link":He("error",i),He("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(X in c)if(c.hasOwnProperty(X)&&(d=c[X],d!=null))switch(X){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,o));default:ut(i,o,X,d,c,null)}return;default:if(jh(o)){for(ae in c)c.hasOwnProperty(ae)&&(d=c[ae],d!==void 0&&Sp(i,o,ae,d,c,void 0));return}}for(A in c)c.hasOwnProperty(A)&&(d=c[A],d!=null&&ut(i,o,A,d,c,null))}function y2(i,o,c,d){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,b=null,S=null,A=null,$=null,X=null,ae=null;for(se in c){var ce=c[se];if(c.hasOwnProperty(se)&&ce!=null)switch(se){case"checked":break;case"value":break;case"defaultValue":$=ce;default:d.hasOwnProperty(se)||ut(i,o,se,null,d,ce)}}for(var ee in d){var se=d[ee];if(ce=c[ee],d.hasOwnProperty(ee)&&(se!=null||ce!=null))switch(ee){case"type":b=se;break;case"name":y=se;break;case"checked":X=se;break;case"defaultChecked":ae=se;break;case"value":S=se;break;case"defaultValue":A=se;break;case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(r(137,o));break;default:se!==ce&&ut(i,o,ee,se,d,ce)}}Lh(i,S,A,$,X,ae,b,y);return;case"select":se=S=A=ee=null;for(b in c)if($=c[b],c.hasOwnProperty(b)&&$!=null)switch(b){case"value":break;case"multiple":se=$;default:d.hasOwnProperty(b)||ut(i,o,b,null,d,$)}for(y in d)if(b=d[y],$=c[y],d.hasOwnProperty(y)&&(b!=null||$!=null))switch(y){case"value":ee=b;break;case"defaultValue":A=b;break;case"multiple":S=b;default:b!==$&&ut(i,o,y,b,d,$)}o=A,c=S,d=se,ee!=null?Vi(i,!!c,ee,!1):!!d!=!!c&&(o!=null?Vi(i,!!c,o,!0):Vi(i,!!c,c?[]:"",!1));return;case"textarea":se=ee=null;for(A in c)if(y=c[A],c.hasOwnProperty(A)&&y!=null&&!d.hasOwnProperty(A))switch(A){case"value":break;case"children":break;default:ut(i,o,A,null,d,y)}for(S in d)if(y=d[S],b=c[S],d.hasOwnProperty(S)&&(y!=null||b!=null))switch(S){case"value":ee=y;break;case"defaultValue":se=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(r(91));break;default:y!==b&&ut(i,o,S,y,d,b)}H0(i,ee,se);return;case"option":for(var ve in c)ee=c[ve],c.hasOwnProperty(ve)&&ee!=null&&!d.hasOwnProperty(ve)&&(ve==="selected"?i.selected=!1:ut(i,o,ve,null,d,ee));for($ in d)ee=d[$],se=c[$],d.hasOwnProperty($)&&ee!==se&&(ee!=null||se!=null)&&($==="selected"?i.selected=ee&&typeof ee!="function"&&typeof ee!="symbol":ut(i,o,$,ee,d,se));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Oe in c)ee=c[Oe],c.hasOwnProperty(Oe)&&ee!=null&&!d.hasOwnProperty(Oe)&&ut(i,o,Oe,null,d,ee);for(X in d)if(ee=d[X],se=c[X],d.hasOwnProperty(X)&&ee!==se&&(ee!=null||se!=null))switch(X){case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(r(137,o));break;default:ut(i,o,X,ee,d,se)}return;default:if(jh(o)){for(var ft in c)ee=c[ft],c.hasOwnProperty(ft)&&ee!==void 0&&!d.hasOwnProperty(ft)&&Sp(i,o,ft,void 0,d,ee);for(ae in d)ee=d[ae],se=c[ae],!d.hasOwnProperty(ae)||ee===se||ee===void 0&&se===void 0||Sp(i,o,ae,ee,d,se);return}}for(var K in c)ee=c[K],c.hasOwnProperty(K)&&ee!=null&&!d.hasOwnProperty(K)&&ut(i,o,K,null,d,ee);for(ce in d)ee=d[ce],se=c[ce],!d.hasOwnProperty(ce)||ee===se||ee==null&&se==null||ut(i,o,ce,ee,d,se)}function Qv(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function _2(){if(typeof performance.getEntriesByType=="function"){for(var i=0,o=0,c=performance.getEntriesByType("resource"),d=0;d<c.length;d++){var y=c[d],b=y.transferSize,S=y.initiatorType,A=y.duration;if(b&&A&&Qv(S)){for(S=0,A=y.responseEnd,d+=1;d<c.length;d++){var $=c[d],X=$.startTime;if(X>A)break;var ae=$.transferSize,ce=$.initiatorType;ae&&Qv(ce)&&($=$.responseEnd,S+=ae*($<A?1:(A-X)/($-X)))}if(--d,o+=8*(b+S)/(y.duration/1e3),i++,10<i)break}}if(0<i)return o/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var kp=null,Ep=null;function ou(i){return i.nodeType===9?i:i.ownerDocument}function Jv(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Yv(i,o){if(i===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&o==="foreignObject"?0:i}function Cp(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Tp=null;function b2(){var i=window.event;return i&&i.type==="popstate"?i===Tp?!1:(Tp=i,!0):(Tp=null,!1)}var Xv=typeof setTimeout=="function"?setTimeout:void 0,v2=typeof clearTimeout=="function"?clearTimeout:void 0,Wv=typeof Promise=="function"?Promise:void 0,x2=typeof queueMicrotask=="function"?queueMicrotask:typeof Wv<"u"?function(i){return Wv.resolve(null).then(i).catch(w2)}:Xv;function w2(i){setTimeout(function(){throw i})}function zs(i){return i==="head"}function ex(i,o){var c=o,d=0;do{var y=c.nextSibling;if(i.removeChild(c),y&&y.nodeType===8)if(c=y.data,c==="/$"||c==="/&"){if(d===0){i.removeChild(y),wa(o);return}d--}else if(c==="$"||c==="$?"||c==="$~"||c==="$!"||c==="&")d++;else if(c==="html")qo(i.ownerDocument.documentElement);else if(c==="head"){c=i.ownerDocument.head,qo(c);for(var b=c.firstChild;b;){var S=b.nextSibling,A=b.nodeName;b[io]||A==="SCRIPT"||A==="STYLE"||A==="LINK"&&b.rel.toLowerCase()==="stylesheet"||c.removeChild(b),b=S}}else c==="body"&&qo(i.ownerDocument.body);c=y}while(c);wa(o)}function tx(i,o){var c=i;i=0;do{var d=c.nextSibling;if(c.nodeType===1?o?(c._stashedDisplay=c.style.display,c.style.display="none"):(c.style.display=c._stashedDisplay||"",c.getAttribute("style")===""&&c.removeAttribute("style")):c.nodeType===3&&(o?(c._stashedText=c.nodeValue,c.nodeValue=""):c.nodeValue=c._stashedText||""),d&&d.nodeType===8)if(c=d.data,c==="/$"){if(i===0)break;i--}else c!=="$"&&c!=="$?"&&c!=="$~"&&c!=="$!"||i++;c=d}while(c)}function Ap(i){var o=i.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var c=o;switch(o=o.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":Ap(c),Mh(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}i.removeChild(c)}}function S2(i,o,c,d){for(;i.nodeType===1;){var y=c;if(i.nodeName.toLowerCase()!==o.toLowerCase()){if(!d&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(d){if(!i[io])switch(o){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(b=i.getAttribute("rel"),b==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(b!==y.rel||i.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||i.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||i.getAttribute("title")!==(y.title==null?null:y.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(b=i.getAttribute("src"),(b!==(y.src==null?null:y.src)||i.getAttribute("type")!==(y.type==null?null:y.type)||i.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&b&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(o==="input"&&i.type==="hidden"){var b=y.name==null?null:""+y.name;if(y.type==="hidden"&&i.getAttribute("name")===b)return i}else return i;if(i=hr(i.nextSibling),i===null)break}return null}function k2(i,o,c){if(o==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!c||(i=hr(i.nextSibling),i===null))return null;return i}function nx(i,o){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!o||(i=hr(i.nextSibling),i===null))return null;return i}function Rp(i){return i.data==="$?"||i.data==="$~"}function Op(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function E2(i,o){var c=i.ownerDocument;if(i.data==="$~")i._reactRetry=o;else if(i.data!=="$?"||c.readyState!=="loading")o();else{var d=function(){o(),c.removeEventListener("DOMContentLoaded",d)};c.addEventListener("DOMContentLoaded",d),i._reactRetry=d}}function hr(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return i}var Ip=null;function rx(i){i=i.nextSibling;for(var o=0;i;){if(i.nodeType===8){var c=i.data;if(c==="/$"||c==="/&"){if(o===0)return hr(i.nextSibling);o--}else c!=="$"&&c!=="$!"&&c!=="$?"&&c!=="$~"&&c!=="&"||o++}i=i.nextSibling}return null}function sx(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var c=i.data;if(c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"){if(o===0)return i;o--}else c!=="/$"&&c!=="/&"||o++}i=i.previousSibling}return null}function ix(i,o,c){switch(o=ou(c),i){case"html":if(i=o.documentElement,!i)throw Error(r(452));return i;case"head":if(i=o.head,!i)throw Error(r(453));return i;case"body":if(i=o.body,!i)throw Error(r(454));return i;default:throw Error(r(451))}}function qo(i){for(var o=i.attributes;o.length;)i.removeAttributeNode(o[0]);Mh(i)}var dr=new Map,ax=new Set;function lu(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var us=G.d;G.d={f:C2,r:T2,D:A2,C:R2,L:O2,m:I2,X:M2,S:N2,M:D2};function C2(){var i=us.f(),o=Wc();return i||o}function T2(i){var o=$i(i);o!==null&&o.tag===5&&o.type==="form"?Sb(o):us.r(i)}var ba=typeof document>"u"?null:document;function ox(i,o,c){var d=ba;if(d&&typeof o=="string"&&o){var y=ir(o);y='link[rel="'+i+'"][href="'+y+'"]',typeof c=="string"&&(y+='[crossorigin="'+c+'"]'),ax.has(y)||(ax.add(y),i={rel:i,crossOrigin:c,href:o},d.querySelector(y)===null&&(o=d.createElement("link"),on(o,"link",i),Qt(o),d.head.appendChild(o)))}}function A2(i){us.D(i),ox("dns-prefetch",i,null)}function R2(i,o){us.C(i,o),ox("preconnect",i,o)}function O2(i,o,c){us.L(i,o,c);var d=ba;if(d&&i&&o){var y='link[rel="preload"][as="'+ir(o)+'"]';o==="image"&&c&&c.imageSrcSet?(y+='[imagesrcset="'+ir(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(y+='[imagesizes="'+ir(c.imageSizes)+'"]')):y+='[href="'+ir(i)+'"]';var b=y;switch(o){case"style":b=va(i);break;case"script":b=xa(i)}dr.has(b)||(i=p({rel:"preload",href:o==="image"&&c&&c.imageSrcSet?void 0:i,as:o},c),dr.set(b,i),d.querySelector(y)!==null||o==="style"&&d.querySelector(Fo(b))||o==="script"&&d.querySelector(Vo(b))||(o=d.createElement("link"),on(o,"link",i),Qt(o),d.head.appendChild(o)))}}function I2(i,o){us.m(i,o);var c=ba;if(c&&i){var d=o&&typeof o.as=="string"?o.as:"script",y='link[rel="modulepreload"][as="'+ir(d)+'"][href="'+ir(i)+'"]',b=y;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":b=xa(i)}if(!dr.has(b)&&(i=p({rel:"modulepreload",href:i},o),dr.set(b,i),c.querySelector(y)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(Vo(b)))return}d=c.createElement("link"),on(d,"link",i),Qt(d),c.head.appendChild(d)}}}function N2(i,o,c){us.S(i,o,c);var d=ba;if(d&&i){var y=qi(d).hoistableStyles,b=va(i);o=o||"default";var S=y.get(b);if(!S){var A={loading:0,preload:null};if(S=d.querySelector(Fo(b)))A.loading=5;else{i=p({rel:"stylesheet",href:i,"data-precedence":o},c),(c=dr.get(b))&&Np(i,c);var $=S=d.createElement("link");Qt($),on($,"link",i),$._p=new Promise(function(X,ae){$.onload=X,$.onerror=ae}),$.addEventListener("load",function(){A.loading|=1}),$.addEventListener("error",function(){A.loading|=2}),A.loading|=4,cu(S,o,d)}S={type:"stylesheet",instance:S,count:1,state:A},y.set(b,S)}}}function M2(i,o){us.X(i,o);var c=ba;if(c&&i){var d=qi(c).hoistableScripts,y=xa(i),b=d.get(y);b||(b=c.querySelector(Vo(y)),b||(i=p({src:i,async:!0},o),(o=dr.get(y))&&Mp(i,o),b=c.createElement("script"),Qt(b),on(b,"link",i),c.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},d.set(y,b))}}function D2(i,o){us.M(i,o);var c=ba;if(c&&i){var d=qi(c).hoistableScripts,y=xa(i),b=d.get(y);b||(b=c.querySelector(Vo(y)),b||(i=p({src:i,async:!0,type:"module"},o),(o=dr.get(y))&&Mp(i,o),b=c.createElement("script"),Qt(b),on(b,"link",i),c.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},d.set(y,b))}}function lx(i,o,c,d){var y=(y=de.current)?lu(y):null;if(!y)throw Error(r(446));switch(i){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(o=va(c.href),c=qi(y).hoistableStyles,d=c.get(o),d||(d={type:"style",instance:null,count:0,state:null},c.set(o,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){i=va(c.href);var b=qi(y).hoistableStyles,S=b.get(i);if(S||(y=y.ownerDocument||y,S={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},b.set(i,S),(b=y.querySelector(Fo(i)))&&!b._p&&(S.instance=b,S.state.loading=5),dr.has(i)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},dr.set(i,c),b||L2(y,i,c,S.state))),o&&d===null)throw Error(r(528,""));return S}if(o&&d!==null)throw Error(r(529,""));return null;case"script":return o=c.async,c=c.src,typeof c=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=xa(c),c=qi(y).hoistableScripts,d=c.get(o),d||(d={type:"script",instance:null,count:0,state:null},c.set(o,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,i))}}function va(i){return'href="'+ir(i)+'"'}function Fo(i){return'link[rel="stylesheet"]['+i+"]"}function cx(i){return p({},i,{"data-precedence":i.precedence,precedence:null})}function L2(i,o,c,d){i.querySelector('link[rel="preload"][as="style"]['+o+"]")?d.loading=1:(o=i.createElement("link"),d.preload=o,o.addEventListener("load",function(){return d.loading|=1}),o.addEventListener("error",function(){return d.loading|=2}),on(o,"link",c),Qt(o),i.head.appendChild(o))}function xa(i){return'[src="'+ir(i)+'"]'}function Vo(i){return"script[async]"+i}function ux(i,o,c){if(o.count++,o.instance===null)switch(o.type){case"style":var d=i.querySelector('style[data-href~="'+ir(c.href)+'"]');if(d)return o.instance=d,Qt(d),d;var y=p({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return d=(i.ownerDocument||i).createElement("style"),Qt(d),on(d,"style",y),cu(d,c.precedence,i),o.instance=d;case"stylesheet":y=va(c.href);var b=i.querySelector(Fo(y));if(b)return o.state.loading|=4,o.instance=b,Qt(b),b;d=cx(c),(y=dr.get(y))&&Np(d,y),b=(i.ownerDocument||i).createElement("link"),Qt(b);var S=b;return S._p=new Promise(function(A,$){S.onload=A,S.onerror=$}),on(b,"link",d),o.state.loading|=4,cu(b,c.precedence,i),o.instance=b;case"script":return b=xa(c.src),(y=i.querySelector(Vo(b)))?(o.instance=y,Qt(y),y):(d=c,(y=dr.get(b))&&(d=p({},c),Mp(d,y)),i=i.ownerDocument||i,y=i.createElement("script"),Qt(y),on(y,"link",d),i.head.appendChild(y),o.instance=y);case"void":return null;default:throw Error(r(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(d=o.instance,o.state.loading|=4,cu(d,c.precedence,i));return o.instance}function cu(i,o,c){for(var d=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=d.length?d[d.length-1]:null,b=y,S=0;S<d.length;S++){var A=d[S];if(A.dataset.precedence===o)b=A;else if(b!==y)break}b?b.parentNode.insertBefore(i,b.nextSibling):(o=c.nodeType===9?c.head:c,o.insertBefore(i,o.firstChild))}function Np(i,o){i.crossOrigin==null&&(i.crossOrigin=o.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=o.referrerPolicy),i.title==null&&(i.title=o.title)}function Mp(i,o){i.crossOrigin==null&&(i.crossOrigin=o.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=o.referrerPolicy),i.integrity==null&&(i.integrity=o.integrity)}var uu=null;function fx(i,o,c){if(uu===null){var d=new Map,y=uu=new Map;y.set(c,d)}else y=uu,d=y.get(c),d||(d=new Map,y.set(c,d));if(d.has(i))return d;for(d.set(i,null),c=c.getElementsByTagName(i),y=0;y<c.length;y++){var b=c[y];if(!(b[io]||b[nn]||i==="link"&&b.getAttribute("rel")==="stylesheet")&&b.namespaceURI!=="http://www.w3.org/2000/svg"){var S=b.getAttribute(o)||"";S=i+S;var A=d.get(S);A?A.push(b):d.set(S,[b])}}return d}function hx(i,o,c){i=i.ownerDocument||i,i.head.insertBefore(c,o==="title"?i.querySelector("head > title"):null)}function z2(i,o,c){if(c===1||o.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;return o.rel==="stylesheet"?(i=o.disabled,typeof o.precedence=="string"&&i==null):!0;case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function dx(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function j2(i,o,c,d){if(c.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var y=va(d.href),b=o.querySelector(Fo(y));if(b){o=b._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(i.count++,i=fu.bind(i),o.then(i,i)),c.state.loading|=4,c.instance=b,Qt(b);return}b=o.ownerDocument||o,d=cx(d),(y=dr.get(y))&&Np(d,y),b=b.createElement("link"),Qt(b);var S=b;S._p=new Promise(function(A,$){S.onload=A,S.onerror=$}),on(b,"link",d),c.instance=b}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(c,o),(o=c.state.preload)&&(c.state.loading&3)===0&&(i.count++,c=fu.bind(i),o.addEventListener("load",c),o.addEventListener("error",c))}}var Dp=0;function P2(i,o){return i.stylesheets&&i.count===0&&du(i,i.stylesheets),0<i.count||0<i.imgCount?function(c){var d=setTimeout(function(){if(i.stylesheets&&du(i,i.stylesheets),i.unsuspend){var b=i.unsuspend;i.unsuspend=null,b()}},6e4+o);0<i.imgBytes&&Dp===0&&(Dp=62500*_2());var y=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&du(i,i.stylesheets),i.unsuspend)){var b=i.unsuspend;i.unsuspend=null,b()}},(i.imgBytes>Dp?50:800)+o);return i.unsuspend=c,function(){i.unsuspend=null,clearTimeout(d),clearTimeout(y)}}:null}function fu(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)du(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var hu=null;function du(i,o){i.stylesheets=null,i.unsuspend!==null&&(i.count++,hu=new Map,o.forEach(B2,i),hu=null,fu.call(i))}function B2(i,o){if(!(o.state.loading&4)){var c=hu.get(i);if(c)var d=c.get(null);else{c=new Map,hu.set(i,c);for(var y=i.querySelectorAll("link[data-precedence],style[data-precedence]"),b=0;b<y.length;b++){var S=y[b];(S.nodeName==="LINK"||S.getAttribute("media")!=="not all")&&(c.set(S.dataset.precedence,S),d=S)}d&&c.set(null,d)}y=o.instance,S=y.getAttribute("data-precedence"),b=c.get(S)||d,b===d&&c.set(null,y),c.set(S,y),this.count++,d=fu.bind(this),y.addEventListener("load",d),y.addEventListener("error",d),b?b.parentNode.insertBefore(y,b.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(y,i.firstChild)),o.state.loading|=4}}var Ho={$$typeof:C,Provider:null,Consumer:null,_currentValue:re,_currentValue2:re,_threadCount:0};function U2(i,o,c,d,y,b,S,A,$){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Rh(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Rh(0),this.hiddenUpdates=Rh(null),this.identifierPrefix=d,this.onUncaughtError=y,this.onCaughtError=b,this.onRecoverableError=S,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=$,this.incompleteTransitions=new Map}function px(i,o,c,d,y,b,S,A,$,X,ae,ce){return i=new U2(i,o,c,S,$,X,ae,ce,A),o=1,b===!0&&(o|=24),b=Vn(3,null,null,o),i.current=b,b.stateNode=i,o=dd(),o.refCount++,i.pooledCache=o,o.refCount++,b.memoizedState={element:d,isDehydrated:c,cache:o},yd(b),i}function mx(i){return i?(i=Xi,i):Xi}function gx(i,o,c,d,y,b){y=mx(y),d.context===null?d.context=y:d.pendingContext=y,d=Es(o),d.payload={element:c},b=b===void 0?null:b,b!==null&&(d.callback=b),c=Cs(i,d,o),c!==null&&(jn(c,i,o),So(c,i,o))}function yx(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var c=i.retryLane;i.retryLane=c!==0&&c<o?c:o}}function Lp(i,o){yx(i,o),(i=i.alternate)&&yx(i,o)}function _x(i){if(i.tag===13||i.tag===31){var o=oi(i,67108864);o!==null&&jn(o,i,67108864),Lp(i,67108864)}}function bx(i){if(i.tag===13||i.tag===31){var o=Qn();o=Oh(o);var c=oi(i,o);c!==null&&jn(c,i,o),Lp(i,o)}}var pu=!0;function $2(i,o,c,d){var y=B.T;B.T=null;var b=G.p;try{G.p=2,zp(i,o,c,d)}finally{G.p=b,B.T=y}}function q2(i,o,c,d){var y=B.T;B.T=null;var b=G.p;try{G.p=8,zp(i,o,c,d)}finally{G.p=b,B.T=y}}function zp(i,o,c,d){if(pu){var y=jp(d);if(y===null)wp(i,o,d,mu,c),xx(i,d);else if(V2(y,i,o,c,d))d.stopPropagation();else if(xx(i,d),o&4&&-1<F2.indexOf(i)){for(;y!==null;){var b=$i(y);if(b!==null)switch(b.tag){case 3:if(b=b.stateNode,b.current.memoizedState.isDehydrated){var S=ni(b.pendingLanes);if(S!==0){var A=b;for(A.pendingLanes|=2,A.entangledLanes|=2;S;){var $=1<<31-dt(S);A.entanglements[1]|=$,S&=~$}Mr(b),(st&6)===0&&(Yc=be()+500,Bo(0))}}break;case 31:case 13:A=oi(b,2),A!==null&&jn(A,b,2),Wc(),Lp(b,2)}if(b=jp(d),b===null&&wp(i,o,d,mu,c),b===y)break;y=b}y!==null&&d.stopPropagation()}else wp(i,o,d,null,c)}}function jp(i){return i=Bh(i),Pp(i)}var mu=null;function Pp(i){if(mu=null,i=Ui(i),i!==null){var o=a(i);if(o===null)i=null;else{var c=o.tag;if(c===13){if(i=l(o),i!==null)return i;i=null}else if(c===31){if(i=u(o),i!==null)return i;i=null}else if(c===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null)}}return mu=i,null}function vx(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(et()){case te:return 2;case oe:return 8;case ge:case ye:return 32;case Ee:return 268435456;default:return 32}default:return 32}}var Bp=!1,js=null,Ps=null,Bs=null,Go=new Map,Ko=new Map,Us=[],F2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function xx(i,o){switch(i){case"focusin":case"focusout":js=null;break;case"dragenter":case"dragleave":Ps=null;break;case"mouseover":case"mouseout":Bs=null;break;case"pointerover":case"pointerout":Go.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ko.delete(o.pointerId)}}function Zo(i,o,c,d,y,b){return i===null||i.nativeEvent!==b?(i={blockedOn:o,domEventName:c,eventSystemFlags:d,nativeEvent:b,targetContainers:[y]},o!==null&&(o=$i(o),o!==null&&_x(o)),i):(i.eventSystemFlags|=d,o=i.targetContainers,y!==null&&o.indexOf(y)===-1&&o.push(y),i)}function V2(i,o,c,d,y){switch(o){case"focusin":return js=Zo(js,i,o,c,d,y),!0;case"dragenter":return Ps=Zo(Ps,i,o,c,d,y),!0;case"mouseover":return Bs=Zo(Bs,i,o,c,d,y),!0;case"pointerover":var b=y.pointerId;return Go.set(b,Zo(Go.get(b)||null,i,o,c,d,y)),!0;case"gotpointercapture":return b=y.pointerId,Ko.set(b,Zo(Ko.get(b)||null,i,o,c,d,y)),!0}return!1}function wx(i){var o=Ui(i.target);if(o!==null){var c=a(o);if(c!==null){if(o=c.tag,o===13){if(o=l(c),o!==null){i.blockedOn=o,z0(i.priority,function(){bx(c)});return}}else if(o===31){if(o=u(c),o!==null){i.blockedOn=o,z0(i.priority,function(){bx(c)});return}}else if(o===3&&c.stateNode.current.memoizedState.isDehydrated){i.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}i.blockedOn=null}function gu(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var c=jp(i.nativeEvent);if(c===null){c=i.nativeEvent;var d=new c.constructor(c.type,c);Ph=d,c.target.dispatchEvent(d),Ph=null}else return o=$i(c),o!==null&&_x(o),i.blockedOn=c,!1;o.shift()}return!0}function Sx(i,o,c){gu(i)&&c.delete(o)}function H2(){Bp=!1,js!==null&&gu(js)&&(js=null),Ps!==null&&gu(Ps)&&(Ps=null),Bs!==null&&gu(Bs)&&(Bs=null),Go.forEach(Sx),Ko.forEach(Sx)}function yu(i,o){i.blockedOn===o&&(i.blockedOn=null,Bp||(Bp=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,H2)))}var _u=null;function kx(i){_u!==i&&(_u=i,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){_u===i&&(_u=null);for(var o=0;o<i.length;o+=3){var c=i[o],d=i[o+1],y=i[o+2];if(typeof d!="function"){if(Pp(d||c)===null)continue;break}var b=$i(c);b!==null&&(i.splice(o,3),o-=3,jd(b,{pending:!0,data:y,method:c.method,action:d},d,y))}}))}function wa(i){function o($){return yu($,i)}js!==null&&yu(js,i),Ps!==null&&yu(Ps,i),Bs!==null&&yu(Bs,i),Go.forEach(o),Ko.forEach(o);for(var c=0;c<Us.length;c++){var d=Us[c];d.blockedOn===i&&(d.blockedOn=null)}for(;0<Us.length&&(c=Us[0],c.blockedOn===null);)wx(c),c.blockedOn===null&&Us.shift();if(c=(i.ownerDocument||i).$$reactFormReplay,c!=null)for(d=0;d<c.length;d+=3){var y=c[d],b=c[d+1],S=y[In]||null;if(typeof b=="function")S||kx(c);else if(S){var A=null;if(b&&b.hasAttribute("formAction")){if(y=b,S=b[In]||null)A=S.formAction;else if(Pp(y)!==null)continue}else A=S.action;typeof A=="function"?c[d+1]=A:(c.splice(d,3),d-=3),kx(c)}}}function Ex(){function i(b){b.canIntercept&&b.info==="react-transition"&&b.intercept({handler:function(){return new Promise(function(S){return y=S})},focusReset:"manual",scroll:"manual"})}function o(){y!==null&&(y(),y=null),d||setTimeout(c,20)}function c(){if(!d&&!navigation.transition){var b=navigation.currentEntry;b&&b.url!=null&&navigation.navigate(b.url,{state:b.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var d=!1,y=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(c,100),function(){d=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),y!==null&&(y(),y=null)}}}function Up(i){this._internalRoot=i}bu.prototype.render=Up.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(r(409));var c=o.current,d=Qn();gx(c,d,i,o,null,null)},bu.prototype.unmount=Up.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;gx(i.current,2,null,i,null,null),Wc(),o[Bi]=null}};function bu(i){this._internalRoot=i}bu.prototype.unstable_scheduleHydration=function(i){if(i){var o=L0();i={blockedOn:null,target:i,priority:o};for(var c=0;c<Us.length&&o!==0&&o<Us[c].priority;c++);Us.splice(c,0,i),c===0&&wx(i)}};var Cx=e.version;if(Cx!=="19.2.3")throw Error(r(527,Cx,"19.2.3"));G.findDOMNode=function(i){var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(r(188)):(i=Object.keys(i).join(","),Error(r(268,i)));return i=h(o),i=i!==null?m(i):null,i=i===null?null:i.stateNode,i};var G2={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:B,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vu.isDisabled&&vu.supportsFiber)try{Bt=vu.inject(G2),Fe=vu}catch{}}return Jo.createRoot=function(i,o){if(!s(i))throw Error(r(299));var c=!1,d="",y=Mb,b=Db,S=Lb;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(d=o.identifierPrefix),o.onUncaughtError!==void 0&&(y=o.onUncaughtError),o.onCaughtError!==void 0&&(b=o.onCaughtError),o.onRecoverableError!==void 0&&(S=o.onRecoverableError)),o=px(i,1,!1,null,null,c,d,null,y,b,S,Ex),i[Bi]=o.current,xp(i),new Up(o)},Jo.hydrateRoot=function(i,o,c){if(!s(i))throw Error(r(299));var d=!1,y="",b=Mb,S=Db,A=Lb,$=null;return c!=null&&(c.unstable_strictMode===!0&&(d=!0),c.identifierPrefix!==void 0&&(y=c.identifierPrefix),c.onUncaughtError!==void 0&&(b=c.onUncaughtError),c.onCaughtError!==void 0&&(S=c.onCaughtError),c.onRecoverableError!==void 0&&(A=c.onRecoverableError),c.formState!==void 0&&($=c.formState)),o=px(i,1,!0,o,c??null,d,y,$,b,S,A,Ex),o.context=mx(null),c=o.current,d=Qn(),d=Oh(d),y=Es(d),y.callback=null,Cs(c,y,d),c=d,o.current.lanes=c,so(o,c),Mr(o),i[Bi]=o.current,xp(i),new bu(o)},Jo.version="19.2.3",Jo}var zx;function tO(){if(zx)return Fp.exports;zx=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Fp.exports=eO(),Fp.exports}var nO=tO(),Gl=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},rO={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},sO=class{#e=rO;#t=!1;setTimeoutProvider(t){this.#e=t}setTimeout(t,e){return this.#e.setTimeout(t,e)}clearTimeout(t){this.#e.clearTimeout(t)}setInterval(t,e){return this.#e.setInterval(t,e)}clearInterval(t){this.#e.clearInterval(t)}},Ci=new sO;function iO(t){setTimeout(t,0)}var Va=typeof window>"u"||"Deno"in globalThis;function mr(){}function aO(t,e){return typeof t=="function"?t(e):t}function Um(t){return typeof t=="number"&&t>=0&&t!==1/0}function JS(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Qs(t,e){return typeof t=="function"?t(e):t}function gr(t,e){return typeof t=="function"?t(e):t}function jx(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:a,queryKey:l,stale:u}=t;if(l){if(r){if(e.queryHash!==Wg(l,e.options))return!1}else if(!Il(e.queryKey,l))return!1}if(n!=="all"){const f=e.isActive();if(n==="active"&&!f||n==="inactive"&&f)return!1}return!(typeof u=="boolean"&&e.isStale()!==u||s&&s!==e.state.fetchStatus||a&&!a(e))}function Px(t,e){const{exact:n,status:r,predicate:s,mutationKey:a}=t;if(a){if(!e.options.mutationKey)return!1;if(n){if(ms(e.options.mutationKey)!==ms(a))return!1}else if(!Il(e.options.mutationKey,a))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function Wg(t,e){return(e?.queryKeyHashFn||ms)(t)}function ms(t){return JSON.stringify(t,(e,n)=>qm(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function Il(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>Il(t[n],e[n])):!1}var oO=Object.prototype.hasOwnProperty;function YS(t,e){if(t===e)return t;const n=Bx(t)&&Bx(e);if(!n&&!(qm(t)&&qm(e)))return e;const s=(n?t:Object.keys(t)).length,a=n?e:Object.keys(e),l=a.length,u=n?new Array(l):{};let f=0;for(let h=0;h<l;h++){const m=n?h:a[h],p=t[m],_=e[m];if(p===_){u[m]=p,(n?h<s:oO.call(t,m))&&f++;continue}if(p===null||_===null||typeof p!="object"||typeof _!="object"){u[m]=_;continue}const g=YS(p,_);u[m]=g,g===p&&f++}return s===l&&f===s?t:u}function $m(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function Bx(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function qm(t){if(!Ux(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!Ux(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function Ux(t){return Object.prototype.toString.call(t)==="[object Object]"}function lO(t){return new Promise(e=>{Ci.setTimeout(e,t)})}function Fm(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?YS(t,e):e}function cO(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function uO(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var ey=Symbol();function XS(t,e){return!t.queryFn&&e?.initialPromise?()=>e.initialPromise:!t.queryFn||t.queryFn===ey?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function fO(t,e,n){let r=!1,s;return Object.defineProperty(t,"signal",{enumerable:!0,get:()=>(s??=e(),r||(r=!0,s.aborted?n():s.addEventListener("abort",n,{once:!0})),s)}),t}var hO=class extends Gl{#e;#t;#n;constructor(){super(),this.#n=t=>{if(!Va&&window.addEventListener){const e=()=>t();return window.addEventListener("visibilitychange",e,!1),()=>{window.removeEventListener("visibilitychange",e)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#n=t,this.#t?.(),this.#t=t(e=>{typeof e=="boolean"?this.setFocused(e):this.onFocus()})}setFocused(t){this.#e!==t&&(this.#e=t,this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(e=>{e(t)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},ty=new hO;function Vm(){let t,e;const n=new Promise((s,a)=>{t=s,e=a});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}var dO=iO;function pO(){let t=[],e=0,n=u=>{u()},r=u=>{u()},s=dO;const a=u=>{e?t.push(u):s(()=>{n(u)})},l=()=>{const u=t;t=[],u.length&&s(()=>{r(()=>{u.forEach(f=>{n(f)})})})};return{batch:u=>{let f;e++;try{f=u()}finally{e--,e||l()}return f},batchCalls:u=>(...f)=>{a(()=>{u(...f)})},schedule:a,setNotifyFunction:u=>{n=u},setBatchNotifyFunction:u=>{r=u},setScheduler:u=>{s=u}}}var _n=pO(),mO=class extends Gl{#e=!0;#t;#n;constructor(){super(),this.#n=t=>{if(!Va&&window.addEventListener){const e=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",e,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",n)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#n=t,this.#t?.(),this.#t=t(this.setOnline.bind(this))}setOnline(t){this.#e!==t&&(this.#e=t,this.listeners.forEach(n=>{n(t)}))}isOnline(){return this.#e}},of=new mO;function gO(t){return Math.min(1e3*2**t,3e4)}function WS(t){return(t??"online")==="online"?of.isOnline():!0}var Hm=class extends Error{constructor(t){super("CancelledError"),this.revert=t?.revert,this.silent=t?.silent}};function ek(t){let e=!1,n=0,r;const s=Vm(),a=()=>s.status!=="pending",l=x=>{if(!a()){const E=new Hm(x);_(E),t.onCancel?.(E)}},u=()=>{e=!0},f=()=>{e=!1},h=()=>ty.isFocused()&&(t.networkMode==="always"||of.isOnline())&&t.canRun(),m=()=>WS(t.networkMode)&&t.canRun(),p=x=>{a()||(r?.(),s.resolve(x))},_=x=>{a()||(r?.(),s.reject(x))},g=()=>new Promise(x=>{r=E=>{(a()||h())&&x(E)},t.onPause?.()}).then(()=>{r=void 0,a()||t.onContinue?.()}),v=()=>{if(a())return;let x;const E=n===0?t.initialPromise:void 0;try{x=E??t.fn()}catch(k){x=Promise.reject(k)}Promise.resolve(x).then(p).catch(k=>{if(a())return;const T=t.retry??(Va?0:3),C=t.retryDelay??gO,j=typeof C=="function"?C(n,k):C,D=T===!0||typeof T=="number"&&n<T||typeof T=="function"&&T(n,k);if(e||!D){_(k);return}n++,t.onFail?.(n,k),lO(j).then(()=>h()?void 0:g()).then(()=>{e?_(k):v()})})};return{promise:s,status:()=>s.status,cancel:l,continue:()=>(r?.(),s),cancelRetry:u,continueRetry:f,canStart:m,start:()=>(m()?v():g().then(v),s)}}var tk=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Um(this.gcTime)&&(this.#e=Ci.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Va?1/0:300*1e3))}clearGcTimeout(){this.#e&&(Ci.clearTimeout(this.#e),this.#e=void 0)}},yO=class extends tk{#e;#t;#n;#r;#s;#o;#i;constructor(t){super(),this.#i=!1,this.#o=t.defaultOptions,this.setOptions(t.options),this.observers=[],this.#r=t.client,this.#n=this.#r.getQueryCache(),this.queryKey=t.queryKey,this.queryHash=t.queryHash,this.#e=qx(this.options),this.state=t.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#s?.promise}setOptions(t){if(this.options={...this.#o,...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const e=qx(this.options);e.data!==void 0&&(this.setState($x(e.data,e.dataUpdatedAt)),this.#e=e)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#n.remove(this)}setData(t,e){const n=Fm(this.state.data,t,this.options);return this.#a({data:n,type:"success",dataUpdatedAt:e?.updatedAt,manual:e?.manual}),n}setState(t,e){this.#a({type:"setState",state:t,setStateOptions:e})}cancel(t){const e=this.#s?.promise;return this.#s?.cancel(t),e?e.then(mr).catch(mr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(t=>gr(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===ey||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>Qs(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!JS(this.state.dataUpdatedAt,t)}onFocus(){this.observers.find(e=>e.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#s?.continue()}onOnline(){this.observers.find(e=>e.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#s?.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(e=>e!==t),this.observers.length||(this.#s&&(this.#i?this.#s.cancel({revert:!0}):this.#s.cancelRetry()),this.scheduleGc()),this.#n.notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#a({type:"invalidate"})}async fetch(t,e){if(this.state.fetchStatus!=="idle"&&this.#s?.status()!=="rejected"){if(this.state.data!==void 0&&e?.cancelRefetch)this.cancel({silent:!0});else if(this.#s)return this.#s.continueRetry(),this.#s.promise}if(t&&this.setOptions(t),!this.options.queryFn){const u=this.observers.find(f=>f.options.queryFn);u&&this.setOptions(u.options)}const n=new AbortController,r=u=>{Object.defineProperty(u,"signal",{enumerable:!0,get:()=>(this.#i=!0,n.signal)})},s=()=>{const u=XS(this.options,e),h=(()=>{const m={client:this.#r,queryKey:this.queryKey,meta:this.meta};return r(m),m})();return this.#i=!1,this.options.persister?this.options.persister(u,h,this):u(h)},l=(()=>{const u={fetchOptions:e,options:this.options,queryKey:this.queryKey,client:this.#r,state:this.state,fetchFn:s};return r(u),u})();this.options.behavior?.onFetch(l,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==l.fetchOptions?.meta)&&this.#a({type:"fetch",meta:l.fetchOptions?.meta}),this.#s=ek({initialPromise:e?.initialPromise,fn:l.fetchFn,onCancel:u=>{u instanceof Hm&&u.revert&&this.setState({...this.#t,fetchStatus:"idle"}),n.abort()},onFail:(u,f)=>{this.#a({type:"failed",failureCount:u,error:f})},onPause:()=>{this.#a({type:"pause"})},onContinue:()=>{this.#a({type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0});try{const u=await this.#s.start();if(u===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(u),this.#n.config.onSuccess?.(u,this),this.#n.config.onSettled?.(u,this.state.error,this),u}catch(u){if(u instanceof Hm){if(u.silent)return this.#s.promise;if(u.revert){if(this.state.data===void 0)throw u;return this.state.data}}throw this.#a({type:"error",error:u}),this.#n.config.onError?.(u,this),this.#n.config.onSettled?.(this.state.data,u,this),u}finally{this.scheduleGc()}}#a(t){const e=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...nk(n.data,this.options),fetchMeta:t.meta??null};case"success":const r={...n,...$x(t.data,t.dataUpdatedAt),dataUpdateCount:n.dataUpdateCount+1,...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=t.manual?r:void 0,r;case"error":const s=t.error;return{...n,error:s,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=e(this.state),_n.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),this.#n.notify({query:this,type:"updated",action:t})})}};function nk(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:WS(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function $x(t,e){return{data:t,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function qx(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var _O=class extends Gl{constructor(t,e){super(),this.options=e,this.#e=t,this.#a=null,this.#i=Vm(),this.bindMethods(),this.setOptions(e)}#e;#t=void 0;#n=void 0;#r=void 0;#s;#o;#i;#a;#p;#m;#c;#u;#l;#f;#h=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),Fx(this.#t,this.options)?this.#d():this.updateResult(),this.#b())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Gm(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Gm(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#v(),this.#x(),this.#t.removeObserver(this)}setOptions(t){const e=this.options,n=this.#t;if(this.options=this.#e.defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof gr(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#w(),this.#t.setOptions(this.options),e._defaulted&&!$m(this.options,e)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const r=this.hasListeners();r&&Vx(this.#t,n,this.options,e)&&this.#d(),this.updateResult(),r&&(this.#t!==n||gr(this.options.enabled,this.#t)!==gr(e.enabled,this.#t)||Qs(this.options.staleTime,this.#t)!==Qs(e.staleTime,this.#t))&&this.#g();const s=this.#y();r&&(this.#t!==n||gr(this.options.enabled,this.#t)!==gr(e.enabled,this.#t)||s!==this.#f)&&this.#_(s)}getOptimisticResult(t){const e=this.#e.getQueryCache().build(this.#e,t),n=this.createResult(e,t);return vO(this,n)&&(this.#r=n,this.#o=this.options,this.#s=this.#t.state),n}getCurrentResult(){return this.#r}trackResult(t,e){return new Proxy(t,{get:(n,r)=>(this.trackProp(r),e?.(r),r==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&this.#i.status==="pending"&&this.#i.reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(n,r))})}trackProp(t){this.#h.add(t)}getCurrentQuery(){return this.#t}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const e=this.#e.defaultQueryOptions(t),n=this.#e.getQueryCache().build(this.#e,e);return n.fetch().then(()=>this.createResult(n,e))}fetch(t){return this.#d({...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#r))}#d(t){this.#w();let e=this.#t.fetch(this.options,t);return t?.throwOnError||(e=e.catch(mr)),e}#g(){this.#v();const t=Qs(this.options.staleTime,this.#t);if(Va||this.#r.isStale||!Um(t))return;const n=JS(this.#r.dataUpdatedAt,t)+1;this.#u=Ci.setTimeout(()=>{this.#r.isStale||this.updateResult()},n)}#y(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#_(t){this.#x(),this.#f=t,!(Va||gr(this.options.enabled,this.#t)===!1||!Um(this.#f)||this.#f===0)&&(this.#l=Ci.setInterval(()=>{(this.options.refetchIntervalInBackground||ty.isFocused())&&this.#d()},this.#f))}#b(){this.#g(),this.#_(this.#y())}#v(){this.#u&&(Ci.clearTimeout(this.#u),this.#u=void 0)}#x(){this.#l&&(Ci.clearInterval(this.#l),this.#l=void 0)}createResult(t,e){const n=this.#t,r=this.options,s=this.#r,a=this.#s,l=this.#o,f=t!==n?t.state:this.#n,{state:h}=t;let m={...h},p=!1,_;if(e._optimisticResults){const V=this.hasListeners(),H=!V&&Fx(t,e),P=V&&Vx(t,n,e,r);(H||P)&&(m={...m,...nk(h.data,t.options)}),e._optimisticResults==="isRestoring"&&(m.fetchStatus="idle")}let{error:g,errorUpdatedAt:v,status:x}=m;_=m.data;let E=!1;if(e.placeholderData!==void 0&&_===void 0&&x==="pending"){let V;s?.isPlaceholderData&&e.placeholderData===l?.placeholderData?(V=s.data,E=!0):V=typeof e.placeholderData=="function"?e.placeholderData(this.#c?.state.data,this.#c):e.placeholderData,V!==void 0&&(x="success",_=Fm(s?.data,V,e),p=!0)}if(e.select&&_!==void 0&&!E)if(s&&_===a?.data&&e.select===this.#p)_=this.#m;else try{this.#p=e.select,_=e.select(_),_=Fm(s?.data,_,e),this.#m=_,this.#a=null}catch(V){this.#a=V}this.#a&&(g=this.#a,_=this.#m,v=Date.now(),x="error");const k=m.fetchStatus==="fetching",T=x==="pending",C=x==="error",j=T&&k,D=_!==void 0,U={status:x,fetchStatus:m.fetchStatus,isPending:T,isSuccess:x==="success",isError:C,isInitialLoading:j,isLoading:j,data:_,dataUpdatedAt:m.dataUpdatedAt,error:g,errorUpdatedAt:v,failureCount:m.fetchFailureCount,failureReason:m.fetchFailureReason,errorUpdateCount:m.errorUpdateCount,isFetched:m.dataUpdateCount>0||m.errorUpdateCount>0,isFetchedAfterMount:m.dataUpdateCount>f.dataUpdateCount||m.errorUpdateCount>f.errorUpdateCount,isFetching:k,isRefetching:k&&!T,isLoadingError:C&&!D,isPaused:m.fetchStatus==="paused",isPlaceholderData:p,isRefetchError:C&&D,isStale:ny(t,e),refetch:this.refetch,promise:this.#i,isEnabled:gr(e.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const V=Q=>{U.status==="error"?Q.reject(U.error):U.data!==void 0&&Q.resolve(U.data)},H=()=>{const Q=this.#i=U.promise=Vm();V(Q)},P=this.#i;switch(P.status){case"pending":t.queryHash===n.queryHash&&V(P);break;case"fulfilled":(U.status==="error"||U.data!==P.value)&&H();break;case"rejected":(U.status!=="error"||U.error!==P.reason)&&H();break}}return U}updateResult(){const t=this.#r,e=this.createResult(this.#t,this.options);if(this.#s=this.#t.state,this.#o=this.options,this.#s.data!==void 0&&(this.#c=this.#t),$m(e,t))return;this.#r=e;const n=()=>{if(!t)return!0;const{notifyOnChangeProps:r}=this.options,s=typeof r=="function"?r():r;if(s==="all"||!s&&!this.#h.size)return!0;const a=new Set(s??this.#h);return this.options.throwOnError&&a.add("error"),Object.keys(this.#r).some(l=>{const u=l;return this.#r[u]!==t[u]&&a.has(u)})};this.#S({listeners:n()})}#w(){const t=this.#e.getQueryCache().build(this.#e,this.options);if(t===this.#t)return;const e=this.#t;this.#t=t,this.#n=t.state,this.hasListeners()&&(e?.removeObserver(this),t.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#b()}#S(t){_n.batch(()=>{t.listeners&&this.listeners.forEach(e=>{e(this.#r)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function bO(t,e){return gr(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function Fx(t,e){return bO(t,e)||t.state.data!==void 0&&Gm(t,e,e.refetchOnMount)}function Gm(t,e,n){if(gr(e.enabled,t)!==!1&&Qs(e.staleTime,t)!=="static"){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&ny(t,e)}return!1}function Vx(t,e,n,r){return(t!==e||gr(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&ny(t,n)}function ny(t,e){return gr(e.enabled,t)!==!1&&t.isStaleByTime(Qs(e.staleTime,t))}function vO(t,e){return!$m(t.getCurrentResult(),e)}function Hx(t){return{onFetch:(e,n)=>{const r=e.options,s=e.fetchOptions?.meta?.fetchMore?.direction,a=e.state.data?.pages||[],l=e.state.data?.pageParams||[];let u={pages:[],pageParams:[]},f=0;const h=async()=>{let m=!1;const p=v=>{fO(v,()=>e.signal,()=>m=!0)},_=XS(e.options,e.fetchOptions),g=async(v,x,E)=>{if(m)return Promise.reject();if(x==null&&v.pages.length)return Promise.resolve(v);const T=(()=>{const I={client:e.client,queryKey:e.queryKey,pageParam:x,direction:E?"backward":"forward",meta:e.options.meta};return p(I),I})(),C=await _(T),{maxPages:j}=e.options,D=E?uO:cO;return{pages:D(v.pages,C,j),pageParams:D(v.pageParams,x,j)}};if(s&&a.length){const v=s==="backward",x=v?xO:Gx,E={pages:a,pageParams:l},k=x(r,E);u=await g(E,k,v)}else{const v=t??a.length;do{const x=f===0?l[0]??r.initialPageParam:Gx(r,u);if(f>0&&x==null)break;u=await g(u,x),f++}while(f<v)}return u};e.options.persister?e.fetchFn=()=>e.options.persister?.(h,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n):e.fetchFn=h}}}function Gx(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function xO(t,{pages:e,pageParams:n}){return e.length>0?t.getPreviousPageParam?.(e[0],e,n[0],n):void 0}var wO=class extends tk{#e;#t;#n;#r;constructor(t){super(),this.#e=t.client,this.mutationId=t.mutationId,this.#n=t.mutationCache,this.#t=[],this.state=t.state||SO(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){this.#t.includes(t)||(this.#t.push(t),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){this.#t=this.#t.filter(e=>e!==t),this.scheduleGc(),this.#n.notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#n.remove(this))}continue(){return this.#r?.continue()??this.execute(this.state.variables)}async execute(t){const e=()=>{this.#s({type:"continue"})},n={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#r=ek({fn:()=>this.options.mutationFn?this.options.mutationFn(t,n):Promise.reject(new Error("No mutationFn found")),onFail:(a,l)=>{this.#s({type:"failed",failureCount:a,error:l})},onPause:()=>{this.#s({type:"pause"})},onContinue:e,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#n.canRun(this)});const r=this.state.status==="pending",s=!this.#r.canStart();try{if(r)e();else{this.#s({type:"pending",variables:t,isPaused:s}),await this.#n.config.onMutate?.(t,this,n);const l=await this.options.onMutate?.(t,n);l!==this.state.context&&this.#s({type:"pending",context:l,variables:t,isPaused:s})}const a=await this.#r.start();return await this.#n.config.onSuccess?.(a,t,this.state.context,this,n),await this.options.onSuccess?.(a,t,this.state.context,n),await this.#n.config.onSettled?.(a,null,this.state.variables,this.state.context,this,n),await this.options.onSettled?.(a,null,t,this.state.context,n),this.#s({type:"success",data:a}),a}catch(a){try{await this.#n.config.onError?.(a,t,this.state.context,this,n)}catch(l){Promise.reject(l)}try{await this.options.onError?.(a,t,this.state.context,n)}catch(l){Promise.reject(l)}try{await this.#n.config.onSettled?.(void 0,a,this.state.variables,this.state.context,this,n)}catch(l){Promise.reject(l)}try{await this.options.onSettled?.(void 0,a,t,this.state.context,n)}catch(l){Promise.reject(l)}throw this.#s({type:"error",error:a}),a}finally{this.#n.runNext(this)}}#s(t){const e=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=e(this.state),_n.batch(()=>{this.#t.forEach(n=>{n.onMutationUpdate(t)}),this.#n.notify({mutation:this,type:"updated",action:t})})}};function SO(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var kO=class extends Gl{constructor(t={}){super(),this.config=t,this.#e=new Set,this.#t=new Map,this.#n=0}#e;#t;#n;build(t,e,n){const r=new wO({client:t,mutationCache:this,mutationId:++this.#n,options:t.defaultMutationOptions(e),state:n});return this.add(r),r}add(t){this.#e.add(t);const e=xu(t);if(typeof e=="string"){const n=this.#t.get(e);n?n.push(t):this.#t.set(e,[t])}this.notify({type:"added",mutation:t})}remove(t){if(this.#e.delete(t)){const e=xu(t);if(typeof e=="string"){const n=this.#t.get(e);if(n)if(n.length>1){const r=n.indexOf(t);r!==-1&&n.splice(r,1)}else n[0]===t&&this.#t.delete(e)}}this.notify({type:"removed",mutation:t})}canRun(t){const e=xu(t);if(typeof e=="string"){const r=this.#t.get(e)?.find(s=>s.state.status==="pending");return!r||r===t}else return!0}runNext(t){const e=xu(t);return typeof e=="string"?this.#t.get(e)?.find(r=>r!==t&&r.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){_n.batch(()=>{this.#e.forEach(t=>{this.notify({type:"removed",mutation:t})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(t){const e={exact:!0,...t};return this.getAll().find(n=>Px(e,n))}findAll(t={}){return this.getAll().filter(e=>Px(t,e))}notify(t){_n.batch(()=>{this.listeners.forEach(e=>{e(t)})})}resumePausedMutations(){const t=this.getAll().filter(e=>e.state.isPaused);return _n.batch(()=>Promise.all(t.map(e=>e.continue().catch(mr))))}};function xu(t){return t.options.scope?.id}var EO=class extends Gl{constructor(t={}){super(),this.config=t,this.#e=new Map}#e;build(t,e,n){const r=e.queryKey,s=e.queryHash??Wg(r,e);let a=this.get(s);return a||(a=new yO({client:t,queryKey:r,queryHash:s,options:t.defaultQueryOptions(e),state:n,defaultOptions:t.getQueryDefaults(r)}),this.add(a)),a}add(t){this.#e.has(t.queryHash)||(this.#e.set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const e=this.#e.get(t.queryHash);e&&(t.destroy(),e===t&&this.#e.delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){_n.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return this.#e.get(t)}getAll(){return[...this.#e.values()]}find(t){const e={exact:!0,...t};return this.getAll().find(n=>jx(e,n))}findAll(t={}){const e=this.getAll();return Object.keys(t).length>0?e.filter(n=>jx(t,n)):e}notify(t){_n.batch(()=>{this.listeners.forEach(e=>{e(t)})})}onFocus(){_n.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){_n.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},CO=class{#e;#t;#n;#r;#s;#o;#i;#a;constructor(t={}){this.#e=t.queryCache||new EO,this.#t=t.mutationCache||new kO,this.#n=t.defaultOptions||{},this.#r=new Map,this.#s=new Map,this.#o=0}mount(){this.#o++,this.#o===1&&(this.#i=ty.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#a=of.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#o--,this.#o===0&&(this.#i?.(),this.#i=void 0,this.#a?.(),this.#a=void 0)}isFetching(t){return this.#e.findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return this.#t.findAll({...t,status:"pending"}).length}getQueryData(t){const e=this.defaultQueryOptions({queryKey:t});return this.#e.get(e.queryHash)?.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=this.#e.build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(Qs(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return this.#e.findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),a=this.#e.get(r.queryHash)?.state.data,l=aO(e,a);if(l!==void 0)return this.#e.build(this,r).setData(l,{...n,manual:!0})}setQueriesData(t,e,n){return _n.batch(()=>this.#e.findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){const e=this.defaultQueryOptions({queryKey:t});return this.#e.get(e.queryHash)?.state}removeQueries(t){const e=this.#e;_n.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=this.#e;return _n.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=_n.batch(()=>this.#e.findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(mr).catch(mr)}invalidateQueries(t,e={}){return _n.batch(()=>(this.#e.findAll(t).forEach(n=>{n.invalidate()}),t?.refetchType==="none"?Promise.resolve():this.refetchQueries({...t,type:t?.refetchType??t?.type??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=_n.batch(()=>this.#e.findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let a=s.fetch(void 0,n);return n.throwOnError||(a=a.catch(mr)),s.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(r).then(mr)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=this.#e.build(this,e);return n.isStaleByTime(Qs(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(mr).catch(mr)}fetchInfiniteQuery(t){return t.behavior=Hx(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(mr).catch(mr)}ensureInfiniteQueryData(t){return t.behavior=Hx(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return of.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#n}setDefaultOptions(t){this.#n=t}setQueryDefaults(t,e){this.#r.set(ms(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...this.#r.values()],n={};return e.forEach(r=>{Il(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){this.#s.set(ms(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...this.#s.values()],n={};return e.forEach(r=>{Il(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...this.#n.queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=Wg(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===ey&&(e.enabled=!1),e}defaultMutationOptions(t){return t?._defaulted?t:{...this.#n.mutations,...t?.mutationKey&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},TO=Z.createContext(void 0),AO=({client:t,children:e})=>(Z.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),w.jsx(TO.Provider,{value:t,children:e})),Kp={exports:{}},Zp={};var Kx;function RO(){if(Kx)return Zp;Kx=1;var t=Yf().__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;return Zp.c=function(e){return t.H.useMemoCache(e)},Zp}var Zx;function OO(){return Zx||(Zx=1,Kp.exports=RO()),Kp.exports}var $e=OO();class Za{}class Ha extends Za{constructor(e,n){super(),this.collection=e,this.alias=n,this.type="collectionRef"}}class _r extends Za{constructor(e,n){super(),this.query=e,this.alias=n,this.type="queryRef"}}class Rn extends Za{constructor(e){super(),this.path=e,this.type="ref"}}class Un extends Za{constructor(e){super(),this.value=e,this.type="val"}}class vr extends Za{constructor(e,n){super(),this.name=e,this.args=n,this.type="func"}}class rk extends Za{constructor(e,n){super(),this.name=e,this.args=n,this.type="agg"}}function ry(t){return t instanceof rk||t instanceof vr||t instanceof Rn||t instanceof Un}function sy(t){return typeof t=="object"&&"expression"in t?t.expression:t}function Qx(t){return typeof t=="object"&&"expression"in t?t.expression:t}function Jx(t){return typeof t=="object"&&"expression"in t&&t.residual===!0}function IO(t){return{expression:t,residual:!0}}function NO(t,e){if(t.from.alias===e)return t.from;for(const n of t.join||[])if(n.from.alias===e)return n.from}function Nl(t,e,n){if(e.path.length!==0){if(e.path.length===1){const r=e.path[0];if(t.select){const s=t.select[r];if(s&&s.type==="ref")return Nl(t,s,n)}return{collection:n,path:[r]}}if(e.path.length>1){const[r,...s]=e.path,a=NO(t,r);return a?a.type==="queryRef"?Nl(a.query,new Rn(s),n):{collection:a.collection,path:s}:void 0}}}class tr extends Error{constructor(e){super(e),this.name="TanStackDBError"}}class Yx extends tr{constructor(e,n,r){const s=`${e==="insert"?"Insert":"Update"} validation failed: ${n.map(a=>`
- ${a.message} - path: ${a.path}`).join("")}`;super(r||s),this.name="SchemaValidationError",this.type=e,this.issues=n}}class Kl extends tr{constructor(e){super(e),this.name="CollectionConfigurationError"}}class MO extends Kl{constructor(){super("Collection requires a config")}}class DO extends Kl{constructor(){super("Collection requires a sync config")}}class LO extends Kl{constructor(){super("Schema must implement the standard-schema interface")}}class Xx extends Kl{constructor(){super("Schema validation must be synchronous")}}class Zl extends tr{constructor(e){super(e),this.name="CollectionStateError"}}class zO extends Zl{constructor(e,n){super(`Cannot perform ${e} on collection "${n}" - collection is in error state. Try calling cleanup() and restarting the collection.`)}}class jO extends Zl{constructor(e,n,r){super(`Invalid collection status transition from "${e}" to "${n}" for collection "${r}"`)}}class PO extends Zl{constructor(){super("Collection is in error state")}}class BO extends Zl{constructor(){super("Active subscribers count is negative - this should never happen")}}class $r extends tr{constructor(e){super(e),this.name="CollectionOperationError"}}class UO extends $r{constructor(e){super(`An object was created without a defined key: ${JSON.stringify(e)}`)}}class $O extends $r{constructor(e,n){const r=e===null?"null":typeof e;super(`getKey returned an invalid key type. Expected string or number, but got ${r}: ${JSON.stringify(e)}. Item: ${JSON.stringify(n)}`)}}class qO extends $r{constructor(e){super(`Cannot insert document with ID "${e}" because it already exists in the collection`)}}class FO extends $r{constructor(e,n,r){const s=`Cannot insert document with key "${e}" from sync because it already exists in the collection "${n}"`;r?.hasCustomGetKey&&r.hasJoins?super(`${s}. This collection uses a custom getKey with joined queries. Joined queries can produce multiple rows with the same key when relationships are not 1:1. Consider: (1) using a composite key in your getKey function (e.g., \`\${item.key1}-\${item.key2}\`), (2) ensuring your join produces unique rows per key, or (3) removing the custom getKey to use the default composite key behavior.`):super(s)}}class VO extends $r{constructor(){super("The first argument to update is missing")}}class HO extends $r{constructor(){super("No keys were passed to update")}}class GO extends $r{constructor(e){super(`The key "${e}" was passed to update but an object for this key was not found in the collection`)}}class KO extends $r{constructor(e,n){super(`Updating the key of an item is not allowed. Original key: "${e}", Attempted new key: "${n}". Please delete the old item and create a new one if a key change is necessary.`)}}class ZO extends $r{constructor(){super("No keys were passed to delete")}}class QO extends $r{constructor(e){super(`Collection.delete was called with key '${e}' but there is no item in the collection with this key`)}}class iy extends tr{constructor(e){super(e),this.name="MissingHandlerError"}}class JO extends iy{constructor(){super("Collection.insert called directly (not within an explicit transaction) but no 'onInsert' handler is configured.")}}class YO extends iy{constructor(){super("Collection.update called directly (not within an explicit transaction) but no 'onUpdate' handler is configured.")}}class XO extends iy{constructor(){super("Collection.delete called directly (not within an explicit transaction) but no 'onDelete' handler is configured.")}}class Ys extends tr{constructor(e){super(e),this.name="TransactionError"}}class WO extends Ys{constructor(){super("mutationFn is required when creating a transaction")}}class eI extends Ys{constructor(){super("You can no longer call .mutate() as the transaction is no longer pending")}}class tI extends Ys{constructor(){super("You can no longer call .rollback() as the transaction is already completed")}}class nI extends Ys{constructor(){super("You can no longer call .commit() as the transaction is no longer pending")}}class Wx extends Ys{constructor(){super("No pending sync transaction to write to")}}class ew extends Ys{constructor(){super("The pending sync transaction is already committed, you can't still write to it.")}}class rI extends Ys{constructor(){super("No pending sync transaction to commit")}}class sI extends Ys{constructor(){super("The pending sync transaction is already committed, you can't commit it again.")}}class Qa extends tr{constructor(e){super(e),this.name="QueryBuilderError"}}class iI extends Qa{constructor(e){super(`Only one source is allowed in the ${e}`)}}class aI extends Qa{constructor(e){super(`A sub query passed to a ${e} must have a from clause itself`)}}class oI extends Qa{constructor(e){super(`Invalid source for live query: The value provided for alias "${e}" is not a Collection or subquery. Live queries only accept Collection instances or subqueries. Please ensure you're passing a valid Collection or QueryBuilder, not a plain array or other data type.`)}}class wu extends Qa{constructor(e,n){super(`Invalid source for ${e}: Expected an object with a single key-value pair like { alias: collection }. For example: .from({ todos: todosCollection }). Got: ${n}`)}}class lI extends Qa{constructor(){super("Join condition must be an equality expression")}}class cI extends Qa{constructor(){super("Query must have a from clause")}}class nr extends tr{constructor(e){super(e),this.name="QueryCompilationError"}}class uI extends nr{constructor(){super("DISTINCT requires a SELECT clause.")}}class fI extends nr{constructor(){super("HAVING clause requires GROUP BY clause")}}class hI extends nr{constructor(){super("LIMIT and OFFSET require an ORDER BY clause to ensure deterministic results")}}class sk extends nr{constructor(e,n,r){const s=n?`alias "${e}" (collection "${n}")`:`collection "${e}"`,a=r?.length?`. Available keys: ${r.join(", ")}`:"";super(`Input for ${s} not found in inputs map${a}`)}}class dI extends nr{constructor(e,n){super(`Subquery uses alias "${e}" which is already used in the parent query. Each alias must be unique across parent and subquery contexts. Parent query aliases: ${n.join(", ")}. Please rename "${e}" in either the parent query or subquery to avoid conflicts.`)}}class pI extends nr{constructor(e){super(`Unsupported FROM type: ${e}`)}}class mI extends nr{constructor(e){super(`Unknown expression type: ${e}`)}}class gI extends nr{constructor(){super("Reference path cannot be empty")}}class yI extends nr{constructor(e){super(`Unknown function: ${e}`)}}class tw extends nr{constructor(e){super(`Collection "${e}" not found during compilation of join`)}}class Li extends tr{constructor(e){super(e),this.name="JoinError"}}class _I extends Li{constructor(e){super(`Unsupported join type: ${e}`)}}class bI extends Li{constructor(e){super(`Invalid join condition: both expressions refer to the same source "${e}"`)}}class vI extends Li{constructor(){super("Invalid join condition: expressions must reference source aliases")}}class xI extends Li{constructor(e){super(`Invalid join condition: left expression refers to an unavailable source "${e}"`)}}class wI extends Li{constructor(e){super(`Invalid join condition: right expression does not refer to the joined source "${e}"`)}}class SI extends Li{constructor(){super("Invalid join condition")}}class kI extends Li{constructor(e){super(`Unsupported join source type: ${e}`)}}class Xf extends tr{constructor(e){super(e),this.name="GroupByError"}}class EI extends Xf{constructor(e){super(`Non-aggregate expression '${e}' in SELECT must also appear in GROUP BY clause`)}}class CI extends Xf{constructor(e){super(`Unsupported aggregate function: ${e}`)}}class TI extends Xf{constructor(e){super(`Aggregate function in HAVING clause must also be in SELECT clause: ${e}`)}}class AI extends Xf{constructor(e){super(`Unknown expression type in HAVING clause: ${e}`)}}class nw extends tr{constructor(e,n){const r=n instanceof Error?n.message:String(n);super(`Collection "${e}" sync cleanup function threw an error: ${r}`),this.name="SyncCleanupError"}}class RI extends tr{constructor(e){super(e),this.name="QueryOptimizerError"}}class OI extends RI{constructor(){super("Cannot combine empty expression list")}}class II extends nr{constructor(e,n,r,s){super(`Internal error: subscription for alias '${e}' (remapped from '${n}', collection '${r}') is missing in join pipeline. Available aliases: ${s.join(", ")}. This indicates a bug in alias tracking.`)}}class NI extends nr{constructor(e){super(`Internal error: compiler returned aliases without inputs: ${e.join(", ")}. This indicates a bug in query compilation. Please report this issue.`)}}class MI extends nr{constructor(){super("setWindow() can only be called on collections with an ORDER BY clause. Add .orderBy() to your query to enable window movement.")}}const Qp=new WeakMap;let DI=1;function rw(t){if(Qp.has(t))return Qp.get(t);const e=DI++;return Qp.set(t,e),e}const ay=(t,e,n)=>{const{nulls:r}=n;if(t==null&&e==null)return 0;if(t==null)return r==="first"?-1:1;if(e==null)return r==="first"?1:-1;if(typeof t=="string"&&typeof e=="string"&&n.stringSort==="locale")return t.localeCompare(e,n.locale,n.localeOptions);if(Array.isArray(t)&&Array.isArray(e)){for(let l=0;l<Math.min(t.length,e.length);l++){const u=ay(t[l],e[l],n);if(u!==0)return u}return t.length-e.length}if(t instanceof Date&&e instanceof Date)return t.getTime()-e.getTime();const s=typeof t=="object",a=typeof e=="object";if(s||a){if(s&&a){const l=rw(t),u=rw(e);return l-u}if(s)return 1;if(a)return-1}return t<e?-1:t>e?1:0},LI=(t,e,n)=>ay(e,t,{...n,nulls:n.nulls==="first"?"last":"first"});function lf(t){return(e,n)=>t.direction==="asc"?ay(e,n,t):LI(e,n,t)}const Km=lf({direction:"asc",nulls:"first",stringSort:"locale"});function zI(t,e){if(t.byteLength!==e.byteLength)return!1;for(let n=0;n<t.byteLength;n++)if(t[n]!==e[n])return!1;return!0}const jI=128;function ds(t){return t instanceof Date?t.getTime():(typeof Buffer<"u"&&t instanceof Buffer||t instanceof Uint8Array)&&t.byteLength<=jI?`__u8__${Array.from(t).join(",")}`:t}function PI(t,e){if(t===e)return!0;const n=typeof Buffer<"u"&&t instanceof Buffer||t instanceof Uint8Array,r=typeof Buffer<"u"&&e instanceof Buffer||e instanceof Uint8Array;return n&&r?zI(t,e):!1}function Yt(t){return t==null}function Ba(t){return t===!0}function $n(t,e=!1){return ly(t,e)}function oy(t){return ly(t,!0)}function ly(t,e){switch(t.type){case"val":{const n=t.value;return()=>n}case"ref":return e?UI(t):BI(t);case"func":return $I(t,e);default:throw new mI(t.type)}}function BI(t){const[e,...n]=t.path;if(!e)throw new gI;if(n.length===0)return r=>r[e];if(n.length===1){const r=n[0];return s=>s[e]?.[r]}else return r=>{const s=r[e];if(s===void 0)return;let a=s;for(const l of n){if(a==null)return a;a=a[l]}return a}}function UI(t){const e=t.path;return n=>{let r=n;for(const s of e){if(r==null)return r;r=r[s]}return r}}function $I(t,e){const n=t.args.map(r=>ly(r,e));switch(t.name){case"eq":{const r=n[0],s=n[1];return a=>{const l=ds(r(a)),u=ds(s(a));return Yt(l)||Yt(u)?null:PI(l,u)}}case"gt":{const r=n[0],s=n[1];return a=>{const l=r(a),u=s(a);return Yt(l)||Yt(u)?null:l>u}}case"gte":{const r=n[0],s=n[1];return a=>{const l=r(a),u=s(a);return Yt(l)||Yt(u)?null:l>=u}}case"lt":{const r=n[0],s=n[1];return a=>{const l=r(a),u=s(a);return Yt(l)||Yt(u)?null:l<u}}case"lte":{const r=n[0],s=n[1];return a=>{const l=r(a),u=s(a);return Yt(l)||Yt(u)?null:l<=u}}case"and":return r=>{let s=!1;for(const a of n){const l=a(r);if(l===!1)return!1;Yt(l)&&(s=!0)}return s?null:!0};case"or":return r=>{let s=!1;for(const a of n){const l=a(r);if(l===!0)return!0;Yt(l)&&(s=!0)}return s?null:!1};case"not":{const r=n[0];return s=>{const a=r(s);return Yt(a)?null:!a}}case"in":{const r=n[0],s=n[1];return a=>{const l=r(a),u=s(a);return Yt(l)?null:Array.isArray(u)?u.includes(l):!1}}case"like":{const r=n[0],s=n[1];return a=>{const l=r(a),u=s(a);return Yt(l)||Yt(u)?null:sw(l,u,!1)}}case"ilike":{const r=n[0],s=n[1];return a=>{const l=r(a),u=s(a);return Yt(l)||Yt(u)?null:sw(l,u,!0)}}case"upper":{const r=n[0];return s=>{const a=r(s);return typeof a=="string"?a.toUpperCase():a}}case"lower":{const r=n[0];return s=>{const a=r(s);return typeof a=="string"?a.toLowerCase():a}}case"length":{const r=n[0];return s=>{const a=r(s);return typeof a=="string"||Array.isArray(a)?a.length:0}}case"concat":return r=>n.map(s=>{const a=s(r);try{return String(a??"")}catch{try{return JSON.stringify(a)||""}catch{return"[object]"}}}).join("");case"coalesce":return r=>{for(const s of n){const a=s(r);if(a!=null)return a}return null};case"add":{const r=n[0],s=n[1];return a=>{const l=r(a),u=s(a);return(l??0)+(u??0)}}case"subtract":{const r=n[0],s=n[1];return a=>{const l=r(a),u=s(a);return(l??0)-(u??0)}}case"multiply":{const r=n[0],s=n[1];return a=>{const l=r(a),u=s(a);return(l??0)*(u??0)}}case"divide":{const r=n[0],s=n[1];return a=>{const l=r(a),f=s(a)??0;return f!==0?(l??0)/f:null}}case"isUndefined":{const r=n[0];return s=>r(s)===void 0}case"isNull":{const r=n[0];return s=>r(s)===null}default:throw new yI(t.name)}}function sw(t,e,n){if(typeof t!="string"||typeof e!="string")return!1;const r=n?t.toLowerCase():t;let a=(n?e.toLowerCase():e).replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return a=a.replace(/%/g,".*"),a=a.replace(/_/g,"."),new RegExp(`^${a}$`).test(r)}function Tr(t,e){return Fu(t,e,new Map)}function Fu(t,e,n){if(t===e)return!0;if(t==null||e==null||typeof t!=typeof e)return!1;if(t instanceof Date)return e instanceof Date?t.getTime()===e.getTime():!1;if(t instanceof RegExp)return e instanceof RegExp?t.source===e.source&&t.flags===e.flags:!1;if(t instanceof Map){if(!(e instanceof Map)||t.size!==e.size)return!1;if(n.has(t))return n.get(t)===e;n.set(t,e);const s=Array.from(t.entries()).every(([a,l])=>e.has(a)&&Fu(l,e.get(a),n));return n.delete(t),s}if(t instanceof Set){if(!(e instanceof Set)||t.size!==e.size)return!1;if(n.has(t))return n.get(t)===e;n.set(t,e);const r=Array.from(t),s=Array.from(e);if(r.every(l=>typeof l!="object"))return n.delete(t),r.every(l=>e.has(l));const a=r.length===s.length;return n.delete(t),a}if(ArrayBuffer.isView(t)&&ArrayBuffer.isView(e)&&!(t instanceof DataView)&&!(e instanceof DataView)){const r=t,s=e;if(r.length!==s.length)return!1;for(let a=0;a<r.length;a++)if(r[a]!==s[a])return!1;return!0}if(cf(t)&&cf(e)){const r=Zm(t),s=Zm(e);return r!==s?!1:typeof t.equals=="function"?t.equals(e):t.toString()===e.toString()}if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;if(n.has(t))return n.get(t)===e;n.set(t,e);const r=t.every((s,a)=>Fu(s,e[a],n));return n.delete(t),r}if(typeof t=="object"){if(n.has(t))return n.get(t)===e;n.set(t,e);const r=Object.keys(t),s=Object.keys(e);if(r.length!==s.length)return n.delete(t),!1;const a=r.every(l=>l in e&&Fu(t[l],e[l],n));return n.delete(t),a}return!1}const qI=["Temporal.Duration","Temporal.Instant","Temporal.PlainDate","Temporal.PlainDateTime","Temporal.PlainMonthDay","Temporal.PlainTime","Temporal.PlainYearMonth","Temporal.ZonedDateTime"];function Zm(t){return t[Symbol.toStringTag]}function cf(t){const e=Zm(t);return typeof e=="string"&&qI.includes(e)}const cy={direction:"asc",nulls:"first",stringSort:"locale"};class FI{constructor(e){this.originalIndex=e}lookup(e,n){const r=e==="gt"?"lt":e==="gte"?"lte":e==="lt"?"gt":e==="lte"?"gte":e;return this.originalIndex.lookup(r,n)}rangeQuery(e={}){return this.originalIndex.rangeQueryReversed(e)}rangeQueryReversed(e={}){return this.originalIndex.rangeQuery(e)}take(e,n,r){return this.originalIndex.takeReversed(e,n,r)}takeReversed(e,n,r){return this.originalIndex.take(e,n,r)}get orderedEntriesArray(){return this.originalIndex.orderedEntriesArrayReversed}get orderedEntriesArrayReversed(){return this.originalIndex.orderedEntriesArray}supports(e){return this.originalIndex.supports(e)}matchesField(e){return this.originalIndex.matchesField(e)}matchesCompareOptions(e){return this.originalIndex.matchesCompareOptions(e)}matchesDirection(e){return this.originalIndex.matchesDirection(e)}getStats(){return this.originalIndex.getStats()}add(e,n){this.originalIndex.add(e,n)}remove(e,n){this.originalIndex.remove(e,n)}update(e,n,r){this.originalIndex.update(e,n,r)}build(e){this.originalIndex.build(e)}clear(){this.originalIndex.clear()}get keyCount(){return this.originalIndex.keyCount}equalityLookup(e){return this.originalIndex.equalityLookup(e)}inArrayLookup(e){return this.originalIndex.inArrayLookup(e)}get indexedKeysSet(){return this.originalIndex.indexedKeysSet}get valueMapData(){return this.originalIndex.valueMapData}}function Ql(t,e,n){const r=n??{...cy,...t.compareOptions};for(const s of t.indexes.values())if(s.matchesField(e)&&s.matchesCompareOptions(r))return s.matchesDirection(r.direction)?s:new FI(s)}function VI(t){if(t.length===0)return new Set;if(t.length===1)return new Set(t[0]);let e=new Set(t[0]);for(let n=1;n<t.length;n++){const r=new Set;for(const s of e)t[n].has(s)&&r.add(s);e=r}return e}function HI(t){const e=new Set;for(const n of t)for(const r of n)e.add(r);return e}function GI(t,e){return uy(t,e)}function uy(t,e){if(t.type==="func")switch(t.name){case"eq":case"gt":case"gte":case"lt":case"lte":return ZI(t,e);case"and":return QI(t,e);case"or":return JI(t,e);case"in":return YI(t,e)}return{canOptimize:!1,matchingKeys:new Set}}function KI(t,e){if(t.type!=="func"||t.args.length<2)return{canOptimize:!1,matchingKeys:new Set};const n=new Map;for(const r of t.args)if(r.type==="func"&&["gt","gte","lt","lte"].includes(r.name)){const s=r;if(s.args.length===2){const a=s.args[0],l=s.args[1];let u=null,f=null,h=s.name;if(a.type==="ref"&&l.type==="val")u=a,f=l;else if(a.type==="val"&&l.type==="ref")switch(u=l,f=a,h){case"gt":h="lt";break;case"gte":h="lte";break;case"lt":h="gt";break;case"lte":h="gte";break}if(u&&f){const p=u.path.join("."),_=f.value;n.has(p)||n.set(p,[]),n.get(p).push({operation:h,value:_})}}}for(const[r,s]of n)if(s.length>=2){const a=r.split("."),l=Ql(e,a);if(l&&l.supports("gt")&&l.supports("lt")){let u,f,h=!0,m=!0;for(const{operation:_,value:g}of s)switch(_){case"gt":(u===void 0||g>u)&&(u=g,h=!1);break;case"gte":(u===void 0||g>u)&&(u=g,h=!0);break;case"lt":(f===void 0||g<f)&&(f=g,m=!1);break;case"lte":(f===void 0||g<f)&&(f=g,m=!0);break}return{canOptimize:!0,matchingKeys:l.rangeQuery({from:u,to:f,fromInclusive:h,toInclusive:m})}}}return{canOptimize:!1,matchingKeys:new Set}}function ZI(t,e){if(t.type!=="func"||t.args.length!==2)return{canOptimize:!1,matchingKeys:new Set};const n=t.args[0],r=t.args[1];let s=null,a=null,l=t.name;if(n.type==="ref"&&r.type==="val")s=n,a=r;else if(n.type==="val"&&r.type==="ref")switch(s=r,a=n,l){case"gt":l="lt";break;case"gte":l="lte";break;case"lt":l="gt";break;case"lte":l="gte";break}if(s&&a){const u=s.path,f=Ql(e,u);if(f){const h=a.value,m=l;return f.supports(m)?{canOptimize:!0,matchingKeys:f.lookup(m,h)}:{canOptimize:!1,matchingKeys:new Set}}}return{canOptimize:!1,matchingKeys:new Set}}function QI(t,e){if(t.type!=="func"||t.args.length<2)return{canOptimize:!1,matchingKeys:new Set};const n=KI(t,e);if(n.canOptimize)return n;const r=[];for(const s of t.args){const a=uy(s,e);a.canOptimize&&r.push(a)}if(r.length>0){const s=r.map(l=>l.matchingKeys);return{canOptimize:!0,matchingKeys:VI(s)}}return{canOptimize:!1,matchingKeys:new Set}}function JI(t,e){if(t.type!=="func"||t.args.length<2)return{canOptimize:!1,matchingKeys:new Set};const n=[];for(const r of t.args){const s=uy(r,e);s.canOptimize&&n.push(s)}if(n.length>0){const r=n.map(a=>a.matchingKeys);return{canOptimize:!0,matchingKeys:HI(r)}}return{canOptimize:!1,matchingKeys:new Set}}function YI(t,e){if(t.type!=="func"||t.args.length!==2)return{canOptimize:!1,matchingKeys:new Set};const n=t.args[0],r=t.args[1];if(n.type==="ref"&&r.type==="val"&&Array.isArray(r.value)){const s=n.path,a=r.value,l=Ql(e,s);if(l){if(l.supports("in"))return{canOptimize:!0,matchingKeys:l.lookup("in",a)};if(l.supports("eq")){const u=new Set;for(const f of a){const h=l.lookup("eq",f);for(const m of h)u.add(m)}return{canOptimize:!0,matchingKeys:u}}}}return{canOptimize:!1,matchingKeys:new Set}}class XI extends Map{constructor(e,n){super(n),this.defaultValue=e}get(e){return this.has(e)?super.get(e):this.defaultValue()}update(e,n){const r=this.get(e),s=n(r);return this.set(e,s),s}}const Jp=3e4;function Yp(t,e){if(e.length<=Jp)t.push(...e);else for(let n=0;n<e.length;n+=Jp){const r=e.slice(n,n+Jp);t.push(...r)}}function WI(t,e,n){let r=0,s=t.length;for(;r<s;){const a=Math.floor((r+s)/2),l=n(t[a],e);if(l<0)r=a+1;else if(l>0)s=a;else return a}return r}class eN{constructor(){this.objectIds=new WeakMap,this.nextId=0}getId(e){if(typeof e!="object"||e===null){const n=String(e);let r=0;for(let s=0;s<n.length;s++){const a=n.charCodeAt(s);r=(r<<5)-r+a,r=r&r}return r}return this.objectIds.has(e)||this.objectIds.set(e,this.nextId++),this.objectIds.get(e)}getStringId(e){return e===null?"null":e===void 0?"undefined":typeof e!="object"?`str_${String(e)}`:`obj_${this.getId(e)}`}}const Xp=new eN;function tN(t,e){const[n,r]=t,[s,a]=e,l=[...Su(n,Math.min(r,s)),...Su(Math.max(n,a),r)],u=[...Su(s,Math.min(a,n)),...Su(Math.max(s,r),a)];return{onlyInA:l,onlyInB:u}}function Su(t,e){const n=[];for(let r=t;r<e;r++)n.push(r);return n}function uf(t,e){return typeof t==typeof e?t<e?-1:t>e?1:0:typeof t=="string"?-1:1}const nN=hn(),rN=hn(),sN=hn(),iN=hn(),aN=hn();function hn(){return Math.random()*(2**31-1)>>>0}const ik=new ArrayBuffer(8),oN=new DataView(ik),qs=new Uint8Array(ik);class Wf{constructor(){this.hash=nN,this.length=0,this.carry=0,this.carryBytes=0}_mix(e){e=Math.imul(e,3432918353),e=e<<15|e>>>17,e=Math.imul(e,461845907),this.hash^=e,this.hash=this.hash<<13|this.hash>>>19,this.hash=Math.imul(this.hash,5)+3864292196}writeByte(e){this.carry|=(e&255)<<8*this.carryBytes,this.carryBytes++,this.length++,this.carryBytes===4&&(this._mix(this.carry>>>0),this.carry=0,this.carryBytes=0)}update(e){switch(typeof e){case"symbol":{this.update(aN);const n=e.description;if(!n)return;for(let r=0;r<n.length;r++){const s=n.charCodeAt(r);this.writeByte(s&255),this.writeByte(s>>>8&255)}return}case"string":this.update(rN);for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);this.writeByte(r&255),this.writeByte(r>>>8&255)}return;case"number":oN.setFloat64(0,e,!0),this.writeByte(qs[0]),this.writeByte(qs[1]),this.writeByte(qs[2]),this.writeByte(qs[3]),this.writeByte(qs[4]),this.writeByte(qs[5]),this.writeByte(qs[6]),this.writeByte(qs[7]);return;case"bigint":{let n=e;for(n<0n?(n=-n,this.update(iN)):this.update(sN);n>0n;)this.writeByte(Number(n&0xffn)),n>>=8n;e===0n&&this.writeByte(0);return}default:throw new TypeError(`Unsupported input type: ${typeof e}`)}}digest(){if(this.carryBytes>0){let e=this.carry>>>0;e=Math.imul(e,3432918353),e=e<<15|e>>>17,e=Math.imul(e,461845907),this.hash^=e}return this.hash^=this.length,this.hash^=this.hash>>>16,this.hash=Math.imul(this.hash,2246822507),this.hash^=this.hash>>>13,this.hash=Math.imul(this.hash,3266489909),this.hash^=this.hash>>>16,this.hash>>>0}}const lN=hn(),cN=hn(),uN=hn(),fN=hn(),hN=hn(),dN=hn(),pN=hn(),mN=hn(),gN=hn(),yN=hn(),_N=hn(),bN=hn(),vN=128,Ml=new WeakMap;function Cn(t){const e=new Wf;return ak(e,t),e.digest()}function xN(t){const e=Ml.get(t);if(e!==void 0)return e;let n;if(t instanceof Date)n=wN(t);else if(typeof Buffer<"u"&&t instanceof Buffer||t instanceof Uint8Array)if(t.byteLength<=vN)n=SN(t);else return Qm(t);else{if(t instanceof File)return Qm(t);{let r=t,s=mN;t instanceof Array&&(s=gN),t instanceof Map&&(s=yN,r=[...t.entries()]),t instanceof Set&&(s=_N,r=[...t.entries()]),n=kN(r,s)}}return Ml.set(t,n),n}function wN(t){const e=new Wf;return e.update(pN),e.update(t.getTime()),e.digest()}function SN(t){const e=new Wf;e.update(bN),e.update(t.byteLength);for(let n=0;n<t.byteLength;n++)e.writeByte(t[n]);return e.digest()}function kN(t,e){const n=new Wf;n.update(e);const r=Object.keys(t);r.sort(CN);for(const s of r)n.update(hN),n.update(s),ak(n,t[s]);return n.digest()}function ak(t,e){if(e===null){t.update(uN);return}switch(typeof e){case"undefined":t.update(fN);return;case"boolean":t.update(e?lN:cN);return;case"number":t.update(isNaN(e)?NaN:e===0?0:e);return;case"bigint":case"string":case"symbol":t.update(e);return;case"object":t.update(EN(e));return;case"function":t.update(Qm(e));return;default:console.warn(`Ignored input during hashing because it is of type ${typeof e} which is not supported`)}}function EN(t){let e=Ml.get(t);return e===void 0&&(e=xN(t)),e}let iw=1;function Qm(t){let e=Ml.get(t);return e===void 0&&(e=iw^dN,iw++,Ml.set(t,e)),e}function CN(t,e){return t.localeCompare(e)}class Vt{#e;constructor(e=[]){this.#e=e}toString(e=!1){return`MultiSet(${JSON.stringify(this.#e,null,e?2:void 0)})`}toJSON(){return JSON.stringify(Array.from(this.getInner()))}static fromJSON(e){return new Vt(JSON.parse(e))}map(e){return new Vt(this.#e.map(([n,r])=>[e(n),r]))}filter(e){return new Vt(this.#e.filter(([n,r])=>e(n)))}negate(){return new Vt(this.#e.map(([e,n])=>[e,-n]))}concat(e){const n=[];return Yp(n,this.#e),Yp(n,e.getInner()),new Vt(n)}consolidate(){if(this.#e.length>0){const e=this.#e[0]?.[0];if(Array.isArray(e)&&e.length===2)return this.#t()}return this.#n()}#t(){const e=new Map,n=new Map,r=a=>{if(a.length!==2)throw new Error("Expected tuple of length 2");const[l,u]=a;return`${Xp.getStringId(l)}|${Xp.getStringId(u)}`};for(const[a,l]of this.#e){if(!Array.isArray(a)||a.length!==2)return this.#n();const[u,f]=a;if(typeof u!="string"&&typeof u!="number")return this.#n();let h;Array.isArray(f)&&f.length===2?h=r(f):h=Xp.getStringId(f);const m=u+"|"+h;e.set(m,(e.get(m)||0)+l),n.has(m)||n.set(m,a)}const s=[];for(const[a,l]of e)l!==0&&s.push([n.get(a),l]);return new Vt(s)}#n(){const e=new XI(()=>0),n=new Map;let r=!1,s=!1,a=!1;for(const[f,h]of this.#e)if(typeof f=="string")r=!0;else if(typeof f=="number")s=!0;else{a=!0;break}const l=a||r&&s;for(const[f,h]of this.#e){const m=l?Cn(f):f;l&&!n.has(m)&&n.set(m,f),e.update(m,p=>p+h)}const u=[];for(const[f,h]of e.entries())if(h!==0){const m=l?n.get(f):f;u.push([m,h])}return new Vt(u)}extend(e){const n=e instanceof Vt?e.getInner():e;Yp(this.#e,n)}add(e,n){n!==0&&this.#e.push([e,n])}getInner(){return this.#e}}class TN{#e;constructor(e){this.#e=e}drain(){const e=[...this.#e].reverse();return this.#e.length=0,e}isEmpty(){return this.#e.length===0}}class qr{#e=[];sendData(e){e instanceof Vt||(e=new Vt(e));for(const n of this.#e)n.unshift(e)}newReader(){const e=[];return this.#e.push(e),new TN(e)}}class ok{constructor(e,n,r){this.id=e,this.inputs=n,this.output=r}hasPendingWork(){return this.inputs.some(e=>!e.isEmpty())}}class Ja extends ok{constructor(e,n,r){super(e,[n],r),this.id=e}inputMessages(){return this.inputs[0].drain()}}class AN extends ok{constructor(e,n,r,s){super(e,[n,r],s),this.id=e}inputAMessages(){return this.inputs[0].drain()}inputBMessages(){return this.inputs[1].drain()}}class fy extends Ja{run(){for(const e of this.inputMessages())this.output.sendData(this.inner(e))}}class RN{#e=[];#t=0;#n=!1;constructor(){}#r(){if(this.#n)throw new Error("Graph already finalized")}getNextOperatorId(){return this.#r(),this.#t++}newInput(){this.#r();const e=new qr;return new ON(this,e)}addOperator(e){this.#r(),this.#e.push(e)}finalize(){this.#r(),this.#n=!0}step(){if(!this.#n)throw new Error("Graph not finalized");for(const e of this.#e)e.run()}pendingWork(){return this.#e.some(e=>e.hasPendingWork())}run(){for(;this.pendingWork();)this.step()}}class Fr{#e;#t;constructor(e,n){this.#e=e,this.#t=n}connectReader(){return this.#t.newReader()}get writer(){return this.#t}get graph(){return this.#e}pipe(...e){return e.reduce((n,r)=>r(n),this)}}class ON extends Fr{sendData(e){this.writer.sendData(e)}}class IN extends fy{#e;constructor(e,n,r,s){super(e,n,r),this.#e=s}inner(e){return e.map(this.#e)}}function Tn(t){return e=>{const n=new Fr(e.graph,new qr),r=new IN(e.graph.getNextOperatorId(),e.connectReader(),n.writer,t);return e.graph.addOperator(r),n}}const sl=Symbol("NO_PREFIX");class aw extends Map{addValue(e,n){if(n===0)return this.size===0;const r=bl(e),s=this.get(r);if(Vu(s)){const[a,l]=s;if(bl(a)!==r)throw new Error("Mismatching prefixes, this should never happen");if(a===e||Cn(a)===Cn(e)){const f=l+n;f===0?this.delete(r):this.set(r,[e,f])}else{const f=new il;f.set(Cn(a),s),f.set(Cn(e),[e,n]),this.set(r,f)}}else s===void 0?this.set(r,[e,n]):s.addValue(e,n)&&this.delete(r);return this.size===0}}class il extends Map{addValue(e,n){if(n===0)return this.size===0;const r=Cn(e),s=this.get(r);if(s){const[,a]=s,l=a+n;l===0?this.delete(r):this.set(r,[e,l])}else this.set(r,[e,n]);return this.size===0}}class Ks{#e;#t=new Map;constructor(){this.#e=new Map}static fromMultiSets(e){const n=new Ks;for(const r of e)for(const[s,a]of r.getInner()){const[l,u]=s;n.addValue(l,[u,a])}return n}toString(e=!1){return`Index(${JSON.stringify([...this.entries()],void 0,e?2:void 0)})`}get size(){return this.#e.size}has(e){return this.#e.has(e)}hasPresence(e){return(this.#t.get(e)||0)!==0}getConsolidatedMultiplicity(e){return this.#t.get(e)||0}getPresenceKeys(){return this.#t.keys()}get(e){return[...this.getIterator(e)]}*getIterator(e){const n=this.#e.get(e);if(Vu(n))yield n;else{if(n===void 0)return;if(n instanceof il)for(const r of n.values())yield r;else for(const r of n.values())if(Vu(r))yield r;else for(const s of r.values())yield s}}*entries(){for(const e of this.#e.keys())for(const n of this.getIterator(e))yield[e,n]}*entriesIterators(){for(const e of this.#e.keys())yield[e,this.getIterator(e)]}addValue(e,n){const[r,s]=n;if(s===0)return;const a=(this.#t.get(e)||0)+s;a===0?this.#t.delete(e):this.#t.set(e,a);const l=this.#e.get(e);if(l===void 0){this.#e.set(e,n);return}if(Vu(l)){this.#n(e,l,r,s);return}if(l instanceof il){const u=bl(r);if(u!==sl){const f=new aw;f.set(sl,l),f.set(u,n),this.#e.set(e,f)}else l.addValue(r,s)&&this.#e.delete(e)}else l.addValue(r,s)&&this.#e.delete(e)}#n(e,n,r,s){const[a,l]=n;if(a===r){const h=l+s;h===0?this.#e.delete(e):this.#e.set(e,[r,h]);return}const u=bl(r),f=bl(a);if(f===u&&(a===r||Cn(a)===Cn(r))){const h=l+s;h===0?this.#e.delete(e):this.#e.set(e,[r,h]);return}if(f===sl&&u===sl){const h=new il;h.set(Cn(a),n),h.set(Cn(r),[r,s]),this.#e.set(e,h)}else{const h=new aw;if(f===u){const m=new il;m.set(Cn(a),n),m.set(Cn(r),[r,s]),h.set(f,m)}else h.set(f,n),h.set(u,[r,s]);this.#e.set(e,h)}}append(e){for(const[n,r]of e.entries())this.addValue(n,r)}join(e){const n=[];if(this.size<=e.size)for(const[r,s]of this.entriesIterators()){if(!e.has(r))continue;const a=e.get(r);for(const[l,u]of s)for(const[f,h]of a)u!==0&&h!==0&&n.push([[r,[l,f]],u*h])}else for(const[r,s]of e.entriesIterators()){if(!this.has(r))continue;const a=this.get(r);for(const[l,u]of s)for(const[f,h]of a)h!==0&&u!==0&&n.push([[r,[f,l]],h*u])}return new Vt(n)}}function bl(t){return Array.isArray(t)&&(typeof t[0]=="string"||typeof t[0]=="number"||typeof t[0]=="bigint")?t[0]:sl}function Vu(t){return Array.isArray(t)}class NN extends Ja{#e=new Ks;#t=new Ks;#n;constructor(e,n,r,s){super(e,n,r),this.#n=s}run(){const e=new Set;for(const r of this.inputMessages())for(const[s,a]of r.getInner()){const[l,u]=s;this.#e.addValue(l,[u,a]),e.add(l)}const n=[];for(const r of e){const s=this.#e.get(r),a=this.#t.get(r),l=this.#n(s),u=new Map,f=new Map;for(const[h,m]of l){const p=u.get(h)??0;u.set(h,p+m)}for(const[h,m]of a){const p=f.get(h)??0;f.set(h,p+m)}for(const[h,m]of f)u.has(h)||(n.push([[r,h],-m]),this.#t.addValue(r,[h,-m]));for(const[h,m]of u)f.has(h)||m!==0&&(n.push([[r,h],m]),this.#t.addValue(r,[h,m]));for(const[h,m]of u){const p=f.get(h);if(p!==void 0){const _=m-p;_!==0&&(n.push([[r,h],_]),this.#t.addValue(r,[h,_]))}}}n.length>0&&this.output.sendData(new Vt(n))}}function MN(t){return e=>{const n=new Fr(e.graph,new qr),r=new NN(e.graph.getNextOperatorId(),e.connectReader(),n.writer,t);return e.graph.addOperator(r),n}}function ow(t){return"pipe"in t}function lw(t,e={}){const n=Object.fromEntries(Object.entries(e).filter(([r,s])=>!ow(s)));return Object.fromEntries(Object.entries(e).filter(([r,s])=>ow(s))),r=>{const s="__original_key__";return r.pipe(Tn(u=>{const f=t(u),h=JSON.stringify(f),m={};m[s]=f;for(const[p,_]of Object.entries(n))m[p]=_.preMap(u);return[h,m]})).pipe(MN(u=>{let f=0;for(const[p,_]of u)f+=_;if(f<=0)return[];const h={},m=u[0]?.[0]?.[s];h[s]=m;for(const[p,_]of Object.entries(n)){const g=u.map(([v,x])=>[v[p],x]);h[p]=_.reduce(g)}return[[h,1]]})).pipe(Tn(([u,f])=>{const h=f[s],m={};Object.assign(m,h);for(const[p,_]of Object.entries(n))_.postMap?m[p]=_.postMap(f[p]):m[p]=f[p];return[u,m]}))}}function DN(t=e=>e){return{preMap:e=>t(e),reduce:e=>{let n=0;for(const[r,s]of e)n+=r*s;return n}}}function LN(t=e=>e){return{preMap:e=>t(e)==null?0:1,reduce:e=>{let n=0;for(const[r,s]of e)n+=r*s;return n}}}function zN(t=e=>e){return{preMap:e=>({sum:t(e),count:0}),reduce:e=>{let n=0,r=0;for(const[s,a]of e)n+=s.sum*a,r+=a;return{sum:n,count:r}},postMap:e=>e.sum/e.count}}function jN(t){const e=t??(n=>n);return{preMap:n=>e(n),reduce:n=>{let r;for(const[s,a]of n)(!r||s&&s<r)&&(r=s);return r}}}function PN(t){const e=t??(n=>n);return{preMap:n=>e(n),reduce:n=>{let r;for(const[s,a]of n)(!r||s&&s>r)&&(r=s);return r}}}const BN={sum:DN,count:LN,avg:zN,min:jN,max:PN};class UN extends fy{#e;constructor(e,n,r,s){super(e,n,r),this.#e=s}inner(e){return this.#e(e),e}}function $N(t){return e=>{const n=new Fr(e.graph,new qr),r=new UN(e.graph.getNextOperatorId(),e.connectReader(),n.writer,t);return e.graph.addOperator(r),n}}class qN extends fy{#e;constructor(e,n,r,s){super(e,n,r),this.#e=s}inner(e){return e.filter(this.#e)}}function Zs(t){return e=>{const n=new Fr(e.graph,new qr),r=new qN(e.graph.getNextOperatorId(),e.connectReader(),n.writer,t);return e.graph.addOperator(r),n}}class FN extends Ja{#e;constructor(e,n,r,s){super(e,n,r),this.#e=s}run(){for(const e of this.inputMessages())this.#e(e),this.output.sendData(e)}}function VN(t){return e=>{const n=new Fr(e.graph,new qr),r=new FN(e.graph.getNextOperatorId(),e.connectReader(),n.writer,t);return e.graph.addOperator(r),n}}class HN extends Ja{run(){const e=this.inputMessages();if(e.length===0)return;const n=new Vt;for(const s of e)n.extend(s);const r=n.consolidate();r.getInner().length>0&&this.output.sendData(r)}}function GN(){return t=>{const e=new Fr(t.graph,new qr),n=new HN(t.graph.getNextOperatorId(),t.connectReader(),e.writer);return t.graph.addOperator(n),e}}class KN extends AN{#e=new Ks;#t=new Ks;#n;constructor(e,n,r,s,a="inner"){super(e,n,r,s),this.#n=a}run(){const e=Ks.fromMultiSets(this.inputAMessages()),n=Ks.fromMultiSets(this.inputBMessages());if(e.size===0&&n.size===0)return;const r=new Vt;this.#n!=="anti"&&this.emitInnerResults(e,n,r),(this.#n==="left"||this.#n==="full"||this.#n==="anti")&&this.emitLeftOuterResults(e,n,r),(this.#n==="right"||this.#n==="full")&&this.emitRightOuterResults(e,n,r),this.#e.append(e),this.#t.append(n),r.getInner().length>0&&this.output.sendData(r)}emitInnerResults(e,n,r){e.size>0&&r.extend(e.join(this.#t)),n.size>0&&r.extend(this.#e.join(n)),e.size>0&&n.size>0&&r.extend(e.join(n))}emitLeftOuterResults(e,n,r){if(e.size>0)for(const[s,a]of e.entriesIterators()){const l=this.#t.getConsolidatedMultiplicity(s),u=n.getConsolidatedMultiplicity(s);if(l+u===0)for(const[h,m]of a)m!==0&&r.add([s,[h,null]],m)}if(n.size>0)for(const s of n.getPresenceKeys()){const a=this.#t.getConsolidatedMultiplicity(s),l=n.getConsolidatedMultiplicity(s);if(l===0)continue;const u=a+l;if(a===0==(u===0))continue;const f=a===0;for(const[h,m]of this.#e.getIterator(s))m!==0&&r.add([s,[h,null]],f?-m:+m)}}emitRightOuterResults(e,n,r){if(n.size>0)for(const[s,a]of n.entriesIterators()){const l=this.#e.getConsolidatedMultiplicity(s),u=e.getConsolidatedMultiplicity(s);if(l+u===0)for(const[h,m]of a)m!==0&&r.add([s,[null,h]],m)}if(e.size>0)for(const s of e.getPresenceKeys()){const a=this.#e.getConsolidatedMultiplicity(s),l=e.getConsolidatedMultiplicity(s);if(l===0)continue;const u=a+l;if(a===0==(u===0))continue;const f=a===0;for(const[h,m]of this.#t.getIterator(s))m!==0&&r.add([s,[null,h]],f?-m:+m)}}}function ZN(t,e="inner"){return n=>{if(n.graph!==t.graph)throw new Error("Cannot join streams from different graphs");const r=new Fr(n.graph,new qr),s=new KN(n.graph.getNextOperatorId(),n.connectReader(),t.connectReader(),r.writer,e);return n.graph.addOperator(s),r}}class QN extends Ja{#e;#t;constructor(e,n,r,s=a=>a){super(e,n,r),this.#e=s,this.#t=new Map}run(){const e=new Map;for(const r of this.inputMessages())for(const[s,a]of r.getInner()){const l=Cn(this.#e(s)),f=(e.get(l)?.[0]??this.#t.get(l)??0)+a;e.set(l,[f,s])}const n=[];for(const[r,[s,a]]of e.entries()){const l=this.#t.get(r)??0;s===0?this.#t.delete(r):this.#t.set(r,s),l<=0&&s>0?n.push([[Cn(this.#e(a)),a[1]],1]):l>0&&s<=0&&n.push([[Cn(this.#e(a)),a[1]],-1])}n.length>0&&this.output.sendData(new Vt(n))}}function JN(t=e=>e){return e=>{const n=new Fr(e.graph,new qr),r=new QN(e.graph.getNextOperatorId(),e.connectReader(),n.writer,t);return e.graph.addOperator(r),n}}const YN="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function Ma(t,e,n){const r=n[0];if(e!=null&&t>=e)throw new Error(t+" >= "+e);if(t.slice(-1)===r||e&&e.slice(-1)===r)throw new Error("trailing zero");if(e){let l=0;for(;(t[l]||r)===e[l];)l++;if(l>0)return e.slice(0,l)+Ma(t.slice(l),e.slice(l),n)}const s=t?n.indexOf(t[0]):0,a=e!=null?n.indexOf(e[0]):n.length;if(a-s>1){const l=Math.round(.5*(s+a));return n[l]}else return e&&e.length>1?e.slice(0,1):n[s]+Ma(t.slice(1),null,n)}function lk(t){if(t.length!==ck(t[0]))throw new Error("invalid integer part of order key: "+t)}function ck(t){if(t>="a"&&t<="z")return t.charCodeAt(0)-97+2;if(t>="A"&&t<="Z")return 90-t.charCodeAt(0)+2;throw new Error("invalid order key head: "+t)}function al(t){const e=ck(t[0]);if(e>t.length)throw new Error("invalid order key: "+t);return t.slice(0,e)}function cw(t,e){if(t==="A"+e[0].repeat(26))throw new Error("invalid order key: "+t);const n=al(t);if(t.slice(n.length).slice(-1)===e[0])throw new Error("invalid order key: "+t)}function uw(t,e){lk(t);const[n,...r]=t.split("");let s=!0;for(let a=r.length-1;s&&a>=0;a--){const l=e.indexOf(r[a])+1;l===e.length?r[a]=e[0]:(r[a]=e[l],s=!1)}if(s){if(n==="Z")return"a"+e[0];if(n==="z")return null;const a=String.fromCharCode(n.charCodeAt(0)+1);return a>"a"?r.push(e[0]):r.pop(),a+r.join("")}else return n+r.join("")}function XN(t,e){lk(t);const[n,...r]=t.split("");let s=!0;for(let a=r.length-1;s&&a>=0;a--){const l=e.indexOf(r[a])-1;l===-1?r[a]=e.slice(-1):(r[a]=e[l],s=!1)}if(s){if(n==="a")return"Z"+e.slice(-1);if(n==="A")return null;const a=String.fromCharCode(n.charCodeAt(0)-1);return a<"Z"?r.push(e.slice(-1)):r.pop(),a+r.join("")}else return n+r.join("")}function WN(t,e,n=YN){if(t!=null&&cw(t,n),e!=null&&cw(e,n),t!=null&&e!=null&&t>=e)throw new Error(t+" >= "+e);if(t==null){if(e==null)return"a"+n[0];const f=al(e),h=e.slice(f.length);if(f==="A"+n[0].repeat(26))return f+Ma("",h,n);if(f<e)return f;const m=XN(f,n);if(m==null)throw new Error("cannot decrement any more");return m}if(e==null){const f=al(t),h=t.slice(f.length),m=uw(f,n);return m??f+Ma(h,null,n)}const r=al(t),s=t.slice(r.length),a=al(e),l=e.slice(a.length);if(r===a)return r+Ma(s,l,n);const u=uw(r,n);if(u==null)throw new Error("cannot increment any more");return u<e?u:r+Ma(s,null,n)}class fw{#e=[];#t;#n;#r;constructor(e,n,r){this.#n=e,this.#r=e+n,this.#t=r}get size(){const e=this.#n,n=this.#r-this.#n,r=this.#e.length-e;return Math.max(0,Math.min(n,r))}move({offset:e,limit:n}){const r=this.#n,s=this.#r-this.#n,a=[this.#n,this.#r===1/0?this.#n+this.size:this.#r];this.#n=e??r,this.#r=this.#n+(n??s);const l=[this.#n,this.#r===1/0?Math.max(this.#n+this.size,a[1]):this.#r],{onlyInA:u,onlyInB:f}=tN(a,l),h=[];f.forEach(p=>{const _=this.#e[p];_&&h.push(_)});const m=[];return u.forEach(p=>{const _=this.#e[p];_&&m.push(_)}),{moveIns:h,moveOuts:m,changes:u.length+f.length>0}}insert(e){const n={moveIn:null,moveOut:null},r=this.#s(e),s=r===0?null:pw(this.#e[r-1]),a=r===this.#e.length?null:pw(this.#e[r]),l=WN(s,a),u=hw(e,l);if(this.#e.splice(r,0,u),r<this.#r){const f=Math.max(r,this.#n);f<this.#e.length&&(n.moveIn=this.#e[f],this.#r<this.#e.length&&(n.moveOut=this.#e[this.#r]))}return n}delete(e){const n={moveIn:null,moveOut:null},r=this.#s(e),[s]=this.#e.splice(r,1);if(r<this.#r){if(n.moveOut=s,r<this.#n){const l=this.#n-1;l<this.#e.length?n.moveOut=this.#e[l]:n.moveOut=null}const a=this.#r-1;a<this.#e.length&&(n.moveIn=this.#e[a])}return n}#s(e){return WI(this.#e,hw(e,""),(n,r)=>this.#t(dw(n),dw(r)))}}class eM extends Ja{#e=new Map;#t;constructor(e,n,r,s,a){super(e,n,r);const l=a.limit??1/0,u=a.offset??0;this.#t=this.createTopK(u,l,nM(s)),a.setSizeCallback?.(()=>this.#t.size),a.setWindowFn?.(this.moveTopK.bind(this))}createTopK(e,n,r){return new fw(e,n,r)}moveTopK({offset:e,limit:n}){if(!(this.#t instanceof fw))throw new Error("Cannot move B+-tree implementation of TopK with fractional index");const r=[],s=this.#t.move({offset:e,limit:n});s.moveIns.forEach(a=>this.handleMoveIn(a,r)),s.moveOuts.forEach(a=>this.handleMoveOut(a,r)),s.changes&&this.output.sendData(new Vt(r))}run(){const e=[];for(const n of this.inputMessages())for(const[r,s]of n.getInner()){const[a,l]=r;this.processElement(a,l,s,e)}e.length>0&&this.output.sendData(new Vt(e))}processElement(e,n,r,s){const{oldMultiplicity:a,newMultiplicity:l}=this.addKey(e,r);let u={moveIn:null,moveOut:null};a<=0&&l>0?u=this.#t.insert([e,n]):a>0&&l<=0&&(u=this.#t.delete([e,n])),this.handleMoveIn(u.moveIn,s),this.handleMoveOut(u.moveOut,s)}handleMoveIn(e,n){if(e){const[[r,s],a]=e;n.push([[r,[s,a]],1])}}handleMoveOut(e,n){if(e){const[[r,s],a]=e;n.push([[r,[s,a]],-1])}}getMultiplicity(e){return this.#e.get(e)??0}addKey(e,n){const r=this.getMultiplicity(e),s=r+n;return s===0?this.#e.delete(e):this.#e.set(e,s),{oldMultiplicity:r,newMultiplicity:s}}}function tM(t,e){const n=e||{};return r=>{const s=new Fr(r.graph,new qr),a=new eM(r.graph.getNextOperatorId(),r.connectReader(),s.writer,t,n);return r.graph.addOperator(a),s}}function hw(t,e){return[t,e]}function dw(t){return t[0]}function pw(t){return t[1]}function nM(t){return([e,n],[r,s])=>{const a=t(n,s);return a!==0?a:uf(e,r)}}function rM(t,e,n){const r=n?.limit??1/0,s=n?.offset??0,a=n?.setSizeCallback,l=n?.setWindowFn,u=n?.comparator??((f,h)=>f===h?0:f<h?-1:1);return f=>f.pipe(t((h,m)=>u(e(h),e(m)),{limit:r,offset:s,setSizeCallback:a,setWindowFn:l}),GN())}function sM(t,e){return rM(tM,t,e)}class iM{constructor(e,n,r){this._root=Wp,this._size=0,this._maxNodeSize=r>=4?Math.min(r,256):32,this._compare=e,n&&this.setPairs(n)}get size(){return this._size}get length(){return this._size}get isEmpty(){return this._size===0}clear(){this._root=Wp,this._size=0}get(e,n){return this._root.get(e,n,this)}set(e,n,r){this._root.isShared&&(this._root=this._root.clone());const s=this._root.set(e,n,r,this);return s===!0||s===!1?s:(this._root=new hy([this._root,s]),!0)}has(e){return this.forRange(e,e,!0,void 0)!==0}delete(e){return this.editRange(e,e,!0,oM)!==0}get maxNodeSize(){return this._maxNodeSize}minKey(){return this._root.minKey()}maxKey(){return this._root.maxKey()}keysArray(){const e=[];return this._root.forRange(this.minKey(),this.maxKey(),!0,!1,this,0,(n,r)=>{e.push(n)}),e}nextHigherPair(e,n){return n=n||[],e===void 0?this._root.minPair(n):this._root.getPairOrNextHigher(e,this._compare,!1,n)}nextHigherKey(e){const n=this.nextHigherPair(e,mw);return n&&n[0]}nextLowerPair(e,n){return n=n||[],e===void 0?this._root.maxPair(n):this._root.getPairOrNextLower(e,this._compare,!1,n)}nextLowerKey(e){const n=this.nextLowerPair(e,mw);return n&&n[0]}setPairs(e,n){let r=0;for(const s of e)this.set(s[0],s[1],n)&&r++;return r}forRange(e,n,r,s,a){const l=this._root.forRange(e,n,r,!1,this,a||0,s);return typeof l=="number"?l:l.break}editRange(e,n,r,s,a){let l=this._root;l.isShared&&(this._root=l=l.clone());try{const u=l.forRange(e,n,r,!0,this,a||0,s);return typeof u=="number"?u:u.break}finally{let u;for(;l.keys.length<=1&&!l.isLeaf;)u||=l.isShared,this._root=l=l.keys.length===0?Wp:l.children[0];u&&(l.isShared=!0)}}}class Dl{get isLeaf(){return this.children===void 0}constructor(e=[],n){this.keys=e,this.values=n||mn,this.isShared=void 0}maxKey(){return this.keys[this.keys.length-1]}indexOf(e,n,r){const s=this.keys;let a=0,l=s.length,u=l>>1;for(;a<l;){const f=r(s[u],e);if(f<0)a=u+1;else if(f>0)l=u;else{if(f===0)return u;if(e===e)return s.length;throw new Error("BTree: NaN was used as a key")}u=a+l>>1}return u^n}minKey(){return this.keys[0]}minPair(e){if(this.keys.length!==0)return e[0]=this.keys[0],e[1]=this.values[0],e}maxPair(e){if(this.keys.length===0)return;const n=this.keys.length-1;return e[0]=this.keys[n],e[1]=this.values[n],e}clone(){const e=this.values;return new Dl(this.keys.slice(0),e===mn?e:e.slice(0))}get(e,n,r){const s=this.indexOf(e,-1,r._compare);return s<0?n:this.values[s]}getPairOrNextLower(e,n,r,s){const a=this.indexOf(e,-1,n),l=a<0?~a-1:r?a:a-1;if(l>=0)return s[0]=this.keys[l],s[1]=this.values[l],s}getPairOrNextHigher(e,n,r,s){const a=this.indexOf(e,-1,n),l=a<0?~a:r?a:a+1,u=this.keys;if(l<u.length)return s[0]=u[l],s[1]=this.values[l],s}set(e,n,r,s){let a=this.indexOf(e,-1,s._compare);if(a<0){if(a=~a,s._size++,this.keys.length<s._maxNodeSize)return this.insertInLeaf(a,e,n,s);{const l=this.splitOffRightSide();let u=this;return a>this.keys.length&&(a-=this.keys.length,u=l),u.insertInLeaf(a,e,n,s),l}}else return r!==!1&&(n!==void 0&&this.reifyValues(),this.keys[a]=e,this.values[a]=n),!1}reifyValues(){return this.values===mn?this.values=this.values.slice(0,this.keys.length):this.values}insertInLeaf(e,n,r,s){if(this.keys.splice(e,0,n),this.values===mn){for(;mn.length<s._maxNodeSize;)mn.push(void 0);if(r===void 0)return!0;this.values=mn.slice(0,this.keys.length-1)}return this.values.splice(e,0,r),!0}takeFromRight(e){let n=this.values;e.values===mn?n!==mn&&n.push(void 0):(n=this.reifyValues(),n.push(e.values.shift())),this.keys.push(e.keys.shift())}takeFromLeft(e){let n=this.values;e.values===mn?n!==mn&&n.unshift(void 0):(n=this.reifyValues(),n.unshift(e.values.pop())),this.keys.unshift(e.keys.pop())}splitOffRightSide(){const e=this.keys.length>>1,n=this.keys.splice(e),r=this.values===mn?mn:this.values.splice(e);return new Dl(n,r)}forRange(e,n,r,s,a,l,u){const f=a._compare;let h,m;if(n===e){if(!r||(m=(h=this.indexOf(e,-1,f))+1,h<0))return l}else h=this.indexOf(e,0,f),m=this.indexOf(n,-1,f),m<0?m=~m:r===!0&&m++;const p=this.keys,_=this.values;if(u!==void 0)for(let g=h;g<m;g++){const v=p[g],x=u(v,_[g],l++);if(x!==void 0){if(s===!0){if(v!==p[g]||this.isShared===!0)throw new Error("BTree illegally changed or cloned in editRange");x.delete?(this.keys.splice(g,1),this.values!==mn&&this.values.splice(g,1),a._size--,g--,m--):x.hasOwnProperty("value")&&(_[g]=x.value)}if(x.break!==void 0)return x}}else l+=m-h;return l}mergeSibling(e,n){if(this.keys.push.apply(this.keys,e.keys),this.values===mn){if(e.values===mn)return;this.values=this.values.slice(0,this.keys.length)}this.values.push.apply(this.values,e.reifyValues())}}class hy extends Dl{constructor(e,n){if(!n){n=[];for(let r=0;r<e.length;r++)n[r]=e[r].maxKey()}super(n),this.children=e}minKey(){return this.children[0].minKey()}minPair(e){return this.children[0].minPair(e)}maxPair(e){return this.children[this.children.length-1].maxPair(e)}get(e,n,r){const s=this.indexOf(e,0,r._compare),a=this.children;return s<a.length?a[s].get(e,n,r):void 0}getPairOrNextLower(e,n,r,s){const a=this.indexOf(e,0,n),l=this.children;if(a>=l.length)return this.maxPair(s);const u=l[a].getPairOrNextLower(e,n,r,s);return u===void 0&&a>0?l[a-1].maxPair(s):u}getPairOrNextHigher(e,n,r,s){const a=this.indexOf(e,0,n),l=this.children,u=l.length;if(a>=u)return;const f=l[a].getPairOrNextHigher(e,n,r,s);return f===void 0&&a<u-1?l[a+1].minPair(s):f}set(e,n,r,s){const a=this.children,l=s._maxNodeSize,u=s._compare;let f=Math.min(this.indexOf(e,0,u),a.length-1),h=a[f];if(h.isShared&&(a[f]=h=h.clone()),h.keys.length>=l){let p;f>0&&(p=a[f-1]).keys.length<l&&u(h.keys[0],e)<0?(p.isShared&&(a[f-1]=p=p.clone()),p.takeFromRight(h),this.keys[f-1]=p.maxKey()):(p=a[f+1])!==void 0&&p.keys.length<l&&u(h.maxKey(),e)<0&&(p.isShared&&(a[f+1]=p=p.clone()),p.takeFromLeft(h),this.keys[f]=a[f].maxKey())}const m=h.set(e,n,r,s);if(m===!1)return!1;if(this.keys[f]=h.maxKey(),m===!0)return!0;if(this.keys.length<l)return this.insert(f+1,m),!0;{const p=this.splitOffRightSide();let _=this;return u(m.maxKey(),this.maxKey())>0&&(_=p,f-=this.keys.length),_.insert(f+1,m),p}}insert(e,n){this.children.splice(e,0,n),this.keys.splice(e,0,n.maxKey())}splitOffRightSide(){const e=this.children.length>>1;return new hy(this.children.splice(e),this.keys.splice(e))}takeFromRight(e){this.keys.push(e.keys.shift()),this.children.push(e.children.shift())}takeFromLeft(e){this.keys.unshift(e.keys.pop()),this.children.unshift(e.children.pop())}forRange(e,n,r,s,a,l,u){const f=a._compare,h=this.keys,m=this.children;let p=this.indexOf(e,0,f),_=p;const g=Math.min(n===e?p:this.indexOf(n,0,f),h.length-1);if(s){if(_<=g)try{for(;_<=g;_++){m[_].isShared&&(m[_]=m[_].clone());const v=m[_].forRange(e,n,r,s,a,l,u);if(h[_]=m[_].maxKey(),typeof v!="number")return v;l=v}}finally{const v=a._maxNodeSize>>1;for(p>0&&p--,_=g;_>=p;_--)m[_].keys.length<=v&&(m[_].keys.length!==0?this.tryMerge(_,a._maxNodeSize):(h.splice(_,1),m.splice(_,1)));m.length!==0&&m[0].keys.length===0&&lM(!1,"emptiness bug")}}else for(;_<=g;_++){const v=m[_].forRange(e,n,r,s,a,l,u);if(typeof v!="number")return v;l=v}return l}tryMerge(e,n){const r=this.children;return e>=0&&e+1<r.length&&r[e].keys.length+r[e+1].keys.length<=n?(r[e].isShared&&(r[e]=r[e].clone()),r[e].mergeSibling(r[e+1],n),r.splice(e+1,1),this.keys.splice(e+1,1),this.keys[e]=r[e].maxKey(),!0):!1}mergeSibling(e,n){const r=this.keys.length;this.keys.push.apply(this.keys,e.keys);const s=e.children;if(this.children.push.apply(this.children,s),e.isShared&&!this.isShared)for(const a of s)a.isShared=!0;this.tryMerge(r-1,n)}}const mn=[],aM={delete:!0},oM=()=>aM,Wp=(function(){const t=new Dl;return t.isShared=!0,t})(),mw=[];function lM(t,...e){throw e.unshift("B+ tree"),new Error(e.join(" "))}function cM(){const t=new Map;function e(n){const r=n.join(".");if(t.has(r))return t.get(r);const s=new Proxy({},{get(a,l,u){if(l==="__refProxy")return!0;if(l==="__path")return n;if(l==="__type")return;if(typeof l=="symbol")return Reflect.get(a,l,u);const f=[...n,String(l)];return e(f)},has(a,l){return l==="__refProxy"||l==="__path"||l==="__type"?!0:Reflect.has(a,l)},ownKeys(a){return Reflect.ownKeys(a)},getOwnPropertyDescriptor(a,l){return l==="__refProxy"||l==="__path"||l==="__type"?{enumerable:!1,configurable:!0}:Reflect.getOwnPropertyDescriptor(a,l)}});return t.set(r,s),s}return e([])}function Sa(t){const e=new Map;let n=0;function r(a){const l=a.join(".");if(e.has(l))return e.get(l);const u=new Proxy({},{get(f,h,m){if(h==="__refProxy")return!0;if(h==="__path")return a;if(h==="__type")return;if(typeof h=="symbol")return Reflect.get(f,h,m);const p=[...a,String(h)];return r(p)},has(f,h){return h==="__refProxy"||h==="__path"||h==="__type"?!0:Reflect.has(f,h)},ownKeys(f){const h=++n,m=`__SPREAD_SENTINEL__${a.join(".")}__${h}`;return Object.prototype.hasOwnProperty.call(f,m)||Object.defineProperty(f,m,{enumerable:!0,configurable:!0,value:!0}),Reflect.ownKeys(f)},getOwnPropertyDescriptor(f,h){return h==="__refProxy"||h==="__path"||h==="__type"?{enumerable:!1,configurable:!0}:Reflect.getOwnPropertyDescriptor(f,h)}});return e.set(l,u),u}return new Proxy({},{get(a,l,u){if(l==="__refProxy")return!0;if(l==="__path")return[];if(l==="__type")return;if(typeof l=="symbol")return Reflect.get(a,l,u);const f=String(l);if(t.includes(f))return r([f])},has(a,l){return l==="__refProxy"||l==="__path"||l==="__type"||typeof l=="string"&&t.includes(l)?!0:Reflect.has(a,l)},ownKeys(a){return[...t,"__refProxy","__path","__type"]},getOwnPropertyDescriptor(a,l){if(l==="__refProxy"||l==="__path"||l==="__type")return{enumerable:!1,configurable:!0};if(typeof l=="string"&&t.includes(l))return{enumerable:!0,configurable:!0}}})}function en(t){return uM(t)?new Rn(t.__path):t&&typeof t=="object"&&"type"in t&&(t.type==="func"||t.type==="ref"||t.type==="val"||t.type==="agg")?t:new Un(t)}function uM(t){return t&&typeof t=="object"&&t.__refProxy===!0}function Jm(t,e){return new vr("eq",[en(t),en(e)])}function gw(t,e){return new vr("gt",[en(t),en(e)])}function fM(t,e){return new vr("gte",[en(t),en(e)])}function Ym(t,e){return new vr("lt",[en(t),en(e)])}function Xm(t,e,...n){const r=[t,e,...n];return new vr("and",r.map(s=>en(s)))}function hM(t,e,...n){const r=[t,e,...n];return new vr("or",r.map(s=>en(s)))}function dM(t,e){return new vr("in",[en(t),en(e)])}class pM{constructor(e,n,r,s){this.lookupCount=0,this.totalLookupTime=0,this.lastUpdated=new Date,this.id=e,this.expression=n,this.compareOptions=cy,this.name=r,this.initialize(s)}supports(e){return this.supportedOperations.has(e)}matchesField(e){return this.expression.type==="ref"&&this.expression.path.length===e.length&&this.expression.path.every((n,r)=>n===e[r])}matchesCompareOptions(e){const n={...this.compareOptions,direction:void 0},r={...e,direction:void 0};return Tr(n,r)}matchesDirection(e){return this.compareOptions.direction===e}getStats(){return{entryCount:this.keyCount,lookupCount:this.lookupCount,averageLookupTime:this.lookupCount>0?this.totalLookupTime/this.lookupCount:0,lastUpdated:this.lastUpdated}}evaluateIndexExpression(e){return oy(this.expression)(e)}trackLookup(e){const n=performance.now()-e;this.lookupCount++,this.totalLookupTime+=n}updateTimestamp(){this.lastUpdated=new Date}}class Wm extends pM{constructor(e,n,r,s){super(e,n,r,s),this.supportedOperations=new Set(["eq","gt","gte","lt","lte","in"]),this.valueMap=new Map,this.indexedKeys=new Set,this.compareFn=Km,this.compareFn=s?.compareFn??Km,s?.compareOptions&&(this.compareOptions=s.compareOptions),this.orderedEntries=new iM(this.compareFn)}initialize(e){}add(e,n){let r;try{r=this.evaluateIndexExpression(n)}catch(a){throw new Error(`Failed to evaluate index expression for key ${e}: ${a}`)}const s=ds(r);if(this.valueMap.has(s))this.valueMap.get(s).add(e);else{const a=new Set([e]);this.valueMap.set(s,a),this.orderedEntries.set(s,void 0)}this.indexedKeys.add(e),this.updateTimestamp()}remove(e,n){let r;try{r=this.evaluateIndexExpression(n)}catch(a){console.warn(`Failed to evaluate index expression for key ${e} during removal:`,a);return}const s=ds(r);if(this.valueMap.has(s)){const a=this.valueMap.get(s);a.delete(e),a.size===0&&(this.valueMap.delete(s),this.orderedEntries.delete(s))}this.indexedKeys.delete(e),this.updateTimestamp()}update(e,n,r){this.remove(e,n),this.add(e,r)}build(e){this.clear();for(const[n,r]of e)this.add(n,r)}clear(){this.orderedEntries.clear(),this.valueMap.clear(),this.indexedKeys.clear(),this.updateTimestamp()}lookup(e,n){const r=performance.now();let s;switch(e){case"eq":s=this.equalityLookup(n);break;case"gt":s=this.rangeQuery({from:n,fromInclusive:!1});break;case"gte":s=this.rangeQuery({from:n,fromInclusive:!0});break;case"lt":s=this.rangeQuery({to:n,toInclusive:!1});break;case"lte":s=this.rangeQuery({to:n,toInclusive:!0});break;case"in":s=this.inArrayLookup(n);break;default:throw new Error(`Operation ${e} not supported by BTreeIndex`)}return this.trackLookup(r),s}get keyCount(){return this.indexedKeys.size}equalityLookup(e){const n=ds(e);return new Set(this.valueMap.get(n)??[])}rangeQuery(e={}){const{from:n,to:r,fromInclusive:s=!0,toInclusive:a=!0}=e,l=new Set,u=ds(n),f=ds(r),h=u??this.orderedEntries.minKey(),m=f??this.orderedEntries.maxKey();return this.orderedEntries.forRange(h,m,a,(p,_)=>{if(!s&&this.compareFn(p,n)===0)return;const g=this.valueMap.get(p);g&&g.forEach(v=>l.add(v))}),l}rangeQueryReversed(e={}){const{from:n,to:r,fromInclusive:s=!0,toInclusive:a=!0}=e;return this.rangeQuery({from:r??this.orderedEntries.maxKey(),to:n??this.orderedEntries.minKey(),fromInclusive:a,toInclusive:s})}takeInternal(e,n,r,s,a=!1){const l=new Set,u=[];let f,h=ds(r);for(;(f=n(h))!==void 0&&u.length<e;){h=f[0];const m=this.valueMap.get(h);if(m&&m.size>0){const p=Array.from(m).sort(uf);a&&p.reverse();for(const _ of p){if(u.length>=e)break;!l.has(_)&&(s?.(_)??!0)&&(u.push(_),l.add(_))}}}return u}take(e,n,r){const s=a=>this.orderedEntries.nextHigherPair(a);return this.takeInternal(e,s,n,r)}takeReversed(e,n,r){const s=a=>this.orderedEntries.nextLowerPair(a);return this.takeInternal(e,s,n,r,!0)}inArrayLookup(e){const n=new Set;for(const r of e){const s=ds(r),a=this.valueMap.get(s);a&&a.forEach(l=>n.add(l))}return n}get indexedKeysSet(){return this.indexedKeys}get orderedEntriesArray(){return this.orderedEntries.keysArray().map(e=>[e,this.valueMap.get(e)??new Set])}get orderedEntriesArrayReversed(){return this.takeReversed(this.orderedEntries.size).map(e=>[e,this.valueMap.get(e)??new Set])}get valueMapData(){return this.valueMap}}function uk(t){return t.config.autoIndex==="eager"}function eh(t,e,n,r,s){if(!uk(n))return;const a=r??{...cy,...n.compareOptions};if(!Array.from(n.indexes.values()).find(u=>u.matchesField(e)&&u.matchesCompareOptions(a)))try{n.createIndex(u=>{let f=u;for(const h of e)f=f[h];return f},{name:`auto:${e.join(".")}`,indexType:Wm,options:s?{compareFn:s,compareOptions:a}:{}})}catch(u){console.warn(`${n.id?`[${n.id}] `:""}Failed to create auto-index for field path "${e.join(".")}":`,u)}}function mM(t,e){if(!uk(e))return;const n=gM(t);for(const{fieldName:r,fieldPath:s}of n)eh(r,s,e)}function gM(t){const e=[];function n(r){if(r.type!=="func")return;const s=r;if(s.name==="and"){for(const h of s.args)n(h);return}if(!["eq","gt","gte","lt","lte","in"].includes(s.name)||s.args.length<1||s.args[0].type!=="ref")return;const u=s.args[0].path;if(u.length===0)return;const f=u.join("_");e.push({fieldName:f,fieldPath:u})}return n(t),e}const{sum:yM,count:_M,avg:bM,min:vM,max:xM}=BN;function wM(t,e){const n=new Map,r=[...t];if(!e)return{selectToGroupByIndex:n,groupByExpressions:r};for(const[s,a]of Object.entries(e)){if(a.type==="agg")continue;const l=r.findIndex(u=>ff(a,u));if(l===-1)throw new EI(s);n.set(s,l)}return{selectToGroupByIndex:n,groupByExpressions:r}}function yw(t,e,n,r,s){if(e.length===0){const h={};if(r){for(const[p,_]of Object.entries(r))if(_.type==="agg"){const g=_;h[p]=_w(g)}}const m=()=>({__singleGroup:!0});if(t=t.pipe(lw(m,h)),t=t.pipe(Tn(([,p])=>{const g={...p.__select_results||{}};if(r)for(const[v,x]of Object.entries(r))x.type==="agg"&&(g[v]=p[v]);return["single_group",{...p,__select_results:g}]})),n&&n.length>0)for(const p of n){const _=Qx(p),g=hf(_,r||{}),v=$n(g);t=t.pipe(Zs(([,x])=>{const E={result:x.__select_results};return Ba(v(E))}))}if(s&&s.length>0)for(const p of s)t=t.pipe(Zs(([,_])=>{const g={result:_.__select_results};return Ba(p(g))}));return t}const a=wM(e,r),l=e.map(h=>$n(h)),u=([,h])=>{const m={...h};delete m.__select_results;const p={};for(let _=0;_<e.length;_++){const g=l[_],v=g(m);p[`__key_${_}`]=v}return p},f={};if(r){for(const[h,m]of Object.entries(r))if(m.type==="agg"){const p=m;f[h]=_w(p)}}if(t=t.pipe(lw(u,f)),t=t.pipe(Tn(([,h])=>{const m=h.__select_results||{},p={};if(r)for(const[g,v]of Object.entries(r))if(v.type!=="agg"){const x=a.selectToGroupByIndex.get(g);x!==void 0?p[g]=h[`__key_${x}`]:p[g]=m[g]}else p[g]=h[g];else for(let g=0;g<e.length;g++)p[`__key_${g}`]=h[`__key_${g}`];let _;if(e.length===1)_=h.__key_0;else{const g=[];for(let v=0;v<e.length;v++)g.push(h[`__key_${v}`]);_=JSON.stringify(g)}return[_,{...h,__select_results:p}]})),n&&n.length>0)for(const h of n){const m=Qx(h),p=hf(m,r||{}),_=$n(p);t=t.pipe(Zs(([,g])=>{const v={result:g.__select_results};return _(v)}))}if(s&&s.length>0)for(const h of s)t=t.pipe(Zs(([,m])=>{const p={result:m.__select_results};return Ba(h(p))}));return t}function ff(t,e){if(!t||!e||t.type!==e.type)return!1;switch(t.type){case"ref":return!t.path||!e.path||t.path.length!==e.path.length?!1:t.path.every((n,r)=>n===e.path[r]);case"val":return t.value===e.value;case"func":return t.name===e.name&&t.args?.length===e.args?.length&&(t.args||[]).every((n,r)=>ff(n,e.args[r]));case"agg":return t.name===e.name&&t.args?.length===e.args?.length&&(t.args||[]).every((n,r)=>ff(n,e.args[r]));default:return!1}}function _w(t){const e=$n(t.args[0]),n=([,a])=>{const l=e(a);return typeof l=="number"?l:l!=null?Number(l):0},r=([,a])=>{const l=e(a);return typeof l=="number"||l instanceof Date?l:l!=null?Number(l):0},s=([,a])=>e(a);switch(t.name.toLowerCase()){case"sum":return yM(n);case"count":return _M(s);case"avg":return bM(n);case"min":return vM(r);case"max":return xM(r);default:throw new CI(t.name)}}function hf(t,e,n="result"){switch(t.type){case"agg":{const r=t;for(const[s,a]of Object.entries(e))if(a.type==="agg"&&SM(r,a))return new Rn([n,s]);throw new TI(r.name)}case"func":{const r=t,s=r.args.map(a=>hf(a,e));return new vr(r.name,s)}case"ref":return t;case"val":return t;default:throw new AI(t.type)}}function SM(t,e){return t.name===e.name&&t.args.length===e.args.length&&t.args.every((n,r)=>ff(n,e.args[r]))}function kM(t,e,n,r,s,a,l,u,f){const h=n.map(v=>{const x=hf(v.expression,r,"__select_results");return{compiledExpression:$n(x),compareOptions:eg(v,s)}}),m=v=>{const x=v;return n.length>1?h.map(E=>E.compiledExpression(x)):n.length===1?h[0].compiledExpression(x):null},p=(v,x)=>{if(n.length>1){const E=v,k=x;for(let T=0;T<n.length;T++){const C=h[T],D=lf(C.compareOptions)(E[T],k[T]);if(D!==0)return D}return E.length-k.length}if(n.length===1){const E=h[0];return lf(E.compareOptions)(v,x)}return Km(v,x)};let _,g;if(u){let v,x,E,k=t.from.alias;const T=n[0],C=T.expression;if(C.type==="ref"){const j=Nl(t,C,s);if(j){x=j.collection;const D=j.path[0],I=eg(T,x);D&&eh(D,j.path,x,I,p),E=$n(new Rn(j.path),!0),v=Ql(x,j.path,I),v?.supports("gt")||(v=void 0),k=C.path.length>1?String(C.path[0]):t.from.alias}}if(E){const D=n.every(H=>H.expression.type==="ref")?n.map(H=>{const P=H.expression,Q=Nl(t,P,s);return $n(Q?new Rn(Q.path):H.expression,!0)}):void 0;g={alias:k,offset:f??0,limit:u,comparator:(H,P)=>{if(n.length===1){const Q=H&&E(H),ne=P&&E(P);return p(Q,ne)}if(D){const Q=ne=>ne&&D.map(me=>me(ne));return p(Q(H),Q(P))}return 0},valueExtractorForRawRow:H=>{if(n.length===1)return E(H);if(D)return D.map(P=>P(H))},firstColumnValueExtractor:E,index:v,orderBy:n};const V=x?.id??s.id;a[V]=g,v&&(_=H=>{a[V].dataNeeded=()=>{const P=H();return Math.max(0,g.limit-P)}})}}return e.pipe(sM(m,{limit:u,offset:f,comparator:p,setSizeCallback:_,setWindowFn:v=>{l(x=>{v(x),g&&(g.offset=x.offset??g.offset,g.limit=x.limit??g.limit)})}}))}function eg(t,e){return t.compareOptions.stringSort!==void 0?t.compareOptions:{...e.compareOptions,direction:t.compareOptions.direction,nulls:t.compareOptions.nulls}}function EM(t,e={}){const n=r=>{const s=[];for(const[a,l]of t.entries())(r?.(l)??!0)&&s.push({type:"insert",key:a,value:l});return s};if(e.limit!==void 0&&!e.orderBy)throw new Error("limit cannot be used without orderBy");if(e.orderBy){const r=e.where?vl(e.where):void 0,s=TM(t,e.orderBy,e.limit,r,e.optimizedOnly);if(s===void 0)return;const a=[];for(const l of s){const u=t.get(l);u!==void 0&&a.push({type:"insert",key:l,value:u})}return a}if(!e.where)return n();try{const r=e.where,s=GI(r,t);if(s.canOptimize){const a=[];for(const l of s.matchingKeys){const u=t.get(l);u!==void 0&&a.push({type:"insert",key:l,value:u})}return a}else{if(e.optimizedOnly)return;const a=vl(r);return n(a)}}catch(r){console.warn(`${t.id?`[${t.id}] `:""}Error processing where clause, falling back to full scan:`,r);const s=vl(e.where);return e.optimizedOnly?void 0:n(s)}}function vl(t){const e=oy(t);return n=>{try{const r=e(n);return Ba(r)}catch{return!1}}}function CM(t,e){const n=vl(e.whereExpression);return r=>{const s=[];for(const a of r)if(a.type==="insert")n(a.value)&&s.push(a);else if(a.type==="update"){const l=n(a.value),u=a.previousValue?n(a.previousValue):!1;l&&u?s.push(a):l&&!u?s.push({...a,type:"insert"}):!l&&u&&s.push({...a,type:"delete",value:a.previousValue})}else n(a.value)&&s.push(a);(s.length>0||r.length===0)&&t(s)}}function TM(t,e,n,r,s){if(e.length===1){const f=e[0],h=f.expression;if(h.type==="ref"){const p=h.path,_=eg(f,t);eh(p[0],p,t,_);const g=Ql(t,p,_);if(g&&g.supports("gt")){const v=x=>{const E=t.get(x);return E===void 0?!1:r?.(E)??!0};return g.take(n??g.keyCount,void 0,v)}}}if(s)return;const a=[];for(const[f,h]of t.entries())(r?.(h)??!0)&&a.push({key:f,value:h});const l=(f,h)=>{for(const m of e){const p=lf(m.compareOptions),_=bw(f.value,m.expression),g=bw(h.value,m.expression),v=p(_,g);if(v!==0)return v}return 0};a.sort(l);const u=a.map(f=>f.key);return n!==void 0?u.slice(0,n):u}function bw(t,e){if(e.type==="ref"){const n=e;let r=t;for(const s of n.path)r=r?.[s];return r}else return e.type==="val"?e.value:oy(e)(t)}class vw{constructor(e){this.map=new Map,this.sortedKeys=[],this.comparator=e}indexOf(e,n){let r=0,s=this.sortedKeys.length;if(!this.comparator){for(;r<s;){const a=Math.floor((r+s)/2),l=this.sortedKeys[a],u=uf(e,l);if(u<0)s=a;else if(u>0)r=a+1;else return a}return r}for(;r<s;){const a=Math.floor((r+s)/2),l=this.sortedKeys[a],u=this.map.get(l),f=this.comparator(n,u);if(f<0)s=a;else if(f>0)r=a+1;else{const h=uf(e,l);if(h<0)s=a;else if(h>0)r=a+1;else return a}}return r}set(e,n){if(this.map.has(e)){const s=this.map.get(e),a=this.indexOf(e,s);this.sortedKeys.splice(a,1)}const r=this.indexOf(e,n);return this.sortedKeys.splice(r,0,e),this.map.set(e,n),this}get(e){return this.map.get(e)}delete(e){if(this.map.has(e)){const n=this.map.get(e),r=this.indexOf(e,n);return this.sortedKeys.splice(r,1),this.map.delete(e)}return!1}has(e){return this.map.has(e)}clear(){this.map.clear(),this.sortedKeys=[]}get size(){return this.map.size}*[Symbol.iterator](){for(const e of this.sortedKeys)yield[e,this.map.get(e)]}entries(){return this[Symbol.iterator]()}keys(){return this.sortedKeys[Symbol.iterator]()}values(){return(function*(){for(const e of this.sortedKeys)yield this.map.get(e)}).call(this)}forEach(e){for(const n of this.sortedKeys)e(this.map.get(n),n,this.map)}}class AM{constructor(e){this.pendingSyncedTransactions=[],this.syncedMetadata=new Map,this.optimisticUpserts=new Map,this.optimisticDeletes=new Set,this.size=0,this.syncedKeys=new Set,this.preSyncVisibleState=new Map,this.recentlySyncedKeys=new Set,this.hasReceivedFirstCommit=!1,this.isCommittingSyncTransactions=!1,this.commitPendingTransactions=()=>{let n=!1;for(const l of this.transactions.values())if(l.state==="persisting"){n=!0;break}const{committedSyncedTransactions:r,uncommittedSyncedTransactions:s,hasTruncateSync:a}=this.pendingSyncedTransactions.reduce((l,u)=>(u.committed?(l.committedSyncedTransactions.push(u),u.truncate===!0&&(l.hasTruncateSync=!0)):l.uncommittedSyncedTransactions.push(u),l),{committedSyncedTransactions:[],uncommittedSyncedTransactions:[],hasTruncateSync:!1});if(!n||a){this.isCommittingSyncTransactions=!0;const l=a?r.find(_=>_.truncate)?.optimisticSnapshot:null,u=new Set;for(const _ of r)for(const g of _.operations)u.add(g.key);let f=this.preSyncVisibleState;if(f.size===0){f=new Map;for(const _ of u){const g=this.get(_);g!==void 0&&f.set(_,g)}}const h=[],m=this.config.sync.rowUpdateMode||"partial";for(const _ of r){if(_.truncate){const g=new Set([...this.syncedData.keys(),...l?.upserts.keys()||[]]);for(const v of g){if(l?.deletes.has(v))continue;const x=l?.upserts.get(v)||this.syncedData.get(v);x!==void 0&&h.push({type:"delete",key:v,value:x})}this.syncedData.clear(),this.syncedMetadata.clear(),this.syncedKeys.clear();for(const v of u)f.delete(v);this._events.emit("truncate",{type:"truncate",collection:this.collection})}for(const g of _.operations){const v=g.key;switch(this.syncedKeys.add(v),g.type){case"insert":this.syncedMetadata.set(v,g.metadata);break;case"update":this.syncedMetadata.set(v,Object.assign({},this.syncedMetadata.get(v),g.metadata));break;case"delete":this.syncedMetadata.delete(v);break}switch(g.type){case"insert":this.syncedData.set(v,g.value);break;case"update":{if(m==="partial"){const x=Object.assign({},this.syncedData.get(v),g.value);this.syncedData.set(v,x)}else this.syncedData.set(v,g.value);break}case"delete":this.syncedData.delete(v);break}}}if(a){const _=new Set;for(const x of r)for(const E of x.operations)(E.type==="insert"||E.type==="update")&&_.add(E.key);const g=new Map(l.upserts),v=new Set(l.deletes);for(const[x,E]of g)if(!v.has(x))if(_.has(x)){let k=!1;for(let T=h.length-1;T>=0;T--){const C=h[T];if(C.key===x&&C.type==="insert"){C.value=E,k=!0;break}}k||h.push({type:"insert",key:x,value:E})}else h.push({type:"insert",key:x,value:E});if(h.length>0&&v.size>0){const x=[];for(const E of h)E.type==="insert"&&v.has(E.key)||x.push(E);h.length=0,h.push(...x)}this.lifecycle.status!=="ready"&&this.lifecycle.markReady()}if(this.optimisticUpserts.clear(),this.optimisticDeletes.clear(),this.isCommittingSyncTransactions=!1,a&&l){for(const[_,g]of l.upserts)this.optimisticUpserts.set(_,g);for(const _ of l.deletes)this.optimisticDeletes.add(_)}for(const _ of this.transactions.values())if(!["completed","failed"].includes(_.state)){for(const g of _.mutations)if(this.isThisCollection(g.collection)&&g.optimistic)switch(g.type){case"insert":case"update":this.optimisticUpserts.set(g.key,g.modified),this.optimisticDeletes.delete(g.key);break;case"delete":this.optimisticUpserts.delete(g.key),this.optimisticDeletes.add(g.key);break}}const p=new Map;for(const _ of this.transactions.values())if(_.state==="completed")for(const g of _.mutations)g.optimistic&&this.isThisCollection(g.collection)&&u.has(g.key)&&p.set(g.key,{type:g.type,value:g.modified});for(const _ of u){const g=f.get(_),v=this.get(_),x=p.get(_);let E=!1;x&&(x.type==="delete"&&g!==void 0&&v===void 0&&Tr(x.value,g)||v!==void 0&&Tr(x.value,v))&&(E=!0),E||(g===void 0&&v!==void 0?h.push({type:"insert",key:_,value:v}):g!==void 0&&v===void 0?h.push({type:"delete",key:_,value:g}):g!==void 0&&v!==void 0&&!Tr(g,v)&&h.push({type:"update",key:_,value:v,previousValue:g}))}this.size=this.calculateSize(),h.length>0&&this.indexes.updateIndexes(h),this.changes.emitEvents(h,!0),this.pendingSyncedTransactions=s,this.preSyncVisibleState.clear(),Promise.resolve().then(()=>{this.recentlySyncedKeys.clear()}),this.hasReceivedFirstCommit||(this.hasReceivedFirstCommit=!0)}},this.config=e,this.transactions=new vw((n,r)=>n.compareCreatedAt(r)),this.syncedData=new vw(e.compare)}setDeps(e){this.collection=e.collection,this.lifecycle=e.lifecycle,this.changes=e.changes,this.indexes=e.indexes,this._events=e.events}get(e){const{optimisticDeletes:n,optimisticUpserts:r,syncedData:s}=this;if(!n.has(e))return r.has(e)?r.get(e):s.get(e)}has(e){const{optimisticDeletes:n,optimisticUpserts:r,syncedData:s}=this;return n.has(e)?!1:r.has(e)?!0:s.has(e)}*keys(){const{syncedData:e,optimisticDeletes:n,optimisticUpserts:r}=this;for(const s of e.keys())n.has(s)||(yield s);for(const s of r.keys())!e.has(s)&&!n.has(s)&&(yield s)}*values(){for(const e of this.keys()){const n=this.get(e);n!==void 0&&(yield n)}}*entries(){for(const e of this.keys()){const n=this.get(e);n!==void 0&&(yield[e,n])}}*[Symbol.iterator](){for(const[e,n]of this.entries())yield[e,n]}forEach(e){let n=0;for(const[r,s]of this.entries())e(s,r,n++)}map(e){const n=[];let r=0;for(const[s,a]of this.entries())n.push(e(a,s,r++));return n}isThisCollection(e){return e===this.collection}recomputeOptimisticState(e=!1){if(this.isCommittingSyncTransactions&&!e)return;const n=new Map(this.optimisticUpserts),r=new Set(this.optimisticDeletes);this.optimisticUpserts.clear(),this.optimisticDeletes.clear();const s=[];for(const u of this.transactions.values())["completed","failed"].includes(u.state)||s.push(u);for(const u of s)for(const f of u.mutations)if(this.isThisCollection(f.collection)&&f.optimistic)switch(f.type){case"insert":case"update":this.optimisticUpserts.set(f.key,f.modified),this.optimisticDeletes.delete(f.key);break;case"delete":this.optimisticUpserts.delete(f.key),this.optimisticDeletes.add(f.key);break}this.size=this.calculateSize();const a=[];this.collectOptimisticChanges(n,r,a);const l=a.filter(u=>!!(!this.recentlySyncedKeys.has(u.key)||e));if(this.pendingSyncedTransactions.length>0&&!e){const u=new Set;for(const h of this.pendingSyncedTransactions)for(const m of h.operations)u.add(m.key);const f=l.filter(h=>!(h.type==="delete"&&u.has(h.key)&&!s.some(p=>p.mutations.some(_=>this.isThisCollection(_.collection)&&_.key===h.key))));f.length>0&&this.indexes.updateIndexes(f),this.changes.emitEvents(f,e)}else l.length>0&&this.indexes.updateIndexes(l),this.changes.emitEvents(l,e)}calculateSize(){const e=this.syncedData.size,n=Array.from(this.optimisticDeletes).filter(s=>this.syncedData.has(s)&&!this.optimisticUpserts.has(s)).length,r=Array.from(this.optimisticUpserts.keys()).filter(s=>!this.syncedData.has(s)).length;return e-n+r}collectOptimisticChanges(e,n,r){const s=new Set([...e.keys(),...this.optimisticUpserts.keys(),...n,...this.optimisticDeletes]);for(const a of s){const l=this.get(a),u=this.getPreviousValue(a,e,n);u!==void 0&&l===void 0?r.push({type:"delete",key:a,value:u}):u===void 0&&l!==void 0?r.push({type:"insert",key:a,value:l}):u!==void 0&&l!==void 0&&u!==l&&r.push({type:"update",key:a,value:l,previousValue:u})}}getPreviousValue(e,n,r){if(!r.has(e))return n.has(e)?n.get(e):this.syncedData.get(e)}scheduleTransactionCleanup(e){if(e.state==="completed"){this.transactions.delete(e.id);return}e.isPersisted.promise.then(()=>{this.transactions.delete(e.id)}).catch(()=>{})}capturePreSyncVisibleState(){if(this.pendingSyncedTransactions.length===0)return;const e=new Set;for(const n of this.pendingSyncedTransactions)for(const r of n.operations)e.add(r.key);for(const n of e)this.recentlySyncedKeys.add(n);for(const n of e)if(!this.preSyncVisibleState.has(n)){const r=this.get(n);r!==void 0&&this.preSyncVisibleState.set(n,r)}}onTransactionStateChange(){this.changes.shouldBatchEvents=this.pendingSyncedTransactions.length>0,this.capturePreSyncVisibleState(),this.recomputeOptimisticState(!1)}cleanup(){this.syncedData.clear(),this.syncedMetadata.clear(),this.optimisticUpserts.clear(),this.optimisticDeletes.clear(),this.size=0,this.pendingSyncedTransactions=[],this.syncedKeys.clear(),this.hasReceivedFirstCommit=!1}}class fk{constructor(){this.listeners=new Map}on(e,n){return this.listeners.has(e)||this.listeners.set(e,new Set),this.listeners.get(e).add(n),()=>{this.listeners.get(e)?.delete(n)}}once(e,n){const r=this.on(e,s=>{n(s),r()});return r}off(e,n){this.listeners.get(e)?.delete(n)}waitFor(e,n){return new Promise((r,s)=>{let a;const l=this.on(e,u=>{a&&(clearTimeout(a),a=void 0),r(u),l()});n&&(a=setTimeout(()=>{a=void 0,l(),s(new Error(`Timeout waiting for event ${String(e)}`))},n))})}emitInner(e,n){this.listeners.get(e)?.forEach(r=>{try{r(n)}catch(s){queueMicrotask(()=>{throw s})}})}clearListeners(){this.listeners.clear()}}function RM(t,e){if(e.length===0||t.length===0)return;if(t.length===1){const{expression:r,compareOptions:s}=t[0];return(s.direction==="asc"?gw:Ym)(r,new Un(e[0]))}const n=[];for(let r=0;r<t.length&&r<e.length;r++){const s=t[r],a=e[r],l=[];for(let h=0;h<r;h++){const m=t[h],p=e[h];l.push(Jm(m.expression,new Un(p)))}const f=(s.compareOptions.direction==="asc"?gw:Ym)(s.expression,new Un(a));if(l.length===0)n.push(f);else{const h=[...l,f];n.push(h.reduce((m,p)=>Xm(m,p)))}}return n.length===1?n[0]:n.reduce((r,s)=>hM(r,s))}class OM extends fk{constructor(e,n,r){super(),this.collection=e,this.callback=n,this.options=r,this.loadedInitialState=!1,this.skipFiltering=!1,this.snapshotSent=!1,this.loadedSubsets=[],this.sentKeys=new Set,this.limitedSnapshotRowCount=0,this._status="ready",this.pendingLoadSubsetPromises=new Set,this.isBufferingForTruncate=!1,this.truncateBuffer=[],this.pendingTruncateRefetches=new Set,r.onUnsubscribe&&this.on("unsubscribed",a=>r.onUnsubscribe(a)),r.whereExpression&&mM(r.whereExpression,this.collection);const s=a=>{n(a),this.trackSentKeys(a)};this.callback=s,this.filteredCallback=r.whereExpression?CM(this.callback,r):this.callback,this.truncateCleanup=this.collection.on("truncate",()=>{this.handleTruncate()})}get status(){return this._status}handleTruncate(){const e=[...this.loadedSubsets],n=this.collection._sync.syncLoadSubsetFn!==null;if(e.length===0||!n){this.snapshotSent=!1,this.loadedInitialState=!1,this.limitedSnapshotRowCount=0,this.lastSentKey=void 0,this.loadedSubsets=[];return}this.isBufferingForTruncate=!0,this.truncateBuffer=[],this.pendingTruncateRefetches.clear(),this.snapshotSent=!1,this.loadedInitialState=!1,this.limitedSnapshotRowCount=0,this.lastSentKey=void 0,this.loadedSubsets=[],queueMicrotask(()=>{if(this.isBufferingForTruncate){for(const r of e){const s=this.collection._sync.loadSubset(r);this.loadedSubsets.push(r),this.trackLoadSubsetPromise(s),s instanceof Promise&&(this.pendingTruncateRefetches.add(s),s.catch(()=>{}).finally(()=>{this.pendingTruncateRefetches.delete(s),this.checkTruncateRefetchComplete()}))}this.pendingTruncateRefetches.size===0&&this.flushTruncateBuffer()}})}checkTruncateRefetchComplete(){this.pendingTruncateRefetches.size===0&&this.isBufferingForTruncate&&this.flushTruncateBuffer()}flushTruncateBuffer(){this.isBufferingForTruncate=!1;const e=this.truncateBuffer.flat();e.length>0&&this.filteredCallback(e),this.truncateBuffer=[]}setOrderByIndex(e){this.orderByIndex=e}setStatus(e){if(this._status===e)return;const n=this._status;this._status=e,this.emitInner("status:change",{type:"status:change",subscription:this,previousStatus:n,status:e});const r=`status:${e}`;this.emitInner(r,{type:r,subscription:this,previousStatus:n,status:e})}trackLoadSubsetPromise(e){e instanceof Promise&&(this.pendingLoadSubsetPromises.add(e),this.setStatus("loadingSubset"),e.finally(()=>{this.pendingLoadSubsetPromises.delete(e),this.pendingLoadSubsetPromises.size===0&&this.setStatus("ready")}))}hasLoadedInitialState(){return this.loadedInitialState}hasSentAtLeastOneSnapshot(){return this.snapshotSent}emitEvents(e){const n=this.filterAndFlipChanges(e);this.isBufferingForTruncate?n.length>0&&this.truncateBuffer.push(n):this.filteredCallback(n)}requestSnapshot(e){if(this.loadedInitialState)return!1;const n={where:this.options.whereExpression,optimizedOnly:e?.optimizedOnly??!1};if(e){if("where"in e){const f=e.where;if(n.where){const h=n.where,m=Xm(h,f);n.where=m}else n.where=f}}else this.loadedInitialState=!0;const r={where:n.where,subscription:this,orderBy:e?.orderBy,limit:e?.limit},s=this.collection._sync.loadSubset(r);this.loadedSubsets.push(r),(e?.trackLoadSubsetPromise??!0)&&this.trackLoadSubsetPromise(s);const l=this.collection.currentStateAsChanges(n);if(l===void 0)return!1;const u=l.filter(f=>!this.sentKeys.has(f.key));for(const f of u)this.sentKeys.add(f.key);return this.snapshotSent=!0,this.callback(u),!0}requestLimitedSnapshot({orderBy:e,limit:n,minValues:r,offset:s}){if(!n)throw new Error("limit is required");if(!this.orderByIndex)throw new Error("Ordered snapshot was requested but no index was found. You have to call setOrderByIndex before requesting an ordered snapshot.");const l=r?.[0],u=this.orderByIndex,f=this.options.whereExpression,h=f?vl(f):void 0,m=I=>{if(this.sentKeys.has(I))return!1;const U=this.collection.get(I);return U===void 0?!1:h?.(U)??!0};let p=l;const _=[];let g=[];if(l!==void 0){const{expression:I}=e[0],U=this.collection.currentStateAsChanges({where:Jm(I,new Un(l))});if(U){const V=U.map(P=>P.key).filter(P=>!this.sentKeys.has(P)&&m(P));g.push(...V);const H=u.take(n-g.length,l,m);g.push(...H)}else g=u.take(n,l,m)}else g=u.take(n,l,m);const v=()=>Math.max(n-_.length,0),x=()=>g.length===0,E=e[0].expression,k=E.type==="ref"?$n(new Rn(E.path),!0):null;for(;v()>0&&!x();){const I=new Set;for(const U of g){const V=this.collection.get(U);_.push({type:"insert",key:U,value:V}),p=k?k(V):V,I.add(U)}g=u.take(v(),p,m)}const T=this.limitedSnapshotRowCount;for(const I of _)this.sentKeys.add(I.key);this.callback(_),this.limitedSnapshotRowCount+=_.length,_.length>0&&(this.lastSentKey=_[_.length-1].key);let C;if(r!==void 0&&r.length>0){const I=RM(e,r);if(I){const{expression:U}=e[0],V=r[0];let H;if(V instanceof Date){const P=new Date(V.getTime()+1);H=Xm(fM(U,new Un(V)),Ym(U,new Un(P)))}else H=Jm(U,new Un(V));C={whereFrom:I,whereCurrent:H,lastKey:this.lastSentKey}}}const j={where:f,limit:n,orderBy:e,cursor:C,offset:s??T,subscription:this},D=this.collection._sync.loadSubset(j);this.loadedSubsets.push(j),this.trackLoadSubsetPromise(D)}filterAndFlipChanges(e){if(this.loadedInitialState||this.skipFiltering)return e;const n=this.isBufferingForTruncate,r=[];for(const s of e){let a=s;if(this.sentKeys.has(s.key)){if(s.type==="insert")continue;s.type==="delete"&&this.sentKeys.delete(s.key)}else{if(s.type==="update")a={...s,type:"insert",previousValue:void 0};else if(s.type==="delete"&&!n)continue;this.sentKeys.add(s.key)}r.push(a)}return r}trackSentKeys(e){if(!(this.loadedInitialState||this.skipFiltering))for(const n of e)n.type==="delete"?this.sentKeys.delete(n.key):this.sentKeys.add(n.key)}markAllStateAsSeen(){this.skipFiltering=!0}unsubscribe(){this.truncateCleanup?.(),this.truncateCleanup=void 0,this.isBufferingForTruncate=!1,this.truncateBuffer=[],this.pendingTruncateRefetches.clear();for(const e of this.loadedSubsets)this.collection._sync.unloadSubset(e);this.loadedSubsets=[],this.emitInner("unsubscribed",{type:"unsubscribed",subscription:this}),this.clearListeners()}}class IM{constructor(){this.activeSubscribersCount=0,this.changeSubscriptions=new Set,this.batchedEvents=[],this.shouldBatchEvents=!1}setDeps(e){this.lifecycle=e.lifecycle,this.sync=e.sync,this.events=e.events,this.collection=e.collection}emitEmptyReadyEvent(){for(const e of this.changeSubscriptions)e.emitEvents([])}emitEvents(e,n=!1){if(this.shouldBatchEvents&&!n){this.batchedEvents.push(...e);return}let r=e;if(n&&(this.batchedEvents.length>0&&(r=[...this.batchedEvents,...e]),this.batchedEvents=[],this.shouldBatchEvents=!1),r.length!==0)for(const s of this.changeSubscriptions)s.emitEvents(r)}subscribeChanges(e,n={}){this.addSubscriber();const r=new OM(this.collection,e,{...n,onUnsubscribe:()=>{this.removeSubscriber(),this.changeSubscriptions.delete(r)}});return n.includeInitialState?r.requestSnapshot({trackLoadSubsetPromise:!1}):n.includeInitialState===!1&&r.markAllStateAsSeen(),this.changeSubscriptions.add(r),r}addSubscriber(){const e=this.activeSubscribersCount;this.activeSubscribersCount++,this.lifecycle.cancelGCTimer(),(this.lifecycle.status==="cleaned-up"||this.lifecycle.status==="idle")&&this.sync.startSync(),this.events.emitSubscribersChange(this.activeSubscribersCount,e)}removeSubscriber(){const e=this.activeSubscribersCount;if(this.activeSubscribersCount--,this.activeSubscribersCount===0)this.lifecycle.startGCTimer();else if(this.activeSubscribersCount<0)throw new BO;this.events.emitSubscribersChange(this.activeSubscribersCount,e)}cleanup(){this.batchedEvents=[],this.shouldBatchEvents=!1}}const NM=t=>setTimeout(()=>{t({didTimeout:!0,timeRemaining:()=>50})},0),MM=t=>{clearTimeout(t)},DM=typeof window<"u"&&"requestIdleCallback"in window?(t,e)=>window.requestIdleCallback(t,e):(t,e)=>NM(t),em=typeof window<"u"&&"cancelIdleCallback"in window?t=>window.cancelIdleCallback(t):MM;class LM{constructor(e,n){this.status="idle",this.hasBeenReady=!1,this.hasReceivedFirstCommit=!1,this.onFirstReadyCallbacks=[],this.gcTimeoutId=null,this.idleCallbackId=null,this.config=e,this.id=n}setDeps(e){this.indexes=e.indexes,this.events=e.events,this.changes=e.changes,this.sync=e.sync,this.state=e.state}validateStatusTransition(e,n){if(e===n)return;if(!{idle:["loading","error","cleaned-up"],loading:["ready","error","cleaned-up"],ready:["cleaned-up","error"],error:["cleaned-up","idle"],"cleaned-up":["loading","error"]}[e].includes(n))throw new jO(e,n,this.id)}setStatus(e,n=!1){if(e==="ready"&&!n)throw new Zl(`You can't directly call "setStatus('ready'). You must use markReady instead.`);this.validateStatusTransition(this.status,e);const r=this.status;this.status=e,e==="ready"&&!this.indexes.isIndexesResolved&&this.indexes.resolveAllIndexes().catch(s=>{console.warn(`${this.config.id?`[${this.config.id}] `:""}Failed to resolve indexes:`,s)}),this.events.emitStatusChange(e,r)}validateCollectionUsable(e){switch(this.status){case"error":throw new zO(e,this.id);case"cleaned-up":this.sync.startSync();break}}markReady(){if(this.validateStatusTransition(this.status,"ready"),this.status==="loading"){if(this.setStatus("ready",!0),!this.hasBeenReady){this.hasBeenReady=!0,this.hasReceivedFirstCommit||(this.hasReceivedFirstCommit=!0);const e=[...this.onFirstReadyCallbacks];this.onFirstReadyCallbacks=[],e.forEach(n=>n())}this.changes.changeSubscriptions.size>0&&this.changes.emitEmptyReadyEvent()}}startGCTimer(){this.gcTimeoutId&&clearTimeout(this.gcTimeoutId);const e=this.config.gcTime??3e5;e!==0&&(this.gcTimeoutId=setTimeout(()=>{this.changes.activeSubscribersCount===0&&this.scheduleIdleCleanup()},e))}cancelGCTimer(){this.gcTimeoutId&&(clearTimeout(this.gcTimeoutId),this.gcTimeoutId=null),this.idleCallbackId!==null&&(em(this.idleCallbackId),this.idleCallbackId=null)}scheduleIdleCleanup(){this.idleCallbackId!==null&&em(this.idleCallbackId),this.idleCallbackId=DM(e=>{this.changes.activeSubscribersCount===0?this.performCleanup(e)&&(this.idleCallbackId=null):this.idleCallbackId=null},{timeout:1e3})}performCleanup(e){return!e||e.timeRemaining()>0||e.didTimeout?(this.sync.cleanup(),this.state.cleanup(),this.changes.cleanup(),this.indexes.cleanup(),this.gcTimeoutId&&(clearTimeout(this.gcTimeoutId),this.gcTimeoutId=null),this.hasBeenReady=!1,this.onFirstReadyCallbacks=[],this.setStatus("cleaned-up"),this.events.cleanup(),!0):(this.scheduleIdleCleanup(),!1)}onFirstReady(e){if(this.hasBeenReady){e();return}this.onFirstReadyCallbacks.push(e)}cleanup(){this.idleCallbackId!==null&&(em(this.idleCallbackId),this.idleCallbackId=null),this.performCleanup()}}const dy=Symbol("liveQueryInternal");class zM{constructor(e,n){this.preloadPromise=null,this.syncCleanupFn=null,this.syncLoadSubsetFn=null,this.syncUnloadSubsetFn=null,this.pendingLoadSubsetPromises=new Set,this.config=e,this.id=n,this.syncMode=e.syncMode??"eager"}setDeps(e){this.collection=e.collection,this.state=e.state,this.lifecycle=e.lifecycle,this._events=e.events}startSync(){if(!(this.lifecycle.status!=="idle"&&this.lifecycle.status!=="cleaned-up")){this.lifecycle.setStatus("loading");try{const e=jM(this.config.sync.sync({collection:this.collection,begin:()=>{this.state.pendingSyncedTransactions.push({committed:!1,operations:[],deletedKeys:new Set})},write:n=>{const r=this.state.pendingSyncedTransactions[this.state.pendingSyncedTransactions.length-1];if(!r)throw new Wx;if(r.committed)throw new ew;let s;"key"in n?s=n.key:s=this.config.getKey(n.value);let a=n.type;if(n.type==="insert"){const u=this.state.syncedData.has(s),f=r.deletedKeys.has(s),h=r.truncate===!0;if(u&&!f&&!h){const m=this.state.syncedData.get(s);if(m!==void 0&&Tr(m,n.value))a="update";else{const _=this.config.utils[dy];throw new FO(s,this.id,{hasCustomGetKey:_?.hasCustomGetKey??!1,hasJoins:_?.hasJoins??!1})}}}const l={...n,type:a,key:s};r.operations.push(l),a==="delete"&&r.deletedKeys.add(s)},commit:()=>{const n=this.state.pendingSyncedTransactions[this.state.pendingSyncedTransactions.length-1];if(!n)throw new rI;if(n.committed)throw new sI;n.committed=!0,this.state.commitPendingTransactions()},markReady:()=>{this.lifecycle.markReady()},truncate:()=>{const n=this.state.pendingSyncedTransactions[this.state.pendingSyncedTransactions.length-1];if(!n)throw new Wx;if(n.committed)throw new ew;n.operations=[],n.deletedKeys.clear(),n.truncate=!0,n.optimisticSnapshot={upserts:new Map(this.state.optimisticUpserts),deletes:new Set(this.state.optimisticDeletes)}}}));if(this.syncCleanupFn=e?.cleanup??null,this.syncLoadSubsetFn=e?.loadSubset??null,this.syncUnloadSubsetFn=e?.unloadSubset??null,this.syncMode==="on-demand"&&!this.syncLoadSubsetFn)throw new Kl(`Collection "${this.id}" is configured with syncMode "on-demand" but the sync function did not return a loadSubset handler. Either provide a loadSubset handler or use syncMode "eager".`)}catch(e){throw this.lifecycle.setStatus("error"),e}}}preload(){return this.preloadPromise?this.preloadPromise:(this.syncMode==="on-demand"&&console.warn(`${this.id?`[${this.id}] `:""}Calling .preload() on a collection with syncMode "on-demand" is a no-op. In on-demand mode, data is only loaded when queries request it. Instead, create a live query and call .preload() on that to load the specific data you need. See https://tanstack.com/blog/tanstack-db-0.5-query-driven-sync for more details.`),this.preloadPromise=new Promise((e,n)=>{if(this.lifecycle.status==="ready"){e();return}if(this.lifecycle.status==="error"){n(new PO);return}if(this.lifecycle.onFirstReady(()=>{e()}),this.lifecycle.status==="idle"||this.lifecycle.status==="cleaned-up")try{this.startSync()}catch(r){n(r);return}}),this.preloadPromise)}get isLoadingSubset(){return this.pendingLoadSubsetPromises.size>0}trackLoadPromise(e){const n=!this.isLoadingSubset;this.pendingLoadSubsetPromises.add(e),n&&this._events.emit("loadingSubset:change",{type:"loadingSubset:change",collection:this.collection,isLoadingSubset:!0,previousIsLoadingSubset:!1,loadingSubsetTransition:"start"}),e.finally(()=>{const r=this.pendingLoadSubsetPromises.size===1&&this.pendingLoadSubsetPromises.has(e);this.pendingLoadSubsetPromises.delete(e),r&&this._events.emit("loadingSubset:change",{type:"loadingSubset:change",collection:this.collection,isLoadingSubset:!1,previousIsLoadingSubset:!0,loadingSubsetTransition:"end"})})}loadSubset(e){if(this.syncMode==="eager")return!0;if(this.syncLoadSubsetFn){const n=this.syncLoadSubsetFn(e);if(n instanceof Promise)return this.trackLoadPromise(n),n}return!0}unloadSubset(e){this.syncUnloadSubsetFn&&this.syncUnloadSubsetFn(e)}cleanup(){try{this.syncCleanupFn&&(this.syncCleanupFn(),this.syncCleanupFn=null)}catch(e){queueMicrotask(()=>{if(e instanceof Error){const n=new nw(this.id,e);throw n.cause=e,n.stack=e.stack,n}else throw new nw(this.id,e)})}this.preloadPromise=null}}function jM(t){if(typeof t=="function")return{cleanup:t};if(typeof t=="object")return t}function hk(t){return typeof t=="function"&&t.prototype!==void 0&&t.prototype.constructor===t}async function PM(t){return hk(t)?t:await t()}class BM{constructor(e,n,r,s,a,l){this.id=e,this.expression=n,this.name=r,this.resolver=s,this.options=a,this.collectionEntries=l,this.indexPromise=null,this.resolvedIndex=null,hk(this.resolver)&&(this.resolvedIndex=new this.resolver(this.id,this.expression,this.name,this.options),this.collectionEntries&&this.resolvedIndex.build(this.collectionEntries))}async resolve(){return this.resolvedIndex?this.resolvedIndex:(this.indexPromise||(this.indexPromise=this.createIndex()),this.resolvedIndex=await this.indexPromise,this.resolvedIndex)}isResolved(){return this.resolvedIndex!==null}getResolved(){if(!this.resolvedIndex)throw new Error(`Index ${this.id} has not been resolved yet. Ensure collection is synced.`);return this.resolvedIndex}getId(){return this.id}getName(){return this.name}getExpression(){return this.expression}async createIndex(){const e=await PM(this.resolver);return new e(this.id,this.expression,this.name,this.options)}}class UM{constructor(e,n){this.indexId=e,this.lazyIndex=n}get index(){return this.lazyIndex.getResolved()}get isReady(){return this.lazyIndex.isResolved()}async whenReady(){return await this.lazyIndex.resolve()}get id(){return this.indexId}get name(){return this.isReady?this.index.name:this.lazyIndex.getName()}get expression(){return this.lazyIndex.getExpression()}supports(e){return this.index.supports(e)}getStats(){return this.index.getStats()}matchesField(e){const n=this.expression;return n.type==="ref"&&n.path.length===e.length&&n.path.every((r,s)=>r===e[s])}get keyCount(){return this.index.keyCount}get indexedKeysSet(){return this.index.indexedKeysSet}get orderedEntriesArray(){return this.index.orderedEntriesArray}get valueMapData(){return this.index.valueMapData}equalityLookup(e){return this.index.equalityLookup?.(e)??new Set}rangeQuery(e){return this.index.rangeQuery?.(e)??new Set}inArrayLookup(e){return this.index.inArrayLookup?.(e)??new Set}_getLazyWrapper(){return this.lazyIndex}}class $M{constructor(){this.lazyIndexes=new Map,this.resolvedIndexes=new Map,this.isIndexesResolved=!1,this.indexCounter=0}setDeps(e){this.state=e.state,this.lifecycle=e.lifecycle}createIndex(e,n={}){this.lifecycle.validateCollectionUsable("createIndex");const r=++this.indexCounter,s=cM(),a=e(s),l=en(a),u=n.indexType??Wm,f=new BM(r,l,n.name,u,n.options,this.state.entries());if(this.lazyIndexes.set(r,f),u===Wm)try{const h=f.getResolved();this.resolvedIndexes.set(r,h)}catch(h){console.warn("Failed to resolve BTreeIndex:",h)}else if(typeof u=="function"&&u.prototype)try{const h=f.getResolved();this.resolvedIndexes.set(r,h)}catch{this.resolveSingleIndex(r,f).catch(h=>{console.warn("Failed to resolve single index:",h)})}else this.isIndexesResolved&&this.resolveSingleIndex(r,f).catch(h=>{console.warn("Failed to resolve single index:",h)});return new UM(r,f)}async resolveAllIndexes(){if(this.isIndexesResolved)return;const e=Array.from(this.lazyIndexes.entries()).map(async([n,r])=>{const s=await r.resolve();return s.build(this.state.entries()),this.resolvedIndexes.set(n,s),{indexId:n,resolvedIndex:s}});await Promise.all(e),this.isIndexesResolved=!0}async resolveSingleIndex(e,n){const r=await n.resolve();return r.build(this.state.entries()),this.resolvedIndexes.set(e,r),r}get indexes(){return this.resolvedIndexes}updateIndexes(e){for(const n of this.resolvedIndexes.values())for(const r of e)switch(r.type){case"insert":n.add(r.key,r.value);break;case"update":r.previousValue?n.update(r.key,r.previousValue,r.value):n.add(r.key,r.value);break;case"delete":n.remove(r.key,r.value);break}}cleanup(){this.lazyIndexes.clear(),this.resolvedIndexes.clear()}}var qM={};const FM=new Set(["find","findLast","findIndex","findLastIndex","filter","map","flatMap","forEach","some","every","reduce","reduceRight"]),VM=new Set(["pop","push","shift","unshift","splice","sort","reverse","fill","copyWithin"]),HM=new Set(["set","delete","clear","add"]),GM=new Set(["entries","keys","values","forEach"]);function py(t){return t!==null&&typeof t=="object"&&!(t instanceof Date)&&!(t instanceof RegExp)&&!cf(t)}function KM(t,e,n,r){if(FM.has(t))return function(...s){const a=s[0];if(typeof a!="function")return e.apply(n.copy_,s);const l=(h,m)=>{if(py(h)){const p={tracker:n,prop:String(m)},{proxy:_}=r(h,p);return _}return h},u=function(h,m,p){const _=l(h,m);return a.call(this,_,m,p)};if(t==="reduce"||t==="reduceRight"){const h=function(m,p,_,g){const v=l(p,_);return a.call(this,m,v,_,g)};return e.apply(n.copy_,[h,...s.slice(1)])}const f=e.apply(n.copy_,[u,...s.slice(1)]);if((t==="find"||t==="findLast")&&f&&typeof f=="object"){const h=n.copy_.indexOf(f);if(h!==-1)return l(f,h)}return t==="filter"&&Array.isArray(f)?f.map(h=>{const m=n.copy_.indexOf(h);return m!==-1?l(h,m):h}):f}}function ZM(t,e){return function(){const n=t.copy_;let r=0;return{next(){if(r>=n.length)return{done:!0,value:void 0};const s=n[r];let a=s;if(py(s)){const l={tracker:t,prop:String(r)},{proxy:u}=e(s,l);a=u}return r++,{done:!1,value:a}},[Symbol.iterator](){return this}}}}function xw(t,e,n){return function(...r){const s=t.apply(e.copy_,r);return n(e),s}}function QM(t,e,n,r,s,a,l){if(GM.has(t)||e===Symbol.iterator)return function(...f){const h=n.apply(s.copy_,f);if(t==="forEach"){const p=f[0];if(typeof p=="function"){const _=function(g,v,x){const E=p.call(this,g,v,x);return l(s),E};return n.apply(r,[_,...f.slice(1)])}}if(t==="entries"||t==="values"||t===Symbol.iterator.toString()||e===Symbol.iterator){const p=h,_=new Map;if(t==="values"&&r instanceof Map)for(const[v,x]of s.copy_.entries())_.set(x,v);const g=new Map;if(r instanceof Set)for(const v of s.copy_.values())g.set(v,v);return{next(){const v=p.next();if(!v.done&&v.value&&typeof v.value=="object"){if(t==="entries"&&Array.isArray(v.value)&&v.value.length===2){if(v.value[1]&&typeof v.value[1]=="object"){const x=v.value[0],E={tracker:s,prop:x,updateMap:T=>{s.copy_ instanceof Map&&s.copy_.set(x,T)}},{proxy:k}=a(v.value[1],E);v.value[1]=k}}else if(t==="values"||t===Symbol.iterator.toString()||e===Symbol.iterator)if(t==="values"&&r instanceof Map){const x=_.get(v.value);if(x!==void 0){const E={tracker:s,prop:x,updateMap:T=>{s.copy_ instanceof Map&&s.copy_.set(x,T)}},{proxy:k}=a(v.value,E);v.value=k}}else if(r instanceof Set){const x=v.value,E={tracker:s,prop:x,updateSet:T=>{s.copy_ instanceof Set&&(s.copy_.delete(x),s.copy_.add(T),g.set(x,T))}},{proxy:k}=a(v.value,E);v.value=k}else{const x=Symbol("iterator-value"),{proxy:E}=a(v.value,{tracker:s,prop:x});v.value=E}}return v},[Symbol.iterator](){return this}}}return h}}function Qe(...t){const e=typeof window<"u"&&typeof localStorage<"u";e&&localStorage.getItem("DEBUG")==="true"?console.log("[proxy]",...t):!e&&typeof process<"u"&&qM.DEBUG==="true"&&console.log("[proxy]",...t)}function ps(t,e=new WeakMap){if(t==null||typeof t!="object")return t;if(e.has(t))return e.get(t);if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp)return new RegExp(t.source,t.flags);if(Array.isArray(t)){const s=[];return e.set(t,s),t.forEach((a,l)=>{s[l]=ps(a,e)}),s}if(ArrayBuffer.isView(t)&&!(t instanceof DataView)){const s=Object.getPrototypeOf(t).constructor,a=new s(t.length);e.set(t,a);for(let l=0;l<t.length;l++)a[l]=t[l];return a}if(t instanceof Map){const s=new Map;return e.set(t,s),t.forEach((a,l)=>{s.set(l,ps(a,e))}),s}if(t instanceof Set){const s=new Set;return e.set(t,s),t.forEach(a=>{s.add(ps(a,e))}),s}if(cf(t))return t;const n={};e.set(t,n);for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(n[s]=ps(t[s],e));const r=Object.getOwnPropertySymbols(t);for(const s of r)n[s]=ps(t[s],e);return n}let ww=0;function JM(){return ww+=1,ww}function my(t,e){const n=new Map;function r(p,_){if(Qe("Object ID:",p.constructor.name),n.has(p))return n.get(p);{const g=my(p,_);return n.set(p,g),g}}const s=new Map,a={copy_:ps(t),originalObject:ps(t),proxyCount:JM(),modified:!1,assigned_:{},parent:e,target:t};Qe("createChangeProxy called for target",t,a.proxyCount);function l(p){p.modified||(p.modified=!0),p.parent&&(Qe("propagating change to parent"),"updateMap"in p.parent?p.parent.updateMap(p.copy_):"updateSet"in p.parent?p.parent.updateSet(p.copy_):(p.parent.tracker.copy_[p.parent.prop]=p.copy_,p.parent.tracker.assigned_[p.parent.prop]=!0),l(p.parent.tracker))}function u(p){if(Qe("checkIfReverted called with assigned keys:",Object.keys(p.assigned_)),Object.keys(p.assigned_).length===0&&Object.getOwnPropertySymbols(p.assigned_).length===0)return Qe("No assigned properties, returning true"),!0;for(const g in p.assigned_)if(p.assigned_[g]===!0){const v=p.copy_[g],x=p.originalObject[g];if(Qe(`Checking property ${String(g)}, current:`,v,"original:",x),!Tr(v,x))return Qe(`Property ${String(g)} is different, returning false`),!1}else if(p.assigned_[g]===!1)return Qe(`Property ${String(g)} was deleted, returning false`),!1;const _=Object.getOwnPropertySymbols(p.assigned_);for(const g of _)if(p.assigned_[g]===!0){const v=p.copy_[g],x=p.originalObject[g];if(!Tr(v,x))return Qe("Symbol property is different, returning false"),!1}else if(p.assigned_[g]===!1)return Qe("Symbol property was deleted, returning false"),!1;return Qe("All properties match original values, returning true"),!0}function f(p,_){Qe("checkParentStatus called for child prop:",_);const g=u(p);Qe("Parent checkIfReverted returned:",g),g&&(Qe("Parent is fully reverted, clearing tracking"),p.modified=!1,p.assigned_={},p.parent&&(Qe("Continuing up the parent chain"),f(p.parent.tracker,p.parent.prop)))}function h(p){if(Qe("createObjectProxy",p),s.has(p))return Qe("proxyCache found match"),s.get(p);const _=new Proxy(p,{get(g,v){Qe("get",g,v);const x=a.copy_[v]??a.originalObject[v],E=a.originalObject[v];if(Qe("value (at top of proxy get)",x),Object.getOwnPropertyDescriptor(g,v)?.get)return x;if(typeof x=="function"){if(Array.isArray(g)){const T=v.toString();if(VM.has(T))return xw(x,a,l);const C=KM(T,x,a,r);if(C)return C;if(v===Symbol.iterator)return ZM(a,r)}if(g instanceof Map||g instanceof Set){const T=v.toString();if(HM.has(T))return xw(x,a,l);const C=QM(T,v,x,g,a,r,l);if(C)return C}return x.bind(g)}if(py(x)){const T={tracker:a,prop:String(v)},{proxy:C}=r(E,T);return s.set(x,C),C}return x},set(g,v,x){const E=a.copy_[v];if(Qe(`set called for property ${String(v)}, current:`,E,"new:",x),Tr(E,x))Qe("Value unchanged, not tracking");else{const k=a.originalObject[v],T=Tr(x,k);if(Qe("value:",x,"original:",k,"isRevertToOriginal:",T),T){Qe(`Reverting property ${String(v)} to original value`),delete a.assigned_[v.toString()],Qe(`Updating copy with original value for ${String(v)}`),a.copy_[v]=ps(k),Qe("Checking if all properties reverted");const C=u(a);Qe("All reverted:",C),C?(Qe("All properties reverted, clearing tracking"),a.modified=!1,a.assigned_={},e&&(Qe("Updating parent for property:",e.prop),f(e.tracker,e.prop))):(Qe("Some properties still changed, keeping modified flag"),a.modified=!0)}else Qe(`Setting new value for property ${String(v)}`),a.copy_[v]=x,a.assigned_[v.toString()]=!0,Qe("Marking object and ancestors as modified",a),l(a)}return!0},defineProperty(g,v,x){const E=Reflect.defineProperty(g,v,x);return E&&"value"in x&&(a.copy_[v]=ps(x.value),a.assigned_[v.toString()]=!0,l(a)),E},getOwnPropertyDescriptor(g,v){return Reflect.getOwnPropertyDescriptor(g,v)},preventExtensions(g){return Reflect.preventExtensions(g)},isExtensible(g){return Reflect.isExtensible(g)},deleteProperty(g,v){Qe("deleteProperty",g,v);const x=typeof v=="symbol"?v.toString():v;if(x in g){const E=x in a.originalObject,k=Reflect.deleteProperty(g,v);return k&&(E?(a.assigned_[x]=!1,l(a)):(delete a.assigned_[x],Object.keys(a.assigned_).length===0&&Object.getOwnPropertySymbols(a.assigned_).length===0?a.modified=!1:a.modified=!0)),k}return!0}});return s.set(p,_),_}return{proxy:h(a.copy_),getChanges:()=>{if(Qe("getChanges called, modified:",a.modified),Qe(a),!a.modified)return Qe("Object not modified, returning empty object"),{};if(typeof a.copy_!="object"||Array.isArray(a.copy_)||Object.keys(a.assigned_).length===0)return a.copy_;const p={};for(const _ in a.copy_)a.assigned_[_]===!0&&_ in a.copy_&&(p[_]=a.copy_[_]);return Qe("Returning copy:",p),p}}}function YM(t){const e=t.map(n=>my(n));return{proxies:e.map(n=>n.proxy),getChanges:()=>e.map(n=>n.getChanges())}}function XM(t,e){const{proxy:n,getChanges:r}=my(t);return e(n),r()}function WM(t,e){const{proxies:n,getChanges:r}=YM(t);return e(n),r()}function eD(){let t,e,n=!0;return{promise:new Promise((s,a)=>{t=l=>{n=!1,s(l)},e=l=>{n=!1,a(l)}}),resolve:t,reject:e,isPending:()=>n}}function tD(t){return typeof t=="object"&&t!==null&&typeof t.hasPendingGraphRun=="function"}class nD{constructor(){this.contexts=new Map,this.clearListeners=new Set}getOrCreateContext(e){let n=this.contexts.get(e);return n||(n={queue:[],jobs:new Map,dependencies:new Map,completed:new Set},this.contexts.set(e,n)),n}schedule({contextId:e,jobId:n,dependencies:r,run:s}){if(typeof e>"u"){s();return}const a=this.getOrCreateContext(e);if(a.jobs.has(n)||a.queue.push(n),a.jobs.set(n,s),r){const l=new Set(r);l.delete(n),a.dependencies.set(n,l)}else a.dependencies.has(n)||a.dependencies.set(n,new Set);a.completed.delete(n)}flush(e){const n=this.contexts.get(e);if(!n)return;const{queue:r,jobs:s,dependencies:a,completed:l}=n;for(;r.length>0;){let u=!1;const f=r.length;for(let h=0;h<f;h++){const m=r.shift(),p=s.get(m);if(!p){a.delete(m),l.delete(m);continue}const _=a.get(m);let g=!_;if(_){g=!0;for(const v of _){if(v===m)continue;const x=tD(v)&&v.hasPendingGraphRun(e);if(s.has(v)&&!l.has(v)||!s.has(v)&&x){g=!1;break}}}g?(s.delete(m),a.delete(m),p(),l.add(m),u=!0):r.push(m)}if(!u)throw new Error(`Scheduler detected unresolved dependencies for context ${String(e)}.`)}this.contexts.delete(e)}flushAll(){for(const e of Array.from(this.contexts.keys()))this.flush(e)}clear(e){this.contexts.delete(e),this.clearListeners.forEach(n=>n(e))}onClear(e){return this.clearListeners.add(e),()=>this.clearListeners.delete(e)}hasPendingJobs(e){const n=this.contexts.get(e);return!!n&&n.jobs.size>0}clearJob(e,n){const r=this.contexts.get(e);r&&(r.jobs.delete(n),r.dependencies.delete(n),r.completed.delete(n),r.queue=r.queue.filter(s=>s!==n),r.jobs.size===0&&this.contexts.delete(e))}}const df=new nD,pf=[];let Ll=[],rD=0;function sD(t,e){switch(`${t.type}-${e.type}`){case"insert-update":return{...t,type:"insert",original:{},modified:e.modified,changes:{...t.changes,...e.changes},key:t.key,globalKey:t.globalKey,metadata:e.metadata??t.metadata,syncMetadata:{...t.syncMetadata,...e.syncMetadata},mutationId:e.mutationId,updatedAt:e.updatedAt};case"insert-delete":return null;case"update-delete":return e;case"update-update":return{...e,original:t.original,changes:{...t.changes,...e.changes},metadata:e.metadata??t.metadata,syncMetadata:{...t.syncMetadata,...e.syncMetadata}};case"delete-delete":case"insert-insert":return e;default:{const n=`${t.type}-${e.type}`;throw new Error(`Unhandled mutation combination: ${n}`)}}}function ku(t){const e=new lD(t);return pf.push(e),e}function Hu(){if(Ll.length>0)return Ll.slice(-1)[0]}function iD(t){df.clear(t.id),Ll.push(t)}function aD(t){try{df.flush(t.id)}finally{Ll=Ll.filter(e=>e.id!==t.id)}}function oD(t){const e=pf.findIndex(n=>n.id===t.id);e!==-1&&pf.splice(e,1)}class lD{constructor(e){if(typeof e.mutationFn>"u")throw new WO;this.id=e.id??crypto.randomUUID(),this.mutationFn=e.mutationFn,this.state="pending",this.mutations=[],this.isPersisted=eD(),this.autoCommit=e.autoCommit??!0,this.createdAt=new Date,this.sequenceNumber=rD++,this.metadata=e.metadata??{}}setState(e){this.state=e,(e==="completed"||e==="failed")&&oD(this)}mutate(e){if(this.state!=="pending")throw new eI;iD(this);try{e()}finally{aD(this)}return this.autoCommit&&this.commit().catch(()=>{}),this}applyMutations(e){for(const n of e){const r=this.mutations.findIndex(s=>s.globalKey===n.globalKey);if(r>=0){const s=this.mutations[r],a=sD(s,n);a===null?this.mutations.splice(r,1):this.mutations[r]=a}else this.mutations.push(n)}}rollback(e){const n=e?.isSecondaryRollback??!1;if(this.state==="completed")throw new tI;if(this.setState("failed"),!n){const r=new Set;this.mutations.forEach(s=>r.add(s.globalKey));for(const s of pf)s.state==="pending"&&s.mutations.some(a=>r.has(a.globalKey))&&s.rollback({isSecondaryRollback:!0})}return this.isPersisted.reject(this.error?.error),this.touchCollection(),this}touchCollection(){const e=new Set;for(const n of this.mutations)e.has(n.collection.id)||(n.collection._state.onTransactionStateChange(),n.collection._state.pendingSyncedTransactions.length>0&&n.collection._state.commitPendingTransactions(),e.add(n.collection.id))}async commit(){if(this.state!=="pending")throw new nI;if(this.setState("persisting"),this.mutations.length===0)return this.setState("completed"),this.isPersisted.resolve(this),this;try{await this.mutationFn({transaction:this}),this.setState("completed"),this.touchCollection(),this.isPersisted.resolve(this)}catch(e){const n=e instanceof Error?e:new Error(String(e));throw this.error={message:n.message,error:n},this.rollback(),n}return this}compareCreatedAt(e){const n=this.createdAt.getTime()-e.createdAt.getTime();return n!==0?n:this.sequenceNumber-e.sequenceNumber}}class cD{constructor(e,n){this.insert=(r,s)=>{this.lifecycle.validateCollectionUsable("insert");const a=this.state,l=Hu();if(!l&&!this.config.onInsert)throw new JO;const u=Array.isArray(r)?r:[r],f=[],h=new Set;if(u.forEach(m=>{const p=this.validateData(m,"insert"),_=this.config.getKey(p);if(this.state.has(_)||h.has(_))throw new qO(_);h.add(_);const g=this.generateGlobalKey(_,m),v={mutationId:crypto.randomUUID(),original:{},modified:p,changes:Object.fromEntries(Object.keys(m).map(x=>[x,p[x]])),globalKey:g,key:_,metadata:s?.metadata,syncMetadata:this.config.sync.getSyncMetadata?.()||{},optimistic:s?.optimistic??!0,type:"insert",createdAt:new Date,updatedAt:new Date,collection:this.collection};f.push(v)}),l)return l.applyMutations(f),a.transactions.set(l.id,l),a.scheduleTransactionCleanup(l),a.recomputeOptimisticState(!0),l;{const m=ku({mutationFn:async p=>await this.config.onInsert({transaction:p.transaction,collection:this.collection})});return m.applyMutations(f),m.commit().catch(()=>{}),a.transactions.set(m.id,m),a.scheduleTransactionCleanup(m),a.recomputeOptimisticState(!0),m}},this.delete=(r,s)=>{const a=this.state;this.lifecycle.validateCollectionUsable("delete");const l=Hu();if(!l&&!this.config.onDelete)throw new XO;if(Array.isArray(r)&&r.length===0)throw new ZO;const u=Array.isArray(r)?r:[r],f=[];for(const m of u){if(!this.state.has(m))throw new QO(m);const p=this.generateGlobalKey(m,this.state.get(m)),_={mutationId:crypto.randomUUID(),original:this.state.get(m),modified:this.state.get(m),changes:this.state.get(m),globalKey:p,key:m,metadata:s?.metadata,syncMetadata:a.syncedMetadata.get(m)||{},optimistic:s?.optimistic??!0,type:"delete",createdAt:new Date,updatedAt:new Date,collection:this.collection};f.push(_)}if(l)return l.applyMutations(f),a.transactions.set(l.id,l),a.scheduleTransactionCleanup(l),a.recomputeOptimisticState(!0),l;const h=ku({autoCommit:!0,mutationFn:async m=>this.config.onDelete({transaction:m.transaction,collection:this.collection})});return h.applyMutations(f),h.commit().catch(()=>{}),a.transactions.set(h.id,h),a.scheduleTransactionCleanup(h),a.recomputeOptimisticState(!0),h},this.id=n,this.config=e}setDeps(e){this.lifecycle=e.lifecycle,this.state=e.state,this.collection=e.collection}ensureStandardSchema(e){if(e&&"~standard"in e)return e;throw new LO}validateData(e,n,r){if(!this.config.schema)return e;const s=this.ensureStandardSchema(this.config.schema);if(n==="update"&&r){const l=this.state.get(r);if(l&&e&&typeof e=="object"&&typeof l=="object"){const u=Object.assign({},l,e),f=s["~standard"].validate(u);if(f instanceof Promise)throw new Xx;if("issues"in f&&f.issues){const _=f.issues.map(g=>({message:g.message,path:g.path?.map(v=>String(v))}));throw new Yx(n,_)}const h=f.value,m=Object.keys(e);return Object.fromEntries(m.map(_=>[_,h[_]]))}}const a=s["~standard"].validate(e);if(a instanceof Promise)throw new Xx;if("issues"in a&&a.issues){const l=a.issues.map(u=>({message:u.message,path:u.path?.map(f=>String(f))}));throw new Yx(n,l)}return a.value}generateGlobalKey(e,n){if(typeof e!="string"&&typeof e!="number")throw typeof e>"u"?new UO(n):new $O(e,n);return`KEY::${this.id}/${e}`}update(e,n,r){if(typeof e>"u")throw new VO;const s=this.state;this.lifecycle.validateCollectionUsable("update");const a=Hu();if(!a&&!this.config.onUpdate)throw new YO;const l=Array.isArray(e),u=l?e:[e];if(l&&u.length===0)throw new HO;const f=typeof n=="function"?n:r,h=typeof n=="function"?{}:n,m=u.map(v=>{const x=this.state.get(v);if(!x)throw new GO(v);return x});let p;l?p=WM(m,f):p=[XM(m[0],f)];const _=u.map((v,x)=>{const E=p[x];if(!E||Object.keys(E).length===0)return null;const k=m[x],T=this.validateData(E,"update",v),C=Object.assign({},k,T),j=this.config.getKey(k),D=this.config.getKey(C);if(j!==D)throw new KO(j,D);const I=this.generateGlobalKey(D,C);return{mutationId:crypto.randomUUID(),original:k,modified:C,changes:Object.fromEntries(Object.keys(E).map(U=>[U,C[U]])),globalKey:I,key:v,metadata:h.metadata,syncMetadata:s.syncedMetadata.get(v)||{},optimistic:h.optimistic??!0,type:"update",createdAt:new Date,updatedAt:new Date,collection:this.collection}}).filter(Boolean);if(_.length===0){const v=ku({mutationFn:async()=>{}});return v.commit().catch(()=>{}),s.scheduleTransactionCleanup(v),v}if(a)return a.applyMutations(_),s.transactions.set(a.id,a),s.scheduleTransactionCleanup(a),s.recomputeOptimisticState(!0),a;const g=ku({mutationFn:async v=>this.config.onUpdate({transaction:v.transaction,collection:this.collection})});return g.applyMutations(_),g.commit().catch(()=>{}),s.transactions.set(g.id,g),s.scheduleTransactionCleanup(g),s.recomputeOptimisticState(!0),g}}class uD extends fk{constructor(){super()}setDeps(e){this.collection=e.collection}emit(e,n){this.emitInner(e,n)}emitStatusChange(e,n){this.emit("status:change",{type:"status:change",collection:this.collection,previousStatus:n,status:e});const r=`status:${e}`;this.emit(r,{type:r,collection:this.collection,previousStatus:n,status:e})}emitSubscribersChange(e,n){this.emit("subscribers:change",{type:"subscribers:change",collection:this.collection,previousSubscriberCount:n,subscriberCount:e})}cleanup(){this.clearListeners()}}function dk(t){const e=new gy(t);return t.utils?e.utils=t.utils:e.utils={},e}class gy{constructor(e){if(this.utils={},this.insert=(n,r)=>this._mutations.insert(n,r),this.delete=(n,r)=>this._mutations.delete(n,r),!e)throw new MO;if(!e.sync)throw new DO;e.id?this.id=e.id:this.id=crypto.randomUUID(),this.config={...e,autoIndex:e.autoIndex??"eager"},this._changes=new IM,this._events=new uD,this._indexes=new $M,this._lifecycle=new LM(e,this.id),this._mutations=new cD(e,this.id),this._state=new AM(e),this._sync=new zM(e,this.id),this.comparisonOpts=fD(e),this._changes.setDeps({collection:this,lifecycle:this._lifecycle,sync:this._sync,events:this._events}),this._events.setDeps({collection:this}),this._indexes.setDeps({state:this._state,lifecycle:this._lifecycle}),this._lifecycle.setDeps({changes:this._changes,events:this._events,indexes:this._indexes,state:this._state,sync:this._sync}),this._mutations.setDeps({collection:this,lifecycle:this._lifecycle,state:this._state}),this._state.setDeps({collection:this,lifecycle:this._lifecycle,changes:this._changes,indexes:this._indexes,events:this._events}),this._sync.setDeps({collection:this,state:this._state,lifecycle:this._lifecycle,events:this._events}),e.startSync===!0&&this._sync.startSync()}get status(){return this._lifecycle.status}get subscriberCount(){return this._changes.activeSubscribersCount}onFirstReady(e){return this._lifecycle.onFirstReady(e)}isReady(){return this._lifecycle.status==="ready"}get isLoadingSubset(){return this._sync.isLoadingSubset}startSyncImmediate(){this._sync.startSync()}preload(){return this._sync.preload()}get(e){return this._state.get(e)}has(e){return this._state.has(e)}get size(){return this._state.size}*keys(){yield*this._state.keys()}*values(){yield*this._state.values()}*entries(){yield*this._state.entries()}*[Symbol.iterator](){yield*this._state[Symbol.iterator]()}forEach(e){return this._state.forEach(e)}map(e){return this._state.map(e)}getKeyFromItem(e){return this.config.getKey(e)}createIndex(e,n={}){return this._indexes.createIndex(e,n)}get indexes(){return this._indexes.indexes}validateData(e,n,r){return this._mutations.validateData(e,n,r)}get compareOptions(){return{...this.comparisonOpts}}update(e,n,r){return this._mutations.update(e,n,r)}get state(){const e=new Map;for(const[n,r]of this.entries())e.set(n,r);return e}stateWhenReady(){return this.size>0||this.isReady()?Promise.resolve(this.state):this.preload().then(()=>this.state)}get toArray(){return Array.from(this.values())}toArrayWhenReady(){return this.size>0||this.isReady()?Promise.resolve(this.toArray):this.preload().then(()=>this.toArray)}currentStateAsChanges(e={}){return EM(this,e)}subscribeChanges(e,n={}){return this._changes.subscribeChanges(e,n)}on(e,n){return this._events.on(e,n)}once(e,n){return this._events.once(e,n)}off(e,n){this._events.off(e,n)}waitFor(e,n){return this._events.waitFor(e,n)}async cleanup(){return this._lifecycle.cleanup(),Promise.resolve()}}function fD(t){if(t.defaultStringCollation){const e=t.defaultStringCollation;return{stringSort:e.stringSort??"locale",locale:e.stringSort==="locale"?e.locale:void 0,localeOptions:e.stringSort==="locale"?e.localeOptions:void 0}}else return{stringSort:"locale"}}class Ft{constructor(e={}){this.query={},this.query={...e}}_createRefForSource(e,n){let r;try{r=Object.keys(e)}catch{const u=e===null?"null":"undefined";throw new wu(n,u)}if(Array.isArray(e))throw new wu(n,"array");if(r.length!==1)throw r.length===0?new wu(n,"empty object"):r.every(u=>!isNaN(Number(u)))?new wu(n,"string"):new iI(n);const s=r[0],a=e[s];let l;if(a instanceof gy)l=new Ha(a,s);else if(a instanceof Ft){const u=a._getQuery();if(!u.from)throw new aI(n);l=new _r(u,s)}else throw new oI(s);return[s,l]}from(e){const[,n]=this._createRefForSource(e,"from clause");return new Ft({...this.query,from:n})}join(e,n,r="left"){const[s,a]=this._createRefForSource(e,"join clause"),u=[...this._getCurrentAliases(),s],f=Sa(u),h=n(f);let m,p;if(h.type==="func"&&h.name==="eq"&&h.args.length===2)m=h.args[0],p=h.args[1];else throw new lI;const _={from:a,type:r,left:m,right:p},g=this.query.join||[];return new Ft({...this.query,join:[...g,_]})}leftJoin(e,n){return this.join(e,n,"left")}rightJoin(e,n){return this.join(e,n,"right")}innerJoin(e,n){return this.join(e,n,"inner")}fullJoin(e,n){return this.join(e,n,"full")}where(e){const n=this._getCurrentAliases(),r=Sa(n),s=e(r),a=this.query.where||[];return new Ft({...this.query,where:[...a,s]})}having(e){const n=this._getCurrentAliases(),r=Sa(n),s=e(r),a=this.query.having||[];return new Ft({...this.query,having:[...a,s]})}select(e){const n=this._getCurrentAliases(),r=Sa(n),s=e(r),a=pk(s);return new Ft({...this.query,select:a,fnSelect:void 0})}orderBy(e,n="asc"){const r=this._getCurrentAliases(),s=Sa(r),a=e(s),l=typeof n=="string"?{direction:n,nulls:"first"}:{direction:n.direction??"asc",nulls:n.nulls??"first",stringSort:n.stringSort,locale:n.stringSort==="locale"?n.locale:void 0,localeOptions:n.stringSort==="locale"?n.localeOptions:void 0},u=m=>({expression:en(m),compareOptions:l}),f=Array.isArray(a)?a.map(m=>u(m)):[u(a)],h=this.query.orderBy||[];return new Ft({...this.query,orderBy:[...h,...f]})}groupBy(e){const n=this._getCurrentAliases(),r=Sa(n),s=e(r),a=Array.isArray(s)?s.map(u=>en(u)):[en(s)],l=this.query.groupBy||[];return new Ft({...this.query,groupBy:[...l,...a]})}limit(e){return new Ft({...this.query,limit:e})}offset(e){return new Ft({...this.query,offset:e})}distinct(){return new Ft({...this.query,distinct:!0})}findOne(){return new Ft({...this.query,singleResult:!0})}_getCurrentAliases(){const e=[];if(this.query.from&&e.push(this.query.from.alias),this.query.join)for(const n of this.query.join)e.push(n.from.alias);return e}get fn(){const e=this;return{select(n){return new Ft({...e.query,select:void 0,fnSelect:n})},where(n){return new Ft({...e.query,fnWhere:[...e.query.fnWhere||[],n]})},having(n){return new Ft({...e.query,fnHaving:[...e.query.fnHaving||[],n]})}}}_getQuery(){if(!this.query.from)throw new cI;return this.query}}function hD(t){return t===void 0?en(null):t instanceof rk||t instanceof vr||t instanceof Rn||t instanceof Un?t:en(t)}function dD(t){return t!==null&&typeof t=="object"&&!ry(t)&&!t.__refProxy}function pk(t){if(!dD(t))return hD(t);const e={};for(const[n,r]of Object.entries(t)){if(typeof n=="string"&&n.startsWith("__SPREAD_SENTINEL__")){e[n]=r;continue}e[n]=pk(r)}return e}function pD(t){const e=t(new Ft);return mk(e)}function mk(t){return t._getQuery()}function mD(t){const e=gD(t);let n=t,r,s=0;const a=10;for(;s<a&&!Tr(n,r);)r=n,n=tg(n),s++;return{optimizedQuery:gk(n),sourceWhereClauses:e}}function gD(t){const e=new Map;if(!t.where||t.where.length===0)return e;const r=rg(t.where).map(a=>yk(a)),s=_k(r);for(const[a,l]of s.singleSource)yD(t,a)&&e.set(a,l);return e}function yD(t,e){if(t.from.alias===e)return t.from.type==="collectionRef";if(t.join){for(const n of t.join)if(n.from.alias===e)return n.from.type==="collectionRef"}return!1}function tg(t){const e={...t,from:t.from.type==="queryRef"?new _r(tg(t.from.query),t.from.alias):t.from,join:t.join?.map(n=>({...n,from:n.from.type==="queryRef"?new _r(tg(n.from.query),n.from.alias):n.from}))};return _D(e)}function _D(t){if(!t.where||t.where.length===0)return t;if(!t.join||t.join.length===0){if(t.where.length>1){const u=rg(t.where),f=mf(u);return{...t,where:[f]}}return t}const e=t.where.filter(u=>!Jx(u)),r=rg(e).map(u=>yk(u)),s=_k(r),a=vD(t,s),l=t.where.filter(u=>Jx(u));return l.length>0&&(a.where=[...a.where||[],...l]),a}function gk(t){return{...t,from:ng(t.from),join:t.join?.map(e=>({...e,from:ng(e.from)}))}}function ng(t){if(t.type==="collectionRef")return t;const e=gk(t.query);if(bD(e)){const n=ng(e.from);return n.type==="collectionRef"?new Ha(n.collection,t.alias):new _r(n.query,t.alias)}return new _r(e,t.alias)}function bD(t){return(!t.where||t.where.length===0)&&!t.select&&(!t.groupBy||t.groupBy.length===0)&&(!t.having||t.having.length===0)&&(!t.orderBy||t.orderBy.length===0)&&(!t.join||t.join.length===0)&&t.limit===void 0&&t.offset===void 0&&!t.fnSelect&&(!t.fnWhere||t.fnWhere.length===0)&&(!t.fnHaving||t.fnHaving.length===0)}function rg(t){const e=[];for(const n of t){const r=sy(n);e.push(...yy(r))}return e}function yy(t){if(t.type==="func"&&t.name==="and"){const e=[];for(const n of t.args)e.push(...yy(n));return e}else return[t]}function yk(t){const e=new Set;let n=!1;function r(s){switch(s.type){case"ref":if(s.path&&s.path.length>0){const a=s.path[0];a&&(e.add(a),s.path.length===1&&(n=!0))}break;case"func":s.args&&s.args.forEach(r);break;case"val":break;case"agg":s.args&&s.args.forEach(r);break}}return r(t),{expression:t,touchedSources:e,hasNamespaceOnlyRef:n}}function _k(t){const e=new Map,n=[];for(const a of t)if(a.touchedSources.size===1&&!a.hasNamespaceOnlyRef){const l=Array.from(a.touchedSources)[0];e.has(l)||e.set(l,[]),e.get(l).push(a.expression)}else(a.touchedSources.size>1||a.hasNamespaceOnlyRef)&&n.push(a.expression);const r=new Map;for(const[a,l]of e)r.set(a,mf(l));const s=n.length>0?mf(n):void 0;return{singleSource:r,multiSource:s}}function vD(t,e){const n=new Set,r=Sw(t.from,e.singleSource,n),s=t.join?t.join.map(h=>({...h,from:Sw(h.from,e.singleSource,n)})):void 0,a=[];e.multiSource&&a.push(e.multiSource);const l=t.join&&t.join.some(h=>h.type==="left"||h.type==="right"||h.type==="full");for(const[h,m]of e.singleSource)n.has(h)?l&&a.push(IO(m)):a.push(m);const u=a.length>1?[mf(a.flatMap(h=>yy(sy(h))))]:a;return{select:t.select,groupBy:t.groupBy?[...t.groupBy]:void 0,having:t.having?[...t.having]:void 0,orderBy:t.orderBy?[...t.orderBy]:void 0,limit:t.limit,offset:t.offset,distinct:t.distinct,fnSelect:t.fnSelect,fnWhere:t.fnWhere?[...t.fnWhere]:void 0,fnHaving:t.fnHaving?[...t.fnHaving]:void 0,from:r,join:s,where:u.length>0?u:[]}}function Da(t){return{from:t.from.type==="collectionRef"?new Ha(t.from.collection,t.from.alias):new _r(Da(t.from.query),t.from.alias),select:t.select,join:t.join?t.join.map(e=>({type:e.type,left:e.left,right:e.right,from:e.from.type==="collectionRef"?new Ha(e.from.collection,e.from.alias):new _r(Da(e.from.query),e.from.alias)})):void 0,where:t.where?[...t.where]:void 0,groupBy:t.groupBy?[...t.groupBy]:void 0,having:t.having?[...t.having]:void 0,orderBy:t.orderBy?[...t.orderBy]:void 0,limit:t.limit,offset:t.offset,fnSelect:t.fnSelect,fnWhere:t.fnWhere?[...t.fnWhere]:void 0,fnHaving:t.fnHaving?[...t.fnHaving]:void 0}}function Sw(t,e,n){const r=e.get(t.alias);if(!r)return t.type==="collectionRef"?new Ha(t.collection,t.alias):new _r(Da(t.query),t.alias);if(t.type==="collectionRef"){const l={from:new Ha(t.collection,t.alias),where:[r]};return n.add(t.alias),new _r(l,t.alias)}if(!CD(t.query,r,t.alias))return new _r(Da(t.query),t.alias);if(AD(t.query,r,t.alias))return new _r(Da(t.query),t.alias);const s=t.query.where||[],a={...Da(t.query),where:[...s,r]};return n.add(t.alias),new _r(a,t.alias)}function xD(t,e,n){return t.select?bk(t.select)||TD(t.select,e,n):!1}function wD(t){return t.groupBy&&t.groupBy.length>0}function SD(t){return t.having&&t.having.length>0}function kD(t){return t.orderBy&&t.orderBy.length>0&&(t.limit!==void 0||t.offset!==void 0)}function ED(t){return t.fnSelect||t.fnWhere&&t.fnWhere.length>0||t.fnHaving&&t.fnHaving.length>0}function CD(t,e,n){return!(xD(t,e,n)||wD(t)||SD(t)||kD(t)||ED(t))}function bk(t){for(const e of Object.values(t))if(typeof e=="object"){const n=e;if(n.type==="agg"||!("type"in n)&&bk(n))return!0}return!1}function _y(t){const e=[];if(t==null||typeof t!="object")return e;switch(t.type){case"ref":e.push(t);break;case"func":case"agg":for(const n of t.args??[])e.push(..._y(n));break}return e}function TD(t,e,n){const r=new Set;for(const[a,l]of Object.entries(t))a.startsWith("__SPREAD_SENTINEL__")||l instanceof Rn||r.add(a);const s=_y(e);for(const a of s){const l=a.path;if(!Array.isArray(l)||l.length<2)continue;const u=l[0],f=l[1];if(u===n&&r.has(f))return!0}return!1}function AD(t,e,n){const r=_y(e);if(r.every(a=>a.path[0]!==n))return!1;if(t.fnSelect)return!0;const s=t.select;if(!s)return!1;for(const a of r){const l=a.path;if(l.length<2||l[0]!==n)continue;const u=s[l[1]];if(!u)continue;if(!(u instanceof Rn)||u.path.length<2)return!0;const[f,h]=u.path;if(f!==n&&f!==t.from.alias||h!==l[1])return!0}return!1}function mf(t){if(t.length===0)throw new OI;return t.length===1?t[0]:new vr("and",t)}function RD(t,e,n,r,s,a,l,u,f,h,m,p,_,g,v,x,E,k){let T=t;for(const C of e)T=OD(T,C,n,r,s,a,l,u,f,h,m,p,_,g,v,x,E,k);return T}function OD(t,e,n,r,s,a,l,u,f,h,m,p,_,g,v,x,E,k){const T=e.from.type==="collectionRef",{alias:C,input:j,collectionId:D}=ND(e.from,a,f,h,m,p,_,g,l,u,x,E,k);n[C]=j,T&&(E[C]=D);const I=f[r],U=f[D];if(!I)throw new tw(r);if(!U)throw new tw(D);const{activeSource:V,lazySource:H}=DD(e.type,I,U),P=Object.keys(n),{mainExpr:Q,joinedExpr:ne}=ID(e.left,e.right,P,C),me=$n(Q),z=$n(ne);let M=t.pipe(Tn(([G,re])=>[me(re),[G,re]])),B=j.pipe(Tn(([G,re])=>{const J={[C]:re};return[z(J),[G,J]]}));if(!["inner","left","right","full"].includes(e.type))throw new _I(e.type);if(V){const G=V==="main"?e.from:v.from,re=G.type==="queryRef"&&(G.query.limit||G.query.offset),J=Q.type==="func"||ne.type==="func";if(!re&&!J){const R=V==="main"?C:s;p.add(R);const N=V==="main"?M:B,O=Nl(v,V==="main"?ne:Q,H),ie=O.collection,pe=O.path[0];pe&&eh(pe,O.path,ie);const de=N.pipe($N(we=>{const Me=k[R]||R,Ae=h[Me];if(!Ae)throw new II(Me,R,H.id,Object.keys(h));if(Ae.hasLoadedInitialState())return;const rt=we.getInner().map(([[tn]])=>tn),ht=new Rn(O.path);Ae.requestSnapshot({where:dM(ht,rt),optimizedOnly:!0})||Ae.requestSnapshot()}));V==="main"?M=de:B=de}}return M.pipe(ZN(B,e.type),MD(e.type))}function ID(t,e,n,r){const s=n.filter(u=>u!==r),a=sg(t),l=sg(e);if(a&&s.includes(a)&&l===r)return{mainExpr:t,joinedExpr:e};if(a===r&&l&&s.includes(l))return{mainExpr:e,joinedExpr:t};throw!a||!l?new vI:a===l?new bI(a):s.includes(a)?l!==r?new wI(r):new SI:new xI(a)}function sg(t){switch(t.type){case"ref":return t.path[0]||null;case"func":{const e=new Set;for(const n of t.args){const r=sg(n);r&&e.add(r)}return e.size===1?Array.from(e)[0]:null}default:return null}}function ND(t,e,n,r,s,a,l,u,f,h,m,p,_){switch(t.type){case"collectionRef":{const g=e[t.alias];if(!g)throw new sk(t.alias,t.collection.id,Object.keys(e));return p[t.alias]=t.collection.id,{alias:t.alias,input:g,collectionId:t.collection.id}}case"queryRef":{const g=h.get(t.query)||t.query,v=m(g,e,n,r,s,a,l,u,f,h);Object.assign(p,v.aliasToCollectionId),Object.assign(_,v.aliasRemapping);const x=Object.keys(v.aliasToCollectionId).find(T=>v.aliasToCollectionId[T]===v.collectionId);x&&x!==t.alias&&(_[t.alias]=x);const k=v.pipeline.pipe(Tn(T=>{const[C,[j,D]]=T;return[C,j]}));return{alias:t.alias,input:k,collectionId:v.collectionId}}default:throw new kI(t.type)}}function MD(t){return function(e){return e.pipe(Zs(n=>{const[r,[s,a]]=n,l=s?.[1],u=a?.[1];return t==="inner"?!!(l&&u):t==="left"?!!l:t==="right"?!!u:!0}),Tn(n=>{const[r,[s,a]]=n,l=s?.[0],u=s?.[1],f=a?.[0],h=a?.[1],m={};return u&&Object.assign(m,u),h&&Object.assign(m,h),[`[${l},${f}]`,m]}))}}function DD(t,e,n){switch(t){case"left":return{activeSource:"main",lazySource:n};case"right":return{activeSource:"joined",lazySource:e};case"inner":return e.size<n.size?{activeSource:"main",lazySource:n}:{activeSource:"joined",lazySource:e};default:return{activeSource:void 0,lazySource:void 0}}}function ig(t){return t instanceof Un?t.value:t}function LD(t,e,n){const r=t.source(e);if(r&&typeof r=="object"){let s=n;const a=t.targetPath;if(a.length===0)for(const[l,u]of Object.entries(r))n[l]=ig(u);else for(let l=0;l<a.length;l++){const u=a[l];if(l===a.length-1){const f=s[u]??={};if(typeof f=="object")for(const[h,m]of Object.entries(r))f[h]=ig(m)}else{const f=s[u];(f==null||typeof f!="object")&&(s[u]={}),s=s[u]}}}}function zD(t,e,n){const r=t.alias.split(".");if(r.length===1)n[t.alias]=t.compiled(e);else{let s=n;for(let a=0;a<r.length-1;a++){const l=r[a],u=s[l];(u==null||typeof u!="object")&&(s[l]={}),s=s[l]}s[r[r.length-1]]=ig(t.compiled(e))}}function jD([t,e],n){const r={};for(const s of n)s.kind==="merge"?LD(s,e,r):zD(s,e,r);return[t,{...e,__select_results:r}]}function PD(t,e,n){const r=[];return vk([],e,r),t.pipe(Tn(s=>jD(s,r)))}function BD(t){return t.type==="agg"}function UD(t){return t&&typeof t=="object"&&!ry(t)}function vk(t,e,n){for(const[r,s]of Object.entries(e)){if(r.startsWith("__SPREAD_SENTINEL__")){const l=r.slice(19),u=l.lastIndexOf("__"),f=u>=0?l.slice(0,u):l,h=s&&typeof s=="object"&&"type"in s&&s.type==="ref";if(f.includes(".")||h){const m=[...t],p=h?s:new Rn(f.split(".")),_=$n(p);n.push({kind:"merge",targetPath:m,source:_})}else{const m=f,p=[...t];n.push({kind:"merge",targetPath:p,source:_=>_[m]})}continue}const a=s;if(UD(a)){vk([...t,r],a,n);continue}if(BD(a))n.push({kind:"field",alias:[...t,r].join("."),compiled:()=>null});else{if(a===void 0||!ry(a)){n.push({kind:"field",alias:[...t,r].join("."),compiled:()=>a});continue}if(a instanceof Un){const l=a.value;n.push({kind:"field",alias:[...t,r].join("."),compiled:()=>l})}else n.push({kind:"field",alias:[...t,r].join("."),compiled:$n(a)})}}}function by(t,e,n,r,s,a,l,u,f=new WeakMap,h=new WeakMap){const m=f.get(t);if(m)return m;ag(t);const{optimizedQuery:p,sourceWhereClauses:_}=mD(t);h.set(p,t),lg(p,t,h);const g={...e},v={},x={},E={},{alias:k,input:T,collectionId:C}=qD(p.from,g,n,r,s,a,l,u,f,h,v,x);E[k]=T;let j=T.pipe(Tn(([V,H])=>[V,{[k]:H}]));if(p.join&&p.join.length>0&&(j=RD(j,p.join,E,C,k,g,f,h,n,r,s,a,l,u,t,by,v,x)),p.where&&p.where.length>0)for(const V of p.where){const H=sy(V),P=$n(H);j=j.pipe(Zs(([Q,ne])=>Ba(P(ne))))}if(p.fnWhere&&p.fnWhere.length>0)for(const V of p.fnWhere)j=j.pipe(Zs(([H,P])=>Ba(V(P))));if(p.distinct&&!p.fnSelect&&!p.select)throw new uI;if(p.fnSelect?j=j.pipe(Tn(([V,H])=>{const P=p.fnSelect(H);return[V,{...H,__select_results:P}]})):p.select?j=PD(j,p.select):j=j.pipe(Tn(([V,H])=>{const P=!p.join&&!p.groupBy?H[k]:H;return[V,{...H,__select_results:P}]})),p.groupBy&&p.groupBy.length>0?j=yw(j,p.groupBy,p.having,p.select,p.fnHaving):p.select&&Object.values(p.select).some(H=>H.type==="agg")&&(j=yw(j,[],p.having,p.select,p.fnHaving)),p.having&&(!p.groupBy||p.groupBy.length===0)&&!(p.select?Object.values(p.select).some(H=>H.type==="agg"):!1))throw new fI;if(p.fnHaving&&p.fnHaving.length>0&&(!p.groupBy||p.groupBy.length===0))for(const V of p.fnHaving)j=j.pipe(Zs(([H,P])=>V(P)));if(p.distinct&&(j=j.pipe(JN(([V,H])=>H.__select_results))),p.orderBy&&p.orderBy.length>0){const P=kM(t,j,p.orderBy,p.select||{},n[C],l,u,p.limit,p.offset).pipe(Tn(([ne,[me,z]])=>{const M=me.__select_results,B=og(M);return[ne,[B,z]]})),Q={collectionId:C,pipeline:P,sourceWhereClauses:_,aliasToCollectionId:v,aliasRemapping:x};return f.set(t,Q),Q}else if(p.limit!==void 0||p.offset!==void 0)throw new hI;const I=j.pipe(Tn(([V,H])=>{const P=H.__select_results,Q=og(P);return[V,[Q,void 0]]})),U={collectionId:C,pipeline:I,sourceWhereClauses:_,aliasToCollectionId:v,aliasRemapping:x};return f.set(t,U),U}function $D(t){const e=new Set;if(t.from.type==="collectionRef"&&e.add(t.from.alias),t.join)for(const n of t.join)n.from.type==="collectionRef"&&e.add(n.from.alias);return e}function ag(t,e=new Set){const n=$D(t);for(const s of n)if(e.has(s))throw new dI(s,Array.from(e));const r=new Set([...e,...n]);if(t.from.type==="queryRef"&&ag(t.from.query,r),t.join)for(const s of t.join)s.from.type==="queryRef"&&ag(s.from.query,r)}function qD(t,e,n,r,s,a,l,u,f,h,m,p){switch(t.type){case"collectionRef":{const _=e[t.alias];if(!_)throw new sk(t.alias,t.collection.id,Object.keys(e));return m[t.alias]=t.collection.id,{alias:t.alias,input:_,collectionId:t.collection.id}}case"queryRef":{const _=h.get(t.query)||t.query,g=by(_,e,n,r,s,a,l,u,f,h);Object.assign(m,g.aliasToCollectionId),Object.assign(p,g.aliasRemapping);const v=Object.keys(g.aliasToCollectionId).find(k=>g.aliasToCollectionId[k]===g.collectionId);v&&v!==t.alias&&(p[t.alias]=v);const E=g.pipeline.pipe(Tn(k=>{const[T,[C,j]]=k,D=og(C);return[T,D]}));return{alias:t.alias,input:E,collectionId:g.collectionId}}default:throw new pI(t.type)}}function FD(t){return t instanceof Un||t&&typeof t=="object"&&"type"in t&&t.type==="val"}function og(t){return FD(t)?t.value:t}function lg(t,e,n){if(t.from.type==="queryRef"&&e.from.type==="queryRef"&&(n.set(t.from.query,e.from.query),lg(t.from.query,e.from.query,n)),t.join&&e.join)for(let r=0;r<t.join.length&&r<e.join.length;r++){const s=t.join[r],a=e.join[r];s.from.type==="queryRef"&&a.from.type==="queryRef"&&(n.set(s.from.query,a.from.query),lg(s.from.query,a.from.query,n))}}function vy(t,e){const n=t.type;if(n==="val")return new Un(t.value);if(n==="ref"){const r=t.path;if(Array.isArray(r)){if(r[0]===e&&r.length>1)return new Rn(r.slice(1));if(r.length===1&&r[0]!==void 0)return new Rn([r[0]])}return new Rn(Array.isArray(r)?r:[String(r)])}else{const r=[];for(const s of t.args){const a=vy(s,e);r.push(a)}return new vr(t.name,r)}}function kw(t,e){return t.map(r=>{const s=vy(r.expression,e);return{...r,expression:s}})}const Ew=Symbol.for("@tanstack/db.collection-config-builder");class VD{constructor(e,n,r,s){this.alias=e,this.collectionId=n,this.collection=r,this.collectionConfigBuilder=s,this.biggest=void 0,this.subscriptionLoadingPromises=new Map,this.sentToD2Keys=new Set}subscribe(){const e=this.getWhereClauseForAlias();if(e){const n=vy(e,this.alias);return this.subscribeToChanges(n)}return this.subscribeToChanges()}subscribeToChanges(e){let n;const r=this.getOrderByInfo();if(r)n=this.subscribeToOrderedChanges(e,r);else{const u=!this.collectionConfigBuilder.isLazyAlias(this.alias);n=this.subscribeToMatchingChanges(e,u)}const s=()=>{if(!this.subscriptionLoadingPromises.has(n)){let u;const f=new Promise(h=>{u=h});this.subscriptionLoadingPromises.set(n,{resolve:u}),this.collectionConfigBuilder.liveQueryCollection._sync.trackLoadPromise(f)}};n.status==="loadingSubset"&&s();const a=n.on("status:change",u=>{if(u.status==="loadingSubset")s();else{const f=this.subscriptionLoadingPromises.get(n);f&&(this.subscriptionLoadingPromises.delete(n),f.resolve())}}),l=()=>{const u=this.subscriptionLoadingPromises.get(n);u&&(this.subscriptionLoadingPromises.delete(n),u.resolve()),a(),n.unsubscribe()};return this.collectionConfigBuilder.currentSyncState.unsubscribeCallbacks.add(l),n}sendChangesToPipeline(e,n){const r=Array.isArray(e)?e:[...e],s=[];for(const f of r){if(f.type==="insert"){if(this.sentToD2Keys.has(f.key))continue;this.sentToD2Keys.add(f.key)}else f.type==="delete"&&this.sentToD2Keys.delete(f.key);s.push(f)}const a=this.collectionConfigBuilder.currentSyncState.inputs[this.alias],u=HD(a,s,this.collection.config.getKey)>0?n:void 0;this.collectionConfigBuilder.scheduleGraphRun(u,{alias:this.alias})}subscribeToMatchingChanges(e,n=!1){const r=a=>{this.sendChangesToPipeline(a)};return this.collection.subscribeChanges(r,{...n&&{includeInitialState:n},whereExpression:e})}subscribeToOrderedChanges(e,n){const{orderBy:r,offset:s,limit:a,index:l}=n,u=p=>{const _=GD(p);this.sendChangesToPipelineWithTracking(_,f)},f=this.collection.subscribeChanges(u,{whereExpression:e}),h=this.collection.on("truncate",()=>{this.biggest=void 0,this.sentToD2Keys.clear()});f.on("unsubscribed",()=>{h()});const m=kw(r,this.alias);return l?(f.setOrderByIndex(l),f.requestLimitedSnapshot({limit:s+a,orderBy:m})):f.requestSnapshot({orderBy:m,limit:s+a}),f}loadMoreIfNeeded(e){const n=this.getOrderByInfo();if(!n)return!0;const{dataNeeded:r}=n;if(!r)return!0;const s=r();return s>0&&this.loadNextItems(s,e),!0}sendChangesToPipelineWithTracking(e,n){const r=this.getOrderByInfo();if(!r){this.sendChangesToPipeline(e);return}const s=this.trackSentValues(e,r.comparator),a=n;a[Ew]??=this.loadMoreIfNeeded.bind(this,n),this.sendChangesToPipeline(s,a[Ew])}loadNextItems(e,n){const r=this.getOrderByInfo();if(!r)return;const{orderBy:s,valueExtractorForRawRow:a,offset:l}=r,u=this.biggest,f=u?a(u):void 0,h=f!==void 0?Array.isArray(f)?f:[f]:void 0,m=kw(s,this.alias);n.requestLimitedSnapshot({orderBy:m,limit:e,minValues:h,offset:l})}getWhereClauseForAlias(){const e=this.collectionConfigBuilder.sourceWhereClausesCache;if(e)return e.get(this.alias)}getOrderByInfo(){const e=this.collectionConfigBuilder.optimizableOrderByCollections[this.collectionId];if(e&&e.alias===this.alias)return e}*trackSentValues(e,n){for(const r of e)r.type!=="delete"&&(this.biggest?n(this.biggest,r.value)<0&&(this.biggest=r.value):this.biggest=r.value),yield r}}function HD(t,e,n){const r=[];for(const s of e){const a=n(s.value);s.type==="insert"?r.push([[a,s.value],1]):s.type==="update"?(r.push([[a,s.previousValue],-1]),r.push([[a,s.value],1])):r.push([[a,s.value],-1])}return r.length!==0&&t.sendData(new Vt(r)),r.length}function*GD(t){for(const e of t)e.type==="update"?(yield{type:"delete",key:e.key,value:e.previousValue},yield{type:"insert",key:e.key,value:e.value}):yield e}const xk=new WeakMap;function KD(t){return t.utils?.[dy]?.getBuilder?.()}function ZD(t,e){xk.set(t,e)}function QD(t){return xk.get(t)}let JD=0;class YD{constructor(e){this.config=e,this.compiledAliasToCollectionId={},this.resultKeys=new WeakMap,this.orderByIndices=new WeakMap,this.isGraphRunning=!1,this.runCount=0,this.isInErrorState=!1,this.aliasDependencies={},this.builderDependencies=new Set,this.pendingGraphRuns=new Map,this.subscriptions={},this.lazySourcesCallbacks={},this.lazySources=new Set,this.optimizableOrderByCollections={},this.id=e.id||`live-query-${++JD}`,this.query=XD(e),this.collections=e4(this.query);const n=t4(this.query);this.collectionByAlias={};for(const[r,s]of n.entries()){const a=this.collections[r];if(a)for(const l of s)this.collectionByAlias[l]=a}this.query.orderBy&&this.query.orderBy.length>0&&(this.compare=WD(this.orderByIndices)),this.compareOptions=this.config.defaultStringCollation??wk(this.query).compareOptions,this.compileBasePipeline()}hasJoins(e){return!!(e.join&&e.join.length>0||e.from.type==="queryRef"&&this.hasJoins(e.from.query))}getConfig(){return{id:this.id,getKey:this.config.getKey||(e=>this.resultKeys.get(e)),sync:this.getSyncConfig(),compare:this.compare,defaultStringCollation:this.compareOptions,gcTime:this.config.gcTime||5e3,schema:this.config.schema,onInsert:this.config.onInsert,onUpdate:this.config.onUpdate,onDelete:this.config.onDelete,startSync:this.config.startSync,singleResult:this.query.singleResult,utils:{getRunCount:this.getRunCount.bind(this),setWindow:this.setWindow.bind(this),getWindow:this.getWindow.bind(this),[dy]:{getBuilder:()=>this,hasCustomGetKey:!!this.config.getKey,hasJoins:this.hasJoins(this.query)}}}}setWindow(e){if(!this.windowFn)throw new MI;return this.currentWindow=e,this.windowFn(e),this.maybeRunGraphFn?.(),this.liveQueryCollection?.isLoadingSubset?new Promise(n=>{const r=this.liveQueryCollection.on("loadingSubset:change",s=>{s.isLoadingSubset||(r(),n())})}):!0}getWindow(){if(!(!this.windowFn||!this.currentWindow))return{offset:this.currentWindow.offset??0,limit:this.currentWindow.limit??0}}getCollectionIdForAlias(e){const n=this.compiledAliasToCollectionId[e];if(n)return n;const r=this.collectionByAlias[e];if(r)return r.id;throw new Error(`Unknown source alias "${e}"`)}isLazyAlias(e){return this.lazySources.has(e)}maybeRunGraph(e){if(!this.isGraphRunning){if(!this.currentSyncConfig||!this.currentSyncState)throw new Error("maybeRunGraph called without active sync session. This should not happen.");this.isGraphRunning=!0;try{const{begin:n,commit:r}=this.currentSyncConfig,s=this.currentSyncState;if(this.isInErrorState)return;if(s.subscribedToAllCollections){for(;s.graph.pendingWork();)s.graph.run(),e?.();s.messagesCount===0&&(n(),r(),this.updateLiveQueryStatus(this.currentSyncConfig))}}finally{this.isGraphRunning=!1}}}scheduleGraphRun(e,n){const r=n?.contextId??Hu()?.id,s=n?.jobId??this,a=(()=>{if(n?.dependencies)return n.dependencies;const f=new Set(this.builderDependencies);if(n?.alias){const h=this.aliasDependencies[n.alias];if(h)for(const m of h)f.add(m)}return f.delete(this),Array.from(f)})();if(r)for(const f of a)typeof f.scheduleGraphRun=="function"&&f.scheduleGraphRun(void 0,{contextId:r});if(!this.currentSyncConfig||!this.currentSyncState)throw new Error("scheduleGraphRun called without active sync session. This should not happen.");let l=r?this.pendingGraphRuns.get(r):void 0;l||(l={loadCallbacks:new Set},r&&this.pendingGraphRuns.set(r,l)),e&&l.loadCallbacks.add(e);const u=r?void 0:l;df.schedule({contextId:r,jobId:s,dependencies:a,run:()=>this.executeGraphRun(r,u)})}clearPendingGraphRun(e){this.pendingGraphRuns.delete(e)}hasPendingGraphRun(e){return this.pendingGraphRuns.has(e)}executeGraphRun(e,n){const r=n??(e?this.pendingGraphRuns.get(e):void 0);if(e&&this.pendingGraphRuns.delete(e),!r||!this.currentSyncConfig||!this.currentSyncState)return;this.incrementRunCount();const s=()=>{let a=!0,l;if(r.loadCallbacks.forEach(u=>{try{a=u()&&a}catch(f){a=!1,l??=f}}),l)throw l;return a};this.maybeRunGraph(s)}getSyncConfig(){return{rowUpdateMode:"full",sync:this.syncFn.bind(this)}}incrementRunCount(){this.runCount++}getRunCount(){return this.runCount}syncFn(e){this.liveQueryCollection=e.collection,this.currentSyncConfig=e;const n={messagesCount:0,subscribedToAllCollections:!1,unsubscribeCallbacks:new Set},r=this.extendPipelineWithChangeProcessing(e,n);this.currentSyncState=r,this.unsubscribeFromSchedulerClears=df.onClear(a=>{this.clearPendingGraphRun(a)});const s=this.subscribeToAllCollections(e,r);return this.maybeRunGraphFn=()=>this.scheduleGraphRun(s),this.scheduleGraphRun(s),()=>{n.unsubscribeCallbacks.forEach(a=>a()),this.currentSyncConfig=void 0,this.currentSyncState=void 0,this.pendingGraphRuns.clear(),this.graphCache=void 0,this.inputsCache=void 0,this.pipelineCache=void 0,this.sourceWhereClausesCache=void 0,this.lazySources.clear(),this.optimizableOrderByCollections={},this.lazySourcesCallbacks={},Object.keys(this.subscriptions).forEach(a=>delete this.subscriptions[a]),this.compiledAliasToCollectionId={},this.unsubscribeFromSchedulerClears?.(),this.unsubscribeFromSchedulerClears=void 0}}compileBasePipeline(){this.graphCache=new RN,this.inputsCache=Object.fromEntries(Object.keys(this.collectionByAlias).map(r=>[r,this.graphCache.newInput()]));const e=by(this.query,this.inputsCache,this.collections,this.subscriptions,this.lazySourcesCallbacks,this.lazySources,this.optimizableOrderByCollections,r=>{this.windowFn=r});this.pipelineCache=e.pipeline,this.sourceWhereClausesCache=e.sourceWhereClauses,this.compiledAliasToCollectionId=e.aliasToCollectionId;const n=Object.keys(this.compiledAliasToCollectionId).filter(r=>!Object.hasOwn(this.inputsCache,r));if(n.length>0)throw new NI(n)}maybeCompileBasePipeline(){return(!this.graphCache||!this.inputsCache||!this.pipelineCache)&&this.compileBasePipeline(),{graph:this.graphCache,inputs:this.inputsCache,pipeline:this.pipelineCache}}extendPipelineWithChangeProcessing(e,n){const{begin:r,commit:s}=e,{graph:a,inputs:l,pipeline:u}=this.maybeCompileBasePipeline();return u.pipe(VN(f=>{const h=f.getInner();n.messagesCount+=h.length,r(),h.reduce(n4,new Map).forEach(this.applyChanges.bind(this,e)),s()})),a.finalize(),n.graph=a,n.inputs=l,n.pipeline=u,n}applyChanges(e,n,r){const{write:s,collection:a}=e,{deletes:l,inserts:u,value:f,orderByIndex:h}=n;if(this.resultKeys.set(f,r),h!==void 0&&this.orderByIndices.set(f,h),u&&l===0)s({value:f,type:"insert"});else if(u>l||u===l&&a.has(a.getKeyFromItem(f)))s({value:f,type:"update"});else if(l>0)s({value:f,type:"delete"});else throw new Error(`Could not apply changes: ${JSON.stringify(n)}. This should never happen.`)}handleSourceStatusChange(e,n,r){const{status:s}=r;if(s==="error"){this.transitionToError(`Source collection '${n}' entered error state`);return}if(s==="cleaned-up"){this.transitionToError(`Source collection '${n}' was manually cleaned up while live query '${this.id}' depends on it. Live queries prevent automatic GC, so this was likely a manual cleanup() call.`);return}this.updateLiveQueryStatus(e)}updateLiveQueryStatus(e){const{markReady:n}=e;this.isInErrorState||this.allCollectionsReady()&&n()}transitionToError(e){this.isInErrorState=!0,console.error(`[Live Query Error] ${e}`),this.liveQueryCollection?._lifecycle.setStatus("error")}allCollectionsReady(){return Object.values(this.collections).every(e=>e.isReady())}subscribeToAllCollections(e,n){const r=Object.entries(this.compiledAliasToCollectionId);if(r.length===0)throw new Error(`Compiler returned no alias metadata for query '${this.id}'. This should not happen; please report.`);const s=r.map(([l,u])=>{const f=this.collectionByAlias[l]??this.collections[u],h=QD(f);h&&h!==this?(this.aliasDependencies[l]=[h],this.builderDependencies.add(h)):this.aliasDependencies[l]=[];const m=new VD(l,u,f,this),p=f.on("status:change",v=>{this.handleSourceStatusChange(e,u,v)});n.unsubscribeCallbacks.add(p);const _=m.subscribe();return this.subscriptions[l]=_,m.loadMoreIfNeeded.bind(m,_)}),a=()=>(s.map(l=>l()),!0);return n.subscribedToAllCollections=!0,this.updateLiveQueryStatus(e),a}}function XD(t){return typeof t.query=="function"?pD(t.query):mk(t.query)}function WD(t){return(e,n)=>{const r=t.get(e),s=t.get(n);return r&&s?r<s?-1:r>s?1:0:0}}function e4(t){const e={};function n(s){s.type==="collectionRef"?e[s.collection.id]=s.collection:s.type==="queryRef"&&r(s.query)}function r(s){if(s.from&&n(s.from),s.join&&Array.isArray(s.join))for(const a of s.join)a.from&&n(a.from)}return r(t),e}function wk(t){const e=t.from;if(e.type==="collectionRef")return e.collection;if(e.type==="queryRef")return wk(e.query);throw new Error(`Failed to extract collection. Invalid FROM clause: ${JSON.stringify(t)}`)}function t4(t){const e=new Map;function n(s){if(s)if(s.type==="collectionRef"){const{id:a}=s.collection,l=e.get(a);l?l.add(s.alias):e.set(a,new Set([s.alias]))}else s.type==="queryRef"&&r(s.query)}function r(s){if(s&&(n(s.from),s.join))for(const a of s.join)n(a.from)}return r(t),e}function n4(t,[[e,n],r]){const[s,a]=n,l=t.get(e)||{deletes:0,inserts:0,value:s,orderByIndex:a};return r<0?l.deletes+=Math.abs(r):r>0&&(l.inserts+=r,l.value=s,l.orderByIndex=a),t.set(e,l),t}function Cw(t){return new YD(t).getConfig()}function tm(t){if(typeof t=="function"){const n=Cw({query:t});return Tw(n)}else{const e=t,n=Cw(e);return e.utils&&(n.utils={...n.utils,...e.utils}),Tw(n)}}function Tw(t){const e=dk(t),n=KD(t);return n&&ZD(e,n),e}const nm=1;function r4(t,e=[]){const n=t&&typeof t=="object"&&typeof t.subscribeChanges=="function"&&typeof t.startSyncImmediate=="function"&&typeof t.id=="string",r=Z.useRef(null),s=Z.useRef(null),a=Z.useRef(null),l=Z.useRef(0),u=Z.useRef(null),f=!r.current||n&&a.current!==t||!n&&(s.current===null||s.current.length!==e.length||s.current.some((v,x)=>v!==e[x]));if(f)if(n)t.startSyncImmediate(),r.current=t,a.current=t;else if(typeof t=="function"){const v=new Ft,x=t(v);if(x==null)r.current=null;else if(x instanceof gy)x.startSyncImmediate(),r.current=x;else if(x instanceof Ft)r.current=tm({query:t,startSync:!0,gcTime:nm});else if(x&&typeof x=="object")r.current=tm({startSync:!0,gcTime:nm,...x});else throw new Error(`useLiveQuery callback must return a QueryBuilder, LiveQueryCollectionConfig, Collection, undefined, or null. Got: ${typeof x}`);s.current=[...e]}else r.current=tm({startSync:!0,gcTime:nm,...t}),s.current=[...e];f&&(l.current=0,u.current=null);const h=Z.useRef(null);(!h.current||f)&&(h.current=v=>{if(!r.current)return()=>{};const x=r.current.subscribeChanges(()=>{l.current+=1,v()});return r.current.status==="ready"&&(l.current+=1,v()),()=>{x.unsubscribe()}});const m=Z.useRef(null);(!m.current||f)&&(m.current=()=>{const v=l.current,x=r.current;return(!u.current||u.current.version!==v||u.current.collection!==x)&&(u.current={collection:x,version:v}),u.current});const p=Z.useSyncExternalStore(h.current,m.current),_=Z.useRef(null),g=Z.useRef(null);if(!_.current||_.current.version!==p.version||_.current.collection!==p.collection){if(!p.collection)g.current={state:void 0,data:void 0,collection:void 0,status:"disabled",isLoading:!1,isReady:!0,isIdle:!1,isError:!1,isCleanedUp:!1,isEnabled:!1};else{const v=Array.from(p.collection.entries()),E=p.collection.config.singleResult;let k=null,T=null;g.current={get state(){return k||(k=new Map(v)),k},get data(){return T||(T=v.map(([,C])=>C)),E?T[0]:T},collection:p.collection,status:p.collection.status,isLoading:p.collection.status==="loading",isReady:p.collection.status==="ready",isIdle:p.collection.status==="idle",isError:p.collection.status==="error",isCleanedUp:p.collection.status==="cleaned-up",isEnabled:!0}}_.current=p}return g.current}class Xs extends tr{constructor(e){super(e),this.name="QueryCollectionError"}}class s4 extends Xs{constructor(){super("[QueryCollection] queryKey must be provided."),this.name="QueryKeyRequiredError"}}class i4 extends Xs{constructor(){super("[QueryCollection] queryFn must be provided."),this.name="QueryFnRequiredError"}}class a4 extends Xs{constructor(){super("[QueryCollection] queryClient must be provided."),this.name="QueryClientRequiredError"}}class o4 extends Xs{constructor(){super("[QueryCollection] getKey must be provided."),this.name="GetKeyRequiredError"}}class l4 extends Xs{constructor(){super("Collection must be in 'ready' state for manual sync operations. Sync not initialized yet."),this.name="SyncNotInitializedError"}}class c4 extends Xs{constructor(e){super(`Duplicate key '${e}' found within batch operations`),this.name="DuplicateKeyInBatchError"}}class u4 extends Xs{constructor(e){super(`Update operation: Item with key '${e}' does not exist`),this.name="UpdateOperationItemNotFoundError"}}class f4 extends Xs{constructor(e){super(`Delete operation: Item with key '${e}' does not exist`),this.name="DeleteOperationItemNotFoundError"}}const vi=new WeakMap;function h4(t,e){const n=Array.isArray(t)?t:[t],r=[];for(const s of n)if(s.type==="delete"){const a=Array.isArray(s.key)?s.key:[s.key];for(const l of a)r.push({type:"delete",key:l})}else{const a=Array.isArray(s.data)?s.data:[s.data];for(const l of a){let u;if(s.type==="update")u=e.getKey(l);else{const f=e.collection.validateData(l,s.type==="upsert"?"insert":s.type);u=e.getKey(f)}r.push({type:s.type,key:u,data:l})}}return r}function d4(t,e){const n=new Set;for(const r of t){if(n.has(r.key))throw new c4(r.key);if(n.add(r.key),r.type==="update"){if(!e.collection._state.syncedData.has(r.key))throw new u4(r.key)}else if(r.type==="delete"&&!e.collection._state.syncedData.has(r.key))throw new f4(r.key)}}function Yo(t,e){const n=h4(t,e);d4(n,e),e.begin();for(const s of n)switch(s.type){case"insert":{const a=e.collection.validateData(s.data,"insert");e.write({type:"insert",value:a});break}case"update":{const l={...e.collection._state.syncedData.get(s.key),...s.data},u=e.collection.validateData(l,"update",s.key);e.write({type:"update",value:u});break}case"delete":{const a=e.collection._state.syncedData.get(s.key);e.write({type:"delete",value:a});break}case"upsert":{const a=e.collection._state.syncedData.has(s.key),l=e.collection.validateData(s.data,a?"update":"insert",s.key);a?e.write({type:"update",value:l}):e.write({type:"insert",value:l});break}}e.commit();const r=Array.from(e.collection._state.syncedData.values());e.updateCacheData?e.updateCacheData(r):e.queryClient.setQueryData(e.queryKey,r)}function p4(t){function e(){const n=t();if(!n)throw new l4;return n}return{writeInsert(n){const r={type:"insert",data:n},s=e(),a=vi.get(s);if(a?.isActive){a.operations.push(r);return}Yo(r,s)},writeUpdate(n){const r={type:"update",data:n},s=e(),a=vi.get(s);if(a?.isActive){a.operations.push(r);return}Yo(r,s)},writeDelete(n){const r={type:"delete",key:n},s=e(),a=vi.get(s);if(a?.isActive){a.operations.push(r);return}Yo(r,s)},writeUpsert(n){const r={type:"upsert",data:n},s=e(),a=vi.get(s);if(a?.isActive){a.operations.push(r);return}Yo(r,s)},writeBatch(n){const r=e();if(vi.get(r)?.isActive)throw new Error("Cannot nest writeBatch calls. Complete the current batch before starting a new one.");const a={operations:[],isActive:!0};vi.set(r,a);try{const l=n();if(l&&typeof l=="object"&&"then"in l&&typeof l.then=="function")throw new Error("writeBatch does not support async callbacks. The callback must be synchronous.");a.operations.length>0&&Yo(a.operations,r)}finally{a.isActive=!1,vi.delete(r)}}}}function m4(t){if(!t)return;const e={};return t.where&&(e.where=cg(t.where)),t.orderBy?.length&&(e.orderBy=t.orderBy.map(n=>{const r={expression:cg(n.expression),direction:n.compareOptions.direction,nulls:n.compareOptions.nulls,stringSort:n.compareOptions.stringSort};return n.compareOptions.stringSort==="locale"?{...r,locale:n.compareOptions.locale,localeOptions:n.compareOptions.localeOptions}:r})),t.limit!==void 0&&(e.limit=t.limit),t.offset!==void 0&&(e.offset=t.offset),Object.keys(e).length===0?void 0:JSON.stringify(e)}function cg(t){if(!t)return null;switch(t.type){case"val":return{type:"val",value:ug(t.value)};case"ref":return{type:"ref",path:[...t.path]};case"func":return{type:"func",name:t.name,args:t.args.map(e=>cg(e))};default:return null}}function ug(t){if(t===void 0)return{__type:"undefined"};if(typeof t=="number"){if(Number.isNaN(t))return{__type:"nan"};if(t===Number.POSITIVE_INFINITY)return{__type:"infinity",sign:1};if(t===Number.NEGATIVE_INFINITY)return{__type:"infinity",sign:-1}}return t===null||typeof t=="string"||typeof t=="number"||typeof t=="boolean"?t:t instanceof Date?{__type:"date",value:t.toJSON()}:Array.isArray(t)?t.map(e=>ug(e)):typeof t=="object"?Object.fromEntries(Object.entries(t).map(([e,n])=>[e,ug(n)])):t}class g4{constructor(e,n,r){this.state=e,this.refetchFn=n,this.refetch=n,this.writeInsert=r.writeInsert,this.writeUpdate=r.writeUpdate,this.writeDelete=r.writeDelete,this.writeUpsert=r.writeUpsert,this.writeBatch=r.writeBatch}async clearError(){this.state.lastError=void 0,this.state.errorCount=0,this.state.lastErrorUpdatedAt=0,await this.refetchFn({throwOnError:!0})}get lastError(){return this.state.lastError}get isError(){return!!this.state.lastError}get errorCount(){return this.state.errorCount}get isFetching(){return Array.from(this.state.observers.values()).some(e=>e.getCurrentResult().isFetching)}get isRefetching(){return Array.from(this.state.observers.values()).some(e=>e.getCurrentResult().isRefetching)}get isLoading(){return Array.from(this.state.observers.values()).some(e=>e.getCurrentResult().isLoading)}get dataUpdatedAt(){return Math.max(0,...Array.from(this.state.observers.values()).map(e=>e.getCurrentResult().dataUpdatedAt))}get fetchStatus(){return Array.from(this.state.observers.values()).map(e=>e.getCurrentResult().fetchStatus)}}function y4(t){const{queryKey:e,queryFn:n,select:r,queryClient:s,enabled:a,refetchInterval:l,retry:u,retryDelay:f,staleTime:h,getKey:m,onInsert:p,onUpdate:_,onDelete:g,meta:v,...x}=t,E=x.syncMode??"eager";if(!e)throw new s4;if(!n)throw new i4;if(!s)throw new a4;if(!m)throw new o4;const k={lastError:void 0,errorCount:0,lastErrorUpdatedAt:0,observers:new Map},T=new Map,C=new Map,j=new Map,D=new Map,I=new Map,U=(J,R)=>{const N=j.get(J)||new Set;N.add(R),j.set(J,N);const F=C.get(R)||new Set;F.add(J),C.set(R,F)},V=(J,R)=>{const N=j.get(J)||new Set;N.delete(R),j.set(J,N);const F=C.get(R)||new Set;return F.delete(J),C.set(R,F),N.size===0},H=J=>{const{begin:R,write:N,commit:F,markReady:O,collection:ie}=J;let pe=!1;const de=_e=>{if(typeof e=="function")return e(_e);if(E==="on-demand"){const Le=m4(_e);return Le!==void 0?[...e,Le]:e}else return e},we=(_e={},Le=n)=>{const qe=de(_e),be=ms(qe),et={...v,loadSubsetOptions:_e};if(k.observers.has(be)){I.set(be,(I.get(be)||0)+1);const ye=k.observers.get(be),Ee=ye.getCurrentResult();return Ee.isSuccess?!0:Ee.isError?Promise.reject(Ee.error):new Promise((bt,Rt)=>{const Bt=ye.subscribe(Fe=>{Fe.isSuccess?(Bt(),bt()):Fe.isError&&(Bt(),Rt(Fe.error))})})}const te={queryKey:qe,queryFn:Le,meta:et,structuralSharing:!0,notifyOnChangeProps:"all",...a!==void 0&&{enabled:a},...l!==void 0&&{refetchInterval:l},...u!==void 0&&{retry:u},...f!==void 0&&{retryDelay:f},...h!==void 0&&{staleTime:h}},oe=new _O(s,te);T.set(be,qe),k.observers.set(be,oe),I.set(be,(I.get(be)||0)+1);const ge=new Promise((ye,Ee)=>{const bt=oe.subscribe(Rt=>{Rt.isSuccess?(bt(),ye()):Rt.isError&&(bt(),Ee(Rt.error))})});return(pe||ie.subscriberCount>0)&&rt(oe,be),ge},Me=_e=>{const Le=ms(_e);return be=>{if(be.isSuccess){k.lastError=void 0,k.errorCount=0;const et=be.data,te=r?r(et):et;if(!Array.isArray(te)||te.some(ye=>typeof ye!="object")){const ye=r?`@tanstack/query-db-collection: select() must return an array of objects. Got: ${typeof te} for queryKey ${JSON.stringify(_e)}`:`@tanstack/query-db-collection: queryFn must return an array of objects. Got: ${typeof te} for queryKey ${JSON.stringify(_e)}`;console.error(ye);return}const oe=new Map(ie._state.syncedData.entries()),ge=new Map;te.forEach(ye=>{const Ee=m(ye);ge.set(Ee,ye)}),R(),oe.forEach((ye,Ee)=>{const bt=ge.get(Ee);bt?Tr(ye,bt)||N({type:"update",value:bt}):V(Ee,Le)&&N({type:"delete",value:ye})}),ge.forEach((ye,Ee)=>{U(Ee,Le),oe.has(Ee)||N({type:"insert",value:ye})}),F(),O()}else be.isError&&(be.errorUpdatedAt!==k.lastErrorUpdatedAt&&(k.lastError=be.error,k.errorCount++,k.lastErrorUpdatedAt=be.errorUpdatedAt),console.error(`[QueryCollection] Error observing query ${String(_e)}:`,be.error),O())}},Ae=_e=>D.has(_e),rt=(_e,Le)=>{if(!Ae(Le)){const qe=T.get(Le),be=Me(qe),et=_e.subscribe(be);D.set(Le,et);const te=_e.getCurrentResult();(te.isSuccess||te.isError)&&be(te)}},ht=()=>{k.observers.forEach(rt)},St=()=>{D.forEach(_e=>{_e()}),D.clear()};pe=!0;const tn=ie.on("subscribers:change",({subscriberCount:_e})=>{_e>0?ht():_e===0&&St()});if(E==="eager"){const _e=we({});_e instanceof Promise&&_e.catch(()=>{})}else O();ht(),k.observers.forEach((_e,Le)=>{const qe=T.get(Le);Me(qe)(_e.getCurrentResult())});const Pt=_e=>{D.get(_e)?.(),D.delete(_e);const Le=C.get(_e)??new Set,qe=[];Le.forEach(be=>{const et=j.get(be);et&&(et.delete(_e),et.size===0&&(j.delete(be),ie.has(be)&&qe.push(ie.get(be))))}),qe.length>0&&(R(),qe.forEach(be=>{N({type:"delete",value:be})}),F()),k.observers.delete(_e),C.delete(_e),T.delete(_e),I.delete(_e)},At=_e=>{const Le=I.get(_e)||0,qe=k.observers.get(_e);if(Le<=0&&(D.get(_e)?.(),D.delete(_e)),qe?.hasListeners()??!1){I.set(_e,0);return}Le>0&&console.warn(`[cleanupQueryIfIdle] Invariant violation: refcount=${Le} but no listeners. Cleaning up to prevent leak.`,{hashedQueryKey:_e}),Pt(_e)},On=_e=>{Pt(_e)},De=s.getQueryCache().subscribe(_e=>{const Le=_e.query.queryHash;_e.type==="removed"&&T.has(Le)&&At(Le)});return{loadSubset:E==="eager"?void 0:we,unloadSubset:E==="eager"?void 0:_e=>{const Le=de(_e),qe=ms(Le),et=(I.get(qe)||0)-1;et<=0?(I.set(qe,0),At(qe)):I.set(qe,et)},cleanup:async()=>{tn(),St();const _e=[...T.values()],Le=[...k.observers.keys()];for(const qe of Le)On(qe);De(),await Promise.all(_e.map(async qe=>{await s.cancelQueries({queryKey:qe,exact:!0}),s.removeQueries({queryKey:qe,exact:!0})}))}}},P=async J=>{const N=[...T.values()].map(F=>k.observers.get(ms(F)).refetch({throwOnError:J?.throwOnError}));await Promise.all(N)},Q=J=>{const R=typeof e=="function"?e({}):e;r?s.setQueryData(R,N=>{if(!N||typeof N!="object")return N;if(Array.isArray(N))return J;const F=r(N);if(Array.isArray(F)){for(const O of Object.keys(N))if(N[O]===F)return{...N,[O]:J}}if(Array.isArray(N.data))return{...N,data:J};if(Array.isArray(N.items))return{...N,items:J};if(Array.isArray(N.results))return{...N,results:J};for(const O of Object.keys(N))if(Array.isArray(N[O]))return{...N,[O]:J};return N}):s.setQueryData(R,J)};let ne=null;const me=J=>{const{begin:R,write:N,commit:F,collection:O}=J,ie=typeof e=="function"?e({}):e;return ne={collection:O,queryClient:s,queryKey:ie,getKey:m,begin:R,write:N,commit:F,updateCacheData:Q},H(J)},z=p4(()=>ne),M=p?async J=>{const R=await p(J)??{};return R.refetch!==!1&&await P(),R}:void 0,B=_?async J=>{const R=await _(J)??{};return R.refetch!==!1&&await P(),R}:void 0,G=g?async J=>{const R=await g(J)??{};return R.refetch!==!1&&await P(),R}:void 0,re=new g4(k,P,z);return{...x,getKey:m,syncMode:E,sync:{sync:me},onInsert:M,onUpdate:B,onDelete:G,utils:re}}function Gs(){return Math.random().toString(36).substring(2,9)}async function _4(t){return new Promise((e,n)=>{const r=new FileReader;r.onloadend=()=>{const a=r.result.split(",")[1]||"";e(a)},r.onerror=n,r.readAsDataURL(t)})}function b4(t,e){const n=atob(t),r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return new Blob([r],{type:e})}function v4(t){const e=t.match(/^grpc:\/\/([^/]+)\/(.+)\/([^/]+)$/);return e?{server:e[1],service:e[2],method:e[3]}:{server:t.replace(/^grpc:\/\//,""),service:"",method:""}}function x4(t,e,n){return e&&n?`grpc://${t}/${e}/${n}`:`grpc://${t}`}async function Aw(t){const e={id:t.id,name:t.name,variables:t.variables??[],creationTime:t.creationTime,executionTime:t.executionTime};switch(t.protocol){case"grpc":{const{server:n,service:r,method:s}=v4(t.url);e.grpc={server:n,service:r,method:s,schema:t.grpc?.schema,body:t.grpc?.body??"",response:t.grpc?.response};break}case"mcp":{e.mcp={url:t.url,headers:t.mcp?.headers,tool:t.mcp?.tool,resource:t.mcp?.resource,response:t.mcp?.response};break}default:{let n=t.http?.body??{type:"none"};n.type==="form-data"?n={...n,data:n.data.map(s=>({...s,file:null}))}:n.type==="binary"&&(n={...n,file:null});let r;if(t.http?.response){const s=t.http.response.body instanceof Blob?await _4(t.http.response.body):"",a=t.http.response.body instanceof Blob?t.http.response.body.type:"application/octet-stream";r={status:t.http.response.status,statusCode:t.http.response.statusCode,headers:t.http.response.headers,body:s,bodyType:a,duration:t.http.response.duration,error:t.http.response.error}}e.http={method:t.http?.method??"GET",url:t.url,query:t.http?.query??[],headers:t.http?.headers??[],body:n,response:r};break}}return e}function w4(t){const e=t.grpc?"grpc":t.mcp?"mcp":"rest",n={id:t.id,name:t.name,protocol:e,url:"",variables:t.variables??[],creationTime:t.creationTime,executionTime:t.executionTime,executing:!1};if(t.grpc){const r=t.grpc;n.url=x4(r.server,r.service,r.method),n.grpc={schema:r.schema,body:r.body||"",metadata:[],response:r.response}}else if(t.mcp){const r=t.mcp;n.url=r.url,n.mcp={headers:r.headers??[],tool:r.tool,resource:r.resource,response:r.response}}else if(t.http){const r=t.http;n.url=r.url,n.http={method:r.method,query:r.query,headers:r.headers,body:r.body,request:null,response:r.response?{status:r.response.status,statusCode:r.response.statusCode,headers:r.response.headers,body:r.response.body?b4(r.response.body,r.response.bodyType):new Blob([]),duration:r.response.duration,error:r.response.error}:null}}return n}const gf="requests";async function S4(){const t=await fetch(`/data/${gf}`);if(!t.ok)throw new Error(`Failed to list entries: ${t.statusText}`);const e=await t.json();return(await Promise.all(e.map(async r=>{const s=await fetch(`/data/${gf}/${encodeURIComponent(r.id)}`);return s.ok?await s.json():null}))).filter(r=>r!==null)}async function Rw(t){const e=await fetch(`/data/${gf}/${encodeURIComponent(t.id)}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!e.ok)throw new Error(`Failed to save request: ${e.statusText}`)}async function k4(t){const e=await fetch(`/data/${gf}/${encodeURIComponent(t)}`,{method:"DELETE"});if(!e.ok&&e.status!==404)throw new Error(`Failed to delete request: ${e.statusText}`)}const Sk=new CO({defaultOptions:{queries:{staleTime:1/0,refetchOnWindowFocus:!1}}}),yn=dk(y4({queryKey:["requests"],queryFn:async()=>(await S4()).map(w4),getKey:t=>t.id,queryClient:Sk,onInsert:async({transaction:t})=>{await Promise.all(t.mutations.map(async e=>{const n=e.modified,r=await Aw(n);await Rw(r)}))},onUpdate:async({transaction:t})=>{await Promise.all(t.mutations.map(async e=>{const n=e.modified,r=await Aw(n);await Rw(r)}))},onDelete:async({transaction:t})=>{await Promise.all(t.mutations.map(async e=>{const n=e.original;await k4(n.id)}))}}));async function E4(){Array.from(yn.state.keys()).forEach(e=>yn.delete(e))}function yf(t,e,n={}){const{missingDataPlaceholder:r=""}=n;let s=t;const a=/\{\{(\w+):([^}]+)\}\}/g;let l;for(;(l=a.exec(t))!==null;){const[u,f,h]=l,m=e.find(_=>_.type===f&&_.id===h);let p="";switch(f){case"file_base64":p=m?.data||r;break;case"base64":m?.data?p=btoa(m.data):p=r;break;case"file_dataurl":m?.data&&m?.mimeType?p=`data:${m.mimeType};base64,${m.data}`:m?.data?p=`data:application/octet-stream;base64,${m.data}`:p=r;break;case"timestamp":p=String(Date.now());break;case"uuid":typeof crypto<"u"&&crypto.randomUUID?p=crypto.randomUUID():p="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,_=>{const g=Math.random()*16|0;return(_==="x"?g:g&3|8).toString(16)});break;case"random_string":p=Math.random().toString(36).substring(2,18);break;default:p=u}s=s.replace(u,p)}return s}function La(){return{id:Gs(),enabled:!0,key:"",value:""}}function Gu(t,e="rest"){const n={id:Gs(),name:t||"New Request",protocol:e,url:"",variables:[],creationTime:Date.now(),executionTime:null,executing:!1};switch(e){case"grpc":n.grpc={body:"",metadata:[La()]};break;case"mcp":n.mcp={headers:[La()]};break;default:n.http={method:"GET",headers:[La()],query:[La()],body:{type:"none"},request:null,response:null};break}return n}const kk=Z.createContext(null),C4={request:Gu(),sidebarCollapsed:!1,aiPanelOpen:!1};function T4({children:t}){const[e,n]=Z.useState(C4),{data:r=[]}=r4(z=>z.from({req:yn}).orderBy(({req:M})=>M.executionTime??M.creationTime,"desc")),s=Z.useCallback(z=>{n(M=>({...M,request:{...M.request,...z}}))},[]),a=Z.useCallback((z,M)=>{try{const B=new URL(z),G=B.protocol.replace(/:$/,""),re=B.host,J=B.pathname.replace(/^\//,""),R=M.replace(/^\//,""),N=`/proxy/mcp/${G}/${re}/${R}`;return J?`${N}?path=${encodeURIComponent(J)}`:N}catch{return""}},[]),l=Z.useCallback(z=>{n(M=>{const B=Gu(M.request.name,z);return B.id=M.request.id,B.url=M.request.url,{...M,request:B}})},[]),u=Z.useCallback(z=>{n(M=>({...M,request:{...M.request,http:{...M.request.http,method:z}}}))},[]),f=Z.useCallback(z=>{s({url:z})},[s]),h=Z.useCallback(z=>{n(M=>({...M,request:{...M.request,http:{...M.request.http,headers:z}}}))},[]),m=Z.useCallback(z=>{n(M=>({...M,request:{...M.request,http:{...M.request.http,query:z}}}))},[]),p=Z.useCallback(z=>{n(M=>({...M,request:{...M.request,http:M.request.http?{...M.request.http,body:z}:{method:"GET",headers:[],query:[],body:z,request:null,response:null}}}))},[]),_=Z.useCallback(z=>{s({variables:z})},[s]),g=Z.useCallback(z=>{n(M=>{const B=M.request.http?.request,re={...B?.options??{insecure:!1,redirect:!0},...z};return{...M,request:{...M.request,http:M.request.http?{...M.request.http,request:B?{...B,options:re}:null}:void 0}}})},[]),v=Z.useCallback(z=>{n(M=>({...M,request:{...M.request,grpc:M.request.grpc?{...M.request.grpc,body:z}:{body:z,metadata:[]}}}))},[]),x=Z.useCallback(z=>{n(M=>({...M,request:{...M.request,grpc:M.request.grpc?{...M.request.grpc,metadata:z}:{body:"",metadata:z}}}))},[]),E=Z.useCallback(z=>{n(M=>({...M,request:{...M.request,grpc:M.request.grpc?{...M.request.grpc,schema:z}:{body:"",metadata:[],schema:z}}}))},[]),k=Z.useCallback(z=>{n(M=>({...M,request:{...M.request,mcp:{headers:M.request.mcp?.headers??[La()],tool:z,resource:void 0}}}))},[]),T=Z.useCallback(z=>{n(M=>({...M,request:{...M.request,mcp:{headers:M.request.mcp?.headers??[La()],resource:z,tool:void 0}}}))},[]),C=Z.useCallback(z=>{n(M=>({...M,request:{...M.request,mcp:M.request.mcp?{...M.request.mcp,headers:z}:{headers:z}}}))},[]),j=Z.useCallback(async()=>{const z=e.request;if(!z.url)return null;s({executing:!0});try{const M=a(z.url,"features");if(!M)throw new Error("Invalid MCP server URL");const B={};for(const J of z.mcp?.headers??[])J.enabled&&J.key&&(B[J.key]=J.value);const G=await fetch(M,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({headers:B})});if(!G.ok){const J=await G.text();throw new Error(J||`HTTP ${G.status}`)}const re=await G.json();return s({executing:!1}),re}catch(M){const B=M instanceof Error?M.message:"Unknown error";return s({executing:!1}),{tools:[],resources:[],error:B}}},[e.request,s,a]),D=Z.useCallback(()=>{n(z=>{const{protocol:M}=z.request;return M==="grpc"&&z.request.grpc?{...z,request:{...z.request,grpc:{...z.request.grpc,response:void 0}}}:M==="mcp"&&z.request.mcp?{...z,request:{...z.request,mcp:{...z.request.mcp,response:void 0}}}:z.request.http?{...z,request:{...z.request,http:{...z.request.http,response:null}}}:z})},[]),I=Z.useCallback(async()=>{const z=e.request;s({executing:!0});try{if(z.protocol==="grpc"){const it=z.url.match(/^grpc:\/\/([^/]+)\/(.+)\/([^/]+)$/);if(!it)throw new Error("Invalid gRPC URL format. Expected: grpc://host:port/service/method");const[,We,wn,_e]=it,Le=z.grpc?.body??"{}",qe=yf(Le,z.variables),be={"Content-Type":"application/json"};(z.grpc?.metadata??[]).filter(Fe=>Fe.enabled&&Fe.key).forEach(Fe=>{be[Fe.key]=Fe.value});const et=`/proxy/grpc/${We}/${wn}/${_e}`,te=performance.now(),oe=await fetch(et,{method:"POST",headers:be,body:qe}),ge=Math.round(performance.now()-te),ye=await oe.text(),Ee={};oe.headers.forEach((Fe,dn)=>{Ee[dn]=Fe});const bt=Date.now(),Rt={...z,executionTime:bt,executing:!1,grpc:{...z.grpc,body:Le,metadata:z.grpc?.metadata??[],response:{body:ye,metadata:Ee,duration:ge,error:oe.ok?void 0:`HTTP ${oe.status}`}}};r.find(Fe=>Fe.id===z.id)?yn.update(z.id,Fe=>{Object.assign(Fe,Rt)}):yn.insert(Rt),n(Fe=>({...Fe,request:Rt}));return}if(z.protocol==="mcp"){const De=z.url;if(!De)throw new Error("MCP server URL is required");const it=performance.now();let We;if(z.mcp?.tool){let be={};if(z.mcp.tool.arguments)try{be=JSON.parse(z.mcp.tool.arguments)}catch{}const et={};for(const ye of z.mcp?.headers??[])ye.enabled&&ye.key&&(et[ye.key]=ye.value);const te=a(De,"tool/call");if(!te)throw new Error("Invalid MCP server URL");const oe=await fetch(te,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:z.mcp.tool.name,arguments:be,headers:et})});if(!oe.ok){const ye=await oe.text();throw new Error(ye||`HTTP ${oe.status}`)}We=await oe.json()}else if(z.mcp?.resource){const be=a(De,"resource/call");if(!be)throw new Error("Invalid MCP server URL");const et={};for(const ge of z.mcp?.headers??[])ge.enabled&&ge.key&&(et[ge.key]=ge.value);const te=await fetch(be,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({uri:z.mcp.resource.uri,headers:et})});if(!te.ok){const ge=await te.text();throw new Error(ge||`HTTP ${te.status}`)}We=await te.json()}else throw new Error("No tool or resource selected");const wn=Math.round(performance.now()-it),_e=Date.now(),Le={...z,executionTime:_e,executing:!1,mcp:{...z.mcp,response:{result:We,duration:wn}}};r.find(be=>be.id===z.id)?yn.update(z.id,be=>{Object.assign(be,Le)}):yn.insert(Le),n(be=>({...be,request:Le}));return}const M={};(z.http?.headers??[]).filter(De=>De.enabled&&De.key).forEach(De=>{M[De.key]=De.value});const B=new URLSearchParams,G=z.http?.method??"GET";(z.http?.query??[]).filter(De=>De.enabled&&De.key).forEach(De=>{B.append(De.key,De.value)});const re=z.http?.body??{type:"none"};let J,R="",N=!1;switch(re.type){case"json":{J=yf(re.content,z.variables),R=re.content,M["Content-Type"]||(M["Content-Type"]="application/json");break}case"form-urlencoded":{const De=new URLSearchParams;re.data.filter(it=>it.enabled&&it.key).forEach(it=>{De.append(it.key,it.value)}),J=De.toString(),R=De.toString(),M["Content-Type"]||(M["Content-Type"]="application/x-www-form-urlencoded");break}case"form-data":{const De=new FormData,it=[];re.data.filter(We=>We.enabled&&We.key).forEach(We=>{We.type==="file"&&We.file?(De.append(We.key,We.file,We.fileName),it.push(`${We.key}: [File: ${We.fileName}]`)):We.type==="text"&&(De.append(We.key,We.value),it.push(`${We.key}: ${We.value}`))}),J=De,R=it.join(`
`),N=!0;break}case"binary":{re.file&&(J=re.file,R=`[Binary file: ${re.fileName}]`,M["Content-Type"]||(M["Content-Type"]=re.file.type||"application/octet-stream"));break}case"raw":J=re.content,R=re.content,M["Content-Type"]||(M["Content-Type"]="text/plain");break}const F=z.http?.request?.options??{insecure:!1,redirect:!0};F.insecure&&(M["X-Prism-Insecure"]="true"),F.redirect&&(M["X-Prism-Redirect"]="true");const O=new URL(z.url);let ie="/proxy/"+O.protocol.slice(0,-1)+"/"+O.host+O.pathname;const pe=B.toString();pe&&(ie+="?"+pe);const de={method:G,url:z.url,headers:M,query:Object.fromEntries(B),body:R,options:F},we={...M};N&&delete we["Content-Type"];const Me=performance.now(),Ae=await fetch(ie,{method:G,headers:we,body:J&&G!=="GET"&&G!=="HEAD"?J:void 0}),rt=Math.round(performance.now()-Me),ht=await Ae.blob(),St={};Ae.headers.forEach((De,it)=>{St[it]=De});const tn={status:Ae.statusText||String(Ae.status),statusCode:Ae.status,headers:St,body:ht,duration:rt},Pt=Date.now(),At={...z,executionTime:Pt,executing:!1,http:{...z.http,request:de,response:tn}};r.find(De=>De.id===z.id)?yn.update(z.id,De=>{Object.assign(De,At)}):yn.insert(At),n(De=>({...De,request:At}))}catch(M){const B=Date.now(),G=M instanceof Error?M.message:"Unknown error";if(z.protocol==="grpc"){const re={...z,executionTime:B,executing:!1,grpc:{...z.grpc,response:{body:"",duration:0,error:G}}};r.find(R=>R.id===z.id)?yn.update(z.id,R=>{Object.assign(R,re)}):yn.insert(re),n(R=>({...R,request:re}))}else if(z.protocol==="mcp"){const re={...z,executionTime:B,executing:!1,mcp:{headers:z.mcp?.headers??[],tool:z.mcp?.tool,resource:z.mcp?.resource,response:{result:void 0,duration:0,error:G}}};r.find(R=>R.id===z.id)?yn.update(z.id,R=>{Object.assign(R,re)}):yn.insert(re),n(R=>({...R,request:re}))}else{const re={status:"",statusCode:0,headers:{},body:new Blob,duration:0,error:G},J={...z,executionTime:B,executing:!1,http:{...z.http,response:re}};r.find(N=>N.id===z.id)?yn.update(z.id,N=>{Object.assign(N,J)}):yn.insert(J),n(N=>({...N,request:J}))}}},[e.request,s,r,a]),U=Z.useCallback(z=>{const M=Gu(z.name,z.protocol??"rest");M.id=z.id,M.url=z.url,M.executionTime=z.executionTime,M.variables=z.variables??[],z.http&&(M.http={method:z.http.method,headers:[...z.http.headers],query:[...z.http.query],body:z.http.body,request:z.http.request,response:z.http.response},z.http.body.type==="form-data"?M.http.body={type:"form-data",data:z.http.body.data.map(B=>({...B,file:null}))}:z.http.body.type==="binary"&&(M.http.body={type:"binary",file:null,fileName:z.http.body.fileName})),z.grpc&&(M.grpc={...z.grpc}),z.mcp&&(M.mcp={...z.mcp}),n(B=>({...B,request:M}))},[]),V=Z.useCallback(async()=>{await E4()},[]),H=Z.useCallback(async z=>{yn.delete(z)},[]),P=Z.useCallback(()=>{n(z=>({...z,sidebarCollapsed:!z.sidebarCollapsed}))},[]),Q=Z.useCallback(()=>{n(z=>({...z,aiPanelOpen:!z.aiPanelOpen}))},[]),ne=Z.useCallback(()=>{n(z=>({...z,request:Gu()}))},[]),me={request:e.request,history:r,sidebarCollapsed:e.sidebarCollapsed,aiPanelOpen:e.aiPanelOpen,setProtocol:l,setMethod:u,setUrl:f,setHeaders:h,setQuery:m,setBody:p,setVariables:_,setOptions:g,executeRequest:I,clearResponse:D,newRequest:ne,setGrpcBody:v,setGrpcMetadata:x,setGrpcMethodSchema:E,setMcpTool:k,setMcpResource:T,setMcpHeaders:C,discoverMcpFeatures:j,loadFromHistory:U,clearHistory:V,deleteHistoryEntry:H,toggleSidebar:P,toggleAiPanel:Q};return w.jsx(kk.Provider,{value:me,children:t})}var A4=QS();const Ek=Z.createContext(null);function R4(t){const e=$e.c(6),{children:n}=t,[r,s]=Z.useState(null);let a;e[0]===Symbol.for("react.memo_cache_sentinel")?(a=h=>{s(h)},e[0]=a):a=e[0];const l=a;let u;e[1]!==r?(u={portalTarget:r,setPortalTarget:l},e[1]=r,e[2]=u):u=e[2];let f;return e[3]!==n||e[4]!==u?(f=w.jsx(Ek.Provider,{value:u,children:n}),e[3]=n,e[4]=u,e[5]=f):f=e[5],f}function Ck(){const t=Z.useContext(Ek);if(!t)throw new Error("useRequestBarPortal must be used within RequestBarPortalProvider");return t}function O4(t){const e=$e.c(3),{children:n}=t,{portalTarget:r}=Ck();if(!r)return null;let s;return e[0]!==n||e[1]!==r?(s=A4.createPortal(n,r),e[0]=n,e[1]=r,e[2]=s):s=e[2],s}function rr(){const t=Z.useContext(kk);if(!t)throw new Error("useClient must be used within a ClientProvider");return t}const I4=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),N4=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),Ow=t=>{const e=N4(t);return e.charAt(0).toUpperCase()+e.slice(1)},Tk=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),M4=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var D4={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const L4=Z.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:a,iconNode:l,...u},f)=>Z.createElement("svg",{ref:f,...D4,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:Tk("lucide",s),...!a&&!M4(u)&&{"aria-hidden":"true"},...u},[...l.map(([h,m])=>Z.createElement(h,m)),...Array.isArray(a)?a:[a]]));const Je=(t,e)=>{const n=Z.forwardRef(({className:r,...s},a)=>Z.createElement(L4,{ref:a,iconNode:e,className:Tk(`lucide-${I4(Ow(t))}`,`lucide-${t}`,r),...s}));return n.displayName=Ow(t),n};const z4=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],j4=Je("box",z4);const P4=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Ak=Je("check",P4);const B4=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],zi=Je("chevron-down",B4);const U4=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],th=Je("chevron-right",U4);const $4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Rk=Je("circle-alert",$4);const q4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],xy=Je("circle-check",q4);const F4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],V4=Je("circle-x",F4);const H4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Ok=Je("circle",H4);const G4=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],_f=Je("clock",G4);const K4=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Ik=Je("eye",K4);const Z4=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Jl=Je("file-text",Z4);const Q4=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}]],bf=Je("file",Q4);const J4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],Y4=Je("globe",J4);const X4=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],Nk=Je("hash",X4);const W4=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],eL=Je("image",W4);const tL=[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]],nL=Je("link-2",tL);const rL=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],vf=Je("loader-circle",rL);const sL=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],iL=Je("music",sL);const aL=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}],["path",{d:"m8 9 3 3-3 3",key:"12hl5m"}]],oL=Je("panel-right-close",aL);const lL=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}],["path",{d:"m10 15-3-3 3-3",key:"1pgupc"}]],cL=Je("panel-right-open",lL);const uL=[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]],Iw=Je("paperclip",uL);const fL=[["path",{d:"M12 22v-5",key:"1ega77"}],["path",{d:"M15 8V2",key:"18g5xt"}],["path",{d:"M17 8a1 1 0 0 1 1 1v4a4 4 0 0 1-4 4h-4a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1z",key:"1xoxul"}],["path",{d:"M9 8V2",key:"14iosj"}]],hL=Je("plug",fL);const dL=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Nw=Je("refresh-cw",dL);const pL=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],mL=Je("search",pL);const gL=[["path",{d:"M3.714 3.048a.498.498 0 0 0-.683.627l2.843 7.627a2 2 0 0 1 0 1.396l-2.842 7.627a.498.498 0 0 0 .682.627l18-8.5a.5.5 0 0 0 0-.904z",key:"117uat"}],["path",{d:"M6 12h16",key:"s4cdu5"}]],yL=Je("send-horizontal",gL);const _L=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],bL=Je("send",_L);const vL=[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]],xL=Je("server",vL);const wL=[["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 18h1.973a4 4 0 0 0 3.3-1.7l5.454-8.6a4 4 0 0 1 3.3-1.7H22",key:"1ailkh"}],["path",{d:"M2 6h1.972a4 4 0 0 1 3.6 2.2",key:"km57vx"}],["path",{d:"M22 18h-6.041a4 4 0 0 1-3.3-1.8l-.359-.45",key:"os18l9"}]],Mk=Je("shuffle",wL);const SL=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],zl=Je("sparkles",SL);const kL=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],EL=Je("square",kL);const CL=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],nh=Je("trash-2",CL);const TL=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],AL=Je("type",TL);const RL=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],OL=Je("upload",RL);const IL=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],xf=Je("wrench",IL);const NL=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],wy=Je("x",NL);const ML=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],DL=Je("zap",ML),LL={GET:"text-green-600 dark:text-green-400",POST:"text-yellow-600 dark:text-yellow-400",PUT:"text-blue-600 dark:text-blue-400",PATCH:"text-purple-600 dark:text-purple-400",DELETE:"text-red-600 dark:text-red-400",OPTIONS:"text-neutral-500 dark:text-neutral-400",HEAD:"text-neutral-500 dark:text-neutral-400"};function zL(t){return t?t>=200&&t<300?"bg-green-500":t>=300&&t<400?"bg-yellow-500":t>=400&&t<500?"bg-orange-500":"bg-red-500":"bg-neutral-500"}function jL(t){try{return new URL(t.url).hostname}catch{return"Other"}}function PL(t){if(t.protocol==="mcp")return t.mcp?.tool?.name?t.mcp.tool.name:t.mcp?.resource?.uri?t.mcp.resource.uri:"MCP Request";if(t.protocol==="grpc"){try{const n=new URL(t.url).pathname.split("/").filter(Boolean);if(n.length>0)return n[n.length-1]}catch{}return t.url}try{const e=new URL(t.url);return e.pathname+e.search}catch{return t.url}}function BL(t){return t.protocol==="grpc"?"gRPC":t.protocol==="mcp"?"MCP":t.http?.method??"GET"}function UL(t){return t.protocol==="grpc"?"text-cyan-600 dark:text-cyan-400":t.protocol==="mcp"?"text-violet-600 dark:text-violet-400":LL[t.http?.method??"GET"]}function $L(t){const e=new Map;for(const n of t){const r=jL(n),s=e.get(r)||[];s.push(n),e.set(r,s)}return Array.from(e.entries()).map(([n,r])=>({hostname:n,entries:r,latestTimestamp:Math.max(...r.map(s=>s.executionTime??0))})).sort((n,r)=>r.latestTimestamp-n.latestTimestamp)}function qL(){const t=$e.c(20),{history:e,sidebarCollapsed:n,loadFromHistory:r,deleteHistoryEntry:s,clearHistory:a,toggleSidebar:l}=rr();let u;t[0]!==e?(u=$L(e),t[0]=e,t[1]=u):u=t[1];const f=u;if(e.length===0||n)return null;let h;t[2]===Symbol.for("react.memo_cache_sentinel")?(h=w.jsx("h1",{className:"text-sm font-semibold text-neutral-700 dark:text-neutral-200 pl-0.5",children:"Prism"}),t[2]=h):h=t[2];let m;t[3]!==a||t[4]!==e.length?(m=e.length>0&&w.jsx("button",{onClick:a,className:"p-1.5 rounded-lg hover:bg-neutral-100 dark:hover:bg-white/5 transition-colors",title:"Clear history",children:w.jsx(nh,{className:"w-4 h-4 text-neutral-500 dark:text-neutral-400"})}),t[3]=a,t[4]=e.length,t[5]=m):m=t[5];let p;t[6]===Symbol.for("react.memo_cache_sentinel")?(p=w.jsx(cL,{className:"w-4 h-4 text-neutral-500 dark:text-neutral-400"}),t[6]=p):p=t[6];let _;t[7]!==l?(_=w.jsx("button",{onClick:l,className:"p-1.5 rounded-lg hover:bg-neutral-100 dark:hover:bg-white/5 transition-colors",title:"Hide sidebar",children:p}),t[7]=l,t[8]=_):_=t[8];let g;t[9]!==m||t[10]!==_?(g=w.jsxs("div",{className:"px-3 py-2.5 flex items-center justify-between gap-2",children:[h,w.jsxs("div",{className:"flex items-center gap-1",children:[m,_]})]}),t[9]=m,t[10]=_,t[11]=g):g=t[11];let v;t[12]!==s||t[13]!==f||t[14]!==e.length||t[15]!==r?(v=w.jsx("div",{className:"flex-1 overflow-y-auto px-2",children:e.length===0?w.jsx("div",{className:"px-2 py-8 text-center text-neutral-400 dark:text-neutral-600 text-xs",children:"No history yet"}):w.jsx("div",{className:"space-y-3 pb-2",children:f.map(E=>w.jsxs("div",{children:[w.jsx("div",{className:"px-2 py-1 text-[10px] font-medium text-neutral-400 dark:text-neutral-500 uppercase tracking-wider truncate",title:E.hostname,children:E.hostname}),w.jsx("div",{className:"space-y-0.5",children:E.entries.map(k=>w.jsxs("div",{className:"group flex items-center gap-2 px-3 py-1.5 rounded-lg hover:bg-neutral-100 dark:hover:bg-white/5 cursor-pointer transition-colors",onClick:()=>r(k),children:[w.jsx("span",{className:`w-1.5 h-1.5 rounded-full shrink-0 ${zL(k.http?.response?.statusCode??(k.grpc?.response?.error?0:k.grpc?.response?200:null)??(k.mcp?.response?.error?0:k.mcp?.response?200:null))}`}),w.jsx("span",{className:`text-[10px] font-semibold shrink-0 ${UL(k)}`,children:BL(k)}),w.jsx("span",{className:"text-xs text-neutral-500 dark:text-neutral-400 truncate flex-1",title:k.url,children:PL(k)}),w.jsx("button",{onClick:T=>{T.stopPropagation(),s(k.id)},className:"opacity-0 group-hover:opacity-100 inline-flex items-center justify-center w-5 h-5 hover:bg-neutral-200 dark:hover:bg-white/8 rounded transition-all shrink-0",title:"Delete",children:w.jsx("svg",{className:"w-3 h-3 text-neutral-400 dark:text-neutral-500 hover:text-rose-500 dark:hover:text-rose-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},k.id))})]},E.hostname))})}),t[12]=s,t[13]=f,t[14]=e.length,t[15]=r,t[16]=v):v=t[16];let x;return t[17]!==g||t[18]!==v?(x=w.jsxs("aside",{className:"w-64 bg-white dark:bg-[#1a1a1a]/60 dark:backdrop-blur-xl border border-neutral-200 dark:border-white/8 rounded-xl flex flex-col overflow-hidden dark:shadow-2xl",children:[g,v]}),t[17]=g,t[18]=v,t[19]=x):x=t[19],x}const rm=[{value:"rest",label:"HTTP",icon:Y4},{value:"grpc",label:"gRPC",icon:xL},{value:"mcp",label:"MCP",icon:hL}];function FL(){const t=$e.c(23),{request:e,setProtocol:n}=rr(),r=e?.protocol??"rest",[s,a]=Z.useState(!1),l=Z.useRef(null);let u;t[0]!==r?(u=rm.find(C=>C.value===r)??rm[0],t[0]=r,t[1]=u):u=t[1];const f=u,h=f.icon;let m,p;t[2]===Symbol.for("react.memo_cache_sentinel")?(m=()=>{const C=j=>{l.current&&!l.current.contains(j.target)&&a(!1)};return document.addEventListener("mousedown",C),()=>document.removeEventListener("mousedown",C)},p=[],t[2]=m,t[3]=p):(m=t[2],p=t[3]),Z.useEffect(m,p);let _;t[4]!==s?(_=()=>a(!s),t[4]=s,t[5]=_):_=t[5];let g;t[6]!==h?(g=w.jsx(h,{className:"w-4 h-4"}),t[6]=h,t[7]=g):g=t[7];let v;t[8]!==f.label?(v=w.jsx("span",{className:"text-xs font-medium",children:f.label}),t[8]=f.label,t[9]=v):v=t[9];let x;t[10]===Symbol.for("react.memo_cache_sentinel")?(x=w.jsx(zi,{className:"w-3 h-3"}),t[10]=x):x=t[10];let E;t[11]!==f.label||t[12]!==_||t[13]!==g||t[14]!==v?(E=w.jsxs("button",{type:"button",onClick:_,className:"flex items-center gap-1 px-2 py-1.5 rounded-md hover:bg-neutral-100 dark:hover:bg-white/10 transition-colors text-neutral-600 dark:text-neutral-400",title:f.label,children:[g,v,x]}),t[11]=f.label,t[12]=_,t[13]=g,t[14]=v,t[15]=E):E=t[15];let k;t[16]!==s||t[17]!==r||t[18]!==n?(k=s&&w.jsx("div",{className:"absolute top-full left-0 mt-1 bg-white dark:bg-[#1a1a1a] border border-neutral-200 dark:border-white/10 rounded-md shadow-lg z-50 min-w-28",children:rm.map(C=>{const j=C.icon;return w.jsxs("button",{type:"button",onClick:()=>{n(C.value),a(!1)},className:`w-full flex items-center gap-2 px-3 py-1.5 text-sm transition-colors ${r===C.value?"bg-neutral-100 dark:bg-white/10 text-neutral-900 dark:text-neutral-100":"text-neutral-600 dark:text-neutral-400 hover:bg-neutral-50 dark:hover:bg-white/5"}`,children:[w.jsx(j,{className:"w-4 h-4"}),C.label]},C.value)})}),t[16]=s,t[17]=r,t[18]=n,t[19]=k):k=t[19];let T;return t[20]!==E||t[21]!==k?(T=w.jsxs("div",{ref:l,className:"relative",children:[E,k]}),t[20]=E,t[21]=k,t[22]=T):T=t[22],T}let ol={};async function VL(){try{const t=await fetch("/config.json");if(t.ok){const e=await t.json();ol={...ol,...e}}else console.warn("Failed to load config.json, using defaults");return ol}catch(t){return console.warn("Error loading config:",t),ol}}function Sy(){return ol}function HL(){const t=$e.c(17),{request:e,executeRequest:n,aiPanelOpen:r,toggleAiPanel:s}=rr();let a;t[0]===Symbol.for("react.memo_cache_sentinel")?(a=Sy().ai?.model,t[0]=a):a=t[0];const l=!!a,u=e?.executing??!1,f=e?.protocol??"rest",h=e?.url??"",m=GL;let p;t[1]!==h?(p=m(h),t[1]=h,t[2]=p):p=t[2];const{host:_,service:g,method:v}=p,x=!!e?.mcp?.tool||!!e?.mcp?.resource,E=f==="rest"?h.length>0:f==="mcp"?h.length>0&&x:_.length>0&&g.length>0&&v.length>0;let k;t[3]!==n?(k=()=>{n()},t[3]=n,t[4]=k):k=t[4];const T=k,C=u||!E;let j;t[5]!==u?(j=u?w.jsxs("svg",{className:"w-4 h-4 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[w.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"3"}),w.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):w.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14 5l7 7m0 0l-7 7m7-7H3"})}),t[5]=u,t[6]=j):j=t[6];let D;t[7]!==T||t[8]!==C||t[9]!==j?(D=w.jsx("button",{type:"button",onClick:T,disabled:C,className:"p-1.5 hover:bg-neutral-100 dark:hover:bg-white/10 disabled:opacity-30 disabled:cursor-not-allowed rounded-md transition-colors text-neutral-500 dark:text-neutral-400 hover:text-neutral-700 dark:hover:text-neutral-200",title:"Send request",children:j}),t[7]=T,t[8]=C,t[9]=j,t[10]=D):D=t[10];let I;t[11]!==r||t[12]!==s?(I=l&&w.jsx("button",{type:"button",onClick:s,className:`p-1.5 hover:bg-neutral-100 dark:hover:bg-white/10 rounded-md transition-colors ${r?"text-amber-500 hover:text-amber-600":"text-neutral-500 dark:text-neutral-400 hover:text-neutral-700 dark:hover:text-neutral-200"}`,title:"AI Assistant",children:w.jsx(zl,{className:"w-4 h-4"})}),t[11]=r,t[12]=s,t[13]=I):I=t[13];let U;return t[14]!==D||t[15]!==I?(U=w.jsxs(O4,{children:[D,I]}),t[14]=D,t[15]=I,t[16]=U):U=t[16],U}function GL(t){const e=t.match(/^grpc:\/\/([^/]*)(?:\/([^/]*)(?:\/([^/]*))?)?$/);return e?{host:e[1]||"",service:e[2]||"",method:e[3]||""}:{host:"",service:"",method:""}}const KL=["GET","POST","PUT","PATCH","DELETE","OPTIONS","HEAD"],ZL={GET:"text-emerald-600 dark:text-emerald-400",POST:"text-amber-600 dark:text-amber-400",PUT:"text-blue-600 dark:text-blue-400",PATCH:"text-purple-600 dark:text-purple-400",DELETE:"text-rose-600 dark:text-rose-400",OPTIONS:"text-neutral-500 dark:text-neutral-400",HEAD:"text-neutral-500 dark:text-neutral-400"};function QL(){const t=$e.c(15),{request:e,setUrl:n,setMethod:r}=rr(),s=e?.http?.method??"GET",a=e?.url??"";let l;t[0]!==r?(l=g=>r(g.target.value),t[0]=r,t[1]=l):l=t[1];const u=`px-2 py-1 bg-transparent font-semibold text-xs focus:outline-none cursor-pointer ${ZL[s]}`;let f;t[2]===Symbol.for("react.memo_cache_sentinel")?(f=KL.map(JL),t[2]=f):f=t[2];let h;t[3]!==s||t[4]!==l||t[5]!==u?(h=w.jsx("select",{value:s,onChange:l,className:u,children:f}),t[3]=s,t[4]=l,t[5]=u,t[6]=h):h=t[6];let m;t[7]!==n?(m=g=>n(g.target.value),t[7]=n,t[8]=m):m=t[8];let p;t[9]!==m||t[10]!==a?(p=w.jsx("input",{type:"text",value:a,onChange:m,placeholder:"Enter request URL",className:"flex-1 px-3 py-1.5 bg-transparent text-neutral-800 dark:text-neutral-100 text-sm placeholder-neutral-400 dark:placeholder-neutral-600 focus:outline-none"}),t[9]=m,t[10]=a,t[11]=p):p=t[11];let _;return t[12]!==h||t[13]!==p?(_=w.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[h,p]}),t[12]=h,t[13]=p,t[14]=_):_=t[14],_}function JL(t){return w.jsx("option",{value:t,className:"bg-white dark:bg-[#1a1a1a]",children:t},t)}function Mw(t){const e=[],n=/\{\{(\w+):([^{}]+)\}\}/g;let r;for(;(r=n.exec(t))!==null;)e.push({start:r.index,end:r.index+r[0].length,type:r[1],id:r[2],full:r[0]});return e}function Ku(t){if(t.nodeType===Node.TEXT_NODE)return(t.textContent||"").replace(/\u200B/g,"");if(t.classList?.contains("variable-chip"))return t.dataset.marker||"";if(t.tagName==="BR")return`
`;let e="";const n=t.tagName==="DIV"||t.tagName==="P";for(const r of t.childNodes)e+=Ku(r);return n&&e&&!e.endsWith(`
`)&&(e+=`
`),e}function Dk(t,e){if(e.rangeCount===0)return"";const n=e.getRangeAt(0),r=n.startContainer,s=n.startOffset;let a="",l=!1;function u(f){if(!l){if(f===r)if(f.nodeType===Node.TEXT_NODE){a+=(f.textContent||"").slice(0,s).replace(/\u200B/g,""),l=!0;return}else{const h=f.childNodes;for(let m=0;m<s;m++)if(u(h[m]),l)return;l=!0;return}if(f.nodeType===Node.TEXT_NODE)a+=(f.textContent||"").replace(/\u200B/g,"");else if(f.nodeType===Node.ELEMENT_NODE){const h=f;if(h.classList.contains("variable-chip")){if(h.contains(r)){l=!0;return}a+=h.dataset.marker||""}else if(h.tagName==="BR")a+=`
`;else if(h.tagName==="DIV"||h.tagName==="P"){for(const m of Array.from(h.childNodes))if(u(m),l)return;a&&!a.endsWith(`
`)&&(a+=`
`)}else for(const m of Array.from(h.childNodes))if(u(m),l)return}}}return u(t),a}function YL(t){const e=window.getSelection();return!e||e.rangeCount===0||!t.contains(e.anchorNode)?null:Dk(t,e).length}function XL(t,e){let n=0,r=!1;function s(a){if(!r){if(a.nodeType===Node.TEXT_NODE){const l=a.textContent||"",f=l.replace(/\u200B/g,"").length;if(n+f>=e){const h=e-n;let m=0,p=0;for(;p<h&&m<l.length;)l[m]!==""&&p++,m++;const _=document.createRange();_.setStart(a,m),_.setEnd(a,m);const g=window.getSelection();g?.removeAllRanges(),g?.addRange(_),r=!0;return}n+=f}else if(a.nodeType===Node.ELEMENT_NODE){const l=a;if(l.classList.contains("variable-chip")){const u=(l.dataset.marker||"").length;n+=u}else if(l.tagName==="BR")n+=1;else{const u=l.tagName==="DIV"||l.tagName==="P";for(const f of Array.from(a.childNodes))if(s(f),r)return;u&&n<e&&(n+=1)}}}}s(t)}function WL(t,e,n){switch(t){case"file_base64":case"file_dataurl":return n?.data?n.name||"file":"Select file...";case"base64":if(n?.data){const r=n.data;return r.length>12?r.slice(0,12)+"":r}return"Enter text...";default:return n?.name||t}}function e3(t){const e="w-3 h-3";switch(t){case"file_base64":case"file_dataurl":return`<svg class="${e}" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/></svg>`;case"base64":return`<svg class="${e}" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="4" y1="9" x2="20" y2="9"/><line x1="4" y1="15" x2="20" y2="15"/><line x1="10" y1="3" x2="8" y2="21"/><line x1="16" y1="3" x2="14" y2="21"/></svg>`;case"timestamp":return`<svg class="${e}" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>`;case"uuid":return`<svg class="${e}" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"/><path d="M5 3v4"/><path d="M9 5H1"/></svg>`;case"random_string":return`<svg class="${e}" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M2 18h1.4c1.3 0 2.5-.6 3.3-1.7l14.2-12.6c.8-1.1 2-1.7 3.3-1.7H22"/><path d="M2 6h1.4c1.3 0 2.5.6 3.3 1.7l14.2 12.6c.8 1.1 2 1.7 3.3 1.7H22"/></svg>`;default:return""}}function Dw(t,e,n,r){const s=r.find(m=>m.type===t&&m.id===e),a=t==="file_base64"||t==="file_dataurl"||t==="base64",l=s&&s.data,u=document.createElement("span");u.contentEditable="false",u.className=`variable-chip inline-flex items-center gap-1 px-1.5 py-0.5 mx-0.5 rounded text-xs font-medium align-baseline select-none ${a&&!l?"bg-amber-500/20 text-amber-300 border border-amber-500/30":"bg-blue-500/20 text-blue-300 border border-blue-500/30"} ${a?"cursor-pointer hover:bg-blue-500/30":""}`,u.dataset.marker=n,u.dataset.variableType=t,u.dataset.variableId=e;const f=document.createElement("span");f.className="chip-icon",f.innerHTML=e3(t),u.appendChild(f);const h=document.createElement("span");return h.className="chip-label",h.textContent=WL(t,e,s),u.appendChild(h),u}function Lk(t){const e=$e.c(40),{editorRef:n,value:r,onChange:s,variables:a,onVariablesChange:l,indentTriggers:u}=t;let f;e[0]!==u?(f=u===void 0?["{","["]:u,e[0]=u,e[1]=f):f=e[1];const h=f,m=Z.useRef(""),p=Z.useRef(!1),_=Z.useRef(!1);let g;e[2]!==s||e[3]!==l||e[4]!==a?(g=J=>{const R=Ku(J);m.current=R,p.current=!0,s(R);const N=new Set(Mw(R).map(r3)),F=a.filter(O=>N.has(O.id));F.length!==a.length&&(_.current=!0,l(F))},e[2]=s,e[3]=l,e[4]=a,e[5]=g):g=e[5];const v=g,[x,E]=Z.useState(!1);let k;e[6]===Symbol.for("react.memo_cache_sentinel")?(k={top:0,left:0},e[6]=k):k=e[6];const[T,C]=Z.useState(k),j=n3;let D;e[7]!==n||e[8]!==r||e[9]!==a?(D=()=>{const J=n.current;if(!J)return;const R=YL(J),N=Mw(r);J.innerHTML="";let F=0;for(const ie of N){const pe=r.slice(F,ie.start);pe&&j(J,pe);const de=Dw(ie.type,ie.id,ie.full,a);J.appendChild(de),J.appendChild(document.createTextNode("")),F=ie.end}const O=r.slice(F);O&&j(J,O),J.childNodes.length===0&&J.appendChild(document.createElement("br")),m.current=r,R!==null&&XL(J,R)},e[7]=n,e[8]=r,e[9]=a,e[10]=D):D=e[10];const I=D;let U,V;e[11]!==I||e[12]!==r?(U=()=>{!p.current&&r!==m.current&&I(),p.current=!1},V=[r,I],e[11]=I,e[12]=r,e[13]=U,e[14]=V):(U=e[13],V=e[14]),Z.useEffect(U,V);let H;e[15]!==I?(H=()=>{_.current?_.current=!1:I()},e[15]=I,e[16]=H):H=e[16];let P;e[17]!==I||e[18]!==a?(P=[a,I],e[17]=I,e[18]=a,e[19]=P):P=e[19],Z.useEffect(H,P);let Q;e[20]!==n||e[21]!==v?(Q=()=>{const J=n.current;if(!J)return;const R=Ku(J),N=window.getSelection();if(N&&N.rangeCount>0){const F=N.getRangeAt(0);if(F.startContainer.nodeType===Node.TEXT_NODE){const O=F.startContainer.textContent||"",ie=F.startOffset;if(ie>=2&&O.slice(ie-2,ie)==="{{"){const pe=F.getBoundingClientRect();C({top:pe.bottom+4,left:pe.left}),E(!0)}else E(!1)}}R!==m.current&&v(J)},e[20]=n,e[21]=v,e[22]=Q):Q=e[22];const ne=Q,me=t3;let z;e[23]!==n||e[24]!==h||e[25]!==x||e[26]!==v?(z=J=>{if(x){J.key==="Escape"&&(E(!1),J.preventDefault());return}if(J.key==="Backspace"){const R=window.getSelection();if(R&&R.rangeCount>0&&R.isCollapsed){const N=R.getRangeAt(0),F=N.startContainer,O=N.startOffset;if(F.nodeType===Node.TEXT_NODE&&O===1&&F.textContent?.charAt(0)===""){const ie=F.previousSibling;if(ie&&ie.classList?.contains("variable-chip")){J.preventDefault();const pe=ie,de=pe.parentNode;de?.removeChild(pe),de?.removeChild(F);const we=n.current;we&&v(we);return}}if(O===0){let ie=F.previousSibling;if(ie?.nodeType===Node.TEXT_NODE&&ie.textContent===""&&(ie=ie.previousSibling),ie&&ie.classList?.contains("variable-chip")){J.preventDefault();const pe=ie,de=pe.nextSibling,we=pe.parentNode;we?.removeChild(pe),de?.nodeType===Node.TEXT_NODE&&de.textContent===""&&we?.removeChild(de);const Me=n.current;Me&&v(Me);return}}}}if(J.key==="Tab"&&(J.preventDefault(),document.execCommand("insertText",!1,"  ")),J.key==="Enter"){J.preventDefault();const R=n.current,N=window.getSelection();let F="";if(R&&N&&N.rangeCount>0){const pe=Dk(R,N),de=pe.lastIndexOf(`
`),we=pe.slice(de+1),Me=we.match(/^(\s*)/);F=Me?Me[1]:"";const rt=we.trimEnd().slice(-1);h.includes(rt)&&(F=F+"  ")}const O=document.createElement("br"),ie=N?.getRangeAt(0);ie&&(ie.deleteContents(),ie.insertNode(O),ie.setStartAfter(O),ie.setEndAfter(O),N?.removeAllRanges(),N?.addRange(ie),F&&document.execCommand("insertText",!1,F))}},e[23]=n,e[24]=h,e[25]=x,e[26]=v,e[27]=z):z=e[27];const M=z;let B;e[28]!==n||e[29]!==s||e[30]!==l||e[31]!==a?(B=J=>{E(!1);const R=n.current;if(!R)return;const N=window.getSelection();if(!N||N.rangeCount===0)return;const F=N.getRangeAt(0);if(F.startContainer.nodeType!==Node.TEXT_NODE)return;const O=F.startContainer,ie=F.startOffset,pe=O.textContent||"";O.textContent=pe.slice(0,ie-2)+pe.slice(ie);const de=Math.random().toString(36).substring(2,9),we=J==="file_base64"||J==="file_dataurl"?"file":J,Me=`{{${J}:${de}}}`,Ae=Dw(J,de,Me,a),rt=ie-2;F.setStart(O,rt),F.setEnd(O,rt),F.insertNode(Ae);const ht=document.createTextNode("");Ae.after(ht),F.setStart(ht,1),F.setEnd(ht,1),N.removeAllRanges(),N.addRange(F),_.current=!0,l([...a,{id:de,type:J,name:we}]);const St=Ku(R);return m.current=St,p.current=!0,s(St),de},e[28]=n,e[29]=s,e[30]=l,e[31]=a,e[32]=B):B=e[32];const G=B;let re;return e[33]!==I||e[34]!==ne||e[35]!==M||e[36]!==G||e[37]!==x||e[38]!==T?(re={handleInput:ne,handlePaste:me,handleKeyDown:M,insertVariable:G,showTypeMenu:x,setShowTypeMenu:E,typeMenuPosition:T,buildDOM:I},e[33]=I,e[34]=ne,e[35]=M,e[36]=G,e[37]=x,e[38]=T,e[39]=re):re=e[39],re}function t3(t){t.preventDefault();const e=t.clipboardData.getData("text/plain");document.execCommand("insertText",!1,e)}function n3(t,e){e.split(`
`).forEach((r,s)=>{s>0&&t.appendChild(document.createElement("br")),r&&t.appendChild(document.createTextNode(r))})}function r3(t){return t.id}const s3=[{type:"file_base64",label:"File (Base64)",description:"Select a file to encode",icon:w.jsx(bf,{className:"w-3.5 h-3.5"})},{type:"file_dataurl",label:"File (Data URL)",description:"File as data:... URL",icon:w.jsx(bf,{className:"w-3.5 h-3.5"})},{type:"base64",label:"Text (Base64)",description:"Text to encode",icon:w.jsx(Nk,{className:"w-3.5 h-3.5"})},{type:"timestamp",label:"Timestamp",description:"Unix timestamp",icon:w.jsx(_f,{className:"w-3.5 h-3.5"})},{type:"uuid",label:"UUID",description:"Random UUID",icon:w.jsx(zl,{className:"w-3.5 h-3.5"})},{type:"random_string",label:"Random String",description:"16-char random",icon:w.jsx(Mk,{className:"w-3.5 h-3.5"})}];function ky({value:t,onChange:e,variables:n,onVariablesChange:r,placeholder:s,action:a}){const l=Z.useRef(null),u=Z.useRef(null),{handleInput:f,handlePaste:h,handleKeyDown:m,insertVariable:p,showTypeMenu:_,setShowTypeMenu:g,typeMenuPosition:v,buildDOM:x}=Lk({editorRef:l,value:t,onChange:e,variables:n,onVariablesChange:r,indentTriggers:["{","["]}),[E,k]=Z.useState(null),[T,C]=Z.useState(""),j=Z.useRef(!1),D=Z.useRef(null),I=Z.useMemo(()=>{if(!t.trim())return{valid:!0,empty:!0};try{let M=t;return M=M.replace(/"\{\{[^{}]+\}\}"/g,'"__var__"'),M=M.replace(/\{\{[^{}]+\}\}/g,"null"),JSON.parse(M),{valid:!0,empty:!1}}catch(M){return{valid:!1,empty:!1,error:M instanceof Error?M.message:"Invalid JSON"}}},[t]),[U,V]=Z.useState(!1),H=Z.useMemo(()=>yf(t,n,{missingDataPlaceholder:"[no data]"}),[t,n]);Z.useEffect(()=>(D.current&&(clearTimeout(D.current),D.current=null),I.valid&&!I.empty&&j.current&&(D.current=setTimeout(()=>{try{let M=t;M=M.replace(/"\{\{[^{}]+\}\}"/g,'"__var__"'),M=M.replace(/\{\{[^{}]+\}\}/g,"null"),JSON.parse(M);const B=new Map;let G=t,re=0;G=G.replace(/"\{\{[^{}]+\}\}"/g,N=>{const F=`"__VAR_${re++}__"`;return B.set(F,N),F}),G=G.replace(/\{\{[^{}]+\}\}/g,N=>{const F=`"__VAR_${re++}__"`;return B.set(F,N),F});const J=JSON.parse(G);let R=JSON.stringify(J,null,2);R=R.replace(/\{\}/g,`{
}`),R=R.replace(/\[\]/g,`[
]`),B.forEach((N,F)=>{R=R.replace(F,N)}),R!==t&&e(R)}catch{}},500)),j.current=!I.valid,()=>{D.current&&clearTimeout(D.current)}),[I.valid,I.empty,t,e]),Z.useEffect(()=>{U||x()},[U,x]);const P=Z.useCallback((M,B)=>{const G=document.createElement("input");G.type="file",G.onchange=re=>{const J=re.target.files?.[0];if(!J)return;const R=new FileReader;R.onload=()=>{const N=R.result.split(",")[1],F=n.find(O=>O.id===B);r(F?n.map(O=>O.id===F.id?{...O,data:N,mimeType:J.type,name:J.name}:O):[...n,{id:B,type:M,name:J.name,data:N,mimeType:J.type}])},R.readAsDataURL(J)},G.click()},[n,r]),Q=Z.useCallback(M=>{const G=M.target.closest(".variable-chip");if(G){const re=G.dataset.variableType,J=G.dataset.variableId;if(re==="file_base64"||re==="file_dataurl")P(re,J),M.preventDefault(),M.stopPropagation();else if(re==="base64"){const R=G.getBoundingClientRect(),N=n.find(F=>F.id===J);C(N?.data||""),k({variableKey:`${re}:${J}`,rect:R}),M.preventDefault(),M.stopPropagation()}}else k(null)},[n,P]),ne=Z.useCallback(M=>{const B=p(M);B&&(M==="file_base64"||M==="file_dataurl")&&setTimeout(()=>P(M,B),0)},[p,P]),me=Z.useCallback(()=>{if(!E)return;const[M,B]=E.variableKey.split(":"),G=n.find(re=>re.id===B);r(G?n.map(re=>re.id===G.id?{...re,data:T}:re):[...n,{id:B,type:M,name:M,data:T}]),k(null),l.current?.focus()},[E,T,n,r]);Z.useEffect(()=>{const M=G=>{G.key==="Escape"&&(g(!1),k(null))},B=G=>{u.current&&!u.current.contains(G.target)&&(g(!1),k(null))};return document.addEventListener("keydown",M),document.addEventListener("mousedown",B),()=>{document.removeEventListener("keydown",M),document.removeEventListener("mousedown",B)}},[g]);const z=Z.useMemo(()=>{if(!E||!u.current)return{top:0,left:0};const M=u.current.getBoundingClientRect();return{top:E.rect.bottom-M.top+4,left:Math.max(0,E.rect.left-M.left)}},[E]);return w.jsxs("div",{ref:u,className:"flex flex-col h-full min-h-50 max-h-[60vh] relative overflow-hidden",children:[U?w.jsx("pre",{className:"flex-1 min-h-0 p-3 font-mono text-sm text-zinc-100 overflow-y-auto whitespace-pre-wrap wrap-break-word",children:H}):w.jsxs("div",{className:"flex-1 min-h-0 relative",children:[w.jsx("div",{ref:l,contentEditable:!0,suppressContentEditableWarning:!0,onInput:f,onPaste:h,onKeyDown:m,onClick:Q,className:"h-full p-3 font-mono text-sm text-zinc-100 outline-none overflow-y-auto whitespace-pre-wrap wrap-break-word"}),!t&&s&&w.jsx("div",{className:"absolute top-3 left-3 font-mono text-sm text-zinc-500 pointer-events-none whitespace-pre-wrap",children:s})]}),w.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 text-xs shrink-0",children:[a&&w.jsx("button",{type:"button",onClick:a.onClick,className:"text-[11px] px-2 py-0.5 rounded bg-zinc-700 hover:bg-zinc-600 text-zinc-200 transition-colors",children:a.label}),w.jsx("div",{className:"flex-1"}),w.jsx("button",{onClick:()=>V(!U),className:`transition-colors flex items-center gap-1 ${U?"text-blue-400 hover:text-blue-300":"text-zinc-500 hover:text-zinc-300"}`,title:U?"Show editor":"Show resolved JSON",children:w.jsx(Ik,{className:"w-3.5 h-3.5"})}),I.valid?w.jsx("span",{className:"text-emerald-500",children:"Valid JSON"}):w.jsx("span",{className:"text-red-400",title:I.error,children:"Invalid JSON"})]}),_&&w.jsx("div",{className:"fixed z-50 w-56 bg-zinc-800 border border-zinc-600 rounded-lg shadow-xl py-1",style:{top:v.top,left:v.left},children:s3.map(M=>w.jsxs("button",{onClick:()=>ne(M.type),className:"w-full flex items-center gap-2 px-3 py-2 text-left hover:bg-zinc-700 transition-colors",children:[w.jsx("span",{className:"text-zinc-400",children:M.icon}),w.jsxs("div",{className:"flex-1 min-w-0",children:[w.jsx("div",{className:"text-sm text-zinc-200",children:M.label}),w.jsx("div",{className:"text-xs text-zinc-500",children:M.description})]})]},M.type))}),E&&(()=>{const[M]=E.variableKey.split(":");return w.jsx("div",{className:"absolute z-50 bg-zinc-800/95 border border-zinc-700/50 rounded shadow-lg p-1.5 w-44",style:z,children:M==="base64"?w.jsxs("div",{className:"flex gap-1",children:[w.jsx("input",{type:"text",value:T,onChange:B=>C(B.target.value),onKeyDown:B=>B.key==="Enter"&&me(),placeholder:"Text to encode...",className:"flex-1 min-w-0 px-1.5 py-0.5 text-xs bg-transparent text-zinc-200 rounded border-none focus:outline-none placeholder:text-zinc-500",autoFocus:!0}),w.jsx("button",{onClick:me,className:"p-1 text-zinc-400 hover:text-zinc-200 transition-colors",children:w.jsx(Ak,{className:"w-3 h-3"})})]}):null})})()]})}const i3=[{type:"file_base64",label:"File (Base64)",description:"Select a file to encode",icon:w.jsx(bf,{className:"w-3.5 h-3.5"})},{type:"file_dataurl",label:"File (Data URL)",description:"File as data:... URL",icon:w.jsx(bf,{className:"w-3.5 h-3.5"})},{type:"base64",label:"Text (Base64)",description:"Text to encode",icon:w.jsx(Nk,{className:"w-3.5 h-3.5"})},{type:"timestamp",label:"Timestamp",description:"Unix timestamp",icon:w.jsx(_f,{className:"w-3.5 h-3.5"})},{type:"uuid",label:"UUID",description:"Random UUID",icon:w.jsx(zl,{className:"w-3.5 h-3.5"})},{type:"random_string",label:"Random String",description:"16-char random",icon:w.jsx(Mk,{className:"w-3.5 h-3.5"})}];function a3(t){if(!t.trim())return{valid:!0};try{const r=new DOMParser().parseFromString(t,"application/xml").querySelector("parsererror");if(r){const s=r.textContent||"Invalid XML",a=s.match(/error[^:]*:\s*(.+)/i);return{valid:!1,error:a?a[1].trim():s.split(`
`)[0]}}return{valid:!0}}catch(e){return{valid:!1,error:e instanceof Error?e.message:"Invalid XML"}}}function o3(t){try{const n=new DOMParser().parseFromString(t,"application/xml");if(n.querySelector("parsererror"))return t;const s=new XMLSerializer().serializeToString(n);let a="",l=0;const u=s.replace(/></g,`>
<`).split(`
`);for(const f of u){const h=f.trim();h&&(h.startsWith("</")&&(l=Math.max(0,l-1)),a+="  ".repeat(l)+h+`
`,h.startsWith("<")&&!h.startsWith("</")&&!h.startsWith("<?")&&!h.endsWith("/>")&&l++)}return a.trim()}catch{return t}}function l3({value:t,onChange:e,variables:n,onVariablesChange:r,placeholder:s}){const a=Z.useRef(null),l=Z.useRef(null),{handleInput:u,handlePaste:f,handleKeyDown:h,insertVariable:m,showTypeMenu:p,setShowTypeMenu:_,typeMenuPosition:g,buildDOM:v}=Lk({editorRef:a,value:t,onChange:e,variables:n,onVariablesChange:r,indentTriggers:[">","{","["]}),[x,E]=Z.useState(null),[k,T]=Z.useState(""),C=Z.useRef(!1),j=Z.useRef(null),D=Z.useMemo(()=>{if(!t.trim())return{valid:!0,empty:!0};let z=t;return z=z.replace(/\{\{[^{}]+\}\}/g,"PLACEHOLDER"),{...a3(z),empty:!1}},[t]),[I,U]=Z.useState(!1),V=Z.useMemo(()=>yf(t,n,{missingDataPlaceholder:"[no data]"}),[t,n]);Z.useEffect(()=>(j.current&&(clearTimeout(j.current),j.current=null),D.valid&&!D.empty&&C.current&&(j.current=setTimeout(()=>{const z=new Map;let M=t,B=0;M=M.replace(/\{\{[^{}]+\}\}/g,re=>{const J=`__VAR_${B++}__`;return z.set(J,re),J});let G=o3(M);z.forEach((re,J)=>{G=G.replace(J,re)}),G!==t&&e(G)},500)),C.current=!D.valid,()=>{j.current&&clearTimeout(j.current)}),[D.valid,D.empty,t,e]),Z.useEffect(()=>{I||v()},[I,v]);const H=Z.useCallback((z,M)=>{const B=document.createElement("input");B.type="file",B.onchange=G=>{const re=G.target.files?.[0];if(!re)return;const J=new FileReader;J.onload=()=>{const R=J.result.split(",")[1],N=n.find(F=>F.id===M);r(N?n.map(F=>F.id===N.id?{...F,data:R,mimeType:re.type,name:re.name}:F):[...n,{id:M,type:z,name:re.name,data:R,mimeType:re.type}])},J.readAsDataURL(re)},B.click()},[n,r]),P=Z.useCallback(z=>{const B=z.target.closest(".variable-chip");if(B){const G=B.dataset.variableType,re=B.dataset.variableId;if(G==="file_base64"||G==="file_dataurl")H(G,re),z.preventDefault(),z.stopPropagation();else if(G==="base64"){const J=B.getBoundingClientRect(),R=n.find(N=>N.id===re);T(R?.data||""),E({variableKey:`${G}:${re}`,rect:J}),z.preventDefault(),z.stopPropagation()}}else E(null)},[n,H]),Q=Z.useCallback(z=>{const M=m(z);M&&(z==="file_base64"||z==="file_dataurl")&&setTimeout(()=>H(z,M),0)},[m,H]),ne=Z.useCallback(()=>{if(!x)return;const[z,M]=x.variableKey.split(":"),B=n.find(G=>G.id===M);r(B?n.map(G=>G.id===B.id?{...G,data:k}:G):[...n,{id:M,type:z,name:z,data:k}]),E(null),a.current?.focus()},[x,k,n,r]);Z.useEffect(()=>{const z=B=>{B.key==="Escape"&&(_(!1),E(null))},M=B=>{l.current&&!l.current.contains(B.target)&&(_(!1),E(null))};return document.addEventListener("keydown",z),document.addEventListener("mousedown",M),()=>{document.removeEventListener("keydown",z),document.removeEventListener("mousedown",M)}},[_]);const me=Z.useMemo(()=>{if(!x||!l.current)return{top:0,left:0};const z=l.current.getBoundingClientRect();return{top:x.rect.bottom-z.top+4,left:Math.max(0,x.rect.left-z.left)}},[x]);return w.jsxs("div",{ref:l,className:"flex flex-col h-full min-h-50 max-h-[60vh] relative overflow-hidden",children:[I?w.jsx("pre",{className:"flex-1 min-h-0 p-3 font-mono text-sm text-zinc-100 overflow-y-auto whitespace-pre-wrap wrap-break-word",children:V}):w.jsxs("div",{className:"flex-1 min-h-0 relative",children:[w.jsx("div",{ref:a,contentEditable:!0,suppressContentEditableWarning:!0,onInput:u,onPaste:f,onKeyDown:h,onClick:P,className:"h-full p-3 font-mono text-sm text-zinc-100 outline-none overflow-y-auto whitespace-pre-wrap wrap-break-word"}),!t&&s&&w.jsx("div",{className:"absolute top-3 left-3 font-mono text-sm text-zinc-500 pointer-events-none whitespace-pre-wrap",children:s})]}),w.jsxs("div",{className:"flex items-center justify-end gap-2 px-3 py-1.5 text-xs shrink-0",children:[w.jsx("button",{onClick:()=>U(!I),className:`transition-colors flex items-center gap-1 ${I?"text-blue-400 hover:text-blue-300":"text-zinc-500 hover:text-zinc-300"}`,title:I?"Show editor":"Show resolved XML",children:w.jsx(Ik,{className:"w-3.5 h-3.5"})}),D.valid?w.jsx("span",{className:"text-emerald-500",children:"Valid XML"}):w.jsx("span",{className:"text-red-400",title:D.error,children:"Invalid XML"})]}),p&&w.jsx("div",{className:"fixed z-50 w-56 bg-zinc-800 border border-zinc-600 rounded-lg shadow-xl py-1",style:{top:g.top,left:g.left},children:i3.map(z=>w.jsxs("button",{onClick:()=>Q(z.type),className:"w-full flex items-center gap-2 px-3 py-2 text-left hover:bg-zinc-700 transition-colors",children:[w.jsx("span",{className:"text-zinc-400",children:z.icon}),w.jsxs("div",{className:"flex-1 min-w-0",children:[w.jsx("div",{className:"text-sm text-zinc-200",children:z.label}),w.jsx("div",{className:"text-xs text-zinc-500",children:z.description})]})]},z.type))}),x&&(()=>{const[z]=x.variableKey.split(":");return w.jsx("div",{className:"absolute z-50 bg-zinc-800/95 border border-zinc-700/50 rounded shadow-lg p-1.5 w-44",style:me,children:z==="base64"?w.jsxs("div",{className:"flex gap-1",children:[w.jsx("input",{type:"text",value:k,onChange:M=>T(M.target.value),onKeyDown:M=>M.key==="Enter"&&ne(),placeholder:"Text to encode...",className:"flex-1 min-w-0 px-1.5 py-0.5 text-xs bg-transparent text-zinc-200 rounded border-none focus:outline-none placeholder:text-zinc-500",autoFocus:!0}),w.jsx("button",{onClick:ne,className:"p-1 text-zinc-400 hover:text-zinc-200 transition-colors",children:w.jsx(Ak,{className:"w-3 h-3"})})]}):null})})()]})}function c3(t){const e=$e.c(9),{value:n,onChange:r,placeholder:s}=t,a=Z.useRef(null);let l;e[0]===Symbol.for("react.memo_cache_sentinel")?(l=()=>{const m=a.current;if(!m)return;m.style.height="auto";const p=Math.min(m.scrollHeight,160);m.style.height=`${p}px`},e[0]=l):l=e[0];let u;e[1]!==n?(u=[n],e[1]=n,e[2]=u):u=e[2],Z.useEffect(l,u);let f;e[3]!==r?(f=m=>r(m.target.value),e[3]=r,e[4]=f):f=e[4];let h;return e[5]!==s||e[6]!==f||e[7]!==n?(h=w.jsx("textarea",{ref:a,value:n,onChange:f,placeholder:s,spellCheck:!1,rows:3,className:"w-full font-mono text-xs text-neutral-800 dark:text-neutral-100 bg-transparent focus:outline-none placeholder-neutral-400 dark:placeholder-neutral-600 resize-none overflow-auto"}),e[5]=s,e[6]=f,e[7]=n,e[8]=h):h=e[8],h}function Lw(){return Math.random().toString(36).substring(2,9)}function xl(t){const e=$e.c(32),{items:n,onChange:r,keyPlaceholder:s,valuePlaceholder:a,keySuggestions:l}=t,u=s===void 0?"Key":s,f=a===void 0?"Value":a;let h;e[0]!==l?(h=l===void 0?[]:l,e[0]=l,e[1]=h):h=e[1];const m=h,[p,_]=Z.useState(null),[g,v]=Z.useState("");let x;e[2]!==n||e[3]!==r?(x=(U,V,H)=>{const P=n.map(ne=>ne.id===U?{...ne,[V]:H}:ne),Q=P[P.length-1];Q&&(Q.key||Q.value)&&P.push({id:Lw(),enabled:!0,key:"",value:""}),r(P)},e[2]=n,e[3]=r,e[4]=x):x=e[4];const E=x;let k;e[5]!==n||e[6]!==r?(k=U=>{if(n.length===1){r([{id:Lw(),enabled:!0,key:"",value:""}]);return}r(n.filter(V=>V.id!==U))},e[5]=n,e[6]=r,e[7]=k):k=e[7];const T=k;let C;e[8]!==n||e[9]!==m?(C=U=>{const V=n.map(u3);return m.filter(H=>H.toLowerCase().includes(U.toLowerCase())&&!V.includes(H.toLowerCase()))},e[8]=n,e[9]=m,e[10]=C):C=e[10];const j=C;let D;if(e[11]!==p||e[12]!==g||e[13]!==j||e[14]!==n||e[15]!==u||e[16]!==m||e[17]!==T||e[18]!==E||e[19]!==f){let U;e[21]!==p||e[22]!==g||e[23]!==j||e[24]!==u||e[25]!==m||e[26]!==T||e[27]!==E||e[28]!==f?(U=V=>w.jsxs("tr",{className:`border-b border-neutral-100 dark:border-white/5 last:border-0 ${V.enabled?"":"opacity-40"}`,children:[w.jsx("td",{className:"w-8 pl-2.5 py-1.5",children:w.jsx("button",{type:"button",onClick:()=>E(V.id,"enabled",!V.enabled),className:"p-0.5 rounded transition-colors",children:V.enabled?w.jsx(xy,{className:"w-3.5 h-3.5 text-neutral-700 dark:text-neutral-300"}):w.jsx(Ok,{className:"w-3.5 h-3.5 text-neutral-300 dark:text-neutral-600"})})}),w.jsx("td",{className:"px-1.5 py-1.5",children:w.jsxs("div",{className:"relative",children:[w.jsx("input",{type:"text",value:V.key,onChange:H=>{E(V.id,"key",H.target.value),v(H.target.value)},onFocus:()=>{_(V.id),v(V.key)},onBlur:()=>{setTimeout(()=>_(null),150)},placeholder:u,className:"w-full px-2 py-1 bg-white dark:bg-white/5 border border-neutral-300 dark:border-white/10 rounded text-xs text-neutral-800 dark:text-neutral-100 placeholder-neutral-400 dark:placeholder-neutral-500 focus:outline-none focus:border-neutral-400 dark:focus:border-white/20 transition-colors"}),m.length>0&&p===V.id&&(()=>{const H=j(g);return H.length===0?null:w.jsx("div",{className:"absolute z-50 left-0 right-0 top-full mt-1 bg-white dark:bg-[#1a1a1a] border border-neutral-200 dark:border-white/10 rounded-md shadow-lg max-h-48 overflow-y-auto",children:H.map(P=>w.jsx("button",{type:"button",onMouseDown:Q=>{Q.preventDefault(),E(V.id,"key",P),_(null)},className:"w-full px-2 py-1.5 text-left text-xs text-neutral-600 dark:text-neutral-300 hover:bg-neutral-100 dark:hover:bg-white/10 transition-colors",children:P},P))})})()]})}),w.jsx("td",{className:"px-1.5 py-1.5",children:w.jsx("input",{type:"text",value:V.value,onChange:H=>E(V.id,"value",H.target.value),placeholder:f,className:"w-full px-2 py-1 bg-white dark:bg-white/5 border border-neutral-300 dark:border-white/10 rounded text-xs text-neutral-800 dark:text-neutral-100 placeholder-neutral-400 dark:placeholder-neutral-500 focus:outline-none focus:border-neutral-400 dark:focus:border-white/20 transition-colors"})}),w.jsx("td",{className:"w-8 pr-1.5 py-1.5",children:w.jsx("button",{type:"button",onClick:()=>T(V.id),className:"p-1 text-neutral-400 dark:text-neutral-500 hover:text-rose-500 dark:hover:text-rose-400 hover:bg-neutral-100 dark:hover:bg-white/5 rounded transition-colors",children:w.jsx(nh,{className:"w-3.5 h-3.5"})})})]},V.id),e[21]=p,e[22]=g,e[23]=j,e[24]=u,e[25]=m,e[26]=T,e[27]=E,e[28]=f,e[29]=U):U=e[29],D=n.map(U),e[11]=p,e[12]=g,e[13]=j,e[14]=n,e[15]=u,e[16]=m,e[17]=T,e[18]=E,e[19]=f,e[20]=D}else D=e[20];let I;return e[30]!==D?(I=w.jsx("div",{children:w.jsx("table",{className:"w-full",children:w.jsx("tbody",{children:D})})}),e[30]=D,e[31]=I):I=e[31],I}function u3(t){return t.key.toLowerCase()}function f3(){return Math.random().toString(36).substring(2,9)}function zw(){return{id:f3(),enabled:!0,key:"",type:"text",value:"",file:null,fileName:""}}function h3(t){const e=$e.c(21),{items:n,onChange:r,keyPlaceholder:s,valuePlaceholder:a}=t,l=s===void 0?"Field":s,u=a===void 0?"Value":a;let f;e[0]===Symbol.for("react.memo_cache_sentinel")?(f={},e[0]=f):f=e[0];const h=Z.useRef(f);let m;e[1]!==n||e[2]!==r?(m=(D,I)=>{const U=n.map(H=>H.id===D?{...H,...I}:H),V=U[U.length-1];V&&(V.key||V.value||V.file)&&U.push(zw()),r(U)},e[1]=n,e[2]=r,e[3]=m):m=e[3];const p=m;let _;e[4]!==n||e[5]!==r?(_=D=>{if(n.length===1){r([zw()]);return}r(n.filter(I=>I.id!==D))},e[4]=n,e[5]=r,e[6]=_):_=e[6];const g=_;let v;e[7]!==p?(v=(D,I)=>{const U=I.target.files?.[0]??null;I.target.value="",U&&p(D,{type:"file",file:U,fileName:U.name,value:""})},e[7]=p,e[8]=v):v=e[8];const x=v;let E;e[9]!==p?(E=D=>{p(D,{type:"text",file:null,fileName:""})},e[9]=p,e[10]=E):E=e[10];const k=E,T=d3;let C;e[11]!==k||e[12]!==x||e[13]!==n||e[14]!==l||e[15]!==g||e[16]!==p||e[17]!==u?(C=n.map(D=>w.jsxs("tr",{className:`border-b border-neutral-100 dark:border-white/5 last:border-0 ${D.enabled?"":"opacity-40"}`,children:[w.jsx("td",{className:"w-8 pl-2.5 py-1.5",children:w.jsx("button",{type:"button",onClick:()=>p(D.id,{enabled:!D.enabled}),className:"p-0.5 rounded transition-colors",children:D.enabled?w.jsx(xy,{className:"w-3.5 h-3.5 text-neutral-700 dark:text-neutral-300"}):w.jsx(Ok,{className:"w-3.5 h-3.5 text-neutral-300 dark:text-neutral-600"})})}),w.jsx("td",{className:"px-1.5 py-1.5 w-36",children:w.jsx("input",{type:"text",value:D.key,onChange:I=>p(D.id,{key:I.target.value}),placeholder:l,className:"w-full px-2 py-1 bg-white dark:bg-white/5 border border-neutral-300 dark:border-white/10 rounded text-xs text-neutral-800 dark:text-neutral-100 placeholder-neutral-400 dark:placeholder-neutral-500 focus:outline-none focus:border-neutral-400 dark:focus:border-white/20 transition-colors"})}),w.jsxs("td",{className:"px-1.5 py-1.5",children:[w.jsx("input",{type:"file",ref:I=>{h.current[D.id]=I},onChange:I=>x(D.id,I),className:"hidden"}),D.type==="file"&&D.file?w.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 bg-neutral-100 dark:bg-white/10 rounded text-xs text-neutral-600 dark:text-neutral-300",children:[w.jsx(Iw,{className:"w-3 h-3 shrink-0"}),w.jsx("span",{className:"truncate max-w-xs",children:D.fileName}),w.jsxs("span",{className:"text-neutral-400 shrink-0",children:["(",T(D.file.size),")"]}),w.jsx("button",{type:"button",onClick:()=>k(D.id),className:"p-0.5 ml-1 text-neutral-400 hover:text-neutral-600 dark:hover:text-neutral-200 transition-colors shrink-0",children:w.jsx(wy,{className:"w-3 h-3"})})]}):w.jsx("input",{type:"text",value:D.value,onChange:I=>p(D.id,{value:I.target.value}),placeholder:u,className:"w-full px-2 py-1 bg-white dark:bg-white/5 border border-neutral-300 dark:border-white/10 rounded text-xs text-neutral-800 dark:text-neutral-100 placeholder-neutral-400 dark:placeholder-neutral-500 focus:outline-none focus:border-neutral-400 dark:focus:border-white/20 transition-colors"})]}),w.jsx("td",{className:"w-16 pr-1.5 py-1.5",children:w.jsxs("div",{className:"flex items-center gap-0.5",children:[w.jsx("button",{type:"button",onClick:()=>h.current[D.id]?.click(),className:`p-1 rounded transition-colors ${D.type==="file"?"text-blue-500 dark:text-blue-400 bg-blue-50 dark:bg-blue-500/10":"text-neutral-400 dark:text-neutral-500 hover:text-neutral-600 dark:hover:text-neutral-300 hover:bg-neutral-100 dark:hover:bg-white/5"}`,title:"Attach file",children:w.jsx(Iw,{className:"w-3.5 h-3.5"})}),w.jsx("button",{type:"button",onClick:()=>g(D.id),className:"p-1 text-neutral-400 dark:text-neutral-500 hover:text-rose-500 dark:hover:text-rose-400 hover:bg-neutral-100 dark:hover:bg-white/5 rounded transition-colors",children:w.jsx(nh,{className:"w-3.5 h-3.5"})})]})})]},D.id)),e[11]=k,e[12]=x,e[13]=n,e[14]=l,e[15]=g,e[16]=p,e[17]=u,e[18]=C):C=e[18];let j;return e[19]!==C?(j=w.jsx("div",{children:w.jsx("table",{className:"w-full",children:w.jsx("tbody",{children:C})})}),e[19]=C,e[20]=j):j=e[20],j}function d3(t){return t<1024?`${t} B`:t<1048576?`${(t/1024).toFixed(1)} KB`:`${(t/1048576).toFixed(1)} MB`}function p3(t){const e=$e.c(12),{file:n,fileName:r,onFileChange:s}=t,a=Z.useRef(null);let l;e[0]!==s?(l=v=>{s(v,v?.name??"")},e[0]=s,e[1]=l):l=e[1];const u=l,f=g3,h=m3;let m;e[2]!==u?(m=w.jsx("input",{type:"file",ref:a,onChange:v=>u(v.target.files?.[0]??null),className:"hidden"}),e[2]=u,e[3]=m):m=e[3];let p;e[4]!==n||e[5]!==r||e[6]!==s?(p=n?w.jsxs("div",{className:"flex items-center gap-3 p-3 bg-neutral-100 dark:bg-white/5 rounded-lg border border-neutral-200 dark:border-white/10",children:[w.jsx("div",{className:"flex items-center justify-center w-10 h-10 bg-white dark:bg-white/10 rounded-lg text-xl",children:h(n.type)}),w.jsxs("div",{className:"flex-1 min-w-0",children:[w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx(Jl,{className:"w-4 h-4 text-neutral-500 dark:text-neutral-400 shrink-0"}),w.jsx("p",{className:"text-sm font-medium text-neutral-800 dark:text-neutral-100 truncate",children:r})]}),w.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[w.jsx("span",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:f(n.size)}),w.jsx("span",{className:"text-xs text-neutral-400 dark:text-neutral-500",children:""}),w.jsx("span",{className:"text-xs text-neutral-500 dark:text-neutral-400 truncate",children:n.type||"application/octet-stream"})]})]}),w.jsxs("div",{className:"flex items-center gap-1",children:[w.jsx("button",{type:"button",onClick:()=>a.current?.click(),className:"px-2 py-1 text-xs text-neutral-600 dark:text-neutral-300 hover:bg-neutral-200 dark:hover:bg-white/10 rounded transition-colors",children:"Change"}),w.jsx("button",{type:"button",onClick:()=>s(null,""),className:"p-1 text-neutral-400 dark:text-neutral-500 hover:text-rose-500 dark:hover:text-rose-400 hover:bg-neutral-200 dark:hover:bg-white/10 rounded transition-colors",children:w.jsx(wy,{className:"w-4 h-4"})})]})]}):w.jsxs("div",{onClick:()=>a.current?.click(),className:"flex flex-col items-center justify-center p-8 border-2 border-dashed border-neutral-300 dark:border-white/20 rounded-lg cursor-pointer hover:border-neutral-400 dark:hover:border-white/30 hover:bg-neutral-50 dark:hover:bg-white/5 transition-colors",children:[w.jsx(OL,{className:"w-8 h-8 text-neutral-400 dark:text-neutral-500 mb-2"}),w.jsx("p",{className:"text-sm text-neutral-600 dark:text-neutral-300 mb-1",children:"Click to select a file"}),w.jsx("p",{className:"text-xs text-neutral-400 dark:text-neutral-500",children:"or drag and drop"})]}),e[4]=n,e[5]=r,e[6]=s,e[7]=p):p=e[7];let _;e[8]===Symbol.for("react.memo_cache_sentinel")?(_=w.jsx("p",{className:"text-xs text-neutral-400 dark:text-neutral-500",children:"The file will be sent as the raw request body. Content-Type will be set automatically based on the file type."}),e[8]=_):_=e[8];let g;return e[9]!==m||e[10]!==p?(g=w.jsxs("div",{className:"space-y-3",children:[m,p,_]}),e[9]=m,e[10]=p,e[11]=g):g=e[11],g}function m3(t){return t.startsWith("image/")?"":t.startsWith("video/")?"":t.startsWith("audio/")?"":t.includes("pdf")?"":t.includes("zip")||t.includes("tar")||t.includes("gzip")?"":t.includes("json")||t.includes("xml")||t.includes("text")?"":""}function g3(t){return t<1024?`${t} B`:t<1048576?`${(t/1024).toFixed(1)} KB`:t<1073741824?`${(t/1048576).toFixed(1)} MB`:`${(t/1073741824).toFixed(2)} GB`}const y3=[{value:"none",label:"None"},{value:"json",label:"JSON"},{value:"xml",label:"XML"},{value:"form-urlencoded",label:"Form"},{value:"form-data",label:"Form Data"},{value:"binary",label:"Binary"},{value:"raw",label:"Raw"}];function zk(){return Math.random().toString(36).substring(2,9)}function _3(){return{id:zk(),enabled:!0,key:"",type:"text",value:"",file:null,fileName:""}}const b3=["Accept","Accept-Charset","Accept-Encoding","Accept-Language","Authorization","Cache-Control","Connection","Content-Disposition","Content-Encoding","Content-Length","Content-Type","Cookie","Date","ETag","Expect","Forwarded","From","Host","If-Match","If-Modified-Since","If-None-Match","If-Range","If-Unmodified-Since","Max-Forwards","Origin","Pragma","Proxy-Authorization","Range","Referer","TE","Trailer","Transfer-Encoding","Upgrade","User-Agent","Via","Warning","X-Api-Key","X-Correlation-ID","X-Forwarded-For","X-Forwarded-Host","X-Forwarded-Proto","X-Request-ID","X-Requested-With"];function v3(){const t=$e.c(54),[e,n]=Z.useState("body"),{request:r,setHeaders:s,setQuery:a,setBody:l,setVariables:u}=rr();let f;t[0]!==r?.http?.headers?(f=r?.http?.headers??[],t[0]=r?.http?.headers,t[1]=f):f=t[1];const h=f;let m;t[2]!==r?.http?.query?(m=r?.http?.query??[],t[2]=r?.http?.query,t[3]=m):m=t[3];const p=m;let _;t[4]!==r?.http?.body?(_=r?.http?.body??{type:"none"},t[4]=r?.http?.body,t[5]=_):_=t[5];const g=_;let v;t[6]!==r?.variables?(v=r?.variables??[],t[6]=r?.variables,t[7]=v):v=t[7];const x=v;let E;t[8]!==g||t[9]!==l?(E=G=>{e:switch(G){case"none":{l({type:"none"});break e}case"json":{l({type:"json",content:g.type==="json"?g.content:""});break e}case"xml":{l({type:"xml",content:g.type==="xml"?g.content:""});break e}case"raw":{l({type:"raw",content:g.type==="raw"?g.content:""});break e}case"form-urlencoded":{l({type:"form-urlencoded",data:g.type==="form-urlencoded"?g.data:[{id:zk(),enabled:!0,key:"",value:""}]});break e}case"form-data":{l({type:"form-data",data:g.type==="form-data"?g.data:[_3()]});break e}case"binary":l({type:"binary",file:g.type==="binary"?g.file:null,fileName:g.type==="binary"?g.fileName:""})}},t[8]=g,t[9]=l,t[10]=E):E=t[10];const k=E;let T;t[11]!==p?(T=p.filter(S3),t[11]=p,t[12]=T):T=t[12];let C;t[13]!==T.length?(C={id:"params",label:"Params",count:T.length},t[13]=T.length,t[14]=C):C=t[14];let j;t[15]!==h?(j=h.filter(w3),t[15]=h,t[16]=j):j=t[16];let D;t[17]!==j.length?(D={id:"headers",label:"Headers",count:j.length},t[17]=j.length,t[18]=D):D=t[18];let I;t[19]===Symbol.for("react.memo_cache_sentinel")?(I={id:"body",label:"Body"},t[19]=I):I=t[19];let U;t[20]!==C||t[21]!==D?(U=[C,D,I],t[20]=C,t[21]=D,t[22]=U):U=t[22];const V=U;let H;t[23]!==e||t[24]!==V?(H=w.jsx("div",{role:"tablist",className:"inline-flex gap-1",children:V.map(G=>w.jsxs("button",{role:"tab",onClick:()=>n(G.id),className:`px-2 py-1 text-[11px] font-medium rounded-md transition-all ${e===G.id?"bg-white dark:bg-white/10 text-neutral-800 dark:text-neutral-100 shadow-sm":"text-neutral-500 dark:text-neutral-400 hover:text-neutral-700 dark:hover:text-neutral-200 hover:bg-neutral-100 dark:hover:bg-white/5"}`,children:[G.label,G.count!==void 0&&G.count>0&&w.jsx("span",{className:"ml-1.5 px-1.5 py-0.5 text-[9px] bg-neutral-200 dark:bg-white/10 text-neutral-600 dark:text-neutral-300 rounded-full",children:G.count})]},G.id))}),t[23]=e,t[24]=V,t[25]=H):H=t[25];let P;t[26]!==e||t[27]!==g||t[28]!==k?(P=e==="body"&&w.jsx("select",{value:g.type,onChange:G=>k(G.target.value),className:"h-6 px-2 text-[11px] font-medium bg-white dark:bg-white/10 text-neutral-800 dark:text-neutral-100 rounded-md shadow-sm border-0 focus:outline-none focus:ring-2 focus:ring-neutral-300 dark:focus:ring-white/20 cursor-pointer transition-all min-w-30",children:y3.map(x3)}),t[26]=e,t[27]=g,t[28]=k,t[29]=P):P=t[29];let Q;t[30]!==H||t[31]!==P?(Q=w.jsxs("div",{className:"flex items-center gap-2",children:[H,P]}),t[30]=H,t[31]=P,t[32]=Q):Q=t[32];let ne;t[33]!==e||t[34]!==p||t[35]!==a?(ne=e==="params"&&w.jsx(xl,{items:p,onChange:a,keyPlaceholder:"Parameter",valuePlaceholder:"Value"}),t[33]=e,t[34]=p,t[35]=a,t[36]=ne):ne=t[36];let me;t[37]!==e||t[38]!==h||t[39]!==s?(me=e==="headers"&&w.jsx(xl,{items:h,onChange:s,keyPlaceholder:"Header",valuePlaceholder:"Value",keySuggestions:b3}),t[37]=e,t[38]=h,t[39]=s,t[40]=me):me=t[40];let z;t[41]!==e||t[42]!==g||t[43]!==l||t[44]!==u||t[45]!==x?(z=e==="body"&&w.jsxs("div",{className:"space-y-3",children:[g.type==="json"&&w.jsx(ky,{value:g.content,onChange:G=>l({...g,content:G}),variables:x,onVariablesChange:u,placeholder:`{
  "key": "value"
}`}),g.type==="xml"&&w.jsx(l3,{value:g.content,onChange:G=>l({...g,content:G}),variables:x,onVariablesChange:u,placeholder:"<xml></xml>"}),g.type==="raw"&&w.jsx(c3,{value:g.content,onChange:G=>l({...g,content:G}),language:"text",placeholder:"Plain text payload"}),g.type==="form-urlencoded"&&w.jsx(xl,{items:g.data,onChange:G=>l({...g,data:G}),keyPlaceholder:"Key",valuePlaceholder:"Value"}),g.type==="form-data"&&w.jsx(h3,{items:g.data,onChange:G=>l({...g,data:G})}),g.type==="binary"&&w.jsx(p3,{file:g.file,fileName:g.fileName,onFileChange:(G,re)=>l({...g,file:G,fileName:re})}),g.type==="none"&&w.jsx("div",{className:"py-8 text-center text-sm text-neutral-400 dark:text-neutral-500",children:"No request body"})]}),t[41]=e,t[42]=g,t[43]=l,t[44]=u,t[45]=x,t[46]=z):z=t[46];let M;t[47]!==ne||t[48]!==me||t[49]!==z?(M=w.jsxs("div",{children:[ne,me,z]}),t[47]=ne,t[48]=me,t[49]=z,t[50]=M):M=t[50];let B;return t[51]!==Q||t[52]!==M?(B=w.jsxs("div",{className:"space-y-3",children:[Q,M]}),t[51]=Q,t[52]=M,t[53]=B):B=t[53],B}function x3(t){return w.jsx("option",{value:t.value,className:"bg-white dark:bg-[#1a1a1a]",children:t.label},t.value)}function w3(t){return t.key}function S3(t){return t.key}const k3="modulepreload",E3=function(t){return"/"+t},jw={},L=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){let h=function(m){return Promise.all(m.map(p=>Promise.resolve(p).then(_=>({status:"fulfilled",value:_}),_=>({status:"rejected",reason:_}))))};var l=h;document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),f=u?.nonce||u?.getAttribute("nonce");s=h(n.map(m=>{if(m=E3(m),m in jw)return;jw[m]=!0;const p=m.endsWith(".css"),_=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${_}`))return;const g=document.createElement("link");if(g.rel=p?"stylesheet":k3,p||(g.as="script"),g.crossOrigin="",g.href=m,f&&g.setAttribute("nonce",f),document.head.appendChild(g),p)return new Promise((v,x)=>{g.addEventListener("load",v),g.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${m}`)))})}))}function a(u){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=u,window.dispatchEvent(f),!f.defaultPrevented)throw u}return s.then(u=>{for(const f of u||[])f.status==="rejected"&&a(f.reason);return e().catch(a)})};let zt=class extends Error{constructor(e){super(e),this.name="ShikiError"}};function C3(t){return Ey(t)}function Ey(t){return Array.isArray(t)?T3(t):t instanceof RegExp?t:typeof t=="object"?A3(t):t}function T3(t){let e=[];for(let n=0,r=t.length;n<r;n++)e[n]=Ey(t[n]);return e}function A3(t){let e={};for(let n in t)e[n]=Ey(t[n]);return e}function jk(t,...e){return e.forEach(n=>{for(let r in n)t[r]=n[r]}),t}function Pk(t){const e=~t.lastIndexOf("/")||~t.lastIndexOf("\\");return e===0?t:~e===t.length-1?Pk(t.substring(0,t.length-1)):t.substr(~e+1)}var sm=/\$(\d+)|\${(\d+):\/(downcase|upcase)}/g,Eu=class{static hasCaptures(t){return t===null?!1:(sm.lastIndex=0,sm.test(t))}static replaceCaptures(t,e,n){return t.replace(sm,(r,s,a,l)=>{let u=n[parseInt(s||a,10)];if(u){let f=e.substring(u.start,u.end);for(;f[0]===".";)f=f.substring(1);switch(l){case"downcase":return f.toLowerCase();case"upcase":return f.toUpperCase();default:return f}}else return r})}};function Bk(t,e){return t<e?-1:t>e?1:0}function Uk(t,e){if(t===null&&e===null)return 0;if(!t)return-1;if(!e)return 1;let n=t.length,r=e.length;if(n===r){for(let s=0;s<n;s++){let a=Bk(t[s],e[s]);if(a!==0)return a}return 0}return n-r}function Pw(t){return!!(/^#[0-9a-f]{6}$/i.test(t)||/^#[0-9a-f]{8}$/i.test(t)||/^#[0-9a-f]{3}$/i.test(t)||/^#[0-9a-f]{4}$/i.test(t))}function $k(t){return t.replace(/[\-\\\{\}\*\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&")}var qk=class{constructor(t){this.fn=t}cache=new Map;get(t){if(this.cache.has(t))return this.cache.get(t);const e=this.fn(t);return this.cache.set(t,e),e}},wf=class{constructor(t,e,n){this._colorMap=t,this._defaults=e,this._root=n}static createFromRawTheme(t,e){return this.createFromParsedTheme(I3(t),e)}static createFromParsedTheme(t,e){return M3(t,e)}_cachedMatchRoot=new qk(t=>this._root.match(t));getColorMap(){return this._colorMap.getColorMap()}getDefaults(){return this._defaults}match(t){if(t===null)return this._defaults;const e=t.scopeName,r=this._cachedMatchRoot.get(e).find(s=>R3(t.parent,s.parentScopes));return r?new Fk(r.fontStyle,r.foreground,r.background):null}},im=class Zu{constructor(e,n){this.parent=e,this.scopeName=n}static push(e,n){for(const r of n)e=new Zu(e,r);return e}static from(...e){let n=null;for(let r=0;r<e.length;r++)n=new Zu(n,e[r]);return n}push(e){return new Zu(this,e)}getSegments(){let e=this;const n=[];for(;e;)n.push(e.scopeName),e=e.parent;return n.reverse(),n}toString(){return this.getSegments().join(" ")}extends(e){return this===e?!0:this.parent===null?!1:this.parent.extends(e)}getExtensionIfDefined(e){const n=[];let r=this;for(;r&&r!==e;)n.push(r.scopeName),r=r.parent;return r===e?n.reverse():void 0}};function R3(t,e){if(e.length===0)return!0;for(let n=0;n<e.length;n++){let r=e[n],s=!1;if(r===">"){if(n===e.length-1)return!1;r=e[++n],s=!0}for(;t&&!O3(t.scopeName,r);){if(s)return!1;t=t.parent}if(!t)return!1;t=t.parent}return!0}function O3(t,e){return e===t||t.startsWith(e)&&t[e.length]==="."}var Fk=class{constructor(t,e,n){this.fontStyle=t,this.foregroundId=e,this.backgroundId=n}};function I3(t){if(!t)return[];if(!t.settings||!Array.isArray(t.settings))return[];let e=t.settings,n=[],r=0;for(let s=0,a=e.length;s<a;s++){let l=e[s];if(!l.settings)continue;let u;if(typeof l.scope=="string"){let p=l.scope;p=p.replace(/^[,]+/,""),p=p.replace(/[,]+$/,""),u=p.split(",")}else Array.isArray(l.scope)?u=l.scope:u=[""];let f=-1;if(typeof l.settings.fontStyle=="string"){f=0;let p=l.settings.fontStyle.split(" ");for(let _=0,g=p.length;_<g;_++)switch(p[_]){case"italic":f=f|1;break;case"bold":f=f|2;break;case"underline":f=f|4;break;case"strikethrough":f=f|8;break}}let h=null;typeof l.settings.foreground=="string"&&Pw(l.settings.foreground)&&(h=l.settings.foreground);let m=null;typeof l.settings.background=="string"&&Pw(l.settings.background)&&(m=l.settings.background);for(let p=0,_=u.length;p<_;p++){let v=u[p].trim().split(" "),x=v[v.length-1],E=null;v.length>1&&(E=v.slice(0,v.length-1),E.reverse()),n[r++]=new N3(x,E,s,f,h,m)}}return n}var N3=class{constructor(t,e,n,r,s,a){this.scope=t,this.parentScopes=e,this.index=n,this.fontStyle=r,this.foreground=s,this.background=a}},bn=(t=>(t[t.NotSet=-1]="NotSet",t[t.None=0]="None",t[t.Italic=1]="Italic",t[t.Bold=2]="Bold",t[t.Underline=4]="Underline",t[t.Strikethrough=8]="Strikethrough",t))(bn||{});function M3(t,e){t.sort((f,h)=>{let m=Bk(f.scope,h.scope);return m!==0||(m=Uk(f.parentScopes,h.parentScopes),m!==0)?m:f.index-h.index});let n=0,r="#000000",s="#ffffff";for(;t.length>=1&&t[0].scope==="";){let f=t.shift();f.fontStyle!==-1&&(n=f.fontStyle),f.foreground!==null&&(r=f.foreground),f.background!==null&&(s=f.background)}let a=new D3(e),l=new Fk(n,a.getId(r),a.getId(s)),u=new z3(new fg(0,null,-1,0,0),[]);for(let f=0,h=t.length;f<h;f++){let m=t[f];u.insert(0,m.scope,m.parentScopes,m.fontStyle,a.getId(m.foreground),a.getId(m.background))}return new wf(a,l,u)}var D3=class{_isFrozen;_lastColorId;_id2color;_color2id;constructor(t){if(this._lastColorId=0,this._id2color=[],this._color2id=Object.create(null),Array.isArray(t)){this._isFrozen=!0;for(let e=0,n=t.length;e<n;e++)this._color2id[t[e]]=e,this._id2color[e]=t[e]}else this._isFrozen=!1}getId(t){if(t===null)return 0;t=t.toUpperCase();let e=this._color2id[t];if(e)return e;if(this._isFrozen)throw new Error(`Missing color in color map - ${t}`);return e=++this._lastColorId,this._color2id[t]=e,this._id2color[e]=t,e}getColorMap(){return this._id2color.slice(0)}},L3=Object.freeze([]),fg=class Vk{scopeDepth;parentScopes;fontStyle;foreground;background;constructor(e,n,r,s,a){this.scopeDepth=e,this.parentScopes=n||L3,this.fontStyle=r,this.foreground=s,this.background=a}clone(){return new Vk(this.scopeDepth,this.parentScopes,this.fontStyle,this.foreground,this.background)}static cloneArr(e){let n=[];for(let r=0,s=e.length;r<s;r++)n[r]=e[r].clone();return n}acceptOverwrite(e,n,r,s){this.scopeDepth>e?console.log("how did this happen?"):this.scopeDepth=e,n!==-1&&(this.fontStyle=n),r!==0&&(this.foreground=r),s!==0&&(this.background=s)}},z3=class hg{constructor(e,n=[],r={}){this._mainRule=e,this._children=r,this._rulesWithParentScopes=n}_rulesWithParentScopes;static _cmpBySpecificity(e,n){if(e.scopeDepth!==n.scopeDepth)return n.scopeDepth-e.scopeDepth;let r=0,s=0;for(;e.parentScopes[r]===">"&&r++,n.parentScopes[s]===">"&&s++,!(r>=e.parentScopes.length||s>=n.parentScopes.length);){const a=n.parentScopes[s].length-e.parentScopes[r].length;if(a!==0)return a;r++,s++}return n.parentScopes.length-e.parentScopes.length}match(e){if(e!==""){let r=e.indexOf("."),s,a;if(r===-1?(s=e,a=""):(s=e.substring(0,r),a=e.substring(r+1)),this._children.hasOwnProperty(s))return this._children[s].match(a)}const n=this._rulesWithParentScopes.concat(this._mainRule);return n.sort(hg._cmpBySpecificity),n}insert(e,n,r,s,a,l){if(n===""){this._doInsertHere(e,r,s,a,l);return}let u=n.indexOf("."),f,h;u===-1?(f=n,h=""):(f=n.substring(0,u),h=n.substring(u+1));let m;this._children.hasOwnProperty(f)?m=this._children[f]:(m=new hg(this._mainRule.clone(),fg.cloneArr(this._rulesWithParentScopes)),this._children[f]=m),m.insert(e+1,h,r,s,a,l)}_doInsertHere(e,n,r,s,a){if(n===null){this._mainRule.acceptOverwrite(e,r,s,a);return}for(let l=0,u=this._rulesWithParentScopes.length;l<u;l++){let f=this._rulesWithParentScopes[l];if(Uk(f.parentScopes,n)===0){f.acceptOverwrite(e,r,s,a);return}}r===-1&&(r=this._mainRule.fontStyle),s===0&&(s=this._mainRule.foreground),a===0&&(a=this._mainRule.background),this._rulesWithParentScopes.push(new fg(e,n,r,s,a))}},Ga=class pr{static toBinaryStr(e){return e.toString(2).padStart(32,"0")}static print(e){const n=pr.getLanguageId(e),r=pr.getTokenType(e),s=pr.getFontStyle(e),a=pr.getForeground(e),l=pr.getBackground(e);console.log({languageId:n,tokenType:r,fontStyle:s,foreground:a,background:l})}static getLanguageId(e){return(e&255)>>>0}static getTokenType(e){return(e&768)>>>8}static containsBalancedBrackets(e){return(e&1024)!==0}static getFontStyle(e){return(e&30720)>>>11}static getForeground(e){return(e&16744448)>>>15}static getBackground(e){return(e&4278190080)>>>24}static set(e,n,r,s,a,l,u){let f=pr.getLanguageId(e),h=pr.getTokenType(e),m=pr.containsBalancedBrackets(e)?1:0,p=pr.getFontStyle(e),_=pr.getForeground(e),g=pr.getBackground(e);return n!==0&&(f=n),r!==8&&(h=r),s!==null&&(m=s?1:0),a!==-1&&(p=a),l!==0&&(_=l),u!==0&&(g=u),(f<<0|h<<8|m<<10|p<<11|_<<15|g<<24)>>>0}};function Sf(t,e){const n=[],r=j3(t);let s=r.next();for(;s!==null;){let f=0;if(s.length===2&&s.charAt(1)===":"){switch(s.charAt(0)){case"R":f=1;break;case"L":f=-1;break;default:console.log(`Unknown priority ${s} in scope selector`)}s=r.next()}let h=l();if(n.push({matcher:h,priority:f}),s!==",")break;s=r.next()}return n;function a(){if(s==="-"){s=r.next();const f=a();return h=>!!f&&!f(h)}if(s==="("){s=r.next();const f=u();return s===")"&&(s=r.next()),f}if(Bw(s)){const f=[];do f.push(s),s=r.next();while(Bw(s));return h=>e(f,h)}return null}function l(){const f=[];let h=a();for(;h;)f.push(h),h=a();return m=>f.every(p=>p(m))}function u(){const f=[];let h=l();for(;h&&(f.push(h),s==="|"||s===",");){do s=r.next();while(s==="|"||s===",");h=l()}return m=>f.some(p=>p(m))}}function Bw(t){return!!t&&!!t.match(/[\w\.:]+/)}function j3(t){let e=/([LR]:|[\w\.:][\w\.:\-]*|[\,\|\-\(\)])/g,n=e.exec(t);return{next:()=>{if(!n)return null;const r=n[0];return n=e.exec(t),r}}}function Hk(t){typeof t.dispose=="function"&&t.dispose()}var jl=class{constructor(t){this.scopeName=t}toKey(){return this.scopeName}},P3=class{constructor(t,e){this.scopeName=t,this.ruleName=e}toKey(){return`${this.scopeName}#${this.ruleName}`}},B3=class{_references=[];_seenReferenceKeys=new Set;get references(){return this._references}visitedRule=new Set;add(t){const e=t.toKey();this._seenReferenceKeys.has(e)||(this._seenReferenceKeys.add(e),this._references.push(t))}},U3=class{constructor(t,e){this.repo=t,this.initialScopeName=e,this.seenFullScopeRequests.add(this.initialScopeName),this.Q=[new jl(this.initialScopeName)]}seenFullScopeRequests=new Set;seenPartialScopeRequests=new Set;Q;processQueue(){const t=this.Q;this.Q=[];const e=new B3;for(const n of t)$3(n,this.initialScopeName,this.repo,e);for(const n of e.references)if(n instanceof jl){if(this.seenFullScopeRequests.has(n.scopeName))continue;this.seenFullScopeRequests.add(n.scopeName),this.Q.push(n)}else{if(this.seenFullScopeRequests.has(n.scopeName)||this.seenPartialScopeRequests.has(n.toKey()))continue;this.seenPartialScopeRequests.add(n.toKey()),this.Q.push(n)}}};function $3(t,e,n,r){const s=n.lookup(t.scopeName);if(!s){if(t.scopeName===e)throw new Error(`No grammar provided for <${e}>`);return}const a=n.lookup(e);t instanceof jl?Qu({baseGrammar:a,selfGrammar:s},r):dg(t.ruleName,{baseGrammar:a,selfGrammar:s,repository:s.repository},r);const l=n.injections(t.scopeName);if(l)for(const u of l)r.add(new jl(u))}function dg(t,e,n){if(e.repository&&e.repository[t]){const r=e.repository[t];kf([r],e,n)}}function Qu(t,e){t.selfGrammar.patterns&&Array.isArray(t.selfGrammar.patterns)&&kf(t.selfGrammar.patterns,{...t,repository:t.selfGrammar.repository},e),t.selfGrammar.injections&&kf(Object.values(t.selfGrammar.injections),{...t,repository:t.selfGrammar.repository},e)}function kf(t,e,n){for(const r of t){if(n.visitedRule.has(r))continue;n.visitedRule.add(r);const s=r.repository?jk({},e.repository,r.repository):e.repository;Array.isArray(r.patterns)&&kf(r.patterns,{...e,repository:s},n);const a=r.include;if(!a)continue;const l=Gk(a);switch(l.kind){case 0:Qu({...e,selfGrammar:e.baseGrammar},n);break;case 1:Qu(e,n);break;case 2:dg(l.ruleName,{...e,repository:s},n);break;case 3:case 4:const u=l.scopeName===e.selfGrammar.scopeName?e.selfGrammar:l.scopeName===e.baseGrammar.scopeName?e.baseGrammar:void 0;if(u){const f={baseGrammar:e.baseGrammar,selfGrammar:u,repository:s};l.kind===4?dg(l.ruleName,f,n):Qu(f,n)}else l.kind===4?n.add(new P3(l.scopeName,l.ruleName)):n.add(new jl(l.scopeName));break}}}var q3=class{kind=0},F3=class{kind=1},V3=class{constructor(t){this.ruleName=t}kind=2},H3=class{constructor(t){this.scopeName=t}kind=3},G3=class{constructor(t,e){this.scopeName=t,this.ruleName=e}kind=4};function Gk(t){if(t==="$base")return new q3;if(t==="$self")return new F3;const e=t.indexOf("#");if(e===-1)return new H3(t);if(e===0)return new V3(t.substring(1));{const n=t.substring(0,e),r=t.substring(e+1);return new G3(n,r)}}var K3=/\\(\d+)/,Uw=/\\(\d+)/g,Z3=-1,Kk=-2;var Yl=class{$location;id;_nameIsCapturing;_name;_contentNameIsCapturing;_contentName;constructor(t,e,n,r){this.$location=t,this.id=e,this._name=n||null,this._nameIsCapturing=Eu.hasCaptures(this._name),this._contentName=r||null,this._contentNameIsCapturing=Eu.hasCaptures(this._contentName)}get debugName(){const t=this.$location?`${Pk(this.$location.filename)}:${this.$location.line}`:"unknown";return`${this.constructor.name}#${this.id} @ ${t}`}getName(t,e){return!this._nameIsCapturing||this._name===null||t===null||e===null?this._name:Eu.replaceCaptures(this._name,t,e)}getContentName(t,e){return!this._contentNameIsCapturing||this._contentName===null?this._contentName:Eu.replaceCaptures(this._contentName,t,e)}},Q3=class extends Yl{retokenizeCapturedWithRuleId;constructor(t,e,n,r,s){super(t,e,n,r),this.retokenizeCapturedWithRuleId=s}dispose(){}collectPatterns(t,e){throw new Error("Not supported!")}compile(t,e){throw new Error("Not supported!")}compileAG(t,e,n,r){throw new Error("Not supported!")}},J3=class extends Yl{_match;captures;_cachedCompiledPatterns;constructor(t,e,n,r,s){super(t,e,n,null),this._match=new Pl(r,this.id),this.captures=s,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}get debugMatchRegExp(){return`${this._match.source}`}collectPatterns(t,e){e.push(this._match)}compile(t,e){return this._getCachedCompiledPatterns(t).compile(t)}compileAG(t,e,n,r){return this._getCachedCompiledPatterns(t).compileAG(t,n,r)}_getCachedCompiledPatterns(t){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new Bl,this.collectPatterns(t,this._cachedCompiledPatterns)),this._cachedCompiledPatterns}},$w=class extends Yl{hasMissingPatterns;patterns;_cachedCompiledPatterns;constructor(t,e,n,r,s){super(t,e,n,r),this.patterns=s.patterns,this.hasMissingPatterns=s.hasMissingPatterns,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}collectPatterns(t,e){for(const n of this.patterns)t.getRule(n).collectPatterns(t,e)}compile(t,e){return this._getCachedCompiledPatterns(t).compile(t)}compileAG(t,e,n,r){return this._getCachedCompiledPatterns(t).compileAG(t,n,r)}_getCachedCompiledPatterns(t){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new Bl,this.collectPatterns(t,this._cachedCompiledPatterns)),this._cachedCompiledPatterns}},pg=class extends Yl{_begin;beginCaptures;_end;endHasBackReferences;endCaptures;applyEndPatternLast;hasMissingPatterns;patterns;_cachedCompiledPatterns;constructor(t,e,n,r,s,a,l,u,f,h){super(t,e,n,r),this._begin=new Pl(s,this.id),this.beginCaptures=a,this._end=new Pl(l||"",-1),this.endHasBackReferences=this._end.hasBackReferences,this.endCaptures=u,this.applyEndPatternLast=f||!1,this.patterns=h.patterns,this.hasMissingPatterns=h.hasMissingPatterns,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}get debugBeginRegExp(){return`${this._begin.source}`}get debugEndRegExp(){return`${this._end.source}`}getEndWithResolvedBackReferences(t,e){return this._end.resolveBackReferences(t,e)}collectPatterns(t,e){e.push(this._begin)}compile(t,e){return this._getCachedCompiledPatterns(t,e).compile(t)}compileAG(t,e,n,r){return this._getCachedCompiledPatterns(t,e).compileAG(t,n,r)}_getCachedCompiledPatterns(t,e){if(!this._cachedCompiledPatterns){this._cachedCompiledPatterns=new Bl;for(const n of this.patterns)t.getRule(n).collectPatterns(t,this._cachedCompiledPatterns);this.applyEndPatternLast?this._cachedCompiledPatterns.push(this._end.hasBackReferences?this._end.clone():this._end):this._cachedCompiledPatterns.unshift(this._end.hasBackReferences?this._end.clone():this._end)}return this._end.hasBackReferences&&(this.applyEndPatternLast?this._cachedCompiledPatterns.setSource(this._cachedCompiledPatterns.length()-1,e):this._cachedCompiledPatterns.setSource(0,e)),this._cachedCompiledPatterns}},Ef=class extends Yl{_begin;beginCaptures;whileCaptures;_while;whileHasBackReferences;hasMissingPatterns;patterns;_cachedCompiledPatterns;_cachedCompiledWhilePatterns;constructor(t,e,n,r,s,a,l,u,f){super(t,e,n,r),this._begin=new Pl(s,this.id),this.beginCaptures=a,this.whileCaptures=u,this._while=new Pl(l,Kk),this.whileHasBackReferences=this._while.hasBackReferences,this.patterns=f.patterns,this.hasMissingPatterns=f.hasMissingPatterns,this._cachedCompiledPatterns=null,this._cachedCompiledWhilePatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null),this._cachedCompiledWhilePatterns&&(this._cachedCompiledWhilePatterns.dispose(),this._cachedCompiledWhilePatterns=null)}get debugBeginRegExp(){return`${this._begin.source}`}get debugWhileRegExp(){return`${this._while.source}`}getWhileWithResolvedBackReferences(t,e){return this._while.resolveBackReferences(t,e)}collectPatterns(t,e){e.push(this._begin)}compile(t,e){return this._getCachedCompiledPatterns(t).compile(t)}compileAG(t,e,n,r){return this._getCachedCompiledPatterns(t).compileAG(t,n,r)}_getCachedCompiledPatterns(t){if(!this._cachedCompiledPatterns){this._cachedCompiledPatterns=new Bl;for(const e of this.patterns)t.getRule(e).collectPatterns(t,this._cachedCompiledPatterns)}return this._cachedCompiledPatterns}compileWhile(t,e){return this._getCachedCompiledWhilePatterns(t,e).compile(t)}compileWhileAG(t,e,n,r){return this._getCachedCompiledWhilePatterns(t,e).compileAG(t,n,r)}_getCachedCompiledWhilePatterns(t,e){return this._cachedCompiledWhilePatterns||(this._cachedCompiledWhilePatterns=new Bl,this._cachedCompiledWhilePatterns.push(this._while.hasBackReferences?this._while.clone():this._while)),this._while.hasBackReferences&&this._cachedCompiledWhilePatterns.setSource(0,e||""),this._cachedCompiledWhilePatterns}},Zk=class gn{static createCaptureRule(e,n,r,s,a){return e.registerRule(l=>new Q3(n,l,r,s,a))}static getCompiledRuleId(e,n,r){return e.id||n.registerRule(s=>{if(e.id=s,e.match)return new J3(e.$vscodeTextmateLocation,e.id,e.name,e.match,gn._compileCaptures(e.captures,n,r));if(typeof e.begin>"u"){e.repository&&(r=jk({},r,e.repository));let a=e.patterns;return typeof a>"u"&&e.include&&(a=[{include:e.include}]),new $w(e.$vscodeTextmateLocation,e.id,e.name,e.contentName,gn._compilePatterns(a,n,r))}return e.while?new Ef(e.$vscodeTextmateLocation,e.id,e.name,e.contentName,e.begin,gn._compileCaptures(e.beginCaptures||e.captures,n,r),e.while,gn._compileCaptures(e.whileCaptures||e.captures,n,r),gn._compilePatterns(e.patterns,n,r)):new pg(e.$vscodeTextmateLocation,e.id,e.name,e.contentName,e.begin,gn._compileCaptures(e.beginCaptures||e.captures,n,r),e.end,gn._compileCaptures(e.endCaptures||e.captures,n,r),e.applyEndPatternLast,gn._compilePatterns(e.patterns,n,r))}),e.id}static _compileCaptures(e,n,r){let s=[];if(e){let a=0;for(const l in e){if(l==="$vscodeTextmateLocation")continue;const u=parseInt(l,10);u>a&&(a=u)}for(let l=0;l<=a;l++)s[l]=null;for(const l in e){if(l==="$vscodeTextmateLocation")continue;const u=parseInt(l,10);let f=0;e[l].patterns&&(f=gn.getCompiledRuleId(e[l],n,r)),s[u]=gn.createCaptureRule(n,e[l].$vscodeTextmateLocation,e[l].name,e[l].contentName,f)}}return s}static _compilePatterns(e,n,r){let s=[];if(e)for(let a=0,l=e.length;a<l;a++){const u=e[a];let f=-1;if(u.include){const h=Gk(u.include);switch(h.kind){case 0:case 1:f=gn.getCompiledRuleId(r[u.include],n,r);break;case 2:let m=r[h.ruleName];m&&(f=gn.getCompiledRuleId(m,n,r));break;case 3:case 4:const p=h.scopeName,_=h.kind===4?h.ruleName:null,g=n.getExternalGrammar(p,r);if(g)if(_){let v=g.repository[_];v&&(f=gn.getCompiledRuleId(v,n,g.repository))}else f=gn.getCompiledRuleId(g.repository.$self,n,g.repository);break}}else f=gn.getCompiledRuleId(u,n,r);if(f!==-1){const h=n.getRule(f);let m=!1;if((h instanceof $w||h instanceof pg||h instanceof Ef)&&h.hasMissingPatterns&&h.patterns.length===0&&(m=!0),m)continue;s.push(f)}}return{patterns:s,hasMissingPatterns:(e?e.length:0)!==s.length}}},Pl=class Qk{source;ruleId;hasAnchor;hasBackReferences;_anchorCache;constructor(e,n){if(e&&typeof e=="string"){const r=e.length;let s=0,a=[],l=!1;for(let u=0;u<r;u++)if(e.charAt(u)==="\\"&&u+1<r){const h=e.charAt(u+1);h==="z"?(a.push(e.substring(s,u)),a.push("$(?!\\n)(?<!\\n)"),s=u+2):(h==="A"||h==="G")&&(l=!0),u++}this.hasAnchor=l,s===0?this.source=e:(a.push(e.substring(s,r)),this.source=a.join(""))}else this.hasAnchor=!1,this.source=e;this.hasAnchor?this._anchorCache=this._buildAnchorCache():this._anchorCache=null,this.ruleId=n,typeof this.source=="string"?this.hasBackReferences=K3.test(this.source):this.hasBackReferences=!1}clone(){return new Qk(this.source,this.ruleId)}setSource(e){this.source!==e&&(this.source=e,this.hasAnchor&&(this._anchorCache=this._buildAnchorCache()))}resolveBackReferences(e,n){if(typeof this.source!="string")throw new Error("This method should only be called if the source is a string");let r=n.map(s=>e.substring(s.start,s.end));return Uw.lastIndex=0,this.source.replace(Uw,(s,a)=>$k(r[parseInt(a,10)]||""))}_buildAnchorCache(){if(typeof this.source!="string")throw new Error("This method should only be called if the source is a string");let e=[],n=[],r=[],s=[],a,l,u,f;for(a=0,l=this.source.length;a<l;a++)u=this.source.charAt(a),e[a]=u,n[a]=u,r[a]=u,s[a]=u,u==="\\"&&a+1<l&&(f=this.source.charAt(a+1),f==="A"?(e[a+1]="",n[a+1]="",r[a+1]="A",s[a+1]="A"):f==="G"?(e[a+1]="",n[a+1]="G",r[a+1]="",s[a+1]="G"):(e[a+1]=f,n[a+1]=f,r[a+1]=f,s[a+1]=f),a++);return{A0_G0:e.join(""),A0_G1:n.join(""),A1_G0:r.join(""),A1_G1:s.join("")}}resolveAnchors(e,n){return!this.hasAnchor||!this._anchorCache||typeof this.source!="string"?this.source:e?n?this._anchorCache.A1_G1:this._anchorCache.A1_G0:n?this._anchorCache.A0_G1:this._anchorCache.A0_G0}},Bl=class{_items;_hasAnchors;_cached;_anchorCache;constructor(){this._items=[],this._hasAnchors=!1,this._cached=null,this._anchorCache={A0_G0:null,A0_G1:null,A1_G0:null,A1_G1:null}}dispose(){this._disposeCaches()}_disposeCaches(){this._cached&&(this._cached.dispose(),this._cached=null),this._anchorCache.A0_G0&&(this._anchorCache.A0_G0.dispose(),this._anchorCache.A0_G0=null),this._anchorCache.A0_G1&&(this._anchorCache.A0_G1.dispose(),this._anchorCache.A0_G1=null),this._anchorCache.A1_G0&&(this._anchorCache.A1_G0.dispose(),this._anchorCache.A1_G0=null),this._anchorCache.A1_G1&&(this._anchorCache.A1_G1.dispose(),this._anchorCache.A1_G1=null)}push(t){this._items.push(t),this._hasAnchors=this._hasAnchors||t.hasAnchor}unshift(t){this._items.unshift(t),this._hasAnchors=this._hasAnchors||t.hasAnchor}length(){return this._items.length}setSource(t,e){this._items[t].source!==e&&(this._disposeCaches(),this._items[t].setSource(e))}compile(t){if(!this._cached){let e=this._items.map(n=>n.source);this._cached=new qw(t,e,this._items.map(n=>n.ruleId))}return this._cached}compileAG(t,e,n){return this._hasAnchors?e?n?(this._anchorCache.A1_G1||(this._anchorCache.A1_G1=this._resolveAnchors(t,e,n)),this._anchorCache.A1_G1):(this._anchorCache.A1_G0||(this._anchorCache.A1_G0=this._resolveAnchors(t,e,n)),this._anchorCache.A1_G0):n?(this._anchorCache.A0_G1||(this._anchorCache.A0_G1=this._resolveAnchors(t,e,n)),this._anchorCache.A0_G1):(this._anchorCache.A0_G0||(this._anchorCache.A0_G0=this._resolveAnchors(t,e,n)),this._anchorCache.A0_G0):this.compile(t)}_resolveAnchors(t,e,n){let r=this._items.map(s=>s.resolveAnchors(e,n));return new qw(t,r,this._items.map(s=>s.ruleId))}},qw=class{constructor(t,e,n){this.regExps=e,this.rules=n,this.scanner=t.createOnigScanner(e)}scanner;dispose(){typeof this.scanner.dispose=="function"&&this.scanner.dispose()}toString(){const t=[];for(let e=0,n=this.rules.length;e<n;e++)t.push("   - "+this.rules[e]+": "+this.regExps[e]);return t.join(`
`)}findNextMatchSync(t,e,n){const r=this.scanner.findNextMatchSync(t,e,n);return r?{ruleId:this.rules[r.index],captureIndices:r.captureIndices}:null}},am=class{constructor(t,e){this.languageId=t,this.tokenType=e}},Y3=class mg{_defaultAttributes;_embeddedLanguagesMatcher;constructor(e,n){this._defaultAttributes=new am(e,8),this._embeddedLanguagesMatcher=new X3(Object.entries(n||{}))}getDefaultAttributes(){return this._defaultAttributes}getBasicScopeAttributes(e){return e===null?mg._NULL_SCOPE_METADATA:this._getBasicScopeAttributes.get(e)}static _NULL_SCOPE_METADATA=new am(0,0);_getBasicScopeAttributes=new qk(e=>{const n=this._scopeToLanguage(e),r=this._toStandardTokenType(e);return new am(n,r)});_scopeToLanguage(e){return this._embeddedLanguagesMatcher.match(e)||0}_toStandardTokenType(e){const n=e.match(mg.STANDARD_TOKEN_TYPE_REGEXP);if(!n)return 8;switch(n[1]){case"comment":return 1;case"string":return 2;case"regex":return 3;case"meta.embedded":return 0}throw new Error("Unexpected match for standard token type!")}static STANDARD_TOKEN_TYPE_REGEXP=/\b(comment|string|regex|meta\.embedded)\b/},X3=class{values;scopesRegExp;constructor(t){if(t.length===0)this.values=null,this.scopesRegExp=null;else{this.values=new Map(t);const e=t.map(([n,r])=>$k(n));e.sort(),e.reverse(),this.scopesRegExp=new RegExp(`^((${e.join(")|(")}))($|\\.)`,"")}}match(t){if(!this.scopesRegExp)return;const e=t.match(this.scopesRegExp);if(e)return this.values.get(e[1])}},Fw=class{constructor(t,e){this.stack=t,this.stoppedEarly=e}};function Jk(t,e,n,r,s,a,l,u){const f=e.content.length;let h=!1,m=-1;if(l){const g=W3(t,e,n,r,s,a);s=g.stack,r=g.linePos,n=g.isFirstLine,m=g.anchorPosition}const p=Date.now();for(;!h;){if(u!==0&&Date.now()-p>u)return new Fw(s,!0);_()}return new Fw(s,!1);function _(){const g=ez(t,e,n,r,s,m);if(!g){a.produce(s,f),h=!0;return}const v=g.captureIndices,x=g.matchedRuleId,E=v&&v.length>0?v[0].end>r:!1;if(x===Z3){const k=s.getRule(t);a.produce(s,v[0].start),s=s.withContentNameScopesList(s.nameScopesList),ll(t,e,n,s,a,k.endCaptures,v),a.produce(s,v[0].end);const T=s;if(s=s.parent,m=T.getAnchorPos(),!E&&T.getEnterPos()===r){s=T,a.produce(s,f),h=!0;return}}else{const k=t.getRule(x);a.produce(s,v[0].start);const T=s,C=k.getName(e.content,v),j=s.contentNameScopesList.pushAttributed(C,t);if(s=s.push(x,r,m,v[0].end===f,null,j,j),k instanceof pg){const D=k;ll(t,e,n,s,a,D.beginCaptures,v),a.produce(s,v[0].end),m=v[0].end;const I=D.getContentName(e.content,v),U=j.pushAttributed(I,t);if(s=s.withContentNameScopesList(U),D.endHasBackReferences&&(s=s.withEndRule(D.getEndWithResolvedBackReferences(e.content,v))),!E&&T.hasSameRuleAs(s)){s=s.pop(),a.produce(s,f),h=!0;return}}else if(k instanceof Ef){const D=k;ll(t,e,n,s,a,D.beginCaptures,v),a.produce(s,v[0].end),m=v[0].end;const I=D.getContentName(e.content,v),U=j.pushAttributed(I,t);if(s=s.withContentNameScopesList(U),D.whileHasBackReferences&&(s=s.withEndRule(D.getWhileWithResolvedBackReferences(e.content,v))),!E&&T.hasSameRuleAs(s)){s=s.pop(),a.produce(s,f),h=!0;return}}else if(ll(t,e,n,s,a,k.captures,v),a.produce(s,v[0].end),s=s.pop(),!E){s=s.safePop(),a.produce(s,f),h=!0;return}}v[0].end>r&&(r=v[0].end,n=!1)}}function W3(t,e,n,r,s,a){let l=s.beginRuleCapturedEOL?0:-1;const u=[];for(let f=s;f;f=f.pop()){const h=f.getRule(t);h instanceof Ef&&u.push({rule:h,stack:f})}for(let f=u.pop();f;f=u.pop()){const{ruleScanner:h,findOptions:m}=rz(f.rule,t,f.stack.endRule,n,r===l),p=h.findNextMatchSync(e,r,m);if(p){if(p.ruleId!==Kk){s=f.stack.pop();break}p.captureIndices&&p.captureIndices.length&&(a.produce(f.stack,p.captureIndices[0].start),ll(t,e,n,f.stack,a,f.rule.whileCaptures,p.captureIndices),a.produce(f.stack,p.captureIndices[0].end),l=p.captureIndices[0].end,p.captureIndices[0].end>r&&(r=p.captureIndices[0].end,n=!1))}else{s=f.stack.pop();break}}return{stack:s,linePos:r,anchorPosition:l,isFirstLine:n}}function ez(t,e,n,r,s,a){const l=tz(t,e,n,r,s,a),u=t.getInjections();if(u.length===0)return l;const f=nz(u,t,e,n,r,s,a);if(!f)return l;if(!l)return f;const h=l.captureIndices[0].start,m=f.captureIndices[0].start;return m<h||f.priorityMatch&&m===h?f:l}function tz(t,e,n,r,s,a){const l=s.getRule(t),{ruleScanner:u,findOptions:f}=Yk(l,t,s.endRule,n,r===a),h=u.findNextMatchSync(e,r,f);return h?{captureIndices:h.captureIndices,matchedRuleId:h.ruleId}:null}function nz(t,e,n,r,s,a,l){let u=Number.MAX_VALUE,f=null,h,m=0;const p=a.contentNameScopesList.getScopeNames();for(let _=0,g=t.length;_<g;_++){const v=t[_];if(!v.matcher(p))continue;const x=e.getRule(v.ruleId),{ruleScanner:E,findOptions:k}=Yk(x,e,null,r,s===l),T=E.findNextMatchSync(n,s,k);if(!T)continue;const C=T.captureIndices[0].start;if(!(C>=u)&&(u=C,f=T.captureIndices,h=T.ruleId,m=v.priority,u===s))break}return f?{priorityMatch:m===-1,captureIndices:f,matchedRuleId:h}:null}function Yk(t,e,n,r,s){return{ruleScanner:t.compileAG(e,n,r,s),findOptions:0}}function rz(t,e,n,r,s){return{ruleScanner:t.compileWhileAG(e,n,r,s),findOptions:0}}function ll(t,e,n,r,s,a,l){if(a.length===0)return;const u=e.content,f=Math.min(a.length,l.length),h=[],m=l[0].end;for(let p=0;p<f;p++){const _=a[p];if(_===null)continue;const g=l[p];if(g.length===0)continue;if(g.start>m)break;for(;h.length>0&&h[h.length-1].endPos<=g.start;)s.produceFromScopes(h[h.length-1].scopes,h[h.length-1].endPos),h.pop();if(h.length>0?s.produceFromScopes(h[h.length-1].scopes,g.start):s.produce(r,g.start),_.retokenizeCapturedWithRuleId){const x=_.getName(u,l),E=r.contentNameScopesList.pushAttributed(x,t),k=_.getContentName(u,l),T=E.pushAttributed(k,t),C=r.push(_.retokenizeCapturedWithRuleId,g.start,-1,!1,null,E,T),j=t.createOnigString(u.substring(0,g.end));Jk(t,j,n&&g.start===0,g.start,C,s,!1,0),Hk(j);continue}const v=_.getName(u,l);if(v!==null){const E=(h.length>0?h[h.length-1].scopes:r.contentNameScopesList).pushAttributed(v,t);h.push(new sz(E,g.end))}}for(;h.length>0;)s.produceFromScopes(h[h.length-1].scopes,h[h.length-1].endPos),h.pop()}var sz=class{scopes;endPos;constructor(t,e){this.scopes=t,this.endPos=e}};function iz(t,e,n,r,s,a,l,u){return new oz(t,e,n,r,s,a,l,u)}function Vw(t,e,n,r,s){const a=Sf(e,Cf),l=Zk.getCompiledRuleId(n,r,s.repository);for(const u of a)t.push({debugSelector:e,matcher:u.matcher,ruleId:l,grammar:s,priority:u.priority})}function Cf(t,e){if(e.length<t.length)return!1;let n=0;return t.every(r=>{for(let s=n;s<e.length;s++)if(az(e[s],r))return n=s+1,!0;return!1})}function az(t,e){if(!t)return!1;if(t===e)return!0;const n=e.length;return t.length>n&&t.substr(0,n)===e&&t[n]==="."}var oz=class{constructor(t,e,n,r,s,a,l,u){if(this._rootScopeName=t,this.balancedBracketSelectors=a,this._onigLib=u,this._basicScopeAttributesProvider=new Y3(n,r),this._rootId=-1,this._lastRuleId=0,this._ruleId2desc=[null],this._includedGrammars={},this._grammarRepository=l,this._grammar=Hw(e,null),this._injections=null,this._tokenTypeMatchers=[],s)for(const f of Object.keys(s)){const h=Sf(f,Cf);for(const m of h)this._tokenTypeMatchers.push({matcher:m.matcher,type:s[f]})}}_rootId;_lastRuleId;_ruleId2desc;_includedGrammars;_grammarRepository;_grammar;_injections;_basicScopeAttributesProvider;_tokenTypeMatchers;get themeProvider(){return this._grammarRepository}dispose(){for(const t of this._ruleId2desc)t&&t.dispose()}createOnigScanner(t){return this._onigLib.createOnigScanner(t)}createOnigString(t){return this._onigLib.createOnigString(t)}getMetadataForScope(t){return this._basicScopeAttributesProvider.getBasicScopeAttributes(t)}_collectInjections(){const t={lookup:s=>s===this._rootScopeName?this._grammar:this.getExternalGrammar(s),injections:s=>this._grammarRepository.injections(s)},e=[],n=this._rootScopeName,r=t.lookup(n);if(r){const s=r.injections;if(s)for(let l in s)Vw(e,l,s[l],this,r);const a=this._grammarRepository.injections(n);a&&a.forEach(l=>{const u=this.getExternalGrammar(l);if(u){const f=u.injectionSelector;f&&Vw(e,f,u,this,u)}})}return e.sort((s,a)=>s.priority-a.priority),e}getInjections(){return this._injections===null&&(this._injections=this._collectInjections()),this._injections}registerRule(t){const e=++this._lastRuleId,n=t(e);return this._ruleId2desc[e]=n,n}getRule(t){return this._ruleId2desc[t]}getExternalGrammar(t,e){if(this._includedGrammars[t])return this._includedGrammars[t];if(this._grammarRepository){const n=this._grammarRepository.lookup(t);if(n)return this._includedGrammars[t]=Hw(n,e&&e.$base),this._includedGrammars[t]}}tokenizeLine(t,e,n=0){const r=this._tokenize(t,e,!1,n);return{tokens:r.lineTokens.getResult(r.ruleStack,r.lineLength),ruleStack:r.ruleStack,stoppedEarly:r.stoppedEarly}}tokenizeLine2(t,e,n=0){const r=this._tokenize(t,e,!0,n);return{tokens:r.lineTokens.getBinaryResult(r.ruleStack,r.lineLength),ruleStack:r.ruleStack,stoppedEarly:r.stoppedEarly}}_tokenize(t,e,n,r){this._rootId===-1&&(this._rootId=Zk.getCompiledRuleId(this._grammar.repository.$self,this,this._grammar.repository),this.getInjections());let s;if(!e||e===gg.NULL){s=!0;const h=this._basicScopeAttributesProvider.getDefaultAttributes(),m=this.themeProvider.getDefaults(),p=Ga.set(0,h.languageId,h.tokenType,null,m.fontStyle,m.foregroundId,m.backgroundId),_=this.getRule(this._rootId).getName(null,null);let g;_?g=wl.createRootAndLookUpScopeName(_,p,this):g=wl.createRoot("unknown",p),e=new gg(null,this._rootId,-1,-1,!1,null,g,g)}else s=!1,e.reset();t=t+`
`;const a=this.createOnigString(t),l=a.content.length,u=new cz(n,t,this._tokenTypeMatchers,this.balancedBracketSelectors),f=Jk(this,a,s,0,e,u,!0,r);return Hk(a),{lineLength:l,lineTokens:u,ruleStack:f.stack,stoppedEarly:f.stoppedEarly}}};function Hw(t,e){return t=C3(t),t.repository=t.repository||{},t.repository.$self={$vscodeTextmateLocation:t.$vscodeTextmateLocation,patterns:t.patterns,name:t.scopeName},t.repository.$base=e||t.repository.$self,t}var wl=class Lr{constructor(e,n,r){this.parent=e,this.scopePath=n,this.tokenAttributes=r}static fromExtension(e,n){let r=e,s=e?.scopePath??null;for(const a of n)s=im.push(s,a.scopeNames),r=new Lr(r,s,a.encodedTokenAttributes);return r}static createRoot(e,n){return new Lr(null,new im(null,e),n)}static createRootAndLookUpScopeName(e,n,r){const s=r.getMetadataForScope(e),a=new im(null,e),l=r.themeProvider.themeMatch(a),u=Lr.mergeAttributes(n,s,l);return new Lr(null,a,u)}get scopeName(){return this.scopePath.scopeName}toString(){return this.getScopeNames().join(" ")}equals(e){return Lr.equals(this,e)}static equals(e,n){do{if(e===n||!e&&!n)return!0;if(!e||!n||e.scopeName!==n.scopeName||e.tokenAttributes!==n.tokenAttributes)return!1;e=e.parent,n=n.parent}while(!0)}static mergeAttributes(e,n,r){let s=-1,a=0,l=0;return r!==null&&(s=r.fontStyle,a=r.foregroundId,l=r.backgroundId),Ga.set(e,n.languageId,n.tokenType,null,s,a,l)}pushAttributed(e,n){if(e===null)return this;if(e.indexOf(" ")===-1)return Lr._pushAttributed(this,e,n);const r=e.split(/ /g);let s=this;for(const a of r)s=Lr._pushAttributed(s,a,n);return s}static _pushAttributed(e,n,r){const s=r.getMetadataForScope(n),a=e.scopePath.push(n),l=r.themeProvider.themeMatch(a),u=Lr.mergeAttributes(e.tokenAttributes,s,l);return new Lr(e,a,u)}getScopeNames(){return this.scopePath.getSegments()}getExtensionIfDefined(e){const n=[];let r=this;for(;r&&r!==e;)n.push({encodedTokenAttributes:r.tokenAttributes,scopeNames:r.scopePath.getExtensionIfDefined(r.parent?.scopePath??null)}),r=r.parent;return r===e?n.reverse():void 0}},gg=class Si{constructor(e,n,r,s,a,l,u,f){this.parent=e,this.ruleId=n,this.beginRuleCapturedEOL=a,this.endRule=l,this.nameScopesList=u,this.contentNameScopesList=f,this.depth=this.parent?this.parent.depth+1:1,this._enterPos=r,this._anchorPos=s}_stackElementBrand=void 0;static NULL=new Si(null,0,0,0,!1,null,null,null);_enterPos;_anchorPos;depth;equals(e){return e===null?!1:Si._equals(this,e)}static _equals(e,n){return e===n?!0:this._structuralEquals(e,n)?wl.equals(e.contentNameScopesList,n.contentNameScopesList):!1}static _structuralEquals(e,n){do{if(e===n||!e&&!n)return!0;if(!e||!n||e.depth!==n.depth||e.ruleId!==n.ruleId||e.endRule!==n.endRule)return!1;e=e.parent,n=n.parent}while(!0)}clone(){return this}static _reset(e){for(;e;)e._enterPos=-1,e._anchorPos=-1,e=e.parent}reset(){Si._reset(this)}pop(){return this.parent}safePop(){return this.parent?this.parent:this}push(e,n,r,s,a,l,u){return new Si(this,e,n,r,s,a,l,u)}getEnterPos(){return this._enterPos}getAnchorPos(){return this._anchorPos}getRule(e){return e.getRule(this.ruleId)}toString(){const e=[];return this._writeString(e,0),"["+e.join(",")+"]"}_writeString(e,n){return this.parent&&(n=this.parent._writeString(e,n)),e[n++]=`(${this.ruleId}, ${this.nameScopesList?.toString()}, ${this.contentNameScopesList?.toString()})`,n}withContentNameScopesList(e){return this.contentNameScopesList===e?this:this.parent.push(this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,this.endRule,this.nameScopesList,e)}withEndRule(e){return this.endRule===e?this:new Si(this.parent,this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,e,this.nameScopesList,this.contentNameScopesList)}hasSameRuleAs(e){let n=this;for(;n&&n._enterPos===e._enterPos;){if(n.ruleId===e.ruleId)return!0;n=n.parent}return!1}toStateStackFrame(){return{ruleId:this.ruleId,beginRuleCapturedEOL:this.beginRuleCapturedEOL,endRule:this.endRule,nameScopesList:this.nameScopesList?.getExtensionIfDefined(this.parent?.nameScopesList??null)??[],contentNameScopesList:this.contentNameScopesList?.getExtensionIfDefined(this.nameScopesList)??[]}}static pushFrame(e,n){const r=wl.fromExtension(e?.nameScopesList??null,n.nameScopesList);return new Si(e,n.ruleId,n.enterPos??-1,n.anchorPos??-1,n.beginRuleCapturedEOL,n.endRule,r,wl.fromExtension(r,n.contentNameScopesList))}},lz=class{balancedBracketScopes;unbalancedBracketScopes;allowAny=!1;constructor(t,e){this.balancedBracketScopes=t.flatMap(n=>n==="*"?(this.allowAny=!0,[]):Sf(n,Cf).map(r=>r.matcher)),this.unbalancedBracketScopes=e.flatMap(n=>Sf(n,Cf).map(r=>r.matcher))}get matchesAlways(){return this.allowAny&&this.unbalancedBracketScopes.length===0}get matchesNever(){return this.balancedBracketScopes.length===0&&!this.allowAny}match(t){for(const e of this.unbalancedBracketScopes)if(e(t))return!1;for(const e of this.balancedBracketScopes)if(e(t))return!0;return this.allowAny}},cz=class{constructor(t,e,n,r){this.balancedBracketSelectors=r,this._emitBinaryTokens=t,this._tokenTypeOverrides=n,this._lineText=null,this._tokens=[],this._binaryTokens=[],this._lastTokenEndIndex=0}_emitBinaryTokens;_lineText;_tokens;_binaryTokens;_lastTokenEndIndex;_tokenTypeOverrides;produce(t,e){this.produceFromScopes(t.contentNameScopesList,e)}produceFromScopes(t,e){if(this._lastTokenEndIndex>=e)return;if(this._emitBinaryTokens){let r=t?.tokenAttributes??0,s=!1;if(this.balancedBracketSelectors?.matchesAlways&&(s=!0),this._tokenTypeOverrides.length>0||this.balancedBracketSelectors&&!this.balancedBracketSelectors.matchesAlways&&!this.balancedBracketSelectors.matchesNever){const a=t?.getScopeNames()??[];for(const l of this._tokenTypeOverrides)l.matcher(a)&&(r=Ga.set(r,0,l.type,null,-1,0,0));this.balancedBracketSelectors&&(s=this.balancedBracketSelectors.match(a))}if(s&&(r=Ga.set(r,0,8,s,-1,0,0)),this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-1]===r){this._lastTokenEndIndex=e;return}this._binaryTokens.push(this._lastTokenEndIndex),this._binaryTokens.push(r),this._lastTokenEndIndex=e;return}const n=t?.getScopeNames()??[];this._tokens.push({startIndex:this._lastTokenEndIndex,endIndex:e,scopes:n}),this._lastTokenEndIndex=e}getResult(t,e){return this._tokens.length>0&&this._tokens[this._tokens.length-1].startIndex===e-1&&this._tokens.pop(),this._tokens.length===0&&(this._lastTokenEndIndex=-1,this.produce(t,e),this._tokens[this._tokens.length-1].startIndex=0),this._tokens}getBinaryResult(t,e){this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-2]===e-1&&(this._binaryTokens.pop(),this._binaryTokens.pop()),this._binaryTokens.length===0&&(this._lastTokenEndIndex=-1,this.produce(t,e),this._binaryTokens[this._binaryTokens.length-2]=0);const n=new Uint32Array(this._binaryTokens.length);for(let r=0,s=this._binaryTokens.length;r<s;r++)n[r]=this._binaryTokens[r];return n}},uz=class{constructor(t,e){this._onigLib=e,this._theme=t}_grammars=new Map;_rawGrammars=new Map;_injectionGrammars=new Map;_theme;dispose(){for(const t of this._grammars.values())t.dispose()}setTheme(t){this._theme=t}getColorMap(){return this._theme.getColorMap()}addGrammar(t,e){this._rawGrammars.set(t.scopeName,t),e&&this._injectionGrammars.set(t.scopeName,e)}lookup(t){return this._rawGrammars.get(t)}injections(t){return this._injectionGrammars.get(t)}getDefaults(){return this._theme.getDefaults()}themeMatch(t){return this._theme.match(t)}grammarForScopeName(t,e,n,r,s){if(!this._grammars.has(t)){let a=this._rawGrammars.get(t);if(!a)return null;this._grammars.set(t,iz(t,a,e,n,r,s,this,this._onigLib))}return this._grammars.get(t)}},fz=class{_options;_syncRegistry;_ensureGrammarCache;constructor(e){this._options=e,this._syncRegistry=new uz(wf.createFromRawTheme(e.theme,e.colorMap),e.onigLib),this._ensureGrammarCache=new Map}dispose(){this._syncRegistry.dispose()}setTheme(e,n){this._syncRegistry.setTheme(wf.createFromRawTheme(e,n))}getColorMap(){return this._syncRegistry.getColorMap()}loadGrammarWithEmbeddedLanguages(e,n,r){return this.loadGrammarWithConfiguration(e,n,{embeddedLanguages:r})}loadGrammarWithConfiguration(e,n,r){return this._loadGrammar(e,n,r.embeddedLanguages,r.tokenTypes,new lz(r.balancedBracketSelectors||[],r.unbalancedBracketSelectors||[]))}loadGrammar(e){return this._loadGrammar(e,0,null,null,null)}_loadGrammar(e,n,r,s,a){const l=new U3(this._syncRegistry,e);for(;l.Q.length>0;)l.Q.map(u=>this._loadSingleGrammar(u.scopeName)),l.processQueue();return this._grammarForScopeName(e,n,r,s,a)}_loadSingleGrammar(e){this._ensureGrammarCache.has(e)||(this._doLoadSingleGrammar(e),this._ensureGrammarCache.set(e,!0))}_doLoadSingleGrammar(e){const n=this._options.loadGrammar(e);if(n){const r=typeof this._options.getInjections=="function"?this._options.getInjections(e):void 0;this._syncRegistry.addGrammar(n,r)}}addGrammar(e,n=[],r=0,s=null){return this._syncRegistry.addGrammar(e,n),this._grammarForScopeName(e.scopeName,r,s)}_grammarForScopeName(e,n=0,r=null,s=null,a=null){return this._syncRegistry.grammarForScopeName(e,n,r,s,a)}},yg=gg.NULL;const hz=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"];class Xl{constructor(e,n,r){this.normal=n,this.property=e,r&&(this.space=r)}}Xl.prototype.normal={};Xl.prototype.property={};Xl.prototype.space=void 0;function Xk(t,e){const n={},r={};for(const s of t)Object.assign(n,s.property),Object.assign(r,s.normal);return new Xl(n,r,e)}function _g(t){return t.toLowerCase()}class qn{constructor(e,n){this.attribute=n,this.property=e}}qn.prototype.attribute="";qn.prototype.booleanish=!1;qn.prototype.boolean=!1;qn.prototype.commaOrSpaceSeparated=!1;qn.prototype.commaSeparated=!1;qn.prototype.defined=!1;qn.prototype.mustUseProperty=!1;qn.prototype.number=!1;qn.prototype.overloadedBoolean=!1;qn.prototype.property="";qn.prototype.spaceSeparated=!1;qn.prototype.space=void 0;let dz=0;const Be=ji(),Lt=ji(),bg=ji(),he=ji(),gt=ji(),Ua=ji(),Jn=ji();function ji(){return 2**++dz}const vg=Object.freeze(Object.defineProperty({__proto__:null,boolean:Be,booleanish:Lt,commaOrSpaceSeparated:Jn,commaSeparated:Ua,number:he,overloadedBoolean:bg,spaceSeparated:gt},Symbol.toStringTag,{value:"Module"})),om=Object.keys(vg);class Cy extends qn{constructor(e,n,r,s){let a=-1;if(super(e,n),Gw(this,"space",s),typeof r=="number")for(;++a<om.length;){const l=om[a];Gw(this,om[a],(r&vg[l])===vg[l])}}}Cy.prototype.defined=!0;function Gw(t,e,n){n&&(t[e]=n)}function Ya(t){const e={},n={};for(const[r,s]of Object.entries(t.properties)){const a=new Cy(r,t.transform(t.attributes||{},r),s,t.space);t.mustUseProperty&&t.mustUseProperty.includes(r)&&(a.mustUseProperty=!0),e[r]=a,n[_g(r)]=r,n[_g(a.attribute)]=r}return new Xl(e,n,t.space)}const Wk=Ya({properties:{ariaActiveDescendant:null,ariaAtomic:Lt,ariaAutoComplete:null,ariaBusy:Lt,ariaChecked:Lt,ariaColCount:he,ariaColIndex:he,ariaColSpan:he,ariaControls:gt,ariaCurrent:null,ariaDescribedBy:gt,ariaDetails:null,ariaDisabled:Lt,ariaDropEffect:gt,ariaErrorMessage:null,ariaExpanded:Lt,ariaFlowTo:gt,ariaGrabbed:Lt,ariaHasPopup:null,ariaHidden:Lt,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:gt,ariaLevel:he,ariaLive:null,ariaModal:Lt,ariaMultiLine:Lt,ariaMultiSelectable:Lt,ariaOrientation:null,ariaOwns:gt,ariaPlaceholder:null,ariaPosInSet:he,ariaPressed:Lt,ariaReadOnly:Lt,ariaRelevant:null,ariaRequired:Lt,ariaRoleDescription:gt,ariaRowCount:he,ariaRowIndex:he,ariaRowSpan:he,ariaSelected:Lt,ariaSetSize:he,ariaSort:null,ariaValueMax:he,ariaValueMin:he,ariaValueNow:he,ariaValueText:null,role:null},transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function eE(t,e){return e in t?t[e]:e}function tE(t,e){return eE(t,e.toLowerCase())}const pz=Ya({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Ua,acceptCharset:gt,accessKey:gt,action:null,allow:null,allowFullScreen:Be,allowPaymentRequest:Be,allowUserMedia:Be,alt:null,as:null,async:Be,autoCapitalize:null,autoComplete:gt,autoFocus:Be,autoPlay:Be,blocking:gt,capture:null,charSet:null,checked:Be,cite:null,className:gt,cols:he,colSpan:null,content:null,contentEditable:Lt,controls:Be,controlsList:gt,coords:he|Ua,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Be,defer:Be,dir:null,dirName:null,disabled:Be,download:bg,draggable:Lt,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Be,formTarget:null,headers:gt,height:he,hidden:bg,high:he,href:null,hrefLang:null,htmlFor:gt,httpEquiv:gt,id:null,imageSizes:null,imageSrcSet:null,inert:Be,inputMode:null,integrity:null,is:null,isMap:Be,itemId:null,itemProp:gt,itemRef:gt,itemScope:Be,itemType:gt,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Be,low:he,manifest:null,max:null,maxLength:he,media:null,method:null,min:null,minLength:he,multiple:Be,muted:Be,name:null,nonce:null,noModule:Be,noValidate:Be,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Be,optimum:he,pattern:null,ping:gt,placeholder:null,playsInline:Be,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Be,referrerPolicy:null,rel:gt,required:Be,reversed:Be,rows:he,rowSpan:he,sandbox:gt,scope:null,scoped:Be,seamless:Be,selected:Be,shadowRootClonable:Be,shadowRootDelegatesFocus:Be,shadowRootMode:null,shape:null,size:he,sizes:null,slot:null,span:he,spellCheck:Lt,src:null,srcDoc:null,srcLang:null,srcSet:null,start:he,step:null,style:null,tabIndex:he,target:null,title:null,translate:null,type:null,typeMustMatch:Be,useMap:null,value:Lt,width:he,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:gt,axis:null,background:null,bgColor:null,border:he,borderColor:null,bottomMargin:he,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Be,declare:Be,event:null,face:null,frame:null,frameBorder:null,hSpace:he,leftMargin:he,link:null,longDesc:null,lowSrc:null,marginHeight:he,marginWidth:he,noResize:Be,noHref:Be,noShade:Be,noWrap:Be,object:null,profile:null,prompt:null,rev:null,rightMargin:he,rules:null,scheme:null,scrolling:Lt,standby:null,summary:null,text:null,topMargin:he,valueType:null,version:null,vAlign:null,vLink:null,vSpace:he,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Be,disableRemotePlayback:Be,prefix:null,property:null,results:he,security:null,unselectable:null},space:"html",transform:tE}),mz=Ya({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Jn,accentHeight:he,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:he,amplitude:he,arabicForm:null,ascent:he,attributeName:null,attributeType:null,azimuth:he,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:he,by:null,calcMode:null,capHeight:he,className:gt,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:he,diffuseConstant:he,direction:null,display:null,dur:null,divisor:he,dominantBaseline:null,download:Be,dx:null,dy:null,edgeMode:null,editable:null,elevation:he,enableBackground:null,end:null,event:null,exponent:he,externalResourcesRequired:null,fill:null,fillOpacity:he,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Ua,g2:Ua,glyphName:Ua,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:he,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:he,horizOriginX:he,horizOriginY:he,id:null,ideographic:he,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:he,k:he,k1:he,k2:he,k3:he,k4:he,kernelMatrix:Jn,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:he,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:he,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:he,overlineThickness:he,paintOrder:null,panose1:null,path:null,pathLength:he,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:gt,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:he,pointsAtY:he,pointsAtZ:he,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Jn,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Jn,rev:Jn,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Jn,requiredFeatures:Jn,requiredFonts:Jn,requiredFormats:Jn,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:he,specularExponent:he,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:he,strikethroughThickness:he,string:null,stroke:null,strokeDashArray:Jn,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:he,strokeOpacity:he,strokeWidth:null,style:null,surfaceScale:he,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Jn,tabIndex:he,tableValues:null,target:null,targetX:he,targetY:he,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Jn,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:he,underlineThickness:he,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:he,values:null,vAlphabetic:he,vMathematical:he,vectorEffect:null,vHanging:he,vIdeographic:he,version:null,vertAdvY:he,vertOriginX:he,vertOriginY:he,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:he,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:eE}),nE=Ya({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()}}),rE=Ya({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:tE}),sE=Ya({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()}}),gz={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},yz=/[A-Z]/g,Kw=/-[a-z]/g,_z=/^data[-\w.:]+$/i;function iE(t,e){const n=_g(e);let r=e,s=qn;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&_z.test(e)){if(e.charAt(4)==="-"){const a=e.slice(5).replace(Kw,vz);r="data"+a.charAt(0).toUpperCase()+a.slice(1)}else{const a=e.slice(4);if(!Kw.test(a)){let l=a.replace(yz,bz);l.charAt(0)!=="-"&&(l="-"+l),e="data"+l}}s=Cy}return new s(r,e)}function bz(t){return"-"+t.toLowerCase()}function vz(t){return t.charAt(1).toUpperCase()}const aE=Xk([Wk,pz,nE,rE,sE],"html"),Wl=Xk([Wk,mz,nE,rE,sE],"svg"),Zw={}.hasOwnProperty;function xz(t,e){const n=e||{};function r(s,...a){let l=r.invalid;const u=r.handlers;if(s&&Zw.call(s,t)){const f=String(s[t]);l=Zw.call(u,f)?u[f]:r.unknown}if(l)return l.call(this,s,...a)}return r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}const wz=/["&'<>`]/g,Sz=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,kz=/[\x01-\t\v\f\x0E-\x1F\x7F\x81\x8D\x8F\x90\x9D\xA0-\uFFFF]/g,Ez=/[|\\{}()[\]^$+*?.]/g,Qw=new WeakMap;function Cz(t,e){if(t=t.replace(e.subset?Tz(e.subset):wz,r),e.subset||e.escapeOnly)return t;return t.replace(Sz,n).replace(kz,r);function n(s,a,l){return e.format((s.charCodeAt(0)-55296)*1024+s.charCodeAt(1)-56320+65536,l.charCodeAt(a+2),e)}function r(s,a,l){return e.format(s.charCodeAt(0),l.charCodeAt(a+1),e)}}function Tz(t){let e=Qw.get(t);return e||(e=Az(t),Qw.set(t,e)),e}function Az(t){const e=[];let n=-1;for(;++n<t.length;)e.push(t[n].replace(Ez,"\\$&"));return new RegExp("(?:"+e.join("|")+")","g")}const Rz=/[\dA-Fa-f]/;function Oz(t,e,n){const r="&#x"+t.toString(16).toUpperCase();return n&&e&&!Rz.test(String.fromCharCode(e))?r:r+";"}const Iz=/\d/;function Nz(t,e,n){const r="&#"+String(t);return n&&e&&!Iz.test(String.fromCharCode(e))?r:r+";"}const Mz=["AElig","AMP","Aacute","Acirc","Agrave","Aring","Atilde","Auml","COPY","Ccedil","ETH","Eacute","Ecirc","Egrave","Euml","GT","Iacute","Icirc","Igrave","Iuml","LT","Ntilde","Oacute","Ocirc","Ograve","Oslash","Otilde","Ouml","QUOT","REG","THORN","Uacute","Ucirc","Ugrave","Uuml","Yacute","aacute","acirc","acute","aelig","agrave","amp","aring","atilde","auml","brvbar","ccedil","cedil","cent","copy","curren","deg","divide","eacute","ecirc","egrave","eth","euml","frac12","frac14","frac34","gt","iacute","icirc","iexcl","igrave","iquest","iuml","laquo","lt","macr","micro","middot","nbsp","not","ntilde","oacute","ocirc","ograve","ordf","ordm","oslash","otilde","ouml","para","plusmn","pound","quot","raquo","reg","sect","shy","sup1","sup2","sup3","szlig","thorn","times","uacute","ucirc","ugrave","uml","uuml","yacute","yen","yuml"],lm={nbsp:"",iexcl:"",cent:"",pound:"",curren:"",yen:"",brvbar:"",sect:"",uml:"",copy:"",ordf:"",laquo:"",not:"",shy:"",reg:"",macr:"",deg:"",plusmn:"",sup2:"",sup3:"",acute:"",micro:"",para:"",middot:"",cedil:"",sup1:"",ordm:"",raquo:"",frac14:"",frac12:"",frac34:"",iquest:"",Agrave:"",Aacute:"",Acirc:"",Atilde:"",Auml:"",Aring:"",AElig:"",Ccedil:"",Egrave:"",Eacute:"",Ecirc:"",Euml:"",Igrave:"",Iacute:"",Icirc:"",Iuml:"",ETH:"",Ntilde:"",Ograve:"",Oacute:"",Ocirc:"",Otilde:"",Ouml:"",times:"",Oslash:"",Ugrave:"",Uacute:"",Ucirc:"",Uuml:"",Yacute:"",THORN:"",szlig:"",agrave:"",aacute:"",acirc:"",atilde:"",auml:"",aring:"",aelig:"",ccedil:"",egrave:"",eacute:"",ecirc:"",euml:"",igrave:"",iacute:"",icirc:"",iuml:"",eth:"",ntilde:"",ograve:"",oacute:"",ocirc:"",otilde:"",ouml:"",divide:"",oslash:"",ugrave:"",uacute:"",ucirc:"",uuml:"",yacute:"",thorn:"",yuml:"",fnof:"",Alpha:"",Beta:"",Gamma:"",Delta:"",Epsilon:"",Zeta:"",Eta:"",Theta:"",Iota:"",Kappa:"",Lambda:"",Mu:"",Nu:"",Xi:"",Omicron:"",Pi:"",Rho:"",Sigma:"",Tau:"",Upsilon:"",Phi:"",Chi:"",Psi:"",Omega:"",alpha:"",beta:"",gamma:"",delta:"",epsilon:"",zeta:"",eta:"",theta:"",iota:"",kappa:"",lambda:"",mu:"",nu:"",xi:"",omicron:"",pi:"",rho:"",sigmaf:"",sigma:"",tau:"",upsilon:"",phi:"",chi:"",psi:"",omega:"",thetasym:"",upsih:"",piv:"",bull:"",hellip:"",prime:"",Prime:"",oline:"",frasl:"",weierp:"",image:"",real:"",trade:"",alefsym:"",larr:"",uarr:"",rarr:"",darr:"",harr:"",crarr:"",lArr:"",uArr:"",rArr:"",dArr:"",hArr:"",forall:"",part:"",exist:"",empty:"",nabla:"",isin:"",notin:"",ni:"",prod:"",sum:"",minus:"",lowast:"",radic:"",prop:"",infin:"",ang:"",and:"",or:"",cap:"",cup:"",int:"",there4:"",sim:"",cong:"",asymp:"",ne:"",equiv:"",le:"",ge:"",sub:"",sup:"",nsub:"",sube:"",supe:"",oplus:"",otimes:"",perp:"",sdot:"",lceil:"",rceil:"",lfloor:"",rfloor:"",lang:"",rang:"",loz:"",spades:"",clubs:"",hearts:"",diams:"",quot:'"',amp:"&",lt:"<",gt:">",OElig:"",oelig:"",Scaron:"",scaron:"",Yuml:"",circ:"",tilde:"",ensp:"",emsp:"",thinsp:"",zwnj:"",zwj:"",lrm:"",rlm:"",ndash:"",mdash:"",lsquo:"",rsquo:"",sbquo:"",ldquo:"",rdquo:"",bdquo:"",dagger:"",Dagger:"",permil:"",lsaquo:"",rsaquo:"",euro:""},Dz=["cent","copy","divide","gt","lt","not","para","times"],oE={}.hasOwnProperty,xg={};let Cu;for(Cu in lm)oE.call(lm,Cu)&&(xg[lm[Cu]]=Cu);const Lz=/[^\dA-Za-z]/;function zz(t,e,n,r){const s=String.fromCharCode(t);if(oE.call(xg,s)){const a=xg[s],l="&"+a;return n&&Mz.includes(a)&&!Dz.includes(a)&&(!r||e&&e!==61&&Lz.test(String.fromCharCode(e)))?l:l+";"}return""}function jz(t,e,n){let r=Oz(t,e,n.omitOptionalSemicolons),s;if((n.useNamedReferences||n.useShortestReferences)&&(s=zz(t,e,n.omitOptionalSemicolons,n.attribute)),(n.useShortestReferences||!s)&&n.useShortestReferences){const a=Nz(t,e,n.omitOptionalSemicolons);a.length<r.length&&(r=a)}return s&&(!n.useShortestReferences||s.length<r.length)?s:r}function $a(t,e){return Cz(t,Object.assign({format:jz},e))}const Pz=/^>|^->|<!--|-->|--!>|<!-$/g,Bz=[">"],Uz=["<",">"];function $z(t,e,n,r){return r.settings.bogusComments?"<?"+$a(t.value,Object.assign({},r.settings.characterReferences,{subset:Bz}))+">":"<!--"+t.value.replace(Pz,s)+"-->";function s(a){return $a(a,Object.assign({},r.settings.characterReferences,{subset:Uz}))}}function qz(t,e,n,r){return"<!"+(r.settings.upperDoctype?"DOCTYPE":"doctype")+(r.settings.tightDoctype?"":" ")+"html>"}function Tf(t,e){const n=String(t);if(typeof e!="string")throw new TypeError("Expected character");let r=0,s=n.indexOf(e);for(;s!==-1;)r++,s=n.indexOf(e,s+e.length);return r}function lE(t,e){const n=e||{};return(t[t.length-1]===""?[...t,""]:t).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}function cE(t){return t.join(" ").trim()}const Fz=/[ \t\n\f\r]/g;function rh(t){return typeof t=="object"?t.type==="text"?Jw(t.value):!1:Jw(t)}function Jw(t){return t.replace(Fz,"")===""}const Gt=fE(1),uE=fE(-1),Vz=[];function fE(t){return e;function e(n,r,s){const a=n?n.children:Vz;let l=(r||0)+t,u=a[l];if(!s)for(;u&&rh(u);)l+=t,u=a[l];return u}}const Hz={}.hasOwnProperty;function hE(t){return e;function e(n,r,s){return Hz.call(t,n.tagName)&&t[n.tagName](n,r,s)}}const Ty=hE({body:Kz,caption:cm,colgroup:cm,dd:Yz,dt:Jz,head:cm,html:Gz,li:Qz,optgroup:Xz,option:Wz,p:Zz,rp:Yw,rt:Yw,tbody:tj,td:Xw,tfoot:nj,th:Xw,thead:ej,tr:rj});function cm(t,e,n){const r=Gt(n,e,!0);return!r||r.type!=="comment"&&!(r.type==="text"&&rh(r.value.charAt(0)))}function Gz(t,e,n){const r=Gt(n,e);return!r||r.type!=="comment"}function Kz(t,e,n){const r=Gt(n,e);return!r||r.type!=="comment"}function Zz(t,e,n){const r=Gt(n,e);return r?r.type==="element"&&(r.tagName==="address"||r.tagName==="article"||r.tagName==="aside"||r.tagName==="blockquote"||r.tagName==="details"||r.tagName==="div"||r.tagName==="dl"||r.tagName==="fieldset"||r.tagName==="figcaption"||r.tagName==="figure"||r.tagName==="footer"||r.tagName==="form"||r.tagName==="h1"||r.tagName==="h2"||r.tagName==="h3"||r.tagName==="h4"||r.tagName==="h5"||r.tagName==="h6"||r.tagName==="header"||r.tagName==="hgroup"||r.tagName==="hr"||r.tagName==="main"||r.tagName==="menu"||r.tagName==="nav"||r.tagName==="ol"||r.tagName==="p"||r.tagName==="pre"||r.tagName==="section"||r.tagName==="table"||r.tagName==="ul"):!n||!(n.type==="element"&&(n.tagName==="a"||n.tagName==="audio"||n.tagName==="del"||n.tagName==="ins"||n.tagName==="map"||n.tagName==="noscript"||n.tagName==="video"))}function Qz(t,e,n){const r=Gt(n,e);return!r||r.type==="element"&&r.tagName==="li"}function Jz(t,e,n){const r=Gt(n,e);return!!(r&&r.type==="element"&&(r.tagName==="dt"||r.tagName==="dd"))}function Yz(t,e,n){const r=Gt(n,e);return!r||r.type==="element"&&(r.tagName==="dt"||r.tagName==="dd")}function Yw(t,e,n){const r=Gt(n,e);return!r||r.type==="element"&&(r.tagName==="rp"||r.tagName==="rt")}function Xz(t,e,n){const r=Gt(n,e);return!r||r.type==="element"&&r.tagName==="optgroup"}function Wz(t,e,n){const r=Gt(n,e);return!r||r.type==="element"&&(r.tagName==="option"||r.tagName==="optgroup")}function ej(t,e,n){const r=Gt(n,e);return!!(r&&r.type==="element"&&(r.tagName==="tbody"||r.tagName==="tfoot"))}function tj(t,e,n){const r=Gt(n,e);return!r||r.type==="element"&&(r.tagName==="tbody"||r.tagName==="tfoot")}function nj(t,e,n){return!Gt(n,e)}function rj(t,e,n){const r=Gt(n,e);return!r||r.type==="element"&&r.tagName==="tr"}function Xw(t,e,n){const r=Gt(n,e);return!r||r.type==="element"&&(r.tagName==="td"||r.tagName==="th")}const sj=hE({body:oj,colgroup:lj,head:aj,html:ij,tbody:cj});function ij(t){const e=Gt(t,-1);return!e||e.type!=="comment"}function aj(t){const e=new Set;for(const r of t.children)if(r.type==="element"&&(r.tagName==="base"||r.tagName==="title")){if(e.has(r.tagName))return!1;e.add(r.tagName)}const n=t.children[0];return!n||n.type==="element"}function oj(t){const e=Gt(t,-1,!0);return!e||e.type!=="comment"&&!(e.type==="text"&&rh(e.value.charAt(0)))&&!(e.type==="element"&&(e.tagName==="meta"||e.tagName==="link"||e.tagName==="script"||e.tagName==="style"||e.tagName==="template"))}function lj(t,e,n){const r=uE(n,e),s=Gt(t,-1,!0);return n&&r&&r.type==="element"&&r.tagName==="colgroup"&&Ty(r,n.children.indexOf(r),n)?!1:!!(s&&s.type==="element"&&s.tagName==="col")}function cj(t,e,n){const r=uE(n,e),s=Gt(t,-1);return n&&r&&r.type==="element"&&(r.tagName==="thead"||r.tagName==="tbody")&&Ty(r,n.children.indexOf(r),n)?!1:!!(s&&s.type==="element"&&s.tagName==="tr")}const Tu={name:[[`	
\f\r &/=>`.split(""),`	
\f\r "&'/=>\``.split("")],[`\0	
\f\r "&'/<=>`.split(""),`\0	
\f\r "&'/<=>\``.split("")]],unquoted:[[`	
\f\r &>`.split(""),`\0	
\f\r "&'<=>\``.split("")],[`\0	
\f\r "&'<=>\``.split(""),`\0	
\f\r "&'<=>\``.split("")]],single:[["&'".split(""),"\"&'`".split("")],["\0&'".split(""),"\0\"&'`".split("")]],double:[['"&'.split(""),"\"&'`".split("")],['\0"&'.split(""),"\0\"&'`".split("")]]};function uj(t,e,n,r){const s=r.schema,a=s.space==="svg"?!1:r.settings.omitOptionalTags;let l=s.space==="svg"?r.settings.closeEmptyElements:r.settings.voids.includes(t.tagName.toLowerCase());const u=[];let f;s.space==="html"&&t.tagName==="svg"&&(r.schema=Wl);const h=fj(r,t.properties),m=r.all(s.space==="html"&&t.tagName==="template"?t.content:t);return r.schema=s,m&&(l=!1),(h||!a||!sj(t,e,n))&&(u.push("<",t.tagName,h?" "+h:""),l&&(s.space==="svg"||r.settings.closeSelfClosing)&&(f=h.charAt(h.length-1),(!r.settings.tightSelfClosing||f==="/"||f&&f!=='"'&&f!=="'")&&u.push(" "),u.push("/")),u.push(">")),u.push(m),!l&&(!a||!Ty(t,e,n))&&u.push("</"+t.tagName+">"),u.join("")}function fj(t,e){const n=[];let r=-1,s;if(e){for(s in e)if(e[s]!==null&&e[s]!==void 0){const a=hj(t,s,e[s]);a&&n.push(a)}}for(;++r<n.length;){const a=t.settings.tightAttributes?n[r].charAt(n[r].length-1):void 0;r!==n.length-1&&a!=='"'&&a!=="'"&&(n[r]+=" ")}return n.join("")}function hj(t,e,n){const r=iE(t.schema,e),s=t.settings.allowParseErrors&&t.schema.space==="html"?0:1,a=t.settings.allowDangerousCharacters?0:1;let l=t.quote,u;if(r.overloadedBoolean&&(n===r.attribute||n==="")?n=!0:(r.boolean||r.overloadedBoolean)&&(typeof n!="string"||n===r.attribute||n==="")&&(n=!!n),n==null||n===!1||typeof n=="number"&&Number.isNaN(n))return"";const f=$a(r.attribute,Object.assign({},t.settings.characterReferences,{subset:Tu.name[s][a]}));return n===!0||(n=Array.isArray(n)?(r.commaSeparated?lE:cE)(n,{padLeft:!t.settings.tightCommaSeparatedLists}):String(n),t.settings.collapseEmptyAttributes&&!n)?f:(t.settings.preferUnquoted&&(u=$a(n,Object.assign({},t.settings.characterReferences,{attribute:!0,subset:Tu.unquoted[s][a]}))),u!==n&&(t.settings.quoteSmart&&Tf(n,l)>Tf(n,t.alternative)&&(l=t.alternative),u=l+$a(n,Object.assign({},t.settings.characterReferences,{subset:(l==="'"?Tu.single:Tu.double)[s][a],attribute:!0}))+l),f+(u&&"="+u))}const dj=["<","&"];function dE(t,e,n,r){return n&&n.type==="element"&&(n.tagName==="script"||n.tagName==="style")?t.value:$a(t.value,Object.assign({},r.settings.characterReferences,{subset:dj}))}function pj(t,e,n,r){return r.settings.allowDangerousHtml?t.value:dE(t,e,n,r)}function mj(t,e,n,r){return r.all(t)}const gj=xz("type",{invalid:yj,unknown:_j,handlers:{comment:$z,doctype:qz,element:uj,raw:pj,root:mj,text:dE}});function yj(t){throw new Error("Expected node, not `"+t+"`")}function _j(t){const e=t;throw new Error("Cannot compile unknown node `"+e.type+"`")}const bj={},vj={},xj=[];function wj(t,e){const n=e||bj,r=n.quote||'"',s=r==='"'?"'":'"';if(r!=='"'&&r!=="'")throw new Error("Invalid quote `"+r+"`, expected `'` or `\"`");return{one:Sj,all:kj,settings:{omitOptionalTags:n.omitOptionalTags||!1,allowParseErrors:n.allowParseErrors||!1,allowDangerousCharacters:n.allowDangerousCharacters||!1,quoteSmart:n.quoteSmart||!1,preferUnquoted:n.preferUnquoted||!1,tightAttributes:n.tightAttributes||!1,upperDoctype:n.upperDoctype||!1,tightDoctype:n.tightDoctype||!1,bogusComments:n.bogusComments||!1,tightCommaSeparatedLists:n.tightCommaSeparatedLists||!1,tightSelfClosing:n.tightSelfClosing||!1,collapseEmptyAttributes:n.collapseEmptyAttributes||!1,allowDangerousHtml:n.allowDangerousHtml||!1,voids:n.voids||hz,characterReferences:n.characterReferences||vj,closeSelfClosing:n.closeSelfClosing||!1,closeEmptyElements:n.closeEmptyElements||!1},schema:n.space==="svg"?Wl:aE,quote:r,alternative:s}.one(Array.isArray(t)?{type:"root",children:t}:t,void 0,void 0)}function Sj(t,e,n){return gj(t,e,n,this)}function kj(t){const e=[],n=t&&t.children||xj;let r=-1;for(;++r<n.length;)e[r]=this.one(n[r],r,t);return e.join("")}function Af(t,e){const n=typeof t=="string"?{}:{...t.colorReplacements},r=typeof t=="string"?t:t.name;for(const[s,a]of Object.entries(e?.colorReplacements||{}))typeof a=="string"?n[s]=a:s===r&&Object.assign(n,a);return n}function Js(t,e){return t&&(e?.[t?.toLowerCase()]||t)}function Ej(t){return Array.isArray(t)?t:[t]}async function pE(t){return Promise.resolve(typeof t=="function"?t():t).then(e=>e.default||e)}function Ay(t){return!t||["plaintext","txt","text","plain"].includes(t)}function mE(t){return t==="ansi"||Ay(t)}function Ry(t){return t==="none"}function gE(t){return Ry(t)}function yE(t,e){if(!e)return t;t.properties||={},t.properties.class||=[],typeof t.properties.class=="string"&&(t.properties.class=t.properties.class.split(/\s+/g)),Array.isArray(t.properties.class)||(t.properties.class=[]);const n=Array.isArray(e)?e:e.split(/\s+/g);for(const r of n)r&&!t.properties.class.includes(r)&&t.properties.class.push(r);return t}function sh(t,e=!1){if(t.length===0)return[["",0]];const n=t.split(/(\r?\n)/g);let r=0;const s=[];for(let a=0;a<n.length;a+=2){const l=e?n[a]+(n[a+1]||""):n[a];s.push([l,r]),r+=n[a].length,r+=n[a+1]?.length||0}return s}function Cj(t){const e=sh(t,!0).map(([s])=>s);function n(s){if(s===t.length)return{line:e.length-1,character:e[e.length-1].length};let a=s,l=0;for(const u of e){if(a<u.length)break;a-=u.length,l++}return{line:l,character:a}}function r(s,a){let l=0;for(let u=0;u<s;u++)l+=e[u].length;return l+=a,l}return{lines:e,indexToPos:n,posToIndex:r}}function Tj(t,e,n){const r=new Set;for(const a of t.matchAll(/:?lang=["']([^"']+)["']/g)){const l=a[1].toLowerCase().trim();l&&r.add(l)}for(const a of t.matchAll(/(?:```|~~~)([\w-]+)/g)){const l=a[1].toLowerCase().trim();l&&r.add(l)}for(const a of t.matchAll(/\\begin\{([\w-]+)\}/g)){const l=a[1].toLowerCase().trim();l&&r.add(l)}for(const a of t.matchAll(/<script\s+(?:type|lang)=["']([^"']+)["']/gi)){const l=a[1].toLowerCase().trim(),u=l.includes("/")?l.split("/").pop():l;u&&r.add(u)}if(!n)return Array.from(r);const s=n.getBundledLanguages();return Array.from(r).filter(a=>a&&s[a])}const Oy="light-dark()",Aj=["color","background-color"];function Rj(t,e){let n=0;const r=[];for(const s of e)s>n&&r.push({...t,content:t.content.slice(n,s),offset:t.offset+n}),n=s;return n<t.content.length&&r.push({...t,content:t.content.slice(n),offset:t.offset+n}),r}function Oj(t,e){const n=Array.from(e instanceof Set?e:new Set(e)).sort((r,s)=>r-s);return n.length?t.map(r=>r.flatMap(s=>{const a=n.filter(l=>s.offset<l&&l<s.offset+s.content.length).map(l=>l-s.offset).sort((l,u)=>l-u);return a.length?Rj(s,a):s})):t}function Ij(t,e,n,r,s="css-vars"){const a={content:t.content,explanation:t.explanation,offset:t.offset},l=e.map(m=>Rf(t.variants[m])),u=new Set(l.flatMap(m=>Object.keys(m))),f={},h=(m,p)=>{const _=p==="color"?"":p==="background-color"?"-bg":`-${p}`;return n+e[m]+(p==="color"?"":_)};return l.forEach((m,p)=>{for(const _ of u){const g=m[_]||"inherit";if(p===0&&r&&Aj.includes(_))if(r===Oy&&l.length>1){const v=e.findIndex(T=>T==="light"),x=e.findIndex(T=>T==="dark");if(v===-1||x===-1)throw new zt('When using `defaultColor: "light-dark()"`, you must provide both `light` and `dark` themes');const E=l[v][_]||"inherit",k=l[x][_]||"inherit";f[_]=`light-dark(${E}, ${k})`,s==="css-vars"&&(f[h(p,_)]=g)}else f[_]=g;else s==="css-vars"&&(f[h(p,_)]=g)}}),a.htmlStyle=f,a}function Rf(t){const e={};if(t.color&&(e.color=t.color),t.bgColor&&(e["background-color"]=t.bgColor),t.fontStyle){t.fontStyle&bn.Italic&&(e["font-style"]="italic"),t.fontStyle&bn.Bold&&(e["font-weight"]="bold");const n=[];t.fontStyle&bn.Underline&&n.push("underline"),t.fontStyle&bn.Strikethrough&&n.push("line-through"),n.length&&(e["text-decoration"]=n.join(" "))}return e}function wg(t){return typeof t=="string"?t:Object.entries(t).map(([e,n])=>`${e}:${n}`).join(";")}const _E=new WeakMap;function ih(t,e){_E.set(t,e)}function Ul(t){return _E.get(t)}class Xa{_stacks={};lang;get themes(){return Object.keys(this._stacks)}get theme(){return this.themes[0]}get _stack(){return this._stacks[this.theme]}static initial(e,n){return new Xa(Object.fromEntries(Ej(n).map(r=>[r,yg])),e)}constructor(...e){if(e.length===2){const[n,r]=e;this.lang=r,this._stacks=n}else{const[n,r,s]=e;this.lang=r,this._stacks={[s]:n}}}getInternalStack(e=this.theme){return this._stacks[e]}getScopes(e=this.theme){return Nj(this._stacks[e])}toJSON(){return{lang:this.lang,theme:this.theme,themes:this.themes,scopes:this.getScopes()}}}function Nj(t){const e=[],n=new Set;function r(s){if(n.has(s))return;n.add(s);const a=s?.nameScopesList?.scopeName;a&&e.push(a),s.parent&&r(s.parent)}return r(t),e}function Mj(t,e){if(!(t instanceof Xa))throw new zt("Invalid grammar state");return t.getInternalStack(e)}function Dj(){const t=new WeakMap;function e(n){if(!t.has(n.meta)){let r=function(l){if(typeof l=="number"){if(l<0||l>n.source.length)throw new zt(`Invalid decoration offset: ${l}. Code length: ${n.source.length}`);return{...s.indexToPos(l),offset:l}}else{const u=s.lines[l.line];if(u===void 0)throw new zt(`Invalid decoration position ${JSON.stringify(l)}. Lines length: ${s.lines.length}`);let f=l.character;if(f<0&&(f=u.length+f),f<0||f>u.length)throw new zt(`Invalid decoration position ${JSON.stringify(l)}. Line ${l.line} length: ${u.length}`);return{...l,character:f,offset:s.posToIndex(l.line,f)}}};const s=Cj(n.source),a=(n.options.decorations||[]).map(l=>({...l,start:r(l.start),end:r(l.end)}));Lj(a),t.set(n.meta,{decorations:a,converter:s,source:n.source})}return t.get(n.meta)}return{name:"shiki:decorations",tokens(n){if(!this.options.decorations?.length)return;const s=e(this).decorations.flatMap(l=>[l.start.offset,l.end.offset]);return Oj(n,s)},code(n){if(!this.options.decorations?.length)return;const r=e(this),s=Array.from(n.children).filter(m=>m.type==="element"&&m.tagName==="span");if(s.length!==r.converter.lines.length)throw new zt(`Number of lines in code element (${s.length}) does not match the number of lines in the source (${r.converter.lines.length}). Failed to apply decorations.`);function a(m,p,_,g){const v=s[m];let x="",E=-1,k=-1;if(p===0&&(E=0),_===0&&(k=0),_===Number.POSITIVE_INFINITY&&(k=v.children.length),E===-1||k===-1)for(let C=0;C<v.children.length;C++)x+=bE(v.children[C]),E===-1&&x.length===p&&(E=C+1),k===-1&&x.length===_&&(k=C+1);if(E===-1)throw new zt(`Failed to find start index for decoration ${JSON.stringify(g.start)}`);if(k===-1)throw new zt(`Failed to find end index for decoration ${JSON.stringify(g.end)}`);const T=v.children.slice(E,k);if(!g.alwaysWrap&&T.length===v.children.length)u(v,g,"line");else if(!g.alwaysWrap&&T.length===1&&T[0].type==="element")u(T[0],g,"token");else{const C={type:"element",tagName:"span",properties:{},children:T};u(C,g,"wrapper"),v.children.splice(E,T.length,C)}}function l(m,p){s[m]=u(s[m],p,"line")}function u(m,p,_){const g=p.properties||{},v=p.transform||(x=>x);return m.tagName=p.tagName||"span",m.properties={...m.properties,...g,class:m.properties.class},p.properties?.class&&yE(m,p.properties.class),m=v(m,_)||m,m}const f=[],h=r.decorations.sort((m,p)=>p.start.offset-m.start.offset||m.end.offset-p.end.offset);for(const m of h){const{start:p,end:_}=m;if(p.line===_.line)a(p.line,p.character,_.character,m);else if(p.line<_.line){a(p.line,p.character,Number.POSITIVE_INFINITY,m);for(let g=p.line+1;g<_.line;g++)f.unshift(()=>l(g,m));a(_.line,0,_.character,m)}}f.forEach(m=>m())}}}function Lj(t){for(let e=0;e<t.length;e++){const n=t[e];if(n.start.offset>n.end.offset)throw new zt(`Invalid decoration range: ${JSON.stringify(n.start)} - ${JSON.stringify(n.end)}`);for(let r=e+1;r<t.length;r++){const s=t[r],a=n.start.offset<=s.start.offset&&s.start.offset<n.end.offset,l=n.start.offset<s.end.offset&&s.end.offset<=n.end.offset,u=s.start.offset<=n.start.offset&&n.start.offset<s.end.offset,f=s.start.offset<n.end.offset&&n.end.offset<=s.end.offset;if(a||l||u||f){if(a&&l||u&&f||u&&n.start.offset===n.end.offset||l&&s.start.offset===s.end.offset)continue;throw new zt(`Decorations ${JSON.stringify(n.start)} and ${JSON.stringify(s.start)} intersect.`)}}}}function bE(t){return t.type==="text"?t.value:t.type==="element"?t.children.map(bE).join(""):""}const zj=[Dj()];function Of(t){const e=jj(t.transformers||[]);return[...e.pre,...e.normal,...e.post,...zj]}function jj(t){const e=[],n=[],r=[];for(const s of t)switch(s.enforce){case"pre":e.push(s);break;case"post":n.push(s);break;default:r.push(s)}return{pre:e,post:n,normal:r}}var Ti=["black","red","green","yellow","blue","magenta","cyan","white","brightBlack","brightRed","brightGreen","brightYellow","brightBlue","brightMagenta","brightCyan","brightWhite"],um={1:"bold",2:"dim",3:"italic",4:"underline",7:"reverse",8:"hidden",9:"strikethrough"};function Pj(t,e){const n=t.indexOf("\x1B",e);if(n!==-1&&t[n+1]==="["){const r=t.indexOf("m",n);if(r!==-1)return{sequence:t.substring(n+2,r).split(";"),startPosition:n,position:r+1}}return{position:t.length}}function Ww(t){const e=t.shift();if(e==="2"){const n=t.splice(0,3).map(r=>Number.parseInt(r));return n.length!==3||n.some(r=>Number.isNaN(r))?void 0:{type:"rgb",rgb:n}}else if(e==="5"){const n=t.shift();if(n)return{type:"table",index:Number(n)}}}function Bj(t){const e=[];for(;t.length>0;){const n=t.shift();if(!n)continue;const r=Number.parseInt(n);if(!Number.isNaN(r))if(r===0)e.push({type:"resetAll"});else if(r<=9)um[r]&&e.push({type:"setDecoration",value:um[r]});else if(r<=29){const s=um[r-20];s&&(e.push({type:"resetDecoration",value:s}),s==="dim"&&e.push({type:"resetDecoration",value:"bold"}))}else if(r<=37)e.push({type:"setForegroundColor",value:{type:"named",name:Ti[r-30]}});else if(r===38){const s=Ww(t);s&&e.push({type:"setForegroundColor",value:s})}else if(r===39)e.push({type:"resetForegroundColor"});else if(r<=47)e.push({type:"setBackgroundColor",value:{type:"named",name:Ti[r-40]}});else if(r===48){const s=Ww(t);s&&e.push({type:"setBackgroundColor",value:s})}else r===49?e.push({type:"resetBackgroundColor"}):r===53?e.push({type:"setDecoration",value:"overline"}):r===55?e.push({type:"resetDecoration",value:"overline"}):r>=90&&r<=97?e.push({type:"setForegroundColor",value:{type:"named",name:Ti[r-90+8]}}):r>=100&&r<=107&&e.push({type:"setBackgroundColor",value:{type:"named",name:Ti[r-100+8]}})}return e}function Uj(){let t=null,e=null,n=new Set;return{parse(r){const s=[];let a=0;do{const l=Pj(r,a),u=l.sequence?r.substring(a,l.startPosition):r.substring(a);if(u.length>0&&s.push({value:u,foreground:t,background:e,decorations:new Set(n)}),l.sequence){const f=Bj(l.sequence);for(const h of f)h.type==="resetAll"?(t=null,e=null,n.clear()):h.type==="resetForegroundColor"?t=null:h.type==="resetBackgroundColor"?e=null:h.type==="resetDecoration"&&n.delete(h.value);for(const h of f)h.type==="setForegroundColor"?t=h.value:h.type==="setBackgroundColor"?e=h.value:h.type==="setDecoration"&&n.add(h.value)}a=l.position}while(a<r.length);return s}}}var $j={black:"#000000",red:"#bb0000",green:"#00bb00",yellow:"#bbbb00",blue:"#0000bb",magenta:"#ff00ff",cyan:"#00bbbb",white:"#eeeeee",brightBlack:"#555555",brightRed:"#ff5555",brightGreen:"#00ff00",brightYellow:"#ffff55",brightBlue:"#5555ff",brightMagenta:"#ff55ff",brightCyan:"#55ffff",brightWhite:"#ffffff"};function qj(t=$j){function e(u){return t[u]}function n(u){return`#${u.map(f=>Math.max(0,Math.min(f,255)).toString(16).padStart(2,"0")).join("")}`}let r;function s(){if(r)return r;r=[];for(let h=0;h<Ti.length;h++)r.push(e(Ti[h]));let u=[0,95,135,175,215,255];for(let h=0;h<6;h++)for(let m=0;m<6;m++)for(let p=0;p<6;p++)r.push(n([u[h],u[m],u[p]]));let f=8;for(let h=0;h<24;h++,f+=10)r.push(n([f,f,f]));return r}function a(u){return s()[u]}function l(u){switch(u.type){case"named":return e(u.name);case"rgb":return n(u.rgb);case"table":return a(u.index)}}return{value:l}}const Fj={black:"#000000",red:"#cd3131",green:"#0DBC79",yellow:"#E5E510",blue:"#2472C8",magenta:"#BC3FBC",cyan:"#11A8CD",white:"#E5E5E5",brightBlack:"#666666",brightRed:"#F14C4C",brightGreen:"#23D18B",brightYellow:"#F5F543",brightBlue:"#3B8EEA",brightMagenta:"#D670D6",brightCyan:"#29B8DB",brightWhite:"#FFFFFF"};function Vj(t,e,n){const r=Af(t,n),s=sh(e),a=Object.fromEntries(Ti.map(f=>{const h=`terminal.ansi${f[0].toUpperCase()}${f.substring(1)}`,m=t.colors?.[h];return[f,m||Fj[f]]})),l=qj(a),u=Uj();return s.map(f=>u.parse(f[0]).map(h=>{let m,p;h.decorations.has("reverse")?(m=h.background?l.value(h.background):t.bg,p=h.foreground?l.value(h.foreground):t.fg):(m=h.foreground?l.value(h.foreground):t.fg,p=h.background?l.value(h.background):void 0),m=Js(m,r),p=Js(p,r),h.decorations.has("dim")&&(m=Hj(m));let _=bn.None;return h.decorations.has("bold")&&(_|=bn.Bold),h.decorations.has("italic")&&(_|=bn.Italic),h.decorations.has("underline")&&(_|=bn.Underline),h.decorations.has("strikethrough")&&(_|=bn.Strikethrough),{content:h.value,offset:f[1],color:m,bgColor:p,fontStyle:_}}))}function Hj(t){const e=t.match(/#([0-9a-f]{3,8})/i);if(e){const r=e[1];if(r.length===8){const s=Math.round(Number.parseInt(r.slice(6,8),16)/2).toString(16).padStart(2,"0");return`#${r.slice(0,6)}${s}`}else{if(r.length===6)return`#${r}80`;if(r.length===4){const s=r[0],a=r[1],l=r[2],u=r[3],f=Math.round(Number.parseInt(`${u}${u}`,16)/2).toString(16).padStart(2,"0");return`#${s}${s}${a}${a}${l}${l}${f}`}else if(r.length===3){const s=r[0],a=r[1],l=r[2];return`#${s}${s}${a}${a}${l}${l}80`}}}const n=t.match(/var\((--[\w-]+-ansi-[\w-]+)\)/);return n?`var(${n[1]}-dim)`:t}function Iy(t,e,n={}){const{theme:r=t.getLoadedThemes()[0]}=n,s=t.resolveLangAlias(n.lang||"text");if(Ay(s)||Ry(r))return sh(e).map(f=>[{content:f[0],offset:f[1]}]);const{theme:a,colorMap:l}=t.setTheme(r);if(s==="ansi")return Vj(a,e,n);const u=t.getLanguage(n.lang||"text");if(n.grammarState){if(n.grammarState.lang!==u.name)throw new zt(`Grammar state language "${n.grammarState.lang}" does not match highlight language "${u.name}"`);if(!n.grammarState.themes.includes(a.name))throw new zt(`Grammar state themes "${n.grammarState.themes}" do not contain highlight theme "${a.name}"`)}return Kj(e,u,a,l,n)}function Gj(...t){if(t.length===2)return Ul(t[1]);const[e,n,r={}]=t,{lang:s="text",theme:a=e.getLoadedThemes()[0]}=r;if(Ay(s)||Ry(a))throw new zt("Plain language does not have grammar state");if(s==="ansi")throw new zt("ANSI language does not have grammar state");const{theme:l,colorMap:u}=e.setTheme(a),f=e.getLanguage(s);return new Xa(Ny(n,f,l,u,r).stateStack,f.name,l.name)}function Kj(t,e,n,r,s){const a=Ny(t,e,n,r,s),l=new Xa(a.stateStack,e.name,n.name);return ih(a.tokens,l),a.tokens}function Ny(t,e,n,r,s){const a=Af(n,s),{tokenizeMaxLineLength:l=0,tokenizeTimeLimit:u=500}=s,f=sh(t);let h=s.grammarState?Mj(s.grammarState,n.name)??yg:s.grammarContextCode!=null?Ny(s.grammarContextCode,e,n,r,{...s,grammarState:void 0,grammarContextCode:void 0}).stateStack:yg,m=[];const p=[];for(let _=0,g=f.length;_<g;_++){const[v,x]=f[_];if(v===""){m=[],p.push([]);continue}if(l>0&&v.length>=l){m=[],p.push([{content:v,offset:x,color:"",fontStyle:0}]);continue}let E,k,T;s.includeExplanation&&(E=e.tokenizeLine(v,h,u),k=E.tokens,T=0);const C=e.tokenizeLine2(v,h,u),j=C.tokens.length/2;for(let D=0;D<j;D++){const I=C.tokens[2*D],U=D+1<j?C.tokens[2*D+2]:v.length;if(I===U)continue;const V=C.tokens[2*D+1],H=Js(r[Ga.getForeground(V)],a),P=Ga.getFontStyle(V),Q={content:v.substring(I,U),offset:x+I,color:H,fontStyle:P};if(s.includeExplanation){const ne=[];if(s.includeExplanation!=="scopeName")for(const z of n.settings){let M;switch(typeof z.scope){case"string":M=z.scope.split(/,/).map(B=>B.trim());break;case"object":M=z.scope;break;default:continue}ne.push({settings:z,selectors:M.map(B=>B.split(/ /))})}Q.explanation=[];let me=0;for(;I+me<U;){const z=k[T],M=v.substring(z.startIndex,z.endIndex);me+=M.length,Q.explanation.push({content:M,scopes:s.includeExplanation==="scopeName"?Zj(z.scopes):Qj(ne,z.scopes)}),T+=1}}m.push(Q)}p.push(m),m=[],h=C.ruleStack}return{tokens:p,stateStack:h}}function Zj(t){return t.map(e=>({scopeName:e}))}function Qj(t,e){const n=[];for(let r=0,s=e.length;r<s;r++){const a=e[r];n[r]={scopeName:a,themeMatches:Yj(t,a,e.slice(0,r))}}return n}function e1(t,e){return t===e||e.substring(0,t.length)===t&&e[t.length]==="."}function Jj(t,e,n){if(!e1(t[t.length-1],e))return!1;let r=t.length-2,s=n.length-1;for(;r>=0&&s>=0;)e1(t[r],n[s])&&(r-=1),s-=1;return r===-1}function Yj(t,e,n){const r=[];for(const{selectors:s,settings:a}of t)for(const l of s)if(Jj(l,e,n)){r.push(a);break}return r}function vE(t,e,n){const r=Object.entries(n.themes).filter(f=>f[1]).map(f=>({color:f[0],theme:f[1]})),s=r.map(f=>{const h=Iy(t,e,{...n,theme:f.theme}),m=Ul(h),p=typeof f.theme=="string"?f.theme:f.theme.name;return{tokens:h,state:m,theme:p}}),a=Xj(...s.map(f=>f.tokens)),l=a[0].map((f,h)=>f.map((m,p)=>{const _={content:m.content,variants:{},offset:m.offset};return"includeExplanation"in n&&n.includeExplanation&&(_.explanation=m.explanation),a.forEach((g,v)=>{const{content:x,explanation:E,offset:k,...T}=g[h][p];_.variants[r[v].color]=T}),_})),u=s[0].state?new Xa(Object.fromEntries(s.map(f=>[f.theme,f.state?.getInternalStack(f.theme)])),s[0].state.lang):void 0;return u&&ih(l,u),l}function Xj(...t){const e=t.map(()=>[]),n=t.length;for(let r=0;r<t[0].length;r++){const s=t.map(f=>f[r]),a=e.map(()=>[]);e.forEach((f,h)=>f.push(a[h]));const l=s.map(()=>0),u=s.map(f=>f[0]);for(;u.every(f=>f);){const f=Math.min(...u.map(h=>h.content.length));for(let h=0;h<n;h++){const m=u[h];m.content.length===f?(a[h].push(m),l[h]+=1,u[h]=s[h][l[h]]):(a[h].push({...m,content:m.content.slice(0,f)}),u[h]={...m,content:m.content.slice(f),offset:m.offset+f})}}}return e}function If(t,e,n){let r,s,a,l,u,f;if("themes"in n){const{defaultColor:h="light",cssVariablePrefix:m="--shiki-",colorsRendering:p="css-vars"}=n,_=Object.entries(n.themes).filter(k=>k[1]).map(k=>({color:k[0],theme:k[1]})).sort((k,T)=>k.color===h?-1:T.color===h?1:0);if(_.length===0)throw new zt("`themes` option must not be empty");const g=vE(t,e,n);if(f=Ul(g),h&&Oy!==h&&!_.find(k=>k.color===h))throw new zt(`\`themes\` option must contain the defaultColor key \`${h}\``);const v=_.map(k=>t.getTheme(k.theme)),x=_.map(k=>k.color);a=g.map(k=>k.map(T=>Ij(T,x,m,h,p))),f&&ih(a,f);const E=_.map(k=>Af(k.theme,n));s=t1(_,v,E,m,h,"fg",p),r=t1(_,v,E,m,h,"bg",p),l=`shiki-themes ${v.map(k=>k.name).join(" ")}`,u=h?void 0:[s,r].join(";")}else if("theme"in n){const h=Af(n.theme,n);a=Iy(t,e,n);const m=t.getTheme(n.theme);r=Js(m.bg,h),s=Js(m.fg,h),l=m.name,f=Ul(a)}else throw new zt("Invalid options, either `theme` or `themes` must be provided");return{tokens:a,fg:s,bg:r,themeName:l,rootStyle:u,grammarState:f}}function t1(t,e,n,r,s,a,l){return t.map((u,f)=>{const h=Js(e[f][a],n[f])||"inherit",m=`${r+u.color}${a==="bg"?"-bg":""}:${h}`;if(f===0&&s){if(s===Oy&&t.length>1){const p=t.findIndex(x=>x.color==="light"),_=t.findIndex(x=>x.color==="dark");if(p===-1||_===-1)throw new zt('When using `defaultColor: "light-dark()"`, you must provide both `light` and `dark` themes');const g=Js(e[p][a],n[p])||"inherit",v=Js(e[_][a],n[_])||"inherit";return`light-dark(${g}, ${v});${m}`}return h}return l==="css-vars"?m:null}).filter(u=>!!u).join(";")}function Nf(t,e,n,r={meta:{},options:n,codeToHast:(s,a)=>Nf(t,s,a),codeToTokens:(s,a)=>If(t,s,a)}){let s=e;for(const v of Of(n))s=v.preprocess?.call(r,s,n)||s;let{tokens:a,fg:l,bg:u,themeName:f,rootStyle:h,grammarState:m}=If(t,s,n);const{mergeWhitespaces:p=!0,mergeSameStyleTokens:_=!1}=n;p===!0?a=e5(a):p==="never"&&(a=t5(a)),_&&(a=n5(a));const g={...r,get source(){return s}};for(const v of Of(n))a=v.tokens?.call(g,a)||a;return Wj(a,{...n,fg:l,bg:u,themeName:f,rootStyle:n.rootStyle===!1?!1:n.rootStyle??h},g,m)}function Wj(t,e,n,r=Ul(t)){const s=Of(e),a=[],l={type:"root",children:[]},{structure:u="classic",tabindex:f="0"}=e,h={class:`shiki ${e.themeName||""}`};e.rootStyle!==!1&&(e.rootStyle!=null?h.style=e.rootStyle:h.style=`background-color:${e.bg};color:${e.fg}`),f!==!1&&f!=null&&(h.tabindex=f.toString());for(const[x,E]of Object.entries(e.meta||{}))x.startsWith("_")||(h[x]=E);let m={type:"element",tagName:"pre",properties:h,children:[]},p={type:"element",tagName:"code",properties:{},children:a};const _=[],g={...n,structure:u,addClassToHast:yE,get source(){return n.source},get tokens(){return t},get options(){return e},get root(){return l},get pre(){return m},get code(){return p},get lines(){return _}};if(t.forEach((x,E)=>{E&&(u==="inline"?l.children.push({type:"element",tagName:"br",properties:{},children:[]}):u==="classic"&&a.push({type:"text",value:`
`}));let k={type:"element",tagName:"span",properties:{class:"line"},children:[]},T=0;for(const C of x){let j={type:"element",tagName:"span",properties:{...C.htmlAttrs},children:[{type:"text",value:C.content}]};const D=wg(C.htmlStyle||Rf(C));D&&(j.properties.style=D);for(const I of s)j=I?.span?.call(g,j,E+1,T,k,C)||j;u==="inline"?l.children.push(j):u==="classic"&&k.children.push(j),T+=C.content.length}if(u==="classic"){for(const C of s)k=C?.line?.call(g,k,E+1)||k;_.push(k),a.push(k)}else u==="inline"&&_.push(k)}),u==="classic"){for(const x of s)p=x?.code?.call(g,p)||p;m.children.push(p);for(const x of s)m=x?.pre?.call(g,m)||m;l.children.push(m)}else if(u==="inline"){const x=[];let E={type:"element",tagName:"span",properties:{class:"line"},children:[]};for(const C of l.children)C.type==="element"&&C.tagName==="br"?(x.push(E),E={type:"element",tagName:"span",properties:{class:"line"},children:[]}):(C.type==="element"||C.type==="text")&&E.children.push(C);x.push(E);let T={type:"element",tagName:"code",properties:{},children:x};for(const C of s)T=C?.code?.call(g,T)||T;l.children=[];for(let C=0;C<T.children.length;C++){C>0&&l.children.push({type:"element",tagName:"br",properties:{},children:[]});const j=T.children[C];j.type==="element"&&l.children.push(...j.children)}}let v=l;for(const x of s)v=x?.root?.call(g,v)||v;return r&&ih(v,r),v}function e5(t){return t.map(e=>{const n=[];let r="",s;return e.forEach((a,l)=>{const f=!(a.fontStyle&&(a.fontStyle&bn.Underline||a.fontStyle&bn.Strikethrough));f&&a.content.match(/^\s+$/)&&e[l+1]?(s===void 0&&(s=a.offset),r+=a.content):r?(f?n.push({...a,offset:s,content:r+a.content}):n.push({content:r,offset:s},a),s=void 0,r=""):n.push(a)}),n})}function t5(t){return t.map(e=>e.flatMap(n=>{if(n.content.match(/^\s+$/))return n;const r=n.content.match(/^(\s*)(.*?)(\s*)$/);if(!r)return n;const[,s,a,l]=r;if(!s&&!l)return n;const u=[{...n,offset:n.offset+s.length,content:a}];return s&&u.unshift({content:s,offset:n.offset}),l&&u.push({content:l,offset:n.offset+s.length+a.length}),u}))}function n5(t){return t.map(e=>{const n=[];for(const r of e){if(n.length===0){n.push({...r});continue}const s=n[n.length-1],a=wg(s.htmlStyle||Rf(s)),l=wg(r.htmlStyle||Rf(r)),u=s.fontStyle&&(s.fontStyle&bn.Underline||s.fontStyle&bn.Strikethrough),f=r.fontStyle&&(r.fontStyle&bn.Underline||r.fontStyle&bn.Strikethrough);!u&&!f&&a===l?s.content+=r.content:n.push({...r})}return n})}const r5=wj;function s5(t,e,n){const r={meta:{},options:n,codeToHast:(a,l)=>Nf(t,a,l),codeToTokens:(a,l)=>If(t,a,l)};let s=r5(Nf(t,e,n,r));for(const a of Of(n))s=a.postprocess?.call(r,s,n)||s;return s}const n1={light:"#333333",dark:"#bbbbbb"},r1={light:"#fffffe",dark:"#1e1e1e"},s1="__shiki_resolved";function My(t){if(t?.[s1])return t;const e={...t};e.tokenColors&&!e.settings&&(e.settings=e.tokenColors,delete e.tokenColors),e.type||="dark",e.colorReplacements={...e.colorReplacements},e.settings||=[];let{bg:n,fg:r}=e;if(!n||!r){const u=e.settings?e.settings.find(f=>!f.name&&!f.scope):void 0;u?.settings?.foreground&&(r=u.settings.foreground),u?.settings?.background&&(n=u.settings.background),!r&&e?.colors?.["editor.foreground"]&&(r=e.colors["editor.foreground"]),!n&&e?.colors?.["editor.background"]&&(n=e.colors["editor.background"]),r||(r=e.type==="light"?n1.light:n1.dark),n||(n=e.type==="light"?r1.light:r1.dark),e.fg=r,e.bg=n}e.settings[0]&&e.settings[0].settings&&!e.settings[0].scope||e.settings.unshift({settings:{foreground:e.fg,background:e.bg}});let s=0;const a=new Map;function l(u){if(a.has(u))return a.get(u);s+=1;const f=`#${s.toString(16).padStart(8,"0").toLowerCase()}`;return e.colorReplacements?.[`#${f}`]?l(u):(a.set(u,f),f)}e.settings=e.settings.map(u=>{const f=u.settings?.foreground&&!u.settings.foreground.startsWith("#"),h=u.settings?.background&&!u.settings.background.startsWith("#");if(!f&&!h)return u;const m={...u,settings:{...u.settings}};if(f){const p=l(u.settings.foreground);e.colorReplacements[p]=u.settings.foreground,m.settings.foreground=p}if(h){const p=l(u.settings.background);e.colorReplacements[p]=u.settings.background,m.settings.background=p}return m});for(const u of Object.keys(e.colors||{}))if((u==="editor.foreground"||u==="editor.background"||u.startsWith("terminal.ansi"))&&!e.colors[u]?.startsWith("#")){const f=l(e.colors[u]);e.colorReplacements[f]=e.colors[u],e.colors[u]=f}return Object.defineProperty(e,s1,{enumerable:!1,writable:!1,value:!0}),e}async function xE(t){return Array.from(new Set((await Promise.all(t.filter(e=>!mE(e)).map(async e=>await pE(e).then(n=>Array.isArray(n)?n:[n])))).flat()))}async function wE(t){return(await Promise.all(t.map(async n=>gE(n)?null:My(await pE(n))))).filter(n=>!!n)}let i5=3;function a5(t,e=3){e>i5||console.trace(`[SHIKI DEPRECATE]: ${t}`)}let za=class extends Error{constructor(e){super(e),this.name="ShikiError"}};function SE(t,e){if(!e)return t;if(e[t]){const n=new Set([t]);for(;e[t];){if(t=e[t],n.has(t))throw new za(`Circular alias \`${Array.from(n).join(" -> ")} -> ${t}\``);n.add(t)}}return t}class o5 extends fz{constructor(e,n,r,s={}){super(e),this._resolver=e,this._themes=n,this._langs=r,this._alias=s,this._themes.map(a=>this.loadTheme(a)),this.loadLanguages(this._langs)}_resolvedThemes=new Map;_resolvedGrammars=new Map;_langMap=new Map;_langGraph=new Map;_textmateThemeCache=new WeakMap;_loadedThemesCache=null;_loadedLanguagesCache=null;getTheme(e){return typeof e=="string"?this._resolvedThemes.get(e):this.loadTheme(e)}loadTheme(e){const n=My(e);return n.name&&(this._resolvedThemes.set(n.name,n),this._loadedThemesCache=null),n}getLoadedThemes(){return this._loadedThemesCache||(this._loadedThemesCache=[...this._resolvedThemes.keys()]),this._loadedThemesCache}setTheme(e){let n=this._textmateThemeCache.get(e);n||(n=wf.createFromRawTheme(e),this._textmateThemeCache.set(e,n)),this._syncRegistry.setTheme(n)}getGrammar(e){return e=SE(e,this._alias),this._resolvedGrammars.get(e)}loadLanguage(e){if(this.getGrammar(e.name))return;const n=new Set([...this._langMap.values()].filter(a=>a.embeddedLangsLazy?.includes(e.name)));this._resolver.addLanguage(e);const r={balancedBracketSelectors:e.balancedBracketSelectors||["*"],unbalancedBracketSelectors:e.unbalancedBracketSelectors||[]};this._syncRegistry._rawGrammars.set(e.scopeName,e);const s=this.loadGrammarWithConfiguration(e.scopeName,1,r);if(s.name=e.name,this._resolvedGrammars.set(e.name,s),e.aliases&&e.aliases.forEach(a=>{this._alias[a]=e.name}),this._loadedLanguagesCache=null,n.size)for(const a of n)this._resolvedGrammars.delete(a.name),this._loadedLanguagesCache=null,this._syncRegistry?._injectionGrammars?.delete(a.scopeName),this._syncRegistry?._grammars?.delete(a.scopeName),this.loadLanguage(this._langMap.get(a.name))}dispose(){super.dispose(),this._resolvedThemes.clear(),this._resolvedGrammars.clear(),this._langMap.clear(),this._langGraph.clear(),this._loadedThemesCache=null}loadLanguages(e){for(const s of e)this.resolveEmbeddedLanguages(s);const n=Array.from(this._langGraph.entries()),r=n.filter(([s,a])=>!a);if(r.length){const s=n.filter(([a,l])=>l?(l.embeddedLanguages||l.embeddedLangs)?.some(f=>r.map(([h])=>h).includes(f)):!1).filter(a=>!r.includes(a));throw new za(`Missing languages ${r.map(([a])=>`\`${a}\``).join(", ")}, required by ${s.map(([a])=>`\`${a}\``).join(", ")}`)}for(const[s,a]of n)this._resolver.addLanguage(a);for(const[s,a]of n)this.loadLanguage(a)}getLoadedLanguages(){return this._loadedLanguagesCache||(this._loadedLanguagesCache=[...new Set([...this._resolvedGrammars.keys(),...Object.keys(this._alias)])]),this._loadedLanguagesCache}resolveEmbeddedLanguages(e){this._langMap.set(e.name,e),this._langGraph.set(e.name,e);const n=e.embeddedLanguages??e.embeddedLangs;if(n)for(const r of n)this._langGraph.set(r,this._langMap.get(r))}}class l5{_langs=new Map;_scopeToLang=new Map;_injections=new Map;_onigLib;constructor(e,n){this._onigLib={createOnigScanner:r=>e.createScanner(r),createOnigString:r=>e.createString(r)},n.forEach(r=>this.addLanguage(r))}get onigLib(){return this._onigLib}getLangRegistration(e){return this._langs.get(e)}loadGrammar(e){return this._scopeToLang.get(e)}addLanguage(e){this._langs.set(e.name,e),e.aliases&&e.aliases.forEach(n=>{this._langs.set(n,e)}),this._scopeToLang.set(e.scopeName,e),e.injectTo&&e.injectTo.forEach(n=>{this._injections.get(n)||this._injections.set(n,[]),this._injections.get(n).push(e.scopeName)})}getInjections(e){const n=e.split(".");let r=[];for(let s=1;s<=n.length;s++){const a=n.slice(0,s).join(".");r=[...r,...this._injections.get(a)||[]]}return r}}let Xo=0;function c5(t){Xo+=1,t.warnings!==!1&&Xo>=10&&Xo%10===0&&console.warn(`[Shiki] ${Xo} instances have been created. Shiki is supposed to be used as a singleton, consider refactoring your code to cache your highlighter instance; Or call \`highlighter.dispose()\` to release unused instances.`);let e=!1;if(!t.engine)throw new za("`engine` option is required for synchronous mode");const n=(t.langs||[]).flat(1),r=(t.themes||[]).flat(1).map(My),s=new l5(t.engine,n),a=new o5(s,r,n,t.langAlias);let l;function u(C){return SE(C,t.langAlias)}function f(C){k();const j=a.getGrammar(typeof C=="string"?C:C.name);if(!j)throw new za(`Language \`${C}\` not found, you may need to load it first`);return j}function h(C){if(C==="none")return{bg:"",fg:"",name:"none",settings:[],type:"dark"};k();const j=a.getTheme(C);if(!j)throw new za(`Theme \`${C}\` not found, you may need to load it first`);return j}function m(C){k();const j=h(C);l!==C&&(a.setTheme(j),l=C);const D=a.getColorMap();return{theme:j,colorMap:D}}function p(){return k(),a.getLoadedThemes()}function _(){return k(),a.getLoadedLanguages()}function g(...C){k(),a.loadLanguages(C.flat(1))}async function v(...C){return g(await xE(C))}function x(...C){k();for(const j of C.flat(1))a.loadTheme(j)}async function E(...C){return k(),x(await wE(C))}function k(){if(e)throw new za("Shiki instance has been disposed")}function T(){e||(e=!0,a.dispose(),Xo-=1)}return{setTheme:m,getTheme:h,getLanguage:f,getLoadedThemes:p,getLoadedLanguages:_,resolveLangAlias:u,loadLanguage:v,loadLanguageSync:g,loadTheme:E,loadThemeSync:x,dispose:T,[Symbol.dispose]:T}}async function u5(t){t.engine||a5("`engine` option is required. Use `createOnigurumaEngine` or `createJavaScriptRegexEngine` to create an engine.");const[e,n,r]=await Promise.all([wE(t.themes||[]),xE(t.langs||[]),t.engine]);return c5({...t,themes:e,langs:n,engine:r})}async function f5(t){const e=await u5(t);return{getLastGrammarState:(...n)=>Gj(e,...n),codeToTokensBase:(n,r)=>Iy(e,n,r),codeToTokensWithThemes:(n,r)=>vE(e,n,r),codeToTokens:(n,r)=>If(e,n,r),codeToHast:(n,r)=>Nf(e,n,r),codeToHtml:(n,r)=>s5(e,n,r),getBundledLanguages:()=>({}),getBundledThemes:()=>({}),...e,getInternalContext:()=>e}}function h5(t){const e=t.langs,n=t.themes,r=t.engine;async function s(a){function l(p){if(typeof p=="string"){if(p=a.langAlias?.[p]||p,mE(p))return[];const _=e[p];if(!_)throw new zt(`Language \`${p}\` is not included in this bundle. You may want to load it from external source.`);return _}return p}function u(p){if(gE(p))return"none";if(typeof p=="string"){const _=n[p];if(!_)throw new zt(`Theme \`${p}\` is not included in this bundle. You may want to load it from external source.`);return _}return p}const f=(a.themes??[]).map(p=>u(p)),h=(a.langs??[]).map(p=>l(p)),m=await f5({engine:a.engine??r(),...a,themes:f,langs:h});return{...m,loadLanguage(...p){return m.loadLanguage(...p.map(l))},loadTheme(...p){return m.loadTheme(...p.map(u))},getBundledLanguages(){return e},getBundledThemes(){return n}}}return s}function d5(t){let e;async function n(r={}){if(e){const s=await e;return await Promise.all([s.loadTheme(...r.themes||[]),s.loadLanguage(...r.langs||[])]),s}else{e=t({...r,themes:[],langs:[]});const s=await e;return await Promise.all([s.loadTheme(...r.themes||[]),s.loadLanguage(...r.langs||[])]),s}}return n}function p5(t,e){const n=d5(t);async function r(s,a){const l=await n({langs:[a.lang],themes:"theme"in a?[a.theme]:Object.values(a.themes)}),u=await e?.guessEmbeddedLanguages?.(s,a.lang,l);return u&&await l.loadLanguage(...u),l}return{getSingletonHighlighter(s){return n(s)},async codeToHtml(s,a){return(await r(s,a)).codeToHtml(s,a)},async codeToHast(s,a){return(await r(s,a)).codeToHast(s,a)},async codeToTokens(s,a){return(await r(s,a)).codeToTokens(s,a)},async codeToTokensBase(s,a){return(await r(s,a)).codeToTokensBase(s,a)},async codeToTokensWithThemes(s,a){return(await r(s,a)).codeToTokensWithThemes(s,a)},async getLastGrammarState(s,a){return(await n({langs:[a.lang],themes:[a.theme]})).getLastGrammarState(s,a)}}}const kE=[{id:"abap",name:"ABAP",import:(()=>L(()=>import("./abap-BdImnpbu.js"),[]))},{id:"actionscript-3",name:"ActionScript",import:(()=>L(()=>import("./actionscript-3-CfeIJUat.js"),[]))},{id:"ada",name:"Ada",import:(()=>L(()=>import("./ada-bCR0ucgS.js"),[]))},{id:"angular-html",name:"Angular HTML",import:(()=>L(()=>import("./angular-html-CU67Zn6k.js").then(t=>t.f),__vite__mapDeps([0,1,2,3])))},{id:"angular-ts",name:"Angular TypeScript",import:(()=>L(()=>import("./angular-ts-BwZT4LLn.js"),__vite__mapDeps([4,0,1,2,3,5])))},{id:"apache",name:"Apache Conf",import:(()=>L(()=>import("./apache-Pmp26Uib.js"),[]))},{id:"apex",name:"Apex",import:(()=>L(()=>import("./apex-DDbsPZ6N.js"),[]))},{id:"apl",name:"APL",import:(()=>L(()=>import("./apl-dKokRX4l.js"),__vite__mapDeps([6,1,2,3,7,8,9])))},{id:"applescript",name:"AppleScript",import:(()=>L(()=>import("./applescript-Co6uUVPk.js"),[]))},{id:"ara",name:"Ara",import:(()=>L(()=>import("./ara-BRHolxvo.js"),[]))},{id:"asciidoc",name:"AsciiDoc",aliases:["adoc"],import:(()=>L(()=>import("./asciidoc-Dv7Oe6Be.js"),[]))},{id:"asm",name:"Assembly",import:(()=>L(()=>import("./asm-D_Q5rh1f.js"),[]))},{id:"astro",name:"Astro",import:(()=>L(()=>import("./astro-CbQHKStN.js"),__vite__mapDeps([10,9,2,11,3,12,13])))},{id:"awk",name:"AWK",import:(()=>L(()=>import("./awk-DMzUqQB5.js"),[]))},{id:"ballerina",name:"Ballerina",import:(()=>L(()=>import("./ballerina-BFfxhgS-.js"),[]))},{id:"bat",name:"Batch File",aliases:["batch"],import:(()=>L(()=>import("./bat-BkioyH1T.js"),[]))},{id:"beancount",name:"Beancount",import:(()=>L(()=>import("./beancount-k_qm7-4y.js"),[]))},{id:"berry",name:"Berry",aliases:["be"],import:(()=>L(()=>import("./berry-uYugtg8r.js"),[]))},{id:"bibtex",name:"BibTeX",import:(()=>L(()=>import("./bibtex-CHM0blh-.js"),[]))},{id:"bicep",name:"Bicep",import:(()=>L(()=>import("./bicep-Bmn6On1c.js"),[]))},{id:"blade",name:"Blade",import:(()=>L(()=>import("./blade-DVc8C-J4.js"),__vite__mapDeps([14,15,1,2,3,7,8,16,9])))},{id:"bsl",name:"1C (Enterprise)",aliases:["1c"],import:(()=>L(()=>import("./bsl-BO_Y6i37.js"),__vite__mapDeps([17,18])))},{id:"c",name:"C",import:(()=>L(()=>import("./c-BIGW1oBm.js"),[]))},{id:"cadence",name:"Cadence",aliases:["cdc"],import:(()=>L(()=>import("./cadence-Bv_4Rxtq.js"),[]))},{id:"cairo",name:"Cairo",import:(()=>L(()=>import("./cairo-KRGpt6FW.js"),__vite__mapDeps([19,20])))},{id:"clarity",name:"Clarity",import:(()=>L(()=>import("./clarity-D53aC0YG.js"),[]))},{id:"clojure",name:"Clojure",aliases:["clj"],import:(()=>L(()=>import("./clojure-P80f7IUj.js"),[]))},{id:"cmake",name:"CMake",import:(()=>L(()=>import("./cmake-D1j8_8rp.js"),[]))},{id:"cobol",name:"COBOL",import:(()=>L(()=>import("./cobol-nwyudZeR.js"),__vite__mapDeps([21,1,2,3,8])))},{id:"codeowners",name:"CODEOWNERS",import:(()=>L(()=>import("./codeowners-Bp6g37R7.js"),[]))},{id:"codeql",name:"CodeQL",aliases:["ql"],import:(()=>L(()=>import("./codeql-DsOJ9woJ.js"),[]))},{id:"coffee",name:"CoffeeScript",aliases:["coffeescript"],import:(()=>L(()=>import("./coffee-Ch7k5sss.js"),__vite__mapDeps([22,2])))},{id:"common-lisp",name:"Common Lisp",aliases:["lisp"],import:(()=>L(()=>import("./common-lisp-Cg-RD9OK.js"),[]))},{id:"coq",name:"Coq",import:(()=>L(()=>import("./coq-DkFqJrB1.js"),[]))},{id:"cpp",name:"C++",aliases:["c++"],import:(()=>L(()=>import("./cpp-CofmeUqb.js"),__vite__mapDeps([23,24,25,26,16])))},{id:"crystal",name:"Crystal",import:(()=>L(()=>import("./crystal-tKQVLTB8.js"),__vite__mapDeps([27,1,2,3,16,26,28])))},{id:"csharp",name:"C#",aliases:["c#","cs"],import:(()=>L(()=>import("./csharp-K5feNrxe.js"),[]))},{id:"css",name:"CSS",import:(()=>L(()=>import("./css-DPfMkruS.js"),[]))},{id:"csv",name:"CSV",import:(()=>L(()=>import("./csv-fuZLfV_i.js"),[]))},{id:"cue",name:"CUE",import:(()=>L(()=>import("./cue-D82EKSYY.js"),[]))},{id:"cypher",name:"Cypher",aliases:["cql"],import:(()=>L(()=>import("./cypher-COkxafJQ.js"),[]))},{id:"d",name:"D",import:(()=>L(()=>import("./d-85-TOEBH.js"),[]))},{id:"dart",name:"Dart",import:(()=>L(()=>import("./dart-CF10PKvl.js"),[]))},{id:"dax",name:"DAX",import:(()=>L(()=>import("./dax-CEL-wOlO.js"),[]))},{id:"desktop",name:"Desktop",import:(()=>L(()=>import("./desktop-BmXAJ9_W.js"),[]))},{id:"diff",name:"Diff",import:(()=>L(()=>import("./diff-D97Zzqfu.js"),[]))},{id:"docker",name:"Dockerfile",aliases:["dockerfile"],import:(()=>L(()=>import("./docker-BcOcwvcX.js"),[]))},{id:"dotenv",name:"dotEnv",import:(()=>L(()=>import("./dotenv-Da5cRb03.js"),[]))},{id:"dream-maker",name:"Dream Maker",import:(()=>L(()=>import("./dream-maker-BtqSS_iP.js"),[]))},{id:"edge",name:"Edge",import:(()=>L(()=>import("./edge-BkV0erSs.js"),__vite__mapDeps([29,11,1,2,3,15])))},{id:"elixir",name:"Elixir",import:(()=>L(()=>import("./elixir-CDX3lj18.js"),__vite__mapDeps([30,1,2,3])))},{id:"elm",name:"Elm",import:(()=>L(()=>import("./elm-DbKCFpqz.js"),__vite__mapDeps([31,25,26])))},{id:"emacs-lisp",name:"Emacs Lisp",aliases:["elisp"],import:(()=>L(()=>import("./emacs-lisp-C9XAeP06.js"),[]))},{id:"erb",name:"ERB",import:(()=>L(()=>import("./erb-BOJIQeun.js"),__vite__mapDeps([32,1,2,3,33,34,7,8,16,35,11,36,13,23,24,25,26,28,37,38])))},{id:"erlang",name:"Erlang",aliases:["erl"],import:(()=>L(()=>import("./erlang-DsQrWhSR.js"),__vite__mapDeps([39,40])))},{id:"fennel",name:"Fennel",import:(()=>L(()=>import("./fennel-BYunw83y.js"),[]))},{id:"fish",name:"Fish",import:(()=>L(()=>import("./fish-BvzEVeQv.js"),[]))},{id:"fluent",name:"Fluent",aliases:["ftl"],import:(()=>L(()=>import("./fluent-C4IJs8-o.js"),[]))},{id:"fortran-fixed-form",name:"Fortran (Fixed Form)",aliases:["f","for","f77"],import:(()=>L(()=>import("./fortran-fixed-form-BZjJHVRy.js"),__vite__mapDeps([41,42])))},{id:"fortran-free-form",name:"Fortran (Free Form)",aliases:["f90","f95","f03","f08","f18"],import:(()=>L(()=>import("./fortran-free-form-D22FLkUw.js"),[]))},{id:"fsharp",name:"F#",aliases:["f#","fs"],import:(()=>L(()=>import("./fsharp-CXgrBDvD.js"),__vite__mapDeps([43,40])))},{id:"gdresource",name:"GDResource",import:(()=>L(()=>import("./gdresource-B7Tvp0Sc.js"),__vite__mapDeps([44,45,46])))},{id:"gdscript",name:"GDScript",import:(()=>L(()=>import("./gdscript-DTMYz4Jt.js"),[]))},{id:"gdshader",name:"GDShader",import:(()=>L(()=>import("./gdshader-DkwncUOv.js"),[]))},{id:"genie",name:"Genie",import:(()=>L(()=>import("./genie-D0YGMca9.js"),[]))},{id:"gherkin",name:"Gherkin",import:(()=>L(()=>import("./gherkin-DyxjwDmM.js"),[]))},{id:"git-commit",name:"Git Commit Message",import:(()=>L(()=>import("./git-commit-F4YmCXRG.js"),__vite__mapDeps([47,48])))},{id:"git-rebase",name:"Git Rebase Message",import:(()=>L(()=>import("./git-rebase-r7XF79zn.js"),__vite__mapDeps([49,28])))},{id:"gleam",name:"Gleam",import:(()=>L(()=>import("./gleam-BspZqrRM.js"),[]))},{id:"glimmer-js",name:"Glimmer JS",aliases:["gjs"],import:(()=>L(()=>import("./glimmer-js-Rg0-pVw9.js"),__vite__mapDeps([50,2,11,3,1])))},{id:"glimmer-ts",name:"Glimmer TS",aliases:["gts"],import:(()=>L(()=>import("./glimmer-ts-U6CK756n.js"),__vite__mapDeps([51,11,3,2,1])))},{id:"glsl",name:"GLSL",import:(()=>L(()=>import("./glsl-DplSGwfg.js"),__vite__mapDeps([25,26])))},{id:"gnuplot",name:"Gnuplot",import:(()=>L(()=>import("./gnuplot-DdkO51Og.js"),[]))},{id:"go",name:"Go",import:(()=>L(()=>import("./go-Dn2_MT6a.js"),[]))},{id:"graphql",name:"GraphQL",aliases:["gql"],import:(()=>L(()=>import("./graphql-ChdNCCLP.js"),__vite__mapDeps([35,2,11,36,13])))},{id:"groovy",name:"Groovy",import:(()=>L(()=>import("./groovy-gcz8RCvz.js"),[]))},{id:"hack",name:"Hack",import:(()=>L(()=>import("./hack-CaT9iCJl.js"),__vite__mapDeps([52,1,2,3,16])))},{id:"haml",name:"Ruby Haml",import:(()=>L(()=>import("./haml-B8DHNrY2.js"),__vite__mapDeps([34,2,3])))},{id:"handlebars",name:"Handlebars",aliases:["hbs"],import:(()=>L(()=>import("./handlebars-BL8al0AC.js"),__vite__mapDeps([53,1,2,3,38])))},{id:"haskell",name:"Haskell",aliases:["hs"],import:(()=>L(()=>import("./haskell-Df6bDoY_.js"),[]))},{id:"haxe",name:"Haxe",import:(()=>L(()=>import("./haxe-CzTSHFRz.js"),[]))},{id:"hcl",name:"HashiCorp HCL",import:(()=>L(()=>import("./hcl-BWvSN4gD.js"),[]))},{id:"hjson",name:"Hjson",import:(()=>L(()=>import("./hjson-D5-asLiD.js"),[]))},{id:"hlsl",name:"HLSL",import:(()=>L(()=>import("./hlsl-D3lLCCz7.js"),[]))},{id:"html",name:"HTML",import:(()=>L(()=>import("./html-GMplVEZG.js"),__vite__mapDeps([1,2,3])))},{id:"html-derivative",name:"HTML (Derivative)",import:(()=>L(()=>import("./html-derivative-BFtXZ54Q.js"),__vite__mapDeps([15,1,2,3])))},{id:"http",name:"HTTP",import:(()=>L(()=>import("./http-jrhK8wxY.js"),__vite__mapDeps([54,28,9,7,8,35,2,11,36,13])))},{id:"hurl",name:"Hurl",import:(()=>L(()=>import("./hurl-irOxFIW8.js"),__vite__mapDeps([55,35,2,11,36,13,7,8,56])))},{id:"hxml",name:"HXML",import:(()=>L(()=>import("./hxml-Bvhsp5Yf.js"),__vite__mapDeps([57,58])))},{id:"hy",name:"Hy",import:(()=>L(()=>import("./hy-DFXneXwc.js"),[]))},{id:"imba",name:"Imba",import:(()=>L(()=>import("./imba-DGztddWO.js"),[]))},{id:"ini",name:"INI",aliases:["properties"],import:(()=>L(()=>import("./ini-BEwlwnbL.js"),[]))},{id:"java",name:"Java",import:(()=>L(()=>import("./java-CylS5w8V.js"),[]))},{id:"javascript",name:"JavaScript",aliases:["js","cjs","mjs"],import:(()=>L(()=>import("./javascript-wDzz0qaB.js"),[]))},{id:"jinja",name:"Jinja",import:(()=>L(()=>import("./jinja-4LBKfQ-Z.js"),__vite__mapDeps([59,1,2,3])))},{id:"jison",name:"Jison",import:(()=>L(()=>import("./jison-wvAkD_A8.js"),__vite__mapDeps([60,2])))},{id:"json",name:"JSON",import:(()=>L(()=>import("./json-Cp-IABpG.js"),[]))},{id:"json5",name:"JSON5",import:(()=>L(()=>import("./json5-C9tS-k6U.js"),[]))},{id:"jsonc",name:"JSON with Comments",import:(()=>L(()=>import("./jsonc-Des-eS-w.js"),[]))},{id:"jsonl",name:"JSON Lines",import:(()=>L(()=>import("./jsonl-DcaNXYhu.js"),[]))},{id:"jsonnet",name:"Jsonnet",import:(()=>L(()=>import("./jsonnet-DFQXde-d.js"),[]))},{id:"jssm",name:"JSSM",aliases:["fsl"],import:(()=>L(()=>import("./jssm-C2t-YnRu.js"),[]))},{id:"jsx",name:"JSX",import:(()=>L(()=>import("./jsx-g9-lgVsj.js"),[]))},{id:"julia",name:"Julia",aliases:["jl"],import:(()=>L(()=>import("./julia-C8NyazO9.js"),__vite__mapDeps([61,23,24,25,26,16,20,2,62])))},{id:"kdl",name:"KDL",import:(()=>L(()=>import("./kdl-DV7GczEv.js"),[]))},{id:"kotlin",name:"Kotlin",aliases:["kt","kts"],import:(()=>L(()=>import("./kotlin-BdnUsdx6.js"),[]))},{id:"kusto",name:"Kusto",aliases:["kql"],import:(()=>L(()=>import("./kusto-BvAqAH-y.js"),[]))},{id:"latex",name:"LaTeX",import:(()=>L(()=>import("./latex-BdAV_C_H.js"),__vite__mapDeps([63,64,62])))},{id:"lean",name:"Lean 4",aliases:["lean4"],import:(()=>L(()=>import("./lean-Bc6EcWN3.js"),[]))},{id:"less",name:"Less",import:(()=>L(()=>import("./less-B1dDrJ26.js"),[]))},{id:"liquid",name:"Liquid",import:(()=>L(()=>import("./liquid-DYVedYrR.js"),__vite__mapDeps([65,1,2,3,9])))},{id:"llvm",name:"LLVM IR",import:(()=>L(()=>import("./llvm-BtvRca6l.js"),[]))},{id:"log",name:"Log file",import:(()=>L(()=>import("./log-2UxHyX5q.js"),[]))},{id:"logo",name:"Logo",import:(()=>L(()=>import("./logo-BtOb2qkB.js"),[]))},{id:"lua",name:"Lua",import:(()=>L(()=>import("./lua-BbnMAYS6.js"),__vite__mapDeps([37,26])))},{id:"luau",name:"Luau",import:(()=>L(()=>import("./luau-CXu1NL6O.js"),[]))},{id:"make",name:"Makefile",aliases:["makefile"],import:(()=>L(()=>import("./make-CHLpvVh8.js"),[]))},{id:"markdown",name:"Markdown",aliases:["md"],import:(()=>L(()=>import("./markdown-Cvjx9yec.js"),[]))},{id:"marko",name:"Marko",import:(()=>L(()=>import("./marko-CPi9NSCl.js"),__vite__mapDeps([66,3,67,5,11])))},{id:"matlab",name:"MATLAB",import:(()=>L(()=>import("./matlab-D7o27uSR.js"),[]))},{id:"mdc",name:"MDC",import:(()=>L(()=>import("./mdc-DUICxH0z.js"),__vite__mapDeps([68,40,38,15,1,2,3])))},{id:"mdx",name:"MDX",import:(()=>L(()=>import("./mdx-Cmh6b_Ma.js"),[]))},{id:"mermaid",name:"Mermaid",aliases:["mmd"],import:(()=>L(()=>import("./mermaid-DKYwYmdq.js"),[]))},{id:"mipsasm",name:"MIPS Assembly",aliases:["mips"],import:(()=>L(()=>import("./mipsasm-CKIfxQSi.js"),[]))},{id:"mojo",name:"Mojo",import:(()=>L(()=>import("./mojo-1DNp92w6.js"),[]))},{id:"move",name:"Move",import:(()=>L(()=>import("./move-Bu9oaDYs.js"),[]))},{id:"narrat",name:"Narrat Language",aliases:["nar"],import:(()=>L(()=>import("./narrat-DRg8JJMk.js"),[]))},{id:"nextflow",name:"Nextflow",aliases:["nf"],import:(()=>L(()=>import("./nextflow-BrzmwbiE.js"),[]))},{id:"nginx",name:"Nginx",import:(()=>L(()=>import("./nginx-DknmC5AR.js"),__vite__mapDeps([69,37,26])))},{id:"nim",name:"Nim",import:(()=>L(()=>import("./nim-CVrawwO9.js"),__vite__mapDeps([70,26,1,2,3,7,8,25,40])))},{id:"nix",name:"Nix",import:(()=>L(()=>import("./nix-c8nO5XWb.js"),[]))},{id:"nushell",name:"nushell",aliases:["nu"],import:(()=>L(()=>import("./nushell-C-sUppwS.js"),[]))},{id:"objective-c",name:"Objective-C",aliases:["objc"],import:(()=>L(()=>import("./objective-c-DXmwc3jG.js"),[]))},{id:"objective-cpp",name:"Objective-C++",import:(()=>L(()=>import("./objective-cpp-CLxacb5B.js"),[]))},{id:"ocaml",name:"OCaml",import:(()=>L(()=>import("./ocaml-C0hk2d4L.js"),[]))},{id:"openscad",name:"OpenSCAD",aliases:["scad"],import:(()=>L(()=>import("./openscad-C4EeE6gA.js"),[]))},{id:"pascal",name:"Pascal",import:(()=>L(()=>import("./pascal-D93ZcfNL.js"),[]))},{id:"perl",name:"Perl",import:(()=>L(()=>import("./perl-C0TMdlhV.js"),__vite__mapDeps([71,1,2,3,7,8,16])))},{id:"php",name:"PHP",import:(()=>L(()=>import("./php-CDn_0X-4.js"),__vite__mapDeps([72,1,2,3,7,8,16,9])))},{id:"pkl",name:"Pkl",import:(()=>L(()=>import("./pkl-u5AG7uiY.js"),[]))},{id:"plsql",name:"PL/SQL",import:(()=>L(()=>import("./plsql-ChMvpjG-.js"),[]))},{id:"po",name:"Gettext PO",aliases:["pot","potx"],import:(()=>L(()=>import("./po-BTJTHyun.js"),[]))},{id:"polar",name:"Polar",import:(()=>L(()=>import("./polar-C0HS_06l.js"),[]))},{id:"postcss",name:"PostCSS",import:(()=>L(()=>import("./postcss-CXtECtnM.js"),[]))},{id:"powerquery",name:"PowerQuery",import:(()=>L(()=>import("./powerquery-CEu0bR-o.js"),[]))},{id:"powershell",name:"PowerShell",aliases:["ps","ps1"],import:(()=>L(()=>import("./powershell-Dpen1YoG.js"),[]))},{id:"prisma",name:"Prisma",import:(()=>L(()=>import("./prisma-Dd19v3D-.js"),[]))},{id:"prolog",name:"Prolog",import:(()=>L(()=>import("./prolog-CbFg5uaA.js"),[]))},{id:"proto",name:"Protocol Buffer 3",aliases:["protobuf"],import:(()=>L(()=>import("./proto-DyJlTyXw.js"),[]))},{id:"pug",name:"Pug",aliases:["jade"],import:(()=>L(()=>import("./pug-CGlum2m_.js"),__vite__mapDeps([73,2,3,1])))},{id:"puppet",name:"Puppet",import:(()=>L(()=>import("./puppet-BMWR74SV.js"),[]))},{id:"purescript",name:"PureScript",import:(()=>L(()=>import("./purescript-CklMAg4u.js"),[]))},{id:"python",name:"Python",aliases:["py"],import:(()=>L(()=>import("./python-B6aJPvgy.js"),[]))},{id:"qml",name:"QML",import:(()=>L(()=>import("./qml-3beO22l8.js"),__vite__mapDeps([74,2])))},{id:"qmldir",name:"QML Directory",import:(()=>L(()=>import("./qmldir-C8lEn-DE.js"),[]))},{id:"qss",name:"Qt Style Sheets",import:(()=>L(()=>import("./qss-IeuSbFQv.js"),[]))},{id:"r",name:"R",import:(()=>L(()=>import("./r-DiinP2Uv.js"),[]))},{id:"racket",name:"Racket",import:(()=>L(()=>import("./racket-BqYA7rlc.js"),[]))},{id:"raku",name:"Raku",aliases:["perl6"],import:(()=>L(()=>import("./raku-DXvB9xmW.js"),[]))},{id:"razor",name:"ASP.NET Razor",import:(()=>L(()=>import("./razor-CE9lU5zL.js"),__vite__mapDeps([75,1,2,3,76])))},{id:"reg",name:"Windows Registry Script",import:(()=>L(()=>import("./reg-C-SQnVFl.js"),[]))},{id:"regexp",name:"RegExp",aliases:["regex"],import:(()=>L(()=>import("./regexp-CDVJQ6XC.js"),[]))},{id:"rel",name:"Rel",import:(()=>L(()=>import("./rel-C3B-1QV4.js"),[]))},{id:"riscv",name:"RISC-V",import:(()=>L(()=>import("./riscv-BM1_JUlF.js"),[]))},{id:"rosmsg",name:"ROS Interface",import:(()=>L(()=>import("./rosmsg-BJDFO7_C.js"),[]))},{id:"rst",name:"reStructuredText",import:(()=>L(()=>import("./rst-B0xPkSld.js"),__vite__mapDeps([77,15,1,2,3,23,24,25,26,16,20,28,38,78,33,34,7,8,35,11,36,13,37])))},{id:"ruby",name:"Ruby",aliases:["rb"],import:(()=>L(()=>import("./ruby-BvKwtOVI.js"),__vite__mapDeps([33,1,2,3,34,7,8,16,35,11,36,13,23,24,25,26,28,37,38])))},{id:"rust",name:"Rust",aliases:["rs"],import:(()=>L(()=>import("./rust-B1yitclQ.js"),[]))},{id:"sas",name:"SAS",import:(()=>L(()=>import("./sas-cz2c8ADy.js"),__vite__mapDeps([79,16])))},{id:"sass",name:"Sass",import:(()=>L(()=>import("./sass-Cj5Yp3dK.js"),[]))},{id:"scala",name:"Scala",import:(()=>L(()=>import("./scala-C151Ov-r.js"),[]))},{id:"scheme",name:"Scheme",import:(()=>L(()=>import("./scheme-C98Dy4si.js"),[]))},{id:"scss",name:"SCSS",import:(()=>L(()=>import("./scss-OYdSNvt2.js"),__vite__mapDeps([5,3])))},{id:"sdbl",name:"1C (Query)",aliases:["1c-query"],import:(()=>L(()=>import("./sdbl-DVxCFoDh.js"),[]))},{id:"shaderlab",name:"ShaderLab",aliases:["shader"],import:(()=>L(()=>import("./shaderlab-Dg9Lc6iA.js"),__vite__mapDeps([80,81])))},{id:"shellscript",name:"Shell",aliases:["bash","sh","shell","zsh"],import:(()=>L(()=>import("./shellscript-Yzrsuije.js"),[]))},{id:"shellsession",name:"Shell Session",aliases:["console"],import:(()=>L(()=>import("./shellsession-BADoaaVG.js"),__vite__mapDeps([82,28])))},{id:"smalltalk",name:"Smalltalk",import:(()=>L(()=>import("./smalltalk-BERRCDM3.js"),[]))},{id:"solidity",name:"Solidity",import:(()=>L(()=>import("./solidity-rGO070M0.js"),[]))},{id:"soy",name:"Closure Templates",aliases:["closure-templates"],import:(()=>L(()=>import("./soy-Brmx7dQM.js"),__vite__mapDeps([83,1,2,3])))},{id:"sparql",name:"SPARQL",import:(()=>L(()=>import("./sparql-rVzFXLq3.js"),__vite__mapDeps([84,85])))},{id:"splunk",name:"Splunk Query Language",aliases:["spl"],import:(()=>L(()=>import("./splunk-BtCnVYZw.js"),[]))},{id:"sql",name:"SQL",import:(()=>L(()=>import("./sql-BLtJtn59.js"),[]))},{id:"ssh-config",name:"SSH Config",import:(()=>L(()=>import("./ssh-config-_ykCGR6B.js"),[]))},{id:"stata",name:"Stata",import:(()=>L(()=>import("./stata-BH5u7GGu.js"),__vite__mapDeps([86,16])))},{id:"stylus",name:"Stylus",aliases:["styl"],import:(()=>L(()=>import("./stylus-BEDo0Tqx.js"),[]))},{id:"svelte",name:"Svelte",import:(()=>L(()=>import("./svelte-3Dk4HxPD.js"),__vite__mapDeps([87,2,11,3,12])))},{id:"swift",name:"Swift",import:(()=>L(()=>import("./swift-Dg5xB15N.js"),[]))},{id:"system-verilog",name:"SystemVerilog",import:(()=>L(()=>import("./system-verilog-CnnmHF94.js"),[]))},{id:"systemd",name:"Systemd Units",import:(()=>L(()=>import("./systemd-4A_iFExJ.js"),[]))},{id:"talonscript",name:"TalonScript",aliases:["talon"],import:(()=>L(()=>import("./talonscript-CkByrt1z.js"),[]))},{id:"tasl",name:"Tasl",import:(()=>L(()=>import("./tasl-QIJgUcNo.js"),[]))},{id:"tcl",name:"Tcl",import:(()=>L(()=>import("./tcl-dwOrl1Do.js"),[]))},{id:"templ",name:"Templ",import:(()=>L(()=>import("./templ-W15q3VgB.js"),__vite__mapDeps([88,89,2,3])))},{id:"terraform",name:"Terraform",aliases:["tf","tfvars"],import:(()=>L(()=>import("./terraform-BETggiCN.js"),[]))},{id:"tex",name:"TeX",import:(()=>L(()=>import("./tex-CxkMU7Pf.js"),__vite__mapDeps([64,62])))},{id:"toml",name:"TOML",import:(()=>L(()=>import("./toml-vGWfd6FD.js"),[]))},{id:"ts-tags",name:"TypeScript with Tags",aliases:["lit"],import:(()=>L(()=>import("./ts-tags-zn1MmPIZ.js"),__vite__mapDeps([90,11,3,2,25,26,1,16,7,8])))},{id:"tsv",name:"TSV",import:(()=>L(()=>import("./tsv-B_m7g4N7.js"),[]))},{id:"tsx",name:"TSX",import:(()=>L(()=>import("./tsx-COt5Ahok.js"),[]))},{id:"turtle",name:"Turtle",import:(()=>L(()=>import("./turtle-BsS91CYL.js"),[]))},{id:"twig",name:"Twig",import:(()=>L(()=>import("./twig-CO9l9SDP.js"),__vite__mapDeps([91,3,2,5,72,1,7,8,16,9,20,33,34,35,11,36,13,23,24,25,26,28,37,38])))},{id:"typescript",name:"TypeScript",aliases:["ts","cts","mts"],import:(()=>L(()=>import("./typescript-BPQ3VLAy.js"),[]))},{id:"typespec",name:"TypeSpec",aliases:["tsp"],import:(()=>L(()=>import("./typespec-BGHnOYBU.js"),[]))},{id:"typst",name:"Typst",aliases:["typ"],import:(()=>L(()=>import("./typst-DHCkPAjA.js"),[]))},{id:"v",name:"V",import:(()=>L(()=>import("./v-BcVCzyr7.js"),[]))},{id:"vala",name:"Vala",import:(()=>L(()=>import("./vala-CsfeWuGM.js"),[]))},{id:"vb",name:"Visual Basic",aliases:["cmd"],import:(()=>L(()=>import("./vb-D17OF-Vu.js"),[]))},{id:"verilog",name:"Verilog",import:(()=>L(()=>import("./verilog-BQ8w6xss.js"),[]))},{id:"vhdl",name:"VHDL",import:(()=>L(()=>import("./vhdl-CeAyd5Ju.js"),[]))},{id:"viml",name:"Vim Script",aliases:["vim","vimscript"],import:(()=>L(()=>import("./viml-CJc9bBzg.js"),[]))},{id:"vue",name:"Vue",import:(()=>L(()=>import("./vue-DnHKYNfI.js"),__vite__mapDeps([92,3,2,11,9,15,1])))},{id:"vue-html",name:"Vue HTML",import:(()=>L(()=>import("./vue-html-CChd_i61.js"),__vite__mapDeps([93,92,3,2,11,9,15,1])))},{id:"vue-vine",name:"Vue Vine",import:(()=>L(()=>import("./vue-vine-8moa0y9V.js"),__vite__mapDeps([94,3,5,67,95,12,92,2,11,9,15,1])))},{id:"vyper",name:"Vyper",aliases:["vy"],import:(()=>L(()=>import("./vyper-CDx5xZoG.js"),[]))},{id:"wasm",name:"WebAssembly",import:(()=>L(()=>import("./wasm-MzD3tlZU.js"),[]))},{id:"wenyan",name:"Wenyan",aliases:[""],import:(()=>L(()=>import("./wenyan-BV7otONQ.js"),[]))},{id:"wgsl",name:"WGSL",import:(()=>L(()=>import("./wgsl-Dx-B1_4e.js"),[]))},{id:"wikitext",name:"Wikitext",aliases:["mediawiki","wiki"],import:(()=>L(()=>import("./wikitext-BhOHFoWU.js"),[]))},{id:"wit",name:"WebAssembly Interface Types",import:(()=>L(()=>import("./wit-5i3qLPDT.js"),[]))},{id:"wolfram",name:"Wolfram",aliases:["wl"],import:(()=>L(()=>import("./wolfram-lXgVvXCa.js"),[]))},{id:"xml",name:"XML",import:(()=>L(()=>import("./xml-sdJ4AIDG.js"),__vite__mapDeps([7,8])))},{id:"xsl",name:"XSL",import:(()=>L(()=>import("./xsl-CtQFsRM5.js"),__vite__mapDeps([96,7,8])))},{id:"yaml",name:"YAML",aliases:["yml"],import:(()=>L(()=>import("./yaml-Buea-lGh.js"),[]))},{id:"zenscript",name:"ZenScript",import:(()=>L(()=>import("./zenscript-DVFEvuxE.js"),[]))},{id:"zig",name:"Zig",import:(()=>L(()=>import("./zig-VOosw3JB.js"),[]))}],m5=Object.fromEntries(kE.map(t=>[t.id,t.import])),g5=Object.fromEntries(kE.flatMap(t=>t.aliases?.map(e=>[e,t.import])||[])),y5={...m5,...g5},_5=[{id:"andromeeda",displayName:"Andromeeda",type:"dark",import:(()=>L(()=>import("./andromeeda-C-Jbm3Hp.js"),[]))},{id:"aurora-x",displayName:"Aurora X",type:"dark",import:(()=>L(()=>import("./aurora-x-D-2ljcwZ.js"),[]))},{id:"ayu-dark",displayName:"Ayu Dark",type:"dark",import:(()=>L(()=>import("./ayu-dark-Cv9koXgw.js"),[]))},{id:"catppuccin-frappe",displayName:"Catppuccin Frapp",type:"dark",import:(()=>L(()=>import("./catppuccin-frappe-DFWUc33u.js"),[]))},{id:"catppuccin-latte",displayName:"Catppuccin Latte",type:"light",import:(()=>L(()=>import("./catppuccin-latte-C9dUb6Cb.js"),[]))},{id:"catppuccin-macchiato",displayName:"Catppuccin Macchiato",type:"dark",import:(()=>L(()=>import("./catppuccin-macchiato-DQyhUUbL.js"),[]))},{id:"catppuccin-mocha",displayName:"Catppuccin Mocha",type:"dark",import:(()=>L(()=>import("./catppuccin-mocha-D87Tk5Gz.js"),[]))},{id:"dark-plus",displayName:"Dark Plus",type:"dark",import:(()=>L(()=>import("./dark-plus-C3mMm8J8.js"),[]))},{id:"dracula",displayName:"Dracula Theme",type:"dark",import:(()=>L(()=>import("./dracula-BzJJZx-M.js"),[]))},{id:"dracula-soft",displayName:"Dracula Theme Soft",type:"dark",import:(()=>L(()=>import("./dracula-soft-BXkSAIEj.js"),[]))},{id:"everforest-dark",displayName:"Everforest Dark",type:"dark",import:(()=>L(()=>import("./everforest-dark-BgDCqdQA.js"),[]))},{id:"everforest-light",displayName:"Everforest Light",type:"light",import:(()=>L(()=>import("./everforest-light-C8M2exoo.js"),[]))},{id:"github-dark",displayName:"GitHub Dark",type:"dark",import:(()=>L(()=>import("./github-dark-DHJKELXO.js"),[]))},{id:"github-dark-default",displayName:"GitHub Dark Default",type:"dark",import:(()=>L(()=>import("./github-dark-default-Cuk6v7N8.js"),[]))},{id:"github-dark-dimmed",displayName:"GitHub Dark Dimmed",type:"dark",import:(()=>L(()=>import("./github-dark-dimmed-DH5Ifo-i.js"),[]))},{id:"github-dark-high-contrast",displayName:"GitHub Dark High Contrast",type:"dark",import:(()=>L(()=>import("./github-dark-high-contrast-E3gJ1_iC.js"),[]))},{id:"github-light",displayName:"GitHub Light",type:"light",import:(()=>L(()=>import("./github-light-DAi9KRSo.js"),[]))},{id:"github-light-default",displayName:"GitHub Light Default",type:"light",import:(()=>L(()=>import("./github-light-default-D7oLnXFd.js"),[]))},{id:"github-light-high-contrast",displayName:"GitHub Light High Contrast",type:"light",import:(()=>L(()=>import("./github-light-high-contrast-BfjtVDDH.js"),[]))},{id:"gruvbox-dark-hard",displayName:"Gruvbox Dark Hard",type:"dark",import:(()=>L(()=>import("./gruvbox-dark-hard-CFHQjOhq.js"),[]))},{id:"gruvbox-dark-medium",displayName:"Gruvbox Dark Medium",type:"dark",import:(()=>L(()=>import("./gruvbox-dark-medium-GsRaNv29.js"),[]))},{id:"gruvbox-dark-soft",displayName:"Gruvbox Dark Soft",type:"dark",import:(()=>L(()=>import("./gruvbox-dark-soft-CVdnzihN.js"),[]))},{id:"gruvbox-light-hard",displayName:"Gruvbox Light Hard",type:"light",import:(()=>L(()=>import("./gruvbox-light-hard-CH1njM8p.js"),[]))},{id:"gruvbox-light-medium",displayName:"Gruvbox Light Medium",type:"light",import:(()=>L(()=>import("./gruvbox-light-medium-DRw_LuNl.js"),[]))},{id:"gruvbox-light-soft",displayName:"Gruvbox Light Soft",type:"light",import:(()=>L(()=>import("./gruvbox-light-soft-hJgmCMqR.js"),[]))},{id:"houston",displayName:"Houston",type:"dark",import:(()=>L(()=>import("./houston-DnULxvSX.js"),[]))},{id:"kanagawa-dragon",displayName:"Kanagawa Dragon",type:"dark",import:(()=>L(()=>import("./kanagawa-dragon-CkXjmgJE.js"),[]))},{id:"kanagawa-lotus",displayName:"Kanagawa Lotus",type:"light",import:(()=>L(()=>import("./kanagawa-lotus-CfQXZHmo.js"),[]))},{id:"kanagawa-wave",displayName:"Kanagawa Wave",type:"dark",import:(()=>L(()=>import("./kanagawa-wave-DWedfzmr.js"),[]))},{id:"laserwave",displayName:"LaserWave",type:"dark",import:(()=>L(()=>import("./laserwave-DUszq2jm.js"),[]))},{id:"light-plus",displayName:"Light Plus",type:"light",import:(()=>L(()=>import("./light-plus-B7mTdjB0.js"),[]))},{id:"material-theme",displayName:"Material Theme",type:"dark",import:(()=>L(()=>import("./material-theme-D5KoaKCx.js"),[]))},{id:"material-theme-darker",displayName:"Material Theme Darker",type:"dark",import:(()=>L(()=>import("./material-theme-darker-BfHTSMKl.js"),[]))},{id:"material-theme-lighter",displayName:"Material Theme Lighter",type:"light",import:(()=>L(()=>import("./material-theme-lighter-B0m2ddpp.js"),[]))},{id:"material-theme-ocean",displayName:"Material Theme Ocean",type:"dark",import:(()=>L(()=>import("./material-theme-ocean-CyktbL80.js"),[]))},{id:"material-theme-palenight",displayName:"Material Theme Palenight",type:"dark",import:(()=>L(()=>import("./material-theme-palenight-Csfq5Kiy.js"),[]))},{id:"min-dark",displayName:"Min Dark",type:"dark",import:(()=>L(()=>import("./min-dark-CafNBF8u.js"),[]))},{id:"min-light",displayName:"Min Light",type:"light",import:(()=>L(()=>import("./min-light-CTRr51gU.js"),[]))},{id:"monokai",displayName:"Monokai",type:"dark",import:(()=>L(()=>import("./monokai-D4h5O-jR.js"),[]))},{id:"night-owl",displayName:"Night Owl",type:"dark",import:(()=>L(()=>import("./night-owl-C39BiMTA.js"),[]))},{id:"nord",displayName:"Nord",type:"dark",import:(()=>L(()=>import("./nord-Ddv68eIx.js"),[]))},{id:"one-dark-pro",displayName:"One Dark Pro",type:"dark",import:(()=>L(()=>import("./one-dark-pro-DVMEJ2y_.js"),[]))},{id:"one-light",displayName:"One Light",type:"light",import:(()=>L(()=>import("./one-light-PoHY5YXO.js"),[]))},{id:"plastic",displayName:"Plastic",type:"dark",import:(()=>L(()=>import("./plastic-3e1v2bzS.js"),[]))},{id:"poimandres",displayName:"Poimandres",type:"dark",import:(()=>L(()=>import("./poimandres-CS3Unz2-.js"),[]))},{id:"red",displayName:"Red",type:"dark",import:(()=>L(()=>import("./red-bN70gL4F.js"),[]))},{id:"rose-pine",displayName:"Ros Pine",type:"dark",import:(()=>L(()=>import("./rose-pine-qdsjHGoJ.js"),[]))},{id:"rose-pine-dawn",displayName:"Ros Pine Dawn",type:"light",import:(()=>L(()=>import("./rose-pine-dawn-DHQR4-dF.js"),[]))},{id:"rose-pine-moon",displayName:"Ros Pine Moon",type:"dark",import:(()=>L(()=>import("./rose-pine-moon-D4_iv3hh.js"),[]))},{id:"slack-dark",displayName:"Slack Dark",type:"dark",import:(()=>L(()=>import("./slack-dark-BthQWCQV.js"),[]))},{id:"slack-ochin",displayName:"Slack Ochin",type:"light",import:(()=>L(()=>import("./slack-ochin-DqwNpetd.js"),[]))},{id:"snazzy-light",displayName:"Snazzy Light",type:"light",import:(()=>L(()=>import("./snazzy-light-Bw305WKR.js"),[]))},{id:"solarized-dark",displayName:"Solarized Dark",type:"dark",import:(()=>L(()=>import("./solarized-dark-DXbdFlpD.js"),[]))},{id:"solarized-light",displayName:"Solarized Light",type:"light",import:(()=>L(()=>import("./solarized-light-L9t79GZl.js"),[]))},{id:"synthwave-84",displayName:"Synthwave '84",type:"dark",import:(()=>L(()=>import("./synthwave-84-CbfX1IO0.js"),[]))},{id:"tokyo-night",displayName:"Tokyo Night",type:"dark",import:(()=>L(()=>import("./tokyo-night-hegEt444.js"),[]))},{id:"vesper",displayName:"Vesper",type:"dark",import:(()=>L(()=>import("./vesper-DU1UobuO.js"),[]))},{id:"vitesse-black",displayName:"Vitesse Black",type:"dark",import:(()=>L(()=>import("./vitesse-black-Bkuqu6BP.js"),[]))},{id:"vitesse-dark",displayName:"Vitesse Dark",type:"dark",import:(()=>L(()=>import("./vitesse-dark-D0r3Knsf.js"),[]))},{id:"vitesse-light",displayName:"Vitesse Light",type:"light",import:(()=>L(()=>import("./vitesse-light-CVO1_9PV.js"),[]))}],b5=Object.fromEntries(_5.map(t=>[t.id,t.import]));class Dy extends Error{constructor(e){super(e),this.name="ShikiError"}}function v5(){return 2147483648}function x5(){return typeof performance<"u"?performance.now():Date.now()}const w5=(t,e)=>t+(e-t%e)%e;async function S5(t){let e,n;const r={};function s(g){n=g,r.HEAPU8=new Uint8Array(g),r.HEAPU32=new Uint32Array(g)}function a(g,v,x){r.HEAPU8.copyWithin(g,v,v+x)}function l(g){try{return e.grow(g-n.byteLength+65535>>>16),s(e.buffer),1}catch{}}function u(g){const v=r.HEAPU8.length;g=g>>>0;const x=v5();if(g>x)return!1;for(let E=1;E<=4;E*=2){let k=v*(1+.2/E);k=Math.min(k,g+100663296);const T=Math.min(x,w5(Math.max(g,k),65536));if(l(T))return!0}return!1}const f=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function h(g,v,x=1024){const E=v+x;let k=v;for(;g[k]&&!(k>=E);)++k;if(k-v>16&&g.buffer&&f)return f.decode(g.subarray(v,k));let T="";for(;v<k;){let C=g[v++];if(!(C&128)){T+=String.fromCharCode(C);continue}const j=g[v++]&63;if((C&224)===192){T+=String.fromCharCode((C&31)<<6|j);continue}const D=g[v++]&63;if((C&240)===224?C=(C&15)<<12|j<<6|D:C=(C&7)<<18|j<<12|D<<6|g[v++]&63,C<65536)T+=String.fromCharCode(C);else{const I=C-65536;T+=String.fromCharCode(55296|I>>10,56320|I&1023)}}return T}function m(g,v){return g?h(r.HEAPU8,g,v):""}const p={emscripten_get_now:x5,emscripten_memcpy_big:a,emscripten_resize_heap:u,fd_write:()=>0};async function _(){const v=await t({env:p,wasi_snapshot_preview1:p});e=v.memory,s(e.buffer),Object.assign(r,v),r.UTF8ToString=m}return await _(),r}var k5=Object.defineProperty,E5=(t,e,n)=>e in t?k5(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ht=(t,e,n)=>E5(t,typeof e!="symbol"?e+"":e,n);let Wt=null;function C5(t){throw new Dy(t.UTF8ToString(t.getLastOnigError()))}class ah{constructor(e){Ht(this,"utf16Length"),Ht(this,"utf8Length"),Ht(this,"utf16Value"),Ht(this,"utf8Value"),Ht(this,"utf16OffsetToUtf8"),Ht(this,"utf8OffsetToUtf16");const n=e.length,r=ah._utf8ByteLength(e),s=r!==n,a=s?new Uint32Array(n+1):null;s&&(a[n]=r);const l=s?new Uint32Array(r+1):null;s&&(l[r]=n);const u=new Uint8Array(r);let f=0;for(let h=0;h<n;h++){const m=e.charCodeAt(h);let p=m,_=!1;if(m>=55296&&m<=56319&&h+1<n){const g=e.charCodeAt(h+1);g>=56320&&g<=57343&&(p=(m-55296<<10)+65536|g-56320,_=!0)}s&&(a[h]=f,_&&(a[h+1]=f),p<=127?l[f+0]=h:p<=2047?(l[f+0]=h,l[f+1]=h):p<=65535?(l[f+0]=h,l[f+1]=h,l[f+2]=h):(l[f+0]=h,l[f+1]=h,l[f+2]=h,l[f+3]=h)),p<=127?u[f++]=p:p<=2047?(u[f++]=192|(p&1984)>>>6,u[f++]=128|(p&63)>>>0):p<=65535?(u[f++]=224|(p&61440)>>>12,u[f++]=128|(p&4032)>>>6,u[f++]=128|(p&63)>>>0):(u[f++]=240|(p&1835008)>>>18,u[f++]=128|(p&258048)>>>12,u[f++]=128|(p&4032)>>>6,u[f++]=128|(p&63)>>>0),_&&h++}this.utf16Length=n,this.utf8Length=r,this.utf16Value=e,this.utf8Value=u,this.utf16OffsetToUtf8=a,this.utf8OffsetToUtf16=l}static _utf8ByteLength(e){let n=0;for(let r=0,s=e.length;r<s;r++){const a=e.charCodeAt(r);let l=a,u=!1;if(a>=55296&&a<=56319&&r+1<s){const f=e.charCodeAt(r+1);f>=56320&&f<=57343&&(l=(a-55296<<10)+65536|f-56320,u=!0)}l<=127?n+=1:l<=2047?n+=2:l<=65535?n+=3:n+=4,u&&r++}return n}createString(e){const n=e.omalloc(this.utf8Length);return e.HEAPU8.set(this.utf8Value,n),n}}const oh=class zr{constructor(e){if(Ht(this,"id",++zr.LAST_ID),Ht(this,"_onigBinding"),Ht(this,"content"),Ht(this,"utf16Length"),Ht(this,"utf8Length"),Ht(this,"utf16OffsetToUtf8"),Ht(this,"utf8OffsetToUtf16"),Ht(this,"ptr"),!Wt)throw new Dy("Must invoke loadWasm first.");this._onigBinding=Wt,this.content=e;const n=new ah(e);this.utf16Length=n.utf16Length,this.utf8Length=n.utf8Length,this.utf16OffsetToUtf8=n.utf16OffsetToUtf8,this.utf8OffsetToUtf16=n.utf8OffsetToUtf16,this.utf8Length<1e4&&!zr._sharedPtrInUse?(zr._sharedPtr||(zr._sharedPtr=Wt.omalloc(1e4)),zr._sharedPtrInUse=!0,Wt.HEAPU8.set(n.utf8Value,zr._sharedPtr),this.ptr=zr._sharedPtr):this.ptr=n.createString(Wt)}convertUtf8OffsetToUtf16(e){return this.utf8OffsetToUtf16?e<0?0:e>this.utf8Length?this.utf16Length:this.utf8OffsetToUtf16[e]:e}convertUtf16OffsetToUtf8(e){return this.utf16OffsetToUtf8?e<0?0:e>this.utf16Length?this.utf8Length:this.utf16OffsetToUtf8[e]:e}dispose(){this.ptr===zr._sharedPtr?zr._sharedPtrInUse=!1:this._onigBinding.ofree(this.ptr)}};Ht(oh,"LAST_ID",0);Ht(oh,"_sharedPtr",0);Ht(oh,"_sharedPtrInUse",!1);let EE=oh;class T5{constructor(e){if(Ht(this,"_onigBinding"),Ht(this,"_ptr"),!Wt)throw new Dy("Must invoke loadWasm first.");const n=[],r=[];for(let u=0,f=e.length;u<f;u++){const h=new ah(e[u]);n[u]=h.createString(Wt),r[u]=h.utf8Length}const s=Wt.omalloc(4*e.length);Wt.HEAPU32.set(n,s/4);const a=Wt.omalloc(4*e.length);Wt.HEAPU32.set(r,a/4);const l=Wt.createOnigScanner(s,a,e.length);for(let u=0,f=e.length;u<f;u++)Wt.ofree(n[u]);Wt.ofree(a),Wt.ofree(s),l===0&&C5(Wt),this._onigBinding=Wt,this._ptr=l}dispose(){this._onigBinding.freeOnigScanner(this._ptr)}findNextMatchSync(e,n,r){let s=0;if(typeof r=="number"&&(s=r),typeof e=="string"){e=new EE(e);const a=this._findNextMatchSync(e,n,!1,s);return e.dispose(),a}return this._findNextMatchSync(e,n,!1,s)}_findNextMatchSync(e,n,r,s){const a=this._onigBinding,l=a.findNextOnigScannerMatch(this._ptr,e.id,e.ptr,e.utf8Length,e.convertUtf16OffsetToUtf8(n),s);if(l===0)return null;const u=a.HEAPU32;let f=l/4;const h=u[f++],m=u[f++],p=[];for(let _=0;_<m;_++){const g=e.convertUtf8OffsetToUtf16(u[f++]),v=e.convertUtf8OffsetToUtf16(u[f++]);p[_]={start:g,end:v,length:v-g}}return{index:h,captureIndices:p}}}function A5(t){return typeof t.instantiator=="function"}function R5(t){return typeof t.default=="function"}function O5(t){return typeof t.data<"u"}function I5(t){return typeof Response<"u"&&t instanceof Response}function N5(t){return typeof ArrayBuffer<"u"&&(t instanceof ArrayBuffer||ArrayBuffer.isView(t))||typeof Buffer<"u"&&Buffer.isBuffer?.(t)||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer||typeof Uint32Array<"u"&&t instanceof Uint32Array}let Au;function M5(t){if(Au)return Au;async function e(){Wt=await S5(async n=>{let r=t;return r=await r,typeof r=="function"&&(r=await r(n)),typeof r=="function"&&(r=await r(n)),A5(r)?r=await r.instantiator(n):R5(r)?r=await r.default(n):(O5(r)&&(r=r.data),I5(r)?typeof WebAssembly.instantiateStreaming=="function"?r=await D5(r)(n):r=await L5(r)(n):N5(r)?r=await fm(r)(n):r instanceof WebAssembly.Module?r=await fm(r)(n):"default"in r&&r.default instanceof WebAssembly.Module&&(r=await fm(r.default)(n))),"instance"in r&&(r=r.instance),"exports"in r&&(r=r.exports),r})}return Au=e(),Au}function fm(t){return e=>WebAssembly.instantiate(t,e)}function D5(t){return e=>WebAssembly.instantiateStreaming(t,e)}function L5(t){return async e=>{const n=await t.arrayBuffer();return WebAssembly.instantiate(n,e)}}async function z5(t){return t&&await M5(t),{createScanner(e){return new T5(e.map(n=>typeof n=="string"?n:n.source))},createString(e){return new EE(e)}}}const j5=h5({langs:y5,themes:b5,engine:()=>z5(L(()=>import("./wasm-CG6Dc4jp.js"),[]))}),{codeToHtml:CE}=p5(j5,{guessEmbeddedLanguages:Tj});function P5(){const t=$e.c(2),[e,n]=Z.useState(B5);let r,s;return t[0]===Symbol.for("react.memo_cache_sentinel")?(r=()=>{const a=window.matchMedia("(prefers-color-scheme: dark)"),l=u=>n(u.matches);return a.addEventListener("change",l),()=>a.removeEventListener("change",l)},s=[],t[0]=r,t[1]=s):(r=t[0],s=t[1]),Z.useEffect(r,s),e}function B5(){return window.matchMedia("(prefers-color-scheme: dark)").matches}function lh(t,e){const[n,r]=Z.useState(""),s=P5();return Z.useEffect(()=>{let a=!1;return(async()=>{if(!t){a||r("");return}try{if(e==="text"){const f=t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");a||r(`<pre><code>${f}</code></pre>`);return}const u=await CE(t,{lang:e,theme:s?"github-dark":"github-light"});a||r(u)}catch{const u=t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");a||r(`<pre><code>${u}</code></pre>`)}})(),()=>{a=!0}},[t,e,s]),n}const ch="text-xs [&_pre]:bg-transparent! [&_pre]:p-0! [&_pre]:m-0! [&_pre]:overflow-visible! [&_code]:bg-transparent! [&_code]:block!";function U5(t){try{const e=JSON.parse(t);return JSON.stringify(e,null,2)}catch{return t}}function Ly(t){const e=$e.c(5),{content:n}=t,[r,s]=Z.useState("");let a,l;e[0]!==n?(a=()=>{let h=!1;return n.text().then(m=>{h||s(U5(m))}),()=>{h=!0}},l=[n],e[0]=n,e[1]=a,e[2]=l):(a=e[1],l=e[2]),Z.useEffect(a,l);const u=lh(r,"json");let f;return e[3]!==u?(f=w.jsx("div",{className:ch,dangerouslySetInnerHTML:{__html:u}}),e[3]=u,e[4]=f):f=e[4],f}function $5(t){try{const n=/(>)(<)(\/*)/g,r=t.replace(n,`$1
$2$3`);let s=0;return r.split(`
`).map(a=>{let l=0;a.match(/.+<\/\w[^>]*>$/)?l=0:a.match(/^<\/\w/)&&s>0?s-=1:a.match(/^<\w[^>]*[^/]>.*$/)?l=1:l=0;const u="  ".repeat(s);return s+=l,u+a}).join(`
`)}catch{return t}}function q5(t){const e=$e.c(5),{content:n}=t,[r,s]=Z.useState("");let a,l;e[0]!==n?(a=()=>{let h=!1;return n.text().then(m=>{h||s($5(m))}),()=>{h=!0}},l=[n],e[0]=n,e[1]=a,e[2]=l):(a=e[1],l=e[2]),Z.useEffect(a,l);const u=lh(r,"xml");let f;return e[3]!==u?(f=w.jsx("div",{className:ch,dangerouslySetInnerHTML:{__html:u}}),e[3]=u,e[4]=f):f=e[4],f}function F5(t){const e=$e.c(5),{content:n}=t,[r,s]=Z.useState("");let a,l;e[0]!==n?(a=()=>{let h=!1;return n.text().then(m=>{h||s(m)}),()=>{h=!0}},l=[n],e[0]=n,e[1]=a,e[2]=l):(a=e[1],l=e[2]),Z.useEffect(a,l);const u=lh(r,"yaml");let f;return e[3]!==u?(f=w.jsx("div",{className:ch,dangerouslySetInnerHTML:{__html:u}}),e[3]=u,e[4]=f):f=e[4],f}function Sg(t){const e=$e.c(5),{content:n}=t,[r,s]=Z.useState("");let a,l;e[0]!==n?(a=()=>{n.text().then(s)},l=[n],e[0]=n,e[1]=a,e[2]=l):(a=e[1],l=e[2]),Z.useEffect(a,l);let u;return e[3]!==r?(u=w.jsx("pre",{className:"text-xs font-mono text-neutral-700 dark:text-neutral-200 whitespace-pre-wrap",children:r}),e[3]=r,e[4]=u):u=e[4],u}function V5(t){const e=$e.c(6),{content:n}=t,r=H5;let s;e[0]===Symbol.for("react.memo_cache_sentinel")?(s=w.jsx("div",{className:"text-neutral-500 dark:text-neutral-400 text-sm",children:"Binary content"}),e[0]=s):s=e[0];const a=r(n.size);let l;e[1]!==a?(l=w.jsx("div",{className:"text-2xl font-semibold text-neutral-700 dark:text-neutral-200",children:a}),e[1]=a,e[2]=l):l=e[2];let u;e[3]===Symbol.for("react.memo_cache_sentinel")?(u=w.jsx("div",{className:"text-xs text-neutral-400 dark:text-neutral-500",children:"Cannot preview binary data"}),e[3]=u):u=e[3];let f;return e[4]!==l?(f=w.jsx("div",{className:"flex flex-col items-center justify-center p-12 bg-neutral-100 dark:bg-white/5 rounded-lg border border-neutral-200 dark:border-white/10",children:w.jsxs("div",{className:"text-center space-y-2",children:[s,l,u]})}),e[4]=l,e[5]=f):f=e[5],f}function H5(t){return t<1024?`${t} B`:t<1048576?`${(t/1024).toFixed(2)} KB`:`${(t/1048576).toFixed(2)} MB`}function G5(t){const e=$e.c(4),{content:n}=t;let r;e[0]!==n?(r=URL.createObjectURL(n),e[0]=n,e[1]=r):r=e[1];const s=r;let a;return e[2]!==s?(a=w.jsx("div",{className:"h-full",children:w.jsx("img",{src:s,alt:"Response",className:"max-w-full max-h-full object-contain"})}),e[2]=s,e[3]=a):a=e[3],a}function K5(){const t=$e.c(2),[e,n]=Z.useState(Z5);let r,s;return t[0]===Symbol.for("react.memo_cache_sentinel")?(r=()=>{const a=window.matchMedia("(prefers-color-scheme: dark)"),l=u=>n(u.matches);return a.addEventListener("change",l),()=>a.removeEventListener("change",l)},s=[],t[0]=r,t[1]=s):(r=t[0],s=t[1]),Z.useEffect(r,s),e}function Z5(){return window.matchMedia("(prefers-color-scheme: dark)").matches}function Q5(t){const e=[],n=t.split(/\n\n+/);for(const r of n){if(!r.trim())continue;const s={data:"",raw:r},a=r.split(`
`);for(const l of a)l.startsWith("id:")?s.id=l.slice(3).trim():l.startsWith("event:")?s.event=l.slice(6).trim():l.startsWith("data:")?s.data+=(s.data?`
`:"")+l.slice(5).trim():l.startsWith("retry:")&&(s.retry=parseInt(l.slice(6).trim(),10));(s.data||s.event||s.id)&&e.push(s)}return e}function J5(t){try{return JSON.parse(t)}catch{return null}}function Y5({event:t,index:e,prefersDark:n}){const[r,s]=Z.useState(!0),[a,l]=Z.useState(""),u=Z.useMemo(()=>J5(t.data),[t.data]);return Z.useEffect(()=>{(async()=>{if(u)try{const h=JSON.stringify(u,null,2),m=await CE(h,{lang:"json",theme:n?"github-dark":"github-light"});l(m)}catch{l(`<pre>${JSON.stringify(u,null,2)}</pre>`)}})()},[u,n]),w.jsxs("div",{className:"border border-neutral-200 dark:border-white/10 rounded-lg overflow-hidden",children:[w.jsxs("button",{onClick:()=>s(!r),className:"w-full flex items-center gap-2 px-3 py-2 bg-neutral-50 dark:bg-white/5 hover:bg-neutral-100 dark:hover:bg-white/10 transition-colors",children:[r?w.jsx(zi,{className:"w-4 h-4 text-neutral-400"}):w.jsx(th,{className:"w-4 h-4 text-neutral-400"}),w.jsxs("span",{className:"text-xs font-mono text-neutral-500 dark:text-neutral-400",children:["#",e+1]}),t.event&&w.jsx("span",{className:"px-2 py-0.5 text-xs font-medium bg-blue-100 dark:bg-blue-500/20 text-blue-700 dark:text-blue-300 rounded",children:t.event}),t.id&&w.jsxs("span",{className:"text-xs text-neutral-400 dark:text-neutral-500",children:["id: ",t.id]}),u&&w.jsx("span",{className:"px-1.5 py-0.5 text-[10px] font-medium bg-emerald-100 dark:bg-emerald-500/20 text-emerald-700 dark:text-emerald-300 rounded",children:"JSON"})]}),r&&w.jsx("div",{className:"p-3 bg-white dark:bg-transparent",children:u&&a?w.jsx("div",{className:"text-xs [&_pre]:bg-transparent! [&_pre]:p-0! [&_pre]:m-0! [&_pre]:overflow-visible! [&_code]:bg-transparent! [&_code]:block!",dangerouslySetInnerHTML:{__html:a}}):w.jsx("pre",{className:"text-xs font-mono text-neutral-700 dark:text-neutral-200 whitespace-pre-wrap",children:t.data})})]})}function X5(t){const e=$e.c(17),{content:n}=t;let r;e[0]===Symbol.for("react.memo_cache_sentinel")?(r=[],e[0]=r):r=e[0];const[s,a]=Z.useState(r),[l,u]=Z.useState(""),f=K5();let h,m;if(e[1]!==n?(h=()=>{n.text().then(x=>{u(x),a(Q5(x))})},m=[n],e[1]=n,e[2]=h,e[3]=m):(h=e[2],m=e[3]),Z.useEffect(h,m),s.length===0){let x;return e[4]!==l?(x=w.jsx("pre",{className:"text-xs font-mono text-neutral-700 dark:text-neutral-200 whitespace-pre-wrap",children:l}),e[4]=l,e[5]=x):x=e[5],x}const p=s.length!==1?"s":"";let _;e[6]!==s.length||e[7]!==p?(_=w.jsx("div",{className:"flex items-center gap-2 mb-3",children:w.jsxs("span",{className:"text-xs font-medium text-neutral-500 dark:text-neutral-400",children:[s.length," event",p]})}),e[6]=s.length,e[7]=p,e[8]=_):_=e[8];let g;if(e[9]!==s||e[10]!==f){let x;e[12]!==f?(x=(E,k)=>w.jsx(Y5,{event:E,index:k,prefersDark:f},k),e[12]=f,e[13]=x):x=e[13],g=s.map(x),e[9]=s,e[10]=f,e[11]=g}else g=e[11];let v;return e[14]!==_||e[15]!==g?(v=w.jsxs("div",{className:"space-y-2",children:[_,g]}),e[14]=_,e[15]=g,e[16]=v):v=e[16],v}const W5=["video/","audio/","application/pdf","application/octet-stream","application/zip","application/gzip","application/x-tar","application/x-rar","application/x-7z","application/vnd.ms-","application/vnd.openxmlformats","application/x-executable","application/x-sharedlib","application/x-mach-binary","application/wasm","font/"],eP=["image/png","image/jpeg","image/gif","image/webp","image/svg+xml","image/bmp","image/x-icon","image/ico","image/avif","image/apng"],tP=["text/","application/json","application/xml","application/javascript","application/ecmascript","application/x-javascript","application/ld+json","application/manifest+json","application/schema+json","application/x-www-form-urlencoded","application/xhtml+xml","application/rss+xml","application/atom+xml","application/soap+xml","application/x-yaml","application/yaml","+json","+xml"];function nP(t){const e=t["content-type"]?.toLowerCase()||"";return e.includes("text/event-stream")?"sse":eP.some(n=>e.includes(n))?"image":W5.some(n=>e.includes(n))?"binary":e.includes("json")||e.endsWith("+json")?"json":e.includes("xml")||e.endsWith("+xml")?"xml":e.includes("yaml")||e.includes("yml")?"yaml":(tP.some(n=>e.includes(n)),"text")}function rP(t){const e=$e.c(8),{response:n,viewMode:r}=t,s=r===void 0?"pretty":r;let a;e[0]!==n.headers?(a=nP(n.headers),e[0]=n.headers,e[1]=a):a=e[1];const l=a;let u;e[2]!==l||e[3]!==n.body||e[4]!==s?(u=()=>{if(s==="raw"&&l!=="image"&&l!=="binary")return w.jsx(Sg,{content:n.body});switch(l){case"json":return w.jsx(Ly,{content:n.body});case"xml":return w.jsx(q5,{content:n.body});case"yaml":return w.jsx(F5,{content:n.body});case"sse":return w.jsx(X5,{content:n.body});case"image":return w.jsx(G5,{content:n.body});case"binary":return w.jsx(V5,{content:n.body});default:return w.jsx(Sg,{content:n.body})}},e[2]=l,e[3]=n.body,e[4]=s,e[5]=u):u=e[5];const f=u;let h;return e[6]!==f?(h=w.jsx("div",{className:"h-full flex flex-col overflow-hidden",children:w.jsx("div",{className:"flex-1 min-h-0 overflow-auto",children:f()})}),e[6]=f,e[7]=h):h=e[7],h}let hm=null;async function dm(t){if(hm?.host===t)return hm.data;const e=await fetch(`/proxy/grpc/${t}`);if(!e.ok)throw new Error("Failed to fetch services");const n=await e.json();return hm={host:t,data:n},n}function i1({value:t,onChange:e,placeholder:n,label:r,fetchOptions:s,disabled:a,icon:l}){const[u,f]=Z.useState(!1),[h,m]=Z.useState([]),[p,_]=Z.useState(null),[g,v]=Z.useState(!1),x=Z.useRef(null);Z.useEffect(()=>{const k=T=>{x.current&&!x.current.contains(T.target)&&f(!1)};return document.addEventListener("mousedown",k),()=>document.removeEventListener("mousedown",k)},[]);const E=async()=>{if(!a){f(!0),v(!0),_(null);try{const k=await s();m(k)}catch(k){_(k instanceof Error?k.message:"Failed to fetch"),m([])}finally{v(!1)}}};return w.jsxs("div",{ref:x,className:"relative shrink-0",children:[w.jsxs("button",{type:"button",onClick:E,disabled:a,className:"h-8 px-2 flex items-center gap-2 text-sm transition hover:bg-neutral-50 dark:hover:bg-white/5 disabled:opacity-50 disabled:cursor-not-allowed rounded",children:[l,w.jsx("span",{className:`text-sm whitespace-nowrap ${t?"text-neutral-800 dark:text-neutral-100":"text-neutral-400 dark:text-neutral-500"}`,children:t||n}),g?w.jsx(vf,{className:"w-3.5 h-3.5 animate-spin text-neutral-400 shrink-0"}):w.jsx(zi,{className:`w-3.5 h-3.5 text-neutral-400 shrink-0 transition-transform ${u?"rotate-180":""}`})]}),u&&w.jsx("div",{className:"absolute top-full left-0 mt-1 w-full min-w-48 max-w-md bg-white dark:bg-[#0f0f0f] border border-neutral-200 dark:border-white/10 rounded-lg shadow-xl z-50 overflow-hidden",children:w.jsxs("div",{className:"max-h-64 overflow-y-auto p-1",children:[g&&w.jsxs("div",{className:"px-3 py-4 text-center text-sm text-neutral-500",children:[w.jsx(vf,{className:"w-4 h-4 animate-spin mx-auto mb-1"}),"Loading..."]}),p&&w.jsx("div",{className:"px-3 py-3 text-sm text-red-500",children:p}),!g&&!p&&h.length===0&&w.jsxs("div",{className:"px-3 py-4 text-center text-sm text-neutral-500",children:["No ",r.toLowerCase()," available"]}),!g&&!p&&h.map(k=>w.jsx("button",{type:"button",onClick:()=>{e(k),f(!1)},className:`w-full px-3 py-2 text-left text-sm rounded-md transition-colors ${k===t?"bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-400":"text-neutral-700 dark:text-neutral-300 hover:bg-neutral-50 dark:hover:bg-white/5"}`,children:k},k))]})})]})}function sP(){const{request:t,setUrl:e,setGrpcMethodSchema:n}=rr(),r=t?.url??"",s=x=>{const E=x.match(/^grpc:\/\/([^/]*)(?:\/([^/]*)(?:\/([^/]*))?)?$/);return E?{host:E[1]||"",service:E[2]||"",method:E[3]||""}:{host:"",service:"",method:""}},a=(x,E,k)=>x?E?k?`grpc://${x}/${E}/${k}`:`grpc://${x}/${E}`:`grpc://${x}`:"grpc://",{host:l,service:u,method:f}=s(r),h=x=>{e(a(x,"","")),n(void 0)},m=x=>{e(a(l,x,"")),n(void 0)},p=async x=>{e(a(l,u,x));try{const T=(await dm(l)).services.find(C=>C.name===u)?.methods.find(C=>C.name===x);T?.schema?n(T.schema):n(void 0)}catch{n(void 0)}},_=async()=>l?(await dm(l)).services.map(E=>E.name):[],g=async()=>!l||!u?[]:(await dm(l)).services.find(k=>k.name===u)?.methods.map(k=>k.name)??[],v=Math.max(8,l.length||9);return w.jsxs("div",{className:"flex items-center flex-1 min-w-0",children:[w.jsx("input",{type:"text",value:l,onChange:x=>h(x.target.value),placeholder:"host:port",size:v,className:"min-w-20 max-w-full px-2 py-1.5 text-sm bg-transparent text-neutral-800 dark:text-neutral-100 placeholder-neutral-400 dark:placeholder-neutral-600 focus:outline-none"}),w.jsx("span",{className:"text-neutral-300 dark:text-neutral-600 shrink-0",children:"/"}),w.jsx(i1,{value:u,onChange:m,placeholder:"Select service",label:"Service",fetchOptions:_,disabled:!l,icon:w.jsx(j4,{className:`w-4 h-4 shrink-0 ${u?"text-purple-500":"text-neutral-400"}`})}),w.jsx("span",{className:"text-neutral-300 dark:text-neutral-600",children:"/"}),w.jsx(i1,{value:f,onChange:p,placeholder:"Select method",label:"Method",fetchOptions:g,disabled:!l||!u,icon:w.jsx(DL,{className:`w-4 h-4 shrink-0 ${f?"text-amber-500":"text-neutral-400"}`})})]})}const iP=["grpc-timeout","authorization","x-request-id","x-correlation-id"];function kg(t){if(!t||typeof t!="object")return{};const e=t,r=(Array.isArray(e.type)?e.type[0]:e.type)||(e.properties?"object":e.items?"array":void 0);if(r==="object"){const a={},l=e.properties||{};return Object.keys(l).forEach(u=>{a[u]=kg(l[u])}),a}if(r==="array"){const a=e.items||{type:"string"};return[kg(a)]}const s=e.enum;if(s&&s.length>0)return s[0];switch(r){case"integer":case"number":return 0;case"boolean":return!0;case"string":return e.format==="byte"?"":"string";default:return{}}}function aP(){const[t,e]=Z.useState("body"),{request:n,setGrpcBody:r,setGrpcMetadata:s,setVariables:a}=rr(),l=n?.grpc?.metadata??[],u=n?.grpc?.body??"",f=n?.variables??[],h=n?.grpc?.schema,m=Z.useMemo(()=>{try{return h?kg(h):void 0}catch{return}},[h]),p=[{id:"body",label:"Message"},{id:"headers",label:"Metadata",count:l.filter(_=>_.key).length}];return w.jsxs("div",{className:"space-y-3",children:[w.jsx("div",{className:"flex items-center gap-2",children:w.jsx("div",{role:"tablist",className:"inline-flex gap-1",children:p.map(_=>w.jsxs("button",{role:"tab",onClick:()=>e(_.id),className:`px-2 py-1 text-[11px] font-medium rounded-md transition-all ${t===_.id?"bg-white dark:bg-white/10 text-neutral-800 dark:text-neutral-100 shadow-sm":"text-neutral-500 dark:text-neutral-400 hover:text-neutral-700 dark:hover:text-neutral-200 hover:bg-neutral-100 dark:hover:bg-white/5"}`,children:[_.label,_.count!==void 0&&_.count>0&&w.jsx("span",{className:"ml-1.5 px-1.5 py-0.5 text-[9px] bg-neutral-200 dark:bg-white/10 text-neutral-600 dark:text-neutral-300 rounded-full",children:_.count})]},_.id))})}),w.jsxs("div",{children:[t==="body"&&w.jsx(ky,{value:u,onChange:r,variables:f,onVariablesChange:a,placeholder:m?JSON.stringify(m,null,2):`{
  "field": "value"
}`,action:m!==void 0?{label:"Insert schema",onClick:()=>r(JSON.stringify(m,null,2))}:void 0}),t==="headers"&&w.jsxs("div",{className:"space-y-2",children:[w.jsx("p",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:"gRPC metadata (sent as headers)"}),w.jsx(xl,{items:l,onChange:s,keyPlaceholder:"Key",valuePlaceholder:"Value",keySuggestions:iP})]})]})]})}function oP(t){const e=$e.c(3),{response:n,viewMode:r}=t,s=r===void 0?"pretty":r;let a;return e[0]!==n.body||e[1]!==s?(a=w.jsx("div",{className:"h-full flex flex-col overflow-hidden",children:w.jsx("div",{className:"flex-1 min-h-0 overflow-auto",children:s==="pretty"?w.jsx(Ly,{content:n.body}):w.jsx(Sg,{content:n.body})})}),e[0]=n.body,e[1]=s,e[2]=a):a=e[2],a}function a1(t){const e=$e.c(27),{feature:n,type:r,isSelected:s,onSelect:a}=t,[l,u]=Z.useState(!1);let f;e[0]!==n.schema?(f=n.schema&&Object.keys(n.schema).length>0,e[0]=n.schema,e[1]=f):f=e[1];const h=f,m=`border rounded-md ${s?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-neutral-200 dark:border-white/10"}`;let p;e[2]!==r?(p=r==="tool"?w.jsx(xf,{className:"w-4 h-4 text-amber-500 shrink-0"}):w.jsx(Jl,{className:"w-4 h-4 text-blue-500 shrink-0"}),e[2]=r,e[3]=p):p=e[3];let _;e[4]!==n.name?(_=w.jsx("div",{className:"font-medium text-sm truncate",children:n.name}),e[4]=n.name,e[5]=_):_=e[5];let g;e[6]!==n.description?(g=n.description&&w.jsx("div",{className:"text-xs text-neutral-500 dark:text-neutral-400 truncate",children:n.description}),e[6]=n.description,e[7]=g):g=e[7];let v;e[8]!==_||e[9]!==g?(v=w.jsxs("div",{className:"flex-1 min-w-0",children:[_,g]}),e[8]=_,e[9]=g,e[10]=v):v=e[10];let x;e[11]!==l||e[12]!==h?(x=h&&w.jsx("button",{onClick:C=>{C.stopPropagation(),u(!l)},className:"p-1 hover:bg-neutral-200 dark:hover:bg-white/10 rounded",children:l?w.jsx(zi,{className:"w-4 h-4"}):w.jsx(th,{className:"w-4 h-4"})}),e[11]=l,e[12]=h,e[13]=x):x=e[13];let E;e[14]!==a||e[15]!==p||e[16]!==v||e[17]!==x?(E=w.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 cursor-pointer hover:bg-neutral-50 dark:hover:bg-white/5",onClick:a,children:[p,v,x]}),e[14]=a,e[15]=p,e[16]=v,e[17]=x,e[18]=E):E=e[18];let k;e[19]!==l||e[20]!==n.schema||e[21]!==h?(k=l&&h&&w.jsx("div",{className:"px-3 pb-2 border-t border-neutral-200 dark:border-white/10",children:w.jsx("pre",{className:"text-xs bg-neutral-100 dark:bg-black/20 p-2 rounded mt-2 overflow-auto max-h-48",children:JSON.stringify(n.schema,null,2)})}),e[19]=l,e[20]=n.schema,e[21]=h,e[22]=k):k=e[22];let T;return e[23]!==m||e[24]!==E||e[25]!==k?(T=w.jsxs("div",{className:m,children:[E,k]}),e[23]=m,e[24]=E,e[25]=k,e[26]=T):T=e[26],T}function lP({onSelected:t}){const{request:e,discoverMcpFeatures:n,setMcpTool:r,setMcpResource:s}=rr(),[a,l]=Z.useState("tools"),[u,f]=Z.useState(null),[h,m]=Z.useState(!1),p=u?.tools||[],_=u?.resources||[],g=u?.error,v=async()=>{m(!0);try{const x=await n();x&&f(x)}finally{m(!1)}};return u?g?w.jsxs("div",{className:"p-4 text-center",children:[w.jsx("p",{className:"text-sm text-red-500 dark:text-red-400 mb-4",children:g}),w.jsxs("button",{onClick:v,disabled:!e.url||h,className:"inline-flex items-center gap-2 px-3 py-1.5 text-sm rounded-md border border-neutral-200 dark:border-white/10 text-neutral-700 dark:text-neutral-100 hover:bg-neutral-50 dark:hover:bg-white/10 disabled:opacity-50 disabled:cursor-not-allowed",children:[w.jsx(Nw,{className:"w-4 h-4"}),"Retry"]})]}):w.jsxs("div",{className:"flex flex-col h-full",children:[w.jsxs("div",{className:"flex border-b border-neutral-200 dark:border-white/10 shrink-0",children:[w.jsxs("button",{onClick:()=>l("tools"),className:`flex items-center gap-1.5 px-4 py-2 text-sm font-medium border-b-2 transition-colors ${a==="tools"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-neutral-500 hover:text-neutral-700 dark:text-neutral-400 dark:hover:text-neutral-200"}`,children:[w.jsx(xf,{className:"w-4 h-4"}),"Tools (",p.length,")"]}),w.jsxs("button",{onClick:()=>l("resources"),className:`flex items-center gap-1.5 px-4 py-2 text-sm font-medium border-b-2 transition-colors ${a==="resources"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-neutral-500 hover:text-neutral-700 dark:text-neutral-400 dark:hover:text-neutral-200"}`,children:[w.jsx(Jl,{className:"w-4 h-4"}),"Resources (",_.length,")"]}),w.jsx("div",{className:"flex-1"}),w.jsx("button",{onClick:v,disabled:h,className:"p-2 text-neutral-500 hover:text-neutral-700 dark:text-neutral-400 dark:hover:text-neutral-200 disabled:opacity-40",title:"Refresh features",children:w.jsx(Nw,{className:"w-4 h-4"})})]}),w.jsxs("div",{className:"flex-1 overflow-auto p-2 space-y-2",children:[a==="tools"&&w.jsx(w.Fragment,{children:p.length===0?w.jsx("p",{className:"text-sm text-neutral-500 dark:text-neutral-400 text-center py-4",children:"No tools available"}):p.map(x=>w.jsx(a1,{feature:x,type:"tool",isSelected:e.mcp?.tool?.name===x.name,onSelect:()=>{r({name:x.name,arguments:"{}"}),t?.()}},x.name))}),a==="resources"&&w.jsx(w.Fragment,{children:_.length===0?w.jsx("p",{className:"text-sm text-neutral-500 dark:text-neutral-400 text-center py-4",children:"No resources available"}):_.map(x=>w.jsx(a1,{feature:x,type:"resource",isSelected:e.mcp?.resource?.uri===(x.schema?.uri||x.name),onSelect:()=>{const E=x.schema?.uri||x.name;s({uri:E}),t?.()}},x.name))})]}),(e.mcp?.tool||e.mcp?.resource)&&w.jsx("div",{className:"border-t border-neutral-200 dark:border-white/10 p-2 shrink-0",children:w.jsxs("div",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:["Selected: ",e.mcp?.tool?`Tool: ${e.mcp.tool.name}`:`Resource: ${e.mcp?.resource?.uri}`]})})]}):w.jsxs("div",{className:"p-4 text-center",children:[w.jsx("p",{className:"text-sm text-neutral-500 dark:text-neutral-400 mb-4",children:"Enter an MCP server URL and discover its features"}),w.jsxs("button",{onClick:v,disabled:!e.url||h,className:"inline-flex items-center gap-2 px-3 py-1.5 text-sm rounded-md border border-neutral-200 dark:border-white/10 text-neutral-700 dark:text-neutral-100 hover:bg-neutral-50 dark:hover:bg-white/10 disabled:opacity-50 disabled:cursor-not-allowed",children:[w.jsx(mL,{className:"w-4 h-4"}),"Discover"]})]})}function cP(){const t=$e.c(32),{request:e,setUrl:n}=rr(),r=e?.url??"",s=e?.mcp?.tool?.name,a=e?.mcp?.resource?.uri,[l,u]=Z.useState(!1),f=Z.useRef(null);let h,m;t[0]!==l?(h=()=>{if(!l)return;const ne=me=>{f.current&&!f.current.contains(me.target)&&u(!1)};return document.addEventListener("mousedown",ne),()=>document.removeEventListener("mousedown",ne)},m=[l],t[0]=l,t[1]=h,t[2]=m):(h=t[1],m=t[2]),Z.useEffect(h,m);let p;t[3]===Symbol.for("react.memo_cache_sentinel")?(p=()=>{u(!0)},t[3]=p):p=t[3];const _=p,g=s||a||"Select feature",v=Math.max(12,r.length||14);let x;t[4]!==n?(x=ne=>n(ne.target.value),t[4]=n,t[5]=x):x=t[5];let E;t[6]!==x||t[7]!==r||t[8]!==v?(E=w.jsx("input",{type:"text",value:r,onChange:x,placeholder:"MCP server URL",size:v,className:"min-w-24 max-w-full px-2 py-1.5 bg-transparent text-neutral-800 dark:text-neutral-100 text-sm placeholder-neutral-400 dark:placeholder-neutral-600 focus:outline-none"}),t[6]=x,t[7]=r,t[8]=v,t[9]=E):E=t[9];let k;t[10]===Symbol.for("react.memo_cache_sentinel")?(k=w.jsx("span",{className:"text-neutral-300 dark:text-neutral-600 shrink-0",children:"/"}),t[10]=k):k=t[10];const T=!r;let C;t[11]!==a||t[12]!==s?(C=s?w.jsx(xf,{className:"w-4 h-4 text-amber-500 shrink-0"}):a?w.jsx(Jl,{className:"w-4 h-4 text-blue-500 shrink-0"}):w.jsx(xf,{className:"w-4 h-4 text-neutral-400 shrink-0"}),t[11]=a,t[12]=s,t[13]=C):C=t[13];const j=`text-sm whitespace-nowrap ${s||a?"text-neutral-800 dark:text-neutral-100":"text-neutral-400 dark:text-neutral-500"}`;let D;t[14]!==g||t[15]!==j?(D=w.jsx("span",{className:j,children:g}),t[14]=g,t[15]=j,t[16]=D):D=t[16];const I=`w-3.5 h-3.5 text-neutral-400 shrink-0 transition-transform ${l?"rotate-180":""}`;let U;t[17]!==I?(U=w.jsx(zi,{className:I}),t[17]=I,t[18]=U):U=t[18];let V;t[19]!==U||t[20]!==T||t[21]!==C||t[22]!==D?(V=w.jsxs("button",{type:"button",onClick:_,disabled:T,className:"h-8 px-2 flex items-center gap-2 text-sm transition hover:bg-neutral-50 dark:hover:bg-white/5 disabled:opacity-50 disabled:cursor-not-allowed rounded",children:[C,D,U]}),t[19]=U,t[20]=T,t[21]=C,t[22]=D,t[23]=V):V=t[23];let H;t[24]!==l?(H=l&&w.jsx("div",{className:"absolute left-0 z-50 mt-2 w-[min(640px,calc(100vw-4rem))] max-h-[70vh] bg-white dark:bg-[#0f0f0f] border border-neutral-200 dark:border-white/10 rounded-lg shadow-xl overflow-hidden",children:w.jsx("div",{className:"h-105",children:w.jsx(lP,{onSelected:()=>u(!1)})})}),t[24]=l,t[25]=H):H=t[25];let P;t[26]!==V||t[27]!==H?(P=w.jsxs("div",{className:"relative shrink-0",ref:f,children:[V,H]}),t[26]=V,t[27]=H,t[28]=P):P=t[28];let Q;return t[29]!==P||t[30]!==E?(Q=w.jsxs("div",{className:"flex items-center flex-1 min-w-0",children:[E,k,P]}),t[29]=P,t[30]=E,t[31]=Q):Q=t[31],Q}const uP=["Authorization","X-API-Key","X-Request-ID"];function fP(){const t=$e.c(32),[e,n]=Z.useState("body"),{request:r,setMcpTool:s,setMcpHeaders:a,setVariables:l}=rr();let u;t[0]!==r?.variables?(u=r?.variables??[],t[0]=r?.variables,t[1]=u):u=t[1];const f=u;let h;t[2]!==r?.mcp?.headers?(h=r?.mcp?.headers??[],t[2]=r?.mcp?.headers,t[3]=h):h=t[3];const m=h,p=r?.mcp?.tool?.arguments??"{}",_=r?.mcp?.tool,g=r?.mcp?.resource;let v;t[4]!==m?(v=m.filter(hP),t[4]=m,t[5]=v):v=t[5];let x;t[6]!==v.length?(x={id:"headers",label:"Headers",count:v.length},t[6]=v.length,t[7]=x):x=t[7];let E;t[8]===Symbol.for("react.memo_cache_sentinel")?(E={id:"body",label:"Body"},t[8]=E):E=t[8];let k;t[9]!==x?(k=[x,E],t[9]=x,t[10]=k):k=t[10];const T=k;let C;t[11]!==e||t[12]!==T?(C=w.jsx("div",{className:"flex items-center gap-2",children:w.jsx("div",{role:"tablist",className:"inline-flex gap-1",children:T.map(V=>w.jsxs("button",{role:"tab",onClick:()=>n(V.id),className:`px-2 py-1 text-[11px] font-medium rounded-md transition-all ${e===V.id?"bg-white dark:bg-white/10 text-neutral-800 dark:text-neutral-100 shadow-sm":"text-neutral-500 dark:text-neutral-400 hover:text-neutral-700 dark:hover:text-neutral-200 hover:bg-neutral-100 dark:hover:bg-white/5"}`,children:[V.label,V.count!==void 0&&V.count>0&&w.jsx("span",{className:"ml-1.5 px-1.5 py-0.5 text-[9px] bg-neutral-200 dark:bg-white/10 text-neutral-600 dark:text-neutral-300 rounded-full",children:V.count})]},V.id))})}),t[11]=e,t[12]=T,t[13]=C):C=t[13];let j;t[14]!==e||t[15]!==m||t[16]!==a?(j=e==="headers"&&w.jsx(xl,{items:m,onChange:a,keyPlaceholder:"Header",valuePlaceholder:"Value",keySuggestions:uP}),t[14]=e,t[15]=m,t[16]=a,t[17]=j):j=t[17];let D;t[18]!==e||t[19]!==g||t[20]!==_||t[21]!==s||t[22]!==l||t[23]!==p||t[24]!==f?(D=e==="body"&&(_?w.jsx(ky,{value:p,onChange:V=>s({name:_.name,arguments:V}),variables:f,onVariablesChange:l,placeholder:`{
  "key": "value"
}`}):g?w.jsx("div",{className:"py-8 text-center text-sm text-neutral-400 dark:text-neutral-500",children:"Resources are read-only; no arguments required."}):w.jsx("div",{className:"py-8 text-center text-sm text-neutral-400 dark:text-neutral-500",children:"Select a tool or resource from the URL bar."})),t[18]=e,t[19]=g,t[20]=_,t[21]=s,t[22]=l,t[23]=p,t[24]=f,t[25]=D):D=t[25];let I;t[26]!==j||t[27]!==D?(I=w.jsxs("div",{children:[j,D]}),t[26]=j,t[27]=D,t[28]=I):I=t[28];let U;return t[29]!==C||t[30]!==I?(U=w.jsxs("div",{className:"space-y-3",children:[C,I]}),t[29]=C,t[30]=I,t[31]=U):U=t[31],U}function hP(t){return t.key}function zy(t){const e=t.trim();if(e.startsWith("{")&&e.endsWith("}")||e.startsWith("[")&&e.endsWith("]"))try{return JSON.parse(e),"json"}catch{}return e.startsWith("<")&&e.endsWith(">")&&(/<\w+[^>]*>[\s\S]*<\/\w+>/.test(e)||/<\w+[^>]*\/>/.test(e))?"xml":"text"}function dP(t){try{const e=JSON.parse(t);return JSON.stringify(e,null,2)}catch{return t}}function pP(t){try{const n=/(>)(<)(\/*)/g,r=t.replace(n,`$1
$2$3`);let s=0;return r.split(`
`).map(a=>{let l=0;a.match(/.+<\/\w[^>]*>$/)?l=0:a.match(/^<\/\w/)&&s>0?s-=1:a.match(/^<\w[^>]*[^/]>.*$/)?l=1:l=0;const u="  ".repeat(s);return s+=l,u+a}).join(`
`)}catch{return t}}function TE(t){const e=$e.c(10),{type:n,language:r}=t;let s;e[0]!==n?(s=()=>{switch(n){case"text":return w.jsx(AL,{size:12});case"image":return w.jsx(eL,{size:12});case"audio":return w.jsx(iL,{size:12});case"resource":return w.jsx(nL,{size:12});default:return w.jsx(Jl,{size:12})}},e[0]=n,e[1]=s):s=e[1];const a=s;let l;e[2]!==r||e[3]!==n?(l=r&&r!=="text"?r.toUpperCase():n.charAt(0).toUpperCase()+n.slice(1),e[2]=r,e[3]=n,e[4]=l):l=e[4];const u=l;let f;e[5]!==a?(f=a(),e[5]=a,e[6]=f):f=e[6];let h;return e[7]!==u||e[8]!==f?(h=w.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 text-xs font-medium rounded bg-blue-100 dark:bg-blue-500/20 text-blue-700 dark:text-blue-300",children:[f,u]}),e[7]=u,e[8]=f,e[9]=h):h=e[9],h}function Eg(t){const e=$e.c(10),{text:n,className:r}=t,s=r===void 0?"":r;let a;e[0]!==n?(a=zy(n),e[0]=n,e[1]=a):a=e[1];const l=a;let u;e[2]!==l||e[3]!==n?(u=l==="json"?dP(n):l==="xml"?pP(n):n,e[2]=l,e[3]=n,e[4]=u):u=e[4];const h=lh(u,l);let m;e[5]!==h?(m=w.jsx("div",{className:ch,dangerouslySetInnerHTML:{__html:h}}),e[5]=h,e[6]=m):m=e[6];let p;return e[7]!==s||e[8]!==m?(p=w.jsx("div",{className:s,children:m}),e[7]=s,e[8]=m,e[9]=p):p=e[9],p}function mP(t){const e=$e.c(34),{content:n,index:r,isError:s}=t,[a,l]=Z.useState(!0);let u;e[0]!==n.mimeType||e[1]!==n.resource?.uri||e[2]!==n.text||e[3]!==n.type?(u=(()=>{if(n.type==="text"){const D=zy(n.text||"");return{type:"text",language:D,label:D!=="text"?D.toUpperCase():"Text"}}return n.type==="image"?{type:"image",label:"Image",detail:n.mimeType}:n.type==="audio"?{type:"audio",label:"Audio",detail:n.mimeType}:n.type==="resource"?{type:"resource",label:"Resource",detail:n.resource?.uri}:{type:"unknown",label:"Unknown"}})(),e[0]=n.mimeType,e[1]=n.resource?.uri,e[2]=n.text,e[3]=n.type,e[4]=u):u=e[4];const f=u,h=`border rounded-lg overflow-hidden ${s?"border-red-200 dark:border-red-800/50":"border-neutral-200 dark:border-white/10"}`;let m;e[5]!==a?(m=()=>l(!a),e[5]=a,e[6]=m):m=e[6];const p=`w-full flex items-center gap-2 px-3 py-2 transition-colors ${s?"bg-red-50/50 dark:bg-red-900/10 hover:bg-red-100/50 dark:hover:bg-red-900/20":"bg-neutral-50 dark:bg-white/5 hover:bg-neutral-100 dark:hover:bg-white/10"}`;let _;e[7]!==a?(_=a?w.jsx(zi,{className:"w-4 h-4 text-neutral-400"}):w.jsx(th,{className:"w-4 h-4 text-neutral-400"}),e[7]=a,e[8]=_):_=e[8];const g=r+1;let v;e[9]!==g?(v=w.jsxs("span",{className:"text-xs font-mono text-neutral-500 dark:text-neutral-400",children:["#",g]}),e[9]=g,e[10]=v):v=e[10];let x;e[11]!==f.language||e[12]!==f.type?(x=w.jsx(TE,{type:f.type,language:f.language}),e[11]=f.language,e[12]=f.type,e[13]=x):x=e[13];let E;e[14]!==f.detail?(E=f.detail&&w.jsx("span",{className:"text-xs text-neutral-500 dark:text-neutral-400 font-mono truncate",children:f.detail}),e[14]=f.detail,e[15]=E):E=e[15];let k;e[16]!==m||e[17]!==p||e[18]!==_||e[19]!==v||e[20]!==x||e[21]!==E?(k=w.jsxs("button",{onClick:m,className:p,children:[_,v,x,E]}),e[16]=m,e[17]=p,e[18]=_,e[19]=v,e[20]=x,e[21]=E,e[22]=k):k=e[22];let T;e[23]!==n.data||e[24]!==n.mimeType||e[25]!==n.resource||e[26]!==n.text||e[27]!==n.type||e[28]!==a?(T=a&&w.jsxs("div",{className:"p-3 bg-white dark:bg-transparent",children:[n.type==="text"&&n.text&&w.jsx(Eg,{text:n.text}),n.type==="image"&&n.data&&w.jsx("img",{src:n.data.startsWith("data:")?n.data:`data:${n.mimeType||"image/png"};base64,${n.data}`,alt:"MCP Image Response",className:"max-w-full h-auto rounded"}),n.type==="audio"&&n.data&&w.jsx("audio",{controls:!0,className:"w-full",children:w.jsx("source",{src:n.data.startsWith("data:")?n.data:`data:${n.mimeType||"audio/wav"};base64,${n.data}`,type:n.mimeType||"audio/wav"})}),n.type==="resource"&&n.resource&&w.jsxs("div",{className:"space-y-2",children:[n.resource.text&&w.jsx(Eg,{text:n.resource.text}),n.resource.blob&&n.resource.mimeType?.startsWith("image/")&&w.jsx("img",{src:`data:${n.resource.mimeType};base64,${n.resource.blob}`,alt:n.resource.uri,className:"max-w-full h-auto rounded"}),n.resource.blob&&n.resource.mimeType?.startsWith("audio/")&&w.jsx("audio",{controls:!0,className:"w-full",children:w.jsx("source",{src:`data:${n.resource.mimeType};base64,${n.resource.blob}`,type:n.resource.mimeType})}),n.resource.blob&&!n.resource.mimeType?.startsWith("image/")&&!n.resource.mimeType?.startsWith("audio/")&&w.jsxs("div",{className:"text-sm text-neutral-600 dark:text-neutral-300",children:["Binary content (",Math.round(n.resource.blob.length*.75)," bytes)"]})]})]}),e[23]=n.data,e[24]=n.mimeType,e[25]=n.resource,e[26]=n.text,e[27]=n.type,e[28]=a,e[29]=T):T=e[29];let C;return e[30]!==k||e[31]!==T||e[32]!==h?(C=w.jsxs("div",{className:h,children:[k,T]}),e[30]=k,e[31]=T,e[32]=h,e[33]=C):C=e[33],C}function gP(t){const e=$e.c(29),{content:n,index:r}=t,[s,a]=Z.useState(!0);let l;e[0]!==n.blob||e[1]!==n.mimeType||e[2]!==n.text?(l=(()=>{if(n.text){const T=zy(n.text);return{label:T!=="text"?T.toUpperCase():"Text",language:T}}return n.blob&&n.mimeType?.startsWith("image/")?{label:"Image",detail:n.mimeType}:n.blob&&n.mimeType?.startsWith("audio/")?{label:"Audio",detail:n.mimeType}:{label:"Binary",detail:n.mimeType}})(),e[0]=n.blob,e[1]=n.mimeType,e[2]=n.text,e[3]=l):l=e[3];const u=l;let f;e[4]!==s?(f=()=>a(!s),e[4]=s,e[5]=f):f=e[5];let h;e[6]!==s?(h=s?w.jsx(zi,{className:"w-4 h-4 text-neutral-400"}):w.jsx(th,{className:"w-4 h-4 text-neutral-400"}),e[6]=s,e[7]=h):h=e[7];const m=r+1;let p;e[8]!==m?(p=w.jsxs("span",{className:"text-xs font-mono text-neutral-500 dark:text-neutral-400",children:["#",m]}),e[8]=m,e[9]=p):p=e[9];let _;e[10]!==u.language?(_=w.jsx(TE,{type:"resource",language:u.language}),e[10]=u.language,e[11]=_):_=e[11];let g;e[12]!==n.uri?(g=w.jsx("span",{className:"text-xs text-neutral-500 dark:text-neutral-400 font-mono truncate",title:n.uri,children:n.uri}),e[12]=n.uri,e[13]=g):g=e[13];let v;e[14]!==f||e[15]!==h||e[16]!==p||e[17]!==_||e[18]!==g?(v=w.jsxs("button",{onClick:f,className:"w-full flex items-center gap-2 px-3 py-2 bg-neutral-50 dark:bg-white/5 hover:bg-neutral-100 dark:hover:bg-white/10 transition-colors",children:[h,p,_,g]}),e[14]=f,e[15]=h,e[16]=p,e[17]=_,e[18]=g,e[19]=v):v=e[19];let x;e[20]!==n.blob||e[21]!==n.mimeType||e[22]!==n.text||e[23]!==n.uri||e[24]!==s?(x=s&&w.jsxs("div",{className:"p-3 bg-white dark:bg-transparent",children:[n.text&&w.jsx(Eg,{text:n.text}),n.blob&&n.mimeType?.startsWith("image/")&&w.jsx("img",{src:`data:${n.mimeType};base64,${n.blob}`,alt:n.uri,className:"max-w-full h-auto rounded"}),n.blob&&n.mimeType?.startsWith("audio/")&&w.jsx("audio",{controls:!0,className:"w-full",children:w.jsx("source",{src:`data:${n.mimeType};base64,${n.blob}`,type:n.mimeType})}),n.blob&&!n.mimeType?.startsWith("image/")&&!n.mimeType?.startsWith("audio/")&&w.jsxs("div",{className:"text-sm text-neutral-600 dark:text-neutral-300",children:["Binary content (",Math.round(n.blob.length*.75)," bytes)"]}),!n.text&&!n.blob&&w.jsx("div",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:"Empty resource"})]}),e[20]=n.blob,e[21]=n.mimeType,e[22]=n.text,e[23]=n.uri,e[24]=s,e[25]=x):x=e[25];let E;return e[26]!==v||e[27]!==x?(E=w.jsxs("div",{className:"border border-neutral-200 dark:border-white/10 rounded-lg overflow-hidden",children:[v,x]}),e[26]=v,e[27]=x,e[28]=E):E=e[28],E}function yP(t){const e=$e.c(26),{toolResponse:n,resourceResponse:r}=t;if(n){const s=n.isError,a=n.content.length;let l;e[0]!==s?(l=s&&w.jsxs("div",{className:"flex items-center gap-2 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg px-4 py-3 mb-3",children:[w.jsx(Rk,{className:"text-red-500 dark:text-red-400 shrink-0",size:18}),w.jsx("span",{className:"text-red-700 dark:text-red-400 text-sm font-medium",children:"Tool returned an error"})]}),e[0]=s,e[1]=l):l=e[1];let u;e[2]!==a?(u=a>0&&w.jsx("div",{className:"flex items-center gap-2 mb-3",children:w.jsxs("span",{className:"text-xs font-medium text-neutral-500 dark:text-neutral-400",children:[a," item",a!==1?"s":""]})}),e[2]=a,e[3]=u):u=e[3];let f;if(e[4]!==s||e[5]!==n.content){let p;e[7]!==s?(p=(_,g)=>w.jsx(mP,{content:_,index:g,isError:s},g),e[7]=s,e[8]=p):p=e[8],f=n.content.map(p),e[4]=s,e[5]=n.content,e[6]=f}else f=e[6];let h;e[9]!==a?(h=a===0&&w.jsx("div",{className:"text-sm text-neutral-500 dark:text-neutral-400 text-center py-4",children:"No content returned"}),e[9]=a,e[10]=h):h=e[10];let m;return e[11]!==l||e[12]!==u||e[13]!==f||e[14]!==h?(m=w.jsxs("div",{className:"space-y-2",children:[l,u,f,h]}),e[11]=l,e[12]=u,e[13]=f,e[14]=h,e[15]=m):m=e[15],m}if(r){const s=r.contents.length;let a;e[16]!==s?(a=s>0&&w.jsx("div",{className:"flex items-center gap-2 mb-3",children:w.jsxs("span",{className:"text-xs font-medium text-neutral-500 dark:text-neutral-400",children:[s," resource",s!==1?"s":""]})}),e[16]=s,e[17]=a):a=e[17];let l;e[18]!==r.contents?(l=r.contents.map(_P),e[18]=r.contents,e[19]=l):l=e[19];let u;e[20]!==s?(u=s===0&&w.jsx("div",{className:"text-sm text-neutral-500 dark:text-neutral-400 text-center py-4",children:"No content returned"}),e[20]=s,e[21]=u):u=e[21];let f;return e[22]!==a||e[23]!==l||e[24]!==u?(f=w.jsxs("div",{className:"space-y-2",children:[a,l,u]}),e[22]=a,e[23]=l,e[24]=u,e[25]=f):f=e[25],f}return null}function _P(t,e){return w.jsx(gP,{content:t,index:e},e)}function bP(t){const e=$e.c(9),{toolResponse:n,resourceResponse:r,viewMode:s}=t,a=s===void 0?"pretty":s,l=n||r;let u;e[0]!==l?(u=l?new Blob([JSON.stringify(l,null,2)],{type:"application/json"}):null,e[0]=l,e[1]=u):u=e[1];const f=u;let h;e[2]!==f||e[3]!==r||e[4]!==n||e[5]!==a?(h=a==="pretty"?w.jsx(yP,{toolResponse:n,resourceResponse:r}):f&&w.jsx(Ly,{content:f}),e[2]=f,e[3]=r,e[4]=n,e[5]=a,e[6]=h):h=e[6];let m;return e[7]!==h?(m=w.jsx("div",{className:"h-full flex flex-col overflow-hidden",children:w.jsx("div",{className:"flex-1 min-h-0 overflow-auto",children:h})}),e[7]=h,e[8]=m):m=e[8],m}function o1(t){return t<1e3?`${t}ms`:t<6e4?`${(t/1e3).toFixed(2)}s`:`${(t/6e4).toFixed(2)}m`}function vP(t){return t>=200&&t<300?"text-emerald-600 dark:text-emerald-400":t>=300&&t<400?"text-amber-600 dark:text-amber-400":t>=400&&t<500?"text-orange-600 dark:text-orange-400":t>=500?"text-red-600 dark:text-red-400":"text-neutral-600 dark:text-neutral-400"}function l1(t){const e=$e.c(16),{statusCode:n,status:r}=t;let s;e[0]!==n?(s=vP(n),e[0]=n,e[1]=s):s=e[1];const a=s,l=n>=200&&n<300,u=n>=400,f=`flex items-center gap-1.5 px-2 py-1 rounded-md bg-neutral-100 dark:bg-white/5 ${a}`;let h;e[2]!==l?(h=l&&w.jsx(xy,{size:14}),e[2]=l,e[3]=h):h=e[3];let m;e[4]!==u?(m=u&&w.jsx(V4,{size:14}),e[4]=u,e[5]=m):m=e[5];let p;e[6]!==n?(p=w.jsx("span",{className:"text-xs font-medium",children:n}),e[6]=n,e[7]=p):p=e[7];let _;e[8]!==r?(_=w.jsx("span",{className:"text-xs opacity-75",children:r}),e[8]=r,e[9]=_):_=e[9];let g;return e[10]!==f||e[11]!==h||e[12]!==m||e[13]!==p||e[14]!==_?(g=w.jsxs("div",{className:f,children:[h,m,p,_]}),e[10]=f,e[11]=h,e[12]=m,e[13]=p,e[14]=_,e[15]=g):g=e[15],g}function xP(){const t=$e.c(40),{request:e}=rr(),[n,r]=Z.useState("pretty"),[s,a]=Z.useState(!1),l=e?.executing??!1,u=e?.protocol??"rest",f=e?.http?.response,h=e?.grpc?.response,m=e?.mcp?.response,p=e?.mcp?.response?.error;let _,g,v,x;if(t[0]!==h||t[1]!==f||t[2]!==l||t[3]!==p||t[4]!==m||t[5]!==u||t[6]!==n){x=Symbol.for("react.early_return_sentinel");e:{g=f??(h?{status:h.error||"OK",statusCode:h.error?0:200,headers:h.metadata??{},body:new Blob([h.body],{type:"application/json"}),duration:h.duration}:void 0);const P=g?.error??p;if(l){let ne;t[11]===Symbol.for("react.memo_cache_sentinel")?(ne=w.jsxs("div",{className:"flex flex-col items-center justify-center h-full min-h-50",children:[w.jsxs("div",{className:"relative mb-4",children:[w.jsx("div",{className:"w-12 h-12 rounded-full border-2 border-zinc-100 dark:border-zinc-800"}),w.jsx("div",{className:"absolute inset-0 w-12 h-12 rounded-full border-2 border-zinc-400 border-t-transparent animate-spin"})]}),w.jsx("span",{className:"text-xs font-medium text-zinc-400 uppercase tracking-widest animate-pulse",children:"Sending Request"})]}),t[11]=ne):ne=t[11],x=ne;break e}if(P){let ne,me;t[12]===Symbol.for("react.memo_cache_sentinel")?(ne=w.jsx(Rk,{className:"w-5 h-5 text-rose-500 dark:text-rose-400"}),me=w.jsx("h3",{className:"font-semibold text-rose-500 dark:text-rose-400",children:"Error"}),t[12]=ne,t[13]=me):(ne=t[12],me=t[13]);const z=w.jsxs("div",{children:[me,w.jsx("p",{className:"text-sm text-neutral-600 dark:text-neutral-300 mt-1",children:P})]});let M;t[14]!==z?(M=w.jsx("div",{className:"bg-rose-500/10 border border-rose-500/20 rounded-xl p-4",children:w.jsxs("div",{className:"flex items-center gap-3",children:[ne,z]})}),t[14]=z,t[15]=M):M=t[15],x=M;break e}if(!g&&!m){let ne;t[16]===Symbol.for("react.memo_cache_sentinel")?(ne=w.jsxs("div",{className:"h-full flex flex-col items-center justify-center",children:[w.jsx(yL,{className:"w-12 h-12 text-neutral-300 dark:text-neutral-600 mb-4"}),w.jsx("p",{className:"text-sm text-neutral-400 dark:text-neutral-500",children:"Hit Send to see what happens"})]}),t[16]=ne):ne=t[16],x=ne;break e}_=()=>{t:switch(u){case"mcp":{if(m?.result){const ne="content"in m.result;return w.jsx(bP,{toolResponse:ne?m.result:void 0,resourceResponse:ne?void 0:m.result,viewMode:n})}break t}case"grpc":{if(g)return w.jsx(oP,{response:g,viewMode:n});break t}default:if(g)return w.jsx(rP,{response:g,viewMode:n})}return null};const Q=g?.headers?.["content-type"]?.toLowerCase()||"";v=Q.includes("image/")||Q.includes("video/")||Q.includes("audio/")||Q.includes("application/pdf")||Q.includes("application/octet-stream")}t[0]=h,t[1]=f,t[2]=l,t[3]=p,t[4]=m,t[5]=u,t[6]=n,t[7]=_,t[8]=g,t[9]=v,t[10]=x}else _=t[7],g=t[8],v=t[9],x=t[10];if(x!==Symbol.for("react.early_return_sentinel"))return x;const k=!v,T=u!=="mcp"&&g;let C;t[17]!==m||t[18]!==u||t[19]!==g||t[20]!==s||t[21]!==T||t[22]!==k||t[23]!==n?(C=(g||m)&&w.jsxs("div",{className:"flex items-center gap-3 mb-3 shrink-0",children:[g&&w.jsxs(w.Fragment,{children:[w.jsx(l1,{statusCode:g.statusCode,status:g.status}),w.jsxs("div",{className:"flex items-center gap-1 text-xs text-neutral-500 dark:text-neutral-400",children:[w.jsx(_f,{size:12}),w.jsx("span",{children:o1(g.duration)})]}),g.body&&w.jsxs("div",{className:"text-xs text-neutral-400 dark:text-neutral-500",children:[(g.body.size/1024).toFixed(2)," KB"]})]}),m&&w.jsxs(w.Fragment,{children:[w.jsx(l1,{statusCode:200,status:"OK"}),w.jsxs("div",{className:"flex items-center gap-1 text-xs text-neutral-500 dark:text-neutral-400",children:[w.jsx(_f,{size:12}),w.jsx("span",{children:o1(m.duration)})]})]}),w.jsx("div",{className:"flex-1"}),k&&w.jsxs("div",{className:"flex items-center gap-0.5 text-xs",children:[w.jsx("button",{onClick:()=>r("pretty"),className:`px-2 py-0.5 rounded transition-colors ${n==="pretty"?"text-neutral-700 dark:text-neutral-200 font-medium":"text-neutral-400 dark:text-neutral-500 hover:text-neutral-600 dark:hover:text-neutral-300"}`,children:"Pretty"}),w.jsx("span",{className:"text-neutral-300 dark:text-neutral-600",children:"|"}),w.jsx("button",{onClick:()=>r("raw"),className:`px-2 py-0.5 rounded transition-colors ${n==="raw"?"text-neutral-700 dark:text-neutral-200 font-medium":"text-neutral-400 dark:text-neutral-500 hover:text-neutral-600 dark:hover:text-neutral-300"}`,children:"Raw"})]}),T&&w.jsxs("button",{onClick:()=>a(!s),className:`px-2 py-0.5 text-xs rounded transition-colors ${s?"text-neutral-700 dark:text-neutral-200 font-medium":"text-neutral-400 dark:text-neutral-500 hover:text-neutral-600 dark:hover:text-neutral-300"}`,children:[u==="grpc"?"Metadata":"Headers"," (",Object.keys(g.headers).length,")"]})]}),t[17]=m,t[18]=u,t[19]=g,t[20]=s,t[21]=T,t[22]=k,t[23]=n,t[24]=C):C=t[24];const j=`min-h-0 overflow-hidden transition-all ${s?"flex-2":"flex-1"}`;let D;t[25]!==_?(D=_(),t[25]=_,t[26]=D):D=t[26];let I;t[27]!==j||t[28]!==D?(I=w.jsx("div",{className:j,children:D}),t[27]=j,t[28]=D,t[29]=I):I=t[29];let U;t[30]!==u||t[31]!==g||t[32]!==s?(U=s&&g&&w.jsxs("div",{className:"flex-1 min-w-75 max-w-125 flex flex-col border-l border-neutral-200 dark:border-white/10 pl-3",children:[w.jsxs("div",{className:"text-xs font-medium text-neutral-600 dark:text-neutral-400 mb-2",children:[u==="grpc"?"Metadata":"Headers"," (",Object.keys(g.headers).length,")"]}),w.jsx("div",{className:"flex-1 overflow-auto",children:w.jsx("div",{className:"space-y-2",children:Object.entries(g.headers).map(wP)})})]}),t[30]=u,t[31]=g,t[32]=s,t[33]=U):U=t[33];let V;t[34]!==I||t[35]!==U?(V=w.jsxs("div",{className:"flex-1 min-h-0 flex gap-3 overflow-hidden",children:[I,U]}),t[34]=I,t[35]=U,t[36]=V):V=t[36];let H;return t[37]!==C||t[38]!==V?(H=w.jsxs("div",{className:"h-full flex flex-col overflow-hidden",children:[C,V]}),t[37]=C,t[38]=V,t[39]=H):H=t[39],H}function wP(t){const[e,n]=t;return w.jsxs("div",{className:"text-xs",children:[w.jsx("div",{className:"font-mono text-neutral-600 dark:text-neutral-400 mb-0.5",children:e}),w.jsx("div",{className:"font-mono text-neutral-700 dark:text-neutral-200 break-all",children:n})]},e)}function SP(){const t=$e.c(48),{request:e,newRequest:n,sidebarCollapsed:r,toggleSidebar:s,history:a}=rr(),{setPortalTarget:l}=Ck();if(!e){let Q;return t[0]===Symbol.for("react.memo_cache_sentinel")?(Q=w.jsx("div",{className:"flex-1 flex items-center justify-center text-neutral-400 dark:text-neutral-500",children:"No active request"}),t[0]=Q):Q=t[0],Q}const u=e.protocol??"rest";let f;t[1]!==a||t[2]!==r||t[3]!==s?(f=r&&a.length>0&&w.jsx("button",{type:"button",onClick:s,className:"p-1.5 hover:bg-neutral-100 dark:hover:bg-white/10 rounded-md transition-colors text-neutral-500 dark:text-neutral-400 hover:text-neutral-700 dark:hover:text-neutral-200",title:"Show sidebar",children:w.jsx(oL,{className:"w-4 h-4"})}),t[1]=a,t[2]=r,t[3]=s,t[4]=f):f=t[4];let h;t[5]===Symbol.for("react.memo_cache_sentinel")?(h=w.jsx(FL,{}),t[5]=h):h=t[5];let m;t[6]!==u?(m=u==="rest"&&w.jsx(QL,{}),t[6]=u,t[7]=m):m=t[7];let p;t[8]!==u?(p=u==="grpc"&&w.jsx(sP,{}),t[8]=u,t[9]=p):p=t[9];let _;t[10]!==u?(_=u==="mcp"&&w.jsx(cP,{}),t[10]=u,t[11]=_):_=t[11];let g;t[12]!==m||t[13]!==p||t[14]!==_?(g=w.jsxs("div",{className:"flex-1 flex items-center",children:[m,p,_]}),t[12]=m,t[13]=p,t[14]=_,t[15]=g):g=t[15];let v;t[16]!==l?(v=w.jsx("div",{ref:l,className:"flex items-center gap-1"}),t[16]=l,t[17]=v):v=t[17];let x;t[18]===Symbol.for("react.memo_cache_sentinel")?(x=w.jsx(HL,{}),t[18]=x):x=t[18];let E;t[19]===Symbol.for("react.memo_cache_sentinel")?(E=w.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),t[19]=E):E=t[19];let k;t[20]!==n?(k=w.jsx("button",{onClick:n,className:"p-1.5 hover:bg-neutral-100 dark:hover:bg-white/10 rounded-md transition-colors text-neutral-500 dark:text-neutral-400 hover:text-neutral-700 dark:hover:text-neutral-200",title:"New request",children:E}),t[20]=n,t[21]=k):k=t[21];let T;t[22]!==f||t[23]!==g||t[24]!==v||t[25]!==k?(T=w.jsxs("div",{className:"pl-2 pr-3 py-2 border-b border-neutral-200 dark:border-white/5 flex items-center gap-2 shrink-0",children:[f,h,g,v,x,k]}),t[22]=f,t[23]=g,t[24]=v,t[25]=k,t[26]=T):T=t[26];let C;t[27]!==u?(C=u==="rest"&&w.jsx(v3,{}),t[27]=u,t[28]=C):C=t[28];let j;t[29]!==u?(j=u==="grpc"&&w.jsx(aP,{}),t[29]=u,t[30]=j):j=t[30];let D;t[31]!==u?(D=u==="mcp"&&w.jsx(fP,{}),t[31]=u,t[32]=D):D=t[32];let I;t[33]!==C||t[34]!==j||t[35]!==D?(I=w.jsxs("div",{className:"pl-2 pr-3 py-2 border-b border-neutral-200 dark:border-white/5 overflow-visible shrink-0",children:[C,j,D]}),t[33]=C,t[34]=j,t[35]=D,t[36]=I):I=t[36];let U;t[37]!==e.grpc?.response||t[38]!==e.http?.response||t[39]!==e.mcp?.response?(U=(e.http?.response||e.grpc?.response||e.mcp?.response)&&w.jsx("h2",{className:"text-[10px] font-medium text-neutral-500 dark:text-neutral-300 uppercase tracking-wider mb-2 shrink-0",children:"Response"}),t[37]=e.grpc?.response,t[38]=e.http?.response,t[39]=e.mcp?.response,t[40]=U):U=t[40];let V;t[41]===Symbol.for("react.memo_cache_sentinel")?(V=w.jsx("div",{className:"flex-1 min-h-0 overflow-hidden",children:w.jsx(xP,{})}),t[41]=V):V=t[41];let H;t[42]!==U?(H=w.jsxs("div",{className:"flex-1 pl-2 pr-3 py-2 flex flex-col min-h-0 overflow-hidden",children:[U,V]}),t[42]=U,t[43]=H):H=t[43];let P;return t[44]!==T||t[45]!==I||t[46]!==H?(P=w.jsxs("div",{className:"h-full flex flex-col overflow-hidden",children:[T,I,H]}),t[44]=T,t[45]=I,t[46]=H,t[47]=P):P=t[47],P}class kP{#e=!0;#t;#n;#r;#s;#o;#i;#a;#p=0;#m=5;#c=!1;#u=!1;#l=null;#f=()=>{this.debugLog("Connected to event bus"),this.#o=!0,this.#c=!1,this.debugLog("Emitting queued events",this.#s),this.#s.forEach(e=>this.emitEventToBus(e)),this.#s=[],this.stopConnectLoop(),this.#n().removeEventListener("tanstack-connect-success",this.#f)};#h=()=>{if(this.#p<this.#m){this.#p++,this.dispatchCustomEvent("tanstack-connect",{});return}this.#n().removeEventListener("tanstack-connect",this.#h),this.#u=!0,this.debugLog("Max retries reached, giving up on connection"),this.stopConnectLoop()};#d=()=>{this.#c||(this.#c=!0,this.#n().addEventListener("tanstack-connect-success",this.#f),this.#h())};constructor({pluginId:e,debug:n=!1,enabled:r=!0,reconnectEveryMs:s=300}){this.#t=e,this.#e=r,this.#n=this.getGlobalTarget,this.#r=n,this.debugLog(" Initializing event subscription for plugin",this.#t),this.#s=[],this.#o=!1,this.#u=!1,this.#i=null,this.#a=s}startConnectLoop(){this.#i!==null||this.#o||(this.debugLog(`Starting connect loop (every ${this.#a}ms)`),this.#i=setInterval(this.#h,this.#a))}stopConnectLoop(){this.#c=!1,this.#i!==null&&(clearInterval(this.#i),this.#i=null,this.#s=[],this.debugLog("Stopped connect loop"))}debugLog(...e){this.#r&&console.log(` [tanstack-devtools:${this.#t}-plugin]`,...e)}getGlobalTarget(){if(typeof globalThis<"u"&&globalThis.__TANSTACK_EVENT_TARGET__)return this.debugLog("Using global event target"),globalThis.__TANSTACK_EVENT_TARGET__;if(typeof window<"u"&&typeof window.addEventListener<"u")return this.debugLog("Using window as event target"),window;const e=typeof EventTarget<"u"?new EventTarget:void 0;return typeof e>"u"||typeof e.addEventListener>"u"?(this.debugLog("No event mechanism available, running in non-web environment"),{addEventListener:()=>{},removeEventListener:()=>{},dispatchEvent:()=>!1}):(this.debugLog("Using new EventTarget as fallback"),e)}getPluginId(){return this.#t}dispatchCustomEventShim(e,n){try{const r=new Event(e,{detail:n});this.#n().dispatchEvent(r)}catch{this.debugLog("Failed to dispatch shim event")}}dispatchCustomEvent(e,n){try{this.#n().dispatchEvent(new CustomEvent(e,{detail:n}))}catch{this.dispatchCustomEventShim(e,n)}}emitEventToBus(e){this.debugLog("Emitting event to client bus",e),this.dispatchCustomEvent("tanstack-dispatch-event",e)}createEventPayload(e,n){return{type:`${this.#t}:${e}`,payload:n,pluginId:this.#t}}emit(e,n){if(!this.#e){this.debugLog("Event bus client is disabled, not emitting event",e,n);return}if(this.#l&&(this.debugLog("Emitting event to internal event target",e,n),this.#l.dispatchEvent(new CustomEvent(`${this.#t}:${e}`,{detail:this.createEventPayload(e,n)}))),this.#u){this.debugLog("Previously failed to connect, not emitting to bus");return}if(!this.#o){this.debugLog("Bus not available, will be pushed as soon as connected"),this.#s.push(this.createEventPayload(e,n)),typeof CustomEvent<"u"&&!this.#c&&(this.#d(),this.startConnectLoop());return}return this.emitEventToBus(this.createEventPayload(e,n))}on(e,n,r){const s=r?.withEventTarget??!1,a=`${this.#t}:${e}`;if(s&&(this.#l||(this.#l=new EventTarget),this.#l.addEventListener(a,u=>{n(u.detail)})),!this.#e)return this.debugLog("Event bus client is disabled, not registering event",a),()=>{};const l=u=>{this.debugLog("Received event from bus",u.detail),n(u.detail)};return this.#n().addEventListener(a,l),this.debugLog("Registered event to bus",a),()=>{s&&this.#l?.removeEventListener(a,l),this.#n().removeEventListener(a,l)}}onAll(e){if(!this.#e)return this.debugLog("Event bus client is disabled, not registering event"),()=>{};const n=r=>{const s=r.detail;e(s)};return this.#n().addEventListener("tanstack-devtools-global",n),()=>this.#n().removeEventListener("tanstack-devtools-global",n)}onAllPluginEvents(e){if(!this.#e)return this.debugLog("Event bus client is disabled, not registering event"),()=>{};const n=r=>{const s=r.detail;this.#t&&s.pluginId!==this.#t||e(s)};return this.#n().addEventListener("tanstack-devtools-global",n),()=>this.#n().removeEventListener("tanstack-devtools-global",n)}}class EP extends kP{constructor(){super({pluginId:"tanstack-ai-devtools"})}}const Dt=new EP;async function CP(t){let e="";for await(const n of t)n.type==="content"&&n.delta&&(e+=n.delta);return e}function TP(t){return typeof t=="object"&&t!==null&&"~standard"in t&&typeof t["~standard"]=="object"&&t["~standard"].version===1&&typeof t["~standard"].jsonSchema=="object"&&typeof t["~standard"].jsonSchema.input=="function"}function Oi(t){return typeof t=="object"&&t!==null&&"~standard"in t&&typeof t["~standard"]=="object"&&t!==null&&t["~standard"]!==null&&"version"in t["~standard"]&&t["~standard"].version===1&&"validate"in t["~standard"]&&typeof t["~standard"].validate=="function"}function Sl(t,e=[]){const n={...t};if(n.type==="object"&&n.properties){const r={...n.properties},s=Object.keys(r);for(const a of s){const l=r[a],u=!e.includes(a);l.type==="object"&&l.properties?r[a]=Sl(l,l.required||[]):l.type==="array"&&l.items?r[a]={...l,items:Sl(l.items,l.items.required||[])}:u&&(l.type&&!Array.isArray(l.type)?r[a]={...l,type:[l.type,"null"]}:Array.isArray(l.type)&&!l.type.includes("null")&&(r[a]={...l,type:[...l.type,"null"]}))}n.properties=r,n.required=s,n.additionalProperties=!1}return n.type==="array"&&n.items&&(n.items=Sl(n.items,n.items.required||[])),n}function Cg(t,e={}){if(!t)return;const{forStructuredOutput:n=!1}=e;if(TP(t)){let s=t["~standard"].jsonSchema.input({target:"draft-07"});if(typeof s=="object"&&"$schema"in s){const{$schema:a,...l}=s;s=l}return typeof s=="object"&&("properties"in s&&!s.type&&(s.type="object"),s.type==="object"&&!("properties"in s)&&(s.properties={}),s.type==="object"&&!("required"in s)&&(s.required=[]),n&&(s=Sl(s,s.required||[]))),s}return n&&typeof t=="object"?Sl(t,t.required||[]):t}function qa(t,e){if(!Oi(t))return e;const n=t["~standard"].validate(e);if(n instanceof Promise)throw new Error("Schema validation returned a Promise. Use validateWithStandardSchema for async validation.");if(!n.issues)return n.value;const r=n.issues.map(s=>s.message||"Validation failed").join(", ");throw new Error(`Validation failed: ${r}`)}class AP{constructor(e){this.toolCallsMap=new Map,this.tools=e}addToolCallChunk(e){const n=e.index,r=this.toolCallsMap.get(n);r?(e.toolCall.function.name&&!r.function.name&&(r.function.name=e.toolCall.function.name),e.toolCall.function.arguments&&(r.function.arguments+=e.toolCall.function.arguments)):e.toolCall.id&&e.toolCall.function.name&&this.toolCallsMap.set(n,{id:e.toolCall.id,type:"function",function:{name:e.toolCall.function.name,arguments:e.toolCall.function.arguments||""}})}hasToolCalls(){return this.getToolCalls().length>0}getToolCalls(){return Array.from(this.toolCallsMap.values()).filter(e=>e.id&&e.function.name&&e.function.name.trim().length>0)}async*executeTools(e){const n=this.getToolCalls(),r=[];for(const s of n){const a=this.tools.find(u=>u.name===s.function.name);let l;if(a?.execute)try{let u;try{u=JSON.parse(s.function.arguments)}catch{throw new Error(`Failed to parse tool arguments as JSON: ${s.function.arguments}`)}if(a.inputSchema&&Oi(a.inputSchema))try{u=qa(a.inputSchema,u)}catch(h){const m=h instanceof Error?h.message:"Validation failed";throw new Error(`Input validation failed for tool ${a.name}: ${m}`)}let f=await a.execute(u);if(a.outputSchema&&Oi(a.outputSchema)&&f!==void 0&&f!==null)try{f=qa(a.outputSchema,f)}catch(h){const m=h instanceof Error?h.message:"Validation failed";throw new Error(`Output validation failed for tool ${a.name}: ${m}`)}l=typeof f=="string"?f:JSON.stringify(f)}catch(u){l=`Error executing tool: ${u instanceof Error?u.message:"Unknown error"}`}else l=`Tool ${s.function.name} does not have an execute function`;yield{type:"tool_result",id:e.id,model:e.model,timestamp:Date.now(),toolCallId:s.id,content:l},r.push({role:"tool",content:l,toolCallId:s.id})}return r}clear(){this.toolCallsMap.clear()}}async function c1(t,e,n=new Map,r=new Map){const s=[],a=[],l=[],u=new Map;for(const f of e)u.set(f.name,f);for(const f of t){const h=u.get(f.function.name),m=f.function.name;if(!h){s.push({toolCallId:f.id,toolName:m,result:{error:`Unknown tool: ${m}`},state:"output-error"});continue}let p={};const _=f.function.arguments.trim()||"{}";try{p=JSON.parse(_)}catch{throw new Error(`Failed to parse tool arguments as JSON: ${_}`)}if(h.inputSchema&&Oi(h.inputSchema))try{p=qa(h.inputSchema,p)}catch(v){const x=v instanceof Error?v.message:"Validation failed";s.push({toolCallId:f.id,toolName:m,result:{error:`Input validation failed for tool ${h.name}: ${x}`},state:"output-error"});continue}if(!h.execute){if(h.needsApproval){const v=`approval_${f.id}`;n.has(v)?n.get(v)?r.has(f.id)?s.push({toolCallId:f.id,toolName:m,result:r.get(f.id)}):l.push({toolCallId:f.id,toolName:m,input:p}):s.push({toolCallId:f.id,toolName:m,result:{error:"User declined tool execution"},state:"output-error"}):a.push({toolCallId:f.id,toolName:f.function.name,input:p,approvalId:v})}else r.has(f.id)?s.push({toolCallId:f.id,toolName:m,result:r.get(f.id)}):l.push({toolCallId:f.id,toolName:m,input:p});continue}if(h.needsApproval){const v=`approval_${f.id}`;if(n.has(v))if(n.get(v)){const E=Date.now();try{let k=await h.execute(p);const T=Date.now()-E;h.outputSchema&&Oi(h.outputSchema)&&k!==void 0&&k!==null&&(k=qa(h.outputSchema,k)),s.push({toolCallId:f.id,toolName:m,result:typeof k=="string"?JSON.parse(k):k||null,duration:T})}catch(k){const T=Date.now()-E,C=k instanceof Error?k.message:"Unknown error";s.push({toolCallId:f.id,toolName:m,result:{error:C},state:"output-error",duration:T})}}else s.push({toolCallId:f.id,toolName:m,result:{error:"User declined tool execution"},state:"output-error"});else a.push({toolCallId:f.id,toolName:m,input:p,approvalId:v});continue}const g=Date.now();try{let v=await h.execute(p);const x=Date.now()-g;h.outputSchema&&Oi(h.outputSchema)&&v!==void 0&&v!==null&&(v=qa(h.outputSchema,v)),s.push({toolCallId:f.id,toolName:m,result:typeof v=="string"?JSON.parse(v):v||null,duration:x})}catch(v){const x=Date.now()-g,E=v instanceof Error?v.message:"Unknown error";s.push({toolCallId:f.id,toolName:m,result:{error:E},state:"output-error",duration:x})}}return{results:s,needsApproval:a,needsClientExecution:l}}function AE(t){return({iterationCount:e})=>e<t}class RE{constructor(e){this.iterationCount=0,this.lastFinishReason=null,this.streamStartTime=0,this.totalChunkCount=0,this.currentMessageId=null,this.accumulatedContent="",this.doneChunk=null,this.shouldEmitStreamEnd=!0,this.earlyTermination=!1,this.toolPhase="continue",this.cyclePhase="processText",this.adapter=e.adapter,this.params=e.params,this.systemPrompts=e.params.systemPrompts||[],this.tools=e.params.tools||[],this.loopStrategy=e.params.agentLoopStrategy||AE(5),this.toolCallManager=new AP(this.tools),this.initialMessageCount=e.params.messages.length,this.messages=e.params.messages,this.requestId=this.createId("chat"),this.streamId=this.createId("stream"),this.effectiveRequest=e.params.abortController?{signal:e.params.abortController.signal}:void 0,this.effectiveSignal=e.params.abortController?.signal}getAccumulatedContent(){return this.accumulatedContent}getMessages(){return this.messages}async*run(){this.beforeRun();try{if((yield*this.checkForPendingToolCalls())==="wait")return;do{if(this.earlyTermination||this.isAborted())return;this.beginCycle(),this.cyclePhase==="processText"?yield*this.streamModelResponse():yield*this.processToolCalls(),this.endCycle()}while(this.shouldContinue())}finally{this.afterRun()}}beforeRun(){this.streamStartTime=Date.now();const{model:e,tools:n,temperature:r,topP:s,maxTokens:a,metadata:l,modelOptions:u,conversationId:f}=this.params,h={};r!==void 0&&(h.temperature=r),s!==void 0&&(h.topP=s),a!==void 0&&(h.maxTokens=a),l!==void 0&&(h.metadata=l),Dt.emit("text:started",{requestId:this.requestId,streamId:this.streamId,model:e,provider:this.adapter.name,messageCount:this.initialMessageCount,hasTools:!!n&&n.length>0,streaming:!0,timestamp:Date.now(),clientId:f,toolNames:n?.map(m=>m.name),options:Object.keys(h).length>0?h:void 0,modelOptions:u}),Dt.emit("stream:started",{streamId:this.streamId,model:e,provider:this.adapter.name,timestamp:Date.now()})}afterRun(){if(!this.shouldEmitStreamEnd)return;const e=Date.now();Dt.emit("text:completed",{requestId:this.requestId,streamId:this.streamId,model:this.params.model,content:this.accumulatedContent,messageId:this.currentMessageId||void 0,finishReason:this.lastFinishReason||void 0,usage:this.doneChunk?.usage,timestamp:e}),Dt.emit("stream:ended",{requestId:this.requestId,streamId:this.streamId,totalChunks:this.totalChunkCount,duration:e-this.streamStartTime,timestamp:e})}beginCycle(){this.cyclePhase==="processText"&&this.beginIteration()}endCycle(){if(this.cyclePhase==="processText"){this.cyclePhase="executeToolCalls";return}this.cyclePhase="processText",this.iterationCount++}beginIteration(){this.currentMessageId=this.createId("msg"),this.accumulatedContent="",this.doneChunk=null}async*streamModelResponse(){const{temperature:e,topP:n,maxTokens:r,metadata:s,modelOptions:a}=this.params,u=this.params.tools?.map(f=>({...f,inputSchema:f.inputSchema?Cg(f.inputSchema):void 0,outputSchema:f.outputSchema?Cg(f.outputSchema):void 0}));for await(const f of this.adapter.chatStream({model:this.params.model,messages:this.messages,tools:u,temperature:e,topP:n,maxTokens:r,metadata:s,request:this.effectiveRequest,modelOptions:a,systemPrompts:this.systemPrompts}))if(this.isAborted()||(this.totalChunkCount++,yield f,this.handleStreamChunk(f),this.earlyTermination))break}handleStreamChunk(e){switch(e.type){case"content":this.handleContentChunk(e);break;case"tool_call":this.handleToolCallChunk(e);break;case"tool_result":this.handleToolResultChunk(e);break;case"done":this.handleDoneChunk(e);break;case"error":this.handleErrorChunk(e);break;case"thinking":this.handleThinkingChunk(e);break}}handleContentChunk(e){this.accumulatedContent=e.content,Dt.emit("stream:chunk:content",{streamId:this.streamId,messageId:this.currentMessageId||void 0,content:e.content,delta:e.delta,timestamp:Date.now()})}handleToolCallChunk(e){this.toolCallManager.addToolCallChunk(e),Dt.emit("stream:chunk:tool-call",{streamId:this.streamId,messageId:this.currentMessageId||void 0,toolCallId:e.toolCall.id,toolName:e.toolCall.function.name,index:e.index,arguments:e.toolCall.function.arguments,timestamp:Date.now()})}handleToolResultChunk(e){Dt.emit("stream:chunk:tool-result",{streamId:this.streamId,messageId:this.currentMessageId||void 0,toolCallId:e.toolCallId,result:e.content,timestamp:Date.now()})}handleDoneChunk(e){if(this.doneChunk?.finishReason==="tool_calls"&&e.finishReason==="stop"){this.lastFinishReason=e.finishReason,Dt.emit("stream:chunk:done",{streamId:this.streamId,messageId:this.currentMessageId||void 0,finishReason:e.finishReason,usage:e.usage,timestamp:Date.now()}),e.usage&&Dt.emit("usage:tokens",{requestId:this.requestId,streamId:this.streamId,messageId:this.currentMessageId||void 0,model:this.params.model,usage:e.usage,timestamp:Date.now()});return}this.doneChunk=e,this.lastFinishReason=e.finishReason,Dt.emit("stream:chunk:done",{streamId:this.streamId,messageId:this.currentMessageId||void 0,finishReason:e.finishReason,usage:e.usage,timestamp:Date.now()}),e.usage&&Dt.emit("usage:tokens",{requestId:this.requestId,streamId:this.streamId,messageId:this.currentMessageId||void 0,model:this.params.model,usage:e.usage,timestamp:Date.now()})}handleErrorChunk(e){Dt.emit("stream:chunk:error",{streamId:this.streamId,messageId:this.currentMessageId||void 0,error:e.error.message,timestamp:Date.now()}),this.earlyTermination=!0,this.shouldEmitStreamEnd=!1}handleThinkingChunk(e){Dt.emit("stream:chunk:thinking",{streamId:this.streamId,messageId:this.currentMessageId||void 0,content:e.content,delta:e.delta,timestamp:Date.now()})}async*checkForPendingToolCalls(){const e=this.getPendingToolCallsFromMessages();if(e.length===0)return"continue";const n=this.createSyntheticDoneChunk();Dt.emit("text:iteration",{requestId:this.requestId,streamId:this.streamId,iterationNumber:this.iterationCount+1,messageCount:this.messages.length,toolCallCount:e.length,timestamp:Date.now()});const{approvals:r,clientToolResults:s}=this.collectClientState(),a=await c1(e,this.tools,r,s);if(a.needsApproval.length>0||a.needsClientExecution.length>0){for(const u of this.emitApprovalRequests(a.needsApproval,n))yield u;for(const u of this.emitClientToolInputs(a.needsClientExecution,n))yield u;return this.shouldEmitStreamEnd=!1,"wait"}const l=this.emitToolResults(a.results,n);for(const u of l)yield u;return"continue"}async*processToolCalls(){if(!this.shouldExecuteToolPhase()){this.setToolPhase("stop");return}const e=this.toolCallManager.getToolCalls(),n=this.doneChunk;if(!n||e.length===0){this.setToolPhase("stop");return}Dt.emit("text:iteration",{requestId:this.requestId,streamId:this.streamId,iterationNumber:this.iterationCount+1,messageCount:this.messages.length,toolCallCount:e.length,timestamp:Date.now()}),this.addAssistantToolCallMessage(e);const{approvals:r,clientToolResults:s}=this.collectClientState(),a=await c1(e,this.tools,r,s);if(a.needsApproval.length>0||a.needsClientExecution.length>0){for(const u of this.emitApprovalRequests(a.needsApproval,n))yield u;for(const u of this.emitClientToolInputs(a.needsClientExecution,n))yield u;this.setToolPhase("wait");return}const l=this.emitToolResults(a.results,n);for(const u of l)yield u;this.toolCallManager.clear(),this.setToolPhase("continue")}shouldExecuteToolPhase(){return this.doneChunk?.finishReason==="tool_calls"&&this.tools.length>0&&this.toolCallManager.hasToolCalls()}addAssistantToolCallMessage(e){this.messages=[...this.messages,{role:"assistant",content:this.accumulatedContent||null,toolCalls:e}]}collectClientState(){const e=new Map,n=new Map;for(const r of this.messages)if(r.role==="assistant"&&r.parts){const s=r.parts;for(const a of s)a.type==="tool-call"&&a.state==="approval-responded"&&a.approval&&e.set(a.approval.id,a.approval.approved),a.type==="tool-call"&&a.output!==void 0&&!a.approval&&n.set(a.id,a.output)}return{approvals:e,clientToolResults:n}}emitApprovalRequests(e,n){const r=[];for(const s of e)Dt.emit("stream:approval-requested",{streamId:this.streamId,messageId:this.currentMessageId||void 0,toolCallId:s.toolCallId,toolName:s.toolName,input:s.input,approvalId:s.approvalId,timestamp:Date.now()}),r.push({type:"approval-requested",id:n.id,model:n.model,timestamp:Date.now(),toolCallId:s.toolCallId,toolName:s.toolName,input:s.input,approval:{id:s.approvalId,needsApproval:!0}});return r}emitClientToolInputs(e,n){const r=[];for(const s of e)Dt.emit("stream:tool-input-available",{streamId:this.streamId,messageId:this.currentMessageId||void 0,toolCallId:s.toolCallId,toolName:s.toolName,input:s.input,timestamp:Date.now()}),r.push({type:"tool-input-available",id:n.id,model:n.model,timestamp:Date.now(),toolCallId:s.toolCallId,toolName:s.toolName,input:s.input});return r}emitToolResults(e,n){const r=[];for(const s of e){Dt.emit("tool:call-completed",{requestId:this.requestId,streamId:this.streamId,messageId:this.currentMessageId||void 0,toolCallId:s.toolCallId,toolName:s.toolName,result:s.result,duration:s.duration??0,timestamp:Date.now()});const a=JSON.stringify(s.result),l={type:"tool_result",id:n.id,model:n.model,timestamp:Date.now(),toolCallId:s.toolCallId,content:a};r.push(l),this.messages=[...this.messages,{role:"tool",content:a,toolCallId:s.toolCallId}]}return r}getPendingToolCallsFromMessages(){const e=new Set(this.messages.filter(r=>r.role==="tool"&&r.toolCallId).map(r=>r.toolCallId)),n=[];for(const r of this.messages)if(r.role==="assistant"&&r.toolCalls)for(const s of r.toolCalls)e.has(s.id)||n.push(s);return n}createSyntheticDoneChunk(){return{type:"done",id:this.createId("pending"),model:this.params.model,timestamp:Date.now(),finishReason:"tool_calls"}}shouldContinue(){return this.cyclePhase==="executeToolCalls"?!0:this.loopStrategy({iterationCount:this.iterationCount,messages:this.messages,finishReason:this.lastFinishReason})&&this.toolPhase==="continue"}isAborted(){return!!this.effectiveSignal?.aborted}setToolPhase(e){this.toolPhase=e,e==="wait"&&(this.shouldEmitStreamEnd=!1)}createId(e){return`${e}-${Date.now()}-${Math.random().toString(36).slice(2,9)}`}}function RP(t){const{outputSchema:e,stream:n}=t;return e?IP(t):n===!1?OP(t):OE(t)}async function*OE(t){const{adapter:e,...n}=t,r=e.model,s=new RE({adapter:e,params:{...n,model:r}});for await(const a of s.run())yield a}function OP(t){const e=OE(t);return CP(e)}async function IP(t){const{adapter:e,outputSchema:n,...r}=t,s=e.model;if(!n)throw new Error("outputSchema is required for structured output");const a=new RE({adapter:e,params:{...r,model:s}});for await(const _ of a.run());const l=a.getMessages(),{tools:u,agentLoopStrategy:f,...h}=r,m=Cg(n);if(!m)throw new Error("Failed to convert output schema to JSON Schema");const p=await e.structuredOutput({chatOptions:{...h,model:s,messages:l},outputSchema:m});return Oi(n)?qa(n,p.data):p.data}function Rr(t){return{__toolSide:"definition",...t,server(n){return{__toolSide:"server",...t,execute:n}},client(n){return{__toolSide:"client",...t,execute:n}}}}function u1(t){return t===null?"":typeof t=="string"?t:t.filter(e=>e.type==="text").map(e=>e.content).join("")}function NP(t){const e=[];for(const n of t)"parts"in n?e.push(...IE(n)):e.push(n);return e}function IE(t){const e=[];if(t.role==="system")return e;const n=[],r=[],s=[];for(const u of t.parts)u.type==="text"?n.push(u):u.type==="tool-call"?r.push(u):u.type==="tool-result"&&s.push(u);const a=n.map(u=>u.content).join("")||null,l=r.length>0?r.filter(u=>u.state==="input-complete"||u.state==="approval-responded"||u.output!==void 0).map(u=>({id:u.id,type:"function",function:{name:u.name,arguments:u.arguments}})):void 0;t.role!=="assistant"||a||!l?e.push({role:t.role,content:a,...l&&l.length>0&&{toolCalls:l}}):l.length>0&&e.push({role:"assistant",content:a,toolCalls:l});for(const u of s)(u.state==="complete"||u.state==="error")&&e.push({role:"tool",content:u.content,toolCallId:u.toolCallId});return e}function MP(t,e){const n=[],r=u1(t.content);if(r&&n.push({type:"text",content:r}),t.toolCalls&&t.toolCalls.length>0)for(const s of t.toolCalls)n.push({type:"tool-call",id:s.id,name:s.function.name,arguments:s.function.arguments,state:"input-complete"});return t.role==="tool"&&t.toolCallId&&n.push({type:"tool-result",toolCallId:t.toolCallId,content:u1(t.content),state:"complete"}),{id:e||Mf(),role:t.role==="tool"?"assistant":t.role,parts:n}}function DP(t,e){return"parts"in t?{...t,id:t.id||e(),createdAt:t.createdAt||new Date}:{...MP(t,e()),createdAt:new Date}}function Mf(){return`msg-${Date.now()}-${Math.random().toString(36).substring(7)}`}var xi={},pm={},f1;function h1(){return f1||(f1=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Allow=t.ALL=t.COLLECTION=t.ATOM=t.SPECIAL=t.INF=t._INFINITY=t.INFINITY=t.NAN=t.BOOL=t.NULL=t.OBJ=t.ARR=t.NUM=t.STR=void 0,t.STR=1,t.NUM=2,t.ARR=4,t.OBJ=8,t.NULL=16,t.BOOL=32,t.NAN=64,t.INFINITY=128,t._INFINITY=256,t.INF=t.INFINITY|t._INFINITY,t.SPECIAL=t.NULL|t.BOOL|t.INF|t.NAN,t.ATOM=t.STR|t.NUM|t.SPECIAL,t.COLLECTION=t.ARR|t.OBJ,t.ALL=t.ATOM|t.COLLECTION,t.Allow={STR:t.STR,NUM:t.NUM,ARR:t.ARR,OBJ:t.OBJ,NULL:t.NULL,BOOL:t.BOOL,NAN:t.NAN,INFINITY:t.INFINITY,_INFINITY:t._INFINITY,INF:t.INF,SPECIAL:t.SPECIAL,ATOM:t.ATOM,COLLECTION:t.COLLECTION,ALL:t.ALL},t.default=t.Allow})(pm)),pm}var d1;function LP(){return d1||(d1=1,(function(t){var e=xi&&xi.__createBinding||(Object.create?(function(h,m,p,_){_===void 0&&(_=p);var g=Object.getOwnPropertyDescriptor(m,p);(!g||("get"in g?!m.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return m[p]}}),Object.defineProperty(h,_,g)}):(function(h,m,p,_){_===void 0&&(_=p),h[_]=m[p]})),n=xi&&xi.__exportStar||function(h,m){for(var p in h)p!=="default"&&!Object.prototype.hasOwnProperty.call(m,p)&&e(m,h,p)};Object.defineProperty(t,"__esModule",{value:!0}),t.Allow=t.MalformedJSON=t.PartialJSON=t.parseJSON=t.parse=void 0;const r=h1();Object.defineProperty(t,"Allow",{enumerable:!0,get:function(){return r.Allow}}),n(h1(),t);class s extends Error{}t.PartialJSON=s;class a extends Error{}t.MalformedJSON=a;function l(h,m=r.Allow.ALL){if(typeof h!="string")throw new TypeError(`expecting str, got ${typeof h}`);if(!h.trim())throw new Error(`${h} is empty`);return u(h.trim(),m)}t.parseJSON=l;const u=(h,m)=>{const p=h.length;let _=0;const g=D=>{throw new s(`${D} at position ${_}`)},v=D=>{throw new a(`${D} at position ${_}`)},x=()=>(j(),_>=p&&g("Unexpected end of input"),h[_]==='"'?E():h[_]==="{"?k():h[_]==="["?T():h.substring(_,_+4)==="null"||r.Allow.NULL&m&&p-_<4&&"null".startsWith(h.substring(_))?(_+=4,null):h.substring(_,_+4)==="true"||r.Allow.BOOL&m&&p-_<4&&"true".startsWith(h.substring(_))?(_+=4,!0):h.substring(_,_+5)==="false"||r.Allow.BOOL&m&&p-_<5&&"false".startsWith(h.substring(_))?(_+=5,!1):h.substring(_,_+8)==="Infinity"||r.Allow.INFINITY&m&&p-_<8&&"Infinity".startsWith(h.substring(_))?(_+=8,1/0):h.substring(_,_+9)==="-Infinity"||r.Allow._INFINITY&m&&1<p-_&&p-_<9&&"-Infinity".startsWith(h.substring(_))?(_+=9,-1/0):h.substring(_,_+3)==="NaN"||r.Allow.NAN&m&&p-_<3&&"NaN".startsWith(h.substring(_))?(_+=3,NaN):C()),E=()=>{const D=_;let I=!1;for(_++;_<p&&(h[_]!=='"'||I&&h[_-1]==="\\");)I=h[_]==="\\"?!I:!1,_++;if(h.charAt(_)=='"')try{return JSON.parse(h.substring(D,++_-Number(I)))}catch(U){v(String(U))}else if(r.Allow.STR&m)try{return JSON.parse(h.substring(D,_-Number(I))+'"')}catch{return JSON.parse(h.substring(D,h.lastIndexOf("\\"))+'"')}g("Unterminated string literal")},k=()=>{_++,j();const D={};try{for(;h[_]!=="}";){if(j(),_>=p&&r.Allow.OBJ&m)return D;const I=E();j(),_++;try{const U=x();D[I]=U}catch(U){if(r.Allow.OBJ&m)return D;throw U}j(),h[_]===","&&_++}}catch{if(r.Allow.OBJ&m)return D;g("Expected '}' at end of object")}return _++,D},T=()=>{_++;const D=[];try{for(;h[_]!=="]";)D.push(x()),j(),h[_]===","&&_++}catch{if(r.Allow.ARR&m)return D;g("Expected ']' at end of array")}return _++,D},C=()=>{if(_===0){h==="-"&&v("Not sure what '-' is");try{return JSON.parse(h)}catch(I){if(r.Allow.NUM&m)try{return JSON.parse(h.substring(0,h.lastIndexOf("e")))}catch{}v(String(I))}}const D=_;for(h[_]==="-"&&_++;h[_]&&",]}".indexOf(h[_])===-1;)_++;_==p&&!(r.Allow.NUM&m)&&g("Unterminated number literal");try{return JSON.parse(h.substring(D,_))}catch{h.substring(D,_)==="-"&&g("Not sure what '-' is");try{return JSON.parse(h.substring(D,h.lastIndexOf("e")))}catch(U){v(String(U))}}},j=()=>{for(;_<p&&` 
\r	`.includes(h[_]);)_++};return x()},f=l;t.parse=f})(xi)),xi}var zP=LP();class jP{parse(e){if(!(!e||e.trim()===""))try{return zP.parse(e)}catch{return}}}const PP=new jP;function BP(t,e,n){return t.map(r=>{if(r.id!==e)return r;const s=[...r.parts],a=s.length>0?s[s.length-1]:null;return a&&a.type==="text"?s[s.length-1]={type:"text",content:n}:s.push({type:"text",content:n}),{...r,parts:s}})}function mm(t,e,n){return t.map(r=>{if(r.id!==e)return r;const s=[...r.parts],a=s.findIndex(u=>u.type==="tool-call"&&u.id===n.id),l={type:"tool-call",id:n.id,name:n.name,arguments:n.arguments,state:n.state};return a>=0?s[a]=l:s.push(l),{...r,parts:s}})}function p1(t,e,n,r,s,a){return t.map(l=>{if(l.id!==e)return l;const u=[...l.parts],f=u.findIndex(m=>m.type==="tool-result"&&m.toolCallId===n),h={type:"tool-result",toolCallId:n,content:r,state:s,...a&&{error:a}};return f>=0?u[f]=h:u.push(h),{...l,parts:u}})}function UP(t,e,n,r){return t.map(s=>{if(s.id!==e)return s;const a=[...s.parts],l=a.find(u=>u.type==="tool-call"&&u.id===n);return l&&(l.state="approval-requested",l.approval={id:r,needsApproval:!0}),{...s,parts:a}})}function $P(t,e,n,r,s){return t.map(a=>{const l=[...a.parts],u=l.find(f=>f.type==="tool-call"&&f.id===e);return u&&(u.output=s?{error:s}:n,r?u.state=r:u.state="input-complete"),{...a,parts:l}})}function qP(t,e,n){return t.map(r=>{const s=[...r.parts],a=s.find(l=>l.type==="tool-call"&&l.approval?.id===e);return a&&a.approval&&(a.approval.approved=n,a.state="approval-responded"),{...r,parts:s}})}function FP(t,e,n){return t.map(r=>{if(r.id!==e)return r;const s=[...r.parts],a=s.findIndex(u=>u.type==="thinking"),l={type:"thinking",content:n};return a>=0?s[a]=l:s.push(l),{...r,parts:s}})}class VP{shouldEmit(e,n){return!0}}class jy{constructor(e={}){this.messages=[],this.currentAssistantMessageId=null,this.totalTextContent="",this.currentSegmentText="",this.lastEmittedText="",this.thinkingContent="",this.toolCalls=new Map,this.toolCallOrder=[],this.finishReason=null,this.isDone=!1,this.hasToolCallsSinceTextStart=!1,this.recording=null,this.recordingStartTime=0,this.chunkStrategy=e.chunkStrategy||new VP,this.events=e.events||{},this.handlers=e.handlers||{},this.jsonParser=e.jsonParser||PP,this.recordingEnabled=e.recording??!1,e.initialMessages&&(this.messages=[...e.initialMessages])}setMessages(e){this.messages=[...e],this.emitMessagesChange()}addUserMessage(e){const n={id:Mf(),role:"user",parts:[{type:"text",content:e}],createdAt:new Date};return this.messages=[...this.messages,n],this.emitMessagesChange(),n}startAssistantMessage(){this.resetStreamState();const e={id:Mf(),role:"assistant",parts:[],createdAt:new Date};return this.currentAssistantMessageId=e.id,this.messages=[...this.messages,e],this.events.onStreamStart?.(),this.emitMessagesChange(),e.id}addToolResult(e,n,r){const s=this.messages.find(f=>f.parts.some(h=>h.type==="tool-call"&&h.id===e));if(!s){console.warn(`[StreamProcessor] Could not find message with tool call ${e}`);return}let a=$P(this.messages,e,n,r?"input-complete":void 0,r);const l=typeof n=="string"?n:JSON.stringify(n),u=r?"error":"complete";a=p1(a,s.id,e,l,u,r),this.messages=a,this.emitMessagesChange()}addToolApprovalResponse(e,n){this.messages=qP(this.messages,e,n),this.emitMessagesChange()}toModelMessages(){const e=[];for(const n of this.messages)e.push(...IE(n));return e}getMessages(){return this.messages}areAllToolsComplete(){const e=this.messages.findLast(r=>r.role==="assistant");if(!e)return!0;const n=e.parts.filter(r=>r.type==="tool-call");return n.length===0?!0:n.every(r=>r.state==="approval-responded"||r.output!==void 0&&!r.approval)}removeMessagesAfter(e){this.messages=this.messages.slice(0,e+1),this.emitMessagesChange()}clearMessages(){this.messages=[],this.currentAssistantMessageId=null,this.emitMessagesChange()}async process(e){this.resetStreamState(),this.recordingEnabled&&this.startRecording();for await(const n of e)this.processChunk(n);return this.finalizeStream(),this.recording&&(this.recording.result=this.getResult()),this.getResult()}processChunk(e){switch(this.recording&&this.recording.chunks.push({chunk:e,timestamp:Date.now(),index:this.recording.chunks.length}),e.type){case"content":this.handleContentChunk(e);break;case"tool_call":this.handleToolCallChunk(e);break;case"tool_result":this.handleToolResultChunk(e);break;case"done":this.handleDoneChunk(e);break;case"error":this.handleErrorChunk(e);break;case"thinking":this.handleThinkingChunk(e);break;case"approval-requested":this.handleApprovalRequestedChunk(e);break;case"tool-input-available":this.handleToolInputAvailableChunk(e);break}}handleContentChunk(e){this.completeAllToolCalls();const n=this.currentSegmentText;this.hasToolCallsSinceTextStart&&n.length>0&&this.isNewTextSegment(e,n)&&(n!==this.lastEmittedText&&this.emitTextUpdate(),this.currentSegmentText="",this.lastEmittedText="",this.hasToolCallsSinceTextStart=!1);const s=this.currentSegmentText;let a=s;e.delta!==""?a=s+e.delta:e.content!==""&&(e.content.startsWith(s)?a=e.content:s.startsWith(e.content)?a=s:a=s+e.content);const l=a.slice(s.length);this.currentSegmentText=a,this.totalTextContent+=l;const u=e.delta??e.content??"";this.chunkStrategy.shouldEmit(u,this.currentSegmentText)&&this.currentSegmentText!==this.lastEmittedText&&this.emitTextUpdate()}handleToolCallChunk(e){this.hasToolCallsSinceTextStart=!0;const n=e.toolCall.id,r=this.toolCalls.get(n);if(r){const s=r.state==="awaiting-input";r.arguments+=e.toolCall.function.arguments||"",s&&e.toolCall.function.arguments&&(r.state="input-streaming"),r.parsedArguments=this.jsonParser.parse(r.arguments);const a=this.toolCallOrder.indexOf(n);this.handlers.onToolCallStateChange?.(a,r.id,r.name,r.state,r.arguments,r.parsedArguments),e.toolCall.function.arguments&&this.handlers.onToolCallDelta?.(a,e.toolCall.function.arguments),this.currentAssistantMessageId&&(this.messages=mm(this.messages,this.currentAssistantMessageId,{id:r.id,name:r.name,arguments:r.arguments,state:r.state}),this.emitMessagesChange(),this.events.onToolCallStateChange?.(this.currentAssistantMessageId,r.id,r.state,r.arguments))}else{const s=e.toolCall.function.arguments?"input-streaming":"awaiting-input",a={id:e.toolCall.id,name:e.toolCall.function.name,arguments:e.toolCall.function.arguments||"",state:s,parsedArguments:void 0,index:e.index};e.toolCall.function.arguments&&(a.parsedArguments=this.jsonParser.parse(e.toolCall.function.arguments)),this.toolCalls.set(n,a),this.toolCallOrder.push(n);const l=this.toolCallOrder.indexOf(n);this.handlers.onToolCallStart?.(l,e.toolCall.id,e.toolCall.function.name),this.handlers.onToolCallStateChange?.(l,e.toolCall.id,e.toolCall.function.name,s,e.toolCall.function.arguments||"",a.parsedArguments),e.toolCall.function.arguments&&this.handlers.onToolCallDelta?.(l,e.toolCall.function.arguments),this.currentAssistantMessageId&&(this.messages=mm(this.messages,this.currentAssistantMessageId,{id:e.toolCall.id,name:e.toolCall.function.name,arguments:e.toolCall.function.arguments||"",state:s}),this.emitMessagesChange(),this.events.onToolCallStateChange?.(this.currentAssistantMessageId,e.toolCall.id,s,e.toolCall.function.arguments||""))}}handleToolResultChunk(e){const n="complete";this.handlers.onToolResultStateChange?.(e.toolCallId,e.content,n),this.currentAssistantMessageId&&(this.messages=p1(this.messages,this.currentAssistantMessageId,e.toolCallId,e.content,n),this.emitMessagesChange())}handleDoneChunk(e){this.finishReason=e.finishReason,this.isDone=!0,this.completeAllToolCalls()}handleErrorChunk(e){this.handlers.onError?.(e.error),this.events.onError?.(new Error(e.error.message))}handleThinkingChunk(e){const n=this.thinkingContent;let r=n;e.delta!==""?r=n+e.delta:e.content!==""&&(e.content.startsWith(n)?r=e.content:n.startsWith(e.content)?r=n:r=n+e.content),this.thinkingContent=r,this.handlers.onThinkingUpdate?.(this.thinkingContent),this.currentAssistantMessageId&&(this.messages=FP(this.messages,this.currentAssistantMessageId,this.thinkingContent),this.emitMessagesChange(),this.events.onThinkingUpdate?.(this.currentAssistantMessageId,this.thinkingContent))}handleApprovalRequestedChunk(e){this.handlers.onApprovalRequested?.(e.toolCallId,e.toolName,e.input,e.approval.id),this.currentAssistantMessageId&&(this.messages=UP(this.messages,this.currentAssistantMessageId,e.toolCallId,e.approval.id),this.emitMessagesChange()),this.events.onApprovalRequest?.({toolCallId:e.toolCallId,toolName:e.toolName,input:e.input,approvalId:e.approval.id})}handleToolInputAvailableChunk(e){this.handlers.onToolInputAvailable?.(e.toolCallId,e.toolName,e.input),this.events.onToolCall?.({toolCallId:e.toolCallId,toolName:e.toolName,input:e.input})}isNewTextSegment(e,n){return e.delta!==void 0&&e.content!==void 0&&(e.content.length<n.length||!e.content.startsWith(n)&&!n.startsWith(e.content))}completeAllToolCalls(){this.toolCalls.forEach((e,n)=>{if(e.state!=="input-complete"){const r=this.toolCallOrder.indexOf(n);this.completeToolCall(r,e)}})}completeToolCall(e,n){n.state="input-complete",n.parsedArguments=this.jsonParser.parse(n.arguments),this.handlers.onToolCallStateChange?.(e,n.id,n.name,"input-complete",n.arguments,n.parsedArguments),this.handlers.onToolCallComplete?.(e,n.id,n.name,n.arguments),this.currentAssistantMessageId&&(this.messages=mm(this.messages,this.currentAssistantMessageId,{id:n.id,name:n.name,arguments:n.arguments,state:"input-complete"}),this.emitMessagesChange(),this.events.onToolCallStateChange?.(this.currentAssistantMessageId,n.id,"input-complete",n.arguments))}emitTextUpdate(){this.lastEmittedText=this.currentSegmentText,this.handlers.onTextUpdate?.(this.currentSegmentText),this.currentAssistantMessageId&&(this.messages=BP(this.messages,this.currentAssistantMessageId,this.currentSegmentText),this.emitMessagesChange(),this.events.onTextUpdate?.(this.currentAssistantMessageId,this.currentSegmentText))}emitMessagesChange(){this.events.onMessagesChange?.([...this.messages])}finalizeStream(){this.completeAllToolCalls(),this.currentSegmentText!==this.lastEmittedText&&this.emitTextUpdate();const e=this.getCompletedToolCalls();if(this.handlers.onStreamEnd?.(this.totalTextContent,e.length>0?e:void 0),this.currentAssistantMessageId){const n=this.messages.find(r=>r.id===this.currentAssistantMessageId);n&&this.events.onStreamEnd?.(n)}}getCompletedToolCalls(){return Array.from(this.toolCalls.values()).filter(e=>e.state==="input-complete").map(e=>({id:e.id,type:"function",function:{name:e.name,arguments:e.arguments}}))}getResult(){const e=this.getCompletedToolCalls();return{content:this.totalTextContent,thinking:this.thinkingContent||void 0,toolCalls:e.length>0?e:void 0,finishReason:this.finishReason}}getState(){return{content:this.totalTextContent,thinking:this.thinkingContent,toolCalls:new Map(this.toolCalls),toolCallOrder:[...this.toolCallOrder],finishReason:this.finishReason,done:this.isDone}}startRecording(){this.recordingEnabled=!0,this.recordingStartTime=Date.now(),this.recording={version:"1.0",timestamp:this.recordingStartTime,chunks:[]}}getRecording(){return this.recording}resetStreamState(){this.totalTextContent="",this.currentSegmentText="",this.lastEmittedText="",this.thinkingContent="",this.toolCalls.clear(),this.toolCallOrder=[],this.finishReason=null,this.isDone=!1,this.hasToolCallsSinceTextStart=!1,this.chunkStrategy.reset?.()}reset(){this.resetStreamState(),this.messages=[],this.currentAssistantMessageId=null}static async replay(e,n){return new jy(n).process(HP(e))}}function HP(t){return{async*[Symbol.asyncIterator](){for(const{chunk:e}of t.chunks)yield e}}}class GP{constructor(e){this.clientId=e}clientCreated(e){this.emitEvent("client:created",{initialMessageCount:e})}loadingChanged(e){this.emitEvent("client:loading-changed",{isLoading:e})}errorChanged(e){this.emitEvent("client:error-changed",{error:e})}textUpdated(e,n,r){this.emitEvent("processor:text-updated",{streamId:e,content:r}),this.emitEvent("client:assistant-message-updated",{messageId:n,content:r})}toolCallStateChanged(e,n,r,s,a,l){this.emitEvent("processor:tool-call-state-changed",{streamId:e,toolCallId:r,toolName:s,state:a,arguments:l}),this.emitEvent("client:tool-call-updated",{messageId:n,toolCallId:r,toolName:s,state:a,arguments:l})}toolResultStateChanged(e,n,r,s,a){this.emitEvent("processor:tool-result-state-changed",{streamId:e,toolCallId:n,content:r,state:s,error:a})}thinkingUpdated(e,n,r,s){this.emitEvent("stream:chunk:thinking",{streamId:e,messageId:n,content:r,delta:s})}approvalRequested(e,n,r,s,a){this.emitEvent("client:approval-requested",{messageId:e,toolCallId:n,toolName:r,input:s,approvalId:a})}messageAppended(e){const n=e.parts.filter(r=>r.type==="text").map(r=>r.content).join(" ").substring(0,100);this.emitEvent("client:message-appended",{messageId:e.id,role:e.role,contentPreview:n})}messageSent(e,n){this.emitEvent("client:message-sent",{messageId:e,content:n})}reloaded(e){this.emitEvent("client:reloaded",{fromMessageIndex:e})}stopped(){this.emitEvent("client:stopped")}messagesCleared(){this.emitEvent("client:messages-cleared")}toolResultAdded(e,n,r,s){this.emitEvent("tool:result-added",{toolCallId:e,toolName:n,output:r,state:s})}toolApprovalResponded(e,n,r){this.emitEvent("tool:approval-responded",{approvalId:e,toolCallId:n,approved:r})}}class KP extends GP{emitEvent(e,n){e.startsWith("client:")||e.startsWith("tool:")?Dt.emit(e,{...n,clientId:this.clientId,timestamp:Date.now()}):Dt.emit(e,{...n,timestamp:Date.now()})}}class ZP{constructor(e){if(this.body={},this.isLoading=!1,this.error=void 0,this.abortController=null,this.currentStreamId=null,this.currentMessageId=null,this.postStreamActions=[],this.uniqueId=e.id||this.generateUniqueId("chat"),this.body=e.body||{},this.connection=e.connection,this.events=new KP(this.uniqueId),this.clientToolsRef={current:new Map},e.tools)for(const n of e.tools)this.clientToolsRef.current.set(n.name,n);this.callbacksRef={current:{onResponse:e.onResponse||(()=>{}),onChunk:e.onChunk||(()=>{}),onFinish:e.onFinish||(()=>{}),onError:e.onError||(()=>{}),onMessagesChange:e.onMessagesChange||(()=>{}),onLoadingChange:e.onLoadingChange||(()=>{}),onErrorChange:e.onErrorChange||(()=>{})}},this.processor=new jy({chunkStrategy:e.streamProcessor?.chunkStrategy,initialMessages:e.initialMessages,events:{onMessagesChange:n=>{this.callbacksRef.current.onMessagesChange(n)},onStreamStart:()=>{},onStreamEnd:n=>{this.callbacksRef.current.onFinish(n)},onError:n=>{this.setError(n),this.callbacksRef.current.onError(n)},onTextUpdate:(n,r)=>{this.currentStreamId&&this.events.textUpdated(this.currentStreamId,n,r)},onThinkingUpdate:(n,r)=>{this.currentStreamId&&this.events.thinkingUpdated(this.currentStreamId,n,r)},onToolCallStateChange:(n,r,s,a)=>{const h=this.processor.getMessages().find(m=>m.id===n)?.parts.find(m=>m.type==="tool-call"&&m.id===r)?.name||"unknown";this.currentStreamId&&this.events.toolCallStateChanged(this.currentStreamId,n,r,h,s,a)},onToolCall:async n=>{const r=this.clientToolsRef.current.get(n.toolName);if(r?.execute)try{const s=await r.execute(n.input);await this.addToolResult({toolCallId:n.toolCallId,tool:n.toolName,output:s,state:"output-available"})}catch(s){await this.addToolResult({toolCallId:n.toolCallId,tool:n.toolName,output:null,state:"output-error",errorText:s.message})}},onApprovalRequest:n=>{this.events.approvalRequested(this.currentMessageId||"",n.toolCallId,n.toolName,n.input,n.approvalId)}}}),this.events.clientCreated(this.processor.getMessages().length)}generateUniqueId(e){return`${e}-${Date.now()}-${Math.random().toString(36).substring(7)}`}setIsLoading(e){this.isLoading=e,this.callbacksRef.current.onLoadingChange(e),this.events.loadingChanged(e)}setError(e){this.error=e,this.callbacksRef.current.onErrorChange(e),this.events.errorChanged(e?.message||null)}async processStream(e){this.currentStreamId=this.generateUniqueId("stream");const n=this.processor.startAssistantMessage();this.currentMessageId=n;const r={id:n,role:"assistant",parts:[],createdAt:new Date};this.events.messageAppended(r);for await(const l of e)this.callbacksRef.current.onChunk(l),this.processor.processChunk(l),await new Promise(u=>setTimeout(u,0));return this.processor.finalizeStream(),this.currentStreamId=null,this.currentMessageId=null,this.processor.getMessages().find(l=>l.id===n)||{id:n,role:"assistant",parts:[],createdAt:new Date}}async sendMessage(e){if(!e.trim()||this.isLoading)return;const n=this.processor.addUserMessage(e.trim());this.events.messageSent(n.id,e.trim()),await this.streamResponse()}async append(e){const n=DP(e,Mf);if(n.role==="system")return;const r=n;this.events.messageAppended(r);const s=this.processor.getMessages();this.processor.setMessages([...s,r]),await this.streamResponse()}async streamResponse(){this.setIsLoading(!0),this.setError(void 0),this.abortController=new AbortController;try{const e=this.processor.toModelMessages();await this.callbacksRef.current.onResponse();const n={...this.body,conversationId:this.uniqueId},r=this.connection.connect(e,n,this.abortController.signal);await this.processStream(r)}catch(e){if(e instanceof Error){if(e.name==="AbortError")return;this.setError(e),this.callbacksRef.current.onError(e)}}finally{this.abortController=null,this.setIsLoading(!1),await this.drainPostStreamActions()}}async reload(){const e=this.processor.getMessages();if(e.length===0)return;const n=e.findLastIndex(r=>r.role==="user");n!==-1&&(this.events.reloaded(n),this.processor.removeMessagesAfter(n),await this.streamResponse())}stop(){this.abortController&&(this.abortController.abort(),this.abortController=null),this.setIsLoading(!1),this.events.stopped()}clear(){this.processor.clearMessages(),this.setError(void 0),this.events.messagesCleared()}async addToolResult(e){if(this.events.toolResultAdded(e.toolCallId,e.tool,e.output,e.state||"output-available"),this.processor.addToolResult(e.toolCallId,e.output,e.errorText),this.isLoading){this.queuePostStreamAction(()=>this.checkForContinuation());return}await this.checkForContinuation()}async addToolApprovalResponse(e){const n=this.processor.getMessages();let r;for(const s of n){const a=s.parts.find(l=>l.type==="tool-call"&&l.approval?.id===e.id);if(a){r=a.id;break}}if(r&&this.events.toolApprovalResponded(e.id,r,e.approved),this.processor.addToolApprovalResponse(e.id,e.approved),this.isLoading){this.queuePostStreamAction(()=>this.checkForContinuation());return}await this.checkForContinuation()}queuePostStreamAction(e){this.postStreamActions.push(e)}async drainPostStreamActions(){for(;this.postStreamActions.length>0;)await this.postStreamActions.shift()()}async checkForContinuation(){this.shouldAutoSend()&&await this.streamResponse()}shouldAutoSend(){return this.processor.areAllToolsComplete()}getMessages(){return this.processor.getMessages()}getIsLoading(){return this.isLoading}getError(){return this.error}setMessagesManually(e){this.processor.setMessages(e)}updateOptions(e){if(e.connection!==void 0&&(this.connection=e.connection),e.body!==void 0&&(this.body=e.body),e.tools!==void 0){this.clientToolsRef.current=new Map;for(const n of e.tools)this.clientToolsRef.current.set(n.name,n)}e.onResponse!==void 0&&(this.callbacksRef.current.onResponse=e.onResponse),e.onChunk!==void 0&&(this.callbacksRef.current.onChunk=e.onChunk),e.onFinish!==void 0&&(this.callbacksRef.current.onFinish=e.onFinish),e.onError!==void 0&&(this.callbacksRef.current.onError=e.onError)}}function QP(...t){return t}function JP(t){return{async*connect(e,n){const r=NP(e);yield*t(r,n)}}}function YP(t){const e=Z.useId(),n=t.id||e,[r,s]=Z.useState(t.initialMessages||[]),[a,l]=Z.useState(!1),[u,f]=Z.useState(void 0),h=Z.useRef(t.initialMessages||[]),m=Z.useRef(!0);Z.useEffect(()=>{h.current=r},[r]);const p=Z.useRef(t);p.current=t;const _=Z.useMemo(()=>{const D=m.current?t.initialMessages||[]:h.current;return m.current=!1,new ZP({connection:p.current.connection,id:n,initialMessages:D,body:p.current.body,onResponse:p.current.onResponse,onChunk:p.current.onChunk,onFinish:p.current.onFinish,onError:p.current.onError,tools:p.current.tools,streamProcessor:t.streamProcessor,onMessagesChange:I=>{s(I)},onLoadingChange:I=>{l(I)},onErrorChange:I=>{f(I)}})},[n]);Z.useEffect(()=>{t.initialMessages&&t.initialMessages.length>0&&r.length===0&&_.setMessagesManually(t.initialMessages)},[]),Z.useEffect(()=>()=>{_.stop()},[_]);const g=Z.useCallback(async D=>{await _.sendMessage(D)},[_]),v=Z.useCallback(async D=>{await _.append(D)},[_]),x=Z.useCallback(async()=>{await _.reload()},[_]),E=Z.useCallback(()=>{_.stop()},[_]),k=Z.useCallback(()=>{_.clear()},[_]),T=Z.useCallback(D=>{_.setMessagesManually(D)},[_]),C=Z.useCallback(async D=>{await _.addToolResult(D)},[_]),j=Z.useCallback(async D=>{await _.addToolApprovalResponse(D)},[_]);return{messages:r,sendMessage:g,append:v,reload:x,stop:E,isLoading:a,error:u,setMessages:T,clear:k,addToolResult:C,addToolApprovalResponse:j}}class XP{constructor(e={},n){this.kind="text",this.config=e,this.model=n}generateId(){return`${this.name}-${Date.now()}-${Math.random().toString(36).substring(7)}`}}const WP=t=>{if(t.conversation&&t.previous_response_id)throw new Error("Cannot use both 'conversation' and 'previous_response_id' in the same request.")},e6=t=>{t6(t),WP(t)},t6=t=>{const e=t.metadata;if(e&&Object.keys(e).length>16)throw new Error("Metadata cannot have more than 16 key-value pairs.");if(e&&Object.keys(e).some(a=>a.length>64))throw new Error("Metadata keys cannot be longer than 64 characters.");if(e&&Object.values(e).some(a=>a.length>512))throw new Error("Metadata values cannot be longer than 512 characters.")};function Tg(t){if(t!==null){if(Array.isArray(t))return t.map(e=>Tg(e));if(typeof t=="object"){const e={};for(const[n,r]of Object.entries(t)){const s=Tg(r);s!==void 0&&(e[n]=s)}return e}return t}}function kl(t,e=[]){const n={...t};if(n.type==="object"&&n.properties){const r={...n.properties},s=Object.keys(r);for(const a of s){const l=r[a],u=!e.includes(a);l.type==="object"&&l.properties?r[a]=kl(l,l.required||[]):l.type==="array"&&l.items?r[a]={...l,items:kl(l.items,l.items.required||[])}:u&&(l.type&&!Array.isArray(l.type)?r[a]={...l,type:[l.type,"null"]}:Array.isArray(l.type)&&!l.type.includes("null")&&(r[a]={...l,type:[...l.type,"null"]}))}n.properties=r,n.required=s,n.additionalProperties=!1}return n.type==="array"&&n.items&&(n.items=kl(n.items,n.items.required||[])),n}function n6(t){return{type:"apply_patch"}}function r6(t){return{type:"code_interpreter",container:t.metadata.container}}function s6(t){const e=t.metadata;return{type:"computer_use_preview",display_height:e.display_height,display_width:e.display_width,environment:e.environment}}function i6(t){const e=t.metadata;return{type:"custom",name:e.name,description:e.description,format:e.format}}function a6(t){const e=t.metadata;return{type:"file_search",vector_store_ids:e.vector_store_ids,max_num_results:e.max_num_results,ranking_options:e.ranking_options,filters:e.filters}}function o6(t){const e=t.inputSchema??{type:"object",properties:{},required:[]},n=kl(e,e.required||[]);return n.additionalProperties=!1,{type:"function",name:t.name,description:t.description,parameters:n,strict:!0}}function l6(t){return{type:"image_generation",...t.metadata}}function c6(t){return{type:"local_shell"}}function u6(t){if(!t.server_url&&!t.connector_id)throw new Error("Either server_url or connector_id must be provided.");if(t.connector_id&&t.server_url)throw new Error("Only one of server_url or connector_id can be provided.")}function f6(t){const n={type:"mcp",...t.metadata};return u6(n),n}function h6(t){return{type:"shell"}}function d6(t){const e=t.metadata;return{type:e.type,search_context_size:e.search_context_size,user_location:e.user_location}}function p6(t){return t.metadata}function m6(t){return t.map(e=>{const n=new Set(["apply_patch","code_interpreter","computer_use_preview","file_search","image_generation","local_shell","mcp","shell","web_search_preview","web_search","custom"]),r=e.name;if(n.has(r))switch(r){case"apply_patch":return n6();case"code_interpreter":return r6(e);case"computer_use_preview":return s6(e);case"file_search":return a6(e);case"image_generation":return l6(e);case"local_shell":return c6();case"mcp":return f6(e);case"shell":return h6();case"web_search_preview":return d6(e);case"web_search":return p6(e);case"custom":return i6(e)}return o6(e)})}function Ie(t,e,n,r,s){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n}function W(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)}let NE=function(){const{crypto:t}=globalThis;if(t?.randomUUID)return NE=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,r=>(+r^n()&15>>+r/4).toString(16))};function Ag(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const Rg=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};class Te extends Error{}class un extends Te{constructor(e,n,r,s){super(`${un.makeMessage(e,n,r)}`),this.status=e,this.headers=s,this.requestID=s?.get("x-request-id"),this.error=n;const a=n;this.code=a?.code,this.param=a?.param,this.type=a?.type}static makeMessage(e,n,r){const s=n?.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return e&&s?`${e} ${s}`:e?`${e} status code (no body)`:s||"(no status code or body)"}static generate(e,n,r,s){if(!e||!s)return new uh({message:r,cause:Rg(n)});const a=n?.error;return e===400?new ME(e,a,r,s):e===401?new DE(e,a,r,s):e===403?new LE(e,a,r,s):e===404?new zE(e,a,r,s):e===409?new jE(e,a,r,s):e===422?new PE(e,a,r,s):e===429?new BE(e,a,r,s):e>=500?new UE(e,a,r,s):new un(e,a,r,s)}}class br extends un{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class uh extends un{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class Py extends uh{constructor({message:e}={}){super({message:e??"Request timed out."})}}class ME extends un{}class DE extends un{}class LE extends un{}class zE extends un{}class jE extends un{}class PE extends un{}class BE extends un{}class UE extends un{}class $E extends Te{constructor(){super("Could not parse response content as the length limit was reached")}}class qE extends Te{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}class cl extends Error{constructor(e){super(e)}}const g6=/^[a-z][a-z0-9+.-]*:/i,y6=t=>g6.test(t);let Bn=t=>(Bn=Array.isArray,Bn(t)),m1=Bn;function FE(t){return typeof t!="object"?{}:t??{}}function _6(t){if(!t)return!0;for(const e in t)return!1;return!0}function b6(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function gm(t){return t!=null&&typeof t=="object"&&!Array.isArray(t)}const v6=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Te(`${t} must be an integer`);if(e<0)throw new Te(`${t} must be a positive integer`);return e},x6=t=>{try{return JSON.parse(t)}catch{return}},ec=t=>new Promise(e=>setTimeout(e,t)),Ra="6.15.0",w6=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u";function S6(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const k6=()=>{const t=S6();if(t==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ra,"X-Stainless-OS":y1(Deno.build.os),"X-Stainless-Arch":g1(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:Deno.version?.deno??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ra,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(t==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ra,"X-Stainless-OS":y1(globalThis.process.platform??"unknown"),"X-Stainless-Arch":g1(globalThis.process.arch??"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":globalThis.process.version??"unknown"};const e=E6();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ra,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ra,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function E6(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const r=n.exec(navigator.userAgent);if(r){const s=r[1]||0,a=r[2]||0,l=r[3]||0;return{browser:e,version:`${s}.${a}.${l}`}}}return null}const g1=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",y1=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let _1;const C6=()=>_1??(_1=k6());function T6(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new OpenAI({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function VE(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function HE(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return VE({start(){},async pull(n){const{done:r,value:s}=await e.next();r?n.close():n.enqueue(s)},async cancel(){await e.return?.()}})}function GE(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n?.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function A6(t){if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await t[Symbol.asyncIterator]().return?.();return}const e=t.getReader(),n=e.cancel();e.releaseLock(),await n}const R6=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)}),KE="RFC3986",ZE=t=>String(t),b1={RFC1738:t=>String(t).replace(/%20/g,"+"),RFC3986:ZE},O6="RFC1738";let Og=(t,e)=>(Og=Object.hasOwn??Function.prototype.call.bind(Object.prototype.hasOwnProperty),Og(t,e));const Dr=(()=>{const t=[];for(let e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t})(),ym=1024,I6=(t,e,n,r,s)=>{if(t.length===0)return t;let a=t;if(typeof t=="symbol"?a=Symbol.prototype.toString.call(t):typeof t!="string"&&(a=String(t)),n==="iso-8859-1")return escape(a).replace(/%u[0-9a-f]{4}/gi,function(u){return"%26%23"+parseInt(u.slice(2),16)+"%3B"});let l="";for(let u=0;u<a.length;u+=ym){const f=a.length>=ym?a.slice(u,u+ym):a,h=[];for(let m=0;m<f.length;++m){let p=f.charCodeAt(m);if(p===45||p===46||p===95||p===126||p>=48&&p<=57||p>=65&&p<=90||p>=97&&p<=122||s===O6&&(p===40||p===41)){h[h.length]=f.charAt(m);continue}if(p<128){h[h.length]=Dr[p];continue}if(p<2048){h[h.length]=Dr[192|p>>6]+Dr[128|p&63];continue}if(p<55296||p>=57344){h[h.length]=Dr[224|p>>12]+Dr[128|p>>6&63]+Dr[128|p&63];continue}m+=1,p=65536+((p&1023)<<10|f.charCodeAt(m)&1023),h[h.length]=Dr[240|p>>18]+Dr[128|p>>12&63]+Dr[128|p>>6&63]+Dr[128|p&63]}l+=h.join("")}return l};function N6(t){return!t||typeof t!="object"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))}function v1(t,e){if(Bn(t)){const n=[];for(let r=0;r<t.length;r+=1)n.push(e(t[r]));return n}return e(t)}const QE={brackets(t){return String(t)+"[]"},comma:"comma",indices(t,e){return String(t)+"["+e+"]"},repeat(t){return String(t)}},JE=function(t,e){Array.prototype.push.apply(t,Bn(e)?e:[e])};let x1;const qt={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:I6,encodeValuesOnly:!1,format:KE,formatter:ZE,indices:!1,serializeDate(t){return(x1??(x1=Function.prototype.call.bind(Date.prototype.toISOString)))(t)},skipNulls:!1,strictNullHandling:!1};function M6(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="symbol"||typeof t=="bigint"}const _m={};function YE(t,e,n,r,s,a,l,u,f,h,m,p,_,g,v,x,E,k){let T=t,C=k,j=0,D=!1;for(;(C=C.get(_m))!==void 0&&!D;){const P=C.get(t);if(j+=1,typeof P<"u"){if(P===j)throw new RangeError("Cyclic object value");D=!0}typeof C.get(_m)>"u"&&(j=0)}if(typeof h=="function"?T=h(e,T):T instanceof Date?T=_?.(T):n==="comma"&&Bn(T)&&(T=v1(T,function(P){return P instanceof Date?_?.(P):P})),T===null){if(a)return f&&!x?f(e,qt.encoder,E,"key",g):e;T=""}if(M6(T)||N6(T)){if(f){const P=x?e:f(e,qt.encoder,E,"key",g);return[v?.(P)+"="+v?.(f(T,qt.encoder,E,"value",g))]}return[v?.(e)+"="+v?.(String(T))]}const I=[];if(typeof T>"u")return I;let U;if(n==="comma"&&Bn(T))x&&f&&(T=v1(T,f)),U=[{value:T.length>0?T.join(",")||null:void 0}];else if(Bn(h))U=h;else{const P=Object.keys(T);U=m?P.sort(m):P}const V=u?String(e).replace(/\./g,"%2E"):String(e),H=r&&Bn(T)&&T.length===1?V+"[]":V;if(s&&Bn(T)&&T.length===0)return H+"[]";for(let P=0;P<U.length;++P){const Q=U[P],ne=typeof Q=="object"&&typeof Q.value<"u"?Q.value:T[Q];if(l&&ne===null)continue;const me=p&&u?Q.replace(/\./g,"%2E"):Q,z=Bn(T)?typeof n=="function"?n(H,me):H:H+(p?"."+me:"["+me+"]");k.set(t,j);const M=new WeakMap;M.set(_m,k),JE(I,YE(ne,z,n,r,s,a,l,u,n==="comma"&&x&&Bn(T)?null:f,h,m,p,_,g,v,x,E,M))}return I}function D6(t=qt){if(typeof t.allowEmptyArrays<"u"&&typeof t.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof t.encodeDotInKeys<"u"&&typeof t.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(t.encoder!==null&&typeof t.encoder<"u"&&typeof t.encoder!="function")throw new TypeError("Encoder has to be a function.");const e=t.charset||qt.charset;if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let n=KE;if(typeof t.format<"u"){if(!Og(b1,t.format))throw new TypeError("Unknown format option provided.");n=t.format}const r=b1[n];let s=qt.filter;(typeof t.filter=="function"||Bn(t.filter))&&(s=t.filter);let a;if(t.arrayFormat&&t.arrayFormat in QE?a=t.arrayFormat:"indices"in t?a=t.indices?"indices":"repeat":a=qt.arrayFormat,"commaRoundTrip"in t&&typeof t.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const l=typeof t.allowDots>"u"?t.encodeDotInKeys?!0:qt.allowDots:!!t.allowDots;return{addQueryPrefix:typeof t.addQueryPrefix=="boolean"?t.addQueryPrefix:qt.addQueryPrefix,allowDots:l,allowEmptyArrays:typeof t.allowEmptyArrays=="boolean"?!!t.allowEmptyArrays:qt.allowEmptyArrays,arrayFormat:a,charset:e,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:qt.charsetSentinel,commaRoundTrip:!!t.commaRoundTrip,delimiter:typeof t.delimiter>"u"?qt.delimiter:t.delimiter,encode:typeof t.encode=="boolean"?t.encode:qt.encode,encodeDotInKeys:typeof t.encodeDotInKeys=="boolean"?t.encodeDotInKeys:qt.encodeDotInKeys,encoder:typeof t.encoder=="function"?t.encoder:qt.encoder,encodeValuesOnly:typeof t.encodeValuesOnly=="boolean"?t.encodeValuesOnly:qt.encodeValuesOnly,filter:s,format:n,formatter:r,serializeDate:typeof t.serializeDate=="function"?t.serializeDate:qt.serializeDate,skipNulls:typeof t.skipNulls=="boolean"?t.skipNulls:qt.skipNulls,sort:typeof t.sort=="function"?t.sort:null,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:qt.strictNullHandling}}function L6(t,e={}){let n=t;const r=D6(e);let s,a;typeof r.filter=="function"?(a=r.filter,n=a("",n)):Bn(r.filter)&&(a=r.filter,s=a);const l=[];if(typeof n!="object"||n===null)return"";const u=QE[r.arrayFormat],f=u==="comma"&&r.commaRoundTrip;s||(s=Object.keys(n)),r.sort&&s.sort(r.sort);const h=new WeakMap;for(let _=0;_<s.length;++_){const g=s[_];r.skipNulls&&n[g]===null||JE(l,YE(n[g],g,u,f,r.allowEmptyArrays,r.strictNullHandling,r.skipNulls,r.encodeDotInKeys,r.encode?r.encoder:null,r.filter,r.sort,r.allowDots,r.serializeDate,r.format,r.formatter,r.encodeValuesOnly,r.charset,h))}const m=l.join(r.delimiter);let p=r.addQueryPrefix===!0?"?":"";return r.charsetSentinel&&(r.charset==="iso-8859-1"?p+="utf8=%26%2310003%3B&":p+="utf8=%E2%9C%93&"),m.length>0?p+m:""}function z6(t){let e=0;for(const s of t)e+=s.length;const n=new Uint8Array(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return n}let w1;function By(t){let e;return(w1??(e=new globalThis.TextEncoder,w1=e.encode.bind(e)))(t)}let S1;function k1(t){let e;return(S1??(e=new globalThis.TextDecoder,S1=e.decode.bind(e)))(t)}var Yn,Xn;class fh{constructor(){Yn.set(this,void 0),Xn.set(this,void 0),Ie(this,Yn,new Uint8Array),Ie(this,Xn,null)}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?By(e):e;Ie(this,Yn,z6([W(this,Yn,"f"),n]));const r=[];let s;for(;(s=j6(W(this,Yn,"f"),W(this,Xn,"f")))!=null;){if(s.carriage&&W(this,Xn,"f")==null){Ie(this,Xn,s.index);continue}if(W(this,Xn,"f")!=null&&(s.index!==W(this,Xn,"f")+1||s.carriage)){r.push(k1(W(this,Yn,"f").subarray(0,W(this,Xn,"f")-1))),Ie(this,Yn,W(this,Yn,"f").subarray(W(this,Xn,"f"))),Ie(this,Xn,null);continue}const a=W(this,Xn,"f")!==null?s.preceding-1:s.preceding,l=k1(W(this,Yn,"f").subarray(0,a));r.push(l),Ie(this,Yn,W(this,Yn,"f").subarray(s.index)),Ie(this,Xn,null)}return r}flush(){return W(this,Yn,"f").length?this.decode(`
`):[]}}Yn=new WeakMap,Xn=new WeakMap;fh.NEWLINE_CHARS=new Set([`
`,"\r"]);fh.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function j6(t,e){for(let s=e??0;s<t.length;s++){if(t[s]===10)return{preceding:s,index:s+1,carriage:!1};if(t[s]===13)return{preceding:s,index:s+1,carriage:!0}}return null}function P6(t){for(let r=0;r<t.length-1;r++){if(t[r]===10&&t[r+1]===10||t[r]===13&&t[r+1]===13)return r+2;if(t[r]===13&&t[r+1]===10&&r+3<t.length&&t[r+2]===13&&t[r+3]===10)return r+4}return-1}const Df={off:0,error:200,warn:300,info:400,debug:500},E1=(t,e,n)=>{if(t){if(b6(Df,t))return t;ln(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(Df))}`)}};function ul(){}function Ru(t,e,n){return!e||Df[t]>Df[n]?ul:e[t].bind(e)}const B6={error:ul,warn:ul,info:ul,debug:ul};let C1=new WeakMap;function ln(t){const e=t.logger,n=t.logLevel??"off";if(!e)return B6;const r=C1.get(e);if(r&&r[0]===n)return r[1];const s={error:Ru("error",e,n),warn:Ru("warn",e,n),info:Ru("info",e,n),debug:Ru("debug",e,n)};return C1.set(e,[n,s]),s}const ki=t=>(t.options&&(t.options={...t.options},delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);var Wo;class Br{constructor(e,n,r){this.iterator=e,Wo.set(this,void 0),this.controller=n,Ie(this,Wo,r)}static fromSSEResponse(e,n,r){let s=!1;const a=r?ln(r):console;async function*l(){if(s)throw new Te("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let u=!1;try{for await(const f of U6(e,n))if(!u){if(f.data.startsWith("[DONE]")){u=!0;continue}if(f.event===null||!f.event.startsWith("thread.")){let h;try{h=JSON.parse(f.data)}catch(m){throw a.error("Could not parse message into JSON:",f.data),a.error("From chunk:",f.raw),m}if(h&&h.error)throw new un(void 0,h.error,void 0,e.headers);yield h}else{let h;try{h=JSON.parse(f.data)}catch(m){throw console.error("Could not parse message into JSON:",f.data),console.error("From chunk:",f.raw),m}if(f.event=="error")throw new un(void 0,h.error,h.message,void 0);yield{event:f.event,data:h}}}u=!0}catch(f){if(Ag(f))return;throw f}finally{u||n.abort()}}return new Br(l,n,r)}static fromReadableStream(e,n,r){let s=!1;async function*a(){const u=new fh,f=GE(e);for await(const h of f)for(const m of u.decode(h))yield m;for(const h of u.flush())yield h}async function*l(){if(s)throw new Te("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let u=!1;try{for await(const f of a())u||f&&(yield JSON.parse(f));u=!0}catch(f){if(Ag(f))return;throw f}finally{u||n.abort()}}return new Br(l,n,r)}[(Wo=new WeakMap,Symbol.asyncIterator)](){return this.iterator()}tee(){const e=[],n=[],r=this.iterator(),s=a=>({next:()=>{if(a.length===0){const l=r.next();e.push(l),n.push(l)}return a.shift()}});return[new Br(()=>s(e),this.controller,W(this,Wo,"f")),new Br(()=>s(n),this.controller,W(this,Wo,"f"))]}toReadableStream(){const e=this;let n;return VE({async start(){n=e[Symbol.asyncIterator]()},async pull(r){try{const{value:s,done:a}=await n.next();if(a)return r.close();const l=By(JSON.stringify(s)+`
`);r.enqueue(l)}catch(s){r.error(s)}},async cancel(){await n.return?.()}})}}async function*U6(t,e){if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Te("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Te("Attempted to iterate over a response with no body");const n=new q6,r=new fh,s=GE(t.body);for await(const a of $6(s))for(const l of r.decode(a)){const u=n.decode(l);u&&(yield u)}for(const a of r.flush()){const l=n.decode(a);l&&(yield l)}}async function*$6(t){let e=new Uint8Array;for await(const n of t){if(n==null)continue;const r=n instanceof ArrayBuffer?new Uint8Array(n):typeof n=="string"?By(n):n;let s=new Uint8Array(e.length+r.length);s.set(e),s.set(r,e.length),e=s;let a;for(;(a=P6(e))!==-1;)yield e.slice(0,a),e=e.slice(a)}e.length>0&&(yield e)}class q6{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const a={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],a}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,r,s]=F6(e,":");return s.startsWith(" ")&&(s=s.substring(1)),n==="event"?this.event=s:n==="data"&&this.data.push(s),null}}function F6(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}async function XE(t,e){const{response:n,requestLogID:r,retryOfRequestLogID:s,startTime:a}=e,l=await(async()=>{if(e.options.stream)return ln(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):Br.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const f=n.headers.get("content-type")?.split(";")[0]?.trim();if(f?.includes("application/json")||f?.endsWith("+json")){const p=await n.json();return WE(p,n)}return await n.text()})();return ln(t).debug(`[${r}] response parsed`,ki({retryOfRequestLogID:s,url:n.url,status:n.status,body:l,durationMs:Date.now()-a})),l}function WE(t,e){return!t||typeof t!="object"||Array.isArray(t)?t:Object.defineProperty(t,"_request_id",{value:e.headers.get("x-request-id"),enumerable:!1})}var fl;class hh extends Promise{constructor(e,n,r=XE){super(s=>{s(null)}),this.responsePromise=n,this.parseResponse=r,fl.set(this,void 0),Ie(this,fl,e)}_thenUnwrap(e){return new hh(W(this,fl,"f"),this.responsePromise,async(n,r)=>WE(e(await this.parseResponse(n,r),r),r.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n,request_id:n.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(W(this,fl,"f"),e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}fl=new WeakMap;var Ou;class Uy{constructor(e,n,r,s){Ou.set(this,void 0),Ie(this,Ou,e),this.options=s,this.response=n,this.body=r}hasNextPage(){return this.getPaginatedItems().length?this.nextPageRequestOptions()!=null:!1}async getNextPage(){const e=this.nextPageRequestOptions();if(!e)throw new Te("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");return await W(this,Ou,"f").requestAPIList(this.constructor,e)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(Ou=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const n of e.getPaginatedItems())yield n}}class V6 extends hh{constructor(e,n,r){super(e,n,async(s,a)=>new r(s,a.response,await XE(s,a),a.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const n of e)yield n}}class dh extends Uy{constructor(e,n,r,s){super(e,n,r,s),this.data=r.data||[],this.object=r.object}getPaginatedItems(){return this.data??[]}nextPageRequestOptions(){return null}}class jt extends Uy{constructor(e,n,r,s){super(e,n,r,s),this.data=r.data||[],this.has_more=r.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){const e=this.getPaginatedItems(),n=e[e.length-1]?.id;return n?{...this.options,query:{...FE(this.options.query),after:n}}:null}}class Lf extends Uy{constructor(e,n,r,s){super(e,n,r,s),this.data=r.data||[],this.has_more=r.has_more||!1,this.last_id=r.last_id||""}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){const e=this.last_id;return e?{...this.options,query:{...FE(this.options.query),after:e}}:null}}const eC=()=>{if(typeof File>"u"){const{process:t}=globalThis,e=typeof t?.versions?.node=="string"&&parseInt(t.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(e?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function El(t,e,n){return eC(),new File(t,e??"unknown_file",n)}function Ju(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const $y=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function",T1=async(t,e)=>Ig(t.body)?{...t,body:await tC(t.body,e)}:t,Ii=async(t,e)=>({...t,body:await tC(t.body,e)}),A1=new WeakMap;function H6(t){const e=typeof t=="function"?t:t.fetch,n=A1.get(e);if(n)return n;const r=(async()=>{try{const s="Response"in e?e.Response:(await e("data:,")).constructor,a=new FormData;return a.toString()!==await new s(a).text()}catch{return!0}})();return A1.set(e,r),r}const tC=async(t,e)=>{if(!await H6(e))throw new TypeError("The provided fetch function does not support file uploads with the current global FormData class.");const n=new FormData;return await Promise.all(Object.entries(t||{}).map(([r,s])=>Ng(n,r,s))),n},nC=t=>t instanceof Blob&&"name"in t,G6=t=>typeof t=="object"&&t!==null&&(t instanceof Response||$y(t)||nC(t)),Ig=t=>{if(G6(t))return!0;if(Array.isArray(t))return t.some(Ig);if(t&&typeof t=="object"){for(const e in t)if(Ig(t[e]))return!0}return!1},Ng=async(t,e,n)=>{if(n!==void 0){if(n==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")t.append(e,String(n));else if(n instanceof Response)t.append(e,El([await n.blob()],Ju(n)));else if($y(n))t.append(e,El([await new Response(HE(n)).blob()],Ju(n)));else if(nC(n))t.append(e,n,Ju(n));else if(Array.isArray(n))await Promise.all(n.map(r=>Ng(t,e+"[]",r)));else if(typeof n=="object")await Promise.all(Object.entries(n).map(([r,s])=>Ng(t,`${e}[${r}]`,s)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${n} instead`)}},rC=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",K6=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&rC(t),Z6=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function Q6(t,e,n){if(eC(),t=await t,K6(t))return t instanceof File?t:El([await t.arrayBuffer()],t.name);if(Z6(t)){const s=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),El(await Mg(s),e,n)}const r=await Mg(t);if(e||(e=Ju(t)),!n?.type){const s=r.find(a=>typeof a=="object"&&"type"in a&&a.type);typeof s=="string"&&(n={...n,type:s})}return El(r,e,n)}async function Mg(t){let e=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)e.push(t);else if(rC(t))e.push(t instanceof Blob?t:await t.arrayBuffer());else if($y(t))for await(const n of t)e.push(...await Mg(n));else{const n=t?.constructor?.name;throw new Error(`Unexpected data type: ${typeof t}${n?`; constructor: ${n}`:""}${J6(t)}`)}return e}function J6(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}class ke{constructor(e){this._client=e}}function sC(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const R1=Object.freeze(Object.create(null)),Y6=(t=sC)=>function(n,...r){if(n.length===1)return n[0];let s=!1;const a=[],l=n.reduce((m,p,_)=>{/[?#]/.test(p)&&(s=!0);const g=r[_];let v=(s?encodeURIComponent:t)(""+g);return _!==r.length&&(g==null||typeof g=="object"&&g.toString===Object.getPrototypeOf(Object.getPrototypeOf(g.hasOwnProperty??R1)??R1)?.toString)&&(v=g+"",a.push({start:m.length+p.length,length:v.length,error:`Value of type ${Object.prototype.toString.call(g).slice(8,-1)} is not a valid path parameter`})),m+p+(_===r.length?"":v)},""),u=l.split(/[?#]/,1)[0],f=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let h;for(;(h=f.exec(u))!==null;)a.push({start:h.index,length:h[0].length,error:`Value "${h[0]}" can't be safely passed as a path parameter`});if(a.sort((m,p)=>m.start-p.start),a.length>0){let m=0;const p=a.reduce((_,g)=>{const v=" ".repeat(g.start-m),x="^".repeat(g.length);return m=g.start+g.length,_+v+x},"");throw new Te(`Path parameters result in path with invalid segments:
${a.map(_=>_.error).join(`
`)}
${l}
${p}`)}return l},fe=Y6(sC);let iC=class extends ke{list(e,n={},r){return this._client.getAPIList(fe`/chat/completions/${e}/messages`,jt,{query:n,...r})}};function zf(t){return t!==void 0&&"function"in t&&t.function!==void 0}function qy(t){return t?.$brand==="auto-parseable-response-format"}function tc(t){return t?.$brand==="auto-parseable-tool"}function X6(t,e){return!e||!aC(e)?{...t,choices:t.choices.map(n=>(oC(n.message.tool_calls),{...n,message:{...n.message,parsed:null,...n.message.tool_calls?{tool_calls:n.message.tool_calls}:void 0}}))}:Fy(t,e)}function Fy(t,e){const n=t.choices.map(r=>{if(r.finish_reason==="length")throw new $E;if(r.finish_reason==="content_filter")throw new qE;return oC(r.message.tool_calls),{...r,message:{...r.message,...r.message.tool_calls?{tool_calls:r.message.tool_calls?.map(s=>eB(e,s))??void 0}:void 0,parsed:r.message.content&&!r.message.refusal?W6(e,r.message.content):null}}});return{...t,choices:n}}function W6(t,e){return t.response_format?.type!=="json_schema"?null:t.response_format?.type==="json_schema"?"$parseRaw"in t.response_format?t.response_format.$parseRaw(e):JSON.parse(e):null}function eB(t,e){const n=t.tools?.find(r=>zf(r)&&r.function?.name===e.function.name);return{...e,function:{...e.function,parsed_arguments:tc(n)?n.$parseRaw(e.function.arguments):n?.function.strict?JSON.parse(e.function.arguments):null}}}function tB(t,e){if(!t||!("tools"in t)||!t.tools)return!1;const n=t.tools?.find(r=>zf(r)&&r.function?.name===e.function.name);return zf(n)&&(tc(n)||n?.function.strict||!1)}function aC(t){return qy(t.response_format)?!0:t.tools?.some(e=>tc(e)||e.type==="function"&&e.function.strict===!0)??!1}function oC(t){for(const e of t||[])if(e.type!=="function")throw new Te(`Currently only \`function\` tool calls are supported; Received \`${e.type}\``)}function nB(t){for(const e of t??[]){if(e.type!=="function")throw new Te(`Currently only \`function\` tool types support auto-parsing; Received \`${e.type}\``);if(e.function.strict!==!0)throw new Te(`The \`${e.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}const jf=t=>t?.role==="assistant",lC=t=>t?.role==="tool";var Dg,Yu,Xu,hl,dl,Wu,pl,hs,ml,Pf,Bf,Oa,cC;class Vy{constructor(){Dg.add(this),this.controller=new AbortController,Yu.set(this,void 0),Xu.set(this,()=>{}),hl.set(this,()=>{}),dl.set(this,void 0),Wu.set(this,()=>{}),pl.set(this,()=>{}),hs.set(this,{}),ml.set(this,!1),Pf.set(this,!1),Bf.set(this,!1),Oa.set(this,!1),Ie(this,Yu,new Promise((e,n)=>{Ie(this,Xu,e,"f"),Ie(this,hl,n,"f")})),Ie(this,dl,new Promise((e,n)=>{Ie(this,Wu,e,"f"),Ie(this,pl,n,"f")})),W(this,Yu,"f").catch(()=>{}),W(this,dl,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},W(this,Dg,"m",cC).bind(this))},0)}_connected(){this.ended||(W(this,Xu,"f").call(this),this._emit("connect"))}get ended(){return W(this,ml,"f")}get errored(){return W(this,Pf,"f")}get aborted(){return W(this,Bf,"f")}abort(){this.controller.abort()}on(e,n){return(W(this,hs,"f")[e]||(W(this,hs,"f")[e]=[])).push({listener:n}),this}off(e,n){const r=W(this,hs,"f")[e];if(!r)return this;const s=r.findIndex(a=>a.listener===n);return s>=0&&r.splice(s,1),this}once(e,n){return(W(this,hs,"f")[e]||(W(this,hs,"f")[e]=[])).push({listener:n,once:!0}),this}emitted(e){return new Promise((n,r)=>{Ie(this,Oa,!0),e!=="error"&&this.once("error",r),this.once(e,n)})}async done(){Ie(this,Oa,!0),await W(this,dl,"f")}_emit(e,...n){if(W(this,ml,"f"))return;e==="end"&&(Ie(this,ml,!0),W(this,Wu,"f").call(this));const r=W(this,hs,"f")[e];if(r&&(W(this,hs,"f")[e]=r.filter(s=>!s.once),r.forEach(({listener:s})=>s(...n))),e==="abort"){const s=n[0];!W(this,Oa,"f")&&!r?.length&&Promise.reject(s),W(this,hl,"f").call(this,s),W(this,pl,"f").call(this,s),this._emit("end");return}if(e==="error"){const s=n[0];!W(this,Oa,"f")&&!r?.length&&Promise.reject(s),W(this,hl,"f").call(this,s),W(this,pl,"f").call(this,s),this._emit("end")}}_emitFinal(){}}Yu=new WeakMap,Xu=new WeakMap,hl=new WeakMap,dl=new WeakMap,Wu=new WeakMap,pl=new WeakMap,hs=new WeakMap,ml=new WeakMap,Pf=new WeakMap,Bf=new WeakMap,Oa=new WeakMap,Dg=new WeakSet,cC=function(e){if(Ie(this,Pf,!0),e instanceof Error&&e.name==="AbortError"&&(e=new br),e instanceof br)return Ie(this,Bf,!0),this._emit("abort",e);if(e instanceof Te)return this._emit("error",e);if(e instanceof Error){const n=new Te(e.message);return n.cause=e,this._emit("error",n)}return this._emit("error",new Te(String(e)))};function rB(t){return typeof t.parse=="function"}var En,Lg,Uf,zg,jg,Pg,uC,fC;const sB=10;class hC extends Vy{constructor(){super(...arguments),En.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){this._chatCompletions.push(e),this._emit("chatCompletion",e);const n=e.choices[0]?.message;return n&&this._addMessage(n),e}_addMessage(e,n=!0){if("content"in e||(e.content=null),this.messages.push(e),n){if(this._emit("message",e),lC(e)&&e.content)this._emit("functionToolCallResult",e.content);else if(jf(e)&&e.tool_calls)for(const r of e.tool_calls)r.type==="function"&&this._emit("functionToolCall",r.function)}}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new Te("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),W(this,En,"m",Lg).call(this)}async finalMessage(){return await this.done(),W(this,En,"m",Uf).call(this)}async finalFunctionToolCall(){return await this.done(),W(this,En,"m",zg).call(this)}async finalFunctionToolCallResult(){return await this.done(),W(this,En,"m",jg).call(this)}async totalUsage(){return await this.done(),W(this,En,"m",Pg).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const n=W(this,En,"m",Uf).call(this);n&&this._emit("finalMessage",n);const r=W(this,En,"m",Lg).call(this);r&&this._emit("finalContent",r);const s=W(this,En,"m",zg).call(this);s&&this._emit("finalFunctionToolCall",s);const a=W(this,En,"m",jg).call(this);a!=null&&this._emit("finalFunctionToolCallResult",a),this._chatCompletions.some(l=>l.usage)&&this._emit("totalUsage",W(this,En,"m",Pg).call(this))}async _createChatCompletion(e,n,r){const s=r?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),W(this,En,"m",uC).call(this,n);const a=await e.chat.completions.create({...n,stream:!1},{...r,signal:this.controller.signal});return this._connected(),this._addChatCompletion(Fy(a,n))}async _runChatCompletion(e,n,r){for(const s of n.messages)this._addMessage(s,!1);return await this._createChatCompletion(e,n,r)}async _runTools(e,n,r){const s="tool",{tool_choice:a="auto",stream:l,...u}=n,f=typeof a!="string"&&a.type==="function"&&a?.function?.name,{maxChatCompletions:h=sB}=r||{},m=n.tools.map(g=>{if(tc(g)){if(!g.$callback)throw new Te("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:g.$callback,name:g.function.name,description:g.function.description||"",parameters:g.function.parameters,parse:g.$parseRaw,strict:!0}}}return g}),p={};for(const g of m)g.type==="function"&&(p[g.function.name||g.function.function.name]=g.function);const _="tools"in n?m.map(g=>g.type==="function"?{type:"function",function:{name:g.function.name||g.function.function.name,parameters:g.function.parameters,description:g.function.description,strict:g.function.strict}}:g):void 0;for(const g of n.messages)this._addMessage(g,!1);for(let g=0;g<h;++g){const x=(await this._createChatCompletion(e,{...u,tool_choice:a,tools:_,messages:[...this.messages]},r)).choices[0]?.message;if(!x)throw new Te("missing message in ChatCompletion response");if(!x.tool_calls?.length)return;for(const E of x.tool_calls){if(E.type!=="function")continue;const k=E.id,{name:T,arguments:C}=E.function,j=p[T];if(j){if(f&&f!==T){const V=`Invalid tool_call: ${JSON.stringify(T)}. ${JSON.stringify(f)} requested. Please try again`;this._addMessage({role:s,tool_call_id:k,content:V});continue}}else{const V=`Invalid tool_call: ${JSON.stringify(T)}. Available options are: ${Object.keys(p).map(H=>JSON.stringify(H)).join(", ")}. Please try again`;this._addMessage({role:s,tool_call_id:k,content:V});continue}let D;try{D=rB(j)?await j.parse(C):C}catch(V){const H=V instanceof Error?V.message:String(V);this._addMessage({role:s,tool_call_id:k,content:H});continue}const I=await j.function(D,this),U=W(this,En,"m",fC).call(this,I);if(this._addMessage({role:s,tool_call_id:k,content:U}),f)return}}}}En=new WeakSet,Lg=function(){return W(this,En,"m",Uf).call(this).content??null},Uf=function(){let e=this.messages.length;for(;e-- >0;){const n=this.messages[e];if(jf(n))return{...n,content:n.content??null,refusal:n.refusal??null}}throw new Te("stream ended without producing a ChatCompletionMessage with role=assistant")},zg=function(){for(let e=this.messages.length-1;e>=0;e--){const n=this.messages[e];if(jf(n)&&n?.tool_calls?.length)return n.tool_calls.filter(r=>r.type==="function").at(-1)?.function}},jg=function(){for(let e=this.messages.length-1;e>=0;e--){const n=this.messages[e];if(lC(n)&&n.content!=null&&typeof n.content=="string"&&this.messages.some(r=>r.role==="assistant"&&r.tool_calls?.some(s=>s.type==="function"&&s.id===n.tool_call_id)))return n.content}},Pg=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:n}of this._chatCompletions)n&&(e.completion_tokens+=n.completion_tokens,e.prompt_tokens+=n.prompt_tokens,e.total_tokens+=n.total_tokens);return e},uC=function(e){if(e.n!=null&&e.n>1)throw new Te("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},fC=function(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)};class Hy extends hC{static runTools(e,n,r){const s=new Hy,a={...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"runTools"}};return s._run(()=>s._runTools(e,n,a)),s}_addMessage(e,n=!0){super._addMessage(e,n),jf(e)&&e.content&&this._emit("content",e.content)}}const dC=1,pC=2,mC=4,gC=8,yC=16,_C=32,bC=64,vC=128,xC=256,wC=vC|xC,SC=yC|_C|wC|bC,kC=dC|pC|SC,EC=mC|gC,iB=kC|EC,Xt={STR:dC,NUM:pC,ARR:mC,OBJ:gC,NULL:yC,BOOL:_C,NAN:bC,INFINITY:vC,MINUS_INFINITY:xC,INF:wC,SPECIAL:SC,ATOM:kC,COLLECTION:EC,ALL:iB};class aB extends Error{}class oB extends Error{}function lB(t,e=Xt.ALL){if(typeof t!="string")throw new TypeError(`expecting str, got ${typeof t}`);if(!t.trim())throw new Error(`${t} is empty`);return cB(t.trim(),e)}const cB=(t,e)=>{const n=t.length;let r=0;const s=_=>{throw new aB(`${_} at position ${r}`)},a=_=>{throw new oB(`${_} at position ${r}`)},l=()=>(p(),r>=n&&s("Unexpected end of input"),t[r]==='"'?u():t[r]==="{"?f():t[r]==="["?h():t.substring(r,r+4)==="null"||Xt.NULL&e&&n-r<4&&"null".startsWith(t.substring(r))?(r+=4,null):t.substring(r,r+4)==="true"||Xt.BOOL&e&&n-r<4&&"true".startsWith(t.substring(r))?(r+=4,!0):t.substring(r,r+5)==="false"||Xt.BOOL&e&&n-r<5&&"false".startsWith(t.substring(r))?(r+=5,!1):t.substring(r,r+8)==="Infinity"||Xt.INFINITY&e&&n-r<8&&"Infinity".startsWith(t.substring(r))?(r+=8,1/0):t.substring(r,r+9)==="-Infinity"||Xt.MINUS_INFINITY&e&&1<n-r&&n-r<9&&"-Infinity".startsWith(t.substring(r))?(r+=9,-1/0):t.substring(r,r+3)==="NaN"||Xt.NAN&e&&n-r<3&&"NaN".startsWith(t.substring(r))?(r+=3,NaN):m()),u=()=>{const _=r;let g=!1;for(r++;r<n&&(t[r]!=='"'||g&&t[r-1]==="\\");)g=t[r]==="\\"?!g:!1,r++;if(t.charAt(r)=='"')try{return JSON.parse(t.substring(_,++r-Number(g)))}catch(v){a(String(v))}else if(Xt.STR&e)try{return JSON.parse(t.substring(_,r-Number(g))+'"')}catch{return JSON.parse(t.substring(_,t.lastIndexOf("\\"))+'"')}s("Unterminated string literal")},f=()=>{r++,p();const _={};try{for(;t[r]!=="}";){if(p(),r>=n&&Xt.OBJ&e)return _;const g=u();p(),r++;try{const v=l();Object.defineProperty(_,g,{value:v,writable:!0,enumerable:!0,configurable:!0})}catch(v){if(Xt.OBJ&e)return _;throw v}p(),t[r]===","&&r++}}catch{if(Xt.OBJ&e)return _;s("Expected '}' at end of object")}return r++,_},h=()=>{r++;const _=[];try{for(;t[r]!=="]";)_.push(l()),p(),t[r]===","&&r++}catch{if(Xt.ARR&e)return _;s("Expected ']' at end of array")}return r++,_},m=()=>{if(r===0){t==="-"&&Xt.NUM&e&&s("Not sure what '-' is");try{return JSON.parse(t)}catch(g){if(Xt.NUM&e)try{return t[t.length-1]==="."?JSON.parse(t.substring(0,t.lastIndexOf("."))):JSON.parse(t.substring(0,t.lastIndexOf("e")))}catch{}a(String(g))}}const _=r;for(t[r]==="-"&&r++;t[r]&&!",]}".includes(t[r]);)r++;r==n&&!(Xt.NUM&e)&&s("Unterminated number literal");try{return JSON.parse(t.substring(_,r))}catch{t.substring(_,r)==="-"&&Xt.NUM&e&&s("Not sure what '-' is");try{return JSON.parse(t.substring(_,t.lastIndexOf("e")))}catch(v){a(String(v))}}},p=()=>{for(;r<n&&` 
\r	`.includes(t[r]);)r++};return l()},O1=t=>lB(t,Xt.ALL^Xt.NUM);var $t,fs,ka,Fs,bm,Iu,vm,xm,wm,Nu,Sm,I1;class $l extends hC{constructor(e){super(),$t.add(this),fs.set(this,void 0),ka.set(this,void 0),Fs.set(this,void 0),Ie(this,fs,e),Ie(this,ka,[])}get currentChatCompletionSnapshot(){return W(this,Fs,"f")}static fromReadableStream(e){const n=new $l(null);return n._run(()=>n._fromReadableStream(e)),n}static createChatCompletion(e,n,r){const s=new $l(n);return s._run(()=>s._runChatCompletion(e,{...n,stream:!0},{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),s}async _createChatCompletion(e,n,r){super._createChatCompletion;const s=r?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),W(this,$t,"m",bm).call(this);const a=await e.chat.completions.create({...n,stream:!0},{...r,signal:this.controller.signal});this._connected();for await(const l of a)W(this,$t,"m",vm).call(this,l);if(a.controller.signal?.aborted)throw new br;return this._addChatCompletion(W(this,$t,"m",Nu).call(this))}async _fromReadableStream(e,n){const r=n?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),W(this,$t,"m",bm).call(this),this._connected();const s=Br.fromReadableStream(e,this.controller);let a;for await(const l of s)a&&a!==l.id&&this._addChatCompletion(W(this,$t,"m",Nu).call(this)),W(this,$t,"m",vm).call(this,l),a=l.id;if(s.controller.signal?.aborted)throw new br;return this._addChatCompletion(W(this,$t,"m",Nu).call(this))}[(fs=new WeakMap,ka=new WeakMap,Fs=new WeakMap,$t=new WeakSet,bm=function(){this.ended||Ie(this,Fs,void 0)},Iu=function(n){let r=W(this,ka,"f")[n.index];return r||(r={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},W(this,ka,"f")[n.index]=r,r)},vm=function(n){if(this.ended)return;const r=W(this,$t,"m",I1).call(this,n);this._emit("chunk",n,r);for(const s of n.choices){const a=r.choices[s.index];s.delta.content!=null&&a.message?.role==="assistant"&&a.message?.content&&(this._emit("content",s.delta.content,a.message.content),this._emit("content.delta",{delta:s.delta.content,snapshot:a.message.content,parsed:a.message.parsed})),s.delta.refusal!=null&&a.message?.role==="assistant"&&a.message?.refusal&&this._emit("refusal.delta",{delta:s.delta.refusal,snapshot:a.message.refusal}),s.logprobs?.content!=null&&a.message?.role==="assistant"&&this._emit("logprobs.content.delta",{content:s.logprobs?.content,snapshot:a.logprobs?.content??[]}),s.logprobs?.refusal!=null&&a.message?.role==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:s.logprobs?.refusal,snapshot:a.logprobs?.refusal??[]});const l=W(this,$t,"m",Iu).call(this,a);a.finish_reason&&(W(this,$t,"m",wm).call(this,a),l.current_tool_call_index!=null&&W(this,$t,"m",xm).call(this,a,l.current_tool_call_index));for(const u of s.delta.tool_calls??[])l.current_tool_call_index!==u.index&&(W(this,$t,"m",wm).call(this,a),l.current_tool_call_index!=null&&W(this,$t,"m",xm).call(this,a,l.current_tool_call_index)),l.current_tool_call_index=u.index;for(const u of s.delta.tool_calls??[]){const f=a.message.tool_calls?.[u.index];f?.type&&(f?.type==="function"?this._emit("tool_calls.function.arguments.delta",{name:f.function?.name,index:u.index,arguments:f.function.arguments,parsed_arguments:f.function.parsed_arguments,arguments_delta:u.function?.arguments??""}):(f?.type,void 0))}}},xm=function(n,r){if(W(this,$t,"m",Iu).call(this,n).done_tool_calls.has(r))return;const a=n.message.tool_calls?.[r];if(!a)throw new Error("no tool call snapshot");if(!a.type)throw new Error("tool call snapshot missing `type`");if(a.type==="function"){const l=W(this,fs,"f")?.tools?.find(u=>zf(u)&&u.function.name===a.function.name);this._emit("tool_calls.function.arguments.done",{name:a.function.name,index:r,arguments:a.function.arguments,parsed_arguments:tc(l)?l.$parseRaw(a.function.arguments):l?.function.strict?JSON.parse(a.function.arguments):null})}else a.type},wm=function(n){const r=W(this,$t,"m",Iu).call(this,n);if(n.message.content&&!r.content_done){r.content_done=!0;const s=W(this,$t,"m",Sm).call(this);this._emit("content.done",{content:n.message.content,parsed:s?s.$parseRaw(n.message.content):null})}n.message.refusal&&!r.refusal_done&&(r.refusal_done=!0,this._emit("refusal.done",{refusal:n.message.refusal})),n.logprobs?.content&&!r.logprobs_content_done&&(r.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:n.logprobs.content})),n.logprobs?.refusal&&!r.logprobs_refusal_done&&(r.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:n.logprobs.refusal}))},Nu=function(){if(this.ended)throw new Te("stream has ended, this shouldn't happen");const n=W(this,Fs,"f");if(!n)throw new Te("request ended without sending any chunks");return Ie(this,Fs,void 0),Ie(this,ka,[]),uB(n,W(this,fs,"f"))},Sm=function(){const n=W(this,fs,"f")?.response_format;return qy(n)?n:null},I1=function(n){var r,s,a,l;let u=W(this,Fs,"f");const{choices:f,...h}=n;u?Object.assign(u,h):u=Ie(this,Fs,{...h,choices:[]});for(const{delta:m,finish_reason:p,index:_,logprobs:g=null,...v}of n.choices){let x=u.choices[_];if(x||(x=u.choices[_]={finish_reason:p,index:_,message:{},logprobs:g,...v}),g)if(!x.logprobs)x.logprobs=Object.assign({},g);else{const{content:I,refusal:U,...V}=g;Object.assign(x.logprobs,V),I&&((r=x.logprobs).content??(r.content=[]),x.logprobs.content.push(...I)),U&&((s=x.logprobs).refusal??(s.refusal=[]),x.logprobs.refusal.push(...U))}if(p&&(x.finish_reason=p,W(this,fs,"f")&&aC(W(this,fs,"f")))){if(p==="length")throw new $E;if(p==="content_filter")throw new qE}if(Object.assign(x,v),!m)continue;const{content:E,refusal:k,function_call:T,role:C,tool_calls:j,...D}=m;if(Object.assign(x.message,D),k&&(x.message.refusal=(x.message.refusal||"")+k),C&&(x.message.role=C),T&&(x.message.function_call?(T.name&&(x.message.function_call.name=T.name),T.arguments&&((a=x.message.function_call).arguments??(a.arguments=""),x.message.function_call.arguments+=T.arguments)):x.message.function_call=T),E&&(x.message.content=(x.message.content||"")+E,!x.message.refusal&&W(this,$t,"m",Sm).call(this)&&(x.message.parsed=O1(x.message.content))),j){x.message.tool_calls||(x.message.tool_calls=[]);for(const{index:I,id:U,type:V,function:H,...P}of j){const Q=(l=x.message.tool_calls)[I]??(l[I]={});Object.assign(Q,P),U&&(Q.id=U),V&&(Q.type=V),H&&(Q.function??(Q.function={name:H.name??"",arguments:""})),H?.name&&(Q.function.name=H.name),H?.arguments&&(Q.function.arguments+=H.arguments,tB(W(this,fs,"f"),Q)&&(Q.function.parsed_arguments=O1(Q.function.arguments)))}}}return u},Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("chunk",s=>{const a=n.shift();a?a.resolve(s):e.push(s)}),this.on("end",()=>{r=!0;for(const s of n)s.resolve(void 0);n.length=0}),this.on("abort",s=>{r=!0;for(const a of n)a.reject(s);n.length=0}),this.on("error",s=>{r=!0;for(const a of n)a.reject(s);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((a,l)=>n.push({resolve:a,reject:l})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new Br(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function uB(t,e){const{id:n,choices:r,created:s,model:a,system_fingerprint:l,...u}=t,f={...u,id:n,choices:r.map(({message:h,finish_reason:m,index:p,logprobs:_,...g})=>{if(!m)throw new Te(`missing finish_reason for choice ${p}`);const{content:v=null,function_call:x,tool_calls:E,...k}=h,T=h.role;if(!T)throw new Te(`missing role for choice ${p}`);if(x){const{arguments:C,name:j}=x;if(C==null)throw new Te(`missing function_call.arguments for choice ${p}`);if(!j)throw new Te(`missing function_call.name for choice ${p}`);return{...g,message:{content:v,function_call:{arguments:C,name:j},role:T,refusal:h.refusal??null},finish_reason:m,index:p,logprobs:_}}return E?{...g,index:p,finish_reason:m,logprobs:_,message:{...k,role:T,content:v,refusal:h.refusal??null,tool_calls:E.map((C,j)=>{const{function:D,type:I,id:U,...V}=C,{arguments:H,name:P,...Q}=D||{};if(U==null)throw new Te(`missing choices[${p}].tool_calls[${j}].id
${Mu(t)}`);if(I==null)throw new Te(`missing choices[${p}].tool_calls[${j}].type
${Mu(t)}`);if(P==null)throw new Te(`missing choices[${p}].tool_calls[${j}].function.name
${Mu(t)}`);if(H==null)throw new Te(`missing choices[${p}].tool_calls[${j}].function.arguments
${Mu(t)}`);return{...V,id:U,type:I,function:{...Q,name:P,arguments:H}}})}}:{...g,message:{...k,content:v,role:T,refusal:h.refusal??null},finish_reason:m,index:p,logprobs:_}}),created:s,model:a,object:"chat.completion",...l?{system_fingerprint:l}:{}};return X6(f,e)}function Mu(t){return JSON.stringify(t)}class $f extends $l{static fromReadableStream(e){const n=new $f(null);return n._run(()=>n._fromReadableStream(e)),n}static runTools(e,n,r){const s=new $f(n),a={...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"runTools"}};return s._run(()=>s._runTools(e,n,a)),s}}let Gy=class extends ke{constructor(){super(...arguments),this.messages=new iC(this._client)}create(e,n){return this._client.post("/chat/completions",{body:e,...n,stream:e.stream??!1})}retrieve(e,n){return this._client.get(fe`/chat/completions/${e}`,n)}update(e,n,r){return this._client.post(fe`/chat/completions/${e}`,{body:n,...r})}list(e={},n){return this._client.getAPIList("/chat/completions",jt,{query:e,...n})}delete(e,n){return this._client.delete(fe`/chat/completions/${e}`,n)}parse(e,n){return nB(e.tools),this._client.chat.completions.create(e,{...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"chat.completions.parse"}})._thenUnwrap(r=>Fy(r,e))}runTools(e,n){return e.stream?$f.runTools(this._client,e,n):Hy.runTools(this._client,e,n)}stream(e,n){return $l.createChatCompletion(this._client,e,n)}};Gy.Messages=iC;class Ky extends ke{constructor(){super(...arguments),this.completions=new Gy(this._client)}}Ky.Completions=Gy;const CC=Symbol("brand.privateNullableHeaders");function*fB(t){if(!t)return;if(CC in t){const{values:r,nulls:s}=t;yield*r.entries();for(const a of s)yield[a,null];return}let e=!1,n;t instanceof Headers?n=t.entries():m1(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let r of n){const s=r[0];if(typeof s!="string")throw new TypeError("expected header name to be a string");const a=m1(r[1])?r[1]:[r[1]];let l=!1;for(const u of a)u!==void 0&&(e&&!l&&(l=!0,yield[s,null]),yield[s,u])}}const xe=t=>{const e=new Headers,n=new Set;for(const r of t){const s=new Set;for(const[a,l]of fB(r)){const u=a.toLowerCase();s.has(u)||(e.delete(a),s.add(u)),l===null?(e.delete(a),n.add(u)):(e.append(a,l),n.delete(u))}}return{[CC]:!0,values:e,nulls:n}};class TC extends ke{create(e,n){return this._client.post("/audio/speech",{body:e,...n,headers:xe([{Accept:"application/octet-stream"},n?.headers]),__binaryResponse:!0})}}class AC extends ke{create(e,n){return this._client.post("/audio/transcriptions",Ii({body:e,...n,stream:e.stream??!1,__metadata:{model:e.model}},this._client))}}class RC extends ke{create(e,n){return this._client.post("/audio/translations",Ii({body:e,...n,__metadata:{model:e.model}},this._client))}}class nc extends ke{constructor(){super(...arguments),this.transcriptions=new AC(this._client),this.translations=new RC(this._client),this.speech=new TC(this._client)}}nc.Transcriptions=AC;nc.Translations=RC;nc.Speech=TC;class OC extends ke{create(e,n){return this._client.post("/batches",{body:e,...n})}retrieve(e,n){return this._client.get(fe`/batches/${e}`,n)}list(e={},n){return this._client.getAPIList("/batches",jt,{query:e,...n})}cancel(e,n){return this._client.post(fe`/batches/${e}/cancel`,n)}}class IC extends ke{create(e,n){return this._client.post("/assistants",{body:e,...n,headers:xe([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}retrieve(e,n){return this._client.get(fe`/assistants/${e}`,{...n,headers:xe([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}update(e,n,r){return this._client.post(fe`/assistants/${e}`,{body:n,...r,headers:xe([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(e={},n){return this._client.getAPIList("/assistants",jt,{query:e,...n,headers:xe([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}delete(e,n){return this._client.delete(fe`/assistants/${e}`,{...n,headers:xe([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}}let NC=class extends ke{create(e,n){return this._client.post("/realtime/sessions",{body:e,...n,headers:xe([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}};class MC extends ke{create(e,n){return this._client.post("/realtime/transcription_sessions",{body:e,...n,headers:xe([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}}let ph=class extends ke{constructor(){super(...arguments),this.sessions=new NC(this._client),this.transcriptionSessions=new MC(this._client)}};ph.Sessions=NC;ph.TranscriptionSessions=MC;class DC extends ke{create(e,n){return this._client.post("/chatkit/sessions",{body:e,...n,headers:xe([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}cancel(e,n){return this._client.post(fe`/chatkit/sessions/${e}/cancel`,{...n,headers:xe([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}}let LC=class extends ke{retrieve(e,n){return this._client.get(fe`/chatkit/threads/${e}`,{...n,headers:xe([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}list(e={},n){return this._client.getAPIList("/chatkit/threads",Lf,{query:e,...n,headers:xe([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}delete(e,n){return this._client.delete(fe`/chatkit/threads/${e}`,{...n,headers:xe([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}listItems(e,n={},r){return this._client.getAPIList(fe`/chatkit/threads/${e}/items`,Lf,{query:n,...r,headers:xe([{"OpenAI-Beta":"chatkit_beta=v1"},r?.headers])})}};class mh extends ke{constructor(){super(...arguments),this.sessions=new DC(this._client),this.threads=new LC(this._client)}}mh.Sessions=DC;mh.Threads=LC;class zC extends ke{create(e,n,r){return this._client.post(fe`/threads/${e}/messages`,{body:n,...r,headers:xe([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}retrieve(e,n,r){const{thread_id:s}=n;return this._client.get(fe`/threads/${s}/messages/${e}`,{...r,headers:xe([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}update(e,n,r){const{thread_id:s,...a}=n;return this._client.post(fe`/threads/${s}/messages/${e}`,{body:a,...r,headers:xe([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(e,n={},r){return this._client.getAPIList(fe`/threads/${e}/messages`,jt,{query:n,...r,headers:xe([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}delete(e,n,r){const{thread_id:s}=n;return this._client.delete(fe`/threads/${s}/messages/${e}`,{...r,headers:xe([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}}class jC extends ke{retrieve(e,n,r){const{thread_id:s,run_id:a,...l}=n;return this._client.get(fe`/threads/${s}/runs/${a}/steps/${e}`,{query:l,...r,headers:xe([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(e,n,r){const{thread_id:s,...a}=n;return this._client.getAPIList(fe`/threads/${s}/runs/${e}/steps`,jt,{query:a,...r,headers:xe([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}}const hB=t=>{if(typeof Buffer<"u"){const e=Buffer.from(t,"base64");return Array.from(new Float32Array(e.buffer,e.byteOffset,e.length/Float32Array.BYTES_PER_ELEMENT))}else{const e=atob(t),n=e.length,r=new Uint8Array(n);for(let s=0;s<n;s++)r[s]=e.charCodeAt(s);return Array.from(new Float32Array(r.buffer))}};var dB={};const Ea=t=>{if(typeof globalThis.process<"u")return dB?.[t]?.trim()??void 0;if(typeof globalThis.Deno<"u")return globalThis.Deno.env?.get?.(t)?.trim()};var cn,Ai,Bg,Pr,ef,Cr,Ri,ja,Ei,qf,Wn,tf,nf,Cl,gl,yl,N1,M1,D1,L1,z1,j1,P1;class Tl extends Vy{constructor(){super(...arguments),cn.add(this),Bg.set(this,[]),Pr.set(this,{}),ef.set(this,{}),Cr.set(this,void 0),Ri.set(this,void 0),ja.set(this,void 0),Ei.set(this,void 0),qf.set(this,void 0),Wn.set(this,void 0),tf.set(this,void 0),nf.set(this,void 0),Cl.set(this,void 0)}[(Bg=new WeakMap,Pr=new WeakMap,ef=new WeakMap,Cr=new WeakMap,Ri=new WeakMap,ja=new WeakMap,Ei=new WeakMap,qf=new WeakMap,Wn=new WeakMap,tf=new WeakMap,nf=new WeakMap,Cl=new WeakMap,cn=new WeakSet,Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("event",s=>{const a=n.shift();a?a.resolve(s):e.push(s)}),this.on("end",()=>{r=!0;for(const s of n)s.resolve(void 0);n.length=0}),this.on("abort",s=>{r=!0;for(const a of n)a.reject(s);n.length=0}),this.on("error",s=>{r=!0;for(const a of n)a.reject(s);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((a,l)=>n.push({resolve:a,reject:l})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){const n=new Ai;return n._run(()=>n._fromReadableStream(e)),n}async _fromReadableStream(e,n){const r=n?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),this._connected();const s=Br.fromReadableStream(e,this.controller);for await(const a of s)W(this,cn,"m",gl).call(this,a);if(s.controller.signal?.aborted)throw new br;return this._addRun(W(this,cn,"m",yl).call(this))}toReadableStream(){return new Br(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,n,r,s){const a=new Ai;return a._run(()=>a._runToolAssistantStream(e,n,r,{...s,headers:{...s?.headers,"X-Stainless-Helper-Method":"stream"}})),a}async _createToolAssistantStream(e,n,r,s){const a=s?.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort()));const l={...r,stream:!0},u=await e.submitToolOutputs(n,l,{...s,signal:this.controller.signal});this._connected();for await(const f of u)W(this,cn,"m",gl).call(this,f);if(u.controller.signal?.aborted)throw new br;return this._addRun(W(this,cn,"m",yl).call(this))}static createThreadAssistantStream(e,n,r){const s=new Ai;return s._run(()=>s._threadAssistantStream(e,n,{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),s}static createAssistantStream(e,n,r,s){const a=new Ai;return a._run(()=>a._runAssistantStream(e,n,r,{...s,headers:{...s?.headers,"X-Stainless-Helper-Method":"stream"}})),a}currentEvent(){return W(this,tf,"f")}currentRun(){return W(this,nf,"f")}currentMessageSnapshot(){return W(this,Cr,"f")}currentRunStepSnapshot(){return W(this,Cl,"f")}async finalRunSteps(){return await this.done(),Object.values(W(this,Pr,"f"))}async finalMessages(){return await this.done(),Object.values(W(this,ef,"f"))}async finalRun(){if(await this.done(),!W(this,Ri,"f"))throw Error("Final run was not received.");return W(this,Ri,"f")}async _createThreadAssistantStream(e,n,r){const s=r?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort()));const a={...n,stream:!0},l=await e.createAndRun(a,{...r,signal:this.controller.signal});this._connected();for await(const u of l)W(this,cn,"m",gl).call(this,u);if(l.controller.signal?.aborted)throw new br;return this._addRun(W(this,cn,"m",yl).call(this))}async _createAssistantStream(e,n,r,s){const a=s?.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort()));const l={...r,stream:!0},u=await e.create(n,l,{...s,signal:this.controller.signal});this._connected();for await(const f of u)W(this,cn,"m",gl).call(this,f);if(u.controller.signal?.aborted)throw new br;return this._addRun(W(this,cn,"m",yl).call(this))}static accumulateDelta(e,n){for(const[r,s]of Object.entries(n)){if(!e.hasOwnProperty(r)){e[r]=s;continue}let a=e[r];if(a==null){e[r]=s;continue}if(r==="index"||r==="type"){e[r]=s;continue}if(typeof a=="string"&&typeof s=="string")a+=s;else if(typeof a=="number"&&typeof s=="number")a+=s;else if(gm(a)&&gm(s))a=this.accumulateDelta(a,s);else if(Array.isArray(a)&&Array.isArray(s)){if(a.every(l=>typeof l=="string"||typeof l=="number")){a.push(...s);continue}for(const l of s){if(!gm(l))throw new Error(`Expected array delta entry to be an object but got: ${l}`);const u=l.index;if(u==null)throw console.error(l),new Error("Expected array delta entry to have an `index` property");if(typeof u!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${u}`);const f=a[u];f==null?a.push(l):a[u]=this.accumulateDelta(f,l)}continue}else throw Error(`Unhandled record type: ${r}, deltaValue: ${s}, accValue: ${a}`);e[r]=a}return e}_addRun(e){return e}async _threadAssistantStream(e,n,r){return await this._createThreadAssistantStream(n,e,r)}async _runAssistantStream(e,n,r,s){return await this._createAssistantStream(n,e,r,s)}async _runToolAssistantStream(e,n,r,s){return await this._createToolAssistantStream(n,e,r,s)}}Ai=Tl,gl=function(e){if(!this.ended)switch(Ie(this,tf,e),W(this,cn,"m",D1).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":W(this,cn,"m",P1).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":W(this,cn,"m",M1).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":W(this,cn,"m",N1).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},yl=function(){if(this.ended)throw new Te("stream has ended, this shouldn't happen");if(!W(this,Ri,"f"))throw Error("Final run has not been received");return W(this,Ri,"f")},N1=function(e){const[n,r]=W(this,cn,"m",z1).call(this,e,W(this,Cr,"f"));Ie(this,Cr,n),W(this,ef,"f")[n.id]=n;for(const s of r){const a=n.content[s.index];a?.type=="text"&&this._emit("textCreated",a.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,n),e.data.delta.content)for(const s of e.data.delta.content){if(s.type=="text"&&s.text){let a=s.text,l=n.content[s.index];if(l&&l.type=="text")this._emit("textDelta",a,l.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(s.index!=W(this,ja,"f")){if(W(this,Ei,"f"))switch(W(this,Ei,"f").type){case"text":this._emit("textDone",W(this,Ei,"f").text,W(this,Cr,"f"));break;case"image_file":this._emit("imageFileDone",W(this,Ei,"f").image_file,W(this,Cr,"f"));break}Ie(this,ja,s.index)}Ie(this,Ei,n.content[s.index])}break;case"thread.message.completed":case"thread.message.incomplete":if(W(this,ja,"f")!==void 0){const s=e.data.content[W(this,ja,"f")];if(s)switch(s.type){case"image_file":this._emit("imageFileDone",s.image_file,W(this,Cr,"f"));break;case"text":this._emit("textDone",s.text,W(this,Cr,"f"));break}}W(this,Cr,"f")&&this._emit("messageDone",e.data),Ie(this,Cr,void 0)}},M1=function(e){const n=W(this,cn,"m",L1).call(this,e);switch(Ie(this,Cl,n),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":const r=e.data.delta;if(r.step_details&&r.step_details.type=="tool_calls"&&r.step_details.tool_calls&&n.step_details.type=="tool_calls")for(const a of r.step_details.tool_calls)a.index==W(this,qf,"f")?this._emit("toolCallDelta",a,n.step_details.tool_calls[a.index]):(W(this,Wn,"f")&&this._emit("toolCallDone",W(this,Wn,"f")),Ie(this,qf,a.index),Ie(this,Wn,n.step_details.tool_calls[a.index]),W(this,Wn,"f")&&this._emit("toolCallCreated",W(this,Wn,"f")));this._emit("runStepDelta",e.data.delta,n);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":Ie(this,Cl,void 0),e.data.step_details.type=="tool_calls"&&W(this,Wn,"f")&&(this._emit("toolCallDone",W(this,Wn,"f")),Ie(this,Wn,void 0)),this._emit("runStepDone",e.data,n);break}},D1=function(e){W(this,Bg,"f").push(e),this._emit("event",e)},L1=function(e){switch(e.event){case"thread.run.step.created":return W(this,Pr,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let n=W(this,Pr,"f")[e.data.id];if(!n)throw Error("Received a RunStepDelta before creation of a snapshot");let r=e.data;if(r.delta){const s=Ai.accumulateDelta(n,r.delta);W(this,Pr,"f")[e.data.id]=s}return W(this,Pr,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":W(this,Pr,"f")[e.data.id]=e.data;break}if(W(this,Pr,"f")[e.data.id])return W(this,Pr,"f")[e.data.id];throw new Error("No snapshot available")},z1=function(e,n){let r=[];switch(e.event){case"thread.message.created":return[e.data,r];case"thread.message.delta":if(!n)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let s=e.data;if(s.delta.content)for(const a of s.delta.content)if(a.index in n.content){let l=n.content[a.index];n.content[a.index]=W(this,cn,"m",j1).call(this,a,l)}else n.content[a.index]=a,r.push(a);return[n,r];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(n)return[n,r];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},j1=function(e,n){return Ai.accumulateDelta(n,e)},P1=function(e){switch(Ie(this,nf,e.data),e.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":case"thread.run.incomplete":Ie(this,Ri,e.data),W(this,Wn,"f")&&(this._emit("toolCallDone",W(this,Wn,"f")),Ie(this,Wn,void 0));break}};let Zy=class extends ke{constructor(){super(...arguments),this.steps=new jC(this._client)}create(e,n,r){const{include:s,...a}=n;return this._client.post(fe`/threads/${e}/runs`,{query:{include:s},body:a,...r,headers:xe([{"OpenAI-Beta":"assistants=v2"},r?.headers]),stream:n.stream??!1})}retrieve(e,n,r){const{thread_id:s}=n;return this._client.get(fe`/threads/${s}/runs/${e}`,{...r,headers:xe([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}update(e,n,r){const{thread_id:s,...a}=n;return this._client.post(fe`/threads/${s}/runs/${e}`,{body:a,...r,headers:xe([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(e,n={},r){return this._client.getAPIList(fe`/threads/${e}/runs`,jt,{query:n,...r,headers:xe([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}cancel(e,n,r){const{thread_id:s}=n;return this._client.post(fe`/threads/${s}/runs/${e}/cancel`,{...r,headers:xe([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}async createAndPoll(e,n,r){const s=await this.create(e,n,r);return await this.poll(s.id,{thread_id:e},r)}createAndStream(e,n,r){return Tl.createAssistantStream(e,this._client.beta.threads.runs,n,r)}async poll(e,n,r){const s=xe([r?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":r?.pollIntervalMs?.toString()??void 0}]);for(;;){const{data:a,response:l}=await this.retrieve(e,n,{...r,headers:{...r?.headers,...s}}).withResponse();switch(a.status){case"queued":case"in_progress":case"cancelling":let u=5e3;if(r?.pollIntervalMs)u=r.pollIntervalMs;else{const f=l.headers.get("openai-poll-after-ms");if(f){const h=parseInt(f);isNaN(h)||(u=h)}}await ec(u);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return a}}}stream(e,n,r){return Tl.createAssistantStream(e,this._client.beta.threads.runs,n,r)}submitToolOutputs(e,n,r){const{thread_id:s,...a}=n;return this._client.post(fe`/threads/${s}/runs/${e}/submit_tool_outputs`,{body:a,...r,headers:xe([{"OpenAI-Beta":"assistants=v2"},r?.headers]),stream:n.stream??!1})}async submitToolOutputsAndPoll(e,n,r){const s=await this.submitToolOutputs(e,n,r);return await this.poll(s.id,n,r)}submitToolOutputsStream(e,n,r){return Tl.createToolAssistantStream(e,this._client.beta.threads.runs,n,r)}};Zy.Steps=jC;class gh extends ke{constructor(){super(...arguments),this.runs=new Zy(this._client),this.messages=new zC(this._client)}create(e={},n){return this._client.post("/threads",{body:e,...n,headers:xe([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}retrieve(e,n){return this._client.get(fe`/threads/${e}`,{...n,headers:xe([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}update(e,n,r){return this._client.post(fe`/threads/${e}`,{body:n,...r,headers:xe([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}delete(e,n){return this._client.delete(fe`/threads/${e}`,{...n,headers:xe([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}createAndRun(e,n){return this._client.post("/threads/runs",{body:e,...n,headers:xe([{"OpenAI-Beta":"assistants=v2"},n?.headers]),stream:e.stream??!1})}async createAndRunPoll(e,n){const r=await this.createAndRun(e,n);return await this.runs.poll(r.id,{thread_id:r.thread_id},n)}createAndRunStream(e,n){return Tl.createThreadAssistantStream(e,this._client.beta.threads,n)}}gh.Runs=Zy;gh.Messages=zC;class Wa extends ke{constructor(){super(...arguments),this.realtime=new ph(this._client),this.chatkit=new mh(this._client),this.assistants=new IC(this._client),this.threads=new gh(this._client)}}Wa.Realtime=ph;Wa.ChatKit=mh;Wa.Assistants=IC;Wa.Threads=gh;class PC extends ke{create(e,n){return this._client.post("/completions",{body:e,...n,stream:e.stream??!1})}}class BC extends ke{retrieve(e,n,r){const{container_id:s}=n;return this._client.get(fe`/containers/${s}/files/${e}/content`,{...r,headers:xe([{Accept:"application/binary"},r?.headers]),__binaryResponse:!0})}}let Qy=class extends ke{constructor(){super(...arguments),this.content=new BC(this._client)}create(e,n,r){return this._client.post(fe`/containers/${e}/files`,Ii({body:n,...r},this._client))}retrieve(e,n,r){const{container_id:s}=n;return this._client.get(fe`/containers/${s}/files/${e}`,r)}list(e,n={},r){return this._client.getAPIList(fe`/containers/${e}/files`,jt,{query:n,...r})}delete(e,n,r){const{container_id:s}=n;return this._client.delete(fe`/containers/${s}/files/${e}`,{...r,headers:xe([{Accept:"*/*"},r?.headers])})}};Qy.Content=BC;class Jy extends ke{constructor(){super(...arguments),this.files=new Qy(this._client)}create(e,n){return this._client.post("/containers",{body:e,...n})}retrieve(e,n){return this._client.get(fe`/containers/${e}`,n)}list(e={},n){return this._client.getAPIList("/containers",jt,{query:e,...n})}delete(e,n){return this._client.delete(fe`/containers/${e}`,{...n,headers:xe([{Accept:"*/*"},n?.headers])})}}Jy.Files=Qy;class UC extends ke{create(e,n,r){const{include:s,...a}=n;return this._client.post(fe`/conversations/${e}/items`,{query:{include:s},body:a,...r})}retrieve(e,n,r){const{conversation_id:s,...a}=n;return this._client.get(fe`/conversations/${s}/items/${e}`,{query:a,...r})}list(e,n={},r){return this._client.getAPIList(fe`/conversations/${e}/items`,Lf,{query:n,...r})}delete(e,n,r){const{conversation_id:s}=n;return this._client.delete(fe`/conversations/${s}/items/${e}`,r)}}class Yy extends ke{constructor(){super(...arguments),this.items=new UC(this._client)}create(e={},n){return this._client.post("/conversations",{body:e,...n})}retrieve(e,n){return this._client.get(fe`/conversations/${e}`,n)}update(e,n,r){return this._client.post(fe`/conversations/${e}`,{body:n,...r})}delete(e,n){return this._client.delete(fe`/conversations/${e}`,n)}}Yy.Items=UC;class $C extends ke{create(e,n){const r=!!e.encoding_format;let s=r?e.encoding_format:"base64";r&&ln(this._client).debug("embeddings/user defined encoding_format:",e.encoding_format);const a=this._client.post("/embeddings",{body:{...e,encoding_format:s},...n});return r?a:(ln(this._client).debug("embeddings/decoding base64 embeddings from base64"),a._thenUnwrap(l=>(l&&l.data&&l.data.forEach(u=>{const f=u.embedding;u.embedding=hB(f)}),l)))}}class qC extends ke{retrieve(e,n,r){const{eval_id:s,run_id:a}=n;return this._client.get(fe`/evals/${s}/runs/${a}/output_items/${e}`,r)}list(e,n,r){const{eval_id:s,...a}=n;return this._client.getAPIList(fe`/evals/${s}/runs/${e}/output_items`,jt,{query:a,...r})}}class Xy extends ke{constructor(){super(...arguments),this.outputItems=new qC(this._client)}create(e,n,r){return this._client.post(fe`/evals/${e}/runs`,{body:n,...r})}retrieve(e,n,r){const{eval_id:s}=n;return this._client.get(fe`/evals/${s}/runs/${e}`,r)}list(e,n={},r){return this._client.getAPIList(fe`/evals/${e}/runs`,jt,{query:n,...r})}delete(e,n,r){const{eval_id:s}=n;return this._client.delete(fe`/evals/${s}/runs/${e}`,r)}cancel(e,n,r){const{eval_id:s}=n;return this._client.post(fe`/evals/${s}/runs/${e}`,r)}}Xy.OutputItems=qC;class Wy extends ke{constructor(){super(...arguments),this.runs=new Xy(this._client)}create(e,n){return this._client.post("/evals",{body:e,...n})}retrieve(e,n){return this._client.get(fe`/evals/${e}`,n)}update(e,n,r){return this._client.post(fe`/evals/${e}`,{body:n,...r})}list(e={},n){return this._client.getAPIList("/evals",jt,{query:e,...n})}delete(e,n){return this._client.delete(fe`/evals/${e}`,n)}}Wy.Runs=Xy;let FC=class extends ke{create(e,n){return this._client.post("/files",Ii({body:e,...n},this._client))}retrieve(e,n){return this._client.get(fe`/files/${e}`,n)}list(e={},n){return this._client.getAPIList("/files",jt,{query:e,...n})}delete(e,n){return this._client.delete(fe`/files/${e}`,n)}content(e,n){return this._client.get(fe`/files/${e}/content`,{...n,headers:xe([{Accept:"application/binary"},n?.headers]),__binaryResponse:!0})}async waitForProcessing(e,{pollInterval:n=5e3,maxWait:r=1800*1e3}={}){const s=new Set(["processed","error","deleted"]),a=Date.now();let l=await this.retrieve(e);for(;!l.status||!s.has(l.status);)if(await ec(n),l=await this.retrieve(e),Date.now()-a>r)throw new Py({message:`Giving up on waiting for file ${e} to finish processing after ${r} milliseconds.`});return l}};class VC extends ke{}let HC=class extends ke{run(e,n){return this._client.post("/fine_tuning/alpha/graders/run",{body:e,...n})}validate(e,n){return this._client.post("/fine_tuning/alpha/graders/validate",{body:e,...n})}};class e0 extends ke{constructor(){super(...arguments),this.graders=new HC(this._client)}}e0.Graders=HC;class GC extends ke{create(e,n,r){return this._client.getAPIList(fe`/fine_tuning/checkpoints/${e}/permissions`,dh,{body:n,method:"post",...r})}retrieve(e,n={},r){return this._client.get(fe`/fine_tuning/checkpoints/${e}/permissions`,{query:n,...r})}delete(e,n,r){const{fine_tuned_model_checkpoint:s}=n;return this._client.delete(fe`/fine_tuning/checkpoints/${s}/permissions/${e}`,r)}}let t0=class extends ke{constructor(){super(...arguments),this.permissions=new GC(this._client)}};t0.Permissions=GC;class KC extends ke{list(e,n={},r){return this._client.getAPIList(fe`/fine_tuning/jobs/${e}/checkpoints`,jt,{query:n,...r})}}class n0 extends ke{constructor(){super(...arguments),this.checkpoints=new KC(this._client)}create(e,n){return this._client.post("/fine_tuning/jobs",{body:e,...n})}retrieve(e,n){return this._client.get(fe`/fine_tuning/jobs/${e}`,n)}list(e={},n){return this._client.getAPIList("/fine_tuning/jobs",jt,{query:e,...n})}cancel(e,n){return this._client.post(fe`/fine_tuning/jobs/${e}/cancel`,n)}listEvents(e,n={},r){return this._client.getAPIList(fe`/fine_tuning/jobs/${e}/events`,jt,{query:n,...r})}pause(e,n){return this._client.post(fe`/fine_tuning/jobs/${e}/pause`,n)}resume(e,n){return this._client.post(fe`/fine_tuning/jobs/${e}/resume`,n)}}n0.Checkpoints=KC;class eo extends ke{constructor(){super(...arguments),this.methods=new VC(this._client),this.jobs=new n0(this._client),this.checkpoints=new t0(this._client),this.alpha=new e0(this._client)}}eo.Methods=VC;eo.Jobs=n0;eo.Checkpoints=t0;eo.Alpha=e0;class ZC extends ke{}class r0 extends ke{constructor(){super(...arguments),this.graderModels=new ZC(this._client)}}r0.GraderModels=ZC;class QC extends ke{createVariation(e,n){return this._client.post("/images/variations",Ii({body:e,...n},this._client))}edit(e,n){return this._client.post("/images/edits",Ii({body:e,...n,stream:e.stream??!1},this._client))}generate(e,n){return this._client.post("/images/generations",{body:e,...n,stream:e.stream??!1})}}class JC extends ke{retrieve(e,n){return this._client.get(fe`/models/${e}`,n)}list(e){return this._client.getAPIList("/models",dh,e)}delete(e,n){return this._client.delete(fe`/models/${e}`,n)}}class YC extends ke{create(e,n){return this._client.post("/moderations",{body:e,...n})}}class XC extends ke{accept(e,n,r){return this._client.post(fe`/realtime/calls/${e}/accept`,{body:n,...r,headers:xe([{Accept:"*/*"},r?.headers])})}hangup(e,n){return this._client.post(fe`/realtime/calls/${e}/hangup`,{...n,headers:xe([{Accept:"*/*"},n?.headers])})}refer(e,n,r){return this._client.post(fe`/realtime/calls/${e}/refer`,{body:n,...r,headers:xe([{Accept:"*/*"},r?.headers])})}reject(e,n={},r){return this._client.post(fe`/realtime/calls/${e}/reject`,{body:n,...r,headers:xe([{Accept:"*/*"},r?.headers])})}}class WC extends ke{create(e,n){return this._client.post("/realtime/client_secrets",{body:e,...n})}}class yh extends ke{constructor(){super(...arguments),this.clientSecrets=new WC(this._client),this.calls=new XC(this._client)}}yh.ClientSecrets=WC;yh.Calls=XC;function pB(t,e){return!e||!gB(e)?{...t,output_parsed:null,output:t.output.map(n=>n.type==="function_call"?{...n,parsed_arguments:null}:n.type==="message"?{...n,content:n.content.map(r=>({...r,parsed:null}))}:n)}:eT(t,e)}function eT(t,e){const n=t.output.map(s=>{if(s.type==="function_call")return{...s,parsed_arguments:bB(e,s)};if(s.type==="message"){const a=s.content.map(l=>l.type==="output_text"?{...l,parsed:mB(e,l.text)}:l);return{...s,content:a}}return s}),r=Object.assign({},t,{output:n});return Object.getOwnPropertyDescriptor(t,"output_text")||Ug(r),Object.defineProperty(r,"output_parsed",{enumerable:!0,get(){for(const s of r.output)if(s.type==="message"){for(const a of s.content)if(a.type==="output_text"&&a.parsed!==null)return a.parsed}return null}}),r}function mB(t,e){return t.text?.format?.type!=="json_schema"?null:"$parseRaw"in t.text?.format?(t.text?.format).$parseRaw(e):JSON.parse(e)}function gB(t){return!!qy(t.text?.format)}function yB(t){return t?.$brand==="auto-parseable-tool"}function _B(t,e){return t.find(n=>n.type==="function"&&n.name===e)}function bB(t,e){const n=_B(t.tools??[],e.name);return{...e,...e,parsed_arguments:yB(n)?n.$parseRaw(e.arguments):n?.strict?JSON.parse(e.arguments):null}}function Ug(t){const e=[];for(const n of t.output)if(n.type==="message")for(const r of n.content)r.type==="output_text"&&e.push(r.text);t.output_text=e.join("")}var Ca,Du,Vs,Lu,B1,U1,$1,q1;class s0 extends Vy{constructor(e){super(),Ca.add(this),Du.set(this,void 0),Vs.set(this,void 0),Lu.set(this,void 0),Ie(this,Du,e)}static createResponse(e,n,r){const s=new s0(n);return s._run(()=>s._createOrRetrieveResponse(e,n,{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),s}async _createOrRetrieveResponse(e,n,r){const s=r?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),W(this,Ca,"m",B1).call(this);let a,l=null;"response_id"in n?(a=await e.responses.retrieve(n.response_id,{stream:!0},{...r,signal:this.controller.signal,stream:!0}),l=n.starting_after??null):a=await e.responses.create({...n,stream:!0},{...r,signal:this.controller.signal}),this._connected();for await(const u of a)W(this,Ca,"m",U1).call(this,u,l);if(a.controller.signal?.aborted)throw new br;return W(this,Ca,"m",$1).call(this)}[(Du=new WeakMap,Vs=new WeakMap,Lu=new WeakMap,Ca=new WeakSet,B1=function(){this.ended||Ie(this,Vs,void 0)},U1=function(n,r){if(this.ended)return;const s=(l,u)=>{(r==null||u.sequence_number>r)&&this._emit(l,u)},a=W(this,Ca,"m",q1).call(this,n);switch(s("event",n),n.type){case"response.output_text.delta":{const l=a.output[n.output_index];if(!l)throw new Te(`missing output at index ${n.output_index}`);if(l.type==="message"){const u=l.content[n.content_index];if(!u)throw new Te(`missing content at index ${n.content_index}`);if(u.type!=="output_text")throw new Te(`expected content to be 'output_text', got ${u.type}`);s("response.output_text.delta",{...n,snapshot:u.text})}break}case"response.function_call_arguments.delta":{const l=a.output[n.output_index];if(!l)throw new Te(`missing output at index ${n.output_index}`);l.type==="function_call"&&s("response.function_call_arguments.delta",{...n,snapshot:l.arguments});break}default:s(n.type,n);break}},$1=function(){if(this.ended)throw new Te("stream has ended, this shouldn't happen");const n=W(this,Vs,"f");if(!n)throw new Te("request ended without sending any events");Ie(this,Vs,void 0);const r=vB(n,W(this,Du,"f"));return Ie(this,Lu,r),r},q1=function(n){let r=W(this,Vs,"f");if(!r){if(n.type!=="response.created")throw new Te(`When snapshot hasn't been set yet, expected 'response.created' event, got ${n.type}`);return r=Ie(this,Vs,n.response),r}switch(n.type){case"response.output_item.added":{r.output.push(n.item);break}case"response.content_part.added":{const s=r.output[n.output_index];if(!s)throw new Te(`missing output at index ${n.output_index}`);const a=s.type,l=n.part;a==="message"&&l.type!=="reasoning_text"?s.content.push(l):a==="reasoning"&&l.type==="reasoning_text"&&(s.content||(s.content=[]),s.content.push(l));break}case"response.output_text.delta":{const s=r.output[n.output_index];if(!s)throw new Te(`missing output at index ${n.output_index}`);if(s.type==="message"){const a=s.content[n.content_index];if(!a)throw new Te(`missing content at index ${n.content_index}`);if(a.type!=="output_text")throw new Te(`expected content to be 'output_text', got ${a.type}`);a.text+=n.delta}break}case"response.function_call_arguments.delta":{const s=r.output[n.output_index];if(!s)throw new Te(`missing output at index ${n.output_index}`);s.type==="function_call"&&(s.arguments+=n.delta);break}case"response.reasoning_text.delta":{const s=r.output[n.output_index];if(!s)throw new Te(`missing output at index ${n.output_index}`);if(s.type==="reasoning"){const a=s.content?.[n.content_index];if(!a)throw new Te(`missing content at index ${n.content_index}`);if(a.type!=="reasoning_text")throw new Te(`expected content to be 'reasoning_text', got ${a.type}`);a.text+=n.delta}break}case"response.completed":{Ie(this,Vs,n.response);break}}return r},Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("event",s=>{const a=n.shift();a?a.resolve(s):e.push(s)}),this.on("end",()=>{r=!0;for(const s of n)s.resolve(void 0);n.length=0}),this.on("abort",s=>{r=!0;for(const a of n)a.reject(s);n.length=0}),this.on("error",s=>{r=!0;for(const a of n)a.reject(s);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((a,l)=>n.push({resolve:a,reject:l})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();const e=W(this,Lu,"f");if(!e)throw new Te("stream ended without producing a ChatCompletion");return e}}function vB(t,e){return pB(t,e)}class tT extends ke{list(e,n={},r){return this._client.getAPIList(fe`/responses/${e}/input_items`,jt,{query:n,...r})}}class nT extends ke{count(e={},n){return this._client.post("/responses/input_tokens",{body:e,...n})}}class _h extends ke{constructor(){super(...arguments),this.inputItems=new tT(this._client),this.inputTokens=new nT(this._client)}create(e,n){return this._client.post("/responses",{body:e,...n,stream:e.stream??!1})._thenUnwrap(r=>("object"in r&&r.object==="response"&&Ug(r),r))}retrieve(e,n={},r){return this._client.get(fe`/responses/${e}`,{query:n,...r,stream:n?.stream??!1})._thenUnwrap(s=>("object"in s&&s.object==="response"&&Ug(s),s))}delete(e,n){return this._client.delete(fe`/responses/${e}`,{...n,headers:xe([{Accept:"*/*"},n?.headers])})}parse(e,n){return this._client.responses.create(e,n)._thenUnwrap(r=>eT(r,e))}stream(e,n){return s0.createResponse(this._client,e,n)}cancel(e,n){return this._client.post(fe`/responses/${e}/cancel`,n)}compact(e,n){return this._client.post("/responses/compact",{body:e,...n})}}_h.InputItems=tT;_h.InputTokens=nT;class rT extends ke{create(e,n,r){return this._client.post(fe`/uploads/${e}/parts`,Ii({body:n,...r},this._client))}}class i0 extends ke{constructor(){super(...arguments),this.parts=new rT(this._client)}create(e,n){return this._client.post("/uploads",{body:e,...n})}cancel(e,n){return this._client.post(fe`/uploads/${e}/cancel`,n)}complete(e,n,r){return this._client.post(fe`/uploads/${e}/complete`,{body:n,...r})}}i0.Parts=rT;const xB=async t=>{const e=await Promise.allSettled(t),n=e.filter(s=>s.status==="rejected");if(n.length){for(const s of n)console.error(s.reason);throw new Error(`${n.length} promise(s) failed - see the above errors`)}const r=[];for(const s of e)s.status==="fulfilled"&&r.push(s.value);return r};class sT extends ke{create(e,n,r){return this._client.post(fe`/vector_stores/${e}/file_batches`,{body:n,...r,headers:xe([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}retrieve(e,n,r){const{vector_store_id:s}=n;return this._client.get(fe`/vector_stores/${s}/file_batches/${e}`,{...r,headers:xe([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}cancel(e,n,r){const{vector_store_id:s}=n;return this._client.post(fe`/vector_stores/${s}/file_batches/${e}/cancel`,{...r,headers:xe([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}async createAndPoll(e,n,r){const s=await this.create(e,n);return await this.poll(e,s.id,r)}listFiles(e,n,r){const{vector_store_id:s,...a}=n;return this._client.getAPIList(fe`/vector_stores/${s}/file_batches/${e}/files`,jt,{query:a,...r,headers:xe([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}async poll(e,n,r){const s=xe([r?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":r?.pollIntervalMs?.toString()??void 0}]);for(;;){const{data:a,response:l}=await this.retrieve(n,{vector_store_id:e},{...r,headers:s}).withResponse();switch(a.status){case"in_progress":let u=5e3;if(r?.pollIntervalMs)u=r.pollIntervalMs;else{const f=l.headers.get("openai-poll-after-ms");if(f){const h=parseInt(f);isNaN(h)||(u=h)}}await ec(u);break;case"failed":case"cancelled":case"completed":return a}}}async uploadAndPoll(e,{files:n,fileIds:r=[]},s){if(n==null||n.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const a=s?.maxConcurrency??5,l=Math.min(a,n.length),u=this._client,f=n.values(),h=[...r];async function m(_){for(let g of _){const v=await u.files.create({file:g,purpose:"assistants"},s);h.push(v.id)}}const p=Array(l).fill(f).map(m);return await xB(p),await this.createAndPoll(e,{file_ids:h})}}class iT extends ke{create(e,n,r){return this._client.post(fe`/vector_stores/${e}/files`,{body:n,...r,headers:xe([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}retrieve(e,n,r){const{vector_store_id:s}=n;return this._client.get(fe`/vector_stores/${s}/files/${e}`,{...r,headers:xe([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}update(e,n,r){const{vector_store_id:s,...a}=n;return this._client.post(fe`/vector_stores/${s}/files/${e}`,{body:a,...r,headers:xe([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(e,n={},r){return this._client.getAPIList(fe`/vector_stores/${e}/files`,jt,{query:n,...r,headers:xe([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}delete(e,n,r){const{vector_store_id:s}=n;return this._client.delete(fe`/vector_stores/${s}/files/${e}`,{...r,headers:xe([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}async createAndPoll(e,n,r){const s=await this.create(e,n,r);return await this.poll(e,s.id,r)}async poll(e,n,r){const s=xe([r?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":r?.pollIntervalMs?.toString()??void 0}]);for(;;){const a=await this.retrieve(n,{vector_store_id:e},{...r,headers:s}).withResponse(),l=a.data;switch(l.status){case"in_progress":let u=5e3;if(r?.pollIntervalMs)u=r.pollIntervalMs;else{const f=a.response.headers.get("openai-poll-after-ms");if(f){const h=parseInt(f);isNaN(h)||(u=h)}}await ec(u);break;case"failed":case"completed":return l}}}async upload(e,n,r){const s=await this._client.files.create({file:n,purpose:"assistants"},r);return this.create(e,{file_id:s.id},r)}async uploadAndPoll(e,n,r){const s=await this.upload(e,n,r);return await this.poll(e,s.id,r)}content(e,n,r){const{vector_store_id:s}=n;return this._client.getAPIList(fe`/vector_stores/${s}/files/${e}/content`,dh,{...r,headers:xe([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}}class bh extends ke{constructor(){super(...arguments),this.files=new iT(this._client),this.fileBatches=new sT(this._client)}create(e,n){return this._client.post("/vector_stores",{body:e,...n,headers:xe([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}retrieve(e,n){return this._client.get(fe`/vector_stores/${e}`,{...n,headers:xe([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}update(e,n,r){return this._client.post(fe`/vector_stores/${e}`,{body:n,...r,headers:xe([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(e={},n){return this._client.getAPIList("/vector_stores",jt,{query:e,...n,headers:xe([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}delete(e,n){return this._client.delete(fe`/vector_stores/${e}`,{...n,headers:xe([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}search(e,n,r){return this._client.getAPIList(fe`/vector_stores/${e}/search`,dh,{body:n,method:"post",...r,headers:xe([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}}bh.Files=iT;bh.FileBatches=sT;class aT extends ke{create(e,n){return this._client.post("/videos",T1({body:e,...n},this._client))}retrieve(e,n){return this._client.get(fe`/videos/${e}`,n)}list(e={},n){return this._client.getAPIList("/videos",Lf,{query:e,...n})}delete(e,n){return this._client.delete(fe`/videos/${e}`,n)}downloadContent(e,n={},r){return this._client.get(fe`/videos/${e}/content`,{query:n,...r,headers:xe([{Accept:"application/binary"},r?.headers]),__binaryResponse:!0})}remix(e,n,r){return this._client.post(fe`/videos/${e}/remix`,T1({body:n,...r},this._client))}}var Ia,oT,rf;class lT extends ke{constructor(){super(...arguments),Ia.add(this)}async unwrap(e,n,r=this._client.webhookSecret,s=300){return await this.verifySignature(e,n,r,s),JSON.parse(e)}async verifySignature(e,n,r=this._client.webhookSecret,s=300){if(typeof crypto>"u"||typeof crypto.subtle.importKey!="function"||typeof crypto.subtle.verify!="function")throw new Error("Webhook signature verification is only supported when the `crypto` global is defined");W(this,Ia,"m",oT).call(this,r);const a=xe([n]).values,l=W(this,Ia,"m",rf).call(this,a,"webhook-signature"),u=W(this,Ia,"m",rf).call(this,a,"webhook-timestamp"),f=W(this,Ia,"m",rf).call(this,a,"webhook-id"),h=parseInt(u,10);if(isNaN(h))throw new cl("Invalid webhook timestamp format");const m=Math.floor(Date.now()/1e3);if(m-h>s)throw new cl("Webhook timestamp is too old");if(h>m+s)throw new cl("Webhook timestamp is too new");const p=l.split(" ").map(x=>x.startsWith("v1,")?x.substring(3):x),_=r.startsWith("whsec_")?Buffer.from(r.replace("whsec_",""),"base64"):Buffer.from(r,"utf-8"),g=f?`${f}.${u}.${e}`:`${u}.${e}`,v=await crypto.subtle.importKey("raw",_,{name:"HMAC",hash:"SHA-256"},!1,["verify"]);for(const x of p)try{const E=Buffer.from(x,"base64");if(await crypto.subtle.verify("HMAC",v,E,new TextEncoder().encode(g)))return}catch{continue}throw new cl("The given webhook signature does not match the expected signature")}}Ia=new WeakSet,oT=function(e){if(typeof e!="string"||e.length===0)throw new Error("The webhook secret must either be set using the env var, OPENAI_WEBHOOK_SECRET, on the client class, OpenAI({ webhookSecret: '123' }), or passed to this function")},rf=function(e,n){if(!e)throw new Error("Headers are required");const r=e.get(n);if(r==null)throw new Error(`Missing required header: ${n}`);return r};var $g,a0,sf,cT;class Ue{constructor({baseURL:e=Ea("OPENAI_BASE_URL"),apiKey:n=Ea("OPENAI_API_KEY"),organization:r=Ea("OPENAI_ORG_ID")??null,project:s=Ea("OPENAI_PROJECT_ID")??null,webhookSecret:a=Ea("OPENAI_WEBHOOK_SECRET")??null,...l}={}){if($g.add(this),sf.set(this,void 0),this.completions=new PC(this),this.chat=new Ky(this),this.embeddings=new $C(this),this.files=new FC(this),this.images=new QC(this),this.audio=new nc(this),this.moderations=new YC(this),this.models=new JC(this),this.fineTuning=new eo(this),this.graders=new r0(this),this.vectorStores=new bh(this),this.webhooks=new lT(this),this.beta=new Wa(this),this.batches=new OC(this),this.uploads=new i0(this),this.responses=new _h(this),this.realtime=new yh(this),this.conversations=new Yy(this),this.evals=new Wy(this),this.containers=new Jy(this),this.videos=new aT(this),n===void 0)throw new Te("Missing credentials. Please pass an `apiKey`, or set the `OPENAI_API_KEY` environment variable.");const u={apiKey:n,organization:r,project:s,webhookSecret:a,...l,baseURL:e||"https://api.openai.com/v1"};if(!u.dangerouslyAllowBrowser&&w6())throw new Te(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);this.baseURL=u.baseURL,this.timeout=u.timeout??a0.DEFAULT_TIMEOUT,this.logger=u.logger??console;const f="warn";this.logLevel=f,this.logLevel=E1(u.logLevel,"ClientOptions.logLevel",this)??E1(Ea("OPENAI_LOG"),"process.env['OPENAI_LOG']",this)??f,this.fetchOptions=u.fetchOptions,this.maxRetries=u.maxRetries??2,this.fetch=u.fetch??T6(),Ie(this,sf,R6),this._options=u,this.apiKey=typeof n=="string"?n:"Missing Key",this.organization=r,this.project=s,this.webhookSecret=a}withOptions(e){return new this.constructor({...this._options,baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,organization:this.organization,project:this.project,webhookSecret:this.webhookSecret,...e})}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){}async authHeaders(e){return xe([{Authorization:`Bearer ${this.apiKey}`}])}stringifyQuery(e){return L6(e,{arrayFormat:"brackets"})}getUserAgent(){return`${this.constructor.name}/JS ${Ra}`}defaultIdempotencyKey(){return`stainless-node-retry-${NE()}`}makeStatusError(e,n,r,s){return un.generate(e,n,r,s)}async _callApiKey(){const e=this._options.apiKey;if(typeof e!="function")return!1;let n;try{n=await e()}catch(r){throw r instanceof Te?r:new Te(`Failed to get token from 'apiKey' function: ${r.message}`,{cause:r})}if(typeof n!="string"||!n)throw new Te(`Expected 'apiKey' function argument to return a string but it returned ${n}`);return this.apiKey=n,!0}buildURL(e,n,r){const s=!W(this,$g,"m",cT).call(this)&&r||this.baseURL,a=y6(e)?new URL(e):new URL(s+(s.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),l=this.defaultQuery();return _6(l)||(n={...l,...n}),typeof n=="object"&&n&&!Array.isArray(n)&&(a.search=this.stringifyQuery(n)),a.toString()}async prepareOptions(e){await this._callApiKey()}async prepareRequest(e,{url:n,options:r}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,r){return this.request(Promise.resolve(r).then(s=>({method:e,path:n,...s})))}request(e,n=null){return new hh(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,r){const s=await e,a=s.maxRetries??this.maxRetries;n==null&&(n=a),await this.prepareOptions(s);const{req:l,url:u,timeout:f}=await this.buildRequest(s,{retryCount:a-n});await this.prepareRequest(l,{url:u,options:s});const h="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),m=r===void 0?"":`, retryOf: ${r}`,p=Date.now();if(ln(this).debug(`[${h}] sending request`,ki({retryOfRequestLogID:r,method:s.method,url:u,options:s,headers:l.headers})),s.signal?.aborted)throw new br;const _=new AbortController,g=await this.fetchWithTimeout(u,l,f,_).catch(Rg),v=Date.now();if(g instanceof globalThis.Error){const k=`retrying, ${n} attempts remaining`;if(s.signal?.aborted)throw new br;const T=Ag(g)||/timed? ?out/i.test(String(g)+("cause"in g?String(g.cause):""));if(n)return ln(this).info(`[${h}] connection ${T?"timed out":"failed"} - ${k}`),ln(this).debug(`[${h}] connection ${T?"timed out":"failed"} (${k})`,ki({retryOfRequestLogID:r,url:u,durationMs:v-p,message:g.message})),this.retryRequest(s,n,r??h);throw ln(this).info(`[${h}] connection ${T?"timed out":"failed"} - error; no more retries left`),ln(this).debug(`[${h}] connection ${T?"timed out":"failed"} (error; no more retries left)`,ki({retryOfRequestLogID:r,url:u,durationMs:v-p,message:g.message})),T?new Py:new uh({cause:g})}const x=[...g.headers.entries()].filter(([k])=>k==="x-request-id").map(([k,T])=>", "+k+": "+JSON.stringify(T)).join(""),E=`[${h}${m}${x}] ${l.method} ${u} ${g.ok?"succeeded":"failed"} with status ${g.status} in ${v-p}ms`;if(!g.ok){const k=await this.shouldRetry(g);if(n&&k){const U=`retrying, ${n} attempts remaining`;return await A6(g.body),ln(this).info(`${E} - ${U}`),ln(this).debug(`[${h}] response error (${U})`,ki({retryOfRequestLogID:r,url:g.url,status:g.status,headers:g.headers,durationMs:v-p})),this.retryRequest(s,n,r??h,g.headers)}const T=k?"error; no more retries left":"error; not retryable";ln(this).info(`${E} - ${T}`);const C=await g.text().catch(U=>Rg(U).message),j=x6(C),D=j?void 0:C;throw ln(this).debug(`[${h}] response error (${T})`,ki({retryOfRequestLogID:r,url:g.url,status:g.status,headers:g.headers,message:D,durationMs:Date.now()-p})),this.makeStatusError(g.status,j,D,g.headers)}return ln(this).info(E),ln(this).debug(`[${h}] response start`,ki({retryOfRequestLogID:r,url:g.url,status:g.status,headers:g.headers,durationMs:v-p})),{response:g,options:s,controller:_,requestLogID:h,retryOfRequestLogID:r,startTime:p}}getAPIList(e,n,r){return this.requestAPIList(n,{method:"get",path:e,...r})}requestAPIList(e,n){const r=this.makeRequest(n,null,void 0);return new V6(this,r,e)}async fetchWithTimeout(e,n,r,s){const{signal:a,method:l,...u}=n||{};a&&a.addEventListener("abort",()=>s.abort());const f=setTimeout(()=>s.abort(),r),h=globalThis.ReadableStream&&u.body instanceof globalThis.ReadableStream||typeof u.body=="object"&&u.body!==null&&Symbol.asyncIterator in u.body,m={signal:s.signal,...h?{duplex:"half"}:{},method:"GET",...u};l&&(m.method=l.toUpperCase());try{return await this.fetch.call(void 0,e,m)}finally{clearTimeout(f)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,r,s){let a;const l=s?.get("retry-after-ms");if(l){const f=parseFloat(l);Number.isNaN(f)||(a=f)}const u=s?.get("retry-after");if(u&&!a){const f=parseFloat(u);Number.isNaN(f)?a=Date.parse(u)-Date.now():a=f*1e3}if(!(a&&0<=a&&a<60*1e3)){const f=e.maxRetries??this.maxRetries;a=this.calculateDefaultRetryTimeoutMillis(n,f)}return await ec(a),this.makeRequest(e,n-1,r)}calculateDefaultRetryTimeoutMillis(e,n){const a=n-e,l=Math.min(.5*Math.pow(2,a),8),u=1-Math.random()*.25;return l*u*1e3}async buildRequest(e,{retryCount:n=0}={}){const r={...e},{method:s,path:a,query:l,defaultBaseURL:u}=r,f=this.buildURL(a,l,u);"timeout"in r&&v6("timeout",r.timeout),r.timeout=r.timeout??this.timeout;const{bodyHeaders:h,body:m}=this.buildBody({options:r}),p=await this.buildHeaders({options:e,method:s,bodyHeaders:h,retryCount:n});return{req:{method:s,headers:p,...r.signal&&{signal:r.signal},...globalThis.ReadableStream&&m instanceof globalThis.ReadableStream&&{duplex:"half"},...m&&{body:m},...this.fetchOptions??{},...r.fetchOptions??{}},url:f,timeout:r.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:r,retryCount:s}){let a={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),a[this.idempotencyHeader]=e.idempotencyKey);const l=xe([a,{Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(s),...e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{},...C6(),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project},await this.authHeaders(e),this._options.defaultHeaders,r,e.headers]);return this.validateHeaders(l),l.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const r=xe([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&r.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:HE(e)}:W(this,sf,"f").call(this,{body:e,headers:r})}}a0=Ue,sf=new WeakMap,$g=new WeakSet,cT=function(){return this.baseURL!=="https://api.openai.com/v1"};Ue.OpenAI=a0;Ue.DEFAULT_TIMEOUT=6e5;Ue.OpenAIError=Te;Ue.APIError=un;Ue.APIConnectionError=uh;Ue.APIConnectionTimeoutError=Py;Ue.APIUserAbortError=br;Ue.NotFoundError=zE;Ue.ConflictError=jE;Ue.RateLimitError=BE;Ue.BadRequestError=ME;Ue.AuthenticationError=DE;Ue.InternalServerError=UE;Ue.PermissionDeniedError=LE;Ue.UnprocessableEntityError=PE;Ue.InvalidWebhookSignatureError=cl;Ue.toFile=Q6;Ue.Completions=PC;Ue.Chat=Ky;Ue.Embeddings=$C;Ue.Files=FC;Ue.Images=QC;Ue.Audio=nc;Ue.Moderations=YC;Ue.Models=JC;Ue.FineTuning=eo;Ue.Graders=r0;Ue.VectorStores=bh;Ue.Webhooks=lT;Ue.Beta=Wa;Ue.Batches=OC;Ue.Uploads=i0;Ue.Responses=_h;Ue.Realtime=yh;Ue.Conversations=Yy;Ue.Evals=Wy;Ue.Containers=Jy;Ue.Videos=aT;class wB extends Ue{constructor(e){super({...e,dangerouslyAllowBrowser:!0})}}function SB(t){return new wB({apiKey:t.apiKey,organization:t.organization,baseURL:t.baseURL})}function kB(t){return`${t}-${Date.now()}-${Math.random().toString(36).substring(7)}`}class EB extends XP{constructor(e,n){super({},n),this.kind="text",this.name="openai",this.client=SB(e)}async*chatStream(e){const n=new Map,r=this.mapTextOptionsToOpenAI(e);try{const s=await this.client.responses.create({...r,stream:!0},{headers:e.request?.headers,signal:e.request?.signal});yield*this.processOpenAIStreamChunks(s,n,e,()=>kB(this.name))}catch(s){const a=s;throw console.error(">>> chatStream: Fatal error during response creation <<<"),console.error(">>> Error message:",a.message),console.error(">>> Error stack:",a.stack),console.error(">>> Full error:",a),s}}async structuredOutput(e){const{chatOptions:n,outputSchema:r}=e,s=this.mapTextOptionsToOpenAI(n),a=kl(r,r.required||[]);try{const l=await this.client.responses.create({...s,stream:!1,text:{format:{type:"json_schema",name:"structured_output",schema:a,strict:!0}}},{headers:n.request?.headers,signal:n.request?.signal}),u=this.extractTextFromResponse(l);let f;try{f=JSON.parse(u)}catch{throw new Error(`Failed to parse structured output as JSON. Content: ${u.slice(0,200)}${u.length>200?"...":""}`)}return{data:Tg(f),rawText:u}}catch(l){const u=l;throw console.error(">>> structuredOutput: Error during response creation <<<"),console.error(">>> Error message:",u.message),l}}extractTextFromResponse(e){let n="";for(const r of e.output)if(r.type==="message")for(const s of r.content)s.type==="output_text"&&(n+=s.text);return n}async*processOpenAIStreamChunks(e,n,r,s){let a="",l="";const u=Date.now();let f=0,h=!1,m=!1,p=null,_=r.model;try{for await(const g of e){f++;const v=x=>x.type==="output_text"?(a+=x.text,{type:"content",id:p||s(),model:_||r.model,timestamp:u,delta:x.text,content:a,role:"assistant"}):x.type==="reasoning_text"?(l+=x.text,{type:"thinking",id:p||s(),model:_||r.model,timestamp:u,delta:x.text,content:l}):{type:"error",id:p||s(),model:_||r.model,timestamp:u,error:{message:x.refusal}};if((g.type==="response.created"||g.type==="response.incomplete"||g.type==="response.failed")&&(p=g.response.id,_=g.response.model,h=!1,m=!1,a="",l="",g.response.error&&(yield{type:"error",id:g.response.id,model:g.response.model,timestamp:u,error:g.response.error}),g.response.incomplete_details&&(yield{type:"error",id:g.response.id,model:g.response.model,timestamp:u,error:{message:g.response.incomplete_details.reason??""}})),g.type==="response.output_text.delta"&&g.delta){const x=Array.isArray(g.delta)?g.delta.join(""):typeof g.delta=="string"?g.delta:"";x&&(a+=x,h=!0,yield{type:"content",id:p||s(),model:_||r.model,timestamp:u,delta:x,content:a,role:"assistant"})}if(g.type==="response.reasoning_text.delta"&&g.delta){const x=Array.isArray(g.delta)?g.delta.join(""):typeof g.delta=="string"?g.delta:"";x&&(l+=x,m=!0,yield{type:"thinking",id:p||s(),model:_||r.model,timestamp:u,delta:x,content:l})}if(g.type==="response.reasoning_summary_text.delta"&&g.delta){const x=typeof g.delta=="string"?g.delta:"";x&&(l+=x,m=!0,yield{type:"thinking",id:p||s(),model:_||r.model,timestamp:u,delta:x,content:l})}if(g.type==="response.content_part.added"){const x=g.part;yield v(x)}if(g.type==="response.content_part.done"){const x=g.part;if(x.type==="output_text"&&h||x.type==="reasoning_text"&&m)continue;yield v(x)}if(g.type==="response.output_item.added"){const x=g.item;x.type==="function_call"&&x.id&&(n.has(x.id)||n.set(x.id,{index:g.output_index,name:x.name||""}))}if(g.type==="response.function_call_arguments.done"){const{item_id:x,output_index:E}=g,T=n.get(x)?.name||"";yield{type:"tool_call",id:p||s(),model:_||r.model,timestamp:u,index:E,toolCall:{id:x,type:"function",function:{name:T,arguments:g.arguments}}}}if(g.type==="response.completed"){const x=g.response.output.some(E=>E.type==="function_call");yield{type:"done",id:p||s(),model:_||r.model,timestamp:u,usage:{promptTokens:g.response.usage?.input_tokens||0,completionTokens:g.response.usage?.output_tokens||0,totalTokens:g.response.usage?.total_tokens||0},finishReason:x?"tool_calls":"stop"}}g.type==="error"&&(yield{type:"error",id:p||s(),model:_||r.model,timestamp:u,error:{message:g.message,code:g.code??void 0}})}}catch(g){const v=g;console.log("[OpenAI Adapter] Stream ended with error. Event type summary:",{totalChunks:f,error:v.message}),yield{type:"error",id:s(),model:r.model,timestamp:u,error:{message:v.message||"Unknown error occurred",code:v.code}}}}mapTextOptionsToOpenAI(e){const n=e.modelOptions,r=this.convertMessagesToInput(e.messages);n&&e6({...n,model:e.model});const s=e.tools?m6(e.tools):void 0;return{model:e.model,temperature:e.temperature,max_output_tokens:e.maxTokens,top_p:e.topP,metadata:e.metadata,instructions:e.systemPrompts?.join(`
`),...n,input:r,tools:s}}convertMessagesToInput(e){const n=[];for(const r of e){if(r.role==="tool"){n.push({type:"function_call_output",call_id:r.toolCallId||"",output:typeof r.content=="string"?r.content:JSON.stringify(r.content)});continue}if(r.role==="assistant"){if(r.toolCalls&&r.toolCalls.length>0)for(const l of r.toolCalls){const u=typeof l.function.arguments=="string"?l.function.arguments:JSON.stringify(l.function.arguments);n.push({type:"function_call",call_id:l.id,name:l.function.name,arguments:u})}if(r.content){const l=this.extractTextContent(r.content);l&&n.push({type:"message",role:"assistant",content:l})}continue}const s=this.normalizeContent(r.content),a=[];for(const l of s)a.push(this.convertContentPartToOpenAI(l));a.length===0&&a.push({type:"input_text",text:""}),n.push({type:"message",role:"user",content:a})}return n}convertContentPartToOpenAI(e){switch(e.type){case"text":return{type:"input_text",text:e.content};case"image":{const n=e.metadata;return e.source.type==="url"?{type:"input_image",image_url:e.source.value,detail:n?.detail||"auto"}:{type:"input_image",image_url:e.source.value,detail:n?.detail||"auto"}}case"audio":return e.source.type==="url"?{type:"input_file",file_url:e.source.value}:{type:"input_file",file_data:e.source.value};default:throw new Error(`Unsupported content part type: ${e.type}`)}}normalizeContent(e){return e===null?[]:typeof e=="string"?[{type:"text",content:e}]:e}extractTextContent(e){return e===null?"":typeof e=="string"?e:e.filter(n=>n.type==="text").map(n=>n.content).join("")}}function CB(t){const e=`${window.location.origin}/openai/v1`;return new EB({apiKey:"not-needed",baseURL:e},t)}function TB(){return Sy().ai?.model||"gpt-5.1"}function ue(t,e,n){function r(u,f){if(u._zod||Object.defineProperty(u,"_zod",{value:{def:f,constr:l,traits:new Set},enumerable:!1}),u._zod.traits.has(t))return;u._zod.traits.add(t),e(u,f);const h=l.prototype,m=Object.keys(h);for(let p=0;p<m.length;p++){const _=m[p];_ in u||(u[_]=h[_].bind(u))}}const s=n?.Parent??Object;class a extends s{}Object.defineProperty(a,"name",{value:t});function l(u){var f;const h=n?.Parent?new a:this;r(h,u),(f=h._zod).deferred??(f.deferred=[]);for(const m of h._zod.deferred)m();return h}return Object.defineProperty(l,"init",{value:r}),Object.defineProperty(l,Symbol.hasInstance,{value:u=>n?.Parent&&u instanceof n.Parent?!0:u?._zod?.traits?.has(t)}),Object.defineProperty(l,"name",{value:t}),l}class Fa extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class uT extends Error{constructor(e){super(`Encountered unidirectional transform during encode: ${e}`),this.name="ZodEncodeError"}}const fT={};function Ni(t){return fT}function hT(t){const e=Object.values(t).filter(r=>typeof r=="number");return Object.entries(t).filter(([r,s])=>e.indexOf(+r)===-1).map(([r,s])=>s)}function qg(t,e){return typeof e=="bigint"?e.toString():e}function o0(t){return{get value(){{const e=t();return Object.defineProperty(this,"value",{value:e}),e}}}}function l0(t){return t==null}function c0(t){const e=t.startsWith("^")?1:0,n=t.endsWith("$")?t.length-1:t.length;return t.slice(e,n)}const F1=Symbol("evaluating");function lt(t,e,n){let r;Object.defineProperty(t,e,{get(){if(r!==F1)return r===void 0&&(r=F1,r=n()),r},set(s){Object.defineProperty(t,e,{value:s})},configurable:!0})}function Pi(t,e,n){Object.defineProperty(t,e,{value:n,writable:!0,enumerable:!0,configurable:!0})}function Ws(...t){const e={};for(const n of t){const r=Object.getOwnPropertyDescriptors(n);Object.assign(e,r)}return Object.defineProperties({},e)}function V1(t){return JSON.stringify(t)}function AB(t){return t.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"")}const dT="captureStackTrace"in Error?Error.captureStackTrace:(...t)=>{};function Ff(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)}const RB=o0(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{const t=Function;return new t(""),!0}catch{return!1}});function ql(t){if(Ff(t)===!1)return!1;const e=t.constructor;if(e===void 0||typeof e!="function")return!0;const n=e.prototype;return!(Ff(n)===!1||Object.prototype.hasOwnProperty.call(n,"isPrototypeOf")===!1)}function pT(t){return ql(t)?{...t}:Array.isArray(t)?[...t]:t}const OB=new Set(["string","number","symbol"]);function vh(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function ei(t,e,n){const r=new t._zod.constr(e??t._zod.def);return(!e||n?.parent)&&(r._zod.parent=t),r}function Ne(t){const e=t;if(!e)return{};if(typeof e=="string")return{error:()=>e};if(e?.message!==void 0){if(e?.error!==void 0)throw new Error("Cannot specify both `message` and `error` params");e.error=e.message}return delete e.message,typeof e.error=="string"?{...e,error:()=>e.error}:e}function IB(t){return Object.keys(t).filter(e=>t[e]._zod.optin==="optional"&&t[e]._zod.optout==="optional")}function NB(t,e){const n=t._zod.def,r=n.checks;if(r&&r.length>0)throw new Error(".pick() cannot be used on object schemas containing refinements");const a=Ws(t._zod.def,{get shape(){const l={};for(const u in e){if(!(u in n.shape))throw new Error(`Unrecognized key: "${u}"`);e[u]&&(l[u]=n.shape[u])}return Pi(this,"shape",l),l},checks:[]});return ei(t,a)}function MB(t,e){const n=t._zod.def,r=n.checks;if(r&&r.length>0)throw new Error(".omit() cannot be used on object schemas containing refinements");const a=Ws(t._zod.def,{get shape(){const l={...t._zod.def.shape};for(const u in e){if(!(u in n.shape))throw new Error(`Unrecognized key: "${u}"`);e[u]&&delete l[u]}return Pi(this,"shape",l),l},checks:[]});return ei(t,a)}function DB(t,e){if(!ql(e))throw new Error("Invalid input to extend: expected a plain object");const n=t._zod.def.checks;if(n&&n.length>0){const a=t._zod.def.shape;for(const l in e)if(Object.getOwnPropertyDescriptor(a,l)!==void 0)throw new Error("Cannot overwrite keys on object schemas containing refinements. Use `.safeExtend()` instead.")}const s=Ws(t._zod.def,{get shape(){const a={...t._zod.def.shape,...e};return Pi(this,"shape",a),a}});return ei(t,s)}function LB(t,e){if(!ql(e))throw new Error("Invalid input to safeExtend: expected a plain object");const n=Ws(t._zod.def,{get shape(){const r={...t._zod.def.shape,...e};return Pi(this,"shape",r),r}});return ei(t,n)}function zB(t,e){const n=Ws(t._zod.def,{get shape(){const r={...t._zod.def.shape,...e._zod.def.shape};return Pi(this,"shape",r),r},get catchall(){return e._zod.def.catchall},checks:[]});return ei(t,n)}function jB(t,e,n){const s=e._zod.def.checks;if(s&&s.length>0)throw new Error(".partial() cannot be used on object schemas containing refinements");const l=Ws(e._zod.def,{get shape(){const u=e._zod.def.shape,f={...u};if(n)for(const h in n){if(!(h in u))throw new Error(`Unrecognized key: "${h}"`);n[h]&&(f[h]=t?new t({type:"optional",innerType:u[h]}):u[h])}else for(const h in u)f[h]=t?new t({type:"optional",innerType:u[h]}):u[h];return Pi(this,"shape",f),f},checks:[]});return ei(e,l)}function PB(t,e,n){const r=Ws(e._zod.def,{get shape(){const s=e._zod.def.shape,a={...s};if(n)for(const l in n){if(!(l in a))throw new Error(`Unrecognized key: "${l}"`);n[l]&&(a[l]=new t({type:"nonoptional",innerType:s[l]}))}else for(const l in s)a[l]=new t({type:"nonoptional",innerType:s[l]});return Pi(this,"shape",a),a}});return ei(e,r)}function Pa(t,e=0){if(t.aborted===!0)return!0;for(let n=e;n<t.issues.length;n++)if(t.issues[n]?.continue!==!0)return!0;return!1}function mT(t,e){return e.map(n=>{var r;return(r=n).path??(r.path=[]),n.path.unshift(t),n})}function zu(t){return typeof t=="string"?t:t?.message}function Mi(t,e,n){const r={...t,path:t.path??[]};if(!t.message){const s=zu(t.inst?._zod.def?.error?.(t))??zu(e?.error?.(t))??zu(n.customError?.(t))??zu(n.localeError?.(t))??"Invalid input";r.message=s}return delete r.inst,delete r.continue,e?.reportInput||delete r.input,r}function u0(t){return Array.isArray(t)?"array":typeof t=="string"?"string":"unknown"}function Fl(...t){const[e,n,r]=t;return typeof e=="string"?{message:e,code:"custom",input:n,inst:r}:{...e}}const gT=(t,e)=>{t.name="$ZodError",Object.defineProperty(t,"_zod",{value:t._zod,enumerable:!1}),Object.defineProperty(t,"issues",{value:e,enumerable:!1}),t.message=JSON.stringify(e,qg,2),Object.defineProperty(t,"toString",{value:()=>t.message,enumerable:!1})},yT=ue("$ZodError",gT),_T=ue("$ZodError",gT,{Parent:Error});function BB(t,e=n=>n.message){const n={},r=[];for(const s of t.issues)s.path.length>0?(n[s.path[0]]=n[s.path[0]]||[],n[s.path[0]].push(e(s))):r.push(e(s));return{formErrors:r,fieldErrors:n}}function UB(t,e=n=>n.message){const n={_errors:[]},r=s=>{for(const a of s.issues)if(a.code==="invalid_union"&&a.errors.length)a.errors.map(l=>r({issues:l}));else if(a.code==="invalid_key")r({issues:a.issues});else if(a.code==="invalid_element")r({issues:a.issues});else if(a.path.length===0)n._errors.push(e(a));else{let l=n,u=0;for(;u<a.path.length;){const f=a.path[u];u===a.path.length-1?(l[f]=l[f]||{_errors:[]},l[f]._errors.push(e(a))):l[f]=l[f]||{_errors:[]},l=l[f],u++}}};return r(t),n}const f0=t=>(e,n,r,s)=>{const a=r?Object.assign(r,{async:!1}):{async:!1},l=e._zod.run({value:n,issues:[]},a);if(l instanceof Promise)throw new Fa;if(l.issues.length){const u=new(s?.Err??t)(l.issues.map(f=>Mi(f,a,Ni())));throw dT(u,s?.callee),u}return l.value},h0=t=>async(e,n,r,s)=>{const a=r?Object.assign(r,{async:!0}):{async:!0};let l=e._zod.run({value:n,issues:[]},a);if(l instanceof Promise&&(l=await l),l.issues.length){const u=new(s?.Err??t)(l.issues.map(f=>Mi(f,a,Ni())));throw dT(u,s?.callee),u}return l.value},xh=t=>(e,n,r)=>{const s=r?{...r,async:!1}:{async:!1},a=e._zod.run({value:n,issues:[]},s);if(a instanceof Promise)throw new Fa;return a.issues.length?{success:!1,error:new(t??yT)(a.issues.map(l=>Mi(l,s,Ni())))}:{success:!0,data:a.value}},$B=xh(_T),wh=t=>async(e,n,r)=>{const s=r?Object.assign(r,{async:!0}):{async:!0};let a=e._zod.run({value:n,issues:[]},s);return a instanceof Promise&&(a=await a),a.issues.length?{success:!1,error:new t(a.issues.map(l=>Mi(l,s,Ni())))}:{success:!0,data:a.value}},qB=wh(_T),FB=t=>(e,n,r)=>{const s=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return f0(t)(e,n,s)},VB=t=>(e,n,r)=>f0(t)(e,n,r),HB=t=>async(e,n,r)=>{const s=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return h0(t)(e,n,s)},GB=t=>async(e,n,r)=>h0(t)(e,n,r),KB=t=>(e,n,r)=>{const s=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return xh(t)(e,n,s)},ZB=t=>(e,n,r)=>xh(t)(e,n,r),QB=t=>async(e,n,r)=>{const s=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return wh(t)(e,n,s)},JB=t=>async(e,n,r)=>wh(t)(e,n,r),YB=/^[cC][^\s-]{8,}$/,XB=/^[0-9a-z]+$/,WB=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,e8=/^[0-9a-vA-V]{20}$/,t8=/^[A-Za-z0-9]{27}$/,n8=/^[a-zA-Z0-9_-]{21}$/,r8=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,s8=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,H1=t=>t?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${t}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,i8=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,a8="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function o8(){return new RegExp(a8,"u")}const l8=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,c8=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,u8=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,f8=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,h8=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,bT=/^[A-Za-z0-9_-]*$/,d8=/^\+[1-9]\d{6,14}$/,vT="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",p8=new RegExp(`^${vT}$`);function xT(t){const e="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof t.precision=="number"?t.precision===-1?`${e}`:t.precision===0?`${e}:[0-5]\\d`:`${e}:[0-5]\\d\\.\\d{${t.precision}}`:`${e}(?::[0-5]\\d(?:\\.\\d+)?)?`}function m8(t){return new RegExp(`^${xT(t)}$`)}function g8(t){const e=xT({precision:t.precision}),n=["Z"];t.local&&n.push(""),t.offset&&n.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const r=`${e}(?:${n.join("|")})`;return new RegExp(`^${vT}T(?:${r})$`)}const y8=t=>{const e=t?`[\\s\\S]{${t?.minimum??0},${t?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${e}$`)},_8=/^[^A-Z]*$/,b8=/^[^a-z]*$/,Vr=ue("$ZodCheck",(t,e)=>{var n;t._zod??(t._zod={}),t._zod.def=e,(n=t._zod).onattach??(n.onattach=[])}),v8=ue("$ZodCheckMaxLength",(t,e)=>{var n;Vr.init(t,e),(n=t._zod.def).when??(n.when=r=>{const s=r.value;return!l0(s)&&s.length!==void 0}),t._zod.onattach.push(r=>{const s=r._zod.bag.maximum??Number.POSITIVE_INFINITY;e.maximum<s&&(r._zod.bag.maximum=e.maximum)}),t._zod.check=r=>{const s=r.value;if(s.length<=e.maximum)return;const l=u0(s);r.issues.push({origin:l,code:"too_big",maximum:e.maximum,inclusive:!0,input:s,inst:t,continue:!e.abort})}}),x8=ue("$ZodCheckMinLength",(t,e)=>{var n;Vr.init(t,e),(n=t._zod.def).when??(n.when=r=>{const s=r.value;return!l0(s)&&s.length!==void 0}),t._zod.onattach.push(r=>{const s=r._zod.bag.minimum??Number.NEGATIVE_INFINITY;e.minimum>s&&(r._zod.bag.minimum=e.minimum)}),t._zod.check=r=>{const s=r.value;if(s.length>=e.minimum)return;const l=u0(s);r.issues.push({origin:l,code:"too_small",minimum:e.minimum,inclusive:!0,input:s,inst:t,continue:!e.abort})}}),w8=ue("$ZodCheckLengthEquals",(t,e)=>{var n;Vr.init(t,e),(n=t._zod.def).when??(n.when=r=>{const s=r.value;return!l0(s)&&s.length!==void 0}),t._zod.onattach.push(r=>{const s=r._zod.bag;s.minimum=e.length,s.maximum=e.length,s.length=e.length}),t._zod.check=r=>{const s=r.value,a=s.length;if(a===e.length)return;const l=u0(s),u=a>e.length;r.issues.push({origin:l,...u?{code:"too_big",maximum:e.length}:{code:"too_small",minimum:e.length},inclusive:!0,exact:!0,input:r.value,inst:t,continue:!e.abort})}}),Sh=ue("$ZodCheckStringFormat",(t,e)=>{var n,r;Vr.init(t,e),t._zod.onattach.push(s=>{const a=s._zod.bag;a.format=e.format,e.pattern&&(a.patterns??(a.patterns=new Set),a.patterns.add(e.pattern))}),e.pattern?(n=t._zod).check??(n.check=s=>{e.pattern.lastIndex=0,!e.pattern.test(s.value)&&s.issues.push({origin:"string",code:"invalid_format",format:e.format,input:s.value,...e.pattern?{pattern:e.pattern.toString()}:{},inst:t,continue:!e.abort})}):(r=t._zod).check??(r.check=()=>{})}),S8=ue("$ZodCheckRegex",(t,e)=>{Sh.init(t,e),t._zod.check=n=>{e.pattern.lastIndex=0,!e.pattern.test(n.value)&&n.issues.push({origin:"string",code:"invalid_format",format:"regex",input:n.value,pattern:e.pattern.toString(),inst:t,continue:!e.abort})}}),k8=ue("$ZodCheckLowerCase",(t,e)=>{e.pattern??(e.pattern=_8),Sh.init(t,e)}),E8=ue("$ZodCheckUpperCase",(t,e)=>{e.pattern??(e.pattern=b8),Sh.init(t,e)}),C8=ue("$ZodCheckIncludes",(t,e)=>{Vr.init(t,e);const n=vh(e.includes),r=new RegExp(typeof e.position=="number"?`^.{${e.position}}${n}`:n);e.pattern=r,t._zod.onattach.push(s=>{const a=s._zod.bag;a.patterns??(a.patterns=new Set),a.patterns.add(r)}),t._zod.check=s=>{s.value.includes(e.includes,e.position)||s.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:e.includes,input:s.value,inst:t,continue:!e.abort})}}),T8=ue("$ZodCheckStartsWith",(t,e)=>{Vr.init(t,e);const n=new RegExp(`^${vh(e.prefix)}.*`);e.pattern??(e.pattern=n),t._zod.onattach.push(r=>{const s=r._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(n)}),t._zod.check=r=>{r.value.startsWith(e.prefix)||r.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:e.prefix,input:r.value,inst:t,continue:!e.abort})}}),A8=ue("$ZodCheckEndsWith",(t,e)=>{Vr.init(t,e);const n=new RegExp(`.*${vh(e.suffix)}$`);e.pattern??(e.pattern=n),t._zod.onattach.push(r=>{const s=r._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(n)}),t._zod.check=r=>{r.value.endsWith(e.suffix)||r.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:e.suffix,input:r.value,inst:t,continue:!e.abort})}}),R8=ue("$ZodCheckOverwrite",(t,e)=>{Vr.init(t,e),t._zod.check=n=>{n.value=e.tx(n.value)}});class O8{constructor(e=[]){this.content=[],this.indent=0,this&&(this.args=e)}indented(e){this.indent+=1,e(this),this.indent-=1}write(e){if(typeof e=="function"){e(this,{execution:"sync"}),e(this,{execution:"async"});return}const r=e.split(`
`).filter(l=>l),s=Math.min(...r.map(l=>l.length-l.trimStart().length)),a=r.map(l=>l.slice(s)).map(l=>" ".repeat(this.indent*2)+l);for(const l of a)this.content.push(l)}compile(){const e=Function,n=this?.args,s=[...(this?.content??[""]).map(a=>`  ${a}`)];return new e(...n,s.join(`
`))}}const I8={major:4,minor:3,patch:4},Kt=ue("$ZodType",(t,e)=>{var n;t??(t={}),t._zod.def=e,t._zod.bag=t._zod.bag||{},t._zod.version=I8;const r=[...t._zod.def.checks??[]];t._zod.traits.has("$ZodCheck")&&r.unshift(t);for(const s of r)for(const a of s._zod.onattach)a(t);if(r.length===0)(n=t._zod).deferred??(n.deferred=[]),t._zod.deferred?.push(()=>{t._zod.run=t._zod.parse});else{const s=(l,u,f)=>{let h=Pa(l),m;for(const p of u){if(p._zod.def.when){if(!p._zod.def.when(l))continue}else if(h)continue;const _=l.issues.length,g=p._zod.check(l);if(g instanceof Promise&&f?.async===!1)throw new Fa;if(m||g instanceof Promise)m=(m??Promise.resolve()).then(async()=>{await g,l.issues.length!==_&&(h||(h=Pa(l,_)))});else{if(l.issues.length===_)continue;h||(h=Pa(l,_))}}return m?m.then(()=>l):l},a=(l,u,f)=>{if(Pa(l))return l.aborted=!0,l;const h=s(u,r,f);if(h instanceof Promise){if(f.async===!1)throw new Fa;return h.then(m=>t._zod.parse(m,f))}return t._zod.parse(h,f)};t._zod.run=(l,u)=>{if(u.skipChecks)return t._zod.parse(l,u);if(u.direction==="backward"){const h=t._zod.parse({value:l.value,issues:[]},{...u,skipChecks:!0});return h instanceof Promise?h.then(m=>a(m,l,u)):a(h,l,u)}const f=t._zod.parse(l,u);if(f instanceof Promise){if(u.async===!1)throw new Fa;return f.then(h=>s(h,r,u))}return s(f,r,u)}}lt(t,"~standard",()=>({validate:s=>{try{const a=$B(t,s);return a.success?{value:a.data}:{issues:a.error?.issues}}catch{return qB(t,s).then(l=>l.success?{value:l.data}:{issues:l.error?.issues})}},vendor:"zod",version:1}))}),d0=ue("$ZodString",(t,e)=>{Kt.init(t,e),t._zod.pattern=[...t?._zod.bag?.patterns??[]].pop()??y8(t._zod.bag),t._zod.parse=(n,r)=>{if(e.coerce)try{n.value=String(n.value)}catch{}return typeof n.value=="string"||n.issues.push({expected:"string",code:"invalid_type",input:n.value,inst:t}),n}}),xt=ue("$ZodStringFormat",(t,e)=>{Sh.init(t,e),d0.init(t,e)}),N8=ue("$ZodGUID",(t,e)=>{e.pattern??(e.pattern=s8),xt.init(t,e)}),M8=ue("$ZodUUID",(t,e)=>{if(e.version){const r={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[e.version];if(r===void 0)throw new Error(`Invalid UUID version: "${e.version}"`);e.pattern??(e.pattern=H1(r))}else e.pattern??(e.pattern=H1());xt.init(t,e)}),D8=ue("$ZodEmail",(t,e)=>{e.pattern??(e.pattern=i8),xt.init(t,e)}),L8=ue("$ZodURL",(t,e)=>{xt.init(t,e),t._zod.check=n=>{try{const r=n.value.trim(),s=new URL(r);e.hostname&&(e.hostname.lastIndex=0,e.hostname.test(s.hostname)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:e.hostname.source,input:n.value,inst:t,continue:!e.abort})),e.protocol&&(e.protocol.lastIndex=0,e.protocol.test(s.protocol.endsWith(":")?s.protocol.slice(0,-1):s.protocol)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:e.protocol.source,input:n.value,inst:t,continue:!e.abort})),e.normalize?n.value=s.href:n.value=r;return}catch{n.issues.push({code:"invalid_format",format:"url",input:n.value,inst:t,continue:!e.abort})}}}),z8=ue("$ZodEmoji",(t,e)=>{e.pattern??(e.pattern=o8()),xt.init(t,e)}),j8=ue("$ZodNanoID",(t,e)=>{e.pattern??(e.pattern=n8),xt.init(t,e)}),P8=ue("$ZodCUID",(t,e)=>{e.pattern??(e.pattern=YB),xt.init(t,e)}),B8=ue("$ZodCUID2",(t,e)=>{e.pattern??(e.pattern=XB),xt.init(t,e)}),U8=ue("$ZodULID",(t,e)=>{e.pattern??(e.pattern=WB),xt.init(t,e)}),$8=ue("$ZodXID",(t,e)=>{e.pattern??(e.pattern=e8),xt.init(t,e)}),q8=ue("$ZodKSUID",(t,e)=>{e.pattern??(e.pattern=t8),xt.init(t,e)}),F8=ue("$ZodISODateTime",(t,e)=>{e.pattern??(e.pattern=g8(e)),xt.init(t,e)}),V8=ue("$ZodISODate",(t,e)=>{e.pattern??(e.pattern=p8),xt.init(t,e)}),H8=ue("$ZodISOTime",(t,e)=>{e.pattern??(e.pattern=m8(e)),xt.init(t,e)}),G8=ue("$ZodISODuration",(t,e)=>{e.pattern??(e.pattern=r8),xt.init(t,e)}),K8=ue("$ZodIPv4",(t,e)=>{e.pattern??(e.pattern=l8),xt.init(t,e),t._zod.bag.format="ipv4"}),Z8=ue("$ZodIPv6",(t,e)=>{e.pattern??(e.pattern=c8),xt.init(t,e),t._zod.bag.format="ipv6",t._zod.check=n=>{try{new URL(`http://[${n.value}]`)}catch{n.issues.push({code:"invalid_format",format:"ipv6",input:n.value,inst:t,continue:!e.abort})}}}),Q8=ue("$ZodCIDRv4",(t,e)=>{e.pattern??(e.pattern=u8),xt.init(t,e)}),J8=ue("$ZodCIDRv6",(t,e)=>{e.pattern??(e.pattern=f8),xt.init(t,e),t._zod.check=n=>{const r=n.value.split("/");try{if(r.length!==2)throw new Error;const[s,a]=r;if(!a)throw new Error;const l=Number(a);if(`${l}`!==a)throw new Error;if(l<0||l>128)throw new Error;new URL(`http://[${s}]`)}catch{n.issues.push({code:"invalid_format",format:"cidrv6",input:n.value,inst:t,continue:!e.abort})}}});function wT(t){if(t==="")return!0;if(t.length%4!==0)return!1;try{return atob(t),!0}catch{return!1}}const Y8=ue("$ZodBase64",(t,e)=>{e.pattern??(e.pattern=h8),xt.init(t,e),t._zod.bag.contentEncoding="base64",t._zod.check=n=>{wT(n.value)||n.issues.push({code:"invalid_format",format:"base64",input:n.value,inst:t,continue:!e.abort})}});function X8(t){if(!bT.test(t))return!1;const e=t.replace(/[-_]/g,r=>r==="-"?"+":"/"),n=e.padEnd(Math.ceil(e.length/4)*4,"=");return wT(n)}const W8=ue("$ZodBase64URL",(t,e)=>{e.pattern??(e.pattern=bT),xt.init(t,e),t._zod.bag.contentEncoding="base64url",t._zod.check=n=>{X8(n.value)||n.issues.push({code:"invalid_format",format:"base64url",input:n.value,inst:t,continue:!e.abort})}}),eU=ue("$ZodE164",(t,e)=>{e.pattern??(e.pattern=d8),xt.init(t,e)});function tU(t,e=null){try{const n=t.split(".");if(n.length!==3)return!1;const[r]=n;if(!r)return!1;const s=JSON.parse(atob(r));return!("typ"in s&&s?.typ!=="JWT"||!s.alg||e&&(!("alg"in s)||s.alg!==e))}catch{return!1}}const nU=ue("$ZodJWT",(t,e)=>{xt.init(t,e),t._zod.check=n=>{tU(n.value,e.alg)||n.issues.push({code:"invalid_format",format:"jwt",input:n.value,inst:t,continue:!e.abort})}}),rU=ue("$ZodUnknown",(t,e)=>{Kt.init(t,e),t._zod.parse=n=>n}),sU=ue("$ZodNever",(t,e)=>{Kt.init(t,e),t._zod.parse=(n,r)=>(n.issues.push({expected:"never",code:"invalid_type",input:n.value,inst:t}),n)});function G1(t,e,n){t.issues.length&&e.issues.push(...mT(n,t.issues)),e.value[n]=t.value}const iU=ue("$ZodArray",(t,e)=>{Kt.init(t,e),t._zod.parse=(n,r)=>{const s=n.value;if(!Array.isArray(s))return n.issues.push({expected:"array",code:"invalid_type",input:s,inst:t}),n;n.value=Array(s.length);const a=[];for(let l=0;l<s.length;l++){const u=s[l],f=e.element._zod.run({value:u,issues:[]},r);f instanceof Promise?a.push(f.then(h=>G1(h,n,l))):G1(f,n,l)}return a.length?Promise.all(a).then(()=>n):n}});function Vf(t,e,n,r,s){if(t.issues.length){if(s&&!(n in r))return;e.issues.push(...mT(n,t.issues))}t.value===void 0?n in r&&(e.value[n]=void 0):e.value[n]=t.value}function ST(t){const e=Object.keys(t.shape);for(const r of e)if(!t.shape?.[r]?._zod?.traits?.has("$ZodType"))throw new Error(`Invalid element at key "${r}": expected a Zod schema`);const n=IB(t.shape);return{...t,keys:e,keySet:new Set(e),numKeys:e.length,optionalKeys:new Set(n)}}function kT(t,e,n,r,s,a){const l=[],u=s.keySet,f=s.catchall._zod,h=f.def.type,m=f.optout==="optional";for(const p in e){if(u.has(p))continue;if(h==="never"){l.push(p);continue}const _=f.run({value:e[p],issues:[]},r);_ instanceof Promise?t.push(_.then(g=>Vf(g,n,p,e,m))):Vf(_,n,p,e,m)}return l.length&&n.issues.push({code:"unrecognized_keys",keys:l,input:e,inst:a}),t.length?Promise.all(t).then(()=>n):n}const aU=ue("$ZodObject",(t,e)=>{if(Kt.init(t,e),!Object.getOwnPropertyDescriptor(e,"shape")?.get){const u=e.shape;Object.defineProperty(e,"shape",{get:()=>{const f={...u};return Object.defineProperty(e,"shape",{value:f}),f}})}const r=o0(()=>ST(e));lt(t._zod,"propValues",()=>{const u=e.shape,f={};for(const h in u){const m=u[h]._zod;if(m.values){f[h]??(f[h]=new Set);for(const p of m.values)f[h].add(p)}}return f});const s=Ff,a=e.catchall;let l;t._zod.parse=(u,f)=>{l??(l=r.value);const h=u.value;if(!s(h))return u.issues.push({expected:"object",code:"invalid_type",input:h,inst:t}),u;u.value={};const m=[],p=l.shape;for(const _ of l.keys){const g=p[_],v=g._zod.optout==="optional",x=g._zod.run({value:h[_],issues:[]},f);x instanceof Promise?m.push(x.then(E=>Vf(E,u,_,h,v))):Vf(x,u,_,h,v)}return a?kT(m,h,u,f,r.value,t):m.length?Promise.all(m).then(()=>u):u}}),oU=ue("$ZodObjectJIT",(t,e)=>{aU.init(t,e);const n=t._zod.parse,r=o0(()=>ST(e)),s=_=>{const g=new O8(["shape","payload","ctx"]),v=r.value,x=C=>{const j=V1(C);return`shape[${j}]._zod.run({ value: input[${j}], issues: [] }, ctx)`};g.write("const input = payload.value;");const E=Object.create(null);let k=0;for(const C of v.keys)E[C]=`key_${k++}`;g.write("const newResult = {};");for(const C of v.keys){const j=E[C],D=V1(C),U=_[C]?._zod?.optout==="optional";g.write(`const ${j} = ${x(C)};`),U?g.write(`
        if (${j}.issues.length) {
          if (${D} in input) {
            payload.issues = payload.issues.concat(${j}.issues.map(iss => ({
              ...iss,
              path: iss.path ? [${D}, ...iss.path] : [${D}]
            })));
          }
        }
        
        if (${j}.value === undefined) {
          if (${D} in input) {
            newResult[${D}] = undefined;
          }
        } else {
          newResult[${D}] = ${j}.value;
        }
        
      `):g.write(`
        if (${j}.issues.length) {
          payload.issues = payload.issues.concat(${j}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${D}, ...iss.path] : [${D}]
          })));
        }
        
        if (${j}.value === undefined) {
          if (${D} in input) {
            newResult[${D}] = undefined;
          }
        } else {
          newResult[${D}] = ${j}.value;
        }
        
      `)}g.write("payload.value = newResult;"),g.write("return payload;");const T=g.compile();return(C,j)=>T(_,C,j)};let a;const l=Ff,u=!fT.jitless,h=u&&RB.value,m=e.catchall;let p;t._zod.parse=(_,g)=>{p??(p=r.value);const v=_.value;return l(v)?u&&h&&g?.async===!1&&g.jitless!==!0?(a||(a=s(e.shape)),_=a(_,g),m?kT([],v,_,g,p,t):_):n(_,g):(_.issues.push({expected:"object",code:"invalid_type",input:v,inst:t}),_)}});function K1(t,e,n,r){for(const a of t)if(a.issues.length===0)return e.value=a.value,e;const s=t.filter(a=>!Pa(a));return s.length===1?(e.value=s[0].value,s[0]):(e.issues.push({code:"invalid_union",input:e.value,inst:n,errors:t.map(a=>a.issues.map(l=>Mi(l,r,Ni())))}),e)}const lU=ue("$ZodUnion",(t,e)=>{Kt.init(t,e),lt(t._zod,"optin",()=>e.options.some(s=>s._zod.optin==="optional")?"optional":void 0),lt(t._zod,"optout",()=>e.options.some(s=>s._zod.optout==="optional")?"optional":void 0),lt(t._zod,"values",()=>{if(e.options.every(s=>s._zod.values))return new Set(e.options.flatMap(s=>Array.from(s._zod.values)))}),lt(t._zod,"pattern",()=>{if(e.options.every(s=>s._zod.pattern)){const s=e.options.map(a=>a._zod.pattern);return new RegExp(`^(${s.map(a=>c0(a.source)).join("|")})$`)}});const n=e.options.length===1,r=e.options[0]._zod.run;t._zod.parse=(s,a)=>{if(n)return r(s,a);let l=!1;const u=[];for(const f of e.options){const h=f._zod.run({value:s.value,issues:[]},a);if(h instanceof Promise)u.push(h),l=!0;else{if(h.issues.length===0)return h;u.push(h)}}return l?Promise.all(u).then(f=>K1(f,s,t,a)):K1(u,s,t,a)}}),cU=ue("$ZodIntersection",(t,e)=>{Kt.init(t,e),t._zod.parse=(n,r)=>{const s=n.value,a=e.left._zod.run({value:s,issues:[]},r),l=e.right._zod.run({value:s,issues:[]},r);return a instanceof Promise||l instanceof Promise?Promise.all([a,l]).then(([f,h])=>Z1(n,f,h)):Z1(n,a,l)}});function Fg(t,e){if(t===e)return{valid:!0,data:t};if(t instanceof Date&&e instanceof Date&&+t==+e)return{valid:!0,data:t};if(ql(t)&&ql(e)){const n=Object.keys(e),r=Object.keys(t).filter(a=>n.indexOf(a)!==-1),s={...t,...e};for(const a of r){const l=Fg(t[a],e[a]);if(!l.valid)return{valid:!1,mergeErrorPath:[a,...l.mergeErrorPath]};s[a]=l.data}return{valid:!0,data:s}}if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return{valid:!1,mergeErrorPath:[]};const n=[];for(let r=0;r<t.length;r++){const s=t[r],a=e[r],l=Fg(s,a);if(!l.valid)return{valid:!1,mergeErrorPath:[r,...l.mergeErrorPath]};n.push(l.data)}return{valid:!0,data:n}}return{valid:!1,mergeErrorPath:[]}}function Z1(t,e,n){const r=new Map;let s;for(const u of e.issues)if(u.code==="unrecognized_keys"){s??(s=u);for(const f of u.keys)r.has(f)||r.set(f,{}),r.get(f).l=!0}else t.issues.push(u);for(const u of n.issues)if(u.code==="unrecognized_keys")for(const f of u.keys)r.has(f)||r.set(f,{}),r.get(f).r=!0;else t.issues.push(u);const a=[...r].filter(([,u])=>u.l&&u.r).map(([u])=>u);if(a.length&&s&&t.issues.push({...s,keys:a}),Pa(t))return t;const l=Fg(e.value,n.value);if(!l.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(l.mergeErrorPath)}`);return t.value=l.data,t}const uU=ue("$ZodEnum",(t,e)=>{Kt.init(t,e);const n=hT(e.entries),r=new Set(n);t._zod.values=r,t._zod.pattern=new RegExp(`^(${n.filter(s=>OB.has(typeof s)).map(s=>typeof s=="string"?vh(s):s.toString()).join("|")})$`),t._zod.parse=(s,a)=>{const l=s.value;return r.has(l)||s.issues.push({code:"invalid_value",values:n,input:l,inst:t}),s}}),fU=ue("$ZodTransform",(t,e)=>{Kt.init(t,e),t._zod.parse=(n,r)=>{if(r.direction==="backward")throw new uT(t.constructor.name);const s=e.transform(n.value,n);if(r.async)return(s instanceof Promise?s:Promise.resolve(s)).then(l=>(n.value=l,n));if(s instanceof Promise)throw new Fa;return n.value=s,n}});function Q1(t,e){return t.issues.length&&e===void 0?{issues:[],value:void 0}:t}const ET=ue("$ZodOptional",(t,e)=>{Kt.init(t,e),t._zod.optin="optional",t._zod.optout="optional",lt(t._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,void 0]):void 0),lt(t._zod,"pattern",()=>{const n=e.innerType._zod.pattern;return n?new RegExp(`^(${c0(n.source)})?$`):void 0}),t._zod.parse=(n,r)=>{if(e.innerType._zod.optin==="optional"){const s=e.innerType._zod.run(n,r);return s instanceof Promise?s.then(a=>Q1(a,n.value)):Q1(s,n.value)}return n.value===void 0?n:e.innerType._zod.run(n,r)}}),hU=ue("$ZodExactOptional",(t,e)=>{ET.init(t,e),lt(t._zod,"values",()=>e.innerType._zod.values),lt(t._zod,"pattern",()=>e.innerType._zod.pattern),t._zod.parse=(n,r)=>e.innerType._zod.run(n,r)}),dU=ue("$ZodNullable",(t,e)=>{Kt.init(t,e),lt(t._zod,"optin",()=>e.innerType._zod.optin),lt(t._zod,"optout",()=>e.innerType._zod.optout),lt(t._zod,"pattern",()=>{const n=e.innerType._zod.pattern;return n?new RegExp(`^(${c0(n.source)}|null)$`):void 0}),lt(t._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,null]):void 0),t._zod.parse=(n,r)=>n.value===null?n:e.innerType._zod.run(n,r)}),pU=ue("$ZodDefault",(t,e)=>{Kt.init(t,e),t._zod.optin="optional",lt(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(n,r)=>{if(r.direction==="backward")return e.innerType._zod.run(n,r);if(n.value===void 0)return n.value=e.defaultValue,n;const s=e.innerType._zod.run(n,r);return s instanceof Promise?s.then(a=>J1(a,e)):J1(s,e)}});function J1(t,e){return t.value===void 0&&(t.value=e.defaultValue),t}const mU=ue("$ZodPrefault",(t,e)=>{Kt.init(t,e),t._zod.optin="optional",lt(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(n,r)=>(r.direction==="backward"||n.value===void 0&&(n.value=e.defaultValue),e.innerType._zod.run(n,r))}),gU=ue("$ZodNonOptional",(t,e)=>{Kt.init(t,e),lt(t._zod,"values",()=>{const n=e.innerType._zod.values;return n?new Set([...n].filter(r=>r!==void 0)):void 0}),t._zod.parse=(n,r)=>{const s=e.innerType._zod.run(n,r);return s instanceof Promise?s.then(a=>Y1(a,t)):Y1(s,t)}});function Y1(t,e){return!t.issues.length&&t.value===void 0&&t.issues.push({code:"invalid_type",expected:"nonoptional",input:t.value,inst:e}),t}const yU=ue("$ZodCatch",(t,e)=>{Kt.init(t,e),lt(t._zod,"optin",()=>e.innerType._zod.optin),lt(t._zod,"optout",()=>e.innerType._zod.optout),lt(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(n,r)=>{if(r.direction==="backward")return e.innerType._zod.run(n,r);const s=e.innerType._zod.run(n,r);return s instanceof Promise?s.then(a=>(n.value=a.value,a.issues.length&&(n.value=e.catchValue({...n,error:{issues:a.issues.map(l=>Mi(l,r,Ni()))},input:n.value}),n.issues=[]),n)):(n.value=s.value,s.issues.length&&(n.value=e.catchValue({...n,error:{issues:s.issues.map(a=>Mi(a,r,Ni()))},input:n.value}),n.issues=[]),n)}}),_U=ue("$ZodPipe",(t,e)=>{Kt.init(t,e),lt(t._zod,"values",()=>e.in._zod.values),lt(t._zod,"optin",()=>e.in._zod.optin),lt(t._zod,"optout",()=>e.out._zod.optout),lt(t._zod,"propValues",()=>e.in._zod.propValues),t._zod.parse=(n,r)=>{if(r.direction==="backward"){const a=e.out._zod.run(n,r);return a instanceof Promise?a.then(l=>ju(l,e.in,r)):ju(a,e.in,r)}const s=e.in._zod.run(n,r);return s instanceof Promise?s.then(a=>ju(a,e.out,r)):ju(s,e.out,r)}});function ju(t,e,n){return t.issues.length?(t.aborted=!0,t):e._zod.run({value:t.value,issues:t.issues},n)}const bU=ue("$ZodReadonly",(t,e)=>{Kt.init(t,e),lt(t._zod,"propValues",()=>e.innerType._zod.propValues),lt(t._zod,"values",()=>e.innerType._zod.values),lt(t._zod,"optin",()=>e.innerType?._zod?.optin),lt(t._zod,"optout",()=>e.innerType?._zod?.optout),t._zod.parse=(n,r)=>{if(r.direction==="backward")return e.innerType._zod.run(n,r);const s=e.innerType._zod.run(n,r);return s instanceof Promise?s.then(X1):X1(s)}});function X1(t){return t.value=Object.freeze(t.value),t}const vU=ue("$ZodCustom",(t,e)=>{Vr.init(t,e),Kt.init(t,e),t._zod.parse=(n,r)=>n,t._zod.check=n=>{const r=n.value,s=e.fn(r);if(s instanceof Promise)return s.then(a=>W1(a,n,r,t));W1(s,n,r,t)}});function W1(t,e,n,r){if(!t){const s={code:"custom",input:n,inst:r,path:[...r._zod.def.path??[]],continue:!r._zod.def.abort};r._zod.def.params&&(s.params=r._zod.def.params),e.issues.push(Fl(s))}}var eS;class xU{constructor(){this._map=new WeakMap,this._idmap=new Map}add(e,...n){const r=n[0];return this._map.set(e,r),r&&typeof r=="object"&&"id"in r&&this._idmap.set(r.id,e),this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(e){const n=this._map.get(e);return n&&typeof n=="object"&&"id"in n&&this._idmap.delete(n.id),this._map.delete(e),this}get(e){const n=e._zod.parent;if(n){const r={...this.get(n)??{}};delete r.id;const s={...r,...this._map.get(e)};return Object.keys(s).length?s:void 0}return this._map.get(e)}has(e){return this._map.has(e)}}function wU(){return new xU}(eS=globalThis).__zod_globalRegistry??(eS.__zod_globalRegistry=wU());const _l=globalThis.__zod_globalRegistry;function SU(t,e){return new t({type:"string",...Ne(e)})}function kU(t,e){return new t({type:"string",format:"email",check:"string_format",abort:!1,...Ne(e)})}function tS(t,e){return new t({type:"string",format:"guid",check:"string_format",abort:!1,...Ne(e)})}function EU(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,...Ne(e)})}function CU(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...Ne(e)})}function TU(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...Ne(e)})}function AU(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...Ne(e)})}function RU(t,e){return new t({type:"string",format:"url",check:"string_format",abort:!1,...Ne(e)})}function OU(t,e){return new t({type:"string",format:"emoji",check:"string_format",abort:!1,...Ne(e)})}function IU(t,e){return new t({type:"string",format:"nanoid",check:"string_format",abort:!1,...Ne(e)})}function NU(t,e){return new t({type:"string",format:"cuid",check:"string_format",abort:!1,...Ne(e)})}function MU(t,e){return new t({type:"string",format:"cuid2",check:"string_format",abort:!1,...Ne(e)})}function DU(t,e){return new t({type:"string",format:"ulid",check:"string_format",abort:!1,...Ne(e)})}function LU(t,e){return new t({type:"string",format:"xid",check:"string_format",abort:!1,...Ne(e)})}function zU(t,e){return new t({type:"string",format:"ksuid",check:"string_format",abort:!1,...Ne(e)})}function jU(t,e){return new t({type:"string",format:"ipv4",check:"string_format",abort:!1,...Ne(e)})}function PU(t,e){return new t({type:"string",format:"ipv6",check:"string_format",abort:!1,...Ne(e)})}function BU(t,e){return new t({type:"string",format:"cidrv4",check:"string_format",abort:!1,...Ne(e)})}function UU(t,e){return new t({type:"string",format:"cidrv6",check:"string_format",abort:!1,...Ne(e)})}function $U(t,e){return new t({type:"string",format:"base64",check:"string_format",abort:!1,...Ne(e)})}function qU(t,e){return new t({type:"string",format:"base64url",check:"string_format",abort:!1,...Ne(e)})}function FU(t,e){return new t({type:"string",format:"e164",check:"string_format",abort:!1,...Ne(e)})}function VU(t,e){return new t({type:"string",format:"jwt",check:"string_format",abort:!1,...Ne(e)})}function HU(t,e){return new t({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...Ne(e)})}function GU(t,e){return new t({type:"string",format:"date",check:"string_format",...Ne(e)})}function KU(t,e){return new t({type:"string",format:"time",check:"string_format",precision:null,...Ne(e)})}function ZU(t,e){return new t({type:"string",format:"duration",check:"string_format",...Ne(e)})}function QU(t){return new t({type:"unknown"})}function JU(t,e){return new t({type:"never",...Ne(e)})}function CT(t,e){return new v8({check:"max_length",...Ne(e),maximum:t})}function Hf(t,e){return new x8({check:"min_length",...Ne(e),minimum:t})}function TT(t,e){return new w8({check:"length_equals",...Ne(e),length:t})}function YU(t,e){return new S8({check:"string_format",format:"regex",...Ne(e),pattern:t})}function XU(t){return new k8({check:"string_format",format:"lowercase",...Ne(t)})}function WU(t){return new E8({check:"string_format",format:"uppercase",...Ne(t)})}function e$(t,e){return new C8({check:"string_format",format:"includes",...Ne(e),includes:t})}function t$(t,e){return new T8({check:"string_format",format:"starts_with",...Ne(e),prefix:t})}function n$(t,e){return new A8({check:"string_format",format:"ends_with",...Ne(e),suffix:t})}function to(t){return new R8({check:"overwrite",tx:t})}function r$(t){return to(e=>e.normalize(t))}function s$(){return to(t=>t.trim())}function i$(){return to(t=>t.toLowerCase())}function a$(){return to(t=>t.toUpperCase())}function o$(){return to(t=>AB(t))}function l$(t,e,n){return new t({type:"array",element:e,...Ne(n)})}function c$(t,e,n){return new t({type:"custom",check:"custom",fn:e,...Ne(n)})}function u$(t){const e=f$(n=>(n.addIssue=r=>{if(typeof r=="string")n.issues.push(Fl(r,n.value,e._zod.def));else{const s=r;s.fatal&&(s.continue=!1),s.code??(s.code="custom"),s.input??(s.input=n.value),s.inst??(s.inst=e),s.continue??(s.continue=!e._zod.def.abort),n.issues.push(Fl(s))}},t(n.value,n)));return e}function f$(t,e){const n=new Vr({check:"custom",...Ne(e)});return n._zod.check=t,n}function AT(t){let e=t?.target??"draft-2020-12";return e==="draft-4"&&(e="draft-04"),e==="draft-7"&&(e="draft-07"),{processors:t.processors??{},metadataRegistry:t?.metadata??_l,target:e,unrepresentable:t?.unrepresentable??"throw",override:t?.override??(()=>{}),io:t?.io??"output",counter:0,seen:new Map,cycles:t?.cycles??"ref",reused:t?.reused??"inline",external:t?.external??void 0}}function fn(t,e,n={path:[],schemaPath:[]}){var r;const s=t._zod.def,a=e.seen.get(t);if(a)return a.count++,n.schemaPath.includes(t)&&(a.cycle=n.path),a.schema;const l={schema:{},count:1,cycle:void 0,path:n.path};e.seen.set(t,l);const u=t._zod.toJSONSchema?.();if(u)l.schema=u;else{const m={...n,schemaPath:[...n.schemaPath,t],path:n.path};if(t._zod.processJSONSchema)t._zod.processJSONSchema(e,l.schema,m);else{const _=l.schema,g=e.processors[s.type];if(!g)throw new Error(`[toJSONSchema]: Non-representable type encountered: ${s.type}`);g(t,e,_,m)}const p=t._zod.parent;p&&(l.ref||(l.ref=p),fn(p,e,m),e.seen.get(p).isParent=!0)}const f=e.metadataRegistry.get(t);return f&&Object.assign(l.schema,f),e.io==="input"&&kn(t)&&(delete l.schema.examples,delete l.schema.default),e.io==="input"&&l.schema._prefault&&((r=l.schema).default??(r.default=l.schema._prefault)),delete l.schema._prefault,e.seen.get(t).schema}function RT(t,e){const n=t.seen.get(e);if(!n)throw new Error("Unprocessed schema. This is a bug in Zod.");const r=new Map;for(const l of t.seen.entries()){const u=t.metadataRegistry.get(l[0])?.id;if(u){const f=r.get(u);if(f&&f!==l[0])throw new Error(`Duplicate schema id "${u}" detected during JSON Schema conversion. Two different schemas cannot share the same id when converted together.`);r.set(u,l[0])}}const s=l=>{const u=t.target==="draft-2020-12"?"$defs":"definitions";if(t.external){const p=t.external.registry.get(l[0])?.id,_=t.external.uri??(v=>v);if(p)return{ref:_(p)};const g=l[1].defId??l[1].schema.id??`schema${t.counter++}`;return l[1].defId=g,{defId:g,ref:`${_("__shared")}#/${u}/${g}`}}if(l[1]===n)return{ref:"#"};const h=`#/${u}/`,m=l[1].schema.id??`__schema${t.counter++}`;return{defId:m,ref:h+m}},a=l=>{if(l[1].schema.$ref)return;const u=l[1],{ref:f,defId:h}=s(l);u.def={...u.schema},h&&(u.defId=h);const m=u.schema;for(const p in m)delete m[p];m.$ref=f};if(t.cycles==="throw")for(const l of t.seen.entries()){const u=l[1];if(u.cycle)throw new Error(`Cycle detected: #/${u.cycle?.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(const l of t.seen.entries()){const u=l[1];if(e===l[0]){a(l);continue}if(t.external){const h=t.external.registry.get(l[0])?.id;if(e!==l[0]&&h){a(l);continue}}if(t.metadataRegistry.get(l[0])?.id){a(l);continue}if(u.cycle){a(l);continue}if(u.count>1&&t.reused==="ref"){a(l);continue}}}function OT(t,e){const n=t.seen.get(e);if(!n)throw new Error("Unprocessed schema. This is a bug in Zod.");const r=l=>{const u=t.seen.get(l);if(u.ref===null)return;const f=u.def??u.schema,h={...f},m=u.ref;if(u.ref=null,m){r(m);const _=t.seen.get(m),g=_.schema;if(g.$ref&&(t.target==="draft-07"||t.target==="draft-04"||t.target==="openapi-3.0")?(f.allOf=f.allOf??[],f.allOf.push(g)):Object.assign(f,g),Object.assign(f,h),l._zod.parent===m)for(const x in f)x==="$ref"||x==="allOf"||x in h||delete f[x];if(g.$ref)for(const x in f)x==="$ref"||x==="allOf"||x in _.def&&JSON.stringify(f[x])===JSON.stringify(_.def[x])&&delete f[x]}const p=l._zod.parent;if(p&&p!==m){r(p);const _=t.seen.get(p);if(_?.schema.$ref&&(f.$ref=_.schema.$ref,_.def))for(const g in f)g==="$ref"||g==="allOf"||g in _.def&&JSON.stringify(f[g])===JSON.stringify(_.def[g])&&delete f[g]}t.override({zodSchema:l,jsonSchema:f,path:u.path??[]})};for(const l of[...t.seen.entries()].reverse())r(l[0]);const s={};if(t.target==="draft-2020-12"?s.$schema="https://json-schema.org/draft/2020-12/schema":t.target==="draft-07"?s.$schema="http://json-schema.org/draft-07/schema#":t.target==="draft-04"?s.$schema="http://json-schema.org/draft-04/schema#":t.target,t.external?.uri){const l=t.external.registry.get(e)?.id;if(!l)throw new Error("Schema is missing an `id` property");s.$id=t.external.uri(l)}Object.assign(s,n.def??n.schema);const a=t.external?.defs??{};for(const l of t.seen.entries()){const u=l[1];u.def&&u.defId&&(a[u.defId]=u.def)}t.external||Object.keys(a).length>0&&(t.target==="draft-2020-12"?s.$defs=a:s.definitions=a);try{const l=JSON.parse(JSON.stringify(s));return Object.defineProperty(l,"~standard",{value:{...e["~standard"],jsonSchema:{input:Gf(e,"input",t.processors),output:Gf(e,"output",t.processors)}},enumerable:!1,writable:!1}),l}catch{throw new Error("Error converting schema to JSON.")}}function kn(t,e){const n=e??{seen:new Set};if(n.seen.has(t))return!1;n.seen.add(t);const r=t._zod.def;if(r.type==="transform")return!0;if(r.type==="array")return kn(r.element,n);if(r.type==="set")return kn(r.valueType,n);if(r.type==="lazy")return kn(r.getter(),n);if(r.type==="promise"||r.type==="optional"||r.type==="nonoptional"||r.type==="nullable"||r.type==="readonly"||r.type==="default"||r.type==="prefault")return kn(r.innerType,n);if(r.type==="intersection")return kn(r.left,n)||kn(r.right,n);if(r.type==="record"||r.type==="map")return kn(r.keyType,n)||kn(r.valueType,n);if(r.type==="pipe")return kn(r.in,n)||kn(r.out,n);if(r.type==="object"){for(const s in r.shape)if(kn(r.shape[s],n))return!0;return!1}if(r.type==="union"){for(const s of r.options)if(kn(s,n))return!0;return!1}if(r.type==="tuple"){for(const s of r.items)if(kn(s,n))return!0;return!!(r.rest&&kn(r.rest,n))}return!1}const h$=(t,e={})=>n=>{const r=AT({...n,processors:e});return fn(t,r),RT(r,t),OT(r,t)},Gf=(t,e,n={})=>r=>{const{libraryOptions:s,target:a}=r??{},l=AT({...s??{},target:a,io:e,processors:n});return fn(t,l),RT(l,t),OT(l,t)},d$={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},p$=(t,e,n,r)=>{const s=n;s.type="string";const{minimum:a,maximum:l,format:u,patterns:f,contentEncoding:h}=t._zod.bag;if(typeof a=="number"&&(s.minLength=a),typeof l=="number"&&(s.maxLength=l),u&&(s.format=d$[u]??u,s.format===""&&delete s.format,u==="time"&&delete s.format),h&&(s.contentEncoding=h),f&&f.size>0){const m=[...f];m.length===1?s.pattern=m[0].source:m.length>1&&(s.allOf=[...m.map(p=>({...e.target==="draft-07"||e.target==="draft-04"||e.target==="openapi-3.0"?{type:"string"}:{},pattern:p.source}))])}},m$=(t,e,n,r)=>{n.not={}},g$=(t,e,n,r)=>{},y$=(t,e,n,r)=>{const s=t._zod.def,a=hT(s.entries);a.every(l=>typeof l=="number")&&(n.type="number"),a.every(l=>typeof l=="string")&&(n.type="string"),n.enum=a},_$=(t,e,n,r)=>{if(e.unrepresentable==="throw")throw new Error("Custom types cannot be represented in JSON Schema")},b$=(t,e,n,r)=>{if(e.unrepresentable==="throw")throw new Error("Transforms cannot be represented in JSON Schema")},v$=(t,e,n,r)=>{const s=n,a=t._zod.def,{minimum:l,maximum:u}=t._zod.bag;typeof l=="number"&&(s.minItems=l),typeof u=="number"&&(s.maxItems=u),s.type="array",s.items=fn(a.element,e,{...r,path:[...r.path,"items"]})},x$=(t,e,n,r)=>{const s=n,a=t._zod.def;s.type="object",s.properties={};const l=a.shape;for(const h in l)s.properties[h]=fn(l[h],e,{...r,path:[...r.path,"properties",h]});const u=new Set(Object.keys(l)),f=new Set([...u].filter(h=>{const m=a.shape[h]._zod;return e.io==="input"?m.optin===void 0:m.optout===void 0}));f.size>0&&(s.required=Array.from(f)),a.catchall?._zod.def.type==="never"?s.additionalProperties=!1:a.catchall?a.catchall&&(s.additionalProperties=fn(a.catchall,e,{...r,path:[...r.path,"additionalProperties"]})):e.io==="output"&&(s.additionalProperties=!1)},w$=(t,e,n,r)=>{const s=t._zod.def,a=s.inclusive===!1,l=s.options.map((u,f)=>fn(u,e,{...r,path:[...r.path,a?"oneOf":"anyOf",f]}));a?n.oneOf=l:n.anyOf=l},S$=(t,e,n,r)=>{const s=t._zod.def,a=fn(s.left,e,{...r,path:[...r.path,"allOf",0]}),l=fn(s.right,e,{...r,path:[...r.path,"allOf",1]}),u=h=>"allOf"in h&&Object.keys(h).length===1,f=[...u(a)?a.allOf:[a],...u(l)?l.allOf:[l]];n.allOf=f},k$=(t,e,n,r)=>{const s=t._zod.def,a=fn(s.innerType,e,r),l=e.seen.get(t);e.target==="openapi-3.0"?(l.ref=s.innerType,n.nullable=!0):n.anyOf=[a,{type:"null"}]},E$=(t,e,n,r)=>{const s=t._zod.def;fn(s.innerType,e,r);const a=e.seen.get(t);a.ref=s.innerType},C$=(t,e,n,r)=>{const s=t._zod.def;fn(s.innerType,e,r);const a=e.seen.get(t);a.ref=s.innerType,n.default=JSON.parse(JSON.stringify(s.defaultValue))},T$=(t,e,n,r)=>{const s=t._zod.def;fn(s.innerType,e,r);const a=e.seen.get(t);a.ref=s.innerType,e.io==="input"&&(n._prefault=JSON.parse(JSON.stringify(s.defaultValue)))},A$=(t,e,n,r)=>{const s=t._zod.def;fn(s.innerType,e,r);const a=e.seen.get(t);a.ref=s.innerType;let l;try{l=s.catchValue(void 0)}catch{throw new Error("Dynamic catch values are not supported in JSON Schema")}n.default=l},R$=(t,e,n,r)=>{const s=t._zod.def,a=e.io==="input"?s.in._zod.def.type==="transform"?s.out:s.in:s.out;fn(a,e,r);const l=e.seen.get(t);l.ref=a},O$=(t,e,n,r)=>{const s=t._zod.def;fn(s.innerType,e,r);const a=e.seen.get(t);a.ref=s.innerType,n.readOnly=!0},IT=(t,e,n,r)=>{const s=t._zod.def;fn(s.innerType,e,r);const a=e.seen.get(t);a.ref=s.innerType},I$=ue("ZodISODateTime",(t,e)=>{F8.init(t,e),wt.init(t,e)});function N$(t){return HU(I$,t)}const M$=ue("ZodISODate",(t,e)=>{V8.init(t,e),wt.init(t,e)});function D$(t){return GU(M$,t)}const L$=ue("ZodISOTime",(t,e)=>{H8.init(t,e),wt.init(t,e)});function z$(t){return KU(L$,t)}const j$=ue("ZodISODuration",(t,e)=>{G8.init(t,e),wt.init(t,e)});function P$(t){return ZU(j$,t)}const B$=(t,e)=>{yT.init(t,e),t.name="ZodError",Object.defineProperties(t,{format:{value:n=>UB(t,n)},flatten:{value:n=>BB(t,n)},addIssue:{value:n=>{t.issues.push(n),t.message=JSON.stringify(t.issues,qg,2)}},addIssues:{value:n=>{t.issues.push(...n),t.message=JSON.stringify(t.issues,qg,2)}},isEmpty:{get(){return t.issues.length===0}}})},xr=ue("ZodError",B$,{Parent:Error}),U$=f0(xr),$$=h0(xr),q$=xh(xr),F$=wh(xr),V$=FB(xr),H$=VB(xr),G$=HB(xr),K$=GB(xr),Z$=KB(xr),Q$=ZB(xr),J$=QB(xr),Y$=JB(xr),Zt=ue("ZodType",(t,e)=>(Kt.init(t,e),Object.assign(t["~standard"],{jsonSchema:{input:Gf(t,"input"),output:Gf(t,"output")}}),t.toJSONSchema=h$(t,{}),t.def=e,t.type=e.type,Object.defineProperty(t,"_def",{value:e}),t.check=(...n)=>t.clone(Ws(e,{checks:[...e.checks??[],...n.map(r=>typeof r=="function"?{_zod:{check:r,def:{check:"custom"},onattach:[]}}:r)]}),{parent:!0}),t.with=t.check,t.clone=(n,r)=>ei(t,n,r),t.brand=()=>t,t.register=((n,r)=>(n.add(t,r),t)),t.parse=(n,r)=>U$(t,n,r,{callee:t.parse}),t.safeParse=(n,r)=>q$(t,n,r),t.parseAsync=async(n,r)=>$$(t,n,r,{callee:t.parseAsync}),t.safeParseAsync=async(n,r)=>F$(t,n,r),t.spa=t.safeParseAsync,t.encode=(n,r)=>V$(t,n,r),t.decode=(n,r)=>H$(t,n,r),t.encodeAsync=async(n,r)=>G$(t,n,r),t.decodeAsync=async(n,r)=>K$(t,n,r),t.safeEncode=(n,r)=>Z$(t,n,r),t.safeDecode=(n,r)=>Q$(t,n,r),t.safeEncodeAsync=async(n,r)=>J$(t,n,r),t.safeDecodeAsync=async(n,r)=>Y$(t,n,r),t.refine=(n,r)=>t.check(q9(n,r)),t.superRefine=n=>t.check(F9(n)),t.overwrite=n=>t.check(to(n)),t.optional=()=>sS(t),t.exactOptional=()=>R9(t),t.nullable=()=>iS(t),t.nullish=()=>sS(iS(t)),t.nonoptional=n=>L9(t,n),t.array=()=>v9(t),t.or=n=>S9([t,n]),t.and=n=>E9(t,n),t.transform=n=>aS(t,T9(n)),t.default=n=>N9(t,n),t.prefault=n=>D9(t,n),t.catch=n=>j9(t,n),t.pipe=n=>aS(t,n),t.readonly=()=>U9(t),t.describe=n=>{const r=t.clone();return _l.add(r,{description:n}),r},Object.defineProperty(t,"description",{get(){return _l.get(t)?.description},configurable:!0}),t.meta=(...n)=>{if(n.length===0)return _l.get(t);const r=t.clone();return _l.add(r,n[0]),r},t.isOptional=()=>t.safeParse(void 0).success,t.isNullable=()=>t.safeParse(null).success,t.apply=n=>n(t),t)),NT=ue("_ZodString",(t,e)=>{d0.init(t,e),Zt.init(t,e),t._zod.processJSONSchema=(r,s,a)=>p$(t,r,s);const n=t._zod.bag;t.format=n.format??null,t.minLength=n.minimum??null,t.maxLength=n.maximum??null,t.regex=(...r)=>t.check(YU(...r)),t.includes=(...r)=>t.check(e$(...r)),t.startsWith=(...r)=>t.check(t$(...r)),t.endsWith=(...r)=>t.check(n$(...r)),t.min=(...r)=>t.check(Hf(...r)),t.max=(...r)=>t.check(CT(...r)),t.length=(...r)=>t.check(TT(...r)),t.nonempty=(...r)=>t.check(Hf(1,...r)),t.lowercase=r=>t.check(XU(r)),t.uppercase=r=>t.check(WU(r)),t.trim=()=>t.check(s$()),t.normalize=(...r)=>t.check(r$(...r)),t.toLowerCase=()=>t.check(i$()),t.toUpperCase=()=>t.check(a$()),t.slugify=()=>t.check(o$())}),X$=ue("ZodString",(t,e)=>{d0.init(t,e),NT.init(t,e),t.email=n=>t.check(kU(W$,n)),t.url=n=>t.check(RU(e9,n)),t.jwt=n=>t.check(VU(m9,n)),t.emoji=n=>t.check(OU(t9,n)),t.guid=n=>t.check(tS(nS,n)),t.uuid=n=>t.check(EU(Pu,n)),t.uuidv4=n=>t.check(CU(Pu,n)),t.uuidv6=n=>t.check(TU(Pu,n)),t.uuidv7=n=>t.check(AU(Pu,n)),t.nanoid=n=>t.check(IU(n9,n)),t.guid=n=>t.check(tS(nS,n)),t.cuid=n=>t.check(NU(r9,n)),t.cuid2=n=>t.check(MU(s9,n)),t.ulid=n=>t.check(DU(i9,n)),t.base64=n=>t.check($U(h9,n)),t.base64url=n=>t.check(qU(d9,n)),t.xid=n=>t.check(LU(a9,n)),t.ksuid=n=>t.check(zU(o9,n)),t.ipv4=n=>t.check(jU(l9,n)),t.ipv6=n=>t.check(PU(c9,n)),t.cidrv4=n=>t.check(BU(u9,n)),t.cidrv6=n=>t.check(UU(f9,n)),t.e164=n=>t.check(FU(p9,n)),t.datetime=n=>t.check(N$(n)),t.date=n=>t.check(D$(n)),t.time=n=>t.check(z$(n)),t.duration=n=>t.check(P$(n))});function Ur(t){return SU(X$,t)}const wt=ue("ZodStringFormat",(t,e)=>{xt.init(t,e),NT.init(t,e)}),W$=ue("ZodEmail",(t,e)=>{D8.init(t,e),wt.init(t,e)}),nS=ue("ZodGUID",(t,e)=>{N8.init(t,e),wt.init(t,e)}),Pu=ue("ZodUUID",(t,e)=>{M8.init(t,e),wt.init(t,e)}),e9=ue("ZodURL",(t,e)=>{L8.init(t,e),wt.init(t,e)}),t9=ue("ZodEmoji",(t,e)=>{z8.init(t,e),wt.init(t,e)}),n9=ue("ZodNanoID",(t,e)=>{j8.init(t,e),wt.init(t,e)}),r9=ue("ZodCUID",(t,e)=>{P8.init(t,e),wt.init(t,e)}),s9=ue("ZodCUID2",(t,e)=>{B8.init(t,e),wt.init(t,e)}),i9=ue("ZodULID",(t,e)=>{U8.init(t,e),wt.init(t,e)}),a9=ue("ZodXID",(t,e)=>{$8.init(t,e),wt.init(t,e)}),o9=ue("ZodKSUID",(t,e)=>{q8.init(t,e),wt.init(t,e)}),l9=ue("ZodIPv4",(t,e)=>{K8.init(t,e),wt.init(t,e)}),c9=ue("ZodIPv6",(t,e)=>{Z8.init(t,e),wt.init(t,e)}),u9=ue("ZodCIDRv4",(t,e)=>{Q8.init(t,e),wt.init(t,e)}),f9=ue("ZodCIDRv6",(t,e)=>{J8.init(t,e),wt.init(t,e)}),h9=ue("ZodBase64",(t,e)=>{Y8.init(t,e),wt.init(t,e)}),d9=ue("ZodBase64URL",(t,e)=>{W8.init(t,e),wt.init(t,e)}),p9=ue("ZodE164",(t,e)=>{eU.init(t,e),wt.init(t,e)}),m9=ue("ZodJWT",(t,e)=>{nU.init(t,e),wt.init(t,e)}),g9=ue("ZodUnknown",(t,e)=>{rU.init(t,e),Zt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>g$()});function rS(){return QU(g9)}const y9=ue("ZodNever",(t,e)=>{sU.init(t,e),Zt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>m$(t,n,r)});function _9(t){return JU(y9,t)}const b9=ue("ZodArray",(t,e)=>{iU.init(t,e),Zt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>v$(t,n,r,s),t.element=e.element,t.min=(n,r)=>t.check(Hf(n,r)),t.nonempty=n=>t.check(Hf(1,n)),t.max=(n,r)=>t.check(CT(n,r)),t.length=(n,r)=>t.check(TT(n,r)),t.unwrap=()=>t.element});function v9(t,e){return l$(b9,t,e)}const x9=ue("ZodObject",(t,e)=>{oU.init(t,e),Zt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>x$(t,n,r,s),lt(t,"shape",()=>e.shape),t.keyof=()=>p0(Object.keys(t._zod.def.shape)),t.catchall=n=>t.clone({...t._zod.def,catchall:n}),t.passthrough=()=>t.clone({...t._zod.def,catchall:rS()}),t.loose=()=>t.clone({...t._zod.def,catchall:rS()}),t.strict=()=>t.clone({...t._zod.def,catchall:_9()}),t.strip=()=>t.clone({...t._zod.def,catchall:void 0}),t.extend=n=>DB(t,n),t.safeExtend=n=>LB(t,n),t.merge=n=>zB(t,n),t.pick=n=>NB(t,n),t.omit=n=>MB(t,n),t.partial=(...n)=>jB(MT,t,n[0]),t.required=(...n)=>PB(DT,t,n[0])});function Hr(t,e){const n={type:"object",shape:t??{},...Ne(e)};return new x9(n)}const w9=ue("ZodUnion",(t,e)=>{lU.init(t,e),Zt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>w$(t,n,r,s),t.options=e.options});function S9(t,e){return new w9({type:"union",options:t,...Ne(e)})}const k9=ue("ZodIntersection",(t,e)=>{cU.init(t,e),Zt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>S$(t,n,r,s)});function E9(t,e){return new k9({type:"intersection",left:t,right:e})}const Vg=ue("ZodEnum",(t,e)=>{uU.init(t,e),Zt.init(t,e),t._zod.processJSONSchema=(r,s,a)=>y$(t,r,s),t.enum=e.entries,t.options=Object.values(e.entries);const n=new Set(Object.keys(e.entries));t.extract=(r,s)=>{const a={};for(const l of r)if(n.has(l))a[l]=e.entries[l];else throw new Error(`Key ${l} not found in enum`);return new Vg({...e,checks:[],...Ne(s),entries:a})},t.exclude=(r,s)=>{const a={...e.entries};for(const l of r)if(n.has(l))delete a[l];else throw new Error(`Key ${l} not found in enum`);return new Vg({...e,checks:[],...Ne(s),entries:a})}});function p0(t,e){const n=Array.isArray(t)?Object.fromEntries(t.map(r=>[r,r])):t;return new Vg({type:"enum",entries:n,...Ne(e)})}const C9=ue("ZodTransform",(t,e)=>{fU.init(t,e),Zt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>b$(t,n),t._zod.parse=(n,r)=>{if(r.direction==="backward")throw new uT(t.constructor.name);n.addIssue=a=>{if(typeof a=="string")n.issues.push(Fl(a,n.value,e));else{const l=a;l.fatal&&(l.continue=!1),l.code??(l.code="custom"),l.input??(l.input=n.value),l.inst??(l.inst=t),n.issues.push(Fl(l))}};const s=e.transform(n.value,n);return s instanceof Promise?s.then(a=>(n.value=a,n)):(n.value=s,n)}});function T9(t){return new C9({type:"transform",transform:t})}const MT=ue("ZodOptional",(t,e)=>{ET.init(t,e),Zt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>IT(t,n,r,s),t.unwrap=()=>t._zod.def.innerType});function sS(t){return new MT({type:"optional",innerType:t})}const A9=ue("ZodExactOptional",(t,e)=>{hU.init(t,e),Zt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>IT(t,n,r,s),t.unwrap=()=>t._zod.def.innerType});function R9(t){return new A9({type:"optional",innerType:t})}const O9=ue("ZodNullable",(t,e)=>{dU.init(t,e),Zt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>k$(t,n,r,s),t.unwrap=()=>t._zod.def.innerType});function iS(t){return new O9({type:"nullable",innerType:t})}const I9=ue("ZodDefault",(t,e)=>{pU.init(t,e),Zt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>C$(t,n,r,s),t.unwrap=()=>t._zod.def.innerType,t.removeDefault=t.unwrap});function N9(t,e){return new I9({type:"default",innerType:t,get defaultValue(){return typeof e=="function"?e():pT(e)}})}const M9=ue("ZodPrefault",(t,e)=>{mU.init(t,e),Zt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>T$(t,n,r,s),t.unwrap=()=>t._zod.def.innerType});function D9(t,e){return new M9({type:"prefault",innerType:t,get defaultValue(){return typeof e=="function"?e():pT(e)}})}const DT=ue("ZodNonOptional",(t,e)=>{gU.init(t,e),Zt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>E$(t,n,r,s),t.unwrap=()=>t._zod.def.innerType});function L9(t,e){return new DT({type:"nonoptional",innerType:t,...Ne(e)})}const z9=ue("ZodCatch",(t,e)=>{yU.init(t,e),Zt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>A$(t,n,r,s),t.unwrap=()=>t._zod.def.innerType,t.removeCatch=t.unwrap});function j9(t,e){return new z9({type:"catch",innerType:t,catchValue:typeof e=="function"?e:()=>e})}const P9=ue("ZodPipe",(t,e)=>{_U.init(t,e),Zt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>R$(t,n,r,s),t.in=e.in,t.out=e.out});function aS(t,e){return new P9({type:"pipe",in:t,out:e})}const B9=ue("ZodReadonly",(t,e)=>{bU.init(t,e),Zt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>O$(t,n,r,s),t.unwrap=()=>t._zod.def.innerType});function U9(t){return new B9({type:"readonly",innerType:t})}const $9=ue("ZodCustom",(t,e)=>{vU.init(t,e),Zt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>_$(t,n)});function q9(t,e={}){return c$($9,t,e)}function F9(t){return u$(t)}const oS=10*1024;function V9(t){try{const e=JSON.parse(t);return JSON.stringify(e,null,2)}catch{return t}}function H9(t){return t?t.length<=oS?t:t.slice(0,oS)+`
...[TRUNCATED]`:"(empty)"}function G9(t){const e=t.http?.body??{type:"none"},n=e.type==="json"||e.type==="raw"?e.content:e.type==="form-urlencoded"?e.data:e.type==="form-data"?e.data.map(r=>({key:r.key,type:r.type,value:r.type==="file"?r.file?.name:r.value})):null;return{method:t.http?.method??"GET",url:t.url,headers:(t.http?.headers??[]).filter(r=>r.enabled!==!1),queryParams:(t.http?.query??[]).filter(r=>r.enabled!==!1),body:{type:e.type,content:n}}}function K9(t,e){const n=t.http?.response;return n?{status:n.status,statusCode:n.statusCode,headers:n.headers,body:H9(e),duration:n.duration}:null}const LT=Hr({}),Z9=Hr({method:p0(["GET","POST","PUT","PATCH","DELETE","OPTIONS","HEAD"]).describe("The HTTP method")}),Q9=Hr({url:Ur().describe("The full URL for the request")}),J9=Hr({headers:Ur().describe('JSON array of header objects with "key", "value", and optional "enabled" (default true) properties. Example: [{"key": "Content-Type", "value": "application/json"}]')}),Y9=Hr({key:Ur().describe("The header name"),value:Ur().describe("The header value")}),X9=Hr({params:Ur().describe('JSON array of parameter objects with "key", "value", and optional "enabled" (default true) properties. Example: [{"key": "page", "value": "1"}]')}),W9=Hr({key:Ur().describe("The parameter name"),value:Ur().describe("The parameter value")}),eq=Hr({type:p0(["none","json","xml","form-urlencoded","form-data","raw"]).describe("The body type"),content:Ur().optional().describe("The body content. For JSON/XML/raw, provide the content string. For form-urlencoded/form-data, provide JSON array like headers/params. Note: form-data only supports text fields (not file uploads) via this tool.")}),tq=Hr({key:Ur().describe("The header name to remove (case-insensitive)")}),nq=Hr({key:Ur().describe("The query parameter name to remove")}),rq=Rr({name:"get_current_request",description:"Get the current HTTP request configuration including method, URL, headers, query params, and body",inputSchema:LT}),sq=Rr({name:"get_response",description:"Get the response from the last executed request, including status, headers, and body",inputSchema:LT}),iq=Rr({name:"set_method",description:"Set the HTTP method for the request",inputSchema:Z9}),aq=Rr({name:"set_url",description:"Set the URL for the request",inputSchema:Q9}),oq=Rr({name:"set_headers",description:"Set the headers for the request. This replaces all existing headers.",inputSchema:J9}),lq=Rr({name:"add_header",description:"Add a single header to the request",inputSchema:Y9}),cq=Rr({name:"set_query_params",description:"Set the query parameters for the request. This replaces all existing query params.",inputSchema:X9}),uq=Rr({name:"add_query_param",description:"Add a single query parameter to the request",inputSchema:W9}),fq=Rr({name:"set_body",description:"Set the request body",inputSchema:eq}),hq=Rr({name:"remove_header",description:"Remove a header from the request by name",inputSchema:tq}),dq=Rr({name:"remove_query_param",description:"Remove a query parameter from the request by name",inputSchema:nq});function pq(t){const{request:e,setters:n,responseBodyText:r}=t,s=rq.client(async()=>G9(e)),a=sq.client(async()=>K9(e,r)||{error:"No response available. Execute the request first."}),l=iq.client(async x=>{const E=x;return n.setMethod(E.method),{success:!0,method:E.method}}),u=aq.client(async x=>{const E=x;return n.setUrl(E.url),{success:!0,url:E.url}}),f=oq.client(async x=>{const E=x;try{const k=JSON.parse(E.headers).map(T=>({id:Gs(),key:T.key,value:T.value,enabled:T.enabled!==!1}));return n.setHeaders(k),{success:!0,headerCount:k.length}}catch(k){return{success:!1,error:`Invalid JSON for headers: ${k instanceof Error?k.message:"parse error"}`}}}),h=lq.client(async x=>{const E=x,T=[...e.http?.headers??[],{id:Gs(),key:E.key,value:E.value,enabled:!0}];return n.setHeaders(T),{success:!0,added:{key:E.key,value:E.value}}}),m=cq.client(async x=>{const E=x;try{const k=JSON.parse(E.params).map(T=>({id:Gs(),key:T.key,value:T.value,enabled:T.enabled!==!1}));return n.setQuery(k),{success:!0,paramCount:k.length}}catch(k){return{success:!1,error:`Invalid JSON for query params: ${k instanceof Error?k.message:"parse error"}`}}}),p=uq.client(async x=>{const E=x,T=[...e.http?.query??[],{id:Gs(),key:E.key,value:E.value,enabled:!0}];return n.setQuery(T),{success:!0,added:{key:E.key,value:E.value}}}),_=fq.client(async x=>{const E=x;try{let k;switch(E.type){case"none":k={type:"none"};break;case"json":k={type:"json",content:V9(E.content||"")};break;case"xml":k={type:"xml",content:E.content||""};break;case"raw":k={type:"raw",content:E.content||""};break;case"form-urlencoded":{k={type:"form-urlencoded",data:E.content?JSON.parse(E.content).map(C=>({id:Gs(),key:C.key,value:C.value,enabled:C.enabled!==!1})):[]};break}case"form-data":{k={type:"form-data",data:E.content?JSON.parse(E.content).map(C=>({id:Gs(),key:C.key,type:"text",value:C.value||"",enabled:C.enabled!==!1,file:null,fileName:""})):[]};break}default:k={type:"none"}}return n.setBody(k),{success:!0,bodyType:E.type}}catch(k){return{success:!1,error:`Invalid body content: ${k instanceof Error?k.message:"parse error"}`}}}),g=hq.client(async x=>{const E=x,k=E.key.toLowerCase(),T=e.http?.headers??[],C=T.filter(D=>D.key.toLowerCase()!==k),j=T.length-C.length;return j===0?{success:!1,error:`Header '${E.key}' not found`}:(n.setHeaders(C),{success:!0,removed:E.key,removedCount:j})}),v=dq.client(async x=>{const E=x,k=e.http?.query??[],T=k.filter(j=>j.key!==E.key),C=k.length-T.length;return C===0?{success:!1,error:`Query parameter '${E.key}' not found`}:(n.setQuery(T),{success:!0,removed:E.key,removedCount:C})});return QP(s,a,l,u,f,h,g,m,p,v,_)}function mq(){return`You are an AI assistant embedded in an HTTP client (similar to Postman or Insomnia). You have tools that directly modify the request form visible to the user in real-time.

IMPORTANT: When you use tools like set_url, set_headers, set_body, etc., the changes appear immediately in the user's request panel. You are actively editing their requestnot just describing what to do. The user sees updates live as you make them.

Your capabilities:
- View the current request configuration (method, URL, headers, query params, body)
- Directly modify any part of the requestchanges are applied instantly to the UI
- View and analyze responses after the user executes the request

Guidelines:
- When the user asks to create or modify a request, use the appropriate tools to make the changes directly
- After making changes, briefly confirm what you did (e.g., "I've set the URL to ... and added the Authorization header")
- You cannot execute/send requeststhe user must click Send. After they do, you can analyze the response using get_response
- When analyzing responses, look for errors, unexpected data, or issues
- Be concise but helpful in your explanations
- If the user's request is ambiguous, ask for clarification
- When adding headers or params, preserve existing ones unless the user asks to replace them
- Format your responses using Markdown: use **bold**, \`code\`, code blocks with language tags, lists, and headers when appropriate`}const lS={name:"Request Assistant",placeholder:"Ask about your request..."};const gq=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,yq=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,_q={};function cS(t,e){return(_q.jsx?yq:gq).test(t)}var Ta={},km,uS;function bq(){if(uS)return km;uS=1;var t=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,e=/\n/g,n=/^\s*/,r=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,s=/^:\s*/,a=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,l=/^[;\s]*/,u=/^\s+|\s+$/g,f=`
`,h="/",m="*",p="",_="comment",g="declaration";function v(E,k){if(typeof E!="string")throw new TypeError("First argument must be a string");if(!E)return[];k=k||{};var T=1,C=1;function j(z){var M=z.match(e);M&&(T+=M.length);var B=z.lastIndexOf(f);C=~B?z.length-B:C+z.length}function D(){var z={line:T,column:C};return function(M){return M.position=new I(z),H(),M}}function I(z){this.start=z,this.end={line:T,column:C},this.source=k.source}I.prototype.content=E;function U(z){var M=new Error(k.source+":"+T+":"+C+": "+z);if(M.reason=z,M.filename=k.source,M.line=T,M.column=C,M.source=E,!k.silent)throw M}function V(z){var M=z.exec(E);if(M){var B=M[0];return j(B),E=E.slice(B.length),M}}function H(){V(n)}function P(z){var M;for(z=z||[];M=Q();)M!==!1&&z.push(M);return z}function Q(){var z=D();if(!(h!=E.charAt(0)||m!=E.charAt(1))){for(var M=2;p!=E.charAt(M)&&(m!=E.charAt(M)||h!=E.charAt(M+1));)++M;if(M+=2,p===E.charAt(M-1))return U("End of comment missing");var B=E.slice(2,M-2);return C+=2,j(B),E=E.slice(M),C+=2,z({type:_,comment:B})}}function ne(){var z=D(),M=V(r);if(M){if(Q(),!V(s))return U("property missing ':'");var B=V(a),G=z({type:g,property:x(M[0].replace(t,p)),value:B?x(B[0].replace(t,p)):p});return V(l),G}}function me(){var z=[];P(z);for(var M;M=ne();)M!==!1&&(z.push(M),P(z));return z}return H(),me()}function x(E){return E?E.replace(u,p):p}return km=v,km}var fS;function vq(){if(fS)return Ta;fS=1;var t=Ta&&Ta.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ta,"__esModule",{value:!0}),Ta.default=n;const e=t(bq());function n(r,s){let a=null;if(!r||typeof r!="string")return a;const l=(0,e.default)(r),u=typeof s=="function";return l.forEach(f=>{if(f.type!=="declaration")return;const{property:h,value:m}=f;u?s(h,m,f):m&&(a=a||{},a[h]=m)}),a}return Ta}var el={},hS;function xq(){if(hS)return el;hS=1,Object.defineProperty(el,"__esModule",{value:!0}),el.camelCase=void 0;var t=/^--[a-zA-Z0-9_-]+$/,e=/-([a-z])/g,n=/^[^-]+$/,r=/^-(webkit|moz|ms|o|khtml)-/,s=/^-(ms)-/,a=function(h){return!h||n.test(h)||t.test(h)},l=function(h,m){return m.toUpperCase()},u=function(h,m){return"".concat(m,"-")},f=function(h,m){return m===void 0&&(m={}),a(h)?h:(h=h.toLowerCase(),m.reactCompat?h=h.replace(s,u):h=h.replace(r,u),h.replace(e,l))};return el.camelCase=f,el}var tl,dS;function wq(){if(dS)return tl;dS=1;var t=tl&&tl.__importDefault||function(s){return s&&s.__esModule?s:{default:s}},e=t(vq()),n=xq();function r(s,a){var l={};return!s||typeof s!="string"||(0,e.default)(s,function(u,f){u&&f&&(l[(0,n.camelCase)(u,a)]=f)}),l}return r.default=r,tl=r,tl}var Sq=wq();const kq=ZS(Sq),zT=jT("end"),m0=jT("start");function jT(t){return e;function e(n){const r=n&&n.position&&n.position[t]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function Eq(t){const e=m0(t),n=zT(t);if(e&&n)return{start:e,end:n}}function Al(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?pS(t.position):"start"in t||"end"in t?pS(t):"line"in t||"column"in t?Hg(t):""}function Hg(t){return mS(t&&t.line)+":"+mS(t&&t.column)}function pS(t){return Hg(t&&t.start)+"-"+Hg(t&&t.end)}function mS(t){return t&&typeof t=="number"?t:1}class xn extends Error{constructor(e,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let s="",a={},l=!1;if(n&&("line"in n&&"column"in n?a={place:n}:"start"in n&&"end"in n?a={place:n}:"type"in n?a={ancestors:[n],place:n.position}:a={...n}),typeof e=="string"?s=e:!a.cause&&e&&(l=!0,s=e.message,a.cause=e),!a.ruleId&&!a.source&&typeof r=="string"){const f=r.indexOf(":");f===-1?a.ruleId=r:(a.source=r.slice(0,f),a.ruleId=r.slice(f+1))}if(!a.place&&a.ancestors&&a.ancestors){const f=a.ancestors[a.ancestors.length-1];f&&(a.place=f.position)}const u=a.place&&"start"in a.place?a.place.start:a.place;this.ancestors=a.ancestors||void 0,this.cause=a.cause||void 0,this.column=u?u.column:void 0,this.fatal=void 0,this.file="",this.message=s,this.line=u?u.line:void 0,this.name=Al(a.place)||"1:1",this.place=a.place||void 0,this.reason=this.message,this.ruleId=a.ruleId||void 0,this.source=a.source||void 0,this.stack=l&&a.cause&&typeof a.cause.stack=="string"?a.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}xn.prototype.file="";xn.prototype.name="";xn.prototype.reason="";xn.prototype.message="";xn.prototype.stack="";xn.prototype.column=void 0;xn.prototype.line=void 0;xn.prototype.ancestors=void 0;xn.prototype.cause=void 0;xn.prototype.fatal=void 0;xn.prototype.place=void 0;xn.prototype.ruleId=void 0;xn.prototype.source=void 0;const g0={}.hasOwnProperty,Cq=new Map,Tq=/[A-Z]/g,Aq=new Set(["table","tbody","thead","tfoot","tr"]),Rq=new Set(["td","th"]),PT="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function Oq(t,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=e.filePath||void 0;let r;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=Pq(n,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=jq(n,e.jsx,e.jsxs)}const s={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:r,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?Wl:aE,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},a=BT(s,t,void 0);return a&&typeof a!="string"?a:s.create(t,s.Fragment,{children:a||void 0},void 0)}function BT(t,e,n){if(e.type==="element")return Iq(t,e,n);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return Nq(t,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return Dq(t,e,n);if(e.type==="mdxjsEsm")return Mq(t,e);if(e.type==="root")return Lq(t,e,n);if(e.type==="text")return zq(t,e)}function Iq(t,e,n){const r=t.schema;let s=r;e.tagName.toLowerCase()==="svg"&&r.space==="html"&&(s=Wl,t.schema=s),t.ancestors.push(e);const a=$T(t,e.tagName,!1),l=Bq(t,e);let u=_0(t,e);return Aq.has(e.tagName)&&(u=u.filter(function(f){return typeof f=="string"?!rh(f):!0})),UT(t,l,a,e),y0(l,u),t.ancestors.pop(),t.schema=r,t.create(e,a,l,n)}function Nq(t,e){if(e.data&&e.data.estree&&t.evaluater){const r=e.data.estree.body[0];return r.type,t.evaluater.evaluateExpression(r.expression)}Vl(t,e.position)}function Mq(t,e){if(e.data&&e.data.estree&&t.evaluater)return t.evaluater.evaluateProgram(e.data.estree);Vl(t,e.position)}function Dq(t,e,n){const r=t.schema;let s=r;e.name==="svg"&&r.space==="html"&&(s=Wl,t.schema=s),t.ancestors.push(e);const a=e.name===null?t.Fragment:$T(t,e.name,!0),l=Uq(t,e),u=_0(t,e);return UT(t,l,a,e),y0(l,u),t.ancestors.pop(),t.schema=r,t.create(e,a,l,n)}function Lq(t,e,n){const r={};return y0(r,_0(t,e)),t.create(e,t.Fragment,r,n)}function zq(t,e){return e.value}function UT(t,e,n,r){typeof n!="string"&&n!==t.Fragment&&t.passNode&&(e.node=r)}function y0(t,e){if(e.length>0){const n=e.length>1?e:e[0];n&&(t.children=n)}}function jq(t,e,n){return r;function r(s,a,l,u){const h=Array.isArray(l.children)?n:e;return u?h(a,l,u):h(a,l)}}function Pq(t,e){return n;function n(r,s,a,l){const u=Array.isArray(a.children),f=m0(r);return e(s,a,l,u,{columnNumber:f?f.column-1:void 0,fileName:t,lineNumber:f?f.line:void 0},void 0)}}function Bq(t,e){const n={};let r,s;for(s in e.properties)if(s!=="children"&&g0.call(e.properties,s)){const a=$q(t,s,e.properties[s]);if(a){const[l,u]=a;t.tableCellAlignToStyle&&l==="align"&&typeof u=="string"&&Rq.has(e.tagName)?r=u:n[l]=u}}if(r){const a=n.style||(n.style={});a[t.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function Uq(t,e){const n={};for(const r of e.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&t.evaluater){const a=r.data.estree.body[0];a.type;const l=a.expression;l.type;const u=l.properties[0];u.type,Object.assign(n,t.evaluater.evaluateExpression(u.argument))}else Vl(t,e.position);else{const s=r.name;let a;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&t.evaluater){const u=r.value.data.estree.body[0];u.type,a=t.evaluater.evaluateExpression(u.expression)}else Vl(t,e.position);else a=r.value===null?!0:r.value;n[s]=a}return n}function _0(t,e){const n=[];let r=-1;const s=t.passKeys?new Map:Cq;for(;++r<e.children.length;){const a=e.children[r];let l;if(t.passKeys){const f=a.type==="element"?a.tagName:a.type==="mdxJsxFlowElement"||a.type==="mdxJsxTextElement"?a.name:void 0;if(f){const h=s.get(f)||0;l=f+"-"+h,s.set(f,h+1)}}const u=BT(t,a,l);u!==void 0&&n.push(u)}return n}function $q(t,e,n){const r=iE(t.schema,e);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?lE(n):cE(n)),r.property==="style"){let s=typeof n=="object"?n:qq(t,String(n));return t.stylePropertyNameCase==="css"&&(s=Fq(s)),["style",s]}return[t.elementAttributeNameCase==="react"&&r.space?gz[r.property]||r.property:r.attribute,n]}}function qq(t,e){try{return kq(e,{reactCompat:!0})}catch(n){if(t.ignoreInvalidStyle)return{};const r=n,s=new xn("Cannot parse `style` attribute",{ancestors:t.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw s.file=t.filePath||void 0,s.url=PT+"#cannot-parse-style-attribute",s}}function $T(t,e,n){let r;if(!n)r={type:"Literal",value:e};else if(e.includes(".")){const s=e.split(".");let a=-1,l;for(;++a<s.length;){const u=cS(s[a])?{type:"Identifier",name:s[a]}:{type:"Literal",value:s[a]};l=l?{type:"MemberExpression",object:l,property:u,computed:!!(a&&u.type==="Literal"),optional:!1}:u}r=l}else r=cS(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(r.type==="Literal"){const s=r.value;return g0.call(t.components,s)?t.components[s]:s}if(t.evaluater)return t.evaluater.evaluateExpression(r);Vl(t)}function Vl(t,e){const n=new xn("Cannot handle MDX estrees without `createEvaluater`",{ancestors:t.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=t.filePath||void 0,n.url=PT+"#cannot-handle-mdx-estrees-without-createevaluater",n}function Fq(t){const e={};let n;for(n in t)g0.call(t,n)&&(e[Vq(n)]=t[n]);return e}function Vq(t){let e=t.replace(Tq,Hq);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function Hq(t){return"-"+t.toLowerCase()}const Em={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},Gq={};function b0(t,e){const n=Gq,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,s=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return qT(t,r,s)}function qT(t,e,n){if(Kq(t)){if("value"in t)return t.type==="html"&&!n?"":t.value;if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return gS(t.children,e,n)}return Array.isArray(t)?gS(t,e,n):""}function gS(t,e,n){const r=[];let s=-1;for(;++s<t.length;)r[s]=qT(t[s],e,n);return r.join("")}function Kq(t){return!!(t&&typeof t=="object")}const yS=document.createElement("i");function v0(t){const e="&"+t+";";yS.innerHTML=e;const n=yS.textContent;return n.charCodeAt(n.length-1)===59&&t!=="semi"||n===e?!1:n}function er(t,e,n,r){const s=t.length;let a=0,l;if(e<0?e=-e>s?0:s+e:e=e>s?s:e,n=n>0?n:0,r.length<1e4)l=Array.from(r),l.unshift(e,n),t.splice(...l);else for(n&&t.splice(e,n);a<r.length;)l=r.slice(a,a+1e4),l.unshift(e,0),t.splice(...l),a+=1e4,e+=1e4}function yr(t,e){return t.length>0?(er(t,t.length,0,e),t):e}const _S={}.hasOwnProperty;function FT(t){const e={};let n=-1;for(;++n<t.length;)Zq(e,t[n]);return e}function Zq(t,e){let n;for(n in e){const s=(_S.call(t,n)?t[n]:void 0)||(t[n]={}),a=e[n];let l;if(a)for(l in a){_S.call(s,l)||(s[l]=[]);const u=a[l];Qq(s[l],Array.isArray(u)?u:u?[u]:[])}}}function Qq(t,e){let n=-1;const r=[];for(;++n<e.length;)(e[n].add==="after"?t:r).push(e[n]);er(t,0,0,r)}function VT(t,e){const n=Number.parseInt(t,e);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function Ar(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const An=ti(/[A-Za-z]/),vn=ti(/[\dA-Za-z]/),Jq=ti(/[#-'*+\--9=?A-Z^-~]/);function Kf(t){return t!==null&&(t<32||t===127)}const Gg=ti(/\d/),Yq=ti(/[\dA-Fa-f]/),Xq=ti(/[!-/:-@[-`{-~]/);function Re(t){return t!==null&&t<-2}function mt(t){return t!==null&&(t<0||t===32)}function Ge(t){return t===-2||t===-1||t===32}const kh=ti(new RegExp("\\p{P}|\\p{S}","u")),Di=ti(/\s/);function ti(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function no(t){const e=[];let n=-1,r=0,s=0;for(;++n<t.length;){const a=t.charCodeAt(n);let l="";if(a===37&&vn(t.charCodeAt(n+1))&&vn(t.charCodeAt(n+2)))s=2;else if(a<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(a))||(l=String.fromCharCode(a));else if(a>55295&&a<57344){const u=t.charCodeAt(n+1);a<56320&&u>56319&&u<57344?(l=String.fromCharCode(a,u),s=1):l=""}else l=String.fromCharCode(a);l&&(e.push(t.slice(r,n),encodeURIComponent(l)),r=n+s+1,l=""),s&&(n+=s,s=0)}return e.join("")+t.slice(r)}function Xe(t,e,n,r){const s=r?r-1:Number.POSITIVE_INFINITY;let a=0;return l;function l(f){return Ge(f)?(t.enter(n),u(f)):e(f)}function u(f){return Ge(f)&&a++<s?(t.consume(f),u):(t.exit(n),e(f))}}const Wq={tokenize:eF};function eF(t){const e=t.attempt(this.parser.constructs.contentInitial,r,s);let n;return e;function r(u){if(u===null){t.consume(u);return}return t.enter("lineEnding"),t.consume(u),t.exit("lineEnding"),Xe(t,e,"linePrefix")}function s(u){return t.enter("paragraph"),a(u)}function a(u){const f=t.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=f),n=f,l(u)}function l(u){if(u===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(u);return}return Re(u)?(t.consume(u),t.exit("chunkText"),a):(t.consume(u),l)}}const tF={tokenize:nF},bS={tokenize:rF};function nF(t){const e=this,n=[];let r=0,s,a,l;return u;function u(C){if(r<n.length){const j=n[r];return e.containerState=j[1],t.attempt(j[0].continuation,f,h)(C)}return h(C)}function f(C){if(r++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,s&&T();const j=e.events.length;let D=j,I;for(;D--;)if(e.events[D][0]==="exit"&&e.events[D][1].type==="chunkFlow"){I=e.events[D][1].end;break}k(r);let U=j;for(;U<e.events.length;)e.events[U][1].end={...I},U++;return er(e.events,D+1,0,e.events.slice(j)),e.events.length=U,h(C)}return u(C)}function h(C){if(r===n.length){if(!s)return _(C);if(s.currentConstruct&&s.currentConstruct.concrete)return v(C);e.interrupt=!!(s.currentConstruct&&!s._gfmTableDynamicInterruptHack)}return e.containerState={},t.check(bS,m,p)(C)}function m(C){return s&&T(),k(r),_(C)}function p(C){return e.parser.lazy[e.now().line]=r!==n.length,l=e.now().offset,v(C)}function _(C){return e.containerState={},t.attempt(bS,g,v)(C)}function g(C){return r++,n.push([e.currentConstruct,e.containerState]),_(C)}function v(C){if(C===null){s&&T(),k(0),t.consume(C);return}return s=s||e.parser.flow(e.now()),t.enter("chunkFlow",{_tokenizer:s,contentType:"flow",previous:a}),x(C)}function x(C){if(C===null){E(t.exit("chunkFlow"),!0),k(0),t.consume(C);return}return Re(C)?(t.consume(C),E(t.exit("chunkFlow")),r=0,e.interrupt=void 0,u):(t.consume(C),x)}function E(C,j){const D=e.sliceStream(C);if(j&&D.push(null),C.previous=a,a&&(a.next=C),a=C,s.defineSkip(C.start),s.write(D),e.parser.lazy[C.start.line]){let I=s.events.length;for(;I--;)if(s.events[I][1].start.offset<l&&(!s.events[I][1].end||s.events[I][1].end.offset>l))return;const U=e.events.length;let V=U,H,P;for(;V--;)if(e.events[V][0]==="exit"&&e.events[V][1].type==="chunkFlow"){if(H){P=e.events[V][1].end;break}H=!0}for(k(r),I=U;I<e.events.length;)e.events[I][1].end={...P},I++;er(e.events,V+1,0,e.events.slice(U)),e.events.length=I}}function k(C){let j=n.length;for(;j-- >C;){const D=n[j];e.containerState=D[1],D[0].exit.call(e,t)}n.length=C}function T(){s.write([null]),a=void 0,s=void 0,e.containerState._closeFlow=void 0}}function rF(t,e,n){return Xe(t,t.attempt(this.parser.constructs.document,e,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Ka(t){if(t===null||mt(t)||Di(t))return 1;if(kh(t))return 2}function Eh(t,e,n){const r=[];let s=-1;for(;++s<t.length;){const a=t[s].resolveAll;a&&!r.includes(a)&&(e=a(e,n),r.push(a))}return e}const Kg={name:"attention",resolveAll:sF,tokenize:iF};function sF(t,e){let n=-1,r,s,a,l,u,f,h,m;for(;++n<t.length;)if(t[n][0]==="enter"&&t[n][1].type==="attentionSequence"&&t[n][1]._close){for(r=n;r--;)if(t[r][0]==="exit"&&t[r][1].type==="attentionSequence"&&t[r][1]._open&&e.sliceSerialize(t[r][1]).charCodeAt(0)===e.sliceSerialize(t[n][1]).charCodeAt(0)){if((t[r][1]._close||t[n][1]._open)&&(t[n][1].end.offset-t[n][1].start.offset)%3&&!((t[r][1].end.offset-t[r][1].start.offset+t[n][1].end.offset-t[n][1].start.offset)%3))continue;f=t[r][1].end.offset-t[r][1].start.offset>1&&t[n][1].end.offset-t[n][1].start.offset>1?2:1;const p={...t[r][1].end},_={...t[n][1].start};vS(p,-f),vS(_,f),l={type:f>1?"strongSequence":"emphasisSequence",start:p,end:{...t[r][1].end}},u={type:f>1?"strongSequence":"emphasisSequence",start:{...t[n][1].start},end:_},a={type:f>1?"strongText":"emphasisText",start:{...t[r][1].end},end:{...t[n][1].start}},s={type:f>1?"strong":"emphasis",start:{...l.start},end:{...u.end}},t[r][1].end={...l.start},t[n][1].start={...u.end},h=[],t[r][1].end.offset-t[r][1].start.offset&&(h=yr(h,[["enter",t[r][1],e],["exit",t[r][1],e]])),h=yr(h,[["enter",s,e],["enter",l,e],["exit",l,e],["enter",a,e]]),h=yr(h,Eh(e.parser.constructs.insideSpan.null,t.slice(r+1,n),e)),h=yr(h,[["exit",a,e],["enter",u,e],["exit",u,e],["exit",s,e]]),t[n][1].end.offset-t[n][1].start.offset?(m=2,h=yr(h,[["enter",t[n][1],e],["exit",t[n][1],e]])):m=0,er(t,r-1,n-r+3,h),n=r+h.length-m-2;break}}for(n=-1;++n<t.length;)t[n][1].type==="attentionSequence"&&(t[n][1].type="data");return t}function iF(t,e){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,s=Ka(r);let a;return l;function l(f){return a=f,t.enter("attentionSequence"),u(f)}function u(f){if(f===a)return t.consume(f),u;const h=t.exit("attentionSequence"),m=Ka(f),p=!m||m===2&&s||n.includes(f),_=!s||s===2&&m||n.includes(r);return h._open=!!(a===42?p:p&&(s||!_)),h._close=!!(a===42?_:_&&(m||!p)),e(f)}}function vS(t,e){t.column+=e,t.offset+=e,t._bufferIndex+=e}const aF={name:"autolink",tokenize:oF};function oF(t,e,n){let r=0;return s;function s(g){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(g),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),a}function a(g){return An(g)?(t.consume(g),l):g===64?n(g):h(g)}function l(g){return g===43||g===45||g===46||vn(g)?(r=1,u(g)):h(g)}function u(g){return g===58?(t.consume(g),r=0,f):(g===43||g===45||g===46||vn(g))&&r++<32?(t.consume(g),u):(r=0,h(g))}function f(g){return g===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(g),t.exit("autolinkMarker"),t.exit("autolink"),e):g===null||g===32||g===60||Kf(g)?n(g):(t.consume(g),f)}function h(g){return g===64?(t.consume(g),m):Jq(g)?(t.consume(g),h):n(g)}function m(g){return vn(g)?p(g):n(g)}function p(g){return g===46?(t.consume(g),r=0,m):g===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(g),t.exit("autolinkMarker"),t.exit("autolink"),e):_(g)}function _(g){if((g===45||vn(g))&&r++<63){const v=g===45?_:p;return t.consume(g),v}return n(g)}}const rc={partial:!0,tokenize:lF};function lF(t,e,n){return r;function r(a){return Ge(a)?Xe(t,s,"linePrefix")(a):s(a)}function s(a){return a===null||Re(a)?e(a):n(a)}}const HT={continuation:{tokenize:uF},exit:fF,name:"blockQuote",tokenize:cF};function cF(t,e,n){const r=this;return s;function s(l){if(l===62){const u=r.containerState;return u.open||(t.enter("blockQuote",{_container:!0}),u.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(l),t.exit("blockQuoteMarker"),a}return n(l)}function a(l){return Ge(l)?(t.enter("blockQuotePrefixWhitespace"),t.consume(l),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),e):(t.exit("blockQuotePrefix"),e(l))}}function uF(t,e,n){const r=this;return s;function s(l){return Ge(l)?Xe(t,a,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l):a(l)}function a(l){return t.attempt(HT,e,n)(l)}}function fF(t){t.exit("blockQuote")}const GT={name:"characterEscape",tokenize:hF};function hF(t,e,n){return r;function r(a){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(a),t.exit("escapeMarker"),s}function s(a){return Xq(a)?(t.enter("characterEscapeValue"),t.consume(a),t.exit("characterEscapeValue"),t.exit("characterEscape"),e):n(a)}}const KT={name:"characterReference",tokenize:dF};function dF(t,e,n){const r=this;let s=0,a,l;return u;function u(p){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(p),t.exit("characterReferenceMarker"),f}function f(p){return p===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(p),t.exit("characterReferenceMarkerNumeric"),h):(t.enter("characterReferenceValue"),a=31,l=vn,m(p))}function h(p){return p===88||p===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(p),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),a=6,l=Yq,m):(t.enter("characterReferenceValue"),a=7,l=Gg,m(p))}function m(p){if(p===59&&s){const _=t.exit("characterReferenceValue");return l===vn&&!v0(r.sliceSerialize(_))?n(p):(t.enter("characterReferenceMarker"),t.consume(p),t.exit("characterReferenceMarker"),t.exit("characterReference"),e)}return l(p)&&s++<a?(t.consume(p),m):n(p)}}const xS={partial:!0,tokenize:mF},wS={concrete:!0,name:"codeFenced",tokenize:pF};function pF(t,e,n){const r=this,s={partial:!0,tokenize:D};let a=0,l=0,u;return f;function f(I){return h(I)}function h(I){const U=r.events[r.events.length-1];return a=U&&U[1].type==="linePrefix"?U[2].sliceSerialize(U[1],!0).length:0,u=I,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),m(I)}function m(I){return I===u?(l++,t.consume(I),m):l<3?n(I):(t.exit("codeFencedFenceSequence"),Ge(I)?Xe(t,p,"whitespace")(I):p(I))}function p(I){return I===null||Re(I)?(t.exit("codeFencedFence"),r.interrupt?e(I):t.check(xS,x,j)(I)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),_(I))}function _(I){return I===null||Re(I)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),p(I)):Ge(I)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),Xe(t,g,"whitespace")(I)):I===96&&I===u?n(I):(t.consume(I),_)}function g(I){return I===null||Re(I)?p(I):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),v(I))}function v(I){return I===null||Re(I)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),p(I)):I===96&&I===u?n(I):(t.consume(I),v)}function x(I){return t.attempt(s,j,E)(I)}function E(I){return t.enter("lineEnding"),t.consume(I),t.exit("lineEnding"),k}function k(I){return a>0&&Ge(I)?Xe(t,T,"linePrefix",a+1)(I):T(I)}function T(I){return I===null||Re(I)?t.check(xS,x,j)(I):(t.enter("codeFlowValue"),C(I))}function C(I){return I===null||Re(I)?(t.exit("codeFlowValue"),T(I)):(t.consume(I),C)}function j(I){return t.exit("codeFenced"),e(I)}function D(I,U,V){let H=0;return P;function P(M){return I.enter("lineEnding"),I.consume(M),I.exit("lineEnding"),Q}function Q(M){return I.enter("codeFencedFence"),Ge(M)?Xe(I,ne,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(M):ne(M)}function ne(M){return M===u?(I.enter("codeFencedFenceSequence"),me(M)):V(M)}function me(M){return M===u?(H++,I.consume(M),me):H>=l?(I.exit("codeFencedFenceSequence"),Ge(M)?Xe(I,z,"whitespace")(M):z(M)):V(M)}function z(M){return M===null||Re(M)?(I.exit("codeFencedFence"),U(M)):V(M)}}}function mF(t,e,n){const r=this;return s;function s(l){return l===null?n(l):(t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),a)}function a(l){return r.parser.lazy[r.now().line]?n(l):e(l)}}const Cm={name:"codeIndented",tokenize:yF},gF={partial:!0,tokenize:_F};function yF(t,e,n){const r=this;return s;function s(h){return t.enter("codeIndented"),Xe(t,a,"linePrefix",5)(h)}function a(h){const m=r.events[r.events.length-1];return m&&m[1].type==="linePrefix"&&m[2].sliceSerialize(m[1],!0).length>=4?l(h):n(h)}function l(h){return h===null?f(h):Re(h)?t.attempt(gF,l,f)(h):(t.enter("codeFlowValue"),u(h))}function u(h){return h===null||Re(h)?(t.exit("codeFlowValue"),l(h)):(t.consume(h),u)}function f(h){return t.exit("codeIndented"),e(h)}}function _F(t,e,n){const r=this;return s;function s(l){return r.parser.lazy[r.now().line]?n(l):Re(l)?(t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),s):Xe(t,a,"linePrefix",5)(l)}function a(l){const u=r.events[r.events.length-1];return u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?e(l):Re(l)?s(l):n(l)}}const bF={name:"codeText",previous:xF,resolve:vF,tokenize:wF};function vF(t){let e=t.length-4,n=3,r,s;if((t[n][1].type==="lineEnding"||t[n][1].type==="space")&&(t[e][1].type==="lineEnding"||t[e][1].type==="space")){for(r=n;++r<e;)if(t[r][1].type==="codeTextData"){t[n][1].type="codeTextPadding",t[e][1].type="codeTextPadding",n+=2,e-=2;break}}for(r=n-1,e++;++r<=e;)s===void 0?r!==e&&t[r][1].type!=="lineEnding"&&(s=r):(r===e||t[r][1].type==="lineEnding")&&(t[s][1].type="codeTextData",r!==s+2&&(t[s][1].end=t[r-1][1].end,t.splice(s+2,r-s-2),e-=r-s-2,r=s+2),s=void 0);return t}function xF(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function wF(t,e,n){let r=0,s,a;return l;function l(p){return t.enter("codeText"),t.enter("codeTextSequence"),u(p)}function u(p){return p===96?(t.consume(p),r++,u):(t.exit("codeTextSequence"),f(p))}function f(p){return p===null?n(p):p===32?(t.enter("space"),t.consume(p),t.exit("space"),f):p===96?(a=t.enter("codeTextSequence"),s=0,m(p)):Re(p)?(t.enter("lineEnding"),t.consume(p),t.exit("lineEnding"),f):(t.enter("codeTextData"),h(p))}function h(p){return p===null||p===32||p===96||Re(p)?(t.exit("codeTextData"),f(p)):(t.consume(p),h)}function m(p){return p===96?(t.consume(p),s++,m):s===r?(t.exit("codeTextSequence"),t.exit("codeText"),e(p)):(a.type="codeTextData",h(p))}}class SF{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(e,r):e>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(e,n,r){const s=n||0;this.setCursor(Math.trunc(e));const a=this.right.splice(this.right.length-s,Number.POSITIVE_INFINITY);return r&&nl(this.left,r),a.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),nl(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),nl(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const n=this.left.splice(e,Number.POSITIVE_INFINITY);nl(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);nl(this.left,n.reverse())}}}function nl(t,e){let n=0;if(e.length<1e4)t.push(...e);else for(;n<e.length;)t.push(...e.slice(n,n+1e4)),n+=1e4}function ZT(t){const e={};let n=-1,r,s,a,l,u,f,h;const m=new SF(t);for(;++n<m.length;){for(;n in e;)n=e[n];if(r=m.get(n),n&&r[1].type==="chunkFlow"&&m.get(n-1)[1].type==="listItemPrefix"&&(f=r[1]._tokenizer.events,a=0,a<f.length&&f[a][1].type==="lineEndingBlank"&&(a+=2),a<f.length&&f[a][1].type==="content"))for(;++a<f.length&&f[a][1].type!=="content";)f[a][1].type==="chunkText"&&(f[a][1]._isInFirstContentOfListItem=!0,a++);if(r[0]==="enter")r[1].contentType&&(Object.assign(e,kF(m,n)),n=e[n],h=!0);else if(r[1]._container){for(a=n,s=void 0;a--;)if(l=m.get(a),l[1].type==="lineEnding"||l[1].type==="lineEndingBlank")l[0]==="enter"&&(s&&(m.get(s)[1].type="lineEndingBlank"),l[1].type="lineEnding",s=a);else if(!(l[1].type==="linePrefix"||l[1].type==="listItemIndent"))break;s&&(r[1].end={...m.get(s)[1].start},u=m.slice(s,n),u.unshift(r),m.splice(s,n-s+1,u))}}return er(t,0,Number.POSITIVE_INFINITY,m.slice(0)),!h}function kF(t,e){const n=t.get(e)[1],r=t.get(e)[2];let s=e-1;const a=[];let l=n._tokenizer;l||(l=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(l._contentTypeTextTrailing=!0));const u=l.events,f=[],h={};let m,p,_=-1,g=n,v=0,x=0;const E=[x];for(;g;){for(;t.get(++s)[1]!==g;);a.push(s),g._tokenizer||(m=r.sliceStream(g),g.next||m.push(null),p&&l.defineSkip(g.start),g._isInFirstContentOfListItem&&(l._gfmTasklistFirstContentOfListItem=!0),l.write(m),g._isInFirstContentOfListItem&&(l._gfmTasklistFirstContentOfListItem=void 0)),p=g,g=g.next}for(g=n;++_<u.length;)u[_][0]==="exit"&&u[_-1][0]==="enter"&&u[_][1].type===u[_-1][1].type&&u[_][1].start.line!==u[_][1].end.line&&(x=_+1,E.push(x),g._tokenizer=void 0,g.previous=void 0,g=g.next);for(l.events=[],g?(g._tokenizer=void 0,g.previous=void 0):E.pop(),_=E.length;_--;){const k=u.slice(E[_],E[_+1]),T=a.pop();f.push([T,T+k.length-1]),t.splice(T,2,k)}for(f.reverse(),_=-1;++_<f.length;)h[v+f[_][0]]=v+f[_][1],v+=f[_][1]-f[_][0]-1;return h}const EF={resolve:TF,tokenize:AF},CF={partial:!0,tokenize:RF};function TF(t){return ZT(t),t}function AF(t,e){let n;return r;function r(u){return t.enter("content"),n=t.enter("chunkContent",{contentType:"content"}),s(u)}function s(u){return u===null?a(u):Re(u)?t.check(CF,l,a)(u):(t.consume(u),s)}function a(u){return t.exit("chunkContent"),t.exit("content"),e(u)}function l(u){return t.consume(u),t.exit("chunkContent"),n.next=t.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,s}}function RF(t,e,n){const r=this;return s;function s(l){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),Xe(t,a,"linePrefix")}function a(l){if(l===null||Re(l))return n(l);const u=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?e(l):t.interrupt(r.parser.constructs.flow,n,e)(l)}}function QT(t,e,n,r,s,a,l,u,f){const h=f||Number.POSITIVE_INFINITY;let m=0;return p;function p(k){return k===60?(t.enter(r),t.enter(s),t.enter(a),t.consume(k),t.exit(a),_):k===null||k===32||k===41||Kf(k)?n(k):(t.enter(r),t.enter(l),t.enter(u),t.enter("chunkString",{contentType:"string"}),x(k))}function _(k){return k===62?(t.enter(a),t.consume(k),t.exit(a),t.exit(s),t.exit(r),e):(t.enter(u),t.enter("chunkString",{contentType:"string"}),g(k))}function g(k){return k===62?(t.exit("chunkString"),t.exit(u),_(k)):k===null||k===60||Re(k)?n(k):(t.consume(k),k===92?v:g)}function v(k){return k===60||k===62||k===92?(t.consume(k),g):g(k)}function x(k){return!m&&(k===null||k===41||mt(k))?(t.exit("chunkString"),t.exit(u),t.exit(l),t.exit(r),e(k)):m<h&&k===40?(t.consume(k),m++,x):k===41?(t.consume(k),m--,x):k===null||k===32||k===40||Kf(k)?n(k):(t.consume(k),k===92?E:x)}function E(k){return k===40||k===41||k===92?(t.consume(k),x):x(k)}}function JT(t,e,n,r,s,a){const l=this;let u=0,f;return h;function h(g){return t.enter(r),t.enter(s),t.consume(g),t.exit(s),t.enter(a),m}function m(g){return u>999||g===null||g===91||g===93&&!f||g===94&&!u&&"_hiddenFootnoteSupport"in l.parser.constructs?n(g):g===93?(t.exit(a),t.enter(s),t.consume(g),t.exit(s),t.exit(r),e):Re(g)?(t.enter("lineEnding"),t.consume(g),t.exit("lineEnding"),m):(t.enter("chunkString",{contentType:"string"}),p(g))}function p(g){return g===null||g===91||g===93||Re(g)||u++>999?(t.exit("chunkString"),m(g)):(t.consume(g),f||(f=!Ge(g)),g===92?_:p)}function _(g){return g===91||g===92||g===93?(t.consume(g),u++,p):p(g)}}function YT(t,e,n,r,s,a){let l;return u;function u(_){return _===34||_===39||_===40?(t.enter(r),t.enter(s),t.consume(_),t.exit(s),l=_===40?41:_,f):n(_)}function f(_){return _===l?(t.enter(s),t.consume(_),t.exit(s),t.exit(r),e):(t.enter(a),h(_))}function h(_){return _===l?(t.exit(a),f(l)):_===null?n(_):Re(_)?(t.enter("lineEnding"),t.consume(_),t.exit("lineEnding"),Xe(t,h,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),m(_))}function m(_){return _===l||_===null||Re(_)?(t.exit("chunkString"),h(_)):(t.consume(_),_===92?p:m)}function p(_){return _===l||_===92?(t.consume(_),m):m(_)}}function Rl(t,e){let n;return r;function r(s){return Re(s)?(t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),n=!0,r):Ge(s)?Xe(t,r,n?"linePrefix":"lineSuffix")(s):e(s)}}const OF={name:"definition",tokenize:NF},IF={partial:!0,tokenize:MF};function NF(t,e,n){const r=this;let s;return a;function a(g){return t.enter("definition"),l(g)}function l(g){return JT.call(r,t,u,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(g)}function u(g){return s=Ar(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),g===58?(t.enter("definitionMarker"),t.consume(g),t.exit("definitionMarker"),f):n(g)}function f(g){return mt(g)?Rl(t,h)(g):h(g)}function h(g){return QT(t,m,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(g)}function m(g){return t.attempt(IF,p,p)(g)}function p(g){return Ge(g)?Xe(t,_,"whitespace")(g):_(g)}function _(g){return g===null||Re(g)?(t.exit("definition"),r.parser.defined.push(s),e(g)):n(g)}}function MF(t,e,n){return r;function r(u){return mt(u)?Rl(t,s)(u):n(u)}function s(u){return YT(t,a,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(u)}function a(u){return Ge(u)?Xe(t,l,"whitespace")(u):l(u)}function l(u){return u===null||Re(u)?e(u):n(u)}}const DF={name:"hardBreakEscape",tokenize:LF};function LF(t,e,n){return r;function r(a){return t.enter("hardBreakEscape"),t.consume(a),s}function s(a){return Re(a)?(t.exit("hardBreakEscape"),e(a)):n(a)}}const zF={name:"headingAtx",resolve:jF,tokenize:PF};function jF(t,e){let n=t.length-2,r=3,s,a;return t[r][1].type==="whitespace"&&(r+=2),n-2>r&&t[n][1].type==="whitespace"&&(n-=2),t[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&t[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(s={type:"atxHeadingText",start:t[r][1].start,end:t[n][1].end},a={type:"chunkText",start:t[r][1].start,end:t[n][1].end,contentType:"text"},er(t,r,n-r+1,[["enter",s,e],["enter",a,e],["exit",a,e],["exit",s,e]])),t}function PF(t,e,n){let r=0;return s;function s(m){return t.enter("atxHeading"),a(m)}function a(m){return t.enter("atxHeadingSequence"),l(m)}function l(m){return m===35&&r++<6?(t.consume(m),l):m===null||mt(m)?(t.exit("atxHeadingSequence"),u(m)):n(m)}function u(m){return m===35?(t.enter("atxHeadingSequence"),f(m)):m===null||Re(m)?(t.exit("atxHeading"),e(m)):Ge(m)?Xe(t,u,"whitespace")(m):(t.enter("atxHeadingText"),h(m))}function f(m){return m===35?(t.consume(m),f):(t.exit("atxHeadingSequence"),u(m))}function h(m){return m===null||m===35||mt(m)?(t.exit("atxHeadingText"),u(m)):(t.consume(m),h)}}const BF=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],SS=["pre","script","style","textarea"],UF={concrete:!0,name:"htmlFlow",resolveTo:FF,tokenize:VF},$F={partial:!0,tokenize:GF},qF={partial:!0,tokenize:HF};function FF(t){let e=t.length;for(;e--&&!(t[e][0]==="enter"&&t[e][1].type==="htmlFlow"););return e>1&&t[e-2][1].type==="linePrefix"&&(t[e][1].start=t[e-2][1].start,t[e+1][1].start=t[e-2][1].start,t.splice(e-2,2)),t}function VF(t,e,n){const r=this;let s,a,l,u,f;return h;function h(O){return m(O)}function m(O){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(O),p}function p(O){return O===33?(t.consume(O),_):O===47?(t.consume(O),a=!0,x):O===63?(t.consume(O),s=3,r.interrupt?e:R):An(O)?(t.consume(O),l=String.fromCharCode(O),E):n(O)}function _(O){return O===45?(t.consume(O),s=2,g):O===91?(t.consume(O),s=5,u=0,v):An(O)?(t.consume(O),s=4,r.interrupt?e:R):n(O)}function g(O){return O===45?(t.consume(O),r.interrupt?e:R):n(O)}function v(O){const ie="CDATA[";return O===ie.charCodeAt(u++)?(t.consume(O),u===ie.length?r.interrupt?e:ne:v):n(O)}function x(O){return An(O)?(t.consume(O),l=String.fromCharCode(O),E):n(O)}function E(O){if(O===null||O===47||O===62||mt(O)){const ie=O===47,pe=l.toLowerCase();return!ie&&!a&&SS.includes(pe)?(s=1,r.interrupt?e(O):ne(O)):BF.includes(l.toLowerCase())?(s=6,ie?(t.consume(O),k):r.interrupt?e(O):ne(O)):(s=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(O):a?T(O):C(O))}return O===45||vn(O)?(t.consume(O),l+=String.fromCharCode(O),E):n(O)}function k(O){return O===62?(t.consume(O),r.interrupt?e:ne):n(O)}function T(O){return Ge(O)?(t.consume(O),T):P(O)}function C(O){return O===47?(t.consume(O),P):O===58||O===95||An(O)?(t.consume(O),j):Ge(O)?(t.consume(O),C):P(O)}function j(O){return O===45||O===46||O===58||O===95||vn(O)?(t.consume(O),j):D(O)}function D(O){return O===61?(t.consume(O),I):Ge(O)?(t.consume(O),D):C(O)}function I(O){return O===null||O===60||O===61||O===62||O===96?n(O):O===34||O===39?(t.consume(O),f=O,U):Ge(O)?(t.consume(O),I):V(O)}function U(O){return O===f?(t.consume(O),f=null,H):O===null||Re(O)?n(O):(t.consume(O),U)}function V(O){return O===null||O===34||O===39||O===47||O===60||O===61||O===62||O===96||mt(O)?D(O):(t.consume(O),V)}function H(O){return O===47||O===62||Ge(O)?C(O):n(O)}function P(O){return O===62?(t.consume(O),Q):n(O)}function Q(O){return O===null||Re(O)?ne(O):Ge(O)?(t.consume(O),Q):n(O)}function ne(O){return O===45&&s===2?(t.consume(O),B):O===60&&s===1?(t.consume(O),G):O===62&&s===4?(t.consume(O),N):O===63&&s===3?(t.consume(O),R):O===93&&s===5?(t.consume(O),J):Re(O)&&(s===6||s===7)?(t.exit("htmlFlowData"),t.check($F,F,me)(O)):O===null||Re(O)?(t.exit("htmlFlowData"),me(O)):(t.consume(O),ne)}function me(O){return t.check(qF,z,F)(O)}function z(O){return t.enter("lineEnding"),t.consume(O),t.exit("lineEnding"),M}function M(O){return O===null||Re(O)?me(O):(t.enter("htmlFlowData"),ne(O))}function B(O){return O===45?(t.consume(O),R):ne(O)}function G(O){return O===47?(t.consume(O),l="",re):ne(O)}function re(O){if(O===62){const ie=l.toLowerCase();return SS.includes(ie)?(t.consume(O),N):ne(O)}return An(O)&&l.length<8?(t.consume(O),l+=String.fromCharCode(O),re):ne(O)}function J(O){return O===93?(t.consume(O),R):ne(O)}function R(O){return O===62?(t.consume(O),N):O===45&&s===2?(t.consume(O),R):ne(O)}function N(O){return O===null||Re(O)?(t.exit("htmlFlowData"),F(O)):(t.consume(O),N)}function F(O){return t.exit("htmlFlow"),e(O)}}function HF(t,e,n){const r=this;return s;function s(l){return Re(l)?(t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),a):n(l)}function a(l){return r.parser.lazy[r.now().line]?n(l):e(l)}}function GF(t,e,n){return r;function r(s){return t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),t.attempt(rc,e,n)}}const KF={name:"htmlText",tokenize:ZF};function ZF(t,e,n){const r=this;let s,a,l;return u;function u(R){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(R),f}function f(R){return R===33?(t.consume(R),h):R===47?(t.consume(R),D):R===63?(t.consume(R),C):An(R)?(t.consume(R),V):n(R)}function h(R){return R===45?(t.consume(R),m):R===91?(t.consume(R),a=0,v):An(R)?(t.consume(R),T):n(R)}function m(R){return R===45?(t.consume(R),g):n(R)}function p(R){return R===null?n(R):R===45?(t.consume(R),_):Re(R)?(l=p,G(R)):(t.consume(R),p)}function _(R){return R===45?(t.consume(R),g):p(R)}function g(R){return R===62?B(R):R===45?_(R):p(R)}function v(R){const N="CDATA[";return R===N.charCodeAt(a++)?(t.consume(R),a===N.length?x:v):n(R)}function x(R){return R===null?n(R):R===93?(t.consume(R),E):Re(R)?(l=x,G(R)):(t.consume(R),x)}function E(R){return R===93?(t.consume(R),k):x(R)}function k(R){return R===62?B(R):R===93?(t.consume(R),k):x(R)}function T(R){return R===null||R===62?B(R):Re(R)?(l=T,G(R)):(t.consume(R),T)}function C(R){return R===null?n(R):R===63?(t.consume(R),j):Re(R)?(l=C,G(R)):(t.consume(R),C)}function j(R){return R===62?B(R):C(R)}function D(R){return An(R)?(t.consume(R),I):n(R)}function I(R){return R===45||vn(R)?(t.consume(R),I):U(R)}function U(R){return Re(R)?(l=U,G(R)):Ge(R)?(t.consume(R),U):B(R)}function V(R){return R===45||vn(R)?(t.consume(R),V):R===47||R===62||mt(R)?H(R):n(R)}function H(R){return R===47?(t.consume(R),B):R===58||R===95||An(R)?(t.consume(R),P):Re(R)?(l=H,G(R)):Ge(R)?(t.consume(R),H):B(R)}function P(R){return R===45||R===46||R===58||R===95||vn(R)?(t.consume(R),P):Q(R)}function Q(R){return R===61?(t.consume(R),ne):Re(R)?(l=Q,G(R)):Ge(R)?(t.consume(R),Q):H(R)}function ne(R){return R===null||R===60||R===61||R===62||R===96?n(R):R===34||R===39?(t.consume(R),s=R,me):Re(R)?(l=ne,G(R)):Ge(R)?(t.consume(R),ne):(t.consume(R),z)}function me(R){return R===s?(t.consume(R),s=void 0,M):R===null?n(R):Re(R)?(l=me,G(R)):(t.consume(R),me)}function z(R){return R===null||R===34||R===39||R===60||R===61||R===96?n(R):R===47||R===62||mt(R)?H(R):(t.consume(R),z)}function M(R){return R===47||R===62||mt(R)?H(R):n(R)}function B(R){return R===62?(t.consume(R),t.exit("htmlTextData"),t.exit("htmlText"),e):n(R)}function G(R){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(R),t.exit("lineEnding"),re}function re(R){return Ge(R)?Xe(t,J,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(R):J(R)}function J(R){return t.enter("htmlTextData"),l(R)}}const x0={name:"labelEnd",resolveAll:XF,resolveTo:WF,tokenize:eV},QF={tokenize:tV},JF={tokenize:nV},YF={tokenize:rV};function XF(t){let e=-1;const n=[];for(;++e<t.length;){const r=t[e][1];if(n.push(t[e]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const s=r.type==="labelImage"?4:2;r.type="data",e+=s}}return t.length!==n.length&&er(t,0,t.length,n),t}function WF(t,e){let n=t.length,r=0,s,a,l,u;for(;n--;)if(s=t[n][1],a){if(s.type==="link"||s.type==="labelLink"&&s._inactive)break;t[n][0]==="enter"&&s.type==="labelLink"&&(s._inactive=!0)}else if(l){if(t[n][0]==="enter"&&(s.type==="labelImage"||s.type==="labelLink")&&!s._balanced&&(a=n,s.type!=="labelLink")){r=2;break}}else s.type==="labelEnd"&&(l=n);const f={type:t[a][1].type==="labelLink"?"link":"image",start:{...t[a][1].start},end:{...t[t.length-1][1].end}},h={type:"label",start:{...t[a][1].start},end:{...t[l][1].end}},m={type:"labelText",start:{...t[a+r+2][1].end},end:{...t[l-2][1].start}};return u=[["enter",f,e],["enter",h,e]],u=yr(u,t.slice(a+1,a+r+3)),u=yr(u,[["enter",m,e]]),u=yr(u,Eh(e.parser.constructs.insideSpan.null,t.slice(a+r+4,l-3),e)),u=yr(u,[["exit",m,e],t[l-2],t[l-1],["exit",h,e]]),u=yr(u,t.slice(l+1)),u=yr(u,[["exit",f,e]]),er(t,a,t.length,u),t}function eV(t,e,n){const r=this;let s=r.events.length,a,l;for(;s--;)if((r.events[s][1].type==="labelImage"||r.events[s][1].type==="labelLink")&&!r.events[s][1]._balanced){a=r.events[s][1];break}return u;function u(_){return a?a._inactive?p(_):(l=r.parser.defined.includes(Ar(r.sliceSerialize({start:a.end,end:r.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(_),t.exit("labelMarker"),t.exit("labelEnd"),f):n(_)}function f(_){return _===40?t.attempt(QF,m,l?m:p)(_):_===91?t.attempt(JF,m,l?h:p)(_):l?m(_):p(_)}function h(_){return t.attempt(YF,m,p)(_)}function m(_){return e(_)}function p(_){return a._balanced=!0,n(_)}}function tV(t,e,n){return r;function r(p){return t.enter("resource"),t.enter("resourceMarker"),t.consume(p),t.exit("resourceMarker"),s}function s(p){return mt(p)?Rl(t,a)(p):a(p)}function a(p){return p===41?m(p):QT(t,l,u,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(p)}function l(p){return mt(p)?Rl(t,f)(p):m(p)}function u(p){return n(p)}function f(p){return p===34||p===39||p===40?YT(t,h,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(p):m(p)}function h(p){return mt(p)?Rl(t,m)(p):m(p)}function m(p){return p===41?(t.enter("resourceMarker"),t.consume(p),t.exit("resourceMarker"),t.exit("resource"),e):n(p)}}function nV(t,e,n){const r=this;return s;function s(u){return JT.call(r,t,a,l,"reference","referenceMarker","referenceString")(u)}function a(u){return r.parser.defined.includes(Ar(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?e(u):n(u)}function l(u){return n(u)}}function rV(t,e,n){return r;function r(a){return t.enter("reference"),t.enter("referenceMarker"),t.consume(a),t.exit("referenceMarker"),s}function s(a){return a===93?(t.enter("referenceMarker"),t.consume(a),t.exit("referenceMarker"),t.exit("reference"),e):n(a)}}const sV={name:"labelStartImage",resolveAll:x0.resolveAll,tokenize:iV};function iV(t,e,n){const r=this;return s;function s(u){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(u),t.exit("labelImageMarker"),a}function a(u){return u===91?(t.enter("labelMarker"),t.consume(u),t.exit("labelMarker"),t.exit("labelImage"),l):n(u)}function l(u){return u===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(u):e(u)}}const aV={name:"labelStartLink",resolveAll:x0.resolveAll,tokenize:oV};function oV(t,e,n){const r=this;return s;function s(l){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(l),t.exit("labelMarker"),t.exit("labelLink"),a}function a(l){return l===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(l):e(l)}}const Tm={name:"lineEnding",tokenize:lV};function lV(t,e){return n;function n(r){return t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),Xe(t,e,"linePrefix")}}const af={name:"thematicBreak",tokenize:cV};function cV(t,e,n){let r=0,s;return a;function a(h){return t.enter("thematicBreak"),l(h)}function l(h){return s=h,u(h)}function u(h){return h===s?(t.enter("thematicBreakSequence"),f(h)):r>=3&&(h===null||Re(h))?(t.exit("thematicBreak"),e(h)):n(h)}function f(h){return h===s?(t.consume(h),r++,f):(t.exit("thematicBreakSequence"),Ge(h)?Xe(t,u,"whitespace")(h):u(h))}}const Pn={continuation:{tokenize:dV},exit:mV,name:"list",tokenize:hV},uV={partial:!0,tokenize:gV},fV={partial:!0,tokenize:pV};function hV(t,e,n){const r=this,s=r.events[r.events.length-1];let a=s&&s[1].type==="linePrefix"?s[2].sliceSerialize(s[1],!0).length:0,l=0;return u;function u(g){const v=r.containerState.type||(g===42||g===43||g===45?"listUnordered":"listOrdered");if(v==="listUnordered"?!r.containerState.marker||g===r.containerState.marker:Gg(g)){if(r.containerState.type||(r.containerState.type=v,t.enter(v,{_container:!0})),v==="listUnordered")return t.enter("listItemPrefix"),g===42||g===45?t.check(af,n,h)(g):h(g);if(!r.interrupt||g===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),f(g)}return n(g)}function f(g){return Gg(g)&&++l<10?(t.consume(g),f):(!r.interrupt||l<2)&&(r.containerState.marker?g===r.containerState.marker:g===41||g===46)?(t.exit("listItemValue"),h(g)):n(g)}function h(g){return t.enter("listItemMarker"),t.consume(g),t.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||g,t.check(rc,r.interrupt?n:m,t.attempt(uV,_,p))}function m(g){return r.containerState.initialBlankLine=!0,a++,_(g)}function p(g){return Ge(g)?(t.enter("listItemPrefixWhitespace"),t.consume(g),t.exit("listItemPrefixWhitespace"),_):n(g)}function _(g){return r.containerState.size=a+r.sliceSerialize(t.exit("listItemPrefix"),!0).length,e(g)}}function dV(t,e,n){const r=this;return r.containerState._closeFlow=void 0,t.check(rc,s,a);function s(u){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,Xe(t,e,"listItemIndent",r.containerState.size+1)(u)}function a(u){return r.containerState.furtherBlankLines||!Ge(u)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,l(u)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,t.attempt(fV,e,l)(u))}function l(u){return r.containerState._closeFlow=!0,r.interrupt=void 0,Xe(t,t.attempt(Pn,e,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(u)}}function pV(t,e,n){const r=this;return Xe(t,s,"listItemIndent",r.containerState.size+1);function s(a){const l=r.events[r.events.length-1];return l&&l[1].type==="listItemIndent"&&l[2].sliceSerialize(l[1],!0).length===r.containerState.size?e(a):n(a)}}function mV(t){t.exit(this.containerState.type)}function gV(t,e,n){const r=this;return Xe(t,s,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function s(a){const l=r.events[r.events.length-1];return!Ge(a)&&l&&l[1].type==="listItemPrefixWhitespace"?e(a):n(a)}}const kS={name:"setextUnderline",resolveTo:yV,tokenize:_V};function yV(t,e){let n=t.length,r,s,a;for(;n--;)if(t[n][0]==="enter"){if(t[n][1].type==="content"){r=n;break}t[n][1].type==="paragraph"&&(s=n)}else t[n][1].type==="content"&&t.splice(n,1),!a&&t[n][1].type==="definition"&&(a=n);const l={type:"setextHeading",start:{...t[r][1].start},end:{...t[t.length-1][1].end}};return t[s][1].type="setextHeadingText",a?(t.splice(s,0,["enter",l,e]),t.splice(a+1,0,["exit",t[r][1],e]),t[r][1].end={...t[a][1].end}):t[r][1]=l,t.push(["exit",l,e]),t}function _V(t,e,n){const r=this;let s;return a;function a(h){let m=r.events.length,p;for(;m--;)if(r.events[m][1].type!=="lineEnding"&&r.events[m][1].type!=="linePrefix"&&r.events[m][1].type!=="content"){p=r.events[m][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||p)?(t.enter("setextHeadingLine"),s=h,l(h)):n(h)}function l(h){return t.enter("setextHeadingLineSequence"),u(h)}function u(h){return h===s?(t.consume(h),u):(t.exit("setextHeadingLineSequence"),Ge(h)?Xe(t,f,"lineSuffix")(h):f(h))}function f(h){return h===null||Re(h)?(t.exit("setextHeadingLine"),e(h)):n(h)}}const bV={tokenize:vV};function vV(t){const e=this,n=t.attempt(rc,r,t.attempt(this.parser.constructs.flowInitial,s,Xe(t,t.attempt(this.parser.constructs.flow,s,t.attempt(EF,s)),"linePrefix")));return n;function r(a){if(a===null){t.consume(a);return}return t.enter("lineEndingBlank"),t.consume(a),t.exit("lineEndingBlank"),e.currentConstruct=void 0,n}function s(a){if(a===null){t.consume(a);return}return t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),e.currentConstruct=void 0,n}}const xV={resolveAll:WT()},wV=XT("string"),SV=XT("text");function XT(t){return{resolveAll:WT(t==="text"?kV:void 0),tokenize:e};function e(n){const r=this,s=this.parser.constructs[t],a=n.attempt(s,l,u);return l;function l(m){return h(m)?a(m):u(m)}function u(m){if(m===null){n.consume(m);return}return n.enter("data"),n.consume(m),f}function f(m){return h(m)?(n.exit("data"),a(m)):(n.consume(m),f)}function h(m){if(m===null)return!0;const p=s[m];let _=-1;if(p)for(;++_<p.length;){const g=p[_];if(!g.previous||g.previous.call(r,r.previous))return!0}return!1}}}function WT(t){return e;function e(n,r){let s=-1,a;for(;++s<=n.length;)a===void 0?n[s]&&n[s][1].type==="data"&&(a=s,s++):(!n[s]||n[s][1].type!=="data")&&(s!==a+2&&(n[a][1].end=n[s-1][1].end,n.splice(a+2,s-a-2),s=a+2),a=void 0);return t?t(n,r):n}}function kV(t,e){let n=0;for(;++n<=t.length;)if((n===t.length||t[n][1].type==="lineEnding")&&t[n-1][1].type==="data"){const r=t[n-1][1],s=e.sliceStream(r);let a=s.length,l=-1,u=0,f;for(;a--;){const h=s[a];if(typeof h=="string"){for(l=h.length;h.charCodeAt(l-1)===32;)u++,l--;if(l)break;l=-1}else if(h===-2)f=!0,u++;else if(h!==-1){a++;break}}if(e._contentTypeTextTrailing&&n===t.length&&(u=0),u){const h={type:n===t.length||f||u<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:a?l:r.start._bufferIndex+l,_index:r.start._index+a,line:r.end.line,column:r.end.column-u,offset:r.end.offset-u},end:{...r.end}};r.end={...h.start},r.start.offset===r.end.offset?Object.assign(r,h):(t.splice(n,0,["enter",h,e],["exit",h,e]),n+=2)}n++}return t}const EV={42:Pn,43:Pn,45:Pn,48:Pn,49:Pn,50:Pn,51:Pn,52:Pn,53:Pn,54:Pn,55:Pn,56:Pn,57:Pn,62:HT},CV={91:OF},TV={[-2]:Cm,[-1]:Cm,32:Cm},AV={35:zF,42:af,45:[kS,af],60:UF,61:kS,95:af,96:wS,126:wS},RV={38:KT,92:GT},OV={[-5]:Tm,[-4]:Tm,[-3]:Tm,33:sV,38:KT,42:Kg,60:[aF,KF],91:aV,92:[DF,GT],93:x0,95:Kg,96:bF},IV={null:[Kg,xV]},NV={null:[42,95]},MV={null:[]},DV=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:NV,contentInitial:CV,disable:MV,document:EV,flow:AV,flowInitial:TV,insideSpan:IV,string:RV,text:OV},Symbol.toStringTag,{value:"Module"}));function LV(t,e,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const s={},a=[];let l=[],u=[];const f={attempt:U(D),check:U(I),consume:T,enter:C,exit:j,interrupt:U(I,{interrupt:!0})},h={code:null,containerState:{},defineSkip:x,events:[],now:v,parser:t,previous:null,sliceSerialize:_,sliceStream:g,write:p};let m=e.tokenize.call(h,f);return e.resolveAll&&a.push(e),h;function p(Q){return l=yr(l,Q),E(),l[l.length-1]!==null?[]:(V(e,0),h.events=Eh(a,h.events,h),h.events)}function _(Q,ne){return jV(g(Q),ne)}function g(Q){return zV(l,Q)}function v(){const{_bufferIndex:Q,_index:ne,line:me,column:z,offset:M}=r;return{_bufferIndex:Q,_index:ne,line:me,column:z,offset:M}}function x(Q){s[Q.line]=Q.column,P()}function E(){let Q;for(;r._index<l.length;){const ne=l[r._index];if(typeof ne=="string")for(Q=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===Q&&r._bufferIndex<ne.length;)k(ne.charCodeAt(r._bufferIndex));else k(ne)}}function k(Q){m=m(Q)}function T(Q){Re(Q)?(r.line++,r.column=1,r.offset+=Q===-3?2:1,P()):Q!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===l[r._index].length&&(r._bufferIndex=-1,r._index++)),h.previous=Q}function C(Q,ne){const me=ne||{};return me.type=Q,me.start=v(),h.events.push(["enter",me,h]),u.push(me),me}function j(Q){const ne=u.pop();return ne.end=v(),h.events.push(["exit",ne,h]),ne}function D(Q,ne){V(Q,ne.from)}function I(Q,ne){ne.restore()}function U(Q,ne){return me;function me(z,M,B){let G,re,J,R;return Array.isArray(z)?F(z):"tokenize"in z?F([z]):N(z);function N(de){return we;function we(Me){const Ae=Me!==null&&de[Me],rt=Me!==null&&de.null,ht=[...Array.isArray(Ae)?Ae:Ae?[Ae]:[],...Array.isArray(rt)?rt:rt?[rt]:[]];return F(ht)(Me)}}function F(de){return G=de,re=0,de.length===0?B:O(de[re])}function O(de){return we;function we(Me){return R=H(),J=de,de.partial||(h.currentConstruct=de),de.name&&h.parser.constructs.disable.null.includes(de.name)?pe():de.tokenize.call(ne?Object.assign(Object.create(h),ne):h,f,ie,pe)(Me)}}function ie(de){return Q(J,R),M}function pe(de){return R.restore(),++re<G.length?O(G[re]):B}}}function V(Q,ne){Q.resolveAll&&!a.includes(Q)&&a.push(Q),Q.resolve&&er(h.events,ne,h.events.length-ne,Q.resolve(h.events.slice(ne),h)),Q.resolveTo&&(h.events=Q.resolveTo(h.events,h))}function H(){const Q=v(),ne=h.previous,me=h.currentConstruct,z=h.events.length,M=Array.from(u);return{from:z,restore:B};function B(){r=Q,h.previous=ne,h.currentConstruct=me,h.events.length=z,u=M,P()}}function P(){r.line in s&&r.column<2&&(r.column=s[r.line],r.offset+=s[r.line]-1)}}function zV(t,e){const n=e.start._index,r=e.start._bufferIndex,s=e.end._index,a=e.end._bufferIndex;let l;if(n===s)l=[t[n].slice(r,a)];else{if(l=t.slice(n,s),r>-1){const u=l[0];typeof u=="string"?l[0]=u.slice(r):l.shift()}a>0&&l.push(t[s].slice(0,a))}return l}function jV(t,e){let n=-1;const r=[];let s;for(;++n<t.length;){const a=t[n];let l;if(typeof a=="string")l=a;else switch(a){case-5:{l="\r";break}case-4:{l=`
`;break}case-3:{l=`\r
`;break}case-2:{l=e?" ":"	";break}case-1:{if(!e&&s)continue;l=" ";break}default:l=String.fromCharCode(a)}s=a===-2,r.push(l)}return r.join("")}function PV(t){const r={constructs:FT([DV,...(t||{}).extensions||[]]),content:s(Wq),defined:[],document:s(tF),flow:s(bV),lazy:{},string:s(wV),text:s(SV)};return r;function s(a){return l;function l(u){return LV(r,a,u)}}}function BV(t){for(;!ZT(t););return t}const ES=/[\0\t\n\r]/g;function UV(){let t=1,e="",n=!0,r;return s;function s(a,l,u){const f=[];let h,m,p,_,g;for(a=e+(typeof a=="string"?a.toString():new TextDecoder(l||void 0).decode(a)),p=0,e="",n&&(a.charCodeAt(0)===65279&&p++,n=void 0);p<a.length;){if(ES.lastIndex=p,h=ES.exec(a),_=h&&h.index!==void 0?h.index:a.length,g=a.charCodeAt(_),!h){e=a.slice(p);break}if(g===10&&p===_&&r)f.push(-3),r=void 0;else switch(r&&(f.push(-5),r=void 0),p<_&&(f.push(a.slice(p,_)),t+=_-p),g){case 0:{f.push(65533),t++;break}case 9:{for(m=Math.ceil(t/4)*4,f.push(-2);t++<m;)f.push(-1);break}case 10:{f.push(-4),t=1;break}default:r=!0,t=1}p=_+1}return u&&(r&&f.push(-5),e&&f.push(e),f.push(null)),f}}const $V=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function qV(t){return t.replace($V,FV)}function FV(t,e,n){if(e)return e;if(n.charCodeAt(0)===35){const s=n.charCodeAt(1),a=s===120||s===88;return VT(n.slice(a?2:1),a?16:10)}return v0(n)||t}const eA={}.hasOwnProperty;function VV(t,e,n){return typeof e!="string"&&(n=e,e=void 0),HV(n)(BV(PV(n).document().write(UV()(t,e,!0))))}function HV(t){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:a(We),autolinkProtocol:H,autolinkEmail:H,atxHeading:a(At),blockQuote:a(rt),characterEscape:H,characterReference:H,codeFenced:a(ht),codeFencedFenceInfo:l,codeFencedFenceMeta:l,codeIndented:a(ht,l),codeText:a(St,l),codeTextData:H,data:H,codeFlowValue:H,definition:a(tn),definitionDestinationString:l,definitionLabelString:l,definitionTitleString:l,emphasis:a(Pt),hardBreakEscape:a(On),hardBreakTrailing:a(On),htmlFlow:a(De,l),htmlFlowData:H,htmlText:a(De,l),htmlTextData:H,image:a(it),label:l,link:a(We),listItem:a(_e),listItemValue:_,listOrdered:a(wn,p),listUnordered:a(wn),paragraph:a(Le),reference:O,referenceString:l,resourceDestinationString:l,resourceTitleString:l,setextHeading:a(At),strong:a(qe),thematicBreak:a(et)},exit:{atxHeading:f(),atxHeadingSequence:D,autolink:f(),autolinkEmail:Ae,autolinkProtocol:Me,blockQuote:f(),characterEscapeValue:P,characterReferenceMarkerHexadecimal:pe,characterReferenceMarkerNumeric:pe,characterReferenceValue:de,characterReference:we,codeFenced:f(E),codeFencedFence:x,codeFencedFenceInfo:g,codeFencedFenceMeta:v,codeFlowValue:P,codeIndented:f(k),codeText:f(M),codeTextData:P,data:P,definition:f(),definitionDestinationString:j,definitionLabelString:T,definitionTitleString:C,emphasis:f(),hardBreakEscape:f(ne),hardBreakTrailing:f(ne),htmlFlow:f(me),htmlFlowData:P,htmlText:f(z),htmlTextData:P,image:f(G),label:J,labelText:re,lineEnding:Q,link:f(B),listItem:f(),listOrdered:f(),listUnordered:f(),paragraph:f(),referenceString:ie,resourceDestinationString:R,resourceTitleString:N,resource:F,setextHeading:f(V),setextHeadingLineSequence:U,setextHeadingText:I,strong:f(),thematicBreak:f()}};tA(e,(t||{}).mdastExtensions||[]);const n={};return r;function r(te){let oe={type:"root",children:[]};const ge={stack:[oe],tokenStack:[],config:e,enter:u,exit:h,buffer:l,resume:m,data:n},ye=[];let Ee=-1;for(;++Ee<te.length;)if(te[Ee][1].type==="listOrdered"||te[Ee][1].type==="listUnordered")if(te[Ee][0]==="enter")ye.push(Ee);else{const bt=ye.pop();Ee=s(te,bt,Ee)}for(Ee=-1;++Ee<te.length;){const bt=e[te[Ee][0]];eA.call(bt,te[Ee][1].type)&&bt[te[Ee][1].type].call(Object.assign({sliceSerialize:te[Ee][2].sliceSerialize},ge),te[Ee][1])}if(ge.tokenStack.length>0){const bt=ge.tokenStack[ge.tokenStack.length-1];(bt[1]||CS).call(ge,void 0,bt[0])}for(oe.position={start:Hs(te.length>0?te[0][1].start:{line:1,column:1,offset:0}),end:Hs(te.length>0?te[te.length-2][1].end:{line:1,column:1,offset:0})},Ee=-1;++Ee<e.transforms.length;)oe=e.transforms[Ee](oe)||oe;return oe}function s(te,oe,ge){let ye=oe-1,Ee=-1,bt=!1,Rt,Bt,Fe,dn;for(;++ye<=ge;){const dt=te[ye];switch(dt[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{dt[0]==="enter"?Ee++:Ee--,dn=void 0;break}case"lineEndingBlank":{dt[0]==="enter"&&(Rt&&!dn&&!Ee&&!Fe&&(Fe=ye),dn=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:dn=void 0}if(!Ee&&dt[0]==="enter"&&dt[1].type==="listItemPrefix"||Ee===-1&&dt[0]==="exit"&&(dt[1].type==="listUnordered"||dt[1].type==="listOrdered")){if(Rt){let ys=ye;for(Bt=void 0;ys--;){const wr=te[ys];if(wr[1].type==="lineEnding"||wr[1].type==="lineEndingBlank"){if(wr[0]==="exit")continue;Bt&&(te[Bt][1].type="lineEndingBlank",bt=!0),wr[1].type="lineEnding",Bt=ys}else if(!(wr[1].type==="linePrefix"||wr[1].type==="blockQuotePrefix"||wr[1].type==="blockQuotePrefixWhitespace"||wr[1].type==="blockQuoteMarker"||wr[1].type==="listItemIndent"))break}Fe&&(!Bt||Fe<Bt)&&(Rt._spread=!0),Rt.end=Object.assign({},Bt?te[Bt][1].start:dt[1].end),te.splice(Bt||ye,0,["exit",Rt,dt[2]]),ye++,ge++}if(dt[1].type==="listItemPrefix"){const ys={type:"listItem",_spread:!1,start:Object.assign({},dt[1].start),end:void 0};Rt=ys,te.splice(ye,0,["enter",ys,dt[2]]),ye++,ge++,Fe=void 0,dn=!0}}}return te[oe][1]._spread=bt,ge}function a(te,oe){return ge;function ge(ye){u.call(this,te(ye),ye),oe&&oe.call(this,ye)}}function l(){this.stack.push({type:"fragment",children:[]})}function u(te,oe,ge){this.stack[this.stack.length-1].children.push(te),this.stack.push(te),this.tokenStack.push([oe,ge||void 0]),te.position={start:Hs(oe.start),end:void 0}}function f(te){return oe;function oe(ge){te&&te.call(this,ge),h.call(this,ge)}}function h(te,oe){const ge=this.stack.pop(),ye=this.tokenStack.pop();if(ye)ye[0].type!==te.type&&(oe?oe.call(this,te,ye[0]):(ye[1]||CS).call(this,te,ye[0]));else throw new Error("Cannot close `"+te.type+"` ("+Al({start:te.start,end:te.end})+"): its not open");ge.position.end=Hs(te.end)}function m(){return b0(this.stack.pop())}function p(){this.data.expectingFirstListItemValue=!0}function _(te){if(this.data.expectingFirstListItemValue){const oe=this.stack[this.stack.length-2];oe.start=Number.parseInt(this.sliceSerialize(te),10),this.data.expectingFirstListItemValue=void 0}}function g(){const te=this.resume(),oe=this.stack[this.stack.length-1];oe.lang=te}function v(){const te=this.resume(),oe=this.stack[this.stack.length-1];oe.meta=te}function x(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function E(){const te=this.resume(),oe=this.stack[this.stack.length-1];oe.value=te.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function k(){const te=this.resume(),oe=this.stack[this.stack.length-1];oe.value=te.replace(/(\r?\n|\r)$/g,"")}function T(te){const oe=this.resume(),ge=this.stack[this.stack.length-1];ge.label=oe,ge.identifier=Ar(this.sliceSerialize(te)).toLowerCase()}function C(){const te=this.resume(),oe=this.stack[this.stack.length-1];oe.title=te}function j(){const te=this.resume(),oe=this.stack[this.stack.length-1];oe.url=te}function D(te){const oe=this.stack[this.stack.length-1];if(!oe.depth){const ge=this.sliceSerialize(te).length;oe.depth=ge}}function I(){this.data.setextHeadingSlurpLineEnding=!0}function U(te){const oe=this.stack[this.stack.length-1];oe.depth=this.sliceSerialize(te).codePointAt(0)===61?1:2}function V(){this.data.setextHeadingSlurpLineEnding=void 0}function H(te){const ge=this.stack[this.stack.length-1].children;let ye=ge[ge.length-1];(!ye||ye.type!=="text")&&(ye=be(),ye.position={start:Hs(te.start),end:void 0},ge.push(ye)),this.stack.push(ye)}function P(te){const oe=this.stack.pop();oe.value+=this.sliceSerialize(te),oe.position.end=Hs(te.end)}function Q(te){const oe=this.stack[this.stack.length-1];if(this.data.atHardBreak){const ge=oe.children[oe.children.length-1];ge.position.end=Hs(te.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(oe.type)&&(H.call(this,te),P.call(this,te))}function ne(){this.data.atHardBreak=!0}function me(){const te=this.resume(),oe=this.stack[this.stack.length-1];oe.value=te}function z(){const te=this.resume(),oe=this.stack[this.stack.length-1];oe.value=te}function M(){const te=this.resume(),oe=this.stack[this.stack.length-1];oe.value=te}function B(){const te=this.stack[this.stack.length-1];if(this.data.inReference){const oe=this.data.referenceType||"shortcut";te.type+="Reference",te.referenceType=oe,delete te.url,delete te.title}else delete te.identifier,delete te.label;this.data.referenceType=void 0}function G(){const te=this.stack[this.stack.length-1];if(this.data.inReference){const oe=this.data.referenceType||"shortcut";te.type+="Reference",te.referenceType=oe,delete te.url,delete te.title}else delete te.identifier,delete te.label;this.data.referenceType=void 0}function re(te){const oe=this.sliceSerialize(te),ge=this.stack[this.stack.length-2];ge.label=qV(oe),ge.identifier=Ar(oe).toLowerCase()}function J(){const te=this.stack[this.stack.length-1],oe=this.resume(),ge=this.stack[this.stack.length-1];if(this.data.inReference=!0,ge.type==="link"){const ye=te.children;ge.children=ye}else ge.alt=oe}function R(){const te=this.resume(),oe=this.stack[this.stack.length-1];oe.url=te}function N(){const te=this.resume(),oe=this.stack[this.stack.length-1];oe.title=te}function F(){this.data.inReference=void 0}function O(){this.data.referenceType="collapsed"}function ie(te){const oe=this.resume(),ge=this.stack[this.stack.length-1];ge.label=oe,ge.identifier=Ar(this.sliceSerialize(te)).toLowerCase(),this.data.referenceType="full"}function pe(te){this.data.characterReferenceType=te.type}function de(te){const oe=this.sliceSerialize(te),ge=this.data.characterReferenceType;let ye;ge?(ye=VT(oe,ge==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):ye=v0(oe);const Ee=this.stack[this.stack.length-1];Ee.value+=ye}function we(te){const oe=this.stack.pop();oe.position.end=Hs(te.end)}function Me(te){P.call(this,te);const oe=this.stack[this.stack.length-1];oe.url=this.sliceSerialize(te)}function Ae(te){P.call(this,te);const oe=this.stack[this.stack.length-1];oe.url="mailto:"+this.sliceSerialize(te)}function rt(){return{type:"blockquote",children:[]}}function ht(){return{type:"code",lang:null,meta:null,value:""}}function St(){return{type:"inlineCode",value:""}}function tn(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Pt(){return{type:"emphasis",children:[]}}function At(){return{type:"heading",depth:0,children:[]}}function On(){return{type:"break"}}function De(){return{type:"html",value:""}}function it(){return{type:"image",title:null,url:"",alt:null}}function We(){return{type:"link",title:null,url:"",children:[]}}function wn(te){return{type:"list",ordered:te.type==="listOrdered",start:null,spread:te._spread,children:[]}}function _e(te){return{type:"listItem",spread:te._spread,checked:null,children:[]}}function Le(){return{type:"paragraph",children:[]}}function qe(){return{type:"strong",children:[]}}function be(){return{type:"text",value:""}}function et(){return{type:"thematicBreak"}}}function Hs(t){return{line:t.line,column:t.column,offset:t.offset}}function tA(t,e){let n=-1;for(;++n<e.length;){const r=e[n];Array.isArray(r)?tA(t,r):GV(t,r)}}function GV(t,e){let n;for(n in e)if(eA.call(e,n))switch(n){case"canContainEols":{const r=e[n];r&&t[n].push(...r);break}case"transforms":{const r=e[n];r&&t[n].push(...r);break}case"enter":case"exit":{const r=e[n];r&&Object.assign(t[n],r);break}}}function CS(t,e){throw t?new Error("Cannot close `"+t.type+"` ("+Al({start:t.start,end:t.end})+"): a different token (`"+e.type+"`, "+Al({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+Al({start:e.start,end:e.end})+") is still open")}function KV(t){const e=this;e.parser=n;function n(r){return VV(r,{...e.data("settings"),...t,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function ZV(t,e){const n={type:"element",tagName:"blockquote",properties:{},children:t.wrap(t.all(e),!0)};return t.patch(e,n),t.applyData(e,n)}function QV(t,e){const n={type:"element",tagName:"br",properties:{},children:[]};return t.patch(e,n),[t.applyData(e,n),{type:"text",value:`
`}]}function JV(t,e){const n=e.value?e.value+`
`:"",r={},s=e.lang?e.lang.split(/\s+/):[];s.length>0&&(r.className=["language-"+s[0]]);let a={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return e.meta&&(a.data={meta:e.meta}),t.patch(e,a),a=t.applyData(e,a),a={type:"element",tagName:"pre",properties:{},children:[a]},t.patch(e,a),a}function YV(t,e){const n={type:"element",tagName:"del",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function XV(t,e){const n={type:"element",tagName:"em",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function WV(t,e){const n=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",r=String(e.identifier).toUpperCase(),s=no(r.toLowerCase()),a=t.footnoteOrder.indexOf(r);let l,u=t.footnoteCounts.get(r);u===void 0?(u=0,t.footnoteOrder.push(r),l=t.footnoteOrder.length):l=a+1,u+=1,t.footnoteCounts.set(r,u);const f={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+s,id:n+"fnref-"+s+(u>1?"-"+u:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(l)}]};t.patch(e,f);const h={type:"element",tagName:"sup",properties:{},children:[f]};return t.patch(e,h),t.applyData(e,h)}function e7(t,e){const n={type:"element",tagName:"h"+e.depth,properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function t7(t,e){if(t.options.allowDangerousHtml){const n={type:"raw",value:e.value};return t.patch(e,n),t.applyData(e,n)}}function nA(t,e){const n=e.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+r}];const s=t.all(e),a=s[0];a&&a.type==="text"?a.value="["+a.value:s.unshift({type:"text",value:"["});const l=s[s.length-1];return l&&l.type==="text"?l.value+=r:s.push({type:"text",value:r}),s}function n7(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return nA(t,e);const s={src:no(r.url||""),alt:e.alt};r.title!==null&&r.title!==void 0&&(s.title=r.title);const a={type:"element",tagName:"img",properties:s,children:[]};return t.patch(e,a),t.applyData(e,a)}function r7(t,e){const n={src:no(e.url)};e.alt!==null&&e.alt!==void 0&&(n.alt=e.alt),e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"img",properties:n,children:[]};return t.patch(e,r),t.applyData(e,r)}function s7(t,e){const n={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};t.patch(e,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return t.patch(e,r),t.applyData(e,r)}function i7(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return nA(t,e);const s={href:no(r.url||"")};r.title!==null&&r.title!==void 0&&(s.title=r.title);const a={type:"element",tagName:"a",properties:s,children:t.all(e)};return t.patch(e,a),t.applyData(e,a)}function a7(t,e){const n={href:no(e.url)};e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"a",properties:n,children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function o7(t,e,n){const r=t.all(e),s=n?l7(n):rA(e),a={},l=[];if(typeof e.checked=="boolean"){const m=r[0];let p;m&&m.type==="element"&&m.tagName==="p"?p=m:(p={type:"element",tagName:"p",properties:{},children:[]},r.unshift(p)),p.children.length>0&&p.children.unshift({type:"text",value:" "}),p.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),a.className=["task-list-item"]}let u=-1;for(;++u<r.length;){const m=r[u];(s||u!==0||m.type!=="element"||m.tagName!=="p")&&l.push({type:"text",value:`
`}),m.type==="element"&&m.tagName==="p"&&!s?l.push(...m.children):l.push(m)}const f=r[r.length-1];f&&(s||f.type!=="element"||f.tagName!=="p")&&l.push({type:"text",value:`
`});const h={type:"element",tagName:"li",properties:a,children:l};return t.patch(e,h),t.applyData(e,h)}function l7(t){let e=!1;if(t.type==="list"){e=t.spread||!1;const n=t.children;let r=-1;for(;!e&&++r<n.length;)e=rA(n[r])}return e}function rA(t){const e=t.spread;return e??t.children.length>1}function c7(t,e){const n={},r=t.all(e);let s=-1;for(typeof e.start=="number"&&e.start!==1&&(n.start=e.start);++s<r.length;){const l=r[s];if(l.type==="element"&&l.tagName==="li"&&l.properties&&Array.isArray(l.properties.className)&&l.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const a={type:"element",tagName:e.ordered?"ol":"ul",properties:n,children:t.wrap(r,!0)};return t.patch(e,a),t.applyData(e,a)}function u7(t,e){const n={type:"element",tagName:"p",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function f7(t,e){const n={type:"root",children:t.wrap(t.all(e))};return t.patch(e,n),t.applyData(e,n)}function h7(t,e){const n={type:"element",tagName:"strong",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function d7(t,e){const n=t.all(e),r=n.shift(),s=[];if(r){const l={type:"element",tagName:"thead",properties:{},children:t.wrap([r],!0)};t.patch(e.children[0],l),s.push(l)}if(n.length>0){const l={type:"element",tagName:"tbody",properties:{},children:t.wrap(n,!0)},u=m0(e.children[1]),f=zT(e.children[e.children.length-1]);u&&f&&(l.position={start:u,end:f}),s.push(l)}const a={type:"element",tagName:"table",properties:{},children:t.wrap(s,!0)};return t.patch(e,a),t.applyData(e,a)}function p7(t,e,n){const r=n?n.children:void 0,a=(r?r.indexOf(e):1)===0?"th":"td",l=n&&n.type==="table"?n.align:void 0,u=l?l.length:e.children.length;let f=-1;const h=[];for(;++f<u;){const p=e.children[f],_={},g=l?l[f]:void 0;g&&(_.align=g);let v={type:"element",tagName:a,properties:_,children:[]};p&&(v.children=t.all(p),t.patch(p,v),v=t.applyData(p,v)),h.push(v)}const m={type:"element",tagName:"tr",properties:{},children:t.wrap(h,!0)};return t.patch(e,m),t.applyData(e,m)}function m7(t,e){const n={type:"element",tagName:"td",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}const TS=9,AS=32;function g7(t){const e=String(t),n=/\r?\n|\r/g;let r=n.exec(e),s=0;const a=[];for(;r;)a.push(RS(e.slice(s,r.index),s>0,!0),r[0]),s=r.index+r[0].length,r=n.exec(e);return a.push(RS(e.slice(s),s>0,!1)),a.join("")}function RS(t,e,n){let r=0,s=t.length;if(e){let a=t.codePointAt(r);for(;a===TS||a===AS;)r++,a=t.codePointAt(r)}if(n){let a=t.codePointAt(s-1);for(;a===TS||a===AS;)s--,a=t.codePointAt(s-1)}return s>r?t.slice(r,s):""}function y7(t,e){const n={type:"text",value:g7(String(e.value))};return t.patch(e,n),t.applyData(e,n)}function _7(t,e){const n={type:"element",tagName:"hr",properties:{},children:[]};return t.patch(e,n),t.applyData(e,n)}const b7={blockquote:ZV,break:QV,code:JV,delete:YV,emphasis:XV,footnoteReference:WV,heading:e7,html:t7,imageReference:n7,image:r7,inlineCode:s7,linkReference:i7,link:a7,listItem:o7,list:c7,paragraph:u7,root:f7,strong:h7,table:d7,tableCell:m7,tableRow:p7,text:y7,thematicBreak:_7,toml:Bu,yaml:Bu,definition:Bu,footnoteDefinition:Bu};function Bu(){}const sA=-1,Ch=0,Ol=1,Zf=2,w0=3,S0=4,k0=5,E0=6,iA=7,aA=8,OS=typeof self=="object"?self:globalThis,v7=(t,e)=>{const n=(s,a)=>(t.set(a,s),s),r=s=>{if(t.has(s))return t.get(s);const[a,l]=e[s];switch(a){case Ch:case sA:return n(l,s);case Ol:{const u=n([],s);for(const f of l)u.push(r(f));return u}case Zf:{const u=n({},s);for(const[f,h]of l)u[r(f)]=r(h);return u}case w0:return n(new Date(l),s);case S0:{const{source:u,flags:f}=l;return n(new RegExp(u,f),s)}case k0:{const u=n(new Map,s);for(const[f,h]of l)u.set(r(f),r(h));return u}case E0:{const u=n(new Set,s);for(const f of l)u.add(r(f));return u}case iA:{const{name:u,message:f}=l;return n(new OS[u](f),s)}case aA:return n(BigInt(l),s);case"BigInt":return n(Object(BigInt(l)),s);case"ArrayBuffer":return n(new Uint8Array(l).buffer,l);case"DataView":{const{buffer:u}=new Uint8Array(l);return n(new DataView(u),l)}}return n(new OS[a](l),s)};return r},IS=t=>v7(new Map,t)(0),Aa="",{toString:x7}={},{keys:w7}=Object,rl=t=>{const e=typeof t;if(e!=="object"||!t)return[Ch,e];const n=x7.call(t).slice(8,-1);switch(n){case"Array":return[Ol,Aa];case"Object":return[Zf,Aa];case"Date":return[w0,Aa];case"RegExp":return[S0,Aa];case"Map":return[k0,Aa];case"Set":return[E0,Aa];case"DataView":return[Ol,n]}return n.includes("Array")?[Ol,n]:n.includes("Error")?[iA,n]:[Zf,n]},Uu=([t,e])=>t===Ch&&(e==="function"||e==="symbol"),S7=(t,e,n,r)=>{const s=(l,u)=>{const f=r.push(l)-1;return n.set(u,f),f},a=l=>{if(n.has(l))return n.get(l);let[u,f]=rl(l);switch(u){case Ch:{let m=l;switch(f){case"bigint":u=aA,m=l.toString();break;case"function":case"symbol":if(t)throw new TypeError("unable to serialize "+f);m=null;break;case"undefined":return s([sA],l)}return s([u,m],l)}case Ol:{if(f){let _=l;return f==="DataView"?_=new Uint8Array(l.buffer):f==="ArrayBuffer"&&(_=new Uint8Array(l)),s([f,[..._]],l)}const m=[],p=s([u,m],l);for(const _ of l)m.push(a(_));return p}case Zf:{if(f)switch(f){case"BigInt":return s([f,l.toString()],l);case"Boolean":case"Number":case"String":return s([f,l.valueOf()],l)}if(e&&"toJSON"in l)return a(l.toJSON());const m=[],p=s([u,m],l);for(const _ of w7(l))(t||!Uu(rl(l[_])))&&m.push([a(_),a(l[_])]);return p}case w0:return s([u,l.toISOString()],l);case S0:{const{source:m,flags:p}=l;return s([u,{source:m,flags:p}],l)}case k0:{const m=[],p=s([u,m],l);for(const[_,g]of l)(t||!(Uu(rl(_))||Uu(rl(g))))&&m.push([a(_),a(g)]);return p}case E0:{const m=[],p=s([u,m],l);for(const _ of l)(t||!Uu(rl(_)))&&m.push(a(_));return p}}const{message:h}=l;return s([u,{name:f,message:h}],l)};return a},NS=(t,{json:e,lossy:n}={})=>{const r=[];return S7(!(e||n),!!e,new Map,r)(t),r},Qf=typeof structuredClone=="function"?(t,e)=>e&&("json"in e||"lossy"in e)?IS(NS(t,e)):structuredClone(t):(t,e)=>IS(NS(t,e));function k7(t,e){const n=[{type:"text",value:""}];return e>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),n}function E7(t,e){return"Back to reference "+(t+1)+(e>1?"-"+e:"")}function C7(t){const e=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",n=t.options.footnoteBackContent||k7,r=t.options.footnoteBackLabel||E7,s=t.options.footnoteLabel||"Footnotes",a=t.options.footnoteLabelTagName||"h2",l=t.options.footnoteLabelProperties||{className:["sr-only"]},u=[];let f=-1;for(;++f<t.footnoteOrder.length;){const h=t.footnoteById.get(t.footnoteOrder[f]);if(!h)continue;const m=t.all(h),p=String(h.identifier).toUpperCase(),_=no(p.toLowerCase());let g=0;const v=[],x=t.footnoteCounts.get(p);for(;x!==void 0&&++g<=x;){v.length>0&&v.push({type:"text",value:" "});let T=typeof n=="string"?n:n(f,g);typeof T=="string"&&(T={type:"text",value:T}),v.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+_+(g>1?"-"+g:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(f,g),className:["data-footnote-backref"]},children:Array.isArray(T)?T:[T]})}const E=m[m.length-1];if(E&&E.type==="element"&&E.tagName==="p"){const T=E.children[E.children.length-1];T&&T.type==="text"?T.value+=" ":E.children.push({type:"text",value:" "}),E.children.push(...v)}else m.push(...v);const k={type:"element",tagName:"li",properties:{id:e+"fn-"+_},children:t.wrap(m,!0)};t.patch(h,k),u.push(k)}if(u.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:a,properties:{...Qf(l),id:"footnote-label"},children:[{type:"text",value:s}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:t.wrap(u,!0)},{type:"text",value:`
`}]}}const Th=(function(t){if(t==null)return O7;if(typeof t=="function")return Ah(t);if(typeof t=="object")return Array.isArray(t)?T7(t):A7(t);if(typeof t=="string")return R7(t);throw new Error("Expected function, string, or object as test")});function T7(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=Th(t[n]);return Ah(r);function r(...s){let a=-1;for(;++a<e.length;)if(e[a].apply(this,s))return!0;return!1}}function A7(t){const e=t;return Ah(n);function n(r){const s=r;let a;for(a in t)if(s[a]!==e[a])return!1;return!0}}function R7(t){return Ah(e);function e(n){return n&&n.type===t}}function Ah(t){return e;function e(n,r,s){return!!(I7(n)&&t.call(this,n,typeof r=="number"?r:void 0,s||void 0))}}function O7(){return!0}function I7(t){return t!==null&&typeof t=="object"&&"type"in t}const oA=[],N7=!0,Zg=!1,M7="skip";function lA(t,e,n,r){let s;typeof e=="function"&&typeof n!="function"?(r=n,n=e):s=e;const a=Th(s),l=r?-1:1;u(t,void 0,[])();function u(f,h,m){const p=f&&typeof f=="object"?f:{};if(typeof p.type=="string"){const g=typeof p.tagName=="string"?p.tagName:typeof p.name=="string"?p.name:void 0;Object.defineProperty(_,"name",{value:"node ("+(f.type+(g?"<"+g+">":""))+")"})}return _;function _(){let g=oA,v,x,E;if((!e||a(f,h,m[m.length-1]||void 0))&&(g=D7(n(f,m)),g[0]===Zg))return g;if("children"in f&&f.children){const k=f;if(k.children&&g[0]!==M7)for(x=(r?k.children.length:-1)+l,E=m.concat(k);x>-1&&x<k.children.length;){const T=k.children[x];if(v=u(T,x,E)(),v[0]===Zg)return v;x=typeof v[1]=="number"?v[1]:x+l}}return g}}}function D7(t){return Array.isArray(t)?t:typeof t=="number"?[N7,t]:t==null?oA:[t]}function C0(t,e,n,r){let s,a,l;typeof e=="function"&&typeof n!="function"?(a=void 0,l=e,s=n):(a=e,l=n,s=r),lA(t,a,u,s);function u(f,h){const m=h[h.length-1],p=m?m.children.indexOf(f):void 0;return l(f,p,m)}}const Qg={}.hasOwnProperty,L7={};function z7(t,e){const n=e||L7,r=new Map,s=new Map,a=new Map,l={...b7,...n.handlers},u={all:h,applyData:P7,definitionById:r,footnoteById:s,footnoteCounts:a,footnoteOrder:[],handlers:l,one:f,options:n,patch:j7,wrap:U7};return C0(t,function(m){if(m.type==="definition"||m.type==="footnoteDefinition"){const p=m.type==="definition"?r:s,_=String(m.identifier).toUpperCase();p.has(_)||p.set(_,m)}}),u;function f(m,p){const _=m.type,g=u.handlers[_];if(Qg.call(u.handlers,_)&&g)return g(u,m,p);if(u.options.passThrough&&u.options.passThrough.includes(_)){if("children"in m){const{children:x,...E}=m,k=Qf(E);return k.children=u.all(m),k}return Qf(m)}return(u.options.unknownHandler||B7)(u,m,p)}function h(m){const p=[];if("children"in m){const _=m.children;let g=-1;for(;++g<_.length;){const v=u.one(_[g],m);if(v){if(g&&_[g-1].type==="break"&&(!Array.isArray(v)&&v.type==="text"&&(v.value=MS(v.value)),!Array.isArray(v)&&v.type==="element")){const x=v.children[0];x&&x.type==="text"&&(x.value=MS(x.value))}Array.isArray(v)?p.push(...v):p.push(v)}}}return p}}function j7(t,e){t.position&&(e.position=Eq(t))}function P7(t,e){let n=e;if(t&&t.data){const r=t.data.hName,s=t.data.hChildren,a=t.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const l="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:l}}n.type==="element"&&a&&Object.assign(n.properties,Qf(a)),"children"in n&&n.children&&s!==null&&s!==void 0&&(n.children=s)}return n}function B7(t,e){const n=e.data||{},r="value"in e&&!(Qg.call(n,"hProperties")||Qg.call(n,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function U7(t,e){const n=[];let r=-1;for(e&&n.push({type:"text",value:`
`});++r<t.length;)r&&n.push({type:"text",value:`
`}),n.push(t[r]);return e&&t.length>0&&n.push({type:"text",value:`
`}),n}function MS(t){let e=0,n=t.charCodeAt(e);for(;n===9||n===32;)e++,n=t.charCodeAt(e);return t.slice(e)}function DS(t,e){const n=z7(t,e),r=n.one(t,void 0),s=C7(n),a=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return s&&a.children.push({type:"text",value:`
`},s),a}function $7(t,e){return t&&"run"in t?async function(n,r){const s=DS(n,{file:r,...e});await t.run(s,r)}:function(n,r){return DS(n,{file:r,...t||e})}}function LS(t){if(t)throw t}var Am,zS;function q7(){if(zS)return Am;zS=1;var t=Object.prototype.hasOwnProperty,e=Object.prototype.toString,n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,s=function(h){return typeof Array.isArray=="function"?Array.isArray(h):e.call(h)==="[object Array]"},a=function(h){if(!h||e.call(h)!=="[object Object]")return!1;var m=t.call(h,"constructor"),p=h.constructor&&h.constructor.prototype&&t.call(h.constructor.prototype,"isPrototypeOf");if(h.constructor&&!m&&!p)return!1;var _;for(_ in h);return typeof _>"u"||t.call(h,_)},l=function(h,m){n&&m.name==="__proto__"?n(h,m.name,{enumerable:!0,configurable:!0,value:m.newValue,writable:!0}):h[m.name]=m.newValue},u=function(h,m){if(m==="__proto__")if(t.call(h,m)){if(r)return r(h,m).value}else return;return h[m]};return Am=function f(){var h,m,p,_,g,v,x=arguments[0],E=1,k=arguments.length,T=!1;for(typeof x=="boolean"&&(T=x,x=arguments[1]||{},E=2),(x==null||typeof x!="object"&&typeof x!="function")&&(x={});E<k;++E)if(h=arguments[E],h!=null)for(m in h)p=u(x,m),_=u(h,m),x!==_&&(T&&_&&(a(_)||(g=s(_)))?(g?(g=!1,v=p&&s(p)?p:[]):v=p&&a(p)?p:{},l(x,{name:m,newValue:f(T,v,_)})):typeof _<"u"&&l(x,{name:m,newValue:_}));return x},Am}var F7=q7();const Rm=ZS(F7);function Jg(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function V7(){const t=[],e={run:n,use:r};return e;function n(...s){let a=-1;const l=s.pop();if(typeof l!="function")throw new TypeError("Expected function as last argument, not "+l);u(null,...s);function u(f,...h){const m=t[++a];let p=-1;if(f){l(f);return}for(;++p<s.length;)(h[p]===null||h[p]===void 0)&&(h[p]=s[p]);s=h,m?H7(m,u)(...h):l(null,...h)}}function r(s){if(typeof s!="function")throw new TypeError("Expected `middelware` to be a function, not "+s);return t.push(s),e}}function H7(t,e){let n;return r;function r(...l){const u=t.length>l.length;let f;u&&l.push(s);try{f=t.apply(this,l)}catch(h){const m=h;if(u&&n)throw m;return s(m)}u||(f&&f.then&&typeof f.then=="function"?f.then(a,s):f instanceof Error?s(f):a(f))}function s(l,...u){n||(n=!0,e(l,...u))}function a(l){s(null,l)}}const jr={basename:G7,dirname:K7,extname:Z7,join:Q7,sep:"/"};function G7(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');sc(t);let n=0,r=-1,s=t.length,a;if(e===void 0||e.length===0||e.length>t.length){for(;s--;)if(t.codePointAt(s)===47){if(a){n=s+1;break}}else r<0&&(a=!0,r=s+1);return r<0?"":t.slice(n,r)}if(e===t)return"";let l=-1,u=e.length-1;for(;s--;)if(t.codePointAt(s)===47){if(a){n=s+1;break}}else l<0&&(a=!0,l=s+1),u>-1&&(t.codePointAt(s)===e.codePointAt(u--)?u<0&&(r=s):(u=-1,r=l));return n===r?r=l:r<0&&(r=t.length),t.slice(n,r)}function K7(t){if(sc(t),t.length===0)return".";let e=-1,n=t.length,r;for(;--n;)if(t.codePointAt(n)===47){if(r){e=n;break}}else r||(r=!0);return e<0?t.codePointAt(0)===47?"/":".":e===1&&t.codePointAt(0)===47?"//":t.slice(0,e)}function Z7(t){sc(t);let e=t.length,n=-1,r=0,s=-1,a=0,l;for(;e--;){const u=t.codePointAt(e);if(u===47){if(l){r=e+1;break}continue}n<0&&(l=!0,n=e+1),u===46?s<0?s=e:a!==1&&(a=1):s>-1&&(a=-1)}return s<0||n<0||a===0||a===1&&s===n-1&&s===r+1?"":t.slice(s,n)}function Q7(...t){let e=-1,n;for(;++e<t.length;)sc(t[e]),t[e]&&(n=n===void 0?t[e]:n+"/"+t[e]);return n===void 0?".":J7(n)}function J7(t){sc(t);const e=t.codePointAt(0)===47;let n=Y7(t,!e);return n.length===0&&!e&&(n="."),n.length>0&&t.codePointAt(t.length-1)===47&&(n+="/"),e?"/"+n:n}function Y7(t,e){let n="",r=0,s=-1,a=0,l=-1,u,f;for(;++l<=t.length;){if(l<t.length)u=t.codePointAt(l);else{if(u===47)break;u=47}if(u===47){if(!(s===l-1||a===1))if(s!==l-1&&a===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(f=n.lastIndexOf("/"),f!==n.length-1){f<0?(n="",r=0):(n=n.slice(0,f),r=n.length-1-n.lastIndexOf("/")),s=l,a=0;continue}}else if(n.length>0){n="",r=0,s=l,a=0;continue}}e&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+t.slice(s+1,l):n=t.slice(s+1,l),r=l-s-1;s=l,a=0}else u===46&&a>-1?a++:a=-1}return n}function sc(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const X7={cwd:W7};function W7(){return"/"}function Yg(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function eH(t){if(typeof t=="string")t=new URL(t);else if(!Yg(t)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(t.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return tH(t)}function tH(t){if(t.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const e=t.pathname;let n=-1;for(;++n<e.length;)if(e.codePointAt(n)===37&&e.codePointAt(n+1)===50){const r=e.codePointAt(n+2);if(r===70||r===102){const s=new TypeError("File URL path must not include encoded / characters");throw s.code="ERR_INVALID_FILE_URL_PATH",s}}return decodeURIComponent(e)}const Om=["history","path","basename","stem","extname","dirname"];class cA{constructor(e){let n;e?Yg(e)?n={path:e}:typeof e=="string"||nH(e)?n={value:e}:n=e:n={},this.cwd="cwd"in n?"":X7.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<Om.length;){const a=Om[r];a in n&&n[a]!==void 0&&n[a]!==null&&(this[a]=a==="history"?[...n[a]]:n[a])}let s;for(s in n)Om.includes(s)||(this[s]=n[s])}get basename(){return typeof this.path=="string"?jr.basename(this.path):void 0}set basename(e){Nm(e,"basename"),Im(e,"basename"),this.path=jr.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?jr.dirname(this.path):void 0}set dirname(e){jS(this.basename,"dirname"),this.path=jr.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?jr.extname(this.path):void 0}set extname(e){if(Im(e,"extname"),jS(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=jr.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){Yg(e)&&(e=eH(e)),Nm(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?jr.basename(this.path,this.extname):void 0}set stem(e){Nm(e,"stem"),Im(e,"stem"),this.path=jr.join(this.dirname||"",e+(this.extname||""))}fail(e,n,r){const s=this.message(e,n,r);throw s.fatal=!0,s}info(e,n,r){const s=this.message(e,n,r);return s.fatal=void 0,s}message(e,n,r){const s=new xn(e,n,r);return this.path&&(s.name=this.path+":"+s.name,s.file=this.path),s.fatal=!1,this.messages.push(s),s}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function Im(t,e){if(t&&t.includes(jr.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+jr.sep+"`")}function Nm(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}function jS(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}function nH(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const rH=(function(t){const r=this.constructor.prototype,s=r[t],a=function(){return s.apply(a,arguments)};return Object.setPrototypeOf(a,r),a}),sH={}.hasOwnProperty;class T0 extends rH{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=V7()}copy(){const e=new T0;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];e.use(...r)}return e.data(Rm(!0,{},this.namespace)),e}data(e,n){return typeof e=="string"?arguments.length===2?(Lm("data",this.frozen),this.namespace[e]=n,this):sH.call(this.namespace,e)&&this.namespace[e]||void 0:e?(Lm("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const s=n.call(e,...r);typeof s=="function"&&this.transformers.use(s)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const n=$u(e),r=this.parser||this.Parser;return Mm("parse",r),r(String(n),n)}process(e,n){const r=this;return this.freeze(),Mm("process",this.parser||this.Parser),Dm("process",this.compiler||this.Compiler),n?s(void 0,n):new Promise(s);function s(a,l){const u=$u(e),f=r.parse(u);r.run(f,u,function(m,p,_){if(m||!p||!_)return h(m);const g=p,v=r.stringify(g,_);oH(v)?_.value=v:_.result=v,h(m,_)});function h(m,p){m||!p?l(m):a?a(p):n(void 0,p)}}}processSync(e){let n=!1,r;return this.freeze(),Mm("processSync",this.parser||this.Parser),Dm("processSync",this.compiler||this.Compiler),this.process(e,s),BS("processSync","process",n),r;function s(a,l){n=!0,LS(a),r=l}}run(e,n,r){PS(e),this.freeze();const s=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?a(void 0,r):new Promise(a);function a(l,u){const f=$u(n);s.run(e,f,h);function h(m,p,_){const g=p||e;m?u(m):l?l(g):r(void 0,g,_)}}}runSync(e,n){let r=!1,s;return this.run(e,n,a),BS("runSync","run",r),s;function a(l,u){LS(l),s=u,r=!0}}stringify(e,n){this.freeze();const r=$u(n),s=this.compiler||this.Compiler;return Dm("stringify",s),PS(e),s(e,r)}use(e,...n){const r=this.attachers,s=this.namespace;if(Lm("use",this.frozen),e!=null)if(typeof e=="function")f(e,n);else if(typeof e=="object")Array.isArray(e)?u(e):l(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function a(h){if(typeof h=="function")f(h,[]);else if(typeof h=="object")if(Array.isArray(h)){const[m,...p]=h;f(m,p)}else l(h);else throw new TypeError("Expected usable value, not `"+h+"`")}function l(h){if(!("plugins"in h)&&!("settings"in h))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");u(h.plugins),h.settings&&(s.settings=Rm(!0,s.settings,h.settings))}function u(h){let m=-1;if(h!=null)if(Array.isArray(h))for(;++m<h.length;){const p=h[m];a(p)}else throw new TypeError("Expected a list of plugins, not `"+h+"`")}function f(h,m){let p=-1,_=-1;for(;++p<r.length;)if(r[p][0]===h){_=p;break}if(_===-1)r.push([h,...m]);else if(m.length>0){let[g,...v]=m;const x=r[_][1];Jg(x)&&Jg(g)&&(g=Rm(!0,x,g)),r[_]=[h,g,...v]}}}}const iH=new T0().freeze();function Mm(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `parser`")}function Dm(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `compiler`")}function Lm(t,e){if(e)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function PS(t){if(!Jg(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}function BS(t,e,n){if(!n)throw new Error("`"+t+"` finished async. Use `"+e+"` instead")}function $u(t){return aH(t)?t:new cA(t)}function aH(t){return!!(t&&typeof t=="object"&&"message"in t&&"messages"in t)}function oH(t){return typeof t=="string"||lH(t)}function lH(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const cH="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",US=[],$S={allowDangerousHtml:!0},uH=/^(https?|ircs?|mailto|xmpp)$/i,fH=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function hH(t){const e=dH(t),n=pH(t);return mH(e.runSync(e.parse(n),n),t)}function dH(t){const e=t.rehypePlugins||US,n=t.remarkPlugins||US,r=t.remarkRehypeOptions?{...t.remarkRehypeOptions,...$S}:$S;return iH().use(KV).use(n).use($7,r).use(e)}function pH(t){const e=t.children||"",n=new cA;return typeof e=="string"&&(n.value=e),n}function mH(t,e){const n=e.allowedElements,r=e.allowElement,s=e.components,a=e.disallowedElements,l=e.skipHtml,u=e.unwrapDisallowed,f=e.urlTransform||gH;for(const m of fH)Object.hasOwn(e,m.from)&&(""+m.from+(m.to?"use `"+m.to+"` instead":"remove it")+cH+m.id,void 0);return C0(t,h),Oq(t,{Fragment:w.Fragment,components:s,ignoreInvalidStyle:!0,jsx:w.jsx,jsxs:w.jsxs,passKeys:!0,passNode:!0});function h(m,p,_){if(m.type==="raw"&&_&&typeof p=="number")return l?_.children.splice(p,1):_.children[p]={type:"text",value:m.value},p;if(m.type==="element"){let g;for(g in Em)if(Object.hasOwn(Em,g)&&Object.hasOwn(m.properties,g)){const v=m.properties[g],x=Em[g];(x===null||x.includes(m.tagName))&&(m.properties[g]=f(String(v||""),g,m))}}if(m.type==="element"){let g=n?!n.includes(m.tagName):a?a.includes(m.tagName):!1;if(!g&&r&&typeof p=="number"&&(g=!r(m,p,_)),g&&_&&typeof p=="number")return u&&m.children?_.children.splice(p,1,...m.children):_.children.splice(p,1),p}}}function gH(t){const e=t.indexOf(":"),n=t.indexOf("?"),r=t.indexOf("#"),s=t.indexOf("/");return e===-1||s!==-1&&e>s||n!==-1&&e>n||r!==-1&&e>r||uH.test(t.slice(0,e))?t:""}function yH(t){if(typeof t!="string")throw new TypeError("Expected a string");return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function uA(t,e,n){const s=Th((n||{}).ignore||[]),a=_H(e);let l=-1;for(;++l<a.length;)lA(t,"text",u);function u(h,m){let p=-1,_;for(;++p<m.length;){const g=m[p],v=_?_.children:void 0;if(s(g,v?v.indexOf(g):void 0,_))return;_=g}if(_)return f(h,m)}function f(h,m){const p=m[m.length-1],_=a[l][0],g=a[l][1];let v=0;const E=p.children.indexOf(h);let k=!1,T=[];_.lastIndex=0;let C=_.exec(h.value);for(;C;){const j=C.index,D={index:C.index,input:C.input,stack:[...m,h]};let I=g(...C,D);if(typeof I=="string"&&(I=I.length>0?{type:"text",value:I}:void 0),I===!1?_.lastIndex=j+1:(v!==j&&T.push({type:"text",value:h.value.slice(v,j)}),Array.isArray(I)?T.push(...I):I&&T.push(I),v=j+C[0].length,k=!0),!_.global)break;C=_.exec(h.value)}return k?(v<h.value.length&&T.push({type:"text",value:h.value.slice(v)}),p.children.splice(E,1,...T)):T=[h],E+T.length}}function _H(t){const e=[];if(!Array.isArray(t))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!t[0]||Array.isArray(t[0])?t:[t];let r=-1;for(;++r<n.length;){const s=n[r];e.push([bH(s[0]),vH(s[1])])}return e}function bH(t){return typeof t=="string"?new RegExp(yH(t),"g"):t}function vH(t){return typeof t=="function"?t:function(){return t}}const zm="phrasing",jm=["autolink","link","image","label"];function xH(){return{transforms:[AH],enter:{literalAutolink:SH,literalAutolinkEmail:Pm,literalAutolinkHttp:Pm,literalAutolinkWww:Pm},exit:{literalAutolink:TH,literalAutolinkEmail:CH,literalAutolinkHttp:kH,literalAutolinkWww:EH}}}function wH(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:zm,notInConstruct:jm},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:zm,notInConstruct:jm},{character:":",before:"[ps]",after:"\\/",inConstruct:zm,notInConstruct:jm}]}}function SH(t){this.enter({type:"link",title:null,url:"",children:[]},t)}function Pm(t){this.config.enter.autolinkProtocol.call(this,t)}function kH(t){this.config.exit.autolinkProtocol.call(this,t)}function EH(t){this.config.exit.data.call(this,t);const e=this.stack[this.stack.length-1];e.type,e.url="http://"+this.sliceSerialize(t)}function CH(t){this.config.exit.autolinkEmail.call(this,t)}function TH(t){this.exit(t)}function AH(t){uA(t,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,RH],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),OH]],{ignore:["link","linkReference"]})}function RH(t,e,n,r,s){let a="";if(!fA(s)||(/^w/i.test(e)&&(n=e+n,e="",a="http://"),!IH(n)))return!1;const l=NH(n+r);if(!l[0])return!1;const u={type:"link",title:null,url:a+e+l[0],children:[{type:"text",value:e+l[0]}]};return l[1]?[u,{type:"text",value:l[1]}]:u}function OH(t,e,n,r){return!fA(r,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+e+"@"+n,children:[{type:"text",value:e+"@"+n}]}}function IH(t){const e=t.split(".");return!(e.length<2||e[e.length-1]&&(/_/.test(e[e.length-1])||!/[a-zA-Z\d]/.test(e[e.length-1]))||e[e.length-2]&&(/_/.test(e[e.length-2])||!/[a-zA-Z\d]/.test(e[e.length-2])))}function NH(t){const e=/[!"&'),.:;<>?\]}]+$/.exec(t);if(!e)return[t,void 0];t=t.slice(0,e.index);let n=e[0],r=n.indexOf(")");const s=Tf(t,"(");let a=Tf(t,")");for(;r!==-1&&s>a;)t+=n.slice(0,r+1),n=n.slice(r+1),r=n.indexOf(")"),a++;return[t,n]}function fA(t,e){const n=t.input.charCodeAt(t.index-1);return(t.index===0||Di(n)||kh(n))&&(!e||n!==47)}hA.peek=$H;function MH(){this.buffer()}function DH(t){this.enter({type:"footnoteReference",identifier:"",label:""},t)}function LH(){this.buffer()}function zH(t){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},t)}function jH(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Ar(this.sliceSerialize(t)).toLowerCase(),n.label=e}function PH(t){this.exit(t)}function BH(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Ar(this.sliceSerialize(t)).toLowerCase(),n.label=e}function UH(t){this.exit(t)}function $H(){return"["}function hA(t,e,n,r){const s=n.createTracker(r);let a=s.move("[^");const l=n.enter("footnoteReference"),u=n.enter("reference");return a+=s.move(n.safe(n.associationId(t),{after:"]",before:a})),u(),l(),a+=s.move("]"),a}function qH(){return{enter:{gfmFootnoteCallString:MH,gfmFootnoteCall:DH,gfmFootnoteDefinitionLabelString:LH,gfmFootnoteDefinition:zH},exit:{gfmFootnoteCallString:jH,gfmFootnoteCall:PH,gfmFootnoteDefinitionLabelString:BH,gfmFootnoteDefinition:UH}}}function FH(t){let e=!1;return t&&t.firstLineBlank&&(e=!0),{handlers:{footnoteDefinition:n,footnoteReference:hA},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(r,s,a,l){const u=a.createTracker(l);let f=u.move("[^");const h=a.enter("footnoteDefinition"),m=a.enter("label");return f+=u.move(a.safe(a.associationId(r),{before:f,after:"]"})),m(),f+=u.move("]:"),r.children&&r.children.length>0&&(u.shift(4),f+=u.move((e?`
`:" ")+a.indentLines(a.containerFlow(r,u.current()),e?dA:VH))),h(),f}}function VH(t,e,n){return e===0?t:dA(t,e,n)}function dA(t,e,n){return(n?"":"    ")+t}const HH=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];pA.peek=JH;function GH(){return{canContainEols:["delete"],enter:{strikethrough:ZH},exit:{strikethrough:QH}}}function KH(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:HH}],handlers:{delete:pA}}}function ZH(t){this.enter({type:"delete",children:[]},t)}function QH(t){this.exit(t)}function pA(t,e,n,r){const s=n.createTracker(r),a=n.enter("strikethrough");let l=s.move("~~");return l+=n.containerPhrasing(t,{...s.current(),before:l,after:"~"}),l+=s.move("~~"),a(),l}function JH(){return"~"}function YH(t){return t.length}function XH(t,e){const n=e||{},r=(n.align||[]).concat(),s=n.stringLength||YH,a=[],l=[],u=[],f=[];let h=0,m=-1;for(;++m<t.length;){const x=[],E=[];let k=-1;for(t[m].length>h&&(h=t[m].length);++k<t[m].length;){const T=WH(t[m][k]);if(n.alignDelimiters!==!1){const C=s(T);E[k]=C,(f[k]===void 0||C>f[k])&&(f[k]=C)}x.push(T)}l[m]=x,u[m]=E}let p=-1;if(typeof r=="object"&&"length"in r)for(;++p<h;)a[p]=qS(r[p]);else{const x=qS(r);for(;++p<h;)a[p]=x}p=-1;const _=[],g=[];for(;++p<h;){const x=a[p];let E="",k="";x===99?(E=":",k=":"):x===108?E=":":x===114&&(k=":");let T=n.alignDelimiters===!1?1:Math.max(1,f[p]-E.length-k.length);const C=E+"-".repeat(T)+k;n.alignDelimiters!==!1&&(T=E.length+T+k.length,T>f[p]&&(f[p]=T),g[p]=T),_[p]=C}l.splice(1,0,_),u.splice(1,0,g),m=-1;const v=[];for(;++m<l.length;){const x=l[m],E=u[m];p=-1;const k=[];for(;++p<h;){const T=x[p]||"";let C="",j="";if(n.alignDelimiters!==!1){const D=f[p]-(E[p]||0),I=a[p];I===114?C=" ".repeat(D):I===99?D%2?(C=" ".repeat(D/2+.5),j=" ".repeat(D/2-.5)):(C=" ".repeat(D/2),j=C):j=" ".repeat(D)}n.delimiterStart!==!1&&!p&&k.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&T==="")&&(n.delimiterStart!==!1||p)&&k.push(" "),n.alignDelimiters!==!1&&k.push(C),k.push(T),n.alignDelimiters!==!1&&k.push(j),n.padding!==!1&&k.push(" "),(n.delimiterEnd!==!1||p!==h-1)&&k.push("|")}v.push(n.delimiterEnd===!1?k.join("").replace(/ +$/,""):k.join(""))}return v.join(`
`)}function WH(t){return t==null?"":String(t)}function qS(t){const e=typeof t=="string"?t.codePointAt(0):0;return e===67||e===99?99:e===76||e===108?108:e===82||e===114?114:0}function eG(t,e,n,r){const s=n.enter("blockquote"),a=n.createTracker(r);a.move("> "),a.shift(2);const l=n.indentLines(n.containerFlow(t,a.current()),tG);return s(),l}function tG(t,e,n){return">"+(n?"":" ")+t}function nG(t,e){return FS(t,e.inConstruct,!0)&&!FS(t,e.notInConstruct,!1)}function FS(t,e,n){if(typeof e=="string"&&(e=[e]),!e||e.length===0)return n;let r=-1;for(;++r<e.length;)if(t.includes(e[r]))return!0;return!1}function VS(t,e,n,r){let s=-1;for(;++s<n.unsafe.length;)if(n.unsafe[s].character===`
`&&nG(n.stack,n.unsafe[s]))return/[ \t]/.test(r.before)?"":" ";return`\\
`}function rG(t,e){const n=String(t);let r=n.indexOf(e),s=r,a=0,l=0;if(typeof e!="string")throw new TypeError("Expected substring");for(;r!==-1;)r===s?++a>l&&(l=a):a=1,s=r+e.length,r=n.indexOf(e,s);return l}function sG(t,e){return!!(e.options.fences===!1&&t.value&&!t.lang&&/[^ \r\n]/.test(t.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(t.value))}function iG(t){const e=t.options.fence||"`";if(e!=="`"&&e!=="~")throw new Error("Cannot serialize code with `"+e+"` for `options.fence`, expected `` ` `` or `~`");return e}function aG(t,e,n,r){const s=iG(n),a=t.value||"",l=s==="`"?"GraveAccent":"Tilde";if(sG(t,n)){const p=n.enter("codeIndented"),_=n.indentLines(a,oG);return p(),_}const u=n.createTracker(r),f=s.repeat(Math.max(rG(a,s)+1,3)),h=n.enter("codeFenced");let m=u.move(f);if(t.lang){const p=n.enter(`codeFencedLang${l}`);m+=u.move(n.safe(t.lang,{before:m,after:" ",encode:["`"],...u.current()})),p()}if(t.lang&&t.meta){const p=n.enter(`codeFencedMeta${l}`);m+=u.move(" "),m+=u.move(n.safe(t.meta,{before:m,after:`
`,encode:["`"],...u.current()})),p()}return m+=u.move(`
`),a&&(m+=u.move(a+`
`)),m+=u.move(f),h(),m}function oG(t,e,n){return(n?"":"    ")+t}function A0(t){const e=t.options.quote||'"';if(e!=='"'&&e!=="'")throw new Error("Cannot serialize title with `"+e+"` for `options.quote`, expected `\"`, or `'`");return e}function lG(t,e,n,r){const s=A0(n),a=s==='"'?"Quote":"Apostrophe",l=n.enter("definition");let u=n.enter("label");const f=n.createTracker(r);let h=f.move("[");return h+=f.move(n.safe(n.associationId(t),{before:h,after:"]",...f.current()})),h+=f.move("]: "),u(),!t.url||/[\0- \u007F]/.test(t.url)?(u=n.enter("destinationLiteral"),h+=f.move("<"),h+=f.move(n.safe(t.url,{before:h,after:">",...f.current()})),h+=f.move(">")):(u=n.enter("destinationRaw"),h+=f.move(n.safe(t.url,{before:h,after:t.title?" ":`
`,...f.current()}))),u(),t.title&&(u=n.enter(`title${a}`),h+=f.move(" "+s),h+=f.move(n.safe(t.title,{before:h,after:s,...f.current()})),h+=f.move(s),u()),l(),h}function cG(t){const e=t.options.emphasis||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize emphasis with `"+e+"` for `options.emphasis`, expected `*`, or `_`");return e}function Hl(t){return"&#x"+t.toString(16).toUpperCase()+";"}function Jf(t,e,n){const r=Ka(t),s=Ka(e);return r===void 0?s===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:s===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:r===1?s===void 0?{inside:!1,outside:!1}:s===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:s===void 0?{inside:!1,outside:!1}:s===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}mA.peek=uG;function mA(t,e,n,r){const s=cG(n),a=n.enter("emphasis"),l=n.createTracker(r),u=l.move(s);let f=l.move(n.containerPhrasing(t,{after:s,before:u,...l.current()}));const h=f.charCodeAt(0),m=Jf(r.before.charCodeAt(r.before.length-1),h,s);m.inside&&(f=Hl(h)+f.slice(1));const p=f.charCodeAt(f.length-1),_=Jf(r.after.charCodeAt(0),p,s);_.inside&&(f=f.slice(0,-1)+Hl(p));const g=l.move(s);return a(),n.attentionEncodeSurroundingInfo={after:_.outside,before:m.outside},u+f+g}function uG(t,e,n){return n.options.emphasis||"*"}function fG(t,e){let n=!1;return C0(t,function(r){if("value"in r&&/\r?\n|\r/.test(r.value)||r.type==="break")return n=!0,Zg}),!!((!t.depth||t.depth<3)&&b0(t)&&(e.options.setext||n))}function hG(t,e,n,r){const s=Math.max(Math.min(6,t.depth||1),1),a=n.createTracker(r);if(fG(t,n)){const m=n.enter("headingSetext"),p=n.enter("phrasing"),_=n.containerPhrasing(t,{...a.current(),before:`
`,after:`
`});return p(),m(),_+`
`+(s===1?"=":"-").repeat(_.length-(Math.max(_.lastIndexOf("\r"),_.lastIndexOf(`
`))+1))}const l="#".repeat(s),u=n.enter("headingAtx"),f=n.enter("phrasing");a.move(l+" ");let h=n.containerPhrasing(t,{before:"# ",after:`
`,...a.current()});return/^[\t ]/.test(h)&&(h=Hl(h.charCodeAt(0))+h.slice(1)),h=h?l+" "+h:l,n.options.closeAtx&&(h+=" "+l),f(),u(),h}gA.peek=dG;function gA(t){return t.value||""}function dG(){return"<"}yA.peek=pG;function yA(t,e,n,r){const s=A0(n),a=s==='"'?"Quote":"Apostrophe",l=n.enter("image");let u=n.enter("label");const f=n.createTracker(r);let h=f.move("![");return h+=f.move(n.safe(t.alt,{before:h,after:"]",...f.current()})),h+=f.move("]("),u(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(u=n.enter("destinationLiteral"),h+=f.move("<"),h+=f.move(n.safe(t.url,{before:h,after:">",...f.current()})),h+=f.move(">")):(u=n.enter("destinationRaw"),h+=f.move(n.safe(t.url,{before:h,after:t.title?" ":")",...f.current()}))),u(),t.title&&(u=n.enter(`title${a}`),h+=f.move(" "+s),h+=f.move(n.safe(t.title,{before:h,after:s,...f.current()})),h+=f.move(s),u()),h+=f.move(")"),l(),h}function pG(){return"!"}_A.peek=mG;function _A(t,e,n,r){const s=t.referenceType,a=n.enter("imageReference");let l=n.enter("label");const u=n.createTracker(r);let f=u.move("![");const h=n.safe(t.alt,{before:f,after:"]",...u.current()});f+=u.move(h+"]["),l();const m=n.stack;n.stack=[],l=n.enter("reference");const p=n.safe(n.associationId(t),{before:f,after:"]",...u.current()});return l(),n.stack=m,a(),s==="full"||!h||h!==p?f+=u.move(p+"]"):s==="shortcut"?f=f.slice(0,-1):f+=u.move("]"),f}function mG(){return"!"}bA.peek=gG;function bA(t,e,n){let r=t.value||"",s="`",a=-1;for(;new RegExp("(^|[^`])"+s+"([^`]|$)").test(r);)s+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++a<n.unsafe.length;){const l=n.unsafe[a],u=n.compilePattern(l);let f;if(l.atBreak)for(;f=u.exec(r);){let h=f.index;r.charCodeAt(h)===10&&r.charCodeAt(h-1)===13&&h--,r=r.slice(0,h)+" "+r.slice(f.index+1)}}return s+r+s}function gG(){return"`"}function vA(t,e){const n=b0(t);return!!(!e.options.resourceLink&&t.url&&!t.title&&t.children&&t.children.length===1&&t.children[0].type==="text"&&(n===t.url||"mailto:"+n===t.url)&&/^[a-z][a-z+.-]+:/i.test(t.url)&&!/[\0- <>\u007F]/.test(t.url))}xA.peek=yG;function xA(t,e,n,r){const s=A0(n),a=s==='"'?"Quote":"Apostrophe",l=n.createTracker(r);let u,f;if(vA(t,n)){const m=n.stack;n.stack=[],u=n.enter("autolink");let p=l.move("<");return p+=l.move(n.containerPhrasing(t,{before:p,after:">",...l.current()})),p+=l.move(">"),u(),n.stack=m,p}u=n.enter("link"),f=n.enter("label");let h=l.move("[");return h+=l.move(n.containerPhrasing(t,{before:h,after:"](",...l.current()})),h+=l.move("]("),f(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(f=n.enter("destinationLiteral"),h+=l.move("<"),h+=l.move(n.safe(t.url,{before:h,after:">",...l.current()})),h+=l.move(">")):(f=n.enter("destinationRaw"),h+=l.move(n.safe(t.url,{before:h,after:t.title?" ":")",...l.current()}))),f(),t.title&&(f=n.enter(`title${a}`),h+=l.move(" "+s),h+=l.move(n.safe(t.title,{before:h,after:s,...l.current()})),h+=l.move(s),f()),h+=l.move(")"),u(),h}function yG(t,e,n){return vA(t,n)?"<":"["}wA.peek=_G;function wA(t,e,n,r){const s=t.referenceType,a=n.enter("linkReference");let l=n.enter("label");const u=n.createTracker(r);let f=u.move("[");const h=n.containerPhrasing(t,{before:f,after:"]",...u.current()});f+=u.move(h+"]["),l();const m=n.stack;n.stack=[],l=n.enter("reference");const p=n.safe(n.associationId(t),{before:f,after:"]",...u.current()});return l(),n.stack=m,a(),s==="full"||!h||h!==p?f+=u.move(p+"]"):s==="shortcut"?f=f.slice(0,-1):f+=u.move("]"),f}function _G(){return"["}function R0(t){const e=t.options.bullet||"*";if(e!=="*"&&e!=="+"&&e!=="-")throw new Error("Cannot serialize items with `"+e+"` for `options.bullet`, expected `*`, `+`, or `-`");return e}function bG(t){const e=R0(t),n=t.options.bulletOther;if(!n)return e==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===e)throw new Error("Expected `bullet` (`"+e+"`) and `bulletOther` (`"+n+"`) to be different");return n}function vG(t){const e=t.options.bulletOrdered||".";if(e!=="."&&e!==")")throw new Error("Cannot serialize items with `"+e+"` for `options.bulletOrdered`, expected `.` or `)`");return e}function SA(t){const e=t.options.rule||"*";if(e!=="*"&&e!=="-"&&e!=="_")throw new Error("Cannot serialize rules with `"+e+"` for `options.rule`, expected `*`, `-`, or `_`");return e}function xG(t,e,n,r){const s=n.enter("list"),a=n.bulletCurrent;let l=t.ordered?vG(n):R0(n);const u=t.ordered?l==="."?")":".":bG(n);let f=e&&n.bulletLastUsed?l===n.bulletLastUsed:!1;if(!t.ordered){const m=t.children?t.children[0]:void 0;if((l==="*"||l==="-")&&m&&(!m.children||!m.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(f=!0),SA(n)===l&&m){let p=-1;for(;++p<t.children.length;){const _=t.children[p];if(_&&_.type==="listItem"&&_.children&&_.children[0]&&_.children[0].type==="thematicBreak"){f=!0;break}}}}f&&(l=u),n.bulletCurrent=l;const h=n.containerFlow(t,r);return n.bulletLastUsed=l,n.bulletCurrent=a,s(),h}function wG(t){const e=t.options.listItemIndent||"one";if(e!=="tab"&&e!=="one"&&e!=="mixed")throw new Error("Cannot serialize items with `"+e+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return e}function SG(t,e,n,r){const s=wG(n);let a=n.bulletCurrent||R0(n);e&&e.type==="list"&&e.ordered&&(a=(typeof e.start=="number"&&e.start>-1?e.start:1)+(n.options.incrementListMarker===!1?0:e.children.indexOf(t))+a);let l=a.length+1;(s==="tab"||s==="mixed"&&(e&&e.type==="list"&&e.spread||t.spread))&&(l=Math.ceil(l/4)*4);const u=n.createTracker(r);u.move(a+" ".repeat(l-a.length)),u.shift(l);const f=n.enter("listItem"),h=n.indentLines(n.containerFlow(t,u.current()),m);return f(),h;function m(p,_,g){return _?(g?"":" ".repeat(l))+p:(g?a:a+" ".repeat(l-a.length))+p}}function kG(t,e,n,r){const s=n.enter("paragraph"),a=n.enter("phrasing"),l=n.containerPhrasing(t,r);return a(),s(),l}const EG=Th(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function CG(t,e,n,r){return(t.children.some(function(l){return EG(l)})?n.containerPhrasing:n.containerFlow).call(n,t,r)}function TG(t){const e=t.options.strong||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize strong with `"+e+"` for `options.strong`, expected `*`, or `_`");return e}kA.peek=AG;function kA(t,e,n,r){const s=TG(n),a=n.enter("strong"),l=n.createTracker(r),u=l.move(s+s);let f=l.move(n.containerPhrasing(t,{after:s,before:u,...l.current()}));const h=f.charCodeAt(0),m=Jf(r.before.charCodeAt(r.before.length-1),h,s);m.inside&&(f=Hl(h)+f.slice(1));const p=f.charCodeAt(f.length-1),_=Jf(r.after.charCodeAt(0),p,s);_.inside&&(f=f.slice(0,-1)+Hl(p));const g=l.move(s+s);return a(),n.attentionEncodeSurroundingInfo={after:_.outside,before:m.outside},u+f+g}function AG(t,e,n){return n.options.strong||"*"}function RG(t,e,n,r){return n.safe(t.value,r)}function OG(t){const e=t.options.ruleRepetition||3;if(e<3)throw new Error("Cannot serialize rules with repetition `"+e+"` for `options.ruleRepetition`, expected `3` or more");return e}function IG(t,e,n){const r=(SA(n)+(n.options.ruleSpaces?" ":"")).repeat(OG(n));return n.options.ruleSpaces?r.slice(0,-1):r}const EA={blockquote:eG,break:VS,code:aG,definition:lG,emphasis:mA,hardBreak:VS,heading:hG,html:gA,image:yA,imageReference:_A,inlineCode:bA,link:xA,linkReference:wA,list:xG,listItem:SG,paragraph:kG,root:CG,strong:kA,text:RG,thematicBreak:IG};function NG(){return{enter:{table:MG,tableData:HS,tableHeader:HS,tableRow:LG},exit:{codeText:zG,table:DG,tableData:Bm,tableHeader:Bm,tableRow:Bm}}}function MG(t){const e=t._align;this.enter({type:"table",align:e.map(function(n){return n==="none"?null:n}),children:[]},t),this.data.inTable=!0}function DG(t){this.exit(t),this.data.inTable=void 0}function LG(t){this.enter({type:"tableRow",children:[]},t)}function Bm(t){this.exit(t)}function HS(t){this.enter({type:"tableCell",children:[]},t)}function zG(t){let e=this.resume();this.data.inTable&&(e=e.replace(/\\([\\|])/g,jG));const n=this.stack[this.stack.length-1];n.type,n.value=e,this.exit(t)}function jG(t,e){return e==="|"?e:t}function PG(t){const e=t||{},n=e.tableCellPadding,r=e.tablePipeAlign,s=e.stringLength,a=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:_,table:l,tableCell:f,tableRow:u}};function l(g,v,x,E){return h(m(g,x,E),g.align)}function u(g,v,x,E){const k=p(g,x,E),T=h([k]);return T.slice(0,T.indexOf(`
`))}function f(g,v,x,E){const k=x.enter("tableCell"),T=x.enter("phrasing"),C=x.containerPhrasing(g,{...E,before:a,after:a});return T(),k(),C}function h(g,v){return XH(g,{align:v,alignDelimiters:r,padding:n,stringLength:s})}function m(g,v,x){const E=g.children;let k=-1;const T=[],C=v.enter("table");for(;++k<E.length;)T[k]=p(E[k],v,x);return C(),T}function p(g,v,x){const E=g.children;let k=-1;const T=[],C=v.enter("tableRow");for(;++k<E.length;)T[k]=f(E[k],g,v,x);return C(),T}function _(g,v,x){let E=EA.inlineCode(g,v,x);return x.stack.includes("tableCell")&&(E=E.replace(/\|/g,"\\$&")),E}}function BG(){return{exit:{taskListCheckValueChecked:GS,taskListCheckValueUnchecked:GS,paragraph:$G}}}function UG(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:qG}}}function GS(t){const e=this.stack[this.stack.length-2];e.type,e.checked=t.type==="taskListCheckValueChecked"}function $G(t){const e=this.stack[this.stack.length-2];if(e&&e.type==="listItem"&&typeof e.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const r=n.children[0];if(r&&r.type==="text"){const s=e.children;let a=-1,l;for(;++a<s.length;){const u=s[a];if(u.type==="paragraph"){l=u;break}}l===n&&(r.value=r.value.slice(1),r.value.length===0?n.children.shift():n.position&&r.position&&typeof r.position.start.offset=="number"&&(r.position.start.column++,r.position.start.offset++,n.position.start=Object.assign({},r.position.start)))}}this.exit(t)}function qG(t,e,n,r){const s=t.children[0],a=typeof t.checked=="boolean"&&s&&s.type==="paragraph",l="["+(t.checked?"x":" ")+"] ",u=n.createTracker(r);a&&u.move(l);let f=EA.listItem(t,e,n,{...r,...u.current()});return a&&(f=f.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,h)),f;function h(m){return m+l}}function FG(){return[xH(),qH(),GH(),NG(),BG()]}function VG(t){return{extensions:[wH(),FH(t),KH(),PG(t),UG()]}}const HG={tokenize:YG,partial:!0},CA={tokenize:XG,partial:!0},TA={tokenize:WG,partial:!0},AA={tokenize:eK,partial:!0},GG={tokenize:tK,partial:!0},RA={name:"wwwAutolink",tokenize:QG,previous:IA},OA={name:"protocolAutolink",tokenize:JG,previous:NA},gs={name:"emailAutolink",tokenize:ZG,previous:MA},Gr={};function KG(){return{text:Gr}}let wi=48;for(;wi<123;)Gr[wi]=gs,wi++,wi===58?wi=65:wi===91&&(wi=97);Gr[43]=gs;Gr[45]=gs;Gr[46]=gs;Gr[95]=gs;Gr[72]=[gs,OA];Gr[104]=[gs,OA];Gr[87]=[gs,RA];Gr[119]=[gs,RA];function ZG(t,e,n){const r=this;let s,a;return l;function l(p){return!Xg(p)||!MA.call(r,r.previous)||O0(r.events)?n(p):(t.enter("literalAutolink"),t.enter("literalAutolinkEmail"),u(p))}function u(p){return Xg(p)?(t.consume(p),u):p===64?(t.consume(p),f):n(p)}function f(p){return p===46?t.check(GG,m,h)(p):p===45||p===95||vn(p)?(a=!0,t.consume(p),f):m(p)}function h(p){return t.consume(p),s=!0,f}function m(p){return a&&s&&An(r.previous)?(t.exit("literalAutolinkEmail"),t.exit("literalAutolink"),e(p)):n(p)}}function QG(t,e,n){const r=this;return s;function s(l){return l!==87&&l!==119||!IA.call(r,r.previous)||O0(r.events)?n(l):(t.enter("literalAutolink"),t.enter("literalAutolinkWww"),t.check(HG,t.attempt(CA,t.attempt(TA,a),n),n)(l))}function a(l){return t.exit("literalAutolinkWww"),t.exit("literalAutolink"),e(l)}}function JG(t,e,n){const r=this;let s="",a=!1;return l;function l(p){return(p===72||p===104)&&NA.call(r,r.previous)&&!O0(r.events)?(t.enter("literalAutolink"),t.enter("literalAutolinkHttp"),s+=String.fromCodePoint(p),t.consume(p),u):n(p)}function u(p){if(An(p)&&s.length<5)return s+=String.fromCodePoint(p),t.consume(p),u;if(p===58){const _=s.toLowerCase();if(_==="http"||_==="https")return t.consume(p),f}return n(p)}function f(p){return p===47?(t.consume(p),a?h:(a=!0,f)):n(p)}function h(p){return p===null||Kf(p)||mt(p)||Di(p)||kh(p)?n(p):t.attempt(CA,t.attempt(TA,m),n)(p)}function m(p){return t.exit("literalAutolinkHttp"),t.exit("literalAutolink"),e(p)}}function YG(t,e,n){let r=0;return s;function s(l){return(l===87||l===119)&&r<3?(r++,t.consume(l),s):l===46&&r===3?(t.consume(l),a):n(l)}function a(l){return l===null?n(l):e(l)}}function XG(t,e,n){let r,s,a;return l;function l(h){return h===46||h===95?t.check(AA,f,u)(h):h===null||mt(h)||Di(h)||h!==45&&kh(h)?f(h):(a=!0,t.consume(h),l)}function u(h){return h===95?r=!0:(s=r,r=void 0),t.consume(h),l}function f(h){return s||r||!a?n(h):e(h)}}function WG(t,e){let n=0,r=0;return s;function s(l){return l===40?(n++,t.consume(l),s):l===41&&r<n?a(l):l===33||l===34||l===38||l===39||l===41||l===42||l===44||l===46||l===58||l===59||l===60||l===63||l===93||l===95||l===126?t.check(AA,e,a)(l):l===null||mt(l)||Di(l)?e(l):(t.consume(l),s)}function a(l){return l===41&&r++,t.consume(l),s}}function eK(t,e,n){return r;function r(u){return u===33||u===34||u===39||u===41||u===42||u===44||u===46||u===58||u===59||u===63||u===95||u===126?(t.consume(u),r):u===38?(t.consume(u),a):u===93?(t.consume(u),s):u===60||u===null||mt(u)||Di(u)?e(u):n(u)}function s(u){return u===null||u===40||u===91||mt(u)||Di(u)?e(u):r(u)}function a(u){return An(u)?l(u):n(u)}function l(u){return u===59?(t.consume(u),r):An(u)?(t.consume(u),l):n(u)}}function tK(t,e,n){return r;function r(a){return t.consume(a),s}function s(a){return vn(a)?n(a):e(a)}}function IA(t){return t===null||t===40||t===42||t===95||t===91||t===93||t===126||mt(t)}function NA(t){return!An(t)}function MA(t){return!(t===47||Xg(t))}function Xg(t){return t===43||t===45||t===46||t===95||vn(t)}function O0(t){let e=t.length,n=!1;for(;e--;){const r=t[e][1];if((r.type==="labelLink"||r.type==="labelImage")&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return t.length>0&&!n&&(t[t.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const nK={tokenize:uK,partial:!0};function rK(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:oK,continuation:{tokenize:lK},exit:cK}},text:{91:{name:"gfmFootnoteCall",tokenize:aK},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:sK,resolveTo:iK}}}}function sK(t,e,n){const r=this;let s=r.events.length;const a=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let l;for(;s--;){const f=r.events[s][1];if(f.type==="labelImage"){l=f;break}if(f.type==="gfmFootnoteCall"||f.type==="labelLink"||f.type==="label"||f.type==="image"||f.type==="link")break}return u;function u(f){if(!l||!l._balanced)return n(f);const h=Ar(r.sliceSerialize({start:l.end,end:r.now()}));return h.codePointAt(0)!==94||!a.includes(h.slice(1))?n(f):(t.enter("gfmFootnoteCallLabelMarker"),t.consume(f),t.exit("gfmFootnoteCallLabelMarker"),e(f))}}function iK(t,e){let n=t.length;for(;n--;)if(t[n][1].type==="labelImage"&&t[n][0]==="enter"){t[n][1];break}t[n+1][1].type="data",t[n+3][1].type="gfmFootnoteCallLabelMarker";const r={type:"gfmFootnoteCall",start:Object.assign({},t[n+3][1].start),end:Object.assign({},t[t.length-1][1].end)},s={type:"gfmFootnoteCallMarker",start:Object.assign({},t[n+3][1].end),end:Object.assign({},t[n+3][1].end)};s.end.column++,s.end.offset++,s.end._bufferIndex++;const a={type:"gfmFootnoteCallString",start:Object.assign({},s.end),end:Object.assign({},t[t.length-1][1].start)},l={type:"chunkString",contentType:"string",start:Object.assign({},a.start),end:Object.assign({},a.end)},u=[t[n+1],t[n+2],["enter",r,e],t[n+3],t[n+4],["enter",s,e],["exit",s,e],["enter",a,e],["enter",l,e],["exit",l,e],["exit",a,e],t[t.length-2],t[t.length-1],["exit",r,e]];return t.splice(n,t.length-n+1,...u),t}function aK(t,e,n){const r=this,s=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let a=0,l;return u;function u(p){return t.enter("gfmFootnoteCall"),t.enter("gfmFootnoteCallLabelMarker"),t.consume(p),t.exit("gfmFootnoteCallLabelMarker"),f}function f(p){return p!==94?n(p):(t.enter("gfmFootnoteCallMarker"),t.consume(p),t.exit("gfmFootnoteCallMarker"),t.enter("gfmFootnoteCallString"),t.enter("chunkString").contentType="string",h)}function h(p){if(a>999||p===93&&!l||p===null||p===91||mt(p))return n(p);if(p===93){t.exit("chunkString");const _=t.exit("gfmFootnoteCallString");return s.includes(Ar(r.sliceSerialize(_)))?(t.enter("gfmFootnoteCallLabelMarker"),t.consume(p),t.exit("gfmFootnoteCallLabelMarker"),t.exit("gfmFootnoteCall"),e):n(p)}return mt(p)||(l=!0),a++,t.consume(p),p===92?m:h}function m(p){return p===91||p===92||p===93?(t.consume(p),a++,h):h(p)}}function oK(t,e,n){const r=this,s=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let a,l=0,u;return f;function f(v){return t.enter("gfmFootnoteDefinition")._container=!0,t.enter("gfmFootnoteDefinitionLabel"),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(v),t.exit("gfmFootnoteDefinitionLabelMarker"),h}function h(v){return v===94?(t.enter("gfmFootnoteDefinitionMarker"),t.consume(v),t.exit("gfmFootnoteDefinitionMarker"),t.enter("gfmFootnoteDefinitionLabelString"),t.enter("chunkString").contentType="string",m):n(v)}function m(v){if(l>999||v===93&&!u||v===null||v===91||mt(v))return n(v);if(v===93){t.exit("chunkString");const x=t.exit("gfmFootnoteDefinitionLabelString");return a=Ar(r.sliceSerialize(x)),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(v),t.exit("gfmFootnoteDefinitionLabelMarker"),t.exit("gfmFootnoteDefinitionLabel"),_}return mt(v)||(u=!0),l++,t.consume(v),v===92?p:m}function p(v){return v===91||v===92||v===93?(t.consume(v),l++,m):m(v)}function _(v){return v===58?(t.enter("definitionMarker"),t.consume(v),t.exit("definitionMarker"),s.includes(a)||s.push(a),Xe(t,g,"gfmFootnoteDefinitionWhitespace")):n(v)}function g(v){return e(v)}}function lK(t,e,n){return t.check(rc,e,t.attempt(nK,e,n))}function cK(t){t.exit("gfmFootnoteDefinition")}function uK(t,e,n){const r=this;return Xe(t,s,"gfmFootnoteDefinitionIndent",5);function s(a){const l=r.events[r.events.length-1];return l&&l[1].type==="gfmFootnoteDefinitionIndent"&&l[2].sliceSerialize(l[1],!0).length===4?e(a):n(a)}}function fK(t){let n=(t||{}).singleTilde;const r={name:"strikethrough",tokenize:a,resolveAll:s};return n==null&&(n=!0),{text:{126:r},insideSpan:{null:[r]},attentionMarkers:{null:[126]}};function s(l,u){let f=-1;for(;++f<l.length;)if(l[f][0]==="enter"&&l[f][1].type==="strikethroughSequenceTemporary"&&l[f][1]._close){let h=f;for(;h--;)if(l[h][0]==="exit"&&l[h][1].type==="strikethroughSequenceTemporary"&&l[h][1]._open&&l[f][1].end.offset-l[f][1].start.offset===l[h][1].end.offset-l[h][1].start.offset){l[f][1].type="strikethroughSequence",l[h][1].type="strikethroughSequence";const m={type:"strikethrough",start:Object.assign({},l[h][1].start),end:Object.assign({},l[f][1].end)},p={type:"strikethroughText",start:Object.assign({},l[h][1].end),end:Object.assign({},l[f][1].start)},_=[["enter",m,u],["enter",l[h][1],u],["exit",l[h][1],u],["enter",p,u]],g=u.parser.constructs.insideSpan.null;g&&er(_,_.length,0,Eh(g,l.slice(h+1,f),u)),er(_,_.length,0,[["exit",p,u],["enter",l[f][1],u],["exit",l[f][1],u],["exit",m,u]]),er(l,h-1,f-h+3,_),f=h+_.length-2;break}}for(f=-1;++f<l.length;)l[f][1].type==="strikethroughSequenceTemporary"&&(l[f][1].type="data");return l}function a(l,u,f){const h=this.previous,m=this.events;let p=0;return _;function _(v){return h===126&&m[m.length-1][1].type!=="characterEscape"?f(v):(l.enter("strikethroughSequenceTemporary"),g(v))}function g(v){const x=Ka(h);if(v===126)return p>1?f(v):(l.consume(v),p++,g);if(p<2&&!n)return f(v);const E=l.exit("strikethroughSequenceTemporary"),k=Ka(v);return E._open=!k||k===2&&!!x,E._close=!x||x===2&&!!k,u(v)}}}class hK{constructor(){this.map=[]}add(e,n,r){dK(this,e,n,r)}consume(e){if(this.map.sort(function(a,l){return a[0]-l[0]}),this.map.length===0)return;let n=this.map.length;const r=[];for(;n>0;)n-=1,r.push(e.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),e.length=this.map[n][0];r.push(e.slice()),e.length=0;let s=r.pop();for(;s;){for(const a of s)e.push(a);s=r.pop()}this.map.length=0}}function dK(t,e,n,r){let s=0;if(!(n===0&&r.length===0)){for(;s<t.map.length;){if(t.map[s][0]===e){t.map[s][1]+=n,t.map[s][2].push(...r);return}s+=1}t.map.push([e,n,r])}}function pK(t,e){let n=!1;const r=[];for(;e<t.length;){const s=t[e];if(n){if(s[0]==="enter")s[1].type==="tableContent"&&r.push(t[e+1][1].type==="tableDelimiterMarker"?"left":"none");else if(s[1].type==="tableContent"){if(t[e-1][1].type==="tableDelimiterMarker"){const a=r.length-1;r[a]=r[a]==="left"?"center":"right"}}else if(s[1].type==="tableDelimiterRow")break}else s[0]==="enter"&&s[1].type==="tableDelimiterRow"&&(n=!0);e+=1}return r}function mK(){return{flow:{null:{name:"table",tokenize:gK,resolveAll:yK}}}}function gK(t,e,n){const r=this;let s=0,a=0,l;return u;function u(P){let Q=r.events.length-1;for(;Q>-1;){const z=r.events[Q][1].type;if(z==="lineEnding"||z==="linePrefix")Q--;else break}const ne=Q>-1?r.events[Q][1].type:null,me=ne==="tableHead"||ne==="tableRow"?I:f;return me===I&&r.parser.lazy[r.now().line]?n(P):me(P)}function f(P){return t.enter("tableHead"),t.enter("tableRow"),h(P)}function h(P){return P===124||(l=!0,a+=1),m(P)}function m(P){return P===null?n(P):Re(P)?a>1?(a=0,r.interrupt=!0,t.exit("tableRow"),t.enter("lineEnding"),t.consume(P),t.exit("lineEnding"),g):n(P):Ge(P)?Xe(t,m,"whitespace")(P):(a+=1,l&&(l=!1,s+=1),P===124?(t.enter("tableCellDivider"),t.consume(P),t.exit("tableCellDivider"),l=!0,m):(t.enter("data"),p(P)))}function p(P){return P===null||P===124||mt(P)?(t.exit("data"),m(P)):(t.consume(P),P===92?_:p)}function _(P){return P===92||P===124?(t.consume(P),p):p(P)}function g(P){return r.interrupt=!1,r.parser.lazy[r.now().line]?n(P):(t.enter("tableDelimiterRow"),l=!1,Ge(P)?Xe(t,v,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(P):v(P))}function v(P){return P===45||P===58?E(P):P===124?(l=!0,t.enter("tableCellDivider"),t.consume(P),t.exit("tableCellDivider"),x):D(P)}function x(P){return Ge(P)?Xe(t,E,"whitespace")(P):E(P)}function E(P){return P===58?(a+=1,l=!0,t.enter("tableDelimiterMarker"),t.consume(P),t.exit("tableDelimiterMarker"),k):P===45?(a+=1,k(P)):P===null||Re(P)?j(P):D(P)}function k(P){return P===45?(t.enter("tableDelimiterFiller"),T(P)):D(P)}function T(P){return P===45?(t.consume(P),T):P===58?(l=!0,t.exit("tableDelimiterFiller"),t.enter("tableDelimiterMarker"),t.consume(P),t.exit("tableDelimiterMarker"),C):(t.exit("tableDelimiterFiller"),C(P))}function C(P){return Ge(P)?Xe(t,j,"whitespace")(P):j(P)}function j(P){return P===124?v(P):P===null||Re(P)?!l||s!==a?D(P):(t.exit("tableDelimiterRow"),t.exit("tableHead"),e(P)):D(P)}function D(P){return n(P)}function I(P){return t.enter("tableRow"),U(P)}function U(P){return P===124?(t.enter("tableCellDivider"),t.consume(P),t.exit("tableCellDivider"),U):P===null||Re(P)?(t.exit("tableRow"),e(P)):Ge(P)?Xe(t,U,"whitespace")(P):(t.enter("data"),V(P))}function V(P){return P===null||P===124||mt(P)?(t.exit("data"),U(P)):(t.consume(P),P===92?H:V)}function H(P){return P===92||P===124?(t.consume(P),V):V(P)}}function yK(t,e){let n=-1,r=!0,s=0,a=[0,0,0,0],l=[0,0,0,0],u=!1,f=0,h,m,p;const _=new hK;for(;++n<t.length;){const g=t[n],v=g[1];g[0]==="enter"?v.type==="tableHead"?(u=!1,f!==0&&(KS(_,e,f,h,m),m=void 0,f=0),h={type:"table",start:Object.assign({},v.start),end:Object.assign({},v.end)},_.add(n,0,[["enter",h,e]])):v.type==="tableRow"||v.type==="tableDelimiterRow"?(r=!0,p=void 0,a=[0,0,0,0],l=[0,n+1,0,0],u&&(u=!1,m={type:"tableBody",start:Object.assign({},v.start),end:Object.assign({},v.end)},_.add(n,0,[["enter",m,e]])),s=v.type==="tableDelimiterRow"?2:m?3:1):s&&(v.type==="data"||v.type==="tableDelimiterMarker"||v.type==="tableDelimiterFiller")?(r=!1,l[2]===0&&(a[1]!==0&&(l[0]=l[1],p=qu(_,e,a,s,void 0,p),a=[0,0,0,0]),l[2]=n)):v.type==="tableCellDivider"&&(r?r=!1:(a[1]!==0&&(l[0]=l[1],p=qu(_,e,a,s,void 0,p)),a=l,l=[a[1],n,0,0])):v.type==="tableHead"?(u=!0,f=n):v.type==="tableRow"||v.type==="tableDelimiterRow"?(f=n,a[1]!==0?(l[0]=l[1],p=qu(_,e,a,s,n,p)):l[1]!==0&&(p=qu(_,e,l,s,n,p)),s=0):s&&(v.type==="data"||v.type==="tableDelimiterMarker"||v.type==="tableDelimiterFiller")&&(l[3]=n)}for(f!==0&&KS(_,e,f,h,m),_.consume(e.events),n=-1;++n<e.events.length;){const g=e.events[n];g[0]==="enter"&&g[1].type==="table"&&(g[1]._align=pK(e.events,n))}return t}function qu(t,e,n,r,s,a){const l=r===1?"tableHeader":r===2?"tableDelimiter":"tableData",u="tableContent";n[0]!==0&&(a.end=Object.assign({},Na(e.events,n[0])),t.add(n[0],0,[["exit",a,e]]));const f=Na(e.events,n[1]);if(a={type:l,start:Object.assign({},f),end:Object.assign({},f)},t.add(n[1],0,[["enter",a,e]]),n[2]!==0){const h=Na(e.events,n[2]),m=Na(e.events,n[3]),p={type:u,start:Object.assign({},h),end:Object.assign({},m)};if(t.add(n[2],0,[["enter",p,e]]),r!==2){const _=e.events[n[2]],g=e.events[n[3]];if(_[1].end=Object.assign({},g[1].end),_[1].type="chunkText",_[1].contentType="text",n[3]>n[2]+1){const v=n[2]+1,x=n[3]-n[2]-1;t.add(v,x,[])}}t.add(n[3]+1,0,[["exit",p,e]])}return s!==void 0&&(a.end=Object.assign({},Na(e.events,s)),t.add(s,0,[["exit",a,e]]),a=void 0),a}function KS(t,e,n,r,s){const a=[],l=Na(e.events,n);s&&(s.end=Object.assign({},l),a.push(["exit",s,e])),r.end=Object.assign({},l),a.push(["exit",r,e]),t.add(n+1,0,a)}function Na(t,e){const n=t[e],r=n[0]==="enter"?"start":"end";return n[1][r]}const _K={name:"tasklistCheck",tokenize:vK};function bK(){return{text:{91:_K}}}function vK(t,e,n){const r=this;return s;function s(f){return r.previous!==null||!r._gfmTasklistFirstContentOfListItem?n(f):(t.enter("taskListCheck"),t.enter("taskListCheckMarker"),t.consume(f),t.exit("taskListCheckMarker"),a)}function a(f){return mt(f)?(t.enter("taskListCheckValueUnchecked"),t.consume(f),t.exit("taskListCheckValueUnchecked"),l):f===88||f===120?(t.enter("taskListCheckValueChecked"),t.consume(f),t.exit("taskListCheckValueChecked"),l):n(f)}function l(f){return f===93?(t.enter("taskListCheckMarker"),t.consume(f),t.exit("taskListCheckMarker"),t.exit("taskListCheck"),u):n(f)}function u(f){return Re(f)?e(f):Ge(f)?t.check({tokenize:xK},e,n)(f):n(f)}}function xK(t,e,n){return Xe(t,r,"whitespace");function r(s){return s===null?n(s):e(s)}}function wK(t){return FT([KG(),rK(),fK(t),mK(),bK()])}const SK={};function kK(t){const e=this,n=t||SK,r=e.data(),s=r.micromarkExtensions||(r.micromarkExtensions=[]),a=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),l=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);s.push(wK(n)),a.push(FG()),l.push(VG(n))}function EK(t){uA(t,[/\r?\n|\r/g,CK])}function CK(){return{type:"break"}}function TK(){return function(t){EK(t)}}const AK={pre:({children:t})=>w.jsx(w.Fragment,{children:t}),li:({children:t,...e})=>w.jsx("li",{className:"py-0.5 ml-0",...e,children:t}),ul:({children:t,...e})=>w.jsx("ul",{className:"list-disc list-outside ml-5 pl-0 my-2",...e,children:t}),ol:({children:t,...e})=>w.jsx("ol",{className:"list-decimal list-outside ml-5 pl-0 my-2",...e,children:t}),strong:({children:t,...e})=>w.jsx("span",{className:"font-semibold",...e,children:t}),a:({children:t,href:e,...n})=>{let r=e||"";return r&&!r.startsWith("http")&&!r.startsWith("#")&&(r=`https://${r}`),w.jsx("a",{className:"text-sky-400 hover:underline",href:r,target:"_blank",rel:"noreferrer noopener",...n,children:t})},h1:({children:t,...e})=>w.jsx("h1",{className:"text-xl font-semibold mt-4 mb-2",...e,children:t}),h2:({children:t,...e})=>w.jsx("h2",{className:"text-lg font-semibold mt-4 mb-2",...e,children:t}),h3:({children:t,...e})=>w.jsx("h3",{className:"text-base font-semibold mt-3 mb-1",...e,children:t}),h4:({children:t,...e})=>w.jsx("h4",{className:"text-sm font-semibold mt-3 mb-1",...e,children:t}),h5:({children:t,...e})=>w.jsx("h5",{className:"text-sm font-semibold mt-2 mb-1",...e,children:t}),h6:({children:t,...e})=>w.jsx("h6",{className:"text-xs font-semibold mt-2 mb-1",...e,children:t}),p:({children:t,...e})=>w.jsx("p",{className:"my-2 leading-relaxed",...e,children:t}),table:({children:t,...e})=>w.jsx("div",{className:"overflow-x-auto my-3",children:w.jsx("table",{className:"w-full border-collapse border border-neutral-600 text-xs",...e,children:t})}),thead:({children:t,...e})=>w.jsx("thead",{className:"bg-neutral-700",...e,children:t}),tbody:({children:t,...e})=>w.jsx("tbody",{...e,children:t}),tr:({children:t,...e})=>w.jsx("tr",{className:"border-b border-neutral-600",...e,children:t}),th:({children:t,...e})=>w.jsx("th",{className:"p-2 text-left font-semibold border-r last:border-r-0 border-neutral-600",...e,children:t}),td:({children:t,...e})=>w.jsx("td",{className:"p-2 border-r last:border-r-0 border-neutral-600",...e,children:t}),blockquote:({children:t,...e})=>w.jsx("blockquote",{className:"border-l-4 border-neutral-500 pl-3 py-1 my-2 italic text-neutral-300",...e,children:t}),hr:({...t})=>w.jsx("hr",{className:"my-4 border-neutral-600",...t}),code({children:t,className:e,...n}){const r=/language-(\w+)/.exec(e||""),s=String(t).replace(/\n$/,""),a=s.includes(`
`);if(!r&&!a)return w.jsx("code",{...n,className:`${e||""} bg-neutral-700 px-1.5 py-0.5 rounded text-xs font-mono text-sky-300`,children:t});const l=r?.[1]||"text";return w.jsxs("div",{className:"my-3",children:[w.jsx("div",{className:"flex items-center justify-between bg-neutral-700 px-3 py-1 rounded-t text-xs text-neutral-400",children:w.jsx("span",{children:l})}),w.jsx("pre",{className:"bg-neutral-800 p-3 rounded-b overflow-x-auto",children:w.jsx("code",{className:"text-xs font-mono text-neutral-200",children:s})})]})}},RK=[kK,TK],OK=t=>{const e=$e.c(6),{children:n}=t;if(!n)return null;let r=n,s;if(e[0]!==r){r=r.replace(/^(#{1,6}\s+.+)\n```/gm,"$1\n\n```");let l;e[3]===Symbol.for("react.memo_cache_sentinel")?(l=/```\n(#{1,6}\s+)/gm,e[3]=l):l=e[3],s=r.replace(l,"```\n\n$1"),e[0]=r,e[1]=s,e[2]=r}else s=e[1],r=e[2];r=s;let a;return e[4]!==r?(a=w.jsx(hH,{remarkPlugins:RK,components:AK,children:r}),e[4]=r,e[5]=a):a=e[5],a},IK=Z.memo(OK,(t,e)=>t.children===e.children);function NK(t){const e=$e.c(85),{isOpen:n,onClose:r,request:s,setters:a}=t,[l,u]=Z.useState(""),[f,h]=Z.useState(),m=Z.useRef(null),p=Z.useRef(null),_=Z.useRef(s.id);let g;e[0]!==s.http?.response?(g=()=>{(async function(){const ye=s.http?.response;if(ye?.body)try{const Ee=await ye.body.text();h(Ee)}catch{h("(unable to read response body)")}else h(void 0)})()},e[0]=s.http?.response,e[1]=g):g=e[1];const v=s.http?.response?.body;let x;e[2]!==v?(x=[v],e[2]=v,e[3]=x):x=e[3],Z.useEffect(g,x);let E;e[4]!==s||e[5]!==f||e[6]!==a?(E={request:s,setters:a,responseBodyText:f},e[4]=s,e[5]=f,e[6]=a,e[7]=E):E=e[7];const k=E;let T;e[8]!==k?(T=pq(k),e[8]=k,e[9]=T):T=e[9];const C=T;let j;if(e[10]!==C){const oe=TB(),ge=CB(oe),ye=mq();j=JP(Ee=>RP({adapter:ge,messages:Ee,tools:C,systemPrompts:[ye],agentLoopStrategy:AE(10)})),e[10]=C,e[11]=j}else j=e[11];const D=j;let I;e[12]!==D||e[13]!==C?(I={connection:D,tools:C},e[12]=D,e[13]=C,e[14]=I):I=e[14];const{messages:U,sendMessage:V,isLoading:H,stop:P,clear:Q}=YP(I);let ne,me;e[15]!==Q||e[16]!==s.id?(ne=()=>{_.current!==s.id&&(Q(),_.current=s.id)},me=[s.id,Q],e[15]=Q,e[16]=s.id,e[17]=ne,e[18]=me):(ne=e[17],me=e[18]),Z.useEffect(ne,me);let z;e[19]===Symbol.for("react.memo_cache_sentinel")?(z=()=>{m.current?.scrollIntoView({behavior:"smooth"})},e[19]=z):z=e[19];let M;e[20]!==U?(M=[U],e[20]=U,e[21]=M):M=e[21],Z.useEffect(z,M);let B,G;e[22]!==n?(B=()=>{n&&p.current?.focus()},G=[n],e[22]=n,e[23]=B,e[24]=G):(B=e[23],G=e[24]),Z.useEffect(B,G);let re;e[25]!==l||e[26]!==H||e[27]!==V?(re=oe=>{oe.preventDefault(),!(!l.trim()||H)&&(V(l.trim()),u(""))},e[25]=l,e[26]=H,e[27]=V,e[28]=re):re=e[28];const J=re;let R;e[29]!==J?(R=oe=>{oe.key==="Enter"&&!oe.shiftKey&&(oe.preventDefault(),J(oe))},e[29]=J,e[30]=R):R=e[30];const N=R,F=MK;let O;e[31]!==H||e[32]!==U?(O=(oe,ge)=>H&&oe.role==="assistant"&&ge===U.length-1,e[31]=H,e[32]=U,e[33]=O):O=e[33];const ie=O;if(!n)return null;let pe;e[34]===Symbol.for("react.memo_cache_sentinel")?(pe=w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx(zl,{size:16,className:"text-amber-500"}),w.jsx("h3",{className:"font-medium text-neutral-900 dark:text-neutral-100",children:lS.name})]}),e[34]=pe):pe=e[34];let de;e[35]===Symbol.for("react.memo_cache_sentinel")?(de=w.jsx(nh,{size:16}),e[35]=de):de=e[35];let we;e[36]!==Q?(we=w.jsx("button",{onClick:Q,className:"p-1.5 text-neutral-500 hover:text-neutral-900 hover:bg-neutral-100 dark:hover:text-neutral-300 dark:hover:bg-neutral-800 rounded transition-colors",title:"Clear chat",children:de}),e[36]=Q,e[37]=we):we=e[37];let Me;e[38]===Symbol.for("react.memo_cache_sentinel")?(Me=w.jsx(wy,{size:16}),e[38]=Me):Me=e[38];let Ae;e[39]!==r?(Ae=w.jsx("button",{onClick:r,className:"p-1.5 text-neutral-500 hover:text-neutral-900 hover:bg-neutral-100 dark:hover:text-neutral-300 dark:hover:bg-neutral-800 rounded transition-colors",children:Me}),e[39]=r,e[40]=Ae):Ae=e[40];let rt;e[41]!==we||e[42]!==Ae?(rt=w.jsxs("div",{className:"shrink-0 h-12 px-4 flex items-center justify-between border-b border-neutral-200 dark:border-neutral-800",children:[pe,w.jsxs("div",{className:"flex items-center gap-1",children:[we,Ae]})]}),e[41]=we,e[42]=Ae,e[43]=rt):rt=e[43];let ht;e[44]!==U.length?(ht=U.length===0&&w.jsxs("div",{className:"text-center text-neutral-500 dark:text-neutral-400 text-sm py-8",children:[w.jsx(zl,{size:24,className:"mx-auto mb-3 text-amber-500/50"}),w.jsx("p",{className:"mb-2",children:"Ask me to help build your request"}),w.jsx("p",{className:"text-xs text-neutral-400 dark:text-neutral-500",children:'Examples: "Create a POST request to /api/users with a JSON body" or "Add an Authorization header"'})]}),e[44]=U.length,e[45]=ht):ht=e[45];let St;if(e[46]!==ie||e[47]!==U){let oe;e[49]!==ie?(oe=(ge,ye)=>{const Ee=F(ge);return w.jsx("div",{className:`text-sm ${ge.role==="user"?"bg-neutral-100 dark:bg-neutral-800 rounded-lg px-3 py-2":""}`,children:w.jsx("div",{className:ge.role==="user"?"text-neutral-900 dark:text-neutral-100":"text-neutral-700 dark:text-neutral-300",children:ge.role==="assistant"?Ee?w.jsx(IK,{children:Ee}):ie(ge,ye)?w.jsxs("span",{className:"flex items-center gap-2 text-neutral-400",children:[w.jsx(vf,{size:14,className:"animate-spin"}),"Thinking..."]}):null:w.jsx("span",{className:"whitespace-pre-wrap",children:Ee})})},ge.id)},e[49]=ie,e[50]=oe):oe=e[50],St=U.map(oe),e[46]=ie,e[47]=U,e[48]=St}else St=e[48];let tn;e[51]!==H||e[52]!==U?(tn=H&&(U.length===0||U[U.length-1]?.role==="user")&&w.jsx("div",{className:"text-sm",children:w.jsx("div",{className:"text-neutral-800 dark:text-neutral-200",children:w.jsxs("span",{className:"flex items-center gap-2 text-neutral-400",children:[w.jsx(vf,{size:14,className:"animate-spin"}),"Thinking..."]})})}),e[51]=H,e[52]=U,e[53]=tn):tn=e[53];let Pt;e[54]===Symbol.for("react.memo_cache_sentinel")?(Pt=w.jsx("div",{ref:m}),e[54]=Pt):Pt=e[54];let At;e[55]!==ht||e[56]!==St||e[57]!==tn?(At=w.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 min-h-0",children:[ht,St,tn,Pt]}),e[55]=ht,e[56]=St,e[57]=tn,e[58]=At):At=e[58];let On;e[59]===Symbol.for("react.memo_cache_sentinel")?(On=oe=>u(oe.target.value),e[59]=On):On=e[59];let De;e[60]===Symbol.for("react.memo_cache_sentinel")?(De={maxHeight:"120px"},e[60]=De):De=e[60];let it;e[61]!==N||e[62]!==l||e[63]!==H?(it=w.jsx("textarea",{ref:p,value:l,onChange:On,onKeyDown:N,placeholder:lS.placeholder,rows:1,disabled:H,className:"flex-1 px-3 py-2 bg-neutral-50 border border-neutral-200 dark:bg-neutral-800 dark:border-neutral-700 rounded-lg text-neutral-900 dark:text-neutral-100 text-sm placeholder-neutral-400 resize-none focus:outline-none focus:ring-2 focus:ring-amber-500/50 focus:border-amber-500 disabled:opacity-50",style:De}),e[61]=N,e[62]=l,e[63]=H,e[64]=it):it=e[64];const We=H?"button":"submit",wn=H?P:void 0;let _e;e[65]!==l||e[66]!==H?(_e=!H&&!l.trim(),e[65]=l,e[66]=H,e[67]=_e):_e=e[67];let Le;e[68]!==H?(Le=H?w.jsx(EL,{size:16}):w.jsx(bL,{size:16}),e[68]=H,e[69]=Le):Le=e[69];let qe;e[70]!==We||e[71]!==wn||e[72]!==_e||e[73]!==Le?(qe=w.jsx("button",{type:We,onClick:wn,disabled:_e,className:"p-2 bg-amber-500 hover:bg-amber-400 disabled:bg-neutral-300 dark:disabled:bg-neutral-700 disabled:text-neutral-500 text-white rounded-lg transition-colors",children:Le}),e[70]=We,e[71]=wn,e[72]=_e,e[73]=Le,e[74]=qe):qe=e[74];let be;e[75]!==it||e[76]!==qe?(be=w.jsxs("div",{className:"flex items-end gap-2",children:[it,qe]}),e[75]=it,e[76]=qe,e[77]=be):be=e[77];let et;e[78]!==J||e[79]!==be?(et=w.jsx("form",{onSubmit:J,className:"shrink-0 p-3 border-t border-neutral-200 dark:border-neutral-800",children:be}),e[78]=J,e[79]=be,e[80]=et):et=e[80];let te;return e[81]!==rt||e[82]!==At||e[83]!==et?(te=w.jsxs("div",{className:"w-96 shrink-0 bg-white border border-neutral-200 dark:bg-neutral-900 dark:border-neutral-800 flex flex-col rounded-xl overflow-hidden",children:[rt,At,et]}),e[81]=rt,e[82]=At,e[83]=et,e[84]=te):te=e[84],te}function MK(t){return t.parts.filter(LK).map(DK).join("").replace(/^undefined/,"")}function DK(t){return t.content}function LK(t){return t.type==="text"&&!!t.content}function zK(){const t=$e.c(13),{request:e,aiPanelOpen:n,toggleAiPanel:r,setMethod:s,setUrl:a,setHeaders:l,setQuery:u,setBody:f}=rr();let h;t[0]===Symbol.for("react.memo_cache_sentinel")?(h=w.jsx(qL,{}),t[0]=h):h=t[0];let m;t[1]===Symbol.for("react.memo_cache_sentinel")?(m=w.jsx("div",{className:"flex-1 flex flex-col overflow-hidden gap-2 min-w-0",children:w.jsx("div",{className:"flex-1 overflow-hidden min-h-0",children:w.jsx(SP,{})})}),t[1]=m):m=t[1];let p;t[2]!==n||t[3]!==e||t[4]!==f||t[5]!==l||t[6]!==s||t[7]!==u||t[8]!==a||t[9]!==r?(p=n&&Sy().ai?.model&&w.jsx(NK,{isOpen:n,onClose:r,request:e,setters:{setMethod:s,setUrl:a,setHeaders:l,setQuery:u,setBody:f}}),t[2]=n,t[3]=e,t[4]=f,t[5]=l,t[6]=s,t[7]=u,t[8]=a,t[9]=r,t[10]=p):p=t[10];let _;return t[11]!==p?(_=w.jsxs("div",{className:"h-screen flex bg-neutral-50 dark:bg-[#0d0d0d] py-2 pr-2 pl-1 gap-2 text-neutral-900 dark:text-neutral-100",children:[h,m,p]}),t[11]=p,t[12]=_):_=t[12],_}function jK(){const t=$e.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=w.jsx(T4,{children:w.jsx(R4,{children:w.jsx(zK,{})})}),t[0]=e):e=t[0],e}VL().then(()=>{nO.createRoot(document.getElementById("root")).render(w.jsx(Z.StrictMode,{children:w.jsx(AO,{client:Sk,children:w.jsx(jK,{})})}))});
