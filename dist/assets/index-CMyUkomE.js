const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/angular-html-CU67Zn6k.js","assets/html-GMplVEZG.js","assets/javascript-wDzz0qaB.js","assets/css-DPfMkruS.js","assets/angular-ts-BwZT4LLn.js","assets/scss-OYdSNvt2.js","assets/apl-dKokRX4l.js","assets/xml-sdJ4AIDG.js","assets/java-CylS5w8V.js","assets/json-Cp-IABpG.js","assets/astro-CbQHKStN.js","assets/typescript-BPQ3VLAy.js","assets/postcss-CXtECtnM.js","assets/tsx-COt5Ahok.js","assets/blade-DVc8C-J4.js","assets/html-derivative-BFtXZ54Q.js","assets/sql-BLtJtn59.js","assets/bsl-BO_Y6i37.js","assets/sdbl-DVxCFoDh.js","assets/cairo-KRGpt6FW.js","assets/python-B6aJPvgy.js","assets/cobol-nwyudZeR.js","assets/coffee-Ch7k5sss.js","assets/cpp-CofmeUqb.js","assets/regexp-CDVJQ6XC.js","assets/glsl-DplSGwfg.js","assets/c-BIGW1oBm.js","assets/crystal-tKQVLTB8.js","assets/shellscript-Yzrsuije.js","assets/edge-BkV0erSs.js","assets/elixir-CDX3lj18.js","assets/elm-DbKCFpqz.js","assets/erb-BOJIQeun.js","assets/ruby-BvKwtOVI.js","assets/haml-B8DHNrY2.js","assets/graphql-ChdNCCLP.js","assets/jsx-g9-lgVsj.js","assets/lua-BbnMAYS6.js","assets/yaml-Buea-lGh.js","assets/erlang-DsQrWhSR.js","assets/markdown-Cvjx9yec.js","assets/fortran-fixed-form-BZjJHVRy.js","assets/fortran-free-form-D22FLkUw.js","assets/fsharp-CXgrBDvD.js","assets/gdresource-B7Tvp0Sc.js","assets/gdshader-DkwncUOv.js","assets/gdscript-DTMYz4Jt.js","assets/git-commit-F4YmCXRG.js","assets/diff-D97Zzqfu.js","assets/git-rebase-r7XF79zn.js","assets/glimmer-js-Rg0-pVw9.js","assets/glimmer-ts-U6CK756n.js","assets/hack-CaT9iCJl.js","assets/handlebars-BL8al0AC.js","assets/http-jrhK8wxY.js","assets/hurl-irOxFIW8.js","assets/csv-fuZLfV_i.js","assets/hxml-Bvhsp5Yf.js","assets/haxe-CzTSHFRz.js","assets/jinja-4LBKfQ-Z.js","assets/jison-wvAkD_A8.js","assets/julia-C8NyazO9.js","assets/r-DiinP2Uv.js","assets/latex-BdAV_C_H.js","assets/tex-CxkMU7Pf.js","assets/liquid-DYVedYrR.js","assets/marko-CPi9NSCl.js","assets/less-B1dDrJ26.js","assets/mdc-DUICxH0z.js","assets/nginx-DknmC5AR.js","assets/nim-CVrawwO9.js","assets/perl-C0TMdlhV.js","assets/php-CDn_0X-4.js","assets/pug-CGlum2m_.js","assets/qml-3beO22l8.js","assets/razor-CE9lU5zL.js","assets/csharp-K5feNrxe.js","assets/rst-B0xPkSld.js","assets/cmake-D1j8_8rp.js","assets/sas-cz2c8ADy.js","assets/shaderlab-Dg9Lc6iA.js","assets/hlsl-D3lLCCz7.js","assets/shellsession-BADoaaVG.js","assets/soy-Brmx7dQM.js","assets/sparql-rVzFXLq3.js","assets/turtle-BsS91CYL.js","assets/stata-BH5u7GGu.js","assets/svelte-3Dk4HxPD.js","assets/templ-W15q3VgB.js","assets/go-Dn2_MT6a.js","assets/ts-tags-zn1MmPIZ.js","assets/twig-CO9l9SDP.js","assets/vue-DnHKYNfI.js","assets/vue-html-CChd_i61.js","assets/vue-vine-8moa0y9V.js","assets/stylus-BEDo0Tqx.js","assets/xsl-CtQFsRM5.js"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();function tk(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Hp={exports:{}},rl={};var jx;function eO(){if(jx)return rl;jx=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,s,a){var l=null;if(a!==void 0&&(l=""+a),s.key!==void 0&&(l=""+s.key),"key"in s){a={};for(var u in s)u!=="key"&&(a[u]=s[u])}else a=s;return s=a.ref,{$$typeof:t,type:r,key:l,ref:s!==void 0?s:null,props:a}}return rl.Fragment=e,rl.jsx=n,rl.jsxs=n,rl}var Lx;function tO(){return Lx||(Lx=1,Hp.exports=eO()),Hp.exports}var w=tO(),Gp={exports:{}},Le={};var zx;function nO(){if(zx)return Le;zx=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),p=Symbol.for("react.activity"),y=Symbol.iterator;function g(D){return D===null||typeof D!="object"?null:(D=y&&D[y]||D["@@iterator"],typeof D=="function"?D:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,C={};function k(D,V,S){this.props=D,this.context=V,this.refs=C,this.updater=S||v}k.prototype.isReactComponent={},k.prototype.setState=function(D,V){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,V,"setState")},k.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function T(){}T.prototype=k.prototype;function A(D,V,S){this.props=D,this.context=V,this.refs=C,this.updater=S||v}var M=A.prototype=new T;M.constructor=A,x(M,k.prototype),M.isPureReactComponent=!0;var I=Array.isArray;function O(){}var B={H:null,A:null,T:null,S:null},U=Object.prototype.hasOwnProperty;function K(D,V,S){var z=S.ref;return{$$typeof:t,type:D,key:V,ref:z!==void 0?z:null,props:S}}function j(D,V){return K(D.type,V,D.props)}function J(D){return typeof D=="object"&&D!==null&&D.$$typeof===t}function ne(D){var V={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(S){return V[S]})}var he=/\/+/g;function Y(D,V){return typeof D=="object"&&D!==null&&D.key!=null?ne(""+D.key):V.toString(36)}function q(D){switch(D.status){case"fulfilled":return D.value;case"rejected":throw D.reason;default:switch(typeof D.status=="string"?D.then(O,O):(D.status="pending",D.then(function(V){D.status==="pending"&&(D.status="fulfilled",D.value=V)},function(V){D.status==="pending"&&(D.status="rejected",D.reason=V)})),D.status){case"fulfilled":return D.value;case"rejected":throw D.reason}}throw D}function P(D,V,S,z,le){var de=typeof D;(de==="undefined"||de==="boolean")&&(D=null);var ye=!1;if(D===null)ye=!0;else switch(de){case"bigint":case"string":case"number":ye=!0;break;case"object":switch(D.$$typeof){case t:case e:ye=!0;break;case m:return ye=D._init,P(ye(D._payload),V,S,z,le)}}if(ye)return le=le(D),ye=z===""?"."+Y(D,0):z,I(le)?(S="",ye!=null&&(S=ye.replace(he,"$&/")+"/"),P(le,V,S,"",function(Pe){return Pe})):le!=null&&(J(le)&&(le=j(le,S+(le.key==null||D&&D.key===le.key?"":(""+le.key).replace(he,"$&/")+"/")+ye)),V.push(le)),1;ye=0;var _e=z===""?".":z+":";if(I(D))for(var ve=0;ve<D.length;ve++)z=D[ve],de=_e+Y(z,ve),ye+=P(z,V,S,de,le);else if(ve=g(D),typeof ve=="function")for(D=ve.call(D),ve=0;!(z=D.next()).done;)z=z.value,de=_e+Y(z,ve++),ye+=P(z,V,S,de,le);else if(de==="object"){if(typeof D.then=="function")return P(q(D),V,S,z,le);throw V=String(D),Error("Objects are not valid as a React child (found: "+(V==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":V)+"). If you meant to render a collection of children, use an array instead.")}return ye}function H(D,V,S){if(D==null)return D;var z=[],le=0;return P(D,z,"","",function(de){return V.call(S,de,le++)}),z}function ie(D){if(D._status===-1){var V=D._result;V=V(),V.then(function(S){(D._status===0||D._status===-1)&&(D._status=1,D._result=S)},function(S){(D._status===0||D._status===-1)&&(D._status=2,D._result=S)}),D._status===-1&&(D._status=0,D._result=V)}if(D._status===1)return D._result.default;throw D._result}var re=typeof reportError=="function"?reportError:function(D){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var V=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof D=="object"&&D!==null&&typeof D.message=="string"?String(D.message):String(D),error:D});if(!window.dispatchEvent(V))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",D);return}console.error(D)},N={map:H,forEach:function(D,V,S){H(D,function(){V.apply(this,arguments)},S)},count:function(D){var V=0;return H(D,function(){V++}),V},toArray:function(D){return H(D,function(V){return V})||[]},only:function(D){if(!J(D))throw Error("React.Children.only expected to receive a single React element child.");return D}};return Le.Activity=p,Le.Children=N,Le.Component=k,Le.Fragment=n,Le.Profiler=s,Le.PureComponent=A,Le.StrictMode=r,Le.Suspense=f,Le.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=B,Le.__COMPILER_RUNTIME={__proto__:null,c:function(D){return B.H.useMemoCache(D)}},Le.cache=function(D){return function(){return D.apply(null,arguments)}},Le.cacheSignal=function(){return null},Le.cloneElement=function(D,V,S){if(D==null)throw Error("The argument must be a React element, but you passed "+D+".");var z=x({},D.props),le=D.key;if(V!=null)for(de in V.key!==void 0&&(le=""+V.key),V)!U.call(V,de)||de==="key"||de==="__self"||de==="__source"||de==="ref"&&V.ref===void 0||(z[de]=V[de]);var de=arguments.length-2;if(de===1)z.children=S;else if(1<de){for(var ye=Array(de),_e=0;_e<de;_e++)ye[_e]=arguments[_e+2];z.children=ye}return K(D.type,le,z)},Le.createContext=function(D){return D={$$typeof:l,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null},D.Provider=D,D.Consumer={$$typeof:a,_context:D},D},Le.createElement=function(D,V,S){var z,le={},de=null;if(V!=null)for(z in V.key!==void 0&&(de=""+V.key),V)U.call(V,z)&&z!=="key"&&z!=="__self"&&z!=="__source"&&(le[z]=V[z]);var ye=arguments.length-2;if(ye===1)le.children=S;else if(1<ye){for(var _e=Array(ye),ve=0;ve<ye;ve++)_e[ve]=arguments[ve+2];le.children=_e}if(D&&D.defaultProps)for(z in ye=D.defaultProps,ye)le[z]===void 0&&(le[z]=ye[z]);return K(D,de,le)},Le.createRef=function(){return{current:null}},Le.forwardRef=function(D){return{$$typeof:u,render:D}},Le.isValidElement=J,Le.lazy=function(D){return{$$typeof:m,_payload:{_status:-1,_result:D},_init:ie}},Le.memo=function(D,V){return{$$typeof:d,type:D,compare:V===void 0?null:V}},Le.startTransition=function(D){var V=B.T,S={};B.T=S;try{var z=D(),le=B.S;le!==null&&le(S,z),typeof z=="object"&&z!==null&&typeof z.then=="function"&&z.then(O,re)}catch(de){re(de)}finally{V!==null&&S.types!==null&&(V.types=S.types),B.T=V}},Le.unstable_useCacheRefresh=function(){return B.H.useCacheRefresh()},Le.use=function(D){return B.H.use(D)},Le.useActionState=function(D,V,S){return B.H.useActionState(D,V,S)},Le.useCallback=function(D,V){return B.H.useCallback(D,V)},Le.useContext=function(D){return B.H.useContext(D)},Le.useDebugValue=function(){},Le.useDeferredValue=function(D,V){return B.H.useDeferredValue(D,V)},Le.useEffect=function(D,V){return B.H.useEffect(D,V)},Le.useEffectEvent=function(D){return B.H.useEffectEvent(D)},Le.useId=function(){return B.H.useId()},Le.useImperativeHandle=function(D,V,S){return B.H.useImperativeHandle(D,V,S)},Le.useInsertionEffect=function(D,V){return B.H.useInsertionEffect(D,V)},Le.useLayoutEffect=function(D,V){return B.H.useLayoutEffect(D,V)},Le.useMemo=function(D,V){return B.H.useMemo(D,V)},Le.useOptimistic=function(D,V){return B.H.useOptimistic(D,V)},Le.useReducer=function(D,V,S){return B.H.useReducer(D,V,S)},Le.useRef=function(D){return B.H.useRef(D)},Le.useState=function(D){return B.H.useState(D)},Le.useSyncExternalStore=function(D,V,S){return B.H.useSyncExternalStore(D,V,S)},Le.useTransition=function(){return B.H.useTransition()},Le.version="19.2.3",Le}var Px;function nd(){return Px||(Px=1,Gp.exports=nO()),Gp.exports}var G=nd(),Kp={exports:{}},sl={},Zp={exports:{}},Qp={};var Bx;function rO(){return Bx||(Bx=1,(function(t){function e(P,H){var ie=P.length;P.push(H);e:for(;0<ie;){var re=ie-1>>>1,N=P[re];if(0<s(N,H))P[re]=H,P[ie]=N,ie=re;else break e}}function n(P){return P.length===0?null:P[0]}function r(P){if(P.length===0)return null;var H=P[0],ie=P.pop();if(ie!==H){P[0]=ie;e:for(var re=0,N=P.length,D=N>>>1;re<D;){var V=2*(re+1)-1,S=P[V],z=V+1,le=P[z];if(0>s(S,ie))z<N&&0>s(le,S)?(P[re]=le,P[z]=ie,re=z):(P[re]=S,P[V]=ie,re=V);else if(z<N&&0>s(le,ie))P[re]=le,P[z]=ie,re=z;else break e}}return H}function s(P,H){var ie=P.sortIndex-H.sortIndex;return ie!==0?ie:P.id-H.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var l=Date,u=l.now();t.unstable_now=function(){return l.now()-u}}var f=[],d=[],m=1,p=null,y=3,g=!1,v=!1,x=!1,C=!1,k=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;function M(P){for(var H=n(d);H!==null;){if(H.callback===null)r(d);else if(H.startTime<=P)r(d),H.sortIndex=H.expirationTime,e(f,H);else break;H=n(d)}}function I(P){if(x=!1,M(P),!v)if(n(f)!==null)v=!0,O||(O=!0,ne());else{var H=n(d);H!==null&&q(I,H.startTime-P)}}var O=!1,B=-1,U=5,K=-1;function j(){return C?!0:!(t.unstable_now()-K<U)}function J(){if(C=!1,O){var P=t.unstable_now();K=P;var H=!0;try{e:{v=!1,x&&(x=!1,T(B),B=-1),g=!0;var ie=y;try{t:{for(M(P),p=n(f);p!==null&&!(p.expirationTime>P&&j());){var re=p.callback;if(typeof re=="function"){p.callback=null,y=p.priorityLevel;var N=re(p.expirationTime<=P);if(P=t.unstable_now(),typeof N=="function"){p.callback=N,M(P),H=!0;break t}p===n(f)&&r(f),M(P)}else r(f);p=n(f)}if(p!==null)H=!0;else{var D=n(d);D!==null&&q(I,D.startTime-P),H=!1}}break e}finally{p=null,y=ie,g=!1}H=void 0}}finally{H?ne():O=!1}}}var ne;if(typeof A=="function")ne=function(){A(J)};else if(typeof MessageChannel<"u"){var he=new MessageChannel,Y=he.port2;he.port1.onmessage=J,ne=function(){Y.postMessage(null)}}else ne=function(){k(J,0)};function q(P,H){B=k(function(){P(t.unstable_now())},H)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(P){P.callback=null},t.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):U=0<P?Math.floor(1e3/P):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_next=function(P){switch(y){case 1:case 2:case 3:var H=3;break;default:H=y}var ie=y;y=H;try{return P()}finally{y=ie}},t.unstable_requestPaint=function(){C=!0},t.unstable_runWithPriority=function(P,H){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var ie=y;y=P;try{return H()}finally{y=ie}},t.unstable_scheduleCallback=function(P,H,ie){var re=t.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?re+ie:re):ie=re,P){case 1:var N=-1;break;case 2:N=250;break;case 5:N=1073741823;break;case 4:N=1e4;break;default:N=5e3}return N=ie+N,P={id:m++,callback:H,priorityLevel:P,startTime:ie,expirationTime:N,sortIndex:-1},ie>re?(P.sortIndex=ie,e(d,P),n(f)===null&&P===n(d)&&(x?(T(B),B=-1):x=!0,q(I,ie-re))):(P.sortIndex=N,e(f,P),v||g||(v=!0,O||(O=!0,ne()))),P},t.unstable_shouldYield=j,t.unstable_wrapCallback=function(P){var H=y;return function(){var ie=y;y=H;try{return P.apply(this,arguments)}finally{y=ie}}}})(Qp)),Qp}var $x;function sO(){return $x||($x=1,Zp.exports=rO()),Zp.exports}var Jp={exports:{}},vn={};var Ux;function iO(){if(Ux)return vn;Ux=1;var t=nd();function e(f){var d="https://react.dev/errors/"+f;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)d+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+f+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},s=Symbol.for("react.portal");function a(f,d,m){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:p==null?null:""+p,children:f,containerInfo:d,implementation:m}}var l=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(f,d){if(f==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return vn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,vn.createPortal=function(f,d){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(e(299));return a(f,d,null,m)},vn.flushSync=function(f){var d=l.T,m=r.p;try{if(l.T=null,r.p=2,f)return f()}finally{l.T=d,r.p=m,r.d.f()}},vn.preconnect=function(f,d){typeof f=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,r.d.C(f,d))},vn.prefetchDNS=function(f){typeof f=="string"&&r.d.D(f)},vn.preinit=function(f,d){if(typeof f=="string"&&d&&typeof d.as=="string"){var m=d.as,p=u(m,d.crossOrigin),y=typeof d.integrity=="string"?d.integrity:void 0,g=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;m==="style"?r.d.S(f,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:p,integrity:y,fetchPriority:g}):m==="script"&&r.d.X(f,{crossOrigin:p,integrity:y,fetchPriority:g,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},vn.preinitModule=function(f,d){if(typeof f=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var m=u(d.as,d.crossOrigin);r.d.M(f,{crossOrigin:m,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&r.d.M(f)},vn.preload=function(f,d){if(typeof f=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var m=d.as,p=u(m,d.crossOrigin);r.d.L(f,m,{crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},vn.preloadModule=function(f,d){if(typeof f=="string")if(d){var m=u(d.as,d.crossOrigin);r.d.m(f,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:m,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else r.d.m(f)},vn.requestFormReset=function(f){r.d.r(f)},vn.unstable_batchedUpdates=function(f,d){return f(d)},vn.useFormState=function(f,d,m){return l.H.useFormState(f,d,m)},vn.useFormStatus=function(){return l.H.useHostTransitionStatus()},vn.version="19.2.3",vn}var qx;function nk(){if(qx)return Jp.exports;qx=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Jp.exports=iO(),Jp.exports}var Fx;function aO(){if(Fx)return sl;Fx=1;var t=sO(),e=nd(),n=nk();function r(i){var o="https://react.dev/errors/"+i;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)o+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function a(i){var o=i,c=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,(o.flags&4098)!==0&&(c=o.return),i=o.return;while(i)}return o.tag===3?c:null}function l(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function u(i){if(i.tag===31){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function f(i){if(a(i)!==i)throw Error(r(188))}function d(i){var o=i.alternate;if(!o){if(o=a(i),o===null)throw Error(r(188));return o!==i?null:i}for(var c=i,h=o;;){var b=c.return;if(b===null)break;var _=b.alternate;if(_===null){if(h=b.return,h!==null){c=h;continue}break}if(b.child===_.child){for(_=b.child;_;){if(_===c)return f(b),i;if(_===h)return f(b),o;_=_.sibling}throw Error(r(188))}if(c.return!==h.return)c=b,h=_;else{for(var E=!1,R=b.child;R;){if(R===c){E=!0,c=b,h=_;break}if(R===h){E=!0,h=b,c=_;break}R=R.sibling}if(!E){for(R=_.child;R;){if(R===c){E=!0,c=_,h=b;break}if(R===h){E=!0,h=_,c=b;break}R=R.sibling}if(!E)throw Error(r(189))}}if(c.alternate!==h)throw Error(r(190))}if(c.tag!==3)throw Error(r(188));return c.stateNode.current===c?i:o}function m(i){var o=i.tag;if(o===5||o===26||o===27||o===6)return i;for(i=i.child;i!==null;){if(o=m(i),o!==null)return o;i=i.sibling}return null}var p=Object.assign,y=Symbol.for("react.element"),g=Symbol.for("react.transitional.element"),v=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),T=Symbol.for("react.consumer"),A=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),O=Symbol.for("react.suspense_list"),B=Symbol.for("react.memo"),U=Symbol.for("react.lazy"),K=Symbol.for("react.activity"),j=Symbol.for("react.memo_cache_sentinel"),J=Symbol.iterator;function ne(i){return i===null||typeof i!="object"?null:(i=J&&i[J]||i["@@iterator"],typeof i=="function"?i:null)}var he=Symbol.for("react.client.reference");function Y(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===he?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case x:return"Fragment";case k:return"Profiler";case C:return"StrictMode";case I:return"Suspense";case O:return"SuspenseList";case K:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case v:return"Portal";case A:return i.displayName||"Context";case T:return(i._context.displayName||"Context")+".Consumer";case M:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case B:return o=i.displayName||null,o!==null?o:Y(i.type)||"Memo";case U:o=i._payload,i=i._init;try{return Y(i(o))}catch{}}return null}var q=Array.isArray,P=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,H=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ie={pending:!1,data:null,method:null,action:null},re=[],N=-1;function D(i){return{current:i}}function V(i){0>N||(i.current=re[N],re[N]=null,N--)}function S(i,o){N++,re[N]=i.current,i.current=o}var z=D(null),le=D(null),de=D(null),ye=D(null);function _e(i,o){switch(S(de,o),S(le,i),S(z,null),o.nodeType){case 9:case 11:i=(i=o.documentElement)&&(i=i.namespaceURI)?sx(i):0;break;default:if(i=o.tagName,o=o.namespaceURI)o=sx(o),i=ix(o,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}V(z),S(z,i)}function ve(){V(z),V(le),V(de)}function Pe(i){i.memoizedState!==null&&S(ye,i);var o=z.current,c=ix(o,i.type);o!==c&&(S(le,i),S(z,c))}function tt(i){le.current===i&&(V(z),V(le)),ye.current===i&&(V(ye),Wo._currentValue=ie)}var kt,Yt;function Tt(i){if(kt===void 0)try{throw Error()}catch(c){var o=c.stack.trim().match(/\n( *(at )?)/);kt=o&&o[1]||"",Yt=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+kt+i+Yt}var yn=!1;function Xt(i,o){if(!i||yn)return"";yn=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(o){var ue=function(){throw Error()};if(Object.defineProperty(ue.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ue,[])}catch(se){var te=se}Reflect.construct(i,[],ue)}else{try{ue.call()}catch(se){te=se}i.call(ue.prototype)}}else{try{throw Error()}catch(se){te=se}(ue=i())&&typeof ue.catch=="function"&&ue.catch(function(){})}}catch(se){if(se&&te&&typeof se.stack=="string")return[se.stack,te.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var b=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");b&&b.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=h.DetermineComponentFrameRoot(),E=_[0],R=_[1];if(E&&R){var $=E.split(`
`),W=R.split(`
`);for(b=h=0;h<$.length&&!$[h].includes("DetermineComponentFrameRoot");)h++;for(;b<W.length&&!W[b].includes("DetermineComponentFrameRoot");)b++;if(h===$.length||b===W.length)for(h=$.length-1,b=W.length-1;1<=h&&0<=b&&$[h]!==W[b];)b--;for(;1<=h&&0<=b;h--,b--)if($[h]!==W[b]){if(h!==1||b!==1)do if(h--,b--,0>b||$[h]!==W[b]){var ae=`
`+$[h].replace(" at new "," at ");return i.displayName&&ae.includes("<anonymous>")&&(ae=ae.replace("<anonymous>",i.displayName)),ae}while(1<=h&&0<=b);break}}}finally{yn=!1,Error.prepareStackTrace=c}return(c=i?i.displayName||i.name:"")?Tt(c):""}function Gn(i,o){switch(i.tag){case 26:case 27:case 5:return Tt(i.type);case 16:return Tt("Lazy");case 13:return i.child!==o&&o!==null?Tt("Suspense Fallback"):Tt("Suspense");case 19:return Tt("SuspenseList");case 0:case 15:return Xt(i.type,!1);case 11:return Xt(i.type.render,!1);case 1:return Xt(i.type,!0);case 31:return Tt("Activity");default:return""}}function bn(i){try{var o="",c=null;do o+=Gn(i,c),c=i,i=i.return;while(i);return o}catch(h){return`
Error generating stack: `+h.message+`
`+h.stack}}var _n=Object.prototype.hasOwnProperty,Kn=t.unstable_scheduleCallback,Se=t.unstable_cancelCallback,Ve=t.unstable_shouldYield,Ke=t.unstable_requestPaint,Ce=t.unstable_now,_t=t.unstable_getCurrentPriorityLevel,Z=t.unstable_ImmediatePriority,ce=t.unstable_UserBlockingPriority,pe=t.unstable_NormalPriority,be=t.unstable_LowPriority,ke=t.unstable_IdlePriority,He=t.log,Et=t.unstable_setDisableYieldValue,rt=null,Ne=null;function ze(i){if(typeof He=="function"&&Et(i),Ne&&typeof Ne.setStrictMode=="function")try{Ne.setStrictMode(rt,i)}catch{}}var Ie=Math.clz32?Math.clz32:It,lt=Math.log,Ge=Math.LN2;function It(i){return i>>>=0,i===0?32:31-(lt(i)/Ge|0)|0}var Zn=256,cr=262144,jr=4194304;function dt(i){var o=i&42;if(o!==0)return o;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function ci(i,o,c){var h=i.pendingLanes;if(h===0)return 0;var b=0,_=i.suspendedLanes,E=i.pingedLanes;i=i.warmLanes;var R=h&134217727;return R!==0?(h=R&~_,h!==0?b=dt(h):(E&=R,E!==0?b=dt(E):c||(c=R&~i,c!==0&&(b=dt(c))))):(R=h&~_,R!==0?b=dt(R):E!==0?b=dt(E):c||(c=h&~i,c!==0&&(b=dt(c)))),b===0?0:o!==0&&o!==b&&(o&_)===0&&(_=b&-b,c=o&-o,_>=c||_===32&&(c&4194048)!==0)?o:b}function Hi(i,o){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&o)===0}function ks(i,o){switch(i){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function B0(){var i=jr;return jr<<=1,(jr&62914560)===0&&(jr=4194304),i}function Md(i){for(var o=[],c=0;31>c;c++)o.push(i);return o}function ho(i,o){i.pendingLanes|=o,o!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function qA(i,o,c,h,b,_){var E=i.pendingLanes;i.pendingLanes=c,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=c,i.entangledLanes&=c,i.errorRecoveryDisabledLanes&=c,i.shellSuspendCounter=0;var R=i.entanglements,$=i.expirationTimes,W=i.hiddenUpdates;for(c=E&~c;0<c;){var ae=31-Ie(c),ue=1<<ae;R[ae]=0,$[ae]=-1;var te=W[ae];if(te!==null)for(W[ae]=null,ae=0;ae<te.length;ae++){var se=te[ae];se!==null&&(se.lane&=-536870913)}c&=~ue}h!==0&&$0(i,h,0),_!==0&&b===0&&i.tag!==0&&(i.suspendedLanes|=_&~(E&~o))}function $0(i,o,c){i.pendingLanes|=o,i.suspendedLanes&=~o;var h=31-Ie(o);i.entangledLanes|=o,i.entanglements[h]=i.entanglements[h]|1073741824|c&261930}function U0(i,o){var c=i.entangledLanes|=o;for(i=i.entanglements;c;){var h=31-Ie(c),b=1<<h;b&o|i[h]&o&&(i[h]|=o),c&=~b}}function q0(i,o){var c=o&-o;return c=(c&42)!==0?1:Dd(c),(c&(i.suspendedLanes|o))!==0?0:c}function Dd(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function jd(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function F0(){var i=H.p;return i!==0?i:(i=window.event,i===void 0?32:Ax(i.type))}function V0(i,o){var c=H.p;try{return H.p=i,o()}finally{H.p=c}}var Es=Math.random().toString(36).slice(2),an="__reactFiber$"+Es,Dn="__reactProps$"+Es,Gi="__reactContainer$"+Es,Ld="__reactEvents$"+Es,FA="__reactListeners$"+Es,VA="__reactHandles$"+Es,H0="__reactResources$"+Es,po="__reactMarker$"+Es;function zd(i){delete i[an],delete i[Dn],delete i[Ld],delete i[FA],delete i[VA]}function Ki(i){var o=i[an];if(o)return o;for(var c=i.parentNode;c;){if(o=c[Gi]||c[an]){if(c=o.alternate,o.child!==null||c!==null&&c.child!==null)for(i=dx(i);i!==null;){if(c=i[an])return c;i=dx(i)}return o}i=c,c=i.parentNode}return null}function Zi(i){if(i=i[an]||i[Gi]){var o=i.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return i}return null}function mo(i){var o=i.tag;if(o===5||o===26||o===27||o===6)return i.stateNode;throw Error(r(33))}function Qi(i){var o=i[H0];return o||(o=i[H0]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function Wt(i){i[po]=!0}var G0=new Set,K0={};function ui(i,o){Ji(i,o),Ji(i+"Capture",o)}function Ji(i,o){for(K0[i]=o,i=0;i<o.length;i++)G0.add(o[i])}var HA=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Z0={},Q0={};function GA(i){return _n.call(Q0,i)?!0:_n.call(Z0,i)?!1:HA.test(i)?Q0[i]=!0:(Z0[i]=!0,!1)}function pc(i,o,c){if(GA(o))if(c===null)i.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":i.removeAttribute(o);return;case"boolean":var h=o.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){i.removeAttribute(o);return}}i.setAttribute(o,""+c)}}function mc(i,o,c){if(c===null)i.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(o);return}i.setAttribute(o,""+c)}}function es(i,o,c,h){if(h===null)i.removeAttribute(c);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(c);return}i.setAttributeNS(o,c,""+h)}}function ur(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function J0(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function KA(i,o,c){var h=Object.getOwnPropertyDescriptor(i.constructor.prototype,o);if(!i.hasOwnProperty(o)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var b=h.get,_=h.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return b.call(this)},set:function(E){c=""+E,_.call(this,E)}}),Object.defineProperty(i,o,{enumerable:h.enumerable}),{getValue:function(){return c},setValue:function(E){c=""+E},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function Pd(i){if(!i._valueTracker){var o=J0(i)?"checked":"value";i._valueTracker=KA(i,o,""+i[o])}}function Y0(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var c=o.getValue(),h="";return i&&(h=J0(i)?i.checked?"true":"false":i.value),i=h,i!==c?(o.setValue(i),!0):!1}function gc(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var ZA=/[\n"\\]/g;function fr(i){return i.replace(ZA,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function Bd(i,o,c,h,b,_,E,R){i.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?i.type=E:i.removeAttribute("type"),o!=null?E==="number"?(o===0&&i.value===""||i.value!=o)&&(i.value=""+ur(o)):i.value!==""+ur(o)&&(i.value=""+ur(o)):E!=="submit"&&E!=="reset"||i.removeAttribute("value"),o!=null?$d(i,E,ur(o)):c!=null?$d(i,E,ur(c)):h!=null&&i.removeAttribute("value"),b==null&&_!=null&&(i.defaultChecked=!!_),b!=null&&(i.checked=b&&typeof b!="function"&&typeof b!="symbol"),R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"?i.name=""+ur(R):i.removeAttribute("name")}function X0(i,o,c,h,b,_,E,R){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(i.type=_),o!=null||c!=null){if(!(_!=="submit"&&_!=="reset"||o!=null)){Pd(i);return}c=c!=null?""+ur(c):"",o=o!=null?""+ur(o):c,R||o===i.value||(i.value=o),i.defaultValue=o}h=h??b,h=typeof h!="function"&&typeof h!="symbol"&&!!h,i.checked=R?i.checked:!!h,i.defaultChecked=!!h,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(i.name=E),Pd(i)}function $d(i,o,c){o==="number"&&gc(i.ownerDocument)===i||i.defaultValue===""+c||(i.defaultValue=""+c)}function Yi(i,o,c,h){if(i=i.options,o){o={};for(var b=0;b<c.length;b++)o["$"+c[b]]=!0;for(c=0;c<i.length;c++)b=o.hasOwnProperty("$"+i[c].value),i[c].selected!==b&&(i[c].selected=b),b&&h&&(i[c].defaultSelected=!0)}else{for(c=""+ur(c),o=null,b=0;b<i.length;b++){if(i[b].value===c){i[b].selected=!0,h&&(i[b].defaultSelected=!0);return}o!==null||i[b].disabled||(o=i[b])}o!==null&&(o.selected=!0)}}function W0(i,o,c){if(o!=null&&(o=""+ur(o),o!==i.value&&(i.value=o),c==null)){i.defaultValue!==o&&(i.defaultValue=o);return}i.defaultValue=c!=null?""+ur(c):""}function eb(i,o,c,h){if(o==null){if(h!=null){if(c!=null)throw Error(r(92));if(q(h)){if(1<h.length)throw Error(r(93));h=h[0]}c=h}c==null&&(c=""),o=c}c=ur(o),i.defaultValue=c,h=i.textContent,h===c&&h!==""&&h!==null&&(i.value=h),Pd(i)}function Xi(i,o){if(o){var c=i.firstChild;if(c&&c===i.lastChild&&c.nodeType===3){c.nodeValue=o;return}}i.textContent=o}var QA=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function tb(i,o,c){var h=o.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?h?i.setProperty(o,""):o==="float"?i.cssFloat="":i[o]="":h?i.setProperty(o,c):typeof c!="number"||c===0||QA.has(o)?o==="float"?i.cssFloat=c:i[o]=(""+c).trim():i[o]=c+"px"}function nb(i,o,c){if(o!=null&&typeof o!="object")throw Error(r(62));if(i=i.style,c!=null){for(var h in c)!c.hasOwnProperty(h)||o!=null&&o.hasOwnProperty(h)||(h.indexOf("--")===0?i.setProperty(h,""):h==="float"?i.cssFloat="":i[h]="");for(var b in o)h=o[b],o.hasOwnProperty(b)&&c[b]!==h&&tb(i,b,h)}else for(var _ in o)o.hasOwnProperty(_)&&tb(i,_,o[_])}function Ud(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var JA=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),YA=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function yc(i){return YA.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function ts(){}var qd=null;function Fd(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Wi=null,ea=null;function rb(i){var o=Zi(i);if(o&&(i=o.stateNode)){var c=i[Dn]||null;e:switch(i=o.stateNode,o.type){case"input":if(Bd(i,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),o=c.name,c.type==="radio"&&o!=null){for(c=i;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+fr(""+o)+'"][type="radio"]'),o=0;o<c.length;o++){var h=c[o];if(h!==i&&h.form===i.form){var b=h[Dn]||null;if(!b)throw Error(r(90));Bd(h,b.value,b.defaultValue,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name)}}for(o=0;o<c.length;o++)h=c[o],h.form===i.form&&Y0(h)}break e;case"textarea":W0(i,c.value,c.defaultValue);break e;case"select":o=c.value,o!=null&&Yi(i,!!c.multiple,o,!1)}}}var Vd=!1;function sb(i,o,c){if(Vd)return i(o,c);Vd=!0;try{var h=i(o);return h}finally{if(Vd=!1,(Wi!==null||ea!==null)&&(su(),Wi&&(o=Wi,i=ea,ea=Wi=null,rb(o),i)))for(o=0;o<i.length;o++)rb(i[o])}}function go(i,o){var c=i.stateNode;if(c===null)return null;var h=c[Dn]||null;if(h===null)return null;c=h[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(i=i.type,h=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!h;break e;default:i=!1}if(i)return null;if(c&&typeof c!="function")throw Error(r(231,o,typeof c));return c}var ns=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Hd=!1;if(ns)try{var yo={};Object.defineProperty(yo,"passive",{get:function(){Hd=!0}}),window.addEventListener("test",yo,yo),window.removeEventListener("test",yo,yo)}catch{Hd=!1}var Cs=null,Gd=null,bc=null;function ib(){if(bc)return bc;var i,o=Gd,c=o.length,h,b="value"in Cs?Cs.value:Cs.textContent,_=b.length;for(i=0;i<c&&o[i]===b[i];i++);var E=c-i;for(h=1;h<=E&&o[c-h]===b[_-h];h++);return bc=b.slice(i,1<h?1-h:void 0)}function _c(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function vc(){return!0}function ab(){return!1}function jn(i){function o(c,h,b,_,E){this._reactName=c,this._targetInst=b,this.type=h,this.nativeEvent=_,this.target=E,this.currentTarget=null;for(var R in i)i.hasOwnProperty(R)&&(c=i[R],this[R]=c?c(_):_[R]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?vc:ab,this.isPropagationStopped=ab,this}return p(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=vc)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=vc)},persist:function(){},isPersistent:vc}),o}var fi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xc=jn(fi),bo=p({},fi,{view:0,detail:0}),XA=jn(bo),Kd,Zd,_o,wc=p({},bo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Jd,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==_o&&(_o&&i.type==="mousemove"?(Kd=i.screenX-_o.screenX,Zd=i.screenY-_o.screenY):Zd=Kd=0,_o=i),Kd)},movementY:function(i){return"movementY"in i?i.movementY:Zd}}),ob=jn(wc),WA=p({},wc,{dataTransfer:0}),e2=jn(WA),t2=p({},bo,{relatedTarget:0}),Qd=jn(t2),n2=p({},fi,{animationName:0,elapsedTime:0,pseudoElement:0}),r2=jn(n2),s2=p({},fi,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),i2=jn(s2),a2=p({},fi,{data:0}),lb=jn(a2),o2={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},l2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},c2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function u2(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=c2[i])?!!o[i]:!1}function Jd(){return u2}var f2=p({},bo,{key:function(i){if(i.key){var o=o2[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=_c(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?l2[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Jd,charCode:function(i){return i.type==="keypress"?_c(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?_c(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),d2=jn(f2),h2=p({},wc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cb=jn(h2),p2=p({},bo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Jd}),m2=jn(p2),g2=p({},fi,{propertyName:0,elapsedTime:0,pseudoElement:0}),y2=jn(g2),b2=p({},wc,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),_2=jn(b2),v2=p({},fi,{newState:0,oldState:0}),x2=jn(v2),w2=[9,13,27,32],Yd=ns&&"CompositionEvent"in window,vo=null;ns&&"documentMode"in document&&(vo=document.documentMode);var S2=ns&&"TextEvent"in window&&!vo,ub=ns&&(!Yd||vo&&8<vo&&11>=vo),fb=" ",db=!1;function hb(i,o){switch(i){case"keyup":return w2.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function pb(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var ta=!1;function k2(i,o){switch(i){case"compositionend":return pb(o);case"keypress":return o.which!==32?null:(db=!0,fb);case"textInput":return i=o.data,i===fb&&db?null:i;default:return null}}function E2(i,o){if(ta)return i==="compositionend"||!Yd&&hb(i,o)?(i=ib(),bc=Gd=Cs=null,ta=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return ub&&o.locale!=="ko"?null:o.data;default:return null}}var C2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function mb(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!C2[i.type]:o==="textarea"}function gb(i,o,c,h){Wi?ea?ea.push(h):ea=[h]:Wi=h,o=fu(o,"onChange"),0<o.length&&(c=new xc("onChange","change",null,c,h),i.push({event:c,listeners:o}))}var xo=null,wo=null;function T2(i){Xv(i,0)}function Sc(i){var o=mo(i);if(Y0(o))return i}function yb(i,o){if(i==="change")return o}var bb=!1;if(ns){var Xd;if(ns){var Wd="oninput"in document;if(!Wd){var _b=document.createElement("div");_b.setAttribute("oninput","return;"),Wd=typeof _b.oninput=="function"}Xd=Wd}else Xd=!1;bb=Xd&&(!document.documentMode||9<document.documentMode)}function vb(){xo&&(xo.detachEvent("onpropertychange",xb),wo=xo=null)}function xb(i){if(i.propertyName==="value"&&Sc(wo)){var o=[];gb(o,wo,i,Fd(i)),sb(T2,o)}}function A2(i,o,c){i==="focusin"?(vb(),xo=o,wo=c,xo.attachEvent("onpropertychange",xb)):i==="focusout"&&vb()}function R2(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Sc(wo)}function O2(i,o){if(i==="click")return Sc(o)}function N2(i,o){if(i==="input"||i==="change")return Sc(o)}function I2(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var Qn=typeof Object.is=="function"?Object.is:I2;function So(i,o){if(Qn(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var c=Object.keys(i),h=Object.keys(o);if(c.length!==h.length)return!1;for(h=0;h<c.length;h++){var b=c[h];if(!_n.call(o,b)||!Qn(i[b],o[b]))return!1}return!0}function wb(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Sb(i,o){var c=wb(i);i=0;for(var h;c;){if(c.nodeType===3){if(h=i+c.textContent.length,i<=o&&h>=o)return{node:c,offset:o-i};i=h}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=wb(c)}}function kb(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?kb(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function Eb(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var o=gc(i.document);o instanceof i.HTMLIFrameElement;){try{var c=typeof o.contentWindow.location.href=="string"}catch{c=!1}if(c)i=o.contentWindow;else break;o=gc(i.document)}return o}function eh(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}var M2=ns&&"documentMode"in document&&11>=document.documentMode,na=null,th=null,ko=null,nh=!1;function Cb(i,o,c){var h=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;nh||na==null||na!==gc(h)||(h=na,"selectionStart"in h&&eh(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),ko&&So(ko,h)||(ko=h,h=fu(th,"onSelect"),0<h.length&&(o=new xc("onSelect","select",null,o,c),i.push({event:o,listeners:h}),o.target=na)))}function di(i,o){var c={};return c[i.toLowerCase()]=o.toLowerCase(),c["Webkit"+i]="webkit"+o,c["Moz"+i]="moz"+o,c}var ra={animationend:di("Animation","AnimationEnd"),animationiteration:di("Animation","AnimationIteration"),animationstart:di("Animation","AnimationStart"),transitionrun:di("Transition","TransitionRun"),transitionstart:di("Transition","TransitionStart"),transitioncancel:di("Transition","TransitionCancel"),transitionend:di("Transition","TransitionEnd")},rh={},Tb={};ns&&(Tb=document.createElement("div").style,"AnimationEvent"in window||(delete ra.animationend.animation,delete ra.animationiteration.animation,delete ra.animationstart.animation),"TransitionEvent"in window||delete ra.transitionend.transition);function hi(i){if(rh[i])return rh[i];if(!ra[i])return i;var o=ra[i],c;for(c in o)if(o.hasOwnProperty(c)&&c in Tb)return rh[i]=o[c];return i}var Ab=hi("animationend"),Rb=hi("animationiteration"),Ob=hi("animationstart"),D2=hi("transitionrun"),j2=hi("transitionstart"),L2=hi("transitioncancel"),Nb=hi("transitionend"),Ib=new Map,sh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");sh.push("scrollEnd");function Ar(i,o){Ib.set(i,o),ui(o,[i])}var kc=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},dr=[],sa=0,ih=0;function Ec(){for(var i=sa,o=ih=sa=0;o<i;){var c=dr[o];dr[o++]=null;var h=dr[o];dr[o++]=null;var b=dr[o];dr[o++]=null;var _=dr[o];if(dr[o++]=null,h!==null&&b!==null){var E=h.pending;E===null?b.next=b:(b.next=E.next,E.next=b),h.pending=b}_!==0&&Mb(c,b,_)}}function Cc(i,o,c,h){dr[sa++]=i,dr[sa++]=o,dr[sa++]=c,dr[sa++]=h,ih|=h,i.lanes|=h,i=i.alternate,i!==null&&(i.lanes|=h)}function ah(i,o,c,h){return Cc(i,o,c,h),Tc(i)}function pi(i,o){return Cc(i,null,null,o),Tc(i)}function Mb(i,o,c){i.lanes|=c;var h=i.alternate;h!==null&&(h.lanes|=c);for(var b=!1,_=i.return;_!==null;)_.childLanes|=c,h=_.alternate,h!==null&&(h.childLanes|=c),_.tag===22&&(i=_.stateNode,i===null||i._visibility&1||(b=!0)),i=_,_=_.return;return i.tag===3?(_=i.stateNode,b&&o!==null&&(b=31-Ie(c),i=_.hiddenUpdates,h=i[b],h===null?i[b]=[o]:h.push(o),o.lane=c|536870912),_):null}function Tc(i){if(50<Go)throw Go=0,mp=null,Error(r(185));for(var o=i.return;o!==null;)i=o,o=i.return;return i.tag===3?i.stateNode:null}var ia={};function z2(i,o,c,h){this.tag=i,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Jn(i,o,c,h){return new z2(i,o,c,h)}function oh(i){return i=i.prototype,!(!i||!i.isReactComponent)}function rs(i,o){var c=i.alternate;return c===null?(c=Jn(i.tag,o,i.key,i.mode),c.elementType=i.elementType,c.type=i.type,c.stateNode=i.stateNode,c.alternate=i,i.alternate=c):(c.pendingProps=o,c.type=i.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=i.flags&65011712,c.childLanes=i.childLanes,c.lanes=i.lanes,c.child=i.child,c.memoizedProps=i.memoizedProps,c.memoizedState=i.memoizedState,c.updateQueue=i.updateQueue,o=i.dependencies,c.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},c.sibling=i.sibling,c.index=i.index,c.ref=i.ref,c.refCleanup=i.refCleanup,c}function Db(i,o){i.flags&=65011714;var c=i.alternate;return c===null?(i.childLanes=0,i.lanes=o,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=c.childLanes,i.lanes=c.lanes,i.child=c.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=c.memoizedProps,i.memoizedState=c.memoizedState,i.updateQueue=c.updateQueue,i.type=c.type,o=c.dependencies,i.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),i}function Ac(i,o,c,h,b,_){var E=0;if(h=i,typeof i=="function")oh(i)&&(E=1);else if(typeof i=="string")E=qR(i,c,z.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case K:return i=Jn(31,c,o,b),i.elementType=K,i.lanes=_,i;case x:return mi(c.children,b,_,o);case C:E=8,b|=24;break;case k:return i=Jn(12,c,o,b|2),i.elementType=k,i.lanes=_,i;case I:return i=Jn(13,c,o,b),i.elementType=I,i.lanes=_,i;case O:return i=Jn(19,c,o,b),i.elementType=O,i.lanes=_,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case A:E=10;break e;case T:E=9;break e;case M:E=11;break e;case B:E=14;break e;case U:E=16,h=null;break e}E=29,c=Error(r(130,i===null?"null":typeof i,"")),h=null}return o=Jn(E,c,o,b),o.elementType=i,o.type=h,o.lanes=_,o}function mi(i,o,c,h){return i=Jn(7,i,h,o),i.lanes=c,i}function lh(i,o,c){return i=Jn(6,i,null,o),i.lanes=c,i}function jb(i){var o=Jn(18,null,null,0);return o.stateNode=i,o}function ch(i,o,c){return o=Jn(4,i.children!==null?i.children:[],i.key,o),o.lanes=c,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}var Lb=new WeakMap;function hr(i,o){if(typeof i=="object"&&i!==null){var c=Lb.get(i);return c!==void 0?c:(o={value:i,source:o,stack:bn(o)},Lb.set(i,o),o)}return{value:i,source:o,stack:bn(o)}}var aa=[],oa=0,Rc=null,Eo=0,pr=[],mr=0,Ts=null,Lr=1,zr="";function ss(i,o){aa[oa++]=Eo,aa[oa++]=Rc,Rc=i,Eo=o}function zb(i,o,c){pr[mr++]=Lr,pr[mr++]=zr,pr[mr++]=Ts,Ts=i;var h=Lr;i=zr;var b=32-Ie(h)-1;h&=~(1<<b),c+=1;var _=32-Ie(o)+b;if(30<_){var E=b-b%5;_=(h&(1<<E)-1).toString(32),h>>=E,b-=E,Lr=1<<32-Ie(o)+b|c<<b|h,zr=_+i}else Lr=1<<_|c<<b|h,zr=i}function uh(i){i.return!==null&&(ss(i,1),zb(i,1,0))}function fh(i){for(;i===Rc;)Rc=aa[--oa],aa[oa]=null,Eo=aa[--oa],aa[oa]=null;for(;i===Ts;)Ts=pr[--mr],pr[mr]=null,zr=pr[--mr],pr[mr]=null,Lr=pr[--mr],pr[mr]=null}function Pb(i,o){pr[mr++]=Lr,pr[mr++]=zr,pr[mr++]=Ts,Lr=o.id,zr=o.overflow,Ts=i}var on=null,vt=null,nt=!1,As=null,gr=!1,dh=Error(r(519));function Rs(i){var o=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Co(hr(o,i)),dh}function Bb(i){var o=i.stateNode,c=i.type,h=i.memoizedProps;switch(o[an]=i,o[Dn]=h,c){case"dialog":Qe("cancel",o),Qe("close",o);break;case"iframe":case"object":case"embed":Qe("load",o);break;case"video":case"audio":for(c=0;c<Zo.length;c++)Qe(Zo[c],o);break;case"source":Qe("error",o);break;case"img":case"image":case"link":Qe("error",o),Qe("load",o);break;case"details":Qe("toggle",o);break;case"input":Qe("invalid",o),X0(o,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0);break;case"select":Qe("invalid",o);break;case"textarea":Qe("invalid",o),eb(o,h.value,h.defaultValue,h.children)}c=h.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||o.textContent===""+c||h.suppressHydrationWarning===!0||nx(o.textContent,c)?(h.popover!=null&&(Qe("beforetoggle",o),Qe("toggle",o)),h.onScroll!=null&&Qe("scroll",o),h.onScrollEnd!=null&&Qe("scrollend",o),h.onClick!=null&&(o.onclick=ts),o=!0):o=!1,o||Rs(i,!0)}function $b(i){for(on=i.return;on;)switch(on.tag){case 5:case 31:case 13:gr=!1;return;case 27:case 3:gr=!0;return;default:on=on.return}}function la(i){if(i!==on)return!1;if(!nt)return $b(i),nt=!0,!1;var o=i.tag,c;if((c=o!==3&&o!==27)&&((c=o===5)&&(c=i.type,c=!(c!=="form"&&c!=="button")||Op(i.type,i.memoizedProps)),c=!c),c&&vt&&Rs(i),$b(i),o===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));vt=fx(i)}else if(o===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));vt=fx(i)}else o===27?(o=vt,Fs(i.type)?(i=jp,jp=null,vt=i):vt=o):vt=on?br(i.stateNode.nextSibling):null;return!0}function gi(){vt=on=null,nt=!1}function hh(){var i=As;return i!==null&&(Bn===null?Bn=i:Bn.push.apply(Bn,i),As=null),i}function Co(i){As===null?As=[i]:As.push(i)}var ph=D(null),yi=null,is=null;function Os(i,o,c){S(ph,o._currentValue),o._currentValue=c}function as(i){i._currentValue=ph.current,V(ph)}function mh(i,o,c){for(;i!==null;){var h=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,h!==null&&(h.childLanes|=o)):h!==null&&(h.childLanes&o)!==o&&(h.childLanes|=o),i===c)break;i=i.return}}function gh(i,o,c,h){var b=i.child;for(b!==null&&(b.return=i);b!==null;){var _=b.dependencies;if(_!==null){var E=b.child;_=_.firstContext;e:for(;_!==null;){var R=_;_=b;for(var $=0;$<o.length;$++)if(R.context===o[$]){_.lanes|=c,R=_.alternate,R!==null&&(R.lanes|=c),mh(_.return,c,i),h||(E=null);break e}_=R.next}}else if(b.tag===18){if(E=b.return,E===null)throw Error(r(341));E.lanes|=c,_=E.alternate,_!==null&&(_.lanes|=c),mh(E,c,i),E=null}else E=b.child;if(E!==null)E.return=b;else for(E=b;E!==null;){if(E===i){E=null;break}if(b=E.sibling,b!==null){b.return=E.return,E=b;break}E=E.return}b=E}}function ca(i,o,c,h){i=null;for(var b=o,_=!1;b!==null;){if(!_){if((b.flags&524288)!==0)_=!0;else if((b.flags&262144)!==0)break}if(b.tag===10){var E=b.alternate;if(E===null)throw Error(r(387));if(E=E.memoizedProps,E!==null){var R=b.type;Qn(b.pendingProps.value,E.value)||(i!==null?i.push(R):i=[R])}}else if(b===ye.current){if(E=b.alternate,E===null)throw Error(r(387));E.memoizedState.memoizedState!==b.memoizedState.memoizedState&&(i!==null?i.push(Wo):i=[Wo])}b=b.return}i!==null&&gh(o,i,c,h),o.flags|=262144}function Oc(i){for(i=i.firstContext;i!==null;){if(!Qn(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function bi(i){yi=i,is=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function ln(i){return Ub(yi,i)}function Nc(i,o){return yi===null&&bi(i),Ub(i,o)}function Ub(i,o){var c=o._currentValue;if(o={context:o,memoizedValue:c,next:null},is===null){if(i===null)throw Error(r(308));is=o,i.dependencies={lanes:0,firstContext:o},i.flags|=524288}else is=is.next=o;return c}var P2=typeof AbortController<"u"?AbortController:function(){var i=[],o=this.signal={aborted:!1,addEventListener:function(c,h){i.push(h)}};this.abort=function(){o.aborted=!0,i.forEach(function(c){return c()})}},B2=t.unstable_scheduleCallback,$2=t.unstable_NormalPriority,Mt={$$typeof:A,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function yh(){return{controller:new P2,data:new Map,refCount:0}}function To(i){i.refCount--,i.refCount===0&&B2($2,function(){i.controller.abort()})}var Ao=null,bh=0,ua=0,fa=null;function U2(i,o){if(Ao===null){var c=Ao=[];bh=0,ua=xp(),fa={status:"pending",value:void 0,then:function(h){c.push(h)}}}return bh++,o.then(qb,qb),o}function qb(){if(--bh===0&&Ao!==null){fa!==null&&(fa.status="fulfilled");var i=Ao;Ao=null,ua=0,fa=null;for(var o=0;o<i.length;o++)(0,i[o])()}}function q2(i,o){var c=[],h={status:"pending",value:null,reason:null,then:function(b){c.push(b)}};return i.then(function(){h.status="fulfilled",h.value=o;for(var b=0;b<c.length;b++)(0,c[b])(o)},function(b){for(h.status="rejected",h.reason=b,b=0;b<c.length;b++)(0,c[b])(void 0)}),h}var Fb=P.S;P.S=function(i,o){Cv=Ce(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&U2(i,o),Fb!==null&&Fb(i,o)};var _i=D(null);function _h(){var i=_i.current;return i!==null?i:gt.pooledCache}function Ic(i,o){o===null?S(_i,_i.current):S(_i,o.pool)}function Vb(){var i=_h();return i===null?null:{parent:Mt._currentValue,pool:i}}var da=Error(r(460)),vh=Error(r(474)),Mc=Error(r(542)),Dc={then:function(){}};function Hb(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Gb(i,o,c){switch(c=i[c],c===void 0?i.push(o):c!==o&&(o.then(ts,ts),o=c),o.status){case"fulfilled":return o.value;case"rejected":throw i=o.reason,Zb(i),i;default:if(typeof o.status=="string")o.then(ts,ts);else{if(i=gt,i!==null&&100<i.shellSuspendCounter)throw Error(r(482));i=o,i.status="pending",i.then(function(h){if(o.status==="pending"){var b=o;b.status="fulfilled",b.value=h}},function(h){if(o.status==="pending"){var b=o;b.status="rejected",b.reason=h}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw i=o.reason,Zb(i),i}throw xi=o,da}}function vi(i){try{var o=i._init;return o(i._payload)}catch(c){throw c!==null&&typeof c=="object"&&typeof c.then=="function"?(xi=c,da):c}}var xi=null;function Kb(){if(xi===null)throw Error(r(459));var i=xi;return xi=null,i}function Zb(i){if(i===da||i===Mc)throw Error(r(483))}var ha=null,Ro=0;function jc(i){var o=Ro;return Ro+=1,ha===null&&(ha=[]),Gb(ha,i,o)}function Oo(i,o){o=o.props.ref,i.ref=o!==void 0?o:null}function Lc(i,o){throw o.$$typeof===y?Error(r(525)):(i=Object.prototype.toString.call(o),Error(r(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i)))}function Qb(i){function o(Q,F){if(i){var X=Q.deletions;X===null?(Q.deletions=[F],Q.flags|=16):X.push(F)}}function c(Q,F){if(!i)return null;for(;F!==null;)o(Q,F),F=F.sibling;return null}function h(Q){for(var F=new Map;Q!==null;)Q.key!==null?F.set(Q.key,Q):F.set(Q.index,Q),Q=Q.sibling;return F}function b(Q,F){return Q=rs(Q,F),Q.index=0,Q.sibling=null,Q}function _(Q,F,X){return Q.index=X,i?(X=Q.alternate,X!==null?(X=X.index,X<F?(Q.flags|=67108866,F):X):(Q.flags|=67108866,F)):(Q.flags|=1048576,F)}function E(Q){return i&&Q.alternate===null&&(Q.flags|=67108866),Q}function R(Q,F,X,oe){return F===null||F.tag!==6?(F=lh(X,Q.mode,oe),F.return=Q,F):(F=b(F,X),F.return=Q,F)}function $(Q,F,X,oe){var Ae=X.type;return Ae===x?ae(Q,F,X.props.children,oe,X.key):F!==null&&(F.elementType===Ae||typeof Ae=="object"&&Ae!==null&&Ae.$$typeof===U&&vi(Ae)===F.type)?(F=b(F,X.props),Oo(F,X),F.return=Q,F):(F=Ac(X.type,X.key,X.props,null,Q.mode,oe),Oo(F,X),F.return=Q,F)}function W(Q,F,X,oe){return F===null||F.tag!==4||F.stateNode.containerInfo!==X.containerInfo||F.stateNode.implementation!==X.implementation?(F=ch(X,Q.mode,oe),F.return=Q,F):(F=b(F,X.children||[]),F.return=Q,F)}function ae(Q,F,X,oe,Ae){return F===null||F.tag!==7?(F=mi(X,Q.mode,oe,Ae),F.return=Q,F):(F=b(F,X),F.return=Q,F)}function ue(Q,F,X){if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return F=lh(""+F,Q.mode,X),F.return=Q,F;if(typeof F=="object"&&F!==null){switch(F.$$typeof){case g:return X=Ac(F.type,F.key,F.props,null,Q.mode,X),Oo(X,F),X.return=Q,X;case v:return F=ch(F,Q.mode,X),F.return=Q,F;case U:return F=vi(F),ue(Q,F,X)}if(q(F)||ne(F))return F=mi(F,Q.mode,X,null),F.return=Q,F;if(typeof F.then=="function")return ue(Q,jc(F),X);if(F.$$typeof===A)return ue(Q,Nc(Q,F),X);Lc(Q,F)}return null}function te(Q,F,X,oe){var Ae=F!==null?F.key:null;if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return Ae!==null?null:R(Q,F,""+X,oe);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case g:return X.key===Ae?$(Q,F,X,oe):null;case v:return X.key===Ae?W(Q,F,X,oe):null;case U:return X=vi(X),te(Q,F,X,oe)}if(q(X)||ne(X))return Ae!==null?null:ae(Q,F,X,oe,null);if(typeof X.then=="function")return te(Q,F,jc(X),oe);if(X.$$typeof===A)return te(Q,F,Nc(Q,X),oe);Lc(Q,X)}return null}function se(Q,F,X,oe,Ae){if(typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint")return Q=Q.get(X)||null,R(F,Q,""+oe,Ae);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case g:return Q=Q.get(oe.key===null?X:oe.key)||null,$(F,Q,oe,Ae);case v:return Q=Q.get(oe.key===null?X:oe.key)||null,W(F,Q,oe,Ae);case U:return oe=vi(oe),se(Q,F,X,oe,Ae)}if(q(oe)||ne(oe))return Q=Q.get(X)||null,ae(F,Q,oe,Ae,null);if(typeof oe.then=="function")return se(Q,F,X,jc(oe),Ae);if(oe.$$typeof===A)return se(Q,F,X,Nc(F,oe),Ae);Lc(F,oe)}return null}function xe(Q,F,X,oe){for(var Ae=null,it=null,Ee=F,$e=F=0,We=null;Ee!==null&&$e<X.length;$e++){Ee.index>$e?(We=Ee,Ee=null):We=Ee.sibling;var at=te(Q,Ee,X[$e],oe);if(at===null){Ee===null&&(Ee=We);break}i&&Ee&&at.alternate===null&&o(Q,Ee),F=_(at,F,$e),it===null?Ae=at:it.sibling=at,it=at,Ee=We}if($e===X.length)return c(Q,Ee),nt&&ss(Q,$e),Ae;if(Ee===null){for(;$e<X.length;$e++)Ee=ue(Q,X[$e],oe),Ee!==null&&(F=_(Ee,F,$e),it===null?Ae=Ee:it.sibling=Ee,it=Ee);return nt&&ss(Q,$e),Ae}for(Ee=h(Ee);$e<X.length;$e++)We=se(Ee,Q,$e,X[$e],oe),We!==null&&(i&&We.alternate!==null&&Ee.delete(We.key===null?$e:We.key),F=_(We,F,$e),it===null?Ae=We:it.sibling=We,it=We);return i&&Ee.forEach(function(Zs){return o(Q,Zs)}),nt&&ss(Q,$e),Ae}function Me(Q,F,X,oe){if(X==null)throw Error(r(151));for(var Ae=null,it=null,Ee=F,$e=F=0,We=null,at=X.next();Ee!==null&&!at.done;$e++,at=X.next()){Ee.index>$e?(We=Ee,Ee=null):We=Ee.sibling;var Zs=te(Q,Ee,at.value,oe);if(Zs===null){Ee===null&&(Ee=We);break}i&&Ee&&Zs.alternate===null&&o(Q,Ee),F=_(Zs,F,$e),it===null?Ae=Zs:it.sibling=Zs,it=Zs,Ee=We}if(at.done)return c(Q,Ee),nt&&ss(Q,$e),Ae;if(Ee===null){for(;!at.done;$e++,at=X.next())at=ue(Q,at.value,oe),at!==null&&(F=_(at,F,$e),it===null?Ae=at:it.sibling=at,it=at);return nt&&ss(Q,$e),Ae}for(Ee=h(Ee);!at.done;$e++,at=X.next())at=se(Ee,Q,$e,at.value,oe),at!==null&&(i&&at.alternate!==null&&Ee.delete(at.key===null?$e:at.key),F=_(at,F,$e),it===null?Ae=at:it.sibling=at,it=at);return i&&Ee.forEach(function(WR){return o(Q,WR)}),nt&&ss(Q,$e),Ae}function mt(Q,F,X,oe){if(typeof X=="object"&&X!==null&&X.type===x&&X.key===null&&(X=X.props.children),typeof X=="object"&&X!==null){switch(X.$$typeof){case g:e:{for(var Ae=X.key;F!==null;){if(F.key===Ae){if(Ae=X.type,Ae===x){if(F.tag===7){c(Q,F.sibling),oe=b(F,X.props.children),oe.return=Q,Q=oe;break e}}else if(F.elementType===Ae||typeof Ae=="object"&&Ae!==null&&Ae.$$typeof===U&&vi(Ae)===F.type){c(Q,F.sibling),oe=b(F,X.props),Oo(oe,X),oe.return=Q,Q=oe;break e}c(Q,F);break}else o(Q,F);F=F.sibling}X.type===x?(oe=mi(X.props.children,Q.mode,oe,X.key),oe.return=Q,Q=oe):(oe=Ac(X.type,X.key,X.props,null,Q.mode,oe),Oo(oe,X),oe.return=Q,Q=oe)}return E(Q);case v:e:{for(Ae=X.key;F!==null;){if(F.key===Ae)if(F.tag===4&&F.stateNode.containerInfo===X.containerInfo&&F.stateNode.implementation===X.implementation){c(Q,F.sibling),oe=b(F,X.children||[]),oe.return=Q,Q=oe;break e}else{c(Q,F);break}else o(Q,F);F=F.sibling}oe=ch(X,Q.mode,oe),oe.return=Q,Q=oe}return E(Q);case U:return X=vi(X),mt(Q,F,X,oe)}if(q(X))return xe(Q,F,X,oe);if(ne(X)){if(Ae=ne(X),typeof Ae!="function")throw Error(r(150));return X=Ae.call(X),Me(Q,F,X,oe)}if(typeof X.then=="function")return mt(Q,F,jc(X),oe);if(X.$$typeof===A)return mt(Q,F,Nc(Q,X),oe);Lc(Q,X)}return typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint"?(X=""+X,F!==null&&F.tag===6?(c(Q,F.sibling),oe=b(F,X),oe.return=Q,Q=oe):(c(Q,F),oe=lh(X,Q.mode,oe),oe.return=Q,Q=oe),E(Q)):c(Q,F)}return function(Q,F,X,oe){try{Ro=0;var Ae=mt(Q,F,X,oe);return ha=null,Ae}catch(Ee){if(Ee===da||Ee===Mc)throw Ee;var it=Jn(29,Ee,null,Q.mode);return it.lanes=oe,it.return=Q,it}}}var wi=Qb(!0),Jb=Qb(!1),Ns=!1;function xh(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function wh(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Is(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Ms(i,o,c){var h=i.updateQueue;if(h===null)return null;if(h=h.shared,(ot&2)!==0){var b=h.pending;return b===null?o.next=o:(o.next=b.next,b.next=o),h.pending=o,o=Tc(i),Mb(i,null,c),o}return Cc(i,h,o,c),Tc(i)}function No(i,o,c){if(o=o.updateQueue,o!==null&&(o=o.shared,(c&4194048)!==0)){var h=o.lanes;h&=i.pendingLanes,c|=h,o.lanes=c,U0(i,c)}}function Sh(i,o){var c=i.updateQueue,h=i.alternate;if(h!==null&&(h=h.updateQueue,c===h)){var b=null,_=null;if(c=c.firstBaseUpdate,c!==null){do{var E={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};_===null?b=_=E:_=_.next=E,c=c.next}while(c!==null);_===null?b=_=o:_=_.next=o}else b=_=o;c={baseState:h.baseState,firstBaseUpdate:b,lastBaseUpdate:_,shared:h.shared,callbacks:h.callbacks},i.updateQueue=c;return}i=c.lastBaseUpdate,i===null?c.firstBaseUpdate=o:i.next=o,c.lastBaseUpdate=o}var kh=!1;function Io(){if(kh){var i=fa;if(i!==null)throw i}}function Mo(i,o,c,h){kh=!1;var b=i.updateQueue;Ns=!1;var _=b.firstBaseUpdate,E=b.lastBaseUpdate,R=b.shared.pending;if(R!==null){b.shared.pending=null;var $=R,W=$.next;$.next=null,E===null?_=W:E.next=W,E=$;var ae=i.alternate;ae!==null&&(ae=ae.updateQueue,R=ae.lastBaseUpdate,R!==E&&(R===null?ae.firstBaseUpdate=W:R.next=W,ae.lastBaseUpdate=$))}if(_!==null){var ue=b.baseState;E=0,ae=W=$=null,R=_;do{var te=R.lane&-536870913,se=te!==R.lane;if(se?(Xe&te)===te:(h&te)===te){te!==0&&te===ua&&(kh=!0),ae!==null&&(ae=ae.next={lane:0,tag:R.tag,payload:R.payload,callback:null,next:null});e:{var xe=i,Me=R;te=o;var mt=c;switch(Me.tag){case 1:if(xe=Me.payload,typeof xe=="function"){ue=xe.call(mt,ue,te);break e}ue=xe;break e;case 3:xe.flags=xe.flags&-65537|128;case 0:if(xe=Me.payload,te=typeof xe=="function"?xe.call(mt,ue,te):xe,te==null)break e;ue=p({},ue,te);break e;case 2:Ns=!0}}te=R.callback,te!==null&&(i.flags|=64,se&&(i.flags|=8192),se=b.callbacks,se===null?b.callbacks=[te]:se.push(te))}else se={lane:te,tag:R.tag,payload:R.payload,callback:R.callback,next:null},ae===null?(W=ae=se,$=ue):ae=ae.next=se,E|=te;if(R=R.next,R===null){if(R=b.shared.pending,R===null)break;se=R,R=se.next,se.next=null,b.lastBaseUpdate=se,b.shared.pending=null}}while(!0);ae===null&&($=ue),b.baseState=$,b.firstBaseUpdate=W,b.lastBaseUpdate=ae,_===null&&(b.shared.lanes=0),Ps|=E,i.lanes=E,i.memoizedState=ue}}function Yb(i,o){if(typeof i!="function")throw Error(r(191,i));i.call(o)}function Xb(i,o){var c=i.callbacks;if(c!==null)for(i.callbacks=null,i=0;i<c.length;i++)Yb(c[i],o)}var pa=D(null),zc=D(0);function Wb(i,o){i=ms,S(zc,i),S(pa,o),ms=i|o.baseLanes}function Eh(){S(zc,ms),S(pa,pa.current)}function Ch(){ms=zc.current,V(pa),V(zc)}var Yn=D(null),yr=null;function Ds(i){var o=i.alternate;S(Ot,Ot.current&1),S(Yn,i),yr===null&&(o===null||pa.current!==null||o.memoizedState!==null)&&(yr=i)}function Th(i){S(Ot,Ot.current),S(Yn,i),yr===null&&(yr=i)}function e_(i){i.tag===22?(S(Ot,Ot.current),S(Yn,i),yr===null&&(yr=i)):js()}function js(){S(Ot,Ot.current),S(Yn,Yn.current)}function Xn(i){V(Yn),yr===i&&(yr=null),V(Ot)}var Ot=D(0);function Pc(i){for(var o=i;o!==null;){if(o.tag===13){var c=o.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||Mp(c)||Dp(c)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var os=0,Be=null,ht=null,Dt=null,Bc=!1,ma=!1,Si=!1,$c=0,Do=0,ga=null,F2=0;function At(){throw Error(r(321))}function Ah(i,o){if(o===null)return!1;for(var c=0;c<o.length&&c<i.length;c++)if(!Qn(i[c],o[c]))return!1;return!0}function Rh(i,o,c,h,b,_){return os=_,Be=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,P.H=i===null||i.memoizedState===null?z_:Vh,Si=!1,_=c(h,b),Si=!1,ma&&(_=n_(o,c,h,b)),t_(i),_}function t_(i){P.H=zo;var o=ht!==null&&ht.next!==null;if(os=0,Dt=ht=Be=null,Bc=!1,Do=0,ga=null,o)throw Error(r(300));i===null||jt||(i=i.dependencies,i!==null&&Oc(i)&&(jt=!0))}function n_(i,o,c,h){Be=i;var b=0;do{if(ma&&(ga=null),Do=0,ma=!1,25<=b)throw Error(r(301));if(b+=1,Dt=ht=null,i.updateQueue!=null){var _=i.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}P.H=P_,_=o(c,h)}while(ma);return _}function V2(){var i=P.H,o=i.useState()[0];return o=typeof o.then=="function"?jo(o):o,i=i.useState()[0],(ht!==null?ht.memoizedState:null)!==i&&(Be.flags|=1024),o}function Oh(){var i=$c!==0;return $c=0,i}function Nh(i,o,c){o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~c}function Ih(i){if(Bc){for(i=i.memoizedState;i!==null;){var o=i.queue;o!==null&&(o.pending=null),i=i.next}Bc=!1}os=0,Dt=ht=Be=null,ma=!1,Do=$c=0,ga=null}function Tn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Dt===null?Be.memoizedState=Dt=i:Dt=Dt.next=i,Dt}function Nt(){if(ht===null){var i=Be.alternate;i=i!==null?i.memoizedState:null}else i=ht.next;var o=Dt===null?Be.memoizedState:Dt.next;if(o!==null)Dt=o,ht=i;else{if(i===null)throw Be.alternate===null?Error(r(467)):Error(r(310));ht=i,i={memoizedState:ht.memoizedState,baseState:ht.baseState,baseQueue:ht.baseQueue,queue:ht.queue,next:null},Dt===null?Be.memoizedState=Dt=i:Dt=Dt.next=i}return Dt}function Uc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function jo(i){var o=Do;return Do+=1,ga===null&&(ga=[]),i=Gb(ga,i,o),o=Be,(Dt===null?o.memoizedState:Dt.next)===null&&(o=o.alternate,P.H=o===null||o.memoizedState===null?z_:Vh),i}function qc(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return jo(i);if(i.$$typeof===A)return ln(i)}throw Error(r(438,String(i)))}function Mh(i){var o=null,c=Be.updateQueue;if(c!==null&&(o=c.memoCache),o==null){var h=Be.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(o={data:h.data.map(function(b){return b.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),c===null&&(c=Uc(),Be.updateQueue=c),c.memoCache=o,c=o.data[o.index],c===void 0)for(c=o.data[o.index]=Array(i),h=0;h<i;h++)c[h]=j;return o.index++,c}function ls(i,o){return typeof o=="function"?o(i):o}function Fc(i){var o=Nt();return Dh(o,ht,i)}function Dh(i,o,c){var h=i.queue;if(h===null)throw Error(r(311));h.lastRenderedReducer=c;var b=i.baseQueue,_=h.pending;if(_!==null){if(b!==null){var E=b.next;b.next=_.next,_.next=E}o.baseQueue=b=_,h.pending=null}if(_=i.baseState,b===null)i.memoizedState=_;else{o=b.next;var R=E=null,$=null,W=o,ae=!1;do{var ue=W.lane&-536870913;if(ue!==W.lane?(Xe&ue)===ue:(os&ue)===ue){var te=W.revertLane;if(te===0)$!==null&&($=$.next={lane:0,revertLane:0,gesture:null,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null}),ue===ua&&(ae=!0);else if((os&te)===te){W=W.next,te===ua&&(ae=!0);continue}else ue={lane:0,revertLane:W.revertLane,gesture:null,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null},$===null?(R=$=ue,E=_):$=$.next=ue,Be.lanes|=te,Ps|=te;ue=W.action,Si&&c(_,ue),_=W.hasEagerState?W.eagerState:c(_,ue)}else te={lane:ue,revertLane:W.revertLane,gesture:W.gesture,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null},$===null?(R=$=te,E=_):$=$.next=te,Be.lanes|=ue,Ps|=ue;W=W.next}while(W!==null&&W!==o);if($===null?E=_:$.next=R,!Qn(_,i.memoizedState)&&(jt=!0,ae&&(c=fa,c!==null)))throw c;i.memoizedState=_,i.baseState=E,i.baseQueue=$,h.lastRenderedState=_}return b===null&&(h.lanes=0),[i.memoizedState,h.dispatch]}function jh(i){var o=Nt(),c=o.queue;if(c===null)throw Error(r(311));c.lastRenderedReducer=i;var h=c.dispatch,b=c.pending,_=o.memoizedState;if(b!==null){c.pending=null;var E=b=b.next;do _=i(_,E.action),E=E.next;while(E!==b);Qn(_,o.memoizedState)||(jt=!0),o.memoizedState=_,o.baseQueue===null&&(o.baseState=_),c.lastRenderedState=_}return[_,h]}function r_(i,o,c){var h=Be,b=Nt(),_=nt;if(_){if(c===void 0)throw Error(r(407));c=c()}else c=o();var E=!Qn((ht||b).memoizedState,c);if(E&&(b.memoizedState=c,jt=!0),b=b.queue,Ph(a_.bind(null,h,b,i),[i]),b.getSnapshot!==o||E||Dt!==null&&Dt.memoizedState.tag&1){if(h.flags|=2048,ya(9,{destroy:void 0},i_.bind(null,h,b,c,o),null),gt===null)throw Error(r(349));_||(os&127)!==0||s_(h,o,c)}return c}function s_(i,o,c){i.flags|=16384,i={getSnapshot:o,value:c},o=Be.updateQueue,o===null?(o=Uc(),Be.updateQueue=o,o.stores=[i]):(c=o.stores,c===null?o.stores=[i]:c.push(i))}function i_(i,o,c,h){o.value=c,o.getSnapshot=h,o_(o)&&l_(i)}function a_(i,o,c){return c(function(){o_(o)&&l_(i)})}function o_(i){var o=i.getSnapshot;i=i.value;try{var c=o();return!Qn(i,c)}catch{return!0}}function l_(i){var o=pi(i,2);o!==null&&$n(o,i,2)}function Lh(i){var o=Tn();if(typeof i=="function"){var c=i;if(i=c(),Si){ze(!0);try{c()}finally{ze(!1)}}}return o.memoizedState=o.baseState=i,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ls,lastRenderedState:i},o}function c_(i,o,c,h){return i.baseState=c,Dh(i,ht,typeof h=="function"?h:ls)}function H2(i,o,c,h,b){if(Gc(i))throw Error(r(485));if(i=o.action,i!==null){var _={payload:b,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){_.listeners.push(E)}};P.T!==null?c(!0):_.isTransition=!1,h(_),c=o.pending,c===null?(_.next=o.pending=_,u_(o,_)):(_.next=c.next,o.pending=c.next=_)}}function u_(i,o){var c=o.action,h=o.payload,b=i.state;if(o.isTransition){var _=P.T,E={};P.T=E;try{var R=c(b,h),$=P.S;$!==null&&$(E,R),f_(i,o,R)}catch(W){zh(i,o,W)}finally{_!==null&&E.types!==null&&(_.types=E.types),P.T=_}}else try{_=c(b,h),f_(i,o,_)}catch(W){zh(i,o,W)}}function f_(i,o,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(h){d_(i,o,h)},function(h){return zh(i,o,h)}):d_(i,o,c)}function d_(i,o,c){o.status="fulfilled",o.value=c,h_(o),i.state=c,o=i.pending,o!==null&&(c=o.next,c===o?i.pending=null:(c=c.next,o.next=c,u_(i,c)))}function zh(i,o,c){var h=i.pending;if(i.pending=null,h!==null){h=h.next;do o.status="rejected",o.reason=c,h_(o),o=o.next;while(o!==h)}i.action=null}function h_(i){i=i.listeners;for(var o=0;o<i.length;o++)(0,i[o])()}function p_(i,o){return o}function m_(i,o){if(nt){var c=gt.formState;if(c!==null){e:{var h=Be;if(nt){if(vt){t:{for(var b=vt,_=gr;b.nodeType!==8;){if(!_){b=null;break t}if(b=br(b.nextSibling),b===null){b=null;break t}}_=b.data,b=_==="F!"||_==="F"?b:null}if(b){vt=br(b.nextSibling),h=b.data==="F!";break e}}Rs(h)}h=!1}h&&(o=c[0])}}return c=Tn(),c.memoizedState=c.baseState=o,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:p_,lastRenderedState:o},c.queue=h,c=D_.bind(null,Be,h),h.dispatch=c,h=Lh(!1),_=Fh.bind(null,Be,!1,h.queue),h=Tn(),b={state:o,dispatch:null,action:i,pending:null},h.queue=b,c=H2.bind(null,Be,b,_,c),b.dispatch=c,h.memoizedState=i,[o,c,!1]}function g_(i){var o=Nt();return y_(o,ht,i)}function y_(i,o,c){if(o=Dh(i,o,p_)[0],i=Fc(ls)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var h=jo(o)}catch(E){throw E===da?Mc:E}else h=o;o=Nt();var b=o.queue,_=b.dispatch;return c!==o.memoizedState&&(Be.flags|=2048,ya(9,{destroy:void 0},G2.bind(null,b,c),null)),[h,_,i]}function G2(i,o){i.action=o}function b_(i){var o=Nt(),c=ht;if(c!==null)return y_(o,c,i);Nt(),o=o.memoizedState,c=Nt();var h=c.queue.dispatch;return c.memoizedState=i,[o,h,!1]}function ya(i,o,c,h){return i={tag:i,create:c,deps:h,inst:o,next:null},o=Be.updateQueue,o===null&&(o=Uc(),Be.updateQueue=o),c=o.lastEffect,c===null?o.lastEffect=i.next=i:(h=c.next,c.next=i,i.next=h,o.lastEffect=i),i}function __(){return Nt().memoizedState}function Vc(i,o,c,h){var b=Tn();Be.flags|=i,b.memoizedState=ya(1|o,{destroy:void 0},c,h===void 0?null:h)}function Hc(i,o,c,h){var b=Nt();h=h===void 0?null:h;var _=b.memoizedState.inst;ht!==null&&h!==null&&Ah(h,ht.memoizedState.deps)?b.memoizedState=ya(o,_,c,h):(Be.flags|=i,b.memoizedState=ya(1|o,_,c,h))}function v_(i,o){Vc(8390656,8,i,o)}function Ph(i,o){Hc(2048,8,i,o)}function K2(i){Be.flags|=4;var o=Be.updateQueue;if(o===null)o=Uc(),Be.updateQueue=o,o.events=[i];else{var c=o.events;c===null?o.events=[i]:c.push(i)}}function x_(i){var o=Nt().memoizedState;return K2({ref:o,nextImpl:i}),function(){if((ot&2)!==0)throw Error(r(440));return o.impl.apply(void 0,arguments)}}function w_(i,o){return Hc(4,2,i,o)}function S_(i,o){return Hc(4,4,i,o)}function k_(i,o){if(typeof o=="function"){i=i();var c=o(i);return function(){typeof c=="function"?c():o(null)}}if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function E_(i,o,c){c=c!=null?c.concat([i]):null,Hc(4,4,k_.bind(null,o,i),c)}function Bh(){}function C_(i,o){var c=Nt();o=o===void 0?null:o;var h=c.memoizedState;return o!==null&&Ah(o,h[1])?h[0]:(c.memoizedState=[i,o],i)}function T_(i,o){var c=Nt();o=o===void 0?null:o;var h=c.memoizedState;if(o!==null&&Ah(o,h[1]))return h[0];if(h=i(),Si){ze(!0);try{i()}finally{ze(!1)}}return c.memoizedState=[h,o],h}function $h(i,o,c){return c===void 0||(os&1073741824)!==0&&(Xe&261930)===0?i.memoizedState=o:(i.memoizedState=c,i=Av(),Be.lanes|=i,Ps|=i,c)}function A_(i,o,c,h){return Qn(c,o)?c:pa.current!==null?(i=$h(i,c,h),Qn(i,o)||(jt=!0),i):(os&42)===0||(os&1073741824)!==0&&(Xe&261930)===0?(jt=!0,i.memoizedState=c):(i=Av(),Be.lanes|=i,Ps|=i,o)}function R_(i,o,c,h,b){var _=H.p;H.p=_!==0&&8>_?_:8;var E=P.T,R={};P.T=R,Fh(i,!1,o,c);try{var $=b(),W=P.S;if(W!==null&&W(R,$),$!==null&&typeof $=="object"&&typeof $.then=="function"){var ae=q2($,h);Lo(i,o,ae,tr(i))}else Lo(i,o,h,tr(i))}catch(ue){Lo(i,o,{then:function(){},status:"rejected",reason:ue},tr())}finally{H.p=_,E!==null&&R.types!==null&&(E.types=R.types),P.T=E}}function Z2(){}function Uh(i,o,c,h){if(i.tag!==5)throw Error(r(476));var b=O_(i).queue;R_(i,b,o,ie,c===null?Z2:function(){return N_(i),c(h)})}function O_(i){var o=i.memoizedState;if(o!==null)return o;o={memoizedState:ie,baseState:ie,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ls,lastRenderedState:ie},next:null};var c={};return o.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ls,lastRenderedState:c},next:null},i.memoizedState=o,i=i.alternate,i!==null&&(i.memoizedState=o),o}function N_(i){var o=O_(i);o.next===null&&(o=i.alternate.memoizedState),Lo(i,o.next.queue,{},tr())}function qh(){return ln(Wo)}function I_(){return Nt().memoizedState}function M_(){return Nt().memoizedState}function Q2(i){for(var o=i.return;o!==null;){switch(o.tag){case 24:case 3:var c=tr();i=Is(c);var h=Ms(o,i,c);h!==null&&($n(h,o,c),No(h,o,c)),o={cache:yh()},i.payload=o;return}o=o.return}}function J2(i,o,c){var h=tr();c={lane:h,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Gc(i)?j_(o,c):(c=ah(i,o,c,h),c!==null&&($n(c,i,h),L_(c,o,h)))}function D_(i,o,c){var h=tr();Lo(i,o,c,h)}function Lo(i,o,c,h){var b={lane:h,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null};if(Gc(i))j_(o,b);else{var _=i.alternate;if(i.lanes===0&&(_===null||_.lanes===0)&&(_=o.lastRenderedReducer,_!==null))try{var E=o.lastRenderedState,R=_(E,c);if(b.hasEagerState=!0,b.eagerState=R,Qn(R,E))return Cc(i,o,b,0),gt===null&&Ec(),!1}catch{}if(c=ah(i,o,b,h),c!==null)return $n(c,i,h),L_(c,o,h),!0}return!1}function Fh(i,o,c,h){if(h={lane:2,revertLane:xp(),gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null},Gc(i)){if(o)throw Error(r(479))}else o=ah(i,c,h,2),o!==null&&$n(o,i,2)}function Gc(i){var o=i.alternate;return i===Be||o!==null&&o===Be}function j_(i,o){ma=Bc=!0;var c=i.pending;c===null?o.next=o:(o.next=c.next,c.next=o),i.pending=o}function L_(i,o,c){if((c&4194048)!==0){var h=o.lanes;h&=i.pendingLanes,c|=h,o.lanes=c,U0(i,c)}}var zo={readContext:ln,use:qc,useCallback:At,useContext:At,useEffect:At,useImperativeHandle:At,useLayoutEffect:At,useInsertionEffect:At,useMemo:At,useReducer:At,useRef:At,useState:At,useDebugValue:At,useDeferredValue:At,useTransition:At,useSyncExternalStore:At,useId:At,useHostTransitionStatus:At,useFormState:At,useActionState:At,useOptimistic:At,useMemoCache:At,useCacheRefresh:At};zo.useEffectEvent=At;var z_={readContext:ln,use:qc,useCallback:function(i,o){return Tn().memoizedState=[i,o===void 0?null:o],i},useContext:ln,useEffect:v_,useImperativeHandle:function(i,o,c){c=c!=null?c.concat([i]):null,Vc(4194308,4,k_.bind(null,o,i),c)},useLayoutEffect:function(i,o){return Vc(4194308,4,i,o)},useInsertionEffect:function(i,o){Vc(4,2,i,o)},useMemo:function(i,o){var c=Tn();o=o===void 0?null:o;var h=i();if(Si){ze(!0);try{i()}finally{ze(!1)}}return c.memoizedState=[h,o],h},useReducer:function(i,o,c){var h=Tn();if(c!==void 0){var b=c(o);if(Si){ze(!0);try{c(o)}finally{ze(!1)}}}else b=o;return h.memoizedState=h.baseState=b,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:b},h.queue=i,i=i.dispatch=J2.bind(null,Be,i),[h.memoizedState,i]},useRef:function(i){var o=Tn();return i={current:i},o.memoizedState=i},useState:function(i){i=Lh(i);var o=i.queue,c=D_.bind(null,Be,o);return o.dispatch=c,[i.memoizedState,c]},useDebugValue:Bh,useDeferredValue:function(i,o){var c=Tn();return $h(c,i,o)},useTransition:function(){var i=Lh(!1);return i=R_.bind(null,Be,i.queue,!0,!1),Tn().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,o,c){var h=Be,b=Tn();if(nt){if(c===void 0)throw Error(r(407));c=c()}else{if(c=o(),gt===null)throw Error(r(349));(Xe&127)!==0||s_(h,o,c)}b.memoizedState=c;var _={value:c,getSnapshot:o};return b.queue=_,v_(a_.bind(null,h,_,i),[i]),h.flags|=2048,ya(9,{destroy:void 0},i_.bind(null,h,_,c,o),null),c},useId:function(){var i=Tn(),o=gt.identifierPrefix;if(nt){var c=zr,h=Lr;c=(h&~(1<<32-Ie(h)-1)).toString(32)+c,o="_"+o+"R_"+c,c=$c++,0<c&&(o+="H"+c.toString(32)),o+="_"}else c=F2++,o="_"+o+"r_"+c.toString(32)+"_";return i.memoizedState=o},useHostTransitionStatus:qh,useFormState:m_,useActionState:m_,useOptimistic:function(i){var o=Tn();o.memoizedState=o.baseState=i;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=c,o=Fh.bind(null,Be,!0,c),c.dispatch=o,[i,o]},useMemoCache:Mh,useCacheRefresh:function(){return Tn().memoizedState=Q2.bind(null,Be)},useEffectEvent:function(i){var o=Tn(),c={impl:i};return o.memoizedState=c,function(){if((ot&2)!==0)throw Error(r(440));return c.impl.apply(void 0,arguments)}}},Vh={readContext:ln,use:qc,useCallback:C_,useContext:ln,useEffect:Ph,useImperativeHandle:E_,useInsertionEffect:w_,useLayoutEffect:S_,useMemo:T_,useReducer:Fc,useRef:__,useState:function(){return Fc(ls)},useDebugValue:Bh,useDeferredValue:function(i,o){var c=Nt();return A_(c,ht.memoizedState,i,o)},useTransition:function(){var i=Fc(ls)[0],o=Nt().memoizedState;return[typeof i=="boolean"?i:jo(i),o]},useSyncExternalStore:r_,useId:I_,useHostTransitionStatus:qh,useFormState:g_,useActionState:g_,useOptimistic:function(i,o){var c=Nt();return c_(c,ht,i,o)},useMemoCache:Mh,useCacheRefresh:M_};Vh.useEffectEvent=x_;var P_={readContext:ln,use:qc,useCallback:C_,useContext:ln,useEffect:Ph,useImperativeHandle:E_,useInsertionEffect:w_,useLayoutEffect:S_,useMemo:T_,useReducer:jh,useRef:__,useState:function(){return jh(ls)},useDebugValue:Bh,useDeferredValue:function(i,o){var c=Nt();return ht===null?$h(c,i,o):A_(c,ht.memoizedState,i,o)},useTransition:function(){var i=jh(ls)[0],o=Nt().memoizedState;return[typeof i=="boolean"?i:jo(i),o]},useSyncExternalStore:r_,useId:I_,useHostTransitionStatus:qh,useFormState:b_,useActionState:b_,useOptimistic:function(i,o){var c=Nt();return ht!==null?c_(c,ht,i,o):(c.baseState=i,[i,c.queue.dispatch])},useMemoCache:Mh,useCacheRefresh:M_};P_.useEffectEvent=x_;function Hh(i,o,c,h){o=i.memoizedState,c=c(h,o),c=c==null?o:p({},o,c),i.memoizedState=c,i.lanes===0&&(i.updateQueue.baseState=c)}var Gh={enqueueSetState:function(i,o,c){i=i._reactInternals;var h=tr(),b=Is(h);b.payload=o,c!=null&&(b.callback=c),o=Ms(i,b,h),o!==null&&($n(o,i,h),No(o,i,h))},enqueueReplaceState:function(i,o,c){i=i._reactInternals;var h=tr(),b=Is(h);b.tag=1,b.payload=o,c!=null&&(b.callback=c),o=Ms(i,b,h),o!==null&&($n(o,i,h),No(o,i,h))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var c=tr(),h=Is(c);h.tag=2,o!=null&&(h.callback=o),o=Ms(i,h,c),o!==null&&($n(o,i,c),No(o,i,c))}};function B_(i,o,c,h,b,_,E){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(h,_,E):o.prototype&&o.prototype.isPureReactComponent?!So(c,h)||!So(b,_):!0}function $_(i,o,c,h){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(c,h),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(c,h),o.state!==i&&Gh.enqueueReplaceState(o,o.state,null)}function ki(i,o){var c=o;if("ref"in o){c={};for(var h in o)h!=="ref"&&(c[h]=o[h])}if(i=i.defaultProps){c===o&&(c=p({},c));for(var b in i)c[b]===void 0&&(c[b]=i[b])}return c}function U_(i){kc(i)}function q_(i){console.error(i)}function F_(i){kc(i)}function Kc(i,o){try{var c=i.onUncaughtError;c(o.value,{componentStack:o.stack})}catch(h){setTimeout(function(){throw h})}}function V_(i,o,c){try{var h=i.onCaughtError;h(c.value,{componentStack:c.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(b){setTimeout(function(){throw b})}}function Kh(i,o,c){return c=Is(c),c.tag=3,c.payload={element:null},c.callback=function(){Kc(i,o)},c}function H_(i){return i=Is(i),i.tag=3,i}function G_(i,o,c,h){var b=c.type.getDerivedStateFromError;if(typeof b=="function"){var _=h.value;i.payload=function(){return b(_)},i.callback=function(){V_(o,c,h)}}var E=c.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(i.callback=function(){V_(o,c,h),typeof b!="function"&&(Bs===null?Bs=new Set([this]):Bs.add(this));var R=h.stack;this.componentDidCatch(h.value,{componentStack:R!==null?R:""})})}function Y2(i,o,c,h,b){if(c.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(o=c.alternate,o!==null&&ca(o,c,b,!0),c=Yn.current,c!==null){switch(c.tag){case 31:case 13:return yr===null?iu():c.alternate===null&&Rt===0&&(Rt=3),c.flags&=-257,c.flags|=65536,c.lanes=b,h===Dc?c.flags|=16384:(o=c.updateQueue,o===null?c.updateQueue=new Set([h]):o.add(h),bp(i,h,b)),!1;case 22:return c.flags|=65536,h===Dc?c.flags|=16384:(o=c.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([h])},c.updateQueue=o):(c=o.retryQueue,c===null?o.retryQueue=new Set([h]):c.add(h)),bp(i,h,b)),!1}throw Error(r(435,c.tag))}return bp(i,h,b),iu(),!1}if(nt)return o=Yn.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=b,h!==dh&&(i=Error(r(422),{cause:h}),Co(hr(i,c)))):(h!==dh&&(o=Error(r(423),{cause:h}),Co(hr(o,c))),i=i.current.alternate,i.flags|=65536,b&=-b,i.lanes|=b,h=hr(h,c),b=Kh(i.stateNode,h,b),Sh(i,b),Rt!==4&&(Rt=2)),!1;var _=Error(r(520),{cause:h});if(_=hr(_,c),Ho===null?Ho=[_]:Ho.push(_),Rt!==4&&(Rt=2),o===null)return!0;h=hr(h,c),c=o;do{switch(c.tag){case 3:return c.flags|=65536,i=b&-b,c.lanes|=i,i=Kh(c.stateNode,h,i),Sh(c,i),!1;case 1:if(o=c.type,_=c.stateNode,(c.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Bs===null||!Bs.has(_))))return c.flags|=65536,b&=-b,c.lanes|=b,b=H_(b),G_(b,i,c,h),Sh(c,b),!1}c=c.return}while(c!==null);return!1}var Zh=Error(r(461)),jt=!1;function cn(i,o,c,h){o.child=i===null?Jb(o,null,c,h):wi(o,i.child,c,h)}function K_(i,o,c,h,b){c=c.render;var _=o.ref;if("ref"in h){var E={};for(var R in h)R!=="ref"&&(E[R]=h[R])}else E=h;return bi(o),h=Rh(i,o,c,E,_,b),R=Oh(),i!==null&&!jt?(Nh(i,o,b),cs(i,o,b)):(nt&&R&&uh(o),o.flags|=1,cn(i,o,h,b),o.child)}function Z_(i,o,c,h,b){if(i===null){var _=c.type;return typeof _=="function"&&!oh(_)&&_.defaultProps===void 0&&c.compare===null?(o.tag=15,o.type=_,Q_(i,o,_,h,b)):(i=Ac(c.type,null,h,o,o.mode,b),i.ref=o.ref,i.return=o,o.child=i)}if(_=i.child,!np(i,b)){var E=_.memoizedProps;if(c=c.compare,c=c!==null?c:So,c(E,h)&&i.ref===o.ref)return cs(i,o,b)}return o.flags|=1,i=rs(_,h),i.ref=o.ref,i.return=o,o.child=i}function Q_(i,o,c,h,b){if(i!==null){var _=i.memoizedProps;if(So(_,h)&&i.ref===o.ref)if(jt=!1,o.pendingProps=h=_,np(i,b))(i.flags&131072)!==0&&(jt=!0);else return o.lanes=i.lanes,cs(i,o,b)}return Qh(i,o,c,h,b)}function J_(i,o,c,h){var b=h.children,_=i!==null?i.memoizedState:null;if(i===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),h.mode==="hidden"){if((o.flags&128)!==0){if(_=_!==null?_.baseLanes|c:c,i!==null){for(h=o.child=i.child,b=0;h!==null;)b=b|h.lanes|h.childLanes,h=h.sibling;h=b&~_}else h=0,o.child=null;return Y_(i,o,_,c,h)}if((c&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},i!==null&&Ic(o,_!==null?_.cachePool:null),_!==null?Wb(o,_):Eh(),e_(o);else return h=o.lanes=536870912,Y_(i,o,_!==null?_.baseLanes|c:c,c,h)}else _!==null?(Ic(o,_.cachePool),Wb(o,_),js(),o.memoizedState=null):(i!==null&&Ic(o,null),Eh(),js());return cn(i,o,b,c),o.child}function Po(i,o){return i!==null&&i.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function Y_(i,o,c,h,b){var _=_h();return _=_===null?null:{parent:Mt._currentValue,pool:_},o.memoizedState={baseLanes:c,cachePool:_},i!==null&&Ic(o,null),Eh(),e_(o),i!==null&&ca(i,o,h,!0),o.childLanes=b,null}function Zc(i,o){return o=Jc({mode:o.mode,children:o.children},i.mode),o.ref=i.ref,i.child=o,o.return=i,o}function X_(i,o,c){return wi(o,i.child,null,c),i=Zc(o,o.pendingProps),i.flags|=2,Xn(o),o.memoizedState=null,i}function X2(i,o,c){var h=o.pendingProps,b=(o.flags&128)!==0;if(o.flags&=-129,i===null){if(nt){if(h.mode==="hidden")return i=Zc(o,h),o.lanes=536870912,Po(null,i);if(Th(o),(i=vt)?(i=ux(i,gr),i=i!==null&&i.data==="&"?i:null,i!==null&&(o.memoizedState={dehydrated:i,treeContext:Ts!==null?{id:Lr,overflow:zr}:null,retryLane:536870912,hydrationErrors:null},c=jb(i),c.return=o,o.child=c,on=o,vt=null)):i=null,i===null)throw Rs(o);return o.lanes=536870912,null}return Zc(o,h)}var _=i.memoizedState;if(_!==null){var E=_.dehydrated;if(Th(o),b)if(o.flags&256)o.flags&=-257,o=X_(i,o,c);else if(o.memoizedState!==null)o.child=i.child,o.flags|=128,o=null;else throw Error(r(558));else if(jt||ca(i,o,c,!1),b=(c&i.childLanes)!==0,jt||b){if(h=gt,h!==null&&(E=q0(h,c),E!==0&&E!==_.retryLane))throw _.retryLane=E,pi(i,E),$n(h,i,E),Zh;iu(),o=X_(i,o,c)}else i=_.treeContext,vt=br(E.nextSibling),on=o,nt=!0,As=null,gr=!1,i!==null&&Pb(o,i),o=Zc(o,h),o.flags|=4096;return o}return i=rs(i.child,{mode:h.mode,children:h.children}),i.ref=o.ref,o.child=i,i.return=o,i}function Qc(i,o){var c=o.ref;if(c===null)i!==null&&i.ref!==null&&(o.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(r(284));(i===null||i.ref!==c)&&(o.flags|=4194816)}}function Qh(i,o,c,h,b){return bi(o),c=Rh(i,o,c,h,void 0,b),h=Oh(),i!==null&&!jt?(Nh(i,o,b),cs(i,o,b)):(nt&&h&&uh(o),o.flags|=1,cn(i,o,c,b),o.child)}function W_(i,o,c,h,b,_){return bi(o),o.updateQueue=null,c=n_(o,h,c,b),t_(i),h=Oh(),i!==null&&!jt?(Nh(i,o,_),cs(i,o,_)):(nt&&h&&uh(o),o.flags|=1,cn(i,o,c,_),o.child)}function ev(i,o,c,h,b){if(bi(o),o.stateNode===null){var _=ia,E=c.contextType;typeof E=="object"&&E!==null&&(_=ln(E)),_=new c(h,_),o.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=Gh,o.stateNode=_,_._reactInternals=o,_=o.stateNode,_.props=h,_.state=o.memoizedState,_.refs={},xh(o),E=c.contextType,_.context=typeof E=="object"&&E!==null?ln(E):ia,_.state=o.memoizedState,E=c.getDerivedStateFromProps,typeof E=="function"&&(Hh(o,c,E,h),_.state=o.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(E=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),E!==_.state&&Gh.enqueueReplaceState(_,_.state,null),Mo(o,h,_,b),Io(),_.state=o.memoizedState),typeof _.componentDidMount=="function"&&(o.flags|=4194308),h=!0}else if(i===null){_=o.stateNode;var R=o.memoizedProps,$=ki(c,R);_.props=$;var W=_.context,ae=c.contextType;E=ia,typeof ae=="object"&&ae!==null&&(E=ln(ae));var ue=c.getDerivedStateFromProps;ae=typeof ue=="function"||typeof _.getSnapshotBeforeUpdate=="function",R=o.pendingProps!==R,ae||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(R||W!==E)&&$_(o,_,h,E),Ns=!1;var te=o.memoizedState;_.state=te,Mo(o,h,_,b),Io(),W=o.memoizedState,R||te!==W||Ns?(typeof ue=="function"&&(Hh(o,c,ue,h),W=o.memoizedState),($=Ns||B_(o,c,$,h,te,W,E))?(ae||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(o.flags|=4194308)):(typeof _.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=h,o.memoizedState=W),_.props=h,_.state=W,_.context=E,h=$):(typeof _.componentDidMount=="function"&&(o.flags|=4194308),h=!1)}else{_=o.stateNode,wh(i,o),E=o.memoizedProps,ae=ki(c,E),_.props=ae,ue=o.pendingProps,te=_.context,W=c.contextType,$=ia,typeof W=="object"&&W!==null&&($=ln(W)),R=c.getDerivedStateFromProps,(W=typeof R=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(E!==ue||te!==$)&&$_(o,_,h,$),Ns=!1,te=o.memoizedState,_.state=te,Mo(o,h,_,b),Io();var se=o.memoizedState;E!==ue||te!==se||Ns||i!==null&&i.dependencies!==null&&Oc(i.dependencies)?(typeof R=="function"&&(Hh(o,c,R,h),se=o.memoizedState),(ae=Ns||B_(o,c,ae,h,te,se,$)||i!==null&&i.dependencies!==null&&Oc(i.dependencies))?(W||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(h,se,$),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(h,se,$)),typeof _.componentDidUpdate=="function"&&(o.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof _.componentDidUpdate!="function"||E===i.memoizedProps&&te===i.memoizedState||(o.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||E===i.memoizedProps&&te===i.memoizedState||(o.flags|=1024),o.memoizedProps=h,o.memoizedState=se),_.props=h,_.state=se,_.context=$,h=ae):(typeof _.componentDidUpdate!="function"||E===i.memoizedProps&&te===i.memoizedState||(o.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||E===i.memoizedProps&&te===i.memoizedState||(o.flags|=1024),h=!1)}return _=h,Qc(i,o),h=(o.flags&128)!==0,_||h?(_=o.stateNode,c=h&&typeof c.getDerivedStateFromError!="function"?null:_.render(),o.flags|=1,i!==null&&h?(o.child=wi(o,i.child,null,b),o.child=wi(o,null,c,b)):cn(i,o,c,b),o.memoizedState=_.state,i=o.child):i=cs(i,o,b),i}function tv(i,o,c,h){return gi(),o.flags|=256,cn(i,o,c,h),o.child}var Jh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Yh(i){return{baseLanes:i,cachePool:Vb()}}function Xh(i,o,c){return i=i!==null?i.childLanes&~c:0,o&&(i|=er),i}function nv(i,o,c){var h=o.pendingProps,b=!1,_=(o.flags&128)!==0,E;if((E=_)||(E=i!==null&&i.memoizedState===null?!1:(Ot.current&2)!==0),E&&(b=!0,o.flags&=-129),E=(o.flags&32)!==0,o.flags&=-33,i===null){if(nt){if(b?Ds(o):js(),(i=vt)?(i=ux(i,gr),i=i!==null&&i.data!=="&"?i:null,i!==null&&(o.memoizedState={dehydrated:i,treeContext:Ts!==null?{id:Lr,overflow:zr}:null,retryLane:536870912,hydrationErrors:null},c=jb(i),c.return=o,o.child=c,on=o,vt=null)):i=null,i===null)throw Rs(o);return Dp(i)?o.lanes=32:o.lanes=536870912,null}var R=h.children;return h=h.fallback,b?(js(),b=o.mode,R=Jc({mode:"hidden",children:R},b),h=mi(h,b,c,null),R.return=o,h.return=o,R.sibling=h,o.child=R,h=o.child,h.memoizedState=Yh(c),h.childLanes=Xh(i,E,c),o.memoizedState=Jh,Po(null,h)):(Ds(o),Wh(o,R))}var $=i.memoizedState;if($!==null&&(R=$.dehydrated,R!==null)){if(_)o.flags&256?(Ds(o),o.flags&=-257,o=ep(i,o,c)):o.memoizedState!==null?(js(),o.child=i.child,o.flags|=128,o=null):(js(),R=h.fallback,b=o.mode,h=Jc({mode:"visible",children:h.children},b),R=mi(R,b,c,null),R.flags|=2,h.return=o,R.return=o,h.sibling=R,o.child=h,wi(o,i.child,null,c),h=o.child,h.memoizedState=Yh(c),h.childLanes=Xh(i,E,c),o.memoizedState=Jh,o=Po(null,h));else if(Ds(o),Dp(R)){if(E=R.nextSibling&&R.nextSibling.dataset,E)var W=E.dgst;E=W,h=Error(r(419)),h.stack="",h.digest=E,Co({value:h,source:null,stack:null}),o=ep(i,o,c)}else if(jt||ca(i,o,c,!1),E=(c&i.childLanes)!==0,jt||E){if(E=gt,E!==null&&(h=q0(E,c),h!==0&&h!==$.retryLane))throw $.retryLane=h,pi(i,h),$n(E,i,h),Zh;Mp(R)||iu(),o=ep(i,o,c)}else Mp(R)?(o.flags|=192,o.child=i.child,o=null):(i=$.treeContext,vt=br(R.nextSibling),on=o,nt=!0,As=null,gr=!1,i!==null&&Pb(o,i),o=Wh(o,h.children),o.flags|=4096);return o}return b?(js(),R=h.fallback,b=o.mode,$=i.child,W=$.sibling,h=rs($,{mode:"hidden",children:h.children}),h.subtreeFlags=$.subtreeFlags&65011712,W!==null?R=rs(W,R):(R=mi(R,b,c,null),R.flags|=2),R.return=o,h.return=o,h.sibling=R,o.child=h,Po(null,h),h=o.child,R=i.child.memoizedState,R===null?R=Yh(c):(b=R.cachePool,b!==null?($=Mt._currentValue,b=b.parent!==$?{parent:$,pool:$}:b):b=Vb(),R={baseLanes:R.baseLanes|c,cachePool:b}),h.memoizedState=R,h.childLanes=Xh(i,E,c),o.memoizedState=Jh,Po(i.child,h)):(Ds(o),c=i.child,i=c.sibling,c=rs(c,{mode:"visible",children:h.children}),c.return=o,c.sibling=null,i!==null&&(E=o.deletions,E===null?(o.deletions=[i],o.flags|=16):E.push(i)),o.child=c,o.memoizedState=null,c)}function Wh(i,o){return o=Jc({mode:"visible",children:o},i.mode),o.return=i,i.child=o}function Jc(i,o){return i=Jn(22,i,null,o),i.lanes=0,i}function ep(i,o,c){return wi(o,i.child,null,c),i=Wh(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function rv(i,o,c){i.lanes|=o;var h=i.alternate;h!==null&&(h.lanes|=o),mh(i.return,o,c)}function tp(i,o,c,h,b,_){var E=i.memoizedState;E===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:h,tail:c,tailMode:b,treeForkCount:_}:(E.isBackwards=o,E.rendering=null,E.renderingStartTime=0,E.last=h,E.tail=c,E.tailMode=b,E.treeForkCount=_)}function sv(i,o,c){var h=o.pendingProps,b=h.revealOrder,_=h.tail;h=h.children;var E=Ot.current,R=(E&2)!==0;if(R?(E=E&1|2,o.flags|=128):E&=1,S(Ot,E),cn(i,o,h,c),h=nt?Eo:0,!R&&i!==null&&(i.flags&128)!==0)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&rv(i,c,o);else if(i.tag===19)rv(i,c,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(b){case"forwards":for(c=o.child,b=null;c!==null;)i=c.alternate,i!==null&&Pc(i)===null&&(b=c),c=c.sibling;c=b,c===null?(b=o.child,o.child=null):(b=c.sibling,c.sibling=null),tp(o,!1,b,c,_,h);break;case"backwards":case"unstable_legacy-backwards":for(c=null,b=o.child,o.child=null;b!==null;){if(i=b.alternate,i!==null&&Pc(i)===null){o.child=b;break}i=b.sibling,b.sibling=c,c=b,b=i}tp(o,!0,c,null,_,h);break;case"together":tp(o,!1,null,null,void 0,h);break;default:o.memoizedState=null}return o.child}function cs(i,o,c){if(i!==null&&(o.dependencies=i.dependencies),Ps|=o.lanes,(c&o.childLanes)===0)if(i!==null){if(ca(i,o,c,!1),(c&o.childLanes)===0)return null}else return null;if(i!==null&&o.child!==i.child)throw Error(r(153));if(o.child!==null){for(i=o.child,c=rs(i,i.pendingProps),o.child=c,c.return=o;i.sibling!==null;)i=i.sibling,c=c.sibling=rs(i,i.pendingProps),c.return=o;c.sibling=null}return o.child}function np(i,o){return(i.lanes&o)!==0?!0:(i=i.dependencies,!!(i!==null&&Oc(i)))}function W2(i,o,c){switch(o.tag){case 3:_e(o,o.stateNode.containerInfo),Os(o,Mt,i.memoizedState.cache),gi();break;case 27:case 5:Pe(o);break;case 4:_e(o,o.stateNode.containerInfo);break;case 10:Os(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,Th(o),null;break;case 13:var h=o.memoizedState;if(h!==null)return h.dehydrated!==null?(Ds(o),o.flags|=128,null):(c&o.child.childLanes)!==0?nv(i,o,c):(Ds(o),i=cs(i,o,c),i!==null?i.sibling:null);Ds(o);break;case 19:var b=(i.flags&128)!==0;if(h=(c&o.childLanes)!==0,h||(ca(i,o,c,!1),h=(c&o.childLanes)!==0),b){if(h)return sv(i,o,c);o.flags|=128}if(b=o.memoizedState,b!==null&&(b.rendering=null,b.tail=null,b.lastEffect=null),S(Ot,Ot.current),h)break;return null;case 22:return o.lanes=0,J_(i,o,c,o.pendingProps);case 24:Os(o,Mt,i.memoizedState.cache)}return cs(i,o,c)}function iv(i,o,c){if(i!==null)if(i.memoizedProps!==o.pendingProps)jt=!0;else{if(!np(i,c)&&(o.flags&128)===0)return jt=!1,W2(i,o,c);jt=(i.flags&131072)!==0}else jt=!1,nt&&(o.flags&1048576)!==0&&zb(o,Eo,o.index);switch(o.lanes=0,o.tag){case 16:e:{var h=o.pendingProps;if(i=vi(o.elementType),o.type=i,typeof i=="function")oh(i)?(h=ki(i,h),o.tag=1,o=ev(null,o,i,h,c)):(o.tag=0,o=Qh(null,o,i,h,c));else{if(i!=null){var b=i.$$typeof;if(b===M){o.tag=11,o=K_(null,o,i,h,c);break e}else if(b===B){o.tag=14,o=Z_(null,o,i,h,c);break e}}throw o=Y(i)||i,Error(r(306,o,""))}}return o;case 0:return Qh(i,o,o.type,o.pendingProps,c);case 1:return h=o.type,b=ki(h,o.pendingProps),ev(i,o,h,b,c);case 3:e:{if(_e(o,o.stateNode.containerInfo),i===null)throw Error(r(387));h=o.pendingProps;var _=o.memoizedState;b=_.element,wh(i,o),Mo(o,h,null,c);var E=o.memoizedState;if(h=E.cache,Os(o,Mt,h),h!==_.cache&&gh(o,[Mt],c,!0),Io(),h=E.element,_.isDehydrated)if(_={element:h,isDehydrated:!1,cache:E.cache},o.updateQueue.baseState=_,o.memoizedState=_,o.flags&256){o=tv(i,o,h,c);break e}else if(h!==b){b=hr(Error(r(424)),o),Co(b),o=tv(i,o,h,c);break e}else for(i=o.stateNode.containerInfo,i.nodeType===9?i=i.body:i=i.nodeName==="HTML"?i.ownerDocument.body:i,vt=br(i.firstChild),on=o,nt=!0,As=null,gr=!0,c=Jb(o,null,h,c),o.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(gi(),h===b){o=cs(i,o,c);break e}cn(i,o,h,c)}o=o.child}return o;case 26:return Qc(i,o),i===null?(c=gx(o.type,null,o.pendingProps,null))?o.memoizedState=c:nt||(c=o.type,i=o.pendingProps,h=du(de.current).createElement(c),h[an]=o,h[Dn]=i,un(h,c,i),Wt(h),o.stateNode=h):o.memoizedState=gx(o.type,i.memoizedProps,o.pendingProps,i.memoizedState),null;case 27:return Pe(o),i===null&&nt&&(h=o.stateNode=hx(o.type,o.pendingProps,de.current),on=o,gr=!0,b=vt,Fs(o.type)?(jp=b,vt=br(h.firstChild)):vt=b),cn(i,o,o.pendingProps.children,c),Qc(i,o),i===null&&(o.flags|=4194304),o.child;case 5:return i===null&&nt&&((b=h=vt)&&(h=RR(h,o.type,o.pendingProps,gr),h!==null?(o.stateNode=h,on=o,vt=br(h.firstChild),gr=!1,b=!0):b=!1),b||Rs(o)),Pe(o),b=o.type,_=o.pendingProps,E=i!==null?i.memoizedProps:null,h=_.children,Op(b,_)?h=null:E!==null&&Op(b,E)&&(o.flags|=32),o.memoizedState!==null&&(b=Rh(i,o,V2,null,null,c),Wo._currentValue=b),Qc(i,o),cn(i,o,h,c),o.child;case 6:return i===null&&nt&&((i=c=vt)&&(c=OR(c,o.pendingProps,gr),c!==null?(o.stateNode=c,on=o,vt=null,i=!0):i=!1),i||Rs(o)),null;case 13:return nv(i,o,c);case 4:return _e(o,o.stateNode.containerInfo),h=o.pendingProps,i===null?o.child=wi(o,null,h,c):cn(i,o,h,c),o.child;case 11:return K_(i,o,o.type,o.pendingProps,c);case 7:return cn(i,o,o.pendingProps,c),o.child;case 8:return cn(i,o,o.pendingProps.children,c),o.child;case 12:return cn(i,o,o.pendingProps.children,c),o.child;case 10:return h=o.pendingProps,Os(o,o.type,h.value),cn(i,o,h.children,c),o.child;case 9:return b=o.type._context,h=o.pendingProps.children,bi(o),b=ln(b),h=h(b),o.flags|=1,cn(i,o,h,c),o.child;case 14:return Z_(i,o,o.type,o.pendingProps,c);case 15:return Q_(i,o,o.type,o.pendingProps,c);case 19:return sv(i,o,c);case 31:return X2(i,o,c);case 22:return J_(i,o,c,o.pendingProps);case 24:return bi(o),h=ln(Mt),i===null?(b=_h(),b===null&&(b=gt,_=yh(),b.pooledCache=_,_.refCount++,_!==null&&(b.pooledCacheLanes|=c),b=_),o.memoizedState={parent:h,cache:b},xh(o),Os(o,Mt,b)):((i.lanes&c)!==0&&(wh(i,o),Mo(o,null,null,c),Io()),b=i.memoizedState,_=o.memoizedState,b.parent!==h?(b={parent:h,cache:h},o.memoizedState=b,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=b),Os(o,Mt,h)):(h=_.cache,Os(o,Mt,h),h!==b.cache&&gh(o,[Mt],c,!0))),cn(i,o,o.pendingProps.children,c),o.child;case 29:throw o.pendingProps}throw Error(r(156,o.tag))}function us(i){i.flags|=4}function rp(i,o,c,h,b){if((o=(i.mode&32)!==0)&&(o=!1),o){if(i.flags|=16777216,(b&335544128)===b)if(i.stateNode.complete)i.flags|=8192;else if(Iv())i.flags|=8192;else throw xi=Dc,vh}else i.flags&=-16777217}function av(i,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!xx(o))if(Iv())i.flags|=8192;else throw xi=Dc,vh}function Yc(i,o){o!==null&&(i.flags|=4),i.flags&16384&&(o=i.tag!==22?B0():536870912,i.lanes|=o,xa|=o)}function Bo(i,o){if(!nt)switch(i.tailMode){case"hidden":o=i.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?i.tail=null:c.sibling=null;break;case"collapsed":c=i.tail;for(var h=null;c!==null;)c.alternate!==null&&(h=c),c=c.sibling;h===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:h.sibling=null}}function xt(i){var o=i.alternate!==null&&i.alternate.child===i.child,c=0,h=0;if(o)for(var b=i.child;b!==null;)c|=b.lanes|b.childLanes,h|=b.subtreeFlags&65011712,h|=b.flags&65011712,b.return=i,b=b.sibling;else for(b=i.child;b!==null;)c|=b.lanes|b.childLanes,h|=b.subtreeFlags,h|=b.flags,b.return=i,b=b.sibling;return i.subtreeFlags|=h,i.childLanes=c,o}function eR(i,o,c){var h=o.pendingProps;switch(fh(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xt(o),null;case 1:return xt(o),null;case 3:return c=o.stateNode,h=null,i!==null&&(h=i.memoizedState.cache),o.memoizedState.cache!==h&&(o.flags|=2048),as(Mt),ve(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(i===null||i.child===null)&&(la(o)?us(o):i===null||i.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,hh())),xt(o),null;case 26:var b=o.type,_=o.memoizedState;return i===null?(us(o),_!==null?(xt(o),av(o,_)):(xt(o),rp(o,b,null,h,c))):_?_!==i.memoizedState?(us(o),xt(o),av(o,_)):(xt(o),o.flags&=-16777217):(i=i.memoizedProps,i!==h&&us(o),xt(o),rp(o,b,i,h,c)),null;case 27:if(tt(o),c=de.current,b=o.type,i!==null&&o.stateNode!=null)i.memoizedProps!==h&&us(o);else{if(!h){if(o.stateNode===null)throw Error(r(166));return xt(o),null}i=z.current,la(o)?Bb(o):(i=hx(b,h,c),o.stateNode=i,us(o))}return xt(o),null;case 5:if(tt(o),b=o.type,i!==null&&o.stateNode!=null)i.memoizedProps!==h&&us(o);else{if(!h){if(o.stateNode===null)throw Error(r(166));return xt(o),null}if(_=z.current,la(o))Bb(o);else{var E=du(de.current);switch(_){case 1:_=E.createElementNS("http://www.w3.org/2000/svg",b);break;case 2:_=E.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;default:switch(b){case"svg":_=E.createElementNS("http://www.w3.org/2000/svg",b);break;case"math":_=E.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;case"script":_=E.createElement("div"),_.innerHTML="<script><\/script>",_=_.removeChild(_.firstChild);break;case"select":_=typeof h.is=="string"?E.createElement("select",{is:h.is}):E.createElement("select"),h.multiple?_.multiple=!0:h.size&&(_.size=h.size);break;default:_=typeof h.is=="string"?E.createElement(b,{is:h.is}):E.createElement(b)}}_[an]=o,_[Dn]=h;e:for(E=o.child;E!==null;){if(E.tag===5||E.tag===6)_.appendChild(E.stateNode);else if(E.tag!==4&&E.tag!==27&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===o)break e;for(;E.sibling===null;){if(E.return===null||E.return===o)break e;E=E.return}E.sibling.return=E.return,E=E.sibling}o.stateNode=_;e:switch(un(_,b,h),b){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}h&&us(o)}}return xt(o),rp(o,o.type,i===null?null:i.memoizedProps,o.pendingProps,c),null;case 6:if(i&&o.stateNode!=null)i.memoizedProps!==h&&us(o);else{if(typeof h!="string"&&o.stateNode===null)throw Error(r(166));if(i=de.current,la(o)){if(i=o.stateNode,c=o.memoizedProps,h=null,b=on,b!==null)switch(b.tag){case 27:case 5:h=b.memoizedProps}i[an]=o,i=!!(i.nodeValue===c||h!==null&&h.suppressHydrationWarning===!0||nx(i.nodeValue,c)),i||Rs(o,!0)}else i=du(i).createTextNode(h),i[an]=o,o.stateNode=i}return xt(o),null;case 31:if(c=o.memoizedState,i===null||i.memoizedState!==null){if(h=la(o),c!==null){if(i===null){if(!h)throw Error(r(318));if(i=o.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(557));i[an]=o}else gi(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;xt(o),i=!1}else c=hh(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=c),i=!0;if(!i)return o.flags&256?(Xn(o),o):(Xn(o),null);if((o.flags&128)!==0)throw Error(r(558))}return xt(o),null;case 13:if(h=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(b=la(o),h!==null&&h.dehydrated!==null){if(i===null){if(!b)throw Error(r(318));if(b=o.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(r(317));b[an]=o}else gi(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;xt(o),b=!1}else b=hh(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=b),b=!0;if(!b)return o.flags&256?(Xn(o),o):(Xn(o),null)}return Xn(o),(o.flags&128)!==0?(o.lanes=c,o):(c=h!==null,i=i!==null&&i.memoizedState!==null,c&&(h=o.child,b=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(b=h.alternate.memoizedState.cachePool.pool),_=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(_=h.memoizedState.cachePool.pool),_!==b&&(h.flags|=2048)),c!==i&&c&&(o.child.flags|=8192),Yc(o,o.updateQueue),xt(o),null);case 4:return ve(),i===null&&Ep(o.stateNode.containerInfo),xt(o),null;case 10:return as(o.type),xt(o),null;case 19:if(V(Ot),h=o.memoizedState,h===null)return xt(o),null;if(b=(o.flags&128)!==0,_=h.rendering,_===null)if(b)Bo(h,!1);else{if(Rt!==0||i!==null&&(i.flags&128)!==0)for(i=o.child;i!==null;){if(_=Pc(i),_!==null){for(o.flags|=128,Bo(h,!1),i=_.updateQueue,o.updateQueue=i,Yc(o,i),o.subtreeFlags=0,i=c,c=o.child;c!==null;)Db(c,i),c=c.sibling;return S(Ot,Ot.current&1|2),nt&&ss(o,h.treeForkCount),o.child}i=i.sibling}h.tail!==null&&Ce()>nu&&(o.flags|=128,b=!0,Bo(h,!1),o.lanes=4194304)}else{if(!b)if(i=Pc(_),i!==null){if(o.flags|=128,b=!0,i=i.updateQueue,o.updateQueue=i,Yc(o,i),Bo(h,!0),h.tail===null&&h.tailMode==="hidden"&&!_.alternate&&!nt)return xt(o),null}else 2*Ce()-h.renderingStartTime>nu&&c!==536870912&&(o.flags|=128,b=!0,Bo(h,!1),o.lanes=4194304);h.isBackwards?(_.sibling=o.child,o.child=_):(i=h.last,i!==null?i.sibling=_:o.child=_,h.last=_)}return h.tail!==null?(i=h.tail,h.rendering=i,h.tail=i.sibling,h.renderingStartTime=Ce(),i.sibling=null,c=Ot.current,S(Ot,b?c&1|2:c&1),nt&&ss(o,h.treeForkCount),i):(xt(o),null);case 22:case 23:return Xn(o),Ch(),h=o.memoizedState!==null,i!==null?i.memoizedState!==null!==h&&(o.flags|=8192):h&&(o.flags|=8192),h?(c&536870912)!==0&&(o.flags&128)===0&&(xt(o),o.subtreeFlags&6&&(o.flags|=8192)):xt(o),c=o.updateQueue,c!==null&&Yc(o,c.retryQueue),c=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),h=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(h=o.memoizedState.cachePool.pool),h!==c&&(o.flags|=2048),i!==null&&V(_i),null;case 24:return c=null,i!==null&&(c=i.memoizedState.cache),o.memoizedState.cache!==c&&(o.flags|=2048),as(Mt),xt(o),null;case 25:return null;case 30:return null}throw Error(r(156,o.tag))}function tR(i,o){switch(fh(o),o.tag){case 1:return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return as(Mt),ve(),i=o.flags,(i&65536)!==0&&(i&128)===0?(o.flags=i&-65537|128,o):null;case 26:case 27:case 5:return tt(o),null;case 31:if(o.memoizedState!==null){if(Xn(o),o.alternate===null)throw Error(r(340));gi()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 13:if(Xn(o),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(r(340));gi()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return V(Ot),null;case 4:return ve(),null;case 10:return as(o.type),null;case 22:case 23:return Xn(o),Ch(),i!==null&&V(_i),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 24:return as(Mt),null;case 25:return null;default:return null}}function ov(i,o){switch(fh(o),o.tag){case 3:as(Mt),ve();break;case 26:case 27:case 5:tt(o);break;case 4:ve();break;case 31:o.memoizedState!==null&&Xn(o);break;case 13:Xn(o);break;case 19:V(Ot);break;case 10:as(o.type);break;case 22:case 23:Xn(o),Ch(),i!==null&&V(_i);break;case 24:as(Mt)}}function $o(i,o){try{var c=o.updateQueue,h=c!==null?c.lastEffect:null;if(h!==null){var b=h.next;c=b;do{if((c.tag&i)===i){h=void 0;var _=c.create,E=c.inst;h=_(),E.destroy=h}c=c.next}while(c!==b)}}catch(R){ut(o,o.return,R)}}function Ls(i,o,c){try{var h=o.updateQueue,b=h!==null?h.lastEffect:null;if(b!==null){var _=b.next;h=_;do{if((h.tag&i)===i){var E=h.inst,R=E.destroy;if(R!==void 0){E.destroy=void 0,b=o;var $=c,W=R;try{W()}catch(ae){ut(b,$,ae)}}}h=h.next}while(h!==_)}}catch(ae){ut(o,o.return,ae)}}function lv(i){var o=i.updateQueue;if(o!==null){var c=i.stateNode;try{Xb(o,c)}catch(h){ut(i,i.return,h)}}}function cv(i,o,c){c.props=ki(i.type,i.memoizedProps),c.state=i.memoizedState;try{c.componentWillUnmount()}catch(h){ut(i,o,h)}}function Uo(i,o){try{var c=i.ref;if(c!==null){switch(i.tag){case 26:case 27:case 5:var h=i.stateNode;break;case 30:h=i.stateNode;break;default:h=i.stateNode}typeof c=="function"?i.refCleanup=c(h):c.current=h}}catch(b){ut(i,o,b)}}function Pr(i,o){var c=i.ref,h=i.refCleanup;if(c!==null)if(typeof h=="function")try{h()}catch(b){ut(i,o,b)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(b){ut(i,o,b)}else c.current=null}function uv(i){var o=i.type,c=i.memoizedProps,h=i.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":c.autoFocus&&h.focus();break e;case"img":c.src?h.src=c.src:c.srcSet&&(h.srcset=c.srcSet)}}catch(b){ut(i,i.return,b)}}function sp(i,o,c){try{var h=i.stateNode;SR(h,i.type,c,o),h[Dn]=o}catch(b){ut(i,i.return,b)}}function fv(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Fs(i.type)||i.tag===4}function ip(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||fv(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Fs(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function ap(i,o,c){var h=i.tag;if(h===5||h===6)i=i.stateNode,o?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(i,o):(o=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,o.appendChild(i),c=c._reactRootContainer,c!=null||o.onclick!==null||(o.onclick=ts));else if(h!==4&&(h===27&&Fs(i.type)&&(c=i.stateNode,o=null),i=i.child,i!==null))for(ap(i,o,c),i=i.sibling;i!==null;)ap(i,o,c),i=i.sibling}function Xc(i,o,c){var h=i.tag;if(h===5||h===6)i=i.stateNode,o?c.insertBefore(i,o):c.appendChild(i);else if(h!==4&&(h===27&&Fs(i.type)&&(c=i.stateNode),i=i.child,i!==null))for(Xc(i,o,c),i=i.sibling;i!==null;)Xc(i,o,c),i=i.sibling}function dv(i){var o=i.stateNode,c=i.memoizedProps;try{for(var h=i.type,b=o.attributes;b.length;)o.removeAttributeNode(b[0]);un(o,h,c),o[an]=i,o[Dn]=c}catch(_){ut(i,i.return,_)}}var fs=!1,Lt=!1,op=!1,hv=typeof WeakSet=="function"?WeakSet:Set,en=null;function nR(i,o){if(i=i.containerInfo,Ap=_u,i=Eb(i),eh(i)){if("selectionStart"in i)var c={start:i.selectionStart,end:i.selectionEnd};else e:{c=(c=i.ownerDocument)&&c.defaultView||window;var h=c.getSelection&&c.getSelection();if(h&&h.rangeCount!==0){c=h.anchorNode;var b=h.anchorOffset,_=h.focusNode;h=h.focusOffset;try{c.nodeType,_.nodeType}catch{c=null;break e}var E=0,R=-1,$=-1,W=0,ae=0,ue=i,te=null;t:for(;;){for(var se;ue!==c||b!==0&&ue.nodeType!==3||(R=E+b),ue!==_||h!==0&&ue.nodeType!==3||($=E+h),ue.nodeType===3&&(E+=ue.nodeValue.length),(se=ue.firstChild)!==null;)te=ue,ue=se;for(;;){if(ue===i)break t;if(te===c&&++W===b&&(R=E),te===_&&++ae===h&&($=E),(se=ue.nextSibling)!==null)break;ue=te,te=ue.parentNode}ue=se}c=R===-1||$===-1?null:{start:R,end:$}}else c=null}c=c||{start:0,end:0}}else c=null;for(Rp={focusedElem:i,selectionRange:c},_u=!1,en=o;en!==null;)if(o=en,i=o.child,(o.subtreeFlags&1028)!==0&&i!==null)i.return=o,en=i;else for(;en!==null;){switch(o=en,_=o.alternate,i=o.flags,o.tag){case 0:if((i&4)!==0&&(i=o.updateQueue,i=i!==null?i.events:null,i!==null))for(c=0;c<i.length;c++)b=i[c],b.ref.impl=b.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&_!==null){i=void 0,c=o,b=_.memoizedProps,_=_.memoizedState,h=c.stateNode;try{var xe=ki(c.type,b);i=h.getSnapshotBeforeUpdate(xe,_),h.__reactInternalSnapshotBeforeUpdate=i}catch(Me){ut(c,c.return,Me)}}break;case 3:if((i&1024)!==0){if(i=o.stateNode.containerInfo,c=i.nodeType,c===9)Ip(i);else if(c===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":Ip(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(r(163))}if(i=o.sibling,i!==null){i.return=o.return,en=i;break}en=o.return}}function pv(i,o,c){var h=c.flags;switch(c.tag){case 0:case 11:case 15:hs(i,c),h&4&&$o(5,c);break;case 1:if(hs(i,c),h&4)if(i=c.stateNode,o===null)try{i.componentDidMount()}catch(E){ut(c,c.return,E)}else{var b=ki(c.type,o.memoizedProps);o=o.memoizedState;try{i.componentDidUpdate(b,o,i.__reactInternalSnapshotBeforeUpdate)}catch(E){ut(c,c.return,E)}}h&64&&lv(c),h&512&&Uo(c,c.return);break;case 3:if(hs(i,c),h&64&&(i=c.updateQueue,i!==null)){if(o=null,c.child!==null)switch(c.child.tag){case 27:case 5:o=c.child.stateNode;break;case 1:o=c.child.stateNode}try{Xb(i,o)}catch(E){ut(c,c.return,E)}}break;case 27:o===null&&h&4&&dv(c);case 26:case 5:hs(i,c),o===null&&h&4&&uv(c),h&512&&Uo(c,c.return);break;case 12:hs(i,c);break;case 31:hs(i,c),h&4&&yv(i,c);break;case 13:hs(i,c),h&4&&bv(i,c),h&64&&(i=c.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(c=fR.bind(null,c),NR(i,c))));break;case 22:if(h=c.memoizedState!==null||fs,!h){o=o!==null&&o.memoizedState!==null||Lt,b=fs;var _=Lt;fs=h,(Lt=o)&&!_?ps(i,c,(c.subtreeFlags&8772)!==0):hs(i,c),fs=b,Lt=_}break;case 30:break;default:hs(i,c)}}function mv(i){var o=i.alternate;o!==null&&(i.alternate=null,mv(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&zd(o)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var wt=null,Ln=!1;function ds(i,o,c){for(c=c.child;c!==null;)gv(i,o,c),c=c.sibling}function gv(i,o,c){if(Ne&&typeof Ne.onCommitFiberUnmount=="function")try{Ne.onCommitFiberUnmount(rt,c)}catch{}switch(c.tag){case 26:Lt||Pr(c,o),ds(i,o,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:Lt||Pr(c,o);var h=wt,b=Ln;Fs(c.type)&&(wt=c.stateNode,Ln=!1),ds(i,o,c),Jo(c.stateNode),wt=h,Ln=b;break;case 5:Lt||Pr(c,o);case 6:if(h=wt,b=Ln,wt=null,ds(i,o,c),wt=h,Ln=b,wt!==null)if(Ln)try{(wt.nodeType===9?wt.body:wt.nodeName==="HTML"?wt.ownerDocument.body:wt).removeChild(c.stateNode)}catch(_){ut(c,o,_)}else try{wt.removeChild(c.stateNode)}catch(_){ut(c,o,_)}break;case 18:wt!==null&&(Ln?(i=wt,lx(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,c.stateNode),Ra(i)):lx(wt,c.stateNode));break;case 4:h=wt,b=Ln,wt=c.stateNode.containerInfo,Ln=!0,ds(i,o,c),wt=h,Ln=b;break;case 0:case 11:case 14:case 15:Ls(2,c,o),Lt||Ls(4,c,o),ds(i,o,c);break;case 1:Lt||(Pr(c,o),h=c.stateNode,typeof h.componentWillUnmount=="function"&&cv(c,o,h)),ds(i,o,c);break;case 21:ds(i,o,c);break;case 22:Lt=(h=Lt)||c.memoizedState!==null,ds(i,o,c),Lt=h;break;default:ds(i,o,c)}}function yv(i,o){if(o.memoizedState===null&&(i=o.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{Ra(i)}catch(c){ut(o,o.return,c)}}}function bv(i,o){if(o.memoizedState===null&&(i=o.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Ra(i)}catch(c){ut(o,o.return,c)}}function rR(i){switch(i.tag){case 31:case 13:case 19:var o=i.stateNode;return o===null&&(o=i.stateNode=new hv),o;case 22:return i=i.stateNode,o=i._retryCache,o===null&&(o=i._retryCache=new hv),o;default:throw Error(r(435,i.tag))}}function Wc(i,o){var c=rR(i);o.forEach(function(h){if(!c.has(h)){c.add(h);var b=dR.bind(null,i,h);h.then(b,b)}})}function zn(i,o){var c=o.deletions;if(c!==null)for(var h=0;h<c.length;h++){var b=c[h],_=i,E=o,R=E;e:for(;R!==null;){switch(R.tag){case 27:if(Fs(R.type)){wt=R.stateNode,Ln=!1;break e}break;case 5:wt=R.stateNode,Ln=!1;break e;case 3:case 4:wt=R.stateNode.containerInfo,Ln=!0;break e}R=R.return}if(wt===null)throw Error(r(160));gv(_,E,b),wt=null,Ln=!1,_=b.alternate,_!==null&&(_.return=null),b.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)_v(o,i),o=o.sibling}var Rr=null;function _v(i,o){var c=i.alternate,h=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:zn(o,i),Pn(i),h&4&&(Ls(3,i,i.return),$o(3,i),Ls(5,i,i.return));break;case 1:zn(o,i),Pn(i),h&512&&(Lt||c===null||Pr(c,c.return)),h&64&&fs&&(i=i.updateQueue,i!==null&&(h=i.callbacks,h!==null&&(c=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=c===null?h:c.concat(h))));break;case 26:var b=Rr;if(zn(o,i),Pn(i),h&512&&(Lt||c===null||Pr(c,c.return)),h&4){var _=c!==null?c.memoizedState:null;if(h=i.memoizedState,c===null)if(h===null)if(i.stateNode===null){e:{h=i.type,c=i.memoizedProps,b=b.ownerDocument||b;t:switch(h){case"title":_=b.getElementsByTagName("title")[0],(!_||_[po]||_[an]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=b.createElement(h),b.head.insertBefore(_,b.querySelector("head > title"))),un(_,h,c),_[an]=i,Wt(_),h=_;break e;case"link":var E=_x("link","href",b).get(h+(c.href||""));if(E){for(var R=0;R<E.length;R++)if(_=E[R],_.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&_.getAttribute("rel")===(c.rel==null?null:c.rel)&&_.getAttribute("title")===(c.title==null?null:c.title)&&_.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){E.splice(R,1);break t}}_=b.createElement(h),un(_,h,c),b.head.appendChild(_);break;case"meta":if(E=_x("meta","content",b).get(h+(c.content||""))){for(R=0;R<E.length;R++)if(_=E[R],_.getAttribute("content")===(c.content==null?null:""+c.content)&&_.getAttribute("name")===(c.name==null?null:c.name)&&_.getAttribute("property")===(c.property==null?null:c.property)&&_.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&_.getAttribute("charset")===(c.charSet==null?null:c.charSet)){E.splice(R,1);break t}}_=b.createElement(h),un(_,h,c),b.head.appendChild(_);break;default:throw Error(r(468,h))}_[an]=i,Wt(_),h=_}i.stateNode=h}else vx(b,i.type,i.stateNode);else i.stateNode=bx(b,h,i.memoizedProps);else _!==h?(_===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):_.count--,h===null?vx(b,i.type,i.stateNode):bx(b,h,i.memoizedProps)):h===null&&i.stateNode!==null&&sp(i,i.memoizedProps,c.memoizedProps)}break;case 27:zn(o,i),Pn(i),h&512&&(Lt||c===null||Pr(c,c.return)),c!==null&&h&4&&sp(i,i.memoizedProps,c.memoizedProps);break;case 5:if(zn(o,i),Pn(i),h&512&&(Lt||c===null||Pr(c,c.return)),i.flags&32){b=i.stateNode;try{Xi(b,"")}catch(xe){ut(i,i.return,xe)}}h&4&&i.stateNode!=null&&(b=i.memoizedProps,sp(i,b,c!==null?c.memoizedProps:b)),h&1024&&(op=!0);break;case 6:if(zn(o,i),Pn(i),h&4){if(i.stateNode===null)throw Error(r(162));h=i.memoizedProps,c=i.stateNode;try{c.nodeValue=h}catch(xe){ut(i,i.return,xe)}}break;case 3:if(mu=null,b=Rr,Rr=hu(o.containerInfo),zn(o,i),Rr=b,Pn(i),h&4&&c!==null&&c.memoizedState.isDehydrated)try{Ra(o.containerInfo)}catch(xe){ut(i,i.return,xe)}op&&(op=!1,vv(i));break;case 4:h=Rr,Rr=hu(i.stateNode.containerInfo),zn(o,i),Pn(i),Rr=h;break;case 12:zn(o,i),Pn(i);break;case 31:zn(o,i),Pn(i),h&4&&(h=i.updateQueue,h!==null&&(i.updateQueue=null,Wc(i,h)));break;case 13:zn(o,i),Pn(i),i.child.flags&8192&&i.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(tu=Ce()),h&4&&(h=i.updateQueue,h!==null&&(i.updateQueue=null,Wc(i,h)));break;case 22:b=i.memoizedState!==null;var $=c!==null&&c.memoizedState!==null,W=fs,ae=Lt;if(fs=W||b,Lt=ae||$,zn(o,i),Lt=ae,fs=W,Pn(i),h&8192)e:for(o=i.stateNode,o._visibility=b?o._visibility&-2:o._visibility|1,b&&(c===null||$||fs||Lt||Ei(i)),c=null,o=i;;){if(o.tag===5||o.tag===26){if(c===null){$=c=o;try{if(_=$.stateNode,b)E=_.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{R=$.stateNode;var ue=$.memoizedProps.style,te=ue!=null&&ue.hasOwnProperty("display")?ue.display:null;R.style.display=te==null||typeof te=="boolean"?"":(""+te).trim()}}catch(xe){ut($,$.return,xe)}}}else if(o.tag===6){if(c===null){$=o;try{$.stateNode.nodeValue=b?"":$.memoizedProps}catch(xe){ut($,$.return,xe)}}}else if(o.tag===18){if(c===null){$=o;try{var se=$.stateNode;b?cx(se,!0):cx($.stateNode,!1)}catch(xe){ut($,$.return,xe)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===i)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break e;for(;o.sibling===null;){if(o.return===null||o.return===i)break e;c===o&&(c=null),o=o.return}c===o&&(c=null),o.sibling.return=o.return,o=o.sibling}h&4&&(h=i.updateQueue,h!==null&&(c=h.retryQueue,c!==null&&(h.retryQueue=null,Wc(i,c))));break;case 19:zn(o,i),Pn(i),h&4&&(h=i.updateQueue,h!==null&&(i.updateQueue=null,Wc(i,h)));break;case 30:break;case 21:break;default:zn(o,i),Pn(i)}}function Pn(i){var o=i.flags;if(o&2){try{for(var c,h=i.return;h!==null;){if(fv(h)){c=h;break}h=h.return}if(c==null)throw Error(r(160));switch(c.tag){case 27:var b=c.stateNode,_=ip(i);Xc(i,_,b);break;case 5:var E=c.stateNode;c.flags&32&&(Xi(E,""),c.flags&=-33);var R=ip(i);Xc(i,R,E);break;case 3:case 4:var $=c.stateNode.containerInfo,W=ip(i);ap(i,W,$);break;default:throw Error(r(161))}}catch(ae){ut(i,i.return,ae)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function vv(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var o=i;vv(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),i=i.sibling}}function hs(i,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)pv(i,o.alternate,o),o=o.sibling}function Ei(i){for(i=i.child;i!==null;){var o=i;switch(o.tag){case 0:case 11:case 14:case 15:Ls(4,o,o.return),Ei(o);break;case 1:Pr(o,o.return);var c=o.stateNode;typeof c.componentWillUnmount=="function"&&cv(o,o.return,c),Ei(o);break;case 27:Jo(o.stateNode);case 26:case 5:Pr(o,o.return),Ei(o);break;case 22:o.memoizedState===null&&Ei(o);break;case 30:Ei(o);break;default:Ei(o)}i=i.sibling}}function ps(i,o,c){for(c=c&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var h=o.alternate,b=i,_=o,E=_.flags;switch(_.tag){case 0:case 11:case 15:ps(b,_,c),$o(4,_);break;case 1:if(ps(b,_,c),h=_,b=h.stateNode,typeof b.componentDidMount=="function")try{b.componentDidMount()}catch(W){ut(h,h.return,W)}if(h=_,b=h.updateQueue,b!==null){var R=h.stateNode;try{var $=b.shared.hiddenCallbacks;if($!==null)for(b.shared.hiddenCallbacks=null,b=0;b<$.length;b++)Yb($[b],R)}catch(W){ut(h,h.return,W)}}c&&E&64&&lv(_),Uo(_,_.return);break;case 27:dv(_);case 26:case 5:ps(b,_,c),c&&h===null&&E&4&&uv(_),Uo(_,_.return);break;case 12:ps(b,_,c);break;case 31:ps(b,_,c),c&&E&4&&yv(b,_);break;case 13:ps(b,_,c),c&&E&4&&bv(b,_);break;case 22:_.memoizedState===null&&ps(b,_,c),Uo(_,_.return);break;case 30:break;default:ps(b,_,c)}o=o.sibling}}function lp(i,o){var c=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),i=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(i=o.memoizedState.cachePool.pool),i!==c&&(i!=null&&i.refCount++,c!=null&&To(c))}function cp(i,o){i=null,o.alternate!==null&&(i=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==i&&(o.refCount++,i!=null&&To(i))}function Or(i,o,c,h){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)xv(i,o,c,h),o=o.sibling}function xv(i,o,c,h){var b=o.flags;switch(o.tag){case 0:case 11:case 15:Or(i,o,c,h),b&2048&&$o(9,o);break;case 1:Or(i,o,c,h);break;case 3:Or(i,o,c,h),b&2048&&(i=null,o.alternate!==null&&(i=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==i&&(o.refCount++,i!=null&&To(i)));break;case 12:if(b&2048){Or(i,o,c,h),i=o.stateNode;try{var _=o.memoizedProps,E=_.id,R=_.onPostCommit;typeof R=="function"&&R(E,o.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch($){ut(o,o.return,$)}}else Or(i,o,c,h);break;case 31:Or(i,o,c,h);break;case 13:Or(i,o,c,h);break;case 23:break;case 22:_=o.stateNode,E=o.alternate,o.memoizedState!==null?_._visibility&2?Or(i,o,c,h):qo(i,o):_._visibility&2?Or(i,o,c,h):(_._visibility|=2,ba(i,o,c,h,(o.subtreeFlags&10256)!==0||!1)),b&2048&&lp(E,o);break;case 24:Or(i,o,c,h),b&2048&&cp(o.alternate,o);break;default:Or(i,o,c,h)}}function ba(i,o,c,h,b){for(b=b&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var _=i,E=o,R=c,$=h,W=E.flags;switch(E.tag){case 0:case 11:case 15:ba(_,E,R,$,b),$o(8,E);break;case 23:break;case 22:var ae=E.stateNode;E.memoizedState!==null?ae._visibility&2?ba(_,E,R,$,b):qo(_,E):(ae._visibility|=2,ba(_,E,R,$,b)),b&&W&2048&&lp(E.alternate,E);break;case 24:ba(_,E,R,$,b),b&&W&2048&&cp(E.alternate,E);break;default:ba(_,E,R,$,b)}o=o.sibling}}function qo(i,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var c=i,h=o,b=h.flags;switch(h.tag){case 22:qo(c,h),b&2048&&lp(h.alternate,h);break;case 24:qo(c,h),b&2048&&cp(h.alternate,h);break;default:qo(c,h)}o=o.sibling}}var Fo=8192;function _a(i,o,c){if(i.subtreeFlags&Fo)for(i=i.child;i!==null;)wv(i,o,c),i=i.sibling}function wv(i,o,c){switch(i.tag){case 26:_a(i,o,c),i.flags&Fo&&i.memoizedState!==null&&FR(c,Rr,i.memoizedState,i.memoizedProps);break;case 5:_a(i,o,c);break;case 3:case 4:var h=Rr;Rr=hu(i.stateNode.containerInfo),_a(i,o,c),Rr=h;break;case 22:i.memoizedState===null&&(h=i.alternate,h!==null&&h.memoizedState!==null?(h=Fo,Fo=16777216,_a(i,o,c),Fo=h):_a(i,o,c));break;default:_a(i,o,c)}}function Sv(i){var o=i.alternate;if(o!==null&&(i=o.child,i!==null)){o.child=null;do o=i.sibling,i.sibling=null,i=o;while(i!==null)}}function Vo(i){var o=i.deletions;if((i.flags&16)!==0){if(o!==null)for(var c=0;c<o.length;c++){var h=o[c];en=h,Ev(h,i)}Sv(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)kv(i),i=i.sibling}function kv(i){switch(i.tag){case 0:case 11:case 15:Vo(i),i.flags&2048&&Ls(9,i,i.return);break;case 3:Vo(i);break;case 12:Vo(i);break;case 22:var o=i.stateNode;i.memoizedState!==null&&o._visibility&2&&(i.return===null||i.return.tag!==13)?(o._visibility&=-3,eu(i)):Vo(i);break;default:Vo(i)}}function eu(i){var o=i.deletions;if((i.flags&16)!==0){if(o!==null)for(var c=0;c<o.length;c++){var h=o[c];en=h,Ev(h,i)}Sv(i)}for(i=i.child;i!==null;){switch(o=i,o.tag){case 0:case 11:case 15:Ls(8,o,o.return),eu(o);break;case 22:c=o.stateNode,c._visibility&2&&(c._visibility&=-3,eu(o));break;default:eu(o)}i=i.sibling}}function Ev(i,o){for(;en!==null;){var c=en;switch(c.tag){case 0:case 11:case 15:Ls(8,c,o);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var h=c.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:To(c.memoizedState.cache)}if(h=c.child,h!==null)h.return=c,en=h;else e:for(c=i;en!==null;){h=en;var b=h.sibling,_=h.return;if(mv(h),h===c){en=null;break e}if(b!==null){b.return=_,en=b;break e}en=_}}}var sR={getCacheForType:function(i){var o=ln(Mt),c=o.data.get(i);return c===void 0&&(c=i(),o.data.set(i,c)),c},cacheSignal:function(){return ln(Mt).controller.signal}},iR=typeof WeakMap=="function"?WeakMap:Map,ot=0,gt=null,Ze=null,Xe=0,ct=0,Wn=null,zs=!1,va=!1,up=!1,ms=0,Rt=0,Ps=0,Ci=0,fp=0,er=0,xa=0,Ho=null,Bn=null,dp=!1,tu=0,Cv=0,nu=1/0,ru=null,Bs=null,qt=0,$s=null,wa=null,gs=0,hp=0,pp=null,Tv=null,Go=0,mp=null;function tr(){return(ot&2)!==0&&Xe!==0?Xe&-Xe:P.T!==null?xp():F0()}function Av(){if(er===0)if((Xe&536870912)===0||nt){var i=cr;cr<<=1,(cr&3932160)===0&&(cr=262144),er=i}else er=536870912;return i=Yn.current,i!==null&&(i.flags|=32),er}function $n(i,o,c){(i===gt&&(ct===2||ct===9)||i.cancelPendingCommit!==null)&&(Sa(i,0),Us(i,Xe,er,!1)),ho(i,c),((ot&2)===0||i!==gt)&&(i===gt&&((ot&2)===0&&(Ci|=c),Rt===4&&Us(i,Xe,er,!1)),Br(i))}function Rv(i,o,c){if((ot&6)!==0)throw Error(r(327));var h=!c&&(o&127)===0&&(o&i.expiredLanes)===0||Hi(i,o),b=h?lR(i,o):yp(i,o,!0),_=h;do{if(b===0){va&&!h&&Us(i,o,0,!1);break}else{if(c=i.current.alternate,_&&!aR(c)){b=yp(i,o,!1),_=!1;continue}if(b===2){if(_=o,i.errorRecoveryDisabledLanes&_)var E=0;else E=i.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){o=E;e:{var R=i;b=Ho;var $=R.current.memoizedState.isDehydrated;if($&&(Sa(R,E).flags|=256),E=yp(R,E,!1),E!==2){if(up&&!$){R.errorRecoveryDisabledLanes|=_,Ci|=_,b=4;break e}_=Bn,Bn=b,_!==null&&(Bn===null?Bn=_:Bn.push.apply(Bn,_))}b=E}if(_=!1,b!==2)continue}}if(b===1){Sa(i,0),Us(i,o,0,!0);break}e:{switch(h=i,_=b,_){case 0:case 1:throw Error(r(345));case 4:if((o&4194048)!==o)break;case 6:Us(h,o,er,!zs);break e;case 2:Bn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((o&62914560)===o&&(b=tu+300-Ce(),10<b)){if(Us(h,o,er,!zs),ci(h,0,!0)!==0)break e;gs=o,h.timeoutHandle=ax(Ov.bind(null,h,c,Bn,ru,dp,o,er,Ci,xa,zs,_,"Throttled",-0,0),b);break e}Ov(h,c,Bn,ru,dp,o,er,Ci,xa,zs,_,null,-0,0)}}break}while(!0);Br(i)}function Ov(i,o,c,h,b,_,E,R,$,W,ae,ue,te,se){if(i.timeoutHandle=-1,ue=o.subtreeFlags,ue&8192||(ue&16785408)===16785408){ue={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ts},wv(o,_,ue);var xe=(_&62914560)===_?tu-Ce():(_&4194048)===_?Cv-Ce():0;if(xe=VR(ue,xe),xe!==null){gs=_,i.cancelPendingCommit=xe(Pv.bind(null,i,o,_,c,h,b,E,R,$,ae,ue,null,te,se)),Us(i,_,E,!W);return}}Pv(i,o,_,c,h,b,E,R,$)}function aR(i){for(var o=i;;){var c=o.tag;if((c===0||c===11||c===15)&&o.flags&16384&&(c=o.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var h=0;h<c.length;h++){var b=c[h],_=b.getSnapshot;b=b.value;try{if(!Qn(_(),b))return!1}catch{return!1}}if(c=o.child,o.subtreeFlags&16384&&c!==null)c.return=o,o=c;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Us(i,o,c,h){o&=~fp,o&=~Ci,i.suspendedLanes|=o,i.pingedLanes&=~o,h&&(i.warmLanes|=o),h=i.expirationTimes;for(var b=o;0<b;){var _=31-Ie(b),E=1<<_;h[_]=-1,b&=~E}c!==0&&$0(i,c,o)}function su(){return(ot&6)===0?(Ko(0),!1):!0}function gp(){if(Ze!==null){if(ct===0)var i=Ze.return;else i=Ze,is=yi=null,Ih(i),ha=null,Ro=0,i=Ze;for(;i!==null;)ov(i.alternate,i),i=i.return;Ze=null}}function Sa(i,o){var c=i.timeoutHandle;c!==-1&&(i.timeoutHandle=-1,CR(c)),c=i.cancelPendingCommit,c!==null&&(i.cancelPendingCommit=null,c()),gs=0,gp(),gt=i,Ze=c=rs(i.current,null),Xe=o,ct=0,Wn=null,zs=!1,va=Hi(i,o),up=!1,xa=er=fp=Ci=Ps=Rt=0,Bn=Ho=null,dp=!1,(o&8)!==0&&(o|=o&32);var h=i.entangledLanes;if(h!==0)for(i=i.entanglements,h&=o;0<h;){var b=31-Ie(h),_=1<<b;o|=i[b],h&=~_}return ms=o,Ec(),c}function Nv(i,o){Be=null,P.H=zo,o===da||o===Mc?(o=Kb(),ct=3):o===vh?(o=Kb(),ct=4):ct=o===Zh?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,Wn=o,Ze===null&&(Rt=1,Kc(i,hr(o,i.current)))}function Iv(){var i=Yn.current;return i===null?!0:(Xe&4194048)===Xe?yr===null:(Xe&62914560)===Xe||(Xe&536870912)!==0?i===yr:!1}function Mv(){var i=P.H;return P.H=zo,i===null?zo:i}function Dv(){var i=P.A;return P.A=sR,i}function iu(){Rt=4,zs||(Xe&4194048)!==Xe&&Yn.current!==null||(va=!0),(Ps&134217727)===0&&(Ci&134217727)===0||gt===null||Us(gt,Xe,er,!1)}function yp(i,o,c){var h=ot;ot|=2;var b=Mv(),_=Dv();(gt!==i||Xe!==o)&&(ru=null,Sa(i,o)),o=!1;var E=Rt;e:do try{if(ct!==0&&Ze!==null){var R=Ze,$=Wn;switch(ct){case 8:gp(),E=6;break e;case 3:case 2:case 9:case 6:Yn.current===null&&(o=!0);var W=ct;if(ct=0,Wn=null,ka(i,R,$,W),c&&va){E=0;break e}break;default:W=ct,ct=0,Wn=null,ka(i,R,$,W)}}oR(),E=Rt;break}catch(ae){Nv(i,ae)}while(!0);return o&&i.shellSuspendCounter++,is=yi=null,ot=h,P.H=b,P.A=_,Ze===null&&(gt=null,Xe=0,Ec()),E}function oR(){for(;Ze!==null;)jv(Ze)}function lR(i,o){var c=ot;ot|=2;var h=Mv(),b=Dv();gt!==i||Xe!==o?(ru=null,nu=Ce()+500,Sa(i,o)):va=Hi(i,o);e:do try{if(ct!==0&&Ze!==null){o=Ze;var _=Wn;t:switch(ct){case 1:ct=0,Wn=null,ka(i,o,_,1);break;case 2:case 9:if(Hb(_)){ct=0,Wn=null,Lv(o);break}o=function(){ct!==2&&ct!==9||gt!==i||(ct=7),Br(i)},_.then(o,o);break e;case 3:ct=7;break e;case 4:ct=5;break e;case 7:Hb(_)?(ct=0,Wn=null,Lv(o)):(ct=0,Wn=null,ka(i,o,_,7));break;case 5:var E=null;switch(Ze.tag){case 26:E=Ze.memoizedState;case 5:case 27:var R=Ze;if(E?xx(E):R.stateNode.complete){ct=0,Wn=null;var $=R.sibling;if($!==null)Ze=$;else{var W=R.return;W!==null?(Ze=W,au(W)):Ze=null}break t}}ct=0,Wn=null,ka(i,o,_,5);break;case 6:ct=0,Wn=null,ka(i,o,_,6);break;case 8:gp(),Rt=6;break e;default:throw Error(r(462))}}cR();break}catch(ae){Nv(i,ae)}while(!0);return is=yi=null,P.H=h,P.A=b,ot=c,Ze!==null?0:(gt=null,Xe=0,Ec(),Rt)}function cR(){for(;Ze!==null&&!Ve();)jv(Ze)}function jv(i){var o=iv(i.alternate,i,ms);i.memoizedProps=i.pendingProps,o===null?au(i):Ze=o}function Lv(i){var o=i,c=o.alternate;switch(o.tag){case 15:case 0:o=W_(c,o,o.pendingProps,o.type,void 0,Xe);break;case 11:o=W_(c,o,o.pendingProps,o.type.render,o.ref,Xe);break;case 5:Ih(o);default:ov(c,o),o=Ze=Db(o,ms),o=iv(c,o,ms)}i.memoizedProps=i.pendingProps,o===null?au(i):Ze=o}function ka(i,o,c,h){is=yi=null,Ih(o),ha=null,Ro=0;var b=o.return;try{if(Y2(i,b,o,c,Xe)){Rt=1,Kc(i,hr(c,i.current)),Ze=null;return}}catch(_){if(b!==null)throw Ze=b,_;Rt=1,Kc(i,hr(c,i.current)),Ze=null;return}o.flags&32768?(nt||h===1?i=!0:va||(Xe&536870912)!==0?i=!1:(zs=i=!0,(h===2||h===9||h===3||h===6)&&(h=Yn.current,h!==null&&h.tag===13&&(h.flags|=16384))),zv(o,i)):au(o)}function au(i){var o=i;do{if((o.flags&32768)!==0){zv(o,zs);return}i=o.return;var c=eR(o.alternate,o,ms);if(c!==null){Ze=c;return}if(o=o.sibling,o!==null){Ze=o;return}Ze=o=i}while(o!==null);Rt===0&&(Rt=5)}function zv(i,o){do{var c=tR(i.alternate,i);if(c!==null){c.flags&=32767,Ze=c;return}if(c=i.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!o&&(i=i.sibling,i!==null)){Ze=i;return}Ze=i=c}while(i!==null);Rt=6,Ze=null}function Pv(i,o,c,h,b,_,E,R,$){i.cancelPendingCommit=null;do ou();while(qt!==0);if((ot&6)!==0)throw Error(r(327));if(o!==null){if(o===i.current)throw Error(r(177));if(_=o.lanes|o.childLanes,_|=ih,qA(i,c,_,E,R,$),i===gt&&(Ze=gt=null,Xe=0),wa=o,$s=i,gs=c,hp=_,pp=b,Tv=h,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,hR(pe,function(){return Fv(),null})):(i.callbackNode=null,i.callbackPriority=0),h=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||h){h=P.T,P.T=null,b=H.p,H.p=2,E=ot,ot|=4;try{nR(i,o,c)}finally{ot=E,H.p=b,P.T=h}}qt=1,Bv(),$v(),Uv()}}function Bv(){if(qt===1){qt=0;var i=$s,o=wa,c=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||c){c=P.T,P.T=null;var h=H.p;H.p=2;var b=ot;ot|=4;try{_v(o,i);var _=Rp,E=Eb(i.containerInfo),R=_.focusedElem,$=_.selectionRange;if(E!==R&&R&&R.ownerDocument&&kb(R.ownerDocument.documentElement,R)){if($!==null&&eh(R)){var W=$.start,ae=$.end;if(ae===void 0&&(ae=W),"selectionStart"in R)R.selectionStart=W,R.selectionEnd=Math.min(ae,R.value.length);else{var ue=R.ownerDocument||document,te=ue&&ue.defaultView||window;if(te.getSelection){var se=te.getSelection(),xe=R.textContent.length,Me=Math.min($.start,xe),mt=$.end===void 0?Me:Math.min($.end,xe);!se.extend&&Me>mt&&(E=mt,mt=Me,Me=E);var Q=Sb(R,Me),F=Sb(R,mt);if(Q&&F&&(se.rangeCount!==1||se.anchorNode!==Q.node||se.anchorOffset!==Q.offset||se.focusNode!==F.node||se.focusOffset!==F.offset)){var X=ue.createRange();X.setStart(Q.node,Q.offset),se.removeAllRanges(),Me>mt?(se.addRange(X),se.extend(F.node,F.offset)):(X.setEnd(F.node,F.offset),se.addRange(X))}}}}for(ue=[],se=R;se=se.parentNode;)se.nodeType===1&&ue.push({element:se,left:se.scrollLeft,top:se.scrollTop});for(typeof R.focus=="function"&&R.focus(),R=0;R<ue.length;R++){var oe=ue[R];oe.element.scrollLeft=oe.left,oe.element.scrollTop=oe.top}}_u=!!Ap,Rp=Ap=null}finally{ot=b,H.p=h,P.T=c}}i.current=o,qt=2}}function $v(){if(qt===2){qt=0;var i=$s,o=wa,c=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||c){c=P.T,P.T=null;var h=H.p;H.p=2;var b=ot;ot|=4;try{pv(i,o.alternate,o)}finally{ot=b,H.p=h,P.T=c}}qt=3}}function Uv(){if(qt===4||qt===3){qt=0,Ke();var i=$s,o=wa,c=gs,h=Tv;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?qt=5:(qt=0,wa=$s=null,qv(i,i.pendingLanes));var b=i.pendingLanes;if(b===0&&(Bs=null),jd(c),o=o.stateNode,Ne&&typeof Ne.onCommitFiberRoot=="function")try{Ne.onCommitFiberRoot(rt,o,void 0,(o.current.flags&128)===128)}catch{}if(h!==null){o=P.T,b=H.p,H.p=2,P.T=null;try{for(var _=i.onRecoverableError,E=0;E<h.length;E++){var R=h[E];_(R.value,{componentStack:R.stack})}}finally{P.T=o,H.p=b}}(gs&3)!==0&&ou(),Br(i),b=i.pendingLanes,(c&261930)!==0&&(b&42)!==0?i===mp?Go++:(Go=0,mp=i):Go=0,Ko(0)}}function qv(i,o){(i.pooledCacheLanes&=o)===0&&(o=i.pooledCache,o!=null&&(i.pooledCache=null,To(o)))}function ou(){return Bv(),$v(),Uv(),Fv()}function Fv(){if(qt!==5)return!1;var i=$s,o=hp;hp=0;var c=jd(gs),h=P.T,b=H.p;try{H.p=32>c?32:c,P.T=null,c=pp,pp=null;var _=$s,E=gs;if(qt=0,wa=$s=null,gs=0,(ot&6)!==0)throw Error(r(331));var R=ot;if(ot|=4,kv(_.current),xv(_,_.current,E,c),ot=R,Ko(0,!1),Ne&&typeof Ne.onPostCommitFiberRoot=="function")try{Ne.onPostCommitFiberRoot(rt,_)}catch{}return!0}finally{H.p=b,P.T=h,qv(i,o)}}function Vv(i,o,c){o=hr(c,o),o=Kh(i.stateNode,o,2),i=Ms(i,o,2),i!==null&&(ho(i,2),Br(i))}function ut(i,o,c){if(i.tag===3)Vv(i,i,c);else for(;o!==null;){if(o.tag===3){Vv(o,i,c);break}else if(o.tag===1){var h=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(Bs===null||!Bs.has(h))){i=hr(c,i),c=H_(2),h=Ms(o,c,2),h!==null&&(G_(c,h,o,i),ho(h,2),Br(h));break}}o=o.return}}function bp(i,o,c){var h=i.pingCache;if(h===null){h=i.pingCache=new iR;var b=new Set;h.set(o,b)}else b=h.get(o),b===void 0&&(b=new Set,h.set(o,b));b.has(c)||(up=!0,b.add(c),i=uR.bind(null,i,o,c),o.then(i,i))}function uR(i,o,c){var h=i.pingCache;h!==null&&h.delete(o),i.pingedLanes|=i.suspendedLanes&c,i.warmLanes&=~c,gt===i&&(Xe&c)===c&&(Rt===4||Rt===3&&(Xe&62914560)===Xe&&300>Ce()-tu?(ot&2)===0&&Sa(i,0):fp|=c,xa===Xe&&(xa=0)),Br(i)}function Hv(i,o){o===0&&(o=B0()),i=pi(i,o),i!==null&&(ho(i,o),Br(i))}function fR(i){var o=i.memoizedState,c=0;o!==null&&(c=o.retryLane),Hv(i,c)}function dR(i,o){var c=0;switch(i.tag){case 31:case 13:var h=i.stateNode,b=i.memoizedState;b!==null&&(c=b.retryLane);break;case 19:h=i.stateNode;break;case 22:h=i.stateNode._retryCache;break;default:throw Error(r(314))}h!==null&&h.delete(o),Hv(i,c)}function hR(i,o){return Kn(i,o)}var lu=null,Ea=null,_p=!1,cu=!1,vp=!1,qs=0;function Br(i){i!==Ea&&i.next===null&&(Ea===null?lu=Ea=i:Ea=Ea.next=i),cu=!0,_p||(_p=!0,mR())}function Ko(i,o){if(!vp&&cu){vp=!0;do for(var c=!1,h=lu;h!==null;){if(i!==0){var b=h.pendingLanes;if(b===0)var _=0;else{var E=h.suspendedLanes,R=h.pingedLanes;_=(1<<31-Ie(42|i)+1)-1,_&=b&~(E&~R),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(c=!0,Qv(h,_))}else _=Xe,_=ci(h,h===gt?_:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(_&3)===0||Hi(h,_)||(c=!0,Qv(h,_));h=h.next}while(c);vp=!1}}function pR(){Gv()}function Gv(){cu=_p=!1;var i=0;qs!==0&&ER()&&(i=qs);for(var o=Ce(),c=null,h=lu;h!==null;){var b=h.next,_=Kv(h,o);_===0?(h.next=null,c===null?lu=b:c.next=b,b===null&&(Ea=c)):(c=h,(i!==0||(_&3)!==0)&&(cu=!0)),h=b}qt!==0&&qt!==5||Ko(i),qs!==0&&(qs=0)}function Kv(i,o){for(var c=i.suspendedLanes,h=i.pingedLanes,b=i.expirationTimes,_=i.pendingLanes&-62914561;0<_;){var E=31-Ie(_),R=1<<E,$=b[E];$===-1?((R&c)===0||(R&h)!==0)&&(b[E]=ks(R,o)):$<=o&&(i.expiredLanes|=R),_&=~R}if(o=gt,c=Xe,c=ci(i,i===o?c:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),h=i.callbackNode,c===0||i===o&&(ct===2||ct===9)||i.cancelPendingCommit!==null)return h!==null&&h!==null&&Se(h),i.callbackNode=null,i.callbackPriority=0;if((c&3)===0||Hi(i,c)){if(o=c&-c,o===i.callbackPriority)return o;switch(h!==null&&Se(h),jd(c)){case 2:case 8:c=ce;break;case 32:c=pe;break;case 268435456:c=ke;break;default:c=pe}return h=Zv.bind(null,i),c=Kn(c,h),i.callbackPriority=o,i.callbackNode=c,o}return h!==null&&h!==null&&Se(h),i.callbackPriority=2,i.callbackNode=null,2}function Zv(i,o){if(qt!==0&&qt!==5)return i.callbackNode=null,i.callbackPriority=0,null;var c=i.callbackNode;if(ou()&&i.callbackNode!==c)return null;var h=Xe;return h=ci(i,i===gt?h:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),h===0?null:(Rv(i,h,o),Kv(i,Ce()),i.callbackNode!=null&&i.callbackNode===c?Zv.bind(null,i):null)}function Qv(i,o){if(ou())return null;Rv(i,o,!0)}function mR(){TR(function(){(ot&6)!==0?Kn(Z,pR):Gv()})}function xp(){if(qs===0){var i=ua;i===0&&(i=Zn,Zn<<=1,(Zn&261888)===0&&(Zn=256)),qs=i}return qs}function Jv(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:yc(""+i)}function Yv(i,o){var c=o.ownerDocument.createElement("input");return c.name=o.name,c.value=o.value,i.id&&c.setAttribute("form",i.id),o.parentNode.insertBefore(c,o),i=new FormData(i),c.parentNode.removeChild(c),i}function gR(i,o,c,h,b){if(o==="submit"&&c&&c.stateNode===b){var _=Jv((b[Dn]||null).action),E=h.submitter;E&&(o=(o=E[Dn]||null)?Jv(o.formAction):E.getAttribute("formAction"),o!==null&&(_=o,E=null));var R=new xc("action","action",null,h,b);i.push({event:R,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(qs!==0){var $=E?Yv(b,E):new FormData(b);Uh(c,{pending:!0,data:$,method:b.method,action:_},null,$)}}else typeof _=="function"&&(R.preventDefault(),$=E?Yv(b,E):new FormData(b),Uh(c,{pending:!0,data:$,method:b.method,action:_},_,$))},currentTarget:b}]})}}for(var wp=0;wp<sh.length;wp++){var Sp=sh[wp],yR=Sp.toLowerCase(),bR=Sp[0].toUpperCase()+Sp.slice(1);Ar(yR,"on"+bR)}Ar(Ab,"onAnimationEnd"),Ar(Rb,"onAnimationIteration"),Ar(Ob,"onAnimationStart"),Ar("dblclick","onDoubleClick"),Ar("focusin","onFocus"),Ar("focusout","onBlur"),Ar(D2,"onTransitionRun"),Ar(j2,"onTransitionStart"),Ar(L2,"onTransitionCancel"),Ar(Nb,"onTransitionEnd"),Ji("onMouseEnter",["mouseout","mouseover"]),Ji("onMouseLeave",["mouseout","mouseover"]),Ji("onPointerEnter",["pointerout","pointerover"]),Ji("onPointerLeave",["pointerout","pointerover"]),ui("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ui("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ui("onBeforeInput",["compositionend","keypress","textInput","paste"]),ui("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ui("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ui("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Zo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_R=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Zo));function Xv(i,o){o=(o&4)!==0;for(var c=0;c<i.length;c++){var h=i[c],b=h.event;h=h.listeners;e:{var _=void 0;if(o)for(var E=h.length-1;0<=E;E--){var R=h[E],$=R.instance,W=R.currentTarget;if(R=R.listener,$!==_&&b.isPropagationStopped())break e;_=R,b.currentTarget=W;try{_(b)}catch(ae){kc(ae)}b.currentTarget=null,_=$}else for(E=0;E<h.length;E++){if(R=h[E],$=R.instance,W=R.currentTarget,R=R.listener,$!==_&&b.isPropagationStopped())break e;_=R,b.currentTarget=W;try{_(b)}catch(ae){kc(ae)}b.currentTarget=null,_=$}}}}function Qe(i,o){var c=o[Ld];c===void 0&&(c=o[Ld]=new Set);var h=i+"__bubble";c.has(h)||(Wv(o,i,2,!1),c.add(h))}function kp(i,o,c){var h=0;o&&(h|=4),Wv(c,i,h,o)}var uu="_reactListening"+Math.random().toString(36).slice(2);function Ep(i){if(!i[uu]){i[uu]=!0,G0.forEach(function(c){c!=="selectionchange"&&(_R.has(c)||kp(c,!1,i),kp(c,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[uu]||(o[uu]=!0,kp("selectionchange",!1,o))}}function Wv(i,o,c,h){switch(Ax(o)){case 2:var b=KR;break;case 8:b=ZR;break;default:b=$p}c=b.bind(null,o,c,i),b=void 0,!Hd||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(b=!0),h?b!==void 0?i.addEventListener(o,c,{capture:!0,passive:b}):i.addEventListener(o,c,!0):b!==void 0?i.addEventListener(o,c,{passive:b}):i.addEventListener(o,c,!1)}function Cp(i,o,c,h,b){var _=h;if((o&1)===0&&(o&2)===0&&h!==null)e:for(;;){if(h===null)return;var E=h.tag;if(E===3||E===4){var R=h.stateNode.containerInfo;if(R===b)break;if(E===4)for(E=h.return;E!==null;){var $=E.tag;if(($===3||$===4)&&E.stateNode.containerInfo===b)return;E=E.return}for(;R!==null;){if(E=Ki(R),E===null)return;if($=E.tag,$===5||$===6||$===26||$===27){h=_=E;continue e}R=R.parentNode}}h=h.return}sb(function(){var W=_,ae=Fd(c),ue=[];e:{var te=Ib.get(i);if(te!==void 0){var se=xc,xe=i;switch(i){case"keypress":if(_c(c)===0)break e;case"keydown":case"keyup":se=d2;break;case"focusin":xe="focus",se=Qd;break;case"focusout":xe="blur",se=Qd;break;case"beforeblur":case"afterblur":se=Qd;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":se=ob;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":se=e2;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":se=m2;break;case Ab:case Rb:case Ob:se=r2;break;case Nb:se=y2;break;case"scroll":case"scrollend":se=XA;break;case"wheel":se=_2;break;case"copy":case"cut":case"paste":se=i2;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":se=cb;break;case"toggle":case"beforetoggle":se=x2}var Me=(o&4)!==0,mt=!Me&&(i==="scroll"||i==="scrollend"),Q=Me?te!==null?te+"Capture":null:te;Me=[];for(var F=W,X;F!==null;){var oe=F;if(X=oe.stateNode,oe=oe.tag,oe!==5&&oe!==26&&oe!==27||X===null||Q===null||(oe=go(F,Q),oe!=null&&Me.push(Qo(F,oe,X))),mt)break;F=F.return}0<Me.length&&(te=new se(te,xe,null,c,ae),ue.push({event:te,listeners:Me}))}}if((o&7)===0){e:{if(te=i==="mouseover"||i==="pointerover",se=i==="mouseout"||i==="pointerout",te&&c!==qd&&(xe=c.relatedTarget||c.fromElement)&&(Ki(xe)||xe[Gi]))break e;if((se||te)&&(te=ae.window===ae?ae:(te=ae.ownerDocument)?te.defaultView||te.parentWindow:window,se?(xe=c.relatedTarget||c.toElement,se=W,xe=xe?Ki(xe):null,xe!==null&&(mt=a(xe),Me=xe.tag,xe!==mt||Me!==5&&Me!==27&&Me!==6)&&(xe=null)):(se=null,xe=W),se!==xe)){if(Me=ob,oe="onMouseLeave",Q="onMouseEnter",F="mouse",(i==="pointerout"||i==="pointerover")&&(Me=cb,oe="onPointerLeave",Q="onPointerEnter",F="pointer"),mt=se==null?te:mo(se),X=xe==null?te:mo(xe),te=new Me(oe,F+"leave",se,c,ae),te.target=mt,te.relatedTarget=X,oe=null,Ki(ae)===W&&(Me=new Me(Q,F+"enter",xe,c,ae),Me.target=X,Me.relatedTarget=mt,oe=Me),mt=oe,se&&xe)t:{for(Me=vR,Q=se,F=xe,X=0,oe=Q;oe;oe=Me(oe))X++;oe=0;for(var Ae=F;Ae;Ae=Me(Ae))oe++;for(;0<X-oe;)Q=Me(Q),X--;for(;0<oe-X;)F=Me(F),oe--;for(;X--;){if(Q===F||F!==null&&Q===F.alternate){Me=Q;break t}Q=Me(Q),F=Me(F)}Me=null}else Me=null;se!==null&&ex(ue,te,se,Me,!1),xe!==null&&mt!==null&&ex(ue,mt,xe,Me,!0)}}e:{if(te=W?mo(W):window,se=te.nodeName&&te.nodeName.toLowerCase(),se==="select"||se==="input"&&te.type==="file")var it=yb;else if(mb(te))if(bb)it=N2;else{it=R2;var Ee=A2}else se=te.nodeName,!se||se.toLowerCase()!=="input"||te.type!=="checkbox"&&te.type!=="radio"?W&&Ud(W.elementType)&&(it=yb):it=O2;if(it&&(it=it(i,W))){gb(ue,it,c,ae);break e}Ee&&Ee(i,te,W),i==="focusout"&&W&&te.type==="number"&&W.memoizedProps.value!=null&&$d(te,"number",te.value)}switch(Ee=W?mo(W):window,i){case"focusin":(mb(Ee)||Ee.contentEditable==="true")&&(na=Ee,th=W,ko=null);break;case"focusout":ko=th=na=null;break;case"mousedown":nh=!0;break;case"contextmenu":case"mouseup":case"dragend":nh=!1,Cb(ue,c,ae);break;case"selectionchange":if(M2)break;case"keydown":case"keyup":Cb(ue,c,ae)}var $e;if(Yd)e:{switch(i){case"compositionstart":var We="onCompositionStart";break e;case"compositionend":We="onCompositionEnd";break e;case"compositionupdate":We="onCompositionUpdate";break e}We=void 0}else ta?hb(i,c)&&(We="onCompositionEnd"):i==="keydown"&&c.keyCode===229&&(We="onCompositionStart");We&&(ub&&c.locale!=="ko"&&(ta||We!=="onCompositionStart"?We==="onCompositionEnd"&&ta&&($e=ib()):(Cs=ae,Gd="value"in Cs?Cs.value:Cs.textContent,ta=!0)),Ee=fu(W,We),0<Ee.length&&(We=new lb(We,i,null,c,ae),ue.push({event:We,listeners:Ee}),$e?We.data=$e:($e=pb(c),$e!==null&&(We.data=$e)))),($e=S2?k2(i,c):E2(i,c))&&(We=fu(W,"onBeforeInput"),0<We.length&&(Ee=new lb("onBeforeInput","beforeinput",null,c,ae),ue.push({event:Ee,listeners:We}),Ee.data=$e)),gR(ue,i,W,c,ae)}Xv(ue,o)})}function Qo(i,o,c){return{instance:i,listener:o,currentTarget:c}}function fu(i,o){for(var c=o+"Capture",h=[];i!==null;){var b=i,_=b.stateNode;if(b=b.tag,b!==5&&b!==26&&b!==27||_===null||(b=go(i,c),b!=null&&h.unshift(Qo(i,b,_)),b=go(i,o),b!=null&&h.push(Qo(i,b,_))),i.tag===3)return h;i=i.return}return[]}function vR(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function ex(i,o,c,h,b){for(var _=o._reactName,E=[];c!==null&&c!==h;){var R=c,$=R.alternate,W=R.stateNode;if(R=R.tag,$!==null&&$===h)break;R!==5&&R!==26&&R!==27||W===null||($=W,b?(W=go(c,_),W!=null&&E.unshift(Qo(c,W,$))):b||(W=go(c,_),W!=null&&E.push(Qo(c,W,$)))),c=c.return}E.length!==0&&i.push({event:o,listeners:E})}var xR=/\r\n?/g,wR=/\u0000|\uFFFD/g;function tx(i){return(typeof i=="string"?i:""+i).replace(xR,`
`).replace(wR,"")}function nx(i,o){return o=tx(o),tx(i)===o}function pt(i,o,c,h,b,_){switch(c){case"children":typeof h=="string"?o==="body"||o==="textarea"&&h===""||Xi(i,h):(typeof h=="number"||typeof h=="bigint")&&o!=="body"&&Xi(i,""+h);break;case"className":mc(i,"class",h);break;case"tabIndex":mc(i,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":mc(i,c,h);break;case"style":nb(i,h,_);break;case"data":if(o!=="object"){mc(i,"data",h);break}case"src":case"href":if(h===""&&(o!=="a"||c!=="href")){i.removeAttribute(c);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){i.removeAttribute(c);break}h=yc(""+h),i.setAttribute(c,h);break;case"action":case"formAction":if(typeof h=="function"){i.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(c==="formAction"?(o!=="input"&&pt(i,o,"name",b.name,b,null),pt(i,o,"formEncType",b.formEncType,b,null),pt(i,o,"formMethod",b.formMethod,b,null),pt(i,o,"formTarget",b.formTarget,b,null)):(pt(i,o,"encType",b.encType,b,null),pt(i,o,"method",b.method,b,null),pt(i,o,"target",b.target,b,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){i.removeAttribute(c);break}h=yc(""+h),i.setAttribute(c,h);break;case"onClick":h!=null&&(i.onclick=ts);break;case"onScroll":h!=null&&Qe("scroll",i);break;case"onScrollEnd":h!=null&&Qe("scrollend",i);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(r(61));if(c=h.__html,c!=null){if(b.children!=null)throw Error(r(60));i.innerHTML=c}}break;case"multiple":i.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":i.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){i.removeAttribute("xlink:href");break}c=yc(""+h),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?i.setAttribute(c,""+h):i.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?i.setAttribute(c,""):i.removeAttribute(c);break;case"capture":case"download":h===!0?i.setAttribute(c,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?i.setAttribute(c,h):i.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?i.setAttribute(c,h):i.removeAttribute(c);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?i.removeAttribute(c):i.setAttribute(c,h);break;case"popover":Qe("beforetoggle",i),Qe("toggle",i),pc(i,"popover",h);break;case"xlinkActuate":es(i,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":es(i,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":es(i,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":es(i,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":es(i,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":es(i,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":es(i,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":es(i,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":es(i,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":pc(i,"is",h);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=JA.get(c)||c,pc(i,c,h))}}function Tp(i,o,c,h,b,_){switch(c){case"style":nb(i,h,_);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(r(61));if(c=h.__html,c!=null){if(b.children!=null)throw Error(r(60));i.innerHTML=c}}break;case"children":typeof h=="string"?Xi(i,h):(typeof h=="number"||typeof h=="bigint")&&Xi(i,""+h);break;case"onScroll":h!=null&&Qe("scroll",i);break;case"onScrollEnd":h!=null&&Qe("scrollend",i);break;case"onClick":h!=null&&(i.onclick=ts);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!K0.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(b=c.endsWith("Capture"),o=c.slice(2,b?c.length-7:void 0),_=i[Dn]||null,_=_!=null?_[c]:null,typeof _=="function"&&i.removeEventListener(o,_,b),typeof h=="function")){typeof _!="function"&&_!==null&&(c in i?i[c]=null:i.hasAttribute(c)&&i.removeAttribute(c)),i.addEventListener(o,h,b);break e}c in i?i[c]=h:h===!0?i.setAttribute(c,""):pc(i,c,h)}}}function un(i,o,c){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Qe("error",i),Qe("load",i);var h=!1,b=!1,_;for(_ in c)if(c.hasOwnProperty(_)){var E=c[_];if(E!=null)switch(_){case"src":h=!0;break;case"srcSet":b=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,o));default:pt(i,o,_,E,c,null)}}b&&pt(i,o,"srcSet",c.srcSet,c,null),h&&pt(i,o,"src",c.src,c,null);return;case"input":Qe("invalid",i);var R=_=E=b=null,$=null,W=null;for(h in c)if(c.hasOwnProperty(h)){var ae=c[h];if(ae!=null)switch(h){case"name":b=ae;break;case"type":E=ae;break;case"checked":$=ae;break;case"defaultChecked":W=ae;break;case"value":_=ae;break;case"defaultValue":R=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(r(137,o));break;default:pt(i,o,h,ae,c,null)}}X0(i,_,R,$,W,E,b,!1);return;case"select":Qe("invalid",i),h=E=_=null;for(b in c)if(c.hasOwnProperty(b)&&(R=c[b],R!=null))switch(b){case"value":_=R;break;case"defaultValue":E=R;break;case"multiple":h=R;default:pt(i,o,b,R,c,null)}o=_,c=E,i.multiple=!!h,o!=null?Yi(i,!!h,o,!1):c!=null&&Yi(i,!!h,c,!0);return;case"textarea":Qe("invalid",i),_=b=h=null;for(E in c)if(c.hasOwnProperty(E)&&(R=c[E],R!=null))switch(E){case"value":h=R;break;case"defaultValue":b=R;break;case"children":_=R;break;case"dangerouslySetInnerHTML":if(R!=null)throw Error(r(91));break;default:pt(i,o,E,R,c,null)}eb(i,h,b,_);return;case"option":for($ in c)c.hasOwnProperty($)&&(h=c[$],h!=null)&&($==="selected"?i.selected=h&&typeof h!="function"&&typeof h!="symbol":pt(i,o,$,h,c,null));return;case"dialog":Qe("beforetoggle",i),Qe("toggle",i),Qe("cancel",i),Qe("close",i);break;case"iframe":case"object":Qe("load",i);break;case"video":case"audio":for(h=0;h<Zo.length;h++)Qe(Zo[h],i);break;case"image":Qe("error",i),Qe("load",i);break;case"details":Qe("toggle",i);break;case"embed":case"source":case"link":Qe("error",i),Qe("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(W in c)if(c.hasOwnProperty(W)&&(h=c[W],h!=null))switch(W){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,o));default:pt(i,o,W,h,c,null)}return;default:if(Ud(o)){for(ae in c)c.hasOwnProperty(ae)&&(h=c[ae],h!==void 0&&Tp(i,o,ae,h,c,void 0));return}}for(R in c)c.hasOwnProperty(R)&&(h=c[R],h!=null&&pt(i,o,R,h,c,null))}function SR(i,o,c,h){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var b=null,_=null,E=null,R=null,$=null,W=null,ae=null;for(se in c){var ue=c[se];if(c.hasOwnProperty(se)&&ue!=null)switch(se){case"checked":break;case"value":break;case"defaultValue":$=ue;default:h.hasOwnProperty(se)||pt(i,o,se,null,h,ue)}}for(var te in h){var se=h[te];if(ue=c[te],h.hasOwnProperty(te)&&(se!=null||ue!=null))switch(te){case"type":_=se;break;case"name":b=se;break;case"checked":W=se;break;case"defaultChecked":ae=se;break;case"value":E=se;break;case"defaultValue":R=se;break;case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(r(137,o));break;default:se!==ue&&pt(i,o,te,se,h,ue)}}Bd(i,E,R,$,W,ae,_,b);return;case"select":se=E=R=te=null;for(_ in c)if($=c[_],c.hasOwnProperty(_)&&$!=null)switch(_){case"value":break;case"multiple":se=$;default:h.hasOwnProperty(_)||pt(i,o,_,null,h,$)}for(b in h)if(_=h[b],$=c[b],h.hasOwnProperty(b)&&(_!=null||$!=null))switch(b){case"value":te=_;break;case"defaultValue":R=_;break;case"multiple":E=_;default:_!==$&&pt(i,o,b,_,h,$)}o=R,c=E,h=se,te!=null?Yi(i,!!c,te,!1):!!h!=!!c&&(o!=null?Yi(i,!!c,o,!0):Yi(i,!!c,c?[]:"",!1));return;case"textarea":se=te=null;for(R in c)if(b=c[R],c.hasOwnProperty(R)&&b!=null&&!h.hasOwnProperty(R))switch(R){case"value":break;case"children":break;default:pt(i,o,R,null,h,b)}for(E in h)if(b=h[E],_=c[E],h.hasOwnProperty(E)&&(b!=null||_!=null))switch(E){case"value":te=b;break;case"defaultValue":se=b;break;case"children":break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(r(91));break;default:b!==_&&pt(i,o,E,b,h,_)}W0(i,te,se);return;case"option":for(var xe in c)te=c[xe],c.hasOwnProperty(xe)&&te!=null&&!h.hasOwnProperty(xe)&&(xe==="selected"?i.selected=!1:pt(i,o,xe,null,h,te));for($ in h)te=h[$],se=c[$],h.hasOwnProperty($)&&te!==se&&(te!=null||se!=null)&&($==="selected"?i.selected=te&&typeof te!="function"&&typeof te!="symbol":pt(i,o,$,te,h,se));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Me in c)te=c[Me],c.hasOwnProperty(Me)&&te!=null&&!h.hasOwnProperty(Me)&&pt(i,o,Me,null,h,te);for(W in h)if(te=h[W],se=c[W],h.hasOwnProperty(W)&&te!==se&&(te!=null||se!=null))switch(W){case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(r(137,o));break;default:pt(i,o,W,te,h,se)}return;default:if(Ud(o)){for(var mt in c)te=c[mt],c.hasOwnProperty(mt)&&te!==void 0&&!h.hasOwnProperty(mt)&&Tp(i,o,mt,void 0,h,te);for(ae in h)te=h[ae],se=c[ae],!h.hasOwnProperty(ae)||te===se||te===void 0&&se===void 0||Tp(i,o,ae,te,h,se);return}}for(var Q in c)te=c[Q],c.hasOwnProperty(Q)&&te!=null&&!h.hasOwnProperty(Q)&&pt(i,o,Q,null,h,te);for(ue in h)te=h[ue],se=c[ue],!h.hasOwnProperty(ue)||te===se||te==null&&se==null||pt(i,o,ue,te,h,se)}function rx(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function kR(){if(typeof performance.getEntriesByType=="function"){for(var i=0,o=0,c=performance.getEntriesByType("resource"),h=0;h<c.length;h++){var b=c[h],_=b.transferSize,E=b.initiatorType,R=b.duration;if(_&&R&&rx(E)){for(E=0,R=b.responseEnd,h+=1;h<c.length;h++){var $=c[h],W=$.startTime;if(W>R)break;var ae=$.transferSize,ue=$.initiatorType;ae&&rx(ue)&&($=$.responseEnd,E+=ae*($<R?1:(R-W)/($-W)))}if(--h,o+=8*(_+E)/(b.duration/1e3),i++,10<i)break}}if(0<i)return o/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var Ap=null,Rp=null;function du(i){return i.nodeType===9?i:i.ownerDocument}function sx(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ix(i,o){if(i===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&o==="foreignObject"?0:i}function Op(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Np=null;function ER(){var i=window.event;return i&&i.type==="popstate"?i===Np?!1:(Np=i,!0):(Np=null,!1)}var ax=typeof setTimeout=="function"?setTimeout:void 0,CR=typeof clearTimeout=="function"?clearTimeout:void 0,ox=typeof Promise=="function"?Promise:void 0,TR=typeof queueMicrotask=="function"?queueMicrotask:typeof ox<"u"?function(i){return ox.resolve(null).then(i).catch(AR)}:ax;function AR(i){setTimeout(function(){throw i})}function Fs(i){return i==="head"}function lx(i,o){var c=o,h=0;do{var b=c.nextSibling;if(i.removeChild(c),b&&b.nodeType===8)if(c=b.data,c==="/$"||c==="/&"){if(h===0){i.removeChild(b),Ra(o);return}h--}else if(c==="$"||c==="$?"||c==="$~"||c==="$!"||c==="&")h++;else if(c==="html")Jo(i.ownerDocument.documentElement);else if(c==="head"){c=i.ownerDocument.head,Jo(c);for(var _=c.firstChild;_;){var E=_.nextSibling,R=_.nodeName;_[po]||R==="SCRIPT"||R==="STYLE"||R==="LINK"&&_.rel.toLowerCase()==="stylesheet"||c.removeChild(_),_=E}}else c==="body"&&Jo(i.ownerDocument.body);c=b}while(c);Ra(o)}function cx(i,o){var c=i;i=0;do{var h=c.nextSibling;if(c.nodeType===1?o?(c._stashedDisplay=c.style.display,c.style.display="none"):(c.style.display=c._stashedDisplay||"",c.getAttribute("style")===""&&c.removeAttribute("style")):c.nodeType===3&&(o?(c._stashedText=c.nodeValue,c.nodeValue=""):c.nodeValue=c._stashedText||""),h&&h.nodeType===8)if(c=h.data,c==="/$"){if(i===0)break;i--}else c!=="$"&&c!=="$?"&&c!=="$~"&&c!=="$!"||i++;c=h}while(c)}function Ip(i){var o=i.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var c=o;switch(o=o.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":Ip(c),zd(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}i.removeChild(c)}}function RR(i,o,c,h){for(;i.nodeType===1;){var b=c;if(i.nodeName.toLowerCase()!==o.toLowerCase()){if(!h&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(h){if(!i[po])switch(o){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(_=i.getAttribute("rel"),_==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(_!==b.rel||i.getAttribute("href")!==(b.href==null||b.href===""?null:b.href)||i.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin)||i.getAttribute("title")!==(b.title==null?null:b.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(_=i.getAttribute("src"),(_!==(b.src==null?null:b.src)||i.getAttribute("type")!==(b.type==null?null:b.type)||i.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin))&&_&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(o==="input"&&i.type==="hidden"){var _=b.name==null?null:""+b.name;if(b.type==="hidden"&&i.getAttribute("name")===_)return i}else return i;if(i=br(i.nextSibling),i===null)break}return null}function OR(i,o,c){if(o==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!c||(i=br(i.nextSibling),i===null))return null;return i}function ux(i,o){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!o||(i=br(i.nextSibling),i===null))return null;return i}function Mp(i){return i.data==="$?"||i.data==="$~"}function Dp(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function NR(i,o){var c=i.ownerDocument;if(i.data==="$~")i._reactRetry=o;else if(i.data!=="$?"||c.readyState!=="loading")o();else{var h=function(){o(),c.removeEventListener("DOMContentLoaded",h)};c.addEventListener("DOMContentLoaded",h),i._reactRetry=h}}function br(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return i}var jp=null;function fx(i){i=i.nextSibling;for(var o=0;i;){if(i.nodeType===8){var c=i.data;if(c==="/$"||c==="/&"){if(o===0)return br(i.nextSibling);o--}else c!=="$"&&c!=="$!"&&c!=="$?"&&c!=="$~"&&c!=="&"||o++}i=i.nextSibling}return null}function dx(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var c=i.data;if(c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"){if(o===0)return i;o--}else c!=="/$"&&c!=="/&"||o++}i=i.previousSibling}return null}function hx(i,o,c){switch(o=du(c),i){case"html":if(i=o.documentElement,!i)throw Error(r(452));return i;case"head":if(i=o.head,!i)throw Error(r(453));return i;case"body":if(i=o.body,!i)throw Error(r(454));return i;default:throw Error(r(451))}}function Jo(i){for(var o=i.attributes;o.length;)i.removeAttributeNode(o[0]);zd(i)}var _r=new Map,px=new Set;function hu(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var ys=H.d;H.d={f:IR,r:MR,D:DR,C:jR,L:LR,m:zR,X:BR,S:PR,M:$R};function IR(){var i=ys.f(),o=su();return i||o}function MR(i){var o=Zi(i);o!==null&&o.tag===5&&o.type==="form"?N_(o):ys.r(i)}var Ca=typeof document>"u"?null:document;function mx(i,o,c){var h=Ca;if(h&&typeof o=="string"&&o){var b=fr(o);b='link[rel="'+i+'"][href="'+b+'"]',typeof c=="string"&&(b+='[crossorigin="'+c+'"]'),px.has(b)||(px.add(b),i={rel:i,crossOrigin:c,href:o},h.querySelector(b)===null&&(o=h.createElement("link"),un(o,"link",i),Wt(o),h.head.appendChild(o)))}}function DR(i){ys.D(i),mx("dns-prefetch",i,null)}function jR(i,o){ys.C(i,o),mx("preconnect",i,o)}function LR(i,o,c){ys.L(i,o,c);var h=Ca;if(h&&i&&o){var b='link[rel="preload"][as="'+fr(o)+'"]';o==="image"&&c&&c.imageSrcSet?(b+='[imagesrcset="'+fr(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(b+='[imagesizes="'+fr(c.imageSizes)+'"]')):b+='[href="'+fr(i)+'"]';var _=b;switch(o){case"style":_=Ta(i);break;case"script":_=Aa(i)}_r.has(_)||(i=p({rel:"preload",href:o==="image"&&c&&c.imageSrcSet?void 0:i,as:o},c),_r.set(_,i),h.querySelector(b)!==null||o==="style"&&h.querySelector(Yo(_))||o==="script"&&h.querySelector(Xo(_))||(o=h.createElement("link"),un(o,"link",i),Wt(o),h.head.appendChild(o)))}}function zR(i,o){ys.m(i,o);var c=Ca;if(c&&i){var h=o&&typeof o.as=="string"?o.as:"script",b='link[rel="modulepreload"][as="'+fr(h)+'"][href="'+fr(i)+'"]',_=b;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=Aa(i)}if(!_r.has(_)&&(i=p({rel:"modulepreload",href:i},o),_r.set(_,i),c.querySelector(b)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(Xo(_)))return}h=c.createElement("link"),un(h,"link",i),Wt(h),c.head.appendChild(h)}}}function PR(i,o,c){ys.S(i,o,c);var h=Ca;if(h&&i){var b=Qi(h).hoistableStyles,_=Ta(i);o=o||"default";var E=b.get(_);if(!E){var R={loading:0,preload:null};if(E=h.querySelector(Yo(_)))R.loading=5;else{i=p({rel:"stylesheet",href:i,"data-precedence":o},c),(c=_r.get(_))&&Lp(i,c);var $=E=h.createElement("link");Wt($),un($,"link",i),$._p=new Promise(function(W,ae){$.onload=W,$.onerror=ae}),$.addEventListener("load",function(){R.loading|=1}),$.addEventListener("error",function(){R.loading|=2}),R.loading|=4,pu(E,o,h)}E={type:"stylesheet",instance:E,count:1,state:R},b.set(_,E)}}}function BR(i,o){ys.X(i,o);var c=Ca;if(c&&i){var h=Qi(c).hoistableScripts,b=Aa(i),_=h.get(b);_||(_=c.querySelector(Xo(b)),_||(i=p({src:i,async:!0},o),(o=_r.get(b))&&zp(i,o),_=c.createElement("script"),Wt(_),un(_,"link",i),c.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},h.set(b,_))}}function $R(i,o){ys.M(i,o);var c=Ca;if(c&&i){var h=Qi(c).hoistableScripts,b=Aa(i),_=h.get(b);_||(_=c.querySelector(Xo(b)),_||(i=p({src:i,async:!0,type:"module"},o),(o=_r.get(b))&&zp(i,o),_=c.createElement("script"),Wt(_),un(_,"link",i),c.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},h.set(b,_))}}function gx(i,o,c,h){var b=(b=de.current)?hu(b):null;if(!b)throw Error(r(446));switch(i){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(o=Ta(c.href),c=Qi(b).hoistableStyles,h=c.get(o),h||(h={type:"style",instance:null,count:0,state:null},c.set(o,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){i=Ta(c.href);var _=Qi(b).hoistableStyles,E=_.get(i);if(E||(b=b.ownerDocument||b,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(i,E),(_=b.querySelector(Yo(i)))&&!_._p&&(E.instance=_,E.state.loading=5),_r.has(i)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},_r.set(i,c),_||UR(b,i,c,E.state))),o&&h===null)throw Error(r(528,""));return E}if(o&&h!==null)throw Error(r(529,""));return null;case"script":return o=c.async,c=c.src,typeof c=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=Aa(c),c=Qi(b).hoistableScripts,h=c.get(o),h||(h={type:"script",instance:null,count:0,state:null},c.set(o,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,i))}}function Ta(i){return'href="'+fr(i)+'"'}function Yo(i){return'link[rel="stylesheet"]['+i+"]"}function yx(i){return p({},i,{"data-precedence":i.precedence,precedence:null})}function UR(i,o,c,h){i.querySelector('link[rel="preload"][as="style"]['+o+"]")?h.loading=1:(o=i.createElement("link"),h.preload=o,o.addEventListener("load",function(){return h.loading|=1}),o.addEventListener("error",function(){return h.loading|=2}),un(o,"link",c),Wt(o),i.head.appendChild(o))}function Aa(i){return'[src="'+fr(i)+'"]'}function Xo(i){return"script[async]"+i}function bx(i,o,c){if(o.count++,o.instance===null)switch(o.type){case"style":var h=i.querySelector('style[data-href~="'+fr(c.href)+'"]');if(h)return o.instance=h,Wt(h),h;var b=p({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return h=(i.ownerDocument||i).createElement("style"),Wt(h),un(h,"style",b),pu(h,c.precedence,i),o.instance=h;case"stylesheet":b=Ta(c.href);var _=i.querySelector(Yo(b));if(_)return o.state.loading|=4,o.instance=_,Wt(_),_;h=yx(c),(b=_r.get(b))&&Lp(h,b),_=(i.ownerDocument||i).createElement("link"),Wt(_);var E=_;return E._p=new Promise(function(R,$){E.onload=R,E.onerror=$}),un(_,"link",h),o.state.loading|=4,pu(_,c.precedence,i),o.instance=_;case"script":return _=Aa(c.src),(b=i.querySelector(Xo(_)))?(o.instance=b,Wt(b),b):(h=c,(b=_r.get(_))&&(h=p({},c),zp(h,b)),i=i.ownerDocument||i,b=i.createElement("script"),Wt(b),un(b,"link",h),i.head.appendChild(b),o.instance=b);case"void":return null;default:throw Error(r(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(h=o.instance,o.state.loading|=4,pu(h,c.precedence,i));return o.instance}function pu(i,o,c){for(var h=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),b=h.length?h[h.length-1]:null,_=b,E=0;E<h.length;E++){var R=h[E];if(R.dataset.precedence===o)_=R;else if(_!==b)break}_?_.parentNode.insertBefore(i,_.nextSibling):(o=c.nodeType===9?c.head:c,o.insertBefore(i,o.firstChild))}function Lp(i,o){i.crossOrigin==null&&(i.crossOrigin=o.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=o.referrerPolicy),i.title==null&&(i.title=o.title)}function zp(i,o){i.crossOrigin==null&&(i.crossOrigin=o.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=o.referrerPolicy),i.integrity==null&&(i.integrity=o.integrity)}var mu=null;function _x(i,o,c){if(mu===null){var h=new Map,b=mu=new Map;b.set(c,h)}else b=mu,h=b.get(c),h||(h=new Map,b.set(c,h));if(h.has(i))return h;for(h.set(i,null),c=c.getElementsByTagName(i),b=0;b<c.length;b++){var _=c[b];if(!(_[po]||_[an]||i==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var E=_.getAttribute(o)||"";E=i+E;var R=h.get(E);R?R.push(_):h.set(E,[_])}}return h}function vx(i,o,c){i=i.ownerDocument||i,i.head.insertBefore(c,o==="title"?i.querySelector("head > title"):null)}function qR(i,o,c){if(c===1||o.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;return o.rel==="stylesheet"?(i=o.disabled,typeof o.precedence=="string"&&i==null):!0;case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function xx(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function FR(i,o,c,h){if(c.type==="stylesheet"&&(typeof h.media!="string"||matchMedia(h.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var b=Ta(h.href),_=o.querySelector(Yo(b));if(_){o=_._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(i.count++,i=gu.bind(i),o.then(i,i)),c.state.loading|=4,c.instance=_,Wt(_);return}_=o.ownerDocument||o,h=yx(h),(b=_r.get(b))&&Lp(h,b),_=_.createElement("link"),Wt(_);var E=_;E._p=new Promise(function(R,$){E.onload=R,E.onerror=$}),un(_,"link",h),c.instance=_}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(c,o),(o=c.state.preload)&&(c.state.loading&3)===0&&(i.count++,c=gu.bind(i),o.addEventListener("load",c),o.addEventListener("error",c))}}var Pp=0;function VR(i,o){return i.stylesheets&&i.count===0&&bu(i,i.stylesheets),0<i.count||0<i.imgCount?function(c){var h=setTimeout(function(){if(i.stylesheets&&bu(i,i.stylesheets),i.unsuspend){var _=i.unsuspend;i.unsuspend=null,_()}},6e4+o);0<i.imgBytes&&Pp===0&&(Pp=62500*kR());var b=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&bu(i,i.stylesheets),i.unsuspend)){var _=i.unsuspend;i.unsuspend=null,_()}},(i.imgBytes>Pp?50:800)+o);return i.unsuspend=c,function(){i.unsuspend=null,clearTimeout(h),clearTimeout(b)}}:null}function gu(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)bu(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var yu=null;function bu(i,o){i.stylesheets=null,i.unsuspend!==null&&(i.count++,yu=new Map,o.forEach(HR,i),yu=null,gu.call(i))}function HR(i,o){if(!(o.state.loading&4)){var c=yu.get(i);if(c)var h=c.get(null);else{c=new Map,yu.set(i,c);for(var b=i.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<b.length;_++){var E=b[_];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(c.set(E.dataset.precedence,E),h=E)}h&&c.set(null,h)}b=o.instance,E=b.getAttribute("data-precedence"),_=c.get(E)||h,_===h&&c.set(null,b),c.set(E,b),this.count++,h=gu.bind(this),b.addEventListener("load",h),b.addEventListener("error",h),_?_.parentNode.insertBefore(b,_.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(b,i.firstChild)),o.state.loading|=4}}var Wo={$$typeof:A,Provider:null,Consumer:null,_currentValue:ie,_currentValue2:ie,_threadCount:0};function GR(i,o,c,h,b,_,E,R,$){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Md(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Md(0),this.hiddenUpdates=Md(null),this.identifierPrefix=h,this.onUncaughtError=b,this.onCaughtError=_,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=$,this.incompleteTransitions=new Map}function wx(i,o,c,h,b,_,E,R,$,W,ae,ue){return i=new GR(i,o,c,E,$,W,ae,ue,R),o=1,_===!0&&(o|=24),_=Jn(3,null,null,o),i.current=_,_.stateNode=i,o=yh(),o.refCount++,i.pooledCache=o,o.refCount++,_.memoizedState={element:h,isDehydrated:c,cache:o},xh(_),i}function Sx(i){return i?(i=ia,i):ia}function kx(i,o,c,h,b,_){b=Sx(b),h.context===null?h.context=b:h.pendingContext=b,h=Is(o),h.payload={element:c},_=_===void 0?null:_,_!==null&&(h.callback=_),c=Ms(i,h,o),c!==null&&($n(c,i,o),No(c,i,o))}function Ex(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var c=i.retryLane;i.retryLane=c!==0&&c<o?c:o}}function Bp(i,o){Ex(i,o),(i=i.alternate)&&Ex(i,o)}function Cx(i){if(i.tag===13||i.tag===31){var o=pi(i,67108864);o!==null&&$n(o,i,67108864),Bp(i,67108864)}}function Tx(i){if(i.tag===13||i.tag===31){var o=tr();o=Dd(o);var c=pi(i,o);c!==null&&$n(c,i,o),Bp(i,o)}}var _u=!0;function KR(i,o,c,h){var b=P.T;P.T=null;var _=H.p;try{H.p=2,$p(i,o,c,h)}finally{H.p=_,P.T=b}}function ZR(i,o,c,h){var b=P.T;P.T=null;var _=H.p;try{H.p=8,$p(i,o,c,h)}finally{H.p=_,P.T=b}}function $p(i,o,c,h){if(_u){var b=Up(h);if(b===null)Cp(i,o,h,vu,c),Rx(i,h);else if(JR(b,i,o,c,h))h.stopPropagation();else if(Rx(i,h),o&4&&-1<QR.indexOf(i)){for(;b!==null;){var _=Zi(b);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var E=dt(_.pendingLanes);if(E!==0){var R=_;for(R.pendingLanes|=2,R.entangledLanes|=2;E;){var $=1<<31-Ie(E);R.entanglements[1]|=$,E&=~$}Br(_),(ot&6)===0&&(nu=Ce()+500,Ko(0))}}break;case 31:case 13:R=pi(_,2),R!==null&&$n(R,_,2),su(),Bp(_,2)}if(_=Up(h),_===null&&Cp(i,o,h,vu,c),_===b)break;b=_}b!==null&&h.stopPropagation()}else Cp(i,o,h,null,c)}}function Up(i){return i=Fd(i),qp(i)}var vu=null;function qp(i){if(vu=null,i=Ki(i),i!==null){var o=a(i);if(o===null)i=null;else{var c=o.tag;if(c===13){if(i=l(o),i!==null)return i;i=null}else if(c===31){if(i=u(o),i!==null)return i;i=null}else if(c===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null)}}return vu=i,null}function Ax(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(_t()){case Z:return 2;case ce:return 8;case pe:case be:return 32;case ke:return 268435456;default:return 32}default:return 32}}var Fp=!1,Vs=null,Hs=null,Gs=null,el=new Map,tl=new Map,Ks=[],QR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Rx(i,o){switch(i){case"focusin":case"focusout":Vs=null;break;case"dragenter":case"dragleave":Hs=null;break;case"mouseover":case"mouseout":Gs=null;break;case"pointerover":case"pointerout":el.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":tl.delete(o.pointerId)}}function nl(i,o,c,h,b,_){return i===null||i.nativeEvent!==_?(i={blockedOn:o,domEventName:c,eventSystemFlags:h,nativeEvent:_,targetContainers:[b]},o!==null&&(o=Zi(o),o!==null&&Cx(o)),i):(i.eventSystemFlags|=h,o=i.targetContainers,b!==null&&o.indexOf(b)===-1&&o.push(b),i)}function JR(i,o,c,h,b){switch(o){case"focusin":return Vs=nl(Vs,i,o,c,h,b),!0;case"dragenter":return Hs=nl(Hs,i,o,c,h,b),!0;case"mouseover":return Gs=nl(Gs,i,o,c,h,b),!0;case"pointerover":var _=b.pointerId;return el.set(_,nl(el.get(_)||null,i,o,c,h,b)),!0;case"gotpointercapture":return _=b.pointerId,tl.set(_,nl(tl.get(_)||null,i,o,c,h,b)),!0}return!1}function Ox(i){var o=Ki(i.target);if(o!==null){var c=a(o);if(c!==null){if(o=c.tag,o===13){if(o=l(c),o!==null){i.blockedOn=o,V0(i.priority,function(){Tx(c)});return}}else if(o===31){if(o=u(c),o!==null){i.blockedOn=o,V0(i.priority,function(){Tx(c)});return}}else if(o===3&&c.stateNode.current.memoizedState.isDehydrated){i.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}i.blockedOn=null}function xu(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var c=Up(i.nativeEvent);if(c===null){c=i.nativeEvent;var h=new c.constructor(c.type,c);qd=h,c.target.dispatchEvent(h),qd=null}else return o=Zi(c),o!==null&&Cx(o),i.blockedOn=c,!1;o.shift()}return!0}function Nx(i,o,c){xu(i)&&c.delete(o)}function YR(){Fp=!1,Vs!==null&&xu(Vs)&&(Vs=null),Hs!==null&&xu(Hs)&&(Hs=null),Gs!==null&&xu(Gs)&&(Gs=null),el.forEach(Nx),tl.forEach(Nx)}function wu(i,o){i.blockedOn===o&&(i.blockedOn=null,Fp||(Fp=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,YR)))}var Su=null;function Ix(i){Su!==i&&(Su=i,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Su===i&&(Su=null);for(var o=0;o<i.length;o+=3){var c=i[o],h=i[o+1],b=i[o+2];if(typeof h!="function"){if(qp(h||c)===null)continue;break}var _=Zi(c);_!==null&&(i.splice(o,3),o-=3,Uh(_,{pending:!0,data:b,method:c.method,action:h},h,b))}}))}function Ra(i){function o($){return wu($,i)}Vs!==null&&wu(Vs,i),Hs!==null&&wu(Hs,i),Gs!==null&&wu(Gs,i),el.forEach(o),tl.forEach(o);for(var c=0;c<Ks.length;c++){var h=Ks[c];h.blockedOn===i&&(h.blockedOn=null)}for(;0<Ks.length&&(c=Ks[0],c.blockedOn===null);)Ox(c),c.blockedOn===null&&Ks.shift();if(c=(i.ownerDocument||i).$$reactFormReplay,c!=null)for(h=0;h<c.length;h+=3){var b=c[h],_=c[h+1],E=b[Dn]||null;if(typeof _=="function")E||Ix(c);else if(E){var R=null;if(_&&_.hasAttribute("formAction")){if(b=_,E=_[Dn]||null)R=E.formAction;else if(qp(b)!==null)continue}else R=E.action;typeof R=="function"?c[h+1]=R:(c.splice(h,3),h-=3),Ix(c)}}}function Mx(){function i(_){_.canIntercept&&_.info==="react-transition"&&_.intercept({handler:function(){return new Promise(function(E){return b=E})},focusReset:"manual",scroll:"manual"})}function o(){b!==null&&(b(),b=null),h||setTimeout(c,20)}function c(){if(!h&&!navigation.transition){var _=navigation.currentEntry;_&&_.url!=null&&navigation.navigate(_.url,{state:_.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var h=!1,b=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(c,100),function(){h=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),b!==null&&(b(),b=null)}}}function Vp(i){this._internalRoot=i}ku.prototype.render=Vp.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(r(409));var c=o.current,h=tr();kx(c,h,i,o,null,null)},ku.prototype.unmount=Vp.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;kx(i.current,2,null,i,null,null),su(),o[Gi]=null}};function ku(i){this._internalRoot=i}ku.prototype.unstable_scheduleHydration=function(i){if(i){var o=F0();i={blockedOn:null,target:i,priority:o};for(var c=0;c<Ks.length&&o!==0&&o<Ks[c].priority;c++);Ks.splice(c,0,i),c===0&&Ox(i)}};var Dx=e.version;if(Dx!=="19.2.3")throw Error(r(527,Dx,"19.2.3"));H.findDOMNode=function(i){var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(r(188)):(i=Object.keys(i).join(","),Error(r(268,i)));return i=d(o),i=i!==null?m(i):null,i=i===null?null:i.stateNode,i};var XR={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:P,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Eu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Eu.isDisabled&&Eu.supportsFiber)try{rt=Eu.inject(XR),Ne=Eu}catch{}}return sl.createRoot=function(i,o){if(!s(i))throw Error(r(299));var c=!1,h="",b=U_,_=q_,E=F_;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(h=o.identifierPrefix),o.onUncaughtError!==void 0&&(b=o.onUncaughtError),o.onCaughtError!==void 0&&(_=o.onCaughtError),o.onRecoverableError!==void 0&&(E=o.onRecoverableError)),o=wx(i,1,!1,null,null,c,h,null,b,_,E,Mx),i[Gi]=o.current,Ep(i),new Vp(o)},sl.hydrateRoot=function(i,o,c){if(!s(i))throw Error(r(299));var h=!1,b="",_=U_,E=q_,R=F_,$=null;return c!=null&&(c.unstable_strictMode===!0&&(h=!0),c.identifierPrefix!==void 0&&(b=c.identifierPrefix),c.onUncaughtError!==void 0&&(_=c.onUncaughtError),c.onCaughtError!==void 0&&(E=c.onCaughtError),c.onRecoverableError!==void 0&&(R=c.onRecoverableError),c.formState!==void 0&&($=c.formState)),o=wx(i,1,!0,o,c??null,h,b,$,_,E,R,Mx),o.context=Sx(null),c=o.current,h=tr(),h=Dd(h),b=Is(h),b.callback=null,Ms(c,b,h),c=h,o.current.lanes=c,ho(o,c),Br(o),i[Gi]=o.current,Ep(i),new ku(o)},sl.version="19.2.3",sl}var Vx;function oO(){if(Vx)return Kp.exports;Vx=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Kp.exports=aO(),Kp.exports}var lO=oO(),tc=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},cO={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},uO=class{#e=cO;#t=!1;setTimeoutProvider(t){this.#e=t}setTimeout(t,e){return this.#e.setTimeout(t,e)}clearTimeout(t){this.#e.clearTimeout(t)}setInterval(t,e){return this.#e.setInterval(t,e)}clearInterval(t){this.#e.clearInterval(t)}},Mi=new uO;function fO(t){setTimeout(t,0)}var Ya=typeof window>"u"||"Deno"in globalThis;function xr(){}function dO(t,e){return typeof t=="function"?t(e):t}function Gm(t){return typeof t=="number"&&t>=0&&t!==1/0}function rk(t,e){return Math.max(t+(e||0)-Date.now(),0)}function ti(t,e){return typeof t=="function"?t(e):t}function wr(t,e){return typeof t=="function"?t(e):t}function Hx(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:a,queryKey:l,stale:u}=t;if(l){if(r){if(e.queryHash!==ly(l,e.options))return!1}else if(!$l(e.queryKey,l))return!1}if(n!=="all"){const f=e.isActive();if(n==="active"&&!f||n==="inactive"&&f)return!1}return!(typeof u=="boolean"&&e.isStale()!==u||s&&s!==e.state.fetchStatus||a&&!a(e))}function Gx(t,e){const{exact:n,status:r,predicate:s,mutationKey:a}=t;if(a){if(!e.options.mutationKey)return!1;if(n){if(ws(e.options.mutationKey)!==ws(a))return!1}else if(!$l(e.options.mutationKey,a))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function ly(t,e){return(e?.queryKeyHashFn||ws)(t)}function ws(t){return JSON.stringify(t,(e,n)=>Zm(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function $l(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>$l(t[n],e[n])):!1}var hO=Object.prototype.hasOwnProperty;function sk(t,e){if(t===e)return t;const n=Kx(t)&&Kx(e);if(!n&&!(Zm(t)&&Zm(e)))return e;const s=(n?t:Object.keys(t)).length,a=n?e:Object.keys(e),l=a.length,u=n?new Array(l):{};let f=0;for(let d=0;d<l;d++){const m=n?d:a[d],p=t[m],y=e[m];if(p===y){u[m]=p,(n?d<s:hO.call(t,m))&&f++;continue}if(p===null||y===null||typeof p!="object"||typeof y!="object"){u[m]=y;continue}const g=sk(p,y);u[m]=g,g===p&&f++}return s===l&&f===s?t:u}function Km(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function Kx(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Zm(t){if(!Zx(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!Zx(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function Zx(t){return Object.prototype.toString.call(t)==="[object Object]"}function pO(t){return new Promise(e=>{Mi.setTimeout(e,t)})}function Qm(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?sk(t,e):e}function mO(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function gO(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var cy=Symbol();function ik(t,e){return!t.queryFn&&e?.initialPromise?()=>e.initialPromise:!t.queryFn||t.queryFn===cy?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function yO(t,e,n){let r=!1,s;return Object.defineProperty(t,"signal",{enumerable:!0,get:()=>(s??=e(),r||(r=!0,s.aborted?n():s.addEventListener("abort",n,{once:!0})),s)}),t}var bO=class extends tc{#e;#t;#n;constructor(){super(),this.#n=t=>{if(!Ya&&window.addEventListener){const e=()=>t();return window.addEventListener("visibilitychange",e,!1),()=>{window.removeEventListener("visibilitychange",e)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#n=t,this.#t?.(),this.#t=t(e=>{typeof e=="boolean"?this.setFocused(e):this.onFocus()})}setFocused(t){this.#e!==t&&(this.#e=t,this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(e=>{e(t)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},uy=new bO;function Jm(){let t,e;const n=new Promise((s,a)=>{t=s,e=a});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}var _O=fO;function vO(){let t=[],e=0,n=u=>{u()},r=u=>{u()},s=_O;const a=u=>{e?t.push(u):s(()=>{n(u)})},l=()=>{const u=t;t=[],u.length&&s(()=>{r(()=>{u.forEach(f=>{n(f)})})})};return{batch:u=>{let f;e++;try{f=u()}finally{e--,e||l()}return f},batchCalls:u=>(...f)=>{a(()=>{u(...f)})},schedule:a,setNotifyFunction:u=>{n=u},setBatchNotifyFunction:u=>{r=u},setScheduler:u=>{s=u}}}var Sn=vO(),xO=class extends tc{#e=!0;#t;#n;constructor(){super(),this.#n=t=>{if(!Ya&&window.addEventListener){const e=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",e,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",n)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#n=t,this.#t?.(),this.#t=t(this.setOnline.bind(this))}setOnline(t){this.#e!==t&&(this.#e=t,this.listeners.forEach(n=>{n(t)}))}isOnline(){return this.#e}},df=new xO;function wO(t){return Math.min(1e3*2**t,3e4)}function ak(t){return(t??"online")==="online"?df.isOnline():!0}var Ym=class extends Error{constructor(t){super("CancelledError"),this.revert=t?.revert,this.silent=t?.silent}};function ok(t){let e=!1,n=0,r;const s=Jm(),a=()=>s.status!=="pending",l=x=>{if(!a()){const C=new Ym(x);y(C),t.onCancel?.(C)}},u=()=>{e=!0},f=()=>{e=!1},d=()=>uy.isFocused()&&(t.networkMode==="always"||df.isOnline())&&t.canRun(),m=()=>ak(t.networkMode)&&t.canRun(),p=x=>{a()||(r?.(),s.resolve(x))},y=x=>{a()||(r?.(),s.reject(x))},g=()=>new Promise(x=>{r=C=>{(a()||d())&&x(C)},t.onPause?.()}).then(()=>{r=void 0,a()||t.onContinue?.()}),v=()=>{if(a())return;let x;const C=n===0?t.initialPromise:void 0;try{x=C??t.fn()}catch(k){x=Promise.reject(k)}Promise.resolve(x).then(p).catch(k=>{if(a())return;const T=t.retry??(Ya?0:3),A=t.retryDelay??wO,M=typeof A=="function"?A(n,k):A,I=T===!0||typeof T=="number"&&n<T||typeof T=="function"&&T(n,k);if(e||!I){y(k);return}n++,t.onFail?.(n,k),pO(M).then(()=>d()?void 0:g()).then(()=>{e?y(k):v()})})};return{promise:s,status:()=>s.status,cancel:l,continue:()=>(r?.(),s),cancelRetry:u,continueRetry:f,canStart:m,start:()=>(m()?v():g().then(v),s)}}var lk=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Gm(this.gcTime)&&(this.#e=Mi.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Ya?1/0:300*1e3))}clearGcTimeout(){this.#e&&(Mi.clearTimeout(this.#e),this.#e=void 0)}},SO=class extends lk{#e;#t;#n;#r;#s;#o;#i;constructor(t){super(),this.#i=!1,this.#o=t.defaultOptions,this.setOptions(t.options),this.observers=[],this.#r=t.client,this.#n=this.#r.getQueryCache(),this.queryKey=t.queryKey,this.queryHash=t.queryHash,this.#e=Jx(this.options),this.state=t.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#s?.promise}setOptions(t){if(this.options={...this.#o,...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const e=Jx(this.options);e.data!==void 0&&(this.setState(Qx(e.data,e.dataUpdatedAt)),this.#e=e)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#n.remove(this)}setData(t,e){const n=Qm(this.state.data,t,this.options);return this.#a({data:n,type:"success",dataUpdatedAt:e?.updatedAt,manual:e?.manual}),n}setState(t,e){this.#a({type:"setState",state:t,setStateOptions:e})}cancel(t){const e=this.#s?.promise;return this.#s?.cancel(t),e?e.then(xr).catch(xr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(t=>wr(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===cy||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>ti(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!rk(this.state.dataUpdatedAt,t)}onFocus(){this.observers.find(e=>e.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#s?.continue()}onOnline(){this.observers.find(e=>e.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#s?.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(e=>e!==t),this.observers.length||(this.#s&&(this.#i?this.#s.cancel({revert:!0}):this.#s.cancelRetry()),this.scheduleGc()),this.#n.notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#a({type:"invalidate"})}async fetch(t,e){if(this.state.fetchStatus!=="idle"&&this.#s?.status()!=="rejected"){if(this.state.data!==void 0&&e?.cancelRefetch)this.cancel({silent:!0});else if(this.#s)return this.#s.continueRetry(),this.#s.promise}if(t&&this.setOptions(t),!this.options.queryFn){const u=this.observers.find(f=>f.options.queryFn);u&&this.setOptions(u.options)}const n=new AbortController,r=u=>{Object.defineProperty(u,"signal",{enumerable:!0,get:()=>(this.#i=!0,n.signal)})},s=()=>{const u=ik(this.options,e),d=(()=>{const m={client:this.#r,queryKey:this.queryKey,meta:this.meta};return r(m),m})();return this.#i=!1,this.options.persister?this.options.persister(u,d,this):u(d)},l=(()=>{const u={fetchOptions:e,options:this.options,queryKey:this.queryKey,client:this.#r,state:this.state,fetchFn:s};return r(u),u})();this.options.behavior?.onFetch(l,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==l.fetchOptions?.meta)&&this.#a({type:"fetch",meta:l.fetchOptions?.meta}),this.#s=ok({initialPromise:e?.initialPromise,fn:l.fetchFn,onCancel:u=>{u instanceof Ym&&u.revert&&this.setState({...this.#t,fetchStatus:"idle"}),n.abort()},onFail:(u,f)=>{this.#a({type:"failed",failureCount:u,error:f})},onPause:()=>{this.#a({type:"pause"})},onContinue:()=>{this.#a({type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0});try{const u=await this.#s.start();if(u===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(u),this.#n.config.onSuccess?.(u,this),this.#n.config.onSettled?.(u,this.state.error,this),u}catch(u){if(u instanceof Ym){if(u.silent)return this.#s.promise;if(u.revert){if(this.state.data===void 0)throw u;return this.state.data}}throw this.#a({type:"error",error:u}),this.#n.config.onError?.(u,this),this.#n.config.onSettled?.(this.state.data,u,this),u}finally{this.scheduleGc()}}#a(t){const e=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...ck(n.data,this.options),fetchMeta:t.meta??null};case"success":const r={...n,...Qx(t.data,t.dataUpdatedAt),dataUpdateCount:n.dataUpdateCount+1,...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=t.manual?r:void 0,r;case"error":const s=t.error;return{...n,error:s,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=e(this.state),Sn.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),this.#n.notify({query:this,type:"updated",action:t})})}};function ck(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:ak(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function Qx(t,e){return{data:t,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function Jx(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var kO=class extends tc{constructor(t,e){super(),this.options=e,this.#e=t,this.#a=null,this.#i=Jm(),this.bindMethods(),this.setOptions(e)}#e;#t=void 0;#n=void 0;#r=void 0;#s;#o;#i;#a;#p;#m;#c;#u;#l;#f;#d=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),Yx(this.#t,this.options)?this.#h():this.updateResult(),this.#_())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Xm(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Xm(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#v(),this.#x(),this.#t.removeObserver(this)}setOptions(t){const e=this.options,n=this.#t;if(this.options=this.#e.defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof wr(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#w(),this.#t.setOptions(this.options),e._defaulted&&!Km(this.options,e)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const r=this.hasListeners();r&&Xx(this.#t,n,this.options,e)&&this.#h(),this.updateResult(),r&&(this.#t!==n||wr(this.options.enabled,this.#t)!==wr(e.enabled,this.#t)||ti(this.options.staleTime,this.#t)!==ti(e.staleTime,this.#t))&&this.#g();const s=this.#y();r&&(this.#t!==n||wr(this.options.enabled,this.#t)!==wr(e.enabled,this.#t)||s!==this.#f)&&this.#b(s)}getOptimisticResult(t){const e=this.#e.getQueryCache().build(this.#e,t),n=this.createResult(e,t);return CO(this,n)&&(this.#r=n,this.#o=this.options,this.#s=this.#t.state),n}getCurrentResult(){return this.#r}trackResult(t,e){return new Proxy(t,{get:(n,r)=>(this.trackProp(r),e?.(r),r==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&this.#i.status==="pending"&&this.#i.reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(n,r))})}trackProp(t){this.#d.add(t)}getCurrentQuery(){return this.#t}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const e=this.#e.defaultQueryOptions(t),n=this.#e.getQueryCache().build(this.#e,e);return n.fetch().then(()=>this.createResult(n,e))}fetch(t){return this.#h({...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#r))}#h(t){this.#w();let e=this.#t.fetch(this.options,t);return t?.throwOnError||(e=e.catch(xr)),e}#g(){this.#v();const t=ti(this.options.staleTime,this.#t);if(Ya||this.#r.isStale||!Gm(t))return;const n=rk(this.#r.dataUpdatedAt,t)+1;this.#u=Mi.setTimeout(()=>{this.#r.isStale||this.updateResult()},n)}#y(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#b(t){this.#x(),this.#f=t,!(Ya||wr(this.options.enabled,this.#t)===!1||!Gm(this.#f)||this.#f===0)&&(this.#l=Mi.setInterval(()=>{(this.options.refetchIntervalInBackground||uy.isFocused())&&this.#h()},this.#f))}#_(){this.#g(),this.#b(this.#y())}#v(){this.#u&&(Mi.clearTimeout(this.#u),this.#u=void 0)}#x(){this.#l&&(Mi.clearInterval(this.#l),this.#l=void 0)}createResult(t,e){const n=this.#t,r=this.options,s=this.#r,a=this.#s,l=this.#o,f=t!==n?t.state:this.#n,{state:d}=t;let m={...d},p=!1,y;if(e._optimisticResults){const U=this.hasListeners(),K=!U&&Yx(t,e),j=U&&Xx(t,n,e,r);(K||j)&&(m={...m,...ck(d.data,t.options)}),e._optimisticResults==="isRestoring"&&(m.fetchStatus="idle")}let{error:g,errorUpdatedAt:v,status:x}=m;y=m.data;let C=!1;if(e.placeholderData!==void 0&&y===void 0&&x==="pending"){let U;s?.isPlaceholderData&&e.placeholderData===l?.placeholderData?(U=s.data,C=!0):U=typeof e.placeholderData=="function"?e.placeholderData(this.#c?.state.data,this.#c):e.placeholderData,U!==void 0&&(x="success",y=Qm(s?.data,U,e),p=!0)}if(e.select&&y!==void 0&&!C)if(s&&y===a?.data&&e.select===this.#p)y=this.#m;else try{this.#p=e.select,y=e.select(y),y=Qm(s?.data,y,e),this.#m=y,this.#a=null}catch(U){this.#a=U}this.#a&&(g=this.#a,y=this.#m,v=Date.now(),x="error");const k=m.fetchStatus==="fetching",T=x==="pending",A=x==="error",M=T&&k,I=y!==void 0,B={status:x,fetchStatus:m.fetchStatus,isPending:T,isSuccess:x==="success",isError:A,isInitialLoading:M,isLoading:M,data:y,dataUpdatedAt:m.dataUpdatedAt,error:g,errorUpdatedAt:v,failureCount:m.fetchFailureCount,failureReason:m.fetchFailureReason,errorUpdateCount:m.errorUpdateCount,isFetched:m.dataUpdateCount>0||m.errorUpdateCount>0,isFetchedAfterMount:m.dataUpdateCount>f.dataUpdateCount||m.errorUpdateCount>f.errorUpdateCount,isFetching:k,isRefetching:k&&!T,isLoadingError:A&&!I,isPaused:m.fetchStatus==="paused",isPlaceholderData:p,isRefetchError:A&&I,isStale:fy(t,e),refetch:this.refetch,promise:this.#i,isEnabled:wr(e.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const U=J=>{B.status==="error"?J.reject(B.error):B.data!==void 0&&J.resolve(B.data)},K=()=>{const J=this.#i=B.promise=Jm();U(J)},j=this.#i;switch(j.status){case"pending":t.queryHash===n.queryHash&&U(j);break;case"fulfilled":(B.status==="error"||B.data!==j.value)&&K();break;case"rejected":(B.status!=="error"||B.error!==j.reason)&&K();break}}return B}updateResult(){const t=this.#r,e=this.createResult(this.#t,this.options);if(this.#s=this.#t.state,this.#o=this.options,this.#s.data!==void 0&&(this.#c=this.#t),Km(e,t))return;this.#r=e;const n=()=>{if(!t)return!0;const{notifyOnChangeProps:r}=this.options,s=typeof r=="function"?r():r;if(s==="all"||!s&&!this.#d.size)return!0;const a=new Set(s??this.#d);return this.options.throwOnError&&a.add("error"),Object.keys(this.#r).some(l=>{const u=l;return this.#r[u]!==t[u]&&a.has(u)})};this.#S({listeners:n()})}#w(){const t=this.#e.getQueryCache().build(this.#e,this.options);if(t===this.#t)return;const e=this.#t;this.#t=t,this.#n=t.state,this.hasListeners()&&(e?.removeObserver(this),t.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#_()}#S(t){Sn.batch(()=>{t.listeners&&this.listeners.forEach(e=>{e(this.#r)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function EO(t,e){return wr(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function Yx(t,e){return EO(t,e)||t.state.data!==void 0&&Xm(t,e,e.refetchOnMount)}function Xm(t,e,n){if(wr(e.enabled,t)!==!1&&ti(e.staleTime,t)!=="static"){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&fy(t,e)}return!1}function Xx(t,e,n,r){return(t!==e||wr(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&fy(t,n)}function fy(t,e){return wr(e.enabled,t)!==!1&&t.isStaleByTime(ti(e.staleTime,t))}function CO(t,e){return!Km(t.getCurrentResult(),e)}function Wx(t){return{onFetch:(e,n)=>{const r=e.options,s=e.fetchOptions?.meta?.fetchMore?.direction,a=e.state.data?.pages||[],l=e.state.data?.pageParams||[];let u={pages:[],pageParams:[]},f=0;const d=async()=>{let m=!1;const p=v=>{yO(v,()=>e.signal,()=>m=!0)},y=ik(e.options,e.fetchOptions),g=async(v,x,C)=>{if(m)return Promise.reject();if(x==null&&v.pages.length)return Promise.resolve(v);const T=(()=>{const O={client:e.client,queryKey:e.queryKey,pageParam:x,direction:C?"backward":"forward",meta:e.options.meta};return p(O),O})(),A=await y(T),{maxPages:M}=e.options,I=C?gO:mO;return{pages:I(v.pages,A,M),pageParams:I(v.pageParams,x,M)}};if(s&&a.length){const v=s==="backward",x=v?TO:ew,C={pages:a,pageParams:l},k=x(r,C);u=await g(C,k,v)}else{const v=t??a.length;do{const x=f===0?l[0]??r.initialPageParam:ew(r,u);if(f>0&&x==null)break;u=await g(u,x),f++}while(f<v)}return u};e.options.persister?e.fetchFn=()=>e.options.persister?.(d,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n):e.fetchFn=d}}}function ew(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function TO(t,{pages:e,pageParams:n}){return e.length>0?t.getPreviousPageParam?.(e[0],e,n[0],n):void 0}var AO=class extends lk{#e;#t;#n;#r;constructor(t){super(),this.#e=t.client,this.mutationId=t.mutationId,this.#n=t.mutationCache,this.#t=[],this.state=t.state||RO(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){this.#t.includes(t)||(this.#t.push(t),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){this.#t=this.#t.filter(e=>e!==t),this.scheduleGc(),this.#n.notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#n.remove(this))}continue(){return this.#r?.continue()??this.execute(this.state.variables)}async execute(t){const e=()=>{this.#s({type:"continue"})},n={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#r=ok({fn:()=>this.options.mutationFn?this.options.mutationFn(t,n):Promise.reject(new Error("No mutationFn found")),onFail:(a,l)=>{this.#s({type:"failed",failureCount:a,error:l})},onPause:()=>{this.#s({type:"pause"})},onContinue:e,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#n.canRun(this)});const r=this.state.status==="pending",s=!this.#r.canStart();try{if(r)e();else{this.#s({type:"pending",variables:t,isPaused:s}),await this.#n.config.onMutate?.(t,this,n);const l=await this.options.onMutate?.(t,n);l!==this.state.context&&this.#s({type:"pending",context:l,variables:t,isPaused:s})}const a=await this.#r.start();return await this.#n.config.onSuccess?.(a,t,this.state.context,this,n),await this.options.onSuccess?.(a,t,this.state.context,n),await this.#n.config.onSettled?.(a,null,this.state.variables,this.state.context,this,n),await this.options.onSettled?.(a,null,t,this.state.context,n),this.#s({type:"success",data:a}),a}catch(a){try{await this.#n.config.onError?.(a,t,this.state.context,this,n)}catch(l){Promise.reject(l)}try{await this.options.onError?.(a,t,this.state.context,n)}catch(l){Promise.reject(l)}try{await this.#n.config.onSettled?.(void 0,a,this.state.variables,this.state.context,this,n)}catch(l){Promise.reject(l)}try{await this.options.onSettled?.(void 0,a,t,this.state.context,n)}catch(l){Promise.reject(l)}throw this.#s({type:"error",error:a}),a}finally{this.#n.runNext(this)}}#s(t){const e=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=e(this.state),Sn.batch(()=>{this.#t.forEach(n=>{n.onMutationUpdate(t)}),this.#n.notify({mutation:this,type:"updated",action:t})})}};function RO(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var OO=class extends tc{constructor(t={}){super(),this.config=t,this.#e=new Set,this.#t=new Map,this.#n=0}#e;#t;#n;build(t,e,n){const r=new AO({client:t,mutationCache:this,mutationId:++this.#n,options:t.defaultMutationOptions(e),state:n});return this.add(r),r}add(t){this.#e.add(t);const e=Cu(t);if(typeof e=="string"){const n=this.#t.get(e);n?n.push(t):this.#t.set(e,[t])}this.notify({type:"added",mutation:t})}remove(t){if(this.#e.delete(t)){const e=Cu(t);if(typeof e=="string"){const n=this.#t.get(e);if(n)if(n.length>1){const r=n.indexOf(t);r!==-1&&n.splice(r,1)}else n[0]===t&&this.#t.delete(e)}}this.notify({type:"removed",mutation:t})}canRun(t){const e=Cu(t);if(typeof e=="string"){const r=this.#t.get(e)?.find(s=>s.state.status==="pending");return!r||r===t}else return!0}runNext(t){const e=Cu(t);return typeof e=="string"?this.#t.get(e)?.find(r=>r!==t&&r.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){Sn.batch(()=>{this.#e.forEach(t=>{this.notify({type:"removed",mutation:t})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(t){const e={exact:!0,...t};return this.getAll().find(n=>Gx(e,n))}findAll(t={}){return this.getAll().filter(e=>Gx(t,e))}notify(t){Sn.batch(()=>{this.listeners.forEach(e=>{e(t)})})}resumePausedMutations(){const t=this.getAll().filter(e=>e.state.isPaused);return Sn.batch(()=>Promise.all(t.map(e=>e.continue().catch(xr))))}};function Cu(t){return t.options.scope?.id}var NO=class extends tc{constructor(t={}){super(),this.config=t,this.#e=new Map}#e;build(t,e,n){const r=e.queryKey,s=e.queryHash??ly(r,e);let a=this.get(s);return a||(a=new SO({client:t,queryKey:r,queryHash:s,options:t.defaultQueryOptions(e),state:n,defaultOptions:t.getQueryDefaults(r)}),this.add(a)),a}add(t){this.#e.has(t.queryHash)||(this.#e.set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const e=this.#e.get(t.queryHash);e&&(t.destroy(),e===t&&this.#e.delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Sn.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return this.#e.get(t)}getAll(){return[...this.#e.values()]}find(t){const e={exact:!0,...t};return this.getAll().find(n=>Hx(e,n))}findAll(t={}){const e=this.getAll();return Object.keys(t).length>0?e.filter(n=>Hx(t,n)):e}notify(t){Sn.batch(()=>{this.listeners.forEach(e=>{e(t)})})}onFocus(){Sn.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Sn.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},IO=class{#e;#t;#n;#r;#s;#o;#i;#a;constructor(t={}){this.#e=t.queryCache||new NO,this.#t=t.mutationCache||new OO,this.#n=t.defaultOptions||{},this.#r=new Map,this.#s=new Map,this.#o=0}mount(){this.#o++,this.#o===1&&(this.#i=uy.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#a=df.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#o--,this.#o===0&&(this.#i?.(),this.#i=void 0,this.#a?.(),this.#a=void 0)}isFetching(t){return this.#e.findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return this.#t.findAll({...t,status:"pending"}).length}getQueryData(t){const e=this.defaultQueryOptions({queryKey:t});return this.#e.get(e.queryHash)?.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=this.#e.build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(ti(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return this.#e.findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),a=this.#e.get(r.queryHash)?.state.data,l=dO(e,a);if(l!==void 0)return this.#e.build(this,r).setData(l,{...n,manual:!0})}setQueriesData(t,e,n){return Sn.batch(()=>this.#e.findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){const e=this.defaultQueryOptions({queryKey:t});return this.#e.get(e.queryHash)?.state}removeQueries(t){const e=this.#e;Sn.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=this.#e;return Sn.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=Sn.batch(()=>this.#e.findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(xr).catch(xr)}invalidateQueries(t,e={}){return Sn.batch(()=>(this.#e.findAll(t).forEach(n=>{n.invalidate()}),t?.refetchType==="none"?Promise.resolve():this.refetchQueries({...t,type:t?.refetchType??t?.type??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=Sn.batch(()=>this.#e.findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let a=s.fetch(void 0,n);return n.throwOnError||(a=a.catch(xr)),s.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(r).then(xr)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=this.#e.build(this,e);return n.isStaleByTime(ti(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(xr).catch(xr)}fetchInfiniteQuery(t){return t.behavior=Wx(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(xr).catch(xr)}ensureInfiniteQueryData(t){return t.behavior=Wx(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return df.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#n}setDefaultOptions(t){this.#n=t}setQueryDefaults(t,e){this.#r.set(ws(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...this.#r.values()],n={};return e.forEach(r=>{$l(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){this.#s.set(ws(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...this.#s.values()],n={};return e.forEach(r=>{$l(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...this.#n.queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=ly(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===cy&&(e.enabled=!1),e}defaultMutationOptions(t){return t?._defaulted?t:{...this.#n.mutations,...t?.mutationKey&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},MO=G.createContext(void 0),DO=({client:t,children:e})=>(G.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),w.jsx(MO.Provider,{value:t,children:e})),Yp={exports:{}},Xp={};var tw;function jO(){if(tw)return Xp;tw=1;var t=nd().__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;return Xp.c=function(e){return t.H.useMemoCache(e)},Xp}var nw;function LO(){return nw||(nw=1,Yp.exports=jO()),Yp.exports}var qe=LO();class no{}class Xa extends no{constructor(e,n){super(),this.collection=e,this.alias=n,this.type="collectionRef"}}class kr extends no{constructor(e,n){super(),this.query=e,this.alias=n,this.type="queryRef"}}class Mn extends no{constructor(e){super(),this.path=e,this.type="ref"}}class Fn extends no{constructor(e){super(),this.value=e,this.type="val"}}class Cr extends no{constructor(e,n){super(),this.name=e,this.args=n,this.type="func"}}class uk extends no{constructor(e,n){super(),this.name=e,this.args=n,this.type="agg"}}function dy(t){return t instanceof uk||t instanceof Cr||t instanceof Mn||t instanceof Fn}function hy(t){return typeof t=="object"&&"expression"in t?t.expression:t}function rw(t){return typeof t=="object"&&"expression"in t?t.expression:t}function sw(t){return typeof t=="object"&&"expression"in t&&t.residual===!0}function zO(t){return{expression:t,residual:!0}}function PO(t,e){if(t.from.alias===e)return t.from;for(const n of t.join||[])if(n.from.alias===e)return n.from}function Ul(t,e,n){if(e.path.length!==0){if(e.path.length===1){const r=e.path[0];if(t.select){const s=t.select[r];if(s&&s.type==="ref")return Ul(t,s,n)}return{collection:n,path:[r]}}if(e.path.length>1){const[r,...s]=e.path,a=PO(t,r);return a?a.type==="queryRef"?Ul(a.query,new Mn(s),n):{collection:a.collection,path:s}:void 0}}}class or extends Error{constructor(e){super(e),this.name="TanStackDBError"}}class iw extends or{constructor(e,n,r){const s=`${e==="insert"?"Insert":"Update"} validation failed: ${n.map(a=>`
- ${a.message} - path: ${a.path}`).join("")}`;super(r||s),this.name="SchemaValidationError",this.type=e,this.issues=n}}class nc extends or{constructor(e){super(e),this.name="CollectionConfigurationError"}}class BO extends nc{constructor(){super("Collection requires a config")}}class $O extends nc{constructor(){super("Collection requires a sync config")}}class UO extends nc{constructor(){super("Schema must implement the standard-schema interface")}}class aw extends nc{constructor(){super("Schema validation must be synchronous")}}class rc extends or{constructor(e){super(e),this.name="CollectionStateError"}}class qO extends rc{constructor(e,n){super(`Cannot perform ${e} on collection "${n}" - collection is in error state. Try calling cleanup() and restarting the collection.`)}}class FO extends rc{constructor(e,n,r){super(`Invalid collection status transition from "${e}" to "${n}" for collection "${r}"`)}}class VO extends rc{constructor(){super("Collection is in error state")}}class HO extends rc{constructor(){super("Active subscribers count is negative - this should never happen")}}class Zr extends or{constructor(e){super(e),this.name="CollectionOperationError"}}class GO extends Zr{constructor(e){super(`An object was created without a defined key: ${JSON.stringify(e)}`)}}class KO extends Zr{constructor(e,n){const r=e===null?"null":typeof e;super(`getKey returned an invalid key type. Expected string or number, but got ${r}: ${JSON.stringify(e)}. Item: ${JSON.stringify(n)}`)}}class ZO extends Zr{constructor(e){super(`Cannot insert document with ID "${e}" because it already exists in the collection`)}}class QO extends Zr{constructor(e,n,r){const s=`Cannot insert document with key "${e}" from sync because it already exists in the collection "${n}"`;r?.hasCustomGetKey&&r.hasJoins?super(`${s}. This collection uses a custom getKey with joined queries. Joined queries can produce multiple rows with the same key when relationships are not 1:1. Consider: (1) using a composite key in your getKey function (e.g., \`\${item.key1}-\${item.key2}\`), (2) ensuring your join produces unique rows per key, or (3) removing the custom getKey to use the default composite key behavior.`):super(s)}}class JO extends Zr{constructor(){super("The first argument to update is missing")}}class YO extends Zr{constructor(){super("No keys were passed to update")}}class XO extends Zr{constructor(e){super(`The key "${e}" was passed to update but an object for this key was not found in the collection`)}}class WO extends Zr{constructor(e,n){super(`Updating the key of an item is not allowed. Original key: "${e}", Attempted new key: "${n}". Please delete the old item and create a new one if a key change is necessary.`)}}class eN extends Zr{constructor(){super("No keys were passed to delete")}}class tN extends Zr{constructor(e){super(`Collection.delete was called with key '${e}' but there is no item in the collection with this key`)}}class py extends or{constructor(e){super(e),this.name="MissingHandlerError"}}class nN extends py{constructor(){super("Collection.insert called directly (not within an explicit transaction) but no 'onInsert' handler is configured.")}}class rN extends py{constructor(){super("Collection.update called directly (not within an explicit transaction) but no 'onUpdate' handler is configured.")}}class sN extends py{constructor(){super("Collection.delete called directly (not within an explicit transaction) but no 'onDelete' handler is configured.")}}class ri extends or{constructor(e){super(e),this.name="TransactionError"}}class iN extends ri{constructor(){super("mutationFn is required when creating a transaction")}}class aN extends ri{constructor(){super("You can no longer call .mutate() as the transaction is no longer pending")}}class oN extends ri{constructor(){super("You can no longer call .rollback() as the transaction is already completed")}}class lN extends ri{constructor(){super("You can no longer call .commit() as the transaction is no longer pending")}}class ow extends ri{constructor(){super("No pending sync transaction to write to")}}class lw extends ri{constructor(){super("The pending sync transaction is already committed, you can't still write to it.")}}class cN extends ri{constructor(){super("No pending sync transaction to commit")}}class uN extends ri{constructor(){super("The pending sync transaction is already committed, you can't commit it again.")}}class ro extends or{constructor(e){super(e),this.name="QueryBuilderError"}}class fN extends ro{constructor(e){super(`Only one source is allowed in the ${e}`)}}class dN extends ro{constructor(e){super(`A sub query passed to a ${e} must have a from clause itself`)}}class hN extends ro{constructor(e){super(`Invalid source for live query: The value provided for alias "${e}" is not a Collection or subquery. Live queries only accept Collection instances or subqueries. Please ensure you're passing a valid Collection or QueryBuilder, not a plain array or other data type.`)}}class Tu extends ro{constructor(e,n){super(`Invalid source for ${e}: Expected an object with a single key-value pair like { alias: collection }. For example: .from({ todos: todosCollection }). Got: ${n}`)}}class pN extends ro{constructor(){super("Join condition must be an equality expression")}}class mN extends ro{constructor(){super("Query must have a from clause")}}class lr extends or{constructor(e){super(e),this.name="QueryCompilationError"}}class gN extends lr{constructor(){super("DISTINCT requires a SELECT clause.")}}class yN extends lr{constructor(){super("HAVING clause requires GROUP BY clause")}}class bN extends lr{constructor(){super("LIMIT and OFFSET require an ORDER BY clause to ensure deterministic results")}}class fk extends lr{constructor(e,n,r){const s=n?`alias "${e}" (collection "${n}")`:`collection "${e}"`,a=r?.length?`. Available keys: ${r.join(", ")}`:"";super(`Input for ${s} not found in inputs map${a}`)}}class _N extends lr{constructor(e,n){super(`Subquery uses alias "${e}" which is already used in the parent query. Each alias must be unique across parent and subquery contexts. Parent query aliases: ${n.join(", ")}. Please rename "${e}" in either the parent query or subquery to avoid conflicts.`)}}class vN extends lr{constructor(e){super(`Unsupported FROM type: ${e}`)}}class xN extends lr{constructor(e){super(`Unknown expression type: ${e}`)}}class wN extends lr{constructor(){super("Reference path cannot be empty")}}class SN extends lr{constructor(e){super(`Unknown function: ${e}`)}}class cw extends lr{constructor(e){super(`Collection "${e}" not found during compilation of join`)}}class qi extends or{constructor(e){super(e),this.name="JoinError"}}class kN extends qi{constructor(e){super(`Unsupported join type: ${e}`)}}class EN extends qi{constructor(e){super(`Invalid join condition: both expressions refer to the same source "${e}"`)}}class CN extends qi{constructor(){super("Invalid join condition: expressions must reference source aliases")}}class TN extends qi{constructor(e){super(`Invalid join condition: left expression refers to an unavailable source "${e}"`)}}class AN extends qi{constructor(e){super(`Invalid join condition: right expression does not refer to the joined source "${e}"`)}}class RN extends qi{constructor(){super("Invalid join condition")}}class ON extends qi{constructor(e){super(`Unsupported join source type: ${e}`)}}class rd extends or{constructor(e){super(e),this.name="GroupByError"}}class NN extends rd{constructor(e){super(`Non-aggregate expression '${e}' in SELECT must also appear in GROUP BY clause`)}}class IN extends rd{constructor(e){super(`Unsupported aggregate function: ${e}`)}}class MN extends rd{constructor(e){super(`Aggregate function in HAVING clause must also be in SELECT clause: ${e}`)}}class DN extends rd{constructor(e){super(`Unknown expression type in HAVING clause: ${e}`)}}class uw extends or{constructor(e,n){const r=n instanceof Error?n.message:String(n);super(`Collection "${e}" sync cleanup function threw an error: ${r}`),this.name="SyncCleanupError"}}class jN extends or{constructor(e){super(e),this.name="QueryOptimizerError"}}class LN extends jN{constructor(){super("Cannot combine empty expression list")}}class zN extends lr{constructor(e,n,r,s){super(`Internal error: subscription for alias '${e}' (remapped from '${n}', collection '${r}') is missing in join pipeline. Available aliases: ${s.join(", ")}. This indicates a bug in alias tracking.`)}}class PN extends lr{constructor(e){super(`Internal error: compiler returned aliases without inputs: ${e.join(", ")}. This indicates a bug in query compilation. Please report this issue.`)}}class BN extends lr{constructor(){super("setWindow() can only be called on collections with an ORDER BY clause. Add .orderBy() to your query to enable window movement.")}}const Wp=new WeakMap;let $N=1;function fw(t){if(Wp.has(t))return Wp.get(t);const e=$N++;return Wp.set(t,e),e}const my=(t,e,n)=>{const{nulls:r}=n;if(t==null&&e==null)return 0;if(t==null)return r==="first"?-1:1;if(e==null)return r==="first"?1:-1;if(typeof t=="string"&&typeof e=="string"&&n.stringSort==="locale")return t.localeCompare(e,n.locale,n.localeOptions);if(Array.isArray(t)&&Array.isArray(e)){for(let l=0;l<Math.min(t.length,e.length);l++){const u=my(t[l],e[l],n);if(u!==0)return u}return t.length-e.length}if(t instanceof Date&&e instanceof Date)return t.getTime()-e.getTime();const s=typeof t=="object",a=typeof e=="object";if(s||a){if(s&&a){const l=fw(t),u=fw(e);return l-u}if(s)return 1;if(a)return-1}return t<e?-1:t>e?1:0},UN=(t,e,n)=>my(e,t,{...n,nulls:n.nulls==="first"?"last":"first"});function hf(t){return(e,n)=>t.direction==="asc"?my(e,n,t):UN(e,n,t)}const Wm=hf({direction:"asc",nulls:"first",stringSort:"locale"});function qN(t,e){if(t.byteLength!==e.byteLength)return!1;for(let n=0;n<t.byteLength;n++)if(t[n]!==e[n])return!1;return!0}const FN=128;function vs(t){return t instanceof Date?t.getTime():(typeof Buffer<"u"&&t instanceof Buffer||t instanceof Uint8Array)&&t.byteLength<=FN?`__u8__${Array.from(t).join(",")}`:t}function VN(t,e){if(t===e)return!0;const n=typeof Buffer<"u"&&t instanceof Buffer||t instanceof Uint8Array,r=typeof Buffer<"u"&&e instanceof Buffer||e instanceof Uint8Array;return n&&r?qN(t,e):!1}function tn(t){return t==null}function Ga(t){return t===!0}function Vn(t,e=!1){return yy(t,e)}function gy(t){return yy(t,!0)}function yy(t,e){switch(t.type){case"val":{const n=t.value;return()=>n}case"ref":return e?GN(t):HN(t);case"func":return KN(t,e);default:throw new xN(t.type)}}function HN(t){const[e,...n]=t.path;if(!e)throw new wN;if(n.length===0)return r=>r[e];if(n.length===1){const r=n[0];return s=>s[e]?.[r]}else return r=>{const s=r[e];if(s===void 0)return;let a=s;for(const l of n){if(a==null)return a;a=a[l]}return a}}function GN(t){const e=t.path;return n=>{let r=n;for(const s of e){if(r==null)return r;r=r[s]}return r}}function KN(t,e){const n=t.args.map(r=>yy(r,e));switch(t.name){case"eq":{const r=n[0],s=n[1];return a=>{const l=vs(r(a)),u=vs(s(a));return tn(l)||tn(u)?null:VN(l,u)}}case"gt":{const r=n[0],s=n[1];return a=>{const l=r(a),u=s(a);return tn(l)||tn(u)?null:l>u}}case"gte":{const r=n[0],s=n[1];return a=>{const l=r(a),u=s(a);return tn(l)||tn(u)?null:l>=u}}case"lt":{const r=n[0],s=n[1];return a=>{const l=r(a),u=s(a);return tn(l)||tn(u)?null:l<u}}case"lte":{const r=n[0],s=n[1];return a=>{const l=r(a),u=s(a);return tn(l)||tn(u)?null:l<=u}}case"and":return r=>{let s=!1;for(const a of n){const l=a(r);if(l===!1)return!1;tn(l)&&(s=!0)}return s?null:!0};case"or":return r=>{let s=!1;for(const a of n){const l=a(r);if(l===!0)return!0;tn(l)&&(s=!0)}return s?null:!1};case"not":{const r=n[0];return s=>{const a=r(s);return tn(a)?null:!a}}case"in":{const r=n[0],s=n[1];return a=>{const l=r(a),u=s(a);return tn(l)?null:Array.isArray(u)?u.includes(l):!1}}case"like":{const r=n[0],s=n[1];return a=>{const l=r(a),u=s(a);return tn(l)||tn(u)?null:dw(l,u,!1)}}case"ilike":{const r=n[0],s=n[1];return a=>{const l=r(a),u=s(a);return tn(l)||tn(u)?null:dw(l,u,!0)}}case"upper":{const r=n[0];return s=>{const a=r(s);return typeof a=="string"?a.toUpperCase():a}}case"lower":{const r=n[0];return s=>{const a=r(s);return typeof a=="string"?a.toLowerCase():a}}case"length":{const r=n[0];return s=>{const a=r(s);return typeof a=="string"||Array.isArray(a)?a.length:0}}case"concat":return r=>n.map(s=>{const a=s(r);try{return String(a??"")}catch{try{return JSON.stringify(a)||""}catch{return"[object]"}}}).join("");case"coalesce":return r=>{for(const s of n){const a=s(r);if(a!=null)return a}return null};case"add":{const r=n[0],s=n[1];return a=>{const l=r(a),u=s(a);return(l??0)+(u??0)}}case"subtract":{const r=n[0],s=n[1];return a=>{const l=r(a),u=s(a);return(l??0)-(u??0)}}case"multiply":{const r=n[0],s=n[1];return a=>{const l=r(a),u=s(a);return(l??0)*(u??0)}}case"divide":{const r=n[0],s=n[1];return a=>{const l=r(a),f=s(a)??0;return f!==0?(l??0)/f:null}}case"isUndefined":{const r=n[0];return s=>r(s)===void 0}case"isNull":{const r=n[0];return s=>r(s)===null}default:throw new SN(t.name)}}function dw(t,e,n){if(typeof t!="string"||typeof e!="string")return!1;const r=n?t.toLowerCase():t;let a=(n?e.toLowerCase():e).replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return a=a.replace(/%/g,".*"),a=a.replace(/_/g,"."),new RegExp(`^${a}$`).test(r)}function Ir(t,e){return Zu(t,e,new Map)}function Zu(t,e,n){if(t===e)return!0;if(t==null||e==null||typeof t!=typeof e)return!1;if(t instanceof Date)return e instanceof Date?t.getTime()===e.getTime():!1;if(t instanceof RegExp)return e instanceof RegExp?t.source===e.source&&t.flags===e.flags:!1;if(t instanceof Map){if(!(e instanceof Map)||t.size!==e.size)return!1;if(n.has(t))return n.get(t)===e;n.set(t,e);const s=Array.from(t.entries()).every(([a,l])=>e.has(a)&&Zu(l,e.get(a),n));return n.delete(t),s}if(t instanceof Set){if(!(e instanceof Set)||t.size!==e.size)return!1;if(n.has(t))return n.get(t)===e;n.set(t,e);const r=Array.from(t),s=Array.from(e);if(r.every(l=>typeof l!="object"))return n.delete(t),r.every(l=>e.has(l));const a=r.length===s.length;return n.delete(t),a}if(ArrayBuffer.isView(t)&&ArrayBuffer.isView(e)&&!(t instanceof DataView)&&!(e instanceof DataView)){const r=t,s=e;if(r.length!==s.length)return!1;for(let a=0;a<r.length;a++)if(r[a]!==s[a])return!1;return!0}if(pf(t)&&pf(e)){const r=eg(t),s=eg(e);return r!==s?!1:typeof t.equals=="function"?t.equals(e):t.toString()===e.toString()}if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;if(n.has(t))return n.get(t)===e;n.set(t,e);const r=t.every((s,a)=>Zu(s,e[a],n));return n.delete(t),r}if(typeof t=="object"){if(n.has(t))return n.get(t)===e;n.set(t,e);const r=Object.keys(t),s=Object.keys(e);if(r.length!==s.length)return n.delete(t),!1;const a=r.every(l=>l in e&&Zu(t[l],e[l],n));return n.delete(t),a}return!1}const ZN=["Temporal.Duration","Temporal.Instant","Temporal.PlainDate","Temporal.PlainDateTime","Temporal.PlainMonthDay","Temporal.PlainTime","Temporal.PlainYearMonth","Temporal.ZonedDateTime"];function eg(t){return t[Symbol.toStringTag]}function pf(t){const e=eg(t);return typeof e=="string"&&ZN.includes(e)}const by={direction:"asc",nulls:"first",stringSort:"locale"};class QN{constructor(e){this.originalIndex=e}lookup(e,n){const r=e==="gt"?"lt":e==="gte"?"lte":e==="lt"?"gt":e==="lte"?"gte":e;return this.originalIndex.lookup(r,n)}rangeQuery(e={}){return this.originalIndex.rangeQueryReversed(e)}rangeQueryReversed(e={}){return this.originalIndex.rangeQuery(e)}take(e,n,r){return this.originalIndex.takeReversed(e,n,r)}takeReversed(e,n,r){return this.originalIndex.take(e,n,r)}get orderedEntriesArray(){return this.originalIndex.orderedEntriesArrayReversed}get orderedEntriesArrayReversed(){return this.originalIndex.orderedEntriesArray}supports(e){return this.originalIndex.supports(e)}matchesField(e){return this.originalIndex.matchesField(e)}matchesCompareOptions(e){return this.originalIndex.matchesCompareOptions(e)}matchesDirection(e){return this.originalIndex.matchesDirection(e)}getStats(){return this.originalIndex.getStats()}add(e,n){this.originalIndex.add(e,n)}remove(e,n){this.originalIndex.remove(e,n)}update(e,n,r){this.originalIndex.update(e,n,r)}build(e){this.originalIndex.build(e)}clear(){this.originalIndex.clear()}get keyCount(){return this.originalIndex.keyCount}equalityLookup(e){return this.originalIndex.equalityLookup(e)}inArrayLookup(e){return this.originalIndex.inArrayLookup(e)}get indexedKeysSet(){return this.originalIndex.indexedKeysSet}get valueMapData(){return this.originalIndex.valueMapData}}function sc(t,e,n){const r=n??{...by,...t.compareOptions};for(const s of t.indexes.values())if(s.matchesField(e)&&s.matchesCompareOptions(r))return s.matchesDirection(r.direction)?s:new QN(s)}function JN(t){if(t.length===0)return new Set;if(t.length===1)return new Set(t[0]);let e=new Set(t[0]);for(let n=1;n<t.length;n++){const r=new Set;for(const s of e)t[n].has(s)&&r.add(s);e=r}return e}function YN(t){const e=new Set;for(const n of t)for(const r of n)e.add(r);return e}function XN(t,e){return _y(t,e)}function _y(t,e){if(t.type==="func")switch(t.name){case"eq":case"gt":case"gte":case"lt":case"lte":return eI(t,e);case"and":return tI(t,e);case"or":return nI(t,e);case"in":return rI(t,e)}return{canOptimize:!1,matchingKeys:new Set}}function WN(t,e){if(t.type!=="func"||t.args.length<2)return{canOptimize:!1,matchingKeys:new Set};const n=new Map;for(const r of t.args)if(r.type==="func"&&["gt","gte","lt","lte"].includes(r.name)){const s=r;if(s.args.length===2){const a=s.args[0],l=s.args[1];let u=null,f=null,d=s.name;if(a.type==="ref"&&l.type==="val")u=a,f=l;else if(a.type==="val"&&l.type==="ref")switch(u=l,f=a,d){case"gt":d="lt";break;case"gte":d="lte";break;case"lt":d="gt";break;case"lte":d="gte";break}if(u&&f){const p=u.path.join("."),y=f.value;n.has(p)||n.set(p,[]),n.get(p).push({operation:d,value:y})}}}for(const[r,s]of n)if(s.length>=2){const a=r.split("."),l=sc(e,a);if(l&&l.supports("gt")&&l.supports("lt")){let u,f,d=!0,m=!0;for(const{operation:y,value:g}of s)switch(y){case"gt":(u===void 0||g>u)&&(u=g,d=!1);break;case"gte":(u===void 0||g>u)&&(u=g,d=!0);break;case"lt":(f===void 0||g<f)&&(f=g,m=!1);break;case"lte":(f===void 0||g<f)&&(f=g,m=!0);break}return{canOptimize:!0,matchingKeys:l.rangeQuery({from:u,to:f,fromInclusive:d,toInclusive:m})}}}return{canOptimize:!1,matchingKeys:new Set}}function eI(t,e){if(t.type!=="func"||t.args.length!==2)return{canOptimize:!1,matchingKeys:new Set};const n=t.args[0],r=t.args[1];let s=null,a=null,l=t.name;if(n.type==="ref"&&r.type==="val")s=n,a=r;else if(n.type==="val"&&r.type==="ref")switch(s=r,a=n,l){case"gt":l="lt";break;case"gte":l="lte";break;case"lt":l="gt";break;case"lte":l="gte";break}if(s&&a){const u=s.path,f=sc(e,u);if(f){const d=a.value,m=l;return f.supports(m)?{canOptimize:!0,matchingKeys:f.lookup(m,d)}:{canOptimize:!1,matchingKeys:new Set}}}return{canOptimize:!1,matchingKeys:new Set}}function tI(t,e){if(t.type!=="func"||t.args.length<2)return{canOptimize:!1,matchingKeys:new Set};const n=WN(t,e);if(n.canOptimize)return n;const r=[];for(const s of t.args){const a=_y(s,e);a.canOptimize&&r.push(a)}if(r.length>0){const s=r.map(l=>l.matchingKeys);return{canOptimize:!0,matchingKeys:JN(s)}}return{canOptimize:!1,matchingKeys:new Set}}function nI(t,e){if(t.type!=="func"||t.args.length<2)return{canOptimize:!1,matchingKeys:new Set};const n=[];for(const r of t.args){const s=_y(r,e);s.canOptimize&&n.push(s)}if(n.length>0){const r=n.map(a=>a.matchingKeys);return{canOptimize:!0,matchingKeys:YN(r)}}return{canOptimize:!1,matchingKeys:new Set}}function rI(t,e){if(t.type!=="func"||t.args.length!==2)return{canOptimize:!1,matchingKeys:new Set};const n=t.args[0],r=t.args[1];if(n.type==="ref"&&r.type==="val"&&Array.isArray(r.value)){const s=n.path,a=r.value,l=sc(e,s);if(l){if(l.supports("in"))return{canOptimize:!0,matchingKeys:l.lookup("in",a)};if(l.supports("eq")){const u=new Set;for(const f of a){const d=l.lookup("eq",f);for(const m of d)u.add(m)}return{canOptimize:!0,matchingKeys:u}}}}return{canOptimize:!1,matchingKeys:new Set}}class sI extends Map{constructor(e,n){super(n),this.defaultValue=e}get(e){return this.has(e)?super.get(e):this.defaultValue()}update(e,n){const r=this.get(e),s=n(r);return this.set(e,s),s}}const em=3e4;function tm(t,e){if(e.length<=em)t.push(...e);else for(let n=0;n<e.length;n+=em){const r=e.slice(n,n+em);t.push(...r)}}function iI(t,e,n){let r=0,s=t.length;for(;r<s;){const a=Math.floor((r+s)/2),l=n(t[a],e);if(l<0)r=a+1;else if(l>0)s=a;else return a}return r}class aI{constructor(){this.objectIds=new WeakMap,this.nextId=0}getId(e){if(typeof e!="object"||e===null){const n=String(e);let r=0;for(let s=0;s<n.length;s++){const a=n.charCodeAt(s);r=(r<<5)-r+a,r=r&r}return r}return this.objectIds.has(e)||this.objectIds.set(e,this.nextId++),this.objectIds.get(e)}getStringId(e){return e===null?"null":e===void 0?"undefined":typeof e!="object"?`str_${String(e)}`:`obj_${this.getId(e)}`}}const nm=new aI;function oI(t,e){const[n,r]=t,[s,a]=e,l=[...Au(n,Math.min(r,s)),...Au(Math.max(n,a),r)],u=[...Au(s,Math.min(a,n)),...Au(Math.max(s,r),a)];return{onlyInA:l,onlyInB:u}}function Au(t,e){const n=[];for(let r=t;r<e;r++)n.push(r);return n}function mf(t,e){return typeof t==typeof e?t<e?-1:t>e?1:0:typeof t=="string"?-1:1}const lI=mn(),cI=mn(),uI=mn(),fI=mn(),dI=mn();function mn(){return Math.random()*(2**31-1)>>>0}const dk=new ArrayBuffer(8),hI=new DataView(dk),Qs=new Uint8Array(dk);class sd{constructor(){this.hash=lI,this.length=0,this.carry=0,this.carryBytes=0}_mix(e){e=Math.imul(e,3432918353),e=e<<15|e>>>17,e=Math.imul(e,461845907),this.hash^=e,this.hash=this.hash<<13|this.hash>>>19,this.hash=Math.imul(this.hash,5)+3864292196}writeByte(e){this.carry|=(e&255)<<8*this.carryBytes,this.carryBytes++,this.length++,this.carryBytes===4&&(this._mix(this.carry>>>0),this.carry=0,this.carryBytes=0)}update(e){switch(typeof e){case"symbol":{this.update(dI);const n=e.description;if(!n)return;for(let r=0;r<n.length;r++){const s=n.charCodeAt(r);this.writeByte(s&255),this.writeByte(s>>>8&255)}return}case"string":this.update(cI);for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);this.writeByte(r&255),this.writeByte(r>>>8&255)}return;case"number":hI.setFloat64(0,e,!0),this.writeByte(Qs[0]),this.writeByte(Qs[1]),this.writeByte(Qs[2]),this.writeByte(Qs[3]),this.writeByte(Qs[4]),this.writeByte(Qs[5]),this.writeByte(Qs[6]),this.writeByte(Qs[7]);return;case"bigint":{let n=e;for(n<0n?(n=-n,this.update(fI)):this.update(uI);n>0n;)this.writeByte(Number(n&0xffn)),n>>=8n;e===0n&&this.writeByte(0);return}default:throw new TypeError(`Unsupported input type: ${typeof e}`)}}digest(){if(this.carryBytes>0){let e=this.carry>>>0;e=Math.imul(e,3432918353),e=e<<15|e>>>17,e=Math.imul(e,461845907),this.hash^=e}return this.hash^=this.length,this.hash^=this.hash>>>16,this.hash=Math.imul(this.hash,2246822507),this.hash^=this.hash>>>13,this.hash=Math.imul(this.hash,3266489909),this.hash^=this.hash>>>16,this.hash>>>0}}const pI=mn(),mI=mn(),gI=mn(),yI=mn(),bI=mn(),_I=mn(),vI=mn(),xI=mn(),wI=mn(),SI=mn(),kI=mn(),EI=mn(),CI=128,ql=new WeakMap;function On(t){const e=new sd;return hk(e,t),e.digest()}function TI(t){const e=ql.get(t);if(e!==void 0)return e;let n;if(t instanceof Date)n=AI(t);else if(typeof Buffer<"u"&&t instanceof Buffer||t instanceof Uint8Array)if(t.byteLength<=CI)n=RI(t);else return tg(t);else{if(t instanceof File)return tg(t);{let r=t,s=xI;t instanceof Array&&(s=wI),t instanceof Map&&(s=SI,r=[...t.entries()]),t instanceof Set&&(s=kI,r=[...t.entries()]),n=OI(r,s)}}return ql.set(t,n),n}function AI(t){const e=new sd;return e.update(vI),e.update(t.getTime()),e.digest()}function RI(t){const e=new sd;e.update(EI),e.update(t.byteLength);for(let n=0;n<t.byteLength;n++)e.writeByte(t[n]);return e.digest()}function OI(t,e){const n=new sd;n.update(e);const r=Object.keys(t);r.sort(II);for(const s of r)n.update(bI),n.update(s),hk(n,t[s]);return n.digest()}function hk(t,e){if(e===null){t.update(gI);return}switch(typeof e){case"undefined":t.update(yI);return;case"boolean":t.update(e?pI:mI);return;case"number":t.update(isNaN(e)?NaN:e===0?0:e);return;case"bigint":case"string":case"symbol":t.update(e);return;case"object":t.update(NI(e));return;case"function":t.update(tg(e));return;default:console.warn(`Ignored input during hashing because it is of type ${typeof e} which is not supported`)}}function NI(t){let e=ql.get(t);return e===void 0&&(e=TI(t)),e}let hw=1;function tg(t){let e=ql.get(t);return e===void 0&&(e=hw^_I,hw++,ql.set(t,e)),e}function II(t,e){return t.localeCompare(e)}class Gt{#e;constructor(e=[]){this.#e=e}toString(e=!1){return`MultiSet(${JSON.stringify(this.#e,null,e?2:void 0)})`}toJSON(){return JSON.stringify(Array.from(this.getInner()))}static fromJSON(e){return new Gt(JSON.parse(e))}map(e){return new Gt(this.#e.map(([n,r])=>[e(n),r]))}filter(e){return new Gt(this.#e.filter(([n,r])=>e(n)))}negate(){return new Gt(this.#e.map(([e,n])=>[e,-n]))}concat(e){const n=[];return tm(n,this.#e),tm(n,e.getInner()),new Gt(n)}consolidate(){if(this.#e.length>0){const e=this.#e[0]?.[0];if(Array.isArray(e)&&e.length===2)return this.#t()}return this.#n()}#t(){const e=new Map,n=new Map,r=a=>{if(a.length!==2)throw new Error("Expected tuple of length 2");const[l,u]=a;return`${nm.getStringId(l)}|${nm.getStringId(u)}`};for(const[a,l]of this.#e){if(!Array.isArray(a)||a.length!==2)return this.#n();const[u,f]=a;if(typeof u!="string"&&typeof u!="number")return this.#n();let d;Array.isArray(f)&&f.length===2?d=r(f):d=nm.getStringId(f);const m=u+"|"+d;e.set(m,(e.get(m)||0)+l),n.has(m)||n.set(m,a)}const s=[];for(const[a,l]of e)l!==0&&s.push([n.get(a),l]);return new Gt(s)}#n(){const e=new sI(()=>0),n=new Map;let r=!1,s=!1,a=!1;for(const[f,d]of this.#e)if(typeof f=="string")r=!0;else if(typeof f=="number")s=!0;else{a=!0;break}const l=a||r&&s;for(const[f,d]of this.#e){const m=l?On(f):f;l&&!n.has(m)&&n.set(m,f),e.update(m,p=>p+d)}const u=[];for(const[f,d]of e.entries())if(d!==0){const m=l?n.get(f):f;u.push([m,d])}return new Gt(u)}extend(e){const n=e instanceof Gt?e.getInner():e;tm(this.#e,n)}add(e,n){n!==0&&this.#e.push([e,n])}getInner(){return this.#e}}class MI{#e;constructor(e){this.#e=e}drain(){const e=[...this.#e].reverse();return this.#e.length=0,e}isEmpty(){return this.#e.length===0}}class Qr{#e=[];sendData(e){e instanceof Gt||(e=new Gt(e));for(const n of this.#e)n.unshift(e)}newReader(){const e=[];return this.#e.push(e),new MI(e)}}class pk{constructor(e,n,r){this.id=e,this.inputs=n,this.output=r}hasPendingWork(){return this.inputs.some(e=>!e.isEmpty())}}class so extends pk{constructor(e,n,r){super(e,[n],r),this.id=e}inputMessages(){return this.inputs[0].drain()}}class DI extends pk{constructor(e,n,r,s){super(e,[n,r],s),this.id=e}inputAMessages(){return this.inputs[0].drain()}inputBMessages(){return this.inputs[1].drain()}}class vy extends so{run(){for(const e of this.inputMessages())this.output.sendData(this.inner(e))}}class jI{#e=[];#t=0;#n=!1;constructor(){}#r(){if(this.#n)throw new Error("Graph already finalized")}getNextOperatorId(){return this.#r(),this.#t++}newInput(){this.#r();const e=new Qr;return new LI(this,e)}addOperator(e){this.#r(),this.#e.push(e)}finalize(){this.#r(),this.#n=!0}step(){if(!this.#n)throw new Error("Graph not finalized");for(const e of this.#e)e.run()}pendingWork(){return this.#e.some(e=>e.hasPendingWork())}run(){for(;this.pendingWork();)this.step()}}class Jr{#e;#t;constructor(e,n){this.#e=e,this.#t=n}connectReader(){return this.#t.newReader()}get writer(){return this.#t}get graph(){return this.#e}pipe(...e){return e.reduce((n,r)=>r(n),this)}}class LI extends Jr{sendData(e){this.writer.sendData(e)}}class zI extends vy{#e;constructor(e,n,r,s){super(e,n,r),this.#e=s}inner(e){return e.map(this.#e)}}function Nn(t){return e=>{const n=new Jr(e.graph,new Qr),r=new zI(e.graph.getNextOperatorId(),e.connectReader(),n.writer,t);return e.graph.addOperator(r),n}}const dl=Symbol("NO_PREFIX");class pw extends Map{addValue(e,n){if(n===0)return this.size===0;const r=Tl(e),s=this.get(r);if(Qu(s)){const[a,l]=s;if(Tl(a)!==r)throw new Error("Mismatching prefixes, this should never happen");if(a===e||On(a)===On(e)){const f=l+n;f===0?this.delete(r):this.set(r,[e,f])}else{const f=new hl;f.set(On(a),s),f.set(On(e),[e,n]),this.set(r,f)}}else s===void 0?this.set(r,[e,n]):s.addValue(e,n)&&this.delete(r);return this.size===0}}class hl extends Map{addValue(e,n){if(n===0)return this.size===0;const r=On(e),s=this.get(r);if(s){const[,a]=s,l=a+n;l===0?this.delete(r):this.set(r,[e,l])}else this.set(r,[e,n]);return this.size===0}}class Ws{#e;#t=new Map;constructor(){this.#e=new Map}static fromMultiSets(e){const n=new Ws;for(const r of e)for(const[s,a]of r.getInner()){const[l,u]=s;n.addValue(l,[u,a])}return n}toString(e=!1){return`Index(${JSON.stringify([...this.entries()],void 0,e?2:void 0)})`}get size(){return this.#e.size}has(e){return this.#e.has(e)}hasPresence(e){return(this.#t.get(e)||0)!==0}getConsolidatedMultiplicity(e){return this.#t.get(e)||0}getPresenceKeys(){return this.#t.keys()}get(e){return[...this.getIterator(e)]}*getIterator(e){const n=this.#e.get(e);if(Qu(n))yield n;else{if(n===void 0)return;if(n instanceof hl)for(const r of n.values())yield r;else for(const r of n.values())if(Qu(r))yield r;else for(const s of r.values())yield s}}*entries(){for(const e of this.#e.keys())for(const n of this.getIterator(e))yield[e,n]}*entriesIterators(){for(const e of this.#e.keys())yield[e,this.getIterator(e)]}addValue(e,n){const[r,s]=n;if(s===0)return;const a=(this.#t.get(e)||0)+s;a===0?this.#t.delete(e):this.#t.set(e,a);const l=this.#e.get(e);if(l===void 0){this.#e.set(e,n);return}if(Qu(l)){this.#n(e,l,r,s);return}if(l instanceof hl){const u=Tl(r);if(u!==dl){const f=new pw;f.set(dl,l),f.set(u,n),this.#e.set(e,f)}else l.addValue(r,s)&&this.#e.delete(e)}else l.addValue(r,s)&&this.#e.delete(e)}#n(e,n,r,s){const[a,l]=n;if(a===r){const d=l+s;d===0?this.#e.delete(e):this.#e.set(e,[r,d]);return}const u=Tl(r),f=Tl(a);if(f===u&&(a===r||On(a)===On(r))){const d=l+s;d===0?this.#e.delete(e):this.#e.set(e,[r,d]);return}if(f===dl&&u===dl){const d=new hl;d.set(On(a),n),d.set(On(r),[r,s]),this.#e.set(e,d)}else{const d=new pw;if(f===u){const m=new hl;m.set(On(a),n),m.set(On(r),[r,s]),d.set(f,m)}else d.set(f,n),d.set(u,[r,s]);this.#e.set(e,d)}}append(e){for(const[n,r]of e.entries())this.addValue(n,r)}join(e){const n=[];if(this.size<=e.size)for(const[r,s]of this.entriesIterators()){if(!e.has(r))continue;const a=e.get(r);for(const[l,u]of s)for(const[f,d]of a)u!==0&&d!==0&&n.push([[r,[l,f]],u*d])}else for(const[r,s]of e.entriesIterators()){if(!this.has(r))continue;const a=this.get(r);for(const[l,u]of s)for(const[f,d]of a)d!==0&&u!==0&&n.push([[r,[f,l]],d*u])}return new Gt(n)}}function Tl(t){return Array.isArray(t)&&(typeof t[0]=="string"||typeof t[0]=="number"||typeof t[0]=="bigint")?t[0]:dl}function Qu(t){return Array.isArray(t)}class PI extends so{#e=new Ws;#t=new Ws;#n;constructor(e,n,r,s){super(e,n,r),this.#n=s}run(){const e=new Set;for(const r of this.inputMessages())for(const[s,a]of r.getInner()){const[l,u]=s;this.#e.addValue(l,[u,a]),e.add(l)}const n=[];for(const r of e){const s=this.#e.get(r),a=this.#t.get(r),l=this.#n(s),u=new Map,f=new Map;for(const[d,m]of l){const p=u.get(d)??0;u.set(d,p+m)}for(const[d,m]of a){const p=f.get(d)??0;f.set(d,p+m)}for(const[d,m]of f)u.has(d)||(n.push([[r,d],-m]),this.#t.addValue(r,[d,-m]));for(const[d,m]of u)f.has(d)||m!==0&&(n.push([[r,d],m]),this.#t.addValue(r,[d,m]));for(const[d,m]of u){const p=f.get(d);if(p!==void 0){const y=m-p;y!==0&&(n.push([[r,d],y]),this.#t.addValue(r,[d,y]))}}}n.length>0&&this.output.sendData(new Gt(n))}}function BI(t){return e=>{const n=new Jr(e.graph,new Qr),r=new PI(e.graph.getNextOperatorId(),e.connectReader(),n.writer,t);return e.graph.addOperator(r),n}}function mw(t){return"pipe"in t}function gw(t,e={}){const n=Object.fromEntries(Object.entries(e).filter(([r,s])=>!mw(s)));return Object.fromEntries(Object.entries(e).filter(([r,s])=>mw(s))),r=>{const s="__original_key__";return r.pipe(Nn(u=>{const f=t(u),d=JSON.stringify(f),m={};m[s]=f;for(const[p,y]of Object.entries(n))m[p]=y.preMap(u);return[d,m]})).pipe(BI(u=>{let f=0;for(const[p,y]of u)f+=y;if(f<=0)return[];const d={},m=u[0]?.[0]?.[s];d[s]=m;for(const[p,y]of Object.entries(n)){const g=u.map(([v,x])=>[v[p],x]);d[p]=y.reduce(g)}return[[d,1]]})).pipe(Nn(([u,f])=>{const d=f[s],m={};Object.assign(m,d);for(const[p,y]of Object.entries(n))y.postMap?m[p]=y.postMap(f[p]):m[p]=f[p];return[u,m]}))}}function $I(t=e=>e){return{preMap:e=>t(e),reduce:e=>{let n=0;for(const[r,s]of e)n+=r*s;return n}}}function UI(t=e=>e){return{preMap:e=>t(e)==null?0:1,reduce:e=>{let n=0;for(const[r,s]of e)n+=r*s;return n}}}function qI(t=e=>e){return{preMap:e=>({sum:t(e),count:0}),reduce:e=>{let n=0,r=0;for(const[s,a]of e)n+=s.sum*a,r+=a;return{sum:n,count:r}},postMap:e=>e.sum/e.count}}function FI(t){const e=t??(n=>n);return{preMap:n=>e(n),reduce:n=>{let r;for(const[s,a]of n)(!r||s&&s<r)&&(r=s);return r}}}function VI(t){const e=t??(n=>n);return{preMap:n=>e(n),reduce:n=>{let r;for(const[s,a]of n)(!r||s&&s>r)&&(r=s);return r}}}const HI={sum:$I,count:UI,avg:qI,min:FI,max:VI};class GI extends vy{#e;constructor(e,n,r,s){super(e,n,r),this.#e=s}inner(e){return this.#e(e),e}}function KI(t){return e=>{const n=new Jr(e.graph,new Qr),r=new GI(e.graph.getNextOperatorId(),e.connectReader(),n.writer,t);return e.graph.addOperator(r),n}}class ZI extends vy{#e;constructor(e,n,r,s){super(e,n,r),this.#e=s}inner(e){return e.filter(this.#e)}}function ei(t){return e=>{const n=new Jr(e.graph,new Qr),r=new ZI(e.graph.getNextOperatorId(),e.connectReader(),n.writer,t);return e.graph.addOperator(r),n}}class QI extends so{#e;constructor(e,n,r,s){super(e,n,r),this.#e=s}run(){for(const e of this.inputMessages())this.#e(e),this.output.sendData(e)}}function JI(t){return e=>{const n=new Jr(e.graph,new Qr),r=new QI(e.graph.getNextOperatorId(),e.connectReader(),n.writer,t);return e.graph.addOperator(r),n}}class YI extends so{run(){const e=this.inputMessages();if(e.length===0)return;const n=new Gt;for(const s of e)n.extend(s);const r=n.consolidate();r.getInner().length>0&&this.output.sendData(r)}}function XI(){return t=>{const e=new Jr(t.graph,new Qr),n=new YI(t.graph.getNextOperatorId(),t.connectReader(),e.writer);return t.graph.addOperator(n),e}}class WI extends DI{#e=new Ws;#t=new Ws;#n;constructor(e,n,r,s,a="inner"){super(e,n,r,s),this.#n=a}run(){const e=Ws.fromMultiSets(this.inputAMessages()),n=Ws.fromMultiSets(this.inputBMessages());if(e.size===0&&n.size===0)return;const r=new Gt;this.#n!=="anti"&&this.emitInnerResults(e,n,r),(this.#n==="left"||this.#n==="full"||this.#n==="anti")&&this.emitLeftOuterResults(e,n,r),(this.#n==="right"||this.#n==="full")&&this.emitRightOuterResults(e,n,r),this.#e.append(e),this.#t.append(n),r.getInner().length>0&&this.output.sendData(r)}emitInnerResults(e,n,r){e.size>0&&r.extend(e.join(this.#t)),n.size>0&&r.extend(this.#e.join(n)),e.size>0&&n.size>0&&r.extend(e.join(n))}emitLeftOuterResults(e,n,r){if(e.size>0)for(const[s,a]of e.entriesIterators()){const l=this.#t.getConsolidatedMultiplicity(s),u=n.getConsolidatedMultiplicity(s);if(l+u===0)for(const[d,m]of a)m!==0&&r.add([s,[d,null]],m)}if(n.size>0)for(const s of n.getPresenceKeys()){const a=this.#t.getConsolidatedMultiplicity(s),l=n.getConsolidatedMultiplicity(s);if(l===0)continue;const u=a+l;if(a===0==(u===0))continue;const f=a===0;for(const[d,m]of this.#e.getIterator(s))m!==0&&r.add([s,[d,null]],f?-m:+m)}}emitRightOuterResults(e,n,r){if(n.size>0)for(const[s,a]of n.entriesIterators()){const l=this.#e.getConsolidatedMultiplicity(s),u=e.getConsolidatedMultiplicity(s);if(l+u===0)for(const[d,m]of a)m!==0&&r.add([s,[null,d]],m)}if(e.size>0)for(const s of e.getPresenceKeys()){const a=this.#e.getConsolidatedMultiplicity(s),l=e.getConsolidatedMultiplicity(s);if(l===0)continue;const u=a+l;if(a===0==(u===0))continue;const f=a===0;for(const[d,m]of this.#t.getIterator(s))m!==0&&r.add([s,[null,d]],f?-m:+m)}}}function eM(t,e="inner"){return n=>{if(n.graph!==t.graph)throw new Error("Cannot join streams from different graphs");const r=new Jr(n.graph,new Qr),s=new WI(n.graph.getNextOperatorId(),n.connectReader(),t.connectReader(),r.writer,e);return n.graph.addOperator(s),r}}class tM extends so{#e;#t;constructor(e,n,r,s=a=>a){super(e,n,r),this.#e=s,this.#t=new Map}run(){const e=new Map;for(const r of this.inputMessages())for(const[s,a]of r.getInner()){const l=On(this.#e(s)),f=(e.get(l)?.[0]??this.#t.get(l)??0)+a;e.set(l,[f,s])}const n=[];for(const[r,[s,a]]of e.entries()){const l=this.#t.get(r)??0;s===0?this.#t.delete(r):this.#t.set(r,s),l<=0&&s>0?n.push([[On(this.#e(a)),a[1]],1]):l>0&&s<=0&&n.push([[On(this.#e(a)),a[1]],-1])}n.length>0&&this.output.sendData(new Gt(n))}}function nM(t=e=>e){return e=>{const n=new Jr(e.graph,new Qr),r=new tM(e.graph.getNextOperatorId(),e.connectReader(),n.writer,t);return e.graph.addOperator(r),n}}const rM="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function $a(t,e,n){const r=n[0];if(e!=null&&t>=e)throw new Error(t+" >= "+e);if(t.slice(-1)===r||e&&e.slice(-1)===r)throw new Error("trailing zero");if(e){let l=0;for(;(t[l]||r)===e[l];)l++;if(l>0)return e.slice(0,l)+$a(t.slice(l),e.slice(l),n)}const s=t?n.indexOf(t[0]):0,a=e!=null?n.indexOf(e[0]):n.length;if(a-s>1){const l=Math.round(.5*(s+a));return n[l]}else return e&&e.length>1?e.slice(0,1):n[s]+$a(t.slice(1),null,n)}function mk(t){if(t.length!==gk(t[0]))throw new Error("invalid integer part of order key: "+t)}function gk(t){if(t>="a"&&t<="z")return t.charCodeAt(0)-97+2;if(t>="A"&&t<="Z")return 90-t.charCodeAt(0)+2;throw new Error("invalid order key head: "+t)}function pl(t){const e=gk(t[0]);if(e>t.length)throw new Error("invalid order key: "+t);return t.slice(0,e)}function yw(t,e){if(t==="A"+e[0].repeat(26))throw new Error("invalid order key: "+t);const n=pl(t);if(t.slice(n.length).slice(-1)===e[0])throw new Error("invalid order key: "+t)}function bw(t,e){mk(t);const[n,...r]=t.split("");let s=!0;for(let a=r.length-1;s&&a>=0;a--){const l=e.indexOf(r[a])+1;l===e.length?r[a]=e[0]:(r[a]=e[l],s=!1)}if(s){if(n==="Z")return"a"+e[0];if(n==="z")return null;const a=String.fromCharCode(n.charCodeAt(0)+1);return a>"a"?r.push(e[0]):r.pop(),a+r.join("")}else return n+r.join("")}function sM(t,e){mk(t);const[n,...r]=t.split("");let s=!0;for(let a=r.length-1;s&&a>=0;a--){const l=e.indexOf(r[a])-1;l===-1?r[a]=e.slice(-1):(r[a]=e[l],s=!1)}if(s){if(n==="a")return"Z"+e.slice(-1);if(n==="A")return null;const a=String.fromCharCode(n.charCodeAt(0)-1);return a<"Z"?r.push(e.slice(-1)):r.pop(),a+r.join("")}else return n+r.join("")}function iM(t,e,n=rM){if(t!=null&&yw(t,n),e!=null&&yw(e,n),t!=null&&e!=null&&t>=e)throw new Error(t+" >= "+e);if(t==null){if(e==null)return"a"+n[0];const f=pl(e),d=e.slice(f.length);if(f==="A"+n[0].repeat(26))return f+$a("",d,n);if(f<e)return f;const m=sM(f,n);if(m==null)throw new Error("cannot decrement any more");return m}if(e==null){const f=pl(t),d=t.slice(f.length),m=bw(f,n);return m??f+$a(d,null,n)}const r=pl(t),s=t.slice(r.length),a=pl(e),l=e.slice(a.length);if(r===a)return r+$a(s,l,n);const u=bw(r,n);if(u==null)throw new Error("cannot increment any more");return u<e?u:r+$a(s,null,n)}class _w{#e=[];#t;#n;#r;constructor(e,n,r){this.#n=e,this.#r=e+n,this.#t=r}get size(){const e=this.#n,n=this.#r-this.#n,r=this.#e.length-e;return Math.max(0,Math.min(n,r))}move({offset:e,limit:n}){const r=this.#n,s=this.#r-this.#n,a=[this.#n,this.#r===1/0?this.#n+this.size:this.#r];this.#n=e??r,this.#r=this.#n+(n??s);const l=[this.#n,this.#r===1/0?Math.max(this.#n+this.size,a[1]):this.#r],{onlyInA:u,onlyInB:f}=oI(a,l),d=[];f.forEach(p=>{const y=this.#e[p];y&&d.push(y)});const m=[];return u.forEach(p=>{const y=this.#e[p];y&&m.push(y)}),{moveIns:d,moveOuts:m,changes:u.length+f.length>0}}insert(e){const n={moveIn:null,moveOut:null},r=this.#s(e),s=r===0?null:ww(this.#e[r-1]),a=r===this.#e.length?null:ww(this.#e[r]),l=iM(s,a),u=vw(e,l);if(this.#e.splice(r,0,u),r<this.#r){const f=Math.max(r,this.#n);f<this.#e.length&&(n.moveIn=this.#e[f],this.#r<this.#e.length&&(n.moveOut=this.#e[this.#r]))}return n}delete(e){const n={moveIn:null,moveOut:null},r=this.#s(e),[s]=this.#e.splice(r,1);if(r<this.#r){if(n.moveOut=s,r<this.#n){const l=this.#n-1;l<this.#e.length?n.moveOut=this.#e[l]:n.moveOut=null}const a=this.#r-1;a<this.#e.length&&(n.moveIn=this.#e[a])}return n}#s(e){return iI(this.#e,vw(e,""),(n,r)=>this.#t(xw(n),xw(r)))}}class aM extends so{#e=new Map;#t;constructor(e,n,r,s,a){super(e,n,r);const l=a.limit??1/0,u=a.offset??0;this.#t=this.createTopK(u,l,lM(s)),a.setSizeCallback?.(()=>this.#t.size),a.setWindowFn?.(this.moveTopK.bind(this))}createTopK(e,n,r){return new _w(e,n,r)}moveTopK({offset:e,limit:n}){if(!(this.#t instanceof _w))throw new Error("Cannot move B+-tree implementation of TopK with fractional index");const r=[],s=this.#t.move({offset:e,limit:n});s.moveIns.forEach(a=>this.handleMoveIn(a,r)),s.moveOuts.forEach(a=>this.handleMoveOut(a,r)),s.changes&&this.output.sendData(new Gt(r))}run(){const e=[];for(const n of this.inputMessages())for(const[r,s]of n.getInner()){const[a,l]=r;this.processElement(a,l,s,e)}e.length>0&&this.output.sendData(new Gt(e))}processElement(e,n,r,s){const{oldMultiplicity:a,newMultiplicity:l}=this.addKey(e,r);let u={moveIn:null,moveOut:null};a<=0&&l>0?u=this.#t.insert([e,n]):a>0&&l<=0&&(u=this.#t.delete([e,n])),this.handleMoveIn(u.moveIn,s),this.handleMoveOut(u.moveOut,s)}handleMoveIn(e,n){if(e){const[[r,s],a]=e;n.push([[r,[s,a]],1])}}handleMoveOut(e,n){if(e){const[[r,s],a]=e;n.push([[r,[s,a]],-1])}}getMultiplicity(e){return this.#e.get(e)??0}addKey(e,n){const r=this.getMultiplicity(e),s=r+n;return s===0?this.#e.delete(e):this.#e.set(e,s),{oldMultiplicity:r,newMultiplicity:s}}}function oM(t,e){const n=e||{};return r=>{const s=new Jr(r.graph,new Qr),a=new aM(r.graph.getNextOperatorId(),r.connectReader(),s.writer,t,n);return r.graph.addOperator(a),s}}function vw(t,e){return[t,e]}function xw(t){return t[0]}function ww(t){return t[1]}function lM(t){return([e,n],[r,s])=>{const a=t(n,s);return a!==0?a:mf(e,r)}}function cM(t,e,n){const r=n?.limit??1/0,s=n?.offset??0,a=n?.setSizeCallback,l=n?.setWindowFn,u=n?.comparator??((f,d)=>f===d?0:f<d?-1:1);return f=>f.pipe(t((d,m)=>u(e(d),e(m)),{limit:r,offset:s,setSizeCallback:a,setWindowFn:l}),XI())}function uM(t,e){return cM(oM,t,e)}class fM{constructor(e,n,r){this._root=rm,this._size=0,this._maxNodeSize=r>=4?Math.min(r,256):32,this._compare=e,n&&this.setPairs(n)}get size(){return this._size}get length(){return this._size}get isEmpty(){return this._size===0}clear(){this._root=rm,this._size=0}get(e,n){return this._root.get(e,n,this)}set(e,n,r){this._root.isShared&&(this._root=this._root.clone());const s=this._root.set(e,n,r,this);return s===!0||s===!1?s:(this._root=new xy([this._root,s]),!0)}has(e){return this.forRange(e,e,!0,void 0)!==0}delete(e){return this.editRange(e,e,!0,hM)!==0}get maxNodeSize(){return this._maxNodeSize}minKey(){return this._root.minKey()}maxKey(){return this._root.maxKey()}keysArray(){const e=[];return this._root.forRange(this.minKey(),this.maxKey(),!0,!1,this,0,(n,r)=>{e.push(n)}),e}nextHigherPair(e,n){return n=n||[],e===void 0?this._root.minPair(n):this._root.getPairOrNextHigher(e,this._compare,!1,n)}nextHigherKey(e){const n=this.nextHigherPair(e,Sw);return n&&n[0]}nextLowerPair(e,n){return n=n||[],e===void 0?this._root.maxPair(n):this._root.getPairOrNextLower(e,this._compare,!1,n)}nextLowerKey(e){const n=this.nextLowerPair(e,Sw);return n&&n[0]}setPairs(e,n){let r=0;for(const s of e)this.set(s[0],s[1],n)&&r++;return r}forRange(e,n,r,s,a){const l=this._root.forRange(e,n,r,!1,this,a||0,s);return typeof l=="number"?l:l.break}editRange(e,n,r,s,a){let l=this._root;l.isShared&&(this._root=l=l.clone());try{const u=l.forRange(e,n,r,!0,this,a||0,s);return typeof u=="number"?u:u.break}finally{let u;for(;l.keys.length<=1&&!l.isLeaf;)u||=l.isShared,this._root=l=l.keys.length===0?rm:l.children[0];u&&(l.isShared=!0)}}}class Fl{get isLeaf(){return this.children===void 0}constructor(e=[],n){this.keys=e,this.values=n||xn,this.isShared=void 0}maxKey(){return this.keys[this.keys.length-1]}indexOf(e,n,r){const s=this.keys;let a=0,l=s.length,u=l>>1;for(;a<l;){const f=r(s[u],e);if(f<0)a=u+1;else if(f>0)l=u;else{if(f===0)return u;if(e===e)return s.length;throw new Error("BTree: NaN was used as a key")}u=a+l>>1}return u^n}minKey(){return this.keys[0]}minPair(e){if(this.keys.length!==0)return e[0]=this.keys[0],e[1]=this.values[0],e}maxPair(e){if(this.keys.length===0)return;const n=this.keys.length-1;return e[0]=this.keys[n],e[1]=this.values[n],e}clone(){const e=this.values;return new Fl(this.keys.slice(0),e===xn?e:e.slice(0))}get(e,n,r){const s=this.indexOf(e,-1,r._compare);return s<0?n:this.values[s]}getPairOrNextLower(e,n,r,s){const a=this.indexOf(e,-1,n),l=a<0?~a-1:r?a:a-1;if(l>=0)return s[0]=this.keys[l],s[1]=this.values[l],s}getPairOrNextHigher(e,n,r,s){const a=this.indexOf(e,-1,n),l=a<0?~a:r?a:a+1,u=this.keys;if(l<u.length)return s[0]=u[l],s[1]=this.values[l],s}set(e,n,r,s){let a=this.indexOf(e,-1,s._compare);if(a<0){if(a=~a,s._size++,this.keys.length<s._maxNodeSize)return this.insertInLeaf(a,e,n,s);{const l=this.splitOffRightSide();let u=this;return a>this.keys.length&&(a-=this.keys.length,u=l),u.insertInLeaf(a,e,n,s),l}}else return r!==!1&&(n!==void 0&&this.reifyValues(),this.keys[a]=e,this.values[a]=n),!1}reifyValues(){return this.values===xn?this.values=this.values.slice(0,this.keys.length):this.values}insertInLeaf(e,n,r,s){if(this.keys.splice(e,0,n),this.values===xn){for(;xn.length<s._maxNodeSize;)xn.push(void 0);if(r===void 0)return!0;this.values=xn.slice(0,this.keys.length-1)}return this.values.splice(e,0,r),!0}takeFromRight(e){let n=this.values;e.values===xn?n!==xn&&n.push(void 0):(n=this.reifyValues(),n.push(e.values.shift())),this.keys.push(e.keys.shift())}takeFromLeft(e){let n=this.values;e.values===xn?n!==xn&&n.unshift(void 0):(n=this.reifyValues(),n.unshift(e.values.pop())),this.keys.unshift(e.keys.pop())}splitOffRightSide(){const e=this.keys.length>>1,n=this.keys.splice(e),r=this.values===xn?xn:this.values.splice(e);return new Fl(n,r)}forRange(e,n,r,s,a,l,u){const f=a._compare;let d,m;if(n===e){if(!r||(m=(d=this.indexOf(e,-1,f))+1,d<0))return l}else d=this.indexOf(e,0,f),m=this.indexOf(n,-1,f),m<0?m=~m:r===!0&&m++;const p=this.keys,y=this.values;if(u!==void 0)for(let g=d;g<m;g++){const v=p[g],x=u(v,y[g],l++);if(x!==void 0){if(s===!0){if(v!==p[g]||this.isShared===!0)throw new Error("BTree illegally changed or cloned in editRange");x.delete?(this.keys.splice(g,1),this.values!==xn&&this.values.splice(g,1),a._size--,g--,m--):x.hasOwnProperty("value")&&(y[g]=x.value)}if(x.break!==void 0)return x}}else l+=m-d;return l}mergeSibling(e,n){if(this.keys.push.apply(this.keys,e.keys),this.values===xn){if(e.values===xn)return;this.values=this.values.slice(0,this.keys.length)}this.values.push.apply(this.values,e.reifyValues())}}class xy extends Fl{constructor(e,n){if(!n){n=[];for(let r=0;r<e.length;r++)n[r]=e[r].maxKey()}super(n),this.children=e}minKey(){return this.children[0].minKey()}minPair(e){return this.children[0].minPair(e)}maxPair(e){return this.children[this.children.length-1].maxPair(e)}get(e,n,r){const s=this.indexOf(e,0,r._compare),a=this.children;return s<a.length?a[s].get(e,n,r):void 0}getPairOrNextLower(e,n,r,s){const a=this.indexOf(e,0,n),l=this.children;if(a>=l.length)return this.maxPair(s);const u=l[a].getPairOrNextLower(e,n,r,s);return u===void 0&&a>0?l[a-1].maxPair(s):u}getPairOrNextHigher(e,n,r,s){const a=this.indexOf(e,0,n),l=this.children,u=l.length;if(a>=u)return;const f=l[a].getPairOrNextHigher(e,n,r,s);return f===void 0&&a<u-1?l[a+1].minPair(s):f}set(e,n,r,s){const a=this.children,l=s._maxNodeSize,u=s._compare;let f=Math.min(this.indexOf(e,0,u),a.length-1),d=a[f];if(d.isShared&&(a[f]=d=d.clone()),d.keys.length>=l){let p;f>0&&(p=a[f-1]).keys.length<l&&u(d.keys[0],e)<0?(p.isShared&&(a[f-1]=p=p.clone()),p.takeFromRight(d),this.keys[f-1]=p.maxKey()):(p=a[f+1])!==void 0&&p.keys.length<l&&u(d.maxKey(),e)<0&&(p.isShared&&(a[f+1]=p=p.clone()),p.takeFromLeft(d),this.keys[f]=a[f].maxKey())}const m=d.set(e,n,r,s);if(m===!1)return!1;if(this.keys[f]=d.maxKey(),m===!0)return!0;if(this.keys.length<l)return this.insert(f+1,m),!0;{const p=this.splitOffRightSide();let y=this;return u(m.maxKey(),this.maxKey())>0&&(y=p,f-=this.keys.length),y.insert(f+1,m),p}}insert(e,n){this.children.splice(e,0,n),this.keys.splice(e,0,n.maxKey())}splitOffRightSide(){const e=this.children.length>>1;return new xy(this.children.splice(e),this.keys.splice(e))}takeFromRight(e){this.keys.push(e.keys.shift()),this.children.push(e.children.shift())}takeFromLeft(e){this.keys.unshift(e.keys.pop()),this.children.unshift(e.children.pop())}forRange(e,n,r,s,a,l,u){const f=a._compare,d=this.keys,m=this.children;let p=this.indexOf(e,0,f),y=p;const g=Math.min(n===e?p:this.indexOf(n,0,f),d.length-1);if(s){if(y<=g)try{for(;y<=g;y++){m[y].isShared&&(m[y]=m[y].clone());const v=m[y].forRange(e,n,r,s,a,l,u);if(d[y]=m[y].maxKey(),typeof v!="number")return v;l=v}}finally{const v=a._maxNodeSize>>1;for(p>0&&p--,y=g;y>=p;y--)m[y].keys.length<=v&&(m[y].keys.length!==0?this.tryMerge(y,a._maxNodeSize):(d.splice(y,1),m.splice(y,1)));m.length!==0&&m[0].keys.length===0&&pM(!1,"emptiness bug")}}else for(;y<=g;y++){const v=m[y].forRange(e,n,r,s,a,l,u);if(typeof v!="number")return v;l=v}return l}tryMerge(e,n){const r=this.children;return e>=0&&e+1<r.length&&r[e].keys.length+r[e+1].keys.length<=n?(r[e].isShared&&(r[e]=r[e].clone()),r[e].mergeSibling(r[e+1],n),r.splice(e+1,1),this.keys.splice(e+1,1),this.keys[e]=r[e].maxKey(),!0):!1}mergeSibling(e,n){const r=this.keys.length;this.keys.push.apply(this.keys,e.keys);const s=e.children;if(this.children.push.apply(this.children,s),e.isShared&&!this.isShared)for(const a of s)a.isShared=!0;this.tryMerge(r-1,n)}}const xn=[],dM={delete:!0},hM=()=>dM,rm=(function(){const t=new Fl;return t.isShared=!0,t})(),Sw=[];function pM(t,...e){throw e.unshift("B+ tree"),new Error(e.join(" "))}function mM(){const t=new Map;function e(n){const r=n.join(".");if(t.has(r))return t.get(r);const s=new Proxy({},{get(a,l,u){if(l==="__refProxy")return!0;if(l==="__path")return n;if(l==="__type")return;if(typeof l=="symbol")return Reflect.get(a,l,u);const f=[...n,String(l)];return e(f)},has(a,l){return l==="__refProxy"||l==="__path"||l==="__type"?!0:Reflect.has(a,l)},ownKeys(a){return Reflect.ownKeys(a)},getOwnPropertyDescriptor(a,l){return l==="__refProxy"||l==="__path"||l==="__type"?{enumerable:!1,configurable:!0}:Reflect.getOwnPropertyDescriptor(a,l)}});return t.set(r,s),s}return e([])}function Oa(t){const e=new Map;let n=0;function r(a){const l=a.join(".");if(e.has(l))return e.get(l);const u=new Proxy({},{get(f,d,m){if(d==="__refProxy")return!0;if(d==="__path")return a;if(d==="__type")return;if(typeof d=="symbol")return Reflect.get(f,d,m);const p=[...a,String(d)];return r(p)},has(f,d){return d==="__refProxy"||d==="__path"||d==="__type"?!0:Reflect.has(f,d)},ownKeys(f){const d=++n,m=`__SPREAD_SENTINEL__${a.join(".")}__${d}`;return Object.prototype.hasOwnProperty.call(f,m)||Object.defineProperty(f,m,{enumerable:!0,configurable:!0,value:!0}),Reflect.ownKeys(f)},getOwnPropertyDescriptor(f,d){return d==="__refProxy"||d==="__path"||d==="__type"?{enumerable:!1,configurable:!0}:Reflect.getOwnPropertyDescriptor(f,d)}});return e.set(l,u),u}return new Proxy({},{get(a,l,u){if(l==="__refProxy")return!0;if(l==="__path")return[];if(l==="__type")return;if(typeof l=="symbol")return Reflect.get(a,l,u);const f=String(l);if(t.includes(f))return r([f])},has(a,l){return l==="__refProxy"||l==="__path"||l==="__type"||typeof l=="string"&&t.includes(l)?!0:Reflect.has(a,l)},ownKeys(a){return[...t,"__refProxy","__path","__type"]},getOwnPropertyDescriptor(a,l){if(l==="__refProxy"||l==="__path"||l==="__type")return{enumerable:!1,configurable:!0};if(typeof l=="string"&&t.includes(l))return{enumerable:!0,configurable:!0}}})}function sn(t){return gM(t)?new Mn(t.__path):t&&typeof t=="object"&&"type"in t&&(t.type==="func"||t.type==="ref"||t.type==="val"||t.type==="agg")?t:new Fn(t)}function gM(t){return t&&typeof t=="object"&&t.__refProxy===!0}function ng(t,e){return new Cr("eq",[sn(t),sn(e)])}function kw(t,e){return new Cr("gt",[sn(t),sn(e)])}function yM(t,e){return new Cr("gte",[sn(t),sn(e)])}function rg(t,e){return new Cr("lt",[sn(t),sn(e)])}function sg(t,e,...n){const r=[t,e,...n];return new Cr("and",r.map(s=>sn(s)))}function bM(t,e,...n){const r=[t,e,...n];return new Cr("or",r.map(s=>sn(s)))}function _M(t,e){return new Cr("in",[sn(t),sn(e)])}class vM{constructor(e,n,r,s){this.lookupCount=0,this.totalLookupTime=0,this.lastUpdated=new Date,this.id=e,this.expression=n,this.compareOptions=by,this.name=r,this.initialize(s)}supports(e){return this.supportedOperations.has(e)}matchesField(e){return this.expression.type==="ref"&&this.expression.path.length===e.length&&this.expression.path.every((n,r)=>n===e[r])}matchesCompareOptions(e){const n={...this.compareOptions,direction:void 0},r={...e,direction:void 0};return Ir(n,r)}matchesDirection(e){return this.compareOptions.direction===e}getStats(){return{entryCount:this.keyCount,lookupCount:this.lookupCount,averageLookupTime:this.lookupCount>0?this.totalLookupTime/this.lookupCount:0,lastUpdated:this.lastUpdated}}evaluateIndexExpression(e){return gy(this.expression)(e)}trackLookup(e){const n=performance.now()-e;this.lookupCount++,this.totalLookupTime+=n}updateTimestamp(){this.lastUpdated=new Date}}class ig extends vM{constructor(e,n,r,s){super(e,n,r,s),this.supportedOperations=new Set(["eq","gt","gte","lt","lte","in"]),this.valueMap=new Map,this.indexedKeys=new Set,this.compareFn=Wm,this.compareFn=s?.compareFn??Wm,s?.compareOptions&&(this.compareOptions=s.compareOptions),this.orderedEntries=new fM(this.compareFn)}initialize(e){}add(e,n){let r;try{r=this.evaluateIndexExpression(n)}catch(a){throw new Error(`Failed to evaluate index expression for key ${e}: ${a}`)}const s=vs(r);if(this.valueMap.has(s))this.valueMap.get(s).add(e);else{const a=new Set([e]);this.valueMap.set(s,a),this.orderedEntries.set(s,void 0)}this.indexedKeys.add(e),this.updateTimestamp()}remove(e,n){let r;try{r=this.evaluateIndexExpression(n)}catch(a){console.warn(`Failed to evaluate index expression for key ${e} during removal:`,a);return}const s=vs(r);if(this.valueMap.has(s)){const a=this.valueMap.get(s);a.delete(e),a.size===0&&(this.valueMap.delete(s),this.orderedEntries.delete(s))}this.indexedKeys.delete(e),this.updateTimestamp()}update(e,n,r){this.remove(e,n),this.add(e,r)}build(e){this.clear();for(const[n,r]of e)this.add(n,r)}clear(){this.orderedEntries.clear(),this.valueMap.clear(),this.indexedKeys.clear(),this.updateTimestamp()}lookup(e,n){const r=performance.now();let s;switch(e){case"eq":s=this.equalityLookup(n);break;case"gt":s=this.rangeQuery({from:n,fromInclusive:!1});break;case"gte":s=this.rangeQuery({from:n,fromInclusive:!0});break;case"lt":s=this.rangeQuery({to:n,toInclusive:!1});break;case"lte":s=this.rangeQuery({to:n,toInclusive:!0});break;case"in":s=this.inArrayLookup(n);break;default:throw new Error(`Operation ${e} not supported by BTreeIndex`)}return this.trackLookup(r),s}get keyCount(){return this.indexedKeys.size}equalityLookup(e){const n=vs(e);return new Set(this.valueMap.get(n)??[])}rangeQuery(e={}){const{from:n,to:r,fromInclusive:s=!0,toInclusive:a=!0}=e,l=new Set,u=vs(n),f=vs(r),d=u??this.orderedEntries.minKey(),m=f??this.orderedEntries.maxKey();return this.orderedEntries.forRange(d,m,a,(p,y)=>{if(!s&&this.compareFn(p,n)===0)return;const g=this.valueMap.get(p);g&&g.forEach(v=>l.add(v))}),l}rangeQueryReversed(e={}){const{from:n,to:r,fromInclusive:s=!0,toInclusive:a=!0}=e;return this.rangeQuery({from:r??this.orderedEntries.maxKey(),to:n??this.orderedEntries.minKey(),fromInclusive:a,toInclusive:s})}takeInternal(e,n,r,s,a=!1){const l=new Set,u=[];let f,d=vs(r);for(;(f=n(d))!==void 0&&u.length<e;){d=f[0];const m=this.valueMap.get(d);if(m&&m.size>0){const p=Array.from(m).sort(mf);a&&p.reverse();for(const y of p){if(u.length>=e)break;!l.has(y)&&(s?.(y)??!0)&&(u.push(y),l.add(y))}}}return u}take(e,n,r){const s=a=>this.orderedEntries.nextHigherPair(a);return this.takeInternal(e,s,n,r)}takeReversed(e,n,r){const s=a=>this.orderedEntries.nextLowerPair(a);return this.takeInternal(e,s,n,r,!0)}inArrayLookup(e){const n=new Set;for(const r of e){const s=vs(r),a=this.valueMap.get(s);a&&a.forEach(l=>n.add(l))}return n}get indexedKeysSet(){return this.indexedKeys}get orderedEntriesArray(){return this.orderedEntries.keysArray().map(e=>[e,this.valueMap.get(e)??new Set])}get orderedEntriesArrayReversed(){return this.takeReversed(this.orderedEntries.size).map(e=>[e,this.valueMap.get(e)??new Set])}get valueMapData(){return this.valueMap}}function yk(t){return t.config.autoIndex==="eager"}function id(t,e,n,r,s){if(!yk(n))return;const a=r??{...by,...n.compareOptions};if(!Array.from(n.indexes.values()).find(u=>u.matchesField(e)&&u.matchesCompareOptions(a)))try{n.createIndex(u=>{let f=u;for(const d of e)f=f[d];return f},{name:`auto:${e.join(".")}`,indexType:ig,options:s?{compareFn:s,compareOptions:a}:{}})}catch(u){console.warn(`${n.id?`[${n.id}] `:""}Failed to create auto-index for field path "${e.join(".")}":`,u)}}function xM(t,e){if(!yk(e))return;const n=wM(t);for(const{fieldName:r,fieldPath:s}of n)id(r,s,e)}function wM(t){const e=[];function n(r){if(r.type!=="func")return;const s=r;if(s.name==="and"){for(const d of s.args)n(d);return}if(!["eq","gt","gte","lt","lte","in"].includes(s.name)||s.args.length<1||s.args[0].type!=="ref")return;const u=s.args[0].path;if(u.length===0)return;const f=u.join("_");e.push({fieldName:f,fieldPath:u})}return n(t),e}const{sum:SM,count:kM,avg:EM,min:CM,max:TM}=HI;function AM(t,e){const n=new Map,r=[...t];if(!e)return{selectToGroupByIndex:n,groupByExpressions:r};for(const[s,a]of Object.entries(e)){if(a.type==="agg")continue;const l=r.findIndex(u=>gf(a,u));if(l===-1)throw new NN(s);n.set(s,l)}return{selectToGroupByIndex:n,groupByExpressions:r}}function Ew(t,e,n,r,s){if(e.length===0){const d={};if(r){for(const[p,y]of Object.entries(r))if(y.type==="agg"){const g=y;d[p]=Cw(g)}}const m=()=>({__singleGroup:!0});if(t=t.pipe(gw(m,d)),t=t.pipe(Nn(([,p])=>{const g={...p.__select_results||{}};if(r)for(const[v,x]of Object.entries(r))x.type==="agg"&&(g[v]=p[v]);return["single_group",{...p,__select_results:g}]})),n&&n.length>0)for(const p of n){const y=rw(p),g=yf(y,r||{}),v=Vn(g);t=t.pipe(ei(([,x])=>{const C={result:x.__select_results};return Ga(v(C))}))}if(s&&s.length>0)for(const p of s)t=t.pipe(ei(([,y])=>{const g={result:y.__select_results};return Ga(p(g))}));return t}const a=AM(e,r),l=e.map(d=>Vn(d)),u=([,d])=>{const m={...d};delete m.__select_results;const p={};for(let y=0;y<e.length;y++){const g=l[y],v=g(m);p[`__key_${y}`]=v}return p},f={};if(r){for(const[d,m]of Object.entries(r))if(m.type==="agg"){const p=m;f[d]=Cw(p)}}if(t=t.pipe(gw(u,f)),t=t.pipe(Nn(([,d])=>{const m=d.__select_results||{},p={};if(r)for(const[g,v]of Object.entries(r))if(v.type!=="agg"){const x=a.selectToGroupByIndex.get(g);x!==void 0?p[g]=d[`__key_${x}`]:p[g]=m[g]}else p[g]=d[g];else for(let g=0;g<e.length;g++)p[`__key_${g}`]=d[`__key_${g}`];let y;if(e.length===1)y=d.__key_0;else{const g=[];for(let v=0;v<e.length;v++)g.push(d[`__key_${v}`]);y=JSON.stringify(g)}return[y,{...d,__select_results:p}]})),n&&n.length>0)for(const d of n){const m=rw(d),p=yf(m,r||{}),y=Vn(p);t=t.pipe(ei(([,g])=>{const v={result:g.__select_results};return y(v)}))}if(s&&s.length>0)for(const d of s)t=t.pipe(ei(([,m])=>{const p={result:m.__select_results};return Ga(d(p))}));return t}function gf(t,e){if(!t||!e||t.type!==e.type)return!1;switch(t.type){case"ref":return!t.path||!e.path||t.path.length!==e.path.length?!1:t.path.every((n,r)=>n===e.path[r]);case"val":return t.value===e.value;case"func":return t.name===e.name&&t.args?.length===e.args?.length&&(t.args||[]).every((n,r)=>gf(n,e.args[r]));case"agg":return t.name===e.name&&t.args?.length===e.args?.length&&(t.args||[]).every((n,r)=>gf(n,e.args[r]));default:return!1}}function Cw(t){const e=Vn(t.args[0]),n=([,a])=>{const l=e(a);return typeof l=="number"?l:l!=null?Number(l):0},r=([,a])=>{const l=e(a);return typeof l=="number"||l instanceof Date?l:l!=null?Number(l):0},s=([,a])=>e(a);switch(t.name.toLowerCase()){case"sum":return SM(n);case"count":return kM(s);case"avg":return EM(n);case"min":return CM(r);case"max":return TM(r);default:throw new IN(t.name)}}function yf(t,e,n="result"){switch(t.type){case"agg":{const r=t;for(const[s,a]of Object.entries(e))if(a.type==="agg"&&RM(r,a))return new Mn([n,s]);throw new MN(r.name)}case"func":{const r=t,s=r.args.map(a=>yf(a,e));return new Cr(r.name,s)}case"ref":return t;case"val":return t;default:throw new DN(t.type)}}function RM(t,e){return t.name===e.name&&t.args.length===e.args.length&&t.args.every((n,r)=>gf(n,e.args[r]))}function OM(t,e,n,r,s,a,l,u,f){const d=n.map(v=>{const x=yf(v.expression,r,"__select_results");return{compiledExpression:Vn(x),compareOptions:ag(v,s)}}),m=v=>{const x=v;return n.length>1?d.map(C=>C.compiledExpression(x)):n.length===1?d[0].compiledExpression(x):null},p=(v,x)=>{if(n.length>1){const C=v,k=x;for(let T=0;T<n.length;T++){const A=d[T],I=hf(A.compareOptions)(C[T],k[T]);if(I!==0)return I}return C.length-k.length}if(n.length===1){const C=d[0];return hf(C.compareOptions)(v,x)}return Wm(v,x)};let y,g;if(u){let v,x,C,k=t.from.alias;const T=n[0],A=T.expression;if(A.type==="ref"){const M=Ul(t,A,s);if(M){x=M.collection;const I=M.path[0],O=ag(T,x);I&&id(I,M.path,x,O,p),C=Vn(new Mn(M.path),!0),v=sc(x,M.path,O),v?.supports("gt")||(v=void 0),k=A.path.length>1?String(A.path[0]):t.from.alias}}if(C){const I=n.every(K=>K.expression.type==="ref")?n.map(K=>{const j=K.expression,J=Ul(t,j,s);return Vn(J?new Mn(J.path):K.expression,!0)}):void 0;g={alias:k,offset:f??0,limit:u,comparator:(K,j)=>{if(n.length===1){const J=K&&C(K),ne=j&&C(j);return p(J,ne)}if(I){const J=ne=>ne&&I.map(he=>he(ne));return p(J(K),J(j))}return 0},valueExtractorForRawRow:K=>{if(n.length===1)return C(K);if(I)return I.map(j=>j(K))},firstColumnValueExtractor:C,index:v,orderBy:n};const U=x?.id??s.id;a[U]=g,v&&(y=K=>{a[U].dataNeeded=()=>{const j=K();return Math.max(0,g.limit-j)}})}}return e.pipe(uM(m,{limit:u,offset:f,comparator:p,setSizeCallback:y,setWindowFn:v=>{l(x=>{v(x),g&&(g.offset=x.offset??g.offset,g.limit=x.limit??g.limit)})}}))}function ag(t,e){return t.compareOptions.stringSort!==void 0?t.compareOptions:{...e.compareOptions,direction:t.compareOptions.direction,nulls:t.compareOptions.nulls}}function NM(t,e={}){const n=r=>{const s=[];for(const[a,l]of t.entries())(r?.(l)??!0)&&s.push({type:"insert",key:a,value:l});return s};if(e.limit!==void 0&&!e.orderBy)throw new Error("limit cannot be used without orderBy");if(e.orderBy){const r=e.where?Al(e.where):void 0,s=MM(t,e.orderBy,e.limit,r,e.optimizedOnly);if(s===void 0)return;const a=[];for(const l of s){const u=t.get(l);u!==void 0&&a.push({type:"insert",key:l,value:u})}return a}if(!e.where)return n();try{const r=e.where,s=XN(r,t);if(s.canOptimize){const a=[];for(const l of s.matchingKeys){const u=t.get(l);u!==void 0&&a.push({type:"insert",key:l,value:u})}return a}else{if(e.optimizedOnly)return;const a=Al(r);return n(a)}}catch(r){console.warn(`${t.id?`[${t.id}] `:""}Error processing where clause, falling back to full scan:`,r);const s=Al(e.where);return e.optimizedOnly?void 0:n(s)}}function Al(t){const e=gy(t);return n=>{try{const r=e(n);return Ga(r)}catch{return!1}}}function IM(t,e){const n=Al(e.whereExpression);return r=>{const s=[];for(const a of r)if(a.type==="insert")n(a.value)&&s.push(a);else if(a.type==="update"){const l=n(a.value),u=a.previousValue?n(a.previousValue):!1;l&&u?s.push(a):l&&!u?s.push({...a,type:"insert"}):!l&&u&&s.push({...a,type:"delete",value:a.previousValue})}else n(a.value)&&s.push(a);(s.length>0||r.length===0)&&t(s)}}function MM(t,e,n,r,s){if(e.length===1){const f=e[0],d=f.expression;if(d.type==="ref"){const p=d.path,y=ag(f,t);id(p[0],p,t,y);const g=sc(t,p,y);if(g&&g.supports("gt")){const v=x=>{const C=t.get(x);return C===void 0?!1:r?.(C)??!0};return g.take(n??g.keyCount,void 0,v)}}}if(s)return;const a=[];for(const[f,d]of t.entries())(r?.(d)??!0)&&a.push({key:f,value:d});const l=(f,d)=>{for(const m of e){const p=hf(m.compareOptions),y=Tw(f.value,m.expression),g=Tw(d.value,m.expression),v=p(y,g);if(v!==0)return v}return 0};a.sort(l);const u=a.map(f=>f.key);return n!==void 0?u.slice(0,n):u}function Tw(t,e){if(e.type==="ref"){const n=e;let r=t;for(const s of n.path)r=r?.[s];return r}else return e.type==="val"?e.value:gy(e)(t)}class Aw{constructor(e){this.map=new Map,this.sortedKeys=[],this.comparator=e}indexOf(e,n){let r=0,s=this.sortedKeys.length;if(!this.comparator){for(;r<s;){const a=Math.floor((r+s)/2),l=this.sortedKeys[a],u=mf(e,l);if(u<0)s=a;else if(u>0)r=a+1;else return a}return r}for(;r<s;){const a=Math.floor((r+s)/2),l=this.sortedKeys[a],u=this.map.get(l),f=this.comparator(n,u);if(f<0)s=a;else if(f>0)r=a+1;else{const d=mf(e,l);if(d<0)s=a;else if(d>0)r=a+1;else return a}}return r}set(e,n){if(this.map.has(e)){const s=this.map.get(e),a=this.indexOf(e,s);this.sortedKeys.splice(a,1)}const r=this.indexOf(e,n);return this.sortedKeys.splice(r,0,e),this.map.set(e,n),this}get(e){return this.map.get(e)}delete(e){if(this.map.has(e)){const n=this.map.get(e),r=this.indexOf(e,n);return this.sortedKeys.splice(r,1),this.map.delete(e)}return!1}has(e){return this.map.has(e)}clear(){this.map.clear(),this.sortedKeys=[]}get size(){return this.map.size}*[Symbol.iterator](){for(const e of this.sortedKeys)yield[e,this.map.get(e)]}entries(){return this[Symbol.iterator]()}keys(){return this.sortedKeys[Symbol.iterator]()}values(){return(function*(){for(const e of this.sortedKeys)yield this.map.get(e)}).call(this)}forEach(e){for(const n of this.sortedKeys)e(this.map.get(n),n,this.map)}}class DM{constructor(e){this.pendingSyncedTransactions=[],this.syncedMetadata=new Map,this.optimisticUpserts=new Map,this.optimisticDeletes=new Set,this.size=0,this.syncedKeys=new Set,this.preSyncVisibleState=new Map,this.recentlySyncedKeys=new Set,this.hasReceivedFirstCommit=!1,this.isCommittingSyncTransactions=!1,this.commitPendingTransactions=()=>{let n=!1;for(const l of this.transactions.values())if(l.state==="persisting"){n=!0;break}const{committedSyncedTransactions:r,uncommittedSyncedTransactions:s,hasTruncateSync:a}=this.pendingSyncedTransactions.reduce((l,u)=>(u.committed?(l.committedSyncedTransactions.push(u),u.truncate===!0&&(l.hasTruncateSync=!0)):l.uncommittedSyncedTransactions.push(u),l),{committedSyncedTransactions:[],uncommittedSyncedTransactions:[],hasTruncateSync:!1});if(!n||a){this.isCommittingSyncTransactions=!0;const l=a?r.find(y=>y.truncate)?.optimisticSnapshot:null,u=new Set;for(const y of r)for(const g of y.operations)u.add(g.key);let f=this.preSyncVisibleState;if(f.size===0){f=new Map;for(const y of u){const g=this.get(y);g!==void 0&&f.set(y,g)}}const d=[],m=this.config.sync.rowUpdateMode||"partial";for(const y of r){if(y.truncate){const g=new Set([...this.syncedData.keys(),...l?.upserts.keys()||[]]);for(const v of g){if(l?.deletes.has(v))continue;const x=l?.upserts.get(v)||this.syncedData.get(v);x!==void 0&&d.push({type:"delete",key:v,value:x})}this.syncedData.clear(),this.syncedMetadata.clear(),this.syncedKeys.clear();for(const v of u)f.delete(v);this._events.emit("truncate",{type:"truncate",collection:this.collection})}for(const g of y.operations){const v=g.key;switch(this.syncedKeys.add(v),g.type){case"insert":this.syncedMetadata.set(v,g.metadata);break;case"update":this.syncedMetadata.set(v,Object.assign({},this.syncedMetadata.get(v),g.metadata));break;case"delete":this.syncedMetadata.delete(v);break}switch(g.type){case"insert":this.syncedData.set(v,g.value);break;case"update":{if(m==="partial"){const x=Object.assign({},this.syncedData.get(v),g.value);this.syncedData.set(v,x)}else this.syncedData.set(v,g.value);break}case"delete":this.syncedData.delete(v);break}}}if(a){const y=new Set;for(const x of r)for(const C of x.operations)(C.type==="insert"||C.type==="update")&&y.add(C.key);const g=new Map(l.upserts),v=new Set(l.deletes);for(const[x,C]of g)if(!v.has(x))if(y.has(x)){let k=!1;for(let T=d.length-1;T>=0;T--){const A=d[T];if(A.key===x&&A.type==="insert"){A.value=C,k=!0;break}}k||d.push({type:"insert",key:x,value:C})}else d.push({type:"insert",key:x,value:C});if(d.length>0&&v.size>0){const x=[];for(const C of d)C.type==="insert"&&v.has(C.key)||x.push(C);d.length=0,d.push(...x)}this.lifecycle.status!=="ready"&&this.lifecycle.markReady()}if(this.optimisticUpserts.clear(),this.optimisticDeletes.clear(),this.isCommittingSyncTransactions=!1,a&&l){for(const[y,g]of l.upserts)this.optimisticUpserts.set(y,g);for(const y of l.deletes)this.optimisticDeletes.add(y)}for(const y of this.transactions.values())if(!["completed","failed"].includes(y.state)){for(const g of y.mutations)if(this.isThisCollection(g.collection)&&g.optimistic)switch(g.type){case"insert":case"update":this.optimisticUpserts.set(g.key,g.modified),this.optimisticDeletes.delete(g.key);break;case"delete":this.optimisticUpserts.delete(g.key),this.optimisticDeletes.add(g.key);break}}const p=new Map;for(const y of this.transactions.values())if(y.state==="completed")for(const g of y.mutations)g.optimistic&&this.isThisCollection(g.collection)&&u.has(g.key)&&p.set(g.key,{type:g.type,value:g.modified});for(const y of u){const g=f.get(y),v=this.get(y),x=p.get(y);let C=!1;x&&(x.type==="delete"&&g!==void 0&&v===void 0&&Ir(x.value,g)||v!==void 0&&Ir(x.value,v))&&(C=!0),C||(g===void 0&&v!==void 0?d.push({type:"insert",key:y,value:v}):g!==void 0&&v===void 0?d.push({type:"delete",key:y,value:g}):g!==void 0&&v!==void 0&&!Ir(g,v)&&d.push({type:"update",key:y,value:v,previousValue:g}))}this.size=this.calculateSize(),d.length>0&&this.indexes.updateIndexes(d),this.changes.emitEvents(d,!0),this.pendingSyncedTransactions=s,this.preSyncVisibleState.clear(),Promise.resolve().then(()=>{this.recentlySyncedKeys.clear()}),this.hasReceivedFirstCommit||(this.hasReceivedFirstCommit=!0)}},this.config=e,this.transactions=new Aw((n,r)=>n.compareCreatedAt(r)),this.syncedData=new Aw(e.compare)}setDeps(e){this.collection=e.collection,this.lifecycle=e.lifecycle,this.changes=e.changes,this.indexes=e.indexes,this._events=e.events}get(e){const{optimisticDeletes:n,optimisticUpserts:r,syncedData:s}=this;if(!n.has(e))return r.has(e)?r.get(e):s.get(e)}has(e){const{optimisticDeletes:n,optimisticUpserts:r,syncedData:s}=this;return n.has(e)?!1:r.has(e)?!0:s.has(e)}*keys(){const{syncedData:e,optimisticDeletes:n,optimisticUpserts:r}=this;for(const s of e.keys())n.has(s)||(yield s);for(const s of r.keys())!e.has(s)&&!n.has(s)&&(yield s)}*values(){for(const e of this.keys()){const n=this.get(e);n!==void 0&&(yield n)}}*entries(){for(const e of this.keys()){const n=this.get(e);n!==void 0&&(yield[e,n])}}*[Symbol.iterator](){for(const[e,n]of this.entries())yield[e,n]}forEach(e){let n=0;for(const[r,s]of this.entries())e(s,r,n++)}map(e){const n=[];let r=0;for(const[s,a]of this.entries())n.push(e(a,s,r++));return n}isThisCollection(e){return e===this.collection}recomputeOptimisticState(e=!1){if(this.isCommittingSyncTransactions&&!e)return;const n=new Map(this.optimisticUpserts),r=new Set(this.optimisticDeletes);this.optimisticUpserts.clear(),this.optimisticDeletes.clear();const s=[];for(const u of this.transactions.values())["completed","failed"].includes(u.state)||s.push(u);for(const u of s)for(const f of u.mutations)if(this.isThisCollection(f.collection)&&f.optimistic)switch(f.type){case"insert":case"update":this.optimisticUpserts.set(f.key,f.modified),this.optimisticDeletes.delete(f.key);break;case"delete":this.optimisticUpserts.delete(f.key),this.optimisticDeletes.add(f.key);break}this.size=this.calculateSize();const a=[];this.collectOptimisticChanges(n,r,a);const l=a.filter(u=>!!(!this.recentlySyncedKeys.has(u.key)||e));if(this.pendingSyncedTransactions.length>0&&!e){const u=new Set;for(const d of this.pendingSyncedTransactions)for(const m of d.operations)u.add(m.key);const f=l.filter(d=>!(d.type==="delete"&&u.has(d.key)&&!s.some(p=>p.mutations.some(y=>this.isThisCollection(y.collection)&&y.key===d.key))));f.length>0&&this.indexes.updateIndexes(f),this.changes.emitEvents(f,e)}else l.length>0&&this.indexes.updateIndexes(l),this.changes.emitEvents(l,e)}calculateSize(){const e=this.syncedData.size,n=Array.from(this.optimisticDeletes).filter(s=>this.syncedData.has(s)&&!this.optimisticUpserts.has(s)).length,r=Array.from(this.optimisticUpserts.keys()).filter(s=>!this.syncedData.has(s)).length;return e-n+r}collectOptimisticChanges(e,n,r){const s=new Set([...e.keys(),...this.optimisticUpserts.keys(),...n,...this.optimisticDeletes]);for(const a of s){const l=this.get(a),u=this.getPreviousValue(a,e,n);u!==void 0&&l===void 0?r.push({type:"delete",key:a,value:u}):u===void 0&&l!==void 0?r.push({type:"insert",key:a,value:l}):u!==void 0&&l!==void 0&&u!==l&&r.push({type:"update",key:a,value:l,previousValue:u})}}getPreviousValue(e,n,r){if(!r.has(e))return n.has(e)?n.get(e):this.syncedData.get(e)}scheduleTransactionCleanup(e){if(e.state==="completed"){this.transactions.delete(e.id);return}e.isPersisted.promise.then(()=>{this.transactions.delete(e.id)}).catch(()=>{})}capturePreSyncVisibleState(){if(this.pendingSyncedTransactions.length===0)return;const e=new Set;for(const n of this.pendingSyncedTransactions)for(const r of n.operations)e.add(r.key);for(const n of e)this.recentlySyncedKeys.add(n);for(const n of e)if(!this.preSyncVisibleState.has(n)){const r=this.get(n);r!==void 0&&this.preSyncVisibleState.set(n,r)}}onTransactionStateChange(){this.changes.shouldBatchEvents=this.pendingSyncedTransactions.length>0,this.capturePreSyncVisibleState(),this.recomputeOptimisticState(!1)}cleanup(){this.syncedData.clear(),this.syncedMetadata.clear(),this.optimisticUpserts.clear(),this.optimisticDeletes.clear(),this.size=0,this.pendingSyncedTransactions=[],this.syncedKeys.clear(),this.hasReceivedFirstCommit=!1}}class bk{constructor(){this.listeners=new Map}on(e,n){return this.listeners.has(e)||this.listeners.set(e,new Set),this.listeners.get(e).add(n),()=>{this.listeners.get(e)?.delete(n)}}once(e,n){const r=this.on(e,s=>{n(s),r()});return r}off(e,n){this.listeners.get(e)?.delete(n)}waitFor(e,n){return new Promise((r,s)=>{let a;const l=this.on(e,u=>{a&&(clearTimeout(a),a=void 0),r(u),l()});n&&(a=setTimeout(()=>{a=void 0,l(),s(new Error(`Timeout waiting for event ${String(e)}`))},n))})}emitInner(e,n){this.listeners.get(e)?.forEach(r=>{try{r(n)}catch(s){queueMicrotask(()=>{throw s})}})}clearListeners(){this.listeners.clear()}}function jM(t,e){if(e.length===0||t.length===0)return;if(t.length===1){const{expression:r,compareOptions:s}=t[0];return(s.direction==="asc"?kw:rg)(r,new Fn(e[0]))}const n=[];for(let r=0;r<t.length&&r<e.length;r++){const s=t[r],a=e[r],l=[];for(let d=0;d<r;d++){const m=t[d],p=e[d];l.push(ng(m.expression,new Fn(p)))}const f=(s.compareOptions.direction==="asc"?kw:rg)(s.expression,new Fn(a));if(l.length===0)n.push(f);else{const d=[...l,f];n.push(d.reduce((m,p)=>sg(m,p)))}}return n.length===1?n[0]:n.reduce((r,s)=>bM(r,s))}class LM extends bk{constructor(e,n,r){super(),this.collection=e,this.callback=n,this.options=r,this.loadedInitialState=!1,this.skipFiltering=!1,this.snapshotSent=!1,this.loadedSubsets=[],this.sentKeys=new Set,this.limitedSnapshotRowCount=0,this._status="ready",this.pendingLoadSubsetPromises=new Set,this.isBufferingForTruncate=!1,this.truncateBuffer=[],this.pendingTruncateRefetches=new Set,r.onUnsubscribe&&this.on("unsubscribed",a=>r.onUnsubscribe(a)),r.whereExpression&&xM(r.whereExpression,this.collection);const s=a=>{n(a),this.trackSentKeys(a)};this.callback=s,this.filteredCallback=r.whereExpression?IM(this.callback,r):this.callback,this.truncateCleanup=this.collection.on("truncate",()=>{this.handleTruncate()})}get status(){return this._status}handleTruncate(){const e=[...this.loadedSubsets],n=this.collection._sync.syncLoadSubsetFn!==null;if(e.length===0||!n){this.snapshotSent=!1,this.loadedInitialState=!1,this.limitedSnapshotRowCount=0,this.lastSentKey=void 0,this.loadedSubsets=[];return}this.isBufferingForTruncate=!0,this.truncateBuffer=[],this.pendingTruncateRefetches.clear(),this.snapshotSent=!1,this.loadedInitialState=!1,this.limitedSnapshotRowCount=0,this.lastSentKey=void 0,this.loadedSubsets=[],queueMicrotask(()=>{if(this.isBufferingForTruncate){for(const r of e){const s=this.collection._sync.loadSubset(r);this.loadedSubsets.push(r),this.trackLoadSubsetPromise(s),s instanceof Promise&&(this.pendingTruncateRefetches.add(s),s.catch(()=>{}).finally(()=>{this.pendingTruncateRefetches.delete(s),this.checkTruncateRefetchComplete()}))}this.pendingTruncateRefetches.size===0&&this.flushTruncateBuffer()}})}checkTruncateRefetchComplete(){this.pendingTruncateRefetches.size===0&&this.isBufferingForTruncate&&this.flushTruncateBuffer()}flushTruncateBuffer(){this.isBufferingForTruncate=!1;const e=this.truncateBuffer.flat();e.length>0&&this.filteredCallback(e),this.truncateBuffer=[]}setOrderByIndex(e){this.orderByIndex=e}setStatus(e){if(this._status===e)return;const n=this._status;this._status=e,this.emitInner("status:change",{type:"status:change",subscription:this,previousStatus:n,status:e});const r=`status:${e}`;this.emitInner(r,{type:r,subscription:this,previousStatus:n,status:e})}trackLoadSubsetPromise(e){e instanceof Promise&&(this.pendingLoadSubsetPromises.add(e),this.setStatus("loadingSubset"),e.finally(()=>{this.pendingLoadSubsetPromises.delete(e),this.pendingLoadSubsetPromises.size===0&&this.setStatus("ready")}))}hasLoadedInitialState(){return this.loadedInitialState}hasSentAtLeastOneSnapshot(){return this.snapshotSent}emitEvents(e){const n=this.filterAndFlipChanges(e);this.isBufferingForTruncate?n.length>0&&this.truncateBuffer.push(n):this.filteredCallback(n)}requestSnapshot(e){if(this.loadedInitialState)return!1;const n={where:this.options.whereExpression,optimizedOnly:e?.optimizedOnly??!1};if(e){if("where"in e){const f=e.where;if(n.where){const d=n.where,m=sg(d,f);n.where=m}else n.where=f}}else this.loadedInitialState=!0;const r={where:n.where,subscription:this,orderBy:e?.orderBy,limit:e?.limit},s=this.collection._sync.loadSubset(r);this.loadedSubsets.push(r),(e?.trackLoadSubsetPromise??!0)&&this.trackLoadSubsetPromise(s);const l=this.collection.currentStateAsChanges(n);if(l===void 0)return!1;const u=l.filter(f=>!this.sentKeys.has(f.key));for(const f of u)this.sentKeys.add(f.key);return this.snapshotSent=!0,this.callback(u),!0}requestLimitedSnapshot({orderBy:e,limit:n,minValues:r,offset:s}){if(!n)throw new Error("limit is required");if(!this.orderByIndex)throw new Error("Ordered snapshot was requested but no index was found. You have to call setOrderByIndex before requesting an ordered snapshot.");const l=r?.[0],u=this.orderByIndex,f=this.options.whereExpression,d=f?Al(f):void 0,m=O=>{if(this.sentKeys.has(O))return!1;const B=this.collection.get(O);return B===void 0?!1:d?.(B)??!0};let p=l;const y=[];let g=[];if(l!==void 0){const{expression:O}=e[0],B=this.collection.currentStateAsChanges({where:ng(O,new Fn(l))});if(B){const U=B.map(j=>j.key).filter(j=>!this.sentKeys.has(j)&&m(j));g.push(...U);const K=u.take(n-g.length,l,m);g.push(...K)}else g=u.take(n,l,m)}else g=u.take(n,l,m);const v=()=>Math.max(n-y.length,0),x=()=>g.length===0,C=e[0].expression,k=C.type==="ref"?Vn(new Mn(C.path),!0):null;for(;v()>0&&!x();){const O=new Set;for(const B of g){const U=this.collection.get(B);y.push({type:"insert",key:B,value:U}),p=k?k(U):U,O.add(B)}g=u.take(v(),p,m)}const T=this.limitedSnapshotRowCount;for(const O of y)this.sentKeys.add(O.key);this.callback(y),this.limitedSnapshotRowCount+=y.length,y.length>0&&(this.lastSentKey=y[y.length-1].key);let A;if(r!==void 0&&r.length>0){const O=jM(e,r);if(O){const{expression:B}=e[0],U=r[0];let K;if(U instanceof Date){const j=new Date(U.getTime()+1);K=sg(yM(B,new Fn(U)),rg(B,new Fn(j)))}else K=ng(B,new Fn(U));A={whereFrom:O,whereCurrent:K,lastKey:this.lastSentKey}}}const M={where:f,limit:n,orderBy:e,cursor:A,offset:s??T,subscription:this},I=this.collection._sync.loadSubset(M);this.loadedSubsets.push(M),this.trackLoadSubsetPromise(I)}filterAndFlipChanges(e){if(this.loadedInitialState||this.skipFiltering)return e;const n=this.isBufferingForTruncate,r=[];for(const s of e){let a=s;if(this.sentKeys.has(s.key)){if(s.type==="insert")continue;s.type==="delete"&&this.sentKeys.delete(s.key)}else{if(s.type==="update")a={...s,type:"insert",previousValue:void 0};else if(s.type==="delete"&&!n)continue;this.sentKeys.add(s.key)}r.push(a)}return r}trackSentKeys(e){if(!(this.loadedInitialState||this.skipFiltering))for(const n of e)n.type==="delete"?this.sentKeys.delete(n.key):this.sentKeys.add(n.key)}markAllStateAsSeen(){this.skipFiltering=!0}unsubscribe(){this.truncateCleanup?.(),this.truncateCleanup=void 0,this.isBufferingForTruncate=!1,this.truncateBuffer=[],this.pendingTruncateRefetches.clear();for(const e of this.loadedSubsets)this.collection._sync.unloadSubset(e);this.loadedSubsets=[],this.emitInner("unsubscribed",{type:"unsubscribed",subscription:this}),this.clearListeners()}}class zM{constructor(){this.activeSubscribersCount=0,this.changeSubscriptions=new Set,this.batchedEvents=[],this.shouldBatchEvents=!1}setDeps(e){this.lifecycle=e.lifecycle,this.sync=e.sync,this.events=e.events,this.collection=e.collection}emitEmptyReadyEvent(){for(const e of this.changeSubscriptions)e.emitEvents([])}emitEvents(e,n=!1){if(this.shouldBatchEvents&&!n){this.batchedEvents.push(...e);return}let r=e;if(n&&(this.batchedEvents.length>0&&(r=[...this.batchedEvents,...e]),this.batchedEvents=[],this.shouldBatchEvents=!1),r.length!==0)for(const s of this.changeSubscriptions)s.emitEvents(r)}subscribeChanges(e,n={}){this.addSubscriber();const r=new LM(this.collection,e,{...n,onUnsubscribe:()=>{this.removeSubscriber(),this.changeSubscriptions.delete(r)}});return n.includeInitialState?r.requestSnapshot({trackLoadSubsetPromise:!1}):n.includeInitialState===!1&&r.markAllStateAsSeen(),this.changeSubscriptions.add(r),r}addSubscriber(){const e=this.activeSubscribersCount;this.activeSubscribersCount++,this.lifecycle.cancelGCTimer(),(this.lifecycle.status==="cleaned-up"||this.lifecycle.status==="idle")&&this.sync.startSync(),this.events.emitSubscribersChange(this.activeSubscribersCount,e)}removeSubscriber(){const e=this.activeSubscribersCount;if(this.activeSubscribersCount--,this.activeSubscribersCount===0)this.lifecycle.startGCTimer();else if(this.activeSubscribersCount<0)throw new HO;this.events.emitSubscribersChange(this.activeSubscribersCount,e)}cleanup(){this.batchedEvents=[],this.shouldBatchEvents=!1}}const PM=t=>setTimeout(()=>{t({didTimeout:!0,timeRemaining:()=>50})},0),BM=t=>{clearTimeout(t)},$M=typeof window<"u"&&"requestIdleCallback"in window?(t,e)=>window.requestIdleCallback(t,e):(t,e)=>PM(t),sm=typeof window<"u"&&"cancelIdleCallback"in window?t=>window.cancelIdleCallback(t):BM;class UM{constructor(e,n){this.status="idle",this.hasBeenReady=!1,this.hasReceivedFirstCommit=!1,this.onFirstReadyCallbacks=[],this.gcTimeoutId=null,this.idleCallbackId=null,this.config=e,this.id=n}setDeps(e){this.indexes=e.indexes,this.events=e.events,this.changes=e.changes,this.sync=e.sync,this.state=e.state}validateStatusTransition(e,n){if(e===n)return;if(!{idle:["loading","error","cleaned-up"],loading:["ready","error","cleaned-up"],ready:["cleaned-up","error"],error:["cleaned-up","idle"],"cleaned-up":["loading","error"]}[e].includes(n))throw new FO(e,n,this.id)}setStatus(e,n=!1){if(e==="ready"&&!n)throw new rc(`You can't directly call "setStatus('ready'). You must use markReady instead.`);this.validateStatusTransition(this.status,e);const r=this.status;this.status=e,e==="ready"&&!this.indexes.isIndexesResolved&&this.indexes.resolveAllIndexes().catch(s=>{console.warn(`${this.config.id?`[${this.config.id}] `:""}Failed to resolve indexes:`,s)}),this.events.emitStatusChange(e,r)}validateCollectionUsable(e){switch(this.status){case"error":throw new qO(e,this.id);case"cleaned-up":this.sync.startSync();break}}markReady(){if(this.validateStatusTransition(this.status,"ready"),this.status==="loading"){if(this.setStatus("ready",!0),!this.hasBeenReady){this.hasBeenReady=!0,this.hasReceivedFirstCommit||(this.hasReceivedFirstCommit=!0);const e=[...this.onFirstReadyCallbacks];this.onFirstReadyCallbacks=[],e.forEach(n=>n())}this.changes.changeSubscriptions.size>0&&this.changes.emitEmptyReadyEvent()}}startGCTimer(){this.gcTimeoutId&&clearTimeout(this.gcTimeoutId);const e=this.config.gcTime??3e5;e!==0&&(this.gcTimeoutId=setTimeout(()=>{this.changes.activeSubscribersCount===0&&this.scheduleIdleCleanup()},e))}cancelGCTimer(){this.gcTimeoutId&&(clearTimeout(this.gcTimeoutId),this.gcTimeoutId=null),this.idleCallbackId!==null&&(sm(this.idleCallbackId),this.idleCallbackId=null)}scheduleIdleCleanup(){this.idleCallbackId!==null&&sm(this.idleCallbackId),this.idleCallbackId=$M(e=>{this.changes.activeSubscribersCount===0?this.performCleanup(e)&&(this.idleCallbackId=null):this.idleCallbackId=null},{timeout:1e3})}performCleanup(e){return!e||e.timeRemaining()>0||e.didTimeout?(this.sync.cleanup(),this.state.cleanup(),this.changes.cleanup(),this.indexes.cleanup(),this.gcTimeoutId&&(clearTimeout(this.gcTimeoutId),this.gcTimeoutId=null),this.hasBeenReady=!1,this.onFirstReadyCallbacks=[],this.setStatus("cleaned-up"),this.events.cleanup(),!0):(this.scheduleIdleCleanup(),!1)}onFirstReady(e){if(this.hasBeenReady){e();return}this.onFirstReadyCallbacks.push(e)}cleanup(){this.idleCallbackId!==null&&(sm(this.idleCallbackId),this.idleCallbackId=null),this.performCleanup()}}const wy=Symbol("liveQueryInternal");class qM{constructor(e,n){this.preloadPromise=null,this.syncCleanupFn=null,this.syncLoadSubsetFn=null,this.syncUnloadSubsetFn=null,this.pendingLoadSubsetPromises=new Set,this.config=e,this.id=n,this.syncMode=e.syncMode??"eager"}setDeps(e){this.collection=e.collection,this.state=e.state,this.lifecycle=e.lifecycle,this._events=e.events}startSync(){if(!(this.lifecycle.status!=="idle"&&this.lifecycle.status!=="cleaned-up")){this.lifecycle.setStatus("loading");try{const e=FM(this.config.sync.sync({collection:this.collection,begin:()=>{this.state.pendingSyncedTransactions.push({committed:!1,operations:[],deletedKeys:new Set})},write:n=>{const r=this.state.pendingSyncedTransactions[this.state.pendingSyncedTransactions.length-1];if(!r)throw new ow;if(r.committed)throw new lw;let s;"key"in n?s=n.key:s=this.config.getKey(n.value);let a=n.type;if(n.type==="insert"){const u=this.state.syncedData.has(s),f=r.deletedKeys.has(s),d=r.truncate===!0;if(u&&!f&&!d){const m=this.state.syncedData.get(s);if(m!==void 0&&Ir(m,n.value))a="update";else{const y=this.config.utils[wy];throw new QO(s,this.id,{hasCustomGetKey:y?.hasCustomGetKey??!1,hasJoins:y?.hasJoins??!1})}}}const l={...n,type:a,key:s};r.operations.push(l),a==="delete"&&r.deletedKeys.add(s)},commit:()=>{const n=this.state.pendingSyncedTransactions[this.state.pendingSyncedTransactions.length-1];if(!n)throw new cN;if(n.committed)throw new uN;n.committed=!0,this.state.commitPendingTransactions()},markReady:()=>{this.lifecycle.markReady()},truncate:()=>{const n=this.state.pendingSyncedTransactions[this.state.pendingSyncedTransactions.length-1];if(!n)throw new ow;if(n.committed)throw new lw;n.operations=[],n.deletedKeys.clear(),n.truncate=!0,n.optimisticSnapshot={upserts:new Map(this.state.optimisticUpserts),deletes:new Set(this.state.optimisticDeletes)}}}));if(this.syncCleanupFn=e?.cleanup??null,this.syncLoadSubsetFn=e?.loadSubset??null,this.syncUnloadSubsetFn=e?.unloadSubset??null,this.syncMode==="on-demand"&&!this.syncLoadSubsetFn)throw new nc(`Collection "${this.id}" is configured with syncMode "on-demand" but the sync function did not return a loadSubset handler. Either provide a loadSubset handler or use syncMode "eager".`)}catch(e){throw this.lifecycle.setStatus("error"),e}}}preload(){return this.preloadPromise?this.preloadPromise:(this.syncMode==="on-demand"&&console.warn(`${this.id?`[${this.id}] `:""}Calling .preload() on a collection with syncMode "on-demand" is a no-op. In on-demand mode, data is only loaded when queries request it. Instead, create a live query and call .preload() on that to load the specific data you need. See https://tanstack.com/blog/tanstack-db-0.5-query-driven-sync for more details.`),this.preloadPromise=new Promise((e,n)=>{if(this.lifecycle.status==="ready"){e();return}if(this.lifecycle.status==="error"){n(new VO);return}if(this.lifecycle.onFirstReady(()=>{e()}),this.lifecycle.status==="idle"||this.lifecycle.status==="cleaned-up")try{this.startSync()}catch(r){n(r);return}}),this.preloadPromise)}get isLoadingSubset(){return this.pendingLoadSubsetPromises.size>0}trackLoadPromise(e){const n=!this.isLoadingSubset;this.pendingLoadSubsetPromises.add(e),n&&this._events.emit("loadingSubset:change",{type:"loadingSubset:change",collection:this.collection,isLoadingSubset:!0,previousIsLoadingSubset:!1,loadingSubsetTransition:"start"}),e.finally(()=>{const r=this.pendingLoadSubsetPromises.size===1&&this.pendingLoadSubsetPromises.has(e);this.pendingLoadSubsetPromises.delete(e),r&&this._events.emit("loadingSubset:change",{type:"loadingSubset:change",collection:this.collection,isLoadingSubset:!1,previousIsLoadingSubset:!0,loadingSubsetTransition:"end"})})}loadSubset(e){if(this.syncMode==="eager")return!0;if(this.syncLoadSubsetFn){const n=this.syncLoadSubsetFn(e);if(n instanceof Promise)return this.trackLoadPromise(n),n}return!0}unloadSubset(e){this.syncUnloadSubsetFn&&this.syncUnloadSubsetFn(e)}cleanup(){try{this.syncCleanupFn&&(this.syncCleanupFn(),this.syncCleanupFn=null)}catch(e){queueMicrotask(()=>{if(e instanceof Error){const n=new uw(this.id,e);throw n.cause=e,n.stack=e.stack,n}else throw new uw(this.id,e)})}this.preloadPromise=null}}function FM(t){if(typeof t=="function")return{cleanup:t};if(typeof t=="object")return t}function _k(t){return typeof t=="function"&&t.prototype!==void 0&&t.prototype.constructor===t}async function VM(t){return _k(t)?t:await t()}class HM{constructor(e,n,r,s,a,l){this.id=e,this.expression=n,this.name=r,this.resolver=s,this.options=a,this.collectionEntries=l,this.indexPromise=null,this.resolvedIndex=null,_k(this.resolver)&&(this.resolvedIndex=new this.resolver(this.id,this.expression,this.name,this.options),this.collectionEntries&&this.resolvedIndex.build(this.collectionEntries))}async resolve(){return this.resolvedIndex?this.resolvedIndex:(this.indexPromise||(this.indexPromise=this.createIndex()),this.resolvedIndex=await this.indexPromise,this.resolvedIndex)}isResolved(){return this.resolvedIndex!==null}getResolved(){if(!this.resolvedIndex)throw new Error(`Index ${this.id} has not been resolved yet. Ensure collection is synced.`);return this.resolvedIndex}getId(){return this.id}getName(){return this.name}getExpression(){return this.expression}async createIndex(){const e=await VM(this.resolver);return new e(this.id,this.expression,this.name,this.options)}}class GM{constructor(e,n){this.indexId=e,this.lazyIndex=n}get index(){return this.lazyIndex.getResolved()}get isReady(){return this.lazyIndex.isResolved()}async whenReady(){return await this.lazyIndex.resolve()}get id(){return this.indexId}get name(){return this.isReady?this.index.name:this.lazyIndex.getName()}get expression(){return this.lazyIndex.getExpression()}supports(e){return this.index.supports(e)}getStats(){return this.index.getStats()}matchesField(e){const n=this.expression;return n.type==="ref"&&n.path.length===e.length&&n.path.every((r,s)=>r===e[s])}get keyCount(){return this.index.keyCount}get indexedKeysSet(){return this.index.indexedKeysSet}get orderedEntriesArray(){return this.index.orderedEntriesArray}get valueMapData(){return this.index.valueMapData}equalityLookup(e){return this.index.equalityLookup?.(e)??new Set}rangeQuery(e){return this.index.rangeQuery?.(e)??new Set}inArrayLookup(e){return this.index.inArrayLookup?.(e)??new Set}_getLazyWrapper(){return this.lazyIndex}}class KM{constructor(){this.lazyIndexes=new Map,this.resolvedIndexes=new Map,this.isIndexesResolved=!1,this.indexCounter=0}setDeps(e){this.state=e.state,this.lifecycle=e.lifecycle}createIndex(e,n={}){this.lifecycle.validateCollectionUsable("createIndex");const r=++this.indexCounter,s=mM(),a=e(s),l=sn(a),u=n.indexType??ig,f=new HM(r,l,n.name,u,n.options,this.state.entries());if(this.lazyIndexes.set(r,f),u===ig)try{const d=f.getResolved();this.resolvedIndexes.set(r,d)}catch(d){console.warn("Failed to resolve BTreeIndex:",d)}else if(typeof u=="function"&&u.prototype)try{const d=f.getResolved();this.resolvedIndexes.set(r,d)}catch{this.resolveSingleIndex(r,f).catch(d=>{console.warn("Failed to resolve single index:",d)})}else this.isIndexesResolved&&this.resolveSingleIndex(r,f).catch(d=>{console.warn("Failed to resolve single index:",d)});return new GM(r,f)}async resolveAllIndexes(){if(this.isIndexesResolved)return;const e=Array.from(this.lazyIndexes.entries()).map(async([n,r])=>{const s=await r.resolve();return s.build(this.state.entries()),this.resolvedIndexes.set(n,s),{indexId:n,resolvedIndex:s}});await Promise.all(e),this.isIndexesResolved=!0}async resolveSingleIndex(e,n){const r=await n.resolve();return r.build(this.state.entries()),this.resolvedIndexes.set(e,r),r}get indexes(){return this.resolvedIndexes}updateIndexes(e){for(const n of this.resolvedIndexes.values())for(const r of e)switch(r.type){case"insert":n.add(r.key,r.value);break;case"update":r.previousValue?n.update(r.key,r.previousValue,r.value):n.add(r.key,r.value);break;case"delete":n.remove(r.key,r.value);break}}cleanup(){this.lazyIndexes.clear(),this.resolvedIndexes.clear()}}var ZM={};const QM=new Set(["find","findLast","findIndex","findLastIndex","filter","map","flatMap","forEach","some","every","reduce","reduceRight"]),JM=new Set(["pop","push","shift","unshift","splice","sort","reverse","fill","copyWithin"]),YM=new Set(["set","delete","clear","add"]),XM=new Set(["entries","keys","values","forEach"]);function Sy(t){return t!==null&&typeof t=="object"&&!(t instanceof Date)&&!(t instanceof RegExp)&&!pf(t)}function WM(t,e,n,r){if(QM.has(t))return function(...s){const a=s[0];if(typeof a!="function")return e.apply(n.copy_,s);const l=(d,m)=>{if(Sy(d)){const p={tracker:n,prop:String(m)},{proxy:y}=r(d,p);return y}return d},u=function(d,m,p){const y=l(d,m);return a.call(this,y,m,p)};if(t==="reduce"||t==="reduceRight"){const d=function(m,p,y,g){const v=l(p,y);return a.call(this,m,v,y,g)};return e.apply(n.copy_,[d,...s.slice(1)])}const f=e.apply(n.copy_,[u,...s.slice(1)]);if((t==="find"||t==="findLast")&&f&&typeof f=="object"){const d=n.copy_.indexOf(f);if(d!==-1)return l(f,d)}return t==="filter"&&Array.isArray(f)?f.map(d=>{const m=n.copy_.indexOf(d);return m!==-1?l(d,m):d}):f}}function e4(t,e){return function(){const n=t.copy_;let r=0;return{next(){if(r>=n.length)return{done:!0,value:void 0};const s=n[r];let a=s;if(Sy(s)){const l={tracker:t,prop:String(r)},{proxy:u}=e(s,l);a=u}return r++,{done:!1,value:a}},[Symbol.iterator](){return this}}}}function Rw(t,e,n){return function(...r){const s=t.apply(e.copy_,r);return n(e),s}}function t4(t,e,n,r,s,a,l){if(XM.has(t)||e===Symbol.iterator)return function(...f){const d=n.apply(s.copy_,f);if(t==="forEach"){const p=f[0];if(typeof p=="function"){const y=function(g,v,x){const C=p.call(this,g,v,x);return l(s),C};return n.apply(r,[y,...f.slice(1)])}}if(t==="entries"||t==="values"||t===Symbol.iterator.toString()||e===Symbol.iterator){const p=d,y=new Map;if(t==="values"&&r instanceof Map)for(const[v,x]of s.copy_.entries())y.set(x,v);const g=new Map;if(r instanceof Set)for(const v of s.copy_.values())g.set(v,v);return{next(){const v=p.next();if(!v.done&&v.value&&typeof v.value=="object"){if(t==="entries"&&Array.isArray(v.value)&&v.value.length===2){if(v.value[1]&&typeof v.value[1]=="object"){const x=v.value[0],C={tracker:s,prop:x,updateMap:T=>{s.copy_ instanceof Map&&s.copy_.set(x,T)}},{proxy:k}=a(v.value[1],C);v.value[1]=k}}else if(t==="values"||t===Symbol.iterator.toString()||e===Symbol.iterator)if(t==="values"&&r instanceof Map){const x=y.get(v.value);if(x!==void 0){const C={tracker:s,prop:x,updateMap:T=>{s.copy_ instanceof Map&&s.copy_.set(x,T)}},{proxy:k}=a(v.value,C);v.value=k}}else if(r instanceof Set){const x=v.value,C={tracker:s,prop:x,updateSet:T=>{s.copy_ instanceof Set&&(s.copy_.delete(x),s.copy_.add(T),g.set(x,T))}},{proxy:k}=a(v.value,C);v.value=k}else{const x=Symbol("iterator-value"),{proxy:C}=a(v.value,{tracker:s,prop:x});v.value=C}}return v},[Symbol.iterator](){return this}}}return d}}function et(...t){const e=typeof window<"u"&&typeof localStorage<"u";e&&localStorage.getItem("DEBUG")==="true"?console.log("[proxy]",...t):!e&&typeof process<"u"&&ZM.DEBUG==="true"&&console.log("[proxy]",...t)}function xs(t,e=new WeakMap){if(t==null||typeof t!="object")return t;if(e.has(t))return e.get(t);if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp)return new RegExp(t.source,t.flags);if(Array.isArray(t)){const s=[];return e.set(t,s),t.forEach((a,l)=>{s[l]=xs(a,e)}),s}if(ArrayBuffer.isView(t)&&!(t instanceof DataView)){const s=Object.getPrototypeOf(t).constructor,a=new s(t.length);e.set(t,a);for(let l=0;l<t.length;l++)a[l]=t[l];return a}if(t instanceof Map){const s=new Map;return e.set(t,s),t.forEach((a,l)=>{s.set(l,xs(a,e))}),s}if(t instanceof Set){const s=new Set;return e.set(t,s),t.forEach(a=>{s.add(xs(a,e))}),s}if(pf(t))return t;const n={};e.set(t,n);for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(n[s]=xs(t[s],e));const r=Object.getOwnPropertySymbols(t);for(const s of r)n[s]=xs(t[s],e);return n}let Ow=0;function n4(){return Ow+=1,Ow}function ky(t,e){const n=new Map;function r(p,y){if(et("Object ID:",p.constructor.name),n.has(p))return n.get(p);{const g=ky(p,y);return n.set(p,g),g}}const s=new Map,a={copy_:xs(t),originalObject:xs(t),proxyCount:n4(),modified:!1,assigned_:{},parent:e,target:t};et("createChangeProxy called for target",t,a.proxyCount);function l(p){p.modified||(p.modified=!0),p.parent&&(et("propagating change to parent"),"updateMap"in p.parent?p.parent.updateMap(p.copy_):"updateSet"in p.parent?p.parent.updateSet(p.copy_):(p.parent.tracker.copy_[p.parent.prop]=p.copy_,p.parent.tracker.assigned_[p.parent.prop]=!0),l(p.parent.tracker))}function u(p){if(et("checkIfReverted called with assigned keys:",Object.keys(p.assigned_)),Object.keys(p.assigned_).length===0&&Object.getOwnPropertySymbols(p.assigned_).length===0)return et("No assigned properties, returning true"),!0;for(const g in p.assigned_)if(p.assigned_[g]===!0){const v=p.copy_[g],x=p.originalObject[g];if(et(`Checking property ${String(g)}, current:`,v,"original:",x),!Ir(v,x))return et(`Property ${String(g)} is different, returning false`),!1}else if(p.assigned_[g]===!1)return et(`Property ${String(g)} was deleted, returning false`),!1;const y=Object.getOwnPropertySymbols(p.assigned_);for(const g of y)if(p.assigned_[g]===!0){const v=p.copy_[g],x=p.originalObject[g];if(!Ir(v,x))return et("Symbol property is different, returning false"),!1}else if(p.assigned_[g]===!1)return et("Symbol property was deleted, returning false"),!1;return et("All properties match original values, returning true"),!0}function f(p,y){et("checkParentStatus called for child prop:",y);const g=u(p);et("Parent checkIfReverted returned:",g),g&&(et("Parent is fully reverted, clearing tracking"),p.modified=!1,p.assigned_={},p.parent&&(et("Continuing up the parent chain"),f(p.parent.tracker,p.parent.prop)))}function d(p){if(et("createObjectProxy",p),s.has(p))return et("proxyCache found match"),s.get(p);const y=new Proxy(p,{get(g,v){et("get",g,v);const x=a.copy_[v]??a.originalObject[v],C=a.originalObject[v];if(et("value (at top of proxy get)",x),Object.getOwnPropertyDescriptor(g,v)?.get)return x;if(typeof x=="function"){if(Array.isArray(g)){const T=v.toString();if(JM.has(T))return Rw(x,a,l);const A=WM(T,x,a,r);if(A)return A;if(v===Symbol.iterator)return e4(a,r)}if(g instanceof Map||g instanceof Set){const T=v.toString();if(YM.has(T))return Rw(x,a,l);const A=t4(T,v,x,g,a,r,l);if(A)return A}return x.bind(g)}if(Sy(x)){const T={tracker:a,prop:String(v)},{proxy:A}=r(C,T);return s.set(x,A),A}return x},set(g,v,x){const C=a.copy_[v];if(et(`set called for property ${String(v)}, current:`,C,"new:",x),Ir(C,x))et("Value unchanged, not tracking");else{const k=a.originalObject[v],T=Ir(x,k);if(et("value:",x,"original:",k,"isRevertToOriginal:",T),T){et(`Reverting property ${String(v)} to original value`),delete a.assigned_[v.toString()],et(`Updating copy with original value for ${String(v)}`),a.copy_[v]=xs(k),et("Checking if all properties reverted");const A=u(a);et("All reverted:",A),A?(et("All properties reverted, clearing tracking"),a.modified=!1,a.assigned_={},e&&(et("Updating parent for property:",e.prop),f(e.tracker,e.prop))):(et("Some properties still changed, keeping modified flag"),a.modified=!0)}else et(`Setting new value for property ${String(v)}`),a.copy_[v]=x,a.assigned_[v.toString()]=!0,et("Marking object and ancestors as modified",a),l(a)}return!0},defineProperty(g,v,x){const C=Reflect.defineProperty(g,v,x);return C&&"value"in x&&(a.copy_[v]=xs(x.value),a.assigned_[v.toString()]=!0,l(a)),C},getOwnPropertyDescriptor(g,v){return Reflect.getOwnPropertyDescriptor(g,v)},preventExtensions(g){return Reflect.preventExtensions(g)},isExtensible(g){return Reflect.isExtensible(g)},deleteProperty(g,v){et("deleteProperty",g,v);const x=typeof v=="symbol"?v.toString():v;if(x in g){const C=x in a.originalObject,k=Reflect.deleteProperty(g,v);return k&&(C?(a.assigned_[x]=!1,l(a)):(delete a.assigned_[x],Object.keys(a.assigned_).length===0&&Object.getOwnPropertySymbols(a.assigned_).length===0?a.modified=!1:a.modified=!0)),k}return!0}});return s.set(p,y),y}return{proxy:d(a.copy_),getChanges:()=>{if(et("getChanges called, modified:",a.modified),et(a),!a.modified)return et("Object not modified, returning empty object"),{};if(typeof a.copy_!="object"||Array.isArray(a.copy_)||Object.keys(a.assigned_).length===0)return a.copy_;const p={};for(const y in a.copy_)a.assigned_[y]===!0&&y in a.copy_&&(p[y]=a.copy_[y]);return et("Returning copy:",p),p}}}function r4(t){const e=t.map(n=>ky(n));return{proxies:e.map(n=>n.proxy),getChanges:()=>e.map(n=>n.getChanges())}}function s4(t,e){const{proxy:n,getChanges:r}=ky(t);return e(n),r()}function i4(t,e){const{proxies:n,getChanges:r}=r4(t);return e(n),r()}function a4(){let t,e,n=!0;return{promise:new Promise((s,a)=>{t=l=>{n=!1,s(l)},e=l=>{n=!1,a(l)}}),resolve:t,reject:e,isPending:()=>n}}function o4(t){return typeof t=="object"&&t!==null&&typeof t.hasPendingGraphRun=="function"}class l4{constructor(){this.contexts=new Map,this.clearListeners=new Set}getOrCreateContext(e){let n=this.contexts.get(e);return n||(n={queue:[],jobs:new Map,dependencies:new Map,completed:new Set},this.contexts.set(e,n)),n}schedule({contextId:e,jobId:n,dependencies:r,run:s}){if(typeof e>"u"){s();return}const a=this.getOrCreateContext(e);if(a.jobs.has(n)||a.queue.push(n),a.jobs.set(n,s),r){const l=new Set(r);l.delete(n),a.dependencies.set(n,l)}else a.dependencies.has(n)||a.dependencies.set(n,new Set);a.completed.delete(n)}flush(e){const n=this.contexts.get(e);if(!n)return;const{queue:r,jobs:s,dependencies:a,completed:l}=n;for(;r.length>0;){let u=!1;const f=r.length;for(let d=0;d<f;d++){const m=r.shift(),p=s.get(m);if(!p){a.delete(m),l.delete(m);continue}const y=a.get(m);let g=!y;if(y){g=!0;for(const v of y){if(v===m)continue;const x=o4(v)&&v.hasPendingGraphRun(e);if(s.has(v)&&!l.has(v)||!s.has(v)&&x){g=!1;break}}}g?(s.delete(m),a.delete(m),p(),l.add(m),u=!0):r.push(m)}if(!u)throw new Error(`Scheduler detected unresolved dependencies for context ${String(e)}.`)}this.contexts.delete(e)}flushAll(){for(const e of Array.from(this.contexts.keys()))this.flush(e)}clear(e){this.contexts.delete(e),this.clearListeners.forEach(n=>n(e))}onClear(e){return this.clearListeners.add(e),()=>this.clearListeners.delete(e)}hasPendingJobs(e){const n=this.contexts.get(e);return!!n&&n.jobs.size>0}clearJob(e,n){const r=this.contexts.get(e);r&&(r.jobs.delete(n),r.dependencies.delete(n),r.completed.delete(n),r.queue=r.queue.filter(s=>s!==n),r.jobs.size===0&&this.contexts.delete(e))}}const bf=new l4,_f=[];let Vl=[],c4=0;function u4(t,e){switch(`${t.type}-${e.type}`){case"insert-update":return{...t,type:"insert",original:{},modified:e.modified,changes:{...t.changes,...e.changes},key:t.key,globalKey:t.globalKey,metadata:e.metadata??t.metadata,syncMetadata:{...t.syncMetadata,...e.syncMetadata},mutationId:e.mutationId,updatedAt:e.updatedAt};case"insert-delete":return null;case"update-delete":return e;case"update-update":return{...e,original:t.original,changes:{...t.changes,...e.changes},metadata:e.metadata??t.metadata,syncMetadata:{...t.syncMetadata,...e.syncMetadata}};case"delete-delete":case"insert-insert":return e;default:{const n=`${t.type}-${e.type}`;throw new Error(`Unhandled mutation combination: ${n}`)}}}function Ru(t){const e=new p4(t);return _f.push(e),e}function Ju(){if(Vl.length>0)return Vl.slice(-1)[0]}function f4(t){bf.clear(t.id),Vl.push(t)}function d4(t){try{bf.flush(t.id)}finally{Vl=Vl.filter(e=>e.id!==t.id)}}function h4(t){const e=_f.findIndex(n=>n.id===t.id);e!==-1&&_f.splice(e,1)}class p4{constructor(e){if(typeof e.mutationFn>"u")throw new iN;this.id=e.id??crypto.randomUUID(),this.mutationFn=e.mutationFn,this.state="pending",this.mutations=[],this.isPersisted=a4(),this.autoCommit=e.autoCommit??!0,this.createdAt=new Date,this.sequenceNumber=c4++,this.metadata=e.metadata??{}}setState(e){this.state=e,(e==="completed"||e==="failed")&&h4(this)}mutate(e){if(this.state!=="pending")throw new aN;f4(this);try{e()}finally{d4(this)}return this.autoCommit&&this.commit().catch(()=>{}),this}applyMutations(e){for(const n of e){const r=this.mutations.findIndex(s=>s.globalKey===n.globalKey);if(r>=0){const s=this.mutations[r],a=u4(s,n);a===null?this.mutations.splice(r,1):this.mutations[r]=a}else this.mutations.push(n)}}rollback(e){const n=e?.isSecondaryRollback??!1;if(this.state==="completed")throw new oN;if(this.setState("failed"),!n){const r=new Set;this.mutations.forEach(s=>r.add(s.globalKey));for(const s of _f)s.state==="pending"&&s.mutations.some(a=>r.has(a.globalKey))&&s.rollback({isSecondaryRollback:!0})}return this.isPersisted.reject(this.error?.error),this.touchCollection(),this}touchCollection(){const e=new Set;for(const n of this.mutations)e.has(n.collection.id)||(n.collection._state.onTransactionStateChange(),n.collection._state.pendingSyncedTransactions.length>0&&n.collection._state.commitPendingTransactions(),e.add(n.collection.id))}async commit(){if(this.state!=="pending")throw new lN;if(this.setState("persisting"),this.mutations.length===0)return this.setState("completed"),this.isPersisted.resolve(this),this;try{await this.mutationFn({transaction:this}),this.setState("completed"),this.touchCollection(),this.isPersisted.resolve(this)}catch(e){const n=e instanceof Error?e:new Error(String(e));throw this.error={message:n.message,error:n},this.rollback(),n}return this}compareCreatedAt(e){const n=this.createdAt.getTime()-e.createdAt.getTime();return n!==0?n:this.sequenceNumber-e.sequenceNumber}}class m4{constructor(e,n){this.insert=(r,s)=>{this.lifecycle.validateCollectionUsable("insert");const a=this.state,l=Ju();if(!l&&!this.config.onInsert)throw new nN;const u=Array.isArray(r)?r:[r],f=[],d=new Set;if(u.forEach(m=>{const p=this.validateData(m,"insert"),y=this.config.getKey(p);if(this.state.has(y)||d.has(y))throw new ZO(y);d.add(y);const g=this.generateGlobalKey(y,m),v={mutationId:crypto.randomUUID(),original:{},modified:p,changes:Object.fromEntries(Object.keys(m).map(x=>[x,p[x]])),globalKey:g,key:y,metadata:s?.metadata,syncMetadata:this.config.sync.getSyncMetadata?.()||{},optimistic:s?.optimistic??!0,type:"insert",createdAt:new Date,updatedAt:new Date,collection:this.collection};f.push(v)}),l)return l.applyMutations(f),a.transactions.set(l.id,l),a.scheduleTransactionCleanup(l),a.recomputeOptimisticState(!0),l;{const m=Ru({mutationFn:async p=>await this.config.onInsert({transaction:p.transaction,collection:this.collection})});return m.applyMutations(f),m.commit().catch(()=>{}),a.transactions.set(m.id,m),a.scheduleTransactionCleanup(m),a.recomputeOptimisticState(!0),m}},this.delete=(r,s)=>{const a=this.state;this.lifecycle.validateCollectionUsable("delete");const l=Ju();if(!l&&!this.config.onDelete)throw new sN;if(Array.isArray(r)&&r.length===0)throw new eN;const u=Array.isArray(r)?r:[r],f=[];for(const m of u){if(!this.state.has(m))throw new tN(m);const p=this.generateGlobalKey(m,this.state.get(m)),y={mutationId:crypto.randomUUID(),original:this.state.get(m),modified:this.state.get(m),changes:this.state.get(m),globalKey:p,key:m,metadata:s?.metadata,syncMetadata:a.syncedMetadata.get(m)||{},optimistic:s?.optimistic??!0,type:"delete",createdAt:new Date,updatedAt:new Date,collection:this.collection};f.push(y)}if(l)return l.applyMutations(f),a.transactions.set(l.id,l),a.scheduleTransactionCleanup(l),a.recomputeOptimisticState(!0),l;const d=Ru({autoCommit:!0,mutationFn:async m=>this.config.onDelete({transaction:m.transaction,collection:this.collection})});return d.applyMutations(f),d.commit().catch(()=>{}),a.transactions.set(d.id,d),a.scheduleTransactionCleanup(d),a.recomputeOptimisticState(!0),d},this.id=n,this.config=e}setDeps(e){this.lifecycle=e.lifecycle,this.state=e.state,this.collection=e.collection}ensureStandardSchema(e){if(e&&"~standard"in e)return e;throw new UO}validateData(e,n,r){if(!this.config.schema)return e;const s=this.ensureStandardSchema(this.config.schema);if(n==="update"&&r){const l=this.state.get(r);if(l&&e&&typeof e=="object"&&typeof l=="object"){const u=Object.assign({},l,e),f=s["~standard"].validate(u);if(f instanceof Promise)throw new aw;if("issues"in f&&f.issues){const y=f.issues.map(g=>({message:g.message,path:g.path?.map(v=>String(v))}));throw new iw(n,y)}const d=f.value,m=Object.keys(e);return Object.fromEntries(m.map(y=>[y,d[y]]))}}const a=s["~standard"].validate(e);if(a instanceof Promise)throw new aw;if("issues"in a&&a.issues){const l=a.issues.map(u=>({message:u.message,path:u.path?.map(f=>String(f))}));throw new iw(n,l)}return a.value}generateGlobalKey(e,n){if(typeof e!="string"&&typeof e!="number")throw typeof e>"u"?new GO(n):new KO(e,n);return`KEY::${this.id}/${e}`}update(e,n,r){if(typeof e>"u")throw new JO;const s=this.state;this.lifecycle.validateCollectionUsable("update");const a=Ju();if(!a&&!this.config.onUpdate)throw new rN;const l=Array.isArray(e),u=l?e:[e];if(l&&u.length===0)throw new YO;const f=typeof n=="function"?n:r,d=typeof n=="function"?{}:n,m=u.map(v=>{const x=this.state.get(v);if(!x)throw new XO(v);return x});let p;l?p=i4(m,f):p=[s4(m[0],f)];const y=u.map((v,x)=>{const C=p[x];if(!C||Object.keys(C).length===0)return null;const k=m[x],T=this.validateData(C,"update",v),A=Object.assign({},k,T),M=this.config.getKey(k),I=this.config.getKey(A);if(M!==I)throw new WO(M,I);const O=this.generateGlobalKey(I,A);return{mutationId:crypto.randomUUID(),original:k,modified:A,changes:Object.fromEntries(Object.keys(C).map(B=>[B,A[B]])),globalKey:O,key:v,metadata:d.metadata,syncMetadata:s.syncedMetadata.get(v)||{},optimistic:d.optimistic??!0,type:"update",createdAt:new Date,updatedAt:new Date,collection:this.collection}}).filter(Boolean);if(y.length===0){const v=Ru({mutationFn:async()=>{}});return v.commit().catch(()=>{}),s.scheduleTransactionCleanup(v),v}if(a)return a.applyMutations(y),s.transactions.set(a.id,a),s.scheduleTransactionCleanup(a),s.recomputeOptimisticState(!0),a;const g=Ru({mutationFn:async v=>this.config.onUpdate({transaction:v.transaction,collection:this.collection})});return g.applyMutations(y),g.commit().catch(()=>{}),s.transactions.set(g.id,g),s.scheduleTransactionCleanup(g),s.recomputeOptimisticState(!0),g}}class g4 extends bk{constructor(){super()}setDeps(e){this.collection=e.collection}emit(e,n){this.emitInner(e,n)}emitStatusChange(e,n){this.emit("status:change",{type:"status:change",collection:this.collection,previousStatus:n,status:e});const r=`status:${e}`;this.emit(r,{type:r,collection:this.collection,previousStatus:n,status:e})}emitSubscribersChange(e,n){this.emit("subscribers:change",{type:"subscribers:change",collection:this.collection,previousSubscriberCount:n,subscriberCount:e})}cleanup(){this.clearListeners()}}function vk(t){const e=new Ey(t);return t.utils?e.utils=t.utils:e.utils={},e}class Ey{constructor(e){if(this.utils={},this.insert=(n,r)=>this._mutations.insert(n,r),this.delete=(n,r)=>this._mutations.delete(n,r),!e)throw new BO;if(!e.sync)throw new $O;e.id?this.id=e.id:this.id=crypto.randomUUID(),this.config={...e,autoIndex:e.autoIndex??"eager"},this._changes=new zM,this._events=new g4,this._indexes=new KM,this._lifecycle=new UM(e,this.id),this._mutations=new m4(e,this.id),this._state=new DM(e),this._sync=new qM(e,this.id),this.comparisonOpts=y4(e),this._changes.setDeps({collection:this,lifecycle:this._lifecycle,sync:this._sync,events:this._events}),this._events.setDeps({collection:this}),this._indexes.setDeps({state:this._state,lifecycle:this._lifecycle}),this._lifecycle.setDeps({changes:this._changes,events:this._events,indexes:this._indexes,state:this._state,sync:this._sync}),this._mutations.setDeps({collection:this,lifecycle:this._lifecycle,state:this._state}),this._state.setDeps({collection:this,lifecycle:this._lifecycle,changes:this._changes,indexes:this._indexes,events:this._events}),this._sync.setDeps({collection:this,state:this._state,lifecycle:this._lifecycle,events:this._events}),e.startSync===!0&&this._sync.startSync()}get status(){return this._lifecycle.status}get subscriberCount(){return this._changes.activeSubscribersCount}onFirstReady(e){return this._lifecycle.onFirstReady(e)}isReady(){return this._lifecycle.status==="ready"}get isLoadingSubset(){return this._sync.isLoadingSubset}startSyncImmediate(){this._sync.startSync()}preload(){return this._sync.preload()}get(e){return this._state.get(e)}has(e){return this._state.has(e)}get size(){return this._state.size}*keys(){yield*this._state.keys()}*values(){yield*this._state.values()}*entries(){yield*this._state.entries()}*[Symbol.iterator](){yield*this._state[Symbol.iterator]()}forEach(e){return this._state.forEach(e)}map(e){return this._state.map(e)}getKeyFromItem(e){return this.config.getKey(e)}createIndex(e,n={}){return this._indexes.createIndex(e,n)}get indexes(){return this._indexes.indexes}validateData(e,n,r){return this._mutations.validateData(e,n,r)}get compareOptions(){return{...this.comparisonOpts}}update(e,n,r){return this._mutations.update(e,n,r)}get state(){const e=new Map;for(const[n,r]of this.entries())e.set(n,r);return e}stateWhenReady(){return this.size>0||this.isReady()?Promise.resolve(this.state):this.preload().then(()=>this.state)}get toArray(){return Array.from(this.values())}toArrayWhenReady(){return this.size>0||this.isReady()?Promise.resolve(this.toArray):this.preload().then(()=>this.toArray)}currentStateAsChanges(e={}){return NM(this,e)}subscribeChanges(e,n={}){return this._changes.subscribeChanges(e,n)}on(e,n){return this._events.on(e,n)}once(e,n){return this._events.once(e,n)}off(e,n){this._events.off(e,n)}waitFor(e,n){return this._events.waitFor(e,n)}async cleanup(){return this._lifecycle.cleanup(),Promise.resolve()}}function y4(t){if(t.defaultStringCollation){const e=t.defaultStringCollation;return{stringSort:e.stringSort??"locale",locale:e.stringSort==="locale"?e.locale:void 0,localeOptions:e.stringSort==="locale"?e.localeOptions:void 0}}else return{stringSort:"locale"}}class Ht{constructor(e={}){this.query={},this.query={...e}}_createRefForSource(e,n){let r;try{r=Object.keys(e)}catch{const u=e===null?"null":"undefined";throw new Tu(n,u)}if(Array.isArray(e))throw new Tu(n,"array");if(r.length!==1)throw r.length===0?new Tu(n,"empty object"):r.every(u=>!isNaN(Number(u)))?new Tu(n,"string"):new fN(n);const s=r[0],a=e[s];let l;if(a instanceof Ey)l=new Xa(a,s);else if(a instanceof Ht){const u=a._getQuery();if(!u.from)throw new dN(n);l=new kr(u,s)}else throw new hN(s);return[s,l]}from(e){const[,n]=this._createRefForSource(e,"from clause");return new Ht({...this.query,from:n})}join(e,n,r="left"){const[s,a]=this._createRefForSource(e,"join clause"),u=[...this._getCurrentAliases(),s],f=Oa(u),d=n(f);let m,p;if(d.type==="func"&&d.name==="eq"&&d.args.length===2)m=d.args[0],p=d.args[1];else throw new pN;const y={from:a,type:r,left:m,right:p},g=this.query.join||[];return new Ht({...this.query,join:[...g,y]})}leftJoin(e,n){return this.join(e,n,"left")}rightJoin(e,n){return this.join(e,n,"right")}innerJoin(e,n){return this.join(e,n,"inner")}fullJoin(e,n){return this.join(e,n,"full")}where(e){const n=this._getCurrentAliases(),r=Oa(n),s=e(r),a=this.query.where||[];return new Ht({...this.query,where:[...a,s]})}having(e){const n=this._getCurrentAliases(),r=Oa(n),s=e(r),a=this.query.having||[];return new Ht({...this.query,having:[...a,s]})}select(e){const n=this._getCurrentAliases(),r=Oa(n),s=e(r),a=xk(s);return new Ht({...this.query,select:a,fnSelect:void 0})}orderBy(e,n="asc"){const r=this._getCurrentAliases(),s=Oa(r),a=e(s),l=typeof n=="string"?{direction:n,nulls:"first"}:{direction:n.direction??"asc",nulls:n.nulls??"first",stringSort:n.stringSort,locale:n.stringSort==="locale"?n.locale:void 0,localeOptions:n.stringSort==="locale"?n.localeOptions:void 0},u=m=>({expression:sn(m),compareOptions:l}),f=Array.isArray(a)?a.map(m=>u(m)):[u(a)],d=this.query.orderBy||[];return new Ht({...this.query,orderBy:[...d,...f]})}groupBy(e){const n=this._getCurrentAliases(),r=Oa(n),s=e(r),a=Array.isArray(s)?s.map(u=>sn(u)):[sn(s)],l=this.query.groupBy||[];return new Ht({...this.query,groupBy:[...l,...a]})}limit(e){return new Ht({...this.query,limit:e})}offset(e){return new Ht({...this.query,offset:e})}distinct(){return new Ht({...this.query,distinct:!0})}findOne(){return new Ht({...this.query,singleResult:!0})}_getCurrentAliases(){const e=[];if(this.query.from&&e.push(this.query.from.alias),this.query.join)for(const n of this.query.join)e.push(n.from.alias);return e}get fn(){const e=this;return{select(n){return new Ht({...e.query,select:void 0,fnSelect:n})},where(n){return new Ht({...e.query,fnWhere:[...e.query.fnWhere||[],n]})},having(n){return new Ht({...e.query,fnHaving:[...e.query.fnHaving||[],n]})}}}_getQuery(){if(!this.query.from)throw new mN;return this.query}}function b4(t){return t===void 0?sn(null):t instanceof uk||t instanceof Cr||t instanceof Mn||t instanceof Fn?t:sn(t)}function _4(t){return t!==null&&typeof t=="object"&&!dy(t)&&!t.__refProxy}function xk(t){if(!_4(t))return b4(t);const e={};for(const[n,r]of Object.entries(t)){if(typeof n=="string"&&n.startsWith("__SPREAD_SENTINEL__")){e[n]=r;continue}e[n]=xk(r)}return e}function v4(t){const e=t(new Ht);return wk(e)}function wk(t){return t._getQuery()}function x4(t){const e=w4(t);let n=t,r,s=0;const a=10;for(;s<a&&!Ir(n,r);)r=n,n=og(n),s++;return{optimizedQuery:Sk(n),sourceWhereClauses:e}}function w4(t){const e=new Map;if(!t.where||t.where.length===0)return e;const r=cg(t.where).map(a=>kk(a)),s=Ek(r);for(const[a,l]of s.singleSource)S4(t,a)&&e.set(a,l);return e}function S4(t,e){if(t.from.alias===e)return t.from.type==="collectionRef";if(t.join){for(const n of t.join)if(n.from.alias===e)return n.from.type==="collectionRef"}return!1}function og(t){const e={...t,from:t.from.type==="queryRef"?new kr(og(t.from.query),t.from.alias):t.from,join:t.join?.map(n=>({...n,from:n.from.type==="queryRef"?new kr(og(n.from.query),n.from.alias):n.from}))};return k4(e)}function k4(t){if(!t.where||t.where.length===0)return t;if(!t.join||t.join.length===0){if(t.where.length>1){const u=cg(t.where),f=vf(u);return{...t,where:[f]}}return t}const e=t.where.filter(u=>!sw(u)),r=cg(e).map(u=>kk(u)),s=Ek(r),a=C4(t,s),l=t.where.filter(u=>sw(u));return l.length>0&&(a.where=[...a.where||[],...l]),a}function Sk(t){return{...t,from:lg(t.from),join:t.join?.map(e=>({...e,from:lg(e.from)}))}}function lg(t){if(t.type==="collectionRef")return t;const e=Sk(t.query);if(E4(e)){const n=lg(e.from);return n.type==="collectionRef"?new Xa(n.collection,t.alias):new kr(n.query,t.alias)}return new kr(e,t.alias)}function E4(t){return(!t.where||t.where.length===0)&&!t.select&&(!t.groupBy||t.groupBy.length===0)&&(!t.having||t.having.length===0)&&(!t.orderBy||t.orderBy.length===0)&&(!t.join||t.join.length===0)&&t.limit===void 0&&t.offset===void 0&&!t.fnSelect&&(!t.fnWhere||t.fnWhere.length===0)&&(!t.fnHaving||t.fnHaving.length===0)}function cg(t){const e=[];for(const n of t){const r=hy(n);e.push(...Cy(r))}return e}function Cy(t){if(t.type==="func"&&t.name==="and"){const e=[];for(const n of t.args)e.push(...Cy(n));return e}else return[t]}function kk(t){const e=new Set;let n=!1;function r(s){switch(s.type){case"ref":if(s.path&&s.path.length>0){const a=s.path[0];a&&(e.add(a),s.path.length===1&&(n=!0))}break;case"func":s.args&&s.args.forEach(r);break;case"val":break;case"agg":s.args&&s.args.forEach(r);break}}return r(t),{expression:t,touchedSources:e,hasNamespaceOnlyRef:n}}function Ek(t){const e=new Map,n=[];for(const a of t)if(a.touchedSources.size===1&&!a.hasNamespaceOnlyRef){const l=Array.from(a.touchedSources)[0];e.has(l)||e.set(l,[]),e.get(l).push(a.expression)}else(a.touchedSources.size>1||a.hasNamespaceOnlyRef)&&n.push(a.expression);const r=new Map;for(const[a,l]of e)r.set(a,vf(l));const s=n.length>0?vf(n):void 0;return{singleSource:r,multiSource:s}}function C4(t,e){const n=new Set,r=Nw(t.from,e.singleSource,n),s=t.join?t.join.map(d=>({...d,from:Nw(d.from,e.singleSource,n)})):void 0,a=[];e.multiSource&&a.push(e.multiSource);const l=t.join&&t.join.some(d=>d.type==="left"||d.type==="right"||d.type==="full");for(const[d,m]of e.singleSource)n.has(d)?l&&a.push(zO(m)):a.push(m);const u=a.length>1?[vf(a.flatMap(d=>Cy(hy(d))))]:a;return{select:t.select,groupBy:t.groupBy?[...t.groupBy]:void 0,having:t.having?[...t.having]:void 0,orderBy:t.orderBy?[...t.orderBy]:void 0,limit:t.limit,offset:t.offset,distinct:t.distinct,fnSelect:t.fnSelect,fnWhere:t.fnWhere?[...t.fnWhere]:void 0,fnHaving:t.fnHaving?[...t.fnHaving]:void 0,from:r,join:s,where:u.length>0?u:[]}}function Ua(t){return{from:t.from.type==="collectionRef"?new Xa(t.from.collection,t.from.alias):new kr(Ua(t.from.query),t.from.alias),select:t.select,join:t.join?t.join.map(e=>({type:e.type,left:e.left,right:e.right,from:e.from.type==="collectionRef"?new Xa(e.from.collection,e.from.alias):new kr(Ua(e.from.query),e.from.alias)})):void 0,where:t.where?[...t.where]:void 0,groupBy:t.groupBy?[...t.groupBy]:void 0,having:t.having?[...t.having]:void 0,orderBy:t.orderBy?[...t.orderBy]:void 0,limit:t.limit,offset:t.offset,fnSelect:t.fnSelect,fnWhere:t.fnWhere?[...t.fnWhere]:void 0,fnHaving:t.fnHaving?[...t.fnHaving]:void 0}}function Nw(t,e,n){const r=e.get(t.alias);if(!r)return t.type==="collectionRef"?new Xa(t.collection,t.alias):new kr(Ua(t.query),t.alias);if(t.type==="collectionRef"){const l={from:new Xa(t.collection,t.alias),where:[r]};return n.add(t.alias),new kr(l,t.alias)}if(!I4(t.query,r,t.alias))return new kr(Ua(t.query),t.alias);if(D4(t.query,r,t.alias))return new kr(Ua(t.query),t.alias);const s=t.query.where||[],a={...Ua(t.query),where:[...s,r]};return n.add(t.alias),new kr(a,t.alias)}function T4(t,e,n){return t.select?Ck(t.select)||M4(t.select,e,n):!1}function A4(t){return t.groupBy&&t.groupBy.length>0}function R4(t){return t.having&&t.having.length>0}function O4(t){return t.orderBy&&t.orderBy.length>0&&(t.limit!==void 0||t.offset!==void 0)}function N4(t){return t.fnSelect||t.fnWhere&&t.fnWhere.length>0||t.fnHaving&&t.fnHaving.length>0}function I4(t,e,n){return!(T4(t,e,n)||A4(t)||R4(t)||O4(t)||N4(t))}function Ck(t){for(const e of Object.values(t))if(typeof e=="object"){const n=e;if(n.type==="agg"||!("type"in n)&&Ck(n))return!0}return!1}function Ty(t){const e=[];if(t==null||typeof t!="object")return e;switch(t.type){case"ref":e.push(t);break;case"func":case"agg":for(const n of t.args??[])e.push(...Ty(n));break}return e}function M4(t,e,n){const r=new Set;for(const[a,l]of Object.entries(t))a.startsWith("__SPREAD_SENTINEL__")||l instanceof Mn||r.add(a);const s=Ty(e);for(const a of s){const l=a.path;if(!Array.isArray(l)||l.length<2)continue;const u=l[0],f=l[1];if(u===n&&r.has(f))return!0}return!1}function D4(t,e,n){const r=Ty(e);if(r.every(a=>a.path[0]!==n))return!1;if(t.fnSelect)return!0;const s=t.select;if(!s)return!1;for(const a of r){const l=a.path;if(l.length<2||l[0]!==n)continue;const u=s[l[1]];if(!u)continue;if(!(u instanceof Mn)||u.path.length<2)return!0;const[f,d]=u.path;if(f!==n&&f!==t.from.alias||d!==l[1])return!0}return!1}function vf(t){if(t.length===0)throw new LN;return t.length===1?t[0]:new Cr("and",t)}function j4(t,e,n,r,s,a,l,u,f,d,m,p,y,g,v,x,C,k){let T=t;for(const A of e)T=L4(T,A,n,r,s,a,l,u,f,d,m,p,y,g,v,x,C,k);return T}function L4(t,e,n,r,s,a,l,u,f,d,m,p,y,g,v,x,C,k){const T=e.from.type==="collectionRef",{alias:A,input:M,collectionId:I}=P4(e.from,a,f,d,m,p,y,g,l,u,x,C,k);n[A]=M,T&&(C[A]=I);const O=f[r],B=f[I];if(!O)throw new cw(r);if(!B)throw new cw(I);const{activeSource:U,lazySource:K}=$4(e.type,O,B),j=Object.keys(n),{mainExpr:J,joinedExpr:ne}=z4(e.left,e.right,j,A),he=Vn(J),Y=Vn(ne);let q=t.pipe(Nn(([H,ie])=>[he(ie),[H,ie]])),P=M.pipe(Nn(([H,ie])=>{const re={[A]:ie};return[Y(re),[H,re]]}));if(!["inner","left","right","full"].includes(e.type))throw new kN(e.type);if(U){const H=U==="main"?e.from:v.from,ie=H.type==="queryRef"&&(H.query.limit||H.query.offset),re=J.type==="func"||ne.type==="func";if(!ie&&!re){const N=U==="main"?A:s;p.add(N);const D=U==="main"?q:P,S=Ul(v,U==="main"?ne:J,K),z=S.collection,le=S.path[0];le&&id(le,S.path,z);const de=D.pipe(KI(ye=>{const _e=k[N]||N,ve=d[_e];if(!ve)throw new zN(_e,N,K.id,Object.keys(d));if(ve.hasLoadedInitialState())return;const Pe=ye.getInner().map(([[Yt]])=>Yt),tt=new Mn(S.path);ve.requestSnapshot({where:_M(tt,Pe),optimizedOnly:!0})||ve.requestSnapshot()}));U==="main"?q=de:P=de}}return q.pipe(eM(P,e.type),B4(e.type))}function z4(t,e,n,r){const s=n.filter(u=>u!==r),a=ug(t),l=ug(e);if(a&&s.includes(a)&&l===r)return{mainExpr:t,joinedExpr:e};if(a===r&&l&&s.includes(l))return{mainExpr:e,joinedExpr:t};throw!a||!l?new CN:a===l?new EN(a):s.includes(a)?l!==r?new AN(r):new RN:new TN(a)}function ug(t){switch(t.type){case"ref":return t.path[0]||null;case"func":{const e=new Set;for(const n of t.args){const r=ug(n);r&&e.add(r)}return e.size===1?Array.from(e)[0]:null}default:return null}}function P4(t,e,n,r,s,a,l,u,f,d,m,p,y){switch(t.type){case"collectionRef":{const g=e[t.alias];if(!g)throw new fk(t.alias,t.collection.id,Object.keys(e));return p[t.alias]=t.collection.id,{alias:t.alias,input:g,collectionId:t.collection.id}}case"queryRef":{const g=d.get(t.query)||t.query,v=m(g,e,n,r,s,a,l,u,f,d);Object.assign(p,v.aliasToCollectionId),Object.assign(y,v.aliasRemapping);const x=Object.keys(v.aliasToCollectionId).find(T=>v.aliasToCollectionId[T]===v.collectionId);x&&x!==t.alias&&(y[t.alias]=x);const k=v.pipeline.pipe(Nn(T=>{const[A,[M,I]]=T;return[A,M]}));return{alias:t.alias,input:k,collectionId:v.collectionId}}default:throw new ON(t.type)}}function B4(t){return function(e){return e.pipe(ei(n=>{const[r,[s,a]]=n,l=s?.[1],u=a?.[1];return t==="inner"?!!(l&&u):t==="left"?!!l:t==="right"?!!u:!0}),Nn(n=>{const[r,[s,a]]=n,l=s?.[0],u=s?.[1],f=a?.[0],d=a?.[1],m={};return u&&Object.assign(m,u),d&&Object.assign(m,d),[`[${l},${f}]`,m]}))}}function $4(t,e,n){switch(t){case"left":return{activeSource:"main",lazySource:n};case"right":return{activeSource:"joined",lazySource:e};case"inner":return e.size<n.size?{activeSource:"main",lazySource:n}:{activeSource:"joined",lazySource:e};default:return{activeSource:void 0,lazySource:void 0}}}function fg(t){return t instanceof Fn?t.value:t}function U4(t,e,n){const r=t.source(e);if(r&&typeof r=="object"){let s=n;const a=t.targetPath;if(a.length===0)for(const[l,u]of Object.entries(r))n[l]=fg(u);else for(let l=0;l<a.length;l++){const u=a[l];if(l===a.length-1){const f=s[u]??={};if(typeof f=="object")for(const[d,m]of Object.entries(r))f[d]=fg(m)}else{const f=s[u];(f==null||typeof f!="object")&&(s[u]={}),s=s[u]}}}}function q4(t,e,n){const r=t.alias.split(".");if(r.length===1)n[t.alias]=t.compiled(e);else{let s=n;for(let a=0;a<r.length-1;a++){const l=r[a],u=s[l];(u==null||typeof u!="object")&&(s[l]={}),s=s[l]}s[r[r.length-1]]=fg(t.compiled(e))}}function F4([t,e],n){const r={};for(const s of n)s.kind==="merge"?U4(s,e,r):q4(s,e,r);return[t,{...e,__select_results:r}]}function V4(t,e,n){const r=[];return Tk([],e,r),t.pipe(Nn(s=>F4(s,r)))}function H4(t){return t.type==="agg"}function G4(t){return t&&typeof t=="object"&&!dy(t)}function Tk(t,e,n){for(const[r,s]of Object.entries(e)){if(r.startsWith("__SPREAD_SENTINEL__")){const l=r.slice(19),u=l.lastIndexOf("__"),f=u>=0?l.slice(0,u):l,d=s&&typeof s=="object"&&"type"in s&&s.type==="ref";if(f.includes(".")||d){const m=[...t],p=d?s:new Mn(f.split(".")),y=Vn(p);n.push({kind:"merge",targetPath:m,source:y})}else{const m=f,p=[...t];n.push({kind:"merge",targetPath:p,source:y=>y[m]})}continue}const a=s;if(G4(a)){Tk([...t,r],a,n);continue}if(H4(a))n.push({kind:"field",alias:[...t,r].join("."),compiled:()=>null});else{if(a===void 0||!dy(a)){n.push({kind:"field",alias:[...t,r].join("."),compiled:()=>a});continue}if(a instanceof Fn){const l=a.value;n.push({kind:"field",alias:[...t,r].join("."),compiled:()=>l})}else n.push({kind:"field",alias:[...t,r].join("."),compiled:Vn(a)})}}}function Ay(t,e,n,r,s,a,l,u,f=new WeakMap,d=new WeakMap){const m=f.get(t);if(m)return m;dg(t);const{optimizedQuery:p,sourceWhereClauses:y}=x4(t);d.set(p,t),pg(p,t,d);const g={...e},v={},x={},C={},{alias:k,input:T,collectionId:A}=Z4(p.from,g,n,r,s,a,l,u,f,d,v,x);C[k]=T;let M=T.pipe(Nn(([U,K])=>[U,{[k]:K}]));if(p.join&&p.join.length>0&&(M=j4(M,p.join,C,A,k,g,f,d,n,r,s,a,l,u,t,Ay,v,x)),p.where&&p.where.length>0)for(const U of p.where){const K=hy(U),j=Vn(K);M=M.pipe(ei(([J,ne])=>Ga(j(ne))))}if(p.fnWhere&&p.fnWhere.length>0)for(const U of p.fnWhere)M=M.pipe(ei(([K,j])=>Ga(U(j))));if(p.distinct&&!p.fnSelect&&!p.select)throw new gN;if(p.fnSelect?M=M.pipe(Nn(([U,K])=>{const j=p.fnSelect(K);return[U,{...K,__select_results:j}]})):p.select?M=V4(M,p.select):M=M.pipe(Nn(([U,K])=>{const j=!p.join&&!p.groupBy?K[k]:K;return[U,{...K,__select_results:j}]})),p.groupBy&&p.groupBy.length>0?M=Ew(M,p.groupBy,p.having,p.select,p.fnHaving):p.select&&Object.values(p.select).some(K=>K.type==="agg")&&(M=Ew(M,[],p.having,p.select,p.fnHaving)),p.having&&(!p.groupBy||p.groupBy.length===0)&&!(p.select?Object.values(p.select).some(K=>K.type==="agg"):!1))throw new yN;if(p.fnHaving&&p.fnHaving.length>0&&(!p.groupBy||p.groupBy.length===0))for(const U of p.fnHaving)M=M.pipe(ei(([K,j])=>U(j)));if(p.distinct&&(M=M.pipe(nM(([U,K])=>K.__select_results))),p.orderBy&&p.orderBy.length>0){const j=OM(t,M,p.orderBy,p.select||{},n[A],l,u,p.limit,p.offset).pipe(Nn(([ne,[he,Y]])=>{const q=he.__select_results,P=hg(q);return[ne,[P,Y]]})),J={collectionId:A,pipeline:j,sourceWhereClauses:y,aliasToCollectionId:v,aliasRemapping:x};return f.set(t,J),J}else if(p.limit!==void 0||p.offset!==void 0)throw new bN;const O=M.pipe(Nn(([U,K])=>{const j=K.__select_results,J=hg(j);return[U,[J,void 0]]})),B={collectionId:A,pipeline:O,sourceWhereClauses:y,aliasToCollectionId:v,aliasRemapping:x};return f.set(t,B),B}function K4(t){const e=new Set;if(t.from.type==="collectionRef"&&e.add(t.from.alias),t.join)for(const n of t.join)n.from.type==="collectionRef"&&e.add(n.from.alias);return e}function dg(t,e=new Set){const n=K4(t);for(const s of n)if(e.has(s))throw new _N(s,Array.from(e));const r=new Set([...e,...n]);if(t.from.type==="queryRef"&&dg(t.from.query,r),t.join)for(const s of t.join)s.from.type==="queryRef"&&dg(s.from.query,r)}function Z4(t,e,n,r,s,a,l,u,f,d,m,p){switch(t.type){case"collectionRef":{const y=e[t.alias];if(!y)throw new fk(t.alias,t.collection.id,Object.keys(e));return m[t.alias]=t.collection.id,{alias:t.alias,input:y,collectionId:t.collection.id}}case"queryRef":{const y=d.get(t.query)||t.query,g=Ay(y,e,n,r,s,a,l,u,f,d);Object.assign(m,g.aliasToCollectionId),Object.assign(p,g.aliasRemapping);const v=Object.keys(g.aliasToCollectionId).find(k=>g.aliasToCollectionId[k]===g.collectionId);v&&v!==t.alias&&(p[t.alias]=v);const C=g.pipeline.pipe(Nn(k=>{const[T,[A,M]]=k,I=hg(A);return[T,I]}));return{alias:t.alias,input:C,collectionId:g.collectionId}}default:throw new vN(t.type)}}function Q4(t){return t instanceof Fn||t&&typeof t=="object"&&"type"in t&&t.type==="val"}function hg(t){return Q4(t)?t.value:t}function pg(t,e,n){if(t.from.type==="queryRef"&&e.from.type==="queryRef"&&(n.set(t.from.query,e.from.query),pg(t.from.query,e.from.query,n)),t.join&&e.join)for(let r=0;r<t.join.length&&r<e.join.length;r++){const s=t.join[r],a=e.join[r];s.from.type==="queryRef"&&a.from.type==="queryRef"&&(n.set(s.from.query,a.from.query),pg(s.from.query,a.from.query,n))}}function Ry(t,e){const n=t.type;if(n==="val")return new Fn(t.value);if(n==="ref"){const r=t.path;if(Array.isArray(r)){if(r[0]===e&&r.length>1)return new Mn(r.slice(1));if(r.length===1&&r[0]!==void 0)return new Mn([r[0]])}return new Mn(Array.isArray(r)?r:[String(r)])}else{const r=[];for(const s of t.args){const a=Ry(s,e);r.push(a)}return new Cr(t.name,r)}}function Iw(t,e){return t.map(r=>{const s=Ry(r.expression,e);return{...r,expression:s}})}const Mw=Symbol.for("@tanstack/db.collection-config-builder");class J4{constructor(e,n,r,s){this.alias=e,this.collectionId=n,this.collection=r,this.collectionConfigBuilder=s,this.biggest=void 0,this.subscriptionLoadingPromises=new Map,this.sentToD2Keys=new Set}subscribe(){const e=this.getWhereClauseForAlias();if(e){const n=Ry(e,this.alias);return this.subscribeToChanges(n)}return this.subscribeToChanges()}subscribeToChanges(e){let n;const r=this.getOrderByInfo();if(r)n=this.subscribeToOrderedChanges(e,r);else{const u=!this.collectionConfigBuilder.isLazyAlias(this.alias);n=this.subscribeToMatchingChanges(e,u)}const s=()=>{if(!this.subscriptionLoadingPromises.has(n)){let u;const f=new Promise(d=>{u=d});this.subscriptionLoadingPromises.set(n,{resolve:u}),this.collectionConfigBuilder.liveQueryCollection._sync.trackLoadPromise(f)}};n.status==="loadingSubset"&&s();const a=n.on("status:change",u=>{if(u.status==="loadingSubset")s();else{const f=this.subscriptionLoadingPromises.get(n);f&&(this.subscriptionLoadingPromises.delete(n),f.resolve())}}),l=()=>{const u=this.subscriptionLoadingPromises.get(n);u&&(this.subscriptionLoadingPromises.delete(n),u.resolve()),a(),n.unsubscribe()};return this.collectionConfigBuilder.currentSyncState.unsubscribeCallbacks.add(l),n}sendChangesToPipeline(e,n){const r=Array.isArray(e)?e:[...e],s=[];for(const f of r){if(f.type==="insert"){if(this.sentToD2Keys.has(f.key))continue;this.sentToD2Keys.add(f.key)}else f.type==="delete"&&this.sentToD2Keys.delete(f.key);s.push(f)}const a=this.collectionConfigBuilder.currentSyncState.inputs[this.alias],u=Y4(a,s,this.collection.config.getKey)>0?n:void 0;this.collectionConfigBuilder.scheduleGraphRun(u,{alias:this.alias})}subscribeToMatchingChanges(e,n=!1){const r=a=>{this.sendChangesToPipeline(a)};return this.collection.subscribeChanges(r,{...n&&{includeInitialState:n},whereExpression:e})}subscribeToOrderedChanges(e,n){const{orderBy:r,offset:s,limit:a,index:l}=n,u=p=>{const y=X4(p);this.sendChangesToPipelineWithTracking(y,f)},f=this.collection.subscribeChanges(u,{whereExpression:e}),d=this.collection.on("truncate",()=>{this.biggest=void 0,this.sentToD2Keys.clear()});f.on("unsubscribed",()=>{d()});const m=Iw(r,this.alias);return l?(f.setOrderByIndex(l),f.requestLimitedSnapshot({limit:s+a,orderBy:m})):f.requestSnapshot({orderBy:m,limit:s+a}),f}loadMoreIfNeeded(e){const n=this.getOrderByInfo();if(!n)return!0;const{dataNeeded:r}=n;if(!r)return!0;const s=r();return s>0&&this.loadNextItems(s,e),!0}sendChangesToPipelineWithTracking(e,n){const r=this.getOrderByInfo();if(!r){this.sendChangesToPipeline(e);return}const s=this.trackSentValues(e,r.comparator),a=n;a[Mw]??=this.loadMoreIfNeeded.bind(this,n),this.sendChangesToPipeline(s,a[Mw])}loadNextItems(e,n){const r=this.getOrderByInfo();if(!r)return;const{orderBy:s,valueExtractorForRawRow:a,offset:l}=r,u=this.biggest,f=u?a(u):void 0,d=f!==void 0?Array.isArray(f)?f:[f]:void 0,m=Iw(s,this.alias);n.requestLimitedSnapshot({orderBy:m,limit:e,minValues:d,offset:l})}getWhereClauseForAlias(){const e=this.collectionConfigBuilder.sourceWhereClausesCache;if(e)return e.get(this.alias)}getOrderByInfo(){const e=this.collectionConfigBuilder.optimizableOrderByCollections[this.collectionId];if(e&&e.alias===this.alias)return e}*trackSentValues(e,n){for(const r of e)r.type!=="delete"&&(this.biggest?n(this.biggest,r.value)<0&&(this.biggest=r.value):this.biggest=r.value),yield r}}function Y4(t,e,n){const r=[];for(const s of e){const a=n(s.value);s.type==="insert"?r.push([[a,s.value],1]):s.type==="update"?(r.push([[a,s.previousValue],-1]),r.push([[a,s.value],1])):r.push([[a,s.value],-1])}return r.length!==0&&t.sendData(new Gt(r)),r.length}function*X4(t){for(const e of t)e.type==="update"?(yield{type:"delete",key:e.key,value:e.previousValue},yield{type:"insert",key:e.key,value:e.value}):yield e}const Ak=new WeakMap;function W4(t){return t.utils?.[wy]?.getBuilder?.()}function e3(t,e){Ak.set(t,e)}function t3(t){return Ak.get(t)}let n3=0;class r3{constructor(e){this.config=e,this.compiledAliasToCollectionId={},this.resultKeys=new WeakMap,this.orderByIndices=new WeakMap,this.isGraphRunning=!1,this.runCount=0,this.isInErrorState=!1,this.aliasDependencies={},this.builderDependencies=new Set,this.pendingGraphRuns=new Map,this.subscriptions={},this.lazySourcesCallbacks={},this.lazySources=new Set,this.optimizableOrderByCollections={},this.id=e.id||`live-query-${++n3}`,this.query=s3(e),this.collections=a3(this.query);const n=o3(this.query);this.collectionByAlias={};for(const[r,s]of n.entries()){const a=this.collections[r];if(a)for(const l of s)this.collectionByAlias[l]=a}this.query.orderBy&&this.query.orderBy.length>0&&(this.compare=i3(this.orderByIndices)),this.compareOptions=this.config.defaultStringCollation??Rk(this.query).compareOptions,this.compileBasePipeline()}hasJoins(e){return!!(e.join&&e.join.length>0||e.from.type==="queryRef"&&this.hasJoins(e.from.query))}getConfig(){return{id:this.id,getKey:this.config.getKey||(e=>this.resultKeys.get(e)),sync:this.getSyncConfig(),compare:this.compare,defaultStringCollation:this.compareOptions,gcTime:this.config.gcTime||5e3,schema:this.config.schema,onInsert:this.config.onInsert,onUpdate:this.config.onUpdate,onDelete:this.config.onDelete,startSync:this.config.startSync,singleResult:this.query.singleResult,utils:{getRunCount:this.getRunCount.bind(this),setWindow:this.setWindow.bind(this),getWindow:this.getWindow.bind(this),[wy]:{getBuilder:()=>this,hasCustomGetKey:!!this.config.getKey,hasJoins:this.hasJoins(this.query)}}}}setWindow(e){if(!this.windowFn)throw new BN;return this.currentWindow=e,this.windowFn(e),this.maybeRunGraphFn?.(),this.liveQueryCollection?.isLoadingSubset?new Promise(n=>{const r=this.liveQueryCollection.on("loadingSubset:change",s=>{s.isLoadingSubset||(r(),n())})}):!0}getWindow(){if(!(!this.windowFn||!this.currentWindow))return{offset:this.currentWindow.offset??0,limit:this.currentWindow.limit??0}}getCollectionIdForAlias(e){const n=this.compiledAliasToCollectionId[e];if(n)return n;const r=this.collectionByAlias[e];if(r)return r.id;throw new Error(`Unknown source alias "${e}"`)}isLazyAlias(e){return this.lazySources.has(e)}maybeRunGraph(e){if(!this.isGraphRunning){if(!this.currentSyncConfig||!this.currentSyncState)throw new Error("maybeRunGraph called without active sync session. This should not happen.");this.isGraphRunning=!0;try{const{begin:n,commit:r}=this.currentSyncConfig,s=this.currentSyncState;if(this.isInErrorState)return;if(s.subscribedToAllCollections){for(;s.graph.pendingWork();)s.graph.run(),e?.();s.messagesCount===0&&(n(),r(),this.updateLiveQueryStatus(this.currentSyncConfig))}}finally{this.isGraphRunning=!1}}}scheduleGraphRun(e,n){const r=n?.contextId??Ju()?.id,s=n?.jobId??this,a=(()=>{if(n?.dependencies)return n.dependencies;const f=new Set(this.builderDependencies);if(n?.alias){const d=this.aliasDependencies[n.alias];if(d)for(const m of d)f.add(m)}return f.delete(this),Array.from(f)})();if(r)for(const f of a)typeof f.scheduleGraphRun=="function"&&f.scheduleGraphRun(void 0,{contextId:r});if(!this.currentSyncConfig||!this.currentSyncState)throw new Error("scheduleGraphRun called without active sync session. This should not happen.");let l=r?this.pendingGraphRuns.get(r):void 0;l||(l={loadCallbacks:new Set},r&&this.pendingGraphRuns.set(r,l)),e&&l.loadCallbacks.add(e);const u=r?void 0:l;bf.schedule({contextId:r,jobId:s,dependencies:a,run:()=>this.executeGraphRun(r,u)})}clearPendingGraphRun(e){this.pendingGraphRuns.delete(e)}hasPendingGraphRun(e){return this.pendingGraphRuns.has(e)}executeGraphRun(e,n){const r=n??(e?this.pendingGraphRuns.get(e):void 0);if(e&&this.pendingGraphRuns.delete(e),!r||!this.currentSyncConfig||!this.currentSyncState)return;this.incrementRunCount();const s=()=>{let a=!0,l;if(r.loadCallbacks.forEach(u=>{try{a=u()&&a}catch(f){a=!1,l??=f}}),l)throw l;return a};this.maybeRunGraph(s)}getSyncConfig(){return{rowUpdateMode:"full",sync:this.syncFn.bind(this)}}incrementRunCount(){this.runCount++}getRunCount(){return this.runCount}syncFn(e){this.liveQueryCollection=e.collection,this.currentSyncConfig=e;const n={messagesCount:0,subscribedToAllCollections:!1,unsubscribeCallbacks:new Set},r=this.extendPipelineWithChangeProcessing(e,n);this.currentSyncState=r,this.unsubscribeFromSchedulerClears=bf.onClear(a=>{this.clearPendingGraphRun(a)});const s=this.subscribeToAllCollections(e,r);return this.maybeRunGraphFn=()=>this.scheduleGraphRun(s),this.scheduleGraphRun(s),()=>{n.unsubscribeCallbacks.forEach(a=>a()),this.currentSyncConfig=void 0,this.currentSyncState=void 0,this.pendingGraphRuns.clear(),this.graphCache=void 0,this.inputsCache=void 0,this.pipelineCache=void 0,this.sourceWhereClausesCache=void 0,this.lazySources.clear(),this.optimizableOrderByCollections={},this.lazySourcesCallbacks={},Object.keys(this.subscriptions).forEach(a=>delete this.subscriptions[a]),this.compiledAliasToCollectionId={},this.unsubscribeFromSchedulerClears?.(),this.unsubscribeFromSchedulerClears=void 0}}compileBasePipeline(){this.graphCache=new jI,this.inputsCache=Object.fromEntries(Object.keys(this.collectionByAlias).map(r=>[r,this.graphCache.newInput()]));const e=Ay(this.query,this.inputsCache,this.collections,this.subscriptions,this.lazySourcesCallbacks,this.lazySources,this.optimizableOrderByCollections,r=>{this.windowFn=r});this.pipelineCache=e.pipeline,this.sourceWhereClausesCache=e.sourceWhereClauses,this.compiledAliasToCollectionId=e.aliasToCollectionId;const n=Object.keys(this.compiledAliasToCollectionId).filter(r=>!Object.hasOwn(this.inputsCache,r));if(n.length>0)throw new PN(n)}maybeCompileBasePipeline(){return(!this.graphCache||!this.inputsCache||!this.pipelineCache)&&this.compileBasePipeline(),{graph:this.graphCache,inputs:this.inputsCache,pipeline:this.pipelineCache}}extendPipelineWithChangeProcessing(e,n){const{begin:r,commit:s}=e,{graph:a,inputs:l,pipeline:u}=this.maybeCompileBasePipeline();return u.pipe(JI(f=>{const d=f.getInner();n.messagesCount+=d.length,r(),d.reduce(l3,new Map).forEach(this.applyChanges.bind(this,e)),s()})),a.finalize(),n.graph=a,n.inputs=l,n.pipeline=u,n}applyChanges(e,n,r){const{write:s,collection:a}=e,{deletes:l,inserts:u,value:f,orderByIndex:d}=n;if(this.resultKeys.set(f,r),d!==void 0&&this.orderByIndices.set(f,d),u&&l===0)s({value:f,type:"insert"});else if(u>l||u===l&&a.has(a.getKeyFromItem(f)))s({value:f,type:"update"});else if(l>0)s({value:f,type:"delete"});else throw new Error(`Could not apply changes: ${JSON.stringify(n)}. This should never happen.`)}handleSourceStatusChange(e,n,r){const{status:s}=r;if(s==="error"){this.transitionToError(`Source collection '${n}' entered error state`);return}if(s==="cleaned-up"){this.transitionToError(`Source collection '${n}' was manually cleaned up while live query '${this.id}' depends on it. Live queries prevent automatic GC, so this was likely a manual cleanup() call.`);return}this.updateLiveQueryStatus(e)}updateLiveQueryStatus(e){const{markReady:n}=e;this.isInErrorState||this.allCollectionsReady()&&n()}transitionToError(e){this.isInErrorState=!0,console.error(`[Live Query Error] ${e}`),this.liveQueryCollection?._lifecycle.setStatus("error")}allCollectionsReady(){return Object.values(this.collections).every(e=>e.isReady())}subscribeToAllCollections(e,n){const r=Object.entries(this.compiledAliasToCollectionId);if(r.length===0)throw new Error(`Compiler returned no alias metadata for query '${this.id}'. This should not happen; please report.`);const s=r.map(([l,u])=>{const f=this.collectionByAlias[l]??this.collections[u],d=t3(f);d&&d!==this?(this.aliasDependencies[l]=[d],this.builderDependencies.add(d)):this.aliasDependencies[l]=[];const m=new J4(l,u,f,this),p=f.on("status:change",v=>{this.handleSourceStatusChange(e,u,v)});n.unsubscribeCallbacks.add(p);const y=m.subscribe();return this.subscriptions[l]=y,m.loadMoreIfNeeded.bind(m,y)}),a=()=>(s.map(l=>l()),!0);return n.subscribedToAllCollections=!0,this.updateLiveQueryStatus(e),a}}function s3(t){return typeof t.query=="function"?v4(t.query):wk(t.query)}function i3(t){return(e,n)=>{const r=t.get(e),s=t.get(n);return r&&s?r<s?-1:r>s?1:0:0}}function a3(t){const e={};function n(s){s.type==="collectionRef"?e[s.collection.id]=s.collection:s.type==="queryRef"&&r(s.query)}function r(s){if(s.from&&n(s.from),s.join&&Array.isArray(s.join))for(const a of s.join)a.from&&n(a.from)}return r(t),e}function Rk(t){const e=t.from;if(e.type==="collectionRef")return e.collection;if(e.type==="queryRef")return Rk(e.query);throw new Error(`Failed to extract collection. Invalid FROM clause: ${JSON.stringify(t)}`)}function o3(t){const e=new Map;function n(s){if(s)if(s.type==="collectionRef"){const{id:a}=s.collection,l=e.get(a);l?l.add(s.alias):e.set(a,new Set([s.alias]))}else s.type==="queryRef"&&r(s.query)}function r(s){if(s&&(n(s.from),s.join))for(const a of s.join)n(a.from)}return r(t),e}function l3(t,[[e,n],r]){const[s,a]=n,l=t.get(e)||{deletes:0,inserts:0,value:s,orderByIndex:a};return r<0?l.deletes+=Math.abs(r):r>0&&(l.inserts+=r,l.value=s,l.orderByIndex=a),t.set(e,l),t}function Dw(t){return new r3(t).getConfig()}function im(t){if(typeof t=="function"){const n=Dw({query:t});return jw(n)}else{const e=t,n=Dw(e);return e.utils&&(n.utils={...n.utils,...e.utils}),jw(n)}}function jw(t){const e=vk(t),n=W4(t);return n&&e3(e,n),e}const am=1;function c3(t,e=[]){const n=t&&typeof t=="object"&&typeof t.subscribeChanges=="function"&&typeof t.startSyncImmediate=="function"&&typeof t.id=="string",r=G.useRef(null),s=G.useRef(null),a=G.useRef(null),l=G.useRef(0),u=G.useRef(null),f=!r.current||n&&a.current!==t||!n&&(s.current===null||s.current.length!==e.length||s.current.some((v,x)=>v!==e[x]));if(f)if(n)t.startSyncImmediate(),r.current=t,a.current=t;else if(typeof t=="function"){const v=new Ht,x=t(v);if(x==null)r.current=null;else if(x instanceof Ey)x.startSyncImmediate(),r.current=x;else if(x instanceof Ht)r.current=im({query:t,startSync:!0,gcTime:am});else if(x&&typeof x=="object")r.current=im({startSync:!0,gcTime:am,...x});else throw new Error(`useLiveQuery callback must return a QueryBuilder, LiveQueryCollectionConfig, Collection, undefined, or null. Got: ${typeof x}`);s.current=[...e]}else r.current=im({startSync:!0,gcTime:am,...t}),s.current=[...e];f&&(l.current=0,u.current=null);const d=G.useRef(null);(!d.current||f)&&(d.current=v=>{if(!r.current)return()=>{};const x=r.current.subscribeChanges(()=>{l.current+=1,v()});return r.current.status==="ready"&&(l.current+=1,v()),()=>{x.unsubscribe()}});const m=G.useRef(null);(!m.current||f)&&(m.current=()=>{const v=l.current,x=r.current;return(!u.current||u.current.version!==v||u.current.collection!==x)&&(u.current={collection:x,version:v}),u.current});const p=G.useSyncExternalStore(d.current,m.current),y=G.useRef(null),g=G.useRef(null);if(!y.current||y.current.version!==p.version||y.current.collection!==p.collection){if(!p.collection)g.current={state:void 0,data:void 0,collection:void 0,status:"disabled",isLoading:!1,isReady:!0,isIdle:!1,isError:!1,isCleanedUp:!1,isEnabled:!1};else{const v=Array.from(p.collection.entries()),C=p.collection.config.singleResult;let k=null,T=null;g.current={get state(){return k||(k=new Map(v)),k},get data(){return T||(T=v.map(([,A])=>A)),C?T[0]:T},collection:p.collection,status:p.collection.status,isLoading:p.collection.status==="loading",isReady:p.collection.status==="ready",isIdle:p.collection.status==="idle",isError:p.collection.status==="error",isCleanedUp:p.collection.status==="cleaned-up",isEnabled:!0}}y.current=p}return g.current}class si extends or{constructor(e){super(e),this.name="QueryCollectionError"}}class u3 extends si{constructor(){super("[QueryCollection] queryKey must be provided."),this.name="QueryKeyRequiredError"}}class f3 extends si{constructor(){super("[QueryCollection] queryFn must be provided."),this.name="QueryFnRequiredError"}}class d3 extends si{constructor(){super("[QueryCollection] queryClient must be provided."),this.name="QueryClientRequiredError"}}class h3 extends si{constructor(){super("[QueryCollection] getKey must be provided."),this.name="GetKeyRequiredError"}}class p3 extends si{constructor(){super("Collection must be in 'ready' state for manual sync operations. Sync not initialized yet."),this.name="SyncNotInitializedError"}}class m3 extends si{constructor(e){super(`Duplicate key '${e}' found within batch operations`),this.name="DuplicateKeyInBatchError"}}class g3 extends si{constructor(e){super(`Update operation: Item with key '${e}' does not exist`),this.name="UpdateOperationItemNotFoundError"}}class y3 extends si{constructor(e){super(`Delete operation: Item with key '${e}' does not exist`),this.name="DeleteOperationItemNotFoundError"}}const Ti=new WeakMap;function b3(t,e){const n=Array.isArray(t)?t:[t],r=[];for(const s of n)if(s.type==="delete"){const a=Array.isArray(s.key)?s.key:[s.key];for(const l of a)r.push({type:"delete",key:l})}else{const a=Array.isArray(s.data)?s.data:[s.data];for(const l of a){let u;if(s.type==="update")u=e.getKey(l);else{const f=e.collection.validateData(l,s.type==="upsert"?"insert":s.type);u=e.getKey(f)}r.push({type:s.type,key:u,data:l})}}return r}function _3(t,e){const n=new Set;for(const r of t){if(n.has(r.key))throw new m3(r.key);if(n.add(r.key),r.type==="update"){if(!e.collection._state.syncedData.has(r.key))throw new g3(r.key)}else if(r.type==="delete"&&!e.collection._state.syncedData.has(r.key))throw new y3(r.key)}}function il(t,e){const n=b3(t,e);_3(n,e),e.begin();for(const s of n)switch(s.type){case"insert":{const a=e.collection.validateData(s.data,"insert");e.write({type:"insert",value:a});break}case"update":{const l={...e.collection._state.syncedData.get(s.key),...s.data},u=e.collection.validateData(l,"update",s.key);e.write({type:"update",value:u});break}case"delete":{const a=e.collection._state.syncedData.get(s.key);e.write({type:"delete",value:a});break}case"upsert":{const a=e.collection._state.syncedData.has(s.key),l=e.collection.validateData(s.data,a?"update":"insert",s.key);a?e.write({type:"update",value:l}):e.write({type:"insert",value:l});break}}e.commit();const r=Array.from(e.collection._state.syncedData.values());e.updateCacheData?e.updateCacheData(r):e.queryClient.setQueryData(e.queryKey,r)}function v3(t){function e(){const n=t();if(!n)throw new p3;return n}return{writeInsert(n){const r={type:"insert",data:n},s=e(),a=Ti.get(s);if(a?.isActive){a.operations.push(r);return}il(r,s)},writeUpdate(n){const r={type:"update",data:n},s=e(),a=Ti.get(s);if(a?.isActive){a.operations.push(r);return}il(r,s)},writeDelete(n){const r={type:"delete",key:n},s=e(),a=Ti.get(s);if(a?.isActive){a.operations.push(r);return}il(r,s)},writeUpsert(n){const r={type:"upsert",data:n},s=e(),a=Ti.get(s);if(a?.isActive){a.operations.push(r);return}il(r,s)},writeBatch(n){const r=e();if(Ti.get(r)?.isActive)throw new Error("Cannot nest writeBatch calls. Complete the current batch before starting a new one.");const a={operations:[],isActive:!0};Ti.set(r,a);try{const l=n();if(l&&typeof l=="object"&&"then"in l&&typeof l.then=="function")throw new Error("writeBatch does not support async callbacks. The callback must be synchronous.");a.operations.length>0&&il(a.operations,r)}finally{a.isActive=!1,Ti.delete(r)}}}}function x3(t){if(!t)return;const e={};return t.where&&(e.where=mg(t.where)),t.orderBy?.length&&(e.orderBy=t.orderBy.map(n=>{const r={expression:mg(n.expression),direction:n.compareOptions.direction,nulls:n.compareOptions.nulls,stringSort:n.compareOptions.stringSort};return n.compareOptions.stringSort==="locale"?{...r,locale:n.compareOptions.locale,localeOptions:n.compareOptions.localeOptions}:r})),t.limit!==void 0&&(e.limit=t.limit),t.offset!==void 0&&(e.offset=t.offset),Object.keys(e).length===0?void 0:JSON.stringify(e)}function mg(t){if(!t)return null;switch(t.type){case"val":return{type:"val",value:gg(t.value)};case"ref":return{type:"ref",path:[...t.path]};case"func":return{type:"func",name:t.name,args:t.args.map(e=>mg(e))};default:return null}}function gg(t){if(t===void 0)return{__type:"undefined"};if(typeof t=="number"){if(Number.isNaN(t))return{__type:"nan"};if(t===Number.POSITIVE_INFINITY)return{__type:"infinity",sign:1};if(t===Number.NEGATIVE_INFINITY)return{__type:"infinity",sign:-1}}return t===null||typeof t=="string"||typeof t=="number"||typeof t=="boolean"?t:t instanceof Date?{__type:"date",value:t.toJSON()}:Array.isArray(t)?t.map(e=>gg(e)):typeof t=="object"?Object.fromEntries(Object.entries(t).map(([e,n])=>[e,gg(n)])):t}class w3{constructor(e,n,r){this.state=e,this.refetchFn=n,this.refetch=n,this.writeInsert=r.writeInsert,this.writeUpdate=r.writeUpdate,this.writeDelete=r.writeDelete,this.writeUpsert=r.writeUpsert,this.writeBatch=r.writeBatch}async clearError(){this.state.lastError=void 0,this.state.errorCount=0,this.state.lastErrorUpdatedAt=0,await this.refetchFn({throwOnError:!0})}get lastError(){return this.state.lastError}get isError(){return!!this.state.lastError}get errorCount(){return this.state.errorCount}get isFetching(){return Array.from(this.state.observers.values()).some(e=>e.getCurrentResult().isFetching)}get isRefetching(){return Array.from(this.state.observers.values()).some(e=>e.getCurrentResult().isRefetching)}get isLoading(){return Array.from(this.state.observers.values()).some(e=>e.getCurrentResult().isLoading)}get dataUpdatedAt(){return Math.max(0,...Array.from(this.state.observers.values()).map(e=>e.getCurrentResult().dataUpdatedAt))}get fetchStatus(){return Array.from(this.state.observers.values()).map(e=>e.getCurrentResult().fetchStatus)}}function S3(t){const{queryKey:e,queryFn:n,select:r,queryClient:s,enabled:a,refetchInterval:l,retry:u,retryDelay:f,staleTime:d,getKey:m,onInsert:p,onUpdate:y,onDelete:g,meta:v,...x}=t,C=x.syncMode??"eager";if(!e)throw new u3;if(!n)throw new f3;if(!s)throw new d3;if(!m)throw new h3;const k={lastError:void 0,errorCount:0,lastErrorUpdatedAt:0,observers:new Map},T=new Map,A=new Map,M=new Map,I=new Map,O=new Map,B=(re,N)=>{const D=M.get(re)||new Set;D.add(N),M.set(re,D);const V=A.get(N)||new Set;V.add(re),A.set(N,V)},U=(re,N)=>{const D=M.get(re)||new Set;D.delete(N),M.set(re,D);const V=A.get(N)||new Set;return V.delete(re),A.set(N,V),D.size===0},K=re=>{const{begin:N,write:D,commit:V,markReady:S,collection:z}=re;let le=!1;const de=Se=>{if(typeof e=="function")return e(Se);if(C==="on-demand"){const Ve=x3(Se);return Ve!==void 0?[...e,Ve]:e}else return e},ye=(Se={},Ve=n)=>{const Ke=de(Se),Ce=ws(Ke),_t={...v,loadSubsetOptions:Se};if(k.observers.has(Ce)){O.set(Ce,(O.get(Ce)||0)+1);const be=k.observers.get(Ce),ke=be.getCurrentResult();return ke.isSuccess?!0:ke.isError?Promise.reject(ke.error):new Promise((He,Et)=>{const rt=be.subscribe(Ne=>{Ne.isSuccess?(rt(),He()):Ne.isError&&(rt(),Et(Ne.error))})})}const Z={queryKey:Ke,queryFn:Ve,meta:_t,structuralSharing:!0,notifyOnChangeProps:"all",...a!==void 0&&{enabled:a},...l!==void 0&&{refetchInterval:l},...u!==void 0&&{retry:u},...f!==void 0&&{retryDelay:f},...d!==void 0&&{staleTime:d}},ce=new kO(s,Z);T.set(Ce,Ke),k.observers.set(Ce,ce),O.set(Ce,(O.get(Ce)||0)+1);const pe=new Promise((be,ke)=>{const He=ce.subscribe(Et=>{Et.isSuccess?(He(),be()):Et.isError&&(He(),ke(Et.error))})});return(le||z.subscriberCount>0)&&Pe(ce,Ce),pe},_e=Se=>{const Ve=ws(Se);return Ce=>{if(Ce.isSuccess){k.lastError=void 0,k.errorCount=0;const _t=Ce.data,Z=r?r(_t):_t;if(!Array.isArray(Z)||Z.some(be=>typeof be!="object")){const be=r?`@tanstack/query-db-collection: select() must return an array of objects. Got: ${typeof Z} for queryKey ${JSON.stringify(Se)}`:`@tanstack/query-db-collection: queryFn must return an array of objects. Got: ${typeof Z} for queryKey ${JSON.stringify(Se)}`;console.error(be);return}const ce=new Map(z._state.syncedData.entries()),pe=new Map;Z.forEach(be=>{const ke=m(be);pe.set(ke,be)}),N(),ce.forEach((be,ke)=>{const He=pe.get(ke);He?Ir(be,He)||D({type:"update",value:He}):U(ke,Ve)&&D({type:"delete",value:be})}),pe.forEach((be,ke)=>{B(ke,Ve),ce.has(ke)||D({type:"insert",value:be})}),V(),S()}else Ce.isError&&(Ce.errorUpdatedAt!==k.lastErrorUpdatedAt&&(k.lastError=Ce.error,k.errorCount++,k.lastErrorUpdatedAt=Ce.errorUpdatedAt),console.error(`[QueryCollection] Error observing query ${String(Se)}:`,Ce.error),S())}},ve=Se=>I.has(Se),Pe=(Se,Ve)=>{if(!ve(Ve)){const Ke=T.get(Ve),Ce=_e(Ke),_t=Se.subscribe(Ce);I.set(Ve,_t);const Z=Se.getCurrentResult();(Z.isSuccess||Z.isError)&&Ce(Z)}},tt=()=>{k.observers.forEach(Pe)},kt=()=>{I.forEach(Se=>{Se()}),I.clear()};le=!0;const Yt=z.on("subscribers:change",({subscriberCount:Se})=>{Se>0?tt():Se===0&&kt()});if(C==="eager"){const Se=ye({});Se instanceof Promise&&Se.catch(()=>{})}else S();tt(),k.observers.forEach((Se,Ve)=>{const Ke=T.get(Ve);_e(Ke)(Se.getCurrentResult())});const Tt=Se=>{I.get(Se)?.(),I.delete(Se);const Ve=A.get(Se)??new Set,Ke=[];Ve.forEach(Ce=>{const _t=M.get(Ce);_t&&(_t.delete(Se),_t.size===0&&(M.delete(Ce),z.has(Ce)&&Ke.push(z.get(Ce))))}),Ke.length>0&&(N(),Ke.forEach(Ce=>{D({type:"delete",value:Ce})}),V()),k.observers.delete(Se),A.delete(Se),T.delete(Se),O.delete(Se)},yn=Se=>{const Ve=O.get(Se)||0,Ke=k.observers.get(Se);if(Ve<=0&&(I.get(Se)?.(),I.delete(Se)),Ke?.hasListeners()??!1){O.set(Se,0);return}Ve>0&&console.warn(`[cleanupQueryIfIdle] Invariant violation: refcount=${Ve} but no listeners. Cleaning up to prevent leak.`,{hashedQueryKey:Se}),Tt(Se)},Xt=Se=>{Tt(Se)},Gn=s.getQueryCache().subscribe(Se=>{const Ve=Se.query.queryHash;Se.type==="removed"&&T.has(Ve)&&yn(Ve)});return{loadSubset:C==="eager"?void 0:ye,unloadSubset:C==="eager"?void 0:Se=>{const Ve=de(Se),Ke=ws(Ve),_t=(O.get(Ke)||0)-1;_t<=0?(O.set(Ke,0),yn(Ke)):O.set(Ke,_t)},cleanup:async()=>{Yt(),kt();const Se=[...T.values()],Ve=[...k.observers.keys()];for(const Ke of Ve)Xt(Ke);Gn(),await Promise.all(Se.map(async Ke=>{await s.cancelQueries({queryKey:Ke,exact:!0}),s.removeQueries({queryKey:Ke,exact:!0})}))}}},j=async re=>{const D=[...T.values()].map(V=>k.observers.get(ws(V)).refetch({throwOnError:re?.throwOnError}));await Promise.all(D)},J=re=>{const N=typeof e=="function"?e({}):e;r?s.setQueryData(N,D=>{if(!D||typeof D!="object")return D;if(Array.isArray(D))return re;const V=r(D);if(Array.isArray(V)){for(const S of Object.keys(D))if(D[S]===V)return{...D,[S]:re}}if(Array.isArray(D.data))return{...D,data:re};if(Array.isArray(D.items))return{...D,items:re};if(Array.isArray(D.results))return{...D,results:re};for(const S of Object.keys(D))if(Array.isArray(D[S]))return{...D,[S]:re};return D}):s.setQueryData(N,re)};let ne=null;const he=re=>{const{begin:N,write:D,commit:V,collection:S}=re,z=typeof e=="function"?e({}):e;return ne={collection:S,queryClient:s,queryKey:z,getKey:m,begin:N,write:D,commit:V,updateCacheData:J},K(re)},Y=v3(()=>ne),q=p?async re=>{const N=await p(re)??{};return N.refetch!==!1&&await j(),N}:void 0,P=y?async re=>{const N=await y(re)??{};return N.refetch!==!1&&await j(),N}:void 0,H=g?async re=>{const N=await g(re)??{};return N.refetch!==!1&&await j(),N}:void 0,ie=new w3(k,j,Y);return{...x,getKey:m,syncMode:C,sync:{sync:he},onInsert:q,onUpdate:P,onDelete:H,utils:ie}}function Hr(){return Math.random().toString(36).substring(2,9)}async function k3(t){return new Promise((e,n)=>{const r=new FileReader;r.onloadend=()=>{const a=r.result.split(",")[1]||"";e(a)},r.onerror=n,r.readAsDataURL(t)})}function E3(t,e){const n=atob(t),r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return new Blob([r],{type:e})}function C3(t){const e=t.match(/^grpc:\/\/([^/]+)\/(.+)\/([^/]+)$/);return e?{server:e[1],service:e[2],method:e[3]}:{server:t.replace(/^grpc:\/\//,""),service:"",method:""}}function T3(t,e,n){return e&&n?`grpc://${t}/${e}/${n}`:`grpc://${t}`}async function Lw(t){const e={id:t.id,name:t.name,variables:t.variables??[],creationTime:t.creationTime,executionTime:t.executionTime};switch(t.protocol){case"grpc":{const{server:n,service:r,method:s}=C3(t.url);e.grpc={server:n,service:r,method:s,schema:t.grpc?.schema,body:t.grpc?.body??"",response:t.grpc?.response};break}case"mcp":{e.mcp={url:t.url,headers:t.mcp?.headers,tool:t.mcp?.tool,resource:t.mcp?.resource,response:t.mcp?.response};break}case"openai":{e.openai={url:t.url,model:t.openai?.model??"",chat:t.openai?.chat,image:t.openai?.image,audio:t.openai?.audio,transcription:t.openai?.transcription,embeddings:t.openai?.embeddings,response:t.openai?.response};break}default:{let n=t.http?.body??{type:"none"};n.type==="form-data"?n={...n,data:n.data.map(s=>({...s,file:null}))}:n.type==="binary"&&(n={...n,file:null});let r;if(t.http?.response){const s=t.http.response.body instanceof Blob?await k3(t.http.response.body):"",a=t.http.response.body instanceof Blob?t.http.response.body.type:"application/octet-stream";r={status:t.http.response.status,statusCode:t.http.response.statusCode,headers:t.http.response.headers,body:s,bodyType:a,duration:t.http.response.duration,error:t.http.response.error}}e.http={method:t.http?.method??"GET",url:t.url,query:t.http?.query??[],headers:t.http?.headers??[],body:n,response:r};break}}return e}function A3(t){const e=t.grpc?"grpc":t.mcp?"mcp":t.openai?"openai":"rest",n={id:t.id,name:t.name,protocol:e,url:"",variables:t.variables??[],creationTime:t.creationTime,executionTime:t.executionTime,executing:!1};if(t.grpc){const r=t.grpc;n.url=T3(r.server,r.service,r.method),n.grpc={schema:r.schema,body:r.body||"",metadata:[],response:r.response}}else if(t.mcp){const r=t.mcp;n.url=r.url,n.mcp={headers:r.headers??[],tool:r.tool,resource:r.resource,response:r.response}}else if(t.openai){const r=t.openai;n.url=r.url,n.openai={model:r.model,chat:r.chat,image:r.image,audio:r.audio,transcription:r.transcription,embeddings:r.embeddings,response:r.response}}else if(t.http){const r=t.http;n.url=r.url,n.http={method:r.method,query:r.query,headers:r.headers,body:r.body,request:null,response:r.response?{status:r.response.status,statusCode:r.response.statusCode,headers:r.response.headers,body:r.response.body?E3(r.response.body,r.response.bodyType):new Blob([]),duration:r.response.duration,error:r.response.error}:null}}return n}const xf="requests";async function R3(){const t=await fetch(`/data/${xf}`);if(!t.ok)throw new Error(`Failed to list entries: ${t.statusText}`);const e=await t.json();return(await Promise.all(e.map(async r=>{const s=await fetch(`/data/${xf}/${encodeURIComponent(r.id)}`);return s.ok?await s.json():null}))).filter(r=>r!==null)}async function zw(t){const e=await fetch(`/data/${xf}/${encodeURIComponent(t.id)}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!e.ok)throw new Error(`Failed to save request: ${e.statusText}`)}async function O3(t){const e=await fetch(`/data/${xf}/${encodeURIComponent(t)}`,{method:"DELETE"});if(!e.ok&&e.status!==404)throw new Error(`Failed to delete request: ${e.statusText}`)}const Ok=new IO({defaultOptions:{queries:{staleTime:1/0,refetchOnWindowFocus:!1}}}),zt=vk(S3({queryKey:["requests"],queryFn:async()=>(await R3()).map(A3),getKey:t=>t.id,queryClient:Ok,onInsert:async({transaction:t})=>{await Promise.all(t.mutations.map(async e=>{const n=e.modified,r=await Lw(n);await zw(r)}))},onUpdate:async({transaction:t})=>{await Promise.all(t.mutations.map(async e=>{const n=e.modified,r=await Lw(n);await zw(r)}))},onDelete:async({transaction:t})=>{await Promise.all(t.mutations.map(async e=>{const n=e.original;await O3(n.id)}))}}));async function N3(){Array.from(zt.state.keys()).forEach(e=>zt.delete(e))}function wf(t,e,n={}){const{missingDataPlaceholder:r=""}=n;let s=t;const a=/\{\{(\w+):([^}]+)\}\}/g;let l;for(;(l=a.exec(t))!==null;){const[u,f,d]=l,m=e.find(y=>y.type===f&&y.id===d);let p="";switch(f){case"file_base64":p=m?.data||r;break;case"base64":m?.data?p=btoa(m.data):p=r;break;case"file_dataurl":m?.data&&m?.mimeType?p=`data:${m.mimeType};base64,${m.data}`:m?.data?p=`data:application/octet-stream;base64,${m.data}`:p=r;break;case"timestamp":p=String(Date.now());break;case"uuid":typeof crypto<"u"&&crypto.randomUUID?p=crypto.randomUUID():p="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,y=>{const g=Math.random()*16|0;return(y==="x"?g:g&3|8).toString(16)});break;case"random_string":p=Math.random().toString(36).substring(2,18);break;default:p=u}s=s.replace(u,p)}return s}function qa(){return{id:Hr(),enabled:!0,key:"",value:""}}function Yu(t,e="rest"){const n={id:Hr(),name:t||"New Request",protocol:e,url:"",variables:[],creationTime:Date.now(),executionTime:null,executing:!1};switch(e){case"grpc":n.grpc={body:"",metadata:[qa()]};break;case"mcp":n.mcp={headers:[qa()]};break;case"openai":n.openai={model:"",chat:{input:[{id:Hr(),role:"user",content:[{type:"input_text",text:""}]}]}};break;default:n.http={method:"GET",headers:[qa()],query:[qa()],body:{type:"none"},request:null,response:null};break}return n}const Nk=G.createContext(null),I3={request:Yu(),sidebarCollapsed:!1,aiPanelOpen:!1};function M3({children:t}){const[e,n]=G.useState(I3),{data:r=[]}=c3(S=>S.from({req:zt}).orderBy(({req:z})=>z.executionTime??z.creationTime,"desc")),s=G.useCallback(S=>{n(z=>({...z,request:{...z.request,...S}}))},[]),a=G.useCallback((S,z)=>{try{const le=new URL(S),de=le.protocol.replace(/:$/,""),ye=le.host,_e=le.pathname.replace(/^\//,""),ve=z.replace(/^\//,""),Pe=`/proxy/mcp/${de}/${ye}/${ve}`;return _e?`${Pe}?path=${encodeURIComponent(_e)}`:Pe}catch{return""}},[]),l=G.useCallback(S=>{n(z=>{const le=Yu(z.request.name,S);return le.id=z.request.id,le.url=z.request.url,{...z,request:le}})},[]),u=G.useCallback(S=>{n(z=>({...z,request:{...z.request,http:{...z.request.http,method:S}}}))},[]),f=G.useCallback(S=>{s({url:S})},[s]),d=G.useCallback(S=>{n(z=>({...z,request:{...z.request,http:{...z.request.http,headers:S}}}))},[]),m=G.useCallback(S=>{n(z=>({...z,request:{...z.request,http:{...z.request.http,query:S}}}))},[]),p=G.useCallback(S=>{n(z=>({...z,request:{...z.request,http:z.request.http?{...z.request.http,body:S}:{method:"GET",headers:[],query:[],body:S,request:null,response:null}}}))},[]),y=G.useCallback(S=>{s({variables:S})},[s]),g=G.useCallback(S=>{n(z=>{const le=z.request.http?.request,ye={...le?.options??{insecure:!1,redirect:!0},...S};return{...z,request:{...z.request,http:z.request.http?{...z.request.http,request:le?{...le,options:ye}:null}:void 0}}})},[]),v=G.useCallback(S=>{n(z=>({...z,request:{...z.request,grpc:z.request.grpc?{...z.request.grpc,body:S}:{body:S,metadata:[]}}}))},[]),x=G.useCallback(S=>{n(z=>({...z,request:{...z.request,grpc:z.request.grpc?{...z.request.grpc,metadata:S}:{body:"",metadata:S}}}))},[]),C=G.useCallback(S=>{n(z=>({...z,request:{...z.request,grpc:z.request.grpc?{...z.request.grpc,schema:S}:{body:"",metadata:[],schema:S}}}))},[]),k=G.useCallback(S=>{n(z=>({...z,request:{...z.request,mcp:{headers:z.request.mcp?.headers??[qa()],tool:S,resource:void 0}}}))},[]),T=G.useCallback(S=>{n(z=>({...z,request:{...z.request,mcp:{headers:z.request.mcp?.headers??[qa()],resource:S,tool:void 0}}}))},[]),A=G.useCallback(S=>{n(z=>({...z,request:{...z.request,mcp:z.request.mcp?{...z.request.mcp,headers:S}:{headers:S}}}))},[]),M=G.useCallback(S=>{n(z=>({...z,request:{...z.request,openai:z.request.openai?{...z.request.openai,model:S}:{model:S,chat:{input:[]}}}}))},[]),I=G.useCallback(S=>{n(z=>({...z,request:{...z.request,openai:z.request.openai?{...z.request.openai,models:S}:{model:"",models:S,chat:{input:[]}}}}))},[]),O=G.useCallback(S=>{n(z=>{const le=z.request.openai,de={model:le?.model??"",...S==="chat"?{chat:le?.chat??{input:[{id:Hr(),role:"user",content:[{type:"input_text",text:""}]}]}}:S==="image"?{image:le?.image??{prompt:""}}:S==="audio"?{audio:le?.audio??{text:"",voice:"alloy"}}:S==="transcription"?{transcription:le?.transcription??{file:""}}:{embeddings:le?.embeddings??{text:""}}};return{...z,request:{...z.request,openai:de}}})},[]),B=G.useCallback(S=>{n(z=>({...z,request:{...z.request,openai:z.request.openai?{...z.request.openai,chat:{input:S}}:{model:"",chat:{input:S}}}}))},[]),U=G.useCallback(S=>{n(z=>({...z,request:{...z.request,openai:z.request.openai?{...z.request.openai,image:{prompt:S}}:{model:"",image:{prompt:S}}}}))},[]),K=G.useCallback(S=>{n(z=>({...z,request:{...z.request,openai:z.request.openai?{...z.request.openai,audio:{...z.request.openai.audio,text:S}}:{model:"",audio:{text:S,voice:"alloy"}}}}))},[]),j=G.useCallback(S=>{n(z=>({...z,request:{...z.request,openai:z.request.openai?{...z.request.openai,audio:{text:z.request.openai.audio?.text??"",voice:S}}:{model:"",audio:{text:"",voice:S}}}}))},[]),J=G.useCallback(S=>{n(z=>({...z,request:{...z.request,openai:z.request.openai?{...z.request.openai,transcription:{file:S}}:{model:"",transcription:{file:S}}}}))},[]),ne=G.useCallback(S=>{n(z=>({...z,request:{...z.request,openai:z.request.openai?{...z.request.openai,embeddings:{text:S}}:{model:"",embeddings:{text:S}}}}))},[]),he=G.useCallback(async()=>{const S=e.request;if(!S.url)return null;s({executing:!0});try{const z=a(S.url,"features");if(!z)throw new Error("Invalid MCP server URL");const le={};for(const _e of S.mcp?.headers??[])_e.enabled&&_e.key&&(le[_e.key]=_e.value);const de=await fetch(z,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({headers:le})});if(!de.ok){const _e=await de.text();throw new Error(_e||`HTTP ${de.status}`)}const ye=await de.json();return s({executing:!1}),ye}catch(z){const le=z instanceof Error?z.message:"Unknown error";return s({executing:!1}),{tools:[],resources:[],error:le}}},[e.request,s,a]),Y=G.useCallback(()=>{n(S=>{const{protocol:z}=S.request;return z==="grpc"&&S.request.grpc?{...S,request:{...S.request,grpc:{...S.request.grpc,response:void 0}}}:z==="mcp"&&S.request.mcp?{...S,request:{...S.request,mcp:{...S.request.mcp,response:void 0}}}:z==="openai"&&S.request.openai?{...S,request:{...S.request,openai:{...S.request.openai,response:void 0}}}:S.request.http?{...S,request:{...S.request,http:{...S.request.http,response:null}}}:S})},[]),q=G.useCallback(async()=>{const S=e.request;s({executing:!0});try{if(S.protocol==="grpc"){const ce=S.url.match(/^grpc:\/\/([^/]+)\/(.+)\/([^/]+)$/);if(!ce)throw new Error("Invalid gRPC URL format. Expected: grpc://host:port/service/method");const[,pe,be,ke]=ce,He=S.grpc?.body??"{}",Et=wf(He,S.variables),rt={"Content-Type":"application/json"};(S.grpc?.metadata??[]).filter(dt=>dt.enabled&&dt.key).forEach(dt=>{rt[dt.key]=dt.value});const Ne=`/proxy/grpc/${pe}/${be}/${ke}`,ze=performance.now(),Ie=await fetch(Ne,{method:"POST",headers:rt,body:Et}),lt=Math.round(performance.now()-ze),Ge=await Ie.text(),It={};Ie.headers.forEach((dt,ci)=>{It[ci]=dt});const Zn=Date.now(),cr={...S,executionTime:Zn,executing:!1,grpc:{...S.grpc,body:He,metadata:S.grpc?.metadata??[],response:{body:Ge,metadata:It,duration:lt,error:Ie.ok?void 0:`HTTP ${Ie.status}`}}};r.find(dt=>dt.id===S.id)?zt.update(S.id,dt=>{Object.assign(dt,cr)}):zt.insert(cr),n(dt=>({...dt,request:cr}));return}if(S.protocol==="mcp"){const Z=S.url;if(!Z)throw new Error("MCP server URL is required");const ce=performance.now();let pe;if(S.mcp?.tool){let rt={};if(S.mcp.tool.arguments)try{rt=JSON.parse(S.mcp.tool.arguments)}catch{}const Ne={};for(const Ge of S.mcp?.headers??[])Ge.enabled&&Ge.key&&(Ne[Ge.key]=Ge.value);const ze=a(Z,"tool/call");if(!ze)throw new Error("Invalid MCP server URL");const Ie=await fetch(ze,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:S.mcp.tool.name,arguments:rt,headers:Ne})});if(!Ie.ok){const Ge=await Ie.text();throw new Error(Ge||`HTTP ${Ie.status}`)}pe=await Ie.json()}else if(S.mcp?.resource){const rt=a(Z,"resource/call");if(!rt)throw new Error("Invalid MCP server URL");const Ne={};for(const lt of S.mcp?.headers??[])lt.enabled&&lt.key&&(Ne[lt.key]=lt.value);const ze=await fetch(rt,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({uri:S.mcp.resource.uri,headers:Ne})});if(!ze.ok){const lt=await ze.text();throw new Error(lt||`HTTP ${ze.status}`)}pe=await ze.json()}else throw new Error("No tool or resource selected");const be=Math.round(performance.now()-ce),ke=Date.now(),He={...S,executionTime:ke,executing:!1,mcp:{...S.mcp,response:{result:pe,duration:be}}};r.find(rt=>rt.id===S.id)?zt.update(S.id,rt=>{Object.assign(rt,He)}):zt.insert(He),n(rt=>({...rt,request:He}));return}if(S.protocol==="openai"){const Z=S.url.replace(/\/$/,""),ce=S.openai?.model,pe=!!S.openai?.chat;if(!Z)throw new Error("OpenAI API URL is required");if(!ce)throw new Error("Please select a model");const be=performance.now();let ke;if(pe){const Ne=(S.openai?.chat?.input??[]).map(Ge=>({role:Ge.role,content:Ge.content.map(It=>{switch(It.type){case"input_text":return{type:"input_text",text:It.text};case"input_image":return{type:"input_image",image_url:It.image_url};case"input_file":return{type:"input_file",filename:It.filename,file_data:It.file_data}}})})),ze=await fetch(`${Z}/v1/responses`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({model:ce,input:Ne})});if(!ze.ok){const Ge=await ze.text();throw new Error(Ge||`HTTP ${ze.status}`)}const Ie=await ze.json();let lt="";if(Ie.output&&Array.isArray(Ie.output)){for(const Ge of Ie.output)if(Ge.type==="message"&&Ge.content)for(const It of Ge.content)It.type==="output_text"&&(lt+=It.text)}ke={result:{type:"text",text:lt},duration:Math.round(performance.now()-be)}}else if(S.openai?.image){const Ne=S.openai?.image?.prompt??"";if(!Ne)throw new Error("Please enter an image prompt");const ze=await fetch(`${Z}/v1/images/generations`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({model:ce,prompt:Ne,response_format:"b64_json"})});if(!ze.ok){const It=await ze.text();throw new Error(It||`HTTP ${ze.status}`)}const lt=((await ze.json()).data||[])[0];ke={result:{type:"image",image:lt?.b64_json||lt?.url||""},duration:Math.round(performance.now()-be)}}else if(S.openai?.audio){const Ne=S.openai?.audio?.text??"",ze=S.openai?.audio?.voice??"alloy";if(!Ne)throw new Error("Please enter text to convert to speech");const Ie=await fetch(`${Z}/v1/audio/speech`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({model:ce,input:Ne,voice:ze})});if(!Ie.ok){const Zn=await Ie.text();throw new Error(Zn||`HTTP ${Ie.status}`)}const lt=await Ie.blob(),Ge=new FileReader;ke={result:{type:"audio",audio:await new Promise((Zn,cr)=>{Ge.onloadend=()=>{const dt=Ge.result.split(",")[1]||"";Zn(dt)},Ge.onerror=cr,Ge.readAsDataURL(lt)})},duration:Math.round(performance.now()-be)}}else if(S.openai?.transcription){const Ne=S.openai?.transcription?.file??"";if(!Ne)throw new Error("Please select an audio file to transcribe");const[ze,Ie]=Ne.split(","),lt=ze?.split(":")[1]?.split(";")[0]||"audio/mpeg",Ge=lt.split("/")[1]||"mp3",It=atob(Ie||""),Zn=new Uint8Array(It.length);for(let ks=0;ks<It.length;ks++)Zn[ks]=It.charCodeAt(ks);const cr=new Blob([Zn],{type:lt}),jr=new FormData;jr.append("file",cr,`audio.${Ge}`),jr.append("model",ce);const dt=await fetch(`${Z}/v1/audio/transcriptions`,{method:"POST",body:jr});if(!dt.ok){const ks=await dt.text();throw new Error(ks||`HTTP ${dt.status}`)}ke={result:{type:"transcription",text:(await dt.json()).text||""},duration:Math.round(performance.now()-be)}}else if(S.openai?.embeddings){const Ne=S.openai?.embeddings?.text??"";if(!Ne)throw new Error("Please enter text to convert to embeddings");const ze=await fetch(`${Z}/v1/embeddings`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({model:ce,input:Ne})});if(!ze.ok){const Ge=await ze.text();throw new Error(Ge||`HTTP ${ze.status}`)}ke={result:{type:"embeddings",embeddings:(await ze.json()).data?.[0]?.embedding||[]},duration:Math.round(performance.now()-be)}}else throw new Error("Invalid OpenAI request type");const He=Date.now(),Et={...S,executionTime:He,executing:!1,openai:{...S.openai,response:ke}};r.find(Ne=>Ne.id===S.id)?zt.update(S.id,Ne=>{Object.assign(Ne,Et)}):zt.insert(Et),n(Ne=>({...Ne,request:Et}));return}const z={};(S.http?.headers??[]).filter(Z=>Z.enabled&&Z.key).forEach(Z=>{z[Z.key]=Z.value});const le=new URLSearchParams,de=S.http?.method??"GET";(S.http?.query??[]).filter(Z=>Z.enabled&&Z.key).forEach(Z=>{le.append(Z.key,Z.value)});const ye=S.http?.body??{type:"none"};let _e,ve="",Pe=!1;switch(ye.type){case"json":{_e=wf(ye.content,S.variables),ve=ye.content,z["Content-Type"]||(z["Content-Type"]="application/json");break}case"form-urlencoded":{const Z=new URLSearchParams;ye.data.filter(ce=>ce.enabled&&ce.key).forEach(ce=>{Z.append(ce.key,ce.value)}),_e=Z.toString(),ve=Z.toString(),z["Content-Type"]||(z["Content-Type"]="application/x-www-form-urlencoded");break}case"form-data":{const Z=new FormData,ce=[];ye.data.filter(pe=>pe.enabled&&pe.key).forEach(pe=>{pe.type==="file"&&pe.file?(Z.append(pe.key,pe.file,pe.fileName),ce.push(`${pe.key}: [File: ${pe.fileName}]`)):pe.type==="text"&&(Z.append(pe.key,pe.value),ce.push(`${pe.key}: ${pe.value}`))}),_e=Z,ve=ce.join(`
`),Pe=!0;break}case"binary":{ye.file&&(_e=ye.file,ve=`[Binary file: ${ye.fileName}]`,z["Content-Type"]||(z["Content-Type"]=ye.file.type||"application/octet-stream"));break}case"raw":_e=ye.content,ve=ye.content,z["Content-Type"]||(z["Content-Type"]="text/plain");break}const tt=S.http?.request?.options??{insecure:!1,redirect:!0};tt.insecure&&(z["X-Prism-Insecure"]="true"),tt.redirect&&(z["X-Prism-Redirect"]="true");const kt=new URL(S.url);let Yt="/proxy/"+kt.protocol.slice(0,-1)+"/"+kt.host+kt.pathname;const Tt=le.toString();Tt&&(Yt+="?"+Tt);const yn={method:de,url:S.url,headers:z,query:Object.fromEntries(le),body:ve,options:tt},Xt={...z};Pe&&delete Xt["Content-Type"];const Gn=performance.now(),bn=await fetch(Yt,{method:de,headers:Xt,body:_e&&de!=="GET"&&de!=="HEAD"?_e:void 0}),_n=Math.round(performance.now()-Gn),Kn=await bn.blob(),Se={};bn.headers.forEach((Z,ce)=>{Se[ce]=Z});const Ve={status:bn.statusText||String(bn.status),statusCode:bn.status,headers:Se,body:Kn,duration:_n},Ke=Date.now(),Ce={...S,executionTime:Ke,executing:!1,http:{...S.http,request:yn,response:Ve}};r.find(Z=>Z.id===S.id)?zt.update(S.id,Z=>{Object.assign(Z,Ce)}):zt.insert(Ce),n(Z=>({...Z,request:Ce}))}catch(z){const le=Date.now(),de=z instanceof Error?z.message:"Unknown error";if(S.protocol==="grpc"){const ye={...S,executionTime:le,executing:!1,grpc:{...S.grpc,response:{body:"",duration:0,error:de}}};r.find(ve=>ve.id===S.id)?zt.update(S.id,ve=>{Object.assign(ve,ye)}):zt.insert(ye),n(ve=>({...ve,request:ye}))}else if(S.protocol==="mcp"){const ye={...S,executionTime:le,executing:!1,mcp:{headers:S.mcp?.headers??[],tool:S.mcp?.tool,resource:S.mcp?.resource,response:{result:void 0,duration:0,error:de}}};r.find(ve=>ve.id===S.id)?zt.update(S.id,ve=>{Object.assign(ve,ye)}):zt.insert(ye),n(ve=>({...ve,request:ye}))}else if(S.protocol==="openai"){const _e=!!S.openai?.chat?{result:{type:"text",text:""},duration:0,error:de}:{result:{type:"image",image:""},duration:0,error:de},ve={...S,executionTime:le,executing:!1,openai:{...S.openai,response:_e}};r.find(tt=>tt.id===S.id)?zt.update(S.id,tt=>{Object.assign(tt,ve)}):zt.insert(ve),n(tt=>({...tt,request:ve}))}else{const ye={status:"",statusCode:0,headers:{},body:new Blob,duration:0,error:de},_e={...S,executionTime:le,executing:!1,http:{...S.http,response:ye}};r.find(Pe=>Pe.id===S.id)?zt.update(S.id,Pe=>{Object.assign(Pe,_e)}):zt.insert(_e),n(Pe=>({...Pe,request:_e}))}}},[e.request,s,r,a]),P=G.useCallback(S=>{const z=Yu(S.name,S.protocol??"rest");z.id=S.id,z.url=S.url,z.executionTime=S.executionTime,z.variables=S.variables??[],S.http&&(z.http={method:S.http.method,headers:[...S.http.headers],query:[...S.http.query],body:S.http.body,request:S.http.request,response:S.http.response},S.http.body.type==="form-data"?z.http.body={type:"form-data",data:S.http.body.data.map(le=>({...le,file:null}))}:S.http.body.type==="binary"&&(z.http.body={type:"binary",file:null,fileName:S.http.body.fileName})),S.grpc&&(z.grpc={...S.grpc}),S.mcp&&(z.mcp={...S.mcp}),S.openai&&(z.openai={...S.openai}),n(le=>({...le,request:z}))},[]),H=G.useCallback(async()=>{await N3()},[]),ie=G.useCallback(async S=>{zt.delete(S)},[]),re=G.useCallback(()=>{n(S=>({...S,sidebarCollapsed:!S.sidebarCollapsed}))},[]),N=G.useCallback(()=>{n(S=>({...S,aiPanelOpen:!S.aiPanelOpen}))},[]),D=G.useCallback(()=>{n(S=>({...S,request:Yu()}))},[]),V={request:e.request,history:r,sidebarCollapsed:e.sidebarCollapsed,aiPanelOpen:e.aiPanelOpen,setProtocol:l,setMethod:u,setUrl:f,setHeaders:d,setQuery:m,setBody:p,setVariables:y,setOptions:g,executeRequest:q,clearResponse:Y,newRequest:D,setGrpcBody:v,setGrpcMetadata:x,setGrpcMethodSchema:C,setMcpTool:k,setMcpResource:T,setMcpHeaders:A,discoverMcpFeatures:he,setOpenAIModel:M,setOpenAIModels:I,setOpenAIBodyType:O,setOpenAIChatInput:B,setOpenAIImagePrompt:U,setOpenAIAudioText:K,setOpenAIAudioVoice:j,setOpenAITranscriptionFile:J,setOpenAIEmbeddingsText:ne,loadFromHistory:P,clearHistory:H,deleteHistoryEntry:ie,toggleSidebar:re,toggleAiPanel:N};return w.jsx(Nk.Provider,{value:V,children:t})}var D3=nk();const Ik=G.createContext(null);function j3(t){const e=qe.c(6),{children:n}=t,[r,s]=G.useState(null);let a;e[0]===Symbol.for("react.memo_cache_sentinel")?(a=d=>{s(d)},e[0]=a):a=e[0];const l=a;let u;e[1]!==r?(u={portalTarget:r,setPortalTarget:l},e[1]=r,e[2]=u):u=e[2];let f;return e[3]!==n||e[4]!==u?(f=w.jsx(Ik.Provider,{value:u,children:n}),e[3]=n,e[4]=u,e[5]=f):f=e[5],f}function Mk(){const t=G.useContext(Ik);if(!t)throw new Error("useRequestBarPortal must be used within RequestBarPortalProvider");return t}function L3(t){const e=qe.c(3),{children:n}=t,{portalTarget:r}=Mk();if(!r)return null;let s;return e[0]!==n||e[1]!==r?(s=D3.createPortal(n,r),e[0]=n,e[1]=r,e[2]=s):s=e[2],s}function gn(){const t=G.useContext(Nk);if(!t)throw new Error("useClient must be used within a ClientProvider");return t}const z3=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),P3=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),Pw=t=>{const e=P3(t);return e.charAt(0).toUpperCase()+e.slice(1)},Dk=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),B3=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var $3={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const U3=G.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:a,iconNode:l,...u},f)=>G.createElement("svg",{ref:f,...$3,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:Dk("lucide",s),...!a&&!B3(u)&&{"aria-hidden":"true"},...u},[...l.map(([d,m])=>G.createElement(d,m)),...Array.isArray(a)?a:[a]]));const Ye=(t,e)=>{const n=G.forwardRef(({className:r,...s},a)=>G.createElement(U3,{ref:a,iconNode:e,className:Dk(`lucide-${z3(Pw(t))}`,`lucide-${t}`,r),...s}));return n.displayName=Pw(t),n};const q3=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],F3=Ye("box",q3);const V3=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],jk=Ye("check",V3);const H3=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],ii=Ye("chevron-down",H3);const G3=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],ad=Ye("chevron-right",G3);const K3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Lk=Ye("circle-alert",K3);const Z3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Oy=Ye("circle-check",Z3);const Q3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],J3=Ye("circle-x",Q3);const Y3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],zk=Ye("circle",Y3);const X3=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Rl=Ye("clock",X3);const W3=[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]],eD=Ye("cpu",W3);const tD=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Pk=Ye("eye",tD);const nD=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],io=Ye("file-text",nD);const rD=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}]],Sf=Ye("file",rD);const sD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],iD=Ye("globe",sD);const aD=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],Bk=Ye("hash",aD);const oD=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],lD=Ye("image",oD);const cD=[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]],yg=Ye("link-2",cD);const uD=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],kf=Ye("loader-circle",uD);const fD=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],dD=Ye("music",fD);const hD=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}],["path",{d:"m8 9 3 3-3 3",key:"12hl5m"}]],pD=Ye("panel-right-close",hD);const mD=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}],["path",{d:"m10 15-3-3 3-3",key:"1pgupc"}]],gD=Ye("panel-right-open",mD);const yD=[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]],Bw=Ye("paperclip",yD);const bD=[["path",{d:"M12 22v-5",key:"1ega77"}],["path",{d:"M15 8V2",key:"18g5xt"}],["path",{d:"M17 8a1 1 0 0 1 1 1v4a4 4 0 0 1-4 4h-4a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1z",key:"1xoxul"}],["path",{d:"M9 8V2",key:"14iosj"}]],_D=Ye("plug",bD);const vD=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Ef=Ye("refresh-cw",vD);const xD=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],wD=Ye("search",xD);const SD=[["path",{d:"M3.714 3.048a.498.498 0 0 0-.683.627l2.843 7.627a2 2 0 0 1 0 1.396l-2.842 7.627a.498.498 0 0 0 .682.627l18-8.5a.5.5 0 0 0 0-.904z",key:"117uat"}],["path",{d:"M6 12h16",key:"s4cdu5"}]],kD=Ye("send-horizontal",SD);const ED=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],CD=Ye("send",ED);const TD=[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]],AD=Ye("server",TD);const RD=[["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 18h1.973a4 4 0 0 0 3.3-1.7l5.454-8.6a4 4 0 0 1 3.3-1.7H22",key:"1ailkh"}],["path",{d:"M2 6h1.972a4 4 0 0 1 3.6 2.2",key:"km57vx"}],["path",{d:"M22 18h-6.041a4 4 0 0 1-3.3-1.8l-.359-.45",key:"os18l9"}]],$k=Ye("shuffle",RD);const OD=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Wa=Ye("sparkles",OD);const ND=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],ID=Ye("square",ND);const MD=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],ic=Ye("trash-2",MD);const DD=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],jD=Ye("type",DD);const LD=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],bg=Ye("upload",LD);const zD=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],Cf=Ye("wrench",zD);const PD=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Hl=Ye("x",PD);const BD=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],$D=Ye("zap",BD),UD={GET:"text-green-600 dark:text-green-400",POST:"text-yellow-600 dark:text-yellow-400",PUT:"text-blue-600 dark:text-blue-400",PATCH:"text-purple-600 dark:text-purple-400",DELETE:"text-red-600 dark:text-red-400",OPTIONS:"text-neutral-500 dark:text-neutral-400",HEAD:"text-neutral-500 dark:text-neutral-400"};function qD(t){return t?t>=200&&t<300?"bg-green-500":t>=300&&t<400?"bg-yellow-500":t>=400&&t<500?"bg-orange-500":"bg-red-500":"bg-neutral-500"}function FD(t){try{return new URL(t.url).hostname}catch{return"Other"}}function VD(t){if(t.protocol==="mcp")return t.mcp?.tool?.name?t.mcp.tool.name:t.mcp?.resource?.uri?t.mcp.resource.uri:"MCP Request";if(t.protocol==="openai")return t.openai?.model||"No model";if(t.protocol==="grpc"){try{const n=new URL(t.url).pathname.split("/").filter(Boolean);if(n.length>0)return n[n.length-1]}catch{}return t.url}try{const e=new URL(t.url);return e.pathname+e.search}catch{return t.url}}function HD(t){return t.protocol==="grpc"?"gRPC":t.protocol==="mcp"?"MCP":t.protocol==="openai"?"OpenAI":t.http?.method??"GET"}function GD(t){return t.protocol==="grpc"?"text-cyan-600 dark:text-cyan-400":t.protocol==="mcp"?"text-violet-600 dark:text-violet-400":t.protocol==="openai"?"text-purple-600 dark:text-purple-400":UD[t.http?.method??"GET"]}function KD(t){const e=new Map;for(const n of t){const r=FD(n),s=e.get(r)||[];s.push(n),e.set(r,s)}return Array.from(e.entries()).map(([n,r])=>({hostname:n,entries:r,latestTimestamp:Math.max(...r.map(s=>s.executionTime??0))})).sort((n,r)=>r.latestTimestamp-n.latestTimestamp)}function ZD(){const t=qe.c(20),{history:e,sidebarCollapsed:n,loadFromHistory:r,deleteHistoryEntry:s,clearHistory:a,toggleSidebar:l}=gn();let u;t[0]!==e?(u=KD(e),t[0]=e,t[1]=u):u=t[1];const f=u;if(e.length===0||n)return null;let d;t[2]===Symbol.for("react.memo_cache_sentinel")?(d=w.jsx("h1",{className:"text-sm font-semibold text-neutral-700 dark:text-neutral-200 pl-0.5",children:"Prism"}),t[2]=d):d=t[2];let m;t[3]!==a||t[4]!==e.length?(m=e.length>0&&w.jsx("button",{onClick:a,className:"p-1.5 rounded-lg hover:bg-neutral-100 dark:hover:bg-white/5 transition-colors",title:"Clear history",children:w.jsx(ic,{className:"w-4 h-4 text-neutral-500 dark:text-neutral-400"})}),t[3]=a,t[4]=e.length,t[5]=m):m=t[5];let p;t[6]===Symbol.for("react.memo_cache_sentinel")?(p=w.jsx(gD,{className:"w-4 h-4 text-neutral-500 dark:text-neutral-400"}),t[6]=p):p=t[6];let y;t[7]!==l?(y=w.jsx("button",{onClick:l,className:"p-1.5 rounded-lg hover:bg-neutral-100 dark:hover:bg-white/5 transition-colors",title:"Hide sidebar",children:p}),t[7]=l,t[8]=y):y=t[8];let g;t[9]!==m||t[10]!==y?(g=w.jsxs("div",{className:"px-3 py-2.5 flex items-center justify-between gap-2",children:[d,w.jsxs("div",{className:"flex items-center gap-1",children:[m,y]})]}),t[9]=m,t[10]=y,t[11]=g):g=t[11];let v;t[12]!==s||t[13]!==f||t[14]!==e.length||t[15]!==r?(v=w.jsx("div",{className:"flex-1 overflow-y-auto px-2",children:e.length===0?w.jsx("div",{className:"px-2 py-8 text-center text-neutral-400 dark:text-neutral-600 text-xs",children:"No history yet"}):w.jsx("div",{className:"space-y-3 pb-2",children:f.map(C=>w.jsxs("div",{children:[w.jsx("div",{className:"px-2 py-1 text-[10px] font-medium text-neutral-400 dark:text-neutral-500 uppercase tracking-wider truncate",title:C.hostname,children:C.hostname}),w.jsx("div",{className:"space-y-0.5",children:C.entries.map(k=>w.jsxs("div",{className:"group flex items-center gap-2 px-3 py-1.5 rounded-lg hover:bg-neutral-100 dark:hover:bg-white/5 cursor-pointer transition-colors",onClick:()=>r(k),children:[w.jsx("span",{className:`w-1.5 h-1.5 rounded-full shrink-0 ${qD(k.http?.response?.statusCode??(k.grpc?.response?.error?0:k.grpc?.response?200:null)??(k.mcp?.response?.error?0:k.mcp?.response?200:null)??(k.openai?.response?.error?0:k.openai?.response?200:null))}`}),w.jsx("span",{className:`text-[10px] font-semibold shrink-0 ${GD(k)}`,children:HD(k)}),w.jsx("span",{className:"text-xs text-neutral-500 dark:text-neutral-400 truncate flex-1",title:k.url,children:VD(k)}),w.jsx("button",{onClick:T=>{T.stopPropagation(),s(k.id)},className:"opacity-0 group-hover:opacity-100 inline-flex items-center justify-center w-5 h-5 hover:bg-neutral-200 dark:hover:bg-white/8 rounded transition-all shrink-0",title:"Delete",children:w.jsx("svg",{className:"w-3 h-3 text-neutral-400 dark:text-neutral-500 hover:text-rose-500 dark:hover:text-rose-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},k.id))})]},C.hostname))})}),t[12]=s,t[13]=f,t[14]=e.length,t[15]=r,t[16]=v):v=t[16];let x;return t[17]!==g||t[18]!==v?(x=w.jsxs("aside",{className:"w-64 bg-white dark:bg-[#1a1a1a]/60 dark:backdrop-blur-xl border border-neutral-200 dark:border-white/8 rounded-xl flex flex-col overflow-hidden dark:shadow-2xl",children:[g,v]}),t[17]=g,t[18]=v,t[19]=x):x=t[19],x}const om=[{value:"rest",label:"HTTP",icon:iD},{value:"grpc",label:"gRPC",icon:AD},{value:"mcp",label:"MCP",icon:_D},{value:"openai",label:"OpenAI",icon:Wa}];function QD(){const t=qe.c(23),{request:e,setProtocol:n}=gn(),r=e?.protocol??"rest",[s,a]=G.useState(!1),l=G.useRef(null);let u;t[0]!==r?(u=om.find(A=>A.value===r)??om[0],t[0]=r,t[1]=u):u=t[1];const f=u,d=f.icon;let m,p;t[2]===Symbol.for("react.memo_cache_sentinel")?(m=()=>{const A=M=>{l.current&&!l.current.contains(M.target)&&a(!1)};return document.addEventListener("mousedown",A),()=>document.removeEventListener("mousedown",A)},p=[],t[2]=m,t[3]=p):(m=t[2],p=t[3]),G.useEffect(m,p);let y;t[4]!==s?(y=()=>a(!s),t[4]=s,t[5]=y):y=t[5];let g;t[6]!==d?(g=w.jsx(d,{className:"w-4 h-4"}),t[6]=d,t[7]=g):g=t[7];let v;t[8]!==f.label?(v=w.jsx("span",{className:"text-xs font-medium",children:f.label}),t[8]=f.label,t[9]=v):v=t[9];let x;t[10]===Symbol.for("react.memo_cache_sentinel")?(x=w.jsx(ii,{className:"w-3 h-3"}),t[10]=x):x=t[10];let C;t[11]!==f.label||t[12]!==y||t[13]!==g||t[14]!==v?(C=w.jsxs("button",{type:"button",onClick:y,className:"flex items-center gap-1 px-2 py-1.5 rounded-md hover:bg-neutral-100 dark:hover:bg-white/10 transition-colors text-neutral-600 dark:text-neutral-400",title:f.label,children:[g,v,x]}),t[11]=f.label,t[12]=y,t[13]=g,t[14]=v,t[15]=C):C=t[15];let k;t[16]!==s||t[17]!==r||t[18]!==n?(k=s&&w.jsx("div",{className:"absolute top-full left-0 mt-1 bg-white dark:bg-[#1a1a1a] border border-neutral-200 dark:border-white/10 rounded-md shadow-lg z-50 min-w-28",children:om.map(A=>{const M=A.icon;return w.jsxs("button",{type:"button",onClick:()=>{n(A.value),a(!1)},className:`w-full flex items-center gap-2 px-3 py-1.5 text-sm transition-colors ${r===A.value?"bg-neutral-100 dark:bg-white/10 text-neutral-900 dark:text-neutral-100":"text-neutral-600 dark:text-neutral-400 hover:bg-neutral-50 dark:hover:bg-white/5"}`,children:[w.jsx(M,{className:"w-4 h-4"}),A.label]},A.value)})}),t[16]=s,t[17]=r,t[18]=n,t[19]=k):k=t[19];let T;return t[20]!==C||t[21]!==k?(T=w.jsxs("div",{ref:l,className:"relative",children:[C,k]}),t[20]=C,t[21]=k,t[22]=T):T=t[22],T}let ml={};async function JD(){try{const t=await fetch("/config.json");if(t.ok){const e=await t.json();ml={...ml,...e}}else console.warn("Failed to load config.json, using defaults");return ml}catch(t){return console.warn("Error loading config:",t),ml}}function Ny(){return ml}function YD(){const t=qe.c(29),{request:e,executeRequest:n,aiPanelOpen:r,toggleAiPanel:s}=gn();let a;t[0]===Symbol.for("react.memo_cache_sentinel")?(a=Ny().ai?.model,t[0]=a):a=t[0];const l=!!a,u=e?.executing??!1,f=e?.protocol??"rest",d=e?.url??"",m=WD;let p;t[1]!==d?(p=m(d),t[1]=d,t[2]=p):p=t[2];const{host:y,service:g,method:v}=p,x=!!e?.mcp?.tool||!!e?.mcp?.resource,C=e?.openai?.model??"";let k;t[3]!==e?.openai?.chat?.input?(k=e?.openai?.chat?.input??[],t[3]=e?.openai?.chat?.input,t[4]=k):k=t[4];const T=k,A=e?.openai?.image?.prompt??"",M=e?.openai?.audio?.text??"",I=e?.openai?.transcription?.file??"",O=e?.openai?.embeddings?.text??"";let B;t[5]!==M||t[6]!==T||t[7]!==O||t[8]!==A||t[9]!==I||t[10]!==e?.openai?.chat||t[11]!==e?.openai?.embeddings||t[12]!==e?.openai?.image||t[13]!==e?.openai?.transcription?(B=e?.openai?.chat?T.length>0&&T.some(XD):e?.openai?.image?A.trim().length>0:e?.openai?.transcription?I.length>0:e?.openai?.embeddings?O.trim().length>0:M.trim().length>0,t[5]=M,t[6]=T,t[7]=O,t[8]=A,t[9]=I,t[10]=e?.openai?.chat,t[11]=e?.openai?.embeddings,t[12]=e?.openai?.image,t[13]=e?.openai?.transcription,t[14]=B):B=t[14];const U=B,K=f==="rest"?d.length>0:f==="mcp"?d.length>0&&x:f==="openai"?d.length>0&&C.length>0&&U:y.length>0&&g.length>0&&v.length>0;let j;t[15]!==n?(j=()=>{n()},t[15]=n,t[16]=j):j=t[16];const J=j,ne=u||!K;let he;t[17]!==u?(he=u?w.jsxs("svg",{className:"w-4 h-4 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[w.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"3"}),w.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):w.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14 5l7 7m0 0l-7 7m7-7H3"})}),t[17]=u,t[18]=he):he=t[18];let Y;t[19]!==J||t[20]!==ne||t[21]!==he?(Y=w.jsx("button",{type:"button",onClick:J,disabled:ne,className:"p-1.5 hover:bg-neutral-100 dark:hover:bg-white/10 disabled:opacity-30 disabled:cursor-not-allowed rounded-md transition-colors text-neutral-500 dark:text-neutral-400 hover:text-neutral-700 dark:hover:text-neutral-200",title:"Send request",children:he}),t[19]=J,t[20]=ne,t[21]=he,t[22]=Y):Y=t[22];let q;t[23]!==r||t[24]!==s?(q=l&&w.jsx("button",{type:"button",onClick:s,className:`p-1.5 hover:bg-neutral-100 dark:hover:bg-white/10 rounded-md transition-colors ${r?"text-amber-500 hover:text-amber-600":"text-neutral-500 dark:text-neutral-400 hover:text-neutral-700 dark:hover:text-neutral-200"}`,title:"AI Assistant",children:w.jsx(Wa,{className:"w-4 h-4"})}),t[23]=r,t[24]=s,t[25]=q):q=t[25];let P;return t[26]!==Y||t[27]!==q?(P=w.jsxs(L3,{children:[Y,q]}),t[26]=Y,t[27]=q,t[28]=P):P=t[28],P}function XD(t){return t.content.length>0}function WD(t){const e=t.match(/^grpc:\/\/([^/]*)(?:\/([^/]*)(?:\/([^/]*))?)?$/);return e?{host:e[1]||"",service:e[2]||"",method:e[3]||""}:{host:"",service:"",method:""}}const ej=["GET","POST","PUT","PATCH","DELETE","OPTIONS","HEAD"],tj={GET:"text-emerald-600 dark:text-emerald-400",POST:"text-amber-600 dark:text-amber-400",PUT:"text-blue-600 dark:text-blue-400",PATCH:"text-purple-600 dark:text-purple-400",DELETE:"text-rose-600 dark:text-rose-400",OPTIONS:"text-neutral-500 dark:text-neutral-400",HEAD:"text-neutral-500 dark:text-neutral-400"};function nj(){const t=qe.c(15),{request:e,setUrl:n,setMethod:r}=gn(),s=e?.http?.method??"GET",a=e?.url??"";let l;t[0]!==r?(l=g=>r(g.target.value),t[0]=r,t[1]=l):l=t[1];const u=`px-2 py-1 bg-transparent font-semibold text-xs focus:outline-none cursor-pointer ${tj[s]}`;let f;t[2]===Symbol.for("react.memo_cache_sentinel")?(f=ej.map(rj),t[2]=f):f=t[2];let d;t[3]!==s||t[4]!==l||t[5]!==u?(d=w.jsx("select",{value:s,onChange:l,className:u,children:f}),t[3]=s,t[4]=l,t[5]=u,t[6]=d):d=t[6];let m;t[7]!==n?(m=g=>n(g.target.value),t[7]=n,t[8]=m):m=t[8];let p;t[9]!==m||t[10]!==a?(p=w.jsx("input",{type:"text",value:a,onChange:m,placeholder:"Enter request URL",className:"flex-1 px-3 py-1.5 bg-transparent text-neutral-800 dark:text-neutral-100 text-sm placeholder-neutral-400 dark:placeholder-neutral-600 focus:outline-none"}),t[9]=m,t[10]=a,t[11]=p):p=t[11];let y;return t[12]!==d||t[13]!==p?(y=w.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[d,p]}),t[12]=d,t[13]=p,t[14]=y):y=t[14],y}function rj(t){return w.jsx("option",{value:t,className:"bg-white dark:bg-[#1a1a1a]",children:t},t)}function $w(t){const e=[],n=/\{\{(\w+):([^{}]+)\}\}/g;let r;for(;(r=n.exec(t))!==null;)e.push({start:r.index,end:r.index+r[0].length,type:r[1],id:r[2],full:r[0]});return e}function Xu(t){if(t.nodeType===Node.TEXT_NODE)return(t.textContent||"").replace(/\u200B/g,"");if(t.classList?.contains("variable-chip"))return t.dataset.marker||"";if(t.tagName==="BR")return`
`;let e="";const n=t.tagName==="DIV"||t.tagName==="P";for(const r of t.childNodes)e+=Xu(r);return n&&e&&!e.endsWith(`
`)&&(e+=`
`),e}function Uk(t,e){if(e.rangeCount===0)return"";const n=e.getRangeAt(0),r=n.startContainer,s=n.startOffset;let a="",l=!1;function u(f){if(!l){if(f===r)if(f.nodeType===Node.TEXT_NODE){a+=(f.textContent||"").slice(0,s).replace(/\u200B/g,""),l=!0;return}else{const d=f.childNodes;for(let m=0;m<s;m++)if(u(d[m]),l)return;l=!0;return}if(f.nodeType===Node.TEXT_NODE)a+=(f.textContent||"").replace(/\u200B/g,"");else if(f.nodeType===Node.ELEMENT_NODE){const d=f;if(d.classList.contains("variable-chip")){if(d.contains(r)){l=!0;return}a+=d.dataset.marker||""}else if(d.tagName==="BR")a+=`
`;else if(d.tagName==="DIV"||d.tagName==="P"){for(const m of Array.from(d.childNodes))if(u(m),l)return;a&&!a.endsWith(`
`)&&(a+=`
`)}else for(const m of Array.from(d.childNodes))if(u(m),l)return}}}return u(t),a}function sj(t){const e=window.getSelection();return!e||e.rangeCount===0||!t.contains(e.anchorNode)?null:Uk(t,e).length}function ij(t,e){let n=0,r=!1;function s(a){if(!r){if(a.nodeType===Node.TEXT_NODE){const l=a.textContent||"",f=l.replace(/\u200B/g,"").length;if(n+f>=e){const d=e-n;let m=0,p=0;for(;p<d&&m<l.length;)l[m]!==""&&p++,m++;const y=document.createRange();y.setStart(a,m),y.setEnd(a,m);const g=window.getSelection();g?.removeAllRanges(),g?.addRange(y),r=!0;return}n+=f}else if(a.nodeType===Node.ELEMENT_NODE){const l=a;if(l.classList.contains("variable-chip")){const u=(l.dataset.marker||"").length;n+=u}else if(l.tagName==="BR")n+=1;else{const u=l.tagName==="DIV"||l.tagName==="P";for(const f of Array.from(a.childNodes))if(s(f),r)return;u&&n<e&&(n+=1)}}}}s(t)}function aj(t,e,n){switch(t){case"file_base64":case"file_dataurl":return n?.data?n.name||"file":"Select file...";case"base64":if(n?.data){const r=n.data;return r.length>12?r.slice(0,12)+"":r}return"Enter text...";default:return n?.name||t}}function oj(t){const e="w-3 h-3";switch(t){case"file_base64":case"file_dataurl":return`<svg class="${e}" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/></svg>`;case"base64":return`<svg class="${e}" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="4" y1="9" x2="20" y2="9"/><line x1="4" y1="15" x2="20" y2="15"/><line x1="10" y1="3" x2="8" y2="21"/><line x1="16" y1="3" x2="14" y2="21"/></svg>`;case"timestamp":return`<svg class="${e}" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>`;case"uuid":return`<svg class="${e}" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"/><path d="M5 3v4"/><path d="M9 5H1"/></svg>`;case"random_string":return`<svg class="${e}" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M2 18h1.4c1.3 0 2.5-.6 3.3-1.7l14.2-12.6c.8-1.1 2-1.7 3.3-1.7H22"/><path d="M2 6h1.4c1.3 0 2.5.6 3.3 1.7l14.2 12.6c.8 1.1 2 1.7 3.3 1.7H22"/></svg>`;default:return""}}function Uw(t,e,n,r){const s=r.find(m=>m.type===t&&m.id===e),a=t==="file_base64"||t==="file_dataurl"||t==="base64",l=s&&s.data,u=document.createElement("span");u.contentEditable="false",u.className=`variable-chip inline-flex items-center gap-1 px-1.5 py-0.5 mx-0.5 rounded text-xs font-medium align-baseline select-none ${a&&!l?"bg-amber-500/20 text-amber-300 border border-amber-500/30":"bg-blue-500/20 text-blue-300 border border-blue-500/30"} ${a?"cursor-pointer hover:bg-blue-500/30":""}`,u.dataset.marker=n,u.dataset.variableType=t,u.dataset.variableId=e;const f=document.createElement("span");f.className="chip-icon",f.innerHTML=oj(t),u.appendChild(f);const d=document.createElement("span");return d.className="chip-label",d.textContent=aj(t,e,s),u.appendChild(d),u}function qk(t){const e=qe.c(40),{editorRef:n,value:r,onChange:s,variables:a,onVariablesChange:l,indentTriggers:u}=t;let f;e[0]!==u?(f=u===void 0?["{","["]:u,e[0]=u,e[1]=f):f=e[1];const d=f,m=G.useRef(""),p=G.useRef(!1),y=G.useRef(!1);let g;e[2]!==s||e[3]!==l||e[4]!==a?(g=re=>{const N=Xu(re);m.current=N,p.current=!0,s(N);const D=new Set($w(N).map(uj)),V=a.filter(S=>D.has(S.id));V.length!==a.length&&(y.current=!0,l(V))},e[2]=s,e[3]=l,e[4]=a,e[5]=g):g=e[5];const v=g,[x,C]=G.useState(!1);let k;e[6]===Symbol.for("react.memo_cache_sentinel")?(k={top:0,left:0},e[6]=k):k=e[6];const[T,A]=G.useState(k),M=cj;let I;e[7]!==n||e[8]!==r||e[9]!==a?(I=()=>{const re=n.current;if(!re)return;const N=sj(re),D=$w(r);re.innerHTML="";let V=0;for(const z of D){const le=r.slice(V,z.start);le&&M(re,le);const de=Uw(z.type,z.id,z.full,a);re.appendChild(de),re.appendChild(document.createTextNode("")),V=z.end}const S=r.slice(V);S&&M(re,S),re.childNodes.length===0&&re.appendChild(document.createElement("br")),m.current=r,N!==null&&ij(re,N)},e[7]=n,e[8]=r,e[9]=a,e[10]=I):I=e[10];const O=I;let B,U;e[11]!==O||e[12]!==r?(B=()=>{!p.current&&r!==m.current&&O(),p.current=!1},U=[r,O],e[11]=O,e[12]=r,e[13]=B,e[14]=U):(B=e[13],U=e[14]),G.useEffect(B,U);let K;e[15]!==O?(K=()=>{y.current?y.current=!1:O()},e[15]=O,e[16]=K):K=e[16];let j;e[17]!==O||e[18]!==a?(j=[a,O],e[17]=O,e[18]=a,e[19]=j):j=e[19],G.useEffect(K,j);let J;e[20]!==n||e[21]!==v?(J=()=>{const re=n.current;if(!re)return;const N=Xu(re),D=window.getSelection();if(D&&D.rangeCount>0){const V=D.getRangeAt(0);if(V.startContainer.nodeType===Node.TEXT_NODE){const S=V.startContainer.textContent||"",z=V.startOffset;if(z>=2&&S.slice(z-2,z)==="{{"){const le=V.getBoundingClientRect();A({top:le.bottom+4,left:le.left}),C(!0)}else C(!1)}}N!==m.current&&v(re)},e[20]=n,e[21]=v,e[22]=J):J=e[22];const ne=J,he=lj;let Y;e[23]!==n||e[24]!==d||e[25]!==x||e[26]!==v?(Y=re=>{if(x){re.key==="Escape"&&(C(!1),re.preventDefault());return}if(re.key==="Backspace"){const N=window.getSelection();if(N&&N.rangeCount>0&&N.isCollapsed){const D=N.getRangeAt(0),V=D.startContainer,S=D.startOffset;if(V.nodeType===Node.TEXT_NODE&&S===1&&V.textContent?.charAt(0)===""){const z=V.previousSibling;if(z&&z.classList?.contains("variable-chip")){re.preventDefault();const le=z,de=le.parentNode;de?.removeChild(le),de?.removeChild(V);const ye=n.current;ye&&v(ye);return}}if(S===0){let z=V.previousSibling;if(z?.nodeType===Node.TEXT_NODE&&z.textContent===""&&(z=z.previousSibling),z&&z.classList?.contains("variable-chip")){re.preventDefault();const le=z,de=le.nextSibling,ye=le.parentNode;ye?.removeChild(le),de?.nodeType===Node.TEXT_NODE&&de.textContent===""&&ye?.removeChild(de);const _e=n.current;_e&&v(_e);return}}}}if(re.key==="Tab"&&(re.preventDefault(),document.execCommand("insertText",!1,"  ")),re.key==="Enter"){re.preventDefault();const N=n.current,D=window.getSelection();let V="";if(N&&D&&D.rangeCount>0){const le=Uk(N,D),de=le.lastIndexOf(`
`),ye=le.slice(de+1),_e=ye.match(/^(\s*)/);V=_e?_e[1]:"";const Pe=ye.trimEnd().slice(-1);d.includes(Pe)&&(V=V+"  ")}const S=document.createElement("br"),z=D?.getRangeAt(0);z&&(z.deleteContents(),z.insertNode(S),z.setStartAfter(S),z.setEndAfter(S),D?.removeAllRanges(),D?.addRange(z),V&&document.execCommand("insertText",!1,V))}},e[23]=n,e[24]=d,e[25]=x,e[26]=v,e[27]=Y):Y=e[27];const q=Y;let P;e[28]!==n||e[29]!==s||e[30]!==l||e[31]!==a?(P=re=>{C(!1);const N=n.current;if(!N)return;const D=window.getSelection();if(!D||D.rangeCount===0)return;const V=D.getRangeAt(0);if(V.startContainer.nodeType!==Node.TEXT_NODE)return;const S=V.startContainer,z=V.startOffset,le=S.textContent||"";S.textContent=le.slice(0,z-2)+le.slice(z);const de=Math.random().toString(36).substring(2,9),ye=re==="file_base64"||re==="file_dataurl"?"file":re,_e=`{{${re}:${de}}}`,ve=Uw(re,de,_e,a),Pe=z-2;V.setStart(S,Pe),V.setEnd(S,Pe),V.insertNode(ve);const tt=document.createTextNode("");ve.after(tt),V.setStart(tt,1),V.setEnd(tt,1),D.removeAllRanges(),D.addRange(V),y.current=!0,l([...a,{id:de,type:re,name:ye}]);const kt=Xu(N);return m.current=kt,p.current=!0,s(kt),de},e[28]=n,e[29]=s,e[30]=l,e[31]=a,e[32]=P):P=e[32];const H=P;let ie;return e[33]!==O||e[34]!==ne||e[35]!==q||e[36]!==H||e[37]!==x||e[38]!==T?(ie={handleInput:ne,handlePaste:he,handleKeyDown:q,insertVariable:H,showTypeMenu:x,setShowTypeMenu:C,typeMenuPosition:T,buildDOM:O},e[33]=O,e[34]=ne,e[35]=q,e[36]=H,e[37]=x,e[38]=T,e[39]=ie):ie=e[39],ie}function lj(t){t.preventDefault();const e=t.clipboardData.getData("text/plain");document.execCommand("insertText",!1,e)}function cj(t,e){e.split(`
`).forEach((r,s)=>{s>0&&t.appendChild(document.createElement("br")),r&&t.appendChild(document.createTextNode(r))})}function uj(t){return t.id}const fj=[{type:"file_base64",label:"File (Base64)",description:"Select a file to encode",icon:w.jsx(Sf,{className:"w-3.5 h-3.5"})},{type:"file_dataurl",label:"File (Data URL)",description:"File as data:... URL",icon:w.jsx(Sf,{className:"w-3.5 h-3.5"})},{type:"base64",label:"Text (Base64)",description:"Text to encode",icon:w.jsx(Bk,{className:"w-3.5 h-3.5"})},{type:"timestamp",label:"Timestamp",description:"Unix timestamp",icon:w.jsx(Rl,{className:"w-3.5 h-3.5"})},{type:"uuid",label:"UUID",description:"Random UUID",icon:w.jsx(Wa,{className:"w-3.5 h-3.5"})},{type:"random_string",label:"Random String",description:"16-char random",icon:w.jsx($k,{className:"w-3.5 h-3.5"})}];function Iy({value:t,onChange:e,variables:n,onVariablesChange:r,placeholder:s,action:a}){const l=G.useRef(null),u=G.useRef(null),{handleInput:f,handlePaste:d,handleKeyDown:m,insertVariable:p,showTypeMenu:y,setShowTypeMenu:g,typeMenuPosition:v,buildDOM:x}=qk({editorRef:l,value:t,onChange:e,variables:n,onVariablesChange:r,indentTriggers:["{","["]}),[C,k]=G.useState(null),[T,A]=G.useState(""),M=G.useRef(!1),I=G.useRef(null),O=G.useMemo(()=>{if(!t.trim())return{valid:!0,empty:!0};try{let q=t;return q=q.replace(/"\{\{[^{}]+\}\}"/g,'"__var__"'),q=q.replace(/\{\{[^{}]+\}\}/g,"null"),JSON.parse(q),{valid:!0,empty:!1}}catch(q){return{valid:!1,empty:!1,error:q instanceof Error?q.message:"Invalid JSON"}}},[t]),[B,U]=G.useState(!1),K=G.useMemo(()=>wf(t,n,{missingDataPlaceholder:"[no data]"}),[t,n]);G.useEffect(()=>(I.current&&(clearTimeout(I.current),I.current=null),O.valid&&!O.empty&&M.current&&(I.current=setTimeout(()=>{try{let q=t;q=q.replace(/"\{\{[^{}]+\}\}"/g,'"__var__"'),q=q.replace(/\{\{[^{}]+\}\}/g,"null"),JSON.parse(q);const P=new Map;let H=t,ie=0;H=H.replace(/"\{\{[^{}]+\}\}"/g,D=>{const V=`"__VAR_${ie++}__"`;return P.set(V,D),V}),H=H.replace(/\{\{[^{}]+\}\}/g,D=>{const V=`"__VAR_${ie++}__"`;return P.set(V,D),V});const re=JSON.parse(H);let N=JSON.stringify(re,null,2);N=N.replace(/\{\}/g,`{
}`),N=N.replace(/\[\]/g,`[
]`),P.forEach((D,V)=>{N=N.replace(V,D)}),N!==t&&e(N)}catch{}},500)),M.current=!O.valid,()=>{I.current&&clearTimeout(I.current)}),[O.valid,O.empty,t,e]),G.useEffect(()=>{B||x()},[B,x]);const j=G.useCallback((q,P)=>{const H=document.createElement("input");H.type="file",H.onchange=ie=>{const re=ie.target.files?.[0];if(!re)return;const N=new FileReader;N.onload=()=>{const D=N.result.split(",")[1],V=n.find(S=>S.id===P);r(V?n.map(S=>S.id===V.id?{...S,data:D,mimeType:re.type,name:re.name}:S):[...n,{id:P,type:q,name:re.name,data:D,mimeType:re.type}])},N.readAsDataURL(re)},H.click()},[n,r]),J=G.useCallback(q=>{const H=q.target.closest(".variable-chip");if(H){const ie=H.dataset.variableType,re=H.dataset.variableId;if(ie==="file_base64"||ie==="file_dataurl")j(ie,re),q.preventDefault(),q.stopPropagation();else if(ie==="base64"){const N=H.getBoundingClientRect(),D=n.find(V=>V.id===re);A(D?.data||""),k({variableKey:`${ie}:${re}`,rect:N}),q.preventDefault(),q.stopPropagation()}}else k(null)},[n,j]),ne=G.useCallback(q=>{const P=p(q);P&&(q==="file_base64"||q==="file_dataurl")&&setTimeout(()=>j(q,P),0)},[p,j]),he=G.useCallback(()=>{if(!C)return;const[q,P]=C.variableKey.split(":"),H=n.find(ie=>ie.id===P);r(H?n.map(ie=>ie.id===H.id?{...ie,data:T}:ie):[...n,{id:P,type:q,name:q,data:T}]),k(null),l.current?.focus()},[C,T,n,r]);G.useEffect(()=>{const q=H=>{H.key==="Escape"&&(g(!1),k(null))},P=H=>{u.current&&!u.current.contains(H.target)&&(g(!1),k(null))};return document.addEventListener("keydown",q),document.addEventListener("mousedown",P),()=>{document.removeEventListener("keydown",q),document.removeEventListener("mousedown",P)}},[g]);const Y=G.useMemo(()=>{if(!C||!u.current)return{top:0,left:0};const q=u.current.getBoundingClientRect();return{top:C.rect.bottom-q.top+4,left:Math.max(0,C.rect.left-q.left)}},[C]);return w.jsxs("div",{ref:u,className:"flex flex-col h-full min-h-50 max-h-[60vh] relative overflow-hidden",children:[B?w.jsx("pre",{className:"flex-1 min-h-0 p-3 font-mono text-sm text-zinc-100 overflow-y-auto whitespace-pre-wrap wrap-break-word",children:K}):w.jsxs("div",{className:"flex-1 min-h-0 relative",children:[w.jsx("div",{ref:l,contentEditable:!0,suppressContentEditableWarning:!0,onInput:f,onPaste:d,onKeyDown:m,onClick:J,className:"h-full p-3 font-mono text-sm text-zinc-100 outline-none overflow-y-auto whitespace-pre-wrap wrap-break-word"}),!t&&s&&w.jsx("div",{className:"absolute top-3 left-3 font-mono text-sm text-zinc-500 pointer-events-none whitespace-pre-wrap",children:s})]}),w.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 text-xs shrink-0",children:[a&&w.jsx("button",{type:"button",onClick:a.onClick,className:"text-[11px] px-2 py-0.5 rounded bg-zinc-700 hover:bg-zinc-600 text-zinc-200 transition-colors",children:a.label}),w.jsx("div",{className:"flex-1"}),w.jsx("button",{onClick:()=>U(!B),className:`transition-colors flex items-center gap-1 ${B?"text-blue-400 hover:text-blue-300":"text-zinc-500 hover:text-zinc-300"}`,title:B?"Show editor":"Show resolved JSON",children:w.jsx(Pk,{className:"w-3.5 h-3.5"})}),O.valid?w.jsx("span",{className:"text-emerald-500",children:"Valid JSON"}):w.jsx("span",{className:"text-red-400",title:O.error,children:"Invalid JSON"})]}),y&&w.jsx("div",{className:"fixed z-50 w-56 bg-zinc-800 border border-zinc-600 rounded-lg shadow-xl py-1",style:{top:v.top,left:v.left},children:fj.map(q=>w.jsxs("button",{onClick:()=>ne(q.type),className:"w-full flex items-center gap-2 px-3 py-2 text-left hover:bg-zinc-700 transition-colors",children:[w.jsx("span",{className:"text-zinc-400",children:q.icon}),w.jsxs("div",{className:"flex-1 min-w-0",children:[w.jsx("div",{className:"text-sm text-zinc-200",children:q.label}),w.jsx("div",{className:"text-xs text-zinc-500",children:q.description})]})]},q.type))}),C&&(()=>{const[q]=C.variableKey.split(":");return w.jsx("div",{className:"absolute z-50 bg-zinc-800/95 border border-zinc-700/50 rounded shadow-lg p-1.5 w-44",style:Y,children:q==="base64"?w.jsxs("div",{className:"flex gap-1",children:[w.jsx("input",{type:"text",value:T,onChange:P=>A(P.target.value),onKeyDown:P=>P.key==="Enter"&&he(),placeholder:"Text to encode...",className:"flex-1 min-w-0 px-1.5 py-0.5 text-xs bg-transparent text-zinc-200 rounded border-none focus:outline-none placeholder:text-zinc-500",autoFocus:!0}),w.jsx("button",{onClick:he,className:"p-1 text-zinc-400 hover:text-zinc-200 transition-colors",children:w.jsx(jk,{className:"w-3 h-3"})})]}):null})})()]})}const dj=[{type:"file_base64",label:"File (Base64)",description:"Select a file to encode",icon:w.jsx(Sf,{className:"w-3.5 h-3.5"})},{type:"file_dataurl",label:"File (Data URL)",description:"File as data:... URL",icon:w.jsx(Sf,{className:"w-3.5 h-3.5"})},{type:"base64",label:"Text (Base64)",description:"Text to encode",icon:w.jsx(Bk,{className:"w-3.5 h-3.5"})},{type:"timestamp",label:"Timestamp",description:"Unix timestamp",icon:w.jsx(Rl,{className:"w-3.5 h-3.5"})},{type:"uuid",label:"UUID",description:"Random UUID",icon:w.jsx(Wa,{className:"w-3.5 h-3.5"})},{type:"random_string",label:"Random String",description:"16-char random",icon:w.jsx($k,{className:"w-3.5 h-3.5"})}];function hj(t){if(!t.trim())return{valid:!0};try{const r=new DOMParser().parseFromString(t,"application/xml").querySelector("parsererror");if(r){const s=r.textContent||"Invalid XML",a=s.match(/error[^:]*:\s*(.+)/i);return{valid:!1,error:a?a[1].trim():s.split(`
`)[0]}}return{valid:!0}}catch(e){return{valid:!1,error:e instanceof Error?e.message:"Invalid XML"}}}function pj(t){try{const n=new DOMParser().parseFromString(t,"application/xml");if(n.querySelector("parsererror"))return t;const s=new XMLSerializer().serializeToString(n);let a="",l=0;const u=s.replace(/></g,`>
<`).split(`
`);for(const f of u){const d=f.trim();d&&(d.startsWith("</")&&(l=Math.max(0,l-1)),a+="  ".repeat(l)+d+`
`,d.startsWith("<")&&!d.startsWith("</")&&!d.startsWith("<?")&&!d.endsWith("/>")&&l++)}return a.trim()}catch{return t}}function mj({value:t,onChange:e,variables:n,onVariablesChange:r,placeholder:s}){const a=G.useRef(null),l=G.useRef(null),{handleInput:u,handlePaste:f,handleKeyDown:d,insertVariable:m,showTypeMenu:p,setShowTypeMenu:y,typeMenuPosition:g,buildDOM:v}=qk({editorRef:a,value:t,onChange:e,variables:n,onVariablesChange:r,indentTriggers:[">","{","["]}),[x,C]=G.useState(null),[k,T]=G.useState(""),A=G.useRef(!1),M=G.useRef(null),I=G.useMemo(()=>{if(!t.trim())return{valid:!0,empty:!0};let Y=t;return Y=Y.replace(/\{\{[^{}]+\}\}/g,"PLACEHOLDER"),{...hj(Y),empty:!1}},[t]),[O,B]=G.useState(!1),U=G.useMemo(()=>wf(t,n,{missingDataPlaceholder:"[no data]"}),[t,n]);G.useEffect(()=>(M.current&&(clearTimeout(M.current),M.current=null),I.valid&&!I.empty&&A.current&&(M.current=setTimeout(()=>{const Y=new Map;let q=t,P=0;q=q.replace(/\{\{[^{}]+\}\}/g,ie=>{const re=`__VAR_${P++}__`;return Y.set(re,ie),re});let H=pj(q);Y.forEach((ie,re)=>{H=H.replace(re,ie)}),H!==t&&e(H)},500)),A.current=!I.valid,()=>{M.current&&clearTimeout(M.current)}),[I.valid,I.empty,t,e]),G.useEffect(()=>{O||v()},[O,v]);const K=G.useCallback((Y,q)=>{const P=document.createElement("input");P.type="file",P.onchange=H=>{const ie=H.target.files?.[0];if(!ie)return;const re=new FileReader;re.onload=()=>{const N=re.result.split(",")[1],D=n.find(V=>V.id===q);r(D?n.map(V=>V.id===D.id?{...V,data:N,mimeType:ie.type,name:ie.name}:V):[...n,{id:q,type:Y,name:ie.name,data:N,mimeType:ie.type}])},re.readAsDataURL(ie)},P.click()},[n,r]),j=G.useCallback(Y=>{const P=Y.target.closest(".variable-chip");if(P){const H=P.dataset.variableType,ie=P.dataset.variableId;if(H==="file_base64"||H==="file_dataurl")K(H,ie),Y.preventDefault(),Y.stopPropagation();else if(H==="base64"){const re=P.getBoundingClientRect(),N=n.find(D=>D.id===ie);T(N?.data||""),C({variableKey:`${H}:${ie}`,rect:re}),Y.preventDefault(),Y.stopPropagation()}}else C(null)},[n,K]),J=G.useCallback(Y=>{const q=m(Y);q&&(Y==="file_base64"||Y==="file_dataurl")&&setTimeout(()=>K(Y,q),0)},[m,K]),ne=G.useCallback(()=>{if(!x)return;const[Y,q]=x.variableKey.split(":"),P=n.find(H=>H.id===q);r(P?n.map(H=>H.id===P.id?{...H,data:k}:H):[...n,{id:q,type:Y,name:Y,data:k}]),C(null),a.current?.focus()},[x,k,n,r]);G.useEffect(()=>{const Y=P=>{P.key==="Escape"&&(y(!1),C(null))},q=P=>{l.current&&!l.current.contains(P.target)&&(y(!1),C(null))};return document.addEventListener("keydown",Y),document.addEventListener("mousedown",q),()=>{document.removeEventListener("keydown",Y),document.removeEventListener("mousedown",q)}},[y]);const he=G.useMemo(()=>{if(!x||!l.current)return{top:0,left:0};const Y=l.current.getBoundingClientRect();return{top:x.rect.bottom-Y.top+4,left:Math.max(0,x.rect.left-Y.left)}},[x]);return w.jsxs("div",{ref:l,className:"flex flex-col h-full min-h-50 max-h-[60vh] relative overflow-hidden",children:[O?w.jsx("pre",{className:"flex-1 min-h-0 p-3 font-mono text-sm text-zinc-100 overflow-y-auto whitespace-pre-wrap wrap-break-word",children:U}):w.jsxs("div",{className:"flex-1 min-h-0 relative",children:[w.jsx("div",{ref:a,contentEditable:!0,suppressContentEditableWarning:!0,onInput:u,onPaste:f,onKeyDown:d,onClick:j,className:"h-full p-3 font-mono text-sm text-zinc-100 outline-none overflow-y-auto whitespace-pre-wrap wrap-break-word"}),!t&&s&&w.jsx("div",{className:"absolute top-3 left-3 font-mono text-sm text-zinc-500 pointer-events-none whitespace-pre-wrap",children:s})]}),w.jsxs("div",{className:"flex items-center justify-end gap-2 px-3 py-1.5 text-xs shrink-0",children:[w.jsx("button",{onClick:()=>B(!O),className:`transition-colors flex items-center gap-1 ${O?"text-blue-400 hover:text-blue-300":"text-zinc-500 hover:text-zinc-300"}`,title:O?"Show editor":"Show resolved XML",children:w.jsx(Pk,{className:"w-3.5 h-3.5"})}),I.valid?w.jsx("span",{className:"text-emerald-500",children:"Valid XML"}):w.jsx("span",{className:"text-red-400",title:I.error,children:"Invalid XML"})]}),p&&w.jsx("div",{className:"fixed z-50 w-56 bg-zinc-800 border border-zinc-600 rounded-lg shadow-xl py-1",style:{top:g.top,left:g.left},children:dj.map(Y=>w.jsxs("button",{onClick:()=>J(Y.type),className:"w-full flex items-center gap-2 px-3 py-2 text-left hover:bg-zinc-700 transition-colors",children:[w.jsx("span",{className:"text-zinc-400",children:Y.icon}),w.jsxs("div",{className:"flex-1 min-w-0",children:[w.jsx("div",{className:"text-sm text-zinc-200",children:Y.label}),w.jsx("div",{className:"text-xs text-zinc-500",children:Y.description})]})]},Y.type))}),x&&(()=>{const[Y]=x.variableKey.split(":");return w.jsx("div",{className:"absolute z-50 bg-zinc-800/95 border border-zinc-700/50 rounded shadow-lg p-1.5 w-44",style:he,children:Y==="base64"?w.jsxs("div",{className:"flex gap-1",children:[w.jsx("input",{type:"text",value:k,onChange:q=>T(q.target.value),onKeyDown:q=>q.key==="Enter"&&ne(),placeholder:"Text to encode...",className:"flex-1 min-w-0 px-1.5 py-0.5 text-xs bg-transparent text-zinc-200 rounded border-none focus:outline-none placeholder:text-zinc-500",autoFocus:!0}),w.jsx("button",{onClick:ne,className:"p-1 text-zinc-400 hover:text-zinc-200 transition-colors",children:w.jsx(jk,{className:"w-3 h-3"})})]}):null})})()]})}function gj(t){const e=qe.c(9),{value:n,onChange:r,placeholder:s}=t,a=G.useRef(null);let l;e[0]===Symbol.for("react.memo_cache_sentinel")?(l=()=>{const m=a.current;if(!m)return;m.style.height="auto";const p=Math.min(m.scrollHeight,160);m.style.height=`${p}px`},e[0]=l):l=e[0];let u;e[1]!==n?(u=[n],e[1]=n,e[2]=u):u=e[2],G.useEffect(l,u);let f;e[3]!==r?(f=m=>r(m.target.value),e[3]=r,e[4]=f):f=e[4];let d;return e[5]!==s||e[6]!==f||e[7]!==n?(d=w.jsx("textarea",{ref:a,value:n,onChange:f,placeholder:s,spellCheck:!1,rows:3,className:"w-full font-mono text-xs text-neutral-800 dark:text-neutral-100 bg-transparent focus:outline-none placeholder-neutral-400 dark:placeholder-neutral-600 resize-none overflow-auto"}),e[5]=s,e[6]=f,e[7]=n,e[8]=d):d=e[8],d}function qw(){return Math.random().toString(36).substring(2,9)}function Ol(t){const e=qe.c(32),{items:n,onChange:r,keyPlaceholder:s,valuePlaceholder:a,keySuggestions:l}=t,u=s===void 0?"Key":s,f=a===void 0?"Value":a;let d;e[0]!==l?(d=l===void 0?[]:l,e[0]=l,e[1]=d):d=e[1];const m=d,[p,y]=G.useState(null),[g,v]=G.useState("");let x;e[2]!==n||e[3]!==r?(x=(B,U,K)=>{const j=n.map(ne=>ne.id===B?{...ne,[U]:K}:ne),J=j[j.length-1];J&&(J.key||J.value)&&j.push({id:qw(),enabled:!0,key:"",value:""}),r(j)},e[2]=n,e[3]=r,e[4]=x):x=e[4];const C=x;let k;e[5]!==n||e[6]!==r?(k=B=>{if(n.length===1){r([{id:qw(),enabled:!0,key:"",value:""}]);return}r(n.filter(U=>U.id!==B))},e[5]=n,e[6]=r,e[7]=k):k=e[7];const T=k;let A;e[8]!==n||e[9]!==m?(A=B=>{const U=n.map(yj);return m.filter(K=>K.toLowerCase().includes(B.toLowerCase())&&!U.includes(K.toLowerCase()))},e[8]=n,e[9]=m,e[10]=A):A=e[10];const M=A;let I;if(e[11]!==p||e[12]!==g||e[13]!==M||e[14]!==n||e[15]!==u||e[16]!==m||e[17]!==T||e[18]!==C||e[19]!==f){let B;e[21]!==p||e[22]!==g||e[23]!==M||e[24]!==u||e[25]!==m||e[26]!==T||e[27]!==C||e[28]!==f?(B=U=>w.jsxs("tr",{className:`border-b border-neutral-100 dark:border-white/5 last:border-0 ${U.enabled?"":"opacity-40"}`,children:[w.jsx("td",{className:"w-8 pl-2.5 py-1.5",children:w.jsx("button",{type:"button",onClick:()=>C(U.id,"enabled",!U.enabled),className:"p-0.5 rounded transition-colors",children:U.enabled?w.jsx(Oy,{className:"w-3.5 h-3.5 text-neutral-700 dark:text-neutral-300"}):w.jsx(zk,{className:"w-3.5 h-3.5 text-neutral-300 dark:text-neutral-600"})})}),w.jsx("td",{className:"px-1.5 py-1.5",children:w.jsxs("div",{className:"relative",children:[w.jsx("input",{type:"text",value:U.key,onChange:K=>{C(U.id,"key",K.target.value),v(K.target.value)},onFocus:()=>{y(U.id),v(U.key)},onBlur:()=>{setTimeout(()=>y(null),150)},placeholder:u,className:"w-full px-2 py-1 bg-white dark:bg-white/5 border border-neutral-300 dark:border-white/10 rounded text-xs text-neutral-800 dark:text-neutral-100 placeholder-neutral-400 dark:placeholder-neutral-500 focus:outline-none focus:border-neutral-400 dark:focus:border-white/20 transition-colors"}),m.length>0&&p===U.id&&(()=>{const K=M(g);return K.length===0?null:w.jsx("div",{className:"absolute z-50 left-0 right-0 top-full mt-1 bg-white dark:bg-[#1a1a1a] border border-neutral-200 dark:border-white/10 rounded-md shadow-lg max-h-48 overflow-y-auto",children:K.map(j=>w.jsx("button",{type:"button",onMouseDown:J=>{J.preventDefault(),C(U.id,"key",j),y(null)},className:"w-full px-2 py-1.5 text-left text-xs text-neutral-600 dark:text-neutral-300 hover:bg-neutral-100 dark:hover:bg-white/10 transition-colors",children:j},j))})})()]})}),w.jsx("td",{className:"px-1.5 py-1.5",children:w.jsx("input",{type:"text",value:U.value,onChange:K=>C(U.id,"value",K.target.value),placeholder:f,className:"w-full px-2 py-1 bg-white dark:bg-white/5 border border-neutral-300 dark:border-white/10 rounded text-xs text-neutral-800 dark:text-neutral-100 placeholder-neutral-400 dark:placeholder-neutral-500 focus:outline-none focus:border-neutral-400 dark:focus:border-white/20 transition-colors"})}),w.jsx("td",{className:"w-8 pr-1.5 py-1.5",children:w.jsx("button",{type:"button",onClick:()=>T(U.id),className:"p-1 text-neutral-400 dark:text-neutral-500 hover:text-rose-500 dark:hover:text-rose-400 hover:bg-neutral-100 dark:hover:bg-white/5 rounded transition-colors",children:w.jsx(ic,{className:"w-3.5 h-3.5"})})})]},U.id),e[21]=p,e[22]=g,e[23]=M,e[24]=u,e[25]=m,e[26]=T,e[27]=C,e[28]=f,e[29]=B):B=e[29],I=n.map(B),e[11]=p,e[12]=g,e[13]=M,e[14]=n,e[15]=u,e[16]=m,e[17]=T,e[18]=C,e[19]=f,e[20]=I}else I=e[20];let O;return e[30]!==I?(O=w.jsx("div",{children:w.jsx("table",{className:"w-full",children:w.jsx("tbody",{children:I})})}),e[30]=I,e[31]=O):O=e[31],O}function yj(t){return t.key.toLowerCase()}function bj(){return Math.random().toString(36).substring(2,9)}function Fw(){return{id:bj(),enabled:!0,key:"",type:"text",value:"",file:null,fileName:""}}function _j(t){const e=qe.c(21),{items:n,onChange:r,keyPlaceholder:s,valuePlaceholder:a}=t,l=s===void 0?"Field":s,u=a===void 0?"Value":a;let f;e[0]===Symbol.for("react.memo_cache_sentinel")?(f={},e[0]=f):f=e[0];const d=G.useRef(f);let m;e[1]!==n||e[2]!==r?(m=(I,O)=>{const B=n.map(K=>K.id===I?{...K,...O}:K),U=B[B.length-1];U&&(U.key||U.value||U.file)&&B.push(Fw()),r(B)},e[1]=n,e[2]=r,e[3]=m):m=e[3];const p=m;let y;e[4]!==n||e[5]!==r?(y=I=>{if(n.length===1){r([Fw()]);return}r(n.filter(O=>O.id!==I))},e[4]=n,e[5]=r,e[6]=y):y=e[6];const g=y;let v;e[7]!==p?(v=(I,O)=>{const B=O.target.files?.[0]??null;O.target.value="",B&&p(I,{type:"file",file:B,fileName:B.name,value:""})},e[7]=p,e[8]=v):v=e[8];const x=v;let C;e[9]!==p?(C=I=>{p(I,{type:"text",file:null,fileName:""})},e[9]=p,e[10]=C):C=e[10];const k=C,T=vj;let A;e[11]!==k||e[12]!==x||e[13]!==n||e[14]!==l||e[15]!==g||e[16]!==p||e[17]!==u?(A=n.map(I=>w.jsxs("tr",{className:`border-b border-neutral-100 dark:border-white/5 last:border-0 ${I.enabled?"":"opacity-40"}`,children:[w.jsx("td",{className:"w-8 pl-2.5 py-1.5",children:w.jsx("button",{type:"button",onClick:()=>p(I.id,{enabled:!I.enabled}),className:"p-0.5 rounded transition-colors",children:I.enabled?w.jsx(Oy,{className:"w-3.5 h-3.5 text-neutral-700 dark:text-neutral-300"}):w.jsx(zk,{className:"w-3.5 h-3.5 text-neutral-300 dark:text-neutral-600"})})}),w.jsx("td",{className:"px-1.5 py-1.5 w-36",children:w.jsx("input",{type:"text",value:I.key,onChange:O=>p(I.id,{key:O.target.value}),placeholder:l,className:"w-full px-2 py-1 bg-white dark:bg-white/5 border border-neutral-300 dark:border-white/10 rounded text-xs text-neutral-800 dark:text-neutral-100 placeholder-neutral-400 dark:placeholder-neutral-500 focus:outline-none focus:border-neutral-400 dark:focus:border-white/20 transition-colors"})}),w.jsxs("td",{className:"px-1.5 py-1.5",children:[w.jsx("input",{type:"file",ref:O=>{d.current[I.id]=O},onChange:O=>x(I.id,O),className:"hidden"}),I.type==="file"&&I.file?w.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 bg-neutral-100 dark:bg-white/10 rounded text-xs text-neutral-600 dark:text-neutral-300",children:[w.jsx(Bw,{className:"w-3 h-3 shrink-0"}),w.jsx("span",{className:"truncate max-w-xs",children:I.fileName}),w.jsxs("span",{className:"text-neutral-400 shrink-0",children:["(",T(I.file.size),")"]}),w.jsx("button",{type:"button",onClick:()=>k(I.id),className:"p-0.5 ml-1 text-neutral-400 hover:text-neutral-600 dark:hover:text-neutral-200 transition-colors shrink-0",children:w.jsx(Hl,{className:"w-3 h-3"})})]}):w.jsx("input",{type:"text",value:I.value,onChange:O=>p(I.id,{value:O.target.value}),placeholder:u,className:"w-full px-2 py-1 bg-white dark:bg-white/5 border border-neutral-300 dark:border-white/10 rounded text-xs text-neutral-800 dark:text-neutral-100 placeholder-neutral-400 dark:placeholder-neutral-500 focus:outline-none focus:border-neutral-400 dark:focus:border-white/20 transition-colors"})]}),w.jsx("td",{className:"w-16 pr-1.5 py-1.5",children:w.jsxs("div",{className:"flex items-center gap-0.5",children:[w.jsx("button",{type:"button",onClick:()=>d.current[I.id]?.click(),className:`p-1 rounded transition-colors ${I.type==="file"?"text-blue-500 dark:text-blue-400 bg-blue-50 dark:bg-blue-500/10":"text-neutral-400 dark:text-neutral-500 hover:text-neutral-600 dark:hover:text-neutral-300 hover:bg-neutral-100 dark:hover:bg-white/5"}`,title:"Attach file",children:w.jsx(Bw,{className:"w-3.5 h-3.5"})}),w.jsx("button",{type:"button",onClick:()=>g(I.id),className:"p-1 text-neutral-400 dark:text-neutral-500 hover:text-rose-500 dark:hover:text-rose-400 hover:bg-neutral-100 dark:hover:bg-white/5 rounded transition-colors",children:w.jsx(ic,{className:"w-3.5 h-3.5"})})]})})]},I.id)),e[11]=k,e[12]=x,e[13]=n,e[14]=l,e[15]=g,e[16]=p,e[17]=u,e[18]=A):A=e[18];let M;return e[19]!==A?(M=w.jsx("div",{children:w.jsx("table",{className:"w-full",children:w.jsx("tbody",{children:A})})}),e[19]=A,e[20]=M):M=e[20],M}function vj(t){return t<1024?`${t} B`:t<1048576?`${(t/1024).toFixed(1)} KB`:`${(t/1048576).toFixed(1)} MB`}function xj(t){const e=qe.c(12),{file:n,fileName:r,onFileChange:s}=t,a=G.useRef(null);let l;e[0]!==s?(l=v=>{s(v,v?.name??"")},e[0]=s,e[1]=l):l=e[1];const u=l,f=Sj,d=wj;let m;e[2]!==u?(m=w.jsx("input",{type:"file",ref:a,onChange:v=>u(v.target.files?.[0]??null),className:"hidden"}),e[2]=u,e[3]=m):m=e[3];let p;e[4]!==n||e[5]!==r||e[6]!==s?(p=n?w.jsxs("div",{className:"flex items-center gap-3 p-3 bg-neutral-100 dark:bg-white/5 rounded-lg border border-neutral-200 dark:border-white/10",children:[w.jsx("div",{className:"flex items-center justify-center w-10 h-10 bg-white dark:bg-white/10 rounded-lg text-xl",children:d(n.type)}),w.jsxs("div",{className:"flex-1 min-w-0",children:[w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx(io,{className:"w-4 h-4 text-neutral-500 dark:text-neutral-400 shrink-0"}),w.jsx("p",{className:"text-sm font-medium text-neutral-800 dark:text-neutral-100 truncate",children:r})]}),w.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[w.jsx("span",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:f(n.size)}),w.jsx("span",{className:"text-xs text-neutral-400 dark:text-neutral-500",children:""}),w.jsx("span",{className:"text-xs text-neutral-500 dark:text-neutral-400 truncate",children:n.type||"application/octet-stream"})]})]}),w.jsxs("div",{className:"flex items-center gap-1",children:[w.jsx("button",{type:"button",onClick:()=>a.current?.click(),className:"px-2 py-1 text-xs text-neutral-600 dark:text-neutral-300 hover:bg-neutral-200 dark:hover:bg-white/10 rounded transition-colors",children:"Change"}),w.jsx("button",{type:"button",onClick:()=>s(null,""),className:"p-1 text-neutral-400 dark:text-neutral-500 hover:text-rose-500 dark:hover:text-rose-400 hover:bg-neutral-200 dark:hover:bg-white/10 rounded transition-colors",children:w.jsx(Hl,{className:"w-4 h-4"})})]})]}):w.jsxs("div",{onClick:()=>a.current?.click(),className:"flex flex-col items-center justify-center p-8 border-2 border-dashed border-neutral-300 dark:border-white/20 rounded-lg cursor-pointer hover:border-neutral-400 dark:hover:border-white/30 hover:bg-neutral-50 dark:hover:bg-white/5 transition-colors",children:[w.jsx(bg,{className:"w-8 h-8 text-neutral-400 dark:text-neutral-500 mb-2"}),w.jsx("p",{className:"text-sm text-neutral-600 dark:text-neutral-300 mb-1",children:"Click to select a file"}),w.jsx("p",{className:"text-xs text-neutral-400 dark:text-neutral-500",children:"or drag and drop"})]}),e[4]=n,e[5]=r,e[6]=s,e[7]=p):p=e[7];let y;e[8]===Symbol.for("react.memo_cache_sentinel")?(y=w.jsx("p",{className:"text-xs text-neutral-400 dark:text-neutral-500",children:"The file will be sent as the raw request body. Content-Type will be set automatically based on the file type."}),e[8]=y):y=e[8];let g;return e[9]!==m||e[10]!==p?(g=w.jsxs("div",{className:"space-y-3",children:[m,p,y]}),e[9]=m,e[10]=p,e[11]=g):g=e[11],g}function wj(t){return t.startsWith("image/")?"":t.startsWith("video/")?"":t.startsWith("audio/")?"":t.includes("pdf")?"":t.includes("zip")||t.includes("tar")||t.includes("gzip")?"":t.includes("json")||t.includes("xml")||t.includes("text")?"":""}function Sj(t){return t<1024?`${t} B`:t<1048576?`${(t/1024).toFixed(1)} KB`:t<1073741824?`${(t/1048576).toFixed(1)} MB`:`${(t/1073741824).toFixed(2)} GB`}const kj=[{value:"none",label:"None"},{value:"json",label:"JSON"},{value:"xml",label:"XML"},{value:"form-urlencoded",label:"Form"},{value:"form-data",label:"Form Data"},{value:"binary",label:"Binary"},{value:"raw",label:"Raw"}];function Fk(){return Math.random().toString(36).substring(2,9)}function Ej(){return{id:Fk(),enabled:!0,key:"",type:"text",value:"",file:null,fileName:""}}const Cj=["Accept","Accept-Charset","Accept-Encoding","Accept-Language","Authorization","Cache-Control","Connection","Content-Disposition","Content-Encoding","Content-Length","Content-Type","Cookie","Date","ETag","Expect","Forwarded","From","Host","If-Match","If-Modified-Since","If-None-Match","If-Range","If-Unmodified-Since","Max-Forwards","Origin","Pragma","Proxy-Authorization","Range","Referer","TE","Trailer","Transfer-Encoding","Upgrade","User-Agent","Via","Warning","X-Api-Key","X-Correlation-ID","X-Forwarded-For","X-Forwarded-Host","X-Forwarded-Proto","X-Request-ID","X-Requested-With"];function Tj(){const t=qe.c(54),[e,n]=G.useState("body"),{request:r,setHeaders:s,setQuery:a,setBody:l,setVariables:u}=gn();let f;t[0]!==r?.http?.headers?(f=r?.http?.headers??[],t[0]=r?.http?.headers,t[1]=f):f=t[1];const d=f;let m;t[2]!==r?.http?.query?(m=r?.http?.query??[],t[2]=r?.http?.query,t[3]=m):m=t[3];const p=m;let y;t[4]!==r?.http?.body?(y=r?.http?.body??{type:"none"},t[4]=r?.http?.body,t[5]=y):y=t[5];const g=y;let v;t[6]!==r?.variables?(v=r?.variables??[],t[6]=r?.variables,t[7]=v):v=t[7];const x=v;let C;t[8]!==g||t[9]!==l?(C=H=>{e:switch(H){case"none":{l({type:"none"});break e}case"json":{l({type:"json",content:g.type==="json"?g.content:""});break e}case"xml":{l({type:"xml",content:g.type==="xml"?g.content:""});break e}case"raw":{l({type:"raw",content:g.type==="raw"?g.content:""});break e}case"form-urlencoded":{l({type:"form-urlencoded",data:g.type==="form-urlencoded"?g.data:[{id:Fk(),enabled:!0,key:"",value:""}]});break e}case"form-data":{l({type:"form-data",data:g.type==="form-data"?g.data:[Ej()]});break e}case"binary":l({type:"binary",file:g.type==="binary"?g.file:null,fileName:g.type==="binary"?g.fileName:""})}},t[8]=g,t[9]=l,t[10]=C):C=t[10];const k=C;let T;t[11]!==p?(T=p.filter(Oj),t[11]=p,t[12]=T):T=t[12];let A;t[13]!==T.length?(A={id:"params",label:"Params",count:T.length},t[13]=T.length,t[14]=A):A=t[14];let M;t[15]!==d?(M=d.filter(Rj),t[15]=d,t[16]=M):M=t[16];let I;t[17]!==M.length?(I={id:"headers",label:"Headers",count:M.length},t[17]=M.length,t[18]=I):I=t[18];let O;t[19]===Symbol.for("react.memo_cache_sentinel")?(O={id:"body",label:"Body"},t[19]=O):O=t[19];let B;t[20]!==A||t[21]!==I?(B=[A,I,O],t[20]=A,t[21]=I,t[22]=B):B=t[22];const U=B;let K;t[23]!==e||t[24]!==U?(K=w.jsx("div",{role:"tablist",className:"inline-flex gap-1",children:U.map(H=>w.jsxs("button",{role:"tab",onClick:()=>n(H.id),className:`px-2 py-1 text-[11px] font-medium rounded-md transition-all ${e===H.id?"bg-white dark:bg-white/10 text-neutral-800 dark:text-neutral-100 shadow-sm":"text-neutral-500 dark:text-neutral-400 hover:text-neutral-700 dark:hover:text-neutral-200 hover:bg-neutral-100 dark:hover:bg-white/5"}`,children:[H.label,H.count!==void 0&&H.count>0&&w.jsx("span",{className:"ml-1.5 px-1.5 py-0.5 text-[9px] bg-neutral-200 dark:bg-white/10 text-neutral-600 dark:text-neutral-300 rounded-full",children:H.count})]},H.id))}),t[23]=e,t[24]=U,t[25]=K):K=t[25];let j;t[26]!==e||t[27]!==g||t[28]!==k?(j=e==="body"&&w.jsx("select",{value:g.type,onChange:H=>k(H.target.value),className:"h-6 px-2 text-[11px] font-medium bg-white dark:bg-white/10 text-neutral-800 dark:text-neutral-100 rounded-md shadow-sm border-0 focus:outline-none focus:ring-2 focus:ring-neutral-300 dark:focus:ring-white/20 cursor-pointer transition-all min-w-30",children:kj.map(Aj)}),t[26]=e,t[27]=g,t[28]=k,t[29]=j):j=t[29];let J;t[30]!==K||t[31]!==j?(J=w.jsxs("div",{className:"flex items-center gap-2",children:[K,j]}),t[30]=K,t[31]=j,t[32]=J):J=t[32];let ne;t[33]!==e||t[34]!==p||t[35]!==a?(ne=e==="params"&&w.jsx(Ol,{items:p,onChange:a,keyPlaceholder:"Parameter",valuePlaceholder:"Value"}),t[33]=e,t[34]=p,t[35]=a,t[36]=ne):ne=t[36];let he;t[37]!==e||t[38]!==d||t[39]!==s?(he=e==="headers"&&w.jsx(Ol,{items:d,onChange:s,keyPlaceholder:"Header",valuePlaceholder:"Value",keySuggestions:Cj}),t[37]=e,t[38]=d,t[39]=s,t[40]=he):he=t[40];let Y;t[41]!==e||t[42]!==g||t[43]!==l||t[44]!==u||t[45]!==x?(Y=e==="body"&&w.jsxs("div",{className:"space-y-3",children:[g.type==="json"&&w.jsx(Iy,{value:g.content,onChange:H=>l({...g,content:H}),variables:x,onVariablesChange:u,placeholder:`{
  "key": "value"
}`}),g.type==="xml"&&w.jsx(mj,{value:g.content,onChange:H=>l({...g,content:H}),variables:x,onVariablesChange:u,placeholder:"<xml></xml>"}),g.type==="raw"&&w.jsx(gj,{value:g.content,onChange:H=>l({...g,content:H}),language:"text",placeholder:"Plain text payload"}),g.type==="form-urlencoded"&&w.jsx(Ol,{items:g.data,onChange:H=>l({...g,data:H}),keyPlaceholder:"Key",valuePlaceholder:"Value"}),g.type==="form-data"&&w.jsx(_j,{items:g.data,onChange:H=>l({...g,data:H})}),g.type==="binary"&&w.jsx(xj,{file:g.file,fileName:g.fileName,onFileChange:(H,ie)=>l({...g,file:H,fileName:ie})}),g.type==="none"&&w.jsx("div",{className:"py-8 text-center text-sm text-neutral-400 dark:text-neutral-500",children:"No request body"})]}),t[41]=e,t[42]=g,t[43]=l,t[44]=u,t[45]=x,t[46]=Y):Y=t[46];let q;t[47]!==ne||t[48]!==he||t[49]!==Y?(q=w.jsxs("div",{children:[ne,he,Y]}),t[47]=ne,t[48]=he,t[49]=Y,t[50]=q):q=t[50];let P;return t[51]!==J||t[52]!==q?(P=w.jsxs("div",{className:"space-y-3",children:[J,q]}),t[51]=J,t[52]=q,t[53]=P):P=t[53],P}function Aj(t){return w.jsx("option",{value:t.value,className:"bg-white dark:bg-[#1a1a1a]",children:t.label},t.value)}function Rj(t){return t.key}function Oj(t){return t.key}const Nj="modulepreload",Ij=function(t){return"/"+t},Vw={},L=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){let d=function(m){return Promise.all(m.map(p=>Promise.resolve(p).then(y=>({status:"fulfilled",value:y}),y=>({status:"rejected",reason:y}))))};var l=d;document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),f=u?.nonce||u?.getAttribute("nonce");s=d(n.map(m=>{if(m=Ij(m),m in Vw)return;Vw[m]=!0;const p=m.endsWith(".css"),y=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${y}`))return;const g=document.createElement("link");if(g.rel=p?"stylesheet":Nj,p||(g.as="script"),g.crossOrigin="",g.href=m,f&&g.setAttribute("nonce",f),document.head.appendChild(g),p)return new Promise((v,x)=>{g.addEventListener("load",v),g.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${m}`)))})}))}function a(u){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=u,window.dispatchEvent(f),!f.defaultPrevented)throw u}return s.then(u=>{for(const f of u||[])f.status==="rejected"&&a(f.reason);return e().catch(a)})};let $t=class extends Error{constructor(e){super(e),this.name="ShikiError"}};function Mj(t){return My(t)}function My(t){return Array.isArray(t)?Dj(t):t instanceof RegExp?t:typeof t=="object"?jj(t):t}function Dj(t){let e=[];for(let n=0,r=t.length;n<r;n++)e[n]=My(t[n]);return e}function jj(t){let e={};for(let n in t)e[n]=My(t[n]);return e}function Vk(t,...e){return e.forEach(n=>{for(let r in n)t[r]=n[r]}),t}function Hk(t){const e=~t.lastIndexOf("/")||~t.lastIndexOf("\\");return e===0?t:~e===t.length-1?Hk(t.substring(0,t.length-1)):t.substr(~e+1)}var lm=/\$(\d+)|\${(\d+):\/(downcase|upcase)}/g,Ou=class{static hasCaptures(t){return t===null?!1:(lm.lastIndex=0,lm.test(t))}static replaceCaptures(t,e,n){return t.replace(lm,(r,s,a,l)=>{let u=n[parseInt(s||a,10)];if(u){let f=e.substring(u.start,u.end);for(;f[0]===".";)f=f.substring(1);switch(l){case"downcase":return f.toLowerCase();case"upcase":return f.toUpperCase();default:return f}}else return r})}};function Gk(t,e){return t<e?-1:t>e?1:0}function Kk(t,e){if(t===null&&e===null)return 0;if(!t)return-1;if(!e)return 1;let n=t.length,r=e.length;if(n===r){for(let s=0;s<n;s++){let a=Gk(t[s],e[s]);if(a!==0)return a}return 0}return n-r}function Hw(t){return!!(/^#[0-9a-f]{6}$/i.test(t)||/^#[0-9a-f]{8}$/i.test(t)||/^#[0-9a-f]{3}$/i.test(t)||/^#[0-9a-f]{4}$/i.test(t))}function Zk(t){return t.replace(/[\-\\\{\}\*\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&")}var Qk=class{constructor(t){this.fn=t}cache=new Map;get(t){if(this.cache.has(t))return this.cache.get(t);const e=this.fn(t);return this.cache.set(t,e),e}},Tf=class{constructor(t,e,n){this._colorMap=t,this._defaults=e,this._root=n}static createFromRawTheme(t,e){return this.createFromParsedTheme(Pj(t),e)}static createFromParsedTheme(t,e){return $j(t,e)}_cachedMatchRoot=new Qk(t=>this._root.match(t));getColorMap(){return this._colorMap.getColorMap()}getDefaults(){return this._defaults}match(t){if(t===null)return this._defaults;const e=t.scopeName,r=this._cachedMatchRoot.get(e).find(s=>Lj(t.parent,s.parentScopes));return r?new Jk(r.fontStyle,r.foreground,r.background):null}},cm=class Wu{constructor(e,n){this.parent=e,this.scopeName=n}static push(e,n){for(const r of n)e=new Wu(e,r);return e}static from(...e){let n=null;for(let r=0;r<e.length;r++)n=new Wu(n,e[r]);return n}push(e){return new Wu(this,e)}getSegments(){let e=this;const n=[];for(;e;)n.push(e.scopeName),e=e.parent;return n.reverse(),n}toString(){return this.getSegments().join(" ")}extends(e){return this===e?!0:this.parent===null?!1:this.parent.extends(e)}getExtensionIfDefined(e){const n=[];let r=this;for(;r&&r!==e;)n.push(r.scopeName),r=r.parent;return r===e?n.reverse():void 0}};function Lj(t,e){if(e.length===0)return!0;for(let n=0;n<e.length;n++){let r=e[n],s=!1;if(r===">"){if(n===e.length-1)return!1;r=e[++n],s=!0}for(;t&&!zj(t.scopeName,r);){if(s)return!1;t=t.parent}if(!t)return!1;t=t.parent}return!0}function zj(t,e){return e===t||t.startsWith(e)&&t[e.length]==="."}var Jk=class{constructor(t,e,n){this.fontStyle=t,this.foregroundId=e,this.backgroundId=n}};function Pj(t){if(!t)return[];if(!t.settings||!Array.isArray(t.settings))return[];let e=t.settings,n=[],r=0;for(let s=0,a=e.length;s<a;s++){let l=e[s];if(!l.settings)continue;let u;if(typeof l.scope=="string"){let p=l.scope;p=p.replace(/^[,]+/,""),p=p.replace(/[,]+$/,""),u=p.split(",")}else Array.isArray(l.scope)?u=l.scope:u=[""];let f=-1;if(typeof l.settings.fontStyle=="string"){f=0;let p=l.settings.fontStyle.split(" ");for(let y=0,g=p.length;y<g;y++)switch(p[y]){case"italic":f=f|1;break;case"bold":f=f|2;break;case"underline":f=f|4;break;case"strikethrough":f=f|8;break}}let d=null;typeof l.settings.foreground=="string"&&Hw(l.settings.foreground)&&(d=l.settings.foreground);let m=null;typeof l.settings.background=="string"&&Hw(l.settings.background)&&(m=l.settings.background);for(let p=0,y=u.length;p<y;p++){let v=u[p].trim().split(" "),x=v[v.length-1],C=null;v.length>1&&(C=v.slice(0,v.length-1),C.reverse()),n[r++]=new Bj(x,C,s,f,d,m)}}return n}var Bj=class{constructor(t,e,n,r,s,a){this.scope=t,this.parentScopes=e,this.index=n,this.fontStyle=r,this.foreground=s,this.background=a}},kn=(t=>(t[t.NotSet=-1]="NotSet",t[t.None=0]="None",t[t.Italic=1]="Italic",t[t.Bold=2]="Bold",t[t.Underline=4]="Underline",t[t.Strikethrough=8]="Strikethrough",t))(kn||{});function $j(t,e){t.sort((f,d)=>{let m=Gk(f.scope,d.scope);return m!==0||(m=Kk(f.parentScopes,d.parentScopes),m!==0)?m:f.index-d.index});let n=0,r="#000000",s="#ffffff";for(;t.length>=1&&t[0].scope==="";){let f=t.shift();f.fontStyle!==-1&&(n=f.fontStyle),f.foreground!==null&&(r=f.foreground),f.background!==null&&(s=f.background)}let a=new Uj(e),l=new Jk(n,a.getId(r),a.getId(s)),u=new Fj(new _g(0,null,-1,0,0),[]);for(let f=0,d=t.length;f<d;f++){let m=t[f];u.insert(0,m.scope,m.parentScopes,m.fontStyle,a.getId(m.foreground),a.getId(m.background))}return new Tf(a,l,u)}var Uj=class{_isFrozen;_lastColorId;_id2color;_color2id;constructor(t){if(this._lastColorId=0,this._id2color=[],this._color2id=Object.create(null),Array.isArray(t)){this._isFrozen=!0;for(let e=0,n=t.length;e<n;e++)this._color2id[t[e]]=e,this._id2color[e]=t[e]}else this._isFrozen=!1}getId(t){if(t===null)return 0;t=t.toUpperCase();let e=this._color2id[t];if(e)return e;if(this._isFrozen)throw new Error(`Missing color in color map - ${t}`);return e=++this._lastColorId,this._color2id[t]=e,this._id2color[e]=t,e}getColorMap(){return this._id2color.slice(0)}},qj=Object.freeze([]),_g=class Yk{scopeDepth;parentScopes;fontStyle;foreground;background;constructor(e,n,r,s,a){this.scopeDepth=e,this.parentScopes=n||qj,this.fontStyle=r,this.foreground=s,this.background=a}clone(){return new Yk(this.scopeDepth,this.parentScopes,this.fontStyle,this.foreground,this.background)}static cloneArr(e){let n=[];for(let r=0,s=e.length;r<s;r++)n[r]=e[r].clone();return n}acceptOverwrite(e,n,r,s){this.scopeDepth>e?console.log("how did this happen?"):this.scopeDepth=e,n!==-1&&(this.fontStyle=n),r!==0&&(this.foreground=r),s!==0&&(this.background=s)}},Fj=class vg{constructor(e,n=[],r={}){this._mainRule=e,this._children=r,this._rulesWithParentScopes=n}_rulesWithParentScopes;static _cmpBySpecificity(e,n){if(e.scopeDepth!==n.scopeDepth)return n.scopeDepth-e.scopeDepth;let r=0,s=0;for(;e.parentScopes[r]===">"&&r++,n.parentScopes[s]===">"&&s++,!(r>=e.parentScopes.length||s>=n.parentScopes.length);){const a=n.parentScopes[s].length-e.parentScopes[r].length;if(a!==0)return a;r++,s++}return n.parentScopes.length-e.parentScopes.length}match(e){if(e!==""){let r=e.indexOf("."),s,a;if(r===-1?(s=e,a=""):(s=e.substring(0,r),a=e.substring(r+1)),this._children.hasOwnProperty(s))return this._children[s].match(a)}const n=this._rulesWithParentScopes.concat(this._mainRule);return n.sort(vg._cmpBySpecificity),n}insert(e,n,r,s,a,l){if(n===""){this._doInsertHere(e,r,s,a,l);return}let u=n.indexOf("."),f,d;u===-1?(f=n,d=""):(f=n.substring(0,u),d=n.substring(u+1));let m;this._children.hasOwnProperty(f)?m=this._children[f]:(m=new vg(this._mainRule.clone(),_g.cloneArr(this._rulesWithParentScopes)),this._children[f]=m),m.insert(e+1,d,r,s,a,l)}_doInsertHere(e,n,r,s,a){if(n===null){this._mainRule.acceptOverwrite(e,r,s,a);return}for(let l=0,u=this._rulesWithParentScopes.length;l<u;l++){let f=this._rulesWithParentScopes[l];if(Kk(f.parentScopes,n)===0){f.acceptOverwrite(e,r,s,a);return}}r===-1&&(r=this._mainRule.fontStyle),s===0&&(s=this._mainRule.foreground),a===0&&(a=this._mainRule.background),this._rulesWithParentScopes.push(new _g(e,n,r,s,a))}},eo=class vr{static toBinaryStr(e){return e.toString(2).padStart(32,"0")}static print(e){const n=vr.getLanguageId(e),r=vr.getTokenType(e),s=vr.getFontStyle(e),a=vr.getForeground(e),l=vr.getBackground(e);console.log({languageId:n,tokenType:r,fontStyle:s,foreground:a,background:l})}static getLanguageId(e){return(e&255)>>>0}static getTokenType(e){return(e&768)>>>8}static containsBalancedBrackets(e){return(e&1024)!==0}static getFontStyle(e){return(e&30720)>>>11}static getForeground(e){return(e&16744448)>>>15}static getBackground(e){return(e&4278190080)>>>24}static set(e,n,r,s,a,l,u){let f=vr.getLanguageId(e),d=vr.getTokenType(e),m=vr.containsBalancedBrackets(e)?1:0,p=vr.getFontStyle(e),y=vr.getForeground(e),g=vr.getBackground(e);return n!==0&&(f=n),r!==8&&(d=r),s!==null&&(m=s?1:0),a!==-1&&(p=a),l!==0&&(y=l),u!==0&&(g=u),(f<<0|d<<8|m<<10|p<<11|y<<15|g<<24)>>>0}};function Af(t,e){const n=[],r=Vj(t);let s=r.next();for(;s!==null;){let f=0;if(s.length===2&&s.charAt(1)===":"){switch(s.charAt(0)){case"R":f=1;break;case"L":f=-1;break;default:console.log(`Unknown priority ${s} in scope selector`)}s=r.next()}let d=l();if(n.push({matcher:d,priority:f}),s!==",")break;s=r.next()}return n;function a(){if(s==="-"){s=r.next();const f=a();return d=>!!f&&!f(d)}if(s==="("){s=r.next();const f=u();return s===")"&&(s=r.next()),f}if(Gw(s)){const f=[];do f.push(s),s=r.next();while(Gw(s));return d=>e(f,d)}return null}function l(){const f=[];let d=a();for(;d;)f.push(d),d=a();return m=>f.every(p=>p(m))}function u(){const f=[];let d=l();for(;d&&(f.push(d),s==="|"||s===",");){do s=r.next();while(s==="|"||s===",");d=l()}return m=>f.some(p=>p(m))}}function Gw(t){return!!t&&!!t.match(/[\w\.:]+/)}function Vj(t){let e=/([LR]:|[\w\.:][\w\.:\-]*|[\,\|\-\(\)])/g,n=e.exec(t);return{next:()=>{if(!n)return null;const r=n[0];return n=e.exec(t),r}}}function Xk(t){typeof t.dispose=="function"&&t.dispose()}var Gl=class{constructor(t){this.scopeName=t}toKey(){return this.scopeName}},Hj=class{constructor(t,e){this.scopeName=t,this.ruleName=e}toKey(){return`${this.scopeName}#${this.ruleName}`}},Gj=class{_references=[];_seenReferenceKeys=new Set;get references(){return this._references}visitedRule=new Set;add(t){const e=t.toKey();this._seenReferenceKeys.has(e)||(this._seenReferenceKeys.add(e),this._references.push(t))}},Kj=class{constructor(t,e){this.repo=t,this.initialScopeName=e,this.seenFullScopeRequests.add(this.initialScopeName),this.Q=[new Gl(this.initialScopeName)]}seenFullScopeRequests=new Set;seenPartialScopeRequests=new Set;Q;processQueue(){const t=this.Q;this.Q=[];const e=new Gj;for(const n of t)Zj(n,this.initialScopeName,this.repo,e);for(const n of e.references)if(n instanceof Gl){if(this.seenFullScopeRequests.has(n.scopeName))continue;this.seenFullScopeRequests.add(n.scopeName),this.Q.push(n)}else{if(this.seenFullScopeRequests.has(n.scopeName)||this.seenPartialScopeRequests.has(n.toKey()))continue;this.seenPartialScopeRequests.add(n.toKey()),this.Q.push(n)}}};function Zj(t,e,n,r){const s=n.lookup(t.scopeName);if(!s){if(t.scopeName===e)throw new Error(`No grammar provided for <${e}>`);return}const a=n.lookup(e);t instanceof Gl?ef({baseGrammar:a,selfGrammar:s},r):xg(t.ruleName,{baseGrammar:a,selfGrammar:s,repository:s.repository},r);const l=n.injections(t.scopeName);if(l)for(const u of l)r.add(new Gl(u))}function xg(t,e,n){if(e.repository&&e.repository[t]){const r=e.repository[t];Rf([r],e,n)}}function ef(t,e){t.selfGrammar.patterns&&Array.isArray(t.selfGrammar.patterns)&&Rf(t.selfGrammar.patterns,{...t,repository:t.selfGrammar.repository},e),t.selfGrammar.injections&&Rf(Object.values(t.selfGrammar.injections),{...t,repository:t.selfGrammar.repository},e)}function Rf(t,e,n){for(const r of t){if(n.visitedRule.has(r))continue;n.visitedRule.add(r);const s=r.repository?Vk({},e.repository,r.repository):e.repository;Array.isArray(r.patterns)&&Rf(r.patterns,{...e,repository:s},n);const a=r.include;if(!a)continue;const l=Wk(a);switch(l.kind){case 0:ef({...e,selfGrammar:e.baseGrammar},n);break;case 1:ef(e,n);break;case 2:xg(l.ruleName,{...e,repository:s},n);break;case 3:case 4:const u=l.scopeName===e.selfGrammar.scopeName?e.selfGrammar:l.scopeName===e.baseGrammar.scopeName?e.baseGrammar:void 0;if(u){const f={baseGrammar:e.baseGrammar,selfGrammar:u,repository:s};l.kind===4?xg(l.ruleName,f,n):ef(f,n)}else l.kind===4?n.add(new Hj(l.scopeName,l.ruleName)):n.add(new Gl(l.scopeName));break}}}var Qj=class{kind=0},Jj=class{kind=1},Yj=class{constructor(t){this.ruleName=t}kind=2},Xj=class{constructor(t){this.scopeName=t}kind=3},Wj=class{constructor(t,e){this.scopeName=t,this.ruleName=e}kind=4};function Wk(t){if(t==="$base")return new Qj;if(t==="$self")return new Jj;const e=t.indexOf("#");if(e===-1)return new Xj(t);if(e===0)return new Yj(t.substring(1));{const n=t.substring(0,e),r=t.substring(e+1);return new Wj(n,r)}}var eL=/\\(\d+)/,Kw=/\\(\d+)/g,tL=-1,eE=-2;var ac=class{$location;id;_nameIsCapturing;_name;_contentNameIsCapturing;_contentName;constructor(t,e,n,r){this.$location=t,this.id=e,this._name=n||null,this._nameIsCapturing=Ou.hasCaptures(this._name),this._contentName=r||null,this._contentNameIsCapturing=Ou.hasCaptures(this._contentName)}get debugName(){const t=this.$location?`${Hk(this.$location.filename)}:${this.$location.line}`:"unknown";return`${this.constructor.name}#${this.id} @ ${t}`}getName(t,e){return!this._nameIsCapturing||this._name===null||t===null||e===null?this._name:Ou.replaceCaptures(this._name,t,e)}getContentName(t,e){return!this._contentNameIsCapturing||this._contentName===null?this._contentName:Ou.replaceCaptures(this._contentName,t,e)}},nL=class extends ac{retokenizeCapturedWithRuleId;constructor(t,e,n,r,s){super(t,e,n,r),this.retokenizeCapturedWithRuleId=s}dispose(){}collectPatterns(t,e){throw new Error("Not supported!")}compile(t,e){throw new Error("Not supported!")}compileAG(t,e,n,r){throw new Error("Not supported!")}},rL=class extends ac{_match;captures;_cachedCompiledPatterns;constructor(t,e,n,r,s){super(t,e,n,null),this._match=new Kl(r,this.id),this.captures=s,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}get debugMatchRegExp(){return`${this._match.source}`}collectPatterns(t,e){e.push(this._match)}compile(t,e){return this._getCachedCompiledPatterns(t).compile(t)}compileAG(t,e,n,r){return this._getCachedCompiledPatterns(t).compileAG(t,n,r)}_getCachedCompiledPatterns(t){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new Zl,this.collectPatterns(t,this._cachedCompiledPatterns)),this._cachedCompiledPatterns}},Zw=class extends ac{hasMissingPatterns;patterns;_cachedCompiledPatterns;constructor(t,e,n,r,s){super(t,e,n,r),this.patterns=s.patterns,this.hasMissingPatterns=s.hasMissingPatterns,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}collectPatterns(t,e){for(const n of this.patterns)t.getRule(n).collectPatterns(t,e)}compile(t,e){return this._getCachedCompiledPatterns(t).compile(t)}compileAG(t,e,n,r){return this._getCachedCompiledPatterns(t).compileAG(t,n,r)}_getCachedCompiledPatterns(t){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new Zl,this.collectPatterns(t,this._cachedCompiledPatterns)),this._cachedCompiledPatterns}},wg=class extends ac{_begin;beginCaptures;_end;endHasBackReferences;endCaptures;applyEndPatternLast;hasMissingPatterns;patterns;_cachedCompiledPatterns;constructor(t,e,n,r,s,a,l,u,f,d){super(t,e,n,r),this._begin=new Kl(s,this.id),this.beginCaptures=a,this._end=new Kl(l||"",-1),this.endHasBackReferences=this._end.hasBackReferences,this.endCaptures=u,this.applyEndPatternLast=f||!1,this.patterns=d.patterns,this.hasMissingPatterns=d.hasMissingPatterns,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}get debugBeginRegExp(){return`${this._begin.source}`}get debugEndRegExp(){return`${this._end.source}`}getEndWithResolvedBackReferences(t,e){return this._end.resolveBackReferences(t,e)}collectPatterns(t,e){e.push(this._begin)}compile(t,e){return this._getCachedCompiledPatterns(t,e).compile(t)}compileAG(t,e,n,r){return this._getCachedCompiledPatterns(t,e).compileAG(t,n,r)}_getCachedCompiledPatterns(t,e){if(!this._cachedCompiledPatterns){this._cachedCompiledPatterns=new Zl;for(const n of this.patterns)t.getRule(n).collectPatterns(t,this._cachedCompiledPatterns);this.applyEndPatternLast?this._cachedCompiledPatterns.push(this._end.hasBackReferences?this._end.clone():this._end):this._cachedCompiledPatterns.unshift(this._end.hasBackReferences?this._end.clone():this._end)}return this._end.hasBackReferences&&(this.applyEndPatternLast?this._cachedCompiledPatterns.setSource(this._cachedCompiledPatterns.length()-1,e):this._cachedCompiledPatterns.setSource(0,e)),this._cachedCompiledPatterns}},Of=class extends ac{_begin;beginCaptures;whileCaptures;_while;whileHasBackReferences;hasMissingPatterns;patterns;_cachedCompiledPatterns;_cachedCompiledWhilePatterns;constructor(t,e,n,r,s,a,l,u,f){super(t,e,n,r),this._begin=new Kl(s,this.id),this.beginCaptures=a,this.whileCaptures=u,this._while=new Kl(l,eE),this.whileHasBackReferences=this._while.hasBackReferences,this.patterns=f.patterns,this.hasMissingPatterns=f.hasMissingPatterns,this._cachedCompiledPatterns=null,this._cachedCompiledWhilePatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null),this._cachedCompiledWhilePatterns&&(this._cachedCompiledWhilePatterns.dispose(),this._cachedCompiledWhilePatterns=null)}get debugBeginRegExp(){return`${this._begin.source}`}get debugWhileRegExp(){return`${this._while.source}`}getWhileWithResolvedBackReferences(t,e){return this._while.resolveBackReferences(t,e)}collectPatterns(t,e){e.push(this._begin)}compile(t,e){return this._getCachedCompiledPatterns(t).compile(t)}compileAG(t,e,n,r){return this._getCachedCompiledPatterns(t).compileAG(t,n,r)}_getCachedCompiledPatterns(t){if(!this._cachedCompiledPatterns){this._cachedCompiledPatterns=new Zl;for(const e of this.patterns)t.getRule(e).collectPatterns(t,this._cachedCompiledPatterns)}return this._cachedCompiledPatterns}compileWhile(t,e){return this._getCachedCompiledWhilePatterns(t,e).compile(t)}compileWhileAG(t,e,n,r){return this._getCachedCompiledWhilePatterns(t,e).compileAG(t,n,r)}_getCachedCompiledWhilePatterns(t,e){return this._cachedCompiledWhilePatterns||(this._cachedCompiledWhilePatterns=new Zl,this._cachedCompiledWhilePatterns.push(this._while.hasBackReferences?this._while.clone():this._while)),this._while.hasBackReferences&&this._cachedCompiledWhilePatterns.setSource(0,e||""),this._cachedCompiledWhilePatterns}},tE=class wn{static createCaptureRule(e,n,r,s,a){return e.registerRule(l=>new nL(n,l,r,s,a))}static getCompiledRuleId(e,n,r){return e.id||n.registerRule(s=>{if(e.id=s,e.match)return new rL(e.$vscodeTextmateLocation,e.id,e.name,e.match,wn._compileCaptures(e.captures,n,r));if(typeof e.begin>"u"){e.repository&&(r=Vk({},r,e.repository));let a=e.patterns;return typeof a>"u"&&e.include&&(a=[{include:e.include}]),new Zw(e.$vscodeTextmateLocation,e.id,e.name,e.contentName,wn._compilePatterns(a,n,r))}return e.while?new Of(e.$vscodeTextmateLocation,e.id,e.name,e.contentName,e.begin,wn._compileCaptures(e.beginCaptures||e.captures,n,r),e.while,wn._compileCaptures(e.whileCaptures||e.captures,n,r),wn._compilePatterns(e.patterns,n,r)):new wg(e.$vscodeTextmateLocation,e.id,e.name,e.contentName,e.begin,wn._compileCaptures(e.beginCaptures||e.captures,n,r),e.end,wn._compileCaptures(e.endCaptures||e.captures,n,r),e.applyEndPatternLast,wn._compilePatterns(e.patterns,n,r))}),e.id}static _compileCaptures(e,n,r){let s=[];if(e){let a=0;for(const l in e){if(l==="$vscodeTextmateLocation")continue;const u=parseInt(l,10);u>a&&(a=u)}for(let l=0;l<=a;l++)s[l]=null;for(const l in e){if(l==="$vscodeTextmateLocation")continue;const u=parseInt(l,10);let f=0;e[l].patterns&&(f=wn.getCompiledRuleId(e[l],n,r)),s[u]=wn.createCaptureRule(n,e[l].$vscodeTextmateLocation,e[l].name,e[l].contentName,f)}}return s}static _compilePatterns(e,n,r){let s=[];if(e)for(let a=0,l=e.length;a<l;a++){const u=e[a];let f=-1;if(u.include){const d=Wk(u.include);switch(d.kind){case 0:case 1:f=wn.getCompiledRuleId(r[u.include],n,r);break;case 2:let m=r[d.ruleName];m&&(f=wn.getCompiledRuleId(m,n,r));break;case 3:case 4:const p=d.scopeName,y=d.kind===4?d.ruleName:null,g=n.getExternalGrammar(p,r);if(g)if(y){let v=g.repository[y];v&&(f=wn.getCompiledRuleId(v,n,g.repository))}else f=wn.getCompiledRuleId(g.repository.$self,n,g.repository);break}}else f=wn.getCompiledRuleId(u,n,r);if(f!==-1){const d=n.getRule(f);let m=!1;if((d instanceof Zw||d instanceof wg||d instanceof Of)&&d.hasMissingPatterns&&d.patterns.length===0&&(m=!0),m)continue;s.push(f)}}return{patterns:s,hasMissingPatterns:(e?e.length:0)!==s.length}}},Kl=class nE{source;ruleId;hasAnchor;hasBackReferences;_anchorCache;constructor(e,n){if(e&&typeof e=="string"){const r=e.length;let s=0,a=[],l=!1;for(let u=0;u<r;u++)if(e.charAt(u)==="\\"&&u+1<r){const d=e.charAt(u+1);d==="z"?(a.push(e.substring(s,u)),a.push("$(?!\\n)(?<!\\n)"),s=u+2):(d==="A"||d==="G")&&(l=!0),u++}this.hasAnchor=l,s===0?this.source=e:(a.push(e.substring(s,r)),this.source=a.join(""))}else this.hasAnchor=!1,this.source=e;this.hasAnchor?this._anchorCache=this._buildAnchorCache():this._anchorCache=null,this.ruleId=n,typeof this.source=="string"?this.hasBackReferences=eL.test(this.source):this.hasBackReferences=!1}clone(){return new nE(this.source,this.ruleId)}setSource(e){this.source!==e&&(this.source=e,this.hasAnchor&&(this._anchorCache=this._buildAnchorCache()))}resolveBackReferences(e,n){if(typeof this.source!="string")throw new Error("This method should only be called if the source is a string");let r=n.map(s=>e.substring(s.start,s.end));return Kw.lastIndex=0,this.source.replace(Kw,(s,a)=>Zk(r[parseInt(a,10)]||""))}_buildAnchorCache(){if(typeof this.source!="string")throw new Error("This method should only be called if the source is a string");let e=[],n=[],r=[],s=[],a,l,u,f;for(a=0,l=this.source.length;a<l;a++)u=this.source.charAt(a),e[a]=u,n[a]=u,r[a]=u,s[a]=u,u==="\\"&&a+1<l&&(f=this.source.charAt(a+1),f==="A"?(e[a+1]="",n[a+1]="",r[a+1]="A",s[a+1]="A"):f==="G"?(e[a+1]="",n[a+1]="G",r[a+1]="",s[a+1]="G"):(e[a+1]=f,n[a+1]=f,r[a+1]=f,s[a+1]=f),a++);return{A0_G0:e.join(""),A0_G1:n.join(""),A1_G0:r.join(""),A1_G1:s.join("")}}resolveAnchors(e,n){return!this.hasAnchor||!this._anchorCache||typeof this.source!="string"?this.source:e?n?this._anchorCache.A1_G1:this._anchorCache.A1_G0:n?this._anchorCache.A0_G1:this._anchorCache.A0_G0}},Zl=class{_items;_hasAnchors;_cached;_anchorCache;constructor(){this._items=[],this._hasAnchors=!1,this._cached=null,this._anchorCache={A0_G0:null,A0_G1:null,A1_G0:null,A1_G1:null}}dispose(){this._disposeCaches()}_disposeCaches(){this._cached&&(this._cached.dispose(),this._cached=null),this._anchorCache.A0_G0&&(this._anchorCache.A0_G0.dispose(),this._anchorCache.A0_G0=null),this._anchorCache.A0_G1&&(this._anchorCache.A0_G1.dispose(),this._anchorCache.A0_G1=null),this._anchorCache.A1_G0&&(this._anchorCache.A1_G0.dispose(),this._anchorCache.A1_G0=null),this._anchorCache.A1_G1&&(this._anchorCache.A1_G1.dispose(),this._anchorCache.A1_G1=null)}push(t){this._items.push(t),this._hasAnchors=this._hasAnchors||t.hasAnchor}unshift(t){this._items.unshift(t),this._hasAnchors=this._hasAnchors||t.hasAnchor}length(){return this._items.length}setSource(t,e){this._items[t].source!==e&&(this._disposeCaches(),this._items[t].setSource(e))}compile(t){if(!this._cached){let e=this._items.map(n=>n.source);this._cached=new Qw(t,e,this._items.map(n=>n.ruleId))}return this._cached}compileAG(t,e,n){return this._hasAnchors?e?n?(this._anchorCache.A1_G1||(this._anchorCache.A1_G1=this._resolveAnchors(t,e,n)),this._anchorCache.A1_G1):(this._anchorCache.A1_G0||(this._anchorCache.A1_G0=this._resolveAnchors(t,e,n)),this._anchorCache.A1_G0):n?(this._anchorCache.A0_G1||(this._anchorCache.A0_G1=this._resolveAnchors(t,e,n)),this._anchorCache.A0_G1):(this._anchorCache.A0_G0||(this._anchorCache.A0_G0=this._resolveAnchors(t,e,n)),this._anchorCache.A0_G0):this.compile(t)}_resolveAnchors(t,e,n){let r=this._items.map(s=>s.resolveAnchors(e,n));return new Qw(t,r,this._items.map(s=>s.ruleId))}},Qw=class{constructor(t,e,n){this.regExps=e,this.rules=n,this.scanner=t.createOnigScanner(e)}scanner;dispose(){typeof this.scanner.dispose=="function"&&this.scanner.dispose()}toString(){const t=[];for(let e=0,n=this.rules.length;e<n;e++)t.push("   - "+this.rules[e]+": "+this.regExps[e]);return t.join(`
`)}findNextMatchSync(t,e,n){const r=this.scanner.findNextMatchSync(t,e,n);return r?{ruleId:this.rules[r.index],captureIndices:r.captureIndices}:null}},um=class{constructor(t,e){this.languageId=t,this.tokenType=e}},sL=class Sg{_defaultAttributes;_embeddedLanguagesMatcher;constructor(e,n){this._defaultAttributes=new um(e,8),this._embeddedLanguagesMatcher=new iL(Object.entries(n||{}))}getDefaultAttributes(){return this._defaultAttributes}getBasicScopeAttributes(e){return e===null?Sg._NULL_SCOPE_METADATA:this._getBasicScopeAttributes.get(e)}static _NULL_SCOPE_METADATA=new um(0,0);_getBasicScopeAttributes=new Qk(e=>{const n=this._scopeToLanguage(e),r=this._toStandardTokenType(e);return new um(n,r)});_scopeToLanguage(e){return this._embeddedLanguagesMatcher.match(e)||0}_toStandardTokenType(e){const n=e.match(Sg.STANDARD_TOKEN_TYPE_REGEXP);if(!n)return 8;switch(n[1]){case"comment":return 1;case"string":return 2;case"regex":return 3;case"meta.embedded":return 0}throw new Error("Unexpected match for standard token type!")}static STANDARD_TOKEN_TYPE_REGEXP=/\b(comment|string|regex|meta\.embedded)\b/},iL=class{values;scopesRegExp;constructor(t){if(t.length===0)this.values=null,this.scopesRegExp=null;else{this.values=new Map(t);const e=t.map(([n,r])=>Zk(n));e.sort(),e.reverse(),this.scopesRegExp=new RegExp(`^((${e.join(")|(")}))($|\\.)`,"")}}match(t){if(!this.scopesRegExp)return;const e=t.match(this.scopesRegExp);if(e)return this.values.get(e[1])}},Jw=class{constructor(t,e){this.stack=t,this.stoppedEarly=e}};function rE(t,e,n,r,s,a,l,u){const f=e.content.length;let d=!1,m=-1;if(l){const g=aL(t,e,n,r,s,a);s=g.stack,r=g.linePos,n=g.isFirstLine,m=g.anchorPosition}const p=Date.now();for(;!d;){if(u!==0&&Date.now()-p>u)return new Jw(s,!0);y()}return new Jw(s,!1);function y(){const g=oL(t,e,n,r,s,m);if(!g){a.produce(s,f),d=!0;return}const v=g.captureIndices,x=g.matchedRuleId,C=v&&v.length>0?v[0].end>r:!1;if(x===tL){const k=s.getRule(t);a.produce(s,v[0].start),s=s.withContentNameScopesList(s.nameScopesList),gl(t,e,n,s,a,k.endCaptures,v),a.produce(s,v[0].end);const T=s;if(s=s.parent,m=T.getAnchorPos(),!C&&T.getEnterPos()===r){s=T,a.produce(s,f),d=!0;return}}else{const k=t.getRule(x);a.produce(s,v[0].start);const T=s,A=k.getName(e.content,v),M=s.contentNameScopesList.pushAttributed(A,t);if(s=s.push(x,r,m,v[0].end===f,null,M,M),k instanceof wg){const I=k;gl(t,e,n,s,a,I.beginCaptures,v),a.produce(s,v[0].end),m=v[0].end;const O=I.getContentName(e.content,v),B=M.pushAttributed(O,t);if(s=s.withContentNameScopesList(B),I.endHasBackReferences&&(s=s.withEndRule(I.getEndWithResolvedBackReferences(e.content,v))),!C&&T.hasSameRuleAs(s)){s=s.pop(),a.produce(s,f),d=!0;return}}else if(k instanceof Of){const I=k;gl(t,e,n,s,a,I.beginCaptures,v),a.produce(s,v[0].end),m=v[0].end;const O=I.getContentName(e.content,v),B=M.pushAttributed(O,t);if(s=s.withContentNameScopesList(B),I.whileHasBackReferences&&(s=s.withEndRule(I.getWhileWithResolvedBackReferences(e.content,v))),!C&&T.hasSameRuleAs(s)){s=s.pop(),a.produce(s,f),d=!0;return}}else if(gl(t,e,n,s,a,k.captures,v),a.produce(s,v[0].end),s=s.pop(),!C){s=s.safePop(),a.produce(s,f),d=!0;return}}v[0].end>r&&(r=v[0].end,n=!1)}}function aL(t,e,n,r,s,a){let l=s.beginRuleCapturedEOL?0:-1;const u=[];for(let f=s;f;f=f.pop()){const d=f.getRule(t);d instanceof Of&&u.push({rule:d,stack:f})}for(let f=u.pop();f;f=u.pop()){const{ruleScanner:d,findOptions:m}=uL(f.rule,t,f.stack.endRule,n,r===l),p=d.findNextMatchSync(e,r,m);if(p){if(p.ruleId!==eE){s=f.stack.pop();break}p.captureIndices&&p.captureIndices.length&&(a.produce(f.stack,p.captureIndices[0].start),gl(t,e,n,f.stack,a,f.rule.whileCaptures,p.captureIndices),a.produce(f.stack,p.captureIndices[0].end),l=p.captureIndices[0].end,p.captureIndices[0].end>r&&(r=p.captureIndices[0].end,n=!1))}else{s=f.stack.pop();break}}return{stack:s,linePos:r,anchorPosition:l,isFirstLine:n}}function oL(t,e,n,r,s,a){const l=lL(t,e,n,r,s,a),u=t.getInjections();if(u.length===0)return l;const f=cL(u,t,e,n,r,s,a);if(!f)return l;if(!l)return f;const d=l.captureIndices[0].start,m=f.captureIndices[0].start;return m<d||f.priorityMatch&&m===d?f:l}function lL(t,e,n,r,s,a){const l=s.getRule(t),{ruleScanner:u,findOptions:f}=sE(l,t,s.endRule,n,r===a),d=u.findNextMatchSync(e,r,f);return d?{captureIndices:d.captureIndices,matchedRuleId:d.ruleId}:null}function cL(t,e,n,r,s,a,l){let u=Number.MAX_VALUE,f=null,d,m=0;const p=a.contentNameScopesList.getScopeNames();for(let y=0,g=t.length;y<g;y++){const v=t[y];if(!v.matcher(p))continue;const x=e.getRule(v.ruleId),{ruleScanner:C,findOptions:k}=sE(x,e,null,r,s===l),T=C.findNextMatchSync(n,s,k);if(!T)continue;const A=T.captureIndices[0].start;if(!(A>=u)&&(u=A,f=T.captureIndices,d=T.ruleId,m=v.priority,u===s))break}return f?{priorityMatch:m===-1,captureIndices:f,matchedRuleId:d}:null}function sE(t,e,n,r,s){return{ruleScanner:t.compileAG(e,n,r,s),findOptions:0}}function uL(t,e,n,r,s){return{ruleScanner:t.compileWhileAG(e,n,r,s),findOptions:0}}function gl(t,e,n,r,s,a,l){if(a.length===0)return;const u=e.content,f=Math.min(a.length,l.length),d=[],m=l[0].end;for(let p=0;p<f;p++){const y=a[p];if(y===null)continue;const g=l[p];if(g.length===0)continue;if(g.start>m)break;for(;d.length>0&&d[d.length-1].endPos<=g.start;)s.produceFromScopes(d[d.length-1].scopes,d[d.length-1].endPos),d.pop();if(d.length>0?s.produceFromScopes(d[d.length-1].scopes,g.start):s.produce(r,g.start),y.retokenizeCapturedWithRuleId){const x=y.getName(u,l),C=r.contentNameScopesList.pushAttributed(x,t),k=y.getContentName(u,l),T=C.pushAttributed(k,t),A=r.push(y.retokenizeCapturedWithRuleId,g.start,-1,!1,null,C,T),M=t.createOnigString(u.substring(0,g.end));rE(t,M,n&&g.start===0,g.start,A,s,!1,0),Xk(M);continue}const v=y.getName(u,l);if(v!==null){const C=(d.length>0?d[d.length-1].scopes:r.contentNameScopesList).pushAttributed(v,t);d.push(new fL(C,g.end))}}for(;d.length>0;)s.produceFromScopes(d[d.length-1].scopes,d[d.length-1].endPos),d.pop()}var fL=class{scopes;endPos;constructor(t,e){this.scopes=t,this.endPos=e}};function dL(t,e,n,r,s,a,l,u){return new pL(t,e,n,r,s,a,l,u)}function Yw(t,e,n,r,s){const a=Af(e,Nf),l=tE.getCompiledRuleId(n,r,s.repository);for(const u of a)t.push({debugSelector:e,matcher:u.matcher,ruleId:l,grammar:s,priority:u.priority})}function Nf(t,e){if(e.length<t.length)return!1;let n=0;return t.every(r=>{for(let s=n;s<e.length;s++)if(hL(e[s],r))return n=s+1,!0;return!1})}function hL(t,e){if(!t)return!1;if(t===e)return!0;const n=e.length;return t.length>n&&t.substr(0,n)===e&&t[n]==="."}var pL=class{constructor(t,e,n,r,s,a,l,u){if(this._rootScopeName=t,this.balancedBracketSelectors=a,this._onigLib=u,this._basicScopeAttributesProvider=new sL(n,r),this._rootId=-1,this._lastRuleId=0,this._ruleId2desc=[null],this._includedGrammars={},this._grammarRepository=l,this._grammar=Xw(e,null),this._injections=null,this._tokenTypeMatchers=[],s)for(const f of Object.keys(s)){const d=Af(f,Nf);for(const m of d)this._tokenTypeMatchers.push({matcher:m.matcher,type:s[f]})}}_rootId;_lastRuleId;_ruleId2desc;_includedGrammars;_grammarRepository;_grammar;_injections;_basicScopeAttributesProvider;_tokenTypeMatchers;get themeProvider(){return this._grammarRepository}dispose(){for(const t of this._ruleId2desc)t&&t.dispose()}createOnigScanner(t){return this._onigLib.createOnigScanner(t)}createOnigString(t){return this._onigLib.createOnigString(t)}getMetadataForScope(t){return this._basicScopeAttributesProvider.getBasicScopeAttributes(t)}_collectInjections(){const t={lookup:s=>s===this._rootScopeName?this._grammar:this.getExternalGrammar(s),injections:s=>this._grammarRepository.injections(s)},e=[],n=this._rootScopeName,r=t.lookup(n);if(r){const s=r.injections;if(s)for(let l in s)Yw(e,l,s[l],this,r);const a=this._grammarRepository.injections(n);a&&a.forEach(l=>{const u=this.getExternalGrammar(l);if(u){const f=u.injectionSelector;f&&Yw(e,f,u,this,u)}})}return e.sort((s,a)=>s.priority-a.priority),e}getInjections(){return this._injections===null&&(this._injections=this._collectInjections()),this._injections}registerRule(t){const e=++this._lastRuleId,n=t(e);return this._ruleId2desc[e]=n,n}getRule(t){return this._ruleId2desc[t]}getExternalGrammar(t,e){if(this._includedGrammars[t])return this._includedGrammars[t];if(this._grammarRepository){const n=this._grammarRepository.lookup(t);if(n)return this._includedGrammars[t]=Xw(n,e&&e.$base),this._includedGrammars[t]}}tokenizeLine(t,e,n=0){const r=this._tokenize(t,e,!1,n);return{tokens:r.lineTokens.getResult(r.ruleStack,r.lineLength),ruleStack:r.ruleStack,stoppedEarly:r.stoppedEarly}}tokenizeLine2(t,e,n=0){const r=this._tokenize(t,e,!0,n);return{tokens:r.lineTokens.getBinaryResult(r.ruleStack,r.lineLength),ruleStack:r.ruleStack,stoppedEarly:r.stoppedEarly}}_tokenize(t,e,n,r){this._rootId===-1&&(this._rootId=tE.getCompiledRuleId(this._grammar.repository.$self,this,this._grammar.repository),this.getInjections());let s;if(!e||e===kg.NULL){s=!0;const d=this._basicScopeAttributesProvider.getDefaultAttributes(),m=this.themeProvider.getDefaults(),p=eo.set(0,d.languageId,d.tokenType,null,m.fontStyle,m.foregroundId,m.backgroundId),y=this.getRule(this._rootId).getName(null,null);let g;y?g=Nl.createRootAndLookUpScopeName(y,p,this):g=Nl.createRoot("unknown",p),e=new kg(null,this._rootId,-1,-1,!1,null,g,g)}else s=!1,e.reset();t=t+`
`;const a=this.createOnigString(t),l=a.content.length,u=new gL(n,t,this._tokenTypeMatchers,this.balancedBracketSelectors),f=rE(this,a,s,0,e,u,!0,r);return Xk(a),{lineLength:l,lineTokens:u,ruleStack:f.stack,stoppedEarly:f.stoppedEarly}}};function Xw(t,e){return t=Mj(t),t.repository=t.repository||{},t.repository.$self={$vscodeTextmateLocation:t.$vscodeTextmateLocation,patterns:t.patterns,name:t.scopeName},t.repository.$base=e||t.repository.$self,t}var Nl=class Ur{constructor(e,n,r){this.parent=e,this.scopePath=n,this.tokenAttributes=r}static fromExtension(e,n){let r=e,s=e?.scopePath??null;for(const a of n)s=cm.push(s,a.scopeNames),r=new Ur(r,s,a.encodedTokenAttributes);return r}static createRoot(e,n){return new Ur(null,new cm(null,e),n)}static createRootAndLookUpScopeName(e,n,r){const s=r.getMetadataForScope(e),a=new cm(null,e),l=r.themeProvider.themeMatch(a),u=Ur.mergeAttributes(n,s,l);return new Ur(null,a,u)}get scopeName(){return this.scopePath.scopeName}toString(){return this.getScopeNames().join(" ")}equals(e){return Ur.equals(this,e)}static equals(e,n){do{if(e===n||!e&&!n)return!0;if(!e||!n||e.scopeName!==n.scopeName||e.tokenAttributes!==n.tokenAttributes)return!1;e=e.parent,n=n.parent}while(!0)}static mergeAttributes(e,n,r){let s=-1,a=0,l=0;return r!==null&&(s=r.fontStyle,a=r.foregroundId,l=r.backgroundId),eo.set(e,n.languageId,n.tokenType,null,s,a,l)}pushAttributed(e,n){if(e===null)return this;if(e.indexOf(" ")===-1)return Ur._pushAttributed(this,e,n);const r=e.split(/ /g);let s=this;for(const a of r)s=Ur._pushAttributed(s,a,n);return s}static _pushAttributed(e,n,r){const s=r.getMetadataForScope(n),a=e.scopePath.push(n),l=r.themeProvider.themeMatch(a),u=Ur.mergeAttributes(e.tokenAttributes,s,l);return new Ur(e,a,u)}getScopeNames(){return this.scopePath.getSegments()}getExtensionIfDefined(e){const n=[];let r=this;for(;r&&r!==e;)n.push({encodedTokenAttributes:r.tokenAttributes,scopeNames:r.scopePath.getExtensionIfDefined(r.parent?.scopePath??null)}),r=r.parent;return r===e?n.reverse():void 0}},kg=class Oi{constructor(e,n,r,s,a,l,u,f){this.parent=e,this.ruleId=n,this.beginRuleCapturedEOL=a,this.endRule=l,this.nameScopesList=u,this.contentNameScopesList=f,this.depth=this.parent?this.parent.depth+1:1,this._enterPos=r,this._anchorPos=s}_stackElementBrand=void 0;static NULL=new Oi(null,0,0,0,!1,null,null,null);_enterPos;_anchorPos;depth;equals(e){return e===null?!1:Oi._equals(this,e)}static _equals(e,n){return e===n?!0:this._structuralEquals(e,n)?Nl.equals(e.contentNameScopesList,n.contentNameScopesList):!1}static _structuralEquals(e,n){do{if(e===n||!e&&!n)return!0;if(!e||!n||e.depth!==n.depth||e.ruleId!==n.ruleId||e.endRule!==n.endRule)return!1;e=e.parent,n=n.parent}while(!0)}clone(){return this}static _reset(e){for(;e;)e._enterPos=-1,e._anchorPos=-1,e=e.parent}reset(){Oi._reset(this)}pop(){return this.parent}safePop(){return this.parent?this.parent:this}push(e,n,r,s,a,l,u){return new Oi(this,e,n,r,s,a,l,u)}getEnterPos(){return this._enterPos}getAnchorPos(){return this._anchorPos}getRule(e){return e.getRule(this.ruleId)}toString(){const e=[];return this._writeString(e,0),"["+e.join(",")+"]"}_writeString(e,n){return this.parent&&(n=this.parent._writeString(e,n)),e[n++]=`(${this.ruleId}, ${this.nameScopesList?.toString()}, ${this.contentNameScopesList?.toString()})`,n}withContentNameScopesList(e){return this.contentNameScopesList===e?this:this.parent.push(this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,this.endRule,this.nameScopesList,e)}withEndRule(e){return this.endRule===e?this:new Oi(this.parent,this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,e,this.nameScopesList,this.contentNameScopesList)}hasSameRuleAs(e){let n=this;for(;n&&n._enterPos===e._enterPos;){if(n.ruleId===e.ruleId)return!0;n=n.parent}return!1}toStateStackFrame(){return{ruleId:this.ruleId,beginRuleCapturedEOL:this.beginRuleCapturedEOL,endRule:this.endRule,nameScopesList:this.nameScopesList?.getExtensionIfDefined(this.parent?.nameScopesList??null)??[],contentNameScopesList:this.contentNameScopesList?.getExtensionIfDefined(this.nameScopesList)??[]}}static pushFrame(e,n){const r=Nl.fromExtension(e?.nameScopesList??null,n.nameScopesList);return new Oi(e,n.ruleId,n.enterPos??-1,n.anchorPos??-1,n.beginRuleCapturedEOL,n.endRule,r,Nl.fromExtension(r,n.contentNameScopesList))}},mL=class{balancedBracketScopes;unbalancedBracketScopes;allowAny=!1;constructor(t,e){this.balancedBracketScopes=t.flatMap(n=>n==="*"?(this.allowAny=!0,[]):Af(n,Nf).map(r=>r.matcher)),this.unbalancedBracketScopes=e.flatMap(n=>Af(n,Nf).map(r=>r.matcher))}get matchesAlways(){return this.allowAny&&this.unbalancedBracketScopes.length===0}get matchesNever(){return this.balancedBracketScopes.length===0&&!this.allowAny}match(t){for(const e of this.unbalancedBracketScopes)if(e(t))return!1;for(const e of this.balancedBracketScopes)if(e(t))return!0;return this.allowAny}},gL=class{constructor(t,e,n,r){this.balancedBracketSelectors=r,this._emitBinaryTokens=t,this._tokenTypeOverrides=n,this._lineText=null,this._tokens=[],this._binaryTokens=[],this._lastTokenEndIndex=0}_emitBinaryTokens;_lineText;_tokens;_binaryTokens;_lastTokenEndIndex;_tokenTypeOverrides;produce(t,e){this.produceFromScopes(t.contentNameScopesList,e)}produceFromScopes(t,e){if(this._lastTokenEndIndex>=e)return;if(this._emitBinaryTokens){let r=t?.tokenAttributes??0,s=!1;if(this.balancedBracketSelectors?.matchesAlways&&(s=!0),this._tokenTypeOverrides.length>0||this.balancedBracketSelectors&&!this.balancedBracketSelectors.matchesAlways&&!this.balancedBracketSelectors.matchesNever){const a=t?.getScopeNames()??[];for(const l of this._tokenTypeOverrides)l.matcher(a)&&(r=eo.set(r,0,l.type,null,-1,0,0));this.balancedBracketSelectors&&(s=this.balancedBracketSelectors.match(a))}if(s&&(r=eo.set(r,0,8,s,-1,0,0)),this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-1]===r){this._lastTokenEndIndex=e;return}this._binaryTokens.push(this._lastTokenEndIndex),this._binaryTokens.push(r),this._lastTokenEndIndex=e;return}const n=t?.getScopeNames()??[];this._tokens.push({startIndex:this._lastTokenEndIndex,endIndex:e,scopes:n}),this._lastTokenEndIndex=e}getResult(t,e){return this._tokens.length>0&&this._tokens[this._tokens.length-1].startIndex===e-1&&this._tokens.pop(),this._tokens.length===0&&(this._lastTokenEndIndex=-1,this.produce(t,e),this._tokens[this._tokens.length-1].startIndex=0),this._tokens}getBinaryResult(t,e){this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-2]===e-1&&(this._binaryTokens.pop(),this._binaryTokens.pop()),this._binaryTokens.length===0&&(this._lastTokenEndIndex=-1,this.produce(t,e),this._binaryTokens[this._binaryTokens.length-2]=0);const n=new Uint32Array(this._binaryTokens.length);for(let r=0,s=this._binaryTokens.length;r<s;r++)n[r]=this._binaryTokens[r];return n}},yL=class{constructor(t,e){this._onigLib=e,this._theme=t}_grammars=new Map;_rawGrammars=new Map;_injectionGrammars=new Map;_theme;dispose(){for(const t of this._grammars.values())t.dispose()}setTheme(t){this._theme=t}getColorMap(){return this._theme.getColorMap()}addGrammar(t,e){this._rawGrammars.set(t.scopeName,t),e&&this._injectionGrammars.set(t.scopeName,e)}lookup(t){return this._rawGrammars.get(t)}injections(t){return this._injectionGrammars.get(t)}getDefaults(){return this._theme.getDefaults()}themeMatch(t){return this._theme.match(t)}grammarForScopeName(t,e,n,r,s){if(!this._grammars.has(t)){let a=this._rawGrammars.get(t);if(!a)return null;this._grammars.set(t,dL(t,a,e,n,r,s,this,this._onigLib))}return this._grammars.get(t)}},bL=class{_options;_syncRegistry;_ensureGrammarCache;constructor(e){this._options=e,this._syncRegistry=new yL(Tf.createFromRawTheme(e.theme,e.colorMap),e.onigLib),this._ensureGrammarCache=new Map}dispose(){this._syncRegistry.dispose()}setTheme(e,n){this._syncRegistry.setTheme(Tf.createFromRawTheme(e,n))}getColorMap(){return this._syncRegistry.getColorMap()}loadGrammarWithEmbeddedLanguages(e,n,r){return this.loadGrammarWithConfiguration(e,n,{embeddedLanguages:r})}loadGrammarWithConfiguration(e,n,r){return this._loadGrammar(e,n,r.embeddedLanguages,r.tokenTypes,new mL(r.balancedBracketSelectors||[],r.unbalancedBracketSelectors||[]))}loadGrammar(e){return this._loadGrammar(e,0,null,null,null)}_loadGrammar(e,n,r,s,a){const l=new Kj(this._syncRegistry,e);for(;l.Q.length>0;)l.Q.map(u=>this._loadSingleGrammar(u.scopeName)),l.processQueue();return this._grammarForScopeName(e,n,r,s,a)}_loadSingleGrammar(e){this._ensureGrammarCache.has(e)||(this._doLoadSingleGrammar(e),this._ensureGrammarCache.set(e,!0))}_doLoadSingleGrammar(e){const n=this._options.loadGrammar(e);if(n){const r=typeof this._options.getInjections=="function"?this._options.getInjections(e):void 0;this._syncRegistry.addGrammar(n,r)}}addGrammar(e,n=[],r=0,s=null){return this._syncRegistry.addGrammar(e,n),this._grammarForScopeName(e.scopeName,r,s)}_grammarForScopeName(e,n=0,r=null,s=null,a=null){return this._syncRegistry.grammarForScopeName(e,n,r,s,a)}},Eg=kg.NULL;const _L=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"];class oc{constructor(e,n,r){this.normal=n,this.property=e,r&&(this.space=r)}}oc.prototype.normal={};oc.prototype.property={};oc.prototype.space=void 0;function iE(t,e){const n={},r={};for(const s of t)Object.assign(n,s.property),Object.assign(r,s.normal);return new oc(n,r,e)}function Cg(t){return t.toLowerCase()}class Hn{constructor(e,n){this.attribute=n,this.property=e}}Hn.prototype.attribute="";Hn.prototype.booleanish=!1;Hn.prototype.boolean=!1;Hn.prototype.commaOrSpaceSeparated=!1;Hn.prototype.commaSeparated=!1;Hn.prototype.defined=!1;Hn.prototype.mustUseProperty=!1;Hn.prototype.number=!1;Hn.prototype.overloadedBoolean=!1;Hn.prototype.property="";Hn.prototype.spaceSeparated=!1;Hn.prototype.space=void 0;let vL=0;const Ue=Fi(),Bt=Fi(),Tg=Fi(),ge=Fi(),bt=Fi(),Ka=Fi(),nr=Fi();function Fi(){return 2**++vL}const Ag=Object.freeze(Object.defineProperty({__proto__:null,boolean:Ue,booleanish:Bt,commaOrSpaceSeparated:nr,commaSeparated:Ka,number:ge,overloadedBoolean:Tg,spaceSeparated:bt},Symbol.toStringTag,{value:"Module"})),fm=Object.keys(Ag);class Dy extends Hn{constructor(e,n,r,s){let a=-1;if(super(e,n),Ww(this,"space",s),typeof r=="number")for(;++a<fm.length;){const l=fm[a];Ww(this,fm[a],(r&Ag[l])===Ag[l])}}}Dy.prototype.defined=!0;function Ww(t,e,n){n&&(t[e]=n)}function ao(t){const e={},n={};for(const[r,s]of Object.entries(t.properties)){const a=new Dy(r,t.transform(t.attributes||{},r),s,t.space);t.mustUseProperty&&t.mustUseProperty.includes(r)&&(a.mustUseProperty=!0),e[r]=a,n[Cg(r)]=r,n[Cg(a.attribute)]=r}return new oc(e,n,t.space)}const aE=ao({properties:{ariaActiveDescendant:null,ariaAtomic:Bt,ariaAutoComplete:null,ariaBusy:Bt,ariaChecked:Bt,ariaColCount:ge,ariaColIndex:ge,ariaColSpan:ge,ariaControls:bt,ariaCurrent:null,ariaDescribedBy:bt,ariaDetails:null,ariaDisabled:Bt,ariaDropEffect:bt,ariaErrorMessage:null,ariaExpanded:Bt,ariaFlowTo:bt,ariaGrabbed:Bt,ariaHasPopup:null,ariaHidden:Bt,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:bt,ariaLevel:ge,ariaLive:null,ariaModal:Bt,ariaMultiLine:Bt,ariaMultiSelectable:Bt,ariaOrientation:null,ariaOwns:bt,ariaPlaceholder:null,ariaPosInSet:ge,ariaPressed:Bt,ariaReadOnly:Bt,ariaRelevant:null,ariaRequired:Bt,ariaRoleDescription:bt,ariaRowCount:ge,ariaRowIndex:ge,ariaRowSpan:ge,ariaSelected:Bt,ariaSetSize:ge,ariaSort:null,ariaValueMax:ge,ariaValueMin:ge,ariaValueNow:ge,ariaValueText:null,role:null},transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function oE(t,e){return e in t?t[e]:e}function lE(t,e){return oE(t,e.toLowerCase())}const xL=ao({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Ka,acceptCharset:bt,accessKey:bt,action:null,allow:null,allowFullScreen:Ue,allowPaymentRequest:Ue,allowUserMedia:Ue,alt:null,as:null,async:Ue,autoCapitalize:null,autoComplete:bt,autoFocus:Ue,autoPlay:Ue,blocking:bt,capture:null,charSet:null,checked:Ue,cite:null,className:bt,cols:ge,colSpan:null,content:null,contentEditable:Bt,controls:Ue,controlsList:bt,coords:ge|Ka,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Ue,defer:Ue,dir:null,dirName:null,disabled:Ue,download:Tg,draggable:Bt,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Ue,formTarget:null,headers:bt,height:ge,hidden:Tg,high:ge,href:null,hrefLang:null,htmlFor:bt,httpEquiv:bt,id:null,imageSizes:null,imageSrcSet:null,inert:Ue,inputMode:null,integrity:null,is:null,isMap:Ue,itemId:null,itemProp:bt,itemRef:bt,itemScope:Ue,itemType:bt,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Ue,low:ge,manifest:null,max:null,maxLength:ge,media:null,method:null,min:null,minLength:ge,multiple:Ue,muted:Ue,name:null,nonce:null,noModule:Ue,noValidate:Ue,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Ue,optimum:ge,pattern:null,ping:bt,placeholder:null,playsInline:Ue,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Ue,referrerPolicy:null,rel:bt,required:Ue,reversed:Ue,rows:ge,rowSpan:ge,sandbox:bt,scope:null,scoped:Ue,seamless:Ue,selected:Ue,shadowRootClonable:Ue,shadowRootDelegatesFocus:Ue,shadowRootMode:null,shape:null,size:ge,sizes:null,slot:null,span:ge,spellCheck:Bt,src:null,srcDoc:null,srcLang:null,srcSet:null,start:ge,step:null,style:null,tabIndex:ge,target:null,title:null,translate:null,type:null,typeMustMatch:Ue,useMap:null,value:Bt,width:ge,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:bt,axis:null,background:null,bgColor:null,border:ge,borderColor:null,bottomMargin:ge,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Ue,declare:Ue,event:null,face:null,frame:null,frameBorder:null,hSpace:ge,leftMargin:ge,link:null,longDesc:null,lowSrc:null,marginHeight:ge,marginWidth:ge,noResize:Ue,noHref:Ue,noShade:Ue,noWrap:Ue,object:null,profile:null,prompt:null,rev:null,rightMargin:ge,rules:null,scheme:null,scrolling:Bt,standby:null,summary:null,text:null,topMargin:ge,valueType:null,version:null,vAlign:null,vLink:null,vSpace:ge,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Ue,disableRemotePlayback:Ue,prefix:null,property:null,results:ge,security:null,unselectable:null},space:"html",transform:lE}),wL=ao({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:nr,accentHeight:ge,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:ge,amplitude:ge,arabicForm:null,ascent:ge,attributeName:null,attributeType:null,azimuth:ge,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:ge,by:null,calcMode:null,capHeight:ge,className:bt,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:ge,diffuseConstant:ge,direction:null,display:null,dur:null,divisor:ge,dominantBaseline:null,download:Ue,dx:null,dy:null,edgeMode:null,editable:null,elevation:ge,enableBackground:null,end:null,event:null,exponent:ge,externalResourcesRequired:null,fill:null,fillOpacity:ge,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Ka,g2:Ka,glyphName:Ka,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:ge,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:ge,horizOriginX:ge,horizOriginY:ge,id:null,ideographic:ge,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:ge,k:ge,k1:ge,k2:ge,k3:ge,k4:ge,kernelMatrix:nr,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:ge,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:ge,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:ge,overlineThickness:ge,paintOrder:null,panose1:null,path:null,pathLength:ge,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:bt,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:ge,pointsAtY:ge,pointsAtZ:ge,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:nr,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:nr,rev:nr,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:nr,requiredFeatures:nr,requiredFonts:nr,requiredFormats:nr,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:ge,specularExponent:ge,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:ge,strikethroughThickness:ge,string:null,stroke:null,strokeDashArray:nr,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:ge,strokeOpacity:ge,strokeWidth:null,style:null,surfaceScale:ge,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:nr,tabIndex:ge,tableValues:null,target:null,targetX:ge,targetY:ge,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:nr,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:ge,underlineThickness:ge,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:ge,values:null,vAlphabetic:ge,vMathematical:ge,vectorEffect:null,vHanging:ge,vIdeographic:ge,version:null,vertAdvY:ge,vertOriginX:ge,vertOriginY:ge,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:ge,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:oE}),cE=ao({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()}}),uE=ao({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:lE}),fE=ao({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()}}),SL={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},kL=/[A-Z]/g,e1=/-[a-z]/g,EL=/^data[-\w.:]+$/i;function dE(t,e){const n=Cg(e);let r=e,s=Hn;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&EL.test(e)){if(e.charAt(4)==="-"){const a=e.slice(5).replace(e1,TL);r="data"+a.charAt(0).toUpperCase()+a.slice(1)}else{const a=e.slice(4);if(!e1.test(a)){let l=a.replace(kL,CL);l.charAt(0)!=="-"&&(l="-"+l),e="data"+l}}s=Dy}return new s(r,e)}function CL(t){return"-"+t.toLowerCase()}function TL(t){return t.charAt(1).toUpperCase()}const hE=iE([aE,xL,cE,uE,fE],"html"),lc=iE([aE,wL,cE,uE,fE],"svg"),t1={}.hasOwnProperty;function AL(t,e){const n=e||{};function r(s,...a){let l=r.invalid;const u=r.handlers;if(s&&t1.call(s,t)){const f=String(s[t]);l=t1.call(u,f)?u[f]:r.unknown}if(l)return l.call(this,s,...a)}return r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}const RL=/["&'<>`]/g,OL=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,NL=/[\x01-\t\v\f\x0E-\x1F\x7F\x81\x8D\x8F\x90\x9D\xA0-\uFFFF]/g,IL=/[|\\{}()[\]^$+*?.]/g,n1=new WeakMap;function ML(t,e){if(t=t.replace(e.subset?DL(e.subset):RL,r),e.subset||e.escapeOnly)return t;return t.replace(OL,n).replace(NL,r);function n(s,a,l){return e.format((s.charCodeAt(0)-55296)*1024+s.charCodeAt(1)-56320+65536,l.charCodeAt(a+2),e)}function r(s,a,l){return e.format(s.charCodeAt(0),l.charCodeAt(a+1),e)}}function DL(t){let e=n1.get(t);return e||(e=jL(t),n1.set(t,e)),e}function jL(t){const e=[];let n=-1;for(;++n<t.length;)e.push(t[n].replace(IL,"\\$&"));return new RegExp("(?:"+e.join("|")+")","g")}const LL=/[\dA-Fa-f]/;function zL(t,e,n){const r="&#x"+t.toString(16).toUpperCase();return n&&e&&!LL.test(String.fromCharCode(e))?r:r+";"}const PL=/\d/;function BL(t,e,n){const r="&#"+String(t);return n&&e&&!PL.test(String.fromCharCode(e))?r:r+";"}const $L=["AElig","AMP","Aacute","Acirc","Agrave","Aring","Atilde","Auml","COPY","Ccedil","ETH","Eacute","Ecirc","Egrave","Euml","GT","Iacute","Icirc","Igrave","Iuml","LT","Ntilde","Oacute","Ocirc","Ograve","Oslash","Otilde","Ouml","QUOT","REG","THORN","Uacute","Ucirc","Ugrave","Uuml","Yacute","aacute","acirc","acute","aelig","agrave","amp","aring","atilde","auml","brvbar","ccedil","cedil","cent","copy","curren","deg","divide","eacute","ecirc","egrave","eth","euml","frac12","frac14","frac34","gt","iacute","icirc","iexcl","igrave","iquest","iuml","laquo","lt","macr","micro","middot","nbsp","not","ntilde","oacute","ocirc","ograve","ordf","ordm","oslash","otilde","ouml","para","plusmn","pound","quot","raquo","reg","sect","shy","sup1","sup2","sup3","szlig","thorn","times","uacute","ucirc","ugrave","uml","uuml","yacute","yen","yuml"],dm={nbsp:"",iexcl:"",cent:"",pound:"",curren:"",yen:"",brvbar:"",sect:"",uml:"",copy:"",ordf:"",laquo:"",not:"",shy:"",reg:"",macr:"",deg:"",plusmn:"",sup2:"",sup3:"",acute:"",micro:"",para:"",middot:"",cedil:"",sup1:"",ordm:"",raquo:"",frac14:"",frac12:"",frac34:"",iquest:"",Agrave:"",Aacute:"",Acirc:"",Atilde:"",Auml:"",Aring:"",AElig:"",Ccedil:"",Egrave:"",Eacute:"",Ecirc:"",Euml:"",Igrave:"",Iacute:"",Icirc:"",Iuml:"",ETH:"",Ntilde:"",Ograve:"",Oacute:"",Ocirc:"",Otilde:"",Ouml:"",times:"",Oslash:"",Ugrave:"",Uacute:"",Ucirc:"",Uuml:"",Yacute:"",THORN:"",szlig:"",agrave:"",aacute:"",acirc:"",atilde:"",auml:"",aring:"",aelig:"",ccedil:"",egrave:"",eacute:"",ecirc:"",euml:"",igrave:"",iacute:"",icirc:"",iuml:"",eth:"",ntilde:"",ograve:"",oacute:"",ocirc:"",otilde:"",ouml:"",divide:"",oslash:"",ugrave:"",uacute:"",ucirc:"",uuml:"",yacute:"",thorn:"",yuml:"",fnof:"",Alpha:"",Beta:"",Gamma:"",Delta:"",Epsilon:"",Zeta:"",Eta:"",Theta:"",Iota:"",Kappa:"",Lambda:"",Mu:"",Nu:"",Xi:"",Omicron:"",Pi:"",Rho:"",Sigma:"",Tau:"",Upsilon:"",Phi:"",Chi:"",Psi:"",Omega:"",alpha:"",beta:"",gamma:"",delta:"",epsilon:"",zeta:"",eta:"",theta:"",iota:"",kappa:"",lambda:"",mu:"",nu:"",xi:"",omicron:"",pi:"",rho:"",sigmaf:"",sigma:"",tau:"",upsilon:"",phi:"",chi:"",psi:"",omega:"",thetasym:"",upsih:"",piv:"",bull:"",hellip:"",prime:"",Prime:"",oline:"",frasl:"",weierp:"",image:"",real:"",trade:"",alefsym:"",larr:"",uarr:"",rarr:"",darr:"",harr:"",crarr:"",lArr:"",uArr:"",rArr:"",dArr:"",hArr:"",forall:"",part:"",exist:"",empty:"",nabla:"",isin:"",notin:"",ni:"",prod:"",sum:"",minus:"",lowast:"",radic:"",prop:"",infin:"",ang:"",and:"",or:"",cap:"",cup:"",int:"",there4:"",sim:"",cong:"",asymp:"",ne:"",equiv:"",le:"",ge:"",sub:"",sup:"",nsub:"",sube:"",supe:"",oplus:"",otimes:"",perp:"",sdot:"",lceil:"",rceil:"",lfloor:"",rfloor:"",lang:"",rang:"",loz:"",spades:"",clubs:"",hearts:"",diams:"",quot:'"',amp:"&",lt:"<",gt:">",OElig:"",oelig:"",Scaron:"",scaron:"",Yuml:"",circ:"",tilde:"",ensp:"",emsp:"",thinsp:"",zwnj:"",zwj:"",lrm:"",rlm:"",ndash:"",mdash:"",lsquo:"",rsquo:"",sbquo:"",ldquo:"",rdquo:"",bdquo:"",dagger:"",Dagger:"",permil:"",lsaquo:"",rsaquo:"",euro:""},UL=["cent","copy","divide","gt","lt","not","para","times"],pE={}.hasOwnProperty,Rg={};let Nu;for(Nu in dm)pE.call(dm,Nu)&&(Rg[dm[Nu]]=Nu);const qL=/[^\dA-Za-z]/;function FL(t,e,n,r){const s=String.fromCharCode(t);if(pE.call(Rg,s)){const a=Rg[s],l="&"+a;return n&&$L.includes(a)&&!UL.includes(a)&&(!r||e&&e!==61&&qL.test(String.fromCharCode(e)))?l:l+";"}return""}function VL(t,e,n){let r=zL(t,e,n.omitOptionalSemicolons),s;if((n.useNamedReferences||n.useShortestReferences)&&(s=FL(t,e,n.omitOptionalSemicolons,n.attribute)),(n.useShortestReferences||!s)&&n.useShortestReferences){const a=BL(t,e,n.omitOptionalSemicolons);a.length<r.length&&(r=a)}return s&&(!n.useShortestReferences||s.length<r.length)?s:r}function Za(t,e){return ML(t,Object.assign({format:VL},e))}const HL=/^>|^->|<!--|-->|--!>|<!-$/g,GL=[">"],KL=["<",">"];function ZL(t,e,n,r){return r.settings.bogusComments?"<?"+Za(t.value,Object.assign({},r.settings.characterReferences,{subset:GL}))+">":"<!--"+t.value.replace(HL,s)+"-->";function s(a){return Za(a,Object.assign({},r.settings.characterReferences,{subset:KL}))}}function QL(t,e,n,r){return"<!"+(r.settings.upperDoctype?"DOCTYPE":"doctype")+(r.settings.tightDoctype?"":" ")+"html>"}function If(t,e){const n=String(t);if(typeof e!="string")throw new TypeError("Expected character");let r=0,s=n.indexOf(e);for(;s!==-1;)r++,s=n.indexOf(e,s+e.length);return r}function mE(t,e){const n=e||{};return(t[t.length-1]===""?[...t,""]:t).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}function gE(t){return t.join(" ").trim()}const JL=/[ \t\n\f\r]/g;function od(t){return typeof t=="object"?t.type==="text"?r1(t.value):!1:r1(t)}function r1(t){return t.replace(JL,"")===""}const Zt=bE(1),yE=bE(-1),YL=[];function bE(t){return e;function e(n,r,s){const a=n?n.children:YL;let l=(r||0)+t,u=a[l];if(!s)for(;u&&od(u);)l+=t,u=a[l];return u}}const XL={}.hasOwnProperty;function _E(t){return e;function e(n,r,s){return XL.call(t,n.tagName)&&t[n.tagName](n,r,s)}}const jy=_E({body:e5,caption:hm,colgroup:hm,dd:s5,dt:r5,head:hm,html:WL,li:n5,optgroup:i5,option:a5,p:t5,rp:s1,rt:s1,tbody:l5,td:i1,tfoot:c5,th:i1,thead:o5,tr:u5});function hm(t,e,n){const r=Zt(n,e,!0);return!r||r.type!=="comment"&&!(r.type==="text"&&od(r.value.charAt(0)))}function WL(t,e,n){const r=Zt(n,e);return!r||r.type!=="comment"}function e5(t,e,n){const r=Zt(n,e);return!r||r.type!=="comment"}function t5(t,e,n){const r=Zt(n,e);return r?r.type==="element"&&(r.tagName==="address"||r.tagName==="article"||r.tagName==="aside"||r.tagName==="blockquote"||r.tagName==="details"||r.tagName==="div"||r.tagName==="dl"||r.tagName==="fieldset"||r.tagName==="figcaption"||r.tagName==="figure"||r.tagName==="footer"||r.tagName==="form"||r.tagName==="h1"||r.tagName==="h2"||r.tagName==="h3"||r.tagName==="h4"||r.tagName==="h5"||r.tagName==="h6"||r.tagName==="header"||r.tagName==="hgroup"||r.tagName==="hr"||r.tagName==="main"||r.tagName==="menu"||r.tagName==="nav"||r.tagName==="ol"||r.tagName==="p"||r.tagName==="pre"||r.tagName==="section"||r.tagName==="table"||r.tagName==="ul"):!n||!(n.type==="element"&&(n.tagName==="a"||n.tagName==="audio"||n.tagName==="del"||n.tagName==="ins"||n.tagName==="map"||n.tagName==="noscript"||n.tagName==="video"))}function n5(t,e,n){const r=Zt(n,e);return!r||r.type==="element"&&r.tagName==="li"}function r5(t,e,n){const r=Zt(n,e);return!!(r&&r.type==="element"&&(r.tagName==="dt"||r.tagName==="dd"))}function s5(t,e,n){const r=Zt(n,e);return!r||r.type==="element"&&(r.tagName==="dt"||r.tagName==="dd")}function s1(t,e,n){const r=Zt(n,e);return!r||r.type==="element"&&(r.tagName==="rp"||r.tagName==="rt")}function i5(t,e,n){const r=Zt(n,e);return!r||r.type==="element"&&r.tagName==="optgroup"}function a5(t,e,n){const r=Zt(n,e);return!r||r.type==="element"&&(r.tagName==="option"||r.tagName==="optgroup")}function o5(t,e,n){const r=Zt(n,e);return!!(r&&r.type==="element"&&(r.tagName==="tbody"||r.tagName==="tfoot"))}function l5(t,e,n){const r=Zt(n,e);return!r||r.type==="element"&&(r.tagName==="tbody"||r.tagName==="tfoot")}function c5(t,e,n){return!Zt(n,e)}function u5(t,e,n){const r=Zt(n,e);return!r||r.type==="element"&&r.tagName==="tr"}function i1(t,e,n){const r=Zt(n,e);return!r||r.type==="element"&&(r.tagName==="td"||r.tagName==="th")}const f5=_E({body:p5,colgroup:m5,head:h5,html:d5,tbody:g5});function d5(t){const e=Zt(t,-1);return!e||e.type!=="comment"}function h5(t){const e=new Set;for(const r of t.children)if(r.type==="element"&&(r.tagName==="base"||r.tagName==="title")){if(e.has(r.tagName))return!1;e.add(r.tagName)}const n=t.children[0];return!n||n.type==="element"}function p5(t){const e=Zt(t,-1,!0);return!e||e.type!=="comment"&&!(e.type==="text"&&od(e.value.charAt(0)))&&!(e.type==="element"&&(e.tagName==="meta"||e.tagName==="link"||e.tagName==="script"||e.tagName==="style"||e.tagName==="template"))}function m5(t,e,n){const r=yE(n,e),s=Zt(t,-1,!0);return n&&r&&r.type==="element"&&r.tagName==="colgroup"&&jy(r,n.children.indexOf(r),n)?!1:!!(s&&s.type==="element"&&s.tagName==="col")}function g5(t,e,n){const r=yE(n,e),s=Zt(t,-1);return n&&r&&r.type==="element"&&(r.tagName==="thead"||r.tagName==="tbody")&&jy(r,n.children.indexOf(r),n)?!1:!!(s&&s.type==="element"&&s.tagName==="tr")}const Iu={name:[[`	
\f\r &/=>`.split(""),`	
\f\r "&'/=>\``.split("")],[`\0	
\f\r "&'/<=>`.split(""),`\0	
\f\r "&'/<=>\``.split("")]],unquoted:[[`	
\f\r &>`.split(""),`\0	
\f\r "&'<=>\``.split("")],[`\0	
\f\r "&'<=>\``.split(""),`\0	
\f\r "&'<=>\``.split("")]],single:[["&'".split(""),"\"&'`".split("")],["\0&'".split(""),"\0\"&'`".split("")]],double:[['"&'.split(""),"\"&'`".split("")],['\0"&'.split(""),"\0\"&'`".split("")]]};function y5(t,e,n,r){const s=r.schema,a=s.space==="svg"?!1:r.settings.omitOptionalTags;let l=s.space==="svg"?r.settings.closeEmptyElements:r.settings.voids.includes(t.tagName.toLowerCase());const u=[];let f;s.space==="html"&&t.tagName==="svg"&&(r.schema=lc);const d=b5(r,t.properties),m=r.all(s.space==="html"&&t.tagName==="template"?t.content:t);return r.schema=s,m&&(l=!1),(d||!a||!f5(t,e,n))&&(u.push("<",t.tagName,d?" "+d:""),l&&(s.space==="svg"||r.settings.closeSelfClosing)&&(f=d.charAt(d.length-1),(!r.settings.tightSelfClosing||f==="/"||f&&f!=='"'&&f!=="'")&&u.push(" "),u.push("/")),u.push(">")),u.push(m),!l&&(!a||!jy(t,e,n))&&u.push("</"+t.tagName+">"),u.join("")}function b5(t,e){const n=[];let r=-1,s;if(e){for(s in e)if(e[s]!==null&&e[s]!==void 0){const a=_5(t,s,e[s]);a&&n.push(a)}}for(;++r<n.length;){const a=t.settings.tightAttributes?n[r].charAt(n[r].length-1):void 0;r!==n.length-1&&a!=='"'&&a!=="'"&&(n[r]+=" ")}return n.join("")}function _5(t,e,n){const r=dE(t.schema,e),s=t.settings.allowParseErrors&&t.schema.space==="html"?0:1,a=t.settings.allowDangerousCharacters?0:1;let l=t.quote,u;if(r.overloadedBoolean&&(n===r.attribute||n==="")?n=!0:(r.boolean||r.overloadedBoolean)&&(typeof n!="string"||n===r.attribute||n==="")&&(n=!!n),n==null||n===!1||typeof n=="number"&&Number.isNaN(n))return"";const f=Za(r.attribute,Object.assign({},t.settings.characterReferences,{subset:Iu.name[s][a]}));return n===!0||(n=Array.isArray(n)?(r.commaSeparated?mE:gE)(n,{padLeft:!t.settings.tightCommaSeparatedLists}):String(n),t.settings.collapseEmptyAttributes&&!n)?f:(t.settings.preferUnquoted&&(u=Za(n,Object.assign({},t.settings.characterReferences,{attribute:!0,subset:Iu.unquoted[s][a]}))),u!==n&&(t.settings.quoteSmart&&If(n,l)>If(n,t.alternative)&&(l=t.alternative),u=l+Za(n,Object.assign({},t.settings.characterReferences,{subset:(l==="'"?Iu.single:Iu.double)[s][a],attribute:!0}))+l),f+(u&&"="+u))}const v5=["<","&"];function vE(t,e,n,r){return n&&n.type==="element"&&(n.tagName==="script"||n.tagName==="style")?t.value:Za(t.value,Object.assign({},r.settings.characterReferences,{subset:v5}))}function x5(t,e,n,r){return r.settings.allowDangerousHtml?t.value:vE(t,e,n,r)}function w5(t,e,n,r){return r.all(t)}const S5=AL("type",{invalid:k5,unknown:E5,handlers:{comment:ZL,doctype:QL,element:y5,raw:x5,root:w5,text:vE}});function k5(t){throw new Error("Expected node, not `"+t+"`")}function E5(t){const e=t;throw new Error("Cannot compile unknown node `"+e.type+"`")}const C5={},T5={},A5=[];function R5(t,e){const n=e||C5,r=n.quote||'"',s=r==='"'?"'":'"';if(r!=='"'&&r!=="'")throw new Error("Invalid quote `"+r+"`, expected `'` or `\"`");return{one:O5,all:N5,settings:{omitOptionalTags:n.omitOptionalTags||!1,allowParseErrors:n.allowParseErrors||!1,allowDangerousCharacters:n.allowDangerousCharacters||!1,quoteSmart:n.quoteSmart||!1,preferUnquoted:n.preferUnquoted||!1,tightAttributes:n.tightAttributes||!1,upperDoctype:n.upperDoctype||!1,tightDoctype:n.tightDoctype||!1,bogusComments:n.bogusComments||!1,tightCommaSeparatedLists:n.tightCommaSeparatedLists||!1,tightSelfClosing:n.tightSelfClosing||!1,collapseEmptyAttributes:n.collapseEmptyAttributes||!1,allowDangerousHtml:n.allowDangerousHtml||!1,voids:n.voids||_L,characterReferences:n.characterReferences||T5,closeSelfClosing:n.closeSelfClosing||!1,closeEmptyElements:n.closeEmptyElements||!1},schema:n.space==="svg"?lc:hE,quote:r,alternative:s}.one(Array.isArray(t)?{type:"root",children:t}:t,void 0,void 0)}function O5(t,e,n){return S5(t,e,n,this)}function N5(t){const e=[],n=t&&t.children||A5;let r=-1;for(;++r<n.length;)e[r]=this.one(n[r],r,t);return e.join("")}function Mf(t,e){const n=typeof t=="string"?{}:{...t.colorReplacements},r=typeof t=="string"?t:t.name;for(const[s,a]of Object.entries(e?.colorReplacements||{}))typeof a=="string"?n[s]=a:s===r&&Object.assign(n,a);return n}function ni(t,e){return t&&(e?.[t?.toLowerCase()]||t)}function I5(t){return Array.isArray(t)?t:[t]}async function xE(t){return Promise.resolve(typeof t=="function"?t():t).then(e=>e.default||e)}function Ly(t){return!t||["plaintext","txt","text","plain"].includes(t)}function wE(t){return t==="ansi"||Ly(t)}function zy(t){return t==="none"}function SE(t){return zy(t)}function kE(t,e){if(!e)return t;t.properties||={},t.properties.class||=[],typeof t.properties.class=="string"&&(t.properties.class=t.properties.class.split(/\s+/g)),Array.isArray(t.properties.class)||(t.properties.class=[]);const n=Array.isArray(e)?e:e.split(/\s+/g);for(const r of n)r&&!t.properties.class.includes(r)&&t.properties.class.push(r);return t}function ld(t,e=!1){if(t.length===0)return[["",0]];const n=t.split(/(\r?\n)/g);let r=0;const s=[];for(let a=0;a<n.length;a+=2){const l=e?n[a]+(n[a+1]||""):n[a];s.push([l,r]),r+=n[a].length,r+=n[a+1]?.length||0}return s}function M5(t){const e=ld(t,!0).map(([s])=>s);function n(s){if(s===t.length)return{line:e.length-1,character:e[e.length-1].length};let a=s,l=0;for(const u of e){if(a<u.length)break;a-=u.length,l++}return{line:l,character:a}}function r(s,a){let l=0;for(let u=0;u<s;u++)l+=e[u].length;return l+=a,l}return{lines:e,indexToPos:n,posToIndex:r}}function D5(t,e,n){const r=new Set;for(const a of t.matchAll(/:?lang=["']([^"']+)["']/g)){const l=a[1].toLowerCase().trim();l&&r.add(l)}for(const a of t.matchAll(/(?:```|~~~)([\w-]+)/g)){const l=a[1].toLowerCase().trim();l&&r.add(l)}for(const a of t.matchAll(/\\begin\{([\w-]+)\}/g)){const l=a[1].toLowerCase().trim();l&&r.add(l)}for(const a of t.matchAll(/<script\s+(?:type|lang)=["']([^"']+)["']/gi)){const l=a[1].toLowerCase().trim(),u=l.includes("/")?l.split("/").pop():l;u&&r.add(u)}if(!n)return Array.from(r);const s=n.getBundledLanguages();return Array.from(r).filter(a=>a&&s[a])}const Py="light-dark()",j5=["color","background-color"];function L5(t,e){let n=0;const r=[];for(const s of e)s>n&&r.push({...t,content:t.content.slice(n,s),offset:t.offset+n}),n=s;return n<t.content.length&&r.push({...t,content:t.content.slice(n),offset:t.offset+n}),r}function z5(t,e){const n=Array.from(e instanceof Set?e:new Set(e)).sort((r,s)=>r-s);return n.length?t.map(r=>r.flatMap(s=>{const a=n.filter(l=>s.offset<l&&l<s.offset+s.content.length).map(l=>l-s.offset).sort((l,u)=>l-u);return a.length?L5(s,a):s})):t}function P5(t,e,n,r,s="css-vars"){const a={content:t.content,explanation:t.explanation,offset:t.offset},l=e.map(m=>Df(t.variants[m])),u=new Set(l.flatMap(m=>Object.keys(m))),f={},d=(m,p)=>{const y=p==="color"?"":p==="background-color"?"-bg":`-${p}`;return n+e[m]+(p==="color"?"":y)};return l.forEach((m,p)=>{for(const y of u){const g=m[y]||"inherit";if(p===0&&r&&j5.includes(y))if(r===Py&&l.length>1){const v=e.findIndex(T=>T==="light"),x=e.findIndex(T=>T==="dark");if(v===-1||x===-1)throw new $t('When using `defaultColor: "light-dark()"`, you must provide both `light` and `dark` themes');const C=l[v][y]||"inherit",k=l[x][y]||"inherit";f[y]=`light-dark(${C}, ${k})`,s==="css-vars"&&(f[d(p,y)]=g)}else f[y]=g;else s==="css-vars"&&(f[d(p,y)]=g)}}),a.htmlStyle=f,a}function Df(t){const e={};if(t.color&&(e.color=t.color),t.bgColor&&(e["background-color"]=t.bgColor),t.fontStyle){t.fontStyle&kn.Italic&&(e["font-style"]="italic"),t.fontStyle&kn.Bold&&(e["font-weight"]="bold");const n=[];t.fontStyle&kn.Underline&&n.push("underline"),t.fontStyle&kn.Strikethrough&&n.push("line-through"),n.length&&(e["text-decoration"]=n.join(" "))}return e}function Og(t){return typeof t=="string"?t:Object.entries(t).map(([e,n])=>`${e}:${n}`).join(";")}const EE=new WeakMap;function cd(t,e){EE.set(t,e)}function Ql(t){return EE.get(t)}class oo{_stacks={};lang;get themes(){return Object.keys(this._stacks)}get theme(){return this.themes[0]}get _stack(){return this._stacks[this.theme]}static initial(e,n){return new oo(Object.fromEntries(I5(n).map(r=>[r,Eg])),e)}constructor(...e){if(e.length===2){const[n,r]=e;this.lang=r,this._stacks=n}else{const[n,r,s]=e;this.lang=r,this._stacks={[s]:n}}}getInternalStack(e=this.theme){return this._stacks[e]}getScopes(e=this.theme){return B5(this._stacks[e])}toJSON(){return{lang:this.lang,theme:this.theme,themes:this.themes,scopes:this.getScopes()}}}function B5(t){const e=[],n=new Set;function r(s){if(n.has(s))return;n.add(s);const a=s?.nameScopesList?.scopeName;a&&e.push(a),s.parent&&r(s.parent)}return r(t),e}function $5(t,e){if(!(t instanceof oo))throw new $t("Invalid grammar state");return t.getInternalStack(e)}function U5(){const t=new WeakMap;function e(n){if(!t.has(n.meta)){let r=function(l){if(typeof l=="number"){if(l<0||l>n.source.length)throw new $t(`Invalid decoration offset: ${l}. Code length: ${n.source.length}`);return{...s.indexToPos(l),offset:l}}else{const u=s.lines[l.line];if(u===void 0)throw new $t(`Invalid decoration position ${JSON.stringify(l)}. Lines length: ${s.lines.length}`);let f=l.character;if(f<0&&(f=u.length+f),f<0||f>u.length)throw new $t(`Invalid decoration position ${JSON.stringify(l)}. Line ${l.line} length: ${u.length}`);return{...l,character:f,offset:s.posToIndex(l.line,f)}}};const s=M5(n.source),a=(n.options.decorations||[]).map(l=>({...l,start:r(l.start),end:r(l.end)}));q5(a),t.set(n.meta,{decorations:a,converter:s,source:n.source})}return t.get(n.meta)}return{name:"shiki:decorations",tokens(n){if(!this.options.decorations?.length)return;const s=e(this).decorations.flatMap(l=>[l.start.offset,l.end.offset]);return z5(n,s)},code(n){if(!this.options.decorations?.length)return;const r=e(this),s=Array.from(n.children).filter(m=>m.type==="element"&&m.tagName==="span");if(s.length!==r.converter.lines.length)throw new $t(`Number of lines in code element (${s.length}) does not match the number of lines in the source (${r.converter.lines.length}). Failed to apply decorations.`);function a(m,p,y,g){const v=s[m];let x="",C=-1,k=-1;if(p===0&&(C=0),y===0&&(k=0),y===Number.POSITIVE_INFINITY&&(k=v.children.length),C===-1||k===-1)for(let A=0;A<v.children.length;A++)x+=CE(v.children[A]),C===-1&&x.length===p&&(C=A+1),k===-1&&x.length===y&&(k=A+1);if(C===-1)throw new $t(`Failed to find start index for decoration ${JSON.stringify(g.start)}`);if(k===-1)throw new $t(`Failed to find end index for decoration ${JSON.stringify(g.end)}`);const T=v.children.slice(C,k);if(!g.alwaysWrap&&T.length===v.children.length)u(v,g,"line");else if(!g.alwaysWrap&&T.length===1&&T[0].type==="element")u(T[0],g,"token");else{const A={type:"element",tagName:"span",properties:{},children:T};u(A,g,"wrapper"),v.children.splice(C,T.length,A)}}function l(m,p){s[m]=u(s[m],p,"line")}function u(m,p,y){const g=p.properties||{},v=p.transform||(x=>x);return m.tagName=p.tagName||"span",m.properties={...m.properties,...g,class:m.properties.class},p.properties?.class&&kE(m,p.properties.class),m=v(m,y)||m,m}const f=[],d=r.decorations.sort((m,p)=>p.start.offset-m.start.offset||m.end.offset-p.end.offset);for(const m of d){const{start:p,end:y}=m;if(p.line===y.line)a(p.line,p.character,y.character,m);else if(p.line<y.line){a(p.line,p.character,Number.POSITIVE_INFINITY,m);for(let g=p.line+1;g<y.line;g++)f.unshift(()=>l(g,m));a(y.line,0,y.character,m)}}f.forEach(m=>m())}}}function q5(t){for(let e=0;e<t.length;e++){const n=t[e];if(n.start.offset>n.end.offset)throw new $t(`Invalid decoration range: ${JSON.stringify(n.start)} - ${JSON.stringify(n.end)}`);for(let r=e+1;r<t.length;r++){const s=t[r],a=n.start.offset<=s.start.offset&&s.start.offset<n.end.offset,l=n.start.offset<s.end.offset&&s.end.offset<=n.end.offset,u=s.start.offset<=n.start.offset&&n.start.offset<s.end.offset,f=s.start.offset<n.end.offset&&n.end.offset<=s.end.offset;if(a||l||u||f){if(a&&l||u&&f||u&&n.start.offset===n.end.offset||l&&s.start.offset===s.end.offset)continue;throw new $t(`Decorations ${JSON.stringify(n.start)} and ${JSON.stringify(s.start)} intersect.`)}}}}function CE(t){return t.type==="text"?t.value:t.type==="element"?t.children.map(CE).join(""):""}const F5=[U5()];function jf(t){const e=V5(t.transformers||[]);return[...e.pre,...e.normal,...e.post,...F5]}function V5(t){const e=[],n=[],r=[];for(const s of t)switch(s.enforce){case"pre":e.push(s);break;case"post":n.push(s);break;default:r.push(s)}return{pre:e,post:n,normal:r}}var Di=["black","red","green","yellow","blue","magenta","cyan","white","brightBlack","brightRed","brightGreen","brightYellow","brightBlue","brightMagenta","brightCyan","brightWhite"],pm={1:"bold",2:"dim",3:"italic",4:"underline",7:"reverse",8:"hidden",9:"strikethrough"};function H5(t,e){const n=t.indexOf("\x1B",e);if(n!==-1&&t[n+1]==="["){const r=t.indexOf("m",n);if(r!==-1)return{sequence:t.substring(n+2,r).split(";"),startPosition:n,position:r+1}}return{position:t.length}}function a1(t){const e=t.shift();if(e==="2"){const n=t.splice(0,3).map(r=>Number.parseInt(r));return n.length!==3||n.some(r=>Number.isNaN(r))?void 0:{type:"rgb",rgb:n}}else if(e==="5"){const n=t.shift();if(n)return{type:"table",index:Number(n)}}}function G5(t){const e=[];for(;t.length>0;){const n=t.shift();if(!n)continue;const r=Number.parseInt(n);if(!Number.isNaN(r))if(r===0)e.push({type:"resetAll"});else if(r<=9)pm[r]&&e.push({type:"setDecoration",value:pm[r]});else if(r<=29){const s=pm[r-20];s&&(e.push({type:"resetDecoration",value:s}),s==="dim"&&e.push({type:"resetDecoration",value:"bold"}))}else if(r<=37)e.push({type:"setForegroundColor",value:{type:"named",name:Di[r-30]}});else if(r===38){const s=a1(t);s&&e.push({type:"setForegroundColor",value:s})}else if(r===39)e.push({type:"resetForegroundColor"});else if(r<=47)e.push({type:"setBackgroundColor",value:{type:"named",name:Di[r-40]}});else if(r===48){const s=a1(t);s&&e.push({type:"setBackgroundColor",value:s})}else r===49?e.push({type:"resetBackgroundColor"}):r===53?e.push({type:"setDecoration",value:"overline"}):r===55?e.push({type:"resetDecoration",value:"overline"}):r>=90&&r<=97?e.push({type:"setForegroundColor",value:{type:"named",name:Di[r-90+8]}}):r>=100&&r<=107&&e.push({type:"setBackgroundColor",value:{type:"named",name:Di[r-100+8]}})}return e}function K5(){let t=null,e=null,n=new Set;return{parse(r){const s=[];let a=0;do{const l=H5(r,a),u=l.sequence?r.substring(a,l.startPosition):r.substring(a);if(u.length>0&&s.push({value:u,foreground:t,background:e,decorations:new Set(n)}),l.sequence){const f=G5(l.sequence);for(const d of f)d.type==="resetAll"?(t=null,e=null,n.clear()):d.type==="resetForegroundColor"?t=null:d.type==="resetBackgroundColor"?e=null:d.type==="resetDecoration"&&n.delete(d.value);for(const d of f)d.type==="setForegroundColor"?t=d.value:d.type==="setBackgroundColor"?e=d.value:d.type==="setDecoration"&&n.add(d.value)}a=l.position}while(a<r.length);return s}}}var Z5={black:"#000000",red:"#bb0000",green:"#00bb00",yellow:"#bbbb00",blue:"#0000bb",magenta:"#ff00ff",cyan:"#00bbbb",white:"#eeeeee",brightBlack:"#555555",brightRed:"#ff5555",brightGreen:"#00ff00",brightYellow:"#ffff55",brightBlue:"#5555ff",brightMagenta:"#ff55ff",brightCyan:"#55ffff",brightWhite:"#ffffff"};function Q5(t=Z5){function e(u){return t[u]}function n(u){return`#${u.map(f=>Math.max(0,Math.min(f,255)).toString(16).padStart(2,"0")).join("")}`}let r;function s(){if(r)return r;r=[];for(let d=0;d<Di.length;d++)r.push(e(Di[d]));let u=[0,95,135,175,215,255];for(let d=0;d<6;d++)for(let m=0;m<6;m++)for(let p=0;p<6;p++)r.push(n([u[d],u[m],u[p]]));let f=8;for(let d=0;d<24;d++,f+=10)r.push(n([f,f,f]));return r}function a(u){return s()[u]}function l(u){switch(u.type){case"named":return e(u.name);case"rgb":return n(u.rgb);case"table":return a(u.index)}}return{value:l}}const J5={black:"#000000",red:"#cd3131",green:"#0DBC79",yellow:"#E5E510",blue:"#2472C8",magenta:"#BC3FBC",cyan:"#11A8CD",white:"#E5E5E5",brightBlack:"#666666",brightRed:"#F14C4C",brightGreen:"#23D18B",brightYellow:"#F5F543",brightBlue:"#3B8EEA",brightMagenta:"#D670D6",brightCyan:"#29B8DB",brightWhite:"#FFFFFF"};function Y5(t,e,n){const r=Mf(t,n),s=ld(e),a=Object.fromEntries(Di.map(f=>{const d=`terminal.ansi${f[0].toUpperCase()}${f.substring(1)}`,m=t.colors?.[d];return[f,m||J5[f]]})),l=Q5(a),u=K5();return s.map(f=>u.parse(f[0]).map(d=>{let m,p;d.decorations.has("reverse")?(m=d.background?l.value(d.background):t.bg,p=d.foreground?l.value(d.foreground):t.fg):(m=d.foreground?l.value(d.foreground):t.fg,p=d.background?l.value(d.background):void 0),m=ni(m,r),p=ni(p,r),d.decorations.has("dim")&&(m=X5(m));let y=kn.None;return d.decorations.has("bold")&&(y|=kn.Bold),d.decorations.has("italic")&&(y|=kn.Italic),d.decorations.has("underline")&&(y|=kn.Underline),d.decorations.has("strikethrough")&&(y|=kn.Strikethrough),{content:d.value,offset:f[1],color:m,bgColor:p,fontStyle:y}}))}function X5(t){const e=t.match(/#([0-9a-f]{3,8})/i);if(e){const r=e[1];if(r.length===8){const s=Math.round(Number.parseInt(r.slice(6,8),16)/2).toString(16).padStart(2,"0");return`#${r.slice(0,6)}${s}`}else{if(r.length===6)return`#${r}80`;if(r.length===4){const s=r[0],a=r[1],l=r[2],u=r[3],f=Math.round(Number.parseInt(`${u}${u}`,16)/2).toString(16).padStart(2,"0");return`#${s}${s}${a}${a}${l}${l}${f}`}else if(r.length===3){const s=r[0],a=r[1],l=r[2];return`#${s}${s}${a}${a}${l}${l}80`}}}const n=t.match(/var\((--[\w-]+-ansi-[\w-]+)\)/);return n?`var(${n[1]}-dim)`:t}function By(t,e,n={}){const{theme:r=t.getLoadedThemes()[0]}=n,s=t.resolveLangAlias(n.lang||"text");if(Ly(s)||zy(r))return ld(e).map(f=>[{content:f[0],offset:f[1]}]);const{theme:a,colorMap:l}=t.setTheme(r);if(s==="ansi")return Y5(a,e,n);const u=t.getLanguage(n.lang||"text");if(n.grammarState){if(n.grammarState.lang!==u.name)throw new $t(`Grammar state language "${n.grammarState.lang}" does not match highlight language "${u.name}"`);if(!n.grammarState.themes.includes(a.name))throw new $t(`Grammar state themes "${n.grammarState.themes}" do not contain highlight theme "${a.name}"`)}return ez(e,u,a,l,n)}function W5(...t){if(t.length===2)return Ql(t[1]);const[e,n,r={}]=t,{lang:s="text",theme:a=e.getLoadedThemes()[0]}=r;if(Ly(s)||zy(a))throw new $t("Plain language does not have grammar state");if(s==="ansi")throw new $t("ANSI language does not have grammar state");const{theme:l,colorMap:u}=e.setTheme(a),f=e.getLanguage(s);return new oo($y(n,f,l,u,r).stateStack,f.name,l.name)}function ez(t,e,n,r,s){const a=$y(t,e,n,r,s),l=new oo(a.stateStack,e.name,n.name);return cd(a.tokens,l),a.tokens}function $y(t,e,n,r,s){const a=Mf(n,s),{tokenizeMaxLineLength:l=0,tokenizeTimeLimit:u=500}=s,f=ld(t);let d=s.grammarState?$5(s.grammarState,n.name)??Eg:s.grammarContextCode!=null?$y(s.grammarContextCode,e,n,r,{...s,grammarState:void 0,grammarContextCode:void 0}).stateStack:Eg,m=[];const p=[];for(let y=0,g=f.length;y<g;y++){const[v,x]=f[y];if(v===""){m=[],p.push([]);continue}if(l>0&&v.length>=l){m=[],p.push([{content:v,offset:x,color:"",fontStyle:0}]);continue}let C,k,T;s.includeExplanation&&(C=e.tokenizeLine(v,d,u),k=C.tokens,T=0);const A=e.tokenizeLine2(v,d,u),M=A.tokens.length/2;for(let I=0;I<M;I++){const O=A.tokens[2*I],B=I+1<M?A.tokens[2*I+2]:v.length;if(O===B)continue;const U=A.tokens[2*I+1],K=ni(r[eo.getForeground(U)],a),j=eo.getFontStyle(U),J={content:v.substring(O,B),offset:x+O,color:K,fontStyle:j};if(s.includeExplanation){const ne=[];if(s.includeExplanation!=="scopeName")for(const Y of n.settings){let q;switch(typeof Y.scope){case"string":q=Y.scope.split(/,/).map(P=>P.trim());break;case"object":q=Y.scope;break;default:continue}ne.push({settings:Y,selectors:q.map(P=>P.split(/ /))})}J.explanation=[];let he=0;for(;O+he<B;){const Y=k[T],q=v.substring(Y.startIndex,Y.endIndex);he+=q.length,J.explanation.push({content:q,scopes:s.includeExplanation==="scopeName"?tz(Y.scopes):nz(ne,Y.scopes)}),T+=1}}m.push(J)}p.push(m),m=[],d=A.ruleStack}return{tokens:p,stateStack:d}}function tz(t){return t.map(e=>({scopeName:e}))}function nz(t,e){const n=[];for(let r=0,s=e.length;r<s;r++){const a=e[r];n[r]={scopeName:a,themeMatches:sz(t,a,e.slice(0,r))}}return n}function o1(t,e){return t===e||e.substring(0,t.length)===t&&e[t.length]==="."}function rz(t,e,n){if(!o1(t[t.length-1],e))return!1;let r=t.length-2,s=n.length-1;for(;r>=0&&s>=0;)o1(t[r],n[s])&&(r-=1),s-=1;return r===-1}function sz(t,e,n){const r=[];for(const{selectors:s,settings:a}of t)for(const l of s)if(rz(l,e,n)){r.push(a);break}return r}function TE(t,e,n){const r=Object.entries(n.themes).filter(f=>f[1]).map(f=>({color:f[0],theme:f[1]})),s=r.map(f=>{const d=By(t,e,{...n,theme:f.theme}),m=Ql(d),p=typeof f.theme=="string"?f.theme:f.theme.name;return{tokens:d,state:m,theme:p}}),a=iz(...s.map(f=>f.tokens)),l=a[0].map((f,d)=>f.map((m,p)=>{const y={content:m.content,variants:{},offset:m.offset};return"includeExplanation"in n&&n.includeExplanation&&(y.explanation=m.explanation),a.forEach((g,v)=>{const{content:x,explanation:C,offset:k,...T}=g[d][p];y.variants[r[v].color]=T}),y})),u=s[0].state?new oo(Object.fromEntries(s.map(f=>[f.theme,f.state?.getInternalStack(f.theme)])),s[0].state.lang):void 0;return u&&cd(l,u),l}function iz(...t){const e=t.map(()=>[]),n=t.length;for(let r=0;r<t[0].length;r++){const s=t.map(f=>f[r]),a=e.map(()=>[]);e.forEach((f,d)=>f.push(a[d]));const l=s.map(()=>0),u=s.map(f=>f[0]);for(;u.every(f=>f);){const f=Math.min(...u.map(d=>d.content.length));for(let d=0;d<n;d++){const m=u[d];m.content.length===f?(a[d].push(m),l[d]+=1,u[d]=s[d][l[d]]):(a[d].push({...m,content:m.content.slice(0,f)}),u[d]={...m,content:m.content.slice(f),offset:m.offset+f})}}}return e}function Lf(t,e,n){let r,s,a,l,u,f;if("themes"in n){const{defaultColor:d="light",cssVariablePrefix:m="--shiki-",colorsRendering:p="css-vars"}=n,y=Object.entries(n.themes).filter(k=>k[1]).map(k=>({color:k[0],theme:k[1]})).sort((k,T)=>k.color===d?-1:T.color===d?1:0);if(y.length===0)throw new $t("`themes` option must not be empty");const g=TE(t,e,n);if(f=Ql(g),d&&Py!==d&&!y.find(k=>k.color===d))throw new $t(`\`themes\` option must contain the defaultColor key \`${d}\``);const v=y.map(k=>t.getTheme(k.theme)),x=y.map(k=>k.color);a=g.map(k=>k.map(T=>P5(T,x,m,d,p))),f&&cd(a,f);const C=y.map(k=>Mf(k.theme,n));s=l1(y,v,C,m,d,"fg",p),r=l1(y,v,C,m,d,"bg",p),l=`shiki-themes ${v.map(k=>k.name).join(" ")}`,u=d?void 0:[s,r].join(";")}else if("theme"in n){const d=Mf(n.theme,n);a=By(t,e,n);const m=t.getTheme(n.theme);r=ni(m.bg,d),s=ni(m.fg,d),l=m.name,f=Ql(a)}else throw new $t("Invalid options, either `theme` or `themes` must be provided");return{tokens:a,fg:s,bg:r,themeName:l,rootStyle:u,grammarState:f}}function l1(t,e,n,r,s,a,l){return t.map((u,f)=>{const d=ni(e[f][a],n[f])||"inherit",m=`${r+u.color}${a==="bg"?"-bg":""}:${d}`;if(f===0&&s){if(s===Py&&t.length>1){const p=t.findIndex(x=>x.color==="light"),y=t.findIndex(x=>x.color==="dark");if(p===-1||y===-1)throw new $t('When using `defaultColor: "light-dark()"`, you must provide both `light` and `dark` themes');const g=ni(e[p][a],n[p])||"inherit",v=ni(e[y][a],n[y])||"inherit";return`light-dark(${g}, ${v});${m}`}return d}return l==="css-vars"?m:null}).filter(u=>!!u).join(";")}function zf(t,e,n,r={meta:{},options:n,codeToHast:(s,a)=>zf(t,s,a),codeToTokens:(s,a)=>Lf(t,s,a)}){let s=e;for(const v of jf(n))s=v.preprocess?.call(r,s,n)||s;let{tokens:a,fg:l,bg:u,themeName:f,rootStyle:d,grammarState:m}=Lf(t,s,n);const{mergeWhitespaces:p=!0,mergeSameStyleTokens:y=!1}=n;p===!0?a=oz(a):p==="never"&&(a=lz(a)),y&&(a=cz(a));const g={...r,get source(){return s}};for(const v of jf(n))a=v.tokens?.call(g,a)||a;return az(a,{...n,fg:l,bg:u,themeName:f,rootStyle:n.rootStyle===!1?!1:n.rootStyle??d},g,m)}function az(t,e,n,r=Ql(t)){const s=jf(e),a=[],l={type:"root",children:[]},{structure:u="classic",tabindex:f="0"}=e,d={class:`shiki ${e.themeName||""}`};e.rootStyle!==!1&&(e.rootStyle!=null?d.style=e.rootStyle:d.style=`background-color:${e.bg};color:${e.fg}`),f!==!1&&f!=null&&(d.tabindex=f.toString());for(const[x,C]of Object.entries(e.meta||{}))x.startsWith("_")||(d[x]=C);let m={type:"element",tagName:"pre",properties:d,children:[]},p={type:"element",tagName:"code",properties:{},children:a};const y=[],g={...n,structure:u,addClassToHast:kE,get source(){return n.source},get tokens(){return t},get options(){return e},get root(){return l},get pre(){return m},get code(){return p},get lines(){return y}};if(t.forEach((x,C)=>{C&&(u==="inline"?l.children.push({type:"element",tagName:"br",properties:{},children:[]}):u==="classic"&&a.push({type:"text",value:`
`}));let k={type:"element",tagName:"span",properties:{class:"line"},children:[]},T=0;for(const A of x){let M={type:"element",tagName:"span",properties:{...A.htmlAttrs},children:[{type:"text",value:A.content}]};const I=Og(A.htmlStyle||Df(A));I&&(M.properties.style=I);for(const O of s)M=O?.span?.call(g,M,C+1,T,k,A)||M;u==="inline"?l.children.push(M):u==="classic"&&k.children.push(M),T+=A.content.length}if(u==="classic"){for(const A of s)k=A?.line?.call(g,k,C+1)||k;y.push(k),a.push(k)}else u==="inline"&&y.push(k)}),u==="classic"){for(const x of s)p=x?.code?.call(g,p)||p;m.children.push(p);for(const x of s)m=x?.pre?.call(g,m)||m;l.children.push(m)}else if(u==="inline"){const x=[];let C={type:"element",tagName:"span",properties:{class:"line"},children:[]};for(const A of l.children)A.type==="element"&&A.tagName==="br"?(x.push(C),C={type:"element",tagName:"span",properties:{class:"line"},children:[]}):(A.type==="element"||A.type==="text")&&C.children.push(A);x.push(C);let T={type:"element",tagName:"code",properties:{},children:x};for(const A of s)T=A?.code?.call(g,T)||T;l.children=[];for(let A=0;A<T.children.length;A++){A>0&&l.children.push({type:"element",tagName:"br",properties:{},children:[]});const M=T.children[A];M.type==="element"&&l.children.push(...M.children)}}let v=l;for(const x of s)v=x?.root?.call(g,v)||v;return r&&cd(v,r),v}function oz(t){return t.map(e=>{const n=[];let r="",s;return e.forEach((a,l)=>{const f=!(a.fontStyle&&(a.fontStyle&kn.Underline||a.fontStyle&kn.Strikethrough));f&&a.content.match(/^\s+$/)&&e[l+1]?(s===void 0&&(s=a.offset),r+=a.content):r?(f?n.push({...a,offset:s,content:r+a.content}):n.push({content:r,offset:s},a),s=void 0,r=""):n.push(a)}),n})}function lz(t){return t.map(e=>e.flatMap(n=>{if(n.content.match(/^\s+$/))return n;const r=n.content.match(/^(\s*)(.*?)(\s*)$/);if(!r)return n;const[,s,a,l]=r;if(!s&&!l)return n;const u=[{...n,offset:n.offset+s.length,content:a}];return s&&u.unshift({content:s,offset:n.offset}),l&&u.push({content:l,offset:n.offset+s.length+a.length}),u}))}function cz(t){return t.map(e=>{const n=[];for(const r of e){if(n.length===0){n.push({...r});continue}const s=n[n.length-1],a=Og(s.htmlStyle||Df(s)),l=Og(r.htmlStyle||Df(r)),u=s.fontStyle&&(s.fontStyle&kn.Underline||s.fontStyle&kn.Strikethrough),f=r.fontStyle&&(r.fontStyle&kn.Underline||r.fontStyle&kn.Strikethrough);!u&&!f&&a===l?s.content+=r.content:n.push({...r})}return n})}const uz=R5;function fz(t,e,n){const r={meta:{},options:n,codeToHast:(a,l)=>zf(t,a,l),codeToTokens:(a,l)=>Lf(t,a,l)};let s=uz(zf(t,e,n,r));for(const a of jf(n))s=a.postprocess?.call(r,s,n)||s;return s}const c1={light:"#333333",dark:"#bbbbbb"},u1={light:"#fffffe",dark:"#1e1e1e"},f1="__shiki_resolved";function Uy(t){if(t?.[f1])return t;const e={...t};e.tokenColors&&!e.settings&&(e.settings=e.tokenColors,delete e.tokenColors),e.type||="dark",e.colorReplacements={...e.colorReplacements},e.settings||=[];let{bg:n,fg:r}=e;if(!n||!r){const u=e.settings?e.settings.find(f=>!f.name&&!f.scope):void 0;u?.settings?.foreground&&(r=u.settings.foreground),u?.settings?.background&&(n=u.settings.background),!r&&e?.colors?.["editor.foreground"]&&(r=e.colors["editor.foreground"]),!n&&e?.colors?.["editor.background"]&&(n=e.colors["editor.background"]),r||(r=e.type==="light"?c1.light:c1.dark),n||(n=e.type==="light"?u1.light:u1.dark),e.fg=r,e.bg=n}e.settings[0]&&e.settings[0].settings&&!e.settings[0].scope||e.settings.unshift({settings:{foreground:e.fg,background:e.bg}});let s=0;const a=new Map;function l(u){if(a.has(u))return a.get(u);s+=1;const f=`#${s.toString(16).padStart(8,"0").toLowerCase()}`;return e.colorReplacements?.[`#${f}`]?l(u):(a.set(u,f),f)}e.settings=e.settings.map(u=>{const f=u.settings?.foreground&&!u.settings.foreground.startsWith("#"),d=u.settings?.background&&!u.settings.background.startsWith("#");if(!f&&!d)return u;const m={...u,settings:{...u.settings}};if(f){const p=l(u.settings.foreground);e.colorReplacements[p]=u.settings.foreground,m.settings.foreground=p}if(d){const p=l(u.settings.background);e.colorReplacements[p]=u.settings.background,m.settings.background=p}return m});for(const u of Object.keys(e.colors||{}))if((u==="editor.foreground"||u==="editor.background"||u.startsWith("terminal.ansi"))&&!e.colors[u]?.startsWith("#")){const f=l(e.colors[u]);e.colorReplacements[f]=e.colors[u],e.colors[u]=f}return Object.defineProperty(e,f1,{enumerable:!1,writable:!1,value:!0}),e}async function AE(t){return Array.from(new Set((await Promise.all(t.filter(e=>!wE(e)).map(async e=>await xE(e).then(n=>Array.isArray(n)?n:[n])))).flat()))}async function RE(t){return(await Promise.all(t.map(async n=>SE(n)?null:Uy(await xE(n))))).filter(n=>!!n)}let dz=3;function hz(t,e=3){e>dz||console.trace(`[SHIKI DEPRECATE]: ${t}`)}let Fa=class extends Error{constructor(e){super(e),this.name="ShikiError"}};function OE(t,e){if(!e)return t;if(e[t]){const n=new Set([t]);for(;e[t];){if(t=e[t],n.has(t))throw new Fa(`Circular alias \`${Array.from(n).join(" -> ")} -> ${t}\``);n.add(t)}}return t}class pz extends bL{constructor(e,n,r,s={}){super(e),this._resolver=e,this._themes=n,this._langs=r,this._alias=s,this._themes.map(a=>this.loadTheme(a)),this.loadLanguages(this._langs)}_resolvedThemes=new Map;_resolvedGrammars=new Map;_langMap=new Map;_langGraph=new Map;_textmateThemeCache=new WeakMap;_loadedThemesCache=null;_loadedLanguagesCache=null;getTheme(e){return typeof e=="string"?this._resolvedThemes.get(e):this.loadTheme(e)}loadTheme(e){const n=Uy(e);return n.name&&(this._resolvedThemes.set(n.name,n),this._loadedThemesCache=null),n}getLoadedThemes(){return this._loadedThemesCache||(this._loadedThemesCache=[...this._resolvedThemes.keys()]),this._loadedThemesCache}setTheme(e){let n=this._textmateThemeCache.get(e);n||(n=Tf.createFromRawTheme(e),this._textmateThemeCache.set(e,n)),this._syncRegistry.setTheme(n)}getGrammar(e){return e=OE(e,this._alias),this._resolvedGrammars.get(e)}loadLanguage(e){if(this.getGrammar(e.name))return;const n=new Set([...this._langMap.values()].filter(a=>a.embeddedLangsLazy?.includes(e.name)));this._resolver.addLanguage(e);const r={balancedBracketSelectors:e.balancedBracketSelectors||["*"],unbalancedBracketSelectors:e.unbalancedBracketSelectors||[]};this._syncRegistry._rawGrammars.set(e.scopeName,e);const s=this.loadGrammarWithConfiguration(e.scopeName,1,r);if(s.name=e.name,this._resolvedGrammars.set(e.name,s),e.aliases&&e.aliases.forEach(a=>{this._alias[a]=e.name}),this._loadedLanguagesCache=null,n.size)for(const a of n)this._resolvedGrammars.delete(a.name),this._loadedLanguagesCache=null,this._syncRegistry?._injectionGrammars?.delete(a.scopeName),this._syncRegistry?._grammars?.delete(a.scopeName),this.loadLanguage(this._langMap.get(a.name))}dispose(){super.dispose(),this._resolvedThemes.clear(),this._resolvedGrammars.clear(),this._langMap.clear(),this._langGraph.clear(),this._loadedThemesCache=null}loadLanguages(e){for(const s of e)this.resolveEmbeddedLanguages(s);const n=Array.from(this._langGraph.entries()),r=n.filter(([s,a])=>!a);if(r.length){const s=n.filter(([a,l])=>l?(l.embeddedLanguages||l.embeddedLangs)?.some(f=>r.map(([d])=>d).includes(f)):!1).filter(a=>!r.includes(a));throw new Fa(`Missing languages ${r.map(([a])=>`\`${a}\``).join(", ")}, required by ${s.map(([a])=>`\`${a}\``).join(", ")}`)}for(const[s,a]of n)this._resolver.addLanguage(a);for(const[s,a]of n)this.loadLanguage(a)}getLoadedLanguages(){return this._loadedLanguagesCache||(this._loadedLanguagesCache=[...new Set([...this._resolvedGrammars.keys(),...Object.keys(this._alias)])]),this._loadedLanguagesCache}resolveEmbeddedLanguages(e){this._langMap.set(e.name,e),this._langGraph.set(e.name,e);const n=e.embeddedLanguages??e.embeddedLangs;if(n)for(const r of n)this._langGraph.set(r,this._langMap.get(r))}}class mz{_langs=new Map;_scopeToLang=new Map;_injections=new Map;_onigLib;constructor(e,n){this._onigLib={createOnigScanner:r=>e.createScanner(r),createOnigString:r=>e.createString(r)},n.forEach(r=>this.addLanguage(r))}get onigLib(){return this._onigLib}getLangRegistration(e){return this._langs.get(e)}loadGrammar(e){return this._scopeToLang.get(e)}addLanguage(e){this._langs.set(e.name,e),e.aliases&&e.aliases.forEach(n=>{this._langs.set(n,e)}),this._scopeToLang.set(e.scopeName,e),e.injectTo&&e.injectTo.forEach(n=>{this._injections.get(n)||this._injections.set(n,[]),this._injections.get(n).push(e.scopeName)})}getInjections(e){const n=e.split(".");let r=[];for(let s=1;s<=n.length;s++){const a=n.slice(0,s).join(".");r=[...r,...this._injections.get(a)||[]]}return r}}let al=0;function gz(t){al+=1,t.warnings!==!1&&al>=10&&al%10===0&&console.warn(`[Shiki] ${al} instances have been created. Shiki is supposed to be used as a singleton, consider refactoring your code to cache your highlighter instance; Or call \`highlighter.dispose()\` to release unused instances.`);let e=!1;if(!t.engine)throw new Fa("`engine` option is required for synchronous mode");const n=(t.langs||[]).flat(1),r=(t.themes||[]).flat(1).map(Uy),s=new mz(t.engine,n),a=new pz(s,r,n,t.langAlias);let l;function u(A){return OE(A,t.langAlias)}function f(A){k();const M=a.getGrammar(typeof A=="string"?A:A.name);if(!M)throw new Fa(`Language \`${A}\` not found, you may need to load it first`);return M}function d(A){if(A==="none")return{bg:"",fg:"",name:"none",settings:[],type:"dark"};k();const M=a.getTheme(A);if(!M)throw new Fa(`Theme \`${A}\` not found, you may need to load it first`);return M}function m(A){k();const M=d(A);l!==A&&(a.setTheme(M),l=A);const I=a.getColorMap();return{theme:M,colorMap:I}}function p(){return k(),a.getLoadedThemes()}function y(){return k(),a.getLoadedLanguages()}function g(...A){k(),a.loadLanguages(A.flat(1))}async function v(...A){return g(await AE(A))}function x(...A){k();for(const M of A.flat(1))a.loadTheme(M)}async function C(...A){return k(),x(await RE(A))}function k(){if(e)throw new Fa("Shiki instance has been disposed")}function T(){e||(e=!0,a.dispose(),al-=1)}return{setTheme:m,getTheme:d,getLanguage:f,getLoadedThemes:p,getLoadedLanguages:y,resolveLangAlias:u,loadLanguage:v,loadLanguageSync:g,loadTheme:C,loadThemeSync:x,dispose:T,[Symbol.dispose]:T}}async function yz(t){t.engine||hz("`engine` option is required. Use `createOnigurumaEngine` or `createJavaScriptRegexEngine` to create an engine.");const[e,n,r]=await Promise.all([RE(t.themes||[]),AE(t.langs||[]),t.engine]);return gz({...t,themes:e,langs:n,engine:r})}async function bz(t){const e=await yz(t);return{getLastGrammarState:(...n)=>W5(e,...n),codeToTokensBase:(n,r)=>By(e,n,r),codeToTokensWithThemes:(n,r)=>TE(e,n,r),codeToTokens:(n,r)=>Lf(e,n,r),codeToHast:(n,r)=>zf(e,n,r),codeToHtml:(n,r)=>fz(e,n,r),getBundledLanguages:()=>({}),getBundledThemes:()=>({}),...e,getInternalContext:()=>e}}function _z(t){const e=t.langs,n=t.themes,r=t.engine;async function s(a){function l(p){if(typeof p=="string"){if(p=a.langAlias?.[p]||p,wE(p))return[];const y=e[p];if(!y)throw new $t(`Language \`${p}\` is not included in this bundle. You may want to load it from external source.`);return y}return p}function u(p){if(SE(p))return"none";if(typeof p=="string"){const y=n[p];if(!y)throw new $t(`Theme \`${p}\` is not included in this bundle. You may want to load it from external source.`);return y}return p}const f=(a.themes??[]).map(p=>u(p)),d=(a.langs??[]).map(p=>l(p)),m=await bz({engine:a.engine??r(),...a,themes:f,langs:d});return{...m,loadLanguage(...p){return m.loadLanguage(...p.map(l))},loadTheme(...p){return m.loadTheme(...p.map(u))},getBundledLanguages(){return e},getBundledThemes(){return n}}}return s}function vz(t){let e;async function n(r={}){if(e){const s=await e;return await Promise.all([s.loadTheme(...r.themes||[]),s.loadLanguage(...r.langs||[])]),s}else{e=t({...r,themes:[],langs:[]});const s=await e;return await Promise.all([s.loadTheme(...r.themes||[]),s.loadLanguage(...r.langs||[])]),s}}return n}function xz(t,e){const n=vz(t);async function r(s,a){const l=await n({langs:[a.lang],themes:"theme"in a?[a.theme]:Object.values(a.themes)}),u=await e?.guessEmbeddedLanguages?.(s,a.lang,l);return u&&await l.loadLanguage(...u),l}return{getSingletonHighlighter(s){return n(s)},async codeToHtml(s,a){return(await r(s,a)).codeToHtml(s,a)},async codeToHast(s,a){return(await r(s,a)).codeToHast(s,a)},async codeToTokens(s,a){return(await r(s,a)).codeToTokens(s,a)},async codeToTokensBase(s,a){return(await r(s,a)).codeToTokensBase(s,a)},async codeToTokensWithThemes(s,a){return(await r(s,a)).codeToTokensWithThemes(s,a)},async getLastGrammarState(s,a){return(await n({langs:[a.lang],themes:[a.theme]})).getLastGrammarState(s,a)}}}const NE=[{id:"abap",name:"ABAP",import:(()=>L(()=>import("./abap-BdImnpbu.js"),[]))},{id:"actionscript-3",name:"ActionScript",import:(()=>L(()=>import("./actionscript-3-CfeIJUat.js"),[]))},{id:"ada",name:"Ada",import:(()=>L(()=>import("./ada-bCR0ucgS.js"),[]))},{id:"angular-html",name:"Angular HTML",import:(()=>L(()=>import("./angular-html-CU67Zn6k.js").then(t=>t.f),__vite__mapDeps([0,1,2,3])))},{id:"angular-ts",name:"Angular TypeScript",import:(()=>L(()=>import("./angular-ts-BwZT4LLn.js"),__vite__mapDeps([4,0,1,2,3,5])))},{id:"apache",name:"Apache Conf",import:(()=>L(()=>import("./apache-Pmp26Uib.js"),[]))},{id:"apex",name:"Apex",import:(()=>L(()=>import("./apex-DDbsPZ6N.js"),[]))},{id:"apl",name:"APL",import:(()=>L(()=>import("./apl-dKokRX4l.js"),__vite__mapDeps([6,1,2,3,7,8,9])))},{id:"applescript",name:"AppleScript",import:(()=>L(()=>import("./applescript-Co6uUVPk.js"),[]))},{id:"ara",name:"Ara",import:(()=>L(()=>import("./ara-BRHolxvo.js"),[]))},{id:"asciidoc",name:"AsciiDoc",aliases:["adoc"],import:(()=>L(()=>import("./asciidoc-Dv7Oe6Be.js"),[]))},{id:"asm",name:"Assembly",import:(()=>L(()=>import("./asm-D_Q5rh1f.js"),[]))},{id:"astro",name:"Astro",import:(()=>L(()=>import("./astro-CbQHKStN.js"),__vite__mapDeps([10,9,2,11,3,12,13])))},{id:"awk",name:"AWK",import:(()=>L(()=>import("./awk-DMzUqQB5.js"),[]))},{id:"ballerina",name:"Ballerina",import:(()=>L(()=>import("./ballerina-BFfxhgS-.js"),[]))},{id:"bat",name:"Batch File",aliases:["batch"],import:(()=>L(()=>import("./bat-BkioyH1T.js"),[]))},{id:"beancount",name:"Beancount",import:(()=>L(()=>import("./beancount-k_qm7-4y.js"),[]))},{id:"berry",name:"Berry",aliases:["be"],import:(()=>L(()=>import("./berry-uYugtg8r.js"),[]))},{id:"bibtex",name:"BibTeX",import:(()=>L(()=>import("./bibtex-CHM0blh-.js"),[]))},{id:"bicep",name:"Bicep",import:(()=>L(()=>import("./bicep-Bmn6On1c.js"),[]))},{id:"blade",name:"Blade",import:(()=>L(()=>import("./blade-DVc8C-J4.js"),__vite__mapDeps([14,15,1,2,3,7,8,16,9])))},{id:"bsl",name:"1C (Enterprise)",aliases:["1c"],import:(()=>L(()=>import("./bsl-BO_Y6i37.js"),__vite__mapDeps([17,18])))},{id:"c",name:"C",import:(()=>L(()=>import("./c-BIGW1oBm.js"),[]))},{id:"cadence",name:"Cadence",aliases:["cdc"],import:(()=>L(()=>import("./cadence-Bv_4Rxtq.js"),[]))},{id:"cairo",name:"Cairo",import:(()=>L(()=>import("./cairo-KRGpt6FW.js"),__vite__mapDeps([19,20])))},{id:"clarity",name:"Clarity",import:(()=>L(()=>import("./clarity-D53aC0YG.js"),[]))},{id:"clojure",name:"Clojure",aliases:["clj"],import:(()=>L(()=>import("./clojure-P80f7IUj.js"),[]))},{id:"cmake",name:"CMake",import:(()=>L(()=>import("./cmake-D1j8_8rp.js"),[]))},{id:"cobol",name:"COBOL",import:(()=>L(()=>import("./cobol-nwyudZeR.js"),__vite__mapDeps([21,1,2,3,8])))},{id:"codeowners",name:"CODEOWNERS",import:(()=>L(()=>import("./codeowners-Bp6g37R7.js"),[]))},{id:"codeql",name:"CodeQL",aliases:["ql"],import:(()=>L(()=>import("./codeql-DsOJ9woJ.js"),[]))},{id:"coffee",name:"CoffeeScript",aliases:["coffeescript"],import:(()=>L(()=>import("./coffee-Ch7k5sss.js"),__vite__mapDeps([22,2])))},{id:"common-lisp",name:"Common Lisp",aliases:["lisp"],import:(()=>L(()=>import("./common-lisp-Cg-RD9OK.js"),[]))},{id:"coq",name:"Coq",import:(()=>L(()=>import("./coq-DkFqJrB1.js"),[]))},{id:"cpp",name:"C++",aliases:["c++"],import:(()=>L(()=>import("./cpp-CofmeUqb.js"),__vite__mapDeps([23,24,25,26,16])))},{id:"crystal",name:"Crystal",import:(()=>L(()=>import("./crystal-tKQVLTB8.js"),__vite__mapDeps([27,1,2,3,16,26,28])))},{id:"csharp",name:"C#",aliases:["c#","cs"],import:(()=>L(()=>import("./csharp-K5feNrxe.js"),[]))},{id:"css",name:"CSS",import:(()=>L(()=>import("./css-DPfMkruS.js"),[]))},{id:"csv",name:"CSV",import:(()=>L(()=>import("./csv-fuZLfV_i.js"),[]))},{id:"cue",name:"CUE",import:(()=>L(()=>import("./cue-D82EKSYY.js"),[]))},{id:"cypher",name:"Cypher",aliases:["cql"],import:(()=>L(()=>import("./cypher-COkxafJQ.js"),[]))},{id:"d",name:"D",import:(()=>L(()=>import("./d-85-TOEBH.js"),[]))},{id:"dart",name:"Dart",import:(()=>L(()=>import("./dart-CF10PKvl.js"),[]))},{id:"dax",name:"DAX",import:(()=>L(()=>import("./dax-CEL-wOlO.js"),[]))},{id:"desktop",name:"Desktop",import:(()=>L(()=>import("./desktop-BmXAJ9_W.js"),[]))},{id:"diff",name:"Diff",import:(()=>L(()=>import("./diff-D97Zzqfu.js"),[]))},{id:"docker",name:"Dockerfile",aliases:["dockerfile"],import:(()=>L(()=>import("./docker-BcOcwvcX.js"),[]))},{id:"dotenv",name:"dotEnv",import:(()=>L(()=>import("./dotenv-Da5cRb03.js"),[]))},{id:"dream-maker",name:"Dream Maker",import:(()=>L(()=>import("./dream-maker-BtqSS_iP.js"),[]))},{id:"edge",name:"Edge",import:(()=>L(()=>import("./edge-BkV0erSs.js"),__vite__mapDeps([29,11,1,2,3,15])))},{id:"elixir",name:"Elixir",import:(()=>L(()=>import("./elixir-CDX3lj18.js"),__vite__mapDeps([30,1,2,3])))},{id:"elm",name:"Elm",import:(()=>L(()=>import("./elm-DbKCFpqz.js"),__vite__mapDeps([31,25,26])))},{id:"emacs-lisp",name:"Emacs Lisp",aliases:["elisp"],import:(()=>L(()=>import("./emacs-lisp-C9XAeP06.js"),[]))},{id:"erb",name:"ERB",import:(()=>L(()=>import("./erb-BOJIQeun.js"),__vite__mapDeps([32,1,2,3,33,34,7,8,16,35,11,36,13,23,24,25,26,28,37,38])))},{id:"erlang",name:"Erlang",aliases:["erl"],import:(()=>L(()=>import("./erlang-DsQrWhSR.js"),__vite__mapDeps([39,40])))},{id:"fennel",name:"Fennel",import:(()=>L(()=>import("./fennel-BYunw83y.js"),[]))},{id:"fish",name:"Fish",import:(()=>L(()=>import("./fish-BvzEVeQv.js"),[]))},{id:"fluent",name:"Fluent",aliases:["ftl"],import:(()=>L(()=>import("./fluent-C4IJs8-o.js"),[]))},{id:"fortran-fixed-form",name:"Fortran (Fixed Form)",aliases:["f","for","f77"],import:(()=>L(()=>import("./fortran-fixed-form-BZjJHVRy.js"),__vite__mapDeps([41,42])))},{id:"fortran-free-form",name:"Fortran (Free Form)",aliases:["f90","f95","f03","f08","f18"],import:(()=>L(()=>import("./fortran-free-form-D22FLkUw.js"),[]))},{id:"fsharp",name:"F#",aliases:["f#","fs"],import:(()=>L(()=>import("./fsharp-CXgrBDvD.js"),__vite__mapDeps([43,40])))},{id:"gdresource",name:"GDResource",import:(()=>L(()=>import("./gdresource-B7Tvp0Sc.js"),__vite__mapDeps([44,45,46])))},{id:"gdscript",name:"GDScript",import:(()=>L(()=>import("./gdscript-DTMYz4Jt.js"),[]))},{id:"gdshader",name:"GDShader",import:(()=>L(()=>import("./gdshader-DkwncUOv.js"),[]))},{id:"genie",name:"Genie",import:(()=>L(()=>import("./genie-D0YGMca9.js"),[]))},{id:"gherkin",name:"Gherkin",import:(()=>L(()=>import("./gherkin-DyxjwDmM.js"),[]))},{id:"git-commit",name:"Git Commit Message",import:(()=>L(()=>import("./git-commit-F4YmCXRG.js"),__vite__mapDeps([47,48])))},{id:"git-rebase",name:"Git Rebase Message",import:(()=>L(()=>import("./git-rebase-r7XF79zn.js"),__vite__mapDeps([49,28])))},{id:"gleam",name:"Gleam",import:(()=>L(()=>import("./gleam-BspZqrRM.js"),[]))},{id:"glimmer-js",name:"Glimmer JS",aliases:["gjs"],import:(()=>L(()=>import("./glimmer-js-Rg0-pVw9.js"),__vite__mapDeps([50,2,11,3,1])))},{id:"glimmer-ts",name:"Glimmer TS",aliases:["gts"],import:(()=>L(()=>import("./glimmer-ts-U6CK756n.js"),__vite__mapDeps([51,11,3,2,1])))},{id:"glsl",name:"GLSL",import:(()=>L(()=>import("./glsl-DplSGwfg.js"),__vite__mapDeps([25,26])))},{id:"gnuplot",name:"Gnuplot",import:(()=>L(()=>import("./gnuplot-DdkO51Og.js"),[]))},{id:"go",name:"Go",import:(()=>L(()=>import("./go-Dn2_MT6a.js"),[]))},{id:"graphql",name:"GraphQL",aliases:["gql"],import:(()=>L(()=>import("./graphql-ChdNCCLP.js"),__vite__mapDeps([35,2,11,36,13])))},{id:"groovy",name:"Groovy",import:(()=>L(()=>import("./groovy-gcz8RCvz.js"),[]))},{id:"hack",name:"Hack",import:(()=>L(()=>import("./hack-CaT9iCJl.js"),__vite__mapDeps([52,1,2,3,16])))},{id:"haml",name:"Ruby Haml",import:(()=>L(()=>import("./haml-B8DHNrY2.js"),__vite__mapDeps([34,2,3])))},{id:"handlebars",name:"Handlebars",aliases:["hbs"],import:(()=>L(()=>import("./handlebars-BL8al0AC.js"),__vite__mapDeps([53,1,2,3,38])))},{id:"haskell",name:"Haskell",aliases:["hs"],import:(()=>L(()=>import("./haskell-Df6bDoY_.js"),[]))},{id:"haxe",name:"Haxe",import:(()=>L(()=>import("./haxe-CzTSHFRz.js"),[]))},{id:"hcl",name:"HashiCorp HCL",import:(()=>L(()=>import("./hcl-BWvSN4gD.js"),[]))},{id:"hjson",name:"Hjson",import:(()=>L(()=>import("./hjson-D5-asLiD.js"),[]))},{id:"hlsl",name:"HLSL",import:(()=>L(()=>import("./hlsl-D3lLCCz7.js"),[]))},{id:"html",name:"HTML",import:(()=>L(()=>import("./html-GMplVEZG.js"),__vite__mapDeps([1,2,3])))},{id:"html-derivative",name:"HTML (Derivative)",import:(()=>L(()=>import("./html-derivative-BFtXZ54Q.js"),__vite__mapDeps([15,1,2,3])))},{id:"http",name:"HTTP",import:(()=>L(()=>import("./http-jrhK8wxY.js"),__vite__mapDeps([54,28,9,7,8,35,2,11,36,13])))},{id:"hurl",name:"Hurl",import:(()=>L(()=>import("./hurl-irOxFIW8.js"),__vite__mapDeps([55,35,2,11,36,13,7,8,56])))},{id:"hxml",name:"HXML",import:(()=>L(()=>import("./hxml-Bvhsp5Yf.js"),__vite__mapDeps([57,58])))},{id:"hy",name:"Hy",import:(()=>L(()=>import("./hy-DFXneXwc.js"),[]))},{id:"imba",name:"Imba",import:(()=>L(()=>import("./imba-DGztddWO.js"),[]))},{id:"ini",name:"INI",aliases:["properties"],import:(()=>L(()=>import("./ini-BEwlwnbL.js"),[]))},{id:"java",name:"Java",import:(()=>L(()=>import("./java-CylS5w8V.js"),[]))},{id:"javascript",name:"JavaScript",aliases:["js","cjs","mjs"],import:(()=>L(()=>import("./javascript-wDzz0qaB.js"),[]))},{id:"jinja",name:"Jinja",import:(()=>L(()=>import("./jinja-4LBKfQ-Z.js"),__vite__mapDeps([59,1,2,3])))},{id:"jison",name:"Jison",import:(()=>L(()=>import("./jison-wvAkD_A8.js"),__vite__mapDeps([60,2])))},{id:"json",name:"JSON",import:(()=>L(()=>import("./json-Cp-IABpG.js"),[]))},{id:"json5",name:"JSON5",import:(()=>L(()=>import("./json5-C9tS-k6U.js"),[]))},{id:"jsonc",name:"JSON with Comments",import:(()=>L(()=>import("./jsonc-Des-eS-w.js"),[]))},{id:"jsonl",name:"JSON Lines",import:(()=>L(()=>import("./jsonl-DcaNXYhu.js"),[]))},{id:"jsonnet",name:"Jsonnet",import:(()=>L(()=>import("./jsonnet-DFQXde-d.js"),[]))},{id:"jssm",name:"JSSM",aliases:["fsl"],import:(()=>L(()=>import("./jssm-C2t-YnRu.js"),[]))},{id:"jsx",name:"JSX",import:(()=>L(()=>import("./jsx-g9-lgVsj.js"),[]))},{id:"julia",name:"Julia",aliases:["jl"],import:(()=>L(()=>import("./julia-C8NyazO9.js"),__vite__mapDeps([61,23,24,25,26,16,20,2,62])))},{id:"kdl",name:"KDL",import:(()=>L(()=>import("./kdl-DV7GczEv.js"),[]))},{id:"kotlin",name:"Kotlin",aliases:["kt","kts"],import:(()=>L(()=>import("./kotlin-BdnUsdx6.js"),[]))},{id:"kusto",name:"Kusto",aliases:["kql"],import:(()=>L(()=>import("./kusto-BvAqAH-y.js"),[]))},{id:"latex",name:"LaTeX",import:(()=>L(()=>import("./latex-BdAV_C_H.js"),__vite__mapDeps([63,64,62])))},{id:"lean",name:"Lean 4",aliases:["lean4"],import:(()=>L(()=>import("./lean-Bc6EcWN3.js"),[]))},{id:"less",name:"Less",import:(()=>L(()=>import("./less-B1dDrJ26.js"),[]))},{id:"liquid",name:"Liquid",import:(()=>L(()=>import("./liquid-DYVedYrR.js"),__vite__mapDeps([65,1,2,3,9])))},{id:"llvm",name:"LLVM IR",import:(()=>L(()=>import("./llvm-BtvRca6l.js"),[]))},{id:"log",name:"Log file",import:(()=>L(()=>import("./log-2UxHyX5q.js"),[]))},{id:"logo",name:"Logo",import:(()=>L(()=>import("./logo-BtOb2qkB.js"),[]))},{id:"lua",name:"Lua",import:(()=>L(()=>import("./lua-BbnMAYS6.js"),__vite__mapDeps([37,26])))},{id:"luau",name:"Luau",import:(()=>L(()=>import("./luau-CXu1NL6O.js"),[]))},{id:"make",name:"Makefile",aliases:["makefile"],import:(()=>L(()=>import("./make-CHLpvVh8.js"),[]))},{id:"markdown",name:"Markdown",aliases:["md"],import:(()=>L(()=>import("./markdown-Cvjx9yec.js"),[]))},{id:"marko",name:"Marko",import:(()=>L(()=>import("./marko-CPi9NSCl.js"),__vite__mapDeps([66,3,67,5,11])))},{id:"matlab",name:"MATLAB",import:(()=>L(()=>import("./matlab-D7o27uSR.js"),[]))},{id:"mdc",name:"MDC",import:(()=>L(()=>import("./mdc-DUICxH0z.js"),__vite__mapDeps([68,40,38,15,1,2,3])))},{id:"mdx",name:"MDX",import:(()=>L(()=>import("./mdx-Cmh6b_Ma.js"),[]))},{id:"mermaid",name:"Mermaid",aliases:["mmd"],import:(()=>L(()=>import("./mermaid-DKYwYmdq.js"),[]))},{id:"mipsasm",name:"MIPS Assembly",aliases:["mips"],import:(()=>L(()=>import("./mipsasm-CKIfxQSi.js"),[]))},{id:"mojo",name:"Mojo",import:(()=>L(()=>import("./mojo-1DNp92w6.js"),[]))},{id:"move",name:"Move",import:(()=>L(()=>import("./move-Bu9oaDYs.js"),[]))},{id:"narrat",name:"Narrat Language",aliases:["nar"],import:(()=>L(()=>import("./narrat-DRg8JJMk.js"),[]))},{id:"nextflow",name:"Nextflow",aliases:["nf"],import:(()=>L(()=>import("./nextflow-BrzmwbiE.js"),[]))},{id:"nginx",name:"Nginx",import:(()=>L(()=>import("./nginx-DknmC5AR.js"),__vite__mapDeps([69,37,26])))},{id:"nim",name:"Nim",import:(()=>L(()=>import("./nim-CVrawwO9.js"),__vite__mapDeps([70,26,1,2,3,7,8,25,40])))},{id:"nix",name:"Nix",import:(()=>L(()=>import("./nix-c8nO5XWb.js"),[]))},{id:"nushell",name:"nushell",aliases:["nu"],import:(()=>L(()=>import("./nushell-C-sUppwS.js"),[]))},{id:"objective-c",name:"Objective-C",aliases:["objc"],import:(()=>L(()=>import("./objective-c-DXmwc3jG.js"),[]))},{id:"objective-cpp",name:"Objective-C++",import:(()=>L(()=>import("./objective-cpp-CLxacb5B.js"),[]))},{id:"ocaml",name:"OCaml",import:(()=>L(()=>import("./ocaml-C0hk2d4L.js"),[]))},{id:"openscad",name:"OpenSCAD",aliases:["scad"],import:(()=>L(()=>import("./openscad-C4EeE6gA.js"),[]))},{id:"pascal",name:"Pascal",import:(()=>L(()=>import("./pascal-D93ZcfNL.js"),[]))},{id:"perl",name:"Perl",import:(()=>L(()=>import("./perl-C0TMdlhV.js"),__vite__mapDeps([71,1,2,3,7,8,16])))},{id:"php",name:"PHP",import:(()=>L(()=>import("./php-CDn_0X-4.js"),__vite__mapDeps([72,1,2,3,7,8,16,9])))},{id:"pkl",name:"Pkl",import:(()=>L(()=>import("./pkl-u5AG7uiY.js"),[]))},{id:"plsql",name:"PL/SQL",import:(()=>L(()=>import("./plsql-ChMvpjG-.js"),[]))},{id:"po",name:"Gettext PO",aliases:["pot","potx"],import:(()=>L(()=>import("./po-BTJTHyun.js"),[]))},{id:"polar",name:"Polar",import:(()=>L(()=>import("./polar-C0HS_06l.js"),[]))},{id:"postcss",name:"PostCSS",import:(()=>L(()=>import("./postcss-CXtECtnM.js"),[]))},{id:"powerquery",name:"PowerQuery",import:(()=>L(()=>import("./powerquery-CEu0bR-o.js"),[]))},{id:"powershell",name:"PowerShell",aliases:["ps","ps1"],import:(()=>L(()=>import("./powershell-Dpen1YoG.js"),[]))},{id:"prisma",name:"Prisma",import:(()=>L(()=>import("./prisma-Dd19v3D-.js"),[]))},{id:"prolog",name:"Prolog",import:(()=>L(()=>import("./prolog-CbFg5uaA.js"),[]))},{id:"proto",name:"Protocol Buffer 3",aliases:["protobuf"],import:(()=>L(()=>import("./proto-DyJlTyXw.js"),[]))},{id:"pug",name:"Pug",aliases:["jade"],import:(()=>L(()=>import("./pug-CGlum2m_.js"),__vite__mapDeps([73,2,3,1])))},{id:"puppet",name:"Puppet",import:(()=>L(()=>import("./puppet-BMWR74SV.js"),[]))},{id:"purescript",name:"PureScript",import:(()=>L(()=>import("./purescript-CklMAg4u.js"),[]))},{id:"python",name:"Python",aliases:["py"],import:(()=>L(()=>import("./python-B6aJPvgy.js"),[]))},{id:"qml",name:"QML",import:(()=>L(()=>import("./qml-3beO22l8.js"),__vite__mapDeps([74,2])))},{id:"qmldir",name:"QML Directory",import:(()=>L(()=>import("./qmldir-C8lEn-DE.js"),[]))},{id:"qss",name:"Qt Style Sheets",import:(()=>L(()=>import("./qss-IeuSbFQv.js"),[]))},{id:"r",name:"R",import:(()=>L(()=>import("./r-DiinP2Uv.js"),[]))},{id:"racket",name:"Racket",import:(()=>L(()=>import("./racket-BqYA7rlc.js"),[]))},{id:"raku",name:"Raku",aliases:["perl6"],import:(()=>L(()=>import("./raku-DXvB9xmW.js"),[]))},{id:"razor",name:"ASP.NET Razor",import:(()=>L(()=>import("./razor-CE9lU5zL.js"),__vite__mapDeps([75,1,2,3,76])))},{id:"reg",name:"Windows Registry Script",import:(()=>L(()=>import("./reg-C-SQnVFl.js"),[]))},{id:"regexp",name:"RegExp",aliases:["regex"],import:(()=>L(()=>import("./regexp-CDVJQ6XC.js"),[]))},{id:"rel",name:"Rel",import:(()=>L(()=>import("./rel-C3B-1QV4.js"),[]))},{id:"riscv",name:"RISC-V",import:(()=>L(()=>import("./riscv-BM1_JUlF.js"),[]))},{id:"rosmsg",name:"ROS Interface",import:(()=>L(()=>import("./rosmsg-BJDFO7_C.js"),[]))},{id:"rst",name:"reStructuredText",import:(()=>L(()=>import("./rst-B0xPkSld.js"),__vite__mapDeps([77,15,1,2,3,23,24,25,26,16,20,28,38,78,33,34,7,8,35,11,36,13,37])))},{id:"ruby",name:"Ruby",aliases:["rb"],import:(()=>L(()=>import("./ruby-BvKwtOVI.js"),__vite__mapDeps([33,1,2,3,34,7,8,16,35,11,36,13,23,24,25,26,28,37,38])))},{id:"rust",name:"Rust",aliases:["rs"],import:(()=>L(()=>import("./rust-B1yitclQ.js"),[]))},{id:"sas",name:"SAS",import:(()=>L(()=>import("./sas-cz2c8ADy.js"),__vite__mapDeps([79,16])))},{id:"sass",name:"Sass",import:(()=>L(()=>import("./sass-Cj5Yp3dK.js"),[]))},{id:"scala",name:"Scala",import:(()=>L(()=>import("./scala-C151Ov-r.js"),[]))},{id:"scheme",name:"Scheme",import:(()=>L(()=>import("./scheme-C98Dy4si.js"),[]))},{id:"scss",name:"SCSS",import:(()=>L(()=>import("./scss-OYdSNvt2.js"),__vite__mapDeps([5,3])))},{id:"sdbl",name:"1C (Query)",aliases:["1c-query"],import:(()=>L(()=>import("./sdbl-DVxCFoDh.js"),[]))},{id:"shaderlab",name:"ShaderLab",aliases:["shader"],import:(()=>L(()=>import("./shaderlab-Dg9Lc6iA.js"),__vite__mapDeps([80,81])))},{id:"shellscript",name:"Shell",aliases:["bash","sh","shell","zsh"],import:(()=>L(()=>import("./shellscript-Yzrsuije.js"),[]))},{id:"shellsession",name:"Shell Session",aliases:["console"],import:(()=>L(()=>import("./shellsession-BADoaaVG.js"),__vite__mapDeps([82,28])))},{id:"smalltalk",name:"Smalltalk",import:(()=>L(()=>import("./smalltalk-BERRCDM3.js"),[]))},{id:"solidity",name:"Solidity",import:(()=>L(()=>import("./solidity-rGO070M0.js"),[]))},{id:"soy",name:"Closure Templates",aliases:["closure-templates"],import:(()=>L(()=>import("./soy-Brmx7dQM.js"),__vite__mapDeps([83,1,2,3])))},{id:"sparql",name:"SPARQL",import:(()=>L(()=>import("./sparql-rVzFXLq3.js"),__vite__mapDeps([84,85])))},{id:"splunk",name:"Splunk Query Language",aliases:["spl"],import:(()=>L(()=>import("./splunk-BtCnVYZw.js"),[]))},{id:"sql",name:"SQL",import:(()=>L(()=>import("./sql-BLtJtn59.js"),[]))},{id:"ssh-config",name:"SSH Config",import:(()=>L(()=>import("./ssh-config-_ykCGR6B.js"),[]))},{id:"stata",name:"Stata",import:(()=>L(()=>import("./stata-BH5u7GGu.js"),__vite__mapDeps([86,16])))},{id:"stylus",name:"Stylus",aliases:["styl"],import:(()=>L(()=>import("./stylus-BEDo0Tqx.js"),[]))},{id:"svelte",name:"Svelte",import:(()=>L(()=>import("./svelte-3Dk4HxPD.js"),__vite__mapDeps([87,2,11,3,12])))},{id:"swift",name:"Swift",import:(()=>L(()=>import("./swift-Dg5xB15N.js"),[]))},{id:"system-verilog",name:"SystemVerilog",import:(()=>L(()=>import("./system-verilog-CnnmHF94.js"),[]))},{id:"systemd",name:"Systemd Units",import:(()=>L(()=>import("./systemd-4A_iFExJ.js"),[]))},{id:"talonscript",name:"TalonScript",aliases:["talon"],import:(()=>L(()=>import("./talonscript-CkByrt1z.js"),[]))},{id:"tasl",name:"Tasl",import:(()=>L(()=>import("./tasl-QIJgUcNo.js"),[]))},{id:"tcl",name:"Tcl",import:(()=>L(()=>import("./tcl-dwOrl1Do.js"),[]))},{id:"templ",name:"Templ",import:(()=>L(()=>import("./templ-W15q3VgB.js"),__vite__mapDeps([88,89,2,3])))},{id:"terraform",name:"Terraform",aliases:["tf","tfvars"],import:(()=>L(()=>import("./terraform-BETggiCN.js"),[]))},{id:"tex",name:"TeX",import:(()=>L(()=>import("./tex-CxkMU7Pf.js"),__vite__mapDeps([64,62])))},{id:"toml",name:"TOML",import:(()=>L(()=>import("./toml-vGWfd6FD.js"),[]))},{id:"ts-tags",name:"TypeScript with Tags",aliases:["lit"],import:(()=>L(()=>import("./ts-tags-zn1MmPIZ.js"),__vite__mapDeps([90,11,3,2,25,26,1,16,7,8])))},{id:"tsv",name:"TSV",import:(()=>L(()=>import("./tsv-B_m7g4N7.js"),[]))},{id:"tsx",name:"TSX",import:(()=>L(()=>import("./tsx-COt5Ahok.js"),[]))},{id:"turtle",name:"Turtle",import:(()=>L(()=>import("./turtle-BsS91CYL.js"),[]))},{id:"twig",name:"Twig",import:(()=>L(()=>import("./twig-CO9l9SDP.js"),__vite__mapDeps([91,3,2,5,72,1,7,8,16,9,20,33,34,35,11,36,13,23,24,25,26,28,37,38])))},{id:"typescript",name:"TypeScript",aliases:["ts","cts","mts"],import:(()=>L(()=>import("./typescript-BPQ3VLAy.js"),[]))},{id:"typespec",name:"TypeSpec",aliases:["tsp"],import:(()=>L(()=>import("./typespec-BGHnOYBU.js"),[]))},{id:"typst",name:"Typst",aliases:["typ"],import:(()=>L(()=>import("./typst-DHCkPAjA.js"),[]))},{id:"v",name:"V",import:(()=>L(()=>import("./v-BcVCzyr7.js"),[]))},{id:"vala",name:"Vala",import:(()=>L(()=>import("./vala-CsfeWuGM.js"),[]))},{id:"vb",name:"Visual Basic",aliases:["cmd"],import:(()=>L(()=>import("./vb-D17OF-Vu.js"),[]))},{id:"verilog",name:"Verilog",import:(()=>L(()=>import("./verilog-BQ8w6xss.js"),[]))},{id:"vhdl",name:"VHDL",import:(()=>L(()=>import("./vhdl-CeAyd5Ju.js"),[]))},{id:"viml",name:"Vim Script",aliases:["vim","vimscript"],import:(()=>L(()=>import("./viml-CJc9bBzg.js"),[]))},{id:"vue",name:"Vue",import:(()=>L(()=>import("./vue-DnHKYNfI.js"),__vite__mapDeps([92,3,2,11,9,15,1])))},{id:"vue-html",name:"Vue HTML",import:(()=>L(()=>import("./vue-html-CChd_i61.js"),__vite__mapDeps([93,92,3,2,11,9,15,1])))},{id:"vue-vine",name:"Vue Vine",import:(()=>L(()=>import("./vue-vine-8moa0y9V.js"),__vite__mapDeps([94,3,5,67,95,12,92,2,11,9,15,1])))},{id:"vyper",name:"Vyper",aliases:["vy"],import:(()=>L(()=>import("./vyper-CDx5xZoG.js"),[]))},{id:"wasm",name:"WebAssembly",import:(()=>L(()=>import("./wasm-MzD3tlZU.js"),[]))},{id:"wenyan",name:"Wenyan",aliases:[""],import:(()=>L(()=>import("./wenyan-BV7otONQ.js"),[]))},{id:"wgsl",name:"WGSL",import:(()=>L(()=>import("./wgsl-Dx-B1_4e.js"),[]))},{id:"wikitext",name:"Wikitext",aliases:["mediawiki","wiki"],import:(()=>L(()=>import("./wikitext-BhOHFoWU.js"),[]))},{id:"wit",name:"WebAssembly Interface Types",import:(()=>L(()=>import("./wit-5i3qLPDT.js"),[]))},{id:"wolfram",name:"Wolfram",aliases:["wl"],import:(()=>L(()=>import("./wolfram-lXgVvXCa.js"),[]))},{id:"xml",name:"XML",import:(()=>L(()=>import("./xml-sdJ4AIDG.js"),__vite__mapDeps([7,8])))},{id:"xsl",name:"XSL",import:(()=>L(()=>import("./xsl-CtQFsRM5.js"),__vite__mapDeps([96,7,8])))},{id:"yaml",name:"YAML",aliases:["yml"],import:(()=>L(()=>import("./yaml-Buea-lGh.js"),[]))},{id:"zenscript",name:"ZenScript",import:(()=>L(()=>import("./zenscript-DVFEvuxE.js"),[]))},{id:"zig",name:"Zig",import:(()=>L(()=>import("./zig-VOosw3JB.js"),[]))}],wz=Object.fromEntries(NE.map(t=>[t.id,t.import])),Sz=Object.fromEntries(NE.flatMap(t=>t.aliases?.map(e=>[e,t.import])||[])),kz={...wz,...Sz},Ez=[{id:"andromeeda",displayName:"Andromeeda",type:"dark",import:(()=>L(()=>import("./andromeeda-C-Jbm3Hp.js"),[]))},{id:"aurora-x",displayName:"Aurora X",type:"dark",import:(()=>L(()=>import("./aurora-x-D-2ljcwZ.js"),[]))},{id:"ayu-dark",displayName:"Ayu Dark",type:"dark",import:(()=>L(()=>import("./ayu-dark-Cv9koXgw.js"),[]))},{id:"catppuccin-frappe",displayName:"Catppuccin Frapp",type:"dark",import:(()=>L(()=>import("./catppuccin-frappe-DFWUc33u.js"),[]))},{id:"catppuccin-latte",displayName:"Catppuccin Latte",type:"light",import:(()=>L(()=>import("./catppuccin-latte-C9dUb6Cb.js"),[]))},{id:"catppuccin-macchiato",displayName:"Catppuccin Macchiato",type:"dark",import:(()=>L(()=>import("./catppuccin-macchiato-DQyhUUbL.js"),[]))},{id:"catppuccin-mocha",displayName:"Catppuccin Mocha",type:"dark",import:(()=>L(()=>import("./catppuccin-mocha-D87Tk5Gz.js"),[]))},{id:"dark-plus",displayName:"Dark Plus",type:"dark",import:(()=>L(()=>import("./dark-plus-C3mMm8J8.js"),[]))},{id:"dracula",displayName:"Dracula Theme",type:"dark",import:(()=>L(()=>import("./dracula-BzJJZx-M.js"),[]))},{id:"dracula-soft",displayName:"Dracula Theme Soft",type:"dark",import:(()=>L(()=>import("./dracula-soft-BXkSAIEj.js"),[]))},{id:"everforest-dark",displayName:"Everforest Dark",type:"dark",import:(()=>L(()=>import("./everforest-dark-BgDCqdQA.js"),[]))},{id:"everforest-light",displayName:"Everforest Light",type:"light",import:(()=>L(()=>import("./everforest-light-C8M2exoo.js"),[]))},{id:"github-dark",displayName:"GitHub Dark",type:"dark",import:(()=>L(()=>import("./github-dark-DHJKELXO.js"),[]))},{id:"github-dark-default",displayName:"GitHub Dark Default",type:"dark",import:(()=>L(()=>import("./github-dark-default-Cuk6v7N8.js"),[]))},{id:"github-dark-dimmed",displayName:"GitHub Dark Dimmed",type:"dark",import:(()=>L(()=>import("./github-dark-dimmed-DH5Ifo-i.js"),[]))},{id:"github-dark-high-contrast",displayName:"GitHub Dark High Contrast",type:"dark",import:(()=>L(()=>import("./github-dark-high-contrast-E3gJ1_iC.js"),[]))},{id:"github-light",displayName:"GitHub Light",type:"light",import:(()=>L(()=>import("./github-light-DAi9KRSo.js"),[]))},{id:"github-light-default",displayName:"GitHub Light Default",type:"light",import:(()=>L(()=>import("./github-light-default-D7oLnXFd.js"),[]))},{id:"github-light-high-contrast",displayName:"GitHub Light High Contrast",type:"light",import:(()=>L(()=>import("./github-light-high-contrast-BfjtVDDH.js"),[]))},{id:"gruvbox-dark-hard",displayName:"Gruvbox Dark Hard",type:"dark",import:(()=>L(()=>import("./gruvbox-dark-hard-CFHQjOhq.js"),[]))},{id:"gruvbox-dark-medium",displayName:"Gruvbox Dark Medium",type:"dark",import:(()=>L(()=>import("./gruvbox-dark-medium-GsRaNv29.js"),[]))},{id:"gruvbox-dark-soft",displayName:"Gruvbox Dark Soft",type:"dark",import:(()=>L(()=>import("./gruvbox-dark-soft-CVdnzihN.js"),[]))},{id:"gruvbox-light-hard",displayName:"Gruvbox Light Hard",type:"light",import:(()=>L(()=>import("./gruvbox-light-hard-CH1njM8p.js"),[]))},{id:"gruvbox-light-medium",displayName:"Gruvbox Light Medium",type:"light",import:(()=>L(()=>import("./gruvbox-light-medium-DRw_LuNl.js"),[]))},{id:"gruvbox-light-soft",displayName:"Gruvbox Light Soft",type:"light",import:(()=>L(()=>import("./gruvbox-light-soft-hJgmCMqR.js"),[]))},{id:"houston",displayName:"Houston",type:"dark",import:(()=>L(()=>import("./houston-DnULxvSX.js"),[]))},{id:"kanagawa-dragon",displayName:"Kanagawa Dragon",type:"dark",import:(()=>L(()=>import("./kanagawa-dragon-CkXjmgJE.js"),[]))},{id:"kanagawa-lotus",displayName:"Kanagawa Lotus",type:"light",import:(()=>L(()=>import("./kanagawa-lotus-CfQXZHmo.js"),[]))},{id:"kanagawa-wave",displayName:"Kanagawa Wave",type:"dark",import:(()=>L(()=>import("./kanagawa-wave-DWedfzmr.js"),[]))},{id:"laserwave",displayName:"LaserWave",type:"dark",import:(()=>L(()=>import("./laserwave-DUszq2jm.js"),[]))},{id:"light-plus",displayName:"Light Plus",type:"light",import:(()=>L(()=>import("./light-plus-B7mTdjB0.js"),[]))},{id:"material-theme",displayName:"Material Theme",type:"dark",import:(()=>L(()=>import("./material-theme-D5KoaKCx.js"),[]))},{id:"material-theme-darker",displayName:"Material Theme Darker",type:"dark",import:(()=>L(()=>import("./material-theme-darker-BfHTSMKl.js"),[]))},{id:"material-theme-lighter",displayName:"Material Theme Lighter",type:"light",import:(()=>L(()=>import("./material-theme-lighter-B0m2ddpp.js"),[]))},{id:"material-theme-ocean",displayName:"Material Theme Ocean",type:"dark",import:(()=>L(()=>import("./material-theme-ocean-CyktbL80.js"),[]))},{id:"material-theme-palenight",displayName:"Material Theme Palenight",type:"dark",import:(()=>L(()=>import("./material-theme-palenight-Csfq5Kiy.js"),[]))},{id:"min-dark",displayName:"Min Dark",type:"dark",import:(()=>L(()=>import("./min-dark-CafNBF8u.js"),[]))},{id:"min-light",displayName:"Min Light",type:"light",import:(()=>L(()=>import("./min-light-CTRr51gU.js"),[]))},{id:"monokai",displayName:"Monokai",type:"dark",import:(()=>L(()=>import("./monokai-D4h5O-jR.js"),[]))},{id:"night-owl",displayName:"Night Owl",type:"dark",import:(()=>L(()=>import("./night-owl-C39BiMTA.js"),[]))},{id:"nord",displayName:"Nord",type:"dark",import:(()=>L(()=>import("./nord-Ddv68eIx.js"),[]))},{id:"one-dark-pro",displayName:"One Dark Pro",type:"dark",import:(()=>L(()=>import("./one-dark-pro-DVMEJ2y_.js"),[]))},{id:"one-light",displayName:"One Light",type:"light",import:(()=>L(()=>import("./one-light-PoHY5YXO.js"),[]))},{id:"plastic",displayName:"Plastic",type:"dark",import:(()=>L(()=>import("./plastic-3e1v2bzS.js"),[]))},{id:"poimandres",displayName:"Poimandres",type:"dark",import:(()=>L(()=>import("./poimandres-CS3Unz2-.js"),[]))},{id:"red",displayName:"Red",type:"dark",import:(()=>L(()=>import("./red-bN70gL4F.js"),[]))},{id:"rose-pine",displayName:"Ros Pine",type:"dark",import:(()=>L(()=>import("./rose-pine-qdsjHGoJ.js"),[]))},{id:"rose-pine-dawn",displayName:"Ros Pine Dawn",type:"light",import:(()=>L(()=>import("./rose-pine-dawn-DHQR4-dF.js"),[]))},{id:"rose-pine-moon",displayName:"Ros Pine Moon",type:"dark",import:(()=>L(()=>import("./rose-pine-moon-D4_iv3hh.js"),[]))},{id:"slack-dark",displayName:"Slack Dark",type:"dark",import:(()=>L(()=>import("./slack-dark-BthQWCQV.js"),[]))},{id:"slack-ochin",displayName:"Slack Ochin",type:"light",import:(()=>L(()=>import("./slack-ochin-DqwNpetd.js"),[]))},{id:"snazzy-light",displayName:"Snazzy Light",type:"light",import:(()=>L(()=>import("./snazzy-light-Bw305WKR.js"),[]))},{id:"solarized-dark",displayName:"Solarized Dark",type:"dark",import:(()=>L(()=>import("./solarized-dark-DXbdFlpD.js"),[]))},{id:"solarized-light",displayName:"Solarized Light",type:"light",import:(()=>L(()=>import("./solarized-light-L9t79GZl.js"),[]))},{id:"synthwave-84",displayName:"Synthwave '84",type:"dark",import:(()=>L(()=>import("./synthwave-84-CbfX1IO0.js"),[]))},{id:"tokyo-night",displayName:"Tokyo Night",type:"dark",import:(()=>L(()=>import("./tokyo-night-hegEt444.js"),[]))},{id:"vesper",displayName:"Vesper",type:"dark",import:(()=>L(()=>import("./vesper-DU1UobuO.js"),[]))},{id:"vitesse-black",displayName:"Vitesse Black",type:"dark",import:(()=>L(()=>import("./vitesse-black-Bkuqu6BP.js"),[]))},{id:"vitesse-dark",displayName:"Vitesse Dark",type:"dark",import:(()=>L(()=>import("./vitesse-dark-D0r3Knsf.js"),[]))},{id:"vitesse-light",displayName:"Vitesse Light",type:"light",import:(()=>L(()=>import("./vitesse-light-CVO1_9PV.js"),[]))}],Cz=Object.fromEntries(Ez.map(t=>[t.id,t.import]));class qy extends Error{constructor(e){super(e),this.name="ShikiError"}}function Tz(){return 2147483648}function Az(){return typeof performance<"u"?performance.now():Date.now()}const Rz=(t,e)=>t+(e-t%e)%e;async function Oz(t){let e,n;const r={};function s(g){n=g,r.HEAPU8=new Uint8Array(g),r.HEAPU32=new Uint32Array(g)}function a(g,v,x){r.HEAPU8.copyWithin(g,v,v+x)}function l(g){try{return e.grow(g-n.byteLength+65535>>>16),s(e.buffer),1}catch{}}function u(g){const v=r.HEAPU8.length;g=g>>>0;const x=Tz();if(g>x)return!1;for(let C=1;C<=4;C*=2){let k=v*(1+.2/C);k=Math.min(k,g+100663296);const T=Math.min(x,Rz(Math.max(g,k),65536));if(l(T))return!0}return!1}const f=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function d(g,v,x=1024){const C=v+x;let k=v;for(;g[k]&&!(k>=C);)++k;if(k-v>16&&g.buffer&&f)return f.decode(g.subarray(v,k));let T="";for(;v<k;){let A=g[v++];if(!(A&128)){T+=String.fromCharCode(A);continue}const M=g[v++]&63;if((A&224)===192){T+=String.fromCharCode((A&31)<<6|M);continue}const I=g[v++]&63;if((A&240)===224?A=(A&15)<<12|M<<6|I:A=(A&7)<<18|M<<12|I<<6|g[v++]&63,A<65536)T+=String.fromCharCode(A);else{const O=A-65536;T+=String.fromCharCode(55296|O>>10,56320|O&1023)}}return T}function m(g,v){return g?d(r.HEAPU8,g,v):""}const p={emscripten_get_now:Az,emscripten_memcpy_big:a,emscripten_resize_heap:u,fd_write:()=>0};async function y(){const v=await t({env:p,wasi_snapshot_preview1:p});e=v.memory,s(e.buffer),Object.assign(r,v),r.UTF8ToString=m}return await y(),r}var Nz=Object.defineProperty,Iz=(t,e,n)=>e in t?Nz(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Kt=(t,e,n)=>Iz(t,typeof e!="symbol"?e+"":e,n);let rn=null;function Mz(t){throw new qy(t.UTF8ToString(t.getLastOnigError()))}class ud{constructor(e){Kt(this,"utf16Length"),Kt(this,"utf8Length"),Kt(this,"utf16Value"),Kt(this,"utf8Value"),Kt(this,"utf16OffsetToUtf8"),Kt(this,"utf8OffsetToUtf16");const n=e.length,r=ud._utf8ByteLength(e),s=r!==n,a=s?new Uint32Array(n+1):null;s&&(a[n]=r);const l=s?new Uint32Array(r+1):null;s&&(l[r]=n);const u=new Uint8Array(r);let f=0;for(let d=0;d<n;d++){const m=e.charCodeAt(d);let p=m,y=!1;if(m>=55296&&m<=56319&&d+1<n){const g=e.charCodeAt(d+1);g>=56320&&g<=57343&&(p=(m-55296<<10)+65536|g-56320,y=!0)}s&&(a[d]=f,y&&(a[d+1]=f),p<=127?l[f+0]=d:p<=2047?(l[f+0]=d,l[f+1]=d):p<=65535?(l[f+0]=d,l[f+1]=d,l[f+2]=d):(l[f+0]=d,l[f+1]=d,l[f+2]=d,l[f+3]=d)),p<=127?u[f++]=p:p<=2047?(u[f++]=192|(p&1984)>>>6,u[f++]=128|(p&63)>>>0):p<=65535?(u[f++]=224|(p&61440)>>>12,u[f++]=128|(p&4032)>>>6,u[f++]=128|(p&63)>>>0):(u[f++]=240|(p&1835008)>>>18,u[f++]=128|(p&258048)>>>12,u[f++]=128|(p&4032)>>>6,u[f++]=128|(p&63)>>>0),y&&d++}this.utf16Length=n,this.utf8Length=r,this.utf16Value=e,this.utf8Value=u,this.utf16OffsetToUtf8=a,this.utf8OffsetToUtf16=l}static _utf8ByteLength(e){let n=0;for(let r=0,s=e.length;r<s;r++){const a=e.charCodeAt(r);let l=a,u=!1;if(a>=55296&&a<=56319&&r+1<s){const f=e.charCodeAt(r+1);f>=56320&&f<=57343&&(l=(a-55296<<10)+65536|f-56320,u=!0)}l<=127?n+=1:l<=2047?n+=2:l<=65535?n+=3:n+=4,u&&r++}return n}createString(e){const n=e.omalloc(this.utf8Length);return e.HEAPU8.set(this.utf8Value,n),n}}const fd=class qr{constructor(e){if(Kt(this,"id",++qr.LAST_ID),Kt(this,"_onigBinding"),Kt(this,"content"),Kt(this,"utf16Length"),Kt(this,"utf8Length"),Kt(this,"utf16OffsetToUtf8"),Kt(this,"utf8OffsetToUtf16"),Kt(this,"ptr"),!rn)throw new qy("Must invoke loadWasm first.");this._onigBinding=rn,this.content=e;const n=new ud(e);this.utf16Length=n.utf16Length,this.utf8Length=n.utf8Length,this.utf16OffsetToUtf8=n.utf16OffsetToUtf8,this.utf8OffsetToUtf16=n.utf8OffsetToUtf16,this.utf8Length<1e4&&!qr._sharedPtrInUse?(qr._sharedPtr||(qr._sharedPtr=rn.omalloc(1e4)),qr._sharedPtrInUse=!0,rn.HEAPU8.set(n.utf8Value,qr._sharedPtr),this.ptr=qr._sharedPtr):this.ptr=n.createString(rn)}convertUtf8OffsetToUtf16(e){return this.utf8OffsetToUtf16?e<0?0:e>this.utf8Length?this.utf16Length:this.utf8OffsetToUtf16[e]:e}convertUtf16OffsetToUtf8(e){return this.utf16OffsetToUtf8?e<0?0:e>this.utf16Length?this.utf8Length:this.utf16OffsetToUtf8[e]:e}dispose(){this.ptr===qr._sharedPtr?qr._sharedPtrInUse=!1:this._onigBinding.ofree(this.ptr)}};Kt(fd,"LAST_ID",0);Kt(fd,"_sharedPtr",0);Kt(fd,"_sharedPtrInUse",!1);let IE=fd;class Dz{constructor(e){if(Kt(this,"_onigBinding"),Kt(this,"_ptr"),!rn)throw new qy("Must invoke loadWasm first.");const n=[],r=[];for(let u=0,f=e.length;u<f;u++){const d=new ud(e[u]);n[u]=d.createString(rn),r[u]=d.utf8Length}const s=rn.omalloc(4*e.length);rn.HEAPU32.set(n,s/4);const a=rn.omalloc(4*e.length);rn.HEAPU32.set(r,a/4);const l=rn.createOnigScanner(s,a,e.length);for(let u=0,f=e.length;u<f;u++)rn.ofree(n[u]);rn.ofree(a),rn.ofree(s),l===0&&Mz(rn),this._onigBinding=rn,this._ptr=l}dispose(){this._onigBinding.freeOnigScanner(this._ptr)}findNextMatchSync(e,n,r){let s=0;if(typeof r=="number"&&(s=r),typeof e=="string"){e=new IE(e);const a=this._findNextMatchSync(e,n,!1,s);return e.dispose(),a}return this._findNextMatchSync(e,n,!1,s)}_findNextMatchSync(e,n,r,s){const a=this._onigBinding,l=a.findNextOnigScannerMatch(this._ptr,e.id,e.ptr,e.utf8Length,e.convertUtf16OffsetToUtf8(n),s);if(l===0)return null;const u=a.HEAPU32;let f=l/4;const d=u[f++],m=u[f++],p=[];for(let y=0;y<m;y++){const g=e.convertUtf8OffsetToUtf16(u[f++]),v=e.convertUtf8OffsetToUtf16(u[f++]);p[y]={start:g,end:v,length:v-g}}return{index:d,captureIndices:p}}}function jz(t){return typeof t.instantiator=="function"}function Lz(t){return typeof t.default=="function"}function zz(t){return typeof t.data<"u"}function Pz(t){return typeof Response<"u"&&t instanceof Response}function Bz(t){return typeof ArrayBuffer<"u"&&(t instanceof ArrayBuffer||ArrayBuffer.isView(t))||typeof Buffer<"u"&&Buffer.isBuffer?.(t)||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer||typeof Uint32Array<"u"&&t instanceof Uint32Array}let Mu;function $z(t){if(Mu)return Mu;async function e(){rn=await Oz(async n=>{let r=t;return r=await r,typeof r=="function"&&(r=await r(n)),typeof r=="function"&&(r=await r(n)),jz(r)?r=await r.instantiator(n):Lz(r)?r=await r.default(n):(zz(r)&&(r=r.data),Pz(r)?typeof WebAssembly.instantiateStreaming=="function"?r=await Uz(r)(n):r=await qz(r)(n):Bz(r)?r=await mm(r)(n):r instanceof WebAssembly.Module?r=await mm(r)(n):"default"in r&&r.default instanceof WebAssembly.Module&&(r=await mm(r.default)(n))),"instance"in r&&(r=r.instance),"exports"in r&&(r=r.exports),r})}return Mu=e(),Mu}function mm(t){return e=>WebAssembly.instantiate(t,e)}function Uz(t){return e=>WebAssembly.instantiateStreaming(t,e)}function qz(t){return async e=>{const n=await t.arrayBuffer();return WebAssembly.instantiate(n,e)}}async function Fz(t){return t&&await $z(t),{createScanner(e){return new Dz(e.map(n=>typeof n=="string"?n:n.source))},createString(e){return new IE(e)}}}const Vz=_z({langs:kz,themes:Cz,engine:()=>Fz(L(()=>import("./wasm-CG6Dc4jp.js"),[]))}),{codeToHtml:ME}=xz(Vz,{guessEmbeddedLanguages:D5});function Hz(){const t=qe.c(2),[e,n]=G.useState(Gz);let r,s;return t[0]===Symbol.for("react.memo_cache_sentinel")?(r=()=>{const a=window.matchMedia("(prefers-color-scheme: dark)"),l=u=>n(u.matches);return a.addEventListener("change",l),()=>a.removeEventListener("change",l)},s=[],t[0]=r,t[1]=s):(r=t[0],s=t[1]),G.useEffect(r,s),e}function Gz(){return window.matchMedia("(prefers-color-scheme: dark)").matches}function dd(t,e){const[n,r]=G.useState(""),s=Hz();return G.useEffect(()=>{let a=!1;return(async()=>{if(!t){a||r("");return}try{if(e==="text"){const f=t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");a||r(`<pre><code>${f}</code></pre>`);return}const u=await ME(t,{lang:e,theme:s?"github-dark":"github-light"});a||r(u)}catch{const u=t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");a||r(`<pre><code>${u}</code></pre>`)}})(),()=>{a=!0}},[t,e,s]),n}const hd="text-xs [&_pre]:bg-transparent! [&_pre]:p-0! [&_pre]:m-0! [&_pre]:overflow-visible! [&_code]:bg-transparent! [&_code]:block!";function Kz(t){try{const e=JSON.parse(t);return JSON.stringify(e,null,2)}catch{return t}}function Fy(t){const e=qe.c(5),{content:n}=t,[r,s]=G.useState("");let a,l;e[0]!==n?(a=()=>{let d=!1;return n.text().then(m=>{d||s(Kz(m))}),()=>{d=!0}},l=[n],e[0]=n,e[1]=a,e[2]=l):(a=e[1],l=e[2]),G.useEffect(a,l);const u=dd(r,"json");let f;return e[3]!==u?(f=w.jsx("div",{className:hd,dangerouslySetInnerHTML:{__html:u}}),e[3]=u,e[4]=f):f=e[4],f}function Zz(t){try{const n=/(>)(<)(\/*)/g,r=t.replace(n,`$1
$2$3`);let s=0;return r.split(`
`).map(a=>{let l=0;a.match(/.+<\/\w[^>]*>$/)?l=0:a.match(/^<\/\w/)&&s>0?s-=1:a.match(/^<\w[^>]*[^/]>.*$/)?l=1:l=0;const u="  ".repeat(s);return s+=l,u+a}).join(`
`)}catch{return t}}function Qz(t){const e=qe.c(5),{content:n}=t,[r,s]=G.useState("");let a,l;e[0]!==n?(a=()=>{let d=!1;return n.text().then(m=>{d||s(Zz(m))}),()=>{d=!0}},l=[n],e[0]=n,e[1]=a,e[2]=l):(a=e[1],l=e[2]),G.useEffect(a,l);const u=dd(r,"xml");let f;return e[3]!==u?(f=w.jsx("div",{className:hd,dangerouslySetInnerHTML:{__html:u}}),e[3]=u,e[4]=f):f=e[4],f}function Jz(t){const e=qe.c(5),{content:n}=t,[r,s]=G.useState("");let a,l;e[0]!==n?(a=()=>{let d=!1;return n.text().then(m=>{d||s(m)}),()=>{d=!0}},l=[n],e[0]=n,e[1]=a,e[2]=l):(a=e[1],l=e[2]),G.useEffect(a,l);const u=dd(r,"yaml");let f;return e[3]!==u?(f=w.jsx("div",{className:hd,dangerouslySetInnerHTML:{__html:u}}),e[3]=u,e[4]=f):f=e[4],f}function Ng(t){const e=qe.c(5),{content:n}=t,[r,s]=G.useState("");let a,l;e[0]!==n?(a=()=>{n.text().then(s)},l=[n],e[0]=n,e[1]=a,e[2]=l):(a=e[1],l=e[2]),G.useEffect(a,l);let u;return e[3]!==r?(u=w.jsx("pre",{className:"text-xs font-mono text-neutral-700 dark:text-neutral-200 whitespace-pre-wrap",children:r}),e[3]=r,e[4]=u):u=e[4],u}function Yz(t){const e=qe.c(6),{content:n}=t,r=Xz;let s;e[0]===Symbol.for("react.memo_cache_sentinel")?(s=w.jsx("div",{className:"text-neutral-500 dark:text-neutral-400 text-sm",children:"Binary content"}),e[0]=s):s=e[0];const a=r(n.size);let l;e[1]!==a?(l=w.jsx("div",{className:"text-2xl font-semibold text-neutral-700 dark:text-neutral-200",children:a}),e[1]=a,e[2]=l):l=e[2];let u;e[3]===Symbol.for("react.memo_cache_sentinel")?(u=w.jsx("div",{className:"text-xs text-neutral-400 dark:text-neutral-500",children:"Cannot preview binary data"}),e[3]=u):u=e[3];let f;return e[4]!==l?(f=w.jsx("div",{className:"flex flex-col items-center justify-center p-12 bg-neutral-100 dark:bg-white/5 rounded-lg border border-neutral-200 dark:border-white/10",children:w.jsxs("div",{className:"text-center space-y-2",children:[s,l,u]})}),e[4]=l,e[5]=f):f=e[5],f}function Xz(t){return t<1024?`${t} B`:t<1048576?`${(t/1024).toFixed(2)} KB`:`${(t/1048576).toFixed(2)} MB`}function Wz(t){const e=qe.c(4),{content:n}=t;let r;e[0]!==n?(r=URL.createObjectURL(n),e[0]=n,e[1]=r):r=e[1];const s=r;let a;return e[2]!==s?(a=w.jsx("div",{className:"h-full",children:w.jsx("img",{src:s,alt:"Response",className:"max-w-full max-h-full object-contain"})}),e[2]=s,e[3]=a):a=e[3],a}function eP(){const t=qe.c(2),[e,n]=G.useState(tP);let r,s;return t[0]===Symbol.for("react.memo_cache_sentinel")?(r=()=>{const a=window.matchMedia("(prefers-color-scheme: dark)"),l=u=>n(u.matches);return a.addEventListener("change",l),()=>a.removeEventListener("change",l)},s=[],t[0]=r,t[1]=s):(r=t[0],s=t[1]),G.useEffect(r,s),e}function tP(){return window.matchMedia("(prefers-color-scheme: dark)").matches}function nP(t){const e=[],n=t.split(/\n\n+/);for(const r of n){if(!r.trim())continue;const s={data:"",raw:r},a=r.split(`
`);for(const l of a)l.startsWith("id:")?s.id=l.slice(3).trim():l.startsWith("event:")?s.event=l.slice(6).trim():l.startsWith("data:")?s.data+=(s.data?`
`:"")+l.slice(5).trim():l.startsWith("retry:")&&(s.retry=parseInt(l.slice(6).trim(),10));(s.data||s.event||s.id)&&e.push(s)}return e}function rP(t){try{return JSON.parse(t)}catch{return null}}function sP({event:t,index:e,prefersDark:n}){const[r,s]=G.useState(!0),[a,l]=G.useState(""),u=G.useMemo(()=>rP(t.data),[t.data]);return G.useEffect(()=>{(async()=>{if(u)try{const d=JSON.stringify(u,null,2),m=await ME(d,{lang:"json",theme:n?"github-dark":"github-light"});l(m)}catch{l(`<pre>${JSON.stringify(u,null,2)}</pre>`)}})()},[u,n]),w.jsxs("div",{className:"border border-neutral-200 dark:border-white/10 rounded-lg overflow-hidden",children:[w.jsxs("button",{onClick:()=>s(!r),className:"w-full flex items-center gap-2 px-3 py-2 bg-neutral-50 dark:bg-white/5 hover:bg-neutral-100 dark:hover:bg-white/10 transition-colors",children:[r?w.jsx(ii,{className:"w-4 h-4 text-neutral-400"}):w.jsx(ad,{className:"w-4 h-4 text-neutral-400"}),w.jsxs("span",{className:"text-xs font-mono text-neutral-500 dark:text-neutral-400",children:["#",e+1]}),t.event&&w.jsx("span",{className:"px-2 py-0.5 text-xs font-medium bg-blue-100 dark:bg-blue-500/20 text-blue-700 dark:text-blue-300 rounded",children:t.event}),t.id&&w.jsxs("span",{className:"text-xs text-neutral-400 dark:text-neutral-500",children:["id: ",t.id]}),u&&w.jsx("span",{className:"px-1.5 py-0.5 text-[10px] font-medium bg-emerald-100 dark:bg-emerald-500/20 text-emerald-700 dark:text-emerald-300 rounded",children:"JSON"})]}),r&&w.jsx("div",{className:"p-3 bg-white dark:bg-transparent",children:u&&a?w.jsx("div",{className:"text-xs [&_pre]:bg-transparent! [&_pre]:p-0! [&_pre]:m-0! [&_pre]:overflow-visible! [&_code]:bg-transparent! [&_code]:block!",dangerouslySetInnerHTML:{__html:a}}):w.jsx("pre",{className:"text-xs font-mono text-neutral-700 dark:text-neutral-200 whitespace-pre-wrap",children:t.data})})]})}function iP(t){const e=qe.c(17),{content:n}=t;let r;e[0]===Symbol.for("react.memo_cache_sentinel")?(r=[],e[0]=r):r=e[0];const[s,a]=G.useState(r),[l,u]=G.useState(""),f=eP();let d,m;if(e[1]!==n?(d=()=>{n.text().then(x=>{u(x),a(nP(x))})},m=[n],e[1]=n,e[2]=d,e[3]=m):(d=e[2],m=e[3]),G.useEffect(d,m),s.length===0){let x;return e[4]!==l?(x=w.jsx("pre",{className:"text-xs font-mono text-neutral-700 dark:text-neutral-200 whitespace-pre-wrap",children:l}),e[4]=l,e[5]=x):x=e[5],x}const p=s.length!==1?"s":"";let y;e[6]!==s.length||e[7]!==p?(y=w.jsx("div",{className:"flex items-center gap-2 mb-3",children:w.jsxs("span",{className:"text-xs font-medium text-neutral-500 dark:text-neutral-400",children:[s.length," event",p]})}),e[6]=s.length,e[7]=p,e[8]=y):y=e[8];let g;if(e[9]!==s||e[10]!==f){let x;e[12]!==f?(x=(C,k)=>w.jsx(sP,{event:C,index:k,prefersDark:f},k),e[12]=f,e[13]=x):x=e[13],g=s.map(x),e[9]=s,e[10]=f,e[11]=g}else g=e[11];let v;return e[14]!==y||e[15]!==g?(v=w.jsxs("div",{className:"space-y-2",children:[y,g]}),e[14]=y,e[15]=g,e[16]=v):v=e[16],v}const aP=["video/","audio/","application/pdf","application/octet-stream","application/zip","application/gzip","application/x-tar","application/x-rar","application/x-7z","application/vnd.ms-","application/vnd.openxmlformats","application/x-executable","application/x-sharedlib","application/x-mach-binary","application/wasm","font/"],oP=["image/png","image/jpeg","image/gif","image/webp","image/svg+xml","image/bmp","image/x-icon","image/ico","image/avif","image/apng"],lP=["text/","application/json","application/xml","application/javascript","application/ecmascript","application/x-javascript","application/ld+json","application/manifest+json","application/schema+json","application/x-www-form-urlencoded","application/xhtml+xml","application/rss+xml","application/atom+xml","application/soap+xml","application/x-yaml","application/yaml","+json","+xml"];function cP(t){const e=t["content-type"]?.toLowerCase()||"";return e.includes("text/event-stream")?"sse":oP.some(n=>e.includes(n))?"image":aP.some(n=>e.includes(n))?"binary":e.includes("json")||e.endsWith("+json")?"json":e.includes("xml")||e.endsWith("+xml")?"xml":e.includes("yaml")||e.includes("yml")?"yaml":(lP.some(n=>e.includes(n)),"text")}function uP(t){const e=qe.c(8),{response:n,viewMode:r}=t,s=r===void 0?"pretty":r;let a;e[0]!==n.headers?(a=cP(n.headers),e[0]=n.headers,e[1]=a):a=e[1];const l=a;let u;e[2]!==l||e[3]!==n.body||e[4]!==s?(u=()=>{if(s==="raw"&&l!=="image"&&l!=="binary")return w.jsx(Ng,{content:n.body});switch(l){case"json":return w.jsx(Fy,{content:n.body});case"xml":return w.jsx(Qz,{content:n.body});case"yaml":return w.jsx(Jz,{content:n.body});case"sse":return w.jsx(iP,{content:n.body});case"image":return w.jsx(Wz,{content:n.body});case"binary":return w.jsx(Yz,{content:n.body});default:return w.jsx(Ng,{content:n.body})}},e[2]=l,e[3]=n.body,e[4]=s,e[5]=u):u=e[5];const f=u;let d;return e[6]!==f?(d=w.jsx("div",{className:"h-full flex flex-col overflow-hidden",children:w.jsx("div",{className:"flex-1 min-h-0 overflow-auto",children:f()})}),e[6]=f,e[7]=d):d=e[7],d}let gm=null;async function ym(t){if(gm?.host===t)return gm.data;const e=await fetch(`/proxy/grpc/${t}`);if(!e.ok)throw new Error("Failed to fetch services");const n=await e.json();return gm={host:t,data:n},n}function d1({value:t,onChange:e,placeholder:n,label:r,fetchOptions:s,disabled:a,icon:l}){const[u,f]=G.useState(!1),[d,m]=G.useState([]),[p,y]=G.useState(null),[g,v]=G.useState(!1),x=G.useRef(null);G.useEffect(()=>{const k=T=>{x.current&&!x.current.contains(T.target)&&f(!1)};return document.addEventListener("mousedown",k),()=>document.removeEventListener("mousedown",k)},[]);const C=async()=>{if(!a){f(!0),v(!0),y(null);try{const k=await s();m(k)}catch(k){y(k instanceof Error?k.message:"Failed to fetch"),m([])}finally{v(!1)}}};return w.jsxs("div",{ref:x,className:"relative shrink-0",children:[w.jsxs("button",{type:"button",onClick:C,disabled:a,className:"h-8 px-2 flex items-center gap-2 text-sm transition hover:bg-neutral-50 dark:hover:bg-white/5 disabled:opacity-50 disabled:cursor-not-allowed rounded",children:[l,w.jsx("span",{className:`text-sm whitespace-nowrap ${t?"text-neutral-800 dark:text-neutral-100":"text-neutral-400 dark:text-neutral-500"}`,children:t||n}),g?w.jsx(kf,{className:"w-3.5 h-3.5 animate-spin text-neutral-400 shrink-0"}):w.jsx(ii,{className:`w-3.5 h-3.5 text-neutral-400 shrink-0 transition-transform ${u?"rotate-180":""}`})]}),u&&w.jsx("div",{className:"absolute top-full left-0 mt-1 w-full min-w-48 max-w-md bg-white dark:bg-[#0f0f0f] border border-neutral-200 dark:border-white/10 rounded-lg shadow-xl z-50 overflow-hidden",children:w.jsxs("div",{className:"max-h-64 overflow-y-auto p-1",children:[g&&w.jsxs("div",{className:"px-3 py-4 text-center text-sm text-neutral-500",children:[w.jsx(kf,{className:"w-4 h-4 animate-spin mx-auto mb-1"}),"Loading..."]}),p&&w.jsx("div",{className:"px-3 py-3 text-sm text-red-500",children:p}),!g&&!p&&d.length===0&&w.jsxs("div",{className:"px-3 py-4 text-center text-sm text-neutral-500",children:["No ",r.toLowerCase()," available"]}),!g&&!p&&d.map(k=>w.jsx("button",{type:"button",onClick:()=>{e(k),f(!1)},className:`w-full px-3 py-2 text-left text-sm rounded-md transition-colors ${k===t?"bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-400":"text-neutral-700 dark:text-neutral-300 hover:bg-neutral-50 dark:hover:bg-white/5"}`,children:k},k))]})})]})}function fP(){const{request:t,setUrl:e,setGrpcMethodSchema:n}=gn(),r=t?.url??"",s=x=>{const C=x.match(/^grpc:\/\/([^/]*)(?:\/([^/]*)(?:\/([^/]*))?)?$/);return C?{host:C[1]||"",service:C[2]||"",method:C[3]||""}:{host:"",service:"",method:""}},a=(x,C,k)=>x?C?k?`grpc://${x}/${C}/${k}`:`grpc://${x}/${C}`:`grpc://${x}`:"grpc://",{host:l,service:u,method:f}=s(r),d=x=>{e(a(x,"","")),n(void 0)},m=x=>{e(a(l,x,"")),n(void 0)},p=async x=>{e(a(l,u,x));try{const T=(await ym(l)).services.find(A=>A.name===u)?.methods.find(A=>A.name===x);T?.schema?n(T.schema):n(void 0)}catch{n(void 0)}},y=async()=>l?(await ym(l)).services.map(C=>C.name):[],g=async()=>!l||!u?[]:(await ym(l)).services.find(k=>k.name===u)?.methods.map(k=>k.name)??[],v=Math.max(8,l.length||9);return w.jsxs("div",{className:"flex items-center flex-1 min-w-0",children:[w.jsx("input",{type:"text",value:l,onChange:x=>d(x.target.value),placeholder:"host:port",size:v,className:"min-w-20 max-w-full px-2 py-1.5 text-sm bg-transparent text-neutral-800 dark:text-neutral-100 placeholder-neutral-400 dark:placeholder-neutral-600 focus:outline-none"}),w.jsx("span",{className:"text-neutral-300 dark:text-neutral-600 shrink-0",children:"/"}),w.jsx(d1,{value:u,onChange:m,placeholder:"Select service",label:"Service",fetchOptions:y,disabled:!l,icon:w.jsx(F3,{className:`w-4 h-4 shrink-0 ${u?"text-purple-500":"text-neutral-400"}`})}),w.jsx("span",{className:"text-neutral-300 dark:text-neutral-600",children:"/"}),w.jsx(d1,{value:f,onChange:p,placeholder:"Select method",label:"Method",fetchOptions:g,disabled:!l||!u,icon:w.jsx($D,{className:`w-4 h-4 shrink-0 ${f?"text-amber-500":"text-neutral-400"}`})})]})}const dP=["grpc-timeout","authorization","x-request-id","x-correlation-id"];function Ig(t){if(!t||typeof t!="object")return{};const e=t,r=(Array.isArray(e.type)?e.type[0]:e.type)||(e.properties?"object":e.items?"array":void 0);if(r==="object"){const a={},l=e.properties||{};return Object.keys(l).forEach(u=>{a[u]=Ig(l[u])}),a}if(r==="array"){const a=e.items||{type:"string"};return[Ig(a)]}const s=e.enum;if(s&&s.length>0)return s[0];switch(r){case"integer":case"number":return 0;case"boolean":return!0;case"string":return e.format==="byte"?"":"string";default:return{}}}function hP(){const[t,e]=G.useState("body"),{request:n,setGrpcBody:r,setGrpcMetadata:s,setVariables:a}=gn(),l=n?.grpc?.metadata??[],u=n?.grpc?.body??"",f=n?.variables??[],d=n?.grpc?.schema,m=G.useMemo(()=>{try{return d?Ig(d):void 0}catch{return}},[d]),p=[{id:"body",label:"Message"},{id:"headers",label:"Metadata",count:l.filter(y=>y.key).length}];return w.jsxs("div",{className:"space-y-3",children:[w.jsx("div",{className:"flex items-center gap-2",children:w.jsx("div",{role:"tablist",className:"inline-flex gap-1",children:p.map(y=>w.jsxs("button",{role:"tab",onClick:()=>e(y.id),className:`px-2 py-1 text-[11px] font-medium rounded-md transition-all ${t===y.id?"bg-white dark:bg-white/10 text-neutral-800 dark:text-neutral-100 shadow-sm":"text-neutral-500 dark:text-neutral-400 hover:text-neutral-700 dark:hover:text-neutral-200 hover:bg-neutral-100 dark:hover:bg-white/5"}`,children:[y.label,y.count!==void 0&&y.count>0&&w.jsx("span",{className:"ml-1.5 px-1.5 py-0.5 text-[9px] bg-neutral-200 dark:bg-white/10 text-neutral-600 dark:text-neutral-300 rounded-full",children:y.count})]},y.id))})}),w.jsxs("div",{children:[t==="body"&&w.jsx(Iy,{value:u,onChange:r,variables:f,onVariablesChange:a,placeholder:m?JSON.stringify(m,null,2):`{
  "field": "value"
}`,action:m!==void 0?{label:"Insert schema",onClick:()=>r(JSON.stringify(m,null,2))}:void 0}),t==="headers"&&w.jsxs("div",{className:"space-y-2",children:[w.jsx("p",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:"gRPC metadata (sent as headers)"}),w.jsx(Ol,{items:l,onChange:s,keyPlaceholder:"Key",valuePlaceholder:"Value",keySuggestions:dP})]})]})]})}function pP(t){const e=qe.c(3),{response:n,viewMode:r}=t,s=r===void 0?"pretty":r;let a;return e[0]!==n.body||e[1]!==s?(a=w.jsx("div",{className:"h-full flex flex-col overflow-hidden",children:w.jsx("div",{className:"flex-1 min-h-0 overflow-auto",children:s==="pretty"?w.jsx(Fy,{content:n.body}):w.jsx(Ng,{content:n.body})})}),e[0]=n.body,e[1]=s,e[2]=a):a=e[2],a}function h1(t){const e=qe.c(27),{feature:n,type:r,isSelected:s,onSelect:a}=t,[l,u]=G.useState(!1);let f;e[0]!==n.schema?(f=n.schema&&Object.keys(n.schema).length>0,e[0]=n.schema,e[1]=f):f=e[1];const d=f,m=`border rounded-md ${s?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-neutral-200 dark:border-white/10"}`;let p;e[2]!==r?(p=r==="tool"?w.jsx(Cf,{className:"w-4 h-4 text-amber-500 shrink-0"}):w.jsx(io,{className:"w-4 h-4 text-blue-500 shrink-0"}),e[2]=r,e[3]=p):p=e[3];let y;e[4]!==n.name?(y=w.jsx("div",{className:"font-medium text-sm truncate",children:n.name}),e[4]=n.name,e[5]=y):y=e[5];let g;e[6]!==n.description?(g=n.description&&w.jsx("div",{className:"text-xs text-neutral-500 dark:text-neutral-400 truncate",children:n.description}),e[6]=n.description,e[7]=g):g=e[7];let v;e[8]!==y||e[9]!==g?(v=w.jsxs("div",{className:"flex-1 min-w-0",children:[y,g]}),e[8]=y,e[9]=g,e[10]=v):v=e[10];let x;e[11]!==l||e[12]!==d?(x=d&&w.jsx("button",{onClick:A=>{A.stopPropagation(),u(!l)},className:"p-1 hover:bg-neutral-200 dark:hover:bg-white/10 rounded",children:l?w.jsx(ii,{className:"w-4 h-4"}):w.jsx(ad,{className:"w-4 h-4"})}),e[11]=l,e[12]=d,e[13]=x):x=e[13];let C;e[14]!==a||e[15]!==p||e[16]!==v||e[17]!==x?(C=w.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 cursor-pointer hover:bg-neutral-50 dark:hover:bg-white/5",onClick:a,children:[p,v,x]}),e[14]=a,e[15]=p,e[16]=v,e[17]=x,e[18]=C):C=e[18];let k;e[19]!==l||e[20]!==n.schema||e[21]!==d?(k=l&&d&&w.jsx("div",{className:"px-3 pb-2 border-t border-neutral-200 dark:border-white/10",children:w.jsx("pre",{className:"text-xs bg-neutral-100 dark:bg-black/20 p-2 rounded mt-2 overflow-auto max-h-48",children:JSON.stringify(n.schema,null,2)})}),e[19]=l,e[20]=n.schema,e[21]=d,e[22]=k):k=e[22];let T;return e[23]!==m||e[24]!==C||e[25]!==k?(T=w.jsxs("div",{className:m,children:[C,k]}),e[23]=m,e[24]=C,e[25]=k,e[26]=T):T=e[26],T}function mP({onSelected:t}){const{request:e,discoverMcpFeatures:n,setMcpTool:r,setMcpResource:s}=gn(),[a,l]=G.useState("tools"),[u,f]=G.useState(null),[d,m]=G.useState(!1),p=u?.tools||[],y=u?.resources||[],g=u?.error,v=async()=>{m(!0);try{const x=await n();x&&f(x)}finally{m(!1)}};return u?g?w.jsxs("div",{className:"p-4 text-center",children:[w.jsx("p",{className:"text-sm text-red-500 dark:text-red-400 mb-4",children:g}),w.jsxs("button",{onClick:v,disabled:!e.url||d,className:"inline-flex items-center gap-2 px-3 py-1.5 text-sm rounded-md border border-neutral-200 dark:border-white/10 text-neutral-700 dark:text-neutral-100 hover:bg-neutral-50 dark:hover:bg-white/10 disabled:opacity-50 disabled:cursor-not-allowed",children:[w.jsx(Ef,{className:"w-4 h-4"}),"Retry"]})]}):w.jsxs("div",{className:"flex flex-col h-full",children:[w.jsxs("div",{className:"flex border-b border-neutral-200 dark:border-white/10 shrink-0",children:[w.jsxs("button",{onClick:()=>l("tools"),className:`flex items-center gap-1.5 px-4 py-2 text-sm font-medium border-b-2 transition-colors ${a==="tools"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-neutral-500 hover:text-neutral-700 dark:text-neutral-400 dark:hover:text-neutral-200"}`,children:[w.jsx(Cf,{className:"w-4 h-4"}),"Tools (",p.length,")"]}),w.jsxs("button",{onClick:()=>l("resources"),className:`flex items-center gap-1.5 px-4 py-2 text-sm font-medium border-b-2 transition-colors ${a==="resources"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-neutral-500 hover:text-neutral-700 dark:text-neutral-400 dark:hover:text-neutral-200"}`,children:[w.jsx(io,{className:"w-4 h-4"}),"Resources (",y.length,")"]}),w.jsx("div",{className:"flex-1"}),w.jsx("button",{onClick:v,disabled:d,className:"p-2 text-neutral-500 hover:text-neutral-700 dark:text-neutral-400 dark:hover:text-neutral-200 disabled:opacity-40",title:"Refresh features",children:w.jsx(Ef,{className:"w-4 h-4"})})]}),w.jsxs("div",{className:"flex-1 overflow-auto p-2 space-y-2",children:[a==="tools"&&w.jsx(w.Fragment,{children:p.length===0?w.jsx("p",{className:"text-sm text-neutral-500 dark:text-neutral-400 text-center py-4",children:"No tools available"}):p.map(x=>w.jsx(h1,{feature:x,type:"tool",isSelected:e.mcp?.tool?.name===x.name,onSelect:()=>{r({name:x.name,arguments:"{}",schema:x.schema}),t?.()}},x.name))}),a==="resources"&&w.jsx(w.Fragment,{children:y.length===0?w.jsx("p",{className:"text-sm text-neutral-500 dark:text-neutral-400 text-center py-4",children:"No resources available"}):y.map(x=>w.jsx(h1,{feature:x,type:"resource",isSelected:e.mcp?.resource?.uri===(x.schema?.uri||x.name),onSelect:()=>{const C=x.schema?.uri||x.name;s({uri:C}),t?.()}},x.name))})]}),(e.mcp?.tool||e.mcp?.resource)&&w.jsx("div",{className:"border-t border-neutral-200 dark:border-white/10 p-2 shrink-0",children:w.jsxs("div",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:["Selected: ",e.mcp?.tool?`Tool: ${e.mcp.tool.name}`:`Resource: ${e.mcp?.resource?.uri}`]})})]}):w.jsxs("div",{className:"p-4 text-center",children:[w.jsx("p",{className:"text-sm text-neutral-500 dark:text-neutral-400 mb-4",children:"Enter an MCP server URL and discover its features"}),w.jsxs("button",{onClick:v,disabled:!e.url||d,className:"inline-flex items-center gap-2 px-3 py-1.5 text-sm rounded-md border border-neutral-200 dark:border-white/10 text-neutral-700 dark:text-neutral-100 hover:bg-neutral-50 dark:hover:bg-white/10 disabled:opacity-50 disabled:cursor-not-allowed",children:[w.jsx(wD,{className:"w-4 h-4"}),"Discover"]})]})}function gP(){const t=qe.c(32),{request:e,setUrl:n}=gn(),r=e?.url??"",s=e?.mcp?.tool?.name,a=e?.mcp?.resource?.uri,[l,u]=G.useState(!1),f=G.useRef(null);let d,m;t[0]!==l?(d=()=>{if(!l)return;const ne=he=>{f.current&&!f.current.contains(he.target)&&u(!1)};return document.addEventListener("mousedown",ne),()=>document.removeEventListener("mousedown",ne)},m=[l],t[0]=l,t[1]=d,t[2]=m):(d=t[1],m=t[2]),G.useEffect(d,m);let p;t[3]===Symbol.for("react.memo_cache_sentinel")?(p=()=>{u(!0)},t[3]=p):p=t[3];const y=p,g=s||a||"Select feature",v=Math.max(12,r.length||14);let x;t[4]!==n?(x=ne=>n(ne.target.value),t[4]=n,t[5]=x):x=t[5];let C;t[6]!==x||t[7]!==r||t[8]!==v?(C=w.jsx("input",{type:"text",value:r,onChange:x,placeholder:"MCP server URL",size:v,className:"min-w-24 max-w-full px-2 py-1.5 bg-transparent text-neutral-800 dark:text-neutral-100 text-sm placeholder-neutral-400 dark:placeholder-neutral-600 focus:outline-none"}),t[6]=x,t[7]=r,t[8]=v,t[9]=C):C=t[9];let k;t[10]===Symbol.for("react.memo_cache_sentinel")?(k=w.jsx("span",{className:"text-neutral-300 dark:text-neutral-600 shrink-0",children:"/"}),t[10]=k):k=t[10];const T=!r;let A;t[11]!==a||t[12]!==s?(A=s?w.jsx(Cf,{className:"w-4 h-4 text-amber-500 shrink-0"}):a?w.jsx(io,{className:"w-4 h-4 text-blue-500 shrink-0"}):w.jsx(Cf,{className:"w-4 h-4 text-neutral-400 shrink-0"}),t[11]=a,t[12]=s,t[13]=A):A=t[13];const M=`text-sm whitespace-nowrap ${s||a?"text-neutral-800 dark:text-neutral-100":"text-neutral-400 dark:text-neutral-500"}`;let I;t[14]!==g||t[15]!==M?(I=w.jsx("span",{className:M,children:g}),t[14]=g,t[15]=M,t[16]=I):I=t[16];const O=`w-3.5 h-3.5 text-neutral-400 shrink-0 transition-transform ${l?"rotate-180":""}`;let B;t[17]!==O?(B=w.jsx(ii,{className:O}),t[17]=O,t[18]=B):B=t[18];let U;t[19]!==B||t[20]!==T||t[21]!==A||t[22]!==I?(U=w.jsxs("button",{type:"button",onClick:y,disabled:T,className:"h-8 px-2 flex items-center gap-2 text-sm transition hover:bg-neutral-50 dark:hover:bg-white/5 disabled:opacity-50 disabled:cursor-not-allowed rounded",children:[A,I,B]}),t[19]=B,t[20]=T,t[21]=A,t[22]=I,t[23]=U):U=t[23];let K;t[24]!==l?(K=l&&w.jsx("div",{className:"absolute left-0 z-50 mt-2 w-[min(640px,calc(100vw-4rem))] max-h-[70vh] bg-white dark:bg-[#0f0f0f] border border-neutral-200 dark:border-white/10 rounded-lg shadow-xl overflow-hidden",children:w.jsx("div",{className:"h-105",children:w.jsx(mP,{onSelected:()=>u(!1)})})}),t[24]=l,t[25]=K):K=t[25];let j;t[26]!==U||t[27]!==K?(j=w.jsxs("div",{className:"relative shrink-0",ref:f,children:[U,K]}),t[26]=U,t[27]=K,t[28]=j):j=t[28];let J;return t[29]!==j||t[30]!==C?(J=w.jsxs("div",{className:"flex items-center flex-1 min-w-0",children:[C,k,j]}),t[29]=j,t[30]=C,t[31]=J):J=t[31],J}const yP=["Authorization","X-API-Key","X-Request-ID"];function Mg(t){if(!t||typeof t!="object")return{};const e=t,r=(Array.isArray(e.type)?e.type[0]:e.type)||(e.properties?"object":e.items?"array":void 0);if(r==="object"){const a={},l=e.properties||{};return Object.keys(l).forEach(u=>{a[u]=Mg(l[u])}),a}if(r==="array"){const a=e.items||{type:"string"};return[Mg(a)]}const s=e.enum;if(s&&s.length>0)return s[0];switch(r){case"integer":case"number":return 0;case"boolean":return!0;case"string":return e.format==="byte"?"":"string";default:return{}}}function bP(){const[t,e]=G.useState("body"),{request:n,setMcpTool:r,setMcpHeaders:s,setVariables:a}=gn(),l=n?.variables??[],u=n?.mcp?.headers??[],f=n?.mcp?.tool?.arguments??"{}",d=n?.mcp?.tool,m=n?.mcp?.resource,p=d?.schema,y=G.useMemo(()=>{try{return p?Mg(p):void 0}catch{return}},[p]),g=[{id:"headers",label:"Headers",count:u.filter(v=>v.key).length},{id:"body",label:"Body"}];return w.jsxs("div",{className:"space-y-3",children:[w.jsx("div",{className:"flex items-center gap-2",children:w.jsx("div",{role:"tablist",className:"inline-flex gap-1",children:g.map(v=>w.jsxs("button",{role:"tab",onClick:()=>e(v.id),className:`px-2 py-1 text-[11px] font-medium rounded-md transition-all ${t===v.id?"bg-white dark:bg-white/10 text-neutral-800 dark:text-neutral-100 shadow-sm":"text-neutral-500 dark:text-neutral-400 hover:text-neutral-700 dark:hover:text-neutral-200 hover:bg-neutral-100 dark:hover:bg-white/5"}`,children:[v.label,v.count!==void 0&&v.count>0&&w.jsx("span",{className:"ml-1.5 px-1.5 py-0.5 text-[9px] bg-neutral-200 dark:bg-white/10 text-neutral-600 dark:text-neutral-300 rounded-full",children:v.count})]},v.id))})}),w.jsxs("div",{children:[t==="headers"&&w.jsx(Ol,{items:u,onChange:s,keyPlaceholder:"Header",valuePlaceholder:"Value",keySuggestions:yP}),t==="body"&&(d?w.jsx(Iy,{value:f,onChange:v=>r({name:d.name,arguments:v,schema:d.schema}),variables:l,onVariablesChange:a,placeholder:y?JSON.stringify(y,null,2):`{
  "key": "value"
}`,action:y!==void 0?{label:"Fill with schema",onClick:()=>r({name:d.name,arguments:JSON.stringify(y,null,2),schema:d.schema})}:void 0}):m?w.jsx("div",{className:"py-8 text-center text-sm text-neutral-400 dark:text-neutral-500",children:"Resources are read-only; no arguments required."}):w.jsx("div",{className:"py-8 text-center text-sm text-neutral-400 dark:text-neutral-500",children:"Select a tool or resource from the URL bar."}))]})]})}function Vy(t){const e=t.trim();if(e.startsWith("{")&&e.endsWith("}")||e.startsWith("[")&&e.endsWith("]"))try{return JSON.parse(e),"json"}catch{}return e.startsWith("<")&&e.endsWith(">")&&(/<\w+[^>]*>[\s\S]*<\/\w+>/.test(e)||/<\w+[^>]*\/>/.test(e))?"xml":"text"}function _P(t){try{const e=JSON.parse(t);return JSON.stringify(e,null,2)}catch{return t}}function vP(t){try{const n=/(>)(<)(\/*)/g,r=t.replace(n,`$1
$2$3`);let s=0;return r.split(`
`).map(a=>{let l=0;a.match(/.+<\/\w[^>]*>$/)?l=0:a.match(/^<\/\w/)&&s>0?s-=1:a.match(/^<\w[^>]*[^/]>.*$/)?l=1:l=0;const u="  ".repeat(s);return s+=l,u+a}).join(`
`)}catch{return t}}function DE(t){const e=qe.c(10),{type:n,language:r}=t;let s;e[0]!==n?(s=()=>{switch(n){case"text":return w.jsx(jD,{size:12});case"image":return w.jsx(lD,{size:12});case"audio":return w.jsx(dD,{size:12});case"resource":return w.jsx(yg,{size:12});case"resource_link":return w.jsx(yg,{size:12});default:return w.jsx(io,{size:12})}},e[0]=n,e[1]=s):s=e[1];const a=s;let l;e[2]!==r||e[3]!==n?(l=r&&r!=="text"?r.toUpperCase():n.charAt(0).toUpperCase()+n.slice(1),e[2]=r,e[3]=n,e[4]=l):l=e[4];const u=l;let f;e[5]!==a?(f=a(),e[5]=a,e[6]=f):f=e[6];let d;return e[7]!==u||e[8]!==f?(d=w.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 text-xs font-medium rounded bg-blue-100 dark:bg-blue-500/20 text-blue-700 dark:text-blue-300",children:[f,u]}),e[7]=u,e[8]=f,e[9]=d):d=e[9],d}function Dg(t){const e=qe.c(10),{text:n,className:r}=t,s=r===void 0?"":r;let a;e[0]!==n?(a=Vy(n),e[0]=n,e[1]=a):a=e[1];const l=a;let u;e[2]!==l||e[3]!==n?(u=l==="json"?_P(n):l==="xml"?vP(n):n,e[2]=l,e[3]=n,e[4]=u):u=e[4];const d=dd(u,l);let m;e[5]!==d?(m=w.jsx("div",{className:hd,dangerouslySetInnerHTML:{__html:d}}),e[5]=d,e[6]=m):m=e[6];let p;return e[7]!==s||e[8]!==m?(p=w.jsx("div",{className:s,children:m}),e[7]=s,e[8]=m,e[9]=p):p=e[9],p}function xP(t){const e=qe.c(38),{content:n,index:r,isError:s}=t,[a,l]=G.useState(!0);let u;e[0]!==n.mimeType||e[1]!==n.resource?.uri||e[2]!==n.text||e[3]!==n.type||e[4]!==n.uri?(u=(()=>{if(n.type==="text"){const I=Vy(n.text||"");return{type:"text",language:I,label:I!=="text"?I.toUpperCase():"Text"}}return n.type==="image"?{type:"image",label:"Image",detail:n.mimeType}:n.type==="audio"?{type:"audio",label:"Audio",detail:n.mimeType}:n.type==="resource"?{type:"resource",label:"Resource",detail:n.resource?.uri}:n.type==="resource_link"?{type:"resource_link",label:"Resource Link",detail:n.uri}:{type:"unknown",label:"Unknown"}})(),e[0]=n.mimeType,e[1]=n.resource?.uri,e[2]=n.text,e[3]=n.type,e[4]=n.uri,e[5]=u):u=e[5];const f=u,d=`border rounded-lg overflow-hidden ${s?"border-red-200 dark:border-red-800/50":"border-neutral-200 dark:border-white/10"}`;let m;e[6]!==a?(m=()=>l(!a),e[6]=a,e[7]=m):m=e[7];const p=`w-full flex items-center gap-2 px-3 py-2 transition-colors ${s?"bg-red-50/50 dark:bg-red-900/10 hover:bg-red-100/50 dark:hover:bg-red-900/20":"bg-neutral-50 dark:bg-white/5 hover:bg-neutral-100 dark:hover:bg-white/10"}`;let y;e[8]!==a?(y=a?w.jsx(ii,{className:"w-4 h-4 text-neutral-400"}):w.jsx(ad,{className:"w-4 h-4 text-neutral-400"}),e[8]=a,e[9]=y):y=e[9];const g=r+1;let v;e[10]!==g?(v=w.jsxs("span",{className:"text-xs font-mono text-neutral-500 dark:text-neutral-400",children:["#",g]}),e[10]=g,e[11]=v):v=e[11];let x;e[12]!==f.language||e[13]!==f.type?(x=w.jsx(DE,{type:f.type,language:f.language}),e[12]=f.language,e[13]=f.type,e[14]=x):x=e[14];let C;e[15]!==f.detail?(C=f.detail&&w.jsx("span",{className:"text-xs text-neutral-500 dark:text-neutral-400 font-mono truncate",children:f.detail}),e[15]=f.detail,e[16]=C):C=e[16];let k;e[17]!==m||e[18]!==p||e[19]!==y||e[20]!==v||e[21]!==x||e[22]!==C?(k=w.jsxs("button",{onClick:m,className:p,children:[y,v,x,C]}),e[17]=m,e[18]=p,e[19]=y,e[20]=v,e[21]=x,e[22]=C,e[23]=k):k=e[23];let T;e[24]!==n.data||e[25]!==n.description||e[26]!==n.mimeType||e[27]!==n.name||e[28]!==n.resource||e[29]!==n.text||e[30]!==n.type||e[31]!==n.uri||e[32]!==a?(T=a&&w.jsxs("div",{className:"p-3 bg-white dark:bg-transparent",children:[n.type==="text"&&n.text&&w.jsx(Dg,{text:n.text}),n.type==="image"&&n.data&&w.jsx("img",{src:n.data.startsWith("data:")?n.data:`data:${n.mimeType||"image/png"};base64,${n.data}`,alt:"MCP Image Response",className:"max-w-full h-auto rounded"}),n.type==="audio"&&n.data&&w.jsx("audio",{controls:!0,className:"w-full",children:w.jsx("source",{src:n.data.startsWith("data:")?n.data:`data:${n.mimeType||"audio/wav"};base64,${n.data}`,type:n.mimeType||"audio/wav"})}),n.type==="resource"&&n.resource&&w.jsxs("div",{className:"space-y-2",children:[n.resource.text&&w.jsx(Dg,{text:n.resource.text}),n.resource.blob&&n.resource.mimeType?.startsWith("image/")&&w.jsx("img",{src:`data:${n.resource.mimeType};base64,${n.resource.blob}`,alt:n.resource.uri,className:"max-w-full h-auto rounded"}),n.resource.blob&&n.resource.mimeType?.startsWith("audio/")&&w.jsx("audio",{controls:!0,className:"w-full",children:w.jsx("source",{src:`data:${n.resource.mimeType};base64,${n.resource.blob}`,type:n.resource.mimeType})}),n.resource.blob&&!n.resource.mimeType?.startsWith("image/")&&!n.resource.mimeType?.startsWith("audio/")&&w.jsxs("div",{className:"text-sm text-neutral-600 dark:text-neutral-300",children:["Binary content (",Math.round(n.resource.blob.length*.75)," bytes)"]})]}),n.type==="resource_link"&&w.jsxs("div",{className:"space-y-2",children:[n.name&&w.jsx("div",{className:"font-medium text-neutral-900 dark:text-white",children:n.name}),n.description&&w.jsx("div",{className:"text-sm text-neutral-600 dark:text-neutral-300",children:n.description}),n.uri&&w.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[w.jsx(yg,{size:14,className:"text-neutral-400 shrink-0"}),w.jsx("a",{href:n.uri,target:"_blank",rel:"noopener noreferrer",className:"font-mono text-blue-600 dark:text-blue-400 hover:underline break-all",children:n.uri})]}),n.mimeType&&w.jsx("div",{className:"text-xs text-neutral-500 dark:text-neutral-400 font-mono",children:n.mimeType})]})]}),e[24]=n.data,e[25]=n.description,e[26]=n.mimeType,e[27]=n.name,e[28]=n.resource,e[29]=n.text,e[30]=n.type,e[31]=n.uri,e[32]=a,e[33]=T):T=e[33];let A;return e[34]!==k||e[35]!==T||e[36]!==d?(A=w.jsxs("div",{className:d,children:[k,T]}),e[34]=k,e[35]=T,e[36]=d,e[37]=A):A=e[37],A}function wP(t){const e=qe.c(29),{content:n,index:r}=t,[s,a]=G.useState(!0);let l;e[0]!==n.blob||e[1]!==n.mimeType||e[2]!==n.text?(l=(()=>{if(n.text){const T=Vy(n.text);return{label:T!=="text"?T.toUpperCase():"Text",language:T}}return n.blob&&n.mimeType?.startsWith("image/")?{label:"Image",detail:n.mimeType}:n.blob&&n.mimeType?.startsWith("audio/")?{label:"Audio",detail:n.mimeType}:{label:"Binary",detail:n.mimeType}})(),e[0]=n.blob,e[1]=n.mimeType,e[2]=n.text,e[3]=l):l=e[3];const u=l;let f;e[4]!==s?(f=()=>a(!s),e[4]=s,e[5]=f):f=e[5];let d;e[6]!==s?(d=s?w.jsx(ii,{className:"w-4 h-4 text-neutral-400"}):w.jsx(ad,{className:"w-4 h-4 text-neutral-400"}),e[6]=s,e[7]=d):d=e[7];const m=r+1;let p;e[8]!==m?(p=w.jsxs("span",{className:"text-xs font-mono text-neutral-500 dark:text-neutral-400",children:["#",m]}),e[8]=m,e[9]=p):p=e[9];let y;e[10]!==u.language?(y=w.jsx(DE,{type:"resource",language:u.language}),e[10]=u.language,e[11]=y):y=e[11];let g;e[12]!==n.uri?(g=w.jsx("span",{className:"text-xs text-neutral-500 dark:text-neutral-400 font-mono truncate",title:n.uri,children:n.uri}),e[12]=n.uri,e[13]=g):g=e[13];let v;e[14]!==f||e[15]!==d||e[16]!==p||e[17]!==y||e[18]!==g?(v=w.jsxs("button",{onClick:f,className:"w-full flex items-center gap-2 px-3 py-2 bg-neutral-50 dark:bg-white/5 hover:bg-neutral-100 dark:hover:bg-white/10 transition-colors",children:[d,p,y,g]}),e[14]=f,e[15]=d,e[16]=p,e[17]=y,e[18]=g,e[19]=v):v=e[19];let x;e[20]!==n.blob||e[21]!==n.mimeType||e[22]!==n.text||e[23]!==n.uri||e[24]!==s?(x=s&&w.jsxs("div",{className:"p-3 bg-white dark:bg-transparent",children:[n.text&&w.jsx(Dg,{text:n.text}),n.blob&&n.mimeType?.startsWith("image/")&&w.jsx("img",{src:`data:${n.mimeType};base64,${n.blob}`,alt:n.uri,className:"max-w-full h-auto rounded"}),n.blob&&n.mimeType?.startsWith("audio/")&&w.jsx("audio",{controls:!0,className:"w-full",children:w.jsx("source",{src:`data:${n.mimeType};base64,${n.blob}`,type:n.mimeType})}),n.blob&&!n.mimeType?.startsWith("image/")&&!n.mimeType?.startsWith("audio/")&&w.jsxs("div",{className:"text-sm text-neutral-600 dark:text-neutral-300",children:["Binary content (",Math.round(n.blob.length*.75)," bytes)"]}),!n.text&&!n.blob&&w.jsx("div",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:"Empty resource"})]}),e[20]=n.blob,e[21]=n.mimeType,e[22]=n.text,e[23]=n.uri,e[24]=s,e[25]=x):x=e[25];let C;return e[26]!==v||e[27]!==x?(C=w.jsxs("div",{className:"border border-neutral-200 dark:border-white/10 rounded-lg overflow-hidden",children:[v,x]}),e[26]=v,e[27]=x,e[28]=C):C=e[28],C}function SP(t){const e=qe.c(26),{toolResponse:n,resourceResponse:r}=t;if(n){const s=n.isError,a=n.content.length;let l;e[0]!==s?(l=s&&w.jsxs("div",{className:"flex items-center gap-2 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg px-4 py-3 mb-3",children:[w.jsx(Lk,{className:"text-red-500 dark:text-red-400 shrink-0",size:18}),w.jsx("span",{className:"text-red-700 dark:text-red-400 text-sm font-medium",children:"Tool returned an error"})]}),e[0]=s,e[1]=l):l=e[1];let u;e[2]!==a?(u=a>0&&w.jsx("div",{className:"flex items-center gap-2 mb-3",children:w.jsxs("span",{className:"text-xs font-medium text-neutral-500 dark:text-neutral-400",children:[a," item",a!==1?"s":""]})}),e[2]=a,e[3]=u):u=e[3];let f;if(e[4]!==s||e[5]!==n.content){let p;e[7]!==s?(p=(y,g)=>w.jsx(xP,{content:y,index:g,isError:s},g),e[7]=s,e[8]=p):p=e[8],f=n.content.map(p),e[4]=s,e[5]=n.content,e[6]=f}else f=e[6];let d;e[9]!==a?(d=a===0&&w.jsx("div",{className:"text-sm text-neutral-500 dark:text-neutral-400 text-center py-4",children:"No content returned"}),e[9]=a,e[10]=d):d=e[10];let m;return e[11]!==l||e[12]!==u||e[13]!==f||e[14]!==d?(m=w.jsxs("div",{className:"space-y-2",children:[l,u,f,d]}),e[11]=l,e[12]=u,e[13]=f,e[14]=d,e[15]=m):m=e[15],m}if(r){const s=r.contents.length;let a;e[16]!==s?(a=s>0&&w.jsx("div",{className:"flex items-center gap-2 mb-3",children:w.jsxs("span",{className:"text-xs font-medium text-neutral-500 dark:text-neutral-400",children:[s," resource",s!==1?"s":""]})}),e[16]=s,e[17]=a):a=e[17];let l;e[18]!==r.contents?(l=r.contents.map(kP),e[18]=r.contents,e[19]=l):l=e[19];let u;e[20]!==s?(u=s===0&&w.jsx("div",{className:"text-sm text-neutral-500 dark:text-neutral-400 text-center py-4",children:"No content returned"}),e[20]=s,e[21]=u):u=e[21];let f;return e[22]!==a||e[23]!==l||e[24]!==u?(f=w.jsxs("div",{className:"space-y-2",children:[a,l,u]}),e[22]=a,e[23]=l,e[24]=u,e[25]=f):f=e[25],f}return null}function kP(t,e){return w.jsx(wP,{content:t,index:e},e)}function EP(t){const e=qe.c(9),{toolResponse:n,resourceResponse:r,viewMode:s}=t,a=s===void 0?"pretty":s,l=n||r;let u;e[0]!==l?(u=l?new Blob([JSON.stringify(l,null,2)],{type:"application/json"}):null,e[0]=l,e[1]=u):u=e[1];const f=u;let d;e[2]!==f||e[3]!==r||e[4]!==n||e[5]!==a?(d=a==="pretty"?w.jsx(SP,{toolResponse:n,resourceResponse:r}):f&&w.jsx(Fy,{content:f}),e[2]=f,e[3]=r,e[4]=n,e[5]=a,e[6]=d):d=e[6];let m;return e[7]!==d?(m=w.jsx("div",{className:"h-full flex flex-col overflow-hidden",children:w.jsx("div",{className:"flex-1 min-h-0 overflow-auto",children:d})}),e[7]=d,e[8]=m):m=e[8],m}function CP(){const{request:t,setUrl:e,setOpenAIModel:n}=gn(),r=t?.url??"",s=t?.openai?.model??"",[a,l]=G.useState([]),[u,f]=G.useState(!1),[d,m]=G.useState(!1),[p,y]=G.useState(null),g=G.useRef(null);G.useEffect(()=>{if(!u)return;const T=A=>{g.current&&!g.current.contains(A.target)&&f(!1)};return document.addEventListener("mousedown",T),()=>document.removeEventListener("mousedown",T)},[u]);const v=G.useCallback(async()=>{if(r){m(!0),y(null);try{const T=r.replace(/\/$/,""),A=await fetch(`${T}/v1/models`);if(!A.ok)throw new Error(`HTTP ${A.status}`);const I=((await A.json()).data||[]).map(O=>O.id).sort();l(I),!s&&I.length>0&&n(I[0])}catch(T){const A=T instanceof Error?T.message:"Failed to fetch models";y(A),l([])}finally{m(!1)}}},[r,s,n]);G.useEffect(()=>{if(!r)return;const T=setTimeout(()=>{v()},500);return()=>clearTimeout(T)},[r]);const x=()=>{f(!0)},C=T=>{n(T),f(!1)},k=Math.max(12,r.length||20);return w.jsxs("div",{className:"flex items-center flex-1 min-w-0",children:[w.jsx("input",{type:"text",value:r,onChange:T=>e(T.target.value),placeholder:"OpenAI API URL (e.g., https://api.openai.com)",size:k,className:"min-w-24 max-w-full px-2 py-1.5 bg-transparent text-neutral-800 dark:text-neutral-100 text-sm placeholder-neutral-400 dark:placeholder-neutral-600 focus:outline-none"}),w.jsx("span",{className:"text-neutral-300 dark:text-neutral-600 shrink-0",children:"/"}),w.jsxs("div",{className:"relative shrink-0",ref:g,children:[w.jsxs("button",{type:"button",onClick:x,disabled:!r,className:"h-8 px-2 flex items-center gap-2 text-sm transition hover:bg-neutral-50 dark:hover:bg-white/5 disabled:opacity-50 disabled:cursor-not-allowed rounded",children:[w.jsx(eD,{className:`w-4 h-4 shrink-0 ${s?"text-violet-500":"text-neutral-400"}`}),w.jsx("span",{className:`text-sm whitespace-nowrap ${s?"text-neutral-800 dark:text-neutral-100":"text-neutral-400 dark:text-neutral-500"}`,children:s||"Select model"}),d?w.jsx(Ef,{className:"w-3.5 h-3.5 text-neutral-400 shrink-0 animate-spin"}):w.jsx(ii,{className:`w-3.5 h-3.5 text-neutral-400 shrink-0 transition-transform ${u?"rotate-180":""}`})]}),u&&w.jsxs("div",{className:"absolute left-0 z-50 mt-2 w-64 max-h-80 bg-white dark:bg-[#0f0f0f] border border-neutral-200 dark:border-white/10 rounded-lg shadow-xl overflow-hidden",children:[w.jsxs("div",{className:"p-2 border-b border-neutral-200 dark:border-white/10 flex items-center justify-between",children:[w.jsxs("span",{className:"text-xs font-medium text-neutral-500 dark:text-neutral-400",children:["Models (",a.length,")"]}),w.jsx("button",{type:"button",onClick:T=>{T.stopPropagation(),v()},disabled:d,className:"p-1 hover:bg-neutral-100 dark:hover:bg-white/10 rounded transition-colors disabled:opacity-50",title:"Refresh models",children:w.jsx(Ef,{className:`w-3.5 h-3.5 text-neutral-400 ${d?"animate-spin":""}`})})]}),w.jsx("div",{className:"overflow-y-auto max-h-64",children:p?w.jsx("div",{className:"p-3 text-sm text-red-500 dark:text-red-400",children:p}):a.length===0?w.jsx("div",{className:"p-3 text-sm text-neutral-400 dark:text-neutral-500",children:d?"Loading models...":"No models available"}):a.map(T=>w.jsx("button",{type:"button",onClick:()=>C(T),className:`w-full px-3 py-2 text-left text-sm transition-colors ${s===T?"bg-violet-50 dark:bg-violet-500/10 text-violet-700 dark:text-violet-300":"text-neutral-700 dark:text-neutral-300 hover:bg-neutral-50 dark:hover:bg-white/5"}`,children:T},T))})]})]})]})}function TP(){return Math.random().toString(36).substring(2,9)}function p1(){return{id:TP(),role:"user",content:[{type:"input_text",text:""}]}}function AP(t){if(t.content.length===0)return!0;const e=t.content[0];switch(e.type){case"input_text":return!e.text;case"input_image":return!e.image_url;case"input_file":return!e.file_data}}function RP(){const t=qe.c(16),{request:e,setOpenAIChatInput:n}=gn();let r;t[0]===Symbol.for("react.memo_cache_sentinel")?(r={},t[0]=r):r=t[0];const s=G.useRef(r);let a,l;if(t[1]!==e?.openai?.chat?.input||t[2]!==n){const d=e?.openai?.chat?.input??[],m=(M,I)=>{const O=d.map(U=>U.id===M?{...U,...I}:U),B=O[O.length-1];B&&!AP(B)&&O.push(p1()),n(O)};let p;t[5]!==m?(p=(M,I)=>{m(M,{content:[I]})},t[5]=m,t[6]=p):p=t[6];const y=p,g=M=>{if(d.length===1){n([p1()]);return}n(d.filter(I=>I.id!==M))};let v;t[7]!==y?(v=(M,I)=>{const O=I.target.files?.[0];if(I.target.value="",!O)return;const B=new FileReader;B.onload=()=>{const U=B.result,K=U.split(",")[1];O.type.startsWith("image/")?y(M,{type:"input_image",image_url:U}):y(M,{type:"input_file",filename:O.name,file_data:K})},B.readAsDataURL(O)},t[7]=y,t[8]=v):v=t[8];const x=v;let C;t[9]!==y?(C=(M,I)=>{e:switch(I){case"input_text":{y(M,{type:"input_text",text:""});break e}case"input_image":{y(M,{type:"input_image",image_url:""});break e}case"input_file":y(M,{type:"input_file",filename:"",file_data:""})}},t[9]=y,t[10]=C):C=t[10];const k=C,T=M=>{const I=d.find(B=>B.id===M);if(!I)return;const O=I.content[0];O.type==="input_image"?y(M,{type:"input_image",image_url:""}):O.type==="input_file"&&y(M,{type:"input_file",filename:"",file_data:""})},A=M=>{const I=M.content[0];switch(I.type){case"input_text":return w.jsx("input",{type:"text",value:I.text,onChange:O=>y(M.id,{type:"input_text",text:O.target.value}),placeholder:"Message content...",className:"w-full px-2 py-1 bg-white dark:bg-white/5 border border-neutral-300 dark:border-white/10 rounded text-xs text-neutral-800 dark:text-neutral-100 placeholder-neutral-400 dark:placeholder-neutral-500 focus:outline-none focus:border-neutral-400 dark:focus:border-white/20 transition-colors"});case"input_image":return I.image_url?w.jsxs("div",{className:"flex items-center gap-2 px-2 py-1 bg-white dark:bg-white/5 border border-neutral-300 dark:border-white/10 rounded",children:[w.jsx("img",{src:I.image_url,alt:"Uploaded",className:"w-5 h-5 object-cover rounded"}),w.jsx("span",{className:"text-xs text-neutral-600 dark:text-neutral-400 truncate flex-1",children:"Image"}),w.jsx("button",{type:"button",onClick:()=>T(M.id),className:"p-0.5 hover:bg-neutral-100 dark:hover:bg-white/10 rounded transition-colors",children:w.jsx(Hl,{className:"w-3 h-3 text-neutral-400"})})]}):w.jsxs("label",{className:"flex items-center gap-2 px-2 py-1 bg-white dark:bg-white/5 border border-dashed border-neutral-300 dark:border-white/20 rounded cursor-pointer hover:bg-neutral-50 dark:hover:bg-white/10 transition-colors",children:[w.jsx(bg,{className:"w-3.5 h-3.5 text-neutral-400"}),w.jsx("span",{className:"text-xs text-neutral-400",children:"Upload image..."}),w.jsx("input",{ref:O=>{s.current[M.id]=O},type:"file",accept:"image/*",onChange:O=>x(M.id,O),className:"hidden"})]});case"input_file":return I.filename?w.jsxs("div",{className:"flex items-center gap-2 px-2 py-1 bg-white dark:bg-white/5 border border-neutral-300 dark:border-white/10 rounded",children:[w.jsx(io,{className:"w-3.5 h-3.5 text-violet-500 shrink-0"}),w.jsx("span",{className:"text-xs text-neutral-600 dark:text-neutral-400 truncate flex-1",children:I.filename}),w.jsxs("span",{className:"text-[10px] text-neutral-400",children:["(",Math.round(I.file_data.length*.75/1024),"KB)"]}),w.jsx("button",{type:"button",onClick:()=>T(M.id),className:"p-0.5 hover:bg-neutral-100 dark:hover:bg-white/10 rounded transition-colors",children:w.jsx(Hl,{className:"w-3 h-3 text-neutral-400"})})]}):w.jsxs("label",{className:"flex items-center gap-2 px-2 py-1 bg-white dark:bg-white/5 border border-dashed border-neutral-300 dark:border-white/20 rounded cursor-pointer hover:bg-neutral-50 dark:hover:bg-white/10 transition-colors",children:[w.jsx(bg,{className:"w-3.5 h-3.5 text-neutral-400"}),w.jsx("span",{className:"text-xs text-neutral-400",children:"Upload file..."}),w.jsx("input",{ref:O=>{s.current[M.id]=O},type:"file",accept:".pdf,.doc,.docx,.txt",onChange:O=>x(M.id,O),className:"hidden"})]})}};l="w-full",a=d.map(M=>w.jsxs("tr",{className:"border-b border-neutral-100 dark:border-white/5 last:border-0",children:[w.jsx("td",{className:"w-24 px-1.5 py-1.5",children:w.jsxs("select",{value:M.role,onChange:I=>m(M.id,{role:I.target.value}),className:"w-full px-2 py-1 bg-white dark:bg-white/5 border border-neutral-300 dark:border-white/10 rounded text-xs text-neutral-700 dark:text-neutral-300 focus:outline-none focus:border-neutral-400 dark:focus:border-white/20 transition-colors",children:[w.jsx("option",{value:"system",children:"System"}),w.jsx("option",{value:"user",children:"User"}),w.jsx("option",{value:"assistant",children:"Assistant"})]})}),w.jsx("td",{className:"w-20 px-1.5 py-1.5",children:w.jsxs("select",{value:M.content[0]?.type??"input_text",onChange:I=>k(M.id,I.target.value),className:"w-full px-2 py-1 bg-white dark:bg-white/5 border border-neutral-300 dark:border-white/10 rounded text-xs text-neutral-700 dark:text-neutral-300 focus:outline-none focus:border-neutral-400 dark:focus:border-white/20 transition-colors",children:[w.jsx("option",{value:"input_text",children:"Text"}),w.jsx("option",{value:"input_image",children:"Image"}),w.jsx("option",{value:"input_file",children:"File"})]})}),w.jsx("td",{className:"px-1.5 py-1.5",children:A(M)}),w.jsx("td",{className:"w-8 pr-1.5 py-1.5",children:w.jsx("button",{type:"button",onClick:()=>g(M.id),className:"p-1 rounded hover:bg-red-50 dark:hover:bg-red-500/10 transition-colors text-neutral-300 dark:text-neutral-600 hover:text-red-500",title:"Remove message",children:w.jsx(ic,{className:"w-3.5 h-3.5"})})})]},M.id)),t[1]=e?.openai?.chat?.input,t[2]=n,t[3]=a,t[4]=l}else a=t[3],l=t[4];let u;t[11]!==a?(u=w.jsx("tbody",{children:a}),t[11]=a,t[12]=u):u=t[12];let f;return t[13]!==l||t[14]!==u?(f=w.jsx("div",{children:w.jsx("table",{className:l,children:u})}),t[13]=l,t[14]=u,t[15]=f):f=t[15],f}function OP(){const t=qe.c(39),{request:e,setOpenAIBodyType:n,setOpenAIImagePrompt:r,setOpenAIAudioText:s,setOpenAIAudioVoice:a,setOpenAITranscriptionFile:l,setOpenAIEmbeddingsText:u}=gn(),f=!!e?.openai?.chat,d=!!e?.openai?.image,m=!!e?.openai?.audio,p=!!e?.openai?.transcription,y=f?"chat":d?"image":m?"audio":p?"transcription":"embeddings",g=e?.openai?.image?.prompt??"",v=e?.openai?.audio?.text??"",x=e?.openai?.audio?.voice??"alloy",C=e?.openai?.transcription?.file??"",k=e?.openai?.embeddings?.text??"";let T;t[0]===Symbol.for("react.memo_cache_sentinel")?(T={id:"chat",label:"Chat"},t[0]=T):T=t[0];let A;t[1]===Symbol.for("react.memo_cache_sentinel")?(A={id:"audio",label:"Audio"},t[1]=A):A=t[1];let M;t[2]===Symbol.for("react.memo_cache_sentinel")?(M={id:"image",label:"Image"},t[2]=M):M=t[2];let I;t[3]===Symbol.for("react.memo_cache_sentinel")?(I={id:"transcription",label:"Transcription"},t[3]=I):I=t[3];let O;t[4]===Symbol.for("react.memo_cache_sentinel")?(O=[T,A,M,I,{id:"embeddings",label:"Embeddings"}],t[4]=O):O=t[4];const B=O;let U;t[5]!==n?(U=ie=>{n(ie)},t[5]=n,t[6]=U):U=t[6];const K=U;let j;t[7]!==y||t[8]!==K?(j=w.jsx("div",{className:"flex items-center gap-2",children:w.jsx("div",{role:"tablist",className:"inline-flex gap-1",children:B.map(ie=>w.jsx("button",{role:"tab",onClick:()=>K(ie.id),className:`px-2 py-1 text-[11px] font-medium rounded-md transition-all ${y===ie.id?"bg-white dark:bg-white/10 text-neutral-800 dark:text-neutral-100 shadow-sm":"text-neutral-500 dark:text-neutral-400 hover:text-neutral-700 dark:hover:text-neutral-200 hover:bg-neutral-100 dark:hover:bg-white/5"}`,children:ie.label},ie.id))})}),t[7]=y,t[8]=K,t[9]=j):j=t[9];let J;t[10]!==y?(J=y==="chat"&&w.jsx(RP,{}),t[10]=y,t[11]=J):J=t[11];let ne;t[12]!==y||t[13]!==g||t[14]!==r?(ne=y==="image"&&w.jsxs("div",{className:"space-y-2",children:[w.jsx("label",{className:"block text-xs font-medium text-neutral-500 dark:text-neutral-400",children:"Prompt"}),w.jsx("textarea",{value:g,onChange:ie=>r(ie.target.value),placeholder:"Describe the image you want to generate...",rows:4,className:"w-full px-3 py-2 text-sm bg-neutral-50 dark:bg-white/5 border border-neutral-200 dark:border-white/10 rounded-lg focus:outline-none focus:ring-2 focus:ring-violet-500/50 resize-none text-neutral-800 dark:text-neutral-100 placeholder-neutral-400 dark:placeholder-neutral-600"})]}),t[12]=y,t[13]=g,t[14]=r,t[15]=ne):ne=t[15];let he;t[16]!==v||t[17]!==x||t[18]!==y||t[19]!==s||t[20]!==a?(he=y==="audio"&&w.jsxs("div",{className:"space-y-3",children:[w.jsxs("div",{className:"space-y-2",children:[w.jsx("label",{className:"block text-xs font-medium text-neutral-500 dark:text-neutral-400",children:"Text to convert to speech"}),w.jsx("textarea",{value:v,onChange:ie=>s(ie.target.value),placeholder:"Enter text to convert to speech...",rows:4,className:"w-full px-3 py-2 text-sm bg-neutral-50 dark:bg-white/5 border border-neutral-200 dark:border-white/10 rounded-lg focus:outline-none focus:ring-2 focus:ring-violet-500/50 resize-none text-neutral-800 dark:text-neutral-100 placeholder-neutral-400 dark:placeholder-neutral-600"})]}),w.jsxs("div",{className:"space-y-2",children:[w.jsx("label",{className:"block text-xs font-medium text-neutral-500 dark:text-neutral-400",children:"Voice"}),w.jsxs("select",{value:x,onChange:ie=>a(ie.target.value),className:"w-full px-3 py-2 text-sm bg-neutral-50 dark:bg-white/5 border border-neutral-200 dark:border-white/10 rounded-lg focus:outline-none focus:ring-2 focus:ring-violet-500/50 text-neutral-800 dark:text-neutral-100",children:[w.jsx("option",{value:"alloy",children:"Alloy"}),w.jsx("option",{value:"ash",children:"Ash"}),w.jsx("option",{value:"ballad",children:"Ballad"}),w.jsx("option",{value:"coral",children:"Coral"}),w.jsx("option",{value:"echo",children:"Echo"}),w.jsx("option",{value:"fable",children:"Fable"}),w.jsx("option",{value:"onyx",children:"Onyx"}),w.jsx("option",{value:"nova",children:"Nova"}),w.jsx("option",{value:"sage",children:"Sage"}),w.jsx("option",{value:"shimmer",children:"Shimmer"}),w.jsx("option",{value:"verse",children:"Verse"}),w.jsx("option",{value:"marin",children:"Marin"}),w.jsx("option",{value:"cedar",children:"Cedar"})]})]})]}),t[16]=v,t[17]=x,t[18]=y,t[19]=s,t[20]=a,t[21]=he):he=t[21];let Y;t[22]!==y||t[23]!==l||t[24]!==C?(Y=y==="transcription"&&w.jsx("div",{className:"space-y-3",children:w.jsxs("div",{className:"space-y-2",children:[w.jsx("label",{className:"block text-xs font-medium text-neutral-500 dark:text-neutral-400",children:"Audio File"}),w.jsx("div",{className:"flex flex-col gap-2",children:C?w.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 text-sm bg-neutral-50 dark:bg-white/5 border border-neutral-200 dark:border-white/10 rounded-lg",children:[w.jsxs("div",{className:"flex-1 text-neutral-700 dark:text-neutral-300",children:[w.jsx("svg",{className:"w-4 h-4 inline-block mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"})}),"Audio file uploaded"]}),w.jsx("button",{type:"button",onClick:()=>l(""),className:"px-2 py-1 text-xs text-neutral-500 dark:text-neutral-400 hover:text-neutral-700 dark:hover:text-neutral-200 hover:bg-neutral-100 dark:hover:bg-white/10 rounded transition-colors",children:"Clear"})]}):w.jsx("input",{type:"file",accept:"audio/*,.m4a,.mp3,.mp4,.mpeg,.mpga,.wav,.webm",onChange:ie=>{const re=ie.target.files?.[0];if(re){const N=new FileReader;N.onloadend=()=>{const D=N.result;l(D)},N.readAsDataURL(re)}},className:"w-full px-3 py-2 text-sm bg-neutral-50 dark:bg-white/5 border border-neutral-200 dark:border-white/10 rounded-lg focus:outline-none focus:ring-2 focus:ring-violet-500/50 text-neutral-800 dark:text-neutral-100 file:mr-4 file:py-1 file:px-2 file:rounded file:border-0 file:text-sm file:bg-violet-50 dark:file:bg-violet-500/10 file:text-violet-600 dark:file:text-violet-400 hover:file:bg-violet-100 dark:hover:file:bg-violet-500/20"})})]})}),t[22]=y,t[23]=l,t[24]=C,t[25]=Y):Y=t[25];let q;t[26]!==y||t[27]!==k||t[28]!==u?(q=y==="embeddings"&&w.jsxs("div",{className:"space-y-2",children:[w.jsx("label",{className:"block text-xs font-medium text-neutral-500 dark:text-neutral-400",children:"Text"}),w.jsx("textarea",{value:k,onChange:ie=>u(ie.target.value),placeholder:"Enter text to convert to embeddings...",rows:4,className:"w-full px-3 py-2 text-sm bg-neutral-50 dark:bg-white/5 border border-neutral-200 dark:border-white/10 rounded-lg focus:outline-none focus:ring-2 focus:ring-violet-500/50 resize-none text-neutral-800 dark:text-neutral-100 placeholder-neutral-400 dark:placeholder-neutral-600"})]}),t[26]=y,t[27]=k,t[28]=u,t[29]=q):q=t[29];let P;t[30]!==Y||t[31]!==q||t[32]!==J||t[33]!==ne||t[34]!==he?(P=w.jsxs("div",{children:[J,ne,he,Y,q]}),t[30]=Y,t[31]=q,t[32]=J,t[33]=ne,t[34]=he,t[35]=P):P=t[35];let H;return t[36]!==P||t[37]!==j?(H=w.jsxs("div",{className:"space-y-3",children:[j,P]}),t[36]=P,t[37]=j,t[38]=H):H=t[38],H}const NP=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,IP=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,MP={};function m1(t,e){return(MP.jsx?IP:NP).test(t)}var Na={},bm,g1;function DP(){if(g1)return bm;g1=1;var t=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,e=/\n/g,n=/^\s*/,r=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,s=/^:\s*/,a=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,l=/^[;\s]*/,u=/^\s+|\s+$/g,f=`
`,d="/",m="*",p="",y="comment",g="declaration";function v(C,k){if(typeof C!="string")throw new TypeError("First argument must be a string");if(!C)return[];k=k||{};var T=1,A=1;function M(Y){var q=Y.match(e);q&&(T+=q.length);var P=Y.lastIndexOf(f);A=~P?Y.length-P:A+Y.length}function I(){var Y={line:T,column:A};return function(q){return q.position=new O(Y),K(),q}}function O(Y){this.start=Y,this.end={line:T,column:A},this.source=k.source}O.prototype.content=C;function B(Y){var q=new Error(k.source+":"+T+":"+A+": "+Y);if(q.reason=Y,q.filename=k.source,q.line=T,q.column=A,q.source=C,!k.silent)throw q}function U(Y){var q=Y.exec(C);if(q){var P=q[0];return M(P),C=C.slice(P.length),q}}function K(){U(n)}function j(Y){var q;for(Y=Y||[];q=J();)q!==!1&&Y.push(q);return Y}function J(){var Y=I();if(!(d!=C.charAt(0)||m!=C.charAt(1))){for(var q=2;p!=C.charAt(q)&&(m!=C.charAt(q)||d!=C.charAt(q+1));)++q;if(q+=2,p===C.charAt(q-1))return B("End of comment missing");var P=C.slice(2,q-2);return A+=2,M(P),C=C.slice(q),A+=2,Y({type:y,comment:P})}}function ne(){var Y=I(),q=U(r);if(q){if(J(),!U(s))return B("property missing ':'");var P=U(a),H=Y({type:g,property:x(q[0].replace(t,p)),value:P?x(P[0].replace(t,p)):p});return U(l),H}}function he(){var Y=[];j(Y);for(var q;q=ne();)q!==!1&&(Y.push(q),j(Y));return Y}return K(),he()}function x(C){return C?C.replace(u,p):p}return bm=v,bm}var y1;function jP(){if(y1)return Na;y1=1;var t=Na&&Na.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Na,"__esModule",{value:!0}),Na.default=n;const e=t(DP());function n(r,s){let a=null;if(!r||typeof r!="string")return a;const l=(0,e.default)(r),u=typeof s=="function";return l.forEach(f=>{if(f.type!=="declaration")return;const{property:d,value:m}=f;u?s(d,m,f):m&&(a=a||{},a[d]=m)}),a}return Na}var ol={},b1;function LP(){if(b1)return ol;b1=1,Object.defineProperty(ol,"__esModule",{value:!0}),ol.camelCase=void 0;var t=/^--[a-zA-Z0-9_-]+$/,e=/-([a-z])/g,n=/^[^-]+$/,r=/^-(webkit|moz|ms|o|khtml)-/,s=/^-(ms)-/,a=function(d){return!d||n.test(d)||t.test(d)},l=function(d,m){return m.toUpperCase()},u=function(d,m){return"".concat(m,"-")},f=function(d,m){return m===void 0&&(m={}),a(d)?d:(d=d.toLowerCase(),m.reactCompat?d=d.replace(s,u):d=d.replace(r,u),d.replace(e,l))};return ol.camelCase=f,ol}var ll,_1;function zP(){if(_1)return ll;_1=1;var t=ll&&ll.__importDefault||function(s){return s&&s.__esModule?s:{default:s}},e=t(jP()),n=LP();function r(s,a){var l={};return!s||typeof s!="string"||(0,e.default)(s,function(u,f){u&&f&&(l[(0,n.camelCase)(u,a)]=f)}),l}return r.default=r,ll=r,ll}var PP=zP();const BP=tk(PP),jE=LE("end"),Hy=LE("start");function LE(t){return e;function e(n){const r=n&&n.position&&n.position[t]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function $P(t){const e=Hy(t),n=jE(t);if(e&&n)return{start:e,end:n}}function Il(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?v1(t.position):"start"in t||"end"in t?v1(t):"line"in t||"column"in t?jg(t):""}function jg(t){return x1(t&&t.line)+":"+x1(t&&t.column)}function v1(t){return jg(t&&t.start)+"-"+jg(t&&t.end)}function x1(t){return t&&typeof t=="number"?t:1}class Cn extends Error{constructor(e,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let s="",a={},l=!1;if(n&&("line"in n&&"column"in n?a={place:n}:"start"in n&&"end"in n?a={place:n}:"type"in n?a={ancestors:[n],place:n.position}:a={...n}),typeof e=="string"?s=e:!a.cause&&e&&(l=!0,s=e.message,a.cause=e),!a.ruleId&&!a.source&&typeof r=="string"){const f=r.indexOf(":");f===-1?a.ruleId=r:(a.source=r.slice(0,f),a.ruleId=r.slice(f+1))}if(!a.place&&a.ancestors&&a.ancestors){const f=a.ancestors[a.ancestors.length-1];f&&(a.place=f.position)}const u=a.place&&"start"in a.place?a.place.start:a.place;this.ancestors=a.ancestors||void 0,this.cause=a.cause||void 0,this.column=u?u.column:void 0,this.fatal=void 0,this.file="",this.message=s,this.line=u?u.line:void 0,this.name=Il(a.place)||"1:1",this.place=a.place||void 0,this.reason=this.message,this.ruleId=a.ruleId||void 0,this.source=a.source||void 0,this.stack=l&&a.cause&&typeof a.cause.stack=="string"?a.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}Cn.prototype.file="";Cn.prototype.name="";Cn.prototype.reason="";Cn.prototype.message="";Cn.prototype.stack="";Cn.prototype.column=void 0;Cn.prototype.line=void 0;Cn.prototype.ancestors=void 0;Cn.prototype.cause=void 0;Cn.prototype.fatal=void 0;Cn.prototype.place=void 0;Cn.prototype.ruleId=void 0;Cn.prototype.source=void 0;const Gy={}.hasOwnProperty,UP=new Map,qP=/[A-Z]/g,FP=new Set(["table","tbody","thead","tfoot","tr"]),VP=new Set(["td","th"]),zE="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function HP(t,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=e.filePath||void 0;let r;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=WP(n,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=XP(n,e.jsx,e.jsxs)}const s={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:r,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?lc:hE,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},a=PE(s,t,void 0);return a&&typeof a!="string"?a:s.create(t,s.Fragment,{children:a||void 0},void 0)}function PE(t,e,n){if(e.type==="element")return GP(t,e,n);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return KP(t,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return QP(t,e,n);if(e.type==="mdxjsEsm")return ZP(t,e);if(e.type==="root")return JP(t,e,n);if(e.type==="text")return YP(t,e)}function GP(t,e,n){const r=t.schema;let s=r;e.tagName.toLowerCase()==="svg"&&r.space==="html"&&(s=lc,t.schema=s),t.ancestors.push(e);const a=$E(t,e.tagName,!1),l=e6(t,e);let u=Zy(t,e);return FP.has(e.tagName)&&(u=u.filter(function(f){return typeof f=="string"?!od(f):!0})),BE(t,l,a,e),Ky(l,u),t.ancestors.pop(),t.schema=r,t.create(e,a,l,n)}function KP(t,e){if(e.data&&e.data.estree&&t.evaluater){const r=e.data.estree.body[0];return r.type,t.evaluater.evaluateExpression(r.expression)}Jl(t,e.position)}function ZP(t,e){if(e.data&&e.data.estree&&t.evaluater)return t.evaluater.evaluateProgram(e.data.estree);Jl(t,e.position)}function QP(t,e,n){const r=t.schema;let s=r;e.name==="svg"&&r.space==="html"&&(s=lc,t.schema=s),t.ancestors.push(e);const a=e.name===null?t.Fragment:$E(t,e.name,!0),l=t6(t,e),u=Zy(t,e);return BE(t,l,a,e),Ky(l,u),t.ancestors.pop(),t.schema=r,t.create(e,a,l,n)}function JP(t,e,n){const r={};return Ky(r,Zy(t,e)),t.create(e,t.Fragment,r,n)}function YP(t,e){return e.value}function BE(t,e,n,r){typeof n!="string"&&n!==t.Fragment&&t.passNode&&(e.node=r)}function Ky(t,e){if(e.length>0){const n=e.length>1?e:e[0];n&&(t.children=n)}}function XP(t,e,n){return r;function r(s,a,l,u){const d=Array.isArray(l.children)?n:e;return u?d(a,l,u):d(a,l)}}function WP(t,e){return n;function n(r,s,a,l){const u=Array.isArray(a.children),f=Hy(r);return e(s,a,l,u,{columnNumber:f?f.column-1:void 0,fileName:t,lineNumber:f?f.line:void 0},void 0)}}function e6(t,e){const n={};let r,s;for(s in e.properties)if(s!=="children"&&Gy.call(e.properties,s)){const a=n6(t,s,e.properties[s]);if(a){const[l,u]=a;t.tableCellAlignToStyle&&l==="align"&&typeof u=="string"&&VP.has(e.tagName)?r=u:n[l]=u}}if(r){const a=n.style||(n.style={});a[t.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function t6(t,e){const n={};for(const r of e.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&t.evaluater){const a=r.data.estree.body[0];a.type;const l=a.expression;l.type;const u=l.properties[0];u.type,Object.assign(n,t.evaluater.evaluateExpression(u.argument))}else Jl(t,e.position);else{const s=r.name;let a;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&t.evaluater){const u=r.value.data.estree.body[0];u.type,a=t.evaluater.evaluateExpression(u.expression)}else Jl(t,e.position);else a=r.value===null?!0:r.value;n[s]=a}return n}function Zy(t,e){const n=[];let r=-1;const s=t.passKeys?new Map:UP;for(;++r<e.children.length;){const a=e.children[r];let l;if(t.passKeys){const f=a.type==="element"?a.tagName:a.type==="mdxJsxFlowElement"||a.type==="mdxJsxTextElement"?a.name:void 0;if(f){const d=s.get(f)||0;l=f+"-"+d,s.set(f,d+1)}}const u=PE(t,a,l);u!==void 0&&n.push(u)}return n}function n6(t,e,n){const r=dE(t.schema,e);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?mE(n):gE(n)),r.property==="style"){let s=typeof n=="object"?n:r6(t,String(n));return t.stylePropertyNameCase==="css"&&(s=s6(s)),["style",s]}return[t.elementAttributeNameCase==="react"&&r.space?SL[r.property]||r.property:r.attribute,n]}}function r6(t,e){try{return BP(e,{reactCompat:!0})}catch(n){if(t.ignoreInvalidStyle)return{};const r=n,s=new Cn("Cannot parse `style` attribute",{ancestors:t.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw s.file=t.filePath||void 0,s.url=zE+"#cannot-parse-style-attribute",s}}function $E(t,e,n){let r;if(!n)r={type:"Literal",value:e};else if(e.includes(".")){const s=e.split(".");let a=-1,l;for(;++a<s.length;){const u=m1(s[a])?{type:"Identifier",name:s[a]}:{type:"Literal",value:s[a]};l=l?{type:"MemberExpression",object:l,property:u,computed:!!(a&&u.type==="Literal"),optional:!1}:u}r=l}else r=m1(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(r.type==="Literal"){const s=r.value;return Gy.call(t.components,s)?t.components[s]:s}if(t.evaluater)return t.evaluater.evaluateExpression(r);Jl(t)}function Jl(t,e){const n=new Cn("Cannot handle MDX estrees without `createEvaluater`",{ancestors:t.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=t.filePath||void 0,n.url=zE+"#cannot-handle-mdx-estrees-without-createevaluater",n}function s6(t){const e={};let n;for(n in t)Gy.call(t,n)&&(e[i6(n)]=t[n]);return e}function i6(t){let e=t.replace(qP,a6);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function a6(t){return"-"+t.toLowerCase()}const _m={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},o6={};function Qy(t,e){const n=o6,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,s=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return UE(t,r,s)}function UE(t,e,n){if(l6(t)){if("value"in t)return t.type==="html"&&!n?"":t.value;if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return w1(t.children,e,n)}return Array.isArray(t)?w1(t,e,n):""}function w1(t,e,n){const r=[];let s=-1;for(;++s<t.length;)r[s]=UE(t[s],e,n);return r.join("")}function l6(t){return!!(t&&typeof t=="object")}const S1=document.createElement("i");function Jy(t){const e="&"+t+";";S1.innerHTML=e;const n=S1.textContent;return n.charCodeAt(n.length-1)===59&&t!=="semi"||n===e?!1:n}function ar(t,e,n,r){const s=t.length;let a=0,l;if(e<0?e=-e>s?0:s+e:e=e>s?s:e,n=n>0?n:0,r.length<1e4)l=Array.from(r),l.unshift(e,n),t.splice(...l);else for(n&&t.splice(e,n);a<r.length;)l=r.slice(a,a+1e4),l.unshift(e,0),t.splice(...l),a+=1e4,e+=1e4}function Sr(t,e){return t.length>0?(ar(t,t.length,0,e),t):e}const k1={}.hasOwnProperty;function qE(t){const e={};let n=-1;for(;++n<t.length;)c6(e,t[n]);return e}function c6(t,e){let n;for(n in e){const s=(k1.call(t,n)?t[n]:void 0)||(t[n]={}),a=e[n];let l;if(a)for(l in a){k1.call(s,l)||(s[l]=[]);const u=a[l];u6(s[l],Array.isArray(u)?u:u?[u]:[])}}}function u6(t,e){let n=-1;const r=[];for(;++n<e.length;)(e[n].add==="after"?t:r).push(e[n]);ar(t,0,0,r)}function FE(t,e){const n=Number.parseInt(t,e);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function Mr(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const In=ai(/[A-Za-z]/),En=ai(/[\dA-Za-z]/),f6=ai(/[#-'*+\--9=?A-Z^-~]/);function Pf(t){return t!==null&&(t<32||t===127)}const Lg=ai(/\d/),d6=ai(/[\dA-Fa-f]/),h6=ai(/[!-/:-@[-`{-~]/);function Oe(t){return t!==null&&t<-2}function yt(t){return t!==null&&(t<0||t===32)}function Je(t){return t===-2||t===-1||t===32}const pd=ai(new RegExp("\\p{P}|\\p{S}","u")),Pi=ai(/\s/);function ai(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function lo(t){const e=[];let n=-1,r=0,s=0;for(;++n<t.length;){const a=t.charCodeAt(n);let l="";if(a===37&&En(t.charCodeAt(n+1))&&En(t.charCodeAt(n+2)))s=2;else if(a<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(a))||(l=String.fromCharCode(a));else if(a>55295&&a<57344){const u=t.charCodeAt(n+1);a<56320&&u>56319&&u<57344?(l=String.fromCharCode(a,u),s=1):l=""}else l=String.fromCharCode(a);l&&(e.push(t.slice(r,n),encodeURIComponent(l)),r=n+s+1,l=""),s&&(n+=s,s=0)}return e.join("")+t.slice(r)}function st(t,e,n,r){const s=r?r-1:Number.POSITIVE_INFINITY;let a=0;return l;function l(f){return Je(f)?(t.enter(n),u(f)):e(f)}function u(f){return Je(f)&&a++<s?(t.consume(f),u):(t.exit(n),e(f))}}const p6={tokenize:m6};function m6(t){const e=t.attempt(this.parser.constructs.contentInitial,r,s);let n;return e;function r(u){if(u===null){t.consume(u);return}return t.enter("lineEnding"),t.consume(u),t.exit("lineEnding"),st(t,e,"linePrefix")}function s(u){return t.enter("paragraph"),a(u)}function a(u){const f=t.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=f),n=f,l(u)}function l(u){if(u===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(u);return}return Oe(u)?(t.consume(u),t.exit("chunkText"),a):(t.consume(u),l)}}const g6={tokenize:y6},E1={tokenize:b6};function y6(t){const e=this,n=[];let r=0,s,a,l;return u;function u(A){if(r<n.length){const M=n[r];return e.containerState=M[1],t.attempt(M[0].continuation,f,d)(A)}return d(A)}function f(A){if(r++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,s&&T();const M=e.events.length;let I=M,O;for(;I--;)if(e.events[I][0]==="exit"&&e.events[I][1].type==="chunkFlow"){O=e.events[I][1].end;break}k(r);let B=M;for(;B<e.events.length;)e.events[B][1].end={...O},B++;return ar(e.events,I+1,0,e.events.slice(M)),e.events.length=B,d(A)}return u(A)}function d(A){if(r===n.length){if(!s)return y(A);if(s.currentConstruct&&s.currentConstruct.concrete)return v(A);e.interrupt=!!(s.currentConstruct&&!s._gfmTableDynamicInterruptHack)}return e.containerState={},t.check(E1,m,p)(A)}function m(A){return s&&T(),k(r),y(A)}function p(A){return e.parser.lazy[e.now().line]=r!==n.length,l=e.now().offset,v(A)}function y(A){return e.containerState={},t.attempt(E1,g,v)(A)}function g(A){return r++,n.push([e.currentConstruct,e.containerState]),y(A)}function v(A){if(A===null){s&&T(),k(0),t.consume(A);return}return s=s||e.parser.flow(e.now()),t.enter("chunkFlow",{_tokenizer:s,contentType:"flow",previous:a}),x(A)}function x(A){if(A===null){C(t.exit("chunkFlow"),!0),k(0),t.consume(A);return}return Oe(A)?(t.consume(A),C(t.exit("chunkFlow")),r=0,e.interrupt=void 0,u):(t.consume(A),x)}function C(A,M){const I=e.sliceStream(A);if(M&&I.push(null),A.previous=a,a&&(a.next=A),a=A,s.defineSkip(A.start),s.write(I),e.parser.lazy[A.start.line]){let O=s.events.length;for(;O--;)if(s.events[O][1].start.offset<l&&(!s.events[O][1].end||s.events[O][1].end.offset>l))return;const B=e.events.length;let U=B,K,j;for(;U--;)if(e.events[U][0]==="exit"&&e.events[U][1].type==="chunkFlow"){if(K){j=e.events[U][1].end;break}K=!0}for(k(r),O=B;O<e.events.length;)e.events[O][1].end={...j},O++;ar(e.events,U+1,0,e.events.slice(B)),e.events.length=O}}function k(A){let M=n.length;for(;M-- >A;){const I=n[M];e.containerState=I[1],I[0].exit.call(e,t)}n.length=A}function T(){s.write([null]),a=void 0,s=void 0,e.containerState._closeFlow=void 0}}function b6(t,e,n){return st(t,t.attempt(this.parser.constructs.document,e,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function to(t){if(t===null||yt(t)||Pi(t))return 1;if(pd(t))return 2}function md(t,e,n){const r=[];let s=-1;for(;++s<t.length;){const a=t[s].resolveAll;a&&!r.includes(a)&&(e=a(e,n),r.push(a))}return e}const zg={name:"attention",resolveAll:_6,tokenize:v6};function _6(t,e){let n=-1,r,s,a,l,u,f,d,m;for(;++n<t.length;)if(t[n][0]==="enter"&&t[n][1].type==="attentionSequence"&&t[n][1]._close){for(r=n;r--;)if(t[r][0]==="exit"&&t[r][1].type==="attentionSequence"&&t[r][1]._open&&e.sliceSerialize(t[r][1]).charCodeAt(0)===e.sliceSerialize(t[n][1]).charCodeAt(0)){if((t[r][1]._close||t[n][1]._open)&&(t[n][1].end.offset-t[n][1].start.offset)%3&&!((t[r][1].end.offset-t[r][1].start.offset+t[n][1].end.offset-t[n][1].start.offset)%3))continue;f=t[r][1].end.offset-t[r][1].start.offset>1&&t[n][1].end.offset-t[n][1].start.offset>1?2:1;const p={...t[r][1].end},y={...t[n][1].start};C1(p,-f),C1(y,f),l={type:f>1?"strongSequence":"emphasisSequence",start:p,end:{...t[r][1].end}},u={type:f>1?"strongSequence":"emphasisSequence",start:{...t[n][1].start},end:y},a={type:f>1?"strongText":"emphasisText",start:{...t[r][1].end},end:{...t[n][1].start}},s={type:f>1?"strong":"emphasis",start:{...l.start},end:{...u.end}},t[r][1].end={...l.start},t[n][1].start={...u.end},d=[],t[r][1].end.offset-t[r][1].start.offset&&(d=Sr(d,[["enter",t[r][1],e],["exit",t[r][1],e]])),d=Sr(d,[["enter",s,e],["enter",l,e],["exit",l,e],["enter",a,e]]),d=Sr(d,md(e.parser.constructs.insideSpan.null,t.slice(r+1,n),e)),d=Sr(d,[["exit",a,e],["enter",u,e],["exit",u,e],["exit",s,e]]),t[n][1].end.offset-t[n][1].start.offset?(m=2,d=Sr(d,[["enter",t[n][1],e],["exit",t[n][1],e]])):m=0,ar(t,r-1,n-r+3,d),n=r+d.length-m-2;break}}for(n=-1;++n<t.length;)t[n][1].type==="attentionSequence"&&(t[n][1].type="data");return t}function v6(t,e){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,s=to(r);let a;return l;function l(f){return a=f,t.enter("attentionSequence"),u(f)}function u(f){if(f===a)return t.consume(f),u;const d=t.exit("attentionSequence"),m=to(f),p=!m||m===2&&s||n.includes(f),y=!s||s===2&&m||n.includes(r);return d._open=!!(a===42?p:p&&(s||!y)),d._close=!!(a===42?y:y&&(m||!p)),e(f)}}function C1(t,e){t.column+=e,t.offset+=e,t._bufferIndex+=e}const x6={name:"autolink",tokenize:w6};function w6(t,e,n){let r=0;return s;function s(g){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(g),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),a}function a(g){return In(g)?(t.consume(g),l):g===64?n(g):d(g)}function l(g){return g===43||g===45||g===46||En(g)?(r=1,u(g)):d(g)}function u(g){return g===58?(t.consume(g),r=0,f):(g===43||g===45||g===46||En(g))&&r++<32?(t.consume(g),u):(r=0,d(g))}function f(g){return g===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(g),t.exit("autolinkMarker"),t.exit("autolink"),e):g===null||g===32||g===60||Pf(g)?n(g):(t.consume(g),f)}function d(g){return g===64?(t.consume(g),m):f6(g)?(t.consume(g),d):n(g)}function m(g){return En(g)?p(g):n(g)}function p(g){return g===46?(t.consume(g),r=0,m):g===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(g),t.exit("autolinkMarker"),t.exit("autolink"),e):y(g)}function y(g){if((g===45||En(g))&&r++<63){const v=g===45?y:p;return t.consume(g),v}return n(g)}}const cc={partial:!0,tokenize:S6};function S6(t,e,n){return r;function r(a){return Je(a)?st(t,s,"linePrefix")(a):s(a)}function s(a){return a===null||Oe(a)?e(a):n(a)}}const VE={continuation:{tokenize:E6},exit:C6,name:"blockQuote",tokenize:k6};function k6(t,e,n){const r=this;return s;function s(l){if(l===62){const u=r.containerState;return u.open||(t.enter("blockQuote",{_container:!0}),u.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(l),t.exit("blockQuoteMarker"),a}return n(l)}function a(l){return Je(l)?(t.enter("blockQuotePrefixWhitespace"),t.consume(l),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),e):(t.exit("blockQuotePrefix"),e(l))}}function E6(t,e,n){const r=this;return s;function s(l){return Je(l)?st(t,a,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l):a(l)}function a(l){return t.attempt(VE,e,n)(l)}}function C6(t){t.exit("blockQuote")}const HE={name:"characterEscape",tokenize:T6};function T6(t,e,n){return r;function r(a){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(a),t.exit("escapeMarker"),s}function s(a){return h6(a)?(t.enter("characterEscapeValue"),t.consume(a),t.exit("characterEscapeValue"),t.exit("characterEscape"),e):n(a)}}const GE={name:"characterReference",tokenize:A6};function A6(t,e,n){const r=this;let s=0,a,l;return u;function u(p){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(p),t.exit("characterReferenceMarker"),f}function f(p){return p===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(p),t.exit("characterReferenceMarkerNumeric"),d):(t.enter("characterReferenceValue"),a=31,l=En,m(p))}function d(p){return p===88||p===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(p),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),a=6,l=d6,m):(t.enter("characterReferenceValue"),a=7,l=Lg,m(p))}function m(p){if(p===59&&s){const y=t.exit("characterReferenceValue");return l===En&&!Jy(r.sliceSerialize(y))?n(p):(t.enter("characterReferenceMarker"),t.consume(p),t.exit("characterReferenceMarker"),t.exit("characterReference"),e)}return l(p)&&s++<a?(t.consume(p),m):n(p)}}const T1={partial:!0,tokenize:O6},A1={concrete:!0,name:"codeFenced",tokenize:R6};function R6(t,e,n){const r=this,s={partial:!0,tokenize:I};let a=0,l=0,u;return f;function f(O){return d(O)}function d(O){const B=r.events[r.events.length-1];return a=B&&B[1].type==="linePrefix"?B[2].sliceSerialize(B[1],!0).length:0,u=O,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),m(O)}function m(O){return O===u?(l++,t.consume(O),m):l<3?n(O):(t.exit("codeFencedFenceSequence"),Je(O)?st(t,p,"whitespace")(O):p(O))}function p(O){return O===null||Oe(O)?(t.exit("codeFencedFence"),r.interrupt?e(O):t.check(T1,x,M)(O)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),y(O))}function y(O){return O===null||Oe(O)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),p(O)):Je(O)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),st(t,g,"whitespace")(O)):O===96&&O===u?n(O):(t.consume(O),y)}function g(O){return O===null||Oe(O)?p(O):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),v(O))}function v(O){return O===null||Oe(O)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),p(O)):O===96&&O===u?n(O):(t.consume(O),v)}function x(O){return t.attempt(s,M,C)(O)}function C(O){return t.enter("lineEnding"),t.consume(O),t.exit("lineEnding"),k}function k(O){return a>0&&Je(O)?st(t,T,"linePrefix",a+1)(O):T(O)}function T(O){return O===null||Oe(O)?t.check(T1,x,M)(O):(t.enter("codeFlowValue"),A(O))}function A(O){return O===null||Oe(O)?(t.exit("codeFlowValue"),T(O)):(t.consume(O),A)}function M(O){return t.exit("codeFenced"),e(O)}function I(O,B,U){let K=0;return j;function j(q){return O.enter("lineEnding"),O.consume(q),O.exit("lineEnding"),J}function J(q){return O.enter("codeFencedFence"),Je(q)?st(O,ne,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(q):ne(q)}function ne(q){return q===u?(O.enter("codeFencedFenceSequence"),he(q)):U(q)}function he(q){return q===u?(K++,O.consume(q),he):K>=l?(O.exit("codeFencedFenceSequence"),Je(q)?st(O,Y,"whitespace")(q):Y(q)):U(q)}function Y(q){return q===null||Oe(q)?(O.exit("codeFencedFence"),B(q)):U(q)}}}function O6(t,e,n){const r=this;return s;function s(l){return l===null?n(l):(t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),a)}function a(l){return r.parser.lazy[r.now().line]?n(l):e(l)}}const vm={name:"codeIndented",tokenize:I6},N6={partial:!0,tokenize:M6};function I6(t,e,n){const r=this;return s;function s(d){return t.enter("codeIndented"),st(t,a,"linePrefix",5)(d)}function a(d){const m=r.events[r.events.length-1];return m&&m[1].type==="linePrefix"&&m[2].sliceSerialize(m[1],!0).length>=4?l(d):n(d)}function l(d){return d===null?f(d):Oe(d)?t.attempt(N6,l,f)(d):(t.enter("codeFlowValue"),u(d))}function u(d){return d===null||Oe(d)?(t.exit("codeFlowValue"),l(d)):(t.consume(d),u)}function f(d){return t.exit("codeIndented"),e(d)}}function M6(t,e,n){const r=this;return s;function s(l){return r.parser.lazy[r.now().line]?n(l):Oe(l)?(t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),s):st(t,a,"linePrefix",5)(l)}function a(l){const u=r.events[r.events.length-1];return u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?e(l):Oe(l)?s(l):n(l)}}const D6={name:"codeText",previous:L6,resolve:j6,tokenize:z6};function j6(t){let e=t.length-4,n=3,r,s;if((t[n][1].type==="lineEnding"||t[n][1].type==="space")&&(t[e][1].type==="lineEnding"||t[e][1].type==="space")){for(r=n;++r<e;)if(t[r][1].type==="codeTextData"){t[n][1].type="codeTextPadding",t[e][1].type="codeTextPadding",n+=2,e-=2;break}}for(r=n-1,e++;++r<=e;)s===void 0?r!==e&&t[r][1].type!=="lineEnding"&&(s=r):(r===e||t[r][1].type==="lineEnding")&&(t[s][1].type="codeTextData",r!==s+2&&(t[s][1].end=t[r-1][1].end,t.splice(s+2,r-s-2),e-=r-s-2,r=s+2),s=void 0);return t}function L6(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function z6(t,e,n){let r=0,s,a;return l;function l(p){return t.enter("codeText"),t.enter("codeTextSequence"),u(p)}function u(p){return p===96?(t.consume(p),r++,u):(t.exit("codeTextSequence"),f(p))}function f(p){return p===null?n(p):p===32?(t.enter("space"),t.consume(p),t.exit("space"),f):p===96?(a=t.enter("codeTextSequence"),s=0,m(p)):Oe(p)?(t.enter("lineEnding"),t.consume(p),t.exit("lineEnding"),f):(t.enter("codeTextData"),d(p))}function d(p){return p===null||p===32||p===96||Oe(p)?(t.exit("codeTextData"),f(p)):(t.consume(p),d)}function m(p){return p===96?(t.consume(p),s++,m):s===r?(t.exit("codeTextSequence"),t.exit("codeText"),e(p)):(a.type="codeTextData",d(p))}}class P6{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(e,r):e>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(e,n,r){const s=n||0;this.setCursor(Math.trunc(e));const a=this.right.splice(this.right.length-s,Number.POSITIVE_INFINITY);return r&&cl(this.left,r),a.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),cl(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),cl(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const n=this.left.splice(e,Number.POSITIVE_INFINITY);cl(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);cl(this.left,n.reverse())}}}function cl(t,e){let n=0;if(e.length<1e4)t.push(...e);else for(;n<e.length;)t.push(...e.slice(n,n+1e4)),n+=1e4}function KE(t){const e={};let n=-1,r,s,a,l,u,f,d;const m=new P6(t);for(;++n<m.length;){for(;n in e;)n=e[n];if(r=m.get(n),n&&r[1].type==="chunkFlow"&&m.get(n-1)[1].type==="listItemPrefix"&&(f=r[1]._tokenizer.events,a=0,a<f.length&&f[a][1].type==="lineEndingBlank"&&(a+=2),a<f.length&&f[a][1].type==="content"))for(;++a<f.length&&f[a][1].type!=="content";)f[a][1].type==="chunkText"&&(f[a][1]._isInFirstContentOfListItem=!0,a++);if(r[0]==="enter")r[1].contentType&&(Object.assign(e,B6(m,n)),n=e[n],d=!0);else if(r[1]._container){for(a=n,s=void 0;a--;)if(l=m.get(a),l[1].type==="lineEnding"||l[1].type==="lineEndingBlank")l[0]==="enter"&&(s&&(m.get(s)[1].type="lineEndingBlank"),l[1].type="lineEnding",s=a);else if(!(l[1].type==="linePrefix"||l[1].type==="listItemIndent"))break;s&&(r[1].end={...m.get(s)[1].start},u=m.slice(s,n),u.unshift(r),m.splice(s,n-s+1,u))}}return ar(t,0,Number.POSITIVE_INFINITY,m.slice(0)),!d}function B6(t,e){const n=t.get(e)[1],r=t.get(e)[2];let s=e-1;const a=[];let l=n._tokenizer;l||(l=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(l._contentTypeTextTrailing=!0));const u=l.events,f=[],d={};let m,p,y=-1,g=n,v=0,x=0;const C=[x];for(;g;){for(;t.get(++s)[1]!==g;);a.push(s),g._tokenizer||(m=r.sliceStream(g),g.next||m.push(null),p&&l.defineSkip(g.start),g._isInFirstContentOfListItem&&(l._gfmTasklistFirstContentOfListItem=!0),l.write(m),g._isInFirstContentOfListItem&&(l._gfmTasklistFirstContentOfListItem=void 0)),p=g,g=g.next}for(g=n;++y<u.length;)u[y][0]==="exit"&&u[y-1][0]==="enter"&&u[y][1].type===u[y-1][1].type&&u[y][1].start.line!==u[y][1].end.line&&(x=y+1,C.push(x),g._tokenizer=void 0,g.previous=void 0,g=g.next);for(l.events=[],g?(g._tokenizer=void 0,g.previous=void 0):C.pop(),y=C.length;y--;){const k=u.slice(C[y],C[y+1]),T=a.pop();f.push([T,T+k.length-1]),t.splice(T,2,k)}for(f.reverse(),y=-1;++y<f.length;)d[v+f[y][0]]=v+f[y][1],v+=f[y][1]-f[y][0]-1;return d}const $6={resolve:q6,tokenize:F6},U6={partial:!0,tokenize:V6};function q6(t){return KE(t),t}function F6(t,e){let n;return r;function r(u){return t.enter("content"),n=t.enter("chunkContent",{contentType:"content"}),s(u)}function s(u){return u===null?a(u):Oe(u)?t.check(U6,l,a)(u):(t.consume(u),s)}function a(u){return t.exit("chunkContent"),t.exit("content"),e(u)}function l(u){return t.consume(u),t.exit("chunkContent"),n.next=t.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,s}}function V6(t,e,n){const r=this;return s;function s(l){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),st(t,a,"linePrefix")}function a(l){if(l===null||Oe(l))return n(l);const u=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?e(l):t.interrupt(r.parser.constructs.flow,n,e)(l)}}function ZE(t,e,n,r,s,a,l,u,f){const d=f||Number.POSITIVE_INFINITY;let m=0;return p;function p(k){return k===60?(t.enter(r),t.enter(s),t.enter(a),t.consume(k),t.exit(a),y):k===null||k===32||k===41||Pf(k)?n(k):(t.enter(r),t.enter(l),t.enter(u),t.enter("chunkString",{contentType:"string"}),x(k))}function y(k){return k===62?(t.enter(a),t.consume(k),t.exit(a),t.exit(s),t.exit(r),e):(t.enter(u),t.enter("chunkString",{contentType:"string"}),g(k))}function g(k){return k===62?(t.exit("chunkString"),t.exit(u),y(k)):k===null||k===60||Oe(k)?n(k):(t.consume(k),k===92?v:g)}function v(k){return k===60||k===62||k===92?(t.consume(k),g):g(k)}function x(k){return!m&&(k===null||k===41||yt(k))?(t.exit("chunkString"),t.exit(u),t.exit(l),t.exit(r),e(k)):m<d&&k===40?(t.consume(k),m++,x):k===41?(t.consume(k),m--,x):k===null||k===32||k===40||Pf(k)?n(k):(t.consume(k),k===92?C:x)}function C(k){return k===40||k===41||k===92?(t.consume(k),x):x(k)}}function QE(t,e,n,r,s,a){const l=this;let u=0,f;return d;function d(g){return t.enter(r),t.enter(s),t.consume(g),t.exit(s),t.enter(a),m}function m(g){return u>999||g===null||g===91||g===93&&!f||g===94&&!u&&"_hiddenFootnoteSupport"in l.parser.constructs?n(g):g===93?(t.exit(a),t.enter(s),t.consume(g),t.exit(s),t.exit(r),e):Oe(g)?(t.enter("lineEnding"),t.consume(g),t.exit("lineEnding"),m):(t.enter("chunkString",{contentType:"string"}),p(g))}function p(g){return g===null||g===91||g===93||Oe(g)||u++>999?(t.exit("chunkString"),m(g)):(t.consume(g),f||(f=!Je(g)),g===92?y:p)}function y(g){return g===91||g===92||g===93?(t.consume(g),u++,p):p(g)}}function JE(t,e,n,r,s,a){let l;return u;function u(y){return y===34||y===39||y===40?(t.enter(r),t.enter(s),t.consume(y),t.exit(s),l=y===40?41:y,f):n(y)}function f(y){return y===l?(t.enter(s),t.consume(y),t.exit(s),t.exit(r),e):(t.enter(a),d(y))}function d(y){return y===l?(t.exit(a),f(l)):y===null?n(y):Oe(y)?(t.enter("lineEnding"),t.consume(y),t.exit("lineEnding"),st(t,d,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),m(y))}function m(y){return y===l||y===null||Oe(y)?(t.exit("chunkString"),d(y)):(t.consume(y),y===92?p:m)}function p(y){return y===l||y===92?(t.consume(y),m):m(y)}}function Ml(t,e){let n;return r;function r(s){return Oe(s)?(t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),n=!0,r):Je(s)?st(t,r,n?"linePrefix":"lineSuffix")(s):e(s)}}const H6={name:"definition",tokenize:K6},G6={partial:!0,tokenize:Z6};function K6(t,e,n){const r=this;let s;return a;function a(g){return t.enter("definition"),l(g)}function l(g){return QE.call(r,t,u,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(g)}function u(g){return s=Mr(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),g===58?(t.enter("definitionMarker"),t.consume(g),t.exit("definitionMarker"),f):n(g)}function f(g){return yt(g)?Ml(t,d)(g):d(g)}function d(g){return ZE(t,m,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(g)}function m(g){return t.attempt(G6,p,p)(g)}function p(g){return Je(g)?st(t,y,"whitespace")(g):y(g)}function y(g){return g===null||Oe(g)?(t.exit("definition"),r.parser.defined.push(s),e(g)):n(g)}}function Z6(t,e,n){return r;function r(u){return yt(u)?Ml(t,s)(u):n(u)}function s(u){return JE(t,a,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(u)}function a(u){return Je(u)?st(t,l,"whitespace")(u):l(u)}function l(u){return u===null||Oe(u)?e(u):n(u)}}const Q6={name:"hardBreakEscape",tokenize:J6};function J6(t,e,n){return r;function r(a){return t.enter("hardBreakEscape"),t.consume(a),s}function s(a){return Oe(a)?(t.exit("hardBreakEscape"),e(a)):n(a)}}const Y6={name:"headingAtx",resolve:X6,tokenize:W6};function X6(t,e){let n=t.length-2,r=3,s,a;return t[r][1].type==="whitespace"&&(r+=2),n-2>r&&t[n][1].type==="whitespace"&&(n-=2),t[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&t[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(s={type:"atxHeadingText",start:t[r][1].start,end:t[n][1].end},a={type:"chunkText",start:t[r][1].start,end:t[n][1].end,contentType:"text"},ar(t,r,n-r+1,[["enter",s,e],["enter",a,e],["exit",a,e],["exit",s,e]])),t}function W6(t,e,n){let r=0;return s;function s(m){return t.enter("atxHeading"),a(m)}function a(m){return t.enter("atxHeadingSequence"),l(m)}function l(m){return m===35&&r++<6?(t.consume(m),l):m===null||yt(m)?(t.exit("atxHeadingSequence"),u(m)):n(m)}function u(m){return m===35?(t.enter("atxHeadingSequence"),f(m)):m===null||Oe(m)?(t.exit("atxHeading"),e(m)):Je(m)?st(t,u,"whitespace")(m):(t.enter("atxHeadingText"),d(m))}function f(m){return m===35?(t.consume(m),f):(t.exit("atxHeadingSequence"),u(m))}function d(m){return m===null||m===35||yt(m)?(t.exit("atxHeadingText"),u(m)):(t.consume(m),d)}}const e8=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],R1=["pre","script","style","textarea"],t8={concrete:!0,name:"htmlFlow",resolveTo:s8,tokenize:i8},n8={partial:!0,tokenize:o8},r8={partial:!0,tokenize:a8};function s8(t){let e=t.length;for(;e--&&!(t[e][0]==="enter"&&t[e][1].type==="htmlFlow"););return e>1&&t[e-2][1].type==="linePrefix"&&(t[e][1].start=t[e-2][1].start,t[e+1][1].start=t[e-2][1].start,t.splice(e-2,2)),t}function i8(t,e,n){const r=this;let s,a,l,u,f;return d;function d(S){return m(S)}function m(S){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(S),p}function p(S){return S===33?(t.consume(S),y):S===47?(t.consume(S),a=!0,x):S===63?(t.consume(S),s=3,r.interrupt?e:N):In(S)?(t.consume(S),l=String.fromCharCode(S),C):n(S)}function y(S){return S===45?(t.consume(S),s=2,g):S===91?(t.consume(S),s=5,u=0,v):In(S)?(t.consume(S),s=4,r.interrupt?e:N):n(S)}function g(S){return S===45?(t.consume(S),r.interrupt?e:N):n(S)}function v(S){const z="CDATA[";return S===z.charCodeAt(u++)?(t.consume(S),u===z.length?r.interrupt?e:ne:v):n(S)}function x(S){return In(S)?(t.consume(S),l=String.fromCharCode(S),C):n(S)}function C(S){if(S===null||S===47||S===62||yt(S)){const z=S===47,le=l.toLowerCase();return!z&&!a&&R1.includes(le)?(s=1,r.interrupt?e(S):ne(S)):e8.includes(l.toLowerCase())?(s=6,z?(t.consume(S),k):r.interrupt?e(S):ne(S)):(s=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(S):a?T(S):A(S))}return S===45||En(S)?(t.consume(S),l+=String.fromCharCode(S),C):n(S)}function k(S){return S===62?(t.consume(S),r.interrupt?e:ne):n(S)}function T(S){return Je(S)?(t.consume(S),T):j(S)}function A(S){return S===47?(t.consume(S),j):S===58||S===95||In(S)?(t.consume(S),M):Je(S)?(t.consume(S),A):j(S)}function M(S){return S===45||S===46||S===58||S===95||En(S)?(t.consume(S),M):I(S)}function I(S){return S===61?(t.consume(S),O):Je(S)?(t.consume(S),I):A(S)}function O(S){return S===null||S===60||S===61||S===62||S===96?n(S):S===34||S===39?(t.consume(S),f=S,B):Je(S)?(t.consume(S),O):U(S)}function B(S){return S===f?(t.consume(S),f=null,K):S===null||Oe(S)?n(S):(t.consume(S),B)}function U(S){return S===null||S===34||S===39||S===47||S===60||S===61||S===62||S===96||yt(S)?I(S):(t.consume(S),U)}function K(S){return S===47||S===62||Je(S)?A(S):n(S)}function j(S){return S===62?(t.consume(S),J):n(S)}function J(S){return S===null||Oe(S)?ne(S):Je(S)?(t.consume(S),J):n(S)}function ne(S){return S===45&&s===2?(t.consume(S),P):S===60&&s===1?(t.consume(S),H):S===62&&s===4?(t.consume(S),D):S===63&&s===3?(t.consume(S),N):S===93&&s===5?(t.consume(S),re):Oe(S)&&(s===6||s===7)?(t.exit("htmlFlowData"),t.check(n8,V,he)(S)):S===null||Oe(S)?(t.exit("htmlFlowData"),he(S)):(t.consume(S),ne)}function he(S){return t.check(r8,Y,V)(S)}function Y(S){return t.enter("lineEnding"),t.consume(S),t.exit("lineEnding"),q}function q(S){return S===null||Oe(S)?he(S):(t.enter("htmlFlowData"),ne(S))}function P(S){return S===45?(t.consume(S),N):ne(S)}function H(S){return S===47?(t.consume(S),l="",ie):ne(S)}function ie(S){if(S===62){const z=l.toLowerCase();return R1.includes(z)?(t.consume(S),D):ne(S)}return In(S)&&l.length<8?(t.consume(S),l+=String.fromCharCode(S),ie):ne(S)}function re(S){return S===93?(t.consume(S),N):ne(S)}function N(S){return S===62?(t.consume(S),D):S===45&&s===2?(t.consume(S),N):ne(S)}function D(S){return S===null||Oe(S)?(t.exit("htmlFlowData"),V(S)):(t.consume(S),D)}function V(S){return t.exit("htmlFlow"),e(S)}}function a8(t,e,n){const r=this;return s;function s(l){return Oe(l)?(t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),a):n(l)}function a(l){return r.parser.lazy[r.now().line]?n(l):e(l)}}function o8(t,e,n){return r;function r(s){return t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),t.attempt(cc,e,n)}}const l8={name:"htmlText",tokenize:c8};function c8(t,e,n){const r=this;let s,a,l;return u;function u(N){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(N),f}function f(N){return N===33?(t.consume(N),d):N===47?(t.consume(N),I):N===63?(t.consume(N),A):In(N)?(t.consume(N),U):n(N)}function d(N){return N===45?(t.consume(N),m):N===91?(t.consume(N),a=0,v):In(N)?(t.consume(N),T):n(N)}function m(N){return N===45?(t.consume(N),g):n(N)}function p(N){return N===null?n(N):N===45?(t.consume(N),y):Oe(N)?(l=p,H(N)):(t.consume(N),p)}function y(N){return N===45?(t.consume(N),g):p(N)}function g(N){return N===62?P(N):N===45?y(N):p(N)}function v(N){const D="CDATA[";return N===D.charCodeAt(a++)?(t.consume(N),a===D.length?x:v):n(N)}function x(N){return N===null?n(N):N===93?(t.consume(N),C):Oe(N)?(l=x,H(N)):(t.consume(N),x)}function C(N){return N===93?(t.consume(N),k):x(N)}function k(N){return N===62?P(N):N===93?(t.consume(N),k):x(N)}function T(N){return N===null||N===62?P(N):Oe(N)?(l=T,H(N)):(t.consume(N),T)}function A(N){return N===null?n(N):N===63?(t.consume(N),M):Oe(N)?(l=A,H(N)):(t.consume(N),A)}function M(N){return N===62?P(N):A(N)}function I(N){return In(N)?(t.consume(N),O):n(N)}function O(N){return N===45||En(N)?(t.consume(N),O):B(N)}function B(N){return Oe(N)?(l=B,H(N)):Je(N)?(t.consume(N),B):P(N)}function U(N){return N===45||En(N)?(t.consume(N),U):N===47||N===62||yt(N)?K(N):n(N)}function K(N){return N===47?(t.consume(N),P):N===58||N===95||In(N)?(t.consume(N),j):Oe(N)?(l=K,H(N)):Je(N)?(t.consume(N),K):P(N)}function j(N){return N===45||N===46||N===58||N===95||En(N)?(t.consume(N),j):J(N)}function J(N){return N===61?(t.consume(N),ne):Oe(N)?(l=J,H(N)):Je(N)?(t.consume(N),J):K(N)}function ne(N){return N===null||N===60||N===61||N===62||N===96?n(N):N===34||N===39?(t.consume(N),s=N,he):Oe(N)?(l=ne,H(N)):Je(N)?(t.consume(N),ne):(t.consume(N),Y)}function he(N){return N===s?(t.consume(N),s=void 0,q):N===null?n(N):Oe(N)?(l=he,H(N)):(t.consume(N),he)}function Y(N){return N===null||N===34||N===39||N===60||N===61||N===96?n(N):N===47||N===62||yt(N)?K(N):(t.consume(N),Y)}function q(N){return N===47||N===62||yt(N)?K(N):n(N)}function P(N){return N===62?(t.consume(N),t.exit("htmlTextData"),t.exit("htmlText"),e):n(N)}function H(N){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(N),t.exit("lineEnding"),ie}function ie(N){return Je(N)?st(t,re,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(N):re(N)}function re(N){return t.enter("htmlTextData"),l(N)}}const Yy={name:"labelEnd",resolveAll:h8,resolveTo:p8,tokenize:m8},u8={tokenize:g8},f8={tokenize:y8},d8={tokenize:b8};function h8(t){let e=-1;const n=[];for(;++e<t.length;){const r=t[e][1];if(n.push(t[e]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const s=r.type==="labelImage"?4:2;r.type="data",e+=s}}return t.length!==n.length&&ar(t,0,t.length,n),t}function p8(t,e){let n=t.length,r=0,s,a,l,u;for(;n--;)if(s=t[n][1],a){if(s.type==="link"||s.type==="labelLink"&&s._inactive)break;t[n][0]==="enter"&&s.type==="labelLink"&&(s._inactive=!0)}else if(l){if(t[n][0]==="enter"&&(s.type==="labelImage"||s.type==="labelLink")&&!s._balanced&&(a=n,s.type!=="labelLink")){r=2;break}}else s.type==="labelEnd"&&(l=n);const f={type:t[a][1].type==="labelLink"?"link":"image",start:{...t[a][1].start},end:{...t[t.length-1][1].end}},d={type:"label",start:{...t[a][1].start},end:{...t[l][1].end}},m={type:"labelText",start:{...t[a+r+2][1].end},end:{...t[l-2][1].start}};return u=[["enter",f,e],["enter",d,e]],u=Sr(u,t.slice(a+1,a+r+3)),u=Sr(u,[["enter",m,e]]),u=Sr(u,md(e.parser.constructs.insideSpan.null,t.slice(a+r+4,l-3),e)),u=Sr(u,[["exit",m,e],t[l-2],t[l-1],["exit",d,e]]),u=Sr(u,t.slice(l+1)),u=Sr(u,[["exit",f,e]]),ar(t,a,t.length,u),t}function m8(t,e,n){const r=this;let s=r.events.length,a,l;for(;s--;)if((r.events[s][1].type==="labelImage"||r.events[s][1].type==="labelLink")&&!r.events[s][1]._balanced){a=r.events[s][1];break}return u;function u(y){return a?a._inactive?p(y):(l=r.parser.defined.includes(Mr(r.sliceSerialize({start:a.end,end:r.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(y),t.exit("labelMarker"),t.exit("labelEnd"),f):n(y)}function f(y){return y===40?t.attempt(u8,m,l?m:p)(y):y===91?t.attempt(f8,m,l?d:p)(y):l?m(y):p(y)}function d(y){return t.attempt(d8,m,p)(y)}function m(y){return e(y)}function p(y){return a._balanced=!0,n(y)}}function g8(t,e,n){return r;function r(p){return t.enter("resource"),t.enter("resourceMarker"),t.consume(p),t.exit("resourceMarker"),s}function s(p){return yt(p)?Ml(t,a)(p):a(p)}function a(p){return p===41?m(p):ZE(t,l,u,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(p)}function l(p){return yt(p)?Ml(t,f)(p):m(p)}function u(p){return n(p)}function f(p){return p===34||p===39||p===40?JE(t,d,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(p):m(p)}function d(p){return yt(p)?Ml(t,m)(p):m(p)}function m(p){return p===41?(t.enter("resourceMarker"),t.consume(p),t.exit("resourceMarker"),t.exit("resource"),e):n(p)}}function y8(t,e,n){const r=this;return s;function s(u){return QE.call(r,t,a,l,"reference","referenceMarker","referenceString")(u)}function a(u){return r.parser.defined.includes(Mr(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?e(u):n(u)}function l(u){return n(u)}}function b8(t,e,n){return r;function r(a){return t.enter("reference"),t.enter("referenceMarker"),t.consume(a),t.exit("referenceMarker"),s}function s(a){return a===93?(t.enter("referenceMarker"),t.consume(a),t.exit("referenceMarker"),t.exit("reference"),e):n(a)}}const _8={name:"labelStartImage",resolveAll:Yy.resolveAll,tokenize:v8};function v8(t,e,n){const r=this;return s;function s(u){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(u),t.exit("labelImageMarker"),a}function a(u){return u===91?(t.enter("labelMarker"),t.consume(u),t.exit("labelMarker"),t.exit("labelImage"),l):n(u)}function l(u){return u===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(u):e(u)}}const x8={name:"labelStartLink",resolveAll:Yy.resolveAll,tokenize:w8};function w8(t,e,n){const r=this;return s;function s(l){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(l),t.exit("labelMarker"),t.exit("labelLink"),a}function a(l){return l===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(l):e(l)}}const xm={name:"lineEnding",tokenize:S8};function S8(t,e){return n;function n(r){return t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),st(t,e,"linePrefix")}}const tf={name:"thematicBreak",tokenize:k8};function k8(t,e,n){let r=0,s;return a;function a(d){return t.enter("thematicBreak"),l(d)}function l(d){return s=d,u(d)}function u(d){return d===s?(t.enter("thematicBreakSequence"),f(d)):r>=3&&(d===null||Oe(d))?(t.exit("thematicBreak"),e(d)):n(d)}function f(d){return d===s?(t.consume(d),r++,f):(t.exit("thematicBreakSequence"),Je(d)?st(t,u,"whitespace")(d):u(d))}}const Un={continuation:{tokenize:A8},exit:O8,name:"list",tokenize:T8},E8={partial:!0,tokenize:N8},C8={partial:!0,tokenize:R8};function T8(t,e,n){const r=this,s=r.events[r.events.length-1];let a=s&&s[1].type==="linePrefix"?s[2].sliceSerialize(s[1],!0).length:0,l=0;return u;function u(g){const v=r.containerState.type||(g===42||g===43||g===45?"listUnordered":"listOrdered");if(v==="listUnordered"?!r.containerState.marker||g===r.containerState.marker:Lg(g)){if(r.containerState.type||(r.containerState.type=v,t.enter(v,{_container:!0})),v==="listUnordered")return t.enter("listItemPrefix"),g===42||g===45?t.check(tf,n,d)(g):d(g);if(!r.interrupt||g===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),f(g)}return n(g)}function f(g){return Lg(g)&&++l<10?(t.consume(g),f):(!r.interrupt||l<2)&&(r.containerState.marker?g===r.containerState.marker:g===41||g===46)?(t.exit("listItemValue"),d(g)):n(g)}function d(g){return t.enter("listItemMarker"),t.consume(g),t.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||g,t.check(cc,r.interrupt?n:m,t.attempt(E8,y,p))}function m(g){return r.containerState.initialBlankLine=!0,a++,y(g)}function p(g){return Je(g)?(t.enter("listItemPrefixWhitespace"),t.consume(g),t.exit("listItemPrefixWhitespace"),y):n(g)}function y(g){return r.containerState.size=a+r.sliceSerialize(t.exit("listItemPrefix"),!0).length,e(g)}}function A8(t,e,n){const r=this;return r.containerState._closeFlow=void 0,t.check(cc,s,a);function s(u){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,st(t,e,"listItemIndent",r.containerState.size+1)(u)}function a(u){return r.containerState.furtherBlankLines||!Je(u)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,l(u)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,t.attempt(C8,e,l)(u))}function l(u){return r.containerState._closeFlow=!0,r.interrupt=void 0,st(t,t.attempt(Un,e,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(u)}}function R8(t,e,n){const r=this;return st(t,s,"listItemIndent",r.containerState.size+1);function s(a){const l=r.events[r.events.length-1];return l&&l[1].type==="listItemIndent"&&l[2].sliceSerialize(l[1],!0).length===r.containerState.size?e(a):n(a)}}function O8(t){t.exit(this.containerState.type)}function N8(t,e,n){const r=this;return st(t,s,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function s(a){const l=r.events[r.events.length-1];return!Je(a)&&l&&l[1].type==="listItemPrefixWhitespace"?e(a):n(a)}}const O1={name:"setextUnderline",resolveTo:I8,tokenize:M8};function I8(t,e){let n=t.length,r,s,a;for(;n--;)if(t[n][0]==="enter"){if(t[n][1].type==="content"){r=n;break}t[n][1].type==="paragraph"&&(s=n)}else t[n][1].type==="content"&&t.splice(n,1),!a&&t[n][1].type==="definition"&&(a=n);const l={type:"setextHeading",start:{...t[r][1].start},end:{...t[t.length-1][1].end}};return t[s][1].type="setextHeadingText",a?(t.splice(s,0,["enter",l,e]),t.splice(a+1,0,["exit",t[r][1],e]),t[r][1].end={...t[a][1].end}):t[r][1]=l,t.push(["exit",l,e]),t}function M8(t,e,n){const r=this;let s;return a;function a(d){let m=r.events.length,p;for(;m--;)if(r.events[m][1].type!=="lineEnding"&&r.events[m][1].type!=="linePrefix"&&r.events[m][1].type!=="content"){p=r.events[m][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||p)?(t.enter("setextHeadingLine"),s=d,l(d)):n(d)}function l(d){return t.enter("setextHeadingLineSequence"),u(d)}function u(d){return d===s?(t.consume(d),u):(t.exit("setextHeadingLineSequence"),Je(d)?st(t,f,"lineSuffix")(d):f(d))}function f(d){return d===null||Oe(d)?(t.exit("setextHeadingLine"),e(d)):n(d)}}const D8={tokenize:j8};function j8(t){const e=this,n=t.attempt(cc,r,t.attempt(this.parser.constructs.flowInitial,s,st(t,t.attempt(this.parser.constructs.flow,s,t.attempt($6,s)),"linePrefix")));return n;function r(a){if(a===null){t.consume(a);return}return t.enter("lineEndingBlank"),t.consume(a),t.exit("lineEndingBlank"),e.currentConstruct=void 0,n}function s(a){if(a===null){t.consume(a);return}return t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),e.currentConstruct=void 0,n}}const L8={resolveAll:XE()},z8=YE("string"),P8=YE("text");function YE(t){return{resolveAll:XE(t==="text"?B8:void 0),tokenize:e};function e(n){const r=this,s=this.parser.constructs[t],a=n.attempt(s,l,u);return l;function l(m){return d(m)?a(m):u(m)}function u(m){if(m===null){n.consume(m);return}return n.enter("data"),n.consume(m),f}function f(m){return d(m)?(n.exit("data"),a(m)):(n.consume(m),f)}function d(m){if(m===null)return!0;const p=s[m];let y=-1;if(p)for(;++y<p.length;){const g=p[y];if(!g.previous||g.previous.call(r,r.previous))return!0}return!1}}}function XE(t){return e;function e(n,r){let s=-1,a;for(;++s<=n.length;)a===void 0?n[s]&&n[s][1].type==="data"&&(a=s,s++):(!n[s]||n[s][1].type!=="data")&&(s!==a+2&&(n[a][1].end=n[s-1][1].end,n.splice(a+2,s-a-2),s=a+2),a=void 0);return t?t(n,r):n}}function B8(t,e){let n=0;for(;++n<=t.length;)if((n===t.length||t[n][1].type==="lineEnding")&&t[n-1][1].type==="data"){const r=t[n-1][1],s=e.sliceStream(r);let a=s.length,l=-1,u=0,f;for(;a--;){const d=s[a];if(typeof d=="string"){for(l=d.length;d.charCodeAt(l-1)===32;)u++,l--;if(l)break;l=-1}else if(d===-2)f=!0,u++;else if(d!==-1){a++;break}}if(e._contentTypeTextTrailing&&n===t.length&&(u=0),u){const d={type:n===t.length||f||u<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:a?l:r.start._bufferIndex+l,_index:r.start._index+a,line:r.end.line,column:r.end.column-u,offset:r.end.offset-u},end:{...r.end}};r.end={...d.start},r.start.offset===r.end.offset?Object.assign(r,d):(t.splice(n,0,["enter",d,e],["exit",d,e]),n+=2)}n++}return t}const $8={42:Un,43:Un,45:Un,48:Un,49:Un,50:Un,51:Un,52:Un,53:Un,54:Un,55:Un,56:Un,57:Un,62:VE},U8={91:H6},q8={[-2]:vm,[-1]:vm,32:vm},F8={35:Y6,42:tf,45:[O1,tf],60:t8,61:O1,95:tf,96:A1,126:A1},V8={38:GE,92:HE},H8={[-5]:xm,[-4]:xm,[-3]:xm,33:_8,38:GE,42:zg,60:[x6,l8],91:x8,92:[Q6,HE],93:Yy,95:zg,96:D6},G8={null:[zg,L8]},K8={null:[42,95]},Z8={null:[]},Q8=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:K8,contentInitial:U8,disable:Z8,document:$8,flow:F8,flowInitial:q8,insideSpan:G8,string:V8,text:H8},Symbol.toStringTag,{value:"Module"}));function J8(t,e,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const s={},a=[];let l=[],u=[];const f={attempt:B(I),check:B(O),consume:T,enter:A,exit:M,interrupt:B(O,{interrupt:!0})},d={code:null,containerState:{},defineSkip:x,events:[],now:v,parser:t,previous:null,sliceSerialize:y,sliceStream:g,write:p};let m=e.tokenize.call(d,f);return e.resolveAll&&a.push(e),d;function p(J){return l=Sr(l,J),C(),l[l.length-1]!==null?[]:(U(e,0),d.events=md(a,d.events,d),d.events)}function y(J,ne){return X8(g(J),ne)}function g(J){return Y8(l,J)}function v(){const{_bufferIndex:J,_index:ne,line:he,column:Y,offset:q}=r;return{_bufferIndex:J,_index:ne,line:he,column:Y,offset:q}}function x(J){s[J.line]=J.column,j()}function C(){let J;for(;r._index<l.length;){const ne=l[r._index];if(typeof ne=="string")for(J=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===J&&r._bufferIndex<ne.length;)k(ne.charCodeAt(r._bufferIndex));else k(ne)}}function k(J){m=m(J)}function T(J){Oe(J)?(r.line++,r.column=1,r.offset+=J===-3?2:1,j()):J!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===l[r._index].length&&(r._bufferIndex=-1,r._index++)),d.previous=J}function A(J,ne){const he=ne||{};return he.type=J,he.start=v(),d.events.push(["enter",he,d]),u.push(he),he}function M(J){const ne=u.pop();return ne.end=v(),d.events.push(["exit",ne,d]),ne}function I(J,ne){U(J,ne.from)}function O(J,ne){ne.restore()}function B(J,ne){return he;function he(Y,q,P){let H,ie,re,N;return Array.isArray(Y)?V(Y):"tokenize"in Y?V([Y]):D(Y);function D(de){return ye;function ye(_e){const ve=_e!==null&&de[_e],Pe=_e!==null&&de.null,tt=[...Array.isArray(ve)?ve:ve?[ve]:[],...Array.isArray(Pe)?Pe:Pe?[Pe]:[]];return V(tt)(_e)}}function V(de){return H=de,ie=0,de.length===0?P:S(de[ie])}function S(de){return ye;function ye(_e){return N=K(),re=de,de.partial||(d.currentConstruct=de),de.name&&d.parser.constructs.disable.null.includes(de.name)?le():de.tokenize.call(ne?Object.assign(Object.create(d),ne):d,f,z,le)(_e)}}function z(de){return J(re,N),q}function le(de){return N.restore(),++ie<H.length?S(H[ie]):P}}}function U(J,ne){J.resolveAll&&!a.includes(J)&&a.push(J),J.resolve&&ar(d.events,ne,d.events.length-ne,J.resolve(d.events.slice(ne),d)),J.resolveTo&&(d.events=J.resolveTo(d.events,d))}function K(){const J=v(),ne=d.previous,he=d.currentConstruct,Y=d.events.length,q=Array.from(u);return{from:Y,restore:P};function P(){r=J,d.previous=ne,d.currentConstruct=he,d.events.length=Y,u=q,j()}}function j(){r.line in s&&r.column<2&&(r.column=s[r.line],r.offset+=s[r.line]-1)}}function Y8(t,e){const n=e.start._index,r=e.start._bufferIndex,s=e.end._index,a=e.end._bufferIndex;let l;if(n===s)l=[t[n].slice(r,a)];else{if(l=t.slice(n,s),r>-1){const u=l[0];typeof u=="string"?l[0]=u.slice(r):l.shift()}a>0&&l.push(t[s].slice(0,a))}return l}function X8(t,e){let n=-1;const r=[];let s;for(;++n<t.length;){const a=t[n];let l;if(typeof a=="string")l=a;else switch(a){case-5:{l="\r";break}case-4:{l=`
`;break}case-3:{l=`\r
`;break}case-2:{l=e?" ":"	";break}case-1:{if(!e&&s)continue;l=" ";break}default:l=String.fromCharCode(a)}s=a===-2,r.push(l)}return r.join("")}function W8(t){const r={constructs:qE([Q8,...(t||{}).extensions||[]]),content:s(p6),defined:[],document:s(g6),flow:s(D8),lazy:{},string:s(z8),text:s(P8)};return r;function s(a){return l;function l(u){return J8(r,a,u)}}}function eB(t){for(;!KE(t););return t}const N1=/[\0\t\n\r]/g;function tB(){let t=1,e="",n=!0,r;return s;function s(a,l,u){const f=[];let d,m,p,y,g;for(a=e+(typeof a=="string"?a.toString():new TextDecoder(l||void 0).decode(a)),p=0,e="",n&&(a.charCodeAt(0)===65279&&p++,n=void 0);p<a.length;){if(N1.lastIndex=p,d=N1.exec(a),y=d&&d.index!==void 0?d.index:a.length,g=a.charCodeAt(y),!d){e=a.slice(p);break}if(g===10&&p===y&&r)f.push(-3),r=void 0;else switch(r&&(f.push(-5),r=void 0),p<y&&(f.push(a.slice(p,y)),t+=y-p),g){case 0:{f.push(65533),t++;break}case 9:{for(m=Math.ceil(t/4)*4,f.push(-2);t++<m;)f.push(-1);break}case 10:{f.push(-4),t=1;break}default:r=!0,t=1}p=y+1}return u&&(r&&f.push(-5),e&&f.push(e),f.push(null)),f}}const nB=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function rB(t){return t.replace(nB,sB)}function sB(t,e,n){if(e)return e;if(n.charCodeAt(0)===35){const s=n.charCodeAt(1),a=s===120||s===88;return FE(n.slice(a?2:1),a?16:10)}return Jy(n)||t}const WE={}.hasOwnProperty;function iB(t,e,n){return typeof e!="string"&&(n=e,e=void 0),aB(n)(eB(W8(n).document().write(tB()(t,e,!0))))}function aB(t){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:a(_n),autolinkProtocol:K,autolinkEmail:K,atxHeading:a(yn),blockQuote:a(Pe),characterEscape:K,characterReference:K,codeFenced:a(tt),codeFencedFenceInfo:l,codeFencedFenceMeta:l,codeIndented:a(tt,l),codeText:a(kt,l),codeTextData:K,data:K,codeFlowValue:K,definition:a(Yt),definitionDestinationString:l,definitionLabelString:l,definitionTitleString:l,emphasis:a(Tt),hardBreakEscape:a(Xt),hardBreakTrailing:a(Xt),htmlFlow:a(Gn,l),htmlFlowData:K,htmlText:a(Gn,l),htmlTextData:K,image:a(bn),label:l,link:a(_n),listItem:a(Se),listItemValue:y,listOrdered:a(Kn,p),listUnordered:a(Kn),paragraph:a(Ve),reference:S,referenceString:l,resourceDestinationString:l,resourceTitleString:l,setextHeading:a(yn),strong:a(Ke),thematicBreak:a(_t)},exit:{atxHeading:f(),atxHeadingSequence:I,autolink:f(),autolinkEmail:ve,autolinkProtocol:_e,blockQuote:f(),characterEscapeValue:j,characterReferenceMarkerHexadecimal:le,characterReferenceMarkerNumeric:le,characterReferenceValue:de,characterReference:ye,codeFenced:f(C),codeFencedFence:x,codeFencedFenceInfo:g,codeFencedFenceMeta:v,codeFlowValue:j,codeIndented:f(k),codeText:f(q),codeTextData:j,data:j,definition:f(),definitionDestinationString:M,definitionLabelString:T,definitionTitleString:A,emphasis:f(),hardBreakEscape:f(ne),hardBreakTrailing:f(ne),htmlFlow:f(he),htmlFlowData:j,htmlText:f(Y),htmlTextData:j,image:f(H),label:re,labelText:ie,lineEnding:J,link:f(P),listItem:f(),listOrdered:f(),listUnordered:f(),paragraph:f(),referenceString:z,resourceDestinationString:N,resourceTitleString:D,resource:V,setextHeading:f(U),setextHeadingLineSequence:B,setextHeadingText:O,strong:f(),thematicBreak:f()}};eC(e,(t||{}).mdastExtensions||[]);const n={};return r;function r(Z){let ce={type:"root",children:[]};const pe={stack:[ce],tokenStack:[],config:e,enter:u,exit:d,buffer:l,resume:m,data:n},be=[];let ke=-1;for(;++ke<Z.length;)if(Z[ke][1].type==="listOrdered"||Z[ke][1].type==="listUnordered")if(Z[ke][0]==="enter")be.push(ke);else{const He=be.pop();ke=s(Z,He,ke)}for(ke=-1;++ke<Z.length;){const He=e[Z[ke][0]];WE.call(He,Z[ke][1].type)&&He[Z[ke][1].type].call(Object.assign({sliceSerialize:Z[ke][2].sliceSerialize},pe),Z[ke][1])}if(pe.tokenStack.length>0){const He=pe.tokenStack[pe.tokenStack.length-1];(He[1]||I1).call(pe,void 0,He[0])}for(ce.position={start:Js(Z.length>0?Z[0][1].start:{line:1,column:1,offset:0}),end:Js(Z.length>0?Z[Z.length-2][1].end:{line:1,column:1,offset:0})},ke=-1;++ke<e.transforms.length;)ce=e.transforms[ke](ce)||ce;return ce}function s(Z,ce,pe){let be=ce-1,ke=-1,He=!1,Et,rt,Ne,ze;for(;++be<=pe;){const Ie=Z[be];switch(Ie[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Ie[0]==="enter"?ke++:ke--,ze=void 0;break}case"lineEndingBlank":{Ie[0]==="enter"&&(Et&&!ze&&!ke&&!Ne&&(Ne=be),ze=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:ze=void 0}if(!ke&&Ie[0]==="enter"&&Ie[1].type==="listItemPrefix"||ke===-1&&Ie[0]==="exit"&&(Ie[1].type==="listUnordered"||Ie[1].type==="listOrdered")){if(Et){let lt=be;for(rt=void 0;lt--;){const Ge=Z[lt];if(Ge[1].type==="lineEnding"||Ge[1].type==="lineEndingBlank"){if(Ge[0]==="exit")continue;rt&&(Z[rt][1].type="lineEndingBlank",He=!0),Ge[1].type="lineEnding",rt=lt}else if(!(Ge[1].type==="linePrefix"||Ge[1].type==="blockQuotePrefix"||Ge[1].type==="blockQuotePrefixWhitespace"||Ge[1].type==="blockQuoteMarker"||Ge[1].type==="listItemIndent"))break}Ne&&(!rt||Ne<rt)&&(Et._spread=!0),Et.end=Object.assign({},rt?Z[rt][1].start:Ie[1].end),Z.splice(rt||be,0,["exit",Et,Ie[2]]),be++,pe++}if(Ie[1].type==="listItemPrefix"){const lt={type:"listItem",_spread:!1,start:Object.assign({},Ie[1].start),end:void 0};Et=lt,Z.splice(be,0,["enter",lt,Ie[2]]),be++,pe++,Ne=void 0,ze=!0}}}return Z[ce][1]._spread=He,pe}function a(Z,ce){return pe;function pe(be){u.call(this,Z(be),be),ce&&ce.call(this,be)}}function l(){this.stack.push({type:"fragment",children:[]})}function u(Z,ce,pe){this.stack[this.stack.length-1].children.push(Z),this.stack.push(Z),this.tokenStack.push([ce,pe||void 0]),Z.position={start:Js(ce.start),end:void 0}}function f(Z){return ce;function ce(pe){Z&&Z.call(this,pe),d.call(this,pe)}}function d(Z,ce){const pe=this.stack.pop(),be=this.tokenStack.pop();if(be)be[0].type!==Z.type&&(ce?ce.call(this,Z,be[0]):(be[1]||I1).call(this,Z,be[0]));else throw new Error("Cannot close `"+Z.type+"` ("+Il({start:Z.start,end:Z.end})+"): its not open");pe.position.end=Js(Z.end)}function m(){return Qy(this.stack.pop())}function p(){this.data.expectingFirstListItemValue=!0}function y(Z){if(this.data.expectingFirstListItemValue){const ce=this.stack[this.stack.length-2];ce.start=Number.parseInt(this.sliceSerialize(Z),10),this.data.expectingFirstListItemValue=void 0}}function g(){const Z=this.resume(),ce=this.stack[this.stack.length-1];ce.lang=Z}function v(){const Z=this.resume(),ce=this.stack[this.stack.length-1];ce.meta=Z}function x(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function C(){const Z=this.resume(),ce=this.stack[this.stack.length-1];ce.value=Z.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function k(){const Z=this.resume(),ce=this.stack[this.stack.length-1];ce.value=Z.replace(/(\r?\n|\r)$/g,"")}function T(Z){const ce=this.resume(),pe=this.stack[this.stack.length-1];pe.label=ce,pe.identifier=Mr(this.sliceSerialize(Z)).toLowerCase()}function A(){const Z=this.resume(),ce=this.stack[this.stack.length-1];ce.title=Z}function M(){const Z=this.resume(),ce=this.stack[this.stack.length-1];ce.url=Z}function I(Z){const ce=this.stack[this.stack.length-1];if(!ce.depth){const pe=this.sliceSerialize(Z).length;ce.depth=pe}}function O(){this.data.setextHeadingSlurpLineEnding=!0}function B(Z){const ce=this.stack[this.stack.length-1];ce.depth=this.sliceSerialize(Z).codePointAt(0)===61?1:2}function U(){this.data.setextHeadingSlurpLineEnding=void 0}function K(Z){const pe=this.stack[this.stack.length-1].children;let be=pe[pe.length-1];(!be||be.type!=="text")&&(be=Ce(),be.position={start:Js(Z.start),end:void 0},pe.push(be)),this.stack.push(be)}function j(Z){const ce=this.stack.pop();ce.value+=this.sliceSerialize(Z),ce.position.end=Js(Z.end)}function J(Z){const ce=this.stack[this.stack.length-1];if(this.data.atHardBreak){const pe=ce.children[ce.children.length-1];pe.position.end=Js(Z.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(ce.type)&&(K.call(this,Z),j.call(this,Z))}function ne(){this.data.atHardBreak=!0}function he(){const Z=this.resume(),ce=this.stack[this.stack.length-1];ce.value=Z}function Y(){const Z=this.resume(),ce=this.stack[this.stack.length-1];ce.value=Z}function q(){const Z=this.resume(),ce=this.stack[this.stack.length-1];ce.value=Z}function P(){const Z=this.stack[this.stack.length-1];if(this.data.inReference){const ce=this.data.referenceType||"shortcut";Z.type+="Reference",Z.referenceType=ce,delete Z.url,delete Z.title}else delete Z.identifier,delete Z.label;this.data.referenceType=void 0}function H(){const Z=this.stack[this.stack.length-1];if(this.data.inReference){const ce=this.data.referenceType||"shortcut";Z.type+="Reference",Z.referenceType=ce,delete Z.url,delete Z.title}else delete Z.identifier,delete Z.label;this.data.referenceType=void 0}function ie(Z){const ce=this.sliceSerialize(Z),pe=this.stack[this.stack.length-2];pe.label=rB(ce),pe.identifier=Mr(ce).toLowerCase()}function re(){const Z=this.stack[this.stack.length-1],ce=this.resume(),pe=this.stack[this.stack.length-1];if(this.data.inReference=!0,pe.type==="link"){const be=Z.children;pe.children=be}else pe.alt=ce}function N(){const Z=this.resume(),ce=this.stack[this.stack.length-1];ce.url=Z}function D(){const Z=this.resume(),ce=this.stack[this.stack.length-1];ce.title=Z}function V(){this.data.inReference=void 0}function S(){this.data.referenceType="collapsed"}function z(Z){const ce=this.resume(),pe=this.stack[this.stack.length-1];pe.label=ce,pe.identifier=Mr(this.sliceSerialize(Z)).toLowerCase(),this.data.referenceType="full"}function le(Z){this.data.characterReferenceType=Z.type}function de(Z){const ce=this.sliceSerialize(Z),pe=this.data.characterReferenceType;let be;pe?(be=FE(ce,pe==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):be=Jy(ce);const ke=this.stack[this.stack.length-1];ke.value+=be}function ye(Z){const ce=this.stack.pop();ce.position.end=Js(Z.end)}function _e(Z){j.call(this,Z);const ce=this.stack[this.stack.length-1];ce.url=this.sliceSerialize(Z)}function ve(Z){j.call(this,Z);const ce=this.stack[this.stack.length-1];ce.url="mailto:"+this.sliceSerialize(Z)}function Pe(){return{type:"blockquote",children:[]}}function tt(){return{type:"code",lang:null,meta:null,value:""}}function kt(){return{type:"inlineCode",value:""}}function Yt(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Tt(){return{type:"emphasis",children:[]}}function yn(){return{type:"heading",depth:0,children:[]}}function Xt(){return{type:"break"}}function Gn(){return{type:"html",value:""}}function bn(){return{type:"image",title:null,url:"",alt:null}}function _n(){return{type:"link",title:null,url:"",children:[]}}function Kn(Z){return{type:"list",ordered:Z.type==="listOrdered",start:null,spread:Z._spread,children:[]}}function Se(Z){return{type:"listItem",spread:Z._spread,checked:null,children:[]}}function Ve(){return{type:"paragraph",children:[]}}function Ke(){return{type:"strong",children:[]}}function Ce(){return{type:"text",value:""}}function _t(){return{type:"thematicBreak"}}}function Js(t){return{line:t.line,column:t.column,offset:t.offset}}function eC(t,e){let n=-1;for(;++n<e.length;){const r=e[n];Array.isArray(r)?eC(t,r):oB(t,r)}}function oB(t,e){let n;for(n in e)if(WE.call(e,n))switch(n){case"canContainEols":{const r=e[n];r&&t[n].push(...r);break}case"transforms":{const r=e[n];r&&t[n].push(...r);break}case"enter":case"exit":{const r=e[n];r&&Object.assign(t[n],r);break}}}function I1(t,e){throw t?new Error("Cannot close `"+t.type+"` ("+Il({start:t.start,end:t.end})+"): a different token (`"+e.type+"`, "+Il({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+Il({start:e.start,end:e.end})+") is still open")}function lB(t){const e=this;e.parser=n;function n(r){return iB(r,{...e.data("settings"),...t,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function cB(t,e){const n={type:"element",tagName:"blockquote",properties:{},children:t.wrap(t.all(e),!0)};return t.patch(e,n),t.applyData(e,n)}function uB(t,e){const n={type:"element",tagName:"br",properties:{},children:[]};return t.patch(e,n),[t.applyData(e,n),{type:"text",value:`
`}]}function fB(t,e){const n=e.value?e.value+`
`:"",r={},s=e.lang?e.lang.split(/\s+/):[];s.length>0&&(r.className=["language-"+s[0]]);let a={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return e.meta&&(a.data={meta:e.meta}),t.patch(e,a),a=t.applyData(e,a),a={type:"element",tagName:"pre",properties:{},children:[a]},t.patch(e,a),a}function dB(t,e){const n={type:"element",tagName:"del",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function hB(t,e){const n={type:"element",tagName:"em",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function pB(t,e){const n=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",r=String(e.identifier).toUpperCase(),s=lo(r.toLowerCase()),a=t.footnoteOrder.indexOf(r);let l,u=t.footnoteCounts.get(r);u===void 0?(u=0,t.footnoteOrder.push(r),l=t.footnoteOrder.length):l=a+1,u+=1,t.footnoteCounts.set(r,u);const f={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+s,id:n+"fnref-"+s+(u>1?"-"+u:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(l)}]};t.patch(e,f);const d={type:"element",tagName:"sup",properties:{},children:[f]};return t.patch(e,d),t.applyData(e,d)}function mB(t,e){const n={type:"element",tagName:"h"+e.depth,properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function gB(t,e){if(t.options.allowDangerousHtml){const n={type:"raw",value:e.value};return t.patch(e,n),t.applyData(e,n)}}function tC(t,e){const n=e.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+r}];const s=t.all(e),a=s[0];a&&a.type==="text"?a.value="["+a.value:s.unshift({type:"text",value:"["});const l=s[s.length-1];return l&&l.type==="text"?l.value+=r:s.push({type:"text",value:r}),s}function yB(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return tC(t,e);const s={src:lo(r.url||""),alt:e.alt};r.title!==null&&r.title!==void 0&&(s.title=r.title);const a={type:"element",tagName:"img",properties:s,children:[]};return t.patch(e,a),t.applyData(e,a)}function bB(t,e){const n={src:lo(e.url)};e.alt!==null&&e.alt!==void 0&&(n.alt=e.alt),e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"img",properties:n,children:[]};return t.patch(e,r),t.applyData(e,r)}function _B(t,e){const n={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};t.patch(e,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return t.patch(e,r),t.applyData(e,r)}function vB(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return tC(t,e);const s={href:lo(r.url||"")};r.title!==null&&r.title!==void 0&&(s.title=r.title);const a={type:"element",tagName:"a",properties:s,children:t.all(e)};return t.patch(e,a),t.applyData(e,a)}function xB(t,e){const n={href:lo(e.url)};e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"a",properties:n,children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function wB(t,e,n){const r=t.all(e),s=n?SB(n):nC(e),a={},l=[];if(typeof e.checked=="boolean"){const m=r[0];let p;m&&m.type==="element"&&m.tagName==="p"?p=m:(p={type:"element",tagName:"p",properties:{},children:[]},r.unshift(p)),p.children.length>0&&p.children.unshift({type:"text",value:" "}),p.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),a.className=["task-list-item"]}let u=-1;for(;++u<r.length;){const m=r[u];(s||u!==0||m.type!=="element"||m.tagName!=="p")&&l.push({type:"text",value:`
`}),m.type==="element"&&m.tagName==="p"&&!s?l.push(...m.children):l.push(m)}const f=r[r.length-1];f&&(s||f.type!=="element"||f.tagName!=="p")&&l.push({type:"text",value:`
`});const d={type:"element",tagName:"li",properties:a,children:l};return t.patch(e,d),t.applyData(e,d)}function SB(t){let e=!1;if(t.type==="list"){e=t.spread||!1;const n=t.children;let r=-1;for(;!e&&++r<n.length;)e=nC(n[r])}return e}function nC(t){const e=t.spread;return e??t.children.length>1}function kB(t,e){const n={},r=t.all(e);let s=-1;for(typeof e.start=="number"&&e.start!==1&&(n.start=e.start);++s<r.length;){const l=r[s];if(l.type==="element"&&l.tagName==="li"&&l.properties&&Array.isArray(l.properties.className)&&l.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const a={type:"element",tagName:e.ordered?"ol":"ul",properties:n,children:t.wrap(r,!0)};return t.patch(e,a),t.applyData(e,a)}function EB(t,e){const n={type:"element",tagName:"p",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function CB(t,e){const n={type:"root",children:t.wrap(t.all(e))};return t.patch(e,n),t.applyData(e,n)}function TB(t,e){const n={type:"element",tagName:"strong",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function AB(t,e){const n=t.all(e),r=n.shift(),s=[];if(r){const l={type:"element",tagName:"thead",properties:{},children:t.wrap([r],!0)};t.patch(e.children[0],l),s.push(l)}if(n.length>0){const l={type:"element",tagName:"tbody",properties:{},children:t.wrap(n,!0)},u=Hy(e.children[1]),f=jE(e.children[e.children.length-1]);u&&f&&(l.position={start:u,end:f}),s.push(l)}const a={type:"element",tagName:"table",properties:{},children:t.wrap(s,!0)};return t.patch(e,a),t.applyData(e,a)}function RB(t,e,n){const r=n?n.children:void 0,a=(r?r.indexOf(e):1)===0?"th":"td",l=n&&n.type==="table"?n.align:void 0,u=l?l.length:e.children.length;let f=-1;const d=[];for(;++f<u;){const p=e.children[f],y={},g=l?l[f]:void 0;g&&(y.align=g);let v={type:"element",tagName:a,properties:y,children:[]};p&&(v.children=t.all(p),t.patch(p,v),v=t.applyData(p,v)),d.push(v)}const m={type:"element",tagName:"tr",properties:{},children:t.wrap(d,!0)};return t.patch(e,m),t.applyData(e,m)}function OB(t,e){const n={type:"element",tagName:"td",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}const M1=9,D1=32;function NB(t){const e=String(t),n=/\r?\n|\r/g;let r=n.exec(e),s=0;const a=[];for(;r;)a.push(j1(e.slice(s,r.index),s>0,!0),r[0]),s=r.index+r[0].length,r=n.exec(e);return a.push(j1(e.slice(s),s>0,!1)),a.join("")}function j1(t,e,n){let r=0,s=t.length;if(e){let a=t.codePointAt(r);for(;a===M1||a===D1;)r++,a=t.codePointAt(r)}if(n){let a=t.codePointAt(s-1);for(;a===M1||a===D1;)s--,a=t.codePointAt(s-1)}return s>r?t.slice(r,s):""}function IB(t,e){const n={type:"text",value:NB(String(e.value))};return t.patch(e,n),t.applyData(e,n)}function MB(t,e){const n={type:"element",tagName:"hr",properties:{},children:[]};return t.patch(e,n),t.applyData(e,n)}const DB={blockquote:cB,break:uB,code:fB,delete:dB,emphasis:hB,footnoteReference:pB,heading:mB,html:gB,imageReference:yB,image:bB,inlineCode:_B,linkReference:vB,link:xB,listItem:wB,list:kB,paragraph:EB,root:CB,strong:TB,table:AB,tableCell:OB,tableRow:RB,text:IB,thematicBreak:MB,toml:Du,yaml:Du,definition:Du,footnoteDefinition:Du};function Du(){}const rC=-1,gd=0,Dl=1,Bf=2,Xy=3,Wy=4,e0=5,t0=6,sC=7,iC=8,L1=typeof self=="object"?self:globalThis,jB=(t,e)=>{const n=(s,a)=>(t.set(a,s),s),r=s=>{if(t.has(s))return t.get(s);const[a,l]=e[s];switch(a){case gd:case rC:return n(l,s);case Dl:{const u=n([],s);for(const f of l)u.push(r(f));return u}case Bf:{const u=n({},s);for(const[f,d]of l)u[r(f)]=r(d);return u}case Xy:return n(new Date(l),s);case Wy:{const{source:u,flags:f}=l;return n(new RegExp(u,f),s)}case e0:{const u=n(new Map,s);for(const[f,d]of l)u.set(r(f),r(d));return u}case t0:{const u=n(new Set,s);for(const f of l)u.add(r(f));return u}case sC:{const{name:u,message:f}=l;return n(new L1[u](f),s)}case iC:return n(BigInt(l),s);case"BigInt":return n(Object(BigInt(l)),s);case"ArrayBuffer":return n(new Uint8Array(l).buffer,l);case"DataView":{const{buffer:u}=new Uint8Array(l);return n(new DataView(u),l)}}return n(new L1[a](l),s)};return r},z1=t=>jB(new Map,t)(0),Ia="",{toString:LB}={},{keys:zB}=Object,ul=t=>{const e=typeof t;if(e!=="object"||!t)return[gd,e];const n=LB.call(t).slice(8,-1);switch(n){case"Array":return[Dl,Ia];case"Object":return[Bf,Ia];case"Date":return[Xy,Ia];case"RegExp":return[Wy,Ia];case"Map":return[e0,Ia];case"Set":return[t0,Ia];case"DataView":return[Dl,n]}return n.includes("Array")?[Dl,n]:n.includes("Error")?[sC,n]:[Bf,n]},ju=([t,e])=>t===gd&&(e==="function"||e==="symbol"),PB=(t,e,n,r)=>{const s=(l,u)=>{const f=r.push(l)-1;return n.set(u,f),f},a=l=>{if(n.has(l))return n.get(l);let[u,f]=ul(l);switch(u){case gd:{let m=l;switch(f){case"bigint":u=iC,m=l.toString();break;case"function":case"symbol":if(t)throw new TypeError("unable to serialize "+f);m=null;break;case"undefined":return s([rC],l)}return s([u,m],l)}case Dl:{if(f){let y=l;return f==="DataView"?y=new Uint8Array(l.buffer):f==="ArrayBuffer"&&(y=new Uint8Array(l)),s([f,[...y]],l)}const m=[],p=s([u,m],l);for(const y of l)m.push(a(y));return p}case Bf:{if(f)switch(f){case"BigInt":return s([f,l.toString()],l);case"Boolean":case"Number":case"String":return s([f,l.valueOf()],l)}if(e&&"toJSON"in l)return a(l.toJSON());const m=[],p=s([u,m],l);for(const y of zB(l))(t||!ju(ul(l[y])))&&m.push([a(y),a(l[y])]);return p}case Xy:return s([u,l.toISOString()],l);case Wy:{const{source:m,flags:p}=l;return s([u,{source:m,flags:p}],l)}case e0:{const m=[],p=s([u,m],l);for(const[y,g]of l)(t||!(ju(ul(y))||ju(ul(g))))&&m.push([a(y),a(g)]);return p}case t0:{const m=[],p=s([u,m],l);for(const y of l)(t||!ju(ul(y)))&&m.push(a(y));return p}}const{message:d}=l;return s([u,{name:f,message:d}],l)};return a},P1=(t,{json:e,lossy:n}={})=>{const r=[];return PB(!(e||n),!!e,new Map,r)(t),r},$f=typeof structuredClone=="function"?(t,e)=>e&&("json"in e||"lossy"in e)?z1(P1(t,e)):structuredClone(t):(t,e)=>z1(P1(t,e));function BB(t,e){const n=[{type:"text",value:""}];return e>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),n}function $B(t,e){return"Back to reference "+(t+1)+(e>1?"-"+e:"")}function UB(t){const e=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",n=t.options.footnoteBackContent||BB,r=t.options.footnoteBackLabel||$B,s=t.options.footnoteLabel||"Footnotes",a=t.options.footnoteLabelTagName||"h2",l=t.options.footnoteLabelProperties||{className:["sr-only"]},u=[];let f=-1;for(;++f<t.footnoteOrder.length;){const d=t.footnoteById.get(t.footnoteOrder[f]);if(!d)continue;const m=t.all(d),p=String(d.identifier).toUpperCase(),y=lo(p.toLowerCase());let g=0;const v=[],x=t.footnoteCounts.get(p);for(;x!==void 0&&++g<=x;){v.length>0&&v.push({type:"text",value:" "});let T=typeof n=="string"?n:n(f,g);typeof T=="string"&&(T={type:"text",value:T}),v.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+y+(g>1?"-"+g:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(f,g),className:["data-footnote-backref"]},children:Array.isArray(T)?T:[T]})}const C=m[m.length-1];if(C&&C.type==="element"&&C.tagName==="p"){const T=C.children[C.children.length-1];T&&T.type==="text"?T.value+=" ":C.children.push({type:"text",value:" "}),C.children.push(...v)}else m.push(...v);const k={type:"element",tagName:"li",properties:{id:e+"fn-"+y},children:t.wrap(m,!0)};t.patch(d,k),u.push(k)}if(u.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:a,properties:{...$f(l),id:"footnote-label"},children:[{type:"text",value:s}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:t.wrap(u,!0)},{type:"text",value:`
`}]}}const yd=(function(t){if(t==null)return HB;if(typeof t=="function")return bd(t);if(typeof t=="object")return Array.isArray(t)?qB(t):FB(t);if(typeof t=="string")return VB(t);throw new Error("Expected function, string, or object as test")});function qB(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=yd(t[n]);return bd(r);function r(...s){let a=-1;for(;++a<e.length;)if(e[a].apply(this,s))return!0;return!1}}function FB(t){const e=t;return bd(n);function n(r){const s=r;let a;for(a in t)if(s[a]!==e[a])return!1;return!0}}function VB(t){return bd(e);function e(n){return n&&n.type===t}}function bd(t){return e;function e(n,r,s){return!!(GB(n)&&t.call(this,n,typeof r=="number"?r:void 0,s||void 0))}}function HB(){return!0}function GB(t){return t!==null&&typeof t=="object"&&"type"in t}const aC=[],KB=!0,Pg=!1,ZB="skip";function oC(t,e,n,r){let s;typeof e=="function"&&typeof n!="function"?(r=n,n=e):s=e;const a=yd(s),l=r?-1:1;u(t,void 0,[])();function u(f,d,m){const p=f&&typeof f=="object"?f:{};if(typeof p.type=="string"){const g=typeof p.tagName=="string"?p.tagName:typeof p.name=="string"?p.name:void 0;Object.defineProperty(y,"name",{value:"node ("+(f.type+(g?"<"+g+">":""))+")"})}return y;function y(){let g=aC,v,x,C;if((!e||a(f,d,m[m.length-1]||void 0))&&(g=QB(n(f,m)),g[0]===Pg))return g;if("children"in f&&f.children){const k=f;if(k.children&&g[0]!==ZB)for(x=(r?k.children.length:-1)+l,C=m.concat(k);x>-1&&x<k.children.length;){const T=k.children[x];if(v=u(T,x,C)(),v[0]===Pg)return v;x=typeof v[1]=="number"?v[1]:x+l}}return g}}}function QB(t){return Array.isArray(t)?t:typeof t=="number"?[KB,t]:t==null?aC:[t]}function n0(t,e,n,r){let s,a,l;typeof e=="function"&&typeof n!="function"?(a=void 0,l=e,s=n):(a=e,l=n,s=r),oC(t,a,u,s);function u(f,d){const m=d[d.length-1],p=m?m.children.indexOf(f):void 0;return l(f,p,m)}}const Bg={}.hasOwnProperty,JB={};function YB(t,e){const n=e||JB,r=new Map,s=new Map,a=new Map,l={...DB,...n.handlers},u={all:d,applyData:WB,definitionById:r,footnoteById:s,footnoteCounts:a,footnoteOrder:[],handlers:l,one:f,options:n,patch:XB,wrap:t$};return n0(t,function(m){if(m.type==="definition"||m.type==="footnoteDefinition"){const p=m.type==="definition"?r:s,y=String(m.identifier).toUpperCase();p.has(y)||p.set(y,m)}}),u;function f(m,p){const y=m.type,g=u.handlers[y];if(Bg.call(u.handlers,y)&&g)return g(u,m,p);if(u.options.passThrough&&u.options.passThrough.includes(y)){if("children"in m){const{children:x,...C}=m,k=$f(C);return k.children=u.all(m),k}return $f(m)}return(u.options.unknownHandler||e$)(u,m,p)}function d(m){const p=[];if("children"in m){const y=m.children;let g=-1;for(;++g<y.length;){const v=u.one(y[g],m);if(v){if(g&&y[g-1].type==="break"&&(!Array.isArray(v)&&v.type==="text"&&(v.value=B1(v.value)),!Array.isArray(v)&&v.type==="element")){const x=v.children[0];x&&x.type==="text"&&(x.value=B1(x.value))}Array.isArray(v)?p.push(...v):p.push(v)}}}return p}}function XB(t,e){t.position&&(e.position=$P(t))}function WB(t,e){let n=e;if(t&&t.data){const r=t.data.hName,s=t.data.hChildren,a=t.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const l="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:l}}n.type==="element"&&a&&Object.assign(n.properties,$f(a)),"children"in n&&n.children&&s!==null&&s!==void 0&&(n.children=s)}return n}function e$(t,e){const n=e.data||{},r="value"in e&&!(Bg.call(n,"hProperties")||Bg.call(n,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function t$(t,e){const n=[];let r=-1;for(e&&n.push({type:"text",value:`
`});++r<t.length;)r&&n.push({type:"text",value:`
`}),n.push(t[r]);return e&&t.length>0&&n.push({type:"text",value:`
`}),n}function B1(t){let e=0,n=t.charCodeAt(e);for(;n===9||n===32;)e++,n=t.charCodeAt(e);return t.slice(e)}function $1(t,e){const n=YB(t,e),r=n.one(t,void 0),s=UB(n),a=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return s&&a.children.push({type:"text",value:`
`},s),a}function n$(t,e){return t&&"run"in t?async function(n,r){const s=$1(n,{file:r,...e});await t.run(s,r)}:function(n,r){return $1(n,{file:r,...t||e})}}function U1(t){if(t)throw t}var wm,q1;function r$(){if(q1)return wm;q1=1;var t=Object.prototype.hasOwnProperty,e=Object.prototype.toString,n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,s=function(d){return typeof Array.isArray=="function"?Array.isArray(d):e.call(d)==="[object Array]"},a=function(d){if(!d||e.call(d)!=="[object Object]")return!1;var m=t.call(d,"constructor"),p=d.constructor&&d.constructor.prototype&&t.call(d.constructor.prototype,"isPrototypeOf");if(d.constructor&&!m&&!p)return!1;var y;for(y in d);return typeof y>"u"||t.call(d,y)},l=function(d,m){n&&m.name==="__proto__"?n(d,m.name,{enumerable:!0,configurable:!0,value:m.newValue,writable:!0}):d[m.name]=m.newValue},u=function(d,m){if(m==="__proto__")if(t.call(d,m)){if(r)return r(d,m).value}else return;return d[m]};return wm=function f(){var d,m,p,y,g,v,x=arguments[0],C=1,k=arguments.length,T=!1;for(typeof x=="boolean"&&(T=x,x=arguments[1]||{},C=2),(x==null||typeof x!="object"&&typeof x!="function")&&(x={});C<k;++C)if(d=arguments[C],d!=null)for(m in d)p=u(x,m),y=u(d,m),x!==y&&(T&&y&&(a(y)||(g=s(y)))?(g?(g=!1,v=p&&s(p)?p:[]):v=p&&a(p)?p:{},l(x,{name:m,newValue:f(T,v,y)})):typeof y<"u"&&l(x,{name:m,newValue:y}));return x},wm}var s$=r$();const Sm=tk(s$);function $g(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function i$(){const t=[],e={run:n,use:r};return e;function n(...s){let a=-1;const l=s.pop();if(typeof l!="function")throw new TypeError("Expected function as last argument, not "+l);u(null,...s);function u(f,...d){const m=t[++a];let p=-1;if(f){l(f);return}for(;++p<s.length;)(d[p]===null||d[p]===void 0)&&(d[p]=s[p]);s=d,m?a$(m,u)(...d):l(null,...d)}}function r(s){if(typeof s!="function")throw new TypeError("Expected `middelware` to be a function, not "+s);return t.push(s),e}}function a$(t,e){let n;return r;function r(...l){const u=t.length>l.length;let f;u&&l.push(s);try{f=t.apply(this,l)}catch(d){const m=d;if(u&&n)throw m;return s(m)}u||(f&&f.then&&typeof f.then=="function"?f.then(a,s):f instanceof Error?s(f):a(f))}function s(l,...u){n||(n=!0,e(l,...u))}function a(l){s(null,l)}}const Fr={basename:o$,dirname:l$,extname:c$,join:u$,sep:"/"};function o$(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');uc(t);let n=0,r=-1,s=t.length,a;if(e===void 0||e.length===0||e.length>t.length){for(;s--;)if(t.codePointAt(s)===47){if(a){n=s+1;break}}else r<0&&(a=!0,r=s+1);return r<0?"":t.slice(n,r)}if(e===t)return"";let l=-1,u=e.length-1;for(;s--;)if(t.codePointAt(s)===47){if(a){n=s+1;break}}else l<0&&(a=!0,l=s+1),u>-1&&(t.codePointAt(s)===e.codePointAt(u--)?u<0&&(r=s):(u=-1,r=l));return n===r?r=l:r<0&&(r=t.length),t.slice(n,r)}function l$(t){if(uc(t),t.length===0)return".";let e=-1,n=t.length,r;for(;--n;)if(t.codePointAt(n)===47){if(r){e=n;break}}else r||(r=!0);return e<0?t.codePointAt(0)===47?"/":".":e===1&&t.codePointAt(0)===47?"//":t.slice(0,e)}function c$(t){uc(t);let e=t.length,n=-1,r=0,s=-1,a=0,l;for(;e--;){const u=t.codePointAt(e);if(u===47){if(l){r=e+1;break}continue}n<0&&(l=!0,n=e+1),u===46?s<0?s=e:a!==1&&(a=1):s>-1&&(a=-1)}return s<0||n<0||a===0||a===1&&s===n-1&&s===r+1?"":t.slice(s,n)}function u$(...t){let e=-1,n;for(;++e<t.length;)uc(t[e]),t[e]&&(n=n===void 0?t[e]:n+"/"+t[e]);return n===void 0?".":f$(n)}function f$(t){uc(t);const e=t.codePointAt(0)===47;let n=d$(t,!e);return n.length===0&&!e&&(n="."),n.length>0&&t.codePointAt(t.length-1)===47&&(n+="/"),e?"/"+n:n}function d$(t,e){let n="",r=0,s=-1,a=0,l=-1,u,f;for(;++l<=t.length;){if(l<t.length)u=t.codePointAt(l);else{if(u===47)break;u=47}if(u===47){if(!(s===l-1||a===1))if(s!==l-1&&a===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(f=n.lastIndexOf("/"),f!==n.length-1){f<0?(n="",r=0):(n=n.slice(0,f),r=n.length-1-n.lastIndexOf("/")),s=l,a=0;continue}}else if(n.length>0){n="",r=0,s=l,a=0;continue}}e&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+t.slice(s+1,l):n=t.slice(s+1,l),r=l-s-1;s=l,a=0}else u===46&&a>-1?a++:a=-1}return n}function uc(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const h$={cwd:p$};function p$(){return"/"}function Ug(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function m$(t){if(typeof t=="string")t=new URL(t);else if(!Ug(t)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(t.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return g$(t)}function g$(t){if(t.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const e=t.pathname;let n=-1;for(;++n<e.length;)if(e.codePointAt(n)===37&&e.codePointAt(n+1)===50){const r=e.codePointAt(n+2);if(r===70||r===102){const s=new TypeError("File URL path must not include encoded / characters");throw s.code="ERR_INVALID_FILE_URL_PATH",s}}return decodeURIComponent(e)}const km=["history","path","basename","stem","extname","dirname"];class lC{constructor(e){let n;e?Ug(e)?n={path:e}:typeof e=="string"||y$(e)?n={value:e}:n=e:n={},this.cwd="cwd"in n?"":h$.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<km.length;){const a=km[r];a in n&&n[a]!==void 0&&n[a]!==null&&(this[a]=a==="history"?[...n[a]]:n[a])}let s;for(s in n)km.includes(s)||(this[s]=n[s])}get basename(){return typeof this.path=="string"?Fr.basename(this.path):void 0}set basename(e){Cm(e,"basename"),Em(e,"basename"),this.path=Fr.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?Fr.dirname(this.path):void 0}set dirname(e){F1(this.basename,"dirname"),this.path=Fr.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?Fr.extname(this.path):void 0}set extname(e){if(Em(e,"extname"),F1(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Fr.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){Ug(e)&&(e=m$(e)),Cm(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?Fr.basename(this.path,this.extname):void 0}set stem(e){Cm(e,"stem"),Em(e,"stem"),this.path=Fr.join(this.dirname||"",e+(this.extname||""))}fail(e,n,r){const s=this.message(e,n,r);throw s.fatal=!0,s}info(e,n,r){const s=this.message(e,n,r);return s.fatal=void 0,s}message(e,n,r){const s=new Cn(e,n,r);return this.path&&(s.name=this.path+":"+s.name,s.file=this.path),s.fatal=!1,this.messages.push(s),s}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function Em(t,e){if(t&&t.includes(Fr.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+Fr.sep+"`")}function Cm(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}function F1(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}function y$(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const b$=(function(t){const r=this.constructor.prototype,s=r[t],a=function(){return s.apply(a,arguments)};return Object.setPrototypeOf(a,r),a}),_$={}.hasOwnProperty;class r0 extends b${constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=i$()}copy(){const e=new r0;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];e.use(...r)}return e.data(Sm(!0,{},this.namespace)),e}data(e,n){return typeof e=="string"?arguments.length===2?(Rm("data",this.frozen),this.namespace[e]=n,this):_$.call(this.namespace,e)&&this.namespace[e]||void 0:e?(Rm("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const s=n.call(e,...r);typeof s=="function"&&this.transformers.use(s)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const n=Lu(e),r=this.parser||this.Parser;return Tm("parse",r),r(String(n),n)}process(e,n){const r=this;return this.freeze(),Tm("process",this.parser||this.Parser),Am("process",this.compiler||this.Compiler),n?s(void 0,n):new Promise(s);function s(a,l){const u=Lu(e),f=r.parse(u);r.run(f,u,function(m,p,y){if(m||!p||!y)return d(m);const g=p,v=r.stringify(g,y);w$(v)?y.value=v:y.result=v,d(m,y)});function d(m,p){m||!p?l(m):a?a(p):n(void 0,p)}}}processSync(e){let n=!1,r;return this.freeze(),Tm("processSync",this.parser||this.Parser),Am("processSync",this.compiler||this.Compiler),this.process(e,s),H1("processSync","process",n),r;function s(a,l){n=!0,U1(a),r=l}}run(e,n,r){V1(e),this.freeze();const s=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?a(void 0,r):new Promise(a);function a(l,u){const f=Lu(n);s.run(e,f,d);function d(m,p,y){const g=p||e;m?u(m):l?l(g):r(void 0,g,y)}}}runSync(e,n){let r=!1,s;return this.run(e,n,a),H1("runSync","run",r),s;function a(l,u){U1(l),s=u,r=!0}}stringify(e,n){this.freeze();const r=Lu(n),s=this.compiler||this.Compiler;return Am("stringify",s),V1(e),s(e,r)}use(e,...n){const r=this.attachers,s=this.namespace;if(Rm("use",this.frozen),e!=null)if(typeof e=="function")f(e,n);else if(typeof e=="object")Array.isArray(e)?u(e):l(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function a(d){if(typeof d=="function")f(d,[]);else if(typeof d=="object")if(Array.isArray(d)){const[m,...p]=d;f(m,p)}else l(d);else throw new TypeError("Expected usable value, not `"+d+"`")}function l(d){if(!("plugins"in d)&&!("settings"in d))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");u(d.plugins),d.settings&&(s.settings=Sm(!0,s.settings,d.settings))}function u(d){let m=-1;if(d!=null)if(Array.isArray(d))for(;++m<d.length;){const p=d[m];a(p)}else throw new TypeError("Expected a list of plugins, not `"+d+"`")}function f(d,m){let p=-1,y=-1;for(;++p<r.length;)if(r[p][0]===d){y=p;break}if(y===-1)r.push([d,...m]);else if(m.length>0){let[g,...v]=m;const x=r[y][1];$g(x)&&$g(g)&&(g=Sm(!0,x,g)),r[y]=[d,g,...v]}}}}const v$=new r0().freeze();function Tm(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `parser`")}function Am(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `compiler`")}function Rm(t,e){if(e)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function V1(t){if(!$g(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}function H1(t,e,n){if(!n)throw new Error("`"+t+"` finished async. Use `"+e+"` instead")}function Lu(t){return x$(t)?t:new lC(t)}function x$(t){return!!(t&&typeof t=="object"&&"message"in t&&"messages"in t)}function w$(t){return typeof t=="string"||S$(t)}function S$(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const k$="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",G1=[],K1={allowDangerousHtml:!0},E$=/^(https?|ircs?|mailto|xmpp)$/i,C$=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function T$(t){const e=A$(t),n=R$(t);return O$(e.runSync(e.parse(n),n),t)}function A$(t){const e=t.rehypePlugins||G1,n=t.remarkPlugins||G1,r=t.remarkRehypeOptions?{...t.remarkRehypeOptions,...K1}:K1;return v$().use(lB).use(n).use(n$,r).use(e)}function R$(t){const e=t.children||"",n=new lC;return typeof e=="string"&&(n.value=e),n}function O$(t,e){const n=e.allowedElements,r=e.allowElement,s=e.components,a=e.disallowedElements,l=e.skipHtml,u=e.unwrapDisallowed,f=e.urlTransform||N$;for(const m of C$)Object.hasOwn(e,m.from)&&(""+m.from+(m.to?"use `"+m.to+"` instead":"remove it")+k$+m.id,void 0);return n0(t,d),HP(t,{Fragment:w.Fragment,components:s,ignoreInvalidStyle:!0,jsx:w.jsx,jsxs:w.jsxs,passKeys:!0,passNode:!0});function d(m,p,y){if(m.type==="raw"&&y&&typeof p=="number")return l?y.children.splice(p,1):y.children[p]={type:"text",value:m.value},p;if(m.type==="element"){let g;for(g in _m)if(Object.hasOwn(_m,g)&&Object.hasOwn(m.properties,g)){const v=m.properties[g],x=_m[g];(x===null||x.includes(m.tagName))&&(m.properties[g]=f(String(v||""),g,m))}}if(m.type==="element"){let g=n?!n.includes(m.tagName):a?a.includes(m.tagName):!1;if(!g&&r&&typeof p=="number"&&(g=!r(m,p,y)),g&&y&&typeof p=="number")return u&&m.children?y.children.splice(p,1,...m.children):y.children.splice(p,1),p}}}function N$(t){const e=t.indexOf(":"),n=t.indexOf("?"),r=t.indexOf("#"),s=t.indexOf("/");return e===-1||s!==-1&&e>s||n!==-1&&e>n||r!==-1&&e>r||E$.test(t.slice(0,e))?t:""}function I$(t){if(typeof t!="string")throw new TypeError("Expected a string");return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function cC(t,e,n){const s=yd((n||{}).ignore||[]),a=M$(e);let l=-1;for(;++l<a.length;)oC(t,"text",u);function u(d,m){let p=-1,y;for(;++p<m.length;){const g=m[p],v=y?y.children:void 0;if(s(g,v?v.indexOf(g):void 0,y))return;y=g}if(y)return f(d,m)}function f(d,m){const p=m[m.length-1],y=a[l][0],g=a[l][1];let v=0;const C=p.children.indexOf(d);let k=!1,T=[];y.lastIndex=0;let A=y.exec(d.value);for(;A;){const M=A.index,I={index:A.index,input:A.input,stack:[...m,d]};let O=g(...A,I);if(typeof O=="string"&&(O=O.length>0?{type:"text",value:O}:void 0),O===!1?y.lastIndex=M+1:(v!==M&&T.push({type:"text",value:d.value.slice(v,M)}),Array.isArray(O)?T.push(...O):O&&T.push(O),v=M+A[0].length,k=!0),!y.global)break;A=y.exec(d.value)}return k?(v<d.value.length&&T.push({type:"text",value:d.value.slice(v)}),p.children.splice(C,1,...T)):T=[d],C+T.length}}function M$(t){const e=[];if(!Array.isArray(t))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!t[0]||Array.isArray(t[0])?t:[t];let r=-1;for(;++r<n.length;){const s=n[r];e.push([D$(s[0]),j$(s[1])])}return e}function D$(t){return typeof t=="string"?new RegExp(I$(t),"g"):t}function j$(t){return typeof t=="function"?t:function(){return t}}const Om="phrasing",Nm=["autolink","link","image","label"];function L$(){return{transforms:[F$],enter:{literalAutolink:P$,literalAutolinkEmail:Im,literalAutolinkHttp:Im,literalAutolinkWww:Im},exit:{literalAutolink:q$,literalAutolinkEmail:U$,literalAutolinkHttp:B$,literalAutolinkWww:$$}}}function z$(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:Om,notInConstruct:Nm},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:Om,notInConstruct:Nm},{character:":",before:"[ps]",after:"\\/",inConstruct:Om,notInConstruct:Nm}]}}function P$(t){this.enter({type:"link",title:null,url:"",children:[]},t)}function Im(t){this.config.enter.autolinkProtocol.call(this,t)}function B$(t){this.config.exit.autolinkProtocol.call(this,t)}function $$(t){this.config.exit.data.call(this,t);const e=this.stack[this.stack.length-1];e.type,e.url="http://"+this.sliceSerialize(t)}function U$(t){this.config.exit.autolinkEmail.call(this,t)}function q$(t){this.exit(t)}function F$(t){cC(t,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,V$],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),H$]],{ignore:["link","linkReference"]})}function V$(t,e,n,r,s){let a="";if(!uC(s)||(/^w/i.test(e)&&(n=e+n,e="",a="http://"),!G$(n)))return!1;const l=K$(n+r);if(!l[0])return!1;const u={type:"link",title:null,url:a+e+l[0],children:[{type:"text",value:e+l[0]}]};return l[1]?[u,{type:"text",value:l[1]}]:u}function H$(t,e,n,r){return!uC(r,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+e+"@"+n,children:[{type:"text",value:e+"@"+n}]}}function G$(t){const e=t.split(".");return!(e.length<2||e[e.length-1]&&(/_/.test(e[e.length-1])||!/[a-zA-Z\d]/.test(e[e.length-1]))||e[e.length-2]&&(/_/.test(e[e.length-2])||!/[a-zA-Z\d]/.test(e[e.length-2])))}function K$(t){const e=/[!"&'),.:;<>?\]}]+$/.exec(t);if(!e)return[t,void 0];t=t.slice(0,e.index);let n=e[0],r=n.indexOf(")");const s=If(t,"(");let a=If(t,")");for(;r!==-1&&s>a;)t+=n.slice(0,r+1),n=n.slice(r+1),r=n.indexOf(")"),a++;return[t,n]}function uC(t,e){const n=t.input.charCodeAt(t.index-1);return(t.index===0||Pi(n)||pd(n))&&(!e||n!==47)}fC.peek=nU;function Z$(){this.buffer()}function Q$(t){this.enter({type:"footnoteReference",identifier:"",label:""},t)}function J$(){this.buffer()}function Y$(t){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},t)}function X$(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Mr(this.sliceSerialize(t)).toLowerCase(),n.label=e}function W$(t){this.exit(t)}function eU(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Mr(this.sliceSerialize(t)).toLowerCase(),n.label=e}function tU(t){this.exit(t)}function nU(){return"["}function fC(t,e,n,r){const s=n.createTracker(r);let a=s.move("[^");const l=n.enter("footnoteReference"),u=n.enter("reference");return a+=s.move(n.safe(n.associationId(t),{after:"]",before:a})),u(),l(),a+=s.move("]"),a}function rU(){return{enter:{gfmFootnoteCallString:Z$,gfmFootnoteCall:Q$,gfmFootnoteDefinitionLabelString:J$,gfmFootnoteDefinition:Y$},exit:{gfmFootnoteCallString:X$,gfmFootnoteCall:W$,gfmFootnoteDefinitionLabelString:eU,gfmFootnoteDefinition:tU}}}function sU(t){let e=!1;return t&&t.firstLineBlank&&(e=!0),{handlers:{footnoteDefinition:n,footnoteReference:fC},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(r,s,a,l){const u=a.createTracker(l);let f=u.move("[^");const d=a.enter("footnoteDefinition"),m=a.enter("label");return f+=u.move(a.safe(a.associationId(r),{before:f,after:"]"})),m(),f+=u.move("]:"),r.children&&r.children.length>0&&(u.shift(4),f+=u.move((e?`
`:" ")+a.indentLines(a.containerFlow(r,u.current()),e?dC:iU))),d(),f}}function iU(t,e,n){return e===0?t:dC(t,e,n)}function dC(t,e,n){return(n?"":"    ")+t}const aU=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];hC.peek=fU;function oU(){return{canContainEols:["delete"],enter:{strikethrough:cU},exit:{strikethrough:uU}}}function lU(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:aU}],handlers:{delete:hC}}}function cU(t){this.enter({type:"delete",children:[]},t)}function uU(t){this.exit(t)}function hC(t,e,n,r){const s=n.createTracker(r),a=n.enter("strikethrough");let l=s.move("~~");return l+=n.containerPhrasing(t,{...s.current(),before:l,after:"~"}),l+=s.move("~~"),a(),l}function fU(){return"~"}function dU(t){return t.length}function hU(t,e){const n=e||{},r=(n.align||[]).concat(),s=n.stringLength||dU,a=[],l=[],u=[],f=[];let d=0,m=-1;for(;++m<t.length;){const x=[],C=[];let k=-1;for(t[m].length>d&&(d=t[m].length);++k<t[m].length;){const T=pU(t[m][k]);if(n.alignDelimiters!==!1){const A=s(T);C[k]=A,(f[k]===void 0||A>f[k])&&(f[k]=A)}x.push(T)}l[m]=x,u[m]=C}let p=-1;if(typeof r=="object"&&"length"in r)for(;++p<d;)a[p]=Z1(r[p]);else{const x=Z1(r);for(;++p<d;)a[p]=x}p=-1;const y=[],g=[];for(;++p<d;){const x=a[p];let C="",k="";x===99?(C=":",k=":"):x===108?C=":":x===114&&(k=":");let T=n.alignDelimiters===!1?1:Math.max(1,f[p]-C.length-k.length);const A=C+"-".repeat(T)+k;n.alignDelimiters!==!1&&(T=C.length+T+k.length,T>f[p]&&(f[p]=T),g[p]=T),y[p]=A}l.splice(1,0,y),u.splice(1,0,g),m=-1;const v=[];for(;++m<l.length;){const x=l[m],C=u[m];p=-1;const k=[];for(;++p<d;){const T=x[p]||"";let A="",M="";if(n.alignDelimiters!==!1){const I=f[p]-(C[p]||0),O=a[p];O===114?A=" ".repeat(I):O===99?I%2?(A=" ".repeat(I/2+.5),M=" ".repeat(I/2-.5)):(A=" ".repeat(I/2),M=A):M=" ".repeat(I)}n.delimiterStart!==!1&&!p&&k.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&T==="")&&(n.delimiterStart!==!1||p)&&k.push(" "),n.alignDelimiters!==!1&&k.push(A),k.push(T),n.alignDelimiters!==!1&&k.push(M),n.padding!==!1&&k.push(" "),(n.delimiterEnd!==!1||p!==d-1)&&k.push("|")}v.push(n.delimiterEnd===!1?k.join("").replace(/ +$/,""):k.join(""))}return v.join(`
`)}function pU(t){return t==null?"":String(t)}function Z1(t){const e=typeof t=="string"?t.codePointAt(0):0;return e===67||e===99?99:e===76||e===108?108:e===82||e===114?114:0}function mU(t,e,n,r){const s=n.enter("blockquote"),a=n.createTracker(r);a.move("> "),a.shift(2);const l=n.indentLines(n.containerFlow(t,a.current()),gU);return s(),l}function gU(t,e,n){return">"+(n?"":" ")+t}function yU(t,e){return Q1(t,e.inConstruct,!0)&&!Q1(t,e.notInConstruct,!1)}function Q1(t,e,n){if(typeof e=="string"&&(e=[e]),!e||e.length===0)return n;let r=-1;for(;++r<e.length;)if(t.includes(e[r]))return!0;return!1}function J1(t,e,n,r){let s=-1;for(;++s<n.unsafe.length;)if(n.unsafe[s].character===`
`&&yU(n.stack,n.unsafe[s]))return/[ \t]/.test(r.before)?"":" ";return`\\
`}function bU(t,e){const n=String(t);let r=n.indexOf(e),s=r,a=0,l=0;if(typeof e!="string")throw new TypeError("Expected substring");for(;r!==-1;)r===s?++a>l&&(l=a):a=1,s=r+e.length,r=n.indexOf(e,s);return l}function _U(t,e){return!!(e.options.fences===!1&&t.value&&!t.lang&&/[^ \r\n]/.test(t.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(t.value))}function vU(t){const e=t.options.fence||"`";if(e!=="`"&&e!=="~")throw new Error("Cannot serialize code with `"+e+"` for `options.fence`, expected `` ` `` or `~`");return e}function xU(t,e,n,r){const s=vU(n),a=t.value||"",l=s==="`"?"GraveAccent":"Tilde";if(_U(t,n)){const p=n.enter("codeIndented"),y=n.indentLines(a,wU);return p(),y}const u=n.createTracker(r),f=s.repeat(Math.max(bU(a,s)+1,3)),d=n.enter("codeFenced");let m=u.move(f);if(t.lang){const p=n.enter(`codeFencedLang${l}`);m+=u.move(n.safe(t.lang,{before:m,after:" ",encode:["`"],...u.current()})),p()}if(t.lang&&t.meta){const p=n.enter(`codeFencedMeta${l}`);m+=u.move(" "),m+=u.move(n.safe(t.meta,{before:m,after:`
`,encode:["`"],...u.current()})),p()}return m+=u.move(`
`),a&&(m+=u.move(a+`
`)),m+=u.move(f),d(),m}function wU(t,e,n){return(n?"":"    ")+t}function s0(t){const e=t.options.quote||'"';if(e!=='"'&&e!=="'")throw new Error("Cannot serialize title with `"+e+"` for `options.quote`, expected `\"`, or `'`");return e}function SU(t,e,n,r){const s=s0(n),a=s==='"'?"Quote":"Apostrophe",l=n.enter("definition");let u=n.enter("label");const f=n.createTracker(r);let d=f.move("[");return d+=f.move(n.safe(n.associationId(t),{before:d,after:"]",...f.current()})),d+=f.move("]: "),u(),!t.url||/[\0- \u007F]/.test(t.url)?(u=n.enter("destinationLiteral"),d+=f.move("<"),d+=f.move(n.safe(t.url,{before:d,after:">",...f.current()})),d+=f.move(">")):(u=n.enter("destinationRaw"),d+=f.move(n.safe(t.url,{before:d,after:t.title?" ":`
`,...f.current()}))),u(),t.title&&(u=n.enter(`title${a}`),d+=f.move(" "+s),d+=f.move(n.safe(t.title,{before:d,after:s,...f.current()})),d+=f.move(s),u()),l(),d}function kU(t){const e=t.options.emphasis||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize emphasis with `"+e+"` for `options.emphasis`, expected `*`, or `_`");return e}function Yl(t){return"&#x"+t.toString(16).toUpperCase()+";"}function Uf(t,e,n){const r=to(t),s=to(e);return r===void 0?s===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:s===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:r===1?s===void 0?{inside:!1,outside:!1}:s===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:s===void 0?{inside:!1,outside:!1}:s===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}pC.peek=EU;function pC(t,e,n,r){const s=kU(n),a=n.enter("emphasis"),l=n.createTracker(r),u=l.move(s);let f=l.move(n.containerPhrasing(t,{after:s,before:u,...l.current()}));const d=f.charCodeAt(0),m=Uf(r.before.charCodeAt(r.before.length-1),d,s);m.inside&&(f=Yl(d)+f.slice(1));const p=f.charCodeAt(f.length-1),y=Uf(r.after.charCodeAt(0),p,s);y.inside&&(f=f.slice(0,-1)+Yl(p));const g=l.move(s);return a(),n.attentionEncodeSurroundingInfo={after:y.outside,before:m.outside},u+f+g}function EU(t,e,n){return n.options.emphasis||"*"}function CU(t,e){let n=!1;return n0(t,function(r){if("value"in r&&/\r?\n|\r/.test(r.value)||r.type==="break")return n=!0,Pg}),!!((!t.depth||t.depth<3)&&Qy(t)&&(e.options.setext||n))}function TU(t,e,n,r){const s=Math.max(Math.min(6,t.depth||1),1),a=n.createTracker(r);if(CU(t,n)){const m=n.enter("headingSetext"),p=n.enter("phrasing"),y=n.containerPhrasing(t,{...a.current(),before:`
`,after:`
`});return p(),m(),y+`
`+(s===1?"=":"-").repeat(y.length-(Math.max(y.lastIndexOf("\r"),y.lastIndexOf(`
`))+1))}const l="#".repeat(s),u=n.enter("headingAtx"),f=n.enter("phrasing");a.move(l+" ");let d=n.containerPhrasing(t,{before:"# ",after:`
`,...a.current()});return/^[\t ]/.test(d)&&(d=Yl(d.charCodeAt(0))+d.slice(1)),d=d?l+" "+d:l,n.options.closeAtx&&(d+=" "+l),f(),u(),d}mC.peek=AU;function mC(t){return t.value||""}function AU(){return"<"}gC.peek=RU;function gC(t,e,n,r){const s=s0(n),a=s==='"'?"Quote":"Apostrophe",l=n.enter("image");let u=n.enter("label");const f=n.createTracker(r);let d=f.move("![");return d+=f.move(n.safe(t.alt,{before:d,after:"]",...f.current()})),d+=f.move("]("),u(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(u=n.enter("destinationLiteral"),d+=f.move("<"),d+=f.move(n.safe(t.url,{before:d,after:">",...f.current()})),d+=f.move(">")):(u=n.enter("destinationRaw"),d+=f.move(n.safe(t.url,{before:d,after:t.title?" ":")",...f.current()}))),u(),t.title&&(u=n.enter(`title${a}`),d+=f.move(" "+s),d+=f.move(n.safe(t.title,{before:d,after:s,...f.current()})),d+=f.move(s),u()),d+=f.move(")"),l(),d}function RU(){return"!"}yC.peek=OU;function yC(t,e,n,r){const s=t.referenceType,a=n.enter("imageReference");let l=n.enter("label");const u=n.createTracker(r);let f=u.move("![");const d=n.safe(t.alt,{before:f,after:"]",...u.current()});f+=u.move(d+"]["),l();const m=n.stack;n.stack=[],l=n.enter("reference");const p=n.safe(n.associationId(t),{before:f,after:"]",...u.current()});return l(),n.stack=m,a(),s==="full"||!d||d!==p?f+=u.move(p+"]"):s==="shortcut"?f=f.slice(0,-1):f+=u.move("]"),f}function OU(){return"!"}bC.peek=NU;function bC(t,e,n){let r=t.value||"",s="`",a=-1;for(;new RegExp("(^|[^`])"+s+"([^`]|$)").test(r);)s+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++a<n.unsafe.length;){const l=n.unsafe[a],u=n.compilePattern(l);let f;if(l.atBreak)for(;f=u.exec(r);){let d=f.index;r.charCodeAt(d)===10&&r.charCodeAt(d-1)===13&&d--,r=r.slice(0,d)+" "+r.slice(f.index+1)}}return s+r+s}function NU(){return"`"}function _C(t,e){const n=Qy(t);return!!(!e.options.resourceLink&&t.url&&!t.title&&t.children&&t.children.length===1&&t.children[0].type==="text"&&(n===t.url||"mailto:"+n===t.url)&&/^[a-z][a-z+.-]+:/i.test(t.url)&&!/[\0- <>\u007F]/.test(t.url))}vC.peek=IU;function vC(t,e,n,r){const s=s0(n),a=s==='"'?"Quote":"Apostrophe",l=n.createTracker(r);let u,f;if(_C(t,n)){const m=n.stack;n.stack=[],u=n.enter("autolink");let p=l.move("<");return p+=l.move(n.containerPhrasing(t,{before:p,after:">",...l.current()})),p+=l.move(">"),u(),n.stack=m,p}u=n.enter("link"),f=n.enter("label");let d=l.move("[");return d+=l.move(n.containerPhrasing(t,{before:d,after:"](",...l.current()})),d+=l.move("]("),f(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(f=n.enter("destinationLiteral"),d+=l.move("<"),d+=l.move(n.safe(t.url,{before:d,after:">",...l.current()})),d+=l.move(">")):(f=n.enter("destinationRaw"),d+=l.move(n.safe(t.url,{before:d,after:t.title?" ":")",...l.current()}))),f(),t.title&&(f=n.enter(`title${a}`),d+=l.move(" "+s),d+=l.move(n.safe(t.title,{before:d,after:s,...l.current()})),d+=l.move(s),f()),d+=l.move(")"),u(),d}function IU(t,e,n){return _C(t,n)?"<":"["}xC.peek=MU;function xC(t,e,n,r){const s=t.referenceType,a=n.enter("linkReference");let l=n.enter("label");const u=n.createTracker(r);let f=u.move("[");const d=n.containerPhrasing(t,{before:f,after:"]",...u.current()});f+=u.move(d+"]["),l();const m=n.stack;n.stack=[],l=n.enter("reference");const p=n.safe(n.associationId(t),{before:f,after:"]",...u.current()});return l(),n.stack=m,a(),s==="full"||!d||d!==p?f+=u.move(p+"]"):s==="shortcut"?f=f.slice(0,-1):f+=u.move("]"),f}function MU(){return"["}function i0(t){const e=t.options.bullet||"*";if(e!=="*"&&e!=="+"&&e!=="-")throw new Error("Cannot serialize items with `"+e+"` for `options.bullet`, expected `*`, `+`, or `-`");return e}function DU(t){const e=i0(t),n=t.options.bulletOther;if(!n)return e==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===e)throw new Error("Expected `bullet` (`"+e+"`) and `bulletOther` (`"+n+"`) to be different");return n}function jU(t){const e=t.options.bulletOrdered||".";if(e!=="."&&e!==")")throw new Error("Cannot serialize items with `"+e+"` for `options.bulletOrdered`, expected `.` or `)`");return e}function wC(t){const e=t.options.rule||"*";if(e!=="*"&&e!=="-"&&e!=="_")throw new Error("Cannot serialize rules with `"+e+"` for `options.rule`, expected `*`, `-`, or `_`");return e}function LU(t,e,n,r){const s=n.enter("list"),a=n.bulletCurrent;let l=t.ordered?jU(n):i0(n);const u=t.ordered?l==="."?")":".":DU(n);let f=e&&n.bulletLastUsed?l===n.bulletLastUsed:!1;if(!t.ordered){const m=t.children?t.children[0]:void 0;if((l==="*"||l==="-")&&m&&(!m.children||!m.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(f=!0),wC(n)===l&&m){let p=-1;for(;++p<t.children.length;){const y=t.children[p];if(y&&y.type==="listItem"&&y.children&&y.children[0]&&y.children[0].type==="thematicBreak"){f=!0;break}}}}f&&(l=u),n.bulletCurrent=l;const d=n.containerFlow(t,r);return n.bulletLastUsed=l,n.bulletCurrent=a,s(),d}function zU(t){const e=t.options.listItemIndent||"one";if(e!=="tab"&&e!=="one"&&e!=="mixed")throw new Error("Cannot serialize items with `"+e+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return e}function PU(t,e,n,r){const s=zU(n);let a=n.bulletCurrent||i0(n);e&&e.type==="list"&&e.ordered&&(a=(typeof e.start=="number"&&e.start>-1?e.start:1)+(n.options.incrementListMarker===!1?0:e.children.indexOf(t))+a);let l=a.length+1;(s==="tab"||s==="mixed"&&(e&&e.type==="list"&&e.spread||t.spread))&&(l=Math.ceil(l/4)*4);const u=n.createTracker(r);u.move(a+" ".repeat(l-a.length)),u.shift(l);const f=n.enter("listItem"),d=n.indentLines(n.containerFlow(t,u.current()),m);return f(),d;function m(p,y,g){return y?(g?"":" ".repeat(l))+p:(g?a:a+" ".repeat(l-a.length))+p}}function BU(t,e,n,r){const s=n.enter("paragraph"),a=n.enter("phrasing"),l=n.containerPhrasing(t,r);return a(),s(),l}const $U=yd(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function UU(t,e,n,r){return(t.children.some(function(l){return $U(l)})?n.containerPhrasing:n.containerFlow).call(n,t,r)}function qU(t){const e=t.options.strong||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize strong with `"+e+"` for `options.strong`, expected `*`, or `_`");return e}SC.peek=FU;function SC(t,e,n,r){const s=qU(n),a=n.enter("strong"),l=n.createTracker(r),u=l.move(s+s);let f=l.move(n.containerPhrasing(t,{after:s,before:u,...l.current()}));const d=f.charCodeAt(0),m=Uf(r.before.charCodeAt(r.before.length-1),d,s);m.inside&&(f=Yl(d)+f.slice(1));const p=f.charCodeAt(f.length-1),y=Uf(r.after.charCodeAt(0),p,s);y.inside&&(f=f.slice(0,-1)+Yl(p));const g=l.move(s+s);return a(),n.attentionEncodeSurroundingInfo={after:y.outside,before:m.outside},u+f+g}function FU(t,e,n){return n.options.strong||"*"}function VU(t,e,n,r){return n.safe(t.value,r)}function HU(t){const e=t.options.ruleRepetition||3;if(e<3)throw new Error("Cannot serialize rules with repetition `"+e+"` for `options.ruleRepetition`, expected `3` or more");return e}function GU(t,e,n){const r=(wC(n)+(n.options.ruleSpaces?" ":"")).repeat(HU(n));return n.options.ruleSpaces?r.slice(0,-1):r}const kC={blockquote:mU,break:J1,code:xU,definition:SU,emphasis:pC,hardBreak:J1,heading:TU,html:mC,image:gC,imageReference:yC,inlineCode:bC,link:vC,linkReference:xC,list:LU,listItem:PU,paragraph:BU,root:UU,strong:SC,text:VU,thematicBreak:GU};function KU(){return{enter:{table:ZU,tableData:Y1,tableHeader:Y1,tableRow:JU},exit:{codeText:YU,table:QU,tableData:Mm,tableHeader:Mm,tableRow:Mm}}}function ZU(t){const e=t._align;this.enter({type:"table",align:e.map(function(n){return n==="none"?null:n}),children:[]},t),this.data.inTable=!0}function QU(t){this.exit(t),this.data.inTable=void 0}function JU(t){this.enter({type:"tableRow",children:[]},t)}function Mm(t){this.exit(t)}function Y1(t){this.enter({type:"tableCell",children:[]},t)}function YU(t){let e=this.resume();this.data.inTable&&(e=e.replace(/\\([\\|])/g,XU));const n=this.stack[this.stack.length-1];n.type,n.value=e,this.exit(t)}function XU(t,e){return e==="|"?e:t}function WU(t){const e=t||{},n=e.tableCellPadding,r=e.tablePipeAlign,s=e.stringLength,a=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:y,table:l,tableCell:f,tableRow:u}};function l(g,v,x,C){return d(m(g,x,C),g.align)}function u(g,v,x,C){const k=p(g,x,C),T=d([k]);return T.slice(0,T.indexOf(`
`))}function f(g,v,x,C){const k=x.enter("tableCell"),T=x.enter("phrasing"),A=x.containerPhrasing(g,{...C,before:a,after:a});return T(),k(),A}function d(g,v){return hU(g,{align:v,alignDelimiters:r,padding:n,stringLength:s})}function m(g,v,x){const C=g.children;let k=-1;const T=[],A=v.enter("table");for(;++k<C.length;)T[k]=p(C[k],v,x);return A(),T}function p(g,v,x){const C=g.children;let k=-1;const T=[],A=v.enter("tableRow");for(;++k<C.length;)T[k]=f(C[k],g,v,x);return A(),T}function y(g,v,x){let C=kC.inlineCode(g,v,x);return x.stack.includes("tableCell")&&(C=C.replace(/\|/g,"\\$&")),C}}function eq(){return{exit:{taskListCheckValueChecked:X1,taskListCheckValueUnchecked:X1,paragraph:nq}}}function tq(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:rq}}}function X1(t){const e=this.stack[this.stack.length-2];e.type,e.checked=t.type==="taskListCheckValueChecked"}function nq(t){const e=this.stack[this.stack.length-2];if(e&&e.type==="listItem"&&typeof e.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const r=n.children[0];if(r&&r.type==="text"){const s=e.children;let a=-1,l;for(;++a<s.length;){const u=s[a];if(u.type==="paragraph"){l=u;break}}l===n&&(r.value=r.value.slice(1),r.value.length===0?n.children.shift():n.position&&r.position&&typeof r.position.start.offset=="number"&&(r.position.start.column++,r.position.start.offset++,n.position.start=Object.assign({},r.position.start)))}}this.exit(t)}function rq(t,e,n,r){const s=t.children[0],a=typeof t.checked=="boolean"&&s&&s.type==="paragraph",l="["+(t.checked?"x":" ")+"] ",u=n.createTracker(r);a&&u.move(l);let f=kC.listItem(t,e,n,{...r,...u.current()});return a&&(f=f.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,d)),f;function d(m){return m+l}}function sq(){return[L$(),rU(),oU(),KU(),eq()]}function iq(t){return{extensions:[z$(),sU(t),lU(),WU(t),tq()]}}const aq={tokenize:dq,partial:!0},EC={tokenize:hq,partial:!0},CC={tokenize:pq,partial:!0},TC={tokenize:mq,partial:!0},oq={tokenize:gq,partial:!0},AC={name:"wwwAutolink",tokenize:uq,previous:OC},RC={name:"protocolAutolink",tokenize:fq,previous:NC},Ss={name:"emailAutolink",tokenize:cq,previous:IC},Yr={};function lq(){return{text:Yr}}let Ai=48;for(;Ai<123;)Yr[Ai]=Ss,Ai++,Ai===58?Ai=65:Ai===91&&(Ai=97);Yr[43]=Ss;Yr[45]=Ss;Yr[46]=Ss;Yr[95]=Ss;Yr[72]=[Ss,RC];Yr[104]=[Ss,RC];Yr[87]=[Ss,AC];Yr[119]=[Ss,AC];function cq(t,e,n){const r=this;let s,a;return l;function l(p){return!qg(p)||!IC.call(r,r.previous)||a0(r.events)?n(p):(t.enter("literalAutolink"),t.enter("literalAutolinkEmail"),u(p))}function u(p){return qg(p)?(t.consume(p),u):p===64?(t.consume(p),f):n(p)}function f(p){return p===46?t.check(oq,m,d)(p):p===45||p===95||En(p)?(a=!0,t.consume(p),f):m(p)}function d(p){return t.consume(p),s=!0,f}function m(p){return a&&s&&In(r.previous)?(t.exit("literalAutolinkEmail"),t.exit("literalAutolink"),e(p)):n(p)}}function uq(t,e,n){const r=this;return s;function s(l){return l!==87&&l!==119||!OC.call(r,r.previous)||a0(r.events)?n(l):(t.enter("literalAutolink"),t.enter("literalAutolinkWww"),t.check(aq,t.attempt(EC,t.attempt(CC,a),n),n)(l))}function a(l){return t.exit("literalAutolinkWww"),t.exit("literalAutolink"),e(l)}}function fq(t,e,n){const r=this;let s="",a=!1;return l;function l(p){return(p===72||p===104)&&NC.call(r,r.previous)&&!a0(r.events)?(t.enter("literalAutolink"),t.enter("literalAutolinkHttp"),s+=String.fromCodePoint(p),t.consume(p),u):n(p)}function u(p){if(In(p)&&s.length<5)return s+=String.fromCodePoint(p),t.consume(p),u;if(p===58){const y=s.toLowerCase();if(y==="http"||y==="https")return t.consume(p),f}return n(p)}function f(p){return p===47?(t.consume(p),a?d:(a=!0,f)):n(p)}function d(p){return p===null||Pf(p)||yt(p)||Pi(p)||pd(p)?n(p):t.attempt(EC,t.attempt(CC,m),n)(p)}function m(p){return t.exit("literalAutolinkHttp"),t.exit("literalAutolink"),e(p)}}function dq(t,e,n){let r=0;return s;function s(l){return(l===87||l===119)&&r<3?(r++,t.consume(l),s):l===46&&r===3?(t.consume(l),a):n(l)}function a(l){return l===null?n(l):e(l)}}function hq(t,e,n){let r,s,a;return l;function l(d){return d===46||d===95?t.check(TC,f,u)(d):d===null||yt(d)||Pi(d)||d!==45&&pd(d)?f(d):(a=!0,t.consume(d),l)}function u(d){return d===95?r=!0:(s=r,r=void 0),t.consume(d),l}function f(d){return s||r||!a?n(d):e(d)}}function pq(t,e){let n=0,r=0;return s;function s(l){return l===40?(n++,t.consume(l),s):l===41&&r<n?a(l):l===33||l===34||l===38||l===39||l===41||l===42||l===44||l===46||l===58||l===59||l===60||l===63||l===93||l===95||l===126?t.check(TC,e,a)(l):l===null||yt(l)||Pi(l)?e(l):(t.consume(l),s)}function a(l){return l===41&&r++,t.consume(l),s}}function mq(t,e,n){return r;function r(u){return u===33||u===34||u===39||u===41||u===42||u===44||u===46||u===58||u===59||u===63||u===95||u===126?(t.consume(u),r):u===38?(t.consume(u),a):u===93?(t.consume(u),s):u===60||u===null||yt(u)||Pi(u)?e(u):n(u)}function s(u){return u===null||u===40||u===91||yt(u)||Pi(u)?e(u):r(u)}function a(u){return In(u)?l(u):n(u)}function l(u){return u===59?(t.consume(u),r):In(u)?(t.consume(u),l):n(u)}}function gq(t,e,n){return r;function r(a){return t.consume(a),s}function s(a){return En(a)?n(a):e(a)}}function OC(t){return t===null||t===40||t===42||t===95||t===91||t===93||t===126||yt(t)}function NC(t){return!In(t)}function IC(t){return!(t===47||qg(t))}function qg(t){return t===43||t===45||t===46||t===95||En(t)}function a0(t){let e=t.length,n=!1;for(;e--;){const r=t[e][1];if((r.type==="labelLink"||r.type==="labelImage")&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return t.length>0&&!n&&(t[t.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const yq={tokenize:Eq,partial:!0};function bq(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:wq,continuation:{tokenize:Sq},exit:kq}},text:{91:{name:"gfmFootnoteCall",tokenize:xq},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:_q,resolveTo:vq}}}}function _q(t,e,n){const r=this;let s=r.events.length;const a=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let l;for(;s--;){const f=r.events[s][1];if(f.type==="labelImage"){l=f;break}if(f.type==="gfmFootnoteCall"||f.type==="labelLink"||f.type==="label"||f.type==="image"||f.type==="link")break}return u;function u(f){if(!l||!l._balanced)return n(f);const d=Mr(r.sliceSerialize({start:l.end,end:r.now()}));return d.codePointAt(0)!==94||!a.includes(d.slice(1))?n(f):(t.enter("gfmFootnoteCallLabelMarker"),t.consume(f),t.exit("gfmFootnoteCallLabelMarker"),e(f))}}function vq(t,e){let n=t.length;for(;n--;)if(t[n][1].type==="labelImage"&&t[n][0]==="enter"){t[n][1];break}t[n+1][1].type="data",t[n+3][1].type="gfmFootnoteCallLabelMarker";const r={type:"gfmFootnoteCall",start:Object.assign({},t[n+3][1].start),end:Object.assign({},t[t.length-1][1].end)},s={type:"gfmFootnoteCallMarker",start:Object.assign({},t[n+3][1].end),end:Object.assign({},t[n+3][1].end)};s.end.column++,s.end.offset++,s.end._bufferIndex++;const a={type:"gfmFootnoteCallString",start:Object.assign({},s.end),end:Object.assign({},t[t.length-1][1].start)},l={type:"chunkString",contentType:"string",start:Object.assign({},a.start),end:Object.assign({},a.end)},u=[t[n+1],t[n+2],["enter",r,e],t[n+3],t[n+4],["enter",s,e],["exit",s,e],["enter",a,e],["enter",l,e],["exit",l,e],["exit",a,e],t[t.length-2],t[t.length-1],["exit",r,e]];return t.splice(n,t.length-n+1,...u),t}function xq(t,e,n){const r=this,s=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let a=0,l;return u;function u(p){return t.enter("gfmFootnoteCall"),t.enter("gfmFootnoteCallLabelMarker"),t.consume(p),t.exit("gfmFootnoteCallLabelMarker"),f}function f(p){return p!==94?n(p):(t.enter("gfmFootnoteCallMarker"),t.consume(p),t.exit("gfmFootnoteCallMarker"),t.enter("gfmFootnoteCallString"),t.enter("chunkString").contentType="string",d)}function d(p){if(a>999||p===93&&!l||p===null||p===91||yt(p))return n(p);if(p===93){t.exit("chunkString");const y=t.exit("gfmFootnoteCallString");return s.includes(Mr(r.sliceSerialize(y)))?(t.enter("gfmFootnoteCallLabelMarker"),t.consume(p),t.exit("gfmFootnoteCallLabelMarker"),t.exit("gfmFootnoteCall"),e):n(p)}return yt(p)||(l=!0),a++,t.consume(p),p===92?m:d}function m(p){return p===91||p===92||p===93?(t.consume(p),a++,d):d(p)}}function wq(t,e,n){const r=this,s=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let a,l=0,u;return f;function f(v){return t.enter("gfmFootnoteDefinition")._container=!0,t.enter("gfmFootnoteDefinitionLabel"),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(v),t.exit("gfmFootnoteDefinitionLabelMarker"),d}function d(v){return v===94?(t.enter("gfmFootnoteDefinitionMarker"),t.consume(v),t.exit("gfmFootnoteDefinitionMarker"),t.enter("gfmFootnoteDefinitionLabelString"),t.enter("chunkString").contentType="string",m):n(v)}function m(v){if(l>999||v===93&&!u||v===null||v===91||yt(v))return n(v);if(v===93){t.exit("chunkString");const x=t.exit("gfmFootnoteDefinitionLabelString");return a=Mr(r.sliceSerialize(x)),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(v),t.exit("gfmFootnoteDefinitionLabelMarker"),t.exit("gfmFootnoteDefinitionLabel"),y}return yt(v)||(u=!0),l++,t.consume(v),v===92?p:m}function p(v){return v===91||v===92||v===93?(t.consume(v),l++,m):m(v)}function y(v){return v===58?(t.enter("definitionMarker"),t.consume(v),t.exit("definitionMarker"),s.includes(a)||s.push(a),st(t,g,"gfmFootnoteDefinitionWhitespace")):n(v)}function g(v){return e(v)}}function Sq(t,e,n){return t.check(cc,e,t.attempt(yq,e,n))}function kq(t){t.exit("gfmFootnoteDefinition")}function Eq(t,e,n){const r=this;return st(t,s,"gfmFootnoteDefinitionIndent",5);function s(a){const l=r.events[r.events.length-1];return l&&l[1].type==="gfmFootnoteDefinitionIndent"&&l[2].sliceSerialize(l[1],!0).length===4?e(a):n(a)}}function Cq(t){let n=(t||{}).singleTilde;const r={name:"strikethrough",tokenize:a,resolveAll:s};return n==null&&(n=!0),{text:{126:r},insideSpan:{null:[r]},attentionMarkers:{null:[126]}};function s(l,u){let f=-1;for(;++f<l.length;)if(l[f][0]==="enter"&&l[f][1].type==="strikethroughSequenceTemporary"&&l[f][1]._close){let d=f;for(;d--;)if(l[d][0]==="exit"&&l[d][1].type==="strikethroughSequenceTemporary"&&l[d][1]._open&&l[f][1].end.offset-l[f][1].start.offset===l[d][1].end.offset-l[d][1].start.offset){l[f][1].type="strikethroughSequence",l[d][1].type="strikethroughSequence";const m={type:"strikethrough",start:Object.assign({},l[d][1].start),end:Object.assign({},l[f][1].end)},p={type:"strikethroughText",start:Object.assign({},l[d][1].end),end:Object.assign({},l[f][1].start)},y=[["enter",m,u],["enter",l[d][1],u],["exit",l[d][1],u],["enter",p,u]],g=u.parser.constructs.insideSpan.null;g&&ar(y,y.length,0,md(g,l.slice(d+1,f),u)),ar(y,y.length,0,[["exit",p,u],["enter",l[f][1],u],["exit",l[f][1],u],["exit",m,u]]),ar(l,d-1,f-d+3,y),f=d+y.length-2;break}}for(f=-1;++f<l.length;)l[f][1].type==="strikethroughSequenceTemporary"&&(l[f][1].type="data");return l}function a(l,u,f){const d=this.previous,m=this.events;let p=0;return y;function y(v){return d===126&&m[m.length-1][1].type!=="characterEscape"?f(v):(l.enter("strikethroughSequenceTemporary"),g(v))}function g(v){const x=to(d);if(v===126)return p>1?f(v):(l.consume(v),p++,g);if(p<2&&!n)return f(v);const C=l.exit("strikethroughSequenceTemporary"),k=to(v);return C._open=!k||k===2&&!!x,C._close=!x||x===2&&!!k,u(v)}}}class Tq{constructor(){this.map=[]}add(e,n,r){Aq(this,e,n,r)}consume(e){if(this.map.sort(function(a,l){return a[0]-l[0]}),this.map.length===0)return;let n=this.map.length;const r=[];for(;n>0;)n-=1,r.push(e.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),e.length=this.map[n][0];r.push(e.slice()),e.length=0;let s=r.pop();for(;s;){for(const a of s)e.push(a);s=r.pop()}this.map.length=0}}function Aq(t,e,n,r){let s=0;if(!(n===0&&r.length===0)){for(;s<t.map.length;){if(t.map[s][0]===e){t.map[s][1]+=n,t.map[s][2].push(...r);return}s+=1}t.map.push([e,n,r])}}function Rq(t,e){let n=!1;const r=[];for(;e<t.length;){const s=t[e];if(n){if(s[0]==="enter")s[1].type==="tableContent"&&r.push(t[e+1][1].type==="tableDelimiterMarker"?"left":"none");else if(s[1].type==="tableContent"){if(t[e-1][1].type==="tableDelimiterMarker"){const a=r.length-1;r[a]=r[a]==="left"?"center":"right"}}else if(s[1].type==="tableDelimiterRow")break}else s[0]==="enter"&&s[1].type==="tableDelimiterRow"&&(n=!0);e+=1}return r}function Oq(){return{flow:{null:{name:"table",tokenize:Nq,resolveAll:Iq}}}}function Nq(t,e,n){const r=this;let s=0,a=0,l;return u;function u(j){let J=r.events.length-1;for(;J>-1;){const Y=r.events[J][1].type;if(Y==="lineEnding"||Y==="linePrefix")J--;else break}const ne=J>-1?r.events[J][1].type:null,he=ne==="tableHead"||ne==="tableRow"?O:f;return he===O&&r.parser.lazy[r.now().line]?n(j):he(j)}function f(j){return t.enter("tableHead"),t.enter("tableRow"),d(j)}function d(j){return j===124||(l=!0,a+=1),m(j)}function m(j){return j===null?n(j):Oe(j)?a>1?(a=0,r.interrupt=!0,t.exit("tableRow"),t.enter("lineEnding"),t.consume(j),t.exit("lineEnding"),g):n(j):Je(j)?st(t,m,"whitespace")(j):(a+=1,l&&(l=!1,s+=1),j===124?(t.enter("tableCellDivider"),t.consume(j),t.exit("tableCellDivider"),l=!0,m):(t.enter("data"),p(j)))}function p(j){return j===null||j===124||yt(j)?(t.exit("data"),m(j)):(t.consume(j),j===92?y:p)}function y(j){return j===92||j===124?(t.consume(j),p):p(j)}function g(j){return r.interrupt=!1,r.parser.lazy[r.now().line]?n(j):(t.enter("tableDelimiterRow"),l=!1,Je(j)?st(t,v,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(j):v(j))}function v(j){return j===45||j===58?C(j):j===124?(l=!0,t.enter("tableCellDivider"),t.consume(j),t.exit("tableCellDivider"),x):I(j)}function x(j){return Je(j)?st(t,C,"whitespace")(j):C(j)}function C(j){return j===58?(a+=1,l=!0,t.enter("tableDelimiterMarker"),t.consume(j),t.exit("tableDelimiterMarker"),k):j===45?(a+=1,k(j)):j===null||Oe(j)?M(j):I(j)}function k(j){return j===45?(t.enter("tableDelimiterFiller"),T(j)):I(j)}function T(j){return j===45?(t.consume(j),T):j===58?(l=!0,t.exit("tableDelimiterFiller"),t.enter("tableDelimiterMarker"),t.consume(j),t.exit("tableDelimiterMarker"),A):(t.exit("tableDelimiterFiller"),A(j))}function A(j){return Je(j)?st(t,M,"whitespace")(j):M(j)}function M(j){return j===124?v(j):j===null||Oe(j)?!l||s!==a?I(j):(t.exit("tableDelimiterRow"),t.exit("tableHead"),e(j)):I(j)}function I(j){return n(j)}function O(j){return t.enter("tableRow"),B(j)}function B(j){return j===124?(t.enter("tableCellDivider"),t.consume(j),t.exit("tableCellDivider"),B):j===null||Oe(j)?(t.exit("tableRow"),e(j)):Je(j)?st(t,B,"whitespace")(j):(t.enter("data"),U(j))}function U(j){return j===null||j===124||yt(j)?(t.exit("data"),B(j)):(t.consume(j),j===92?K:U)}function K(j){return j===92||j===124?(t.consume(j),U):U(j)}}function Iq(t,e){let n=-1,r=!0,s=0,a=[0,0,0,0],l=[0,0,0,0],u=!1,f=0,d,m,p;const y=new Tq;for(;++n<t.length;){const g=t[n],v=g[1];g[0]==="enter"?v.type==="tableHead"?(u=!1,f!==0&&(W1(y,e,f,d,m),m=void 0,f=0),d={type:"table",start:Object.assign({},v.start),end:Object.assign({},v.end)},y.add(n,0,[["enter",d,e]])):v.type==="tableRow"||v.type==="tableDelimiterRow"?(r=!0,p=void 0,a=[0,0,0,0],l=[0,n+1,0,0],u&&(u=!1,m={type:"tableBody",start:Object.assign({},v.start),end:Object.assign({},v.end)},y.add(n,0,[["enter",m,e]])),s=v.type==="tableDelimiterRow"?2:m?3:1):s&&(v.type==="data"||v.type==="tableDelimiterMarker"||v.type==="tableDelimiterFiller")?(r=!1,l[2]===0&&(a[1]!==0&&(l[0]=l[1],p=zu(y,e,a,s,void 0,p),a=[0,0,0,0]),l[2]=n)):v.type==="tableCellDivider"&&(r?r=!1:(a[1]!==0&&(l[0]=l[1],p=zu(y,e,a,s,void 0,p)),a=l,l=[a[1],n,0,0])):v.type==="tableHead"?(u=!0,f=n):v.type==="tableRow"||v.type==="tableDelimiterRow"?(f=n,a[1]!==0?(l[0]=l[1],p=zu(y,e,a,s,n,p)):l[1]!==0&&(p=zu(y,e,l,s,n,p)),s=0):s&&(v.type==="data"||v.type==="tableDelimiterMarker"||v.type==="tableDelimiterFiller")&&(l[3]=n)}for(f!==0&&W1(y,e,f,d,m),y.consume(e.events),n=-1;++n<e.events.length;){const g=e.events[n];g[0]==="enter"&&g[1].type==="table"&&(g[1]._align=Rq(e.events,n))}return t}function zu(t,e,n,r,s,a){const l=r===1?"tableHeader":r===2?"tableDelimiter":"tableData",u="tableContent";n[0]!==0&&(a.end=Object.assign({},La(e.events,n[0])),t.add(n[0],0,[["exit",a,e]]));const f=La(e.events,n[1]);if(a={type:l,start:Object.assign({},f),end:Object.assign({},f)},t.add(n[1],0,[["enter",a,e]]),n[2]!==0){const d=La(e.events,n[2]),m=La(e.events,n[3]),p={type:u,start:Object.assign({},d),end:Object.assign({},m)};if(t.add(n[2],0,[["enter",p,e]]),r!==2){const y=e.events[n[2]],g=e.events[n[3]];if(y[1].end=Object.assign({},g[1].end),y[1].type="chunkText",y[1].contentType="text",n[3]>n[2]+1){const v=n[2]+1,x=n[3]-n[2]-1;t.add(v,x,[])}}t.add(n[3]+1,0,[["exit",p,e]])}return s!==void 0&&(a.end=Object.assign({},La(e.events,s)),t.add(s,0,[["exit",a,e]]),a=void 0),a}function W1(t,e,n,r,s){const a=[],l=La(e.events,n);s&&(s.end=Object.assign({},l),a.push(["exit",s,e])),r.end=Object.assign({},l),a.push(["exit",r,e]),t.add(n+1,0,a)}function La(t,e){const n=t[e],r=n[0]==="enter"?"start":"end";return n[1][r]}const Mq={name:"tasklistCheck",tokenize:jq};function Dq(){return{text:{91:Mq}}}function jq(t,e,n){const r=this;return s;function s(f){return r.previous!==null||!r._gfmTasklistFirstContentOfListItem?n(f):(t.enter("taskListCheck"),t.enter("taskListCheckMarker"),t.consume(f),t.exit("taskListCheckMarker"),a)}function a(f){return yt(f)?(t.enter("taskListCheckValueUnchecked"),t.consume(f),t.exit("taskListCheckValueUnchecked"),l):f===88||f===120?(t.enter("taskListCheckValueChecked"),t.consume(f),t.exit("taskListCheckValueChecked"),l):n(f)}function l(f){return f===93?(t.enter("taskListCheckMarker"),t.consume(f),t.exit("taskListCheckMarker"),t.exit("taskListCheck"),u):n(f)}function u(f){return Oe(f)?e(f):Je(f)?t.check({tokenize:Lq},e,n)(f):n(f)}}function Lq(t,e,n){return st(t,r,"whitespace");function r(s){return s===null?n(s):e(s)}}function zq(t){return qE([lq(),bq(),Cq(t),Oq(),Dq()])}const Pq={};function Bq(t){const e=this,n=t||Pq,r=e.data(),s=r.micromarkExtensions||(r.micromarkExtensions=[]),a=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),l=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);s.push(zq(n)),a.push(sq()),l.push(iq(n))}function $q(t){cC(t,[/\r?\n|\r/g,Uq])}function Uq(){return{type:"break"}}function qq(){return function(t){$q(t)}}const Fq={pre:({children:t})=>w.jsx(w.Fragment,{children:t}),li:({children:t,...e})=>w.jsx("li",{className:"py-0.5 ml-0",...e,children:t}),ul:({children:t,...e})=>w.jsx("ul",{className:"list-disc list-outside ml-5 pl-0 my-2",...e,children:t}),ol:({children:t,...e})=>w.jsx("ol",{className:"list-decimal list-outside ml-5 pl-0 my-2",...e,children:t}),strong:({children:t,...e})=>w.jsx("span",{className:"font-semibold",...e,children:t}),a:({children:t,href:e,...n})=>{let r=e||"";return r&&!r.startsWith("http")&&!r.startsWith("#")&&(r=`https://${r}`),w.jsx("a",{className:"text-sky-400 hover:underline",href:r,target:"_blank",rel:"noreferrer noopener",...n,children:t})},h1:({children:t,...e})=>w.jsx("h1",{className:"text-xl font-semibold mt-4 mb-2",...e,children:t}),h2:({children:t,...e})=>w.jsx("h2",{className:"text-lg font-semibold mt-4 mb-2",...e,children:t}),h3:({children:t,...e})=>w.jsx("h3",{className:"text-base font-semibold mt-3 mb-1",...e,children:t}),h4:({children:t,...e})=>w.jsx("h4",{className:"text-sm font-semibold mt-3 mb-1",...e,children:t}),h5:({children:t,...e})=>w.jsx("h5",{className:"text-sm font-semibold mt-2 mb-1",...e,children:t}),h6:({children:t,...e})=>w.jsx("h6",{className:"text-xs font-semibold mt-2 mb-1",...e,children:t}),p:({children:t,...e})=>w.jsx("p",{className:"my-2 leading-relaxed",...e,children:t}),table:({children:t,...e})=>w.jsx("div",{className:"overflow-x-auto my-3",children:w.jsx("table",{className:"w-full border-collapse border border-neutral-600 text-xs",...e,children:t})}),thead:({children:t,...e})=>w.jsx("thead",{className:"bg-neutral-700",...e,children:t}),tbody:({children:t,...e})=>w.jsx("tbody",{...e,children:t}),tr:({children:t,...e})=>w.jsx("tr",{className:"border-b border-neutral-600",...e,children:t}),th:({children:t,...e})=>w.jsx("th",{className:"p-2 text-left font-semibold border-r last:border-r-0 border-neutral-600",...e,children:t}),td:({children:t,...e})=>w.jsx("td",{className:"p-2 border-r last:border-r-0 border-neutral-600",...e,children:t}),blockquote:({children:t,...e})=>w.jsx("blockquote",{className:"border-l-4 border-neutral-500 pl-3 py-1 my-2 italic text-neutral-300",...e,children:t}),hr:({...t})=>w.jsx("hr",{className:"my-4 border-neutral-600",...t}),code({children:t,className:e,...n}){const r=/language-(\w+)/.exec(e||""),s=String(t).replace(/\n$/,""),a=s.includes(`
`);if(!r&&!a)return w.jsx("code",{...n,className:`${e||""} bg-neutral-700 px-1.5 py-0.5 rounded text-xs font-mono text-sky-300`,children:t});const l=r?.[1]||"text";return w.jsxs("div",{className:"my-3",children:[w.jsx("div",{className:"flex items-center justify-between bg-neutral-700 px-3 py-1 rounded-t text-xs text-neutral-400",children:w.jsx("span",{children:l})}),w.jsx("pre",{className:"bg-neutral-800 p-3 rounded-b overflow-x-auto",children:w.jsx("code",{className:"text-xs font-mono text-neutral-200",children:s})})]})}},Vq=[Bq,qq],Hq=t=>{const e=qe.c(6),{children:n}=t;if(!n)return null;let r=n,s;if(e[0]!==r){r=r.replace(/^(#{1,6}\s+.+)\n```/gm,"$1\n\n```");let l;e[3]===Symbol.for("react.memo_cache_sentinel")?(l=/```\n(#{1,6}\s+)/gm,e[3]=l):l=e[3],s=r.replace(l,"```\n\n$1"),e[0]=r,e[1]=s,e[2]=r}else s=e[1],r=e[2];r=s;let a;return e[4]!==r?(a=w.jsx(T$,{remarkPlugins:Vq,components:Fq,children:r}),e[4]=r,e[5]=a):a=e[5],a},MC=G.memo(Hq,(t,e)=>t.children===e.children);function eS(t,e="image/png"){const n=atob(t),r=new Array(n.length);for(let a=0;a<n.length;a++)r[a]=n.charCodeAt(a);const s=new Uint8Array(r);return new Blob([s],{type:e})}function Gq(){const t=qe.c(33),{request:e}=gn(),n=e?.openai?.response,r=n?.result;let s;e:{if(!r||r.type!=="image"||!r.image){s=null;break e}if(!r.image.startsWith("http")){let d;if(t[0]!==r.image){const m=eS(r.image,"image/png");d=URL.createObjectURL(m),t[0]=r.image,t[1]=d}else d=t[1];s=d;break e}s=r.image}const a=s;let l;e:{if(!r||r.type!=="audio"||!r.audio){l=null;break e}let d;if(t[2]!==r.audio){const m=eS(r.audio,"audio/mpeg");d=URL.createObjectURL(m),t[2]=r.audio,t[3]=d}else d=t[3];l=d}const u=l;if(!n)return null;if(!r){let d;return t[4]===Symbol.for("react.memo_cache_sentinel")?(d=w.jsx("div",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:"No response data"}),t[4]=d):d=t[4],d}if(r.type==="text"){let d;return t[5]!==r.text?(d=w.jsx("div",{className:"h-full overflow-auto",children:w.jsx("div",{className:"prose prose-sm dark:prose-invert max-w-none prose-pre:bg-neutral-100 dark:prose-pre:bg-neutral-800 prose-pre:text-neutral-800 dark:prose-pre:text-neutral-200 prose-code:text-violet-600 dark:prose-code:text-violet-400 prose-code:before:content-none prose-code:after:content-none",children:w.jsx(MC,{children:r.text})})}),t[5]=r.text,t[6]=d):d=t[6],d}if(r.type==="image"){if(!r.image){let p;return t[7]===Symbol.for("react.memo_cache_sentinel")?(p=w.jsx("div",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:"No image data"}),t[7]=p):p=t[7],p}let d;t[8]!==a?(d=a&&w.jsx("img",{src:a,alt:"Generated image",className:"max-w-full h-auto object-contain rounded-lg shadow-lg"}),t[8]=a,t[9]=d):d=t[9];let m;return t[10]!==d?(m=w.jsx("div",{className:"h-full overflow-auto",children:w.jsx("div",{className:"flex items-center justify-center p-4",children:d})}),t[10]=d,t[11]=m):m=t[11],m}if(r.type==="audio"){if(!r.audio){let g;return t[12]===Symbol.for("react.memo_cache_sentinel")?(g=w.jsx("div",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:"No audio data"}),t[12]=g):g=t[12],g}let d;t[13]===Symbol.for("react.memo_cache_sentinel")?(d=w.jsx("div",{className:"text-sm font-medium text-neutral-700 dark:text-neutral-300",children:"Generated Audio"}),t[13]=d):d=t[13];let m;t[14]!==u?(m=u&&w.jsx("audio",{controls:!0,src:u,className:"w-full max-w-md",preload:"auto",children:"Your browser does not support the audio element."}),t[14]=u,t[15]=m):m=t[15];let p;t[16]!==u?(p=u&&w.jsx("a",{href:u,download:"generated-audio.mp3",className:"text-sm text-violet-600 dark:text-violet-400 hover:underline",children:"Download Audio"}),t[16]=u,t[17]=p):p=t[17];let y;return t[18]!==m||t[19]!==p?(y=w.jsx("div",{className:"h-full overflow-auto",children:w.jsxs("div",{className:"flex flex-col items-center justify-center p-4 space-y-4",children:[d,m,p]})}),t[18]=m,t[19]=p,t[20]=y):y=t[20],y}if(r.type==="transcription"){let d;return t[21]!==r.text?(d=w.jsx("div",{className:"h-full overflow-auto",children:w.jsx("div",{className:"prose prose-sm dark:prose-invert max-w-none prose-pre:bg-neutral-100 dark:prose-pre:bg-neutral-800 prose-pre:text-neutral-800 dark:prose-pre:text-neutral-200 prose-code:text-violet-600 dark:prose-code:text-violet-400 prose-code:before:content-none prose-code:after:content-none",children:w.jsx("div",{className:"p-4",children:w.jsx("div",{className:"text-sm text-neutral-800 dark:text-neutral-100 whitespace-pre-wrap",children:r.text})})})}),t[21]=r.text,t[22]=d):d=t[22],d}if(r.type==="embeddings"){let d;t[23]!==r.embeddings.length?(d=w.jsxs("div",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:[r.embeddings.length," dimensions"]}),t[23]=r.embeddings.length,t[24]=d):d=t[24];let m;t[25]!==r.embeddings?(m=JSON.stringify(r.embeddings,null,2),t[25]=r.embeddings,t[26]=m):m=t[26];let p;t[27]!==m?(p=w.jsx("pre",{className:"text-xs overflow-auto text-neutral-800 dark:text-neutral-200",children:m}),t[27]=m,t[28]=p):p=t[28];let y;return t[29]!==d||t[30]!==p?(y=w.jsx("div",{className:"h-full overflow-auto",children:w.jsxs("div",{className:"p-4 space-y-2",children:[d,p]})}),t[29]=d,t[30]=p,t[31]=y):y=t[31],y}let f;return t[32]===Symbol.for("react.memo_cache_sentinel")?(f=w.jsx("div",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:"Unknown response type"}),t[32]=f):f=t[32],f}function Dm(t){return t<1e3?`${t}ms`:t<6e4?`${(t/1e3).toFixed(2)}s`:`${(t/6e4).toFixed(2)}m`}function Kq(t){return t>=200&&t<300?"text-emerald-600 dark:text-emerald-400":t>=300&&t<400?"text-amber-600 dark:text-amber-400":t>=400&&t<500?"text-orange-600 dark:text-orange-400":t>=500?"text-red-600 dark:text-red-400":"text-neutral-600 dark:text-neutral-400"}function jm(t){const e=qe.c(16),{statusCode:n,status:r}=t;let s;e[0]!==n?(s=Kq(n),e[0]=n,e[1]=s):s=e[1];const a=s,l=n>=200&&n<300,u=n>=400,f=`flex items-center gap-1.5 px-2 py-1 rounded-md bg-neutral-100 dark:bg-white/5 ${a}`;let d;e[2]!==l?(d=l&&w.jsx(Oy,{size:14}),e[2]=l,e[3]=d):d=e[3];let m;e[4]!==u?(m=u&&w.jsx(J3,{size:14}),e[4]=u,e[5]=m):m=e[5];let p;e[6]!==n?(p=w.jsx("span",{className:"text-xs font-medium",children:n}),e[6]=n,e[7]=p):p=e[7];let y;e[8]!==r?(y=w.jsx("span",{className:"text-xs opacity-75",children:r}),e[8]=r,e[9]=y):y=e[9];let g;return e[10]!==f||e[11]!==d||e[12]!==m||e[13]!==p||e[14]!==y?(g=w.jsxs("div",{className:f,children:[d,m,p,y]}),e[10]=f,e[11]=d,e[12]=m,e[13]=p,e[14]=y,e[15]=g):g=e[15],g}function Zq(){const t=qe.c(43),{request:e}=gn(),[n,r]=G.useState("pretty"),[s,a]=G.useState(!1),l=e?.executing??!1,u=e?.protocol??"rest",f=e?.http?.response,d=e?.grpc?.response,m=e?.mcp?.response,p=e?.mcp?.response?.error,y=e?.openai?.response,g=e?.openai?.response?.error;let v,x,C,k;if(t[0]!==d||t[1]!==f||t[2]!==l||t[3]!==p||t[4]!==m||t[5]!==g||t[6]!==y||t[7]!==u||t[8]!==n){k=Symbol.for("react.early_return_sentinel");e:{x=f??(d?{status:d.error||"OK",statusCode:d.error?0:200,headers:d.metadata??{},body:new Blob([d.body],{type:"application/json"}),duration:d.duration}:void 0);const ne=x?.error??p??g;if(l){let Y;t[13]===Symbol.for("react.memo_cache_sentinel")?(Y=w.jsxs("div",{className:"flex flex-col items-center justify-center h-full min-h-50",children:[w.jsxs("div",{className:"relative mb-4",children:[w.jsx("div",{className:"w-12 h-12 rounded-full border-2 border-zinc-100 dark:border-zinc-800"}),w.jsx("div",{className:"absolute inset-0 w-12 h-12 rounded-full border-2 border-zinc-400 border-t-transparent animate-spin"})]}),w.jsx("span",{className:"text-xs font-medium text-zinc-400 uppercase tracking-widest animate-pulse",children:"Sending Request"})]}),t[13]=Y):Y=t[13],k=Y;break e}if(ne){let Y,q;t[14]===Symbol.for("react.memo_cache_sentinel")?(Y=w.jsx(Lk,{className:"w-5 h-5 text-rose-500 dark:text-rose-400"}),q=w.jsx("h3",{className:"font-semibold text-rose-500 dark:text-rose-400",children:"Error"}),t[14]=Y,t[15]=q):(Y=t[14],q=t[15]);const P=w.jsxs("div",{children:[q,w.jsx("p",{className:"text-sm text-neutral-600 dark:text-neutral-300 mt-1",children:ne})]});let H;t[16]!==P?(H=w.jsx("div",{className:"bg-rose-500/10 border border-rose-500/20 rounded-xl p-4",children:w.jsxs("div",{className:"flex items-center gap-3",children:[Y,P]})}),t[16]=P,t[17]=H):H=t[17],k=H;break e}if(!x&&!m&&!y){let Y;t[18]===Symbol.for("react.memo_cache_sentinel")?(Y=w.jsxs("div",{className:"h-full flex flex-col items-center justify-center",children:[w.jsx(kD,{className:"w-12 h-12 text-neutral-300 dark:text-neutral-600 mb-4"}),w.jsx("p",{className:"text-sm text-neutral-400 dark:text-neutral-500",children:"Hit Send to see what happens"})]}),t[18]=Y):Y=t[18],k=Y;break e}v=()=>{t:switch(u){case"openai":{if(y)return w.jsx(Gq,{});break t}case"mcp":{if(m?.result){const Y="content"in m.result;return w.jsx(EP,{toolResponse:Y?m.result:void 0,resourceResponse:Y?void 0:m.result,viewMode:n})}break t}case"grpc":{if(x)return w.jsx(pP,{response:x,viewMode:n});break t}default:if(x)return w.jsx(uP,{response:x,viewMode:n})}return null};const he=x?.headers?.["content-type"]?.toLowerCase()||"";C=he.includes("image/")||he.includes("video/")||he.includes("audio/")||he.includes("application/pdf")||he.includes("application/octet-stream")}t[0]=d,t[1]=f,t[2]=l,t[3]=p,t[4]=m,t[5]=g,t[6]=y,t[7]=u,t[8]=n,t[9]=v,t[10]=x,t[11]=C,t[12]=k}else v=t[9],x=t[10],C=t[11],k=t[12];if(k!==Symbol.for("react.early_return_sentinel"))return k;const A=!C&&u!=="openai",M=u!=="mcp"&&u!=="openai"&&x;let I;t[19]!==m||t[20]!==y||t[21]!==u||t[22]!==x||t[23]!==s||t[24]!==M||t[25]!==A||t[26]!==n?(I=(x||m||y)&&w.jsxs("div",{className:"flex items-center gap-3 mb-3 shrink-0",children:[x&&w.jsxs(w.Fragment,{children:[w.jsx(jm,{statusCode:x.statusCode,status:x.status}),w.jsxs("div",{className:"flex items-center gap-1 text-xs text-neutral-500 dark:text-neutral-400",children:[w.jsx(Rl,{size:12}),w.jsx("span",{children:Dm(x.duration)})]}),x.body&&w.jsxs("div",{className:"text-xs text-neutral-400 dark:text-neutral-500",children:[(x.body.size/1024).toFixed(2)," KB"]})]}),m&&!x&&w.jsxs(w.Fragment,{children:[w.jsx(jm,{statusCode:200,status:"OK"}),w.jsxs("div",{className:"flex items-center gap-1 text-xs text-neutral-500 dark:text-neutral-400",children:[w.jsx(Rl,{size:12}),w.jsx("span",{children:Dm(m.duration)})]})]}),y&&!x&&!m&&w.jsxs(w.Fragment,{children:[w.jsx(jm,{statusCode:200,status:"OK"}),w.jsxs("div",{className:"flex items-center gap-1 text-xs text-neutral-500 dark:text-neutral-400",children:[w.jsx(Rl,{size:12}),w.jsx("span",{children:Dm(y.duration)})]})]}),w.jsx("div",{className:"flex-1"}),A&&w.jsxs("div",{className:"flex items-center gap-0.5 text-xs",children:[w.jsx("button",{onClick:()=>r("pretty"),className:`px-2 py-0.5 rounded transition-colors ${n==="pretty"?"text-neutral-700 dark:text-neutral-200 font-medium":"text-neutral-400 dark:text-neutral-500 hover:text-neutral-600 dark:hover:text-neutral-300"}`,children:"Pretty"}),w.jsx("span",{className:"text-neutral-300 dark:text-neutral-600",children:"|"}),w.jsx("button",{onClick:()=>r("raw"),className:`px-2 py-0.5 rounded transition-colors ${n==="raw"?"text-neutral-700 dark:text-neutral-200 font-medium":"text-neutral-400 dark:text-neutral-500 hover:text-neutral-600 dark:hover:text-neutral-300"}`,children:"Raw"})]}),M&&w.jsxs("button",{onClick:()=>a(!s),className:`px-2 py-0.5 text-xs rounded transition-colors ${s?"text-neutral-700 dark:text-neutral-200 font-medium":"text-neutral-400 dark:text-neutral-500 hover:text-neutral-600 dark:hover:text-neutral-300"}`,children:[u==="grpc"?"Metadata":"Headers"," (",Object.keys(x.headers).length,")"]})]}),t[19]=m,t[20]=y,t[21]=u,t[22]=x,t[23]=s,t[24]=M,t[25]=A,t[26]=n,t[27]=I):I=t[27];const O=`min-h-0 overflow-hidden transition-all ${s?"flex-2":"flex-1"}`;let B;t[28]!==v?(B=v(),t[28]=v,t[29]=B):B=t[29];let U;t[30]!==O||t[31]!==B?(U=w.jsx("div",{className:O,children:B}),t[30]=O,t[31]=B,t[32]=U):U=t[32];let K;t[33]!==u||t[34]!==x||t[35]!==s?(K=s&&x&&w.jsxs("div",{className:"flex-1 min-w-75 max-w-125 flex flex-col border-l border-neutral-200 dark:border-white/10 pl-3",children:[w.jsxs("div",{className:"text-xs font-medium text-neutral-600 dark:text-neutral-400 mb-2",children:[u==="grpc"?"Metadata":"Headers"," (",Object.keys(x.headers).length,")"]}),w.jsx("div",{className:"flex-1 overflow-auto",children:w.jsx("div",{className:"space-y-2",children:Object.entries(x.headers).map(Qq)})})]}),t[33]=u,t[34]=x,t[35]=s,t[36]=K):K=t[36];let j;t[37]!==U||t[38]!==K?(j=w.jsxs("div",{className:"flex-1 min-h-0 flex gap-3 overflow-hidden",children:[U,K]}),t[37]=U,t[38]=K,t[39]=j):j=t[39];let J;return t[40]!==I||t[41]!==j?(J=w.jsxs("div",{className:"h-full flex flex-col overflow-hidden",children:[I,j]}),t[40]=I,t[41]=j,t[42]=J):J=t[42],J}function Qq(t){const[e,n]=t;return w.jsxs("div",{className:"text-xs",children:[w.jsx("div",{className:"font-mono text-neutral-600 dark:text-neutral-400 mb-0.5",children:e}),w.jsx("div",{className:"font-mono text-neutral-700 dark:text-neutral-200 break-all",children:n})]},e)}function Jq(){const t=qe.c(55),{request:e,newRequest:n,sidebarCollapsed:r,toggleSidebar:s,history:a}=gn(),{setPortalTarget:l}=Mk();if(!e){let he;return t[0]===Symbol.for("react.memo_cache_sentinel")?(he=w.jsx("div",{className:"flex-1 flex items-center justify-center text-neutral-400 dark:text-neutral-500",children:"No active request"}),t[0]=he):he=t[0],he}const u=e.protocol??"rest";let f;t[1]!==a||t[2]!==r||t[3]!==s?(f=r&&a.length>0&&w.jsx("button",{type:"button",onClick:s,className:"p-1.5 hover:bg-neutral-100 dark:hover:bg-white/10 rounded-md transition-colors text-neutral-500 dark:text-neutral-400 hover:text-neutral-700 dark:hover:text-neutral-200",title:"Show sidebar",children:w.jsx(pD,{className:"w-4 h-4"})}),t[1]=a,t[2]=r,t[3]=s,t[4]=f):f=t[4];let d;t[5]===Symbol.for("react.memo_cache_sentinel")?(d=w.jsx(QD,{}),t[5]=d):d=t[5];let m;t[6]!==u?(m=u==="rest"&&w.jsx(nj,{}),t[6]=u,t[7]=m):m=t[7];let p;t[8]!==u?(p=u==="grpc"&&w.jsx(fP,{}),t[8]=u,t[9]=p):p=t[9];let y;t[10]!==u?(y=u==="mcp"&&w.jsx(gP,{}),t[10]=u,t[11]=y):y=t[11];let g;t[12]!==u?(g=u==="openai"&&w.jsx(CP,{}),t[12]=u,t[13]=g):g=t[13];let v;t[14]!==m||t[15]!==p||t[16]!==y||t[17]!==g?(v=w.jsxs("div",{className:"flex-1 flex items-center",children:[m,p,y,g]}),t[14]=m,t[15]=p,t[16]=y,t[17]=g,t[18]=v):v=t[18];let x;t[19]!==l?(x=w.jsx("div",{ref:l,className:"flex items-center gap-1"}),t[19]=l,t[20]=x):x=t[20];let C;t[21]===Symbol.for("react.memo_cache_sentinel")?(C=w.jsx(YD,{}),t[21]=C):C=t[21];let k;t[22]===Symbol.for("react.memo_cache_sentinel")?(k=w.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),t[22]=k):k=t[22];let T;t[23]!==n?(T=w.jsx("button",{onClick:n,className:"p-1.5 hover:bg-neutral-100 dark:hover:bg-white/10 rounded-md transition-colors text-neutral-500 dark:text-neutral-400 hover:text-neutral-700 dark:hover:text-neutral-200",title:"New request",children:k}),t[23]=n,t[24]=T):T=t[24];let A;t[25]!==f||t[26]!==T||t[27]!==v||t[28]!==x?(A=w.jsxs("div",{className:"pl-2 pr-3 py-2 border-b border-neutral-200 dark:border-white/5 flex items-center gap-2 shrink-0",children:[f,d,v,x,C,T]}),t[25]=f,t[26]=T,t[27]=v,t[28]=x,t[29]=A):A=t[29];let M;t[30]!==u?(M=u==="rest"&&w.jsx(Tj,{}),t[30]=u,t[31]=M):M=t[31];let I;t[32]!==u?(I=u==="grpc"&&w.jsx(hP,{}),t[32]=u,t[33]=I):I=t[33];let O;t[34]!==u?(O=u==="mcp"&&w.jsx(bP,{}),t[34]=u,t[35]=O):O=t[35];let B;t[36]!==u?(B=u==="openai"&&w.jsx(OP,{}),t[36]=u,t[37]=B):B=t[37];let U;t[38]!==M||t[39]!==I||t[40]!==O||t[41]!==B?(U=w.jsxs("div",{className:"pl-2 pr-3 py-2 border-b border-neutral-200 dark:border-white/5 overflow-visible shrink-0",children:[M,I,O,B]}),t[38]=M,t[39]=I,t[40]=O,t[41]=B,t[42]=U):U=t[42];let K;t[43]!==e.grpc?.response||t[44]!==e.http?.response||t[45]!==e.mcp?.response||t[46]!==e.openai?.response?(K=(e.http?.response||e.grpc?.response||e.mcp?.response||e.openai?.response)&&w.jsx("h2",{className:"text-[10px] font-medium text-neutral-500 dark:text-neutral-300 uppercase tracking-wider mb-2 shrink-0",children:"Response"}),t[43]=e.grpc?.response,t[44]=e.http?.response,t[45]=e.mcp?.response,t[46]=e.openai?.response,t[47]=K):K=t[47];let j;t[48]===Symbol.for("react.memo_cache_sentinel")?(j=w.jsx("div",{className:"flex-1 min-h-0 overflow-hidden",children:w.jsx(Zq,{})}),t[48]=j):j=t[48];let J;t[49]!==K?(J=w.jsxs("div",{className:"flex-1 pl-2 pr-3 py-2 flex flex-col min-h-0 overflow-hidden",children:[K,j]}),t[49]=K,t[50]=J):J=t[50];let ne;return t[51]!==A||t[52]!==U||t[53]!==J?(ne=w.jsxs("div",{className:"h-full flex flex-col overflow-hidden",children:[A,U,J]}),t[51]=A,t[52]=U,t[53]=J,t[54]=ne):ne=t[54],ne}class Yq{#e=!0;#t;#n;#r;#s;#o;#i;#a;#p=0;#m=5;#c=!1;#u=!1;#l=null;#f=()=>{this.debugLog("Connected to event bus"),this.#o=!0,this.#c=!1,this.debugLog("Emitting queued events",this.#s),this.#s.forEach(e=>this.emitEventToBus(e)),this.#s=[],this.stopConnectLoop(),this.#n().removeEventListener("tanstack-connect-success",this.#f)};#d=()=>{if(this.#p<this.#m){this.#p++,this.dispatchCustomEvent("tanstack-connect",{});return}this.#n().removeEventListener("tanstack-connect",this.#d),this.#u=!0,this.debugLog("Max retries reached, giving up on connection"),this.stopConnectLoop()};#h=()=>{this.#c||(this.#c=!0,this.#n().addEventListener("tanstack-connect-success",this.#f),this.#d())};constructor({pluginId:e,debug:n=!1,enabled:r=!0,reconnectEveryMs:s=300}){this.#t=e,this.#e=r,this.#n=this.getGlobalTarget,this.#r=n,this.debugLog(" Initializing event subscription for plugin",this.#t),this.#s=[],this.#o=!1,this.#u=!1,this.#i=null,this.#a=s}startConnectLoop(){this.#i!==null||this.#o||(this.debugLog(`Starting connect loop (every ${this.#a}ms)`),this.#i=setInterval(this.#d,this.#a))}stopConnectLoop(){this.#c=!1,this.#i!==null&&(clearInterval(this.#i),this.#i=null,this.#s=[],this.debugLog("Stopped connect loop"))}debugLog(...e){this.#r&&console.log(` [tanstack-devtools:${this.#t}-plugin]`,...e)}getGlobalTarget(){if(typeof globalThis<"u"&&globalThis.__TANSTACK_EVENT_TARGET__)return this.debugLog("Using global event target"),globalThis.__TANSTACK_EVENT_TARGET__;if(typeof window<"u"&&typeof window.addEventListener<"u")return this.debugLog("Using window as event target"),window;const e=typeof EventTarget<"u"?new EventTarget:void 0;return typeof e>"u"||typeof e.addEventListener>"u"?(this.debugLog("No event mechanism available, running in non-web environment"),{addEventListener:()=>{},removeEventListener:()=>{},dispatchEvent:()=>!1}):(this.debugLog("Using new EventTarget as fallback"),e)}getPluginId(){return this.#t}dispatchCustomEventShim(e,n){try{const r=new Event(e,{detail:n});this.#n().dispatchEvent(r)}catch{this.debugLog("Failed to dispatch shim event")}}dispatchCustomEvent(e,n){try{this.#n().dispatchEvent(new CustomEvent(e,{detail:n}))}catch{this.dispatchCustomEventShim(e,n)}}emitEventToBus(e){this.debugLog("Emitting event to client bus",e),this.dispatchCustomEvent("tanstack-dispatch-event",e)}createEventPayload(e,n){return{type:`${this.#t}:${e}`,payload:n,pluginId:this.#t}}emit(e,n){if(!this.#e){this.debugLog("Event bus client is disabled, not emitting event",e,n);return}if(this.#l&&(this.debugLog("Emitting event to internal event target",e,n),this.#l.dispatchEvent(new CustomEvent(`${this.#t}:${e}`,{detail:this.createEventPayload(e,n)}))),this.#u){this.debugLog("Previously failed to connect, not emitting to bus");return}if(!this.#o){this.debugLog("Bus not available, will be pushed as soon as connected"),this.#s.push(this.createEventPayload(e,n)),typeof CustomEvent<"u"&&!this.#c&&(this.#h(),this.startConnectLoop());return}return this.emitEventToBus(this.createEventPayload(e,n))}on(e,n,r){const s=r?.withEventTarget??!1,a=`${this.#t}:${e}`;if(s&&(this.#l||(this.#l=new EventTarget),this.#l.addEventListener(a,u=>{n(u.detail)})),!this.#e)return this.debugLog("Event bus client is disabled, not registering event",a),()=>{};const l=u=>{this.debugLog("Received event from bus",u.detail),n(u.detail)};return this.#n().addEventListener(a,l),this.debugLog("Registered event to bus",a),()=>{s&&this.#l?.removeEventListener(a,l),this.#n().removeEventListener(a,l)}}onAll(e){if(!this.#e)return this.debugLog("Event bus client is disabled, not registering event"),()=>{};const n=r=>{const s=r.detail;e(s)};return this.#n().addEventListener("tanstack-devtools-global",n),()=>this.#n().removeEventListener("tanstack-devtools-global",n)}onAllPluginEvents(e){if(!this.#e)return this.debugLog("Event bus client is disabled, not registering event"),()=>{};const n=r=>{const s=r.detail;this.#t&&s.pluginId!==this.#t||e(s)};return this.#n().addEventListener("tanstack-devtools-global",n),()=>this.#n().removeEventListener("tanstack-devtools-global",n)}}class Xq extends Yq{constructor(){super({pluginId:"tanstack-ai-devtools"})}}const Pt=new Xq;async function Wq(t){let e="";for await(const n of t)n.type==="content"&&n.delta&&(e+=n.delta);return e}function e9(t){return typeof t=="object"&&t!==null&&"~standard"in t&&typeof t["~standard"]=="object"&&t["~standard"].version===1&&typeof t["~standard"].jsonSchema=="object"&&typeof t["~standard"].jsonSchema.input=="function"}function zi(t){return typeof t=="object"&&t!==null&&"~standard"in t&&typeof t["~standard"]=="object"&&t!==null&&t["~standard"]!==null&&"version"in t["~standard"]&&t["~standard"].version===1&&"validate"in t["~standard"]&&typeof t["~standard"].validate=="function"}function jl(t,e=[]){const n={...t};if(n.type==="object"&&n.properties){const r={...n.properties},s=Object.keys(r);for(const a of s){const l=r[a],u=!e.includes(a);l.type==="object"&&l.properties?r[a]=jl(l,l.required||[]):l.type==="array"&&l.items?r[a]={...l,items:jl(l.items,l.items.required||[])}:u&&(l.type&&!Array.isArray(l.type)?r[a]={...l,type:[l.type,"null"]}:Array.isArray(l.type)&&!l.type.includes("null")&&(r[a]={...l,type:[...l.type,"null"]}))}n.properties=r,n.required=s,n.additionalProperties=!1}return n.type==="array"&&n.items&&(n.items=jl(n.items,n.items.required||[])),n}function Fg(t,e={}){if(!t)return;const{forStructuredOutput:n=!1}=e;if(e9(t)){let s=t["~standard"].jsonSchema.input({target:"draft-07"});if(typeof s=="object"&&"$schema"in s){const{$schema:a,...l}=s;s=l}return typeof s=="object"&&("properties"in s&&!s.type&&(s.type="object"),s.type==="object"&&!("properties"in s)&&(s.properties={}),s.type==="object"&&!("required"in s)&&(s.required=[]),n&&(s=jl(s,s.required||[]))),s}return n&&typeof t=="object"?jl(t,t.required||[]):t}function Qa(t,e){if(!zi(t))return e;const n=t["~standard"].validate(e);if(n instanceof Promise)throw new Error("Schema validation returned a Promise. Use validateWithStandardSchema for async validation.");if(!n.issues)return n.value;const r=n.issues.map(s=>s.message||"Validation failed").join(", ");throw new Error(`Validation failed: ${r}`)}class t9{constructor(e){this.toolCallsMap=new Map,this.tools=e}addToolCallChunk(e){const n=e.index,r=this.toolCallsMap.get(n);r?(e.toolCall.function.name&&!r.function.name&&(r.function.name=e.toolCall.function.name),e.toolCall.function.arguments&&(r.function.arguments+=e.toolCall.function.arguments)):e.toolCall.id&&e.toolCall.function.name&&this.toolCallsMap.set(n,{id:e.toolCall.id,type:"function",function:{name:e.toolCall.function.name,arguments:e.toolCall.function.arguments||""}})}hasToolCalls(){return this.getToolCalls().length>0}getToolCalls(){return Array.from(this.toolCallsMap.values()).filter(e=>e.id&&e.function.name&&e.function.name.trim().length>0)}async*executeTools(e){const n=this.getToolCalls(),r=[];for(const s of n){const a=this.tools.find(u=>u.name===s.function.name);let l;if(a?.execute)try{let u;try{u=JSON.parse(s.function.arguments)}catch{throw new Error(`Failed to parse tool arguments as JSON: ${s.function.arguments}`)}if(a.inputSchema&&zi(a.inputSchema))try{u=Qa(a.inputSchema,u)}catch(d){const m=d instanceof Error?d.message:"Validation failed";throw new Error(`Input validation failed for tool ${a.name}: ${m}`)}let f=await a.execute(u);if(a.outputSchema&&zi(a.outputSchema)&&f!==void 0&&f!==null)try{f=Qa(a.outputSchema,f)}catch(d){const m=d instanceof Error?d.message:"Validation failed";throw new Error(`Output validation failed for tool ${a.name}: ${m}`)}l=typeof f=="string"?f:JSON.stringify(f)}catch(u){l=`Error executing tool: ${u instanceof Error?u.message:"Unknown error"}`}else l=`Tool ${s.function.name} does not have an execute function`;yield{type:"tool_result",id:e.id,model:e.model,timestamp:Date.now(),toolCallId:s.id,content:l},r.push({role:"tool",content:l,toolCallId:s.id})}return r}clear(){this.toolCallsMap.clear()}}async function tS(t,e,n=new Map,r=new Map){const s=[],a=[],l=[],u=new Map;for(const f of e)u.set(f.name,f);for(const f of t){const d=u.get(f.function.name),m=f.function.name;if(!d){s.push({toolCallId:f.id,toolName:m,result:{error:`Unknown tool: ${m}`},state:"output-error"});continue}let p={};const y=f.function.arguments.trim()||"{}";try{p=JSON.parse(y)}catch{throw new Error(`Failed to parse tool arguments as JSON: ${y}`)}if(d.inputSchema&&zi(d.inputSchema))try{p=Qa(d.inputSchema,p)}catch(v){const x=v instanceof Error?v.message:"Validation failed";s.push({toolCallId:f.id,toolName:m,result:{error:`Input validation failed for tool ${d.name}: ${x}`},state:"output-error"});continue}if(!d.execute){if(d.needsApproval){const v=`approval_${f.id}`;n.has(v)?n.get(v)?r.has(f.id)?s.push({toolCallId:f.id,toolName:m,result:r.get(f.id)}):l.push({toolCallId:f.id,toolName:m,input:p}):s.push({toolCallId:f.id,toolName:m,result:{error:"User declined tool execution"},state:"output-error"}):a.push({toolCallId:f.id,toolName:f.function.name,input:p,approvalId:v})}else r.has(f.id)?s.push({toolCallId:f.id,toolName:m,result:r.get(f.id)}):l.push({toolCallId:f.id,toolName:m,input:p});continue}if(d.needsApproval){const v=`approval_${f.id}`;if(n.has(v))if(n.get(v)){const C=Date.now();try{let k=await d.execute(p);const T=Date.now()-C;d.outputSchema&&zi(d.outputSchema)&&k!==void 0&&k!==null&&(k=Qa(d.outputSchema,k)),s.push({toolCallId:f.id,toolName:m,result:typeof k=="string"?JSON.parse(k):k||null,duration:T})}catch(k){const T=Date.now()-C,A=k instanceof Error?k.message:"Unknown error";s.push({toolCallId:f.id,toolName:m,result:{error:A},state:"output-error",duration:T})}}else s.push({toolCallId:f.id,toolName:m,result:{error:"User declined tool execution"},state:"output-error"});else a.push({toolCallId:f.id,toolName:m,input:p,approvalId:v});continue}const g=Date.now();try{let v=await d.execute(p);const x=Date.now()-g;d.outputSchema&&zi(d.outputSchema)&&v!==void 0&&v!==null&&(v=Qa(d.outputSchema,v)),s.push({toolCallId:f.id,toolName:m,result:typeof v=="string"?JSON.parse(v):v||null,duration:x})}catch(v){const x=Date.now()-g,C=v instanceof Error?v.message:"Unknown error";s.push({toolCallId:f.id,toolName:m,result:{error:C},state:"output-error",duration:x})}}return{results:s,needsApproval:a,needsClientExecution:l}}function DC(t){return({iterationCount:e})=>e<t}class jC{constructor(e){this.iterationCount=0,this.lastFinishReason=null,this.streamStartTime=0,this.totalChunkCount=0,this.currentMessageId=null,this.accumulatedContent="",this.doneChunk=null,this.shouldEmitStreamEnd=!0,this.earlyTermination=!1,this.toolPhase="continue",this.cyclePhase="processText",this.adapter=e.adapter,this.params=e.params,this.systemPrompts=e.params.systemPrompts||[],this.tools=e.params.tools||[],this.loopStrategy=e.params.agentLoopStrategy||DC(5),this.toolCallManager=new t9(this.tools),this.initialMessageCount=e.params.messages.length,this.messages=e.params.messages,this.requestId=this.createId("chat"),this.streamId=this.createId("stream"),this.effectiveRequest=e.params.abortController?{signal:e.params.abortController.signal}:void 0,this.effectiveSignal=e.params.abortController?.signal}getAccumulatedContent(){return this.accumulatedContent}getMessages(){return this.messages}async*run(){this.beforeRun();try{if((yield*this.checkForPendingToolCalls())==="wait")return;do{if(this.earlyTermination||this.isAborted())return;this.beginCycle(),this.cyclePhase==="processText"?yield*this.streamModelResponse():yield*this.processToolCalls(),this.endCycle()}while(this.shouldContinue())}finally{this.afterRun()}}beforeRun(){this.streamStartTime=Date.now();const{model:e,tools:n,temperature:r,topP:s,maxTokens:a,metadata:l,modelOptions:u,conversationId:f}=this.params,d={};r!==void 0&&(d.temperature=r),s!==void 0&&(d.topP=s),a!==void 0&&(d.maxTokens=a),l!==void 0&&(d.metadata=l),Pt.emit("text:started",{requestId:this.requestId,streamId:this.streamId,model:e,provider:this.adapter.name,messageCount:this.initialMessageCount,hasTools:!!n&&n.length>0,streaming:!0,timestamp:Date.now(),clientId:f,toolNames:n?.map(m=>m.name),options:Object.keys(d).length>0?d:void 0,modelOptions:u}),Pt.emit("stream:started",{streamId:this.streamId,model:e,provider:this.adapter.name,timestamp:Date.now()})}afterRun(){if(!this.shouldEmitStreamEnd)return;const e=Date.now();Pt.emit("text:completed",{requestId:this.requestId,streamId:this.streamId,model:this.params.model,content:this.accumulatedContent,messageId:this.currentMessageId||void 0,finishReason:this.lastFinishReason||void 0,usage:this.doneChunk?.usage,timestamp:e}),Pt.emit("stream:ended",{requestId:this.requestId,streamId:this.streamId,totalChunks:this.totalChunkCount,duration:e-this.streamStartTime,timestamp:e})}beginCycle(){this.cyclePhase==="processText"&&this.beginIteration()}endCycle(){if(this.cyclePhase==="processText"){this.cyclePhase="executeToolCalls";return}this.cyclePhase="processText",this.iterationCount++}beginIteration(){this.currentMessageId=this.createId("msg"),this.accumulatedContent="",this.doneChunk=null}async*streamModelResponse(){const{temperature:e,topP:n,maxTokens:r,metadata:s,modelOptions:a}=this.params,u=this.params.tools?.map(f=>({...f,inputSchema:f.inputSchema?Fg(f.inputSchema):void 0,outputSchema:f.outputSchema?Fg(f.outputSchema):void 0}));for await(const f of this.adapter.chatStream({model:this.params.model,messages:this.messages,tools:u,temperature:e,topP:n,maxTokens:r,metadata:s,request:this.effectiveRequest,modelOptions:a,systemPrompts:this.systemPrompts}))if(this.isAborted()||(this.totalChunkCount++,yield f,this.handleStreamChunk(f),this.earlyTermination))break}handleStreamChunk(e){switch(e.type){case"content":this.handleContentChunk(e);break;case"tool_call":this.handleToolCallChunk(e);break;case"tool_result":this.handleToolResultChunk(e);break;case"done":this.handleDoneChunk(e);break;case"error":this.handleErrorChunk(e);break;case"thinking":this.handleThinkingChunk(e);break}}handleContentChunk(e){this.accumulatedContent=e.content,Pt.emit("stream:chunk:content",{streamId:this.streamId,messageId:this.currentMessageId||void 0,content:e.content,delta:e.delta,timestamp:Date.now()})}handleToolCallChunk(e){this.toolCallManager.addToolCallChunk(e),Pt.emit("stream:chunk:tool-call",{streamId:this.streamId,messageId:this.currentMessageId||void 0,toolCallId:e.toolCall.id,toolName:e.toolCall.function.name,index:e.index,arguments:e.toolCall.function.arguments,timestamp:Date.now()})}handleToolResultChunk(e){Pt.emit("stream:chunk:tool-result",{streamId:this.streamId,messageId:this.currentMessageId||void 0,toolCallId:e.toolCallId,result:e.content,timestamp:Date.now()})}handleDoneChunk(e){if(this.doneChunk?.finishReason==="tool_calls"&&e.finishReason==="stop"){this.lastFinishReason=e.finishReason,Pt.emit("stream:chunk:done",{streamId:this.streamId,messageId:this.currentMessageId||void 0,finishReason:e.finishReason,usage:e.usage,timestamp:Date.now()}),e.usage&&Pt.emit("usage:tokens",{requestId:this.requestId,streamId:this.streamId,messageId:this.currentMessageId||void 0,model:this.params.model,usage:e.usage,timestamp:Date.now()});return}this.doneChunk=e,this.lastFinishReason=e.finishReason,Pt.emit("stream:chunk:done",{streamId:this.streamId,messageId:this.currentMessageId||void 0,finishReason:e.finishReason,usage:e.usage,timestamp:Date.now()}),e.usage&&Pt.emit("usage:tokens",{requestId:this.requestId,streamId:this.streamId,messageId:this.currentMessageId||void 0,model:this.params.model,usage:e.usage,timestamp:Date.now()})}handleErrorChunk(e){Pt.emit("stream:chunk:error",{streamId:this.streamId,messageId:this.currentMessageId||void 0,error:e.error.message,timestamp:Date.now()}),this.earlyTermination=!0,this.shouldEmitStreamEnd=!1}handleThinkingChunk(e){Pt.emit("stream:chunk:thinking",{streamId:this.streamId,messageId:this.currentMessageId||void 0,content:e.content,delta:e.delta,timestamp:Date.now()})}async*checkForPendingToolCalls(){const e=this.getPendingToolCallsFromMessages();if(e.length===0)return"continue";const n=this.createSyntheticDoneChunk();Pt.emit("text:iteration",{requestId:this.requestId,streamId:this.streamId,iterationNumber:this.iterationCount+1,messageCount:this.messages.length,toolCallCount:e.length,timestamp:Date.now()});const{approvals:r,clientToolResults:s}=this.collectClientState(),a=await tS(e,this.tools,r,s);if(a.needsApproval.length>0||a.needsClientExecution.length>0){for(const u of this.emitApprovalRequests(a.needsApproval,n))yield u;for(const u of this.emitClientToolInputs(a.needsClientExecution,n))yield u;return this.shouldEmitStreamEnd=!1,"wait"}const l=this.emitToolResults(a.results,n);for(const u of l)yield u;return"continue"}async*processToolCalls(){if(!this.shouldExecuteToolPhase()){this.setToolPhase("stop");return}const e=this.toolCallManager.getToolCalls(),n=this.doneChunk;if(!n||e.length===0){this.setToolPhase("stop");return}Pt.emit("text:iteration",{requestId:this.requestId,streamId:this.streamId,iterationNumber:this.iterationCount+1,messageCount:this.messages.length,toolCallCount:e.length,timestamp:Date.now()}),this.addAssistantToolCallMessage(e);const{approvals:r,clientToolResults:s}=this.collectClientState(),a=await tS(e,this.tools,r,s);if(a.needsApproval.length>0||a.needsClientExecution.length>0){for(const u of this.emitApprovalRequests(a.needsApproval,n))yield u;for(const u of this.emitClientToolInputs(a.needsClientExecution,n))yield u;this.setToolPhase("wait");return}const l=this.emitToolResults(a.results,n);for(const u of l)yield u;this.toolCallManager.clear(),this.setToolPhase("continue")}shouldExecuteToolPhase(){return this.doneChunk?.finishReason==="tool_calls"&&this.tools.length>0&&this.toolCallManager.hasToolCalls()}addAssistantToolCallMessage(e){this.messages=[...this.messages,{role:"assistant",content:this.accumulatedContent||null,toolCalls:e}]}collectClientState(){const e=new Map,n=new Map;for(const r of this.messages)if(r.role==="assistant"&&r.parts){const s=r.parts;for(const a of s)a.type==="tool-call"&&a.state==="approval-responded"&&a.approval&&e.set(a.approval.id,a.approval.approved),a.type==="tool-call"&&a.output!==void 0&&!a.approval&&n.set(a.id,a.output)}return{approvals:e,clientToolResults:n}}emitApprovalRequests(e,n){const r=[];for(const s of e)Pt.emit("stream:approval-requested",{streamId:this.streamId,messageId:this.currentMessageId||void 0,toolCallId:s.toolCallId,toolName:s.toolName,input:s.input,approvalId:s.approvalId,timestamp:Date.now()}),r.push({type:"approval-requested",id:n.id,model:n.model,timestamp:Date.now(),toolCallId:s.toolCallId,toolName:s.toolName,input:s.input,approval:{id:s.approvalId,needsApproval:!0}});return r}emitClientToolInputs(e,n){const r=[];for(const s of e)Pt.emit("stream:tool-input-available",{streamId:this.streamId,messageId:this.currentMessageId||void 0,toolCallId:s.toolCallId,toolName:s.toolName,input:s.input,timestamp:Date.now()}),r.push({type:"tool-input-available",id:n.id,model:n.model,timestamp:Date.now(),toolCallId:s.toolCallId,toolName:s.toolName,input:s.input});return r}emitToolResults(e,n){const r=[];for(const s of e){Pt.emit("tool:call-completed",{requestId:this.requestId,streamId:this.streamId,messageId:this.currentMessageId||void 0,toolCallId:s.toolCallId,toolName:s.toolName,result:s.result,duration:s.duration??0,timestamp:Date.now()});const a=JSON.stringify(s.result),l={type:"tool_result",id:n.id,model:n.model,timestamp:Date.now(),toolCallId:s.toolCallId,content:a};r.push(l),this.messages=[...this.messages,{role:"tool",content:a,toolCallId:s.toolCallId}]}return r}getPendingToolCallsFromMessages(){const e=new Set(this.messages.filter(r=>r.role==="tool"&&r.toolCallId).map(r=>r.toolCallId)),n=[];for(const r of this.messages)if(r.role==="assistant"&&r.toolCalls)for(const s of r.toolCalls)e.has(s.id)||n.push(s);return n}createSyntheticDoneChunk(){return{type:"done",id:this.createId("pending"),model:this.params.model,timestamp:Date.now(),finishReason:"tool_calls"}}shouldContinue(){return this.cyclePhase==="executeToolCalls"?!0:this.loopStrategy({iterationCount:this.iterationCount,messages:this.messages,finishReason:this.lastFinishReason})&&this.toolPhase==="continue"}isAborted(){return!!this.effectiveSignal?.aborted}setToolPhase(e){this.toolPhase=e,e==="wait"&&(this.shouldEmitStreamEnd=!1)}createId(e){return`${e}-${Date.now()}-${Math.random().toString(36).slice(2,9)}`}}function n9(t){const{outputSchema:e,stream:n}=t;return e?s9(t):n===!1?r9(t):LC(t)}async function*LC(t){const{adapter:e,...n}=t,r=e.model,s=new jC({adapter:e,params:{...n,model:r}});for await(const a of s.run())yield a}function r9(t){const e=LC(t);return Wq(e)}async function s9(t){const{adapter:e,outputSchema:n,...r}=t,s=e.model;if(!n)throw new Error("outputSchema is required for structured output");const a=new jC({adapter:e,params:{...r,model:s}});for await(const y of a.run());const l=a.getMessages(),{tools:u,agentLoopStrategy:f,...d}=r,m=Fg(n);if(!m)throw new Error("Failed to convert output schema to JSON Schema");const p=await e.structuredOutput({chatOptions:{...d,model:s,messages:l},outputSchema:m});return zi(n)?Qa(n,p.data):p.data}function Dr(t){return{__toolSide:"definition",...t,server(n){return{__toolSide:"server",...t,execute:n}},client(n){return{__toolSide:"client",...t,execute:n}}}}function nS(t){return t===null?"":typeof t=="string"?t:t.filter(e=>e.type==="text").map(e=>e.content).join("")}function i9(t){const e=[];for(const n of t)"parts"in n?e.push(...zC(n)):e.push(n);return e}function zC(t){const e=[];if(t.role==="system")return e;const n=[],r=[],s=[];for(const u of t.parts)u.type==="text"?n.push(u):u.type==="tool-call"?r.push(u):u.type==="tool-result"&&s.push(u);const a=n.map(u=>u.content).join("")||null,l=r.length>0?r.filter(u=>u.state==="input-complete"||u.state==="approval-responded"||u.output!==void 0).map(u=>({id:u.id,type:"function",function:{name:u.name,arguments:u.arguments}})):void 0;t.role!=="assistant"||a||!l?e.push({role:t.role,content:a,...l&&l.length>0&&{toolCalls:l}}):l.length>0&&e.push({role:"assistant",content:a,toolCalls:l});for(const u of s)(u.state==="complete"||u.state==="error")&&e.push({role:"tool",content:u.content,toolCallId:u.toolCallId});return e}function a9(t,e){const n=[],r=nS(t.content);if(r&&n.push({type:"text",content:r}),t.toolCalls&&t.toolCalls.length>0)for(const s of t.toolCalls)n.push({type:"tool-call",id:s.id,name:s.function.name,arguments:s.function.arguments,state:"input-complete"});return t.role==="tool"&&t.toolCallId&&n.push({type:"tool-result",toolCallId:t.toolCallId,content:nS(t.content),state:"complete"}),{id:e||qf(),role:t.role==="tool"?"assistant":t.role,parts:n}}function o9(t,e){return"parts"in t?{...t,id:t.id||e(),createdAt:t.createdAt||new Date}:{...a9(t,e()),createdAt:new Date}}function qf(){return`msg-${Date.now()}-${Math.random().toString(36).substring(7)}`}var Ri={},Lm={},rS;function sS(){return rS||(rS=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Allow=t.ALL=t.COLLECTION=t.ATOM=t.SPECIAL=t.INF=t._INFINITY=t.INFINITY=t.NAN=t.BOOL=t.NULL=t.OBJ=t.ARR=t.NUM=t.STR=void 0,t.STR=1,t.NUM=2,t.ARR=4,t.OBJ=8,t.NULL=16,t.BOOL=32,t.NAN=64,t.INFINITY=128,t._INFINITY=256,t.INF=t.INFINITY|t._INFINITY,t.SPECIAL=t.NULL|t.BOOL|t.INF|t.NAN,t.ATOM=t.STR|t.NUM|t.SPECIAL,t.COLLECTION=t.ARR|t.OBJ,t.ALL=t.ATOM|t.COLLECTION,t.Allow={STR:t.STR,NUM:t.NUM,ARR:t.ARR,OBJ:t.OBJ,NULL:t.NULL,BOOL:t.BOOL,NAN:t.NAN,INFINITY:t.INFINITY,_INFINITY:t._INFINITY,INF:t.INF,SPECIAL:t.SPECIAL,ATOM:t.ATOM,COLLECTION:t.COLLECTION,ALL:t.ALL},t.default=t.Allow})(Lm)),Lm}var iS;function l9(){return iS||(iS=1,(function(t){var e=Ri&&Ri.__createBinding||(Object.create?(function(d,m,p,y){y===void 0&&(y=p);var g=Object.getOwnPropertyDescriptor(m,p);(!g||("get"in g?!m.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return m[p]}}),Object.defineProperty(d,y,g)}):(function(d,m,p,y){y===void 0&&(y=p),d[y]=m[p]})),n=Ri&&Ri.__exportStar||function(d,m){for(var p in d)p!=="default"&&!Object.prototype.hasOwnProperty.call(m,p)&&e(m,d,p)};Object.defineProperty(t,"__esModule",{value:!0}),t.Allow=t.MalformedJSON=t.PartialJSON=t.parseJSON=t.parse=void 0;const r=sS();Object.defineProperty(t,"Allow",{enumerable:!0,get:function(){return r.Allow}}),n(sS(),t);class s extends Error{}t.PartialJSON=s;class a extends Error{}t.MalformedJSON=a;function l(d,m=r.Allow.ALL){if(typeof d!="string")throw new TypeError(`expecting str, got ${typeof d}`);if(!d.trim())throw new Error(`${d} is empty`);return u(d.trim(),m)}t.parseJSON=l;const u=(d,m)=>{const p=d.length;let y=0;const g=I=>{throw new s(`${I} at position ${y}`)},v=I=>{throw new a(`${I} at position ${y}`)},x=()=>(M(),y>=p&&g("Unexpected end of input"),d[y]==='"'?C():d[y]==="{"?k():d[y]==="["?T():d.substring(y,y+4)==="null"||r.Allow.NULL&m&&p-y<4&&"null".startsWith(d.substring(y))?(y+=4,null):d.substring(y,y+4)==="true"||r.Allow.BOOL&m&&p-y<4&&"true".startsWith(d.substring(y))?(y+=4,!0):d.substring(y,y+5)==="false"||r.Allow.BOOL&m&&p-y<5&&"false".startsWith(d.substring(y))?(y+=5,!1):d.substring(y,y+8)==="Infinity"||r.Allow.INFINITY&m&&p-y<8&&"Infinity".startsWith(d.substring(y))?(y+=8,1/0):d.substring(y,y+9)==="-Infinity"||r.Allow._INFINITY&m&&1<p-y&&p-y<9&&"-Infinity".startsWith(d.substring(y))?(y+=9,-1/0):d.substring(y,y+3)==="NaN"||r.Allow.NAN&m&&p-y<3&&"NaN".startsWith(d.substring(y))?(y+=3,NaN):A()),C=()=>{const I=y;let O=!1;for(y++;y<p&&(d[y]!=='"'||O&&d[y-1]==="\\");)O=d[y]==="\\"?!O:!1,y++;if(d.charAt(y)=='"')try{return JSON.parse(d.substring(I,++y-Number(O)))}catch(B){v(String(B))}else if(r.Allow.STR&m)try{return JSON.parse(d.substring(I,y-Number(O))+'"')}catch{return JSON.parse(d.substring(I,d.lastIndexOf("\\"))+'"')}g("Unterminated string literal")},k=()=>{y++,M();const I={};try{for(;d[y]!=="}";){if(M(),y>=p&&r.Allow.OBJ&m)return I;const O=C();M(),y++;try{const B=x();I[O]=B}catch(B){if(r.Allow.OBJ&m)return I;throw B}M(),d[y]===","&&y++}}catch{if(r.Allow.OBJ&m)return I;g("Expected '}' at end of object")}return y++,I},T=()=>{y++;const I=[];try{for(;d[y]!=="]";)I.push(x()),M(),d[y]===","&&y++}catch{if(r.Allow.ARR&m)return I;g("Expected ']' at end of array")}return y++,I},A=()=>{if(y===0){d==="-"&&v("Not sure what '-' is");try{return JSON.parse(d)}catch(O){if(r.Allow.NUM&m)try{return JSON.parse(d.substring(0,d.lastIndexOf("e")))}catch{}v(String(O))}}const I=y;for(d[y]==="-"&&y++;d[y]&&",]}".indexOf(d[y])===-1;)y++;y==p&&!(r.Allow.NUM&m)&&g("Unterminated number literal");try{return JSON.parse(d.substring(I,y))}catch{d.substring(I,y)==="-"&&g("Not sure what '-' is");try{return JSON.parse(d.substring(I,d.lastIndexOf("e")))}catch(B){v(String(B))}}},M=()=>{for(;y<p&&` 
\r	`.includes(d[y]);)y++};return x()},f=l;t.parse=f})(Ri)),Ri}var c9=l9();class u9{parse(e){if(!(!e||e.trim()===""))try{return c9.parse(e)}catch{return}}}const f9=new u9;function d9(t,e,n){return t.map(r=>{if(r.id!==e)return r;const s=[...r.parts],a=s.length>0?s[s.length-1]:null;return a&&a.type==="text"?s[s.length-1]={type:"text",content:n}:s.push({type:"text",content:n}),{...r,parts:s}})}function zm(t,e,n){return t.map(r=>{if(r.id!==e)return r;const s=[...r.parts],a=s.findIndex(u=>u.type==="tool-call"&&u.id===n.id),l={type:"tool-call",id:n.id,name:n.name,arguments:n.arguments,state:n.state};return a>=0?s[a]=l:s.push(l),{...r,parts:s}})}function aS(t,e,n,r,s,a){return t.map(l=>{if(l.id!==e)return l;const u=[...l.parts],f=u.findIndex(m=>m.type==="tool-result"&&m.toolCallId===n),d={type:"tool-result",toolCallId:n,content:r,state:s,...a&&{error:a}};return f>=0?u[f]=d:u.push(d),{...l,parts:u}})}function h9(t,e,n,r){return t.map(s=>{if(s.id!==e)return s;const a=[...s.parts],l=a.find(u=>u.type==="tool-call"&&u.id===n);return l&&(l.state="approval-requested",l.approval={id:r,needsApproval:!0}),{...s,parts:a}})}function p9(t,e,n,r,s){return t.map(a=>{const l=[...a.parts],u=l.find(f=>f.type==="tool-call"&&f.id===e);return u&&(u.output=s?{error:s}:n,r?u.state=r:u.state="input-complete"),{...a,parts:l}})}function m9(t,e,n){return t.map(r=>{const s=[...r.parts],a=s.find(l=>l.type==="tool-call"&&l.approval?.id===e);return a&&a.approval&&(a.approval.approved=n,a.state="approval-responded"),{...r,parts:s}})}function g9(t,e,n){return t.map(r=>{if(r.id!==e)return r;const s=[...r.parts],a=s.findIndex(u=>u.type==="thinking"),l={type:"thinking",content:n};return a>=0?s[a]=l:s.push(l),{...r,parts:s}})}class y9{shouldEmit(e,n){return!0}}class o0{constructor(e={}){this.messages=[],this.currentAssistantMessageId=null,this.totalTextContent="",this.currentSegmentText="",this.lastEmittedText="",this.thinkingContent="",this.toolCalls=new Map,this.toolCallOrder=[],this.finishReason=null,this.isDone=!1,this.hasToolCallsSinceTextStart=!1,this.recording=null,this.recordingStartTime=0,this.chunkStrategy=e.chunkStrategy||new y9,this.events=e.events||{},this.handlers=e.handlers||{},this.jsonParser=e.jsonParser||f9,this.recordingEnabled=e.recording??!1,e.initialMessages&&(this.messages=[...e.initialMessages])}setMessages(e){this.messages=[...e],this.emitMessagesChange()}addUserMessage(e){const n={id:qf(),role:"user",parts:[{type:"text",content:e}],createdAt:new Date};return this.messages=[...this.messages,n],this.emitMessagesChange(),n}startAssistantMessage(){this.resetStreamState();const e={id:qf(),role:"assistant",parts:[],createdAt:new Date};return this.currentAssistantMessageId=e.id,this.messages=[...this.messages,e],this.events.onStreamStart?.(),this.emitMessagesChange(),e.id}addToolResult(e,n,r){const s=this.messages.find(f=>f.parts.some(d=>d.type==="tool-call"&&d.id===e));if(!s){console.warn(`[StreamProcessor] Could not find message with tool call ${e}`);return}let a=p9(this.messages,e,n,r?"input-complete":void 0,r);const l=typeof n=="string"?n:JSON.stringify(n),u=r?"error":"complete";a=aS(a,s.id,e,l,u,r),this.messages=a,this.emitMessagesChange()}addToolApprovalResponse(e,n){this.messages=m9(this.messages,e,n),this.emitMessagesChange()}toModelMessages(){const e=[];for(const n of this.messages)e.push(...zC(n));return e}getMessages(){return this.messages}areAllToolsComplete(){const e=this.messages.findLast(r=>r.role==="assistant");if(!e)return!0;const n=e.parts.filter(r=>r.type==="tool-call");return n.length===0?!0:n.every(r=>r.state==="approval-responded"||r.output!==void 0&&!r.approval)}removeMessagesAfter(e){this.messages=this.messages.slice(0,e+1),this.emitMessagesChange()}clearMessages(){this.messages=[],this.currentAssistantMessageId=null,this.emitMessagesChange()}async process(e){this.resetStreamState(),this.recordingEnabled&&this.startRecording();for await(const n of e)this.processChunk(n);return this.finalizeStream(),this.recording&&(this.recording.result=this.getResult()),this.getResult()}processChunk(e){switch(this.recording&&this.recording.chunks.push({chunk:e,timestamp:Date.now(),index:this.recording.chunks.length}),e.type){case"content":this.handleContentChunk(e);break;case"tool_call":this.handleToolCallChunk(e);break;case"tool_result":this.handleToolResultChunk(e);break;case"done":this.handleDoneChunk(e);break;case"error":this.handleErrorChunk(e);break;case"thinking":this.handleThinkingChunk(e);break;case"approval-requested":this.handleApprovalRequestedChunk(e);break;case"tool-input-available":this.handleToolInputAvailableChunk(e);break}}handleContentChunk(e){this.completeAllToolCalls();const n=this.currentSegmentText;this.hasToolCallsSinceTextStart&&n.length>0&&this.isNewTextSegment(e,n)&&(n!==this.lastEmittedText&&this.emitTextUpdate(),this.currentSegmentText="",this.lastEmittedText="",this.hasToolCallsSinceTextStart=!1);const s=this.currentSegmentText;let a=s;e.delta!==""?a=s+e.delta:e.content!==""&&(e.content.startsWith(s)?a=e.content:s.startsWith(e.content)?a=s:a=s+e.content);const l=a.slice(s.length);this.currentSegmentText=a,this.totalTextContent+=l;const u=e.delta??e.content??"";this.chunkStrategy.shouldEmit(u,this.currentSegmentText)&&this.currentSegmentText!==this.lastEmittedText&&this.emitTextUpdate()}handleToolCallChunk(e){this.hasToolCallsSinceTextStart=!0;const n=e.toolCall.id,r=this.toolCalls.get(n);if(r){const s=r.state==="awaiting-input";r.arguments+=e.toolCall.function.arguments||"",s&&e.toolCall.function.arguments&&(r.state="input-streaming"),r.parsedArguments=this.jsonParser.parse(r.arguments);const a=this.toolCallOrder.indexOf(n);this.handlers.onToolCallStateChange?.(a,r.id,r.name,r.state,r.arguments,r.parsedArguments),e.toolCall.function.arguments&&this.handlers.onToolCallDelta?.(a,e.toolCall.function.arguments),this.currentAssistantMessageId&&(this.messages=zm(this.messages,this.currentAssistantMessageId,{id:r.id,name:r.name,arguments:r.arguments,state:r.state}),this.emitMessagesChange(),this.events.onToolCallStateChange?.(this.currentAssistantMessageId,r.id,r.state,r.arguments))}else{const s=e.toolCall.function.arguments?"input-streaming":"awaiting-input",a={id:e.toolCall.id,name:e.toolCall.function.name,arguments:e.toolCall.function.arguments||"",state:s,parsedArguments:void 0,index:e.index};e.toolCall.function.arguments&&(a.parsedArguments=this.jsonParser.parse(e.toolCall.function.arguments)),this.toolCalls.set(n,a),this.toolCallOrder.push(n);const l=this.toolCallOrder.indexOf(n);this.handlers.onToolCallStart?.(l,e.toolCall.id,e.toolCall.function.name),this.handlers.onToolCallStateChange?.(l,e.toolCall.id,e.toolCall.function.name,s,e.toolCall.function.arguments||"",a.parsedArguments),e.toolCall.function.arguments&&this.handlers.onToolCallDelta?.(l,e.toolCall.function.arguments),this.currentAssistantMessageId&&(this.messages=zm(this.messages,this.currentAssistantMessageId,{id:e.toolCall.id,name:e.toolCall.function.name,arguments:e.toolCall.function.arguments||"",state:s}),this.emitMessagesChange(),this.events.onToolCallStateChange?.(this.currentAssistantMessageId,e.toolCall.id,s,e.toolCall.function.arguments||""))}}handleToolResultChunk(e){const n="complete";this.handlers.onToolResultStateChange?.(e.toolCallId,e.content,n),this.currentAssistantMessageId&&(this.messages=aS(this.messages,this.currentAssistantMessageId,e.toolCallId,e.content,n),this.emitMessagesChange())}handleDoneChunk(e){this.finishReason=e.finishReason,this.isDone=!0,this.completeAllToolCalls()}handleErrorChunk(e){this.handlers.onError?.(e.error),this.events.onError?.(new Error(e.error.message))}handleThinkingChunk(e){const n=this.thinkingContent;let r=n;e.delta!==""?r=n+e.delta:e.content!==""&&(e.content.startsWith(n)?r=e.content:n.startsWith(e.content)?r=n:r=n+e.content),this.thinkingContent=r,this.handlers.onThinkingUpdate?.(this.thinkingContent),this.currentAssistantMessageId&&(this.messages=g9(this.messages,this.currentAssistantMessageId,this.thinkingContent),this.emitMessagesChange(),this.events.onThinkingUpdate?.(this.currentAssistantMessageId,this.thinkingContent))}handleApprovalRequestedChunk(e){this.handlers.onApprovalRequested?.(e.toolCallId,e.toolName,e.input,e.approval.id),this.currentAssistantMessageId&&(this.messages=h9(this.messages,this.currentAssistantMessageId,e.toolCallId,e.approval.id),this.emitMessagesChange()),this.events.onApprovalRequest?.({toolCallId:e.toolCallId,toolName:e.toolName,input:e.input,approvalId:e.approval.id})}handleToolInputAvailableChunk(e){this.handlers.onToolInputAvailable?.(e.toolCallId,e.toolName,e.input),this.events.onToolCall?.({toolCallId:e.toolCallId,toolName:e.toolName,input:e.input})}isNewTextSegment(e,n){return e.delta!==void 0&&e.content!==void 0&&(e.content.length<n.length||!e.content.startsWith(n)&&!n.startsWith(e.content))}completeAllToolCalls(){this.toolCalls.forEach((e,n)=>{if(e.state!=="input-complete"){const r=this.toolCallOrder.indexOf(n);this.completeToolCall(r,e)}})}completeToolCall(e,n){n.state="input-complete",n.parsedArguments=this.jsonParser.parse(n.arguments),this.handlers.onToolCallStateChange?.(e,n.id,n.name,"input-complete",n.arguments,n.parsedArguments),this.handlers.onToolCallComplete?.(e,n.id,n.name,n.arguments),this.currentAssistantMessageId&&(this.messages=zm(this.messages,this.currentAssistantMessageId,{id:n.id,name:n.name,arguments:n.arguments,state:"input-complete"}),this.emitMessagesChange(),this.events.onToolCallStateChange?.(this.currentAssistantMessageId,n.id,"input-complete",n.arguments))}emitTextUpdate(){this.lastEmittedText=this.currentSegmentText,this.handlers.onTextUpdate?.(this.currentSegmentText),this.currentAssistantMessageId&&(this.messages=d9(this.messages,this.currentAssistantMessageId,this.currentSegmentText),this.emitMessagesChange(),this.events.onTextUpdate?.(this.currentAssistantMessageId,this.currentSegmentText))}emitMessagesChange(){this.events.onMessagesChange?.([...this.messages])}finalizeStream(){this.completeAllToolCalls(),this.currentSegmentText!==this.lastEmittedText&&this.emitTextUpdate();const e=this.getCompletedToolCalls();if(this.handlers.onStreamEnd?.(this.totalTextContent,e.length>0?e:void 0),this.currentAssistantMessageId){const n=this.messages.find(r=>r.id===this.currentAssistantMessageId);n&&this.events.onStreamEnd?.(n)}}getCompletedToolCalls(){return Array.from(this.toolCalls.values()).filter(e=>e.state==="input-complete").map(e=>({id:e.id,type:"function",function:{name:e.name,arguments:e.arguments}}))}getResult(){const e=this.getCompletedToolCalls();return{content:this.totalTextContent,thinking:this.thinkingContent||void 0,toolCalls:e.length>0?e:void 0,finishReason:this.finishReason}}getState(){return{content:this.totalTextContent,thinking:this.thinkingContent,toolCalls:new Map(this.toolCalls),toolCallOrder:[...this.toolCallOrder],finishReason:this.finishReason,done:this.isDone}}startRecording(){this.recordingEnabled=!0,this.recordingStartTime=Date.now(),this.recording={version:"1.0",timestamp:this.recordingStartTime,chunks:[]}}getRecording(){return this.recording}resetStreamState(){this.totalTextContent="",this.currentSegmentText="",this.lastEmittedText="",this.thinkingContent="",this.toolCalls.clear(),this.toolCallOrder=[],this.finishReason=null,this.isDone=!1,this.hasToolCallsSinceTextStart=!1,this.chunkStrategy.reset?.()}reset(){this.resetStreamState(),this.messages=[],this.currentAssistantMessageId=null}static async replay(e,n){return new o0(n).process(b9(e))}}function b9(t){return{async*[Symbol.asyncIterator](){for(const{chunk:e}of t.chunks)yield e}}}class _9{constructor(e){this.clientId=e}clientCreated(e){this.emitEvent("client:created",{initialMessageCount:e})}loadingChanged(e){this.emitEvent("client:loading-changed",{isLoading:e})}errorChanged(e){this.emitEvent("client:error-changed",{error:e})}textUpdated(e,n,r){this.emitEvent("processor:text-updated",{streamId:e,content:r}),this.emitEvent("client:assistant-message-updated",{messageId:n,content:r})}toolCallStateChanged(e,n,r,s,a,l){this.emitEvent("processor:tool-call-state-changed",{streamId:e,toolCallId:r,toolName:s,state:a,arguments:l}),this.emitEvent("client:tool-call-updated",{messageId:n,toolCallId:r,toolName:s,state:a,arguments:l})}toolResultStateChanged(e,n,r,s,a){this.emitEvent("processor:tool-result-state-changed",{streamId:e,toolCallId:n,content:r,state:s,error:a})}thinkingUpdated(e,n,r,s){this.emitEvent("stream:chunk:thinking",{streamId:e,messageId:n,content:r,delta:s})}approvalRequested(e,n,r,s,a){this.emitEvent("client:approval-requested",{messageId:e,toolCallId:n,toolName:r,input:s,approvalId:a})}messageAppended(e){const n=e.parts.filter(r=>r.type==="text").map(r=>r.content).join(" ").substring(0,100);this.emitEvent("client:message-appended",{messageId:e.id,role:e.role,contentPreview:n})}messageSent(e,n){this.emitEvent("client:message-sent",{messageId:e,content:n})}reloaded(e){this.emitEvent("client:reloaded",{fromMessageIndex:e})}stopped(){this.emitEvent("client:stopped")}messagesCleared(){this.emitEvent("client:messages-cleared")}toolResultAdded(e,n,r,s){this.emitEvent("tool:result-added",{toolCallId:e,toolName:n,output:r,state:s})}toolApprovalResponded(e,n,r){this.emitEvent("tool:approval-responded",{approvalId:e,toolCallId:n,approved:r})}}class v9 extends _9{emitEvent(e,n){e.startsWith("client:")||e.startsWith("tool:")?Pt.emit(e,{...n,clientId:this.clientId,timestamp:Date.now()}):Pt.emit(e,{...n,timestamp:Date.now()})}}class x9{constructor(e){if(this.body={},this.isLoading=!1,this.error=void 0,this.abortController=null,this.currentStreamId=null,this.currentMessageId=null,this.postStreamActions=[],this.uniqueId=e.id||this.generateUniqueId("chat"),this.body=e.body||{},this.connection=e.connection,this.events=new v9(this.uniqueId),this.clientToolsRef={current:new Map},e.tools)for(const n of e.tools)this.clientToolsRef.current.set(n.name,n);this.callbacksRef={current:{onResponse:e.onResponse||(()=>{}),onChunk:e.onChunk||(()=>{}),onFinish:e.onFinish||(()=>{}),onError:e.onError||(()=>{}),onMessagesChange:e.onMessagesChange||(()=>{}),onLoadingChange:e.onLoadingChange||(()=>{}),onErrorChange:e.onErrorChange||(()=>{})}},this.processor=new o0({chunkStrategy:e.streamProcessor?.chunkStrategy,initialMessages:e.initialMessages,events:{onMessagesChange:n=>{this.callbacksRef.current.onMessagesChange(n)},onStreamStart:()=>{},onStreamEnd:n=>{this.callbacksRef.current.onFinish(n)},onError:n=>{this.setError(n),this.callbacksRef.current.onError(n)},onTextUpdate:(n,r)=>{this.currentStreamId&&this.events.textUpdated(this.currentStreamId,n,r)},onThinkingUpdate:(n,r)=>{this.currentStreamId&&this.events.thinkingUpdated(this.currentStreamId,n,r)},onToolCallStateChange:(n,r,s,a)=>{const d=this.processor.getMessages().find(m=>m.id===n)?.parts.find(m=>m.type==="tool-call"&&m.id===r)?.name||"unknown";this.currentStreamId&&this.events.toolCallStateChanged(this.currentStreamId,n,r,d,s,a)},onToolCall:async n=>{const r=this.clientToolsRef.current.get(n.toolName);if(r?.execute)try{const s=await r.execute(n.input);await this.addToolResult({toolCallId:n.toolCallId,tool:n.toolName,output:s,state:"output-available"})}catch(s){await this.addToolResult({toolCallId:n.toolCallId,tool:n.toolName,output:null,state:"output-error",errorText:s.message})}},onApprovalRequest:n=>{this.events.approvalRequested(this.currentMessageId||"",n.toolCallId,n.toolName,n.input,n.approvalId)}}}),this.events.clientCreated(this.processor.getMessages().length)}generateUniqueId(e){return`${e}-${Date.now()}-${Math.random().toString(36).substring(7)}`}setIsLoading(e){this.isLoading=e,this.callbacksRef.current.onLoadingChange(e),this.events.loadingChanged(e)}setError(e){this.error=e,this.callbacksRef.current.onErrorChange(e),this.events.errorChanged(e?.message||null)}async processStream(e){this.currentStreamId=this.generateUniqueId("stream");const n=this.processor.startAssistantMessage();this.currentMessageId=n;const r={id:n,role:"assistant",parts:[],createdAt:new Date};this.events.messageAppended(r);for await(const l of e)this.callbacksRef.current.onChunk(l),this.processor.processChunk(l),await new Promise(u=>setTimeout(u,0));return this.processor.finalizeStream(),this.currentStreamId=null,this.currentMessageId=null,this.processor.getMessages().find(l=>l.id===n)||{id:n,role:"assistant",parts:[],createdAt:new Date}}async sendMessage(e){if(!e.trim()||this.isLoading)return;const n=this.processor.addUserMessage(e.trim());this.events.messageSent(n.id,e.trim()),await this.streamResponse()}async append(e){const n=o9(e,qf);if(n.role==="system")return;const r=n;this.events.messageAppended(r);const s=this.processor.getMessages();this.processor.setMessages([...s,r]),await this.streamResponse()}async streamResponse(){this.setIsLoading(!0),this.setError(void 0),this.abortController=new AbortController;try{const e=this.processor.toModelMessages();await this.callbacksRef.current.onResponse();const n={...this.body,conversationId:this.uniqueId},r=this.connection.connect(e,n,this.abortController.signal);await this.processStream(r)}catch(e){if(e instanceof Error){if(e.name==="AbortError")return;this.setError(e),this.callbacksRef.current.onError(e)}}finally{this.abortController=null,this.setIsLoading(!1),await this.drainPostStreamActions()}}async reload(){const e=this.processor.getMessages();if(e.length===0)return;const n=e.findLastIndex(r=>r.role==="user");n!==-1&&(this.events.reloaded(n),this.processor.removeMessagesAfter(n),await this.streamResponse())}stop(){this.abortController&&(this.abortController.abort(),this.abortController=null),this.setIsLoading(!1),this.events.stopped()}clear(){this.processor.clearMessages(),this.setError(void 0),this.events.messagesCleared()}async addToolResult(e){if(this.events.toolResultAdded(e.toolCallId,e.tool,e.output,e.state||"output-available"),this.processor.addToolResult(e.toolCallId,e.output,e.errorText),this.isLoading){this.queuePostStreamAction(()=>this.checkForContinuation());return}await this.checkForContinuation()}async addToolApprovalResponse(e){const n=this.processor.getMessages();let r;for(const s of n){const a=s.parts.find(l=>l.type==="tool-call"&&l.approval?.id===e.id);if(a){r=a.id;break}}if(r&&this.events.toolApprovalResponded(e.id,r,e.approved),this.processor.addToolApprovalResponse(e.id,e.approved),this.isLoading){this.queuePostStreamAction(()=>this.checkForContinuation());return}await this.checkForContinuation()}queuePostStreamAction(e){this.postStreamActions.push(e)}async drainPostStreamActions(){for(;this.postStreamActions.length>0;)await this.postStreamActions.shift()()}async checkForContinuation(){this.shouldAutoSend()&&await this.streamResponse()}shouldAutoSend(){return this.processor.areAllToolsComplete()}getMessages(){return this.processor.getMessages()}getIsLoading(){return this.isLoading}getError(){return this.error}setMessagesManually(e){this.processor.setMessages(e)}updateOptions(e){if(e.connection!==void 0&&(this.connection=e.connection),e.body!==void 0&&(this.body=e.body),e.tools!==void 0){this.clientToolsRef.current=new Map;for(const n of e.tools)this.clientToolsRef.current.set(n.name,n)}e.onResponse!==void 0&&(this.callbacksRef.current.onResponse=e.onResponse),e.onChunk!==void 0&&(this.callbacksRef.current.onChunk=e.onChunk),e.onFinish!==void 0&&(this.callbacksRef.current.onFinish=e.onFinish),e.onError!==void 0&&(this.callbacksRef.current.onError=e.onError)}}function w9(...t){return t}function S9(t){return{async*connect(e,n){const r=i9(e);yield*t(r,n)}}}function k9(t){const e=G.useId(),n=t.id||e,[r,s]=G.useState(t.initialMessages||[]),[a,l]=G.useState(!1),[u,f]=G.useState(void 0),d=G.useRef(t.initialMessages||[]),m=G.useRef(!0);G.useEffect(()=>{d.current=r},[r]);const p=G.useRef(t);p.current=t;const y=G.useMemo(()=>{const I=m.current?t.initialMessages||[]:d.current;return m.current=!1,new x9({connection:p.current.connection,id:n,initialMessages:I,body:p.current.body,onResponse:p.current.onResponse,onChunk:p.current.onChunk,onFinish:p.current.onFinish,onError:p.current.onError,tools:p.current.tools,streamProcessor:t.streamProcessor,onMessagesChange:O=>{s(O)},onLoadingChange:O=>{l(O)},onErrorChange:O=>{f(O)}})},[n]);G.useEffect(()=>{t.initialMessages&&t.initialMessages.length>0&&r.length===0&&y.setMessagesManually(t.initialMessages)},[]),G.useEffect(()=>()=>{y.stop()},[y]);const g=G.useCallback(async I=>{await y.sendMessage(I)},[y]),v=G.useCallback(async I=>{await y.append(I)},[y]),x=G.useCallback(async()=>{await y.reload()},[y]),C=G.useCallback(()=>{y.stop()},[y]),k=G.useCallback(()=>{y.clear()},[y]),T=G.useCallback(I=>{y.setMessagesManually(I)},[y]),A=G.useCallback(async I=>{await y.addToolResult(I)},[y]),M=G.useCallback(async I=>{await y.addToolApprovalResponse(I)},[y]);return{messages:r,sendMessage:g,append:v,reload:x,stop:C,isLoading:a,error:u,setMessages:T,clear:k,addToolResult:A,addToolApprovalResponse:M}}class E9{constructor(e={},n){this.kind="text",this.config=e,this.model=n}generateId(){return`${this.name}-${Date.now()}-${Math.random().toString(36).substring(7)}`}}const C9=t=>{if(t.conversation&&t.previous_response_id)throw new Error("Cannot use both 'conversation' and 'previous_response_id' in the same request.")},T9=t=>{A9(t),C9(t)},A9=t=>{const e=t.metadata;if(e&&Object.keys(e).length>16)throw new Error("Metadata cannot have more than 16 key-value pairs.");if(e&&Object.keys(e).some(a=>a.length>64))throw new Error("Metadata keys cannot be longer than 64 characters.");if(e&&Object.values(e).some(a=>a.length>512))throw new Error("Metadata values cannot be longer than 512 characters.")};function Vg(t){if(t!==null){if(Array.isArray(t))return t.map(e=>Vg(e));if(typeof t=="object"){const e={};for(const[n,r]of Object.entries(t)){const s=Vg(r);s!==void 0&&(e[n]=s)}return e}return t}}function Ll(t,e=[]){const n={...t};if(n.type==="object"&&n.properties){const r={...n.properties},s=Object.keys(r);for(const a of s){const l=r[a],u=!e.includes(a);l.type==="object"&&l.properties?r[a]=Ll(l,l.required||[]):l.type==="array"&&l.items?r[a]={...l,items:Ll(l.items,l.items.required||[])}:u&&(l.type&&!Array.isArray(l.type)?r[a]={...l,type:[l.type,"null"]}:Array.isArray(l.type)&&!l.type.includes("null")&&(r[a]={...l,type:[...l.type,"null"]}))}n.properties=r,n.required=s,n.additionalProperties=!1}return n.type==="array"&&n.items&&(n.items=Ll(n.items,n.items.required||[])),n}function R9(t){return{type:"apply_patch"}}function O9(t){return{type:"code_interpreter",container:t.metadata.container}}function N9(t){const e=t.metadata;return{type:"computer_use_preview",display_height:e.display_height,display_width:e.display_width,environment:e.environment}}function I9(t){const e=t.metadata;return{type:"custom",name:e.name,description:e.description,format:e.format}}function M9(t){const e=t.metadata;return{type:"file_search",vector_store_ids:e.vector_store_ids,max_num_results:e.max_num_results,ranking_options:e.ranking_options,filters:e.filters}}function D9(t){const e=t.inputSchema??{type:"object",properties:{},required:[]},n=Ll(e,e.required||[]);return n.additionalProperties=!1,{type:"function",name:t.name,description:t.description,parameters:n,strict:!0}}function j9(t){return{type:"image_generation",...t.metadata}}function L9(t){return{type:"local_shell"}}function z9(t){if(!t.server_url&&!t.connector_id)throw new Error("Either server_url or connector_id must be provided.");if(t.connector_id&&t.server_url)throw new Error("Only one of server_url or connector_id can be provided.")}function P9(t){const n={type:"mcp",...t.metadata};return z9(n),n}function B9(t){return{type:"shell"}}function $9(t){const e=t.metadata;return{type:e.type,search_context_size:e.search_context_size,user_location:e.user_location}}function U9(t){return t.metadata}function q9(t){return t.map(e=>{const n=new Set(["apply_patch","code_interpreter","computer_use_preview","file_search","image_generation","local_shell","mcp","shell","web_search_preview","web_search","custom"]),r=e.name;if(n.has(r))switch(r){case"apply_patch":return R9();case"code_interpreter":return O9(e);case"computer_use_preview":return N9(e);case"file_search":return M9(e);case"image_generation":return j9(e);case"local_shell":return L9();case"mcp":return P9(e);case"shell":return B9();case"web_search_preview":return $9(e);case"web_search":return U9(e);case"custom":return I9(e)}return D9(e)})}function De(t,e,n,r,s){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n}function ee(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)}let PC=function(){const{crypto:t}=globalThis;if(t?.randomUUID)return PC=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,r=>(+r^n()&15>>+r/4).toString(16))};function Hg(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const Gg=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};class Re extends Error{}class hn extends Re{constructor(e,n,r,s){super(`${hn.makeMessage(e,n,r)}`),this.status=e,this.headers=s,this.requestID=s?.get("x-request-id"),this.error=n;const a=n;this.code=a?.code,this.param=a?.param,this.type=a?.type}static makeMessage(e,n,r){const s=n?.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return e&&s?`${e} ${s}`:e?`${e} status code (no body)`:s||"(no status code or body)"}static generate(e,n,r,s){if(!e||!s)return new _d({message:r,cause:Gg(n)});const a=n?.error;return e===400?new BC(e,a,r,s):e===401?new $C(e,a,r,s):e===403?new UC(e,a,r,s):e===404?new qC(e,a,r,s):e===409?new FC(e,a,r,s):e===422?new VC(e,a,r,s):e===429?new HC(e,a,r,s):e>=500?new GC(e,a,r,s):new hn(e,a,r,s)}}class Er extends hn{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class _d extends hn{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class l0 extends _d{constructor({message:e}={}){super({message:e??"Request timed out."})}}class BC extends hn{}class $C extends hn{}class UC extends hn{}class qC extends hn{}class FC extends hn{}class VC extends hn{}class HC extends hn{}class GC extends hn{}class KC extends Re{constructor(){super("Could not parse response content as the length limit was reached")}}class ZC extends Re{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}class yl extends Error{constructor(e){super(e)}}const F9=/^[a-z][a-z0-9+.-]*:/i,V9=t=>F9.test(t);let qn=t=>(qn=Array.isArray,qn(t)),oS=qn;function QC(t){return typeof t!="object"?{}:t??{}}function H9(t){if(!t)return!0;for(const e in t)return!1;return!0}function G9(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Pm(t){return t!=null&&typeof t=="object"&&!Array.isArray(t)}const K9=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Re(`${t} must be an integer`);if(e<0)throw new Re(`${t} must be a positive integer`);return e},Z9=t=>{try{return JSON.parse(t)}catch{return}},fc=t=>new Promise(e=>setTimeout(e,t)),za="6.15.0",Q9=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u";function J9(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const Y9=()=>{const t=J9();if(t==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":za,"X-Stainless-OS":cS(Deno.build.os),"X-Stainless-Arch":lS(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:Deno.version?.deno??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":za,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(t==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":za,"X-Stainless-OS":cS(globalThis.process.platform??"unknown"),"X-Stainless-Arch":lS(globalThis.process.arch??"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":globalThis.process.version??"unknown"};const e=X9();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":za,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":za,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function X9(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const r=n.exec(navigator.userAgent);if(r){const s=r[1]||0,a=r[2]||0,l=r[3]||0;return{browser:e,version:`${s}.${a}.${l}`}}}return null}const lS=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",cS=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let uS;const W9=()=>uS??(uS=Y9());function eF(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new OpenAI({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function JC(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function YC(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return JC({start(){},async pull(n){const{done:r,value:s}=await e.next();r?n.close():n.enqueue(s)},async cancel(){await e.return?.()}})}function XC(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n?.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function tF(t){if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await t[Symbol.asyncIterator]().return?.();return}const e=t.getReader(),n=e.cancel();e.releaseLock(),await n}const nF=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)}),WC="RFC3986",eT=t=>String(t),fS={RFC1738:t=>String(t).replace(/%20/g,"+"),RFC3986:eT},rF="RFC1738";let Kg=(t,e)=>(Kg=Object.hasOwn??Function.prototype.call.bind(Object.prototype.hasOwnProperty),Kg(t,e));const $r=(()=>{const t=[];for(let e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t})(),Bm=1024,sF=(t,e,n,r,s)=>{if(t.length===0)return t;let a=t;if(typeof t=="symbol"?a=Symbol.prototype.toString.call(t):typeof t!="string"&&(a=String(t)),n==="iso-8859-1")return escape(a).replace(/%u[0-9a-f]{4}/gi,function(u){return"%26%23"+parseInt(u.slice(2),16)+"%3B"});let l="";for(let u=0;u<a.length;u+=Bm){const f=a.length>=Bm?a.slice(u,u+Bm):a,d=[];for(let m=0;m<f.length;++m){let p=f.charCodeAt(m);if(p===45||p===46||p===95||p===126||p>=48&&p<=57||p>=65&&p<=90||p>=97&&p<=122||s===rF&&(p===40||p===41)){d[d.length]=f.charAt(m);continue}if(p<128){d[d.length]=$r[p];continue}if(p<2048){d[d.length]=$r[192|p>>6]+$r[128|p&63];continue}if(p<55296||p>=57344){d[d.length]=$r[224|p>>12]+$r[128|p>>6&63]+$r[128|p&63];continue}m+=1,p=65536+((p&1023)<<10|f.charCodeAt(m)&1023),d[d.length]=$r[240|p>>18]+$r[128|p>>12&63]+$r[128|p>>6&63]+$r[128|p&63]}l+=d.join("")}return l};function iF(t){return!t||typeof t!="object"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))}function dS(t,e){if(qn(t)){const n=[];for(let r=0;r<t.length;r+=1)n.push(e(t[r]));return n}return e(t)}const tT={brackets(t){return String(t)+"[]"},comma:"comma",indices(t,e){return String(t)+"["+e+"]"},repeat(t){return String(t)}},nT=function(t,e){Array.prototype.push.apply(t,qn(e)?e:[e])};let hS;const Vt={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:sF,encodeValuesOnly:!1,format:WC,formatter:eT,indices:!1,serializeDate(t){return(hS??(hS=Function.prototype.call.bind(Date.prototype.toISOString)))(t)},skipNulls:!1,strictNullHandling:!1};function aF(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="symbol"||typeof t=="bigint"}const $m={};function rT(t,e,n,r,s,a,l,u,f,d,m,p,y,g,v,x,C,k){let T=t,A=k,M=0,I=!1;for(;(A=A.get($m))!==void 0&&!I;){const j=A.get(t);if(M+=1,typeof j<"u"){if(j===M)throw new RangeError("Cyclic object value");I=!0}typeof A.get($m)>"u"&&(M=0)}if(typeof d=="function"?T=d(e,T):T instanceof Date?T=y?.(T):n==="comma"&&qn(T)&&(T=dS(T,function(j){return j instanceof Date?y?.(j):j})),T===null){if(a)return f&&!x?f(e,Vt.encoder,C,"key",g):e;T=""}if(aF(T)||iF(T)){if(f){const j=x?e:f(e,Vt.encoder,C,"key",g);return[v?.(j)+"="+v?.(f(T,Vt.encoder,C,"value",g))]}return[v?.(e)+"="+v?.(String(T))]}const O=[];if(typeof T>"u")return O;let B;if(n==="comma"&&qn(T))x&&f&&(T=dS(T,f)),B=[{value:T.length>0?T.join(",")||null:void 0}];else if(qn(d))B=d;else{const j=Object.keys(T);B=m?j.sort(m):j}const U=u?String(e).replace(/\./g,"%2E"):String(e),K=r&&qn(T)&&T.length===1?U+"[]":U;if(s&&qn(T)&&T.length===0)return K+"[]";for(let j=0;j<B.length;++j){const J=B[j],ne=typeof J=="object"&&typeof J.value<"u"?J.value:T[J];if(l&&ne===null)continue;const he=p&&u?J.replace(/\./g,"%2E"):J,Y=qn(T)?typeof n=="function"?n(K,he):K:K+(p?"."+he:"["+he+"]");k.set(t,M);const q=new WeakMap;q.set($m,k),nT(O,rT(ne,Y,n,r,s,a,l,u,n==="comma"&&x&&qn(T)?null:f,d,m,p,y,g,v,x,C,q))}return O}function oF(t=Vt){if(typeof t.allowEmptyArrays<"u"&&typeof t.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof t.encodeDotInKeys<"u"&&typeof t.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(t.encoder!==null&&typeof t.encoder<"u"&&typeof t.encoder!="function")throw new TypeError("Encoder has to be a function.");const e=t.charset||Vt.charset;if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let n=WC;if(typeof t.format<"u"){if(!Kg(fS,t.format))throw new TypeError("Unknown format option provided.");n=t.format}const r=fS[n];let s=Vt.filter;(typeof t.filter=="function"||qn(t.filter))&&(s=t.filter);let a;if(t.arrayFormat&&t.arrayFormat in tT?a=t.arrayFormat:"indices"in t?a=t.indices?"indices":"repeat":a=Vt.arrayFormat,"commaRoundTrip"in t&&typeof t.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const l=typeof t.allowDots>"u"?t.encodeDotInKeys?!0:Vt.allowDots:!!t.allowDots;return{addQueryPrefix:typeof t.addQueryPrefix=="boolean"?t.addQueryPrefix:Vt.addQueryPrefix,allowDots:l,allowEmptyArrays:typeof t.allowEmptyArrays=="boolean"?!!t.allowEmptyArrays:Vt.allowEmptyArrays,arrayFormat:a,charset:e,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:Vt.charsetSentinel,commaRoundTrip:!!t.commaRoundTrip,delimiter:typeof t.delimiter>"u"?Vt.delimiter:t.delimiter,encode:typeof t.encode=="boolean"?t.encode:Vt.encode,encodeDotInKeys:typeof t.encodeDotInKeys=="boolean"?t.encodeDotInKeys:Vt.encodeDotInKeys,encoder:typeof t.encoder=="function"?t.encoder:Vt.encoder,encodeValuesOnly:typeof t.encodeValuesOnly=="boolean"?t.encodeValuesOnly:Vt.encodeValuesOnly,filter:s,format:n,formatter:r,serializeDate:typeof t.serializeDate=="function"?t.serializeDate:Vt.serializeDate,skipNulls:typeof t.skipNulls=="boolean"?t.skipNulls:Vt.skipNulls,sort:typeof t.sort=="function"?t.sort:null,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:Vt.strictNullHandling}}function lF(t,e={}){let n=t;const r=oF(e);let s,a;typeof r.filter=="function"?(a=r.filter,n=a("",n)):qn(r.filter)&&(a=r.filter,s=a);const l=[];if(typeof n!="object"||n===null)return"";const u=tT[r.arrayFormat],f=u==="comma"&&r.commaRoundTrip;s||(s=Object.keys(n)),r.sort&&s.sort(r.sort);const d=new WeakMap;for(let y=0;y<s.length;++y){const g=s[y];r.skipNulls&&n[g]===null||nT(l,rT(n[g],g,u,f,r.allowEmptyArrays,r.strictNullHandling,r.skipNulls,r.encodeDotInKeys,r.encode?r.encoder:null,r.filter,r.sort,r.allowDots,r.serializeDate,r.format,r.formatter,r.encodeValuesOnly,r.charset,d))}const m=l.join(r.delimiter);let p=r.addQueryPrefix===!0?"?":"";return r.charsetSentinel&&(r.charset==="iso-8859-1"?p+="utf8=%26%2310003%3B&":p+="utf8=%E2%9C%93&"),m.length>0?p+m:""}function cF(t){let e=0;for(const s of t)e+=s.length;const n=new Uint8Array(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return n}let pS;function c0(t){let e;return(pS??(e=new globalThis.TextEncoder,pS=e.encode.bind(e)))(t)}let mS;function gS(t){let e;return(mS??(e=new globalThis.TextDecoder,mS=e.decode.bind(e)))(t)}var rr,sr;class vd{constructor(){rr.set(this,void 0),sr.set(this,void 0),De(this,rr,new Uint8Array),De(this,sr,null)}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?c0(e):e;De(this,rr,cF([ee(this,rr,"f"),n]));const r=[];let s;for(;(s=uF(ee(this,rr,"f"),ee(this,sr,"f")))!=null;){if(s.carriage&&ee(this,sr,"f")==null){De(this,sr,s.index);continue}if(ee(this,sr,"f")!=null&&(s.index!==ee(this,sr,"f")+1||s.carriage)){r.push(gS(ee(this,rr,"f").subarray(0,ee(this,sr,"f")-1))),De(this,rr,ee(this,rr,"f").subarray(ee(this,sr,"f"))),De(this,sr,null);continue}const a=ee(this,sr,"f")!==null?s.preceding-1:s.preceding,l=gS(ee(this,rr,"f").subarray(0,a));r.push(l),De(this,rr,ee(this,rr,"f").subarray(s.index)),De(this,sr,null)}return r}flush(){return ee(this,rr,"f").length?this.decode(`
`):[]}}rr=new WeakMap,sr=new WeakMap;vd.NEWLINE_CHARS=new Set([`
`,"\r"]);vd.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function uF(t,e){for(let s=e??0;s<t.length;s++){if(t[s]===10)return{preceding:s,index:s+1,carriage:!1};if(t[s]===13)return{preceding:s,index:s+1,carriage:!0}}return null}function fF(t){for(let r=0;r<t.length-1;r++){if(t[r]===10&&t[r+1]===10||t[r]===13&&t[r+1]===13)return r+2;if(t[r]===13&&t[r+1]===10&&r+3<t.length&&t[r+2]===13&&t[r+3]===10)return r+4}return-1}const Ff={off:0,error:200,warn:300,info:400,debug:500},yS=(t,e,n)=>{if(t){if(G9(Ff,t))return t;fn(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(Ff))}`)}};function bl(){}function Pu(t,e,n){return!e||Ff[t]>Ff[n]?bl:e[t].bind(e)}const dF={error:bl,warn:bl,info:bl,debug:bl};let bS=new WeakMap;function fn(t){const e=t.logger,n=t.logLevel??"off";if(!e)return dF;const r=bS.get(e);if(r&&r[0]===n)return r[1];const s={error:Pu("error",e,n),warn:Pu("warn",e,n),info:Pu("info",e,n),debug:Pu("debug",e,n)};return bS.set(e,[n,s]),s}const Ni=t=>(t.options&&(t.options={...t.options},delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);var fl;class Gr{constructor(e,n,r){this.iterator=e,fl.set(this,void 0),this.controller=n,De(this,fl,r)}static fromSSEResponse(e,n,r){let s=!1;const a=r?fn(r):console;async function*l(){if(s)throw new Re("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let u=!1;try{for await(const f of hF(e,n))if(!u){if(f.data.startsWith("[DONE]")){u=!0;continue}if(f.event===null||!f.event.startsWith("thread.")){let d;try{d=JSON.parse(f.data)}catch(m){throw a.error("Could not parse message into JSON:",f.data),a.error("From chunk:",f.raw),m}if(d&&d.error)throw new hn(void 0,d.error,void 0,e.headers);yield d}else{let d;try{d=JSON.parse(f.data)}catch(m){throw console.error("Could not parse message into JSON:",f.data),console.error("From chunk:",f.raw),m}if(f.event=="error")throw new hn(void 0,d.error,d.message,void 0);yield{event:f.event,data:d}}}u=!0}catch(f){if(Hg(f))return;throw f}finally{u||n.abort()}}return new Gr(l,n,r)}static fromReadableStream(e,n,r){let s=!1;async function*a(){const u=new vd,f=XC(e);for await(const d of f)for(const m of u.decode(d))yield m;for(const d of u.flush())yield d}async function*l(){if(s)throw new Re("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let u=!1;try{for await(const f of a())u||f&&(yield JSON.parse(f));u=!0}catch(f){if(Hg(f))return;throw f}finally{u||n.abort()}}return new Gr(l,n,r)}[(fl=new WeakMap,Symbol.asyncIterator)](){return this.iterator()}tee(){const e=[],n=[],r=this.iterator(),s=a=>({next:()=>{if(a.length===0){const l=r.next();e.push(l),n.push(l)}return a.shift()}});return[new Gr(()=>s(e),this.controller,ee(this,fl,"f")),new Gr(()=>s(n),this.controller,ee(this,fl,"f"))]}toReadableStream(){const e=this;let n;return JC({async start(){n=e[Symbol.asyncIterator]()},async pull(r){try{const{value:s,done:a}=await n.next();if(a)return r.close();const l=c0(JSON.stringify(s)+`
`);r.enqueue(l)}catch(s){r.error(s)}},async cancel(){await n.return?.()}})}}async function*hF(t,e){if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Re("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Re("Attempted to iterate over a response with no body");const n=new mF,r=new vd,s=XC(t.body);for await(const a of pF(s))for(const l of r.decode(a)){const u=n.decode(l);u&&(yield u)}for(const a of r.flush()){const l=n.decode(a);l&&(yield l)}}async function*pF(t){let e=new Uint8Array;for await(const n of t){if(n==null)continue;const r=n instanceof ArrayBuffer?new Uint8Array(n):typeof n=="string"?c0(n):n;let s=new Uint8Array(e.length+r.length);s.set(e),s.set(r,e.length),e=s;let a;for(;(a=fF(e))!==-1;)yield e.slice(0,a),e=e.slice(a)}e.length>0&&(yield e)}class mF{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const a={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],a}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,r,s]=gF(e,":");return s.startsWith(" ")&&(s=s.substring(1)),n==="event"?this.event=s:n==="data"&&this.data.push(s),null}}function gF(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}async function sT(t,e){const{response:n,requestLogID:r,retryOfRequestLogID:s,startTime:a}=e,l=await(async()=>{if(e.options.stream)return fn(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):Gr.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const f=n.headers.get("content-type")?.split(";")[0]?.trim();if(f?.includes("application/json")||f?.endsWith("+json")){const p=await n.json();return iT(p,n)}return await n.text()})();return fn(t).debug(`[${r}] response parsed`,Ni({retryOfRequestLogID:s,url:n.url,status:n.status,body:l,durationMs:Date.now()-a})),l}function iT(t,e){return!t||typeof t!="object"||Array.isArray(t)?t:Object.defineProperty(t,"_request_id",{value:e.headers.get("x-request-id"),enumerable:!1})}var _l;class xd extends Promise{constructor(e,n,r=sT){super(s=>{s(null)}),this.responsePromise=n,this.parseResponse=r,_l.set(this,void 0),De(this,_l,e)}_thenUnwrap(e){return new xd(ee(this,_l,"f"),this.responsePromise,async(n,r)=>iT(e(await this.parseResponse(n,r),r),r.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n,request_id:n.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(ee(this,_l,"f"),e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}_l=new WeakMap;var Bu;class u0{constructor(e,n,r,s){Bu.set(this,void 0),De(this,Bu,e),this.options=s,this.response=n,this.body=r}hasNextPage(){return this.getPaginatedItems().length?this.nextPageRequestOptions()!=null:!1}async getNextPage(){const e=this.nextPageRequestOptions();if(!e)throw new Re("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");return await ee(this,Bu,"f").requestAPIList(this.constructor,e)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(Bu=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const n of e.getPaginatedItems())yield n}}class yF extends xd{constructor(e,n,r){super(e,n,async(s,a)=>new r(s,a.response,await sT(s,a),a.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const n of e)yield n}}class wd extends u0{constructor(e,n,r,s){super(e,n,r,s),this.data=r.data||[],this.object=r.object}getPaginatedItems(){return this.data??[]}nextPageRequestOptions(){return null}}class Ut extends u0{constructor(e,n,r,s){super(e,n,r,s),this.data=r.data||[],this.has_more=r.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){const e=this.getPaginatedItems(),n=e[e.length-1]?.id;return n?{...this.options,query:{...QC(this.options.query),after:n}}:null}}class Vf extends u0{constructor(e,n,r,s){super(e,n,r,s),this.data=r.data||[],this.has_more=r.has_more||!1,this.last_id=r.last_id||""}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){const e=this.last_id;return e?{...this.options,query:{...QC(this.options.query),after:e}}:null}}const aT=()=>{if(typeof File>"u"){const{process:t}=globalThis,e=typeof t?.versions?.node=="string"&&parseInt(t.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(e?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function zl(t,e,n){return aT(),new File(t,e??"unknown_file",n)}function nf(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const f0=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function",_S=async(t,e)=>Zg(t.body)?{...t,body:await oT(t.body,e)}:t,Bi=async(t,e)=>({...t,body:await oT(t.body,e)}),vS=new WeakMap;function bF(t){const e=typeof t=="function"?t:t.fetch,n=vS.get(e);if(n)return n;const r=(async()=>{try{const s="Response"in e?e.Response:(await e("data:,")).constructor,a=new FormData;return a.toString()!==await new s(a).text()}catch{return!0}})();return vS.set(e,r),r}const oT=async(t,e)=>{if(!await bF(e))throw new TypeError("The provided fetch function does not support file uploads with the current global FormData class.");const n=new FormData;return await Promise.all(Object.entries(t||{}).map(([r,s])=>Qg(n,r,s))),n},lT=t=>t instanceof Blob&&"name"in t,_F=t=>typeof t=="object"&&t!==null&&(t instanceof Response||f0(t)||lT(t)),Zg=t=>{if(_F(t))return!0;if(Array.isArray(t))return t.some(Zg);if(t&&typeof t=="object"){for(const e in t)if(Zg(t[e]))return!0}return!1},Qg=async(t,e,n)=>{if(n!==void 0){if(n==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")t.append(e,String(n));else if(n instanceof Response)t.append(e,zl([await n.blob()],nf(n)));else if(f0(n))t.append(e,zl([await new Response(YC(n)).blob()],nf(n)));else if(lT(n))t.append(e,n,nf(n));else if(Array.isArray(n))await Promise.all(n.map(r=>Qg(t,e+"[]",r)));else if(typeof n=="object")await Promise.all(Object.entries(n).map(([r,s])=>Qg(t,`${e}[${r}]`,s)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${n} instead`)}},cT=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",vF=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&cT(t),xF=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function wF(t,e,n){if(aT(),t=await t,vF(t))return t instanceof File?t:zl([await t.arrayBuffer()],t.name);if(xF(t)){const s=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),zl(await Jg(s),e,n)}const r=await Jg(t);if(e||(e=nf(t)),!n?.type){const s=r.find(a=>typeof a=="object"&&"type"in a&&a.type);typeof s=="string"&&(n={...n,type:s})}return zl(r,e,n)}async function Jg(t){let e=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)e.push(t);else if(cT(t))e.push(t instanceof Blob?t:await t.arrayBuffer());else if(f0(t))for await(const n of t)e.push(...await Jg(n));else{const n=t?.constructor?.name;throw new Error(`Unexpected data type: ${typeof t}${n?`; constructor: ${n}`:""}${SF(t)}`)}return e}function SF(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}class Te{constructor(e){this._client=e}}function uT(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const xS=Object.freeze(Object.create(null)),kF=(t=uT)=>function(n,...r){if(n.length===1)return n[0];let s=!1;const a=[],l=n.reduce((m,p,y)=>{/[?#]/.test(p)&&(s=!0);const g=r[y];let v=(s?encodeURIComponent:t)(""+g);return y!==r.length&&(g==null||typeof g=="object"&&g.toString===Object.getPrototypeOf(Object.getPrototypeOf(g.hasOwnProperty??xS)??xS)?.toString)&&(v=g+"",a.push({start:m.length+p.length,length:v.length,error:`Value of type ${Object.prototype.toString.call(g).slice(8,-1)} is not a valid path parameter`})),m+p+(y===r.length?"":v)},""),u=l.split(/[?#]/,1)[0],f=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let d;for(;(d=f.exec(u))!==null;)a.push({start:d.index,length:d[0].length,error:`Value "${d[0]}" can't be safely passed as a path parameter`});if(a.sort((m,p)=>m.start-p.start),a.length>0){let m=0;const p=a.reduce((y,g)=>{const v=" ".repeat(g.start-m),x="^".repeat(g.length);return m=g.start+g.length,y+v+x},"");throw new Re(`Path parameters result in path with invalid segments:
${a.map(y=>y.error).join(`
`)}
${l}
${p}`)}return l},me=kF(uT);let fT=class extends Te{list(e,n={},r){return this._client.getAPIList(me`/chat/completions/${e}/messages`,Ut,{query:n,...r})}};function Hf(t){return t!==void 0&&"function"in t&&t.function!==void 0}function d0(t){return t?.$brand==="auto-parseable-response-format"}function dc(t){return t?.$brand==="auto-parseable-tool"}function EF(t,e){return!e||!dT(e)?{...t,choices:t.choices.map(n=>(hT(n.message.tool_calls),{...n,message:{...n.message,parsed:null,...n.message.tool_calls?{tool_calls:n.message.tool_calls}:void 0}}))}:h0(t,e)}function h0(t,e){const n=t.choices.map(r=>{if(r.finish_reason==="length")throw new KC;if(r.finish_reason==="content_filter")throw new ZC;return hT(r.message.tool_calls),{...r,message:{...r.message,...r.message.tool_calls?{tool_calls:r.message.tool_calls?.map(s=>TF(e,s))??void 0}:void 0,parsed:r.message.content&&!r.message.refusal?CF(e,r.message.content):null}}});return{...t,choices:n}}function CF(t,e){return t.response_format?.type!=="json_schema"?null:t.response_format?.type==="json_schema"?"$parseRaw"in t.response_format?t.response_format.$parseRaw(e):JSON.parse(e):null}function TF(t,e){const n=t.tools?.find(r=>Hf(r)&&r.function?.name===e.function.name);return{...e,function:{...e.function,parsed_arguments:dc(n)?n.$parseRaw(e.function.arguments):n?.function.strict?JSON.parse(e.function.arguments):null}}}function AF(t,e){if(!t||!("tools"in t)||!t.tools)return!1;const n=t.tools?.find(r=>Hf(r)&&r.function?.name===e.function.name);return Hf(n)&&(dc(n)||n?.function.strict||!1)}function dT(t){return d0(t.response_format)?!0:t.tools?.some(e=>dc(e)||e.type==="function"&&e.function.strict===!0)??!1}function hT(t){for(const e of t||[])if(e.type!=="function")throw new Re(`Currently only \`function\` tool calls are supported; Received \`${e.type}\``)}function RF(t){for(const e of t??[]){if(e.type!=="function")throw new Re(`Currently only \`function\` tool types support auto-parsing; Received \`${e.type}\``);if(e.function.strict!==!0)throw new Re(`The \`${e.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}const Gf=t=>t?.role==="assistant",pT=t=>t?.role==="tool";var Yg,rf,sf,vl,xl,af,wl,_s,Sl,Kf,Zf,Pa,mT;class p0{constructor(){Yg.add(this),this.controller=new AbortController,rf.set(this,void 0),sf.set(this,()=>{}),vl.set(this,()=>{}),xl.set(this,void 0),af.set(this,()=>{}),wl.set(this,()=>{}),_s.set(this,{}),Sl.set(this,!1),Kf.set(this,!1),Zf.set(this,!1),Pa.set(this,!1),De(this,rf,new Promise((e,n)=>{De(this,sf,e,"f"),De(this,vl,n,"f")})),De(this,xl,new Promise((e,n)=>{De(this,af,e,"f"),De(this,wl,n,"f")})),ee(this,rf,"f").catch(()=>{}),ee(this,xl,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},ee(this,Yg,"m",mT).bind(this))},0)}_connected(){this.ended||(ee(this,sf,"f").call(this),this._emit("connect"))}get ended(){return ee(this,Sl,"f")}get errored(){return ee(this,Kf,"f")}get aborted(){return ee(this,Zf,"f")}abort(){this.controller.abort()}on(e,n){return(ee(this,_s,"f")[e]||(ee(this,_s,"f")[e]=[])).push({listener:n}),this}off(e,n){const r=ee(this,_s,"f")[e];if(!r)return this;const s=r.findIndex(a=>a.listener===n);return s>=0&&r.splice(s,1),this}once(e,n){return(ee(this,_s,"f")[e]||(ee(this,_s,"f")[e]=[])).push({listener:n,once:!0}),this}emitted(e){return new Promise((n,r)=>{De(this,Pa,!0),e!=="error"&&this.once("error",r),this.once(e,n)})}async done(){De(this,Pa,!0),await ee(this,xl,"f")}_emit(e,...n){if(ee(this,Sl,"f"))return;e==="end"&&(De(this,Sl,!0),ee(this,af,"f").call(this));const r=ee(this,_s,"f")[e];if(r&&(ee(this,_s,"f")[e]=r.filter(s=>!s.once),r.forEach(({listener:s})=>s(...n))),e==="abort"){const s=n[0];!ee(this,Pa,"f")&&!r?.length&&Promise.reject(s),ee(this,vl,"f").call(this,s),ee(this,wl,"f").call(this,s),this._emit("end");return}if(e==="error"){const s=n[0];!ee(this,Pa,"f")&&!r?.length&&Promise.reject(s),ee(this,vl,"f").call(this,s),ee(this,wl,"f").call(this,s),this._emit("end")}}_emitFinal(){}}rf=new WeakMap,sf=new WeakMap,vl=new WeakMap,xl=new WeakMap,af=new WeakMap,wl=new WeakMap,_s=new WeakMap,Sl=new WeakMap,Kf=new WeakMap,Zf=new WeakMap,Pa=new WeakMap,Yg=new WeakSet,mT=function(e){if(De(this,Kf,!0),e instanceof Error&&e.name==="AbortError"&&(e=new Er),e instanceof Er)return De(this,Zf,!0),this._emit("abort",e);if(e instanceof Re)return this._emit("error",e);if(e instanceof Error){const n=new Re(e.message);return n.cause=e,this._emit("error",n)}return this._emit("error",new Re(String(e)))};function OF(t){return typeof t.parse=="function"}var Rn,Xg,Qf,Wg,ey,ty,gT,yT;const NF=10;class bT extends p0{constructor(){super(...arguments),Rn.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){this._chatCompletions.push(e),this._emit("chatCompletion",e);const n=e.choices[0]?.message;return n&&this._addMessage(n),e}_addMessage(e,n=!0){if("content"in e||(e.content=null),this.messages.push(e),n){if(this._emit("message",e),pT(e)&&e.content)this._emit("functionToolCallResult",e.content);else if(Gf(e)&&e.tool_calls)for(const r of e.tool_calls)r.type==="function"&&this._emit("functionToolCall",r.function)}}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new Re("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),ee(this,Rn,"m",Xg).call(this)}async finalMessage(){return await this.done(),ee(this,Rn,"m",Qf).call(this)}async finalFunctionToolCall(){return await this.done(),ee(this,Rn,"m",Wg).call(this)}async finalFunctionToolCallResult(){return await this.done(),ee(this,Rn,"m",ey).call(this)}async totalUsage(){return await this.done(),ee(this,Rn,"m",ty).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const n=ee(this,Rn,"m",Qf).call(this);n&&this._emit("finalMessage",n);const r=ee(this,Rn,"m",Xg).call(this);r&&this._emit("finalContent",r);const s=ee(this,Rn,"m",Wg).call(this);s&&this._emit("finalFunctionToolCall",s);const a=ee(this,Rn,"m",ey).call(this);a!=null&&this._emit("finalFunctionToolCallResult",a),this._chatCompletions.some(l=>l.usage)&&this._emit("totalUsage",ee(this,Rn,"m",ty).call(this))}async _createChatCompletion(e,n,r){const s=r?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),ee(this,Rn,"m",gT).call(this,n);const a=await e.chat.completions.create({...n,stream:!1},{...r,signal:this.controller.signal});return this._connected(),this._addChatCompletion(h0(a,n))}async _runChatCompletion(e,n,r){for(const s of n.messages)this._addMessage(s,!1);return await this._createChatCompletion(e,n,r)}async _runTools(e,n,r){const s="tool",{tool_choice:a="auto",stream:l,...u}=n,f=typeof a!="string"&&a.type==="function"&&a?.function?.name,{maxChatCompletions:d=NF}=r||{},m=n.tools.map(g=>{if(dc(g)){if(!g.$callback)throw new Re("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:g.$callback,name:g.function.name,description:g.function.description||"",parameters:g.function.parameters,parse:g.$parseRaw,strict:!0}}}return g}),p={};for(const g of m)g.type==="function"&&(p[g.function.name||g.function.function.name]=g.function);const y="tools"in n?m.map(g=>g.type==="function"?{type:"function",function:{name:g.function.name||g.function.function.name,parameters:g.function.parameters,description:g.function.description,strict:g.function.strict}}:g):void 0;for(const g of n.messages)this._addMessage(g,!1);for(let g=0;g<d;++g){const x=(await this._createChatCompletion(e,{...u,tool_choice:a,tools:y,messages:[...this.messages]},r)).choices[0]?.message;if(!x)throw new Re("missing message in ChatCompletion response");if(!x.tool_calls?.length)return;for(const C of x.tool_calls){if(C.type!=="function")continue;const k=C.id,{name:T,arguments:A}=C.function,M=p[T];if(M){if(f&&f!==T){const U=`Invalid tool_call: ${JSON.stringify(T)}. ${JSON.stringify(f)} requested. Please try again`;this._addMessage({role:s,tool_call_id:k,content:U});continue}}else{const U=`Invalid tool_call: ${JSON.stringify(T)}. Available options are: ${Object.keys(p).map(K=>JSON.stringify(K)).join(", ")}. Please try again`;this._addMessage({role:s,tool_call_id:k,content:U});continue}let I;try{I=OF(M)?await M.parse(A):A}catch(U){const K=U instanceof Error?U.message:String(U);this._addMessage({role:s,tool_call_id:k,content:K});continue}const O=await M.function(I,this),B=ee(this,Rn,"m",yT).call(this,O);if(this._addMessage({role:s,tool_call_id:k,content:B}),f)return}}}}Rn=new WeakSet,Xg=function(){return ee(this,Rn,"m",Qf).call(this).content??null},Qf=function(){let e=this.messages.length;for(;e-- >0;){const n=this.messages[e];if(Gf(n))return{...n,content:n.content??null,refusal:n.refusal??null}}throw new Re("stream ended without producing a ChatCompletionMessage with role=assistant")},Wg=function(){for(let e=this.messages.length-1;e>=0;e--){const n=this.messages[e];if(Gf(n)&&n?.tool_calls?.length)return n.tool_calls.filter(r=>r.type==="function").at(-1)?.function}},ey=function(){for(let e=this.messages.length-1;e>=0;e--){const n=this.messages[e];if(pT(n)&&n.content!=null&&typeof n.content=="string"&&this.messages.some(r=>r.role==="assistant"&&r.tool_calls?.some(s=>s.type==="function"&&s.id===n.tool_call_id)))return n.content}},ty=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:n}of this._chatCompletions)n&&(e.completion_tokens+=n.completion_tokens,e.prompt_tokens+=n.prompt_tokens,e.total_tokens+=n.total_tokens);return e},gT=function(e){if(e.n!=null&&e.n>1)throw new Re("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},yT=function(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)};class m0 extends bT{static runTools(e,n,r){const s=new m0,a={...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"runTools"}};return s._run(()=>s._runTools(e,n,a)),s}_addMessage(e,n=!0){super._addMessage(e,n),Gf(e)&&e.content&&this._emit("content",e.content)}}const _T=1,vT=2,xT=4,wT=8,ST=16,kT=32,ET=64,CT=128,TT=256,AT=CT|TT,RT=ST|kT|AT|ET,OT=_T|vT|RT,NT=xT|wT,IF=OT|NT,nn={STR:_T,NUM:vT,ARR:xT,OBJ:wT,NULL:ST,BOOL:kT,NAN:ET,INFINITY:CT,MINUS_INFINITY:TT,INF:AT,SPECIAL:RT,ATOM:OT,COLLECTION:NT,ALL:IF};class MF extends Error{}class DF extends Error{}function jF(t,e=nn.ALL){if(typeof t!="string")throw new TypeError(`expecting str, got ${typeof t}`);if(!t.trim())throw new Error(`${t} is empty`);return LF(t.trim(),e)}const LF=(t,e)=>{const n=t.length;let r=0;const s=y=>{throw new MF(`${y} at position ${r}`)},a=y=>{throw new DF(`${y} at position ${r}`)},l=()=>(p(),r>=n&&s("Unexpected end of input"),t[r]==='"'?u():t[r]==="{"?f():t[r]==="["?d():t.substring(r,r+4)==="null"||nn.NULL&e&&n-r<4&&"null".startsWith(t.substring(r))?(r+=4,null):t.substring(r,r+4)==="true"||nn.BOOL&e&&n-r<4&&"true".startsWith(t.substring(r))?(r+=4,!0):t.substring(r,r+5)==="false"||nn.BOOL&e&&n-r<5&&"false".startsWith(t.substring(r))?(r+=5,!1):t.substring(r,r+8)==="Infinity"||nn.INFINITY&e&&n-r<8&&"Infinity".startsWith(t.substring(r))?(r+=8,1/0):t.substring(r,r+9)==="-Infinity"||nn.MINUS_INFINITY&e&&1<n-r&&n-r<9&&"-Infinity".startsWith(t.substring(r))?(r+=9,-1/0):t.substring(r,r+3)==="NaN"||nn.NAN&e&&n-r<3&&"NaN".startsWith(t.substring(r))?(r+=3,NaN):m()),u=()=>{const y=r;let g=!1;for(r++;r<n&&(t[r]!=='"'||g&&t[r-1]==="\\");)g=t[r]==="\\"?!g:!1,r++;if(t.charAt(r)=='"')try{return JSON.parse(t.substring(y,++r-Number(g)))}catch(v){a(String(v))}else if(nn.STR&e)try{return JSON.parse(t.substring(y,r-Number(g))+'"')}catch{return JSON.parse(t.substring(y,t.lastIndexOf("\\"))+'"')}s("Unterminated string literal")},f=()=>{r++,p();const y={};try{for(;t[r]!=="}";){if(p(),r>=n&&nn.OBJ&e)return y;const g=u();p(),r++;try{const v=l();Object.defineProperty(y,g,{value:v,writable:!0,enumerable:!0,configurable:!0})}catch(v){if(nn.OBJ&e)return y;throw v}p(),t[r]===","&&r++}}catch{if(nn.OBJ&e)return y;s("Expected '}' at end of object")}return r++,y},d=()=>{r++;const y=[];try{for(;t[r]!=="]";)y.push(l()),p(),t[r]===","&&r++}catch{if(nn.ARR&e)return y;s("Expected ']' at end of array")}return r++,y},m=()=>{if(r===0){t==="-"&&nn.NUM&e&&s("Not sure what '-' is");try{return JSON.parse(t)}catch(g){if(nn.NUM&e)try{return t[t.length-1]==="."?JSON.parse(t.substring(0,t.lastIndexOf("."))):JSON.parse(t.substring(0,t.lastIndexOf("e")))}catch{}a(String(g))}}const y=r;for(t[r]==="-"&&r++;t[r]&&!",]}".includes(t[r]);)r++;r==n&&!(nn.NUM&e)&&s("Unterminated number literal");try{return JSON.parse(t.substring(y,r))}catch{t.substring(y,r)==="-"&&nn.NUM&e&&s("Not sure what '-' is");try{return JSON.parse(t.substring(y,t.lastIndexOf("e")))}catch(v){a(String(v))}}},p=()=>{for(;r<n&&` 
\r	`.includes(t[r]);)r++};return l()},wS=t=>jF(t,nn.ALL^nn.NUM);var Ft,bs,Ma,Ys,Um,$u,qm,Fm,Vm,Uu,Hm,SS;class Xl extends bT{constructor(e){super(),Ft.add(this),bs.set(this,void 0),Ma.set(this,void 0),Ys.set(this,void 0),De(this,bs,e),De(this,Ma,[])}get currentChatCompletionSnapshot(){return ee(this,Ys,"f")}static fromReadableStream(e){const n=new Xl(null);return n._run(()=>n._fromReadableStream(e)),n}static createChatCompletion(e,n,r){const s=new Xl(n);return s._run(()=>s._runChatCompletion(e,{...n,stream:!0},{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),s}async _createChatCompletion(e,n,r){super._createChatCompletion;const s=r?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),ee(this,Ft,"m",Um).call(this);const a=await e.chat.completions.create({...n,stream:!0},{...r,signal:this.controller.signal});this._connected();for await(const l of a)ee(this,Ft,"m",qm).call(this,l);if(a.controller.signal?.aborted)throw new Er;return this._addChatCompletion(ee(this,Ft,"m",Uu).call(this))}async _fromReadableStream(e,n){const r=n?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),ee(this,Ft,"m",Um).call(this),this._connected();const s=Gr.fromReadableStream(e,this.controller);let a;for await(const l of s)a&&a!==l.id&&this._addChatCompletion(ee(this,Ft,"m",Uu).call(this)),ee(this,Ft,"m",qm).call(this,l),a=l.id;if(s.controller.signal?.aborted)throw new Er;return this._addChatCompletion(ee(this,Ft,"m",Uu).call(this))}[(bs=new WeakMap,Ma=new WeakMap,Ys=new WeakMap,Ft=new WeakSet,Um=function(){this.ended||De(this,Ys,void 0)},$u=function(n){let r=ee(this,Ma,"f")[n.index];return r||(r={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},ee(this,Ma,"f")[n.index]=r,r)},qm=function(n){if(this.ended)return;const r=ee(this,Ft,"m",SS).call(this,n);this._emit("chunk",n,r);for(const s of n.choices){const a=r.choices[s.index];s.delta.content!=null&&a.message?.role==="assistant"&&a.message?.content&&(this._emit("content",s.delta.content,a.message.content),this._emit("content.delta",{delta:s.delta.content,snapshot:a.message.content,parsed:a.message.parsed})),s.delta.refusal!=null&&a.message?.role==="assistant"&&a.message?.refusal&&this._emit("refusal.delta",{delta:s.delta.refusal,snapshot:a.message.refusal}),s.logprobs?.content!=null&&a.message?.role==="assistant"&&this._emit("logprobs.content.delta",{content:s.logprobs?.content,snapshot:a.logprobs?.content??[]}),s.logprobs?.refusal!=null&&a.message?.role==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:s.logprobs?.refusal,snapshot:a.logprobs?.refusal??[]});const l=ee(this,Ft,"m",$u).call(this,a);a.finish_reason&&(ee(this,Ft,"m",Vm).call(this,a),l.current_tool_call_index!=null&&ee(this,Ft,"m",Fm).call(this,a,l.current_tool_call_index));for(const u of s.delta.tool_calls??[])l.current_tool_call_index!==u.index&&(ee(this,Ft,"m",Vm).call(this,a),l.current_tool_call_index!=null&&ee(this,Ft,"m",Fm).call(this,a,l.current_tool_call_index)),l.current_tool_call_index=u.index;for(const u of s.delta.tool_calls??[]){const f=a.message.tool_calls?.[u.index];f?.type&&(f?.type==="function"?this._emit("tool_calls.function.arguments.delta",{name:f.function?.name,index:u.index,arguments:f.function.arguments,parsed_arguments:f.function.parsed_arguments,arguments_delta:u.function?.arguments??""}):(f?.type,void 0))}}},Fm=function(n,r){if(ee(this,Ft,"m",$u).call(this,n).done_tool_calls.has(r))return;const a=n.message.tool_calls?.[r];if(!a)throw new Error("no tool call snapshot");if(!a.type)throw new Error("tool call snapshot missing `type`");if(a.type==="function"){const l=ee(this,bs,"f")?.tools?.find(u=>Hf(u)&&u.function.name===a.function.name);this._emit("tool_calls.function.arguments.done",{name:a.function.name,index:r,arguments:a.function.arguments,parsed_arguments:dc(l)?l.$parseRaw(a.function.arguments):l?.function.strict?JSON.parse(a.function.arguments):null})}else a.type},Vm=function(n){const r=ee(this,Ft,"m",$u).call(this,n);if(n.message.content&&!r.content_done){r.content_done=!0;const s=ee(this,Ft,"m",Hm).call(this);this._emit("content.done",{content:n.message.content,parsed:s?s.$parseRaw(n.message.content):null})}n.message.refusal&&!r.refusal_done&&(r.refusal_done=!0,this._emit("refusal.done",{refusal:n.message.refusal})),n.logprobs?.content&&!r.logprobs_content_done&&(r.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:n.logprobs.content})),n.logprobs?.refusal&&!r.logprobs_refusal_done&&(r.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:n.logprobs.refusal}))},Uu=function(){if(this.ended)throw new Re("stream has ended, this shouldn't happen");const n=ee(this,Ys,"f");if(!n)throw new Re("request ended without sending any chunks");return De(this,Ys,void 0),De(this,Ma,[]),zF(n,ee(this,bs,"f"))},Hm=function(){const n=ee(this,bs,"f")?.response_format;return d0(n)?n:null},SS=function(n){var r,s,a,l;let u=ee(this,Ys,"f");const{choices:f,...d}=n;u?Object.assign(u,d):u=De(this,Ys,{...d,choices:[]});for(const{delta:m,finish_reason:p,index:y,logprobs:g=null,...v}of n.choices){let x=u.choices[y];if(x||(x=u.choices[y]={finish_reason:p,index:y,message:{},logprobs:g,...v}),g)if(!x.logprobs)x.logprobs=Object.assign({},g);else{const{content:O,refusal:B,...U}=g;Object.assign(x.logprobs,U),O&&((r=x.logprobs).content??(r.content=[]),x.logprobs.content.push(...O)),B&&((s=x.logprobs).refusal??(s.refusal=[]),x.logprobs.refusal.push(...B))}if(p&&(x.finish_reason=p,ee(this,bs,"f")&&dT(ee(this,bs,"f")))){if(p==="length")throw new KC;if(p==="content_filter")throw new ZC}if(Object.assign(x,v),!m)continue;const{content:C,refusal:k,function_call:T,role:A,tool_calls:M,...I}=m;if(Object.assign(x.message,I),k&&(x.message.refusal=(x.message.refusal||"")+k),A&&(x.message.role=A),T&&(x.message.function_call?(T.name&&(x.message.function_call.name=T.name),T.arguments&&((a=x.message.function_call).arguments??(a.arguments=""),x.message.function_call.arguments+=T.arguments)):x.message.function_call=T),C&&(x.message.content=(x.message.content||"")+C,!x.message.refusal&&ee(this,Ft,"m",Hm).call(this)&&(x.message.parsed=wS(x.message.content))),M){x.message.tool_calls||(x.message.tool_calls=[]);for(const{index:O,id:B,type:U,function:K,...j}of M){const J=(l=x.message.tool_calls)[O]??(l[O]={});Object.assign(J,j),B&&(J.id=B),U&&(J.type=U),K&&(J.function??(J.function={name:K.name??"",arguments:""})),K?.name&&(J.function.name=K.name),K?.arguments&&(J.function.arguments+=K.arguments,AF(ee(this,bs,"f"),J)&&(J.function.parsed_arguments=wS(J.function.arguments)))}}}return u},Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("chunk",s=>{const a=n.shift();a?a.resolve(s):e.push(s)}),this.on("end",()=>{r=!0;for(const s of n)s.resolve(void 0);n.length=0}),this.on("abort",s=>{r=!0;for(const a of n)a.reject(s);n.length=0}),this.on("error",s=>{r=!0;for(const a of n)a.reject(s);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((a,l)=>n.push({resolve:a,reject:l})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new Gr(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function zF(t,e){const{id:n,choices:r,created:s,model:a,system_fingerprint:l,...u}=t,f={...u,id:n,choices:r.map(({message:d,finish_reason:m,index:p,logprobs:y,...g})=>{if(!m)throw new Re(`missing finish_reason for choice ${p}`);const{content:v=null,function_call:x,tool_calls:C,...k}=d,T=d.role;if(!T)throw new Re(`missing role for choice ${p}`);if(x){const{arguments:A,name:M}=x;if(A==null)throw new Re(`missing function_call.arguments for choice ${p}`);if(!M)throw new Re(`missing function_call.name for choice ${p}`);return{...g,message:{content:v,function_call:{arguments:A,name:M},role:T,refusal:d.refusal??null},finish_reason:m,index:p,logprobs:y}}return C?{...g,index:p,finish_reason:m,logprobs:y,message:{...k,role:T,content:v,refusal:d.refusal??null,tool_calls:C.map((A,M)=>{const{function:I,type:O,id:B,...U}=A,{arguments:K,name:j,...J}=I||{};if(B==null)throw new Re(`missing choices[${p}].tool_calls[${M}].id
${qu(t)}`);if(O==null)throw new Re(`missing choices[${p}].tool_calls[${M}].type
${qu(t)}`);if(j==null)throw new Re(`missing choices[${p}].tool_calls[${M}].function.name
${qu(t)}`);if(K==null)throw new Re(`missing choices[${p}].tool_calls[${M}].function.arguments
${qu(t)}`);return{...U,id:B,type:O,function:{...J,name:j,arguments:K}}})}}:{...g,message:{...k,content:v,role:T,refusal:d.refusal??null},finish_reason:m,index:p,logprobs:y}}),created:s,model:a,object:"chat.completion",...l?{system_fingerprint:l}:{}};return EF(f,e)}function qu(t){return JSON.stringify(t)}class Jf extends Xl{static fromReadableStream(e){const n=new Jf(null);return n._run(()=>n._fromReadableStream(e)),n}static runTools(e,n,r){const s=new Jf(n),a={...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"runTools"}};return s._run(()=>s._runTools(e,n,a)),s}}let g0=class extends Te{constructor(){super(...arguments),this.messages=new fT(this._client)}create(e,n){return this._client.post("/chat/completions",{body:e,...n,stream:e.stream??!1})}retrieve(e,n){return this._client.get(me`/chat/completions/${e}`,n)}update(e,n,r){return this._client.post(me`/chat/completions/${e}`,{body:n,...r})}list(e={},n){return this._client.getAPIList("/chat/completions",Ut,{query:e,...n})}delete(e,n){return this._client.delete(me`/chat/completions/${e}`,n)}parse(e,n){return RF(e.tools),this._client.chat.completions.create(e,{...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"chat.completions.parse"}})._thenUnwrap(r=>h0(r,e))}runTools(e,n){return e.stream?Jf.runTools(this._client,e,n):m0.runTools(this._client,e,n)}stream(e,n){return Xl.createChatCompletion(this._client,e,n)}};g0.Messages=fT;class y0 extends Te{constructor(){super(...arguments),this.completions=new g0(this._client)}}y0.Completions=g0;const IT=Symbol("brand.privateNullableHeaders");function*PF(t){if(!t)return;if(IT in t){const{values:r,nulls:s}=t;yield*r.entries();for(const a of s)yield[a,null];return}let e=!1,n;t instanceof Headers?n=t.entries():oS(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let r of n){const s=r[0];if(typeof s!="string")throw new TypeError("expected header name to be a string");const a=oS(r[1])?r[1]:[r[1]];let l=!1;for(const u of a)u!==void 0&&(e&&!l&&(l=!0,yield[s,null]),yield[s,u])}}const we=t=>{const e=new Headers,n=new Set;for(const r of t){const s=new Set;for(const[a,l]of PF(r)){const u=a.toLowerCase();s.has(u)||(e.delete(a),s.add(u)),l===null?(e.delete(a),n.add(u)):(e.append(a,l),n.delete(u))}}return{[IT]:!0,values:e,nulls:n}};class MT extends Te{create(e,n){return this._client.post("/audio/speech",{body:e,...n,headers:we([{Accept:"application/octet-stream"},n?.headers]),__binaryResponse:!0})}}class DT extends Te{create(e,n){return this._client.post("/audio/transcriptions",Bi({body:e,...n,stream:e.stream??!1,__metadata:{model:e.model}},this._client))}}class jT extends Te{create(e,n){return this._client.post("/audio/translations",Bi({body:e,...n,__metadata:{model:e.model}},this._client))}}class hc extends Te{constructor(){super(...arguments),this.transcriptions=new DT(this._client),this.translations=new jT(this._client),this.speech=new MT(this._client)}}hc.Transcriptions=DT;hc.Translations=jT;hc.Speech=MT;class LT extends Te{create(e,n){return this._client.post("/batches",{body:e,...n})}retrieve(e,n){return this._client.get(me`/batches/${e}`,n)}list(e={},n){return this._client.getAPIList("/batches",Ut,{query:e,...n})}cancel(e,n){return this._client.post(me`/batches/${e}/cancel`,n)}}class zT extends Te{create(e,n){return this._client.post("/assistants",{body:e,...n,headers:we([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}retrieve(e,n){return this._client.get(me`/assistants/${e}`,{...n,headers:we([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}update(e,n,r){return this._client.post(me`/assistants/${e}`,{body:n,...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(e={},n){return this._client.getAPIList("/assistants",Ut,{query:e,...n,headers:we([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}delete(e,n){return this._client.delete(me`/assistants/${e}`,{...n,headers:we([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}}let PT=class extends Te{create(e,n){return this._client.post("/realtime/sessions",{body:e,...n,headers:we([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}};class BT extends Te{create(e,n){return this._client.post("/realtime/transcription_sessions",{body:e,...n,headers:we([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}}let Sd=class extends Te{constructor(){super(...arguments),this.sessions=new PT(this._client),this.transcriptionSessions=new BT(this._client)}};Sd.Sessions=PT;Sd.TranscriptionSessions=BT;class $T extends Te{create(e,n){return this._client.post("/chatkit/sessions",{body:e,...n,headers:we([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}cancel(e,n){return this._client.post(me`/chatkit/sessions/${e}/cancel`,{...n,headers:we([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}}let UT=class extends Te{retrieve(e,n){return this._client.get(me`/chatkit/threads/${e}`,{...n,headers:we([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}list(e={},n){return this._client.getAPIList("/chatkit/threads",Vf,{query:e,...n,headers:we([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}delete(e,n){return this._client.delete(me`/chatkit/threads/${e}`,{...n,headers:we([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}listItems(e,n={},r){return this._client.getAPIList(me`/chatkit/threads/${e}/items`,Vf,{query:n,...r,headers:we([{"OpenAI-Beta":"chatkit_beta=v1"},r?.headers])})}};class kd extends Te{constructor(){super(...arguments),this.sessions=new $T(this._client),this.threads=new UT(this._client)}}kd.Sessions=$T;kd.Threads=UT;class qT extends Te{create(e,n,r){return this._client.post(me`/threads/${e}/messages`,{body:n,...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}retrieve(e,n,r){const{thread_id:s}=n;return this._client.get(me`/threads/${s}/messages/${e}`,{...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}update(e,n,r){const{thread_id:s,...a}=n;return this._client.post(me`/threads/${s}/messages/${e}`,{body:a,...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(e,n={},r){return this._client.getAPIList(me`/threads/${e}/messages`,Ut,{query:n,...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}delete(e,n,r){const{thread_id:s}=n;return this._client.delete(me`/threads/${s}/messages/${e}`,{...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}}class FT extends Te{retrieve(e,n,r){const{thread_id:s,run_id:a,...l}=n;return this._client.get(me`/threads/${s}/runs/${a}/steps/${e}`,{query:l,...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(e,n,r){const{thread_id:s,...a}=n;return this._client.getAPIList(me`/threads/${s}/runs/${e}/steps`,Ut,{query:a,...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}}const BF=t=>{if(typeof Buffer<"u"){const e=Buffer.from(t,"base64");return Array.from(new Float32Array(e.buffer,e.byteOffset,e.length/Float32Array.BYTES_PER_ELEMENT))}else{const e=atob(t),n=e.length,r=new Uint8Array(n);for(let s=0;s<n;s++)r[s]=e.charCodeAt(s);return Array.from(new Float32Array(r.buffer))}};var $F={};const Da=t=>{if(typeof globalThis.process<"u")return $F?.[t]?.trim()??void 0;if(typeof globalThis.Deno<"u")return globalThis.Deno.env?.get?.(t)?.trim()};var dn,ji,ny,Vr,of,Nr,Li,Va,Ii,Yf,ir,lf,cf,Pl,kl,El,kS,ES,CS,TS,AS,RS,OS;class Bl extends p0{constructor(){super(...arguments),dn.add(this),ny.set(this,[]),Vr.set(this,{}),of.set(this,{}),Nr.set(this,void 0),Li.set(this,void 0),Va.set(this,void 0),Ii.set(this,void 0),Yf.set(this,void 0),ir.set(this,void 0),lf.set(this,void 0),cf.set(this,void 0),Pl.set(this,void 0)}[(ny=new WeakMap,Vr=new WeakMap,of=new WeakMap,Nr=new WeakMap,Li=new WeakMap,Va=new WeakMap,Ii=new WeakMap,Yf=new WeakMap,ir=new WeakMap,lf=new WeakMap,cf=new WeakMap,Pl=new WeakMap,dn=new WeakSet,Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("event",s=>{const a=n.shift();a?a.resolve(s):e.push(s)}),this.on("end",()=>{r=!0;for(const s of n)s.resolve(void 0);n.length=0}),this.on("abort",s=>{r=!0;for(const a of n)a.reject(s);n.length=0}),this.on("error",s=>{r=!0;for(const a of n)a.reject(s);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((a,l)=>n.push({resolve:a,reject:l})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){const n=new ji;return n._run(()=>n._fromReadableStream(e)),n}async _fromReadableStream(e,n){const r=n?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),this._connected();const s=Gr.fromReadableStream(e,this.controller);for await(const a of s)ee(this,dn,"m",kl).call(this,a);if(s.controller.signal?.aborted)throw new Er;return this._addRun(ee(this,dn,"m",El).call(this))}toReadableStream(){return new Gr(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,n,r,s){const a=new ji;return a._run(()=>a._runToolAssistantStream(e,n,r,{...s,headers:{...s?.headers,"X-Stainless-Helper-Method":"stream"}})),a}async _createToolAssistantStream(e,n,r,s){const a=s?.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort()));const l={...r,stream:!0},u=await e.submitToolOutputs(n,l,{...s,signal:this.controller.signal});this._connected();for await(const f of u)ee(this,dn,"m",kl).call(this,f);if(u.controller.signal?.aborted)throw new Er;return this._addRun(ee(this,dn,"m",El).call(this))}static createThreadAssistantStream(e,n,r){const s=new ji;return s._run(()=>s._threadAssistantStream(e,n,{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),s}static createAssistantStream(e,n,r,s){const a=new ji;return a._run(()=>a._runAssistantStream(e,n,r,{...s,headers:{...s?.headers,"X-Stainless-Helper-Method":"stream"}})),a}currentEvent(){return ee(this,lf,"f")}currentRun(){return ee(this,cf,"f")}currentMessageSnapshot(){return ee(this,Nr,"f")}currentRunStepSnapshot(){return ee(this,Pl,"f")}async finalRunSteps(){return await this.done(),Object.values(ee(this,Vr,"f"))}async finalMessages(){return await this.done(),Object.values(ee(this,of,"f"))}async finalRun(){if(await this.done(),!ee(this,Li,"f"))throw Error("Final run was not received.");return ee(this,Li,"f")}async _createThreadAssistantStream(e,n,r){const s=r?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort()));const a={...n,stream:!0},l=await e.createAndRun(a,{...r,signal:this.controller.signal});this._connected();for await(const u of l)ee(this,dn,"m",kl).call(this,u);if(l.controller.signal?.aborted)throw new Er;return this._addRun(ee(this,dn,"m",El).call(this))}async _createAssistantStream(e,n,r,s){const a=s?.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort()));const l={...r,stream:!0},u=await e.create(n,l,{...s,signal:this.controller.signal});this._connected();for await(const f of u)ee(this,dn,"m",kl).call(this,f);if(u.controller.signal?.aborted)throw new Er;return this._addRun(ee(this,dn,"m",El).call(this))}static accumulateDelta(e,n){for(const[r,s]of Object.entries(n)){if(!e.hasOwnProperty(r)){e[r]=s;continue}let a=e[r];if(a==null){e[r]=s;continue}if(r==="index"||r==="type"){e[r]=s;continue}if(typeof a=="string"&&typeof s=="string")a+=s;else if(typeof a=="number"&&typeof s=="number")a+=s;else if(Pm(a)&&Pm(s))a=this.accumulateDelta(a,s);else if(Array.isArray(a)&&Array.isArray(s)){if(a.every(l=>typeof l=="string"||typeof l=="number")){a.push(...s);continue}for(const l of s){if(!Pm(l))throw new Error(`Expected array delta entry to be an object but got: ${l}`);const u=l.index;if(u==null)throw console.error(l),new Error("Expected array delta entry to have an `index` property");if(typeof u!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${u}`);const f=a[u];f==null?a.push(l):a[u]=this.accumulateDelta(f,l)}continue}else throw Error(`Unhandled record type: ${r}, deltaValue: ${s}, accValue: ${a}`);e[r]=a}return e}_addRun(e){return e}async _threadAssistantStream(e,n,r){return await this._createThreadAssistantStream(n,e,r)}async _runAssistantStream(e,n,r,s){return await this._createAssistantStream(n,e,r,s)}async _runToolAssistantStream(e,n,r,s){return await this._createToolAssistantStream(n,e,r,s)}}ji=Bl,kl=function(e){if(!this.ended)switch(De(this,lf,e),ee(this,dn,"m",CS).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":ee(this,dn,"m",OS).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":ee(this,dn,"m",ES).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":ee(this,dn,"m",kS).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},El=function(){if(this.ended)throw new Re("stream has ended, this shouldn't happen");if(!ee(this,Li,"f"))throw Error("Final run has not been received");return ee(this,Li,"f")},kS=function(e){const[n,r]=ee(this,dn,"m",AS).call(this,e,ee(this,Nr,"f"));De(this,Nr,n),ee(this,of,"f")[n.id]=n;for(const s of r){const a=n.content[s.index];a?.type=="text"&&this._emit("textCreated",a.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,n),e.data.delta.content)for(const s of e.data.delta.content){if(s.type=="text"&&s.text){let a=s.text,l=n.content[s.index];if(l&&l.type=="text")this._emit("textDelta",a,l.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(s.index!=ee(this,Va,"f")){if(ee(this,Ii,"f"))switch(ee(this,Ii,"f").type){case"text":this._emit("textDone",ee(this,Ii,"f").text,ee(this,Nr,"f"));break;case"image_file":this._emit("imageFileDone",ee(this,Ii,"f").image_file,ee(this,Nr,"f"));break}De(this,Va,s.index)}De(this,Ii,n.content[s.index])}break;case"thread.message.completed":case"thread.message.incomplete":if(ee(this,Va,"f")!==void 0){const s=e.data.content[ee(this,Va,"f")];if(s)switch(s.type){case"image_file":this._emit("imageFileDone",s.image_file,ee(this,Nr,"f"));break;case"text":this._emit("textDone",s.text,ee(this,Nr,"f"));break}}ee(this,Nr,"f")&&this._emit("messageDone",e.data),De(this,Nr,void 0)}},ES=function(e){const n=ee(this,dn,"m",TS).call(this,e);switch(De(this,Pl,n),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":const r=e.data.delta;if(r.step_details&&r.step_details.type=="tool_calls"&&r.step_details.tool_calls&&n.step_details.type=="tool_calls")for(const a of r.step_details.tool_calls)a.index==ee(this,Yf,"f")?this._emit("toolCallDelta",a,n.step_details.tool_calls[a.index]):(ee(this,ir,"f")&&this._emit("toolCallDone",ee(this,ir,"f")),De(this,Yf,a.index),De(this,ir,n.step_details.tool_calls[a.index]),ee(this,ir,"f")&&this._emit("toolCallCreated",ee(this,ir,"f")));this._emit("runStepDelta",e.data.delta,n);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":De(this,Pl,void 0),e.data.step_details.type=="tool_calls"&&ee(this,ir,"f")&&(this._emit("toolCallDone",ee(this,ir,"f")),De(this,ir,void 0)),this._emit("runStepDone",e.data,n);break}},CS=function(e){ee(this,ny,"f").push(e),this._emit("event",e)},TS=function(e){switch(e.event){case"thread.run.step.created":return ee(this,Vr,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let n=ee(this,Vr,"f")[e.data.id];if(!n)throw Error("Received a RunStepDelta before creation of a snapshot");let r=e.data;if(r.delta){const s=ji.accumulateDelta(n,r.delta);ee(this,Vr,"f")[e.data.id]=s}return ee(this,Vr,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":ee(this,Vr,"f")[e.data.id]=e.data;break}if(ee(this,Vr,"f")[e.data.id])return ee(this,Vr,"f")[e.data.id];throw new Error("No snapshot available")},AS=function(e,n){let r=[];switch(e.event){case"thread.message.created":return[e.data,r];case"thread.message.delta":if(!n)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let s=e.data;if(s.delta.content)for(const a of s.delta.content)if(a.index in n.content){let l=n.content[a.index];n.content[a.index]=ee(this,dn,"m",RS).call(this,a,l)}else n.content[a.index]=a,r.push(a);return[n,r];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(n)return[n,r];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},RS=function(e,n){return ji.accumulateDelta(n,e)},OS=function(e){switch(De(this,cf,e.data),e.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":case"thread.run.incomplete":De(this,Li,e.data),ee(this,ir,"f")&&(this._emit("toolCallDone",ee(this,ir,"f")),De(this,ir,void 0));break}};let b0=class extends Te{constructor(){super(...arguments),this.steps=new FT(this._client)}create(e,n,r){const{include:s,...a}=n;return this._client.post(me`/threads/${e}/runs`,{query:{include:s},body:a,...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers]),stream:n.stream??!1})}retrieve(e,n,r){const{thread_id:s}=n;return this._client.get(me`/threads/${s}/runs/${e}`,{...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}update(e,n,r){const{thread_id:s,...a}=n;return this._client.post(me`/threads/${s}/runs/${e}`,{body:a,...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(e,n={},r){return this._client.getAPIList(me`/threads/${e}/runs`,Ut,{query:n,...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}cancel(e,n,r){const{thread_id:s}=n;return this._client.post(me`/threads/${s}/runs/${e}/cancel`,{...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}async createAndPoll(e,n,r){const s=await this.create(e,n,r);return await this.poll(s.id,{thread_id:e},r)}createAndStream(e,n,r){return Bl.createAssistantStream(e,this._client.beta.threads.runs,n,r)}async poll(e,n,r){const s=we([r?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":r?.pollIntervalMs?.toString()??void 0}]);for(;;){const{data:a,response:l}=await this.retrieve(e,n,{...r,headers:{...r?.headers,...s}}).withResponse();switch(a.status){case"queued":case"in_progress":case"cancelling":let u=5e3;if(r?.pollIntervalMs)u=r.pollIntervalMs;else{const f=l.headers.get("openai-poll-after-ms");if(f){const d=parseInt(f);isNaN(d)||(u=d)}}await fc(u);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return a}}}stream(e,n,r){return Bl.createAssistantStream(e,this._client.beta.threads.runs,n,r)}submitToolOutputs(e,n,r){const{thread_id:s,...a}=n;return this._client.post(me`/threads/${s}/runs/${e}/submit_tool_outputs`,{body:a,...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers]),stream:n.stream??!1})}async submitToolOutputsAndPoll(e,n,r){const s=await this.submitToolOutputs(e,n,r);return await this.poll(s.id,n,r)}submitToolOutputsStream(e,n,r){return Bl.createToolAssistantStream(e,this._client.beta.threads.runs,n,r)}};b0.Steps=FT;class Ed extends Te{constructor(){super(...arguments),this.runs=new b0(this._client),this.messages=new qT(this._client)}create(e={},n){return this._client.post("/threads",{body:e,...n,headers:we([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}retrieve(e,n){return this._client.get(me`/threads/${e}`,{...n,headers:we([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}update(e,n,r){return this._client.post(me`/threads/${e}`,{body:n,...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}delete(e,n){return this._client.delete(me`/threads/${e}`,{...n,headers:we([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}createAndRun(e,n){return this._client.post("/threads/runs",{body:e,...n,headers:we([{"OpenAI-Beta":"assistants=v2"},n?.headers]),stream:e.stream??!1})}async createAndRunPoll(e,n){const r=await this.createAndRun(e,n);return await this.runs.poll(r.id,{thread_id:r.thread_id},n)}createAndRunStream(e,n){return Bl.createThreadAssistantStream(e,this._client.beta.threads,n)}}Ed.Runs=b0;Ed.Messages=qT;class co extends Te{constructor(){super(...arguments),this.realtime=new Sd(this._client),this.chatkit=new kd(this._client),this.assistants=new zT(this._client),this.threads=new Ed(this._client)}}co.Realtime=Sd;co.ChatKit=kd;co.Assistants=zT;co.Threads=Ed;class VT extends Te{create(e,n){return this._client.post("/completions",{body:e,...n,stream:e.stream??!1})}}class HT extends Te{retrieve(e,n,r){const{container_id:s}=n;return this._client.get(me`/containers/${s}/files/${e}/content`,{...r,headers:we([{Accept:"application/binary"},r?.headers]),__binaryResponse:!0})}}let _0=class extends Te{constructor(){super(...arguments),this.content=new HT(this._client)}create(e,n,r){return this._client.post(me`/containers/${e}/files`,Bi({body:n,...r},this._client))}retrieve(e,n,r){const{container_id:s}=n;return this._client.get(me`/containers/${s}/files/${e}`,r)}list(e,n={},r){return this._client.getAPIList(me`/containers/${e}/files`,Ut,{query:n,...r})}delete(e,n,r){const{container_id:s}=n;return this._client.delete(me`/containers/${s}/files/${e}`,{...r,headers:we([{Accept:"*/*"},r?.headers])})}};_0.Content=HT;class v0 extends Te{constructor(){super(...arguments),this.files=new _0(this._client)}create(e,n){return this._client.post("/containers",{body:e,...n})}retrieve(e,n){return this._client.get(me`/containers/${e}`,n)}list(e={},n){return this._client.getAPIList("/containers",Ut,{query:e,...n})}delete(e,n){return this._client.delete(me`/containers/${e}`,{...n,headers:we([{Accept:"*/*"},n?.headers])})}}v0.Files=_0;class GT extends Te{create(e,n,r){const{include:s,...a}=n;return this._client.post(me`/conversations/${e}/items`,{query:{include:s},body:a,...r})}retrieve(e,n,r){const{conversation_id:s,...a}=n;return this._client.get(me`/conversations/${s}/items/${e}`,{query:a,...r})}list(e,n={},r){return this._client.getAPIList(me`/conversations/${e}/items`,Vf,{query:n,...r})}delete(e,n,r){const{conversation_id:s}=n;return this._client.delete(me`/conversations/${s}/items/${e}`,r)}}class x0 extends Te{constructor(){super(...arguments),this.items=new GT(this._client)}create(e={},n){return this._client.post("/conversations",{body:e,...n})}retrieve(e,n){return this._client.get(me`/conversations/${e}`,n)}update(e,n,r){return this._client.post(me`/conversations/${e}`,{body:n,...r})}delete(e,n){return this._client.delete(me`/conversations/${e}`,n)}}x0.Items=GT;class KT extends Te{create(e,n){const r=!!e.encoding_format;let s=r?e.encoding_format:"base64";r&&fn(this._client).debug("embeddings/user defined encoding_format:",e.encoding_format);const a=this._client.post("/embeddings",{body:{...e,encoding_format:s},...n});return r?a:(fn(this._client).debug("embeddings/decoding base64 embeddings from base64"),a._thenUnwrap(l=>(l&&l.data&&l.data.forEach(u=>{const f=u.embedding;u.embedding=BF(f)}),l)))}}class ZT extends Te{retrieve(e,n,r){const{eval_id:s,run_id:a}=n;return this._client.get(me`/evals/${s}/runs/${a}/output_items/${e}`,r)}list(e,n,r){const{eval_id:s,...a}=n;return this._client.getAPIList(me`/evals/${s}/runs/${e}/output_items`,Ut,{query:a,...r})}}class w0 extends Te{constructor(){super(...arguments),this.outputItems=new ZT(this._client)}create(e,n,r){return this._client.post(me`/evals/${e}/runs`,{body:n,...r})}retrieve(e,n,r){const{eval_id:s}=n;return this._client.get(me`/evals/${s}/runs/${e}`,r)}list(e,n={},r){return this._client.getAPIList(me`/evals/${e}/runs`,Ut,{query:n,...r})}delete(e,n,r){const{eval_id:s}=n;return this._client.delete(me`/evals/${s}/runs/${e}`,r)}cancel(e,n,r){const{eval_id:s}=n;return this._client.post(me`/evals/${s}/runs/${e}`,r)}}w0.OutputItems=ZT;class S0 extends Te{constructor(){super(...arguments),this.runs=new w0(this._client)}create(e,n){return this._client.post("/evals",{body:e,...n})}retrieve(e,n){return this._client.get(me`/evals/${e}`,n)}update(e,n,r){return this._client.post(me`/evals/${e}`,{body:n,...r})}list(e={},n){return this._client.getAPIList("/evals",Ut,{query:e,...n})}delete(e,n){return this._client.delete(me`/evals/${e}`,n)}}S0.Runs=w0;let QT=class extends Te{create(e,n){return this._client.post("/files",Bi({body:e,...n},this._client))}retrieve(e,n){return this._client.get(me`/files/${e}`,n)}list(e={},n){return this._client.getAPIList("/files",Ut,{query:e,...n})}delete(e,n){return this._client.delete(me`/files/${e}`,n)}content(e,n){return this._client.get(me`/files/${e}/content`,{...n,headers:we([{Accept:"application/binary"},n?.headers]),__binaryResponse:!0})}async waitForProcessing(e,{pollInterval:n=5e3,maxWait:r=1800*1e3}={}){const s=new Set(["processed","error","deleted"]),a=Date.now();let l=await this.retrieve(e);for(;!l.status||!s.has(l.status);)if(await fc(n),l=await this.retrieve(e),Date.now()-a>r)throw new l0({message:`Giving up on waiting for file ${e} to finish processing after ${r} milliseconds.`});return l}};class JT extends Te{}let YT=class extends Te{run(e,n){return this._client.post("/fine_tuning/alpha/graders/run",{body:e,...n})}validate(e,n){return this._client.post("/fine_tuning/alpha/graders/validate",{body:e,...n})}};class k0 extends Te{constructor(){super(...arguments),this.graders=new YT(this._client)}}k0.Graders=YT;class XT extends Te{create(e,n,r){return this._client.getAPIList(me`/fine_tuning/checkpoints/${e}/permissions`,wd,{body:n,method:"post",...r})}retrieve(e,n={},r){return this._client.get(me`/fine_tuning/checkpoints/${e}/permissions`,{query:n,...r})}delete(e,n,r){const{fine_tuned_model_checkpoint:s}=n;return this._client.delete(me`/fine_tuning/checkpoints/${s}/permissions/${e}`,r)}}let E0=class extends Te{constructor(){super(...arguments),this.permissions=new XT(this._client)}};E0.Permissions=XT;class WT extends Te{list(e,n={},r){return this._client.getAPIList(me`/fine_tuning/jobs/${e}/checkpoints`,Ut,{query:n,...r})}}class C0 extends Te{constructor(){super(...arguments),this.checkpoints=new WT(this._client)}create(e,n){return this._client.post("/fine_tuning/jobs",{body:e,...n})}retrieve(e,n){return this._client.get(me`/fine_tuning/jobs/${e}`,n)}list(e={},n){return this._client.getAPIList("/fine_tuning/jobs",Ut,{query:e,...n})}cancel(e,n){return this._client.post(me`/fine_tuning/jobs/${e}/cancel`,n)}listEvents(e,n={},r){return this._client.getAPIList(me`/fine_tuning/jobs/${e}/events`,Ut,{query:n,...r})}pause(e,n){return this._client.post(me`/fine_tuning/jobs/${e}/pause`,n)}resume(e,n){return this._client.post(me`/fine_tuning/jobs/${e}/resume`,n)}}C0.Checkpoints=WT;class uo extends Te{constructor(){super(...arguments),this.methods=new JT(this._client),this.jobs=new C0(this._client),this.checkpoints=new E0(this._client),this.alpha=new k0(this._client)}}uo.Methods=JT;uo.Jobs=C0;uo.Checkpoints=E0;uo.Alpha=k0;class eA extends Te{}class T0 extends Te{constructor(){super(...arguments),this.graderModels=new eA(this._client)}}T0.GraderModels=eA;class tA extends Te{createVariation(e,n){return this._client.post("/images/variations",Bi({body:e,...n},this._client))}edit(e,n){return this._client.post("/images/edits",Bi({body:e,...n,stream:e.stream??!1},this._client))}generate(e,n){return this._client.post("/images/generations",{body:e,...n,stream:e.stream??!1})}}class nA extends Te{retrieve(e,n){return this._client.get(me`/models/${e}`,n)}list(e){return this._client.getAPIList("/models",wd,e)}delete(e,n){return this._client.delete(me`/models/${e}`,n)}}class rA extends Te{create(e,n){return this._client.post("/moderations",{body:e,...n})}}class sA extends Te{accept(e,n,r){return this._client.post(me`/realtime/calls/${e}/accept`,{body:n,...r,headers:we([{Accept:"*/*"},r?.headers])})}hangup(e,n){return this._client.post(me`/realtime/calls/${e}/hangup`,{...n,headers:we([{Accept:"*/*"},n?.headers])})}refer(e,n,r){return this._client.post(me`/realtime/calls/${e}/refer`,{body:n,...r,headers:we([{Accept:"*/*"},r?.headers])})}reject(e,n={},r){return this._client.post(me`/realtime/calls/${e}/reject`,{body:n,...r,headers:we([{Accept:"*/*"},r?.headers])})}}class iA extends Te{create(e,n){return this._client.post("/realtime/client_secrets",{body:e,...n})}}class Cd extends Te{constructor(){super(...arguments),this.clientSecrets=new iA(this._client),this.calls=new sA(this._client)}}Cd.ClientSecrets=iA;Cd.Calls=sA;function UF(t,e){return!e||!FF(e)?{...t,output_parsed:null,output:t.output.map(n=>n.type==="function_call"?{...n,parsed_arguments:null}:n.type==="message"?{...n,content:n.content.map(r=>({...r,parsed:null}))}:n)}:aA(t,e)}function aA(t,e){const n=t.output.map(s=>{if(s.type==="function_call")return{...s,parsed_arguments:GF(e,s)};if(s.type==="message"){const a=s.content.map(l=>l.type==="output_text"?{...l,parsed:qF(e,l.text)}:l);return{...s,content:a}}return s}),r=Object.assign({},t,{output:n});return Object.getOwnPropertyDescriptor(t,"output_text")||ry(r),Object.defineProperty(r,"output_parsed",{enumerable:!0,get(){for(const s of r.output)if(s.type==="message"){for(const a of s.content)if(a.type==="output_text"&&a.parsed!==null)return a.parsed}return null}}),r}function qF(t,e){return t.text?.format?.type!=="json_schema"?null:"$parseRaw"in t.text?.format?(t.text?.format).$parseRaw(e):JSON.parse(e)}function FF(t){return!!d0(t.text?.format)}function VF(t){return t?.$brand==="auto-parseable-tool"}function HF(t,e){return t.find(n=>n.type==="function"&&n.name===e)}function GF(t,e){const n=HF(t.tools??[],e.name);return{...e,...e,parsed_arguments:VF(n)?n.$parseRaw(e.arguments):n?.strict?JSON.parse(e.arguments):null}}function ry(t){const e=[];for(const n of t.output)if(n.type==="message")for(const r of n.content)r.type==="output_text"&&e.push(r.text);t.output_text=e.join("")}var ja,Fu,Xs,Vu,NS,IS,MS,DS;class A0 extends p0{constructor(e){super(),ja.add(this),Fu.set(this,void 0),Xs.set(this,void 0),Vu.set(this,void 0),De(this,Fu,e)}static createResponse(e,n,r){const s=new A0(n);return s._run(()=>s._createOrRetrieveResponse(e,n,{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),s}async _createOrRetrieveResponse(e,n,r){const s=r?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),ee(this,ja,"m",NS).call(this);let a,l=null;"response_id"in n?(a=await e.responses.retrieve(n.response_id,{stream:!0},{...r,signal:this.controller.signal,stream:!0}),l=n.starting_after??null):a=await e.responses.create({...n,stream:!0},{...r,signal:this.controller.signal}),this._connected();for await(const u of a)ee(this,ja,"m",IS).call(this,u,l);if(a.controller.signal?.aborted)throw new Er;return ee(this,ja,"m",MS).call(this)}[(Fu=new WeakMap,Xs=new WeakMap,Vu=new WeakMap,ja=new WeakSet,NS=function(){this.ended||De(this,Xs,void 0)},IS=function(n,r){if(this.ended)return;const s=(l,u)=>{(r==null||u.sequence_number>r)&&this._emit(l,u)},a=ee(this,ja,"m",DS).call(this,n);switch(s("event",n),n.type){case"response.output_text.delta":{const l=a.output[n.output_index];if(!l)throw new Re(`missing output at index ${n.output_index}`);if(l.type==="message"){const u=l.content[n.content_index];if(!u)throw new Re(`missing content at index ${n.content_index}`);if(u.type!=="output_text")throw new Re(`expected content to be 'output_text', got ${u.type}`);s("response.output_text.delta",{...n,snapshot:u.text})}break}case"response.function_call_arguments.delta":{const l=a.output[n.output_index];if(!l)throw new Re(`missing output at index ${n.output_index}`);l.type==="function_call"&&s("response.function_call_arguments.delta",{...n,snapshot:l.arguments});break}default:s(n.type,n);break}},MS=function(){if(this.ended)throw new Re("stream has ended, this shouldn't happen");const n=ee(this,Xs,"f");if(!n)throw new Re("request ended without sending any events");De(this,Xs,void 0);const r=KF(n,ee(this,Fu,"f"));return De(this,Vu,r),r},DS=function(n){let r=ee(this,Xs,"f");if(!r){if(n.type!=="response.created")throw new Re(`When snapshot hasn't been set yet, expected 'response.created' event, got ${n.type}`);return r=De(this,Xs,n.response),r}switch(n.type){case"response.output_item.added":{r.output.push(n.item);break}case"response.content_part.added":{const s=r.output[n.output_index];if(!s)throw new Re(`missing output at index ${n.output_index}`);const a=s.type,l=n.part;a==="message"&&l.type!=="reasoning_text"?s.content.push(l):a==="reasoning"&&l.type==="reasoning_text"&&(s.content||(s.content=[]),s.content.push(l));break}case"response.output_text.delta":{const s=r.output[n.output_index];if(!s)throw new Re(`missing output at index ${n.output_index}`);if(s.type==="message"){const a=s.content[n.content_index];if(!a)throw new Re(`missing content at index ${n.content_index}`);if(a.type!=="output_text")throw new Re(`expected content to be 'output_text', got ${a.type}`);a.text+=n.delta}break}case"response.function_call_arguments.delta":{const s=r.output[n.output_index];if(!s)throw new Re(`missing output at index ${n.output_index}`);s.type==="function_call"&&(s.arguments+=n.delta);break}case"response.reasoning_text.delta":{const s=r.output[n.output_index];if(!s)throw new Re(`missing output at index ${n.output_index}`);if(s.type==="reasoning"){const a=s.content?.[n.content_index];if(!a)throw new Re(`missing content at index ${n.content_index}`);if(a.type!=="reasoning_text")throw new Re(`expected content to be 'reasoning_text', got ${a.type}`);a.text+=n.delta}break}case"response.completed":{De(this,Xs,n.response);break}}return r},Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("event",s=>{const a=n.shift();a?a.resolve(s):e.push(s)}),this.on("end",()=>{r=!0;for(const s of n)s.resolve(void 0);n.length=0}),this.on("abort",s=>{r=!0;for(const a of n)a.reject(s);n.length=0}),this.on("error",s=>{r=!0;for(const a of n)a.reject(s);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((a,l)=>n.push({resolve:a,reject:l})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();const e=ee(this,Vu,"f");if(!e)throw new Re("stream ended without producing a ChatCompletion");return e}}function KF(t,e){return UF(t,e)}class oA extends Te{list(e,n={},r){return this._client.getAPIList(me`/responses/${e}/input_items`,Ut,{query:n,...r})}}class lA extends Te{count(e={},n){return this._client.post("/responses/input_tokens",{body:e,...n})}}class Td extends Te{constructor(){super(...arguments),this.inputItems=new oA(this._client),this.inputTokens=new lA(this._client)}create(e,n){return this._client.post("/responses",{body:e,...n,stream:e.stream??!1})._thenUnwrap(r=>("object"in r&&r.object==="response"&&ry(r),r))}retrieve(e,n={},r){return this._client.get(me`/responses/${e}`,{query:n,...r,stream:n?.stream??!1})._thenUnwrap(s=>("object"in s&&s.object==="response"&&ry(s),s))}delete(e,n){return this._client.delete(me`/responses/${e}`,{...n,headers:we([{Accept:"*/*"},n?.headers])})}parse(e,n){return this._client.responses.create(e,n)._thenUnwrap(r=>aA(r,e))}stream(e,n){return A0.createResponse(this._client,e,n)}cancel(e,n){return this._client.post(me`/responses/${e}/cancel`,n)}compact(e,n){return this._client.post("/responses/compact",{body:e,...n})}}Td.InputItems=oA;Td.InputTokens=lA;class cA extends Te{create(e,n,r){return this._client.post(me`/uploads/${e}/parts`,Bi({body:n,...r},this._client))}}class R0 extends Te{constructor(){super(...arguments),this.parts=new cA(this._client)}create(e,n){return this._client.post("/uploads",{body:e,...n})}cancel(e,n){return this._client.post(me`/uploads/${e}/cancel`,n)}complete(e,n,r){return this._client.post(me`/uploads/${e}/complete`,{body:n,...r})}}R0.Parts=cA;const ZF=async t=>{const e=await Promise.allSettled(t),n=e.filter(s=>s.status==="rejected");if(n.length){for(const s of n)console.error(s.reason);throw new Error(`${n.length} promise(s) failed - see the above errors`)}const r=[];for(const s of e)s.status==="fulfilled"&&r.push(s.value);return r};class uA extends Te{create(e,n,r){return this._client.post(me`/vector_stores/${e}/file_batches`,{body:n,...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}retrieve(e,n,r){const{vector_store_id:s}=n;return this._client.get(me`/vector_stores/${s}/file_batches/${e}`,{...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}cancel(e,n,r){const{vector_store_id:s}=n;return this._client.post(me`/vector_stores/${s}/file_batches/${e}/cancel`,{...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}async createAndPoll(e,n,r){const s=await this.create(e,n);return await this.poll(e,s.id,r)}listFiles(e,n,r){const{vector_store_id:s,...a}=n;return this._client.getAPIList(me`/vector_stores/${s}/file_batches/${e}/files`,Ut,{query:a,...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}async poll(e,n,r){const s=we([r?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":r?.pollIntervalMs?.toString()??void 0}]);for(;;){const{data:a,response:l}=await this.retrieve(n,{vector_store_id:e},{...r,headers:s}).withResponse();switch(a.status){case"in_progress":let u=5e3;if(r?.pollIntervalMs)u=r.pollIntervalMs;else{const f=l.headers.get("openai-poll-after-ms");if(f){const d=parseInt(f);isNaN(d)||(u=d)}}await fc(u);break;case"failed":case"cancelled":case"completed":return a}}}async uploadAndPoll(e,{files:n,fileIds:r=[]},s){if(n==null||n.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const a=s?.maxConcurrency??5,l=Math.min(a,n.length),u=this._client,f=n.values(),d=[...r];async function m(y){for(let g of y){const v=await u.files.create({file:g,purpose:"assistants"},s);d.push(v.id)}}const p=Array(l).fill(f).map(m);return await ZF(p),await this.createAndPoll(e,{file_ids:d})}}class fA extends Te{create(e,n,r){return this._client.post(me`/vector_stores/${e}/files`,{body:n,...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}retrieve(e,n,r){const{vector_store_id:s}=n;return this._client.get(me`/vector_stores/${s}/files/${e}`,{...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}update(e,n,r){const{vector_store_id:s,...a}=n;return this._client.post(me`/vector_stores/${s}/files/${e}`,{body:a,...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(e,n={},r){return this._client.getAPIList(me`/vector_stores/${e}/files`,Ut,{query:n,...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}delete(e,n,r){const{vector_store_id:s}=n;return this._client.delete(me`/vector_stores/${s}/files/${e}`,{...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}async createAndPoll(e,n,r){const s=await this.create(e,n,r);return await this.poll(e,s.id,r)}async poll(e,n,r){const s=we([r?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":r?.pollIntervalMs?.toString()??void 0}]);for(;;){const a=await this.retrieve(n,{vector_store_id:e},{...r,headers:s}).withResponse(),l=a.data;switch(l.status){case"in_progress":let u=5e3;if(r?.pollIntervalMs)u=r.pollIntervalMs;else{const f=a.response.headers.get("openai-poll-after-ms");if(f){const d=parseInt(f);isNaN(d)||(u=d)}}await fc(u);break;case"failed":case"completed":return l}}}async upload(e,n,r){const s=await this._client.files.create({file:n,purpose:"assistants"},r);return this.create(e,{file_id:s.id},r)}async uploadAndPoll(e,n,r){const s=await this.upload(e,n,r);return await this.poll(e,s.id,r)}content(e,n,r){const{vector_store_id:s}=n;return this._client.getAPIList(me`/vector_stores/${s}/files/${e}/content`,wd,{...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}}class Ad extends Te{constructor(){super(...arguments),this.files=new fA(this._client),this.fileBatches=new uA(this._client)}create(e,n){return this._client.post("/vector_stores",{body:e,...n,headers:we([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}retrieve(e,n){return this._client.get(me`/vector_stores/${e}`,{...n,headers:we([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}update(e,n,r){return this._client.post(me`/vector_stores/${e}`,{body:n,...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(e={},n){return this._client.getAPIList("/vector_stores",Ut,{query:e,...n,headers:we([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}delete(e,n){return this._client.delete(me`/vector_stores/${e}`,{...n,headers:we([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}search(e,n,r){return this._client.getAPIList(me`/vector_stores/${e}/search`,wd,{body:n,method:"post",...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}}Ad.Files=fA;Ad.FileBatches=uA;class dA extends Te{create(e,n){return this._client.post("/videos",_S({body:e,...n},this._client))}retrieve(e,n){return this._client.get(me`/videos/${e}`,n)}list(e={},n){return this._client.getAPIList("/videos",Vf,{query:e,...n})}delete(e,n){return this._client.delete(me`/videos/${e}`,n)}downloadContent(e,n={},r){return this._client.get(me`/videos/${e}/content`,{query:n,...r,headers:we([{Accept:"application/binary"},r?.headers]),__binaryResponse:!0})}remix(e,n,r){return this._client.post(me`/videos/${e}/remix`,_S({body:n,...r},this._client))}}var Ba,hA,uf;class pA extends Te{constructor(){super(...arguments),Ba.add(this)}async unwrap(e,n,r=this._client.webhookSecret,s=300){return await this.verifySignature(e,n,r,s),JSON.parse(e)}async verifySignature(e,n,r=this._client.webhookSecret,s=300){if(typeof crypto>"u"||typeof crypto.subtle.importKey!="function"||typeof crypto.subtle.verify!="function")throw new Error("Webhook signature verification is only supported when the `crypto` global is defined");ee(this,Ba,"m",hA).call(this,r);const a=we([n]).values,l=ee(this,Ba,"m",uf).call(this,a,"webhook-signature"),u=ee(this,Ba,"m",uf).call(this,a,"webhook-timestamp"),f=ee(this,Ba,"m",uf).call(this,a,"webhook-id"),d=parseInt(u,10);if(isNaN(d))throw new yl("Invalid webhook timestamp format");const m=Math.floor(Date.now()/1e3);if(m-d>s)throw new yl("Webhook timestamp is too old");if(d>m+s)throw new yl("Webhook timestamp is too new");const p=l.split(" ").map(x=>x.startsWith("v1,")?x.substring(3):x),y=r.startsWith("whsec_")?Buffer.from(r.replace("whsec_",""),"base64"):Buffer.from(r,"utf-8"),g=f?`${f}.${u}.${e}`:`${u}.${e}`,v=await crypto.subtle.importKey("raw",y,{name:"HMAC",hash:"SHA-256"},!1,["verify"]);for(const x of p)try{const C=Buffer.from(x,"base64");if(await crypto.subtle.verify("HMAC",v,C,new TextEncoder().encode(g)))return}catch{continue}throw new yl("The given webhook signature does not match the expected signature")}}Ba=new WeakSet,hA=function(e){if(typeof e!="string"||e.length===0)throw new Error("The webhook secret must either be set using the env var, OPENAI_WEBHOOK_SECRET, on the client class, OpenAI({ webhookSecret: '123' }), or passed to this function")},uf=function(e,n){if(!e)throw new Error("Headers are required");const r=e.get(n);if(r==null)throw new Error(`Missing required header: ${n}`);return r};var sy,O0,ff,mA;class Fe{constructor({baseURL:e=Da("OPENAI_BASE_URL"),apiKey:n=Da("OPENAI_API_KEY"),organization:r=Da("OPENAI_ORG_ID")??null,project:s=Da("OPENAI_PROJECT_ID")??null,webhookSecret:a=Da("OPENAI_WEBHOOK_SECRET")??null,...l}={}){if(sy.add(this),ff.set(this,void 0),this.completions=new VT(this),this.chat=new y0(this),this.embeddings=new KT(this),this.files=new QT(this),this.images=new tA(this),this.audio=new hc(this),this.moderations=new rA(this),this.models=new nA(this),this.fineTuning=new uo(this),this.graders=new T0(this),this.vectorStores=new Ad(this),this.webhooks=new pA(this),this.beta=new co(this),this.batches=new LT(this),this.uploads=new R0(this),this.responses=new Td(this),this.realtime=new Cd(this),this.conversations=new x0(this),this.evals=new S0(this),this.containers=new v0(this),this.videos=new dA(this),n===void 0)throw new Re("Missing credentials. Please pass an `apiKey`, or set the `OPENAI_API_KEY` environment variable.");const u={apiKey:n,organization:r,project:s,webhookSecret:a,...l,baseURL:e||"https://api.openai.com/v1"};if(!u.dangerouslyAllowBrowser&&Q9())throw new Re(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);this.baseURL=u.baseURL,this.timeout=u.timeout??O0.DEFAULT_TIMEOUT,this.logger=u.logger??console;const f="warn";this.logLevel=f,this.logLevel=yS(u.logLevel,"ClientOptions.logLevel",this)??yS(Da("OPENAI_LOG"),"process.env['OPENAI_LOG']",this)??f,this.fetchOptions=u.fetchOptions,this.maxRetries=u.maxRetries??2,this.fetch=u.fetch??eF(),De(this,ff,nF),this._options=u,this.apiKey=typeof n=="string"?n:"Missing Key",this.organization=r,this.project=s,this.webhookSecret=a}withOptions(e){return new this.constructor({...this._options,baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,organization:this.organization,project:this.project,webhookSecret:this.webhookSecret,...e})}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){}async authHeaders(e){return we([{Authorization:`Bearer ${this.apiKey}`}])}stringifyQuery(e){return lF(e,{arrayFormat:"brackets"})}getUserAgent(){return`${this.constructor.name}/JS ${za}`}defaultIdempotencyKey(){return`stainless-node-retry-${PC()}`}makeStatusError(e,n,r,s){return hn.generate(e,n,r,s)}async _callApiKey(){const e=this._options.apiKey;if(typeof e!="function")return!1;let n;try{n=await e()}catch(r){throw r instanceof Re?r:new Re(`Failed to get token from 'apiKey' function: ${r.message}`,{cause:r})}if(typeof n!="string"||!n)throw new Re(`Expected 'apiKey' function argument to return a string but it returned ${n}`);return this.apiKey=n,!0}buildURL(e,n,r){const s=!ee(this,sy,"m",mA).call(this)&&r||this.baseURL,a=V9(e)?new URL(e):new URL(s+(s.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),l=this.defaultQuery();return H9(l)||(n={...l,...n}),typeof n=="object"&&n&&!Array.isArray(n)&&(a.search=this.stringifyQuery(n)),a.toString()}async prepareOptions(e){await this._callApiKey()}async prepareRequest(e,{url:n,options:r}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,r){return this.request(Promise.resolve(r).then(s=>({method:e,path:n,...s})))}request(e,n=null){return new xd(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,r){const s=await e,a=s.maxRetries??this.maxRetries;n==null&&(n=a),await this.prepareOptions(s);const{req:l,url:u,timeout:f}=await this.buildRequest(s,{retryCount:a-n});await this.prepareRequest(l,{url:u,options:s});const d="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),m=r===void 0?"":`, retryOf: ${r}`,p=Date.now();if(fn(this).debug(`[${d}] sending request`,Ni({retryOfRequestLogID:r,method:s.method,url:u,options:s,headers:l.headers})),s.signal?.aborted)throw new Er;const y=new AbortController,g=await this.fetchWithTimeout(u,l,f,y).catch(Gg),v=Date.now();if(g instanceof globalThis.Error){const k=`retrying, ${n} attempts remaining`;if(s.signal?.aborted)throw new Er;const T=Hg(g)||/timed? ?out/i.test(String(g)+("cause"in g?String(g.cause):""));if(n)return fn(this).info(`[${d}] connection ${T?"timed out":"failed"} - ${k}`),fn(this).debug(`[${d}] connection ${T?"timed out":"failed"} (${k})`,Ni({retryOfRequestLogID:r,url:u,durationMs:v-p,message:g.message})),this.retryRequest(s,n,r??d);throw fn(this).info(`[${d}] connection ${T?"timed out":"failed"} - error; no more retries left`),fn(this).debug(`[${d}] connection ${T?"timed out":"failed"} (error; no more retries left)`,Ni({retryOfRequestLogID:r,url:u,durationMs:v-p,message:g.message})),T?new l0:new _d({cause:g})}const x=[...g.headers.entries()].filter(([k])=>k==="x-request-id").map(([k,T])=>", "+k+": "+JSON.stringify(T)).join(""),C=`[${d}${m}${x}] ${l.method} ${u} ${g.ok?"succeeded":"failed"} with status ${g.status} in ${v-p}ms`;if(!g.ok){const k=await this.shouldRetry(g);if(n&&k){const B=`retrying, ${n} attempts remaining`;return await tF(g.body),fn(this).info(`${C} - ${B}`),fn(this).debug(`[${d}] response error (${B})`,Ni({retryOfRequestLogID:r,url:g.url,status:g.status,headers:g.headers,durationMs:v-p})),this.retryRequest(s,n,r??d,g.headers)}const T=k?"error; no more retries left":"error; not retryable";fn(this).info(`${C} - ${T}`);const A=await g.text().catch(B=>Gg(B).message),M=Z9(A),I=M?void 0:A;throw fn(this).debug(`[${d}] response error (${T})`,Ni({retryOfRequestLogID:r,url:g.url,status:g.status,headers:g.headers,message:I,durationMs:Date.now()-p})),this.makeStatusError(g.status,M,I,g.headers)}return fn(this).info(C),fn(this).debug(`[${d}] response start`,Ni({retryOfRequestLogID:r,url:g.url,status:g.status,headers:g.headers,durationMs:v-p})),{response:g,options:s,controller:y,requestLogID:d,retryOfRequestLogID:r,startTime:p}}getAPIList(e,n,r){return this.requestAPIList(n,{method:"get",path:e,...r})}requestAPIList(e,n){const r=this.makeRequest(n,null,void 0);return new yF(this,r,e)}async fetchWithTimeout(e,n,r,s){const{signal:a,method:l,...u}=n||{};a&&a.addEventListener("abort",()=>s.abort());const f=setTimeout(()=>s.abort(),r),d=globalThis.ReadableStream&&u.body instanceof globalThis.ReadableStream||typeof u.body=="object"&&u.body!==null&&Symbol.asyncIterator in u.body,m={signal:s.signal,...d?{duplex:"half"}:{},method:"GET",...u};l&&(m.method=l.toUpperCase());try{return await this.fetch.call(void 0,e,m)}finally{clearTimeout(f)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,r,s){let a;const l=s?.get("retry-after-ms");if(l){const f=parseFloat(l);Number.isNaN(f)||(a=f)}const u=s?.get("retry-after");if(u&&!a){const f=parseFloat(u);Number.isNaN(f)?a=Date.parse(u)-Date.now():a=f*1e3}if(!(a&&0<=a&&a<60*1e3)){const f=e.maxRetries??this.maxRetries;a=this.calculateDefaultRetryTimeoutMillis(n,f)}return await fc(a),this.makeRequest(e,n-1,r)}calculateDefaultRetryTimeoutMillis(e,n){const a=n-e,l=Math.min(.5*Math.pow(2,a),8),u=1-Math.random()*.25;return l*u*1e3}async buildRequest(e,{retryCount:n=0}={}){const r={...e},{method:s,path:a,query:l,defaultBaseURL:u}=r,f=this.buildURL(a,l,u);"timeout"in r&&K9("timeout",r.timeout),r.timeout=r.timeout??this.timeout;const{bodyHeaders:d,body:m}=this.buildBody({options:r}),p=await this.buildHeaders({options:e,method:s,bodyHeaders:d,retryCount:n});return{req:{method:s,headers:p,...r.signal&&{signal:r.signal},...globalThis.ReadableStream&&m instanceof globalThis.ReadableStream&&{duplex:"half"},...m&&{body:m},...this.fetchOptions??{},...r.fetchOptions??{}},url:f,timeout:r.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:r,retryCount:s}){let a={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),a[this.idempotencyHeader]=e.idempotencyKey);const l=we([a,{Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(s),...e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{},...W9(),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project},await this.authHeaders(e),this._options.defaultHeaders,r,e.headers]);return this.validateHeaders(l),l.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const r=we([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&r.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:YC(e)}:ee(this,ff,"f").call(this,{body:e,headers:r})}}O0=Fe,ff=new WeakMap,sy=new WeakSet,mA=function(){return this.baseURL!=="https://api.openai.com/v1"};Fe.OpenAI=O0;Fe.DEFAULT_TIMEOUT=6e5;Fe.OpenAIError=Re;Fe.APIError=hn;Fe.APIConnectionError=_d;Fe.APIConnectionTimeoutError=l0;Fe.APIUserAbortError=Er;Fe.NotFoundError=qC;Fe.ConflictError=FC;Fe.RateLimitError=HC;Fe.BadRequestError=BC;Fe.AuthenticationError=$C;Fe.InternalServerError=GC;Fe.PermissionDeniedError=UC;Fe.UnprocessableEntityError=VC;Fe.InvalidWebhookSignatureError=yl;Fe.toFile=wF;Fe.Completions=VT;Fe.Chat=y0;Fe.Embeddings=KT;Fe.Files=QT;Fe.Images=tA;Fe.Audio=hc;Fe.Moderations=rA;Fe.Models=nA;Fe.FineTuning=uo;Fe.Graders=T0;Fe.VectorStores=Ad;Fe.Webhooks=pA;Fe.Beta=co;Fe.Batches=LT;Fe.Uploads=R0;Fe.Responses=Td;Fe.Realtime=Cd;Fe.Conversations=x0;Fe.Evals=S0;Fe.Containers=v0;Fe.Videos=dA;class QF extends Fe{constructor(e){super({...e,dangerouslyAllowBrowser:!0})}}function JF(t){return new QF({apiKey:t.apiKey,organization:t.organization,baseURL:t.baseURL})}function YF(t){return`${t}-${Date.now()}-${Math.random().toString(36).substring(7)}`}class XF extends E9{constructor(e,n){super({},n),this.kind="text",this.name="openai",this.client=JF(e)}async*chatStream(e){const n=new Map,r=this.mapTextOptionsToOpenAI(e);try{const s=await this.client.responses.create({...r,stream:!0},{headers:e.request?.headers,signal:e.request?.signal});yield*this.processOpenAIStreamChunks(s,n,e,()=>YF(this.name))}catch(s){const a=s;throw console.error(">>> chatStream: Fatal error during response creation <<<"),console.error(">>> Error message:",a.message),console.error(">>> Error stack:",a.stack),console.error(">>> Full error:",a),s}}async structuredOutput(e){const{chatOptions:n,outputSchema:r}=e,s=this.mapTextOptionsToOpenAI(n),a=Ll(r,r.required||[]);try{const l=await this.client.responses.create({...s,stream:!1,text:{format:{type:"json_schema",name:"structured_output",schema:a,strict:!0}}},{headers:n.request?.headers,signal:n.request?.signal}),u=this.extractTextFromResponse(l);let f;try{f=JSON.parse(u)}catch{throw new Error(`Failed to parse structured output as JSON. Content: ${u.slice(0,200)}${u.length>200?"...":""}`)}return{data:Vg(f),rawText:u}}catch(l){const u=l;throw console.error(">>> structuredOutput: Error during response creation <<<"),console.error(">>> Error message:",u.message),l}}extractTextFromResponse(e){let n="";for(const r of e.output)if(r.type==="message")for(const s of r.content)s.type==="output_text"&&(n+=s.text);return n}async*processOpenAIStreamChunks(e,n,r,s){let a="",l="";const u=Date.now();let f=0,d=!1,m=!1,p=null,y=r.model;try{for await(const g of e){f++;const v=x=>x.type==="output_text"?(a+=x.text,{type:"content",id:p||s(),model:y||r.model,timestamp:u,delta:x.text,content:a,role:"assistant"}):x.type==="reasoning_text"?(l+=x.text,{type:"thinking",id:p||s(),model:y||r.model,timestamp:u,delta:x.text,content:l}):{type:"error",id:p||s(),model:y||r.model,timestamp:u,error:{message:x.refusal}};if((g.type==="response.created"||g.type==="response.incomplete"||g.type==="response.failed")&&(p=g.response.id,y=g.response.model,d=!1,m=!1,a="",l="",g.response.error&&(yield{type:"error",id:g.response.id,model:g.response.model,timestamp:u,error:g.response.error}),g.response.incomplete_details&&(yield{type:"error",id:g.response.id,model:g.response.model,timestamp:u,error:{message:g.response.incomplete_details.reason??""}})),g.type==="response.output_text.delta"&&g.delta){const x=Array.isArray(g.delta)?g.delta.join(""):typeof g.delta=="string"?g.delta:"";x&&(a+=x,d=!0,yield{type:"content",id:p||s(),model:y||r.model,timestamp:u,delta:x,content:a,role:"assistant"})}if(g.type==="response.reasoning_text.delta"&&g.delta){const x=Array.isArray(g.delta)?g.delta.join(""):typeof g.delta=="string"?g.delta:"";x&&(l+=x,m=!0,yield{type:"thinking",id:p||s(),model:y||r.model,timestamp:u,delta:x,content:l})}if(g.type==="response.reasoning_summary_text.delta"&&g.delta){const x=typeof g.delta=="string"?g.delta:"";x&&(l+=x,m=!0,yield{type:"thinking",id:p||s(),model:y||r.model,timestamp:u,delta:x,content:l})}if(g.type==="response.content_part.added"){const x=g.part;yield v(x)}if(g.type==="response.content_part.done"){const x=g.part;if(x.type==="output_text"&&d||x.type==="reasoning_text"&&m)continue;yield v(x)}if(g.type==="response.output_item.added"){const x=g.item;x.type==="function_call"&&x.id&&(n.has(x.id)||n.set(x.id,{index:g.output_index,name:x.name||""}))}if(g.type==="response.function_call_arguments.done"){const{item_id:x,output_index:C}=g,T=n.get(x)?.name||"";yield{type:"tool_call",id:p||s(),model:y||r.model,timestamp:u,index:C,toolCall:{id:x,type:"function",function:{name:T,arguments:g.arguments}}}}if(g.type==="response.completed"){const x=g.response.output.some(C=>C.type==="function_call");yield{type:"done",id:p||s(),model:y||r.model,timestamp:u,usage:{promptTokens:g.response.usage?.input_tokens||0,completionTokens:g.response.usage?.output_tokens||0,totalTokens:g.response.usage?.total_tokens||0},finishReason:x?"tool_calls":"stop"}}g.type==="error"&&(yield{type:"error",id:p||s(),model:y||r.model,timestamp:u,error:{message:g.message,code:g.code??void 0}})}}catch(g){const v=g;console.log("[OpenAI Adapter] Stream ended with error. Event type summary:",{totalChunks:f,error:v.message}),yield{type:"error",id:s(),model:r.model,timestamp:u,error:{message:v.message||"Unknown error occurred",code:v.code}}}}mapTextOptionsToOpenAI(e){const n=e.modelOptions,r=this.convertMessagesToInput(e.messages);n&&T9({...n,model:e.model});const s=e.tools?q9(e.tools):void 0;return{model:e.model,temperature:e.temperature,max_output_tokens:e.maxTokens,top_p:e.topP,metadata:e.metadata,instructions:e.systemPrompts?.join(`
`),...n,input:r,tools:s}}convertMessagesToInput(e){const n=[];for(const r of e){if(r.role==="tool"){n.push({type:"function_call_output",call_id:r.toolCallId||"",output:typeof r.content=="string"?r.content:JSON.stringify(r.content)});continue}if(r.role==="assistant"){if(r.toolCalls&&r.toolCalls.length>0)for(const l of r.toolCalls){const u=typeof l.function.arguments=="string"?l.function.arguments:JSON.stringify(l.function.arguments);n.push({type:"function_call",call_id:l.id,name:l.function.name,arguments:u})}if(r.content){const l=this.extractTextContent(r.content);l&&n.push({type:"message",role:"assistant",content:l})}continue}const s=this.normalizeContent(r.content),a=[];for(const l of s)a.push(this.convertContentPartToOpenAI(l));a.length===0&&a.push({type:"input_text",text:""}),n.push({type:"message",role:"user",content:a})}return n}convertContentPartToOpenAI(e){switch(e.type){case"text":return{type:"input_text",text:e.content};case"image":{const n=e.metadata;return e.source.type==="url"?{type:"input_image",image_url:e.source.value,detail:n?.detail||"auto"}:{type:"input_image",image_url:e.source.value,detail:n?.detail||"auto"}}case"audio":return e.source.type==="url"?{type:"input_file",file_url:e.source.value}:{type:"input_file",file_data:e.source.value};default:throw new Error(`Unsupported content part type: ${e.type}`)}}normalizeContent(e){return e===null?[]:typeof e=="string"?[{type:"text",content:e}]:e}extractTextContent(e){return e===null?"":typeof e=="string"?e:e.filter(n=>n.type==="text").map(n=>n.content).join("")}}function WF(t){const e=`${window.location.origin}/openai/v1`;return new XF({apiKey:"not-needed",baseURL:e},t)}function e7(){return Ny().ai?.model||"gpt-5.1"}function fe(t,e,n){function r(u,f){if(u._zod||Object.defineProperty(u,"_zod",{value:{def:f,constr:l,traits:new Set},enumerable:!1}),u._zod.traits.has(t))return;u._zod.traits.add(t),e(u,f);const d=l.prototype,m=Object.keys(d);for(let p=0;p<m.length;p++){const y=m[p];y in u||(u[y]=d[y].bind(u))}}const s=n?.Parent??Object;class a extends s{}Object.defineProperty(a,"name",{value:t});function l(u){var f;const d=n?.Parent?new a:this;r(d,u),(f=d._zod).deferred??(f.deferred=[]);for(const m of d._zod.deferred)m();return d}return Object.defineProperty(l,"init",{value:r}),Object.defineProperty(l,Symbol.hasInstance,{value:u=>n?.Parent&&u instanceof n.Parent?!0:u?._zod?.traits?.has(t)}),Object.defineProperty(l,"name",{value:t}),l}class Ja extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class gA extends Error{constructor(e){super(`Encountered unidirectional transform during encode: ${e}`),this.name="ZodEncodeError"}}const yA={};function $i(t){return yA}function bA(t){const e=Object.values(t).filter(r=>typeof r=="number");return Object.entries(t).filter(([r,s])=>e.indexOf(+r)===-1).map(([r,s])=>s)}function iy(t,e){return typeof e=="bigint"?e.toString():e}function N0(t){return{get value(){{const e=t();return Object.defineProperty(this,"value",{value:e}),e}}}}function I0(t){return t==null}function M0(t){const e=t.startsWith("^")?1:0,n=t.endsWith("$")?t.length-1:t.length;return t.slice(e,n)}const jS=Symbol("evaluating");function ft(t,e,n){let r;Object.defineProperty(t,e,{get(){if(r!==jS)return r===void 0&&(r=jS,r=n()),r},set(s){Object.defineProperty(t,e,{value:s})},configurable:!0})}function Vi(t,e,n){Object.defineProperty(t,e,{value:n,writable:!0,enumerable:!0,configurable:!0})}function oi(...t){const e={};for(const n of t){const r=Object.getOwnPropertyDescriptors(n);Object.assign(e,r)}return Object.defineProperties({},e)}function LS(t){return JSON.stringify(t)}function t7(t){return t.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"")}const _A="captureStackTrace"in Error?Error.captureStackTrace:(...t)=>{};function Xf(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)}const n7=N0(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{const t=Function;return new t(""),!0}catch{return!1}});function Wl(t){if(Xf(t)===!1)return!1;const e=t.constructor;if(e===void 0||typeof e!="function")return!0;const n=e.prototype;return!(Xf(n)===!1||Object.prototype.hasOwnProperty.call(n,"isPrototypeOf")===!1)}function vA(t){return Wl(t)?{...t}:Array.isArray(t)?[...t]:t}const r7=new Set(["string","number","symbol"]);function Rd(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function li(t,e,n){const r=new t._zod.constr(e??t._zod.def);return(!e||n?.parent)&&(r._zod.parent=t),r}function je(t){const e=t;if(!e)return{};if(typeof e=="string")return{error:()=>e};if(e?.message!==void 0){if(e?.error!==void 0)throw new Error("Cannot specify both `message` and `error` params");e.error=e.message}return delete e.message,typeof e.error=="string"?{...e,error:()=>e.error}:e}function s7(t){return Object.keys(t).filter(e=>t[e]._zod.optin==="optional"&&t[e]._zod.optout==="optional")}function i7(t,e){const n=t._zod.def,r=n.checks;if(r&&r.length>0)throw new Error(".pick() cannot be used on object schemas containing refinements");const a=oi(t._zod.def,{get shape(){const l={};for(const u in e){if(!(u in n.shape))throw new Error(`Unrecognized key: "${u}"`);e[u]&&(l[u]=n.shape[u])}return Vi(this,"shape",l),l},checks:[]});return li(t,a)}function a7(t,e){const n=t._zod.def,r=n.checks;if(r&&r.length>0)throw new Error(".omit() cannot be used on object schemas containing refinements");const a=oi(t._zod.def,{get shape(){const l={...t._zod.def.shape};for(const u in e){if(!(u in n.shape))throw new Error(`Unrecognized key: "${u}"`);e[u]&&delete l[u]}return Vi(this,"shape",l),l},checks:[]});return li(t,a)}function o7(t,e){if(!Wl(e))throw new Error("Invalid input to extend: expected a plain object");const n=t._zod.def.checks;if(n&&n.length>0){const a=t._zod.def.shape;for(const l in e)if(Object.getOwnPropertyDescriptor(a,l)!==void 0)throw new Error("Cannot overwrite keys on object schemas containing refinements. Use `.safeExtend()` instead.")}const s=oi(t._zod.def,{get shape(){const a={...t._zod.def.shape,...e};return Vi(this,"shape",a),a}});return li(t,s)}function l7(t,e){if(!Wl(e))throw new Error("Invalid input to safeExtend: expected a plain object");const n=oi(t._zod.def,{get shape(){const r={...t._zod.def.shape,...e};return Vi(this,"shape",r),r}});return li(t,n)}function c7(t,e){const n=oi(t._zod.def,{get shape(){const r={...t._zod.def.shape,...e._zod.def.shape};return Vi(this,"shape",r),r},get catchall(){return e._zod.def.catchall},checks:[]});return li(t,n)}function u7(t,e,n){const s=e._zod.def.checks;if(s&&s.length>0)throw new Error(".partial() cannot be used on object schemas containing refinements");const l=oi(e._zod.def,{get shape(){const u=e._zod.def.shape,f={...u};if(n)for(const d in n){if(!(d in u))throw new Error(`Unrecognized key: "${d}"`);n[d]&&(f[d]=t?new t({type:"optional",innerType:u[d]}):u[d])}else for(const d in u)f[d]=t?new t({type:"optional",innerType:u[d]}):u[d];return Vi(this,"shape",f),f},checks:[]});return li(e,l)}function f7(t,e,n){const r=oi(e._zod.def,{get shape(){const s=e._zod.def.shape,a={...s};if(n)for(const l in n){if(!(l in a))throw new Error(`Unrecognized key: "${l}"`);n[l]&&(a[l]=new t({type:"nonoptional",innerType:s[l]}))}else for(const l in s)a[l]=new t({type:"nonoptional",innerType:s[l]});return Vi(this,"shape",a),a}});return li(e,r)}function Ha(t,e=0){if(t.aborted===!0)return!0;for(let n=e;n<t.issues.length;n++)if(t.issues[n]?.continue!==!0)return!0;return!1}function xA(t,e){return e.map(n=>{var r;return(r=n).path??(r.path=[]),n.path.unshift(t),n})}function Hu(t){return typeof t=="string"?t:t?.message}function Ui(t,e,n){const r={...t,path:t.path??[]};if(!t.message){const s=Hu(t.inst?._zod.def?.error?.(t))??Hu(e?.error?.(t))??Hu(n.customError?.(t))??Hu(n.localeError?.(t))??"Invalid input";r.message=s}return delete r.inst,delete r.continue,e?.reportInput||delete r.input,r}function D0(t){return Array.isArray(t)?"array":typeof t=="string"?"string":"unknown"}function ec(...t){const[e,n,r]=t;return typeof e=="string"?{message:e,code:"custom",input:n,inst:r}:{...e}}const wA=(t,e)=>{t.name="$ZodError",Object.defineProperty(t,"_zod",{value:t._zod,enumerable:!1}),Object.defineProperty(t,"issues",{value:e,enumerable:!1}),t.message=JSON.stringify(e,iy,2),Object.defineProperty(t,"toString",{value:()=>t.message,enumerable:!1})},SA=fe("$ZodError",wA),kA=fe("$ZodError",wA,{Parent:Error});function d7(t,e=n=>n.message){const n={},r=[];for(const s of t.issues)s.path.length>0?(n[s.path[0]]=n[s.path[0]]||[],n[s.path[0]].push(e(s))):r.push(e(s));return{formErrors:r,fieldErrors:n}}function h7(t,e=n=>n.message){const n={_errors:[]},r=s=>{for(const a of s.issues)if(a.code==="invalid_union"&&a.errors.length)a.errors.map(l=>r({issues:l}));else if(a.code==="invalid_key")r({issues:a.issues});else if(a.code==="invalid_element")r({issues:a.issues});else if(a.path.length===0)n._errors.push(e(a));else{let l=n,u=0;for(;u<a.path.length;){const f=a.path[u];u===a.path.length-1?(l[f]=l[f]||{_errors:[]},l[f]._errors.push(e(a))):l[f]=l[f]||{_errors:[]},l=l[f],u++}}};return r(t),n}const j0=t=>(e,n,r,s)=>{const a=r?Object.assign(r,{async:!1}):{async:!1},l=e._zod.run({value:n,issues:[]},a);if(l instanceof Promise)throw new Ja;if(l.issues.length){const u=new(s?.Err??t)(l.issues.map(f=>Ui(f,a,$i())));throw _A(u,s?.callee),u}return l.value},L0=t=>async(e,n,r,s)=>{const a=r?Object.assign(r,{async:!0}):{async:!0};let l=e._zod.run({value:n,issues:[]},a);if(l instanceof Promise&&(l=await l),l.issues.length){const u=new(s?.Err??t)(l.issues.map(f=>Ui(f,a,$i())));throw _A(u,s?.callee),u}return l.value},Od=t=>(e,n,r)=>{const s=r?{...r,async:!1}:{async:!1},a=e._zod.run({value:n,issues:[]},s);if(a instanceof Promise)throw new Ja;return a.issues.length?{success:!1,error:new(t??SA)(a.issues.map(l=>Ui(l,s,$i())))}:{success:!0,data:a.value}},p7=Od(kA),Nd=t=>async(e,n,r)=>{const s=r?Object.assign(r,{async:!0}):{async:!0};let a=e._zod.run({value:n,issues:[]},s);return a instanceof Promise&&(a=await a),a.issues.length?{success:!1,error:new t(a.issues.map(l=>Ui(l,s,$i())))}:{success:!0,data:a.value}},m7=Nd(kA),g7=t=>(e,n,r)=>{const s=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return j0(t)(e,n,s)},y7=t=>(e,n,r)=>j0(t)(e,n,r),b7=t=>async(e,n,r)=>{const s=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return L0(t)(e,n,s)},_7=t=>async(e,n,r)=>L0(t)(e,n,r),v7=t=>(e,n,r)=>{const s=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return Od(t)(e,n,s)},x7=t=>(e,n,r)=>Od(t)(e,n,r),w7=t=>async(e,n,r)=>{const s=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return Nd(t)(e,n,s)},S7=t=>async(e,n,r)=>Nd(t)(e,n,r),k7=/^[cC][^\s-]{8,}$/,E7=/^[0-9a-z]+$/,C7=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,T7=/^[0-9a-vA-V]{20}$/,A7=/^[A-Za-z0-9]{27}$/,R7=/^[a-zA-Z0-9_-]{21}$/,O7=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,N7=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,zS=t=>t?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${t}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,I7=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,M7="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function D7(){return new RegExp(M7,"u")}const j7=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,L7=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,z7=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,P7=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,B7=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,EA=/^[A-Za-z0-9_-]*$/,$7=/^\+[1-9]\d{6,14}$/,CA="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",U7=new RegExp(`^${CA}$`);function TA(t){const e="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof t.precision=="number"?t.precision===-1?`${e}`:t.precision===0?`${e}:[0-5]\\d`:`${e}:[0-5]\\d\\.\\d{${t.precision}}`:`${e}(?::[0-5]\\d(?:\\.\\d+)?)?`}function q7(t){return new RegExp(`^${TA(t)}$`)}function F7(t){const e=TA({precision:t.precision}),n=["Z"];t.local&&n.push(""),t.offset&&n.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const r=`${e}(?:${n.join("|")})`;return new RegExp(`^${CA}T(?:${r})$`)}const V7=t=>{const e=t?`[\\s\\S]{${t?.minimum??0},${t?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${e}$`)},H7=/^[^A-Z]*$/,G7=/^[^a-z]*$/,Xr=fe("$ZodCheck",(t,e)=>{var n;t._zod??(t._zod={}),t._zod.def=e,(n=t._zod).onattach??(n.onattach=[])}),K7=fe("$ZodCheckMaxLength",(t,e)=>{var n;Xr.init(t,e),(n=t._zod.def).when??(n.when=r=>{const s=r.value;return!I0(s)&&s.length!==void 0}),t._zod.onattach.push(r=>{const s=r._zod.bag.maximum??Number.POSITIVE_INFINITY;e.maximum<s&&(r._zod.bag.maximum=e.maximum)}),t._zod.check=r=>{const s=r.value;if(s.length<=e.maximum)return;const l=D0(s);r.issues.push({origin:l,code:"too_big",maximum:e.maximum,inclusive:!0,input:s,inst:t,continue:!e.abort})}}),Z7=fe("$ZodCheckMinLength",(t,e)=>{var n;Xr.init(t,e),(n=t._zod.def).when??(n.when=r=>{const s=r.value;return!I0(s)&&s.length!==void 0}),t._zod.onattach.push(r=>{const s=r._zod.bag.minimum??Number.NEGATIVE_INFINITY;e.minimum>s&&(r._zod.bag.minimum=e.minimum)}),t._zod.check=r=>{const s=r.value;if(s.length>=e.minimum)return;const l=D0(s);r.issues.push({origin:l,code:"too_small",minimum:e.minimum,inclusive:!0,input:s,inst:t,continue:!e.abort})}}),Q7=fe("$ZodCheckLengthEquals",(t,e)=>{var n;Xr.init(t,e),(n=t._zod.def).when??(n.when=r=>{const s=r.value;return!I0(s)&&s.length!==void 0}),t._zod.onattach.push(r=>{const s=r._zod.bag;s.minimum=e.length,s.maximum=e.length,s.length=e.length}),t._zod.check=r=>{const s=r.value,a=s.length;if(a===e.length)return;const l=D0(s),u=a>e.length;r.issues.push({origin:l,...u?{code:"too_big",maximum:e.length}:{code:"too_small",minimum:e.length},inclusive:!0,exact:!0,input:r.value,inst:t,continue:!e.abort})}}),Id=fe("$ZodCheckStringFormat",(t,e)=>{var n,r;Xr.init(t,e),t._zod.onattach.push(s=>{const a=s._zod.bag;a.format=e.format,e.pattern&&(a.patterns??(a.patterns=new Set),a.patterns.add(e.pattern))}),e.pattern?(n=t._zod).check??(n.check=s=>{e.pattern.lastIndex=0,!e.pattern.test(s.value)&&s.issues.push({origin:"string",code:"invalid_format",format:e.format,input:s.value,...e.pattern?{pattern:e.pattern.toString()}:{},inst:t,continue:!e.abort})}):(r=t._zod).check??(r.check=()=>{})}),J7=fe("$ZodCheckRegex",(t,e)=>{Id.init(t,e),t._zod.check=n=>{e.pattern.lastIndex=0,!e.pattern.test(n.value)&&n.issues.push({origin:"string",code:"invalid_format",format:"regex",input:n.value,pattern:e.pattern.toString(),inst:t,continue:!e.abort})}}),Y7=fe("$ZodCheckLowerCase",(t,e)=>{e.pattern??(e.pattern=H7),Id.init(t,e)}),X7=fe("$ZodCheckUpperCase",(t,e)=>{e.pattern??(e.pattern=G7),Id.init(t,e)}),W7=fe("$ZodCheckIncludes",(t,e)=>{Xr.init(t,e);const n=Rd(e.includes),r=new RegExp(typeof e.position=="number"?`^.{${e.position}}${n}`:n);e.pattern=r,t._zod.onattach.push(s=>{const a=s._zod.bag;a.patterns??(a.patterns=new Set),a.patterns.add(r)}),t._zod.check=s=>{s.value.includes(e.includes,e.position)||s.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:e.includes,input:s.value,inst:t,continue:!e.abort})}}),eV=fe("$ZodCheckStartsWith",(t,e)=>{Xr.init(t,e);const n=new RegExp(`^${Rd(e.prefix)}.*`);e.pattern??(e.pattern=n),t._zod.onattach.push(r=>{const s=r._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(n)}),t._zod.check=r=>{r.value.startsWith(e.prefix)||r.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:e.prefix,input:r.value,inst:t,continue:!e.abort})}}),tV=fe("$ZodCheckEndsWith",(t,e)=>{Xr.init(t,e);const n=new RegExp(`.*${Rd(e.suffix)}$`);e.pattern??(e.pattern=n),t._zod.onattach.push(r=>{const s=r._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(n)}),t._zod.check=r=>{r.value.endsWith(e.suffix)||r.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:e.suffix,input:r.value,inst:t,continue:!e.abort})}}),nV=fe("$ZodCheckOverwrite",(t,e)=>{Xr.init(t,e),t._zod.check=n=>{n.value=e.tx(n.value)}});class rV{constructor(e=[]){this.content=[],this.indent=0,this&&(this.args=e)}indented(e){this.indent+=1,e(this),this.indent-=1}write(e){if(typeof e=="function"){e(this,{execution:"sync"}),e(this,{execution:"async"});return}const r=e.split(`
`).filter(l=>l),s=Math.min(...r.map(l=>l.length-l.trimStart().length)),a=r.map(l=>l.slice(s)).map(l=>" ".repeat(this.indent*2)+l);for(const l of a)this.content.push(l)}compile(){const e=Function,n=this?.args,s=[...(this?.content??[""]).map(a=>`  ${a}`)];return new e(...n,s.join(`
`))}}const sV={major:4,minor:3,patch:4},Qt=fe("$ZodType",(t,e)=>{var n;t??(t={}),t._zod.def=e,t._zod.bag=t._zod.bag||{},t._zod.version=sV;const r=[...t._zod.def.checks??[]];t._zod.traits.has("$ZodCheck")&&r.unshift(t);for(const s of r)for(const a of s._zod.onattach)a(t);if(r.length===0)(n=t._zod).deferred??(n.deferred=[]),t._zod.deferred?.push(()=>{t._zod.run=t._zod.parse});else{const s=(l,u,f)=>{let d=Ha(l),m;for(const p of u){if(p._zod.def.when){if(!p._zod.def.when(l))continue}else if(d)continue;const y=l.issues.length,g=p._zod.check(l);if(g instanceof Promise&&f?.async===!1)throw new Ja;if(m||g instanceof Promise)m=(m??Promise.resolve()).then(async()=>{await g,l.issues.length!==y&&(d||(d=Ha(l,y)))});else{if(l.issues.length===y)continue;d||(d=Ha(l,y))}}return m?m.then(()=>l):l},a=(l,u,f)=>{if(Ha(l))return l.aborted=!0,l;const d=s(u,r,f);if(d instanceof Promise){if(f.async===!1)throw new Ja;return d.then(m=>t._zod.parse(m,f))}return t._zod.parse(d,f)};t._zod.run=(l,u)=>{if(u.skipChecks)return t._zod.parse(l,u);if(u.direction==="backward"){const d=t._zod.parse({value:l.value,issues:[]},{...u,skipChecks:!0});return d instanceof Promise?d.then(m=>a(m,l,u)):a(d,l,u)}const f=t._zod.parse(l,u);if(f instanceof Promise){if(u.async===!1)throw new Ja;return f.then(d=>s(d,r,u))}return s(f,r,u)}}ft(t,"~standard",()=>({validate:s=>{try{const a=p7(t,s);return a.success?{value:a.data}:{issues:a.error?.issues}}catch{return m7(t,s).then(l=>l.success?{value:l.data}:{issues:l.error?.issues})}},vendor:"zod",version:1}))}),z0=fe("$ZodString",(t,e)=>{Qt.init(t,e),t._zod.pattern=[...t?._zod.bag?.patterns??[]].pop()??V7(t._zod.bag),t._zod.parse=(n,r)=>{if(e.coerce)try{n.value=String(n.value)}catch{}return typeof n.value=="string"||n.issues.push({expected:"string",code:"invalid_type",input:n.value,inst:t}),n}}),St=fe("$ZodStringFormat",(t,e)=>{Id.init(t,e),z0.init(t,e)}),iV=fe("$ZodGUID",(t,e)=>{e.pattern??(e.pattern=N7),St.init(t,e)}),aV=fe("$ZodUUID",(t,e)=>{if(e.version){const r={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[e.version];if(r===void 0)throw new Error(`Invalid UUID version: "${e.version}"`);e.pattern??(e.pattern=zS(r))}else e.pattern??(e.pattern=zS());St.init(t,e)}),oV=fe("$ZodEmail",(t,e)=>{e.pattern??(e.pattern=I7),St.init(t,e)}),lV=fe("$ZodURL",(t,e)=>{St.init(t,e),t._zod.check=n=>{try{const r=n.value.trim(),s=new URL(r);e.hostname&&(e.hostname.lastIndex=0,e.hostname.test(s.hostname)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:e.hostname.source,input:n.value,inst:t,continue:!e.abort})),e.protocol&&(e.protocol.lastIndex=0,e.protocol.test(s.protocol.endsWith(":")?s.protocol.slice(0,-1):s.protocol)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:e.protocol.source,input:n.value,inst:t,continue:!e.abort})),e.normalize?n.value=s.href:n.value=r;return}catch{n.issues.push({code:"invalid_format",format:"url",input:n.value,inst:t,continue:!e.abort})}}}),cV=fe("$ZodEmoji",(t,e)=>{e.pattern??(e.pattern=D7()),St.init(t,e)}),uV=fe("$ZodNanoID",(t,e)=>{e.pattern??(e.pattern=R7),St.init(t,e)}),fV=fe("$ZodCUID",(t,e)=>{e.pattern??(e.pattern=k7),St.init(t,e)}),dV=fe("$ZodCUID2",(t,e)=>{e.pattern??(e.pattern=E7),St.init(t,e)}),hV=fe("$ZodULID",(t,e)=>{e.pattern??(e.pattern=C7),St.init(t,e)}),pV=fe("$ZodXID",(t,e)=>{e.pattern??(e.pattern=T7),St.init(t,e)}),mV=fe("$ZodKSUID",(t,e)=>{e.pattern??(e.pattern=A7),St.init(t,e)}),gV=fe("$ZodISODateTime",(t,e)=>{e.pattern??(e.pattern=F7(e)),St.init(t,e)}),yV=fe("$ZodISODate",(t,e)=>{e.pattern??(e.pattern=U7),St.init(t,e)}),bV=fe("$ZodISOTime",(t,e)=>{e.pattern??(e.pattern=q7(e)),St.init(t,e)}),_V=fe("$ZodISODuration",(t,e)=>{e.pattern??(e.pattern=O7),St.init(t,e)}),vV=fe("$ZodIPv4",(t,e)=>{e.pattern??(e.pattern=j7),St.init(t,e),t._zod.bag.format="ipv4"}),xV=fe("$ZodIPv6",(t,e)=>{e.pattern??(e.pattern=L7),St.init(t,e),t._zod.bag.format="ipv6",t._zod.check=n=>{try{new URL(`http://[${n.value}]`)}catch{n.issues.push({code:"invalid_format",format:"ipv6",input:n.value,inst:t,continue:!e.abort})}}}),wV=fe("$ZodCIDRv4",(t,e)=>{e.pattern??(e.pattern=z7),St.init(t,e)}),SV=fe("$ZodCIDRv6",(t,e)=>{e.pattern??(e.pattern=P7),St.init(t,e),t._zod.check=n=>{const r=n.value.split("/");try{if(r.length!==2)throw new Error;const[s,a]=r;if(!a)throw new Error;const l=Number(a);if(`${l}`!==a)throw new Error;if(l<0||l>128)throw new Error;new URL(`http://[${s}]`)}catch{n.issues.push({code:"invalid_format",format:"cidrv6",input:n.value,inst:t,continue:!e.abort})}}});function AA(t){if(t==="")return!0;if(t.length%4!==0)return!1;try{return atob(t),!0}catch{return!1}}const kV=fe("$ZodBase64",(t,e)=>{e.pattern??(e.pattern=B7),St.init(t,e),t._zod.bag.contentEncoding="base64",t._zod.check=n=>{AA(n.value)||n.issues.push({code:"invalid_format",format:"base64",input:n.value,inst:t,continue:!e.abort})}});function EV(t){if(!EA.test(t))return!1;const e=t.replace(/[-_]/g,r=>r==="-"?"+":"/"),n=e.padEnd(Math.ceil(e.length/4)*4,"=");return AA(n)}const CV=fe("$ZodBase64URL",(t,e)=>{e.pattern??(e.pattern=EA),St.init(t,e),t._zod.bag.contentEncoding="base64url",t._zod.check=n=>{EV(n.value)||n.issues.push({code:"invalid_format",format:"base64url",input:n.value,inst:t,continue:!e.abort})}}),TV=fe("$ZodE164",(t,e)=>{e.pattern??(e.pattern=$7),St.init(t,e)});function AV(t,e=null){try{const n=t.split(".");if(n.length!==3)return!1;const[r]=n;if(!r)return!1;const s=JSON.parse(atob(r));return!("typ"in s&&s?.typ!=="JWT"||!s.alg||e&&(!("alg"in s)||s.alg!==e))}catch{return!1}}const RV=fe("$ZodJWT",(t,e)=>{St.init(t,e),t._zod.check=n=>{AV(n.value,e.alg)||n.issues.push({code:"invalid_format",format:"jwt",input:n.value,inst:t,continue:!e.abort})}}),OV=fe("$ZodUnknown",(t,e)=>{Qt.init(t,e),t._zod.parse=n=>n}),NV=fe("$ZodNever",(t,e)=>{Qt.init(t,e),t._zod.parse=(n,r)=>(n.issues.push({expected:"never",code:"invalid_type",input:n.value,inst:t}),n)});function PS(t,e,n){t.issues.length&&e.issues.push(...xA(n,t.issues)),e.value[n]=t.value}const IV=fe("$ZodArray",(t,e)=>{Qt.init(t,e),t._zod.parse=(n,r)=>{const s=n.value;if(!Array.isArray(s))return n.issues.push({expected:"array",code:"invalid_type",input:s,inst:t}),n;n.value=Array(s.length);const a=[];for(let l=0;l<s.length;l++){const u=s[l],f=e.element._zod.run({value:u,issues:[]},r);f instanceof Promise?a.push(f.then(d=>PS(d,n,l))):PS(f,n,l)}return a.length?Promise.all(a).then(()=>n):n}});function Wf(t,e,n,r,s){if(t.issues.length){if(s&&!(n in r))return;e.issues.push(...xA(n,t.issues))}t.value===void 0?n in r&&(e.value[n]=void 0):e.value[n]=t.value}function RA(t){const e=Object.keys(t.shape);for(const r of e)if(!t.shape?.[r]?._zod?.traits?.has("$ZodType"))throw new Error(`Invalid element at key "${r}": expected a Zod schema`);const n=s7(t.shape);return{...t,keys:e,keySet:new Set(e),numKeys:e.length,optionalKeys:new Set(n)}}function OA(t,e,n,r,s,a){const l=[],u=s.keySet,f=s.catchall._zod,d=f.def.type,m=f.optout==="optional";for(const p in e){if(u.has(p))continue;if(d==="never"){l.push(p);continue}const y=f.run({value:e[p],issues:[]},r);y instanceof Promise?t.push(y.then(g=>Wf(g,n,p,e,m))):Wf(y,n,p,e,m)}return l.length&&n.issues.push({code:"unrecognized_keys",keys:l,input:e,inst:a}),t.length?Promise.all(t).then(()=>n):n}const MV=fe("$ZodObject",(t,e)=>{if(Qt.init(t,e),!Object.getOwnPropertyDescriptor(e,"shape")?.get){const u=e.shape;Object.defineProperty(e,"shape",{get:()=>{const f={...u};return Object.defineProperty(e,"shape",{value:f}),f}})}const r=N0(()=>RA(e));ft(t._zod,"propValues",()=>{const u=e.shape,f={};for(const d in u){const m=u[d]._zod;if(m.values){f[d]??(f[d]=new Set);for(const p of m.values)f[d].add(p)}}return f});const s=Xf,a=e.catchall;let l;t._zod.parse=(u,f)=>{l??(l=r.value);const d=u.value;if(!s(d))return u.issues.push({expected:"object",code:"invalid_type",input:d,inst:t}),u;u.value={};const m=[],p=l.shape;for(const y of l.keys){const g=p[y],v=g._zod.optout==="optional",x=g._zod.run({value:d[y],issues:[]},f);x instanceof Promise?m.push(x.then(C=>Wf(C,u,y,d,v))):Wf(x,u,y,d,v)}return a?OA(m,d,u,f,r.value,t):m.length?Promise.all(m).then(()=>u):u}}),DV=fe("$ZodObjectJIT",(t,e)=>{MV.init(t,e);const n=t._zod.parse,r=N0(()=>RA(e)),s=y=>{const g=new rV(["shape","payload","ctx"]),v=r.value,x=A=>{const M=LS(A);return`shape[${M}]._zod.run({ value: input[${M}], issues: [] }, ctx)`};g.write("const input = payload.value;");const C=Object.create(null);let k=0;for(const A of v.keys)C[A]=`key_${k++}`;g.write("const newResult = {};");for(const A of v.keys){const M=C[A],I=LS(A),B=y[A]?._zod?.optout==="optional";g.write(`const ${M} = ${x(A)};`),B?g.write(`
        if (${M}.issues.length) {
          if (${I} in input) {
            payload.issues = payload.issues.concat(${M}.issues.map(iss => ({
              ...iss,
              path: iss.path ? [${I}, ...iss.path] : [${I}]
            })));
          }
        }
        
        if (${M}.value === undefined) {
          if (${I} in input) {
            newResult[${I}] = undefined;
          }
        } else {
          newResult[${I}] = ${M}.value;
        }
        
      `):g.write(`
        if (${M}.issues.length) {
          payload.issues = payload.issues.concat(${M}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${I}, ...iss.path] : [${I}]
          })));
        }
        
        if (${M}.value === undefined) {
          if (${I} in input) {
            newResult[${I}] = undefined;
          }
        } else {
          newResult[${I}] = ${M}.value;
        }
        
      `)}g.write("payload.value = newResult;"),g.write("return payload;");const T=g.compile();return(A,M)=>T(y,A,M)};let a;const l=Xf,u=!yA.jitless,d=u&&n7.value,m=e.catchall;let p;t._zod.parse=(y,g)=>{p??(p=r.value);const v=y.value;return l(v)?u&&d&&g?.async===!1&&g.jitless!==!0?(a||(a=s(e.shape)),y=a(y,g),m?OA([],v,y,g,p,t):y):n(y,g):(y.issues.push({expected:"object",code:"invalid_type",input:v,inst:t}),y)}});function BS(t,e,n,r){for(const a of t)if(a.issues.length===0)return e.value=a.value,e;const s=t.filter(a=>!Ha(a));return s.length===1?(e.value=s[0].value,s[0]):(e.issues.push({code:"invalid_union",input:e.value,inst:n,errors:t.map(a=>a.issues.map(l=>Ui(l,r,$i())))}),e)}const jV=fe("$ZodUnion",(t,e)=>{Qt.init(t,e),ft(t._zod,"optin",()=>e.options.some(s=>s._zod.optin==="optional")?"optional":void 0),ft(t._zod,"optout",()=>e.options.some(s=>s._zod.optout==="optional")?"optional":void 0),ft(t._zod,"values",()=>{if(e.options.every(s=>s._zod.values))return new Set(e.options.flatMap(s=>Array.from(s._zod.values)))}),ft(t._zod,"pattern",()=>{if(e.options.every(s=>s._zod.pattern)){const s=e.options.map(a=>a._zod.pattern);return new RegExp(`^(${s.map(a=>M0(a.source)).join("|")})$`)}});const n=e.options.length===1,r=e.options[0]._zod.run;t._zod.parse=(s,a)=>{if(n)return r(s,a);let l=!1;const u=[];for(const f of e.options){const d=f._zod.run({value:s.value,issues:[]},a);if(d instanceof Promise)u.push(d),l=!0;else{if(d.issues.length===0)return d;u.push(d)}}return l?Promise.all(u).then(f=>BS(f,s,t,a)):BS(u,s,t,a)}}),LV=fe("$ZodIntersection",(t,e)=>{Qt.init(t,e),t._zod.parse=(n,r)=>{const s=n.value,a=e.left._zod.run({value:s,issues:[]},r),l=e.right._zod.run({value:s,issues:[]},r);return a instanceof Promise||l instanceof Promise?Promise.all([a,l]).then(([f,d])=>$S(n,f,d)):$S(n,a,l)}});function ay(t,e){if(t===e)return{valid:!0,data:t};if(t instanceof Date&&e instanceof Date&&+t==+e)return{valid:!0,data:t};if(Wl(t)&&Wl(e)){const n=Object.keys(e),r=Object.keys(t).filter(a=>n.indexOf(a)!==-1),s={...t,...e};for(const a of r){const l=ay(t[a],e[a]);if(!l.valid)return{valid:!1,mergeErrorPath:[a,...l.mergeErrorPath]};s[a]=l.data}return{valid:!0,data:s}}if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return{valid:!1,mergeErrorPath:[]};const n=[];for(let r=0;r<t.length;r++){const s=t[r],a=e[r],l=ay(s,a);if(!l.valid)return{valid:!1,mergeErrorPath:[r,...l.mergeErrorPath]};n.push(l.data)}return{valid:!0,data:n}}return{valid:!1,mergeErrorPath:[]}}function $S(t,e,n){const r=new Map;let s;for(const u of e.issues)if(u.code==="unrecognized_keys"){s??(s=u);for(const f of u.keys)r.has(f)||r.set(f,{}),r.get(f).l=!0}else t.issues.push(u);for(const u of n.issues)if(u.code==="unrecognized_keys")for(const f of u.keys)r.has(f)||r.set(f,{}),r.get(f).r=!0;else t.issues.push(u);const a=[...r].filter(([,u])=>u.l&&u.r).map(([u])=>u);if(a.length&&s&&t.issues.push({...s,keys:a}),Ha(t))return t;const l=ay(e.value,n.value);if(!l.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(l.mergeErrorPath)}`);return t.value=l.data,t}const zV=fe("$ZodEnum",(t,e)=>{Qt.init(t,e);const n=bA(e.entries),r=new Set(n);t._zod.values=r,t._zod.pattern=new RegExp(`^(${n.filter(s=>r7.has(typeof s)).map(s=>typeof s=="string"?Rd(s):s.toString()).join("|")})$`),t._zod.parse=(s,a)=>{const l=s.value;return r.has(l)||s.issues.push({code:"invalid_value",values:n,input:l,inst:t}),s}}),PV=fe("$ZodTransform",(t,e)=>{Qt.init(t,e),t._zod.parse=(n,r)=>{if(r.direction==="backward")throw new gA(t.constructor.name);const s=e.transform(n.value,n);if(r.async)return(s instanceof Promise?s:Promise.resolve(s)).then(l=>(n.value=l,n));if(s instanceof Promise)throw new Ja;return n.value=s,n}});function US(t,e){return t.issues.length&&e===void 0?{issues:[],value:void 0}:t}const NA=fe("$ZodOptional",(t,e)=>{Qt.init(t,e),t._zod.optin="optional",t._zod.optout="optional",ft(t._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,void 0]):void 0),ft(t._zod,"pattern",()=>{const n=e.innerType._zod.pattern;return n?new RegExp(`^(${M0(n.source)})?$`):void 0}),t._zod.parse=(n,r)=>{if(e.innerType._zod.optin==="optional"){const s=e.innerType._zod.run(n,r);return s instanceof Promise?s.then(a=>US(a,n.value)):US(s,n.value)}return n.value===void 0?n:e.innerType._zod.run(n,r)}}),BV=fe("$ZodExactOptional",(t,e)=>{NA.init(t,e),ft(t._zod,"values",()=>e.innerType._zod.values),ft(t._zod,"pattern",()=>e.innerType._zod.pattern),t._zod.parse=(n,r)=>e.innerType._zod.run(n,r)}),$V=fe("$ZodNullable",(t,e)=>{Qt.init(t,e),ft(t._zod,"optin",()=>e.innerType._zod.optin),ft(t._zod,"optout",()=>e.innerType._zod.optout),ft(t._zod,"pattern",()=>{const n=e.innerType._zod.pattern;return n?new RegExp(`^(${M0(n.source)}|null)$`):void 0}),ft(t._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,null]):void 0),t._zod.parse=(n,r)=>n.value===null?n:e.innerType._zod.run(n,r)}),UV=fe("$ZodDefault",(t,e)=>{Qt.init(t,e),t._zod.optin="optional",ft(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(n,r)=>{if(r.direction==="backward")return e.innerType._zod.run(n,r);if(n.value===void 0)return n.value=e.defaultValue,n;const s=e.innerType._zod.run(n,r);return s instanceof Promise?s.then(a=>qS(a,e)):qS(s,e)}});function qS(t,e){return t.value===void 0&&(t.value=e.defaultValue),t}const qV=fe("$ZodPrefault",(t,e)=>{Qt.init(t,e),t._zod.optin="optional",ft(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(n,r)=>(r.direction==="backward"||n.value===void 0&&(n.value=e.defaultValue),e.innerType._zod.run(n,r))}),FV=fe("$ZodNonOptional",(t,e)=>{Qt.init(t,e),ft(t._zod,"values",()=>{const n=e.innerType._zod.values;return n?new Set([...n].filter(r=>r!==void 0)):void 0}),t._zod.parse=(n,r)=>{const s=e.innerType._zod.run(n,r);return s instanceof Promise?s.then(a=>FS(a,t)):FS(s,t)}});function FS(t,e){return!t.issues.length&&t.value===void 0&&t.issues.push({code:"invalid_type",expected:"nonoptional",input:t.value,inst:e}),t}const VV=fe("$ZodCatch",(t,e)=>{Qt.init(t,e),ft(t._zod,"optin",()=>e.innerType._zod.optin),ft(t._zod,"optout",()=>e.innerType._zod.optout),ft(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(n,r)=>{if(r.direction==="backward")return e.innerType._zod.run(n,r);const s=e.innerType._zod.run(n,r);return s instanceof Promise?s.then(a=>(n.value=a.value,a.issues.length&&(n.value=e.catchValue({...n,error:{issues:a.issues.map(l=>Ui(l,r,$i()))},input:n.value}),n.issues=[]),n)):(n.value=s.value,s.issues.length&&(n.value=e.catchValue({...n,error:{issues:s.issues.map(a=>Ui(a,r,$i()))},input:n.value}),n.issues=[]),n)}}),HV=fe("$ZodPipe",(t,e)=>{Qt.init(t,e),ft(t._zod,"values",()=>e.in._zod.values),ft(t._zod,"optin",()=>e.in._zod.optin),ft(t._zod,"optout",()=>e.out._zod.optout),ft(t._zod,"propValues",()=>e.in._zod.propValues),t._zod.parse=(n,r)=>{if(r.direction==="backward"){const a=e.out._zod.run(n,r);return a instanceof Promise?a.then(l=>Gu(l,e.in,r)):Gu(a,e.in,r)}const s=e.in._zod.run(n,r);return s instanceof Promise?s.then(a=>Gu(a,e.out,r)):Gu(s,e.out,r)}});function Gu(t,e,n){return t.issues.length?(t.aborted=!0,t):e._zod.run({value:t.value,issues:t.issues},n)}const GV=fe("$ZodReadonly",(t,e)=>{Qt.init(t,e),ft(t._zod,"propValues",()=>e.innerType._zod.propValues),ft(t._zod,"values",()=>e.innerType._zod.values),ft(t._zod,"optin",()=>e.innerType?._zod?.optin),ft(t._zod,"optout",()=>e.innerType?._zod?.optout),t._zod.parse=(n,r)=>{if(r.direction==="backward")return e.innerType._zod.run(n,r);const s=e.innerType._zod.run(n,r);return s instanceof Promise?s.then(VS):VS(s)}});function VS(t){return t.value=Object.freeze(t.value),t}const KV=fe("$ZodCustom",(t,e)=>{Xr.init(t,e),Qt.init(t,e),t._zod.parse=(n,r)=>n,t._zod.check=n=>{const r=n.value,s=e.fn(r);if(s instanceof Promise)return s.then(a=>HS(a,n,r,t));HS(s,n,r,t)}});function HS(t,e,n,r){if(!t){const s={code:"custom",input:n,inst:r,path:[...r._zod.def.path??[]],continue:!r._zod.def.abort};r._zod.def.params&&(s.params=r._zod.def.params),e.issues.push(ec(s))}}var GS;class ZV{constructor(){this._map=new WeakMap,this._idmap=new Map}add(e,...n){const r=n[0];return this._map.set(e,r),r&&typeof r=="object"&&"id"in r&&this._idmap.set(r.id,e),this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(e){const n=this._map.get(e);return n&&typeof n=="object"&&"id"in n&&this._idmap.delete(n.id),this._map.delete(e),this}get(e){const n=e._zod.parent;if(n){const r={...this.get(n)??{}};delete r.id;const s={...r,...this._map.get(e)};return Object.keys(s).length?s:void 0}return this._map.get(e)}has(e){return this._map.has(e)}}function QV(){return new ZV}(GS=globalThis).__zod_globalRegistry??(GS.__zod_globalRegistry=QV());const Cl=globalThis.__zod_globalRegistry;function JV(t,e){return new t({type:"string",...je(e)})}function YV(t,e){return new t({type:"string",format:"email",check:"string_format",abort:!1,...je(e)})}function KS(t,e){return new t({type:"string",format:"guid",check:"string_format",abort:!1,...je(e)})}function XV(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,...je(e)})}function WV(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...je(e)})}function eH(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...je(e)})}function tH(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...je(e)})}function nH(t,e){return new t({type:"string",format:"url",check:"string_format",abort:!1,...je(e)})}function rH(t,e){return new t({type:"string",format:"emoji",check:"string_format",abort:!1,...je(e)})}function sH(t,e){return new t({type:"string",format:"nanoid",check:"string_format",abort:!1,...je(e)})}function iH(t,e){return new t({type:"string",format:"cuid",check:"string_format",abort:!1,...je(e)})}function aH(t,e){return new t({type:"string",format:"cuid2",check:"string_format",abort:!1,...je(e)})}function oH(t,e){return new t({type:"string",format:"ulid",check:"string_format",abort:!1,...je(e)})}function lH(t,e){return new t({type:"string",format:"xid",check:"string_format",abort:!1,...je(e)})}function cH(t,e){return new t({type:"string",format:"ksuid",check:"string_format",abort:!1,...je(e)})}function uH(t,e){return new t({type:"string",format:"ipv4",check:"string_format",abort:!1,...je(e)})}function fH(t,e){return new t({type:"string",format:"ipv6",check:"string_format",abort:!1,...je(e)})}function dH(t,e){return new t({type:"string",format:"cidrv4",check:"string_format",abort:!1,...je(e)})}function hH(t,e){return new t({type:"string",format:"cidrv6",check:"string_format",abort:!1,...je(e)})}function pH(t,e){return new t({type:"string",format:"base64",check:"string_format",abort:!1,...je(e)})}function mH(t,e){return new t({type:"string",format:"base64url",check:"string_format",abort:!1,...je(e)})}function gH(t,e){return new t({type:"string",format:"e164",check:"string_format",abort:!1,...je(e)})}function yH(t,e){return new t({type:"string",format:"jwt",check:"string_format",abort:!1,...je(e)})}function bH(t,e){return new t({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...je(e)})}function _H(t,e){return new t({type:"string",format:"date",check:"string_format",...je(e)})}function vH(t,e){return new t({type:"string",format:"time",check:"string_format",precision:null,...je(e)})}function xH(t,e){return new t({type:"string",format:"duration",check:"string_format",...je(e)})}function wH(t){return new t({type:"unknown"})}function SH(t,e){return new t({type:"never",...je(e)})}function IA(t,e){return new K7({check:"max_length",...je(e),maximum:t})}function ed(t,e){return new Z7({check:"min_length",...je(e),minimum:t})}function MA(t,e){return new Q7({check:"length_equals",...je(e),length:t})}function kH(t,e){return new J7({check:"string_format",format:"regex",...je(e),pattern:t})}function EH(t){return new Y7({check:"string_format",format:"lowercase",...je(t)})}function CH(t){return new X7({check:"string_format",format:"uppercase",...je(t)})}function TH(t,e){return new W7({check:"string_format",format:"includes",...je(e),includes:t})}function AH(t,e){return new eV({check:"string_format",format:"starts_with",...je(e),prefix:t})}function RH(t,e){return new tV({check:"string_format",format:"ends_with",...je(e),suffix:t})}function fo(t){return new nV({check:"overwrite",tx:t})}function OH(t){return fo(e=>e.normalize(t))}function NH(){return fo(t=>t.trim())}function IH(){return fo(t=>t.toLowerCase())}function MH(){return fo(t=>t.toUpperCase())}function DH(){return fo(t=>t7(t))}function jH(t,e,n){return new t({type:"array",element:e,...je(n)})}function LH(t,e,n){return new t({type:"custom",check:"custom",fn:e,...je(n)})}function zH(t){const e=PH(n=>(n.addIssue=r=>{if(typeof r=="string")n.issues.push(ec(r,n.value,e._zod.def));else{const s=r;s.fatal&&(s.continue=!1),s.code??(s.code="custom"),s.input??(s.input=n.value),s.inst??(s.inst=e),s.continue??(s.continue=!e._zod.def.abort),n.issues.push(ec(s))}},t(n.value,n)));return e}function PH(t,e){const n=new Xr({check:"custom",...je(e)});return n._zod.check=t,n}function DA(t){let e=t?.target??"draft-2020-12";return e==="draft-4"&&(e="draft-04"),e==="draft-7"&&(e="draft-07"),{processors:t.processors??{},metadataRegistry:t?.metadata??Cl,target:e,unrepresentable:t?.unrepresentable??"throw",override:t?.override??(()=>{}),io:t?.io??"output",counter:0,seen:new Map,cycles:t?.cycles??"ref",reused:t?.reused??"inline",external:t?.external??void 0}}function pn(t,e,n={path:[],schemaPath:[]}){var r;const s=t._zod.def,a=e.seen.get(t);if(a)return a.count++,n.schemaPath.includes(t)&&(a.cycle=n.path),a.schema;const l={schema:{},count:1,cycle:void 0,path:n.path};e.seen.set(t,l);const u=t._zod.toJSONSchema?.();if(u)l.schema=u;else{const m={...n,schemaPath:[...n.schemaPath,t],path:n.path};if(t._zod.processJSONSchema)t._zod.processJSONSchema(e,l.schema,m);else{const y=l.schema,g=e.processors[s.type];if(!g)throw new Error(`[toJSONSchema]: Non-representable type encountered: ${s.type}`);g(t,e,y,m)}const p=t._zod.parent;p&&(l.ref||(l.ref=p),pn(p,e,m),e.seen.get(p).isParent=!0)}const f=e.metadataRegistry.get(t);return f&&Object.assign(l.schema,f),e.io==="input"&&An(t)&&(delete l.schema.examples,delete l.schema.default),e.io==="input"&&l.schema._prefault&&((r=l.schema).default??(r.default=l.schema._prefault)),delete l.schema._prefault,e.seen.get(t).schema}function jA(t,e){const n=t.seen.get(e);if(!n)throw new Error("Unprocessed schema. This is a bug in Zod.");const r=new Map;for(const l of t.seen.entries()){const u=t.metadataRegistry.get(l[0])?.id;if(u){const f=r.get(u);if(f&&f!==l[0])throw new Error(`Duplicate schema id "${u}" detected during JSON Schema conversion. Two different schemas cannot share the same id when converted together.`);r.set(u,l[0])}}const s=l=>{const u=t.target==="draft-2020-12"?"$defs":"definitions";if(t.external){const p=t.external.registry.get(l[0])?.id,y=t.external.uri??(v=>v);if(p)return{ref:y(p)};const g=l[1].defId??l[1].schema.id??`schema${t.counter++}`;return l[1].defId=g,{defId:g,ref:`${y("__shared")}#/${u}/${g}`}}if(l[1]===n)return{ref:"#"};const d=`#/${u}/`,m=l[1].schema.id??`__schema${t.counter++}`;return{defId:m,ref:d+m}},a=l=>{if(l[1].schema.$ref)return;const u=l[1],{ref:f,defId:d}=s(l);u.def={...u.schema},d&&(u.defId=d);const m=u.schema;for(const p in m)delete m[p];m.$ref=f};if(t.cycles==="throw")for(const l of t.seen.entries()){const u=l[1];if(u.cycle)throw new Error(`Cycle detected: #/${u.cycle?.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(const l of t.seen.entries()){const u=l[1];if(e===l[0]){a(l);continue}if(t.external){const d=t.external.registry.get(l[0])?.id;if(e!==l[0]&&d){a(l);continue}}if(t.metadataRegistry.get(l[0])?.id){a(l);continue}if(u.cycle){a(l);continue}if(u.count>1&&t.reused==="ref"){a(l);continue}}}function LA(t,e){const n=t.seen.get(e);if(!n)throw new Error("Unprocessed schema. This is a bug in Zod.");const r=l=>{const u=t.seen.get(l);if(u.ref===null)return;const f=u.def??u.schema,d={...f},m=u.ref;if(u.ref=null,m){r(m);const y=t.seen.get(m),g=y.schema;if(g.$ref&&(t.target==="draft-07"||t.target==="draft-04"||t.target==="openapi-3.0")?(f.allOf=f.allOf??[],f.allOf.push(g)):Object.assign(f,g),Object.assign(f,d),l._zod.parent===m)for(const x in f)x==="$ref"||x==="allOf"||x in d||delete f[x];if(g.$ref)for(const x in f)x==="$ref"||x==="allOf"||x in y.def&&JSON.stringify(f[x])===JSON.stringify(y.def[x])&&delete f[x]}const p=l._zod.parent;if(p&&p!==m){r(p);const y=t.seen.get(p);if(y?.schema.$ref&&(f.$ref=y.schema.$ref,y.def))for(const g in f)g==="$ref"||g==="allOf"||g in y.def&&JSON.stringify(f[g])===JSON.stringify(y.def[g])&&delete f[g]}t.override({zodSchema:l,jsonSchema:f,path:u.path??[]})};for(const l of[...t.seen.entries()].reverse())r(l[0]);const s={};if(t.target==="draft-2020-12"?s.$schema="https://json-schema.org/draft/2020-12/schema":t.target==="draft-07"?s.$schema="http://json-schema.org/draft-07/schema#":t.target==="draft-04"?s.$schema="http://json-schema.org/draft-04/schema#":t.target,t.external?.uri){const l=t.external.registry.get(e)?.id;if(!l)throw new Error("Schema is missing an `id` property");s.$id=t.external.uri(l)}Object.assign(s,n.def??n.schema);const a=t.external?.defs??{};for(const l of t.seen.entries()){const u=l[1];u.def&&u.defId&&(a[u.defId]=u.def)}t.external||Object.keys(a).length>0&&(t.target==="draft-2020-12"?s.$defs=a:s.definitions=a);try{const l=JSON.parse(JSON.stringify(s));return Object.defineProperty(l,"~standard",{value:{...e["~standard"],jsonSchema:{input:td(e,"input",t.processors),output:td(e,"output",t.processors)}},enumerable:!1,writable:!1}),l}catch{throw new Error("Error converting schema to JSON.")}}function An(t,e){const n=e??{seen:new Set};if(n.seen.has(t))return!1;n.seen.add(t);const r=t._zod.def;if(r.type==="transform")return!0;if(r.type==="array")return An(r.element,n);if(r.type==="set")return An(r.valueType,n);if(r.type==="lazy")return An(r.getter(),n);if(r.type==="promise"||r.type==="optional"||r.type==="nonoptional"||r.type==="nullable"||r.type==="readonly"||r.type==="default"||r.type==="prefault")return An(r.innerType,n);if(r.type==="intersection")return An(r.left,n)||An(r.right,n);if(r.type==="record"||r.type==="map")return An(r.keyType,n)||An(r.valueType,n);if(r.type==="pipe")return An(r.in,n)||An(r.out,n);if(r.type==="object"){for(const s in r.shape)if(An(r.shape[s],n))return!0;return!1}if(r.type==="union"){for(const s of r.options)if(An(s,n))return!0;return!1}if(r.type==="tuple"){for(const s of r.items)if(An(s,n))return!0;return!!(r.rest&&An(r.rest,n))}return!1}const BH=(t,e={})=>n=>{const r=DA({...n,processors:e});return pn(t,r),jA(r,t),LA(r,t)},td=(t,e,n={})=>r=>{const{libraryOptions:s,target:a}=r??{},l=DA({...s??{},target:a,io:e,processors:n});return pn(t,l),jA(l,t),LA(l,t)},$H={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},UH=(t,e,n,r)=>{const s=n;s.type="string";const{minimum:a,maximum:l,format:u,patterns:f,contentEncoding:d}=t._zod.bag;if(typeof a=="number"&&(s.minLength=a),typeof l=="number"&&(s.maxLength=l),u&&(s.format=$H[u]??u,s.format===""&&delete s.format,u==="time"&&delete s.format),d&&(s.contentEncoding=d),f&&f.size>0){const m=[...f];m.length===1?s.pattern=m[0].source:m.length>1&&(s.allOf=[...m.map(p=>({...e.target==="draft-07"||e.target==="draft-04"||e.target==="openapi-3.0"?{type:"string"}:{},pattern:p.source}))])}},qH=(t,e,n,r)=>{n.not={}},FH=(t,e,n,r)=>{},VH=(t,e,n,r)=>{const s=t._zod.def,a=bA(s.entries);a.every(l=>typeof l=="number")&&(n.type="number"),a.every(l=>typeof l=="string")&&(n.type="string"),n.enum=a},HH=(t,e,n,r)=>{if(e.unrepresentable==="throw")throw new Error("Custom types cannot be represented in JSON Schema")},GH=(t,e,n,r)=>{if(e.unrepresentable==="throw")throw new Error("Transforms cannot be represented in JSON Schema")},KH=(t,e,n,r)=>{const s=n,a=t._zod.def,{minimum:l,maximum:u}=t._zod.bag;typeof l=="number"&&(s.minItems=l),typeof u=="number"&&(s.maxItems=u),s.type="array",s.items=pn(a.element,e,{...r,path:[...r.path,"items"]})},ZH=(t,e,n,r)=>{const s=n,a=t._zod.def;s.type="object",s.properties={};const l=a.shape;for(const d in l)s.properties[d]=pn(l[d],e,{...r,path:[...r.path,"properties",d]});const u=new Set(Object.keys(l)),f=new Set([...u].filter(d=>{const m=a.shape[d]._zod;return e.io==="input"?m.optin===void 0:m.optout===void 0}));f.size>0&&(s.required=Array.from(f)),a.catchall?._zod.def.type==="never"?s.additionalProperties=!1:a.catchall?a.catchall&&(s.additionalProperties=pn(a.catchall,e,{...r,path:[...r.path,"additionalProperties"]})):e.io==="output"&&(s.additionalProperties=!1)},QH=(t,e,n,r)=>{const s=t._zod.def,a=s.inclusive===!1,l=s.options.map((u,f)=>pn(u,e,{...r,path:[...r.path,a?"oneOf":"anyOf",f]}));a?n.oneOf=l:n.anyOf=l},JH=(t,e,n,r)=>{const s=t._zod.def,a=pn(s.left,e,{...r,path:[...r.path,"allOf",0]}),l=pn(s.right,e,{...r,path:[...r.path,"allOf",1]}),u=d=>"allOf"in d&&Object.keys(d).length===1,f=[...u(a)?a.allOf:[a],...u(l)?l.allOf:[l]];n.allOf=f},YH=(t,e,n,r)=>{const s=t._zod.def,a=pn(s.innerType,e,r),l=e.seen.get(t);e.target==="openapi-3.0"?(l.ref=s.innerType,n.nullable=!0):n.anyOf=[a,{type:"null"}]},XH=(t,e,n,r)=>{const s=t._zod.def;pn(s.innerType,e,r);const a=e.seen.get(t);a.ref=s.innerType},WH=(t,e,n,r)=>{const s=t._zod.def;pn(s.innerType,e,r);const a=e.seen.get(t);a.ref=s.innerType,n.default=JSON.parse(JSON.stringify(s.defaultValue))},eG=(t,e,n,r)=>{const s=t._zod.def;pn(s.innerType,e,r);const a=e.seen.get(t);a.ref=s.innerType,e.io==="input"&&(n._prefault=JSON.parse(JSON.stringify(s.defaultValue)))},tG=(t,e,n,r)=>{const s=t._zod.def;pn(s.innerType,e,r);const a=e.seen.get(t);a.ref=s.innerType;let l;try{l=s.catchValue(void 0)}catch{throw new Error("Dynamic catch values are not supported in JSON Schema")}n.default=l},nG=(t,e,n,r)=>{const s=t._zod.def,a=e.io==="input"?s.in._zod.def.type==="transform"?s.out:s.in:s.out;pn(a,e,r);const l=e.seen.get(t);l.ref=a},rG=(t,e,n,r)=>{const s=t._zod.def;pn(s.innerType,e,r);const a=e.seen.get(t);a.ref=s.innerType,n.readOnly=!0},zA=(t,e,n,r)=>{const s=t._zod.def;pn(s.innerType,e,r);const a=e.seen.get(t);a.ref=s.innerType},sG=fe("ZodISODateTime",(t,e)=>{gV.init(t,e),Ct.init(t,e)});function iG(t){return bH(sG,t)}const aG=fe("ZodISODate",(t,e)=>{yV.init(t,e),Ct.init(t,e)});function oG(t){return _H(aG,t)}const lG=fe("ZodISOTime",(t,e)=>{bV.init(t,e),Ct.init(t,e)});function cG(t){return vH(lG,t)}const uG=fe("ZodISODuration",(t,e)=>{_V.init(t,e),Ct.init(t,e)});function fG(t){return xH(uG,t)}const dG=(t,e)=>{SA.init(t,e),t.name="ZodError",Object.defineProperties(t,{format:{value:n=>h7(t,n)},flatten:{value:n=>d7(t,n)},addIssue:{value:n=>{t.issues.push(n),t.message=JSON.stringify(t.issues,iy,2)}},addIssues:{value:n=>{t.issues.push(...n),t.message=JSON.stringify(t.issues,iy,2)}},isEmpty:{get(){return t.issues.length===0}}})},Tr=fe("ZodError",dG,{Parent:Error}),hG=j0(Tr),pG=L0(Tr),mG=Od(Tr),gG=Nd(Tr),yG=g7(Tr),bG=y7(Tr),_G=b7(Tr),vG=_7(Tr),xG=v7(Tr),wG=x7(Tr),SG=w7(Tr),kG=S7(Tr),Jt=fe("ZodType",(t,e)=>(Qt.init(t,e),Object.assign(t["~standard"],{jsonSchema:{input:td(t,"input"),output:td(t,"output")}}),t.toJSONSchema=BH(t,{}),t.def=e,t.type=e.type,Object.defineProperty(t,"_def",{value:e}),t.check=(...n)=>t.clone(oi(e,{checks:[...e.checks??[],...n.map(r=>typeof r=="function"?{_zod:{check:r,def:{check:"custom"},onattach:[]}}:r)]}),{parent:!0}),t.with=t.check,t.clone=(n,r)=>li(t,n,r),t.brand=()=>t,t.register=((n,r)=>(n.add(t,r),t)),t.parse=(n,r)=>hG(t,n,r,{callee:t.parse}),t.safeParse=(n,r)=>mG(t,n,r),t.parseAsync=async(n,r)=>pG(t,n,r,{callee:t.parseAsync}),t.safeParseAsync=async(n,r)=>gG(t,n,r),t.spa=t.safeParseAsync,t.encode=(n,r)=>yG(t,n,r),t.decode=(n,r)=>bG(t,n,r),t.encodeAsync=async(n,r)=>_G(t,n,r),t.decodeAsync=async(n,r)=>vG(t,n,r),t.safeEncode=(n,r)=>xG(t,n,r),t.safeDecode=(n,r)=>wG(t,n,r),t.safeEncodeAsync=async(n,r)=>SG(t,n,r),t.safeDecodeAsync=async(n,r)=>kG(t,n,r),t.refine=(n,r)=>t.check(mK(n,r)),t.superRefine=n=>t.check(gK(n)),t.overwrite=n=>t.check(fo(n)),t.optional=()=>JS(t),t.exactOptional=()=>nK(t),t.nullable=()=>YS(t),t.nullish=()=>JS(YS(t)),t.nonoptional=n=>lK(t,n),t.array=()=>KG(t),t.or=n=>JG([t,n]),t.and=n=>XG(t,n),t.transform=n=>XS(t,eK(n)),t.default=n=>iK(t,n),t.prefault=n=>oK(t,n),t.catch=n=>uK(t,n),t.pipe=n=>XS(t,n),t.readonly=()=>hK(t),t.describe=n=>{const r=t.clone();return Cl.add(r,{description:n}),r},Object.defineProperty(t,"description",{get(){return Cl.get(t)?.description},configurable:!0}),t.meta=(...n)=>{if(n.length===0)return Cl.get(t);const r=t.clone();return Cl.add(r,n[0]),r},t.isOptional=()=>t.safeParse(void 0).success,t.isNullable=()=>t.safeParse(null).success,t.apply=n=>n(t),t)),PA=fe("_ZodString",(t,e)=>{z0.init(t,e),Jt.init(t,e),t._zod.processJSONSchema=(r,s,a)=>UH(t,r,s);const n=t._zod.bag;t.format=n.format??null,t.minLength=n.minimum??null,t.maxLength=n.maximum??null,t.regex=(...r)=>t.check(kH(...r)),t.includes=(...r)=>t.check(TH(...r)),t.startsWith=(...r)=>t.check(AH(...r)),t.endsWith=(...r)=>t.check(RH(...r)),t.min=(...r)=>t.check(ed(...r)),t.max=(...r)=>t.check(IA(...r)),t.length=(...r)=>t.check(MA(...r)),t.nonempty=(...r)=>t.check(ed(1,...r)),t.lowercase=r=>t.check(EH(r)),t.uppercase=r=>t.check(CH(r)),t.trim=()=>t.check(NH()),t.normalize=(...r)=>t.check(OH(...r)),t.toLowerCase=()=>t.check(IH()),t.toUpperCase=()=>t.check(MH()),t.slugify=()=>t.check(DH())}),EG=fe("ZodString",(t,e)=>{z0.init(t,e),PA.init(t,e),t.email=n=>t.check(YV(CG,n)),t.url=n=>t.check(nH(TG,n)),t.jwt=n=>t.check(yH(qG,n)),t.emoji=n=>t.check(rH(AG,n)),t.guid=n=>t.check(KS(ZS,n)),t.uuid=n=>t.check(XV(Ku,n)),t.uuidv4=n=>t.check(WV(Ku,n)),t.uuidv6=n=>t.check(eH(Ku,n)),t.uuidv7=n=>t.check(tH(Ku,n)),t.nanoid=n=>t.check(sH(RG,n)),t.guid=n=>t.check(KS(ZS,n)),t.cuid=n=>t.check(iH(OG,n)),t.cuid2=n=>t.check(aH(NG,n)),t.ulid=n=>t.check(oH(IG,n)),t.base64=n=>t.check(pH(BG,n)),t.base64url=n=>t.check(mH($G,n)),t.xid=n=>t.check(lH(MG,n)),t.ksuid=n=>t.check(cH(DG,n)),t.ipv4=n=>t.check(uH(jG,n)),t.ipv6=n=>t.check(fH(LG,n)),t.cidrv4=n=>t.check(dH(zG,n)),t.cidrv6=n=>t.check(hH(PG,n)),t.e164=n=>t.check(gH(UG,n)),t.datetime=n=>t.check(iG(n)),t.date=n=>t.check(oG(n)),t.time=n=>t.check(cG(n)),t.duration=n=>t.check(fG(n))});function Kr(t){return JV(EG,t)}const Ct=fe("ZodStringFormat",(t,e)=>{St.init(t,e),PA.init(t,e)}),CG=fe("ZodEmail",(t,e)=>{oV.init(t,e),Ct.init(t,e)}),ZS=fe("ZodGUID",(t,e)=>{iV.init(t,e),Ct.init(t,e)}),Ku=fe("ZodUUID",(t,e)=>{aV.init(t,e),Ct.init(t,e)}),TG=fe("ZodURL",(t,e)=>{lV.init(t,e),Ct.init(t,e)}),AG=fe("ZodEmoji",(t,e)=>{cV.init(t,e),Ct.init(t,e)}),RG=fe("ZodNanoID",(t,e)=>{uV.init(t,e),Ct.init(t,e)}),OG=fe("ZodCUID",(t,e)=>{fV.init(t,e),Ct.init(t,e)}),NG=fe("ZodCUID2",(t,e)=>{dV.init(t,e),Ct.init(t,e)}),IG=fe("ZodULID",(t,e)=>{hV.init(t,e),Ct.init(t,e)}),MG=fe("ZodXID",(t,e)=>{pV.init(t,e),Ct.init(t,e)}),DG=fe("ZodKSUID",(t,e)=>{mV.init(t,e),Ct.init(t,e)}),jG=fe("ZodIPv4",(t,e)=>{vV.init(t,e),Ct.init(t,e)}),LG=fe("ZodIPv6",(t,e)=>{xV.init(t,e),Ct.init(t,e)}),zG=fe("ZodCIDRv4",(t,e)=>{wV.init(t,e),Ct.init(t,e)}),PG=fe("ZodCIDRv6",(t,e)=>{SV.init(t,e),Ct.init(t,e)}),BG=fe("ZodBase64",(t,e)=>{kV.init(t,e),Ct.init(t,e)}),$G=fe("ZodBase64URL",(t,e)=>{CV.init(t,e),Ct.init(t,e)}),UG=fe("ZodE164",(t,e)=>{TV.init(t,e),Ct.init(t,e)}),qG=fe("ZodJWT",(t,e)=>{RV.init(t,e),Ct.init(t,e)}),FG=fe("ZodUnknown",(t,e)=>{OV.init(t,e),Jt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>FH()});function QS(){return wH(FG)}const VG=fe("ZodNever",(t,e)=>{NV.init(t,e),Jt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>qH(t,n,r)});function HG(t){return SH(VG,t)}const GG=fe("ZodArray",(t,e)=>{IV.init(t,e),Jt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>KH(t,n,r,s),t.element=e.element,t.min=(n,r)=>t.check(ed(n,r)),t.nonempty=n=>t.check(ed(1,n)),t.max=(n,r)=>t.check(IA(n,r)),t.length=(n,r)=>t.check(MA(n,r)),t.unwrap=()=>t.element});function KG(t,e){return jH(GG,t,e)}const ZG=fe("ZodObject",(t,e)=>{DV.init(t,e),Jt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>ZH(t,n,r,s),ft(t,"shape",()=>e.shape),t.keyof=()=>P0(Object.keys(t._zod.def.shape)),t.catchall=n=>t.clone({...t._zod.def,catchall:n}),t.passthrough=()=>t.clone({...t._zod.def,catchall:QS()}),t.loose=()=>t.clone({...t._zod.def,catchall:QS()}),t.strict=()=>t.clone({...t._zod.def,catchall:HG()}),t.strip=()=>t.clone({...t._zod.def,catchall:void 0}),t.extend=n=>o7(t,n),t.safeExtend=n=>l7(t,n),t.merge=n=>c7(t,n),t.pick=n=>i7(t,n),t.omit=n=>a7(t,n),t.partial=(...n)=>u7(BA,t,n[0]),t.required=(...n)=>f7($A,t,n[0])});function Wr(t,e){const n={type:"object",shape:t??{},...je(e)};return new ZG(n)}const QG=fe("ZodUnion",(t,e)=>{jV.init(t,e),Jt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>QH(t,n,r,s),t.options=e.options});function JG(t,e){return new QG({type:"union",options:t,...je(e)})}const YG=fe("ZodIntersection",(t,e)=>{LV.init(t,e),Jt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>JH(t,n,r,s)});function XG(t,e){return new YG({type:"intersection",left:t,right:e})}const oy=fe("ZodEnum",(t,e)=>{zV.init(t,e),Jt.init(t,e),t._zod.processJSONSchema=(r,s,a)=>VH(t,r,s),t.enum=e.entries,t.options=Object.values(e.entries);const n=new Set(Object.keys(e.entries));t.extract=(r,s)=>{const a={};for(const l of r)if(n.has(l))a[l]=e.entries[l];else throw new Error(`Key ${l} not found in enum`);return new oy({...e,checks:[],...je(s),entries:a})},t.exclude=(r,s)=>{const a={...e.entries};for(const l of r)if(n.has(l))delete a[l];else throw new Error(`Key ${l} not found in enum`);return new oy({...e,checks:[],...je(s),entries:a})}});function P0(t,e){const n=Array.isArray(t)?Object.fromEntries(t.map(r=>[r,r])):t;return new oy({type:"enum",entries:n,...je(e)})}const WG=fe("ZodTransform",(t,e)=>{PV.init(t,e),Jt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>GH(t,n),t._zod.parse=(n,r)=>{if(r.direction==="backward")throw new gA(t.constructor.name);n.addIssue=a=>{if(typeof a=="string")n.issues.push(ec(a,n.value,e));else{const l=a;l.fatal&&(l.continue=!1),l.code??(l.code="custom"),l.input??(l.input=n.value),l.inst??(l.inst=t),n.issues.push(ec(l))}};const s=e.transform(n.value,n);return s instanceof Promise?s.then(a=>(n.value=a,n)):(n.value=s,n)}});function eK(t){return new WG({type:"transform",transform:t})}const BA=fe("ZodOptional",(t,e)=>{NA.init(t,e),Jt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>zA(t,n,r,s),t.unwrap=()=>t._zod.def.innerType});function JS(t){return new BA({type:"optional",innerType:t})}const tK=fe("ZodExactOptional",(t,e)=>{BV.init(t,e),Jt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>zA(t,n,r,s),t.unwrap=()=>t._zod.def.innerType});function nK(t){return new tK({type:"optional",innerType:t})}const rK=fe("ZodNullable",(t,e)=>{$V.init(t,e),Jt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>YH(t,n,r,s),t.unwrap=()=>t._zod.def.innerType});function YS(t){return new rK({type:"nullable",innerType:t})}const sK=fe("ZodDefault",(t,e)=>{UV.init(t,e),Jt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>WH(t,n,r,s),t.unwrap=()=>t._zod.def.innerType,t.removeDefault=t.unwrap});function iK(t,e){return new sK({type:"default",innerType:t,get defaultValue(){return typeof e=="function"?e():vA(e)}})}const aK=fe("ZodPrefault",(t,e)=>{qV.init(t,e),Jt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>eG(t,n,r,s),t.unwrap=()=>t._zod.def.innerType});function oK(t,e){return new aK({type:"prefault",innerType:t,get defaultValue(){return typeof e=="function"?e():vA(e)}})}const $A=fe("ZodNonOptional",(t,e)=>{FV.init(t,e),Jt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>XH(t,n,r,s),t.unwrap=()=>t._zod.def.innerType});function lK(t,e){return new $A({type:"nonoptional",innerType:t,...je(e)})}const cK=fe("ZodCatch",(t,e)=>{VV.init(t,e),Jt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>tG(t,n,r,s),t.unwrap=()=>t._zod.def.innerType,t.removeCatch=t.unwrap});function uK(t,e){return new cK({type:"catch",innerType:t,catchValue:typeof e=="function"?e:()=>e})}const fK=fe("ZodPipe",(t,e)=>{HV.init(t,e),Jt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>nG(t,n,r,s),t.in=e.in,t.out=e.out});function XS(t,e){return new fK({type:"pipe",in:t,out:e})}const dK=fe("ZodReadonly",(t,e)=>{GV.init(t,e),Jt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>rG(t,n,r,s),t.unwrap=()=>t._zod.def.innerType});function hK(t){return new dK({type:"readonly",innerType:t})}const pK=fe("ZodCustom",(t,e)=>{KV.init(t,e),Jt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>HH(t,n)});function mK(t,e={}){return LH(pK,t,e)}function gK(t){return zH(t)}const WS=10*1024;function yK(t){try{const e=JSON.parse(t);return JSON.stringify(e,null,2)}catch{return t}}function bK(t){return t?t.length<=WS?t:t.slice(0,WS)+`
...[TRUNCATED]`:"(empty)"}function _K(t){const e=t.http?.body??{type:"none"},n=e.type==="json"||e.type==="raw"?e.content:e.type==="form-urlencoded"?e.data:e.type==="form-data"?e.data.map(r=>({key:r.key,type:r.type,value:r.type==="file"?r.file?.name:r.value})):null;return{method:t.http?.method??"GET",url:t.url,headers:(t.http?.headers??[]).filter(r=>r.enabled!==!1),queryParams:(t.http?.query??[]).filter(r=>r.enabled!==!1),body:{type:e.type,content:n}}}function vK(t,e){const n=t.http?.response;return n?{status:n.status,statusCode:n.statusCode,headers:n.headers,body:bK(e),duration:n.duration}:null}const UA=Wr({}),xK=Wr({method:P0(["GET","POST","PUT","PATCH","DELETE","OPTIONS","HEAD"]).describe("The HTTP method")}),wK=Wr({url:Kr().describe("The full URL for the request")}),SK=Wr({headers:Kr().describe('JSON array of header objects with "key", "value", and optional "enabled" (default true) properties. Example: [{"key": "Content-Type", "value": "application/json"}]')}),kK=Wr({key:Kr().describe("The header name"),value:Kr().describe("The header value")}),EK=Wr({params:Kr().describe('JSON array of parameter objects with "key", "value", and optional "enabled" (default true) properties. Example: [{"key": "page", "value": "1"}]')}),CK=Wr({key:Kr().describe("The parameter name"),value:Kr().describe("The parameter value")}),TK=Wr({type:P0(["none","json","xml","form-urlencoded","form-data","raw"]).describe("The body type"),content:Kr().optional().describe("The body content. For JSON/XML/raw, provide the content string. For form-urlencoded/form-data, provide JSON array like headers/params. Note: form-data only supports text fields (not file uploads) via this tool.")}),AK=Wr({key:Kr().describe("The header name to remove (case-insensitive)")}),RK=Wr({key:Kr().describe("The query parameter name to remove")}),OK=Dr({name:"get_current_request",description:"Get the current HTTP request configuration including method, URL, headers, query params, and body",inputSchema:UA}),NK=Dr({name:"get_response",description:"Get the response from the last executed request, including status, headers, and body",inputSchema:UA}),IK=Dr({name:"set_method",description:"Set the HTTP method for the request",inputSchema:xK}),MK=Dr({name:"set_url",description:"Set the URL for the request",inputSchema:wK}),DK=Dr({name:"set_headers",description:"Set the headers for the request. This replaces all existing headers.",inputSchema:SK}),jK=Dr({name:"add_header",description:"Add a single header to the request",inputSchema:kK}),LK=Dr({name:"set_query_params",description:"Set the query parameters for the request. This replaces all existing query params.",inputSchema:EK}),zK=Dr({name:"add_query_param",description:"Add a single query parameter to the request",inputSchema:CK}),PK=Dr({name:"set_body",description:"Set the request body",inputSchema:TK}),BK=Dr({name:"remove_header",description:"Remove a header from the request by name",inputSchema:AK}),$K=Dr({name:"remove_query_param",description:"Remove a query parameter from the request by name",inputSchema:RK});function UK(t){const{request:e,setters:n,responseBodyText:r}=t,s=OK.client(async()=>_K(e)),a=NK.client(async()=>vK(e,r)||{error:"No response available. Execute the request first."}),l=IK.client(async x=>{const C=x;return n.setMethod(C.method),{success:!0,method:C.method}}),u=MK.client(async x=>{const C=x;return n.setUrl(C.url),{success:!0,url:C.url}}),f=DK.client(async x=>{const C=x;try{const k=JSON.parse(C.headers).map(T=>({id:Hr(),key:T.key,value:T.value,enabled:T.enabled!==!1}));return n.setHeaders(k),{success:!0,headerCount:k.length}}catch(k){return{success:!1,error:`Invalid JSON for headers: ${k instanceof Error?k.message:"parse error"}`}}}),d=jK.client(async x=>{const C=x,T=[...e.http?.headers??[],{id:Hr(),key:C.key,value:C.value,enabled:!0}];return n.setHeaders(T),{success:!0,added:{key:C.key,value:C.value}}}),m=LK.client(async x=>{const C=x;try{const k=JSON.parse(C.params).map(T=>({id:Hr(),key:T.key,value:T.value,enabled:T.enabled!==!1}));return n.setQuery(k),{success:!0,paramCount:k.length}}catch(k){return{success:!1,error:`Invalid JSON for query params: ${k instanceof Error?k.message:"parse error"}`}}}),p=zK.client(async x=>{const C=x,T=[...e.http?.query??[],{id:Hr(),key:C.key,value:C.value,enabled:!0}];return n.setQuery(T),{success:!0,added:{key:C.key,value:C.value}}}),y=PK.client(async x=>{const C=x;try{let k;switch(C.type){case"none":k={type:"none"};break;case"json":k={type:"json",content:yK(C.content||"")};break;case"xml":k={type:"xml",content:C.content||""};break;case"raw":k={type:"raw",content:C.content||""};break;case"form-urlencoded":{k={type:"form-urlencoded",data:C.content?JSON.parse(C.content).map(A=>({id:Hr(),key:A.key,value:A.value,enabled:A.enabled!==!1})):[]};break}case"form-data":{k={type:"form-data",data:C.content?JSON.parse(C.content).map(A=>({id:Hr(),key:A.key,type:"text",value:A.value||"",enabled:A.enabled!==!1,file:null,fileName:""})):[]};break}default:k={type:"none"}}return n.setBody(k),{success:!0,bodyType:C.type}}catch(k){return{success:!1,error:`Invalid body content: ${k instanceof Error?k.message:"parse error"}`}}}),g=BK.client(async x=>{const C=x,k=C.key.toLowerCase(),T=e.http?.headers??[],A=T.filter(I=>I.key.toLowerCase()!==k),M=T.length-A.length;return M===0?{success:!1,error:`Header '${C.key}' not found`}:(n.setHeaders(A),{success:!0,removed:C.key,removedCount:M})}),v=$K.client(async x=>{const C=x,k=e.http?.query??[],T=k.filter(M=>M.key!==C.key),A=k.length-T.length;return A===0?{success:!1,error:`Query parameter '${C.key}' not found`}:(n.setQuery(T),{success:!0,removed:C.key,removedCount:A})});return w9(s,a,l,u,f,d,g,m,p,v,y)}function qK(){return`You are an AI assistant embedded in an HTTP client (similar to Postman or Insomnia). You have tools that directly modify the request form visible to the user in real-time.

IMPORTANT: When you use tools like set_url, set_headers, set_body, etc., the changes appear immediately in the user's request panel. You are actively editing their requestnot just describing what to do. The user sees updates live as you make them.

Your capabilities:
- View the current request configuration (method, URL, headers, query params, body)
- Directly modify any part of the requestchanges are applied instantly to the UI
- View and analyze responses after the user executes the request

Guidelines:
- When the user asks to create or modify a request, use the appropriate tools to make the changes directly
- After making changes, briefly confirm what you did (e.g., "I've set the URL to ... and added the Authorization header")
- You cannot execute/send requeststhe user must click Send. After they do, you can analyze the response using get_response
- When analyzing responses, look for errors, unexpected data, or issues
- Be concise but helpful in your explanations
- If the user's request is ambiguous, ask for clarification
- When adding headers or params, preserve existing ones unless the user asks to replace them
- Format your responses using Markdown: use **bold**, \`code\`, code blocks with language tags, lists, and headers when appropriate`}const ek={name:"Request Assistant",placeholder:"Ask about your request..."};function FK(t){const e=qe.c(86),{isOpen:n,onClose:r,request:s,setters:a}=t,[l,u]=G.useState(""),[f,d]=G.useState(),m=G.useRef(null),p=G.useRef(null),y=G.useRef(s.id);let g;e[0]!==s.http?.response?(g=()=>{(async function(){const ke=s.http?.response;if(ke?.body)try{const He=await ke.body.text();d(He)}catch{d("(unable to read response body)")}else d(void 0)})()},e[0]=s.http?.response,e[1]=g):g=e[1];const v=s.http?.response,x=s.http?.response?.body;let C;e[2]!==v||e[3]!==x?(C=[v,x],e[2]=v,e[3]=x,e[4]=C):C=e[4],G.useEffect(g,C);let k;e[5]!==s||e[6]!==f||e[7]!==a?(k={request:s,setters:a,responseBodyText:f},e[5]=s,e[6]=f,e[7]=a,e[8]=k):k=e[8];const T=k;let A;e[9]!==T?(A=UK(T),e[9]=T,e[10]=A):A=e[10];const M=A;let I;if(e[11]!==M){const pe=e7(),be=WF(pe),ke=qK();I=S9(He=>n9({adapter:be,messages:He,tools:M,systemPrompts:[ke],agentLoopStrategy:DC(10)})),e[11]=M,e[12]=I}else I=e[12];const O=I;let B;e[13]!==O||e[14]!==M?(B={connection:O,tools:M},e[13]=O,e[14]=M,e[15]=B):B=e[15];const{messages:U,sendMessage:K,isLoading:j,stop:J,clear:ne}=k9(B);let he,Y;e[16]!==ne||e[17]!==s.id?(Y=()=>{y.current!==s.id&&(ne(),y.current=s.id)},he=[s.id,ne],e[16]=ne,e[17]=s.id,e[18]=he,e[19]=Y):(he=e[18],Y=e[19]),G.useEffect(Y,he);let q;e[20]===Symbol.for("react.memo_cache_sentinel")?(q=()=>{m.current?.scrollIntoView({behavior:"smooth"})},e[20]=q):q=e[20];let P;e[21]!==U?(P=[U],e[21]=U,e[22]=P):P=e[22],G.useEffect(q,P);let H,ie;e[23]!==n?(H=()=>{n&&p.current?.focus()},ie=[n],e[23]=n,e[24]=H,e[25]=ie):(H=e[24],ie=e[25]),G.useEffect(H,ie);let re;e[26]!==l||e[27]!==j||e[28]!==K?(re=pe=>{pe.preventDefault(),!(!l.trim()||j)&&(K(l.trim()),u(""))},e[26]=l,e[27]=j,e[28]=K,e[29]=re):re=e[29];const N=re;let D;e[30]!==N?(D=pe=>{pe.key==="Enter"&&!pe.shiftKey&&(pe.preventDefault(),N(pe))},e[30]=N,e[31]=D):D=e[31];const V=D,S=VK;let z;e[32]!==j||e[33]!==U?(z=(pe,be)=>j&&pe.role==="assistant"&&be===U.length-1,e[32]=j,e[33]=U,e[34]=z):z=e[34];const le=z;if(!n)return null;let de;e[35]===Symbol.for("react.memo_cache_sentinel")?(de=w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx(Wa,{size:16,className:"text-amber-500"}),w.jsx("h3",{className:"font-medium text-neutral-900 dark:text-neutral-100",children:ek.name})]}),e[35]=de):de=e[35];let ye;e[36]===Symbol.for("react.memo_cache_sentinel")?(ye=w.jsx(ic,{size:16}),e[36]=ye):ye=e[36];let _e;e[37]!==ne?(_e=w.jsx("button",{onClick:ne,className:"p-1.5 text-neutral-500 hover:text-neutral-900 hover:bg-neutral-100 dark:hover:text-neutral-300 dark:hover:bg-neutral-800 rounded transition-colors",title:"Clear chat",children:ye}),e[37]=ne,e[38]=_e):_e=e[38];let ve;e[39]===Symbol.for("react.memo_cache_sentinel")?(ve=w.jsx(Hl,{size:16}),e[39]=ve):ve=e[39];let Pe;e[40]!==r?(Pe=w.jsx("button",{onClick:r,className:"p-1.5 text-neutral-500 hover:text-neutral-900 hover:bg-neutral-100 dark:hover:text-neutral-300 dark:hover:bg-neutral-800 rounded transition-colors",children:ve}),e[40]=r,e[41]=Pe):Pe=e[41];let tt;e[42]!==_e||e[43]!==Pe?(tt=w.jsxs("div",{className:"shrink-0 h-12 px-4 flex items-center justify-between border-b border-neutral-200 dark:border-neutral-800",children:[de,w.jsxs("div",{className:"flex items-center gap-1",children:[_e,Pe]})]}),e[42]=_e,e[43]=Pe,e[44]=tt):tt=e[44];let kt;e[45]!==U.length?(kt=U.length===0&&w.jsxs("div",{className:"text-center text-neutral-500 dark:text-neutral-400 text-sm py-8",children:[w.jsx(Wa,{size:24,className:"mx-auto mb-3 text-amber-500/50"}),w.jsx("p",{className:"mb-2",children:"Ask me to help build your request"}),w.jsx("p",{className:"text-xs text-neutral-400 dark:text-neutral-500",children:'Examples: "Create a POST request to /api/users with a JSON body" or "Add an Authorization header"'})]}),e[45]=U.length,e[46]=kt):kt=e[46];let Yt;if(e[47]!==le||e[48]!==U){let pe;e[50]!==le?(pe=(be,ke)=>{const He=S(be);return w.jsx("div",{className:`text-sm ${be.role==="user"?"bg-neutral-100 dark:bg-neutral-800 rounded-lg px-3 py-2":""}`,children:w.jsx("div",{className:be.role==="user"?"text-neutral-900 dark:text-neutral-100":"text-neutral-700 dark:text-neutral-300",children:be.role==="assistant"?He?w.jsx(MC,{children:He}):le(be,ke)?w.jsxs("span",{className:"flex items-center gap-2 text-neutral-400",children:[w.jsx(kf,{size:14,className:"animate-spin"}),"Thinking..."]}):null:w.jsx("span",{className:"whitespace-pre-wrap",children:He})})},be.id)},e[50]=le,e[51]=pe):pe=e[51],Yt=U.map(pe),e[47]=le,e[48]=U,e[49]=Yt}else Yt=e[49];let Tt;e[52]!==j||e[53]!==U?(Tt=j&&(U.length===0||U[U.length-1]?.role==="user")&&w.jsx("div",{className:"text-sm",children:w.jsx("div",{className:"text-neutral-800 dark:text-neutral-200",children:w.jsxs("span",{className:"flex items-center gap-2 text-neutral-400",children:[w.jsx(kf,{size:14,className:"animate-spin"}),"Thinking..."]})})}),e[52]=j,e[53]=U,e[54]=Tt):Tt=e[54];let yn;e[55]===Symbol.for("react.memo_cache_sentinel")?(yn=w.jsx("div",{ref:m}),e[55]=yn):yn=e[55];let Xt;e[56]!==kt||e[57]!==Yt||e[58]!==Tt?(Xt=w.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 min-h-0",children:[kt,Yt,Tt,yn]}),e[56]=kt,e[57]=Yt,e[58]=Tt,e[59]=Xt):Xt=e[59];let Gn;e[60]===Symbol.for("react.memo_cache_sentinel")?(Gn=pe=>u(pe.target.value),e[60]=Gn):Gn=e[60];let bn;e[61]===Symbol.for("react.memo_cache_sentinel")?(bn={maxHeight:"120px"},e[61]=bn):bn=e[61];let _n;e[62]!==V||e[63]!==l||e[64]!==j?(_n=w.jsx("textarea",{ref:p,value:l,onChange:Gn,onKeyDown:V,placeholder:ek.placeholder,rows:1,disabled:j,className:"flex-1 px-3 py-2 bg-neutral-50 border border-neutral-200 dark:bg-neutral-800 dark:border-neutral-700 rounded-lg text-neutral-900 dark:text-neutral-100 text-sm placeholder-neutral-400 resize-none focus:outline-none focus:ring-2 focus:ring-amber-500/50 focus:border-amber-500 disabled:opacity-50",style:bn}),e[62]=V,e[63]=l,e[64]=j,e[65]=_n):_n=e[65];const Kn=j?"button":"submit",Se=j?J:void 0;let Ve;e[66]!==l||e[67]!==j?(Ve=!j&&!l.trim(),e[66]=l,e[67]=j,e[68]=Ve):Ve=e[68];let Ke;e[69]!==j?(Ke=j?w.jsx(ID,{size:16}):w.jsx(CD,{size:16}),e[69]=j,e[70]=Ke):Ke=e[70];let Ce;e[71]!==Kn||e[72]!==Se||e[73]!==Ve||e[74]!==Ke?(Ce=w.jsx("button",{type:Kn,onClick:Se,disabled:Ve,className:"p-2 bg-amber-500 hover:bg-amber-400 disabled:bg-neutral-300 dark:disabled:bg-neutral-700 disabled:text-neutral-500 text-white rounded-lg transition-colors",children:Ke}),e[71]=Kn,e[72]=Se,e[73]=Ve,e[74]=Ke,e[75]=Ce):Ce=e[75];let _t;e[76]!==_n||e[77]!==Ce?(_t=w.jsxs("div",{className:"flex items-end gap-2",children:[_n,Ce]}),e[76]=_n,e[77]=Ce,e[78]=_t):_t=e[78];let Z;e[79]!==N||e[80]!==_t?(Z=w.jsx("form",{onSubmit:N,className:"shrink-0 p-3 border-t border-neutral-200 dark:border-neutral-800",children:_t}),e[79]=N,e[80]=_t,e[81]=Z):Z=e[81];let ce;return e[82]!==tt||e[83]!==Xt||e[84]!==Z?(ce=w.jsxs("div",{className:"w-96 shrink-0 bg-white border border-neutral-200 dark:bg-neutral-900 dark:border-neutral-800 flex flex-col rounded-xl overflow-hidden",children:[tt,Xt,Z]}),e[82]=tt,e[83]=Xt,e[84]=Z,e[85]=ce):ce=e[85],ce}function VK(t){return t.parts.filter(GK).map(HK).join("").replace(/^undefined/,"")}function HK(t){return t.content}function GK(t){return t.type==="text"&&!!t.content}function KK(){const t=qe.c(13),{request:e,aiPanelOpen:n,toggleAiPanel:r,setMethod:s,setUrl:a,setHeaders:l,setQuery:u,setBody:f}=gn();let d;t[0]===Symbol.for("react.memo_cache_sentinel")?(d=w.jsx(ZD,{}),t[0]=d):d=t[0];let m;t[1]===Symbol.for("react.memo_cache_sentinel")?(m=w.jsx("div",{className:"flex-1 flex flex-col overflow-hidden gap-2 min-w-0",children:w.jsx("div",{className:"flex-1 overflow-hidden min-h-0",children:w.jsx(Jq,{})})}),t[1]=m):m=t[1];let p;t[2]!==n||t[3]!==e||t[4]!==f||t[5]!==l||t[6]!==s||t[7]!==u||t[8]!==a||t[9]!==r?(p=n&&Ny().ai?.model&&w.jsx(FK,{isOpen:n,onClose:r,request:e,setters:{setMethod:s,setUrl:a,setHeaders:l,setQuery:u,setBody:f}}),t[2]=n,t[3]=e,t[4]=f,t[5]=l,t[6]=s,t[7]=u,t[8]=a,t[9]=r,t[10]=p):p=t[10];let y;return t[11]!==p?(y=w.jsxs("div",{className:"h-screen flex bg-neutral-50 dark:bg-[#0d0d0d] py-2 pr-2 pl-1 gap-2 text-neutral-900 dark:text-neutral-100",children:[d,m,p]}),t[11]=p,t[12]=y):y=t[12],y}function ZK(){const t=qe.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=w.jsx(M3,{children:w.jsx(j3,{children:w.jsx(KK,{})})}),t[0]=e):e=t[0],e}JD().then(()=>{lO.createRoot(document.getElementById("root")).render(w.jsx(G.StrictMode,{children:w.jsx(DO,{client:Ok,children:w.jsx(ZK,{})})}))});
