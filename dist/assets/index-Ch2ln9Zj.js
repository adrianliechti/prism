const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/angular-html-CU67Zn6k.js","assets/html-GMplVEZG.js","assets/javascript-wDzz0qaB.js","assets/css-DPfMkruS.js","assets/angular-ts-BwZT4LLn.js","assets/scss-OYdSNvt2.js","assets/apl-dKokRX4l.js","assets/xml-sdJ4AIDG.js","assets/java-CylS5w8V.js","assets/json-Cp-IABpG.js","assets/astro-CbQHKStN.js","assets/typescript-BPQ3VLAy.js","assets/postcss-CXtECtnM.js","assets/tsx-COt5Ahok.js","assets/blade-DVc8C-J4.js","assets/html-derivative-BFtXZ54Q.js","assets/sql-BLtJtn59.js","assets/bsl-BO_Y6i37.js","assets/sdbl-DVxCFoDh.js","assets/cairo-KRGpt6FW.js","assets/python-B6aJPvgy.js","assets/cobol-nwyudZeR.js","assets/coffee-Ch7k5sss.js","assets/cpp-CofmeUqb.js","assets/regexp-CDVJQ6XC.js","assets/glsl-DplSGwfg.js","assets/c-BIGW1oBm.js","assets/crystal-tKQVLTB8.js","assets/shellscript-Yzrsuije.js","assets/edge-BkV0erSs.js","assets/elixir-CDX3lj18.js","assets/elm-DbKCFpqz.js","assets/erb-BOJIQeun.js","assets/ruby-BvKwtOVI.js","assets/haml-B8DHNrY2.js","assets/graphql-ChdNCCLP.js","assets/jsx-g9-lgVsj.js","assets/lua-BbnMAYS6.js","assets/yaml-Buea-lGh.js","assets/erlang-DsQrWhSR.js","assets/markdown-Cvjx9yec.js","assets/fortran-fixed-form-BZjJHVRy.js","assets/fortran-free-form-D22FLkUw.js","assets/fsharp-CXgrBDvD.js","assets/gdresource-B7Tvp0Sc.js","assets/gdshader-DkwncUOv.js","assets/gdscript-DTMYz4Jt.js","assets/git-commit-F4YmCXRG.js","assets/diff-D97Zzqfu.js","assets/git-rebase-r7XF79zn.js","assets/glimmer-js-Rg0-pVw9.js","assets/glimmer-ts-U6CK756n.js","assets/hack-CaT9iCJl.js","assets/handlebars-BL8al0AC.js","assets/http-jrhK8wxY.js","assets/hurl-irOxFIW8.js","assets/csv-fuZLfV_i.js","assets/hxml-Bvhsp5Yf.js","assets/haxe-CzTSHFRz.js","assets/jinja-4LBKfQ-Z.js","assets/jison-wvAkD_A8.js","assets/julia-C8NyazO9.js","assets/r-DiinP2Uv.js","assets/latex-BdAV_C_H.js","assets/tex-CxkMU7Pf.js","assets/liquid-DYVedYrR.js","assets/marko-CPi9NSCl.js","assets/less-B1dDrJ26.js","assets/mdc-DUICxH0z.js","assets/nginx-DknmC5AR.js","assets/nim-CVrawwO9.js","assets/perl-C0TMdlhV.js","assets/php-CDn_0X-4.js","assets/pug-CGlum2m_.js","assets/qml-3beO22l8.js","assets/razor-CE9lU5zL.js","assets/csharp-K5feNrxe.js","assets/rst-B0xPkSld.js","assets/cmake-D1j8_8rp.js","assets/sas-cz2c8ADy.js","assets/shaderlab-Dg9Lc6iA.js","assets/hlsl-D3lLCCz7.js","assets/shellsession-BADoaaVG.js","assets/soy-Brmx7dQM.js","assets/sparql-rVzFXLq3.js","assets/turtle-BsS91CYL.js","assets/stata-BH5u7GGu.js","assets/svelte-3Dk4HxPD.js","assets/templ-W15q3VgB.js","assets/go-Dn2_MT6a.js","assets/ts-tags-zn1MmPIZ.js","assets/twig-CO9l9SDP.js","assets/vue-DnHKYNfI.js","assets/vue-html-CChd_i61.js","assets/vue-vine-8moa0y9V.js","assets/stylus-BEDo0Tqx.js","assets/xsl-CtQFsRM5.js"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();function KS(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var $p={exports:{}},Zo={};var Cx;function KR(){if(Cx)return Zo;Cx=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,s,a){var l=null;if(a!==void 0&&(l=""+a),s.key!==void 0&&(l=""+s.key),"key"in s){a={};for(var u in s)u!=="key"&&(a[u]=s[u])}else a=s;return s=a.ref,{$$typeof:t,type:r,key:l,ref:s!==void 0?s:null,props:a}}return Zo.Fragment=e,Zo.jsx=n,Zo.jsxs=n,Zo}var Tx;function ZR(){return Tx||(Tx=1,$p.exports=KR()),$p.exports}var w=ZR(),Up={exports:{}},je={};var Ax;function QR(){if(Ax)return je;Ax=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),p=Symbol.for("react.activity"),y=Symbol.iterator;function g(I){return I===null||typeof I!="object"?null:(I=y&&I[y]||I["@@iterator"],typeof I=="function"?I:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,E={};function S(I,H,R){this.props=I,this.context=H,this.refs=E,this.updater=R||v}S.prototype.isReactComponent={},S.prototype.setState=function(I,H){if(typeof I!="object"&&typeof I!="function"&&I!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,I,H,"setState")},S.prototype.forceUpdate=function(I){this.updater.enqueueForceUpdate(this,I,"forceUpdate")};function C(){}C.prototype=S.prototype;function T(I,H,R){this.props=I,this.context=H,this.refs=E,this.updater=R||v}var L=T.prototype=new C;L.constructor=T,x(L,S.prototype),L.isPureReactComponent=!0;var D=Array.isArray;function N(){}var B={H:null,A:null,T:null,S:null},K=Object.prototype.hasOwnProperty;function G(I,H,R){var ae=R.ref;return{$$typeof:t,type:I,key:H,ref:ae!==void 0?ae:null,props:R}}function j(I,H){return G(I.type,H,I.props)}function J(I){return typeof I=="object"&&I!==null&&I.$$typeof===t}function ie(I){var H={"=":"=0",":":"=2"};return"$"+I.replace(/[=:]/g,function(R){return H[R]})}var q=/\/+/g;function P(I,H){return typeof I=="object"&&I!==null&&I.key!=null?ie(""+I.key):H.toString(36)}function U(I){switch(I.status){case"fulfilled":return I.value;case"rejected":throw I.reason;default:switch(typeof I.status=="string"?I.then(N,N):(I.status="pending",I.then(function(H){I.status==="pending"&&(I.status="fulfilled",I.value=H)},function(H){I.status==="pending"&&(I.status="rejected",I.reason=H)})),I.status){case"fulfilled":return I.value;case"rejected":throw I.reason}}throw I}function z(I,H,R,ae,me){var pe=typeof I;(pe==="undefined"||pe==="boolean")&&(I=null);var we=!1;if(I===null)we=!0;else switch(pe){case"bigint":case"string":case"number":we=!0;break;case"object":switch(I.$$typeof){case t:case e:we=!0;break;case m:return we=I._init,z(we(I._payload),H,R,ae,me)}}if(we)return me=me(I),we=ae===""?"."+P(I,0):ae,D(me)?(R="",we!=null&&(R=we.replace(q,"$&/")+"/"),z(me,H,R,"",function(rt){return rt})):me!=null&&(J(me)&&(me=j(me,R+(me.key==null||I&&I.key===me.key?"":(""+me.key).replace(q,"$&/")+"/")+we)),H.push(me)),1;we=0;var Ne=ae===""?".":ae+":";if(D(I))for(var Ie=0;Ie<I.length;Ie++)ae=I[Ie],pe=Ne+P(ae,Ie),we+=z(ae,H,R,pe,me);else if(Ie=g(I),typeof Ie=="function")for(I=Ie.call(I),Ie=0;!(ae=I.next()).done;)ae=ae.value,pe=Ne+P(ae,Ie++),we+=z(ae,H,R,pe,me);else if(pe==="object"){if(typeof I.then=="function")return z(U(I),H,R,ae,me);throw H=String(I),Error("Objects are not valid as a React child (found: "+(H==="[object Object]"?"object with keys {"+Object.keys(I).join(", ")+"}":H)+"). If you meant to render a collection of children, use an array instead.")}return we}function F(I,H,R){if(I==null)return I;var ae=[],me=0;return z(I,ae,"","",function(pe){return H.call(R,pe,me++)}),ae}function se(I){if(I._status===-1){var H=I._result;H=H(),H.then(function(R){(I._status===0||I._status===-1)&&(I._status=1,I._result=R)},function(R){(I._status===0||I._status===-1)&&(I._status=2,I._result=R)}),I._status===-1&&(I._status=0,I._result=H)}if(I._status===1)return I._result.default;throw I._result}var Y=typeof reportError=="function"?reportError:function(I){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var H=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof I=="object"&&I!==null&&typeof I.message=="string"?String(I.message):String(I),error:I});if(!window.dispatchEvent(H))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",I);return}console.error(I)},O={map:F,forEach:function(I,H,R){F(I,function(){H.apply(this,arguments)},R)},count:function(I){var H=0;return F(I,function(){H++}),H},toArray:function(I){return F(I,function(H){return H})||[]},only:function(I){if(!J(I))throw Error("React.Children.only expected to receive a single React element child.");return I}};return je.Activity=p,je.Children=O,je.Component=S,je.Fragment=n,je.Profiler=s,je.PureComponent=T,je.StrictMode=r,je.Suspense=f,je.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=B,je.__COMPILER_RUNTIME={__proto__:null,c:function(I){return B.H.useMemoCache(I)}},je.cache=function(I){return function(){return I.apply(null,arguments)}},je.cacheSignal=function(){return null},je.cloneElement=function(I,H,R){if(I==null)throw Error("The argument must be a React element, but you passed "+I+".");var ae=x({},I.props),me=I.key;if(H!=null)for(pe in H.key!==void 0&&(me=""+H.key),H)!K.call(H,pe)||pe==="key"||pe==="__self"||pe==="__source"||pe==="ref"&&H.ref===void 0||(ae[pe]=H[pe]);var pe=arguments.length-2;if(pe===1)ae.children=R;else if(1<pe){for(var we=Array(pe),Ne=0;Ne<pe;Ne++)we[Ne]=arguments[Ne+2];ae.children=we}return G(I.type,me,ae)},je.createContext=function(I){return I={$$typeof:l,_currentValue:I,_currentValue2:I,_threadCount:0,Provider:null,Consumer:null},I.Provider=I,I.Consumer={$$typeof:a,_context:I},I},je.createElement=function(I,H,R){var ae,me={},pe=null;if(H!=null)for(ae in H.key!==void 0&&(pe=""+H.key),H)K.call(H,ae)&&ae!=="key"&&ae!=="__self"&&ae!=="__source"&&(me[ae]=H[ae]);var we=arguments.length-2;if(we===1)me.children=R;else if(1<we){for(var Ne=Array(we),Ie=0;Ie<we;Ie++)Ne[Ie]=arguments[Ie+2];me.children=Ne}if(I&&I.defaultProps)for(ae in we=I.defaultProps,we)me[ae]===void 0&&(me[ae]=we[ae]);return G(I,pe,me)},je.createRef=function(){return{current:null}},je.forwardRef=function(I){return{$$typeof:u,render:I}},je.isValidElement=J,je.lazy=function(I){return{$$typeof:m,_payload:{_status:-1,_result:I},_init:se}},je.memo=function(I,H){return{$$typeof:h,type:I,compare:H===void 0?null:H}},je.startTransition=function(I){var H=B.T,R={};B.T=R;try{var ae=I(),me=B.S;me!==null&&me(R,ae),typeof ae=="object"&&ae!==null&&typeof ae.then=="function"&&ae.then(N,Y)}catch(pe){Y(pe)}finally{H!==null&&R.types!==null&&(H.types=R.types),B.T=H}},je.unstable_useCacheRefresh=function(){return B.H.useCacheRefresh()},je.use=function(I){return B.H.use(I)},je.useActionState=function(I,H,R){return B.H.useActionState(I,H,R)},je.useCallback=function(I,H){return B.H.useCallback(I,H)},je.useContext=function(I){return B.H.useContext(I)},je.useDebugValue=function(){},je.useDeferredValue=function(I,H){return B.H.useDeferredValue(I,H)},je.useEffect=function(I,H){return B.H.useEffect(I,H)},je.useEffectEvent=function(I){return B.H.useEffectEvent(I)},je.useId=function(){return B.H.useId()},je.useImperativeHandle=function(I,H,R){return B.H.useImperativeHandle(I,H,R)},je.useInsertionEffect=function(I,H){return B.H.useInsertionEffect(I,H)},je.useLayoutEffect=function(I,H){return B.H.useLayoutEffect(I,H)},je.useMemo=function(I,H){return B.H.useMemo(I,H)},je.useOptimistic=function(I,H){return B.H.useOptimistic(I,H)},je.useReducer=function(I,H,R){return B.H.useReducer(I,H,R)},je.useRef=function(I){return B.H.useRef(I)},je.useState=function(I){return B.H.useState(I)},je.useSyncExternalStore=function(I,H,R){return B.H.useSyncExternalStore(I,H,R)},je.useTransition=function(){return B.H.useTransition()},je.version="19.2.3",je}var Rx;function Yf(){return Rx||(Rx=1,Up.exports=QR()),Up.exports}var Q=Yf(),qp={exports:{}},Qo={},Fp={exports:{}},Vp={};var Ox;function JR(){return Ox||(Ox=1,(function(t){function e(z,F){var se=z.length;z.push(F);e:for(;0<se;){var Y=se-1>>>1,O=z[Y];if(0<s(O,F))z[Y]=F,z[se]=O,se=Y;else break e}}function n(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var F=z[0],se=z.pop();if(se!==F){z[0]=se;e:for(var Y=0,O=z.length,I=O>>>1;Y<I;){var H=2*(Y+1)-1,R=z[H],ae=H+1,me=z[ae];if(0>s(R,se))ae<O&&0>s(me,R)?(z[Y]=me,z[ae]=se,Y=ae):(z[Y]=R,z[H]=se,Y=H);else if(ae<O&&0>s(me,se))z[Y]=me,z[ae]=se,Y=ae;else break e}}return F}function s(z,F){var se=z.sortIndex-F.sortIndex;return se!==0?se:z.id-F.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var l=Date,u=l.now();t.unstable_now=function(){return l.now()-u}}var f=[],h=[],m=1,p=null,y=3,g=!1,v=!1,x=!1,E=!1,S=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;function L(z){for(var F=n(h);F!==null;){if(F.callback===null)r(h);else if(F.startTime<=z)r(h),F.sortIndex=F.expirationTime,e(f,F);else break;F=n(h)}}function D(z){if(x=!1,L(z),!v)if(n(f)!==null)v=!0,N||(N=!0,ie());else{var F=n(h);F!==null&&U(D,F.startTime-z)}}var N=!1,B=-1,K=5,G=-1;function j(){return E?!0:!(t.unstable_now()-G<K)}function J(){if(E=!1,N){var z=t.unstable_now();G=z;var F=!0;try{e:{v=!1,x&&(x=!1,C(B),B=-1),g=!0;var se=y;try{t:{for(L(z),p=n(f);p!==null&&!(p.expirationTime>z&&j());){var Y=p.callback;if(typeof Y=="function"){p.callback=null,y=p.priorityLevel;var O=Y(p.expirationTime<=z);if(z=t.unstable_now(),typeof O=="function"){p.callback=O,L(z),F=!0;break t}p===n(f)&&r(f),L(z)}else r(f);p=n(f)}if(p!==null)F=!0;else{var I=n(h);I!==null&&U(D,I.startTime-z),F=!1}}break e}finally{p=null,y=se,g=!1}F=void 0}}finally{F?ie():N=!1}}}var ie;if(typeof T=="function")ie=function(){T(J)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,P=q.port2;q.port1.onmessage=J,ie=function(){P.postMessage(null)}}else ie=function(){S(J,0)};function U(z,F){B=S(function(){z(t.unstable_now())},F)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):K=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_next=function(z){switch(y){case 1:case 2:case 3:var F=3;break;default:F=y}var se=y;y=F;try{return z()}finally{y=se}},t.unstable_requestPaint=function(){E=!0},t.unstable_runWithPriority=function(z,F){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var se=y;y=z;try{return F()}finally{y=se}},t.unstable_scheduleCallback=function(z,F,se){var Y=t.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?Y+se:Y):se=Y,z){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=se+O,z={id:m++,callback:F,priorityLevel:z,startTime:se,expirationTime:O,sortIndex:-1},se>Y?(z.sortIndex=se,e(h,z),n(f)===null&&z===n(h)&&(x?(C(B),B=-1):x=!0,U(D,se-Y))):(z.sortIndex=O,e(f,z),v||g||(v=!0,N||(N=!0,ie()))),z},t.unstable_shouldYield=j,t.unstable_wrapCallback=function(z){var F=y;return function(){var se=y;y=F;try{return z.apply(this,arguments)}finally{y=se}}}})(Vp)),Vp}var Nx;function YR(){return Nx||(Nx=1,Fp.exports=JR()),Fp.exports}var Hp={exports:{}},dn={};var Ix;function XR(){if(Ix)return dn;Ix=1;var t=Yf();function e(f){var h="https://react.dev/errors/"+f;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)h+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+f+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},s=Symbol.for("react.portal");function a(f,h,m){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:p==null?null:""+p,children:f,containerInfo:h,implementation:m}}var l=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(f,h){if(f==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return dn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,dn.createPortal=function(f,h){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return a(f,h,null,m)},dn.flushSync=function(f){var h=l.T,m=r.p;try{if(l.T=null,r.p=2,f)return f()}finally{l.T=h,r.p=m,r.d.f()}},dn.preconnect=function(f,h){typeof f=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,r.d.C(f,h))},dn.prefetchDNS=function(f){typeof f=="string"&&r.d.D(f)},dn.preinit=function(f,h){if(typeof f=="string"&&h&&typeof h.as=="string"){var m=h.as,p=u(m,h.crossOrigin),y=typeof h.integrity=="string"?h.integrity:void 0,g=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;m==="style"?r.d.S(f,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:p,integrity:y,fetchPriority:g}):m==="script"&&r.d.X(f,{crossOrigin:p,integrity:y,fetchPriority:g,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},dn.preinitModule=function(f,h){if(typeof f=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var m=u(h.as,h.crossOrigin);r.d.M(f,{crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&r.d.M(f)},dn.preload=function(f,h){if(typeof f=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var m=h.as,p=u(m,h.crossOrigin);r.d.L(f,m,{crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},dn.preloadModule=function(f,h){if(typeof f=="string")if(h){var m=u(h.as,h.crossOrigin);r.d.m(f,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else r.d.m(f)},dn.requestFormReset=function(f){r.d.r(f)},dn.unstable_batchedUpdates=function(f,h){return f(h)},dn.useFormState=function(f,h,m){return l.H.useFormState(f,h,m)},dn.useFormStatus=function(){return l.H.useHostTransitionStatus()},dn.version="19.2.3",dn}var Mx;function ZS(){if(Mx)return Hp.exports;Mx=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Hp.exports=XR(),Hp.exports}var Dx;function WR(){if(Dx)return Qo;Dx=1;var t=YR(),e=Yf(),n=ZS();function r(i){var o="https://react.dev/errors/"+i;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)o+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function a(i){var o=i,c=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,(o.flags&4098)!==0&&(c=o.return),i=o.return;while(i)}return o.tag===3?c:null}function l(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function u(i){if(i.tag===31){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function f(i){if(a(i)!==i)throw Error(r(188))}function h(i){var o=i.alternate;if(!o){if(o=a(i),o===null)throw Error(r(188));return o!==i?null:i}for(var c=i,d=o;;){var _=c.return;if(_===null)break;var b=_.alternate;if(b===null){if(d=_.return,d!==null){c=d;continue}break}if(_.child===b.child){for(b=_.child;b;){if(b===c)return f(_),i;if(b===d)return f(_),o;b=b.sibling}throw Error(r(188))}if(c.return!==d.return)c=_,d=b;else{for(var k=!1,A=_.child;A;){if(A===c){k=!0,c=_,d=b;break}if(A===d){k=!0,d=_,c=b;break}A=A.sibling}if(!k){for(A=b.child;A;){if(A===c){k=!0,c=b,d=_;break}if(A===d){k=!0,d=b,c=_;break}A=A.sibling}if(!k)throw Error(r(189))}}if(c.alternate!==d)throw Error(r(190))}if(c.tag!==3)throw Error(r(188));return c.stateNode.current===c?i:o}function m(i){var o=i.tag;if(o===5||o===26||o===27||o===6)return i;for(i=i.child;i!==null;){if(o=m(i),o!==null)return o;i=i.sibling}return null}var p=Object.assign,y=Symbol.for("react.element"),g=Symbol.for("react.transitional.element"),v=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),C=Symbol.for("react.consumer"),T=Symbol.for("react.context"),L=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),B=Symbol.for("react.memo"),K=Symbol.for("react.lazy"),G=Symbol.for("react.activity"),j=Symbol.for("react.memo_cache_sentinel"),J=Symbol.iterator;function ie(i){return i===null||typeof i!="object"?null:(i=J&&i[J]||i["@@iterator"],typeof i=="function"?i:null)}var q=Symbol.for("react.client.reference");function P(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===q?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case x:return"Fragment";case S:return"Profiler";case E:return"StrictMode";case D:return"Suspense";case N:return"SuspenseList";case G:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case v:return"Portal";case T:return i.displayName||"Context";case C:return(i._context.displayName||"Context")+".Consumer";case L:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case B:return o=i.displayName||null,o!==null?o:P(i.type)||"Memo";case K:o=i._payload,i=i._init;try{return P(i(o))}catch{}}return null}var U=Array.isArray,z=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,F=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,se={pending:!1,data:null,method:null,action:null},Y=[],O=-1;function I(i){return{current:i}}function H(i){0>O||(i.current=Y[O],Y[O]=null,O--)}function R(i,o){O++,Y[O]=i.current,i.current=o}var ae=I(null),me=I(null),pe=I(null),we=I(null);function Ne(i,o){switch(R(pe,o),R(me,i),R(ae,null),o.nodeType){case 9:case 11:i=(i=o.documentElement)&&(i=i.namespaceURI)?Qv(i):0;break;default:if(i=o.tagName,o=o.namespaceURI)o=Qv(o),i=Jv(o,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}H(ae),R(ae,i)}function Ie(){H(ae),H(me),H(pe)}function rt(i){i.memoizedState!==null&&R(we,i);var o=ae.current,c=Jv(o,i.type);o!==c&&(R(me,i),R(ae,c))}function lt(i){me.current===i&&(H(ae),H(me)),we.current===i&&(H(we),Vo._currentValue=se)}var Ct,Wt;function Tt(i){if(Ct===void 0)try{throw Error()}catch(c){var o=c.stack.trim().match(/\n( *(at )?)/);Ct=o&&o[1]||"",Wt=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ct+i+Wt}var en=!1;function De(i,o){if(!i||en)return"";en=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(o){var ce=function(){throw Error()};if(Object.defineProperty(ce.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ce,[])}catch(re){var te=re}Reflect.construct(i,[],ce)}else{try{ce.call()}catch(re){te=re}i.call(ce.prototype)}}else{try{throw Error()}catch(re){te=re}(ce=i())&&typeof ce.catch=="function"&&ce.catch(function(){})}}catch(re){if(re&&te&&typeof re.stack=="string")return[re.stack,te.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var _=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");_&&_.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var b=d.DetermineComponentFrameRoot(),k=b[0],A=b[1];if(k&&A){var $=k.split(`
`),W=A.split(`
`);for(_=d=0;d<$.length&&!$[d].includes("DetermineComponentFrameRoot");)d++;for(;_<W.length&&!W[_].includes("DetermineComponentFrameRoot");)_++;if(d===$.length||_===W.length)for(d=$.length-1,_=W.length-1;1<=d&&0<=_&&$[d]!==W[_];)_--;for(;1<=d&&0<=_;d--,_--)if($[d]!==W[_]){if(d!==1||_!==1)do if(d--,_--,0>_||$[d]!==W[_]){var oe=`
`+$[d].replace(" at new "," at ");return i.displayName&&oe.includes("<anonymous>")&&(oe=oe.replace("<anonymous>",i.displayName)),oe}while(1<=d&&0<=_);break}}}finally{en=!1,Error.prepareStackTrace=c}return(c=i?i.displayName||i.name:"")?Tt(c):""}function ct(i,o){switch(i.tag){case 26:case 27:case 5:return Tt(i.type);case 16:return Tt("Lazy");case 13:return i.child!==o&&o!==null?Tt("Suspense Fallback"):Tt("Suspense");case 19:return Tt("SuspenseList");case 0:case 15:return De(i.type,!1);case 11:return De(i.type.render,!1);case 1:return De(i.type,!0);case 31:return Tt("Activity");default:return""}}function Ye(i){try{var o="",c=null;do o+=ct(i,c),c=i,i=i.return;while(i);return o}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}var xn=Object.prototype.hasOwnProperty,wn=t.unstable_scheduleCallback,ge=t.unstable_cancelCallback,$e=t.unstable_shouldYield,Oe=t.unstable_requestPaint,xe=t.unstable_now,We=t.unstable_getCurrentPriorityLevel,ne=t.unstable_ImmediatePriority,ue=t.unstable_UserBlockingPriority,ye=t.unstable_NormalPriority,ve=t.unstable_LowPriority,Te=t.unstable_IdlePriority,gt=t.log,tn=t.unstable_setDisableYieldValue,et=null,_t=null;function On(i){if(typeof gt=="function"&&tn(i),_t&&typeof _t.setStrictMode=="function")try{_t.setStrictMode(et,i)}catch{}}var dt=Math.clz32?Math.clz32:MA,_s=Math.log,Sr=Math.LN2;function MA(i){return i>>>=0,i===0?32:31-(_s(i)/Sr|0)|0}var sc=256,ic=262144,ac=4194304;function ri(i){var o=i&42;if(o!==0)return o;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function oc(i,o,c){var d=i.pendingLanes;if(d===0)return 0;var _=0,b=i.suspendedLanes,k=i.pingedLanes;i=i.warmLanes;var A=d&134217727;return A!==0?(d=A&~b,d!==0?_=ri(d):(k&=A,k!==0?_=ri(k):c||(c=A&~i,c!==0&&(_=ri(c))))):(A=d&~b,A!==0?_=ri(A):k!==0?_=ri(k):c||(c=d&~i,c!==0&&(_=ri(c)))),_===0?0:o!==0&&o!==_&&(o&b)===0&&(b=_&-_,c=o&-o,b>=c||b===32&&(c&4194048)!==0)?o:_}function no(i,o){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&o)===0}function DA(i,o){switch(i){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function O0(){var i=ac;return ac<<=1,(ac&62914560)===0&&(ac=4194304),i}function Ah(i){for(var o=[],c=0;31>c;c++)o.push(i);return o}function ro(i,o){i.pendingLanes|=o,o!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function LA(i,o,c,d,_,b){var k=i.pendingLanes;i.pendingLanes=c,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=c,i.entangledLanes&=c,i.errorRecoveryDisabledLanes&=c,i.shellSuspendCounter=0;var A=i.entanglements,$=i.expirationTimes,W=i.hiddenUpdates;for(c=k&~c;0<c;){var oe=31-dt(c),ce=1<<oe;A[oe]=0,$[oe]=-1;var te=W[oe];if(te!==null)for(W[oe]=null,oe=0;oe<te.length;oe++){var re=te[oe];re!==null&&(re.lane&=-536870913)}c&=~ce}d!==0&&N0(i,d,0),b!==0&&_===0&&i.tag!==0&&(i.suspendedLanes|=b&~(k&~o))}function N0(i,o,c){i.pendingLanes|=o,i.suspendedLanes&=~o;var d=31-dt(o);i.entangledLanes|=o,i.entanglements[d]=i.entanglements[d]|1073741824|c&261930}function I0(i,o){var c=i.entangledLanes|=o;for(i=i.entanglements;c;){var d=31-dt(c),_=1<<d;_&o|i[d]&o&&(i[d]|=o),c&=~_}}function M0(i,o){var c=o&-o;return c=(c&42)!==0?1:Rh(c),(c&(i.suspendedLanes|o))!==0?0:c}function Rh(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Oh(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function D0(){var i=F.p;return i!==0?i:(i=window.event,i===void 0?32:bx(i.type))}function L0(i,o){var c=F.p;try{return F.p=i,o()}finally{F.p=c}}var bs=Math.random().toString(36).slice(2),nn="__reactFiber$"+bs,Nn="__reactProps$"+bs,Bi="__reactContainer$"+bs,Nh="__reactEvents$"+bs,jA="__reactListeners$"+bs,zA="__reactHandles$"+bs,j0="__reactResources$"+bs,so="__reactMarker$"+bs;function Ih(i){delete i[nn],delete i[Nn],delete i[Nh],delete i[jA],delete i[zA]}function $i(i){var o=i[nn];if(o)return o;for(var c=i.parentNode;c;){if(o=c[Bi]||c[nn]){if(c=o.alternate,o.child!==null||c!==null&&c.child!==null)for(i=rx(i);i!==null;){if(c=i[nn])return c;i=rx(i)}return o}i=c,c=i.parentNode}return null}function Ui(i){if(i=i[nn]||i[Bi]){var o=i.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return i}return null}function io(i){var o=i.tag;if(o===5||o===26||o===27||o===6)return i.stateNode;throw Error(r(33))}function qi(i){var o=i[j0];return o||(o=i[j0]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function Kt(i){i[so]=!0}var z0=new Set,P0={};function si(i,o){Fi(i,o),Fi(i+"Capture",o)}function Fi(i,o){for(P0[i]=o,i=0;i<o.length;i++)z0.add(o[i])}var PA=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),B0={},$0={};function BA(i){return xn.call($0,i)?!0:xn.call(B0,i)?!1:PA.test(i)?$0[i]=!0:(B0[i]=!0,!1)}function lc(i,o,c){if(BA(o))if(c===null)i.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":i.removeAttribute(o);return;case"boolean":var d=o.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){i.removeAttribute(o);return}}i.setAttribute(o,""+c)}}function cc(i,o,c){if(c===null)i.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(o);return}i.setAttribute(o,""+c)}}function Zr(i,o,c,d){if(d===null)i.removeAttribute(c);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(c);return}i.setAttributeNS(o,c,""+d)}}function ir(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function U0(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function $A(i,o,c){var d=Object.getOwnPropertyDescriptor(i.constructor.prototype,o);if(!i.hasOwnProperty(o)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var _=d.get,b=d.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return _.call(this)},set:function(k){c=""+k,b.call(this,k)}}),Object.defineProperty(i,o,{enumerable:d.enumerable}),{getValue:function(){return c},setValue:function(k){c=""+k},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function Mh(i){if(!i._valueTracker){var o=U0(i)?"checked":"value";i._valueTracker=$A(i,o,""+i[o])}}function q0(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var c=o.getValue(),d="";return i&&(d=U0(i)?i.checked?"true":"false":i.value),i=d,i!==c?(o.setValue(i),!0):!1}function uc(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var UA=/[\n"\\]/g;function ar(i){return i.replace(UA,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function Dh(i,o,c,d,_,b,k,A){i.name="",k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"?i.type=k:i.removeAttribute("type"),o!=null?k==="number"?(o===0&&i.value===""||i.value!=o)&&(i.value=""+ir(o)):i.value!==""+ir(o)&&(i.value=""+ir(o)):k!=="submit"&&k!=="reset"||i.removeAttribute("value"),o!=null?Lh(i,k,ir(o)):c!=null?Lh(i,k,ir(c)):d!=null&&i.removeAttribute("value"),_==null&&b!=null&&(i.defaultChecked=!!b),_!=null&&(i.checked=_&&typeof _!="function"&&typeof _!="symbol"),A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?i.name=""+ir(A):i.removeAttribute("name")}function F0(i,o,c,d,_,b,k,A){if(b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(i.type=b),o!=null||c!=null){if(!(b!=="submit"&&b!=="reset"||o!=null)){Mh(i);return}c=c!=null?""+ir(c):"",o=o!=null?""+ir(o):c,A||o===i.value||(i.value=o),i.defaultValue=o}d=d??_,d=typeof d!="function"&&typeof d!="symbol"&&!!d,i.checked=A?i.checked:!!d,i.defaultChecked=!!d,k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"&&(i.name=k),Mh(i)}function Lh(i,o,c){o==="number"&&uc(i.ownerDocument)===i||i.defaultValue===""+c||(i.defaultValue=""+c)}function Vi(i,o,c,d){if(i=i.options,o){o={};for(var _=0;_<c.length;_++)o["$"+c[_]]=!0;for(c=0;c<i.length;c++)_=o.hasOwnProperty("$"+i[c].value),i[c].selected!==_&&(i[c].selected=_),_&&d&&(i[c].defaultSelected=!0)}else{for(c=""+ir(c),o=null,_=0;_<i.length;_++){if(i[_].value===c){i[_].selected=!0,d&&(i[_].defaultSelected=!0);return}o!==null||i[_].disabled||(o=i[_])}o!==null&&(o.selected=!0)}}function V0(i,o,c){if(o!=null&&(o=""+ir(o),o!==i.value&&(i.value=o),c==null)){i.defaultValue!==o&&(i.defaultValue=o);return}i.defaultValue=c!=null?""+ir(c):""}function H0(i,o,c,d){if(o==null){if(d!=null){if(c!=null)throw Error(r(92));if(U(d)){if(1<d.length)throw Error(r(93));d=d[0]}c=d}c==null&&(c=""),o=c}c=ir(o),i.defaultValue=c,d=i.textContent,d===c&&d!==""&&d!==null&&(i.value=d),Mh(i)}function Hi(i,o){if(o){var c=i.firstChild;if(c&&c===i.lastChild&&c.nodeType===3){c.nodeValue=o;return}}i.textContent=o}var qA=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function G0(i,o,c){var d=o.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?d?i.setProperty(o,""):o==="float"?i.cssFloat="":i[o]="":d?i.setProperty(o,c):typeof c!="number"||c===0||qA.has(o)?o==="float"?i.cssFloat=c:i[o]=(""+c).trim():i[o]=c+"px"}function K0(i,o,c){if(o!=null&&typeof o!="object")throw Error(r(62));if(i=i.style,c!=null){for(var d in c)!c.hasOwnProperty(d)||o!=null&&o.hasOwnProperty(d)||(d.indexOf("--")===0?i.setProperty(d,""):d==="float"?i.cssFloat="":i[d]="");for(var _ in o)d=o[_],o.hasOwnProperty(_)&&c[_]!==d&&G0(i,_,d)}else for(var b in o)o.hasOwnProperty(b)&&G0(i,b,o[b])}function jh(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var FA=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),VA=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function fc(i){return VA.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function Qr(){}var zh=null;function Ph(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Gi=null,Ki=null;function Z0(i){var o=Ui(i);if(o&&(i=o.stateNode)){var c=i[Nn]||null;e:switch(i=o.stateNode,o.type){case"input":if(Dh(i,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),o=c.name,c.type==="radio"&&o!=null){for(c=i;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+ar(""+o)+'"][type="radio"]'),o=0;o<c.length;o++){var d=c[o];if(d!==i&&d.form===i.form){var _=d[Nn]||null;if(!_)throw Error(r(90));Dh(d,_.value,_.defaultValue,_.defaultValue,_.checked,_.defaultChecked,_.type,_.name)}}for(o=0;o<c.length;o++)d=c[o],d.form===i.form&&q0(d)}break e;case"textarea":V0(i,c.value,c.defaultValue);break e;case"select":o=c.value,o!=null&&Vi(i,!!c.multiple,o,!1)}}}var Bh=!1;function Q0(i,o,c){if(Bh)return i(o,c);Bh=!0;try{var d=i(o);return d}finally{if(Bh=!1,(Gi!==null||Ki!==null)&&(Xc(),Gi&&(o=Gi,i=Ki,Ki=Gi=null,Z0(o),i)))for(o=0;o<i.length;o++)Z0(i[o])}}function ao(i,o){var c=i.stateNode;if(c===null)return null;var d=c[Nn]||null;if(d===null)return null;c=d[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(i=i.type,d=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!d;break e;default:i=!1}if(i)return null;if(c&&typeof c!="function")throw Error(r(231,o,typeof c));return c}var Jr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),$h=!1;if(Jr)try{var oo={};Object.defineProperty(oo,"passive",{get:function(){$h=!0}}),window.addEventListener("test",oo,oo),window.removeEventListener("test",oo,oo)}catch{$h=!1}var vs=null,Uh=null,hc=null;function J0(){if(hc)return hc;var i,o=Uh,c=o.length,d,_="value"in vs?vs.value:vs.textContent,b=_.length;for(i=0;i<c&&o[i]===_[i];i++);var k=c-i;for(d=1;d<=k&&o[c-d]===_[b-d];d++);return hc=_.slice(i,1<d?1-d:void 0)}function dc(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function pc(){return!0}function Y0(){return!1}function In(i){function o(c,d,_,b,k){this._reactName=c,this._targetInst=_,this.type=d,this.nativeEvent=b,this.target=k,this.currentTarget=null;for(var A in i)i.hasOwnProperty(A)&&(c=i[A],this[A]=c?c(b):b[A]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?pc:Y0,this.isPropagationStopped=Y0,this}return p(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=pc)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=pc)},persist:function(){},isPersistent:pc}),o}var ii={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},mc=In(ii),lo=p({},ii,{view:0,detail:0}),HA=In(lo),qh,Fh,co,gc=p({},lo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Hh,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==co&&(co&&i.type==="mousemove"?(qh=i.screenX-co.screenX,Fh=i.screenY-co.screenY):Fh=qh=0,co=i),qh)},movementY:function(i){return"movementY"in i?i.movementY:Fh}}),X0=In(gc),GA=p({},gc,{dataTransfer:0}),KA=In(GA),ZA=p({},lo,{relatedTarget:0}),Vh=In(ZA),QA=p({},ii,{animationName:0,elapsedTime:0,pseudoElement:0}),JA=In(QA),YA=p({},ii,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),XA=In(YA),WA=p({},ii,{data:0}),W0=In(WA),e2={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},t2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},n2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function r2(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=n2[i])?!!o[i]:!1}function Hh(){return r2}var s2=p({},lo,{key:function(i){if(i.key){var o=e2[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=dc(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?t2[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Hh,charCode:function(i){return i.type==="keypress"?dc(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?dc(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),i2=In(s2),a2=p({},gc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),e_=In(a2),o2=p({},lo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Hh}),l2=In(o2),c2=p({},ii,{propertyName:0,elapsedTime:0,pseudoElement:0}),u2=In(c2),f2=p({},gc,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),h2=In(f2),d2=p({},ii,{newState:0,oldState:0}),p2=In(d2),m2=[9,13,27,32],Gh=Jr&&"CompositionEvent"in window,uo=null;Jr&&"documentMode"in document&&(uo=document.documentMode);var g2=Jr&&"TextEvent"in window&&!uo,t_=Jr&&(!Gh||uo&&8<uo&&11>=uo),n_=" ",r_=!1;function s_(i,o){switch(i){case"keyup":return m2.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function i_(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Zi=!1;function y2(i,o){switch(i){case"compositionend":return i_(o);case"keypress":return o.which!==32?null:(r_=!0,n_);case"textInput":return i=o.data,i===n_&&r_?null:i;default:return null}}function _2(i,o){if(Zi)return i==="compositionend"||!Gh&&s_(i,o)?(i=J0(),hc=Uh=vs=null,Zi=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return t_&&o.locale!=="ko"?null:o.data;default:return null}}var b2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function a_(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!b2[i.type]:o==="textarea"}function o_(i,o,c,d){Gi?Ki?Ki.push(d):Ki=[d]:Gi=d,o=iu(o,"onChange"),0<o.length&&(c=new mc("onChange","change",null,c,d),i.push({event:c,listeners:o}))}var fo=null,ho=null;function v2(i){Fv(i,0)}function yc(i){var o=io(i);if(q0(o))return i}function l_(i,o){if(i==="change")return o}var c_=!1;if(Jr){var Kh;if(Jr){var Zh="oninput"in document;if(!Zh){var u_=document.createElement("div");u_.setAttribute("oninput","return;"),Zh=typeof u_.oninput=="function"}Kh=Zh}else Kh=!1;c_=Kh&&(!document.documentMode||9<document.documentMode)}function f_(){fo&&(fo.detachEvent("onpropertychange",h_),ho=fo=null)}function h_(i){if(i.propertyName==="value"&&yc(ho)){var o=[];o_(o,ho,i,Ph(i)),Q0(v2,o)}}function x2(i,o,c){i==="focusin"?(f_(),fo=o,ho=c,fo.attachEvent("onpropertychange",h_)):i==="focusout"&&f_()}function w2(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return yc(ho)}function S2(i,o){if(i==="click")return yc(o)}function k2(i,o){if(i==="input"||i==="change")return yc(o)}function E2(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var Hn=typeof Object.is=="function"?Object.is:E2;function po(i,o){if(Hn(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var c=Object.keys(i),d=Object.keys(o);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++){var _=c[d];if(!xn.call(o,_)||!Hn(i[_],o[_]))return!1}return!0}function d_(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function p_(i,o){var c=d_(i);i=0;for(var d;c;){if(c.nodeType===3){if(d=i+c.textContent.length,i<=o&&d>=o)return{node:c,offset:o-i};i=d}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=d_(c)}}function m_(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?m_(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function g_(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var o=uc(i.document);o instanceof i.HTMLIFrameElement;){try{var c=typeof o.contentWindow.location.href=="string"}catch{c=!1}if(c)i=o.contentWindow;else break;o=uc(i.document)}return o}function Qh(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}var C2=Jr&&"documentMode"in document&&11>=document.documentMode,Qi=null,Jh=null,mo=null,Yh=!1;function y_(i,o,c){var d=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;Yh||Qi==null||Qi!==uc(d)||(d=Qi,"selectionStart"in d&&Qh(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),mo&&po(mo,d)||(mo=d,d=iu(Jh,"onSelect"),0<d.length&&(o=new mc("onSelect","select",null,o,c),i.push({event:o,listeners:d}),o.target=Qi)))}function ai(i,o){var c={};return c[i.toLowerCase()]=o.toLowerCase(),c["Webkit"+i]="webkit"+o,c["Moz"+i]="moz"+o,c}var Ji={animationend:ai("Animation","AnimationEnd"),animationiteration:ai("Animation","AnimationIteration"),animationstart:ai("Animation","AnimationStart"),transitionrun:ai("Transition","TransitionRun"),transitionstart:ai("Transition","TransitionStart"),transitioncancel:ai("Transition","TransitionCancel"),transitionend:ai("Transition","TransitionEnd")},Xh={},__={};Jr&&(__=document.createElement("div").style,"AnimationEvent"in window||(delete Ji.animationend.animation,delete Ji.animationiteration.animation,delete Ji.animationstart.animation),"TransitionEvent"in window||delete Ji.transitionend.transition);function oi(i){if(Xh[i])return Xh[i];if(!Ji[i])return i;var o=Ji[i],c;for(c in o)if(o.hasOwnProperty(c)&&c in __)return Xh[i]=o[c];return i}var b_=oi("animationend"),v_=oi("animationiteration"),x_=oi("animationstart"),T2=oi("transitionrun"),A2=oi("transitionstart"),R2=oi("transitioncancel"),w_=oi("transitionend"),S_=new Map,Wh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Wh.push("scrollEnd");function kr(i,o){S_.set(i,o),si(o,[i])}var _c=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},or=[],Yi=0,ed=0;function bc(){for(var i=Yi,o=ed=Yi=0;o<i;){var c=or[o];or[o++]=null;var d=or[o];or[o++]=null;var _=or[o];or[o++]=null;var b=or[o];if(or[o++]=null,d!==null&&_!==null){var k=d.pending;k===null?_.next=_:(_.next=k.next,k.next=_),d.pending=_}b!==0&&k_(c,_,b)}}function vc(i,o,c,d){or[Yi++]=i,or[Yi++]=o,or[Yi++]=c,or[Yi++]=d,ed|=d,i.lanes|=d,i=i.alternate,i!==null&&(i.lanes|=d)}function td(i,o,c,d){return vc(i,o,c,d),xc(i)}function li(i,o){return vc(i,null,null,o),xc(i)}function k_(i,o,c){i.lanes|=c;var d=i.alternate;d!==null&&(d.lanes|=c);for(var _=!1,b=i.return;b!==null;)b.childLanes|=c,d=b.alternate,d!==null&&(d.childLanes|=c),b.tag===22&&(i=b.stateNode,i===null||i._visibility&1||(_=!0)),i=b,b=b.return;return i.tag===3?(b=i.stateNode,_&&o!==null&&(_=31-dt(c),i=b.hiddenUpdates,d=i[_],d===null?i[_]=[o]:d.push(o),o.lane=c|536870912),b):null}function xc(i){if(50<zo)throw zo=0,up=null,Error(r(185));for(var o=i.return;o!==null;)i=o,o=i.return;return i.tag===3?i.stateNode:null}var Xi={};function O2(i,o,c,d){this.tag=i,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gn(i,o,c,d){return new O2(i,o,c,d)}function nd(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Yr(i,o){var c=i.alternate;return c===null?(c=Gn(i.tag,o,i.key,i.mode),c.elementType=i.elementType,c.type=i.type,c.stateNode=i.stateNode,c.alternate=i,i.alternate=c):(c.pendingProps=o,c.type=i.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=i.flags&65011712,c.childLanes=i.childLanes,c.lanes=i.lanes,c.child=i.child,c.memoizedProps=i.memoizedProps,c.memoizedState=i.memoizedState,c.updateQueue=i.updateQueue,o=i.dependencies,c.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},c.sibling=i.sibling,c.index=i.index,c.ref=i.ref,c.refCleanup=i.refCleanup,c}function E_(i,o){i.flags&=65011714;var c=i.alternate;return c===null?(i.childLanes=0,i.lanes=o,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=c.childLanes,i.lanes=c.lanes,i.child=c.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=c.memoizedProps,i.memoizedState=c.memoizedState,i.updateQueue=c.updateQueue,i.type=c.type,o=c.dependencies,i.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),i}function wc(i,o,c,d,_,b){var k=0;if(d=i,typeof i=="function")nd(i)&&(k=1);else if(typeof i=="string")k=LR(i,c,ae.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case G:return i=Gn(31,c,o,_),i.elementType=G,i.lanes=b,i;case x:return ci(c.children,_,b,o);case E:k=8,_|=24;break;case S:return i=Gn(12,c,o,_|2),i.elementType=S,i.lanes=b,i;case D:return i=Gn(13,c,o,_),i.elementType=D,i.lanes=b,i;case N:return i=Gn(19,c,o,_),i.elementType=N,i.lanes=b,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case T:k=10;break e;case C:k=9;break e;case L:k=11;break e;case B:k=14;break e;case K:k=16,d=null;break e}k=29,c=Error(r(130,i===null?"null":typeof i,"")),d=null}return o=Gn(k,c,o,_),o.elementType=i,o.type=d,o.lanes=b,o}function ci(i,o,c,d){return i=Gn(7,i,d,o),i.lanes=c,i}function rd(i,o,c){return i=Gn(6,i,null,o),i.lanes=c,i}function C_(i){var o=Gn(18,null,null,0);return o.stateNode=i,o}function sd(i,o,c){return o=Gn(4,i.children!==null?i.children:[],i.key,o),o.lanes=c,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}var T_=new WeakMap;function lr(i,o){if(typeof i=="object"&&i!==null){var c=T_.get(i);return c!==void 0?c:(o={value:i,source:o,stack:Ye(o)},T_.set(i,o),o)}return{value:i,source:o,stack:Ye(o)}}var Wi=[],ea=0,Sc=null,go=0,cr=[],ur=0,xs=null,Nr=1,Ir="";function Xr(i,o){Wi[ea++]=go,Wi[ea++]=Sc,Sc=i,go=o}function A_(i,o,c){cr[ur++]=Nr,cr[ur++]=Ir,cr[ur++]=xs,xs=i;var d=Nr;i=Ir;var _=32-dt(d)-1;d&=~(1<<_),c+=1;var b=32-dt(o)+_;if(30<b){var k=_-_%5;b=(d&(1<<k)-1).toString(32),d>>=k,_-=k,Nr=1<<32-dt(o)+_|c<<_|d,Ir=b+i}else Nr=1<<b|c<<_|d,Ir=i}function id(i){i.return!==null&&(Xr(i,1),A_(i,1,0))}function ad(i){for(;i===Sc;)Sc=Wi[--ea],Wi[ea]=null,go=Wi[--ea],Wi[ea]=null;for(;i===xs;)xs=cr[--ur],cr[ur]=null,Ir=cr[--ur],cr[ur]=null,Nr=cr[--ur],cr[ur]=null}function R_(i,o){cr[ur++]=Nr,cr[ur++]=Ir,cr[ur++]=xs,Nr=o.id,Ir=o.overflow,xs=i}var rn=null,bt=null,Je=!1,ws=null,fr=!1,od=Error(r(519));function Ss(i){var o=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw yo(lr(o,i)),od}function O_(i){var o=i.stateNode,c=i.type,d=i.memoizedProps;switch(o[nn]=i,o[Nn]=d,c){case"dialog":Ve("cancel",o),Ve("close",o);break;case"iframe":case"object":case"embed":Ve("load",o);break;case"video":case"audio":for(c=0;c<Bo.length;c++)Ve(Bo[c],o);break;case"source":Ve("error",o);break;case"img":case"image":case"link":Ve("error",o),Ve("load",o);break;case"details":Ve("toggle",o);break;case"input":Ve("invalid",o),F0(o,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0);break;case"select":Ve("invalid",o);break;case"textarea":Ve("invalid",o),H0(o,d.value,d.defaultValue,d.children)}c=d.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||o.textContent===""+c||d.suppressHydrationWarning===!0||Kv(o.textContent,c)?(d.popover!=null&&(Ve("beforetoggle",o),Ve("toggle",o)),d.onScroll!=null&&Ve("scroll",o),d.onScrollEnd!=null&&Ve("scrollend",o),d.onClick!=null&&(o.onclick=Qr),o=!0):o=!1,o||Ss(i,!0)}function N_(i){for(rn=i.return;rn;)switch(rn.tag){case 5:case 31:case 13:fr=!1;return;case 27:case 3:fr=!0;return;default:rn=rn.return}}function ta(i){if(i!==rn)return!1;if(!Je)return N_(i),Je=!0,!1;var o=i.tag,c;if((c=o!==3&&o!==27)&&((c=o===5)&&(c=i.type,c=!(c!=="form"&&c!=="button")||Ep(i.type,i.memoizedProps)),c=!c),c&&bt&&Ss(i),N_(i),o===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));bt=nx(i)}else if(o===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));bt=nx(i)}else o===27?(o=bt,zs(i.type)?(i=Op,Op=null,bt=i):bt=o):bt=rn?dr(i.stateNode.nextSibling):null;return!0}function ui(){bt=rn=null,Je=!1}function ld(){var i=ws;return i!==null&&(jn===null?jn=i:jn.push.apply(jn,i),ws=null),i}function yo(i){ws===null?ws=[i]:ws.push(i)}var cd=I(null),fi=null,Wr=null;function ks(i,o,c){R(cd,o._currentValue),o._currentValue=c}function es(i){i._currentValue=cd.current,H(cd)}function ud(i,o,c){for(;i!==null;){var d=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,d!==null&&(d.childLanes|=o)):d!==null&&(d.childLanes&o)!==o&&(d.childLanes|=o),i===c)break;i=i.return}}function fd(i,o,c,d){var _=i.child;for(_!==null&&(_.return=i);_!==null;){var b=_.dependencies;if(b!==null){var k=_.child;b=b.firstContext;e:for(;b!==null;){var A=b;b=_;for(var $=0;$<o.length;$++)if(A.context===o[$]){b.lanes|=c,A=b.alternate,A!==null&&(A.lanes|=c),ud(b.return,c,i),d||(k=null);break e}b=A.next}}else if(_.tag===18){if(k=_.return,k===null)throw Error(r(341));k.lanes|=c,b=k.alternate,b!==null&&(b.lanes|=c),ud(k,c,i),k=null}else k=_.child;if(k!==null)k.return=_;else for(k=_;k!==null;){if(k===i){k=null;break}if(_=k.sibling,_!==null){_.return=k.return,k=_;break}k=k.return}_=k}}function na(i,o,c,d){i=null;for(var _=o,b=!1;_!==null;){if(!b){if((_.flags&524288)!==0)b=!0;else if((_.flags&262144)!==0)break}if(_.tag===10){var k=_.alternate;if(k===null)throw Error(r(387));if(k=k.memoizedProps,k!==null){var A=_.type;Hn(_.pendingProps.value,k.value)||(i!==null?i.push(A):i=[A])}}else if(_===we.current){if(k=_.alternate,k===null)throw Error(r(387));k.memoizedState.memoizedState!==_.memoizedState.memoizedState&&(i!==null?i.push(Vo):i=[Vo])}_=_.return}i!==null&&fd(o,i,c,d),o.flags|=262144}function kc(i){for(i=i.firstContext;i!==null;){if(!Hn(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function hi(i){fi=i,Wr=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function sn(i){return I_(fi,i)}function Ec(i,o){return fi===null&&hi(i),I_(i,o)}function I_(i,o){var c=o._currentValue;if(o={context:o,memoizedValue:c,next:null},Wr===null){if(i===null)throw Error(r(308));Wr=o,i.dependencies={lanes:0,firstContext:o},i.flags|=524288}else Wr=Wr.next=o;return c}var N2=typeof AbortController<"u"?AbortController:function(){var i=[],o=this.signal={aborted:!1,addEventListener:function(c,d){i.push(d)}};this.abort=function(){o.aborted=!0,i.forEach(function(c){return c()})}},I2=t.unstable_scheduleCallback,M2=t.unstable_NormalPriority,Ot={$$typeof:T,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function hd(){return{controller:new N2,data:new Map,refCount:0}}function _o(i){i.refCount--,i.refCount===0&&I2(M2,function(){i.controller.abort()})}var bo=null,dd=0,ra=0,sa=null;function D2(i,o){if(bo===null){var c=bo=[];dd=0,ra=gp(),sa={status:"pending",value:void 0,then:function(d){c.push(d)}}}return dd++,o.then(M_,M_),o}function M_(){if(--dd===0&&bo!==null){sa!==null&&(sa.status="fulfilled");var i=bo;bo=null,ra=0,sa=null;for(var o=0;o<i.length;o++)(0,i[o])()}}function L2(i,o){var c=[],d={status:"pending",value:null,reason:null,then:function(_){c.push(_)}};return i.then(function(){d.status="fulfilled",d.value=o;for(var _=0;_<c.length;_++)(0,c[_])(o)},function(_){for(d.status="rejected",d.reason=_,_=0;_<c.length;_++)(0,c[_])(void 0)}),d}var D_=z.S;z.S=function(i,o){yv=xe(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&D2(i,o),D_!==null&&D_(i,o)};var di=I(null);function pd(){var i=di.current;return i!==null?i:pt.pooledCache}function Cc(i,o){o===null?R(di,di.current):R(di,o.pool)}function L_(){var i=pd();return i===null?null:{parent:Ot._currentValue,pool:i}}var ia=Error(r(460)),md=Error(r(474)),Tc=Error(r(542)),Ac={then:function(){}};function j_(i){return i=i.status,i==="fulfilled"||i==="rejected"}function z_(i,o,c){switch(c=i[c],c===void 0?i.push(o):c!==o&&(o.then(Qr,Qr),o=c),o.status){case"fulfilled":return o.value;case"rejected":throw i=o.reason,B_(i),i;default:if(typeof o.status=="string")o.then(Qr,Qr);else{if(i=pt,i!==null&&100<i.shellSuspendCounter)throw Error(r(482));i=o,i.status="pending",i.then(function(d){if(o.status==="pending"){var _=o;_.status="fulfilled",_.value=d}},function(d){if(o.status==="pending"){var _=o;_.status="rejected",_.reason=d}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw i=o.reason,B_(i),i}throw mi=o,ia}}function pi(i){try{var o=i._init;return o(i._payload)}catch(c){throw c!==null&&typeof c=="object"&&typeof c.then=="function"?(mi=c,ia):c}}var mi=null;function P_(){if(mi===null)throw Error(r(459));var i=mi;return mi=null,i}function B_(i){if(i===ia||i===Tc)throw Error(r(483))}var aa=null,vo=0;function Rc(i){var o=vo;return vo+=1,aa===null&&(aa=[]),z_(aa,i,o)}function xo(i,o){o=o.props.ref,i.ref=o!==void 0?o:null}function Oc(i,o){throw o.$$typeof===y?Error(r(525)):(i=Object.prototype.toString.call(o),Error(r(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i)))}function $_(i){function o(Z,V){if(i){var X=Z.deletions;X===null?(Z.deletions=[V],Z.flags|=16):X.push(V)}}function c(Z,V){if(!i)return null;for(;V!==null;)o(Z,V),V=V.sibling;return null}function d(Z){for(var V=new Map;Z!==null;)Z.key!==null?V.set(Z.key,Z):V.set(Z.index,Z),Z=Z.sibling;return V}function _(Z,V){return Z=Yr(Z,V),Z.index=0,Z.sibling=null,Z}function b(Z,V,X){return Z.index=X,i?(X=Z.alternate,X!==null?(X=X.index,X<V?(Z.flags|=67108866,V):X):(Z.flags|=67108866,V)):(Z.flags|=1048576,V)}function k(Z){return i&&Z.alternate===null&&(Z.flags|=67108866),Z}function A(Z,V,X,le){return V===null||V.tag!==6?(V=rd(X,Z.mode,le),V.return=Z,V):(V=_(V,X),V.return=Z,V)}function $(Z,V,X,le){var Ee=X.type;return Ee===x?oe(Z,V,X.props.children,le,X.key):V!==null&&(V.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===K&&pi(Ee)===V.type)?(V=_(V,X.props),xo(V,X),V.return=Z,V):(V=wc(X.type,X.key,X.props,null,Z.mode,le),xo(V,X),V.return=Z,V)}function W(Z,V,X,le){return V===null||V.tag!==4||V.stateNode.containerInfo!==X.containerInfo||V.stateNode.implementation!==X.implementation?(V=sd(X,Z.mode,le),V.return=Z,V):(V=_(V,X.children||[]),V.return=Z,V)}function oe(Z,V,X,le,Ee){return V===null||V.tag!==7?(V=ci(X,Z.mode,le,Ee),V.return=Z,V):(V=_(V,X),V.return=Z,V)}function ce(Z,V,X){if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return V=rd(""+V,Z.mode,X),V.return=Z,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case g:return X=wc(V.type,V.key,V.props,null,Z.mode,X),xo(X,V),X.return=Z,X;case v:return V=sd(V,Z.mode,X),V.return=Z,V;case K:return V=pi(V),ce(Z,V,X)}if(U(V)||ie(V))return V=ci(V,Z.mode,X,null),V.return=Z,V;if(typeof V.then=="function")return ce(Z,Rc(V),X);if(V.$$typeof===T)return ce(Z,Ec(Z,V),X);Oc(Z,V)}return null}function te(Z,V,X,le){var Ee=V!==null?V.key:null;if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return Ee!==null?null:A(Z,V,""+X,le);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case g:return X.key===Ee?$(Z,V,X,le):null;case v:return X.key===Ee?W(Z,V,X,le):null;case K:return X=pi(X),te(Z,V,X,le)}if(U(X)||ie(X))return Ee!==null?null:oe(Z,V,X,le,null);if(typeof X.then=="function")return te(Z,V,Rc(X),le);if(X.$$typeof===T)return te(Z,V,Ec(Z,X),le);Oc(Z,X)}return null}function re(Z,V,X,le,Ee){if(typeof le=="string"&&le!==""||typeof le=="number"||typeof le=="bigint")return Z=Z.get(X)||null,A(V,Z,""+le,Ee);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case g:return Z=Z.get(le.key===null?X:le.key)||null,$(V,Z,le,Ee);case v:return Z=Z.get(le.key===null?X:le.key)||null,W(V,Z,le,Ee);case K:return le=pi(le),re(Z,V,X,le,Ee)}if(U(le)||ie(le))return Z=Z.get(X)||null,oe(V,Z,le,Ee,null);if(typeof le.then=="function")return re(Z,V,X,Rc(le),Ee);if(le.$$typeof===T)return re(Z,V,X,Ec(V,le),Ee);Oc(V,le)}return null}function _e(Z,V,X,le){for(var Ee=null,tt=null,Se=V,Pe=V=0,Ke=null;Se!==null&&Pe<X.length;Pe++){Se.index>Pe?(Ke=Se,Se=null):Ke=Se.sibling;var nt=te(Z,Se,X[Pe],le);if(nt===null){Se===null&&(Se=Ke);break}i&&Se&&nt.alternate===null&&o(Z,Se),V=b(nt,V,Pe),tt===null?Ee=nt:tt.sibling=nt,tt=nt,Se=Ke}if(Pe===X.length)return c(Z,Se),Je&&Xr(Z,Pe),Ee;if(Se===null){for(;Pe<X.length;Pe++)Se=ce(Z,X[Pe],le),Se!==null&&(V=b(Se,V,Pe),tt===null?Ee=Se:tt.sibling=Se,tt=Se);return Je&&Xr(Z,Pe),Ee}for(Se=d(Se);Pe<X.length;Pe++)Ke=re(Se,Z,Pe,X[Pe],le),Ke!==null&&(i&&Ke.alternate!==null&&Se.delete(Ke.key===null?Pe:Ke.key),V=b(Ke,V,Pe),tt===null?Ee=Ke:tt.sibling=Ke,tt=Ke);return i&&Se.forEach(function(qs){return o(Z,qs)}),Je&&Xr(Z,Pe),Ee}function Re(Z,V,X,le){if(X==null)throw Error(r(151));for(var Ee=null,tt=null,Se=V,Pe=V=0,Ke=null,nt=X.next();Se!==null&&!nt.done;Pe++,nt=X.next()){Se.index>Pe?(Ke=Se,Se=null):Ke=Se.sibling;var qs=te(Z,Se,nt.value,le);if(qs===null){Se===null&&(Se=Ke);break}i&&Se&&qs.alternate===null&&o(Z,Se),V=b(qs,V,Pe),tt===null?Ee=qs:tt.sibling=qs,tt=qs,Se=Ke}if(nt.done)return c(Z,Se),Je&&Xr(Z,Pe),Ee;if(Se===null){for(;!nt.done;Pe++,nt=X.next())nt=ce(Z,nt.value,le),nt!==null&&(V=b(nt,V,Pe),tt===null?Ee=nt:tt.sibling=nt,tt=nt);return Je&&Xr(Z,Pe),Ee}for(Se=d(Se);!nt.done;Pe++,nt=X.next())nt=re(Se,Z,Pe,nt.value,le),nt!==null&&(i&&nt.alternate!==null&&Se.delete(nt.key===null?Pe:nt.key),V=b(nt,V,Pe),tt===null?Ee=nt:tt.sibling=nt,tt=nt);return i&&Se.forEach(function(GR){return o(Z,GR)}),Je&&Xr(Z,Pe),Ee}function ht(Z,V,X,le){if(typeof X=="object"&&X!==null&&X.type===x&&X.key===null&&(X=X.props.children),typeof X=="object"&&X!==null){switch(X.$$typeof){case g:e:{for(var Ee=X.key;V!==null;){if(V.key===Ee){if(Ee=X.type,Ee===x){if(V.tag===7){c(Z,V.sibling),le=_(V,X.props.children),le.return=Z,Z=le;break e}}else if(V.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===K&&pi(Ee)===V.type){c(Z,V.sibling),le=_(V,X.props),xo(le,X),le.return=Z,Z=le;break e}c(Z,V);break}else o(Z,V);V=V.sibling}X.type===x?(le=ci(X.props.children,Z.mode,le,X.key),le.return=Z,Z=le):(le=wc(X.type,X.key,X.props,null,Z.mode,le),xo(le,X),le.return=Z,Z=le)}return k(Z);case v:e:{for(Ee=X.key;V!==null;){if(V.key===Ee)if(V.tag===4&&V.stateNode.containerInfo===X.containerInfo&&V.stateNode.implementation===X.implementation){c(Z,V.sibling),le=_(V,X.children||[]),le.return=Z,Z=le;break e}else{c(Z,V);break}else o(Z,V);V=V.sibling}le=sd(X,Z.mode,le),le.return=Z,Z=le}return k(Z);case K:return X=pi(X),ht(Z,V,X,le)}if(U(X))return _e(Z,V,X,le);if(ie(X)){if(Ee=ie(X),typeof Ee!="function")throw Error(r(150));return X=Ee.call(X),Re(Z,V,X,le)}if(typeof X.then=="function")return ht(Z,V,Rc(X),le);if(X.$$typeof===T)return ht(Z,V,Ec(Z,X),le);Oc(Z,X)}return typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint"?(X=""+X,V!==null&&V.tag===6?(c(Z,V.sibling),le=_(V,X),le.return=Z,Z=le):(c(Z,V),le=rd(X,Z.mode,le),le.return=Z,Z=le),k(Z)):c(Z,V)}return function(Z,V,X,le){try{vo=0;var Ee=ht(Z,V,X,le);return aa=null,Ee}catch(Se){if(Se===ia||Se===Tc)throw Se;var tt=Gn(29,Se,null,Z.mode);return tt.lanes=le,tt.return=Z,tt}}}var gi=$_(!0),U_=$_(!1),Es=!1;function gd(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function yd(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Cs(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Ts(i,o,c){var d=i.updateQueue;if(d===null)return null;if(d=d.shared,(st&2)!==0){var _=d.pending;return _===null?o.next=o:(o.next=_.next,_.next=o),d.pending=o,o=xc(i),k_(i,null,c),o}return vc(i,d,o,c),xc(i)}function wo(i,o,c){if(o=o.updateQueue,o!==null&&(o=o.shared,(c&4194048)!==0)){var d=o.lanes;d&=i.pendingLanes,c|=d,o.lanes=c,I0(i,c)}}function _d(i,o){var c=i.updateQueue,d=i.alternate;if(d!==null&&(d=d.updateQueue,c===d)){var _=null,b=null;if(c=c.firstBaseUpdate,c!==null){do{var k={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};b===null?_=b=k:b=b.next=k,c=c.next}while(c!==null);b===null?_=b=o:b=b.next=o}else _=b=o;c={baseState:d.baseState,firstBaseUpdate:_,lastBaseUpdate:b,shared:d.shared,callbacks:d.callbacks},i.updateQueue=c;return}i=c.lastBaseUpdate,i===null?c.firstBaseUpdate=o:i.next=o,c.lastBaseUpdate=o}var bd=!1;function So(){if(bd){var i=sa;if(i!==null)throw i}}function ko(i,o,c,d){bd=!1;var _=i.updateQueue;Es=!1;var b=_.firstBaseUpdate,k=_.lastBaseUpdate,A=_.shared.pending;if(A!==null){_.shared.pending=null;var $=A,W=$.next;$.next=null,k===null?b=W:k.next=W,k=$;var oe=i.alternate;oe!==null&&(oe=oe.updateQueue,A=oe.lastBaseUpdate,A!==k&&(A===null?oe.firstBaseUpdate=W:A.next=W,oe.lastBaseUpdate=$))}if(b!==null){var ce=_.baseState;k=0,oe=W=$=null,A=b;do{var te=A.lane&-536870913,re=te!==A.lane;if(re?(Ge&te)===te:(d&te)===te){te!==0&&te===ra&&(bd=!0),oe!==null&&(oe=oe.next={lane:0,tag:A.tag,payload:A.payload,callback:null,next:null});e:{var _e=i,Re=A;te=o;var ht=c;switch(Re.tag){case 1:if(_e=Re.payload,typeof _e=="function"){ce=_e.call(ht,ce,te);break e}ce=_e;break e;case 3:_e.flags=_e.flags&-65537|128;case 0:if(_e=Re.payload,te=typeof _e=="function"?_e.call(ht,ce,te):_e,te==null)break e;ce=p({},ce,te);break e;case 2:Es=!0}}te=A.callback,te!==null&&(i.flags|=64,re&&(i.flags|=8192),re=_.callbacks,re===null?_.callbacks=[te]:re.push(te))}else re={lane:te,tag:A.tag,payload:A.payload,callback:A.callback,next:null},oe===null?(W=oe=re,$=ce):oe=oe.next=re,k|=te;if(A=A.next,A===null){if(A=_.shared.pending,A===null)break;re=A,A=re.next,re.next=null,_.lastBaseUpdate=re,_.shared.pending=null}}while(!0);oe===null&&($=ce),_.baseState=$,_.firstBaseUpdate=W,_.lastBaseUpdate=oe,b===null&&(_.shared.lanes=0),Is|=k,i.lanes=k,i.memoizedState=ce}}function q_(i,o){if(typeof i!="function")throw Error(r(191,i));i.call(o)}function F_(i,o){var c=i.callbacks;if(c!==null)for(i.callbacks=null,i=0;i<c.length;i++)q_(c[i],o)}var oa=I(null),Nc=I(0);function V_(i,o){i=cs,R(Nc,i),R(oa,o),cs=i|o.baseLanes}function vd(){R(Nc,cs),R(oa,oa.current)}function xd(){cs=Nc.current,H(oa),H(Nc)}var Kn=I(null),hr=null;function As(i){var o=i.alternate;R(At,At.current&1),R(Kn,i),hr===null&&(o===null||oa.current!==null||o.memoizedState!==null)&&(hr=i)}function wd(i){R(At,At.current),R(Kn,i),hr===null&&(hr=i)}function H_(i){i.tag===22?(R(At,At.current),R(Kn,i),hr===null&&(hr=i)):Rs()}function Rs(){R(At,At.current),R(Kn,Kn.current)}function Zn(i){H(Kn),hr===i&&(hr=null),H(At)}var At=I(0);function Ic(i){for(var o=i;o!==null;){if(o.tag===13){var c=o.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||Ap(c)||Rp(c)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var ts=0,ze=null,ut=null,Nt=null,Mc=!1,la=!1,yi=!1,Dc=0,Eo=0,ca=null,j2=0;function kt(){throw Error(r(321))}function Sd(i,o){if(o===null)return!1;for(var c=0;c<o.length&&c<i.length;c++)if(!Hn(i[c],o[c]))return!1;return!0}function kd(i,o,c,d,_,b){return ts=b,ze=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,z.H=i===null||i.memoizedState===null?Ab:Bd,yi=!1,b=c(d,_),yi=!1,la&&(b=K_(o,c,d,_)),G_(i),b}function G_(i){z.H=Ao;var o=ut!==null&&ut.next!==null;if(ts=0,Nt=ut=ze=null,Mc=!1,Eo=0,ca=null,o)throw Error(r(300));i===null||It||(i=i.dependencies,i!==null&&kc(i)&&(It=!0))}function K_(i,o,c,d){ze=i;var _=0;do{if(la&&(ca=null),Eo=0,la=!1,25<=_)throw Error(r(301));if(_+=1,Nt=ut=null,i.updateQueue!=null){var b=i.updateQueue;b.lastEffect=null,b.events=null,b.stores=null,b.memoCache!=null&&(b.memoCache.index=0)}z.H=Rb,b=o(c,d)}while(la);return b}function z2(){var i=z.H,o=i.useState()[0];return o=typeof o.then=="function"?Co(o):o,i=i.useState()[0],(ut!==null?ut.memoizedState:null)!==i&&(ze.flags|=1024),o}function Ed(){var i=Dc!==0;return Dc=0,i}function Cd(i,o,c){o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~c}function Td(i){if(Mc){for(i=i.memoizedState;i!==null;){var o=i.queue;o!==null&&(o.pending=null),i=i.next}Mc=!1}ts=0,Nt=ut=ze=null,la=!1,Eo=Dc=0,ca=null}function Sn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Nt===null?ze.memoizedState=Nt=i:Nt=Nt.next=i,Nt}function Rt(){if(ut===null){var i=ze.alternate;i=i!==null?i.memoizedState:null}else i=ut.next;var o=Nt===null?ze.memoizedState:Nt.next;if(o!==null)Nt=o,ut=i;else{if(i===null)throw ze.alternate===null?Error(r(467)):Error(r(310));ut=i,i={memoizedState:ut.memoizedState,baseState:ut.baseState,baseQueue:ut.baseQueue,queue:ut.queue,next:null},Nt===null?ze.memoizedState=Nt=i:Nt=Nt.next=i}return Nt}function Lc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Co(i){var o=Eo;return Eo+=1,ca===null&&(ca=[]),i=z_(ca,i,o),o=ze,(Nt===null?o.memoizedState:Nt.next)===null&&(o=o.alternate,z.H=o===null||o.memoizedState===null?Ab:Bd),i}function jc(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Co(i);if(i.$$typeof===T)return sn(i)}throw Error(r(438,String(i)))}function Ad(i){var o=null,c=ze.updateQueue;if(c!==null&&(o=c.memoCache),o==null){var d=ze.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(o={data:d.data.map(function(_){return _.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),c===null&&(c=Lc(),ze.updateQueue=c),c.memoCache=o,c=o.data[o.index],c===void 0)for(c=o.data[o.index]=Array(i),d=0;d<i;d++)c[d]=j;return o.index++,c}function ns(i,o){return typeof o=="function"?o(i):o}function zc(i){var o=Rt();return Rd(o,ut,i)}function Rd(i,o,c){var d=i.queue;if(d===null)throw Error(r(311));d.lastRenderedReducer=c;var _=i.baseQueue,b=d.pending;if(b!==null){if(_!==null){var k=_.next;_.next=b.next,b.next=k}o.baseQueue=_=b,d.pending=null}if(b=i.baseState,_===null)i.memoizedState=b;else{o=_.next;var A=k=null,$=null,W=o,oe=!1;do{var ce=W.lane&-536870913;if(ce!==W.lane?(Ge&ce)===ce:(ts&ce)===ce){var te=W.revertLane;if(te===0)$!==null&&($=$.next={lane:0,revertLane:0,gesture:null,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null}),ce===ra&&(oe=!0);else if((ts&te)===te){W=W.next,te===ra&&(oe=!0);continue}else ce={lane:0,revertLane:W.revertLane,gesture:null,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null},$===null?(A=$=ce,k=b):$=$.next=ce,ze.lanes|=te,Is|=te;ce=W.action,yi&&c(b,ce),b=W.hasEagerState?W.eagerState:c(b,ce)}else te={lane:ce,revertLane:W.revertLane,gesture:W.gesture,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null},$===null?(A=$=te,k=b):$=$.next=te,ze.lanes|=ce,Is|=ce;W=W.next}while(W!==null&&W!==o);if($===null?k=b:$.next=A,!Hn(b,i.memoizedState)&&(It=!0,oe&&(c=sa,c!==null)))throw c;i.memoizedState=b,i.baseState=k,i.baseQueue=$,d.lastRenderedState=b}return _===null&&(d.lanes=0),[i.memoizedState,d.dispatch]}function Od(i){var o=Rt(),c=o.queue;if(c===null)throw Error(r(311));c.lastRenderedReducer=i;var d=c.dispatch,_=c.pending,b=o.memoizedState;if(_!==null){c.pending=null;var k=_=_.next;do b=i(b,k.action),k=k.next;while(k!==_);Hn(b,o.memoizedState)||(It=!0),o.memoizedState=b,o.baseQueue===null&&(o.baseState=b),c.lastRenderedState=b}return[b,d]}function Z_(i,o,c){var d=ze,_=Rt(),b=Je;if(b){if(c===void 0)throw Error(r(407));c=c()}else c=o();var k=!Hn((ut||_).memoizedState,c);if(k&&(_.memoizedState=c,It=!0),_=_.queue,Md(Y_.bind(null,d,_,i),[i]),_.getSnapshot!==o||k||Nt!==null&&Nt.memoizedState.tag&1){if(d.flags|=2048,ua(9,{destroy:void 0},J_.bind(null,d,_,c,o),null),pt===null)throw Error(r(349));b||(ts&127)!==0||Q_(d,o,c)}return c}function Q_(i,o,c){i.flags|=16384,i={getSnapshot:o,value:c},o=ze.updateQueue,o===null?(o=Lc(),ze.updateQueue=o,o.stores=[i]):(c=o.stores,c===null?o.stores=[i]:c.push(i))}function J_(i,o,c,d){o.value=c,o.getSnapshot=d,X_(o)&&W_(i)}function Y_(i,o,c){return c(function(){X_(o)&&W_(i)})}function X_(i){var o=i.getSnapshot;i=i.value;try{var c=o();return!Hn(i,c)}catch{return!0}}function W_(i){var o=li(i,2);o!==null&&zn(o,i,2)}function Nd(i){var o=Sn();if(typeof i=="function"){var c=i;if(i=c(),yi){On(!0);try{c()}finally{On(!1)}}}return o.memoizedState=o.baseState=i,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ns,lastRenderedState:i},o}function eb(i,o,c,d){return i.baseState=c,Rd(i,ut,typeof d=="function"?d:ns)}function P2(i,o,c,d,_){if($c(i))throw Error(r(485));if(i=o.action,i!==null){var b={payload:_,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(k){b.listeners.push(k)}};z.T!==null?c(!0):b.isTransition=!1,d(b),c=o.pending,c===null?(b.next=o.pending=b,tb(o,b)):(b.next=c.next,o.pending=c.next=b)}}function tb(i,o){var c=o.action,d=o.payload,_=i.state;if(o.isTransition){var b=z.T,k={};z.T=k;try{var A=c(_,d),$=z.S;$!==null&&$(k,A),nb(i,o,A)}catch(W){Id(i,o,W)}finally{b!==null&&k.types!==null&&(b.types=k.types),z.T=b}}else try{b=c(_,d),nb(i,o,b)}catch(W){Id(i,o,W)}}function nb(i,o,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(d){rb(i,o,d)},function(d){return Id(i,o,d)}):rb(i,o,c)}function rb(i,o,c){o.status="fulfilled",o.value=c,sb(o),i.state=c,o=i.pending,o!==null&&(c=o.next,c===o?i.pending=null:(c=c.next,o.next=c,tb(i,c)))}function Id(i,o,c){var d=i.pending;if(i.pending=null,d!==null){d=d.next;do o.status="rejected",o.reason=c,sb(o),o=o.next;while(o!==d)}i.action=null}function sb(i){i=i.listeners;for(var o=0;o<i.length;o++)(0,i[o])()}function ib(i,o){return o}function ab(i,o){if(Je){var c=pt.formState;if(c!==null){e:{var d=ze;if(Je){if(bt){t:{for(var _=bt,b=fr;_.nodeType!==8;){if(!b){_=null;break t}if(_=dr(_.nextSibling),_===null){_=null;break t}}b=_.data,_=b==="F!"||b==="F"?_:null}if(_){bt=dr(_.nextSibling),d=_.data==="F!";break e}}Ss(d)}d=!1}d&&(o=c[0])}}return c=Sn(),c.memoizedState=c.baseState=o,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ib,lastRenderedState:o},c.queue=d,c=Eb.bind(null,ze,d),d.dispatch=c,d=Nd(!1),b=Pd.bind(null,ze,!1,d.queue),d=Sn(),_={state:o,dispatch:null,action:i,pending:null},d.queue=_,c=P2.bind(null,ze,_,b,c),_.dispatch=c,d.memoizedState=i,[o,c,!1]}function ob(i){var o=Rt();return lb(o,ut,i)}function lb(i,o,c){if(o=Rd(i,o,ib)[0],i=zc(ns)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var d=Co(o)}catch(k){throw k===ia?Tc:k}else d=o;o=Rt();var _=o.queue,b=_.dispatch;return c!==o.memoizedState&&(ze.flags|=2048,ua(9,{destroy:void 0},B2.bind(null,_,c),null)),[d,b,i]}function B2(i,o){i.action=o}function cb(i){var o=Rt(),c=ut;if(c!==null)return lb(o,c,i);Rt(),o=o.memoizedState,c=Rt();var d=c.queue.dispatch;return c.memoizedState=i,[o,d,!1]}function ua(i,o,c,d){return i={tag:i,create:c,deps:d,inst:o,next:null},o=ze.updateQueue,o===null&&(o=Lc(),ze.updateQueue=o),c=o.lastEffect,c===null?o.lastEffect=i.next=i:(d=c.next,c.next=i,i.next=d,o.lastEffect=i),i}function ub(){return Rt().memoizedState}function Pc(i,o,c,d){var _=Sn();ze.flags|=i,_.memoizedState=ua(1|o,{destroy:void 0},c,d===void 0?null:d)}function Bc(i,o,c,d){var _=Rt();d=d===void 0?null:d;var b=_.memoizedState.inst;ut!==null&&d!==null&&Sd(d,ut.memoizedState.deps)?_.memoizedState=ua(o,b,c,d):(ze.flags|=i,_.memoizedState=ua(1|o,b,c,d))}function fb(i,o){Pc(8390656,8,i,o)}function Md(i,o){Bc(2048,8,i,o)}function $2(i){ze.flags|=4;var o=ze.updateQueue;if(o===null)o=Lc(),ze.updateQueue=o,o.events=[i];else{var c=o.events;c===null?o.events=[i]:c.push(i)}}function hb(i){var o=Rt().memoizedState;return $2({ref:o,nextImpl:i}),function(){if((st&2)!==0)throw Error(r(440));return o.impl.apply(void 0,arguments)}}function db(i,o){return Bc(4,2,i,o)}function pb(i,o){return Bc(4,4,i,o)}function mb(i,o){if(typeof o=="function"){i=i();var c=o(i);return function(){typeof c=="function"?c():o(null)}}if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function gb(i,o,c){c=c!=null?c.concat([i]):null,Bc(4,4,mb.bind(null,o,i),c)}function Dd(){}function yb(i,o){var c=Rt();o=o===void 0?null:o;var d=c.memoizedState;return o!==null&&Sd(o,d[1])?d[0]:(c.memoizedState=[i,o],i)}function _b(i,o){var c=Rt();o=o===void 0?null:o;var d=c.memoizedState;if(o!==null&&Sd(o,d[1]))return d[0];if(d=i(),yi){On(!0);try{i()}finally{On(!1)}}return c.memoizedState=[d,o],d}function Ld(i,o,c){return c===void 0||(ts&1073741824)!==0&&(Ge&261930)===0?i.memoizedState=o:(i.memoizedState=c,i=bv(),ze.lanes|=i,Is|=i,c)}function bb(i,o,c,d){return Hn(c,o)?c:oa.current!==null?(i=Ld(i,c,d),Hn(i,o)||(It=!0),i):(ts&42)===0||(ts&1073741824)!==0&&(Ge&261930)===0?(It=!0,i.memoizedState=c):(i=bv(),ze.lanes|=i,Is|=i,o)}function vb(i,o,c,d,_){var b=F.p;F.p=b!==0&&8>b?b:8;var k=z.T,A={};z.T=A,Pd(i,!1,o,c);try{var $=_(),W=z.S;if(W!==null&&W(A,$),$!==null&&typeof $=="object"&&typeof $.then=="function"){var oe=L2($,d);To(i,o,oe,Yn(i))}else To(i,o,d,Yn(i))}catch(ce){To(i,o,{then:function(){},status:"rejected",reason:ce},Yn())}finally{F.p=b,k!==null&&A.types!==null&&(k.types=A.types),z.T=k}}function U2(){}function jd(i,o,c,d){if(i.tag!==5)throw Error(r(476));var _=xb(i).queue;vb(i,_,o,se,c===null?U2:function(){return wb(i),c(d)})}function xb(i){var o=i.memoizedState;if(o!==null)return o;o={memoizedState:se,baseState:se,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ns,lastRenderedState:se},next:null};var c={};return o.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ns,lastRenderedState:c},next:null},i.memoizedState=o,i=i.alternate,i!==null&&(i.memoizedState=o),o}function wb(i){var o=xb(i);o.next===null&&(o=i.alternate.memoizedState),To(i,o.next.queue,{},Yn())}function zd(){return sn(Vo)}function Sb(){return Rt().memoizedState}function kb(){return Rt().memoizedState}function q2(i){for(var o=i.return;o!==null;){switch(o.tag){case 24:case 3:var c=Yn();i=Cs(c);var d=Ts(o,i,c);d!==null&&(zn(d,o,c),wo(d,o,c)),o={cache:hd()},i.payload=o;return}o=o.return}}function F2(i,o,c){var d=Yn();c={lane:d,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},$c(i)?Cb(o,c):(c=td(i,o,c,d),c!==null&&(zn(c,i,d),Tb(c,o,d)))}function Eb(i,o,c){var d=Yn();To(i,o,c,d)}function To(i,o,c,d){var _={lane:d,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null};if($c(i))Cb(o,_);else{var b=i.alternate;if(i.lanes===0&&(b===null||b.lanes===0)&&(b=o.lastRenderedReducer,b!==null))try{var k=o.lastRenderedState,A=b(k,c);if(_.hasEagerState=!0,_.eagerState=A,Hn(A,k))return vc(i,o,_,0),pt===null&&bc(),!1}catch{}if(c=td(i,o,_,d),c!==null)return zn(c,i,d),Tb(c,o,d),!0}return!1}function Pd(i,o,c,d){if(d={lane:2,revertLane:gp(),gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},$c(i)){if(o)throw Error(r(479))}else o=td(i,c,d,2),o!==null&&zn(o,i,2)}function $c(i){var o=i.alternate;return i===ze||o!==null&&o===ze}function Cb(i,o){la=Mc=!0;var c=i.pending;c===null?o.next=o:(o.next=c.next,c.next=o),i.pending=o}function Tb(i,o,c){if((c&4194048)!==0){var d=o.lanes;d&=i.pendingLanes,c|=d,o.lanes=c,I0(i,c)}}var Ao={readContext:sn,use:jc,useCallback:kt,useContext:kt,useEffect:kt,useImperativeHandle:kt,useLayoutEffect:kt,useInsertionEffect:kt,useMemo:kt,useReducer:kt,useRef:kt,useState:kt,useDebugValue:kt,useDeferredValue:kt,useTransition:kt,useSyncExternalStore:kt,useId:kt,useHostTransitionStatus:kt,useFormState:kt,useActionState:kt,useOptimistic:kt,useMemoCache:kt,useCacheRefresh:kt};Ao.useEffectEvent=kt;var Ab={readContext:sn,use:jc,useCallback:function(i,o){return Sn().memoizedState=[i,o===void 0?null:o],i},useContext:sn,useEffect:fb,useImperativeHandle:function(i,o,c){c=c!=null?c.concat([i]):null,Pc(4194308,4,mb.bind(null,o,i),c)},useLayoutEffect:function(i,o){return Pc(4194308,4,i,o)},useInsertionEffect:function(i,o){Pc(4,2,i,o)},useMemo:function(i,o){var c=Sn();o=o===void 0?null:o;var d=i();if(yi){On(!0);try{i()}finally{On(!1)}}return c.memoizedState=[d,o],d},useReducer:function(i,o,c){var d=Sn();if(c!==void 0){var _=c(o);if(yi){On(!0);try{c(o)}finally{On(!1)}}}else _=o;return d.memoizedState=d.baseState=_,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:_},d.queue=i,i=i.dispatch=F2.bind(null,ze,i),[d.memoizedState,i]},useRef:function(i){var o=Sn();return i={current:i},o.memoizedState=i},useState:function(i){i=Nd(i);var o=i.queue,c=Eb.bind(null,ze,o);return o.dispatch=c,[i.memoizedState,c]},useDebugValue:Dd,useDeferredValue:function(i,o){var c=Sn();return Ld(c,i,o)},useTransition:function(){var i=Nd(!1);return i=vb.bind(null,ze,i.queue,!0,!1),Sn().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,o,c){var d=ze,_=Sn();if(Je){if(c===void 0)throw Error(r(407));c=c()}else{if(c=o(),pt===null)throw Error(r(349));(Ge&127)!==0||Q_(d,o,c)}_.memoizedState=c;var b={value:c,getSnapshot:o};return _.queue=b,fb(Y_.bind(null,d,b,i),[i]),d.flags|=2048,ua(9,{destroy:void 0},J_.bind(null,d,b,c,o),null),c},useId:function(){var i=Sn(),o=pt.identifierPrefix;if(Je){var c=Ir,d=Nr;c=(d&~(1<<32-dt(d)-1)).toString(32)+c,o="_"+o+"R_"+c,c=Dc++,0<c&&(o+="H"+c.toString(32)),o+="_"}else c=j2++,o="_"+o+"r_"+c.toString(32)+"_";return i.memoizedState=o},useHostTransitionStatus:zd,useFormState:ab,useActionState:ab,useOptimistic:function(i){var o=Sn();o.memoizedState=o.baseState=i;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=c,o=Pd.bind(null,ze,!0,c),c.dispatch=o,[i,o]},useMemoCache:Ad,useCacheRefresh:function(){return Sn().memoizedState=q2.bind(null,ze)},useEffectEvent:function(i){var o=Sn(),c={impl:i};return o.memoizedState=c,function(){if((st&2)!==0)throw Error(r(440));return c.impl.apply(void 0,arguments)}}},Bd={readContext:sn,use:jc,useCallback:yb,useContext:sn,useEffect:Md,useImperativeHandle:gb,useInsertionEffect:db,useLayoutEffect:pb,useMemo:_b,useReducer:zc,useRef:ub,useState:function(){return zc(ns)},useDebugValue:Dd,useDeferredValue:function(i,o){var c=Rt();return bb(c,ut.memoizedState,i,o)},useTransition:function(){var i=zc(ns)[0],o=Rt().memoizedState;return[typeof i=="boolean"?i:Co(i),o]},useSyncExternalStore:Z_,useId:Sb,useHostTransitionStatus:zd,useFormState:ob,useActionState:ob,useOptimistic:function(i,o){var c=Rt();return eb(c,ut,i,o)},useMemoCache:Ad,useCacheRefresh:kb};Bd.useEffectEvent=hb;var Rb={readContext:sn,use:jc,useCallback:yb,useContext:sn,useEffect:Md,useImperativeHandle:gb,useInsertionEffect:db,useLayoutEffect:pb,useMemo:_b,useReducer:Od,useRef:ub,useState:function(){return Od(ns)},useDebugValue:Dd,useDeferredValue:function(i,o){var c=Rt();return ut===null?Ld(c,i,o):bb(c,ut.memoizedState,i,o)},useTransition:function(){var i=Od(ns)[0],o=Rt().memoizedState;return[typeof i=="boolean"?i:Co(i),o]},useSyncExternalStore:Z_,useId:Sb,useHostTransitionStatus:zd,useFormState:cb,useActionState:cb,useOptimistic:function(i,o){var c=Rt();return ut!==null?eb(c,ut,i,o):(c.baseState=i,[i,c.queue.dispatch])},useMemoCache:Ad,useCacheRefresh:kb};Rb.useEffectEvent=hb;function $d(i,o,c,d){o=i.memoizedState,c=c(d,o),c=c==null?o:p({},o,c),i.memoizedState=c,i.lanes===0&&(i.updateQueue.baseState=c)}var Ud={enqueueSetState:function(i,o,c){i=i._reactInternals;var d=Yn(),_=Cs(d);_.payload=o,c!=null&&(_.callback=c),o=Ts(i,_,d),o!==null&&(zn(o,i,d),wo(o,i,d))},enqueueReplaceState:function(i,o,c){i=i._reactInternals;var d=Yn(),_=Cs(d);_.tag=1,_.payload=o,c!=null&&(_.callback=c),o=Ts(i,_,d),o!==null&&(zn(o,i,d),wo(o,i,d))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var c=Yn(),d=Cs(c);d.tag=2,o!=null&&(d.callback=o),o=Ts(i,d,c),o!==null&&(zn(o,i,c),wo(o,i,c))}};function Ob(i,o,c,d,_,b,k){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(d,b,k):o.prototype&&o.prototype.isPureReactComponent?!po(c,d)||!po(_,b):!0}function Nb(i,o,c,d){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(c,d),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(c,d),o.state!==i&&Ud.enqueueReplaceState(o,o.state,null)}function _i(i,o){var c=o;if("ref"in o){c={};for(var d in o)d!=="ref"&&(c[d]=o[d])}if(i=i.defaultProps){c===o&&(c=p({},c));for(var _ in i)c[_]===void 0&&(c[_]=i[_])}return c}function Ib(i){_c(i)}function Mb(i){console.error(i)}function Db(i){_c(i)}function Uc(i,o){try{var c=i.onUncaughtError;c(o.value,{componentStack:o.stack})}catch(d){setTimeout(function(){throw d})}}function Lb(i,o,c){try{var d=i.onCaughtError;d(c.value,{componentStack:c.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(_){setTimeout(function(){throw _})}}function qd(i,o,c){return c=Cs(c),c.tag=3,c.payload={element:null},c.callback=function(){Uc(i,o)},c}function jb(i){return i=Cs(i),i.tag=3,i}function zb(i,o,c,d){var _=c.type.getDerivedStateFromError;if(typeof _=="function"){var b=d.value;i.payload=function(){return _(b)},i.callback=function(){Lb(o,c,d)}}var k=c.stateNode;k!==null&&typeof k.componentDidCatch=="function"&&(i.callback=function(){Lb(o,c,d),typeof _!="function"&&(Ms===null?Ms=new Set([this]):Ms.add(this));var A=d.stack;this.componentDidCatch(d.value,{componentStack:A!==null?A:""})})}function V2(i,o,c,d,_){if(c.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(o=c.alternate,o!==null&&na(o,c,_,!0),c=Kn.current,c!==null){switch(c.tag){case 31:case 13:return hr===null?Wc():c.alternate===null&&Et===0&&(Et=3),c.flags&=-257,c.flags|=65536,c.lanes=_,d===Ac?c.flags|=16384:(o=c.updateQueue,o===null?c.updateQueue=new Set([d]):o.add(d),dp(i,d,_)),!1;case 22:return c.flags|=65536,d===Ac?c.flags|=16384:(o=c.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([d])},c.updateQueue=o):(c=o.retryQueue,c===null?o.retryQueue=new Set([d]):c.add(d)),dp(i,d,_)),!1}throw Error(r(435,c.tag))}return dp(i,d,_),Wc(),!1}if(Je)return o=Kn.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=_,d!==od&&(i=Error(r(422),{cause:d}),yo(lr(i,c)))):(d!==od&&(o=Error(r(423),{cause:d}),yo(lr(o,c))),i=i.current.alternate,i.flags|=65536,_&=-_,i.lanes|=_,d=lr(d,c),_=qd(i.stateNode,d,_),_d(i,_),Et!==4&&(Et=2)),!1;var b=Error(r(520),{cause:d});if(b=lr(b,c),jo===null?jo=[b]:jo.push(b),Et!==4&&(Et=2),o===null)return!0;d=lr(d,c),c=o;do{switch(c.tag){case 3:return c.flags|=65536,i=_&-_,c.lanes|=i,i=qd(c.stateNode,d,i),_d(c,i),!1;case 1:if(o=c.type,b=c.stateNode,(c.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Ms===null||!Ms.has(b))))return c.flags|=65536,_&=-_,c.lanes|=_,_=jb(_),zb(_,i,c,d),_d(c,_),!1}c=c.return}while(c!==null);return!1}var Fd=Error(r(461)),It=!1;function an(i,o,c,d){o.child=i===null?U_(o,null,c,d):gi(o,i.child,c,d)}function Pb(i,o,c,d,_){c=c.render;var b=o.ref;if("ref"in d){var k={};for(var A in d)A!=="ref"&&(k[A]=d[A])}else k=d;return hi(o),d=kd(i,o,c,k,b,_),A=Ed(),i!==null&&!It?(Cd(i,o,_),rs(i,o,_)):(Je&&A&&id(o),o.flags|=1,an(i,o,d,_),o.child)}function Bb(i,o,c,d,_){if(i===null){var b=c.type;return typeof b=="function"&&!nd(b)&&b.defaultProps===void 0&&c.compare===null?(o.tag=15,o.type=b,$b(i,o,b,d,_)):(i=wc(c.type,null,d,o,o.mode,_),i.ref=o.ref,i.return=o,o.child=i)}if(b=i.child,!Yd(i,_)){var k=b.memoizedProps;if(c=c.compare,c=c!==null?c:po,c(k,d)&&i.ref===o.ref)return rs(i,o,_)}return o.flags|=1,i=Yr(b,d),i.ref=o.ref,i.return=o,o.child=i}function $b(i,o,c,d,_){if(i!==null){var b=i.memoizedProps;if(po(b,d)&&i.ref===o.ref)if(It=!1,o.pendingProps=d=b,Yd(i,_))(i.flags&131072)!==0&&(It=!0);else return o.lanes=i.lanes,rs(i,o,_)}return Vd(i,o,c,d,_)}function Ub(i,o,c,d){var _=d.children,b=i!==null?i.memoizedState:null;if(i===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.mode==="hidden"){if((o.flags&128)!==0){if(b=b!==null?b.baseLanes|c:c,i!==null){for(d=o.child=i.child,_=0;d!==null;)_=_|d.lanes|d.childLanes,d=d.sibling;d=_&~b}else d=0,o.child=null;return qb(i,o,b,c,d)}if((c&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},i!==null&&Cc(o,b!==null?b.cachePool:null),b!==null?V_(o,b):vd(),H_(o);else return d=o.lanes=536870912,qb(i,o,b!==null?b.baseLanes|c:c,c,d)}else b!==null?(Cc(o,b.cachePool),V_(o,b),Rs(),o.memoizedState=null):(i!==null&&Cc(o,null),vd(),Rs());return an(i,o,_,c),o.child}function Ro(i,o){return i!==null&&i.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function qb(i,o,c,d,_){var b=pd();return b=b===null?null:{parent:Ot._currentValue,pool:b},o.memoizedState={baseLanes:c,cachePool:b},i!==null&&Cc(o,null),vd(),H_(o),i!==null&&na(i,o,d,!0),o.childLanes=_,null}function qc(i,o){return o=Vc({mode:o.mode,children:o.children},i.mode),o.ref=i.ref,i.child=o,o.return=i,o}function Fb(i,o,c){return gi(o,i.child,null,c),i=qc(o,o.pendingProps),i.flags|=2,Zn(o),o.memoizedState=null,i}function H2(i,o,c){var d=o.pendingProps,_=(o.flags&128)!==0;if(o.flags&=-129,i===null){if(Je){if(d.mode==="hidden")return i=qc(o,d),o.lanes=536870912,Ro(null,i);if(wd(o),(i=bt)?(i=tx(i,fr),i=i!==null&&i.data==="&"?i:null,i!==null&&(o.memoizedState={dehydrated:i,treeContext:xs!==null?{id:Nr,overflow:Ir}:null,retryLane:536870912,hydrationErrors:null},c=C_(i),c.return=o,o.child=c,rn=o,bt=null)):i=null,i===null)throw Ss(o);return o.lanes=536870912,null}return qc(o,d)}var b=i.memoizedState;if(b!==null){var k=b.dehydrated;if(wd(o),_)if(o.flags&256)o.flags&=-257,o=Fb(i,o,c);else if(o.memoizedState!==null)o.child=i.child,o.flags|=128,o=null;else throw Error(r(558));else if(It||na(i,o,c,!1),_=(c&i.childLanes)!==0,It||_){if(d=pt,d!==null&&(k=M0(d,c),k!==0&&k!==b.retryLane))throw b.retryLane=k,li(i,k),zn(d,i,k),Fd;Wc(),o=Fb(i,o,c)}else i=b.treeContext,bt=dr(k.nextSibling),rn=o,Je=!0,ws=null,fr=!1,i!==null&&R_(o,i),o=qc(o,d),o.flags|=4096;return o}return i=Yr(i.child,{mode:d.mode,children:d.children}),i.ref=o.ref,o.child=i,i.return=o,i}function Fc(i,o){var c=o.ref;if(c===null)i!==null&&i.ref!==null&&(o.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(r(284));(i===null||i.ref!==c)&&(o.flags|=4194816)}}function Vd(i,o,c,d,_){return hi(o),c=kd(i,o,c,d,void 0,_),d=Ed(),i!==null&&!It?(Cd(i,o,_),rs(i,o,_)):(Je&&d&&id(o),o.flags|=1,an(i,o,c,_),o.child)}function Vb(i,o,c,d,_,b){return hi(o),o.updateQueue=null,c=K_(o,d,c,_),G_(i),d=Ed(),i!==null&&!It?(Cd(i,o,b),rs(i,o,b)):(Je&&d&&id(o),o.flags|=1,an(i,o,c,b),o.child)}function Hb(i,o,c,d,_){if(hi(o),o.stateNode===null){var b=Xi,k=c.contextType;typeof k=="object"&&k!==null&&(b=sn(k)),b=new c(d,b),o.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,b.updater=Ud,o.stateNode=b,b._reactInternals=o,b=o.stateNode,b.props=d,b.state=o.memoizedState,b.refs={},gd(o),k=c.contextType,b.context=typeof k=="object"&&k!==null?sn(k):Xi,b.state=o.memoizedState,k=c.getDerivedStateFromProps,typeof k=="function"&&($d(o,c,k,d),b.state=o.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(k=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),k!==b.state&&Ud.enqueueReplaceState(b,b.state,null),ko(o,d,b,_),So(),b.state=o.memoizedState),typeof b.componentDidMount=="function"&&(o.flags|=4194308),d=!0}else if(i===null){b=o.stateNode;var A=o.memoizedProps,$=_i(c,A);b.props=$;var W=b.context,oe=c.contextType;k=Xi,typeof oe=="object"&&oe!==null&&(k=sn(oe));var ce=c.getDerivedStateFromProps;oe=typeof ce=="function"||typeof b.getSnapshotBeforeUpdate=="function",A=o.pendingProps!==A,oe||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(A||W!==k)&&Nb(o,b,d,k),Es=!1;var te=o.memoizedState;b.state=te,ko(o,d,b,_),So(),W=o.memoizedState,A||te!==W||Es?(typeof ce=="function"&&($d(o,c,ce,d),W=o.memoizedState),($=Es||Ob(o,c,$,d,te,W,k))?(oe||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(o.flags|=4194308)):(typeof b.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=d,o.memoizedState=W),b.props=d,b.state=W,b.context=k,d=$):(typeof b.componentDidMount=="function"&&(o.flags|=4194308),d=!1)}else{b=o.stateNode,yd(i,o),k=o.memoizedProps,oe=_i(c,k),b.props=oe,ce=o.pendingProps,te=b.context,W=c.contextType,$=Xi,typeof W=="object"&&W!==null&&($=sn(W)),A=c.getDerivedStateFromProps,(W=typeof A=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(k!==ce||te!==$)&&Nb(o,b,d,$),Es=!1,te=o.memoizedState,b.state=te,ko(o,d,b,_),So();var re=o.memoizedState;k!==ce||te!==re||Es||i!==null&&i.dependencies!==null&&kc(i.dependencies)?(typeof A=="function"&&($d(o,c,A,d),re=o.memoizedState),(oe=Es||Ob(o,c,oe,d,te,re,$)||i!==null&&i.dependencies!==null&&kc(i.dependencies))?(W||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(d,re,$),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(d,re,$)),typeof b.componentDidUpdate=="function"&&(o.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof b.componentDidUpdate!="function"||k===i.memoizedProps&&te===i.memoizedState||(o.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||k===i.memoizedProps&&te===i.memoizedState||(o.flags|=1024),o.memoizedProps=d,o.memoizedState=re),b.props=d,b.state=re,b.context=$,d=oe):(typeof b.componentDidUpdate!="function"||k===i.memoizedProps&&te===i.memoizedState||(o.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||k===i.memoizedProps&&te===i.memoizedState||(o.flags|=1024),d=!1)}return b=d,Fc(i,o),d=(o.flags&128)!==0,b||d?(b=o.stateNode,c=d&&typeof c.getDerivedStateFromError!="function"?null:b.render(),o.flags|=1,i!==null&&d?(o.child=gi(o,i.child,null,_),o.child=gi(o,null,c,_)):an(i,o,c,_),o.memoizedState=b.state,i=o.child):i=rs(i,o,_),i}function Gb(i,o,c,d){return ui(),o.flags|=256,an(i,o,c,d),o.child}var Hd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Gd(i){return{baseLanes:i,cachePool:L_()}}function Kd(i,o,c){return i=i!==null?i.childLanes&~c:0,o&&(i|=Jn),i}function Kb(i,o,c){var d=o.pendingProps,_=!1,b=(o.flags&128)!==0,k;if((k=b)||(k=i!==null&&i.memoizedState===null?!1:(At.current&2)!==0),k&&(_=!0,o.flags&=-129),k=(o.flags&32)!==0,o.flags&=-33,i===null){if(Je){if(_?As(o):Rs(),(i=bt)?(i=tx(i,fr),i=i!==null&&i.data!=="&"?i:null,i!==null&&(o.memoizedState={dehydrated:i,treeContext:xs!==null?{id:Nr,overflow:Ir}:null,retryLane:536870912,hydrationErrors:null},c=C_(i),c.return=o,o.child=c,rn=o,bt=null)):i=null,i===null)throw Ss(o);return Rp(i)?o.lanes=32:o.lanes=536870912,null}var A=d.children;return d=d.fallback,_?(Rs(),_=o.mode,A=Vc({mode:"hidden",children:A},_),d=ci(d,_,c,null),A.return=o,d.return=o,A.sibling=d,o.child=A,d=o.child,d.memoizedState=Gd(c),d.childLanes=Kd(i,k,c),o.memoizedState=Hd,Ro(null,d)):(As(o),Zd(o,A))}var $=i.memoizedState;if($!==null&&(A=$.dehydrated,A!==null)){if(b)o.flags&256?(As(o),o.flags&=-257,o=Qd(i,o,c)):o.memoizedState!==null?(Rs(),o.child=i.child,o.flags|=128,o=null):(Rs(),A=d.fallback,_=o.mode,d=Vc({mode:"visible",children:d.children},_),A=ci(A,_,c,null),A.flags|=2,d.return=o,A.return=o,d.sibling=A,o.child=d,gi(o,i.child,null,c),d=o.child,d.memoizedState=Gd(c),d.childLanes=Kd(i,k,c),o.memoizedState=Hd,o=Ro(null,d));else if(As(o),Rp(A)){if(k=A.nextSibling&&A.nextSibling.dataset,k)var W=k.dgst;k=W,d=Error(r(419)),d.stack="",d.digest=k,yo({value:d,source:null,stack:null}),o=Qd(i,o,c)}else if(It||na(i,o,c,!1),k=(c&i.childLanes)!==0,It||k){if(k=pt,k!==null&&(d=M0(k,c),d!==0&&d!==$.retryLane))throw $.retryLane=d,li(i,d),zn(k,i,d),Fd;Ap(A)||Wc(),o=Qd(i,o,c)}else Ap(A)?(o.flags|=192,o.child=i.child,o=null):(i=$.treeContext,bt=dr(A.nextSibling),rn=o,Je=!0,ws=null,fr=!1,i!==null&&R_(o,i),o=Zd(o,d.children),o.flags|=4096);return o}return _?(Rs(),A=d.fallback,_=o.mode,$=i.child,W=$.sibling,d=Yr($,{mode:"hidden",children:d.children}),d.subtreeFlags=$.subtreeFlags&65011712,W!==null?A=Yr(W,A):(A=ci(A,_,c,null),A.flags|=2),A.return=o,d.return=o,d.sibling=A,o.child=d,Ro(null,d),d=o.child,A=i.child.memoizedState,A===null?A=Gd(c):(_=A.cachePool,_!==null?($=Ot._currentValue,_=_.parent!==$?{parent:$,pool:$}:_):_=L_(),A={baseLanes:A.baseLanes|c,cachePool:_}),d.memoizedState=A,d.childLanes=Kd(i,k,c),o.memoizedState=Hd,Ro(i.child,d)):(As(o),c=i.child,i=c.sibling,c=Yr(c,{mode:"visible",children:d.children}),c.return=o,c.sibling=null,i!==null&&(k=o.deletions,k===null?(o.deletions=[i],o.flags|=16):k.push(i)),o.child=c,o.memoizedState=null,c)}function Zd(i,o){return o=Vc({mode:"visible",children:o},i.mode),o.return=i,i.child=o}function Vc(i,o){return i=Gn(22,i,null,o),i.lanes=0,i}function Qd(i,o,c){return gi(o,i.child,null,c),i=Zd(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function Zb(i,o,c){i.lanes|=o;var d=i.alternate;d!==null&&(d.lanes|=o),ud(i.return,o,c)}function Jd(i,o,c,d,_,b){var k=i.memoizedState;k===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:d,tail:c,tailMode:_,treeForkCount:b}:(k.isBackwards=o,k.rendering=null,k.renderingStartTime=0,k.last=d,k.tail=c,k.tailMode=_,k.treeForkCount=b)}function Qb(i,o,c){var d=o.pendingProps,_=d.revealOrder,b=d.tail;d=d.children;var k=At.current,A=(k&2)!==0;if(A?(k=k&1|2,o.flags|=128):k&=1,R(At,k),an(i,o,d,c),d=Je?go:0,!A&&i!==null&&(i.flags&128)!==0)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Zb(i,c,o);else if(i.tag===19)Zb(i,c,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(_){case"forwards":for(c=o.child,_=null;c!==null;)i=c.alternate,i!==null&&Ic(i)===null&&(_=c),c=c.sibling;c=_,c===null?(_=o.child,o.child=null):(_=c.sibling,c.sibling=null),Jd(o,!1,_,c,b,d);break;case"backwards":case"unstable_legacy-backwards":for(c=null,_=o.child,o.child=null;_!==null;){if(i=_.alternate,i!==null&&Ic(i)===null){o.child=_;break}i=_.sibling,_.sibling=c,c=_,_=i}Jd(o,!0,c,null,b,d);break;case"together":Jd(o,!1,null,null,void 0,d);break;default:o.memoizedState=null}return o.child}function rs(i,o,c){if(i!==null&&(o.dependencies=i.dependencies),Is|=o.lanes,(c&o.childLanes)===0)if(i!==null){if(na(i,o,c,!1),(c&o.childLanes)===0)return null}else return null;if(i!==null&&o.child!==i.child)throw Error(r(153));if(o.child!==null){for(i=o.child,c=Yr(i,i.pendingProps),o.child=c,c.return=o;i.sibling!==null;)i=i.sibling,c=c.sibling=Yr(i,i.pendingProps),c.return=o;c.sibling=null}return o.child}function Yd(i,o){return(i.lanes&o)!==0?!0:(i=i.dependencies,!!(i!==null&&kc(i)))}function G2(i,o,c){switch(o.tag){case 3:Ne(o,o.stateNode.containerInfo),ks(o,Ot,i.memoizedState.cache),ui();break;case 27:case 5:rt(o);break;case 4:Ne(o,o.stateNode.containerInfo);break;case 10:ks(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,wd(o),null;break;case 13:var d=o.memoizedState;if(d!==null)return d.dehydrated!==null?(As(o),o.flags|=128,null):(c&o.child.childLanes)!==0?Kb(i,o,c):(As(o),i=rs(i,o,c),i!==null?i.sibling:null);As(o);break;case 19:var _=(i.flags&128)!==0;if(d=(c&o.childLanes)!==0,d||(na(i,o,c,!1),d=(c&o.childLanes)!==0),_){if(d)return Qb(i,o,c);o.flags|=128}if(_=o.memoizedState,_!==null&&(_.rendering=null,_.tail=null,_.lastEffect=null),R(At,At.current),d)break;return null;case 22:return o.lanes=0,Ub(i,o,c,o.pendingProps);case 24:ks(o,Ot,i.memoizedState.cache)}return rs(i,o,c)}function Jb(i,o,c){if(i!==null)if(i.memoizedProps!==o.pendingProps)It=!0;else{if(!Yd(i,c)&&(o.flags&128)===0)return It=!1,G2(i,o,c);It=(i.flags&131072)!==0}else It=!1,Je&&(o.flags&1048576)!==0&&A_(o,go,o.index);switch(o.lanes=0,o.tag){case 16:e:{var d=o.pendingProps;if(i=pi(o.elementType),o.type=i,typeof i=="function")nd(i)?(d=_i(i,d),o.tag=1,o=Hb(null,o,i,d,c)):(o.tag=0,o=Vd(null,o,i,d,c));else{if(i!=null){var _=i.$$typeof;if(_===L){o.tag=11,o=Pb(null,o,i,d,c);break e}else if(_===B){o.tag=14,o=Bb(null,o,i,d,c);break e}}throw o=P(i)||i,Error(r(306,o,""))}}return o;case 0:return Vd(i,o,o.type,o.pendingProps,c);case 1:return d=o.type,_=_i(d,o.pendingProps),Hb(i,o,d,_,c);case 3:e:{if(Ne(o,o.stateNode.containerInfo),i===null)throw Error(r(387));d=o.pendingProps;var b=o.memoizedState;_=b.element,yd(i,o),ko(o,d,null,c);var k=o.memoizedState;if(d=k.cache,ks(o,Ot,d),d!==b.cache&&fd(o,[Ot],c,!0),So(),d=k.element,b.isDehydrated)if(b={element:d,isDehydrated:!1,cache:k.cache},o.updateQueue.baseState=b,o.memoizedState=b,o.flags&256){o=Gb(i,o,d,c);break e}else if(d!==_){_=lr(Error(r(424)),o),yo(_),o=Gb(i,o,d,c);break e}else for(i=o.stateNode.containerInfo,i.nodeType===9?i=i.body:i=i.nodeName==="HTML"?i.ownerDocument.body:i,bt=dr(i.firstChild),rn=o,Je=!0,ws=null,fr=!0,c=U_(o,null,d,c),o.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(ui(),d===_){o=rs(i,o,c);break e}an(i,o,d,c)}o=o.child}return o;case 26:return Fc(i,o),i===null?(c=ox(o.type,null,o.pendingProps,null))?o.memoizedState=c:Je||(c=o.type,i=o.pendingProps,d=au(pe.current).createElement(c),d[nn]=o,d[Nn]=i,on(d,c,i),Kt(d),o.stateNode=d):o.memoizedState=ox(o.type,i.memoizedProps,o.pendingProps,i.memoizedState),null;case 27:return rt(o),i===null&&Je&&(d=o.stateNode=sx(o.type,o.pendingProps,pe.current),rn=o,fr=!0,_=bt,zs(o.type)?(Op=_,bt=dr(d.firstChild)):bt=_),an(i,o,o.pendingProps.children,c),Fc(i,o),i===null&&(o.flags|=4194304),o.child;case 5:return i===null&&Je&&((_=d=bt)&&(d=wR(d,o.type,o.pendingProps,fr),d!==null?(o.stateNode=d,rn=o,bt=dr(d.firstChild),fr=!1,_=!0):_=!1),_||Ss(o)),rt(o),_=o.type,b=o.pendingProps,k=i!==null?i.memoizedProps:null,d=b.children,Ep(_,b)?d=null:k!==null&&Ep(_,k)&&(o.flags|=32),o.memoizedState!==null&&(_=kd(i,o,z2,null,null,c),Vo._currentValue=_),Fc(i,o),an(i,o,d,c),o.child;case 6:return i===null&&Je&&((i=c=bt)&&(c=SR(c,o.pendingProps,fr),c!==null?(o.stateNode=c,rn=o,bt=null,i=!0):i=!1),i||Ss(o)),null;case 13:return Kb(i,o,c);case 4:return Ne(o,o.stateNode.containerInfo),d=o.pendingProps,i===null?o.child=gi(o,null,d,c):an(i,o,d,c),o.child;case 11:return Pb(i,o,o.type,o.pendingProps,c);case 7:return an(i,o,o.pendingProps,c),o.child;case 8:return an(i,o,o.pendingProps.children,c),o.child;case 12:return an(i,o,o.pendingProps.children,c),o.child;case 10:return d=o.pendingProps,ks(o,o.type,d.value),an(i,o,d.children,c),o.child;case 9:return _=o.type._context,d=o.pendingProps.children,hi(o),_=sn(_),d=d(_),o.flags|=1,an(i,o,d,c),o.child;case 14:return Bb(i,o,o.type,o.pendingProps,c);case 15:return $b(i,o,o.type,o.pendingProps,c);case 19:return Qb(i,o,c);case 31:return H2(i,o,c);case 22:return Ub(i,o,c,o.pendingProps);case 24:return hi(o),d=sn(Ot),i===null?(_=pd(),_===null&&(_=pt,b=hd(),_.pooledCache=b,b.refCount++,b!==null&&(_.pooledCacheLanes|=c),_=b),o.memoizedState={parent:d,cache:_},gd(o),ks(o,Ot,_)):((i.lanes&c)!==0&&(yd(i,o),ko(o,null,null,c),So()),_=i.memoizedState,b=o.memoizedState,_.parent!==d?(_={parent:d,cache:d},o.memoizedState=_,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=_),ks(o,Ot,d)):(d=b.cache,ks(o,Ot,d),d!==_.cache&&fd(o,[Ot],c,!0))),an(i,o,o.pendingProps.children,c),o.child;case 29:throw o.pendingProps}throw Error(r(156,o.tag))}function ss(i){i.flags|=4}function Xd(i,o,c,d,_){if((o=(i.mode&32)!==0)&&(o=!1),o){if(i.flags|=16777216,(_&335544128)===_)if(i.stateNode.complete)i.flags|=8192;else if(Sv())i.flags|=8192;else throw mi=Ac,md}else i.flags&=-16777217}function Yb(i,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!hx(o))if(Sv())i.flags|=8192;else throw mi=Ac,md}function Hc(i,o){o!==null&&(i.flags|=4),i.flags&16384&&(o=i.tag!==22?O0():536870912,i.lanes|=o,pa|=o)}function Oo(i,o){if(!Je)switch(i.tailMode){case"hidden":o=i.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?i.tail=null:c.sibling=null;break;case"collapsed":c=i.tail;for(var d=null;c!==null;)c.alternate!==null&&(d=c),c=c.sibling;d===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:d.sibling=null}}function vt(i){var o=i.alternate!==null&&i.alternate.child===i.child,c=0,d=0;if(o)for(var _=i.child;_!==null;)c|=_.lanes|_.childLanes,d|=_.subtreeFlags&65011712,d|=_.flags&65011712,_.return=i,_=_.sibling;else for(_=i.child;_!==null;)c|=_.lanes|_.childLanes,d|=_.subtreeFlags,d|=_.flags,_.return=i,_=_.sibling;return i.subtreeFlags|=d,i.childLanes=c,o}function K2(i,o,c){var d=o.pendingProps;switch(ad(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vt(o),null;case 1:return vt(o),null;case 3:return c=o.stateNode,d=null,i!==null&&(d=i.memoizedState.cache),o.memoizedState.cache!==d&&(o.flags|=2048),es(Ot),Ie(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(i===null||i.child===null)&&(ta(o)?ss(o):i===null||i.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,ld())),vt(o),null;case 26:var _=o.type,b=o.memoizedState;return i===null?(ss(o),b!==null?(vt(o),Yb(o,b)):(vt(o),Xd(o,_,null,d,c))):b?b!==i.memoizedState?(ss(o),vt(o),Yb(o,b)):(vt(o),o.flags&=-16777217):(i=i.memoizedProps,i!==d&&ss(o),vt(o),Xd(o,_,i,d,c)),null;case 27:if(lt(o),c=pe.current,_=o.type,i!==null&&o.stateNode!=null)i.memoizedProps!==d&&ss(o);else{if(!d){if(o.stateNode===null)throw Error(r(166));return vt(o),null}i=ae.current,ta(o)?O_(o):(i=sx(_,d,c),o.stateNode=i,ss(o))}return vt(o),null;case 5:if(lt(o),_=o.type,i!==null&&o.stateNode!=null)i.memoizedProps!==d&&ss(o);else{if(!d){if(o.stateNode===null)throw Error(r(166));return vt(o),null}if(b=ae.current,ta(o))O_(o);else{var k=au(pe.current);switch(b){case 1:b=k.createElementNS("http://www.w3.org/2000/svg",_);break;case 2:b=k.createElementNS("http://www.w3.org/1998/Math/MathML",_);break;default:switch(_){case"svg":b=k.createElementNS("http://www.w3.org/2000/svg",_);break;case"math":b=k.createElementNS("http://www.w3.org/1998/Math/MathML",_);break;case"script":b=k.createElement("div"),b.innerHTML="<script><\/script>",b=b.removeChild(b.firstChild);break;case"select":b=typeof d.is=="string"?k.createElement("select",{is:d.is}):k.createElement("select"),d.multiple?b.multiple=!0:d.size&&(b.size=d.size);break;default:b=typeof d.is=="string"?k.createElement(_,{is:d.is}):k.createElement(_)}}b[nn]=o,b[Nn]=d;e:for(k=o.child;k!==null;){if(k.tag===5||k.tag===6)b.appendChild(k.stateNode);else if(k.tag!==4&&k.tag!==27&&k.child!==null){k.child.return=k,k=k.child;continue}if(k===o)break e;for(;k.sibling===null;){if(k.return===null||k.return===o)break e;k=k.return}k.sibling.return=k.return,k=k.sibling}o.stateNode=b;e:switch(on(b,_,d),_){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}d&&ss(o)}}return vt(o),Xd(o,o.type,i===null?null:i.memoizedProps,o.pendingProps,c),null;case 6:if(i&&o.stateNode!=null)i.memoizedProps!==d&&ss(o);else{if(typeof d!="string"&&o.stateNode===null)throw Error(r(166));if(i=pe.current,ta(o)){if(i=o.stateNode,c=o.memoizedProps,d=null,_=rn,_!==null)switch(_.tag){case 27:case 5:d=_.memoizedProps}i[nn]=o,i=!!(i.nodeValue===c||d!==null&&d.suppressHydrationWarning===!0||Kv(i.nodeValue,c)),i||Ss(o,!0)}else i=au(i).createTextNode(d),i[nn]=o,o.stateNode=i}return vt(o),null;case 31:if(c=o.memoizedState,i===null||i.memoizedState!==null){if(d=ta(o),c!==null){if(i===null){if(!d)throw Error(r(318));if(i=o.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(557));i[nn]=o}else ui(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;vt(o),i=!1}else c=ld(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=c),i=!0;if(!i)return o.flags&256?(Zn(o),o):(Zn(o),null);if((o.flags&128)!==0)throw Error(r(558))}return vt(o),null;case 13:if(d=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(_=ta(o),d!==null&&d.dehydrated!==null){if(i===null){if(!_)throw Error(r(318));if(_=o.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(r(317));_[nn]=o}else ui(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;vt(o),_=!1}else _=ld(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=_),_=!0;if(!_)return o.flags&256?(Zn(o),o):(Zn(o),null)}return Zn(o),(o.flags&128)!==0?(o.lanes=c,o):(c=d!==null,i=i!==null&&i.memoizedState!==null,c&&(d=o.child,_=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(_=d.alternate.memoizedState.cachePool.pool),b=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(b=d.memoizedState.cachePool.pool),b!==_&&(d.flags|=2048)),c!==i&&c&&(o.child.flags|=8192),Hc(o,o.updateQueue),vt(o),null);case 4:return Ie(),i===null&&vp(o.stateNode.containerInfo),vt(o),null;case 10:return es(o.type),vt(o),null;case 19:if(H(At),d=o.memoizedState,d===null)return vt(o),null;if(_=(o.flags&128)!==0,b=d.rendering,b===null)if(_)Oo(d,!1);else{if(Et!==0||i!==null&&(i.flags&128)!==0)for(i=o.child;i!==null;){if(b=Ic(i),b!==null){for(o.flags|=128,Oo(d,!1),i=b.updateQueue,o.updateQueue=i,Hc(o,i),o.subtreeFlags=0,i=c,c=o.child;c!==null;)E_(c,i),c=c.sibling;return R(At,At.current&1|2),Je&&Xr(o,d.treeForkCount),o.child}i=i.sibling}d.tail!==null&&xe()>Jc&&(o.flags|=128,_=!0,Oo(d,!1),o.lanes=4194304)}else{if(!_)if(i=Ic(b),i!==null){if(o.flags|=128,_=!0,i=i.updateQueue,o.updateQueue=i,Hc(o,i),Oo(d,!0),d.tail===null&&d.tailMode==="hidden"&&!b.alternate&&!Je)return vt(o),null}else 2*xe()-d.renderingStartTime>Jc&&c!==536870912&&(o.flags|=128,_=!0,Oo(d,!1),o.lanes=4194304);d.isBackwards?(b.sibling=o.child,o.child=b):(i=d.last,i!==null?i.sibling=b:o.child=b,d.last=b)}return d.tail!==null?(i=d.tail,d.rendering=i,d.tail=i.sibling,d.renderingStartTime=xe(),i.sibling=null,c=At.current,R(At,_?c&1|2:c&1),Je&&Xr(o,d.treeForkCount),i):(vt(o),null);case 22:case 23:return Zn(o),xd(),d=o.memoizedState!==null,i!==null?i.memoizedState!==null!==d&&(o.flags|=8192):d&&(o.flags|=8192),d?(c&536870912)!==0&&(o.flags&128)===0&&(vt(o),o.subtreeFlags&6&&(o.flags|=8192)):vt(o),c=o.updateQueue,c!==null&&Hc(o,c.retryQueue),c=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),d=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(d=o.memoizedState.cachePool.pool),d!==c&&(o.flags|=2048),i!==null&&H(di),null;case 24:return c=null,i!==null&&(c=i.memoizedState.cache),o.memoizedState.cache!==c&&(o.flags|=2048),es(Ot),vt(o),null;case 25:return null;case 30:return null}throw Error(r(156,o.tag))}function Z2(i,o){switch(ad(o),o.tag){case 1:return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return es(Ot),Ie(),i=o.flags,(i&65536)!==0&&(i&128)===0?(o.flags=i&-65537|128,o):null;case 26:case 27:case 5:return lt(o),null;case 31:if(o.memoizedState!==null){if(Zn(o),o.alternate===null)throw Error(r(340));ui()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 13:if(Zn(o),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(r(340));ui()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return H(At),null;case 4:return Ie(),null;case 10:return es(o.type),null;case 22:case 23:return Zn(o),xd(),i!==null&&H(di),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 24:return es(Ot),null;case 25:return null;default:return null}}function Xb(i,o){switch(ad(o),o.tag){case 3:es(Ot),Ie();break;case 26:case 27:case 5:lt(o);break;case 4:Ie();break;case 31:o.memoizedState!==null&&Zn(o);break;case 13:Zn(o);break;case 19:H(At);break;case 10:es(o.type);break;case 22:case 23:Zn(o),xd(),i!==null&&H(di);break;case 24:es(Ot)}}function No(i,o){try{var c=o.updateQueue,d=c!==null?c.lastEffect:null;if(d!==null){var _=d.next;c=_;do{if((c.tag&i)===i){d=void 0;var b=c.create,k=c.inst;d=b(),k.destroy=d}c=c.next}while(c!==_)}}catch(A){at(o,o.return,A)}}function Os(i,o,c){try{var d=o.updateQueue,_=d!==null?d.lastEffect:null;if(_!==null){var b=_.next;d=b;do{if((d.tag&i)===i){var k=d.inst,A=k.destroy;if(A!==void 0){k.destroy=void 0,_=o;var $=c,W=A;try{W()}catch(oe){at(_,$,oe)}}}d=d.next}while(d!==b)}}catch(oe){at(o,o.return,oe)}}function Wb(i){var o=i.updateQueue;if(o!==null){var c=i.stateNode;try{F_(o,c)}catch(d){at(i,i.return,d)}}}function ev(i,o,c){c.props=_i(i.type,i.memoizedProps),c.state=i.memoizedState;try{c.componentWillUnmount()}catch(d){at(i,o,d)}}function Io(i,o){try{var c=i.ref;if(c!==null){switch(i.tag){case 26:case 27:case 5:var d=i.stateNode;break;case 30:d=i.stateNode;break;default:d=i.stateNode}typeof c=="function"?i.refCleanup=c(d):c.current=d}}catch(_){at(i,o,_)}}function Mr(i,o){var c=i.ref,d=i.refCleanup;if(c!==null)if(typeof d=="function")try{d()}catch(_){at(i,o,_)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(_){at(i,o,_)}else c.current=null}function tv(i){var o=i.type,c=i.memoizedProps,d=i.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":c.autoFocus&&d.focus();break e;case"img":c.src?d.src=c.src:c.srcSet&&(d.srcset=c.srcSet)}}catch(_){at(i,i.return,_)}}function Wd(i,o,c){try{var d=i.stateNode;gR(d,i.type,c,o),d[Nn]=o}catch(_){at(i,i.return,_)}}function nv(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&zs(i.type)||i.tag===4}function ep(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||nv(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&zs(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function tp(i,o,c){var d=i.tag;if(d===5||d===6)i=i.stateNode,o?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(i,o):(o=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,o.appendChild(i),c=c._reactRootContainer,c!=null||o.onclick!==null||(o.onclick=Qr));else if(d!==4&&(d===27&&zs(i.type)&&(c=i.stateNode,o=null),i=i.child,i!==null))for(tp(i,o,c),i=i.sibling;i!==null;)tp(i,o,c),i=i.sibling}function Gc(i,o,c){var d=i.tag;if(d===5||d===6)i=i.stateNode,o?c.insertBefore(i,o):c.appendChild(i);else if(d!==4&&(d===27&&zs(i.type)&&(c=i.stateNode),i=i.child,i!==null))for(Gc(i,o,c),i=i.sibling;i!==null;)Gc(i,o,c),i=i.sibling}function rv(i){var o=i.stateNode,c=i.memoizedProps;try{for(var d=i.type,_=o.attributes;_.length;)o.removeAttributeNode(_[0]);on(o,d,c),o[nn]=i,o[Nn]=c}catch(b){at(i,i.return,b)}}var is=!1,Mt=!1,np=!1,sv=typeof WeakSet=="function"?WeakSet:Set,Zt=null;function Q2(i,o){if(i=i.containerInfo,Sp=du,i=g_(i),Qh(i)){if("selectionStart"in i)var c={start:i.selectionStart,end:i.selectionEnd};else e:{c=(c=i.ownerDocument)&&c.defaultView||window;var d=c.getSelection&&c.getSelection();if(d&&d.rangeCount!==0){c=d.anchorNode;var _=d.anchorOffset,b=d.focusNode;d=d.focusOffset;try{c.nodeType,b.nodeType}catch{c=null;break e}var k=0,A=-1,$=-1,W=0,oe=0,ce=i,te=null;t:for(;;){for(var re;ce!==c||_!==0&&ce.nodeType!==3||(A=k+_),ce!==b||d!==0&&ce.nodeType!==3||($=k+d),ce.nodeType===3&&(k+=ce.nodeValue.length),(re=ce.firstChild)!==null;)te=ce,ce=re;for(;;){if(ce===i)break t;if(te===c&&++W===_&&(A=k),te===b&&++oe===d&&($=k),(re=ce.nextSibling)!==null)break;ce=te,te=ce.parentNode}ce=re}c=A===-1||$===-1?null:{start:A,end:$}}else c=null}c=c||{start:0,end:0}}else c=null;for(kp={focusedElem:i,selectionRange:c},du=!1,Zt=o;Zt!==null;)if(o=Zt,i=o.child,(o.subtreeFlags&1028)!==0&&i!==null)i.return=o,Zt=i;else for(;Zt!==null;){switch(o=Zt,b=o.alternate,i=o.flags,o.tag){case 0:if((i&4)!==0&&(i=o.updateQueue,i=i!==null?i.events:null,i!==null))for(c=0;c<i.length;c++)_=i[c],_.ref.impl=_.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&b!==null){i=void 0,c=o,_=b.memoizedProps,b=b.memoizedState,d=c.stateNode;try{var _e=_i(c.type,_);i=d.getSnapshotBeforeUpdate(_e,b),d.__reactInternalSnapshotBeforeUpdate=i}catch(Re){at(c,c.return,Re)}}break;case 3:if((i&1024)!==0){if(i=o.stateNode.containerInfo,c=i.nodeType,c===9)Tp(i);else if(c===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":Tp(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(r(163))}if(i=o.sibling,i!==null){i.return=o.return,Zt=i;break}Zt=o.return}}function iv(i,o,c){var d=c.flags;switch(c.tag){case 0:case 11:case 15:os(i,c),d&4&&No(5,c);break;case 1:if(os(i,c),d&4)if(i=c.stateNode,o===null)try{i.componentDidMount()}catch(k){at(c,c.return,k)}else{var _=_i(c.type,o.memoizedProps);o=o.memoizedState;try{i.componentDidUpdate(_,o,i.__reactInternalSnapshotBeforeUpdate)}catch(k){at(c,c.return,k)}}d&64&&Wb(c),d&512&&Io(c,c.return);break;case 3:if(os(i,c),d&64&&(i=c.updateQueue,i!==null)){if(o=null,c.child!==null)switch(c.child.tag){case 27:case 5:o=c.child.stateNode;break;case 1:o=c.child.stateNode}try{F_(i,o)}catch(k){at(c,c.return,k)}}break;case 27:o===null&&d&4&&rv(c);case 26:case 5:os(i,c),o===null&&d&4&&tv(c),d&512&&Io(c,c.return);break;case 12:os(i,c);break;case 31:os(i,c),d&4&&lv(i,c);break;case 13:os(i,c),d&4&&cv(i,c),d&64&&(i=c.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(c=sR.bind(null,c),kR(i,c))));break;case 22:if(d=c.memoizedState!==null||is,!d){o=o!==null&&o.memoizedState!==null||Mt,_=is;var b=Mt;is=d,(Mt=o)&&!b?ls(i,c,(c.subtreeFlags&8772)!==0):os(i,c),is=_,Mt=b}break;case 30:break;default:os(i,c)}}function av(i){var o=i.alternate;o!==null&&(i.alternate=null,av(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&Ih(o)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var xt=null,Mn=!1;function as(i,o,c){for(c=c.child;c!==null;)ov(i,o,c),c=c.sibling}function ov(i,o,c){if(_t&&typeof _t.onCommitFiberUnmount=="function")try{_t.onCommitFiberUnmount(et,c)}catch{}switch(c.tag){case 26:Mt||Mr(c,o),as(i,o,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:Mt||Mr(c,o);var d=xt,_=Mn;zs(c.type)&&(xt=c.stateNode,Mn=!1),as(i,o,c),Uo(c.stateNode),xt=d,Mn=_;break;case 5:Mt||Mr(c,o);case 6:if(d=xt,_=Mn,xt=null,as(i,o,c),xt=d,Mn=_,xt!==null)if(Mn)try{(xt.nodeType===9?xt.body:xt.nodeName==="HTML"?xt.ownerDocument.body:xt).removeChild(c.stateNode)}catch(b){at(c,o,b)}else try{xt.removeChild(c.stateNode)}catch(b){at(c,o,b)}break;case 18:xt!==null&&(Mn?(i=xt,Wv(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,c.stateNode),wa(i)):Wv(xt,c.stateNode));break;case 4:d=xt,_=Mn,xt=c.stateNode.containerInfo,Mn=!0,as(i,o,c),xt=d,Mn=_;break;case 0:case 11:case 14:case 15:Os(2,c,o),Mt||Os(4,c,o),as(i,o,c);break;case 1:Mt||(Mr(c,o),d=c.stateNode,typeof d.componentWillUnmount=="function"&&ev(c,o,d)),as(i,o,c);break;case 21:as(i,o,c);break;case 22:Mt=(d=Mt)||c.memoizedState!==null,as(i,o,c),Mt=d;break;default:as(i,o,c)}}function lv(i,o){if(o.memoizedState===null&&(i=o.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{wa(i)}catch(c){at(o,o.return,c)}}}function cv(i,o){if(o.memoizedState===null&&(i=o.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{wa(i)}catch(c){at(o,o.return,c)}}function J2(i){switch(i.tag){case 31:case 13:case 19:var o=i.stateNode;return o===null&&(o=i.stateNode=new sv),o;case 22:return i=i.stateNode,o=i._retryCache,o===null&&(o=i._retryCache=new sv),o;default:throw Error(r(435,i.tag))}}function Kc(i,o){var c=J2(i);o.forEach(function(d){if(!c.has(d)){c.add(d);var _=iR.bind(null,i,d);d.then(_,_)}})}function Dn(i,o){var c=o.deletions;if(c!==null)for(var d=0;d<c.length;d++){var _=c[d],b=i,k=o,A=k;e:for(;A!==null;){switch(A.tag){case 27:if(zs(A.type)){xt=A.stateNode,Mn=!1;break e}break;case 5:xt=A.stateNode,Mn=!1;break e;case 3:case 4:xt=A.stateNode.containerInfo,Mn=!0;break e}A=A.return}if(xt===null)throw Error(r(160));ov(b,k,_),xt=null,Mn=!1,b=_.alternate,b!==null&&(b.return=null),_.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)uv(o,i),o=o.sibling}var Er=null;function uv(i,o){var c=i.alternate,d=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:Dn(o,i),Ln(i),d&4&&(Os(3,i,i.return),No(3,i),Os(5,i,i.return));break;case 1:Dn(o,i),Ln(i),d&512&&(Mt||c===null||Mr(c,c.return)),d&64&&is&&(i=i.updateQueue,i!==null&&(d=i.callbacks,d!==null&&(c=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=c===null?d:c.concat(d))));break;case 26:var _=Er;if(Dn(o,i),Ln(i),d&512&&(Mt||c===null||Mr(c,c.return)),d&4){var b=c!==null?c.memoizedState:null;if(d=i.memoizedState,c===null)if(d===null)if(i.stateNode===null){e:{d=i.type,c=i.memoizedProps,_=_.ownerDocument||_;t:switch(d){case"title":b=_.getElementsByTagName("title")[0],(!b||b[so]||b[nn]||b.namespaceURI==="http://www.w3.org/2000/svg"||b.hasAttribute("itemprop"))&&(b=_.createElement(d),_.head.insertBefore(b,_.querySelector("head > title"))),on(b,d,c),b[nn]=i,Kt(b),d=b;break e;case"link":var k=ux("link","href",_).get(d+(c.href||""));if(k){for(var A=0;A<k.length;A++)if(b=k[A],b.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&b.getAttribute("rel")===(c.rel==null?null:c.rel)&&b.getAttribute("title")===(c.title==null?null:c.title)&&b.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){k.splice(A,1);break t}}b=_.createElement(d),on(b,d,c),_.head.appendChild(b);break;case"meta":if(k=ux("meta","content",_).get(d+(c.content||""))){for(A=0;A<k.length;A++)if(b=k[A],b.getAttribute("content")===(c.content==null?null:""+c.content)&&b.getAttribute("name")===(c.name==null?null:c.name)&&b.getAttribute("property")===(c.property==null?null:c.property)&&b.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&b.getAttribute("charset")===(c.charSet==null?null:c.charSet)){k.splice(A,1);break t}}b=_.createElement(d),on(b,d,c),_.head.appendChild(b);break;default:throw Error(r(468,d))}b[nn]=i,Kt(b),d=b}i.stateNode=d}else fx(_,i.type,i.stateNode);else i.stateNode=cx(_,d,i.memoizedProps);else b!==d?(b===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):b.count--,d===null?fx(_,i.type,i.stateNode):cx(_,d,i.memoizedProps)):d===null&&i.stateNode!==null&&Wd(i,i.memoizedProps,c.memoizedProps)}break;case 27:Dn(o,i),Ln(i),d&512&&(Mt||c===null||Mr(c,c.return)),c!==null&&d&4&&Wd(i,i.memoizedProps,c.memoizedProps);break;case 5:if(Dn(o,i),Ln(i),d&512&&(Mt||c===null||Mr(c,c.return)),i.flags&32){_=i.stateNode;try{Hi(_,"")}catch(_e){at(i,i.return,_e)}}d&4&&i.stateNode!=null&&(_=i.memoizedProps,Wd(i,_,c!==null?c.memoizedProps:_)),d&1024&&(np=!0);break;case 6:if(Dn(o,i),Ln(i),d&4){if(i.stateNode===null)throw Error(r(162));d=i.memoizedProps,c=i.stateNode;try{c.nodeValue=d}catch(_e){at(i,i.return,_e)}}break;case 3:if(cu=null,_=Er,Er=ou(o.containerInfo),Dn(o,i),Er=_,Ln(i),d&4&&c!==null&&c.memoizedState.isDehydrated)try{wa(o.containerInfo)}catch(_e){at(i,i.return,_e)}np&&(np=!1,fv(i));break;case 4:d=Er,Er=ou(i.stateNode.containerInfo),Dn(o,i),Ln(i),Er=d;break;case 12:Dn(o,i),Ln(i);break;case 31:Dn(o,i),Ln(i),d&4&&(d=i.updateQueue,d!==null&&(i.updateQueue=null,Kc(i,d)));break;case 13:Dn(o,i),Ln(i),i.child.flags&8192&&i.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(Qc=xe()),d&4&&(d=i.updateQueue,d!==null&&(i.updateQueue=null,Kc(i,d)));break;case 22:_=i.memoizedState!==null;var $=c!==null&&c.memoizedState!==null,W=is,oe=Mt;if(is=W||_,Mt=oe||$,Dn(o,i),Mt=oe,is=W,Ln(i),d&8192)e:for(o=i.stateNode,o._visibility=_?o._visibility&-2:o._visibility|1,_&&(c===null||$||is||Mt||bi(i)),c=null,o=i;;){if(o.tag===5||o.tag===26){if(c===null){$=c=o;try{if(b=$.stateNode,_)k=b.style,typeof k.setProperty=="function"?k.setProperty("display","none","important"):k.display="none";else{A=$.stateNode;var ce=$.memoizedProps.style,te=ce!=null&&ce.hasOwnProperty("display")?ce.display:null;A.style.display=te==null||typeof te=="boolean"?"":(""+te).trim()}}catch(_e){at($,$.return,_e)}}}else if(o.tag===6){if(c===null){$=o;try{$.stateNode.nodeValue=_?"":$.memoizedProps}catch(_e){at($,$.return,_e)}}}else if(o.tag===18){if(c===null){$=o;try{var re=$.stateNode;_?ex(re,!0):ex($.stateNode,!1)}catch(_e){at($,$.return,_e)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===i)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break e;for(;o.sibling===null;){if(o.return===null||o.return===i)break e;c===o&&(c=null),o=o.return}c===o&&(c=null),o.sibling.return=o.return,o=o.sibling}d&4&&(d=i.updateQueue,d!==null&&(c=d.retryQueue,c!==null&&(d.retryQueue=null,Kc(i,c))));break;case 19:Dn(o,i),Ln(i),d&4&&(d=i.updateQueue,d!==null&&(i.updateQueue=null,Kc(i,d)));break;case 30:break;case 21:break;default:Dn(o,i),Ln(i)}}function Ln(i){var o=i.flags;if(o&2){try{for(var c,d=i.return;d!==null;){if(nv(d)){c=d;break}d=d.return}if(c==null)throw Error(r(160));switch(c.tag){case 27:var _=c.stateNode,b=ep(i);Gc(i,b,_);break;case 5:var k=c.stateNode;c.flags&32&&(Hi(k,""),c.flags&=-33);var A=ep(i);Gc(i,A,k);break;case 3:case 4:var $=c.stateNode.containerInfo,W=ep(i);tp(i,W,$);break;default:throw Error(r(161))}}catch(oe){at(i,i.return,oe)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function fv(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var o=i;fv(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),i=i.sibling}}function os(i,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)iv(i,o.alternate,o),o=o.sibling}function bi(i){for(i=i.child;i!==null;){var o=i;switch(o.tag){case 0:case 11:case 14:case 15:Os(4,o,o.return),bi(o);break;case 1:Mr(o,o.return);var c=o.stateNode;typeof c.componentWillUnmount=="function"&&ev(o,o.return,c),bi(o);break;case 27:Uo(o.stateNode);case 26:case 5:Mr(o,o.return),bi(o);break;case 22:o.memoizedState===null&&bi(o);break;case 30:bi(o);break;default:bi(o)}i=i.sibling}}function ls(i,o,c){for(c=c&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var d=o.alternate,_=i,b=o,k=b.flags;switch(b.tag){case 0:case 11:case 15:ls(_,b,c),No(4,b);break;case 1:if(ls(_,b,c),d=b,_=d.stateNode,typeof _.componentDidMount=="function")try{_.componentDidMount()}catch(W){at(d,d.return,W)}if(d=b,_=d.updateQueue,_!==null){var A=d.stateNode;try{var $=_.shared.hiddenCallbacks;if($!==null)for(_.shared.hiddenCallbacks=null,_=0;_<$.length;_++)q_($[_],A)}catch(W){at(d,d.return,W)}}c&&k&64&&Wb(b),Io(b,b.return);break;case 27:rv(b);case 26:case 5:ls(_,b,c),c&&d===null&&k&4&&tv(b),Io(b,b.return);break;case 12:ls(_,b,c);break;case 31:ls(_,b,c),c&&k&4&&lv(_,b);break;case 13:ls(_,b,c),c&&k&4&&cv(_,b);break;case 22:b.memoizedState===null&&ls(_,b,c),Io(b,b.return);break;case 30:break;default:ls(_,b,c)}o=o.sibling}}function rp(i,o){var c=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),i=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(i=o.memoizedState.cachePool.pool),i!==c&&(i!=null&&i.refCount++,c!=null&&_o(c))}function sp(i,o){i=null,o.alternate!==null&&(i=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==i&&(o.refCount++,i!=null&&_o(i))}function Cr(i,o,c,d){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)hv(i,o,c,d),o=o.sibling}function hv(i,o,c,d){var _=o.flags;switch(o.tag){case 0:case 11:case 15:Cr(i,o,c,d),_&2048&&No(9,o);break;case 1:Cr(i,o,c,d);break;case 3:Cr(i,o,c,d),_&2048&&(i=null,o.alternate!==null&&(i=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==i&&(o.refCount++,i!=null&&_o(i)));break;case 12:if(_&2048){Cr(i,o,c,d),i=o.stateNode;try{var b=o.memoizedProps,k=b.id,A=b.onPostCommit;typeof A=="function"&&A(k,o.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch($){at(o,o.return,$)}}else Cr(i,o,c,d);break;case 31:Cr(i,o,c,d);break;case 13:Cr(i,o,c,d);break;case 23:break;case 22:b=o.stateNode,k=o.alternate,o.memoizedState!==null?b._visibility&2?Cr(i,o,c,d):Mo(i,o):b._visibility&2?Cr(i,o,c,d):(b._visibility|=2,fa(i,o,c,d,(o.subtreeFlags&10256)!==0||!1)),_&2048&&rp(k,o);break;case 24:Cr(i,o,c,d),_&2048&&sp(o.alternate,o);break;default:Cr(i,o,c,d)}}function fa(i,o,c,d,_){for(_=_&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var b=i,k=o,A=c,$=d,W=k.flags;switch(k.tag){case 0:case 11:case 15:fa(b,k,A,$,_),No(8,k);break;case 23:break;case 22:var oe=k.stateNode;k.memoizedState!==null?oe._visibility&2?fa(b,k,A,$,_):Mo(b,k):(oe._visibility|=2,fa(b,k,A,$,_)),_&&W&2048&&rp(k.alternate,k);break;case 24:fa(b,k,A,$,_),_&&W&2048&&sp(k.alternate,k);break;default:fa(b,k,A,$,_)}o=o.sibling}}function Mo(i,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var c=i,d=o,_=d.flags;switch(d.tag){case 22:Mo(c,d),_&2048&&rp(d.alternate,d);break;case 24:Mo(c,d),_&2048&&sp(d.alternate,d);break;default:Mo(c,d)}o=o.sibling}}var Do=8192;function ha(i,o,c){if(i.subtreeFlags&Do)for(i=i.child;i!==null;)dv(i,o,c),i=i.sibling}function dv(i,o,c){switch(i.tag){case 26:ha(i,o,c),i.flags&Do&&i.memoizedState!==null&&jR(c,Er,i.memoizedState,i.memoizedProps);break;case 5:ha(i,o,c);break;case 3:case 4:var d=Er;Er=ou(i.stateNode.containerInfo),ha(i,o,c),Er=d;break;case 22:i.memoizedState===null&&(d=i.alternate,d!==null&&d.memoizedState!==null?(d=Do,Do=16777216,ha(i,o,c),Do=d):ha(i,o,c));break;default:ha(i,o,c)}}function pv(i){var o=i.alternate;if(o!==null&&(i=o.child,i!==null)){o.child=null;do o=i.sibling,i.sibling=null,i=o;while(i!==null)}}function Lo(i){var o=i.deletions;if((i.flags&16)!==0){if(o!==null)for(var c=0;c<o.length;c++){var d=o[c];Zt=d,gv(d,i)}pv(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)mv(i),i=i.sibling}function mv(i){switch(i.tag){case 0:case 11:case 15:Lo(i),i.flags&2048&&Os(9,i,i.return);break;case 3:Lo(i);break;case 12:Lo(i);break;case 22:var o=i.stateNode;i.memoizedState!==null&&o._visibility&2&&(i.return===null||i.return.tag!==13)?(o._visibility&=-3,Zc(i)):Lo(i);break;default:Lo(i)}}function Zc(i){var o=i.deletions;if((i.flags&16)!==0){if(o!==null)for(var c=0;c<o.length;c++){var d=o[c];Zt=d,gv(d,i)}pv(i)}for(i=i.child;i!==null;){switch(o=i,o.tag){case 0:case 11:case 15:Os(8,o,o.return),Zc(o);break;case 22:c=o.stateNode,c._visibility&2&&(c._visibility&=-3,Zc(o));break;default:Zc(o)}i=i.sibling}}function gv(i,o){for(;Zt!==null;){var c=Zt;switch(c.tag){case 0:case 11:case 15:Os(8,c,o);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var d=c.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:_o(c.memoizedState.cache)}if(d=c.child,d!==null)d.return=c,Zt=d;else e:for(c=i;Zt!==null;){d=Zt;var _=d.sibling,b=d.return;if(av(d),d===c){Zt=null;break e}if(_!==null){_.return=b,Zt=_;break e}Zt=b}}}var Y2={getCacheForType:function(i){var o=sn(Ot),c=o.data.get(i);return c===void 0&&(c=i(),o.data.set(i,c)),c},cacheSignal:function(){return sn(Ot).controller.signal}},X2=typeof WeakMap=="function"?WeakMap:Map,st=0,pt=null,Fe=null,Ge=0,it=0,Qn=null,Ns=!1,da=!1,ip=!1,cs=0,Et=0,Is=0,vi=0,ap=0,Jn=0,pa=0,jo=null,jn=null,op=!1,Qc=0,yv=0,Jc=1/0,Yc=null,Ms=null,Pt=0,Ds=null,ma=null,us=0,lp=0,cp=null,_v=null,zo=0,up=null;function Yn(){return(st&2)!==0&&Ge!==0?Ge&-Ge:z.T!==null?gp():D0()}function bv(){if(Jn===0)if((Ge&536870912)===0||Je){var i=ic;ic<<=1,(ic&3932160)===0&&(ic=262144),Jn=i}else Jn=536870912;return i=Kn.current,i!==null&&(i.flags|=32),Jn}function zn(i,o,c){(i===pt&&(it===2||it===9)||i.cancelPendingCommit!==null)&&(ga(i,0),Ls(i,Ge,Jn,!1)),ro(i,c),((st&2)===0||i!==pt)&&(i===pt&&((st&2)===0&&(vi|=c),Et===4&&Ls(i,Ge,Jn,!1)),Dr(i))}function vv(i,o,c){if((st&6)!==0)throw Error(r(327));var d=!c&&(o&127)===0&&(o&i.expiredLanes)===0||no(i,o),_=d?tR(i,o):hp(i,o,!0),b=d;do{if(_===0){da&&!d&&Ls(i,o,0,!1);break}else{if(c=i.current.alternate,b&&!W2(c)){_=hp(i,o,!1),b=!1;continue}if(_===2){if(b=o,i.errorRecoveryDisabledLanes&b)var k=0;else k=i.pendingLanes&-536870913,k=k!==0?k:k&536870912?536870912:0;if(k!==0){o=k;e:{var A=i;_=jo;var $=A.current.memoizedState.isDehydrated;if($&&(ga(A,k).flags|=256),k=hp(A,k,!1),k!==2){if(ip&&!$){A.errorRecoveryDisabledLanes|=b,vi|=b,_=4;break e}b=jn,jn=_,b!==null&&(jn===null?jn=b:jn.push.apply(jn,b))}_=k}if(b=!1,_!==2)continue}}if(_===1){ga(i,0),Ls(i,o,0,!0);break}e:{switch(d=i,b=_,b){case 0:case 1:throw Error(r(345));case 4:if((o&4194048)!==o)break;case 6:Ls(d,o,Jn,!Ns);break e;case 2:jn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((o&62914560)===o&&(_=Qc+300-xe(),10<_)){if(Ls(d,o,Jn,!Ns),oc(d,0,!0)!==0)break e;us=o,d.timeoutHandle=Yv(xv.bind(null,d,c,jn,Yc,op,o,Jn,vi,pa,Ns,b,"Throttled",-0,0),_);break e}xv(d,c,jn,Yc,op,o,Jn,vi,pa,Ns,b,null,-0,0)}}break}while(!0);Dr(i)}function xv(i,o,c,d,_,b,k,A,$,W,oe,ce,te,re){if(i.timeoutHandle=-1,ce=o.subtreeFlags,ce&8192||(ce&16785408)===16785408){ce={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Qr},dv(o,b,ce);var _e=(b&62914560)===b?Qc-xe():(b&4194048)===b?yv-xe():0;if(_e=zR(ce,_e),_e!==null){us=b,i.cancelPendingCommit=_e(Rv.bind(null,i,o,b,c,d,_,k,A,$,oe,ce,null,te,re)),Ls(i,b,k,!W);return}}Rv(i,o,b,c,d,_,k,A,$)}function W2(i){for(var o=i;;){var c=o.tag;if((c===0||c===11||c===15)&&o.flags&16384&&(c=o.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var d=0;d<c.length;d++){var _=c[d],b=_.getSnapshot;_=_.value;try{if(!Hn(b(),_))return!1}catch{return!1}}if(c=o.child,o.subtreeFlags&16384&&c!==null)c.return=o,o=c;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Ls(i,o,c,d){o&=~ap,o&=~vi,i.suspendedLanes|=o,i.pingedLanes&=~o,d&&(i.warmLanes|=o),d=i.expirationTimes;for(var _=o;0<_;){var b=31-dt(_),k=1<<b;d[b]=-1,_&=~k}c!==0&&N0(i,c,o)}function Xc(){return(st&6)===0?(Po(0),!1):!0}function fp(){if(Fe!==null){if(it===0)var i=Fe.return;else i=Fe,Wr=fi=null,Td(i),aa=null,vo=0,i=Fe;for(;i!==null;)Xb(i.alternate,i),i=i.return;Fe=null}}function ga(i,o){var c=i.timeoutHandle;c!==-1&&(i.timeoutHandle=-1,bR(c)),c=i.cancelPendingCommit,c!==null&&(i.cancelPendingCommit=null,c()),us=0,fp(),pt=i,Fe=c=Yr(i.current,null),Ge=o,it=0,Qn=null,Ns=!1,da=no(i,o),ip=!1,pa=Jn=ap=vi=Is=Et=0,jn=jo=null,op=!1,(o&8)!==0&&(o|=o&32);var d=i.entangledLanes;if(d!==0)for(i=i.entanglements,d&=o;0<d;){var _=31-dt(d),b=1<<_;o|=i[_],d&=~b}return cs=o,bc(),c}function wv(i,o){ze=null,z.H=Ao,o===ia||o===Tc?(o=P_(),it=3):o===md?(o=P_(),it=4):it=o===Fd?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,Qn=o,Fe===null&&(Et=1,Uc(i,lr(o,i.current)))}function Sv(){var i=Kn.current;return i===null?!0:(Ge&4194048)===Ge?hr===null:(Ge&62914560)===Ge||(Ge&536870912)!==0?i===hr:!1}function kv(){var i=z.H;return z.H=Ao,i===null?Ao:i}function Ev(){var i=z.A;return z.A=Y2,i}function Wc(){Et=4,Ns||(Ge&4194048)!==Ge&&Kn.current!==null||(da=!0),(Is&134217727)===0&&(vi&134217727)===0||pt===null||Ls(pt,Ge,Jn,!1)}function hp(i,o,c){var d=st;st|=2;var _=kv(),b=Ev();(pt!==i||Ge!==o)&&(Yc=null,ga(i,o)),o=!1;var k=Et;e:do try{if(it!==0&&Fe!==null){var A=Fe,$=Qn;switch(it){case 8:fp(),k=6;break e;case 3:case 2:case 9:case 6:Kn.current===null&&(o=!0);var W=it;if(it=0,Qn=null,ya(i,A,$,W),c&&da){k=0;break e}break;default:W=it,it=0,Qn=null,ya(i,A,$,W)}}eR(),k=Et;break}catch(oe){wv(i,oe)}while(!0);return o&&i.shellSuspendCounter++,Wr=fi=null,st=d,z.H=_,z.A=b,Fe===null&&(pt=null,Ge=0,bc()),k}function eR(){for(;Fe!==null;)Cv(Fe)}function tR(i,o){var c=st;st|=2;var d=kv(),_=Ev();pt!==i||Ge!==o?(Yc=null,Jc=xe()+500,ga(i,o)):da=no(i,o);e:do try{if(it!==0&&Fe!==null){o=Fe;var b=Qn;t:switch(it){case 1:it=0,Qn=null,ya(i,o,b,1);break;case 2:case 9:if(j_(b)){it=0,Qn=null,Tv(o);break}o=function(){it!==2&&it!==9||pt!==i||(it=7),Dr(i)},b.then(o,o);break e;case 3:it=7;break e;case 4:it=5;break e;case 7:j_(b)?(it=0,Qn=null,Tv(o)):(it=0,Qn=null,ya(i,o,b,7));break;case 5:var k=null;switch(Fe.tag){case 26:k=Fe.memoizedState;case 5:case 27:var A=Fe;if(k?hx(k):A.stateNode.complete){it=0,Qn=null;var $=A.sibling;if($!==null)Fe=$;else{var W=A.return;W!==null?(Fe=W,eu(W)):Fe=null}break t}}it=0,Qn=null,ya(i,o,b,5);break;case 6:it=0,Qn=null,ya(i,o,b,6);break;case 8:fp(),Et=6;break e;default:throw Error(r(462))}}nR();break}catch(oe){wv(i,oe)}while(!0);return Wr=fi=null,z.H=d,z.A=_,st=c,Fe!==null?0:(pt=null,Ge=0,bc(),Et)}function nR(){for(;Fe!==null&&!$e();)Cv(Fe)}function Cv(i){var o=Jb(i.alternate,i,cs);i.memoizedProps=i.pendingProps,o===null?eu(i):Fe=o}function Tv(i){var o=i,c=o.alternate;switch(o.tag){case 15:case 0:o=Vb(c,o,o.pendingProps,o.type,void 0,Ge);break;case 11:o=Vb(c,o,o.pendingProps,o.type.render,o.ref,Ge);break;case 5:Td(o);default:Xb(c,o),o=Fe=E_(o,cs),o=Jb(c,o,cs)}i.memoizedProps=i.pendingProps,o===null?eu(i):Fe=o}function ya(i,o,c,d){Wr=fi=null,Td(o),aa=null,vo=0;var _=o.return;try{if(V2(i,_,o,c,Ge)){Et=1,Uc(i,lr(c,i.current)),Fe=null;return}}catch(b){if(_!==null)throw Fe=_,b;Et=1,Uc(i,lr(c,i.current)),Fe=null;return}o.flags&32768?(Je||d===1?i=!0:da||(Ge&536870912)!==0?i=!1:(Ns=i=!0,(d===2||d===9||d===3||d===6)&&(d=Kn.current,d!==null&&d.tag===13&&(d.flags|=16384))),Av(o,i)):eu(o)}function eu(i){var o=i;do{if((o.flags&32768)!==0){Av(o,Ns);return}i=o.return;var c=K2(o.alternate,o,cs);if(c!==null){Fe=c;return}if(o=o.sibling,o!==null){Fe=o;return}Fe=o=i}while(o!==null);Et===0&&(Et=5)}function Av(i,o){do{var c=Z2(i.alternate,i);if(c!==null){c.flags&=32767,Fe=c;return}if(c=i.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!o&&(i=i.sibling,i!==null)){Fe=i;return}Fe=i=c}while(i!==null);Et=6,Fe=null}function Rv(i,o,c,d,_,b,k,A,$){i.cancelPendingCommit=null;do tu();while(Pt!==0);if((st&6)!==0)throw Error(r(327));if(o!==null){if(o===i.current)throw Error(r(177));if(b=o.lanes|o.childLanes,b|=ed,LA(i,c,b,k,A,$),i===pt&&(Fe=pt=null,Ge=0),ma=o,Ds=i,us=c,lp=b,cp=_,_v=d,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,aR(ye,function(){return Dv(),null})):(i.callbackNode=null,i.callbackPriority=0),d=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||d){d=z.T,z.T=null,_=F.p,F.p=2,k=st,st|=4;try{Q2(i,o,c)}finally{st=k,F.p=_,z.T=d}}Pt=1,Ov(),Nv(),Iv()}}function Ov(){if(Pt===1){Pt=0;var i=Ds,o=ma,c=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||c){c=z.T,z.T=null;var d=F.p;F.p=2;var _=st;st|=4;try{uv(o,i);var b=kp,k=g_(i.containerInfo),A=b.focusedElem,$=b.selectionRange;if(k!==A&&A&&A.ownerDocument&&m_(A.ownerDocument.documentElement,A)){if($!==null&&Qh(A)){var W=$.start,oe=$.end;if(oe===void 0&&(oe=W),"selectionStart"in A)A.selectionStart=W,A.selectionEnd=Math.min(oe,A.value.length);else{var ce=A.ownerDocument||document,te=ce&&ce.defaultView||window;if(te.getSelection){var re=te.getSelection(),_e=A.textContent.length,Re=Math.min($.start,_e),ht=$.end===void 0?Re:Math.min($.end,_e);!re.extend&&Re>ht&&(k=ht,ht=Re,Re=k);var Z=p_(A,Re),V=p_(A,ht);if(Z&&V&&(re.rangeCount!==1||re.anchorNode!==Z.node||re.anchorOffset!==Z.offset||re.focusNode!==V.node||re.focusOffset!==V.offset)){var X=ce.createRange();X.setStart(Z.node,Z.offset),re.removeAllRanges(),Re>ht?(re.addRange(X),re.extend(V.node,V.offset)):(X.setEnd(V.node,V.offset),re.addRange(X))}}}}for(ce=[],re=A;re=re.parentNode;)re.nodeType===1&&ce.push({element:re,left:re.scrollLeft,top:re.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<ce.length;A++){var le=ce[A];le.element.scrollLeft=le.left,le.element.scrollTop=le.top}}du=!!Sp,kp=Sp=null}finally{st=_,F.p=d,z.T=c}}i.current=o,Pt=2}}function Nv(){if(Pt===2){Pt=0;var i=Ds,o=ma,c=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||c){c=z.T,z.T=null;var d=F.p;F.p=2;var _=st;st|=4;try{iv(i,o.alternate,o)}finally{st=_,F.p=d,z.T=c}}Pt=3}}function Iv(){if(Pt===4||Pt===3){Pt=0,Oe();var i=Ds,o=ma,c=us,d=_v;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?Pt=5:(Pt=0,ma=Ds=null,Mv(i,i.pendingLanes));var _=i.pendingLanes;if(_===0&&(Ms=null),Oh(c),o=o.stateNode,_t&&typeof _t.onCommitFiberRoot=="function")try{_t.onCommitFiberRoot(et,o,void 0,(o.current.flags&128)===128)}catch{}if(d!==null){o=z.T,_=F.p,F.p=2,z.T=null;try{for(var b=i.onRecoverableError,k=0;k<d.length;k++){var A=d[k];b(A.value,{componentStack:A.stack})}}finally{z.T=o,F.p=_}}(us&3)!==0&&tu(),Dr(i),_=i.pendingLanes,(c&261930)!==0&&(_&42)!==0?i===up?zo++:(zo=0,up=i):zo=0,Po(0)}}function Mv(i,o){(i.pooledCacheLanes&=o)===0&&(o=i.pooledCache,o!=null&&(i.pooledCache=null,_o(o)))}function tu(){return Ov(),Nv(),Iv(),Dv()}function Dv(){if(Pt!==5)return!1;var i=Ds,o=lp;lp=0;var c=Oh(us),d=z.T,_=F.p;try{F.p=32>c?32:c,z.T=null,c=cp,cp=null;var b=Ds,k=us;if(Pt=0,ma=Ds=null,us=0,(st&6)!==0)throw Error(r(331));var A=st;if(st|=4,mv(b.current),hv(b,b.current,k,c),st=A,Po(0,!1),_t&&typeof _t.onPostCommitFiberRoot=="function")try{_t.onPostCommitFiberRoot(et,b)}catch{}return!0}finally{F.p=_,z.T=d,Mv(i,o)}}function Lv(i,o,c){o=lr(c,o),o=qd(i.stateNode,o,2),i=Ts(i,o,2),i!==null&&(ro(i,2),Dr(i))}function at(i,o,c){if(i.tag===3)Lv(i,i,c);else for(;o!==null;){if(o.tag===3){Lv(o,i,c);break}else if(o.tag===1){var d=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(Ms===null||!Ms.has(d))){i=lr(c,i),c=jb(2),d=Ts(o,c,2),d!==null&&(zb(c,d,o,i),ro(d,2),Dr(d));break}}o=o.return}}function dp(i,o,c){var d=i.pingCache;if(d===null){d=i.pingCache=new X2;var _=new Set;d.set(o,_)}else _=d.get(o),_===void 0&&(_=new Set,d.set(o,_));_.has(c)||(ip=!0,_.add(c),i=rR.bind(null,i,o,c),o.then(i,i))}function rR(i,o,c){var d=i.pingCache;d!==null&&d.delete(o),i.pingedLanes|=i.suspendedLanes&c,i.warmLanes&=~c,pt===i&&(Ge&c)===c&&(Et===4||Et===3&&(Ge&62914560)===Ge&&300>xe()-Qc?(st&2)===0&&ga(i,0):ap|=c,pa===Ge&&(pa=0)),Dr(i)}function jv(i,o){o===0&&(o=O0()),i=li(i,o),i!==null&&(ro(i,o),Dr(i))}function sR(i){var o=i.memoizedState,c=0;o!==null&&(c=o.retryLane),jv(i,c)}function iR(i,o){var c=0;switch(i.tag){case 31:case 13:var d=i.stateNode,_=i.memoizedState;_!==null&&(c=_.retryLane);break;case 19:d=i.stateNode;break;case 22:d=i.stateNode._retryCache;break;default:throw Error(r(314))}d!==null&&d.delete(o),jv(i,c)}function aR(i,o){return wn(i,o)}var nu=null,_a=null,pp=!1,ru=!1,mp=!1,js=0;function Dr(i){i!==_a&&i.next===null&&(_a===null?nu=_a=i:_a=_a.next=i),ru=!0,pp||(pp=!0,lR())}function Po(i,o){if(!mp&&ru){mp=!0;do for(var c=!1,d=nu;d!==null;){if(i!==0){var _=d.pendingLanes;if(_===0)var b=0;else{var k=d.suspendedLanes,A=d.pingedLanes;b=(1<<31-dt(42|i)+1)-1,b&=_&~(k&~A),b=b&201326741?b&201326741|1:b?b|2:0}b!==0&&(c=!0,$v(d,b))}else b=Ge,b=oc(d,d===pt?b:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(b&3)===0||no(d,b)||(c=!0,$v(d,b));d=d.next}while(c);mp=!1}}function oR(){zv()}function zv(){ru=pp=!1;var i=0;js!==0&&_R()&&(i=js);for(var o=xe(),c=null,d=nu;d!==null;){var _=d.next,b=Pv(d,o);b===0?(d.next=null,c===null?nu=_:c.next=_,_===null&&(_a=c)):(c=d,(i!==0||(b&3)!==0)&&(ru=!0)),d=_}Pt!==0&&Pt!==5||Po(i),js!==0&&(js=0)}function Pv(i,o){for(var c=i.suspendedLanes,d=i.pingedLanes,_=i.expirationTimes,b=i.pendingLanes&-62914561;0<b;){var k=31-dt(b),A=1<<k,$=_[k];$===-1?((A&c)===0||(A&d)!==0)&&(_[k]=DA(A,o)):$<=o&&(i.expiredLanes|=A),b&=~A}if(o=pt,c=Ge,c=oc(i,i===o?c:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),d=i.callbackNode,c===0||i===o&&(it===2||it===9)||i.cancelPendingCommit!==null)return d!==null&&d!==null&&ge(d),i.callbackNode=null,i.callbackPriority=0;if((c&3)===0||no(i,c)){if(o=c&-c,o===i.callbackPriority)return o;switch(d!==null&&ge(d),Oh(c)){case 2:case 8:c=ue;break;case 32:c=ye;break;case 268435456:c=Te;break;default:c=ye}return d=Bv.bind(null,i),c=wn(c,d),i.callbackPriority=o,i.callbackNode=c,o}return d!==null&&d!==null&&ge(d),i.callbackPriority=2,i.callbackNode=null,2}function Bv(i,o){if(Pt!==0&&Pt!==5)return i.callbackNode=null,i.callbackPriority=0,null;var c=i.callbackNode;if(tu()&&i.callbackNode!==c)return null;var d=Ge;return d=oc(i,i===pt?d:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),d===0?null:(vv(i,d,o),Pv(i,xe()),i.callbackNode!=null&&i.callbackNode===c?Bv.bind(null,i):null)}function $v(i,o){if(tu())return null;vv(i,o,!0)}function lR(){vR(function(){(st&6)!==0?wn(ne,oR):zv()})}function gp(){if(js===0){var i=ra;i===0&&(i=sc,sc<<=1,(sc&261888)===0&&(sc=256)),js=i}return js}function Uv(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:fc(""+i)}function qv(i,o){var c=o.ownerDocument.createElement("input");return c.name=o.name,c.value=o.value,i.id&&c.setAttribute("form",i.id),o.parentNode.insertBefore(c,o),i=new FormData(i),c.parentNode.removeChild(c),i}function cR(i,o,c,d,_){if(o==="submit"&&c&&c.stateNode===_){var b=Uv((_[Nn]||null).action),k=d.submitter;k&&(o=(o=k[Nn]||null)?Uv(o.formAction):k.getAttribute("formAction"),o!==null&&(b=o,k=null));var A=new mc("action","action",null,d,_);i.push({event:A,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(js!==0){var $=k?qv(_,k):new FormData(_);jd(c,{pending:!0,data:$,method:_.method,action:b},null,$)}}else typeof b=="function"&&(A.preventDefault(),$=k?qv(_,k):new FormData(_),jd(c,{pending:!0,data:$,method:_.method,action:b},b,$))},currentTarget:_}]})}}for(var yp=0;yp<Wh.length;yp++){var _p=Wh[yp],uR=_p.toLowerCase(),fR=_p[0].toUpperCase()+_p.slice(1);kr(uR,"on"+fR)}kr(b_,"onAnimationEnd"),kr(v_,"onAnimationIteration"),kr(x_,"onAnimationStart"),kr("dblclick","onDoubleClick"),kr("focusin","onFocus"),kr("focusout","onBlur"),kr(T2,"onTransitionRun"),kr(A2,"onTransitionStart"),kr(R2,"onTransitionCancel"),kr(w_,"onTransitionEnd"),Fi("onMouseEnter",["mouseout","mouseover"]),Fi("onMouseLeave",["mouseout","mouseover"]),Fi("onPointerEnter",["pointerout","pointerover"]),Fi("onPointerLeave",["pointerout","pointerover"]),si("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),si("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),si("onBeforeInput",["compositionend","keypress","textInput","paste"]),si("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),si("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),si("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),hR=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Bo));function Fv(i,o){o=(o&4)!==0;for(var c=0;c<i.length;c++){var d=i[c],_=d.event;d=d.listeners;e:{var b=void 0;if(o)for(var k=d.length-1;0<=k;k--){var A=d[k],$=A.instance,W=A.currentTarget;if(A=A.listener,$!==b&&_.isPropagationStopped())break e;b=A,_.currentTarget=W;try{b(_)}catch(oe){_c(oe)}_.currentTarget=null,b=$}else for(k=0;k<d.length;k++){if(A=d[k],$=A.instance,W=A.currentTarget,A=A.listener,$!==b&&_.isPropagationStopped())break e;b=A,_.currentTarget=W;try{b(_)}catch(oe){_c(oe)}_.currentTarget=null,b=$}}}}function Ve(i,o){var c=o[Nh];c===void 0&&(c=o[Nh]=new Set);var d=i+"__bubble";c.has(d)||(Vv(o,i,2,!1),c.add(d))}function bp(i,o,c){var d=0;o&&(d|=4),Vv(c,i,d,o)}var su="_reactListening"+Math.random().toString(36).slice(2);function vp(i){if(!i[su]){i[su]=!0,z0.forEach(function(c){c!=="selectionchange"&&(hR.has(c)||bp(c,!1,i),bp(c,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[su]||(o[su]=!0,bp("selectionchange",!1,o))}}function Vv(i,o,c,d){switch(bx(o)){case 2:var _=$R;break;case 8:_=UR;break;default:_=Lp}c=_.bind(null,o,c,i),_=void 0,!$h||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(_=!0),d?_!==void 0?i.addEventListener(o,c,{capture:!0,passive:_}):i.addEventListener(o,c,!0):_!==void 0?i.addEventListener(o,c,{passive:_}):i.addEventListener(o,c,!1)}function xp(i,o,c,d,_){var b=d;if((o&1)===0&&(o&2)===0&&d!==null)e:for(;;){if(d===null)return;var k=d.tag;if(k===3||k===4){var A=d.stateNode.containerInfo;if(A===_)break;if(k===4)for(k=d.return;k!==null;){var $=k.tag;if(($===3||$===4)&&k.stateNode.containerInfo===_)return;k=k.return}for(;A!==null;){if(k=$i(A),k===null)return;if($=k.tag,$===5||$===6||$===26||$===27){d=b=k;continue e}A=A.parentNode}}d=d.return}Q0(function(){var W=b,oe=Ph(c),ce=[];e:{var te=S_.get(i);if(te!==void 0){var re=mc,_e=i;switch(i){case"keypress":if(dc(c)===0)break e;case"keydown":case"keyup":re=i2;break;case"focusin":_e="focus",re=Vh;break;case"focusout":_e="blur",re=Vh;break;case"beforeblur":case"afterblur":re=Vh;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":re=X0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":re=KA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":re=l2;break;case b_:case v_:case x_:re=JA;break;case w_:re=u2;break;case"scroll":case"scrollend":re=HA;break;case"wheel":re=h2;break;case"copy":case"cut":case"paste":re=XA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":re=e_;break;case"toggle":case"beforetoggle":re=p2}var Re=(o&4)!==0,ht=!Re&&(i==="scroll"||i==="scrollend"),Z=Re?te!==null?te+"Capture":null:te;Re=[];for(var V=W,X;V!==null;){var le=V;if(X=le.stateNode,le=le.tag,le!==5&&le!==26&&le!==27||X===null||Z===null||(le=ao(V,Z),le!=null&&Re.push($o(V,le,X))),ht)break;V=V.return}0<Re.length&&(te=new re(te,_e,null,c,oe),ce.push({event:te,listeners:Re}))}}if((o&7)===0){e:{if(te=i==="mouseover"||i==="pointerover",re=i==="mouseout"||i==="pointerout",te&&c!==zh&&(_e=c.relatedTarget||c.fromElement)&&($i(_e)||_e[Bi]))break e;if((re||te)&&(te=oe.window===oe?oe:(te=oe.ownerDocument)?te.defaultView||te.parentWindow:window,re?(_e=c.relatedTarget||c.toElement,re=W,_e=_e?$i(_e):null,_e!==null&&(ht=a(_e),Re=_e.tag,_e!==ht||Re!==5&&Re!==27&&Re!==6)&&(_e=null)):(re=null,_e=W),re!==_e)){if(Re=X0,le="onMouseLeave",Z="onMouseEnter",V="mouse",(i==="pointerout"||i==="pointerover")&&(Re=e_,le="onPointerLeave",Z="onPointerEnter",V="pointer"),ht=re==null?te:io(re),X=_e==null?te:io(_e),te=new Re(le,V+"leave",re,c,oe),te.target=ht,te.relatedTarget=X,le=null,$i(oe)===W&&(Re=new Re(Z,V+"enter",_e,c,oe),Re.target=X,Re.relatedTarget=ht,le=Re),ht=le,re&&_e)t:{for(Re=dR,Z=re,V=_e,X=0,le=Z;le;le=Re(le))X++;le=0;for(var Ee=V;Ee;Ee=Re(Ee))le++;for(;0<X-le;)Z=Re(Z),X--;for(;0<le-X;)V=Re(V),le--;for(;X--;){if(Z===V||V!==null&&Z===V.alternate){Re=Z;break t}Z=Re(Z),V=Re(V)}Re=null}else Re=null;re!==null&&Hv(ce,te,re,Re,!1),_e!==null&&ht!==null&&Hv(ce,ht,_e,Re,!0)}}e:{if(te=W?io(W):window,re=te.nodeName&&te.nodeName.toLowerCase(),re==="select"||re==="input"&&te.type==="file")var tt=l_;else if(a_(te))if(c_)tt=k2;else{tt=w2;var Se=x2}else re=te.nodeName,!re||re.toLowerCase()!=="input"||te.type!=="checkbox"&&te.type!=="radio"?W&&jh(W.elementType)&&(tt=l_):tt=S2;if(tt&&(tt=tt(i,W))){o_(ce,tt,c,oe);break e}Se&&Se(i,te,W),i==="focusout"&&W&&te.type==="number"&&W.memoizedProps.value!=null&&Lh(te,"number",te.value)}switch(Se=W?io(W):window,i){case"focusin":(a_(Se)||Se.contentEditable==="true")&&(Qi=Se,Jh=W,mo=null);break;case"focusout":mo=Jh=Qi=null;break;case"mousedown":Yh=!0;break;case"contextmenu":case"mouseup":case"dragend":Yh=!1,y_(ce,c,oe);break;case"selectionchange":if(C2)break;case"keydown":case"keyup":y_(ce,c,oe)}var Pe;if(Gh)e:{switch(i){case"compositionstart":var Ke="onCompositionStart";break e;case"compositionend":Ke="onCompositionEnd";break e;case"compositionupdate":Ke="onCompositionUpdate";break e}Ke=void 0}else Zi?s_(i,c)&&(Ke="onCompositionEnd"):i==="keydown"&&c.keyCode===229&&(Ke="onCompositionStart");Ke&&(t_&&c.locale!=="ko"&&(Zi||Ke!=="onCompositionStart"?Ke==="onCompositionEnd"&&Zi&&(Pe=J0()):(vs=oe,Uh="value"in vs?vs.value:vs.textContent,Zi=!0)),Se=iu(W,Ke),0<Se.length&&(Ke=new W0(Ke,i,null,c,oe),ce.push({event:Ke,listeners:Se}),Pe?Ke.data=Pe:(Pe=i_(c),Pe!==null&&(Ke.data=Pe)))),(Pe=g2?y2(i,c):_2(i,c))&&(Ke=iu(W,"onBeforeInput"),0<Ke.length&&(Se=new W0("onBeforeInput","beforeinput",null,c,oe),ce.push({event:Se,listeners:Ke}),Se.data=Pe)),cR(ce,i,W,c,oe)}Fv(ce,o)})}function $o(i,o,c){return{instance:i,listener:o,currentTarget:c}}function iu(i,o){for(var c=o+"Capture",d=[];i!==null;){var _=i,b=_.stateNode;if(_=_.tag,_!==5&&_!==26&&_!==27||b===null||(_=ao(i,c),_!=null&&d.unshift($o(i,_,b)),_=ao(i,o),_!=null&&d.push($o(i,_,b))),i.tag===3)return d;i=i.return}return[]}function dR(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function Hv(i,o,c,d,_){for(var b=o._reactName,k=[];c!==null&&c!==d;){var A=c,$=A.alternate,W=A.stateNode;if(A=A.tag,$!==null&&$===d)break;A!==5&&A!==26&&A!==27||W===null||($=W,_?(W=ao(c,b),W!=null&&k.unshift($o(c,W,$))):_||(W=ao(c,b),W!=null&&k.push($o(c,W,$)))),c=c.return}k.length!==0&&i.push({event:o,listeners:k})}var pR=/\r\n?/g,mR=/\u0000|\uFFFD/g;function Gv(i){return(typeof i=="string"?i:""+i).replace(pR,`
`).replace(mR,"")}function Kv(i,o){return o=Gv(o),Gv(i)===o}function ft(i,o,c,d,_,b){switch(c){case"children":typeof d=="string"?o==="body"||o==="textarea"&&d===""||Hi(i,d):(typeof d=="number"||typeof d=="bigint")&&o!=="body"&&Hi(i,""+d);break;case"className":cc(i,"class",d);break;case"tabIndex":cc(i,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":cc(i,c,d);break;case"style":K0(i,d,b);break;case"data":if(o!=="object"){cc(i,"data",d);break}case"src":case"href":if(d===""&&(o!=="a"||c!=="href")){i.removeAttribute(c);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){i.removeAttribute(c);break}d=fc(""+d),i.setAttribute(c,d);break;case"action":case"formAction":if(typeof d=="function"){i.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof b=="function"&&(c==="formAction"?(o!=="input"&&ft(i,o,"name",_.name,_,null),ft(i,o,"formEncType",_.formEncType,_,null),ft(i,o,"formMethod",_.formMethod,_,null),ft(i,o,"formTarget",_.formTarget,_,null)):(ft(i,o,"encType",_.encType,_,null),ft(i,o,"method",_.method,_,null),ft(i,o,"target",_.target,_,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){i.removeAttribute(c);break}d=fc(""+d),i.setAttribute(c,d);break;case"onClick":d!=null&&(i.onclick=Qr);break;case"onScroll":d!=null&&Ve("scroll",i);break;case"onScrollEnd":d!=null&&Ve("scrollend",i);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(r(61));if(c=d.__html,c!=null){if(_.children!=null)throw Error(r(60));i.innerHTML=c}}break;case"multiple":i.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":i.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){i.removeAttribute("xlink:href");break}c=fc(""+d),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?i.setAttribute(c,""+d):i.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?i.setAttribute(c,""):i.removeAttribute(c);break;case"capture":case"download":d===!0?i.setAttribute(c,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?i.setAttribute(c,d):i.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?i.setAttribute(c,d):i.removeAttribute(c);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?i.removeAttribute(c):i.setAttribute(c,d);break;case"popover":Ve("beforetoggle",i),Ve("toggle",i),lc(i,"popover",d);break;case"xlinkActuate":Zr(i,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":Zr(i,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":Zr(i,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":Zr(i,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":Zr(i,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":Zr(i,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":Zr(i,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":Zr(i,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":Zr(i,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":lc(i,"is",d);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=FA.get(c)||c,lc(i,c,d))}}function wp(i,o,c,d,_,b){switch(c){case"style":K0(i,d,b);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(r(61));if(c=d.__html,c!=null){if(_.children!=null)throw Error(r(60));i.innerHTML=c}}break;case"children":typeof d=="string"?Hi(i,d):(typeof d=="number"||typeof d=="bigint")&&Hi(i,""+d);break;case"onScroll":d!=null&&Ve("scroll",i);break;case"onScrollEnd":d!=null&&Ve("scrollend",i);break;case"onClick":d!=null&&(i.onclick=Qr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!P0.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(_=c.endsWith("Capture"),o=c.slice(2,_?c.length-7:void 0),b=i[Nn]||null,b=b!=null?b[c]:null,typeof b=="function"&&i.removeEventListener(o,b,_),typeof d=="function")){typeof b!="function"&&b!==null&&(c in i?i[c]=null:i.hasAttribute(c)&&i.removeAttribute(c)),i.addEventListener(o,d,_);break e}c in i?i[c]=d:d===!0?i.setAttribute(c,""):lc(i,c,d)}}}function on(i,o,c){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ve("error",i),Ve("load",i);var d=!1,_=!1,b;for(b in c)if(c.hasOwnProperty(b)){var k=c[b];if(k!=null)switch(b){case"src":d=!0;break;case"srcSet":_=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,o));default:ft(i,o,b,k,c,null)}}_&&ft(i,o,"srcSet",c.srcSet,c,null),d&&ft(i,o,"src",c.src,c,null);return;case"input":Ve("invalid",i);var A=b=k=_=null,$=null,W=null;for(d in c)if(c.hasOwnProperty(d)){var oe=c[d];if(oe!=null)switch(d){case"name":_=oe;break;case"type":k=oe;break;case"checked":$=oe;break;case"defaultChecked":W=oe;break;case"value":b=oe;break;case"defaultValue":A=oe;break;case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(r(137,o));break;default:ft(i,o,d,oe,c,null)}}F0(i,b,A,$,W,k,_,!1);return;case"select":Ve("invalid",i),d=k=b=null;for(_ in c)if(c.hasOwnProperty(_)&&(A=c[_],A!=null))switch(_){case"value":b=A;break;case"defaultValue":k=A;break;case"multiple":d=A;default:ft(i,o,_,A,c,null)}o=b,c=k,i.multiple=!!d,o!=null?Vi(i,!!d,o,!1):c!=null&&Vi(i,!!d,c,!0);return;case"textarea":Ve("invalid",i),b=_=d=null;for(k in c)if(c.hasOwnProperty(k)&&(A=c[k],A!=null))switch(k){case"value":d=A;break;case"defaultValue":_=A;break;case"children":b=A;break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(r(91));break;default:ft(i,o,k,A,c,null)}H0(i,d,_,b);return;case"option":for($ in c)c.hasOwnProperty($)&&(d=c[$],d!=null)&&($==="selected"?i.selected=d&&typeof d!="function"&&typeof d!="symbol":ft(i,o,$,d,c,null));return;case"dialog":Ve("beforetoggle",i),Ve("toggle",i),Ve("cancel",i),Ve("close",i);break;case"iframe":case"object":Ve("load",i);break;case"video":case"audio":for(d=0;d<Bo.length;d++)Ve(Bo[d],i);break;case"image":Ve("error",i),Ve("load",i);break;case"details":Ve("toggle",i);break;case"embed":case"source":case"link":Ve("error",i),Ve("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(W in c)if(c.hasOwnProperty(W)&&(d=c[W],d!=null))switch(W){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,o));default:ft(i,o,W,d,c,null)}return;default:if(jh(o)){for(oe in c)c.hasOwnProperty(oe)&&(d=c[oe],d!==void 0&&wp(i,o,oe,d,c,void 0));return}}for(A in c)c.hasOwnProperty(A)&&(d=c[A],d!=null&&ft(i,o,A,d,c,null))}function gR(i,o,c,d){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var _=null,b=null,k=null,A=null,$=null,W=null,oe=null;for(re in c){var ce=c[re];if(c.hasOwnProperty(re)&&ce!=null)switch(re){case"checked":break;case"value":break;case"defaultValue":$=ce;default:d.hasOwnProperty(re)||ft(i,o,re,null,d,ce)}}for(var te in d){var re=d[te];if(ce=c[te],d.hasOwnProperty(te)&&(re!=null||ce!=null))switch(te){case"type":b=re;break;case"name":_=re;break;case"checked":W=re;break;case"defaultChecked":oe=re;break;case"value":k=re;break;case"defaultValue":A=re;break;case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(r(137,o));break;default:re!==ce&&ft(i,o,te,re,d,ce)}}Dh(i,k,A,$,W,oe,b,_);return;case"select":re=k=A=te=null;for(b in c)if($=c[b],c.hasOwnProperty(b)&&$!=null)switch(b){case"value":break;case"multiple":re=$;default:d.hasOwnProperty(b)||ft(i,o,b,null,d,$)}for(_ in d)if(b=d[_],$=c[_],d.hasOwnProperty(_)&&(b!=null||$!=null))switch(_){case"value":te=b;break;case"defaultValue":A=b;break;case"multiple":k=b;default:b!==$&&ft(i,o,_,b,d,$)}o=A,c=k,d=re,te!=null?Vi(i,!!c,te,!1):!!d!=!!c&&(o!=null?Vi(i,!!c,o,!0):Vi(i,!!c,c?[]:"",!1));return;case"textarea":re=te=null;for(A in c)if(_=c[A],c.hasOwnProperty(A)&&_!=null&&!d.hasOwnProperty(A))switch(A){case"value":break;case"children":break;default:ft(i,o,A,null,d,_)}for(k in d)if(_=d[k],b=c[k],d.hasOwnProperty(k)&&(_!=null||b!=null))switch(k){case"value":te=_;break;case"defaultValue":re=_;break;case"children":break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(r(91));break;default:_!==b&&ft(i,o,k,_,d,b)}V0(i,te,re);return;case"option":for(var _e in c)te=c[_e],c.hasOwnProperty(_e)&&te!=null&&!d.hasOwnProperty(_e)&&(_e==="selected"?i.selected=!1:ft(i,o,_e,null,d,te));for($ in d)te=d[$],re=c[$],d.hasOwnProperty($)&&te!==re&&(te!=null||re!=null)&&($==="selected"?i.selected=te&&typeof te!="function"&&typeof te!="symbol":ft(i,o,$,te,d,re));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Re in c)te=c[Re],c.hasOwnProperty(Re)&&te!=null&&!d.hasOwnProperty(Re)&&ft(i,o,Re,null,d,te);for(W in d)if(te=d[W],re=c[W],d.hasOwnProperty(W)&&te!==re&&(te!=null||re!=null))switch(W){case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(r(137,o));break;default:ft(i,o,W,te,d,re)}return;default:if(jh(o)){for(var ht in c)te=c[ht],c.hasOwnProperty(ht)&&te!==void 0&&!d.hasOwnProperty(ht)&&wp(i,o,ht,void 0,d,te);for(oe in d)te=d[oe],re=c[oe],!d.hasOwnProperty(oe)||te===re||te===void 0&&re===void 0||wp(i,o,oe,te,d,re);return}}for(var Z in c)te=c[Z],c.hasOwnProperty(Z)&&te!=null&&!d.hasOwnProperty(Z)&&ft(i,o,Z,null,d,te);for(ce in d)te=d[ce],re=c[ce],!d.hasOwnProperty(ce)||te===re||te==null&&re==null||ft(i,o,ce,te,d,re)}function Zv(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function yR(){if(typeof performance.getEntriesByType=="function"){for(var i=0,o=0,c=performance.getEntriesByType("resource"),d=0;d<c.length;d++){var _=c[d],b=_.transferSize,k=_.initiatorType,A=_.duration;if(b&&A&&Zv(k)){for(k=0,A=_.responseEnd,d+=1;d<c.length;d++){var $=c[d],W=$.startTime;if(W>A)break;var oe=$.transferSize,ce=$.initiatorType;oe&&Zv(ce)&&($=$.responseEnd,k+=oe*($<A?1:(A-W)/($-W)))}if(--d,o+=8*(b+k)/(_.duration/1e3),i++,10<i)break}}if(0<i)return o/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var Sp=null,kp=null;function au(i){return i.nodeType===9?i:i.ownerDocument}function Qv(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Jv(i,o){if(i===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&o==="foreignObject"?0:i}function Ep(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Cp=null;function _R(){var i=window.event;return i&&i.type==="popstate"?i===Cp?!1:(Cp=i,!0):(Cp=null,!1)}var Yv=typeof setTimeout=="function"?setTimeout:void 0,bR=typeof clearTimeout=="function"?clearTimeout:void 0,Xv=typeof Promise=="function"?Promise:void 0,vR=typeof queueMicrotask=="function"?queueMicrotask:typeof Xv<"u"?function(i){return Xv.resolve(null).then(i).catch(xR)}:Yv;function xR(i){setTimeout(function(){throw i})}function zs(i){return i==="head"}function Wv(i,o){var c=o,d=0;do{var _=c.nextSibling;if(i.removeChild(c),_&&_.nodeType===8)if(c=_.data,c==="/$"||c==="/&"){if(d===0){i.removeChild(_),wa(o);return}d--}else if(c==="$"||c==="$?"||c==="$~"||c==="$!"||c==="&")d++;else if(c==="html")Uo(i.ownerDocument.documentElement);else if(c==="head"){c=i.ownerDocument.head,Uo(c);for(var b=c.firstChild;b;){var k=b.nextSibling,A=b.nodeName;b[so]||A==="SCRIPT"||A==="STYLE"||A==="LINK"&&b.rel.toLowerCase()==="stylesheet"||c.removeChild(b),b=k}}else c==="body"&&Uo(i.ownerDocument.body);c=_}while(c);wa(o)}function ex(i,o){var c=i;i=0;do{var d=c.nextSibling;if(c.nodeType===1?o?(c._stashedDisplay=c.style.display,c.style.display="none"):(c.style.display=c._stashedDisplay||"",c.getAttribute("style")===""&&c.removeAttribute("style")):c.nodeType===3&&(o?(c._stashedText=c.nodeValue,c.nodeValue=""):c.nodeValue=c._stashedText||""),d&&d.nodeType===8)if(c=d.data,c==="/$"){if(i===0)break;i--}else c!=="$"&&c!=="$?"&&c!=="$~"&&c!=="$!"||i++;c=d}while(c)}function Tp(i){var o=i.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var c=o;switch(o=o.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":Tp(c),Ih(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}i.removeChild(c)}}function wR(i,o,c,d){for(;i.nodeType===1;){var _=c;if(i.nodeName.toLowerCase()!==o.toLowerCase()){if(!d&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(d){if(!i[so])switch(o){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(b=i.getAttribute("rel"),b==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(b!==_.rel||i.getAttribute("href")!==(_.href==null||_.href===""?null:_.href)||i.getAttribute("crossorigin")!==(_.crossOrigin==null?null:_.crossOrigin)||i.getAttribute("title")!==(_.title==null?null:_.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(b=i.getAttribute("src"),(b!==(_.src==null?null:_.src)||i.getAttribute("type")!==(_.type==null?null:_.type)||i.getAttribute("crossorigin")!==(_.crossOrigin==null?null:_.crossOrigin))&&b&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(o==="input"&&i.type==="hidden"){var b=_.name==null?null:""+_.name;if(_.type==="hidden"&&i.getAttribute("name")===b)return i}else return i;if(i=dr(i.nextSibling),i===null)break}return null}function SR(i,o,c){if(o==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!c||(i=dr(i.nextSibling),i===null))return null;return i}function tx(i,o){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!o||(i=dr(i.nextSibling),i===null))return null;return i}function Ap(i){return i.data==="$?"||i.data==="$~"}function Rp(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function kR(i,o){var c=i.ownerDocument;if(i.data==="$~")i._reactRetry=o;else if(i.data!=="$?"||c.readyState!=="loading")o();else{var d=function(){o(),c.removeEventListener("DOMContentLoaded",d)};c.addEventListener("DOMContentLoaded",d),i._reactRetry=d}}function dr(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return i}var Op=null;function nx(i){i=i.nextSibling;for(var o=0;i;){if(i.nodeType===8){var c=i.data;if(c==="/$"||c==="/&"){if(o===0)return dr(i.nextSibling);o--}else c!=="$"&&c!=="$!"&&c!=="$?"&&c!=="$~"&&c!=="&"||o++}i=i.nextSibling}return null}function rx(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var c=i.data;if(c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"){if(o===0)return i;o--}else c!=="/$"&&c!=="/&"||o++}i=i.previousSibling}return null}function sx(i,o,c){switch(o=au(c),i){case"html":if(i=o.documentElement,!i)throw Error(r(452));return i;case"head":if(i=o.head,!i)throw Error(r(453));return i;case"body":if(i=o.body,!i)throw Error(r(454));return i;default:throw Error(r(451))}}function Uo(i){for(var o=i.attributes;o.length;)i.removeAttributeNode(o[0]);Ih(i)}var pr=new Map,ix=new Set;function ou(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var fs=F.d;F.d={f:ER,r:CR,D:TR,C:AR,L:RR,m:OR,X:IR,S:NR,M:MR};function ER(){var i=fs.f(),o=Xc();return i||o}function CR(i){var o=Ui(i);o!==null&&o.tag===5&&o.type==="form"?wb(o):fs.r(i)}var ba=typeof document>"u"?null:document;function ax(i,o,c){var d=ba;if(d&&typeof o=="string"&&o){var _=ar(o);_='link[rel="'+i+'"][href="'+_+'"]',typeof c=="string"&&(_+='[crossorigin="'+c+'"]'),ix.has(_)||(ix.add(_),i={rel:i,crossOrigin:c,href:o},d.querySelector(_)===null&&(o=d.createElement("link"),on(o,"link",i),Kt(o),d.head.appendChild(o)))}}function TR(i){fs.D(i),ax("dns-prefetch",i,null)}function AR(i,o){fs.C(i,o),ax("preconnect",i,o)}function RR(i,o,c){fs.L(i,o,c);var d=ba;if(d&&i&&o){var _='link[rel="preload"][as="'+ar(o)+'"]';o==="image"&&c&&c.imageSrcSet?(_+='[imagesrcset="'+ar(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(_+='[imagesizes="'+ar(c.imageSizes)+'"]')):_+='[href="'+ar(i)+'"]';var b=_;switch(o){case"style":b=va(i);break;case"script":b=xa(i)}pr.has(b)||(i=p({rel:"preload",href:o==="image"&&c&&c.imageSrcSet?void 0:i,as:o},c),pr.set(b,i),d.querySelector(_)!==null||o==="style"&&d.querySelector(qo(b))||o==="script"&&d.querySelector(Fo(b))||(o=d.createElement("link"),on(o,"link",i),Kt(o),d.head.appendChild(o)))}}function OR(i,o){fs.m(i,o);var c=ba;if(c&&i){var d=o&&typeof o.as=="string"?o.as:"script",_='link[rel="modulepreload"][as="'+ar(d)+'"][href="'+ar(i)+'"]',b=_;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":b=xa(i)}if(!pr.has(b)&&(i=p({rel:"modulepreload",href:i},o),pr.set(b,i),c.querySelector(_)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(Fo(b)))return}d=c.createElement("link"),on(d,"link",i),Kt(d),c.head.appendChild(d)}}}function NR(i,o,c){fs.S(i,o,c);var d=ba;if(d&&i){var _=qi(d).hoistableStyles,b=va(i);o=o||"default";var k=_.get(b);if(!k){var A={loading:0,preload:null};if(k=d.querySelector(qo(b)))A.loading=5;else{i=p({rel:"stylesheet",href:i,"data-precedence":o},c),(c=pr.get(b))&&Np(i,c);var $=k=d.createElement("link");Kt($),on($,"link",i),$._p=new Promise(function(W,oe){$.onload=W,$.onerror=oe}),$.addEventListener("load",function(){A.loading|=1}),$.addEventListener("error",function(){A.loading|=2}),A.loading|=4,lu(k,o,d)}k={type:"stylesheet",instance:k,count:1,state:A},_.set(b,k)}}}function IR(i,o){fs.X(i,o);var c=ba;if(c&&i){var d=qi(c).hoistableScripts,_=xa(i),b=d.get(_);b||(b=c.querySelector(Fo(_)),b||(i=p({src:i,async:!0},o),(o=pr.get(_))&&Ip(i,o),b=c.createElement("script"),Kt(b),on(b,"link",i),c.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},d.set(_,b))}}function MR(i,o){fs.M(i,o);var c=ba;if(c&&i){var d=qi(c).hoistableScripts,_=xa(i),b=d.get(_);b||(b=c.querySelector(Fo(_)),b||(i=p({src:i,async:!0,type:"module"},o),(o=pr.get(_))&&Ip(i,o),b=c.createElement("script"),Kt(b),on(b,"link",i),c.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},d.set(_,b))}}function ox(i,o,c,d){var _=(_=pe.current)?ou(_):null;if(!_)throw Error(r(446));switch(i){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(o=va(c.href),c=qi(_).hoistableStyles,d=c.get(o),d||(d={type:"style",instance:null,count:0,state:null},c.set(o,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){i=va(c.href);var b=qi(_).hoistableStyles,k=b.get(i);if(k||(_=_.ownerDocument||_,k={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},b.set(i,k),(b=_.querySelector(qo(i)))&&!b._p&&(k.instance=b,k.state.loading=5),pr.has(i)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},pr.set(i,c),b||DR(_,i,c,k.state))),o&&d===null)throw Error(r(528,""));return k}if(o&&d!==null)throw Error(r(529,""));return null;case"script":return o=c.async,c=c.src,typeof c=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=xa(c),c=qi(_).hoistableScripts,d=c.get(o),d||(d={type:"script",instance:null,count:0,state:null},c.set(o,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,i))}}function va(i){return'href="'+ar(i)+'"'}function qo(i){return'link[rel="stylesheet"]['+i+"]"}function lx(i){return p({},i,{"data-precedence":i.precedence,precedence:null})}function DR(i,o,c,d){i.querySelector('link[rel="preload"][as="style"]['+o+"]")?d.loading=1:(o=i.createElement("link"),d.preload=o,o.addEventListener("load",function(){return d.loading|=1}),o.addEventListener("error",function(){return d.loading|=2}),on(o,"link",c),Kt(o),i.head.appendChild(o))}function xa(i){return'[src="'+ar(i)+'"]'}function Fo(i){return"script[async]"+i}function cx(i,o,c){if(o.count++,o.instance===null)switch(o.type){case"style":var d=i.querySelector('style[data-href~="'+ar(c.href)+'"]');if(d)return o.instance=d,Kt(d),d;var _=p({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return d=(i.ownerDocument||i).createElement("style"),Kt(d),on(d,"style",_),lu(d,c.precedence,i),o.instance=d;case"stylesheet":_=va(c.href);var b=i.querySelector(qo(_));if(b)return o.state.loading|=4,o.instance=b,Kt(b),b;d=lx(c),(_=pr.get(_))&&Np(d,_),b=(i.ownerDocument||i).createElement("link"),Kt(b);var k=b;return k._p=new Promise(function(A,$){k.onload=A,k.onerror=$}),on(b,"link",d),o.state.loading|=4,lu(b,c.precedence,i),o.instance=b;case"script":return b=xa(c.src),(_=i.querySelector(Fo(b)))?(o.instance=_,Kt(_),_):(d=c,(_=pr.get(b))&&(d=p({},c),Ip(d,_)),i=i.ownerDocument||i,_=i.createElement("script"),Kt(_),on(_,"link",d),i.head.appendChild(_),o.instance=_);case"void":return null;default:throw Error(r(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(d=o.instance,o.state.loading|=4,lu(d,c.precedence,i));return o.instance}function lu(i,o,c){for(var d=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),_=d.length?d[d.length-1]:null,b=_,k=0;k<d.length;k++){var A=d[k];if(A.dataset.precedence===o)b=A;else if(b!==_)break}b?b.parentNode.insertBefore(i,b.nextSibling):(o=c.nodeType===9?c.head:c,o.insertBefore(i,o.firstChild))}function Np(i,o){i.crossOrigin==null&&(i.crossOrigin=o.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=o.referrerPolicy),i.title==null&&(i.title=o.title)}function Ip(i,o){i.crossOrigin==null&&(i.crossOrigin=o.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=o.referrerPolicy),i.integrity==null&&(i.integrity=o.integrity)}var cu=null;function ux(i,o,c){if(cu===null){var d=new Map,_=cu=new Map;_.set(c,d)}else _=cu,d=_.get(c),d||(d=new Map,_.set(c,d));if(d.has(i))return d;for(d.set(i,null),c=c.getElementsByTagName(i),_=0;_<c.length;_++){var b=c[_];if(!(b[so]||b[nn]||i==="link"&&b.getAttribute("rel")==="stylesheet")&&b.namespaceURI!=="http://www.w3.org/2000/svg"){var k=b.getAttribute(o)||"";k=i+k;var A=d.get(k);A?A.push(b):d.set(k,[b])}}return d}function fx(i,o,c){i=i.ownerDocument||i,i.head.insertBefore(c,o==="title"?i.querySelector("head > title"):null)}function LR(i,o,c){if(c===1||o.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;return o.rel==="stylesheet"?(i=o.disabled,typeof o.precedence=="string"&&i==null):!0;case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function hx(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function jR(i,o,c,d){if(c.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var _=va(d.href),b=o.querySelector(qo(_));if(b){o=b._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(i.count++,i=uu.bind(i),o.then(i,i)),c.state.loading|=4,c.instance=b,Kt(b);return}b=o.ownerDocument||o,d=lx(d),(_=pr.get(_))&&Np(d,_),b=b.createElement("link"),Kt(b);var k=b;k._p=new Promise(function(A,$){k.onload=A,k.onerror=$}),on(b,"link",d),c.instance=b}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(c,o),(o=c.state.preload)&&(c.state.loading&3)===0&&(i.count++,c=uu.bind(i),o.addEventListener("load",c),o.addEventListener("error",c))}}var Mp=0;function zR(i,o){return i.stylesheets&&i.count===0&&hu(i,i.stylesheets),0<i.count||0<i.imgCount?function(c){var d=setTimeout(function(){if(i.stylesheets&&hu(i,i.stylesheets),i.unsuspend){var b=i.unsuspend;i.unsuspend=null,b()}},6e4+o);0<i.imgBytes&&Mp===0&&(Mp=62500*yR());var _=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&hu(i,i.stylesheets),i.unsuspend)){var b=i.unsuspend;i.unsuspend=null,b()}},(i.imgBytes>Mp?50:800)+o);return i.unsuspend=c,function(){i.unsuspend=null,clearTimeout(d),clearTimeout(_)}}:null}function uu(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)hu(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var fu=null;function hu(i,o){i.stylesheets=null,i.unsuspend!==null&&(i.count++,fu=new Map,o.forEach(PR,i),fu=null,uu.call(i))}function PR(i,o){if(!(o.state.loading&4)){var c=fu.get(i);if(c)var d=c.get(null);else{c=new Map,fu.set(i,c);for(var _=i.querySelectorAll("link[data-precedence],style[data-precedence]"),b=0;b<_.length;b++){var k=_[b];(k.nodeName==="LINK"||k.getAttribute("media")!=="not all")&&(c.set(k.dataset.precedence,k),d=k)}d&&c.set(null,d)}_=o.instance,k=_.getAttribute("data-precedence"),b=c.get(k)||d,b===d&&c.set(null,_),c.set(k,_),this.count++,d=uu.bind(this),_.addEventListener("load",d),_.addEventListener("error",d),b?b.parentNode.insertBefore(_,b.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(_,i.firstChild)),o.state.loading|=4}}var Vo={$$typeof:T,Provider:null,Consumer:null,_currentValue:se,_currentValue2:se,_threadCount:0};function BR(i,o,c,d,_,b,k,A,$){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ah(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ah(0),this.hiddenUpdates=Ah(null),this.identifierPrefix=d,this.onUncaughtError=_,this.onCaughtError=b,this.onRecoverableError=k,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=$,this.incompleteTransitions=new Map}function dx(i,o,c,d,_,b,k,A,$,W,oe,ce){return i=new BR(i,o,c,k,$,W,oe,ce,A),o=1,b===!0&&(o|=24),b=Gn(3,null,null,o),i.current=b,b.stateNode=i,o=hd(),o.refCount++,i.pooledCache=o,o.refCount++,b.memoizedState={element:d,isDehydrated:c,cache:o},gd(b),i}function px(i){return i?(i=Xi,i):Xi}function mx(i,o,c,d,_,b){_=px(_),d.context===null?d.context=_:d.pendingContext=_,d=Cs(o),d.payload={element:c},b=b===void 0?null:b,b!==null&&(d.callback=b),c=Ts(i,d,o),c!==null&&(zn(c,i,o),wo(c,i,o))}function gx(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var c=i.retryLane;i.retryLane=c!==0&&c<o?c:o}}function Dp(i,o){gx(i,o),(i=i.alternate)&&gx(i,o)}function yx(i){if(i.tag===13||i.tag===31){var o=li(i,67108864);o!==null&&zn(o,i,67108864),Dp(i,67108864)}}function _x(i){if(i.tag===13||i.tag===31){var o=Yn();o=Rh(o);var c=li(i,o);c!==null&&zn(c,i,o),Dp(i,o)}}var du=!0;function $R(i,o,c,d){var _=z.T;z.T=null;var b=F.p;try{F.p=2,Lp(i,o,c,d)}finally{F.p=b,z.T=_}}function UR(i,o,c,d){var _=z.T;z.T=null;var b=F.p;try{F.p=8,Lp(i,o,c,d)}finally{F.p=b,z.T=_}}function Lp(i,o,c,d){if(du){var _=jp(d);if(_===null)xp(i,o,d,pu,c),vx(i,d);else if(FR(_,i,o,c,d))d.stopPropagation();else if(vx(i,d),o&4&&-1<qR.indexOf(i)){for(;_!==null;){var b=Ui(_);if(b!==null)switch(b.tag){case 3:if(b=b.stateNode,b.current.memoizedState.isDehydrated){var k=ri(b.pendingLanes);if(k!==0){var A=b;for(A.pendingLanes|=2,A.entangledLanes|=2;k;){var $=1<<31-dt(k);A.entanglements[1]|=$,k&=~$}Dr(b),(st&6)===0&&(Jc=xe()+500,Po(0))}}break;case 31:case 13:A=li(b,2),A!==null&&zn(A,b,2),Xc(),Dp(b,2)}if(b=jp(d),b===null&&xp(i,o,d,pu,c),b===_)break;_=b}_!==null&&d.stopPropagation()}else xp(i,o,d,null,c)}}function jp(i){return i=Ph(i),zp(i)}var pu=null;function zp(i){if(pu=null,i=$i(i),i!==null){var o=a(i);if(o===null)i=null;else{var c=o.tag;if(c===13){if(i=l(o),i!==null)return i;i=null}else if(c===31){if(i=u(o),i!==null)return i;i=null}else if(c===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null)}}return pu=i,null}function bx(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(We()){case ne:return 2;case ue:return 8;case ye:case ve:return 32;case Te:return 268435456;default:return 32}default:return 32}}var Pp=!1,Ps=null,Bs=null,$s=null,Ho=new Map,Go=new Map,Us=[],qR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function vx(i,o){switch(i){case"focusin":case"focusout":Ps=null;break;case"dragenter":case"dragleave":Bs=null;break;case"mouseover":case"mouseout":$s=null;break;case"pointerover":case"pointerout":Ho.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Go.delete(o.pointerId)}}function Ko(i,o,c,d,_,b){return i===null||i.nativeEvent!==b?(i={blockedOn:o,domEventName:c,eventSystemFlags:d,nativeEvent:b,targetContainers:[_]},o!==null&&(o=Ui(o),o!==null&&yx(o)),i):(i.eventSystemFlags|=d,o=i.targetContainers,_!==null&&o.indexOf(_)===-1&&o.push(_),i)}function FR(i,o,c,d,_){switch(o){case"focusin":return Ps=Ko(Ps,i,o,c,d,_),!0;case"dragenter":return Bs=Ko(Bs,i,o,c,d,_),!0;case"mouseover":return $s=Ko($s,i,o,c,d,_),!0;case"pointerover":var b=_.pointerId;return Ho.set(b,Ko(Ho.get(b)||null,i,o,c,d,_)),!0;case"gotpointercapture":return b=_.pointerId,Go.set(b,Ko(Go.get(b)||null,i,o,c,d,_)),!0}return!1}function xx(i){var o=$i(i.target);if(o!==null){var c=a(o);if(c!==null){if(o=c.tag,o===13){if(o=l(c),o!==null){i.blockedOn=o,L0(i.priority,function(){_x(c)});return}}else if(o===31){if(o=u(c),o!==null){i.blockedOn=o,L0(i.priority,function(){_x(c)});return}}else if(o===3&&c.stateNode.current.memoizedState.isDehydrated){i.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}i.blockedOn=null}function mu(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var c=jp(i.nativeEvent);if(c===null){c=i.nativeEvent;var d=new c.constructor(c.type,c);zh=d,c.target.dispatchEvent(d),zh=null}else return o=Ui(c),o!==null&&yx(o),i.blockedOn=c,!1;o.shift()}return!0}function wx(i,o,c){mu(i)&&c.delete(o)}function VR(){Pp=!1,Ps!==null&&mu(Ps)&&(Ps=null),Bs!==null&&mu(Bs)&&(Bs=null),$s!==null&&mu($s)&&($s=null),Ho.forEach(wx),Go.forEach(wx)}function gu(i,o){i.blockedOn===o&&(i.blockedOn=null,Pp||(Pp=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,VR)))}var yu=null;function Sx(i){yu!==i&&(yu=i,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){yu===i&&(yu=null);for(var o=0;o<i.length;o+=3){var c=i[o],d=i[o+1],_=i[o+2];if(typeof d!="function"){if(zp(d||c)===null)continue;break}var b=Ui(c);b!==null&&(i.splice(o,3),o-=3,jd(b,{pending:!0,data:_,method:c.method,action:d},d,_))}}))}function wa(i){function o($){return gu($,i)}Ps!==null&&gu(Ps,i),Bs!==null&&gu(Bs,i),$s!==null&&gu($s,i),Ho.forEach(o),Go.forEach(o);for(var c=0;c<Us.length;c++){var d=Us[c];d.blockedOn===i&&(d.blockedOn=null)}for(;0<Us.length&&(c=Us[0],c.blockedOn===null);)xx(c),c.blockedOn===null&&Us.shift();if(c=(i.ownerDocument||i).$$reactFormReplay,c!=null)for(d=0;d<c.length;d+=3){var _=c[d],b=c[d+1],k=_[Nn]||null;if(typeof b=="function")k||Sx(c);else if(k){var A=null;if(b&&b.hasAttribute("formAction")){if(_=b,k=b[Nn]||null)A=k.formAction;else if(zp(_)!==null)continue}else A=k.action;typeof A=="function"?c[d+1]=A:(c.splice(d,3),d-=3),Sx(c)}}}function kx(){function i(b){b.canIntercept&&b.info==="react-transition"&&b.intercept({handler:function(){return new Promise(function(k){return _=k})},focusReset:"manual",scroll:"manual"})}function o(){_!==null&&(_(),_=null),d||setTimeout(c,20)}function c(){if(!d&&!navigation.transition){var b=navigation.currentEntry;b&&b.url!=null&&navigation.navigate(b.url,{state:b.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var d=!1,_=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(c,100),function(){d=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),_!==null&&(_(),_=null)}}}function Bp(i){this._internalRoot=i}_u.prototype.render=Bp.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(r(409));var c=o.current,d=Yn();mx(c,d,i,o,null,null)},_u.prototype.unmount=Bp.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;mx(i.current,2,null,i,null,null),Xc(),o[Bi]=null}};function _u(i){this._internalRoot=i}_u.prototype.unstable_scheduleHydration=function(i){if(i){var o=D0();i={blockedOn:null,target:i,priority:o};for(var c=0;c<Us.length&&o!==0&&o<Us[c].priority;c++);Us.splice(c,0,i),c===0&&xx(i)}};var Ex=e.version;if(Ex!=="19.2.3")throw Error(r(527,Ex,"19.2.3"));F.findDOMNode=function(i){var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(r(188)):(i=Object.keys(i).join(","),Error(r(268,i)));return i=h(o),i=i!==null?m(i):null,i=i===null?null:i.stateNode,i};var HR={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:z,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var bu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!bu.isDisabled&&bu.supportsFiber)try{et=bu.inject(HR),_t=bu}catch{}}return Qo.createRoot=function(i,o){if(!s(i))throw Error(r(299));var c=!1,d="",_=Ib,b=Mb,k=Db;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(d=o.identifierPrefix),o.onUncaughtError!==void 0&&(_=o.onUncaughtError),o.onCaughtError!==void 0&&(b=o.onCaughtError),o.onRecoverableError!==void 0&&(k=o.onRecoverableError)),o=dx(i,1,!1,null,null,c,d,null,_,b,k,kx),i[Bi]=o.current,vp(i),new Bp(o)},Qo.hydrateRoot=function(i,o,c){if(!s(i))throw Error(r(299));var d=!1,_="",b=Ib,k=Mb,A=Db,$=null;return c!=null&&(c.unstable_strictMode===!0&&(d=!0),c.identifierPrefix!==void 0&&(_=c.identifierPrefix),c.onUncaughtError!==void 0&&(b=c.onUncaughtError),c.onCaughtError!==void 0&&(k=c.onCaughtError),c.onRecoverableError!==void 0&&(A=c.onRecoverableError),c.formState!==void 0&&($=c.formState)),o=dx(i,1,!0,o,c??null,d,_,$,b,k,A,kx),o.context=px(null),c=o.current,d=Yn(),d=Rh(d),_=Cs(d),_.callback=null,Ts(c,_,d),c=d,o.current.lanes=c,ro(o,c),Dr(o),i[Bi]=o.current,vp(i),new _u(o)},Qo.version="19.2.3",Qo}var Lx;function eO(){if(Lx)return qp.exports;Lx=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),qp.exports=WR(),qp.exports}var tO=eO(),Vl=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},nO={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},rO=class{#e=nO;#t=!1;setTimeoutProvider(t){this.#e=t}setTimeout(t,e){return this.#e.setTimeout(t,e)}clearTimeout(t){this.#e.clearTimeout(t)}setInterval(t,e){return this.#e.setInterval(t,e)}clearInterval(t){this.#e.clearInterval(t)}},Ti=new rO;function sO(t){setTimeout(t,0)}var Fa=typeof window>"u"||"Deno"in globalThis;function gr(){}function iO(t,e){return typeof t=="function"?t(e):t}function $m(t){return typeof t=="number"&&t>=0&&t!==1/0}function QS(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Js(t,e){return typeof t=="function"?t(e):t}function yr(t,e){return typeof t=="function"?t(e):t}function jx(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:a,queryKey:l,stale:u}=t;if(l){if(r){if(e.queryHash!==Wg(l,e.options))return!1}else if(!Rl(e.queryKey,l))return!1}if(n!=="all"){const f=e.isActive();if(n==="active"&&!f||n==="inactive"&&f)return!1}return!(typeof u=="boolean"&&e.isStale()!==u||s&&s!==e.state.fetchStatus||a&&!a(e))}function zx(t,e){const{exact:n,status:r,predicate:s,mutationKey:a}=t;if(a){if(!e.options.mutationKey)return!1;if(n){if(gs(e.options.mutationKey)!==gs(a))return!1}else if(!Rl(e.options.mutationKey,a))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function Wg(t,e){return(e?.queryKeyHashFn||gs)(t)}function gs(t){return JSON.stringify(t,(e,n)=>qm(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function Rl(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>Rl(t[n],e[n])):!1}var aO=Object.prototype.hasOwnProperty;function JS(t,e){if(t===e)return t;const n=Px(t)&&Px(e);if(!n&&!(qm(t)&&qm(e)))return e;const s=(n?t:Object.keys(t)).length,a=n?e:Object.keys(e),l=a.length,u=n?new Array(l):{};let f=0;for(let h=0;h<l;h++){const m=n?h:a[h],p=t[m],y=e[m];if(p===y){u[m]=p,(n?h<s:aO.call(t,m))&&f++;continue}if(p===null||y===null||typeof p!="object"||typeof y!="object"){u[m]=y;continue}const g=JS(p,y);u[m]=g,g===p&&f++}return s===l&&f===s?t:u}function Um(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function Px(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function qm(t){if(!Bx(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!Bx(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function Bx(t){return Object.prototype.toString.call(t)==="[object Object]"}function oO(t){return new Promise(e=>{Ti.setTimeout(e,t)})}function Fm(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?JS(t,e):e}function lO(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function cO(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var ey=Symbol();function YS(t,e){return!t.queryFn&&e?.initialPromise?()=>e.initialPromise:!t.queryFn||t.queryFn===ey?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function uO(t,e,n){let r=!1,s;return Object.defineProperty(t,"signal",{enumerable:!0,get:()=>(s??=e(),r||(r=!0,s.aborted?n():s.addEventListener("abort",n,{once:!0})),s)}),t}var fO=class extends Vl{#e;#t;#n;constructor(){super(),this.#n=t=>{if(!Fa&&window.addEventListener){const e=()=>t();return window.addEventListener("visibilitychange",e,!1),()=>{window.removeEventListener("visibilitychange",e)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#n=t,this.#t?.(),this.#t=t(e=>{typeof e=="boolean"?this.setFocused(e):this.onFocus()})}setFocused(t){this.#e!==t&&(this.#e=t,this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(e=>{e(t)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},ty=new fO;function Vm(){let t,e;const n=new Promise((s,a)=>{t=s,e=a});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}var hO=sO;function dO(){let t=[],e=0,n=u=>{u()},r=u=>{u()},s=hO;const a=u=>{e?t.push(u):s(()=>{n(u)})},l=()=>{const u=t;t=[],u.length&&s(()=>{r(()=>{u.forEach(f=>{n(f)})})})};return{batch:u=>{let f;e++;try{f=u()}finally{e--,e||l()}return f},batchCalls:u=>(...f)=>{a(()=>{u(...f)})},schedule:a,setNotifyFunction:u=>{n=u},setBatchNotifyFunction:u=>{r=u},setScheduler:u=>{s=u}}}var yn=dO(),pO=class extends Vl{#e=!0;#t;#n;constructor(){super(),this.#n=t=>{if(!Fa&&window.addEventListener){const e=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",e,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",n)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#n=t,this.#t?.(),this.#t=t(this.setOnline.bind(this))}setOnline(t){this.#e!==t&&(this.#e=t,this.listeners.forEach(n=>{n(t)}))}isOnline(){return this.#e}},of=new pO;function mO(t){return Math.min(1e3*2**t,3e4)}function XS(t){return(t??"online")==="online"?of.isOnline():!0}var Hm=class extends Error{constructor(t){super("CancelledError"),this.revert=t?.revert,this.silent=t?.silent}};function WS(t){let e=!1,n=0,r;const s=Vm(),a=()=>s.status!=="pending",l=x=>{if(!a()){const E=new Hm(x);y(E),t.onCancel?.(E)}},u=()=>{e=!0},f=()=>{e=!1},h=()=>ty.isFocused()&&(t.networkMode==="always"||of.isOnline())&&t.canRun(),m=()=>XS(t.networkMode)&&t.canRun(),p=x=>{a()||(r?.(),s.resolve(x))},y=x=>{a()||(r?.(),s.reject(x))},g=()=>new Promise(x=>{r=E=>{(a()||h())&&x(E)},t.onPause?.()}).then(()=>{r=void 0,a()||t.onContinue?.()}),v=()=>{if(a())return;let x;const E=n===0?t.initialPromise:void 0;try{x=E??t.fn()}catch(S){x=Promise.reject(S)}Promise.resolve(x).then(p).catch(S=>{if(a())return;const C=t.retry??(Fa?0:3),T=t.retryDelay??mO,L=typeof T=="function"?T(n,S):T,D=C===!0||typeof C=="number"&&n<C||typeof C=="function"&&C(n,S);if(e||!D){y(S);return}n++,t.onFail?.(n,S),oO(L).then(()=>h()?void 0:g()).then(()=>{e?y(S):v()})})};return{promise:s,status:()=>s.status,cancel:l,continue:()=>(r?.(),s),cancelRetry:u,continueRetry:f,canStart:m,start:()=>(m()?v():g().then(v),s)}}var ek=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),$m(this.gcTime)&&(this.#e=Ti.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Fa?1/0:300*1e3))}clearGcTimeout(){this.#e&&(Ti.clearTimeout(this.#e),this.#e=void 0)}},gO=class extends ek{#e;#t;#n;#r;#s;#o;#i;constructor(t){super(),this.#i=!1,this.#o=t.defaultOptions,this.setOptions(t.options),this.observers=[],this.#r=t.client,this.#n=this.#r.getQueryCache(),this.queryKey=t.queryKey,this.queryHash=t.queryHash,this.#e=Ux(this.options),this.state=t.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#s?.promise}setOptions(t){if(this.options={...this.#o,...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const e=Ux(this.options);e.data!==void 0&&(this.setState($x(e.data,e.dataUpdatedAt)),this.#e=e)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#n.remove(this)}setData(t,e){const n=Fm(this.state.data,t,this.options);return this.#a({data:n,type:"success",dataUpdatedAt:e?.updatedAt,manual:e?.manual}),n}setState(t,e){this.#a({type:"setState",state:t,setStateOptions:e})}cancel(t){const e=this.#s?.promise;return this.#s?.cancel(t),e?e.then(gr).catch(gr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(t=>yr(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===ey||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>Js(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!QS(this.state.dataUpdatedAt,t)}onFocus(){this.observers.find(e=>e.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#s?.continue()}onOnline(){this.observers.find(e=>e.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#s?.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(e=>e!==t),this.observers.length||(this.#s&&(this.#i?this.#s.cancel({revert:!0}):this.#s.cancelRetry()),this.scheduleGc()),this.#n.notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#a({type:"invalidate"})}async fetch(t,e){if(this.state.fetchStatus!=="idle"&&this.#s?.status()!=="rejected"){if(this.state.data!==void 0&&e?.cancelRefetch)this.cancel({silent:!0});else if(this.#s)return this.#s.continueRetry(),this.#s.promise}if(t&&this.setOptions(t),!this.options.queryFn){const u=this.observers.find(f=>f.options.queryFn);u&&this.setOptions(u.options)}const n=new AbortController,r=u=>{Object.defineProperty(u,"signal",{enumerable:!0,get:()=>(this.#i=!0,n.signal)})},s=()=>{const u=YS(this.options,e),h=(()=>{const m={client:this.#r,queryKey:this.queryKey,meta:this.meta};return r(m),m})();return this.#i=!1,this.options.persister?this.options.persister(u,h,this):u(h)},l=(()=>{const u={fetchOptions:e,options:this.options,queryKey:this.queryKey,client:this.#r,state:this.state,fetchFn:s};return r(u),u})();this.options.behavior?.onFetch(l,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==l.fetchOptions?.meta)&&this.#a({type:"fetch",meta:l.fetchOptions?.meta}),this.#s=WS({initialPromise:e?.initialPromise,fn:l.fetchFn,onCancel:u=>{u instanceof Hm&&u.revert&&this.setState({...this.#t,fetchStatus:"idle"}),n.abort()},onFail:(u,f)=>{this.#a({type:"failed",failureCount:u,error:f})},onPause:()=>{this.#a({type:"pause"})},onContinue:()=>{this.#a({type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0});try{const u=await this.#s.start();if(u===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(u),this.#n.config.onSuccess?.(u,this),this.#n.config.onSettled?.(u,this.state.error,this),u}catch(u){if(u instanceof Hm){if(u.silent)return this.#s.promise;if(u.revert){if(this.state.data===void 0)throw u;return this.state.data}}throw this.#a({type:"error",error:u}),this.#n.config.onError?.(u,this),this.#n.config.onSettled?.(this.state.data,u,this),u}finally{this.scheduleGc()}}#a(t){const e=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...tk(n.data,this.options),fetchMeta:t.meta??null};case"success":const r={...n,...$x(t.data,t.dataUpdatedAt),dataUpdateCount:n.dataUpdateCount+1,...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=t.manual?r:void 0,r;case"error":const s=t.error;return{...n,error:s,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=e(this.state),yn.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),this.#n.notify({query:this,type:"updated",action:t})})}};function tk(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:XS(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function $x(t,e){return{data:t,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function Ux(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var yO=class extends Vl{constructor(t,e){super(),this.options=e,this.#e=t,this.#a=null,this.#i=Vm(),this.bindMethods(),this.setOptions(e)}#e;#t=void 0;#n=void 0;#r=void 0;#s;#o;#i;#a;#p;#m;#c;#u;#l;#f;#h=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),qx(this.#t,this.options)?this.#d():this.updateResult(),this.#b())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Gm(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Gm(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#v(),this.#x(),this.#t.removeObserver(this)}setOptions(t){const e=this.options,n=this.#t;if(this.options=this.#e.defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof yr(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#w(),this.#t.setOptions(this.options),e._defaulted&&!Um(this.options,e)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const r=this.hasListeners();r&&Fx(this.#t,n,this.options,e)&&this.#d(),this.updateResult(),r&&(this.#t!==n||yr(this.options.enabled,this.#t)!==yr(e.enabled,this.#t)||Js(this.options.staleTime,this.#t)!==Js(e.staleTime,this.#t))&&this.#g();const s=this.#y();r&&(this.#t!==n||yr(this.options.enabled,this.#t)!==yr(e.enabled,this.#t)||s!==this.#f)&&this.#_(s)}getOptimisticResult(t){const e=this.#e.getQueryCache().build(this.#e,t),n=this.createResult(e,t);return bO(this,n)&&(this.#r=n,this.#o=this.options,this.#s=this.#t.state),n}getCurrentResult(){return this.#r}trackResult(t,e){return new Proxy(t,{get:(n,r)=>(this.trackProp(r),e?.(r),r==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&this.#i.status==="pending"&&this.#i.reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(n,r))})}trackProp(t){this.#h.add(t)}getCurrentQuery(){return this.#t}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const e=this.#e.defaultQueryOptions(t),n=this.#e.getQueryCache().build(this.#e,e);return n.fetch().then(()=>this.createResult(n,e))}fetch(t){return this.#d({...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#r))}#d(t){this.#w();let e=this.#t.fetch(this.options,t);return t?.throwOnError||(e=e.catch(gr)),e}#g(){this.#v();const t=Js(this.options.staleTime,this.#t);if(Fa||this.#r.isStale||!$m(t))return;const n=QS(this.#r.dataUpdatedAt,t)+1;this.#u=Ti.setTimeout(()=>{this.#r.isStale||this.updateResult()},n)}#y(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#_(t){this.#x(),this.#f=t,!(Fa||yr(this.options.enabled,this.#t)===!1||!$m(this.#f)||this.#f===0)&&(this.#l=Ti.setInterval(()=>{(this.options.refetchIntervalInBackground||ty.isFocused())&&this.#d()},this.#f))}#b(){this.#g(),this.#_(this.#y())}#v(){this.#u&&(Ti.clearTimeout(this.#u),this.#u=void 0)}#x(){this.#l&&(Ti.clearInterval(this.#l),this.#l=void 0)}createResult(t,e){const n=this.#t,r=this.options,s=this.#r,a=this.#s,l=this.#o,f=t!==n?t.state:this.#n,{state:h}=t;let m={...h},p=!1,y;if(e._optimisticResults){const K=this.hasListeners(),G=!K&&qx(t,e),j=K&&Fx(t,n,e,r);(G||j)&&(m={...m,...tk(h.data,t.options)}),e._optimisticResults==="isRestoring"&&(m.fetchStatus="idle")}let{error:g,errorUpdatedAt:v,status:x}=m;y=m.data;let E=!1;if(e.placeholderData!==void 0&&y===void 0&&x==="pending"){let K;s?.isPlaceholderData&&e.placeholderData===l?.placeholderData?(K=s.data,E=!0):K=typeof e.placeholderData=="function"?e.placeholderData(this.#c?.state.data,this.#c):e.placeholderData,K!==void 0&&(x="success",y=Fm(s?.data,K,e),p=!0)}if(e.select&&y!==void 0&&!E)if(s&&y===a?.data&&e.select===this.#p)y=this.#m;else try{this.#p=e.select,y=e.select(y),y=Fm(s?.data,y,e),this.#m=y,this.#a=null}catch(K){this.#a=K}this.#a&&(g=this.#a,y=this.#m,v=Date.now(),x="error");const S=m.fetchStatus==="fetching",C=x==="pending",T=x==="error",L=C&&S,D=y!==void 0,B={status:x,fetchStatus:m.fetchStatus,isPending:C,isSuccess:x==="success",isError:T,isInitialLoading:L,isLoading:L,data:y,dataUpdatedAt:m.dataUpdatedAt,error:g,errorUpdatedAt:v,failureCount:m.fetchFailureCount,failureReason:m.fetchFailureReason,errorUpdateCount:m.errorUpdateCount,isFetched:m.dataUpdateCount>0||m.errorUpdateCount>0,isFetchedAfterMount:m.dataUpdateCount>f.dataUpdateCount||m.errorUpdateCount>f.errorUpdateCount,isFetching:S,isRefetching:S&&!C,isLoadingError:T&&!D,isPaused:m.fetchStatus==="paused",isPlaceholderData:p,isRefetchError:T&&D,isStale:ny(t,e),refetch:this.refetch,promise:this.#i,isEnabled:yr(e.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const K=J=>{B.status==="error"?J.reject(B.error):B.data!==void 0&&J.resolve(B.data)},G=()=>{const J=this.#i=B.promise=Vm();K(J)},j=this.#i;switch(j.status){case"pending":t.queryHash===n.queryHash&&K(j);break;case"fulfilled":(B.status==="error"||B.data!==j.value)&&G();break;case"rejected":(B.status!=="error"||B.error!==j.reason)&&G();break}}return B}updateResult(){const t=this.#r,e=this.createResult(this.#t,this.options);if(this.#s=this.#t.state,this.#o=this.options,this.#s.data!==void 0&&(this.#c=this.#t),Um(e,t))return;this.#r=e;const n=()=>{if(!t)return!0;const{notifyOnChangeProps:r}=this.options,s=typeof r=="function"?r():r;if(s==="all"||!s&&!this.#h.size)return!0;const a=new Set(s??this.#h);return this.options.throwOnError&&a.add("error"),Object.keys(this.#r).some(l=>{const u=l;return this.#r[u]!==t[u]&&a.has(u)})};this.#S({listeners:n()})}#w(){const t=this.#e.getQueryCache().build(this.#e,this.options);if(t===this.#t)return;const e=this.#t;this.#t=t,this.#n=t.state,this.hasListeners()&&(e?.removeObserver(this),t.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#b()}#S(t){yn.batch(()=>{t.listeners&&this.listeners.forEach(e=>{e(this.#r)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function _O(t,e){return yr(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function qx(t,e){return _O(t,e)||t.state.data!==void 0&&Gm(t,e,e.refetchOnMount)}function Gm(t,e,n){if(yr(e.enabled,t)!==!1&&Js(e.staleTime,t)!=="static"){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&ny(t,e)}return!1}function Fx(t,e,n,r){return(t!==e||yr(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&ny(t,n)}function ny(t,e){return yr(e.enabled,t)!==!1&&t.isStaleByTime(Js(e.staleTime,t))}function bO(t,e){return!Um(t.getCurrentResult(),e)}function Vx(t){return{onFetch:(e,n)=>{const r=e.options,s=e.fetchOptions?.meta?.fetchMore?.direction,a=e.state.data?.pages||[],l=e.state.data?.pageParams||[];let u={pages:[],pageParams:[]},f=0;const h=async()=>{let m=!1;const p=v=>{uO(v,()=>e.signal,()=>m=!0)},y=YS(e.options,e.fetchOptions),g=async(v,x,E)=>{if(m)return Promise.reject();if(x==null&&v.pages.length)return Promise.resolve(v);const C=(()=>{const N={client:e.client,queryKey:e.queryKey,pageParam:x,direction:E?"backward":"forward",meta:e.options.meta};return p(N),N})(),T=await y(C),{maxPages:L}=e.options,D=E?cO:lO;return{pages:D(v.pages,T,L),pageParams:D(v.pageParams,x,L)}};if(s&&a.length){const v=s==="backward",x=v?vO:Hx,E={pages:a,pageParams:l},S=x(r,E);u=await g(E,S,v)}else{const v=t??a.length;do{const x=f===0?l[0]??r.initialPageParam:Hx(r,u);if(f>0&&x==null)break;u=await g(u,x),f++}while(f<v)}return u};e.options.persister?e.fetchFn=()=>e.options.persister?.(h,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n):e.fetchFn=h}}}function Hx(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function vO(t,{pages:e,pageParams:n}){return e.length>0?t.getPreviousPageParam?.(e[0],e,n[0],n):void 0}var xO=class extends ek{#e;#t;#n;#r;constructor(t){super(),this.#e=t.client,this.mutationId=t.mutationId,this.#n=t.mutationCache,this.#t=[],this.state=t.state||wO(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){this.#t.includes(t)||(this.#t.push(t),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){this.#t=this.#t.filter(e=>e!==t),this.scheduleGc(),this.#n.notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#n.remove(this))}continue(){return this.#r?.continue()??this.execute(this.state.variables)}async execute(t){const e=()=>{this.#s({type:"continue"})},n={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#r=WS({fn:()=>this.options.mutationFn?this.options.mutationFn(t,n):Promise.reject(new Error("No mutationFn found")),onFail:(a,l)=>{this.#s({type:"failed",failureCount:a,error:l})},onPause:()=>{this.#s({type:"pause"})},onContinue:e,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#n.canRun(this)});const r=this.state.status==="pending",s=!this.#r.canStart();try{if(r)e();else{this.#s({type:"pending",variables:t,isPaused:s}),await this.#n.config.onMutate?.(t,this,n);const l=await this.options.onMutate?.(t,n);l!==this.state.context&&this.#s({type:"pending",context:l,variables:t,isPaused:s})}const a=await this.#r.start();return await this.#n.config.onSuccess?.(a,t,this.state.context,this,n),await this.options.onSuccess?.(a,t,this.state.context,n),await this.#n.config.onSettled?.(a,null,this.state.variables,this.state.context,this,n),await this.options.onSettled?.(a,null,t,this.state.context,n),this.#s({type:"success",data:a}),a}catch(a){try{await this.#n.config.onError?.(a,t,this.state.context,this,n)}catch(l){Promise.reject(l)}try{await this.options.onError?.(a,t,this.state.context,n)}catch(l){Promise.reject(l)}try{await this.#n.config.onSettled?.(void 0,a,this.state.variables,this.state.context,this,n)}catch(l){Promise.reject(l)}try{await this.options.onSettled?.(void 0,a,t,this.state.context,n)}catch(l){Promise.reject(l)}throw this.#s({type:"error",error:a}),a}finally{this.#n.runNext(this)}}#s(t){const e=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=e(this.state),yn.batch(()=>{this.#t.forEach(n=>{n.onMutationUpdate(t)}),this.#n.notify({mutation:this,type:"updated",action:t})})}};function wO(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var SO=class extends Vl{constructor(t={}){super(),this.config=t,this.#e=new Set,this.#t=new Map,this.#n=0}#e;#t;#n;build(t,e,n){const r=new xO({client:t,mutationCache:this,mutationId:++this.#n,options:t.defaultMutationOptions(e),state:n});return this.add(r),r}add(t){this.#e.add(t);const e=vu(t);if(typeof e=="string"){const n=this.#t.get(e);n?n.push(t):this.#t.set(e,[t])}this.notify({type:"added",mutation:t})}remove(t){if(this.#e.delete(t)){const e=vu(t);if(typeof e=="string"){const n=this.#t.get(e);if(n)if(n.length>1){const r=n.indexOf(t);r!==-1&&n.splice(r,1)}else n[0]===t&&this.#t.delete(e)}}this.notify({type:"removed",mutation:t})}canRun(t){const e=vu(t);if(typeof e=="string"){const r=this.#t.get(e)?.find(s=>s.state.status==="pending");return!r||r===t}else return!0}runNext(t){const e=vu(t);return typeof e=="string"?this.#t.get(e)?.find(r=>r!==t&&r.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){yn.batch(()=>{this.#e.forEach(t=>{this.notify({type:"removed",mutation:t})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(t){const e={exact:!0,...t};return this.getAll().find(n=>zx(e,n))}findAll(t={}){return this.getAll().filter(e=>zx(t,e))}notify(t){yn.batch(()=>{this.listeners.forEach(e=>{e(t)})})}resumePausedMutations(){const t=this.getAll().filter(e=>e.state.isPaused);return yn.batch(()=>Promise.all(t.map(e=>e.continue().catch(gr))))}};function vu(t){return t.options.scope?.id}var kO=class extends Vl{constructor(t={}){super(),this.config=t,this.#e=new Map}#e;build(t,e,n){const r=e.queryKey,s=e.queryHash??Wg(r,e);let a=this.get(s);return a||(a=new gO({client:t,queryKey:r,queryHash:s,options:t.defaultQueryOptions(e),state:n,defaultOptions:t.getQueryDefaults(r)}),this.add(a)),a}add(t){this.#e.has(t.queryHash)||(this.#e.set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const e=this.#e.get(t.queryHash);e&&(t.destroy(),e===t&&this.#e.delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){yn.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return this.#e.get(t)}getAll(){return[...this.#e.values()]}find(t){const e={exact:!0,...t};return this.getAll().find(n=>jx(e,n))}findAll(t={}){const e=this.getAll();return Object.keys(t).length>0?e.filter(n=>jx(t,n)):e}notify(t){yn.batch(()=>{this.listeners.forEach(e=>{e(t)})})}onFocus(){yn.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){yn.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},EO=class{#e;#t;#n;#r;#s;#o;#i;#a;constructor(t={}){this.#e=t.queryCache||new kO,this.#t=t.mutationCache||new SO,this.#n=t.defaultOptions||{},this.#r=new Map,this.#s=new Map,this.#o=0}mount(){this.#o++,this.#o===1&&(this.#i=ty.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#a=of.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#o--,this.#o===0&&(this.#i?.(),this.#i=void 0,this.#a?.(),this.#a=void 0)}isFetching(t){return this.#e.findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return this.#t.findAll({...t,status:"pending"}).length}getQueryData(t){const e=this.defaultQueryOptions({queryKey:t});return this.#e.get(e.queryHash)?.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=this.#e.build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(Js(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return this.#e.findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),a=this.#e.get(r.queryHash)?.state.data,l=iO(e,a);if(l!==void 0)return this.#e.build(this,r).setData(l,{...n,manual:!0})}setQueriesData(t,e,n){return yn.batch(()=>this.#e.findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){const e=this.defaultQueryOptions({queryKey:t});return this.#e.get(e.queryHash)?.state}removeQueries(t){const e=this.#e;yn.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=this.#e;return yn.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=yn.batch(()=>this.#e.findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(gr).catch(gr)}invalidateQueries(t,e={}){return yn.batch(()=>(this.#e.findAll(t).forEach(n=>{n.invalidate()}),t?.refetchType==="none"?Promise.resolve():this.refetchQueries({...t,type:t?.refetchType??t?.type??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=yn.batch(()=>this.#e.findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let a=s.fetch(void 0,n);return n.throwOnError||(a=a.catch(gr)),s.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(r).then(gr)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=this.#e.build(this,e);return n.isStaleByTime(Js(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(gr).catch(gr)}fetchInfiniteQuery(t){return t.behavior=Vx(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(gr).catch(gr)}ensureInfiniteQueryData(t){return t.behavior=Vx(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return of.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#n}setDefaultOptions(t){this.#n=t}setQueryDefaults(t,e){this.#r.set(gs(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...this.#r.values()],n={};return e.forEach(r=>{Rl(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){this.#s.set(gs(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...this.#s.values()],n={};return e.forEach(r=>{Rl(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...this.#n.queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=Wg(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===ey&&(e.enabled=!1),e}defaultMutationOptions(t){return t?._defaulted?t:{...this.#n.mutations,...t?.mutationKey&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},CO=Q.createContext(void 0),TO=({client:t,children:e})=>(Q.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),w.jsx(CO.Provider,{value:t,children:e})),Gp={exports:{}},Kp={};var Gx;function AO(){if(Gx)return Kp;Gx=1;var t=Yf().__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;return Kp.c=function(e){return t.H.useMemoCache(e)},Kp}var Kx;function RO(){return Kx||(Kx=1,Gp.exports=AO()),Gp.exports}var Ue=RO();class Ka{}class Va extends Ka{constructor(e,n){super(),this.collection=e,this.alias=n,this.type="collectionRef"}}class br extends Ka{constructor(e,n){super(),this.query=e,this.alias=n,this.type="queryRef"}}class Rn extends Ka{constructor(e){super(),this.path=e,this.type="ref"}}class Un extends Ka{constructor(e){super(),this.value=e,this.type="val"}}class xr extends Ka{constructor(e,n){super(),this.name=e,this.args=n,this.type="func"}}class nk extends Ka{constructor(e,n){super(),this.name=e,this.args=n,this.type="agg"}}function ry(t){return t instanceof nk||t instanceof xr||t instanceof Rn||t instanceof Un}function sy(t){return typeof t=="object"&&"expression"in t?t.expression:t}function Zx(t){return typeof t=="object"&&"expression"in t?t.expression:t}function Qx(t){return typeof t=="object"&&"expression"in t&&t.residual===!0}function OO(t){return{expression:t,residual:!0}}function NO(t,e){if(t.from.alias===e)return t.from;for(const n of t.join||[])if(n.from.alias===e)return n.from}function Ol(t,e,n){if(e.path.length!==0){if(e.path.length===1){const r=e.path[0];if(t.select){const s=t.select[r];if(s&&s.type==="ref")return Ol(t,s,n)}return{collection:n,path:[r]}}if(e.path.length>1){const[r,...s]=e.path,a=NO(t,r);return a?a.type==="queryRef"?Ol(a.query,new Rn(s),n):{collection:a.collection,path:s}:void 0}}}class rr extends Error{constructor(e){super(e),this.name="TanStackDBError"}}class Jx extends rr{constructor(e,n,r){const s=`${e==="insert"?"Insert":"Update"} validation failed: ${n.map(a=>`
- ${a.message} - path: ${a.path}`).join("")}`;super(r||s),this.name="SchemaValidationError",this.type=e,this.issues=n}}class Hl extends rr{constructor(e){super(e),this.name="CollectionConfigurationError"}}class IO extends Hl{constructor(){super("Collection requires a config")}}class MO extends Hl{constructor(){super("Collection requires a sync config")}}class DO extends Hl{constructor(){super("Schema must implement the standard-schema interface")}}class Yx extends Hl{constructor(){super("Schema validation must be synchronous")}}class Gl extends rr{constructor(e){super(e),this.name="CollectionStateError"}}class LO extends Gl{constructor(e,n){super(`Cannot perform ${e} on collection "${n}" - collection is in error state. Try calling cleanup() and restarting the collection.`)}}class jO extends Gl{constructor(e,n,r){super(`Invalid collection status transition from "${e}" to "${n}" for collection "${r}"`)}}class zO extends Gl{constructor(){super("Collection is in error state")}}class PO extends Gl{constructor(){super("Active subscribers count is negative - this should never happen")}}class qr extends rr{constructor(e){super(e),this.name="CollectionOperationError"}}class BO extends qr{constructor(e){super(`An object was created without a defined key: ${JSON.stringify(e)}`)}}class $O extends qr{constructor(e,n){const r=e===null?"null":typeof e;super(`getKey returned an invalid key type. Expected string or number, but got ${r}: ${JSON.stringify(e)}. Item: ${JSON.stringify(n)}`)}}class UO extends qr{constructor(e){super(`Cannot insert document with ID "${e}" because it already exists in the collection`)}}class qO extends qr{constructor(e,n,r){const s=`Cannot insert document with key "${e}" from sync because it already exists in the collection "${n}"`;r?.hasCustomGetKey&&r.hasJoins?super(`${s}. This collection uses a custom getKey with joined queries. Joined queries can produce multiple rows with the same key when relationships are not 1:1. Consider: (1) using a composite key in your getKey function (e.g., \`\${item.key1}-\${item.key2}\`), (2) ensuring your join produces unique rows per key, or (3) removing the custom getKey to use the default composite key behavior.`):super(s)}}class FO extends qr{constructor(){super("The first argument to update is missing")}}class VO extends qr{constructor(){super("No keys were passed to update")}}class HO extends qr{constructor(e){super(`The key "${e}" was passed to update but an object for this key was not found in the collection`)}}class GO extends qr{constructor(e,n){super(`Updating the key of an item is not allowed. Original key: "${e}", Attempted new key: "${n}". Please delete the old item and create a new one if a key change is necessary.`)}}class KO extends qr{constructor(){super("No keys were passed to delete")}}class ZO extends qr{constructor(e){super(`Collection.delete was called with key '${e}' but there is no item in the collection with this key`)}}class iy extends rr{constructor(e){super(e),this.name="MissingHandlerError"}}class QO extends iy{constructor(){super("Collection.insert called directly (not within an explicit transaction) but no 'onInsert' handler is configured.")}}class JO extends iy{constructor(){super("Collection.update called directly (not within an explicit transaction) but no 'onUpdate' handler is configured.")}}class YO extends iy{constructor(){super("Collection.delete called directly (not within an explicit transaction) but no 'onDelete' handler is configured.")}}class Xs extends rr{constructor(e){super(e),this.name="TransactionError"}}class XO extends Xs{constructor(){super("mutationFn is required when creating a transaction")}}class WO extends Xs{constructor(){super("You can no longer call .mutate() as the transaction is no longer pending")}}class eN extends Xs{constructor(){super("You can no longer call .rollback() as the transaction is already completed")}}class tN extends Xs{constructor(){super("You can no longer call .commit() as the transaction is no longer pending")}}class Xx extends Xs{constructor(){super("No pending sync transaction to write to")}}class Wx extends Xs{constructor(){super("The pending sync transaction is already committed, you can't still write to it.")}}class nN extends Xs{constructor(){super("No pending sync transaction to commit")}}class rN extends Xs{constructor(){super("The pending sync transaction is already committed, you can't commit it again.")}}class Za extends rr{constructor(e){super(e),this.name="QueryBuilderError"}}class sN extends Za{constructor(e){super(`Only one source is allowed in the ${e}`)}}class iN extends Za{constructor(e){super(`A sub query passed to a ${e} must have a from clause itself`)}}class aN extends Za{constructor(e){super(`Invalid source for live query: The value provided for alias "${e}" is not a Collection or subquery. Live queries only accept Collection instances or subqueries. Please ensure you're passing a valid Collection or QueryBuilder, not a plain array or other data type.`)}}class xu extends Za{constructor(e,n){super(`Invalid source for ${e}: Expected an object with a single key-value pair like { alias: collection }. For example: .from({ todos: todosCollection }). Got: ${n}`)}}class oN extends Za{constructor(){super("Join condition must be an equality expression")}}class lN extends Za{constructor(){super("Query must have a from clause")}}class sr extends rr{constructor(e){super(e),this.name="QueryCompilationError"}}class cN extends sr{constructor(){super("DISTINCT requires a SELECT clause.")}}class uN extends sr{constructor(){super("HAVING clause requires GROUP BY clause")}}class fN extends sr{constructor(){super("LIMIT and OFFSET require an ORDER BY clause to ensure deterministic results")}}class rk extends sr{constructor(e,n,r){const s=n?`alias "${e}" (collection "${n}")`:`collection "${e}"`,a=r?.length?`. Available keys: ${r.join(", ")}`:"";super(`Input for ${s} not found in inputs map${a}`)}}class hN extends sr{constructor(e,n){super(`Subquery uses alias "${e}" which is already used in the parent query. Each alias must be unique across parent and subquery contexts. Parent query aliases: ${n.join(", ")}. Please rename "${e}" in either the parent query or subquery to avoid conflicts.`)}}class dN extends sr{constructor(e){super(`Unsupported FROM type: ${e}`)}}class pN extends sr{constructor(e){super(`Unknown expression type: ${e}`)}}class mN extends sr{constructor(){super("Reference path cannot be empty")}}class gN extends sr{constructor(e){super(`Unknown function: ${e}`)}}class e1 extends sr{constructor(e){super(`Collection "${e}" not found during compilation of join`)}}class ji extends rr{constructor(e){super(e),this.name="JoinError"}}class yN extends ji{constructor(e){super(`Unsupported join type: ${e}`)}}class _N extends ji{constructor(e){super(`Invalid join condition: both expressions refer to the same source "${e}"`)}}class bN extends ji{constructor(){super("Invalid join condition: expressions must reference source aliases")}}class vN extends ji{constructor(e){super(`Invalid join condition: left expression refers to an unavailable source "${e}"`)}}class xN extends ji{constructor(e){super(`Invalid join condition: right expression does not refer to the joined source "${e}"`)}}class wN extends ji{constructor(){super("Invalid join condition")}}class SN extends ji{constructor(e){super(`Unsupported join source type: ${e}`)}}class Xf extends rr{constructor(e){super(e),this.name="GroupByError"}}class kN extends Xf{constructor(e){super(`Non-aggregate expression '${e}' in SELECT must also appear in GROUP BY clause`)}}class EN extends Xf{constructor(e){super(`Unsupported aggregate function: ${e}`)}}class CN extends Xf{constructor(e){super(`Aggregate function in HAVING clause must also be in SELECT clause: ${e}`)}}class TN extends Xf{constructor(e){super(`Unknown expression type in HAVING clause: ${e}`)}}class t1 extends rr{constructor(e,n){const r=n instanceof Error?n.message:String(n);super(`Collection "${e}" sync cleanup function threw an error: ${r}`),this.name="SyncCleanupError"}}class AN extends rr{constructor(e){super(e),this.name="QueryOptimizerError"}}class RN extends AN{constructor(){super("Cannot combine empty expression list")}}class ON extends sr{constructor(e,n,r,s){super(`Internal error: subscription for alias '${e}' (remapped from '${n}', collection '${r}') is missing in join pipeline. Available aliases: ${s.join(", ")}. This indicates a bug in alias tracking.`)}}class NN extends sr{constructor(e){super(`Internal error: compiler returned aliases without inputs: ${e.join(", ")}. This indicates a bug in query compilation. Please report this issue.`)}}class IN extends sr{constructor(){super("setWindow() can only be called on collections with an ORDER BY clause. Add .orderBy() to your query to enable window movement.")}}const Zp=new WeakMap;let MN=1;function n1(t){if(Zp.has(t))return Zp.get(t);const e=MN++;return Zp.set(t,e),e}const ay=(t,e,n)=>{const{nulls:r}=n;if(t==null&&e==null)return 0;if(t==null)return r==="first"?-1:1;if(e==null)return r==="first"?1:-1;if(typeof t=="string"&&typeof e=="string"&&n.stringSort==="locale")return t.localeCompare(e,n.locale,n.localeOptions);if(Array.isArray(t)&&Array.isArray(e)){for(let l=0;l<Math.min(t.length,e.length);l++){const u=ay(t[l],e[l],n);if(u!==0)return u}return t.length-e.length}if(t instanceof Date&&e instanceof Date)return t.getTime()-e.getTime();const s=typeof t=="object",a=typeof e=="object";if(s||a){if(s&&a){const l=n1(t),u=n1(e);return l-u}if(s)return 1;if(a)return-1}return t<e?-1:t>e?1:0},DN=(t,e,n)=>ay(e,t,{...n,nulls:n.nulls==="first"?"last":"first"});function lf(t){return(e,n)=>t.direction==="asc"?ay(e,n,t):DN(e,n,t)}const Km=lf({direction:"asc",nulls:"first",stringSort:"locale"});function LN(t,e){if(t.byteLength!==e.byteLength)return!1;for(let n=0;n<t.byteLength;n++)if(t[n]!==e[n])return!1;return!0}const jN=128;function ps(t){return t instanceof Date?t.getTime():(typeof Buffer<"u"&&t instanceof Buffer||t instanceof Uint8Array)&&t.byteLength<=jN?`__u8__${Array.from(t).join(",")}`:t}function zN(t,e){if(t===e)return!0;const n=typeof Buffer<"u"&&t instanceof Buffer||t instanceof Uint8Array,r=typeof Buffer<"u"&&e instanceof Buffer||e instanceof Uint8Array;return n&&r?LN(t,e):!1}function Qt(t){return t==null}function Pa(t){return t===!0}function qn(t,e=!1){return ly(t,e)}function oy(t){return ly(t,!0)}function ly(t,e){switch(t.type){case"val":{const n=t.value;return()=>n}case"ref":return e?BN(t):PN(t);case"func":return $N(t,e);default:throw new pN(t.type)}}function PN(t){const[e,...n]=t.path;if(!e)throw new mN;if(n.length===0)return r=>r[e];if(n.length===1){const r=n[0];return s=>s[e]?.[r]}else return r=>{const s=r[e];if(s===void 0)return;let a=s;for(const l of n){if(a==null)return a;a=a[l]}return a}}function BN(t){const e=t.path;return n=>{let r=n;for(const s of e){if(r==null)return r;r=r[s]}return r}}function $N(t,e){const n=t.args.map(r=>ly(r,e));switch(t.name){case"eq":{const r=n[0],s=n[1];return a=>{const l=ps(r(a)),u=ps(s(a));return Qt(l)||Qt(u)?null:zN(l,u)}}case"gt":{const r=n[0],s=n[1];return a=>{const l=r(a),u=s(a);return Qt(l)||Qt(u)?null:l>u}}case"gte":{const r=n[0],s=n[1];return a=>{const l=r(a),u=s(a);return Qt(l)||Qt(u)?null:l>=u}}case"lt":{const r=n[0],s=n[1];return a=>{const l=r(a),u=s(a);return Qt(l)||Qt(u)?null:l<u}}case"lte":{const r=n[0],s=n[1];return a=>{const l=r(a),u=s(a);return Qt(l)||Qt(u)?null:l<=u}}case"and":return r=>{let s=!1;for(const a of n){const l=a(r);if(l===!1)return!1;Qt(l)&&(s=!0)}return s?null:!0};case"or":return r=>{let s=!1;for(const a of n){const l=a(r);if(l===!0)return!0;Qt(l)&&(s=!0)}return s?null:!1};case"not":{const r=n[0];return s=>{const a=r(s);return Qt(a)?null:!a}}case"in":{const r=n[0],s=n[1];return a=>{const l=r(a),u=s(a);return Qt(l)?null:Array.isArray(u)?u.includes(l):!1}}case"like":{const r=n[0],s=n[1];return a=>{const l=r(a),u=s(a);return Qt(l)||Qt(u)?null:r1(l,u,!1)}}case"ilike":{const r=n[0],s=n[1];return a=>{const l=r(a),u=s(a);return Qt(l)||Qt(u)?null:r1(l,u,!0)}}case"upper":{const r=n[0];return s=>{const a=r(s);return typeof a=="string"?a.toUpperCase():a}}case"lower":{const r=n[0];return s=>{const a=r(s);return typeof a=="string"?a.toLowerCase():a}}case"length":{const r=n[0];return s=>{const a=r(s);return typeof a=="string"||Array.isArray(a)?a.length:0}}case"concat":return r=>n.map(s=>{const a=s(r);try{return String(a??"")}catch{try{return JSON.stringify(a)||""}catch{return"[object]"}}}).join("");case"coalesce":return r=>{for(const s of n){const a=s(r);if(a!=null)return a}return null};case"add":{const r=n[0],s=n[1];return a=>{const l=r(a),u=s(a);return(l??0)+(u??0)}}case"subtract":{const r=n[0],s=n[1];return a=>{const l=r(a),u=s(a);return(l??0)-(u??0)}}case"multiply":{const r=n[0],s=n[1];return a=>{const l=r(a),u=s(a);return(l??0)*(u??0)}}case"divide":{const r=n[0],s=n[1];return a=>{const l=r(a),f=s(a)??0;return f!==0?(l??0)/f:null}}case"isUndefined":{const r=n[0];return s=>r(s)===void 0}case"isNull":{const r=n[0];return s=>r(s)===null}default:throw new gN(t.name)}}function r1(t,e,n){if(typeof t!="string"||typeof e!="string")return!1;const r=n?t.toLowerCase():t;let a=(n?e.toLowerCase():e).replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return a=a.replace(/%/g,".*"),a=a.replace(/_/g,"."),new RegExp(`^${a}$`).test(r)}function Ar(t,e){return qu(t,e,new Map)}function qu(t,e,n){if(t===e)return!0;if(t==null||e==null||typeof t!=typeof e)return!1;if(t instanceof Date)return e instanceof Date?t.getTime()===e.getTime():!1;if(t instanceof RegExp)return e instanceof RegExp?t.source===e.source&&t.flags===e.flags:!1;if(t instanceof Map){if(!(e instanceof Map)||t.size!==e.size)return!1;if(n.has(t))return n.get(t)===e;n.set(t,e);const s=Array.from(t.entries()).every(([a,l])=>e.has(a)&&qu(l,e.get(a),n));return n.delete(t),s}if(t instanceof Set){if(!(e instanceof Set)||t.size!==e.size)return!1;if(n.has(t))return n.get(t)===e;n.set(t,e);const r=Array.from(t),s=Array.from(e);if(r.every(l=>typeof l!="object"))return n.delete(t),r.every(l=>e.has(l));const a=r.length===s.length;return n.delete(t),a}if(ArrayBuffer.isView(t)&&ArrayBuffer.isView(e)&&!(t instanceof DataView)&&!(e instanceof DataView)){const r=t,s=e;if(r.length!==s.length)return!1;for(let a=0;a<r.length;a++)if(r[a]!==s[a])return!1;return!0}if(cf(t)&&cf(e)){const r=Zm(t),s=Zm(e);return r!==s?!1:typeof t.equals=="function"?t.equals(e):t.toString()===e.toString()}if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;if(n.has(t))return n.get(t)===e;n.set(t,e);const r=t.every((s,a)=>qu(s,e[a],n));return n.delete(t),r}if(typeof t=="object"){if(n.has(t))return n.get(t)===e;n.set(t,e);const r=Object.keys(t),s=Object.keys(e);if(r.length!==s.length)return n.delete(t),!1;const a=r.every(l=>l in e&&qu(t[l],e[l],n));return n.delete(t),a}return!1}const UN=["Temporal.Duration","Temporal.Instant","Temporal.PlainDate","Temporal.PlainDateTime","Temporal.PlainMonthDay","Temporal.PlainTime","Temporal.PlainYearMonth","Temporal.ZonedDateTime"];function Zm(t){return t[Symbol.toStringTag]}function cf(t){const e=Zm(t);return typeof e=="string"&&UN.includes(e)}const cy={direction:"asc",nulls:"first",stringSort:"locale"};class qN{constructor(e){this.originalIndex=e}lookup(e,n){const r=e==="gt"?"lt":e==="gte"?"lte":e==="lt"?"gt":e==="lte"?"gte":e;return this.originalIndex.lookup(r,n)}rangeQuery(e={}){return this.originalIndex.rangeQueryReversed(e)}rangeQueryReversed(e={}){return this.originalIndex.rangeQuery(e)}take(e,n,r){return this.originalIndex.takeReversed(e,n,r)}takeReversed(e,n,r){return this.originalIndex.take(e,n,r)}get orderedEntriesArray(){return this.originalIndex.orderedEntriesArrayReversed}get orderedEntriesArrayReversed(){return this.originalIndex.orderedEntriesArray}supports(e){return this.originalIndex.supports(e)}matchesField(e){return this.originalIndex.matchesField(e)}matchesCompareOptions(e){return this.originalIndex.matchesCompareOptions(e)}matchesDirection(e){return this.originalIndex.matchesDirection(e)}getStats(){return this.originalIndex.getStats()}add(e,n){this.originalIndex.add(e,n)}remove(e,n){this.originalIndex.remove(e,n)}update(e,n,r){this.originalIndex.update(e,n,r)}build(e){this.originalIndex.build(e)}clear(){this.originalIndex.clear()}get keyCount(){return this.originalIndex.keyCount}equalityLookup(e){return this.originalIndex.equalityLookup(e)}inArrayLookup(e){return this.originalIndex.inArrayLookup(e)}get indexedKeysSet(){return this.originalIndex.indexedKeysSet}get valueMapData(){return this.originalIndex.valueMapData}}function Kl(t,e,n){const r=n??{...cy,...t.compareOptions};for(const s of t.indexes.values())if(s.matchesField(e)&&s.matchesCompareOptions(r))return s.matchesDirection(r.direction)?s:new qN(s)}function FN(t){if(t.length===0)return new Set;if(t.length===1)return new Set(t[0]);let e=new Set(t[0]);for(let n=1;n<t.length;n++){const r=new Set;for(const s of e)t[n].has(s)&&r.add(s);e=r}return e}function VN(t){const e=new Set;for(const n of t)for(const r of n)e.add(r);return e}function HN(t,e){return uy(t,e)}function uy(t,e){if(t.type==="func")switch(t.name){case"eq":case"gt":case"gte":case"lt":case"lte":return KN(t,e);case"and":return ZN(t,e);case"or":return QN(t,e);case"in":return JN(t,e)}return{canOptimize:!1,matchingKeys:new Set}}function GN(t,e){if(t.type!=="func"||t.args.length<2)return{canOptimize:!1,matchingKeys:new Set};const n=new Map;for(const r of t.args)if(r.type==="func"&&["gt","gte","lt","lte"].includes(r.name)){const s=r;if(s.args.length===2){const a=s.args[0],l=s.args[1];let u=null,f=null,h=s.name;if(a.type==="ref"&&l.type==="val")u=a,f=l;else if(a.type==="val"&&l.type==="ref")switch(u=l,f=a,h){case"gt":h="lt";break;case"gte":h="lte";break;case"lt":h="gt";break;case"lte":h="gte";break}if(u&&f){const p=u.path.join("."),y=f.value;n.has(p)||n.set(p,[]),n.get(p).push({operation:h,value:y})}}}for(const[r,s]of n)if(s.length>=2){const a=r.split("."),l=Kl(e,a);if(l&&l.supports("gt")&&l.supports("lt")){let u,f,h=!0,m=!0;for(const{operation:y,value:g}of s)switch(y){case"gt":(u===void 0||g>u)&&(u=g,h=!1);break;case"gte":(u===void 0||g>u)&&(u=g,h=!0);break;case"lt":(f===void 0||g<f)&&(f=g,m=!1);break;case"lte":(f===void 0||g<f)&&(f=g,m=!0);break}return{canOptimize:!0,matchingKeys:l.rangeQuery({from:u,to:f,fromInclusive:h,toInclusive:m})}}}return{canOptimize:!1,matchingKeys:new Set}}function KN(t,e){if(t.type!=="func"||t.args.length!==2)return{canOptimize:!1,matchingKeys:new Set};const n=t.args[0],r=t.args[1];let s=null,a=null,l=t.name;if(n.type==="ref"&&r.type==="val")s=n,a=r;else if(n.type==="val"&&r.type==="ref")switch(s=r,a=n,l){case"gt":l="lt";break;case"gte":l="lte";break;case"lt":l="gt";break;case"lte":l="gte";break}if(s&&a){const u=s.path,f=Kl(e,u);if(f){const h=a.value,m=l;return f.supports(m)?{canOptimize:!0,matchingKeys:f.lookup(m,h)}:{canOptimize:!1,matchingKeys:new Set}}}return{canOptimize:!1,matchingKeys:new Set}}function ZN(t,e){if(t.type!=="func"||t.args.length<2)return{canOptimize:!1,matchingKeys:new Set};const n=GN(t,e);if(n.canOptimize)return n;const r=[];for(const s of t.args){const a=uy(s,e);a.canOptimize&&r.push(a)}if(r.length>0){const s=r.map(l=>l.matchingKeys);return{canOptimize:!0,matchingKeys:FN(s)}}return{canOptimize:!1,matchingKeys:new Set}}function QN(t,e){if(t.type!=="func"||t.args.length<2)return{canOptimize:!1,matchingKeys:new Set};const n=[];for(const r of t.args){const s=uy(r,e);s.canOptimize&&n.push(s)}if(n.length>0){const r=n.map(a=>a.matchingKeys);return{canOptimize:!0,matchingKeys:VN(r)}}return{canOptimize:!1,matchingKeys:new Set}}function JN(t,e){if(t.type!=="func"||t.args.length!==2)return{canOptimize:!1,matchingKeys:new Set};const n=t.args[0],r=t.args[1];if(n.type==="ref"&&r.type==="val"&&Array.isArray(r.value)){const s=n.path,a=r.value,l=Kl(e,s);if(l){if(l.supports("in"))return{canOptimize:!0,matchingKeys:l.lookup("in",a)};if(l.supports("eq")){const u=new Set;for(const f of a){const h=l.lookup("eq",f);for(const m of h)u.add(m)}return{canOptimize:!0,matchingKeys:u}}}}return{canOptimize:!1,matchingKeys:new Set}}class YN extends Map{constructor(e,n){super(n),this.defaultValue=e}get(e){return this.has(e)?super.get(e):this.defaultValue()}update(e,n){const r=this.get(e),s=n(r);return this.set(e,s),s}}const Qp=3e4;function Jp(t,e){if(e.length<=Qp)t.push(...e);else for(let n=0;n<e.length;n+=Qp){const r=e.slice(n,n+Qp);t.push(...r)}}function XN(t,e,n){let r=0,s=t.length;for(;r<s;){const a=Math.floor((r+s)/2),l=n(t[a],e);if(l<0)r=a+1;else if(l>0)s=a;else return a}return r}class WN{constructor(){this.objectIds=new WeakMap,this.nextId=0}getId(e){if(typeof e!="object"||e===null){const n=String(e);let r=0;for(let s=0;s<n.length;s++){const a=n.charCodeAt(s);r=(r<<5)-r+a,r=r&r}return r}return this.objectIds.has(e)||this.objectIds.set(e,this.nextId++),this.objectIds.get(e)}getStringId(e){return e===null?"null":e===void 0?"undefined":typeof e!="object"?`str_${String(e)}`:`obj_${this.getId(e)}`}}const Yp=new WN;function eI(t,e){const[n,r]=t,[s,a]=e,l=[...wu(n,Math.min(r,s)),...wu(Math.max(n,a),r)],u=[...wu(s,Math.min(a,n)),...wu(Math.max(s,r),a)];return{onlyInA:l,onlyInB:u}}function wu(t,e){const n=[];for(let r=t;r<e;r++)n.push(r);return n}function uf(t,e){return typeof t==typeof e?t<e?-1:t>e?1:0:typeof t=="string"?-1:1}const tI=hn(),nI=hn(),rI=hn(),sI=hn(),iI=hn();function hn(){return Math.random()*(2**31-1)>>>0}const sk=new ArrayBuffer(8),aI=new DataView(sk),Fs=new Uint8Array(sk);class Wf{constructor(){this.hash=tI,this.length=0,this.carry=0,this.carryBytes=0}_mix(e){e=Math.imul(e,3432918353),e=e<<15|e>>>17,e=Math.imul(e,461845907),this.hash^=e,this.hash=this.hash<<13|this.hash>>>19,this.hash=Math.imul(this.hash,5)+3864292196}writeByte(e){this.carry|=(e&255)<<8*this.carryBytes,this.carryBytes++,this.length++,this.carryBytes===4&&(this._mix(this.carry>>>0),this.carry=0,this.carryBytes=0)}update(e){switch(typeof e){case"symbol":{this.update(iI);const n=e.description;if(!n)return;for(let r=0;r<n.length;r++){const s=n.charCodeAt(r);this.writeByte(s&255),this.writeByte(s>>>8&255)}return}case"string":this.update(nI);for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);this.writeByte(r&255),this.writeByte(r>>>8&255)}return;case"number":aI.setFloat64(0,e,!0),this.writeByte(Fs[0]),this.writeByte(Fs[1]),this.writeByte(Fs[2]),this.writeByte(Fs[3]),this.writeByte(Fs[4]),this.writeByte(Fs[5]),this.writeByte(Fs[6]),this.writeByte(Fs[7]);return;case"bigint":{let n=e;for(n<0n?(n=-n,this.update(sI)):this.update(rI);n>0n;)this.writeByte(Number(n&0xffn)),n>>=8n;e===0n&&this.writeByte(0);return}default:throw new TypeError(`Unsupported input type: ${typeof e}`)}}digest(){if(this.carryBytes>0){let e=this.carry>>>0;e=Math.imul(e,3432918353),e=e<<15|e>>>17,e=Math.imul(e,461845907),this.hash^=e}return this.hash^=this.length,this.hash^=this.hash>>>16,this.hash=Math.imul(this.hash,2246822507),this.hash^=this.hash>>>13,this.hash=Math.imul(this.hash,3266489909),this.hash^=this.hash>>>16,this.hash>>>0}}const oI=hn(),lI=hn(),cI=hn(),uI=hn(),fI=hn(),hI=hn(),dI=hn(),pI=hn(),mI=hn(),gI=hn(),yI=hn(),_I=hn(),bI=128,Nl=new WeakMap;function Cn(t){const e=new Wf;return ik(e,t),e.digest()}function vI(t){const e=Nl.get(t);if(e!==void 0)return e;let n;if(t instanceof Date)n=xI(t);else if(typeof Buffer<"u"&&t instanceof Buffer||t instanceof Uint8Array)if(t.byteLength<=bI)n=wI(t);else return Qm(t);else{if(t instanceof File)return Qm(t);{let r=t,s=pI;t instanceof Array&&(s=mI),t instanceof Map&&(s=gI,r=[...t.entries()]),t instanceof Set&&(s=yI,r=[...t.entries()]),n=SI(r,s)}}return Nl.set(t,n),n}function xI(t){const e=new Wf;return e.update(dI),e.update(t.getTime()),e.digest()}function wI(t){const e=new Wf;e.update(_I),e.update(t.byteLength);for(let n=0;n<t.byteLength;n++)e.writeByte(t[n]);return e.digest()}function SI(t,e){const n=new Wf;n.update(e);const r=Object.keys(t);r.sort(EI);for(const s of r)n.update(fI),n.update(s),ik(n,t[s]);return n.digest()}function ik(t,e){if(e===null){t.update(cI);return}switch(typeof e){case"undefined":t.update(uI);return;case"boolean":t.update(e?oI:lI);return;case"number":t.update(isNaN(e)?NaN:e===0?0:e);return;case"bigint":case"string":case"symbol":t.update(e);return;case"object":t.update(kI(e));return;case"function":t.update(Qm(e));return;default:console.warn(`Ignored input during hashing because it is of type ${typeof e} which is not supported`)}}function kI(t){let e=Nl.get(t);return e===void 0&&(e=vI(t)),e}let s1=1;function Qm(t){let e=Nl.get(t);return e===void 0&&(e=s1^hI,s1++,Nl.set(t,e)),e}function EI(t,e){return t.localeCompare(e)}class qt{#e;constructor(e=[]){this.#e=e}toString(e=!1){return`MultiSet(${JSON.stringify(this.#e,null,e?2:void 0)})`}toJSON(){return JSON.stringify(Array.from(this.getInner()))}static fromJSON(e){return new qt(JSON.parse(e))}map(e){return new qt(this.#e.map(([n,r])=>[e(n),r]))}filter(e){return new qt(this.#e.filter(([n,r])=>e(n)))}negate(){return new qt(this.#e.map(([e,n])=>[e,-n]))}concat(e){const n=[];return Jp(n,this.#e),Jp(n,e.getInner()),new qt(n)}consolidate(){if(this.#e.length>0){const e=this.#e[0]?.[0];if(Array.isArray(e)&&e.length===2)return this.#t()}return this.#n()}#t(){const e=new Map,n=new Map,r=a=>{if(a.length!==2)throw new Error("Expected tuple of length 2");const[l,u]=a;return`${Yp.getStringId(l)}|${Yp.getStringId(u)}`};for(const[a,l]of this.#e){if(!Array.isArray(a)||a.length!==2)return this.#n();const[u,f]=a;if(typeof u!="string"&&typeof u!="number")return this.#n();let h;Array.isArray(f)&&f.length===2?h=r(f):h=Yp.getStringId(f);const m=u+"|"+h;e.set(m,(e.get(m)||0)+l),n.has(m)||n.set(m,a)}const s=[];for(const[a,l]of e)l!==0&&s.push([n.get(a),l]);return new qt(s)}#n(){const e=new YN(()=>0),n=new Map;let r=!1,s=!1,a=!1;for(const[f,h]of this.#e)if(typeof f=="string")r=!0;else if(typeof f=="number")s=!0;else{a=!0;break}const l=a||r&&s;for(const[f,h]of this.#e){const m=l?Cn(f):f;l&&!n.has(m)&&n.set(m,f),e.update(m,p=>p+h)}const u=[];for(const[f,h]of e.entries())if(h!==0){const m=l?n.get(f):f;u.push([m,h])}return new qt(u)}extend(e){const n=e instanceof qt?e.getInner():e;Jp(this.#e,n)}add(e,n){n!==0&&this.#e.push([e,n])}getInner(){return this.#e}}class CI{#e;constructor(e){this.#e=e}drain(){const e=[...this.#e].reverse();return this.#e.length=0,e}isEmpty(){return this.#e.length===0}}class Fr{#e=[];sendData(e){e instanceof qt||(e=new qt(e));for(const n of this.#e)n.unshift(e)}newReader(){const e=[];return this.#e.push(e),new CI(e)}}class ak{constructor(e,n,r){this.id=e,this.inputs=n,this.output=r}hasPendingWork(){return this.inputs.some(e=>!e.isEmpty())}}class Qa extends ak{constructor(e,n,r){super(e,[n],r),this.id=e}inputMessages(){return this.inputs[0].drain()}}class TI extends ak{constructor(e,n,r,s){super(e,[n,r],s),this.id=e}inputAMessages(){return this.inputs[0].drain()}inputBMessages(){return this.inputs[1].drain()}}class fy extends Qa{run(){for(const e of this.inputMessages())this.output.sendData(this.inner(e))}}class AI{#e=[];#t=0;#n=!1;constructor(){}#r(){if(this.#n)throw new Error("Graph already finalized")}getNextOperatorId(){return this.#r(),this.#t++}newInput(){this.#r();const e=new Fr;return new RI(this,e)}addOperator(e){this.#r(),this.#e.push(e)}finalize(){this.#r(),this.#n=!0}step(){if(!this.#n)throw new Error("Graph not finalized");for(const e of this.#e)e.run()}pendingWork(){return this.#e.some(e=>e.hasPendingWork())}run(){for(;this.pendingWork();)this.step()}}class Vr{#e;#t;constructor(e,n){this.#e=e,this.#t=n}connectReader(){return this.#t.newReader()}get writer(){return this.#t}get graph(){return this.#e}pipe(...e){return e.reduce((n,r)=>r(n),this)}}class RI extends Vr{sendData(e){this.writer.sendData(e)}}class OI extends fy{#e;constructor(e,n,r,s){super(e,n,r),this.#e=s}inner(e){return e.map(this.#e)}}function Tn(t){return e=>{const n=new Vr(e.graph,new Fr),r=new OI(e.graph.getNextOperatorId(),e.connectReader(),n.writer,t);return e.graph.addOperator(r),n}}const rl=Symbol("NO_PREFIX");class i1 extends Map{addValue(e,n){if(n===0)return this.size===0;const r=_l(e),s=this.get(r);if(Fu(s)){const[a,l]=s;if(_l(a)!==r)throw new Error("Mismatching prefixes, this should never happen");if(a===e||Cn(a)===Cn(e)){const f=l+n;f===0?this.delete(r):this.set(r,[e,f])}else{const f=new sl;f.set(Cn(a),s),f.set(Cn(e),[e,n]),this.set(r,f)}}else s===void 0?this.set(r,[e,n]):s.addValue(e,n)&&this.delete(r);return this.size===0}}class sl extends Map{addValue(e,n){if(n===0)return this.size===0;const r=Cn(e),s=this.get(r);if(s){const[,a]=s,l=a+n;l===0?this.delete(r):this.set(r,[e,l])}else this.set(r,[e,n]);return this.size===0}}class Ks{#e;#t=new Map;constructor(){this.#e=new Map}static fromMultiSets(e){const n=new Ks;for(const r of e)for(const[s,a]of r.getInner()){const[l,u]=s;n.addValue(l,[u,a])}return n}toString(e=!1){return`Index(${JSON.stringify([...this.entries()],void 0,e?2:void 0)})`}get size(){return this.#e.size}has(e){return this.#e.has(e)}hasPresence(e){return(this.#t.get(e)||0)!==0}getConsolidatedMultiplicity(e){return this.#t.get(e)||0}getPresenceKeys(){return this.#t.keys()}get(e){return[...this.getIterator(e)]}*getIterator(e){const n=this.#e.get(e);if(Fu(n))yield n;else{if(n===void 0)return;if(n instanceof sl)for(const r of n.values())yield r;else for(const r of n.values())if(Fu(r))yield r;else for(const s of r.values())yield s}}*entries(){for(const e of this.#e.keys())for(const n of this.getIterator(e))yield[e,n]}*entriesIterators(){for(const e of this.#e.keys())yield[e,this.getIterator(e)]}addValue(e,n){const[r,s]=n;if(s===0)return;const a=(this.#t.get(e)||0)+s;a===0?this.#t.delete(e):this.#t.set(e,a);const l=this.#e.get(e);if(l===void 0){this.#e.set(e,n);return}if(Fu(l)){this.#n(e,l,r,s);return}if(l instanceof sl){const u=_l(r);if(u!==rl){const f=new i1;f.set(rl,l),f.set(u,n),this.#e.set(e,f)}else l.addValue(r,s)&&this.#e.delete(e)}else l.addValue(r,s)&&this.#e.delete(e)}#n(e,n,r,s){const[a,l]=n;if(a===r){const h=l+s;h===0?this.#e.delete(e):this.#e.set(e,[r,h]);return}const u=_l(r),f=_l(a);if(f===u&&(a===r||Cn(a)===Cn(r))){const h=l+s;h===0?this.#e.delete(e):this.#e.set(e,[r,h]);return}if(f===rl&&u===rl){const h=new sl;h.set(Cn(a),n),h.set(Cn(r),[r,s]),this.#e.set(e,h)}else{const h=new i1;if(f===u){const m=new sl;m.set(Cn(a),n),m.set(Cn(r),[r,s]),h.set(f,m)}else h.set(f,n),h.set(u,[r,s]);this.#e.set(e,h)}}append(e){for(const[n,r]of e.entries())this.addValue(n,r)}join(e){const n=[];if(this.size<=e.size)for(const[r,s]of this.entriesIterators()){if(!e.has(r))continue;const a=e.get(r);for(const[l,u]of s)for(const[f,h]of a)u!==0&&h!==0&&n.push([[r,[l,f]],u*h])}else for(const[r,s]of e.entriesIterators()){if(!this.has(r))continue;const a=this.get(r);for(const[l,u]of s)for(const[f,h]of a)h!==0&&u!==0&&n.push([[r,[f,l]],h*u])}return new qt(n)}}function _l(t){return Array.isArray(t)&&(typeof t[0]=="string"||typeof t[0]=="number"||typeof t[0]=="bigint")?t[0]:rl}function Fu(t){return Array.isArray(t)}class NI extends Qa{#e=new Ks;#t=new Ks;#n;constructor(e,n,r,s){super(e,n,r),this.#n=s}run(){const e=new Set;for(const r of this.inputMessages())for(const[s,a]of r.getInner()){const[l,u]=s;this.#e.addValue(l,[u,a]),e.add(l)}const n=[];for(const r of e){const s=this.#e.get(r),a=this.#t.get(r),l=this.#n(s),u=new Map,f=new Map;for(const[h,m]of l){const p=u.get(h)??0;u.set(h,p+m)}for(const[h,m]of a){const p=f.get(h)??0;f.set(h,p+m)}for(const[h,m]of f)u.has(h)||(n.push([[r,h],-m]),this.#t.addValue(r,[h,-m]));for(const[h,m]of u)f.has(h)||m!==0&&(n.push([[r,h],m]),this.#t.addValue(r,[h,m]));for(const[h,m]of u){const p=f.get(h);if(p!==void 0){const y=m-p;y!==0&&(n.push([[r,h],y]),this.#t.addValue(r,[h,y]))}}}n.length>0&&this.output.sendData(new qt(n))}}function II(t){return e=>{const n=new Vr(e.graph,new Fr),r=new NI(e.graph.getNextOperatorId(),e.connectReader(),n.writer,t);return e.graph.addOperator(r),n}}function a1(t){return"pipe"in t}function o1(t,e={}){const n=Object.fromEntries(Object.entries(e).filter(([r,s])=>!a1(s)));return Object.fromEntries(Object.entries(e).filter(([r,s])=>a1(s))),r=>{const s="__original_key__";return r.pipe(Tn(u=>{const f=t(u),h=JSON.stringify(f),m={};m[s]=f;for(const[p,y]of Object.entries(n))m[p]=y.preMap(u);return[h,m]})).pipe(II(u=>{let f=0;for(const[p,y]of u)f+=y;if(f<=0)return[];const h={},m=u[0]?.[0]?.[s];h[s]=m;for(const[p,y]of Object.entries(n)){const g=u.map(([v,x])=>[v[p],x]);h[p]=y.reduce(g)}return[[h,1]]})).pipe(Tn(([u,f])=>{const h=f[s],m={};Object.assign(m,h);for(const[p,y]of Object.entries(n))y.postMap?m[p]=y.postMap(f[p]):m[p]=f[p];return[u,m]}))}}function MI(t=e=>e){return{preMap:e=>t(e),reduce:e=>{let n=0;for(const[r,s]of e)n+=r*s;return n}}}function DI(t=e=>e){return{preMap:e=>t(e)==null?0:1,reduce:e=>{let n=0;for(const[r,s]of e)n+=r*s;return n}}}function LI(t=e=>e){return{preMap:e=>({sum:t(e),count:0}),reduce:e=>{let n=0,r=0;for(const[s,a]of e)n+=s.sum*a,r+=a;return{sum:n,count:r}},postMap:e=>e.sum/e.count}}function jI(t){const e=t??(n=>n);return{preMap:n=>e(n),reduce:n=>{let r;for(const[s,a]of n)(!r||s&&s<r)&&(r=s);return r}}}function zI(t){const e=t??(n=>n);return{preMap:n=>e(n),reduce:n=>{let r;for(const[s,a]of n)(!r||s&&s>r)&&(r=s);return r}}}const PI={sum:MI,count:DI,avg:LI,min:jI,max:zI};class BI extends fy{#e;constructor(e,n,r,s){super(e,n,r),this.#e=s}inner(e){return this.#e(e),e}}function $I(t){return e=>{const n=new Vr(e.graph,new Fr),r=new BI(e.graph.getNextOperatorId(),e.connectReader(),n.writer,t);return e.graph.addOperator(r),n}}class UI extends fy{#e;constructor(e,n,r,s){super(e,n,r),this.#e=s}inner(e){return e.filter(this.#e)}}function Zs(t){return e=>{const n=new Vr(e.graph,new Fr),r=new UI(e.graph.getNextOperatorId(),e.connectReader(),n.writer,t);return e.graph.addOperator(r),n}}class qI extends Qa{#e;constructor(e,n,r,s){super(e,n,r),this.#e=s}run(){for(const e of this.inputMessages())this.#e(e),this.output.sendData(e)}}function FI(t){return e=>{const n=new Vr(e.graph,new Fr),r=new qI(e.graph.getNextOperatorId(),e.connectReader(),n.writer,t);return e.graph.addOperator(r),n}}class VI extends Qa{run(){const e=this.inputMessages();if(e.length===0)return;const n=new qt;for(const s of e)n.extend(s);const r=n.consolidate();r.getInner().length>0&&this.output.sendData(r)}}function HI(){return t=>{const e=new Vr(t.graph,new Fr),n=new VI(t.graph.getNextOperatorId(),t.connectReader(),e.writer);return t.graph.addOperator(n),e}}class GI extends TI{#e=new Ks;#t=new Ks;#n;constructor(e,n,r,s,a="inner"){super(e,n,r,s),this.#n=a}run(){const e=Ks.fromMultiSets(this.inputAMessages()),n=Ks.fromMultiSets(this.inputBMessages());if(e.size===0&&n.size===0)return;const r=new qt;this.#n!=="anti"&&this.emitInnerResults(e,n,r),(this.#n==="left"||this.#n==="full"||this.#n==="anti")&&this.emitLeftOuterResults(e,n,r),(this.#n==="right"||this.#n==="full")&&this.emitRightOuterResults(e,n,r),this.#e.append(e),this.#t.append(n),r.getInner().length>0&&this.output.sendData(r)}emitInnerResults(e,n,r){e.size>0&&r.extend(e.join(this.#t)),n.size>0&&r.extend(this.#e.join(n)),e.size>0&&n.size>0&&r.extend(e.join(n))}emitLeftOuterResults(e,n,r){if(e.size>0)for(const[s,a]of e.entriesIterators()){const l=this.#t.getConsolidatedMultiplicity(s),u=n.getConsolidatedMultiplicity(s);if(l+u===0)for(const[h,m]of a)m!==0&&r.add([s,[h,null]],m)}if(n.size>0)for(const s of n.getPresenceKeys()){const a=this.#t.getConsolidatedMultiplicity(s),l=n.getConsolidatedMultiplicity(s);if(l===0)continue;const u=a+l;if(a===0==(u===0))continue;const f=a===0;for(const[h,m]of this.#e.getIterator(s))m!==0&&r.add([s,[h,null]],f?-m:+m)}}emitRightOuterResults(e,n,r){if(n.size>0)for(const[s,a]of n.entriesIterators()){const l=this.#e.getConsolidatedMultiplicity(s),u=e.getConsolidatedMultiplicity(s);if(l+u===0)for(const[h,m]of a)m!==0&&r.add([s,[null,h]],m)}if(e.size>0)for(const s of e.getPresenceKeys()){const a=this.#e.getConsolidatedMultiplicity(s),l=e.getConsolidatedMultiplicity(s);if(l===0)continue;const u=a+l;if(a===0==(u===0))continue;const f=a===0;for(const[h,m]of this.#t.getIterator(s))m!==0&&r.add([s,[null,h]],f?-m:+m)}}}function KI(t,e="inner"){return n=>{if(n.graph!==t.graph)throw new Error("Cannot join streams from different graphs");const r=new Vr(n.graph,new Fr),s=new GI(n.graph.getNextOperatorId(),n.connectReader(),t.connectReader(),r.writer,e);return n.graph.addOperator(s),r}}class ZI extends Qa{#e;#t;constructor(e,n,r,s=a=>a){super(e,n,r),this.#e=s,this.#t=new Map}run(){const e=new Map;for(const r of this.inputMessages())for(const[s,a]of r.getInner()){const l=Cn(this.#e(s)),f=(e.get(l)?.[0]??this.#t.get(l)??0)+a;e.set(l,[f,s])}const n=[];for(const[r,[s,a]]of e.entries()){const l=this.#t.get(r)??0;s===0?this.#t.delete(r):this.#t.set(r,s),l<=0&&s>0?n.push([[Cn(this.#e(a)),a[1]],1]):l>0&&s<=0&&n.push([[Cn(this.#e(a)),a[1]],-1])}n.length>0&&this.output.sendData(new qt(n))}}function QI(t=e=>e){return e=>{const n=new Vr(e.graph,new Fr),r=new ZI(e.graph.getNextOperatorId(),e.connectReader(),n.writer,t);return e.graph.addOperator(r),n}}const JI="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function Ma(t,e,n){const r=n[0];if(e!=null&&t>=e)throw new Error(t+" >= "+e);if(t.slice(-1)===r||e&&e.slice(-1)===r)throw new Error("trailing zero");if(e){let l=0;for(;(t[l]||r)===e[l];)l++;if(l>0)return e.slice(0,l)+Ma(t.slice(l),e.slice(l),n)}const s=t?n.indexOf(t[0]):0,a=e!=null?n.indexOf(e[0]):n.length;if(a-s>1){const l=Math.round(.5*(s+a));return n[l]}else return e&&e.length>1?e.slice(0,1):n[s]+Ma(t.slice(1),null,n)}function ok(t){if(t.length!==lk(t[0]))throw new Error("invalid integer part of order key: "+t)}function lk(t){if(t>="a"&&t<="z")return t.charCodeAt(0)-97+2;if(t>="A"&&t<="Z")return 90-t.charCodeAt(0)+2;throw new Error("invalid order key head: "+t)}function il(t){const e=lk(t[0]);if(e>t.length)throw new Error("invalid order key: "+t);return t.slice(0,e)}function l1(t,e){if(t==="A"+e[0].repeat(26))throw new Error("invalid order key: "+t);const n=il(t);if(t.slice(n.length).slice(-1)===e[0])throw new Error("invalid order key: "+t)}function c1(t,e){ok(t);const[n,...r]=t.split("");let s=!0;for(let a=r.length-1;s&&a>=0;a--){const l=e.indexOf(r[a])+1;l===e.length?r[a]=e[0]:(r[a]=e[l],s=!1)}if(s){if(n==="Z")return"a"+e[0];if(n==="z")return null;const a=String.fromCharCode(n.charCodeAt(0)+1);return a>"a"?r.push(e[0]):r.pop(),a+r.join("")}else return n+r.join("")}function YI(t,e){ok(t);const[n,...r]=t.split("");let s=!0;for(let a=r.length-1;s&&a>=0;a--){const l=e.indexOf(r[a])-1;l===-1?r[a]=e.slice(-1):(r[a]=e[l],s=!1)}if(s){if(n==="a")return"Z"+e.slice(-1);if(n==="A")return null;const a=String.fromCharCode(n.charCodeAt(0)-1);return a<"Z"?r.push(e.slice(-1)):r.pop(),a+r.join("")}else return n+r.join("")}function XI(t,e,n=JI){if(t!=null&&l1(t,n),e!=null&&l1(e,n),t!=null&&e!=null&&t>=e)throw new Error(t+" >= "+e);if(t==null){if(e==null)return"a"+n[0];const f=il(e),h=e.slice(f.length);if(f==="A"+n[0].repeat(26))return f+Ma("",h,n);if(f<e)return f;const m=YI(f,n);if(m==null)throw new Error("cannot decrement any more");return m}if(e==null){const f=il(t),h=t.slice(f.length),m=c1(f,n);return m??f+Ma(h,null,n)}const r=il(t),s=t.slice(r.length),a=il(e),l=e.slice(a.length);if(r===a)return r+Ma(s,l,n);const u=c1(r,n);if(u==null)throw new Error("cannot increment any more");return u<e?u:r+Ma(s,null,n)}class u1{#e=[];#t;#n;#r;constructor(e,n,r){this.#n=e,this.#r=e+n,this.#t=r}get size(){const e=this.#n,n=this.#r-this.#n,r=this.#e.length-e;return Math.max(0,Math.min(n,r))}move({offset:e,limit:n}){const r=this.#n,s=this.#r-this.#n,a=[this.#n,this.#r===1/0?this.#n+this.size:this.#r];this.#n=e??r,this.#r=this.#n+(n??s);const l=[this.#n,this.#r===1/0?Math.max(this.#n+this.size,a[1]):this.#r],{onlyInA:u,onlyInB:f}=eI(a,l),h=[];f.forEach(p=>{const y=this.#e[p];y&&h.push(y)});const m=[];return u.forEach(p=>{const y=this.#e[p];y&&m.push(y)}),{moveIns:h,moveOuts:m,changes:u.length+f.length>0}}insert(e){const n={moveIn:null,moveOut:null},r=this.#s(e),s=r===0?null:d1(this.#e[r-1]),a=r===this.#e.length?null:d1(this.#e[r]),l=XI(s,a),u=f1(e,l);if(this.#e.splice(r,0,u),r<this.#r){const f=Math.max(r,this.#n);f<this.#e.length&&(n.moveIn=this.#e[f],this.#r<this.#e.length&&(n.moveOut=this.#e[this.#r]))}return n}delete(e){const n={moveIn:null,moveOut:null},r=this.#s(e),[s]=this.#e.splice(r,1);if(r<this.#r){if(n.moveOut=s,r<this.#n){const l=this.#n-1;l<this.#e.length?n.moveOut=this.#e[l]:n.moveOut=null}const a=this.#r-1;a<this.#e.length&&(n.moveIn=this.#e[a])}return n}#s(e){return XN(this.#e,f1(e,""),(n,r)=>this.#t(h1(n),h1(r)))}}class WI extends Qa{#e=new Map;#t;constructor(e,n,r,s,a){super(e,n,r);const l=a.limit??1/0,u=a.offset??0;this.#t=this.createTopK(u,l,tM(s)),a.setSizeCallback?.(()=>this.#t.size),a.setWindowFn?.(this.moveTopK.bind(this))}createTopK(e,n,r){return new u1(e,n,r)}moveTopK({offset:e,limit:n}){if(!(this.#t instanceof u1))throw new Error("Cannot move B+-tree implementation of TopK with fractional index");const r=[],s=this.#t.move({offset:e,limit:n});s.moveIns.forEach(a=>this.handleMoveIn(a,r)),s.moveOuts.forEach(a=>this.handleMoveOut(a,r)),s.changes&&this.output.sendData(new qt(r))}run(){const e=[];for(const n of this.inputMessages())for(const[r,s]of n.getInner()){const[a,l]=r;this.processElement(a,l,s,e)}e.length>0&&this.output.sendData(new qt(e))}processElement(e,n,r,s){const{oldMultiplicity:a,newMultiplicity:l}=this.addKey(e,r);let u={moveIn:null,moveOut:null};a<=0&&l>0?u=this.#t.insert([e,n]):a>0&&l<=0&&(u=this.#t.delete([e,n])),this.handleMoveIn(u.moveIn,s),this.handleMoveOut(u.moveOut,s)}handleMoveIn(e,n){if(e){const[[r,s],a]=e;n.push([[r,[s,a]],1])}}handleMoveOut(e,n){if(e){const[[r,s],a]=e;n.push([[r,[s,a]],-1])}}getMultiplicity(e){return this.#e.get(e)??0}addKey(e,n){const r=this.getMultiplicity(e),s=r+n;return s===0?this.#e.delete(e):this.#e.set(e,s),{oldMultiplicity:r,newMultiplicity:s}}}function eM(t,e){const n=e||{};return r=>{const s=new Vr(r.graph,new Fr),a=new WI(r.graph.getNextOperatorId(),r.connectReader(),s.writer,t,n);return r.graph.addOperator(a),s}}function f1(t,e){return[t,e]}function h1(t){return t[0]}function d1(t){return t[1]}function tM(t){return([e,n],[r,s])=>{const a=t(n,s);return a!==0?a:uf(e,r)}}function nM(t,e,n){const r=n?.limit??1/0,s=n?.offset??0,a=n?.setSizeCallback,l=n?.setWindowFn,u=n?.comparator??((f,h)=>f===h?0:f<h?-1:1);return f=>f.pipe(t((h,m)=>u(e(h),e(m)),{limit:r,offset:s,setSizeCallback:a,setWindowFn:l}),HI())}function rM(t,e){return nM(eM,t,e)}class sM{constructor(e,n,r){this._root=Xp,this._size=0,this._maxNodeSize=r>=4?Math.min(r,256):32,this._compare=e,n&&this.setPairs(n)}get size(){return this._size}get length(){return this._size}get isEmpty(){return this._size===0}clear(){this._root=Xp,this._size=0}get(e,n){return this._root.get(e,n,this)}set(e,n,r){this._root.isShared&&(this._root=this._root.clone());const s=this._root.set(e,n,r,this);return s===!0||s===!1?s:(this._root=new hy([this._root,s]),!0)}has(e){return this.forRange(e,e,!0,void 0)!==0}delete(e){return this.editRange(e,e,!0,aM)!==0}get maxNodeSize(){return this._maxNodeSize}minKey(){return this._root.minKey()}maxKey(){return this._root.maxKey()}keysArray(){const e=[];return this._root.forRange(this.minKey(),this.maxKey(),!0,!1,this,0,(n,r)=>{e.push(n)}),e}nextHigherPair(e,n){return n=n||[],e===void 0?this._root.minPair(n):this._root.getPairOrNextHigher(e,this._compare,!1,n)}nextHigherKey(e){const n=this.nextHigherPair(e,p1);return n&&n[0]}nextLowerPair(e,n){return n=n||[],e===void 0?this._root.maxPair(n):this._root.getPairOrNextLower(e,this._compare,!1,n)}nextLowerKey(e){const n=this.nextLowerPair(e,p1);return n&&n[0]}setPairs(e,n){let r=0;for(const s of e)this.set(s[0],s[1],n)&&r++;return r}forRange(e,n,r,s,a){const l=this._root.forRange(e,n,r,!1,this,a||0,s);return typeof l=="number"?l:l.break}editRange(e,n,r,s,a){let l=this._root;l.isShared&&(this._root=l=l.clone());try{const u=l.forRange(e,n,r,!0,this,a||0,s);return typeof u=="number"?u:u.break}finally{let u;for(;l.keys.length<=1&&!l.isLeaf;)u||=l.isShared,this._root=l=l.keys.length===0?Xp:l.children[0];u&&(l.isShared=!0)}}}class Il{get isLeaf(){return this.children===void 0}constructor(e=[],n){this.keys=e,this.values=n||pn,this.isShared=void 0}maxKey(){return this.keys[this.keys.length-1]}indexOf(e,n,r){const s=this.keys;let a=0,l=s.length,u=l>>1;for(;a<l;){const f=r(s[u],e);if(f<0)a=u+1;else if(f>0)l=u;else{if(f===0)return u;if(e===e)return s.length;throw new Error("BTree: NaN was used as a key")}u=a+l>>1}return u^n}minKey(){return this.keys[0]}minPair(e){if(this.keys.length!==0)return e[0]=this.keys[0],e[1]=this.values[0],e}maxPair(e){if(this.keys.length===0)return;const n=this.keys.length-1;return e[0]=this.keys[n],e[1]=this.values[n],e}clone(){const e=this.values;return new Il(this.keys.slice(0),e===pn?e:e.slice(0))}get(e,n,r){const s=this.indexOf(e,-1,r._compare);return s<0?n:this.values[s]}getPairOrNextLower(e,n,r,s){const a=this.indexOf(e,-1,n),l=a<0?~a-1:r?a:a-1;if(l>=0)return s[0]=this.keys[l],s[1]=this.values[l],s}getPairOrNextHigher(e,n,r,s){const a=this.indexOf(e,-1,n),l=a<0?~a:r?a:a+1,u=this.keys;if(l<u.length)return s[0]=u[l],s[1]=this.values[l],s}set(e,n,r,s){let a=this.indexOf(e,-1,s._compare);if(a<0){if(a=~a,s._size++,this.keys.length<s._maxNodeSize)return this.insertInLeaf(a,e,n,s);{const l=this.splitOffRightSide();let u=this;return a>this.keys.length&&(a-=this.keys.length,u=l),u.insertInLeaf(a,e,n,s),l}}else return r!==!1&&(n!==void 0&&this.reifyValues(),this.keys[a]=e,this.values[a]=n),!1}reifyValues(){return this.values===pn?this.values=this.values.slice(0,this.keys.length):this.values}insertInLeaf(e,n,r,s){if(this.keys.splice(e,0,n),this.values===pn){for(;pn.length<s._maxNodeSize;)pn.push(void 0);if(r===void 0)return!0;this.values=pn.slice(0,this.keys.length-1)}return this.values.splice(e,0,r),!0}takeFromRight(e){let n=this.values;e.values===pn?n!==pn&&n.push(void 0):(n=this.reifyValues(),n.push(e.values.shift())),this.keys.push(e.keys.shift())}takeFromLeft(e){let n=this.values;e.values===pn?n!==pn&&n.unshift(void 0):(n=this.reifyValues(),n.unshift(e.values.pop())),this.keys.unshift(e.keys.pop())}splitOffRightSide(){const e=this.keys.length>>1,n=this.keys.splice(e),r=this.values===pn?pn:this.values.splice(e);return new Il(n,r)}forRange(e,n,r,s,a,l,u){const f=a._compare;let h,m;if(n===e){if(!r||(m=(h=this.indexOf(e,-1,f))+1,h<0))return l}else h=this.indexOf(e,0,f),m=this.indexOf(n,-1,f),m<0?m=~m:r===!0&&m++;const p=this.keys,y=this.values;if(u!==void 0)for(let g=h;g<m;g++){const v=p[g],x=u(v,y[g],l++);if(x!==void 0){if(s===!0){if(v!==p[g]||this.isShared===!0)throw new Error("BTree illegally changed or cloned in editRange");x.delete?(this.keys.splice(g,1),this.values!==pn&&this.values.splice(g,1),a._size--,g--,m--):x.hasOwnProperty("value")&&(y[g]=x.value)}if(x.break!==void 0)return x}}else l+=m-h;return l}mergeSibling(e,n){if(this.keys.push.apply(this.keys,e.keys),this.values===pn){if(e.values===pn)return;this.values=this.values.slice(0,this.keys.length)}this.values.push.apply(this.values,e.reifyValues())}}class hy extends Il{constructor(e,n){if(!n){n=[];for(let r=0;r<e.length;r++)n[r]=e[r].maxKey()}super(n),this.children=e}minKey(){return this.children[0].minKey()}minPair(e){return this.children[0].minPair(e)}maxPair(e){return this.children[this.children.length-1].maxPair(e)}get(e,n,r){const s=this.indexOf(e,0,r._compare),a=this.children;return s<a.length?a[s].get(e,n,r):void 0}getPairOrNextLower(e,n,r,s){const a=this.indexOf(e,0,n),l=this.children;if(a>=l.length)return this.maxPair(s);const u=l[a].getPairOrNextLower(e,n,r,s);return u===void 0&&a>0?l[a-1].maxPair(s):u}getPairOrNextHigher(e,n,r,s){const a=this.indexOf(e,0,n),l=this.children,u=l.length;if(a>=u)return;const f=l[a].getPairOrNextHigher(e,n,r,s);return f===void 0&&a<u-1?l[a+1].minPair(s):f}set(e,n,r,s){const a=this.children,l=s._maxNodeSize,u=s._compare;let f=Math.min(this.indexOf(e,0,u),a.length-1),h=a[f];if(h.isShared&&(a[f]=h=h.clone()),h.keys.length>=l){let p;f>0&&(p=a[f-1]).keys.length<l&&u(h.keys[0],e)<0?(p.isShared&&(a[f-1]=p=p.clone()),p.takeFromRight(h),this.keys[f-1]=p.maxKey()):(p=a[f+1])!==void 0&&p.keys.length<l&&u(h.maxKey(),e)<0&&(p.isShared&&(a[f+1]=p=p.clone()),p.takeFromLeft(h),this.keys[f]=a[f].maxKey())}const m=h.set(e,n,r,s);if(m===!1)return!1;if(this.keys[f]=h.maxKey(),m===!0)return!0;if(this.keys.length<l)return this.insert(f+1,m),!0;{const p=this.splitOffRightSide();let y=this;return u(m.maxKey(),this.maxKey())>0&&(y=p,f-=this.keys.length),y.insert(f+1,m),p}}insert(e,n){this.children.splice(e,0,n),this.keys.splice(e,0,n.maxKey())}splitOffRightSide(){const e=this.children.length>>1;return new hy(this.children.splice(e),this.keys.splice(e))}takeFromRight(e){this.keys.push(e.keys.shift()),this.children.push(e.children.shift())}takeFromLeft(e){this.keys.unshift(e.keys.pop()),this.children.unshift(e.children.pop())}forRange(e,n,r,s,a,l,u){const f=a._compare,h=this.keys,m=this.children;let p=this.indexOf(e,0,f),y=p;const g=Math.min(n===e?p:this.indexOf(n,0,f),h.length-1);if(s){if(y<=g)try{for(;y<=g;y++){m[y].isShared&&(m[y]=m[y].clone());const v=m[y].forRange(e,n,r,s,a,l,u);if(h[y]=m[y].maxKey(),typeof v!="number")return v;l=v}}finally{const v=a._maxNodeSize>>1;for(p>0&&p--,y=g;y>=p;y--)m[y].keys.length<=v&&(m[y].keys.length!==0?this.tryMerge(y,a._maxNodeSize):(h.splice(y,1),m.splice(y,1)));m.length!==0&&m[0].keys.length===0&&oM(!1,"emptiness bug")}}else for(;y<=g;y++){const v=m[y].forRange(e,n,r,s,a,l,u);if(typeof v!="number")return v;l=v}return l}tryMerge(e,n){const r=this.children;return e>=0&&e+1<r.length&&r[e].keys.length+r[e+1].keys.length<=n?(r[e].isShared&&(r[e]=r[e].clone()),r[e].mergeSibling(r[e+1],n),r.splice(e+1,1),this.keys.splice(e+1,1),this.keys[e]=r[e].maxKey(),!0):!1}mergeSibling(e,n){const r=this.keys.length;this.keys.push.apply(this.keys,e.keys);const s=e.children;if(this.children.push.apply(this.children,s),e.isShared&&!this.isShared)for(const a of s)a.isShared=!0;this.tryMerge(r-1,n)}}const pn=[],iM={delete:!0},aM=()=>iM,Xp=(function(){const t=new Il;return t.isShared=!0,t})(),p1=[];function oM(t,...e){throw e.unshift("B+ tree"),new Error(e.join(" "))}function lM(){const t=new Map;function e(n){const r=n.join(".");if(t.has(r))return t.get(r);const s=new Proxy({},{get(a,l,u){if(l==="__refProxy")return!0;if(l==="__path")return n;if(l==="__type")return;if(typeof l=="symbol")return Reflect.get(a,l,u);const f=[...n,String(l)];return e(f)},has(a,l){return l==="__refProxy"||l==="__path"||l==="__type"?!0:Reflect.has(a,l)},ownKeys(a){return Reflect.ownKeys(a)},getOwnPropertyDescriptor(a,l){return l==="__refProxy"||l==="__path"||l==="__type"?{enumerable:!1,configurable:!0}:Reflect.getOwnPropertyDescriptor(a,l)}});return t.set(r,s),s}return e([])}function Sa(t){const e=new Map;let n=0;function r(a){const l=a.join(".");if(e.has(l))return e.get(l);const u=new Proxy({},{get(f,h,m){if(h==="__refProxy")return!0;if(h==="__path")return a;if(h==="__type")return;if(typeof h=="symbol")return Reflect.get(f,h,m);const p=[...a,String(h)];return r(p)},has(f,h){return h==="__refProxy"||h==="__path"||h==="__type"?!0:Reflect.has(f,h)},ownKeys(f){const h=++n,m=`__SPREAD_SENTINEL__${a.join(".")}__${h}`;return Object.prototype.hasOwnProperty.call(f,m)||Object.defineProperty(f,m,{enumerable:!0,configurable:!0,value:!0}),Reflect.ownKeys(f)},getOwnPropertyDescriptor(f,h){return h==="__refProxy"||h==="__path"||h==="__type"?{enumerable:!1,configurable:!0}:Reflect.getOwnPropertyDescriptor(f,h)}});return e.set(l,u),u}return new Proxy({},{get(a,l,u){if(l==="__refProxy")return!0;if(l==="__path")return[];if(l==="__type")return;if(typeof l=="symbol")return Reflect.get(a,l,u);const f=String(l);if(t.includes(f))return r([f])},has(a,l){return l==="__refProxy"||l==="__path"||l==="__type"||typeof l=="string"&&t.includes(l)?!0:Reflect.has(a,l)},ownKeys(a){return[...t,"__refProxy","__path","__type"]},getOwnPropertyDescriptor(a,l){if(l==="__refProxy"||l==="__path"||l==="__type")return{enumerable:!1,configurable:!0};if(typeof l=="string"&&t.includes(l))return{enumerable:!0,configurable:!0}}})}function Xt(t){return cM(t)?new Rn(t.__path):t&&typeof t=="object"&&"type"in t&&(t.type==="func"||t.type==="ref"||t.type==="val"||t.type==="agg")?t:new Un(t)}function cM(t){return t&&typeof t=="object"&&t.__refProxy===!0}function Jm(t,e){return new xr("eq",[Xt(t),Xt(e)])}function m1(t,e){return new xr("gt",[Xt(t),Xt(e)])}function uM(t,e){return new xr("gte",[Xt(t),Xt(e)])}function Ym(t,e){return new xr("lt",[Xt(t),Xt(e)])}function Xm(t,e,...n){const r=[t,e,...n];return new xr("and",r.map(s=>Xt(s)))}function fM(t,e,...n){const r=[t,e,...n];return new xr("or",r.map(s=>Xt(s)))}function hM(t,e){return new xr("in",[Xt(t),Xt(e)])}class dM{constructor(e,n,r,s){this.lookupCount=0,this.totalLookupTime=0,this.lastUpdated=new Date,this.id=e,this.expression=n,this.compareOptions=cy,this.name=r,this.initialize(s)}supports(e){return this.supportedOperations.has(e)}matchesField(e){return this.expression.type==="ref"&&this.expression.path.length===e.length&&this.expression.path.every((n,r)=>n===e[r])}matchesCompareOptions(e){const n={...this.compareOptions,direction:void 0},r={...e,direction:void 0};return Ar(n,r)}matchesDirection(e){return this.compareOptions.direction===e}getStats(){return{entryCount:this.keyCount,lookupCount:this.lookupCount,averageLookupTime:this.lookupCount>0?this.totalLookupTime/this.lookupCount:0,lastUpdated:this.lastUpdated}}evaluateIndexExpression(e){return oy(this.expression)(e)}trackLookup(e){const n=performance.now()-e;this.lookupCount++,this.totalLookupTime+=n}updateTimestamp(){this.lastUpdated=new Date}}class Wm extends dM{constructor(e,n,r,s){super(e,n,r,s),this.supportedOperations=new Set(["eq","gt","gte","lt","lte","in"]),this.valueMap=new Map,this.indexedKeys=new Set,this.compareFn=Km,this.compareFn=s?.compareFn??Km,s?.compareOptions&&(this.compareOptions=s.compareOptions),this.orderedEntries=new sM(this.compareFn)}initialize(e){}add(e,n){let r;try{r=this.evaluateIndexExpression(n)}catch(a){throw new Error(`Failed to evaluate index expression for key ${e}: ${a}`)}const s=ps(r);if(this.valueMap.has(s))this.valueMap.get(s).add(e);else{const a=new Set([e]);this.valueMap.set(s,a),this.orderedEntries.set(s,void 0)}this.indexedKeys.add(e),this.updateTimestamp()}remove(e,n){let r;try{r=this.evaluateIndexExpression(n)}catch(a){console.warn(`Failed to evaluate index expression for key ${e} during removal:`,a);return}const s=ps(r);if(this.valueMap.has(s)){const a=this.valueMap.get(s);a.delete(e),a.size===0&&(this.valueMap.delete(s),this.orderedEntries.delete(s))}this.indexedKeys.delete(e),this.updateTimestamp()}update(e,n,r){this.remove(e,n),this.add(e,r)}build(e){this.clear();for(const[n,r]of e)this.add(n,r)}clear(){this.orderedEntries.clear(),this.valueMap.clear(),this.indexedKeys.clear(),this.updateTimestamp()}lookup(e,n){const r=performance.now();let s;switch(e){case"eq":s=this.equalityLookup(n);break;case"gt":s=this.rangeQuery({from:n,fromInclusive:!1});break;case"gte":s=this.rangeQuery({from:n,fromInclusive:!0});break;case"lt":s=this.rangeQuery({to:n,toInclusive:!1});break;case"lte":s=this.rangeQuery({to:n,toInclusive:!0});break;case"in":s=this.inArrayLookup(n);break;default:throw new Error(`Operation ${e} not supported by BTreeIndex`)}return this.trackLookup(r),s}get keyCount(){return this.indexedKeys.size}equalityLookup(e){const n=ps(e);return new Set(this.valueMap.get(n)??[])}rangeQuery(e={}){const{from:n,to:r,fromInclusive:s=!0,toInclusive:a=!0}=e,l=new Set,u=ps(n),f=ps(r),h=u??this.orderedEntries.minKey(),m=f??this.orderedEntries.maxKey();return this.orderedEntries.forRange(h,m,a,(p,y)=>{if(!s&&this.compareFn(p,n)===0)return;const g=this.valueMap.get(p);g&&g.forEach(v=>l.add(v))}),l}rangeQueryReversed(e={}){const{from:n,to:r,fromInclusive:s=!0,toInclusive:a=!0}=e;return this.rangeQuery({from:r??this.orderedEntries.maxKey(),to:n??this.orderedEntries.minKey(),fromInclusive:a,toInclusive:s})}takeInternal(e,n,r,s,a=!1){const l=new Set,u=[];let f,h=ps(r);for(;(f=n(h))!==void 0&&u.length<e;){h=f[0];const m=this.valueMap.get(h);if(m&&m.size>0){const p=Array.from(m).sort(uf);a&&p.reverse();for(const y of p){if(u.length>=e)break;!l.has(y)&&(s?.(y)??!0)&&(u.push(y),l.add(y))}}}return u}take(e,n,r){const s=a=>this.orderedEntries.nextHigherPair(a);return this.takeInternal(e,s,n,r)}takeReversed(e,n,r){const s=a=>this.orderedEntries.nextLowerPair(a);return this.takeInternal(e,s,n,r,!0)}inArrayLookup(e){const n=new Set;for(const r of e){const s=ps(r),a=this.valueMap.get(s);a&&a.forEach(l=>n.add(l))}return n}get indexedKeysSet(){return this.indexedKeys}get orderedEntriesArray(){return this.orderedEntries.keysArray().map(e=>[e,this.valueMap.get(e)??new Set])}get orderedEntriesArrayReversed(){return this.takeReversed(this.orderedEntries.size).map(e=>[e,this.valueMap.get(e)??new Set])}get valueMapData(){return this.valueMap}}function ck(t){return t.config.autoIndex==="eager"}function eh(t,e,n,r,s){if(!ck(n))return;const a=r??{...cy,...n.compareOptions};if(!Array.from(n.indexes.values()).find(u=>u.matchesField(e)&&u.matchesCompareOptions(a)))try{n.createIndex(u=>{let f=u;for(const h of e)f=f[h];return f},{name:`auto:${e.join(".")}`,indexType:Wm,options:s?{compareFn:s,compareOptions:a}:{}})}catch(u){console.warn(`${n.id?`[${n.id}] `:""}Failed to create auto-index for field path "${e.join(".")}":`,u)}}function pM(t,e){if(!ck(e))return;const n=mM(t);for(const{fieldName:r,fieldPath:s}of n)eh(r,s,e)}function mM(t){const e=[];function n(r){if(r.type!=="func")return;const s=r;if(s.name==="and"){for(const h of s.args)n(h);return}if(!["eq","gt","gte","lt","lte","in"].includes(s.name)||s.args.length<1||s.args[0].type!=="ref")return;const u=s.args[0].path;if(u.length===0)return;const f=u.join("_");e.push({fieldName:f,fieldPath:u})}return n(t),e}const{sum:gM,count:yM,avg:_M,min:bM,max:vM}=PI;function xM(t,e){const n=new Map,r=[...t];if(!e)return{selectToGroupByIndex:n,groupByExpressions:r};for(const[s,a]of Object.entries(e)){if(a.type==="agg")continue;const l=r.findIndex(u=>ff(a,u));if(l===-1)throw new kN(s);n.set(s,l)}return{selectToGroupByIndex:n,groupByExpressions:r}}function g1(t,e,n,r,s){if(e.length===0){const h={};if(r){for(const[p,y]of Object.entries(r))if(y.type==="agg"){const g=y;h[p]=y1(g)}}const m=()=>({__singleGroup:!0});if(t=t.pipe(o1(m,h)),t=t.pipe(Tn(([,p])=>{const g={...p.__select_results||{}};if(r)for(const[v,x]of Object.entries(r))x.type==="agg"&&(g[v]=p[v]);return["single_group",{...p,__select_results:g}]})),n&&n.length>0)for(const p of n){const y=Zx(p),g=hf(y,r||{}),v=qn(g);t=t.pipe(Zs(([,x])=>{const E={result:x.__select_results};return Pa(v(E))}))}if(s&&s.length>0)for(const p of s)t=t.pipe(Zs(([,y])=>{const g={result:y.__select_results};return Pa(p(g))}));return t}const a=xM(e,r),l=e.map(h=>qn(h)),u=([,h])=>{const m={...h};delete m.__select_results;const p={};for(let y=0;y<e.length;y++){const g=l[y],v=g(m);p[`__key_${y}`]=v}return p},f={};if(r){for(const[h,m]of Object.entries(r))if(m.type==="agg"){const p=m;f[h]=y1(p)}}if(t=t.pipe(o1(u,f)),t=t.pipe(Tn(([,h])=>{const m=h.__select_results||{},p={};if(r)for(const[g,v]of Object.entries(r))if(v.type!=="agg"){const x=a.selectToGroupByIndex.get(g);x!==void 0?p[g]=h[`__key_${x}`]:p[g]=m[g]}else p[g]=h[g];else for(let g=0;g<e.length;g++)p[`__key_${g}`]=h[`__key_${g}`];let y;if(e.length===1)y=h.__key_0;else{const g=[];for(let v=0;v<e.length;v++)g.push(h[`__key_${v}`]);y=JSON.stringify(g)}return[y,{...h,__select_results:p}]})),n&&n.length>0)for(const h of n){const m=Zx(h),p=hf(m,r||{}),y=qn(p);t=t.pipe(Zs(([,g])=>{const v={result:g.__select_results};return y(v)}))}if(s&&s.length>0)for(const h of s)t=t.pipe(Zs(([,m])=>{const p={result:m.__select_results};return Pa(h(p))}));return t}function ff(t,e){if(!t||!e||t.type!==e.type)return!1;switch(t.type){case"ref":return!t.path||!e.path||t.path.length!==e.path.length?!1:t.path.every((n,r)=>n===e.path[r]);case"val":return t.value===e.value;case"func":return t.name===e.name&&t.args?.length===e.args?.length&&(t.args||[]).every((n,r)=>ff(n,e.args[r]));case"agg":return t.name===e.name&&t.args?.length===e.args?.length&&(t.args||[]).every((n,r)=>ff(n,e.args[r]));default:return!1}}function y1(t){const e=qn(t.args[0]),n=([,a])=>{const l=e(a);return typeof l=="number"?l:l!=null?Number(l):0},r=([,a])=>{const l=e(a);return typeof l=="number"||l instanceof Date?l:l!=null?Number(l):0},s=([,a])=>e(a);switch(t.name.toLowerCase()){case"sum":return gM(n);case"count":return yM(s);case"avg":return _M(n);case"min":return bM(r);case"max":return vM(r);default:throw new EN(t.name)}}function hf(t,e,n="result"){switch(t.type){case"agg":{const r=t;for(const[s,a]of Object.entries(e))if(a.type==="agg"&&wM(r,a))return new Rn([n,s]);throw new CN(r.name)}case"func":{const r=t,s=r.args.map(a=>hf(a,e));return new xr(r.name,s)}case"ref":return t;case"val":return t;default:throw new TN(t.type)}}function wM(t,e){return t.name===e.name&&t.args.length===e.args.length&&t.args.every((n,r)=>ff(n,e.args[r]))}function SM(t,e,n,r,s,a,l,u,f){const h=n.map(v=>{const x=hf(v.expression,r,"__select_results");return{compiledExpression:qn(x),compareOptions:eg(v,s)}}),m=v=>{const x=v;return n.length>1?h.map(E=>E.compiledExpression(x)):n.length===1?h[0].compiledExpression(x):null},p=(v,x)=>{if(n.length>1){const E=v,S=x;for(let C=0;C<n.length;C++){const T=h[C],D=lf(T.compareOptions)(E[C],S[C]);if(D!==0)return D}return E.length-S.length}if(n.length===1){const E=h[0];return lf(E.compareOptions)(v,x)}return Km(v,x)};let y,g;if(u){let v,x,E,S=t.from.alias;const C=n[0],T=C.expression;if(T.type==="ref"){const L=Ol(t,T,s);if(L){x=L.collection;const D=L.path[0],N=eg(C,x);D&&eh(D,L.path,x,N,p),E=qn(new Rn(L.path),!0),v=Kl(x,L.path,N),v?.supports("gt")||(v=void 0),S=T.path.length>1?String(T.path[0]):t.from.alias}}if(E){const D=n.every(G=>G.expression.type==="ref")?n.map(G=>{const j=G.expression,J=Ol(t,j,s);return qn(J?new Rn(J.path):G.expression,!0)}):void 0;g={alias:S,offset:f??0,limit:u,comparator:(G,j)=>{if(n.length===1){const J=G&&E(G),ie=j&&E(j);return p(J,ie)}if(D){const J=ie=>ie&&D.map(q=>q(ie));return p(J(G),J(j))}return 0},valueExtractorForRawRow:G=>{if(n.length===1)return E(G);if(D)return D.map(j=>j(G))},firstColumnValueExtractor:E,index:v,orderBy:n};const K=x?.id??s.id;a[K]=g,v&&(y=G=>{a[K].dataNeeded=()=>{const j=G();return Math.max(0,g.limit-j)}})}}return e.pipe(rM(m,{limit:u,offset:f,comparator:p,setSizeCallback:y,setWindowFn:v=>{l(x=>{v(x),g&&(g.offset=x.offset??g.offset,g.limit=x.limit??g.limit)})}}))}function eg(t,e){return t.compareOptions.stringSort!==void 0?t.compareOptions:{...e.compareOptions,direction:t.compareOptions.direction,nulls:t.compareOptions.nulls}}function kM(t,e={}){const n=r=>{const s=[];for(const[a,l]of t.entries())(r?.(l)??!0)&&s.push({type:"insert",key:a,value:l});return s};if(e.limit!==void 0&&!e.orderBy)throw new Error("limit cannot be used without orderBy");if(e.orderBy){const r=e.where?bl(e.where):void 0,s=CM(t,e.orderBy,e.limit,r,e.optimizedOnly);if(s===void 0)return;const a=[];for(const l of s){const u=t.get(l);u!==void 0&&a.push({type:"insert",key:l,value:u})}return a}if(!e.where)return n();try{const r=e.where,s=HN(r,t);if(s.canOptimize){const a=[];for(const l of s.matchingKeys){const u=t.get(l);u!==void 0&&a.push({type:"insert",key:l,value:u})}return a}else{if(e.optimizedOnly)return;const a=bl(r);return n(a)}}catch(r){console.warn(`${t.id?`[${t.id}] `:""}Error processing where clause, falling back to full scan:`,r);const s=bl(e.where);return e.optimizedOnly?void 0:n(s)}}function bl(t){const e=oy(t);return n=>{try{const r=e(n);return Pa(r)}catch{return!1}}}function EM(t,e){const n=bl(e.whereExpression);return r=>{const s=[];for(const a of r)if(a.type==="insert")n(a.value)&&s.push(a);else if(a.type==="update"){const l=n(a.value),u=a.previousValue?n(a.previousValue):!1;l&&u?s.push(a):l&&!u?s.push({...a,type:"insert"}):!l&&u&&s.push({...a,type:"delete",value:a.previousValue})}else n(a.value)&&s.push(a);(s.length>0||r.length===0)&&t(s)}}function CM(t,e,n,r,s){if(e.length===1){const f=e[0],h=f.expression;if(h.type==="ref"){const p=h.path,y=eg(f,t);eh(p[0],p,t,y);const g=Kl(t,p,y);if(g&&g.supports("gt")){const v=x=>{const E=t.get(x);return E===void 0?!1:r?.(E)??!0};return g.take(n??g.keyCount,void 0,v)}}}if(s)return;const a=[];for(const[f,h]of t.entries())(r?.(h)??!0)&&a.push({key:f,value:h});const l=(f,h)=>{for(const m of e){const p=lf(m.compareOptions),y=_1(f.value,m.expression),g=_1(h.value,m.expression),v=p(y,g);if(v!==0)return v}return 0};a.sort(l);const u=a.map(f=>f.key);return n!==void 0?u.slice(0,n):u}function _1(t,e){if(e.type==="ref"){const n=e;let r=t;for(const s of n.path)r=r?.[s];return r}else return e.type==="val"?e.value:oy(e)(t)}class b1{constructor(e){this.map=new Map,this.sortedKeys=[],this.comparator=e}indexOf(e,n){let r=0,s=this.sortedKeys.length;if(!this.comparator){for(;r<s;){const a=Math.floor((r+s)/2),l=this.sortedKeys[a],u=uf(e,l);if(u<0)s=a;else if(u>0)r=a+1;else return a}return r}for(;r<s;){const a=Math.floor((r+s)/2),l=this.sortedKeys[a],u=this.map.get(l),f=this.comparator(n,u);if(f<0)s=a;else if(f>0)r=a+1;else{const h=uf(e,l);if(h<0)s=a;else if(h>0)r=a+1;else return a}}return r}set(e,n){if(this.map.has(e)){const s=this.map.get(e),a=this.indexOf(e,s);this.sortedKeys.splice(a,1)}const r=this.indexOf(e,n);return this.sortedKeys.splice(r,0,e),this.map.set(e,n),this}get(e){return this.map.get(e)}delete(e){if(this.map.has(e)){const n=this.map.get(e),r=this.indexOf(e,n);return this.sortedKeys.splice(r,1),this.map.delete(e)}return!1}has(e){return this.map.has(e)}clear(){this.map.clear(),this.sortedKeys=[]}get size(){return this.map.size}*[Symbol.iterator](){for(const e of this.sortedKeys)yield[e,this.map.get(e)]}entries(){return this[Symbol.iterator]()}keys(){return this.sortedKeys[Symbol.iterator]()}values(){return(function*(){for(const e of this.sortedKeys)yield this.map.get(e)}).call(this)}forEach(e){for(const n of this.sortedKeys)e(this.map.get(n),n,this.map)}}class TM{constructor(e){this.pendingSyncedTransactions=[],this.syncedMetadata=new Map,this.optimisticUpserts=new Map,this.optimisticDeletes=new Set,this.size=0,this.syncedKeys=new Set,this.preSyncVisibleState=new Map,this.recentlySyncedKeys=new Set,this.hasReceivedFirstCommit=!1,this.isCommittingSyncTransactions=!1,this.commitPendingTransactions=()=>{let n=!1;for(const l of this.transactions.values())if(l.state==="persisting"){n=!0;break}const{committedSyncedTransactions:r,uncommittedSyncedTransactions:s,hasTruncateSync:a}=this.pendingSyncedTransactions.reduce((l,u)=>(u.committed?(l.committedSyncedTransactions.push(u),u.truncate===!0&&(l.hasTruncateSync=!0)):l.uncommittedSyncedTransactions.push(u),l),{committedSyncedTransactions:[],uncommittedSyncedTransactions:[],hasTruncateSync:!1});if(!n||a){this.isCommittingSyncTransactions=!0;const l=a?r.find(y=>y.truncate)?.optimisticSnapshot:null,u=new Set;for(const y of r)for(const g of y.operations)u.add(g.key);let f=this.preSyncVisibleState;if(f.size===0){f=new Map;for(const y of u){const g=this.get(y);g!==void 0&&f.set(y,g)}}const h=[],m=this.config.sync.rowUpdateMode||"partial";for(const y of r){if(y.truncate){const g=new Set([...this.syncedData.keys(),...l?.upserts.keys()||[]]);for(const v of g){if(l?.deletes.has(v))continue;const x=l?.upserts.get(v)||this.syncedData.get(v);x!==void 0&&h.push({type:"delete",key:v,value:x})}this.syncedData.clear(),this.syncedMetadata.clear(),this.syncedKeys.clear();for(const v of u)f.delete(v);this._events.emit("truncate",{type:"truncate",collection:this.collection})}for(const g of y.operations){const v=g.key;switch(this.syncedKeys.add(v),g.type){case"insert":this.syncedMetadata.set(v,g.metadata);break;case"update":this.syncedMetadata.set(v,Object.assign({},this.syncedMetadata.get(v),g.metadata));break;case"delete":this.syncedMetadata.delete(v);break}switch(g.type){case"insert":this.syncedData.set(v,g.value);break;case"update":{if(m==="partial"){const x=Object.assign({},this.syncedData.get(v),g.value);this.syncedData.set(v,x)}else this.syncedData.set(v,g.value);break}case"delete":this.syncedData.delete(v);break}}}if(a){const y=new Set;for(const x of r)for(const E of x.operations)(E.type==="insert"||E.type==="update")&&y.add(E.key);const g=new Map(l.upserts),v=new Set(l.deletes);for(const[x,E]of g)if(!v.has(x))if(y.has(x)){let S=!1;for(let C=h.length-1;C>=0;C--){const T=h[C];if(T.key===x&&T.type==="insert"){T.value=E,S=!0;break}}S||h.push({type:"insert",key:x,value:E})}else h.push({type:"insert",key:x,value:E});if(h.length>0&&v.size>0){const x=[];for(const E of h)E.type==="insert"&&v.has(E.key)||x.push(E);h.length=0,h.push(...x)}this.lifecycle.status!=="ready"&&this.lifecycle.markReady()}if(this.optimisticUpserts.clear(),this.optimisticDeletes.clear(),this.isCommittingSyncTransactions=!1,a&&l){for(const[y,g]of l.upserts)this.optimisticUpserts.set(y,g);for(const y of l.deletes)this.optimisticDeletes.add(y)}for(const y of this.transactions.values())if(!["completed","failed"].includes(y.state)){for(const g of y.mutations)if(this.isThisCollection(g.collection)&&g.optimistic)switch(g.type){case"insert":case"update":this.optimisticUpserts.set(g.key,g.modified),this.optimisticDeletes.delete(g.key);break;case"delete":this.optimisticUpserts.delete(g.key),this.optimisticDeletes.add(g.key);break}}const p=new Map;for(const y of this.transactions.values())if(y.state==="completed")for(const g of y.mutations)g.optimistic&&this.isThisCollection(g.collection)&&u.has(g.key)&&p.set(g.key,{type:g.type,value:g.modified});for(const y of u){const g=f.get(y),v=this.get(y),x=p.get(y);let E=!1;x&&(x.type==="delete"&&g!==void 0&&v===void 0&&Ar(x.value,g)||v!==void 0&&Ar(x.value,v))&&(E=!0),E||(g===void 0&&v!==void 0?h.push({type:"insert",key:y,value:v}):g!==void 0&&v===void 0?h.push({type:"delete",key:y,value:g}):g!==void 0&&v!==void 0&&!Ar(g,v)&&h.push({type:"update",key:y,value:v,previousValue:g}))}this.size=this.calculateSize(),h.length>0&&this.indexes.updateIndexes(h),this.changes.emitEvents(h,!0),this.pendingSyncedTransactions=s,this.preSyncVisibleState.clear(),Promise.resolve().then(()=>{this.recentlySyncedKeys.clear()}),this.hasReceivedFirstCommit||(this.hasReceivedFirstCommit=!0)}},this.config=e,this.transactions=new b1((n,r)=>n.compareCreatedAt(r)),this.syncedData=new b1(e.compare)}setDeps(e){this.collection=e.collection,this.lifecycle=e.lifecycle,this.changes=e.changes,this.indexes=e.indexes,this._events=e.events}get(e){const{optimisticDeletes:n,optimisticUpserts:r,syncedData:s}=this;if(!n.has(e))return r.has(e)?r.get(e):s.get(e)}has(e){const{optimisticDeletes:n,optimisticUpserts:r,syncedData:s}=this;return n.has(e)?!1:r.has(e)?!0:s.has(e)}*keys(){const{syncedData:e,optimisticDeletes:n,optimisticUpserts:r}=this;for(const s of e.keys())n.has(s)||(yield s);for(const s of r.keys())!e.has(s)&&!n.has(s)&&(yield s)}*values(){for(const e of this.keys()){const n=this.get(e);n!==void 0&&(yield n)}}*entries(){for(const e of this.keys()){const n=this.get(e);n!==void 0&&(yield[e,n])}}*[Symbol.iterator](){for(const[e,n]of this.entries())yield[e,n]}forEach(e){let n=0;for(const[r,s]of this.entries())e(s,r,n++)}map(e){const n=[];let r=0;for(const[s,a]of this.entries())n.push(e(a,s,r++));return n}isThisCollection(e){return e===this.collection}recomputeOptimisticState(e=!1){if(this.isCommittingSyncTransactions&&!e)return;const n=new Map(this.optimisticUpserts),r=new Set(this.optimisticDeletes);this.optimisticUpserts.clear(),this.optimisticDeletes.clear();const s=[];for(const u of this.transactions.values())["completed","failed"].includes(u.state)||s.push(u);for(const u of s)for(const f of u.mutations)if(this.isThisCollection(f.collection)&&f.optimistic)switch(f.type){case"insert":case"update":this.optimisticUpserts.set(f.key,f.modified),this.optimisticDeletes.delete(f.key);break;case"delete":this.optimisticUpserts.delete(f.key),this.optimisticDeletes.add(f.key);break}this.size=this.calculateSize();const a=[];this.collectOptimisticChanges(n,r,a);const l=a.filter(u=>!!(!this.recentlySyncedKeys.has(u.key)||e));if(this.pendingSyncedTransactions.length>0&&!e){const u=new Set;for(const h of this.pendingSyncedTransactions)for(const m of h.operations)u.add(m.key);const f=l.filter(h=>!(h.type==="delete"&&u.has(h.key)&&!s.some(p=>p.mutations.some(y=>this.isThisCollection(y.collection)&&y.key===h.key))));f.length>0&&this.indexes.updateIndexes(f),this.changes.emitEvents(f,e)}else l.length>0&&this.indexes.updateIndexes(l),this.changes.emitEvents(l,e)}calculateSize(){const e=this.syncedData.size,n=Array.from(this.optimisticDeletes).filter(s=>this.syncedData.has(s)&&!this.optimisticUpserts.has(s)).length,r=Array.from(this.optimisticUpserts.keys()).filter(s=>!this.syncedData.has(s)).length;return e-n+r}collectOptimisticChanges(e,n,r){const s=new Set([...e.keys(),...this.optimisticUpserts.keys(),...n,...this.optimisticDeletes]);for(const a of s){const l=this.get(a),u=this.getPreviousValue(a,e,n);u!==void 0&&l===void 0?r.push({type:"delete",key:a,value:u}):u===void 0&&l!==void 0?r.push({type:"insert",key:a,value:l}):u!==void 0&&l!==void 0&&u!==l&&r.push({type:"update",key:a,value:l,previousValue:u})}}getPreviousValue(e,n,r){if(!r.has(e))return n.has(e)?n.get(e):this.syncedData.get(e)}scheduleTransactionCleanup(e){if(e.state==="completed"){this.transactions.delete(e.id);return}e.isPersisted.promise.then(()=>{this.transactions.delete(e.id)}).catch(()=>{})}capturePreSyncVisibleState(){if(this.pendingSyncedTransactions.length===0)return;const e=new Set;for(const n of this.pendingSyncedTransactions)for(const r of n.operations)e.add(r.key);for(const n of e)this.recentlySyncedKeys.add(n);for(const n of e)if(!this.preSyncVisibleState.has(n)){const r=this.get(n);r!==void 0&&this.preSyncVisibleState.set(n,r)}}onTransactionStateChange(){this.changes.shouldBatchEvents=this.pendingSyncedTransactions.length>0,this.capturePreSyncVisibleState(),this.recomputeOptimisticState(!1)}cleanup(){this.syncedData.clear(),this.syncedMetadata.clear(),this.optimisticUpserts.clear(),this.optimisticDeletes.clear(),this.size=0,this.pendingSyncedTransactions=[],this.syncedKeys.clear(),this.hasReceivedFirstCommit=!1}}class uk{constructor(){this.listeners=new Map}on(e,n){return this.listeners.has(e)||this.listeners.set(e,new Set),this.listeners.get(e).add(n),()=>{this.listeners.get(e)?.delete(n)}}once(e,n){const r=this.on(e,s=>{n(s),r()});return r}off(e,n){this.listeners.get(e)?.delete(n)}waitFor(e,n){return new Promise((r,s)=>{let a;const l=this.on(e,u=>{a&&(clearTimeout(a),a=void 0),r(u),l()});n&&(a=setTimeout(()=>{a=void 0,l(),s(new Error(`Timeout waiting for event ${String(e)}`))},n))})}emitInner(e,n){this.listeners.get(e)?.forEach(r=>{try{r(n)}catch(s){queueMicrotask(()=>{throw s})}})}clearListeners(){this.listeners.clear()}}function AM(t,e){if(e.length===0||t.length===0)return;if(t.length===1){const{expression:r,compareOptions:s}=t[0];return(s.direction==="asc"?m1:Ym)(r,new Un(e[0]))}const n=[];for(let r=0;r<t.length&&r<e.length;r++){const s=t[r],a=e[r],l=[];for(let h=0;h<r;h++){const m=t[h],p=e[h];l.push(Jm(m.expression,new Un(p)))}const f=(s.compareOptions.direction==="asc"?m1:Ym)(s.expression,new Un(a));if(l.length===0)n.push(f);else{const h=[...l,f];n.push(h.reduce((m,p)=>Xm(m,p)))}}return n.length===1?n[0]:n.reduce((r,s)=>fM(r,s))}class RM extends uk{constructor(e,n,r){super(),this.collection=e,this.callback=n,this.options=r,this.loadedInitialState=!1,this.skipFiltering=!1,this.snapshotSent=!1,this.loadedSubsets=[],this.sentKeys=new Set,this.limitedSnapshotRowCount=0,this._status="ready",this.pendingLoadSubsetPromises=new Set,this.isBufferingForTruncate=!1,this.truncateBuffer=[],this.pendingTruncateRefetches=new Set,r.onUnsubscribe&&this.on("unsubscribed",a=>r.onUnsubscribe(a)),r.whereExpression&&pM(r.whereExpression,this.collection);const s=a=>{n(a),this.trackSentKeys(a)};this.callback=s,this.filteredCallback=r.whereExpression?EM(this.callback,r):this.callback,this.truncateCleanup=this.collection.on("truncate",()=>{this.handleTruncate()})}get status(){return this._status}handleTruncate(){const e=[...this.loadedSubsets],n=this.collection._sync.syncLoadSubsetFn!==null;if(e.length===0||!n){this.snapshotSent=!1,this.loadedInitialState=!1,this.limitedSnapshotRowCount=0,this.lastSentKey=void 0,this.loadedSubsets=[];return}this.isBufferingForTruncate=!0,this.truncateBuffer=[],this.pendingTruncateRefetches.clear(),this.snapshotSent=!1,this.loadedInitialState=!1,this.limitedSnapshotRowCount=0,this.lastSentKey=void 0,this.loadedSubsets=[],queueMicrotask(()=>{if(this.isBufferingForTruncate){for(const r of e){const s=this.collection._sync.loadSubset(r);this.loadedSubsets.push(r),this.trackLoadSubsetPromise(s),s instanceof Promise&&(this.pendingTruncateRefetches.add(s),s.catch(()=>{}).finally(()=>{this.pendingTruncateRefetches.delete(s),this.checkTruncateRefetchComplete()}))}this.pendingTruncateRefetches.size===0&&this.flushTruncateBuffer()}})}checkTruncateRefetchComplete(){this.pendingTruncateRefetches.size===0&&this.isBufferingForTruncate&&this.flushTruncateBuffer()}flushTruncateBuffer(){this.isBufferingForTruncate=!1;const e=this.truncateBuffer.flat();e.length>0&&this.filteredCallback(e),this.truncateBuffer=[]}setOrderByIndex(e){this.orderByIndex=e}setStatus(e){if(this._status===e)return;const n=this._status;this._status=e,this.emitInner("status:change",{type:"status:change",subscription:this,previousStatus:n,status:e});const r=`status:${e}`;this.emitInner(r,{type:r,subscription:this,previousStatus:n,status:e})}trackLoadSubsetPromise(e){e instanceof Promise&&(this.pendingLoadSubsetPromises.add(e),this.setStatus("loadingSubset"),e.finally(()=>{this.pendingLoadSubsetPromises.delete(e),this.pendingLoadSubsetPromises.size===0&&this.setStatus("ready")}))}hasLoadedInitialState(){return this.loadedInitialState}hasSentAtLeastOneSnapshot(){return this.snapshotSent}emitEvents(e){const n=this.filterAndFlipChanges(e);this.isBufferingForTruncate?n.length>0&&this.truncateBuffer.push(n):this.filteredCallback(n)}requestSnapshot(e){if(this.loadedInitialState)return!1;const n={where:this.options.whereExpression,optimizedOnly:e?.optimizedOnly??!1};if(e){if("where"in e){const f=e.where;if(n.where){const h=n.where,m=Xm(h,f);n.where=m}else n.where=f}}else this.loadedInitialState=!0;const r={where:n.where,subscription:this,orderBy:e?.orderBy,limit:e?.limit},s=this.collection._sync.loadSubset(r);this.loadedSubsets.push(r),(e?.trackLoadSubsetPromise??!0)&&this.trackLoadSubsetPromise(s);const l=this.collection.currentStateAsChanges(n);if(l===void 0)return!1;const u=l.filter(f=>!this.sentKeys.has(f.key));for(const f of u)this.sentKeys.add(f.key);return this.snapshotSent=!0,this.callback(u),!0}requestLimitedSnapshot({orderBy:e,limit:n,minValues:r,offset:s}){if(!n)throw new Error("limit is required");if(!this.orderByIndex)throw new Error("Ordered snapshot was requested but no index was found. You have to call setOrderByIndex before requesting an ordered snapshot.");const l=r?.[0],u=this.orderByIndex,f=this.options.whereExpression,h=f?bl(f):void 0,m=N=>{if(this.sentKeys.has(N))return!1;const B=this.collection.get(N);return B===void 0?!1:h?.(B)??!0};let p=l;const y=[];let g=[];if(l!==void 0){const{expression:N}=e[0],B=this.collection.currentStateAsChanges({where:Jm(N,new Un(l))});if(B){const K=B.map(j=>j.key).filter(j=>!this.sentKeys.has(j)&&m(j));g.push(...K);const G=u.take(n-g.length,l,m);g.push(...G)}else g=u.take(n,l,m)}else g=u.take(n,l,m);const v=()=>Math.max(n-y.length,0),x=()=>g.length===0,E=e[0].expression,S=E.type==="ref"?qn(new Rn(E.path),!0):null;for(;v()>0&&!x();){const N=new Set;for(const B of g){const K=this.collection.get(B);y.push({type:"insert",key:B,value:K}),p=S?S(K):K,N.add(B)}g=u.take(v(),p,m)}const C=this.limitedSnapshotRowCount;for(const N of y)this.sentKeys.add(N.key);this.callback(y),this.limitedSnapshotRowCount+=y.length,y.length>0&&(this.lastSentKey=y[y.length-1].key);let T;if(r!==void 0&&r.length>0){const N=AM(e,r);if(N){const{expression:B}=e[0],K=r[0];let G;if(K instanceof Date){const j=new Date(K.getTime()+1);G=Xm(uM(B,new Un(K)),Ym(B,new Un(j)))}else G=Jm(B,new Un(K));T={whereFrom:N,whereCurrent:G,lastKey:this.lastSentKey}}}const L={where:f,limit:n,orderBy:e,cursor:T,offset:s??C,subscription:this},D=this.collection._sync.loadSubset(L);this.loadedSubsets.push(L),this.trackLoadSubsetPromise(D)}filterAndFlipChanges(e){if(this.loadedInitialState||this.skipFiltering)return e;const n=this.isBufferingForTruncate,r=[];for(const s of e){let a=s;if(this.sentKeys.has(s.key)){if(s.type==="insert")continue;s.type==="delete"&&this.sentKeys.delete(s.key)}else{if(s.type==="update")a={...s,type:"insert",previousValue:void 0};else if(s.type==="delete"&&!n)continue;this.sentKeys.add(s.key)}r.push(a)}return r}trackSentKeys(e){if(!(this.loadedInitialState||this.skipFiltering))for(const n of e)n.type==="delete"?this.sentKeys.delete(n.key):this.sentKeys.add(n.key)}markAllStateAsSeen(){this.skipFiltering=!0}unsubscribe(){this.truncateCleanup?.(),this.truncateCleanup=void 0,this.isBufferingForTruncate=!1,this.truncateBuffer=[],this.pendingTruncateRefetches.clear();for(const e of this.loadedSubsets)this.collection._sync.unloadSubset(e);this.loadedSubsets=[],this.emitInner("unsubscribed",{type:"unsubscribed",subscription:this}),this.clearListeners()}}class OM{constructor(){this.activeSubscribersCount=0,this.changeSubscriptions=new Set,this.batchedEvents=[],this.shouldBatchEvents=!1}setDeps(e){this.lifecycle=e.lifecycle,this.sync=e.sync,this.events=e.events,this.collection=e.collection}emitEmptyReadyEvent(){for(const e of this.changeSubscriptions)e.emitEvents([])}emitEvents(e,n=!1){if(this.shouldBatchEvents&&!n){this.batchedEvents.push(...e);return}let r=e;if(n&&(this.batchedEvents.length>0&&(r=[...this.batchedEvents,...e]),this.batchedEvents=[],this.shouldBatchEvents=!1),r.length!==0)for(const s of this.changeSubscriptions)s.emitEvents(r)}subscribeChanges(e,n={}){this.addSubscriber();const r=new RM(this.collection,e,{...n,onUnsubscribe:()=>{this.removeSubscriber(),this.changeSubscriptions.delete(r)}});return n.includeInitialState?r.requestSnapshot({trackLoadSubsetPromise:!1}):n.includeInitialState===!1&&r.markAllStateAsSeen(),this.changeSubscriptions.add(r),r}addSubscriber(){const e=this.activeSubscribersCount;this.activeSubscribersCount++,this.lifecycle.cancelGCTimer(),(this.lifecycle.status==="cleaned-up"||this.lifecycle.status==="idle")&&this.sync.startSync(),this.events.emitSubscribersChange(this.activeSubscribersCount,e)}removeSubscriber(){const e=this.activeSubscribersCount;if(this.activeSubscribersCount--,this.activeSubscribersCount===0)this.lifecycle.startGCTimer();else if(this.activeSubscribersCount<0)throw new PO;this.events.emitSubscribersChange(this.activeSubscribersCount,e)}cleanup(){this.batchedEvents=[],this.shouldBatchEvents=!1}}const NM=t=>setTimeout(()=>{t({didTimeout:!0,timeRemaining:()=>50})},0),IM=t=>{clearTimeout(t)},MM=typeof window<"u"&&"requestIdleCallback"in window?(t,e)=>window.requestIdleCallback(t,e):(t,e)=>NM(t),Wp=typeof window<"u"&&"cancelIdleCallback"in window?t=>window.cancelIdleCallback(t):IM;class DM{constructor(e,n){this.status="idle",this.hasBeenReady=!1,this.hasReceivedFirstCommit=!1,this.onFirstReadyCallbacks=[],this.gcTimeoutId=null,this.idleCallbackId=null,this.config=e,this.id=n}setDeps(e){this.indexes=e.indexes,this.events=e.events,this.changes=e.changes,this.sync=e.sync,this.state=e.state}validateStatusTransition(e,n){if(e===n)return;if(!{idle:["loading","error","cleaned-up"],loading:["ready","error","cleaned-up"],ready:["cleaned-up","error"],error:["cleaned-up","idle"],"cleaned-up":["loading","error"]}[e].includes(n))throw new jO(e,n,this.id)}setStatus(e,n=!1){if(e==="ready"&&!n)throw new Gl(`You can't directly call "setStatus('ready'). You must use markReady instead.`);this.validateStatusTransition(this.status,e);const r=this.status;this.status=e,e==="ready"&&!this.indexes.isIndexesResolved&&this.indexes.resolveAllIndexes().catch(s=>{console.warn(`${this.config.id?`[${this.config.id}] `:""}Failed to resolve indexes:`,s)}),this.events.emitStatusChange(e,r)}validateCollectionUsable(e){switch(this.status){case"error":throw new LO(e,this.id);case"cleaned-up":this.sync.startSync();break}}markReady(){if(this.validateStatusTransition(this.status,"ready"),this.status==="loading"){if(this.setStatus("ready",!0),!this.hasBeenReady){this.hasBeenReady=!0,this.hasReceivedFirstCommit||(this.hasReceivedFirstCommit=!0);const e=[...this.onFirstReadyCallbacks];this.onFirstReadyCallbacks=[],e.forEach(n=>n())}this.changes.changeSubscriptions.size>0&&this.changes.emitEmptyReadyEvent()}}startGCTimer(){this.gcTimeoutId&&clearTimeout(this.gcTimeoutId);const e=this.config.gcTime??3e5;e!==0&&(this.gcTimeoutId=setTimeout(()=>{this.changes.activeSubscribersCount===0&&this.scheduleIdleCleanup()},e))}cancelGCTimer(){this.gcTimeoutId&&(clearTimeout(this.gcTimeoutId),this.gcTimeoutId=null),this.idleCallbackId!==null&&(Wp(this.idleCallbackId),this.idleCallbackId=null)}scheduleIdleCleanup(){this.idleCallbackId!==null&&Wp(this.idleCallbackId),this.idleCallbackId=MM(e=>{this.changes.activeSubscribersCount===0?this.performCleanup(e)&&(this.idleCallbackId=null):this.idleCallbackId=null},{timeout:1e3})}performCleanup(e){return!e||e.timeRemaining()>0||e.didTimeout?(this.sync.cleanup(),this.state.cleanup(),this.changes.cleanup(),this.indexes.cleanup(),this.gcTimeoutId&&(clearTimeout(this.gcTimeoutId),this.gcTimeoutId=null),this.hasBeenReady=!1,this.onFirstReadyCallbacks=[],this.setStatus("cleaned-up"),this.events.cleanup(),!0):(this.scheduleIdleCleanup(),!1)}onFirstReady(e){if(this.hasBeenReady){e();return}this.onFirstReadyCallbacks.push(e)}cleanup(){this.idleCallbackId!==null&&(Wp(this.idleCallbackId),this.idleCallbackId=null),this.performCleanup()}}const dy=Symbol("liveQueryInternal");class LM{constructor(e,n){this.preloadPromise=null,this.syncCleanupFn=null,this.syncLoadSubsetFn=null,this.syncUnloadSubsetFn=null,this.pendingLoadSubsetPromises=new Set,this.config=e,this.id=n,this.syncMode=e.syncMode??"eager"}setDeps(e){this.collection=e.collection,this.state=e.state,this.lifecycle=e.lifecycle,this._events=e.events}startSync(){if(!(this.lifecycle.status!=="idle"&&this.lifecycle.status!=="cleaned-up")){this.lifecycle.setStatus("loading");try{const e=jM(this.config.sync.sync({collection:this.collection,begin:()=>{this.state.pendingSyncedTransactions.push({committed:!1,operations:[],deletedKeys:new Set})},write:n=>{const r=this.state.pendingSyncedTransactions[this.state.pendingSyncedTransactions.length-1];if(!r)throw new Xx;if(r.committed)throw new Wx;let s;"key"in n?s=n.key:s=this.config.getKey(n.value);let a=n.type;if(n.type==="insert"){const u=this.state.syncedData.has(s),f=r.deletedKeys.has(s),h=r.truncate===!0;if(u&&!f&&!h){const m=this.state.syncedData.get(s);if(m!==void 0&&Ar(m,n.value))a="update";else{const y=this.config.utils[dy];throw new qO(s,this.id,{hasCustomGetKey:y?.hasCustomGetKey??!1,hasJoins:y?.hasJoins??!1})}}}const l={...n,type:a,key:s};r.operations.push(l),a==="delete"&&r.deletedKeys.add(s)},commit:()=>{const n=this.state.pendingSyncedTransactions[this.state.pendingSyncedTransactions.length-1];if(!n)throw new nN;if(n.committed)throw new rN;n.committed=!0,this.state.commitPendingTransactions()},markReady:()=>{this.lifecycle.markReady()},truncate:()=>{const n=this.state.pendingSyncedTransactions[this.state.pendingSyncedTransactions.length-1];if(!n)throw new Xx;if(n.committed)throw new Wx;n.operations=[],n.deletedKeys.clear(),n.truncate=!0,n.optimisticSnapshot={upserts:new Map(this.state.optimisticUpserts),deletes:new Set(this.state.optimisticDeletes)}}}));if(this.syncCleanupFn=e?.cleanup??null,this.syncLoadSubsetFn=e?.loadSubset??null,this.syncUnloadSubsetFn=e?.unloadSubset??null,this.syncMode==="on-demand"&&!this.syncLoadSubsetFn)throw new Hl(`Collection "${this.id}" is configured with syncMode "on-demand" but the sync function did not return a loadSubset handler. Either provide a loadSubset handler or use syncMode "eager".`)}catch(e){throw this.lifecycle.setStatus("error"),e}}}preload(){return this.preloadPromise?this.preloadPromise:(this.syncMode==="on-demand"&&console.warn(`${this.id?`[${this.id}] `:""}Calling .preload() on a collection with syncMode "on-demand" is a no-op. In on-demand mode, data is only loaded when queries request it. Instead, create a live query and call .preload() on that to load the specific data you need. See https://tanstack.com/blog/tanstack-db-0.5-query-driven-sync for more details.`),this.preloadPromise=new Promise((e,n)=>{if(this.lifecycle.status==="ready"){e();return}if(this.lifecycle.status==="error"){n(new zO);return}if(this.lifecycle.onFirstReady(()=>{e()}),this.lifecycle.status==="idle"||this.lifecycle.status==="cleaned-up")try{this.startSync()}catch(r){n(r);return}}),this.preloadPromise)}get isLoadingSubset(){return this.pendingLoadSubsetPromises.size>0}trackLoadPromise(e){const n=!this.isLoadingSubset;this.pendingLoadSubsetPromises.add(e),n&&this._events.emit("loadingSubset:change",{type:"loadingSubset:change",collection:this.collection,isLoadingSubset:!0,previousIsLoadingSubset:!1,loadingSubsetTransition:"start"}),e.finally(()=>{const r=this.pendingLoadSubsetPromises.size===1&&this.pendingLoadSubsetPromises.has(e);this.pendingLoadSubsetPromises.delete(e),r&&this._events.emit("loadingSubset:change",{type:"loadingSubset:change",collection:this.collection,isLoadingSubset:!1,previousIsLoadingSubset:!0,loadingSubsetTransition:"end"})})}loadSubset(e){if(this.syncMode==="eager")return!0;if(this.syncLoadSubsetFn){const n=this.syncLoadSubsetFn(e);if(n instanceof Promise)return this.trackLoadPromise(n),n}return!0}unloadSubset(e){this.syncUnloadSubsetFn&&this.syncUnloadSubsetFn(e)}cleanup(){try{this.syncCleanupFn&&(this.syncCleanupFn(),this.syncCleanupFn=null)}catch(e){queueMicrotask(()=>{if(e instanceof Error){const n=new t1(this.id,e);throw n.cause=e,n.stack=e.stack,n}else throw new t1(this.id,e)})}this.preloadPromise=null}}function jM(t){if(typeof t=="function")return{cleanup:t};if(typeof t=="object")return t}function fk(t){return typeof t=="function"&&t.prototype!==void 0&&t.prototype.constructor===t}async function zM(t){return fk(t)?t:await t()}class PM{constructor(e,n,r,s,a,l){this.id=e,this.expression=n,this.name=r,this.resolver=s,this.options=a,this.collectionEntries=l,this.indexPromise=null,this.resolvedIndex=null,fk(this.resolver)&&(this.resolvedIndex=new this.resolver(this.id,this.expression,this.name,this.options),this.collectionEntries&&this.resolvedIndex.build(this.collectionEntries))}async resolve(){return this.resolvedIndex?this.resolvedIndex:(this.indexPromise||(this.indexPromise=this.createIndex()),this.resolvedIndex=await this.indexPromise,this.resolvedIndex)}isResolved(){return this.resolvedIndex!==null}getResolved(){if(!this.resolvedIndex)throw new Error(`Index ${this.id} has not been resolved yet. Ensure collection is synced.`);return this.resolvedIndex}getId(){return this.id}getName(){return this.name}getExpression(){return this.expression}async createIndex(){const e=await zM(this.resolver);return new e(this.id,this.expression,this.name,this.options)}}class BM{constructor(e,n){this.indexId=e,this.lazyIndex=n}get index(){return this.lazyIndex.getResolved()}get isReady(){return this.lazyIndex.isResolved()}async whenReady(){return await this.lazyIndex.resolve()}get id(){return this.indexId}get name(){return this.isReady?this.index.name:this.lazyIndex.getName()}get expression(){return this.lazyIndex.getExpression()}supports(e){return this.index.supports(e)}getStats(){return this.index.getStats()}matchesField(e){const n=this.expression;return n.type==="ref"&&n.path.length===e.length&&n.path.every((r,s)=>r===e[s])}get keyCount(){return this.index.keyCount}get indexedKeysSet(){return this.index.indexedKeysSet}get orderedEntriesArray(){return this.index.orderedEntriesArray}get valueMapData(){return this.index.valueMapData}equalityLookup(e){return this.index.equalityLookup?.(e)??new Set}rangeQuery(e){return this.index.rangeQuery?.(e)??new Set}inArrayLookup(e){return this.index.inArrayLookup?.(e)??new Set}_getLazyWrapper(){return this.lazyIndex}}class $M{constructor(){this.lazyIndexes=new Map,this.resolvedIndexes=new Map,this.isIndexesResolved=!1,this.indexCounter=0}setDeps(e){this.state=e.state,this.lifecycle=e.lifecycle}createIndex(e,n={}){this.lifecycle.validateCollectionUsable("createIndex");const r=++this.indexCounter,s=lM(),a=e(s),l=Xt(a),u=n.indexType??Wm,f=new PM(r,l,n.name,u,n.options,this.state.entries());if(this.lazyIndexes.set(r,f),u===Wm)try{const h=f.getResolved();this.resolvedIndexes.set(r,h)}catch(h){console.warn("Failed to resolve BTreeIndex:",h)}else if(typeof u=="function"&&u.prototype)try{const h=f.getResolved();this.resolvedIndexes.set(r,h)}catch{this.resolveSingleIndex(r,f).catch(h=>{console.warn("Failed to resolve single index:",h)})}else this.isIndexesResolved&&this.resolveSingleIndex(r,f).catch(h=>{console.warn("Failed to resolve single index:",h)});return new BM(r,f)}async resolveAllIndexes(){if(this.isIndexesResolved)return;const e=Array.from(this.lazyIndexes.entries()).map(async([n,r])=>{const s=await r.resolve();return s.build(this.state.entries()),this.resolvedIndexes.set(n,s),{indexId:n,resolvedIndex:s}});await Promise.all(e),this.isIndexesResolved=!0}async resolveSingleIndex(e,n){const r=await n.resolve();return r.build(this.state.entries()),this.resolvedIndexes.set(e,r),r}get indexes(){return this.resolvedIndexes}updateIndexes(e){for(const n of this.resolvedIndexes.values())for(const r of e)switch(r.type){case"insert":n.add(r.key,r.value);break;case"update":r.previousValue?n.update(r.key,r.previousValue,r.value):n.add(r.key,r.value);break;case"delete":n.remove(r.key,r.value);break}}cleanup(){this.lazyIndexes.clear(),this.resolvedIndexes.clear()}}var UM={};const qM=new Set(["find","findLast","findIndex","findLastIndex","filter","map","flatMap","forEach","some","every","reduce","reduceRight"]),FM=new Set(["pop","push","shift","unshift","splice","sort","reverse","fill","copyWithin"]),VM=new Set(["set","delete","clear","add"]),HM=new Set(["entries","keys","values","forEach"]);function py(t){return t!==null&&typeof t=="object"&&!(t instanceof Date)&&!(t instanceof RegExp)&&!cf(t)}function GM(t,e,n,r){if(qM.has(t))return function(...s){const a=s[0];if(typeof a!="function")return e.apply(n.copy_,s);const l=(h,m)=>{if(py(h)){const p={tracker:n,prop:String(m)},{proxy:y}=r(h,p);return y}return h},u=function(h,m,p){const y=l(h,m);return a.call(this,y,m,p)};if(t==="reduce"||t==="reduceRight"){const h=function(m,p,y,g){const v=l(p,y);return a.call(this,m,v,y,g)};return e.apply(n.copy_,[h,...s.slice(1)])}const f=e.apply(n.copy_,[u,...s.slice(1)]);if((t==="find"||t==="findLast")&&f&&typeof f=="object"){const h=n.copy_.indexOf(f);if(h!==-1)return l(f,h)}return t==="filter"&&Array.isArray(f)?f.map(h=>{const m=n.copy_.indexOf(h);return m!==-1?l(h,m):h}):f}}function KM(t,e){return function(){const n=t.copy_;let r=0;return{next(){if(r>=n.length)return{done:!0,value:void 0};const s=n[r];let a=s;if(py(s)){const l={tracker:t,prop:String(r)},{proxy:u}=e(s,l);a=u}return r++,{done:!1,value:a}},[Symbol.iterator](){return this}}}}function v1(t,e,n){return function(...r){const s=t.apply(e.copy_,r);return n(e),s}}function ZM(t,e,n,r,s,a,l){if(HM.has(t)||e===Symbol.iterator)return function(...f){const h=n.apply(s.copy_,f);if(t==="forEach"){const p=f[0];if(typeof p=="function"){const y=function(g,v,x){const E=p.call(this,g,v,x);return l(s),E};return n.apply(r,[y,...f.slice(1)])}}if(t==="entries"||t==="values"||t===Symbol.iterator.toString()||e===Symbol.iterator){const p=h,y=new Map;if(t==="values"&&r instanceof Map)for(const[v,x]of s.copy_.entries())y.set(x,v);const g=new Map;if(r instanceof Set)for(const v of s.copy_.values())g.set(v,v);return{next(){const v=p.next();if(!v.done&&v.value&&typeof v.value=="object"){if(t==="entries"&&Array.isArray(v.value)&&v.value.length===2){if(v.value[1]&&typeof v.value[1]=="object"){const x=v.value[0],E={tracker:s,prop:x,updateMap:C=>{s.copy_ instanceof Map&&s.copy_.set(x,C)}},{proxy:S}=a(v.value[1],E);v.value[1]=S}}else if(t==="values"||t===Symbol.iterator.toString()||e===Symbol.iterator)if(t==="values"&&r instanceof Map){const x=y.get(v.value);if(x!==void 0){const E={tracker:s,prop:x,updateMap:C=>{s.copy_ instanceof Map&&s.copy_.set(x,C)}},{proxy:S}=a(v.value,E);v.value=S}}else if(r instanceof Set){const x=v.value,E={tracker:s,prop:x,updateSet:C=>{s.copy_ instanceof Set&&(s.copy_.delete(x),s.copy_.add(C),g.set(x,C))}},{proxy:S}=a(v.value,E);v.value=S}else{const x=Symbol("iterator-value"),{proxy:E}=a(v.value,{tracker:s,prop:x});v.value=E}}return v},[Symbol.iterator](){return this}}}return h}}function Ze(...t){const e=typeof window<"u"&&typeof localStorage<"u";e&&localStorage.getItem("DEBUG")==="true"?console.log("[proxy]",...t):!e&&typeof process<"u"&&UM.DEBUG==="true"&&console.log("[proxy]",...t)}function ms(t,e=new WeakMap){if(t==null||typeof t!="object")return t;if(e.has(t))return e.get(t);if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp)return new RegExp(t.source,t.flags);if(Array.isArray(t)){const s=[];return e.set(t,s),t.forEach((a,l)=>{s[l]=ms(a,e)}),s}if(ArrayBuffer.isView(t)&&!(t instanceof DataView)){const s=Object.getPrototypeOf(t).constructor,a=new s(t.length);e.set(t,a);for(let l=0;l<t.length;l++)a[l]=t[l];return a}if(t instanceof Map){const s=new Map;return e.set(t,s),t.forEach((a,l)=>{s.set(l,ms(a,e))}),s}if(t instanceof Set){const s=new Set;return e.set(t,s),t.forEach(a=>{s.add(ms(a,e))}),s}if(cf(t))return t;const n={};e.set(t,n);for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(n[s]=ms(t[s],e));const r=Object.getOwnPropertySymbols(t);for(const s of r)n[s]=ms(t[s],e);return n}let x1=0;function QM(){return x1+=1,x1}function my(t,e){const n=new Map;function r(p,y){if(Ze("Object ID:",p.constructor.name),n.has(p))return n.get(p);{const g=my(p,y);return n.set(p,g),g}}const s=new Map,a={copy_:ms(t),originalObject:ms(t),proxyCount:QM(),modified:!1,assigned_:{},parent:e,target:t};Ze("createChangeProxy called for target",t,a.proxyCount);function l(p){p.modified||(p.modified=!0),p.parent&&(Ze("propagating change to parent"),"updateMap"in p.parent?p.parent.updateMap(p.copy_):"updateSet"in p.parent?p.parent.updateSet(p.copy_):(p.parent.tracker.copy_[p.parent.prop]=p.copy_,p.parent.tracker.assigned_[p.parent.prop]=!0),l(p.parent.tracker))}function u(p){if(Ze("checkIfReverted called with assigned keys:",Object.keys(p.assigned_)),Object.keys(p.assigned_).length===0&&Object.getOwnPropertySymbols(p.assigned_).length===0)return Ze("No assigned properties, returning true"),!0;for(const g in p.assigned_)if(p.assigned_[g]===!0){const v=p.copy_[g],x=p.originalObject[g];if(Ze(`Checking property ${String(g)}, current:`,v,"original:",x),!Ar(v,x))return Ze(`Property ${String(g)} is different, returning false`),!1}else if(p.assigned_[g]===!1)return Ze(`Property ${String(g)} was deleted, returning false`),!1;const y=Object.getOwnPropertySymbols(p.assigned_);for(const g of y)if(p.assigned_[g]===!0){const v=p.copy_[g],x=p.originalObject[g];if(!Ar(v,x))return Ze("Symbol property is different, returning false"),!1}else if(p.assigned_[g]===!1)return Ze("Symbol property was deleted, returning false"),!1;return Ze("All properties match original values, returning true"),!0}function f(p,y){Ze("checkParentStatus called for child prop:",y);const g=u(p);Ze("Parent checkIfReverted returned:",g),g&&(Ze("Parent is fully reverted, clearing tracking"),p.modified=!1,p.assigned_={},p.parent&&(Ze("Continuing up the parent chain"),f(p.parent.tracker,p.parent.prop)))}function h(p){if(Ze("createObjectProxy",p),s.has(p))return Ze("proxyCache found match"),s.get(p);const y=new Proxy(p,{get(g,v){Ze("get",g,v);const x=a.copy_[v]??a.originalObject[v],E=a.originalObject[v];if(Ze("value (at top of proxy get)",x),Object.getOwnPropertyDescriptor(g,v)?.get)return x;if(typeof x=="function"){if(Array.isArray(g)){const C=v.toString();if(FM.has(C))return v1(x,a,l);const T=GM(C,x,a,r);if(T)return T;if(v===Symbol.iterator)return KM(a,r)}if(g instanceof Map||g instanceof Set){const C=v.toString();if(VM.has(C))return v1(x,a,l);const T=ZM(C,v,x,g,a,r,l);if(T)return T}return x.bind(g)}if(py(x)){const C={tracker:a,prop:String(v)},{proxy:T}=r(E,C);return s.set(x,T),T}return x},set(g,v,x){const E=a.copy_[v];if(Ze(`set called for property ${String(v)}, current:`,E,"new:",x),Ar(E,x))Ze("Value unchanged, not tracking");else{const S=a.originalObject[v],C=Ar(x,S);if(Ze("value:",x,"original:",S,"isRevertToOriginal:",C),C){Ze(`Reverting property ${String(v)} to original value`),delete a.assigned_[v.toString()],Ze(`Updating copy with original value for ${String(v)}`),a.copy_[v]=ms(S),Ze("Checking if all properties reverted");const T=u(a);Ze("All reverted:",T),T?(Ze("All properties reverted, clearing tracking"),a.modified=!1,a.assigned_={},e&&(Ze("Updating parent for property:",e.prop),f(e.tracker,e.prop))):(Ze("Some properties still changed, keeping modified flag"),a.modified=!0)}else Ze(`Setting new value for property ${String(v)}`),a.copy_[v]=x,a.assigned_[v.toString()]=!0,Ze("Marking object and ancestors as modified",a),l(a)}return!0},defineProperty(g,v,x){const E=Reflect.defineProperty(g,v,x);return E&&"value"in x&&(a.copy_[v]=ms(x.value),a.assigned_[v.toString()]=!0,l(a)),E},getOwnPropertyDescriptor(g,v){return Reflect.getOwnPropertyDescriptor(g,v)},preventExtensions(g){return Reflect.preventExtensions(g)},isExtensible(g){return Reflect.isExtensible(g)},deleteProperty(g,v){Ze("deleteProperty",g,v);const x=typeof v=="symbol"?v.toString():v;if(x in g){const E=x in a.originalObject,S=Reflect.deleteProperty(g,v);return S&&(E?(a.assigned_[x]=!1,l(a)):(delete a.assigned_[x],Object.keys(a.assigned_).length===0&&Object.getOwnPropertySymbols(a.assigned_).length===0?a.modified=!1:a.modified=!0)),S}return!0}});return s.set(p,y),y}return{proxy:h(a.copy_),getChanges:()=>{if(Ze("getChanges called, modified:",a.modified),Ze(a),!a.modified)return Ze("Object not modified, returning empty object"),{};if(typeof a.copy_!="object"||Array.isArray(a.copy_)||Object.keys(a.assigned_).length===0)return a.copy_;const p={};for(const y in a.copy_)a.assigned_[y]===!0&&y in a.copy_&&(p[y]=a.copy_[y]);return Ze("Returning copy:",p),p}}}function JM(t){const e=t.map(n=>my(n));return{proxies:e.map(n=>n.proxy),getChanges:()=>e.map(n=>n.getChanges())}}function YM(t,e){const{proxy:n,getChanges:r}=my(t);return e(n),r()}function XM(t,e){const{proxies:n,getChanges:r}=JM(t);return e(n),r()}function WM(){let t,e,n=!0;return{promise:new Promise((s,a)=>{t=l=>{n=!1,s(l)},e=l=>{n=!1,a(l)}}),resolve:t,reject:e,isPending:()=>n}}function e4(t){return typeof t=="object"&&t!==null&&typeof t.hasPendingGraphRun=="function"}class t4{constructor(){this.contexts=new Map,this.clearListeners=new Set}getOrCreateContext(e){let n=this.contexts.get(e);return n||(n={queue:[],jobs:new Map,dependencies:new Map,completed:new Set},this.contexts.set(e,n)),n}schedule({contextId:e,jobId:n,dependencies:r,run:s}){if(typeof e>"u"){s();return}const a=this.getOrCreateContext(e);if(a.jobs.has(n)||a.queue.push(n),a.jobs.set(n,s),r){const l=new Set(r);l.delete(n),a.dependencies.set(n,l)}else a.dependencies.has(n)||a.dependencies.set(n,new Set);a.completed.delete(n)}flush(e){const n=this.contexts.get(e);if(!n)return;const{queue:r,jobs:s,dependencies:a,completed:l}=n;for(;r.length>0;){let u=!1;const f=r.length;for(let h=0;h<f;h++){const m=r.shift(),p=s.get(m);if(!p){a.delete(m),l.delete(m);continue}const y=a.get(m);let g=!y;if(y){g=!0;for(const v of y){if(v===m)continue;const x=e4(v)&&v.hasPendingGraphRun(e);if(s.has(v)&&!l.has(v)||!s.has(v)&&x){g=!1;break}}}g?(s.delete(m),a.delete(m),p(),l.add(m),u=!0):r.push(m)}if(!u)throw new Error(`Scheduler detected unresolved dependencies for context ${String(e)}.`)}this.contexts.delete(e)}flushAll(){for(const e of Array.from(this.contexts.keys()))this.flush(e)}clear(e){this.contexts.delete(e),this.clearListeners.forEach(n=>n(e))}onClear(e){return this.clearListeners.add(e),()=>this.clearListeners.delete(e)}hasPendingJobs(e){const n=this.contexts.get(e);return!!n&&n.jobs.size>0}clearJob(e,n){const r=this.contexts.get(e);r&&(r.jobs.delete(n),r.dependencies.delete(n),r.completed.delete(n),r.queue=r.queue.filter(s=>s!==n),r.jobs.size===0&&this.contexts.delete(e))}}const df=new t4,pf=[];let Ml=[],n4=0;function r4(t,e){switch(`${t.type}-${e.type}`){case"insert-update":return{...t,type:"insert",original:{},modified:e.modified,changes:{...t.changes,...e.changes},key:t.key,globalKey:t.globalKey,metadata:e.metadata??t.metadata,syncMetadata:{...t.syncMetadata,...e.syncMetadata},mutationId:e.mutationId,updatedAt:e.updatedAt};case"insert-delete":return null;case"update-delete":return e;case"update-update":return{...e,original:t.original,changes:{...t.changes,...e.changes},metadata:e.metadata??t.metadata,syncMetadata:{...t.syncMetadata,...e.syncMetadata}};case"delete-delete":case"insert-insert":return e;default:{const n=`${t.type}-${e.type}`;throw new Error(`Unhandled mutation combination: ${n}`)}}}function Su(t){const e=new o4(t);return pf.push(e),e}function Vu(){if(Ml.length>0)return Ml.slice(-1)[0]}function s4(t){df.clear(t.id),Ml.push(t)}function i4(t){try{df.flush(t.id)}finally{Ml=Ml.filter(e=>e.id!==t.id)}}function a4(t){const e=pf.findIndex(n=>n.id===t.id);e!==-1&&pf.splice(e,1)}class o4{constructor(e){if(typeof e.mutationFn>"u")throw new XO;this.id=e.id??crypto.randomUUID(),this.mutationFn=e.mutationFn,this.state="pending",this.mutations=[],this.isPersisted=WM(),this.autoCommit=e.autoCommit??!0,this.createdAt=new Date,this.sequenceNumber=n4++,this.metadata=e.metadata??{}}setState(e){this.state=e,(e==="completed"||e==="failed")&&a4(this)}mutate(e){if(this.state!=="pending")throw new WO;s4(this);try{e()}finally{i4(this)}return this.autoCommit&&this.commit().catch(()=>{}),this}applyMutations(e){for(const n of e){const r=this.mutations.findIndex(s=>s.globalKey===n.globalKey);if(r>=0){const s=this.mutations[r],a=r4(s,n);a===null?this.mutations.splice(r,1):this.mutations[r]=a}else this.mutations.push(n)}}rollback(e){const n=e?.isSecondaryRollback??!1;if(this.state==="completed")throw new eN;if(this.setState("failed"),!n){const r=new Set;this.mutations.forEach(s=>r.add(s.globalKey));for(const s of pf)s.state==="pending"&&s.mutations.some(a=>r.has(a.globalKey))&&s.rollback({isSecondaryRollback:!0})}return this.isPersisted.reject(this.error?.error),this.touchCollection(),this}touchCollection(){const e=new Set;for(const n of this.mutations)e.has(n.collection.id)||(n.collection._state.onTransactionStateChange(),n.collection._state.pendingSyncedTransactions.length>0&&n.collection._state.commitPendingTransactions(),e.add(n.collection.id))}async commit(){if(this.state!=="pending")throw new tN;if(this.setState("persisting"),this.mutations.length===0)return this.setState("completed"),this.isPersisted.resolve(this),this;try{await this.mutationFn({transaction:this}),this.setState("completed"),this.touchCollection(),this.isPersisted.resolve(this)}catch(e){const n=e instanceof Error?e:new Error(String(e));throw this.error={message:n.message,error:n},this.rollback(),n}return this}compareCreatedAt(e){const n=this.createdAt.getTime()-e.createdAt.getTime();return n!==0?n:this.sequenceNumber-e.sequenceNumber}}class l4{constructor(e,n){this.insert=(r,s)=>{this.lifecycle.validateCollectionUsable("insert");const a=this.state,l=Vu();if(!l&&!this.config.onInsert)throw new QO;const u=Array.isArray(r)?r:[r],f=[],h=new Set;if(u.forEach(m=>{const p=this.validateData(m,"insert"),y=this.config.getKey(p);if(this.state.has(y)||h.has(y))throw new UO(y);h.add(y);const g=this.generateGlobalKey(y,m),v={mutationId:crypto.randomUUID(),original:{},modified:p,changes:Object.fromEntries(Object.keys(m).map(x=>[x,p[x]])),globalKey:g,key:y,metadata:s?.metadata,syncMetadata:this.config.sync.getSyncMetadata?.()||{},optimistic:s?.optimistic??!0,type:"insert",createdAt:new Date,updatedAt:new Date,collection:this.collection};f.push(v)}),l)return l.applyMutations(f),a.transactions.set(l.id,l),a.scheduleTransactionCleanup(l),a.recomputeOptimisticState(!0),l;{const m=Su({mutationFn:async p=>await this.config.onInsert({transaction:p.transaction,collection:this.collection})});return m.applyMutations(f),m.commit().catch(()=>{}),a.transactions.set(m.id,m),a.scheduleTransactionCleanup(m),a.recomputeOptimisticState(!0),m}},this.delete=(r,s)=>{const a=this.state;this.lifecycle.validateCollectionUsable("delete");const l=Vu();if(!l&&!this.config.onDelete)throw new YO;if(Array.isArray(r)&&r.length===0)throw new KO;const u=Array.isArray(r)?r:[r],f=[];for(const m of u){if(!this.state.has(m))throw new ZO(m);const p=this.generateGlobalKey(m,this.state.get(m)),y={mutationId:crypto.randomUUID(),original:this.state.get(m),modified:this.state.get(m),changes:this.state.get(m),globalKey:p,key:m,metadata:s?.metadata,syncMetadata:a.syncedMetadata.get(m)||{},optimistic:s?.optimistic??!0,type:"delete",createdAt:new Date,updatedAt:new Date,collection:this.collection};f.push(y)}if(l)return l.applyMutations(f),a.transactions.set(l.id,l),a.scheduleTransactionCleanup(l),a.recomputeOptimisticState(!0),l;const h=Su({autoCommit:!0,mutationFn:async m=>this.config.onDelete({transaction:m.transaction,collection:this.collection})});return h.applyMutations(f),h.commit().catch(()=>{}),a.transactions.set(h.id,h),a.scheduleTransactionCleanup(h),a.recomputeOptimisticState(!0),h},this.id=n,this.config=e}setDeps(e){this.lifecycle=e.lifecycle,this.state=e.state,this.collection=e.collection}ensureStandardSchema(e){if(e&&"~standard"in e)return e;throw new DO}validateData(e,n,r){if(!this.config.schema)return e;const s=this.ensureStandardSchema(this.config.schema);if(n==="update"&&r){const l=this.state.get(r);if(l&&e&&typeof e=="object"&&typeof l=="object"){const u=Object.assign({},l,e),f=s["~standard"].validate(u);if(f instanceof Promise)throw new Yx;if("issues"in f&&f.issues){const y=f.issues.map(g=>({message:g.message,path:g.path?.map(v=>String(v))}));throw new Jx(n,y)}const h=f.value,m=Object.keys(e);return Object.fromEntries(m.map(y=>[y,h[y]]))}}const a=s["~standard"].validate(e);if(a instanceof Promise)throw new Yx;if("issues"in a&&a.issues){const l=a.issues.map(u=>({message:u.message,path:u.path?.map(f=>String(f))}));throw new Jx(n,l)}return a.value}generateGlobalKey(e,n){if(typeof e!="string"&&typeof e!="number")throw typeof e>"u"?new BO(n):new $O(e,n);return`KEY::${this.id}/${e}`}update(e,n,r){if(typeof e>"u")throw new FO;const s=this.state;this.lifecycle.validateCollectionUsable("update");const a=Vu();if(!a&&!this.config.onUpdate)throw new JO;const l=Array.isArray(e),u=l?e:[e];if(l&&u.length===0)throw new VO;const f=typeof n=="function"?n:r,h=typeof n=="function"?{}:n,m=u.map(v=>{const x=this.state.get(v);if(!x)throw new HO(v);return x});let p;l?p=XM(m,f):p=[YM(m[0],f)];const y=u.map((v,x)=>{const E=p[x];if(!E||Object.keys(E).length===0)return null;const S=m[x],C=this.validateData(E,"update",v),T=Object.assign({},S,C),L=this.config.getKey(S),D=this.config.getKey(T);if(L!==D)throw new GO(L,D);const N=this.generateGlobalKey(D,T);return{mutationId:crypto.randomUUID(),original:S,modified:T,changes:Object.fromEntries(Object.keys(E).map(B=>[B,T[B]])),globalKey:N,key:v,metadata:h.metadata,syncMetadata:s.syncedMetadata.get(v)||{},optimistic:h.optimistic??!0,type:"update",createdAt:new Date,updatedAt:new Date,collection:this.collection}}).filter(Boolean);if(y.length===0){const v=Su({mutationFn:async()=>{}});return v.commit().catch(()=>{}),s.scheduleTransactionCleanup(v),v}if(a)return a.applyMutations(y),s.transactions.set(a.id,a),s.scheduleTransactionCleanup(a),s.recomputeOptimisticState(!0),a;const g=Su({mutationFn:async v=>this.config.onUpdate({transaction:v.transaction,collection:this.collection})});return g.applyMutations(y),g.commit().catch(()=>{}),s.transactions.set(g.id,g),s.scheduleTransactionCleanup(g),s.recomputeOptimisticState(!0),g}}class c4 extends uk{constructor(){super()}setDeps(e){this.collection=e.collection}emit(e,n){this.emitInner(e,n)}emitStatusChange(e,n){this.emit("status:change",{type:"status:change",collection:this.collection,previousStatus:n,status:e});const r=`status:${e}`;this.emit(r,{type:r,collection:this.collection,previousStatus:n,status:e})}emitSubscribersChange(e,n){this.emit("subscribers:change",{type:"subscribers:change",collection:this.collection,previousSubscriberCount:n,subscriberCount:e})}cleanup(){this.clearListeners()}}function hk(t){const e=new gy(t);return t.utils?e.utils=t.utils:e.utils={},e}class gy{constructor(e){if(this.utils={},this.insert=(n,r)=>this._mutations.insert(n,r),this.delete=(n,r)=>this._mutations.delete(n,r),!e)throw new IO;if(!e.sync)throw new MO;e.id?this.id=e.id:this.id=crypto.randomUUID(),this.config={...e,autoIndex:e.autoIndex??"eager"},this._changes=new OM,this._events=new c4,this._indexes=new $M,this._lifecycle=new DM(e,this.id),this._mutations=new l4(e,this.id),this._state=new TM(e),this._sync=new LM(e,this.id),this.comparisonOpts=u4(e),this._changes.setDeps({collection:this,lifecycle:this._lifecycle,sync:this._sync,events:this._events}),this._events.setDeps({collection:this}),this._indexes.setDeps({state:this._state,lifecycle:this._lifecycle}),this._lifecycle.setDeps({changes:this._changes,events:this._events,indexes:this._indexes,state:this._state,sync:this._sync}),this._mutations.setDeps({collection:this,lifecycle:this._lifecycle,state:this._state}),this._state.setDeps({collection:this,lifecycle:this._lifecycle,changes:this._changes,indexes:this._indexes,events:this._events}),this._sync.setDeps({collection:this,state:this._state,lifecycle:this._lifecycle,events:this._events}),e.startSync===!0&&this._sync.startSync()}get status(){return this._lifecycle.status}get subscriberCount(){return this._changes.activeSubscribersCount}onFirstReady(e){return this._lifecycle.onFirstReady(e)}isReady(){return this._lifecycle.status==="ready"}get isLoadingSubset(){return this._sync.isLoadingSubset}startSyncImmediate(){this._sync.startSync()}preload(){return this._sync.preload()}get(e){return this._state.get(e)}has(e){return this._state.has(e)}get size(){return this._state.size}*keys(){yield*this._state.keys()}*values(){yield*this._state.values()}*entries(){yield*this._state.entries()}*[Symbol.iterator](){yield*this._state[Symbol.iterator]()}forEach(e){return this._state.forEach(e)}map(e){return this._state.map(e)}getKeyFromItem(e){return this.config.getKey(e)}createIndex(e,n={}){return this._indexes.createIndex(e,n)}get indexes(){return this._indexes.indexes}validateData(e,n,r){return this._mutations.validateData(e,n,r)}get compareOptions(){return{...this.comparisonOpts}}update(e,n,r){return this._mutations.update(e,n,r)}get state(){const e=new Map;for(const[n,r]of this.entries())e.set(n,r);return e}stateWhenReady(){return this.size>0||this.isReady()?Promise.resolve(this.state):this.preload().then(()=>this.state)}get toArray(){return Array.from(this.values())}toArrayWhenReady(){return this.size>0||this.isReady()?Promise.resolve(this.toArray):this.preload().then(()=>this.toArray)}currentStateAsChanges(e={}){return kM(this,e)}subscribeChanges(e,n={}){return this._changes.subscribeChanges(e,n)}on(e,n){return this._events.on(e,n)}once(e,n){return this._events.once(e,n)}off(e,n){this._events.off(e,n)}waitFor(e,n){return this._events.waitFor(e,n)}async cleanup(){return this._lifecycle.cleanup(),Promise.resolve()}}function u4(t){if(t.defaultStringCollation){const e=t.defaultStringCollation;return{stringSort:e.stringSort??"locale",locale:e.stringSort==="locale"?e.locale:void 0,localeOptions:e.stringSort==="locale"?e.localeOptions:void 0}}else return{stringSort:"locale"}}class Ut{constructor(e={}){this.query={},this.query={...e}}_createRefForSource(e,n){let r;try{r=Object.keys(e)}catch{const u=e===null?"null":"undefined";throw new xu(n,u)}if(Array.isArray(e))throw new xu(n,"array");if(r.length!==1)throw r.length===0?new xu(n,"empty object"):r.every(u=>!isNaN(Number(u)))?new xu(n,"string"):new sN(n);const s=r[0],a=e[s];let l;if(a instanceof gy)l=new Va(a,s);else if(a instanceof Ut){const u=a._getQuery();if(!u.from)throw new iN(n);l=new br(u,s)}else throw new aN(s);return[s,l]}from(e){const[,n]=this._createRefForSource(e,"from clause");return new Ut({...this.query,from:n})}join(e,n,r="left"){const[s,a]=this._createRefForSource(e,"join clause"),u=[...this._getCurrentAliases(),s],f=Sa(u),h=n(f);let m,p;if(h.type==="func"&&h.name==="eq"&&h.args.length===2)m=h.args[0],p=h.args[1];else throw new oN;const y={from:a,type:r,left:m,right:p},g=this.query.join||[];return new Ut({...this.query,join:[...g,y]})}leftJoin(e,n){return this.join(e,n,"left")}rightJoin(e,n){return this.join(e,n,"right")}innerJoin(e,n){return this.join(e,n,"inner")}fullJoin(e,n){return this.join(e,n,"full")}where(e){const n=this._getCurrentAliases(),r=Sa(n),s=e(r),a=this.query.where||[];return new Ut({...this.query,where:[...a,s]})}having(e){const n=this._getCurrentAliases(),r=Sa(n),s=e(r),a=this.query.having||[];return new Ut({...this.query,having:[...a,s]})}select(e){const n=this._getCurrentAliases(),r=Sa(n),s=e(r),a=dk(s);return new Ut({...this.query,select:a,fnSelect:void 0})}orderBy(e,n="asc"){const r=this._getCurrentAliases(),s=Sa(r),a=e(s),l=typeof n=="string"?{direction:n,nulls:"first"}:{direction:n.direction??"asc",nulls:n.nulls??"first",stringSort:n.stringSort,locale:n.stringSort==="locale"?n.locale:void 0,localeOptions:n.stringSort==="locale"?n.localeOptions:void 0},u=m=>({expression:Xt(m),compareOptions:l}),f=Array.isArray(a)?a.map(m=>u(m)):[u(a)],h=this.query.orderBy||[];return new Ut({...this.query,orderBy:[...h,...f]})}groupBy(e){const n=this._getCurrentAliases(),r=Sa(n),s=e(r),a=Array.isArray(s)?s.map(u=>Xt(u)):[Xt(s)],l=this.query.groupBy||[];return new Ut({...this.query,groupBy:[...l,...a]})}limit(e){return new Ut({...this.query,limit:e})}offset(e){return new Ut({...this.query,offset:e})}distinct(){return new Ut({...this.query,distinct:!0})}findOne(){return new Ut({...this.query,singleResult:!0})}_getCurrentAliases(){const e=[];if(this.query.from&&e.push(this.query.from.alias),this.query.join)for(const n of this.query.join)e.push(n.from.alias);return e}get fn(){const e=this;return{select(n){return new Ut({...e.query,select:void 0,fnSelect:n})},where(n){return new Ut({...e.query,fnWhere:[...e.query.fnWhere||[],n]})},having(n){return new Ut({...e.query,fnHaving:[...e.query.fnHaving||[],n]})}}}_getQuery(){if(!this.query.from)throw new lN;return this.query}}function f4(t){return t===void 0?Xt(null):t instanceof nk||t instanceof xr||t instanceof Rn||t instanceof Un?t:Xt(t)}function h4(t){return t!==null&&typeof t=="object"&&!ry(t)&&!t.__refProxy}function dk(t){if(!h4(t))return f4(t);const e={};for(const[n,r]of Object.entries(t)){if(typeof n=="string"&&n.startsWith("__SPREAD_SENTINEL__")){e[n]=r;continue}e[n]=dk(r)}return e}function d4(t){const e=t(new Ut);return pk(e)}function pk(t){return t._getQuery()}function p4(t){const e=m4(t);let n=t,r,s=0;const a=10;for(;s<a&&!Ar(n,r);)r=n,n=tg(n),s++;return{optimizedQuery:mk(n),sourceWhereClauses:e}}function m4(t){const e=new Map;if(!t.where||t.where.length===0)return e;const r=rg(t.where).map(a=>gk(a)),s=yk(r);for(const[a,l]of s.singleSource)g4(t,a)&&e.set(a,l);return e}function g4(t,e){if(t.from.alias===e)return t.from.type==="collectionRef";if(t.join){for(const n of t.join)if(n.from.alias===e)return n.from.type==="collectionRef"}return!1}function tg(t){const e={...t,from:t.from.type==="queryRef"?new br(tg(t.from.query),t.from.alias):t.from,join:t.join?.map(n=>({...n,from:n.from.type==="queryRef"?new br(tg(n.from.query),n.from.alias):n.from}))};return y4(e)}function y4(t){if(!t.where||t.where.length===0)return t;if(!t.join||t.join.length===0){if(t.where.length>1){const u=rg(t.where),f=mf(u);return{...t,where:[f]}}return t}const e=t.where.filter(u=>!Qx(u)),r=rg(e).map(u=>gk(u)),s=yk(r),a=b4(t,s),l=t.where.filter(u=>Qx(u));return l.length>0&&(a.where=[...a.where||[],...l]),a}function mk(t){return{...t,from:ng(t.from),join:t.join?.map(e=>({...e,from:ng(e.from)}))}}function ng(t){if(t.type==="collectionRef")return t;const e=mk(t.query);if(_4(e)){const n=ng(e.from);return n.type==="collectionRef"?new Va(n.collection,t.alias):new br(n.query,t.alias)}return new br(e,t.alias)}function _4(t){return(!t.where||t.where.length===0)&&!t.select&&(!t.groupBy||t.groupBy.length===0)&&(!t.having||t.having.length===0)&&(!t.orderBy||t.orderBy.length===0)&&(!t.join||t.join.length===0)&&t.limit===void 0&&t.offset===void 0&&!t.fnSelect&&(!t.fnWhere||t.fnWhere.length===0)&&(!t.fnHaving||t.fnHaving.length===0)}function rg(t){const e=[];for(const n of t){const r=sy(n);e.push(...yy(r))}return e}function yy(t){if(t.type==="func"&&t.name==="and"){const e=[];for(const n of t.args)e.push(...yy(n));return e}else return[t]}function gk(t){const e=new Set;let n=!1;function r(s){switch(s.type){case"ref":if(s.path&&s.path.length>0){const a=s.path[0];a&&(e.add(a),s.path.length===1&&(n=!0))}break;case"func":s.args&&s.args.forEach(r);break;case"val":break;case"agg":s.args&&s.args.forEach(r);break}}return r(t),{expression:t,touchedSources:e,hasNamespaceOnlyRef:n}}function yk(t){const e=new Map,n=[];for(const a of t)if(a.touchedSources.size===1&&!a.hasNamespaceOnlyRef){const l=Array.from(a.touchedSources)[0];e.has(l)||e.set(l,[]),e.get(l).push(a.expression)}else(a.touchedSources.size>1||a.hasNamespaceOnlyRef)&&n.push(a.expression);const r=new Map;for(const[a,l]of e)r.set(a,mf(l));const s=n.length>0?mf(n):void 0;return{singleSource:r,multiSource:s}}function b4(t,e){const n=new Set,r=w1(t.from,e.singleSource,n),s=t.join?t.join.map(h=>({...h,from:w1(h.from,e.singleSource,n)})):void 0,a=[];e.multiSource&&a.push(e.multiSource);const l=t.join&&t.join.some(h=>h.type==="left"||h.type==="right"||h.type==="full");for(const[h,m]of e.singleSource)n.has(h)?l&&a.push(OO(m)):a.push(m);const u=a.length>1?[mf(a.flatMap(h=>yy(sy(h))))]:a;return{select:t.select,groupBy:t.groupBy?[...t.groupBy]:void 0,having:t.having?[...t.having]:void 0,orderBy:t.orderBy?[...t.orderBy]:void 0,limit:t.limit,offset:t.offset,distinct:t.distinct,fnSelect:t.fnSelect,fnWhere:t.fnWhere?[...t.fnWhere]:void 0,fnHaving:t.fnHaving?[...t.fnHaving]:void 0,from:r,join:s,where:u.length>0?u:[]}}function Da(t){return{from:t.from.type==="collectionRef"?new Va(t.from.collection,t.from.alias):new br(Da(t.from.query),t.from.alias),select:t.select,join:t.join?t.join.map(e=>({type:e.type,left:e.left,right:e.right,from:e.from.type==="collectionRef"?new Va(e.from.collection,e.from.alias):new br(Da(e.from.query),e.from.alias)})):void 0,where:t.where?[...t.where]:void 0,groupBy:t.groupBy?[...t.groupBy]:void 0,having:t.having?[...t.having]:void 0,orderBy:t.orderBy?[...t.orderBy]:void 0,limit:t.limit,offset:t.offset,fnSelect:t.fnSelect,fnWhere:t.fnWhere?[...t.fnWhere]:void 0,fnHaving:t.fnHaving?[...t.fnHaving]:void 0}}function w1(t,e,n){const r=e.get(t.alias);if(!r)return t.type==="collectionRef"?new Va(t.collection,t.alias):new br(Da(t.query),t.alias);if(t.type==="collectionRef"){const l={from:new Va(t.collection,t.alias),where:[r]};return n.add(t.alias),new br(l,t.alias)}if(!E4(t.query,r,t.alias))return new br(Da(t.query),t.alias);if(T4(t.query,r,t.alias))return new br(Da(t.query),t.alias);const s=t.query.where||[],a={...Da(t.query),where:[...s,r]};return n.add(t.alias),new br(a,t.alias)}function v4(t,e,n){return t.select?_k(t.select)||C4(t.select,e,n):!1}function x4(t){return t.groupBy&&t.groupBy.length>0}function w4(t){return t.having&&t.having.length>0}function S4(t){return t.orderBy&&t.orderBy.length>0&&(t.limit!==void 0||t.offset!==void 0)}function k4(t){return t.fnSelect||t.fnWhere&&t.fnWhere.length>0||t.fnHaving&&t.fnHaving.length>0}function E4(t,e,n){return!(v4(t,e,n)||x4(t)||w4(t)||S4(t)||k4(t))}function _k(t){for(const e of Object.values(t))if(typeof e=="object"){const n=e;if(n.type==="agg"||!("type"in n)&&_k(n))return!0}return!1}function _y(t){const e=[];if(t==null||typeof t!="object")return e;switch(t.type){case"ref":e.push(t);break;case"func":case"agg":for(const n of t.args??[])e.push(..._y(n));break}return e}function C4(t,e,n){const r=new Set;for(const[a,l]of Object.entries(t))a.startsWith("__SPREAD_SENTINEL__")||l instanceof Rn||r.add(a);const s=_y(e);for(const a of s){const l=a.path;if(!Array.isArray(l)||l.length<2)continue;const u=l[0],f=l[1];if(u===n&&r.has(f))return!0}return!1}function T4(t,e,n){const r=_y(e);if(r.every(a=>a.path[0]!==n))return!1;if(t.fnSelect)return!0;const s=t.select;if(!s)return!1;for(const a of r){const l=a.path;if(l.length<2||l[0]!==n)continue;const u=s[l[1]];if(!u)continue;if(!(u instanceof Rn)||u.path.length<2)return!0;const[f,h]=u.path;if(f!==n&&f!==t.from.alias||h!==l[1])return!0}return!1}function mf(t){if(t.length===0)throw new RN;return t.length===1?t[0]:new xr("and",t)}function A4(t,e,n,r,s,a,l,u,f,h,m,p,y,g,v,x,E,S){let C=t;for(const T of e)C=R4(C,T,n,r,s,a,l,u,f,h,m,p,y,g,v,x,E,S);return C}function R4(t,e,n,r,s,a,l,u,f,h,m,p,y,g,v,x,E,S){const C=e.from.type==="collectionRef",{alias:T,input:L,collectionId:D}=N4(e.from,a,f,h,m,p,y,g,l,u,x,E,S);n[T]=L,C&&(E[T]=D);const N=f[r],B=f[D];if(!N)throw new e1(r);if(!B)throw new e1(D);const{activeSource:K,lazySource:G}=M4(e.type,N,B),j=Object.keys(n),{mainExpr:J,joinedExpr:ie}=O4(e.left,e.right,j,T),q=qn(J),P=qn(ie);let U=t.pipe(Tn(([F,se])=>[q(se),[F,se]])),z=L.pipe(Tn(([F,se])=>{const Y={[T]:se};return[P(Y),[F,Y]]}));if(!["inner","left","right","full"].includes(e.type))throw new yN(e.type);if(K){const F=K==="main"?e.from:v.from,se=F.type==="queryRef"&&(F.query.limit||F.query.offset),Y=J.type==="func"||ie.type==="func";if(!se&&!Y){const O=K==="main"?T:s;p.add(O);const I=K==="main"?U:z,R=Ol(v,K==="main"?ie:J,G),ae=R.collection,me=R.path[0];me&&eh(me,R.path,ae);const pe=I.pipe($I(we=>{const Ne=S[O]||O,Ie=h[Ne];if(!Ie)throw new ON(Ne,O,G.id,Object.keys(h));if(Ie.hasLoadedInitialState())return;const rt=we.getInner().map(([[Wt]])=>Wt),lt=new Rn(R.path);Ie.requestSnapshot({where:hM(lt,rt),optimizedOnly:!0})||Ie.requestSnapshot()}));K==="main"?U=pe:z=pe}}return U.pipe(KI(z,e.type),I4(e.type))}function O4(t,e,n,r){const s=n.filter(u=>u!==r),a=sg(t),l=sg(e);if(a&&s.includes(a)&&l===r)return{mainExpr:t,joinedExpr:e};if(a===r&&l&&s.includes(l))return{mainExpr:e,joinedExpr:t};throw!a||!l?new bN:a===l?new _N(a):s.includes(a)?l!==r?new xN(r):new wN:new vN(a)}function sg(t){switch(t.type){case"ref":return t.path[0]||null;case"func":{const e=new Set;for(const n of t.args){const r=sg(n);r&&e.add(r)}return e.size===1?Array.from(e)[0]:null}default:return null}}function N4(t,e,n,r,s,a,l,u,f,h,m,p,y){switch(t.type){case"collectionRef":{const g=e[t.alias];if(!g)throw new rk(t.alias,t.collection.id,Object.keys(e));return p[t.alias]=t.collection.id,{alias:t.alias,input:g,collectionId:t.collection.id}}case"queryRef":{const g=h.get(t.query)||t.query,v=m(g,e,n,r,s,a,l,u,f,h);Object.assign(p,v.aliasToCollectionId),Object.assign(y,v.aliasRemapping);const x=Object.keys(v.aliasToCollectionId).find(C=>v.aliasToCollectionId[C]===v.collectionId);x&&x!==t.alias&&(y[t.alias]=x);const S=v.pipeline.pipe(Tn(C=>{const[T,[L,D]]=C;return[T,L]}));return{alias:t.alias,input:S,collectionId:v.collectionId}}default:throw new SN(t.type)}}function I4(t){return function(e){return e.pipe(Zs(n=>{const[r,[s,a]]=n,l=s?.[1],u=a?.[1];return t==="inner"?!!(l&&u):t==="left"?!!l:t==="right"?!!u:!0}),Tn(n=>{const[r,[s,a]]=n,l=s?.[0],u=s?.[1],f=a?.[0],h=a?.[1],m={};return u&&Object.assign(m,u),h&&Object.assign(m,h),[`[${l},${f}]`,m]}))}}function M4(t,e,n){switch(t){case"left":return{activeSource:"main",lazySource:n};case"right":return{activeSource:"joined",lazySource:e};case"inner":return e.size<n.size?{activeSource:"main",lazySource:n}:{activeSource:"joined",lazySource:e};default:return{activeSource:void 0,lazySource:void 0}}}function ig(t){return t instanceof Un?t.value:t}function D4(t,e,n){const r=t.source(e);if(r&&typeof r=="object"){let s=n;const a=t.targetPath;if(a.length===0)for(const[l,u]of Object.entries(r))n[l]=ig(u);else for(let l=0;l<a.length;l++){const u=a[l];if(l===a.length-1){const f=s[u]??={};if(typeof f=="object")for(const[h,m]of Object.entries(r))f[h]=ig(m)}else{const f=s[u];(f==null||typeof f!="object")&&(s[u]={}),s=s[u]}}}}function L4(t,e,n){const r=t.alias.split(".");if(r.length===1)n[t.alias]=t.compiled(e);else{let s=n;for(let a=0;a<r.length-1;a++){const l=r[a],u=s[l];(u==null||typeof u!="object")&&(s[l]={}),s=s[l]}s[r[r.length-1]]=ig(t.compiled(e))}}function j4([t,e],n){const r={};for(const s of n)s.kind==="merge"?D4(s,e,r):L4(s,e,r);return[t,{...e,__select_results:r}]}function z4(t,e,n){const r=[];return bk([],e,r),t.pipe(Tn(s=>j4(s,r)))}function P4(t){return t.type==="agg"}function B4(t){return t&&typeof t=="object"&&!ry(t)}function bk(t,e,n){for(const[r,s]of Object.entries(e)){if(r.startsWith("__SPREAD_SENTINEL__")){const l=r.slice(19),u=l.lastIndexOf("__"),f=u>=0?l.slice(0,u):l,h=s&&typeof s=="object"&&"type"in s&&s.type==="ref";if(f.includes(".")||h){const m=[...t],p=h?s:new Rn(f.split(".")),y=qn(p);n.push({kind:"merge",targetPath:m,source:y})}else{const m=f,p=[...t];n.push({kind:"merge",targetPath:p,source:y=>y[m]})}continue}const a=s;if(B4(a)){bk([...t,r],a,n);continue}if(P4(a))n.push({kind:"field",alias:[...t,r].join("."),compiled:()=>null});else{if(a===void 0||!ry(a)){n.push({kind:"field",alias:[...t,r].join("."),compiled:()=>a});continue}if(a instanceof Un){const l=a.value;n.push({kind:"field",alias:[...t,r].join("."),compiled:()=>l})}else n.push({kind:"field",alias:[...t,r].join("."),compiled:qn(a)})}}}function by(t,e,n,r,s,a,l,u,f=new WeakMap,h=new WeakMap){const m=f.get(t);if(m)return m;ag(t);const{optimizedQuery:p,sourceWhereClauses:y}=p4(t);h.set(p,t),lg(p,t,h);const g={...e},v={},x={},E={},{alias:S,input:C,collectionId:T}=U4(p.from,g,n,r,s,a,l,u,f,h,v,x);E[S]=C;let L=C.pipe(Tn(([K,G])=>[K,{[S]:G}]));if(p.join&&p.join.length>0&&(L=A4(L,p.join,E,T,S,g,f,h,n,r,s,a,l,u,t,by,v,x)),p.where&&p.where.length>0)for(const K of p.where){const G=sy(K),j=qn(G);L=L.pipe(Zs(([J,ie])=>Pa(j(ie))))}if(p.fnWhere&&p.fnWhere.length>0)for(const K of p.fnWhere)L=L.pipe(Zs(([G,j])=>Pa(K(j))));if(p.distinct&&!p.fnSelect&&!p.select)throw new cN;if(p.fnSelect?L=L.pipe(Tn(([K,G])=>{const j=p.fnSelect(G);return[K,{...G,__select_results:j}]})):p.select?L=z4(L,p.select):L=L.pipe(Tn(([K,G])=>{const j=!p.join&&!p.groupBy?G[S]:G;return[K,{...G,__select_results:j}]})),p.groupBy&&p.groupBy.length>0?L=g1(L,p.groupBy,p.having,p.select,p.fnHaving):p.select&&Object.values(p.select).some(G=>G.type==="agg")&&(L=g1(L,[],p.having,p.select,p.fnHaving)),p.having&&(!p.groupBy||p.groupBy.length===0)&&!(p.select?Object.values(p.select).some(G=>G.type==="agg"):!1))throw new uN;if(p.fnHaving&&p.fnHaving.length>0&&(!p.groupBy||p.groupBy.length===0))for(const K of p.fnHaving)L=L.pipe(Zs(([G,j])=>K(j)));if(p.distinct&&(L=L.pipe(QI(([K,G])=>G.__select_results))),p.orderBy&&p.orderBy.length>0){const j=SM(t,L,p.orderBy,p.select||{},n[T],l,u,p.limit,p.offset).pipe(Tn(([ie,[q,P]])=>{const U=q.__select_results,z=og(U);return[ie,[z,P]]})),J={collectionId:T,pipeline:j,sourceWhereClauses:y,aliasToCollectionId:v,aliasRemapping:x};return f.set(t,J),J}else if(p.limit!==void 0||p.offset!==void 0)throw new fN;const N=L.pipe(Tn(([K,G])=>{const j=G.__select_results,J=og(j);return[K,[J,void 0]]})),B={collectionId:T,pipeline:N,sourceWhereClauses:y,aliasToCollectionId:v,aliasRemapping:x};return f.set(t,B),B}function $4(t){const e=new Set;if(t.from.type==="collectionRef"&&e.add(t.from.alias),t.join)for(const n of t.join)n.from.type==="collectionRef"&&e.add(n.from.alias);return e}function ag(t,e=new Set){const n=$4(t);for(const s of n)if(e.has(s))throw new hN(s,Array.from(e));const r=new Set([...e,...n]);if(t.from.type==="queryRef"&&ag(t.from.query,r),t.join)for(const s of t.join)s.from.type==="queryRef"&&ag(s.from.query,r)}function U4(t,e,n,r,s,a,l,u,f,h,m,p){switch(t.type){case"collectionRef":{const y=e[t.alias];if(!y)throw new rk(t.alias,t.collection.id,Object.keys(e));return m[t.alias]=t.collection.id,{alias:t.alias,input:y,collectionId:t.collection.id}}case"queryRef":{const y=h.get(t.query)||t.query,g=by(y,e,n,r,s,a,l,u,f,h);Object.assign(m,g.aliasToCollectionId),Object.assign(p,g.aliasRemapping);const v=Object.keys(g.aliasToCollectionId).find(S=>g.aliasToCollectionId[S]===g.collectionId);v&&v!==t.alias&&(p[t.alias]=v);const E=g.pipeline.pipe(Tn(S=>{const[C,[T,L]]=S,D=og(T);return[C,D]}));return{alias:t.alias,input:E,collectionId:g.collectionId}}default:throw new dN(t.type)}}function q4(t){return t instanceof Un||t&&typeof t=="object"&&"type"in t&&t.type==="val"}function og(t){return q4(t)?t.value:t}function lg(t,e,n){if(t.from.type==="queryRef"&&e.from.type==="queryRef"&&(n.set(t.from.query,e.from.query),lg(t.from.query,e.from.query,n)),t.join&&e.join)for(let r=0;r<t.join.length&&r<e.join.length;r++){const s=t.join[r],a=e.join[r];s.from.type==="queryRef"&&a.from.type==="queryRef"&&(n.set(s.from.query,a.from.query),lg(s.from.query,a.from.query,n))}}function vy(t,e){const n=t.type;if(n==="val")return new Un(t.value);if(n==="ref"){const r=t.path;if(Array.isArray(r)){if(r[0]===e&&r.length>1)return new Rn(r.slice(1));if(r.length===1&&r[0]!==void 0)return new Rn([r[0]])}return new Rn(Array.isArray(r)?r:[String(r)])}else{const r=[];for(const s of t.args){const a=vy(s,e);r.push(a)}return new xr(t.name,r)}}function S1(t,e){return t.map(r=>{const s=vy(r.expression,e);return{...r,expression:s}})}const k1=Symbol.for("@tanstack/db.collection-config-builder");class F4{constructor(e,n,r,s){this.alias=e,this.collectionId=n,this.collection=r,this.collectionConfigBuilder=s,this.biggest=void 0,this.subscriptionLoadingPromises=new Map,this.sentToD2Keys=new Set}subscribe(){const e=this.getWhereClauseForAlias();if(e){const n=vy(e,this.alias);return this.subscribeToChanges(n)}return this.subscribeToChanges()}subscribeToChanges(e){let n;const r=this.getOrderByInfo();if(r)n=this.subscribeToOrderedChanges(e,r);else{const u=!this.collectionConfigBuilder.isLazyAlias(this.alias);n=this.subscribeToMatchingChanges(e,u)}const s=()=>{if(!this.subscriptionLoadingPromises.has(n)){let u;const f=new Promise(h=>{u=h});this.subscriptionLoadingPromises.set(n,{resolve:u}),this.collectionConfigBuilder.liveQueryCollection._sync.trackLoadPromise(f)}};n.status==="loadingSubset"&&s();const a=n.on("status:change",u=>{if(u.status==="loadingSubset")s();else{const f=this.subscriptionLoadingPromises.get(n);f&&(this.subscriptionLoadingPromises.delete(n),f.resolve())}}),l=()=>{const u=this.subscriptionLoadingPromises.get(n);u&&(this.subscriptionLoadingPromises.delete(n),u.resolve()),a(),n.unsubscribe()};return this.collectionConfigBuilder.currentSyncState.unsubscribeCallbacks.add(l),n}sendChangesToPipeline(e,n){const r=Array.isArray(e)?e:[...e],s=[];for(const f of r){if(f.type==="insert"){if(this.sentToD2Keys.has(f.key))continue;this.sentToD2Keys.add(f.key)}else f.type==="delete"&&this.sentToD2Keys.delete(f.key);s.push(f)}const a=this.collectionConfigBuilder.currentSyncState.inputs[this.alias],u=V4(a,s,this.collection.config.getKey)>0?n:void 0;this.collectionConfigBuilder.scheduleGraphRun(u,{alias:this.alias})}subscribeToMatchingChanges(e,n=!1){const r=a=>{this.sendChangesToPipeline(a)};return this.collection.subscribeChanges(r,{...n&&{includeInitialState:n},whereExpression:e})}subscribeToOrderedChanges(e,n){const{orderBy:r,offset:s,limit:a,index:l}=n,u=p=>{const y=H4(p);this.sendChangesToPipelineWithTracking(y,f)},f=this.collection.subscribeChanges(u,{whereExpression:e}),h=this.collection.on("truncate",()=>{this.biggest=void 0,this.sentToD2Keys.clear()});f.on("unsubscribed",()=>{h()});const m=S1(r,this.alias);return l?(f.setOrderByIndex(l),f.requestLimitedSnapshot({limit:s+a,orderBy:m})):f.requestSnapshot({orderBy:m,limit:s+a}),f}loadMoreIfNeeded(e){const n=this.getOrderByInfo();if(!n)return!0;const{dataNeeded:r}=n;if(!r)return!0;const s=r();return s>0&&this.loadNextItems(s,e),!0}sendChangesToPipelineWithTracking(e,n){const r=this.getOrderByInfo();if(!r){this.sendChangesToPipeline(e);return}const s=this.trackSentValues(e,r.comparator),a=n;a[k1]??=this.loadMoreIfNeeded.bind(this,n),this.sendChangesToPipeline(s,a[k1])}loadNextItems(e,n){const r=this.getOrderByInfo();if(!r)return;const{orderBy:s,valueExtractorForRawRow:a,offset:l}=r,u=this.biggest,f=u?a(u):void 0,h=f!==void 0?Array.isArray(f)?f:[f]:void 0,m=S1(s,this.alias);n.requestLimitedSnapshot({orderBy:m,limit:e,minValues:h,offset:l})}getWhereClauseForAlias(){const e=this.collectionConfigBuilder.sourceWhereClausesCache;if(e)return e.get(this.alias)}getOrderByInfo(){const e=this.collectionConfigBuilder.optimizableOrderByCollections[this.collectionId];if(e&&e.alias===this.alias)return e}*trackSentValues(e,n){for(const r of e)r.type!=="delete"&&(this.biggest?n(this.biggest,r.value)<0&&(this.biggest=r.value):this.biggest=r.value),yield r}}function V4(t,e,n){const r=[];for(const s of e){const a=n(s.value);s.type==="insert"?r.push([[a,s.value],1]):s.type==="update"?(r.push([[a,s.previousValue],-1]),r.push([[a,s.value],1])):r.push([[a,s.value],-1])}return r.length!==0&&t.sendData(new qt(r)),r.length}function*H4(t){for(const e of t)e.type==="update"?(yield{type:"delete",key:e.key,value:e.previousValue},yield{type:"insert",key:e.key,value:e.value}):yield e}const vk=new WeakMap;function G4(t){return t.utils?.[dy]?.getBuilder?.()}function K4(t,e){vk.set(t,e)}function Z4(t){return vk.get(t)}let Q4=0;class J4{constructor(e){this.config=e,this.compiledAliasToCollectionId={},this.resultKeys=new WeakMap,this.orderByIndices=new WeakMap,this.isGraphRunning=!1,this.runCount=0,this.isInErrorState=!1,this.aliasDependencies={},this.builderDependencies=new Set,this.pendingGraphRuns=new Map,this.subscriptions={},this.lazySourcesCallbacks={},this.lazySources=new Set,this.optimizableOrderByCollections={},this.id=e.id||`live-query-${++Q4}`,this.query=Y4(e),this.collections=W4(this.query);const n=eD(this.query);this.collectionByAlias={};for(const[r,s]of n.entries()){const a=this.collections[r];if(a)for(const l of s)this.collectionByAlias[l]=a}this.query.orderBy&&this.query.orderBy.length>0&&(this.compare=X4(this.orderByIndices)),this.compareOptions=this.config.defaultStringCollation??xk(this.query).compareOptions,this.compileBasePipeline()}hasJoins(e){return!!(e.join&&e.join.length>0||e.from.type==="queryRef"&&this.hasJoins(e.from.query))}getConfig(){return{id:this.id,getKey:this.config.getKey||(e=>this.resultKeys.get(e)),sync:this.getSyncConfig(),compare:this.compare,defaultStringCollation:this.compareOptions,gcTime:this.config.gcTime||5e3,schema:this.config.schema,onInsert:this.config.onInsert,onUpdate:this.config.onUpdate,onDelete:this.config.onDelete,startSync:this.config.startSync,singleResult:this.query.singleResult,utils:{getRunCount:this.getRunCount.bind(this),setWindow:this.setWindow.bind(this),getWindow:this.getWindow.bind(this),[dy]:{getBuilder:()=>this,hasCustomGetKey:!!this.config.getKey,hasJoins:this.hasJoins(this.query)}}}}setWindow(e){if(!this.windowFn)throw new IN;return this.currentWindow=e,this.windowFn(e),this.maybeRunGraphFn?.(),this.liveQueryCollection?.isLoadingSubset?new Promise(n=>{const r=this.liveQueryCollection.on("loadingSubset:change",s=>{s.isLoadingSubset||(r(),n())})}):!0}getWindow(){if(!(!this.windowFn||!this.currentWindow))return{offset:this.currentWindow.offset??0,limit:this.currentWindow.limit??0}}getCollectionIdForAlias(e){const n=this.compiledAliasToCollectionId[e];if(n)return n;const r=this.collectionByAlias[e];if(r)return r.id;throw new Error(`Unknown source alias "${e}"`)}isLazyAlias(e){return this.lazySources.has(e)}maybeRunGraph(e){if(!this.isGraphRunning){if(!this.currentSyncConfig||!this.currentSyncState)throw new Error("maybeRunGraph called without active sync session. This should not happen.");this.isGraphRunning=!0;try{const{begin:n,commit:r}=this.currentSyncConfig,s=this.currentSyncState;if(this.isInErrorState)return;if(s.subscribedToAllCollections){for(;s.graph.pendingWork();)s.graph.run(),e?.();s.messagesCount===0&&(n(),r(),this.updateLiveQueryStatus(this.currentSyncConfig))}}finally{this.isGraphRunning=!1}}}scheduleGraphRun(e,n){const r=n?.contextId??Vu()?.id,s=n?.jobId??this,a=(()=>{if(n?.dependencies)return n.dependencies;const f=new Set(this.builderDependencies);if(n?.alias){const h=this.aliasDependencies[n.alias];if(h)for(const m of h)f.add(m)}return f.delete(this),Array.from(f)})();if(r)for(const f of a)typeof f.scheduleGraphRun=="function"&&f.scheduleGraphRun(void 0,{contextId:r});if(!this.currentSyncConfig||!this.currentSyncState)throw new Error("scheduleGraphRun called without active sync session. This should not happen.");let l=r?this.pendingGraphRuns.get(r):void 0;l||(l={loadCallbacks:new Set},r&&this.pendingGraphRuns.set(r,l)),e&&l.loadCallbacks.add(e);const u=r?void 0:l;df.schedule({contextId:r,jobId:s,dependencies:a,run:()=>this.executeGraphRun(r,u)})}clearPendingGraphRun(e){this.pendingGraphRuns.delete(e)}hasPendingGraphRun(e){return this.pendingGraphRuns.has(e)}executeGraphRun(e,n){const r=n??(e?this.pendingGraphRuns.get(e):void 0);if(e&&this.pendingGraphRuns.delete(e),!r||!this.currentSyncConfig||!this.currentSyncState)return;this.incrementRunCount();const s=()=>{let a=!0,l;if(r.loadCallbacks.forEach(u=>{try{a=u()&&a}catch(f){a=!1,l??=f}}),l)throw l;return a};this.maybeRunGraph(s)}getSyncConfig(){return{rowUpdateMode:"full",sync:this.syncFn.bind(this)}}incrementRunCount(){this.runCount++}getRunCount(){return this.runCount}syncFn(e){this.liveQueryCollection=e.collection,this.currentSyncConfig=e;const n={messagesCount:0,subscribedToAllCollections:!1,unsubscribeCallbacks:new Set},r=this.extendPipelineWithChangeProcessing(e,n);this.currentSyncState=r,this.unsubscribeFromSchedulerClears=df.onClear(a=>{this.clearPendingGraphRun(a)});const s=this.subscribeToAllCollections(e,r);return this.maybeRunGraphFn=()=>this.scheduleGraphRun(s),this.scheduleGraphRun(s),()=>{n.unsubscribeCallbacks.forEach(a=>a()),this.currentSyncConfig=void 0,this.currentSyncState=void 0,this.pendingGraphRuns.clear(),this.graphCache=void 0,this.inputsCache=void 0,this.pipelineCache=void 0,this.sourceWhereClausesCache=void 0,this.lazySources.clear(),this.optimizableOrderByCollections={},this.lazySourcesCallbacks={},Object.keys(this.subscriptions).forEach(a=>delete this.subscriptions[a]),this.compiledAliasToCollectionId={},this.unsubscribeFromSchedulerClears?.(),this.unsubscribeFromSchedulerClears=void 0}}compileBasePipeline(){this.graphCache=new AI,this.inputsCache=Object.fromEntries(Object.keys(this.collectionByAlias).map(r=>[r,this.graphCache.newInput()]));const e=by(this.query,this.inputsCache,this.collections,this.subscriptions,this.lazySourcesCallbacks,this.lazySources,this.optimizableOrderByCollections,r=>{this.windowFn=r});this.pipelineCache=e.pipeline,this.sourceWhereClausesCache=e.sourceWhereClauses,this.compiledAliasToCollectionId=e.aliasToCollectionId;const n=Object.keys(this.compiledAliasToCollectionId).filter(r=>!Object.hasOwn(this.inputsCache,r));if(n.length>0)throw new NN(n)}maybeCompileBasePipeline(){return(!this.graphCache||!this.inputsCache||!this.pipelineCache)&&this.compileBasePipeline(),{graph:this.graphCache,inputs:this.inputsCache,pipeline:this.pipelineCache}}extendPipelineWithChangeProcessing(e,n){const{begin:r,commit:s}=e,{graph:a,inputs:l,pipeline:u}=this.maybeCompileBasePipeline();return u.pipe(FI(f=>{const h=f.getInner();n.messagesCount+=h.length,r(),h.reduce(tD,new Map).forEach(this.applyChanges.bind(this,e)),s()})),a.finalize(),n.graph=a,n.inputs=l,n.pipeline=u,n}applyChanges(e,n,r){const{write:s,collection:a}=e,{deletes:l,inserts:u,value:f,orderByIndex:h}=n;if(this.resultKeys.set(f,r),h!==void 0&&this.orderByIndices.set(f,h),u&&l===0)s({value:f,type:"insert"});else if(u>l||u===l&&a.has(a.getKeyFromItem(f)))s({value:f,type:"update"});else if(l>0)s({value:f,type:"delete"});else throw new Error(`Could not apply changes: ${JSON.stringify(n)}. This should never happen.`)}handleSourceStatusChange(e,n,r){const{status:s}=r;if(s==="error"){this.transitionToError(`Source collection '${n}' entered error state`);return}if(s==="cleaned-up"){this.transitionToError(`Source collection '${n}' was manually cleaned up while live query '${this.id}' depends on it. Live queries prevent automatic GC, so this was likely a manual cleanup() call.`);return}this.updateLiveQueryStatus(e)}updateLiveQueryStatus(e){const{markReady:n}=e;this.isInErrorState||this.allCollectionsReady()&&n()}transitionToError(e){this.isInErrorState=!0,console.error(`[Live Query Error] ${e}`),this.liveQueryCollection?._lifecycle.setStatus("error")}allCollectionsReady(){return Object.values(this.collections).every(e=>e.isReady())}subscribeToAllCollections(e,n){const r=Object.entries(this.compiledAliasToCollectionId);if(r.length===0)throw new Error(`Compiler returned no alias metadata for query '${this.id}'. This should not happen; please report.`);const s=r.map(([l,u])=>{const f=this.collectionByAlias[l]??this.collections[u],h=Z4(f);h&&h!==this?(this.aliasDependencies[l]=[h],this.builderDependencies.add(h)):this.aliasDependencies[l]=[];const m=new F4(l,u,f,this),p=f.on("status:change",v=>{this.handleSourceStatusChange(e,u,v)});n.unsubscribeCallbacks.add(p);const y=m.subscribe();return this.subscriptions[l]=y,m.loadMoreIfNeeded.bind(m,y)}),a=()=>(s.map(l=>l()),!0);return n.subscribedToAllCollections=!0,this.updateLiveQueryStatus(e),a}}function Y4(t){return typeof t.query=="function"?d4(t.query):pk(t.query)}function X4(t){return(e,n)=>{const r=t.get(e),s=t.get(n);return r&&s?r<s?-1:r>s?1:0:0}}function W4(t){const e={};function n(s){s.type==="collectionRef"?e[s.collection.id]=s.collection:s.type==="queryRef"&&r(s.query)}function r(s){if(s.from&&n(s.from),s.join&&Array.isArray(s.join))for(const a of s.join)a.from&&n(a.from)}return r(t),e}function xk(t){const e=t.from;if(e.type==="collectionRef")return e.collection;if(e.type==="queryRef")return xk(e.query);throw new Error(`Failed to extract collection. Invalid FROM clause: ${JSON.stringify(t)}`)}function eD(t){const e=new Map;function n(s){if(s)if(s.type==="collectionRef"){const{id:a}=s.collection,l=e.get(a);l?l.add(s.alias):e.set(a,new Set([s.alias]))}else s.type==="queryRef"&&r(s.query)}function r(s){if(s&&(n(s.from),s.join))for(const a of s.join)n(a.from)}return r(t),e}function tD(t,[[e,n],r]){const[s,a]=n,l=t.get(e)||{deletes:0,inserts:0,value:s,orderByIndex:a};return r<0?l.deletes+=Math.abs(r):r>0&&(l.inserts+=r,l.value=s,l.orderByIndex=a),t.set(e,l),t}function E1(t){return new J4(t).getConfig()}function em(t){if(typeof t=="function"){const n=E1({query:t});return C1(n)}else{const e=t,n=E1(e);return e.utils&&(n.utils={...n.utils,...e.utils}),C1(n)}}function C1(t){const e=hk(t),n=G4(t);return n&&K4(e,n),e}const tm=1;function nD(t,e=[]){const n=t&&typeof t=="object"&&typeof t.subscribeChanges=="function"&&typeof t.startSyncImmediate=="function"&&typeof t.id=="string",r=Q.useRef(null),s=Q.useRef(null),a=Q.useRef(null),l=Q.useRef(0),u=Q.useRef(null),f=!r.current||n&&a.current!==t||!n&&(s.current===null||s.current.length!==e.length||s.current.some((v,x)=>v!==e[x]));if(f)if(n)t.startSyncImmediate(),r.current=t,a.current=t;else if(typeof t=="function"){const v=new Ut,x=t(v);if(x==null)r.current=null;else if(x instanceof gy)x.startSyncImmediate(),r.current=x;else if(x instanceof Ut)r.current=em({query:t,startSync:!0,gcTime:tm});else if(x&&typeof x=="object")r.current=em({startSync:!0,gcTime:tm,...x});else throw new Error(`useLiveQuery callback must return a QueryBuilder, LiveQueryCollectionConfig, Collection, undefined, or null. Got: ${typeof x}`);s.current=[...e]}else r.current=em({startSync:!0,gcTime:tm,...t}),s.current=[...e];f&&(l.current=0,u.current=null);const h=Q.useRef(null);(!h.current||f)&&(h.current=v=>{if(!r.current)return()=>{};const x=r.current.subscribeChanges(()=>{l.current+=1,v()});return r.current.status==="ready"&&(l.current+=1,v()),()=>{x.unsubscribe()}});const m=Q.useRef(null);(!m.current||f)&&(m.current=()=>{const v=l.current,x=r.current;return(!u.current||u.current.version!==v||u.current.collection!==x)&&(u.current={collection:x,version:v}),u.current});const p=Q.useSyncExternalStore(h.current,m.current),y=Q.useRef(null),g=Q.useRef(null);if(!y.current||y.current.version!==p.version||y.current.collection!==p.collection){if(!p.collection)g.current={state:void 0,data:void 0,collection:void 0,status:"disabled",isLoading:!1,isReady:!0,isIdle:!1,isError:!1,isCleanedUp:!1,isEnabled:!1};else{const v=Array.from(p.collection.entries()),E=p.collection.config.singleResult;let S=null,C=null;g.current={get state(){return S||(S=new Map(v)),S},get data(){return C||(C=v.map(([,T])=>T)),E?C[0]:C},collection:p.collection,status:p.collection.status,isLoading:p.collection.status==="loading",isReady:p.collection.status==="ready",isIdle:p.collection.status==="idle",isError:p.collection.status==="error",isCleanedUp:p.collection.status==="cleaned-up",isEnabled:!0}}y.current=p}return g.current}class Ws extends rr{constructor(e){super(e),this.name="QueryCollectionError"}}class rD extends Ws{constructor(){super("[QueryCollection] queryKey must be provided."),this.name="QueryKeyRequiredError"}}class sD extends Ws{constructor(){super("[QueryCollection] queryFn must be provided."),this.name="QueryFnRequiredError"}}class iD extends Ws{constructor(){super("[QueryCollection] queryClient must be provided."),this.name="QueryClientRequiredError"}}class aD extends Ws{constructor(){super("[QueryCollection] getKey must be provided."),this.name="GetKeyRequiredError"}}class oD extends Ws{constructor(){super("Collection must be in 'ready' state for manual sync operations. Sync not initialized yet."),this.name="SyncNotInitializedError"}}class lD extends Ws{constructor(e){super(`Duplicate key '${e}' found within batch operations`),this.name="DuplicateKeyInBatchError"}}class cD extends Ws{constructor(e){super(`Update operation: Item with key '${e}' does not exist`),this.name="UpdateOperationItemNotFoundError"}}class uD extends Ws{constructor(e){super(`Delete operation: Item with key '${e}' does not exist`),this.name="DeleteOperationItemNotFoundError"}}const xi=new WeakMap;function fD(t,e){const n=Array.isArray(t)?t:[t],r=[];for(const s of n)if(s.type==="delete"){const a=Array.isArray(s.key)?s.key:[s.key];for(const l of a)r.push({type:"delete",key:l})}else{const a=Array.isArray(s.data)?s.data:[s.data];for(const l of a){let u;if(s.type==="update")u=e.getKey(l);else{const f=e.collection.validateData(l,s.type==="upsert"?"insert":s.type);u=e.getKey(f)}r.push({type:s.type,key:u,data:l})}}return r}function hD(t,e){const n=new Set;for(const r of t){if(n.has(r.key))throw new lD(r.key);if(n.add(r.key),r.type==="update"){if(!e.collection._state.syncedData.has(r.key))throw new cD(r.key)}else if(r.type==="delete"&&!e.collection._state.syncedData.has(r.key))throw new uD(r.key)}}function Jo(t,e){const n=fD(t,e);hD(n,e),e.begin();for(const s of n)switch(s.type){case"insert":{const a=e.collection.validateData(s.data,"insert");e.write({type:"insert",value:a});break}case"update":{const l={...e.collection._state.syncedData.get(s.key),...s.data},u=e.collection.validateData(l,"update",s.key);e.write({type:"update",value:u});break}case"delete":{const a=e.collection._state.syncedData.get(s.key);e.write({type:"delete",value:a});break}case"upsert":{const a=e.collection._state.syncedData.has(s.key),l=e.collection.validateData(s.data,a?"update":"insert",s.key);a?e.write({type:"update",value:l}):e.write({type:"insert",value:l});break}}e.commit();const r=Array.from(e.collection._state.syncedData.values());e.updateCacheData?e.updateCacheData(r):e.queryClient.setQueryData(e.queryKey,r)}function dD(t){function e(){const n=t();if(!n)throw new oD;return n}return{writeInsert(n){const r={type:"insert",data:n},s=e(),a=xi.get(s);if(a?.isActive){a.operations.push(r);return}Jo(r,s)},writeUpdate(n){const r={type:"update",data:n},s=e(),a=xi.get(s);if(a?.isActive){a.operations.push(r);return}Jo(r,s)},writeDelete(n){const r={type:"delete",key:n},s=e(),a=xi.get(s);if(a?.isActive){a.operations.push(r);return}Jo(r,s)},writeUpsert(n){const r={type:"upsert",data:n},s=e(),a=xi.get(s);if(a?.isActive){a.operations.push(r);return}Jo(r,s)},writeBatch(n){const r=e();if(xi.get(r)?.isActive)throw new Error("Cannot nest writeBatch calls. Complete the current batch before starting a new one.");const a={operations:[],isActive:!0};xi.set(r,a);try{const l=n();if(l&&typeof l=="object"&&"then"in l&&typeof l.then=="function")throw new Error("writeBatch does not support async callbacks. The callback must be synchronous.");a.operations.length>0&&Jo(a.operations,r)}finally{a.isActive=!1,xi.delete(r)}}}}function pD(t){if(!t)return;const e={};return t.where&&(e.where=cg(t.where)),t.orderBy?.length&&(e.orderBy=t.orderBy.map(n=>{const r={expression:cg(n.expression),direction:n.compareOptions.direction,nulls:n.compareOptions.nulls,stringSort:n.compareOptions.stringSort};return n.compareOptions.stringSort==="locale"?{...r,locale:n.compareOptions.locale,localeOptions:n.compareOptions.localeOptions}:r})),t.limit!==void 0&&(e.limit=t.limit),t.offset!==void 0&&(e.offset=t.offset),Object.keys(e).length===0?void 0:JSON.stringify(e)}function cg(t){if(!t)return null;switch(t.type){case"val":return{type:"val",value:ug(t.value)};case"ref":return{type:"ref",path:[...t.path]};case"func":return{type:"func",name:t.name,args:t.args.map(e=>cg(e))};default:return null}}function ug(t){if(t===void 0)return{__type:"undefined"};if(typeof t=="number"){if(Number.isNaN(t))return{__type:"nan"};if(t===Number.POSITIVE_INFINITY)return{__type:"infinity",sign:1};if(t===Number.NEGATIVE_INFINITY)return{__type:"infinity",sign:-1}}return t===null||typeof t=="string"||typeof t=="number"||typeof t=="boolean"?t:t instanceof Date?{__type:"date",value:t.toJSON()}:Array.isArray(t)?t.map(e=>ug(e)):typeof t=="object"?Object.fromEntries(Object.entries(t).map(([e,n])=>[e,ug(n)])):t}class mD{constructor(e,n,r){this.state=e,this.refetchFn=n,this.refetch=n,this.writeInsert=r.writeInsert,this.writeUpdate=r.writeUpdate,this.writeDelete=r.writeDelete,this.writeUpsert=r.writeUpsert,this.writeBatch=r.writeBatch}async clearError(){this.state.lastError=void 0,this.state.errorCount=0,this.state.lastErrorUpdatedAt=0,await this.refetchFn({throwOnError:!0})}get lastError(){return this.state.lastError}get isError(){return!!this.state.lastError}get errorCount(){return this.state.errorCount}get isFetching(){return Array.from(this.state.observers.values()).some(e=>e.getCurrentResult().isFetching)}get isRefetching(){return Array.from(this.state.observers.values()).some(e=>e.getCurrentResult().isRefetching)}get isLoading(){return Array.from(this.state.observers.values()).some(e=>e.getCurrentResult().isLoading)}get dataUpdatedAt(){return Math.max(0,...Array.from(this.state.observers.values()).map(e=>e.getCurrentResult().dataUpdatedAt))}get fetchStatus(){return Array.from(this.state.observers.values()).map(e=>e.getCurrentResult().fetchStatus)}}function gD(t){const{queryKey:e,queryFn:n,select:r,queryClient:s,enabled:a,refetchInterval:l,retry:u,retryDelay:f,staleTime:h,getKey:m,onInsert:p,onUpdate:y,onDelete:g,meta:v,...x}=t,E=x.syncMode??"eager";if(!e)throw new rD;if(!n)throw new sD;if(!s)throw new iD;if(!m)throw new aD;const S={lastError:void 0,errorCount:0,lastErrorUpdatedAt:0,observers:new Map},C=new Map,T=new Map,L=new Map,D=new Map,N=new Map,B=(Y,O)=>{const I=L.get(Y)||new Set;I.add(O),L.set(Y,I);const H=T.get(O)||new Set;H.add(Y),T.set(O,H)},K=(Y,O)=>{const I=L.get(Y)||new Set;I.delete(O),L.set(Y,I);const H=T.get(O)||new Set;return H.delete(Y),T.set(O,H),I.size===0},G=Y=>{const{begin:O,write:I,commit:H,markReady:R,collection:ae}=Y;let me=!1;const pe=ge=>{if(typeof e=="function")return e(ge);if(E==="on-demand"){const $e=pD(ge);return $e!==void 0?[...e,$e]:e}else return e},we=(ge={},$e=n)=>{const Oe=pe(ge),xe=gs(Oe),We={...v,loadSubsetOptions:ge};if(S.observers.has(xe)){N.set(xe,(N.get(xe)||0)+1);const ve=S.observers.get(xe),Te=ve.getCurrentResult();return Te.isSuccess?!0:Te.isError?Promise.reject(Te.error):new Promise((gt,tn)=>{const et=ve.subscribe(_t=>{_t.isSuccess?(et(),gt()):_t.isError&&(et(),tn(_t.error))})})}const ne={queryKey:Oe,queryFn:$e,meta:We,structuralSharing:!0,notifyOnChangeProps:"all",...a!==void 0&&{enabled:a},...l!==void 0&&{refetchInterval:l},...u!==void 0&&{retry:u},...f!==void 0&&{retryDelay:f},...h!==void 0&&{staleTime:h}},ue=new yO(s,ne);C.set(xe,Oe),S.observers.set(xe,ue),N.set(xe,(N.get(xe)||0)+1);const ye=new Promise((ve,Te)=>{const gt=ue.subscribe(tn=>{tn.isSuccess?(gt(),ve()):tn.isError&&(gt(),Te(tn.error))})});return(me||ae.subscriberCount>0)&&rt(ue,xe),ye},Ne=ge=>{const $e=gs(ge);return xe=>{if(xe.isSuccess){S.lastError=void 0,S.errorCount=0;const We=xe.data,ne=r?r(We):We;if(!Array.isArray(ne)||ne.some(ve=>typeof ve!="object")){const ve=r?`@tanstack/query-db-collection: select() must return an array of objects. Got: ${typeof ne} for queryKey ${JSON.stringify(ge)}`:`@tanstack/query-db-collection: queryFn must return an array of objects. Got: ${typeof ne} for queryKey ${JSON.stringify(ge)}`;console.error(ve);return}const ue=new Map(ae._state.syncedData.entries()),ye=new Map;ne.forEach(ve=>{const Te=m(ve);ye.set(Te,ve)}),O(),ue.forEach((ve,Te)=>{const gt=ye.get(Te);gt?Ar(ve,gt)||I({type:"update",value:gt}):K(Te,$e)&&I({type:"delete",value:ve})}),ye.forEach((ve,Te)=>{B(Te,$e),ue.has(Te)||I({type:"insert",value:ve})}),H(),R()}else xe.isError&&(xe.errorUpdatedAt!==S.lastErrorUpdatedAt&&(S.lastError=xe.error,S.errorCount++,S.lastErrorUpdatedAt=xe.errorUpdatedAt),console.error(`[QueryCollection] Error observing query ${String(ge)}:`,xe.error),R())}},Ie=ge=>D.has(ge),rt=(ge,$e)=>{if(!Ie($e)){const Oe=C.get($e),xe=Ne(Oe),We=ge.subscribe(xe);D.set($e,We);const ne=ge.getCurrentResult();(ne.isSuccess||ne.isError)&&xe(ne)}},lt=()=>{S.observers.forEach(rt)},Ct=()=>{D.forEach(ge=>{ge()}),D.clear()};me=!0;const Wt=ae.on("subscribers:change",({subscriberCount:ge})=>{ge>0?lt():ge===0&&Ct()});if(E==="eager"){const ge=we({});ge instanceof Promise&&ge.catch(()=>{})}else R();lt(),S.observers.forEach((ge,$e)=>{const Oe=C.get($e);Ne(Oe)(ge.getCurrentResult())});const Tt=ge=>{D.get(ge)?.(),D.delete(ge);const $e=T.get(ge)??new Set,Oe=[];$e.forEach(xe=>{const We=L.get(xe);We&&(We.delete(ge),We.size===0&&(L.delete(xe),ae.has(xe)&&Oe.push(ae.get(xe))))}),Oe.length>0&&(O(),Oe.forEach(xe=>{I({type:"delete",value:xe})}),H()),S.observers.delete(ge),T.delete(ge),C.delete(ge),N.delete(ge)},en=ge=>{const $e=N.get(ge)||0,Oe=S.observers.get(ge);if($e<=0&&(D.get(ge)?.(),D.delete(ge)),Oe?.hasListeners()??!1){N.set(ge,0);return}$e>0&&console.warn(`[cleanupQueryIfIdle] Invariant violation: refcount=${$e} but no listeners. Cleaning up to prevent leak.`,{hashedQueryKey:ge}),Tt(ge)},De=ge=>{Tt(ge)},ct=s.getQueryCache().subscribe(ge=>{const $e=ge.query.queryHash;ge.type==="removed"&&C.has($e)&&en($e)});return{loadSubset:E==="eager"?void 0:we,unloadSubset:E==="eager"?void 0:ge=>{const $e=pe(ge),Oe=gs($e),We=(N.get(Oe)||0)-1;We<=0?(N.set(Oe,0),en(Oe)):N.set(Oe,We)},cleanup:async()=>{Wt(),Ct();const ge=[...C.values()],$e=[...S.observers.keys()];for(const Oe of $e)De(Oe);ct(),await Promise.all(ge.map(async Oe=>{await s.cancelQueries({queryKey:Oe,exact:!0}),s.removeQueries({queryKey:Oe,exact:!0})}))}}},j=async Y=>{const I=[...C.values()].map(H=>S.observers.get(gs(H)).refetch({throwOnError:Y?.throwOnError}));await Promise.all(I)},J=Y=>{const O=typeof e=="function"?e({}):e;r?s.setQueryData(O,I=>{if(!I||typeof I!="object")return I;if(Array.isArray(I))return Y;const H=r(I);if(Array.isArray(H)){for(const R of Object.keys(I))if(I[R]===H)return{...I,[R]:Y}}if(Array.isArray(I.data))return{...I,data:Y};if(Array.isArray(I.items))return{...I,items:Y};if(Array.isArray(I.results))return{...I,results:Y};for(const R of Object.keys(I))if(Array.isArray(I[R]))return{...I,[R]:Y};return I}):s.setQueryData(O,Y)};let ie=null;const q=Y=>{const{begin:O,write:I,commit:H,collection:R}=Y,ae=typeof e=="function"?e({}):e;return ie={collection:R,queryClient:s,queryKey:ae,getKey:m,begin:O,write:I,commit:H,updateCacheData:J},G(Y)},P=dD(()=>ie),U=p?async Y=>{const O=await p(Y)??{};return O.refetch!==!1&&await j(),O}:void 0,z=y?async Y=>{const O=await y(Y)??{};return O.refetch!==!1&&await j(),O}:void 0,F=g?async Y=>{const O=await g(Y)??{};return O.refetch!==!1&&await j(),O}:void 0,se=new mD(S,j,P);return{...x,getKey:m,syncMode:E,sync:{sync:q},onInsert:U,onUpdate:z,onDelete:F,utils:se}}function $n(){return Math.random().toString(36).substring(2,9)}async function yD(t){return new Promise((e,n)=>{const r=new FileReader;r.onloadend=()=>{const a=r.result.split(",")[1]||"";e(a)},r.onerror=n,r.readAsDataURL(t)})}function _D(t,e){const n=atob(t),r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return new Blob([r],{type:e})}function bD(t){const e=t.match(/^grpc:\/\/([^/]+)\/(.+)\/([^/]+)$/);return e?{server:e[1],service:e[2],method:e[3]}:{server:t.replace(/^grpc:\/\//,""),service:"",method:""}}function vD(t,e,n){return e&&n?`grpc://${t}/${e}/${n}`:`grpc://${t}`}async function T1(t){const e={id:t.id,name:t.name,variables:t.variables??[],creationTime:t.creationTime,executionTime:t.executionTime};switch(t.protocol){case"grpc":{const{server:n,service:r,method:s}=bD(t.url);e.grpc={server:n,service:r,method:s,schema:t.grpc?.schema,body:t.grpc?.body??"",response:t.grpc?.response};break}case"mcp":{e.mcp={url:t.url,tool:t.mcp?.tool,resource:t.mcp?.resource,response:t.mcp?.response};break}default:{let n=t.http?.body??{type:"none"};n.type==="form-data"?n={...n,data:n.data.map(s=>({...s,file:null}))}:n.type==="binary"&&(n={...n,file:null});let r;if(t.http?.response){const s=t.http.response.body instanceof Blob?await yD(t.http.response.body):"",a=t.http.response.body instanceof Blob?t.http.response.body.type:"application/octet-stream";r={status:t.http.response.status,statusCode:t.http.response.statusCode,headers:t.http.response.headers,body:s,bodyType:a,duration:t.http.response.duration,error:t.http.response.error}}e.http={method:t.http?.method??"GET",url:t.url,query:t.http?.query??[],headers:t.http?.headers??[],body:n,response:r};break}}return e}function xD(t){const e=t.grpc?"grpc":t.mcp?"mcp":"rest",n={id:t.id,name:t.name,protocol:e,url:"",variables:t.variables??[],creationTime:t.creationTime,executionTime:t.executionTime,executing:!1};if(t.grpc){const r=t.grpc;n.url=vD(r.server,r.service,r.method),n.grpc={schema:r.schema,body:r.body||"",metadata:[],response:r.response}}else if(t.mcp){const r=t.mcp;n.url=r.url,n.mcp={tool:r.tool,resource:r.resource,response:r.response}}else if(t.http){const r=t.http;n.url=r.url,n.http={method:r.method,query:r.query,headers:r.headers,body:r.body,request:null,response:r.response?{status:r.response.status,statusCode:r.response.statusCode,headers:r.response.headers,body:r.response.body?_D(r.response.body,r.response.bodyType):new Blob([]),duration:r.response.duration,error:r.response.error}:null}}return n}const gf="requests";async function wD(){const t=await fetch(`/data/${gf}`);if(!t.ok)throw new Error(`Failed to list entries: ${t.statusText}`);const e=await t.json();return(await Promise.all(e.map(async r=>{const s=await fetch(`/data/${gf}/${encodeURIComponent(r.id)}`);return s.ok?await s.json():null}))).filter(r=>r!==null)}async function A1(t){const e=await fetch(`/data/${gf}/${encodeURIComponent(t.id)}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!e.ok)throw new Error(`Failed to save request: ${e.statusText}`)}async function SD(t){const e=await fetch(`/data/${gf}/${encodeURIComponent(t)}`,{method:"DELETE"});if(!e.ok&&e.status!==404)throw new Error(`Failed to delete request: ${e.statusText}`)}const wk=new EO({defaultOptions:{queries:{staleTime:1/0,refetchOnWindowFocus:!1}}}),gn=hk(gD({queryKey:["requests"],queryFn:async()=>(await wD()).map(xD),getKey:t=>t.id,queryClient:wk,onInsert:async({transaction:t})=>{await Promise.all(t.mutations.map(async e=>{const n=e.modified,r=await T1(n);await A1(r)}))},onUpdate:async({transaction:t})=>{await Promise.all(t.mutations.map(async e=>{const n=e.modified,r=await T1(n);await A1(r)}))},onDelete:async({transaction:t})=>{await Promise.all(t.mutations.map(async e=>{const n=e.original;await SD(n.id)}))}}));async function kD(){Array.from(gn.state.keys()).forEach(e=>gn.delete(e))}function yf(t,e,n={}){const{missingDataPlaceholder:r=""}=n;let s=t;const a=/\{\{(\w+):([^}]+)\}\}/g;let l;for(;(l=a.exec(t))!==null;){const[u,f,h]=l,m=e.find(y=>y.type===f&&y.id===h);let p="";switch(f){case"file_base64":case"base64":p=m?.data||r;break;case"file_dataurl":m?.data&&m?.mimeType?p=`data:${m.mimeType};base64,${m.data}`:m?.data?p=`data:application/octet-stream;base64,${m.data}`:p=r;break;case"timestamp":p=String(Date.now());break;case"uuid":typeof crypto<"u"&&crypto.randomUUID?p=crypto.randomUUID():p="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,y=>{const g=Math.random()*16|0;return(y==="x"?g:g&3|8).toString(16)});break;case"random_string":p=Math.random().toString(36).substring(2,18);break;default:p=u}s=s.replace(u,p)}return s}function nm(){return{id:$n(),enabled:!0,key:"",value:""}}function Hu(t,e="rest"){const n={id:$n(),name:t||"New Request",protocol:e,url:"",variables:[],creationTime:Date.now(),executionTime:null,executing:!1};switch(e){case"grpc":n.grpc={body:"",metadata:[nm()]};break;case"mcp":n.mcp={};break;default:n.http={method:"GET",headers:[nm()],query:[nm()],body:{type:"none"},request:null,response:null};break}return n}const Sk=Q.createContext(null),ED={request:Hu(),sidebarCollapsed:!1,aiPanelOpen:!1};function CD({children:t}){const[e,n]=Q.useState(ED),{data:r=[]}=nD(q=>q.from({req:gn}).orderBy(({req:P})=>P.executionTime??P.creationTime,"desc")),s=Q.useCallback(q=>{n(P=>({...P,request:{...P.request,...q}}))},[]),a=Q.useCallback((q,P)=>{try{const U=new URL(q),z=U.protocol.replace(/:$/,""),F=U.host,se=U.pathname.replace(/^\//,""),Y=P.replace(/^\//,""),O=`/proxy/mcp/${z}/${F}/${Y}`;return se?`${O}?path=${encodeURIComponent(se)}`:O}catch{return""}},[]),l=Q.useCallback(q=>{n(P=>{const U=Hu(P.request.name,q);return U.id=P.request.id,U.url=P.request.url,{...P,request:U}})},[]),u=Q.useCallback(q=>{n(P=>({...P,request:{...P.request,http:{...P.request.http,method:q}}}))},[]),f=Q.useCallback(q=>{s({url:q})},[s]),h=Q.useCallback(q=>{n(P=>({...P,request:{...P.request,http:{...P.request.http,headers:q}}}))},[]),m=Q.useCallback(q=>{n(P=>({...P,request:{...P.request,http:{...P.request.http,query:q}}}))},[]),p=Q.useCallback(q=>{n(P=>({...P,request:{...P.request,http:P.request.http?{...P.request.http,body:q}:{method:"GET",headers:[],query:[],body:q,request:null,response:null}}}))},[]),y=Q.useCallback(q=>{s({variables:q})},[s]),g=Q.useCallback(q=>{n(P=>{const U=P.request.http?.request,F={...U?.options??{insecure:!1,redirect:!0},...q};return{...P,request:{...P.request,http:P.request.http?{...P.request.http,request:U?{...U,options:F}:null}:void 0}}})},[]),v=Q.useCallback(q=>{n(P=>({...P,request:{...P.request,grpc:P.request.grpc?{...P.request.grpc,body:q}:{body:q,metadata:[]}}}))},[]),x=Q.useCallback(q=>{n(P=>({...P,request:{...P.request,grpc:P.request.grpc?{...P.request.grpc,metadata:q}:{body:"",metadata:q}}}))},[]),E=Q.useCallback(q=>{n(P=>({...P,request:{...P.request,grpc:P.request.grpc?{...P.request.grpc,schema:q}:{body:"",metadata:[],schema:q}}}))},[]),S=Q.useCallback(q=>{n(P=>({...P,request:{...P.request,mcp:{tool:q,resource:void 0}}}))},[]),C=Q.useCallback(q=>{n(P=>({...P,request:{...P.request,mcp:{resource:q,tool:void 0}}}))},[]),T=Q.useCallback(async()=>{const q=e.request;if(!q.url)return null;s({executing:!0});try{const P=a(q.url,"features");if(!P)throw new Error("Invalid MCP server URL");const U=await fetch(P);if(!U.ok){const F=await U.text();throw new Error(F||`HTTP ${U.status}`)}const z=await U.json();return s({executing:!1}),z}catch(P){const U=P instanceof Error?P.message:"Unknown error";return s({executing:!1}),{tools:[],resources:[],error:U}}},[e.request,s,a]),L=Q.useCallback(()=>{n(q=>{const{protocol:P}=q.request;return P==="grpc"&&q.request.grpc?{...q,request:{...q.request,grpc:{...q.request.grpc,response:void 0}}}:P==="mcp"&&q.request.mcp?{...q,request:{...q.request,mcp:{...q.request.mcp,response:void 0}}}:q.request.http?{...q,request:{...q.request,http:{...q.request.http,response:null}}}:q})},[]),D=Q.useCallback(async()=>{const q=e.request;s({executing:!0});try{if(q.protocol==="grpc"){const ct=q.url.match(/^grpc:\/\/([^/]+)\/(.+)\/([^/]+)$/);if(!ct)throw new Error("Invalid gRPC URL format. Expected: grpc://host:port/service/method");const[,Ye,xn,wn]=ct,ge=q.grpc?.body??"{}",$e=yf(ge,q.variables),Oe={"Content-Type":"application/json"};(q.grpc?.metadata??[]).filter(et=>et.enabled&&et.key).forEach(et=>{Oe[et.key]=et.value});const xe=`/proxy/grpc/${Ye}/${xn}/${wn}`,We=performance.now(),ne=await fetch(xe,{method:"POST",headers:Oe,body:$e}),ue=Math.round(performance.now()-We),ye=await ne.text(),ve={};ne.headers.forEach((et,_t)=>{ve[_t]=et});const Te=Date.now(),gt={...q,executionTime:Te,executing:!1,grpc:{...q.grpc,body:ge,metadata:q.grpc?.metadata??[],response:{body:ye,metadata:ve,duration:ue,error:ne.ok?void 0:`HTTP ${ne.status}`}}};r.find(et=>et.id===q.id)?gn.update(q.id,et=>{Object.assign(et,gt)}):gn.insert(gt),n(et=>({...et,request:gt}));return}if(q.protocol==="mcp"){const De=q.url;if(!De)throw new Error("MCP server URL is required");const ct=performance.now();let Ye;if(q.mcp?.tool){let Oe={};if(q.mcp.tool.arguments)try{Oe=JSON.parse(q.mcp.tool.arguments)}catch{}const xe=a(De,"tool/call");if(!xe)throw new Error("Invalid MCP server URL");const We=await fetch(xe,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:q.mcp.tool.name,arguments:Oe})});if(!We.ok){const ue=await We.text();throw new Error(ue||`HTTP ${We.status}`)}Ye=await We.json()}else if(q.mcp?.resource){const Oe=a(De,"resource/call");if(!Oe)throw new Error("Invalid MCP server URL");const xe=await fetch(Oe,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({uri:q.mcp.resource.uri})});if(!xe.ok){const ne=await xe.text();throw new Error(ne||`HTTP ${xe.status}`)}Ye=await xe.json()}else throw new Error("No tool or resource selected");const xn=Math.round(performance.now()-ct),wn=Date.now(),ge={...q,executionTime:wn,executing:!1,mcp:{...q.mcp,response:{result:Ye,duration:xn}}};r.find(Oe=>Oe.id===q.id)?gn.update(q.id,Oe=>{Object.assign(Oe,ge)}):gn.insert(ge),n(Oe=>({...Oe,request:ge}));return}const P={};(q.http?.headers??[]).filter(De=>De.enabled&&De.key).forEach(De=>{P[De.key]=De.value});const U=new URLSearchParams,z=q.http?.method??"GET";(q.http?.query??[]).filter(De=>De.enabled&&De.key).forEach(De=>{U.append(De.key,De.value)});const F=q.http?.body??{type:"none"};let se,Y="",O=!1;switch(F.type){case"json":{se=yf(F.content,q.variables),Y=F.content,P["Content-Type"]||(P["Content-Type"]="application/json");break}case"form-urlencoded":{const De=new URLSearchParams;F.data.filter(ct=>ct.enabled&&ct.key).forEach(ct=>{De.append(ct.key,ct.value)}),se=De.toString(),Y=De.toString(),P["Content-Type"]||(P["Content-Type"]="application/x-www-form-urlencoded");break}case"form-data":{const De=new FormData,ct=[];F.data.filter(Ye=>Ye.enabled&&Ye.key).forEach(Ye=>{Ye.type==="file"&&Ye.file?(De.append(Ye.key,Ye.file,Ye.fileName),ct.push(`${Ye.key}: [File: ${Ye.fileName}]`)):Ye.type==="text"&&(De.append(Ye.key,Ye.value),ct.push(`${Ye.key}: ${Ye.value}`))}),se=De,Y=ct.join(`
`),O=!0;break}case"binary":{F.file&&(se=F.file,Y=`[Binary file: ${F.fileName}]`,P["Content-Type"]||(P["Content-Type"]=F.file.type||"application/octet-stream"));break}case"raw":se=F.content,Y=F.content,P["Content-Type"]||(P["Content-Type"]="text/plain");break}const I=q.http?.request?.options??{insecure:!1,redirect:!0};I.insecure&&(P["X-Prism-Insecure"]="true"),I.redirect&&(P["X-Prism-Redirect"]="true");const H=new URL(q.url);let R="/proxy/"+H.protocol.slice(0,-1)+"/"+H.host+H.pathname;const ae=U.toString();ae&&(R+="?"+ae);const me={method:z,url:q.url,headers:P,query:Object.fromEntries(U),body:Y,options:I},pe={...P};O&&delete pe["Content-Type"];const we=performance.now(),Ne=await fetch(R,{method:z,headers:pe,body:se&&z!=="GET"&&z!=="HEAD"?se:void 0}),Ie=Math.round(performance.now()-we),rt=await Ne.blob(),lt={};Ne.headers.forEach((De,ct)=>{lt[ct]=De});const Ct={status:Ne.statusText||String(Ne.status),statusCode:Ne.status,headers:lt,body:rt,duration:Ie},Wt=Date.now(),Tt={...q,executionTime:Wt,executing:!1,http:{...q.http,request:me,response:Ct}};r.find(De=>De.id===q.id)?gn.update(q.id,De=>{Object.assign(De,Tt)}):gn.insert(Tt),n(De=>({...De,request:Tt}))}catch(P){const U=Date.now(),z=P instanceof Error?P.message:"Unknown error";if(q.protocol==="grpc"){const F={...q,executionTime:U,executing:!1,grpc:{...q.grpc,response:{body:"",duration:0,error:z}}};r.find(Y=>Y.id===q.id)?gn.update(q.id,Y=>{Object.assign(Y,F)}):gn.insert(F),n(Y=>({...Y,request:F}))}else if(q.protocol==="mcp"){const F={...q,executionTime:U,executing:!1,mcp:{...q.mcp,response:{result:void 0,duration:0,error:z}}};r.find(Y=>Y.id===q.id)?gn.update(q.id,Y=>{Object.assign(Y,F)}):gn.insert(F),n(Y=>({...Y,request:F}))}else{const F={status:"",statusCode:0,headers:{},body:new Blob,duration:0,error:z},se={...q,executionTime:U,executing:!1,http:{...q.http,response:F}};r.find(O=>O.id===q.id)?gn.update(q.id,O=>{Object.assign(O,se)}):gn.insert(se),n(O=>({...O,request:se}))}}},[e.request,s,r,a]),N=Q.useCallback(q=>{const P=Hu(q.name,q.protocol??"rest");P.id=q.id,P.url=q.url,P.executionTime=q.executionTime,P.variables=(q.variables??[]).map(U=>({...U,id:$n()})),q.http&&(P.http={method:q.http.method,headers:q.http.headers.map(U=>({...U,id:$n()})),query:q.http.query.map(U=>({...U,id:$n()})),body:q.http.body,request:q.http.request,response:q.http.response},q.http.body.type==="form-urlencoded"?P.http.body={type:"form-urlencoded",data:q.http.body.data.map(U=>({...U,id:$n()}))}:q.http.body.type==="form-data"?P.http.body={type:"form-data",data:q.http.body.data.map(U=>({...U,id:$n(),file:null}))}:q.http.body.type==="binary"&&(P.http.body={type:"binary",file:null,fileName:q.http.body.fileName})),q.grpc&&(P.grpc={body:q.grpc.body,metadata:(q.grpc.metadata??[]).map(U=>({...U,id:$n()})),schema:q.grpc.schema,response:q.grpc.response}),q.mcp&&(P.mcp={...q.mcp}),n(U=>({...U,request:P}))},[]),B=Q.useCallback(async()=>{await kD()},[]),K=Q.useCallback(async q=>{gn.delete(q)},[]),G=Q.useCallback(()=>{n(q=>({...q,sidebarCollapsed:!q.sidebarCollapsed}))},[]),j=Q.useCallback(()=>{n(q=>({...q,aiPanelOpen:!q.aiPanelOpen}))},[]),J=Q.useCallback(()=>{n(q=>({...q,request:Hu()}))},[]),ie={request:e.request,history:r,sidebarCollapsed:e.sidebarCollapsed,aiPanelOpen:e.aiPanelOpen,setProtocol:l,setMethod:u,setUrl:f,setHeaders:h,setQuery:m,setBody:p,setVariables:y,setOptions:g,executeRequest:D,clearResponse:L,newRequest:J,setGrpcBody:v,setGrpcMetadata:x,setGrpcMethodSchema:E,setMcpTool:S,setMcpResource:C,discoverMcpFeatures:T,loadFromHistory:N,clearHistory:B,deleteHistoryEntry:K,toggleSidebar:G,toggleAiPanel:j};return w.jsx(Sk.Provider,{value:ie,children:t})}var TD=ZS();const kk=Q.createContext(null);function AD(t){const e=Ue.c(6),{children:n}=t,[r,s]=Q.useState(null);let a;e[0]===Symbol.for("react.memo_cache_sentinel")?(a=h=>{s(h)},e[0]=a):a=e[0];const l=a;let u;e[1]!==r?(u={portalTarget:r,setPortalTarget:l},e[1]=r,e[2]=u):u=e[2];let f;return e[3]!==n||e[4]!==u?(f=w.jsx(kk.Provider,{value:u,children:n}),e[3]=n,e[4]=u,e[5]=f):f=e[5],f}function Ek(){const t=Q.useContext(kk);if(!t)throw new Error("useRequestBarPortal must be used within RequestBarPortalProvider");return t}function RD(t){const e=Ue.c(3),{children:n}=t,{portalTarget:r}=Ek();if(!r)return null;let s;return e[0]!==n||e[1]!==r?(s=TD.createPortal(n,r),e[0]=n,e[1]=r,e[2]=s):s=e[2],s}function Fn(){const t=Q.useContext(Sk);if(!t)throw new Error("useClient must be used within a ClientProvider");return t}const OD=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ND=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),R1=t=>{const e=ND(t);return e.charAt(0).toUpperCase()+e.slice(1)},Ck=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),ID=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var MD={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const DD=Q.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:a,iconNode:l,...u},f)=>Q.createElement("svg",{ref:f,...MD,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:Ck("lucide",s),...!a&&!ID(u)&&{"aria-hidden":"true"},...u},[...l.map(([h,m])=>Q.createElement(h,m)),...Array.isArray(a)?a:[a]]));const Qe=(t,e)=>{const n=Q.forwardRef(({className:r,...s},a)=>Q.createElement(DD,{ref:a,iconNode:e,className:Ck(`lucide-${OD(R1(t))}`,`lucide-${t}`,r),...s}));return n.displayName=R1(t),n};const LD=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],jD=Qe("box",LD);const zD=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Tk=Qe("check",zD);const PD=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Zl=Qe("chevron-down",PD);const BD=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Ak=Qe("chevron-right",BD);const $D=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Rk=Qe("circle-alert",$D);const UD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],xy=Qe("circle-check",UD);const qD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],FD=Qe("circle-x",qD);const VD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Ok=Qe("circle",VD);const HD=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],_f=Qe("clock",HD);const GD=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Nk=Qe("eye",GD);const KD=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Ql=Qe("file-text",KD);const ZD=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}]],bf=Qe("file",ZD);const QD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],JD=Qe("globe",QD);const YD=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],Ik=Qe("hash",YD);const XD=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],WD=Qe("image",XD);const e3=[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]],t3=Qe("link-2",e3);const n3=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],vf=Qe("loader-circle",n3);const r3=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],s3=Qe("music",r3);const i3=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}],["path",{d:"m8 9 3 3-3 3",key:"12hl5m"}]],a3=Qe("panel-right-close",i3);const o3=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}],["path",{d:"m10 15-3-3 3-3",key:"1pgupc"}]],l3=Qe("panel-right-open",o3);const c3=[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]],O1=Qe("paperclip",c3);const u3=[["path",{d:"M12 22v-5",key:"1ega77"}],["path",{d:"M15 8V2",key:"18g5xt"}],["path",{d:"M17 8a1 1 0 0 1 1 1v4a4 4 0 0 1-4 4h-4a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1z",key:"1xoxul"}],["path",{d:"M9 8V2",key:"14iosj"}]],f3=Qe("plug",u3);const h3=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],N1=Qe("refresh-cw",h3);const d3=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],p3=Qe("search",d3);const m3=[["path",{d:"M3.714 3.048a.498.498 0 0 0-.683.627l2.843 7.627a2 2 0 0 1 0 1.396l-2.842 7.627a.498.498 0 0 0 .682.627l18-8.5a.5.5 0 0 0 0-.904z",key:"117uat"}],["path",{d:"M6 12h16",key:"s4cdu5"}]],g3=Qe("send-horizontal",m3);const y3=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],_3=Qe("send",y3);const b3=[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]],v3=Qe("server",b3);const x3=[["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 18h1.973a4 4 0 0 0 3.3-1.7l5.454-8.6a4 4 0 0 1 3.3-1.7H22",key:"1ailkh"}],["path",{d:"M2 6h1.972a4 4 0 0 1 3.6 2.2",key:"km57vx"}],["path",{d:"M22 18h-6.041a4 4 0 0 1-3.3-1.8l-.359-.45",key:"os18l9"}]],Mk=Qe("shuffle",x3);const w3=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Dl=Qe("sparkles",w3);const S3=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],k3=Qe("square",S3);const E3=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],th=Qe("trash-2",E3);const C3=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],T3=Qe("type",C3);const A3=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],R3=Qe("upload",A3);const O3=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],xf=Qe("wrench",O3);const N3=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],wy=Qe("x",N3);const I3=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],M3=Qe("zap",I3),D3={GET:"text-green-600 dark:text-green-400",POST:"text-yellow-600 dark:text-yellow-400",PUT:"text-blue-600 dark:text-blue-400",PATCH:"text-purple-600 dark:text-purple-400",DELETE:"text-red-600 dark:text-red-400",OPTIONS:"text-neutral-500 dark:text-neutral-400",HEAD:"text-neutral-500 dark:text-neutral-400"};function L3(t){const e=new Date(t),n=new Date;return e.toDateString()===n.toDateString()?e.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):e.toLocaleDateString([],{month:"short",day:"numeric"})}function j3(t){return t?t>=200&&t<300?"bg-green-500":t>=300&&t<400?"bg-yellow-500":t>=400&&t<500?"bg-orange-500":"bg-red-500":"bg-neutral-500"}function z3(t){try{return new URL(t.url).hostname}catch{return"Other"}}function P3(t){try{const e=new URL(t.url);return e.pathname+e.search}catch{return t.url}}function B3(t){return t.protocol==="grpc"?"gRPC":t.http?.method??"GET"}function $3(t){return t.protocol==="grpc"?"text-cyan-600 dark:text-cyan-400":D3[t.http?.method??"GET"]}function U3(t){const e=new Map;for(const n of t){const r=z3(n),s=e.get(r)||[];s.push(n),e.set(r,s)}return Array.from(e.entries()).map(([n,r])=>({hostname:n,entries:r,latestTimestamp:Math.max(...r.map(s=>s.executionTime??0))})).sort((n,r)=>r.latestTimestamp-n.latestTimestamp)}function q3(){const t=Ue.c(20),{history:e,sidebarCollapsed:n,loadFromHistory:r,deleteHistoryEntry:s,clearHistory:a,toggleSidebar:l}=Fn();let u;t[0]!==e?(u=U3(e),t[0]=e,t[1]=u):u=t[1];const f=u;if(e.length===0||n)return null;let h;t[2]===Symbol.for("react.memo_cache_sentinel")?(h=w.jsx("h1",{className:"text-sm font-semibold text-neutral-700 dark:text-neutral-200 pl-0.5",children:"Prism"}),t[2]=h):h=t[2];let m;t[3]!==a||t[4]!==e.length?(m=e.length>0&&w.jsx("button",{onClick:a,className:"p-1.5 rounded-lg hover:bg-neutral-100 dark:hover:bg-white/5 transition-colors",title:"Clear history",children:w.jsx(th,{className:"w-4 h-4 text-neutral-500 dark:text-neutral-400"})}),t[3]=a,t[4]=e.length,t[5]=m):m=t[5];let p;t[6]===Symbol.for("react.memo_cache_sentinel")?(p=w.jsx(l3,{className:"w-4 h-4 text-neutral-500 dark:text-neutral-400"}),t[6]=p):p=t[6];let y;t[7]!==l?(y=w.jsx("button",{onClick:l,className:"p-1.5 rounded-lg hover:bg-neutral-100 dark:hover:bg-white/5 transition-colors",title:"Hide sidebar",children:p}),t[7]=l,t[8]=y):y=t[8];let g;t[9]!==m||t[10]!==y?(g=w.jsxs("div",{className:"px-3 py-2.5 flex items-center justify-between gap-2",children:[h,w.jsxs("div",{className:"flex items-center gap-1",children:[m,y]})]}),t[9]=m,t[10]=y,t[11]=g):g=t[11];let v;t[12]!==s||t[13]!==f||t[14]!==e.length||t[15]!==r?(v=w.jsx("div",{className:"flex-1 overflow-y-auto px-2",children:e.length===0?w.jsx("div",{className:"px-2 py-8 text-center text-neutral-400 dark:text-neutral-600 text-xs",children:"No history yet"}):w.jsx("div",{className:"space-y-3 pb-2",children:f.map(E=>w.jsxs("div",{children:[w.jsx("div",{className:"px-2 py-1 text-[10px] font-medium text-neutral-400 dark:text-neutral-500 uppercase tracking-wider truncate",title:E.hostname,children:E.hostname}),w.jsx("div",{className:"space-y-0.5",children:E.entries.map(S=>w.jsxs("div",{className:"group flex items-center gap-2 px-3 py-1.5 rounded-lg hover:bg-neutral-100 dark:hover:bg-white/5 cursor-pointer transition-colors",onClick:()=>r(S),children:[w.jsx("span",{className:`w-1.5 h-1.5 rounded-full shrink-0 ${j3(S.http?.response?.statusCode??(S.grpc?.response?.error?0:S.grpc?.response?200:null)??(S.mcp?.response?.error?0:S.mcp?.response?200:null))}`}),w.jsx("span",{className:`text-[10px] font-semibold shrink-0 ${$3(S)}`,children:B3(S)}),w.jsx("span",{className:"text-xs text-neutral-500 dark:text-neutral-400 truncate flex-1",title:S.url,children:P3(S)}),w.jsxs("div",{className:"flex items-center justify-end text-[10px] text-neutral-400 dark:text-neutral-600 shrink-0 w-12 h-5",children:[w.jsx("span",{className:"group-hover:hidden",children:L3(S.executionTime??S.creationTime)}),w.jsx("button",{onClick:C=>{C.stopPropagation(),s(S.id)},className:"hidden group-hover:inline-flex items-center justify-center w-5 h-5 hover:bg-neutral-200 dark:hover:bg-white/8 rounded transition-colors",title:"Delete",children:w.jsx("svg",{className:"w-3 h-3 text-neutral-400 dark:text-neutral-500 hover:text-rose-500 dark:hover:text-rose-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]},S.id))})]},E.hostname))})}),t[12]=s,t[13]=f,t[14]=e.length,t[15]=r,t[16]=v):v=t[16];let x;return t[17]!==g||t[18]!==v?(x=w.jsxs("aside",{className:"w-64 bg-white dark:bg-[#1a1a1a]/60 dark:backdrop-blur-xl border border-neutral-200 dark:border-white/8 rounded-xl flex flex-col overflow-hidden dark:shadow-2xl",children:[g,v]}),t[17]=g,t[18]=v,t[19]=x):x=t[19],x}const rm=[{value:"rest",label:"HTTP",icon:JD},{value:"grpc",label:"gRPC",icon:v3},{value:"mcp",label:"MCP",icon:f3}];function F3(){const t=Ue.c(23),{request:e,setProtocol:n}=Fn(),r=e?.protocol??"rest",[s,a]=Q.useState(!1),l=Q.useRef(null);let u;t[0]!==r?(u=rm.find(T=>T.value===r)??rm[0],t[0]=r,t[1]=u):u=t[1];const f=u,h=f.icon;let m,p;t[2]===Symbol.for("react.memo_cache_sentinel")?(m=()=>{const T=L=>{l.current&&!l.current.contains(L.target)&&a(!1)};return document.addEventListener("mousedown",T),()=>document.removeEventListener("mousedown",T)},p=[],t[2]=m,t[3]=p):(m=t[2],p=t[3]),Q.useEffect(m,p);let y;t[4]!==s?(y=()=>a(!s),t[4]=s,t[5]=y):y=t[5];let g;t[6]!==h?(g=w.jsx(h,{className:"w-4 h-4"}),t[6]=h,t[7]=g):g=t[7];let v;t[8]!==f.label?(v=w.jsx("span",{className:"text-xs font-medium",children:f.label}),t[8]=f.label,t[9]=v):v=t[9];let x;t[10]===Symbol.for("react.memo_cache_sentinel")?(x=w.jsx(Zl,{className:"w-3 h-3"}),t[10]=x):x=t[10];let E;t[11]!==f.label||t[12]!==y||t[13]!==g||t[14]!==v?(E=w.jsxs("button",{type:"button",onClick:y,className:"flex items-center gap-1 px-2 py-1.5 rounded-md hover:bg-neutral-100 dark:hover:bg-white/10 transition-colors text-neutral-600 dark:text-neutral-400",title:f.label,children:[g,v,x]}),t[11]=f.label,t[12]=y,t[13]=g,t[14]=v,t[15]=E):E=t[15];let S;t[16]!==s||t[17]!==r||t[18]!==n?(S=s&&w.jsx("div",{className:"absolute top-full left-0 mt-1 bg-white dark:bg-[#1a1a1a] border border-neutral-200 dark:border-white/10 rounded-md shadow-lg z-50 min-w-28",children:rm.map(T=>{const L=T.icon;return w.jsxs("button",{type:"button",onClick:()=>{n(T.value),a(!1)},className:`w-full flex items-center gap-2 px-3 py-1.5 text-sm transition-colors ${r===T.value?"bg-neutral-100 dark:bg-white/10 text-neutral-900 dark:text-neutral-100":"text-neutral-600 dark:text-neutral-400 hover:bg-neutral-50 dark:hover:bg-white/5"}`,children:[w.jsx(L,{className:"w-4 h-4"}),T.label]},T.value)})}),t[16]=s,t[17]=r,t[18]=n,t[19]=S):S=t[19];let C;return t[20]!==E||t[21]!==S?(C=w.jsxs("div",{ref:l,className:"relative",children:[E,S]}),t[20]=E,t[21]=S,t[22]=C):C=t[22],C}let al={};async function V3(){try{const t=await fetch("/config.json");if(t.ok){const e=await t.json();al={...al,...e}}else console.warn("Failed to load config.json, using defaults");return al}catch(t){return console.warn("Error loading config:",t),al}}function Sy(){return al}function H3(){const t=Ue.c(17),{request:e,executeRequest:n,aiPanelOpen:r,toggleAiPanel:s}=Fn();let a;t[0]===Symbol.for("react.memo_cache_sentinel")?(a=Sy().ai?.model,t[0]=a):a=t[0];const l=!!a,u=e?.executing??!1,f=e?.protocol??"rest",h=e?.url??"",m=G3;let p;t[1]!==h?(p=m(h),t[1]=h,t[2]=p):p=t[2];const{host:y,service:g,method:v}=p,x=!!e?.mcp?.tool||!!e?.mcp?.resource,E=f==="rest"?h.length>0:f==="mcp"?h.length>0&&x:y.length>0&&g.length>0&&v.length>0;let S;t[3]!==n?(S=()=>{n()},t[3]=n,t[4]=S):S=t[4];const C=S,T=u||!E;let L;t[5]!==u?(L=u?w.jsxs("svg",{className:"w-4 h-4 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[w.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"3"}),w.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):w.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14 5l7 7m0 0l-7 7m7-7H3"})}),t[5]=u,t[6]=L):L=t[6];let D;t[7]!==C||t[8]!==T||t[9]!==L?(D=w.jsx("button",{type:"button",onClick:C,disabled:T,className:"p-1.5 hover:bg-neutral-100 dark:hover:bg-white/10 disabled:opacity-30 disabled:cursor-not-allowed rounded-md transition-colors text-neutral-500 dark:text-neutral-400 hover:text-neutral-700 dark:hover:text-neutral-200",title:"Send request",children:L}),t[7]=C,t[8]=T,t[9]=L,t[10]=D):D=t[10];let N;t[11]!==r||t[12]!==s?(N=l&&w.jsx("button",{type:"button",onClick:s,className:`p-1.5 hover:bg-neutral-100 dark:hover:bg-white/10 rounded-md transition-colors ${r?"text-amber-500 hover:text-amber-600":"text-neutral-500 dark:text-neutral-400 hover:text-neutral-700 dark:hover:text-neutral-200"}`,title:"AI Assistant",children:w.jsx(Dl,{className:"w-4 h-4"})}),t[11]=r,t[12]=s,t[13]=N):N=t[13];let B;return t[14]!==D||t[15]!==N?(B=w.jsxs(RD,{children:[D,N]}),t[14]=D,t[15]=N,t[16]=B):B=t[16],B}function G3(t){const e=t.match(/^grpc:\/\/([^/]*)(?:\/([^/]*)(?:\/([^/]*))?)?$/);return e?{host:e[1]||"",service:e[2]||"",method:e[3]||""}:{host:"",service:"",method:""}}const K3=["GET","POST","PUT","PATCH","DELETE","OPTIONS","HEAD"],Z3={GET:"text-emerald-600 dark:text-emerald-400",POST:"text-amber-600 dark:text-amber-400",PUT:"text-blue-600 dark:text-blue-400",PATCH:"text-purple-600 dark:text-purple-400",DELETE:"text-rose-600 dark:text-rose-400",OPTIONS:"text-neutral-500 dark:text-neutral-400",HEAD:"text-neutral-500 dark:text-neutral-400"};function Q3(){const t=Ue.c(15),{request:e,setUrl:n,setMethod:r}=Fn(),s=e?.http?.method??"GET",a=e?.url??"";let l;t[0]!==r?(l=g=>r(g.target.value),t[0]=r,t[1]=l):l=t[1];const u=`px-2 py-1 bg-transparent font-semibold text-xs focus:outline-none cursor-pointer ${Z3[s]}`;let f;t[2]===Symbol.for("react.memo_cache_sentinel")?(f=K3.map(J3),t[2]=f):f=t[2];let h;t[3]!==s||t[4]!==l||t[5]!==u?(h=w.jsx("select",{value:s,onChange:l,className:u,children:f}),t[3]=s,t[4]=l,t[5]=u,t[6]=h):h=t[6];let m;t[7]!==n?(m=g=>n(g.target.value),t[7]=n,t[8]=m):m=t[8];let p;t[9]!==m||t[10]!==a?(p=w.jsx("input",{type:"text",value:a,onChange:m,placeholder:"Enter request URL",className:"flex-1 px-3 py-1.5 bg-transparent text-neutral-800 dark:text-neutral-100 text-sm placeholder-neutral-400 dark:placeholder-neutral-600 focus:outline-none"}),t[9]=m,t[10]=a,t[11]=p):p=t[11];let y;return t[12]!==h||t[13]!==p?(y=w.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[h,p]}),t[12]=h,t[13]=p,t[14]=y):y=t[14],y}function J3(t){return w.jsx("option",{value:t,className:"bg-white dark:bg-[#1a1a1a]",children:t},t)}function I1(){return Math.random().toString(36).substring(2,9)}function Gu(t){const e=Ue.c(32),{items:n,onChange:r,keyPlaceholder:s,valuePlaceholder:a,keySuggestions:l}=t,u=s===void 0?"Key":s,f=a===void 0?"Value":a;let h;e[0]!==l?(h=l===void 0?[]:l,e[0]=l,e[1]=h):h=e[1];const m=h,[p,y]=Q.useState(null),[g,v]=Q.useState("");let x;e[2]!==n||e[3]!==r?(x=(B,K,G)=>{const j=n.map(ie=>ie.id===B?{...ie,[K]:G}:ie),J=j[j.length-1];J&&(J.key||J.value)&&j.push({id:I1(),enabled:!0,key:"",value:""}),r(j)},e[2]=n,e[3]=r,e[4]=x):x=e[4];const E=x;let S;e[5]!==n||e[6]!==r?(S=B=>{if(n.length===1){r([{id:I1(),enabled:!0,key:"",value:""}]);return}r(n.filter(K=>K.id!==B))},e[5]=n,e[6]=r,e[7]=S):S=e[7];const C=S;let T;e[8]!==n||e[9]!==m?(T=B=>{const K=n.map(Y3);return m.filter(G=>G.toLowerCase().includes(B.toLowerCase())&&!K.includes(G.toLowerCase()))},e[8]=n,e[9]=m,e[10]=T):T=e[10];const L=T;let D;if(e[11]!==p||e[12]!==g||e[13]!==L||e[14]!==n||e[15]!==u||e[16]!==m||e[17]!==C||e[18]!==E||e[19]!==f){let B;e[21]!==p||e[22]!==g||e[23]!==L||e[24]!==u||e[25]!==m||e[26]!==C||e[27]!==E||e[28]!==f?(B=K=>w.jsxs("tr",{className:`border-b border-neutral-100 dark:border-white/5 last:border-0 ${K.enabled?"":"opacity-40"}`,children:[w.jsx("td",{className:"w-8 pl-2.5 py-1.5",children:w.jsx("button",{type:"button",onClick:()=>E(K.id,"enabled",!K.enabled),className:"p-0.5 rounded transition-colors",children:K.enabled?w.jsx(xy,{className:"w-3.5 h-3.5 text-neutral-700 dark:text-neutral-300"}):w.jsx(Ok,{className:"w-3.5 h-3.5 text-neutral-300 dark:text-neutral-600"})})}),w.jsx("td",{className:"px-1.5 py-1.5",children:w.jsxs("div",{className:"relative",children:[w.jsx("input",{type:"text",value:K.key,onChange:G=>{E(K.id,"key",G.target.value),v(G.target.value)},onFocus:()=>{y(K.id),v(K.key)},onBlur:()=>{setTimeout(()=>y(null),150)},placeholder:u,className:"w-full px-2 py-1 bg-white dark:bg-white/5 border border-neutral-300 dark:border-white/10 rounded text-xs text-neutral-800 dark:text-neutral-100 placeholder-neutral-400 dark:placeholder-neutral-500 focus:outline-none focus:border-neutral-400 dark:focus:border-white/20 transition-colors"}),m.length>0&&p===K.id&&(()=>{const G=L(g);return G.length===0?null:w.jsx("div",{className:"absolute z-50 left-0 right-0 top-full mt-1 bg-white dark:bg-[#1a1a1a] border border-neutral-200 dark:border-white/10 rounded-md shadow-lg max-h-48 overflow-y-auto",children:G.map(j=>w.jsx("button",{type:"button",onMouseDown:J=>{J.preventDefault(),E(K.id,"key",j),y(null)},className:"w-full px-2 py-1.5 text-left text-xs text-neutral-600 dark:text-neutral-300 hover:bg-neutral-100 dark:hover:bg-white/10 transition-colors",children:j},j))})})()]})}),w.jsx("td",{className:"px-1.5 py-1.5",children:w.jsx("input",{type:"text",value:K.value,onChange:G=>E(K.id,"value",G.target.value),placeholder:f,className:"w-full px-2 py-1 bg-white dark:bg-white/5 border border-neutral-300 dark:border-white/10 rounded text-xs text-neutral-800 dark:text-neutral-100 placeholder-neutral-400 dark:placeholder-neutral-500 focus:outline-none focus:border-neutral-400 dark:focus:border-white/20 transition-colors"})}),w.jsx("td",{className:"w-8 pr-1.5 py-1.5",children:w.jsx("button",{type:"button",onClick:()=>C(K.id),className:"p-1 text-neutral-400 dark:text-neutral-500 hover:text-rose-500 dark:hover:text-rose-400 hover:bg-neutral-100 dark:hover:bg-white/5 rounded transition-colors",children:w.jsx(th,{className:"w-3.5 h-3.5"})})})]},K.id),e[21]=p,e[22]=g,e[23]=L,e[24]=u,e[25]=m,e[26]=C,e[27]=E,e[28]=f,e[29]=B):B=e[29],D=n.map(B),e[11]=p,e[12]=g,e[13]=L,e[14]=n,e[15]=u,e[16]=m,e[17]=C,e[18]=E,e[19]=f,e[20]=D}else D=e[20];let N;return e[30]!==D?(N=w.jsx("div",{children:w.jsx("table",{className:"w-full",children:w.jsx("tbody",{children:D})})}),e[30]=D,e[31]=N):N=e[31],N}function Y3(t){return t.key.toLowerCase()}function X3(){return Math.random().toString(36).substring(2,9)}function M1(){return{id:X3(),enabled:!0,key:"",type:"text",value:"",file:null,fileName:""}}function W3(t){const e=Ue.c(21),{items:n,onChange:r,keyPlaceholder:s,valuePlaceholder:a}=t,l=s===void 0?"Field":s,u=a===void 0?"Value":a;let f;e[0]===Symbol.for("react.memo_cache_sentinel")?(f={},e[0]=f):f=e[0];const h=Q.useRef(f);let m;e[1]!==n||e[2]!==r?(m=(D,N)=>{const B=n.map(G=>G.id===D?{...G,...N}:G),K=B[B.length-1];K&&(K.key||K.value||K.file)&&B.push(M1()),r(B)},e[1]=n,e[2]=r,e[3]=m):m=e[3];const p=m;let y;e[4]!==n||e[5]!==r?(y=D=>{if(n.length===1){r([M1()]);return}r(n.filter(N=>N.id!==D))},e[4]=n,e[5]=r,e[6]=y):y=e[6];const g=y;let v;e[7]!==p?(v=(D,N)=>{const B=N.target.files?.[0]??null;N.target.value="",B&&p(D,{type:"file",file:B,fileName:B.name,value:""})},e[7]=p,e[8]=v):v=e[8];const x=v;let E;e[9]!==p?(E=D=>{p(D,{type:"text",file:null,fileName:""})},e[9]=p,e[10]=E):E=e[10];const S=E,C=eL;let T;e[11]!==S||e[12]!==x||e[13]!==n||e[14]!==l||e[15]!==g||e[16]!==p||e[17]!==u?(T=n.map(D=>w.jsxs("tr",{className:`border-b border-neutral-100 dark:border-white/5 last:border-0 ${D.enabled?"":"opacity-40"}`,children:[w.jsx("td",{className:"w-8 pl-2.5 py-1.5",children:w.jsx("button",{type:"button",onClick:()=>p(D.id,{enabled:!D.enabled}),className:"p-0.5 rounded transition-colors",children:D.enabled?w.jsx(xy,{className:"w-3.5 h-3.5 text-neutral-700 dark:text-neutral-300"}):w.jsx(Ok,{className:"w-3.5 h-3.5 text-neutral-300 dark:text-neutral-600"})})}),w.jsx("td",{className:"px-1.5 py-1.5 w-36",children:w.jsx("input",{type:"text",value:D.key,onChange:N=>p(D.id,{key:N.target.value}),placeholder:l,className:"w-full px-2 py-1 bg-white dark:bg-white/5 border border-neutral-300 dark:border-white/10 rounded text-xs text-neutral-800 dark:text-neutral-100 placeholder-neutral-400 dark:placeholder-neutral-500 focus:outline-none focus:border-neutral-400 dark:focus:border-white/20 transition-colors"})}),w.jsxs("td",{className:"px-1.5 py-1.5",children:[w.jsx("input",{type:"file",ref:N=>{h.current[D.id]=N},onChange:N=>x(D.id,N),className:"hidden"}),D.type==="file"&&D.file?w.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 bg-neutral-100 dark:bg-white/10 rounded text-xs text-neutral-600 dark:text-neutral-300",children:[w.jsx(O1,{className:"w-3 h-3 shrink-0"}),w.jsx("span",{className:"truncate max-w-xs",children:D.fileName}),w.jsxs("span",{className:"text-neutral-400 shrink-0",children:["(",C(D.file.size),")"]}),w.jsx("button",{type:"button",onClick:()=>S(D.id),className:"p-0.5 ml-1 text-neutral-400 hover:text-neutral-600 dark:hover:text-neutral-200 transition-colors shrink-0",children:w.jsx(wy,{className:"w-3 h-3"})})]}):w.jsx("input",{type:"text",value:D.value,onChange:N=>p(D.id,{value:N.target.value}),placeholder:u,className:"w-full px-2 py-1 bg-white dark:bg-white/5 border border-neutral-300 dark:border-white/10 rounded text-xs text-neutral-800 dark:text-neutral-100 placeholder-neutral-400 dark:placeholder-neutral-500 focus:outline-none focus:border-neutral-400 dark:focus:border-white/20 transition-colors"})]}),w.jsx("td",{className:"w-16 pr-1.5 py-1.5",children:w.jsxs("div",{className:"flex items-center gap-0.5",children:[w.jsx("button",{type:"button",onClick:()=>h.current[D.id]?.click(),className:`p-1 rounded transition-colors ${D.type==="file"?"text-blue-500 dark:text-blue-400 bg-blue-50 dark:bg-blue-500/10":"text-neutral-400 dark:text-neutral-500 hover:text-neutral-600 dark:hover:text-neutral-300 hover:bg-neutral-100 dark:hover:bg-white/5"}`,title:"Attach file",children:w.jsx(O1,{className:"w-3.5 h-3.5"})}),w.jsx("button",{type:"button",onClick:()=>g(D.id),className:"p-1 text-neutral-400 dark:text-neutral-500 hover:text-rose-500 dark:hover:text-rose-400 hover:bg-neutral-100 dark:hover:bg-white/5 rounded transition-colors",children:w.jsx(th,{className:"w-3.5 h-3.5"})})]})})]},D.id)),e[11]=S,e[12]=x,e[13]=n,e[14]=l,e[15]=g,e[16]=p,e[17]=u,e[18]=T):T=e[18];let L;return e[19]!==T?(L=w.jsx("div",{children:w.jsx("table",{className:"w-full",children:w.jsx("tbody",{children:T})})}),e[19]=T,e[20]=L):L=e[20],L}function eL(t){return t<1024?`${t} B`:t<1048576?`${(t/1024).toFixed(1)} KB`:`${(t/1048576).toFixed(1)} MB`}function tL(t){const e=Ue.c(12),{file:n,fileName:r,onFileChange:s}=t,a=Q.useRef(null);let l;e[0]!==s?(l=v=>{s(v,v?.name??"")},e[0]=s,e[1]=l):l=e[1];const u=l,f=rL,h=nL;let m;e[2]!==u?(m=w.jsx("input",{type:"file",ref:a,onChange:v=>u(v.target.files?.[0]??null),className:"hidden"}),e[2]=u,e[3]=m):m=e[3];let p;e[4]!==n||e[5]!==r||e[6]!==s?(p=n?w.jsxs("div",{className:"flex items-center gap-3 p-3 bg-neutral-100 dark:bg-white/5 rounded-lg border border-neutral-200 dark:border-white/10",children:[w.jsx("div",{className:"flex items-center justify-center w-10 h-10 bg-white dark:bg-white/10 rounded-lg text-xl",children:h(n.type)}),w.jsxs("div",{className:"flex-1 min-w-0",children:[w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx(Ql,{className:"w-4 h-4 text-neutral-500 dark:text-neutral-400 shrink-0"}),w.jsx("p",{className:"text-sm font-medium text-neutral-800 dark:text-neutral-100 truncate",children:r})]}),w.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[w.jsx("span",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:f(n.size)}),w.jsx("span",{className:"text-xs text-neutral-400 dark:text-neutral-500",children:""}),w.jsx("span",{className:"text-xs text-neutral-500 dark:text-neutral-400 truncate",children:n.type||"application/octet-stream"})]})]}),w.jsxs("div",{className:"flex items-center gap-1",children:[w.jsx("button",{type:"button",onClick:()=>a.current?.click(),className:"px-2 py-1 text-xs text-neutral-600 dark:text-neutral-300 hover:bg-neutral-200 dark:hover:bg-white/10 rounded transition-colors",children:"Change"}),w.jsx("button",{type:"button",onClick:()=>s(null,""),className:"p-1 text-neutral-400 dark:text-neutral-500 hover:text-rose-500 dark:hover:text-rose-400 hover:bg-neutral-200 dark:hover:bg-white/10 rounded transition-colors",children:w.jsx(wy,{className:"w-4 h-4"})})]})]}):w.jsxs("div",{onClick:()=>a.current?.click(),className:"flex flex-col items-center justify-center p-8 border-2 border-dashed border-neutral-300 dark:border-white/20 rounded-lg cursor-pointer hover:border-neutral-400 dark:hover:border-white/30 hover:bg-neutral-50 dark:hover:bg-white/5 transition-colors",children:[w.jsx(R3,{className:"w-8 h-8 text-neutral-400 dark:text-neutral-500 mb-2"}),w.jsx("p",{className:"text-sm text-neutral-600 dark:text-neutral-300 mb-1",children:"Click to select a file"}),w.jsx("p",{className:"text-xs text-neutral-400 dark:text-neutral-500",children:"or drag and drop"})]}),e[4]=n,e[5]=r,e[6]=s,e[7]=p):p=e[7];let y;e[8]===Symbol.for("react.memo_cache_sentinel")?(y=w.jsx("p",{className:"text-xs text-neutral-400 dark:text-neutral-500",children:"The file will be sent as the raw request body. Content-Type will be set automatically based on the file type."}),e[8]=y):y=e[8];let g;return e[9]!==m||e[10]!==p?(g=w.jsxs("div",{className:"space-y-3",children:[m,p,y]}),e[9]=m,e[10]=p,e[11]=g):g=e[11],g}function nL(t){return t.startsWith("image/")?"":t.startsWith("video/")?"":t.startsWith("audio/")?"":t.includes("pdf")?"":t.includes("zip")||t.includes("tar")||t.includes("gzip")?"":t.includes("json")||t.includes("xml")||t.includes("text")?"":""}function rL(t){return t<1024?`${t} B`:t<1048576?`${(t/1024).toFixed(1)} KB`:t<1073741824?`${(t/1048576).toFixed(1)} MB`:`${(t/1073741824).toFixed(2)} GB`}function sL(t){const e=Ue.c(9),{value:n,onChange:r,placeholder:s}=t,a=Q.useRef(null);let l;e[0]===Symbol.for("react.memo_cache_sentinel")?(l=()=>{const m=a.current;if(!m)return;m.style.height="auto";const p=Math.min(m.scrollHeight,160);m.style.height=`${p}px`},e[0]=l):l=e[0];let u;e[1]!==n?(u=[n],e[1]=n,e[2]=u):u=e[2],Q.useEffect(l,u);let f;e[3]!==r?(f=m=>r(m.target.value),e[3]=r,e[4]=f):f=e[4];let h;return e[5]!==s||e[6]!==f||e[7]!==n?(h=w.jsx("textarea",{ref:a,value:n,onChange:f,placeholder:s,spellCheck:!1,rows:3,className:"w-full font-mono text-xs text-neutral-800 dark:text-neutral-100 bg-transparent focus:outline-none placeholder-neutral-400 dark:placeholder-neutral-600 resize-none overflow-auto"}),e[5]=s,e[6]=f,e[7]=n,e[8]=h):h=e[8],h}function D1(t){const e=[],n=/\{\{(\w+):([^{}]+)\}\}/g;let r;for(;(r=n.exec(t))!==null;)e.push({start:r.index,end:r.index+r[0].length,type:r[1],id:r[2],full:r[0]});return e}function Ku(t){if(t.nodeType===Node.TEXT_NODE)return(t.textContent||"").replace(/\u200B/g,"");if(t.classList?.contains("variable-chip"))return t.dataset.marker||"";if(t.tagName==="BR")return`
`;let e="";const n=t.tagName==="DIV"||t.tagName==="P";for(const r of t.childNodes)e+=Ku(r);return n&&e&&!e.endsWith(`
`)&&(e+=`
`),e}function Dk(t,e){if(e.rangeCount===0)return"";const n=e.getRangeAt(0),r=n.startContainer,s=n.startOffset;let a="",l=!1;function u(f){if(!l){if(f===r)if(f.nodeType===Node.TEXT_NODE){a+=(f.textContent||"").slice(0,s).replace(/\u200B/g,""),l=!0;return}else{const h=f.childNodes;for(let m=0;m<s;m++)if(u(h[m]),l)return;l=!0;return}if(f.nodeType===Node.TEXT_NODE)a+=(f.textContent||"").replace(/\u200B/g,"");else if(f.nodeType===Node.ELEMENT_NODE){const h=f;if(h.classList.contains("variable-chip")){if(h.contains(r)){l=!0;return}a+=h.dataset.marker||""}else if(h.tagName==="BR")a+=`
`;else if(h.tagName==="DIV"||h.tagName==="P"){for(const m of Array.from(h.childNodes))if(u(m),l)return;a&&!a.endsWith(`
`)&&(a+=`
`)}else for(const m of Array.from(h.childNodes))if(u(m),l)return}}}return u(t),a}function iL(t){const e=window.getSelection();return!e||e.rangeCount===0||!t.contains(e.anchorNode)?null:Dk(t,e).length}function aL(t,e){let n=0,r=!1;function s(a){if(!r){if(a.nodeType===Node.TEXT_NODE){const l=a.textContent||"",f=l.replace(/\u200B/g,"").length;if(n+f>=e){const h=e-n;let m=0,p=0;for(;p<h&&m<l.length;)l[m]!==""&&p++,m++;const y=document.createRange();y.setStart(a,m),y.setEnd(a,m);const g=window.getSelection();g?.removeAllRanges(),g?.addRange(y),r=!0;return}n+=f}else if(a.nodeType===Node.ELEMENT_NODE){const l=a;if(l.classList.contains("variable-chip")){const u=(l.dataset.marker||"").length;n+=u}else if(l.tagName==="BR")n+=1;else{const u=l.tagName==="DIV"||l.tagName==="P";for(const f of Array.from(a.childNodes))if(s(f),r)return;u&&n<e&&(n+=1)}}}}s(t)}function oL(t,e,n){switch(t){case"file_base64":case"file_dataurl":return n?.data?n.name||"file":"Select file...";default:return n?.name||t}}function lL(t){const e="w-3 h-3";switch(t){case"file_base64":case"file_dataurl":return`<svg class="${e}" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/></svg>`;case"base64":return`<svg class="${e}" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="4" y1="9" x2="20" y2="9"/><line x1="4" y1="15" x2="20" y2="15"/><line x1="10" y1="3" x2="8" y2="21"/><line x1="16" y1="3" x2="14" y2="21"/></svg>`;case"timestamp":return`<svg class="${e}" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>`;case"uuid":return`<svg class="${e}" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"/><path d="M5 3v4"/><path d="M9 5H1"/></svg>`;case"random_string":return`<svg class="${e}" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M2 18h1.4c1.3 0 2.5-.6 3.3-1.7l14.2-12.6c.8-1.1 2-1.7 3.3-1.7H22"/><path d="M2 6h1.4c1.3 0 2.5.6 3.3 1.7l14.2 12.6c.8 1.1 2 1.7 3.3 1.7H22"/></svg>`;default:return""}}function L1(t,e,n,r){const s=r.find(m=>m.type===t&&m.id===e),a=t==="file_base64"||t==="file_dataurl"||t==="base64",l=s&&s.data,u=document.createElement("span");u.contentEditable="false",u.className=`variable-chip inline-flex items-center gap-1 px-1.5 py-0.5 mx-0.5 rounded text-xs font-medium align-baseline select-none ${a&&!l?"bg-amber-500/20 text-amber-300 border border-amber-500/30":"bg-blue-500/20 text-blue-300 border border-blue-500/30"} ${a?"cursor-pointer hover:bg-blue-500/30":""}`,u.dataset.marker=n,u.dataset.variableType=t,u.dataset.variableId=e;const f=document.createElement("span");f.className="chip-icon",f.innerHTML=lL(t),u.appendChild(f);const h=document.createElement("span");return h.className="chip-label",h.textContent=oL(t,e,s),u.appendChild(h),u}function Lk(t){const e=Ue.c(40),{editorRef:n,value:r,onChange:s,variables:a,onVariablesChange:l,indentTriggers:u}=t;let f;e[0]!==u?(f=u===void 0?["{","["]:u,e[0]=u,e[1]=f):f=e[1];const h=f,m=Q.useRef(""),p=Q.useRef(!1),y=Q.useRef(!1);let g;e[2]!==s||e[3]!==l||e[4]!==a?(g=Y=>{const O=Ku(Y);m.current=O,p.current=!0,s(O);const I=new Set(D1(O).map(fL)),H=a.filter(R=>I.has(R.id));H.length!==a.length&&(y.current=!0,l(H))},e[2]=s,e[3]=l,e[4]=a,e[5]=g):g=e[5];const v=g,[x,E]=Q.useState(!1);let S;e[6]===Symbol.for("react.memo_cache_sentinel")?(S={top:0,left:0},e[6]=S):S=e[6];const[C,T]=Q.useState(S),L=uL;let D;e[7]!==n||e[8]!==r||e[9]!==a?(D=()=>{const Y=n.current;if(!Y)return;const O=iL(Y),I=D1(r);Y.innerHTML="";let H=0;for(const ae of I){const me=r.slice(H,ae.start);me&&L(Y,me);const pe=L1(ae.type,ae.id,ae.full,a);Y.appendChild(pe),Y.appendChild(document.createTextNode("")),H=ae.end}const R=r.slice(H);R&&L(Y,R),Y.childNodes.length===0&&Y.appendChild(document.createElement("br")),m.current=r,O!==null&&aL(Y,O)},e[7]=n,e[8]=r,e[9]=a,e[10]=D):D=e[10];const N=D;let B,K;e[11]!==N||e[12]!==r?(B=()=>{!p.current&&r!==m.current&&N(),p.current=!1},K=[r,N],e[11]=N,e[12]=r,e[13]=B,e[14]=K):(B=e[13],K=e[14]),Q.useEffect(B,K);let G;e[15]!==N?(G=()=>{y.current?y.current=!1:N()},e[15]=N,e[16]=G):G=e[16];let j;e[17]!==N||e[18]!==a?(j=[a,N],e[17]=N,e[18]=a,e[19]=j):j=e[19],Q.useEffect(G,j);let J;e[20]!==n||e[21]!==v?(J=()=>{const Y=n.current;if(!Y)return;const O=Ku(Y),I=window.getSelection();if(I&&I.rangeCount>0){const H=I.getRangeAt(0);if(H.startContainer.nodeType===Node.TEXT_NODE){const R=H.startContainer.textContent||"",ae=H.startOffset;if(ae>=2&&R.slice(ae-2,ae)==="{{"){const me=H.getBoundingClientRect();T({top:me.bottom+4,left:me.left}),E(!0)}else E(!1)}}O!==m.current&&v(Y)},e[20]=n,e[21]=v,e[22]=J):J=e[22];const ie=J,q=cL;let P;e[23]!==n||e[24]!==h||e[25]!==x||e[26]!==v?(P=Y=>{if(x){Y.key==="Escape"&&(E(!1),Y.preventDefault());return}if(Y.key==="Backspace"){const O=window.getSelection();if(O&&O.rangeCount>0&&O.isCollapsed){const I=O.getRangeAt(0),H=I.startContainer,R=I.startOffset;if(H.nodeType===Node.TEXT_NODE&&R===1&&H.textContent?.charAt(0)===""){const ae=H.previousSibling;if(ae&&ae.classList?.contains("variable-chip")){Y.preventDefault();const me=ae,pe=me.parentNode;pe?.removeChild(me),pe?.removeChild(H);const we=n.current;we&&v(we);return}}if(R===0){let ae=H.previousSibling;if(ae?.nodeType===Node.TEXT_NODE&&ae.textContent===""&&(ae=ae.previousSibling),ae&&ae.classList?.contains("variable-chip")){Y.preventDefault();const me=ae,pe=me.nextSibling,we=me.parentNode;we?.removeChild(me),pe?.nodeType===Node.TEXT_NODE&&pe.textContent===""&&we?.removeChild(pe);const Ne=n.current;Ne&&v(Ne);return}}}}if(Y.key==="Tab"&&(Y.preventDefault(),document.execCommand("insertText",!1,"  ")),Y.key==="Enter"){Y.preventDefault();const O=n.current,I=window.getSelection();let H="";if(O&&I&&I.rangeCount>0){const me=Dk(O,I),pe=me.lastIndexOf(`
`),we=me.slice(pe+1),Ne=we.match(/^(\s*)/);H=Ne?Ne[1]:"";const rt=we.trimEnd().slice(-1);h.includes(rt)&&(H=H+"  ")}const R=document.createElement("br"),ae=I?.getRangeAt(0);ae&&(ae.deleteContents(),ae.insertNode(R),ae.setStartAfter(R),ae.setEndAfter(R),I?.removeAllRanges(),I?.addRange(ae),H&&document.execCommand("insertText",!1,H))}},e[23]=n,e[24]=h,e[25]=x,e[26]=v,e[27]=P):P=e[27];const U=P;let z;e[28]!==n||e[29]!==s||e[30]!==l||e[31]!==a?(z=Y=>{E(!1);const O=n.current;if(!O)return;const I=window.getSelection();if(!I||I.rangeCount===0)return;const H=I.getRangeAt(0);if(H.startContainer.nodeType!==Node.TEXT_NODE)return;const R=H.startContainer,ae=H.startOffset,me=R.textContent||"";R.textContent=me.slice(0,ae-2)+me.slice(ae);const pe=Math.random().toString(36).substring(2,9),we=Y==="file_base64"||Y==="file_dataurl"?"file":Y,Ne=`{{${Y}:${pe}}}`,Ie=L1(Y,pe,Ne,a),rt=ae-2;H.setStart(R,rt),H.setEnd(R,rt),H.insertNode(Ie);const lt=document.createTextNode("");Ie.after(lt),H.setStart(lt,1),H.setEnd(lt,1),I.removeAllRanges(),I.addRange(H),y.current=!0,l([...a,{id:pe,type:Y,name:we}]);const Ct=Ku(O);return m.current=Ct,p.current=!0,s(Ct),pe},e[28]=n,e[29]=s,e[30]=l,e[31]=a,e[32]=z):z=e[32];const F=z;let se;return e[33]!==N||e[34]!==ie||e[35]!==U||e[36]!==F||e[37]!==x||e[38]!==C?(se={handleInput:ie,handlePaste:q,handleKeyDown:U,insertVariable:F,showTypeMenu:x,setShowTypeMenu:E,typeMenuPosition:C,buildDOM:N},e[33]=N,e[34]=ie,e[35]=U,e[36]=F,e[37]=x,e[38]=C,e[39]=se):se=e[39],se}function cL(t){t.preventDefault();const e=t.clipboardData.getData("text/plain");document.execCommand("insertText",!1,e)}function uL(t,e){e.split(`
`).forEach((r,s)=>{s>0&&t.appendChild(document.createElement("br")),r&&t.appendChild(document.createTextNode(r))})}function fL(t){return t.id}const hL=[{type:"file_base64",label:"File (Base64)",description:"Select a file to encode",icon:w.jsx(bf,{className:"w-3.5 h-3.5"})},{type:"file_dataurl",label:"File (Data URL)",description:"File as data:... URL",icon:w.jsx(bf,{className:"w-3.5 h-3.5"})},{type:"base64",label:"Text (Base64)",description:"Text to encode",icon:w.jsx(Ik,{className:"w-3.5 h-3.5"})},{type:"timestamp",label:"Timestamp",description:"Unix timestamp",icon:w.jsx(_f,{className:"w-3.5 h-3.5"})},{type:"uuid",label:"UUID",description:"Random UUID",icon:w.jsx(Dl,{className:"w-3.5 h-3.5"})},{type:"random_string",label:"Random String",description:"16-char random",icon:w.jsx(Mk,{className:"w-3.5 h-3.5"})}];function ky({value:t,onChange:e,variables:n,onVariablesChange:r,placeholder:s,action:a}){const l=Q.useRef(null),u=Q.useRef(null),{handleInput:f,handlePaste:h,handleKeyDown:m,insertVariable:p,showTypeMenu:y,setShowTypeMenu:g,typeMenuPosition:v,buildDOM:x}=Lk({editorRef:l,value:t,onChange:e,variables:n,onVariablesChange:r,indentTriggers:["{","["]}),[E,S]=Q.useState(null),[C,T]=Q.useState(""),L=Q.useRef(!1),D=Q.useRef(null),N=Q.useMemo(()=>{if(!t.trim())return{valid:!0,empty:!0};try{let U=t;return U=U.replace(/"\{\{[^{}]+\}\}"/g,'"__var__"'),U=U.replace(/\{\{[^{}]+\}\}/g,"null"),JSON.parse(U),{valid:!0,empty:!1}}catch(U){return{valid:!1,empty:!1,error:U instanceof Error?U.message:"Invalid JSON"}}},[t]),[B,K]=Q.useState(!1),G=Q.useMemo(()=>yf(t,n,{missingDataPlaceholder:"[no data]"}),[t,n]);Q.useEffect(()=>(D.current&&(clearTimeout(D.current),D.current=null),N.valid&&!N.empty&&L.current&&(D.current=setTimeout(()=>{try{let U=t;U=U.replace(/"\{\{[^{}]+\}\}"/g,'"__var__"'),U=U.replace(/\{\{[^{}]+\}\}/g,"null"),JSON.parse(U);const z=new Map;let F=t,se=0;F=F.replace(/"\{\{[^{}]+\}\}"/g,I=>{const H=`"__VAR_${se++}__"`;return z.set(H,I),H}),F=F.replace(/\{\{[^{}]+\}\}/g,I=>{const H=`"__VAR_${se++}__"`;return z.set(H,I),H});const Y=JSON.parse(F);let O=JSON.stringify(Y,null,2);O=O.replace(/\{\}/g,`{
}`),O=O.replace(/\[\]/g,`[
]`),z.forEach((I,H)=>{O=O.replace(H,I)}),O!==t&&e(O)}catch{}},500)),L.current=!N.valid,()=>{D.current&&clearTimeout(D.current)}),[N.valid,N.empty,t,e]),Q.useEffect(()=>{B||x()},[B,x]);const j=Q.useCallback((U,z)=>{const F=document.createElement("input");F.type="file",F.onchange=se=>{const Y=se.target.files?.[0];if(!Y)return;const O=new FileReader;O.onload=()=>{const I=O.result.split(",")[1],H=n.find(R=>R.id===z);r(H?n.map(R=>R.id===H.id?{...R,data:I,mimeType:Y.type,name:Y.name}:R):[...n,{id:z,type:U,name:Y.name,data:I,mimeType:Y.type}])},O.readAsDataURL(Y)},F.click()},[n,r]),J=Q.useCallback(U=>{const F=U.target.closest(".variable-chip");if(F){const se=F.dataset.variableType,Y=F.dataset.variableId;if(se==="file_base64"||se==="file_dataurl")j(se,Y),U.preventDefault(),U.stopPropagation();else if(se==="base64"){const O=F.getBoundingClientRect(),I=n.find(H=>H.id===Y);T(I?.data||""),S({variableKey:`${se}:${Y}`,rect:O}),U.preventDefault(),U.stopPropagation()}}else S(null)},[n,j]),ie=Q.useCallback(U=>{const z=p(U);z&&(U==="file_base64"||U==="file_dataurl")&&setTimeout(()=>j(U,z),0)},[p,j]),q=Q.useCallback(()=>{if(!E)return;const[U,z]=E.variableKey.split(":"),F=n.find(se=>se.id===z);r(F?n.map(se=>se.id===F.id?{...se,data:C}:se):[...n,{id:z,type:U,name:U,data:C}]),S(null),l.current?.focus()},[E,C,n,r]);Q.useEffect(()=>{const U=F=>{F.key==="Escape"&&(g(!1),S(null))},z=F=>{u.current&&!u.current.contains(F.target)&&(g(!1),S(null))};return document.addEventListener("keydown",U),document.addEventListener("mousedown",z),()=>{document.removeEventListener("keydown",U),document.removeEventListener("mousedown",z)}},[g]);const P=Q.useMemo(()=>{if(!E||!u.current)return{top:0,left:0};const U=u.current.getBoundingClientRect();return{top:E.rect.bottom-U.top+4,left:Math.max(0,E.rect.left-U.left)}},[E]);return w.jsxs("div",{ref:u,className:"flex flex-col h-full min-h-50 max-h-[60vh] relative overflow-hidden",children:[B?w.jsx("pre",{className:"flex-1 min-h-0 p-3 font-mono text-sm text-zinc-100 overflow-y-auto whitespace-pre-wrap wrap-break-word",children:G}):w.jsxs("div",{className:"flex-1 min-h-0 relative",children:[w.jsx("div",{ref:l,contentEditable:!0,suppressContentEditableWarning:!0,onInput:f,onPaste:h,onKeyDown:m,onClick:J,className:"h-full p-3 font-mono text-sm text-zinc-100 outline-none overflow-y-auto whitespace-pre-wrap wrap-break-word"}),!t&&s&&w.jsx("div",{className:"absolute top-3 left-3 font-mono text-sm text-zinc-500 pointer-events-none whitespace-pre-wrap",children:s})]}),w.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 text-xs shrink-0",children:[a&&w.jsx("button",{type:"button",onClick:a.onClick,className:"text-[11px] px-2 py-0.5 rounded bg-zinc-700 hover:bg-zinc-600 text-zinc-200 transition-colors",children:a.label}),w.jsx("div",{className:"flex-1"}),w.jsx("button",{onClick:()=>K(!B),className:`transition-colors flex items-center gap-1 ${B?"text-blue-400 hover:text-blue-300":"text-zinc-500 hover:text-zinc-300"}`,title:B?"Show editor":"Show resolved JSON",children:w.jsx(Nk,{className:"w-3.5 h-3.5"})}),N.valid?w.jsx("span",{className:"text-emerald-500",children:"Valid JSON"}):w.jsx("span",{className:"text-red-400",title:N.error,children:"Invalid JSON"})]}),y&&w.jsx("div",{className:"fixed z-50 w-56 bg-zinc-800 border border-zinc-600 rounded-lg shadow-xl py-1",style:{top:v.top,left:v.left},children:hL.map(U=>w.jsxs("button",{onClick:()=>ie(U.type),className:"w-full flex items-center gap-2 px-3 py-2 text-left hover:bg-zinc-700 transition-colors",children:[w.jsx("span",{className:"text-zinc-400",children:U.icon}),w.jsxs("div",{className:"flex-1 min-w-0",children:[w.jsx("div",{className:"text-sm text-zinc-200",children:U.label}),w.jsx("div",{className:"text-xs text-zinc-500",children:U.description})]})]},U.type))}),E&&(()=>{const[U]=E.variableKey.split(":");return w.jsx("div",{className:"absolute z-50 bg-zinc-800/95 border border-zinc-700/50 rounded shadow-lg p-1.5 w-44",style:P,children:U==="base64"?w.jsxs("div",{className:"flex gap-1",children:[w.jsx("input",{type:"text",value:C,onChange:z=>T(z.target.value),onKeyDown:z=>z.key==="Enter"&&q(),placeholder:"Text to encode...",className:"flex-1 min-w-0 px-1.5 py-0.5 text-xs bg-transparent text-zinc-200 rounded border-none focus:outline-none placeholder:text-zinc-500",autoFocus:!0}),w.jsx("button",{onClick:q,className:"p-1 text-zinc-400 hover:text-zinc-200 transition-colors",children:w.jsx(Tk,{className:"w-3 h-3"})})]}):null})})()]})}const dL=[{type:"file_base64",label:"File (Base64)",description:"Select a file to encode",icon:w.jsx(bf,{className:"w-3.5 h-3.5"})},{type:"file_dataurl",label:"File (Data URL)",description:"File as data:... URL",icon:w.jsx(bf,{className:"w-3.5 h-3.5"})},{type:"base64",label:"Text (Base64)",description:"Text to encode",icon:w.jsx(Ik,{className:"w-3.5 h-3.5"})},{type:"timestamp",label:"Timestamp",description:"Unix timestamp",icon:w.jsx(_f,{className:"w-3.5 h-3.5"})},{type:"uuid",label:"UUID",description:"Random UUID",icon:w.jsx(Dl,{className:"w-3.5 h-3.5"})},{type:"random_string",label:"Random String",description:"16-char random",icon:w.jsx(Mk,{className:"w-3.5 h-3.5"})}];function pL(t){if(!t.trim())return{valid:!0};try{const r=new DOMParser().parseFromString(t,"application/xml").querySelector("parsererror");if(r){const s=r.textContent||"Invalid XML",a=s.match(/error[^:]*:\s*(.+)/i);return{valid:!1,error:a?a[1].trim():s.split(`
`)[0]}}return{valid:!0}}catch(e){return{valid:!1,error:e instanceof Error?e.message:"Invalid XML"}}}function mL(t){try{const n=new DOMParser().parseFromString(t,"application/xml");if(n.querySelector("parsererror"))return t;const s=new XMLSerializer().serializeToString(n);let a="",l=0;const u=s.replace(/></g,`>
<`).split(`
`);for(const f of u){const h=f.trim();h&&(h.startsWith("</")&&(l=Math.max(0,l-1)),a+="  ".repeat(l)+h+`
`,h.startsWith("<")&&!h.startsWith("</")&&!h.startsWith("<?")&&!h.endsWith("/>")&&l++)}return a.trim()}catch{return t}}function gL({value:t,onChange:e,variables:n,onVariablesChange:r,placeholder:s}){const a=Q.useRef(null),l=Q.useRef(null),{handleInput:u,handlePaste:f,handleKeyDown:h,insertVariable:m,showTypeMenu:p,setShowTypeMenu:y,typeMenuPosition:g,buildDOM:v}=Lk({editorRef:a,value:t,onChange:e,variables:n,onVariablesChange:r,indentTriggers:[">","{","["]}),[x,E]=Q.useState(null),[S,C]=Q.useState(""),T=Q.useRef(!1),L=Q.useRef(null),D=Q.useMemo(()=>{if(!t.trim())return{valid:!0,empty:!0};let P=t;return P=P.replace(/\{\{[^{}]+\}\}/g,"PLACEHOLDER"),{...pL(P),empty:!1}},[t]),[N,B]=Q.useState(!1),K=Q.useMemo(()=>yf(t,n,{missingDataPlaceholder:"[no data]"}),[t,n]);Q.useEffect(()=>(L.current&&(clearTimeout(L.current),L.current=null),D.valid&&!D.empty&&T.current&&(L.current=setTimeout(()=>{const P=new Map;let U=t,z=0;U=U.replace(/\{\{[^{}]+\}\}/g,se=>{const Y=`__VAR_${z++}__`;return P.set(Y,se),Y});let F=mL(U);P.forEach((se,Y)=>{F=F.replace(Y,se)}),F!==t&&e(F)},500)),T.current=!D.valid,()=>{L.current&&clearTimeout(L.current)}),[D.valid,D.empty,t,e]),Q.useEffect(()=>{N||v()},[N,v]);const G=Q.useCallback((P,U)=>{const z=document.createElement("input");z.type="file",z.onchange=F=>{const se=F.target.files?.[0];if(!se)return;const Y=new FileReader;Y.onload=()=>{const O=Y.result.split(",")[1],I=n.find(H=>H.id===U);r(I?n.map(H=>H.id===I.id?{...H,data:O,mimeType:se.type,name:se.name}:H):[...n,{id:U,type:P,name:se.name,data:O,mimeType:se.type}])},Y.readAsDataURL(se)},z.click()},[n,r]),j=Q.useCallback(P=>{const z=P.target.closest(".variable-chip");if(z){const F=z.dataset.variableType,se=z.dataset.variableId;if(F==="file_base64"||F==="file_dataurl")G(F,se),P.preventDefault(),P.stopPropagation();else if(F==="base64"){const Y=z.getBoundingClientRect(),O=n.find(I=>I.id===se);C(O?.data||""),E({variableKey:`${F}:${se}`,rect:Y}),P.preventDefault(),P.stopPropagation()}}else E(null)},[n,G]),J=Q.useCallback(P=>{const U=m(P);U&&(P==="file_base64"||P==="file_dataurl")&&setTimeout(()=>G(P,U),0)},[m,G]),ie=Q.useCallback(()=>{if(!x)return;const[P,U]=x.variableKey.split(":"),z=n.find(F=>F.id===U);r(z?n.map(F=>F.id===z.id?{...F,data:S}:F):[...n,{id:U,type:P,name:P,data:S}]),E(null),a.current?.focus()},[x,S,n,r]);Q.useEffect(()=>{const P=z=>{z.key==="Escape"&&(y(!1),E(null))},U=z=>{l.current&&!l.current.contains(z.target)&&(y(!1),E(null))};return document.addEventListener("keydown",P),document.addEventListener("mousedown",U),()=>{document.removeEventListener("keydown",P),document.removeEventListener("mousedown",U)}},[y]);const q=Q.useMemo(()=>{if(!x||!l.current)return{top:0,left:0};const P=l.current.getBoundingClientRect();return{top:x.rect.bottom-P.top+4,left:Math.max(0,x.rect.left-P.left)}},[x]);return w.jsxs("div",{ref:l,className:"flex flex-col h-full min-h-50 max-h-[60vh] relative overflow-hidden",children:[N?w.jsx("pre",{className:"flex-1 min-h-0 p-3 font-mono text-sm text-zinc-100 overflow-y-auto whitespace-pre-wrap wrap-break-word",children:K}):w.jsxs("div",{className:"flex-1 min-h-0 relative",children:[w.jsx("div",{ref:a,contentEditable:!0,suppressContentEditableWarning:!0,onInput:u,onPaste:f,onKeyDown:h,onClick:j,className:"h-full p-3 font-mono text-sm text-zinc-100 outline-none overflow-y-auto whitespace-pre-wrap wrap-break-word"}),!t&&s&&w.jsx("div",{className:"absolute top-3 left-3 font-mono text-sm text-zinc-500 pointer-events-none whitespace-pre-wrap",children:s})]}),w.jsxs("div",{className:"flex items-center justify-end gap-2 px-3 py-1.5 text-xs shrink-0",children:[w.jsx("button",{onClick:()=>B(!N),className:`transition-colors flex items-center gap-1 ${N?"text-blue-400 hover:text-blue-300":"text-zinc-500 hover:text-zinc-300"}`,title:N?"Show editor":"Show resolved XML",children:w.jsx(Nk,{className:"w-3.5 h-3.5"})}),D.valid?w.jsx("span",{className:"text-emerald-500",children:"Valid XML"}):w.jsx("span",{className:"text-red-400",title:D.error,children:"Invalid XML"})]}),p&&w.jsx("div",{className:"fixed z-50 w-56 bg-zinc-800 border border-zinc-600 rounded-lg shadow-xl py-1",style:{top:g.top,left:g.left},children:dL.map(P=>w.jsxs("button",{onClick:()=>J(P.type),className:"w-full flex items-center gap-2 px-3 py-2 text-left hover:bg-zinc-700 transition-colors",children:[w.jsx("span",{className:"text-zinc-400",children:P.icon}),w.jsxs("div",{className:"flex-1 min-w-0",children:[w.jsx("div",{className:"text-sm text-zinc-200",children:P.label}),w.jsx("div",{className:"text-xs text-zinc-500",children:P.description})]})]},P.type))}),x&&(()=>{const[P]=x.variableKey.split(":");return w.jsx("div",{className:"absolute z-50 bg-zinc-800/95 border border-zinc-700/50 rounded shadow-lg p-1.5 w-44",style:q,children:P==="base64"?w.jsxs("div",{className:"flex gap-1",children:[w.jsx("input",{type:"text",value:S,onChange:U=>C(U.target.value),onKeyDown:U=>U.key==="Enter"&&ie(),placeholder:"Text to encode...",className:"flex-1 min-w-0 px-1.5 py-0.5 text-xs bg-transparent text-zinc-200 rounded border-none focus:outline-none placeholder:text-zinc-500",autoFocus:!0}),w.jsx("button",{onClick:ie,className:"p-1 text-zinc-400 hover:text-zinc-200 transition-colors",children:w.jsx(Tk,{className:"w-3 h-3"})})]}):null})})()]})}const yL=[{value:"none",label:"None"},{value:"json",label:"JSON"},{value:"xml",label:"XML"},{value:"form-urlencoded",label:"Form"},{value:"form-data",label:"Form Data"},{value:"binary",label:"Binary"},{value:"raw",label:"Raw"}];function jk(){return Math.random().toString(36).substring(2,9)}function _L(){return{id:jk(),enabled:!0,key:"",type:"text",value:"",file:null,fileName:""}}const bL=["Accept","Accept-Charset","Accept-Encoding","Accept-Language","Authorization","Cache-Control","Connection","Content-Disposition","Content-Encoding","Content-Length","Content-Type","Cookie","Date","ETag","Expect","Forwarded","From","Host","If-Match","If-Modified-Since","If-None-Match","If-Range","If-Unmodified-Since","Max-Forwards","Origin","Pragma","Proxy-Authorization","Range","Referer","TE","Trailer","Transfer-Encoding","Upgrade","User-Agent","Via","Warning","X-Api-Key","X-Correlation-ID","X-Forwarded-For","X-Forwarded-Host","X-Forwarded-Proto","X-Request-ID","X-Requested-With"];function vL(){const t=Ue.c(54),[e,n]=Q.useState("body"),{request:r,setHeaders:s,setQuery:a,setBody:l,setVariables:u}=Fn();let f;t[0]!==r?.http?.headers?(f=r?.http?.headers??[],t[0]=r?.http?.headers,t[1]=f):f=t[1];const h=f;let m;t[2]!==r?.http?.query?(m=r?.http?.query??[],t[2]=r?.http?.query,t[3]=m):m=t[3];const p=m;let y;t[4]!==r?.http?.body?(y=r?.http?.body??{type:"none"},t[4]=r?.http?.body,t[5]=y):y=t[5];const g=y;let v;t[6]!==r?.variables?(v=r?.variables??[],t[6]=r?.variables,t[7]=v):v=t[7];const x=v;let E;t[8]!==g||t[9]!==l?(E=F=>{e:switch(F){case"none":{l({type:"none"});break e}case"json":{l({type:"json",content:g.type==="json"?g.content:""});break e}case"xml":{l({type:"xml",content:g.type==="xml"?g.content:""});break e}case"raw":{l({type:"raw",content:g.type==="raw"?g.content:""});break e}case"form-urlencoded":{l({type:"form-urlencoded",data:g.type==="form-urlencoded"?g.data:[{id:jk(),enabled:!0,key:"",value:""}]});break e}case"form-data":{l({type:"form-data",data:g.type==="form-data"?g.data:[_L()]});break e}case"binary":l({type:"binary",file:g.type==="binary"?g.file:null,fileName:g.type==="binary"?g.fileName:""})}},t[8]=g,t[9]=l,t[10]=E):E=t[10];const S=E;let C;t[11]!==p?(C=p.filter(SL),t[11]=p,t[12]=C):C=t[12];let T;t[13]!==C.length?(T={id:"params",label:"Params",count:C.length},t[13]=C.length,t[14]=T):T=t[14];let L;t[15]!==h?(L=h.filter(wL),t[15]=h,t[16]=L):L=t[16];let D;t[17]!==L.length?(D={id:"headers",label:"Headers",count:L.length},t[17]=L.length,t[18]=D):D=t[18];let N;t[19]===Symbol.for("react.memo_cache_sentinel")?(N={id:"body",label:"Body"},t[19]=N):N=t[19];let B;t[20]!==T||t[21]!==D?(B=[T,D,N],t[20]=T,t[21]=D,t[22]=B):B=t[22];const K=B;let G;t[23]!==e||t[24]!==K?(G=w.jsx("div",{role:"tablist",className:"inline-flex gap-1",children:K.map(F=>w.jsxs("button",{role:"tab",onClick:()=>n(F.id),className:`px-2 py-1 text-[11px] font-medium rounded-md transition-all ${e===F.id?"bg-white dark:bg-white/10 text-neutral-800 dark:text-neutral-100 shadow-sm":"text-neutral-500 dark:text-neutral-400 hover:text-neutral-700 dark:hover:text-neutral-200 hover:bg-neutral-100 dark:hover:bg-white/5"}`,children:[F.label,F.count!==void 0&&F.count>0&&w.jsx("span",{className:"ml-1.5 px-1.5 py-0.5 text-[9px] bg-neutral-200 dark:bg-white/10 text-neutral-600 dark:text-neutral-300 rounded-full",children:F.count})]},F.id))}),t[23]=e,t[24]=K,t[25]=G):G=t[25];let j;t[26]!==e||t[27]!==g||t[28]!==S?(j=e==="body"&&w.jsx("select",{value:g.type,onChange:F=>S(F.target.value),className:"h-6 px-2 text-[11px] font-medium bg-white dark:bg-white/10 text-neutral-800 dark:text-neutral-100 rounded-md shadow-sm border-0 focus:outline-none focus:ring-2 focus:ring-neutral-300 dark:focus:ring-white/20 cursor-pointer transition-all min-w-30",children:yL.map(xL)}),t[26]=e,t[27]=g,t[28]=S,t[29]=j):j=t[29];let J;t[30]!==G||t[31]!==j?(J=w.jsxs("div",{className:"flex items-center gap-2",children:[G,j]}),t[30]=G,t[31]=j,t[32]=J):J=t[32];let ie;t[33]!==e||t[34]!==p||t[35]!==a?(ie=e==="params"&&w.jsx(Gu,{items:p,onChange:a,keyPlaceholder:"Parameter",valuePlaceholder:"Value"}),t[33]=e,t[34]=p,t[35]=a,t[36]=ie):ie=t[36];let q;t[37]!==e||t[38]!==h||t[39]!==s?(q=e==="headers"&&w.jsx(Gu,{items:h,onChange:s,keyPlaceholder:"Header",valuePlaceholder:"Value",keySuggestions:bL}),t[37]=e,t[38]=h,t[39]=s,t[40]=q):q=t[40];let P;t[41]!==e||t[42]!==g||t[43]!==l||t[44]!==u||t[45]!==x?(P=e==="body"&&w.jsxs("div",{className:"space-y-3",children:[g.type==="json"&&w.jsx(ky,{value:g.content,onChange:F=>l({...g,content:F}),variables:x,onVariablesChange:u,placeholder:`{
  "key": "value"
}`}),g.type==="xml"&&w.jsx(gL,{value:g.content,onChange:F=>l({...g,content:F}),variables:x,onVariablesChange:u,placeholder:"<xml></xml>"}),g.type==="raw"&&w.jsx(sL,{value:g.content,onChange:F=>l({...g,content:F}),language:"text",placeholder:"Plain text payload"}),g.type==="form-urlencoded"&&w.jsx(Gu,{items:g.data,onChange:F=>l({...g,data:F}),keyPlaceholder:"Key",valuePlaceholder:"Value"}),g.type==="form-data"&&w.jsx(W3,{items:g.data,onChange:F=>l({...g,data:F})}),g.type==="binary"&&w.jsx(tL,{file:g.file,fileName:g.fileName,onFileChange:(F,se)=>l({...g,file:F,fileName:se})}),g.type==="none"&&w.jsx("div",{className:"py-8 text-center text-sm text-neutral-400 dark:text-neutral-500",children:"No request body"})]}),t[41]=e,t[42]=g,t[43]=l,t[44]=u,t[45]=x,t[46]=P):P=t[46];let U;t[47]!==ie||t[48]!==q||t[49]!==P?(U=w.jsxs("div",{children:[ie,q,P]}),t[47]=ie,t[48]=q,t[49]=P,t[50]=U):U=t[50];let z;return t[51]!==J||t[52]!==U?(z=w.jsxs("div",{className:"space-y-3",children:[J,U]}),t[51]=J,t[52]=U,t[53]=z):z=t[53],z}function xL(t){return w.jsx("option",{value:t.value,className:"bg-white dark:bg-[#1a1a1a]",children:t.label},t.value)}function wL(t){return t.key}function SL(t){return t.key}const kL="modulepreload",EL=function(t){return"/"+t},j1={},M=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){let h=function(m){return Promise.all(m.map(p=>Promise.resolve(p).then(y=>({status:"fulfilled",value:y}),y=>({status:"rejected",reason:y}))))};var l=h;document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),f=u?.nonce||u?.getAttribute("nonce");s=h(n.map(m=>{if(m=EL(m),m in j1)return;j1[m]=!0;const p=m.endsWith(".css"),y=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${y}`))return;const g=document.createElement("link");if(g.rel=p?"stylesheet":kL,p||(g.as="script"),g.crossOrigin="",g.href=m,f&&g.setAttribute("nonce",f),document.head.appendChild(g),p)return new Promise((v,x)=>{g.addEventListener("load",v),g.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${m}`)))})}))}function a(u){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=u,window.dispatchEvent(f),!f.defaultPrevented)throw u}return s.then(u=>{for(const f of u||[])f.status==="rejected"&&a(f.reason);return e().catch(a)})};let jt=class extends Error{constructor(e){super(e),this.name="ShikiError"}};function CL(t){return Ey(t)}function Ey(t){return Array.isArray(t)?TL(t):t instanceof RegExp?t:typeof t=="object"?AL(t):t}function TL(t){let e=[];for(let n=0,r=t.length;n<r;n++)e[n]=Ey(t[n]);return e}function AL(t){let e={};for(let n in t)e[n]=Ey(t[n]);return e}function zk(t,...e){return e.forEach(n=>{for(let r in n)t[r]=n[r]}),t}function Pk(t){const e=~t.lastIndexOf("/")||~t.lastIndexOf("\\");return e===0?t:~e===t.length-1?Pk(t.substring(0,t.length-1)):t.substr(~e+1)}var sm=/\$(\d+)|\${(\d+):\/(downcase|upcase)}/g,ku=class{static hasCaptures(t){return t===null?!1:(sm.lastIndex=0,sm.test(t))}static replaceCaptures(t,e,n){return t.replace(sm,(r,s,a,l)=>{let u=n[parseInt(s||a,10)];if(u){let f=e.substring(u.start,u.end);for(;f[0]===".";)f=f.substring(1);switch(l){case"downcase":return f.toLowerCase();case"upcase":return f.toUpperCase();default:return f}}else return r})}};function Bk(t,e){return t<e?-1:t>e?1:0}function $k(t,e){if(t===null&&e===null)return 0;if(!t)return-1;if(!e)return 1;let n=t.length,r=e.length;if(n===r){for(let s=0;s<n;s++){let a=Bk(t[s],e[s]);if(a!==0)return a}return 0}return n-r}function z1(t){return!!(/^#[0-9a-f]{6}$/i.test(t)||/^#[0-9a-f]{8}$/i.test(t)||/^#[0-9a-f]{3}$/i.test(t)||/^#[0-9a-f]{4}$/i.test(t))}function Uk(t){return t.replace(/[\-\\\{\}\*\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&")}var qk=class{constructor(t){this.fn=t}cache=new Map;get(t){if(this.cache.has(t))return this.cache.get(t);const e=this.fn(t);return this.cache.set(t,e),e}},wf=class{constructor(t,e,n){this._colorMap=t,this._defaults=e,this._root=n}static createFromRawTheme(t,e){return this.createFromParsedTheme(NL(t),e)}static createFromParsedTheme(t,e){return ML(t,e)}_cachedMatchRoot=new qk(t=>this._root.match(t));getColorMap(){return this._colorMap.getColorMap()}getDefaults(){return this._defaults}match(t){if(t===null)return this._defaults;const e=t.scopeName,r=this._cachedMatchRoot.get(e).find(s=>RL(t.parent,s.parentScopes));return r?new Fk(r.fontStyle,r.foreground,r.background):null}},im=class Zu{constructor(e,n){this.parent=e,this.scopeName=n}static push(e,n){for(const r of n)e=new Zu(e,r);return e}static from(...e){let n=null;for(let r=0;r<e.length;r++)n=new Zu(n,e[r]);return n}push(e){return new Zu(this,e)}getSegments(){let e=this;const n=[];for(;e;)n.push(e.scopeName),e=e.parent;return n.reverse(),n}toString(){return this.getSegments().join(" ")}extends(e){return this===e?!0:this.parent===null?!1:this.parent.extends(e)}getExtensionIfDefined(e){const n=[];let r=this;for(;r&&r!==e;)n.push(r.scopeName),r=r.parent;return r===e?n.reverse():void 0}};function RL(t,e){if(e.length===0)return!0;for(let n=0;n<e.length;n++){let r=e[n],s=!1;if(r===">"){if(n===e.length-1)return!1;r=e[++n],s=!0}for(;t&&!OL(t.scopeName,r);){if(s)return!1;t=t.parent}if(!t)return!1;t=t.parent}return!0}function OL(t,e){return e===t||t.startsWith(e)&&t[e.length]==="."}var Fk=class{constructor(t,e,n){this.fontStyle=t,this.foregroundId=e,this.backgroundId=n}};function NL(t){if(!t)return[];if(!t.settings||!Array.isArray(t.settings))return[];let e=t.settings,n=[],r=0;for(let s=0,a=e.length;s<a;s++){let l=e[s];if(!l.settings)continue;let u;if(typeof l.scope=="string"){let p=l.scope;p=p.replace(/^[,]+/,""),p=p.replace(/[,]+$/,""),u=p.split(",")}else Array.isArray(l.scope)?u=l.scope:u=[""];let f=-1;if(typeof l.settings.fontStyle=="string"){f=0;let p=l.settings.fontStyle.split(" ");for(let y=0,g=p.length;y<g;y++)switch(p[y]){case"italic":f=f|1;break;case"bold":f=f|2;break;case"underline":f=f|4;break;case"strikethrough":f=f|8;break}}let h=null;typeof l.settings.foreground=="string"&&z1(l.settings.foreground)&&(h=l.settings.foreground);let m=null;typeof l.settings.background=="string"&&z1(l.settings.background)&&(m=l.settings.background);for(let p=0,y=u.length;p<y;p++){let v=u[p].trim().split(" "),x=v[v.length-1],E=null;v.length>1&&(E=v.slice(0,v.length-1),E.reverse()),n[r++]=new IL(x,E,s,f,h,m)}}return n}var IL=class{constructor(t,e,n,r,s,a){this.scope=t,this.parentScopes=e,this.index=n,this.fontStyle=r,this.foreground=s,this.background=a}},_n=(t=>(t[t.NotSet=-1]="NotSet",t[t.None=0]="None",t[t.Italic=1]="Italic",t[t.Bold=2]="Bold",t[t.Underline=4]="Underline",t[t.Strikethrough=8]="Strikethrough",t))(_n||{});function ML(t,e){t.sort((f,h)=>{let m=Bk(f.scope,h.scope);return m!==0||(m=$k(f.parentScopes,h.parentScopes),m!==0)?m:f.index-h.index});let n=0,r="#000000",s="#ffffff";for(;t.length>=1&&t[0].scope==="";){let f=t.shift();f.fontStyle!==-1&&(n=f.fontStyle),f.foreground!==null&&(r=f.foreground),f.background!==null&&(s=f.background)}let a=new DL(e),l=new Fk(n,a.getId(r),a.getId(s)),u=new jL(new fg(0,null,-1,0,0),[]);for(let f=0,h=t.length;f<h;f++){let m=t[f];u.insert(0,m.scope,m.parentScopes,m.fontStyle,a.getId(m.foreground),a.getId(m.background))}return new wf(a,l,u)}var DL=class{_isFrozen;_lastColorId;_id2color;_color2id;constructor(t){if(this._lastColorId=0,this._id2color=[],this._color2id=Object.create(null),Array.isArray(t)){this._isFrozen=!0;for(let e=0,n=t.length;e<n;e++)this._color2id[t[e]]=e,this._id2color[e]=t[e]}else this._isFrozen=!1}getId(t){if(t===null)return 0;t=t.toUpperCase();let e=this._color2id[t];if(e)return e;if(this._isFrozen)throw new Error(`Missing color in color map - ${t}`);return e=++this._lastColorId,this._color2id[t]=e,this._id2color[e]=t,e}getColorMap(){return this._id2color.slice(0)}},LL=Object.freeze([]),fg=class Vk{scopeDepth;parentScopes;fontStyle;foreground;background;constructor(e,n,r,s,a){this.scopeDepth=e,this.parentScopes=n||LL,this.fontStyle=r,this.foreground=s,this.background=a}clone(){return new Vk(this.scopeDepth,this.parentScopes,this.fontStyle,this.foreground,this.background)}static cloneArr(e){let n=[];for(let r=0,s=e.length;r<s;r++)n[r]=e[r].clone();return n}acceptOverwrite(e,n,r,s){this.scopeDepth>e?console.log("how did this happen?"):this.scopeDepth=e,n!==-1&&(this.fontStyle=n),r!==0&&(this.foreground=r),s!==0&&(this.background=s)}},jL=class hg{constructor(e,n=[],r={}){this._mainRule=e,this._children=r,this._rulesWithParentScopes=n}_rulesWithParentScopes;static _cmpBySpecificity(e,n){if(e.scopeDepth!==n.scopeDepth)return n.scopeDepth-e.scopeDepth;let r=0,s=0;for(;e.parentScopes[r]===">"&&r++,n.parentScopes[s]===">"&&s++,!(r>=e.parentScopes.length||s>=n.parentScopes.length);){const a=n.parentScopes[s].length-e.parentScopes[r].length;if(a!==0)return a;r++,s++}return n.parentScopes.length-e.parentScopes.length}match(e){if(e!==""){let r=e.indexOf("."),s,a;if(r===-1?(s=e,a=""):(s=e.substring(0,r),a=e.substring(r+1)),this._children.hasOwnProperty(s))return this._children[s].match(a)}const n=this._rulesWithParentScopes.concat(this._mainRule);return n.sort(hg._cmpBySpecificity),n}insert(e,n,r,s,a,l){if(n===""){this._doInsertHere(e,r,s,a,l);return}let u=n.indexOf("."),f,h;u===-1?(f=n,h=""):(f=n.substring(0,u),h=n.substring(u+1));let m;this._children.hasOwnProperty(f)?m=this._children[f]:(m=new hg(this._mainRule.clone(),fg.cloneArr(this._rulesWithParentScopes)),this._children[f]=m),m.insert(e+1,h,r,s,a,l)}_doInsertHere(e,n,r,s,a){if(n===null){this._mainRule.acceptOverwrite(e,r,s,a);return}for(let l=0,u=this._rulesWithParentScopes.length;l<u;l++){let f=this._rulesWithParentScopes[l];if($k(f.parentScopes,n)===0){f.acceptOverwrite(e,r,s,a);return}}r===-1&&(r=this._mainRule.fontStyle),s===0&&(s=this._mainRule.foreground),a===0&&(a=this._mainRule.background),this._rulesWithParentScopes.push(new fg(e,n,r,s,a))}},Ha=class mr{static toBinaryStr(e){return e.toString(2).padStart(32,"0")}static print(e){const n=mr.getLanguageId(e),r=mr.getTokenType(e),s=mr.getFontStyle(e),a=mr.getForeground(e),l=mr.getBackground(e);console.log({languageId:n,tokenType:r,fontStyle:s,foreground:a,background:l})}static getLanguageId(e){return(e&255)>>>0}static getTokenType(e){return(e&768)>>>8}static containsBalancedBrackets(e){return(e&1024)!==0}static getFontStyle(e){return(e&30720)>>>11}static getForeground(e){return(e&16744448)>>>15}static getBackground(e){return(e&4278190080)>>>24}static set(e,n,r,s,a,l,u){let f=mr.getLanguageId(e),h=mr.getTokenType(e),m=mr.containsBalancedBrackets(e)?1:0,p=mr.getFontStyle(e),y=mr.getForeground(e),g=mr.getBackground(e);return n!==0&&(f=n),r!==8&&(h=r),s!==null&&(m=s?1:0),a!==-1&&(p=a),l!==0&&(y=l),u!==0&&(g=u),(f<<0|h<<8|m<<10|p<<11|y<<15|g<<24)>>>0}};function Sf(t,e){const n=[],r=zL(t);let s=r.next();for(;s!==null;){let f=0;if(s.length===2&&s.charAt(1)===":"){switch(s.charAt(0)){case"R":f=1;break;case"L":f=-1;break;default:console.log(`Unknown priority ${s} in scope selector`)}s=r.next()}let h=l();if(n.push({matcher:h,priority:f}),s!==",")break;s=r.next()}return n;function a(){if(s==="-"){s=r.next();const f=a();return h=>!!f&&!f(h)}if(s==="("){s=r.next();const f=u();return s===")"&&(s=r.next()),f}if(P1(s)){const f=[];do f.push(s),s=r.next();while(P1(s));return h=>e(f,h)}return null}function l(){const f=[];let h=a();for(;h;)f.push(h),h=a();return m=>f.every(p=>p(m))}function u(){const f=[];let h=l();for(;h&&(f.push(h),s==="|"||s===",");){do s=r.next();while(s==="|"||s===",");h=l()}return m=>f.some(p=>p(m))}}function P1(t){return!!t&&!!t.match(/[\w\.:]+/)}function zL(t){let e=/([LR]:|[\w\.:][\w\.:\-]*|[\,\|\-\(\)])/g,n=e.exec(t);return{next:()=>{if(!n)return null;const r=n[0];return n=e.exec(t),r}}}function Hk(t){typeof t.dispose=="function"&&t.dispose()}var Ll=class{constructor(t){this.scopeName=t}toKey(){return this.scopeName}},PL=class{constructor(t,e){this.scopeName=t,this.ruleName=e}toKey(){return`${this.scopeName}#${this.ruleName}`}},BL=class{_references=[];_seenReferenceKeys=new Set;get references(){return this._references}visitedRule=new Set;add(t){const e=t.toKey();this._seenReferenceKeys.has(e)||(this._seenReferenceKeys.add(e),this._references.push(t))}},$L=class{constructor(t,e){this.repo=t,this.initialScopeName=e,this.seenFullScopeRequests.add(this.initialScopeName),this.Q=[new Ll(this.initialScopeName)]}seenFullScopeRequests=new Set;seenPartialScopeRequests=new Set;Q;processQueue(){const t=this.Q;this.Q=[];const e=new BL;for(const n of t)UL(n,this.initialScopeName,this.repo,e);for(const n of e.references)if(n instanceof Ll){if(this.seenFullScopeRequests.has(n.scopeName))continue;this.seenFullScopeRequests.add(n.scopeName),this.Q.push(n)}else{if(this.seenFullScopeRequests.has(n.scopeName)||this.seenPartialScopeRequests.has(n.toKey()))continue;this.seenPartialScopeRequests.add(n.toKey()),this.Q.push(n)}}};function UL(t,e,n,r){const s=n.lookup(t.scopeName);if(!s){if(t.scopeName===e)throw new Error(`No grammar provided for <${e}>`);return}const a=n.lookup(e);t instanceof Ll?Qu({baseGrammar:a,selfGrammar:s},r):dg(t.ruleName,{baseGrammar:a,selfGrammar:s,repository:s.repository},r);const l=n.injections(t.scopeName);if(l)for(const u of l)r.add(new Ll(u))}function dg(t,e,n){if(e.repository&&e.repository[t]){const r=e.repository[t];kf([r],e,n)}}function Qu(t,e){t.selfGrammar.patterns&&Array.isArray(t.selfGrammar.patterns)&&kf(t.selfGrammar.patterns,{...t,repository:t.selfGrammar.repository},e),t.selfGrammar.injections&&kf(Object.values(t.selfGrammar.injections),{...t,repository:t.selfGrammar.repository},e)}function kf(t,e,n){for(const r of t){if(n.visitedRule.has(r))continue;n.visitedRule.add(r);const s=r.repository?zk({},e.repository,r.repository):e.repository;Array.isArray(r.patterns)&&kf(r.patterns,{...e,repository:s},n);const a=r.include;if(!a)continue;const l=Gk(a);switch(l.kind){case 0:Qu({...e,selfGrammar:e.baseGrammar},n);break;case 1:Qu(e,n);break;case 2:dg(l.ruleName,{...e,repository:s},n);break;case 3:case 4:const u=l.scopeName===e.selfGrammar.scopeName?e.selfGrammar:l.scopeName===e.baseGrammar.scopeName?e.baseGrammar:void 0;if(u){const f={baseGrammar:e.baseGrammar,selfGrammar:u,repository:s};l.kind===4?dg(l.ruleName,f,n):Qu(f,n)}else l.kind===4?n.add(new PL(l.scopeName,l.ruleName)):n.add(new Ll(l.scopeName));break}}}var qL=class{kind=0},FL=class{kind=1},VL=class{constructor(t){this.ruleName=t}kind=2},HL=class{constructor(t){this.scopeName=t}kind=3},GL=class{constructor(t,e){this.scopeName=t,this.ruleName=e}kind=4};function Gk(t){if(t==="$base")return new qL;if(t==="$self")return new FL;const e=t.indexOf("#");if(e===-1)return new HL(t);if(e===0)return new VL(t.substring(1));{const n=t.substring(0,e),r=t.substring(e+1);return new GL(n,r)}}var KL=/\\(\d+)/,B1=/\\(\d+)/g,ZL=-1,Kk=-2;var Jl=class{$location;id;_nameIsCapturing;_name;_contentNameIsCapturing;_contentName;constructor(t,e,n,r){this.$location=t,this.id=e,this._name=n||null,this._nameIsCapturing=ku.hasCaptures(this._name),this._contentName=r||null,this._contentNameIsCapturing=ku.hasCaptures(this._contentName)}get debugName(){const t=this.$location?`${Pk(this.$location.filename)}:${this.$location.line}`:"unknown";return`${this.constructor.name}#${this.id} @ ${t}`}getName(t,e){return!this._nameIsCapturing||this._name===null||t===null||e===null?this._name:ku.replaceCaptures(this._name,t,e)}getContentName(t,e){return!this._contentNameIsCapturing||this._contentName===null?this._contentName:ku.replaceCaptures(this._contentName,t,e)}},QL=class extends Jl{retokenizeCapturedWithRuleId;constructor(t,e,n,r,s){super(t,e,n,r),this.retokenizeCapturedWithRuleId=s}dispose(){}collectPatterns(t,e){throw new Error("Not supported!")}compile(t,e){throw new Error("Not supported!")}compileAG(t,e,n,r){throw new Error("Not supported!")}},JL=class extends Jl{_match;captures;_cachedCompiledPatterns;constructor(t,e,n,r,s){super(t,e,n,null),this._match=new jl(r,this.id),this.captures=s,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}get debugMatchRegExp(){return`${this._match.source}`}collectPatterns(t,e){e.push(this._match)}compile(t,e){return this._getCachedCompiledPatterns(t).compile(t)}compileAG(t,e,n,r){return this._getCachedCompiledPatterns(t).compileAG(t,n,r)}_getCachedCompiledPatterns(t){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new zl,this.collectPatterns(t,this._cachedCompiledPatterns)),this._cachedCompiledPatterns}},$1=class extends Jl{hasMissingPatterns;patterns;_cachedCompiledPatterns;constructor(t,e,n,r,s){super(t,e,n,r),this.patterns=s.patterns,this.hasMissingPatterns=s.hasMissingPatterns,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}collectPatterns(t,e){for(const n of this.patterns)t.getRule(n).collectPatterns(t,e)}compile(t,e){return this._getCachedCompiledPatterns(t).compile(t)}compileAG(t,e,n,r){return this._getCachedCompiledPatterns(t).compileAG(t,n,r)}_getCachedCompiledPatterns(t){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new zl,this.collectPatterns(t,this._cachedCompiledPatterns)),this._cachedCompiledPatterns}},pg=class extends Jl{_begin;beginCaptures;_end;endHasBackReferences;endCaptures;applyEndPatternLast;hasMissingPatterns;patterns;_cachedCompiledPatterns;constructor(t,e,n,r,s,a,l,u,f,h){super(t,e,n,r),this._begin=new jl(s,this.id),this.beginCaptures=a,this._end=new jl(l||"",-1),this.endHasBackReferences=this._end.hasBackReferences,this.endCaptures=u,this.applyEndPatternLast=f||!1,this.patterns=h.patterns,this.hasMissingPatterns=h.hasMissingPatterns,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}get debugBeginRegExp(){return`${this._begin.source}`}get debugEndRegExp(){return`${this._end.source}`}getEndWithResolvedBackReferences(t,e){return this._end.resolveBackReferences(t,e)}collectPatterns(t,e){e.push(this._begin)}compile(t,e){return this._getCachedCompiledPatterns(t,e).compile(t)}compileAG(t,e,n,r){return this._getCachedCompiledPatterns(t,e).compileAG(t,n,r)}_getCachedCompiledPatterns(t,e){if(!this._cachedCompiledPatterns){this._cachedCompiledPatterns=new zl;for(const n of this.patterns)t.getRule(n).collectPatterns(t,this._cachedCompiledPatterns);this.applyEndPatternLast?this._cachedCompiledPatterns.push(this._end.hasBackReferences?this._end.clone():this._end):this._cachedCompiledPatterns.unshift(this._end.hasBackReferences?this._end.clone():this._end)}return this._end.hasBackReferences&&(this.applyEndPatternLast?this._cachedCompiledPatterns.setSource(this._cachedCompiledPatterns.length()-1,e):this._cachedCompiledPatterns.setSource(0,e)),this._cachedCompiledPatterns}},Ef=class extends Jl{_begin;beginCaptures;whileCaptures;_while;whileHasBackReferences;hasMissingPatterns;patterns;_cachedCompiledPatterns;_cachedCompiledWhilePatterns;constructor(t,e,n,r,s,a,l,u,f){super(t,e,n,r),this._begin=new jl(s,this.id),this.beginCaptures=a,this.whileCaptures=u,this._while=new jl(l,Kk),this.whileHasBackReferences=this._while.hasBackReferences,this.patterns=f.patterns,this.hasMissingPatterns=f.hasMissingPatterns,this._cachedCompiledPatterns=null,this._cachedCompiledWhilePatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null),this._cachedCompiledWhilePatterns&&(this._cachedCompiledWhilePatterns.dispose(),this._cachedCompiledWhilePatterns=null)}get debugBeginRegExp(){return`${this._begin.source}`}get debugWhileRegExp(){return`${this._while.source}`}getWhileWithResolvedBackReferences(t,e){return this._while.resolveBackReferences(t,e)}collectPatterns(t,e){e.push(this._begin)}compile(t,e){return this._getCachedCompiledPatterns(t).compile(t)}compileAG(t,e,n,r){return this._getCachedCompiledPatterns(t).compileAG(t,n,r)}_getCachedCompiledPatterns(t){if(!this._cachedCompiledPatterns){this._cachedCompiledPatterns=new zl;for(const e of this.patterns)t.getRule(e).collectPatterns(t,this._cachedCompiledPatterns)}return this._cachedCompiledPatterns}compileWhile(t,e){return this._getCachedCompiledWhilePatterns(t,e).compile(t)}compileWhileAG(t,e,n,r){return this._getCachedCompiledWhilePatterns(t,e).compileAG(t,n,r)}_getCachedCompiledWhilePatterns(t,e){return this._cachedCompiledWhilePatterns||(this._cachedCompiledWhilePatterns=new zl,this._cachedCompiledWhilePatterns.push(this._while.hasBackReferences?this._while.clone():this._while)),this._while.hasBackReferences&&this._cachedCompiledWhilePatterns.setSource(0,e||""),this._cachedCompiledWhilePatterns}},Zk=class mn{static createCaptureRule(e,n,r,s,a){return e.registerRule(l=>new QL(n,l,r,s,a))}static getCompiledRuleId(e,n,r){return e.id||n.registerRule(s=>{if(e.id=s,e.match)return new JL(e.$vscodeTextmateLocation,e.id,e.name,e.match,mn._compileCaptures(e.captures,n,r));if(typeof e.begin>"u"){e.repository&&(r=zk({},r,e.repository));let a=e.patterns;return typeof a>"u"&&e.include&&(a=[{include:e.include}]),new $1(e.$vscodeTextmateLocation,e.id,e.name,e.contentName,mn._compilePatterns(a,n,r))}return e.while?new Ef(e.$vscodeTextmateLocation,e.id,e.name,e.contentName,e.begin,mn._compileCaptures(e.beginCaptures||e.captures,n,r),e.while,mn._compileCaptures(e.whileCaptures||e.captures,n,r),mn._compilePatterns(e.patterns,n,r)):new pg(e.$vscodeTextmateLocation,e.id,e.name,e.contentName,e.begin,mn._compileCaptures(e.beginCaptures||e.captures,n,r),e.end,mn._compileCaptures(e.endCaptures||e.captures,n,r),e.applyEndPatternLast,mn._compilePatterns(e.patterns,n,r))}),e.id}static _compileCaptures(e,n,r){let s=[];if(e){let a=0;for(const l in e){if(l==="$vscodeTextmateLocation")continue;const u=parseInt(l,10);u>a&&(a=u)}for(let l=0;l<=a;l++)s[l]=null;for(const l in e){if(l==="$vscodeTextmateLocation")continue;const u=parseInt(l,10);let f=0;e[l].patterns&&(f=mn.getCompiledRuleId(e[l],n,r)),s[u]=mn.createCaptureRule(n,e[l].$vscodeTextmateLocation,e[l].name,e[l].contentName,f)}}return s}static _compilePatterns(e,n,r){let s=[];if(e)for(let a=0,l=e.length;a<l;a++){const u=e[a];let f=-1;if(u.include){const h=Gk(u.include);switch(h.kind){case 0:case 1:f=mn.getCompiledRuleId(r[u.include],n,r);break;case 2:let m=r[h.ruleName];m&&(f=mn.getCompiledRuleId(m,n,r));break;case 3:case 4:const p=h.scopeName,y=h.kind===4?h.ruleName:null,g=n.getExternalGrammar(p,r);if(g)if(y){let v=g.repository[y];v&&(f=mn.getCompiledRuleId(v,n,g.repository))}else f=mn.getCompiledRuleId(g.repository.$self,n,g.repository);break}}else f=mn.getCompiledRuleId(u,n,r);if(f!==-1){const h=n.getRule(f);let m=!1;if((h instanceof $1||h instanceof pg||h instanceof Ef)&&h.hasMissingPatterns&&h.patterns.length===0&&(m=!0),m)continue;s.push(f)}}return{patterns:s,hasMissingPatterns:(e?e.length:0)!==s.length}}},jl=class Qk{source;ruleId;hasAnchor;hasBackReferences;_anchorCache;constructor(e,n){if(e&&typeof e=="string"){const r=e.length;let s=0,a=[],l=!1;for(let u=0;u<r;u++)if(e.charAt(u)==="\\"&&u+1<r){const h=e.charAt(u+1);h==="z"?(a.push(e.substring(s,u)),a.push("$(?!\\n)(?<!\\n)"),s=u+2):(h==="A"||h==="G")&&(l=!0),u++}this.hasAnchor=l,s===0?this.source=e:(a.push(e.substring(s,r)),this.source=a.join(""))}else this.hasAnchor=!1,this.source=e;this.hasAnchor?this._anchorCache=this._buildAnchorCache():this._anchorCache=null,this.ruleId=n,typeof this.source=="string"?this.hasBackReferences=KL.test(this.source):this.hasBackReferences=!1}clone(){return new Qk(this.source,this.ruleId)}setSource(e){this.source!==e&&(this.source=e,this.hasAnchor&&(this._anchorCache=this._buildAnchorCache()))}resolveBackReferences(e,n){if(typeof this.source!="string")throw new Error("This method should only be called if the source is a string");let r=n.map(s=>e.substring(s.start,s.end));return B1.lastIndex=0,this.source.replace(B1,(s,a)=>Uk(r[parseInt(a,10)]||""))}_buildAnchorCache(){if(typeof this.source!="string")throw new Error("This method should only be called if the source is a string");let e=[],n=[],r=[],s=[],a,l,u,f;for(a=0,l=this.source.length;a<l;a++)u=this.source.charAt(a),e[a]=u,n[a]=u,r[a]=u,s[a]=u,u==="\\"&&a+1<l&&(f=this.source.charAt(a+1),f==="A"?(e[a+1]="",n[a+1]="",r[a+1]="A",s[a+1]="A"):f==="G"?(e[a+1]="",n[a+1]="G",r[a+1]="",s[a+1]="G"):(e[a+1]=f,n[a+1]=f,r[a+1]=f,s[a+1]=f),a++);return{A0_G0:e.join(""),A0_G1:n.join(""),A1_G0:r.join(""),A1_G1:s.join("")}}resolveAnchors(e,n){return!this.hasAnchor||!this._anchorCache||typeof this.source!="string"?this.source:e?n?this._anchorCache.A1_G1:this._anchorCache.A1_G0:n?this._anchorCache.A0_G1:this._anchorCache.A0_G0}},zl=class{_items;_hasAnchors;_cached;_anchorCache;constructor(){this._items=[],this._hasAnchors=!1,this._cached=null,this._anchorCache={A0_G0:null,A0_G1:null,A1_G0:null,A1_G1:null}}dispose(){this._disposeCaches()}_disposeCaches(){this._cached&&(this._cached.dispose(),this._cached=null),this._anchorCache.A0_G0&&(this._anchorCache.A0_G0.dispose(),this._anchorCache.A0_G0=null),this._anchorCache.A0_G1&&(this._anchorCache.A0_G1.dispose(),this._anchorCache.A0_G1=null),this._anchorCache.A1_G0&&(this._anchorCache.A1_G0.dispose(),this._anchorCache.A1_G0=null),this._anchorCache.A1_G1&&(this._anchorCache.A1_G1.dispose(),this._anchorCache.A1_G1=null)}push(t){this._items.push(t),this._hasAnchors=this._hasAnchors||t.hasAnchor}unshift(t){this._items.unshift(t),this._hasAnchors=this._hasAnchors||t.hasAnchor}length(){return this._items.length}setSource(t,e){this._items[t].source!==e&&(this._disposeCaches(),this._items[t].setSource(e))}compile(t){if(!this._cached){let e=this._items.map(n=>n.source);this._cached=new U1(t,e,this._items.map(n=>n.ruleId))}return this._cached}compileAG(t,e,n){return this._hasAnchors?e?n?(this._anchorCache.A1_G1||(this._anchorCache.A1_G1=this._resolveAnchors(t,e,n)),this._anchorCache.A1_G1):(this._anchorCache.A1_G0||(this._anchorCache.A1_G0=this._resolveAnchors(t,e,n)),this._anchorCache.A1_G0):n?(this._anchorCache.A0_G1||(this._anchorCache.A0_G1=this._resolveAnchors(t,e,n)),this._anchorCache.A0_G1):(this._anchorCache.A0_G0||(this._anchorCache.A0_G0=this._resolveAnchors(t,e,n)),this._anchorCache.A0_G0):this.compile(t)}_resolveAnchors(t,e,n){let r=this._items.map(s=>s.resolveAnchors(e,n));return new U1(t,r,this._items.map(s=>s.ruleId))}},U1=class{constructor(t,e,n){this.regExps=e,this.rules=n,this.scanner=t.createOnigScanner(e)}scanner;dispose(){typeof this.scanner.dispose=="function"&&this.scanner.dispose()}toString(){const t=[];for(let e=0,n=this.rules.length;e<n;e++)t.push("   - "+this.rules[e]+": "+this.regExps[e]);return t.join(`
`)}findNextMatchSync(t,e,n){const r=this.scanner.findNextMatchSync(t,e,n);return r?{ruleId:this.rules[r.index],captureIndices:r.captureIndices}:null}},am=class{constructor(t,e){this.languageId=t,this.tokenType=e}},YL=class mg{_defaultAttributes;_embeddedLanguagesMatcher;constructor(e,n){this._defaultAttributes=new am(e,8),this._embeddedLanguagesMatcher=new XL(Object.entries(n||{}))}getDefaultAttributes(){return this._defaultAttributes}getBasicScopeAttributes(e){return e===null?mg._NULL_SCOPE_METADATA:this._getBasicScopeAttributes.get(e)}static _NULL_SCOPE_METADATA=new am(0,0);_getBasicScopeAttributes=new qk(e=>{const n=this._scopeToLanguage(e),r=this._toStandardTokenType(e);return new am(n,r)});_scopeToLanguage(e){return this._embeddedLanguagesMatcher.match(e)||0}_toStandardTokenType(e){const n=e.match(mg.STANDARD_TOKEN_TYPE_REGEXP);if(!n)return 8;switch(n[1]){case"comment":return 1;case"string":return 2;case"regex":return 3;case"meta.embedded":return 0}throw new Error("Unexpected match for standard token type!")}static STANDARD_TOKEN_TYPE_REGEXP=/\b(comment|string|regex|meta\.embedded)\b/},XL=class{values;scopesRegExp;constructor(t){if(t.length===0)this.values=null,this.scopesRegExp=null;else{this.values=new Map(t);const e=t.map(([n,r])=>Uk(n));e.sort(),e.reverse(),this.scopesRegExp=new RegExp(`^((${e.join(")|(")}))($|\\.)`,"")}}match(t){if(!this.scopesRegExp)return;const e=t.match(this.scopesRegExp);if(e)return this.values.get(e[1])}},q1=class{constructor(t,e){this.stack=t,this.stoppedEarly=e}};function Jk(t,e,n,r,s,a,l,u){const f=e.content.length;let h=!1,m=-1;if(l){const g=WL(t,e,n,r,s,a);s=g.stack,r=g.linePos,n=g.isFirstLine,m=g.anchorPosition}const p=Date.now();for(;!h;){if(u!==0&&Date.now()-p>u)return new q1(s,!0);y()}return new q1(s,!1);function y(){const g=ej(t,e,n,r,s,m);if(!g){a.produce(s,f),h=!0;return}const v=g.captureIndices,x=g.matchedRuleId,E=v&&v.length>0?v[0].end>r:!1;if(x===ZL){const S=s.getRule(t);a.produce(s,v[0].start),s=s.withContentNameScopesList(s.nameScopesList),ol(t,e,n,s,a,S.endCaptures,v),a.produce(s,v[0].end);const C=s;if(s=s.parent,m=C.getAnchorPos(),!E&&C.getEnterPos()===r){s=C,a.produce(s,f),h=!0;return}}else{const S=t.getRule(x);a.produce(s,v[0].start);const C=s,T=S.getName(e.content,v),L=s.contentNameScopesList.pushAttributed(T,t);if(s=s.push(x,r,m,v[0].end===f,null,L,L),S instanceof pg){const D=S;ol(t,e,n,s,a,D.beginCaptures,v),a.produce(s,v[0].end),m=v[0].end;const N=D.getContentName(e.content,v),B=L.pushAttributed(N,t);if(s=s.withContentNameScopesList(B),D.endHasBackReferences&&(s=s.withEndRule(D.getEndWithResolvedBackReferences(e.content,v))),!E&&C.hasSameRuleAs(s)){s=s.pop(),a.produce(s,f),h=!0;return}}else if(S instanceof Ef){const D=S;ol(t,e,n,s,a,D.beginCaptures,v),a.produce(s,v[0].end),m=v[0].end;const N=D.getContentName(e.content,v),B=L.pushAttributed(N,t);if(s=s.withContentNameScopesList(B),D.whileHasBackReferences&&(s=s.withEndRule(D.getWhileWithResolvedBackReferences(e.content,v))),!E&&C.hasSameRuleAs(s)){s=s.pop(),a.produce(s,f),h=!0;return}}else if(ol(t,e,n,s,a,S.captures,v),a.produce(s,v[0].end),s=s.pop(),!E){s=s.safePop(),a.produce(s,f),h=!0;return}}v[0].end>r&&(r=v[0].end,n=!1)}}function WL(t,e,n,r,s,a){let l=s.beginRuleCapturedEOL?0:-1;const u=[];for(let f=s;f;f=f.pop()){const h=f.getRule(t);h instanceof Ef&&u.push({rule:h,stack:f})}for(let f=u.pop();f;f=u.pop()){const{ruleScanner:h,findOptions:m}=rj(f.rule,t,f.stack.endRule,n,r===l),p=h.findNextMatchSync(e,r,m);if(p){if(p.ruleId!==Kk){s=f.stack.pop();break}p.captureIndices&&p.captureIndices.length&&(a.produce(f.stack,p.captureIndices[0].start),ol(t,e,n,f.stack,a,f.rule.whileCaptures,p.captureIndices),a.produce(f.stack,p.captureIndices[0].end),l=p.captureIndices[0].end,p.captureIndices[0].end>r&&(r=p.captureIndices[0].end,n=!1))}else{s=f.stack.pop();break}}return{stack:s,linePos:r,anchorPosition:l,isFirstLine:n}}function ej(t,e,n,r,s,a){const l=tj(t,e,n,r,s,a),u=t.getInjections();if(u.length===0)return l;const f=nj(u,t,e,n,r,s,a);if(!f)return l;if(!l)return f;const h=l.captureIndices[0].start,m=f.captureIndices[0].start;return m<h||f.priorityMatch&&m===h?f:l}function tj(t,e,n,r,s,a){const l=s.getRule(t),{ruleScanner:u,findOptions:f}=Yk(l,t,s.endRule,n,r===a),h=u.findNextMatchSync(e,r,f);return h?{captureIndices:h.captureIndices,matchedRuleId:h.ruleId}:null}function nj(t,e,n,r,s,a,l){let u=Number.MAX_VALUE,f=null,h,m=0;const p=a.contentNameScopesList.getScopeNames();for(let y=0,g=t.length;y<g;y++){const v=t[y];if(!v.matcher(p))continue;const x=e.getRule(v.ruleId),{ruleScanner:E,findOptions:S}=Yk(x,e,null,r,s===l),C=E.findNextMatchSync(n,s,S);if(!C)continue;const T=C.captureIndices[0].start;if(!(T>=u)&&(u=T,f=C.captureIndices,h=C.ruleId,m=v.priority,u===s))break}return f?{priorityMatch:m===-1,captureIndices:f,matchedRuleId:h}:null}function Yk(t,e,n,r,s){return{ruleScanner:t.compileAG(e,n,r,s),findOptions:0}}function rj(t,e,n,r,s){return{ruleScanner:t.compileWhileAG(e,n,r,s),findOptions:0}}function ol(t,e,n,r,s,a,l){if(a.length===0)return;const u=e.content,f=Math.min(a.length,l.length),h=[],m=l[0].end;for(let p=0;p<f;p++){const y=a[p];if(y===null)continue;const g=l[p];if(g.length===0)continue;if(g.start>m)break;for(;h.length>0&&h[h.length-1].endPos<=g.start;)s.produceFromScopes(h[h.length-1].scopes,h[h.length-1].endPos),h.pop();if(h.length>0?s.produceFromScopes(h[h.length-1].scopes,g.start):s.produce(r,g.start),y.retokenizeCapturedWithRuleId){const x=y.getName(u,l),E=r.contentNameScopesList.pushAttributed(x,t),S=y.getContentName(u,l),C=E.pushAttributed(S,t),T=r.push(y.retokenizeCapturedWithRuleId,g.start,-1,!1,null,E,C),L=t.createOnigString(u.substring(0,g.end));Jk(t,L,n&&g.start===0,g.start,T,s,!1,0),Hk(L);continue}const v=y.getName(u,l);if(v!==null){const E=(h.length>0?h[h.length-1].scopes:r.contentNameScopesList).pushAttributed(v,t);h.push(new sj(E,g.end))}}for(;h.length>0;)s.produceFromScopes(h[h.length-1].scopes,h[h.length-1].endPos),h.pop()}var sj=class{scopes;endPos;constructor(t,e){this.scopes=t,this.endPos=e}};function ij(t,e,n,r,s,a,l,u){return new oj(t,e,n,r,s,a,l,u)}function F1(t,e,n,r,s){const a=Sf(e,Cf),l=Zk.getCompiledRuleId(n,r,s.repository);for(const u of a)t.push({debugSelector:e,matcher:u.matcher,ruleId:l,grammar:s,priority:u.priority})}function Cf(t,e){if(e.length<t.length)return!1;let n=0;return t.every(r=>{for(let s=n;s<e.length;s++)if(aj(e[s],r))return n=s+1,!0;return!1})}function aj(t,e){if(!t)return!1;if(t===e)return!0;const n=e.length;return t.length>n&&t.substr(0,n)===e&&t[n]==="."}var oj=class{constructor(t,e,n,r,s,a,l,u){if(this._rootScopeName=t,this.balancedBracketSelectors=a,this._onigLib=u,this._basicScopeAttributesProvider=new YL(n,r),this._rootId=-1,this._lastRuleId=0,this._ruleId2desc=[null],this._includedGrammars={},this._grammarRepository=l,this._grammar=V1(e,null),this._injections=null,this._tokenTypeMatchers=[],s)for(const f of Object.keys(s)){const h=Sf(f,Cf);for(const m of h)this._tokenTypeMatchers.push({matcher:m.matcher,type:s[f]})}}_rootId;_lastRuleId;_ruleId2desc;_includedGrammars;_grammarRepository;_grammar;_injections;_basicScopeAttributesProvider;_tokenTypeMatchers;get themeProvider(){return this._grammarRepository}dispose(){for(const t of this._ruleId2desc)t&&t.dispose()}createOnigScanner(t){return this._onigLib.createOnigScanner(t)}createOnigString(t){return this._onigLib.createOnigString(t)}getMetadataForScope(t){return this._basicScopeAttributesProvider.getBasicScopeAttributes(t)}_collectInjections(){const t={lookup:s=>s===this._rootScopeName?this._grammar:this.getExternalGrammar(s),injections:s=>this._grammarRepository.injections(s)},e=[],n=this._rootScopeName,r=t.lookup(n);if(r){const s=r.injections;if(s)for(let l in s)F1(e,l,s[l],this,r);const a=this._grammarRepository.injections(n);a&&a.forEach(l=>{const u=this.getExternalGrammar(l);if(u){const f=u.injectionSelector;f&&F1(e,f,u,this,u)}})}return e.sort((s,a)=>s.priority-a.priority),e}getInjections(){return this._injections===null&&(this._injections=this._collectInjections()),this._injections}registerRule(t){const e=++this._lastRuleId,n=t(e);return this._ruleId2desc[e]=n,n}getRule(t){return this._ruleId2desc[t]}getExternalGrammar(t,e){if(this._includedGrammars[t])return this._includedGrammars[t];if(this._grammarRepository){const n=this._grammarRepository.lookup(t);if(n)return this._includedGrammars[t]=V1(n,e&&e.$base),this._includedGrammars[t]}}tokenizeLine(t,e,n=0){const r=this._tokenize(t,e,!1,n);return{tokens:r.lineTokens.getResult(r.ruleStack,r.lineLength),ruleStack:r.ruleStack,stoppedEarly:r.stoppedEarly}}tokenizeLine2(t,e,n=0){const r=this._tokenize(t,e,!0,n);return{tokens:r.lineTokens.getBinaryResult(r.ruleStack,r.lineLength),ruleStack:r.ruleStack,stoppedEarly:r.stoppedEarly}}_tokenize(t,e,n,r){this._rootId===-1&&(this._rootId=Zk.getCompiledRuleId(this._grammar.repository.$self,this,this._grammar.repository),this.getInjections());let s;if(!e||e===gg.NULL){s=!0;const h=this._basicScopeAttributesProvider.getDefaultAttributes(),m=this.themeProvider.getDefaults(),p=Ha.set(0,h.languageId,h.tokenType,null,m.fontStyle,m.foregroundId,m.backgroundId),y=this.getRule(this._rootId).getName(null,null);let g;y?g=vl.createRootAndLookUpScopeName(y,p,this):g=vl.createRoot("unknown",p),e=new gg(null,this._rootId,-1,-1,!1,null,g,g)}else s=!1,e.reset();t=t+`
`;const a=this.createOnigString(t),l=a.content.length,u=new cj(n,t,this._tokenTypeMatchers,this.balancedBracketSelectors),f=Jk(this,a,s,0,e,u,!0,r);return Hk(a),{lineLength:l,lineTokens:u,ruleStack:f.stack,stoppedEarly:f.stoppedEarly}}};function V1(t,e){return t=CL(t),t.repository=t.repository||{},t.repository.$self={$vscodeTextmateLocation:t.$vscodeTextmateLocation,patterns:t.patterns,name:t.scopeName},t.repository.$base=e||t.repository.$self,t}var vl=class jr{constructor(e,n,r){this.parent=e,this.scopePath=n,this.tokenAttributes=r}static fromExtension(e,n){let r=e,s=e?.scopePath??null;for(const a of n)s=im.push(s,a.scopeNames),r=new jr(r,s,a.encodedTokenAttributes);return r}static createRoot(e,n){return new jr(null,new im(null,e),n)}static createRootAndLookUpScopeName(e,n,r){const s=r.getMetadataForScope(e),a=new im(null,e),l=r.themeProvider.themeMatch(a),u=jr.mergeAttributes(n,s,l);return new jr(null,a,u)}get scopeName(){return this.scopePath.scopeName}toString(){return this.getScopeNames().join(" ")}equals(e){return jr.equals(this,e)}static equals(e,n){do{if(e===n||!e&&!n)return!0;if(!e||!n||e.scopeName!==n.scopeName||e.tokenAttributes!==n.tokenAttributes)return!1;e=e.parent,n=n.parent}while(!0)}static mergeAttributes(e,n,r){let s=-1,a=0,l=0;return r!==null&&(s=r.fontStyle,a=r.foregroundId,l=r.backgroundId),Ha.set(e,n.languageId,n.tokenType,null,s,a,l)}pushAttributed(e,n){if(e===null)return this;if(e.indexOf(" ")===-1)return jr._pushAttributed(this,e,n);const r=e.split(/ /g);let s=this;for(const a of r)s=jr._pushAttributed(s,a,n);return s}static _pushAttributed(e,n,r){const s=r.getMetadataForScope(n),a=e.scopePath.push(n),l=r.themeProvider.themeMatch(a),u=jr.mergeAttributes(e.tokenAttributes,s,l);return new jr(e,a,u)}getScopeNames(){return this.scopePath.getSegments()}getExtensionIfDefined(e){const n=[];let r=this;for(;r&&r!==e;)n.push({encodedTokenAttributes:r.tokenAttributes,scopeNames:r.scopePath.getExtensionIfDefined(r.parent?.scopePath??null)}),r=r.parent;return r===e?n.reverse():void 0}},gg=class ki{constructor(e,n,r,s,a,l,u,f){this.parent=e,this.ruleId=n,this.beginRuleCapturedEOL=a,this.endRule=l,this.nameScopesList=u,this.contentNameScopesList=f,this.depth=this.parent?this.parent.depth+1:1,this._enterPos=r,this._anchorPos=s}_stackElementBrand=void 0;static NULL=new ki(null,0,0,0,!1,null,null,null);_enterPos;_anchorPos;depth;equals(e){return e===null?!1:ki._equals(this,e)}static _equals(e,n){return e===n?!0:this._structuralEquals(e,n)?vl.equals(e.contentNameScopesList,n.contentNameScopesList):!1}static _structuralEquals(e,n){do{if(e===n||!e&&!n)return!0;if(!e||!n||e.depth!==n.depth||e.ruleId!==n.ruleId||e.endRule!==n.endRule)return!1;e=e.parent,n=n.parent}while(!0)}clone(){return this}static _reset(e){for(;e;)e._enterPos=-1,e._anchorPos=-1,e=e.parent}reset(){ki._reset(this)}pop(){return this.parent}safePop(){return this.parent?this.parent:this}push(e,n,r,s,a,l,u){return new ki(this,e,n,r,s,a,l,u)}getEnterPos(){return this._enterPos}getAnchorPos(){return this._anchorPos}getRule(e){return e.getRule(this.ruleId)}toString(){const e=[];return this._writeString(e,0),"["+e.join(",")+"]"}_writeString(e,n){return this.parent&&(n=this.parent._writeString(e,n)),e[n++]=`(${this.ruleId}, ${this.nameScopesList?.toString()}, ${this.contentNameScopesList?.toString()})`,n}withContentNameScopesList(e){return this.contentNameScopesList===e?this:this.parent.push(this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,this.endRule,this.nameScopesList,e)}withEndRule(e){return this.endRule===e?this:new ki(this.parent,this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,e,this.nameScopesList,this.contentNameScopesList)}hasSameRuleAs(e){let n=this;for(;n&&n._enterPos===e._enterPos;){if(n.ruleId===e.ruleId)return!0;n=n.parent}return!1}toStateStackFrame(){return{ruleId:this.ruleId,beginRuleCapturedEOL:this.beginRuleCapturedEOL,endRule:this.endRule,nameScopesList:this.nameScopesList?.getExtensionIfDefined(this.parent?.nameScopesList??null)??[],contentNameScopesList:this.contentNameScopesList?.getExtensionIfDefined(this.nameScopesList)??[]}}static pushFrame(e,n){const r=vl.fromExtension(e?.nameScopesList??null,n.nameScopesList);return new ki(e,n.ruleId,n.enterPos??-1,n.anchorPos??-1,n.beginRuleCapturedEOL,n.endRule,r,vl.fromExtension(r,n.contentNameScopesList))}},lj=class{balancedBracketScopes;unbalancedBracketScopes;allowAny=!1;constructor(t,e){this.balancedBracketScopes=t.flatMap(n=>n==="*"?(this.allowAny=!0,[]):Sf(n,Cf).map(r=>r.matcher)),this.unbalancedBracketScopes=e.flatMap(n=>Sf(n,Cf).map(r=>r.matcher))}get matchesAlways(){return this.allowAny&&this.unbalancedBracketScopes.length===0}get matchesNever(){return this.balancedBracketScopes.length===0&&!this.allowAny}match(t){for(const e of this.unbalancedBracketScopes)if(e(t))return!1;for(const e of this.balancedBracketScopes)if(e(t))return!0;return this.allowAny}},cj=class{constructor(t,e,n,r){this.balancedBracketSelectors=r,this._emitBinaryTokens=t,this._tokenTypeOverrides=n,this._lineText=null,this._tokens=[],this._binaryTokens=[],this._lastTokenEndIndex=0}_emitBinaryTokens;_lineText;_tokens;_binaryTokens;_lastTokenEndIndex;_tokenTypeOverrides;produce(t,e){this.produceFromScopes(t.contentNameScopesList,e)}produceFromScopes(t,e){if(this._lastTokenEndIndex>=e)return;if(this._emitBinaryTokens){let r=t?.tokenAttributes??0,s=!1;if(this.balancedBracketSelectors?.matchesAlways&&(s=!0),this._tokenTypeOverrides.length>0||this.balancedBracketSelectors&&!this.balancedBracketSelectors.matchesAlways&&!this.balancedBracketSelectors.matchesNever){const a=t?.getScopeNames()??[];for(const l of this._tokenTypeOverrides)l.matcher(a)&&(r=Ha.set(r,0,l.type,null,-1,0,0));this.balancedBracketSelectors&&(s=this.balancedBracketSelectors.match(a))}if(s&&(r=Ha.set(r,0,8,s,-1,0,0)),this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-1]===r){this._lastTokenEndIndex=e;return}this._binaryTokens.push(this._lastTokenEndIndex),this._binaryTokens.push(r),this._lastTokenEndIndex=e;return}const n=t?.getScopeNames()??[];this._tokens.push({startIndex:this._lastTokenEndIndex,endIndex:e,scopes:n}),this._lastTokenEndIndex=e}getResult(t,e){return this._tokens.length>0&&this._tokens[this._tokens.length-1].startIndex===e-1&&this._tokens.pop(),this._tokens.length===0&&(this._lastTokenEndIndex=-1,this.produce(t,e),this._tokens[this._tokens.length-1].startIndex=0),this._tokens}getBinaryResult(t,e){this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-2]===e-1&&(this._binaryTokens.pop(),this._binaryTokens.pop()),this._binaryTokens.length===0&&(this._lastTokenEndIndex=-1,this.produce(t,e),this._binaryTokens[this._binaryTokens.length-2]=0);const n=new Uint32Array(this._binaryTokens.length);for(let r=0,s=this._binaryTokens.length;r<s;r++)n[r]=this._binaryTokens[r];return n}},uj=class{constructor(t,e){this._onigLib=e,this._theme=t}_grammars=new Map;_rawGrammars=new Map;_injectionGrammars=new Map;_theme;dispose(){for(const t of this._grammars.values())t.dispose()}setTheme(t){this._theme=t}getColorMap(){return this._theme.getColorMap()}addGrammar(t,e){this._rawGrammars.set(t.scopeName,t),e&&this._injectionGrammars.set(t.scopeName,e)}lookup(t){return this._rawGrammars.get(t)}injections(t){return this._injectionGrammars.get(t)}getDefaults(){return this._theme.getDefaults()}themeMatch(t){return this._theme.match(t)}grammarForScopeName(t,e,n,r,s){if(!this._grammars.has(t)){let a=this._rawGrammars.get(t);if(!a)return null;this._grammars.set(t,ij(t,a,e,n,r,s,this,this._onigLib))}return this._grammars.get(t)}},fj=class{_options;_syncRegistry;_ensureGrammarCache;constructor(e){this._options=e,this._syncRegistry=new uj(wf.createFromRawTheme(e.theme,e.colorMap),e.onigLib),this._ensureGrammarCache=new Map}dispose(){this._syncRegistry.dispose()}setTheme(e,n){this._syncRegistry.setTheme(wf.createFromRawTheme(e,n))}getColorMap(){return this._syncRegistry.getColorMap()}loadGrammarWithEmbeddedLanguages(e,n,r){return this.loadGrammarWithConfiguration(e,n,{embeddedLanguages:r})}loadGrammarWithConfiguration(e,n,r){return this._loadGrammar(e,n,r.embeddedLanguages,r.tokenTypes,new lj(r.balancedBracketSelectors||[],r.unbalancedBracketSelectors||[]))}loadGrammar(e){return this._loadGrammar(e,0,null,null,null)}_loadGrammar(e,n,r,s,a){const l=new $L(this._syncRegistry,e);for(;l.Q.length>0;)l.Q.map(u=>this._loadSingleGrammar(u.scopeName)),l.processQueue();return this._grammarForScopeName(e,n,r,s,a)}_loadSingleGrammar(e){this._ensureGrammarCache.has(e)||(this._doLoadSingleGrammar(e),this._ensureGrammarCache.set(e,!0))}_doLoadSingleGrammar(e){const n=this._options.loadGrammar(e);if(n){const r=typeof this._options.getInjections=="function"?this._options.getInjections(e):void 0;this._syncRegistry.addGrammar(n,r)}}addGrammar(e,n=[],r=0,s=null){return this._syncRegistry.addGrammar(e,n),this._grammarForScopeName(e.scopeName,r,s)}_grammarForScopeName(e,n=0,r=null,s=null,a=null){return this._syncRegistry.grammarForScopeName(e,n,r,s,a)}},yg=gg.NULL;const hj=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"];class Yl{constructor(e,n,r){this.normal=n,this.property=e,r&&(this.space=r)}}Yl.prototype.normal={};Yl.prototype.property={};Yl.prototype.space=void 0;function Xk(t,e){const n={},r={};for(const s of t)Object.assign(n,s.property),Object.assign(r,s.normal);return new Yl(n,r,e)}function _g(t){return t.toLowerCase()}class Vn{constructor(e,n){this.attribute=n,this.property=e}}Vn.prototype.attribute="";Vn.prototype.booleanish=!1;Vn.prototype.boolean=!1;Vn.prototype.commaOrSpaceSeparated=!1;Vn.prototype.commaSeparated=!1;Vn.prototype.defined=!1;Vn.prototype.mustUseProperty=!1;Vn.prototype.number=!1;Vn.prototype.overloadedBoolean=!1;Vn.prototype.property="";Vn.prototype.spaceSeparated=!1;Vn.prototype.space=void 0;let dj=0;const Be=zi(),Lt=zi(),bg=zi(),de=zi(),yt=zi(),Ba=zi(),Xn=zi();function zi(){return 2**++dj}const vg=Object.freeze(Object.defineProperty({__proto__:null,boolean:Be,booleanish:Lt,commaOrSpaceSeparated:Xn,commaSeparated:Ba,number:de,overloadedBoolean:bg,spaceSeparated:yt},Symbol.toStringTag,{value:"Module"})),om=Object.keys(vg);class Cy extends Vn{constructor(e,n,r,s){let a=-1;if(super(e,n),H1(this,"space",s),typeof r=="number")for(;++a<om.length;){const l=om[a];H1(this,om[a],(r&vg[l])===vg[l])}}}Cy.prototype.defined=!0;function H1(t,e,n){n&&(t[e]=n)}function Ja(t){const e={},n={};for(const[r,s]of Object.entries(t.properties)){const a=new Cy(r,t.transform(t.attributes||{},r),s,t.space);t.mustUseProperty&&t.mustUseProperty.includes(r)&&(a.mustUseProperty=!0),e[r]=a,n[_g(r)]=r,n[_g(a.attribute)]=r}return new Yl(e,n,t.space)}const Wk=Ja({properties:{ariaActiveDescendant:null,ariaAtomic:Lt,ariaAutoComplete:null,ariaBusy:Lt,ariaChecked:Lt,ariaColCount:de,ariaColIndex:de,ariaColSpan:de,ariaControls:yt,ariaCurrent:null,ariaDescribedBy:yt,ariaDetails:null,ariaDisabled:Lt,ariaDropEffect:yt,ariaErrorMessage:null,ariaExpanded:Lt,ariaFlowTo:yt,ariaGrabbed:Lt,ariaHasPopup:null,ariaHidden:Lt,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:yt,ariaLevel:de,ariaLive:null,ariaModal:Lt,ariaMultiLine:Lt,ariaMultiSelectable:Lt,ariaOrientation:null,ariaOwns:yt,ariaPlaceholder:null,ariaPosInSet:de,ariaPressed:Lt,ariaReadOnly:Lt,ariaRelevant:null,ariaRequired:Lt,ariaRoleDescription:yt,ariaRowCount:de,ariaRowIndex:de,ariaRowSpan:de,ariaSelected:Lt,ariaSetSize:de,ariaSort:null,ariaValueMax:de,ariaValueMin:de,ariaValueNow:de,ariaValueText:null,role:null},transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function eE(t,e){return e in t?t[e]:e}function tE(t,e){return eE(t,e.toLowerCase())}const pj=Ja({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Ba,acceptCharset:yt,accessKey:yt,action:null,allow:null,allowFullScreen:Be,allowPaymentRequest:Be,allowUserMedia:Be,alt:null,as:null,async:Be,autoCapitalize:null,autoComplete:yt,autoFocus:Be,autoPlay:Be,blocking:yt,capture:null,charSet:null,checked:Be,cite:null,className:yt,cols:de,colSpan:null,content:null,contentEditable:Lt,controls:Be,controlsList:yt,coords:de|Ba,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Be,defer:Be,dir:null,dirName:null,disabled:Be,download:bg,draggable:Lt,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Be,formTarget:null,headers:yt,height:de,hidden:bg,high:de,href:null,hrefLang:null,htmlFor:yt,httpEquiv:yt,id:null,imageSizes:null,imageSrcSet:null,inert:Be,inputMode:null,integrity:null,is:null,isMap:Be,itemId:null,itemProp:yt,itemRef:yt,itemScope:Be,itemType:yt,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Be,low:de,manifest:null,max:null,maxLength:de,media:null,method:null,min:null,minLength:de,multiple:Be,muted:Be,name:null,nonce:null,noModule:Be,noValidate:Be,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Be,optimum:de,pattern:null,ping:yt,placeholder:null,playsInline:Be,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Be,referrerPolicy:null,rel:yt,required:Be,reversed:Be,rows:de,rowSpan:de,sandbox:yt,scope:null,scoped:Be,seamless:Be,selected:Be,shadowRootClonable:Be,shadowRootDelegatesFocus:Be,shadowRootMode:null,shape:null,size:de,sizes:null,slot:null,span:de,spellCheck:Lt,src:null,srcDoc:null,srcLang:null,srcSet:null,start:de,step:null,style:null,tabIndex:de,target:null,title:null,translate:null,type:null,typeMustMatch:Be,useMap:null,value:Lt,width:de,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:yt,axis:null,background:null,bgColor:null,border:de,borderColor:null,bottomMargin:de,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Be,declare:Be,event:null,face:null,frame:null,frameBorder:null,hSpace:de,leftMargin:de,link:null,longDesc:null,lowSrc:null,marginHeight:de,marginWidth:de,noResize:Be,noHref:Be,noShade:Be,noWrap:Be,object:null,profile:null,prompt:null,rev:null,rightMargin:de,rules:null,scheme:null,scrolling:Lt,standby:null,summary:null,text:null,topMargin:de,valueType:null,version:null,vAlign:null,vLink:null,vSpace:de,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Be,disableRemotePlayback:Be,prefix:null,property:null,results:de,security:null,unselectable:null},space:"html",transform:tE}),mj=Ja({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Xn,accentHeight:de,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:de,amplitude:de,arabicForm:null,ascent:de,attributeName:null,attributeType:null,azimuth:de,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:de,by:null,calcMode:null,capHeight:de,className:yt,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:de,diffuseConstant:de,direction:null,display:null,dur:null,divisor:de,dominantBaseline:null,download:Be,dx:null,dy:null,edgeMode:null,editable:null,elevation:de,enableBackground:null,end:null,event:null,exponent:de,externalResourcesRequired:null,fill:null,fillOpacity:de,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Ba,g2:Ba,glyphName:Ba,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:de,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:de,horizOriginX:de,horizOriginY:de,id:null,ideographic:de,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:de,k:de,k1:de,k2:de,k3:de,k4:de,kernelMatrix:Xn,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:de,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:de,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:de,overlineThickness:de,paintOrder:null,panose1:null,path:null,pathLength:de,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:yt,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:de,pointsAtY:de,pointsAtZ:de,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Xn,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Xn,rev:Xn,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Xn,requiredFeatures:Xn,requiredFonts:Xn,requiredFormats:Xn,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:de,specularExponent:de,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:de,strikethroughThickness:de,string:null,stroke:null,strokeDashArray:Xn,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:de,strokeOpacity:de,strokeWidth:null,style:null,surfaceScale:de,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Xn,tabIndex:de,tableValues:null,target:null,targetX:de,targetY:de,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Xn,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:de,underlineThickness:de,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:de,values:null,vAlphabetic:de,vMathematical:de,vectorEffect:null,vHanging:de,vIdeographic:de,version:null,vertAdvY:de,vertOriginX:de,vertOriginY:de,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:de,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:eE}),nE=Ja({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()}}),rE=Ja({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:tE}),sE=Ja({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()}}),gj={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},yj=/[A-Z]/g,G1=/-[a-z]/g,_j=/^data[-\w.:]+$/i;function iE(t,e){const n=_g(e);let r=e,s=Vn;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&_j.test(e)){if(e.charAt(4)==="-"){const a=e.slice(5).replace(G1,vj);r="data"+a.charAt(0).toUpperCase()+a.slice(1)}else{const a=e.slice(4);if(!G1.test(a)){let l=a.replace(yj,bj);l.charAt(0)!=="-"&&(l="-"+l),e="data"+l}}s=Cy}return new s(r,e)}function bj(t){return"-"+t.toLowerCase()}function vj(t){return t.charAt(1).toUpperCase()}const aE=Xk([Wk,pj,nE,rE,sE],"html"),Xl=Xk([Wk,mj,nE,rE,sE],"svg"),K1={}.hasOwnProperty;function xj(t,e){const n=e||{};function r(s,...a){let l=r.invalid;const u=r.handlers;if(s&&K1.call(s,t)){const f=String(s[t]);l=K1.call(u,f)?u[f]:r.unknown}if(l)return l.call(this,s,...a)}return r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}const wj=/["&'<>`]/g,Sj=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,kj=/[\x01-\t\v\f\x0E-\x1F\x7F\x81\x8D\x8F\x90\x9D\xA0-\uFFFF]/g,Ej=/[|\\{}()[\]^$+*?.]/g,Z1=new WeakMap;function Cj(t,e){if(t=t.replace(e.subset?Tj(e.subset):wj,r),e.subset||e.escapeOnly)return t;return t.replace(Sj,n).replace(kj,r);function n(s,a,l){return e.format((s.charCodeAt(0)-55296)*1024+s.charCodeAt(1)-56320+65536,l.charCodeAt(a+2),e)}function r(s,a,l){return e.format(s.charCodeAt(0),l.charCodeAt(a+1),e)}}function Tj(t){let e=Z1.get(t);return e||(e=Aj(t),Z1.set(t,e)),e}function Aj(t){const e=[];let n=-1;for(;++n<t.length;)e.push(t[n].replace(Ej,"\\$&"));return new RegExp("(?:"+e.join("|")+")","g")}const Rj=/[\dA-Fa-f]/;function Oj(t,e,n){const r="&#x"+t.toString(16).toUpperCase();return n&&e&&!Rj.test(String.fromCharCode(e))?r:r+";"}const Nj=/\d/;function Ij(t,e,n){const r="&#"+String(t);return n&&e&&!Nj.test(String.fromCharCode(e))?r:r+";"}const Mj=["AElig","AMP","Aacute","Acirc","Agrave","Aring","Atilde","Auml","COPY","Ccedil","ETH","Eacute","Ecirc","Egrave","Euml","GT","Iacute","Icirc","Igrave","Iuml","LT","Ntilde","Oacute","Ocirc","Ograve","Oslash","Otilde","Ouml","QUOT","REG","THORN","Uacute","Ucirc","Ugrave","Uuml","Yacute","aacute","acirc","acute","aelig","agrave","amp","aring","atilde","auml","brvbar","ccedil","cedil","cent","copy","curren","deg","divide","eacute","ecirc","egrave","eth","euml","frac12","frac14","frac34","gt","iacute","icirc","iexcl","igrave","iquest","iuml","laquo","lt","macr","micro","middot","nbsp","not","ntilde","oacute","ocirc","ograve","ordf","ordm","oslash","otilde","ouml","para","plusmn","pound","quot","raquo","reg","sect","shy","sup1","sup2","sup3","szlig","thorn","times","uacute","ucirc","ugrave","uml","uuml","yacute","yen","yuml"],lm={nbsp:"",iexcl:"",cent:"",pound:"",curren:"",yen:"",brvbar:"",sect:"",uml:"",copy:"",ordf:"",laquo:"",not:"",shy:"",reg:"",macr:"",deg:"",plusmn:"",sup2:"",sup3:"",acute:"",micro:"",para:"",middot:"",cedil:"",sup1:"",ordm:"",raquo:"",frac14:"",frac12:"",frac34:"",iquest:"",Agrave:"",Aacute:"",Acirc:"",Atilde:"",Auml:"",Aring:"",AElig:"",Ccedil:"",Egrave:"",Eacute:"",Ecirc:"",Euml:"",Igrave:"",Iacute:"",Icirc:"",Iuml:"",ETH:"",Ntilde:"",Ograve:"",Oacute:"",Ocirc:"",Otilde:"",Ouml:"",times:"",Oslash:"",Ugrave:"",Uacute:"",Ucirc:"",Uuml:"",Yacute:"",THORN:"",szlig:"",agrave:"",aacute:"",acirc:"",atilde:"",auml:"",aring:"",aelig:"",ccedil:"",egrave:"",eacute:"",ecirc:"",euml:"",igrave:"",iacute:"",icirc:"",iuml:"",eth:"",ntilde:"",ograve:"",oacute:"",ocirc:"",otilde:"",ouml:"",divide:"",oslash:"",ugrave:"",uacute:"",ucirc:"",uuml:"",yacute:"",thorn:"",yuml:"",fnof:"",Alpha:"",Beta:"",Gamma:"",Delta:"",Epsilon:"",Zeta:"",Eta:"",Theta:"",Iota:"",Kappa:"",Lambda:"",Mu:"",Nu:"",Xi:"",Omicron:"",Pi:"",Rho:"",Sigma:"",Tau:"",Upsilon:"",Phi:"",Chi:"",Psi:"",Omega:"",alpha:"",beta:"",gamma:"",delta:"",epsilon:"",zeta:"",eta:"",theta:"",iota:"",kappa:"",lambda:"",mu:"",nu:"",xi:"",omicron:"",pi:"",rho:"",sigmaf:"",sigma:"",tau:"",upsilon:"",phi:"",chi:"",psi:"",omega:"",thetasym:"",upsih:"",piv:"",bull:"",hellip:"",prime:"",Prime:"",oline:"",frasl:"",weierp:"",image:"",real:"",trade:"",alefsym:"",larr:"",uarr:"",rarr:"",darr:"",harr:"",crarr:"",lArr:"",uArr:"",rArr:"",dArr:"",hArr:"",forall:"",part:"",exist:"",empty:"",nabla:"",isin:"",notin:"",ni:"",prod:"",sum:"",minus:"",lowast:"",radic:"",prop:"",infin:"",ang:"",and:"",or:"",cap:"",cup:"",int:"",there4:"",sim:"",cong:"",asymp:"",ne:"",equiv:"",le:"",ge:"",sub:"",sup:"",nsub:"",sube:"",supe:"",oplus:"",otimes:"",perp:"",sdot:"",lceil:"",rceil:"",lfloor:"",rfloor:"",lang:"",rang:"",loz:"",spades:"",clubs:"",hearts:"",diams:"",quot:'"',amp:"&",lt:"<",gt:">",OElig:"",oelig:"",Scaron:"",scaron:"",Yuml:"",circ:"",tilde:"",ensp:"",emsp:"",thinsp:"",zwnj:"",zwj:"",lrm:"",rlm:"",ndash:"",mdash:"",lsquo:"",rsquo:"",sbquo:"",ldquo:"",rdquo:"",bdquo:"",dagger:"",Dagger:"",permil:"",lsaquo:"",rsaquo:"",euro:""},Dj=["cent","copy","divide","gt","lt","not","para","times"],oE={}.hasOwnProperty,xg={};let Eu;for(Eu in lm)oE.call(lm,Eu)&&(xg[lm[Eu]]=Eu);const Lj=/[^\dA-Za-z]/;function jj(t,e,n,r){const s=String.fromCharCode(t);if(oE.call(xg,s)){const a=xg[s],l="&"+a;return n&&Mj.includes(a)&&!Dj.includes(a)&&(!r||e&&e!==61&&Lj.test(String.fromCharCode(e)))?l:l+";"}return""}function zj(t,e,n){let r=Oj(t,e,n.omitOptionalSemicolons),s;if((n.useNamedReferences||n.useShortestReferences)&&(s=jj(t,e,n.omitOptionalSemicolons,n.attribute)),(n.useShortestReferences||!s)&&n.useShortestReferences){const a=Ij(t,e,n.omitOptionalSemicolons);a.length<r.length&&(r=a)}return s&&(!n.useShortestReferences||s.length<r.length)?s:r}function $a(t,e){return Cj(t,Object.assign({format:zj},e))}const Pj=/^>|^->|<!--|-->|--!>|<!-$/g,Bj=[">"],$j=["<",">"];function Uj(t,e,n,r){return r.settings.bogusComments?"<?"+$a(t.value,Object.assign({},r.settings.characterReferences,{subset:Bj}))+">":"<!--"+t.value.replace(Pj,s)+"-->";function s(a){return $a(a,Object.assign({},r.settings.characterReferences,{subset:$j}))}}function qj(t,e,n,r){return"<!"+(r.settings.upperDoctype?"DOCTYPE":"doctype")+(r.settings.tightDoctype?"":" ")+"html>"}function Tf(t,e){const n=String(t);if(typeof e!="string")throw new TypeError("Expected character");let r=0,s=n.indexOf(e);for(;s!==-1;)r++,s=n.indexOf(e,s+e.length);return r}function lE(t,e){const n=e||{};return(t[t.length-1]===""?[...t,""]:t).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}function cE(t){return t.join(" ").trim()}const Fj=/[ \t\n\f\r]/g;function nh(t){return typeof t=="object"?t.type==="text"?Q1(t.value):!1:Q1(t)}function Q1(t){return t.replace(Fj,"")===""}const Vt=fE(1),uE=fE(-1),Vj=[];function fE(t){return e;function e(n,r,s){const a=n?n.children:Vj;let l=(r||0)+t,u=a[l];if(!s)for(;u&&nh(u);)l+=t,u=a[l];return u}}const Hj={}.hasOwnProperty;function hE(t){return e;function e(n,r,s){return Hj.call(t,n.tagName)&&t[n.tagName](n,r,s)}}const Ty=hE({body:Kj,caption:cm,colgroup:cm,dd:Yj,dt:Jj,head:cm,html:Gj,li:Qj,optgroup:Xj,option:Wj,p:Zj,rp:J1,rt:J1,tbody:tz,td:Y1,tfoot:nz,th:Y1,thead:ez,tr:rz});function cm(t,e,n){const r=Vt(n,e,!0);return!r||r.type!=="comment"&&!(r.type==="text"&&nh(r.value.charAt(0)))}function Gj(t,e,n){const r=Vt(n,e);return!r||r.type!=="comment"}function Kj(t,e,n){const r=Vt(n,e);return!r||r.type!=="comment"}function Zj(t,e,n){const r=Vt(n,e);return r?r.type==="element"&&(r.tagName==="address"||r.tagName==="article"||r.tagName==="aside"||r.tagName==="blockquote"||r.tagName==="details"||r.tagName==="div"||r.tagName==="dl"||r.tagName==="fieldset"||r.tagName==="figcaption"||r.tagName==="figure"||r.tagName==="footer"||r.tagName==="form"||r.tagName==="h1"||r.tagName==="h2"||r.tagName==="h3"||r.tagName==="h4"||r.tagName==="h5"||r.tagName==="h6"||r.tagName==="header"||r.tagName==="hgroup"||r.tagName==="hr"||r.tagName==="main"||r.tagName==="menu"||r.tagName==="nav"||r.tagName==="ol"||r.tagName==="p"||r.tagName==="pre"||r.tagName==="section"||r.tagName==="table"||r.tagName==="ul"):!n||!(n.type==="element"&&(n.tagName==="a"||n.tagName==="audio"||n.tagName==="del"||n.tagName==="ins"||n.tagName==="map"||n.tagName==="noscript"||n.tagName==="video"))}function Qj(t,e,n){const r=Vt(n,e);return!r||r.type==="element"&&r.tagName==="li"}function Jj(t,e,n){const r=Vt(n,e);return!!(r&&r.type==="element"&&(r.tagName==="dt"||r.tagName==="dd"))}function Yj(t,e,n){const r=Vt(n,e);return!r||r.type==="element"&&(r.tagName==="dt"||r.tagName==="dd")}function J1(t,e,n){const r=Vt(n,e);return!r||r.type==="element"&&(r.tagName==="rp"||r.tagName==="rt")}function Xj(t,e,n){const r=Vt(n,e);return!r||r.type==="element"&&r.tagName==="optgroup"}function Wj(t,e,n){const r=Vt(n,e);return!r||r.type==="element"&&(r.tagName==="option"||r.tagName==="optgroup")}function ez(t,e,n){const r=Vt(n,e);return!!(r&&r.type==="element"&&(r.tagName==="tbody"||r.tagName==="tfoot"))}function tz(t,e,n){const r=Vt(n,e);return!r||r.type==="element"&&(r.tagName==="tbody"||r.tagName==="tfoot")}function nz(t,e,n){return!Vt(n,e)}function rz(t,e,n){const r=Vt(n,e);return!r||r.type==="element"&&r.tagName==="tr"}function Y1(t,e,n){const r=Vt(n,e);return!r||r.type==="element"&&(r.tagName==="td"||r.tagName==="th")}const sz=hE({body:oz,colgroup:lz,head:az,html:iz,tbody:cz});function iz(t){const e=Vt(t,-1);return!e||e.type!=="comment"}function az(t){const e=new Set;for(const r of t.children)if(r.type==="element"&&(r.tagName==="base"||r.tagName==="title")){if(e.has(r.tagName))return!1;e.add(r.tagName)}const n=t.children[0];return!n||n.type==="element"}function oz(t){const e=Vt(t,-1,!0);return!e||e.type!=="comment"&&!(e.type==="text"&&nh(e.value.charAt(0)))&&!(e.type==="element"&&(e.tagName==="meta"||e.tagName==="link"||e.tagName==="script"||e.tagName==="style"||e.tagName==="template"))}function lz(t,e,n){const r=uE(n,e),s=Vt(t,-1,!0);return n&&r&&r.type==="element"&&r.tagName==="colgroup"&&Ty(r,n.children.indexOf(r),n)?!1:!!(s&&s.type==="element"&&s.tagName==="col")}function cz(t,e,n){const r=uE(n,e),s=Vt(t,-1);return n&&r&&r.type==="element"&&(r.tagName==="thead"||r.tagName==="tbody")&&Ty(r,n.children.indexOf(r),n)?!1:!!(s&&s.type==="element"&&s.tagName==="tr")}const Cu={name:[[`	
\f\r &/=>`.split(""),`	
\f\r "&'/=>\``.split("")],[`\0	
\f\r "&'/<=>`.split(""),`\0	
\f\r "&'/<=>\``.split("")]],unquoted:[[`	
\f\r &>`.split(""),`\0	
\f\r "&'<=>\``.split("")],[`\0	
\f\r "&'<=>\``.split(""),`\0	
\f\r "&'<=>\``.split("")]],single:[["&'".split(""),"\"&'`".split("")],["\0&'".split(""),"\0\"&'`".split("")]],double:[['"&'.split(""),"\"&'`".split("")],['\0"&'.split(""),"\0\"&'`".split("")]]};function uz(t,e,n,r){const s=r.schema,a=s.space==="svg"?!1:r.settings.omitOptionalTags;let l=s.space==="svg"?r.settings.closeEmptyElements:r.settings.voids.includes(t.tagName.toLowerCase());const u=[];let f;s.space==="html"&&t.tagName==="svg"&&(r.schema=Xl);const h=fz(r,t.properties),m=r.all(s.space==="html"&&t.tagName==="template"?t.content:t);return r.schema=s,m&&(l=!1),(h||!a||!sz(t,e,n))&&(u.push("<",t.tagName,h?" "+h:""),l&&(s.space==="svg"||r.settings.closeSelfClosing)&&(f=h.charAt(h.length-1),(!r.settings.tightSelfClosing||f==="/"||f&&f!=='"'&&f!=="'")&&u.push(" "),u.push("/")),u.push(">")),u.push(m),!l&&(!a||!Ty(t,e,n))&&u.push("</"+t.tagName+">"),u.join("")}function fz(t,e){const n=[];let r=-1,s;if(e){for(s in e)if(e[s]!==null&&e[s]!==void 0){const a=hz(t,s,e[s]);a&&n.push(a)}}for(;++r<n.length;){const a=t.settings.tightAttributes?n[r].charAt(n[r].length-1):void 0;r!==n.length-1&&a!=='"'&&a!=="'"&&(n[r]+=" ")}return n.join("")}function hz(t,e,n){const r=iE(t.schema,e),s=t.settings.allowParseErrors&&t.schema.space==="html"?0:1,a=t.settings.allowDangerousCharacters?0:1;let l=t.quote,u;if(r.overloadedBoolean&&(n===r.attribute||n==="")?n=!0:(r.boolean||r.overloadedBoolean)&&(typeof n!="string"||n===r.attribute||n==="")&&(n=!!n),n==null||n===!1||typeof n=="number"&&Number.isNaN(n))return"";const f=$a(r.attribute,Object.assign({},t.settings.characterReferences,{subset:Cu.name[s][a]}));return n===!0||(n=Array.isArray(n)?(r.commaSeparated?lE:cE)(n,{padLeft:!t.settings.tightCommaSeparatedLists}):String(n),t.settings.collapseEmptyAttributes&&!n)?f:(t.settings.preferUnquoted&&(u=$a(n,Object.assign({},t.settings.characterReferences,{attribute:!0,subset:Cu.unquoted[s][a]}))),u!==n&&(t.settings.quoteSmart&&Tf(n,l)>Tf(n,t.alternative)&&(l=t.alternative),u=l+$a(n,Object.assign({},t.settings.characterReferences,{subset:(l==="'"?Cu.single:Cu.double)[s][a],attribute:!0}))+l),f+(u&&"="+u))}const dz=["<","&"];function dE(t,e,n,r){return n&&n.type==="element"&&(n.tagName==="script"||n.tagName==="style")?t.value:$a(t.value,Object.assign({},r.settings.characterReferences,{subset:dz}))}function pz(t,e,n,r){return r.settings.allowDangerousHtml?t.value:dE(t,e,n,r)}function mz(t,e,n,r){return r.all(t)}const gz=xj("type",{invalid:yz,unknown:_z,handlers:{comment:Uj,doctype:qj,element:uz,raw:pz,root:mz,text:dE}});function yz(t){throw new Error("Expected node, not `"+t+"`")}function _z(t){const e=t;throw new Error("Cannot compile unknown node `"+e.type+"`")}const bz={},vz={},xz=[];function wz(t,e){const n=e||bz,r=n.quote||'"',s=r==='"'?"'":'"';if(r!=='"'&&r!=="'")throw new Error("Invalid quote `"+r+"`, expected `'` or `\"`");return{one:Sz,all:kz,settings:{omitOptionalTags:n.omitOptionalTags||!1,allowParseErrors:n.allowParseErrors||!1,allowDangerousCharacters:n.allowDangerousCharacters||!1,quoteSmart:n.quoteSmart||!1,preferUnquoted:n.preferUnquoted||!1,tightAttributes:n.tightAttributes||!1,upperDoctype:n.upperDoctype||!1,tightDoctype:n.tightDoctype||!1,bogusComments:n.bogusComments||!1,tightCommaSeparatedLists:n.tightCommaSeparatedLists||!1,tightSelfClosing:n.tightSelfClosing||!1,collapseEmptyAttributes:n.collapseEmptyAttributes||!1,allowDangerousHtml:n.allowDangerousHtml||!1,voids:n.voids||hj,characterReferences:n.characterReferences||vz,closeSelfClosing:n.closeSelfClosing||!1,closeEmptyElements:n.closeEmptyElements||!1},schema:n.space==="svg"?Xl:aE,quote:r,alternative:s}.one(Array.isArray(t)?{type:"root",children:t}:t,void 0,void 0)}function Sz(t,e,n){return gz(t,e,n,this)}function kz(t){const e=[],n=t&&t.children||xz;let r=-1;for(;++r<n.length;)e[r]=this.one(n[r],r,t);return e.join("")}function Af(t,e){const n=typeof t=="string"?{}:{...t.colorReplacements},r=typeof t=="string"?t:t.name;for(const[s,a]of Object.entries(e?.colorReplacements||{}))typeof a=="string"?n[s]=a:s===r&&Object.assign(n,a);return n}function Ys(t,e){return t&&(e?.[t?.toLowerCase()]||t)}function Ez(t){return Array.isArray(t)?t:[t]}async function pE(t){return Promise.resolve(typeof t=="function"?t():t).then(e=>e.default||e)}function Ay(t){return!t||["plaintext","txt","text","plain"].includes(t)}function mE(t){return t==="ansi"||Ay(t)}function Ry(t){return t==="none"}function gE(t){return Ry(t)}function yE(t,e){if(!e)return t;t.properties||={},t.properties.class||=[],typeof t.properties.class=="string"&&(t.properties.class=t.properties.class.split(/\s+/g)),Array.isArray(t.properties.class)||(t.properties.class=[]);const n=Array.isArray(e)?e:e.split(/\s+/g);for(const r of n)r&&!t.properties.class.includes(r)&&t.properties.class.push(r);return t}function rh(t,e=!1){if(t.length===0)return[["",0]];const n=t.split(/(\r?\n)/g);let r=0;const s=[];for(let a=0;a<n.length;a+=2){const l=e?n[a]+(n[a+1]||""):n[a];s.push([l,r]),r+=n[a].length,r+=n[a+1]?.length||0}return s}function Cz(t){const e=rh(t,!0).map(([s])=>s);function n(s){if(s===t.length)return{line:e.length-1,character:e[e.length-1].length};let a=s,l=0;for(const u of e){if(a<u.length)break;a-=u.length,l++}return{line:l,character:a}}function r(s,a){let l=0;for(let u=0;u<s;u++)l+=e[u].length;return l+=a,l}return{lines:e,indexToPos:n,posToIndex:r}}function Tz(t,e,n){const r=new Set;for(const a of t.matchAll(/:?lang=["']([^"']+)["']/g)){const l=a[1].toLowerCase().trim();l&&r.add(l)}for(const a of t.matchAll(/(?:```|~~~)([\w-]+)/g)){const l=a[1].toLowerCase().trim();l&&r.add(l)}for(const a of t.matchAll(/\\begin\{([\w-]+)\}/g)){const l=a[1].toLowerCase().trim();l&&r.add(l)}for(const a of t.matchAll(/<script\s+(?:type|lang)=["']([^"']+)["']/gi)){const l=a[1].toLowerCase().trim(),u=l.includes("/")?l.split("/").pop():l;u&&r.add(u)}if(!n)return Array.from(r);const s=n.getBundledLanguages();return Array.from(r).filter(a=>a&&s[a])}const Oy="light-dark()",Az=["color","background-color"];function Rz(t,e){let n=0;const r=[];for(const s of e)s>n&&r.push({...t,content:t.content.slice(n,s),offset:t.offset+n}),n=s;return n<t.content.length&&r.push({...t,content:t.content.slice(n),offset:t.offset+n}),r}function Oz(t,e){const n=Array.from(e instanceof Set?e:new Set(e)).sort((r,s)=>r-s);return n.length?t.map(r=>r.flatMap(s=>{const a=n.filter(l=>s.offset<l&&l<s.offset+s.content.length).map(l=>l-s.offset).sort((l,u)=>l-u);return a.length?Rz(s,a):s})):t}function Nz(t,e,n,r,s="css-vars"){const a={content:t.content,explanation:t.explanation,offset:t.offset},l=e.map(m=>Rf(t.variants[m])),u=new Set(l.flatMap(m=>Object.keys(m))),f={},h=(m,p)=>{const y=p==="color"?"":p==="background-color"?"-bg":`-${p}`;return n+e[m]+(p==="color"?"":y)};return l.forEach((m,p)=>{for(const y of u){const g=m[y]||"inherit";if(p===0&&r&&Az.includes(y))if(r===Oy&&l.length>1){const v=e.findIndex(C=>C==="light"),x=e.findIndex(C=>C==="dark");if(v===-1||x===-1)throw new jt('When using `defaultColor: "light-dark()"`, you must provide both `light` and `dark` themes');const E=l[v][y]||"inherit",S=l[x][y]||"inherit";f[y]=`light-dark(${E}, ${S})`,s==="css-vars"&&(f[h(p,y)]=g)}else f[y]=g;else s==="css-vars"&&(f[h(p,y)]=g)}}),a.htmlStyle=f,a}function Rf(t){const e={};if(t.color&&(e.color=t.color),t.bgColor&&(e["background-color"]=t.bgColor),t.fontStyle){t.fontStyle&_n.Italic&&(e["font-style"]="italic"),t.fontStyle&_n.Bold&&(e["font-weight"]="bold");const n=[];t.fontStyle&_n.Underline&&n.push("underline"),t.fontStyle&_n.Strikethrough&&n.push("line-through"),n.length&&(e["text-decoration"]=n.join(" "))}return e}function wg(t){return typeof t=="string"?t:Object.entries(t).map(([e,n])=>`${e}:${n}`).join(";")}const _E=new WeakMap;function sh(t,e){_E.set(t,e)}function Pl(t){return _E.get(t)}class Ya{_stacks={};lang;get themes(){return Object.keys(this._stacks)}get theme(){return this.themes[0]}get _stack(){return this._stacks[this.theme]}static initial(e,n){return new Ya(Object.fromEntries(Ez(n).map(r=>[r,yg])),e)}constructor(...e){if(e.length===2){const[n,r]=e;this.lang=r,this._stacks=n}else{const[n,r,s]=e;this.lang=r,this._stacks={[s]:n}}}getInternalStack(e=this.theme){return this._stacks[e]}getScopes(e=this.theme){return Iz(this._stacks[e])}toJSON(){return{lang:this.lang,theme:this.theme,themes:this.themes,scopes:this.getScopes()}}}function Iz(t){const e=[],n=new Set;function r(s){if(n.has(s))return;n.add(s);const a=s?.nameScopesList?.scopeName;a&&e.push(a),s.parent&&r(s.parent)}return r(t),e}function Mz(t,e){if(!(t instanceof Ya))throw new jt("Invalid grammar state");return t.getInternalStack(e)}function Dz(){const t=new WeakMap;function e(n){if(!t.has(n.meta)){let r=function(l){if(typeof l=="number"){if(l<0||l>n.source.length)throw new jt(`Invalid decoration offset: ${l}. Code length: ${n.source.length}`);return{...s.indexToPos(l),offset:l}}else{const u=s.lines[l.line];if(u===void 0)throw new jt(`Invalid decoration position ${JSON.stringify(l)}. Lines length: ${s.lines.length}`);let f=l.character;if(f<0&&(f=u.length+f),f<0||f>u.length)throw new jt(`Invalid decoration position ${JSON.stringify(l)}. Line ${l.line} length: ${u.length}`);return{...l,character:f,offset:s.posToIndex(l.line,f)}}};const s=Cz(n.source),a=(n.options.decorations||[]).map(l=>({...l,start:r(l.start),end:r(l.end)}));Lz(a),t.set(n.meta,{decorations:a,converter:s,source:n.source})}return t.get(n.meta)}return{name:"shiki:decorations",tokens(n){if(!this.options.decorations?.length)return;const s=e(this).decorations.flatMap(l=>[l.start.offset,l.end.offset]);return Oz(n,s)},code(n){if(!this.options.decorations?.length)return;const r=e(this),s=Array.from(n.children).filter(m=>m.type==="element"&&m.tagName==="span");if(s.length!==r.converter.lines.length)throw new jt(`Number of lines in code element (${s.length}) does not match the number of lines in the source (${r.converter.lines.length}). Failed to apply decorations.`);function a(m,p,y,g){const v=s[m];let x="",E=-1,S=-1;if(p===0&&(E=0),y===0&&(S=0),y===Number.POSITIVE_INFINITY&&(S=v.children.length),E===-1||S===-1)for(let T=0;T<v.children.length;T++)x+=bE(v.children[T]),E===-1&&x.length===p&&(E=T+1),S===-1&&x.length===y&&(S=T+1);if(E===-1)throw new jt(`Failed to find start index for decoration ${JSON.stringify(g.start)}`);if(S===-1)throw new jt(`Failed to find end index for decoration ${JSON.stringify(g.end)}`);const C=v.children.slice(E,S);if(!g.alwaysWrap&&C.length===v.children.length)u(v,g,"line");else if(!g.alwaysWrap&&C.length===1&&C[0].type==="element")u(C[0],g,"token");else{const T={type:"element",tagName:"span",properties:{},children:C};u(T,g,"wrapper"),v.children.splice(E,C.length,T)}}function l(m,p){s[m]=u(s[m],p,"line")}function u(m,p,y){const g=p.properties||{},v=p.transform||(x=>x);return m.tagName=p.tagName||"span",m.properties={...m.properties,...g,class:m.properties.class},p.properties?.class&&yE(m,p.properties.class),m=v(m,y)||m,m}const f=[],h=r.decorations.sort((m,p)=>p.start.offset-m.start.offset||m.end.offset-p.end.offset);for(const m of h){const{start:p,end:y}=m;if(p.line===y.line)a(p.line,p.character,y.character,m);else if(p.line<y.line){a(p.line,p.character,Number.POSITIVE_INFINITY,m);for(let g=p.line+1;g<y.line;g++)f.unshift(()=>l(g,m));a(y.line,0,y.character,m)}}f.forEach(m=>m())}}}function Lz(t){for(let e=0;e<t.length;e++){const n=t[e];if(n.start.offset>n.end.offset)throw new jt(`Invalid decoration range: ${JSON.stringify(n.start)} - ${JSON.stringify(n.end)}`);for(let r=e+1;r<t.length;r++){const s=t[r],a=n.start.offset<=s.start.offset&&s.start.offset<n.end.offset,l=n.start.offset<s.end.offset&&s.end.offset<=n.end.offset,u=s.start.offset<=n.start.offset&&n.start.offset<s.end.offset,f=s.start.offset<n.end.offset&&n.end.offset<=s.end.offset;if(a||l||u||f){if(a&&l||u&&f||u&&n.start.offset===n.end.offset||l&&s.start.offset===s.end.offset)continue;throw new jt(`Decorations ${JSON.stringify(n.start)} and ${JSON.stringify(s.start)} intersect.`)}}}}function bE(t){return t.type==="text"?t.value:t.type==="element"?t.children.map(bE).join(""):""}const jz=[Dz()];function Of(t){const e=zz(t.transformers||[]);return[...e.pre,...e.normal,...e.post,...jz]}function zz(t){const e=[],n=[],r=[];for(const s of t)switch(s.enforce){case"pre":e.push(s);break;case"post":n.push(s);break;default:r.push(s)}return{pre:e,post:n,normal:r}}var Ai=["black","red","green","yellow","blue","magenta","cyan","white","brightBlack","brightRed","brightGreen","brightYellow","brightBlue","brightMagenta","brightCyan","brightWhite"],um={1:"bold",2:"dim",3:"italic",4:"underline",7:"reverse",8:"hidden",9:"strikethrough"};function Pz(t,e){const n=t.indexOf("\x1B",e);if(n!==-1&&t[n+1]==="["){const r=t.indexOf("m",n);if(r!==-1)return{sequence:t.substring(n+2,r).split(";"),startPosition:n,position:r+1}}return{position:t.length}}function X1(t){const e=t.shift();if(e==="2"){const n=t.splice(0,3).map(r=>Number.parseInt(r));return n.length!==3||n.some(r=>Number.isNaN(r))?void 0:{type:"rgb",rgb:n}}else if(e==="5"){const n=t.shift();if(n)return{type:"table",index:Number(n)}}}function Bz(t){const e=[];for(;t.length>0;){const n=t.shift();if(!n)continue;const r=Number.parseInt(n);if(!Number.isNaN(r))if(r===0)e.push({type:"resetAll"});else if(r<=9)um[r]&&e.push({type:"setDecoration",value:um[r]});else if(r<=29){const s=um[r-20];s&&(e.push({type:"resetDecoration",value:s}),s==="dim"&&e.push({type:"resetDecoration",value:"bold"}))}else if(r<=37)e.push({type:"setForegroundColor",value:{type:"named",name:Ai[r-30]}});else if(r===38){const s=X1(t);s&&e.push({type:"setForegroundColor",value:s})}else if(r===39)e.push({type:"resetForegroundColor"});else if(r<=47)e.push({type:"setBackgroundColor",value:{type:"named",name:Ai[r-40]}});else if(r===48){const s=X1(t);s&&e.push({type:"setBackgroundColor",value:s})}else r===49?e.push({type:"resetBackgroundColor"}):r===53?e.push({type:"setDecoration",value:"overline"}):r===55?e.push({type:"resetDecoration",value:"overline"}):r>=90&&r<=97?e.push({type:"setForegroundColor",value:{type:"named",name:Ai[r-90+8]}}):r>=100&&r<=107&&e.push({type:"setBackgroundColor",value:{type:"named",name:Ai[r-100+8]}})}return e}function $z(){let t=null,e=null,n=new Set;return{parse(r){const s=[];let a=0;do{const l=Pz(r,a),u=l.sequence?r.substring(a,l.startPosition):r.substring(a);if(u.length>0&&s.push({value:u,foreground:t,background:e,decorations:new Set(n)}),l.sequence){const f=Bz(l.sequence);for(const h of f)h.type==="resetAll"?(t=null,e=null,n.clear()):h.type==="resetForegroundColor"?t=null:h.type==="resetBackgroundColor"?e=null:h.type==="resetDecoration"&&n.delete(h.value);for(const h of f)h.type==="setForegroundColor"?t=h.value:h.type==="setBackgroundColor"?e=h.value:h.type==="setDecoration"&&n.add(h.value)}a=l.position}while(a<r.length);return s}}}var Uz={black:"#000000",red:"#bb0000",green:"#00bb00",yellow:"#bbbb00",blue:"#0000bb",magenta:"#ff00ff",cyan:"#00bbbb",white:"#eeeeee",brightBlack:"#555555",brightRed:"#ff5555",brightGreen:"#00ff00",brightYellow:"#ffff55",brightBlue:"#5555ff",brightMagenta:"#ff55ff",brightCyan:"#55ffff",brightWhite:"#ffffff"};function qz(t=Uz){function e(u){return t[u]}function n(u){return`#${u.map(f=>Math.max(0,Math.min(f,255)).toString(16).padStart(2,"0")).join("")}`}let r;function s(){if(r)return r;r=[];for(let h=0;h<Ai.length;h++)r.push(e(Ai[h]));let u=[0,95,135,175,215,255];for(let h=0;h<6;h++)for(let m=0;m<6;m++)for(let p=0;p<6;p++)r.push(n([u[h],u[m],u[p]]));let f=8;for(let h=0;h<24;h++,f+=10)r.push(n([f,f,f]));return r}function a(u){return s()[u]}function l(u){switch(u.type){case"named":return e(u.name);case"rgb":return n(u.rgb);case"table":return a(u.index)}}return{value:l}}const Fz={black:"#000000",red:"#cd3131",green:"#0DBC79",yellow:"#E5E510",blue:"#2472C8",magenta:"#BC3FBC",cyan:"#11A8CD",white:"#E5E5E5",brightBlack:"#666666",brightRed:"#F14C4C",brightGreen:"#23D18B",brightYellow:"#F5F543",brightBlue:"#3B8EEA",brightMagenta:"#D670D6",brightCyan:"#29B8DB",brightWhite:"#FFFFFF"};function Vz(t,e,n){const r=Af(t,n),s=rh(e),a=Object.fromEntries(Ai.map(f=>{const h=`terminal.ansi${f[0].toUpperCase()}${f.substring(1)}`,m=t.colors?.[h];return[f,m||Fz[f]]})),l=qz(a),u=$z();return s.map(f=>u.parse(f[0]).map(h=>{let m,p;h.decorations.has("reverse")?(m=h.background?l.value(h.background):t.bg,p=h.foreground?l.value(h.foreground):t.fg):(m=h.foreground?l.value(h.foreground):t.fg,p=h.background?l.value(h.background):void 0),m=Ys(m,r),p=Ys(p,r),h.decorations.has("dim")&&(m=Hz(m));let y=_n.None;return h.decorations.has("bold")&&(y|=_n.Bold),h.decorations.has("italic")&&(y|=_n.Italic),h.decorations.has("underline")&&(y|=_n.Underline),h.decorations.has("strikethrough")&&(y|=_n.Strikethrough),{content:h.value,offset:f[1],color:m,bgColor:p,fontStyle:y}}))}function Hz(t){const e=t.match(/#([0-9a-f]{3,8})/i);if(e){const r=e[1];if(r.length===8){const s=Math.round(Number.parseInt(r.slice(6,8),16)/2).toString(16).padStart(2,"0");return`#${r.slice(0,6)}${s}`}else{if(r.length===6)return`#${r}80`;if(r.length===4){const s=r[0],a=r[1],l=r[2],u=r[3],f=Math.round(Number.parseInt(`${u}${u}`,16)/2).toString(16).padStart(2,"0");return`#${s}${s}${a}${a}${l}${l}${f}`}else if(r.length===3){const s=r[0],a=r[1],l=r[2];return`#${s}${s}${a}${a}${l}${l}80`}}}const n=t.match(/var\((--[\w-]+-ansi-[\w-]+)\)/);return n?`var(${n[1]}-dim)`:t}function Ny(t,e,n={}){const{theme:r=t.getLoadedThemes()[0]}=n,s=t.resolveLangAlias(n.lang||"text");if(Ay(s)||Ry(r))return rh(e).map(f=>[{content:f[0],offset:f[1]}]);const{theme:a,colorMap:l}=t.setTheme(r);if(s==="ansi")return Vz(a,e,n);const u=t.getLanguage(n.lang||"text");if(n.grammarState){if(n.grammarState.lang!==u.name)throw new jt(`Grammar state language "${n.grammarState.lang}" does not match highlight language "${u.name}"`);if(!n.grammarState.themes.includes(a.name))throw new jt(`Grammar state themes "${n.grammarState.themes}" do not contain highlight theme "${a.name}"`)}return Kz(e,u,a,l,n)}function Gz(...t){if(t.length===2)return Pl(t[1]);const[e,n,r={}]=t,{lang:s="text",theme:a=e.getLoadedThemes()[0]}=r;if(Ay(s)||Ry(a))throw new jt("Plain language does not have grammar state");if(s==="ansi")throw new jt("ANSI language does not have grammar state");const{theme:l,colorMap:u}=e.setTheme(a),f=e.getLanguage(s);return new Ya(Iy(n,f,l,u,r).stateStack,f.name,l.name)}function Kz(t,e,n,r,s){const a=Iy(t,e,n,r,s),l=new Ya(a.stateStack,e.name,n.name);return sh(a.tokens,l),a.tokens}function Iy(t,e,n,r,s){const a=Af(n,s),{tokenizeMaxLineLength:l=0,tokenizeTimeLimit:u=500}=s,f=rh(t);let h=s.grammarState?Mz(s.grammarState,n.name)??yg:s.grammarContextCode!=null?Iy(s.grammarContextCode,e,n,r,{...s,grammarState:void 0,grammarContextCode:void 0}).stateStack:yg,m=[];const p=[];for(let y=0,g=f.length;y<g;y++){const[v,x]=f[y];if(v===""){m=[],p.push([]);continue}if(l>0&&v.length>=l){m=[],p.push([{content:v,offset:x,color:"",fontStyle:0}]);continue}let E,S,C;s.includeExplanation&&(E=e.tokenizeLine(v,h,u),S=E.tokens,C=0);const T=e.tokenizeLine2(v,h,u),L=T.tokens.length/2;for(let D=0;D<L;D++){const N=T.tokens[2*D],B=D+1<L?T.tokens[2*D+2]:v.length;if(N===B)continue;const K=T.tokens[2*D+1],G=Ys(r[Ha.getForeground(K)],a),j=Ha.getFontStyle(K),J={content:v.substring(N,B),offset:x+N,color:G,fontStyle:j};if(s.includeExplanation){const ie=[];if(s.includeExplanation!=="scopeName")for(const P of n.settings){let U;switch(typeof P.scope){case"string":U=P.scope.split(/,/).map(z=>z.trim());break;case"object":U=P.scope;break;default:continue}ie.push({settings:P,selectors:U.map(z=>z.split(/ /))})}J.explanation=[];let q=0;for(;N+q<B;){const P=S[C],U=v.substring(P.startIndex,P.endIndex);q+=U.length,J.explanation.push({content:U,scopes:s.includeExplanation==="scopeName"?Zz(P.scopes):Qz(ie,P.scopes)}),C+=1}}m.push(J)}p.push(m),m=[],h=T.ruleStack}return{tokens:p,stateStack:h}}function Zz(t){return t.map(e=>({scopeName:e}))}function Qz(t,e){const n=[];for(let r=0,s=e.length;r<s;r++){const a=e[r];n[r]={scopeName:a,themeMatches:Yz(t,a,e.slice(0,r))}}return n}function W1(t,e){return t===e||e.substring(0,t.length)===t&&e[t.length]==="."}function Jz(t,e,n){if(!W1(t[t.length-1],e))return!1;let r=t.length-2,s=n.length-1;for(;r>=0&&s>=0;)W1(t[r],n[s])&&(r-=1),s-=1;return r===-1}function Yz(t,e,n){const r=[];for(const{selectors:s,settings:a}of t)for(const l of s)if(Jz(l,e,n)){r.push(a);break}return r}function vE(t,e,n){const r=Object.entries(n.themes).filter(f=>f[1]).map(f=>({color:f[0],theme:f[1]})),s=r.map(f=>{const h=Ny(t,e,{...n,theme:f.theme}),m=Pl(h),p=typeof f.theme=="string"?f.theme:f.theme.name;return{tokens:h,state:m,theme:p}}),a=Xz(...s.map(f=>f.tokens)),l=a[0].map((f,h)=>f.map((m,p)=>{const y={content:m.content,variants:{},offset:m.offset};return"includeExplanation"in n&&n.includeExplanation&&(y.explanation=m.explanation),a.forEach((g,v)=>{const{content:x,explanation:E,offset:S,...C}=g[h][p];y.variants[r[v].color]=C}),y})),u=s[0].state?new Ya(Object.fromEntries(s.map(f=>[f.theme,f.state?.getInternalStack(f.theme)])),s[0].state.lang):void 0;return u&&sh(l,u),l}function Xz(...t){const e=t.map(()=>[]),n=t.length;for(let r=0;r<t[0].length;r++){const s=t.map(f=>f[r]),a=e.map(()=>[]);e.forEach((f,h)=>f.push(a[h]));const l=s.map(()=>0),u=s.map(f=>f[0]);for(;u.every(f=>f);){const f=Math.min(...u.map(h=>h.content.length));for(let h=0;h<n;h++){const m=u[h];m.content.length===f?(a[h].push(m),l[h]+=1,u[h]=s[h][l[h]]):(a[h].push({...m,content:m.content.slice(0,f)}),u[h]={...m,content:m.content.slice(f),offset:m.offset+f})}}}return e}function Nf(t,e,n){let r,s,a,l,u,f;if("themes"in n){const{defaultColor:h="light",cssVariablePrefix:m="--shiki-",colorsRendering:p="css-vars"}=n,y=Object.entries(n.themes).filter(S=>S[1]).map(S=>({color:S[0],theme:S[1]})).sort((S,C)=>S.color===h?-1:C.color===h?1:0);if(y.length===0)throw new jt("`themes` option must not be empty");const g=vE(t,e,n);if(f=Pl(g),h&&Oy!==h&&!y.find(S=>S.color===h))throw new jt(`\`themes\` option must contain the defaultColor key \`${h}\``);const v=y.map(S=>t.getTheme(S.theme)),x=y.map(S=>S.color);a=g.map(S=>S.map(C=>Nz(C,x,m,h,p))),f&&sh(a,f);const E=y.map(S=>Af(S.theme,n));s=ew(y,v,E,m,h,"fg",p),r=ew(y,v,E,m,h,"bg",p),l=`shiki-themes ${v.map(S=>S.name).join(" ")}`,u=h?void 0:[s,r].join(";")}else if("theme"in n){const h=Af(n.theme,n);a=Ny(t,e,n);const m=t.getTheme(n.theme);r=Ys(m.bg,h),s=Ys(m.fg,h),l=m.name,f=Pl(a)}else throw new jt("Invalid options, either `theme` or `themes` must be provided");return{tokens:a,fg:s,bg:r,themeName:l,rootStyle:u,grammarState:f}}function ew(t,e,n,r,s,a,l){return t.map((u,f)=>{const h=Ys(e[f][a],n[f])||"inherit",m=`${r+u.color}${a==="bg"?"-bg":""}:${h}`;if(f===0&&s){if(s===Oy&&t.length>1){const p=t.findIndex(x=>x.color==="light"),y=t.findIndex(x=>x.color==="dark");if(p===-1||y===-1)throw new jt('When using `defaultColor: "light-dark()"`, you must provide both `light` and `dark` themes');const g=Ys(e[p][a],n[p])||"inherit",v=Ys(e[y][a],n[y])||"inherit";return`light-dark(${g}, ${v});${m}`}return h}return l==="css-vars"?m:null}).filter(u=>!!u).join(";")}function If(t,e,n,r={meta:{},options:n,codeToHast:(s,a)=>If(t,s,a),codeToTokens:(s,a)=>Nf(t,s,a)}){let s=e;for(const v of Of(n))s=v.preprocess?.call(r,s,n)||s;let{tokens:a,fg:l,bg:u,themeName:f,rootStyle:h,grammarState:m}=Nf(t,s,n);const{mergeWhitespaces:p=!0,mergeSameStyleTokens:y=!1}=n;p===!0?a=e5(a):p==="never"&&(a=t5(a)),y&&(a=n5(a));const g={...r,get source(){return s}};for(const v of Of(n))a=v.tokens?.call(g,a)||a;return Wz(a,{...n,fg:l,bg:u,themeName:f,rootStyle:n.rootStyle===!1?!1:n.rootStyle??h},g,m)}function Wz(t,e,n,r=Pl(t)){const s=Of(e),a=[],l={type:"root",children:[]},{structure:u="classic",tabindex:f="0"}=e,h={class:`shiki ${e.themeName||""}`};e.rootStyle!==!1&&(e.rootStyle!=null?h.style=e.rootStyle:h.style=`background-color:${e.bg};color:${e.fg}`),f!==!1&&f!=null&&(h.tabindex=f.toString());for(const[x,E]of Object.entries(e.meta||{}))x.startsWith("_")||(h[x]=E);let m={type:"element",tagName:"pre",properties:h,children:[]},p={type:"element",tagName:"code",properties:{},children:a};const y=[],g={...n,structure:u,addClassToHast:yE,get source(){return n.source},get tokens(){return t},get options(){return e},get root(){return l},get pre(){return m},get code(){return p},get lines(){return y}};if(t.forEach((x,E)=>{E&&(u==="inline"?l.children.push({type:"element",tagName:"br",properties:{},children:[]}):u==="classic"&&a.push({type:"text",value:`
`}));let S={type:"element",tagName:"span",properties:{class:"line"},children:[]},C=0;for(const T of x){let L={type:"element",tagName:"span",properties:{...T.htmlAttrs},children:[{type:"text",value:T.content}]};const D=wg(T.htmlStyle||Rf(T));D&&(L.properties.style=D);for(const N of s)L=N?.span?.call(g,L,E+1,C,S,T)||L;u==="inline"?l.children.push(L):u==="classic"&&S.children.push(L),C+=T.content.length}if(u==="classic"){for(const T of s)S=T?.line?.call(g,S,E+1)||S;y.push(S),a.push(S)}else u==="inline"&&y.push(S)}),u==="classic"){for(const x of s)p=x?.code?.call(g,p)||p;m.children.push(p);for(const x of s)m=x?.pre?.call(g,m)||m;l.children.push(m)}else if(u==="inline"){const x=[];let E={type:"element",tagName:"span",properties:{class:"line"},children:[]};for(const T of l.children)T.type==="element"&&T.tagName==="br"?(x.push(E),E={type:"element",tagName:"span",properties:{class:"line"},children:[]}):(T.type==="element"||T.type==="text")&&E.children.push(T);x.push(E);let C={type:"element",tagName:"code",properties:{},children:x};for(const T of s)C=T?.code?.call(g,C)||C;l.children=[];for(let T=0;T<C.children.length;T++){T>0&&l.children.push({type:"element",tagName:"br",properties:{},children:[]});const L=C.children[T];L.type==="element"&&l.children.push(...L.children)}}let v=l;for(const x of s)v=x?.root?.call(g,v)||v;return r&&sh(v,r),v}function e5(t){return t.map(e=>{const n=[];let r="",s;return e.forEach((a,l)=>{const f=!(a.fontStyle&&(a.fontStyle&_n.Underline||a.fontStyle&_n.Strikethrough));f&&a.content.match(/^\s+$/)&&e[l+1]?(s===void 0&&(s=a.offset),r+=a.content):r?(f?n.push({...a,offset:s,content:r+a.content}):n.push({content:r,offset:s},a),s=void 0,r=""):n.push(a)}),n})}function t5(t){return t.map(e=>e.flatMap(n=>{if(n.content.match(/^\s+$/))return n;const r=n.content.match(/^(\s*)(.*?)(\s*)$/);if(!r)return n;const[,s,a,l]=r;if(!s&&!l)return n;const u=[{...n,offset:n.offset+s.length,content:a}];return s&&u.unshift({content:s,offset:n.offset}),l&&u.push({content:l,offset:n.offset+s.length+a.length}),u}))}function n5(t){return t.map(e=>{const n=[];for(const r of e){if(n.length===0){n.push({...r});continue}const s=n[n.length-1],a=wg(s.htmlStyle||Rf(s)),l=wg(r.htmlStyle||Rf(r)),u=s.fontStyle&&(s.fontStyle&_n.Underline||s.fontStyle&_n.Strikethrough),f=r.fontStyle&&(r.fontStyle&_n.Underline||r.fontStyle&_n.Strikethrough);!u&&!f&&a===l?s.content+=r.content:n.push({...r})}return n})}const r5=wz;function s5(t,e,n){const r={meta:{},options:n,codeToHast:(a,l)=>If(t,a,l),codeToTokens:(a,l)=>Nf(t,a,l)};let s=r5(If(t,e,n,r));for(const a of Of(n))s=a.postprocess?.call(r,s,n)||s;return s}const tw={light:"#333333",dark:"#bbbbbb"},nw={light:"#fffffe",dark:"#1e1e1e"},rw="__shiki_resolved";function My(t){if(t?.[rw])return t;const e={...t};e.tokenColors&&!e.settings&&(e.settings=e.tokenColors,delete e.tokenColors),e.type||="dark",e.colorReplacements={...e.colorReplacements},e.settings||=[];let{bg:n,fg:r}=e;if(!n||!r){const u=e.settings?e.settings.find(f=>!f.name&&!f.scope):void 0;u?.settings?.foreground&&(r=u.settings.foreground),u?.settings?.background&&(n=u.settings.background),!r&&e?.colors?.["editor.foreground"]&&(r=e.colors["editor.foreground"]),!n&&e?.colors?.["editor.background"]&&(n=e.colors["editor.background"]),r||(r=e.type==="light"?tw.light:tw.dark),n||(n=e.type==="light"?nw.light:nw.dark),e.fg=r,e.bg=n}e.settings[0]&&e.settings[0].settings&&!e.settings[0].scope||e.settings.unshift({settings:{foreground:e.fg,background:e.bg}});let s=0;const a=new Map;function l(u){if(a.has(u))return a.get(u);s+=1;const f=`#${s.toString(16).padStart(8,"0").toLowerCase()}`;return e.colorReplacements?.[`#${f}`]?l(u):(a.set(u,f),f)}e.settings=e.settings.map(u=>{const f=u.settings?.foreground&&!u.settings.foreground.startsWith("#"),h=u.settings?.background&&!u.settings.background.startsWith("#");if(!f&&!h)return u;const m={...u,settings:{...u.settings}};if(f){const p=l(u.settings.foreground);e.colorReplacements[p]=u.settings.foreground,m.settings.foreground=p}if(h){const p=l(u.settings.background);e.colorReplacements[p]=u.settings.background,m.settings.background=p}return m});for(const u of Object.keys(e.colors||{}))if((u==="editor.foreground"||u==="editor.background"||u.startsWith("terminal.ansi"))&&!e.colors[u]?.startsWith("#")){const f=l(e.colors[u]);e.colorReplacements[f]=e.colors[u],e.colors[u]=f}return Object.defineProperty(e,rw,{enumerable:!1,writable:!1,value:!0}),e}async function xE(t){return Array.from(new Set((await Promise.all(t.filter(e=>!mE(e)).map(async e=>await pE(e).then(n=>Array.isArray(n)?n:[n])))).flat()))}async function wE(t){return(await Promise.all(t.map(async n=>gE(n)?null:My(await pE(n))))).filter(n=>!!n)}let i5=3;function a5(t,e=3){e>i5||console.trace(`[SHIKI DEPRECATE]: ${t}`)}let La=class extends Error{constructor(e){super(e),this.name="ShikiError"}};function SE(t,e){if(!e)return t;if(e[t]){const n=new Set([t]);for(;e[t];){if(t=e[t],n.has(t))throw new La(`Circular alias \`${Array.from(n).join(" -> ")} -> ${t}\``);n.add(t)}}return t}class o5 extends fj{constructor(e,n,r,s={}){super(e),this._resolver=e,this._themes=n,this._langs=r,this._alias=s,this._themes.map(a=>this.loadTheme(a)),this.loadLanguages(this._langs)}_resolvedThemes=new Map;_resolvedGrammars=new Map;_langMap=new Map;_langGraph=new Map;_textmateThemeCache=new WeakMap;_loadedThemesCache=null;_loadedLanguagesCache=null;getTheme(e){return typeof e=="string"?this._resolvedThemes.get(e):this.loadTheme(e)}loadTheme(e){const n=My(e);return n.name&&(this._resolvedThemes.set(n.name,n),this._loadedThemesCache=null),n}getLoadedThemes(){return this._loadedThemesCache||(this._loadedThemesCache=[...this._resolvedThemes.keys()]),this._loadedThemesCache}setTheme(e){let n=this._textmateThemeCache.get(e);n||(n=wf.createFromRawTheme(e),this._textmateThemeCache.set(e,n)),this._syncRegistry.setTheme(n)}getGrammar(e){return e=SE(e,this._alias),this._resolvedGrammars.get(e)}loadLanguage(e){if(this.getGrammar(e.name))return;const n=new Set([...this._langMap.values()].filter(a=>a.embeddedLangsLazy?.includes(e.name)));this._resolver.addLanguage(e);const r={balancedBracketSelectors:e.balancedBracketSelectors||["*"],unbalancedBracketSelectors:e.unbalancedBracketSelectors||[]};this._syncRegistry._rawGrammars.set(e.scopeName,e);const s=this.loadGrammarWithConfiguration(e.scopeName,1,r);if(s.name=e.name,this._resolvedGrammars.set(e.name,s),e.aliases&&e.aliases.forEach(a=>{this._alias[a]=e.name}),this._loadedLanguagesCache=null,n.size)for(const a of n)this._resolvedGrammars.delete(a.name),this._loadedLanguagesCache=null,this._syncRegistry?._injectionGrammars?.delete(a.scopeName),this._syncRegistry?._grammars?.delete(a.scopeName),this.loadLanguage(this._langMap.get(a.name))}dispose(){super.dispose(),this._resolvedThemes.clear(),this._resolvedGrammars.clear(),this._langMap.clear(),this._langGraph.clear(),this._loadedThemesCache=null}loadLanguages(e){for(const s of e)this.resolveEmbeddedLanguages(s);const n=Array.from(this._langGraph.entries()),r=n.filter(([s,a])=>!a);if(r.length){const s=n.filter(([a,l])=>l?(l.embeddedLanguages||l.embeddedLangs)?.some(f=>r.map(([h])=>h).includes(f)):!1).filter(a=>!r.includes(a));throw new La(`Missing languages ${r.map(([a])=>`\`${a}\``).join(", ")}, required by ${s.map(([a])=>`\`${a}\``).join(", ")}`)}for(const[s,a]of n)this._resolver.addLanguage(a);for(const[s,a]of n)this.loadLanguage(a)}getLoadedLanguages(){return this._loadedLanguagesCache||(this._loadedLanguagesCache=[...new Set([...this._resolvedGrammars.keys(),...Object.keys(this._alias)])]),this._loadedLanguagesCache}resolveEmbeddedLanguages(e){this._langMap.set(e.name,e),this._langGraph.set(e.name,e);const n=e.embeddedLanguages??e.embeddedLangs;if(n)for(const r of n)this._langGraph.set(r,this._langMap.get(r))}}class l5{_langs=new Map;_scopeToLang=new Map;_injections=new Map;_onigLib;constructor(e,n){this._onigLib={createOnigScanner:r=>e.createScanner(r),createOnigString:r=>e.createString(r)},n.forEach(r=>this.addLanguage(r))}get onigLib(){return this._onigLib}getLangRegistration(e){return this._langs.get(e)}loadGrammar(e){return this._scopeToLang.get(e)}addLanguage(e){this._langs.set(e.name,e),e.aliases&&e.aliases.forEach(n=>{this._langs.set(n,e)}),this._scopeToLang.set(e.scopeName,e),e.injectTo&&e.injectTo.forEach(n=>{this._injections.get(n)||this._injections.set(n,[]),this._injections.get(n).push(e.scopeName)})}getInjections(e){const n=e.split(".");let r=[];for(let s=1;s<=n.length;s++){const a=n.slice(0,s).join(".");r=[...r,...this._injections.get(a)||[]]}return r}}let Yo=0;function c5(t){Yo+=1,t.warnings!==!1&&Yo>=10&&Yo%10===0&&console.warn(`[Shiki] ${Yo} instances have been created. Shiki is supposed to be used as a singleton, consider refactoring your code to cache your highlighter instance; Or call \`highlighter.dispose()\` to release unused instances.`);let e=!1;if(!t.engine)throw new La("`engine` option is required for synchronous mode");const n=(t.langs||[]).flat(1),r=(t.themes||[]).flat(1).map(My),s=new l5(t.engine,n),a=new o5(s,r,n,t.langAlias);let l;function u(T){return SE(T,t.langAlias)}function f(T){S();const L=a.getGrammar(typeof T=="string"?T:T.name);if(!L)throw new La(`Language \`${T}\` not found, you may need to load it first`);return L}function h(T){if(T==="none")return{bg:"",fg:"",name:"none",settings:[],type:"dark"};S();const L=a.getTheme(T);if(!L)throw new La(`Theme \`${T}\` not found, you may need to load it first`);return L}function m(T){S();const L=h(T);l!==T&&(a.setTheme(L),l=T);const D=a.getColorMap();return{theme:L,colorMap:D}}function p(){return S(),a.getLoadedThemes()}function y(){return S(),a.getLoadedLanguages()}function g(...T){S(),a.loadLanguages(T.flat(1))}async function v(...T){return g(await xE(T))}function x(...T){S();for(const L of T.flat(1))a.loadTheme(L)}async function E(...T){return S(),x(await wE(T))}function S(){if(e)throw new La("Shiki instance has been disposed")}function C(){e||(e=!0,a.dispose(),Yo-=1)}return{setTheme:m,getTheme:h,getLanguage:f,getLoadedThemes:p,getLoadedLanguages:y,resolveLangAlias:u,loadLanguage:v,loadLanguageSync:g,loadTheme:E,loadThemeSync:x,dispose:C,[Symbol.dispose]:C}}async function u5(t){t.engine||a5("`engine` option is required. Use `createOnigurumaEngine` or `createJavaScriptRegexEngine` to create an engine.");const[e,n,r]=await Promise.all([wE(t.themes||[]),xE(t.langs||[]),t.engine]);return c5({...t,themes:e,langs:n,engine:r})}async function f5(t){const e=await u5(t);return{getLastGrammarState:(...n)=>Gz(e,...n),codeToTokensBase:(n,r)=>Ny(e,n,r),codeToTokensWithThemes:(n,r)=>vE(e,n,r),codeToTokens:(n,r)=>Nf(e,n,r),codeToHast:(n,r)=>If(e,n,r),codeToHtml:(n,r)=>s5(e,n,r),getBundledLanguages:()=>({}),getBundledThemes:()=>({}),...e,getInternalContext:()=>e}}function h5(t){const e=t.langs,n=t.themes,r=t.engine;async function s(a){function l(p){if(typeof p=="string"){if(p=a.langAlias?.[p]||p,mE(p))return[];const y=e[p];if(!y)throw new jt(`Language \`${p}\` is not included in this bundle. You may want to load it from external source.`);return y}return p}function u(p){if(gE(p))return"none";if(typeof p=="string"){const y=n[p];if(!y)throw new jt(`Theme \`${p}\` is not included in this bundle. You may want to load it from external source.`);return y}return p}const f=(a.themes??[]).map(p=>u(p)),h=(a.langs??[]).map(p=>l(p)),m=await f5({engine:a.engine??r(),...a,themes:f,langs:h});return{...m,loadLanguage(...p){return m.loadLanguage(...p.map(l))},loadTheme(...p){return m.loadTheme(...p.map(u))},getBundledLanguages(){return e},getBundledThemes(){return n}}}return s}function d5(t){let e;async function n(r={}){if(e){const s=await e;return await Promise.all([s.loadTheme(...r.themes||[]),s.loadLanguage(...r.langs||[])]),s}else{e=t({...r,themes:[],langs:[]});const s=await e;return await Promise.all([s.loadTheme(...r.themes||[]),s.loadLanguage(...r.langs||[])]),s}}return n}function p5(t,e){const n=d5(t);async function r(s,a){const l=await n({langs:[a.lang],themes:"theme"in a?[a.theme]:Object.values(a.themes)}),u=await e?.guessEmbeddedLanguages?.(s,a.lang,l);return u&&await l.loadLanguage(...u),l}return{getSingletonHighlighter(s){return n(s)},async codeToHtml(s,a){return(await r(s,a)).codeToHtml(s,a)},async codeToHast(s,a){return(await r(s,a)).codeToHast(s,a)},async codeToTokens(s,a){return(await r(s,a)).codeToTokens(s,a)},async codeToTokensBase(s,a){return(await r(s,a)).codeToTokensBase(s,a)},async codeToTokensWithThemes(s,a){return(await r(s,a)).codeToTokensWithThemes(s,a)},async getLastGrammarState(s,a){return(await n({langs:[a.lang],themes:[a.theme]})).getLastGrammarState(s,a)}}}const kE=[{id:"abap",name:"ABAP",import:(()=>M(()=>import("./abap-BdImnpbu.js"),[]))},{id:"actionscript-3",name:"ActionScript",import:(()=>M(()=>import("./actionscript-3-CfeIJUat.js"),[]))},{id:"ada",name:"Ada",import:(()=>M(()=>import("./ada-bCR0ucgS.js"),[]))},{id:"angular-html",name:"Angular HTML",import:(()=>M(()=>import("./angular-html-CU67Zn6k.js").then(t=>t.f),__vite__mapDeps([0,1,2,3])))},{id:"angular-ts",name:"Angular TypeScript",import:(()=>M(()=>import("./angular-ts-BwZT4LLn.js"),__vite__mapDeps([4,0,1,2,3,5])))},{id:"apache",name:"Apache Conf",import:(()=>M(()=>import("./apache-Pmp26Uib.js"),[]))},{id:"apex",name:"Apex",import:(()=>M(()=>import("./apex-DDbsPZ6N.js"),[]))},{id:"apl",name:"APL",import:(()=>M(()=>import("./apl-dKokRX4l.js"),__vite__mapDeps([6,1,2,3,7,8,9])))},{id:"applescript",name:"AppleScript",import:(()=>M(()=>import("./applescript-Co6uUVPk.js"),[]))},{id:"ara",name:"Ara",import:(()=>M(()=>import("./ara-BRHolxvo.js"),[]))},{id:"asciidoc",name:"AsciiDoc",aliases:["adoc"],import:(()=>M(()=>import("./asciidoc-Dv7Oe6Be.js"),[]))},{id:"asm",name:"Assembly",import:(()=>M(()=>import("./asm-D_Q5rh1f.js"),[]))},{id:"astro",name:"Astro",import:(()=>M(()=>import("./astro-CbQHKStN.js"),__vite__mapDeps([10,9,2,11,3,12,13])))},{id:"awk",name:"AWK",import:(()=>M(()=>import("./awk-DMzUqQB5.js"),[]))},{id:"ballerina",name:"Ballerina",import:(()=>M(()=>import("./ballerina-BFfxhgS-.js"),[]))},{id:"bat",name:"Batch File",aliases:["batch"],import:(()=>M(()=>import("./bat-BkioyH1T.js"),[]))},{id:"beancount",name:"Beancount",import:(()=>M(()=>import("./beancount-k_qm7-4y.js"),[]))},{id:"berry",name:"Berry",aliases:["be"],import:(()=>M(()=>import("./berry-uYugtg8r.js"),[]))},{id:"bibtex",name:"BibTeX",import:(()=>M(()=>import("./bibtex-CHM0blh-.js"),[]))},{id:"bicep",name:"Bicep",import:(()=>M(()=>import("./bicep-Bmn6On1c.js"),[]))},{id:"blade",name:"Blade",import:(()=>M(()=>import("./blade-DVc8C-J4.js"),__vite__mapDeps([14,15,1,2,3,7,8,16,9])))},{id:"bsl",name:"1C (Enterprise)",aliases:["1c"],import:(()=>M(()=>import("./bsl-BO_Y6i37.js"),__vite__mapDeps([17,18])))},{id:"c",name:"C",import:(()=>M(()=>import("./c-BIGW1oBm.js"),[]))},{id:"cadence",name:"Cadence",aliases:["cdc"],import:(()=>M(()=>import("./cadence-Bv_4Rxtq.js"),[]))},{id:"cairo",name:"Cairo",import:(()=>M(()=>import("./cairo-KRGpt6FW.js"),__vite__mapDeps([19,20])))},{id:"clarity",name:"Clarity",import:(()=>M(()=>import("./clarity-D53aC0YG.js"),[]))},{id:"clojure",name:"Clojure",aliases:["clj"],import:(()=>M(()=>import("./clojure-P80f7IUj.js"),[]))},{id:"cmake",name:"CMake",import:(()=>M(()=>import("./cmake-D1j8_8rp.js"),[]))},{id:"cobol",name:"COBOL",import:(()=>M(()=>import("./cobol-nwyudZeR.js"),__vite__mapDeps([21,1,2,3,8])))},{id:"codeowners",name:"CODEOWNERS",import:(()=>M(()=>import("./codeowners-Bp6g37R7.js"),[]))},{id:"codeql",name:"CodeQL",aliases:["ql"],import:(()=>M(()=>import("./codeql-DsOJ9woJ.js"),[]))},{id:"coffee",name:"CoffeeScript",aliases:["coffeescript"],import:(()=>M(()=>import("./coffee-Ch7k5sss.js"),__vite__mapDeps([22,2])))},{id:"common-lisp",name:"Common Lisp",aliases:["lisp"],import:(()=>M(()=>import("./common-lisp-Cg-RD9OK.js"),[]))},{id:"coq",name:"Coq",import:(()=>M(()=>import("./coq-DkFqJrB1.js"),[]))},{id:"cpp",name:"C++",aliases:["c++"],import:(()=>M(()=>import("./cpp-CofmeUqb.js"),__vite__mapDeps([23,24,25,26,16])))},{id:"crystal",name:"Crystal",import:(()=>M(()=>import("./crystal-tKQVLTB8.js"),__vite__mapDeps([27,1,2,3,16,26,28])))},{id:"csharp",name:"C#",aliases:["c#","cs"],import:(()=>M(()=>import("./csharp-K5feNrxe.js"),[]))},{id:"css",name:"CSS",import:(()=>M(()=>import("./css-DPfMkruS.js"),[]))},{id:"csv",name:"CSV",import:(()=>M(()=>import("./csv-fuZLfV_i.js"),[]))},{id:"cue",name:"CUE",import:(()=>M(()=>import("./cue-D82EKSYY.js"),[]))},{id:"cypher",name:"Cypher",aliases:["cql"],import:(()=>M(()=>import("./cypher-COkxafJQ.js"),[]))},{id:"d",name:"D",import:(()=>M(()=>import("./d-85-TOEBH.js"),[]))},{id:"dart",name:"Dart",import:(()=>M(()=>import("./dart-CF10PKvl.js"),[]))},{id:"dax",name:"DAX",import:(()=>M(()=>import("./dax-CEL-wOlO.js"),[]))},{id:"desktop",name:"Desktop",import:(()=>M(()=>import("./desktop-BmXAJ9_W.js"),[]))},{id:"diff",name:"Diff",import:(()=>M(()=>import("./diff-D97Zzqfu.js"),[]))},{id:"docker",name:"Dockerfile",aliases:["dockerfile"],import:(()=>M(()=>import("./docker-BcOcwvcX.js"),[]))},{id:"dotenv",name:"dotEnv",import:(()=>M(()=>import("./dotenv-Da5cRb03.js"),[]))},{id:"dream-maker",name:"Dream Maker",import:(()=>M(()=>import("./dream-maker-BtqSS_iP.js"),[]))},{id:"edge",name:"Edge",import:(()=>M(()=>import("./edge-BkV0erSs.js"),__vite__mapDeps([29,11,1,2,3,15])))},{id:"elixir",name:"Elixir",import:(()=>M(()=>import("./elixir-CDX3lj18.js"),__vite__mapDeps([30,1,2,3])))},{id:"elm",name:"Elm",import:(()=>M(()=>import("./elm-DbKCFpqz.js"),__vite__mapDeps([31,25,26])))},{id:"emacs-lisp",name:"Emacs Lisp",aliases:["elisp"],import:(()=>M(()=>import("./emacs-lisp-C9XAeP06.js"),[]))},{id:"erb",name:"ERB",import:(()=>M(()=>import("./erb-BOJIQeun.js"),__vite__mapDeps([32,1,2,3,33,34,7,8,16,35,11,36,13,23,24,25,26,28,37,38])))},{id:"erlang",name:"Erlang",aliases:["erl"],import:(()=>M(()=>import("./erlang-DsQrWhSR.js"),__vite__mapDeps([39,40])))},{id:"fennel",name:"Fennel",import:(()=>M(()=>import("./fennel-BYunw83y.js"),[]))},{id:"fish",name:"Fish",import:(()=>M(()=>import("./fish-BvzEVeQv.js"),[]))},{id:"fluent",name:"Fluent",aliases:["ftl"],import:(()=>M(()=>import("./fluent-C4IJs8-o.js"),[]))},{id:"fortran-fixed-form",name:"Fortran (Fixed Form)",aliases:["f","for","f77"],import:(()=>M(()=>import("./fortran-fixed-form-BZjJHVRy.js"),__vite__mapDeps([41,42])))},{id:"fortran-free-form",name:"Fortran (Free Form)",aliases:["f90","f95","f03","f08","f18"],import:(()=>M(()=>import("./fortran-free-form-D22FLkUw.js"),[]))},{id:"fsharp",name:"F#",aliases:["f#","fs"],import:(()=>M(()=>import("./fsharp-CXgrBDvD.js"),__vite__mapDeps([43,40])))},{id:"gdresource",name:"GDResource",import:(()=>M(()=>import("./gdresource-B7Tvp0Sc.js"),__vite__mapDeps([44,45,46])))},{id:"gdscript",name:"GDScript",import:(()=>M(()=>import("./gdscript-DTMYz4Jt.js"),[]))},{id:"gdshader",name:"GDShader",import:(()=>M(()=>import("./gdshader-DkwncUOv.js"),[]))},{id:"genie",name:"Genie",import:(()=>M(()=>import("./genie-D0YGMca9.js"),[]))},{id:"gherkin",name:"Gherkin",import:(()=>M(()=>import("./gherkin-DyxjwDmM.js"),[]))},{id:"git-commit",name:"Git Commit Message",import:(()=>M(()=>import("./git-commit-F4YmCXRG.js"),__vite__mapDeps([47,48])))},{id:"git-rebase",name:"Git Rebase Message",import:(()=>M(()=>import("./git-rebase-r7XF79zn.js"),__vite__mapDeps([49,28])))},{id:"gleam",name:"Gleam",import:(()=>M(()=>import("./gleam-BspZqrRM.js"),[]))},{id:"glimmer-js",name:"Glimmer JS",aliases:["gjs"],import:(()=>M(()=>import("./glimmer-js-Rg0-pVw9.js"),__vite__mapDeps([50,2,11,3,1])))},{id:"glimmer-ts",name:"Glimmer TS",aliases:["gts"],import:(()=>M(()=>import("./glimmer-ts-U6CK756n.js"),__vite__mapDeps([51,11,3,2,1])))},{id:"glsl",name:"GLSL",import:(()=>M(()=>import("./glsl-DplSGwfg.js"),__vite__mapDeps([25,26])))},{id:"gnuplot",name:"Gnuplot",import:(()=>M(()=>import("./gnuplot-DdkO51Og.js"),[]))},{id:"go",name:"Go",import:(()=>M(()=>import("./go-Dn2_MT6a.js"),[]))},{id:"graphql",name:"GraphQL",aliases:["gql"],import:(()=>M(()=>import("./graphql-ChdNCCLP.js"),__vite__mapDeps([35,2,11,36,13])))},{id:"groovy",name:"Groovy",import:(()=>M(()=>import("./groovy-gcz8RCvz.js"),[]))},{id:"hack",name:"Hack",import:(()=>M(()=>import("./hack-CaT9iCJl.js"),__vite__mapDeps([52,1,2,3,16])))},{id:"haml",name:"Ruby Haml",import:(()=>M(()=>import("./haml-B8DHNrY2.js"),__vite__mapDeps([34,2,3])))},{id:"handlebars",name:"Handlebars",aliases:["hbs"],import:(()=>M(()=>import("./handlebars-BL8al0AC.js"),__vite__mapDeps([53,1,2,3,38])))},{id:"haskell",name:"Haskell",aliases:["hs"],import:(()=>M(()=>import("./haskell-Df6bDoY_.js"),[]))},{id:"haxe",name:"Haxe",import:(()=>M(()=>import("./haxe-CzTSHFRz.js"),[]))},{id:"hcl",name:"HashiCorp HCL",import:(()=>M(()=>import("./hcl-BWvSN4gD.js"),[]))},{id:"hjson",name:"Hjson",import:(()=>M(()=>import("./hjson-D5-asLiD.js"),[]))},{id:"hlsl",name:"HLSL",import:(()=>M(()=>import("./hlsl-D3lLCCz7.js"),[]))},{id:"html",name:"HTML",import:(()=>M(()=>import("./html-GMplVEZG.js"),__vite__mapDeps([1,2,3])))},{id:"html-derivative",name:"HTML (Derivative)",import:(()=>M(()=>import("./html-derivative-BFtXZ54Q.js"),__vite__mapDeps([15,1,2,3])))},{id:"http",name:"HTTP",import:(()=>M(()=>import("./http-jrhK8wxY.js"),__vite__mapDeps([54,28,9,7,8,35,2,11,36,13])))},{id:"hurl",name:"Hurl",import:(()=>M(()=>import("./hurl-irOxFIW8.js"),__vite__mapDeps([55,35,2,11,36,13,7,8,56])))},{id:"hxml",name:"HXML",import:(()=>M(()=>import("./hxml-Bvhsp5Yf.js"),__vite__mapDeps([57,58])))},{id:"hy",name:"Hy",import:(()=>M(()=>import("./hy-DFXneXwc.js"),[]))},{id:"imba",name:"Imba",import:(()=>M(()=>import("./imba-DGztddWO.js"),[]))},{id:"ini",name:"INI",aliases:["properties"],import:(()=>M(()=>import("./ini-BEwlwnbL.js"),[]))},{id:"java",name:"Java",import:(()=>M(()=>import("./java-CylS5w8V.js"),[]))},{id:"javascript",name:"JavaScript",aliases:["js","cjs","mjs"],import:(()=>M(()=>import("./javascript-wDzz0qaB.js"),[]))},{id:"jinja",name:"Jinja",import:(()=>M(()=>import("./jinja-4LBKfQ-Z.js"),__vite__mapDeps([59,1,2,3])))},{id:"jison",name:"Jison",import:(()=>M(()=>import("./jison-wvAkD_A8.js"),__vite__mapDeps([60,2])))},{id:"json",name:"JSON",import:(()=>M(()=>import("./json-Cp-IABpG.js"),[]))},{id:"json5",name:"JSON5",import:(()=>M(()=>import("./json5-C9tS-k6U.js"),[]))},{id:"jsonc",name:"JSON with Comments",import:(()=>M(()=>import("./jsonc-Des-eS-w.js"),[]))},{id:"jsonl",name:"JSON Lines",import:(()=>M(()=>import("./jsonl-DcaNXYhu.js"),[]))},{id:"jsonnet",name:"Jsonnet",import:(()=>M(()=>import("./jsonnet-DFQXde-d.js"),[]))},{id:"jssm",name:"JSSM",aliases:["fsl"],import:(()=>M(()=>import("./jssm-C2t-YnRu.js"),[]))},{id:"jsx",name:"JSX",import:(()=>M(()=>import("./jsx-g9-lgVsj.js"),[]))},{id:"julia",name:"Julia",aliases:["jl"],import:(()=>M(()=>import("./julia-C8NyazO9.js"),__vite__mapDeps([61,23,24,25,26,16,20,2,62])))},{id:"kdl",name:"KDL",import:(()=>M(()=>import("./kdl-DV7GczEv.js"),[]))},{id:"kotlin",name:"Kotlin",aliases:["kt","kts"],import:(()=>M(()=>import("./kotlin-BdnUsdx6.js"),[]))},{id:"kusto",name:"Kusto",aliases:["kql"],import:(()=>M(()=>import("./kusto-BvAqAH-y.js"),[]))},{id:"latex",name:"LaTeX",import:(()=>M(()=>import("./latex-BdAV_C_H.js"),__vite__mapDeps([63,64,62])))},{id:"lean",name:"Lean 4",aliases:["lean4"],import:(()=>M(()=>import("./lean-Bc6EcWN3.js"),[]))},{id:"less",name:"Less",import:(()=>M(()=>import("./less-B1dDrJ26.js"),[]))},{id:"liquid",name:"Liquid",import:(()=>M(()=>import("./liquid-DYVedYrR.js"),__vite__mapDeps([65,1,2,3,9])))},{id:"llvm",name:"LLVM IR",import:(()=>M(()=>import("./llvm-BtvRca6l.js"),[]))},{id:"log",name:"Log file",import:(()=>M(()=>import("./log-2UxHyX5q.js"),[]))},{id:"logo",name:"Logo",import:(()=>M(()=>import("./logo-BtOb2qkB.js"),[]))},{id:"lua",name:"Lua",import:(()=>M(()=>import("./lua-BbnMAYS6.js"),__vite__mapDeps([37,26])))},{id:"luau",name:"Luau",import:(()=>M(()=>import("./luau-CXu1NL6O.js"),[]))},{id:"make",name:"Makefile",aliases:["makefile"],import:(()=>M(()=>import("./make-CHLpvVh8.js"),[]))},{id:"markdown",name:"Markdown",aliases:["md"],import:(()=>M(()=>import("./markdown-Cvjx9yec.js"),[]))},{id:"marko",name:"Marko",import:(()=>M(()=>import("./marko-CPi9NSCl.js"),__vite__mapDeps([66,3,67,5,11])))},{id:"matlab",name:"MATLAB",import:(()=>M(()=>import("./matlab-D7o27uSR.js"),[]))},{id:"mdc",name:"MDC",import:(()=>M(()=>import("./mdc-DUICxH0z.js"),__vite__mapDeps([68,40,38,15,1,2,3])))},{id:"mdx",name:"MDX",import:(()=>M(()=>import("./mdx-Cmh6b_Ma.js"),[]))},{id:"mermaid",name:"Mermaid",aliases:["mmd"],import:(()=>M(()=>import("./mermaid-DKYwYmdq.js"),[]))},{id:"mipsasm",name:"MIPS Assembly",aliases:["mips"],import:(()=>M(()=>import("./mipsasm-CKIfxQSi.js"),[]))},{id:"mojo",name:"Mojo",import:(()=>M(()=>import("./mojo-1DNp92w6.js"),[]))},{id:"move",name:"Move",import:(()=>M(()=>import("./move-Bu9oaDYs.js"),[]))},{id:"narrat",name:"Narrat Language",aliases:["nar"],import:(()=>M(()=>import("./narrat-DRg8JJMk.js"),[]))},{id:"nextflow",name:"Nextflow",aliases:["nf"],import:(()=>M(()=>import("./nextflow-BrzmwbiE.js"),[]))},{id:"nginx",name:"Nginx",import:(()=>M(()=>import("./nginx-DknmC5AR.js"),__vite__mapDeps([69,37,26])))},{id:"nim",name:"Nim",import:(()=>M(()=>import("./nim-CVrawwO9.js"),__vite__mapDeps([70,26,1,2,3,7,8,25,40])))},{id:"nix",name:"Nix",import:(()=>M(()=>import("./nix-c8nO5XWb.js"),[]))},{id:"nushell",name:"nushell",aliases:["nu"],import:(()=>M(()=>import("./nushell-C-sUppwS.js"),[]))},{id:"objective-c",name:"Objective-C",aliases:["objc"],import:(()=>M(()=>import("./objective-c-DXmwc3jG.js"),[]))},{id:"objective-cpp",name:"Objective-C++",import:(()=>M(()=>import("./objective-cpp-CLxacb5B.js"),[]))},{id:"ocaml",name:"OCaml",import:(()=>M(()=>import("./ocaml-C0hk2d4L.js"),[]))},{id:"openscad",name:"OpenSCAD",aliases:["scad"],import:(()=>M(()=>import("./openscad-C4EeE6gA.js"),[]))},{id:"pascal",name:"Pascal",import:(()=>M(()=>import("./pascal-D93ZcfNL.js"),[]))},{id:"perl",name:"Perl",import:(()=>M(()=>import("./perl-C0TMdlhV.js"),__vite__mapDeps([71,1,2,3,7,8,16])))},{id:"php",name:"PHP",import:(()=>M(()=>import("./php-CDn_0X-4.js"),__vite__mapDeps([72,1,2,3,7,8,16,9])))},{id:"pkl",name:"Pkl",import:(()=>M(()=>import("./pkl-u5AG7uiY.js"),[]))},{id:"plsql",name:"PL/SQL",import:(()=>M(()=>import("./plsql-ChMvpjG-.js"),[]))},{id:"po",name:"Gettext PO",aliases:["pot","potx"],import:(()=>M(()=>import("./po-BTJTHyun.js"),[]))},{id:"polar",name:"Polar",import:(()=>M(()=>import("./polar-C0HS_06l.js"),[]))},{id:"postcss",name:"PostCSS",import:(()=>M(()=>import("./postcss-CXtECtnM.js"),[]))},{id:"powerquery",name:"PowerQuery",import:(()=>M(()=>import("./powerquery-CEu0bR-o.js"),[]))},{id:"powershell",name:"PowerShell",aliases:["ps","ps1"],import:(()=>M(()=>import("./powershell-Dpen1YoG.js"),[]))},{id:"prisma",name:"Prisma",import:(()=>M(()=>import("./prisma-Dd19v3D-.js"),[]))},{id:"prolog",name:"Prolog",import:(()=>M(()=>import("./prolog-CbFg5uaA.js"),[]))},{id:"proto",name:"Protocol Buffer 3",aliases:["protobuf"],import:(()=>M(()=>import("./proto-DyJlTyXw.js"),[]))},{id:"pug",name:"Pug",aliases:["jade"],import:(()=>M(()=>import("./pug-CGlum2m_.js"),__vite__mapDeps([73,2,3,1])))},{id:"puppet",name:"Puppet",import:(()=>M(()=>import("./puppet-BMWR74SV.js"),[]))},{id:"purescript",name:"PureScript",import:(()=>M(()=>import("./purescript-CklMAg4u.js"),[]))},{id:"python",name:"Python",aliases:["py"],import:(()=>M(()=>import("./python-B6aJPvgy.js"),[]))},{id:"qml",name:"QML",import:(()=>M(()=>import("./qml-3beO22l8.js"),__vite__mapDeps([74,2])))},{id:"qmldir",name:"QML Directory",import:(()=>M(()=>import("./qmldir-C8lEn-DE.js"),[]))},{id:"qss",name:"Qt Style Sheets",import:(()=>M(()=>import("./qss-IeuSbFQv.js"),[]))},{id:"r",name:"R",import:(()=>M(()=>import("./r-DiinP2Uv.js"),[]))},{id:"racket",name:"Racket",import:(()=>M(()=>import("./racket-BqYA7rlc.js"),[]))},{id:"raku",name:"Raku",aliases:["perl6"],import:(()=>M(()=>import("./raku-DXvB9xmW.js"),[]))},{id:"razor",name:"ASP.NET Razor",import:(()=>M(()=>import("./razor-CE9lU5zL.js"),__vite__mapDeps([75,1,2,3,76])))},{id:"reg",name:"Windows Registry Script",import:(()=>M(()=>import("./reg-C-SQnVFl.js"),[]))},{id:"regexp",name:"RegExp",aliases:["regex"],import:(()=>M(()=>import("./regexp-CDVJQ6XC.js"),[]))},{id:"rel",name:"Rel",import:(()=>M(()=>import("./rel-C3B-1QV4.js"),[]))},{id:"riscv",name:"RISC-V",import:(()=>M(()=>import("./riscv-BM1_JUlF.js"),[]))},{id:"rosmsg",name:"ROS Interface",import:(()=>M(()=>import("./rosmsg-BJDFO7_C.js"),[]))},{id:"rst",name:"reStructuredText",import:(()=>M(()=>import("./rst-B0xPkSld.js"),__vite__mapDeps([77,15,1,2,3,23,24,25,26,16,20,28,38,78,33,34,7,8,35,11,36,13,37])))},{id:"ruby",name:"Ruby",aliases:["rb"],import:(()=>M(()=>import("./ruby-BvKwtOVI.js"),__vite__mapDeps([33,1,2,3,34,7,8,16,35,11,36,13,23,24,25,26,28,37,38])))},{id:"rust",name:"Rust",aliases:["rs"],import:(()=>M(()=>import("./rust-B1yitclQ.js"),[]))},{id:"sas",name:"SAS",import:(()=>M(()=>import("./sas-cz2c8ADy.js"),__vite__mapDeps([79,16])))},{id:"sass",name:"Sass",import:(()=>M(()=>import("./sass-Cj5Yp3dK.js"),[]))},{id:"scala",name:"Scala",import:(()=>M(()=>import("./scala-C151Ov-r.js"),[]))},{id:"scheme",name:"Scheme",import:(()=>M(()=>import("./scheme-C98Dy4si.js"),[]))},{id:"scss",name:"SCSS",import:(()=>M(()=>import("./scss-OYdSNvt2.js"),__vite__mapDeps([5,3])))},{id:"sdbl",name:"1C (Query)",aliases:["1c-query"],import:(()=>M(()=>import("./sdbl-DVxCFoDh.js"),[]))},{id:"shaderlab",name:"ShaderLab",aliases:["shader"],import:(()=>M(()=>import("./shaderlab-Dg9Lc6iA.js"),__vite__mapDeps([80,81])))},{id:"shellscript",name:"Shell",aliases:["bash","sh","shell","zsh"],import:(()=>M(()=>import("./shellscript-Yzrsuije.js"),[]))},{id:"shellsession",name:"Shell Session",aliases:["console"],import:(()=>M(()=>import("./shellsession-BADoaaVG.js"),__vite__mapDeps([82,28])))},{id:"smalltalk",name:"Smalltalk",import:(()=>M(()=>import("./smalltalk-BERRCDM3.js"),[]))},{id:"solidity",name:"Solidity",import:(()=>M(()=>import("./solidity-rGO070M0.js"),[]))},{id:"soy",name:"Closure Templates",aliases:["closure-templates"],import:(()=>M(()=>import("./soy-Brmx7dQM.js"),__vite__mapDeps([83,1,2,3])))},{id:"sparql",name:"SPARQL",import:(()=>M(()=>import("./sparql-rVzFXLq3.js"),__vite__mapDeps([84,85])))},{id:"splunk",name:"Splunk Query Language",aliases:["spl"],import:(()=>M(()=>import("./splunk-BtCnVYZw.js"),[]))},{id:"sql",name:"SQL",import:(()=>M(()=>import("./sql-BLtJtn59.js"),[]))},{id:"ssh-config",name:"SSH Config",import:(()=>M(()=>import("./ssh-config-_ykCGR6B.js"),[]))},{id:"stata",name:"Stata",import:(()=>M(()=>import("./stata-BH5u7GGu.js"),__vite__mapDeps([86,16])))},{id:"stylus",name:"Stylus",aliases:["styl"],import:(()=>M(()=>import("./stylus-BEDo0Tqx.js"),[]))},{id:"svelte",name:"Svelte",import:(()=>M(()=>import("./svelte-3Dk4HxPD.js"),__vite__mapDeps([87,2,11,3,12])))},{id:"swift",name:"Swift",import:(()=>M(()=>import("./swift-Dg5xB15N.js"),[]))},{id:"system-verilog",name:"SystemVerilog",import:(()=>M(()=>import("./system-verilog-CnnmHF94.js"),[]))},{id:"systemd",name:"Systemd Units",import:(()=>M(()=>import("./systemd-4A_iFExJ.js"),[]))},{id:"talonscript",name:"TalonScript",aliases:["talon"],import:(()=>M(()=>import("./talonscript-CkByrt1z.js"),[]))},{id:"tasl",name:"Tasl",import:(()=>M(()=>import("./tasl-QIJgUcNo.js"),[]))},{id:"tcl",name:"Tcl",import:(()=>M(()=>import("./tcl-dwOrl1Do.js"),[]))},{id:"templ",name:"Templ",import:(()=>M(()=>import("./templ-W15q3VgB.js"),__vite__mapDeps([88,89,2,3])))},{id:"terraform",name:"Terraform",aliases:["tf","tfvars"],import:(()=>M(()=>import("./terraform-BETggiCN.js"),[]))},{id:"tex",name:"TeX",import:(()=>M(()=>import("./tex-CxkMU7Pf.js"),__vite__mapDeps([64,62])))},{id:"toml",name:"TOML",import:(()=>M(()=>import("./toml-vGWfd6FD.js"),[]))},{id:"ts-tags",name:"TypeScript with Tags",aliases:["lit"],import:(()=>M(()=>import("./ts-tags-zn1MmPIZ.js"),__vite__mapDeps([90,11,3,2,25,26,1,16,7,8])))},{id:"tsv",name:"TSV",import:(()=>M(()=>import("./tsv-B_m7g4N7.js"),[]))},{id:"tsx",name:"TSX",import:(()=>M(()=>import("./tsx-COt5Ahok.js"),[]))},{id:"turtle",name:"Turtle",import:(()=>M(()=>import("./turtle-BsS91CYL.js"),[]))},{id:"twig",name:"Twig",import:(()=>M(()=>import("./twig-CO9l9SDP.js"),__vite__mapDeps([91,3,2,5,72,1,7,8,16,9,20,33,34,35,11,36,13,23,24,25,26,28,37,38])))},{id:"typescript",name:"TypeScript",aliases:["ts","cts","mts"],import:(()=>M(()=>import("./typescript-BPQ3VLAy.js"),[]))},{id:"typespec",name:"TypeSpec",aliases:["tsp"],import:(()=>M(()=>import("./typespec-BGHnOYBU.js"),[]))},{id:"typst",name:"Typst",aliases:["typ"],import:(()=>M(()=>import("./typst-DHCkPAjA.js"),[]))},{id:"v",name:"V",import:(()=>M(()=>import("./v-BcVCzyr7.js"),[]))},{id:"vala",name:"Vala",import:(()=>M(()=>import("./vala-CsfeWuGM.js"),[]))},{id:"vb",name:"Visual Basic",aliases:["cmd"],import:(()=>M(()=>import("./vb-D17OF-Vu.js"),[]))},{id:"verilog",name:"Verilog",import:(()=>M(()=>import("./verilog-BQ8w6xss.js"),[]))},{id:"vhdl",name:"VHDL",import:(()=>M(()=>import("./vhdl-CeAyd5Ju.js"),[]))},{id:"viml",name:"Vim Script",aliases:["vim","vimscript"],import:(()=>M(()=>import("./viml-CJc9bBzg.js"),[]))},{id:"vue",name:"Vue",import:(()=>M(()=>import("./vue-DnHKYNfI.js"),__vite__mapDeps([92,3,2,11,9,15,1])))},{id:"vue-html",name:"Vue HTML",import:(()=>M(()=>import("./vue-html-CChd_i61.js"),__vite__mapDeps([93,92,3,2,11,9,15,1])))},{id:"vue-vine",name:"Vue Vine",import:(()=>M(()=>import("./vue-vine-8moa0y9V.js"),__vite__mapDeps([94,3,5,67,95,12,92,2,11,9,15,1])))},{id:"vyper",name:"Vyper",aliases:["vy"],import:(()=>M(()=>import("./vyper-CDx5xZoG.js"),[]))},{id:"wasm",name:"WebAssembly",import:(()=>M(()=>import("./wasm-MzD3tlZU.js"),[]))},{id:"wenyan",name:"Wenyan",aliases:[""],import:(()=>M(()=>import("./wenyan-BV7otONQ.js"),[]))},{id:"wgsl",name:"WGSL",import:(()=>M(()=>import("./wgsl-Dx-B1_4e.js"),[]))},{id:"wikitext",name:"Wikitext",aliases:["mediawiki","wiki"],import:(()=>M(()=>import("./wikitext-BhOHFoWU.js"),[]))},{id:"wit",name:"WebAssembly Interface Types",import:(()=>M(()=>import("./wit-5i3qLPDT.js"),[]))},{id:"wolfram",name:"Wolfram",aliases:["wl"],import:(()=>M(()=>import("./wolfram-lXgVvXCa.js"),[]))},{id:"xml",name:"XML",import:(()=>M(()=>import("./xml-sdJ4AIDG.js"),__vite__mapDeps([7,8])))},{id:"xsl",name:"XSL",import:(()=>M(()=>import("./xsl-CtQFsRM5.js"),__vite__mapDeps([96,7,8])))},{id:"yaml",name:"YAML",aliases:["yml"],import:(()=>M(()=>import("./yaml-Buea-lGh.js"),[]))},{id:"zenscript",name:"ZenScript",import:(()=>M(()=>import("./zenscript-DVFEvuxE.js"),[]))},{id:"zig",name:"Zig",import:(()=>M(()=>import("./zig-VOosw3JB.js"),[]))}],m5=Object.fromEntries(kE.map(t=>[t.id,t.import])),g5=Object.fromEntries(kE.flatMap(t=>t.aliases?.map(e=>[e,t.import])||[])),y5={...m5,...g5},_5=[{id:"andromeeda",displayName:"Andromeeda",type:"dark",import:(()=>M(()=>import("./andromeeda-C-Jbm3Hp.js"),[]))},{id:"aurora-x",displayName:"Aurora X",type:"dark",import:(()=>M(()=>import("./aurora-x-D-2ljcwZ.js"),[]))},{id:"ayu-dark",displayName:"Ayu Dark",type:"dark",import:(()=>M(()=>import("./ayu-dark-Cv9koXgw.js"),[]))},{id:"catppuccin-frappe",displayName:"Catppuccin Frapp",type:"dark",import:(()=>M(()=>import("./catppuccin-frappe-DFWUc33u.js"),[]))},{id:"catppuccin-latte",displayName:"Catppuccin Latte",type:"light",import:(()=>M(()=>import("./catppuccin-latte-C9dUb6Cb.js"),[]))},{id:"catppuccin-macchiato",displayName:"Catppuccin Macchiato",type:"dark",import:(()=>M(()=>import("./catppuccin-macchiato-DQyhUUbL.js"),[]))},{id:"catppuccin-mocha",displayName:"Catppuccin Mocha",type:"dark",import:(()=>M(()=>import("./catppuccin-mocha-D87Tk5Gz.js"),[]))},{id:"dark-plus",displayName:"Dark Plus",type:"dark",import:(()=>M(()=>import("./dark-plus-C3mMm8J8.js"),[]))},{id:"dracula",displayName:"Dracula Theme",type:"dark",import:(()=>M(()=>import("./dracula-BzJJZx-M.js"),[]))},{id:"dracula-soft",displayName:"Dracula Theme Soft",type:"dark",import:(()=>M(()=>import("./dracula-soft-BXkSAIEj.js"),[]))},{id:"everforest-dark",displayName:"Everforest Dark",type:"dark",import:(()=>M(()=>import("./everforest-dark-BgDCqdQA.js"),[]))},{id:"everforest-light",displayName:"Everforest Light",type:"light",import:(()=>M(()=>import("./everforest-light-C8M2exoo.js"),[]))},{id:"github-dark",displayName:"GitHub Dark",type:"dark",import:(()=>M(()=>import("./github-dark-DHJKELXO.js"),[]))},{id:"github-dark-default",displayName:"GitHub Dark Default",type:"dark",import:(()=>M(()=>import("./github-dark-default-Cuk6v7N8.js"),[]))},{id:"github-dark-dimmed",displayName:"GitHub Dark Dimmed",type:"dark",import:(()=>M(()=>import("./github-dark-dimmed-DH5Ifo-i.js"),[]))},{id:"github-dark-high-contrast",displayName:"GitHub Dark High Contrast",type:"dark",import:(()=>M(()=>import("./github-dark-high-contrast-E3gJ1_iC.js"),[]))},{id:"github-light",displayName:"GitHub Light",type:"light",import:(()=>M(()=>import("./github-light-DAi9KRSo.js"),[]))},{id:"github-light-default",displayName:"GitHub Light Default",type:"light",import:(()=>M(()=>import("./github-light-default-D7oLnXFd.js"),[]))},{id:"github-light-high-contrast",displayName:"GitHub Light High Contrast",type:"light",import:(()=>M(()=>import("./github-light-high-contrast-BfjtVDDH.js"),[]))},{id:"gruvbox-dark-hard",displayName:"Gruvbox Dark Hard",type:"dark",import:(()=>M(()=>import("./gruvbox-dark-hard-CFHQjOhq.js"),[]))},{id:"gruvbox-dark-medium",displayName:"Gruvbox Dark Medium",type:"dark",import:(()=>M(()=>import("./gruvbox-dark-medium-GsRaNv29.js"),[]))},{id:"gruvbox-dark-soft",displayName:"Gruvbox Dark Soft",type:"dark",import:(()=>M(()=>import("./gruvbox-dark-soft-CVdnzihN.js"),[]))},{id:"gruvbox-light-hard",displayName:"Gruvbox Light Hard",type:"light",import:(()=>M(()=>import("./gruvbox-light-hard-CH1njM8p.js"),[]))},{id:"gruvbox-light-medium",displayName:"Gruvbox Light Medium",type:"light",import:(()=>M(()=>import("./gruvbox-light-medium-DRw_LuNl.js"),[]))},{id:"gruvbox-light-soft",displayName:"Gruvbox Light Soft",type:"light",import:(()=>M(()=>import("./gruvbox-light-soft-hJgmCMqR.js"),[]))},{id:"houston",displayName:"Houston",type:"dark",import:(()=>M(()=>import("./houston-DnULxvSX.js"),[]))},{id:"kanagawa-dragon",displayName:"Kanagawa Dragon",type:"dark",import:(()=>M(()=>import("./kanagawa-dragon-CkXjmgJE.js"),[]))},{id:"kanagawa-lotus",displayName:"Kanagawa Lotus",type:"light",import:(()=>M(()=>import("./kanagawa-lotus-CfQXZHmo.js"),[]))},{id:"kanagawa-wave",displayName:"Kanagawa Wave",type:"dark",import:(()=>M(()=>import("./kanagawa-wave-DWedfzmr.js"),[]))},{id:"laserwave",displayName:"LaserWave",type:"dark",import:(()=>M(()=>import("./laserwave-DUszq2jm.js"),[]))},{id:"light-plus",displayName:"Light Plus",type:"light",import:(()=>M(()=>import("./light-plus-B7mTdjB0.js"),[]))},{id:"material-theme",displayName:"Material Theme",type:"dark",import:(()=>M(()=>import("./material-theme-D5KoaKCx.js"),[]))},{id:"material-theme-darker",displayName:"Material Theme Darker",type:"dark",import:(()=>M(()=>import("./material-theme-darker-BfHTSMKl.js"),[]))},{id:"material-theme-lighter",displayName:"Material Theme Lighter",type:"light",import:(()=>M(()=>import("./material-theme-lighter-B0m2ddpp.js"),[]))},{id:"material-theme-ocean",displayName:"Material Theme Ocean",type:"dark",import:(()=>M(()=>import("./material-theme-ocean-CyktbL80.js"),[]))},{id:"material-theme-palenight",displayName:"Material Theme Palenight",type:"dark",import:(()=>M(()=>import("./material-theme-palenight-Csfq5Kiy.js"),[]))},{id:"min-dark",displayName:"Min Dark",type:"dark",import:(()=>M(()=>import("./min-dark-CafNBF8u.js"),[]))},{id:"min-light",displayName:"Min Light",type:"light",import:(()=>M(()=>import("./min-light-CTRr51gU.js"),[]))},{id:"monokai",displayName:"Monokai",type:"dark",import:(()=>M(()=>import("./monokai-D4h5O-jR.js"),[]))},{id:"night-owl",displayName:"Night Owl",type:"dark",import:(()=>M(()=>import("./night-owl-C39BiMTA.js"),[]))},{id:"nord",displayName:"Nord",type:"dark",import:(()=>M(()=>import("./nord-Ddv68eIx.js"),[]))},{id:"one-dark-pro",displayName:"One Dark Pro",type:"dark",import:(()=>M(()=>import("./one-dark-pro-DVMEJ2y_.js"),[]))},{id:"one-light",displayName:"One Light",type:"light",import:(()=>M(()=>import("./one-light-PoHY5YXO.js"),[]))},{id:"plastic",displayName:"Plastic",type:"dark",import:(()=>M(()=>import("./plastic-3e1v2bzS.js"),[]))},{id:"poimandres",displayName:"Poimandres",type:"dark",import:(()=>M(()=>import("./poimandres-CS3Unz2-.js"),[]))},{id:"red",displayName:"Red",type:"dark",import:(()=>M(()=>import("./red-bN70gL4F.js"),[]))},{id:"rose-pine",displayName:"Ros Pine",type:"dark",import:(()=>M(()=>import("./rose-pine-qdsjHGoJ.js"),[]))},{id:"rose-pine-dawn",displayName:"Ros Pine Dawn",type:"light",import:(()=>M(()=>import("./rose-pine-dawn-DHQR4-dF.js"),[]))},{id:"rose-pine-moon",displayName:"Ros Pine Moon",type:"dark",import:(()=>M(()=>import("./rose-pine-moon-D4_iv3hh.js"),[]))},{id:"slack-dark",displayName:"Slack Dark",type:"dark",import:(()=>M(()=>import("./slack-dark-BthQWCQV.js"),[]))},{id:"slack-ochin",displayName:"Slack Ochin",type:"light",import:(()=>M(()=>import("./slack-ochin-DqwNpetd.js"),[]))},{id:"snazzy-light",displayName:"Snazzy Light",type:"light",import:(()=>M(()=>import("./snazzy-light-Bw305WKR.js"),[]))},{id:"solarized-dark",displayName:"Solarized Dark",type:"dark",import:(()=>M(()=>import("./solarized-dark-DXbdFlpD.js"),[]))},{id:"solarized-light",displayName:"Solarized Light",type:"light",import:(()=>M(()=>import("./solarized-light-L9t79GZl.js"),[]))},{id:"synthwave-84",displayName:"Synthwave '84",type:"dark",import:(()=>M(()=>import("./synthwave-84-CbfX1IO0.js"),[]))},{id:"tokyo-night",displayName:"Tokyo Night",type:"dark",import:(()=>M(()=>import("./tokyo-night-hegEt444.js"),[]))},{id:"vesper",displayName:"Vesper",type:"dark",import:(()=>M(()=>import("./vesper-DU1UobuO.js"),[]))},{id:"vitesse-black",displayName:"Vitesse Black",type:"dark",import:(()=>M(()=>import("./vitesse-black-Bkuqu6BP.js"),[]))},{id:"vitesse-dark",displayName:"Vitesse Dark",type:"dark",import:(()=>M(()=>import("./vitesse-dark-D0r3Knsf.js"),[]))},{id:"vitesse-light",displayName:"Vitesse Light",type:"light",import:(()=>M(()=>import("./vitesse-light-CVO1_9PV.js"),[]))}],b5=Object.fromEntries(_5.map(t=>[t.id,t.import]));class Dy extends Error{constructor(e){super(e),this.name="ShikiError"}}function v5(){return 2147483648}function x5(){return typeof performance<"u"?performance.now():Date.now()}const w5=(t,e)=>t+(e-t%e)%e;async function S5(t){let e,n;const r={};function s(g){n=g,r.HEAPU8=new Uint8Array(g),r.HEAPU32=new Uint32Array(g)}function a(g,v,x){r.HEAPU8.copyWithin(g,v,v+x)}function l(g){try{return e.grow(g-n.byteLength+65535>>>16),s(e.buffer),1}catch{}}function u(g){const v=r.HEAPU8.length;g=g>>>0;const x=v5();if(g>x)return!1;for(let E=1;E<=4;E*=2){let S=v*(1+.2/E);S=Math.min(S,g+100663296);const C=Math.min(x,w5(Math.max(g,S),65536));if(l(C))return!0}return!1}const f=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function h(g,v,x=1024){const E=v+x;let S=v;for(;g[S]&&!(S>=E);)++S;if(S-v>16&&g.buffer&&f)return f.decode(g.subarray(v,S));let C="";for(;v<S;){let T=g[v++];if(!(T&128)){C+=String.fromCharCode(T);continue}const L=g[v++]&63;if((T&224)===192){C+=String.fromCharCode((T&31)<<6|L);continue}const D=g[v++]&63;if((T&240)===224?T=(T&15)<<12|L<<6|D:T=(T&7)<<18|L<<12|D<<6|g[v++]&63,T<65536)C+=String.fromCharCode(T);else{const N=T-65536;C+=String.fromCharCode(55296|N>>10,56320|N&1023)}}return C}function m(g,v){return g?h(r.HEAPU8,g,v):""}const p={emscripten_get_now:x5,emscripten_memcpy_big:a,emscripten_resize_heap:u,fd_write:()=>0};async function y(){const v=await t({env:p,wasi_snapshot_preview1:p});e=v.memory,s(e.buffer),Object.assign(r,v),r.UTF8ToString=m}return await y(),r}var k5=Object.defineProperty,E5=(t,e,n)=>e in t?k5(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ft=(t,e,n)=>E5(t,typeof e!="symbol"?e+"":e,n);let Yt=null;function C5(t){throw new Dy(t.UTF8ToString(t.getLastOnigError()))}class ih{constructor(e){Ft(this,"utf16Length"),Ft(this,"utf8Length"),Ft(this,"utf16Value"),Ft(this,"utf8Value"),Ft(this,"utf16OffsetToUtf8"),Ft(this,"utf8OffsetToUtf16");const n=e.length,r=ih._utf8ByteLength(e),s=r!==n,a=s?new Uint32Array(n+1):null;s&&(a[n]=r);const l=s?new Uint32Array(r+1):null;s&&(l[r]=n);const u=new Uint8Array(r);let f=0;for(let h=0;h<n;h++){const m=e.charCodeAt(h);let p=m,y=!1;if(m>=55296&&m<=56319&&h+1<n){const g=e.charCodeAt(h+1);g>=56320&&g<=57343&&(p=(m-55296<<10)+65536|g-56320,y=!0)}s&&(a[h]=f,y&&(a[h+1]=f),p<=127?l[f+0]=h:p<=2047?(l[f+0]=h,l[f+1]=h):p<=65535?(l[f+0]=h,l[f+1]=h,l[f+2]=h):(l[f+0]=h,l[f+1]=h,l[f+2]=h,l[f+3]=h)),p<=127?u[f++]=p:p<=2047?(u[f++]=192|(p&1984)>>>6,u[f++]=128|(p&63)>>>0):p<=65535?(u[f++]=224|(p&61440)>>>12,u[f++]=128|(p&4032)>>>6,u[f++]=128|(p&63)>>>0):(u[f++]=240|(p&1835008)>>>18,u[f++]=128|(p&258048)>>>12,u[f++]=128|(p&4032)>>>6,u[f++]=128|(p&63)>>>0),y&&h++}this.utf16Length=n,this.utf8Length=r,this.utf16Value=e,this.utf8Value=u,this.utf16OffsetToUtf8=a,this.utf8OffsetToUtf16=l}static _utf8ByteLength(e){let n=0;for(let r=0,s=e.length;r<s;r++){const a=e.charCodeAt(r);let l=a,u=!1;if(a>=55296&&a<=56319&&r+1<s){const f=e.charCodeAt(r+1);f>=56320&&f<=57343&&(l=(a-55296<<10)+65536|f-56320,u=!0)}l<=127?n+=1:l<=2047?n+=2:l<=65535?n+=3:n+=4,u&&r++}return n}createString(e){const n=e.omalloc(this.utf8Length);return e.HEAPU8.set(this.utf8Value,n),n}}const ah=class zr{constructor(e){if(Ft(this,"id",++zr.LAST_ID),Ft(this,"_onigBinding"),Ft(this,"content"),Ft(this,"utf16Length"),Ft(this,"utf8Length"),Ft(this,"utf16OffsetToUtf8"),Ft(this,"utf8OffsetToUtf16"),Ft(this,"ptr"),!Yt)throw new Dy("Must invoke loadWasm first.");this._onigBinding=Yt,this.content=e;const n=new ih(e);this.utf16Length=n.utf16Length,this.utf8Length=n.utf8Length,this.utf16OffsetToUtf8=n.utf16OffsetToUtf8,this.utf8OffsetToUtf16=n.utf8OffsetToUtf16,this.utf8Length<1e4&&!zr._sharedPtrInUse?(zr._sharedPtr||(zr._sharedPtr=Yt.omalloc(1e4)),zr._sharedPtrInUse=!0,Yt.HEAPU8.set(n.utf8Value,zr._sharedPtr),this.ptr=zr._sharedPtr):this.ptr=n.createString(Yt)}convertUtf8OffsetToUtf16(e){return this.utf8OffsetToUtf16?e<0?0:e>this.utf8Length?this.utf16Length:this.utf8OffsetToUtf16[e]:e}convertUtf16OffsetToUtf8(e){return this.utf16OffsetToUtf8?e<0?0:e>this.utf16Length?this.utf8Length:this.utf16OffsetToUtf8[e]:e}dispose(){this.ptr===zr._sharedPtr?zr._sharedPtrInUse=!1:this._onigBinding.ofree(this.ptr)}};Ft(ah,"LAST_ID",0);Ft(ah,"_sharedPtr",0);Ft(ah,"_sharedPtrInUse",!1);let EE=ah;class T5{constructor(e){if(Ft(this,"_onigBinding"),Ft(this,"_ptr"),!Yt)throw new Dy("Must invoke loadWasm first.");const n=[],r=[];for(let u=0,f=e.length;u<f;u++){const h=new ih(e[u]);n[u]=h.createString(Yt),r[u]=h.utf8Length}const s=Yt.omalloc(4*e.length);Yt.HEAPU32.set(n,s/4);const a=Yt.omalloc(4*e.length);Yt.HEAPU32.set(r,a/4);const l=Yt.createOnigScanner(s,a,e.length);for(let u=0,f=e.length;u<f;u++)Yt.ofree(n[u]);Yt.ofree(a),Yt.ofree(s),l===0&&C5(Yt),this._onigBinding=Yt,this._ptr=l}dispose(){this._onigBinding.freeOnigScanner(this._ptr)}findNextMatchSync(e,n,r){let s=0;if(typeof r=="number"&&(s=r),typeof e=="string"){e=new EE(e);const a=this._findNextMatchSync(e,n,!1,s);return e.dispose(),a}return this._findNextMatchSync(e,n,!1,s)}_findNextMatchSync(e,n,r,s){const a=this._onigBinding,l=a.findNextOnigScannerMatch(this._ptr,e.id,e.ptr,e.utf8Length,e.convertUtf16OffsetToUtf8(n),s);if(l===0)return null;const u=a.HEAPU32;let f=l/4;const h=u[f++],m=u[f++],p=[];for(let y=0;y<m;y++){const g=e.convertUtf8OffsetToUtf16(u[f++]),v=e.convertUtf8OffsetToUtf16(u[f++]);p[y]={start:g,end:v,length:v-g}}return{index:h,captureIndices:p}}}function A5(t){return typeof t.instantiator=="function"}function R5(t){return typeof t.default=="function"}function O5(t){return typeof t.data<"u"}function N5(t){return typeof Response<"u"&&t instanceof Response}function I5(t){return typeof ArrayBuffer<"u"&&(t instanceof ArrayBuffer||ArrayBuffer.isView(t))||typeof Buffer<"u"&&Buffer.isBuffer?.(t)||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer||typeof Uint32Array<"u"&&t instanceof Uint32Array}let Tu;function M5(t){if(Tu)return Tu;async function e(){Yt=await S5(async n=>{let r=t;return r=await r,typeof r=="function"&&(r=await r(n)),typeof r=="function"&&(r=await r(n)),A5(r)?r=await r.instantiator(n):R5(r)?r=await r.default(n):(O5(r)&&(r=r.data),N5(r)?typeof WebAssembly.instantiateStreaming=="function"?r=await D5(r)(n):r=await L5(r)(n):I5(r)?r=await fm(r)(n):r instanceof WebAssembly.Module?r=await fm(r)(n):"default"in r&&r.default instanceof WebAssembly.Module&&(r=await fm(r.default)(n))),"instance"in r&&(r=r.instance),"exports"in r&&(r=r.exports),r})}return Tu=e(),Tu}function fm(t){return e=>WebAssembly.instantiate(t,e)}function D5(t){return e=>WebAssembly.instantiateStreaming(t,e)}function L5(t){return async e=>{const n=await t.arrayBuffer();return WebAssembly.instantiate(n,e)}}async function j5(t){return t&&await M5(t),{createScanner(e){return new T5(e.map(n=>typeof n=="string"?n:n.source))},createString(e){return new EE(e)}}}const z5=h5({langs:y5,themes:b5,engine:()=>j5(M(()=>import("./wasm-CG6Dc4jp.js"),[]))}),{codeToHtml:CE}=p5(z5,{guessEmbeddedLanguages:Tz});function P5(){const t=Ue.c(2),[e,n]=Q.useState(B5);let r,s;return t[0]===Symbol.for("react.memo_cache_sentinel")?(r=()=>{const a=window.matchMedia("(prefers-color-scheme: dark)"),l=u=>n(u.matches);return a.addEventListener("change",l),()=>a.removeEventListener("change",l)},s=[],t[0]=r,t[1]=s):(r=t[0],s=t[1]),Q.useEffect(r,s),e}function B5(){return window.matchMedia("(prefers-color-scheme: dark)").matches}function oh(t,e){const[n,r]=Q.useState(""),s=P5();return Q.useEffect(()=>{let a=!1;return(async()=>{if(!t){a||r("");return}try{if(e==="text"){const f=t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");a||r(`<pre><code>${f}</code></pre>`);return}const u=await CE(t,{lang:e,theme:s?"github-dark":"github-light"});a||r(u)}catch{const u=t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");a||r(`<pre><code>${u}</code></pre>`)}})(),()=>{a=!0}},[t,e,s]),n}const lh="text-xs [&_pre]:bg-transparent! [&_pre]:p-0! [&_pre]:m-0! [&_pre]:overflow-visible! [&_code]:bg-transparent! [&_code]:block!";function $5(t){try{const e=JSON.parse(t);return JSON.stringify(e,null,2)}catch{return t}}function Ly(t){const e=Ue.c(5),{content:n}=t,[r,s]=Q.useState("");let a,l;e[0]!==n?(a=()=>{let h=!1;return n.text().then(m=>{h||s($5(m))}),()=>{h=!0}},l=[n],e[0]=n,e[1]=a,e[2]=l):(a=e[1],l=e[2]),Q.useEffect(a,l);const u=oh(r,"json");let f;return e[3]!==u?(f=w.jsx("div",{className:lh,dangerouslySetInnerHTML:{__html:u}}),e[3]=u,e[4]=f):f=e[4],f}function U5(t){try{const n=/(>)(<)(\/*)/g,r=t.replace(n,`$1
$2$3`);let s=0;return r.split(`
`).map(a=>{let l=0;a.match(/.+<\/\w[^>]*>$/)?l=0:a.match(/^<\/\w/)&&s>0?s-=1:a.match(/^<\w[^>]*[^/]>.*$/)?l=1:l=0;const u="  ".repeat(s);return s+=l,u+a}).join(`
`)}catch{return t}}function q5(t){const e=Ue.c(5),{content:n}=t,[r,s]=Q.useState("");let a,l;e[0]!==n?(a=()=>{let h=!1;return n.text().then(m=>{h||s(U5(m))}),()=>{h=!0}},l=[n],e[0]=n,e[1]=a,e[2]=l):(a=e[1],l=e[2]),Q.useEffect(a,l);const u=oh(r,"xml");let f;return e[3]!==u?(f=w.jsx("div",{className:lh,dangerouslySetInnerHTML:{__html:u}}),e[3]=u,e[4]=f):f=e[4],f}function F5(t){const e=Ue.c(5),{content:n}=t,[r,s]=Q.useState("");let a,l;e[0]!==n?(a=()=>{let h=!1;return n.text().then(m=>{h||s(m)}),()=>{h=!0}},l=[n],e[0]=n,e[1]=a,e[2]=l):(a=e[1],l=e[2]),Q.useEffect(a,l);const u=oh(r,"yaml");let f;return e[3]!==u?(f=w.jsx("div",{className:lh,dangerouslySetInnerHTML:{__html:u}}),e[3]=u,e[4]=f):f=e[4],f}function Sg(t){const e=Ue.c(5),{content:n}=t,[r,s]=Q.useState("");let a,l;e[0]!==n?(a=()=>{n.text().then(s)},l=[n],e[0]=n,e[1]=a,e[2]=l):(a=e[1],l=e[2]),Q.useEffect(a,l);let u;return e[3]!==r?(u=w.jsx("pre",{className:"text-xs font-mono text-neutral-700 dark:text-neutral-200 whitespace-pre-wrap",children:r}),e[3]=r,e[4]=u):u=e[4],u}function V5(t){const e=Ue.c(6),{content:n}=t,r=H5;let s;e[0]===Symbol.for("react.memo_cache_sentinel")?(s=w.jsx("div",{className:"text-neutral-500 dark:text-neutral-400 text-sm",children:"Binary content"}),e[0]=s):s=e[0];const a=r(n.size);let l;e[1]!==a?(l=w.jsx("div",{className:"text-2xl font-semibold text-neutral-700 dark:text-neutral-200",children:a}),e[1]=a,e[2]=l):l=e[2];let u;e[3]===Symbol.for("react.memo_cache_sentinel")?(u=w.jsx("div",{className:"text-xs text-neutral-400 dark:text-neutral-500",children:"Cannot preview binary data"}),e[3]=u):u=e[3];let f;return e[4]!==l?(f=w.jsx("div",{className:"flex flex-col items-center justify-center p-12 bg-neutral-100 dark:bg-white/5 rounded-lg border border-neutral-200 dark:border-white/10",children:w.jsxs("div",{className:"text-center space-y-2",children:[s,l,u]})}),e[4]=l,e[5]=f):f=e[5],f}function H5(t){return t<1024?`${t} B`:t<1048576?`${(t/1024).toFixed(2)} KB`:`${(t/1048576).toFixed(2)} MB`}function G5(t){const e=Ue.c(4),{content:n}=t;let r;e[0]!==n?(r=URL.createObjectURL(n),e[0]=n,e[1]=r):r=e[1];const s=r;let a;return e[2]!==s?(a=w.jsx("div",{className:"h-full",children:w.jsx("img",{src:s,alt:"Response",className:"max-w-full max-h-full object-contain"})}),e[2]=s,e[3]=a):a=e[3],a}function K5(){const t=Ue.c(2),[e,n]=Q.useState(Z5);let r,s;return t[0]===Symbol.for("react.memo_cache_sentinel")?(r=()=>{const a=window.matchMedia("(prefers-color-scheme: dark)"),l=u=>n(u.matches);return a.addEventListener("change",l),()=>a.removeEventListener("change",l)},s=[],t[0]=r,t[1]=s):(r=t[0],s=t[1]),Q.useEffect(r,s),e}function Z5(){return window.matchMedia("(prefers-color-scheme: dark)").matches}function Q5(t){const e=[],n=t.split(/\n\n+/);for(const r of n){if(!r.trim())continue;const s={data:"",raw:r},a=r.split(`
`);for(const l of a)l.startsWith("id:")?s.id=l.slice(3).trim():l.startsWith("event:")?s.event=l.slice(6).trim():l.startsWith("data:")?s.data+=(s.data?`
`:"")+l.slice(5).trim():l.startsWith("retry:")&&(s.retry=parseInt(l.slice(6).trim(),10));(s.data||s.event||s.id)&&e.push(s)}return e}function J5(t){try{return JSON.parse(t)}catch{return null}}function Y5({event:t,index:e,prefersDark:n}){const[r,s]=Q.useState(!0),[a,l]=Q.useState(""),u=Q.useMemo(()=>J5(t.data),[t.data]);return Q.useEffect(()=>{(async()=>{if(u)try{const h=JSON.stringify(u,null,2),m=await CE(h,{lang:"json",theme:n?"github-dark":"github-light"});l(m)}catch{l(`<pre>${JSON.stringify(u,null,2)}</pre>`)}})()},[u,n]),w.jsxs("div",{className:"border border-neutral-200 dark:border-white/10 rounded-lg overflow-hidden",children:[w.jsxs("button",{onClick:()=>s(!r),className:"w-full flex items-center gap-2 px-3 py-2 bg-neutral-50 dark:bg-white/5 hover:bg-neutral-100 dark:hover:bg-white/10 transition-colors",children:[r?w.jsx(Zl,{className:"w-4 h-4 text-neutral-400"}):w.jsx(Ak,{className:"w-4 h-4 text-neutral-400"}),w.jsxs("span",{className:"text-xs font-mono text-neutral-500 dark:text-neutral-400",children:["#",e+1]}),t.event&&w.jsx("span",{className:"px-2 py-0.5 text-xs font-medium bg-blue-100 dark:bg-blue-500/20 text-blue-700 dark:text-blue-300 rounded",children:t.event}),t.id&&w.jsxs("span",{className:"text-xs text-neutral-400 dark:text-neutral-500",children:["id: ",t.id]}),u&&w.jsx("span",{className:"px-1.5 py-0.5 text-[10px] font-medium bg-emerald-100 dark:bg-emerald-500/20 text-emerald-700 dark:text-emerald-300 rounded",children:"JSON"})]}),r&&w.jsx("div",{className:"p-3 bg-white dark:bg-transparent",children:u&&a?w.jsx("div",{className:"text-xs [&_pre]:bg-transparent! [&_pre]:p-0! [&_pre]:m-0! [&_pre]:overflow-visible! [&_code]:bg-transparent! [&_code]:block!",dangerouslySetInnerHTML:{__html:a}}):w.jsx("pre",{className:"text-xs font-mono text-neutral-700 dark:text-neutral-200 whitespace-pre-wrap",children:t.data})})]})}function X5(t){const e=Ue.c(17),{content:n}=t;let r;e[0]===Symbol.for("react.memo_cache_sentinel")?(r=[],e[0]=r):r=e[0];const[s,a]=Q.useState(r),[l,u]=Q.useState(""),f=K5();let h,m;if(e[1]!==n?(h=()=>{n.text().then(x=>{u(x),a(Q5(x))})},m=[n],e[1]=n,e[2]=h,e[3]=m):(h=e[2],m=e[3]),Q.useEffect(h,m),s.length===0){let x;return e[4]!==l?(x=w.jsx("pre",{className:"text-xs font-mono text-neutral-700 dark:text-neutral-200 whitespace-pre-wrap",children:l}),e[4]=l,e[5]=x):x=e[5],x}const p=s.length!==1?"s":"";let y;e[6]!==s.length||e[7]!==p?(y=w.jsx("div",{className:"flex items-center gap-2 mb-3",children:w.jsxs("span",{className:"text-xs font-medium text-neutral-500 dark:text-neutral-400",children:[s.length," event",p]})}),e[6]=s.length,e[7]=p,e[8]=y):y=e[8];let g;if(e[9]!==s||e[10]!==f){let x;e[12]!==f?(x=(E,S)=>w.jsx(Y5,{event:E,index:S,prefersDark:f},S),e[12]=f,e[13]=x):x=e[13],g=s.map(x),e[9]=s,e[10]=f,e[11]=g}else g=e[11];let v;return e[14]!==y||e[15]!==g?(v=w.jsxs("div",{className:"space-y-2",children:[y,g]}),e[14]=y,e[15]=g,e[16]=v):v=e[16],v}const W5=["video/","audio/","application/pdf","application/octet-stream","application/zip","application/gzip","application/x-tar","application/x-rar","application/x-7z","application/vnd.ms-","application/vnd.openxmlformats","application/x-executable","application/x-sharedlib","application/x-mach-binary","application/wasm","font/"],eP=["image/png","image/jpeg","image/gif","image/webp","image/svg+xml","image/bmp","image/x-icon","image/ico","image/avif","image/apng"],tP=["text/","application/json","application/xml","application/javascript","application/ecmascript","application/x-javascript","application/ld+json","application/manifest+json","application/schema+json","application/x-www-form-urlencoded","application/xhtml+xml","application/rss+xml","application/atom+xml","application/soap+xml","application/x-yaml","application/yaml","+json","+xml"];function nP(t){const e=t["content-type"]?.toLowerCase()||"";return e.includes("text/event-stream")?"sse":eP.some(n=>e.includes(n))?"image":W5.some(n=>e.includes(n))?"binary":e.includes("json")||e.endsWith("+json")?"json":e.includes("xml")||e.endsWith("+xml")?"xml":e.includes("yaml")||e.includes("yml")?"yaml":(tP.some(n=>e.includes(n)),"text")}function rP(t){const e=Ue.c(29),{response:n}=t,[r,s]=Q.useState("pretty"),[a,l]=Q.useState(!1);let u;e[0]!==n.headers?(u=nP(n.headers),e[0]=n.headers,e[1]=u):u=e[1];const f=u;let h;e[2]!==f||e[3]!==n.body||e[4]!==r?(h=()=>{if(r==="raw"&&f!=="image"&&f!=="binary")return w.jsx(Sg,{content:n.body});switch(f){case"json":return w.jsx(Ly,{content:n.body});case"xml":return w.jsx(q5,{content:n.body});case"yaml":return w.jsx(F5,{content:n.body});case"sse":return w.jsx(X5,{content:n.body});case"image":return w.jsx(G5,{content:n.body});case"binary":return w.jsx(V5,{content:n.body});default:return w.jsx(Sg,{content:n.body})}},e[2]=f,e[3]=n.body,e[4]=r,e[5]=h):h=e[5];const m=h;let p;e[6]!==f||e[7]!==r?(p=f!=="binary"&&f!=="image"&&w.jsxs("div",{className:"flex gap-1 p-1 bg-neutral-100 dark:bg-white/5 rounded-lg",children:[w.jsx("button",{onClick:()=>s("pretty"),className:`px-3 py-1.5 text-xs font-medium rounded-md transition-all ${r==="pretty"?"bg-white dark:bg-white/10 text-neutral-800 dark:text-neutral-100 shadow-sm":"text-neutral-500 dark:text-neutral-400 hover:text-neutral-700 dark:hover:text-neutral-200"}`,children:"Pretty"}),w.jsx("button",{onClick:()=>s("raw"),className:`px-3 py-1.5 text-xs font-medium rounded-md transition-all ${r==="raw"?"bg-white dark:bg-white/10 text-neutral-800 dark:text-neutral-100 shadow-sm":"text-neutral-500 dark:text-neutral-400 hover:text-neutral-700 dark:hover:text-neutral-200"}`,children:"Raw"})]}),e[6]=f,e[7]=r,e[8]=p):p=e[8];let y;e[9]!==a?(y=()=>l(!a),e[9]=a,e[10]=y):y=e[10];const g=`px-3 py-1.5 text-xs font-medium rounded-lg transition-all ${a?"bg-white dark:bg-white/10 text-neutral-800 dark:text-neutral-100 shadow-sm":"bg-neutral-100 dark:bg-white/5 text-neutral-500 dark:text-neutral-400 hover:text-neutral-700 dark:hover:text-neutral-200"}`;let v;e[11]!==n.headers?(v=Object.keys(n.headers),e[11]=n.headers,e[12]=v):v=e[12];let x;e[13]!==y||e[14]!==g||e[15]!==v.length?(x=w.jsxs("button",{onClick:y,className:g,children:["Headers (",v.length,")"]}),e[13]=y,e[14]=g,e[15]=v.length,e[16]=x):x=e[16];let E;e[17]!==p||e[18]!==x?(E=w.jsxs("div",{className:"flex gap-2 shrink-0 mb-3",children:[p,x]}),e[17]=p,e[18]=x,e[19]=E):E=e[19];let S;e[20]!==n.headers||e[21]!==a?(S=a&&w.jsx("div",{className:"bg-neutral-100 dark:bg-white/5 rounded-xl border border-neutral-200 dark:border-white/10 overflow-hidden shrink-0 mb-3",children:w.jsxs("table",{className:"w-full",children:[w.jsx("thead",{children:w.jsxs("tr",{className:"border-b border-neutral-200 dark:border-white/10",children:[w.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-neutral-500 dark:text-neutral-400",children:"Header"}),w.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-neutral-500 dark:text-neutral-400",children:"Value"})]})}),w.jsx("tbody",{children:Object.entries(n.headers).map(sP)})]})}),e[20]=n.headers,e[21]=a,e[22]=S):S=e[22];let C;e[23]!==m?(C=w.jsx("div",{className:"flex-1 min-h-0 overflow-auto",children:m()}),e[23]=m,e[24]=C):C=e[24];let T;return e[25]!==C||e[26]!==E||e[27]!==S?(T=w.jsxs("div",{className:"h-full flex flex-col overflow-hidden",children:[E,S,C]}),e[25]=C,e[26]=E,e[27]=S,e[28]=T):T=e[28],T}function sP(t){const[e,n]=t;return w.jsxs("tr",{className:"border-b border-neutral-100 dark:border-white/5 last:border-0",children:[w.jsx("td",{className:"px-4 py-2 font-mono text-xs text-neutral-600 dark:text-neutral-300",children:e}),w.jsx("td",{className:"px-4 py-2 font-mono text-xs text-neutral-500 dark:text-neutral-400",children:n})]},e)}let hm=null;async function dm(t){if(hm?.host===t)return hm.data;const e=await fetch(`/proxy/grpc/${t}`);if(!e.ok)throw new Error("Failed to fetch services");const n=await e.json();return hm={host:t,data:n},n}function sw({value:t,onChange:e,placeholder:n,label:r,fetchOptions:s,disabled:a,icon:l}){const[u,f]=Q.useState(!1),[h,m]=Q.useState([]),[p,y]=Q.useState(null),[g,v]=Q.useState(!1),x=Q.useRef(null);Q.useEffect(()=>{const S=C=>{x.current&&!x.current.contains(C.target)&&f(!1)};return document.addEventListener("mousedown",S),()=>document.removeEventListener("mousedown",S)},[]);const E=async()=>{if(!a){f(!0),v(!0),y(null);try{const S=await s();m(S)}catch(S){y(S instanceof Error?S.message:"Failed to fetch"),m([])}finally{v(!1)}}};return w.jsxs("div",{ref:x,className:"relative shrink-0",children:[w.jsxs("button",{type:"button",onClick:E,disabled:a,className:"h-8 px-2 flex items-center gap-2 text-sm transition hover:bg-neutral-50 dark:hover:bg-white/5 disabled:opacity-50 disabled:cursor-not-allowed rounded",children:[l,w.jsx("span",{className:`text-sm whitespace-nowrap ${t?"text-neutral-800 dark:text-neutral-100":"text-neutral-400 dark:text-neutral-500"}`,children:t||n}),g?w.jsx(vf,{className:"w-3.5 h-3.5 animate-spin text-neutral-400 shrink-0"}):w.jsx(Zl,{className:`w-3.5 h-3.5 text-neutral-400 shrink-0 transition-transform ${u?"rotate-180":""}`})]}),u&&w.jsx("div",{className:"absolute top-full left-0 mt-1 w-full min-w-48 max-w-md bg-white dark:bg-[#0f0f0f] border border-neutral-200 dark:border-white/10 rounded-lg shadow-xl z-50 overflow-hidden",children:w.jsxs("div",{className:"max-h-64 overflow-y-auto p-1",children:[g&&w.jsxs("div",{className:"px-3 py-4 text-center text-sm text-neutral-500",children:[w.jsx(vf,{className:"w-4 h-4 animate-spin mx-auto mb-1"}),"Loading..."]}),p&&w.jsx("div",{className:"px-3 py-3 text-sm text-red-500",children:p}),!g&&!p&&h.length===0&&w.jsxs("div",{className:"px-3 py-4 text-center text-sm text-neutral-500",children:["No ",r.toLowerCase()," available"]}),!g&&!p&&h.map(S=>w.jsx("button",{type:"button",onClick:()=>{e(S),f(!1)},className:`w-full px-3 py-2 text-left text-sm rounded-md transition-colors ${S===t?"bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-400":"text-neutral-700 dark:text-neutral-300 hover:bg-neutral-50 dark:hover:bg-white/5"}`,children:S},S))]})})]})}function iP(){const{request:t,setUrl:e,setGrpcMethodSchema:n}=Fn(),r=t?.url??"",s=x=>{const E=x.match(/^grpc:\/\/([^/]*)(?:\/([^/]*)(?:\/([^/]*))?)?$/);return E?{host:E[1]||"",service:E[2]||"",method:E[3]||""}:{host:"",service:"",method:""}},a=(x,E,S)=>x?E?S?`grpc://${x}/${E}/${S}`:`grpc://${x}/${E}`:`grpc://${x}`:"grpc://",{host:l,service:u,method:f}=s(r),h=x=>{e(a(x,"","")),n(void 0)},m=x=>{e(a(l,x,"")),n(void 0)},p=async x=>{e(a(l,u,x));try{const C=(await dm(l)).services.find(T=>T.name===u)?.methods.find(T=>T.name===x);C?.schema?n(C.schema):n(void 0)}catch{n(void 0)}},y=async()=>l?(await dm(l)).services.map(E=>E.name):[],g=async()=>!l||!u?[]:(await dm(l)).services.find(S=>S.name===u)?.methods.map(S=>S.name)??[],v=Math.max(8,l.length||9);return w.jsxs("div",{className:"flex items-center flex-1 min-w-0",children:[w.jsx("input",{type:"text",value:l,onChange:x=>h(x.target.value),placeholder:"host:port",size:v,className:"min-w-20 max-w-full px-2 py-1.5 text-sm bg-transparent text-neutral-800 dark:text-neutral-100 placeholder-neutral-400 dark:placeholder-neutral-600 focus:outline-none"}),w.jsx("span",{className:"text-neutral-300 dark:text-neutral-600 shrink-0",children:"/"}),w.jsx(sw,{value:u,onChange:m,placeholder:"Select service",label:"Service",fetchOptions:y,disabled:!l,icon:w.jsx(jD,{className:`w-4 h-4 shrink-0 ${u?"text-purple-500":"text-neutral-400"}`})}),w.jsx("span",{className:"text-neutral-300 dark:text-neutral-600",children:"/"}),w.jsx(sw,{value:f,onChange:p,placeholder:"Select method",label:"Method",fetchOptions:g,disabled:!l||!u,icon:w.jsx(M3,{className:`w-4 h-4 shrink-0 ${f?"text-amber-500":"text-neutral-400"}`})})]})}const aP=["grpc-timeout","authorization","x-request-id","x-correlation-id"];function kg(t){if(!t||typeof t!="object")return{};const e=t,r=(Array.isArray(e.type)?e.type[0]:e.type)||(e.properties?"object":e.items?"array":void 0);if(r==="object"){const a={},l=e.properties||{};return Object.keys(l).forEach(u=>{a[u]=kg(l[u])}),a}if(r==="array"){const a=e.items||{type:"string"};return[kg(a)]}const s=e.enum;if(s&&s.length>0)return s[0];switch(r){case"integer":case"number":return 0;case"boolean":return!0;case"string":return e.format==="byte"?"":"string";default:return{}}}function oP(){const[t,e]=Q.useState("body"),{request:n,setGrpcBody:r,setGrpcMetadata:s,setVariables:a}=Fn(),l=n?.grpc?.metadata??[],u=n?.grpc?.body??"",f=n?.variables??[],h=n?.grpc?.schema,m=Q.useMemo(()=>{try{return h?kg(h):void 0}catch{return}},[h]),p=[{id:"body",label:"Message"},{id:"headers",label:"Metadata",count:l.filter(y=>y.key).length}];return w.jsxs("div",{className:"space-y-3",children:[w.jsx("div",{className:"flex items-center gap-2",children:w.jsx("div",{role:"tablist",className:"inline-flex gap-1",children:p.map(y=>w.jsxs("button",{role:"tab",onClick:()=>e(y.id),className:`px-2 py-1 text-[11px] font-medium rounded-md transition-all ${t===y.id?"bg-white dark:bg-white/10 text-neutral-800 dark:text-neutral-100 shadow-sm":"text-neutral-500 dark:text-neutral-400 hover:text-neutral-700 dark:hover:text-neutral-200 hover:bg-neutral-100 dark:hover:bg-white/5"}`,children:[y.label,y.count!==void 0&&y.count>0&&w.jsx("span",{className:"ml-1.5 px-1.5 py-0.5 text-[9px] bg-neutral-200 dark:bg-white/10 text-neutral-600 dark:text-neutral-300 rounded-full",children:y.count})]},y.id))})}),w.jsxs("div",{children:[t==="body"&&w.jsx(ky,{value:u,onChange:r,variables:f,onVariablesChange:a,placeholder:m?JSON.stringify(m,null,2):`{
  "field": "value"
}`,action:m!==void 0?{label:"Insert schema",onClick:()=>r(JSON.stringify(m,null,2))}:void 0}),t==="headers"&&w.jsxs("div",{className:"space-y-2",children:[w.jsx("p",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:"gRPC metadata (sent as headers)"}),w.jsx(Gu,{items:l,onChange:s,keyPlaceholder:"Key",valuePlaceholder:"Value",keySuggestions:aP})]})]})]})}function lP(t){const e=Ue.c(29),{response:n}=t,[r,s]=Q.useState("pretty"),[a,l]=Q.useState(!1);let u;e[0]!==n.headers?(u=Object.keys(n.headers),e[0]=n.headers,e[1]=u):u=e[1];const f=u.length>0;let h;e[2]===Symbol.for("react.memo_cache_sentinel")?(h=()=>s("pretty"),e[2]=h):h=e[2];const m=`px-3 py-1.5 text-xs font-medium rounded-md transition-all ${r==="pretty"?"bg-white dark:bg-white/10 text-neutral-800 dark:text-neutral-100 shadow-sm":"text-neutral-500 dark:text-neutral-400 hover:text-neutral-700 dark:hover:text-neutral-200"}`;let p;e[3]!==m?(p=w.jsx("button",{onClick:h,className:m,children:"Pretty"}),e[3]=m,e[4]=p):p=e[4];let y;e[5]===Symbol.for("react.memo_cache_sentinel")?(y=()=>s("raw"),e[5]=y):y=e[5];const g=`px-3 py-1.5 text-xs font-medium rounded-md transition-all ${r==="raw"?"bg-white dark:bg-white/10 text-neutral-800 dark:text-neutral-100 shadow-sm":"text-neutral-500 dark:text-neutral-400 hover:text-neutral-700 dark:hover:text-neutral-200"}`;let v;e[6]!==g?(v=w.jsx("button",{onClick:y,className:g,children:"Raw"}),e[6]=g,e[7]=v):v=e[7];let x;e[8]!==p||e[9]!==v?(x=w.jsxs("div",{className:"flex gap-1 p-1 bg-neutral-100 dark:bg-white/5 rounded-lg",children:[p,v]}),e[8]=p,e[9]=v,e[10]=x):x=e[10];let E;e[11]!==f||e[12]!==n.headers||e[13]!==a?(E=f&&w.jsxs("button",{onClick:()=>l(!a),className:`px-3 py-1.5 text-xs font-medium rounded-lg transition-all ${a?"bg-white dark:bg-white/10 text-neutral-800 dark:text-neutral-100 shadow-sm":"bg-neutral-100 dark:bg-white/5 text-neutral-500 dark:text-neutral-400 hover:text-neutral-700 dark:hover:text-neutral-200"}`,children:["Metadata (",Object.keys(n.headers).length,")"]}),e[11]=f,e[12]=n.headers,e[13]=a,e[14]=E):E=e[14];let S;e[15]!==x||e[16]!==E?(S=w.jsxs("div",{className:"flex gap-2 shrink-0 mb-3",children:[x,E]}),e[15]=x,e[16]=E,e[17]=S):S=e[17];let C;e[18]!==f||e[19]!==n.headers||e[20]!==a?(C=a&&f&&w.jsx("div",{className:"bg-neutral-100 dark:bg-white/5 rounded-xl border border-neutral-200 dark:border-white/10 overflow-hidden shrink-0 mb-3",children:w.jsxs("table",{className:"w-full",children:[w.jsx("thead",{children:w.jsxs("tr",{className:"border-b border-neutral-200 dark:border-white/10",children:[w.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-neutral-500 dark:text-neutral-400",children:"Key"}),w.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-neutral-500 dark:text-neutral-400",children:"Value"})]})}),w.jsx("tbody",{children:Object.entries(n.headers).map(cP)})]})}),e[18]=f,e[19]=n.headers,e[20]=a,e[21]=C):C=e[21];let T;e[22]!==n.body||e[23]!==r?(T=w.jsx("div",{className:"flex-1 min-h-0 overflow-auto",children:r==="pretty"?w.jsx(Ly,{content:n.body}):w.jsx(Sg,{content:n.body})}),e[22]=n.body,e[23]=r,e[24]=T):T=e[24];let L;return e[25]!==S||e[26]!==C||e[27]!==T?(L=w.jsxs("div",{className:"h-full flex flex-col overflow-hidden",children:[S,C,T]}),e[25]=S,e[26]=C,e[27]=T,e[28]=L):L=e[28],L}function cP(t){const[e,n]=t;return w.jsxs("tr",{className:"border-b border-neutral-100 dark:border-white/5 last:border-0",children:[w.jsx("td",{className:"px-4 py-2 font-mono text-xs text-neutral-600 dark:text-neutral-300",children:e}),w.jsx("td",{className:"px-4 py-2 font-mono text-xs text-neutral-500 dark:text-neutral-400",children:n})]},e)}function iw(t){const e=Ue.c(27),{feature:n,type:r,isSelected:s,onSelect:a}=t,[l,u]=Q.useState(!1);let f;e[0]!==n.schema?(f=n.schema&&Object.keys(n.schema).length>0,e[0]=n.schema,e[1]=f):f=e[1];const h=f,m=`border rounded-md ${s?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-neutral-200 dark:border-white/10"}`;let p;e[2]!==r?(p=r==="tool"?w.jsx(xf,{className:"w-4 h-4 text-amber-500 shrink-0"}):w.jsx(Ql,{className:"w-4 h-4 text-blue-500 shrink-0"}),e[2]=r,e[3]=p):p=e[3];let y;e[4]!==n.name?(y=w.jsx("div",{className:"font-medium text-sm truncate",children:n.name}),e[4]=n.name,e[5]=y):y=e[5];let g;e[6]!==n.description?(g=n.description&&w.jsx("div",{className:"text-xs text-neutral-500 dark:text-neutral-400 truncate",children:n.description}),e[6]=n.description,e[7]=g):g=e[7];let v;e[8]!==y||e[9]!==g?(v=w.jsxs("div",{className:"flex-1 min-w-0",children:[y,g]}),e[8]=y,e[9]=g,e[10]=v):v=e[10];let x;e[11]!==l||e[12]!==h?(x=h&&w.jsx("button",{onClick:T=>{T.stopPropagation(),u(!l)},className:"p-1 hover:bg-neutral-200 dark:hover:bg-white/10 rounded",children:l?w.jsx(Zl,{className:"w-4 h-4"}):w.jsx(Ak,{className:"w-4 h-4"})}),e[11]=l,e[12]=h,e[13]=x):x=e[13];let E;e[14]!==a||e[15]!==p||e[16]!==v||e[17]!==x?(E=w.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 cursor-pointer hover:bg-neutral-50 dark:hover:bg-white/5",onClick:a,children:[p,v,x]}),e[14]=a,e[15]=p,e[16]=v,e[17]=x,e[18]=E):E=e[18];let S;e[19]!==l||e[20]!==n.schema||e[21]!==h?(S=l&&h&&w.jsx("div",{className:"px-3 pb-2 border-t border-neutral-200 dark:border-white/10",children:w.jsx("pre",{className:"text-xs bg-neutral-100 dark:bg-black/20 p-2 rounded mt-2 overflow-auto max-h-48",children:JSON.stringify(n.schema,null,2)})}),e[19]=l,e[20]=n.schema,e[21]=h,e[22]=S):S=e[22];let C;return e[23]!==m||e[24]!==E||e[25]!==S?(C=w.jsxs("div",{className:m,children:[E,S]}),e[23]=m,e[24]=E,e[25]=S,e[26]=C):C=e[26],C}function uP({onSelected:t}){const{request:e,discoverMcpFeatures:n,setMcpTool:r,setMcpResource:s}=Fn(),[a,l]=Q.useState("tools"),[u,f]=Q.useState(null),[h,m]=Q.useState(!1),p=u?.tools||[],y=u?.resources||[],g=u?.error,v=async()=>{m(!0);try{const x=await n();x&&f(x)}finally{m(!1)}};return u?g?w.jsxs("div",{className:"p-4 text-center",children:[w.jsx("p",{className:"text-sm text-red-500 dark:text-red-400 mb-4",children:g}),w.jsxs("button",{onClick:v,disabled:!e.url||h,className:"inline-flex items-center gap-2 px-3 py-1.5 text-sm rounded-md border border-neutral-200 dark:border-white/10 text-neutral-700 dark:text-neutral-100 hover:bg-neutral-50 dark:hover:bg-white/10 disabled:opacity-50 disabled:cursor-not-allowed",children:[w.jsx(N1,{className:"w-4 h-4"}),"Retry"]})]}):w.jsxs("div",{className:"flex flex-col h-full",children:[w.jsxs("div",{className:"flex border-b border-neutral-200 dark:border-white/10 shrink-0",children:[w.jsxs("button",{onClick:()=>l("tools"),className:`flex items-center gap-1.5 px-4 py-2 text-sm font-medium border-b-2 transition-colors ${a==="tools"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-neutral-500 hover:text-neutral-700 dark:text-neutral-400 dark:hover:text-neutral-200"}`,children:[w.jsx(xf,{className:"w-4 h-4"}),"Tools (",p.length,")"]}),w.jsxs("button",{onClick:()=>l("resources"),className:`flex items-center gap-1.5 px-4 py-2 text-sm font-medium border-b-2 transition-colors ${a==="resources"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-neutral-500 hover:text-neutral-700 dark:text-neutral-400 dark:hover:text-neutral-200"}`,children:[w.jsx(Ql,{className:"w-4 h-4"}),"Resources (",y.length,")"]}),w.jsx("div",{className:"flex-1"}),w.jsx("button",{onClick:v,disabled:h,className:"p-2 text-neutral-500 hover:text-neutral-700 dark:text-neutral-400 dark:hover:text-neutral-200 disabled:opacity-40",title:"Refresh features",children:w.jsx(N1,{className:"w-4 h-4"})})]}),w.jsxs("div",{className:"flex-1 overflow-auto p-2 space-y-2",children:[a==="tools"&&w.jsx(w.Fragment,{children:p.length===0?w.jsx("p",{className:"text-sm text-neutral-500 dark:text-neutral-400 text-center py-4",children:"No tools available"}):p.map(x=>w.jsx(iw,{feature:x,type:"tool",isSelected:e.mcp?.tool?.name===x.name,onSelect:()=>{r({name:x.name,arguments:"{}"}),t?.()}},x.name))}),a==="resources"&&w.jsx(w.Fragment,{children:y.length===0?w.jsx("p",{className:"text-sm text-neutral-500 dark:text-neutral-400 text-center py-4",children:"No resources available"}):y.map(x=>w.jsx(iw,{feature:x,type:"resource",isSelected:e.mcp?.resource?.uri===(x.schema?.uri||x.name),onSelect:()=>{const E=x.schema?.uri||x.name;s({uri:E}),t?.()}},x.name))})]}),(e.mcp?.tool||e.mcp?.resource)&&w.jsx("div",{className:"border-t border-neutral-200 dark:border-white/10 p-2 shrink-0",children:w.jsxs("div",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:["Selected: ",e.mcp?.tool?`Tool: ${e.mcp.tool.name}`:`Resource: ${e.mcp?.resource?.uri}`]})})]}):w.jsxs("div",{className:"p-4 text-center",children:[w.jsx("p",{className:"text-sm text-neutral-500 dark:text-neutral-400 mb-4",children:"Enter an MCP server URL and discover its features"}),w.jsxs("button",{onClick:v,disabled:!e.url||h,className:"inline-flex items-center gap-2 px-3 py-1.5 text-sm rounded-md border border-neutral-200 dark:border-white/10 text-neutral-700 dark:text-neutral-100 hover:bg-neutral-50 dark:hover:bg-white/10 disabled:opacity-50 disabled:cursor-not-allowed",children:[w.jsx(p3,{className:"w-4 h-4"}),"Discover"]})]})}function fP(){const t=Ue.c(32),{request:e,setUrl:n}=Fn(),r=e?.url??"",s=e?.mcp?.tool?.name,a=e?.mcp?.resource?.uri,[l,u]=Q.useState(!1),f=Q.useRef(null);let h,m;t[0]!==l?(h=()=>{if(!l)return;const ie=q=>{f.current&&!f.current.contains(q.target)&&u(!1)};return document.addEventListener("mousedown",ie),()=>document.removeEventListener("mousedown",ie)},m=[l],t[0]=l,t[1]=h,t[2]=m):(h=t[1],m=t[2]),Q.useEffect(h,m);let p;t[3]===Symbol.for("react.memo_cache_sentinel")?(p=()=>{u(!0)},t[3]=p):p=t[3];const y=p,g=s||a||"Select feature",v=Math.max(12,r.length||14);let x;t[4]!==n?(x=ie=>n(ie.target.value),t[4]=n,t[5]=x):x=t[5];let E;t[6]!==x||t[7]!==r||t[8]!==v?(E=w.jsx("input",{type:"text",value:r,onChange:x,placeholder:"MCP server URL",size:v,className:"min-w-24 max-w-full px-2 py-1.5 bg-transparent text-neutral-800 dark:text-neutral-100 text-sm placeholder-neutral-400 dark:placeholder-neutral-600 focus:outline-none"}),t[6]=x,t[7]=r,t[8]=v,t[9]=E):E=t[9];let S;t[10]===Symbol.for("react.memo_cache_sentinel")?(S=w.jsx("span",{className:"text-neutral-300 dark:text-neutral-600 shrink-0",children:"/"}),t[10]=S):S=t[10];const C=!r;let T;t[11]!==a||t[12]!==s?(T=s?w.jsx(xf,{className:"w-4 h-4 text-amber-500 shrink-0"}):a?w.jsx(Ql,{className:"w-4 h-4 text-blue-500 shrink-0"}):w.jsx(xf,{className:"w-4 h-4 text-neutral-400 shrink-0"}),t[11]=a,t[12]=s,t[13]=T):T=t[13];const L=`text-sm whitespace-nowrap ${s||a?"text-neutral-800 dark:text-neutral-100":"text-neutral-400 dark:text-neutral-500"}`;let D;t[14]!==g||t[15]!==L?(D=w.jsx("span",{className:L,children:g}),t[14]=g,t[15]=L,t[16]=D):D=t[16];const N=`w-3.5 h-3.5 text-neutral-400 shrink-0 transition-transform ${l?"rotate-180":""}`;let B;t[17]!==N?(B=w.jsx(Zl,{className:N}),t[17]=N,t[18]=B):B=t[18];let K;t[19]!==B||t[20]!==C||t[21]!==T||t[22]!==D?(K=w.jsxs("button",{type:"button",onClick:y,disabled:C,className:"h-8 px-2 flex items-center gap-2 text-sm transition hover:bg-neutral-50 dark:hover:bg-white/5 disabled:opacity-50 disabled:cursor-not-allowed rounded",children:[T,D,B]}),t[19]=B,t[20]=C,t[21]=T,t[22]=D,t[23]=K):K=t[23];let G;t[24]!==l?(G=l&&w.jsx("div",{className:"absolute left-0 z-50 mt-2 w-[min(640px,calc(100vw-4rem))] max-h-[70vh] bg-white dark:bg-[#0f0f0f] border border-neutral-200 dark:border-white/10 rounded-lg shadow-xl overflow-hidden",children:w.jsx("div",{className:"h-105",children:w.jsx(uP,{onSelected:()=>u(!1)})})}),t[24]=l,t[25]=G):G=t[25];let j;t[26]!==K||t[27]!==G?(j=w.jsxs("div",{className:"relative shrink-0",ref:f,children:[K,G]}),t[26]=K,t[27]=G,t[28]=j):j=t[28];let J;return t[29]!==j||t[30]!==E?(J=w.jsxs("div",{className:"flex items-center flex-1 min-w-0",children:[E,S,j]}),t[29]=j,t[30]=E,t[31]=J):J=t[31],J}function hP(){const t=Ue.c(9),{request:e,setMcpTool:n,setVariables:r}=Fn();let s;t[0]!==e?.variables?(s=e?.variables??[],t[0]=e?.variables,t[1]=s):s=t[1];const a=s,l=e?.mcp?.tool?.arguments??"{}",u=e?.mcp?.tool,f=e?.mcp?.resource;let h;return t[2]!==f||t[3]!==u||t[4]!==n||t[5]!==r||t[6]!==l||t[7]!==a?(h=w.jsx("div",{className:"border border-neutral-200 dark:border-white/10 rounded-md bg-white/60 dark:bg-white/5 h-80",children:w.jsx("div",{className:"h-full p-3",children:u?w.jsx("div",{className:"h-full",children:w.jsx(ky,{value:l,onChange:m=>n({name:u.name,arguments:m}),variables:a,onVariablesChange:r,placeholder:`{
  "key": "value"
}`})}):f?w.jsx("div",{className:"h-full flex items-center justify-center text-sm text-neutral-500 dark:text-neutral-300 text-center px-4",children:"Resources are read-only; no arguments required."}):w.jsx("div",{className:"h-full flex items-center justify-center text-sm text-neutral-500 dark:text-neutral-400 text-center px-4",children:"Select a tool or resource from the URL bar."})})}),t[2]=f,t[3]=u,t[4]=n,t[5]=r,t[6]=l,t[7]=a,t[8]=h):h=t[8],h}function dP(t){const e=t.trim();if(e.startsWith("{")&&e.endsWith("}")||e.startsWith("[")&&e.endsWith("]"))try{return JSON.parse(e),"json"}catch{}return e.startsWith("<")&&e.endsWith(">")&&(/<\w+[^>]*>[\s\S]*<\/\w+>/.test(e)||/<\w+[^>]*\/>/.test(e))?"xml":"text"}function pP(t){try{const e=JSON.parse(t);return JSON.stringify(e,null,2)}catch{return t}}function mP(t){try{const n=/(>)(<)(\/*)/g,r=t.replace(n,`$1
$2$3`);let s=0;return r.split(`
`).map(a=>{let l=0;a.match(/.+<\/\w[^>]*>$/)?l=0:a.match(/^<\/\w/)&&s>0?s-=1:a.match(/^<\w[^>]*[^/]>.*$/)?l=1:l=0;const u="  ".repeat(s);return s+=l,u+a}).join(`
`)}catch{return t}}function Qs(t){const e=Ue.c(10),{type:n,language:r}=t;let s;e[0]!==n?(s=()=>{switch(n){case"text":return w.jsx(T3,{size:12});case"image":return w.jsx(WD,{size:12});case"audio":return w.jsx(s3,{size:12});case"resource":return w.jsx(t3,{size:12});default:return w.jsx(Ql,{size:12})}},e[0]=n,e[1]=s):s=e[1];const a=s;let l;e[2]!==r||e[3]!==n?(l=r&&r!=="text"?r.toUpperCase():n.charAt(0).toUpperCase()+n.slice(1),e[2]=r,e[3]=n,e[4]=l):l=e[4];const u=l;let f;e[5]!==a?(f=a(),e[5]=a,e[6]=f):f=e[6];let h;return e[7]!==u||e[8]!==f?(h=w.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 text-xs font-medium rounded-full bg-neutral-200 dark:bg-neutral-700 text-neutral-600 dark:text-neutral-300",children:[f,u]}),e[7]=u,e[8]=f,e[9]=h):h=e[9],h}function Eg(t){const e=Ue.c(13),{text:n,className:r}=t,s=r===void 0?"":r;let a;e[0]!==n?(a=dP(n),e[0]=n,e[1]=a):a=e[1];const l=a;let u;e[2]!==l||e[3]!==n?(u=l==="json"?pP(n):l==="xml"?mP(n):n,e[2]=l,e[3]=n,e[4]=u):u=e[4];const h=oh(u,l);let m;e[5]!==l?(m=w.jsx("div",{className:"flex items-center justify-between mb-2",children:w.jsx(Qs,{type:"text",language:l})}),e[5]=l,e[6]=m):m=e[6];let p;e[7]!==h?(p=w.jsx("div",{className:lh,dangerouslySetInnerHTML:{__html:h}}),e[7]=h,e[8]=p):p=e[8];let y;return e[9]!==s||e[10]!==m||e[11]!==p?(y=w.jsxs("div",{className:s,children:[m,p]}),e[9]=s,e[10]=m,e[11]=p,e[12]=y):y=e[12],y}function gP(t){const e=Ue.c(53),{content:n,isError:r}=t,s=r?"bg-red-50/50 dark:bg-red-900/10 rounded-lg p-4 border border-red-200 dark:border-red-800/50":"bg-neutral-50 dark:bg-black/20 rounded-lg p-4";if(n.type==="text"&&n.text){let u;e[0]!==n.text?(u=w.jsx(Eg,{text:n.text}),e[0]=n.text,e[1]=u):u=e[1];let f;return e[2]!==s||e[3]!==u?(f=w.jsx("div",{className:s,children:u}),e[2]=s,e[3]=u,e[4]=f):f=e[4],f}if(n.type==="image"&&n.data){const u=n.data.startsWith("data:")?n.data:`data:${n.mimeType||"image/png"};base64,${n.data}`;let f;e[5]===Symbol.for("react.memo_cache_sentinel")?(f=w.jsx(Qs,{type:"image"}),e[5]=f):f=e[5];let h;e[6]!==n.mimeType?(h=n.mimeType&&w.jsx("span",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:n.mimeType}),e[6]=n.mimeType,e[7]=h):h=e[7];let m;e[8]!==h?(m=w.jsxs("div",{className:"flex items-center justify-between mb-3",children:[f,h]}),e[8]=h,e[9]=m):m=e[9];let p;e[10]!==u?(p=w.jsx("img",{src:u,alt:"MCP Image Response",className:"max-w-full h-auto rounded"}),e[10]=u,e[11]=p):p=e[11];let y;return e[12]!==s||e[13]!==m||e[14]!==p?(y=w.jsxs("div",{className:s,children:[m,p]}),e[12]=s,e[13]=m,e[14]=p,e[15]=y):y=e[15],y}if(n.type==="audio"&&n.data){const u=n.data.startsWith("data:")?n.data:`data:${n.mimeType||"audio/wav"};base64,${n.data}`;let f;e[16]===Symbol.for("react.memo_cache_sentinel")?(f=w.jsx(Qs,{type:"audio"}),e[16]=f):f=e[16];let h;e[17]!==n.mimeType?(h=n.mimeType&&w.jsx("span",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:n.mimeType}),e[17]=n.mimeType,e[18]=h):h=e[18];let m;e[19]!==h?(m=w.jsxs("div",{className:"flex items-center justify-between mb-3",children:[f,h]}),e[19]=h,e[20]=m):m=e[20];const p=n.mimeType||"audio/wav";let y;e[21]!==u||e[22]!==p?(y=w.jsxs("audio",{controls:!0,className:"w-full",children:[w.jsx("source",{src:u,type:p}),"Your browser does not support the audio element."]}),e[21]=u,e[22]=p,e[23]=y):y=e[23];let g;return e[24]!==s||e[25]!==m||e[26]!==y?(g=w.jsxs("div",{className:s,children:[m,y]}),e[24]=s,e[25]=m,e[26]=y,e[27]=g):g=e[27],g}if(n.type==="resource"&&n.resource){const{uri:u,text:f,blob:h,mimeType:m}=n.resource;let p;e[28]===Symbol.for("react.memo_cache_sentinel")?(p=w.jsx(Qs,{type:"resource"}),e[28]=p):p=e[28];let y;e[29]!==u?(y=w.jsxs("div",{className:"flex items-center justify-between mb-3",children:[p,w.jsx("span",{className:"text-xs text-neutral-500 dark:text-neutral-400 font-mono truncate max-w-xs",title:u,children:u})]}),e[29]=u,e[30]=y):y=e[30];let g;e[31]!==f?(g=f&&w.jsx(Eg,{text:f}),e[31]=f,e[32]=g):g=e[32];let v;e[33]!==h||e[34]!==m||e[35]!==u?(v=h&&m?.startsWith("image/")&&w.jsx("img",{src:`data:${m};base64,${h}`,alt:u,className:"max-w-full h-auto rounded mt-2"}),e[33]=h,e[34]=m,e[35]=u,e[36]=v):v=e[36];let x;e[37]!==h||e[38]!==m?(x=h&&m?.startsWith("audio/")&&w.jsx("audio",{controls:!0,className:"w-full mt-2",children:w.jsx("source",{src:`data:${m};base64,${h}`,type:m})}),e[37]=h,e[38]=m,e[39]=x):x=e[39];let E;e[40]!==h||e[41]!==m?(E=h&&!m?.startsWith("image/")&&!m?.startsWith("audio/")&&w.jsxs("div",{className:"text-sm text-neutral-600 dark:text-neutral-300 mt-2",children:["Binary content (",Math.round(h.length*.75)," bytes)"]}),e[40]=h,e[41]=m,e[42]=E):E=e[42];let S;return e[43]!==s||e[44]!==y||e[45]!==g||e[46]!==v||e[47]!==x||e[48]!==E?(S=w.jsxs("div",{className:s,children:[y,g,v,x,E]}),e[43]=s,e[44]=y,e[45]=g,e[46]=v,e[47]=x,e[48]=E,e[49]=S):S=e[49],S}const a=`${s} text-sm text-neutral-500`;let l;return e[50]!==n.type||e[51]!==a?(l=w.jsxs("div",{className:a,children:["Unknown content type: ",n.type]}),e[50]=n.type,e[51]=a,e[52]=l):l=e[52],l}function yP(t){const e=Ue.c(41),{content:n}=t;if(n.text){let s;e[0]===Symbol.for("react.memo_cache_sentinel")?(s=w.jsx(Qs,{type:"resource"}),e[0]=s):s=e[0];let a;e[1]!==n.uri?(a=w.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s,w.jsx("span",{className:"text-xs text-neutral-500 dark:text-neutral-400 font-mono truncate max-w-xs",title:n.uri,children:n.uri})]}),e[1]=n.uri,e[2]=a):a=e[2];let l;e[3]!==n.text?(l=w.jsx(Eg,{text:n.text}),e[3]=n.text,e[4]=l):l=e[4];let u;return e[5]!==a||e[6]!==l?(u=w.jsxs("div",{className:"bg-neutral-50 dark:bg-black/20 rounded-lg p-4",children:[a,l]}),e[5]=a,e[6]=l,e[7]=u):u=e[7],u}if(n.blob){const s=n.mimeType||"application/octet-stream";if(s.startsWith("image/")){const p=`data:${s};base64,${n.blob}`;let y;e[8]===Symbol.for("react.memo_cache_sentinel")?(y=w.jsx(Qs,{type:"image"}),e[8]=y):y=e[8];let g;e[9]!==n.uri?(g=w.jsxs("div",{className:"flex items-center justify-between mb-3",children:[y,w.jsx("span",{className:"text-xs text-neutral-500 dark:text-neutral-400 font-mono truncate max-w-xs",title:n.uri,children:n.uri})]}),e[9]=n.uri,e[10]=g):g=e[10];let v;e[11]!==n.uri||e[12]!==p?(v=w.jsx("img",{src:p,alt:n.uri,className:"max-w-full h-auto rounded"}),e[11]=n.uri,e[12]=p,e[13]=v):v=e[13];let x;return e[14]!==g||e[15]!==v?(x=w.jsxs("div",{className:"bg-neutral-50 dark:bg-black/20 rounded-lg p-4",children:[g,v]}),e[14]=g,e[15]=v,e[16]=x):x=e[16],x}if(s.startsWith("audio/")){const p=`data:${s};base64,${n.blob}`;let y;e[17]===Symbol.for("react.memo_cache_sentinel")?(y=w.jsx(Qs,{type:"audio"}),e[17]=y):y=e[17];let g;e[18]!==n.uri?(g=w.jsxs("div",{className:"flex items-center justify-between mb-3",children:[y,w.jsx("span",{className:"text-xs text-neutral-500 dark:text-neutral-400 font-mono truncate max-w-xs",title:n.uri,children:n.uri})]}),e[18]=n.uri,e[19]=g):g=e[19];let v;e[20]!==s||e[21]!==p?(v=w.jsx("audio",{controls:!0,className:"w-full",children:w.jsx("source",{src:p,type:s})}),e[20]=s,e[21]=p,e[22]=v):v=e[22];let x;return e[23]!==g||e[24]!==v?(x=w.jsxs("div",{className:"bg-neutral-50 dark:bg-black/20 rounded-lg p-4",children:[g,v]}),e[23]=g,e[24]=v,e[25]=x):x=e[25],x}let a;e[26]===Symbol.for("react.memo_cache_sentinel")?(a=w.jsx(Qs,{type:"resource"}),e[26]=a):a=e[26];let l;e[27]!==s?(l=w.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a,w.jsx("span",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:s})]}),e[27]=s,e[28]=l):l=e[28];let u;e[29]!==n.uri?(u=w.jsx("div",{className:"text-xs text-neutral-500 dark:text-neutral-400 font-mono mb-2",children:n.uri}),e[29]=n.uri,e[30]=u):u=e[30];let f;e[31]!==n.blob.length?(f=Math.round(n.blob.length*.75),e[31]=n.blob.length,e[32]=f):f=e[32];let h;e[33]!==f?(h=w.jsxs("div",{className:"text-sm text-neutral-600 dark:text-neutral-300",children:["Binary content (",f," bytes)"]}),e[33]=f,e[34]=h):h=e[34];let m;return e[35]!==l||e[36]!==u||e[37]!==h?(m=w.jsxs("div",{className:"bg-neutral-50 dark:bg-black/20 rounded-lg p-4",children:[l,u,h]}),e[35]=l,e[36]=u,e[37]=h,e[38]=m):m=e[38],m}let r;return e[39]!==n.uri?(r=w.jsxs("div",{className:"bg-neutral-50 dark:bg-black/20 rounded-lg p-4 text-sm text-neutral-500",children:["Empty resource: ",n.uri]}),e[39]=n.uri,e[40]=r):r=e[40],r}function _P(t){const e=Ue.c(20),{toolResponse:n,resourceResponse:r}=t;if(n){const s=n.isError;let a;e[0]!==s?(a=s&&w.jsxs("div",{className:"flex items-center gap-2 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg px-4 py-3",children:[w.jsx(Rk,{className:"text-red-500 dark:text-red-400 shrink-0",size:18}),w.jsx("span",{className:"text-red-700 dark:text-red-400 text-sm font-medium",children:"Tool returned an error"})]}),e[0]=s,e[1]=a):a=e[1];let l;if(e[2]!==s||e[3]!==n.content){let h;e[5]!==s?(h=(m,p)=>w.jsx(gP,{content:m,isError:s},p),e[5]=s,e[6]=h):h=e[6],l=n.content.map(h),e[2]=s,e[3]=n.content,e[4]=l}else l=e[4];let u;e[7]!==n.content.length?(u=n.content.length===0&&w.jsx("div",{className:"text-sm text-neutral-500 dark:text-neutral-400 text-center py-4",children:"No content returned"}),e[7]=n.content.length,e[8]=u):u=e[8];let f;return e[9]!==a||e[10]!==l||e[11]!==u?(f=w.jsxs("div",{className:"space-y-3",children:[a,l,u]}),e[9]=a,e[10]=l,e[11]=u,e[12]=f):f=e[12],f}if(r){let s;e[13]!==r.contents?(s=r.contents.map(bP),e[13]=r.contents,e[14]=s):s=e[14];let a;e[15]!==r.contents.length?(a=r.contents.length===0&&w.jsx("div",{className:"text-sm text-neutral-500 dark:text-neutral-400 text-center py-4",children:"No content returned"}),e[15]=r.contents.length,e[16]=a):a=e[16];let l;return e[17]!==s||e[18]!==a?(l=w.jsxs("div",{className:"space-y-3",children:[s,a]}),e[17]=s,e[18]=a,e[19]=l):l=e[19],l}return null}function bP(t,e){return w.jsx(yP,{content:t},e)}function vP(t){const e=Ue.c(21),{toolResponse:n,resourceResponse:r}=t,[s,a]=Q.useState("pretty"),l=n||r;let u;e[0]!==l?(u=l?new Blob([JSON.stringify(l,null,2)],{type:"application/json"}):null,e[0]=l,e[1]=u):u=e[1];const f=u;let h;e[2]===Symbol.for("react.memo_cache_sentinel")?(h=()=>a("pretty"),e[2]=h):h=e[2];const m=`px-3 py-1.5 text-xs font-medium rounded-md transition-all ${s==="pretty"?"bg-white dark:bg-white/10 text-neutral-800 dark:text-neutral-100 shadow-sm":"text-neutral-500 dark:text-neutral-400 hover:text-neutral-700 dark:hover:text-neutral-200"}`;let p;e[3]!==m?(p=w.jsx("button",{onClick:h,className:m,children:"Pretty"}),e[3]=m,e[4]=p):p=e[4];let y;e[5]===Symbol.for("react.memo_cache_sentinel")?(y=()=>a("raw"),e[5]=y):y=e[5];const g=`px-3 py-1.5 text-xs font-medium rounded-md transition-all ${s==="raw"?"bg-white dark:bg-white/10 text-neutral-800 dark:text-neutral-100 shadow-sm":"text-neutral-500 dark:text-neutral-400 hover:text-neutral-700 dark:hover:text-neutral-200"}`;let v;e[6]!==g?(v=w.jsx("button",{onClick:y,className:g,children:"Raw"}),e[6]=g,e[7]=v):v=e[7];let x;e[8]!==p||e[9]!==v?(x=w.jsx("div",{className:"flex gap-2 shrink-0 mb-3",children:w.jsxs("div",{className:"flex gap-1 p-1 bg-neutral-100 dark:bg-white/5 rounded-lg",children:[p,v]})}),e[8]=p,e[9]=v,e[10]=x):x=e[10];let E;e[11]!==f||e[12]!==r||e[13]!==n||e[14]!==s?(E=s==="pretty"?w.jsx(_P,{toolResponse:n,resourceResponse:r}):f&&w.jsx(Ly,{content:f}),e[11]=f,e[12]=r,e[13]=n,e[14]=s,e[15]=E):E=e[15];let S;e[16]!==E?(S=w.jsx("div",{className:"flex-1 min-h-0 overflow-auto",children:E}),e[16]=E,e[17]=S):S=e[17];let C;return e[18]!==S||e[19]!==x?(C=w.jsxs("div",{className:"h-full flex flex-col overflow-hidden",children:[x,S]}),e[18]=S,e[19]=x,e[20]=C):C=e[20],C}function aw(t){return t<1e3?`${t}ms`:t<6e4?`${(t/1e3).toFixed(2)}s`:`${(t/6e4).toFixed(2)}m`}function xP(t){return t>=200&&t<300?"text-emerald-600 dark:text-emerald-400":t>=300&&t<400?"text-amber-600 dark:text-amber-400":t>=400&&t<500?"text-orange-600 dark:text-orange-400":t>=500?"text-red-600 dark:text-red-400":"text-neutral-600 dark:text-neutral-400"}function wP(t){const e=Ue.c(16),{statusCode:n,status:r}=t;let s;e[0]!==n?(s=xP(n),e[0]=n,e[1]=s):s=e[1];const a=s,l=n>=200&&n<300,u=n>=400,f=`flex items-center gap-1.5 px-2 py-1 rounded-md bg-neutral-100 dark:bg-white/5 ${a}`;let h;e[2]!==l?(h=l&&w.jsx(xy,{size:14}),e[2]=l,e[3]=h):h=e[3];let m;e[4]!==u?(m=u&&w.jsx(FD,{size:14}),e[4]=u,e[5]=m):m=e[5];let p;e[6]!==n?(p=w.jsx("span",{className:"text-xs font-medium",children:n}),e[6]=n,e[7]=p):p=e[7];let y;e[8]!==r?(y=w.jsx("span",{className:"text-xs opacity-75",children:r}),e[8]=r,e[9]=y):y=e[9];let g;return e[10]!==f||e[11]!==h||e[12]!==m||e[13]!==p||e[14]!==y?(g=w.jsxs("div",{className:f,children:[h,m,p,y]}),e[10]=f,e[11]=h,e[12]=m,e[13]=p,e[14]=y,e[15]=g):g=e[15],g}function SP(){const t=Ue.c(23),{request:e}=Fn(),n=e?.executing??!1,r=e?.protocol??"rest",s=e?.http?.response,a=e?.grpc?.response,l=e?.mcp?.response,u=e?.mcp?.response?.error;let f;t[0]!==a||t[1]!==s?(f=s??(a?{status:a.error||"OK",statusCode:a.error?0:200,headers:a.metadata??{},body:new Blob([a.body],{type:"application/json"}),duration:a.duration}:void 0),t[0]=a,t[1]=s,t[2]=f):f=t[2];const h=f,m=h?.error??u;if(n){let S;return t[3]===Symbol.for("react.memo_cache_sentinel")?(S=w.jsxs("div",{className:"flex flex-col items-center justify-center h-full min-h-50",children:[w.jsxs("div",{className:"relative mb-4",children:[w.jsx("div",{className:"w-12 h-12 rounded-full border-2 border-zinc-100 dark:border-zinc-800"}),w.jsx("div",{className:"absolute inset-0 w-12 h-12 rounded-full border-2 border-zinc-400 border-t-transparent animate-spin"})]}),w.jsx("span",{className:"text-xs font-medium text-zinc-400 uppercase tracking-widest animate-pulse",children:"Sending Request"})]}),t[3]=S):S=t[3],S}if(m){let S,C;t[4]===Symbol.for("react.memo_cache_sentinel")?(S=w.jsx(Rk,{className:"w-5 h-5 text-rose-500 dark:text-rose-400"}),C=w.jsx("h3",{className:"font-semibold text-rose-500 dark:text-rose-400",children:"Error"}),t[4]=S,t[5]=C):(S=t[4],C=t[5]);let T;return t[6]!==m?(T=w.jsx("div",{className:"bg-rose-500/10 border border-rose-500/20 rounded-xl p-4",children:w.jsxs("div",{className:"flex items-center gap-3",children:[S,w.jsxs("div",{children:[C,w.jsx("p",{className:"text-sm text-neutral-600 dark:text-neutral-300 mt-1",children:m})]})]})}),t[6]=m,t[7]=T):T=t[7],T}if(!h&&!l){let S;return t[8]===Symbol.for("react.memo_cache_sentinel")?(S=w.jsxs("div",{className:"h-full flex flex-col items-center justify-center",children:[w.jsx(g3,{className:"w-12 h-12 text-neutral-300 dark:text-neutral-600 mb-4"}),w.jsx("p",{className:"text-sm text-neutral-400 dark:text-neutral-500",children:"Hit Send to see what happens"})]}),t[8]=S):S=t[8],S}let p;t[9]!==l||t[10]!==r||t[11]!==h?(p=()=>{e:switch(r){case"mcp":{if(l?.result){const S="content"in l.result;return w.jsx(vP,{toolResponse:S?l.result:void 0,resourceResponse:S?void 0:l.result})}break e}case"grpc":{if(h)return w.jsx(lP,{response:h});break e}default:if(h)return w.jsx(rP,{response:h})}return null},t[9]=l,t[10]=r,t[11]=h,t[12]=p):p=t[12];const y=p;let g;t[13]!==l||t[14]!==h?(g=(h||l)&&w.jsxs("div",{className:"flex items-center gap-3 mb-3 shrink-0",children:[h&&w.jsxs(w.Fragment,{children:[w.jsx(wP,{statusCode:h.statusCode,status:h.status}),w.jsxs("div",{className:"flex items-center gap-1 text-xs text-neutral-500 dark:text-neutral-400",children:[w.jsx(_f,{size:12}),w.jsx("span",{children:aw(h.duration)})]}),h.body&&w.jsxs("div",{className:"text-xs text-neutral-400 dark:text-neutral-500",children:[(h.body.size/1024).toFixed(2)," KB"]})]}),l&&w.jsxs("div",{className:"flex items-center gap-1 text-xs text-neutral-500 dark:text-neutral-400",children:[w.jsx(_f,{size:12}),w.jsx("span",{children:aw(l.duration)})]})]}),t[13]=l,t[14]=h,t[15]=g):g=t[15];let v;t[16]!==y?(v=y(),t[16]=y,t[17]=v):v=t[17];let x;t[18]!==v?(x=w.jsx("div",{className:"flex-1 min-h-0 overflow-hidden",children:v}),t[18]=v,t[19]=x):x=t[19];let E;return t[20]!==g||t[21]!==x?(E=w.jsxs("div",{className:"h-full flex flex-col overflow-hidden",children:[g,x]}),t[20]=g,t[21]=x,t[22]=E):E=t[22],E}function kP(){const t=Ue.c(48),{request:e,newRequest:n,sidebarCollapsed:r,toggleSidebar:s,history:a}=Fn(),{setPortalTarget:l}=Ek();if(!e){let J;return t[0]===Symbol.for("react.memo_cache_sentinel")?(J=w.jsx("div",{className:"flex-1 flex items-center justify-center text-neutral-400 dark:text-neutral-500",children:"No active request"}),t[0]=J):J=t[0],J}const u=e.protocol??"rest";let f;t[1]!==a||t[2]!==r||t[3]!==s?(f=r&&a.length>0&&w.jsx("button",{type:"button",onClick:s,className:"p-1.5 hover:bg-neutral-100 dark:hover:bg-white/10 rounded-md transition-colors text-neutral-500 dark:text-neutral-400 hover:text-neutral-700 dark:hover:text-neutral-200",title:"Show sidebar",children:w.jsx(a3,{className:"w-4 h-4"})}),t[1]=a,t[2]=r,t[3]=s,t[4]=f):f=t[4];let h;t[5]===Symbol.for("react.memo_cache_sentinel")?(h=w.jsx(F3,{}),t[5]=h):h=t[5];let m;t[6]!==u?(m=u==="rest"&&w.jsx(Q3,{}),t[6]=u,t[7]=m):m=t[7];let p;t[8]!==u?(p=u==="grpc"&&w.jsx(iP,{}),t[8]=u,t[9]=p):p=t[9];let y;t[10]!==u?(y=u==="mcp"&&w.jsx(fP,{}),t[10]=u,t[11]=y):y=t[11];let g;t[12]!==m||t[13]!==p||t[14]!==y?(g=w.jsxs("div",{className:"flex-1 flex items-center",children:[m,p,y]}),t[12]=m,t[13]=p,t[14]=y,t[15]=g):g=t[15];let v;t[16]!==l?(v=w.jsx("div",{ref:l,className:"flex items-center gap-1"}),t[16]=l,t[17]=v):v=t[17];let x;t[18]===Symbol.for("react.memo_cache_sentinel")?(x=w.jsx(H3,{}),t[18]=x):x=t[18];let E;t[19]===Symbol.for("react.memo_cache_sentinel")?(E=w.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),t[19]=E):E=t[19];let S;t[20]!==n?(S=w.jsx("button",{onClick:n,className:"p-1.5 hover:bg-neutral-100 dark:hover:bg-white/10 rounded-md transition-colors text-neutral-500 dark:text-neutral-400 hover:text-neutral-700 dark:hover:text-neutral-200",title:"New request",children:E}),t[20]=n,t[21]=S):S=t[21];let C;t[22]!==f||t[23]!==g||t[24]!==v||t[25]!==S?(C=w.jsxs("div",{className:"pl-2 pr-3 py-2 border-b border-neutral-200 dark:border-white/5 flex items-center gap-2 shrink-0",children:[f,h,g,v,x,S]}),t[22]=f,t[23]=g,t[24]=v,t[25]=S,t[26]=C):C=t[26];let T;t[27]!==u?(T=u==="rest"&&w.jsx(vL,{}),t[27]=u,t[28]=T):T=t[28];let L;t[29]!==u?(L=u==="grpc"&&w.jsx(oP,{}),t[29]=u,t[30]=L):L=t[30];let D;t[31]!==u?(D=u==="mcp"&&w.jsx(hP,{}),t[31]=u,t[32]=D):D=t[32];let N;t[33]!==T||t[34]!==L||t[35]!==D?(N=w.jsxs("div",{className:"pl-2 pr-3 py-2 border-b border-neutral-200 dark:border-white/5 overflow-visible shrink-0",children:[T,L,D]}),t[33]=T,t[34]=L,t[35]=D,t[36]=N):N=t[36];let B;t[37]!==e.grpc?.response||t[38]!==e.http?.response||t[39]!==e.mcp?.response?(B=(e.http?.response||e.grpc?.response||e.mcp?.response)&&w.jsx("h2",{className:"text-[10px] font-medium text-neutral-500 dark:text-neutral-300 uppercase tracking-wider mb-2 shrink-0",children:"Response"}),t[37]=e.grpc?.response,t[38]=e.http?.response,t[39]=e.mcp?.response,t[40]=B):B=t[40];let K;t[41]===Symbol.for("react.memo_cache_sentinel")?(K=w.jsx("div",{className:"flex-1 min-h-0 overflow-hidden",children:w.jsx(SP,{})}),t[41]=K):K=t[41];let G;t[42]!==B?(G=w.jsxs("div",{className:"flex-1 pl-2 pr-3 py-2 flex flex-col min-h-0 overflow-hidden",children:[B,K]}),t[42]=B,t[43]=G):G=t[43];let j;return t[44]!==C||t[45]!==N||t[46]!==G?(j=w.jsxs("div",{className:"h-full flex flex-col overflow-hidden",children:[C,N,G]}),t[44]=C,t[45]=N,t[46]=G,t[47]=j):j=t[47],j}class EP{#e=!0;#t;#n;#r;#s;#o;#i;#a;#p=0;#m=5;#c=!1;#u=!1;#l=null;#f=()=>{this.debugLog("Connected to event bus"),this.#o=!0,this.#c=!1,this.debugLog("Emitting queued events",this.#s),this.#s.forEach(e=>this.emitEventToBus(e)),this.#s=[],this.stopConnectLoop(),this.#n().removeEventListener("tanstack-connect-success",this.#f)};#h=()=>{if(this.#p<this.#m){this.#p++,this.dispatchCustomEvent("tanstack-connect",{});return}this.#n().removeEventListener("tanstack-connect",this.#h),this.#u=!0,this.debugLog("Max retries reached, giving up on connection"),this.stopConnectLoop()};#d=()=>{this.#c||(this.#c=!0,this.#n().addEventListener("tanstack-connect-success",this.#f),this.#h())};constructor({pluginId:e,debug:n=!1,enabled:r=!0,reconnectEveryMs:s=300}){this.#t=e,this.#e=r,this.#n=this.getGlobalTarget,this.#r=n,this.debugLog(" Initializing event subscription for plugin",this.#t),this.#s=[],this.#o=!1,this.#u=!1,this.#i=null,this.#a=s}startConnectLoop(){this.#i!==null||this.#o||(this.debugLog(`Starting connect loop (every ${this.#a}ms)`),this.#i=setInterval(this.#h,this.#a))}stopConnectLoop(){this.#c=!1,this.#i!==null&&(clearInterval(this.#i),this.#i=null,this.#s=[],this.debugLog("Stopped connect loop"))}debugLog(...e){this.#r&&console.log(` [tanstack-devtools:${this.#t}-plugin]`,...e)}getGlobalTarget(){if(typeof globalThis<"u"&&globalThis.__TANSTACK_EVENT_TARGET__)return this.debugLog("Using global event target"),globalThis.__TANSTACK_EVENT_TARGET__;if(typeof window<"u"&&typeof window.addEventListener<"u")return this.debugLog("Using window as event target"),window;const e=typeof EventTarget<"u"?new EventTarget:void 0;return typeof e>"u"||typeof e.addEventListener>"u"?(this.debugLog("No event mechanism available, running in non-web environment"),{addEventListener:()=>{},removeEventListener:()=>{},dispatchEvent:()=>!1}):(this.debugLog("Using new EventTarget as fallback"),e)}getPluginId(){return this.#t}dispatchCustomEventShim(e,n){try{const r=new Event(e,{detail:n});this.#n().dispatchEvent(r)}catch{this.debugLog("Failed to dispatch shim event")}}dispatchCustomEvent(e,n){try{this.#n().dispatchEvent(new CustomEvent(e,{detail:n}))}catch{this.dispatchCustomEventShim(e,n)}}emitEventToBus(e){this.debugLog("Emitting event to client bus",e),this.dispatchCustomEvent("tanstack-dispatch-event",e)}createEventPayload(e,n){return{type:`${this.#t}:${e}`,payload:n,pluginId:this.#t}}emit(e,n){if(!this.#e){this.debugLog("Event bus client is disabled, not emitting event",e,n);return}if(this.#l&&(this.debugLog("Emitting event to internal event target",e,n),this.#l.dispatchEvent(new CustomEvent(`${this.#t}:${e}`,{detail:this.createEventPayload(e,n)}))),this.#u){this.debugLog("Previously failed to connect, not emitting to bus");return}if(!this.#o){this.debugLog("Bus not available, will be pushed as soon as connected"),this.#s.push(this.createEventPayload(e,n)),typeof CustomEvent<"u"&&!this.#c&&(this.#d(),this.startConnectLoop());return}return this.emitEventToBus(this.createEventPayload(e,n))}on(e,n,r){const s=r?.withEventTarget??!1,a=`${this.#t}:${e}`;if(s&&(this.#l||(this.#l=new EventTarget),this.#l.addEventListener(a,u=>{n(u.detail)})),!this.#e)return this.debugLog("Event bus client is disabled, not registering event",a),()=>{};const l=u=>{this.debugLog("Received event from bus",u.detail),n(u.detail)};return this.#n().addEventListener(a,l),this.debugLog("Registered event to bus",a),()=>{s&&this.#l?.removeEventListener(a,l),this.#n().removeEventListener(a,l)}}onAll(e){if(!this.#e)return this.debugLog("Event bus client is disabled, not registering event"),()=>{};const n=r=>{const s=r.detail;e(s)};return this.#n().addEventListener("tanstack-devtools-global",n),()=>this.#n().removeEventListener("tanstack-devtools-global",n)}onAllPluginEvents(e){if(!this.#e)return this.debugLog("Event bus client is disabled, not registering event"),()=>{};const n=r=>{const s=r.detail;this.#t&&s.pluginId!==this.#t||e(s)};return this.#n().addEventListener("tanstack-devtools-global",n),()=>this.#n().removeEventListener("tanstack-devtools-global",n)}}class CP extends EP{constructor(){super({pluginId:"tanstack-ai-devtools"})}}const Dt=new CP;async function TP(t){let e="";for await(const n of t)n.type==="content"&&n.delta&&(e+=n.delta);return e}function AP(t){return typeof t=="object"&&t!==null&&"~standard"in t&&typeof t["~standard"]=="object"&&t["~standard"].version===1&&typeof t["~standard"].jsonSchema=="object"&&typeof t["~standard"].jsonSchema.input=="function"}function Ni(t){return typeof t=="object"&&t!==null&&"~standard"in t&&typeof t["~standard"]=="object"&&t!==null&&t["~standard"]!==null&&"version"in t["~standard"]&&t["~standard"].version===1&&"validate"in t["~standard"]&&typeof t["~standard"].validate=="function"}function xl(t,e=[]){const n={...t};if(n.type==="object"&&n.properties){const r={...n.properties},s=Object.keys(r);for(const a of s){const l=r[a],u=!e.includes(a);l.type==="object"&&l.properties?r[a]=xl(l,l.required||[]):l.type==="array"&&l.items?r[a]={...l,items:xl(l.items,l.items.required||[])}:u&&(l.type&&!Array.isArray(l.type)?r[a]={...l,type:[l.type,"null"]}:Array.isArray(l.type)&&!l.type.includes("null")&&(r[a]={...l,type:[...l.type,"null"]}))}n.properties=r,n.required=s,n.additionalProperties=!1}return n.type==="array"&&n.items&&(n.items=xl(n.items,n.items.required||[])),n}function Cg(t,e={}){if(!t)return;const{forStructuredOutput:n=!1}=e;if(AP(t)){let s=t["~standard"].jsonSchema.input({target:"draft-07"});if(typeof s=="object"&&"$schema"in s){const{$schema:a,...l}=s;s=l}return typeof s=="object"&&("properties"in s&&!s.type&&(s.type="object"),s.type==="object"&&!("properties"in s)&&(s.properties={}),s.type==="object"&&!("required"in s)&&(s.required=[]),n&&(s=xl(s,s.required||[]))),s}return n&&typeof t=="object"?xl(t,t.required||[]):t}function Ua(t,e){if(!Ni(t))return e;const n=t["~standard"].validate(e);if(n instanceof Promise)throw new Error("Schema validation returned a Promise. Use validateWithStandardSchema for async validation.");if(!n.issues)return n.value;const r=n.issues.map(s=>s.message||"Validation failed").join(", ");throw new Error(`Validation failed: ${r}`)}class RP{constructor(e){this.toolCallsMap=new Map,this.tools=e}addToolCallChunk(e){const n=e.index,r=this.toolCallsMap.get(n);r?(e.toolCall.function.name&&!r.function.name&&(r.function.name=e.toolCall.function.name),e.toolCall.function.arguments&&(r.function.arguments+=e.toolCall.function.arguments)):e.toolCall.id&&e.toolCall.function.name&&this.toolCallsMap.set(n,{id:e.toolCall.id,type:"function",function:{name:e.toolCall.function.name,arguments:e.toolCall.function.arguments||""}})}hasToolCalls(){return this.getToolCalls().length>0}getToolCalls(){return Array.from(this.toolCallsMap.values()).filter(e=>e.id&&e.function.name&&e.function.name.trim().length>0)}async*executeTools(e){const n=this.getToolCalls(),r=[];for(const s of n){const a=this.tools.find(u=>u.name===s.function.name);let l;if(a?.execute)try{let u;try{u=JSON.parse(s.function.arguments)}catch{throw new Error(`Failed to parse tool arguments as JSON: ${s.function.arguments}`)}if(a.inputSchema&&Ni(a.inputSchema))try{u=Ua(a.inputSchema,u)}catch(h){const m=h instanceof Error?h.message:"Validation failed";throw new Error(`Input validation failed for tool ${a.name}: ${m}`)}let f=await a.execute(u);if(a.outputSchema&&Ni(a.outputSchema)&&f!==void 0&&f!==null)try{f=Ua(a.outputSchema,f)}catch(h){const m=h instanceof Error?h.message:"Validation failed";throw new Error(`Output validation failed for tool ${a.name}: ${m}`)}l=typeof f=="string"?f:JSON.stringify(f)}catch(u){l=`Error executing tool: ${u instanceof Error?u.message:"Unknown error"}`}else l=`Tool ${s.function.name} does not have an execute function`;yield{type:"tool_result",id:e.id,model:e.model,timestamp:Date.now(),toolCallId:s.id,content:l},r.push({role:"tool",content:l,toolCallId:s.id})}return r}clear(){this.toolCallsMap.clear()}}async function ow(t,e,n=new Map,r=new Map){const s=[],a=[],l=[],u=new Map;for(const f of e)u.set(f.name,f);for(const f of t){const h=u.get(f.function.name),m=f.function.name;if(!h){s.push({toolCallId:f.id,toolName:m,result:{error:`Unknown tool: ${m}`},state:"output-error"});continue}let p={};const y=f.function.arguments.trim()||"{}";try{p=JSON.parse(y)}catch{throw new Error(`Failed to parse tool arguments as JSON: ${y}`)}if(h.inputSchema&&Ni(h.inputSchema))try{p=Ua(h.inputSchema,p)}catch(v){const x=v instanceof Error?v.message:"Validation failed";s.push({toolCallId:f.id,toolName:m,result:{error:`Input validation failed for tool ${h.name}: ${x}`},state:"output-error"});continue}if(!h.execute){if(h.needsApproval){const v=`approval_${f.id}`;n.has(v)?n.get(v)?r.has(f.id)?s.push({toolCallId:f.id,toolName:m,result:r.get(f.id)}):l.push({toolCallId:f.id,toolName:m,input:p}):s.push({toolCallId:f.id,toolName:m,result:{error:"User declined tool execution"},state:"output-error"}):a.push({toolCallId:f.id,toolName:f.function.name,input:p,approvalId:v})}else r.has(f.id)?s.push({toolCallId:f.id,toolName:m,result:r.get(f.id)}):l.push({toolCallId:f.id,toolName:m,input:p});continue}if(h.needsApproval){const v=`approval_${f.id}`;if(n.has(v))if(n.get(v)){const E=Date.now();try{let S=await h.execute(p);const C=Date.now()-E;h.outputSchema&&Ni(h.outputSchema)&&S!==void 0&&S!==null&&(S=Ua(h.outputSchema,S)),s.push({toolCallId:f.id,toolName:m,result:typeof S=="string"?JSON.parse(S):S||null,duration:C})}catch(S){const C=Date.now()-E,T=S instanceof Error?S.message:"Unknown error";s.push({toolCallId:f.id,toolName:m,result:{error:T},state:"output-error",duration:C})}}else s.push({toolCallId:f.id,toolName:m,result:{error:"User declined tool execution"},state:"output-error"});else a.push({toolCallId:f.id,toolName:m,input:p,approvalId:v});continue}const g=Date.now();try{let v=await h.execute(p);const x=Date.now()-g;h.outputSchema&&Ni(h.outputSchema)&&v!==void 0&&v!==null&&(v=Ua(h.outputSchema,v)),s.push({toolCallId:f.id,toolName:m,result:typeof v=="string"?JSON.parse(v):v||null,duration:x})}catch(v){const x=Date.now()-g,E=v instanceof Error?v.message:"Unknown error";s.push({toolCallId:f.id,toolName:m,result:{error:E},state:"output-error",duration:x})}}return{results:s,needsApproval:a,needsClientExecution:l}}function TE(t){return({iterationCount:e})=>e<t}class AE{constructor(e){this.iterationCount=0,this.lastFinishReason=null,this.streamStartTime=0,this.totalChunkCount=0,this.currentMessageId=null,this.accumulatedContent="",this.doneChunk=null,this.shouldEmitStreamEnd=!0,this.earlyTermination=!1,this.toolPhase="continue",this.cyclePhase="processText",this.adapter=e.adapter,this.params=e.params,this.systemPrompts=e.params.systemPrompts||[],this.tools=e.params.tools||[],this.loopStrategy=e.params.agentLoopStrategy||TE(5),this.toolCallManager=new RP(this.tools),this.initialMessageCount=e.params.messages.length,this.messages=e.params.messages,this.requestId=this.createId("chat"),this.streamId=this.createId("stream"),this.effectiveRequest=e.params.abortController?{signal:e.params.abortController.signal}:void 0,this.effectiveSignal=e.params.abortController?.signal}getAccumulatedContent(){return this.accumulatedContent}getMessages(){return this.messages}async*run(){this.beforeRun();try{if((yield*this.checkForPendingToolCalls())==="wait")return;do{if(this.earlyTermination||this.isAborted())return;this.beginCycle(),this.cyclePhase==="processText"?yield*this.streamModelResponse():yield*this.processToolCalls(),this.endCycle()}while(this.shouldContinue())}finally{this.afterRun()}}beforeRun(){this.streamStartTime=Date.now();const{model:e,tools:n,temperature:r,topP:s,maxTokens:a,metadata:l,modelOptions:u,conversationId:f}=this.params,h={};r!==void 0&&(h.temperature=r),s!==void 0&&(h.topP=s),a!==void 0&&(h.maxTokens=a),l!==void 0&&(h.metadata=l),Dt.emit("text:started",{requestId:this.requestId,streamId:this.streamId,model:e,provider:this.adapter.name,messageCount:this.initialMessageCount,hasTools:!!n&&n.length>0,streaming:!0,timestamp:Date.now(),clientId:f,toolNames:n?.map(m=>m.name),options:Object.keys(h).length>0?h:void 0,modelOptions:u}),Dt.emit("stream:started",{streamId:this.streamId,model:e,provider:this.adapter.name,timestamp:Date.now()})}afterRun(){if(!this.shouldEmitStreamEnd)return;const e=Date.now();Dt.emit("text:completed",{requestId:this.requestId,streamId:this.streamId,model:this.params.model,content:this.accumulatedContent,messageId:this.currentMessageId||void 0,finishReason:this.lastFinishReason||void 0,usage:this.doneChunk?.usage,timestamp:e}),Dt.emit("stream:ended",{requestId:this.requestId,streamId:this.streamId,totalChunks:this.totalChunkCount,duration:e-this.streamStartTime,timestamp:e})}beginCycle(){this.cyclePhase==="processText"&&this.beginIteration()}endCycle(){if(this.cyclePhase==="processText"){this.cyclePhase="executeToolCalls";return}this.cyclePhase="processText",this.iterationCount++}beginIteration(){this.currentMessageId=this.createId("msg"),this.accumulatedContent="",this.doneChunk=null}async*streamModelResponse(){const{temperature:e,topP:n,maxTokens:r,metadata:s,modelOptions:a}=this.params,u=this.params.tools?.map(f=>({...f,inputSchema:f.inputSchema?Cg(f.inputSchema):void 0,outputSchema:f.outputSchema?Cg(f.outputSchema):void 0}));for await(const f of this.adapter.chatStream({model:this.params.model,messages:this.messages,tools:u,temperature:e,topP:n,maxTokens:r,metadata:s,request:this.effectiveRequest,modelOptions:a,systemPrompts:this.systemPrompts}))if(this.isAborted()||(this.totalChunkCount++,yield f,this.handleStreamChunk(f),this.earlyTermination))break}handleStreamChunk(e){switch(e.type){case"content":this.handleContentChunk(e);break;case"tool_call":this.handleToolCallChunk(e);break;case"tool_result":this.handleToolResultChunk(e);break;case"done":this.handleDoneChunk(e);break;case"error":this.handleErrorChunk(e);break;case"thinking":this.handleThinkingChunk(e);break}}handleContentChunk(e){this.accumulatedContent=e.content,Dt.emit("stream:chunk:content",{streamId:this.streamId,messageId:this.currentMessageId||void 0,content:e.content,delta:e.delta,timestamp:Date.now()})}handleToolCallChunk(e){this.toolCallManager.addToolCallChunk(e),Dt.emit("stream:chunk:tool-call",{streamId:this.streamId,messageId:this.currentMessageId||void 0,toolCallId:e.toolCall.id,toolName:e.toolCall.function.name,index:e.index,arguments:e.toolCall.function.arguments,timestamp:Date.now()})}handleToolResultChunk(e){Dt.emit("stream:chunk:tool-result",{streamId:this.streamId,messageId:this.currentMessageId||void 0,toolCallId:e.toolCallId,result:e.content,timestamp:Date.now()})}handleDoneChunk(e){if(this.doneChunk?.finishReason==="tool_calls"&&e.finishReason==="stop"){this.lastFinishReason=e.finishReason,Dt.emit("stream:chunk:done",{streamId:this.streamId,messageId:this.currentMessageId||void 0,finishReason:e.finishReason,usage:e.usage,timestamp:Date.now()}),e.usage&&Dt.emit("usage:tokens",{requestId:this.requestId,streamId:this.streamId,messageId:this.currentMessageId||void 0,model:this.params.model,usage:e.usage,timestamp:Date.now()});return}this.doneChunk=e,this.lastFinishReason=e.finishReason,Dt.emit("stream:chunk:done",{streamId:this.streamId,messageId:this.currentMessageId||void 0,finishReason:e.finishReason,usage:e.usage,timestamp:Date.now()}),e.usage&&Dt.emit("usage:tokens",{requestId:this.requestId,streamId:this.streamId,messageId:this.currentMessageId||void 0,model:this.params.model,usage:e.usage,timestamp:Date.now()})}handleErrorChunk(e){Dt.emit("stream:chunk:error",{streamId:this.streamId,messageId:this.currentMessageId||void 0,error:e.error.message,timestamp:Date.now()}),this.earlyTermination=!0,this.shouldEmitStreamEnd=!1}handleThinkingChunk(e){Dt.emit("stream:chunk:thinking",{streamId:this.streamId,messageId:this.currentMessageId||void 0,content:e.content,delta:e.delta,timestamp:Date.now()})}async*checkForPendingToolCalls(){const e=this.getPendingToolCallsFromMessages();if(e.length===0)return"continue";const n=this.createSyntheticDoneChunk();Dt.emit("text:iteration",{requestId:this.requestId,streamId:this.streamId,iterationNumber:this.iterationCount+1,messageCount:this.messages.length,toolCallCount:e.length,timestamp:Date.now()});const{approvals:r,clientToolResults:s}=this.collectClientState(),a=await ow(e,this.tools,r,s);if(a.needsApproval.length>0||a.needsClientExecution.length>0){for(const u of this.emitApprovalRequests(a.needsApproval,n))yield u;for(const u of this.emitClientToolInputs(a.needsClientExecution,n))yield u;return this.shouldEmitStreamEnd=!1,"wait"}const l=this.emitToolResults(a.results,n);for(const u of l)yield u;return"continue"}async*processToolCalls(){if(!this.shouldExecuteToolPhase()){this.setToolPhase("stop");return}const e=this.toolCallManager.getToolCalls(),n=this.doneChunk;if(!n||e.length===0){this.setToolPhase("stop");return}Dt.emit("text:iteration",{requestId:this.requestId,streamId:this.streamId,iterationNumber:this.iterationCount+1,messageCount:this.messages.length,toolCallCount:e.length,timestamp:Date.now()}),this.addAssistantToolCallMessage(e);const{approvals:r,clientToolResults:s}=this.collectClientState(),a=await ow(e,this.tools,r,s);if(a.needsApproval.length>0||a.needsClientExecution.length>0){for(const u of this.emitApprovalRequests(a.needsApproval,n))yield u;for(const u of this.emitClientToolInputs(a.needsClientExecution,n))yield u;this.setToolPhase("wait");return}const l=this.emitToolResults(a.results,n);for(const u of l)yield u;this.toolCallManager.clear(),this.setToolPhase("continue")}shouldExecuteToolPhase(){return this.doneChunk?.finishReason==="tool_calls"&&this.tools.length>0&&this.toolCallManager.hasToolCalls()}addAssistantToolCallMessage(e){this.messages=[...this.messages,{role:"assistant",content:this.accumulatedContent||null,toolCalls:e}]}collectClientState(){const e=new Map,n=new Map;for(const r of this.messages)if(r.role==="assistant"&&r.parts){const s=r.parts;for(const a of s)a.type==="tool-call"&&a.state==="approval-responded"&&a.approval&&e.set(a.approval.id,a.approval.approved),a.type==="tool-call"&&a.output!==void 0&&!a.approval&&n.set(a.id,a.output)}return{approvals:e,clientToolResults:n}}emitApprovalRequests(e,n){const r=[];for(const s of e)Dt.emit("stream:approval-requested",{streamId:this.streamId,messageId:this.currentMessageId||void 0,toolCallId:s.toolCallId,toolName:s.toolName,input:s.input,approvalId:s.approvalId,timestamp:Date.now()}),r.push({type:"approval-requested",id:n.id,model:n.model,timestamp:Date.now(),toolCallId:s.toolCallId,toolName:s.toolName,input:s.input,approval:{id:s.approvalId,needsApproval:!0}});return r}emitClientToolInputs(e,n){const r=[];for(const s of e)Dt.emit("stream:tool-input-available",{streamId:this.streamId,messageId:this.currentMessageId||void 0,toolCallId:s.toolCallId,toolName:s.toolName,input:s.input,timestamp:Date.now()}),r.push({type:"tool-input-available",id:n.id,model:n.model,timestamp:Date.now(),toolCallId:s.toolCallId,toolName:s.toolName,input:s.input});return r}emitToolResults(e,n){const r=[];for(const s of e){Dt.emit("tool:call-completed",{requestId:this.requestId,streamId:this.streamId,messageId:this.currentMessageId||void 0,toolCallId:s.toolCallId,toolName:s.toolName,result:s.result,duration:s.duration??0,timestamp:Date.now()});const a=JSON.stringify(s.result),l={type:"tool_result",id:n.id,model:n.model,timestamp:Date.now(),toolCallId:s.toolCallId,content:a};r.push(l),this.messages=[...this.messages,{role:"tool",content:a,toolCallId:s.toolCallId}]}return r}getPendingToolCallsFromMessages(){const e=new Set(this.messages.filter(r=>r.role==="tool"&&r.toolCallId).map(r=>r.toolCallId)),n=[];for(const r of this.messages)if(r.role==="assistant"&&r.toolCalls)for(const s of r.toolCalls)e.has(s.id)||n.push(s);return n}createSyntheticDoneChunk(){return{type:"done",id:this.createId("pending"),model:this.params.model,timestamp:Date.now(),finishReason:"tool_calls"}}shouldContinue(){return this.cyclePhase==="executeToolCalls"?!0:this.loopStrategy({iterationCount:this.iterationCount,messages:this.messages,finishReason:this.lastFinishReason})&&this.toolPhase==="continue"}isAborted(){return!!this.effectiveSignal?.aborted}setToolPhase(e){this.toolPhase=e,e==="wait"&&(this.shouldEmitStreamEnd=!1)}createId(e){return`${e}-${Date.now()}-${Math.random().toString(36).slice(2,9)}`}}function OP(t){const{outputSchema:e,stream:n}=t;return e?IP(t):n===!1?NP(t):RE(t)}async function*RE(t){const{adapter:e,...n}=t,r=e.model,s=new AE({adapter:e,params:{...n,model:r}});for await(const a of s.run())yield a}function NP(t){const e=RE(t);return TP(e)}async function IP(t){const{adapter:e,outputSchema:n,...r}=t,s=e.model;if(!n)throw new Error("outputSchema is required for structured output");const a=new AE({adapter:e,params:{...r,model:s}});for await(const y of a.run());const l=a.getMessages(),{tools:u,agentLoopStrategy:f,...h}=r,m=Cg(n);if(!m)throw new Error("Failed to convert output schema to JSON Schema");const p=await e.structuredOutput({chatOptions:{...h,model:s,messages:l},outputSchema:m});return Ni(n)?Ua(n,p.data):p.data}function Or(t){return{__toolSide:"definition",...t,server(n){return{__toolSide:"server",...t,execute:n}},client(n){return{__toolSide:"client",...t,execute:n}}}}function lw(t){return t===null?"":typeof t=="string"?t:t.filter(e=>e.type==="text").map(e=>e.content).join("")}function MP(t){const e=[];for(const n of t)"parts"in n?e.push(...OE(n)):e.push(n);return e}function OE(t){const e=[];if(t.role==="system")return e;const n=[],r=[],s=[];for(const u of t.parts)u.type==="text"?n.push(u):u.type==="tool-call"?r.push(u):u.type==="tool-result"&&s.push(u);const a=n.map(u=>u.content).join("")||null,l=r.length>0?r.filter(u=>u.state==="input-complete"||u.state==="approval-responded"||u.output!==void 0).map(u=>({id:u.id,type:"function",function:{name:u.name,arguments:u.arguments}})):void 0;t.role!=="assistant"||a||!l?e.push({role:t.role,content:a,...l&&l.length>0&&{toolCalls:l}}):l.length>0&&e.push({role:"assistant",content:a,toolCalls:l});for(const u of s)(u.state==="complete"||u.state==="error")&&e.push({role:"tool",content:u.content,toolCallId:u.toolCallId});return e}function DP(t,e){const n=[],r=lw(t.content);if(r&&n.push({type:"text",content:r}),t.toolCalls&&t.toolCalls.length>0)for(const s of t.toolCalls)n.push({type:"tool-call",id:s.id,name:s.function.name,arguments:s.function.arguments,state:"input-complete"});return t.role==="tool"&&t.toolCallId&&n.push({type:"tool-result",toolCallId:t.toolCallId,content:lw(t.content),state:"complete"}),{id:e||Mf(),role:t.role==="tool"?"assistant":t.role,parts:n}}function LP(t,e){return"parts"in t?{...t,id:t.id||e(),createdAt:t.createdAt||new Date}:{...DP(t,e()),createdAt:new Date}}function Mf(){return`msg-${Date.now()}-${Math.random().toString(36).substring(7)}`}var wi={},pm={},cw;function uw(){return cw||(cw=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Allow=t.ALL=t.COLLECTION=t.ATOM=t.SPECIAL=t.INF=t._INFINITY=t.INFINITY=t.NAN=t.BOOL=t.NULL=t.OBJ=t.ARR=t.NUM=t.STR=void 0,t.STR=1,t.NUM=2,t.ARR=4,t.OBJ=8,t.NULL=16,t.BOOL=32,t.NAN=64,t.INFINITY=128,t._INFINITY=256,t.INF=t.INFINITY|t._INFINITY,t.SPECIAL=t.NULL|t.BOOL|t.INF|t.NAN,t.ATOM=t.STR|t.NUM|t.SPECIAL,t.COLLECTION=t.ARR|t.OBJ,t.ALL=t.ATOM|t.COLLECTION,t.Allow={STR:t.STR,NUM:t.NUM,ARR:t.ARR,OBJ:t.OBJ,NULL:t.NULL,BOOL:t.BOOL,NAN:t.NAN,INFINITY:t.INFINITY,_INFINITY:t._INFINITY,INF:t.INF,SPECIAL:t.SPECIAL,ATOM:t.ATOM,COLLECTION:t.COLLECTION,ALL:t.ALL},t.default=t.Allow})(pm)),pm}var fw;function jP(){return fw||(fw=1,(function(t){var e=wi&&wi.__createBinding||(Object.create?(function(h,m,p,y){y===void 0&&(y=p);var g=Object.getOwnPropertyDescriptor(m,p);(!g||("get"in g?!m.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return m[p]}}),Object.defineProperty(h,y,g)}):(function(h,m,p,y){y===void 0&&(y=p),h[y]=m[p]})),n=wi&&wi.__exportStar||function(h,m){for(var p in h)p!=="default"&&!Object.prototype.hasOwnProperty.call(m,p)&&e(m,h,p)};Object.defineProperty(t,"__esModule",{value:!0}),t.Allow=t.MalformedJSON=t.PartialJSON=t.parseJSON=t.parse=void 0;const r=uw();Object.defineProperty(t,"Allow",{enumerable:!0,get:function(){return r.Allow}}),n(uw(),t);class s extends Error{}t.PartialJSON=s;class a extends Error{}t.MalformedJSON=a;function l(h,m=r.Allow.ALL){if(typeof h!="string")throw new TypeError(`expecting str, got ${typeof h}`);if(!h.trim())throw new Error(`${h} is empty`);return u(h.trim(),m)}t.parseJSON=l;const u=(h,m)=>{const p=h.length;let y=0;const g=D=>{throw new s(`${D} at position ${y}`)},v=D=>{throw new a(`${D} at position ${y}`)},x=()=>(L(),y>=p&&g("Unexpected end of input"),h[y]==='"'?E():h[y]==="{"?S():h[y]==="["?C():h.substring(y,y+4)==="null"||r.Allow.NULL&m&&p-y<4&&"null".startsWith(h.substring(y))?(y+=4,null):h.substring(y,y+4)==="true"||r.Allow.BOOL&m&&p-y<4&&"true".startsWith(h.substring(y))?(y+=4,!0):h.substring(y,y+5)==="false"||r.Allow.BOOL&m&&p-y<5&&"false".startsWith(h.substring(y))?(y+=5,!1):h.substring(y,y+8)==="Infinity"||r.Allow.INFINITY&m&&p-y<8&&"Infinity".startsWith(h.substring(y))?(y+=8,1/0):h.substring(y,y+9)==="-Infinity"||r.Allow._INFINITY&m&&1<p-y&&p-y<9&&"-Infinity".startsWith(h.substring(y))?(y+=9,-1/0):h.substring(y,y+3)==="NaN"||r.Allow.NAN&m&&p-y<3&&"NaN".startsWith(h.substring(y))?(y+=3,NaN):T()),E=()=>{const D=y;let N=!1;for(y++;y<p&&(h[y]!=='"'||N&&h[y-1]==="\\");)N=h[y]==="\\"?!N:!1,y++;if(h.charAt(y)=='"')try{return JSON.parse(h.substring(D,++y-Number(N)))}catch(B){v(String(B))}else if(r.Allow.STR&m)try{return JSON.parse(h.substring(D,y-Number(N))+'"')}catch{return JSON.parse(h.substring(D,h.lastIndexOf("\\"))+'"')}g("Unterminated string literal")},S=()=>{y++,L();const D={};try{for(;h[y]!=="}";){if(L(),y>=p&&r.Allow.OBJ&m)return D;const N=E();L(),y++;try{const B=x();D[N]=B}catch(B){if(r.Allow.OBJ&m)return D;throw B}L(),h[y]===","&&y++}}catch{if(r.Allow.OBJ&m)return D;g("Expected '}' at end of object")}return y++,D},C=()=>{y++;const D=[];try{for(;h[y]!=="]";)D.push(x()),L(),h[y]===","&&y++}catch{if(r.Allow.ARR&m)return D;g("Expected ']' at end of array")}return y++,D},T=()=>{if(y===0){h==="-"&&v("Not sure what '-' is");try{return JSON.parse(h)}catch(N){if(r.Allow.NUM&m)try{return JSON.parse(h.substring(0,h.lastIndexOf("e")))}catch{}v(String(N))}}const D=y;for(h[y]==="-"&&y++;h[y]&&",]}".indexOf(h[y])===-1;)y++;y==p&&!(r.Allow.NUM&m)&&g("Unterminated number literal");try{return JSON.parse(h.substring(D,y))}catch{h.substring(D,y)==="-"&&g("Not sure what '-' is");try{return JSON.parse(h.substring(D,h.lastIndexOf("e")))}catch(B){v(String(B))}}},L=()=>{for(;y<p&&` 
\r	`.includes(h[y]);)y++};return x()},f=l;t.parse=f})(wi)),wi}var zP=jP();class PP{parse(e){if(!(!e||e.trim()===""))try{return zP.parse(e)}catch{return}}}const BP=new PP;function $P(t,e,n){return t.map(r=>{if(r.id!==e)return r;const s=[...r.parts],a=s.length>0?s[s.length-1]:null;return a&&a.type==="text"?s[s.length-1]={type:"text",content:n}:s.push({type:"text",content:n}),{...r,parts:s}})}function mm(t,e,n){return t.map(r=>{if(r.id!==e)return r;const s=[...r.parts],a=s.findIndex(u=>u.type==="tool-call"&&u.id===n.id),l={type:"tool-call",id:n.id,name:n.name,arguments:n.arguments,state:n.state};return a>=0?s[a]=l:s.push(l),{...r,parts:s}})}function hw(t,e,n,r,s,a){return t.map(l=>{if(l.id!==e)return l;const u=[...l.parts],f=u.findIndex(m=>m.type==="tool-result"&&m.toolCallId===n),h={type:"tool-result",toolCallId:n,content:r,state:s,...a&&{error:a}};return f>=0?u[f]=h:u.push(h),{...l,parts:u}})}function UP(t,e,n,r){return t.map(s=>{if(s.id!==e)return s;const a=[...s.parts],l=a.find(u=>u.type==="tool-call"&&u.id===n);return l&&(l.state="approval-requested",l.approval={id:r,needsApproval:!0}),{...s,parts:a}})}function qP(t,e,n,r,s){return t.map(a=>{const l=[...a.parts],u=l.find(f=>f.type==="tool-call"&&f.id===e);return u&&(u.output=s?{error:s}:n,r?u.state=r:u.state="input-complete"),{...a,parts:l}})}function FP(t,e,n){return t.map(r=>{const s=[...r.parts],a=s.find(l=>l.type==="tool-call"&&l.approval?.id===e);return a&&a.approval&&(a.approval.approved=n,a.state="approval-responded"),{...r,parts:s}})}function VP(t,e,n){return t.map(r=>{if(r.id!==e)return r;const s=[...r.parts],a=s.findIndex(u=>u.type==="thinking"),l={type:"thinking",content:n};return a>=0?s[a]=l:s.push(l),{...r,parts:s}})}class HP{shouldEmit(e,n){return!0}}class jy{constructor(e={}){this.messages=[],this.currentAssistantMessageId=null,this.totalTextContent="",this.currentSegmentText="",this.lastEmittedText="",this.thinkingContent="",this.toolCalls=new Map,this.toolCallOrder=[],this.finishReason=null,this.isDone=!1,this.hasToolCallsSinceTextStart=!1,this.recording=null,this.recordingStartTime=0,this.chunkStrategy=e.chunkStrategy||new HP,this.events=e.events||{},this.handlers=e.handlers||{},this.jsonParser=e.jsonParser||BP,this.recordingEnabled=e.recording??!1,e.initialMessages&&(this.messages=[...e.initialMessages])}setMessages(e){this.messages=[...e],this.emitMessagesChange()}addUserMessage(e){const n={id:Mf(),role:"user",parts:[{type:"text",content:e}],createdAt:new Date};return this.messages=[...this.messages,n],this.emitMessagesChange(),n}startAssistantMessage(){this.resetStreamState();const e={id:Mf(),role:"assistant",parts:[],createdAt:new Date};return this.currentAssistantMessageId=e.id,this.messages=[...this.messages,e],this.events.onStreamStart?.(),this.emitMessagesChange(),e.id}addToolResult(e,n,r){const s=this.messages.find(f=>f.parts.some(h=>h.type==="tool-call"&&h.id===e));if(!s){console.warn(`[StreamProcessor] Could not find message with tool call ${e}`);return}let a=qP(this.messages,e,n,r?"input-complete":void 0,r);const l=typeof n=="string"?n:JSON.stringify(n),u=r?"error":"complete";a=hw(a,s.id,e,l,u,r),this.messages=a,this.emitMessagesChange()}addToolApprovalResponse(e,n){this.messages=FP(this.messages,e,n),this.emitMessagesChange()}toModelMessages(){const e=[];for(const n of this.messages)e.push(...OE(n));return e}getMessages(){return this.messages}areAllToolsComplete(){const e=this.messages.findLast(r=>r.role==="assistant");if(!e)return!0;const n=e.parts.filter(r=>r.type==="tool-call");return n.length===0?!0:n.every(r=>r.state==="approval-responded"||r.output!==void 0&&!r.approval)}removeMessagesAfter(e){this.messages=this.messages.slice(0,e+1),this.emitMessagesChange()}clearMessages(){this.messages=[],this.currentAssistantMessageId=null,this.emitMessagesChange()}async process(e){this.resetStreamState(),this.recordingEnabled&&this.startRecording();for await(const n of e)this.processChunk(n);return this.finalizeStream(),this.recording&&(this.recording.result=this.getResult()),this.getResult()}processChunk(e){switch(this.recording&&this.recording.chunks.push({chunk:e,timestamp:Date.now(),index:this.recording.chunks.length}),e.type){case"content":this.handleContentChunk(e);break;case"tool_call":this.handleToolCallChunk(e);break;case"tool_result":this.handleToolResultChunk(e);break;case"done":this.handleDoneChunk(e);break;case"error":this.handleErrorChunk(e);break;case"thinking":this.handleThinkingChunk(e);break;case"approval-requested":this.handleApprovalRequestedChunk(e);break;case"tool-input-available":this.handleToolInputAvailableChunk(e);break}}handleContentChunk(e){this.completeAllToolCalls();const n=this.currentSegmentText;this.hasToolCallsSinceTextStart&&n.length>0&&this.isNewTextSegment(e,n)&&(n!==this.lastEmittedText&&this.emitTextUpdate(),this.currentSegmentText="",this.lastEmittedText="",this.hasToolCallsSinceTextStart=!1);const s=this.currentSegmentText;let a=s;e.delta!==""?a=s+e.delta:e.content!==""&&(e.content.startsWith(s)?a=e.content:s.startsWith(e.content)?a=s:a=s+e.content);const l=a.slice(s.length);this.currentSegmentText=a,this.totalTextContent+=l;const u=e.delta??e.content??"";this.chunkStrategy.shouldEmit(u,this.currentSegmentText)&&this.currentSegmentText!==this.lastEmittedText&&this.emitTextUpdate()}handleToolCallChunk(e){this.hasToolCallsSinceTextStart=!0;const n=e.toolCall.id,r=this.toolCalls.get(n);if(r){const s=r.state==="awaiting-input";r.arguments+=e.toolCall.function.arguments||"",s&&e.toolCall.function.arguments&&(r.state="input-streaming"),r.parsedArguments=this.jsonParser.parse(r.arguments);const a=this.toolCallOrder.indexOf(n);this.handlers.onToolCallStateChange?.(a,r.id,r.name,r.state,r.arguments,r.parsedArguments),e.toolCall.function.arguments&&this.handlers.onToolCallDelta?.(a,e.toolCall.function.arguments),this.currentAssistantMessageId&&(this.messages=mm(this.messages,this.currentAssistantMessageId,{id:r.id,name:r.name,arguments:r.arguments,state:r.state}),this.emitMessagesChange(),this.events.onToolCallStateChange?.(this.currentAssistantMessageId,r.id,r.state,r.arguments))}else{const s=e.toolCall.function.arguments?"input-streaming":"awaiting-input",a={id:e.toolCall.id,name:e.toolCall.function.name,arguments:e.toolCall.function.arguments||"",state:s,parsedArguments:void 0,index:e.index};e.toolCall.function.arguments&&(a.parsedArguments=this.jsonParser.parse(e.toolCall.function.arguments)),this.toolCalls.set(n,a),this.toolCallOrder.push(n);const l=this.toolCallOrder.indexOf(n);this.handlers.onToolCallStart?.(l,e.toolCall.id,e.toolCall.function.name),this.handlers.onToolCallStateChange?.(l,e.toolCall.id,e.toolCall.function.name,s,e.toolCall.function.arguments||"",a.parsedArguments),e.toolCall.function.arguments&&this.handlers.onToolCallDelta?.(l,e.toolCall.function.arguments),this.currentAssistantMessageId&&(this.messages=mm(this.messages,this.currentAssistantMessageId,{id:e.toolCall.id,name:e.toolCall.function.name,arguments:e.toolCall.function.arguments||"",state:s}),this.emitMessagesChange(),this.events.onToolCallStateChange?.(this.currentAssistantMessageId,e.toolCall.id,s,e.toolCall.function.arguments||""))}}handleToolResultChunk(e){const n="complete";this.handlers.onToolResultStateChange?.(e.toolCallId,e.content,n),this.currentAssistantMessageId&&(this.messages=hw(this.messages,this.currentAssistantMessageId,e.toolCallId,e.content,n),this.emitMessagesChange())}handleDoneChunk(e){this.finishReason=e.finishReason,this.isDone=!0,this.completeAllToolCalls()}handleErrorChunk(e){this.handlers.onError?.(e.error),this.events.onError?.(new Error(e.error.message))}handleThinkingChunk(e){const n=this.thinkingContent;let r=n;e.delta!==""?r=n+e.delta:e.content!==""&&(e.content.startsWith(n)?r=e.content:n.startsWith(e.content)?r=n:r=n+e.content),this.thinkingContent=r,this.handlers.onThinkingUpdate?.(this.thinkingContent),this.currentAssistantMessageId&&(this.messages=VP(this.messages,this.currentAssistantMessageId,this.thinkingContent),this.emitMessagesChange(),this.events.onThinkingUpdate?.(this.currentAssistantMessageId,this.thinkingContent))}handleApprovalRequestedChunk(e){this.handlers.onApprovalRequested?.(e.toolCallId,e.toolName,e.input,e.approval.id),this.currentAssistantMessageId&&(this.messages=UP(this.messages,this.currentAssistantMessageId,e.toolCallId,e.approval.id),this.emitMessagesChange()),this.events.onApprovalRequest?.({toolCallId:e.toolCallId,toolName:e.toolName,input:e.input,approvalId:e.approval.id})}handleToolInputAvailableChunk(e){this.handlers.onToolInputAvailable?.(e.toolCallId,e.toolName,e.input),this.events.onToolCall?.({toolCallId:e.toolCallId,toolName:e.toolName,input:e.input})}isNewTextSegment(e,n){return e.delta!==void 0&&e.content!==void 0&&(e.content.length<n.length||!e.content.startsWith(n)&&!n.startsWith(e.content))}completeAllToolCalls(){this.toolCalls.forEach((e,n)=>{if(e.state!=="input-complete"){const r=this.toolCallOrder.indexOf(n);this.completeToolCall(r,e)}})}completeToolCall(e,n){n.state="input-complete",n.parsedArguments=this.jsonParser.parse(n.arguments),this.handlers.onToolCallStateChange?.(e,n.id,n.name,"input-complete",n.arguments,n.parsedArguments),this.handlers.onToolCallComplete?.(e,n.id,n.name,n.arguments),this.currentAssistantMessageId&&(this.messages=mm(this.messages,this.currentAssistantMessageId,{id:n.id,name:n.name,arguments:n.arguments,state:"input-complete"}),this.emitMessagesChange(),this.events.onToolCallStateChange?.(this.currentAssistantMessageId,n.id,"input-complete",n.arguments))}emitTextUpdate(){this.lastEmittedText=this.currentSegmentText,this.handlers.onTextUpdate?.(this.currentSegmentText),this.currentAssistantMessageId&&(this.messages=$P(this.messages,this.currentAssistantMessageId,this.currentSegmentText),this.emitMessagesChange(),this.events.onTextUpdate?.(this.currentAssistantMessageId,this.currentSegmentText))}emitMessagesChange(){this.events.onMessagesChange?.([...this.messages])}finalizeStream(){this.completeAllToolCalls(),this.currentSegmentText!==this.lastEmittedText&&this.emitTextUpdate();const e=this.getCompletedToolCalls();if(this.handlers.onStreamEnd?.(this.totalTextContent,e.length>0?e:void 0),this.currentAssistantMessageId){const n=this.messages.find(r=>r.id===this.currentAssistantMessageId);n&&this.events.onStreamEnd?.(n)}}getCompletedToolCalls(){return Array.from(this.toolCalls.values()).filter(e=>e.state==="input-complete").map(e=>({id:e.id,type:"function",function:{name:e.name,arguments:e.arguments}}))}getResult(){const e=this.getCompletedToolCalls();return{content:this.totalTextContent,thinking:this.thinkingContent||void 0,toolCalls:e.length>0?e:void 0,finishReason:this.finishReason}}getState(){return{content:this.totalTextContent,thinking:this.thinkingContent,toolCalls:new Map(this.toolCalls),toolCallOrder:[...this.toolCallOrder],finishReason:this.finishReason,done:this.isDone}}startRecording(){this.recordingEnabled=!0,this.recordingStartTime=Date.now(),this.recording={version:"1.0",timestamp:this.recordingStartTime,chunks:[]}}getRecording(){return this.recording}resetStreamState(){this.totalTextContent="",this.currentSegmentText="",this.lastEmittedText="",this.thinkingContent="",this.toolCalls.clear(),this.toolCallOrder=[],this.finishReason=null,this.isDone=!1,this.hasToolCallsSinceTextStart=!1,this.chunkStrategy.reset?.()}reset(){this.resetStreamState(),this.messages=[],this.currentAssistantMessageId=null}static async replay(e,n){return new jy(n).process(GP(e))}}function GP(t){return{async*[Symbol.asyncIterator](){for(const{chunk:e}of t.chunks)yield e}}}class KP{constructor(e){this.clientId=e}clientCreated(e){this.emitEvent("client:created",{initialMessageCount:e})}loadingChanged(e){this.emitEvent("client:loading-changed",{isLoading:e})}errorChanged(e){this.emitEvent("client:error-changed",{error:e})}textUpdated(e,n,r){this.emitEvent("processor:text-updated",{streamId:e,content:r}),this.emitEvent("client:assistant-message-updated",{messageId:n,content:r})}toolCallStateChanged(e,n,r,s,a,l){this.emitEvent("processor:tool-call-state-changed",{streamId:e,toolCallId:r,toolName:s,state:a,arguments:l}),this.emitEvent("client:tool-call-updated",{messageId:n,toolCallId:r,toolName:s,state:a,arguments:l})}toolResultStateChanged(e,n,r,s,a){this.emitEvent("processor:tool-result-state-changed",{streamId:e,toolCallId:n,content:r,state:s,error:a})}thinkingUpdated(e,n,r,s){this.emitEvent("stream:chunk:thinking",{streamId:e,messageId:n,content:r,delta:s})}approvalRequested(e,n,r,s,a){this.emitEvent("client:approval-requested",{messageId:e,toolCallId:n,toolName:r,input:s,approvalId:a})}messageAppended(e){const n=e.parts.filter(r=>r.type==="text").map(r=>r.content).join(" ").substring(0,100);this.emitEvent("client:message-appended",{messageId:e.id,role:e.role,contentPreview:n})}messageSent(e,n){this.emitEvent("client:message-sent",{messageId:e,content:n})}reloaded(e){this.emitEvent("client:reloaded",{fromMessageIndex:e})}stopped(){this.emitEvent("client:stopped")}messagesCleared(){this.emitEvent("client:messages-cleared")}toolResultAdded(e,n,r,s){this.emitEvent("tool:result-added",{toolCallId:e,toolName:n,output:r,state:s})}toolApprovalResponded(e,n,r){this.emitEvent("tool:approval-responded",{approvalId:e,toolCallId:n,approved:r})}}class ZP extends KP{emitEvent(e,n){e.startsWith("client:")||e.startsWith("tool:")?Dt.emit(e,{...n,clientId:this.clientId,timestamp:Date.now()}):Dt.emit(e,{...n,timestamp:Date.now()})}}class QP{constructor(e){if(this.body={},this.isLoading=!1,this.error=void 0,this.abortController=null,this.currentStreamId=null,this.currentMessageId=null,this.postStreamActions=[],this.uniqueId=e.id||this.generateUniqueId("chat"),this.body=e.body||{},this.connection=e.connection,this.events=new ZP(this.uniqueId),this.clientToolsRef={current:new Map},e.tools)for(const n of e.tools)this.clientToolsRef.current.set(n.name,n);this.callbacksRef={current:{onResponse:e.onResponse||(()=>{}),onChunk:e.onChunk||(()=>{}),onFinish:e.onFinish||(()=>{}),onError:e.onError||(()=>{}),onMessagesChange:e.onMessagesChange||(()=>{}),onLoadingChange:e.onLoadingChange||(()=>{}),onErrorChange:e.onErrorChange||(()=>{})}},this.processor=new jy({chunkStrategy:e.streamProcessor?.chunkStrategy,initialMessages:e.initialMessages,events:{onMessagesChange:n=>{this.callbacksRef.current.onMessagesChange(n)},onStreamStart:()=>{},onStreamEnd:n=>{this.callbacksRef.current.onFinish(n)},onError:n=>{this.setError(n),this.callbacksRef.current.onError(n)},onTextUpdate:(n,r)=>{this.currentStreamId&&this.events.textUpdated(this.currentStreamId,n,r)},onThinkingUpdate:(n,r)=>{this.currentStreamId&&this.events.thinkingUpdated(this.currentStreamId,n,r)},onToolCallStateChange:(n,r,s,a)=>{const h=this.processor.getMessages().find(m=>m.id===n)?.parts.find(m=>m.type==="tool-call"&&m.id===r)?.name||"unknown";this.currentStreamId&&this.events.toolCallStateChanged(this.currentStreamId,n,r,h,s,a)},onToolCall:async n=>{const r=this.clientToolsRef.current.get(n.toolName);if(r?.execute)try{const s=await r.execute(n.input);await this.addToolResult({toolCallId:n.toolCallId,tool:n.toolName,output:s,state:"output-available"})}catch(s){await this.addToolResult({toolCallId:n.toolCallId,tool:n.toolName,output:null,state:"output-error",errorText:s.message})}},onApprovalRequest:n=>{this.events.approvalRequested(this.currentMessageId||"",n.toolCallId,n.toolName,n.input,n.approvalId)}}}),this.events.clientCreated(this.processor.getMessages().length)}generateUniqueId(e){return`${e}-${Date.now()}-${Math.random().toString(36).substring(7)}`}setIsLoading(e){this.isLoading=e,this.callbacksRef.current.onLoadingChange(e),this.events.loadingChanged(e)}setError(e){this.error=e,this.callbacksRef.current.onErrorChange(e),this.events.errorChanged(e?.message||null)}async processStream(e){this.currentStreamId=this.generateUniqueId("stream");const n=this.processor.startAssistantMessage();this.currentMessageId=n;const r={id:n,role:"assistant",parts:[],createdAt:new Date};this.events.messageAppended(r);for await(const l of e)this.callbacksRef.current.onChunk(l),this.processor.processChunk(l),await new Promise(u=>setTimeout(u,0));return this.processor.finalizeStream(),this.currentStreamId=null,this.currentMessageId=null,this.processor.getMessages().find(l=>l.id===n)||{id:n,role:"assistant",parts:[],createdAt:new Date}}async sendMessage(e){if(!e.trim()||this.isLoading)return;const n=this.processor.addUserMessage(e.trim());this.events.messageSent(n.id,e.trim()),await this.streamResponse()}async append(e){const n=LP(e,Mf);if(n.role==="system")return;const r=n;this.events.messageAppended(r);const s=this.processor.getMessages();this.processor.setMessages([...s,r]),await this.streamResponse()}async streamResponse(){this.setIsLoading(!0),this.setError(void 0),this.abortController=new AbortController;try{const e=this.processor.toModelMessages();await this.callbacksRef.current.onResponse();const n={...this.body,conversationId:this.uniqueId},r=this.connection.connect(e,n,this.abortController.signal);await this.processStream(r)}catch(e){if(e instanceof Error){if(e.name==="AbortError")return;this.setError(e),this.callbacksRef.current.onError(e)}}finally{this.abortController=null,this.setIsLoading(!1),await this.drainPostStreamActions()}}async reload(){const e=this.processor.getMessages();if(e.length===0)return;const n=e.findLastIndex(r=>r.role==="user");n!==-1&&(this.events.reloaded(n),this.processor.removeMessagesAfter(n),await this.streamResponse())}stop(){this.abortController&&(this.abortController.abort(),this.abortController=null),this.setIsLoading(!1),this.events.stopped()}clear(){this.processor.clearMessages(),this.setError(void 0),this.events.messagesCleared()}async addToolResult(e){if(this.events.toolResultAdded(e.toolCallId,e.tool,e.output,e.state||"output-available"),this.processor.addToolResult(e.toolCallId,e.output,e.errorText),this.isLoading){this.queuePostStreamAction(()=>this.checkForContinuation());return}await this.checkForContinuation()}async addToolApprovalResponse(e){const n=this.processor.getMessages();let r;for(const s of n){const a=s.parts.find(l=>l.type==="tool-call"&&l.approval?.id===e.id);if(a){r=a.id;break}}if(r&&this.events.toolApprovalResponded(e.id,r,e.approved),this.processor.addToolApprovalResponse(e.id,e.approved),this.isLoading){this.queuePostStreamAction(()=>this.checkForContinuation());return}await this.checkForContinuation()}queuePostStreamAction(e){this.postStreamActions.push(e)}async drainPostStreamActions(){for(;this.postStreamActions.length>0;)await this.postStreamActions.shift()()}async checkForContinuation(){this.shouldAutoSend()&&await this.streamResponse()}shouldAutoSend(){return this.processor.areAllToolsComplete()}getMessages(){return this.processor.getMessages()}getIsLoading(){return this.isLoading}getError(){return this.error}setMessagesManually(e){this.processor.setMessages(e)}updateOptions(e){if(e.connection!==void 0&&(this.connection=e.connection),e.body!==void 0&&(this.body=e.body),e.tools!==void 0){this.clientToolsRef.current=new Map;for(const n of e.tools)this.clientToolsRef.current.set(n.name,n)}e.onResponse!==void 0&&(this.callbacksRef.current.onResponse=e.onResponse),e.onChunk!==void 0&&(this.callbacksRef.current.onChunk=e.onChunk),e.onFinish!==void 0&&(this.callbacksRef.current.onFinish=e.onFinish),e.onError!==void 0&&(this.callbacksRef.current.onError=e.onError)}}function JP(...t){return t}function YP(t){return{async*connect(e,n){const r=MP(e);yield*t(r,n)}}}function XP(t){const e=Q.useId(),n=t.id||e,[r,s]=Q.useState(t.initialMessages||[]),[a,l]=Q.useState(!1),[u,f]=Q.useState(void 0),h=Q.useRef(t.initialMessages||[]),m=Q.useRef(!0);Q.useEffect(()=>{h.current=r},[r]);const p=Q.useRef(t);p.current=t;const y=Q.useMemo(()=>{const D=m.current?t.initialMessages||[]:h.current;return m.current=!1,new QP({connection:p.current.connection,id:n,initialMessages:D,body:p.current.body,onResponse:p.current.onResponse,onChunk:p.current.onChunk,onFinish:p.current.onFinish,onError:p.current.onError,tools:p.current.tools,streamProcessor:t.streamProcessor,onMessagesChange:N=>{s(N)},onLoadingChange:N=>{l(N)},onErrorChange:N=>{f(N)}})},[n]);Q.useEffect(()=>{t.initialMessages&&t.initialMessages.length>0&&r.length===0&&y.setMessagesManually(t.initialMessages)},[]),Q.useEffect(()=>()=>{y.stop()},[y]);const g=Q.useCallback(async D=>{await y.sendMessage(D)},[y]),v=Q.useCallback(async D=>{await y.append(D)},[y]),x=Q.useCallback(async()=>{await y.reload()},[y]),E=Q.useCallback(()=>{y.stop()},[y]),S=Q.useCallback(()=>{y.clear()},[y]),C=Q.useCallback(D=>{y.setMessagesManually(D)},[y]),T=Q.useCallback(async D=>{await y.addToolResult(D)},[y]),L=Q.useCallback(async D=>{await y.addToolApprovalResponse(D)},[y]);return{messages:r,sendMessage:g,append:v,reload:x,stop:E,isLoading:a,error:u,setMessages:C,clear:S,addToolResult:T,addToolApprovalResponse:L}}class WP{constructor(e={},n){this.kind="text",this.config=e,this.model=n}generateId(){return`${this.name}-${Date.now()}-${Math.random().toString(36).substring(7)}`}}const e6=t=>{if(t.conversation&&t.previous_response_id)throw new Error("Cannot use both 'conversation' and 'previous_response_id' in the same request.")},t6=t=>{n6(t),e6(t)},n6=t=>{const e=t.metadata;if(e&&Object.keys(e).length>16)throw new Error("Metadata cannot have more than 16 key-value pairs.");if(e&&Object.keys(e).some(a=>a.length>64))throw new Error("Metadata keys cannot be longer than 64 characters.");if(e&&Object.values(e).some(a=>a.length>512))throw new Error("Metadata values cannot be longer than 512 characters.")};function Tg(t){if(t!==null){if(Array.isArray(t))return t.map(e=>Tg(e));if(typeof t=="object"){const e={};for(const[n,r]of Object.entries(t)){const s=Tg(r);s!==void 0&&(e[n]=s)}return e}return t}}function wl(t,e=[]){const n={...t};if(n.type==="object"&&n.properties){const r={...n.properties},s=Object.keys(r);for(const a of s){const l=r[a],u=!e.includes(a);l.type==="object"&&l.properties?r[a]=wl(l,l.required||[]):l.type==="array"&&l.items?r[a]={...l,items:wl(l.items,l.items.required||[])}:u&&(l.type&&!Array.isArray(l.type)?r[a]={...l,type:[l.type,"null"]}:Array.isArray(l.type)&&!l.type.includes("null")&&(r[a]={...l,type:[...l.type,"null"]}))}n.properties=r,n.required=s,n.additionalProperties=!1}return n.type==="array"&&n.items&&(n.items=wl(n.items,n.items.required||[])),n}function r6(t){return{type:"apply_patch"}}function s6(t){return{type:"code_interpreter",container:t.metadata.container}}function i6(t){const e=t.metadata;return{type:"computer_use_preview",display_height:e.display_height,display_width:e.display_width,environment:e.environment}}function a6(t){const e=t.metadata;return{type:"custom",name:e.name,description:e.description,format:e.format}}function o6(t){const e=t.metadata;return{type:"file_search",vector_store_ids:e.vector_store_ids,max_num_results:e.max_num_results,ranking_options:e.ranking_options,filters:e.filters}}function l6(t){const e=t.inputSchema??{type:"object",properties:{},required:[]},n=wl(e,e.required||[]);return n.additionalProperties=!1,{type:"function",name:t.name,description:t.description,parameters:n,strict:!0}}function c6(t){return{type:"image_generation",...t.metadata}}function u6(t){return{type:"local_shell"}}function f6(t){if(!t.server_url&&!t.connector_id)throw new Error("Either server_url or connector_id must be provided.");if(t.connector_id&&t.server_url)throw new Error("Only one of server_url or connector_id can be provided.")}function h6(t){const n={type:"mcp",...t.metadata};return f6(n),n}function d6(t){return{type:"shell"}}function p6(t){const e=t.metadata;return{type:e.type,search_context_size:e.search_context_size,user_location:e.user_location}}function m6(t){return t.metadata}function g6(t){return t.map(e=>{const n=new Set(["apply_patch","code_interpreter","computer_use_preview","file_search","image_generation","local_shell","mcp","shell","web_search_preview","web_search","custom"]),r=e.name;if(n.has(r))switch(r){case"apply_patch":return r6();case"code_interpreter":return s6(e);case"computer_use_preview":return i6(e);case"file_search":return o6(e);case"image_generation":return c6(e);case"local_shell":return u6();case"mcp":return h6(e);case"shell":return d6();case"web_search_preview":return p6(e);case"web_search":return m6(e);case"custom":return a6(e)}return l6(e)})}function Me(t,e,n,r,s){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n}function ee(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)}let NE=function(){const{crypto:t}=globalThis;if(t?.randomUUID)return NE=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,r=>(+r^n()&15>>+r/4).toString(16))};function Ag(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const Rg=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};class Ce extends Error{}class un extends Ce{constructor(e,n,r,s){super(`${un.makeMessage(e,n,r)}`),this.status=e,this.headers=s,this.requestID=s?.get("x-request-id"),this.error=n;const a=n;this.code=a?.code,this.param=a?.param,this.type=a?.type}static makeMessage(e,n,r){const s=n?.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return e&&s?`${e} ${s}`:e?`${e} status code (no body)`:s||"(no status code or body)"}static generate(e,n,r,s){if(!e||!s)return new ch({message:r,cause:Rg(n)});const a=n?.error;return e===400?new IE(e,a,r,s):e===401?new ME(e,a,r,s):e===403?new DE(e,a,r,s):e===404?new LE(e,a,r,s):e===409?new jE(e,a,r,s):e===422?new zE(e,a,r,s):e===429?new PE(e,a,r,s):e>=500?new BE(e,a,r,s):new un(e,a,r,s)}}class vr extends un{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class ch extends un{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class zy extends ch{constructor({message:e}={}){super({message:e??"Request timed out."})}}class IE extends un{}class ME extends un{}class DE extends un{}class LE extends un{}class jE extends un{}class zE extends un{}class PE extends un{}class BE extends un{}class $E extends Ce{constructor(){super("Could not parse response content as the length limit was reached")}}class UE extends Ce{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}class ll extends Error{constructor(e){super(e)}}const y6=/^[a-z][a-z0-9+.-]*:/i,_6=t=>y6.test(t);let Bn=t=>(Bn=Array.isArray,Bn(t)),dw=Bn;function qE(t){return typeof t!="object"?{}:t??{}}function b6(t){if(!t)return!0;for(const e in t)return!1;return!0}function v6(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function gm(t){return t!=null&&typeof t=="object"&&!Array.isArray(t)}const x6=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Ce(`${t} must be an integer`);if(e<0)throw new Ce(`${t} must be a positive integer`);return e},w6=t=>{try{return JSON.parse(t)}catch{return}},Wl=t=>new Promise(e=>setTimeout(e,t)),Ra="6.15.0",S6=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u";function k6(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const E6=()=>{const t=k6();if(t==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ra,"X-Stainless-OS":mw(Deno.build.os),"X-Stainless-Arch":pw(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:Deno.version?.deno??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ra,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(t==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ra,"X-Stainless-OS":mw(globalThis.process.platform??"unknown"),"X-Stainless-Arch":pw(globalThis.process.arch??"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":globalThis.process.version??"unknown"};const e=C6();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ra,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ra,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function C6(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const r=n.exec(navigator.userAgent);if(r){const s=r[1]||0,a=r[2]||0,l=r[3]||0;return{browser:e,version:`${s}.${a}.${l}`}}}return null}const pw=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",mw=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let gw;const T6=()=>gw??(gw=E6());function A6(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new OpenAI({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function FE(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function VE(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return FE({start(){},async pull(n){const{done:r,value:s}=await e.next();r?n.close():n.enqueue(s)},async cancel(){await e.return?.()}})}function HE(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n?.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function R6(t){if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await t[Symbol.asyncIterator]().return?.();return}const e=t.getReader(),n=e.cancel();e.releaseLock(),await n}const O6=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)}),GE="RFC3986",KE=t=>String(t),yw={RFC1738:t=>String(t).replace(/%20/g,"+"),RFC3986:KE},N6="RFC1738";let Og=(t,e)=>(Og=Object.hasOwn??Function.prototype.call.bind(Object.prototype.hasOwnProperty),Og(t,e));const Lr=(()=>{const t=[];for(let e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t})(),ym=1024,I6=(t,e,n,r,s)=>{if(t.length===0)return t;let a=t;if(typeof t=="symbol"?a=Symbol.prototype.toString.call(t):typeof t!="string"&&(a=String(t)),n==="iso-8859-1")return escape(a).replace(/%u[0-9a-f]{4}/gi,function(u){return"%26%23"+parseInt(u.slice(2),16)+"%3B"});let l="";for(let u=0;u<a.length;u+=ym){const f=a.length>=ym?a.slice(u,u+ym):a,h=[];for(let m=0;m<f.length;++m){let p=f.charCodeAt(m);if(p===45||p===46||p===95||p===126||p>=48&&p<=57||p>=65&&p<=90||p>=97&&p<=122||s===N6&&(p===40||p===41)){h[h.length]=f.charAt(m);continue}if(p<128){h[h.length]=Lr[p];continue}if(p<2048){h[h.length]=Lr[192|p>>6]+Lr[128|p&63];continue}if(p<55296||p>=57344){h[h.length]=Lr[224|p>>12]+Lr[128|p>>6&63]+Lr[128|p&63];continue}m+=1,p=65536+((p&1023)<<10|f.charCodeAt(m)&1023),h[h.length]=Lr[240|p>>18]+Lr[128|p>>12&63]+Lr[128|p>>6&63]+Lr[128|p&63]}l+=h.join("")}return l};function M6(t){return!t||typeof t!="object"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))}function _w(t,e){if(Bn(t)){const n=[];for(let r=0;r<t.length;r+=1)n.push(e(t[r]));return n}return e(t)}const ZE={brackets(t){return String(t)+"[]"},comma:"comma",indices(t,e){return String(t)+"["+e+"]"},repeat(t){return String(t)}},QE=function(t,e){Array.prototype.push.apply(t,Bn(e)?e:[e])};let bw;const $t={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:I6,encodeValuesOnly:!1,format:GE,formatter:KE,indices:!1,serializeDate(t){return(bw??(bw=Function.prototype.call.bind(Date.prototype.toISOString)))(t)},skipNulls:!1,strictNullHandling:!1};function D6(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="symbol"||typeof t=="bigint"}const _m={};function JE(t,e,n,r,s,a,l,u,f,h,m,p,y,g,v,x,E,S){let C=t,T=S,L=0,D=!1;for(;(T=T.get(_m))!==void 0&&!D;){const j=T.get(t);if(L+=1,typeof j<"u"){if(j===L)throw new RangeError("Cyclic object value");D=!0}typeof T.get(_m)>"u"&&(L=0)}if(typeof h=="function"?C=h(e,C):C instanceof Date?C=y?.(C):n==="comma"&&Bn(C)&&(C=_w(C,function(j){return j instanceof Date?y?.(j):j})),C===null){if(a)return f&&!x?f(e,$t.encoder,E,"key",g):e;C=""}if(D6(C)||M6(C)){if(f){const j=x?e:f(e,$t.encoder,E,"key",g);return[v?.(j)+"="+v?.(f(C,$t.encoder,E,"value",g))]}return[v?.(e)+"="+v?.(String(C))]}const N=[];if(typeof C>"u")return N;let B;if(n==="comma"&&Bn(C))x&&f&&(C=_w(C,f)),B=[{value:C.length>0?C.join(",")||null:void 0}];else if(Bn(h))B=h;else{const j=Object.keys(C);B=m?j.sort(m):j}const K=u?String(e).replace(/\./g,"%2E"):String(e),G=r&&Bn(C)&&C.length===1?K+"[]":K;if(s&&Bn(C)&&C.length===0)return G+"[]";for(let j=0;j<B.length;++j){const J=B[j],ie=typeof J=="object"&&typeof J.value<"u"?J.value:C[J];if(l&&ie===null)continue;const q=p&&u?J.replace(/\./g,"%2E"):J,P=Bn(C)?typeof n=="function"?n(G,q):G:G+(p?"."+q:"["+q+"]");S.set(t,L);const U=new WeakMap;U.set(_m,S),QE(N,JE(ie,P,n,r,s,a,l,u,n==="comma"&&x&&Bn(C)?null:f,h,m,p,y,g,v,x,E,U))}return N}function L6(t=$t){if(typeof t.allowEmptyArrays<"u"&&typeof t.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof t.encodeDotInKeys<"u"&&typeof t.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(t.encoder!==null&&typeof t.encoder<"u"&&typeof t.encoder!="function")throw new TypeError("Encoder has to be a function.");const e=t.charset||$t.charset;if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let n=GE;if(typeof t.format<"u"){if(!Og(yw,t.format))throw new TypeError("Unknown format option provided.");n=t.format}const r=yw[n];let s=$t.filter;(typeof t.filter=="function"||Bn(t.filter))&&(s=t.filter);let a;if(t.arrayFormat&&t.arrayFormat in ZE?a=t.arrayFormat:"indices"in t?a=t.indices?"indices":"repeat":a=$t.arrayFormat,"commaRoundTrip"in t&&typeof t.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const l=typeof t.allowDots>"u"?t.encodeDotInKeys?!0:$t.allowDots:!!t.allowDots;return{addQueryPrefix:typeof t.addQueryPrefix=="boolean"?t.addQueryPrefix:$t.addQueryPrefix,allowDots:l,allowEmptyArrays:typeof t.allowEmptyArrays=="boolean"?!!t.allowEmptyArrays:$t.allowEmptyArrays,arrayFormat:a,charset:e,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:$t.charsetSentinel,commaRoundTrip:!!t.commaRoundTrip,delimiter:typeof t.delimiter>"u"?$t.delimiter:t.delimiter,encode:typeof t.encode=="boolean"?t.encode:$t.encode,encodeDotInKeys:typeof t.encodeDotInKeys=="boolean"?t.encodeDotInKeys:$t.encodeDotInKeys,encoder:typeof t.encoder=="function"?t.encoder:$t.encoder,encodeValuesOnly:typeof t.encodeValuesOnly=="boolean"?t.encodeValuesOnly:$t.encodeValuesOnly,filter:s,format:n,formatter:r,serializeDate:typeof t.serializeDate=="function"?t.serializeDate:$t.serializeDate,skipNulls:typeof t.skipNulls=="boolean"?t.skipNulls:$t.skipNulls,sort:typeof t.sort=="function"?t.sort:null,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:$t.strictNullHandling}}function j6(t,e={}){let n=t;const r=L6(e);let s,a;typeof r.filter=="function"?(a=r.filter,n=a("",n)):Bn(r.filter)&&(a=r.filter,s=a);const l=[];if(typeof n!="object"||n===null)return"";const u=ZE[r.arrayFormat],f=u==="comma"&&r.commaRoundTrip;s||(s=Object.keys(n)),r.sort&&s.sort(r.sort);const h=new WeakMap;for(let y=0;y<s.length;++y){const g=s[y];r.skipNulls&&n[g]===null||QE(l,JE(n[g],g,u,f,r.allowEmptyArrays,r.strictNullHandling,r.skipNulls,r.encodeDotInKeys,r.encode?r.encoder:null,r.filter,r.sort,r.allowDots,r.serializeDate,r.format,r.formatter,r.encodeValuesOnly,r.charset,h))}const m=l.join(r.delimiter);let p=r.addQueryPrefix===!0?"?":"";return r.charsetSentinel&&(r.charset==="iso-8859-1"?p+="utf8=%26%2310003%3B&":p+="utf8=%E2%9C%93&"),m.length>0?p+m:""}function z6(t){let e=0;for(const s of t)e+=s.length;const n=new Uint8Array(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return n}let vw;function Py(t){let e;return(vw??(e=new globalThis.TextEncoder,vw=e.encode.bind(e)))(t)}let xw;function ww(t){let e;return(xw??(e=new globalThis.TextDecoder,xw=e.decode.bind(e)))(t)}var Wn,er;class uh{constructor(){Wn.set(this,void 0),er.set(this,void 0),Me(this,Wn,new Uint8Array),Me(this,er,null)}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?Py(e):e;Me(this,Wn,z6([ee(this,Wn,"f"),n]));const r=[];let s;for(;(s=P6(ee(this,Wn,"f"),ee(this,er,"f")))!=null;){if(s.carriage&&ee(this,er,"f")==null){Me(this,er,s.index);continue}if(ee(this,er,"f")!=null&&(s.index!==ee(this,er,"f")+1||s.carriage)){r.push(ww(ee(this,Wn,"f").subarray(0,ee(this,er,"f")-1))),Me(this,Wn,ee(this,Wn,"f").subarray(ee(this,er,"f"))),Me(this,er,null);continue}const a=ee(this,er,"f")!==null?s.preceding-1:s.preceding,l=ww(ee(this,Wn,"f").subarray(0,a));r.push(l),Me(this,Wn,ee(this,Wn,"f").subarray(s.index)),Me(this,er,null)}return r}flush(){return ee(this,Wn,"f").length?this.decode(`
`):[]}}Wn=new WeakMap,er=new WeakMap;uh.NEWLINE_CHARS=new Set([`
`,"\r"]);uh.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function P6(t,e){for(let s=e??0;s<t.length;s++){if(t[s]===10)return{preceding:s,index:s+1,carriage:!1};if(t[s]===13)return{preceding:s,index:s+1,carriage:!0}}return null}function B6(t){for(let r=0;r<t.length-1;r++){if(t[r]===10&&t[r+1]===10||t[r]===13&&t[r+1]===13)return r+2;if(t[r]===13&&t[r+1]===10&&r+3<t.length&&t[r+2]===13&&t[r+3]===10)return r+4}return-1}const Df={off:0,error:200,warn:300,info:400,debug:500},Sw=(t,e,n)=>{if(t){if(v6(Df,t))return t;ln(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(Df))}`)}};function cl(){}function Au(t,e,n){return!e||Df[t]>Df[n]?cl:e[t].bind(e)}const $6={error:cl,warn:cl,info:cl,debug:cl};let kw=new WeakMap;function ln(t){const e=t.logger,n=t.logLevel??"off";if(!e)return $6;const r=kw.get(e);if(r&&r[0]===n)return r[1];const s={error:Au("error",e,n),warn:Au("warn",e,n),info:Au("info",e,n),debug:Au("debug",e,n)};return kw.set(e,[n,s]),s}const Ei=t=>(t.options&&(t.options={...t.options},delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);var Xo;class $r{constructor(e,n,r){this.iterator=e,Xo.set(this,void 0),this.controller=n,Me(this,Xo,r)}static fromSSEResponse(e,n,r){let s=!1;const a=r?ln(r):console;async function*l(){if(s)throw new Ce("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let u=!1;try{for await(const f of U6(e,n))if(!u){if(f.data.startsWith("[DONE]")){u=!0;continue}if(f.event===null||!f.event.startsWith("thread.")){let h;try{h=JSON.parse(f.data)}catch(m){throw a.error("Could not parse message into JSON:",f.data),a.error("From chunk:",f.raw),m}if(h&&h.error)throw new un(void 0,h.error,void 0,e.headers);yield h}else{let h;try{h=JSON.parse(f.data)}catch(m){throw console.error("Could not parse message into JSON:",f.data),console.error("From chunk:",f.raw),m}if(f.event=="error")throw new un(void 0,h.error,h.message,void 0);yield{event:f.event,data:h}}}u=!0}catch(f){if(Ag(f))return;throw f}finally{u||n.abort()}}return new $r(l,n,r)}static fromReadableStream(e,n,r){let s=!1;async function*a(){const u=new uh,f=HE(e);for await(const h of f)for(const m of u.decode(h))yield m;for(const h of u.flush())yield h}async function*l(){if(s)throw new Ce("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let u=!1;try{for await(const f of a())u||f&&(yield JSON.parse(f));u=!0}catch(f){if(Ag(f))return;throw f}finally{u||n.abort()}}return new $r(l,n,r)}[(Xo=new WeakMap,Symbol.asyncIterator)](){return this.iterator()}tee(){const e=[],n=[],r=this.iterator(),s=a=>({next:()=>{if(a.length===0){const l=r.next();e.push(l),n.push(l)}return a.shift()}});return[new $r(()=>s(e),this.controller,ee(this,Xo,"f")),new $r(()=>s(n),this.controller,ee(this,Xo,"f"))]}toReadableStream(){const e=this;let n;return FE({async start(){n=e[Symbol.asyncIterator]()},async pull(r){try{const{value:s,done:a}=await n.next();if(a)return r.close();const l=Py(JSON.stringify(s)+`
`);r.enqueue(l)}catch(s){r.error(s)}},async cancel(){await n.return?.()}})}}async function*U6(t,e){if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Ce("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Ce("Attempted to iterate over a response with no body");const n=new F6,r=new uh,s=HE(t.body);for await(const a of q6(s))for(const l of r.decode(a)){const u=n.decode(l);u&&(yield u)}for(const a of r.flush()){const l=n.decode(a);l&&(yield l)}}async function*q6(t){let e=new Uint8Array;for await(const n of t){if(n==null)continue;const r=n instanceof ArrayBuffer?new Uint8Array(n):typeof n=="string"?Py(n):n;let s=new Uint8Array(e.length+r.length);s.set(e),s.set(r,e.length),e=s;let a;for(;(a=B6(e))!==-1;)yield e.slice(0,a),e=e.slice(a)}e.length>0&&(yield e)}class F6{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const a={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],a}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,r,s]=V6(e,":");return s.startsWith(" ")&&(s=s.substring(1)),n==="event"?this.event=s:n==="data"&&this.data.push(s),null}}function V6(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}async function YE(t,e){const{response:n,requestLogID:r,retryOfRequestLogID:s,startTime:a}=e,l=await(async()=>{if(e.options.stream)return ln(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):$r.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const f=n.headers.get("content-type")?.split(";")[0]?.trim();if(f?.includes("application/json")||f?.endsWith("+json")){const p=await n.json();return XE(p,n)}return await n.text()})();return ln(t).debug(`[${r}] response parsed`,Ei({retryOfRequestLogID:s,url:n.url,status:n.status,body:l,durationMs:Date.now()-a})),l}function XE(t,e){return!t||typeof t!="object"||Array.isArray(t)?t:Object.defineProperty(t,"_request_id",{value:e.headers.get("x-request-id"),enumerable:!1})}var ul;class fh extends Promise{constructor(e,n,r=YE){super(s=>{s(null)}),this.responsePromise=n,this.parseResponse=r,ul.set(this,void 0),Me(this,ul,e)}_thenUnwrap(e){return new fh(ee(this,ul,"f"),this.responsePromise,async(n,r)=>XE(e(await this.parseResponse(n,r),r),r.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n,request_id:n.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(ee(this,ul,"f"),e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}ul=new WeakMap;var Ru;class By{constructor(e,n,r,s){Ru.set(this,void 0),Me(this,Ru,e),this.options=s,this.response=n,this.body=r}hasNextPage(){return this.getPaginatedItems().length?this.nextPageRequestOptions()!=null:!1}async getNextPage(){const e=this.nextPageRequestOptions();if(!e)throw new Ce("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");return await ee(this,Ru,"f").requestAPIList(this.constructor,e)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(Ru=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const n of e.getPaginatedItems())yield n}}class H6 extends fh{constructor(e,n,r){super(e,n,async(s,a)=>new r(s,a.response,await YE(s,a),a.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const n of e)yield n}}class hh extends By{constructor(e,n,r,s){super(e,n,r,s),this.data=r.data||[],this.object=r.object}getPaginatedItems(){return this.data??[]}nextPageRequestOptions(){return null}}class zt extends By{constructor(e,n,r,s){super(e,n,r,s),this.data=r.data||[],this.has_more=r.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){const e=this.getPaginatedItems(),n=e[e.length-1]?.id;return n?{...this.options,query:{...qE(this.options.query),after:n}}:null}}class Lf extends By{constructor(e,n,r,s){super(e,n,r,s),this.data=r.data||[],this.has_more=r.has_more||!1,this.last_id=r.last_id||""}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){const e=this.last_id;return e?{...this.options,query:{...qE(this.options.query),after:e}}:null}}const WE=()=>{if(typeof File>"u"){const{process:t}=globalThis,e=typeof t?.versions?.node=="string"&&parseInt(t.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(e?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Sl(t,e,n){return WE(),new File(t,e??"unknown_file",n)}function Ju(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const $y=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function",Ew=async(t,e)=>Ng(t.body)?{...t,body:await eC(t.body,e)}:t,Ii=async(t,e)=>({...t,body:await eC(t.body,e)}),Cw=new WeakMap;function G6(t){const e=typeof t=="function"?t:t.fetch,n=Cw.get(e);if(n)return n;const r=(async()=>{try{const s="Response"in e?e.Response:(await e("data:,")).constructor,a=new FormData;return a.toString()!==await new s(a).text()}catch{return!0}})();return Cw.set(e,r),r}const eC=async(t,e)=>{if(!await G6(e))throw new TypeError("The provided fetch function does not support file uploads with the current global FormData class.");const n=new FormData;return await Promise.all(Object.entries(t||{}).map(([r,s])=>Ig(n,r,s))),n},tC=t=>t instanceof Blob&&"name"in t,K6=t=>typeof t=="object"&&t!==null&&(t instanceof Response||$y(t)||tC(t)),Ng=t=>{if(K6(t))return!0;if(Array.isArray(t))return t.some(Ng);if(t&&typeof t=="object"){for(const e in t)if(Ng(t[e]))return!0}return!1},Ig=async(t,e,n)=>{if(n!==void 0){if(n==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")t.append(e,String(n));else if(n instanceof Response)t.append(e,Sl([await n.blob()],Ju(n)));else if($y(n))t.append(e,Sl([await new Response(VE(n)).blob()],Ju(n)));else if(tC(n))t.append(e,n,Ju(n));else if(Array.isArray(n))await Promise.all(n.map(r=>Ig(t,e+"[]",r)));else if(typeof n=="object")await Promise.all(Object.entries(n).map(([r,s])=>Ig(t,`${e}[${r}]`,s)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${n} instead`)}},nC=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",Z6=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&nC(t),Q6=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function J6(t,e,n){if(WE(),t=await t,Z6(t))return t instanceof File?t:Sl([await t.arrayBuffer()],t.name);if(Q6(t)){const s=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),Sl(await Mg(s),e,n)}const r=await Mg(t);if(e||(e=Ju(t)),!n?.type){const s=r.find(a=>typeof a=="object"&&"type"in a&&a.type);typeof s=="string"&&(n={...n,type:s})}return Sl(r,e,n)}async function Mg(t){let e=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)e.push(t);else if(nC(t))e.push(t instanceof Blob?t:await t.arrayBuffer());else if($y(t))for await(const n of t)e.push(...await Mg(n));else{const n=t?.constructor?.name;throw new Error(`Unexpected data type: ${typeof t}${n?`; constructor: ${n}`:""}${Y6(t)}`)}return e}function Y6(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}class ke{constructor(e){this._client=e}}function rC(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const Tw=Object.freeze(Object.create(null)),X6=(t=rC)=>function(n,...r){if(n.length===1)return n[0];let s=!1;const a=[],l=n.reduce((m,p,y)=>{/[?#]/.test(p)&&(s=!0);const g=r[y];let v=(s?encodeURIComponent:t)(""+g);return y!==r.length&&(g==null||typeof g=="object"&&g.toString===Object.getPrototypeOf(Object.getPrototypeOf(g.hasOwnProperty??Tw)??Tw)?.toString)&&(v=g+"",a.push({start:m.length+p.length,length:v.length,error:`Value of type ${Object.prototype.toString.call(g).slice(8,-1)} is not a valid path parameter`})),m+p+(y===r.length?"":v)},""),u=l.split(/[?#]/,1)[0],f=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let h;for(;(h=f.exec(u))!==null;)a.push({start:h.index,length:h[0].length,error:`Value "${h[0]}" can't be safely passed as a path parameter`});if(a.sort((m,p)=>m.start-p.start),a.length>0){let m=0;const p=a.reduce((y,g)=>{const v=" ".repeat(g.start-m),x="^".repeat(g.length);return m=g.start+g.length,y+v+x},"");throw new Ce(`Path parameters result in path with invalid segments:
${a.map(y=>y.error).join(`
`)}
${l}
${p}`)}return l},he=X6(rC);let sC=class extends ke{list(e,n={},r){return this._client.getAPIList(he`/chat/completions/${e}/messages`,zt,{query:n,...r})}};function jf(t){return t!==void 0&&"function"in t&&t.function!==void 0}function Uy(t){return t?.$brand==="auto-parseable-response-format"}function ec(t){return t?.$brand==="auto-parseable-tool"}function W6(t,e){return!e||!iC(e)?{...t,choices:t.choices.map(n=>(aC(n.message.tool_calls),{...n,message:{...n.message,parsed:null,...n.message.tool_calls?{tool_calls:n.message.tool_calls}:void 0}}))}:qy(t,e)}function qy(t,e){const n=t.choices.map(r=>{if(r.finish_reason==="length")throw new $E;if(r.finish_reason==="content_filter")throw new UE;return aC(r.message.tool_calls),{...r,message:{...r.message,...r.message.tool_calls?{tool_calls:r.message.tool_calls?.map(s=>t8(e,s))??void 0}:void 0,parsed:r.message.content&&!r.message.refusal?e8(e,r.message.content):null}}});return{...t,choices:n}}function e8(t,e){return t.response_format?.type!=="json_schema"?null:t.response_format?.type==="json_schema"?"$parseRaw"in t.response_format?t.response_format.$parseRaw(e):JSON.parse(e):null}function t8(t,e){const n=t.tools?.find(r=>jf(r)&&r.function?.name===e.function.name);return{...e,function:{...e.function,parsed_arguments:ec(n)?n.$parseRaw(e.function.arguments):n?.function.strict?JSON.parse(e.function.arguments):null}}}function n8(t,e){if(!t||!("tools"in t)||!t.tools)return!1;const n=t.tools?.find(r=>jf(r)&&r.function?.name===e.function.name);return jf(n)&&(ec(n)||n?.function.strict||!1)}function iC(t){return Uy(t.response_format)?!0:t.tools?.some(e=>ec(e)||e.type==="function"&&e.function.strict===!0)??!1}function aC(t){for(const e of t||[])if(e.type!=="function")throw new Ce(`Currently only \`function\` tool calls are supported; Received \`${e.type}\``)}function r8(t){for(const e of t??[]){if(e.type!=="function")throw new Ce(`Currently only \`function\` tool types support auto-parsing; Received \`${e.type}\``);if(e.function.strict!==!0)throw new Ce(`The \`${e.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}const zf=t=>t?.role==="assistant",oC=t=>t?.role==="tool";var Dg,Yu,Xu,fl,hl,Wu,dl,ds,pl,Pf,Bf,Oa,lC;class Fy{constructor(){Dg.add(this),this.controller=new AbortController,Yu.set(this,void 0),Xu.set(this,()=>{}),fl.set(this,()=>{}),hl.set(this,void 0),Wu.set(this,()=>{}),dl.set(this,()=>{}),ds.set(this,{}),pl.set(this,!1),Pf.set(this,!1),Bf.set(this,!1),Oa.set(this,!1),Me(this,Yu,new Promise((e,n)=>{Me(this,Xu,e,"f"),Me(this,fl,n,"f")})),Me(this,hl,new Promise((e,n)=>{Me(this,Wu,e,"f"),Me(this,dl,n,"f")})),ee(this,Yu,"f").catch(()=>{}),ee(this,hl,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},ee(this,Dg,"m",lC).bind(this))},0)}_connected(){this.ended||(ee(this,Xu,"f").call(this),this._emit("connect"))}get ended(){return ee(this,pl,"f")}get errored(){return ee(this,Pf,"f")}get aborted(){return ee(this,Bf,"f")}abort(){this.controller.abort()}on(e,n){return(ee(this,ds,"f")[e]||(ee(this,ds,"f")[e]=[])).push({listener:n}),this}off(e,n){const r=ee(this,ds,"f")[e];if(!r)return this;const s=r.findIndex(a=>a.listener===n);return s>=0&&r.splice(s,1),this}once(e,n){return(ee(this,ds,"f")[e]||(ee(this,ds,"f")[e]=[])).push({listener:n,once:!0}),this}emitted(e){return new Promise((n,r)=>{Me(this,Oa,!0),e!=="error"&&this.once("error",r),this.once(e,n)})}async done(){Me(this,Oa,!0),await ee(this,hl,"f")}_emit(e,...n){if(ee(this,pl,"f"))return;e==="end"&&(Me(this,pl,!0),ee(this,Wu,"f").call(this));const r=ee(this,ds,"f")[e];if(r&&(ee(this,ds,"f")[e]=r.filter(s=>!s.once),r.forEach(({listener:s})=>s(...n))),e==="abort"){const s=n[0];!ee(this,Oa,"f")&&!r?.length&&Promise.reject(s),ee(this,fl,"f").call(this,s),ee(this,dl,"f").call(this,s),this._emit("end");return}if(e==="error"){const s=n[0];!ee(this,Oa,"f")&&!r?.length&&Promise.reject(s),ee(this,fl,"f").call(this,s),ee(this,dl,"f").call(this,s),this._emit("end")}}_emitFinal(){}}Yu=new WeakMap,Xu=new WeakMap,fl=new WeakMap,hl=new WeakMap,Wu=new WeakMap,dl=new WeakMap,ds=new WeakMap,pl=new WeakMap,Pf=new WeakMap,Bf=new WeakMap,Oa=new WeakMap,Dg=new WeakSet,lC=function(e){if(Me(this,Pf,!0),e instanceof Error&&e.name==="AbortError"&&(e=new vr),e instanceof vr)return Me(this,Bf,!0),this._emit("abort",e);if(e instanceof Ce)return this._emit("error",e);if(e instanceof Error){const n=new Ce(e.message);return n.cause=e,this._emit("error",n)}return this._emit("error",new Ce(String(e)))};function s8(t){return typeof t.parse=="function"}var En,Lg,$f,jg,zg,Pg,cC,uC;const i8=10;class fC extends Fy{constructor(){super(...arguments),En.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){this._chatCompletions.push(e),this._emit("chatCompletion",e);const n=e.choices[0]?.message;return n&&this._addMessage(n),e}_addMessage(e,n=!0){if("content"in e||(e.content=null),this.messages.push(e),n){if(this._emit("message",e),oC(e)&&e.content)this._emit("functionToolCallResult",e.content);else if(zf(e)&&e.tool_calls)for(const r of e.tool_calls)r.type==="function"&&this._emit("functionToolCall",r.function)}}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new Ce("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),ee(this,En,"m",Lg).call(this)}async finalMessage(){return await this.done(),ee(this,En,"m",$f).call(this)}async finalFunctionToolCall(){return await this.done(),ee(this,En,"m",jg).call(this)}async finalFunctionToolCallResult(){return await this.done(),ee(this,En,"m",zg).call(this)}async totalUsage(){return await this.done(),ee(this,En,"m",Pg).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const n=ee(this,En,"m",$f).call(this);n&&this._emit("finalMessage",n);const r=ee(this,En,"m",Lg).call(this);r&&this._emit("finalContent",r);const s=ee(this,En,"m",jg).call(this);s&&this._emit("finalFunctionToolCall",s);const a=ee(this,En,"m",zg).call(this);a!=null&&this._emit("finalFunctionToolCallResult",a),this._chatCompletions.some(l=>l.usage)&&this._emit("totalUsage",ee(this,En,"m",Pg).call(this))}async _createChatCompletion(e,n,r){const s=r?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),ee(this,En,"m",cC).call(this,n);const a=await e.chat.completions.create({...n,stream:!1},{...r,signal:this.controller.signal});return this._connected(),this._addChatCompletion(qy(a,n))}async _runChatCompletion(e,n,r){for(const s of n.messages)this._addMessage(s,!1);return await this._createChatCompletion(e,n,r)}async _runTools(e,n,r){const s="tool",{tool_choice:a="auto",stream:l,...u}=n,f=typeof a!="string"&&a.type==="function"&&a?.function?.name,{maxChatCompletions:h=i8}=r||{},m=n.tools.map(g=>{if(ec(g)){if(!g.$callback)throw new Ce("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:g.$callback,name:g.function.name,description:g.function.description||"",parameters:g.function.parameters,parse:g.$parseRaw,strict:!0}}}return g}),p={};for(const g of m)g.type==="function"&&(p[g.function.name||g.function.function.name]=g.function);const y="tools"in n?m.map(g=>g.type==="function"?{type:"function",function:{name:g.function.name||g.function.function.name,parameters:g.function.parameters,description:g.function.description,strict:g.function.strict}}:g):void 0;for(const g of n.messages)this._addMessage(g,!1);for(let g=0;g<h;++g){const x=(await this._createChatCompletion(e,{...u,tool_choice:a,tools:y,messages:[...this.messages]},r)).choices[0]?.message;if(!x)throw new Ce("missing message in ChatCompletion response");if(!x.tool_calls?.length)return;for(const E of x.tool_calls){if(E.type!=="function")continue;const S=E.id,{name:C,arguments:T}=E.function,L=p[C];if(L){if(f&&f!==C){const K=`Invalid tool_call: ${JSON.stringify(C)}. ${JSON.stringify(f)} requested. Please try again`;this._addMessage({role:s,tool_call_id:S,content:K});continue}}else{const K=`Invalid tool_call: ${JSON.stringify(C)}. Available options are: ${Object.keys(p).map(G=>JSON.stringify(G)).join(", ")}. Please try again`;this._addMessage({role:s,tool_call_id:S,content:K});continue}let D;try{D=s8(L)?await L.parse(T):T}catch(K){const G=K instanceof Error?K.message:String(K);this._addMessage({role:s,tool_call_id:S,content:G});continue}const N=await L.function(D,this),B=ee(this,En,"m",uC).call(this,N);if(this._addMessage({role:s,tool_call_id:S,content:B}),f)return}}}}En=new WeakSet,Lg=function(){return ee(this,En,"m",$f).call(this).content??null},$f=function(){let e=this.messages.length;for(;e-- >0;){const n=this.messages[e];if(zf(n))return{...n,content:n.content??null,refusal:n.refusal??null}}throw new Ce("stream ended without producing a ChatCompletionMessage with role=assistant")},jg=function(){for(let e=this.messages.length-1;e>=0;e--){const n=this.messages[e];if(zf(n)&&n?.tool_calls?.length)return n.tool_calls.filter(r=>r.type==="function").at(-1)?.function}},zg=function(){for(let e=this.messages.length-1;e>=0;e--){const n=this.messages[e];if(oC(n)&&n.content!=null&&typeof n.content=="string"&&this.messages.some(r=>r.role==="assistant"&&r.tool_calls?.some(s=>s.type==="function"&&s.id===n.tool_call_id)))return n.content}},Pg=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:n}of this._chatCompletions)n&&(e.completion_tokens+=n.completion_tokens,e.prompt_tokens+=n.prompt_tokens,e.total_tokens+=n.total_tokens);return e},cC=function(e){if(e.n!=null&&e.n>1)throw new Ce("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},uC=function(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)};class Vy extends fC{static runTools(e,n,r){const s=new Vy,a={...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"runTools"}};return s._run(()=>s._runTools(e,n,a)),s}_addMessage(e,n=!0){super._addMessage(e,n),zf(e)&&e.content&&this._emit("content",e.content)}}const hC=1,dC=2,pC=4,mC=8,gC=16,yC=32,_C=64,bC=128,vC=256,xC=bC|vC,wC=gC|yC|xC|_C,SC=hC|dC|wC,kC=pC|mC,a8=SC|kC,Jt={STR:hC,NUM:dC,ARR:pC,OBJ:mC,NULL:gC,BOOL:yC,NAN:_C,INFINITY:bC,MINUS_INFINITY:vC,INF:xC,SPECIAL:wC,ATOM:SC,COLLECTION:kC,ALL:a8};class o8 extends Error{}class l8 extends Error{}function c8(t,e=Jt.ALL){if(typeof t!="string")throw new TypeError(`expecting str, got ${typeof t}`);if(!t.trim())throw new Error(`${t} is empty`);return u8(t.trim(),e)}const u8=(t,e)=>{const n=t.length;let r=0;const s=y=>{throw new o8(`${y} at position ${r}`)},a=y=>{throw new l8(`${y} at position ${r}`)},l=()=>(p(),r>=n&&s("Unexpected end of input"),t[r]==='"'?u():t[r]==="{"?f():t[r]==="["?h():t.substring(r,r+4)==="null"||Jt.NULL&e&&n-r<4&&"null".startsWith(t.substring(r))?(r+=4,null):t.substring(r,r+4)==="true"||Jt.BOOL&e&&n-r<4&&"true".startsWith(t.substring(r))?(r+=4,!0):t.substring(r,r+5)==="false"||Jt.BOOL&e&&n-r<5&&"false".startsWith(t.substring(r))?(r+=5,!1):t.substring(r,r+8)==="Infinity"||Jt.INFINITY&e&&n-r<8&&"Infinity".startsWith(t.substring(r))?(r+=8,1/0):t.substring(r,r+9)==="-Infinity"||Jt.MINUS_INFINITY&e&&1<n-r&&n-r<9&&"-Infinity".startsWith(t.substring(r))?(r+=9,-1/0):t.substring(r,r+3)==="NaN"||Jt.NAN&e&&n-r<3&&"NaN".startsWith(t.substring(r))?(r+=3,NaN):m()),u=()=>{const y=r;let g=!1;for(r++;r<n&&(t[r]!=='"'||g&&t[r-1]==="\\");)g=t[r]==="\\"?!g:!1,r++;if(t.charAt(r)=='"')try{return JSON.parse(t.substring(y,++r-Number(g)))}catch(v){a(String(v))}else if(Jt.STR&e)try{return JSON.parse(t.substring(y,r-Number(g))+'"')}catch{return JSON.parse(t.substring(y,t.lastIndexOf("\\"))+'"')}s("Unterminated string literal")},f=()=>{r++,p();const y={};try{for(;t[r]!=="}";){if(p(),r>=n&&Jt.OBJ&e)return y;const g=u();p(),r++;try{const v=l();Object.defineProperty(y,g,{value:v,writable:!0,enumerable:!0,configurable:!0})}catch(v){if(Jt.OBJ&e)return y;throw v}p(),t[r]===","&&r++}}catch{if(Jt.OBJ&e)return y;s("Expected '}' at end of object")}return r++,y},h=()=>{r++;const y=[];try{for(;t[r]!=="]";)y.push(l()),p(),t[r]===","&&r++}catch{if(Jt.ARR&e)return y;s("Expected ']' at end of array")}return r++,y},m=()=>{if(r===0){t==="-"&&Jt.NUM&e&&s("Not sure what '-' is");try{return JSON.parse(t)}catch(g){if(Jt.NUM&e)try{return t[t.length-1]==="."?JSON.parse(t.substring(0,t.lastIndexOf("."))):JSON.parse(t.substring(0,t.lastIndexOf("e")))}catch{}a(String(g))}}const y=r;for(t[r]==="-"&&r++;t[r]&&!",]}".includes(t[r]);)r++;r==n&&!(Jt.NUM&e)&&s("Unterminated number literal");try{return JSON.parse(t.substring(y,r))}catch{t.substring(y,r)==="-"&&Jt.NUM&e&&s("Not sure what '-' is");try{return JSON.parse(t.substring(y,t.lastIndexOf("e")))}catch(v){a(String(v))}}},p=()=>{for(;r<n&&` 
\r	`.includes(t[r]);)r++};return l()},Aw=t=>c8(t,Jt.ALL^Jt.NUM);var Bt,hs,ka,Vs,bm,Ou,vm,xm,wm,Nu,Sm,Rw;class Bl extends fC{constructor(e){super(),Bt.add(this),hs.set(this,void 0),ka.set(this,void 0),Vs.set(this,void 0),Me(this,hs,e),Me(this,ka,[])}get currentChatCompletionSnapshot(){return ee(this,Vs,"f")}static fromReadableStream(e){const n=new Bl(null);return n._run(()=>n._fromReadableStream(e)),n}static createChatCompletion(e,n,r){const s=new Bl(n);return s._run(()=>s._runChatCompletion(e,{...n,stream:!0},{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),s}async _createChatCompletion(e,n,r){super._createChatCompletion;const s=r?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),ee(this,Bt,"m",bm).call(this);const a=await e.chat.completions.create({...n,stream:!0},{...r,signal:this.controller.signal});this._connected();for await(const l of a)ee(this,Bt,"m",vm).call(this,l);if(a.controller.signal?.aborted)throw new vr;return this._addChatCompletion(ee(this,Bt,"m",Nu).call(this))}async _fromReadableStream(e,n){const r=n?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),ee(this,Bt,"m",bm).call(this),this._connected();const s=$r.fromReadableStream(e,this.controller);let a;for await(const l of s)a&&a!==l.id&&this._addChatCompletion(ee(this,Bt,"m",Nu).call(this)),ee(this,Bt,"m",vm).call(this,l),a=l.id;if(s.controller.signal?.aborted)throw new vr;return this._addChatCompletion(ee(this,Bt,"m",Nu).call(this))}[(hs=new WeakMap,ka=new WeakMap,Vs=new WeakMap,Bt=new WeakSet,bm=function(){this.ended||Me(this,Vs,void 0)},Ou=function(n){let r=ee(this,ka,"f")[n.index];return r||(r={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},ee(this,ka,"f")[n.index]=r,r)},vm=function(n){if(this.ended)return;const r=ee(this,Bt,"m",Rw).call(this,n);this._emit("chunk",n,r);for(const s of n.choices){const a=r.choices[s.index];s.delta.content!=null&&a.message?.role==="assistant"&&a.message?.content&&(this._emit("content",s.delta.content,a.message.content),this._emit("content.delta",{delta:s.delta.content,snapshot:a.message.content,parsed:a.message.parsed})),s.delta.refusal!=null&&a.message?.role==="assistant"&&a.message?.refusal&&this._emit("refusal.delta",{delta:s.delta.refusal,snapshot:a.message.refusal}),s.logprobs?.content!=null&&a.message?.role==="assistant"&&this._emit("logprobs.content.delta",{content:s.logprobs?.content,snapshot:a.logprobs?.content??[]}),s.logprobs?.refusal!=null&&a.message?.role==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:s.logprobs?.refusal,snapshot:a.logprobs?.refusal??[]});const l=ee(this,Bt,"m",Ou).call(this,a);a.finish_reason&&(ee(this,Bt,"m",wm).call(this,a),l.current_tool_call_index!=null&&ee(this,Bt,"m",xm).call(this,a,l.current_tool_call_index));for(const u of s.delta.tool_calls??[])l.current_tool_call_index!==u.index&&(ee(this,Bt,"m",wm).call(this,a),l.current_tool_call_index!=null&&ee(this,Bt,"m",xm).call(this,a,l.current_tool_call_index)),l.current_tool_call_index=u.index;for(const u of s.delta.tool_calls??[]){const f=a.message.tool_calls?.[u.index];f?.type&&(f?.type==="function"?this._emit("tool_calls.function.arguments.delta",{name:f.function?.name,index:u.index,arguments:f.function.arguments,parsed_arguments:f.function.parsed_arguments,arguments_delta:u.function?.arguments??""}):(f?.type,void 0))}}},xm=function(n,r){if(ee(this,Bt,"m",Ou).call(this,n).done_tool_calls.has(r))return;const a=n.message.tool_calls?.[r];if(!a)throw new Error("no tool call snapshot");if(!a.type)throw new Error("tool call snapshot missing `type`");if(a.type==="function"){const l=ee(this,hs,"f")?.tools?.find(u=>jf(u)&&u.function.name===a.function.name);this._emit("tool_calls.function.arguments.done",{name:a.function.name,index:r,arguments:a.function.arguments,parsed_arguments:ec(l)?l.$parseRaw(a.function.arguments):l?.function.strict?JSON.parse(a.function.arguments):null})}else a.type},wm=function(n){const r=ee(this,Bt,"m",Ou).call(this,n);if(n.message.content&&!r.content_done){r.content_done=!0;const s=ee(this,Bt,"m",Sm).call(this);this._emit("content.done",{content:n.message.content,parsed:s?s.$parseRaw(n.message.content):null})}n.message.refusal&&!r.refusal_done&&(r.refusal_done=!0,this._emit("refusal.done",{refusal:n.message.refusal})),n.logprobs?.content&&!r.logprobs_content_done&&(r.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:n.logprobs.content})),n.logprobs?.refusal&&!r.logprobs_refusal_done&&(r.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:n.logprobs.refusal}))},Nu=function(){if(this.ended)throw new Ce("stream has ended, this shouldn't happen");const n=ee(this,Vs,"f");if(!n)throw new Ce("request ended without sending any chunks");return Me(this,Vs,void 0),Me(this,ka,[]),f8(n,ee(this,hs,"f"))},Sm=function(){const n=ee(this,hs,"f")?.response_format;return Uy(n)?n:null},Rw=function(n){var r,s,a,l;let u=ee(this,Vs,"f");const{choices:f,...h}=n;u?Object.assign(u,h):u=Me(this,Vs,{...h,choices:[]});for(const{delta:m,finish_reason:p,index:y,logprobs:g=null,...v}of n.choices){let x=u.choices[y];if(x||(x=u.choices[y]={finish_reason:p,index:y,message:{},logprobs:g,...v}),g)if(!x.logprobs)x.logprobs=Object.assign({},g);else{const{content:N,refusal:B,...K}=g;Object.assign(x.logprobs,K),N&&((r=x.logprobs).content??(r.content=[]),x.logprobs.content.push(...N)),B&&((s=x.logprobs).refusal??(s.refusal=[]),x.logprobs.refusal.push(...B))}if(p&&(x.finish_reason=p,ee(this,hs,"f")&&iC(ee(this,hs,"f")))){if(p==="length")throw new $E;if(p==="content_filter")throw new UE}if(Object.assign(x,v),!m)continue;const{content:E,refusal:S,function_call:C,role:T,tool_calls:L,...D}=m;if(Object.assign(x.message,D),S&&(x.message.refusal=(x.message.refusal||"")+S),T&&(x.message.role=T),C&&(x.message.function_call?(C.name&&(x.message.function_call.name=C.name),C.arguments&&((a=x.message.function_call).arguments??(a.arguments=""),x.message.function_call.arguments+=C.arguments)):x.message.function_call=C),E&&(x.message.content=(x.message.content||"")+E,!x.message.refusal&&ee(this,Bt,"m",Sm).call(this)&&(x.message.parsed=Aw(x.message.content))),L){x.message.tool_calls||(x.message.tool_calls=[]);for(const{index:N,id:B,type:K,function:G,...j}of L){const J=(l=x.message.tool_calls)[N]??(l[N]={});Object.assign(J,j),B&&(J.id=B),K&&(J.type=K),G&&(J.function??(J.function={name:G.name??"",arguments:""})),G?.name&&(J.function.name=G.name),G?.arguments&&(J.function.arguments+=G.arguments,n8(ee(this,hs,"f"),J)&&(J.function.parsed_arguments=Aw(J.function.arguments)))}}}return u},Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("chunk",s=>{const a=n.shift();a?a.resolve(s):e.push(s)}),this.on("end",()=>{r=!0;for(const s of n)s.resolve(void 0);n.length=0}),this.on("abort",s=>{r=!0;for(const a of n)a.reject(s);n.length=0}),this.on("error",s=>{r=!0;for(const a of n)a.reject(s);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((a,l)=>n.push({resolve:a,reject:l})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new $r(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function f8(t,e){const{id:n,choices:r,created:s,model:a,system_fingerprint:l,...u}=t,f={...u,id:n,choices:r.map(({message:h,finish_reason:m,index:p,logprobs:y,...g})=>{if(!m)throw new Ce(`missing finish_reason for choice ${p}`);const{content:v=null,function_call:x,tool_calls:E,...S}=h,C=h.role;if(!C)throw new Ce(`missing role for choice ${p}`);if(x){const{arguments:T,name:L}=x;if(T==null)throw new Ce(`missing function_call.arguments for choice ${p}`);if(!L)throw new Ce(`missing function_call.name for choice ${p}`);return{...g,message:{content:v,function_call:{arguments:T,name:L},role:C,refusal:h.refusal??null},finish_reason:m,index:p,logprobs:y}}return E?{...g,index:p,finish_reason:m,logprobs:y,message:{...S,role:C,content:v,refusal:h.refusal??null,tool_calls:E.map((T,L)=>{const{function:D,type:N,id:B,...K}=T,{arguments:G,name:j,...J}=D||{};if(B==null)throw new Ce(`missing choices[${p}].tool_calls[${L}].id
${Iu(t)}`);if(N==null)throw new Ce(`missing choices[${p}].tool_calls[${L}].type
${Iu(t)}`);if(j==null)throw new Ce(`missing choices[${p}].tool_calls[${L}].function.name
${Iu(t)}`);if(G==null)throw new Ce(`missing choices[${p}].tool_calls[${L}].function.arguments
${Iu(t)}`);return{...K,id:B,type:N,function:{...J,name:j,arguments:G}}})}}:{...g,message:{...S,content:v,role:C,refusal:h.refusal??null},finish_reason:m,index:p,logprobs:y}}),created:s,model:a,object:"chat.completion",...l?{system_fingerprint:l}:{}};return W6(f,e)}function Iu(t){return JSON.stringify(t)}class Uf extends Bl{static fromReadableStream(e){const n=new Uf(null);return n._run(()=>n._fromReadableStream(e)),n}static runTools(e,n,r){const s=new Uf(n),a={...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"runTools"}};return s._run(()=>s._runTools(e,n,a)),s}}let Hy=class extends ke{constructor(){super(...arguments),this.messages=new sC(this._client)}create(e,n){return this._client.post("/chat/completions",{body:e,...n,stream:e.stream??!1})}retrieve(e,n){return this._client.get(he`/chat/completions/${e}`,n)}update(e,n,r){return this._client.post(he`/chat/completions/${e}`,{body:n,...r})}list(e={},n){return this._client.getAPIList("/chat/completions",zt,{query:e,...n})}delete(e,n){return this._client.delete(he`/chat/completions/${e}`,n)}parse(e,n){return r8(e.tools),this._client.chat.completions.create(e,{...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"chat.completions.parse"}})._thenUnwrap(r=>qy(r,e))}runTools(e,n){return e.stream?Uf.runTools(this._client,e,n):Vy.runTools(this._client,e,n)}stream(e,n){return Bl.createChatCompletion(this._client,e,n)}};Hy.Messages=sC;class Gy extends ke{constructor(){super(...arguments),this.completions=new Hy(this._client)}}Gy.Completions=Hy;const EC=Symbol("brand.privateNullableHeaders");function*h8(t){if(!t)return;if(EC in t){const{values:r,nulls:s}=t;yield*r.entries();for(const a of s)yield[a,null];return}let e=!1,n;t instanceof Headers?n=t.entries():dw(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let r of n){const s=r[0];if(typeof s!="string")throw new TypeError("expected header name to be a string");const a=dw(r[1])?r[1]:[r[1]];let l=!1;for(const u of a)u!==void 0&&(e&&!l&&(l=!0,yield[s,null]),yield[s,u])}}const be=t=>{const e=new Headers,n=new Set;for(const r of t){const s=new Set;for(const[a,l]of h8(r)){const u=a.toLowerCase();s.has(u)||(e.delete(a),s.add(u)),l===null?(e.delete(a),n.add(u)):(e.append(a,l),n.delete(u))}}return{[EC]:!0,values:e,nulls:n}};class CC extends ke{create(e,n){return this._client.post("/audio/speech",{body:e,...n,headers:be([{Accept:"application/octet-stream"},n?.headers]),__binaryResponse:!0})}}class TC extends ke{create(e,n){return this._client.post("/audio/transcriptions",Ii({body:e,...n,stream:e.stream??!1,__metadata:{model:e.model}},this._client))}}class AC extends ke{create(e,n){return this._client.post("/audio/translations",Ii({body:e,...n,__metadata:{model:e.model}},this._client))}}class tc extends ke{constructor(){super(...arguments),this.transcriptions=new TC(this._client),this.translations=new AC(this._client),this.speech=new CC(this._client)}}tc.Transcriptions=TC;tc.Translations=AC;tc.Speech=CC;class RC extends ke{create(e,n){return this._client.post("/batches",{body:e,...n})}retrieve(e,n){return this._client.get(he`/batches/${e}`,n)}list(e={},n){return this._client.getAPIList("/batches",zt,{query:e,...n})}cancel(e,n){return this._client.post(he`/batches/${e}/cancel`,n)}}class OC extends ke{create(e,n){return this._client.post("/assistants",{body:e,...n,headers:be([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}retrieve(e,n){return this._client.get(he`/assistants/${e}`,{...n,headers:be([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}update(e,n,r){return this._client.post(he`/assistants/${e}`,{body:n,...r,headers:be([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(e={},n){return this._client.getAPIList("/assistants",zt,{query:e,...n,headers:be([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}delete(e,n){return this._client.delete(he`/assistants/${e}`,{...n,headers:be([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}}let NC=class extends ke{create(e,n){return this._client.post("/realtime/sessions",{body:e,...n,headers:be([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}};class IC extends ke{create(e,n){return this._client.post("/realtime/transcription_sessions",{body:e,...n,headers:be([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}}let dh=class extends ke{constructor(){super(...arguments),this.sessions=new NC(this._client),this.transcriptionSessions=new IC(this._client)}};dh.Sessions=NC;dh.TranscriptionSessions=IC;class MC extends ke{create(e,n){return this._client.post("/chatkit/sessions",{body:e,...n,headers:be([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}cancel(e,n){return this._client.post(he`/chatkit/sessions/${e}/cancel`,{...n,headers:be([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}}let DC=class extends ke{retrieve(e,n){return this._client.get(he`/chatkit/threads/${e}`,{...n,headers:be([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}list(e={},n){return this._client.getAPIList("/chatkit/threads",Lf,{query:e,...n,headers:be([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}delete(e,n){return this._client.delete(he`/chatkit/threads/${e}`,{...n,headers:be([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}listItems(e,n={},r){return this._client.getAPIList(he`/chatkit/threads/${e}/items`,Lf,{query:n,...r,headers:be([{"OpenAI-Beta":"chatkit_beta=v1"},r?.headers])})}};class ph extends ke{constructor(){super(...arguments),this.sessions=new MC(this._client),this.threads=new DC(this._client)}}ph.Sessions=MC;ph.Threads=DC;class LC extends ke{create(e,n,r){return this._client.post(he`/threads/${e}/messages`,{body:n,...r,headers:be([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}retrieve(e,n,r){const{thread_id:s}=n;return this._client.get(he`/threads/${s}/messages/${e}`,{...r,headers:be([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}update(e,n,r){const{thread_id:s,...a}=n;return this._client.post(he`/threads/${s}/messages/${e}`,{body:a,...r,headers:be([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(e,n={},r){return this._client.getAPIList(he`/threads/${e}/messages`,zt,{query:n,...r,headers:be([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}delete(e,n,r){const{thread_id:s}=n;return this._client.delete(he`/threads/${s}/messages/${e}`,{...r,headers:be([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}}class jC extends ke{retrieve(e,n,r){const{thread_id:s,run_id:a,...l}=n;return this._client.get(he`/threads/${s}/runs/${a}/steps/${e}`,{query:l,...r,headers:be([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(e,n,r){const{thread_id:s,...a}=n;return this._client.getAPIList(he`/threads/${s}/runs/${e}/steps`,zt,{query:a,...r,headers:be([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}}const d8=t=>{if(typeof Buffer<"u"){const e=Buffer.from(t,"base64");return Array.from(new Float32Array(e.buffer,e.byteOffset,e.length/Float32Array.BYTES_PER_ELEMENT))}else{const e=atob(t),n=e.length,r=new Uint8Array(n);for(let s=0;s<n;s++)r[s]=e.charCodeAt(s);return Array.from(new Float32Array(r.buffer))}};var p8={};const Ea=t=>{if(typeof globalThis.process<"u")return p8?.[t]?.trim()??void 0;if(typeof globalThis.Deno<"u")return globalThis.Deno.env?.get?.(t)?.trim()};var cn,Ri,Bg,Br,ef,Tr,Oi,ja,Ci,qf,tr,tf,nf,kl,ml,gl,Ow,Nw,Iw,Mw,Dw,Lw,jw;class El extends Fy{constructor(){super(...arguments),cn.add(this),Bg.set(this,[]),Br.set(this,{}),ef.set(this,{}),Tr.set(this,void 0),Oi.set(this,void 0),ja.set(this,void 0),Ci.set(this,void 0),qf.set(this,void 0),tr.set(this,void 0),tf.set(this,void 0),nf.set(this,void 0),kl.set(this,void 0)}[(Bg=new WeakMap,Br=new WeakMap,ef=new WeakMap,Tr=new WeakMap,Oi=new WeakMap,ja=new WeakMap,Ci=new WeakMap,qf=new WeakMap,tr=new WeakMap,tf=new WeakMap,nf=new WeakMap,kl=new WeakMap,cn=new WeakSet,Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("event",s=>{const a=n.shift();a?a.resolve(s):e.push(s)}),this.on("end",()=>{r=!0;for(const s of n)s.resolve(void 0);n.length=0}),this.on("abort",s=>{r=!0;for(const a of n)a.reject(s);n.length=0}),this.on("error",s=>{r=!0;for(const a of n)a.reject(s);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((a,l)=>n.push({resolve:a,reject:l})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){const n=new Ri;return n._run(()=>n._fromReadableStream(e)),n}async _fromReadableStream(e,n){const r=n?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),this._connected();const s=$r.fromReadableStream(e,this.controller);for await(const a of s)ee(this,cn,"m",ml).call(this,a);if(s.controller.signal?.aborted)throw new vr;return this._addRun(ee(this,cn,"m",gl).call(this))}toReadableStream(){return new $r(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,n,r,s){const a=new Ri;return a._run(()=>a._runToolAssistantStream(e,n,r,{...s,headers:{...s?.headers,"X-Stainless-Helper-Method":"stream"}})),a}async _createToolAssistantStream(e,n,r,s){const a=s?.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort()));const l={...r,stream:!0},u=await e.submitToolOutputs(n,l,{...s,signal:this.controller.signal});this._connected();for await(const f of u)ee(this,cn,"m",ml).call(this,f);if(u.controller.signal?.aborted)throw new vr;return this._addRun(ee(this,cn,"m",gl).call(this))}static createThreadAssistantStream(e,n,r){const s=new Ri;return s._run(()=>s._threadAssistantStream(e,n,{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),s}static createAssistantStream(e,n,r,s){const a=new Ri;return a._run(()=>a._runAssistantStream(e,n,r,{...s,headers:{...s?.headers,"X-Stainless-Helper-Method":"stream"}})),a}currentEvent(){return ee(this,tf,"f")}currentRun(){return ee(this,nf,"f")}currentMessageSnapshot(){return ee(this,Tr,"f")}currentRunStepSnapshot(){return ee(this,kl,"f")}async finalRunSteps(){return await this.done(),Object.values(ee(this,Br,"f"))}async finalMessages(){return await this.done(),Object.values(ee(this,ef,"f"))}async finalRun(){if(await this.done(),!ee(this,Oi,"f"))throw Error("Final run was not received.");return ee(this,Oi,"f")}async _createThreadAssistantStream(e,n,r){const s=r?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort()));const a={...n,stream:!0},l=await e.createAndRun(a,{...r,signal:this.controller.signal});this._connected();for await(const u of l)ee(this,cn,"m",ml).call(this,u);if(l.controller.signal?.aborted)throw new vr;return this._addRun(ee(this,cn,"m",gl).call(this))}async _createAssistantStream(e,n,r,s){const a=s?.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort()));const l={...r,stream:!0},u=await e.create(n,l,{...s,signal:this.controller.signal});this._connected();for await(const f of u)ee(this,cn,"m",ml).call(this,f);if(u.controller.signal?.aborted)throw new vr;return this._addRun(ee(this,cn,"m",gl).call(this))}static accumulateDelta(e,n){for(const[r,s]of Object.entries(n)){if(!e.hasOwnProperty(r)){e[r]=s;continue}let a=e[r];if(a==null){e[r]=s;continue}if(r==="index"||r==="type"){e[r]=s;continue}if(typeof a=="string"&&typeof s=="string")a+=s;else if(typeof a=="number"&&typeof s=="number")a+=s;else if(gm(a)&&gm(s))a=this.accumulateDelta(a,s);else if(Array.isArray(a)&&Array.isArray(s)){if(a.every(l=>typeof l=="string"||typeof l=="number")){a.push(...s);continue}for(const l of s){if(!gm(l))throw new Error(`Expected array delta entry to be an object but got: ${l}`);const u=l.index;if(u==null)throw console.error(l),new Error("Expected array delta entry to have an `index` property");if(typeof u!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${u}`);const f=a[u];f==null?a.push(l):a[u]=this.accumulateDelta(f,l)}continue}else throw Error(`Unhandled record type: ${r}, deltaValue: ${s}, accValue: ${a}`);e[r]=a}return e}_addRun(e){return e}async _threadAssistantStream(e,n,r){return await this._createThreadAssistantStream(n,e,r)}async _runAssistantStream(e,n,r,s){return await this._createAssistantStream(n,e,r,s)}async _runToolAssistantStream(e,n,r,s){return await this._createToolAssistantStream(n,e,r,s)}}Ri=El,ml=function(e){if(!this.ended)switch(Me(this,tf,e),ee(this,cn,"m",Iw).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":ee(this,cn,"m",jw).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":ee(this,cn,"m",Nw).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":ee(this,cn,"m",Ow).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},gl=function(){if(this.ended)throw new Ce("stream has ended, this shouldn't happen");if(!ee(this,Oi,"f"))throw Error("Final run has not been received");return ee(this,Oi,"f")},Ow=function(e){const[n,r]=ee(this,cn,"m",Dw).call(this,e,ee(this,Tr,"f"));Me(this,Tr,n),ee(this,ef,"f")[n.id]=n;for(const s of r){const a=n.content[s.index];a?.type=="text"&&this._emit("textCreated",a.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,n),e.data.delta.content)for(const s of e.data.delta.content){if(s.type=="text"&&s.text){let a=s.text,l=n.content[s.index];if(l&&l.type=="text")this._emit("textDelta",a,l.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(s.index!=ee(this,ja,"f")){if(ee(this,Ci,"f"))switch(ee(this,Ci,"f").type){case"text":this._emit("textDone",ee(this,Ci,"f").text,ee(this,Tr,"f"));break;case"image_file":this._emit("imageFileDone",ee(this,Ci,"f").image_file,ee(this,Tr,"f"));break}Me(this,ja,s.index)}Me(this,Ci,n.content[s.index])}break;case"thread.message.completed":case"thread.message.incomplete":if(ee(this,ja,"f")!==void 0){const s=e.data.content[ee(this,ja,"f")];if(s)switch(s.type){case"image_file":this._emit("imageFileDone",s.image_file,ee(this,Tr,"f"));break;case"text":this._emit("textDone",s.text,ee(this,Tr,"f"));break}}ee(this,Tr,"f")&&this._emit("messageDone",e.data),Me(this,Tr,void 0)}},Nw=function(e){const n=ee(this,cn,"m",Mw).call(this,e);switch(Me(this,kl,n),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":const r=e.data.delta;if(r.step_details&&r.step_details.type=="tool_calls"&&r.step_details.tool_calls&&n.step_details.type=="tool_calls")for(const a of r.step_details.tool_calls)a.index==ee(this,qf,"f")?this._emit("toolCallDelta",a,n.step_details.tool_calls[a.index]):(ee(this,tr,"f")&&this._emit("toolCallDone",ee(this,tr,"f")),Me(this,qf,a.index),Me(this,tr,n.step_details.tool_calls[a.index]),ee(this,tr,"f")&&this._emit("toolCallCreated",ee(this,tr,"f")));this._emit("runStepDelta",e.data.delta,n);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":Me(this,kl,void 0),e.data.step_details.type=="tool_calls"&&ee(this,tr,"f")&&(this._emit("toolCallDone",ee(this,tr,"f")),Me(this,tr,void 0)),this._emit("runStepDone",e.data,n);break}},Iw=function(e){ee(this,Bg,"f").push(e),this._emit("event",e)},Mw=function(e){switch(e.event){case"thread.run.step.created":return ee(this,Br,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let n=ee(this,Br,"f")[e.data.id];if(!n)throw Error("Received a RunStepDelta before creation of a snapshot");let r=e.data;if(r.delta){const s=Ri.accumulateDelta(n,r.delta);ee(this,Br,"f")[e.data.id]=s}return ee(this,Br,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":ee(this,Br,"f")[e.data.id]=e.data;break}if(ee(this,Br,"f")[e.data.id])return ee(this,Br,"f")[e.data.id];throw new Error("No snapshot available")},Dw=function(e,n){let r=[];switch(e.event){case"thread.message.created":return[e.data,r];case"thread.message.delta":if(!n)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let s=e.data;if(s.delta.content)for(const a of s.delta.content)if(a.index in n.content){let l=n.content[a.index];n.content[a.index]=ee(this,cn,"m",Lw).call(this,a,l)}else n.content[a.index]=a,r.push(a);return[n,r];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(n)return[n,r];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},Lw=function(e,n){return Ri.accumulateDelta(n,e)},jw=function(e){switch(Me(this,nf,e.data),e.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":case"thread.run.incomplete":Me(this,Oi,e.data),ee(this,tr,"f")&&(this._emit("toolCallDone",ee(this,tr,"f")),Me(this,tr,void 0));break}};let Ky=class extends ke{constructor(){super(...arguments),this.steps=new jC(this._client)}create(e,n,r){const{include:s,...a}=n;return this._client.post(he`/threads/${e}/runs`,{query:{include:s},body:a,...r,headers:be([{"OpenAI-Beta":"assistants=v2"},r?.headers]),stream:n.stream??!1})}retrieve(e,n,r){const{thread_id:s}=n;return this._client.get(he`/threads/${s}/runs/${e}`,{...r,headers:be([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}update(e,n,r){const{thread_id:s,...a}=n;return this._client.post(he`/threads/${s}/runs/${e}`,{body:a,...r,headers:be([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(e,n={},r){return this._client.getAPIList(he`/threads/${e}/runs`,zt,{query:n,...r,headers:be([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}cancel(e,n,r){const{thread_id:s}=n;return this._client.post(he`/threads/${s}/runs/${e}/cancel`,{...r,headers:be([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}async createAndPoll(e,n,r){const s=await this.create(e,n,r);return await this.poll(s.id,{thread_id:e},r)}createAndStream(e,n,r){return El.createAssistantStream(e,this._client.beta.threads.runs,n,r)}async poll(e,n,r){const s=be([r?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":r?.pollIntervalMs?.toString()??void 0}]);for(;;){const{data:a,response:l}=await this.retrieve(e,n,{...r,headers:{...r?.headers,...s}}).withResponse();switch(a.status){case"queued":case"in_progress":case"cancelling":let u=5e3;if(r?.pollIntervalMs)u=r.pollIntervalMs;else{const f=l.headers.get("openai-poll-after-ms");if(f){const h=parseInt(f);isNaN(h)||(u=h)}}await Wl(u);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return a}}}stream(e,n,r){return El.createAssistantStream(e,this._client.beta.threads.runs,n,r)}submitToolOutputs(e,n,r){const{thread_id:s,...a}=n;return this._client.post(he`/threads/${s}/runs/${e}/submit_tool_outputs`,{body:a,...r,headers:be([{"OpenAI-Beta":"assistants=v2"},r?.headers]),stream:n.stream??!1})}async submitToolOutputsAndPoll(e,n,r){const s=await this.submitToolOutputs(e,n,r);return await this.poll(s.id,n,r)}submitToolOutputsStream(e,n,r){return El.createToolAssistantStream(e,this._client.beta.threads.runs,n,r)}};Ky.Steps=jC;class mh extends ke{constructor(){super(...arguments),this.runs=new Ky(this._client),this.messages=new LC(this._client)}create(e={},n){return this._client.post("/threads",{body:e,...n,headers:be([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}retrieve(e,n){return this._client.get(he`/threads/${e}`,{...n,headers:be([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}update(e,n,r){return this._client.post(he`/threads/${e}`,{body:n,...r,headers:be([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}delete(e,n){return this._client.delete(he`/threads/${e}`,{...n,headers:be([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}createAndRun(e,n){return this._client.post("/threads/runs",{body:e,...n,headers:be([{"OpenAI-Beta":"assistants=v2"},n?.headers]),stream:e.stream??!1})}async createAndRunPoll(e,n){const r=await this.createAndRun(e,n);return await this.runs.poll(r.id,{thread_id:r.thread_id},n)}createAndRunStream(e,n){return El.createThreadAssistantStream(e,this._client.beta.threads,n)}}mh.Runs=Ky;mh.Messages=LC;class Xa extends ke{constructor(){super(...arguments),this.realtime=new dh(this._client),this.chatkit=new ph(this._client),this.assistants=new OC(this._client),this.threads=new mh(this._client)}}Xa.Realtime=dh;Xa.ChatKit=ph;Xa.Assistants=OC;Xa.Threads=mh;class zC extends ke{create(e,n){return this._client.post("/completions",{body:e,...n,stream:e.stream??!1})}}class PC extends ke{retrieve(e,n,r){const{container_id:s}=n;return this._client.get(he`/containers/${s}/files/${e}/content`,{...r,headers:be([{Accept:"application/binary"},r?.headers]),__binaryResponse:!0})}}let Zy=class extends ke{constructor(){super(...arguments),this.content=new PC(this._client)}create(e,n,r){return this._client.post(he`/containers/${e}/files`,Ii({body:n,...r},this._client))}retrieve(e,n,r){const{container_id:s}=n;return this._client.get(he`/containers/${s}/files/${e}`,r)}list(e,n={},r){return this._client.getAPIList(he`/containers/${e}/files`,zt,{query:n,...r})}delete(e,n,r){const{container_id:s}=n;return this._client.delete(he`/containers/${s}/files/${e}`,{...r,headers:be([{Accept:"*/*"},r?.headers])})}};Zy.Content=PC;class Qy extends ke{constructor(){super(...arguments),this.files=new Zy(this._client)}create(e,n){return this._client.post("/containers",{body:e,...n})}retrieve(e,n){return this._client.get(he`/containers/${e}`,n)}list(e={},n){return this._client.getAPIList("/containers",zt,{query:e,...n})}delete(e,n){return this._client.delete(he`/containers/${e}`,{...n,headers:be([{Accept:"*/*"},n?.headers])})}}Qy.Files=Zy;class BC extends ke{create(e,n,r){const{include:s,...a}=n;return this._client.post(he`/conversations/${e}/items`,{query:{include:s},body:a,...r})}retrieve(e,n,r){const{conversation_id:s,...a}=n;return this._client.get(he`/conversations/${s}/items/${e}`,{query:a,...r})}list(e,n={},r){return this._client.getAPIList(he`/conversations/${e}/items`,Lf,{query:n,...r})}delete(e,n,r){const{conversation_id:s}=n;return this._client.delete(he`/conversations/${s}/items/${e}`,r)}}class Jy extends ke{constructor(){super(...arguments),this.items=new BC(this._client)}create(e={},n){return this._client.post("/conversations",{body:e,...n})}retrieve(e,n){return this._client.get(he`/conversations/${e}`,n)}update(e,n,r){return this._client.post(he`/conversations/${e}`,{body:n,...r})}delete(e,n){return this._client.delete(he`/conversations/${e}`,n)}}Jy.Items=BC;class $C extends ke{create(e,n){const r=!!e.encoding_format;let s=r?e.encoding_format:"base64";r&&ln(this._client).debug("embeddings/user defined encoding_format:",e.encoding_format);const a=this._client.post("/embeddings",{body:{...e,encoding_format:s},...n});return r?a:(ln(this._client).debug("embeddings/decoding base64 embeddings from base64"),a._thenUnwrap(l=>(l&&l.data&&l.data.forEach(u=>{const f=u.embedding;u.embedding=d8(f)}),l)))}}class UC extends ke{retrieve(e,n,r){const{eval_id:s,run_id:a}=n;return this._client.get(he`/evals/${s}/runs/${a}/output_items/${e}`,r)}list(e,n,r){const{eval_id:s,...a}=n;return this._client.getAPIList(he`/evals/${s}/runs/${e}/output_items`,zt,{query:a,...r})}}class Yy extends ke{constructor(){super(...arguments),this.outputItems=new UC(this._client)}create(e,n,r){return this._client.post(he`/evals/${e}/runs`,{body:n,...r})}retrieve(e,n,r){const{eval_id:s}=n;return this._client.get(he`/evals/${s}/runs/${e}`,r)}list(e,n={},r){return this._client.getAPIList(he`/evals/${e}/runs`,zt,{query:n,...r})}delete(e,n,r){const{eval_id:s}=n;return this._client.delete(he`/evals/${s}/runs/${e}`,r)}cancel(e,n,r){const{eval_id:s}=n;return this._client.post(he`/evals/${s}/runs/${e}`,r)}}Yy.OutputItems=UC;class Xy extends ke{constructor(){super(...arguments),this.runs=new Yy(this._client)}create(e,n){return this._client.post("/evals",{body:e,...n})}retrieve(e,n){return this._client.get(he`/evals/${e}`,n)}update(e,n,r){return this._client.post(he`/evals/${e}`,{body:n,...r})}list(e={},n){return this._client.getAPIList("/evals",zt,{query:e,...n})}delete(e,n){return this._client.delete(he`/evals/${e}`,n)}}Xy.Runs=Yy;let qC=class extends ke{create(e,n){return this._client.post("/files",Ii({body:e,...n},this._client))}retrieve(e,n){return this._client.get(he`/files/${e}`,n)}list(e={},n){return this._client.getAPIList("/files",zt,{query:e,...n})}delete(e,n){return this._client.delete(he`/files/${e}`,n)}content(e,n){return this._client.get(he`/files/${e}/content`,{...n,headers:be([{Accept:"application/binary"},n?.headers]),__binaryResponse:!0})}async waitForProcessing(e,{pollInterval:n=5e3,maxWait:r=1800*1e3}={}){const s=new Set(["processed","error","deleted"]),a=Date.now();let l=await this.retrieve(e);for(;!l.status||!s.has(l.status);)if(await Wl(n),l=await this.retrieve(e),Date.now()-a>r)throw new zy({message:`Giving up on waiting for file ${e} to finish processing after ${r} milliseconds.`});return l}};class FC extends ke{}let VC=class extends ke{run(e,n){return this._client.post("/fine_tuning/alpha/graders/run",{body:e,...n})}validate(e,n){return this._client.post("/fine_tuning/alpha/graders/validate",{body:e,...n})}};class Wy extends ke{constructor(){super(...arguments),this.graders=new VC(this._client)}}Wy.Graders=VC;class HC extends ke{create(e,n,r){return this._client.getAPIList(he`/fine_tuning/checkpoints/${e}/permissions`,hh,{body:n,method:"post",...r})}retrieve(e,n={},r){return this._client.get(he`/fine_tuning/checkpoints/${e}/permissions`,{query:n,...r})}delete(e,n,r){const{fine_tuned_model_checkpoint:s}=n;return this._client.delete(he`/fine_tuning/checkpoints/${s}/permissions/${e}`,r)}}let e0=class extends ke{constructor(){super(...arguments),this.permissions=new HC(this._client)}};e0.Permissions=HC;class GC extends ke{list(e,n={},r){return this._client.getAPIList(he`/fine_tuning/jobs/${e}/checkpoints`,zt,{query:n,...r})}}class t0 extends ke{constructor(){super(...arguments),this.checkpoints=new GC(this._client)}create(e,n){return this._client.post("/fine_tuning/jobs",{body:e,...n})}retrieve(e,n){return this._client.get(he`/fine_tuning/jobs/${e}`,n)}list(e={},n){return this._client.getAPIList("/fine_tuning/jobs",zt,{query:e,...n})}cancel(e,n){return this._client.post(he`/fine_tuning/jobs/${e}/cancel`,n)}listEvents(e,n={},r){return this._client.getAPIList(he`/fine_tuning/jobs/${e}/events`,zt,{query:n,...r})}pause(e,n){return this._client.post(he`/fine_tuning/jobs/${e}/pause`,n)}resume(e,n){return this._client.post(he`/fine_tuning/jobs/${e}/resume`,n)}}t0.Checkpoints=GC;class Wa extends ke{constructor(){super(...arguments),this.methods=new FC(this._client),this.jobs=new t0(this._client),this.checkpoints=new e0(this._client),this.alpha=new Wy(this._client)}}Wa.Methods=FC;Wa.Jobs=t0;Wa.Checkpoints=e0;Wa.Alpha=Wy;class KC extends ke{}class n0 extends ke{constructor(){super(...arguments),this.graderModels=new KC(this._client)}}n0.GraderModels=KC;class ZC extends ke{createVariation(e,n){return this._client.post("/images/variations",Ii({body:e,...n},this._client))}edit(e,n){return this._client.post("/images/edits",Ii({body:e,...n,stream:e.stream??!1},this._client))}generate(e,n){return this._client.post("/images/generations",{body:e,...n,stream:e.stream??!1})}}class QC extends ke{retrieve(e,n){return this._client.get(he`/models/${e}`,n)}list(e){return this._client.getAPIList("/models",hh,e)}delete(e,n){return this._client.delete(he`/models/${e}`,n)}}class JC extends ke{create(e,n){return this._client.post("/moderations",{body:e,...n})}}class YC extends ke{accept(e,n,r){return this._client.post(he`/realtime/calls/${e}/accept`,{body:n,...r,headers:be([{Accept:"*/*"},r?.headers])})}hangup(e,n){return this._client.post(he`/realtime/calls/${e}/hangup`,{...n,headers:be([{Accept:"*/*"},n?.headers])})}refer(e,n,r){return this._client.post(he`/realtime/calls/${e}/refer`,{body:n,...r,headers:be([{Accept:"*/*"},r?.headers])})}reject(e,n={},r){return this._client.post(he`/realtime/calls/${e}/reject`,{body:n,...r,headers:be([{Accept:"*/*"},r?.headers])})}}class XC extends ke{create(e,n){return this._client.post("/realtime/client_secrets",{body:e,...n})}}class gh extends ke{constructor(){super(...arguments),this.clientSecrets=new XC(this._client),this.calls=new YC(this._client)}}gh.ClientSecrets=XC;gh.Calls=YC;function m8(t,e){return!e||!y8(e)?{...t,output_parsed:null,output:t.output.map(n=>n.type==="function_call"?{...n,parsed_arguments:null}:n.type==="message"?{...n,content:n.content.map(r=>({...r,parsed:null}))}:n)}:WC(t,e)}function WC(t,e){const n=t.output.map(s=>{if(s.type==="function_call")return{...s,parsed_arguments:v8(e,s)};if(s.type==="message"){const a=s.content.map(l=>l.type==="output_text"?{...l,parsed:g8(e,l.text)}:l);return{...s,content:a}}return s}),r=Object.assign({},t,{output:n});return Object.getOwnPropertyDescriptor(t,"output_text")||$g(r),Object.defineProperty(r,"output_parsed",{enumerable:!0,get(){for(const s of r.output)if(s.type==="message"){for(const a of s.content)if(a.type==="output_text"&&a.parsed!==null)return a.parsed}return null}}),r}function g8(t,e){return t.text?.format?.type!=="json_schema"?null:"$parseRaw"in t.text?.format?(t.text?.format).$parseRaw(e):JSON.parse(e)}function y8(t){return!!Uy(t.text?.format)}function _8(t){return t?.$brand==="auto-parseable-tool"}function b8(t,e){return t.find(n=>n.type==="function"&&n.name===e)}function v8(t,e){const n=b8(t.tools??[],e.name);return{...e,...e,parsed_arguments:_8(n)?n.$parseRaw(e.arguments):n?.strict?JSON.parse(e.arguments):null}}function $g(t){const e=[];for(const n of t.output)if(n.type==="message")for(const r of n.content)r.type==="output_text"&&e.push(r.text);t.output_text=e.join("")}var Ca,Mu,Hs,Du,zw,Pw,Bw,$w;class r0 extends Fy{constructor(e){super(),Ca.add(this),Mu.set(this,void 0),Hs.set(this,void 0),Du.set(this,void 0),Me(this,Mu,e)}static createResponse(e,n,r){const s=new r0(n);return s._run(()=>s._createOrRetrieveResponse(e,n,{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),s}async _createOrRetrieveResponse(e,n,r){const s=r?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),ee(this,Ca,"m",zw).call(this);let a,l=null;"response_id"in n?(a=await e.responses.retrieve(n.response_id,{stream:!0},{...r,signal:this.controller.signal,stream:!0}),l=n.starting_after??null):a=await e.responses.create({...n,stream:!0},{...r,signal:this.controller.signal}),this._connected();for await(const u of a)ee(this,Ca,"m",Pw).call(this,u,l);if(a.controller.signal?.aborted)throw new vr;return ee(this,Ca,"m",Bw).call(this)}[(Mu=new WeakMap,Hs=new WeakMap,Du=new WeakMap,Ca=new WeakSet,zw=function(){this.ended||Me(this,Hs,void 0)},Pw=function(n,r){if(this.ended)return;const s=(l,u)=>{(r==null||u.sequence_number>r)&&this._emit(l,u)},a=ee(this,Ca,"m",$w).call(this,n);switch(s("event",n),n.type){case"response.output_text.delta":{const l=a.output[n.output_index];if(!l)throw new Ce(`missing output at index ${n.output_index}`);if(l.type==="message"){const u=l.content[n.content_index];if(!u)throw new Ce(`missing content at index ${n.content_index}`);if(u.type!=="output_text")throw new Ce(`expected content to be 'output_text', got ${u.type}`);s("response.output_text.delta",{...n,snapshot:u.text})}break}case"response.function_call_arguments.delta":{const l=a.output[n.output_index];if(!l)throw new Ce(`missing output at index ${n.output_index}`);l.type==="function_call"&&s("response.function_call_arguments.delta",{...n,snapshot:l.arguments});break}default:s(n.type,n);break}},Bw=function(){if(this.ended)throw new Ce("stream has ended, this shouldn't happen");const n=ee(this,Hs,"f");if(!n)throw new Ce("request ended without sending any events");Me(this,Hs,void 0);const r=x8(n,ee(this,Mu,"f"));return Me(this,Du,r),r},$w=function(n){let r=ee(this,Hs,"f");if(!r){if(n.type!=="response.created")throw new Ce(`When snapshot hasn't been set yet, expected 'response.created' event, got ${n.type}`);return r=Me(this,Hs,n.response),r}switch(n.type){case"response.output_item.added":{r.output.push(n.item);break}case"response.content_part.added":{const s=r.output[n.output_index];if(!s)throw new Ce(`missing output at index ${n.output_index}`);const a=s.type,l=n.part;a==="message"&&l.type!=="reasoning_text"?s.content.push(l):a==="reasoning"&&l.type==="reasoning_text"&&(s.content||(s.content=[]),s.content.push(l));break}case"response.output_text.delta":{const s=r.output[n.output_index];if(!s)throw new Ce(`missing output at index ${n.output_index}`);if(s.type==="message"){const a=s.content[n.content_index];if(!a)throw new Ce(`missing content at index ${n.content_index}`);if(a.type!=="output_text")throw new Ce(`expected content to be 'output_text', got ${a.type}`);a.text+=n.delta}break}case"response.function_call_arguments.delta":{const s=r.output[n.output_index];if(!s)throw new Ce(`missing output at index ${n.output_index}`);s.type==="function_call"&&(s.arguments+=n.delta);break}case"response.reasoning_text.delta":{const s=r.output[n.output_index];if(!s)throw new Ce(`missing output at index ${n.output_index}`);if(s.type==="reasoning"){const a=s.content?.[n.content_index];if(!a)throw new Ce(`missing content at index ${n.content_index}`);if(a.type!=="reasoning_text")throw new Ce(`expected content to be 'reasoning_text', got ${a.type}`);a.text+=n.delta}break}case"response.completed":{Me(this,Hs,n.response);break}}return r},Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("event",s=>{const a=n.shift();a?a.resolve(s):e.push(s)}),this.on("end",()=>{r=!0;for(const s of n)s.resolve(void 0);n.length=0}),this.on("abort",s=>{r=!0;for(const a of n)a.reject(s);n.length=0}),this.on("error",s=>{r=!0;for(const a of n)a.reject(s);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((a,l)=>n.push({resolve:a,reject:l})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();const e=ee(this,Du,"f");if(!e)throw new Ce("stream ended without producing a ChatCompletion");return e}}function x8(t,e){return m8(t,e)}class eT extends ke{list(e,n={},r){return this._client.getAPIList(he`/responses/${e}/input_items`,zt,{query:n,...r})}}class tT extends ke{count(e={},n){return this._client.post("/responses/input_tokens",{body:e,...n})}}class yh extends ke{constructor(){super(...arguments),this.inputItems=new eT(this._client),this.inputTokens=new tT(this._client)}create(e,n){return this._client.post("/responses",{body:e,...n,stream:e.stream??!1})._thenUnwrap(r=>("object"in r&&r.object==="response"&&$g(r),r))}retrieve(e,n={},r){return this._client.get(he`/responses/${e}`,{query:n,...r,stream:n?.stream??!1})._thenUnwrap(s=>("object"in s&&s.object==="response"&&$g(s),s))}delete(e,n){return this._client.delete(he`/responses/${e}`,{...n,headers:be([{Accept:"*/*"},n?.headers])})}parse(e,n){return this._client.responses.create(e,n)._thenUnwrap(r=>WC(r,e))}stream(e,n){return r0.createResponse(this._client,e,n)}cancel(e,n){return this._client.post(he`/responses/${e}/cancel`,n)}compact(e,n){return this._client.post("/responses/compact",{body:e,...n})}}yh.InputItems=eT;yh.InputTokens=tT;class nT extends ke{create(e,n,r){return this._client.post(he`/uploads/${e}/parts`,Ii({body:n,...r},this._client))}}class s0 extends ke{constructor(){super(...arguments),this.parts=new nT(this._client)}create(e,n){return this._client.post("/uploads",{body:e,...n})}cancel(e,n){return this._client.post(he`/uploads/${e}/cancel`,n)}complete(e,n,r){return this._client.post(he`/uploads/${e}/complete`,{body:n,...r})}}s0.Parts=nT;const w8=async t=>{const e=await Promise.allSettled(t),n=e.filter(s=>s.status==="rejected");if(n.length){for(const s of n)console.error(s.reason);throw new Error(`${n.length} promise(s) failed - see the above errors`)}const r=[];for(const s of e)s.status==="fulfilled"&&r.push(s.value);return r};class rT extends ke{create(e,n,r){return this._client.post(he`/vector_stores/${e}/file_batches`,{body:n,...r,headers:be([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}retrieve(e,n,r){const{vector_store_id:s}=n;return this._client.get(he`/vector_stores/${s}/file_batches/${e}`,{...r,headers:be([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}cancel(e,n,r){const{vector_store_id:s}=n;return this._client.post(he`/vector_stores/${s}/file_batches/${e}/cancel`,{...r,headers:be([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}async createAndPoll(e,n,r){const s=await this.create(e,n);return await this.poll(e,s.id,r)}listFiles(e,n,r){const{vector_store_id:s,...a}=n;return this._client.getAPIList(he`/vector_stores/${s}/file_batches/${e}/files`,zt,{query:a,...r,headers:be([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}async poll(e,n,r){const s=be([r?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":r?.pollIntervalMs?.toString()??void 0}]);for(;;){const{data:a,response:l}=await this.retrieve(n,{vector_store_id:e},{...r,headers:s}).withResponse();switch(a.status){case"in_progress":let u=5e3;if(r?.pollIntervalMs)u=r.pollIntervalMs;else{const f=l.headers.get("openai-poll-after-ms");if(f){const h=parseInt(f);isNaN(h)||(u=h)}}await Wl(u);break;case"failed":case"cancelled":case"completed":return a}}}async uploadAndPoll(e,{files:n,fileIds:r=[]},s){if(n==null||n.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const a=s?.maxConcurrency??5,l=Math.min(a,n.length),u=this._client,f=n.values(),h=[...r];async function m(y){for(let g of y){const v=await u.files.create({file:g,purpose:"assistants"},s);h.push(v.id)}}const p=Array(l).fill(f).map(m);return await w8(p),await this.createAndPoll(e,{file_ids:h})}}class sT extends ke{create(e,n,r){return this._client.post(he`/vector_stores/${e}/files`,{body:n,...r,headers:be([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}retrieve(e,n,r){const{vector_store_id:s}=n;return this._client.get(he`/vector_stores/${s}/files/${e}`,{...r,headers:be([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}update(e,n,r){const{vector_store_id:s,...a}=n;return this._client.post(he`/vector_stores/${s}/files/${e}`,{body:a,...r,headers:be([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(e,n={},r){return this._client.getAPIList(he`/vector_stores/${e}/files`,zt,{query:n,...r,headers:be([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}delete(e,n,r){const{vector_store_id:s}=n;return this._client.delete(he`/vector_stores/${s}/files/${e}`,{...r,headers:be([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}async createAndPoll(e,n,r){const s=await this.create(e,n,r);return await this.poll(e,s.id,r)}async poll(e,n,r){const s=be([r?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":r?.pollIntervalMs?.toString()??void 0}]);for(;;){const a=await this.retrieve(n,{vector_store_id:e},{...r,headers:s}).withResponse(),l=a.data;switch(l.status){case"in_progress":let u=5e3;if(r?.pollIntervalMs)u=r.pollIntervalMs;else{const f=a.response.headers.get("openai-poll-after-ms");if(f){const h=parseInt(f);isNaN(h)||(u=h)}}await Wl(u);break;case"failed":case"completed":return l}}}async upload(e,n,r){const s=await this._client.files.create({file:n,purpose:"assistants"},r);return this.create(e,{file_id:s.id},r)}async uploadAndPoll(e,n,r){const s=await this.upload(e,n,r);return await this.poll(e,s.id,r)}content(e,n,r){const{vector_store_id:s}=n;return this._client.getAPIList(he`/vector_stores/${s}/files/${e}/content`,hh,{...r,headers:be([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}}class _h extends ke{constructor(){super(...arguments),this.files=new sT(this._client),this.fileBatches=new rT(this._client)}create(e,n){return this._client.post("/vector_stores",{body:e,...n,headers:be([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}retrieve(e,n){return this._client.get(he`/vector_stores/${e}`,{...n,headers:be([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}update(e,n,r){return this._client.post(he`/vector_stores/${e}`,{body:n,...r,headers:be([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(e={},n){return this._client.getAPIList("/vector_stores",zt,{query:e,...n,headers:be([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}delete(e,n){return this._client.delete(he`/vector_stores/${e}`,{...n,headers:be([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}search(e,n,r){return this._client.getAPIList(he`/vector_stores/${e}/search`,hh,{body:n,method:"post",...r,headers:be([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}}_h.Files=sT;_h.FileBatches=rT;class iT extends ke{create(e,n){return this._client.post("/videos",Ew({body:e,...n},this._client))}retrieve(e,n){return this._client.get(he`/videos/${e}`,n)}list(e={},n){return this._client.getAPIList("/videos",Lf,{query:e,...n})}delete(e,n){return this._client.delete(he`/videos/${e}`,n)}downloadContent(e,n={},r){return this._client.get(he`/videos/${e}/content`,{query:n,...r,headers:be([{Accept:"application/binary"},r?.headers]),__binaryResponse:!0})}remix(e,n,r){return this._client.post(he`/videos/${e}/remix`,Ew({body:n,...r},this._client))}}var Na,aT,rf;class oT extends ke{constructor(){super(...arguments),Na.add(this)}async unwrap(e,n,r=this._client.webhookSecret,s=300){return await this.verifySignature(e,n,r,s),JSON.parse(e)}async verifySignature(e,n,r=this._client.webhookSecret,s=300){if(typeof crypto>"u"||typeof crypto.subtle.importKey!="function"||typeof crypto.subtle.verify!="function")throw new Error("Webhook signature verification is only supported when the `crypto` global is defined");ee(this,Na,"m",aT).call(this,r);const a=be([n]).values,l=ee(this,Na,"m",rf).call(this,a,"webhook-signature"),u=ee(this,Na,"m",rf).call(this,a,"webhook-timestamp"),f=ee(this,Na,"m",rf).call(this,a,"webhook-id"),h=parseInt(u,10);if(isNaN(h))throw new ll("Invalid webhook timestamp format");const m=Math.floor(Date.now()/1e3);if(m-h>s)throw new ll("Webhook timestamp is too old");if(h>m+s)throw new ll("Webhook timestamp is too new");const p=l.split(" ").map(x=>x.startsWith("v1,")?x.substring(3):x),y=r.startsWith("whsec_")?Buffer.from(r.replace("whsec_",""),"base64"):Buffer.from(r,"utf-8"),g=f?`${f}.${u}.${e}`:`${u}.${e}`,v=await crypto.subtle.importKey("raw",y,{name:"HMAC",hash:"SHA-256"},!1,["verify"]);for(const x of p)try{const E=Buffer.from(x,"base64");if(await crypto.subtle.verify("HMAC",v,E,new TextEncoder().encode(g)))return}catch{continue}throw new ll("The given webhook signature does not match the expected signature")}}Na=new WeakSet,aT=function(e){if(typeof e!="string"||e.length===0)throw new Error("The webhook secret must either be set using the env var, OPENAI_WEBHOOK_SECRET, on the client class, OpenAI({ webhookSecret: '123' }), or passed to this function")},rf=function(e,n){if(!e)throw new Error("Headers are required");const r=e.get(n);if(r==null)throw new Error(`Missing required header: ${n}`);return r};var Ug,i0,sf,lT;class qe{constructor({baseURL:e=Ea("OPENAI_BASE_URL"),apiKey:n=Ea("OPENAI_API_KEY"),organization:r=Ea("OPENAI_ORG_ID")??null,project:s=Ea("OPENAI_PROJECT_ID")??null,webhookSecret:a=Ea("OPENAI_WEBHOOK_SECRET")??null,...l}={}){if(Ug.add(this),sf.set(this,void 0),this.completions=new zC(this),this.chat=new Gy(this),this.embeddings=new $C(this),this.files=new qC(this),this.images=new ZC(this),this.audio=new tc(this),this.moderations=new JC(this),this.models=new QC(this),this.fineTuning=new Wa(this),this.graders=new n0(this),this.vectorStores=new _h(this),this.webhooks=new oT(this),this.beta=new Xa(this),this.batches=new RC(this),this.uploads=new s0(this),this.responses=new yh(this),this.realtime=new gh(this),this.conversations=new Jy(this),this.evals=new Xy(this),this.containers=new Qy(this),this.videos=new iT(this),n===void 0)throw new Ce("Missing credentials. Please pass an `apiKey`, or set the `OPENAI_API_KEY` environment variable.");const u={apiKey:n,organization:r,project:s,webhookSecret:a,...l,baseURL:e||"https://api.openai.com/v1"};if(!u.dangerouslyAllowBrowser&&S6())throw new Ce(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);this.baseURL=u.baseURL,this.timeout=u.timeout??i0.DEFAULT_TIMEOUT,this.logger=u.logger??console;const f="warn";this.logLevel=f,this.logLevel=Sw(u.logLevel,"ClientOptions.logLevel",this)??Sw(Ea("OPENAI_LOG"),"process.env['OPENAI_LOG']",this)??f,this.fetchOptions=u.fetchOptions,this.maxRetries=u.maxRetries??2,this.fetch=u.fetch??A6(),Me(this,sf,O6),this._options=u,this.apiKey=typeof n=="string"?n:"Missing Key",this.organization=r,this.project=s,this.webhookSecret=a}withOptions(e){return new this.constructor({...this._options,baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,organization:this.organization,project:this.project,webhookSecret:this.webhookSecret,...e})}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){}async authHeaders(e){return be([{Authorization:`Bearer ${this.apiKey}`}])}stringifyQuery(e){return j6(e,{arrayFormat:"brackets"})}getUserAgent(){return`${this.constructor.name}/JS ${Ra}`}defaultIdempotencyKey(){return`stainless-node-retry-${NE()}`}makeStatusError(e,n,r,s){return un.generate(e,n,r,s)}async _callApiKey(){const e=this._options.apiKey;if(typeof e!="function")return!1;let n;try{n=await e()}catch(r){throw r instanceof Ce?r:new Ce(`Failed to get token from 'apiKey' function: ${r.message}`,{cause:r})}if(typeof n!="string"||!n)throw new Ce(`Expected 'apiKey' function argument to return a string but it returned ${n}`);return this.apiKey=n,!0}buildURL(e,n,r){const s=!ee(this,Ug,"m",lT).call(this)&&r||this.baseURL,a=_6(e)?new URL(e):new URL(s+(s.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),l=this.defaultQuery();return b6(l)||(n={...l,...n}),typeof n=="object"&&n&&!Array.isArray(n)&&(a.search=this.stringifyQuery(n)),a.toString()}async prepareOptions(e){await this._callApiKey()}async prepareRequest(e,{url:n,options:r}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,r){return this.request(Promise.resolve(r).then(s=>({method:e,path:n,...s})))}request(e,n=null){return new fh(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,r){const s=await e,a=s.maxRetries??this.maxRetries;n==null&&(n=a),await this.prepareOptions(s);const{req:l,url:u,timeout:f}=await this.buildRequest(s,{retryCount:a-n});await this.prepareRequest(l,{url:u,options:s});const h="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),m=r===void 0?"":`, retryOf: ${r}`,p=Date.now();if(ln(this).debug(`[${h}] sending request`,Ei({retryOfRequestLogID:r,method:s.method,url:u,options:s,headers:l.headers})),s.signal?.aborted)throw new vr;const y=new AbortController,g=await this.fetchWithTimeout(u,l,f,y).catch(Rg),v=Date.now();if(g instanceof globalThis.Error){const S=`retrying, ${n} attempts remaining`;if(s.signal?.aborted)throw new vr;const C=Ag(g)||/timed? ?out/i.test(String(g)+("cause"in g?String(g.cause):""));if(n)return ln(this).info(`[${h}] connection ${C?"timed out":"failed"} - ${S}`),ln(this).debug(`[${h}] connection ${C?"timed out":"failed"} (${S})`,Ei({retryOfRequestLogID:r,url:u,durationMs:v-p,message:g.message})),this.retryRequest(s,n,r??h);throw ln(this).info(`[${h}] connection ${C?"timed out":"failed"} - error; no more retries left`),ln(this).debug(`[${h}] connection ${C?"timed out":"failed"} (error; no more retries left)`,Ei({retryOfRequestLogID:r,url:u,durationMs:v-p,message:g.message})),C?new zy:new ch({cause:g})}const x=[...g.headers.entries()].filter(([S])=>S==="x-request-id").map(([S,C])=>", "+S+": "+JSON.stringify(C)).join(""),E=`[${h}${m}${x}] ${l.method} ${u} ${g.ok?"succeeded":"failed"} with status ${g.status} in ${v-p}ms`;if(!g.ok){const S=await this.shouldRetry(g);if(n&&S){const B=`retrying, ${n} attempts remaining`;return await R6(g.body),ln(this).info(`${E} - ${B}`),ln(this).debug(`[${h}] response error (${B})`,Ei({retryOfRequestLogID:r,url:g.url,status:g.status,headers:g.headers,durationMs:v-p})),this.retryRequest(s,n,r??h,g.headers)}const C=S?"error; no more retries left":"error; not retryable";ln(this).info(`${E} - ${C}`);const T=await g.text().catch(B=>Rg(B).message),L=w6(T),D=L?void 0:T;throw ln(this).debug(`[${h}] response error (${C})`,Ei({retryOfRequestLogID:r,url:g.url,status:g.status,headers:g.headers,message:D,durationMs:Date.now()-p})),this.makeStatusError(g.status,L,D,g.headers)}return ln(this).info(E),ln(this).debug(`[${h}] response start`,Ei({retryOfRequestLogID:r,url:g.url,status:g.status,headers:g.headers,durationMs:v-p})),{response:g,options:s,controller:y,requestLogID:h,retryOfRequestLogID:r,startTime:p}}getAPIList(e,n,r){return this.requestAPIList(n,{method:"get",path:e,...r})}requestAPIList(e,n){const r=this.makeRequest(n,null,void 0);return new H6(this,r,e)}async fetchWithTimeout(e,n,r,s){const{signal:a,method:l,...u}=n||{};a&&a.addEventListener("abort",()=>s.abort());const f=setTimeout(()=>s.abort(),r),h=globalThis.ReadableStream&&u.body instanceof globalThis.ReadableStream||typeof u.body=="object"&&u.body!==null&&Symbol.asyncIterator in u.body,m={signal:s.signal,...h?{duplex:"half"}:{},method:"GET",...u};l&&(m.method=l.toUpperCase());try{return await this.fetch.call(void 0,e,m)}finally{clearTimeout(f)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,r,s){let a;const l=s?.get("retry-after-ms");if(l){const f=parseFloat(l);Number.isNaN(f)||(a=f)}const u=s?.get("retry-after");if(u&&!a){const f=parseFloat(u);Number.isNaN(f)?a=Date.parse(u)-Date.now():a=f*1e3}if(!(a&&0<=a&&a<60*1e3)){const f=e.maxRetries??this.maxRetries;a=this.calculateDefaultRetryTimeoutMillis(n,f)}return await Wl(a),this.makeRequest(e,n-1,r)}calculateDefaultRetryTimeoutMillis(e,n){const a=n-e,l=Math.min(.5*Math.pow(2,a),8),u=1-Math.random()*.25;return l*u*1e3}async buildRequest(e,{retryCount:n=0}={}){const r={...e},{method:s,path:a,query:l,defaultBaseURL:u}=r,f=this.buildURL(a,l,u);"timeout"in r&&x6("timeout",r.timeout),r.timeout=r.timeout??this.timeout;const{bodyHeaders:h,body:m}=this.buildBody({options:r}),p=await this.buildHeaders({options:e,method:s,bodyHeaders:h,retryCount:n});return{req:{method:s,headers:p,...r.signal&&{signal:r.signal},...globalThis.ReadableStream&&m instanceof globalThis.ReadableStream&&{duplex:"half"},...m&&{body:m},...this.fetchOptions??{},...r.fetchOptions??{}},url:f,timeout:r.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:r,retryCount:s}){let a={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),a[this.idempotencyHeader]=e.idempotencyKey);const l=be([a,{Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(s),...e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{},...T6(),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project},await this.authHeaders(e),this._options.defaultHeaders,r,e.headers]);return this.validateHeaders(l),l.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const r=be([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&r.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:VE(e)}:ee(this,sf,"f").call(this,{body:e,headers:r})}}i0=qe,sf=new WeakMap,Ug=new WeakSet,lT=function(){return this.baseURL!=="https://api.openai.com/v1"};qe.OpenAI=i0;qe.DEFAULT_TIMEOUT=6e5;qe.OpenAIError=Ce;qe.APIError=un;qe.APIConnectionError=ch;qe.APIConnectionTimeoutError=zy;qe.APIUserAbortError=vr;qe.NotFoundError=LE;qe.ConflictError=jE;qe.RateLimitError=PE;qe.BadRequestError=IE;qe.AuthenticationError=ME;qe.InternalServerError=BE;qe.PermissionDeniedError=DE;qe.UnprocessableEntityError=zE;qe.InvalidWebhookSignatureError=ll;qe.toFile=J6;qe.Completions=zC;qe.Chat=Gy;qe.Embeddings=$C;qe.Files=qC;qe.Images=ZC;qe.Audio=tc;qe.Moderations=JC;qe.Models=QC;qe.FineTuning=Wa;qe.Graders=n0;qe.VectorStores=_h;qe.Webhooks=oT;qe.Beta=Xa;qe.Batches=RC;qe.Uploads=s0;qe.Responses=yh;qe.Realtime=gh;qe.Conversations=Jy;qe.Evals=Xy;qe.Containers=Qy;qe.Videos=iT;class S8 extends qe{constructor(e){super({...e,dangerouslyAllowBrowser:!0})}}function k8(t){return new S8({apiKey:t.apiKey,organization:t.organization,baseURL:t.baseURL})}function E8(t){return`${t}-${Date.now()}-${Math.random().toString(36).substring(7)}`}class C8 extends WP{constructor(e,n){super({},n),this.kind="text",this.name="openai",this.client=k8(e)}async*chatStream(e){const n=new Map,r=this.mapTextOptionsToOpenAI(e);try{const s=await this.client.responses.create({...r,stream:!0},{headers:e.request?.headers,signal:e.request?.signal});yield*this.processOpenAIStreamChunks(s,n,e,()=>E8(this.name))}catch(s){const a=s;throw console.error(">>> chatStream: Fatal error during response creation <<<"),console.error(">>> Error message:",a.message),console.error(">>> Error stack:",a.stack),console.error(">>> Full error:",a),s}}async structuredOutput(e){const{chatOptions:n,outputSchema:r}=e,s=this.mapTextOptionsToOpenAI(n),a=wl(r,r.required||[]);try{const l=await this.client.responses.create({...s,stream:!1,text:{format:{type:"json_schema",name:"structured_output",schema:a,strict:!0}}},{headers:n.request?.headers,signal:n.request?.signal}),u=this.extractTextFromResponse(l);let f;try{f=JSON.parse(u)}catch{throw new Error(`Failed to parse structured output as JSON. Content: ${u.slice(0,200)}${u.length>200?"...":""}`)}return{data:Tg(f),rawText:u}}catch(l){const u=l;throw console.error(">>> structuredOutput: Error during response creation <<<"),console.error(">>> Error message:",u.message),l}}extractTextFromResponse(e){let n="";for(const r of e.output)if(r.type==="message")for(const s of r.content)s.type==="output_text"&&(n+=s.text);return n}async*processOpenAIStreamChunks(e,n,r,s){let a="",l="";const u=Date.now();let f=0,h=!1,m=!1,p=null,y=r.model;try{for await(const g of e){f++;const v=x=>x.type==="output_text"?(a+=x.text,{type:"content",id:p||s(),model:y||r.model,timestamp:u,delta:x.text,content:a,role:"assistant"}):x.type==="reasoning_text"?(l+=x.text,{type:"thinking",id:p||s(),model:y||r.model,timestamp:u,delta:x.text,content:l}):{type:"error",id:p||s(),model:y||r.model,timestamp:u,error:{message:x.refusal}};if((g.type==="response.created"||g.type==="response.incomplete"||g.type==="response.failed")&&(p=g.response.id,y=g.response.model,h=!1,m=!1,a="",l="",g.response.error&&(yield{type:"error",id:g.response.id,model:g.response.model,timestamp:u,error:g.response.error}),g.response.incomplete_details&&(yield{type:"error",id:g.response.id,model:g.response.model,timestamp:u,error:{message:g.response.incomplete_details.reason??""}})),g.type==="response.output_text.delta"&&g.delta){const x=Array.isArray(g.delta)?g.delta.join(""):typeof g.delta=="string"?g.delta:"";x&&(a+=x,h=!0,yield{type:"content",id:p||s(),model:y||r.model,timestamp:u,delta:x,content:a,role:"assistant"})}if(g.type==="response.reasoning_text.delta"&&g.delta){const x=Array.isArray(g.delta)?g.delta.join(""):typeof g.delta=="string"?g.delta:"";x&&(l+=x,m=!0,yield{type:"thinking",id:p||s(),model:y||r.model,timestamp:u,delta:x,content:l})}if(g.type==="response.reasoning_summary_text.delta"&&g.delta){const x=typeof g.delta=="string"?g.delta:"";x&&(l+=x,m=!0,yield{type:"thinking",id:p||s(),model:y||r.model,timestamp:u,delta:x,content:l})}if(g.type==="response.content_part.added"){const x=g.part;yield v(x)}if(g.type==="response.content_part.done"){const x=g.part;if(x.type==="output_text"&&h||x.type==="reasoning_text"&&m)continue;yield v(x)}if(g.type==="response.output_item.added"){const x=g.item;x.type==="function_call"&&x.id&&(n.has(x.id)||n.set(x.id,{index:g.output_index,name:x.name||""}))}if(g.type==="response.function_call_arguments.done"){const{item_id:x,output_index:E}=g,C=n.get(x)?.name||"";yield{type:"tool_call",id:p||s(),model:y||r.model,timestamp:u,index:E,toolCall:{id:x,type:"function",function:{name:C,arguments:g.arguments}}}}if(g.type==="response.completed"){const x=g.response.output.some(E=>E.type==="function_call");yield{type:"done",id:p||s(),model:y||r.model,timestamp:u,usage:{promptTokens:g.response.usage?.input_tokens||0,completionTokens:g.response.usage?.output_tokens||0,totalTokens:g.response.usage?.total_tokens||0},finishReason:x?"tool_calls":"stop"}}g.type==="error"&&(yield{type:"error",id:p||s(),model:y||r.model,timestamp:u,error:{message:g.message,code:g.code??void 0}})}}catch(g){const v=g;console.log("[OpenAI Adapter] Stream ended with error. Event type summary:",{totalChunks:f,error:v.message}),yield{type:"error",id:s(),model:r.model,timestamp:u,error:{message:v.message||"Unknown error occurred",code:v.code}}}}mapTextOptionsToOpenAI(e){const n=e.modelOptions,r=this.convertMessagesToInput(e.messages);n&&t6({...n,model:e.model});const s=e.tools?g6(e.tools):void 0;return{model:e.model,temperature:e.temperature,max_output_tokens:e.maxTokens,top_p:e.topP,metadata:e.metadata,instructions:e.systemPrompts?.join(`
`),...n,input:r,tools:s}}convertMessagesToInput(e){const n=[];for(const r of e){if(r.role==="tool"){n.push({type:"function_call_output",call_id:r.toolCallId||"",output:typeof r.content=="string"?r.content:JSON.stringify(r.content)});continue}if(r.role==="assistant"){if(r.toolCalls&&r.toolCalls.length>0)for(const l of r.toolCalls){const u=typeof l.function.arguments=="string"?l.function.arguments:JSON.stringify(l.function.arguments);n.push({type:"function_call",call_id:l.id,name:l.function.name,arguments:u})}if(r.content){const l=this.extractTextContent(r.content);l&&n.push({type:"message",role:"assistant",content:l})}continue}const s=this.normalizeContent(r.content),a=[];for(const l of s)a.push(this.convertContentPartToOpenAI(l));a.length===0&&a.push({type:"input_text",text:""}),n.push({type:"message",role:"user",content:a})}return n}convertContentPartToOpenAI(e){switch(e.type){case"text":return{type:"input_text",text:e.content};case"image":{const n=e.metadata;return e.source.type==="url"?{type:"input_image",image_url:e.source.value,detail:n?.detail||"auto"}:{type:"input_image",image_url:e.source.value,detail:n?.detail||"auto"}}case"audio":return e.source.type==="url"?{type:"input_file",file_url:e.source.value}:{type:"input_file",file_data:e.source.value};default:throw new Error(`Unsupported content part type: ${e.type}`)}}normalizeContent(e){return e===null?[]:typeof e=="string"?[{type:"text",content:e}]:e}extractTextContent(e){return e===null?"":typeof e=="string"?e:e.filter(n=>n.type==="text").map(n=>n.content).join("")}}function T8(t){const e=`${window.location.origin}/openai/v1`;return new C8({apiKey:"not-needed",baseURL:e},t)}function A8(){return Sy().ai?.model||"gpt-5.1"}function fe(t,e,n){function r(u,f){if(u._zod||Object.defineProperty(u,"_zod",{value:{def:f,constr:l,traits:new Set},enumerable:!1}),u._zod.traits.has(t))return;u._zod.traits.add(t),e(u,f);const h=l.prototype,m=Object.keys(h);for(let p=0;p<m.length;p++){const y=m[p];y in u||(u[y]=h[y].bind(u))}}const s=n?.Parent??Object;class a extends s{}Object.defineProperty(a,"name",{value:t});function l(u){var f;const h=n?.Parent?new a:this;r(h,u),(f=h._zod).deferred??(f.deferred=[]);for(const m of h._zod.deferred)m();return h}return Object.defineProperty(l,"init",{value:r}),Object.defineProperty(l,Symbol.hasInstance,{value:u=>n?.Parent&&u instanceof n.Parent?!0:u?._zod?.traits?.has(t)}),Object.defineProperty(l,"name",{value:t}),l}class qa extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class cT extends Error{constructor(e){super(`Encountered unidirectional transform during encode: ${e}`),this.name="ZodEncodeError"}}const uT={};function Mi(t){return uT}function fT(t){const e=Object.values(t).filter(r=>typeof r=="number");return Object.entries(t).filter(([r,s])=>e.indexOf(+r)===-1).map(([r,s])=>s)}function qg(t,e){return typeof e=="bigint"?e.toString():e}function a0(t){return{get value(){{const e=t();return Object.defineProperty(this,"value",{value:e}),e}}}}function o0(t){return t==null}function l0(t){const e=t.startsWith("^")?1:0,n=t.endsWith("$")?t.length-1:t.length;return t.slice(e,n)}const Uw=Symbol("evaluating");function ot(t,e,n){let r;Object.defineProperty(t,e,{get(){if(r!==Uw)return r===void 0&&(r=Uw,r=n()),r},set(s){Object.defineProperty(t,e,{value:s})},configurable:!0})}function Pi(t,e,n){Object.defineProperty(t,e,{value:n,writable:!0,enumerable:!0,configurable:!0})}function ei(...t){const e={};for(const n of t){const r=Object.getOwnPropertyDescriptors(n);Object.assign(e,r)}return Object.defineProperties({},e)}function qw(t){return JSON.stringify(t)}function R8(t){return t.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"")}const hT="captureStackTrace"in Error?Error.captureStackTrace:(...t)=>{};function Ff(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)}const O8=a0(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{const t=Function;return new t(""),!0}catch{return!1}});function $l(t){if(Ff(t)===!1)return!1;const e=t.constructor;if(e===void 0||typeof e!="function")return!0;const n=e.prototype;return!(Ff(n)===!1||Object.prototype.hasOwnProperty.call(n,"isPrototypeOf")===!1)}function dT(t){return $l(t)?{...t}:Array.isArray(t)?[...t]:t}const N8=new Set(["string","number","symbol"]);function bh(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function ti(t,e,n){const r=new t._zod.constr(e??t._zod.def);return(!e||n?.parent)&&(r._zod.parent=t),r}function Le(t){const e=t;if(!e)return{};if(typeof e=="string")return{error:()=>e};if(e?.message!==void 0){if(e?.error!==void 0)throw new Error("Cannot specify both `message` and `error` params");e.error=e.message}return delete e.message,typeof e.error=="string"?{...e,error:()=>e.error}:e}function I8(t){return Object.keys(t).filter(e=>t[e]._zod.optin==="optional"&&t[e]._zod.optout==="optional")}function M8(t,e){const n=t._zod.def,r=n.checks;if(r&&r.length>0)throw new Error(".pick() cannot be used on object schemas containing refinements");const a=ei(t._zod.def,{get shape(){const l={};for(const u in e){if(!(u in n.shape))throw new Error(`Unrecognized key: "${u}"`);e[u]&&(l[u]=n.shape[u])}return Pi(this,"shape",l),l},checks:[]});return ti(t,a)}function D8(t,e){const n=t._zod.def,r=n.checks;if(r&&r.length>0)throw new Error(".omit() cannot be used on object schemas containing refinements");const a=ei(t._zod.def,{get shape(){const l={...t._zod.def.shape};for(const u in e){if(!(u in n.shape))throw new Error(`Unrecognized key: "${u}"`);e[u]&&delete l[u]}return Pi(this,"shape",l),l},checks:[]});return ti(t,a)}function L8(t,e){if(!$l(e))throw new Error("Invalid input to extend: expected a plain object");const n=t._zod.def.checks;if(n&&n.length>0){const a=t._zod.def.shape;for(const l in e)if(Object.getOwnPropertyDescriptor(a,l)!==void 0)throw new Error("Cannot overwrite keys on object schemas containing refinements. Use `.safeExtend()` instead.")}const s=ei(t._zod.def,{get shape(){const a={...t._zod.def.shape,...e};return Pi(this,"shape",a),a}});return ti(t,s)}function j8(t,e){if(!$l(e))throw new Error("Invalid input to safeExtend: expected a plain object");const n=ei(t._zod.def,{get shape(){const r={...t._zod.def.shape,...e};return Pi(this,"shape",r),r}});return ti(t,n)}function z8(t,e){const n=ei(t._zod.def,{get shape(){const r={...t._zod.def.shape,...e._zod.def.shape};return Pi(this,"shape",r),r},get catchall(){return e._zod.def.catchall},checks:[]});return ti(t,n)}function P8(t,e,n){const s=e._zod.def.checks;if(s&&s.length>0)throw new Error(".partial() cannot be used on object schemas containing refinements");const l=ei(e._zod.def,{get shape(){const u=e._zod.def.shape,f={...u};if(n)for(const h in n){if(!(h in u))throw new Error(`Unrecognized key: "${h}"`);n[h]&&(f[h]=t?new t({type:"optional",innerType:u[h]}):u[h])}else for(const h in u)f[h]=t?new t({type:"optional",innerType:u[h]}):u[h];return Pi(this,"shape",f),f},checks:[]});return ti(e,l)}function B8(t,e,n){const r=ei(e._zod.def,{get shape(){const s=e._zod.def.shape,a={...s};if(n)for(const l in n){if(!(l in a))throw new Error(`Unrecognized key: "${l}"`);n[l]&&(a[l]=new t({type:"nonoptional",innerType:s[l]}))}else for(const l in s)a[l]=new t({type:"nonoptional",innerType:s[l]});return Pi(this,"shape",a),a}});return ti(e,r)}function za(t,e=0){if(t.aborted===!0)return!0;for(let n=e;n<t.issues.length;n++)if(t.issues[n]?.continue!==!0)return!0;return!1}function pT(t,e){return e.map(n=>{var r;return(r=n).path??(r.path=[]),n.path.unshift(t),n})}function Lu(t){return typeof t=="string"?t:t?.message}function Di(t,e,n){const r={...t,path:t.path??[]};if(!t.message){const s=Lu(t.inst?._zod.def?.error?.(t))??Lu(e?.error?.(t))??Lu(n.customError?.(t))??Lu(n.localeError?.(t))??"Invalid input";r.message=s}return delete r.inst,delete r.continue,e?.reportInput||delete r.input,r}function c0(t){return Array.isArray(t)?"array":typeof t=="string"?"string":"unknown"}function Ul(...t){const[e,n,r]=t;return typeof e=="string"?{message:e,code:"custom",input:n,inst:r}:{...e}}const mT=(t,e)=>{t.name="$ZodError",Object.defineProperty(t,"_zod",{value:t._zod,enumerable:!1}),Object.defineProperty(t,"issues",{value:e,enumerable:!1}),t.message=JSON.stringify(e,qg,2),Object.defineProperty(t,"toString",{value:()=>t.message,enumerable:!1})},gT=fe("$ZodError",mT),yT=fe("$ZodError",mT,{Parent:Error});function $8(t,e=n=>n.message){const n={},r=[];for(const s of t.issues)s.path.length>0?(n[s.path[0]]=n[s.path[0]]||[],n[s.path[0]].push(e(s))):r.push(e(s));return{formErrors:r,fieldErrors:n}}function U8(t,e=n=>n.message){const n={_errors:[]},r=s=>{for(const a of s.issues)if(a.code==="invalid_union"&&a.errors.length)a.errors.map(l=>r({issues:l}));else if(a.code==="invalid_key")r({issues:a.issues});else if(a.code==="invalid_element")r({issues:a.issues});else if(a.path.length===0)n._errors.push(e(a));else{let l=n,u=0;for(;u<a.path.length;){const f=a.path[u];u===a.path.length-1?(l[f]=l[f]||{_errors:[]},l[f]._errors.push(e(a))):l[f]=l[f]||{_errors:[]},l=l[f],u++}}};return r(t),n}const u0=t=>(e,n,r,s)=>{const a=r?Object.assign(r,{async:!1}):{async:!1},l=e._zod.run({value:n,issues:[]},a);if(l instanceof Promise)throw new qa;if(l.issues.length){const u=new(s?.Err??t)(l.issues.map(f=>Di(f,a,Mi())));throw hT(u,s?.callee),u}return l.value},f0=t=>async(e,n,r,s)=>{const a=r?Object.assign(r,{async:!0}):{async:!0};let l=e._zod.run({value:n,issues:[]},a);if(l instanceof Promise&&(l=await l),l.issues.length){const u=new(s?.Err??t)(l.issues.map(f=>Di(f,a,Mi())));throw hT(u,s?.callee),u}return l.value},vh=t=>(e,n,r)=>{const s=r?{...r,async:!1}:{async:!1},a=e._zod.run({value:n,issues:[]},s);if(a instanceof Promise)throw new qa;return a.issues.length?{success:!1,error:new(t??gT)(a.issues.map(l=>Di(l,s,Mi())))}:{success:!0,data:a.value}},q8=vh(yT),xh=t=>async(e,n,r)=>{const s=r?Object.assign(r,{async:!0}):{async:!0};let a=e._zod.run({value:n,issues:[]},s);return a instanceof Promise&&(a=await a),a.issues.length?{success:!1,error:new t(a.issues.map(l=>Di(l,s,Mi())))}:{success:!0,data:a.value}},F8=xh(yT),V8=t=>(e,n,r)=>{const s=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return u0(t)(e,n,s)},H8=t=>(e,n,r)=>u0(t)(e,n,r),G8=t=>async(e,n,r)=>{const s=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return f0(t)(e,n,s)},K8=t=>async(e,n,r)=>f0(t)(e,n,r),Z8=t=>(e,n,r)=>{const s=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return vh(t)(e,n,s)},Q8=t=>(e,n,r)=>vh(t)(e,n,r),J8=t=>async(e,n,r)=>{const s=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return xh(t)(e,n,s)},Y8=t=>async(e,n,r)=>xh(t)(e,n,r),X8=/^[cC][^\s-]{8,}$/,W8=/^[0-9a-z]+$/,eB=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,tB=/^[0-9a-vA-V]{20}$/,nB=/^[A-Za-z0-9]{27}$/,rB=/^[a-zA-Z0-9_-]{21}$/,sB=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,iB=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,Fw=t=>t?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${t}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,aB=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,oB="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function lB(){return new RegExp(oB,"u")}const cB=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,uB=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,fB=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,hB=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,dB=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,_T=/^[A-Za-z0-9_-]*$/,pB=/^\+[1-9]\d{6,14}$/,bT="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",mB=new RegExp(`^${bT}$`);function vT(t){const e="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof t.precision=="number"?t.precision===-1?`${e}`:t.precision===0?`${e}:[0-5]\\d`:`${e}:[0-5]\\d\\.\\d{${t.precision}}`:`${e}(?::[0-5]\\d(?:\\.\\d+)?)?`}function gB(t){return new RegExp(`^${vT(t)}$`)}function yB(t){const e=vT({precision:t.precision}),n=["Z"];t.local&&n.push(""),t.offset&&n.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const r=`${e}(?:${n.join("|")})`;return new RegExp(`^${bT}T(?:${r})$`)}const _B=t=>{const e=t?`[\\s\\S]{${t?.minimum??0},${t?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${e}$`)},bB=/^[^A-Z]*$/,vB=/^[^a-z]*$/,Hr=fe("$ZodCheck",(t,e)=>{var n;t._zod??(t._zod={}),t._zod.def=e,(n=t._zod).onattach??(n.onattach=[])}),xB=fe("$ZodCheckMaxLength",(t,e)=>{var n;Hr.init(t,e),(n=t._zod.def).when??(n.when=r=>{const s=r.value;return!o0(s)&&s.length!==void 0}),t._zod.onattach.push(r=>{const s=r._zod.bag.maximum??Number.POSITIVE_INFINITY;e.maximum<s&&(r._zod.bag.maximum=e.maximum)}),t._zod.check=r=>{const s=r.value;if(s.length<=e.maximum)return;const l=c0(s);r.issues.push({origin:l,code:"too_big",maximum:e.maximum,inclusive:!0,input:s,inst:t,continue:!e.abort})}}),wB=fe("$ZodCheckMinLength",(t,e)=>{var n;Hr.init(t,e),(n=t._zod.def).when??(n.when=r=>{const s=r.value;return!o0(s)&&s.length!==void 0}),t._zod.onattach.push(r=>{const s=r._zod.bag.minimum??Number.NEGATIVE_INFINITY;e.minimum>s&&(r._zod.bag.minimum=e.minimum)}),t._zod.check=r=>{const s=r.value;if(s.length>=e.minimum)return;const l=c0(s);r.issues.push({origin:l,code:"too_small",minimum:e.minimum,inclusive:!0,input:s,inst:t,continue:!e.abort})}}),SB=fe("$ZodCheckLengthEquals",(t,e)=>{var n;Hr.init(t,e),(n=t._zod.def).when??(n.when=r=>{const s=r.value;return!o0(s)&&s.length!==void 0}),t._zod.onattach.push(r=>{const s=r._zod.bag;s.minimum=e.length,s.maximum=e.length,s.length=e.length}),t._zod.check=r=>{const s=r.value,a=s.length;if(a===e.length)return;const l=c0(s),u=a>e.length;r.issues.push({origin:l,...u?{code:"too_big",maximum:e.length}:{code:"too_small",minimum:e.length},inclusive:!0,exact:!0,input:r.value,inst:t,continue:!e.abort})}}),wh=fe("$ZodCheckStringFormat",(t,e)=>{var n,r;Hr.init(t,e),t._zod.onattach.push(s=>{const a=s._zod.bag;a.format=e.format,e.pattern&&(a.patterns??(a.patterns=new Set),a.patterns.add(e.pattern))}),e.pattern?(n=t._zod).check??(n.check=s=>{e.pattern.lastIndex=0,!e.pattern.test(s.value)&&s.issues.push({origin:"string",code:"invalid_format",format:e.format,input:s.value,...e.pattern?{pattern:e.pattern.toString()}:{},inst:t,continue:!e.abort})}):(r=t._zod).check??(r.check=()=>{})}),kB=fe("$ZodCheckRegex",(t,e)=>{wh.init(t,e),t._zod.check=n=>{e.pattern.lastIndex=0,!e.pattern.test(n.value)&&n.issues.push({origin:"string",code:"invalid_format",format:"regex",input:n.value,pattern:e.pattern.toString(),inst:t,continue:!e.abort})}}),EB=fe("$ZodCheckLowerCase",(t,e)=>{e.pattern??(e.pattern=bB),wh.init(t,e)}),CB=fe("$ZodCheckUpperCase",(t,e)=>{e.pattern??(e.pattern=vB),wh.init(t,e)}),TB=fe("$ZodCheckIncludes",(t,e)=>{Hr.init(t,e);const n=bh(e.includes),r=new RegExp(typeof e.position=="number"?`^.{${e.position}}${n}`:n);e.pattern=r,t._zod.onattach.push(s=>{const a=s._zod.bag;a.patterns??(a.patterns=new Set),a.patterns.add(r)}),t._zod.check=s=>{s.value.includes(e.includes,e.position)||s.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:e.includes,input:s.value,inst:t,continue:!e.abort})}}),AB=fe("$ZodCheckStartsWith",(t,e)=>{Hr.init(t,e);const n=new RegExp(`^${bh(e.prefix)}.*`);e.pattern??(e.pattern=n),t._zod.onattach.push(r=>{const s=r._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(n)}),t._zod.check=r=>{r.value.startsWith(e.prefix)||r.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:e.prefix,input:r.value,inst:t,continue:!e.abort})}}),RB=fe("$ZodCheckEndsWith",(t,e)=>{Hr.init(t,e);const n=new RegExp(`.*${bh(e.suffix)}$`);e.pattern??(e.pattern=n),t._zod.onattach.push(r=>{const s=r._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(n)}),t._zod.check=r=>{r.value.endsWith(e.suffix)||r.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:e.suffix,input:r.value,inst:t,continue:!e.abort})}}),OB=fe("$ZodCheckOverwrite",(t,e)=>{Hr.init(t,e),t._zod.check=n=>{n.value=e.tx(n.value)}});class NB{constructor(e=[]){this.content=[],this.indent=0,this&&(this.args=e)}indented(e){this.indent+=1,e(this),this.indent-=1}write(e){if(typeof e=="function"){e(this,{execution:"sync"}),e(this,{execution:"async"});return}const r=e.split(`
`).filter(l=>l),s=Math.min(...r.map(l=>l.length-l.trimStart().length)),a=r.map(l=>l.slice(s)).map(l=>" ".repeat(this.indent*2)+l);for(const l of a)this.content.push(l)}compile(){const e=Function,n=this?.args,s=[...(this?.content??[""]).map(a=>`  ${a}`)];return new e(...n,s.join(`
`))}}const IB={major:4,minor:3,patch:4},Ht=fe("$ZodType",(t,e)=>{var n;t??(t={}),t._zod.def=e,t._zod.bag=t._zod.bag||{},t._zod.version=IB;const r=[...t._zod.def.checks??[]];t._zod.traits.has("$ZodCheck")&&r.unshift(t);for(const s of r)for(const a of s._zod.onattach)a(t);if(r.length===0)(n=t._zod).deferred??(n.deferred=[]),t._zod.deferred?.push(()=>{t._zod.run=t._zod.parse});else{const s=(l,u,f)=>{let h=za(l),m;for(const p of u){if(p._zod.def.when){if(!p._zod.def.when(l))continue}else if(h)continue;const y=l.issues.length,g=p._zod.check(l);if(g instanceof Promise&&f?.async===!1)throw new qa;if(m||g instanceof Promise)m=(m??Promise.resolve()).then(async()=>{await g,l.issues.length!==y&&(h||(h=za(l,y)))});else{if(l.issues.length===y)continue;h||(h=za(l,y))}}return m?m.then(()=>l):l},a=(l,u,f)=>{if(za(l))return l.aborted=!0,l;const h=s(u,r,f);if(h instanceof Promise){if(f.async===!1)throw new qa;return h.then(m=>t._zod.parse(m,f))}return t._zod.parse(h,f)};t._zod.run=(l,u)=>{if(u.skipChecks)return t._zod.parse(l,u);if(u.direction==="backward"){const h=t._zod.parse({value:l.value,issues:[]},{...u,skipChecks:!0});return h instanceof Promise?h.then(m=>a(m,l,u)):a(h,l,u)}const f=t._zod.parse(l,u);if(f instanceof Promise){if(u.async===!1)throw new qa;return f.then(h=>s(h,r,u))}return s(f,r,u)}}ot(t,"~standard",()=>({validate:s=>{try{const a=q8(t,s);return a.success?{value:a.data}:{issues:a.error?.issues}}catch{return F8(t,s).then(l=>l.success?{value:l.data}:{issues:l.error?.issues})}},vendor:"zod",version:1}))}),h0=fe("$ZodString",(t,e)=>{Ht.init(t,e),t._zod.pattern=[...t?._zod.bag?.patterns??[]].pop()??_B(t._zod.bag),t._zod.parse=(n,r)=>{if(e.coerce)try{n.value=String(n.value)}catch{}return typeof n.value=="string"||n.issues.push({expected:"string",code:"invalid_type",input:n.value,inst:t}),n}}),wt=fe("$ZodStringFormat",(t,e)=>{wh.init(t,e),h0.init(t,e)}),MB=fe("$ZodGUID",(t,e)=>{e.pattern??(e.pattern=iB),wt.init(t,e)}),DB=fe("$ZodUUID",(t,e)=>{if(e.version){const r={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[e.version];if(r===void 0)throw new Error(`Invalid UUID version: "${e.version}"`);e.pattern??(e.pattern=Fw(r))}else e.pattern??(e.pattern=Fw());wt.init(t,e)}),LB=fe("$ZodEmail",(t,e)=>{e.pattern??(e.pattern=aB),wt.init(t,e)}),jB=fe("$ZodURL",(t,e)=>{wt.init(t,e),t._zod.check=n=>{try{const r=n.value.trim(),s=new URL(r);e.hostname&&(e.hostname.lastIndex=0,e.hostname.test(s.hostname)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:e.hostname.source,input:n.value,inst:t,continue:!e.abort})),e.protocol&&(e.protocol.lastIndex=0,e.protocol.test(s.protocol.endsWith(":")?s.protocol.slice(0,-1):s.protocol)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:e.protocol.source,input:n.value,inst:t,continue:!e.abort})),e.normalize?n.value=s.href:n.value=r;return}catch{n.issues.push({code:"invalid_format",format:"url",input:n.value,inst:t,continue:!e.abort})}}}),zB=fe("$ZodEmoji",(t,e)=>{e.pattern??(e.pattern=lB()),wt.init(t,e)}),PB=fe("$ZodNanoID",(t,e)=>{e.pattern??(e.pattern=rB),wt.init(t,e)}),BB=fe("$ZodCUID",(t,e)=>{e.pattern??(e.pattern=X8),wt.init(t,e)}),$B=fe("$ZodCUID2",(t,e)=>{e.pattern??(e.pattern=W8),wt.init(t,e)}),UB=fe("$ZodULID",(t,e)=>{e.pattern??(e.pattern=eB),wt.init(t,e)}),qB=fe("$ZodXID",(t,e)=>{e.pattern??(e.pattern=tB),wt.init(t,e)}),FB=fe("$ZodKSUID",(t,e)=>{e.pattern??(e.pattern=nB),wt.init(t,e)}),VB=fe("$ZodISODateTime",(t,e)=>{e.pattern??(e.pattern=yB(e)),wt.init(t,e)}),HB=fe("$ZodISODate",(t,e)=>{e.pattern??(e.pattern=mB),wt.init(t,e)}),GB=fe("$ZodISOTime",(t,e)=>{e.pattern??(e.pattern=gB(e)),wt.init(t,e)}),KB=fe("$ZodISODuration",(t,e)=>{e.pattern??(e.pattern=sB),wt.init(t,e)}),ZB=fe("$ZodIPv4",(t,e)=>{e.pattern??(e.pattern=cB),wt.init(t,e),t._zod.bag.format="ipv4"}),QB=fe("$ZodIPv6",(t,e)=>{e.pattern??(e.pattern=uB),wt.init(t,e),t._zod.bag.format="ipv6",t._zod.check=n=>{try{new URL(`http://[${n.value}]`)}catch{n.issues.push({code:"invalid_format",format:"ipv6",input:n.value,inst:t,continue:!e.abort})}}}),JB=fe("$ZodCIDRv4",(t,e)=>{e.pattern??(e.pattern=fB),wt.init(t,e)}),YB=fe("$ZodCIDRv6",(t,e)=>{e.pattern??(e.pattern=hB),wt.init(t,e),t._zod.check=n=>{const r=n.value.split("/");try{if(r.length!==2)throw new Error;const[s,a]=r;if(!a)throw new Error;const l=Number(a);if(`${l}`!==a)throw new Error;if(l<0||l>128)throw new Error;new URL(`http://[${s}]`)}catch{n.issues.push({code:"invalid_format",format:"cidrv6",input:n.value,inst:t,continue:!e.abort})}}});function xT(t){if(t==="")return!0;if(t.length%4!==0)return!1;try{return atob(t),!0}catch{return!1}}const XB=fe("$ZodBase64",(t,e)=>{e.pattern??(e.pattern=dB),wt.init(t,e),t._zod.bag.contentEncoding="base64",t._zod.check=n=>{xT(n.value)||n.issues.push({code:"invalid_format",format:"base64",input:n.value,inst:t,continue:!e.abort})}});function WB(t){if(!_T.test(t))return!1;const e=t.replace(/[-_]/g,r=>r==="-"?"+":"/"),n=e.padEnd(Math.ceil(e.length/4)*4,"=");return xT(n)}const e$=fe("$ZodBase64URL",(t,e)=>{e.pattern??(e.pattern=_T),wt.init(t,e),t._zod.bag.contentEncoding="base64url",t._zod.check=n=>{WB(n.value)||n.issues.push({code:"invalid_format",format:"base64url",input:n.value,inst:t,continue:!e.abort})}}),t$=fe("$ZodE164",(t,e)=>{e.pattern??(e.pattern=pB),wt.init(t,e)});function n$(t,e=null){try{const n=t.split(".");if(n.length!==3)return!1;const[r]=n;if(!r)return!1;const s=JSON.parse(atob(r));return!("typ"in s&&s?.typ!=="JWT"||!s.alg||e&&(!("alg"in s)||s.alg!==e))}catch{return!1}}const r$=fe("$ZodJWT",(t,e)=>{wt.init(t,e),t._zod.check=n=>{n$(n.value,e.alg)||n.issues.push({code:"invalid_format",format:"jwt",input:n.value,inst:t,continue:!e.abort})}}),s$=fe("$ZodUnknown",(t,e)=>{Ht.init(t,e),t._zod.parse=n=>n}),i$=fe("$ZodNever",(t,e)=>{Ht.init(t,e),t._zod.parse=(n,r)=>(n.issues.push({expected:"never",code:"invalid_type",input:n.value,inst:t}),n)});function Vw(t,e,n){t.issues.length&&e.issues.push(...pT(n,t.issues)),e.value[n]=t.value}const a$=fe("$ZodArray",(t,e)=>{Ht.init(t,e),t._zod.parse=(n,r)=>{const s=n.value;if(!Array.isArray(s))return n.issues.push({expected:"array",code:"invalid_type",input:s,inst:t}),n;n.value=Array(s.length);const a=[];for(let l=0;l<s.length;l++){const u=s[l],f=e.element._zod.run({value:u,issues:[]},r);f instanceof Promise?a.push(f.then(h=>Vw(h,n,l))):Vw(f,n,l)}return a.length?Promise.all(a).then(()=>n):n}});function Vf(t,e,n,r,s){if(t.issues.length){if(s&&!(n in r))return;e.issues.push(...pT(n,t.issues))}t.value===void 0?n in r&&(e.value[n]=void 0):e.value[n]=t.value}function wT(t){const e=Object.keys(t.shape);for(const r of e)if(!t.shape?.[r]?._zod?.traits?.has("$ZodType"))throw new Error(`Invalid element at key "${r}": expected a Zod schema`);const n=I8(t.shape);return{...t,keys:e,keySet:new Set(e),numKeys:e.length,optionalKeys:new Set(n)}}function ST(t,e,n,r,s,a){const l=[],u=s.keySet,f=s.catchall._zod,h=f.def.type,m=f.optout==="optional";for(const p in e){if(u.has(p))continue;if(h==="never"){l.push(p);continue}const y=f.run({value:e[p],issues:[]},r);y instanceof Promise?t.push(y.then(g=>Vf(g,n,p,e,m))):Vf(y,n,p,e,m)}return l.length&&n.issues.push({code:"unrecognized_keys",keys:l,input:e,inst:a}),t.length?Promise.all(t).then(()=>n):n}const o$=fe("$ZodObject",(t,e)=>{if(Ht.init(t,e),!Object.getOwnPropertyDescriptor(e,"shape")?.get){const u=e.shape;Object.defineProperty(e,"shape",{get:()=>{const f={...u};return Object.defineProperty(e,"shape",{value:f}),f}})}const r=a0(()=>wT(e));ot(t._zod,"propValues",()=>{const u=e.shape,f={};for(const h in u){const m=u[h]._zod;if(m.values){f[h]??(f[h]=new Set);for(const p of m.values)f[h].add(p)}}return f});const s=Ff,a=e.catchall;let l;t._zod.parse=(u,f)=>{l??(l=r.value);const h=u.value;if(!s(h))return u.issues.push({expected:"object",code:"invalid_type",input:h,inst:t}),u;u.value={};const m=[],p=l.shape;for(const y of l.keys){const g=p[y],v=g._zod.optout==="optional",x=g._zod.run({value:h[y],issues:[]},f);x instanceof Promise?m.push(x.then(E=>Vf(E,u,y,h,v))):Vf(x,u,y,h,v)}return a?ST(m,h,u,f,r.value,t):m.length?Promise.all(m).then(()=>u):u}}),l$=fe("$ZodObjectJIT",(t,e)=>{o$.init(t,e);const n=t._zod.parse,r=a0(()=>wT(e)),s=y=>{const g=new NB(["shape","payload","ctx"]),v=r.value,x=T=>{const L=qw(T);return`shape[${L}]._zod.run({ value: input[${L}], issues: [] }, ctx)`};g.write("const input = payload.value;");const E=Object.create(null);let S=0;for(const T of v.keys)E[T]=`key_${S++}`;g.write("const newResult = {};");for(const T of v.keys){const L=E[T],D=qw(T),B=y[T]?._zod?.optout==="optional";g.write(`const ${L} = ${x(T)};`),B?g.write(`
        if (${L}.issues.length) {
          if (${D} in input) {
            payload.issues = payload.issues.concat(${L}.issues.map(iss => ({
              ...iss,
              path: iss.path ? [${D}, ...iss.path] : [${D}]
            })));
          }
        }
        
        if (${L}.value === undefined) {
          if (${D} in input) {
            newResult[${D}] = undefined;
          }
        } else {
          newResult[${D}] = ${L}.value;
        }
        
      `):g.write(`
        if (${L}.issues.length) {
          payload.issues = payload.issues.concat(${L}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${D}, ...iss.path] : [${D}]
          })));
        }
        
        if (${L}.value === undefined) {
          if (${D} in input) {
            newResult[${D}] = undefined;
          }
        } else {
          newResult[${D}] = ${L}.value;
        }
        
      `)}g.write("payload.value = newResult;"),g.write("return payload;");const C=g.compile();return(T,L)=>C(y,T,L)};let a;const l=Ff,u=!uT.jitless,h=u&&O8.value,m=e.catchall;let p;t._zod.parse=(y,g)=>{p??(p=r.value);const v=y.value;return l(v)?u&&h&&g?.async===!1&&g.jitless!==!0?(a||(a=s(e.shape)),y=a(y,g),m?ST([],v,y,g,p,t):y):n(y,g):(y.issues.push({expected:"object",code:"invalid_type",input:v,inst:t}),y)}});function Hw(t,e,n,r){for(const a of t)if(a.issues.length===0)return e.value=a.value,e;const s=t.filter(a=>!za(a));return s.length===1?(e.value=s[0].value,s[0]):(e.issues.push({code:"invalid_union",input:e.value,inst:n,errors:t.map(a=>a.issues.map(l=>Di(l,r,Mi())))}),e)}const c$=fe("$ZodUnion",(t,e)=>{Ht.init(t,e),ot(t._zod,"optin",()=>e.options.some(s=>s._zod.optin==="optional")?"optional":void 0),ot(t._zod,"optout",()=>e.options.some(s=>s._zod.optout==="optional")?"optional":void 0),ot(t._zod,"values",()=>{if(e.options.every(s=>s._zod.values))return new Set(e.options.flatMap(s=>Array.from(s._zod.values)))}),ot(t._zod,"pattern",()=>{if(e.options.every(s=>s._zod.pattern)){const s=e.options.map(a=>a._zod.pattern);return new RegExp(`^(${s.map(a=>l0(a.source)).join("|")})$`)}});const n=e.options.length===1,r=e.options[0]._zod.run;t._zod.parse=(s,a)=>{if(n)return r(s,a);let l=!1;const u=[];for(const f of e.options){const h=f._zod.run({value:s.value,issues:[]},a);if(h instanceof Promise)u.push(h),l=!0;else{if(h.issues.length===0)return h;u.push(h)}}return l?Promise.all(u).then(f=>Hw(f,s,t,a)):Hw(u,s,t,a)}}),u$=fe("$ZodIntersection",(t,e)=>{Ht.init(t,e),t._zod.parse=(n,r)=>{const s=n.value,a=e.left._zod.run({value:s,issues:[]},r),l=e.right._zod.run({value:s,issues:[]},r);return a instanceof Promise||l instanceof Promise?Promise.all([a,l]).then(([f,h])=>Gw(n,f,h)):Gw(n,a,l)}});function Fg(t,e){if(t===e)return{valid:!0,data:t};if(t instanceof Date&&e instanceof Date&&+t==+e)return{valid:!0,data:t};if($l(t)&&$l(e)){const n=Object.keys(e),r=Object.keys(t).filter(a=>n.indexOf(a)!==-1),s={...t,...e};for(const a of r){const l=Fg(t[a],e[a]);if(!l.valid)return{valid:!1,mergeErrorPath:[a,...l.mergeErrorPath]};s[a]=l.data}return{valid:!0,data:s}}if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return{valid:!1,mergeErrorPath:[]};const n=[];for(let r=0;r<t.length;r++){const s=t[r],a=e[r],l=Fg(s,a);if(!l.valid)return{valid:!1,mergeErrorPath:[r,...l.mergeErrorPath]};n.push(l.data)}return{valid:!0,data:n}}return{valid:!1,mergeErrorPath:[]}}function Gw(t,e,n){const r=new Map;let s;for(const u of e.issues)if(u.code==="unrecognized_keys"){s??(s=u);for(const f of u.keys)r.has(f)||r.set(f,{}),r.get(f).l=!0}else t.issues.push(u);for(const u of n.issues)if(u.code==="unrecognized_keys")for(const f of u.keys)r.has(f)||r.set(f,{}),r.get(f).r=!0;else t.issues.push(u);const a=[...r].filter(([,u])=>u.l&&u.r).map(([u])=>u);if(a.length&&s&&t.issues.push({...s,keys:a}),za(t))return t;const l=Fg(e.value,n.value);if(!l.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(l.mergeErrorPath)}`);return t.value=l.data,t}const f$=fe("$ZodEnum",(t,e)=>{Ht.init(t,e);const n=fT(e.entries),r=new Set(n);t._zod.values=r,t._zod.pattern=new RegExp(`^(${n.filter(s=>N8.has(typeof s)).map(s=>typeof s=="string"?bh(s):s.toString()).join("|")})$`),t._zod.parse=(s,a)=>{const l=s.value;return r.has(l)||s.issues.push({code:"invalid_value",values:n,input:l,inst:t}),s}}),h$=fe("$ZodTransform",(t,e)=>{Ht.init(t,e),t._zod.parse=(n,r)=>{if(r.direction==="backward")throw new cT(t.constructor.name);const s=e.transform(n.value,n);if(r.async)return(s instanceof Promise?s:Promise.resolve(s)).then(l=>(n.value=l,n));if(s instanceof Promise)throw new qa;return n.value=s,n}});function Kw(t,e){return t.issues.length&&e===void 0?{issues:[],value:void 0}:t}const kT=fe("$ZodOptional",(t,e)=>{Ht.init(t,e),t._zod.optin="optional",t._zod.optout="optional",ot(t._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,void 0]):void 0),ot(t._zod,"pattern",()=>{const n=e.innerType._zod.pattern;return n?new RegExp(`^(${l0(n.source)})?$`):void 0}),t._zod.parse=(n,r)=>{if(e.innerType._zod.optin==="optional"){const s=e.innerType._zod.run(n,r);return s instanceof Promise?s.then(a=>Kw(a,n.value)):Kw(s,n.value)}return n.value===void 0?n:e.innerType._zod.run(n,r)}}),d$=fe("$ZodExactOptional",(t,e)=>{kT.init(t,e),ot(t._zod,"values",()=>e.innerType._zod.values),ot(t._zod,"pattern",()=>e.innerType._zod.pattern),t._zod.parse=(n,r)=>e.innerType._zod.run(n,r)}),p$=fe("$ZodNullable",(t,e)=>{Ht.init(t,e),ot(t._zod,"optin",()=>e.innerType._zod.optin),ot(t._zod,"optout",()=>e.innerType._zod.optout),ot(t._zod,"pattern",()=>{const n=e.innerType._zod.pattern;return n?new RegExp(`^(${l0(n.source)}|null)$`):void 0}),ot(t._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,null]):void 0),t._zod.parse=(n,r)=>n.value===null?n:e.innerType._zod.run(n,r)}),m$=fe("$ZodDefault",(t,e)=>{Ht.init(t,e),t._zod.optin="optional",ot(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(n,r)=>{if(r.direction==="backward")return e.innerType._zod.run(n,r);if(n.value===void 0)return n.value=e.defaultValue,n;const s=e.innerType._zod.run(n,r);return s instanceof Promise?s.then(a=>Zw(a,e)):Zw(s,e)}});function Zw(t,e){return t.value===void 0&&(t.value=e.defaultValue),t}const g$=fe("$ZodPrefault",(t,e)=>{Ht.init(t,e),t._zod.optin="optional",ot(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(n,r)=>(r.direction==="backward"||n.value===void 0&&(n.value=e.defaultValue),e.innerType._zod.run(n,r))}),y$=fe("$ZodNonOptional",(t,e)=>{Ht.init(t,e),ot(t._zod,"values",()=>{const n=e.innerType._zod.values;return n?new Set([...n].filter(r=>r!==void 0)):void 0}),t._zod.parse=(n,r)=>{const s=e.innerType._zod.run(n,r);return s instanceof Promise?s.then(a=>Qw(a,t)):Qw(s,t)}});function Qw(t,e){return!t.issues.length&&t.value===void 0&&t.issues.push({code:"invalid_type",expected:"nonoptional",input:t.value,inst:e}),t}const _$=fe("$ZodCatch",(t,e)=>{Ht.init(t,e),ot(t._zod,"optin",()=>e.innerType._zod.optin),ot(t._zod,"optout",()=>e.innerType._zod.optout),ot(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(n,r)=>{if(r.direction==="backward")return e.innerType._zod.run(n,r);const s=e.innerType._zod.run(n,r);return s instanceof Promise?s.then(a=>(n.value=a.value,a.issues.length&&(n.value=e.catchValue({...n,error:{issues:a.issues.map(l=>Di(l,r,Mi()))},input:n.value}),n.issues=[]),n)):(n.value=s.value,s.issues.length&&(n.value=e.catchValue({...n,error:{issues:s.issues.map(a=>Di(a,r,Mi()))},input:n.value}),n.issues=[]),n)}}),b$=fe("$ZodPipe",(t,e)=>{Ht.init(t,e),ot(t._zod,"values",()=>e.in._zod.values),ot(t._zod,"optin",()=>e.in._zod.optin),ot(t._zod,"optout",()=>e.out._zod.optout),ot(t._zod,"propValues",()=>e.in._zod.propValues),t._zod.parse=(n,r)=>{if(r.direction==="backward"){const a=e.out._zod.run(n,r);return a instanceof Promise?a.then(l=>ju(l,e.in,r)):ju(a,e.in,r)}const s=e.in._zod.run(n,r);return s instanceof Promise?s.then(a=>ju(a,e.out,r)):ju(s,e.out,r)}});function ju(t,e,n){return t.issues.length?(t.aborted=!0,t):e._zod.run({value:t.value,issues:t.issues},n)}const v$=fe("$ZodReadonly",(t,e)=>{Ht.init(t,e),ot(t._zod,"propValues",()=>e.innerType._zod.propValues),ot(t._zod,"values",()=>e.innerType._zod.values),ot(t._zod,"optin",()=>e.innerType?._zod?.optin),ot(t._zod,"optout",()=>e.innerType?._zod?.optout),t._zod.parse=(n,r)=>{if(r.direction==="backward")return e.innerType._zod.run(n,r);const s=e.innerType._zod.run(n,r);return s instanceof Promise?s.then(Jw):Jw(s)}});function Jw(t){return t.value=Object.freeze(t.value),t}const x$=fe("$ZodCustom",(t,e)=>{Hr.init(t,e),Ht.init(t,e),t._zod.parse=(n,r)=>n,t._zod.check=n=>{const r=n.value,s=e.fn(r);if(s instanceof Promise)return s.then(a=>Yw(a,n,r,t));Yw(s,n,r,t)}});function Yw(t,e,n,r){if(!t){const s={code:"custom",input:n,inst:r,path:[...r._zod.def.path??[]],continue:!r._zod.def.abort};r._zod.def.params&&(s.params=r._zod.def.params),e.issues.push(Ul(s))}}var Xw;class w${constructor(){this._map=new WeakMap,this._idmap=new Map}add(e,...n){const r=n[0];return this._map.set(e,r),r&&typeof r=="object"&&"id"in r&&this._idmap.set(r.id,e),this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(e){const n=this._map.get(e);return n&&typeof n=="object"&&"id"in n&&this._idmap.delete(n.id),this._map.delete(e),this}get(e){const n=e._zod.parent;if(n){const r={...this.get(n)??{}};delete r.id;const s={...r,...this._map.get(e)};return Object.keys(s).length?s:void 0}return this._map.get(e)}has(e){return this._map.has(e)}}function S$(){return new w$}(Xw=globalThis).__zod_globalRegistry??(Xw.__zod_globalRegistry=S$());const yl=globalThis.__zod_globalRegistry;function k$(t,e){return new t({type:"string",...Le(e)})}function E$(t,e){return new t({type:"string",format:"email",check:"string_format",abort:!1,...Le(e)})}function Ww(t,e){return new t({type:"string",format:"guid",check:"string_format",abort:!1,...Le(e)})}function C$(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,...Le(e)})}function T$(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...Le(e)})}function A$(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...Le(e)})}function R$(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...Le(e)})}function O$(t,e){return new t({type:"string",format:"url",check:"string_format",abort:!1,...Le(e)})}function N$(t,e){return new t({type:"string",format:"emoji",check:"string_format",abort:!1,...Le(e)})}function I$(t,e){return new t({type:"string",format:"nanoid",check:"string_format",abort:!1,...Le(e)})}function M$(t,e){return new t({type:"string",format:"cuid",check:"string_format",abort:!1,...Le(e)})}function D$(t,e){return new t({type:"string",format:"cuid2",check:"string_format",abort:!1,...Le(e)})}function L$(t,e){return new t({type:"string",format:"ulid",check:"string_format",abort:!1,...Le(e)})}function j$(t,e){return new t({type:"string",format:"xid",check:"string_format",abort:!1,...Le(e)})}function z$(t,e){return new t({type:"string",format:"ksuid",check:"string_format",abort:!1,...Le(e)})}function P$(t,e){return new t({type:"string",format:"ipv4",check:"string_format",abort:!1,...Le(e)})}function B$(t,e){return new t({type:"string",format:"ipv6",check:"string_format",abort:!1,...Le(e)})}function $$(t,e){return new t({type:"string",format:"cidrv4",check:"string_format",abort:!1,...Le(e)})}function U$(t,e){return new t({type:"string",format:"cidrv6",check:"string_format",abort:!1,...Le(e)})}function q$(t,e){return new t({type:"string",format:"base64",check:"string_format",abort:!1,...Le(e)})}function F$(t,e){return new t({type:"string",format:"base64url",check:"string_format",abort:!1,...Le(e)})}function V$(t,e){return new t({type:"string",format:"e164",check:"string_format",abort:!1,...Le(e)})}function H$(t,e){return new t({type:"string",format:"jwt",check:"string_format",abort:!1,...Le(e)})}function G$(t,e){return new t({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...Le(e)})}function K$(t,e){return new t({type:"string",format:"date",check:"string_format",...Le(e)})}function Z$(t,e){return new t({type:"string",format:"time",check:"string_format",precision:null,...Le(e)})}function Q$(t,e){return new t({type:"string",format:"duration",check:"string_format",...Le(e)})}function J$(t){return new t({type:"unknown"})}function Y$(t,e){return new t({type:"never",...Le(e)})}function ET(t,e){return new xB({check:"max_length",...Le(e),maximum:t})}function Hf(t,e){return new wB({check:"min_length",...Le(e),minimum:t})}function CT(t,e){return new SB({check:"length_equals",...Le(e),length:t})}function X$(t,e){return new kB({check:"string_format",format:"regex",...Le(e),pattern:t})}function W$(t){return new EB({check:"string_format",format:"lowercase",...Le(t)})}function eU(t){return new CB({check:"string_format",format:"uppercase",...Le(t)})}function tU(t,e){return new TB({check:"string_format",format:"includes",...Le(e),includes:t})}function nU(t,e){return new AB({check:"string_format",format:"starts_with",...Le(e),prefix:t})}function rU(t,e){return new RB({check:"string_format",format:"ends_with",...Le(e),suffix:t})}function eo(t){return new OB({check:"overwrite",tx:t})}function sU(t){return eo(e=>e.normalize(t))}function iU(){return eo(t=>t.trim())}function aU(){return eo(t=>t.toLowerCase())}function oU(){return eo(t=>t.toUpperCase())}function lU(){return eo(t=>R8(t))}function cU(t,e,n){return new t({type:"array",element:e,...Le(n)})}function uU(t,e,n){return new t({type:"custom",check:"custom",fn:e,...Le(n)})}function fU(t){const e=hU(n=>(n.addIssue=r=>{if(typeof r=="string")n.issues.push(Ul(r,n.value,e._zod.def));else{const s=r;s.fatal&&(s.continue=!1),s.code??(s.code="custom"),s.input??(s.input=n.value),s.inst??(s.inst=e),s.continue??(s.continue=!e._zod.def.abort),n.issues.push(Ul(s))}},t(n.value,n)));return e}function hU(t,e){const n=new Hr({check:"custom",...Le(e)});return n._zod.check=t,n}function TT(t){let e=t?.target??"draft-2020-12";return e==="draft-4"&&(e="draft-04"),e==="draft-7"&&(e="draft-07"),{processors:t.processors??{},metadataRegistry:t?.metadata??yl,target:e,unrepresentable:t?.unrepresentable??"throw",override:t?.override??(()=>{}),io:t?.io??"output",counter:0,seen:new Map,cycles:t?.cycles??"ref",reused:t?.reused??"inline",external:t?.external??void 0}}function fn(t,e,n={path:[],schemaPath:[]}){var r;const s=t._zod.def,a=e.seen.get(t);if(a)return a.count++,n.schemaPath.includes(t)&&(a.cycle=n.path),a.schema;const l={schema:{},count:1,cycle:void 0,path:n.path};e.seen.set(t,l);const u=t._zod.toJSONSchema?.();if(u)l.schema=u;else{const m={...n,schemaPath:[...n.schemaPath,t],path:n.path};if(t._zod.processJSONSchema)t._zod.processJSONSchema(e,l.schema,m);else{const y=l.schema,g=e.processors[s.type];if(!g)throw new Error(`[toJSONSchema]: Non-representable type encountered: ${s.type}`);g(t,e,y,m)}const p=t._zod.parent;p&&(l.ref||(l.ref=p),fn(p,e,m),e.seen.get(p).isParent=!0)}const f=e.metadataRegistry.get(t);return f&&Object.assign(l.schema,f),e.io==="input"&&kn(t)&&(delete l.schema.examples,delete l.schema.default),e.io==="input"&&l.schema._prefault&&((r=l.schema).default??(r.default=l.schema._prefault)),delete l.schema._prefault,e.seen.get(t).schema}function AT(t,e){const n=t.seen.get(e);if(!n)throw new Error("Unprocessed schema. This is a bug in Zod.");const r=new Map;for(const l of t.seen.entries()){const u=t.metadataRegistry.get(l[0])?.id;if(u){const f=r.get(u);if(f&&f!==l[0])throw new Error(`Duplicate schema id "${u}" detected during JSON Schema conversion. Two different schemas cannot share the same id when converted together.`);r.set(u,l[0])}}const s=l=>{const u=t.target==="draft-2020-12"?"$defs":"definitions";if(t.external){const p=t.external.registry.get(l[0])?.id,y=t.external.uri??(v=>v);if(p)return{ref:y(p)};const g=l[1].defId??l[1].schema.id??`schema${t.counter++}`;return l[1].defId=g,{defId:g,ref:`${y("__shared")}#/${u}/${g}`}}if(l[1]===n)return{ref:"#"};const h=`#/${u}/`,m=l[1].schema.id??`__schema${t.counter++}`;return{defId:m,ref:h+m}},a=l=>{if(l[1].schema.$ref)return;const u=l[1],{ref:f,defId:h}=s(l);u.def={...u.schema},h&&(u.defId=h);const m=u.schema;for(const p in m)delete m[p];m.$ref=f};if(t.cycles==="throw")for(const l of t.seen.entries()){const u=l[1];if(u.cycle)throw new Error(`Cycle detected: #/${u.cycle?.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(const l of t.seen.entries()){const u=l[1];if(e===l[0]){a(l);continue}if(t.external){const h=t.external.registry.get(l[0])?.id;if(e!==l[0]&&h){a(l);continue}}if(t.metadataRegistry.get(l[0])?.id){a(l);continue}if(u.cycle){a(l);continue}if(u.count>1&&t.reused==="ref"){a(l);continue}}}function RT(t,e){const n=t.seen.get(e);if(!n)throw new Error("Unprocessed schema. This is a bug in Zod.");const r=l=>{const u=t.seen.get(l);if(u.ref===null)return;const f=u.def??u.schema,h={...f},m=u.ref;if(u.ref=null,m){r(m);const y=t.seen.get(m),g=y.schema;if(g.$ref&&(t.target==="draft-07"||t.target==="draft-04"||t.target==="openapi-3.0")?(f.allOf=f.allOf??[],f.allOf.push(g)):Object.assign(f,g),Object.assign(f,h),l._zod.parent===m)for(const x in f)x==="$ref"||x==="allOf"||x in h||delete f[x];if(g.$ref)for(const x in f)x==="$ref"||x==="allOf"||x in y.def&&JSON.stringify(f[x])===JSON.stringify(y.def[x])&&delete f[x]}const p=l._zod.parent;if(p&&p!==m){r(p);const y=t.seen.get(p);if(y?.schema.$ref&&(f.$ref=y.schema.$ref,y.def))for(const g in f)g==="$ref"||g==="allOf"||g in y.def&&JSON.stringify(f[g])===JSON.stringify(y.def[g])&&delete f[g]}t.override({zodSchema:l,jsonSchema:f,path:u.path??[]})};for(const l of[...t.seen.entries()].reverse())r(l[0]);const s={};if(t.target==="draft-2020-12"?s.$schema="https://json-schema.org/draft/2020-12/schema":t.target==="draft-07"?s.$schema="http://json-schema.org/draft-07/schema#":t.target==="draft-04"?s.$schema="http://json-schema.org/draft-04/schema#":t.target,t.external?.uri){const l=t.external.registry.get(e)?.id;if(!l)throw new Error("Schema is missing an `id` property");s.$id=t.external.uri(l)}Object.assign(s,n.def??n.schema);const a=t.external?.defs??{};for(const l of t.seen.entries()){const u=l[1];u.def&&u.defId&&(a[u.defId]=u.def)}t.external||Object.keys(a).length>0&&(t.target==="draft-2020-12"?s.$defs=a:s.definitions=a);try{const l=JSON.parse(JSON.stringify(s));return Object.defineProperty(l,"~standard",{value:{...e["~standard"],jsonSchema:{input:Gf(e,"input",t.processors),output:Gf(e,"output",t.processors)}},enumerable:!1,writable:!1}),l}catch{throw new Error("Error converting schema to JSON.")}}function kn(t,e){const n=e??{seen:new Set};if(n.seen.has(t))return!1;n.seen.add(t);const r=t._zod.def;if(r.type==="transform")return!0;if(r.type==="array")return kn(r.element,n);if(r.type==="set")return kn(r.valueType,n);if(r.type==="lazy")return kn(r.getter(),n);if(r.type==="promise"||r.type==="optional"||r.type==="nonoptional"||r.type==="nullable"||r.type==="readonly"||r.type==="default"||r.type==="prefault")return kn(r.innerType,n);if(r.type==="intersection")return kn(r.left,n)||kn(r.right,n);if(r.type==="record"||r.type==="map")return kn(r.keyType,n)||kn(r.valueType,n);if(r.type==="pipe")return kn(r.in,n)||kn(r.out,n);if(r.type==="object"){for(const s in r.shape)if(kn(r.shape[s],n))return!0;return!1}if(r.type==="union"){for(const s of r.options)if(kn(s,n))return!0;return!1}if(r.type==="tuple"){for(const s of r.items)if(kn(s,n))return!0;return!!(r.rest&&kn(r.rest,n))}return!1}const dU=(t,e={})=>n=>{const r=TT({...n,processors:e});return fn(t,r),AT(r,t),RT(r,t)},Gf=(t,e,n={})=>r=>{const{libraryOptions:s,target:a}=r??{},l=TT({...s??{},target:a,io:e,processors:n});return fn(t,l),AT(l,t),RT(l,t)},pU={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},mU=(t,e,n,r)=>{const s=n;s.type="string";const{minimum:a,maximum:l,format:u,patterns:f,contentEncoding:h}=t._zod.bag;if(typeof a=="number"&&(s.minLength=a),typeof l=="number"&&(s.maxLength=l),u&&(s.format=pU[u]??u,s.format===""&&delete s.format,u==="time"&&delete s.format),h&&(s.contentEncoding=h),f&&f.size>0){const m=[...f];m.length===1?s.pattern=m[0].source:m.length>1&&(s.allOf=[...m.map(p=>({...e.target==="draft-07"||e.target==="draft-04"||e.target==="openapi-3.0"?{type:"string"}:{},pattern:p.source}))])}},gU=(t,e,n,r)=>{n.not={}},yU=(t,e,n,r)=>{},_U=(t,e,n,r)=>{const s=t._zod.def,a=fT(s.entries);a.every(l=>typeof l=="number")&&(n.type="number"),a.every(l=>typeof l=="string")&&(n.type="string"),n.enum=a},bU=(t,e,n,r)=>{if(e.unrepresentable==="throw")throw new Error("Custom types cannot be represented in JSON Schema")},vU=(t,e,n,r)=>{if(e.unrepresentable==="throw")throw new Error("Transforms cannot be represented in JSON Schema")},xU=(t,e,n,r)=>{const s=n,a=t._zod.def,{minimum:l,maximum:u}=t._zod.bag;typeof l=="number"&&(s.minItems=l),typeof u=="number"&&(s.maxItems=u),s.type="array",s.items=fn(a.element,e,{...r,path:[...r.path,"items"]})},wU=(t,e,n,r)=>{const s=n,a=t._zod.def;s.type="object",s.properties={};const l=a.shape;for(const h in l)s.properties[h]=fn(l[h],e,{...r,path:[...r.path,"properties",h]});const u=new Set(Object.keys(l)),f=new Set([...u].filter(h=>{const m=a.shape[h]._zod;return e.io==="input"?m.optin===void 0:m.optout===void 0}));f.size>0&&(s.required=Array.from(f)),a.catchall?._zod.def.type==="never"?s.additionalProperties=!1:a.catchall?a.catchall&&(s.additionalProperties=fn(a.catchall,e,{...r,path:[...r.path,"additionalProperties"]})):e.io==="output"&&(s.additionalProperties=!1)},SU=(t,e,n,r)=>{const s=t._zod.def,a=s.inclusive===!1,l=s.options.map((u,f)=>fn(u,e,{...r,path:[...r.path,a?"oneOf":"anyOf",f]}));a?n.oneOf=l:n.anyOf=l},kU=(t,e,n,r)=>{const s=t._zod.def,a=fn(s.left,e,{...r,path:[...r.path,"allOf",0]}),l=fn(s.right,e,{...r,path:[...r.path,"allOf",1]}),u=h=>"allOf"in h&&Object.keys(h).length===1,f=[...u(a)?a.allOf:[a],...u(l)?l.allOf:[l]];n.allOf=f},EU=(t,e,n,r)=>{const s=t._zod.def,a=fn(s.innerType,e,r),l=e.seen.get(t);e.target==="openapi-3.0"?(l.ref=s.innerType,n.nullable=!0):n.anyOf=[a,{type:"null"}]},CU=(t,e,n,r)=>{const s=t._zod.def;fn(s.innerType,e,r);const a=e.seen.get(t);a.ref=s.innerType},TU=(t,e,n,r)=>{const s=t._zod.def;fn(s.innerType,e,r);const a=e.seen.get(t);a.ref=s.innerType,n.default=JSON.parse(JSON.stringify(s.defaultValue))},AU=(t,e,n,r)=>{const s=t._zod.def;fn(s.innerType,e,r);const a=e.seen.get(t);a.ref=s.innerType,e.io==="input"&&(n._prefault=JSON.parse(JSON.stringify(s.defaultValue)))},RU=(t,e,n,r)=>{const s=t._zod.def;fn(s.innerType,e,r);const a=e.seen.get(t);a.ref=s.innerType;let l;try{l=s.catchValue(void 0)}catch{throw new Error("Dynamic catch values are not supported in JSON Schema")}n.default=l},OU=(t,e,n,r)=>{const s=t._zod.def,a=e.io==="input"?s.in._zod.def.type==="transform"?s.out:s.in:s.out;fn(a,e,r);const l=e.seen.get(t);l.ref=a},NU=(t,e,n,r)=>{const s=t._zod.def;fn(s.innerType,e,r);const a=e.seen.get(t);a.ref=s.innerType,n.readOnly=!0},OT=(t,e,n,r)=>{const s=t._zod.def;fn(s.innerType,e,r);const a=e.seen.get(t);a.ref=s.innerType},IU=fe("ZodISODateTime",(t,e)=>{VB.init(t,e),St.init(t,e)});function MU(t){return G$(IU,t)}const DU=fe("ZodISODate",(t,e)=>{HB.init(t,e),St.init(t,e)});function LU(t){return K$(DU,t)}const jU=fe("ZodISOTime",(t,e)=>{GB.init(t,e),St.init(t,e)});function zU(t){return Z$(jU,t)}const PU=fe("ZodISODuration",(t,e)=>{KB.init(t,e),St.init(t,e)});function BU(t){return Q$(PU,t)}const $U=(t,e)=>{gT.init(t,e),t.name="ZodError",Object.defineProperties(t,{format:{value:n=>U8(t,n)},flatten:{value:n=>$8(t,n)},addIssue:{value:n=>{t.issues.push(n),t.message=JSON.stringify(t.issues,qg,2)}},addIssues:{value:n=>{t.issues.push(...n),t.message=JSON.stringify(t.issues,qg,2)}},isEmpty:{get(){return t.issues.length===0}}})},wr=fe("ZodError",$U,{Parent:Error}),UU=u0(wr),qU=f0(wr),FU=vh(wr),VU=xh(wr),HU=V8(wr),GU=H8(wr),KU=G8(wr),ZU=K8(wr),QU=Z8(wr),JU=Q8(wr),YU=J8(wr),XU=Y8(wr),Gt=fe("ZodType",(t,e)=>(Ht.init(t,e),Object.assign(t["~standard"],{jsonSchema:{input:Gf(t,"input"),output:Gf(t,"output")}}),t.toJSONSchema=dU(t,{}),t.def=e,t.type=e.type,Object.defineProperty(t,"_def",{value:e}),t.check=(...n)=>t.clone(ei(e,{checks:[...e.checks??[],...n.map(r=>typeof r=="function"?{_zod:{check:r,def:{check:"custom"},onattach:[]}}:r)]}),{parent:!0}),t.with=t.check,t.clone=(n,r)=>ti(t,n,r),t.brand=()=>t,t.register=((n,r)=>(n.add(t,r),t)),t.parse=(n,r)=>UU(t,n,r,{callee:t.parse}),t.safeParse=(n,r)=>FU(t,n,r),t.parseAsync=async(n,r)=>qU(t,n,r,{callee:t.parseAsync}),t.safeParseAsync=async(n,r)=>VU(t,n,r),t.spa=t.safeParseAsync,t.encode=(n,r)=>HU(t,n,r),t.decode=(n,r)=>GU(t,n,r),t.encodeAsync=async(n,r)=>KU(t,n,r),t.decodeAsync=async(n,r)=>ZU(t,n,r),t.safeEncode=(n,r)=>QU(t,n,r),t.safeDecode=(n,r)=>JU(t,n,r),t.safeEncodeAsync=async(n,r)=>YU(t,n,r),t.safeDecodeAsync=async(n,r)=>XU(t,n,r),t.refine=(n,r)=>t.check(F9(n,r)),t.superRefine=n=>t.check(V9(n)),t.overwrite=n=>t.check(eo(n)),t.optional=()=>nS(t),t.exactOptional=()=>O9(t),t.nullable=()=>rS(t),t.nullish=()=>nS(rS(t)),t.nonoptional=n=>j9(t,n),t.array=()=>x9(t),t.or=n=>k9([t,n]),t.and=n=>C9(t,n),t.transform=n=>sS(t,A9(n)),t.default=n=>M9(t,n),t.prefault=n=>L9(t,n),t.catch=n=>P9(t,n),t.pipe=n=>sS(t,n),t.readonly=()=>U9(t),t.describe=n=>{const r=t.clone();return yl.add(r,{description:n}),r},Object.defineProperty(t,"description",{get(){return yl.get(t)?.description},configurable:!0}),t.meta=(...n)=>{if(n.length===0)return yl.get(t);const r=t.clone();return yl.add(r,n[0]),r},t.isOptional=()=>t.safeParse(void 0).success,t.isNullable=()=>t.safeParse(null).success,t.apply=n=>n(t),t)),NT=fe("_ZodString",(t,e)=>{h0.init(t,e),Gt.init(t,e),t._zod.processJSONSchema=(r,s,a)=>mU(t,r,s);const n=t._zod.bag;t.format=n.format??null,t.minLength=n.minimum??null,t.maxLength=n.maximum??null,t.regex=(...r)=>t.check(X$(...r)),t.includes=(...r)=>t.check(tU(...r)),t.startsWith=(...r)=>t.check(nU(...r)),t.endsWith=(...r)=>t.check(rU(...r)),t.min=(...r)=>t.check(Hf(...r)),t.max=(...r)=>t.check(ET(...r)),t.length=(...r)=>t.check(CT(...r)),t.nonempty=(...r)=>t.check(Hf(1,...r)),t.lowercase=r=>t.check(W$(r)),t.uppercase=r=>t.check(eU(r)),t.trim=()=>t.check(iU()),t.normalize=(...r)=>t.check(sU(...r)),t.toLowerCase=()=>t.check(aU()),t.toUpperCase=()=>t.check(oU()),t.slugify=()=>t.check(lU())}),WU=fe("ZodString",(t,e)=>{h0.init(t,e),NT.init(t,e),t.email=n=>t.check(E$(e9,n)),t.url=n=>t.check(O$(t9,n)),t.jwt=n=>t.check(H$(g9,n)),t.emoji=n=>t.check(N$(n9,n)),t.guid=n=>t.check(Ww(eS,n)),t.uuid=n=>t.check(C$(zu,n)),t.uuidv4=n=>t.check(T$(zu,n)),t.uuidv6=n=>t.check(A$(zu,n)),t.uuidv7=n=>t.check(R$(zu,n)),t.nanoid=n=>t.check(I$(r9,n)),t.guid=n=>t.check(Ww(eS,n)),t.cuid=n=>t.check(M$(s9,n)),t.cuid2=n=>t.check(D$(i9,n)),t.ulid=n=>t.check(L$(a9,n)),t.base64=n=>t.check(q$(d9,n)),t.base64url=n=>t.check(F$(p9,n)),t.xid=n=>t.check(j$(o9,n)),t.ksuid=n=>t.check(z$(l9,n)),t.ipv4=n=>t.check(P$(c9,n)),t.ipv6=n=>t.check(B$(u9,n)),t.cidrv4=n=>t.check($$(f9,n)),t.cidrv6=n=>t.check(U$(h9,n)),t.e164=n=>t.check(V$(m9,n)),t.datetime=n=>t.check(MU(n)),t.date=n=>t.check(LU(n)),t.time=n=>t.check(zU(n)),t.duration=n=>t.check(BU(n))});function Ur(t){return k$(WU,t)}const St=fe("ZodStringFormat",(t,e)=>{wt.init(t,e),NT.init(t,e)}),e9=fe("ZodEmail",(t,e)=>{LB.init(t,e),St.init(t,e)}),eS=fe("ZodGUID",(t,e)=>{MB.init(t,e),St.init(t,e)}),zu=fe("ZodUUID",(t,e)=>{DB.init(t,e),St.init(t,e)}),t9=fe("ZodURL",(t,e)=>{jB.init(t,e),St.init(t,e)}),n9=fe("ZodEmoji",(t,e)=>{zB.init(t,e),St.init(t,e)}),r9=fe("ZodNanoID",(t,e)=>{PB.init(t,e),St.init(t,e)}),s9=fe("ZodCUID",(t,e)=>{BB.init(t,e),St.init(t,e)}),i9=fe("ZodCUID2",(t,e)=>{$B.init(t,e),St.init(t,e)}),a9=fe("ZodULID",(t,e)=>{UB.init(t,e),St.init(t,e)}),o9=fe("ZodXID",(t,e)=>{qB.init(t,e),St.init(t,e)}),l9=fe("ZodKSUID",(t,e)=>{FB.init(t,e),St.init(t,e)}),c9=fe("ZodIPv4",(t,e)=>{ZB.init(t,e),St.init(t,e)}),u9=fe("ZodIPv6",(t,e)=>{QB.init(t,e),St.init(t,e)}),f9=fe("ZodCIDRv4",(t,e)=>{JB.init(t,e),St.init(t,e)}),h9=fe("ZodCIDRv6",(t,e)=>{YB.init(t,e),St.init(t,e)}),d9=fe("ZodBase64",(t,e)=>{XB.init(t,e),St.init(t,e)}),p9=fe("ZodBase64URL",(t,e)=>{e$.init(t,e),St.init(t,e)}),m9=fe("ZodE164",(t,e)=>{t$.init(t,e),St.init(t,e)}),g9=fe("ZodJWT",(t,e)=>{r$.init(t,e),St.init(t,e)}),y9=fe("ZodUnknown",(t,e)=>{s$.init(t,e),Gt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>yU()});function tS(){return J$(y9)}const _9=fe("ZodNever",(t,e)=>{i$.init(t,e),Gt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>gU(t,n,r)});function b9(t){return Y$(_9,t)}const v9=fe("ZodArray",(t,e)=>{a$.init(t,e),Gt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>xU(t,n,r,s),t.element=e.element,t.min=(n,r)=>t.check(Hf(n,r)),t.nonempty=n=>t.check(Hf(1,n)),t.max=(n,r)=>t.check(ET(n,r)),t.length=(n,r)=>t.check(CT(n,r)),t.unwrap=()=>t.element});function x9(t,e){return cU(v9,t,e)}const w9=fe("ZodObject",(t,e)=>{l$.init(t,e),Gt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>wU(t,n,r,s),ot(t,"shape",()=>e.shape),t.keyof=()=>d0(Object.keys(t._zod.def.shape)),t.catchall=n=>t.clone({...t._zod.def,catchall:n}),t.passthrough=()=>t.clone({...t._zod.def,catchall:tS()}),t.loose=()=>t.clone({...t._zod.def,catchall:tS()}),t.strict=()=>t.clone({...t._zod.def,catchall:b9()}),t.strip=()=>t.clone({...t._zod.def,catchall:void 0}),t.extend=n=>L8(t,n),t.safeExtend=n=>j8(t,n),t.merge=n=>z8(t,n),t.pick=n=>M8(t,n),t.omit=n=>D8(t,n),t.partial=(...n)=>P8(IT,t,n[0]),t.required=(...n)=>B8(MT,t,n[0])});function Gr(t,e){const n={type:"object",shape:t??{},...Le(e)};return new w9(n)}const S9=fe("ZodUnion",(t,e)=>{c$.init(t,e),Gt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>SU(t,n,r,s),t.options=e.options});function k9(t,e){return new S9({type:"union",options:t,...Le(e)})}const E9=fe("ZodIntersection",(t,e)=>{u$.init(t,e),Gt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>kU(t,n,r,s)});function C9(t,e){return new E9({type:"intersection",left:t,right:e})}const Vg=fe("ZodEnum",(t,e)=>{f$.init(t,e),Gt.init(t,e),t._zod.processJSONSchema=(r,s,a)=>_U(t,r,s),t.enum=e.entries,t.options=Object.values(e.entries);const n=new Set(Object.keys(e.entries));t.extract=(r,s)=>{const a={};for(const l of r)if(n.has(l))a[l]=e.entries[l];else throw new Error(`Key ${l} not found in enum`);return new Vg({...e,checks:[],...Le(s),entries:a})},t.exclude=(r,s)=>{const a={...e.entries};for(const l of r)if(n.has(l))delete a[l];else throw new Error(`Key ${l} not found in enum`);return new Vg({...e,checks:[],...Le(s),entries:a})}});function d0(t,e){const n=Array.isArray(t)?Object.fromEntries(t.map(r=>[r,r])):t;return new Vg({type:"enum",entries:n,...Le(e)})}const T9=fe("ZodTransform",(t,e)=>{h$.init(t,e),Gt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>vU(t,n),t._zod.parse=(n,r)=>{if(r.direction==="backward")throw new cT(t.constructor.name);n.addIssue=a=>{if(typeof a=="string")n.issues.push(Ul(a,n.value,e));else{const l=a;l.fatal&&(l.continue=!1),l.code??(l.code="custom"),l.input??(l.input=n.value),l.inst??(l.inst=t),n.issues.push(Ul(l))}};const s=e.transform(n.value,n);return s instanceof Promise?s.then(a=>(n.value=a,n)):(n.value=s,n)}});function A9(t){return new T9({type:"transform",transform:t})}const IT=fe("ZodOptional",(t,e)=>{kT.init(t,e),Gt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>OT(t,n,r,s),t.unwrap=()=>t._zod.def.innerType});function nS(t){return new IT({type:"optional",innerType:t})}const R9=fe("ZodExactOptional",(t,e)=>{d$.init(t,e),Gt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>OT(t,n,r,s),t.unwrap=()=>t._zod.def.innerType});function O9(t){return new R9({type:"optional",innerType:t})}const N9=fe("ZodNullable",(t,e)=>{p$.init(t,e),Gt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>EU(t,n,r,s),t.unwrap=()=>t._zod.def.innerType});function rS(t){return new N9({type:"nullable",innerType:t})}const I9=fe("ZodDefault",(t,e)=>{m$.init(t,e),Gt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>TU(t,n,r,s),t.unwrap=()=>t._zod.def.innerType,t.removeDefault=t.unwrap});function M9(t,e){return new I9({type:"default",innerType:t,get defaultValue(){return typeof e=="function"?e():dT(e)}})}const D9=fe("ZodPrefault",(t,e)=>{g$.init(t,e),Gt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>AU(t,n,r,s),t.unwrap=()=>t._zod.def.innerType});function L9(t,e){return new D9({type:"prefault",innerType:t,get defaultValue(){return typeof e=="function"?e():dT(e)}})}const MT=fe("ZodNonOptional",(t,e)=>{y$.init(t,e),Gt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>CU(t,n,r,s),t.unwrap=()=>t._zod.def.innerType});function j9(t,e){return new MT({type:"nonoptional",innerType:t,...Le(e)})}const z9=fe("ZodCatch",(t,e)=>{_$.init(t,e),Gt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>RU(t,n,r,s),t.unwrap=()=>t._zod.def.innerType,t.removeCatch=t.unwrap});function P9(t,e){return new z9({type:"catch",innerType:t,catchValue:typeof e=="function"?e:()=>e})}const B9=fe("ZodPipe",(t,e)=>{b$.init(t,e),Gt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>OU(t,n,r,s),t.in=e.in,t.out=e.out});function sS(t,e){return new B9({type:"pipe",in:t,out:e})}const $9=fe("ZodReadonly",(t,e)=>{v$.init(t,e),Gt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>NU(t,n,r,s),t.unwrap=()=>t._zod.def.innerType});function U9(t){return new $9({type:"readonly",innerType:t})}const q9=fe("ZodCustom",(t,e)=>{x$.init(t,e),Gt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>bU(t,n)});function F9(t,e={}){return uU(q9,t,e)}function V9(t){return fU(t)}const iS=10*1024;function H9(t){try{const e=JSON.parse(t);return JSON.stringify(e,null,2)}catch{return t}}function G9(t){return t?t.length<=iS?t:t.slice(0,iS)+`
...[TRUNCATED]`:"(empty)"}function K9(t){const e=t.http?.body??{type:"none"},n=e.type==="json"||e.type==="raw"?e.content:e.type==="form-urlencoded"?e.data:e.type==="form-data"?e.data.map(r=>({key:r.key,type:r.type,value:r.type==="file"?r.file?.name:r.value})):null;return{method:t.http?.method??"GET",url:t.url,headers:(t.http?.headers??[]).filter(r=>r.enabled!==!1),queryParams:(t.http?.query??[]).filter(r=>r.enabled!==!1),body:{type:e.type,content:n}}}function Z9(t,e){const n=t.http?.response;return n?{status:n.status,statusCode:n.statusCode,headers:n.headers,body:G9(e),duration:n.duration}:null}const DT=Gr({}),Q9=Gr({method:d0(["GET","POST","PUT","PATCH","DELETE","OPTIONS","HEAD"]).describe("The HTTP method")}),J9=Gr({url:Ur().describe("The full URL for the request")}),Y9=Gr({headers:Ur().describe('JSON array of header objects with "key", "value", and optional "enabled" (default true) properties. Example: [{"key": "Content-Type", "value": "application/json"}]')}),X9=Gr({key:Ur().describe("The header name"),value:Ur().describe("The header value")}),W9=Gr({params:Ur().describe('JSON array of parameter objects with "key", "value", and optional "enabled" (default true) properties. Example: [{"key": "page", "value": "1"}]')}),eq=Gr({key:Ur().describe("The parameter name"),value:Ur().describe("The parameter value")}),tq=Gr({type:d0(["none","json","xml","form-urlencoded","form-data","raw"]).describe("The body type"),content:Ur().optional().describe("The body content. For JSON/XML/raw, provide the content string. For form-urlencoded/form-data, provide JSON array like headers/params. Note: form-data only supports text fields (not file uploads) via this tool.")}),nq=Gr({key:Ur().describe("The header name to remove (case-insensitive)")}),rq=Gr({key:Ur().describe("The query parameter name to remove")}),sq=Or({name:"get_current_request",description:"Get the current HTTP request configuration including method, URL, headers, query params, and body",inputSchema:DT}),iq=Or({name:"get_response",description:"Get the response from the last executed request, including status, headers, and body",inputSchema:DT}),aq=Or({name:"set_method",description:"Set the HTTP method for the request",inputSchema:Q9}),oq=Or({name:"set_url",description:"Set the URL for the request",inputSchema:J9}),lq=Or({name:"set_headers",description:"Set the headers for the request. This replaces all existing headers.",inputSchema:Y9}),cq=Or({name:"add_header",description:"Add a single header to the request",inputSchema:X9}),uq=Or({name:"set_query_params",description:"Set the query parameters for the request. This replaces all existing query params.",inputSchema:W9}),fq=Or({name:"add_query_param",description:"Add a single query parameter to the request",inputSchema:eq}),hq=Or({name:"set_body",description:"Set the request body",inputSchema:tq}),dq=Or({name:"remove_header",description:"Remove a header from the request by name",inputSchema:nq}),pq=Or({name:"remove_query_param",description:"Remove a query parameter from the request by name",inputSchema:rq});function mq(t){const{request:e,setters:n,responseBodyText:r}=t,s=sq.client(async()=>K9(e)),a=iq.client(async()=>Z9(e,r)||{error:"No response available. Execute the request first."}),l=aq.client(async x=>{const E=x;return n.setMethod(E.method),{success:!0,method:E.method}}),u=oq.client(async x=>{const E=x;return n.setUrl(E.url),{success:!0,url:E.url}}),f=lq.client(async x=>{const E=x;try{const S=JSON.parse(E.headers).map(C=>({id:$n(),key:C.key,value:C.value,enabled:C.enabled!==!1}));return n.setHeaders(S),{success:!0,headerCount:S.length}}catch(S){return{success:!1,error:`Invalid JSON for headers: ${S instanceof Error?S.message:"parse error"}`}}}),h=cq.client(async x=>{const E=x,C=[...e.http?.headers??[],{id:$n(),key:E.key,value:E.value,enabled:!0}];return n.setHeaders(C),{success:!0,added:{key:E.key,value:E.value}}}),m=uq.client(async x=>{const E=x;try{const S=JSON.parse(E.params).map(C=>({id:$n(),key:C.key,value:C.value,enabled:C.enabled!==!1}));return n.setQuery(S),{success:!0,paramCount:S.length}}catch(S){return{success:!1,error:`Invalid JSON for query params: ${S instanceof Error?S.message:"parse error"}`}}}),p=fq.client(async x=>{const E=x,C=[...e.http?.query??[],{id:$n(),key:E.key,value:E.value,enabled:!0}];return n.setQuery(C),{success:!0,added:{key:E.key,value:E.value}}}),y=hq.client(async x=>{const E=x;try{let S;switch(E.type){case"none":S={type:"none"};break;case"json":S={type:"json",content:H9(E.content||"")};break;case"xml":S={type:"xml",content:E.content||""};break;case"raw":S={type:"raw",content:E.content||""};break;case"form-urlencoded":{S={type:"form-urlencoded",data:E.content?JSON.parse(E.content).map(T=>({id:$n(),key:T.key,value:T.value,enabled:T.enabled!==!1})):[]};break}case"form-data":{S={type:"form-data",data:E.content?JSON.parse(E.content).map(T=>({id:$n(),key:T.key,type:"text",value:T.value||"",enabled:T.enabled!==!1,file:null,fileName:""})):[]};break}default:S={type:"none"}}return n.setBody(S),{success:!0,bodyType:E.type}}catch(S){return{success:!1,error:`Invalid body content: ${S instanceof Error?S.message:"parse error"}`}}}),g=dq.client(async x=>{const E=x,S=E.key.toLowerCase(),C=e.http?.headers??[],T=C.filter(D=>D.key.toLowerCase()!==S),L=C.length-T.length;return L===0?{success:!1,error:`Header '${E.key}' not found`}:(n.setHeaders(T),{success:!0,removed:E.key,removedCount:L})}),v=pq.client(async x=>{const E=x,S=e.http?.query??[],C=S.filter(L=>L.key!==E.key),T=S.length-C.length;return T===0?{success:!1,error:`Query parameter '${E.key}' not found`}:(n.setQuery(C),{success:!0,removed:E.key,removedCount:T})});return JP(s,a,l,u,f,h,g,m,p,v,y)}function gq(){return`You are an AI assistant embedded in an HTTP client (similar to Postman or Insomnia). You have tools that directly modify the request form visible to the user in real-time.

IMPORTANT: When you use tools like set_url, set_headers, set_body, etc., the changes appear immediately in the user's request panel. You are actively editing their requestnot just describing what to do. The user sees updates live as you make them.

Your capabilities:
- View the current request configuration (method, URL, headers, query params, body)
- Directly modify any part of the requestchanges are applied instantly to the UI
- View and analyze responses after the user executes the request

Guidelines:
- When the user asks to create or modify a request, use the appropriate tools to make the changes directly
- After making changes, briefly confirm what you did (e.g., "I've set the URL to ... and added the Authorization header")
- You cannot execute/send requeststhe user must click Send. After they do, you can analyze the response using get_response
- When analyzing responses, look for errors, unexpected data, or issues
- Be concise but helpful in your explanations
- If the user's request is ambiguous, ask for clarification
- When adding headers or params, preserve existing ones unless the user asks to replace them
- Format your responses using Markdown: use **bold**, \`code\`, code blocks with language tags, lists, and headers when appropriate`}const aS={name:"Request Assistant",placeholder:"Ask about your request..."};const yq=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,_q=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,bq={};function oS(t,e){return(bq.jsx?_q:yq).test(t)}var Ta={},km,lS;function vq(){if(lS)return km;lS=1;var t=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,e=/\n/g,n=/^\s*/,r=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,s=/^:\s*/,a=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,l=/^[;\s]*/,u=/^\s+|\s+$/g,f=`
`,h="/",m="*",p="",y="comment",g="declaration";function v(E,S){if(typeof E!="string")throw new TypeError("First argument must be a string");if(!E)return[];S=S||{};var C=1,T=1;function L(P){var U=P.match(e);U&&(C+=U.length);var z=P.lastIndexOf(f);T=~z?P.length-z:T+P.length}function D(){var P={line:C,column:T};return function(U){return U.position=new N(P),G(),U}}function N(P){this.start=P,this.end={line:C,column:T},this.source=S.source}N.prototype.content=E;function B(P){var U=new Error(S.source+":"+C+":"+T+": "+P);if(U.reason=P,U.filename=S.source,U.line=C,U.column=T,U.source=E,!S.silent)throw U}function K(P){var U=P.exec(E);if(U){var z=U[0];return L(z),E=E.slice(z.length),U}}function G(){K(n)}function j(P){var U;for(P=P||[];U=J();)U!==!1&&P.push(U);return P}function J(){var P=D();if(!(h!=E.charAt(0)||m!=E.charAt(1))){for(var U=2;p!=E.charAt(U)&&(m!=E.charAt(U)||h!=E.charAt(U+1));)++U;if(U+=2,p===E.charAt(U-1))return B("End of comment missing");var z=E.slice(2,U-2);return T+=2,L(z),E=E.slice(U),T+=2,P({type:y,comment:z})}}function ie(){var P=D(),U=K(r);if(U){if(J(),!K(s))return B("property missing ':'");var z=K(a),F=P({type:g,property:x(U[0].replace(t,p)),value:z?x(z[0].replace(t,p)):p});return K(l),F}}function q(){var P=[];j(P);for(var U;U=ie();)U!==!1&&(P.push(U),j(P));return P}return G(),q()}function x(E){return E?E.replace(u,p):p}return km=v,km}var cS;function xq(){if(cS)return Ta;cS=1;var t=Ta&&Ta.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ta,"__esModule",{value:!0}),Ta.default=n;const e=t(vq());function n(r,s){let a=null;if(!r||typeof r!="string")return a;const l=(0,e.default)(r),u=typeof s=="function";return l.forEach(f=>{if(f.type!=="declaration")return;const{property:h,value:m}=f;u?s(h,m,f):m&&(a=a||{},a[h]=m)}),a}return Ta}var Wo={},uS;function wq(){if(uS)return Wo;uS=1,Object.defineProperty(Wo,"__esModule",{value:!0}),Wo.camelCase=void 0;var t=/^--[a-zA-Z0-9_-]+$/,e=/-([a-z])/g,n=/^[^-]+$/,r=/^-(webkit|moz|ms|o|khtml)-/,s=/^-(ms)-/,a=function(h){return!h||n.test(h)||t.test(h)},l=function(h,m){return m.toUpperCase()},u=function(h,m){return"".concat(m,"-")},f=function(h,m){return m===void 0&&(m={}),a(h)?h:(h=h.toLowerCase(),m.reactCompat?h=h.replace(s,u):h=h.replace(r,u),h.replace(e,l))};return Wo.camelCase=f,Wo}var el,fS;function Sq(){if(fS)return el;fS=1;var t=el&&el.__importDefault||function(s){return s&&s.__esModule?s:{default:s}},e=t(xq()),n=wq();function r(s,a){var l={};return!s||typeof s!="string"||(0,e.default)(s,function(u,f){u&&f&&(l[(0,n.camelCase)(u,a)]=f)}),l}return r.default=r,el=r,el}var kq=Sq();const Eq=KS(kq),LT=jT("end"),p0=jT("start");function jT(t){return e;function e(n){const r=n&&n.position&&n.position[t]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function Cq(t){const e=p0(t),n=LT(t);if(e&&n)return{start:e,end:n}}function Cl(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?hS(t.position):"start"in t||"end"in t?hS(t):"line"in t||"column"in t?Hg(t):""}function Hg(t){return dS(t&&t.line)+":"+dS(t&&t.column)}function hS(t){return Hg(t&&t.start)+"-"+Hg(t&&t.end)}function dS(t){return t&&typeof t=="number"?t:1}class vn extends Error{constructor(e,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let s="",a={},l=!1;if(n&&("line"in n&&"column"in n?a={place:n}:"start"in n&&"end"in n?a={place:n}:"type"in n?a={ancestors:[n],place:n.position}:a={...n}),typeof e=="string"?s=e:!a.cause&&e&&(l=!0,s=e.message,a.cause=e),!a.ruleId&&!a.source&&typeof r=="string"){const f=r.indexOf(":");f===-1?a.ruleId=r:(a.source=r.slice(0,f),a.ruleId=r.slice(f+1))}if(!a.place&&a.ancestors&&a.ancestors){const f=a.ancestors[a.ancestors.length-1];f&&(a.place=f.position)}const u=a.place&&"start"in a.place?a.place.start:a.place;this.ancestors=a.ancestors||void 0,this.cause=a.cause||void 0,this.column=u?u.column:void 0,this.fatal=void 0,this.file="",this.message=s,this.line=u?u.line:void 0,this.name=Cl(a.place)||"1:1",this.place=a.place||void 0,this.reason=this.message,this.ruleId=a.ruleId||void 0,this.source=a.source||void 0,this.stack=l&&a.cause&&typeof a.cause.stack=="string"?a.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}vn.prototype.file="";vn.prototype.name="";vn.prototype.reason="";vn.prototype.message="";vn.prototype.stack="";vn.prototype.column=void 0;vn.prototype.line=void 0;vn.prototype.ancestors=void 0;vn.prototype.cause=void 0;vn.prototype.fatal=void 0;vn.prototype.place=void 0;vn.prototype.ruleId=void 0;vn.prototype.source=void 0;const m0={}.hasOwnProperty,Tq=new Map,Aq=/[A-Z]/g,Rq=new Set(["table","tbody","thead","tfoot","tr"]),Oq=new Set(["td","th"]),zT="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function Nq(t,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=e.filePath||void 0;let r;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=Bq(n,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=Pq(n,e.jsx,e.jsxs)}const s={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:r,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?Xl:aE,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},a=PT(s,t,void 0);return a&&typeof a!="string"?a:s.create(t,s.Fragment,{children:a||void 0},void 0)}function PT(t,e,n){if(e.type==="element")return Iq(t,e,n);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return Mq(t,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return Lq(t,e,n);if(e.type==="mdxjsEsm")return Dq(t,e);if(e.type==="root")return jq(t,e,n);if(e.type==="text")return zq(t,e)}function Iq(t,e,n){const r=t.schema;let s=r;e.tagName.toLowerCase()==="svg"&&r.space==="html"&&(s=Xl,t.schema=s),t.ancestors.push(e);const a=$T(t,e.tagName,!1),l=$q(t,e);let u=y0(t,e);return Rq.has(e.tagName)&&(u=u.filter(function(f){return typeof f=="string"?!nh(f):!0})),BT(t,l,a,e),g0(l,u),t.ancestors.pop(),t.schema=r,t.create(e,a,l,n)}function Mq(t,e){if(e.data&&e.data.estree&&t.evaluater){const r=e.data.estree.body[0];return r.type,t.evaluater.evaluateExpression(r.expression)}ql(t,e.position)}function Dq(t,e){if(e.data&&e.data.estree&&t.evaluater)return t.evaluater.evaluateProgram(e.data.estree);ql(t,e.position)}function Lq(t,e,n){const r=t.schema;let s=r;e.name==="svg"&&r.space==="html"&&(s=Xl,t.schema=s),t.ancestors.push(e);const a=e.name===null?t.Fragment:$T(t,e.name,!0),l=Uq(t,e),u=y0(t,e);return BT(t,l,a,e),g0(l,u),t.ancestors.pop(),t.schema=r,t.create(e,a,l,n)}function jq(t,e,n){const r={};return g0(r,y0(t,e)),t.create(e,t.Fragment,r,n)}function zq(t,e){return e.value}function BT(t,e,n,r){typeof n!="string"&&n!==t.Fragment&&t.passNode&&(e.node=r)}function g0(t,e){if(e.length>0){const n=e.length>1?e:e[0];n&&(t.children=n)}}function Pq(t,e,n){return r;function r(s,a,l,u){const h=Array.isArray(l.children)?n:e;return u?h(a,l,u):h(a,l)}}function Bq(t,e){return n;function n(r,s,a,l){const u=Array.isArray(a.children),f=p0(r);return e(s,a,l,u,{columnNumber:f?f.column-1:void 0,fileName:t,lineNumber:f?f.line:void 0},void 0)}}function $q(t,e){const n={};let r,s;for(s in e.properties)if(s!=="children"&&m0.call(e.properties,s)){const a=qq(t,s,e.properties[s]);if(a){const[l,u]=a;t.tableCellAlignToStyle&&l==="align"&&typeof u=="string"&&Oq.has(e.tagName)?r=u:n[l]=u}}if(r){const a=n.style||(n.style={});a[t.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function Uq(t,e){const n={};for(const r of e.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&t.evaluater){const a=r.data.estree.body[0];a.type;const l=a.expression;l.type;const u=l.properties[0];u.type,Object.assign(n,t.evaluater.evaluateExpression(u.argument))}else ql(t,e.position);else{const s=r.name;let a;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&t.evaluater){const u=r.value.data.estree.body[0];u.type,a=t.evaluater.evaluateExpression(u.expression)}else ql(t,e.position);else a=r.value===null?!0:r.value;n[s]=a}return n}function y0(t,e){const n=[];let r=-1;const s=t.passKeys?new Map:Tq;for(;++r<e.children.length;){const a=e.children[r];let l;if(t.passKeys){const f=a.type==="element"?a.tagName:a.type==="mdxJsxFlowElement"||a.type==="mdxJsxTextElement"?a.name:void 0;if(f){const h=s.get(f)||0;l=f+"-"+h,s.set(f,h+1)}}const u=PT(t,a,l);u!==void 0&&n.push(u)}return n}function qq(t,e,n){const r=iE(t.schema,e);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?lE(n):cE(n)),r.property==="style"){let s=typeof n=="object"?n:Fq(t,String(n));return t.stylePropertyNameCase==="css"&&(s=Vq(s)),["style",s]}return[t.elementAttributeNameCase==="react"&&r.space?gj[r.property]||r.property:r.attribute,n]}}function Fq(t,e){try{return Eq(e,{reactCompat:!0})}catch(n){if(t.ignoreInvalidStyle)return{};const r=n,s=new vn("Cannot parse `style` attribute",{ancestors:t.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw s.file=t.filePath||void 0,s.url=zT+"#cannot-parse-style-attribute",s}}function $T(t,e,n){let r;if(!n)r={type:"Literal",value:e};else if(e.includes(".")){const s=e.split(".");let a=-1,l;for(;++a<s.length;){const u=oS(s[a])?{type:"Identifier",name:s[a]}:{type:"Literal",value:s[a]};l=l?{type:"MemberExpression",object:l,property:u,computed:!!(a&&u.type==="Literal"),optional:!1}:u}r=l}else r=oS(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(r.type==="Literal"){const s=r.value;return m0.call(t.components,s)?t.components[s]:s}if(t.evaluater)return t.evaluater.evaluateExpression(r);ql(t)}function ql(t,e){const n=new vn("Cannot handle MDX estrees without `createEvaluater`",{ancestors:t.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=t.filePath||void 0,n.url=zT+"#cannot-handle-mdx-estrees-without-createevaluater",n}function Vq(t){const e={};let n;for(n in t)m0.call(t,n)&&(e[Hq(n)]=t[n]);return e}function Hq(t){let e=t.replace(Aq,Gq);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function Gq(t){return"-"+t.toLowerCase()}const Em={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},Kq={};function _0(t,e){const n=Kq,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,s=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return UT(t,r,s)}function UT(t,e,n){if(Zq(t)){if("value"in t)return t.type==="html"&&!n?"":t.value;if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return pS(t.children,e,n)}return Array.isArray(t)?pS(t,e,n):""}function pS(t,e,n){const r=[];let s=-1;for(;++s<t.length;)r[s]=UT(t[s],e,n);return r.join("")}function Zq(t){return!!(t&&typeof t=="object")}const mS=document.createElement("i");function b0(t){const e="&"+t+";";mS.innerHTML=e;const n=mS.textContent;return n.charCodeAt(n.length-1)===59&&t!=="semi"||n===e?!1:n}function nr(t,e,n,r){const s=t.length;let a=0,l;if(e<0?e=-e>s?0:s+e:e=e>s?s:e,n=n>0?n:0,r.length<1e4)l=Array.from(r),l.unshift(e,n),t.splice(...l);else for(n&&t.splice(e,n);a<r.length;)l=r.slice(a,a+1e4),l.unshift(e,0),t.splice(...l),a+=1e4,e+=1e4}function _r(t,e){return t.length>0?(nr(t,t.length,0,e),t):e}const gS={}.hasOwnProperty;function qT(t){const e={};let n=-1;for(;++n<t.length;)Qq(e,t[n]);return e}function Qq(t,e){let n;for(n in e){const s=(gS.call(t,n)?t[n]:void 0)||(t[n]={}),a=e[n];let l;if(a)for(l in a){gS.call(s,l)||(s[l]=[]);const u=a[l];Jq(s[l],Array.isArray(u)?u:u?[u]:[])}}}function Jq(t,e){let n=-1;const r=[];for(;++n<e.length;)(e[n].add==="after"?t:r).push(e[n]);nr(t,0,0,r)}function FT(t,e){const n=Number.parseInt(t,e);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function Rr(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const An=ni(/[A-Za-z]/),bn=ni(/[\dA-Za-z]/),Yq=ni(/[#-'*+\--9=?A-Z^-~]/);function Kf(t){return t!==null&&(t<32||t===127)}const Gg=ni(/\d/),Xq=ni(/[\dA-Fa-f]/),Wq=ni(/[!-/:-@[-`{-~]/);function Ae(t){return t!==null&&t<-2}function mt(t){return t!==null&&(t<0||t===32)}function He(t){return t===-2||t===-1||t===32}const Sh=ni(new RegExp("\\p{P}|\\p{S}","u")),Li=ni(/\s/);function ni(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function to(t){const e=[];let n=-1,r=0,s=0;for(;++n<t.length;){const a=t.charCodeAt(n);let l="";if(a===37&&bn(t.charCodeAt(n+1))&&bn(t.charCodeAt(n+2)))s=2;else if(a<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(a))||(l=String.fromCharCode(a));else if(a>55295&&a<57344){const u=t.charCodeAt(n+1);a<56320&&u>56319&&u<57344?(l=String.fromCharCode(a,u),s=1):l=""}else l=String.fromCharCode(a);l&&(e.push(t.slice(r,n),encodeURIComponent(l)),r=n+s+1,l=""),s&&(n+=s,s=0)}return e.join("")+t.slice(r)}function Xe(t,e,n,r){const s=r?r-1:Number.POSITIVE_INFINITY;let a=0;return l;function l(f){return He(f)?(t.enter(n),u(f)):e(f)}function u(f){return He(f)&&a++<s?(t.consume(f),u):(t.exit(n),e(f))}}const eF={tokenize:tF};function tF(t){const e=t.attempt(this.parser.constructs.contentInitial,r,s);let n;return e;function r(u){if(u===null){t.consume(u);return}return t.enter("lineEnding"),t.consume(u),t.exit("lineEnding"),Xe(t,e,"linePrefix")}function s(u){return t.enter("paragraph"),a(u)}function a(u){const f=t.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=f),n=f,l(u)}function l(u){if(u===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(u);return}return Ae(u)?(t.consume(u),t.exit("chunkText"),a):(t.consume(u),l)}}const nF={tokenize:rF},yS={tokenize:sF};function rF(t){const e=this,n=[];let r=0,s,a,l;return u;function u(T){if(r<n.length){const L=n[r];return e.containerState=L[1],t.attempt(L[0].continuation,f,h)(T)}return h(T)}function f(T){if(r++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,s&&C();const L=e.events.length;let D=L,N;for(;D--;)if(e.events[D][0]==="exit"&&e.events[D][1].type==="chunkFlow"){N=e.events[D][1].end;break}S(r);let B=L;for(;B<e.events.length;)e.events[B][1].end={...N},B++;return nr(e.events,D+1,0,e.events.slice(L)),e.events.length=B,h(T)}return u(T)}function h(T){if(r===n.length){if(!s)return y(T);if(s.currentConstruct&&s.currentConstruct.concrete)return v(T);e.interrupt=!!(s.currentConstruct&&!s._gfmTableDynamicInterruptHack)}return e.containerState={},t.check(yS,m,p)(T)}function m(T){return s&&C(),S(r),y(T)}function p(T){return e.parser.lazy[e.now().line]=r!==n.length,l=e.now().offset,v(T)}function y(T){return e.containerState={},t.attempt(yS,g,v)(T)}function g(T){return r++,n.push([e.currentConstruct,e.containerState]),y(T)}function v(T){if(T===null){s&&C(),S(0),t.consume(T);return}return s=s||e.parser.flow(e.now()),t.enter("chunkFlow",{_tokenizer:s,contentType:"flow",previous:a}),x(T)}function x(T){if(T===null){E(t.exit("chunkFlow"),!0),S(0),t.consume(T);return}return Ae(T)?(t.consume(T),E(t.exit("chunkFlow")),r=0,e.interrupt=void 0,u):(t.consume(T),x)}function E(T,L){const D=e.sliceStream(T);if(L&&D.push(null),T.previous=a,a&&(a.next=T),a=T,s.defineSkip(T.start),s.write(D),e.parser.lazy[T.start.line]){let N=s.events.length;for(;N--;)if(s.events[N][1].start.offset<l&&(!s.events[N][1].end||s.events[N][1].end.offset>l))return;const B=e.events.length;let K=B,G,j;for(;K--;)if(e.events[K][0]==="exit"&&e.events[K][1].type==="chunkFlow"){if(G){j=e.events[K][1].end;break}G=!0}for(S(r),N=B;N<e.events.length;)e.events[N][1].end={...j},N++;nr(e.events,K+1,0,e.events.slice(B)),e.events.length=N}}function S(T){let L=n.length;for(;L-- >T;){const D=n[L];e.containerState=D[1],D[0].exit.call(e,t)}n.length=T}function C(){s.write([null]),a=void 0,s=void 0,e.containerState._closeFlow=void 0}}function sF(t,e,n){return Xe(t,t.attempt(this.parser.constructs.document,e,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Ga(t){if(t===null||mt(t)||Li(t))return 1;if(Sh(t))return 2}function kh(t,e,n){const r=[];let s=-1;for(;++s<t.length;){const a=t[s].resolveAll;a&&!r.includes(a)&&(e=a(e,n),r.push(a))}return e}const Kg={name:"attention",resolveAll:iF,tokenize:aF};function iF(t,e){let n=-1,r,s,a,l,u,f,h,m;for(;++n<t.length;)if(t[n][0]==="enter"&&t[n][1].type==="attentionSequence"&&t[n][1]._close){for(r=n;r--;)if(t[r][0]==="exit"&&t[r][1].type==="attentionSequence"&&t[r][1]._open&&e.sliceSerialize(t[r][1]).charCodeAt(0)===e.sliceSerialize(t[n][1]).charCodeAt(0)){if((t[r][1]._close||t[n][1]._open)&&(t[n][1].end.offset-t[n][1].start.offset)%3&&!((t[r][1].end.offset-t[r][1].start.offset+t[n][1].end.offset-t[n][1].start.offset)%3))continue;f=t[r][1].end.offset-t[r][1].start.offset>1&&t[n][1].end.offset-t[n][1].start.offset>1?2:1;const p={...t[r][1].end},y={...t[n][1].start};_S(p,-f),_S(y,f),l={type:f>1?"strongSequence":"emphasisSequence",start:p,end:{...t[r][1].end}},u={type:f>1?"strongSequence":"emphasisSequence",start:{...t[n][1].start},end:y},a={type:f>1?"strongText":"emphasisText",start:{...t[r][1].end},end:{...t[n][1].start}},s={type:f>1?"strong":"emphasis",start:{...l.start},end:{...u.end}},t[r][1].end={...l.start},t[n][1].start={...u.end},h=[],t[r][1].end.offset-t[r][1].start.offset&&(h=_r(h,[["enter",t[r][1],e],["exit",t[r][1],e]])),h=_r(h,[["enter",s,e],["enter",l,e],["exit",l,e],["enter",a,e]]),h=_r(h,kh(e.parser.constructs.insideSpan.null,t.slice(r+1,n),e)),h=_r(h,[["exit",a,e],["enter",u,e],["exit",u,e],["exit",s,e]]),t[n][1].end.offset-t[n][1].start.offset?(m=2,h=_r(h,[["enter",t[n][1],e],["exit",t[n][1],e]])):m=0,nr(t,r-1,n-r+3,h),n=r+h.length-m-2;break}}for(n=-1;++n<t.length;)t[n][1].type==="attentionSequence"&&(t[n][1].type="data");return t}function aF(t,e){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,s=Ga(r);let a;return l;function l(f){return a=f,t.enter("attentionSequence"),u(f)}function u(f){if(f===a)return t.consume(f),u;const h=t.exit("attentionSequence"),m=Ga(f),p=!m||m===2&&s||n.includes(f),y=!s||s===2&&m||n.includes(r);return h._open=!!(a===42?p:p&&(s||!y)),h._close=!!(a===42?y:y&&(m||!p)),e(f)}}function _S(t,e){t.column+=e,t.offset+=e,t._bufferIndex+=e}const oF={name:"autolink",tokenize:lF};function lF(t,e,n){let r=0;return s;function s(g){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(g),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),a}function a(g){return An(g)?(t.consume(g),l):g===64?n(g):h(g)}function l(g){return g===43||g===45||g===46||bn(g)?(r=1,u(g)):h(g)}function u(g){return g===58?(t.consume(g),r=0,f):(g===43||g===45||g===46||bn(g))&&r++<32?(t.consume(g),u):(r=0,h(g))}function f(g){return g===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(g),t.exit("autolinkMarker"),t.exit("autolink"),e):g===null||g===32||g===60||Kf(g)?n(g):(t.consume(g),f)}function h(g){return g===64?(t.consume(g),m):Yq(g)?(t.consume(g),h):n(g)}function m(g){return bn(g)?p(g):n(g)}function p(g){return g===46?(t.consume(g),r=0,m):g===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(g),t.exit("autolinkMarker"),t.exit("autolink"),e):y(g)}function y(g){if((g===45||bn(g))&&r++<63){const v=g===45?y:p;return t.consume(g),v}return n(g)}}const nc={partial:!0,tokenize:cF};function cF(t,e,n){return r;function r(a){return He(a)?Xe(t,s,"linePrefix")(a):s(a)}function s(a){return a===null||Ae(a)?e(a):n(a)}}const VT={continuation:{tokenize:fF},exit:hF,name:"blockQuote",tokenize:uF};function uF(t,e,n){const r=this;return s;function s(l){if(l===62){const u=r.containerState;return u.open||(t.enter("blockQuote",{_container:!0}),u.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(l),t.exit("blockQuoteMarker"),a}return n(l)}function a(l){return He(l)?(t.enter("blockQuotePrefixWhitespace"),t.consume(l),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),e):(t.exit("blockQuotePrefix"),e(l))}}function fF(t,e,n){const r=this;return s;function s(l){return He(l)?Xe(t,a,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l):a(l)}function a(l){return t.attempt(VT,e,n)(l)}}function hF(t){t.exit("blockQuote")}const HT={name:"characterEscape",tokenize:dF};function dF(t,e,n){return r;function r(a){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(a),t.exit("escapeMarker"),s}function s(a){return Wq(a)?(t.enter("characterEscapeValue"),t.consume(a),t.exit("characterEscapeValue"),t.exit("characterEscape"),e):n(a)}}const GT={name:"characterReference",tokenize:pF};function pF(t,e,n){const r=this;let s=0,a,l;return u;function u(p){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(p),t.exit("characterReferenceMarker"),f}function f(p){return p===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(p),t.exit("characterReferenceMarkerNumeric"),h):(t.enter("characterReferenceValue"),a=31,l=bn,m(p))}function h(p){return p===88||p===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(p),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),a=6,l=Xq,m):(t.enter("characterReferenceValue"),a=7,l=Gg,m(p))}function m(p){if(p===59&&s){const y=t.exit("characterReferenceValue");return l===bn&&!b0(r.sliceSerialize(y))?n(p):(t.enter("characterReferenceMarker"),t.consume(p),t.exit("characterReferenceMarker"),t.exit("characterReference"),e)}return l(p)&&s++<a?(t.consume(p),m):n(p)}}const bS={partial:!0,tokenize:gF},vS={concrete:!0,name:"codeFenced",tokenize:mF};function mF(t,e,n){const r=this,s={partial:!0,tokenize:D};let a=0,l=0,u;return f;function f(N){return h(N)}function h(N){const B=r.events[r.events.length-1];return a=B&&B[1].type==="linePrefix"?B[2].sliceSerialize(B[1],!0).length:0,u=N,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),m(N)}function m(N){return N===u?(l++,t.consume(N),m):l<3?n(N):(t.exit("codeFencedFenceSequence"),He(N)?Xe(t,p,"whitespace")(N):p(N))}function p(N){return N===null||Ae(N)?(t.exit("codeFencedFence"),r.interrupt?e(N):t.check(bS,x,L)(N)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),y(N))}function y(N){return N===null||Ae(N)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),p(N)):He(N)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),Xe(t,g,"whitespace")(N)):N===96&&N===u?n(N):(t.consume(N),y)}function g(N){return N===null||Ae(N)?p(N):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),v(N))}function v(N){return N===null||Ae(N)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),p(N)):N===96&&N===u?n(N):(t.consume(N),v)}function x(N){return t.attempt(s,L,E)(N)}function E(N){return t.enter("lineEnding"),t.consume(N),t.exit("lineEnding"),S}function S(N){return a>0&&He(N)?Xe(t,C,"linePrefix",a+1)(N):C(N)}function C(N){return N===null||Ae(N)?t.check(bS,x,L)(N):(t.enter("codeFlowValue"),T(N))}function T(N){return N===null||Ae(N)?(t.exit("codeFlowValue"),C(N)):(t.consume(N),T)}function L(N){return t.exit("codeFenced"),e(N)}function D(N,B,K){let G=0;return j;function j(U){return N.enter("lineEnding"),N.consume(U),N.exit("lineEnding"),J}function J(U){return N.enter("codeFencedFence"),He(U)?Xe(N,ie,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(U):ie(U)}function ie(U){return U===u?(N.enter("codeFencedFenceSequence"),q(U)):K(U)}function q(U){return U===u?(G++,N.consume(U),q):G>=l?(N.exit("codeFencedFenceSequence"),He(U)?Xe(N,P,"whitespace")(U):P(U)):K(U)}function P(U){return U===null||Ae(U)?(N.exit("codeFencedFence"),B(U)):K(U)}}}function gF(t,e,n){const r=this;return s;function s(l){return l===null?n(l):(t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),a)}function a(l){return r.parser.lazy[r.now().line]?n(l):e(l)}}const Cm={name:"codeIndented",tokenize:_F},yF={partial:!0,tokenize:bF};function _F(t,e,n){const r=this;return s;function s(h){return t.enter("codeIndented"),Xe(t,a,"linePrefix",5)(h)}function a(h){const m=r.events[r.events.length-1];return m&&m[1].type==="linePrefix"&&m[2].sliceSerialize(m[1],!0).length>=4?l(h):n(h)}function l(h){return h===null?f(h):Ae(h)?t.attempt(yF,l,f)(h):(t.enter("codeFlowValue"),u(h))}function u(h){return h===null||Ae(h)?(t.exit("codeFlowValue"),l(h)):(t.consume(h),u)}function f(h){return t.exit("codeIndented"),e(h)}}function bF(t,e,n){const r=this;return s;function s(l){return r.parser.lazy[r.now().line]?n(l):Ae(l)?(t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),s):Xe(t,a,"linePrefix",5)(l)}function a(l){const u=r.events[r.events.length-1];return u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?e(l):Ae(l)?s(l):n(l)}}const vF={name:"codeText",previous:wF,resolve:xF,tokenize:SF};function xF(t){let e=t.length-4,n=3,r,s;if((t[n][1].type==="lineEnding"||t[n][1].type==="space")&&(t[e][1].type==="lineEnding"||t[e][1].type==="space")){for(r=n;++r<e;)if(t[r][1].type==="codeTextData"){t[n][1].type="codeTextPadding",t[e][1].type="codeTextPadding",n+=2,e-=2;break}}for(r=n-1,e++;++r<=e;)s===void 0?r!==e&&t[r][1].type!=="lineEnding"&&(s=r):(r===e||t[r][1].type==="lineEnding")&&(t[s][1].type="codeTextData",r!==s+2&&(t[s][1].end=t[r-1][1].end,t.splice(s+2,r-s-2),e-=r-s-2,r=s+2),s=void 0);return t}function wF(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function SF(t,e,n){let r=0,s,a;return l;function l(p){return t.enter("codeText"),t.enter("codeTextSequence"),u(p)}function u(p){return p===96?(t.consume(p),r++,u):(t.exit("codeTextSequence"),f(p))}function f(p){return p===null?n(p):p===32?(t.enter("space"),t.consume(p),t.exit("space"),f):p===96?(a=t.enter("codeTextSequence"),s=0,m(p)):Ae(p)?(t.enter("lineEnding"),t.consume(p),t.exit("lineEnding"),f):(t.enter("codeTextData"),h(p))}function h(p){return p===null||p===32||p===96||Ae(p)?(t.exit("codeTextData"),f(p)):(t.consume(p),h)}function m(p){return p===96?(t.consume(p),s++,m):s===r?(t.exit("codeTextSequence"),t.exit("codeText"),e(p)):(a.type="codeTextData",h(p))}}class kF{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(e,r):e>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(e,n,r){const s=n||0;this.setCursor(Math.trunc(e));const a=this.right.splice(this.right.length-s,Number.POSITIVE_INFINITY);return r&&tl(this.left,r),a.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),tl(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),tl(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const n=this.left.splice(e,Number.POSITIVE_INFINITY);tl(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);tl(this.left,n.reverse())}}}function tl(t,e){let n=0;if(e.length<1e4)t.push(...e);else for(;n<e.length;)t.push(...e.slice(n,n+1e4)),n+=1e4}function KT(t){const e={};let n=-1,r,s,a,l,u,f,h;const m=new kF(t);for(;++n<m.length;){for(;n in e;)n=e[n];if(r=m.get(n),n&&r[1].type==="chunkFlow"&&m.get(n-1)[1].type==="listItemPrefix"&&(f=r[1]._tokenizer.events,a=0,a<f.length&&f[a][1].type==="lineEndingBlank"&&(a+=2),a<f.length&&f[a][1].type==="content"))for(;++a<f.length&&f[a][1].type!=="content";)f[a][1].type==="chunkText"&&(f[a][1]._isInFirstContentOfListItem=!0,a++);if(r[0]==="enter")r[1].contentType&&(Object.assign(e,EF(m,n)),n=e[n],h=!0);else if(r[1]._container){for(a=n,s=void 0;a--;)if(l=m.get(a),l[1].type==="lineEnding"||l[1].type==="lineEndingBlank")l[0]==="enter"&&(s&&(m.get(s)[1].type="lineEndingBlank"),l[1].type="lineEnding",s=a);else if(!(l[1].type==="linePrefix"||l[1].type==="listItemIndent"))break;s&&(r[1].end={...m.get(s)[1].start},u=m.slice(s,n),u.unshift(r),m.splice(s,n-s+1,u))}}return nr(t,0,Number.POSITIVE_INFINITY,m.slice(0)),!h}function EF(t,e){const n=t.get(e)[1],r=t.get(e)[2];let s=e-1;const a=[];let l=n._tokenizer;l||(l=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(l._contentTypeTextTrailing=!0));const u=l.events,f=[],h={};let m,p,y=-1,g=n,v=0,x=0;const E=[x];for(;g;){for(;t.get(++s)[1]!==g;);a.push(s),g._tokenizer||(m=r.sliceStream(g),g.next||m.push(null),p&&l.defineSkip(g.start),g._isInFirstContentOfListItem&&(l._gfmTasklistFirstContentOfListItem=!0),l.write(m),g._isInFirstContentOfListItem&&(l._gfmTasklistFirstContentOfListItem=void 0)),p=g,g=g.next}for(g=n;++y<u.length;)u[y][0]==="exit"&&u[y-1][0]==="enter"&&u[y][1].type===u[y-1][1].type&&u[y][1].start.line!==u[y][1].end.line&&(x=y+1,E.push(x),g._tokenizer=void 0,g.previous=void 0,g=g.next);for(l.events=[],g?(g._tokenizer=void 0,g.previous=void 0):E.pop(),y=E.length;y--;){const S=u.slice(E[y],E[y+1]),C=a.pop();f.push([C,C+S.length-1]),t.splice(C,2,S)}for(f.reverse(),y=-1;++y<f.length;)h[v+f[y][0]]=v+f[y][1],v+=f[y][1]-f[y][0]-1;return h}const CF={resolve:AF,tokenize:RF},TF={partial:!0,tokenize:OF};function AF(t){return KT(t),t}function RF(t,e){let n;return r;function r(u){return t.enter("content"),n=t.enter("chunkContent",{contentType:"content"}),s(u)}function s(u){return u===null?a(u):Ae(u)?t.check(TF,l,a)(u):(t.consume(u),s)}function a(u){return t.exit("chunkContent"),t.exit("content"),e(u)}function l(u){return t.consume(u),t.exit("chunkContent"),n.next=t.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,s}}function OF(t,e,n){const r=this;return s;function s(l){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),Xe(t,a,"linePrefix")}function a(l){if(l===null||Ae(l))return n(l);const u=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?e(l):t.interrupt(r.parser.constructs.flow,n,e)(l)}}function ZT(t,e,n,r,s,a,l,u,f){const h=f||Number.POSITIVE_INFINITY;let m=0;return p;function p(S){return S===60?(t.enter(r),t.enter(s),t.enter(a),t.consume(S),t.exit(a),y):S===null||S===32||S===41||Kf(S)?n(S):(t.enter(r),t.enter(l),t.enter(u),t.enter("chunkString",{contentType:"string"}),x(S))}function y(S){return S===62?(t.enter(a),t.consume(S),t.exit(a),t.exit(s),t.exit(r),e):(t.enter(u),t.enter("chunkString",{contentType:"string"}),g(S))}function g(S){return S===62?(t.exit("chunkString"),t.exit(u),y(S)):S===null||S===60||Ae(S)?n(S):(t.consume(S),S===92?v:g)}function v(S){return S===60||S===62||S===92?(t.consume(S),g):g(S)}function x(S){return!m&&(S===null||S===41||mt(S))?(t.exit("chunkString"),t.exit(u),t.exit(l),t.exit(r),e(S)):m<h&&S===40?(t.consume(S),m++,x):S===41?(t.consume(S),m--,x):S===null||S===32||S===40||Kf(S)?n(S):(t.consume(S),S===92?E:x)}function E(S){return S===40||S===41||S===92?(t.consume(S),x):x(S)}}function QT(t,e,n,r,s,a){const l=this;let u=0,f;return h;function h(g){return t.enter(r),t.enter(s),t.consume(g),t.exit(s),t.enter(a),m}function m(g){return u>999||g===null||g===91||g===93&&!f||g===94&&!u&&"_hiddenFootnoteSupport"in l.parser.constructs?n(g):g===93?(t.exit(a),t.enter(s),t.consume(g),t.exit(s),t.exit(r),e):Ae(g)?(t.enter("lineEnding"),t.consume(g),t.exit("lineEnding"),m):(t.enter("chunkString",{contentType:"string"}),p(g))}function p(g){return g===null||g===91||g===93||Ae(g)||u++>999?(t.exit("chunkString"),m(g)):(t.consume(g),f||(f=!He(g)),g===92?y:p)}function y(g){return g===91||g===92||g===93?(t.consume(g),u++,p):p(g)}}function JT(t,e,n,r,s,a){let l;return u;function u(y){return y===34||y===39||y===40?(t.enter(r),t.enter(s),t.consume(y),t.exit(s),l=y===40?41:y,f):n(y)}function f(y){return y===l?(t.enter(s),t.consume(y),t.exit(s),t.exit(r),e):(t.enter(a),h(y))}function h(y){return y===l?(t.exit(a),f(l)):y===null?n(y):Ae(y)?(t.enter("lineEnding"),t.consume(y),t.exit("lineEnding"),Xe(t,h,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),m(y))}function m(y){return y===l||y===null||Ae(y)?(t.exit("chunkString"),h(y)):(t.consume(y),y===92?p:m)}function p(y){return y===l||y===92?(t.consume(y),m):m(y)}}function Tl(t,e){let n;return r;function r(s){return Ae(s)?(t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),n=!0,r):He(s)?Xe(t,r,n?"linePrefix":"lineSuffix")(s):e(s)}}const NF={name:"definition",tokenize:MF},IF={partial:!0,tokenize:DF};function MF(t,e,n){const r=this;let s;return a;function a(g){return t.enter("definition"),l(g)}function l(g){return QT.call(r,t,u,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(g)}function u(g){return s=Rr(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),g===58?(t.enter("definitionMarker"),t.consume(g),t.exit("definitionMarker"),f):n(g)}function f(g){return mt(g)?Tl(t,h)(g):h(g)}function h(g){return ZT(t,m,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(g)}function m(g){return t.attempt(IF,p,p)(g)}function p(g){return He(g)?Xe(t,y,"whitespace")(g):y(g)}function y(g){return g===null||Ae(g)?(t.exit("definition"),r.parser.defined.push(s),e(g)):n(g)}}function DF(t,e,n){return r;function r(u){return mt(u)?Tl(t,s)(u):n(u)}function s(u){return JT(t,a,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(u)}function a(u){return He(u)?Xe(t,l,"whitespace")(u):l(u)}function l(u){return u===null||Ae(u)?e(u):n(u)}}const LF={name:"hardBreakEscape",tokenize:jF};function jF(t,e,n){return r;function r(a){return t.enter("hardBreakEscape"),t.consume(a),s}function s(a){return Ae(a)?(t.exit("hardBreakEscape"),e(a)):n(a)}}const zF={name:"headingAtx",resolve:PF,tokenize:BF};function PF(t,e){let n=t.length-2,r=3,s,a;return t[r][1].type==="whitespace"&&(r+=2),n-2>r&&t[n][1].type==="whitespace"&&(n-=2),t[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&t[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(s={type:"atxHeadingText",start:t[r][1].start,end:t[n][1].end},a={type:"chunkText",start:t[r][1].start,end:t[n][1].end,contentType:"text"},nr(t,r,n-r+1,[["enter",s,e],["enter",a,e],["exit",a,e],["exit",s,e]])),t}function BF(t,e,n){let r=0;return s;function s(m){return t.enter("atxHeading"),a(m)}function a(m){return t.enter("atxHeadingSequence"),l(m)}function l(m){return m===35&&r++<6?(t.consume(m),l):m===null||mt(m)?(t.exit("atxHeadingSequence"),u(m)):n(m)}function u(m){return m===35?(t.enter("atxHeadingSequence"),f(m)):m===null||Ae(m)?(t.exit("atxHeading"),e(m)):He(m)?Xe(t,u,"whitespace")(m):(t.enter("atxHeadingText"),h(m))}function f(m){return m===35?(t.consume(m),f):(t.exit("atxHeadingSequence"),u(m))}function h(m){return m===null||m===35||mt(m)?(t.exit("atxHeadingText"),u(m)):(t.consume(m),h)}}const $F=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],xS=["pre","script","style","textarea"],UF={concrete:!0,name:"htmlFlow",resolveTo:VF,tokenize:HF},qF={partial:!0,tokenize:KF},FF={partial:!0,tokenize:GF};function VF(t){let e=t.length;for(;e--&&!(t[e][0]==="enter"&&t[e][1].type==="htmlFlow"););return e>1&&t[e-2][1].type==="linePrefix"&&(t[e][1].start=t[e-2][1].start,t[e+1][1].start=t[e-2][1].start,t.splice(e-2,2)),t}function HF(t,e,n){const r=this;let s,a,l,u,f;return h;function h(R){return m(R)}function m(R){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(R),p}function p(R){return R===33?(t.consume(R),y):R===47?(t.consume(R),a=!0,x):R===63?(t.consume(R),s=3,r.interrupt?e:O):An(R)?(t.consume(R),l=String.fromCharCode(R),E):n(R)}function y(R){return R===45?(t.consume(R),s=2,g):R===91?(t.consume(R),s=5,u=0,v):An(R)?(t.consume(R),s=4,r.interrupt?e:O):n(R)}function g(R){return R===45?(t.consume(R),r.interrupt?e:O):n(R)}function v(R){const ae="CDATA[";return R===ae.charCodeAt(u++)?(t.consume(R),u===ae.length?r.interrupt?e:ie:v):n(R)}function x(R){return An(R)?(t.consume(R),l=String.fromCharCode(R),E):n(R)}function E(R){if(R===null||R===47||R===62||mt(R)){const ae=R===47,me=l.toLowerCase();return!ae&&!a&&xS.includes(me)?(s=1,r.interrupt?e(R):ie(R)):$F.includes(l.toLowerCase())?(s=6,ae?(t.consume(R),S):r.interrupt?e(R):ie(R)):(s=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(R):a?C(R):T(R))}return R===45||bn(R)?(t.consume(R),l+=String.fromCharCode(R),E):n(R)}function S(R){return R===62?(t.consume(R),r.interrupt?e:ie):n(R)}function C(R){return He(R)?(t.consume(R),C):j(R)}function T(R){return R===47?(t.consume(R),j):R===58||R===95||An(R)?(t.consume(R),L):He(R)?(t.consume(R),T):j(R)}function L(R){return R===45||R===46||R===58||R===95||bn(R)?(t.consume(R),L):D(R)}function D(R){return R===61?(t.consume(R),N):He(R)?(t.consume(R),D):T(R)}function N(R){return R===null||R===60||R===61||R===62||R===96?n(R):R===34||R===39?(t.consume(R),f=R,B):He(R)?(t.consume(R),N):K(R)}function B(R){return R===f?(t.consume(R),f=null,G):R===null||Ae(R)?n(R):(t.consume(R),B)}function K(R){return R===null||R===34||R===39||R===47||R===60||R===61||R===62||R===96||mt(R)?D(R):(t.consume(R),K)}function G(R){return R===47||R===62||He(R)?T(R):n(R)}function j(R){return R===62?(t.consume(R),J):n(R)}function J(R){return R===null||Ae(R)?ie(R):He(R)?(t.consume(R),J):n(R)}function ie(R){return R===45&&s===2?(t.consume(R),z):R===60&&s===1?(t.consume(R),F):R===62&&s===4?(t.consume(R),I):R===63&&s===3?(t.consume(R),O):R===93&&s===5?(t.consume(R),Y):Ae(R)&&(s===6||s===7)?(t.exit("htmlFlowData"),t.check(qF,H,q)(R)):R===null||Ae(R)?(t.exit("htmlFlowData"),q(R)):(t.consume(R),ie)}function q(R){return t.check(FF,P,H)(R)}function P(R){return t.enter("lineEnding"),t.consume(R),t.exit("lineEnding"),U}function U(R){return R===null||Ae(R)?q(R):(t.enter("htmlFlowData"),ie(R))}function z(R){return R===45?(t.consume(R),O):ie(R)}function F(R){return R===47?(t.consume(R),l="",se):ie(R)}function se(R){if(R===62){const ae=l.toLowerCase();return xS.includes(ae)?(t.consume(R),I):ie(R)}return An(R)&&l.length<8?(t.consume(R),l+=String.fromCharCode(R),se):ie(R)}function Y(R){return R===93?(t.consume(R),O):ie(R)}function O(R){return R===62?(t.consume(R),I):R===45&&s===2?(t.consume(R),O):ie(R)}function I(R){return R===null||Ae(R)?(t.exit("htmlFlowData"),H(R)):(t.consume(R),I)}function H(R){return t.exit("htmlFlow"),e(R)}}function GF(t,e,n){const r=this;return s;function s(l){return Ae(l)?(t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),a):n(l)}function a(l){return r.parser.lazy[r.now().line]?n(l):e(l)}}function KF(t,e,n){return r;function r(s){return t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),t.attempt(nc,e,n)}}const ZF={name:"htmlText",tokenize:QF};function QF(t,e,n){const r=this;let s,a,l;return u;function u(O){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(O),f}function f(O){return O===33?(t.consume(O),h):O===47?(t.consume(O),D):O===63?(t.consume(O),T):An(O)?(t.consume(O),K):n(O)}function h(O){return O===45?(t.consume(O),m):O===91?(t.consume(O),a=0,v):An(O)?(t.consume(O),C):n(O)}function m(O){return O===45?(t.consume(O),g):n(O)}function p(O){return O===null?n(O):O===45?(t.consume(O),y):Ae(O)?(l=p,F(O)):(t.consume(O),p)}function y(O){return O===45?(t.consume(O),g):p(O)}function g(O){return O===62?z(O):O===45?y(O):p(O)}function v(O){const I="CDATA[";return O===I.charCodeAt(a++)?(t.consume(O),a===I.length?x:v):n(O)}function x(O){return O===null?n(O):O===93?(t.consume(O),E):Ae(O)?(l=x,F(O)):(t.consume(O),x)}function E(O){return O===93?(t.consume(O),S):x(O)}function S(O){return O===62?z(O):O===93?(t.consume(O),S):x(O)}function C(O){return O===null||O===62?z(O):Ae(O)?(l=C,F(O)):(t.consume(O),C)}function T(O){return O===null?n(O):O===63?(t.consume(O),L):Ae(O)?(l=T,F(O)):(t.consume(O),T)}function L(O){return O===62?z(O):T(O)}function D(O){return An(O)?(t.consume(O),N):n(O)}function N(O){return O===45||bn(O)?(t.consume(O),N):B(O)}function B(O){return Ae(O)?(l=B,F(O)):He(O)?(t.consume(O),B):z(O)}function K(O){return O===45||bn(O)?(t.consume(O),K):O===47||O===62||mt(O)?G(O):n(O)}function G(O){return O===47?(t.consume(O),z):O===58||O===95||An(O)?(t.consume(O),j):Ae(O)?(l=G,F(O)):He(O)?(t.consume(O),G):z(O)}function j(O){return O===45||O===46||O===58||O===95||bn(O)?(t.consume(O),j):J(O)}function J(O){return O===61?(t.consume(O),ie):Ae(O)?(l=J,F(O)):He(O)?(t.consume(O),J):G(O)}function ie(O){return O===null||O===60||O===61||O===62||O===96?n(O):O===34||O===39?(t.consume(O),s=O,q):Ae(O)?(l=ie,F(O)):He(O)?(t.consume(O),ie):(t.consume(O),P)}function q(O){return O===s?(t.consume(O),s=void 0,U):O===null?n(O):Ae(O)?(l=q,F(O)):(t.consume(O),q)}function P(O){return O===null||O===34||O===39||O===60||O===61||O===96?n(O):O===47||O===62||mt(O)?G(O):(t.consume(O),P)}function U(O){return O===47||O===62||mt(O)?G(O):n(O)}function z(O){return O===62?(t.consume(O),t.exit("htmlTextData"),t.exit("htmlText"),e):n(O)}function F(O){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(O),t.exit("lineEnding"),se}function se(O){return He(O)?Xe(t,Y,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(O):Y(O)}function Y(O){return t.enter("htmlTextData"),l(O)}}const v0={name:"labelEnd",resolveAll:WF,resolveTo:e7,tokenize:t7},JF={tokenize:n7},YF={tokenize:r7},XF={tokenize:s7};function WF(t){let e=-1;const n=[];for(;++e<t.length;){const r=t[e][1];if(n.push(t[e]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const s=r.type==="labelImage"?4:2;r.type="data",e+=s}}return t.length!==n.length&&nr(t,0,t.length,n),t}function e7(t,e){let n=t.length,r=0,s,a,l,u;for(;n--;)if(s=t[n][1],a){if(s.type==="link"||s.type==="labelLink"&&s._inactive)break;t[n][0]==="enter"&&s.type==="labelLink"&&(s._inactive=!0)}else if(l){if(t[n][0]==="enter"&&(s.type==="labelImage"||s.type==="labelLink")&&!s._balanced&&(a=n,s.type!=="labelLink")){r=2;break}}else s.type==="labelEnd"&&(l=n);const f={type:t[a][1].type==="labelLink"?"link":"image",start:{...t[a][1].start},end:{...t[t.length-1][1].end}},h={type:"label",start:{...t[a][1].start},end:{...t[l][1].end}},m={type:"labelText",start:{...t[a+r+2][1].end},end:{...t[l-2][1].start}};return u=[["enter",f,e],["enter",h,e]],u=_r(u,t.slice(a+1,a+r+3)),u=_r(u,[["enter",m,e]]),u=_r(u,kh(e.parser.constructs.insideSpan.null,t.slice(a+r+4,l-3),e)),u=_r(u,[["exit",m,e],t[l-2],t[l-1],["exit",h,e]]),u=_r(u,t.slice(l+1)),u=_r(u,[["exit",f,e]]),nr(t,a,t.length,u),t}function t7(t,e,n){const r=this;let s=r.events.length,a,l;for(;s--;)if((r.events[s][1].type==="labelImage"||r.events[s][1].type==="labelLink")&&!r.events[s][1]._balanced){a=r.events[s][1];break}return u;function u(y){return a?a._inactive?p(y):(l=r.parser.defined.includes(Rr(r.sliceSerialize({start:a.end,end:r.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(y),t.exit("labelMarker"),t.exit("labelEnd"),f):n(y)}function f(y){return y===40?t.attempt(JF,m,l?m:p)(y):y===91?t.attempt(YF,m,l?h:p)(y):l?m(y):p(y)}function h(y){return t.attempt(XF,m,p)(y)}function m(y){return e(y)}function p(y){return a._balanced=!0,n(y)}}function n7(t,e,n){return r;function r(p){return t.enter("resource"),t.enter("resourceMarker"),t.consume(p),t.exit("resourceMarker"),s}function s(p){return mt(p)?Tl(t,a)(p):a(p)}function a(p){return p===41?m(p):ZT(t,l,u,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(p)}function l(p){return mt(p)?Tl(t,f)(p):m(p)}function u(p){return n(p)}function f(p){return p===34||p===39||p===40?JT(t,h,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(p):m(p)}function h(p){return mt(p)?Tl(t,m)(p):m(p)}function m(p){return p===41?(t.enter("resourceMarker"),t.consume(p),t.exit("resourceMarker"),t.exit("resource"),e):n(p)}}function r7(t,e,n){const r=this;return s;function s(u){return QT.call(r,t,a,l,"reference","referenceMarker","referenceString")(u)}function a(u){return r.parser.defined.includes(Rr(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?e(u):n(u)}function l(u){return n(u)}}function s7(t,e,n){return r;function r(a){return t.enter("reference"),t.enter("referenceMarker"),t.consume(a),t.exit("referenceMarker"),s}function s(a){return a===93?(t.enter("referenceMarker"),t.consume(a),t.exit("referenceMarker"),t.exit("reference"),e):n(a)}}const i7={name:"labelStartImage",resolveAll:v0.resolveAll,tokenize:a7};function a7(t,e,n){const r=this;return s;function s(u){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(u),t.exit("labelImageMarker"),a}function a(u){return u===91?(t.enter("labelMarker"),t.consume(u),t.exit("labelMarker"),t.exit("labelImage"),l):n(u)}function l(u){return u===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(u):e(u)}}const o7={name:"labelStartLink",resolveAll:v0.resolveAll,tokenize:l7};function l7(t,e,n){const r=this;return s;function s(l){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(l),t.exit("labelMarker"),t.exit("labelLink"),a}function a(l){return l===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(l):e(l)}}const Tm={name:"lineEnding",tokenize:c7};function c7(t,e){return n;function n(r){return t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),Xe(t,e,"linePrefix")}}const af={name:"thematicBreak",tokenize:u7};function u7(t,e,n){let r=0,s;return a;function a(h){return t.enter("thematicBreak"),l(h)}function l(h){return s=h,u(h)}function u(h){return h===s?(t.enter("thematicBreakSequence"),f(h)):r>=3&&(h===null||Ae(h))?(t.exit("thematicBreak"),e(h)):n(h)}function f(h){return h===s?(t.consume(h),r++,f):(t.exit("thematicBreakSequence"),He(h)?Xe(t,u,"whitespace")(h):u(h))}}const Pn={continuation:{tokenize:p7},exit:g7,name:"list",tokenize:d7},f7={partial:!0,tokenize:y7},h7={partial:!0,tokenize:m7};function d7(t,e,n){const r=this,s=r.events[r.events.length-1];let a=s&&s[1].type==="linePrefix"?s[2].sliceSerialize(s[1],!0).length:0,l=0;return u;function u(g){const v=r.containerState.type||(g===42||g===43||g===45?"listUnordered":"listOrdered");if(v==="listUnordered"?!r.containerState.marker||g===r.containerState.marker:Gg(g)){if(r.containerState.type||(r.containerState.type=v,t.enter(v,{_container:!0})),v==="listUnordered")return t.enter("listItemPrefix"),g===42||g===45?t.check(af,n,h)(g):h(g);if(!r.interrupt||g===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),f(g)}return n(g)}function f(g){return Gg(g)&&++l<10?(t.consume(g),f):(!r.interrupt||l<2)&&(r.containerState.marker?g===r.containerState.marker:g===41||g===46)?(t.exit("listItemValue"),h(g)):n(g)}function h(g){return t.enter("listItemMarker"),t.consume(g),t.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||g,t.check(nc,r.interrupt?n:m,t.attempt(f7,y,p))}function m(g){return r.containerState.initialBlankLine=!0,a++,y(g)}function p(g){return He(g)?(t.enter("listItemPrefixWhitespace"),t.consume(g),t.exit("listItemPrefixWhitespace"),y):n(g)}function y(g){return r.containerState.size=a+r.sliceSerialize(t.exit("listItemPrefix"),!0).length,e(g)}}function p7(t,e,n){const r=this;return r.containerState._closeFlow=void 0,t.check(nc,s,a);function s(u){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,Xe(t,e,"listItemIndent",r.containerState.size+1)(u)}function a(u){return r.containerState.furtherBlankLines||!He(u)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,l(u)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,t.attempt(h7,e,l)(u))}function l(u){return r.containerState._closeFlow=!0,r.interrupt=void 0,Xe(t,t.attempt(Pn,e,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(u)}}function m7(t,e,n){const r=this;return Xe(t,s,"listItemIndent",r.containerState.size+1);function s(a){const l=r.events[r.events.length-1];return l&&l[1].type==="listItemIndent"&&l[2].sliceSerialize(l[1],!0).length===r.containerState.size?e(a):n(a)}}function g7(t){t.exit(this.containerState.type)}function y7(t,e,n){const r=this;return Xe(t,s,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function s(a){const l=r.events[r.events.length-1];return!He(a)&&l&&l[1].type==="listItemPrefixWhitespace"?e(a):n(a)}}const wS={name:"setextUnderline",resolveTo:_7,tokenize:b7};function _7(t,e){let n=t.length,r,s,a;for(;n--;)if(t[n][0]==="enter"){if(t[n][1].type==="content"){r=n;break}t[n][1].type==="paragraph"&&(s=n)}else t[n][1].type==="content"&&t.splice(n,1),!a&&t[n][1].type==="definition"&&(a=n);const l={type:"setextHeading",start:{...t[r][1].start},end:{...t[t.length-1][1].end}};return t[s][1].type="setextHeadingText",a?(t.splice(s,0,["enter",l,e]),t.splice(a+1,0,["exit",t[r][1],e]),t[r][1].end={...t[a][1].end}):t[r][1]=l,t.push(["exit",l,e]),t}function b7(t,e,n){const r=this;let s;return a;function a(h){let m=r.events.length,p;for(;m--;)if(r.events[m][1].type!=="lineEnding"&&r.events[m][1].type!=="linePrefix"&&r.events[m][1].type!=="content"){p=r.events[m][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||p)?(t.enter("setextHeadingLine"),s=h,l(h)):n(h)}function l(h){return t.enter("setextHeadingLineSequence"),u(h)}function u(h){return h===s?(t.consume(h),u):(t.exit("setextHeadingLineSequence"),He(h)?Xe(t,f,"lineSuffix")(h):f(h))}function f(h){return h===null||Ae(h)?(t.exit("setextHeadingLine"),e(h)):n(h)}}const v7={tokenize:x7};function x7(t){const e=this,n=t.attempt(nc,r,t.attempt(this.parser.constructs.flowInitial,s,Xe(t,t.attempt(this.parser.constructs.flow,s,t.attempt(CF,s)),"linePrefix")));return n;function r(a){if(a===null){t.consume(a);return}return t.enter("lineEndingBlank"),t.consume(a),t.exit("lineEndingBlank"),e.currentConstruct=void 0,n}function s(a){if(a===null){t.consume(a);return}return t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),e.currentConstruct=void 0,n}}const w7={resolveAll:XT()},S7=YT("string"),k7=YT("text");function YT(t){return{resolveAll:XT(t==="text"?E7:void 0),tokenize:e};function e(n){const r=this,s=this.parser.constructs[t],a=n.attempt(s,l,u);return l;function l(m){return h(m)?a(m):u(m)}function u(m){if(m===null){n.consume(m);return}return n.enter("data"),n.consume(m),f}function f(m){return h(m)?(n.exit("data"),a(m)):(n.consume(m),f)}function h(m){if(m===null)return!0;const p=s[m];let y=-1;if(p)for(;++y<p.length;){const g=p[y];if(!g.previous||g.previous.call(r,r.previous))return!0}return!1}}}function XT(t){return e;function e(n,r){let s=-1,a;for(;++s<=n.length;)a===void 0?n[s]&&n[s][1].type==="data"&&(a=s,s++):(!n[s]||n[s][1].type!=="data")&&(s!==a+2&&(n[a][1].end=n[s-1][1].end,n.splice(a+2,s-a-2),s=a+2),a=void 0);return t?t(n,r):n}}function E7(t,e){let n=0;for(;++n<=t.length;)if((n===t.length||t[n][1].type==="lineEnding")&&t[n-1][1].type==="data"){const r=t[n-1][1],s=e.sliceStream(r);let a=s.length,l=-1,u=0,f;for(;a--;){const h=s[a];if(typeof h=="string"){for(l=h.length;h.charCodeAt(l-1)===32;)u++,l--;if(l)break;l=-1}else if(h===-2)f=!0,u++;else if(h!==-1){a++;break}}if(e._contentTypeTextTrailing&&n===t.length&&(u=0),u){const h={type:n===t.length||f||u<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:a?l:r.start._bufferIndex+l,_index:r.start._index+a,line:r.end.line,column:r.end.column-u,offset:r.end.offset-u},end:{...r.end}};r.end={...h.start},r.start.offset===r.end.offset?Object.assign(r,h):(t.splice(n,0,["enter",h,e],["exit",h,e]),n+=2)}n++}return t}const C7={42:Pn,43:Pn,45:Pn,48:Pn,49:Pn,50:Pn,51:Pn,52:Pn,53:Pn,54:Pn,55:Pn,56:Pn,57:Pn,62:VT},T7={91:NF},A7={[-2]:Cm,[-1]:Cm,32:Cm},R7={35:zF,42:af,45:[wS,af],60:UF,61:wS,95:af,96:vS,126:vS},O7={38:GT,92:HT},N7={[-5]:Tm,[-4]:Tm,[-3]:Tm,33:i7,38:GT,42:Kg,60:[oF,ZF],91:o7,92:[LF,HT],93:v0,95:Kg,96:vF},I7={null:[Kg,w7]},M7={null:[42,95]},D7={null:[]},L7=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:M7,contentInitial:T7,disable:D7,document:C7,flow:R7,flowInitial:A7,insideSpan:I7,string:O7,text:N7},Symbol.toStringTag,{value:"Module"}));function j7(t,e,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const s={},a=[];let l=[],u=[];const f={attempt:B(D),check:B(N),consume:C,enter:T,exit:L,interrupt:B(N,{interrupt:!0})},h={code:null,containerState:{},defineSkip:x,events:[],now:v,parser:t,previous:null,sliceSerialize:y,sliceStream:g,write:p};let m=e.tokenize.call(h,f);return e.resolveAll&&a.push(e),h;function p(J){return l=_r(l,J),E(),l[l.length-1]!==null?[]:(K(e,0),h.events=kh(a,h.events,h),h.events)}function y(J,ie){return P7(g(J),ie)}function g(J){return z7(l,J)}function v(){const{_bufferIndex:J,_index:ie,line:q,column:P,offset:U}=r;return{_bufferIndex:J,_index:ie,line:q,column:P,offset:U}}function x(J){s[J.line]=J.column,j()}function E(){let J;for(;r._index<l.length;){const ie=l[r._index];if(typeof ie=="string")for(J=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===J&&r._bufferIndex<ie.length;)S(ie.charCodeAt(r._bufferIndex));else S(ie)}}function S(J){m=m(J)}function C(J){Ae(J)?(r.line++,r.column=1,r.offset+=J===-3?2:1,j()):J!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===l[r._index].length&&(r._bufferIndex=-1,r._index++)),h.previous=J}function T(J,ie){const q=ie||{};return q.type=J,q.start=v(),h.events.push(["enter",q,h]),u.push(q),q}function L(J){const ie=u.pop();return ie.end=v(),h.events.push(["exit",ie,h]),ie}function D(J,ie){K(J,ie.from)}function N(J,ie){ie.restore()}function B(J,ie){return q;function q(P,U,z){let F,se,Y,O;return Array.isArray(P)?H(P):"tokenize"in P?H([P]):I(P);function I(pe){return we;function we(Ne){const Ie=Ne!==null&&pe[Ne],rt=Ne!==null&&pe.null,lt=[...Array.isArray(Ie)?Ie:Ie?[Ie]:[],...Array.isArray(rt)?rt:rt?[rt]:[]];return H(lt)(Ne)}}function H(pe){return F=pe,se=0,pe.length===0?z:R(pe[se])}function R(pe){return we;function we(Ne){return O=G(),Y=pe,pe.partial||(h.currentConstruct=pe),pe.name&&h.parser.constructs.disable.null.includes(pe.name)?me():pe.tokenize.call(ie?Object.assign(Object.create(h),ie):h,f,ae,me)(Ne)}}function ae(pe){return J(Y,O),U}function me(pe){return O.restore(),++se<F.length?R(F[se]):z}}}function K(J,ie){J.resolveAll&&!a.includes(J)&&a.push(J),J.resolve&&nr(h.events,ie,h.events.length-ie,J.resolve(h.events.slice(ie),h)),J.resolveTo&&(h.events=J.resolveTo(h.events,h))}function G(){const J=v(),ie=h.previous,q=h.currentConstruct,P=h.events.length,U=Array.from(u);return{from:P,restore:z};function z(){r=J,h.previous=ie,h.currentConstruct=q,h.events.length=P,u=U,j()}}function j(){r.line in s&&r.column<2&&(r.column=s[r.line],r.offset+=s[r.line]-1)}}function z7(t,e){const n=e.start._index,r=e.start._bufferIndex,s=e.end._index,a=e.end._bufferIndex;let l;if(n===s)l=[t[n].slice(r,a)];else{if(l=t.slice(n,s),r>-1){const u=l[0];typeof u=="string"?l[0]=u.slice(r):l.shift()}a>0&&l.push(t[s].slice(0,a))}return l}function P7(t,e){let n=-1;const r=[];let s;for(;++n<t.length;){const a=t[n];let l;if(typeof a=="string")l=a;else switch(a){case-5:{l="\r";break}case-4:{l=`
`;break}case-3:{l=`\r
`;break}case-2:{l=e?" ":"	";break}case-1:{if(!e&&s)continue;l=" ";break}default:l=String.fromCharCode(a)}s=a===-2,r.push(l)}return r.join("")}function B7(t){const r={constructs:qT([L7,...(t||{}).extensions||[]]),content:s(eF),defined:[],document:s(nF),flow:s(v7),lazy:{},string:s(S7),text:s(k7)};return r;function s(a){return l;function l(u){return j7(r,a,u)}}}function $7(t){for(;!KT(t););return t}const SS=/[\0\t\n\r]/g;function U7(){let t=1,e="",n=!0,r;return s;function s(a,l,u){const f=[];let h,m,p,y,g;for(a=e+(typeof a=="string"?a.toString():new TextDecoder(l||void 0).decode(a)),p=0,e="",n&&(a.charCodeAt(0)===65279&&p++,n=void 0);p<a.length;){if(SS.lastIndex=p,h=SS.exec(a),y=h&&h.index!==void 0?h.index:a.length,g=a.charCodeAt(y),!h){e=a.slice(p);break}if(g===10&&p===y&&r)f.push(-3),r=void 0;else switch(r&&(f.push(-5),r=void 0),p<y&&(f.push(a.slice(p,y)),t+=y-p),g){case 0:{f.push(65533),t++;break}case 9:{for(m=Math.ceil(t/4)*4,f.push(-2);t++<m;)f.push(-1);break}case 10:{f.push(-4),t=1;break}default:r=!0,t=1}p=y+1}return u&&(r&&f.push(-5),e&&f.push(e),f.push(null)),f}}const q7=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function F7(t){return t.replace(q7,V7)}function V7(t,e,n){if(e)return e;if(n.charCodeAt(0)===35){const s=n.charCodeAt(1),a=s===120||s===88;return FT(n.slice(a?2:1),a?16:10)}return b0(n)||t}const WT={}.hasOwnProperty;function H7(t,e,n){return typeof e!="string"&&(n=e,e=void 0),G7(n)($7(B7(n).document().write(U7()(t,e,!0))))}function G7(t){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:a(xn),autolinkProtocol:G,autolinkEmail:G,atxHeading:a(en),blockQuote:a(rt),characterEscape:G,characterReference:G,codeFenced:a(lt),codeFencedFenceInfo:l,codeFencedFenceMeta:l,codeIndented:a(lt,l),codeText:a(Ct,l),codeTextData:G,data:G,codeFlowValue:G,definition:a(Wt),definitionDestinationString:l,definitionLabelString:l,definitionTitleString:l,emphasis:a(Tt),hardBreakEscape:a(De),hardBreakTrailing:a(De),htmlFlow:a(ct,l),htmlFlowData:G,htmlText:a(ct,l),htmlTextData:G,image:a(Ye),label:l,link:a(xn),listItem:a(ge),listItemValue:y,listOrdered:a(wn,p),listUnordered:a(wn),paragraph:a($e),reference:R,referenceString:l,resourceDestinationString:l,resourceTitleString:l,setextHeading:a(en),strong:a(Oe),thematicBreak:a(We)},exit:{atxHeading:f(),atxHeadingSequence:D,autolink:f(),autolinkEmail:Ie,autolinkProtocol:Ne,blockQuote:f(),characterEscapeValue:j,characterReferenceMarkerHexadecimal:me,characterReferenceMarkerNumeric:me,characterReferenceValue:pe,characterReference:we,codeFenced:f(E),codeFencedFence:x,codeFencedFenceInfo:g,codeFencedFenceMeta:v,codeFlowValue:j,codeIndented:f(S),codeText:f(U),codeTextData:j,data:j,definition:f(),definitionDestinationString:L,definitionLabelString:C,definitionTitleString:T,emphasis:f(),hardBreakEscape:f(ie),hardBreakTrailing:f(ie),htmlFlow:f(q),htmlFlowData:j,htmlText:f(P),htmlTextData:j,image:f(F),label:Y,labelText:se,lineEnding:J,link:f(z),listItem:f(),listOrdered:f(),listUnordered:f(),paragraph:f(),referenceString:ae,resourceDestinationString:O,resourceTitleString:I,resource:H,setextHeading:f(K),setextHeadingLineSequence:B,setextHeadingText:N,strong:f(),thematicBreak:f()}};eA(e,(t||{}).mdastExtensions||[]);const n={};return r;function r(ne){let ue={type:"root",children:[]};const ye={stack:[ue],tokenStack:[],config:e,enter:u,exit:h,buffer:l,resume:m,data:n},ve=[];let Te=-1;for(;++Te<ne.length;)if(ne[Te][1].type==="listOrdered"||ne[Te][1].type==="listUnordered")if(ne[Te][0]==="enter")ve.push(Te);else{const gt=ve.pop();Te=s(ne,gt,Te)}for(Te=-1;++Te<ne.length;){const gt=e[ne[Te][0]];WT.call(gt,ne[Te][1].type)&&gt[ne[Te][1].type].call(Object.assign({sliceSerialize:ne[Te][2].sliceSerialize},ye),ne[Te][1])}if(ye.tokenStack.length>0){const gt=ye.tokenStack[ye.tokenStack.length-1];(gt[1]||kS).call(ye,void 0,gt[0])}for(ue.position={start:Gs(ne.length>0?ne[0][1].start:{line:1,column:1,offset:0}),end:Gs(ne.length>0?ne[ne.length-2][1].end:{line:1,column:1,offset:0})},Te=-1;++Te<e.transforms.length;)ue=e.transforms[Te](ue)||ue;return ue}function s(ne,ue,ye){let ve=ue-1,Te=-1,gt=!1,tn,et,_t,On;for(;++ve<=ye;){const dt=ne[ve];switch(dt[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{dt[0]==="enter"?Te++:Te--,On=void 0;break}case"lineEndingBlank":{dt[0]==="enter"&&(tn&&!On&&!Te&&!_t&&(_t=ve),On=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:On=void 0}if(!Te&&dt[0]==="enter"&&dt[1].type==="listItemPrefix"||Te===-1&&dt[0]==="exit"&&(dt[1].type==="listUnordered"||dt[1].type==="listOrdered")){if(tn){let _s=ve;for(et=void 0;_s--;){const Sr=ne[_s];if(Sr[1].type==="lineEnding"||Sr[1].type==="lineEndingBlank"){if(Sr[0]==="exit")continue;et&&(ne[et][1].type="lineEndingBlank",gt=!0),Sr[1].type="lineEnding",et=_s}else if(!(Sr[1].type==="linePrefix"||Sr[1].type==="blockQuotePrefix"||Sr[1].type==="blockQuotePrefixWhitespace"||Sr[1].type==="blockQuoteMarker"||Sr[1].type==="listItemIndent"))break}_t&&(!et||_t<et)&&(tn._spread=!0),tn.end=Object.assign({},et?ne[et][1].start:dt[1].end),ne.splice(et||ve,0,["exit",tn,dt[2]]),ve++,ye++}if(dt[1].type==="listItemPrefix"){const _s={type:"listItem",_spread:!1,start:Object.assign({},dt[1].start),end:void 0};tn=_s,ne.splice(ve,0,["enter",_s,dt[2]]),ve++,ye++,_t=void 0,On=!0}}}return ne[ue][1]._spread=gt,ye}function a(ne,ue){return ye;function ye(ve){u.call(this,ne(ve),ve),ue&&ue.call(this,ve)}}function l(){this.stack.push({type:"fragment",children:[]})}function u(ne,ue,ye){this.stack[this.stack.length-1].children.push(ne),this.stack.push(ne),this.tokenStack.push([ue,ye||void 0]),ne.position={start:Gs(ue.start),end:void 0}}function f(ne){return ue;function ue(ye){ne&&ne.call(this,ye),h.call(this,ye)}}function h(ne,ue){const ye=this.stack.pop(),ve=this.tokenStack.pop();if(ve)ve[0].type!==ne.type&&(ue?ue.call(this,ne,ve[0]):(ve[1]||kS).call(this,ne,ve[0]));else throw new Error("Cannot close `"+ne.type+"` ("+Cl({start:ne.start,end:ne.end})+"): its not open");ye.position.end=Gs(ne.end)}function m(){return _0(this.stack.pop())}function p(){this.data.expectingFirstListItemValue=!0}function y(ne){if(this.data.expectingFirstListItemValue){const ue=this.stack[this.stack.length-2];ue.start=Number.parseInt(this.sliceSerialize(ne),10),this.data.expectingFirstListItemValue=void 0}}function g(){const ne=this.resume(),ue=this.stack[this.stack.length-1];ue.lang=ne}function v(){const ne=this.resume(),ue=this.stack[this.stack.length-1];ue.meta=ne}function x(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function E(){const ne=this.resume(),ue=this.stack[this.stack.length-1];ue.value=ne.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function S(){const ne=this.resume(),ue=this.stack[this.stack.length-1];ue.value=ne.replace(/(\r?\n|\r)$/g,"")}function C(ne){const ue=this.resume(),ye=this.stack[this.stack.length-1];ye.label=ue,ye.identifier=Rr(this.sliceSerialize(ne)).toLowerCase()}function T(){const ne=this.resume(),ue=this.stack[this.stack.length-1];ue.title=ne}function L(){const ne=this.resume(),ue=this.stack[this.stack.length-1];ue.url=ne}function D(ne){const ue=this.stack[this.stack.length-1];if(!ue.depth){const ye=this.sliceSerialize(ne).length;ue.depth=ye}}function N(){this.data.setextHeadingSlurpLineEnding=!0}function B(ne){const ue=this.stack[this.stack.length-1];ue.depth=this.sliceSerialize(ne).codePointAt(0)===61?1:2}function K(){this.data.setextHeadingSlurpLineEnding=void 0}function G(ne){const ye=this.stack[this.stack.length-1].children;let ve=ye[ye.length-1];(!ve||ve.type!=="text")&&(ve=xe(),ve.position={start:Gs(ne.start),end:void 0},ye.push(ve)),this.stack.push(ve)}function j(ne){const ue=this.stack.pop();ue.value+=this.sliceSerialize(ne),ue.position.end=Gs(ne.end)}function J(ne){const ue=this.stack[this.stack.length-1];if(this.data.atHardBreak){const ye=ue.children[ue.children.length-1];ye.position.end=Gs(ne.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(ue.type)&&(G.call(this,ne),j.call(this,ne))}function ie(){this.data.atHardBreak=!0}function q(){const ne=this.resume(),ue=this.stack[this.stack.length-1];ue.value=ne}function P(){const ne=this.resume(),ue=this.stack[this.stack.length-1];ue.value=ne}function U(){const ne=this.resume(),ue=this.stack[this.stack.length-1];ue.value=ne}function z(){const ne=this.stack[this.stack.length-1];if(this.data.inReference){const ue=this.data.referenceType||"shortcut";ne.type+="Reference",ne.referenceType=ue,delete ne.url,delete ne.title}else delete ne.identifier,delete ne.label;this.data.referenceType=void 0}function F(){const ne=this.stack[this.stack.length-1];if(this.data.inReference){const ue=this.data.referenceType||"shortcut";ne.type+="Reference",ne.referenceType=ue,delete ne.url,delete ne.title}else delete ne.identifier,delete ne.label;this.data.referenceType=void 0}function se(ne){const ue=this.sliceSerialize(ne),ye=this.stack[this.stack.length-2];ye.label=F7(ue),ye.identifier=Rr(ue).toLowerCase()}function Y(){const ne=this.stack[this.stack.length-1],ue=this.resume(),ye=this.stack[this.stack.length-1];if(this.data.inReference=!0,ye.type==="link"){const ve=ne.children;ye.children=ve}else ye.alt=ue}function O(){const ne=this.resume(),ue=this.stack[this.stack.length-1];ue.url=ne}function I(){const ne=this.resume(),ue=this.stack[this.stack.length-1];ue.title=ne}function H(){this.data.inReference=void 0}function R(){this.data.referenceType="collapsed"}function ae(ne){const ue=this.resume(),ye=this.stack[this.stack.length-1];ye.label=ue,ye.identifier=Rr(this.sliceSerialize(ne)).toLowerCase(),this.data.referenceType="full"}function me(ne){this.data.characterReferenceType=ne.type}function pe(ne){const ue=this.sliceSerialize(ne),ye=this.data.characterReferenceType;let ve;ye?(ve=FT(ue,ye==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):ve=b0(ue);const Te=this.stack[this.stack.length-1];Te.value+=ve}function we(ne){const ue=this.stack.pop();ue.position.end=Gs(ne.end)}function Ne(ne){j.call(this,ne);const ue=this.stack[this.stack.length-1];ue.url=this.sliceSerialize(ne)}function Ie(ne){j.call(this,ne);const ue=this.stack[this.stack.length-1];ue.url="mailto:"+this.sliceSerialize(ne)}function rt(){return{type:"blockquote",children:[]}}function lt(){return{type:"code",lang:null,meta:null,value:""}}function Ct(){return{type:"inlineCode",value:""}}function Wt(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Tt(){return{type:"emphasis",children:[]}}function en(){return{type:"heading",depth:0,children:[]}}function De(){return{type:"break"}}function ct(){return{type:"html",value:""}}function Ye(){return{type:"image",title:null,url:"",alt:null}}function xn(){return{type:"link",title:null,url:"",children:[]}}function wn(ne){return{type:"list",ordered:ne.type==="listOrdered",start:null,spread:ne._spread,children:[]}}function ge(ne){return{type:"listItem",spread:ne._spread,checked:null,children:[]}}function $e(){return{type:"paragraph",children:[]}}function Oe(){return{type:"strong",children:[]}}function xe(){return{type:"text",value:""}}function We(){return{type:"thematicBreak"}}}function Gs(t){return{line:t.line,column:t.column,offset:t.offset}}function eA(t,e){let n=-1;for(;++n<e.length;){const r=e[n];Array.isArray(r)?eA(t,r):K7(t,r)}}function K7(t,e){let n;for(n in e)if(WT.call(e,n))switch(n){case"canContainEols":{const r=e[n];r&&t[n].push(...r);break}case"transforms":{const r=e[n];r&&t[n].push(...r);break}case"enter":case"exit":{const r=e[n];r&&Object.assign(t[n],r);break}}}function kS(t,e){throw t?new Error("Cannot close `"+t.type+"` ("+Cl({start:t.start,end:t.end})+"): a different token (`"+e.type+"`, "+Cl({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+Cl({start:e.start,end:e.end})+") is still open")}function Z7(t){const e=this;e.parser=n;function n(r){return H7(r,{...e.data("settings"),...t,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function Q7(t,e){const n={type:"element",tagName:"blockquote",properties:{},children:t.wrap(t.all(e),!0)};return t.patch(e,n),t.applyData(e,n)}function J7(t,e){const n={type:"element",tagName:"br",properties:{},children:[]};return t.patch(e,n),[t.applyData(e,n),{type:"text",value:`
`}]}function Y7(t,e){const n=e.value?e.value+`
`:"",r={},s=e.lang?e.lang.split(/\s+/):[];s.length>0&&(r.className=["language-"+s[0]]);let a={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return e.meta&&(a.data={meta:e.meta}),t.patch(e,a),a=t.applyData(e,a),a={type:"element",tagName:"pre",properties:{},children:[a]},t.patch(e,a),a}function X7(t,e){const n={type:"element",tagName:"del",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function W7(t,e){const n={type:"element",tagName:"em",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function eV(t,e){const n=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",r=String(e.identifier).toUpperCase(),s=to(r.toLowerCase()),a=t.footnoteOrder.indexOf(r);let l,u=t.footnoteCounts.get(r);u===void 0?(u=0,t.footnoteOrder.push(r),l=t.footnoteOrder.length):l=a+1,u+=1,t.footnoteCounts.set(r,u);const f={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+s,id:n+"fnref-"+s+(u>1?"-"+u:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(l)}]};t.patch(e,f);const h={type:"element",tagName:"sup",properties:{},children:[f]};return t.patch(e,h),t.applyData(e,h)}function tV(t,e){const n={type:"element",tagName:"h"+e.depth,properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function nV(t,e){if(t.options.allowDangerousHtml){const n={type:"raw",value:e.value};return t.patch(e,n),t.applyData(e,n)}}function tA(t,e){const n=e.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+r}];const s=t.all(e),a=s[0];a&&a.type==="text"?a.value="["+a.value:s.unshift({type:"text",value:"["});const l=s[s.length-1];return l&&l.type==="text"?l.value+=r:s.push({type:"text",value:r}),s}function rV(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return tA(t,e);const s={src:to(r.url||""),alt:e.alt};r.title!==null&&r.title!==void 0&&(s.title=r.title);const a={type:"element",tagName:"img",properties:s,children:[]};return t.patch(e,a),t.applyData(e,a)}function sV(t,e){const n={src:to(e.url)};e.alt!==null&&e.alt!==void 0&&(n.alt=e.alt),e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"img",properties:n,children:[]};return t.patch(e,r),t.applyData(e,r)}function iV(t,e){const n={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};t.patch(e,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return t.patch(e,r),t.applyData(e,r)}function aV(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return tA(t,e);const s={href:to(r.url||"")};r.title!==null&&r.title!==void 0&&(s.title=r.title);const a={type:"element",tagName:"a",properties:s,children:t.all(e)};return t.patch(e,a),t.applyData(e,a)}function oV(t,e){const n={href:to(e.url)};e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"a",properties:n,children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function lV(t,e,n){const r=t.all(e),s=n?cV(n):nA(e),a={},l=[];if(typeof e.checked=="boolean"){const m=r[0];let p;m&&m.type==="element"&&m.tagName==="p"?p=m:(p={type:"element",tagName:"p",properties:{},children:[]},r.unshift(p)),p.children.length>0&&p.children.unshift({type:"text",value:" "}),p.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),a.className=["task-list-item"]}let u=-1;for(;++u<r.length;){const m=r[u];(s||u!==0||m.type!=="element"||m.tagName!=="p")&&l.push({type:"text",value:`
`}),m.type==="element"&&m.tagName==="p"&&!s?l.push(...m.children):l.push(m)}const f=r[r.length-1];f&&(s||f.type!=="element"||f.tagName!=="p")&&l.push({type:"text",value:`
`});const h={type:"element",tagName:"li",properties:a,children:l};return t.patch(e,h),t.applyData(e,h)}function cV(t){let e=!1;if(t.type==="list"){e=t.spread||!1;const n=t.children;let r=-1;for(;!e&&++r<n.length;)e=nA(n[r])}return e}function nA(t){const e=t.spread;return e??t.children.length>1}function uV(t,e){const n={},r=t.all(e);let s=-1;for(typeof e.start=="number"&&e.start!==1&&(n.start=e.start);++s<r.length;){const l=r[s];if(l.type==="element"&&l.tagName==="li"&&l.properties&&Array.isArray(l.properties.className)&&l.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const a={type:"element",tagName:e.ordered?"ol":"ul",properties:n,children:t.wrap(r,!0)};return t.patch(e,a),t.applyData(e,a)}function fV(t,e){const n={type:"element",tagName:"p",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function hV(t,e){const n={type:"root",children:t.wrap(t.all(e))};return t.patch(e,n),t.applyData(e,n)}function dV(t,e){const n={type:"element",tagName:"strong",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function pV(t,e){const n=t.all(e),r=n.shift(),s=[];if(r){const l={type:"element",tagName:"thead",properties:{},children:t.wrap([r],!0)};t.patch(e.children[0],l),s.push(l)}if(n.length>0){const l={type:"element",tagName:"tbody",properties:{},children:t.wrap(n,!0)},u=p0(e.children[1]),f=LT(e.children[e.children.length-1]);u&&f&&(l.position={start:u,end:f}),s.push(l)}const a={type:"element",tagName:"table",properties:{},children:t.wrap(s,!0)};return t.patch(e,a),t.applyData(e,a)}function mV(t,e,n){const r=n?n.children:void 0,a=(r?r.indexOf(e):1)===0?"th":"td",l=n&&n.type==="table"?n.align:void 0,u=l?l.length:e.children.length;let f=-1;const h=[];for(;++f<u;){const p=e.children[f],y={},g=l?l[f]:void 0;g&&(y.align=g);let v={type:"element",tagName:a,properties:y,children:[]};p&&(v.children=t.all(p),t.patch(p,v),v=t.applyData(p,v)),h.push(v)}const m={type:"element",tagName:"tr",properties:{},children:t.wrap(h,!0)};return t.patch(e,m),t.applyData(e,m)}function gV(t,e){const n={type:"element",tagName:"td",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}const ES=9,CS=32;function yV(t){const e=String(t),n=/\r?\n|\r/g;let r=n.exec(e),s=0;const a=[];for(;r;)a.push(TS(e.slice(s,r.index),s>0,!0),r[0]),s=r.index+r[0].length,r=n.exec(e);return a.push(TS(e.slice(s),s>0,!1)),a.join("")}function TS(t,e,n){let r=0,s=t.length;if(e){let a=t.codePointAt(r);for(;a===ES||a===CS;)r++,a=t.codePointAt(r)}if(n){let a=t.codePointAt(s-1);for(;a===ES||a===CS;)s--,a=t.codePointAt(s-1)}return s>r?t.slice(r,s):""}function _V(t,e){const n={type:"text",value:yV(String(e.value))};return t.patch(e,n),t.applyData(e,n)}function bV(t,e){const n={type:"element",tagName:"hr",properties:{},children:[]};return t.patch(e,n),t.applyData(e,n)}const vV={blockquote:Q7,break:J7,code:Y7,delete:X7,emphasis:W7,footnoteReference:eV,heading:tV,html:nV,imageReference:rV,image:sV,inlineCode:iV,linkReference:aV,link:oV,listItem:lV,list:uV,paragraph:fV,root:hV,strong:dV,table:pV,tableCell:gV,tableRow:mV,text:_V,thematicBreak:bV,toml:Pu,yaml:Pu,definition:Pu,footnoteDefinition:Pu};function Pu(){}const rA=-1,Eh=0,Al=1,Zf=2,x0=3,w0=4,S0=5,k0=6,sA=7,iA=8,AS=typeof self=="object"?self:globalThis,xV=(t,e)=>{const n=(s,a)=>(t.set(a,s),s),r=s=>{if(t.has(s))return t.get(s);const[a,l]=e[s];switch(a){case Eh:case rA:return n(l,s);case Al:{const u=n([],s);for(const f of l)u.push(r(f));return u}case Zf:{const u=n({},s);for(const[f,h]of l)u[r(f)]=r(h);return u}case x0:return n(new Date(l),s);case w0:{const{source:u,flags:f}=l;return n(new RegExp(u,f),s)}case S0:{const u=n(new Map,s);for(const[f,h]of l)u.set(r(f),r(h));return u}case k0:{const u=n(new Set,s);for(const f of l)u.add(r(f));return u}case sA:{const{name:u,message:f}=l;return n(new AS[u](f),s)}case iA:return n(BigInt(l),s);case"BigInt":return n(Object(BigInt(l)),s);case"ArrayBuffer":return n(new Uint8Array(l).buffer,l);case"DataView":{const{buffer:u}=new Uint8Array(l);return n(new DataView(u),l)}}return n(new AS[a](l),s)};return r},RS=t=>xV(new Map,t)(0),Aa="",{toString:wV}={},{keys:SV}=Object,nl=t=>{const e=typeof t;if(e!=="object"||!t)return[Eh,e];const n=wV.call(t).slice(8,-1);switch(n){case"Array":return[Al,Aa];case"Object":return[Zf,Aa];case"Date":return[x0,Aa];case"RegExp":return[w0,Aa];case"Map":return[S0,Aa];case"Set":return[k0,Aa];case"DataView":return[Al,n]}return n.includes("Array")?[Al,n]:n.includes("Error")?[sA,n]:[Zf,n]},Bu=([t,e])=>t===Eh&&(e==="function"||e==="symbol"),kV=(t,e,n,r)=>{const s=(l,u)=>{const f=r.push(l)-1;return n.set(u,f),f},a=l=>{if(n.has(l))return n.get(l);let[u,f]=nl(l);switch(u){case Eh:{let m=l;switch(f){case"bigint":u=iA,m=l.toString();break;case"function":case"symbol":if(t)throw new TypeError("unable to serialize "+f);m=null;break;case"undefined":return s([rA],l)}return s([u,m],l)}case Al:{if(f){let y=l;return f==="DataView"?y=new Uint8Array(l.buffer):f==="ArrayBuffer"&&(y=new Uint8Array(l)),s([f,[...y]],l)}const m=[],p=s([u,m],l);for(const y of l)m.push(a(y));return p}case Zf:{if(f)switch(f){case"BigInt":return s([f,l.toString()],l);case"Boolean":case"Number":case"String":return s([f,l.valueOf()],l)}if(e&&"toJSON"in l)return a(l.toJSON());const m=[],p=s([u,m],l);for(const y of SV(l))(t||!Bu(nl(l[y])))&&m.push([a(y),a(l[y])]);return p}case x0:return s([u,l.toISOString()],l);case w0:{const{source:m,flags:p}=l;return s([u,{source:m,flags:p}],l)}case S0:{const m=[],p=s([u,m],l);for(const[y,g]of l)(t||!(Bu(nl(y))||Bu(nl(g))))&&m.push([a(y),a(g)]);return p}case k0:{const m=[],p=s([u,m],l);for(const y of l)(t||!Bu(nl(y)))&&m.push(a(y));return p}}const{message:h}=l;return s([u,{name:f,message:h}],l)};return a},OS=(t,{json:e,lossy:n}={})=>{const r=[];return kV(!(e||n),!!e,new Map,r)(t),r},Qf=typeof structuredClone=="function"?(t,e)=>e&&("json"in e||"lossy"in e)?RS(OS(t,e)):structuredClone(t):(t,e)=>RS(OS(t,e));function EV(t,e){const n=[{type:"text",value:""}];return e>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),n}function CV(t,e){return"Back to reference "+(t+1)+(e>1?"-"+e:"")}function TV(t){const e=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",n=t.options.footnoteBackContent||EV,r=t.options.footnoteBackLabel||CV,s=t.options.footnoteLabel||"Footnotes",a=t.options.footnoteLabelTagName||"h2",l=t.options.footnoteLabelProperties||{className:["sr-only"]},u=[];let f=-1;for(;++f<t.footnoteOrder.length;){const h=t.footnoteById.get(t.footnoteOrder[f]);if(!h)continue;const m=t.all(h),p=String(h.identifier).toUpperCase(),y=to(p.toLowerCase());let g=0;const v=[],x=t.footnoteCounts.get(p);for(;x!==void 0&&++g<=x;){v.length>0&&v.push({type:"text",value:" "});let C=typeof n=="string"?n:n(f,g);typeof C=="string"&&(C={type:"text",value:C}),v.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+y+(g>1?"-"+g:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(f,g),className:["data-footnote-backref"]},children:Array.isArray(C)?C:[C]})}const E=m[m.length-1];if(E&&E.type==="element"&&E.tagName==="p"){const C=E.children[E.children.length-1];C&&C.type==="text"?C.value+=" ":E.children.push({type:"text",value:" "}),E.children.push(...v)}else m.push(...v);const S={type:"element",tagName:"li",properties:{id:e+"fn-"+y},children:t.wrap(m,!0)};t.patch(h,S),u.push(S)}if(u.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:a,properties:{...Qf(l),id:"footnote-label"},children:[{type:"text",value:s}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:t.wrap(u,!0)},{type:"text",value:`
`}]}}const Ch=(function(t){if(t==null)return NV;if(typeof t=="function")return Th(t);if(typeof t=="object")return Array.isArray(t)?AV(t):RV(t);if(typeof t=="string")return OV(t);throw new Error("Expected function, string, or object as test")});function AV(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=Ch(t[n]);return Th(r);function r(...s){let a=-1;for(;++a<e.length;)if(e[a].apply(this,s))return!0;return!1}}function RV(t){const e=t;return Th(n);function n(r){const s=r;let a;for(a in t)if(s[a]!==e[a])return!1;return!0}}function OV(t){return Th(e);function e(n){return n&&n.type===t}}function Th(t){return e;function e(n,r,s){return!!(IV(n)&&t.call(this,n,typeof r=="number"?r:void 0,s||void 0))}}function NV(){return!0}function IV(t){return t!==null&&typeof t=="object"&&"type"in t}const aA=[],MV=!0,Zg=!1,DV="skip";function oA(t,e,n,r){let s;typeof e=="function"&&typeof n!="function"?(r=n,n=e):s=e;const a=Ch(s),l=r?-1:1;u(t,void 0,[])();function u(f,h,m){const p=f&&typeof f=="object"?f:{};if(typeof p.type=="string"){const g=typeof p.tagName=="string"?p.tagName:typeof p.name=="string"?p.name:void 0;Object.defineProperty(y,"name",{value:"node ("+(f.type+(g?"<"+g+">":""))+")"})}return y;function y(){let g=aA,v,x,E;if((!e||a(f,h,m[m.length-1]||void 0))&&(g=LV(n(f,m)),g[0]===Zg))return g;if("children"in f&&f.children){const S=f;if(S.children&&g[0]!==DV)for(x=(r?S.children.length:-1)+l,E=m.concat(S);x>-1&&x<S.children.length;){const C=S.children[x];if(v=u(C,x,E)(),v[0]===Zg)return v;x=typeof v[1]=="number"?v[1]:x+l}}return g}}}function LV(t){return Array.isArray(t)?t:typeof t=="number"?[MV,t]:t==null?aA:[t]}function E0(t,e,n,r){let s,a,l;typeof e=="function"&&typeof n!="function"?(a=void 0,l=e,s=n):(a=e,l=n,s=r),oA(t,a,u,s);function u(f,h){const m=h[h.length-1],p=m?m.children.indexOf(f):void 0;return l(f,p,m)}}const Qg={}.hasOwnProperty,jV={};function zV(t,e){const n=e||jV,r=new Map,s=new Map,a=new Map,l={...vV,...n.handlers},u={all:h,applyData:BV,definitionById:r,footnoteById:s,footnoteCounts:a,footnoteOrder:[],handlers:l,one:f,options:n,patch:PV,wrap:UV};return E0(t,function(m){if(m.type==="definition"||m.type==="footnoteDefinition"){const p=m.type==="definition"?r:s,y=String(m.identifier).toUpperCase();p.has(y)||p.set(y,m)}}),u;function f(m,p){const y=m.type,g=u.handlers[y];if(Qg.call(u.handlers,y)&&g)return g(u,m,p);if(u.options.passThrough&&u.options.passThrough.includes(y)){if("children"in m){const{children:x,...E}=m,S=Qf(E);return S.children=u.all(m),S}return Qf(m)}return(u.options.unknownHandler||$V)(u,m,p)}function h(m){const p=[];if("children"in m){const y=m.children;let g=-1;for(;++g<y.length;){const v=u.one(y[g],m);if(v){if(g&&y[g-1].type==="break"&&(!Array.isArray(v)&&v.type==="text"&&(v.value=NS(v.value)),!Array.isArray(v)&&v.type==="element")){const x=v.children[0];x&&x.type==="text"&&(x.value=NS(x.value))}Array.isArray(v)?p.push(...v):p.push(v)}}}return p}}function PV(t,e){t.position&&(e.position=Cq(t))}function BV(t,e){let n=e;if(t&&t.data){const r=t.data.hName,s=t.data.hChildren,a=t.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const l="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:l}}n.type==="element"&&a&&Object.assign(n.properties,Qf(a)),"children"in n&&n.children&&s!==null&&s!==void 0&&(n.children=s)}return n}function $V(t,e){const n=e.data||{},r="value"in e&&!(Qg.call(n,"hProperties")||Qg.call(n,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function UV(t,e){const n=[];let r=-1;for(e&&n.push({type:"text",value:`
`});++r<t.length;)r&&n.push({type:"text",value:`
`}),n.push(t[r]);return e&&t.length>0&&n.push({type:"text",value:`
`}),n}function NS(t){let e=0,n=t.charCodeAt(e);for(;n===9||n===32;)e++,n=t.charCodeAt(e);return t.slice(e)}function IS(t,e){const n=zV(t,e),r=n.one(t,void 0),s=TV(n),a=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return s&&a.children.push({type:"text",value:`
`},s),a}function qV(t,e){return t&&"run"in t?async function(n,r){const s=IS(n,{file:r,...e});await t.run(s,r)}:function(n,r){return IS(n,{file:r,...t||e})}}function MS(t){if(t)throw t}var Am,DS;function FV(){if(DS)return Am;DS=1;var t=Object.prototype.hasOwnProperty,e=Object.prototype.toString,n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,s=function(h){return typeof Array.isArray=="function"?Array.isArray(h):e.call(h)==="[object Array]"},a=function(h){if(!h||e.call(h)!=="[object Object]")return!1;var m=t.call(h,"constructor"),p=h.constructor&&h.constructor.prototype&&t.call(h.constructor.prototype,"isPrototypeOf");if(h.constructor&&!m&&!p)return!1;var y;for(y in h);return typeof y>"u"||t.call(h,y)},l=function(h,m){n&&m.name==="__proto__"?n(h,m.name,{enumerable:!0,configurable:!0,value:m.newValue,writable:!0}):h[m.name]=m.newValue},u=function(h,m){if(m==="__proto__")if(t.call(h,m)){if(r)return r(h,m).value}else return;return h[m]};return Am=function f(){var h,m,p,y,g,v,x=arguments[0],E=1,S=arguments.length,C=!1;for(typeof x=="boolean"&&(C=x,x=arguments[1]||{},E=2),(x==null||typeof x!="object"&&typeof x!="function")&&(x={});E<S;++E)if(h=arguments[E],h!=null)for(m in h)p=u(x,m),y=u(h,m),x!==y&&(C&&y&&(a(y)||(g=s(y)))?(g?(g=!1,v=p&&s(p)?p:[]):v=p&&a(p)?p:{},l(x,{name:m,newValue:f(C,v,y)})):typeof y<"u"&&l(x,{name:m,newValue:y}));return x},Am}var VV=FV();const Rm=KS(VV);function Jg(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function HV(){const t=[],e={run:n,use:r};return e;function n(...s){let a=-1;const l=s.pop();if(typeof l!="function")throw new TypeError("Expected function as last argument, not "+l);u(null,...s);function u(f,...h){const m=t[++a];let p=-1;if(f){l(f);return}for(;++p<s.length;)(h[p]===null||h[p]===void 0)&&(h[p]=s[p]);s=h,m?GV(m,u)(...h):l(null,...h)}}function r(s){if(typeof s!="function")throw new TypeError("Expected `middelware` to be a function, not "+s);return t.push(s),e}}function GV(t,e){let n;return r;function r(...l){const u=t.length>l.length;let f;u&&l.push(s);try{f=t.apply(this,l)}catch(h){const m=h;if(u&&n)throw m;return s(m)}u||(f&&f.then&&typeof f.then=="function"?f.then(a,s):f instanceof Error?s(f):a(f))}function s(l,...u){n||(n=!0,e(l,...u))}function a(l){s(null,l)}}const Pr={basename:KV,dirname:ZV,extname:QV,join:JV,sep:"/"};function KV(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');rc(t);let n=0,r=-1,s=t.length,a;if(e===void 0||e.length===0||e.length>t.length){for(;s--;)if(t.codePointAt(s)===47){if(a){n=s+1;break}}else r<0&&(a=!0,r=s+1);return r<0?"":t.slice(n,r)}if(e===t)return"";let l=-1,u=e.length-1;for(;s--;)if(t.codePointAt(s)===47){if(a){n=s+1;break}}else l<0&&(a=!0,l=s+1),u>-1&&(t.codePointAt(s)===e.codePointAt(u--)?u<0&&(r=s):(u=-1,r=l));return n===r?r=l:r<0&&(r=t.length),t.slice(n,r)}function ZV(t){if(rc(t),t.length===0)return".";let e=-1,n=t.length,r;for(;--n;)if(t.codePointAt(n)===47){if(r){e=n;break}}else r||(r=!0);return e<0?t.codePointAt(0)===47?"/":".":e===1&&t.codePointAt(0)===47?"//":t.slice(0,e)}function QV(t){rc(t);let e=t.length,n=-1,r=0,s=-1,a=0,l;for(;e--;){const u=t.codePointAt(e);if(u===47){if(l){r=e+1;break}continue}n<0&&(l=!0,n=e+1),u===46?s<0?s=e:a!==1&&(a=1):s>-1&&(a=-1)}return s<0||n<0||a===0||a===1&&s===n-1&&s===r+1?"":t.slice(s,n)}function JV(...t){let e=-1,n;for(;++e<t.length;)rc(t[e]),t[e]&&(n=n===void 0?t[e]:n+"/"+t[e]);return n===void 0?".":YV(n)}function YV(t){rc(t);const e=t.codePointAt(0)===47;let n=XV(t,!e);return n.length===0&&!e&&(n="."),n.length>0&&t.codePointAt(t.length-1)===47&&(n+="/"),e?"/"+n:n}function XV(t,e){let n="",r=0,s=-1,a=0,l=-1,u,f;for(;++l<=t.length;){if(l<t.length)u=t.codePointAt(l);else{if(u===47)break;u=47}if(u===47){if(!(s===l-1||a===1))if(s!==l-1&&a===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(f=n.lastIndexOf("/"),f!==n.length-1){f<0?(n="",r=0):(n=n.slice(0,f),r=n.length-1-n.lastIndexOf("/")),s=l,a=0;continue}}else if(n.length>0){n="",r=0,s=l,a=0;continue}}e&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+t.slice(s+1,l):n=t.slice(s+1,l),r=l-s-1;s=l,a=0}else u===46&&a>-1?a++:a=-1}return n}function rc(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const WV={cwd:eH};function eH(){return"/"}function Yg(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function tH(t){if(typeof t=="string")t=new URL(t);else if(!Yg(t)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(t.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return nH(t)}function nH(t){if(t.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const e=t.pathname;let n=-1;for(;++n<e.length;)if(e.codePointAt(n)===37&&e.codePointAt(n+1)===50){const r=e.codePointAt(n+2);if(r===70||r===102){const s=new TypeError("File URL path must not include encoded / characters");throw s.code="ERR_INVALID_FILE_URL_PATH",s}}return decodeURIComponent(e)}const Om=["history","path","basename","stem","extname","dirname"];class lA{constructor(e){let n;e?Yg(e)?n={path:e}:typeof e=="string"||rH(e)?n={value:e}:n=e:n={},this.cwd="cwd"in n?"":WV.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<Om.length;){const a=Om[r];a in n&&n[a]!==void 0&&n[a]!==null&&(this[a]=a==="history"?[...n[a]]:n[a])}let s;for(s in n)Om.includes(s)||(this[s]=n[s])}get basename(){return typeof this.path=="string"?Pr.basename(this.path):void 0}set basename(e){Im(e,"basename"),Nm(e,"basename"),this.path=Pr.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?Pr.dirname(this.path):void 0}set dirname(e){LS(this.basename,"dirname"),this.path=Pr.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?Pr.extname(this.path):void 0}set extname(e){if(Nm(e,"extname"),LS(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Pr.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){Yg(e)&&(e=tH(e)),Im(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?Pr.basename(this.path,this.extname):void 0}set stem(e){Im(e,"stem"),Nm(e,"stem"),this.path=Pr.join(this.dirname||"",e+(this.extname||""))}fail(e,n,r){const s=this.message(e,n,r);throw s.fatal=!0,s}info(e,n,r){const s=this.message(e,n,r);return s.fatal=void 0,s}message(e,n,r){const s=new vn(e,n,r);return this.path&&(s.name=this.path+":"+s.name,s.file=this.path),s.fatal=!1,this.messages.push(s),s}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function Nm(t,e){if(t&&t.includes(Pr.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+Pr.sep+"`")}function Im(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}function LS(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}function rH(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const sH=(function(t){const r=this.constructor.prototype,s=r[t],a=function(){return s.apply(a,arguments)};return Object.setPrototypeOf(a,r),a}),iH={}.hasOwnProperty;class C0 extends sH{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=HV()}copy(){const e=new C0;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];e.use(...r)}return e.data(Rm(!0,{},this.namespace)),e}data(e,n){return typeof e=="string"?arguments.length===2?(Lm("data",this.frozen),this.namespace[e]=n,this):iH.call(this.namespace,e)&&this.namespace[e]||void 0:e?(Lm("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const s=n.call(e,...r);typeof s=="function"&&this.transformers.use(s)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const n=$u(e),r=this.parser||this.Parser;return Mm("parse",r),r(String(n),n)}process(e,n){const r=this;return this.freeze(),Mm("process",this.parser||this.Parser),Dm("process",this.compiler||this.Compiler),n?s(void 0,n):new Promise(s);function s(a,l){const u=$u(e),f=r.parse(u);r.run(f,u,function(m,p,y){if(m||!p||!y)return h(m);const g=p,v=r.stringify(g,y);lH(v)?y.value=v:y.result=v,h(m,y)});function h(m,p){m||!p?l(m):a?a(p):n(void 0,p)}}}processSync(e){let n=!1,r;return this.freeze(),Mm("processSync",this.parser||this.Parser),Dm("processSync",this.compiler||this.Compiler),this.process(e,s),zS("processSync","process",n),r;function s(a,l){n=!0,MS(a),r=l}}run(e,n,r){jS(e),this.freeze();const s=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?a(void 0,r):new Promise(a);function a(l,u){const f=$u(n);s.run(e,f,h);function h(m,p,y){const g=p||e;m?u(m):l?l(g):r(void 0,g,y)}}}runSync(e,n){let r=!1,s;return this.run(e,n,a),zS("runSync","run",r),s;function a(l,u){MS(l),s=u,r=!0}}stringify(e,n){this.freeze();const r=$u(n),s=this.compiler||this.Compiler;return Dm("stringify",s),jS(e),s(e,r)}use(e,...n){const r=this.attachers,s=this.namespace;if(Lm("use",this.frozen),e!=null)if(typeof e=="function")f(e,n);else if(typeof e=="object")Array.isArray(e)?u(e):l(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function a(h){if(typeof h=="function")f(h,[]);else if(typeof h=="object")if(Array.isArray(h)){const[m,...p]=h;f(m,p)}else l(h);else throw new TypeError("Expected usable value, not `"+h+"`")}function l(h){if(!("plugins"in h)&&!("settings"in h))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");u(h.plugins),h.settings&&(s.settings=Rm(!0,s.settings,h.settings))}function u(h){let m=-1;if(h!=null)if(Array.isArray(h))for(;++m<h.length;){const p=h[m];a(p)}else throw new TypeError("Expected a list of plugins, not `"+h+"`")}function f(h,m){let p=-1,y=-1;for(;++p<r.length;)if(r[p][0]===h){y=p;break}if(y===-1)r.push([h,...m]);else if(m.length>0){let[g,...v]=m;const x=r[y][1];Jg(x)&&Jg(g)&&(g=Rm(!0,x,g)),r[y]=[h,g,...v]}}}}const aH=new C0().freeze();function Mm(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `parser`")}function Dm(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `compiler`")}function Lm(t,e){if(e)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function jS(t){if(!Jg(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}function zS(t,e,n){if(!n)throw new Error("`"+t+"` finished async. Use `"+e+"` instead")}function $u(t){return oH(t)?t:new lA(t)}function oH(t){return!!(t&&typeof t=="object"&&"message"in t&&"messages"in t)}function lH(t){return typeof t=="string"||cH(t)}function cH(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const uH="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",PS=[],BS={allowDangerousHtml:!0},fH=/^(https?|ircs?|mailto|xmpp)$/i,hH=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function dH(t){const e=pH(t),n=mH(t);return gH(e.runSync(e.parse(n),n),t)}function pH(t){const e=t.rehypePlugins||PS,n=t.remarkPlugins||PS,r=t.remarkRehypeOptions?{...t.remarkRehypeOptions,...BS}:BS;return aH().use(Z7).use(n).use(qV,r).use(e)}function mH(t){const e=t.children||"",n=new lA;return typeof e=="string"&&(n.value=e),n}function gH(t,e){const n=e.allowedElements,r=e.allowElement,s=e.components,a=e.disallowedElements,l=e.skipHtml,u=e.unwrapDisallowed,f=e.urlTransform||yH;for(const m of hH)Object.hasOwn(e,m.from)&&(""+m.from+(m.to?"use `"+m.to+"` instead":"remove it")+uH+m.id,void 0);return E0(t,h),Nq(t,{Fragment:w.Fragment,components:s,ignoreInvalidStyle:!0,jsx:w.jsx,jsxs:w.jsxs,passKeys:!0,passNode:!0});function h(m,p,y){if(m.type==="raw"&&y&&typeof p=="number")return l?y.children.splice(p,1):y.children[p]={type:"text",value:m.value},p;if(m.type==="element"){let g;for(g in Em)if(Object.hasOwn(Em,g)&&Object.hasOwn(m.properties,g)){const v=m.properties[g],x=Em[g];(x===null||x.includes(m.tagName))&&(m.properties[g]=f(String(v||""),g,m))}}if(m.type==="element"){let g=n?!n.includes(m.tagName):a?a.includes(m.tagName):!1;if(!g&&r&&typeof p=="number"&&(g=!r(m,p,y)),g&&y&&typeof p=="number")return u&&m.children?y.children.splice(p,1,...m.children):y.children.splice(p,1),p}}}function yH(t){const e=t.indexOf(":"),n=t.indexOf("?"),r=t.indexOf("#"),s=t.indexOf("/");return e===-1||s!==-1&&e>s||n!==-1&&e>n||r!==-1&&e>r||fH.test(t.slice(0,e))?t:""}function _H(t){if(typeof t!="string")throw new TypeError("Expected a string");return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function cA(t,e,n){const s=Ch((n||{}).ignore||[]),a=bH(e);let l=-1;for(;++l<a.length;)oA(t,"text",u);function u(h,m){let p=-1,y;for(;++p<m.length;){const g=m[p],v=y?y.children:void 0;if(s(g,v?v.indexOf(g):void 0,y))return;y=g}if(y)return f(h,m)}function f(h,m){const p=m[m.length-1],y=a[l][0],g=a[l][1];let v=0;const E=p.children.indexOf(h);let S=!1,C=[];y.lastIndex=0;let T=y.exec(h.value);for(;T;){const L=T.index,D={index:T.index,input:T.input,stack:[...m,h]};let N=g(...T,D);if(typeof N=="string"&&(N=N.length>0?{type:"text",value:N}:void 0),N===!1?y.lastIndex=L+1:(v!==L&&C.push({type:"text",value:h.value.slice(v,L)}),Array.isArray(N)?C.push(...N):N&&C.push(N),v=L+T[0].length,S=!0),!y.global)break;T=y.exec(h.value)}return S?(v<h.value.length&&C.push({type:"text",value:h.value.slice(v)}),p.children.splice(E,1,...C)):C=[h],E+C.length}}function bH(t){const e=[];if(!Array.isArray(t))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!t[0]||Array.isArray(t[0])?t:[t];let r=-1;for(;++r<n.length;){const s=n[r];e.push([vH(s[0]),xH(s[1])])}return e}function vH(t){return typeof t=="string"?new RegExp(_H(t),"g"):t}function xH(t){return typeof t=="function"?t:function(){return t}}const jm="phrasing",zm=["autolink","link","image","label"];function wH(){return{transforms:[RH],enter:{literalAutolink:kH,literalAutolinkEmail:Pm,literalAutolinkHttp:Pm,literalAutolinkWww:Pm},exit:{literalAutolink:AH,literalAutolinkEmail:TH,literalAutolinkHttp:EH,literalAutolinkWww:CH}}}function SH(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:jm,notInConstruct:zm},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:jm,notInConstruct:zm},{character:":",before:"[ps]",after:"\\/",inConstruct:jm,notInConstruct:zm}]}}function kH(t){this.enter({type:"link",title:null,url:"",children:[]},t)}function Pm(t){this.config.enter.autolinkProtocol.call(this,t)}function EH(t){this.config.exit.autolinkProtocol.call(this,t)}function CH(t){this.config.exit.data.call(this,t);const e=this.stack[this.stack.length-1];e.type,e.url="http://"+this.sliceSerialize(t)}function TH(t){this.config.exit.autolinkEmail.call(this,t)}function AH(t){this.exit(t)}function RH(t){cA(t,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,OH],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),NH]],{ignore:["link","linkReference"]})}function OH(t,e,n,r,s){let a="";if(!uA(s)||(/^w/i.test(e)&&(n=e+n,e="",a="http://"),!IH(n)))return!1;const l=MH(n+r);if(!l[0])return!1;const u={type:"link",title:null,url:a+e+l[0],children:[{type:"text",value:e+l[0]}]};return l[1]?[u,{type:"text",value:l[1]}]:u}function NH(t,e,n,r){return!uA(r,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+e+"@"+n,children:[{type:"text",value:e+"@"+n}]}}function IH(t){const e=t.split(".");return!(e.length<2||e[e.length-1]&&(/_/.test(e[e.length-1])||!/[a-zA-Z\d]/.test(e[e.length-1]))||e[e.length-2]&&(/_/.test(e[e.length-2])||!/[a-zA-Z\d]/.test(e[e.length-2])))}function MH(t){const e=/[!"&'),.:;<>?\]}]+$/.exec(t);if(!e)return[t,void 0];t=t.slice(0,e.index);let n=e[0],r=n.indexOf(")");const s=Tf(t,"(");let a=Tf(t,")");for(;r!==-1&&s>a;)t+=n.slice(0,r+1),n=n.slice(r+1),r=n.indexOf(")"),a++;return[t,n]}function uA(t,e){const n=t.input.charCodeAt(t.index-1);return(t.index===0||Li(n)||Sh(n))&&(!e||n!==47)}fA.peek=qH;function DH(){this.buffer()}function LH(t){this.enter({type:"footnoteReference",identifier:"",label:""},t)}function jH(){this.buffer()}function zH(t){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},t)}function PH(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Rr(this.sliceSerialize(t)).toLowerCase(),n.label=e}function BH(t){this.exit(t)}function $H(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Rr(this.sliceSerialize(t)).toLowerCase(),n.label=e}function UH(t){this.exit(t)}function qH(){return"["}function fA(t,e,n,r){const s=n.createTracker(r);let a=s.move("[^");const l=n.enter("footnoteReference"),u=n.enter("reference");return a+=s.move(n.safe(n.associationId(t),{after:"]",before:a})),u(),l(),a+=s.move("]"),a}function FH(){return{enter:{gfmFootnoteCallString:DH,gfmFootnoteCall:LH,gfmFootnoteDefinitionLabelString:jH,gfmFootnoteDefinition:zH},exit:{gfmFootnoteCallString:PH,gfmFootnoteCall:BH,gfmFootnoteDefinitionLabelString:$H,gfmFootnoteDefinition:UH}}}function VH(t){let e=!1;return t&&t.firstLineBlank&&(e=!0),{handlers:{footnoteDefinition:n,footnoteReference:fA},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(r,s,a,l){const u=a.createTracker(l);let f=u.move("[^");const h=a.enter("footnoteDefinition"),m=a.enter("label");return f+=u.move(a.safe(a.associationId(r),{before:f,after:"]"})),m(),f+=u.move("]:"),r.children&&r.children.length>0&&(u.shift(4),f+=u.move((e?`
`:" ")+a.indentLines(a.containerFlow(r,u.current()),e?hA:HH))),h(),f}}function HH(t,e,n){return e===0?t:hA(t,e,n)}function hA(t,e,n){return(n?"":"    ")+t}const GH=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];dA.peek=YH;function KH(){return{canContainEols:["delete"],enter:{strikethrough:QH},exit:{strikethrough:JH}}}function ZH(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:GH}],handlers:{delete:dA}}}function QH(t){this.enter({type:"delete",children:[]},t)}function JH(t){this.exit(t)}function dA(t,e,n,r){const s=n.createTracker(r),a=n.enter("strikethrough");let l=s.move("~~");return l+=n.containerPhrasing(t,{...s.current(),before:l,after:"~"}),l+=s.move("~~"),a(),l}function YH(){return"~"}function XH(t){return t.length}function WH(t,e){const n=e||{},r=(n.align||[]).concat(),s=n.stringLength||XH,a=[],l=[],u=[],f=[];let h=0,m=-1;for(;++m<t.length;){const x=[],E=[];let S=-1;for(t[m].length>h&&(h=t[m].length);++S<t[m].length;){const C=eG(t[m][S]);if(n.alignDelimiters!==!1){const T=s(C);E[S]=T,(f[S]===void 0||T>f[S])&&(f[S]=T)}x.push(C)}l[m]=x,u[m]=E}let p=-1;if(typeof r=="object"&&"length"in r)for(;++p<h;)a[p]=$S(r[p]);else{const x=$S(r);for(;++p<h;)a[p]=x}p=-1;const y=[],g=[];for(;++p<h;){const x=a[p];let E="",S="";x===99?(E=":",S=":"):x===108?E=":":x===114&&(S=":");let C=n.alignDelimiters===!1?1:Math.max(1,f[p]-E.length-S.length);const T=E+"-".repeat(C)+S;n.alignDelimiters!==!1&&(C=E.length+C+S.length,C>f[p]&&(f[p]=C),g[p]=C),y[p]=T}l.splice(1,0,y),u.splice(1,0,g),m=-1;const v=[];for(;++m<l.length;){const x=l[m],E=u[m];p=-1;const S=[];for(;++p<h;){const C=x[p]||"";let T="",L="";if(n.alignDelimiters!==!1){const D=f[p]-(E[p]||0),N=a[p];N===114?T=" ".repeat(D):N===99?D%2?(T=" ".repeat(D/2+.5),L=" ".repeat(D/2-.5)):(T=" ".repeat(D/2),L=T):L=" ".repeat(D)}n.delimiterStart!==!1&&!p&&S.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&C==="")&&(n.delimiterStart!==!1||p)&&S.push(" "),n.alignDelimiters!==!1&&S.push(T),S.push(C),n.alignDelimiters!==!1&&S.push(L),n.padding!==!1&&S.push(" "),(n.delimiterEnd!==!1||p!==h-1)&&S.push("|")}v.push(n.delimiterEnd===!1?S.join("").replace(/ +$/,""):S.join(""))}return v.join(`
`)}function eG(t){return t==null?"":String(t)}function $S(t){const e=typeof t=="string"?t.codePointAt(0):0;return e===67||e===99?99:e===76||e===108?108:e===82||e===114?114:0}function tG(t,e,n,r){const s=n.enter("blockquote"),a=n.createTracker(r);a.move("> "),a.shift(2);const l=n.indentLines(n.containerFlow(t,a.current()),nG);return s(),l}function nG(t,e,n){return">"+(n?"":" ")+t}function rG(t,e){return US(t,e.inConstruct,!0)&&!US(t,e.notInConstruct,!1)}function US(t,e,n){if(typeof e=="string"&&(e=[e]),!e||e.length===0)return n;let r=-1;for(;++r<e.length;)if(t.includes(e[r]))return!0;return!1}function qS(t,e,n,r){let s=-1;for(;++s<n.unsafe.length;)if(n.unsafe[s].character===`
`&&rG(n.stack,n.unsafe[s]))return/[ \t]/.test(r.before)?"":" ";return`\\
`}function sG(t,e){const n=String(t);let r=n.indexOf(e),s=r,a=0,l=0;if(typeof e!="string")throw new TypeError("Expected substring");for(;r!==-1;)r===s?++a>l&&(l=a):a=1,s=r+e.length,r=n.indexOf(e,s);return l}function iG(t,e){return!!(e.options.fences===!1&&t.value&&!t.lang&&/[^ \r\n]/.test(t.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(t.value))}function aG(t){const e=t.options.fence||"`";if(e!=="`"&&e!=="~")throw new Error("Cannot serialize code with `"+e+"` for `options.fence`, expected `` ` `` or `~`");return e}function oG(t,e,n,r){const s=aG(n),a=t.value||"",l=s==="`"?"GraveAccent":"Tilde";if(iG(t,n)){const p=n.enter("codeIndented"),y=n.indentLines(a,lG);return p(),y}const u=n.createTracker(r),f=s.repeat(Math.max(sG(a,s)+1,3)),h=n.enter("codeFenced");let m=u.move(f);if(t.lang){const p=n.enter(`codeFencedLang${l}`);m+=u.move(n.safe(t.lang,{before:m,after:" ",encode:["`"],...u.current()})),p()}if(t.lang&&t.meta){const p=n.enter(`codeFencedMeta${l}`);m+=u.move(" "),m+=u.move(n.safe(t.meta,{before:m,after:`
`,encode:["`"],...u.current()})),p()}return m+=u.move(`
`),a&&(m+=u.move(a+`
`)),m+=u.move(f),h(),m}function lG(t,e,n){return(n?"":"    ")+t}function T0(t){const e=t.options.quote||'"';if(e!=='"'&&e!=="'")throw new Error("Cannot serialize title with `"+e+"` for `options.quote`, expected `\"`, or `'`");return e}function cG(t,e,n,r){const s=T0(n),a=s==='"'?"Quote":"Apostrophe",l=n.enter("definition");let u=n.enter("label");const f=n.createTracker(r);let h=f.move("[");return h+=f.move(n.safe(n.associationId(t),{before:h,after:"]",...f.current()})),h+=f.move("]: "),u(),!t.url||/[\0- \u007F]/.test(t.url)?(u=n.enter("destinationLiteral"),h+=f.move("<"),h+=f.move(n.safe(t.url,{before:h,after:">",...f.current()})),h+=f.move(">")):(u=n.enter("destinationRaw"),h+=f.move(n.safe(t.url,{before:h,after:t.title?" ":`
`,...f.current()}))),u(),t.title&&(u=n.enter(`title${a}`),h+=f.move(" "+s),h+=f.move(n.safe(t.title,{before:h,after:s,...f.current()})),h+=f.move(s),u()),l(),h}function uG(t){const e=t.options.emphasis||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize emphasis with `"+e+"` for `options.emphasis`, expected `*`, or `_`");return e}function Fl(t){return"&#x"+t.toString(16).toUpperCase()+";"}function Jf(t,e,n){const r=Ga(t),s=Ga(e);return r===void 0?s===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:s===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:r===1?s===void 0?{inside:!1,outside:!1}:s===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:s===void 0?{inside:!1,outside:!1}:s===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}pA.peek=fG;function pA(t,e,n,r){const s=uG(n),a=n.enter("emphasis"),l=n.createTracker(r),u=l.move(s);let f=l.move(n.containerPhrasing(t,{after:s,before:u,...l.current()}));const h=f.charCodeAt(0),m=Jf(r.before.charCodeAt(r.before.length-1),h,s);m.inside&&(f=Fl(h)+f.slice(1));const p=f.charCodeAt(f.length-1),y=Jf(r.after.charCodeAt(0),p,s);y.inside&&(f=f.slice(0,-1)+Fl(p));const g=l.move(s);return a(),n.attentionEncodeSurroundingInfo={after:y.outside,before:m.outside},u+f+g}function fG(t,e,n){return n.options.emphasis||"*"}function hG(t,e){let n=!1;return E0(t,function(r){if("value"in r&&/\r?\n|\r/.test(r.value)||r.type==="break")return n=!0,Zg}),!!((!t.depth||t.depth<3)&&_0(t)&&(e.options.setext||n))}function dG(t,e,n,r){const s=Math.max(Math.min(6,t.depth||1),1),a=n.createTracker(r);if(hG(t,n)){const m=n.enter("headingSetext"),p=n.enter("phrasing"),y=n.containerPhrasing(t,{...a.current(),before:`
`,after:`
`});return p(),m(),y+`
`+(s===1?"=":"-").repeat(y.length-(Math.max(y.lastIndexOf("\r"),y.lastIndexOf(`
`))+1))}const l="#".repeat(s),u=n.enter("headingAtx"),f=n.enter("phrasing");a.move(l+" ");let h=n.containerPhrasing(t,{before:"# ",after:`
`,...a.current()});return/^[\t ]/.test(h)&&(h=Fl(h.charCodeAt(0))+h.slice(1)),h=h?l+" "+h:l,n.options.closeAtx&&(h+=" "+l),f(),u(),h}mA.peek=pG;function mA(t){return t.value||""}function pG(){return"<"}gA.peek=mG;function gA(t,e,n,r){const s=T0(n),a=s==='"'?"Quote":"Apostrophe",l=n.enter("image");let u=n.enter("label");const f=n.createTracker(r);let h=f.move("![");return h+=f.move(n.safe(t.alt,{before:h,after:"]",...f.current()})),h+=f.move("]("),u(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(u=n.enter("destinationLiteral"),h+=f.move("<"),h+=f.move(n.safe(t.url,{before:h,after:">",...f.current()})),h+=f.move(">")):(u=n.enter("destinationRaw"),h+=f.move(n.safe(t.url,{before:h,after:t.title?" ":")",...f.current()}))),u(),t.title&&(u=n.enter(`title${a}`),h+=f.move(" "+s),h+=f.move(n.safe(t.title,{before:h,after:s,...f.current()})),h+=f.move(s),u()),h+=f.move(")"),l(),h}function mG(){return"!"}yA.peek=gG;function yA(t,e,n,r){const s=t.referenceType,a=n.enter("imageReference");let l=n.enter("label");const u=n.createTracker(r);let f=u.move("![");const h=n.safe(t.alt,{before:f,after:"]",...u.current()});f+=u.move(h+"]["),l();const m=n.stack;n.stack=[],l=n.enter("reference");const p=n.safe(n.associationId(t),{before:f,after:"]",...u.current()});return l(),n.stack=m,a(),s==="full"||!h||h!==p?f+=u.move(p+"]"):s==="shortcut"?f=f.slice(0,-1):f+=u.move("]"),f}function gG(){return"!"}_A.peek=yG;function _A(t,e,n){let r=t.value||"",s="`",a=-1;for(;new RegExp("(^|[^`])"+s+"([^`]|$)").test(r);)s+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++a<n.unsafe.length;){const l=n.unsafe[a],u=n.compilePattern(l);let f;if(l.atBreak)for(;f=u.exec(r);){let h=f.index;r.charCodeAt(h)===10&&r.charCodeAt(h-1)===13&&h--,r=r.slice(0,h)+" "+r.slice(f.index+1)}}return s+r+s}function yG(){return"`"}function bA(t,e){const n=_0(t);return!!(!e.options.resourceLink&&t.url&&!t.title&&t.children&&t.children.length===1&&t.children[0].type==="text"&&(n===t.url||"mailto:"+n===t.url)&&/^[a-z][a-z+.-]+:/i.test(t.url)&&!/[\0- <>\u007F]/.test(t.url))}vA.peek=_G;function vA(t,e,n,r){const s=T0(n),a=s==='"'?"Quote":"Apostrophe",l=n.createTracker(r);let u,f;if(bA(t,n)){const m=n.stack;n.stack=[],u=n.enter("autolink");let p=l.move("<");return p+=l.move(n.containerPhrasing(t,{before:p,after:">",...l.current()})),p+=l.move(">"),u(),n.stack=m,p}u=n.enter("link"),f=n.enter("label");let h=l.move("[");return h+=l.move(n.containerPhrasing(t,{before:h,after:"](",...l.current()})),h+=l.move("]("),f(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(f=n.enter("destinationLiteral"),h+=l.move("<"),h+=l.move(n.safe(t.url,{before:h,after:">",...l.current()})),h+=l.move(">")):(f=n.enter("destinationRaw"),h+=l.move(n.safe(t.url,{before:h,after:t.title?" ":")",...l.current()}))),f(),t.title&&(f=n.enter(`title${a}`),h+=l.move(" "+s),h+=l.move(n.safe(t.title,{before:h,after:s,...l.current()})),h+=l.move(s),f()),h+=l.move(")"),u(),h}function _G(t,e,n){return bA(t,n)?"<":"["}xA.peek=bG;function xA(t,e,n,r){const s=t.referenceType,a=n.enter("linkReference");let l=n.enter("label");const u=n.createTracker(r);let f=u.move("[");const h=n.containerPhrasing(t,{before:f,after:"]",...u.current()});f+=u.move(h+"]["),l();const m=n.stack;n.stack=[],l=n.enter("reference");const p=n.safe(n.associationId(t),{before:f,after:"]",...u.current()});return l(),n.stack=m,a(),s==="full"||!h||h!==p?f+=u.move(p+"]"):s==="shortcut"?f=f.slice(0,-1):f+=u.move("]"),f}function bG(){return"["}function A0(t){const e=t.options.bullet||"*";if(e!=="*"&&e!=="+"&&e!=="-")throw new Error("Cannot serialize items with `"+e+"` for `options.bullet`, expected `*`, `+`, or `-`");return e}function vG(t){const e=A0(t),n=t.options.bulletOther;if(!n)return e==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===e)throw new Error("Expected `bullet` (`"+e+"`) and `bulletOther` (`"+n+"`) to be different");return n}function xG(t){const e=t.options.bulletOrdered||".";if(e!=="."&&e!==")")throw new Error("Cannot serialize items with `"+e+"` for `options.bulletOrdered`, expected `.` or `)`");return e}function wA(t){const e=t.options.rule||"*";if(e!=="*"&&e!=="-"&&e!=="_")throw new Error("Cannot serialize rules with `"+e+"` for `options.rule`, expected `*`, `-`, or `_`");return e}function wG(t,e,n,r){const s=n.enter("list"),a=n.bulletCurrent;let l=t.ordered?xG(n):A0(n);const u=t.ordered?l==="."?")":".":vG(n);let f=e&&n.bulletLastUsed?l===n.bulletLastUsed:!1;if(!t.ordered){const m=t.children?t.children[0]:void 0;if((l==="*"||l==="-")&&m&&(!m.children||!m.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(f=!0),wA(n)===l&&m){let p=-1;for(;++p<t.children.length;){const y=t.children[p];if(y&&y.type==="listItem"&&y.children&&y.children[0]&&y.children[0].type==="thematicBreak"){f=!0;break}}}}f&&(l=u),n.bulletCurrent=l;const h=n.containerFlow(t,r);return n.bulletLastUsed=l,n.bulletCurrent=a,s(),h}function SG(t){const e=t.options.listItemIndent||"one";if(e!=="tab"&&e!=="one"&&e!=="mixed")throw new Error("Cannot serialize items with `"+e+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return e}function kG(t,e,n,r){const s=SG(n);let a=n.bulletCurrent||A0(n);e&&e.type==="list"&&e.ordered&&(a=(typeof e.start=="number"&&e.start>-1?e.start:1)+(n.options.incrementListMarker===!1?0:e.children.indexOf(t))+a);let l=a.length+1;(s==="tab"||s==="mixed"&&(e&&e.type==="list"&&e.spread||t.spread))&&(l=Math.ceil(l/4)*4);const u=n.createTracker(r);u.move(a+" ".repeat(l-a.length)),u.shift(l);const f=n.enter("listItem"),h=n.indentLines(n.containerFlow(t,u.current()),m);return f(),h;function m(p,y,g){return y?(g?"":" ".repeat(l))+p:(g?a:a+" ".repeat(l-a.length))+p}}function EG(t,e,n,r){const s=n.enter("paragraph"),a=n.enter("phrasing"),l=n.containerPhrasing(t,r);return a(),s(),l}const CG=Ch(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function TG(t,e,n,r){return(t.children.some(function(l){return CG(l)})?n.containerPhrasing:n.containerFlow).call(n,t,r)}function AG(t){const e=t.options.strong||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize strong with `"+e+"` for `options.strong`, expected `*`, or `_`");return e}SA.peek=RG;function SA(t,e,n,r){const s=AG(n),a=n.enter("strong"),l=n.createTracker(r),u=l.move(s+s);let f=l.move(n.containerPhrasing(t,{after:s,before:u,...l.current()}));const h=f.charCodeAt(0),m=Jf(r.before.charCodeAt(r.before.length-1),h,s);m.inside&&(f=Fl(h)+f.slice(1));const p=f.charCodeAt(f.length-1),y=Jf(r.after.charCodeAt(0),p,s);y.inside&&(f=f.slice(0,-1)+Fl(p));const g=l.move(s+s);return a(),n.attentionEncodeSurroundingInfo={after:y.outside,before:m.outside},u+f+g}function RG(t,e,n){return n.options.strong||"*"}function OG(t,e,n,r){return n.safe(t.value,r)}function NG(t){const e=t.options.ruleRepetition||3;if(e<3)throw new Error("Cannot serialize rules with repetition `"+e+"` for `options.ruleRepetition`, expected `3` or more");return e}function IG(t,e,n){const r=(wA(n)+(n.options.ruleSpaces?" ":"")).repeat(NG(n));return n.options.ruleSpaces?r.slice(0,-1):r}const kA={blockquote:tG,break:qS,code:oG,definition:cG,emphasis:pA,hardBreak:qS,heading:dG,html:mA,image:gA,imageReference:yA,inlineCode:_A,link:vA,linkReference:xA,list:wG,listItem:kG,paragraph:EG,root:TG,strong:SA,text:OG,thematicBreak:IG};function MG(){return{enter:{table:DG,tableData:FS,tableHeader:FS,tableRow:jG},exit:{codeText:zG,table:LG,tableData:Bm,tableHeader:Bm,tableRow:Bm}}}function DG(t){const e=t._align;this.enter({type:"table",align:e.map(function(n){return n==="none"?null:n}),children:[]},t),this.data.inTable=!0}function LG(t){this.exit(t),this.data.inTable=void 0}function jG(t){this.enter({type:"tableRow",children:[]},t)}function Bm(t){this.exit(t)}function FS(t){this.enter({type:"tableCell",children:[]},t)}function zG(t){let e=this.resume();this.data.inTable&&(e=e.replace(/\\([\\|])/g,PG));const n=this.stack[this.stack.length-1];n.type,n.value=e,this.exit(t)}function PG(t,e){return e==="|"?e:t}function BG(t){const e=t||{},n=e.tableCellPadding,r=e.tablePipeAlign,s=e.stringLength,a=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:y,table:l,tableCell:f,tableRow:u}};function l(g,v,x,E){return h(m(g,x,E),g.align)}function u(g,v,x,E){const S=p(g,x,E),C=h([S]);return C.slice(0,C.indexOf(`
`))}function f(g,v,x,E){const S=x.enter("tableCell"),C=x.enter("phrasing"),T=x.containerPhrasing(g,{...E,before:a,after:a});return C(),S(),T}function h(g,v){return WH(g,{align:v,alignDelimiters:r,padding:n,stringLength:s})}function m(g,v,x){const E=g.children;let S=-1;const C=[],T=v.enter("table");for(;++S<E.length;)C[S]=p(E[S],v,x);return T(),C}function p(g,v,x){const E=g.children;let S=-1;const C=[],T=v.enter("tableRow");for(;++S<E.length;)C[S]=f(E[S],g,v,x);return T(),C}function y(g,v,x){let E=kA.inlineCode(g,v,x);return x.stack.includes("tableCell")&&(E=E.replace(/\|/g,"\\$&")),E}}function $G(){return{exit:{taskListCheckValueChecked:VS,taskListCheckValueUnchecked:VS,paragraph:qG}}}function UG(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:FG}}}function VS(t){const e=this.stack[this.stack.length-2];e.type,e.checked=t.type==="taskListCheckValueChecked"}function qG(t){const e=this.stack[this.stack.length-2];if(e&&e.type==="listItem"&&typeof e.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const r=n.children[0];if(r&&r.type==="text"){const s=e.children;let a=-1,l;for(;++a<s.length;){const u=s[a];if(u.type==="paragraph"){l=u;break}}l===n&&(r.value=r.value.slice(1),r.value.length===0?n.children.shift():n.position&&r.position&&typeof r.position.start.offset=="number"&&(r.position.start.column++,r.position.start.offset++,n.position.start=Object.assign({},r.position.start)))}}this.exit(t)}function FG(t,e,n,r){const s=t.children[0],a=typeof t.checked=="boolean"&&s&&s.type==="paragraph",l="["+(t.checked?"x":" ")+"] ",u=n.createTracker(r);a&&u.move(l);let f=kA.listItem(t,e,n,{...r,...u.current()});return a&&(f=f.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,h)),f;function h(m){return m+l}}function VG(){return[wH(),FH(),KH(),MG(),$G()]}function HG(t){return{extensions:[SH(),VH(t),ZH(),BG(t),UG()]}}const GG={tokenize:XG,partial:!0},EA={tokenize:WG,partial:!0},CA={tokenize:eK,partial:!0},TA={tokenize:tK,partial:!0},KG={tokenize:nK,partial:!0},AA={name:"wwwAutolink",tokenize:JG,previous:OA},RA={name:"protocolAutolink",tokenize:YG,previous:NA},ys={name:"emailAutolink",tokenize:QG,previous:IA},Kr={};function ZG(){return{text:Kr}}let Si=48;for(;Si<123;)Kr[Si]=ys,Si++,Si===58?Si=65:Si===91&&(Si=97);Kr[43]=ys;Kr[45]=ys;Kr[46]=ys;Kr[95]=ys;Kr[72]=[ys,RA];Kr[104]=[ys,RA];Kr[87]=[ys,AA];Kr[119]=[ys,AA];function QG(t,e,n){const r=this;let s,a;return l;function l(p){return!Xg(p)||!IA.call(r,r.previous)||R0(r.events)?n(p):(t.enter("literalAutolink"),t.enter("literalAutolinkEmail"),u(p))}function u(p){return Xg(p)?(t.consume(p),u):p===64?(t.consume(p),f):n(p)}function f(p){return p===46?t.check(KG,m,h)(p):p===45||p===95||bn(p)?(a=!0,t.consume(p),f):m(p)}function h(p){return t.consume(p),s=!0,f}function m(p){return a&&s&&An(r.previous)?(t.exit("literalAutolinkEmail"),t.exit("literalAutolink"),e(p)):n(p)}}function JG(t,e,n){const r=this;return s;function s(l){return l!==87&&l!==119||!OA.call(r,r.previous)||R0(r.events)?n(l):(t.enter("literalAutolink"),t.enter("literalAutolinkWww"),t.check(GG,t.attempt(EA,t.attempt(CA,a),n),n)(l))}function a(l){return t.exit("literalAutolinkWww"),t.exit("literalAutolink"),e(l)}}function YG(t,e,n){const r=this;let s="",a=!1;return l;function l(p){return(p===72||p===104)&&NA.call(r,r.previous)&&!R0(r.events)?(t.enter("literalAutolink"),t.enter("literalAutolinkHttp"),s+=String.fromCodePoint(p),t.consume(p),u):n(p)}function u(p){if(An(p)&&s.length<5)return s+=String.fromCodePoint(p),t.consume(p),u;if(p===58){const y=s.toLowerCase();if(y==="http"||y==="https")return t.consume(p),f}return n(p)}function f(p){return p===47?(t.consume(p),a?h:(a=!0,f)):n(p)}function h(p){return p===null||Kf(p)||mt(p)||Li(p)||Sh(p)?n(p):t.attempt(EA,t.attempt(CA,m),n)(p)}function m(p){return t.exit("literalAutolinkHttp"),t.exit("literalAutolink"),e(p)}}function XG(t,e,n){let r=0;return s;function s(l){return(l===87||l===119)&&r<3?(r++,t.consume(l),s):l===46&&r===3?(t.consume(l),a):n(l)}function a(l){return l===null?n(l):e(l)}}function WG(t,e,n){let r,s,a;return l;function l(h){return h===46||h===95?t.check(TA,f,u)(h):h===null||mt(h)||Li(h)||h!==45&&Sh(h)?f(h):(a=!0,t.consume(h),l)}function u(h){return h===95?r=!0:(s=r,r=void 0),t.consume(h),l}function f(h){return s||r||!a?n(h):e(h)}}function eK(t,e){let n=0,r=0;return s;function s(l){return l===40?(n++,t.consume(l),s):l===41&&r<n?a(l):l===33||l===34||l===38||l===39||l===41||l===42||l===44||l===46||l===58||l===59||l===60||l===63||l===93||l===95||l===126?t.check(TA,e,a)(l):l===null||mt(l)||Li(l)?e(l):(t.consume(l),s)}function a(l){return l===41&&r++,t.consume(l),s}}function tK(t,e,n){return r;function r(u){return u===33||u===34||u===39||u===41||u===42||u===44||u===46||u===58||u===59||u===63||u===95||u===126?(t.consume(u),r):u===38?(t.consume(u),a):u===93?(t.consume(u),s):u===60||u===null||mt(u)||Li(u)?e(u):n(u)}function s(u){return u===null||u===40||u===91||mt(u)||Li(u)?e(u):r(u)}function a(u){return An(u)?l(u):n(u)}function l(u){return u===59?(t.consume(u),r):An(u)?(t.consume(u),l):n(u)}}function nK(t,e,n){return r;function r(a){return t.consume(a),s}function s(a){return bn(a)?n(a):e(a)}}function OA(t){return t===null||t===40||t===42||t===95||t===91||t===93||t===126||mt(t)}function NA(t){return!An(t)}function IA(t){return!(t===47||Xg(t))}function Xg(t){return t===43||t===45||t===46||t===95||bn(t)}function R0(t){let e=t.length,n=!1;for(;e--;){const r=t[e][1];if((r.type==="labelLink"||r.type==="labelImage")&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return t.length>0&&!n&&(t[t.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const rK={tokenize:fK,partial:!0};function sK(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:lK,continuation:{tokenize:cK},exit:uK}},text:{91:{name:"gfmFootnoteCall",tokenize:oK},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:iK,resolveTo:aK}}}}function iK(t,e,n){const r=this;let s=r.events.length;const a=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let l;for(;s--;){const f=r.events[s][1];if(f.type==="labelImage"){l=f;break}if(f.type==="gfmFootnoteCall"||f.type==="labelLink"||f.type==="label"||f.type==="image"||f.type==="link")break}return u;function u(f){if(!l||!l._balanced)return n(f);const h=Rr(r.sliceSerialize({start:l.end,end:r.now()}));return h.codePointAt(0)!==94||!a.includes(h.slice(1))?n(f):(t.enter("gfmFootnoteCallLabelMarker"),t.consume(f),t.exit("gfmFootnoteCallLabelMarker"),e(f))}}function aK(t,e){let n=t.length;for(;n--;)if(t[n][1].type==="labelImage"&&t[n][0]==="enter"){t[n][1];break}t[n+1][1].type="data",t[n+3][1].type="gfmFootnoteCallLabelMarker";const r={type:"gfmFootnoteCall",start:Object.assign({},t[n+3][1].start),end:Object.assign({},t[t.length-1][1].end)},s={type:"gfmFootnoteCallMarker",start:Object.assign({},t[n+3][1].end),end:Object.assign({},t[n+3][1].end)};s.end.column++,s.end.offset++,s.end._bufferIndex++;const a={type:"gfmFootnoteCallString",start:Object.assign({},s.end),end:Object.assign({},t[t.length-1][1].start)},l={type:"chunkString",contentType:"string",start:Object.assign({},a.start),end:Object.assign({},a.end)},u=[t[n+1],t[n+2],["enter",r,e],t[n+3],t[n+4],["enter",s,e],["exit",s,e],["enter",a,e],["enter",l,e],["exit",l,e],["exit",a,e],t[t.length-2],t[t.length-1],["exit",r,e]];return t.splice(n,t.length-n+1,...u),t}function oK(t,e,n){const r=this,s=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let a=0,l;return u;function u(p){return t.enter("gfmFootnoteCall"),t.enter("gfmFootnoteCallLabelMarker"),t.consume(p),t.exit("gfmFootnoteCallLabelMarker"),f}function f(p){return p!==94?n(p):(t.enter("gfmFootnoteCallMarker"),t.consume(p),t.exit("gfmFootnoteCallMarker"),t.enter("gfmFootnoteCallString"),t.enter("chunkString").contentType="string",h)}function h(p){if(a>999||p===93&&!l||p===null||p===91||mt(p))return n(p);if(p===93){t.exit("chunkString");const y=t.exit("gfmFootnoteCallString");return s.includes(Rr(r.sliceSerialize(y)))?(t.enter("gfmFootnoteCallLabelMarker"),t.consume(p),t.exit("gfmFootnoteCallLabelMarker"),t.exit("gfmFootnoteCall"),e):n(p)}return mt(p)||(l=!0),a++,t.consume(p),p===92?m:h}function m(p){return p===91||p===92||p===93?(t.consume(p),a++,h):h(p)}}function lK(t,e,n){const r=this,s=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let a,l=0,u;return f;function f(v){return t.enter("gfmFootnoteDefinition")._container=!0,t.enter("gfmFootnoteDefinitionLabel"),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(v),t.exit("gfmFootnoteDefinitionLabelMarker"),h}function h(v){return v===94?(t.enter("gfmFootnoteDefinitionMarker"),t.consume(v),t.exit("gfmFootnoteDefinitionMarker"),t.enter("gfmFootnoteDefinitionLabelString"),t.enter("chunkString").contentType="string",m):n(v)}function m(v){if(l>999||v===93&&!u||v===null||v===91||mt(v))return n(v);if(v===93){t.exit("chunkString");const x=t.exit("gfmFootnoteDefinitionLabelString");return a=Rr(r.sliceSerialize(x)),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(v),t.exit("gfmFootnoteDefinitionLabelMarker"),t.exit("gfmFootnoteDefinitionLabel"),y}return mt(v)||(u=!0),l++,t.consume(v),v===92?p:m}function p(v){return v===91||v===92||v===93?(t.consume(v),l++,m):m(v)}function y(v){return v===58?(t.enter("definitionMarker"),t.consume(v),t.exit("definitionMarker"),s.includes(a)||s.push(a),Xe(t,g,"gfmFootnoteDefinitionWhitespace")):n(v)}function g(v){return e(v)}}function cK(t,e,n){return t.check(nc,e,t.attempt(rK,e,n))}function uK(t){t.exit("gfmFootnoteDefinition")}function fK(t,e,n){const r=this;return Xe(t,s,"gfmFootnoteDefinitionIndent",5);function s(a){const l=r.events[r.events.length-1];return l&&l[1].type==="gfmFootnoteDefinitionIndent"&&l[2].sliceSerialize(l[1],!0).length===4?e(a):n(a)}}function hK(t){let n=(t||{}).singleTilde;const r={name:"strikethrough",tokenize:a,resolveAll:s};return n==null&&(n=!0),{text:{126:r},insideSpan:{null:[r]},attentionMarkers:{null:[126]}};function s(l,u){let f=-1;for(;++f<l.length;)if(l[f][0]==="enter"&&l[f][1].type==="strikethroughSequenceTemporary"&&l[f][1]._close){let h=f;for(;h--;)if(l[h][0]==="exit"&&l[h][1].type==="strikethroughSequenceTemporary"&&l[h][1]._open&&l[f][1].end.offset-l[f][1].start.offset===l[h][1].end.offset-l[h][1].start.offset){l[f][1].type="strikethroughSequence",l[h][1].type="strikethroughSequence";const m={type:"strikethrough",start:Object.assign({},l[h][1].start),end:Object.assign({},l[f][1].end)},p={type:"strikethroughText",start:Object.assign({},l[h][1].end),end:Object.assign({},l[f][1].start)},y=[["enter",m,u],["enter",l[h][1],u],["exit",l[h][1],u],["enter",p,u]],g=u.parser.constructs.insideSpan.null;g&&nr(y,y.length,0,kh(g,l.slice(h+1,f),u)),nr(y,y.length,0,[["exit",p,u],["enter",l[f][1],u],["exit",l[f][1],u],["exit",m,u]]),nr(l,h-1,f-h+3,y),f=h+y.length-2;break}}for(f=-1;++f<l.length;)l[f][1].type==="strikethroughSequenceTemporary"&&(l[f][1].type="data");return l}function a(l,u,f){const h=this.previous,m=this.events;let p=0;return y;function y(v){return h===126&&m[m.length-1][1].type!=="characterEscape"?f(v):(l.enter("strikethroughSequenceTemporary"),g(v))}function g(v){const x=Ga(h);if(v===126)return p>1?f(v):(l.consume(v),p++,g);if(p<2&&!n)return f(v);const E=l.exit("strikethroughSequenceTemporary"),S=Ga(v);return E._open=!S||S===2&&!!x,E._close=!x||x===2&&!!S,u(v)}}}class dK{constructor(){this.map=[]}add(e,n,r){pK(this,e,n,r)}consume(e){if(this.map.sort(function(a,l){return a[0]-l[0]}),this.map.length===0)return;let n=this.map.length;const r=[];for(;n>0;)n-=1,r.push(e.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),e.length=this.map[n][0];r.push(e.slice()),e.length=0;let s=r.pop();for(;s;){for(const a of s)e.push(a);s=r.pop()}this.map.length=0}}function pK(t,e,n,r){let s=0;if(!(n===0&&r.length===0)){for(;s<t.map.length;){if(t.map[s][0]===e){t.map[s][1]+=n,t.map[s][2].push(...r);return}s+=1}t.map.push([e,n,r])}}function mK(t,e){let n=!1;const r=[];for(;e<t.length;){const s=t[e];if(n){if(s[0]==="enter")s[1].type==="tableContent"&&r.push(t[e+1][1].type==="tableDelimiterMarker"?"left":"none");else if(s[1].type==="tableContent"){if(t[e-1][1].type==="tableDelimiterMarker"){const a=r.length-1;r[a]=r[a]==="left"?"center":"right"}}else if(s[1].type==="tableDelimiterRow")break}else s[0]==="enter"&&s[1].type==="tableDelimiterRow"&&(n=!0);e+=1}return r}function gK(){return{flow:{null:{name:"table",tokenize:yK,resolveAll:_K}}}}function yK(t,e,n){const r=this;let s=0,a=0,l;return u;function u(j){let J=r.events.length-1;for(;J>-1;){const P=r.events[J][1].type;if(P==="lineEnding"||P==="linePrefix")J--;else break}const ie=J>-1?r.events[J][1].type:null,q=ie==="tableHead"||ie==="tableRow"?N:f;return q===N&&r.parser.lazy[r.now().line]?n(j):q(j)}function f(j){return t.enter("tableHead"),t.enter("tableRow"),h(j)}function h(j){return j===124||(l=!0,a+=1),m(j)}function m(j){return j===null?n(j):Ae(j)?a>1?(a=0,r.interrupt=!0,t.exit("tableRow"),t.enter("lineEnding"),t.consume(j),t.exit("lineEnding"),g):n(j):He(j)?Xe(t,m,"whitespace")(j):(a+=1,l&&(l=!1,s+=1),j===124?(t.enter("tableCellDivider"),t.consume(j),t.exit("tableCellDivider"),l=!0,m):(t.enter("data"),p(j)))}function p(j){return j===null||j===124||mt(j)?(t.exit("data"),m(j)):(t.consume(j),j===92?y:p)}function y(j){return j===92||j===124?(t.consume(j),p):p(j)}function g(j){return r.interrupt=!1,r.parser.lazy[r.now().line]?n(j):(t.enter("tableDelimiterRow"),l=!1,He(j)?Xe(t,v,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(j):v(j))}function v(j){return j===45||j===58?E(j):j===124?(l=!0,t.enter("tableCellDivider"),t.consume(j),t.exit("tableCellDivider"),x):D(j)}function x(j){return He(j)?Xe(t,E,"whitespace")(j):E(j)}function E(j){return j===58?(a+=1,l=!0,t.enter("tableDelimiterMarker"),t.consume(j),t.exit("tableDelimiterMarker"),S):j===45?(a+=1,S(j)):j===null||Ae(j)?L(j):D(j)}function S(j){return j===45?(t.enter("tableDelimiterFiller"),C(j)):D(j)}function C(j){return j===45?(t.consume(j),C):j===58?(l=!0,t.exit("tableDelimiterFiller"),t.enter("tableDelimiterMarker"),t.consume(j),t.exit("tableDelimiterMarker"),T):(t.exit("tableDelimiterFiller"),T(j))}function T(j){return He(j)?Xe(t,L,"whitespace")(j):L(j)}function L(j){return j===124?v(j):j===null||Ae(j)?!l||s!==a?D(j):(t.exit("tableDelimiterRow"),t.exit("tableHead"),e(j)):D(j)}function D(j){return n(j)}function N(j){return t.enter("tableRow"),B(j)}function B(j){return j===124?(t.enter("tableCellDivider"),t.consume(j),t.exit("tableCellDivider"),B):j===null||Ae(j)?(t.exit("tableRow"),e(j)):He(j)?Xe(t,B,"whitespace")(j):(t.enter("data"),K(j))}function K(j){return j===null||j===124||mt(j)?(t.exit("data"),B(j)):(t.consume(j),j===92?G:K)}function G(j){return j===92||j===124?(t.consume(j),K):K(j)}}function _K(t,e){let n=-1,r=!0,s=0,a=[0,0,0,0],l=[0,0,0,0],u=!1,f=0,h,m,p;const y=new dK;for(;++n<t.length;){const g=t[n],v=g[1];g[0]==="enter"?v.type==="tableHead"?(u=!1,f!==0&&(HS(y,e,f,h,m),m=void 0,f=0),h={type:"table",start:Object.assign({},v.start),end:Object.assign({},v.end)},y.add(n,0,[["enter",h,e]])):v.type==="tableRow"||v.type==="tableDelimiterRow"?(r=!0,p=void 0,a=[0,0,0,0],l=[0,n+1,0,0],u&&(u=!1,m={type:"tableBody",start:Object.assign({},v.start),end:Object.assign({},v.end)},y.add(n,0,[["enter",m,e]])),s=v.type==="tableDelimiterRow"?2:m?3:1):s&&(v.type==="data"||v.type==="tableDelimiterMarker"||v.type==="tableDelimiterFiller")?(r=!1,l[2]===0&&(a[1]!==0&&(l[0]=l[1],p=Uu(y,e,a,s,void 0,p),a=[0,0,0,0]),l[2]=n)):v.type==="tableCellDivider"&&(r?r=!1:(a[1]!==0&&(l[0]=l[1],p=Uu(y,e,a,s,void 0,p)),a=l,l=[a[1],n,0,0])):v.type==="tableHead"?(u=!0,f=n):v.type==="tableRow"||v.type==="tableDelimiterRow"?(f=n,a[1]!==0?(l[0]=l[1],p=Uu(y,e,a,s,n,p)):l[1]!==0&&(p=Uu(y,e,l,s,n,p)),s=0):s&&(v.type==="data"||v.type==="tableDelimiterMarker"||v.type==="tableDelimiterFiller")&&(l[3]=n)}for(f!==0&&HS(y,e,f,h,m),y.consume(e.events),n=-1;++n<e.events.length;){const g=e.events[n];g[0]==="enter"&&g[1].type==="table"&&(g[1]._align=mK(e.events,n))}return t}function Uu(t,e,n,r,s,a){const l=r===1?"tableHeader":r===2?"tableDelimiter":"tableData",u="tableContent";n[0]!==0&&(a.end=Object.assign({},Ia(e.events,n[0])),t.add(n[0],0,[["exit",a,e]]));const f=Ia(e.events,n[1]);if(a={type:l,start:Object.assign({},f),end:Object.assign({},f)},t.add(n[1],0,[["enter",a,e]]),n[2]!==0){const h=Ia(e.events,n[2]),m=Ia(e.events,n[3]),p={type:u,start:Object.assign({},h),end:Object.assign({},m)};if(t.add(n[2],0,[["enter",p,e]]),r!==2){const y=e.events[n[2]],g=e.events[n[3]];if(y[1].end=Object.assign({},g[1].end),y[1].type="chunkText",y[1].contentType="text",n[3]>n[2]+1){const v=n[2]+1,x=n[3]-n[2]-1;t.add(v,x,[])}}t.add(n[3]+1,0,[["exit",p,e]])}return s!==void 0&&(a.end=Object.assign({},Ia(e.events,s)),t.add(s,0,[["exit",a,e]]),a=void 0),a}function HS(t,e,n,r,s){const a=[],l=Ia(e.events,n);s&&(s.end=Object.assign({},l),a.push(["exit",s,e])),r.end=Object.assign({},l),a.push(["exit",r,e]),t.add(n+1,0,a)}function Ia(t,e){const n=t[e],r=n[0]==="enter"?"start":"end";return n[1][r]}const bK={name:"tasklistCheck",tokenize:xK};function vK(){return{text:{91:bK}}}function xK(t,e,n){const r=this;return s;function s(f){return r.previous!==null||!r._gfmTasklistFirstContentOfListItem?n(f):(t.enter("taskListCheck"),t.enter("taskListCheckMarker"),t.consume(f),t.exit("taskListCheckMarker"),a)}function a(f){return mt(f)?(t.enter("taskListCheckValueUnchecked"),t.consume(f),t.exit("taskListCheckValueUnchecked"),l):f===88||f===120?(t.enter("taskListCheckValueChecked"),t.consume(f),t.exit("taskListCheckValueChecked"),l):n(f)}function l(f){return f===93?(t.enter("taskListCheckMarker"),t.consume(f),t.exit("taskListCheckMarker"),t.exit("taskListCheck"),u):n(f)}function u(f){return Ae(f)?e(f):He(f)?t.check({tokenize:wK},e,n)(f):n(f)}}function wK(t,e,n){return Xe(t,r,"whitespace");function r(s){return s===null?n(s):e(s)}}function SK(t){return qT([ZG(),sK(),hK(t),gK(),vK()])}const kK={};function EK(t){const e=this,n=t||kK,r=e.data(),s=r.micromarkExtensions||(r.micromarkExtensions=[]),a=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),l=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);s.push(SK(n)),a.push(VG()),l.push(HG(n))}function CK(t){cA(t,[/\r?\n|\r/g,TK])}function TK(){return{type:"break"}}function AK(){return function(t){CK(t)}}const RK={pre:({children:t})=>w.jsx(w.Fragment,{children:t}),li:({children:t,...e})=>w.jsx("li",{className:"py-0.5 ml-0",...e,children:t}),ul:({children:t,...e})=>w.jsx("ul",{className:"list-disc list-outside ml-5 pl-0 my-2",...e,children:t}),ol:({children:t,...e})=>w.jsx("ol",{className:"list-decimal list-outside ml-5 pl-0 my-2",...e,children:t}),strong:({children:t,...e})=>w.jsx("span",{className:"font-semibold",...e,children:t}),a:({children:t,href:e,...n})=>{let r=e||"";return r&&!r.startsWith("http")&&!r.startsWith("#")&&(r=`https://${r}`),w.jsx("a",{className:"text-sky-400 hover:underline",href:r,target:"_blank",rel:"noreferrer noopener",...n,children:t})},h1:({children:t,...e})=>w.jsx("h1",{className:"text-xl font-semibold mt-4 mb-2",...e,children:t}),h2:({children:t,...e})=>w.jsx("h2",{className:"text-lg font-semibold mt-4 mb-2",...e,children:t}),h3:({children:t,...e})=>w.jsx("h3",{className:"text-base font-semibold mt-3 mb-1",...e,children:t}),h4:({children:t,...e})=>w.jsx("h4",{className:"text-sm font-semibold mt-3 mb-1",...e,children:t}),h5:({children:t,...e})=>w.jsx("h5",{className:"text-sm font-semibold mt-2 mb-1",...e,children:t}),h6:({children:t,...e})=>w.jsx("h6",{className:"text-xs font-semibold mt-2 mb-1",...e,children:t}),p:({children:t,...e})=>w.jsx("p",{className:"my-2 leading-relaxed",...e,children:t}),table:({children:t,...e})=>w.jsx("div",{className:"overflow-x-auto my-3",children:w.jsx("table",{className:"w-full border-collapse border border-neutral-600 text-xs",...e,children:t})}),thead:({children:t,...e})=>w.jsx("thead",{className:"bg-neutral-700",...e,children:t}),tbody:({children:t,...e})=>w.jsx("tbody",{...e,children:t}),tr:({children:t,...e})=>w.jsx("tr",{className:"border-b border-neutral-600",...e,children:t}),th:({children:t,...e})=>w.jsx("th",{className:"p-2 text-left font-semibold border-r last:border-r-0 border-neutral-600",...e,children:t}),td:({children:t,...e})=>w.jsx("td",{className:"p-2 border-r last:border-r-0 border-neutral-600",...e,children:t}),blockquote:({children:t,...e})=>w.jsx("blockquote",{className:"border-l-4 border-neutral-500 pl-3 py-1 my-2 italic text-neutral-300",...e,children:t}),hr:({...t})=>w.jsx("hr",{className:"my-4 border-neutral-600",...t}),code({children:t,className:e,...n}){const r=/language-(\w+)/.exec(e||""),s=String(t).replace(/\n$/,""),a=s.includes(`
`);if(!r&&!a)return w.jsx("code",{...n,className:`${e||""} bg-neutral-700 px-1.5 py-0.5 rounded text-xs font-mono text-sky-300`,children:t});const l=r?.[1]||"text";return w.jsxs("div",{className:"my-3",children:[w.jsx("div",{className:"flex items-center justify-between bg-neutral-700 px-3 py-1 rounded-t text-xs text-neutral-400",children:w.jsx("span",{children:l})}),w.jsx("pre",{className:"bg-neutral-800 p-3 rounded-b overflow-x-auto",children:w.jsx("code",{className:"text-xs font-mono text-neutral-200",children:s})})]})}},OK=[EK,AK],NK=t=>{const e=Ue.c(6),{children:n}=t;if(!n)return null;let r=n,s;if(e[0]!==r){r=r.replace(/^(#{1,6}\s+.+)\n```/gm,"$1\n\n```");let l;e[3]===Symbol.for("react.memo_cache_sentinel")?(l=/```\n(#{1,6}\s+)/gm,e[3]=l):l=e[3],s=r.replace(l,"```\n\n$1"),e[0]=r,e[1]=s,e[2]=r}else s=e[1],r=e[2];r=s;let a;return e[4]!==r?(a=w.jsx(dH,{remarkPlugins:OK,components:RK,children:r}),e[4]=r,e[5]=a):a=e[5],a},IK=Q.memo(NK,(t,e)=>t.children===e.children);function MK(t){const e=Ue.c(85),{isOpen:n,onClose:r,request:s,setters:a}=t,[l,u]=Q.useState(""),[f,h]=Q.useState(),m=Q.useRef(null),p=Q.useRef(null),y=Q.useRef(s.id);let g;e[0]!==s.http?.response?(g=()=>{(async function(){const ve=s.http?.response;if(ve?.body)try{const Te=await ve.body.text();h(Te)}catch{h("(unable to read response body)")}else h(void 0)})()},e[0]=s.http?.response,e[1]=g):g=e[1];const v=s.http?.response?.body;let x;e[2]!==v?(x=[v],e[2]=v,e[3]=x):x=e[3],Q.useEffect(g,x);let E;e[4]!==s||e[5]!==f||e[6]!==a?(E={request:s,setters:a,responseBodyText:f},e[4]=s,e[5]=f,e[6]=a,e[7]=E):E=e[7];const S=E;let C;e[8]!==S?(C=mq(S),e[8]=S,e[9]=C):C=e[9];const T=C;let L;if(e[10]!==T){const ue=A8(),ye=T8(ue),ve=gq();L=YP(Te=>OP({adapter:ye,messages:Te,tools:T,systemPrompts:[ve],agentLoopStrategy:TE(10)})),e[10]=T,e[11]=L}else L=e[11];const D=L;let N;e[12]!==D||e[13]!==T?(N={connection:D,tools:T},e[12]=D,e[13]=T,e[14]=N):N=e[14];const{messages:B,sendMessage:K,isLoading:G,stop:j,clear:J}=XP(N);let ie,q;e[15]!==J||e[16]!==s.id?(ie=()=>{y.current!==s.id&&(J(),y.current=s.id)},q=[s.id,J],e[15]=J,e[16]=s.id,e[17]=ie,e[18]=q):(ie=e[17],q=e[18]),Q.useEffect(ie,q);let P;e[19]===Symbol.for("react.memo_cache_sentinel")?(P=()=>{m.current?.scrollIntoView({behavior:"smooth"})},e[19]=P):P=e[19];let U;e[20]!==B?(U=[B],e[20]=B,e[21]=U):U=e[21],Q.useEffect(P,U);let z,F;e[22]!==n?(z=()=>{n&&p.current?.focus()},F=[n],e[22]=n,e[23]=z,e[24]=F):(z=e[23],F=e[24]),Q.useEffect(z,F);let se;e[25]!==l||e[26]!==G||e[27]!==K?(se=ue=>{ue.preventDefault(),!(!l.trim()||G)&&(K(l.trim()),u(""))},e[25]=l,e[26]=G,e[27]=K,e[28]=se):se=e[28];const Y=se;let O;e[29]!==Y?(O=ue=>{ue.key==="Enter"&&!ue.shiftKey&&(ue.preventDefault(),Y(ue))},e[29]=Y,e[30]=O):O=e[30];const I=O,H=DK;let R;e[31]!==G||e[32]!==B?(R=(ue,ye)=>G&&ue.role==="assistant"&&ye===B.length-1,e[31]=G,e[32]=B,e[33]=R):R=e[33];const ae=R;if(!n)return null;let me;e[34]===Symbol.for("react.memo_cache_sentinel")?(me=w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx(Dl,{size:16,className:"text-amber-500"}),w.jsx("h3",{className:"font-medium text-neutral-900 dark:text-neutral-100",children:aS.name})]}),e[34]=me):me=e[34];let pe;e[35]===Symbol.for("react.memo_cache_sentinel")?(pe=w.jsx(th,{size:16}),e[35]=pe):pe=e[35];let we;e[36]!==J?(we=w.jsx("button",{onClick:J,className:"p-1.5 text-neutral-500 hover:text-neutral-900 hover:bg-neutral-100 dark:hover:text-neutral-300 dark:hover:bg-neutral-800 rounded transition-colors",title:"Clear chat",children:pe}),e[36]=J,e[37]=we):we=e[37];let Ne;e[38]===Symbol.for("react.memo_cache_sentinel")?(Ne=w.jsx(wy,{size:16}),e[38]=Ne):Ne=e[38];let Ie;e[39]!==r?(Ie=w.jsx("button",{onClick:r,className:"p-1.5 text-neutral-500 hover:text-neutral-900 hover:bg-neutral-100 dark:hover:text-neutral-300 dark:hover:bg-neutral-800 rounded transition-colors",children:Ne}),e[39]=r,e[40]=Ie):Ie=e[40];let rt;e[41]!==we||e[42]!==Ie?(rt=w.jsxs("div",{className:"shrink-0 h-12 px-4 flex items-center justify-between border-b border-neutral-200 dark:border-neutral-800",children:[me,w.jsxs("div",{className:"flex items-center gap-1",children:[we,Ie]})]}),e[41]=we,e[42]=Ie,e[43]=rt):rt=e[43];let lt;e[44]!==B.length?(lt=B.length===0&&w.jsxs("div",{className:"text-center text-neutral-500 dark:text-neutral-400 text-sm py-8",children:[w.jsx(Dl,{size:24,className:"mx-auto mb-3 text-amber-500/50"}),w.jsx("p",{className:"mb-2",children:"Ask me to help build your request"}),w.jsx("p",{className:"text-xs text-neutral-400 dark:text-neutral-500",children:'Examples: "Create a POST request to /api/users with a JSON body" or "Add an Authorization header"'})]}),e[44]=B.length,e[45]=lt):lt=e[45];let Ct;if(e[46]!==ae||e[47]!==B){let ue;e[49]!==ae?(ue=(ye,ve)=>{const Te=H(ye);return w.jsx("div",{className:`text-sm ${ye.role==="user"?"bg-neutral-100 dark:bg-neutral-800 rounded-lg px-3 py-2":""}`,children:w.jsx("div",{className:ye.role==="user"?"text-neutral-900 dark:text-neutral-100":"text-neutral-700 dark:text-neutral-300",children:ye.role==="assistant"?Te?w.jsx(IK,{children:Te}):ae(ye,ve)?w.jsxs("span",{className:"flex items-center gap-2 text-neutral-400",children:[w.jsx(vf,{size:14,className:"animate-spin"}),"Thinking..."]}):null:w.jsx("span",{className:"whitespace-pre-wrap",children:Te})})},ye.id)},e[49]=ae,e[50]=ue):ue=e[50],Ct=B.map(ue),e[46]=ae,e[47]=B,e[48]=Ct}else Ct=e[48];let Wt;e[51]!==G||e[52]!==B?(Wt=G&&(B.length===0||B[B.length-1]?.role==="user")&&w.jsx("div",{className:"text-sm",children:w.jsx("div",{className:"text-neutral-800 dark:text-neutral-200",children:w.jsxs("span",{className:"flex items-center gap-2 text-neutral-400",children:[w.jsx(vf,{size:14,className:"animate-spin"}),"Thinking..."]})})}),e[51]=G,e[52]=B,e[53]=Wt):Wt=e[53];let Tt;e[54]===Symbol.for("react.memo_cache_sentinel")?(Tt=w.jsx("div",{ref:m}),e[54]=Tt):Tt=e[54];let en;e[55]!==lt||e[56]!==Ct||e[57]!==Wt?(en=w.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 min-h-0",children:[lt,Ct,Wt,Tt]}),e[55]=lt,e[56]=Ct,e[57]=Wt,e[58]=en):en=e[58];let De;e[59]===Symbol.for("react.memo_cache_sentinel")?(De=ue=>u(ue.target.value),e[59]=De):De=e[59];let ct;e[60]===Symbol.for("react.memo_cache_sentinel")?(ct={maxHeight:"120px"},e[60]=ct):ct=e[60];let Ye;e[61]!==I||e[62]!==l||e[63]!==G?(Ye=w.jsx("textarea",{ref:p,value:l,onChange:De,onKeyDown:I,placeholder:aS.placeholder,rows:1,disabled:G,className:"flex-1 px-3 py-2 bg-neutral-50 border border-neutral-200 dark:bg-neutral-800 dark:border-neutral-700 rounded-lg text-neutral-900 dark:text-neutral-100 text-sm placeholder-neutral-400 resize-none focus:outline-none focus:ring-2 focus:ring-amber-500/50 focus:border-amber-500 disabled:opacity-50",style:ct}),e[61]=I,e[62]=l,e[63]=G,e[64]=Ye):Ye=e[64];const xn=G?"button":"submit",wn=G?j:void 0;let ge;e[65]!==l||e[66]!==G?(ge=!G&&!l.trim(),e[65]=l,e[66]=G,e[67]=ge):ge=e[67];let $e;e[68]!==G?($e=G?w.jsx(k3,{size:16}):w.jsx(_3,{size:16}),e[68]=G,e[69]=$e):$e=e[69];let Oe;e[70]!==xn||e[71]!==wn||e[72]!==ge||e[73]!==$e?(Oe=w.jsx("button",{type:xn,onClick:wn,disabled:ge,className:"p-2 bg-amber-500 hover:bg-amber-400 disabled:bg-neutral-300 dark:disabled:bg-neutral-700 disabled:text-neutral-500 text-white rounded-lg transition-colors",children:$e}),e[70]=xn,e[71]=wn,e[72]=ge,e[73]=$e,e[74]=Oe):Oe=e[74];let xe;e[75]!==Ye||e[76]!==Oe?(xe=w.jsxs("div",{className:"flex items-end gap-2",children:[Ye,Oe]}),e[75]=Ye,e[76]=Oe,e[77]=xe):xe=e[77];let We;e[78]!==Y||e[79]!==xe?(We=w.jsx("form",{onSubmit:Y,className:"shrink-0 p-3 border-t border-neutral-200 dark:border-neutral-800",children:xe}),e[78]=Y,e[79]=xe,e[80]=We):We=e[80];let ne;return e[81]!==rt||e[82]!==en||e[83]!==We?(ne=w.jsxs("div",{className:"w-96 shrink-0 bg-white border border-neutral-200 dark:bg-neutral-900 dark:border-neutral-800 flex flex-col rounded-xl overflow-hidden",children:[rt,en,We]}),e[81]=rt,e[82]=en,e[83]=We,e[84]=ne):ne=e[84],ne}function DK(t){return t.parts.filter(jK).map(LK).join("").replace(/^undefined/,"")}function LK(t){return t.content}function jK(t){return t.type==="text"&&!!t.content}function zK(t){return t>=200&&t<300?"bg-emerald-500/20 text-emerald-400 border-emerald-500/30":t>=300&&t<400?"bg-amber-500/20 text-amber-400 border-amber-500/30":t>=400&&t<500?"bg-orange-500/20 text-orange-400 border-orange-500/30":t>=500?"bg-rose-500/20 text-rose-400 border-rose-500/30":"bg-gray-500/20 text-gray-400 border-gray-500/30"}function GS(t){return t<1024?`${t} B`:t<1024*1024?`${(t/1024).toFixed(2)} KB`:`${(t/(1024*1024)).toFixed(2)} MB`}function PK(){const t=Ue.c(16),{request:e}=Fn(),n=e?.http?.response||e?.grpc?.response;if(!n)return null;let r;t[0]!==n?(r="statusCode"in n?n:{statusCode:n.error?0:200,status:n.error||"OK",duration:n.duration,body:{size:n.body?.length||0}},t[0]=n,t[1]=r):r=t[1];const s=r;let a;t[2]!==s.statusCode?(a=zK(s.statusCode),t[2]=s.statusCode,t[3]=a):a=t[3];const l=`inline-flex items-center px-2 py-0.5 rounded text-[10px] font-semibold border ${a}`,u=s.statusCode>0?s.status:"Error";let f;t[4]!==l||t[5]!==u?(f=w.jsx("span",{className:l,children:u}),t[4]=l,t[5]=u,t[6]=f):f=t[6];let h;t[7]===Symbol.for("react.memo_cache_sentinel")?(h=w.jsx("span",{className:"text-neutral-400 dark:text-neutral-500",children:"Time:"}),t[7]=h):h=t[7];let m;t[8]!==s.duration?(m=w.jsxs("div",{className:"flex items-center gap-2",children:[h,w.jsxs("span",{className:"text-neutral-700 dark:text-neutral-200 font-medium",children:[s.duration,"ms"]})]}),t[8]=s.duration,t[9]=m):m=t[9];let p;t[10]!==s?(p="body"in s&&s.body instanceof Blob?w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx("span",{className:"text-neutral-400 dark:text-neutral-500",children:"Size:"}),w.jsx("span",{className:"text-neutral-700 dark:text-neutral-200 font-medium",children:GS(s.body.size)})]}):"body"in s&&typeof s.body=="object"&&"size"in s.body?w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx("span",{className:"text-neutral-400 dark:text-neutral-500",children:"Size:"}),w.jsx("span",{className:"text-neutral-700 dark:text-neutral-200 font-medium",children:GS(s.body.size)})]}):null,t[10]=s,t[11]=p):p=t[11];let y;return t[12]!==f||t[13]!==m||t[14]!==p?(y=w.jsxs("div",{className:"px-3 py-2 flex items-center gap-4 text-xs shrink-0",children:[f,m,p]}),t[12]=f,t[13]=m,t[14]=p,t[15]=y):y=t[15],y}function BK(){const t=Ue.c(13),{request:e,aiPanelOpen:n,toggleAiPanel:r,setMethod:s,setUrl:a,setHeaders:l,setQuery:u,setBody:f}=Fn();let h;t[0]===Symbol.for("react.memo_cache_sentinel")?(h=w.jsx(q3,{}),t[0]=h):h=t[0];let m;t[1]===Symbol.for("react.memo_cache_sentinel")?(m=w.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden gap-2 min-w-0",children:[w.jsx("div",{className:"flex-1 overflow-hidden min-h-0",children:w.jsx(kP,{})}),w.jsx(PK,{})]}),t[1]=m):m=t[1];let p;t[2]!==n||t[3]!==e||t[4]!==f||t[5]!==l||t[6]!==s||t[7]!==u||t[8]!==a||t[9]!==r?(p=n&&Sy().ai?.model&&w.jsx(MK,{isOpen:n,onClose:r,request:e,setters:{setMethod:s,setUrl:a,setHeaders:l,setQuery:u,setBody:f}}),t[2]=n,t[3]=e,t[4]=f,t[5]=l,t[6]=s,t[7]=u,t[8]=a,t[9]=r,t[10]=p):p=t[10];let y;return t[11]!==p?(y=w.jsxs("div",{className:"h-screen flex bg-neutral-50 dark:bg-[#0d0d0d] py-2 pr-2 pl-1 gap-2 text-neutral-900 dark:text-neutral-100",children:[h,m,p]}),t[11]=p,t[12]=y):y=t[12],y}function $K(){const t=Ue.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=w.jsx(CD,{children:w.jsx(AD,{children:w.jsx(BK,{})})}),t[0]=e):e=t[0],e}V3().then(()=>{tO.createRoot(document.getElementById("root")).render(w.jsx(Q.StrictMode,{children:w.jsx(TO,{client:wk,children:w.jsx($K,{})})}))});
